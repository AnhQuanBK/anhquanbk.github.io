var R=Object.defineProperty;var v=(t,e,n)=>e in t?R(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var l=(t,e,n)=>(v(t,typeof e!="symbol"?e+"":e,n),n);import{f as I,g as O,i as G,a as _}from"./vendor.js";class x{constructor(e){l(this,"game");this.game=e}init(){}}class L{constructor(e){l(this,"game");l(this,"plugins");this.game=e,this.plugins={}}install(e,n,s,o){const r=new n(this.game);r.init(),this.plugins[e]=r}get(e){return this.plugins[e]}}class M{constructor(){l(this,"game");l(this,"plugins");l(this,"ads");l(this,"auth");l(this,"audio");l(this,"event");l(this,"match");l(this,"player");l(this,"profile");l(this,"context");l(this,"storage");l(this,"language");l(this,"analytics");l(this,"leaderboard");l(this,"frameCapture");l(this,"monitorError");l(this,"console");l(this,"profiler");this.game=this,this.plugins=new L(this.game)}async boot(){}async start(){}}const k={Game:M,Plugins:{BasePlugin:x}};window.Phaser=k;var $=(t=>(t.CORE_READY="core-ready",t.SWITCH_SCENE="switch-scene",t.OPENING_SCREEN="opening-screen",t.OPEN_SCREEN="open-screen",t.OPENED_SCREEN="opened-screen",t.CLOSING_SCREEN="closing-screen",t.CLOSE_SCREEN="close-screen",t.CLOSED_SCREEN="closed-screen",t.LANGUAGE_CHANGED="language-changed",t.NEW_CONFIG_DETECTED="new-config-detected",t.HOT_RELOAD="hot-reload",t))($||{});const j=(t,e=1)=>Array.from({length:Math.ceil(t.length/e)},(n,s)=>t.slice(s*e,s*e+e)),V=(t,e)=>t.filter(n=>!e.includes(n)),H=t=>{for(let e=t.length-1;e>0;e--){const n=Math.floor(Math.random()*(e+1));[t[e],t[n]]=[t[n],t[e]]}},W=(t,e,n)=>n.indexOf(t)===e&&t!==null&&t!==void 0,J=t=>t.filter(W),z={chunk:j,difference:V,shuffle:H,unique:J},q=()=>FBInstant.getPlatform()==="ANDROID",K=()=>{const t=navigator.userAgent;return/Windows|Mac OS/i.test(t)&&!/like Mac OS/.test(t)},Z=()=>FBInstant.getPlatform()==="IOS",Q=()=>{const t=navigator.userAgent;return/Android|iP[ao]d|iPhone/i.test(t)},Y=()=>FBInstant.getPlatform()==="MOBILE_WEB",X=()=>Math.round(window.devicePixelRatio)||1,tt=()=>{const{Device:t}=u.Utils,{vibrate:e}=window.navigator;return t.isAndroid()&&typeof e=="function"||t.isMobileWeb()&&typeof e=="function"||t.isIOS()},et=t=>{try{if(!tt())return!1;const{Device:e}=u.Utils;return e.isAndroid()||e.isMobileWeb()?st(t):e.isIOS()&&nt(t).catch(n=>{}),!0}catch{return!1}},nt=async t=>{const e=Math.round(t/80);let n=0;const s=async()=>{try{await FBInstant.performHapticFeedbackAsync()}catch{}};for(;n<e;){const o=s(),r=u.Utils.Time.sleepAsync(80);n+=1,await Promise.all([o,r])}},st=t=>{window.navigator.vibrate(0),window.navigator.vibrate(t)},ot={isDesktop:K,isMobile:Q,isAndroid:q,isIOS:Z,isMobileWeb:Y,pixelRatio:X,vibrate:et},rt=async()=>{try{const{analytics:t}=window.game,{SHORTCUT_CREATE:e,SHORTCUT_CREATE_POPUP:n}=u.Plugins.Analytics.Events,o=(await FBInstant.player.getDataAsync(["lastCallCreateShortcut"])||{}).lastCallCreateShortcut||0;if(o&&u.Utils.Time.isToday(+o))return;const r=Date.now();if(FBInstant.player.setDataAsync({lastCallCreateShortcut:r}),!FBInstant.getSupportedAPIs().includes("canCreateShortcutAsync"))return;if(await FBInstant.canCreateShortcutAsync()){t.event(n);try{await u.Utils.Valid.isValueChangeAsync(window.__sdkInitiated,!0),await FBInstant.createShortcutAsync(),t.event(e,{success:!0});return}catch{t.event(e,{success:!1});return}}return}catch{}},it=async t=>{try{const{message:e,delayTime:n}=t,{GameTitle:s,GameImage:o}=u.Configs.Notification;await FBInstant.graphApi.requestAsync("/me/notifications","POST",{message:JSON.stringify({title:s,body:e,media_url:o}),schedule_interval:n})}catch{}},ct=async()=>{try{const{analytics:t}=window.game,{BOT_SUBSCRIBE:e,BOT_SUBSCRIBE_POPUP:n}=u.Plugins.Analytics.Events;if(!FBInstant.getSupportedAPIs().includes("player.canSubscribeBotAsync"))return!1;if(await FBInstant.player.canSubscribeBotAsync()){const i=(await FBInstant.player.getDataAsync(["lastCallSubscribeBot"])||{}).lastCallSubscribeBot||0;if(i&&u.Utils.Time.isToday(+i))return!1;const a=Date.now();FBInstant.player.setDataAsync({lastCallSubscribeBot:a}),t.event(n);try{return await u.Utils.Valid.isValueChangeAsync(window.__sdkInitiated,!0),await FBInstant.player.subscribeBotAsync(),t.event(e,{success:!0}),!0}catch{return t.event(e,{success:!1}),!1}}return!1}catch{return!1}},at={createShortcut:rt,sendNotification:it,subscribeBot:ct},lt=(t,e,n)=>{let s,o=!1;return function(...i){const a=()=>{clearTimeout(s),t(...i)};clearTimeout(s),s=setTimeout(a,e),n&&!o&&(t(...i),o=!0)}},h=t=>{const e=new Map;return(...n)=>{const s=JSON.stringify(n);if(e.has(s))return e.get(s);const o=t(...n);return e.set(s,o),o}},ut={debounce:lt,memoize:h},ft=h((t,e)=>{if(!u.Utils.Valid.isObject(e))return"?";const n=t.toLowerCase();if(!u.Utils.Object.hasOwn(e,n))return"?";if(typeof t=="string"){const s=e[n];if(typeof s=="string")return s}return"?"}),gt=h(t=>{let e=null;const n=[],s=/:([A-Z0-9?]+)/gm;for(;(e=s.exec(t))!==null;)n.push(e[1]);return n}),dt=h(t=>{let e=null;const n=[],s=/([0-9]+[A-Z?]{1}|[A-Z?]{1})/gm;for(;(e=s.exec(t))!==null;){const o=e[0];if(o.length>=2){const{length:r}=o,i=o.slice(0,r-1),a=o[r-1],c=new Array(+i).fill(a);n.push(...c);continue}n.push(o)}return n}),ht=(t,e)=>{const n=t,s=u.Utils.Object.invert(e),o={};let r=0,i=0;return gt(n).forEach(c=>{r=0,i++,o[i]||(o[i]={}),dt(c).forEach(f=>{r++;const m=ft(f,s);o[i][r]=m})}),o},mt=h((t,e)=>{if(!u.Utils.Valid.isObject(e)||!u.Utils.Object.hasOwn(e,t))return"?";const n=e[t];return typeof n=="string"?`${n.toUpperCase()}`:"?"}),E=(t,e,n=!1)=>{let s="";if(!u.Utils.Valid.isObject(t))return s;let o="",r=1;for(const i in t){if(!u.Utils.Object.hasOwn(t,i))continue;const a=t[i];if(u.Utils.Valid.isObject(a)){s+=`:${E(a,e,!0)}`;continue}if(!u.Utils.Valid.isString(a))continue;const c=mt(a,e);c===o?(r++,s=s.slice(0,-2)):r=1,s+=`${r}${c}`,o=c}return s=s.replace(/1([A-Z])/g,"$1"),s},pt=(t,e)=>{try{if(!t)return"";if(e){let n=atob(t);const s=btoa(e);return n=n.replace(s,"="),atob(n)}else return atob(t)}catch{return""}},bt=(t,e)=>{try{if(!t)return"";if(e){let n=btoa(t);const s=btoa(e);return n=n.replace("=",s),btoa(n)}else return btoa(t)}catch{return""}},yt=()=>({}),y={},p=t=>(y[t]||(y[t]=yt()),y[t]),A=(t,e)=>{const n=p(e),s=Object.keys(n).length;n[t]=s+1},Ct=(t,e,n=1)=>{let s=t[0];const o=[];let r=p(n);if(e)for(const c in e)A(c,n);for(let c=1;c<t.length;c++){const g=t[c],f=`${s}${g}`;c++,s=t[c],r[f]===void 0&&(A(f,n),r=p(n))}s=t[0];let i=1,a=0;for(;i<t.length;){const c=t[i],g=`${s}${c}`,f=wt(t.slice(a),r);if(f!==null){o.push(r[f]),i+=f.length-g.length,s="",a=i+1,i++;continue}r[g]===void 0?s=g:(o.push(r[g]),s="",a=i+1),i++}return o},wt=(t,e)=>{let n=Object.keys(e);return n=n.filter(s=>t.startsWith(s)&&t!==s),n.length===0?null:n.sort((s,o)=>o.length-s.length)[0]},At=t=>{const e={};for(const n in t)e[t[n]]=n;return e},St=(t,e,n=1)=>{let s="",o="",r=p(n);e&&(r={...e,...r});const i=At(r);for(const a in t){const c=t[a];i[c]!==void 0?s=i[c]:s="?",o+=s}return o},It={decodeMap:ht,encodeMap:E,hashToString:pt,stringToHash:bt,lwzCompress:Ct,lwzDecompress:St},Ot={},P=t=>{try{return JSON.parse(t)}catch{return null}},U=t=>{try{return JSON.stringify(t,null,0)}catch{return""}},$t=t=>P(U(t)),Et={clone:$t,decode:P,encode:U},Pt=(t,e)=>{const{fractionalDigits:n=0,startAbbreviate:s=1e3,abbreviateStep:o=3,maxLength:r=-1,removeLastZero:i=!0,suffixes:a=["","k","m","b","t","q"]}=e||{},c=r===-1?99999999:r;if(t>=s){const B=Math.floor(t/10**o),b=Math.floor((B.toString().length-1)/o)+1,N=(t/(10**o)**b).toFixed(n),T=c-a[b].length,w=N.substring(0,T);return(i?S(w):w)+a[b]}const g=t.toFixed(n),f=c-a[0].length,m=g.substring(0,f);return i?S(m):m+a[0]},S=t=>{if(t.indexOf(".")<0)return t;for(let e=t.length-1;e>=0;e--){if(t[e]==".")return t.substring(0,e);if(t[e]!="0")return t.substring(0,e+1)}return t},Ut=(t,e,n="0")=>{let s=t.toString();const o=s.length;for(let r=0;r<e-o;r++)s=n+s;return s},Dt=(t,e,n="0")=>{let s=t.toString();const o=s.length;for(let r=0;r<e-o;r++)s=s+n;return s},Ft={toAbbreviatedString:Pt,padStart:Ut,padEnd:Dt},d=t=>{const e=typeof t=="object"||typeof t=="function",n=Array.isArray(t);return t!==null&&e&&!n},Bt=t=>t==null,D=t=>{if(!d(t))return t;for(const e in t)if(Bt(t[e]))delete t[e];else{const n=t[e];d(n)&&(t[e]=D(n))}return t},Nt=t=>Object.assign({},t),C=(t,e)=>!t||!e?!1:Object.prototype.hasOwnProperty.call(t,e),Tt=t=>{const e={};return Object.keys(t).forEach(n=>{if(!C(t,n))return;const s=t[n];typeof s=="string"&&(e[s]=n)}),e},Rt=(t,e)=>{const n={};for(let s=0;s<t.length;s++){const o=t[s];C(o,e)&&(n[e]=o)}return n},F=(t,e)=>{for(const n in e)d(t[n])&&d(e[n])?F(t[n],e[n]):t[n]=e[n];return t},vt={clone:Nt,clear:D,hasOwn:C,invert:Tt,keyBy:Rt,merge:F},Gt="https://raw.githubusercontent.com/BetaVN/betavn.github.io/main/remote-config-test/DefaultConfig.json",_t=async t=>fetch(t,{cache:"no-cache"}).then(e=>{if(!e.ok)throw new Error(e.statusText);return e.json()}),xt=async()=>{const{enabled:t}=window.GameCore.Configs.RemoteConfig.API;if(!t)return null;try{return await _t(Gt)}catch{}return null},Lt=async()=>{const{enabled:t}=window.GameCore.Configs.RemoteConfig.Firebase;if(!window.RemoteConfig||!t)return"";const e=window.RemoteConfig;return await I(e),O(e,"gameConfig").asString()},Mt="https://raw.githubusercontent.com/BetaVN/betavn.github.io/main/remote-config-test/DefaultConfig.json",kt=async t=>fetch(t,{cache:"no-cache"}).then(e=>{if(!e.ok)throw new Error(e.statusText);return e.json()}),jt=async()=>{const{enabled:t}=window.GameCore.Configs.RemoteConfig.API;if(!t)return;let e=window.GameCore.Configs;try{e=await kt(Mt)}catch{}finally{window.GameCore.Configs=e}},Vt='{"apiKey":"AIzaSyD0jIsqpQD98Q2fQEIR0hXAi4oAmPptWx0","authDomain":"remote-config-example-360ff.firebaseapp.com","projectId":"remote-config-example-360ff","storageBucket":"remote-config-example-360ff.appspot.com","messagingSenderId":"207500131166","appId":"1:207500131166:web:73657131ba845843616dcf","measurementId":"G-2EVQTP57EG"}',Ht=JSON.parse(Vt),Wt=async()=>{const{enabled:t}=window.GameCore.Configs.RemoteConfig.Firebase;if(!t)return;let n={gameConfig:JSON.stringify(window.GameCore.Configs)};try{window.Firebase=G(Ht),window.RemoteConfig=_(window.Firebase);const s=window.RemoteConfig;s.settings.minimumFetchIntervalMillis=1e4,await I(s),n={gameConfig:O(s,"gameConfig").asString()}}catch{}finally{window.GameCore.Configs=JSON.parse(n.gameConfig)}},Jt={initializeConfigWithAPI:jt,initializeConfigWithFirebase:Wt,getNewConfigWithAPI:xt,getNewConfigWithFirebase:Lt},zt=t=>{const e=t.replace(/[-_\s.]+(.)?/g,(n,s)=>s?s.toUpperCase():"");return e.substr(0,1).toUpperCase()+e.substr(1)},qt=t=>{const e=t.replace(/[-_\s.]+(.)?/g,(n,s)=>s?s.toUpperCase():"");return e.substr(0,1).toLowerCase()+e.substr(1)},Kt=t=>t&&t[0].toUpperCase()+t.slice(1),Zt=(t=16)=>{const e=s=>Math.floor(s).toString(t);return e(Date.now()/1e3)+" ".repeat(t).replace(/./g,()=>e(Math.random()*t))},Qt=t=>{const e=t?t.split("_"):[];let n=e.length>0?e[0]:"en_US";switch(n){case"id":case"in":n="id";break}return n},Yt=(t,e)=>{const n=t.split(" "),o=(n.length<=1?[...n]:[n[0],n.pop()]).join(" "),r=o.lastIndexOf(" ")||0,i=r>=0?r:e;return(o.length>e?o.substring(0,i):o).substring(0,e)},Xt=t=>{let e=0;if(t.length==0)return e;for(let n=0;n<t.length;n++){const s=t.charCodeAt(n);e=(e<<5)-e+s,e=e&e}return e},te=t=>Object.keys(t).reduce((n,s)=>{const o=t[s];return o!==void 0&&n.push(`${s}=${o}`),n},[]).join("&"),ee=(t,e)=>{const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789*#%&!";let s="",o=t;e!=null&&(o-=e.length,s+=e);for(let r=0;r<o;r++){const i=Math.floor(Math.random()*n.length);s+=n.charAt(i)}return s},ne="0123456789ABCDEF",se=(t="0x")=>{let e=t;for(let n=0;n<6;n++)e+=ne[Math.floor(Math.random()*16)];return e},oe=t=>t.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[đĐ]/g,n=>n==="đ"?"d":"D");function re(t,e=2){const n=[],s=t.split(" "),o=s.length;for(let r=o;r>=1;r--)for(let i=0;i<=o-r;i++){const c=s.slice(i,i+r).join(" ");t.split(c).length-1>=e&&!n.includes(c)&&c.length>1&&n.push(c)}return n.sort((r,i)=>r.length-i.length)}const ie={toCamelCase:qt,toUpperCamelCase:zt,capitalize:Kt,generateObjectId:Zt,getLanguageCode:Qt,getShortName:Yt,hashCode:Xt,params:te,random:ee,randomColor:se,removeDiacritics:oe,findDuplicateSubstrings:re},ce=t=>{const e=new Date(t),n=new Date;return e.getDate()===n.getDate()&&e.getMonth()===n.getMonth()&&e.getFullYear()===n.getFullYear()},ae=t=>new Promise(e=>setTimeout(e,t)),le={isToday:ce,sleepAsync:ae},ue=t=>typeof t=="boolean",fe="false",ge=()=>fe==="true",de=t=>typeof t=="function",he=t=>typeof t=="number",me=t=>["string","number","symbol"].indexOf(typeof t)>-1,pe=t=>typeof t=="string",be=(t,e,n)=>{const{timeout:s=1e3,checkInterval:o=100}=n||{};return new Promise(r=>{const i=setInterval(()=>{const a=typeof t=="function"?t():t,c=typeof e=="function"?e():e;a===c&&(clearInterval(i),r(!0))},o);s>0&&setTimeout(()=>{clearInterval(i),r(!1)},s)})},ye={isBoolean:ue,isDebugger:ge,isFunction:de,isNumber:he,isObject:d,isPropertyKey:me,isString:pe,isValueChangeAsync:be},Ce={Array:z,Device:ot,Facebook:at,Function:ut,Hash:It,Image:Ot,Json:Et,Object:vt,String:ie,Number:Ft,Time:le,Valid:ye,RemoteConfig:Jt},we=t=>t,Ae=(t,e)=>{var s;const n=(s=Object.getOwnPropertyDescriptor(t,e))==null?void 0:s.value;n&&Object.defineProperty(t,e,{get(){return we(n)},set(){}})},u={Utils:Ce,Configs:{ENV:"production",AppId:"",ApiHost:"https://fbig-singleplay-apps-dev.sunstudio.io",OtherHost:"https://leaderboards-dev.sunstudio.io",RemoteConfig:{API:{enabled:!0,minimumFetchInterval:3e4},Firebase:{enabled:!1,minimumFetchInterval:36e5}},Ads:{Enabled:!0,InterstitialPlacementId:"",VideoRewardsPlacementId:"",BannerPlacementId:"",BannerReloadPeriod:60,BannerHeight:{Desktop:70,Mobile:50},InterstitialAdOptions:{secondsFirstTime:60,secondsBetweenAds:30}},Gameplay:{StartAdAtLevel:2,MaxRescueCount:1,Tutorial:{ForceUseTutorial:!1}},Analytics:{GoogleAnalytics:{consoleLog:!1},FacebookAnalytics:{prefix:"fba",consoleLog:!1}},LeadersBoard:{Limit:50,LeaderboardId:""},Notification:{Enable:!0,ApiUrl:"https://notifications.sunstudio.io",GameTitle:"Sun Studio",GameImage:"https://sunstudio.io/images/logo.png"},Mockup:{Ads:{Enable:!1,ErrorRate:5,GiphyApiKey:""},Match:{Enable:!1,CreateFailRate:5,PlayerInfo:{id:"player-mock",name:"Player Mock",photo:"",signature:""},OpponentInfo:{id:"opponent-mock",name:"Opponent Mock",photo:"",signature:""}},LeadersBoard:{Enable:!1}},Network:{MaximumRequest:6,Timeout:15e3,Retries:3},Debugger:{ShowConsole:!1,ShowProfiler:!1,EventLogging:!1,MonitorError:{Enable:!1,FilterError:{Codes:{accepted:[],ignored:["USER_INPUT","NETWORK_FAILURE"]},Messages:{accepted:[],ignored:["Load image failed"]}},ListPlayerDevIds:[]}}},Plugins:{},Events:$};window.GameCore=u;Ae(window,"GameCore");export{u as G,k as P,Ae as w};
