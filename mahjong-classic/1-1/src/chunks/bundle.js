System.register([], function(_export, _context) { return { execute: function () {
System.register("chunks:///GeneralUtils-906950c0.js",["./rollupPluginModLoBabelHelpers-7ef300de.js","cc"],(function(e){var t,n,r,a,i,s,o,u,c,l,d,h,p,v,E,f,y,g,S,_,m,A,k,T,R,L,C,N,I,D,b,w;return{setters:[function(e){t=e.g,n=e.h,r=e.f,a=e.c,i=e.i,s=e.j,o=e.l,u=e.a,c=e.b,l=e.n,d=e.m,h=e.k},function(e){p=e.cclegacy,v=e.JsonAsset,E=e.Prefab,f=e.AnimationClip,y=e.ImageAsset,g=e.SpriteFrame,S=e.Font,_=e.assetManager,m=e.AudioClip,A=e.sp,k=e.ccenum,T=e.tween,R=e.Animation,L=e.find,C=e.UITransform,N=e.view,I=e.screen,D=e.math,b=e.game,w=e.director}],execute:function(){p._RF.push({},"244e9OHsmpDnpHQKeLzgiiX","GameEvents",void 0);var O=e("G",{WIDGET_RESIZED:"widget-resized",VIEW_RESIZED:"view-resized",REQUEST_VIEW_RESIZE:"request-view-resize",PRELOAD_SCREEN:"preload-screen",LAYOUT_CHANGED:"layout-changed",GAMEPLAY_UPDATE_CONFIG:"gameplay-update-config",UPGRADE_DYNAMIC_ATLAS:"upgrade-dynamic-atlas",ASSET_QUALITY_CHANGE:"asset-quality-change",REQUEST_UPGRADE_ASSET:"request-upgrade-asset",CLEAR_HYBRID_FILE_CACHE:"clear-hybrid-file-cache",PRELOAD_LANGUAGE:"preload-language",CHOOSE_LANGUAGE:"choose-language",LOCALIZE_APPLIED:"localize-applied",ERROR_OPEN_SCREEN:"error-open-screen"});p._RF.pop(),p._RF.push({},"5c76fxO2ppOqYp4WNO+Kavm","GameWorld",void 0);var x=e("a",{Layout:{Portrait:"portrait",Landscape:"landscape"},DesignSize:{Portrait:{WIDTH:1080,HEIGHT:2164},Landscape:{WIDTH:2732,HEIGHT:2164},Resolution:2.88},AcceptPortraitRatio:600/900,PRIMARY_LAYOUT:"auto",FULL_PORTRAIT_SIZE:!0,FULL_LANDSCAPE_SIZE:!0});p._RF.pop(),p._RF.push({},"358fdIqjFdNzZGa95REWt2F","Ads",void 0);var B=e("_",{MAX_BOTTOM_BANNER_RATIO:1/6});p._RF.pop();e("E",!1);p._RF.push({},"27101Dr1C9IFq4Thv9mNLal","Locales",void 0);e("d",["en","ru","es","de","fr","pt","it","zh","id","ja","tr"]);var P=e("t",{en:"fonts/Gabarito.fnt",ru:"fonts/Gabarito.fnt",es:"fonts/Gabarito.fnt",de:"fonts/Gabarito.fnt",fr:"fonts/Gabarito.fnt",pt:"fonts/Gabarito.fnt",it:"fonts/Gabarito.fnt",zh:"fonts/Gabarito.fnt",id:"fonts/Gabarito.fnt",ja:"fonts/Gabarito.fnt",tr:"fonts/Gabarito.fnt"}),F=e("s",{en:"fonts/Gabarito-VariableFont_wght.ttf",ru:"fonts/MYRIADPRO-REGULAR.ttf",es:"fonts/Gabarito-VariableFont_wght.ttf",de:"fonts/Gabarito-VariableFont_wght.ttf",fr:"fonts/Gabarito-VariableFont_wght.ttf",pt:"fonts/Gabarito-VariableFont_wght.ttf",it:"fonts/Gabarito-VariableFont_wght.ttf",zh:"fonts/Gabarito-VariableFont_wght.ttf",id:"fonts/Gabarito-VariableFont_wght.ttf",ja:"fonts/Gabarito-VariableFont_wght.ttf",tr:"fonts/Gabarito-VariableFont_wght.ttf"});e("L",{ru:"locales/ru",es:"locales/es",de:"locales/de",fr:"locales/fr",pt:"locales/pt",it:"locales/it",zh:"locales/zh",id:"locales/id",ja:"locales/ja",tr:"locales/tr"});p._RF.pop(),p._RF.push({},"d3c2a0dCmhOoKinH6/Rr9Tk","ResourceUtils",void 0);var M=Ludex.Utils,U=M.Function,G=M.Time,H=M.Device,J=["loadable","animations"],W=function(){var e=t(n().mark((function e(){var t;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;break;case 2:return e.prev=2,t=J.map((function(e){return Y.loadBundle(e)})),e.next=6,Promise.all(t);case 6:e.next=13;break;case 8:return e.prev=8,e.t0=e.catch(2),console.warn("ResourceUtils: initBundles failed",e.t0),e.next=13,G.sleepAsync(500);case 13:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(){return e.apply(this,arguments)}}(),Y=e("R",function(){function e(){a(this,e),this.bundles={loadable:null,animations:null},this.loadedPrefabDictionary={}}var s,o,u,c,l,d,h,p,k,T,R,L,C,N,I,D,b;return r(e,[{key:"getBundleNameByType",value:function(e){switch(e){case f:return"animations";default:return"loadable"}}},{key:"loadBundleByType",value:(b=t(n().mark((function t(r){var a;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=this.getBundleNameByType(r),t.abrupt("return",e.loadBundle(a));case 2:case"end":return t.stop()}}),t,this)}))),function(e){return b.apply(this,arguments)})},{key:"getBundleByType",value:function(e){var t,n=this.getBundleNameByType(e);return null!==(t=this.bundles[n])&&void 0!==t?t:null}},{key:"preloadAsset",value:(D=t(n().mark((function e(t,r,a){var i,s=this;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadBundleByType(r);case 2:if(i=this.getBundleByType(r)){e.next=5;break}return e.abrupt("return");case 5:return e.abrupt("return",new Promise((function(e,n){i.preload(t,r,(function(i){if(i)return console.warn("Failed to preload asset at path: ".concat(t),i),void n(i);a?s.loadAssetAsync(t,r).finally(e):e()}))})));case 6:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return D.apply(this,arguments)})},{key:"loadAssetAsync",value:(I=t(n().mark((function e(t,r){var a,i;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadBundleByType(r);case 2:if(a=this.getBundleByType(r)){e.next=5;break}return e.abrupt("return",null);case 5:if(!(i=this.getAsset(t,r))){e.next=8;break}return e.abrupt("return",i);case 8:return e.abrupt("return",new Promise((function(e,n){a.load(t,r,(function(r,a){a?e(a):(console.warn("[ResourceUtils] Failed to load asset at path: ".concat(t),r),n(null))}))})));case 9:case"end":return e.stop()}}),e,this)}))),function(e,t){return I.apply(this,arguments)})},{key:"loadAssetsAsync",value:(N=t(n().mark((function e(t,r){var a,i,s,o,u,c,l;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadBundleByType(r);case 2:if(a=this.getBundleByType(r)){e.next=5;break}return e.abrupt("return",null);case 5:for(i=[],s=[],o=0,u=t.length;o<u;o++)c=t[o],(l=this.getAsset(c,r))?i.push({index:o,asset:l}):s.push({index:o,path:c});if(0!==s.length){e.next=10;break}return e.abrupt("return",Promise.resolve(i.map((function(e){return e.asset}))));case 10:return e.abrupt("return",new Promise((function(e){a.load(s.map((function(e){return e.path})),r,(function(t,n){if(t||n.length!==s.length)e(null);else{for(var r=0,a=n.length;r<a;r++){var o,u=n[r];if(u){var c=null===(o=s[r])||void 0===o?void 0:o.index;if(!c)return;i.splice(c,0,{index:c,asset:u})}}e(i.map((function(e){return e.asset})))}}))})));case 11:case"end":return e.stop()}}),e,this)}))),function(e,t){return N.apply(this,arguments)})},{key:"loadDirAsync",value:(C=t(n().mark((function e(t,r){var a;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadBundleByType(r);case 2:if(a=this.getBundleByType(r)){e.next=5;break}return e.abrupt("return",Promise.resolve([]));case 5:return e.abrupt("return",new Promise((function(e){a.loadDir(t,r,(function(n,r){r?e(r):(console.warn("Failed to load assets at path: ".concat(t),n),e([]))}))})));case 6:case"end":return e.stop()}}),e,this)}))),function(e,t){return C.apply(this,arguments)})},{key:"preloadDirAsync",value:(L=t(n().mark((function e(t,r,a){var i,s=this;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadBundleByType(r);case 2:if(i=this.getBundleByType(r)){e.next=5;break}return e.abrupt("return");case 5:return e.abrupt("return",new Promise((function(e,n){i.preloadDir(t,r,(function(i){if(i)return console.warn("Failed to preload assets at path: ".concat(t),i),void n(i);a?s.loadDirAsync(t,r).finally(e):e()}))})));case 6:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return L.apply(this,arguments)})},{key:"getAsset",value:function(t,n){var r=this.getBundleByType(n);if(!r)return null;var a=e.getAssetInfo(t,n);return a?r.get(a.path,n):null}},{key:"loadFontAsync",value:function(e,t){var n=P[e];switch(t){case"fnt":n=P[e];break;case"ttf":n=F[e]}var r=n.replace(/\.[^.]+$/,"");return this.loadAssetAsync(r,S)}},{key:"loadSpriteFramesAsync",value:(R=t(n().mark((function e(t){var r,a,s,o,u=arguments;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=!(u.length>1&&void 0!==u[1])||u[1],e.next=3,this.loadAssetsAsync(t,g);case 3:if(a=e.sent){s=i(a);try{for(s.s();!(o=s.n()).done;)o.value.packable=r}catch(e){s.e(e)}finally{s.f()}}return e.abrupt("return",a);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return R.apply(this,arguments)})}],[{key:"inst",get:function(){return this._instance||(this._instance=new e),this._instance}},{key:"loadBundle",value:(T=t(n().mark((function e(t){var r=this;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;break;case 2:if(!this.inst.bundles[t]){e.next=4;break}return e.abrupt("return",!0);case 4:if(!_.bundles.get(t)){e.next=6;break}return e.abrupt("return",!0);case 6:return e.abrupt("return",new Promise((function(e,n){var a=setTimeout((function(){console.warn("[ResourceUtils] load bundle timeout (15s): ".concat(t)),n(!1)}),15e3);_.loadBundle(t,null,(function(i,s){clearTimeout(a);var o=r.inst.bundles[t];o||!i&&s?(r.inst.bundles[t]=null!=o?o:s,e(!0)):n(i)}))})));case 7:case"end":return e.stop()}}),e,this)}))),function(e){return T.apply(this,arguments)})},{key:"loadAudioAsync",value:(k=t(n().mark((function e(t){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.inst.loadAssetAsync(t,m));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return k.apply(this,arguments)})},{key:"loadJsonAsync",value:(p=t(n().mark((function e(t){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.inst.loadAssetAsync(t,v));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return p.apply(this,arguments)})},{key:"isPrefabLoaded",value:function(e){return!!this.inst.loadedPrefabDictionary[e]}},{key:"getPrefab",value:function(e){return this.isPrefabLoaded(e)?this.inst.loadedPrefabDictionary[e]:null}},{key:"loadPrefabAsync",value:(h=t(n().mark((function e(t){var r,a,i=arguments;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>1&&void 0!==i[1]&&i[1],e.next=3,this.inst.loadAssetAsync(t,E);case 3:return(a=e.sent)&&r&&(this.inst.loadedPrefabDictionary[t]=a),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return h.apply(this,arguments)})},{key:"loadAnimClipAsync",value:(d=t(n().mark((function e(t){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.inst.loadAssetAsync(t,f));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return d.apply(this,arguments)})},{key:"loadSkeletonDataAsync",value:(l=t(n().mark((function e(t){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.inst.loadAssetAsync(t,A.SkeletonData));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return l.apply(this,arguments)})},{key:"loadImageSpriteFrameAsync",value:(c=t(n().mark((function e(t){var r;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.inst.loadAssetAsync(t,y);case 2:return r=e.sent,e.abrupt("return",r?g.createWithImage(r):null);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return c.apply(this,arguments)})},{key:"loadSpriteFrameAsync",value:(u=t(n().mark((function e(t){var r,a,i=arguments;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=!(i.length>1&&void 0!==i[1])||i[1],e.next=3,this.inst.loadAssetAsync(t,g);case 3:return(a=e.sent)&&(a.packable=r),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return u.apply(this,arguments)})},{key:"loadSpriteFramesDirAsync",value:(o=t(n().mark((function e(t){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.inst.loadDirAsync(t,g));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"preloadJson",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.inst.preloadAsset(e,v,t)}},{key:"preloadPrefab",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.inst.preloadAsset(e,E,t)}},{key:"preloadAnimClip",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.inst.preloadAsset(e,f,t)}},{key:"preloadImageSpriteFrame",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.inst.preloadAsset(e,y,t)}},{key:"preloadSpriteFrame",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.inst.preloadAsset(e,g,t)}},{key:"preloadSpriteFramesDir",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.inst.preloadDirAsync(e,g,t)}},{key:"getAssetInfo",value:function(e,t){var n=this.inst.getBundleByType(t);return n?n.getInfoWithPath(e,t):null}},{key:"loadFontAsync",value:function(e,t){return this.inst.loadFontAsync(e,t)}},{key:"loadSpriteFramesAsync",value:(s=t(n().mark((function e(t){var r,a=arguments;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=!(a.length>1&&void 0!==a[1])||a[1],e.abrupt("return",this.inst.loadSpriteFramesAsync(t,r));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})},{key:"getImageScale",value:function(){var e=H.pixelRatio();return e=e>2.5?3:e>1.5?2:1}}]),e}());U.retryAsync(W,W),p._RF.pop(),p._RF.push({},"ddc38QKdbBJopxEXU4f64/0","LevelManager",void 0);var V=Ludex.Utils.Time,K="levels-compress/",j=3120,X=!1,z=3,Z=2e3,q=30,Q=e("y",function(){function e(){a(this,e),this.level=1,this.maxLevel=1,this.promisePreloadLevel={},this.loadedLevel={},this.stepLevel=q,this.tryCount=0,this.levelStartTimes=0,this.seedsByLevel={}}var o,u,c,l,d,h;return r(e,null,[{key:"inst",get:function(){return this._instance||(this._instance=new e),this._instance}},{key:"getLevel",value:function(){return this.inst.level}},{key:"getMaxLevel",value:function(){return this.inst.maxLevel}},{key:"getPlayerLevel",value:function(){var e,t;return null!==(e=null===(t=codex.player.getGameData())||void 0===t?void 0:t.level)&&void 0!==e?e:1}},{key:"getMaxGameLevel",value:function(){return j}},{key:"getStepLevel",value:function(){return this.inst.stepLevel}},{key:"increaseTryCount",value:function(){this.inst.tryCount+=1}},{key:"getTryCount",value:function(){return this.inst.tryCount}},{key:"resetTryCount",value:function(){this.inst.tryCount=0}},{key:"getLevelStartTimes",value:function(){return this.inst.levelStartTimes}},{key:"increaseLevelStartTimes",value:function(){this.inst.levelStartTimes+=1}},{key:"setLevel",value:function(e){this.inst.level=Math.min(e,j),this.resetTryCount()}},{key:"setMaxLevel",value:function(e){this.inst.maxLevel=Math.min(e,j),codex.player.setGameData({level:e})}},{key:"nextLevel",value:function(){var e=this.getLevel();this.setLevel(e+1),this.setMaxLevel(e+1),this.preloadCurrentLevel()}},{key:"preloadCurrentLevel",value:(h=t(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.preloadLevelDataAsync(this.getLevel());case 2:return e.next=4,this.preloadLevelDataAsync(this.getLevel()+1);case 4:case"end":return e.stop()}}),e,this)}))),function(){return h.apply(this,arguments)})},{key:"getKeyLevel",value:function(e){var t=Ludex.Utils.Number.padStart(e,6);return"level_".concat(t)}},{key:"getCurrentKeyLevel",value:function(){return this.getKeyLevel(this.getLevel())}},{key:"getLevelPath",value:function(e){var t=Math.floor((e-1)/this.inst.stepLevel),n=Ludex.Utils.Number.padStart(t*this.inst.stepLevel+1,6);return"level_".concat(n,"-").concat(this.inst.stepLevel)}},{key:"preloadLevelDataAsync",value:(d=t(n().mark((function e(t){var r,a,i,s,o,u,c,l,d;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((r=t||this.getLevel())>j)){e.next=3;break}return e.abrupt("return");case 3:if(a=this.getKeyLevel(r),i=this.getLevelPath(r),!(s=this.inst.loadedLevel[a])){e.next=9;break}return console.log("has loaded level",{currentLevel:r,levelKey:a,levelPath:i}),e.abrupt("return",s);case 9:return o=!Object.keys(this.inst.promisePreloadLevel).includes(i)||X,console.log("should preload level",i,o),o&&(this.inst.promisePreloadLevel[i]=this.preloadLevelWithRetry(r,z,Z)),e.next=14,this.inst.promisePreloadLevel[i];case 14:if(u=e.sent){e.next=19;break}delete this.inst.promisePreloadLevel[i],e.next=31;break;case 19:c=1;case 20:if(!(c<=u.length)){e.next=29;break}if(void 0!==(l=u[c-1])){e.next=24;break}return e.abrupt("continue",26);case 24:d=Math.floor((r-1)/this.inst.stepLevel)*this.inst.stepLevel+c,this.inst.loadedLevel[this.getKeyLevel(d)]=l;case 26:c++,e.next=20;break;case 29:return console.log("preload success",{levelKey:a}),e.abrupt("return",this.inst.loadedLevel[a]);case 31:case"end":return e.stop()}}),e,this)}))),function(e){return d.apply(this,arguments)})},{key:"preloadLevelWithRetry",value:(l=t(n().mark((function e(t){var r,a,i,s=arguments;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>1&&void 0!==s[1]?s[1]:3,a=s.length>2&&void 0!==s[2]?s[2]:2e3,!(r<0)){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,this.preloadLevel(t);case 6:if(i=e.sent){e.next=11;break}return e.next=10,V.sleepAsync(a);case 10:return e.abrupt("return",this.preloadLevelWithRetry(t,r-1));case 11:return e.abrupt("return",i);case 12:case"end":return e.stop()}}),e,this)}))),function(e){return l.apply(this,arguments)})},{key:"preloadLevel",value:(c=t(n().mark((function e(t){var r,a,s,o,u,c,l,d,h,p,v,E,f,y,g,S,_;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=this.getLevelPath(t),a="".concat(K).concat(r),e.next=6,Y.loadJsonAsync(a);case 6:if(s=e.sent){e.next=9;break}return e.abrupt("return");case 9:for(o=s.json,u=1;u<=o.length;u++)if(null!==o[u-1]){c=o[u-1],l=this.getKeyLevel(Math.floor((t-1)/this.inst.stepLevel)*this.inst.stepLevel+u),d=0,h=i(c.layers);try{for(h.s();!(p=h.n()).done;)v=p.value,d+=v.tiles.length}catch(e){h.e(e)}finally{h.f()}E=c.seeds,f=[],y=i(E);try{for(y.s();!(g=y.n()).done;)S=g.value,_=this.decodePacked(S,d),f.push(_)}catch(e){y.e(e)}finally{y.f()}this.inst.seedsByLevel[l]=f}return console.log("preloadLevel success",t),e.abrupt("return",o);case 15:return e.prev=15,e.t0=e.catch(0),e.abrupt("return",void 0);case 18:case"end":return e.stop()}}),e,this,[[0,15]])}))),function(e){return c.apply(this,arguments)})},{key:"getLevelDataAsync",value:(u=t(n().mark((function e(t){var r;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.preloadLevelDataAsync(t||this.getLevel());case 3:return r=e.sent,e.abrupt("return",r);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return");case 10:case"end":return e.stop()}}),e,this,[[0,7]])}))),function(e){return u.apply(this,arguments)})},{key:"getLevelData",value:function(e){var t=this.getKeyLevel(e||this.getLevel());return this.inst.loadedLevel[t]}},{key:"getSeedByLevel",value:function(e){console.log("asasas Try count",this.getTryCount());var t=this.getKeyLevel(e||this.getLevel()),n=this.inst.seedsByLevel[t];if(n)return s(n[0])}},{key:"hasLevelData",value:function(e){var t=this.getKeyLevel(null!=e?e:this.getLevel());return void 0!==this.inst.loadedLevel[t]}},{key:"getBitLength",value:function(e){return Math.ceil(Math.log2(e))}},{key:"base64ToArray",value:function(e){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=[],r=0;r<e.length;r+=4){var a=t.indexOf(e.charAt(r)),i=t.indexOf(e.charAt(r+1)),s="="===e.charAt(r+2)?0:t.indexOf(e.charAt(r+2)),o=a<<2|i>>4,u=(15&i)<<4|s>>2,c=(3&s)<<6|("="===e.charAt(r+3)?0:t.indexOf(e.charAt(r+3)));n.push(o),"="!==e.charAt(r+2)&&n.push(u),"="!==e.charAt(r+3)&&n.push(c)}return n}},{key:"decodePacked",value:function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50,r=this.getBitLength(n),a=this.base64ToArray(e),i=[],s=0,o=0;o<t;o++){for(var u=0,c=0;c<r;c++){var l=Math.floor(s/8),d=s%8,h=a[l]>>d&1;u|=h<<c,s++}i.push(u)}return i}},{key:"setCustomLevelData",value:(o=t(n().mark((function e(t,r){var a,s,o,u,c,l,d,h,p,v,E;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("Loading custom level data..."),a=this.getKeyLevel(r||this.getLevel()),this.inst.loadedLevel[a]=t,s=0,o=i(t.layers);try{for(o.s();!(u=o.n()).done;)c=u.value,s+=c.tiles.length}catch(e){o.e(e)}finally{o.f()}l=t.seeds,d=[],h=i(l);try{for(h.s();!(p=h.n()).done;)v=p.value,E=this.decodePacked(v,s),d.push(E)}catch(e){h.e(e)}finally{h.f()}this.inst.seedsByLevel[a]=d;case 11:case"end":return e.stop()}}),e,this)}))),function(e,t){return o.apply(this,arguments)})}]),e}());p._RF.pop(),p._RF.push({},"d159egaUVVLHKLg1UL865ub","SoundKeys",void 0);var $=Ludex.Utils.Object,ee="sounds/",te=e("q",{BG_MUSIC:"".concat(ee,"bg-music"),BUTTON_CLICK:"".concat(ee,"button-click"),HAND_CLAP:"".concat(ee,"hand-clap"),LEVEL_FAIL:"".concat(ee,"level-fail"),LEVEL_PASS:"".concat(ee,"level-pass"),LOST_STAR_IN_GAMEPLAY:"".concat(ee,"lost-star-in-gameplay"),RAISE_STAR:"".concat(ee,"raise-star"),SPAWN_COINS:"".concat(ee,"spawn-coins"),STAR_RAISE:"".concat(ee,"star-raise"),TOUCH_START:"".concat(ee,"touch-start"),POPUP_SHOW:"".concat(ee,"popup-show"),POPUP_HIDE:"".concat(ee,"popup-off"),TILE_CLICK:"".concat(ee,"tile-click"),TILE_SHOW:"".concat(ee,"tile-show"),TILE_DESELECT:"".concat(ee,"tile-deselect"),TILE_MATCH_1:"".concat(ee,"tile-match-1"),TILE_MATCH_2:"".concat(ee,"tile-match-2"),TILE_MATCH_3:"".concat(ee,"tile-match-3"),TILE_MATCH_4:"".concat(ee,"tile-match-4"),TILE_MATCH_5:"".concat(ee,"tile-match-5"),ENCOURAGE_GOOD:"".concat(ee,"good"),ENCOURAGE_GREAT:"".concat(ee,"great"),ENCOURAGE_AMAZING:"".concat(ee,"amazing"),ENCOURAGE_AWESOME:"".concat(ee,"awesome"),USE_HINT:"".concat(ee,"use-hint"),USE_UNDO:"".concat(ee,"use-undo"),USE_SHUFFLE:"".concat(ee,"use-shuffle"),YOU_WIN:"".concat(ee,"you-win"),YOU_LOSE:"".concat(ee,"you-lose")}),ne=$.vals(te),re=e("n",ne.reduce((function(e,t,n){return $.assign(e,o({},t,n))}),{}));k(re);e("o",$.invert(re));p._RF.pop(),p._RF.push({},"2113dSiFcdKCJK3F10MNHVP","AnimAbortSignalAdapter",void 0);var ae=Ludex.Utils.Signal,ie=function(){function e(t){a(this,e),this.oldCallbacks=[],this.newCallbacks=[],this.signal=t}return r(e,[{key:"once",value:function(e){var t=this,n=function(){return e(new Error(t.signal.reason))};this.oldCallbacks.push(n),this.newCallbacks.push(e),this.signal.addAbortListener(n)}},{key:"off",value:function(e){var t=this.newCallbacks.indexOf(e);if(-1!==t){var n=this.oldCallbacks[t];this.signal.removeAbortListener(n),this.oldCallbacks.splice(t,1),this.newCallbacks.splice(t,1)}}},{key:"abort",value:function(e){var t=e instanceof Error?e.message:e;this.signal.abort(t)}},{key:"aborted",get:function(){return this.signal.aborted}},{key:"reason",get:function(){return"string"==typeof this.signal.reason?new Error(this.signal.reason):void 0}},{key:"wrap",value:function(e){if(!this.aborted)return e}},{key:"chain",value:function(e){var t=this;e instanceof ae.Signal?e.once((function(){return t.abort()})):e.addEventListener("abort",(function(){return t.abort()}))}},{key:"promise",value:function(){var e=this;return this.aborted?Promise.resolve(this.reason):new Promise((function(t){e.once((function(e){return t(e)}))}))}}]),e}();p._RF.pop(),p._RF.push({},"c7c0e+0tjZA7aG6a9yUNytM","AnimUtils",void 0);var se=Ludex.Utils.Signal;function oe(e){return e instanceof se.Signal?e:new ie(e)}var ue,ce=e("r",function(){function e(){a(this,e)}return r(e,null,[{key:"inst",get:function(){return this._instance||(this._instance=new e),this._instance}},{key:"elasticOut",value:function(e,t,n){var r=t||.1,a=n||.1;if(0===e)return 0;if(1===e)return 1;var i=a/4;return r<1?r=1:i=a*Math.asin(1/t)/(2*Math.PI),r*Math.pow(2,-10*e)*Math.sin((e-i)*(2*Math.PI)/a)+1}},{key:"easeOutExpo",value:function(e){return 1===e?1:1-Math.pow(2,-10*e)}},{key:"easeInExpo",value:function(e){return 0===e?0:Math.pow(2,10*e-10)}},{key:"runTweenAsync",value:function(e,t){if(void 0===t)return new Promise((function(t){e.call((function(){return t({tween:e})})).start()}));var n=oe(t);return n.aborted?Promise.resolve({tween:e}):new Promise((function(t){var r=function(){e.stop(),t({tween:e})};n.once(r),e.call((function(){n.off(r),t({tween:e})})).start()}))}},{key:"runOnUpdateAsync",value:function(e,t,n,r){return new Promise((function(a,i){var s=T(e).to(t,{},{onUpdate:function(e,t){if(void 0!==t)try{n(t)}catch(e){i(e instanceof Error?e:new Error(String(e)))}}});if(void 0!==r){var o=oe(r);if(o.aborted)a({tween:s});else{var u=function(){s.stop(),a({tween:s})};o.once(u),s.call((function(){o.off(u),a({tween:s})})).start()}}else s.call((function(){return a({tween:s})})).start()}))}},{key:"waitTweenAsync",value:function(e,t){return new Promise((function(n){var r=T({}).delay(e);if(void 0!==t){var a=oe(t);if(a.aborted)n();else{var i=function(){r.stop(),n()};a.once(i),r.call((function(){a.off(i),n()})).start()}}else r.call((function(){return n()})).start()}))}},{key:"runAnimationAsync",value:function(e,t,n){if(void 0===n)return new Promise((function(n){e.once(R.EventType.FINISHED,n),e.play(t)}));var r=oe(n);return r.aborted?Promise.resolve():new Promise((function(n){var a=function(){e.stop(),n()};r.once(a),e.once(R.EventType.FINISHED,(function(){r.off(a),n()})),e.play(t)}))}}]),e}());p._RF.pop(),p._RF.push({},"31871PLRYRJu7yCCX5F6lWK","AudioUtils",void 0);var le=Ludex.Utils,de=le.Signal,he=le.Device,pe=e("p",function(){function e(){a(this,e),this.signalController=new de.SignalController}var i,s,o,u,c;return r(e,[{key:"sound",get:function(){var e;return null===(e=L("Sound"))||void 0===e?void 0:e.getComponent("Sound")}},{key:"music",get:function(){var e;return null===(e=L("Music"))||void 0===e?void 0:e.getComponent("Music")}}],[{key:"inst",get:function(){return this._instance||(this._instance=new e),this._instance}},{key:"muteAudio",value:function(e){this.muteMusic(e),this.muteSound(e)}},{key:"playSound",value:(c=t(n().mark((function e(t,r){var a;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null===(a=this.inst.sound)||void 0===a?void 0:a.play(t,r));case 1:case"end":return e.stop()}}),e,this)}))),function(e,t){return c.apply(this,arguments)})},{key:"pauseSound",value:function(e){var t;null===(t=this.inst.sound)||void 0===t||t.pause(e)}},{key:"resumeSound",value:function(e){var t;null===(t=this.inst.sound)||void 0===t||t.resume(e)}},{key:"stopSound",value:function(e){var t;null===(t=this.inst.sound)||void 0===t||t.stop(e)}},{key:"stopAllSounds",value:function(){var e;null===(e=this.inst.sound)||void 0===e||e.stopAll()}},{key:"muteSound",value:function(e){var t;null===(t=this.inst.sound)||void 0===t||t.mute(e)}},{key:"playMusic",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.inst.music&&(!e&&this.inst.music.playing(te.BG_MUSIC)||this.inst.music.play(te.BG_MUSIC))}},{key:"pauseMusic",value:function(){var e;null===(e=this.inst.music)||void 0===e||e.pause(te.BG_MUSIC)}},{key:"muteMusic",value:function(e){var t;null===(t=this.inst.music)||void 0===t||t.mute(e)}},{key:"turnUpMusic",value:(u=t(n().mark((function e(){var t,r;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((null!==(t=null===(r=this.inst.music)||void 0===r?void 0:r.getVolume())&&void 0!==t?t:0)>.8)){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,this.setVolumeMusic(.8,!0);case 5:case"end":return e.stop()}}),e,this)}))),function(){return u.apply(this,arguments)})},{key:"turnDownMusic",value:(o=t(n().mark((function e(){var t,r;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((null!==(t=null===(r=this.inst.music)||void 0===r?void 0:r.getVolume())&&void 0!==t?t:0)<.3)){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,this.setVolumeMusic(.3,!0);case 5:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"turnOffMusic",value:(s=t(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setVolumeMusic(0);case 2:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"getVolumeMusic",value:function(){var e,t;return null!==(e=null===(t=this.inst.music)||void 0===t?void 0:t.getVolume())&&void 0!==e?e:0}},{key:"setVolumeMusic",value:(i=t(n().mark((function e(t){var r,a,i,s,o,u=this,c=arguments;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=c.length>1&&void 0!==c[1]&&c[1],this.inst.music){e.next=3;break}return e.abrupt("return");case 3:if(a=this.inst.signalController.renew(),r){e.next=7;break}return null===(i=this.inst.music)||void 0===i||i.setVolume(t),e.abrupt("return");case 7:return s=this.inst.music.getVolume(),o=s,e.next=11,ce.runOnUpdateAsync(this.inst.music.node,1,(function(e){u.inst.music&&(o=s+(t-s)*e,u.inst.music.setVolume(o))}),a);case 11:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"fixAudioForIOSOnFocus",value:function(){try{if(he.isIOS()){var e=document.getElementById("GameCanvas");if(!e)return;e.removeEventListener("mousedown",this.resetAudioContext),e.removeEventListener("touchstart",this.resetAudioContext),e.addEventListener("mousedown",this.resetAudioContext,{once:!0}),e.addEventListener("touchstart",this.resetAudioContext,{once:!0})}}catch(e){console.error("error",e)}}}]),e}());ue=pe,pe.resetAudioContext=t(n().mark((function e(){var t,r,a;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,null===(t=window.globalAudioContext)||void 0===t?void 0:t.suspend();case 3:return e.next=5,null===(r=window.globalAudioContext)||void 0===r?void 0:r.resume();case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("error",e.t0);case 10:return e.prev=10,(a=document.getElementById("GameCanvas"))&&(a.removeEventListener("mousedown",ue.resetAudioContext),a.removeEventListener("touchstart",ue.resetAudioContext)),e.finish(10);case 14:case"end":return e.stop()}}),e,null,[[0,7,10,14]])}))),p._RF.pop(),p._RF.push({},"05faedSJ2NHFqLe9b3g4RIl","CocosUtils",void 0);var ve,Ee,fe=Ludex.Utils.Device,ye=x.DesignSize.Resolution,ge=e("C",function(){function e(){a(this,e)}return r(e,[{key:"getBoundingBoxTo",value:function(e,t){var n=D.mat4();D.Mat4.fromSRT(n,t.getRotation(),t.getPosition(),t.getScale());var r=t.getComponent(C);if(!r)throw new Error("Node must have UITransform component");var a=r.anchorPoint,s=r.contentSize,o=s.width,u=s.height,c=new D.Rect(-a.x*o,-a.y*u,o,u),l=D.mat4();if(D.Mat4.multiply(l,e,n),c.transformMat4(l),!t.children||0===t.children.length)return c;var d,h=t.children,p=t.getWorldMatrix(),v=i(h);try{for(v.s();!(d=v.n()).done;){var E=d.value;if(null!=E&&E.active)if(E.getComponent(C)){var f=this.getBoundingBoxTo(p,E);f&&D.Rect.union(c,c,f)}}}catch(e){v.e(e)}finally{v.f()}return c}}],[{key:"inst",get:function(){return this._instance||(this._instance=new e),this._instance}},{key:"getBoundingBoxToWorld",value:function(e){if(e.parent){var t=e.parent.getWorldMatrix();return this.inst.getBoundingBoxTo(t,e)}var n=e.getComponent(C);if(!n)throw new Error("Node must have UITransform component");return n.getBoundingBox()}},{key:"worldSizeToCssSize",value:function(e){var t=Math.min(fe.pixelRatio(),ye);return Math.round(e*t)}},{key:"cssSizeToWorldSize",value:function(e){var t=N.getScaleX(),n=I.devicePixelRatio;return Math.round(e/t*n)}},{key:"getScreenWidthCss",value:function(){var e=document,t=e.body,n=e.documentElement,r=t.clientWidth,a=n.clientWidth;return Math.max(a,r)||0}},{key:"getScreenHeightCss",value:function(){var e=document,t=e.body,n=e.documentElement,r=t.clientHeight,a=n.clientHeight;return Math.max(a,r)||0}},{key:"getGameZoomCustom",value:function(){return this.cssSizeToWorldSize(1)}}]),e}());p._RF.pop(),p._RF.push({},"0eeb868JeVE67iFwhbkRCmE","ScreenKeys",void 0);var Se=e("j",function(e){return e[e.LOADING_SCREEN=1]="LOADING_SCREEN",e[e.SETTINGS_SCREEN=2]="SETTINGS_SCREEN",e[e.NOTIFICATION_SCREEN=3]="NOTIFICATION_SCREEN",e[e.LOSE_SCREEN=4]="LOSE_SCREEN",e[e.WINNING_SCREEN=5]="WINNING_SCREEN",e[e.CONGRATULATION_SCREEN=6]="CONGRATULATION_SCREEN",e[e.OPTIONS_SCREEN=7]="OPTIONS_SCREEN",e[e.FREE_ITEM_SCREEN=8]="FREE_ITEM_SCREEN",e[e.THEME_SCREEN=9]="THEME_SCREEN",e[e.SHOP_SCREEN=10]="SHOP_SCREEN",e[e.TOURNAMENT_POPUP_SCREEN=11]="TOURNAMENT_POPUP_SCREEN",e[e.TOURNAMENT_LEADERBOARD_SCREEN=12]="TOURNAMENT_LEADERBOARD_SCREEN",e[e.TOURNAMENT_INFO_SCREEN=13]="TOURNAMENT_INFO_SCREEN",e[e.ITEM_WARN_SCREEN=14]="ITEM_WARN_SCREEN",e[e.REWARD_SCREEN=15]="REWARD_SCREEN",e[e.CHALLENGE_FRIEND_COMPLETE_SCREEN=16]="CHALLENGE_FRIEND_COMPLETE_SCREEN",e[e.TOURNAMENT_COMPLETE_SCREEN=17]="TOURNAMENT_COMPLETE_SCREEN",e[e.LANGUAGES_SCREEN=18]="LANGUAGES_SCREEN",e[e.DAILY_QUEST_SCREEN=19]="DAILY_QUEST_SCREEN",e[e.DAILY_REWARD_SCREEN=20]="DAILY_REWARD_SCREEN",e[e.DAILY_CHALLENGE_SCREEN=21]="DAILY_CHALLENGE_SCREEN",e[e.BADGES_SCREEN=22]="BADGES_SCREEN",e[e.JOURNEY_LEVEL_SCREEN=23]="JOURNEY_LEVEL_SCREEN",e[e.JOURNEY_WINNING_SCREEN=24]="JOURNEY_WINNING_SCREEN",e[e.BADGE_REWARD_SCREEN=25]="BADGE_REWARD_SCREEN",e}(Se||{})),_e=(e("a0",{NOTIFICATION_SCREEN:1001,LOADING_SCREEN:1e3,OTHERS_SCREEN:1}),e("k",(o(ve={},Se.LOADING_SCREEN,"LoadingScreen"),o(ve,Se.SETTINGS_SCREEN,"SettingsScreen"),o(ve,Se.NOTIFICATION_SCREEN,"NotificationScreen"),o(ve,Se.LOSE_SCREEN,"LoseScreen"),o(ve,Se.WINNING_SCREEN,"WinningScreen"),o(ve,Se.CONGRATULATION_SCREEN,"CongratulationScreen"),o(ve,Se.OPTIONS_SCREEN,"OptionsScreen"),o(ve,Se.FREE_ITEM_SCREEN,"FreeItemScreen"),o(ve,Se.THEME_SCREEN,"ThemeScreen"),o(ve,Se.SHOP_SCREEN,"ShopScreen"),o(ve,Se.TOURNAMENT_POPUP_SCREEN,"TournamentPopupScreen"),o(ve,Se.TOURNAMENT_LEADERBOARD_SCREEN,"TournamentLeaderboardScreen"),o(ve,Se.TOURNAMENT_INFO_SCREEN,"TournamentInfoScreen"),o(ve,Se.ITEM_WARN_SCREEN,"ItemWarnScreen"),o(ve,Se.REWARD_SCREEN,"RewardScreen"),o(ve,Se.CHALLENGE_FRIEND_COMPLETE_SCREEN,"ChallengeFriendCompleteScreen"),o(ve,Se.TOURNAMENT_COMPLETE_SCREEN,"TournamentCompleteScreen"),o(ve,Se.LANGUAGES_SCREEN,"LanguagesScreen"),o(ve,Se.DAILY_QUEST_SCREEN,"DailyQuestScreen"),o(ve,Se.DAILY_REWARD_SCREEN,"DailyRewardScreen"),o(ve,Se.DAILY_CHALLENGE_SCREEN,"DailyChallengeScreen"),o(ve,Se.BADGES_SCREEN,"BadgesScreen"),o(ve,Se.JOURNEY_LEVEL_SCREEN,"JourneyLevelScreen"),o(ve,Se.JOURNEY_WINNING_SCREEN,"JourneyWinningScreen"),o(ve,Se.BADGE_REWARD_SCREEN,"BadgeRewardScreen"),ve))),me=(o(Ee={},_e[Se.LOADING_SCREEN],Se.LOADING_SCREEN),o(Ee,_e[Se.SETTINGS_SCREEN],Se.SETTINGS_SCREEN),o(Ee,_e[Se.NOTIFICATION_SCREEN],Se.NOTIFICATION_SCREEN),o(Ee,_e[Se.LOSE_SCREEN],Se.LOSE_SCREEN),o(Ee,_e[Se.WINNING_SCREEN],Se.WINNING_SCREEN),o(Ee,_e[Se.CONGRATULATION_SCREEN],Se.CONGRATULATION_SCREEN),o(Ee,_e[Se.OPTIONS_SCREEN],Se.OPTIONS_SCREEN),o(Ee,_e[Se.FREE_ITEM_SCREEN],Se.FREE_ITEM_SCREEN),o(Ee,_e[Se.THEME_SCREEN],Se.THEME_SCREEN),o(Ee,_e[Se.SHOP_SCREEN],Se.SHOP_SCREEN),o(Ee,_e[Se.TOURNAMENT_POPUP_SCREEN],Se.TOURNAMENT_POPUP_SCREEN),o(Ee,_e[Se.TOURNAMENT_LEADERBOARD_SCREEN],Se.TOURNAMENT_LEADERBOARD_SCREEN),o(Ee,_e[Se.TOURNAMENT_INFO_SCREEN],Se.TOURNAMENT_INFO_SCREEN),o(Ee,_e[Se.REWARD_SCREEN],Se.REWARD_SCREEN),o(Ee,_e[Se.ITEM_WARN_SCREEN],Se.ITEM_WARN_SCREEN),o(Ee,_e[Se.CHALLENGE_FRIEND_COMPLETE_SCREEN],Se.CHALLENGE_FRIEND_COMPLETE_SCREEN),o(Ee,_e[Se.TOURNAMENT_COMPLETE_SCREEN],Se.TOURNAMENT_COMPLETE_SCREEN),o(Ee,_e[Se.LANGUAGES_SCREEN],Se.LANGUAGES_SCREEN),o(Ee,_e[Se.DAILY_QUEST_SCREEN],Se.DAILY_QUEST_SCREEN),o(Ee,_e[Se.DAILY_REWARD_SCREEN],Se.DAILY_REWARD_SCREEN),o(Ee,_e[Se.DAILY_CHALLENGE_SCREEN],Se.DAILY_CHALLENGE_SCREEN),o(Ee,_e[Se.BADGES_SCREEN],Se.BADGES_SCREEN),o(Ee,_e[Se.JOURNEY_LEVEL_SCREEN],Se.JOURNEY_LEVEL_SCREEN),o(Ee,_e[Se.JOURNEY_WINNING_SCREEN],Se.JOURNEY_WINNING_SCREEN),o(Ee,_e[Se.BADGE_REWARD_SCREEN],Se.BADGE_REWARD_SCREEN),[_e[Se.NOTIFICATION_SCREEN],_e[Se.LOADING_SCREEN]]);p._RF.pop(),p._RF.push({},"a0dcdDZxhZImZ8Cfg4Dc7SJ","ScreenUtils",void 0);var Ae=codex.event,ke=Ludex,Te=ke.Events,Re=ke.Utils.Array,Le=e("S",function(){function e(){a(this,e),this.showedScreens=[],this.loadedScreens={}}var i,s;return r(e,null,[{key:"inst",get:function(){return this._instance||(this._instance=new e),this._instance}},{key:"preloadScreen",value:function(e){var t=_e[e];t&&Ae.emit(O.PRELOAD_SCREEN,{screenName:t})}},{key:"preloadScreens",value:function(){Ae.emit(Te.PRELOAD_SCREENS)}},{key:"openScreen",value:function(e,t){var n=_e[e];console.log("ScreenUtils: Opening screen:",n,t),Ae.emit(Te.OPEN_SCREEN,{screenName:n,screenData:t})}},{key:"closeScreen",value:function(e,t){var n=_e[e];console.log("ScreenUtils: Closing screen:",n,t),t?Ae.emit(Te.CLOSE_SCREEN,{screenName:n,screenData:t}):Ae.emit(Te.CLOSE_SCREEN,{screenName:n})}},{key:"openScreenAndWaitForClose",value:function(e,t){var n=this;return new Promise((function(r){n.openScreen(e,t);Ae.on(Te.CLOSE_SCREEN,(function t(n){n.screenName===_e[e]&&(Ae.off(Te.CLOSE_SCREEN,t),r(n))}))}))}},{key:"openScreenAndWaitForClosed",value:function(e,t){var n=this;return new Promise((function(r){n.openScreen(e,t);Ae.on(Te.CLOSED_SCREEN,(function t(n){n.screenName===_e[e]&&(Ae.off(Te.CLOSED_SCREEN,t),r(n))}))}))}},{key:"showLoadingScreen",value:function(e){this.isScreenLoaded(_e[Se.LOADING_SCREEN])&&this.openScreen(Se.LOADING_SCREEN,{duration:e})}},{key:"closeLoadingScreen",value:function(){this.isScreenLoaded(_e[Se.LOADING_SCREEN])&&this.closeScreen(Se.LOADING_SCREEN)}},{key:"showNotificationScreen",value:function(e,t){this.openScreen(Se.NOTIFICATION_SCREEN,{message:e,duration:t})}},{key:"closeNotificationScreen",value:function(){this.closeScreen(Se.NOTIFICATION_SCREEN)}},{key:"addShowedScene",value:function(e){Re.has(this.inst.showedScreens,e)||this.inst.showedScreens.push(e)}},{key:"showLoadingFullScreen",value:(s=t(n().mark((function e(t){var r,a;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Re.has(this.inst.showedScreens,t)){e.next=2;break}return e.abrupt("return");case 2:if(this.addShowedScene(t),r=L("Loading")){e.next=6;break}return e.abrupt("return");case 6:return r.active=!0,a=r.getComponent("Loading"),e.next=10,a.show(t);case 10:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})},{key:"hideLoadingFullScreen",value:(i=t(n().mark((function e(t){var r,a;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Re.has(this.inst.showedScreens,t)){e.next=2;break}return e.abrupt("return");case 2:return a=null===(r=L("Loading"))||void 0===r?void 0:r.getComponent("Loading"),e.next=5,null==a?void 0:a.hide(t);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"showLoadingNotificationScreen",value:function(){this.openScreen(Se.NOTIFICATION_SCREEN,{message:"Loading",enableCloseOnTouch:!1})}},{key:"isScreenLoaded",value:function(e){var t;return null!==(t=this.inst.loadedScreens[e])&&void 0!==t&&t}},{key:"markIsScreenLoaded",value:function(e){this.inst.loadedScreens[e]=!0}}]),e}());p._RF.pop(),p._RF.push({},"ba77cUVKIVES7OzU5CC+5pq","AdsUtils",void 0);var Ce=Ludex,Ne=Ce.Configs,Ie=Ne.Ads,De=Ie.Enabled,be=Ie.InterstitialAdOptions,we=Ie.RewardedVideoAdOptions,Oe=Ie.RewardedInterstitialAdOptions,xe=Ie.BannerDisplayAdOptions,Be=Ne.Gameplay.StartAdAtLevel,Pe=Ce.Plugins.Ads,Fe=Pe.Types,Me=Pe.Status,Ue=Ce.Utils,Ge=Ue.Array,He=Ue.Function,Je=codex,We=Je.ads,Ye=Je.event,Ve=function(e){u(n,e);var t=c(n);function n(e){return a(this,n),t.call(this,"AdsUtils.loadAdAsync: Timed out after ".concat(e,"ms"))}return r(n)}(l(Error));e("A",function(){function e(){a(this,e),this.isAvoidBannerShowed=!1,this.isInterstitialRemoved=!1}var s,o,u,c,l;return r(e,[{key:"getAdReady",value:function(e,t){if(De)if(t){if(We.getAdStatus(e,t)===Me.FILLED)return t}else{var n,r=We.getAdsByType(e),a=i(r);try{for(a.s();!(n=a.n()).done;){var s=n.value;if(s.instance.status===Me.FILLED)return s.placementId}}catch(e){a.e(e)}finally{a.f()}}}},{key:"getPlacementIdByService",value:function(e,t){var n,r,a,i;if(!t)return!1;switch(e){case Fe.BANNER:return(null===(n=Ge.search(xe,(function(e){return e.AdService===t})))||void 0===n?void 0:n.PlacementId)||!1;case Fe.INTERSTITIAL:return(null===(r=Ge.search(be,(function(e){return e.AdService===t})))||void 0===r?void 0:r.PlacementId)||!1;case Fe.REWARDED_VIDEO:return(null===(a=Ge.search(we,(function(e){return e.AdService===t})))||void 0===a?void 0:a.PlacementId)||!1;case Fe.REWARDED_INTERSTITIAL:return(null===(i=Ge.search(Oe,(function(e){return e.AdService===t})))||void 0===i?void 0:i.PlacementId)||!1;default:return!1}}},{key:"getAdIdByPayload",value:function(e,t){var n=t||{},r=n.adService,a=n.placementId;return this.getPlacementIdByService(e,r)||a}},{key:"getAdErrorMessage",value:function(e,t){switch(e){case Fe.REWARDED_VIDEO:case Fe.REWARDED_INTERSTITIAL:return this.isUserCancelledAdError(t)?"noReward":"noAdsError";default:return null}}},{key:"showAdWithType",value:(l=t(n().mark((function t(r,a){var i,s,o,u,c,l,d,h,p,v,E,f,y,g;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s=(i=a||{}).placementId,o=i.includeSDK,u=i.excludeSDK,c=i.forceLoad,l=i.adService,d=i.timeout,h=void 0===d?5e3:d,this.canShowInSDK(o,u)){t.next=3;break}return t.abrupt("return",!1);case 3:if(p=this.getAdIdByPayload(r,a),v=!1,E=!1,t.prev=6,pe.muteAudio(!0),!c){t.next=15;break}return Le.showLoadingScreen(),t.next=12,He.timeOut(We.loadAdAsync(r,p),h);case 12:if("timeout"!==(f=t.sent).status){t.next=15;break}throw new Ve(f.duration);case 15:if(v){t.next=39;break}if(t.prev=16,y=this.getAdReady(r,p)){t.next=20;break}return t.abrupt("return",!1);case 20:return p=y,t.next=23,We.showAdAsync(r,p);case 23:v=!0,t.next=37;break;case 26:if(t.prev=26,t.t0=t.catch(16),!l){t.next=30;break}throw t.t0;case 30:if(!this.isUserCancelledAdError(t.t0)){t.next=32;break}throw t.t0;case 32:if(!this.isRequestAdTimeoutError(t.t0)){t.next=34;break}throw t.t0;case 34:p=void 0,v=!1,E=!0;case 37:t.next=15;break;case 39:return t.abrupt("return",!0);case 42:return t.prev=42,t.t1=t.catch(6),E=!0,(g=this.getAdErrorMessage(r,t.t1))&&Le.showNotificationScreen(g,2),t.abrupt("return",!1);case 48:return t.prev=48,pe.muteAudio(!1),pe.fixAudioForIOSOnFocus(),c&&Le.closeLoadingScreen(),E&&(p=s),e.preloadAdsByType(r,p),Ye.emit(O.REQUEST_VIEW_RESIZE),t.finish(48);case 56:case"end":return t.stop()}}),t,this,[[6,42,48,56],[16,26]])}))),function(e,t){return l.apply(this,arguments)})},{key:"canShowInSDK",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=GameSDK.getSDKName();return(null==t||!t.length||!Ge.has(t,n))&&!(null!=e&&e.length&&!Ge.has(e,n))}},{key:"isUserCancelledAdError",value:function(e){return e instanceof Object&&"code"in e&&"USER_INPUT"===e.code}},{key:"isRequestAdTimeoutError",value:function(e){return e instanceof Ve||e instanceof Object&&"code"in e&&"SHOW_ADS_TIMEOUT"===e.code}}],[{key:"inst",get:function(){return this._instance||(this._instance=new e),this._instance}},{key:"preloadAds",value:(c=t(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.preloadAdsByType(Fe.INTERSTITIAL),this.preloadAdsByType(Fe.REWARDED_VIDEO);case 2:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"isServiceDegraded",value:function(){return We.isServiceDegraded()}},{key:"preloadAdsByType",value:function(e,t){if(De){var n,r=We.getAdsByType(e),a=i(r);try{for(a.s();!(n=a.n()).done;){var s=n.value;if(!t||s.placementId===t)s.instance.status===Me.FILLED||We.loadAdAsync(e,s.placementId).catch((function(){}))}}catch(e){a.e(e)}finally{a.f()}}}},{key:"setAvoidBannerShowed",value:function(e){this.inst.isAvoidBannerShowed=e}},{key:"showBannerAds",value:function(){var e=this;if(De&&!this.inst.isAvoidBannerShowed){var t=N.getVisibleSize(),n=ge.worldSizeToCssSize(t.height*B.MAX_BOTTOM_BANNER_RATIO);xe.forEach((function(t){var r=t.PlacementId,a=t.Position,i=t.BannerHeight;"bottom"===a&&i>n||e.showBannerAd(r)}))}}},{key:"hideBannerAds",value:function(){var e=this;De&&We.getAdsByType(Fe.BANNER).forEach((function(t){t.instance.status!==Me.IDLE&&e.hideBannerAd(t.placementId)}))}},{key:"showBannerAd",value:function(e){this.inst.isAvoidBannerShowed||We.showBannerAdAsync(e).catch((function(e){}))}},{key:"hideBannerAd",value:function(e){We.hideBannerAdAsync(e).catch((function(e){}))}},{key:"isReadyAdShowable",value:function(e,t){var n=this.inst.getAdReady(e,t);return!!n&&We.canShowAd(e,n)}},{key:"showInterstitialAdAsync",value:(u=t(n().mark((function e(t){var r,a,i,s,o,u;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=t||{}).forLevel,a=r.contextType,i=r.forceLoad,!(Be>=Q.getPlayerLevel())){e.next=3;break}return e.abrupt("return",!1);case 3:if(!this.inst.isInterstitialRemoved){e.next=5;break}return e.abrupt("return",!1);case 5:return a&&(null===(s=window.GoogleAds)||void 0===s||s.setInterstitialType(a),null===(o=window.TranssionH5Ads)||void 0===o||o.setInterstitialType(a)),u=i,"MsGames"===GameSDK.getSDKName()&&(u=!0),e.abrupt("return",this.inst.showAdWithType(Fe.INTERSTITIAL,d(d({},t),{},{forceLoad:u})));case 9:case"end":return e.stop()}}),e,this)}))),function(e){return u.apply(this,arguments)})},{key:"showRewardVideoAdAsync",value:(o=t(n().mark((function e(t){var r,a,i;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=(t||{}).contextType)&&(null===(a=window.GoogleAds)||void 0===a||a.setRewardType(r),null===(i=window.TranssionH5Ads)||void 0===i||i.setRewardType(r)),e.abrupt("return",this.inst.showAdWithType(Fe.REWARDED_VIDEO,d(d({},t),{},{forceLoad:!0})));case 3:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"showRewardedInterstitialAdAsync",value:(s=t(n().mark((function e(t){var r,a,i;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=(t||{}).contextType)&&(null===(a=window.GoogleAds)||void 0===a||a.setRewardType(r),null===(i=window.TranssionH5Ads)||void 0===i||i.setRewardType(r)),e.abrupt("return",this.inst.showAdWithType(Fe.REWARDED_INTERSTITIAL,d(d({},t),{},{forceLoad:!0})));case 3:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})},{key:"getBannerAdsHeight",value:function(){if(!De||this.isInterstitialRemoved())return 0;try{var e=ge.getGameZoomCustom();return We.getBannerHeight(Ludex.Configs.Ads.BannerDisplayAdOptions[0].PlacementId,e,!0)}catch(e){return 0}}},{key:"checkRemoveAdEndTime",value:function(){var t=codex.player.getGameData().removeAdEndTime;t&&(t>Date.now()&&(e.setAvoidBannerShowed(!0),this.inst.isInterstitialRemoved=!0,e.hideBannerAds()))}},{key:"isInterstitialRemoved",value:function(){return this.inst.isInterstitialRemoved}},{key:"getRemoveAdDayLeft",value:function(){if(!this.inst.isInterstitialRemoved)return 0;var e=codex.player.getGameData().removeAdEndTime;if(!e||e<Date.now())return 0;var t=Date.now(),n=Math.ceil((e-t)/864e5);return n>0?n:1}}]),e}());p._RF.pop(),p._RF.push({},"32598ObpVZK/pecmWIdcs+7","SceneKeys",void 0);var Ke=e("i",{TEST_SCENE:"TestScene",BOOT_SCENE:"BootScene",DASHBOARD_SCENE:"DashboardScene",GAME_SCENE:"GameScene",ENDLESS_SCENE:"EndlessScene",DRAFT_SCENE:"DraftScene",TEST_LAYOUT_SCENE:"TestLayoutScene",TEST_PERFORMANCE_SCENE:"TestPerformanceScene",TEST_PARTICLE_SYSTEM_SCENE:"TestParticleSystemScene",TEST_TEXT_PERFORMANCE_SCENE:"TestTextPerformanceScene"});p._RF.pop(),p._RF.push({},"97ca9J9nzNCeIjC1l+ZT/Hm","SceneUtils",void 0);var je=codex.event,Xe=Ludex.Events;e("h",function(){function e(){a(this,e),this.loadedScenes={}}var i,s;return r(e,null,[{key:"inst",get:function(){return this._instance||(this._instance=new e),this._instance}},{key:"switchScene",value:function(e,t){je.emit(Xe.SWITCH_SCENE,{sceneName:e,sceneData:t})}},{key:"preloadScene",value:function(e){je.emit(Xe.PRELOAD_SCENE,{sceneName:e})}},{key:"isSceneLoaded",value:function(e){var t;return null!==(t=this.inst.loadedScenes[e])&&void 0!==t&&t}},{key:"markIsSceneLoaded",value:function(e){this.inst.loadedScenes[e]=!0}},{key:"markIsTestScene",value:function(e){je.emit(Xe.MARK_IS_TEST_SCENE,{sceneName:e})}},{key:"preloadDashboardScene",value:function(){this.preloadScene(Ke.DASHBOARD_SCENE)}},{key:"switchToDashboardScene",value:function(e){this.switchScene(Ke.DASHBOARD_SCENE,e)}},{key:"preloadGameScene",value:(s=t(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.preloadScene(Ke.GAME_SCENE);case 1:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"switchToGameScene",value:(i=t(n().mark((function e(t){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.switchScene(Ke.GAME_SCENE,t);case 1:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"switchToEndlessScene",value:function(e){this.switchScene(Ke.ENDLESS_SCENE,e)}},{key:"getSceneData",value:function(e){return"data"in e.scene&&e.scene.data||{}}}]),e}());p._RF.pop(),p._RF.push({},"adb272QtfxDGZ+87PwkWEiN","GameSettings",void 0);var ze,Ze,qe=e("Z",{MaxLevel:325,WaitForPassSecs:6});p._RF.pop(),p._RF.push({},"0cad13CYsZKPaWdXt+Su+Im","ItemKeys",void 0);var Qe,$e=e("v",function(e){return e[e.UNDO=1]="UNDO",e[e.HINT=2]="HINT",e[e.SHUFFLE=3]="SHUFFLE",e}($e||{})),et=e("Q",function(e){return e[e.DISABLE=1]="DISABLE",e[e.ENABLE=2]="ENABLE",e[e.INFINITE=3]="INFINITE",e}(et||{})),tt=e("I",(o(ze={},$e.UNDO,"UndoItem"),o(ze,$e.HINT,"HintItem"),o(ze,$e.SHUFFLE,"ShuffleItem"),ze));o(Ze={},tt[$e.UNDO],$e.UNDO),o(Ze,tt[$e.HINT],$e.HINT),o(Ze,tt[$e.SHUFFLE],$e.SHUFFLE);p._RF.pop(),p._RF.push({},"f8533KH/fxOfYqya9sgLrSj","GameData",void 0);var nt=e("c",{level:1,coins:0,totalLevel:qe.MaxLevel,passAllLevels:!1,levelProgress:{},endlessScore:0,items:(Qe={},o(Qe,tt[$e.UNDO],{count:1,isFirstUse:!0}),o(Qe,tt[$e.HINT],{count:1,isFirstUse:!0}),o(Qe,tt[$e.SHUFFLE],{count:1,isFirstUse:!0}),Qe),removeAdEndTime:0,tournamentData:{tournamentId:"",leaderboardId:"",endTime:0,bestScore:0,lastTournamentRankReward:0,isPlayerJoined:!1,isFirstTimeJoinedTournament:!0},dailyQuest:{currentStage:1,quests:[],rewarded:[],lastLoginTime:0},offlineReward:{lastLoginTime:Date.now()},journeyData:{lastSeason:1,currentLevel:1,claimBadges:[]},lastClaimDailyReward:0,dailyChallenge:[],limitAds:{lastLoginTime:0,shuffleItem:0,hintItem:0,lastWatchedAdTime:0}});p._RF.pop(),p._RF.push({},"81357D/nvZMwbk3RGzw68tq","AnalyticsEvents",void 0);var rt=e("x",{LEVEL_START:"level_start",LEVEL_RESCUE:"level_rescue",LEVEL_END:"level_end",LEVEL_RETRY:"level_retry",LEVEL_PROGRESS:"level_progress",LEVEL_AUTO_FINISH:"level_auto_finish",EARN_ITEM:"earn_item",USE_ITEM:"use_item",CANT_SHUFFLE:"cant_shuffle",TOURNAMENT_START:"tournament_start",TOURNAMENT_END:"tournament_end",TOURNAMENT_REWARDED:"tournament_rewarded",TOURNAMENT_SHARE:"tournament_share",TOURNAMENT_POST_SCORE:"tournament_post_score",TOURNAMENT_REFUSE:"tournament_refuse",TOURNAMENT_REJOIN:"tournament_rejoin",VIEW_ITEM_LIST:"view_item_list",SELECT_ITEM:"select_item",PURCHASE:"purchase",PURCHASE_CANCEL:"purchase_cancel",PAGE_FOLLOW:"page_follow",GROUP_JOIN:"group_join",TUTORIAL_START:"tutorial_start",TUTORIAL_STEP:"tutorial_step",TUTORIAL_COMPLETE:"tutorial_complete",THEME_TILE_CHANGE:"theme_tile_change",THEME_BACKGROUND_CHANGE:"theme_background_change",THEME_ENTRY_POINT_CHANGE:"theme_entry_point_change",DAILY_QUEST_GET_REWARD:"daily_quest_get_reward",DAILY_QUEST_GET_OLD_REWARD:"daily_quest_get_old_reward",DAILY_CHALLENGE_START:"daily_challenge_start",JOURNEY_START_LEVEL:"journey_start_level",JOURNEY_COMPLETE_LEVEL:"journey_complete_level",JOURNEY_GET_BADGE:"journey_get_badge"});p._RF.pop(),p._RF.push({},"a6e4bjV/RVH17qBEx1mZaFg","ResourcePaths",void 0);var at,it=e("u",function(e){return e.WATER_SURFACE_FRAME="sprites/water-surface/spriteFrame",e.IC_HAND_FRAME="sprites/ic-hand/spriteFrame",e.POISON_CIRCLE_FRAME="sprites/poison-circle/spriteFrame",e.DASHBOARD_CURTAIN_PREFIX="prefabs/dashboard-curtains/",e.POISON_BUBBLE_PREFAB="prefabs/PoisonBubble",e.DUST_PARTICLE_SPINE="spines/dust-particle/siwang_texiao",e.MAP_JSON_PREFIX="maps-json/",e.TILE_PREFIX="gameplay/tiles/",e.THEME_BACKGROUND_PREFIX="gameplay/background/",e.DAILY_BADGE_PREFIX="sprites/badges/daily/",e.JOURNEY_BADGE_PREFIX="sprites/badges/journey/",e.JOURNEY_UI_PREFIX="sprites/ui/journey/",e.CHALLENGE_BLOCK_PREFAB="gameplay/prefabs/ChallengeBlock",e.DAILY_QUEST_HEADER_PREFAB="gameplay/prefabs/DailyQuestHeader",e.CHALLENGE_PREPARE_PREFAB="gameplay/prefabs/ChallengePrepare",e.JOURNEY_BLOCK_PREFAB="gameplay/prefabs/JourneyBlock",e.BACKGROUND_PREFIX="sprites/background/",e.LEADERBOARD_PORTRAIT_BACKGROUND="tournament-portrait/spriteFrame",e.LEADERBOARD_LANDSCAPE_BACKGROUND="tournament-landscape/spriteFrame",e.DAILY_CHALLENGE_PORTRAIT_BACKGROUND="daily-challenge-portrait/spriteFrame",e.BADGE_PORTRAIT_BACKGROUND="badge-portrait/spriteFrame",e.JOURNEY_PORTRAIT_BACKGROUND="journey-portrait/spriteFrame",e.LOCALIZE_PREFIX="localized-sprites/",e}(it||{}));p._RF.pop(),p._RF.push({},"de1b7wbRJtDb5SdClqZPOi5","LayoutUtils",void 0);var st=x.Layout,ot=e("m",function(){function e(){a(this,e),this.currentLayout=st.Portrait,this.portraitBackground=null,this.landscapeBackground=null,this.dashboardPortraitCurtainPrefab=null,this.leaderboardPortraitBackground=null,this.leaderboardLandscapeBackground=null,this.dailyChallengePortraitBackground=null,this.badgePortraitBackground=null,this.journeyPortraitBackground=null,this.dayTimeCode=-1,b.off(O.LAYOUT_CHANGED,e.onLayoutChanged),b.on(O.LAYOUT_CHANGED,e.onLayoutChanged)}var i,s,o,u,c,l,d,h,p,v,E,f;return r(e,null,[{key:"inst",get:function(){return this._instance||(this._instance=new e),this._instance}},{key:"getCurrentLayout",value:function(){return this.inst.currentLayout}},{key:"isPortrait",value:function(){return this.inst.currentLayout===st.Portrait}},{key:"isLandscape",value:function(){return this.inst.currentLayout===st.Landscape}},{key:"loadCurrentBackground",value:(f=t(n().mark((function e(){var t,r,a,i,s,o,u=this;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.getCurrentLayout(),r=this.isDayTime(),a=[],t!==st.Portrait||this.inst.portraitBackground?t!==st.Landscape||this.inst.landscapeBackground||(s=this.getBackgroundPath(t,r),a.push(Y.loadSpriteFrameAsync(s).then((function(e){u.inst.landscapeBackground=e,e.packable=!1})))):(i=this.getBackgroundPath(t,r),a.push(Y.loadSpriteFrameAsync(i).then((function(e){u.inst.portraitBackground=e,e.packable=!1})))),t===st.Portrait&&null===this.inst.dashboardPortraitCurtainPrefab&&(o=this.getCurtainPath(r),a.push(Y.loadPrefabAsync(o).then((function(e){u.inst.dashboardPortraitCurtainPrefab=e})))),e.next=7,Promise.all(a);case 7:case"end":return e.stop()}}),e,this)}))),function(){return f.apply(this,arguments)})},{key:"getBackgroundPath",value:function(e,t){var n=e===st.Portrait?"portrait":"landscape",r=t?"day":"night",a=Y.getImageScale();return"".concat(it.BACKGROUND_PREFIX).concat(a,"x/dashboard-").concat(n,"-").concat(r,"/spriteFrame")}},{key:"getCurtainPath",value:function(e){var t=e?"Day":"Night";return"".concat(it.DASHBOARD_CURTAIN_PREFIX,"Dashboard").concat("Portrait","Curtain").concat(t)}},{key:"loadCurrentLeaderboardBackground",value:(E=t(n().mark((function e(){var t,r;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.getCurrentLayout(),r=Y.getImageScale(),t!==st.Portrait||this.inst.leaderboardPortraitBackground){e.next=9;break}return e.next=5,Y.loadSpriteFrameAsync("".concat(it.BACKGROUND_PREFIX).concat(r,"x/").concat(it.LEADERBOARD_PORTRAIT_BACKGROUND));case 5:this.inst.leaderboardPortraitBackground=e.sent,this.inst.leaderboardPortraitBackground.packable=!1,e.next=14;break;case 9:if(t!==st.Landscape||this.inst.leaderboardLandscapeBackground){e.next=14;break}return e.next=12,Y.loadSpriteFrameAsync("".concat(it.BACKGROUND_PREFIX).concat(r,"x/").concat(it.LEADERBOARD_LANDSCAPE_BACKGROUND));case 12:this.inst.leaderboardLandscapeBackground=e.sent,this.inst.leaderboardLandscapeBackground.packable=!1;case 14:case"end":return e.stop()}}),e,this)}))),function(){return E.apply(this,arguments)})},{key:"loadCurrentDailyChallengeBackground",value:(v=t(n().mark((function e(){var t,r=this;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Y.getImageScale(),e.abrupt("return",Y.loadSpriteFrameAsync("".concat(it.BACKGROUND_PREFIX).concat(t,"x/").concat(it.DAILY_CHALLENGE_PORTRAIT_BACKGROUND)).then((function(e){r.inst.dailyChallengePortraitBackground=e,r.inst.dailyChallengePortraitBackground.packable=!1})));case 2:case"end":return e.stop()}}),e)}))),function(){return v.apply(this,arguments)})},{key:"loadCurrentBadgeBackground",value:(p=t(n().mark((function e(){var t,r=this;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Y.getImageScale(),e.abrupt("return",Y.loadSpriteFrameAsync("".concat(it.BACKGROUND_PREFIX).concat(t,"x/").concat(it.BADGE_PORTRAIT_BACKGROUND)).then((function(e){r.inst.badgePortraitBackground=e,r.inst.badgePortraitBackground.packable=!1})));case 2:case"end":return e.stop()}}),e)}))),function(){return p.apply(this,arguments)})},{key:"loadCurrentJourneyBackground",value:(h=t(n().mark((function e(){var t,r=this;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Y.getImageScale(),e.abrupt("return",Y.loadSpriteFrameAsync("".concat(it.BACKGROUND_PREFIX).concat(t,"x/").concat(it.JOURNEY_PORTRAIT_BACKGROUND)).then((function(e){r.inst.journeyPortraitBackground=e,r.inst.journeyPortraitBackground.packable=!1})));case 2:case"end":return e.stop()}}),e)}))),function(){return h.apply(this,arguments)})},{key:"preloadBackgrounds",value:(d=t(n().mark((function e(){var t;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.inst.portraitBackground||!this.inst.landscapeBackground){e.next=2;break}return e.abrupt("return");case 2:return t=Y.getImageScale(),e.next=5,Y.loadSpriteFrameAsync("".concat(it.BACKGROUND_PREFIX).concat(t,"x/portrait/spriteFrame"));case 5:return this.inst.portraitBackground=e.sent,this.inst.portraitBackground.packable=!1,e.next=9,Y.loadSpriteFrameAsync("".concat(it.BACKGROUND_PREFIX).concat(t,"x/landscape/spriteFrame"));case 9:this.inst.landscapeBackground=e.sent,this.inst.landscapeBackground.packable=!1;case 11:case"end":return e.stop()}}),e,this)}))),function(){return d.apply(this,arguments)})},{key:"isDayTime",value:function(){if(-1===this.inst.dayTimeCode){var e=(new Date).getHours();this.inst.dayTimeCode=e<14&&e>=2?1:0}return 1===this.inst.dayTimeCode}},{key:"getCurrentBackground",value:(l=t(n().mark((function e(){var t,r;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.getCurrentLayout(),r=null,r=t===st.Portrait?this.inst.portraitBackground:this.inst.landscapeBackground){e.next=7;break}return e.next=6,this.loadCurrentBackground();case 6:return e.abrupt("return",this.getCurrentBackground());case 7:return e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)}))),function(){return l.apply(this,arguments)})},{key:"getCurrentDashboardCurtain",value:(c=t(n().mark((function e(){var t,r;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.getCurrentLayout(),r=null,t===st.Portrait&&(r=this.inst.dashboardPortraitCurtainPrefab),t!==st.Landscape){e.next=5;break}return e.abrupt("return",null);case 5:if(r){e.next=9;break}return e.next=8,this.loadCurrentBackground();case 8:return e.abrupt("return",this.getCurrentDashboardCurtain());case 9:return e.abrupt("return",r);case 10:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"getCurrentLeaderboardBackground",value:(u=t(n().mark((function e(){var t,r;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.getCurrentLayout(),r=null,r=t===st.Portrait?this.inst.leaderboardPortraitBackground:this.inst.leaderboardLandscapeBackground){e.next=7;break}return e.next=6,this.loadCurrentLeaderboardBackground();case 6:return e.abrupt("return",this.getCurrentLeaderboardBackground());case 7:return e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)}))),function(){return u.apply(this,arguments)})},{key:"getCurrentDailyChallengeBackground",value:(o=t(n().mark((function e(){var t;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=null,t=this.inst.dailyChallengePortraitBackground){e.next=6;break}return e.next=5,this.loadCurrentDailyChallengeBackground();case 5:return e.abrupt("return",this.getCurrentDailyChallengeBackground());case 6:return e.abrupt("return",t);case 7:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"getCurrentBadgeBackground",value:(s=t(n().mark((function e(){var t;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=null,t=this.inst.badgePortraitBackground){e.next=6;break}return e.next=5,this.loadCurrentBadgeBackground();case 5:return e.abrupt("return",this.getCurrentBadgeBackground());case 6:return e.abrupt("return",t);case 7:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"getCurrentJourneyBackground",value:(i=t(n().mark((function e(){var t;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=null,t=this.inst.journeyPortraitBackground){e.next=6;break}return e.next=5,this.loadCurrentJourneyBackground();case 5:return e.abrupt("return",this.getCurrentJourneyBackground());case 6:return e.abrupt("return",t);case 7:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"getCurrentLayoutLeaderboardBackground",value:function(){return this.getCurrentLayout()===st.Portrait?this.inst.leaderboardPortraitBackground:this.inst.leaderboardLandscapeBackground}},{key:"getCurrentLayoutBackgroundByKey",value:function(e){var t=this.getCurrentLayout();switch(e){case"DailyChallenge":return this.inst.dailyChallengePortraitBackground;case"Badge":return this.inst.badgePortraitBackground;case"Journey":return this.inst.journeyPortraitBackground;case"Leaderboard":return t===st.Portrait?this.inst.leaderboardPortraitBackground:this.inst.leaderboardLandscapeBackground;default:return console.warn("Unknown background key: ".concat(e)),null}}},{key:"isLoadedBackground",value:function(e){var t=this.getCurrentLayout();switch(e){case"DailyChallenge":return t===st.Portrait?!!this.inst.dailyChallengePortraitBackground:!!this.inst.dailyChallengePortraitBackground&&!!this.inst.leaderboardLandscapeBackground;case"Badge":return t===st.Portrait?!!this.inst.badgePortraitBackground:!!this.inst.badgePortraitBackground&&!!this.inst.leaderboardLandscapeBackground;default:return console.warn("Unknown background type: ".concat(e)),!1}}}]),e}());at=ot,ot.onLayoutChanged=function(e){at.inst.currentLayout!==e&&(at.inst.currentLayout=e)};try{new ot}catch(e){console.error("LayoutUtils",e)}p._RF.pop(),p._RF.push({},"a8a96ku4x9M/YJFCNioSqOn","ThemeUtils",void 0);var ut=codex.player,ct=e("W",function(e){return e.BG1="bg_1",e.BG2="bg_2",e.BG3="bg_3",e.BG4="bg_4",e.BG5="bg_5",e.BG6="bg_6",e}({})),lt=e("a1",function(e){return e.CLASSIC="classic",e.ANTIQUE="antique",e.SIMPLE="simple",e.VIOLET="violet",e.FLOWER="flower",e}({})),dt={background:ct.BG1,tileset:lt.CLASSIC},ht=e("T",function(){function e(){a(this,e),this.backgroundSprites=new Map,this.spriteFrameMap=new Map,this.loadedTileThemes=new Set,this.currentTheme=dt}var s,o,u,c,l,d;return r(e,null,[{key:"inst",get:function(){return this._instance||(this._instance=new e),this._instance}},{key:"initTheme",value:function(){var e=ut.getPlayerSetting("theme");e||(e=dt,ut.setSetting("theme",e)),console.log("load current theme",e),this.inst.currentTheme=e,this.validateTheme()}},{key:"loadCurrentTheme",value:(d=t(n().mark((function e(){var t,r;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.handleEntryPointDataTheme(),t=[],r=ot.getCurrentLayout(),t.push(this.loadBackgroundSprite(this.inst.currentTheme.background,r),this.loadTileThemeSpriteFrames(this.inst.currentTheme.tileset)),e.next=6,Promise.all(t);case 6:case"end":return e.stop()}}),e,this)}))),function(){return d.apply(this,arguments)})},{key:"handleEntryPointDataTheme",value:function(){var e=this;try{var t=codex.context.getContextData(),n=t.theme,r=t.background,a=!1;void 0!==n&&Object.values(lt).includes(n)&&(this.inst.currentTheme.tileset=n,a=!0),void 0!==r&&Object.values(ct).includes(r)&&(this.inst.currentTheme.background=r,a=!0),a&&(console.log("Check theme entryPointData",t,n,r),setTimeout((function(){e.logEntryPointTheme()}),2e3),ut.setSetting("theme",this.inst.currentTheme))}catch(e){console.error("Error handling entryPointData theme",e)}}},{key:"getBackgroundMapOrientationKey",value:function(e,t){return"".concat(t,"-").concat(e)}},{key:"getBackgroundURL",value:function(e,t){var n=Y.getImageScale();return"".concat(it.THEME_BACKGROUND_PREFIX).concat(n,"x/").concat(t,"/").concat(e,"/spriteFrame")}},{key:"getTilesetFolderURL",value:function(e){return"".concat(it.TILE_PREFIX).concat(e,"/")}},{key:"validateTheme",value:function(){var e=this.inst.currentTheme.background,t=this.inst.currentTheme.tileset,n=!0;Object.values(ct).includes(e)||(this.inst.currentTheme.background=ct.BG1,n=!1),Object.values(lt).includes(t)||(this.inst.currentTheme.tileset=lt.CLASSIC,n=!1),n||ut.setSetting("theme",this.inst.currentTheme)}},{key:"getCurrentBackgroundSprite",value:function(){var e=ot.getCurrentLayout();return this.inst.backgroundSprites.get(this.getBackgroundMapOrientationKey(this.inst.currentTheme.background,e))}},{key:"getCurrentTileBackgroundSprite",value:function(){var e=this.inst.currentTheme.tileset,t=this.getSpriteKey("tile-background",e);return this.inst.spriteFrameMap.get(t)}},{key:"getCurrentTileHiddenSprite",value:function(){var e=this.inst.currentTheme.tileset,t=this.getSpriteKey("hidden",e);return this.inst.spriteFrameMap.get(t)}},{key:"getCurrentItemTileSprite",value:function(e){return this.inst.spriteFrameMap.get(this.getSpriteKey(e,this.getCurrentThemeTileset()))||null}},{key:"getTileSpriteFramePath",value:function(e){return"".concat(it.TILE_PREFIX).concat(this.inst.currentTheme.tileset,"/").concat(e,"/spriteFrame")}},{key:"getCurrentThemeTileset",value:function(){return this.inst.currentTheme.tileset}},{key:"getCurrentThemeBackground",value:function(){return this.inst.currentTheme.background}},{key:"getSpriteKey",value:function(e,t){var n=t||this.getCurrentThemeTileset();return"".concat(n,"-").concat(e)}},{key:"loadCurrentBackgroundSprite",value:(l=t(n().mark((function e(){var t,r;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.inst.currentTheme.background,r=ot.getCurrentLayout(),this.inst.backgroundSprites.has(this.getBackgroundMapOrientationKey(t,r))){e.next=7;break}return Le.showLoadingScreen(),e.next=6,this.loadBackgroundSprite(t,r);case 6:Le.closeLoadingScreen();case 7:return e.abrupt("return",this.inst.backgroundSprites.get(this.getBackgroundMapOrientationKey(t,r)));case 8:case"end":return e.stop()}}),e,this)}))),function(){return l.apply(this,arguments)})},{key:"loadBackgroundSprite",value:(c=t(n().mark((function e(t,r){var a;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y.loadSpriteFrameAsync(this.getBackgroundURL(t,r));case 2:(a=e.sent)&&(a.packable=!1),this.inst.backgroundSprites.set(this.getBackgroundMapOrientationKey(t,r),a);case 5:case"end":return e.stop()}}),e,this)}))),function(e,t){return c.apply(this,arguments)})},{key:"loadTileThemeSpriteFrames",value:(u=t(n().mark((function e(t){var r,a,s,o,u;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||this.getCurrentThemeTileset(),e.next=3,Y.loadSpriteFramesDirAsync(this.getTilesetFolderURL(r));case 3:a=e.sent,s=i(a);try{for(s.s();!(o=s.n()).done;)u=o.value,this.inst.spriteFrameMap.set(this.getSpriteKey(u.name,r),u)}catch(e){s.e(e)}finally{s.f()}this.inst.loadedTileThemes.add(r);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return u.apply(this,arguments)})},{key:"getTileIcon",value:function(e){return this.inst.spriteFrameMap.get(this.getSpriteKey(e))||null}},{key:"getEffectSpriteFrame",value:function(e){return this.inst.spriteFrameMap.get(this.getSpriteKey(e))||null}},{key:"updateBackgroundKey",value:(o=t(n().mark((function e(t){var r;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.inst.currentTheme.background=t,ut.setSetting("theme",this.inst.currentTheme),r=ot.getCurrentLayout(),this.inst.backgroundSprites.has(this.getBackgroundMapOrientationKey(t,r))){e.next=8;break}return Le.showLoadingScreen(),e.next=7,this.loadBackgroundSprite(t,r);case 7:Le.closeLoadingScreen();case 8:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"updateTilesetKey",value:(s=t(n().mark((function e(t){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.inst.currentTheme.tileset=t,ut.setSetting("theme",this.inst.currentTheme),this.isLoadedTileTheme(t)){e.next=7;break}return Le.showLoadingScreen(),e.next=6,this.loadTileThemeSpriteFrames(t);case 6:Le.closeLoadingScreen();case 7:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})},{key:"isLoadedTileTheme",value:function(e){return this.inst.loadedTileThemes.has(e)}},{key:"isLoadedCurrentTileTheme",value:function(){return this.isLoadedTileTheme(this.getCurrentThemeTileset())}},{key:"logThemeTileChange",value:function(e){codex.analytics.event(rt.THEME_TILE_CHANGE,{theme_idx:e})}},{key:"logThemeBackgroundChange",value:function(e){codex.analytics.event(rt.THEME_BACKGROUND_CHANGE,{bg_idx:e})}},{key:"logEntryPointTheme",value:function(){codex.analytics.event(rt.THEME_ENTRY_POINT_CHANGE,{theme_idx:this.inst.currentTheme.tileset,bg_idx:this.inst.currentTheme.background})}}]),e}());p._RF.pop(),p._RF.push({},"05cdcnITThGR4l1JaZw+XbM","PlayerSetting",void 0);var pt=e("b",{sound:!0,music:!0,vibrate:!0,language:"en",highLight:!1,theme:{background:ct.BG1,tileset:lt.CLASSIC}});p._RF.pop(),p._RF.push({},"074c4KXFZ1Pq6d+66PrLd2+","PlayerData",void 0);e("P",{score:0,settings:pt,gameData:nt,isFirstLogin:!0,dailyRewardedData:{logDays:[],firstReward:0,lastReward:0},lastCallSwitchGame:0,notificationData:{},missionsData:{process:{}}});p._RF.pop(),p._RF.push({},"52b52FNwvhBKY/becAy420o","Leaderboard",void 0);e("e",{GLOBAL:"global-leaderboard-key",FRIENDS:"friends-leaderboard-key"}),e("f",{GLOBAL:"global-leaderboard-id",FRIENDS:"friends-leaderboard-id"});p._RF.pop(),p._RF.push({},"ed7cczyWCpForeLyfwiLhHb","Journey",void 0);var vt=Math.ceil(3.64),Et=new Date(2025,7,22).getTime(),ft=e("X",{REWARD_1_LEVEL:7,REWARD_2_LEVEL:41,REWARD_3_LEVEL:91,REWARD_LEVELS:[7,11,31,41,61,81,91],JOURNEY_LEVEL_COUNT:91,JOURNEY_SET_SELECT:vt,JOURNEY_SET_LEVEL_COUNT:25,JOURNEY_BADGE_KEYS:["1","2","3"],LEVEL_PATH:"levels-journey/",MIN_GAME_LEVEL_TO_UNLOCK_JOURNEY:12,MIN_GAME_LEVEL:3001,MAX_GAME_LEVEL:3120,SEASON_START_AT:Et,SEASON_DURATION:12096e5});p._RF.pop(),p._RF.push({},"640b6po6qpOmJv7ADI1i/fv","Tile",void 0);e("F",{MAX_TILES:42,SIZE:{WIDTH:80,HEIGHT:99},ANIMATION_CONFIGS:{SHUFFLE:{FIRST_SCALE:1.3,SECOND_SCALE:1.04},SHAKE:{SHAKE_DURATION:.08,SHAKE_OFFSET:8},OPEN_DURATION:{LANDSCAPE_TOTAL:.6,MIN_PORTRAIT_TOTAL:.3,MAX_PORTRAIT_TOTAL:.6,MAX_DELAY:.3,INIT_DELAY:.5},AUTO_FINISH:{SHINE_DELAY_INTERVAL:.4,MATCH_DELAY_PER_TILE:.1,MAX_MATCH_DELAY_TOTAL_TIME:3.2}}}),e("D",function(e){return e[e.PRELOADING=0]="PRELOADING",e[e.ALREADY=1]="ALREADY",e[e.CHOOSING=2]="CHOOSING",e[e.MOVING_TO_MATCH=3]="MOVING_TO_MATCH",e[e.MATCHED=4]="MATCHED",e[e.DESTROYED=5]="DESTROYED",e}({}));var yt=e("H",45),gt=e("V",[46,47,48]);e("K",{bamboo:[1,2,3,4,5,6,7,8,9],characters:[10,11,12,13,14,15,16,17,18],dots:[19,20,21,22,23,24,25,26,27],winds:[28,29,30,31],dragons:[32,33,34],flowers:[35,36,37,38],seasons:[39,40,41,42],golden:[yt],artifact:gt});p._RF.pop(),p._RF.push({},"8689aJvd7RJQIlpVCAG11h0","Journey",void 0);var St=e("U",function(e){return e.HIDDEN_TILE="hidden-title",e.TARGET_TILE="target-tile",e.FIND_ARTIFACT="find-artifact",e}({}));p._RF.pop(),p._RF.push({},"be1a9KpyYVPOZshgN+uUxGr","DateTimeUtils",void 0);var _t=e("B",(function(e){return new Promise((function(t){return setTimeout(t,e)}))})),mt=(e("O",(function(e){var t=new Date(e),n=new Date;return t.getDate()===n.getDate()&&t.getMonth()===n.getMonth()&&t.getFullYear()===n.getFullYear()})),e("w",(function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=new Date(e).toISOString();return t?n.slice(11,-5):n.slice(14,-5)}))),At=e("z",(function(e){var t=Date.now(),n=Math.max(1e3*e-t,0);return{remainingTimeInDays:Math.round(n/864e5),remainingTimeInMs:n}}));p._RF.pop(),p._RF.push({},"2e5d33KoHNIZr8OFwu9AMl9","JourneyThemeHandler",void 0);var kt,Tt=e("$",function(e){return e.CHERRY_BLOSSOM="cherry-blossom",e.SPRING_DOLLS="spring-dolls",e.TEA_CEREMONY="tea-ceremony",e}({})),Rt=(Tt.CHERRY_BLOSSOM,Tt.SPRING_DOLLS,Tt.TEA_CEREMONY,"journey-button"),Lt="footer-landscape",Ct="footer-portrait",Nt=function(){function e(){a(this,e),this.journeyTheme=Tt.CHERRY_BLOSSOM,this.spriteDictionary={},this.loadedTileThemes=new Set}var s,o,u;return r(e,[{key:"setSeasonTheme",value:function(e){this.journeyTheme=this.getSeasonThemeById(e)}},{key:"getSeasonThemeById",value:function(e){var t=Object.values(Tt);return t[e%t.length]}},{key:"getJourneyTheme",value:function(){return this.journeyTheme}},{key:"isNeedLoadCurrentJourneyBadge",value:function(){var e,t=this.getJourneyTheme(),n=i(ft.JOURNEY_BADGE_KEYS);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(!this.getSpriteFrame({theme:t,key:r}))return!0}}catch(e){n.e(e)}finally{n.f()}return!1}},{key:"loadSpritesOnly",value:(u=t(n().mark((function e(t){var r,a,s,o,u=this;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=[],a=i(t),e.prev=2,o=n().mark((function e(){var t,a,i,o,c,l,d;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=s.value,a=t.theme,i=t.key,o=t.prefix,c=void 0===o?it.JOURNEY_BADGE_PREFIX:o,l="".concat(c).concat(a,"/").concat(i,"/spriteFrame"),(d=Y.loadSpriteFrameAsync(l)).then((function(e){e&&(u.spriteDictionary["".concat(a,"/").concat(i)]=e)})),r.push(d);case 6:case"end":return e.stop()}}),e)})),a.s();case 5:if((s=a.n()).done){e.next=9;break}return e.delegateYield(o(),"t0",7);case 7:e.next=5;break;case 9:e.next=14;break;case 11:e.prev=11,e.t1=e.catch(2),a.e(e.t1);case 14:return e.prev=14,a.f(),e.finish(14);case 17:return e.next=19,Promise.all(r);case 19:case"end":return e.stop()}}),e,null,[[2,11,14,17]])}))),function(e){return u.apply(this,arguments)})},{key:"loadSprites",value:(o=t(n().mark((function e(t){var r,a,s,o,u,c,l=this;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadSpritesOnly(t);case 2:r=[],a=i(t);try{for(a.s();!(s=a.n()).done;)o=s.value,u=o.theme,c=o.key,this.spriteDictionary["".concat(u,"/").concat(c)]||(console.warn("Badge not loaded: ".concat(u,"/").concat(c)),r.push(o))}catch(e){a.e(e)}finally{a.f()}r.length>0&&_t(500).then((function(){l.loadSpritesOnly(r)}));case 6:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"getSpriteFrame",value:function(e){var t=e.theme,n=e.key,r=this.spriteDictionary["".concat(t,"/").concat(n)];return r||null}},{key:"loadJourneyTileThemeSpriteFrames",value:(s=t(n().mark((function e(t){var r,a,s,o,u;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t||this.getJourneyTheme(),!this.loadedTileThemes.has(r)){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,Y.loadSpriteFramesDirAsync("".concat(it.TILE_PREFIX).concat(r,"/"));case 5:a=e.sent,s=i(a);try{for(s.s();!(o=s.n()).done;)u=o.value,this.spriteDictionary["".concat(r,"/tile-").concat(u.name)]=u}catch(e){s.e(e)}finally{s.f()}this.loadedTileThemes.add(r);case 9:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})},{key:"loadJourneyButtonSpriteFrame",value:function(e){var t=e||this.getJourneyTheme();if(!this.getSpriteFrame({theme:t,key:Rt}))return this.loadSprites([{theme:t,key:Rt,prefix:it.JOURNEY_UI_PREFIX}])}},{key:"loadJourneyFooterSpriteFrame",value:function(e){var t=e||this.getJourneyTheme(),n=ot.isLandscape()?Lt:Ct;if(!this.getSpriteFrame({theme:t,key:n}))return this.loadSprites([{theme:t,key:n,prefix:it.JOURNEY_UI_PREFIX}])}},{key:"getJourneyFooterSpriteFrame",value:function(e){var t=e||this.getJourneyTheme(),n=ot.isLandscape()?Lt:Ct;return this.getSpriteFrame({theme:t,key:n})||null}},{key:"getJourneyButtonSpriteFrame",value:function(e){var t=e||this.getJourneyTheme();return this.getSpriteFrame({theme:t,key:Rt})||null}},{key:"getCurrentArtifactTileSprite",value:function(e){return this.getSpriteFrame({theme:this.getJourneyTheme(),key:"tile-".concat(e)})||null}},{key:"getJourneyBadgeSpriteFrame",value:function(e,t){return this.getSpriteFrame({theme:t||this.getJourneyTheme(),key:e})||null}},{key:"isLoadedCurrentJourneyTileTheme",value:function(){return this.loadedTileThemes.has(this.getJourneyTheme())}}]),e}();p._RF.pop(),p._RF.push({},"d9055/fQMJA1IROHPh96rOA","JourneyUtils",void 0);var It=codex.player,Dt={journeyLevel:1,gameLevel:1200,type:St.HIDDEN_TILE,seed:123456789,key:"mock-complete-game"},bt=e("Y",function(e){return e.BADGE_1="1",e.BADGE_2="2",e.BADGE_3="3",e.CHEST="chest",e}({})),wt=e("J",function(){function e(){a(this,e),this.currentLevel=1,this.season=1,this.seasonIds=[],this.badgeDictionary={},this.playingCurrentLevel=!1,this.loadedSeason={},this.config={season:1,count:ft.JOURNEY_LEVEL_COUNT,startTime:new Date(ft.SEASON_START_AT),endTime:new Date(ft.SEASON_START_AT+ft.SEASON_DURATION)}}var o,u;return r(e,[{key:"validateSeasonId",value:function(e){return e>=1&&!1===Number.isNaN(e)}},{key:"expandDateString",value:function(e){var t=e.slice(4,6),n=e.slice(2,4),r="20".concat(e.slice(0,2));return"".concat(r,"/").concat(n,"/").concat(t)}},{key:"shortenDateString",value:function(e){var t=e.split("/"),n=h(t,3),r=n[0],a=n[1],i=n[2];return"".concat(r.slice(2)).concat(a).concat(i)}},{key:"updateSeasonsHaveBadges",value:function(){var e=[];for(var t in this.badgeDictionary){var n=t.split("/"),r=h(n,2),a=r[0];r[1];e.includes(parseInt(a))||e.push(parseInt(a))}e.sort((function(e,t){return e-t})),this.seasonIds=e}},{key:"updatePlayerData",value:function(){var e,t=[],n=i(this.seasonIds);try{for(n.s();!(e=n.n()).done;){var r=e.value,a="".concat(r,"/").concat(bt.BADGE_1),s="".concat(r,"/").concat(bt.BADGE_2),o="".concat(r,"/").concat(bt.BADGE_3),u=this.badgeDictionary[a],c=this.badgeDictionary[s],l=this.badgeDictionary[o];if(u||c||l){var d="".concat(r);d+=u?"-".concat(this.shortenDateString(u)):"",d+=c?"-".concat(this.shortenDateString(c)):"",d+=l?"-".concat(this.shortenDateString(l)):"",t.push(d)}}}catch(e){n.e(e)}finally{n.f()}It.setGameData({journeyData:{lastSeason:this.season,currentLevel:this.currentLevel,claimBadges:t}})}}],[{key:"inst",get:function(){return this._instance||(this._instance=new e),this._instance}},{key:"initAsync",value:(u=t(n().mark((function e(){var t,r,a,s,o,u,c,l,d,p,v,E,f,y,g,S,_,m;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.inst.badgeDictionary={},t=It.getGameData().journeyData,r=t.lastSeason,a=t.currentLevel,s=t.claimBadges,o=this.inst.validateSeasonId(r)?r:1,this.inst.season=o,this.inst.currentLevel=a||1,u=i(s),e.prev=6,u.s();case 8:if((c=u.n()).done){e.next=21;break}if(l=c.value,d=l.split("-"),p=h(d,4),v=p[0],E=p[1],f=p[2],y=p[3],void 0!==v){e.next=13;break}return e.abrupt("continue",19);case 13:g="".concat(v,"/").concat(bt.BADGE_1),S="".concat(v,"/").concat(bt.BADGE_2),_="".concat(v,"/").concat(bt.BADGE_3),E&&(this.inst.badgeDictionary[g]=this.inst.expandDateString(E)),f&&(this.inst.badgeDictionary[S]=this.inst.expandDateString(f)),y&&(this.inst.badgeDictionary[_]=this.inst.expandDateString(y));case 19:e.next=8;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(6),u.e(e.t0);case 26:return e.prev=26,u.f(),e.finish(26);case 29:return this.inst.updateSeasonsHaveBadges(),m=this.createConfig(1),this.inst.config=this.getSeasonConfigPlayerCurrentlyIn(new Date)||m,this.setSeason(this.inst.config.season),o!==this.inst.config.season&&this.resetNewSeason(),this.updateGetBadges(),e.next=37,this.themeHandler.loadJourneyButtonSpriteFrame();case 37:case"end":return e.stop()}}),e,this,[[6,23,26,29]])}))),function(){return u.apply(this,arguments)})},{key:"updateGetBadges",value:function(){var e=new Date,t=e.getDate(),n=e.getMonth()+1,r=e.getFullYear(),a="".concat(r,"/").concat(n.toString().padStart(2,"0"),"/").concat(t.toString().padStart(2,"0")),i=this.inst.season,s="".concat(i,"/").concat(bt.BADGE_1),o="".concat(i,"/").concat(bt.BADGE_2),u="".concat(i,"/").concat(bt.BADGE_3),c=void 0!==this.inst.badgeDictionary[s],l=void 0!==this.inst.badgeDictionary[o],d=void 0!==this.inst.badgeDictionary[u],h=!1;this.inst.currentLevel>ft.REWARD_1_LEVEL&&!c&&(this.inst.badgeDictionary[s]=a,h=!0),this.inst.currentLevel>ft.REWARD_2_LEVEL&&!l&&(this.inst.badgeDictionary[o]=a,h=!0),this.inst.currentLevel>ft.REWARD_3_LEVEL&&!d&&(this.inst.badgeDictionary[u]=a,h=!0),h&&this.inst.updateSeasonsHaveBadges()}},{key:"createLevelData",value:function(){for(var t=this.getCurrentSeasonConfig(),n=[],r=ft.MIN_GAME_LEVEL,a=ft.MAX_GAME_LEVEL,i=Q.getStepLevel(),s=this.themeHandler.getJourneyTheme().toString(),o=e.xmur3(s),u=[],c=r;c<=a;c+=i)u.push(c);for(var l=this.seededShuffle(u,o),d=l.slice(0,ft.JOURNEY_SET_SELECT),h=[St.HIDDEN_TILE,St.TARGET_TILE,St.FIND_ARTIFACT],p=[[0,2,1],[2,0,1],[0,1,2],[1,2,0],[2,1,0],[1,0,2]],v=[],E=l.length-1,f=0;f<i;f++)v.push(d[E]+f);for(var y=0,g=1;g<=t.count;g++){if(y>=ft.JOURNEY_SET_LEVEL_COUNT){E--,y=0,v=[];for(var S=0;S<i;S++)v.push(d[E]+S)}var _=g-1,m=h[p[Math.floor(_/h.length)%6][(_+h.length)%h.length]],A=this.createRandomJourneyMission(v,g,m);n.push(A);var k=v.indexOf(A.gameLevel);-1!==k?(v.splice(k,1),y++):console.error("Level mission not found in allLevelsInSet:",A)}this.inst.loadedSeason[t.season]=n}},{key:"canUpdateNewSeason",value:function(e){var t=this.getSeasonConfigPlayerCurrentlyIn(e);return!!t&&t.season!==this.getSeason()}},{key:"canUpdateIncreaseSeason",value:function(){var e=this.getSeasonConfigPlayerCurrentlyIn(new Date);if(!e)return!1;var t=At(this.inst.config.endTime.getTime()/1e3).remainingTimeInMs;return e.season>this.getSeason()||t<=0}},{key:"getSeasonConfigPlayerCurrentlyIn",value:function(e){var t=ft.SEASON_START_AT,n=ft.SEASON_DURATION,r=e.getTime(),a=Math.ceil((r-t)/n);return this.createConfig(a)}},{key:"createConfig",value:function(e){var t=ft.SEASON_START_AT,n=ft.SEASON_DURATION,r=t+n*(e-1),a=r+n;return{season:e,count:this.getLevelCount(),startTime:new Date(r),endTime:new Date(a)}}},{key:"resetNewSeason",value:function(){this.setCurrentLevel(1)}},{key:"getSeason",value:function(){return this.inst.season=this.inst.config.season,this.inst.season}},{key:"getCurrentSeasonConfig",value:function(){return this.inst.config}},{key:"increaseSeason",value:function(){var e=this.getSeason()+1,t=this.setSeason(e);return t&&this.resetNewSeason(),t}},{key:"setSeason",value:function(e){return!this.isPlayingCurrentLevel()&&(this.inst.config=this.createConfig(e),this.inst.season=e,this.inst.updatePlayerData(),this.themeHandler.setSeasonTheme(e),this.createLevelData(),!0)}},{key:"setEndTime",value:function(e){this.inst.config.endTime=e}},{key:"getTimeStart",value:function(){return this.inst.config.startTime.getTime()/1e3}},{key:"getTimeEnd",value:function(){return this.inst.config.endTime.getTime()/1e3}},{key:"getMinLevelToUnlockJourney",value:function(){return ft.MIN_GAME_LEVEL_TO_UNLOCK_JOURNEY}},{key:"checkJourneyUnlock",value:function(){var e=this.getMinLevelToUnlockJourney();return Q.getMaxLevel()>=e}},{key:"checkJourneyComplete",value:function(){var e=this.getLevelCount();return this.getCurrentLevel()>e}},{key:"getJourneyEndTime",value:function(){var t=e.getTimeEnd();if(!t)return{key:"customString",params:[mt(0,!0)],remainingTime:0};var n=At(t),r=n.remainingTimeInDays,a=n.remainingTimeInMs;if(a<864e5)return{key:"customString",params:[mt(a,!0)],remainingTime:a};if(r>1){var i=function(e){if(e<=0)return{days:0,hours:0,minutes:0,seconds:0};var t=e,n=Math.floor(t/864e5);t-=864e5*n;var r=Math.floor(t/36e5);t-=36e5*r;var a=Math.floor(t/6e4);return t-=6e4*a,{days:n,hours:r,minutes:a,seconds:Math.floor(t/1e3)}}(n.remainingTimeInMs);return{key:"dhm",params:[r.toString(),i.hours.toString(),i.minutes.toString()],remainingTime:a}}return{key:"1day",params:[],remainingTime:t}}},{key:"isCurrentLevelTheLast",value:function(){return this.getCurrentLevel()===this.getLevelCount()}},{key:"getCurrentLevel",value:function(){return this.inst.currentLevel}},{key:"getCompletedLevel",value:function(){return this.inst.currentLevel-1}},{key:"getCurrentRewardLevel",value:function(){for(var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=e?this.getCurrentLevel():this.getCompletedLevel(),n=0;n<ft.REWARD_LEVELS.length;n++)if(t<=ft.REWARD_LEVELS[n]&&t>(ft.REWARD_LEVELS[n-1]||0))return ft.REWARD_LEVELS[n];return ft.REWARD_LEVELS[ft.REWARD_LEVELS.length-1]}},{key:"getCurrentRewardType",value:function(e){return e===ft.REWARD_1_LEVEL?bt.BADGE_1:e===ft.REWARD_2_LEVEL?bt.BADGE_2:e===ft.REWARD_3_LEVEL?bt.BADGE_3:bt.CHEST}},{key:"setCurrentLevel",value:function(e){if(!Number.isInteger(e))return!1;var t=this.getLevelCount();return console.log(t,e),!(e<1)&&(this.inst.currentLevel=e,this.updateGetBadges(),this.inst.updatePlayerData(),!0)}},{key:"getLevelCount",value:function(){var e,t=(null!==(e=this.inst.config)&&void 0!==e?e:{}).count;return void 0===t?ft.REWARD_LEVELS[ft.REWARD_LEVELS.length-1]:t}},{key:"increaseLevel",value:function(){return this.setCurrentLevel(this.inst.currentLevel+1)}},{key:"getConfig",value:function(){return this.inst.config}},{key:"isPlayingCurrentLevel",value:function(){return this.inst.playingCurrentLevel}},{key:"setIsPlayingCurrentLevel",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.inst.playingCurrentLevel!==e&&(this.inst.playingCurrentLevel=e)}},{key:"getCurrentSeasonMissions",value:function(){var e=this.getSeason(),t=this.inst.loadedSeason[e];return null!=t?t:[]}},{key:"getCurrentMission",value:function(){var e;return null!==(e=this.getCurrentSeasonMissions()[this.getCurrentLevel()-1])&&void 0!==e?e:Dt}},{key:"getLastMission",value:function(){var e;return null!==(e=this.getCurrentSeasonMissions()[this.getCurrentLevel()-2])&&void 0!==e?e:Dt}},{key:"getJourneyName",value:function(){var e=this.inst.config.season;return"Journey Season ".concat(e)}},{key:"createRandomJourneyMission",value:function(t,n,r){var a="".concat(n," "),i=e.xmur3(a);return{journeyLevel:n,gameLevel:t[i%t.length],type:r,seed:i}}},{key:"xmur3",value:function(e){for(var t=1779033703^e.length,n=0;n<e.length;n++)t=(t=Math.imul(t^e.charCodeAt(n),3432918353))<<13|t>>>19;return(t^t>>>16)>>>0}},{key:"separateSeedsToParts",value:function(e,t){for(var n=[],r=e,a=0;a<t;a++){var i=r%1e3;n.push(i),r=Math.floor(r/1e3)}return n}},{key:"getJourneyTileSkinIdx",value:function(t){var n=t.seed,r=e.separateSeedsToParts(n,3)[0],a=s(gt);return a[Math.floor(r%a.length)]}},{key:"seededShuffle",value:function(e,t){var n,r,a=e.slice(),i=a.length,s=t;for(;i;)r=Math.floor((s=(9301*s+49297)%233280)/233280*i--),n=a[i],a[i]=a[r],a[r]=n;return a}},{key:"getSeasonIds",value:function(){return this.inst.seasonIds}},{key:"isNeedClaimedBadges",value:function(){for(var e in this.inst.badgeDictionary){var t=e.split("/"),n=h(t,2),r=n[0],a=n[1],i=this.getSeasonThemeById(parseInt(r));if(!this.themeHandler.getSpriteFrame({theme:i,key:a}))return!0}return!1}},{key:"getClaimedBadgesBySeasonId",value:function(e){var t=[];for(var n in this.inst.badgeDictionary){var r=n.split("/"),a=h(r,2),i=a[0],s=a[1];i===e.toString()&&this.inst.badgeDictionary[n]&&t.push(s)}return t}},{key:"isLevelWithBadges",value:function(){var e=this.getCurrentLevel();return e===ft.REWARD_1_LEVEL||(e===ft.REWARD_2_LEVEL||e===ft.REWARD_3_LEVEL)}},{key:"getRewardByLevel",value:function(t){if(!ft.REWARD_LEVELS.includes(t))return null;var n=e.getCurrentRewardType(t);switch(n){case bt.BADGE_1:case bt.BADGE_2:case bt.BADGE_3:return{type:"Badge",key:n}}var r,a=0,s=i(ft.REWARD_LEVELS);try{for(s.s();!(r=s.n()).done;){var o=r.value;if(o===t)break;o!==ft.REWARD_1_LEVEL&&o!==ft.REWARD_2_LEVEL&&o!==ft.REWARD_3_LEVEL&&a++}}catch(e){s.e(e)}finally{s.f()}return{type:"Chest",chestIdx:a}}},{key:"getBadgeDate",value:function(e){var t=e.seasonId,n=e.key,r=this.inst.badgeDictionary["".concat(t,"/").concat(n)];return r||""}},{key:"getJourneyTheme",value:function(){return this.themeHandler.getJourneyTheme()}},{key:"isNeedPreloadJourney",value:function(){return this.themeHandler.isNeedLoadCurrentJourneyBadge()}},{key:"isNeedLoadCurrentJourneyBadge",value:function(){return this.themeHandler.isNeedLoadCurrentJourneyBadge()}},{key:"loadCurrentJourneyBadge",value:function(){return new Promise((function(t){if(e.isNeedLoadCurrentJourneyBadge()){var n,r=e.getJourneyTheme(),a=[],s=i(ft.JOURNEY_BADGE_KEYS);try{for(s.s();!(n=s.n()).done;){var o=n.value;a.push({theme:r,key:o})}}catch(e){s.e(e)}finally{s.f()}e.themeHandler.loadSprites(a).then((function(){t()}))}else t()}))}},{key:"loadJourneyTileThemeSpriteFrames",value:(o=t(n().mark((function e(t){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.themeHandler.loadJourneyTileThemeSpriteFrames(t));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"getJourneyFooterSpriteFrame",value:function(e){return this.themeHandler.getJourneyFooterSpriteFrame(e)}},{key:"getJourneyButtonSpriteFrame",value:function(e){return this.themeHandler.getJourneyButtonSpriteFrame(e)}},{key:"getCurrentArtifactTileSprite",value:function(e){return this.themeHandler.getCurrentArtifactTileSprite(e)}},{key:"getJourneyBadgeSpriteFrame",value:function(e,t){return this.themeHandler.getJourneyBadgeSpriteFrame(e,t)}},{key:"isLoadedCurrentJourneyTileTheme",value:function(){return this.themeHandler.isLoadedCurrentJourneyTileTheme()}},{key:"getSeasonThemeById",value:function(e){return this.themeHandler.getSeasonThemeById(e)}},{key:"logJourneyStartLevel",value:function(){codex.analytics.event(rt.JOURNEY_START_LEVEL,{level:this.getCurrentLevel(),season:this.getSeason()})}},{key:"logJourneyCompleteLevel",value:function(){codex.analytics.event(rt.JOURNEY_COMPLETE_LEVEL,{level:this.getCurrentLevel(),season:this.getSeason()})}},{key:"logJourneyGetBadge",value:function(e){codex.analytics.event(rt.JOURNEY_GET_BADGE,{item_name:e,season:this.getSeason()})}}]),e}());kt=wt,wt.themeHandler=new Nt,wt.loadClaimedBadges=function(){return new Promise((function(e){if(kt.isNeedClaimedBadges()){var t=[];for(var n in kt.inst.badgeDictionary){var r=n.split("/"),a=h(r,2),i=a[0],s=a[1],o=kt.getSeasonThemeById(parseInt(i));console.log({seasonId:i,theme:o}),t.push({theme:o,key:s})}kt.themeHandler.loadSprites(t).then((function(){e()}))}else e()}))},wt.loadJourneyButtonSpriteFrame=function(e){return kt.themeHandler.loadJourneyButtonSpriteFrame(e)},wt.loadJourneyFooterSpriteFrame=function(e){return kt.themeHandler.loadJourneyFooterSpriteFrame(e)},p._RF.pop(),p._RF.push({},"9046etpNclOb7EjoNvbF/aZ","MatchUtils",void 0);var Ot=Ludex,xt=Ot.Match,Bt=Ot.Utils,Pt=Bt.Object,Ft=Bt.Valid,Mt=Bt.String,Ut=codex,Gt=Ut.match,Ht=Ut.player,Jt=Ut.leaderboard,Wt=e("N",function(e){return e.DAILY_CHALLENGE="daily_challenge",e.JOURNEY="journey",e}({})),Yt=e("M",function(){function e(){a(this,e)}var i,s,o,u,c,l,d,h,p,v,E,f,y,g,S,_,m,A,k;return r(e,[{key:"processStartSingleModeAsync",value:(k=t(n().mark((function e(){var t;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Ht.getPlayerId(),e.next=3,Gt.single.start.processAsync({playerId:t});case 3:case"end":return e.stop()}}),e)}))),function(){return k.apply(this,arguments)})},{key:"processFinishSingleModeAsync",value:(A=t(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Gt.single.finish.processAsync();case 2:case"end":return e.stop()}}),e)}))),function(){return A.apply(this,arguments)})},{key:"processStartTournamentModeAsync",value:(m=t(n().mark((function e(){var t,r;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Ht.getPlayerId(),r=GameSDK.context.getID(),e.next=4,Gt.tournament.continue.processAsync({playerId:t,contextId:r});case 4:case"end":return e.stop()}}),e)}))),function(){return m.apply(this,arguments)})},{key:"processFinishTournamentModeAsync",value:(_=t(n().mark((function e(){var t,r;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Ht.getPlayerId(),r=Ht.getGameData().tournamentData.bestScore,e.next=4,Gt.tournament.finish.processAsync({playerId:t,bestScore:r});case 4:case"end":return e.stop()}}),e)}))),function(){return _.apply(this,arguments)})},{key:"processStartChallengeModeAsync",value:(S=t(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.processContinueChallengeAsync();case 3:e.next=15;break;case 5:if(e.prev=5,e.t0=e.catch(0),Pt.hasOwn(e.t0,"name")&&!Ft.isString(e.t0.name)){e.next=9;break}throw e.t0;case 9:if("PlayerHasFinishedMatch"!==e.t0.name){e.next=12;break}return e.next=12,this.processChallengeNewOpponentAsync();case 12:if("PlayerNotJoinInMatch"!==e.t0.name){e.next=15;break}return e.next=15,this.processJoinChallengeAsync();case 15:case"end":return e.stop()}}),e,this,[[0,5]])}))),function(){return S.apply(this,arguments)})},{key:"processFinishChallengeModeAsync",value:(g=t(n().mark((function e(t){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Gt.challenge.finish.processAsync({extraData:{level:t}});case 2:case"end":return e.stop()}}),e)}))),function(e){return g.apply(this,arguments)})},{key:"processContinueChallengeAsync",value:(y=t(n().mark((function e(){var t,r,a,i,s,o;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.getMatchState(),r=t.id,a=t.customData,i=a.playerId,s=a.opponentId,Ft.isString(r)){e.next=4;break}throw new Error("Invalid match id");case 4:if(Ft.isString(i)){e.next=6;break}throw new Error("Invalid player id");case 6:if(Ft.isString(s)){e.next=8;break}throw new Error("Invalid opponent id");case 8:if(o=GameSDK.context.getID()){e.next=11;break}throw new Error("Cannot get contextId");case 11:return e.next=13,Gt.challenge.continue.processAsync({matchId:r,contextId:o,playerId:i,opponentId:s});case 13:case"end":return e.stop()}}),e,this)}))),function(){return y.apply(this,arguments)})},{key:"processChallengeNewOpponentAsync",value:(f=t(n().mark((function e(){var t,r,a,i;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Ht.getConnectedPlayerIds(100,0),r=Math.floor(Math.random()*t.length),a=Ht.getPlayerId(),i=t[r],Ft.isString(i)&&!Ft.isEmpty(i)){e.next=6;break}throw new Error("Invalid opponent id");case 6:return e.next=8,Gt.challenge.friend.processAsync({playerId:a,opponentId:i});case 8:case"end":return e.stop()}}),e)}))),function(){return f.apply(this,arguments)})},{key:"processJoinChallengeAsync",value:(E=t(n().mark((function e(){var t,r,a,i,s;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.getMatchState(),r=t.id,a=t.customData,i=a.playerId,s=a.opponentId,Ft.isString(r)){e.next=4;break}throw new Error("Invalid match id");case 4:if(Ft.isString(i)){e.next=6;break}throw new Error("Invalid player id");case 6:if(Ft.isString(s)){e.next=8;break}throw new Error("Invalid opponent id");case 8:return e.next=10,Gt.challenge.join.processAsync({matchId:r,playerId:i,opponentId:s});case 10:case"end":return e.stop()}}),e,this)}))),function(){return E.apply(this,arguments)})},{key:"getMatchState",value:function(){var e=Gt.getMatchState();if(!e)throw new Error("Match state not found");return e}},{key:"getMatchMode",value:function(){var e=this.getMatchState();return Ft.isString(e.mode)?e.mode:null}},{key:"getTournamentsAsync",value:(v=t(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,GameSDK.tournament.getTournamentsAsync();case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",[]);case 10:case"end":return e.stop()}}),e,null,[[0,6]])}))),function(){return v.apply(this,arguments)})},{key:"createTournamentPayload",value:function(){var e,t,n=Mt.generateObjectId(),r=Ht.getPlayerId(),a=this.getMatchState().profiles;return{score:null!==(e=null===(t=(void 0===a?{}:a)[r])||void 0===t?void 0:t.score)&&void 0!==e?e:0,playerId:r,mode:xt.Modes.TOURNAMENT,name:this.createTournamentName(),leaderboardId:n,payload:{playerId:r,leaderboardId:n}}}},{key:"createTournamentName",value:function(){var e=Ht.getPlayer().name,t=void 0===e?null:e;if(t){var n=t.substring(0,7),r="".concat(n.split(" ")[0]||n,"'s Tournament"),a=Mt.removeDiacritics(r);return"".concat(a)}return"Tournament"}}],[{key:"inst",get:function(){return this._instance||(this._instance=new e),this._instance}},{key:"startMatchAsync",value:(p=t(n().mark((function t(r){var a,i;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0,a=xt.Modes,i=null!=r?r:this.inst.getMatchMode(),e.isForceSingleMode&&(i=a.SINGLE,e.isForceSingleMode=!1),t.t0=i,t.next=t.t0===a.SINGLE?7:t.t0===a.TOURNAMENT?10:t.t0===a.CHALLENGE_FRIEND?13:16;break;case 7:return t.next=9,this.inst.processStartSingleModeAsync();case 9:return t.abrupt("break",18);case 10:return t.next=12,this.inst.processStartTournamentModeAsync();case 12:return t.abrupt("break",18);case 13:return t.next=15,this.inst.processStartChallengeModeAsync();case 15:return t.abrupt("break",18);case 16:return t.next=18,this.inst.processStartSingleModeAsync();case 18:t.next=23;break;case 20:t.prev=20,t.t1=t.catch(0),console.warn("startMatchAsync",t.t1);case 23:case"end":return t.stop()}}),t,this,[[0,20]])}))),function(e){return p.apply(this,arguments)})},{key:"setProfileMatchDataAsync",value:(h=t(n().mark((function e(t){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Gt.handler.setProfileData(t);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.warn("setProfileMatchDataAsync",e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])}))),function(e){return h.apply(this,arguments)})},{key:"setMatchCustomDataAsync",value:(d=t(n().mark((function e(t){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Gt.handler.setMatchCustomData(t);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.warn("setMatchCustomDataAsync",e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])}))),function(e){return d.apply(this,arguments)})},{key:"getMatchCustomDataAsync",value:(l=t(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Gt.handler.getMatchCustomData();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.warn("getMatchCustomDataAsync",e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])}))),function(){return l.apply(this,arguments)})},{key:"setLeaderboardScoreAsync",value:(c=t(n().mark((function e(t){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Gt.handler.setLeaderboardScore(t);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.warn("setLeaderboardScoreAsync",e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])}))),function(e){return c.apply(this,arguments)})},{key:"finishMatchAsync",value:(u=t(n().mark((function e(t){var r,a;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,r=this.inst.getMatchMode(),a=Ludex.Match.Modes,e.t0=r,e.next=e.t0===a.SINGLE?6:e.t0===a.TOURNAMENT?9:e.t0===a.CHALLENGE_FRIEND?12:15;break;case 6:return e.next=8,this.inst.processFinishSingleModeAsync();case 8:return e.abrupt("break",17);case 9:return e.next=11,this.inst.processFinishTournamentModeAsync();case 11:return e.abrupt("break",17);case 12:return e.next=14,this.inst.processFinishChallengeModeAsync(t);case 14:return e.abrupt("break",17);case 15:return e.next=17,this.inst.processFinishSingleModeAsync();case 17:e.next=22;break;case 19:e.prev=19,e.t1=e.catch(0),console.warn("finishMatchAsync",e.t1);case 22:case"end":return e.stop()}}),e,this,[[0,19]])}))),function(e){return u.apply(this,arguments)})},{key:"createTournamentAsync",value:(o=t(n().mark((function e(){var t,r,a;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!1,e.next=3,this.inst.getTournamentsAsync();case 3:if(!e.sent.find((function(e){var t=JSON.parse(e.getPayload());return"DEFAULT"===e.getTournamentType()&&t.playerId===Ht.getPlayerId()}))){e.next=7;break}return e.abrupt("return",!1);case 7:return r=this.inst.createTournamentPayload(),e.prev=8,e.next=11,Gt.tournament.create.processAsync(r);case 11:a=r.leaderboardId,Jt.addLeaderboard({name:a,type:"tournament",autoSortRank:!0,leaderboardId:a}),t=!0,e.next=19;break;case 16:e.prev=16,e.t0=e.catch(8),console.warn("processCreateTournament",e.t0);case 19:return e.abrupt("return",t);case 20:case"end":return e.stop()}}),e,this,[[8,16]])}))),function(){return o.apply(this,arguments)})},{key:"joinTournamentAsync",value:(s=t(n().mark((function e(t){var r;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ht.getPlayerId(),e.next=3,Gt.tournament.join.processAsync({tournamentId:t,playerId:r});case 3:case"end":return e.stop()}}),e)}))),function(e){return s.apply(this,arguments)})},{key:"continueTournamentAsync",value:(i=t(n().mark((function e(t){var r;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ht.getPlayerId(),e.next=3,Gt.tournament.continue.processAsync({playerId:r,contextId:t});case 3:case"end":return e.stop()}}),e)}))),function(e){return i.apply(this,arguments)})},{key:"switchToSoloContext",value:function(){e.isForceSingleMode=!0}},{key:"switchToNormal",value:function(){e.specialMode=void 0,e.specialModeInfo=void 0}},{key:"switchToDailyChallenge",value:function(t,n,r){e.specialMode=Wt.DAILY_CHALLENGE,e.specialModeInfo={day:t,month:n,year:r}}},{key:"switchToJourney",value:function(t,n){e.specialMode=Wt.JOURNEY,e.specialModeInfo={season:t,level:n}}},{key:"getCurrentMatchMode",value:function(){if(e.isForceSingleMode)return xt.Modes.SINGLE;var t=e.inst.getMatchMode();return null!=t?t:xt.Modes.SINGLE}},{key:"getSpecialMode",value:function(){return e.specialMode}},{key:"getSpecialModeInfo",value:function(){return e.specialModeInfo}}]),e}());Yt.isForceSingleMode=!1,Yt.specialMode=void 0,Yt.specialModeInfo=void 0,p._RF.pop(),p._RF.push({},"09bc071ZcpI978b1NdKUaqD","AnalyticsUtils",void 0);var Vt=Ludex.Utils.Array,Kt=codex.analytics;e("g",function(){function e(){a(this,e)}return r(e,null,[{key:"inst",get:function(){return this._instance||(this._instance=new e),this._instance}},{key:"gameScene",get:function(){var e,t=null===(e=L("Canvas"))||void 0===e?void 0:e.getComponent("GameScene");if(!t)throw new Error("GameScene is not defined");return t}},{key:"trackCurrentPage",value:function(e,t){if(!Vt.has(me,e)&&(t||Vt.has(this.trackingPages,e))){this.trackingPages=this.trackingPages.filter((function(t){return t!==e})),t&&this.trackingPages.push(e);var n=this.getCurrentPage();Kt.pageview(n)}}},{key:"switchSceneTracking",value:function(){this.trackingPages=[];var e=this.getCurrentPage();Kt.pageview(e)}},{key:"getCurrentPage",value:function(){var e,t;return this.trackingPages.length>0?this.trackingPages[this.trackingPages.length-1]||"Unknown Page":null!==(e=null===(t=w.getScene())||void 0===t?void 0:t.name)&&void 0!==e?e:"Unknown Scene"}},{key:"logLevelEnd",value:function(e,t,n){var r=this.buildCommonPayload();r.success=n,r.score=t,this.appendLevelToPayload(r,e,n),Kt.event(rt.LEVEL_END,r)}},{key:"logLevelStart",value:function(){var e,t=this.gameScene.gameplay,n=t.gameModeManager,r=t.hasGoldenTiles,a={level_try_count:Q.getTryCount(),game_mode:n.getGameMode(),is_highlight:null!==(e=codex.player.getPlayerSetting("highLight"))&&void 0!==e&&e,has_golden_tiles:r};this.appendLevelToPayload(a),Kt.event(rt.LEVEL_START,a)}},{key:"logLevelRescue",value:function(){var e=this.buildCommonPayload();this.appendLevelToPayload(e),Kt.event(rt.LEVEL_RESCUE,e)}},{key:"logLevelRetry",value:function(e){var t=this.buildCommonPayload();t.screen_name=e,this.appendLevelToPayload(t),Kt.event(rt.LEVEL_RETRY,t)}},{key:"logLevelAutoFinish",value:function(){var e=this.buildCommonPayload();this.appendLevelToPayload(e),Kt.event(rt.LEVEL_AUTO_FINISH,e)}},{key:"logUseItem",value:function(e){var t={item_name:tt[e]};this.appendLevelToPayload(t),Kt.event(rt.USE_ITEM,t)}},{key:"buildCommonPayload",value:function(){var e,t=this.gameScene.gameplay,n=t.scoreManager,r=t.gameModeManager,a=t.tileManager,i=t.itemManager,s=t.hasGoldenTiles,o=ht.getCurrentThemeTileset(),u=ht.getCurrentThemeBackground();return{level_try_count:Q.getTryCount(),time_played:n.getCurrentPlayTime(),score:n.getCurrentScore(),combo:n.getCurrentCombo(),game_mode:r.getGameMode(),leftover_pairs:a.getLeftoverPairCount(),match_count:a.getMatchedPairCount(),match_failed_count:a.getMatchedPairFailedCount(),use_shuffle_count:i.getUseShuffleCount(),use_undo_count:i.getUseUndoCount(),use_hint_count:i.getUseHintCount(),is_highlight:null!==(e=codex.player.getPlayerSetting("highLight"))&&void 0!==e&&e,has_golden_tiles:s,theme_idx:o,bg_idx:u}}},{key:"appendLevelToPayload",value:function(e,t,n){switch(Yt.getSpecialMode()){case Wt.JOURNEY:e.level_2=n?wt.getCompletedLevel():wt.getCompletedLevel()+1;break;case Wt.DAILY_CHALLENGE:e.level_3=null!=t?t:Q.getLevel();break;default:e.level=null!=t?t:Q.getLevel()}}}]),e}()).trackingPages=[],p._RF.pop(),p._RF.push({},"688b9uHmGxIzor34fF2fnWU","GeneralUtils",void 0);e("l",function(){function e(){a(this,e)}return r(e,null,[{key:"inst",get:function(){return this._instance||(this._instance=new e),this._instance}},{key:"setBlockInput",value:function(e){var t=L("Canvas/InputBlocker");t&&(t.active=e)}},{key:"getBlockInput",value:function(){var e=L("Canvas/InputBlocker");return!!e&&e.active}}]),e}());p._RF.pop()}}}));

System.register("chunks:///rollupPluginModLoBabelHelpers-7ef300de.js",[],(function(t){return{execute:function(){function e(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function r(e){return(r=t("o","function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}))(e)}function n(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,g(n.key),n)}}function i(t,e,r){return(e=g(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function a(e){return(a=t("q",Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)}))(e)}function u(t,e){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function f(t,e,r){return(f=c()?Reflect.construct.bind():function(t,e,r){var n=[null];n.push.apply(n,e);var o=new(Function.bind.apply(t,n));return r&&u(o,r.prototype),o}).apply(null,arguments)}function l(e){var r="function"==typeof Map?new Map:void 0;return(l=t("n",(function(t){if(null===t||(e=t,-1===Function.toString.call(e).indexOf("[native code]")))return t;var e;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(t))return r.get(t);r.set(t,n)}function n(){return f(t,arguments,a(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),u(n,t)})))(e)}function s(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return s(t)}function y(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=a(t)););return t}function h(){return(h="undefined"!=typeof Reflect&&Reflect.get?t("r",Reflect.get.bind()):t("r",(function(t,e,r){var n=y(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}))).apply(this,arguments)}function v(t,e,r,n){return(v="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(t,e,r,n){var o,a=y(t,e);if(a){if((o=Object.getOwnPropertyDescriptor(a,e)).set)return o.set.call(n,r),!0;if(!o.writable)return!1}if(o=Object.getOwnPropertyDescriptor(n,e)){if(!o.writable)return!1;o.value=r,Object.defineProperty(n,e,o)}else i(n,e,r);return!0})(t,e,r,n)}function b(t,e){if(t){if("string"==typeof t)return d(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d(t,e):void 0}}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function g(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}t({_:function(t,e,r,n,o){var i={};Object.keys(n).forEach((function(t){i[t]=n[t]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0);i=r.slice().reverse().reduce((function(r,n){return n(t,e,r)||r}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0);void 0===i.initializer&&(Object.defineProperty(t,e,i),i=null);return i},a:function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u(t,e)},b:function(t){var e=c();return function(){var r,n=a(t);if(e){var o=a(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return p(this,r)}},c:function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},d:function(t,e,r,n){if(!r)return;Object.defineProperty(t,e,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})},e:s,f:function(t,e,r){e&&o(t.prototype,e);r&&o(t,r);return Object.defineProperty(t,"prototype",{writable:!1}),t},g:function(t){return function(){var e=this,r=arguments;return new Promise((function(o,i){var a=t.apply(e,r);function u(t){n(a,o,i,u,c,"next",t)}function c(t){n(a,o,i,u,c,"throw",t)}u(void 0)}))}},h:function(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */
t("h",(function(){return r}));var e,r={},n=Object.prototype,o=n.hasOwnProperty,i=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},u=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",f=a.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(e){l=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var o=e&&e.prototype instanceof d?e:d,a=Object.create(o.prototype),u=new k(n||[]);return i(a,"_invoke",{value:S(t,r,u)}),a}function p(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}r.wrap=s;var y="suspendedStart",h="executing",v="completed",b={};function d(){}function g(){}function m(){}var w={};l(w,u,(function(){return this}));var O=Object.getPrototypeOf,j=O&&O(O(A([])));j&&j!==n&&o.call(j,u)&&(w=j);var P=m.prototype=d.prototype=Object.create(w);function E(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function r(n,i,a,u){var c=p(t[n],t,i);if("throw"!==c.type){var f=c.arg,l=f.value;return l&&"object"==typeof l&&o.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,u)}),(function(t){r("throw",t,a,u)})):e.resolve(l).then((function(t){f.value=t,a(f)}),(function(t){return r("throw",t,a,u)}))}u(c.arg)}var n;i(this,"_invoke",{value:function(t,o){function i(){return new e((function(e,n){r(t,o,e,n)}))}return n=n?n.then(i,i):i()}})}function S(t,r,n){var o=y;return function(i,a){if(o===h)throw new Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var u=n.delegate;if(u){var c=L(u,n);if(c){if(c===b)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===y)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var f=p(t,r,n);if("normal"===f.type){if(o=n.done?v:"suspendedYield",f.arg===b)continue;return{value:f.arg,done:n.done}}"throw"===f.type&&(o=v,n.method="throw",n.arg=f.arg)}}}function L(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,L(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var i=p(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,b;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,b):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function _(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(_,this),this.reset(!0)}function A(t){if(t||""===t){var r=t[u];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function r(){for(;++n<t.length;)if(o.call(t,n))return r.value=t[n],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(typeof t+" is not iterable")}return g.prototype=m,i(P,"constructor",{value:m,configurable:!0}),i(m,"constructor",{value:g,configurable:!0}),g.displayName=l(m,f,"GeneratorFunction"),r.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},r.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,l(t,f,"GeneratorFunction")),t.prototype=Object.create(P),t},r.awrap=function(t){return{__await:t}},E(x.prototype),l(x.prototype,c,(function(){return this})),r.AsyncIterator=x,r.async=function(t,e,n,o,i){void 0===i&&(i=Promise);var a=new x(s(t,e,n,o),i);return r.isGeneratorFunction(e)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},E(P),l(P,f,"Generator"),l(P,u,(function(){return this})),l(P,"toString",(function(){return"[object Generator]"})),r.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},r.values=A,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return u.type="throw",u.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],u=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=o.call(a,"catchLoc"),f=o.call(a,"finallyLoc");if(c&&f){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!f)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,b):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),b},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),T(r),b}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:A(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),b}},r},i:function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=b(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw i}}}},j:function(t){return function(t){if(Array.isArray(t))return d(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||b(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()},k:function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,u=[],c=!0,f=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(u.push(n.value),u.length!==e);c=!0);}catch(t){f=!0,o=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(f)throw o}}return u}}(t,e)||b(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()},l:i,m:function(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?e(Object(n),!0).forEach((function(e){i(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):e(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t},n:l,o:r,p:function(t,e,r,n,o){if(!v(t,e,r,n||t)&&o)throw new TypeError("failed to set property");return r},q:a,r:h})}}}));

} }; });