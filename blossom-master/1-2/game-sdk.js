function _instanceof(e,t){if(null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance])return!!t[Symbol.hasInstance](e);return e instanceof t}function _array_like_to_array(e,t){if(null==t||t>e.length)t=e.length;for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _array_without_holes(e){if(Array.isArray(e))return _array_like_to_array(e)}function _assert_this_initialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function asyncGeneratorStep(e,t,n,r,a,o,s){try{var l=e[o](s);var d=l.value}catch(e){n(e);return}if(l.done)t(d);else Promise.resolve(d).then(r,a)}function _async_to_generator(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function _next(e){asyncGeneratorStep(o,r,a,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(o,r,a,_next,_throw,"throw",e)}_next(void 0)})}}function _call_super(e,t,n){return t=_get_prototype_of(t),_possible_constructor_return(e,_is_native_reflect_construct()?Reflect.construct(t,n||[],_get_prototype_of(e).constructor):t.apply(e,n))}function _class_call_check(e,t){if(!_instanceof(e,t))throw new TypeError("Cannot call a class as a function")}function _construct(){return(_construct=_is_native_reflect_construct()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var a=new(Function.bind.apply(e,r));if(n)_set_prototype_of(a,n.prototype);return a}).apply(null,arguments)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];if(r.enumerable=r.enumerable||false,r.configurable=true,"value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}function _create_class(e,t,n){if(t)_defineProperties(e.prototype,t);if(n)_defineProperties(e,n);return e}function _define_property(e,t,n){if(t in e)Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true});else e[t]=n;return e}function _get(e,t,n){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=_super_prop_base(e,t);if(!r)return;var a=Object.getOwnPropertyDescriptor(r,t);if(a.get)return a.get.call(n||e);return a.value})(e,t,n||e)}function _get_prototype_of(e){return(_get_prototype_of=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");if(e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}}),t)_set_prototype_of(e,t)}function _instanceof1(e,t){if(null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance])return!!t[Symbol.hasInstance](e);return _instanceof(e,t)}function _is_native_function(e){return -1!==Function.toString.call(e).indexOf("[native code]")}function _iterable_to_array(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _non_iterable_spread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _object_spread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};var r=Object.keys(n);if("function"==typeof Object.getOwnPropertySymbols)r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}));r.forEach(function(t){_define_property(e,t,n[t])})}return e}function _possible_constructor_return(e,t){if(t&&("object"===_type_of(t)||"function"==typeof t))return t;return _assert_this_initialized(e)}function _set_prototype_of(e,t){return(_set_prototype_of=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _super_prop_base(e,t){while(!Object.prototype.hasOwnProperty.call(e,t))if(null===(e=_get_prototype_of(e)))break;return e}function _to_consumable_array(e){return _array_without_holes(e)||_iterable_to_array(e)||_unsupported_iterable_to_array(e)||_non_iterable_spread()}function _type_of(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}function _unsupported_iterable_to_array(e,t){if(!e)return;if("string"==typeof e)return _array_like_to_array(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor)n=e.constructor.name;if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _array_like_to_array(e,t)}function _wrap_native_super(e){var t="function"==typeof Map?new Map:void 0;return(_wrap_native_super=function(e){if(null===e||!_is_native_function(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,Wrapper)}function Wrapper(){return _construct(e,arguments,_get_prototype_of(this).constructor)}return Wrapper.prototype=Object.create(e.prototype,{constructor:{value:Wrapper,enumerable:false,writable:true,configurable:true}}),_set_prototype_of(Wrapper,e)})(e)}function _is_native_reflect_construct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(_is_native_reflect_construct=function(){return!!e})()}function _ts_generator(e,t){var n,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=verb(0),s.throw=verb(1),s.return=verb(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function verb(e){return function(t){return step([e,t])}}function step(l){if(n)throw new TypeError("Generator is already executing.");while(s&&(s=0,l[0]&&(o=0)),o)try{if(n=1,r&&(a=2&l[0]?r.return:l[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,l[1])).done)return a;if(r=0,a)l=[2&l[0],a.value];switch(l[0]){case 0:case 1:a=l;break;case 4:return o.label++,{value:l[1],done:false};case 5:o.label++,r=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===l[0]||2===l[0])){o=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){o.label=l[1];break}if(6===l[0]&&o.label<a[1]){o.label=a[1],a=l;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(l);break}if(a[2])o.ops.pop();o.trys.pop();continue}l=t.call(e,o)}catch(e){l=[6,e],r=0}finally{n=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:true}}}(function(){"use strict";var e=Object.defineProperty;var v=function(e,t){return function(){return e&&(t=e(e=0)),t}};var dt=function(t,n){for(var r in n)e(t,r,{get:n[r],enumerable:!0})};var i=function(t,n,r){return function(t,n,r){return n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r}(t,(void 0===n?"undefined":_type_of(n))!="symbol"?n+"":n,r)};var t=v(function(){});var n,r=v(function(){n={AllowWithoutSDK:!0,MSGames:{LoginOnStart:!1,MaxLoginAttemptsPerDay:1,ScheduleNotification:{D1:"Start your week calmly. \uD83D\uDE0C Match blossoms in Blossom Master and melt away the Monday stress!",D2:"Need a peaceful pause? Your beautiful flowers are waiting! \uD83C\uDF37 Dive in now!",D3:"Mid-week recharge! ✨ New challenge awaits in the serene gardens of Blossom Master.",D4:"Plan your connections! \uD83C\uDFAF Sharpen your strategy & enjoy a stunning puzzle break.",D5:"The weekend is here! \uD83C\uDF89 Unwind with Blossom Master. Pure, blooming fun!",D6:"Lazy morning? ☕ Perfect time for Blossom Master levels at your own pace.",D7:"Recharge your mind! Let the relaxing puzzles of Blossom Master soothe your spirit."}},Yandex:{LoginOnStart:!1,MaxLoginAttemptsPerDay:1},TranssionH5:{GaId:"G-XXXXXXXXXX"}}});var a=v(function(){});var o={};dt(o,{default:function(){return s}});var s,l=v(function(){"use strict";t(),r(),a(),s={}});var d,y=v(function(){"use strict";t(),r(),a(),d=function(){function F(){var e=this;_class_call_check(this,F),i(this,"popup"),i(this,"title"),i(this,"content"),i(this,"okButton"),i(this,"noButton"),i(this,"okCallback"),i(this,"noCallback"),i(this,"onYes",function(t){e.okButton.removeEventListener("click",e.okCallback),e.okCallback=e.handleCallback(t),e.okButton.addEventListener("click",e.okCallback,{once:!0})}),i(this,"onNo",function(t){e.noButton.removeEventListener("click",e.noCallback),e.noCallback=e.handleCallback(t),e.noButton.addEventListener("click",e.noCallback,{once:!0})}),i(this,"handleCallback",function(t){return function(n){n.stopImmediatePropagation(),e.hide(),t()}}),this.createPopupElement(),this.addPopupElementStyle();var t=new MutationObserver(function(){document.getElementById("GameDiv")&&e.setupPopupElementSizeAndPosition()}),n=document.body;t.observe(n,{attributes:!0,childList:!0,subtree:!0})}return _create_class(F,[{key:"createPopupElement",value:function(){var e=document.createElement("div");e.id=this.constructor.name,e.innerHTML='\n<div id="async-popup">\n    <div id="title"></div>\n    <div id="content"></div>\n    <div class="buttons">\n        <button id="ok"></button>\n        <button id="no"></button>\n    </div>\n</div>',e.style.width="100%",e.style.height="100%",e.style.position="absolute",e.style.backgroundColor="#0000001f",document.body.appendChild(e),this.popup=e,this.popup.style.display="none",this.title=e.querySelector("#title"),this.content=e.querySelector("#content"),this.okButton=e.querySelector("#ok"),this.noButton=e.querySelector("#no")}},{key:"addPopupElementStyle",value:function(){var e=document.createElement("style");(document.head||document.getElementsByTagName("head")[0]).appendChild(e),e.appendChild(document.createTextNode("\n#async-popup {\n    width: 100%;\n    height: 100%;\n    color: #fff;\n    display: flex;\n    position: absolute;\n    flex-direction: column;\n    justify-content: space-evenly;\n    background: #202020;\n    font-family: sans-serif;\n    border-radius: 20px;\n    align-items: center;\n    padding: 20px\n}\n\n#async-popup #title {\n    font-size: 2rem;\n    font-weight: bold;\n    margin-bottom: 1rem;\n}\n\n#async-popup #content {\n    display: flex;\n    text-align: center;\n    text-wrap: balance;\n    font-size: large;\n}\n\n#async-popup .buttons {\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    justify-content: space-evenly;\n}\n\n#async-popup .buttons button {\n    margin: 0.5rem;\n    padding: 0.5rem 1rem;\n    font-size: 1.5rem;\n    font-weight: bold;\n    border-radius: 0.5rem;\n    border: none;\n    cursor: pointer;\n}"))}},{key:"setupPopupElementSizeAndPosition",value:function(){var e=document.getElementById(this.constructor.name);if(!e)return;var t=e.querySelector("#async-popup");if(!t||!document.getElementById("GameDiv"))return;t.style.width="".concat(350,"px"),t.style.height="".concat(250,"px");var n=document.body.getBoundingClientRect(),r=n.width,a=n.height;t.style.left="".concat((r-350)/2,"px"),t.style.top="".concat((a-250)/2,"px")}},{key:"show",value:function(e){this.content.textContent="".concat(e),this.popup.style.display="flex"}},{key:"hide",value:function(){this.popup.style.display="none"}}]),F}()});var f={};dt(f,{default:function(){return p}});var p,_=v(function(){"use strict";t(),r(),a(),y(),p=function(e){function W(){return _class_call_check(this,W),_call_super(this,W,arguments)}return _inherits(W,e),_create_class(W,[{key:"show",value:function(e){this.title.textContent="Purchase",this.okButton.textContent="Purchase",this.noButton.textContent="Cancel";var t=JSON.stringify(e,null,2);_get(_get_prototype_of(W.prototype),"show",this).call(this,"Do you want to purchase?\nPayload: ".concat(t))}}]),W}(d)});t(),r(),a(),l(),l(),l(),l(),l(),t(),r(),a(),t(),r(),a(),t(),r(),a();var g=function(){function B(e){var t=this;_class_call_check(this,B),i(this,"adapter"),i(this,"extra"),i(this,"currentContextID",null),i(this,"currentContextType","SOLO"),i(this,"currentContextPlayers",[]),i(this,"chooseAsyncPopup",null),i(this,"createAsyncPopup",null),i(this,"switchAsyncPopup",null),i(this,"contextIdsByCreate"),i(this,"contextIdsByChoose",[]),i(this,"playerIdsInContexts"),i(this,"handleOnYes",function(e){return function(){t.extra.isPopupShown=!1,e(!0)}}),i(this,"handleOnNo",function(e){return function(){t.extra.isPopupShown=!1;try{t.extra.exceptionUserInput("Player closed the context menu")}catch(t){e(t)}}}),this.adapter=e,this.extra=e.extra}return _create_class(B,[{key:"setCurrentContextId",value:function(e){this.checkSameContext(e),this.currentContextID=e,this.currentContextType="THREAD"}},{key:"initContextInfo",value:function(e,t){var n=GameCore.Utils,r=n.Array,a=n.String;this.contextIdsByCreate={},this.playerIdsInContexts={},this.contextIdsByChoose=r.fillWith(10,function(){return a.generateObjectId()}),!(!e||!t)&&(["SOLO","THREAD","POST","GROUP"].indexOf(t)<0||(this.currentContextID=e,this.currentContextType=t))}},{key:"getID",value:function(){return this.currentContextID}},{key:"getType",value:function(){return this.currentContextType}},{key:"loadSwitchAsyncPopup",value:function(){return _async_to_generator(function(){var e;return _ts_generator(this,function(t){switch(t.label){case 0:if(this.switchAsyncPopup)return[2];return[4,Promise.resolve().then(function(){return l(),o})];case 1:return"function"==typeof(e=t.sent().default)&&(this.switchAsyncPopup=new e),[2]}})}).call(this)}},{key:"loadChooseAsyncPopup",value:function(){return _async_to_generator(function(){var e;return _ts_generator(this,function(t){switch(t.label){case 0:if(this.chooseAsyncPopup)return[2];return[4,Promise.resolve().then(function(){return l(),o})];case 1:return"function"==typeof(e=t.sent().default)&&(this.chooseAsyncPopup=new e),[2]}})}).call(this)}},{key:"loadCreateAsyncPopup",value:function(){return _async_to_generator(function(){var e;return _ts_generator(this,function(t){switch(t.label){case 0:if(this.createAsyncPopup)return[2];return[4,Promise.resolve().then(function(){return l(),o})];case 1:return"function"==typeof(e=t.sent().default)&&(this.createAsyncPopup=new e),[2]}})}).call(this)}},{key:"switchAsync",value:function(e){return _async_to_generator(function(e){var t,n,r;var a=arguments;return _ts_generator(this,function(o){switch(o.label){case 0:return t=this,n=a.length>1&&void 0!==a[1]?a[1]:!1,this.extra.checkPopupShown(),[4,this.extra.awaitRandomDelay()];case 1:if(o.sent(),this.validateSwitchAsyncContextId(e),"SOLO"===e&&n)return this.currentContextID=null,this.currentContextType="SOLO",this.updatePlayers([]),[2];return[4,this.loadSwitchAsyncPopup()];case 2:return o.sent(),[4,new Promise(function(n,r){t.switchAsyncPopup||t.adapter.extra.exceptionUnsupported(),t.switchAsyncPopup.onYes(t.handleOnYes(n)),t.switchAsyncPopup.onNo(t.handleOnNo(r)),t.switchAsyncPopup.show(e),t.extra.isPopupShown=!0})];case 3:return o.sent(),this.currentContextID=e,this.currentContextType="THREAD",this.createPlayerIdsInContext(e,10),r=this.playerIdsInContexts[e].map(function(e){return t.createPlayerInfo(e)}),this.updatePlayers(r),[2]}})}).apply(this,arguments)}},{key:"chooseAsync",value:function(e){return _async_to_generator(function(){var e,t,n,r;return _ts_generator(this,function(a){switch(a.label){case 0:return e=this,this.extra.checkPopupShown(),[4,this.extra.awaitRandomDelay()];case 1:return a.sent(),[4,this.loadChooseAsyncPopup()];case 2:return a.sent(),[4,new Promise(function(t,n){e.chooseAsyncPopup||e.adapter.extra.exceptionUnsupported(),e.chooseAsyncPopup.onYes(e.handleOnYes(t)),e.chooseAsyncPopup.onNo(e.handleOnNo(n)),e.chooseAsyncPopup.show(),e.extra.isPopupShown=!0})];case 3:return a.sent(),t=Math.floor(Math.random()*this.contextIdsByChoose.length),n=this.contextIdsByChoose[t],this.checkSameContext(n),this.currentContextID=n,this.currentContextType="THREAD",this.createPlayerIdsInContext(n,2),r=this.playerIdsInContexts[n].map(function(t){return e.createPlayerInfo(t)}),this.updatePlayers(r),[2]}})}).call(this)}},{key:"createAsync",value:function(e){return _async_to_generator(function(){var t,n,r,a;return _ts_generator(this,function(o){switch(o.label){case 0:return t=this,this.extra.checkPopupShown(),[4,this.extra.awaitRandomDelay()];case 1:return o.sent(),[4,this.validateCreateAsyncPlayerId(e)];case 2:return o.sent(),[4,this.loadCreateAsyncPopup()];case 3:return o.sent(),[4,new Promise(function(n,r){t.createAsyncPopup||t.adapter.extra.exceptionUnsupported(),t.createAsyncPopup.onYes(t.handleOnYes(n)),t.createAsyncPopup.onNo(t.handleOnNo(r)),t.createAsyncPopup.show(e),t.extra.isPopupShown=!0})];case 4:if(o.sent(),!this.contextIdsByCreate[e])n=GameCore.Utils.String,this.contextIdsByCreate[e]=n.generateObjectId();return r=this.contextIdsByCreate[e],this.checkSameContext(r),this.currentContextID=r,this.currentContextType="THREAD",a=this.createPlayerInfo(e),this.updatePlayers([a]),[2]}})}).call(this)}},{key:"getPlayersAsync",value:function(){return _async_to_generator(function(){return _ts_generator(this,function(e){switch(e.label){case 0:return[4,this.extra.awaitRandomDelay()];case 1:return[2,(e.sent(),this.currentContextPlayers)]}})}).call(this)}},{key:"createPlayerIdsInContext",value:function(e,t){if(!this.playerIdsInContexts[e]){var n=GameCore.Utils,r=n.Array,a=n.String,o=Math.floor(Math.random()*t),s=r.fillWith(o,function(){return a.generateObjectId()});this.playerIdsInContexts[e]=s}return this.playerIdsInContexts[e]}},{key:"createPlayerInfo",value:function(e){return{getID:function(){return e},getName:function(){return"Player ".concat(e)},getPhoto:function(){return""}}}},{key:"updatePlayers",value:function(e){if("SOLO"===this.currentContextType){this.currentContextPlayers=[];return}this.currentContextPlayers=e}},{key:"checkSameContext",value:function(e){this.currentContextID===e&&this.extra.exceptionSameContext()}},{key:"validateCreateAsyncPlayerId",value:function(e){return _async_to_generator(function(){var t,n;return _ts_generator(this,function(r){switch(r.label){case 0:if((!e||Array.isArray(e))&&this.extra.exceptionClientUnsupportedOperation("Client does not support no player IDS or multiple player IDs yet"),!GameCore.Utils.Valid.isString(e))t="Array of type String contained a value of another type: ".concat(e),this.extra.exceptionInvalidParam(t);return e===GameSDK.player.getID()&&this.extra.exceptionInvalidParam("'At least one player id besides the current player must be provided.'"),[4,GameSDK.player.getConnectedPlayersAsync()];case 1:if(r.sent().some(function(t){return t.getID()===e}))return[2];return n="Provided ID ".concat(e," is not a connected player of the current player."),this.extra.exceptionInvalidParam(n),[2]}})}).call(this)}},{key:"validateSwitchAsyncContextId",value:function(e){if(this.checkSameContext(e),GameCore.Utils.Valid.isString(e))return;this.extra.exceptionClientUnsupportedOperation("Client requires update to support this operation")}}]),B}();t(),r(),a(),t(),r(),a();var w,I="lds-container",b=function(){function $(){var e=this;_class_call_check(this,$),i(this,"percentage",0),document.addEventListener("DOMContentLoaded",function(){e.createLoadingElement(),e.updateLoadingStyle()})}return _create_class($,[{key:"createLoadingElement",value:function(){var e=document.getElementById("GameDiv");if(!e)return null;var t=document.createElement("div");return t.id=I,t.setAttribute("data-clarity-unmask","true"),t.innerHTML='\n<div id="lds-game-icon-blur"></div>\n<div id="lds-game-icon"></div>\n<div id="lds-text">\n    <span id="lds-percent">0</span>%\n</div>\n<span id="lds-warn-text">We detected a slow internet, trying to load your game...</span>\n',e.appendChild(t),t}},{key:"updateLoadingStyle",value:function(){var e=document.getElementById(I);if(!e)return;var t="assets/public/logo-128x128.png";t="public/logo-128x128.png";var n=e.querySelector("#lds-game-icon");n&&_instanceof1(n,HTMLElement)&&(n.style.backgroundImage="url(".concat(t,")"),n.style.backgroundColor="transparent");var r=e.querySelector("#lds-game-icon-blur");r&&_instanceof1(r,HTMLElement)&&(r.style.backgroundImage="url(".concat(t,")"),r.style.backgroundColor="transparent")}},{key:"setLoadingProgress",value:function(e){if(this.percentage>=e)return;this.percentage=e,this.percentage>=100&&(this.percentage=100);var t=document.getElementById("lds-percent");t&&(t.innerHTML="".concat(e))}},{key:"displayWarnLoading",value:function(e){var t=document.getElementById("lds-warn-text");t&&(clearTimeout(w),e?(t.style.display="block",t.offsetWidth,t.style.opacity="0.8"):(t.style.opacity="0",w=setTimeout(function(){t.style.display="none"},300)))}},{key:"removeLoadingElement",value:function(){var e=document.getElementById(I);e&&(e.style.opacity="0",setTimeout(function(){e.remove()},300))}}]),$}();t(),r(),a();var x=function(e){function j(e,t){var n;return _class_call_check(this,j),i(n=_call_super(this,j,[t]),"code"),n.code=e,n}return _inherits(j,e),j}(_wrap_native_super(Error));var D=function(){function V(e){_class_call_check(this,V),i(this,"adapter"),i(this,"isGuest",!1),i(this,"isPopupShown",!1),i(this,"maxWaitGameCoreReadyTime",1e4),i(this,"loadingElement",null),this.adapter=e}return _create_class(V,[{key:"isRestricted",value:function(){return!1}},{key:"subscribeBotAsync",value:function(){return _async_to_generator(function(){var e,t,n,r;return _ts_generator(this,function(a){switch(a.label){case 0:return[4,this.adapter.player.canSubscribeBotAsync()];case 1:if(!a.sent())return[2,!1];e=window.game.analytics,n=(t=GameCore.Plugins.Analytics.Events).BOT_SUBSCRIBE,r=t.BOT_SUBSCRIBE_POPUP,e.event(r),a.label=2;case 2:return a.trys.push([2,5,,6]),[4,this.waitSDKInitiatedAsync()];case 3:return a.sent(),[4,this.adapter.player.subscribeBotAsync()];case 4:return[2,(a.sent(),e.event(n,{success:!0}),!0)];case 5:return a.sent(),[2,(e.event(n,{success:!1}),!1)];case 6:return[2]}})}).call(this)}},{key:"checkAndCreateShortcutAsync",value:function(){return _async_to_generator(function(){var e,t,n,r;return _ts_generator(this,function(a){switch(a.label){case 0:return[4,this.adapter.canCreateShortcutAsync()];case 1:if(!a.sent())return[2];e=window.game.analytics,n=(t=GameCore.Plugins.Analytics.Events).SHORTCUT_CREATE,r=t.SHORTCUT_CREATE_POPUP,e.event(r),a.label=2;case 2:return a.trys.push([2,5,,6]),[4,this.waitSDKInitiatedAsync()];case 3:return a.sent(),[4,this.adapter.createShortcutAsync()];case 4:return a.sent(),e.event(n,{success:!0}),[3,6];case 5:return a.sent(),e.event(n,{success:!1}),[3,6];case 6:return[2]}})}).call(this)}},{key:"waitSDKInitiatedAsync",value:function(){return GameCore.Utils.Valid.isValueChangeAsync(function(){return window.__sdkInitiated},!0,{timeout:1e4,checkInterval:100})}},{key:"waitGameCoreReadyAsync",value:function(){return _async_to_generator(function(){var e,t;return _ts_generator(this,function(n){return e=this,t=0,[2,new Promise(function(n){var r=setInterval(function(){if("GameCore"in window){clearInterval(r),n();return}(t+=10)>e.maxWaitGameCoreReadyTime&&(t=0)},10)})]})}).call(this)}},{key:"createLoadingElement",value:function(){this.loadingElement||(this.loadingElement=new b)}},{key:"setLoadingElementProgress",value:function(e){this.loadingElement&&this.loadingElement.setLoadingProgress(e)}},{key:"displayWarnLoading",value:function(e){this.loadingElement&&this.loadingElement.displayWarnLoading(e)}},{key:"destroyLoadingElement",value:function(){this.loadingElement&&this.loadingElement.removeLoadingElement()}},{key:"checkPopupShown",value:function(){this.isPopupShown&&this.exceptionPendingRequest("Please wait for the popup to close")}},{key:"delayInitialAsync",value:function(){return _async_to_generator(function(){var e,t;return _ts_generator(this,function(n){switch(n.label){case 0:if(e=GameCore.Utils.Time,!(t=GameCore.Configs.Mockup.GameSDK.SlowAPI).Enabled||t.InitialDelay<=0)return[3,2];return[4,e.sleepAsync(t.InitialDelay)];case 1:n.sent(),n.label=2;case 2:return[2]}})})()}},{key:"delayStartAsync",value:function(){return _async_to_generator(function(){var e,t;return _ts_generator(this,function(n){switch(n.label){case 0:if(e=GameCore.Configs.Mockup.GameSDK.SlowAPI,t=GameCore.Utils.Time,!e.Enabled||e.StartDelay<=0)return[3,2];return[4,t.sleepAsync(e.StartDelay)];case 1:n.sent(),n.label=2;case 2:return[2]}})})()}},{key:"delayPlayerDataAsync",value:function(){return _async_to_generator(function(){var e,t;return _ts_generator(this,function(n){switch(n.label){case 0:if(e=GameCore.Configs.Mockup.GameSDK.SlowAPI,t=GameCore.Utils.Time,!e.Enabled||e.PlayerDataDelay<=0)return[3,2];return[4,t.sleepAsync(e.PlayerDataDelay)];case 1:n.sent(),n.label=2;case 2:return[2]}})})()}},{key:"awaitRandomDelay",value:function(e){var t=arguments.length>0&&void 0!==e?e:1e3;return GameCore.Utils.Time.sleepAsync(Math.random()*t)}},{key:"randomException",value:function(e){var t=Math.floor(Math.random()*e.length),n=e[t];this["exception".concat(n)]()}},{key:"getErrorMessage",value:function(e){var t=GameCore.Utils,n=t.Valid;return t.Object.hasOwn(e,"message")&&n.isString(e.message)?e.message:null}},{key:"throwNewCommonError",value:function(e,t){throw new x(e,t)}},{key:"exceptionUserInput",value:function(e){this.throwNewCommonError("USER_INPUT",e)}},{key:"exceptionUnsupported",value:function(){this.throwNewCommonError("UNSUPPORTED","Unsupported method")}},{key:"exceptionInvalidParam",value:function(e){this.throwNewCommonError("INVALID_PARAM",e)}},{key:"exceptionPendingRequest",value:function(e){this.throwNewCommonError("PENDING_REQUEST",e)}},{key:"exceptionMethodNotImplemented",value:function(){this.throwNewCommonError("METHOD_NOT_IMPLEMENTED","Method not implemented")}},{key:"exceptionTournamentNotFound",value:function(e){this.throwNewCommonError("TOURNAMENT_NOT_FOUND",e)}},{key:"exceptionSameContext",value:function(){this.throwNewCommonError("SAME_CONTEXT","Must specify a context other than the current one.")}},{key:"exceptionInvalidOperation",value:function(e){this.throwNewCommonError("INVALID_OPERATION",e)}},{key:"exceptionNetworkFailure",value:function(e){var t=arguments.length>0&&void 0!==e?e:"Request failed to be processed";this.throwNewCommonError("NETWORK_FAILURE",t)}},{key:"exceptionUnknown",value:function(e){this.throwNewCommonError("UNKNOWN",e)}},{key:"exceptionClientUnsupportedOperation",value:function(e){this.throwNewCommonError("CLIENT_UNSUPPORTED_OPERATION",e)}},{key:"exceptionRateLimited",value:function(e){this.throwNewCommonError("RATE_LIMITED",e)}}]),V}();t(),r(),a();var S="Blossom Master".replace(/ /g,"-"),O=function(){function H(e){var t=this;_class_call_check(this,H),i(this,"adapter"),i(this,"extra"),i(this,"defaultPlayerInfo"),i(this,"currentPlayerInfo"),i(this,"infoKey","".concat(S,"_PlayerInfo")),i(this,"dataKey","".concat(S,"_PlayerData")),i(this,"subscribeBot",null),i(this,"connectedPlayers",null),i(this,"getSignature",function(){var e=t.getSignatureFormMockup();return GameCore.Utils.Valid.isString(e)?e:"default_token"}),this.adapter=e,this.extra=e.extra,this.initDefaultPlayerInfo()}return _create_class(H,[{key:"initDefaultPlayerInfo",value:function(){var e="guest-007";this.defaultPlayerInfo={playerId:e,playerName:"Guest",playerPhoto:"https://picsum.photos/seed/".concat(e,"/300/300")},this.extra.isGuest=!0,this.currentPlayerInfo=_object_spread({},this.defaultPlayerInfo)}},{key:"initPlayerInfo",value:function(e){this.updateCurrentPlayerInfo(e),GameCore.Utils.Browser.writeLocalStorage(this.infoKey,this.currentPlayerInfo)}},{key:"canSubscribeBotAsync",value:function(){return _async_to_generator(function(){return _ts_generator(this,function(e){switch(e.label){case 0:return[4,this.loadMockSubscribeBot()];case 1:return[2,(e.sent(),this.subscribeBot||this.extra.exceptionUnsupported(),this.subscribeBot.canSubscribeBotAsync())]}})}).call(this)}},{key:"subscribeBotAsync",value:function(){return _async_to_generator(function(){return _ts_generator(this,function(e){switch(e.label){case 0:return[4,this.loadMockSubscribeBot()];case 1:return[2,(e.sent(),this.subscribeBot||this.extra.exceptionUnsupported(),this.subscribeBot.subscribeBotAsync())]}})}).call(this)}},{key:"getID",value:function(){return this.currentPlayerInfo.playerId}},{key:"getName",value:function(){return this.currentPlayerInfo.playerName}},{key:"getPhoto",value:function(){return this.currentPlayerInfo.playerPhoto}},{key:"getDataAsync",value:function(e){return _async_to_generator(function(){var t,n,r,a,o,s;return _ts_generator(this,function(l){switch(l.label){case 0:return[4,this.extra.delayPlayerDataAsync()];case 1:if(l.sent(),n=(t=GameCore.Utils).Browser,r=t.Valid,a=t.Object,o=n.getLocalStorage(this.dataKey),!r.isObject(o))return[2,{}];if(0===e.length)return[2,o];return s={},[2,(e.forEach(function(e){a.hasOwn(o,e)&&(s[e]=o[e])}),s)]}})}).call(this)}},{key:"setDataAsync",value:function(e){return _async_to_generator(function(){return _ts_generator(this,function(t){switch(t.label){case 0:return[4,this.extra.delayPlayerDataAsync()];case 1:return t.sent(),GameCore.Utils.Browser.writeLocalStorage(this.dataKey,e),[2]}})}).call(this)}},{key:"getSignedPlayerInfoAsync",value:function(){return _async_to_generator(function(){var e;return _ts_generator(this,function(t){return e=this,[2,{getPlayerID:function(){var t;return null!=(t=e.getID())?t:""},getSignature:this.getSignature}]})}).call(this)}},{key:"getConnectedPlayersAsync",value:function(){return _async_to_generator(function(){return _ts_generator(this,function(e){switch(e.label){case 0:return[4,this.loadMockConnectedPlayers()];case 1:return[2,(e.sent(),this.connectedPlayers||this.extra.exceptionUnsupported(),this.connectedPlayers.getConnectedPlayersAsync())]}})}).call(this)}},{key:"updateCurrentPlayerInfo",value:function(e){var t,n=GameCore.Utils,r=n.Browser,a=n.Valid,o=n.Object,s=n.String,l=e;if(this.extra.isGuest){var d=r.getLocalStorage(this.infoKey);a.isObject(d)&&o.hasOwn(d,"playerId")&&a.isString(d.playerId)&&(l=d.playerId)}a.isEmpty(l)&&(l=s.generateObjectId());var y=this.getName();if(a.isEmpty(y))y=null!=(t=window.game.language.getText("core.nameless"))?t:"Nameless";this.currentPlayerInfo.playerId=l,this.currentPlayerInfo.playerName=y,this.currentPlayerInfo.playerPhoto="https://picsum.photos/seed/".concat(l,"/300/300"),this.updateMockupPlayerInfo(l)}},{key:"updateMockupPlayerInfo",value:function(e){var t=GameCore.Configs.Mockup.Match,n=t.Enabled,r=t.PlayerInfo,a=t.OpponentInfo;if(!n)return;var o=a.Id===e;o||(this.currentPlayerInfo.playerId=r.Id,r.Name&&(this.currentPlayerInfo.playerName=r.Name),r.Photo&&(this.currentPlayerInfo.playerPhoto=r.Photo)),o&&(this.currentPlayerInfo.playerId=a.Id,a.Name&&(this.currentPlayerInfo.playerName=a.Name),a.Photo&&(this.currentPlayerInfo.playerPhoto=a.Photo))}},{key:"getSignatureFormMockup",value:function(){var e=GameCore.Configs.Mockup.Match,t=e.PlayerInfo.Id===this.getID(),n=e.OpponentInfo.Id===this.getID();return t?e.PlayerInfo.Signature:n?e.OpponentInfo.Signature:null}},{key:"loadMockSubscribeBot",value:function(){return _async_to_generator(function(){var e;return _ts_generator(this,function(t){switch(t.label){case 0:if(this.subscribeBot)return[2];return[4,Promise.resolve().then(function(){return l(),o})];case 1:return"function"==typeof(e=t.sent().default)&&(this.subscribeBot=new e(this.adapter)),[2]}})}).call(this)}},{key:"loadMockConnectedPlayers",value:function(){return _async_to_generator(function(){var e;return _ts_generator(this,function(t){switch(t.label){case 0:if(this.connectedPlayers)return[2];return[4,Promise.resolve().then(function(){return l(),o})];case 1:return"function"==typeof(e=t.sent().default)&&(this.connectedPlayers=new e(this.extra)),[2]}})}).call(this)}}]),H}();t(),r(),a();var G=["Unsupported","NetworkFailure","PendingRequest","ClientUnsupportedOperation"],L=_to_consumable_array(G).concat(["InvalidParam"]),N=_to_consumable_array(G).concat(["InvalidParam","UserInput"]),M=_to_consumable_array(G).concat(["NetworkFailure"]),R=_to_consumable_array(G).concat(["InvalidParam","UserInput"]),z="ProductsDataMockKey",Q="PurchasesDataMockKey",ee=function(){function Y(e){var t=this;_class_call_check(this,Y),i(this,"adapter"),i(this,"extra"),i(this,"context"),i(this,"purchaseAsyncPopup$",null),i(this,"handleOnYes$",function(e){return function(){t.extra.isPopupShown=!1,e(!0)}}),i(this,"handleOnNo$",function(e){return function(){t.extra.isPopupShown=!1;try{t.extra.exceptionUserInput("Player closed the context menu")}catch(t){e(t)}}}),this.adapter=e,this.extra=e.extra,this.context=e.context}return _create_class(Y,[{key:"initPaymentInfoAsync",value:function(){return _async_to_generator(function(){return _ts_generator(this,function(e){switch(e.label){case 0:if(!GameCore.Configs.Mockup.GameSDK.Payments.Enabled)return[3,2];return[4,this.createMockProductsData()];case 1:e.sent(),e.label=2;case 2:return[2]}})}).call(this)}},{key:"getCatalogAsync",value:function(){return _async_to_generator(function(){return _ts_generator(this,function(e){switch(e.label){case 0:return[4,this.awaitRandomDelay$()];case 1:return e.sent(),this.randomError(L),[2,Object.values(this.getProductsData$())]}})}).call(this)}},{key:"loadPurchasePopupAsync$",value:function(){return _async_to_generator(function(){var e;return _ts_generator(this,function(t){switch(t.label){case 0:if(this.purchaseAsyncPopup$)return[2];return[4,Promise.resolve().then(function(){return _(),f})];case 1:return"function"==typeof(e=t.sent().default)&&(this.purchaseAsyncPopup$=new e),[2]}})}).call(this)}},{key:"purchaseAsync",value:function(e){return _async_to_generator(function(){var t;return _ts_generator(this,function(n){switch(n.label){case 0:return t=this,this.extra.checkPopupShown(),[4,this.awaitRandomDelay$()];case 1:return n.sent(),this.validatePurchaseConfig$(e),this.randomError(N),[4,this.loadPurchasePopupAsync$()];case 2:return n.sent(),[4,new Promise(function(n,r){t.purchaseAsyncPopup$||t.adapter.extra.exceptionUnsupported(),t.purchaseAsyncPopup$.onYes(t.handleOnYes$(n)),t.purchaseAsyncPopup$.onNo(t.handleOnNo$(r)),t.purchaseAsyncPopup$.show(e),t.extra.isPopupShown=!0})];case 3:return[2,(n.sent(),this.createMockPurchaseAsync$(e))]}})}).call(this)}},{key:"getPurchasesAsync",value:function(){return _async_to_generator(function(){var e;return _ts_generator(this,function(t){switch(t.label){case 0:return[4,this.awaitRandomDelay$()];case 1:return t.sent(),this.randomError(M),[2,(e=this.adapter.player.getID())?this.getPurchasesData$()[e]||[]:[]]}})}).call(this)}},{key:"consumePurchaseAsync",value:function(e){return _async_to_generator(function(){var t,n;return _ts_generator(this,function(r){switch(r.label){case 0:return[4,this.awaitRandomDelay$()];case 1:if(r.sent(),this.validatePurchaseToken$(e),this.randomError(R),!(t=this.adapter.player.getID()))return[2];return n=(this.getPurchasesData$()[t]||[]).filter(function(t){return t.purchaseToken!==e}),this.writePurchasesData$(t,n),[2]}})}).call(this)}},{key:"onReady",value:function(e){e()}},{key:"awaitRandomDelay$",value:function(){return _async_to_generator(function(){var e;return _ts_generator(this,function(t){return e=GameCore.Configs.Mockup.GameSDK.Payments.RandomDelayMs,[2,this.extra.awaitRandomDelay(e)]})}).call(this)}},{key:"randomError",value:function(e){100*Math.random()<GameCore.Configs.Mockup.GameSDK.Payments.ErrorRates&&this.extra.randomException(e)}},{key:"validatePurchaseConfig$",value:function(e){var t=GameCore.Utils,n=t.Object,r=t.Valid;r.isObject(e)||this.extra.exceptionInvalidParam("Config must be an object"),n.hasOwn(e,"productID")||this.extra.exceptionInvalidParam("Config must have productID");var a=e.productID;r.isString(a)||this.extra.exceptionInvalidParam("productID must be a string"),n.hasOwn(e,"developerPayload")&&!r.isString(e.developerPayload)&&this.extra.exceptionInvalidParam("developerPayload must be a string")}},{key:"validatePurchaseToken$",value:function(e){GameCore.Utils.Valid.isString(e)||this.extra.exceptionInvalidParam("Purchase token must be a string")}},{key:"createMockPurchaseAsync$",value:function(e){var t=GameCore.Utils.String,n={productID:e.productID,paymentID:t.generateObjectId(),purchaseToken:t.generateObjectId(),purchaseTime:new Date().toISOString(),developerPayload:e.developerPayload,signedRequest:t.generateObjectId()},r=this.adapter.player.getID();if(r){var a=this.getPurchasesData$()[r]||[];a.push(n),this.writePurchasesData$(r,a)}return n}},{key:"createMockProductsData",value:function(){return _async_to_generator(function(){var e,t,n;return _ts_generator(this,function(r){switch(r.label){case 0:if(t=(e=GameCore.Configs.Mockup.GameSDK.Payments).Enabled,n=e.Products,!t)return[2];if(Object.values(this.getProductsData$()).length>=n.length)return[2];return[4,Promise.all(this.createDefaultProducts$())];case 1:return r.sent(),[2]}})}).call(this)}},{key:"createDefaultProducts$",value:function(){var e=this;return GameCore.Configs.Mockup.GameSDK.Payments.Products.map(function(t){var n={productID:t.id,title:"Product ".concat(t.id),description:"Description for ".concat(t.id),price:t.price.toString(),priceCurrencyCode:"USD"};return e.writeProductData$(t.id,n),n})}},{key:"getProductsData$",value:function(){var e=GameCore.Utils,t=e.Browser,n=e.Valid,r=t.getLocalStorage(z);return n.isObject(r)?r:{}}},{key:"writeProductData$",value:function(e,t){var n=this.getProductsData$();n[e]=t,this.writeProductsData$(n)}},{key:"writeProductsData$",value:function(e){var t=GameCore.Utils,n=t.Browser;t.Valid.isObject(e)&&n.writeLocalStorage(z,e)}},{key:"getPurchasesData$",value:function(){var e=GameCore.Utils,t=e.Browser,n=e.Valid,r=t.getLocalStorage(Q);return n.isObject(r)?r:{}}},{key:"writePurchasesData$",value:function(e,t){var n,r=GameCore.Utils.Browser;if(!Array.isArray(t))return;var a=null!=(n=r.getLocalStorage(Q))?n:{};a[e]=t,r.writeLocalStorage(Q,a)}}]),Y}();t(),r(),a(),t(),r(),a();var et=function(){function q(e,t,n){var r,a=arguments.length>2&&void 0!==n?n:!1;_class_call_check(this,q),i(this,"id"),i(this,"title"),i(this,"contextId"),i(this,"payload"),i(this,"endTime"),i(this,"tournamentType");var o=t.config,s=t.data;this.id=e,this.title=o.title,this.contextId="0123".concat(this.id),this.payload=JSON.stringify(null!=s?s:{}),this.endTime=null!=(r=o.endTime)?r:this.defaultEndTime(),this.tournamentType=a?"PAGE_HOSTED":"DEFAULT"}return _create_class(q,[{key:"defaultEndTime",value:function(){return Math.round((Date.now()+6048e5)/1e3)}},{key:"getID",value:function(){return this.id}},{key:"getTitle",value:function(){return this.title}},{key:"getPayload",value:function(){return this.payload}},{key:"getEndTime",value:function(){return this.endTime}},{key:"getContextID",value:function(){return this.contextId}},{key:"getTournamentType",value:function(){return this.tournamentType}},{key:"toObject",value:function(){return{id:this.id,title:this.title,payload:this.payload,endTime:this.endTime,contextId:this.contextId,tournamentType:this.tournamentType}}}]),q}();var en=["Unsupported","NetworkFailure","PendingRequest","ClientUnsupportedOperation"],er=_to_consumable_array(en).concat(["InvalidParam","UserInput"]),ea=_to_consumable_array(en).concat(["InvalidOperation","UserInput"]),ei=_to_consumable_array(en).concat(["InvalidParam","UserInput"]),eo=_to_consumable_array(en).concat(["InvalidParam","UserInput"]),es=_to_consumable_array(en).concat(["NetworkFailure"]),ec="TournamentsDataMockKey",eu="TournamentLeadersMockKey",el=function(){function X(e){var t=this;_class_call_check(this,X),i(this,"adapter"),i(this,"extra"),i(this,"context"),i(this,"shareAsyncPopup",null),i(this,"createAsyncPopup",null),i(this,"processEnterTournament",function(e){return _async_to_generator(function(){return _ts_generator(this,function(t){switch(t.label){case 0:if(!this.getTournamentData(e))return[3,2];return[4,this.joinAsync(e)];case 1:t.sent(),t.label=2;case 2:return[2]}})}).call(t)}),i(this,"handleOnYes",function(e){return function(){t.extra.isPopupShown=!1,e(!0)}}),i(this,"handleOnNo",function(e){return function(){t.extra.isPopupShown=!1;try{t.extra.exceptionUserInput("Player closed the context menu")}catch(t){e(t)}}}),this.adapter=e,this.extra=e.extra,this.context=e.context}return _create_class(X,[{key:"initTournamentInfoAsync",value:function(e){return _async_to_generator(function(){return _ts_generator(this,function(t){switch(t.label){case 0:if(!GameCore.Configs.Mockup.GameSDK.Tournament.Enabled)return[3,4];return[4,this.createMockTournamentsData()];case 1:if(t.sent(),!e)return[3,3];return[4,this.processEnterTournament(e)];case 2:t.sent(),t.label=3;case 3:t.label=4;case 4:return[2]}})}).call(this)}},{key:"createMockTournamentsData",value:function(){return _async_to_generator(function(){var e,t,n,r,a,o,s,l,d,y,f,p,_,g,w,I,b;return _ts_generator(this,function(x){switch(x.label){case 0:if(e=GameCore.Utils.Object,n=(t=GameCore.Configs.Mockup.GameSDK.Tournament).Enabled,a=(r=t.NumOfTournament).Normal,o=r.HostPage,!n)return[2];return s=this.getTournamentsData(),l=e.vals(s),y=(d=this.filterExpiredTournaments(l)).filter(function(e){return"DEFAULT"===e.tournamentType}),f=d.filter(function(e){return"PAGE_HOSTED"===e.tournamentType}),p=y.length,_=f.length,g=a-p,w=o-_,I=this.createDefaultTournaments(g),b=this.createGlobalTournaments(w),[4,Promise.all(_to_consumable_array(I).concat(_to_consumable_array(b)))];case 1:return x.sent(),[2]}})}).call(this)}},{key:"filterExpiredTournaments",value:function(e){var t=Date.now()/1e3,n=e.filter(function(e){return e.endTime>t}),r={};var a=true,o=false,s=void 0;try{for(var l,d=n[Symbol.iterator]();!(a=(l=d.next()).done);a=true){var y=l.value;r[y.id]=y}}catch(e){o=true,s=e}finally{try{if(!a&&null!=d.return)d.return()}finally{if(o)throw s}}return this.writeTournamentsData(r),n}},{key:"createDefaultTournaments",value:function(e){var t=this;var n=GameCore.Utils,r=n.String,a=n.Array,o=n.Number,s=GameCore.Configs.Mockup.GameSDK.Tournament.ExtraPlayerTournamentPayload,l=window.game.leaderboard,d=GameSDK.player.getID(),y=GameSDK.player.getName();return a.length(e).map(function(){return _async_to_generator(function(){var e,t,n,a,f;return _ts_generator(this,function(p){switch(p.label){case 0:return e="".concat(y,"'s Tournament ").concat(r.generateObjectId()),[4,l.createLeaderboardAsync({name:e})];case 1:if(t=p.sent(),n=this.createMockTournamentAsync({initialScore:0,config:{title:e,tournamentTitle:e},data:_object_spread({playerId:d,playerName:y,leaderboardId:t},s)}).getID().toString(),this.getTournamentLeadersData(n))return[2];return a=o.random(2),(f=window.game.player.getConnectedPlayerIds(a,0).map(function(e){return{playerId:e,score:o.random(4)}})).sort(function(e,t){return e.score-t.score}),this.writeTournamentLeadersData(n,f),[2]}})}).call(t)})}},{key:"createGlobalTournaments",value:function(e){var t=this;var n=GameCore.Utils,r=n.String,a=n.Array,o=n.Number,s=GameCore.Configs.Mockup.GameSDK.Tournament.ExtraGlobalTournamentPayload,l=window.game.leaderboard;return a.length(e).map(function(){return _async_to_generator(function(){var e,t,n,d,y,f;return _ts_generator(this,function(p){switch(p.label){case 0:return t=_object_spread({leaderboardId:e=r.generateObjectId(),playerId:"global"},s),n="Global Tournament ".concat(e),[4,l.createLeaderboardAsync({name:n,_id:e,type:"world_tournament_leaderboard",description:JSON.stringify(t)})];case 1:if(p.sent(),d=this.createMockTournamentAsync({initialScore:0,config:{title:n,tournamentTitle:n},data:t},!0).getID().toString(),this.getTournamentLeadersData(d))return[2];return y=o.random(2),(f=a.length(y).map(function(){return{playerId:r.generateObjectId(),score:o.random(4)}})).sort(function(e,t){return e.score-t.score}),this.writeTournamentLeadersData(d,f),[2]}})}).call(t)})}},{key:"awaitRandomDelay",value:function(){return _async_to_generator(function(){var e;return _ts_generator(this,function(t){return e=GameCore.Configs.Mockup.GameSDK.Tournament.RandomDelayMs,[2,this.extra.awaitRandomDelay(e)]})}).call(this)}},{key:"randomError",value:function(e){100*Math.random()<GameCore.Configs.Mockup.GameSDK.Tournament.ErrorRates&&this.extra.randomException(e)}},{key:"loadCreateTournamentPopupAsync",value:function(){return _async_to_generator(function(){var e;return _ts_generator(this,function(t){switch(t.label){case 0:if(this.createAsyncPopup)return[2];return[4,Promise.resolve().then(function(){return l(),o})];case 1:return"function"==typeof(e=t.sent().default)&&(this.createAsyncPopup=new e),[2]}})}).call(this)}},{key:"loadSharePopupAsync",value:function(){return _async_to_generator(function(){var e;return _ts_generator(this,function(t){switch(t.label){case 0:if(this.shareAsyncPopup)return[2];return[4,Promise.resolve().then(function(){return l(),o})];case 1:return"function"==typeof(e=t.sent().default)&&(this.shareAsyncPopup=new e),[2]}})}).call(this)}},{key:"createAsync",value:function(e){return _async_to_generator(function(){var t,n,r;return _ts_generator(this,function(a){switch(a.label){case 0:return t=this,this.extra.checkPopupShown(),[4,this.awaitRandomDelay()];case 1:return a.sent(),null!==this.context.getID()&&this.extra.exceptionInvalidOperation("Cannot create tournament while in a context"),this.validateCreatePayload(e),this.randomError(er),[4,this.loadCreateTournamentPopupAsync()];case 2:return a.sent(),[4,new Promise(function(n,r){t.createAsyncPopup||t.adapter.extra.exceptionUnsupported(),t.createAsyncPopup.onYes(t.handleOnYes(n)),t.createAsyncPopup.onNo(t.handleOnNo(r)),t.createAsyncPopup.show(e),t.extra.isPopupShown=!0})];case 3:return a.sent(),r=(n=this.createMockTournamentAsync(e)).getContextID(),[2,(this.setCurrentContextID(r),n)]}})}).call(this)}},{key:"createMockTournamentAsync",value:function(e,t){var n=arguments.length>1&&void 0!==t?t:!1;var r=GameCore.Utils.String.generateObjectId(),a=new et(r,e,n),o=a.toObject();return this.writeTournamentData(r,o),a}},{key:"postScoreAsync",value:function(e){return _async_to_generator(function(){var t;return _ts_generator(this,function(n){switch(n.label){case 0:return[4,this.awaitRandomDelay()];case 1:return n.sent(),this.validateAvailableTournament(),e<0&&this.extra.exceptionInvalidParam("Score must be a positive number"),this.randomError(eo),t=window.game.player.getPlayerId(),this.updateBestScore(t,e),[2]}})}).call(this)}},{key:"shareAsync",value:function(e){return _async_to_generator(function(){var t,n,r,a,o,s,l,d;return _ts_generator(this,function(y){switch(y.label){case 0:return t=this,this.extra.checkPopupShown(),[4,this.awaitRandomDelay()];case 1:return y.sent(),this.validateAvailableTournament(),this.validateSharePayload(e),this.randomError(ei),[4,this.loadSharePopupAsync()];case 2:if(y.sent(),r=n=e.score,a=this.getCurrentTournament())o=window.game.player.getPlayerId(),s=a.getID().toString(),(l=this.getBestScore(s,o))&&l<n&&(r=l);return[4,new Promise(function(e,n){t.shareAsyncPopup||t.adapter.extra.exceptionUnsupported(),t.shareAsyncPopup.onYes(t.handleOnYes(e)),t.shareAsyncPopup.onNo(t.handleOnNo(n)),t.shareAsyncPopup.show(r),t.extra.isPopupShown=!0})];case 3:return y.sent(),d=window.game.player.getPlayerId(),this.updateBestScore(d,n),[2]}})}).call(this)}},{key:"getTournamentsAsync",value:function(){return _async_to_generator(function(){var e,t;return _ts_generator(this,function(n){switch(n.label){case 0:return e=this,[4,this.awaitRandomDelay()];case 1:return n.sent(),this.randomError(es),t=this.getTournamentsData(),[2,GameCore.Utils.Object.vals(t).map(function(t){return e.getTournamentInstance(t.id)}).filter(function(e){return null!==e})]}})}).call(this)}},{key:"joinAsync",value:function(e){return _async_to_generator(function(){var t,n;return _ts_generator(this,function(r){switch(r.label){case 0:return[4,this.awaitRandomDelay()];case 1:return r.sent(),GameCore.Utils.Valid.isString(e)||this.extra.exceptionInvalidParam("Tournament ID must be a string"),(t=this.getTournamentInstance(e))||this.extra.exceptionTournamentNotFound("Tournament could not be found."),this.randomError(ea),n=t.getContextID(),[4,GameSDK.context.switchAsync(n)];case 2:return r.sent(),[2]}})}).call(this)}},{key:"setCurrentContextID",value:function(e){_instanceof1(this.context,g)&&this.context.setCurrentContextId(e)}},{key:"getCurrentTournament",value:function(){var e=this.context.getID();if(!e)return null;var t=this.getTournamentsData();for(var n in t)if(Object.hasOwn(t,n)&&t[n].contextId===e)return this.getTournamentInstance(n);return null}},{key:"validateCreatePayload",value:function(e){var t=GameCore.Utils,n=t.Object,r=t.Valid;r.isObject(e)||this.extra.exceptionInvalidParam("Payload must be an object"),n.hasOwn(e,"initialScore")||this.extra.exceptionInvalidParam("Payload must have initialScore"),n.hasOwn(e,"config")||this.extra.exceptionInvalidParam("Payload must have config");var a=e.initialScore,o=e.config;r.isNumber(a)||this.extra.exceptionInvalidParam("initialScore must be a number"),r.isObject(o)||this.extra.exceptionInvalidParam("Config must be an object"),n.hasOwn(o,"title")||this.extra.exceptionInvalidParam("Config must have title"),n.hasOwn(o,"tournamentTitle")||this.extra.exceptionInvalidParam("Config must have tournamentTitle"),n.hasOwn(e,"data")&&!r.isObject(e.data)&&this.extra.exceptionInvalidParam("Data must be an object")}},{key:"validateSharePayload",value:function(e){var t=GameCore.Utils,n=t.Object,r=t.Valid;r.isObject(e)||this.extra.exceptionInvalidParam("Payload must be an object"),n.hasOwn(e,"score")||this.extra.exceptionInvalidParam("Payload must have score");var a=e.score;r.isNumber(a)||this.extra.exceptionInvalidParam("Score must be a number"),n.hasOwn(e,"data")&&!r.isObject(e.data)&&this.extra.exceptionInvalidParam("Data must be an object")}},{key:"validateAvailableTournament",value:function(){this.getCurrentTournament()||this.extra.exceptionTournamentNotFound("There is no tournament for this context.")}},{key:"getTournamentInstance",value:function(e){var t=this.getTournamentData(e);return t?{getID:function(){return t.id},getTitle:function(){return t.title},getPayload:function(){return t.payload},getEndTime:function(){return t.endTime},getContextID:function(){return t.contextId},getTournamentType:function(){return t.tournamentType}}:null}},{key:"getTournamentData",value:function(e){var t=this.getTournamentsData();return t[e]?t[e]:null}},{key:"writeTournamentData",value:function(e,t){var n=this.getTournamentsData();n[e]=t,this.writeTournamentsData(n)}},{key:"getTournamentsData",value:function(){var e=GameCore.Utils,t=e.Browser,n=e.Valid,r=t.getLocalStorage(ec);return n.isObject(r)?r:{}}},{key:"writeTournamentsData",value:function(e){var t=GameCore.Utils,n=t.Browser;t.Valid.isObject(e)&&n.writeLocalStorage(ec,e)}},{key:"getBestScore",value:function(e,t){var n,r=this.getTournamentLeader(e,t);return r?null!=(n=r.score)?n:null:null}},{key:"updateBestScore",value:function(e,t){var n=this.getCurrentTournament();if(!n)return;var r=n.getID().toString();if(!r)return;var a=this.getTournamentLeader(r,e);if(!a)return void this.writeTournamentLeader(r,{playerId:e,score:t});a.score<t&&(a.score=t,this.writeTournamentLeader(r,a))}},{key:"getTournamentLeader",value:function(e,t){var n,r=this.getTournamentLeadersData(e);if(!r.length)return null;return null!=(n=GameCore.Utils.Array.search(r,function(e){return e.playerId===t}))?n:null}},{key:"getTournamentLeadersData",value:function(e){var t=GameCore.Utils,n=t.Browser,r=t.Object,a=n.getLocalStorage(eu);if(!r.hasOwn(a,e))return[];var o=a[e];return Array.isArray(o)?(o.sort(function(e,t){return t.score-e.score}),o):[]}},{key:"writeTournamentLeader",value:function(e,t){var n=GameCore.Utils.Array,r=this.getTournamentLeadersData(e),a=n.searchIndex(r,function(e){return e.playerId===t.playerId});-1===a?r.push(t):r[a]=t,this.writeTournamentLeadersData(e,r)}},{key:"writeTournamentLeadersData",value:function(e,t){var n,r=GameCore.Utils,a=r.Browser,o=r.Object;if(!Array.isArray(t))return;var s=null!=(n=a.getLocalStorage(eu))?n:{};o.assign(s,_define_property({},e,t)),a.writeLocalStorage(eu,s)}}]),X}();var eh=function(){function J(){_class_call_check(this,J),i(this,"extra"),i(this,"player"),i(this,"context"),i(this,"tournament"),i(this,"payments"),i(this,"shortcut",null),i(this,"isInitialized",!1),i(this,"bannerAdInstances",{}),i(this,"rewardedVideoInstance",null),i(this,"interstitialAdInstance",null),i(this,"rewardedInterstitialInstance",null)}return _create_class(J,[{key:"initialize",value:function(){this.extra=new D(this),this.player=new O(this),this.context=new g(this),this.tournament=new el(this),this.payments=new ee(this)}},{key:"isNeedSDK",value:function(){return(null==n?void 0:n.AllowWithoutSDK)!==!0}},{key:"getLocale",value:function(){return GameCore.Utils.Browser.getLocale()}},{key:"getPlatform",value:function(){var e=GameCore.Utils.Device;return e.isAndroid()?"ANDROID":e.isIOS()?"IOS":e.isDesktop()?"WEB":e.isMobile()?"MOBILE_WEB":null}},{key:"getSDKName",value:function(){return"GameCore"}},{key:"getSDKVersion",value:function(){return"1.0.0"}},{key:"initializeAsync",value:function(){return _async_to_generator(function(){var e,t,n,r;return _ts_generator(this,function(a){switch(a.label){case 0:if(this.isInitialized)return[2];if(this.initialize(),this.extra.createLoadingElement(),!this.isNeedSDK())return[3,2];return[4,this.checkSDKInitialized()];case 1:a.sent(),a.label=2;case 2:return[4,this.extra.waitGameCoreReadyAsync()];case 3:return a.sent(),[4,this.extra.delayInitialAsync()];case 4:if(a.sent(),(e=GameCore.Utils.Browser.getQueryParams()).splashPreview)return this.extra.destroyLoadingElement(),[2];return t=e.playerId,this.player.initPlayerInfo(t),n=e.context_source_id,r=e.context_type,this.context.initContextInfo(n,r),this.isInitialized=!0,[2]}})}).call(this)}},{key:"checkSDKInitialized",value:function(){return _async_to_generator(function(){return _ts_generator(this,function(e){return[2]})})()}},{key:"startGameAsync",value:function(){return _async_to_generator(function(){var e,t,n;var r=arguments;return _ts_generator(this,function(a){switch(a.label){case 0:return e=r.length>0&&void 0!==r[0]?r[0]:!0,this.isInitialized||this.extra.exceptionInvalidOperation("GameSDK is not initialized"),[4,this.extra.delayStartAsync()];case 1:return a.sent(),window.__sdkLoadingCount=90,this.setLoadingProgress(90),this.extra.destroyLoadingElement(),t=GameCore.Events,n=(0,GameCore.Utils.Browser.getQueryParams)().tournament_id,[4,this.tournament.initTournamentInfoAsync(n)];case 2:return a.sent(),[4,this.payments.initPaymentInfoAsync()];case 3:return a.sent(),e&&window.game.event.emit(t.GAME_SDK_STARTED),[2]}})}).apply(this,arguments)}},{key:"setLoadingProgress",value:function(e){this.extra.setLoadingElementProgress(e)}},{key:"getEntryPointData",value:function(){var e=GameCore.Utils,t=e.Browser,n=e.Json,r=t.getQueryParams().payload,a=void 0===r?"{}":r;return"string"!=typeof a?{}:n.decode(a)}},{key:"getEntryPointAsync",value:function(){return _async_to_generator(function(){return _ts_generator(this,function(e){return[2,"no_entry"]})})()}},{key:"loadBannerAdAsync",value:function(e){return _async_to_generator(function(){var t;return _ts_generator(this,function(n){switch(n.label){case 0:if(!e)return[3,5];if(!!this.bannerAdInstances[e])return[3,2];return[4,Promise.resolve().then(function(){return l(),o})];case 1:"function"!=typeof(t=n.sent().default)&&this.extra.exceptionInvalidOperation("Banner ads mock is not enabled"),this.bannerAdInstances[e]=new t("banner",e),n.label=2;case 2:return[4,this.bannerAdInstances[e].loadAsync()];case 3:return n.sent(),[4,this.bannerAdInstances[e].showAsync()];case 4:n.sent(),n.label=5;case 5:return[2]}})}).call(this)}},{key:"hideBannerAdAsync",value:function(e){return _async_to_generator(function(){return _ts_generator(this,function(t){switch(t.label){case 0:if(!this.bannerAdInstances[e])return[3,2];return[4,this.bannerAdInstances[e].hideAsync()];case 1:t.sent(),t.label=2;case 2:return[2]}})}).call(this)}},{key:"getBannerHeight",value:function(e){return e.BannerHeight}},{key:"getInterstitialAdAsync",value:function(e){return _async_to_generator(function(){var t;return _ts_generator(this,function(n){switch(n.label){case 0:if(!!this.interstitialAdInstance)return[3,2];return[4,Promise.resolve().then(function(){return l(),o})];case 1:"function"!=typeof(t=n.sent().default)&&this.extra.exceptionInvalidOperation("Interstitial ads mock is not enabled"),this.interstitialAdInstance=new t("interstitial",e),n.label=2;case 2:return[2,this.interstitialAdInstance]}})}).call(this)}},{key:"getRewardedVideoAsync",value:function(e){return _async_to_generator(function(){var t;return _ts_generator(this,function(n){switch(n.label){case 0:if(!!this.rewardedVideoInstance)return[3,2];return[4,Promise.resolve().then(function(){return l(),o})];case 1:"function"!=typeof(t=n.sent().default)&&this.extra.exceptionInvalidOperation("Rewarded video ads mock is not enabled"),this.rewardedVideoInstance=new t("rewarded",e),n.label=2;case 2:return[2,this.rewardedVideoInstance]}})}).call(this)}},{key:"getRewardedInterstitialAsync",value:function(e){return _async_to_generator(function(){var t;return _ts_generator(this,function(n){switch(n.label){case 0:if(!!this.rewardedInterstitialInstance)return[3,2];return[4,Promise.resolve().then(function(){return l(),o})];case 1:"function"!=typeof(t=n.sent().default)&&this.extra.exceptionInvalidOperation("Rewarded interstitial ads mock is not enabled"),this.rewardedInterstitialInstance=new t("rewarded_interstitial",e),n.label=2;case 2:return[2,this.rewardedInterstitialInstance]}})}).call(this)}},{key:"getTournamentAsync",value:function(){return _async_to_generator(function(){var e,t,n,r,a;return _ts_generator(this,function(o){switch(o.label){case 0:return this.tournament.randomError(["Unsupported","NetworkFailure"]),e=this.context.getID(),n=(t=GameCore.Utils).Array,t.Valid.isString(e)||this.extra.exceptionInvalidOperation("Not in a context"),[4,this.tournament.getTournamentsAsync()];case 1:return r=o.sent(),[2,((a=n.search(r,function(t){return t.getContextID()===e}))||this.extra.exceptionTournamentNotFound("A Tournament with current context was not found"),a)]}})}).call(this)}},{key:"getSupportedAPIs",value:function(){return GameCore.Configs.Mockup.GameSDK.Player.SubscribeBot.CanSubscribeBot?["player.canSubscribeBotAsync"]:[]}},{key:"canCreateShortcutAsync",value:function(){return _async_to_generator(function(){return _ts_generator(this,function(e){switch(e.label){case 0:return[4,this.loadMockAddShortcut()];case 1:return[2,(e.sent(),this.shortcut||this.extra.exceptionUnsupported(),this.shortcut.canCreateShortcutAsync())]}})}).call(this)}},{key:"createShortcutAsync",value:function(){return _async_to_generator(function(){return _ts_generator(this,function(e){switch(e.label){case 0:return[4,this.loadMockAddShortcut()];case 1:return[2,(e.sent(),this.shortcut||this.extra.exceptionUnsupported(),this.shortcut.createShortcutAsync())]}})}).call(this)}},{key:"loadMockAddShortcut",value:function(){return _async_to_generator(function(){var e;return _ts_generator(this,function(t){switch(t.label){case 0:if(this.shortcut)return[2];return[4,Promise.resolve().then(function(){return l(),o})];case 1:return"function"==typeof(e=t.sent().default)&&(this.shortcut=new e(this)),[2]}})}).call(this)}}]),J}();t(),r(),a(),t(),r(),a();var ed=function(){function Z(e,t){_class_call_check(this,Z),i(this,"type"),i(this,"placementId"),this.type=e,this.placementId=t}return _create_class(Z,[{key:"getPlacementID",value:function(){return this.placementId}},{key:"hideAsync",value:function(){return _async_to_generator(function(){return _ts_generator(this,function(e){return[2,Promise.resolve()]})})()}}]),Z}();var ey={instanceId:""},ef={AD_NOT_LOADED:"AD_NOT_LOADED",LOAD_ADS_FAILURE:"LOAD_ADS_FAILURE",INVALID_OPERATION:"INVALID_OPERATION",SHOW_ADS_FAILURE:"SHOW_ADS_FAILURE",SHOW_ADS_TIMEOUT:"SHOW_ADS_TIMEOUT",SHOW_ADS_COMPLETED_FAILURE:"SHOW_ADS_COMPLETED_FAILURE"},ep=function(e){function tt(e,t){var n;return _class_call_check(this,tt),i(n=_call_super(this,tt,[e,""]),"sdk"),i(n,"type"),i(n,"instance"),i(n,"isAdDisplayed",!1),i(n,"isAdShowInProgress",!1),n.sdk=t,n.type=e,n.instance=ey,n}return _inherits(tt,e),_create_class(tt,[{key:"getPlacementID",value:function(){return this.instance.instanceId}},{key:"resetInstance",value:function(){this.instance=ey}},{key:"loadAsync",value:function(){return _async_to_generator(function(){var e,t;return _ts_generator(this,function(n){switch(n.label){case 0:if(n.trys.push([0,2,,3]),this.isAdShowInProgress)throw this.makeErrorWithCode(ef.INVALID_OPERATION,"Can't load ads while showing ads");if(this.instance.instanceId)return[2];return[4,this.sdk.loadAdsAsync({isRewardedAd:"rewarded"===this.type,canBackfill:!1})];case 1:return e=n.sent(),this.instance=e,[3,3];case 2:throw t=n.sent(),this.makeErrorWithCode(ef.LOAD_ADS_FAILURE,t);case 3:return[2]}})}).call(this)}},{key:"showAsync",value:function(){return _async_to_generator(function(){var e;return _ts_generator(this,function(t){switch(t.label){case 0:if(!this.instance.instanceId)throw this.makeErrorWithCode(ef.AD_NOT_LOADED,"Ad is not loaded. InstanceId is empty");if(this.isAdShowInProgress)throw this.makeErrorWithCode(ef.INVALID_OPERATION,"Can't show ads while showing ads");t.label=1;case 1:return t.trys.push([1,3,4,5]),this.isAdDisplayed=!1,this.isAdShowInProgress=!0,[4,Promise.race([this.processShowAd(this.instance.instanceId),this.scheduleShowingAdTimeout(3e4)])];case 2:return t.sent(),[3,5];case 3:throw _instanceof1(e=t.sent(),x)?e:this.makeErrorWithCode(ef.SHOW_ADS_FAILURE,e);case 4:return this.isAdShowInProgress=!1,[7];case 5:return[2]}})}).call(this)}},{key:"processShowAd",value:function(e){return _async_to_generator(function(){var t,n;return _ts_generator(this,function(r){switch(r.label){case 0:return r.trys.push([0,3,4,5]),[4,this.sdk.showAdsAsync(e)];case 1:if(t=r.sent(),!this.isPromise(t.showAdsCompletedAsync))throw this.makeErrorWithCode(ef.SHOW_ADS_FAILURE,new Error("The showAdsCompletedAsync promise is empty"));return this.isAdDisplayed=!0,[4,t.showAdsCompletedAsync];case 2:return r.sent(),[3,5];case 3:throw n=r.sent(),this.isErrorWithCode(n)&&n.code===ef.SHOW_ADS_COMPLETED_FAILURE&&(n.code="USER_INPUT"),this.makeErrorWithCode(ef.SHOW_ADS_FAILURE,n);case 4:return this.resetInstance(),[7];case 5:return[2]}})}).call(this)}},{key:"scheduleShowingAdTimeout",value:function(e){return _async_to_generator(function(){var t,n;return _ts_generator(this,function(r){return t=this,n=GameCore.Utils.Valid,[2,new Promise(function(r,a){setTimeout(function(){return _async_to_generator(function(){var e;return _ts_generator(this,function(t){switch(t.label){case 0:if(e=this,!this.isAdDisplayed)return[3,3];if(!this.isAdShowInProgress)return[3,2];return[4,n.isValueChangeAsync(function(){return e.isAdShowInProgress},!1,{timeout:0,checkInterval:100})];case 1:t.sent(),t.label=2;case 2:return r(),[3,4];case 3:a(this.makeErrorWithCode(ef.SHOW_ADS_TIMEOUT,"Showing ad is timed out")),t.label=4;case 4:return[2]}})}).call(t)},e)})]})}).call(this)}},{key:"isPromise",value:function(e){return(void 0===e?"undefined":_type_of(e))=="object"&&null!==e&&"function"==typeof e.then}},{key:"isErrorWithCode",value:function(e){return GameCore.Utils.Object.hasOwn(e,"code")&&"string"==typeof e.code}},{key:"getErrorReason",value:function(e){var t=GameCore.Utils.Object;return t.hasOwn(e,"message")&&"string"==typeof e.message?{reason:e.message}:t.hasOwn(e,"description")&&"string"==typeof e.description?{reason:e.description}:null}},{key:"parseError",value:function(e){try{return"string"==typeof e?e:JSON.stringify(e)}catch(e){return"Unknown error"}}},{key:"makeErrorWithCode",value:function(e,t){var n,r,a=e,o=null!=(r=null==(n=this.getErrorReason(t))?void 0:n.reason)?r:"";return o||(o=this.parseError(t)),this.isErrorWithCode(t)&&(a=t.code),new x(a,o)}}]),tt}(ed);t(),r(),a();var e_=function(e){function nt(){return _class_call_check(this,nt),_call_super(this,nt,arguments)}return _inherits(nt,e),_create_class(nt,[{key:"getID",value:function(){return this.currentContextID}},{key:"getType",value:function(){return this.currentContextType}},{key:"switchAsync",value:function(e){return _async_to_generator(function(e){var t;var n=arguments;return _ts_generator(this,function(r){if(t=n.length>1&&void 0!==n[1]?n[1]:!1,this.validateSwitchAsyncContextId(e),"SOLO"===e&&t)return this.currentContextID=null,this.currentContextType="SOLO",[2];return this.currentContextID=e,this.currentContextType="THREAD",[2]})}).apply(this,arguments)}},{key:"getPlayersAsync",value:function(){return _async_to_generator(function(){return _ts_generator(this,function(e){switch(e.label){case 0:return[4,this.extra.awaitRandomDelay()];case 1:return[2,(e.sent(),this.currentContextPlayers)]}})}).call(this)}}]),nt}(g);t(),r(),a(),t(),r(),a();var eg="How about diving into the game for a relaxing experience?",em=function(){function U(){_class_call_check(this,U)}return _create_class(U,[{key:"sendDailyNotificationInstance",value:function(){return _async_to_generator(function(){var e;return _ts_generator(this,function(t){try{if(!GameCore.Configs.GameSDKOptions.MSGames.ScheduleNotification)throw new Error("MsGamesNotification content not set up!");e=this.getNotificationPayloads(),this.batchSendNotification(e),this.updatePlayerNotificationData(e)}catch(e){}return[2]})}).call(this)}},{key:"getNotificationPayloads",value:function(){var e,t=globalThis.game.player.getNotificationData(),n={},r=[],a=Date.now(),o=a;for(var s=1;s<=7;s++){var l="D".concat(s),d=(null==(e=t[l])?void 0:e.arrivalDate)||0;if(a<d){o=Math.max(o,d);continue}r.push(l)}if(0===r.length)return n;var y=Math.floor(o-a)/1e3;for(var f=0;f<r.length;f++){var p=r[f],_=parseInt(p.replace("D","")),g={description:this.getNotificationContent(p),minDelayInSeconds:86400*(f+1)+y,type:_};n[p]=g}return n}},{key:"getNotificationContent",value:function(e){var t=GameCore.Configs.GameSDKOptions.MSGames.ScheduleNotification;if(!t)throw new Error("MsGamesNotification content not set up!");if(this.validateNotificationKey(e)){var n=t[e];return n&&""!==n?n:eg}return eg}},{key:"updatePlayerNotificationData",value:function(e){var t=globalThis.game.player,n=t.getNotificationData(),r=Date.now();for(var a=1;a<=7;a++){var o="D".concat(a),s=e[o];if(s){var l=s.minDelayInSeconds;l&&(n[o]={arrivalDate:r+1e3*l})}}t.setPlayerDataByName("notificationData",n)}},{key:"batchSendNotification",value:function(e){if(!("scheduleNotificationAsync"in GameSDK.extra))throw new Error("scheduleNotificationAsync is not available!");for(var t=1;t<=7;t++){var n=e["D".concat(t)];n&&GameSDK.extra.scheduleNotificationAsync(n)}}},{key:"validateNotificationKey",value:function(e){return GameCore.Utils.Array.has(["D1","D2","D3","D4","D5","D6","D7"],e)}}],[{key:"sendDailyNotification",value:function(){return _async_to_generator(function(){return _ts_generator(this,function(e){return[2,this.getInstance().sendDailyNotificationInstance()]})}).call(this)}},{key:"getInstance",value:function(){return this._instance||(this._instance=new U),this._instance}}]),U}();i(em,"_instance");var ev="Blossom Master",ew=function(e){function rt(e){var t;return _class_call_check(this,rt),i(t=_call_super(this,rt,[e]),"sdk"),i(t,"shareImageBase64"),i(t,"notificationImageBase64"),t.sdk=e.sdk,t.adapter=e,t}return _inherits(rt,e),_create_class(rt,[{key:"shareAsync",value:function(){return _async_to_generator(function(){var e;return _ts_generator(this,function(t){switch(t.label){case 0:if(t.trys.push([0,4,,5]),!!this.shareImageBase64)return[3,2];return[4,this.loadImageAsync("./public/share-95x95.jpg")];case 1:(e=t.sent())&&(this.shareImageBase64=e),t.label=2;case 2:return[4,this.sdk.shareAsync({title:ev,text:"Play now!",image:this.shareImageBase64})];case 3:return t.sent(),[3,5];case 4:return t.sent(),[3,5];case 5:return[2]}})}).call(this)}},{key:"switchGameAsync",value:function(e){return this.sdk.switchGameAsync({id:e})}},{key:"submitGameResultsAsync",value:function(e){return this.sdk.submitGameResultsAsync(e)}},{key:"scheduleNotificationAsync",value:function(e){return _async_to_generator(function(){var t,n,r;return _ts_generator(this,function(a){switch(a.label){case 0:if(!!this.notificationImageBase64)return[3,4];a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this.loadImageAsync("./public/notification-364x180.jpg")];case 2:return(t=a.sent())&&(this.notificationImageBase64=t),[3,4];case 3:return a.sent(),[3,4];case 4:n={playerId:this.adapter.player.getID()||"Anonymous"},r=_object_spread({},r={title:ev,description:"We miss you!",type:0,minDelayInSeconds:300,imageData:this.notificationImageBase64,callToAction:"Play now!",payload:JSON.stringify(n)},e),a.label=5;case 5:return a.trys.push([5,7,,8]),[4,this.sdk.scheduleNotificationAsync(r)];case 6:return a.sent(),[3,8];case 7:return a.sent(),[3,8];case 8:return[2]}})}).call(this)}},{key:"sendDailyNotificationAsync",value:function(){return _async_to_generator(function(){return _ts_generator(this,function(e){return[2,em.sendDailyNotification()]})})()}},{key:"isValidDisplayAdPlacement",value:function(e){return["top:728x90","bottom:728x90","left:300x250","right:300x250","topleft:300x250","topright:300x250","bottomleft:300x250","bottomright:300x250","top:320x50","right:320x50","bottom:320x50","left:320x50","left:300x600","right:300x600","top:970x250","bottom:970x250","left:160x600","right:160x600"].indexOf(e)>-1}},{key:"getBannerOffset",value:function(){return 20}},{key:"loadImageAsync",value:function(e){return _async_to_generator(function(){var t,n,r,a;return _ts_generator(this,function(o){switch(o.label){case 0:return n=(t=GameCore.Utils.Image).fetchImage,r=t.blobToDataImage,[4,n(e)];case 1:return a=o.sent(),[4,r(a)];case 2:return[2,o.sent()]}})})()}}]),rt}(D);t(),r(),a();var eI="MSPlayer",eb=function(e){function it(e){var t;return _class_call_check(this,it),i(t=_call_super(this,it,[e]),"_personalInfo"),i(t,"signature",""),i(t,"canbeLogin",!1),i(t,"maxLoginAttempts",0),t.updateLoginEnabledConfig(),t}return _inherits(it,e),_create_class(it,[{key:"updateLoginEnabledConfig",value:function(){var e=n;if(!e)return;var t=e.MSGames;t&&(this.canbeLogin=t.LoginOnStart,this.maxLoginAttempts=t.MaxLoginAttemptsPerDay)}},{key:"initPlayerAsync",value:function(){return _async_to_generator(function(){var e;return _ts_generator(this,function(t){switch(t.label){case 0:return t.trys.push([0,8,10,11]),[4,this.tryGettingSignedInPlayer()];case 1:if(e=t.sent(),!(this.canbeLogin&&!e))return[3,3];return[4,this.tryMakingPlayerSignedIn()];case 2:e=t.sent(),t.label=3;case 3:if(!e)return[3,5];return[4,this.initLoggedMode(e)];case 4:return t.sent(),[3,7];case 5:return[4,this.initGuestMode()];case 6:t.sent(),t.label=7;case 7:return[3,11];case 8:return t.sent(),[4,this.initGuestMode()];case 9:return t.sent(),[3,11];case 10:return this.canbeLogin=!0,[7];case 11:return[2]}})}).call(this)}},{key:"initLoggedMode",value:function(e){return _async_to_generator(function(){var t,n,r,a;return _ts_generator(this,function(o){return t=e.playerId,n=e.signature,r=e.publisherPlayerId,a=e.playerDisplayName,this.currentPlayerInfo.playerId=t,this.currentPlayerInfo.playerName=a,this.signature="".concat(t," ").concat(n),this._personalInfo={id:t,avatarIdHash:"0",lang:"en",publicName:a,uniqueID:r,scopePermissions:{avatar:"forbid",public_name:"forbid"}},this.extra.isGuest=!1,this.initPlayerInfo(t),[2]})}).call(this)}},{key:"initGuestMode",value:function(){return _async_to_generator(function(){var e,t;return _ts_generator(this,function(n){try{e=this.getID(),this.extra.isGuest=!0,this.initPlayerInfo(e),t=this.getName(),this._personalInfo={id:e,avatarIdHash:"0",lang:"en",publicName:t,uniqueID:e,scopePermissions:{avatar:"forbid",public_name:"forbid"}}}catch(e){}return[2]})}).call(this)}},{key:"tryGettingSignedInPlayer",value:function(e){var t=arguments.length>0&&void 0!==e?e:0;return _async_to_generator(function(){var e,n;return _ts_generator(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,6]),[4,this.adapter.sdk.getSignedInUserAsync()];case 1:return[2,r.sent()];case 2:if(e=r.sent(),!(GameCore.Utils.Object.hasOwn(e,"code")&&"SERVICE_REQUEST_FAILED"===e.code&&t<3))return[3,4];return[4,this.tryGettingSignedInPlayer(t+1)];case 3:return n=r.sent(),[3,5];case 4:n=null,r.label=5;case 5:return[2,n];case 6:return[2]}})}).call(this)}},{key:"tryMakingPlayerSignedIn",value:function(e){var t=arguments.length>0&&void 0!==e?e:0;return _async_to_generator(function(){var e,n,r;return _ts_generator(this,function(a){switch(a.label){case 0:e=GameCore.Utils.Object,a.label=1;case 1:return a.trys.push([1,3,,7]),this.validateLoginAttempts(),[4,this.adapter.sdk.signInAsync()];case 2:return[2,a.sent()];case 3:if(n=a.sent(),!(e.hasOwn(n,"code")&&"SERVICE_REQUEST_FAILED"===n.code&&t<3))return[3,5];return[4,this.tryMakingPlayerSignedIn(t+1)];case 4:return r=a.sent(),[3,6];case 5:r=null,a.label=6;case 6:return[2,r];case 7:return[2]}})}).call(this)}},{key:"validateLoginAttempts",value:function(){var e=GameCore.Utils,t=e.Browser,n=e.Valid,r=e.Object,a=e.Time,o=t.getLocalStorage(eI),s=0,l=Date.now();r.hasOwn(o,"loginAttempts")&&n.isNumber(o.loginAttempts)&&(s=o.loginAttempts),r.hasOwn(o,"lastLoginAttempt")&&n.isNumber(o.lastLoginAttempt)&&a.isToday(o.lastLoginAttempt)||(s=0),s>=this.maxLoginAttempts&&this.extra.exceptionInvalidOperation("Maximum login attempts reached for today."),t.writeLocalStorage(eI,{loginAttempts:s,lastLoginAttempt:l})}},{key:"getASIDAsync",value:function(){return _async_to_generator(function(){var e;return _ts_generator(this,function(t){return[2,null!=(e=this._personalInfo.uniqueID)?e:""]})}).call(this)}},{key:"getSignedASIDAsync",value:function(){return _async_to_generator(function(){var e,t;return _ts_generator(this,function(n){switch(n.label){case 0:return e=this,[4,this.getASIDAsync()];case 1:return t=n.sent(),[2,{getASID:function(){return t},getSignature:function(){return e.signature}}]}})}).call(this)}},{key:"getSignedPlayerInfoAsync",value:function(){return _async_to_generator(function(){var e;return _ts_generator(this,function(t){return e=this,[2,{getPlayerID:function(){var t;return null!=(t=e.getID())?t:"10"},getSignature:function(){return e.signature}}]})}).call(this)}},{key:"canSubscribeBotAsync",value:function(){return _async_to_generator(function(){return _ts_generator(this,function(e){return[2,!1]})})()}},{key:"subscribeBotAsync",value:function(){this.adapter.extra.exceptionUnsupported()}},{key:"getConnectedPlayersAsync",value:function(){this.adapter.extra.exceptionUnsupported()}}]),it}(O);t(),r(),a(),t(),r(),a();var ek=function(){function ot(e){_class_call_check(this,ot),i(this,"id"),i(this,"title"),i(this,"contextId"),i(this,"payload"),i(this,"endTime"),i(this,"tournamentType");var t=e._id,n=e.name,r=e.type,a=e.createdAt,o=e.expireTime,s=JSON.parse(e.description),l=_object_spread({leaderboardId:t},s);this.id=s.tournamentId,this.title=n,this.contextId=s.contextId,this.payload=JSON.stringify(l),this.endTime=Math.round((new Date(a).getTime()+1e3*o)/1e3),this.tournamentType="world_tournament_leaderboard"===r?"PAGE_HOSTED":"DEFAULT"}return _create_class(ot,[{key:"getID",value:function(){return this.id}},{key:"getTitle",value:function(){return this.title}},{key:"getPayload",value:function(){return this.payload}},{key:"getEndTime",value:function(){return this.endTime}},{key:"getContextID",value:function(){return this.contextId}},{key:"getTournamentType",value:function(){return this.tournamentType}}]),ot}();var eP=function(e){function st(){return _class_call_check(this,st),_call_super(this,st,arguments)}return _inherits(st,e),_create_class(st,[{key:"joinAsync",value:function(e){return _async_to_generator(function(){var t,n,r;return _ts_generator(this,function(a){switch(a.label){case 0:return t=GameCore.Utils.Array,[4,this.getTournamentsAsync()];case 1:return n=a.sent(),(r=t.search(n,function(t){return t.getID()===e}))||this.extra.exceptionTournamentNotFound("Tournament could not be found."),[4,GameSDK.context.switchAsync(r.getContextID())];case 2:return a.sent(),[2]}})}).call(this)}},{key:"getTournamentsAsync",value:function(){return _async_to_generator(function(){var e,t,n,r,a,o,s,l,d;return _ts_generator(this,function(y){switch(y.label){case 0:e=[],y.label=1;case 1:return y.trys.push([1,3,,4]),[4,globalThis.game.leaderboard.requestLeaderboardsAsync({limit:100,type:"world_tournament_leaderboard"})];case 2:t=y.sent(),n=true,r=false,a=void 0;try{for(o=t[Symbol.iterator]();!(n=(s=o.next()).done);n=true)l=s.value,d=new ek(l),e.push(d)}catch(e){r=true,a=e}finally{try{if(!n&&null!=o.return)o.return()}finally{if(r)throw a}}return[3,4];case 3:return y.sent(),[3,4];case 4:return[2,e]}})})()}}]),st}(el);var eA=function(e){function ct(e){var t;return _class_call_check(this,ct),i(t=_call_super(this,ct),"sdk"),i(t,"adPlacementList",new Set),t.sdk=e,t}return _inherits(ct,e),_create_class(ct,[{key:"initialize",value:function(){_get(_get_prototype_of(ct.prototype),"initialize",this).call(this),this.extra=new ew(this),this.player=new eb(this),this.context=new e_(this),this.tournament=new eP(this),this.rewardedVideoInstance=new ep("rewarded",this.sdk),this.interstitialAdInstance=new ep("interstitial",this.sdk)}},{key:"checkSDKInitialized",value:function(){return _async_to_generator(function(){return _ts_generator(this,function(e){return this.sdk&&this.sdk.isInMicrosoftStart()||this.extra.exceptionInvalidOperation("Microsoft Games SDK is not initialized"),[2]})}).call(this)}},{key:"initializeAsync",value:function(){var e=this;var t=this;return _async_to_generator(function(){return _ts_generator(this,function(n){switch(n.label){case 0:if(!!this.isInitialized)return[3,5];return[4,(function(){return _get(_get_prototype_of(ct.prototype),"initializeAsync",e)})().call(t)];case 1:n.sent(),this.isInitialized=!1,n.label=2;case 2:return n.trys.push([2,4,,5]),this.extra.displayWarnLoading(!1),[4,this.player.initPlayerAsync()];case 3:return n.sent(),this.isInitialized=!0,[3,5];case 4:if(n.sent(),this.isNeedSDK())throw new Error("Microsoft Games SDK not initialized");return[3,5];case 5:return[2]}})}).call(this)}},{key:"getLocale",value:function(){return this.sdk.getLocale()}},{key:"getSDKVersion",value:function(){return"v1.0.0-rc.13"}},{key:"getSDKName",value:function(){return"MsGames"}},{key:"canCreateShortcutAsync",value:function(){return _async_to_generator(function(){return _ts_generator(this,function(e){return[2,!0]})})()}},{key:"createShortcutAsync",value:function(){return _async_to_generator(function(){return _ts_generator(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this.sdk.promptInstallAsync()];case 1:return e.sent(),[3,3];case 2:return e.sent(),[3,3];case 3:return[2]}})}).call(this)}},{key:"getInterstitialAdAsync",value:function(){return _async_to_generator(function(){return _ts_generator(this,function(e){return[2,this.interstitialAdInstance]})}).call(this)}},{key:"getRewardedVideoAsync",value:function(){return _async_to_generator(function(){return _ts_generator(this,function(e){return[2,this.rewardedVideoInstance]})}).call(this)}},{key:"getRewardedInterstitialAsync",value:function(){return _async_to_generator(function(){return _ts_generator(this,function(e){return[2,this.rewardedVideoInstance]})}).call(this)}},{key:"loadBannerAdAsync",value:function(e){return _async_to_generator(function(){var e,t,n,r,a,o,s,l,d,y,f;return _ts_generator(this,function(p){switch(p.label){case 0:e=GameCore.Configs.Ads.BannerDisplayAdOptions,t=true,n=false,r=void 0;try{for(a=e[Symbol.iterator]();!(t=(o=a.next()).done);t=true)l=(s=o.value).Position,d=s.BannerWidth,y=s.BannerHeight,f="".concat(l,":").concat(d,"x").concat(y),this.extra.isValidDisplayAdPlacement(f)&&this.adPlacementList.add(f)}catch(e){n=true,r=e}finally{try{if(!t&&null!=a.return)a.return()}finally{if(n)throw r}}return[4,this.showBannerAdsAsync()];case 1:return p.sent(),[2]}})}).call(this)}},{key:"hideBannerAdAsync",value:function(e){return _async_to_generator(function(){return _ts_generator(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this.sdk.hideDisplayAdsAsync()];case 1:return e.sent(),[3,3];case 2:return e.sent(),[3,3];case 3:return[2]}})}).call(this)}},{key:"getEntryPointAsync",value:function(){return _async_to_generator(function(){var e;return _ts_generator(this,function(t){return e=this.sdk.getEntryPointInfo(),[2,this.sdk.getNotificationPayload()?"msn_notification":e.entryPointId]})}).call(this)}},{key:"showBannerAdsAsync",value:function(){return _async_to_generator(function(){var e;return _ts_generator(this,function(t){switch(t.label){case 0:if(0!==this.adPlacementList.size)return[3,1];return this.extra.exceptionInvalidOperation("Invalid banner ad placement"),[3,4];case 1:return t.trys.push([1,3,,4]),e=_to_consumable_array(this.adPlacementList),[4,this.sdk.showDisplayAdsAsync(e)];case 2:return t.sent(),[3,4];case 3:return t.sent(),[3,4];case 4:return this.adPlacementList.clear(),[2]}})}).call(this)}},{key:"getTournamentAsync",value:function(){return _async_to_generator(function(){var e,t,n,r,a;return _ts_generator(this,function(o){switch(o.label){case 0:return e=this.context.getID(),n=(t=GameCore.Utils).Array,t.Valid.isString(e)||this.extra.exceptionInvalidOperation("Not in a context"),[4,this.tournament.getTournamentsAsync()];case 1:return r=o.sent(),[2,((a=n.search(r,function(t){return t.getContextID()===e}))||this.extra.exceptionTournamentNotFound("A Tournament with current context was not found"),a)]}})}).call(this)}}]),ct}(eh);function Zt(){var e,t=window;return"FBInstant"in t?e=new s(window.FBInstant):"YaGames"in t?e=new s(window.YaGames):"funmax"in t?e=new s(window.funmax):"$msstart"in t?e=new eA(window.$msstart):"gdsdk"in t?e=new s(window.gdsdk):"h5sdk"in t?e=new s(window.h5sdk):"CrazyGames"in t?e=new s(window.CrazyGames.SDK):"GlanceGamingAdInterface"in t?e=new s(window.GlanceGamingAdInterface):e=new eh,e}l(),l(),l(),t(),r(),a(),new(function(){function lt(){_class_call_check(this,lt),i(this,"usedCallLocations"),this.usedCallLocations=Object.create(null)}return _create_class(lt,[{key:"getCallerLine",value:function(){var e=new Error;if(!e.stack)return null;var t=e.stack.split("\n")[4];return t?t.trim():null}},{key:"blockAccess",value:function(){try{var e=this.getCallerLine();if(!e||this.usedCallLocations[e])return!1;if(["eval","at <","(<"].some(function(t){return e.includes(t)}))throw new Error("Access blocked for the caller: ".concat(e));return this.usedCallLocations[e]=!0,!1}catch(e){return!0}}}]),lt}()),window.GameSDK=Object.seal(Zt()),window})(),function(){"use strict";var e={TAG_IDS:"G-0V3C9QQ87C",BUILD_VERSION:"1"};var t=0,A=function(){var e=setInterval(function(){if(window.__sdkLoadingCount>=70)return void clearInterval(e);t!==window.__sdkLoadingCount&&(t=window.__sdkLoadingCount,GameSDK.setLoadingProgress(window.__sdkLoadingCount))},500)},n=null,E=function(){n=setTimeout(function(){window.__sdkLoadingCount>0||GameSDK.extra.displayWarnLoading(!0)},8e3)},h=function(){clearTimeout(n),GameSDK.extra.displayWarnLoading(!1)},m=function(){return _async_to_generator(function(){return _ts_generator(this,function(e){switch(e.label){case 0:E(),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,GameSDK.initializeAsync()];case 2:return e.sent(),[3,4];case 3:return e.sent(),setTimeout(m,2e3),[2];case 4:return h(),window.__sdkLoadingCount=1,GameSDK.setLoadingProgress(window.__sdkLoadingCount),A(),[4,C()];case 5:return e.sent(),window.__sdkInitiated=!0,[2]}})})()},r={},C=function(){return _async_to_generator(function(){var t,n,r,a;return _ts_generator(this,function(o){switch(o.label){case 0:if(o.trys.push([0,5,6,7]),0===(t=e.TAG_IDS.split(" ")).length&&t.push("G-3ZG4F3ZNXH"),!t[0]||"null"===t[0])return[2];n="no_entry",o.label=1;case 1:return o.trys.push([1,3,,4]),[4,GameSDK.getEntryPointAsync()];case 2:return n=null!=(r=o.sent())?r:n,[3,4];case 3:return o.sent(),[3,4];case 4:return(a=document.createElement("script")).async=!0,a.src="https://www.googletagmanager.com/gtag/js?id=".concat(t[0]),document.head.appendChild(a),P(GameSDK.player.getID(),n,t),[3,7];case 5:return c(o.sent()),[3,7];case 6:return u(),[7];case 7:return[2]}})})()},c=function(e){var t=window.game,n=t.analytics,r=t.monitorError;if(!r)return void window.__errorQueue.push(e);n.event("app_crash_handle",{error:e}),r.sendException(e)},P=function(t,n,a){try{window.focus();var o=e.BUILD_VERSION,s=void 0===o?"0":o,l=GameSDK.getEntryPointData()||{},d=l.fbig_ad_id,y=l.fbig_adset_id,f=l.fbig_campaign_id,p=l.fb_instant_game_adset_id,_=l.fb_instant_game_ad_id,g=l.fb_instant_game_campaign_id,w=f||g;window.gtag("js",new Date),window.gtag("set","client_id","100.".concat(t)),window.gtag("set","user_id",t),window.gtag("set","send_page_view",!1),a.forEach(function(e){window.gtag("config",e,{cookie_flags:"SameSite=None;Secure",build:s,medium:n,campaign:w,groups:"GA"})});var I=GameCore.Utils.Browser.getQueryParams().entry_point||n;r.user_id=t,r.player_id=t,r.app_version=s,r.traffic_source=n,r.traffic_source_detail=I,r.ad_id=d||_,r.adset_id=y||p,r.campaign_id=w,window.gtag("set","user_properties",r)}catch(e){c(e)}},u=function(e){var t=arguments.length>0&&void 0!==e?e:0;if(!(t>=30)){if(!window.game||!window.game.event)return void setTimeout(function(){return u(t+1)},50);k(),T()}},k=function(){var e=window.game,t=e.analytics,n=e.event,r=GameCore.Events,a=GameCore.Plugins.Analytics.Events,o=a.APP_LAUNCH,s=a.APP_INITIALIZED;t.event(o),n.catchUp(r.GAME_SDK_READY,function(){t.event(s)})},K=function(){try{var e;var t=window.game.player,n=t.getBestScore(),a=null!=(e=t.getGameData().coins)?e:0;r.new_user=t.isFirstLogin(),r.coins=a,r.score=n;var o=GameSDK.getEntryPointData()||{},s=o.content,l=o.notif_id;(s||l)&&(r.traffic_source_detail=null!=s?s:"notif_".concat(l)),window.gtag("set","user_properties",r)}catch(e){c(e)}},T=function(){try{if(!GameSDK.player.getID())return;var e=window.game.event,t=GameCore.Events.PLAYER_INFO_LOADED;e.catchUp(t,K)}catch(e){c(e)}};m()}();