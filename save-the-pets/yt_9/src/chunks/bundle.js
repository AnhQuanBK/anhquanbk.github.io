function _instanceof(left,right){return null!=right&&"u">typeof Symbol&&right[Symbol.hasInstance]?!!right[Symbol.hasInstance](left):left instanceof right}function _type_of(obj){return obj&&"u">typeof Symbol&&obj.constructor===Symbol?"symbol":typeof obj}function _ts_generator(thisArg,body){var f,y,t,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]},g=Object.create(("function"==typeof Iterator?Iterator:Object).prototype),d=Object.defineProperty;return d(g,"next",{value:verb(0)}),d(g,"throw",{value:verb(1)}),d(g,"return",{value:verb(2)}),"function"==typeof Symbol&&d(g,Symbol.iterator,{value:function(){return this}}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw TypeError("Generator is already executing.");for(;g&&(g=0,op[0]&&(_=0)),_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}}System.register([],function(cn,dn){return{execute:function execute(){System.register("chunks:///TournamentUtils-9f4fc570.js",["cc"],function(E){var y,he,ve,ie,pe,J,Je,Ze,qe,Xe,me,ge,ae,Ee,Qe,Z,$e,et,q,Se,Ae,Te,Ne,Ie;return{setters:[function(I){y=I.cclegacy,he=I.JsonAsset,ve=I.Prefab,ie=I.AnimationClip,pe=I.ImageAsset,J=I.SpriteFrame,Je=I.Font,Ze=I.assetManager,qe=I.AudioClip,Xe=I.sp,me=I.tween,ge=I.Animation,ae=I.UITransform,Ee=I.view,Qe=I.screen,Z=I.math,$e=I.ccenum,et=I.director,q=I.find,Se=I.loadWasmModuleBullet,Ae=I.loadWasmModulePhysX,Te=I.loadWasmModuleBox2D,Ne=I.loadWasmModuleSpine,Ie=I.game}],execute:function execute(){function I(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(n);e&&(u=u.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),t.push.apply(t,u)}return t}function W(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?I(Object(t),!0).forEach(function(u){O(n,u,t[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):I(Object(t)).forEach(function(u){Object.defineProperty(n,u,Object.getOwnPropertyDescriptor(t,u))})}return n}function tt(n){return(tt=E("_","function"==typeof Symbol&&"symbol"==_type_of(Symbol.iterator)?function(e){return void 0===e?"undefined":_type_of(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":_type_of(e)}))(n)}function nt(n,e,t,u,o,i,r){try{var a=n[i](r),s=a.value}catch(d){return void t(d)}a.done?e(s):Promise.resolve(s).then(u,o)}function p(n){return function(){var e=this,t=arguments;return new Promise(function(u,o){var i=n.apply(e,t);function r(s){nt(i,u,o,r,a,"next",s)}function a(s){nt(i,u,o,r,a,"throw",s)}r(void 0)})}}function S(n,e){if(!_instanceof(n,e))throw TypeError("Cannot call a class as a function")}function rt(n,e){for(var t=0;t<e.length;t++){var u=e[t];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(n,st(u.key),u)}}function A(n,e,t){return e&&rt(n.prototype,e),t&&rt(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function O(n,e,t){return(e=st(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function F(n,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&oe(n,e)}function $(n){return($=E("m",Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)}))(n)}function oe(n,e){return(oe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function oe(t,u){return t.__proto__=u,t})(n,e)}function it(){if(("u"<typeof Reflect?"undefined":_type_of(Reflect))>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(unused){return!1}}function at(n,e,t){return(at=it()?Reflect.construct.bind():function at(u,o,i){var r=[null];r.push.apply(r,o);var a=new(Function.bind.apply(u,r));return i&&oe(a,i.prototype),a}).apply(null,arguments)}function be(n){var e="function"==typeof Map?new Map:void 0;return(be=E("f",function(t){if(null===t||-1===Function.toString.call(t).indexOf("[native code]"))return t;if("function"!=typeof t)throw TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,o)}function o(){return at(t,arguments,$(this).constructor)}return o.prototype=Object.create(t.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),oe(o,t)}))(n)}function ot(n){if(void 0===n)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Lt(n,e){if(e&&((void 0===e?"undefined":_type_of(e))=="object"||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return ot(n)}function B(n){var e=it();return function(){var t,u=$(n);return t=e?Reflect.construct(u,arguments,$(this).constructor):u.apply(this,arguments),Lt(this,t)}}function Ot(n,e){for(;!Object.prototype.hasOwnProperty.call(n,e)&&null!==(n=$(n)););return n}function ut(){return(ut=("u"<typeof Reflect?"undefined":_type_of(Reflect))<"u"&&Reflect.get?E("l",Reflect.get.bind()):E("l",function(n,e,t){var u=Ot(n,e);if(u){var o=Object.getOwnPropertyDescriptor(u,e);return o.get?o.get.call(arguments.length<3?n:t):o.value}})).apply(this,arguments)}function Re(n){return function(e){if(Array.isArray(e))return we(e)}(n)||function(e){if(("u"<typeof Symbol?"undefined":_type_of(Symbol))<"u"&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(n)||_e(n)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _e(n,e){if(n){if("string"==typeof n)return we(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);return"Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t?Array.from(n):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?we(n,e):void 0}}function we(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,u=Array(e);t<e;t++)u[t]=n[t];return u}function M(n,e){var t=("u"<typeof Symbol?"undefined":_type_of(Symbol))<"u"&&n[Symbol.iterator]||n["@@iterator"];if(!t){if(Array.isArray(n)||(t=_e(n))||e&&n&&"number"==typeof n.length){t&&(n=t);var u=0,o=function o(){};return{s:o,n:function n1(){return u>=n.length?{done:!0}:{done:!1,value:n[u++]}},e:function e(s){throw s},f:o}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,r=!0,a=!1;return{s:function s(){t=t.call(n)},n:function n(){var s=t.next();return r=s.done,s},e:function e(s){a=!0,i=s},f:function f(){try{r||null==t.return||t.return()}finally{if(a)throw i}}}}function st(n){var e=function(t,u){if((void 0===t?"undefined":_type_of(t))!="object"||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var i=o.call(t,u||"default");if((void 0===i?"undefined":_type_of(i))!="object")return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===u?String:Number)(t)}(n,"string");return(void 0===e?"undefined":_type_of(e))=="symbol"?e:String(e)}E({_:tt,a:p,b:F,c:B,d:S,e:A,f:be,g:M,h:function h(n,e,t,u,o){var i={};return Object.keys(u).forEach(function(r){i[r]=u[r]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=t.slice().reverse().reduce(function(r,a){return a(n,e,r)||r},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(n,e,i),i=null),i},i:function i(n,e,t,u){t&&Object.defineProperty(n,e,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(u):void 0})},j:ot,k:W,l:ut,m:$,s:function s(n,e){return function(t){if(Array.isArray(t))return t}(n)||function(t,u){var o=null==t?null:("u"<typeof Symbol?"undefined":_type_of(Symbol))<"u"&&t[Symbol.iterator]||t["@@iterator"];if(null!=o){var i,r,a,s,d=[],f=!0,h=!1;try{if(a=(o=o.call(t)).next,0===u){if(Object(o)!==o)return;f=!1}else for(;!(f=(i=a.call(o)).done)&&(d.push(i.value),d.length!==u);f=!0);}catch(g){h=!0,r=g}finally{try{if(!f&&null!=o.return&&(s=o.return(),Object(s)!==s))return}finally{if(h)throw r}}return d}}(n,e)||_e(n,e)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()},u:O,v:Re}),E("E",!1),E("K",!0),y._RF.push({},"725f8u/lDtFbY1DMY0uJSL9","Locales",void 0),E("w",["en","ru"]);var Pt=E("L",{en:"fonts/mikado-bold.ttf",ru:"fonts/nunito-black.ttf"});E("N",{ru:"locales/ru"}),E("J",{en:"104px",ru:"96px"}),y._RF.pop(),y._RF.push({},"30f3eu78CVKp5+jOQ2m1GKG","ResourceUtils",void 0);var lt=Ludex.Utils,Ft=lt.Function,Bt=lt.Time,xt=["loadable","animations"],ct=(n=p(function(){return _ts_generator(this,function(_state){switch(_state.label){case 0:return _state.trys.push([0,2,,4]),[4,Promise.all(xt.map(function(t){return Gt.loadBundle(t)}))];case 1:case 3:return _state.sent(),[3,4];case 2:return _state.sent(),[4,Bt.sleepAsync(500)];case 4:return[2]}})}),function(){return n.apply(this,arguments)}),Gt=E("R",function(){var e,t,u,o,i,r,a,s,d,f,h,g,k,H,x,L,G;function n(){S(this,n),this.bundles={loadable:null,animations:null}}return A(n,[{key:"getBundleNameByType",value:function value(l){return l===ie?"animations":"loadable"}},{key:"loadBundleByType",value:(G=p(function(l){var c;return _ts_generator(this,function(_state){return c=this.getBundleNameByType(l),[2,n.loadBundle(c)]})}),function(l){return G.apply(this,arguments)})},{key:"getBundleByType",value:function value(l){var c,v=this.getBundleNameByType(l);return null!=(c=this.bundles[v])?c:null}},{key:"preloadAsset",value:(L=p(function(l,c,v){var T,w;return _ts_generator(this,function(_state){switch(_state.label){case 0:return T=this,[4,this.loadBundleByType(c)];case 1:if(_state.sent(),w=this.getBundleByType(c))return[2,new Promise(function(_,P){w.preload(l,c,function(N){N?P(N):v?T.loadAssetAsync(l,c).finally(_):_()})})];return[2]}})}),function(l,c,v){return L.apply(this,arguments)})},{key:"loadAssetAsync",value:(x=p(function(l,c){var v;return _ts_generator(this,function(_state){switch(_state.label){case 0:return[4,this.loadBundleByType(c)];case 1:if(_state.sent(),!(v=this.getBundleByType(c)))return[2,null];return[2,this.getAsset(l,c)||new Promise(function(w,_){v.load(l,c,function(P,N){N?w(N):_(null)})})]}})}),function(l,c){return x.apply(this,arguments)})},{key:"loadAssetsAsync",value:(H=p(function(l,c){var v,T,w,_,P,N,Ct;return _ts_generator(this,function(_state){switch(_state.label){case 0:return[4,this.loadBundleByType(c)];case 1:if(_state.sent(),!(v=this.getBundleByType(c)))return[2,null];for(T=[],w=[],_=0,P=l.length;_<P;_++)N=l[_],(Ct=this.getAsset(N,c))?T.push({index:_,asset:Ct}):w.push({index:_,path:N});return[2,0===w.length?Promise.resolve(T.map(function(fe){return fe.asset})):new Promise(function(fe){v.load(w.map(function(Ke){return Ke.path}),c,function(Ke,ze){if(Ke||ze.length!==w.length)fe(null);else{for(var ye=0,sn=ze.length;ye<sn;ye++){var Ve,Dt=ze[ye];if(Dt){var Ye=null==(Ve=w[ye])?void 0:Ve.index;if(!Ye)return;T.splice(Ye,0,{index:Ye,asset:Dt})}}fe(T.map(function(ln){return ln.asset}))}})})]}})}),function(l,c){return H.apply(this,arguments)})},{key:"loadDirAsync",value:(k=p(function(l,c){var v;return _ts_generator(this,function(_state){switch(_state.label){case 0:return[4,this.loadBundleByType(c)];case 1:return _state.sent(),[2,(v=this.getBundleByType(c))?new Promise(function(T){v.loadDir(l,c,function(w,_){T(_||[])})}):Promise.resolve([])]}})}),function(l,c){return k.apply(this,arguments)})},{key:"preloadDirAsync",value:(g=p(function(l,c,v){var T,w;return _ts_generator(this,function(_state){switch(_state.label){case 0:return T=this,[4,this.loadBundleByType(c)];case 1:if(_state.sent(),w=this.getBundleByType(c))return[2,new Promise(function(_,P){w.preloadDir(l,c,function(N){N?P(N):v?T.loadDirAsync(l,c).finally(_):_()})})];return[2]}})}),function(l,c,v){return g.apply(this,arguments)})},{key:"getAsset",value:function value(l,c){var v=this.getBundleByType(c);if(!v)return null;var T=n.getAssetInfo(l,c);return T?v.get(T.path,c):null}},{key:"loadFontAsync",value:function value(l){var c=Pt[l].replace(/\.[^.]+$/,"");return this.loadAssetAsync(c,Je)}},{key:"loadSpriteFramesAsync",value:(h=p(function(l){var c,v,T,w,_arguments=arguments;return _ts_generator(this,function(_state){switch(_state.label){case 0:return c=!(_arguments.length>1&&void 0!==_arguments[1])||_arguments[1],[4,this.loadAssetsAsync(l,J)];case 1:if(v=_state.sent()){w=M(v);try{for(w.s();!(T=w.n()).done;)T.value.packable=c}catch(P){w.e(P)}finally{w.f()}}return[2,v]}})}),function(l){return h.apply(this,arguments)})}],[{key:"inst",get:function get(){return this._instance||(this._instance=new n),this._instance}},{key:"loadBundle",value:(f=p(function(l){var c;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(c=this,this.inst.bundles[l])return[3,2];return[4,new Promise(function(v,T){var w=setTimeout(T,15e3);Ze.loadBundle(l,null,function(_,P){clearTimeout(w);var N=c.inst.bundles[l];N||!_&&P?(c.inst.bundles[l]=null!=N?N:P,v(!0)):T(_)})})];case 1:_state.sent(),_state.label=2;case 2:return[2]}})}),function(l){return f.apply(this,arguments)})},{key:"loadAudioAsync",value:(d=p(function(l){return _ts_generator(this,function(_state){return[2,this.inst.loadAssetAsync(l,qe)]})}),function(l){return d.apply(this,arguments)})},{key:"loadJsonAsync",value:(s=p(function(l){return _ts_generator(this,function(_state){return[2,this.inst.loadAssetAsync(l,he)]})}),function(l){return s.apply(this,arguments)})},{key:"loadPrefabAsync",value:(a=p(function(l){return _ts_generator(this,function(_state){return[2,this.inst.loadAssetAsync(l,ve)]})}),function(l){return a.apply(this,arguments)})},{key:"loadAnimClipAsync",value:(r=p(function(l){return _ts_generator(this,function(_state){return[2,this.inst.loadAssetAsync(l,ie)]})}),function(l){return r.apply(this,arguments)})},{key:"loadSkeletonDataAsync",value:(i=p(function(l){return _ts_generator(this,function(_state){return[2,this.inst.loadAssetAsync(l,Xe.SkeletonData)]})}),function(l){return i.apply(this,arguments)})},{key:"loadImageSpriteFrameAsync",value:(o=p(function(l){var c;return _ts_generator(this,function(_state){switch(_state.label){case 0:return[4,this.inst.loadAssetAsync(l,pe)];case 1:return[2,(c=_state.sent())?J.createWithImage(c):null]}})}),function(l){return o.apply(this,arguments)})},{key:"loadSpriteFrameAsync",value:(u=p(function(l){var c,v,_arguments=arguments;return _ts_generator(this,function(_state){switch(_state.label){case 0:return c=!(_arguments.length>1&&void 0!==_arguments[1])||_arguments[1],[4,this.inst.loadAssetAsync(l,J)];case 1:return[2,((v=_state.sent())&&(v.packable=c),v)]}})}),function(l){return u.apply(this,arguments)})},{key:"loadSpriteFramesDirAsync",value:(t=p(function(l){return _ts_generator(this,function(_state){return[2,this.inst.loadDirAsync(l,J)]})}),function(l){return t.apply(this,arguments)})},{key:"preloadJson",value:function value(l){var c=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.inst.preloadAsset(l,he,c)}},{key:"preloadPrefab",value:function value(l){var c=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.inst.preloadAsset(l,ve,c)}},{key:"preloadAnimClip",value:function value(l){var c=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.inst.preloadAsset(l,ie,c)}},{key:"preloadImageSpriteFrame",value:function value(l){var c=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.inst.preloadAsset(l,pe,c)}},{key:"preloadSpriteFrame",value:function value(l){var c=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.inst.preloadAsset(l,J,c)}},{key:"preloadSpriteFramesDir",value:function value(l){var c=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.inst.preloadDirAsync(l,J,c)}},{key:"getAssetInfo",value:function value(l,c){var v=this.inst.getBundleByType(c);return v?v.getInfoWithPath(l,c):null}},{key:"getAsset",value:function value(l,c){return this.inst.getAsset(l,c)}},{key:"loadFontAsync",value:function value(l){return this.inst.loadFontAsync(l)}},{key:"loadSpriteFramesAsync",value:(e=p(function(l){var c,_arguments=arguments;return _ts_generator(this,function(_state){return c=!(_arguments.length>1&&void 0!==_arguments[1])||_arguments[1],[2,this.inst.loadSpriteFramesAsync(l,c)]})}),function(l){return e.apply(this,arguments)})}]),n}());Ft.retry(ct,ct),y._RF.pop(),y._RF.push({},"a0999j91ytLSYSzNSPnMz3i","AnimAbortSignalAdapter",void 0);var Mt=Ludex.Utils.Signal,Ut=function(){function n(e){S(this,n),this.oldCallbacks=[],this.newCallbacks=[],this.signal=e}return A(n,[{key:"once",value:function value(e){var t=this,u=function u(){return e(Error(t.signal.reason))};this.oldCallbacks.push(u),this.newCallbacks.push(e),this.signal.addAbortListener(u)}},{key:"off",value:function value(e){var t=this.newCallbacks.indexOf(e);if(-1!==t){var u=this.oldCallbacks[t];this.signal.removeAbortListener(u),this.oldCallbacks.splice(t,1),this.newCallbacks.splice(t,1)}}},{key:"abort",value:function value(e){var t=_instanceof(e,Error)?e.message:e;this.signal.abort(t)}},{key:"aborted",get:function get(){return this.signal.aborted}},{key:"reason",get:function get(){return"string"==typeof this.signal.reason?Error(this.signal.reason):void 0}},{key:"wrap",value:function value(e){if(!this.aborted)return e}},{key:"chain",value:function value(e){var t=this;_instanceof(e,Mt.Signal)?e.once(function(){return t.abort()}):e.addEventListener("abort",function(){return t.abort()})}},{key:"promise",value:function value(){var e=this;return this.aborted?Promise.resolve(this.reason):new Promise(function(t){e.once(function(u){return t(u)})})}}]),n}();y._RF.pop(),y._RF.push({},"99b8eEF6WlE8pzPfD+whiJu","AnimUtils",void 0);var Ht=Ludex.Utils.Signal;function ue(n){return _instanceof(n,Ht.Signal)?n:new Ut(n)}var Wt=E("A",function(n){F(t,n);var e=B(t);function t(){return S(this,t),e.apply(this,arguments)}return A(t)}(function(){function n(){S(this,n)}return A(n,null,[{key:"inst",get:function get(){return this.t||(this.t=new this),this.t}},{key:"elasticOut",value:function value(e,t,u){var o=t||.1,i=u||.1;if(0===e)return 0;if(1===e)return 1;var r=i/4;return o<1?o=1:r=i*Math.asin(1/o)/(2*Math.PI),o*Math.pow(2,-10*e)*Math.sin(2*Math.PI*(e-r)/i)+1}},{key:"easeOutExpo",value:function value(e){return 1===e?1:1-Math.pow(2,-10*e)}},{key:"easeInExpo",value:function value(e){return 0===e?0:Math.pow(2,10*e-10)}},{key:"runTweenAsync",value:function value(e,t){if(void 0===t)return new Promise(function(o){e.call(function(){return o({tween:e})}).start()});var u=ue(t);return u.aborted?Promise.resolve({tween:e}):new Promise(function(o){var i=function i(){e.stop(),o({tween:e})};u.once(i),e.call(function(){u.off(i),o({tween:e})}).start()})}},{key:"runOnUpdateAsync",value:function value(e,t,u,o){return new Promise(function(i,r){var a=me(e).to(t,{},{onUpdate:function onUpdate(f,h){if(void 0!==h)try{u(h)}catch(g){r(_instanceof(g,Error)?g:Error(String(g)))}}});if(void 0!==o){var s=ue(o);if(s.aborted)i({tween:a});else{var d=function d(){a.stop(),i({tween:a})};s.once(d),a.call(function(){s.off(d),i({tween:a})}).start()}}else a.call(function(){return i({tween:a})}).start()})}},{key:"waitTweenAsync",value:function value(e,t){return new Promise(function(u){var o=me({}).delay(e);if(void 0!==t){var i=ue(t);if(i.aborted)u();else{var r=function r(){o.stop(),u()};i.once(r),o.call(function(){i.off(r),u()}).start()}}else o.call(function(){return u()}).start()})}},{key:"runAnimationAsync",value:function value(e,t,u){if(void 0===u)return new Promise(function(i){e.once(ge.EventType.FINISHED,i),e.play(t)});var o=ue(u);return o.aborted?Promise.resolve():new Promise(function(i){var r=function r(){e.stop(),i()};o.once(r),e.once(ge.EventType.FINISHED,function(){o.off(r),i()}),e.play(t)})}}]),n}()));y._RF.pop(),y._RF.push({},"244e9OHsmpDnpHQKeLzgiiX","GameEvents",void 0);var dt=E("G",{VIEW_RESIZED:"view-resized",LAYOUT_CHANGED:"layout-changed",ORIENTATION_CHANGED:"orientation-changed",WIDGET_RESIZED:"widget-resized",GAMEPLAY_UPDATE_CONFIG:"gameplay-update-config",OPENED_SKIP_OVERLAY:"opened-skip-overlay",CLOSED_SKIP_OVERLAY:"closed-skip-overlay",RESULT_SCENE_REPLAY:"result-scene-replay",RESULT_SCENE_HOME:"result-scene-home",REQUEST_DYNAMIC_ATLAS:"request-dynamic-atlas",FINISHED_DYNAMIC_ATLAS:"finished-dynamic-atlas",ASSET_QUALITY_CHANGE:"asset-quality-change",REQUEST_UPGRADE_ASSET:"request-upgrade-asset",CLEAR_HYBRID_FILE_CACHE:"clear-hybrid-file-cache",PRELOAD_LANGUAGE:"preload-language",CHOOSE_LANGUAGE:"choose-language",LOCALIZE_APPLIED:"localize-applied"});y._RF.pop(),y._RF.push({},"5c76fxO2ppOqYp4WNO+Kavm","GameWorld",void 0);var ft=E("n",{Layout:{Portrait:"portrait",Landscape:"landscape"},DesignSize:{Portrait:{WIDTH:750,HEIGHT:1583},Landscape:{WIDTH:2732,HEIGHT:1536},Resolution:2},AcceptPortraitRatio:690/829,PRIMARY_LAYOUT:"auto",FULL_PORTRAIT_SIZE:!0,FULL_LANDSCAPE_SIZE:!0});y._RF.pop(),y._RF.push({},"05faedSJ2NHFqLe9b3g4RIl","CocosUtils",void 0);var jt=Ludex.Utils.Device,se=E("C",function(n){F(t,n);var e=B(t);function t(){return S(this,t),e.apply(this,arguments)}return A(t)}(function(){function n(){var e=this;S(this,n),this.U=function(){var t=Ee.getVisibleSize();return Qe.windowSize.width/e.self.getMaxPixelRatio()/t.width},this.C=function(t,u){var o=Z.mat4();Z.Mat4.fromSRT(o,u.getRotation(),u.getPosition(),u.getScale());var i=u.getComponent(ae);if(!i)throw Error("Node must have UITransform component");var r=i.anchorPoint,a=i.contentSize,s=a.width,d=a.height,f=new Z.Rect(-r.x*s,-r.y*d,s,d),h=Z.mat4();if(Z.Mat4.multiply(h,t,o),f.transformMat4(h),!u.children||0===u.children.length)return f;var g,k=u.children,H=u.getWorldMatrix(),x=M(k);try{for(x.s();!(g=x.n()).done;){var L=g.value;if(null!=L&&L.active&&L.getComponent(ae)){var G=e.C(H,L);G&&Z.Rect.union(f,f,G)}}}catch(l){x.e(l)}finally{x.f()}return f}}return A(n,[{key:"self",get:function get(){return this.constructor}}],[{key:"inst",get:function get(){return this.t||(this.t=new this),this.t}},{key:"getBoundingBoxToWorld",value:function value(e){if(e.parent){var t=e.parent.getWorldMatrix();return this.inst.C(t,e)}var u=e.getComponent(ae);if(!u)throw Error("Node must have UITransform component");return u.getBoundingBox()}},{key:"getMaxPixelRatio",value:function value(){return Math.min(jt.pixelRatio(),3)}},{key:"worldSizeToCssSize",value:function value(e){return Math.round(e*this.getMaxPixelRatio())}},{key:"cssSizeToWorldSize",value:function value(e){return e/this.inst.U()}},{key:"getScreenWidthCss",value:function value(){var e=document,t=e.body,u=e.documentElement,o=t.clientWidth;return Math.max(u.clientWidth,o)||0}},{key:"getScreenHeightCss",value:function value(){var e=document,t=e.body,u=e.documentElement,o=t.clientHeight;return Math.max(u.clientHeight,o)||0}}]),n}()));y._RF.pop(),y._RF.push({},"d159egaUVVLHKLg1UL865ub","SoundKeys",void 0);var ke=Ludex.Utils.Object,C="sounds/",yt=E("r",{BEE_FLYING:"".concat(C,"bee-flying"),BEE_STING_DOGE:"".concat(C,"bee-sting-doge"),BG_MUSIC:"".concat(C,"bg-music"),BUTTON_CLICK:"".concat(C,"button-click"),COLLECTING_COINS:"".concat(C,"collecting-coins"),DOGE_DIES:"".concat(C,"doge-dies"),DOGE_HURT:"".concat(C,"doge-hurt"),END_DRAW:"".concat(C,"end-draw"),HAND_CLAP:"".concat(C,"hand-clap"),LEVEL_FAIL:"".concat(C,"level-fail"),LEVEL_PASS:"".concat(C,"level-pass"),LOST_STAR_IN_GAMEPLAY:"".concat(C,"lost-star-in-gameplay"),RAISE_STAR:"".concat(C,"raise-star"),SPAWN_COINS:"".concat(C,"spawn-coins"),STAR_RAISE:"".concat(C,"star-raise"),TOUCH_START:"".concat(C,"touch-start"),BEE_BULLET_EXPLODE:"".concat(C,"bee-bullet-explode")}),ht=E("S",ke.vals(yt).reduce(function(n,e,t){return ke.assign(n,O({},e,t))},{}));$e(ht),E("o",ke.invert(ht)),y._RF.pop(),y._RF.push({},"7ca06lc4HNFbaPBFusdm7/G","ScreenKeys",void 0);var b=E("y",((n1=b||{})[n1.LOADING_SCREEN=1]="LOADING_SCREEN",n1[n1.SETTINGS_SCREEN=2]="SETTINGS_SCREEN",n1[n1.NOTIFICATION_SCREEN=3]="NOTIFICATION_SCREEN",n1[n1.LOSE_SCREEN=4]="LOSE_SCREEN",n1[n1.WINNING_SCREEN=5]="WINNING_SCREEN",n1[n1.CONGRATULATION_SCREEN=6]="CONGRATULATION_SCREEN",n1)),U=E("F",(O(X={},b.LOADING_SCREEN,"LoadingScreen"),O(X,b.SETTINGS_SCREEN,"SettingsScreen"),O(X,b.NOTIFICATION_SCREEN,"NotificationScreen"),O(X,b.LOSE_SCREEN,"LoseScreen"),O(X,b.WINNING_SCREEN,"WinningScreen"),O(X,b.CONGRATULATION_SCREEN,"CongratulationScreen"),X)),zt=(O(ee={},U[b.LOADING_SCREEN],b.LOADING_SCREEN),O(ee,U[b.SETTINGS_SCREEN],b.SETTINGS_SCREEN),O(ee,U[b.NOTIFICATION_SCREEN],b.NOTIFICATION_SCREEN),O(ee,U[b.LOSE_SCREEN],b.LOSE_SCREEN),O(ee,U[b.WINNING_SCREEN],b.WINNING_SCREEN),O(ee,U[b.CONGRATULATION_SCREEN],b.CONGRATULATION_SCREEN),[U[b.NOTIFICATION_SCREEN],U[b.LOADING_SCREEN]]);y._RF.pop(),y._RF.push({},"09bc071ZcpI978b1NdKUaqD","AnalyticsUtils",void 0);var vt=Ludex,pt=vt.Utils.Array,Ce=vt.Configs.Analytics,De=codex.analytics,mt=function(){function n(){S(this,n)}return A(n,null,[{key:"inst",get:function get(){return this.t||(this.t=new this),this.t}},{key:"trackCurrentPage",value:function value(e,t){if(Ce.Enabled&&!pt.has(zt,e)&&(t||pt.has(this.o,e))){this.o=this.o.filter(function(o){return o!==e}),t&&this.o.push(e);var u=this.getCurrentPage();De.pageview(u)}}},{key:"switchSceneTracking",value:function value(){if(Ce.Enabled){this.o=[];var e=this.getCurrentPage();De.pageview(e)}}},{key:"getCurrentPage",value:function value(){var e,t;return this.o.length>0?this.o[this.o.length-1]||"Unknown Page":null!=(e=null==(t=et.getScene())?void 0:t.name)?e:"Unknown Scene"}},{key:"trackDeviceInfo",value:function value(e){Ce.Enabled&&De.event("device_info",e)}}]),n}();mt.o=[],E("q",function(n){F(t,n);var e=B(t);function t(){return S(this,t),e.apply(this,arguments)}return A(t)}(mt)),y._RF.pop(),y._RF.push({},"31871PLRYRJu7yCCX5F6lWK","AudioUtils",void 0);var Vt=Ludex.Utils.Signal,V=E("p",function(n){F(t,n);var e=B(t);function t(){return S(this,t),e.apply(this,arguments)}return A(t)}(function(){var e,t,u,o,i;function n(){S(this,n),this.H=new Vt.SignalController}return A(n,[{key:"sound",get:function get(){var r;return null==(r=q("Sound"))?void 0:r.getComponent("Sound")}},{key:"music",get:function get(){var r;return null==(r=q("Music"))?void 0:r.getComponent("Music")}}],[{key:"inst",get:function get(){return this.t||(this.t=new this),this.t}},{key:"muteAudio",value:function value(r){this.muteMusic(r),this.muteSound(r)}},{key:"muteSound",value:function value(r){var a;null==(a=this.inst.sound)||a.mute(r)}},{key:"muteMusic",value:function value(r){var a;null==(a=this.inst.music)||a.mute(r)}},{key:"getCurrentMusic",value:function value(){return this.inst.N}},{key:"turnUpMusic",value:(i=p(function(){var r,a;return _ts_generator(this,function(_state){switch(_state.label){case 0:if((null!=(r=null==(a=this.inst.music)?void 0:a.getVolume())?r:0)>.6)return[3,2];return[4,this.setVolumeMusic(.6,!0)];case 1:_state.sent(),_state.label=2;case 2:return[2]}})}),function(){return i.apply(this,arguments)})},{key:"turnDownMusic",value:(o=p(function(){var r,a;return _ts_generator(this,function(_state){switch(_state.label){case 0:if((null!=(r=null==(a=this.inst.music)?void 0:a.getVolume())?r:0)<.2)return[3,2];return[4,this.setVolumeMusic(.2,!0)];case 1:_state.sent(),_state.label=2;case 2:return[2]}})}),function(){return o.apply(this,arguments)})},{key:"turnOffMusic",value:(u=p(function(){return _ts_generator(this,function(_state){switch(_state.label){case 0:return[4,this.setVolumeMusic(0)];case 1:return _state.sent(),[2]}})}),function(){return u.apply(this,arguments)})},{key:"getVolumeMusic",value:function value(){var r,a;return null!=(r=null==(a=this.inst.music)?void 0:a.getVolume())?r:0}},{key:"setVolumeMusic",value:(t=p(function(r){var a,s,d,f,h,g,_arguments=arguments;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(a=this,s=_arguments.length>1&&void 0!==_arguments[1]&&_arguments[1],!this.inst.music)return[3,3];if(d=this.inst.H.renew(),!s)return[3,2];return h=f=this.inst.music.getVolume(),[4,Wt.runOnUpdateAsync(this.inst.music.node,1,function(k){a.inst.music&&(h=f+(r-f)*k,a.inst.music.setVolume(h))},d)];case 1:return _state.sent(),[3,3];case 2:null==(g=this.inst.music)||g.setVolume(r),_state.label=3;case 3:return[2]}})}),function(r){return t.apply(this,arguments)})},{key:"playSound",value:(e=p(function(r,a){var s;return _ts_generator(this,function(_state){return[2,null==(s=this.inst.sound)?void 0:s.play(r,a)]})}),function(r,a){return e.apply(this,arguments)})},{key:"pauseSound",value:function value(r){var a;null==(a=this.inst.sound)||a.pause(r)}},{key:"resumeSound",value:function value(r){var a;null==(a=this.inst.sound)||a.resume(r)}},{key:"stopSound",value:function value(r){var a;null==(a=this.inst.sound)||a.stop(r)}},{key:"stopAllSounds",value:function value(){var r;null==(r=this.inst.sound)||r.stopAll()}},{key:"playMusic",value:function value(r){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.inst.music&&(this.inst.N!==r&&this.pauseMusic(),this.inst.N=r,!a&&this.inst.music.playing(r)||(a&&this.inst.music.stop(r),this.inst.music.play(r)))}},{key:"pauseMusic",value:function value(){var r;null==(r=this.inst.music)||r.pause(this.inst.N)}}]),n}()));y._RF.pop(),y._RF.push({},"358fdIqjFdNzZGa95REWt2F","Ads",void 0);var Yt=E("D",{MAX_BOTTOM_BANNER_RATIO:1/6,NUM_LEVEL_WITHOUT_BANNER_ADS:0});y._RF.pop(),y._RF.push({},"a0dcdDZxhZImZ8Cfg4Dc7SJ","ScreenUtils",void 0);var j=codex.event,gt=Ludex,K=gt.Events,Le=gt.Utils.Array,Oe=E("x",function(n){F(t,n);var e=B(t);function t(){return S(this,t),e.apply(this,arguments)}return A(t)}(function(){var e,t,u;function n(){S(this,n),this.S=[]}return A(n,null,[{key:"inst",get:function get(){return this.t||(this.t=new this),this.t}},{key:"preloadScreen",value:function value(o){var i=U[o];i&&j.emit(K.PRELOAD_SCREEN,{screenName:i})}},{key:"preloadScreens",value:function value(){j.emit(K.PRELOAD_SCREENS)}},{key:"openScreen",value:function value(o,i){var r=U[o];return j.emit(K.OPEN_SCREEN,{screenName:r,screenData:i}),new Promise(function(a){j.on(K.OPENED_SCREEN,function s(d){d.screenName===r&&(j.off(K.OPENED_SCREEN,s),a())})})}},{key:"closeScreen",value:function value(o){var i=U[o];return j.emit(K.CLOSE_SCREEN,{screenName:i}),new Promise(function(r){j.on(K.CLOSED_SCREEN,function a(s){s.screenName===i&&(j.off(K.CLOSED_SCREEN,a),r())})})}},{key:"openScreenAndWaitForClose",value:(u=p(function(o,i){return _ts_generator(this,function(_state){switch(_state.label){case 0:return[4,this.openScreen(o,i)];case 1:return _state.sent(),[4,new Promise(function(r){j.on(K.CLOSE_SCREEN,function a(s){s.screenName===U[o]&&(j.off(K.CLOSE_SCREEN,a),r(s))})})];case 2:return[2,_state.sent()]}})}),function(o,i){return u.apply(this,arguments)})},{key:"showLoadingScreen",value:function value(o){return this.openScreen(b.LOADING_SCREEN,{duration:o})}},{key:"closeLoadingScreen",value:function value(){return this.closeScreen(b.LOADING_SCREEN)}},{key:"showNotificationScreen",value:function value(o,i){return this.openScreen(b.NOTIFICATION_SCREEN,{message:o,duration:i})}},{key:"showNotificationScreenWithLocalizedKey",value:function value(o,i){return this.openScreen(b.NOTIFICATION_SCREEN,{localizedMessageKey:o,duration:i})}},{key:"closeNotificationScreen",value:function value(){return this.closeScreen(b.NOTIFICATION_SCREEN)}},{key:"addShowedScene",value:function value(o){Le.has(this.inst.S,o)||this.inst.S.push(o)}},{key:"showLoadingFullScreen",value:(t=p(function(o){var i;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(Le.has(this.inst.S,o)||(this.addShowedScene(o),!(i=q("Loading"))))return[3,2];return[4,i.getComponent("Loading").show(o)];case 1:_state.sent(),_state.label=2;case 2:return[2]}})}),function(o){return t.apply(this,arguments)})},{key:"hideLoadingFullScreen",value:(e=p(function(o){var i,r;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(Le.has(this.inst.S,o))return[3,2];return[4,null==(r=null==(i=q("Loading"))?void 0:i.getComponent("Loading"))?void 0:r.hide(o)];case 1:_state.sent(),_state.label=2;case 2:return[2]}})}),function(o){return e.apply(this,arguments)})},{key:"showLoadingNotificationScreen",value:function value(){return this.openScreen(b.NOTIFICATION_SCREEN,{message:"Loading",enableCloseOnTouch:!1})}}]),n}()));y._RF.pop(),y._RF.push({},"4a4bfX6KIJCcIozlNHuAwoi","AdsUtils",void 0);var le=Ludex,Jt=le.Events,Et=le.Configs,Pe=Et.Ads.Enabled,Zt=Et.Gameplay.StartAdAtLevel,St=le.Plugins.Ads,At=void 0===St?{}:St,m=At.Types,D=At.Status,Fe=le.Utils,Be=Fe.Array,qt=Fe.Function,Tt=Fe.Object,xe=codex,R=xe.ads,Xt=xe.event,Qt=xe.player,$t=function(n){F(t,n);var e=B(t);function t(u){return S(this,t),e.call(this,"AdsUtils.loadAdAsync: Timed out after ".concat(u,"ms"))}return A(t)}(be(Error));E("t",function(n){F(u,n);var e,t=B(u);function u(){return S(this,u),t.apply(this,arguments)}return A(u,null,[{key:"preloadAds",value:(e=p(function(){return _ts_generator(this,function(_state){return m&&(this.preloadAdsByType(m.INTERSTITIAL),this.preloadAdsByType(m.REWARDED_VIDEO)),[2]})}),function(){return e.apply(this,arguments)})},{key:"applyRemoveAds",value:function value(){if(m){var o=!this.isRemoveAdActive();this.setAdEnable(m.BANNER,o),this.setAdEnable(m.INTERSTITIAL,o),this.refreshBannerAdVisibility()}}},{key:"isRemoveAdActive",value:function value(){var o=(Qt.getGameData()||{}).removeAdEndTime;return!!o&&o>Date.now()}}]),u}(function(){var e,t,u,o;function n(){var r,i=this;S(this,n),this.D={},this.I=[],this.L=[],this.R=!1,this.W=function(r){if(m){var a=Ee.getVisibleSize(),s=se.worldSizeToCssSize(a.height*Yt.MAX_BOTTOM_BANNER_RATIO),d=r===ft.Layout.Landscape,f=R.getAdsByType(m.BANNER).map(function(h){return h.config}).filter(function(h){var g=h.Position,k=h.BannerHeight;return!("bottom"===g&&k>s)});i.I=f.filter(function(h){var g=h.Position;return d||"bottom"===g||"top"===g}),i.L=f.filter(function(h){return!i.I.includes(h)})}},this.O=function(r,a){if(!D||!i.self.isAdEnabled(r))return null;if(a)return R.getAdStatus(r,a)===D.FILLED?a:null;var s,d=R.getAdsByType(r).find(function(f){return R.getAdStatus(r,f.placementId)===D.FILLED});return null!=(s=null==d?void 0:d.placementId)?s:null},this.K=function(r,a){if(!a||!m)return!1;var s,d=R.getAdsByType(r),f=Be.search(d,function(h){return h.config.AdService===a});return null!=(s=null==f?void 0:f.placementId)&&s},this.z=function(r,a){var s=a||{},d=s.adService,f=s.placementId;return i.K(r,d)||f},this.V=function(r,a){if(!m)return null;switch(r){case m.REWARDED_VIDEO:case m.REWARDED_INTERSTITIAL:return i.P(a)?"ads.cancelled":"error.noAd";default:return null}},this.w=(r=p(function(a,s){var d,f,h,g,k,H,x,L,G,l,c,v,T,w,_,N,N1,P;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(!m||!D||!i.self.isAdEnabled(a)||(f=(d=s||{}).placementId,h=d.includeSDK,g=d.excludeSDK,k=d.forceLoad,H=d.autoLoad,x=d.adService,G=void 0===(L=d.timeout)?15e3:L,l=d.showError,!i.Y(h,g)))return[2,!1];c=i.z(a,s),v=!1,T=!1,_state.label=1;case 1:if(_state.trys.push([1,10,11,12]),w=R.getAdStatus(a,f),!(k||H&&w!==D.FILLED))return[3,3];return Oe.showLoadingScreen(),[4,qt.timeOut(R.loadAdAsync(a,c),G)];case 2:_state.sent(),_state.label=3;case 3:i.R=!0,V.muteAudio(!0),V.pauseMusic(),V.stopAllSounds(),_state.label=4;case 4:if(v)return[3,9];_state.label=5;case 5:if(_state.trys.push([5,7,,8]),!(_=i.O(a,c)))return[2,!1];return c=_,[4,R.showAdAsync(a,c)];case 6:return _state.sent(),v=!0,[3,8];case 7:if(N=_state.sent(),x||i.P(N)||i.J(N))throw N;return c=void 0,v=!1,T=!0,[3,8];case 8:return[3,4];case 9:return[2,!0];case 10:return N1=_state.sent(),T=!0,[2,((P=i.V(a,N1))&&l&&Oe.showNotificationScreenWithLocalizedKey(P,2),!1)];case 11:return i.R=!1,i.isPlatformMuted()||(V.muteAudio(!1),V.playMusic(yt.BG_MUSIC)),(k||H)&&Oe.closeLoadingScreen(),T&&(c=f),i.self.preloadAdsByType(a,c),Xt.emit(Jt.REQUEST_RESIZE_GAME),[7];case 12:return[2]}})}),function(a,s){return r.apply(this,arguments)}),this.Y=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],s=GameSDK.getSDKName();return(null==a||!a.length||!Be.has(a,s))&&!(null!=r&&r.length&&!Be.has(r,s))},this.P=function(r){return Tt.hasOwn(r,"code")&&"USER_INPUT"===r.code},this.J=function(r){return _instanceof(r,$t)||!(!Tt.hasOwn(r,"code")||"SHOW_ADS_TIMEOUT"!==r.code)}}return A(n,[{key:"self",get:function get(){return this.constructor}},{key:"isPlatformMuted",value:function value(){return!!GameSDK.isGameSDK("YoutubePlayables")&&!GameSDK.extra.isAudioEnabled()}}],[{key:"inst",get:function get(){return this.t||(this.t=new this),this.t}},{key:"setAdEnable",value:function value(i,r){this.inst.D[i]=r}},{key:"isAdEnabled",value:function value(i){return!!Pe&&!1!==this.inst.D[i]}},{key:"preloadAds",value:(o=p(function(){return _ts_generator(this,function(_state){return m&&(this.preloadAdsByType(m.INTERSTITIAL),this.preloadAdsByType(m.REWARDED_VIDEO),this.preloadAdsByType(m.REWARDED_INTERSTITIAL)),[2]})}),function(){return o.apply(this,arguments)})},{key:"isServiceDegraded",value:function value(){return R.isServiceDegraded()}},{key:"preloadAdsByType",value:function value(i,r){if(this.isAdEnabled(i)&&D){var a=R.getAdsByType(i);(r?a.filter(function(s){return s.placementId===r}):a).forEach(function(s){R.getAdStatus(i,s.placementId)!==D.FILLED&&R.getAdStatus(i,r)!==D.FILLED&&R.loadAdAsync(i,s.placementId).catch(function(){})})}}},{key:"updateBannerAdsByLayout",value:function value(i){this.inst.W(i)}},{key:"refreshBannerAdVisibility",value:function value(){if(m&&D)if(this.isAdEnabled(m.BANNER)){var i,r=M(this.inst.L);try{for(r.s();!(i=r.n()).done;){var a=i.value.PlacementId;R.getAdStatus(m.BANNER,a)===D.SHOWING&&this.hideBannerAd(a)}}catch(g){r.e(g)}finally{r.f()}var s,d=M(this.inst.I);try{for(d.s();!(s=d.n()).done;){var f=s.value.PlacementId,h=R.getAdStatus(m.BANNER,f);!1!==h&&h!==D.SHOWING&&this.showBannerAd(f)}}catch(g){d.e(g)}finally{d.f()}}else this.hideBannerAds()}},{key:"getBannerAdHeight",value:function value(){try{if(!m)return 0;var i=se.cssSizeToWorldSize(1),r=R.getAd(m.BANNER);return Math.round(R.getBannerHeight(r.placementId,i))}catch(unused){return 0}}},{key:"showBannerAds",value:function value(){if(m&&D&&this.isAdEnabled(m.BANNER)){var i,r=M(R.getAdsByType(m.BANNER));try{for(r.s();!(i=r.n()).done;){var a=i.value;R.getAdStatus(m.BANNER,a.placementId)!==D.IDLE&&this.showBannerAd(a.placementId)}}catch(s){r.e(s)}finally{r.f()}}}},{key:"hideBannerAds",value:function value(){if(Pe&&m&&D){var i,r=M(R.getAdsByType(m.BANNER));try{for(r.s();!(i=r.n()).done;){var a=i.value;R.getAdStatus(m.BANNER,a.placementId)!==D.IDLE&&this.hideBannerAd(a.placementId)}}catch(s){r.e(s)}finally{r.f()}}}},{key:"showBannerAd",value:function value(i){m&&this.isAdEnabled(m.BANNER)&&R.showBannerAdAsync(i).catch(function(){})}},{key:"hideBannerAd",value:function value(i){Pe&&R.hideBannerAdAsync(i).catch(function(){})}},{key:"isReadyAdShowable",value:function value(i,r){var a=this.inst.O(i,r);return!!a&&R.canShowAd(i,a)}},{key:"isBannerAdShowing",value:function value(){if(!m||!D)return!1;var i,r=M(R.getAdsByType(m.BANNER));try{for(r.s();!(i=r.n()).done;){var a=i.value;if(R.getAdStatus(m.BANNER,a.placementId)===D.SHOWING)return!0}}catch(s){r.e(s)}finally{r.f()}return!1}},{key:"showInterstitialAdAsync",value:(u=p(function(i){var r,a,s,d,f,h,g;return _ts_generator(this,function(_state){return m?(d=(s=null!=i?i:{}).forLevel,f=s.contextType,h=s.forceLoad,d&&Zt>=d)?[2,!1]:(f&&(null==(r=window.GoogleAds)||r.setInterstitialType(f),null==(a=window.TranssionH5Ads)||a.setInterstitialType(f)),g=GameSDK.isGameSDK("MsGames"),[2,this.inst.w(m.INTERSTITIAL,W(W({},i),{},{forceLoad:h||g}))]):[2,!1]})}),function(i){return u.apply(this,arguments)})},{key:"showRewardVideoAdAsync",value:(t=p(function(i){var r,a,s;return _ts_generator(this,function(_state){return m?[2,((s=(null!=i?i:{}).contextType)&&(null==(r=window.GoogleAds)||r.setRewardType(s),null==(a=window.TranssionH5Ads)||a.setRewardType(s)),this.inst.w(m.REWARDED_VIDEO,W(W({showError:!0},i),{},{autoLoad:!0})))]:[2,!1]})}),function(i){return t.apply(this,arguments)})},{key:"showRewardedInterstitialAdAsync",value:(e=p(function(i){var r,a,s;return _ts_generator(this,function(_state){return m?[2,((s=(null!=i?i:{}).contextType)&&(null==(r=window.GoogleAds)||r.setRewardType(s),null==(a=window.TranssionH5Ads)||a.setRewardType(s)),this.inst.w(m.REWARDED_INTERSTITIAL,W(W({showError:!0},i),{},{autoLoad:!0})))]:[2,!1]})}),function(i){return e.apply(this,arguments)})},{key:"isAdInProgress",value:function value(){return this.inst.R}}]),n}())),y._RF.pop(),y._RF.push({},"f8533KH/fxOfYqya9sgLrSj","GameData",void 0);var n,n1,X,ee,Ge,en=E("I",{level:0,coins:0,bestEndlessScore:0,firstLoginTime:0,removeAdEndTime:0,lastCreateTournamentShown:0,tournamentProgress:{}});y._RF.pop(),y._RF.push({},"3b9bcPJBxpNOqG2I6exTOVn","MatchCustomData",void 0);var Nt=Ludex.Dtos.Match,It=(void 0===Nt?{}:Nt).CustomData;E("M",W(W({},null!=(Ge=null==It?void 0:It.getDefaults())?Ge:{}),{},{score:0,challengeData:null})),y._RF.pop(),y._RF.push({},"074c4KXFZ1Pq6d+66PrLd2+","PlayerData",void 0),E("P",{score:0,settings:{sound:!0,music:!0,vibrate:!0,language:"en"},gameData:en,isFirstLogin:!0,dailyRewardedData:{logDays:[],firstReward:0,lastReward:0},lastCallSwitchGame:0,notificationData:{},missionsData:{process:{}}}),y._RF.pop(),y._RF.push({},"ff436w8KphN2o+jnnVL3RYx","SceneKeys",void 0);var Q=E("B",{TEST_SCENE:"TestScene",BOOT_SCENE:"BootScene",DASHBOARD_SCENE:"DashboardScene",GAME_SCENE:"GameScene",ENDLESS_SCENE:"EndlessScene",DRAFT_SCENE:"DraftScene",PLAYABLE_SCENE:"PlayableScene",TEST_LAYOUT_SCENE:"TestLayoutScene",TEST_PERFORMANCE_SCENE:"TestPerformanceScene",TEST_PARTICLE_SYSTEM_SCENE:"TestParticleSystemScene"});y._RF.pop(),y._RF.push({},"58f4330KXRL77xyoA3903MY","WasmUtils",void 0);var nn=Ludex.Utils.Function,bt=E("W",function(n){F(t,n);var e=B(t);function t(){return S(this,t),e.apply(this,arguments)}return A(t)}(function(){var e;function n(){S(this,n),this.Z=nn.mutex()}return A(n,null,[{key:"inst",get:function get(){return this.t||(this.t=new this),this.t}},{key:"loadModuleAsync",value:(e=p(function(t){var u;return _ts_generator(this,function(_state){switch(_state.label){case 0:return[4,this.inst.Z.use("module-wasm-".concat(t))];case 1:u=_state.sent(),_state.label=2;case 2:switch(_state.trys.push([2,,12,13]),t){case"spine":return[3,3];case"box2d":return[3,5];case"physx":return[3,7];case"bullet":return[3,9]}return[3,11];case 3:if("function"!=typeof Ne)return[2];return[4,Ne()];case 4:case 6:case 8:return _state.sent(),[3,11];case 5:if("function"!=typeof Te)return[2];return[4,Te()];case 7:if("function"!=typeof Ae)return[2];return[4,Ae()];case 9:if("function"!=typeof Se)return[2];return[4,Se()];case 10:_state.sent(),_state.label=11;case 11:return[3,13];case 12:return u.release(),[7];case 13:return[2]}})}),function(t){return e.apply(this,arguments)})}]),n}()));y._RF.pop(),y._RF.push({},"97ca9J9nzNCeIjC1l+ZT/Hm","SceneUtils",void 0);var Me=codex.event,Ue=Ludex.Events;E("z",function(n){F(o,n);var e,t,u=B(o);function o(){return S(this,o),u.apply(this,arguments)}return A(o,null,[{key:"preloadDashboardScene",value:function value(){this.preloadScene(Q.DASHBOARD_SCENE)}},{key:"switchToDashboardScene",value:function value(i){this.switchScene(Q.DASHBOARD_SCENE,i)}},{key:"preloadGameScene",value:(t=p(function(){return _ts_generator(this,function(_state){switch(_state.label){case 0:return[4,bt.loadModuleAsync("spine")];case 1:return _state.sent(),this.preloadScene(Q.GAME_SCENE),[2]}})}),function(){return t.apply(this,arguments)})},{key:"switchToGameScene",value:(e=p(function(i){return _ts_generator(this,function(_state){switch(_state.label){case 0:return V.stopAllSounds(),V.turnOffMusic(),[4,bt.loadModuleAsync("spine")];case 1:return _state.sent(),this.switchScene(Q.GAME_SCENE,i),[2]}})}),function(i){return e.apply(this,arguments)})},{key:"switchToEndlessScene",value:function value(i){V.stopAllSounds(),V.turnOffMusic(),this.switchScene(Q.ENDLESS_SCENE,i)}}]),o}(function(){function n(){S(this,n),this.F={}}return A(n,null,[{key:"inst",get:function get(){return this.t||(this.t=new this),this.t}},{key:"switchScene",value:function value(e,t){Me.emit(Ue.SWITCH_SCENE,{sceneName:e,sceneData:t})}},{key:"preloadScene",value:function value(e){Me.emit(Ue.PRELOAD_SCENE,{sceneName:e})}},{key:"isSceneLoaded",value:function value(e){var t;return null!=(t=this.inst.F[e])&&t}},{key:"markIsSceneLoaded",value:function value(e){this.inst.F[e]=!0}},{key:"markIsTestScene",value:function value(e){Me.emit(Ue.MARK_IS_TEST_SCENE,{sceneName:e})}},{key:"getSceneData",value:function value(e){return"data"in e.scene&&e.scene.data||{}}}]),n}())),y._RF.pop(),y._RF.push({},"669a1OtNF9EDrMRLWTjxk4B","GeneralUtils",void 0),E("O",function(n){F(t,n);var e=B(t);function t(){return S(this,t),e.apply(this,arguments)}return A(t)}(function(){function n(){S(this,n)}return A(n,null,[{key:"inst",get:function get(){return this.t||(this.t=new this),this.t}},{key:"setBlockInput",value:function value(e){var t=q("Canvas/InputBlocker");t&&(t.active=e)}},{key:"getBlockInput",value:function value(){var e=q("Canvas/InputBlocker");return!!e&&e.active}}]),n}())),y._RF.pop(),y._RF.push({},"ed5c6D+6KVEj5lrgtq+D9bJ","LayoutUtils",void 0);var He=ft.Layout;E("H",function(n){F(t,n);var e=B(t);function t(){return S(this,t),e.apply(this,arguments)}return A(t)}(function(){function n(){var e=this;S(this,n),this.B=!1,this.p=He.Portrait,this.q=function(t){e.p!==t&&(e.p=t,Ie.emit(dt.ORIENTATION_CHANGED,t))}}return A(n,null,[{key:"inst",get:function get(){return this.t||(this.t=new this),this.t}},{key:"listenLayoutChanges",value:function value(){this.inst.B||(this.inst.B=!0,Ie.on(dt.LAYOUT_CHANGED,this.inst.q))}},{key:"getCurrentLayout",value:function value(){return this.inst.p}},{key:"isPortrait",value:function value(){return this.inst.p===He.Portrait}},{key:"isLandscape",value:function value(){return this.inst.p===He.Landscape}},{key:"getScreenRatio",value:function value(){return se.getScreenWidthCss()/se.getScreenHeightCss()}}]),n}())),y._RF.pop(),y._RF.push({},"58eae10lp9GX4EnVB/hLwAg","LoaderUtils",void 0);var ce=codex,rn=ce.event,ne=ce.match,Rt=ce.player,de=ce.context,Y=E("Q",function(n){F(t,n);var e=B(t);function t(){return S(this,t),e.apply(this,arguments)}return A(t,null,[{key:"applyCustomFlows",value:function value(){var u=this;de.configureFlows(function(o){o.addBefore("ChallengeFromPostFlow",u.X(o)),o.addBefore("ChallengeFromPostFlow",u.Q(o)),o.addBefore("ChallengeFromMessageFlow",u.$(o))})}}]),t}(function(){function n(){S(this,n)}return A(n,null,[{key:"inst",get:function get(){return this.t||(this.t=new this),this.t}}]),n}()));Y.X=function(n){var e=de.getSessionContextTypes().CHALLENGE_FRIEND;return{id:"NewUserChallengeFriendToSingleFlow",when:function when(t){var u=t.contextSessionType;return!!t.isFirstSession&&u===e},do:n.createSteps([Y.ee(),Y.G()])}},Y.Q=function(n){var e=de.getSessionContextTypes().CHALLENGE_FRIEND;return{id:"StartSingleFromChallengeContextFlow",when:function when(t){var u=t.contextSessionType;return!t.isFirstSession&&u===e&&null!==Y.A(t.contextData)},do:n.createSteps([Y.te(),Y.G()])}},Y.$=function(n){var e=de.getSessionContextTypes().CHALLENGE_FRIEND;return{id:"FastChallengeFromMessageFlow",when:function when(t){var u=t.contextData,o=u.matchId,i=u.playerId,r=u.opponentId,a=t.contextSessionType;return!t.isFirstSession&&"string"==typeof o&&"string"==typeof i&&"string"==typeof r&&a===e&&null!==Y.A(t.contextData)},do:n.createSteps([Y.ne()])}},Y.G=function(){var n;return{id:"SwitchScene",runAsync:(n=p(function(e){var t;return _ts_generator(this,function(_state){return[2,!(t=e.sceneName)||(rn.emit(Ludex.Events.SWITCH_SCENE,{sceneName:t,sceneData:{isFromLoader:!0}}),!1)]})}),function(e){return n.apply(this,arguments)})}},Y.ee=function(){var n;return{id:"NewUserSingleMode",runAsync:(n=p(function(e){var t;return _ts_generator(this,function(_state){switch(_state.label){case 0:return t=Rt.getPlayerId(),[4,ne.handler.setMatchCustomData({playerId:t,contextId:"SOLO"})];case 1:return _state.sent(),[4,ne.single.start.processAsync({playerId:t})];case 2:return[2,(_state.sent(),e.sceneName=Q.GAME_SCENE,!0)]}})}),function(e){return n.apply(this,arguments)})}},Y.ne=function(){var n;return{id:"PrepareChallengeLevelFromMessage",runAsync:(n=p(function(e){var t;return _ts_generator(this,function(_state){switch(_state.label){case 0:if("number"!=typeof(t=Y.A(e.contextData)))return[3,2];return[4,ne.handler.setMatchCustomData({level:t})];case 1:_state.sent(),_state.label=2;case 2:return[2,!0]}})}),function(e){return n.apply(this,arguments)})}},Y.te=function(){var n;return{id:"StartSingleMode",runAsync:(n=p(function(e){var t,u;return _ts_generator(this,function(_state){switch(_state.label){case 0:if("number"!=typeof(t=Y.A(e.contextData)))return[2,!0];return u=Rt.getPlayerId(),[4,ne.handler.setMatchCustomData({level:t})];case 1:return _state.sent(),[4,ne.single.start.processAsync({playerId:u})];case 2:return[2,(_state.sent(),e.sceneName=Q.GAME_SCENE,!0)]}})}),function(e){return n.apply(this,arguments)})}},Y.A=function(n){var e=n.level;return"number"==typeof e?e:null},y._RF.pop(),y._RF.push({},"d6fb7/+FFxLs7k5w6K38JYb","TournamentUtils",void 0);var _t=Ludex,We=_t.Utils,an=We.String,re=We.Valid,wt=We.Array,on=_t.Configs.Mockup.Leaderboards,un=codex.language,kt=codex,je=kt.leaderboard,te=kt.player;E("T",function(n){F(u,n);var e,t=B(u);function u(){return S(this,u),t.apply(this,arguments)}return A(u,[{key:"processPlayerTournamentData",value:function value(){var o,i=[],r=M(this.E);try{for(r.s();!(o=r.n()).done;){var a,s,d=o.value,f="".concat(d.getID()),h=d.getContextID(),g=d.getEndTime(),k=this.parseTournamentPayload(d.getPayload());if(this.validateGameSDKTournamentPayload(k)&&!(g<Date.now()/1e3)){var H=d.getTournamentType();if("PAGE_HOSTED"!==H){var x=null!=(a=k.playerName)?a:"Player",L={id:f,title:null!=(s=d.getTitle())?s:this.createDefaultTournamentName(x),endTime:g,contextId:h,payload:k,tournamentType:H};i.push(L)}}}}catch(G){r.e(G)}finally{r.f()}return i}},{key:"processGlobalTournamentLeaderboardData",value:function value(){var o=[];if(on.Enabled){var i,r=M(this.E);try{for(r.s();!(i=r.n()).done;){var a,s=i.value,d=s.getTournamentType();if("PAGE_HOSTED"===d){var f="".concat(s.getID()),h=s.getContextID(),g=s.getEndTime(),k=this.parseTournamentPayload(s.getPayload()),H={id:f,title:null!=(a=s.getTitle())?a:"Global Tournament",endTime:g,contextId:h,payload:k,tournamentType:d};o.push(H)}}}catch(N){r.e(N)}finally{r.f()}return o}var x,L=M(this.T);try{for(L.s();!(x=L.n()).done;){var G,l,c=x.value,v=void 0;try{v=JSON.parse(c.description)}catch(unused){continue}if(this.validateExpireTime(c)&&this.validateGlobalTournamentPayload(v)){var T="isNEZP"in GameSDK.extra&&GameSDK.extra.isNEZP(),w="isRestricted"in GameSDK.extra&&GameSDK.extra.isRestricted();if(T||w){if(!v.restrict)continue}else if(v.restrict)continue;var _=null!=(G=null==(l=v.i18n)||null==(l=l[un.getCurrentLocale()])?void 0:l.title)?G:c.name,P={id:v.tournamentId,title:_,endTime:this.getTournamentEndTime(c),contextId:v.contextId,payload:{playerId:"global",playerName:"global",leaderboardId:c._id},tournamentType:"PAGE_HOSTED"};o.push(P)}}}catch(N){L.e(N)}finally{L.f()}return o}},{key:"createDefaultTournamentName",value:function value(o){var i=o.substring(0,7),r="".concat(i.split(" ")[0]||i,"'s Tournament"),a=an.removeDiacritics(r);return"".concat(a)}}],[{key:"requestTournamentDataAsync",value:(e=p(function(){var o,i,r,a,s,d;return _ts_generator(this,function(_state){switch(_state.label){case 0:return[4,Promise.all([(o=this.inst).re(),o.ie()])];case 1:_state.sent(),i=o.processPlayerTournamentData(),r=o.processGlobalTournamentLeaderboardData(),i.sort(function(f,h){return f.endTime-h.endTime}),r.sort(function(f,h){return f.endTime-h.endTime}),o.r=[].concat(Re(r),Re(i)),s=M(o.r);try{for(s.s();!(a=s.n()).done;)(d=a.value.payload.leaderboardId)&&(je.isExistLeaderboardId(d)||je.addLeaderboard({type:"tournament",name:d,autoSortRank:!0,leaderboardId:d}))}catch(f){s.e(f)}finally{s.f()}return[2,o.r]}})}),function(){return e.apply(this,arguments)})},{key:"saveTournamentProgress",value:function value(o,i,r){var a,s,d,f,h=(null!=(a=te.getGameData())?a:{}).tournamentProgress,g=null==h?void 0:h[r],k={level:Math.max(o,null!=(s=null==g?void 0:g.level)?s:0),score:Math.max(i,null!=(d=null==g?void 0:g.score)?d:0),replayCount:null!=(f=null==g?void 0:g.replayCount)?f:0};te.setGameData({tournamentProgress:W(W({},h),{},O({},r,k))})}},{key:"syncTournamentProgress",value:function value(){var o,i=(null!=(o=te.getGameData())?o:{}).tournamentProgress;if(i){var r=this.inst,a=function a(d){wt.search(r.r,function(f){return f.id===d})||delete i[d]};for(var s in i)a(s);te.setGameData({tournamentProgress:i})}}}]),u}(function(){function n(){var e=this;S(this,n),this.T=[],this.E=[],this.r=[],this.M=5e3,this.ae=0,this.oe=0,this.ie=p(function(){return _ts_generator(this,function(_state){switch(_state.label){case 0:if(_state.trys.push([0,3,,4]),!(Date.now()-e.oe>e.M))return[3,2];return[4,je.requestLeaderboardsAsync({limit:100,type:"world_tournament_leaderboard"})];case 1:e.T=_state.sent(),e.T.sort(function(t,u){return t.expireTime-u.expireTime}),_state.label=2;case 2:return[3,4];case 3:return _state.sent(),[3,4];case 4:return[2,e.T]}})}),this.re=p(function(){return _ts_generator(this,function(_state){switch(_state.label){case 0:if(_state.trys.push([0,3,,4]),!(Date.now()-e.ae>e.M))return[3,2];return[4,GameSDK.tournament.getTournamentsAsync()];case 1:e.E=_state.sent(),e.E.sort(function(t,u){return t.getEndTime()-u.getEndTime()}),_state.label=2;case 2:return[3,4];case 3:return _state.sent(),[3,4];case 4:return[2,e.E]}})})}return A(n,[{key:"validateGlobalTournamentPayload",value:function value(e){var t=e.tournamentId,u=e.contextId;return!(!re.isString(t)||""===t)&&!(!re.isString(u)||""===u)}},{key:"getTournamentEndTime",value:function value(e){var t=new Date(e.createdAt).getTime();return Math.round((1e3*e.expireTime+t)/1e3)}},{key:"validateExpireTime",value:function value(e){return 1e3*this.getTournamentEndTime(e)-Date.now()>0}},{key:"validateGameSDKTournamentPayload",value:function value(e){return!(!re.isString(e.playerId)||""===e.playerId)&&!(!re.isString(e.playerName)||""===e.playerName)&&!(!re.isString(e.leaderboardId)||""===e.leaderboardId)}},{key:"parseTournamentPayload",value:function value(e){if("string"!=typeof e)return{};try{return JSON.parse(e)}catch(unused){return{}}}}],[{key:"inst",get:function get(){return this.t||(this.t=new this),this.t}},{key:"getAllTournamentData",value:function value(){return this.inst.r}},{key:"getTournamentDataById",value:function value(e){var t=this.inst;return wt.search(t.r,function(u){return u.id===e})}},{key:"getPlayerTournamentData",value:function value(){var e=this.inst,t=te.getPlayerId();return e.r.filter(function(u){return u.payload.playerId===t})}},{key:"getFriendsTournamentData",value:function value(){var e=this.inst,t=te.getPlayerId();return e.r.filter(function(u){var o=u.payload;return o.playerId!==t&&"global"!==o.playerId})}},{key:"getGlobalTournamentData",value:function value(){return this.inst.r.filter(function(e){return"global"===e.payload.playerId})}},{key:"validateTournamentExpired",value:function value(e){var t=this.getTournamentDataById(e);return!!t&&t.endTime<Date.now()/1e3}}]),n}())),y._RF.pop()}}})}}});