function _instanceof(n,i){if(null!=i&&"undefined"!=typeof Symbol&&i[Symbol.hasInstance])return!!i[Symbol.hasInstance](n);return n instanceof i}function _ts_generator(n,i){var a,r,p,d,y={label:0,sent:function(){if(1&p[0])throw p[1];return p[1]},trys:[],ops:[]};return d={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(d[Symbol.iterator]=function(){return this}),d;function verb(n){return function(i){return step([n,i])}}function step(d){if(a)throw new TypeError("Generator is already executing.");while(y)try{if(a=1,r&&(p=2&d[0]?r.return:d[0]?r.throw||((p=r.return)&&p.call(r),0):r.next)&&!(p=p.call(r,d[1])).done)return p;if(r=0,p)d=[2&d[0],p.value];switch(d[0]){case 0:case 1:p=d;break;case 4:y.label++;return{value:d[1],done:false};case 5:y.label++;r=d[1];d=[0];continue;case 7:d=y.ops.pop();y.trys.pop();continue;default:if(p=y.trys,!(p=p.length>0&&p[p.length-1])&&(6===d[0]||2===d[0])){y=0;continue}if(3===d[0]&&(!p||d[1]>p[0]&&d[1]<p[3])){y.label=d[1];break}if(6===d[0]&&y.label<p[1]){y.label=p[1];p=d;break}if(p&&y.label<p[2]){y.label=p[2];y.ops.push(d);break}if(p[2])y.ops.pop();y.trys.pop();continue}d=i.call(n,y)}catch(n){d=[6,n];r=0}finally{a=p=0}if(5&d[0])throw d[1];return{value:d[0]?d[1]:void 0,done:true}}}System.register("chunks:///main.js",["./Screens-a69a46df.js","cc"],function(){var n,i,a,r,p,d,y,m,g,b,S,C,k,w,E,T,R,A,_,P,B,L,O,D,I,N,G,M,F,z,x,U,H,j,V,W,K,q,Y,J,X,Z,Q,$,ee,et,en,ei,ea,eo,er,es,el,eu,ec,eh,ep,ed,ev,ey,ef,em,eg,eb,eS,eC,ek,ew,eE,eT,eR,eA,e_,eP,eB,eL,eO,eD,eI,eN,eG,eM,eF,ez,ex,eU,eH,ej,eV,eW,eK,eq,eY,eJ,eX,eZ,eQ,e$,e0,e1,e2,e3,e4,e5,e7,e6,e9,e8,te,tt;return{setters:[function(K){n=K._,i=K.a,a=K.b,r=K.c,p=K.d,d=K.e,y=K.f,m=K.C,g=K.G,b=K.g,S=K.S,C=K.h,k=K.A,w=K.i,E=K.j,T=K.k,R=K.l,A=K.m,_=K.n,P=K.o,B=K.p,L=K.q,O=K.r,D=K.s,I=K.t,N=K.u,G=K.v,M=K.w,F=K.x,z=K.E,x=K.y,U=K.z,H=K.B,j=K.M,V=K.D,W=K.F},function(n){K=n.cclegacy,q=n._decorator,Y=n.Node,J=n.Color,X=n.Canvas,Z=n.UITransform,Q=n.instantiate,$=n.Label,ee=n.RichText,et=n.Toggle,en=n.Button,ei=n.director,ea=n.Component,eo=n.Animation,er=n.CCString,es=n.CCInteger,el=n.Sprite,eu=n.game,ec=n.CCBoolean,eh=n.EventTouch,ep=n.Vec3,ed=n.Input,ev=n.UIOpacity,ey=n.Graphics,ef=n.profiler,em=n.sys,eg=n.Font,eb=n.Director,eS=n.Layers,eC=n.ERigidBody2DType,ek=n.RigidBody2D,ew=n.sp,eE=n.Vec2,eT=n.Collider2D,eR=n.Contact2DType,eA=n.math,e_=n.SpriteFrame,eP=n.HingeJoint2D,eB=n.RelativeJoint2D,eL=n.BoxCollider2D,eO=n.Prefab,eD=n.CircleCollider2D,eI=n.resources,eN=n.Mask,eG=n.PolygonCollider2D,eM=n.NodePool,eF=n.tween,ez=n.ccenum,ex=n.CCFloat,eU=n.find,eH=n.Tween,ej=n.PhysicsSystem2D,eV=n.ERaycast2DType,eW=n.Intersection2D,eK=n.JsonAsset,eq=n.ProgressBar,eY=n.EPhysics2DDrawFlags,eJ=n.DistanceJoint2D,eX=n.repeat,eZ=n.Enum,eQ=n.lerp,e$=n.approx,e0=n.EPSILON,e1=n.RealCurve,e2=n.Gradient,e3=n.bits,e4=n.random,e5=n.randomRange,e7=n.randomRangeInt,e6=n.pseudoRandom,e9=n.Material,e8=n.toRadian,te=n.ParticleSystem2D,tt=n.View}],execute:function(){var tn,ti,ta,to,tr,ts,tl,tu;K._RF.push({},"b2bd1+njXxJxaFY3ymm06WU","debug-view-runtime-control",void 0);var tc,th,tp,td,tv,ty,tf,tm,tg,tb=q.ccclass,tS=q.property;tn=tb("internal.DebugViewRuntimeControl"),ti=tS(Y),ta=tS(Y),to=tS(Y),tn((ts=n((tr=function(n){i(l,n);var m=a(l);function l(){var n;r(this,l);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=m.call.apply(m,[this].concat(a)),p(n,"compositeModeToggle",ts,d(n)),p(n,"singleModeToggle",tl,d(n)),p(n,"EnableAllCompositeModeButton",tu,d(n)),n._single=0,n.strSingle=["No Single Debug","Vertex Color","Vertex Normal","Vertex Tangent","World Position","Vertex Mirror","Face Side","UV0","UV1","UV Lightmap","Project Depth","Linear Depth","Fragment Normal","Fragment Tangent","Fragment Binormal","Base Color","Diffuse Color","Specular Color","Transparency","Metallic","Roughness","Specular Intensity","IOR","Direct Diffuse","Direct Specular","Direct All","Env Diffuse","Env Specular","Env All","Emissive","Light Map","Shadow","AO","Fresnel","Direct Transmit Diffuse","Direct Transmit Specular","Env Transmit Diffuse","Env Transmit Specular","Transmit All","Direct Internal Specular","Env Internal Specular","Internal All","Fog"],n.strComposite=["Direct Diffuse","Direct Specular","Env Diffuse","Env Specular","Emissive","Light Map","Shadow","AO","Normal Map","Fog","Tone Mapping","Gamma Correction","Fresnel","Transmit Diffuse","Transmit Specular","Internal Specular","TT"],n.strMisc=["CSM Layer Coloration","Lighting With Albedo"],n.compositeModeToggleList=[],n.singleModeToggleList=[],n.miscModeToggleList=[],n.textComponentList=[],n.labelComponentList=[],n.textContentList=[],n._currentColorIndex=0,n.strColor=["<color=#ffffff>","<color=#000000>","<color=#ff0000>","<color=#00ff00>","<color=#0000ff>"],n.color=[J.WHITE,J.BLACK,J.RED,J.GREEN,J.BLUE],n}return y(l,[{key:"start",value:function(){if(this.node.parent.getComponent(X)){var n=this.node.parent.getComponent(Z),i=.5*n.width,a=.5*n.height,r=.1*i-i,p=a-.1*a,d=this.node.getChildByName("MiscMode"),y=Q(d);y.parent=this.node,y.name="Buttons";var m=Q(d);m.parent=this.node,m.name="Titles";for(var g=0;g<2;g++){var b=Q(this.EnableAllCompositeModeButton.getChildByName("Label"));b.setPosition(r+(g>0?450:150),p,0),b.setScale(.75,.75,.75),b.parent=m;var S=b.getComponent($);S.string=g?"----------Composite Mode----------":"----------Single Mode----------",S.color=J.WHITE,S.overflow=0,this.labelComponentList[this.labelComponentList.length]=S}p-=20;for(var C=0,k=0;k<this.strSingle.length;k++,C++){k===this.strSingle.length>>1&&(r+=200,C=0);var w=k?Q(this.singleModeToggle):this.singleModeToggle;w.setPosition(r,p-20*C,0),w.setScale(.5,.5,.5),w.parent=this.singleModeToggle.parent;var E=w.getComponentInChildren(ee);E.string=this.strSingle[k],this.textComponentList[this.textComponentList.length]=E,this.textContentList[this.textContentList.length]=E.string,w.on(et.EventType.TOGGLE,this.toggleSingleMode,this),this.singleModeToggleList[k]=w}r+=200,this.EnableAllCompositeModeButton.setPosition(r+15,p,0),this.EnableAllCompositeModeButton.setScale(.5,.5,.5),this.EnableAllCompositeModeButton.on(en.EventType.CLICK,this.enableAllCompositeMode,this),this.EnableAllCompositeModeButton.parent=y;var T=this.EnableAllCompositeModeButton.getComponentInChildren($);this.labelComponentList[this.labelComponentList.length]=T;var R=Q(this.EnableAllCompositeModeButton);R.setPosition(r+90,p,0),R.setScale(.5,.5,.5),R.on(en.EventType.CLICK,this.changeTextColor,this),R.parent=y,(T=R.getComponentInChildren($)).string="TextColor",this.labelComponentList[this.labelComponentList.length]=T;var A=Q(this.EnableAllCompositeModeButton);A.setPosition(r+200,p,0),A.setScale(.5,.5,.5),A.on(en.EventType.CLICK,this.hideUI,this),A.parent=this.node.parent,(T=A.getComponentInChildren($)).string="Hide UI",this.labelComponentList[this.labelComponentList.length]=T,this.hideButtonLabel=T,p-=40;for(var _=0;_<this.strMisc.length;_++){var P=Q(this.compositeModeToggle);P.setPosition(r,p-20*_,0),P.setScale(.5,.5,.5),P.parent=d;var B=P.getComponentInChildren(ee);B.string=this.strMisc[_],this.textComponentList[this.textComponentList.length]=B,this.textContentList[this.textContentList.length]=B.string,P.getComponent(et).isChecked=!!_,P.on(et.EventType.TOGGLE,_?this.toggleLightingWithAlbedo:this.toggleCSMColoration,this),this.miscModeToggleList[_]=P}p-=150;for(var L=0;L<this.strComposite.length;L++){var O=L?Q(this.compositeModeToggle):this.compositeModeToggle;O.setPosition(r,p-20*L,0),O.setScale(.5,.5,.5),O.parent=this.compositeModeToggle.parent;var D=O.getComponentInChildren(ee);D.string=this.strComposite[L],this.textComponentList[this.textComponentList.length]=D,this.textContentList[this.textContentList.length]=D.string,O.on(et.EventType.TOGGLE,this.toggleCompositeMode,this),this.compositeModeToggleList[L]=O}}else console.error("debug-view-runtime-control should be child of Canvas")}},{key:"isTextMatched",value:function(n,i){var a=new String(n),r=a.search(">");return -1===r?n===i:(a=(a=a.substr(r+1)).substr(0,a.search("<")))===i}},{key:"toggleSingleMode",value:function(n){for(var i=ei.root.debugView,a=n.getComponentInChildren(ee),r=0;r<this.strSingle.length;r++)this.isTextMatched(a.string,this.strSingle[r])&&(i.singleMode=r)}},{key:"toggleCompositeMode",value:function(n){for(var i=ei.root.debugView,a=n.getComponentInChildren(ee),r=0;r<this.strComposite.length;r++)this.isTextMatched(a.string,this.strComposite[r])&&i.enableCompositeMode(r,n.isChecked)}},{key:"toggleLightingWithAlbedo",value:function(n){ei.root.debugView.lightingWithAlbedo=n.isChecked}},{key:"toggleCSMColoration",value:function(n){ei.root.debugView.csmLayerColoration=n.isChecked}},{key:"enableAllCompositeMode",value:function(n){var i=ei.root.debugView;i.enableAllCompositeMode(!0);for(var a=0;a<this.compositeModeToggleList.length;a++)this.compositeModeToggleList[a].getComponent(et).isChecked=!0;var r=this.miscModeToggleList[0].getComponent(et);r.isChecked=!1,i.csmLayerColoration=!1,(r=this.miscModeToggleList[1].getComponent(et)).isChecked=!0,i.lightingWithAlbedo=!0}},{key:"hideUI",value:function(n){var i=this.node.getChildByName("Titles"),a=!i.active;this.singleModeToggleList[0].parent.active=a,this.miscModeToggleList[0].parent.active=a,this.compositeModeToggleList[0].parent.active=a,this.EnableAllCompositeModeButton.parent.active=a,i.active=a,this.hideButtonLabel.string=a?"Hide UI":"Show UI"}},{key:"changeTextColor",value:function(n){this._currentColorIndex++,this._currentColorIndex>=this.strColor.length&&(this._currentColorIndex=0);for(var i=0;i<this.textComponentList.length;i++)this.textComponentList[i].string=this.strColor[this._currentColorIndex]+this.textContentList[i]+"</color>";for(var a=0;a<this.labelComponentList.length;a++)this.labelComponentList[a].color=this.color[this._currentColorIndex]}},{key:"onLoad",value:function(){}},{key:"update",value:function(n){}}]),l}(ea)).prototype,"compositeModeToggle",[ti],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),tl=n(tr.prototype,"singleModeToggle",[ta],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),tu=n(tr.prototype,"EnableAllCompositeModeButton",[to],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),tr));K._RF.pop(),K._RF.push({},"60ac3vor0dMT5bXi8D3VSJN","BubbleAnimation",void 0);var tC=q.ccclass,tk=q.property,tw=(tc=tC("BubbleAnimation"),th=tk(eo),tp=tk(er),td=tk(es),tc((tf=n((ty=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=g.call.apply(g,[this].concat(a)),p(n,"animation",tf,d(n)),p(n,"clipName",tm,d(n)),p(n,"repeat",tg,d(n)),n.currentRepeat=-1,n}return y(u,[{key:"__preload",value:function(){this.animation=this.getComponent(eo),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"play",value:function(){var n=this;this.animation&&(this.animation.clips.find(function(i){return(null==i?void 0:i.name)===n.clipName})?(this.currentRepeat=-1,this.animation.play(this.clipName)):console.warn("BubbleAnimation: Animation component must have ".concat(this.clipName," clip")))}},{key:"onBubbleAnimationLoop",value:function(){this.animation&&-1!==this.repeat&&(this.currentRepeat++,this.currentRepeat>this.repeat&&this.animation.stop())}}]),u}(ea)).prototype,"animation",[th],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),tm=n(ty.prototype,"clipName",[tp],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"Bubble"}}),tg=n(ty.prototype,"repeat",[td],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return -1}}),tv=ty))||tv);K._RF.pop(),K._RF.push({},"ca427NpeqpC3bUoGTd9I/BM","Background",void 0);var tE,tT,tR,tA,t_,tP,tB,tL,tO,tD,tI,tN,tG,tM,tF,tz,tx,tU=q.ccclass,tH=b.Layout;tU("Background")(function(n){i(o,n);var p=a(o);function o(){var n;r(this,o);for(var i=arguments.length,a=new Array(i),d=0;d<i;d++)a[d]=arguments[d];return(n=p.call.apply(p,[this].concat(a))).handleSpriteTypeWhenLayoutChanged=function(i){i===tH.Landscape?(n.setBackgroundType(el.Type.TILED),n.setActiveBlockLines(!0)):(n.setBackgroundType(el.Type.SIMPLE),n.setActiveBlockLines(!1))},n}return y(o,[{key:"__preload",value:function(){this.sprite=this.getComponent(el),this.blockLines=this.getComponentsInChildren(el),this.validateRequiredComponents(),this.listenGameEvents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"listenGameEvents",value:function(){eu.on(g.LAYOUT_CHANGED,this.handleSpriteTypeWhenLayoutChanged)}},{key:"setBackgroundType",value:function(n){this.sprite&&(this.sprite.type=n)}},{key:"setActiveBlockLines",value:function(n){var i=this;this.blockLines&&this.blockLines.forEach(function(a){a.node!==i.node&&(a.node.active=n)})}}]),o}(ea));K._RF.pop(),K._RF.push({},"4b299Dv1kVGcqQmJC9yBPAV","ButtonReleased",void 0);var tj,tV,tW,tK,tq=q.ccclass,tY=q.requireComponent,tJ=q.property,tX=q.disallowMultiple,tZ=q.executionOrder,tQ=globalThis.game.analytics;tE=tq("ButtonReleased"),tT=tY([eo,en]),tR=tZ(120),tA=tJ(er),t_=tJ(er),tP=tJ(ec),tB=tJ({visible:function(){return this.useSound},type:S}),tL=tJ({tooltip:"Add a delay after click to prevent spamming (not apply for cancel click)"}),tO=tJ({visible:function(){return this.disableSpamClick},tooltip:"Delay time in seconds"}),tE(tD=tX(tD=tT(tD=tR((tN=n((tI=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=g.call.apply(g,[this].concat(a)),p(n,"downClipName",tN,d(n)),p(n,"upClipName",tG,d(n)),p(n,"useSound",tM,d(n)),p(n,"soundKey",tF,d(n)),p(n,"disableSpamClick",tz,d(n)),p(n,"disableSpamDelay",tx,d(n)),n.currentClickBoundingBox=null,n.hasDown=!1,n.hasUp=!1,n.onTouchStart=function(i){n.buttonComponent.interactable&&(n.hasDown||(n.currentClickBoundingBox=C.getBoundingBoxToWorld(n.node),n.hasDown=!0,n.runAnimation(n.downClipName),n.useSound&&k.playSound(w[n.soundKey])))},n.onTouchEnd=function(i){n.buttonComponent.interactable&&n.hasDown&&(n.hasUp||n.handleUp(i))},n.onTouchCancel=function(i){var a,r;if(n.buttonComponent.interactable&&n.hasDown&&!n.hasUp){var p=i.getUILocation(),d=null!==(a=null===(r=n.currentClickBoundingBox)||void 0===r?void 0:r.contains(p))&&void 0!==a&&a;_instanceof(i,eh)&&d?n.handleUp(i):(n.hasUp=!0,n.runAnimation(n.upClipName),n.animationComponent.once(eo.EventType.FINISHED,function(){n.handleResetButtonState()}))}},n.handleResetButtonState=function(){var i;if(n.hasDown=!1,n.hasUp=!1,n.buttonComponent){var a=n.buttonComponent.node.scale.x,r=n.buttonComponent.node.scale.z;null===(i=n.buttonComponent)||void 0===i||i.node.setScale(new ep(a,1,r))}},n}return y(u,[{key:"__preload",value:function(){this.buttonComponent=this.getComponent(en),this.animationComponent=this.getComponent(eo),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"onEnable",value:function(){this.animationComponent.clips.length<2?console.warn("ButtonAnimAddition: Animation component must have 2 clips in ".concat(this.node.name)):(this.node.off(ed.EventType.TOUCH_END,this.buttonComponent._onTouchEnded,this.buttonComponent),this.node.on(Y.EventType.TOUCH_START,this.onTouchStart),this.node.on(Y.EventType.TOUCH_END,this.onTouchEnd),this.node.on(Y.EventType.TOUCH_CANCEL,this.onTouchCancel))}},{key:"onDisable",value:function(){this.node.off(Y.EventType.TOUCH_START,this.onTouchStart),this.node.off(Y.EventType.TOUCH_END,this.onTouchEnd),this.node.off(Y.EventType.TOUCH_CANCEL,this.onTouchCancel),this.unschedule(this.handleResetButtonState),this.handleResetButtonState()}},{key:"handleUp",value:function(n){var i=this;this.hasUp=!0,this.runAnimation(this.upClipName),this.animationComponent.once(eo.EventType.FINISHED,function(){if(i.disableSpamClick?i.scheduleOnce(i.handleResetButtonState,i.disableSpamDelay):i.handleResetButtonState(),!i.buttonComponent||i.buttonComponent.interactable){tQ.event(GameCore.Plugins.Analytics.Events.BUTTON_CLICK,{button_name:i.node.name,screen_name:E.getCurrentPage()});var a=i.buttonComponent.clickEvents;if(a){var r,p=T(a);try{for(p.s();!(r=p.n()).done;){var d=r.value;d.emit([n,d.customEventData])}}catch(n){p.e(n)}finally{p.f()}}}})}},{key:"runAnimation",value:function(n){if(!this.isAnimationExist(n))throw new Error("".concat(this.node.name,": Animation component must have ").concat(n," clip"));this.animationComponent.play(n)}},{key:"isAnimationExist",value:function(n){return this.animationComponent.clips.some(function(i){return!(!i||i.name!==n)})}}]),u}(ea)).prototype,"downClipName",[tA],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"ButtonDown"}}),tG=n(tI.prototype,"upClipName",[t_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"ButtonUp"}}),tM=n(tI.prototype,"useSound",[tP],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),tF=n(tI.prototype,"soundKey",[tB],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return S[R.BUTTON_CLICK]}}),tz=n(tI.prototype,"disableSpamClick",[tL],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),tx=n(tI.prototype,"disableSpamDelay",[tO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return .5}}),tD=tI))||tD)||tD)||tD);K._RF.pop(),K._RF.push({},"0e570DdAIZPKY6DNtNerFmX","OpacityToggler",void 0);var t$,t0,t1,t2=q.ccclass,t3=q.requireComponent,t4=q.property,t5=t2("OpacityToggler")(tj=t3([ev])((tW=n((tV=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=g.call.apply(g,[this].concat(a)),p(n,"activeValue",tW,d(n)),p(n,"inActiveValue",tK,d(n)),n}return y(u,[{key:"__preload",value:function(){this.opacityComponent=this.getComponent(ev),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"changeState",value:function(n){var i=arguments.length>0&&void 0!==n&&n;this.opacityComponent.opacity=i?this.activeValue:this.inActiveValue}}]),u}(ea)).prototype,"activeValue",[t4],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 255}}),tK=n(tV.prototype,"inActiveValue",[t4],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 128}}),tj=tV))||tj)||tj;K._RF.pop(),K._RF.push({},"7ef37Q3PZpKYaeik5JzGwNy","DebugResolution",void 0);var t7,t6,t9,t8,ne,nt,nn,ni,na,no,nr,ns,nl,nu,nc,nh,np,nd,nv,ny,nf=q.ccclass,nm=q.property,ng=q.requireComponent,nb=q.disallowMultiple,nS=q.executeInEditMode,nC=b.DesignSize,nk=nC.Portrait,nw=nC.Landscape;nf("DebugResolution")(t$=nb(t$=ng([ey])(t$=nS(!0)(((t1=function(n){i(o,n);var p=a(o);function o(){var n;r(this,o);for(var i=arguments.length,a=new Array(i),d=0;d<i;d++)a[d]=arguments[d];return(n=p.call.apply(p,[this].concat(a))).handleLayoutChange=function(){var i;null===(i=n.graphics)||void 0===i||i.clear(),n.start()},n}return y(o,[{key:"drawPortrait",get:function(){return o._drawPortrait},set:function(n){n!==o._drawPortrait&&(n?this.drawPortraitResolution():this.graphics.clear(),o._drawPortrait=n,o._drawLandscape&&this.drawLandscapeResolution())}},{key:"drawLandscape",get:function(){return o._drawLandscape},set:function(n){n!==o._drawLandscape&&(n?this.drawLandscapeResolution():this.graphics.clear(),o._drawLandscape=n,o._drawPortrait&&this.drawPortraitResolution())}},{key:"__preload",value:function(){this.graphics=this.getComponent(ey),this.validateRequiredComponents(),this.listenGameEvents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"listenGameEvents",value:function(){eu.on(g.LAYOUT_CHANGED,this.handleLayoutChange)}},{key:"start",value:function(){this.drawPortrait&&this.drawPortraitResolution(),this.drawLandscape&&this.drawLandscapeResolution()}},{key:"drawPortraitResolution",value:function(){var n=this.graphics;if(n){var i=nk.WIDTH,a=nk.HEIGHT,r=-i/2,p=-a/2;n.strokeColor=J.GREEN,n.rect(r,p,i,a),n.stroke()}}},{key:"drawLandscapeResolution",value:function(){var n=this.graphics;if(n){var i=nw.WIDTH,a=nw.HEIGHT,r=-i/2,p=-a/2;n.strokeColor=J.CYAN,n.rect(r,p,i,a),n.stroke()}}}]),o}(ea))._drawPortrait=!0,t1._drawLandscape=!0,n((t0=t1).prototype,"drawPortrait",[nm],Object.getOwnPropertyDescriptor(t0.prototype,"drawPortrait"),t0.prototype),n(t0.prototype,"drawLandscape",[nm],Object.getOwnPropertyDescriptor(t0.prototype,"drawLandscape"),t0.prototype),t$=t0))||t$)||t$)||t$);K._RF.pop(),K._RF.push({},"0e2d6yn/BVObK1kyTJ5a09a","GameStats",void 0);var nE,nT,nR,nA,n_,nP,nB,nL,nO,nD,nI,nN,nG,nM,nF=q.ccclass,nz=q.executionOrder,nx=q.property,nU=GameCore.Utils,nH=J.RED,nj=J.BLACK,nV=J.MAGENTA;t7=nF("GameStats"),t6=nz(-1e3),t9=nx($),t8=nx($),ne=nx($),nt=nx($),nn=nx($),ni=nx($),na=nx($),no=nx($),t7(nr=t6((nl=n((ns=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=g.call.apply(g,[this].concat(a)),p(n,"fpsLabel",nl,d(n)),p(n,"drawCountLabel",nu,d(n)),p(n,"logicTimeLabel",nc,d(n)),p(n,"physicTimeLabel",nh,d(n)),p(n,"renderTimeLabel",np,d(n)),p(n,"objectMemoryUsageLabel",nd,d(n)),p(n,"textureMemoryUsageLabel",nv,d(n)),p(n,"devicePixelRatioLabel",ny,d(n)),n.refreshInterval=.5,n.handleMouseDown=function(){n.bg.enabled=!n.bg.enabled},n.waitForStats=function(){ef.stats&&(n.unschedule(n.waitForStats),n.node.active=!0,n.stats=ef.stats,n.startUpdateStats())},n.updateStats=function(){n.updateFps(),n.updateDrawCalls(),n.updateLogicTime(),n.updatePhysicTime(),n.updateRenderTime(),n.updateObjectMemoryUsage(),n.updateTextureMemoryUsage(),n.updateDevicePixelRatio()},n}return y(u,[{key:"__preload",value:function(){this.bg=this.getComponent(el),this.validateRequiredComponents(),this.listenInputEvents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"listenInputEvents",value:function(){this.node.on(ed.EventType.TOUCH_START,this.handleMouseDown)}},{key:"start",value:function(){this.bg.enabled=!1,this.node.active=!1,ef&&nU.Valid.isDebugger()&&(ef.showStats(),this.schedule(this.waitForStats,.5,20))}},{key:"startUpdateStats",value:function(){this.schedule(this.updateStats,this.refreshInterval)}},{key:"updateFps",value:function(){var n=this.getFps();this.updateFpsColor(n),this.fpsLabel.string="FPS: ".concat(n)}},{key:"updateFpsColor",value:function(n){this.fpsLabel.color=n<30?nH:n<48?nV:nj}},{key:"updateDrawCalls",value:function(){var n=this.getDrawCalls();this.updateDrawCallsColor(n),this.drawCountLabel.string="Draw Calls: ".concat(n)}},{key:"updateDrawCallsColor",value:function(n){var i=em.os===em.OS.IOS,a=i?80:25,r=i?60:15;this.drawCountLabel.color=n>a?nH:n>r?nV:nj}},{key:"updateLogicTime",value:function(){var n=this.getLogicTime();this.updateLogicTimeColor(n),this.logicTimeLabel.string="Logic Time: ".concat(n.toFixed(2),"ms")}},{key:"updateLogicTimeColor",value:function(n){this.logicTimeLabel.color=n>10?nH:n>5?nV:nj}},{key:"updatePhysicTime",value:function(){var n=this.getPhysicTime();this.updatePhysicTimeColor(n),this.physicTimeLabel.string="Physic Time: ".concat(n.toFixed(2),"ms")}},{key:"updatePhysicTimeColor",value:function(n){this.physicTimeLabel.color=n>10?nH:n>5?nV:nj}},{key:"updateRenderTime",value:function(){var n=this.getRenderTime();this.updateRenderTimeColor(n),this.renderTimeLabel.string="Render Time: ".concat(n.toFixed(2),"ms")}},{key:"updateRenderTimeColor",value:function(n){this.renderTimeLabel.color=n>10?nH:n>5?nV:nj}},{key:"updateObjectMemoryUsage",value:function(){var n=this.getObjectMemoryUsage();this.updateObjectMemoryUsageColor(n),this.objectMemoryUsageLabel.string="Object Mem: ".concat(n.toFixed(2),"MB")}},{key:"updateObjectMemoryUsageColor",value:function(n){this.objectMemoryUsageLabel.color=n>40?nH:n>25?nV:nj}},{key:"updateTextureMemoryUsage",value:function(){var n=this.getTextureMemoryUsage();this.updateTextureMemoryUsageColor(n),this.textureMemoryUsageLabel.string="Texture Mem: ".concat(n.toFixed(2),"MB")}},{key:"updateTextureMemoryUsageColor",value:function(n){this.textureMemoryUsageLabel.color=n>50?nH:n>35?nV:nj}},{key:"updateDevicePixelRatio",value:function(){var n=this.getDevicePixelRatio();this.updateDevicePixelRatioColor(n),this.devicePixelRatioLabel.string="Device Pixel Ratio: ".concat(n)}},{key:"updateDevicePixelRatioColor",value:function(n){this.devicePixelRatioLabel.color=n>2?nH:n<=1?nV:nj}},{key:"getFps",value:function(){var n=this.stats.fps.counter;return Math.floor(n.value)||0}},{key:"getDrawCalls",value:function(){return this.stats.draws.counter.value||0}},{key:"getLogicTime",value:function(){var n=this.stats.logic.counter;return Math.floor(1e3*n.value)/1e3||0}},{key:"getPhysicTime",value:function(){var n=this.stats.physics.counter;return Math.floor(1e3*n.value)/1e3||0}},{key:"getRenderTime",value:function(){var n=this.stats.render.counter;return Math.floor(1e3*n.value)/1e3||0}},{key:"getObjectMemoryUsage",value:function(){var n=this.stats.bufferMemory.counter;return Math.floor(1e3*n.value)/1e3||0}},{key:"getTextureMemoryUsage",value:function(){var n=this.stats.textureMemory.counter;return Math.floor(1e3*n.value)/1e3||0}},{key:"getDevicePixelRatio",value:function(){return window.devicePixelRatio||0}}]),u}(ea)).prototype,"fpsLabel",[t9],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nu=n(ns.prototype,"drawCountLabel",[t8],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nc=n(ns.prototype,"logicTimeLabel",[ne],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nh=n(ns.prototype,"physicTimeLabel",[nt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),np=n(ns.prototype,"renderTimeLabel",[nn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nd=n(ns.prototype,"objectMemoryUsageLabel",[ni],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nv=n(ns.prototype,"textureMemoryUsageLabel",[na],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ny=n(ns.prototype,"devicePixelRatioLabel",[no],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nr=ns))||nr);K._RF.pop(),K._RF.push({},"aa4b0d0u0hLeqd3+/PQZ/QD","SwitchButton",void 0);var nW,nK,nq,nY,nJ,nX,nZ,nQ,n$,n0,n1=q.ccclass,n2=q.property,n3=q.requireComponent,n4=globalThis.game.analytics,n5=(nE=n1("SwitchButton"),nT=n3([en]),nR=n2(ec),nA=n2(Y),n_=n2(Y),nP=n2(ec),nB=n2({visible:function(){return this.useSound},type:S}),nE(nL=nT((nD=n((nO=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=g.call.apply(g,[this].concat(a)),p(n,"enable",nD,d(n)),p(n,"nodeOn",nI,d(n)),p(n,"nodeOff",nN,d(n)),p(n,"useSound",nG,d(n)),p(n,"soundKey",nM,d(n)),n}return y(u,[{key:"__preload",value:function(){this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"switch",value:function(){return!!this.node.active&&(n4.event(GameCore.Plugins.Analytics.Events.BUTTON_CLICK,{button_name:this.node.name,enable:!this.enable}),this.useSound&&k.playSound(w[this.soundKey]),this.updateStatus(!this.enable))}},{key:"setEnabled",value:function(n){this.node.active&&this.updateStatus(n)}},{key:"updateStatus",value:function(n){return this.enable=n,this.nodeOn.active=n,this.nodeOff.active=!n,n}}]),u}(ea)).prototype,"enable",[nR],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),nI=n(nO.prototype,"nodeOn",[nA],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nN=n(nO.prototype,"nodeOff",[n_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nG=n(nO.prototype,"useSound",[nP],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),nM=n(nO.prototype,"soundKey",[nB],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return S[R.BUTTON_CLICK]}}),nL=nO))||nL)||nL);K._RF.pop(),K._RF.push({},"bce15LcVrxOfYMa9rbXN/qi","Localize",void 0);var n7,n6,n9,n8,ie,it,ii,ia,io,ir,is,il,iu,ic,ih,ip,id,iv,iy,im,ig,ib,iS,iC,ik,iw,iE=q.ccclass,iT=q.property,iR=q.requireComponent,iA=q.executeInEditMode,i_=q.disallowMultiple,iP=globalThis.game.language;nW=iE("Localize"),nK=iR($),nq=iA(!0),nY=iT({visible:!0}),nJ=iT({group:{name:"Fonts",id:"fonts",displayOrder:1},type:eg}),nX=iT({group:{name:"Fonts",id:"fonts",displayOrder:2},type:eg}),nW(nZ=i_(nZ=nK(nZ=nq((n((nQ=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=g.call.apply(g,[this].concat(a)),p(n,"enFont",n$,d(n)),p(n,"ruFont",n0,d(n)),n.handleLanguageChanged=function(){n.updateTransToNode()},n}return y(u,[{key:"key",get:function(){return this._key},set:function(n){n&&(this._key=n,this.updateTransToNode())}},{key:"__preload",value:function(){this.label=this.getComponent($),this.validateRequiredComponents(),this.updateTransToNode()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"start",value:function(){this.listenEvent()}},{key:"listenEvent",value:function(){eu.on("update-language",this.handleLanguageChanged)}},{key:"updateTransToNode",value:function(){if(this.node.active&&this._key)try{var n=iP.getText(this._key),i=this.getFontByLang();this.label.font=i,this.label.string=n,this.node.emit("update-trans",n)}catch(n){console.warn(n)}}},{key:"getFontByLang",value:function(){if(!this.enFont||!this.ruFont)throw new Error("Font is not found");switch(iP.getCurrentLocale()){case"en":return this.enFont;case"ru":return this.ruFont;default:return this.enFont}}}]),u}(ea)).prototype,"key",[nY],Object.getOwnPropertyDescriptor(nQ.prototype,"key"),nQ.prototype),n$=n(nQ.prototype,"enFont",[nJ],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),n0=n(nQ.prototype,"ruFont",[nX],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),nZ=nQ))||nZ)||nZ)||nZ);K._RF.pop(),K._RF.push({},"a2260jBMJFPCrn/Q4Vo4iB1","BatchNodes",void 0);var iB,iL=q.ccclass,iO=q.executionOrder,iD=q.property,iI=GameCore.Utils.Function,iN="Batch By Name",iG="Batch Label",iM="Batch Sprite";n7=iL("BatchNodes"),n6=iO(99999),n9=iD({group:{name:iN}}),n8=iD({type:[es],group:{name:iN}}),ie=iD({type:[er],group:{name:iN}}),it=iD({group:{name:iG}}),ii=iD({group:{name:iG}}),ia=iD({group:{name:iG}}),io=iD({group:{name:iM}}),ir=iD({group:{name:iM}}),is=iD({readonly:!0}),il=iD({readonly:!0}),iu=iD({readonly:!0}),n7(ic=n6((ip=n((ih=function(n){i(l,n);var m=a(l);function l(){var n;r(this,l);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=m.call.apply(m,[this].concat(a)),p(n,"batchByName",ip,d(n)),p(n,"depthNames",id,d(n)),p(n,"listName",iv,d(n)),p(n,"batchLabel",iy,d(n)),p(n,"depthLabel",im,d(n)),p(n,"typeLabel",ig,d(n)),p(n,"batchSprite",ib,d(n)),p(n,"depthSprite",iS,d(n)),p(n,"batchAllNodes",iC,d(n)),p(n,"batchDepth",ik,d(n)),p(n,"checkOverlap",iw,d(n)),n.batchNode={},n.labelChildren=[],n.spriteChildren=[],n.allChildren=[],n.nameChildren=[],n.originalParents={},n.isInited=!1,n.handleNodeChange=iI.throttle(function(){n.isInited&&(console.warn("handleNodeChange",n.node.name),n.setupBatchNodes(n.node))},1e3),n.onAfterUpdate=function(){n.isInited&&n.hierarchyChildren()},n.onAfterRender=function(){n.isInited&&n.restoreOriginalChildren()},n}return y(l,[{key:"__preload",value:function(){this.enabled&&(ei.on(eb.EVENT_AFTER_UPDATE,this.onAfterUpdate),ei.on(eb.EVENT_AFTER_RENDER,this.onAfterRender))}},{key:"onDestroy",value:function(){ei.off(eb.EVENT_AFTER_UPDATE,this.onAfterUpdate),ei.off(eb.EVENT_AFTER_RENDER,this.onAfterRender)}},{key:"onLoad",value:function(){this.enabled&&(this.setupBatchNodes(this.node),this.isInited=!0)}},{key:"onEnable",value:function(){this.isInited||(ei.on(eb.EVENT_AFTER_UPDATE,this.onAfterUpdate),ei.on(eb.EVENT_AFTER_RENDER,this.onAfterRender),this.setupBatchNodes(this.node),this.isInited=!0)}},{key:"handleActiveChange",value:function(n){n.once(Y.EventType.ACTIVE_IN_HIERARCHY_CHANGED,this.handleNodeChange)}},{key:"onDisable",value:function(){this.restoreOriginalChildren(),ei.off(eb.EVENT_AFTER_UPDATE,this.onAfterUpdate),ei.off(eb.EVENT_AFTER_RENDER,this.onAfterRender),this.isInited=!1}},{key:"setupBatchNodes",value:function(n){this.allChildren=[],this.nameChildren=[],this.labelChildren=[],this.spriteChildren=[],this.saveOriginalChildren(n),this.createGlobalNodes(n),this.createGlobalNameNodes(n),this.createGlobalLabelNode(n),this.createGlobalSpriteNode(n),this.sortGlobalNodes()}},{key:"sortGlobalNodes",value:function(){var n,i,a,r=this;null===(n=this.batchNode.node)||void 0===n||n.setSiblingIndex(0),null===(i=this.batchNode.label)||void 0===i||i.setSiblingIndex(this.depthLabel),null===(a=this.batchNode.sprite)||void 0===a||a.setSiblingIndex(this.depthSprite),this.listName.forEach(function(n,i){var a,p=r.depthNames[i];p?null===(a=r.batchNode[n])||void 0===a||a.setSiblingIndex(p):console.warn("BatchNodes: depth is undefined",n,i,p)})}},{key:"createGlobalNodes",value:function(n){if(this.batchAllNodes){var i=new Y("GlobalBatchNode");i.active=!0,this.batchNode.node=i,n.addChild(i)}}},{key:"createGlobalNameNodes",value:function(n){if(this.batchByName){var i,a=T(this.listName);try{for(a.s();!(i=a.n()).done;){var r=i.value;if(!this.batchNode[r]){var p=new Y(r);p.active=!0,this.batchNode[r]=p,n.addChild(p)}}}catch(n){a.e(n)}finally{a.f()}}}},{key:"createGlobalLabelNode",value:function(n){if(this.batchLabel){var i=new Y("GlobalLabelNode");i.active=!0,this.batchNode.label=i,n.addChild(i)}}},{key:"createGlobalSpriteNode",value:function(n){if(this.batchSprite){var i=new Y("GlobalSpriteNode");i.active=!0,this.batchNode.sprite=i,n.addChild(i)}}},{key:"saveOriginalParents",value:function(){var n,i=[].concat(A(this.labelChildren),A(this.spriteChildren)),a=this.nameChildren,r=T(i);try{for(r.s();!(n=r.n()).done;){var p=n.value;p.node.parent&&(this.handleActiveChange(p.node),this.originalParents[p.uuid]=p.node.parent)}}catch(n){r.e(n)}finally{r.f()}var d,y=T(a);try{for(y.s();!(d=y.n()).done;){var m=d.value;m.parent&&(this.handleActiveChange(m),this.originalParents[m.uuid]=m.parent)}}catch(n){y.e(n)}finally{y.f()}}},{key:"saveOriginalChildren",value:function(n){var i,a=n.children,r=T(a);try{for(r.s();!(i=r.n()).done;){var p=i.value;this.saveLabelChildren(p),this.saveSpriteChildren(p),this.saveNodeChildrenByName(p),this.saveNodeChildrenByType(p)}}catch(n){r.e(n)}finally{r.f()}this.saveOriginalParents()}},{key:"saveLabelChildren",value:function(n){var i;if(this.batchLabel){var a=n.getComponentsInChildren($);"char"===this.typeLabel&&(a=a.filter(function(n){return n.cacheMode===$.CacheMode.CHAR})),0!==a.length&&(i=this.labelChildren).push.apply(i,A(a))}}},{key:"saveSpriteChildren",value:function(n){var i;if(this.batchSprite){var a=n.getComponentsInChildren(el);0!==a.length&&(i=this.spriteChildren).push.apply(i,A(a))}}},{key:"saveNodeChildrenByName",value:function(n){if(this.batchByName){var i,a=T(n.children);try{for(a.s();!(i=a.n()).done;){var r=i.value;this.listName.includes(r.name)?this.nameChildren.push(r):this.saveNodeChildrenByName(r)}}catch(n){a.e(n)}finally{a.f()}}}},{key:"saveNodeChildrenByType",value:function(n,i){var a,r=arguments.length>1&&void 0!==i?i:0;if(this.batchAllNodes){var p=n.getComponentsInChildren(ea);if((a=this.allChildren).push.apply(a,A(p)),!(this.batchDepth<1||r>=this.batchDepth)){var d,y=T(this.allChildren);try{for(y.s();!(d=y.n()).done;){var m=d.value;this.saveNodeChildrenByType(m.node,this.batchDepth)}}catch(n){y.e(n)}finally{y.f()}}}}},{key:"hierarchyChildren",value:function(){var n,t=function(n,i){n.node.isValid&&n.node.activeInHierarchy&&i&&!n.node.isChildOf(i)&&(n.node.setParent(i,!0),n.node.layer=eS.Enum.UI_2D)},i=["GlobalLabelNode","GlobalSpriteNode","GlobalBatchNode"],a=T(this.labelChildren);try{for(a.s();!(n=a.n()).done;)t(n.value,this.batchNode.label)}catch(n){a.e(n)}finally{a.f()}var r,p=T(this.spriteChildren);try{for(p.s();!(r=p.n()).done;)t(r.value,this.batchNode.sprite)}catch(n){p.e(n)}finally{p.f()}var d,y=T(this.allChildren);try{for(y.s();!(d=y.n()).done;)t(d.value,this.batchNode.node)}catch(n){y.e(n)}finally{y.f()}this.allChildren.sort(function(n,i){return n.constructor.name.localeCompare(i.constructor.name)}),this.labelChildren.sort(function(n,i){return n.cacheMode-i.cacheMode});var m,g=T(this.nameChildren);try{for(g.s();!(m=g.n()).done;){var b=m.value;if(b.isValid&&b.activeInHierarchy&&b.isTransformDirty()){var S=b.getComponent(ev);if(!(S&&S.opacity<1||i.includes(b.name))){var C=this.batchNode[b.name];C&&(b.isChildOf(C)||(b.setParent(C,!0),b.layer=eS.Enum.UI_2D))}}}}catch(n){g.e(n)}finally{g.f()}}},{key:"restoreOriginalChildren",value:function(){var n=[].concat(A(this.labelChildren),A(this.spriteChildren));if(n.length>0){var i,a=T(n);try{for(a.s();!(i=a.n()).done;){var r=i.value,p=this.originalParents[r.uuid];p&&(r.node.isChildOf(p)||r.node.setParent(p,!0))}}catch(n){a.e(n)}finally{a.f()}}var d,y=T(this.nameChildren);try{for(y.s();!(d=y.n()).done;){var m=d.value,g=this.originalParents[m.uuid];g&&(m.isChildOf(g)||m.setParent(g,!0))}}catch(n){y.e(n)}finally{y.f()}}}]),l}(ea)).prototype,"batchByName",[n9],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),id=n(ih.prototype,"depthNames",[n8],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),iv=n(ih.prototype,"listName",[ie],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),iy=n(ih.prototype,"batchLabel",[it],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),im=n(ih.prototype,"depthLabel",[ii],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),ig=n(ih.prototype,"typeLabel",[ia],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"char"}}),ib=n(ih.prototype,"batchSprite",[io],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),iS=n(ih.prototype,"depthSprite",[ir],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),iC=n(ih.prototype,"batchAllNodes",[is],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ik=n(ih.prototype,"batchDepth",[il],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),iw=n(ih.prototype,"checkOverlap",[iu],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ic=ih))||ic);K._RF.pop(),K._RF.push({},"9b958Lf6PFClb/JuJfTLzxG","Vibrate",void 0);var iF=q.ccclass,iz=GameCore.Utils,ix=globalThis.game.player,iU=iF("Vibrate")(iB=function(n){i(o,n);var p=a(o);function o(){return r(this,o),p.apply(this,arguments)}return y(o,[{key:"vibrate",value:function(n){if(this.isVibrateEnable()&&!iz.Browser.vibrate(n)){if("performHapticFeedbackAsync"in GameSDK.extra)return void GameSDK.extra.performHapticFeedbackAsync();console.warn("Vibrate failed")}}},{key:"isVibrateEnable",value:function(){return!!ix.getPlayerSetting("vibrate")}}]),o}(ea))||iB;K._RF.pop(),K._RF.push({},"ad867amogBFGJo9jp78EnQP","DevTools",void 0);var iH=function(n){return n.UNLOCK_DEV_TOOLS="unlock-dev-tools",n.TRIGGER_UNLOCK_KEY="trigger-unlock-key",n.TRIGGER_RESET_SEQUENCE="trigger-reset-sequence",n}(iH||{}),ij={Events:iH,UNLOCK_SEQUENCE:"101013012031"};K._RF.pop(),K._RF.push({},"437c2Vl2gxMEIGhbeMNXO0c","EndlessProgressions",void 0);var iV={0:{beeSpeed:60,spawnRandOffset:100,targetOffsetMultiplier:0,count:[8,15]},10:{beeSpeed:60,spawnRandOffset:100,targetOffsetMultiplier:.5,count:[10,20]},20:{beeSpeed:70,spawnRandOffset:110,targetOffsetMultiplier:.6,count:[10,20]},50:{beeSpeed:70,spawnRandOffset:120,targetOffsetMultiplier:.7,count:[10,20]}};K._RF.pop(),K._RF.push({},"27033qxh65F25R336CXMYGV","BeeRole",void 0);var iW=function(n){return n[n.NORMAL=0]="NORMAL",n[n.PATH_SEEKER=1]="PATH_SEEKER",n[n.PUSHER=2]="PUSHER",n}(iW||{});K._RF.pop(),K._RF.push({},"ab23abxgeZD0KDVdLYEeAQS","BeeState",void 0);var iK=function(n){return n[n.IDLE=0]="IDLE",n[n.FLYING=1]="FLYING",n[n.WAITING_TO_SEEK_PATH=2]="WAITING_TO_SEEK_PATH",n[n.SEEKING_PATH=3]="SEEKING_PATH",n[n.ATTACKING=4]="ATTACKING",n[n.DIE=5]="DIE",n}(iK||{});K._RF.pop(),K._RF.push({},"9ef7e8FlFJOS5DAWzwBrkww","GameObject",void 0);for(var iq=function(n){return n.AIR_FAN="air-fan",n.BALLOON="balloon",n.DOGE="doge",n.SPIDER="spider",n.BEE="bee",n.BIG_BEE="big-bee",n.BIG_BEE_BULLET="big-bee-bullet",n.BEEHIVE="beehive",n.BRICK="brick",n.GRASS="grass",n.GRASS_DARK="grass-dark",n.COLLIDER="collider",n.THORN="thorn",n.THORN_BALL="thorn-ball",n.MAP_LINE="line",n.WOOD="wood",n.WOOD_STROKE="wood-stroke",n.POISON="poison",n.POISON_BUBBLE="poison-bubble",n.POISON_SURFACE="poison-surface",n.WATER="water",n.WATER_SURFACE="water-surface",n.DANGER_AREA="danger-area",n.DUST_PARTICLE="dust-particle",n.ROPE="rope",n.JOINT="joint",n.DRAW_LINE="draw-line",n.CROSSING_BEE_LINE="crossing-bee-line",n}({}),iY=iq.COLLIDER,iJ=iq.DANGER_AREA,iX=iq.DOGE,iZ=[iY,iJ,iq.GRASS,iq.GRASS_DARK,iq.BRICK,iq.MAP_LINE,iq.POISON,iq.POISON_SURFACE,iq.POISON_BUBBLE,iq.AIR_FAN,iq.WOOD,iq.WOOD_STROKE,iq.THORN_BALL,iq.THORN,iq.CROSSING_BEE_LINE,iq.BEE,iX,iq.BEEHIVE,iq.ROPE,iq.BALLOON,iq.WATER,iq.WATER_SURFACE,iq.JOINT,iq.DUST_PARTICLE,iq.DRAW_LINE],iQ={},i$=0;i$<iZ.length;i$++)iQ[iZ[i$]]=i$;var i0=iQ;K._RF.pop(),K._RF.push({},"4c577T9x2FPKpyFoVPXbav0","ObjectIds",void 0);var i1=function(n){return n[n.BRICK=1]="BRICK",n[n.STROKE=3]="STROKE",n[n.GRASS_DARK=4]="GRASS_DARK",n[n.GRASS=5]="GRASS",n[n.COLLIDER=6]="COLLIDER",n[n.THORN=7]="THORN",n[n.WATER=8]="WATER",n[n.WATER_SURFACE=9]="WATER_SURFACE",n[n.LINE=10]="LINE",n[n.POISON_SURFACE=11]="POISON_SURFACE",n[n.POISON=12]="POISON",n[n.WOOD=13]="WOOD",n[n.THORN_BALL=14]="THORN_BALL",n[n.CONNECT=15]="CONNECT",n[n.DANGER_AREA=16]="DANGER_AREA",n[n.BALLOON=17]="BALLOON",n[n.AIR_FAN=18]="AIR_FAN",n[n.SPIDER=19]="SPIDER",n[n.DOGE_A=101]="DOGE_A",n[n.DOGE_B=106]="DOGE_B",n[n.BIG_BEE=107]="BIG_BEE",n[n.BEEHIVE_A=102]="BEEHIVE_A",n[n.BEEHIVE_B=103]="BEEHIVE_B",n[n.BEEHIVE_C=104]="BEEHIVE_C",n[n.BEEHIVE_D=105]="BEEHIVE_D",n}(i1||{});K._RF.pop(),K._RF.push({},"7bb7ftpsjJCX5G6+WtNYJ2x","PhysicsGroup",void 0);var i2=function(n){return n[n.DEFAULT=1]="DEFAULT",n[n.BEE=2]="BEE",n[n.MAIN_OBJECT=4]="MAIN_OBJECT",n[n.WORLD_BOUND=8]="WORLD_BOUND",n[n.ROPE=16]="ROPE",n}(i2||{});K._RF.pop(),K._RF.push({},"a6e4bjV/RVH17qBEx1mZaFg","ResourcePaths",void 0);var i3,i4=function(n){return n.WATER_SURFACE_FRAME="sprites/water-surface/spriteFrame",n.IC_HAND_FRAME="sprites/ic-hand/spriteFrame",n.POISON_CIRCLE_FRAME="sprites/poison-circle/spriteFrame",n.POISON_BUBBLE_PREFAB="prefabs/PoisonBubble",n.DUST_PARTICLE_SPINE="spines/dust-particle/siwang_texiao",n.MAP_JSON_PREFIX="maps-json/",n}(i4||{});K._RF.pop(),K._RF.push({},"476e6UyMHFJyI2GmFP4KpHY","BaseObject",void 0);var i5,i7,i6,i9,i8,ae,at,an=(0,q.ccclass)("BaseObject")(i3=function(n){i(o,n);var p=a(o);function o(){var n;r(this,o);for(var i=arguments.length,a=new Array(i),d=0;d<i;d++)a[d]=arguments[d];return(n=p.call.apply(p,[this].concat(a))).points=[],n.body=null,n.bodyType=eC.Static,n}return y(o,[{key:"onLoad",value:function(){this.node.layer=eS.Enum.UI_2D}},{key:"sleep",value:function(){if(!this.body){if(this.body=this.getComponent(ek),!this.body)return;this.bodyType=this.body.type}this.enabled=!1,this.body.sleep(),this.body.type=eC.Static}},{key:"wake",value:function(){if(this.enabled=!0,this.body)this.body.wakeUp(),this.body.type=this.bodyType;else{if(this.body=this.getComponent(ek),!this.body)return;this.bodyType=this.body.type}}},{key:"hide",value:function(){var n;this.enabled=!1,null===(n=this.body)||void 0===n||n.sleep();var i=this.getComponent(ew.Skeleton);i&&(i.enabled=!1);var a=this.getComponent(el);a&&(a.enabled=!1)}},{key:"preHide",value:function(){var n;this.enabled=!1,null===(n=this.body)||void 0===n||n.sleep(),this.scheduleOnce(this.hide,.2)}},{key:"appear",value:function(){this.enabled=!0;var n=this.getComponent(ew.Skeleton);n&&(n.enabled=!0)}},{key:"setSpineAnimation",value:function(n,i){var a=this.getComponent(ew.Skeleton);null==a||a.setAnimation(0,n,i)}},{key:"setEnable",value:function(n){this.enabled=n}},{key:"angle",value:function(n,i){var a=Math.atan2(i,n);return a<0&&(a+=2*Math.PI),a}},{key:"getVectorDataFromAToB",value:function(n,i){var a=i.x-n.x,r=i.y-n.y;return{vector:new eE(a,r).normalize(),dx:a,dy:r}}},{key:"kill",value:function(){this.node.active=!1}},{key:"revive",value:function(){this.node.active=!0}}]),o}(ea))||i3;K._RF.pop(),K._RF.push({},"15b7bvQaXpFgItiEHCr7GsP","AirFan",void 0);var ai=q.ccclass,aa=q.property,ao=(i5=ai("AirFan"),i7=aa(es),i6=aa(eT),i5((ae=n((i8=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=g.call.apply(g,[this].concat(a)),p(n,"pushForce",ae,d(n)),n.force=new eE(0,0),n.affectedObjects=[],p(n,"collider",at,d(n)),n.colliders=[],n.onBeginContact=function(i,a){n.affectedObjects.includes(a.node.name)&&-1===n.colliders.findIndex(function(n){return n.node===a.node})&&n.colliders.push(a)},n.onEndContact=function(i,a){var r=n.colliders.indexOf(a);-1!==r&&n.colliders.splice(r,1)},n}return y(u,[{key:"__preload",value:function(){this.collider=this.getComponent(eT),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"start",value:function(){this.colliders=[],this.affectedObjects=[iq.DOGE,iq.THORN_BALL,iq.DRAW_LINE,iq.WOOD,iq.BALLOON],this.collider.on(eR.BEGIN_CONTACT,this.onBeginContact),this.collider.on(eR.END_CONTACT,this.onEndContact)}},{key:"update",value:function(n){var i,a=T(this.colliders);try{for(a.s();!(i=a.n()).done;){var r=i.value,p=r.getComponent(ek);if(p){var d=this.force;r.node.name===iq.DRAW_LINE&&(d=this.force.clone().multiplyScalar(r.density/3)),r.node.name===iq.DOGE&&(d=this.force.clone().multiplyScalar(250/this.pushForce)),p.applyForceToCenter(d,!0)}}}catch(n){a.e(n)}finally{a.f()}}},{key:"setForceDirection",value:function(n){var i=new eE(0,1).rotate(eA.toRadian(n));this.force=i.clone().normalize().multiplyScalar(this.pushForce)}},{key:"sleep",value:function(){_(P(u.prototype),"sleep",this).call(this),this.enabled=!1}},{key:"wake",value:function(){_(P(u.prototype),"wake",this).call(this),this.enabled=!0}}]),u}(an)).prototype,"pushForce",[i7],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 400}}),at=n(i8.prototype,"collider",[i6],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),i9=i8))||i9);K._RF.pop(),K._RF.push({},"8a02eYTwSpP9IpQ4MrTsAiL","SpineAnimationName",void 0);var ar,as,al,au,ac,ah,ap,ad={IDLE:"normal",SMILE:"smile",HURT:"hurt",INACTIVE:"cry",DROWNING:"troll",FREAK_OUT:"freak out",THORN_INACTIVE:"die"},av={FLAP_WINGS:"animation",SMOKE_DISAPPEAR:"animation3"},ay={APPEAR:"animation",EXPLODE:"animation2"};K._RF.pop(),K._RF.push({},"ff37brNpltMuaZm+M+x9+1N","Rope",void 0);var af,am,ag,ab,aS,aC,ak,aw,aE,aT=q.ccclass,aR=q.property,aA=(ar=aT("Rope"),as=aR(e_),al=aR(es),ar((ah=n((ac=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=g.call.apply(g,[this].concat(a)),p(n,"frame",ah,d(n)),p(n,"length",ap,d(n)),n.nodes=[],n}return y(u,[{key:"onLoad",value:function(){this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"start",value:function(){this.nodes=[],this.node.setPosition(this.headJoint.getPosition()),console.log(this.headJoint.getPosition(),this.tailJoint.getPosition(),this.node.getPosition());for(var n=this.headJoint.getPosition().clone().add(new ep(0,4)).multiplyScalar(-1),i=this.tailJoint.getPosition().clone().add(new ep(0,115)).add(n).multiplyScalar(1/this.length),a=i.length(),r=i.clone().multiplyScalar(-1*this.length),p=new eE(r.x,r.y),d=0;d<this.length;d++){var y=this.createNode(a);if(!y)return void console.warn("Rope: node-".concat(d," not found"));this.node.addChild(y),y.name="node-".concat(d),y.setPosition(i.clone().multiplyScalar(d)),this.nodes.push(y)}for(var m=0;m<this.nodes.length;m++){var g=this.nodes[m];if(0!==m){var b=this.nodes[m-1],S=g.addComponent(eP);S.enabled=!1,S.anchor=new eE(0,-4),S.connectedAnchor=new eE(0,4),S.connectedBody=b.getComponent(ek),S.collideConnected=!1,S.enableLimit=!0,S.enabled=!0;var C=g.addComponent(eB);if(C.enabled=!1,C.connectedBody=this.headJoint.getComponent(ek),C.anchor=new eE(0,-4),C.connectedAnchor=new eE(0,4),C.collideConnected=!1,C.maxForce=160,C.enabled=!0,m===this.nodes.length-1){var k=this.tailJoint.addComponent(eP);k.enabled=!1,k.anchor=new eE(0,115),k.connectedBody=g.getComponent(ek),k.connectedAnchor=new eE(0,4),k.collideConnected=!1,k.enableLimit=!0,k.enabled=!0}}else{var w=g.addComponent(eP);w.enabled=!1,w.connectedBody=this.headJoint.getComponent(ek),w.anchor=new eE(0,-4),w.connectedAnchor=new eE(0,4),w.enableLimit=!0,w.collideConnected=!1,w.enabled=!0}}var E=this.tailJoint.addComponent(eB);E.enabled=!1,E.connectedBody=this.headJoint.getComponent(ek),E.anchor=new eE(0,118),E.connectedAnchor=new eE(0,-4),E.linearOffset=p,E.maxForce=500,E.enabled=!0}},{key:"disconnect",value:function(){console.log("Disconnecting rope");var n=this.nodes[0].getComponent(eP);if(n){n.connectedBody=null,n.enabled=!1;var i=this.tailJoint.getComponent(eP);if(i){i.connectedBody=null,i.enabled=!1;var a=this.tailJoint.getComponent(eB);a&&(a.enabled=!1,a.connectedBody=null);var r,p=T(this.nodes);try{for(p.s();!(r=p.n()).done;){var d=r.value.getComponent(el);if(!d)return void console.warn("Rope: Sprite not found");d.enabled=!1}}catch(n){p.e(n)}finally{p.f()}}else console.warn("Rope: Final joint not found")}else console.warn("Rope: Starting joint not found")}},{key:"createNode",value:function(n){var i=new Y("node");i.layer=this.node.layer,i.addComponent(el).spriteFrame=this.frame;var a=i.addComponent(Z);a.setAnchorPoint(.5,.5),a.setContentSize(6,1.2*n);var r=i.addComponent(ek);return r.linearDamping=5,r.angularDamping=50,r.gravityScale=.1,r.group=i2.ROPE,i.addComponent(eL).size=a.contentSize,i.name=iq.ROPE,i}}]),u}(ea)).prototype,"frame",[as],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ap=n(ac.prototype,"length",[al],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),au=ac))||au);K._RF.pop(),K._RF.push({},"a8a47NhLJ9C1ahfjfiJ2xjc","Balloon",void 0);var a_=q.ccclass,aP=q.property,aB=(af=a_("Balloon"),am=aP(eO),ag=aP(eT),ab=aP(ek),af((ak=n((aC=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=g.call.apply(g,[this].concat(a)),p(n,"ropePrefab",ak,d(n)),p(n,"collider",aw,d(n)),p(n,"rigidBody",aE,d(n)),n.rope=null,n.onBeginContact=function(i,a){n.rope&&[iq.BEE,iq.THORN,iq.THORN_BALL].includes(a.node.name)&&(n.rope.disconnect(),n.setSpineAnimation(ay.EXPLODE,!1),n.scheduleOnce(function(){n.rigidBody.enabled=!1}))},n}return y(u,[{key:"__preload",value:function(){this.collider=this.getComponent(eT),this.rigidBody=this.getComponent(ek),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"start",value:function(){this.setSpineAnimation(ay.APPEAR,!0),this.collider.on(eR.BEGIN_CONTACT,this.onBeginContact)}},{key:"connectToDoge",value:function(n){var i=Q(this.ropePrefab).getComponent(aA);if(i)return i.headJoint=this.node,i.tailJoint=n,i.node.name=iq.ROPE,this.rope=i,i;console.warn("Balloon: Rope component not found")}}]),u}(an)).prototype,"ropePrefab",[am],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),aw=n(aC.prototype,"collider",[ag],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),aE=n(aC.prototype,"rigidBody",[ab],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),aS=aC))||aS);K._RF.pop(),K._RF.push({},"ca922n1V0RLioEyUJg8hQXH","GameEvents",void 0);var aL=function(n){return n.NEXT_LEVEL="next-level",n.START_OVER="start-over",n.SELECT_LEVEL="select-level",n.GAME_START="game-start",n.GAME_PAUSE="game-pause",n.GAME_RESUME="game-resume",n.GAME_REPLAY="game-replay",n.SHOW_HINT="show-hint",n.SKIP_LEVEL="skip-level",n.TIME_OUT="time-out",n.DRAWING="drawing",n.DOGE_DIE="doge-die",n.DOGE_SURVIVE="doge-survive",n.BEE_DIE="bee-die",n.BEE_ATTACK="bee-attack",n.BIG_BEE_DIE="big-bee-die",n.GAME_OBJECTS_SPAWNED="game-objects-spawned",n}(aL||{});K._RF.pop(),K._RF.push({},"744a5WT+0VHFLma6AT7mXct","NormalBehavior",void 0);var aO=function(){function e(n){r(this,e),this.touchCount=0,this.bee=n,this.timeToAttack=eA.randomRange(.7,.8),this.countTimeToAttack=0}return y(e,[{key:"onBeginContact",value:function(){var n=this;1===this.touchCount&&this.bee.scheduleOnce(function(){n.touchCount>=3&&n.activePusher(),n.touchCount=0},.75),this.touchCount++}},{key:"activePusher",value:function(){this.bee.setRole(iW.PUSHER)}},{key:"update",value:function(n){this.bee.state===iK.ATTACKING&&(this.countTimeToAttack+=n,this.countTimeToAttack>this.timeToAttack&&(this.bee.findTarget(),this.bee.attackTarget(),this.timeToAttack=eA.randomRange(.4,.6),this.countTimeToAttack=0))}}]),e}();K._RF.pop(),K._RF.push({},"ec831BZISdLgp8vKNuRirUM","PusherBehavior",void 0);var aD=function(){function e(n){r(this,e),this.bee=n}return y(e,[{key:"onBeginContact",value:function(){var n=this.bee;if(n.target){var i=eA.randomRange(20,30),a=n.getVectorDataFromAToB(n.node.getWorldPosition(),n.target.getWorldPosition());a.vector.rotate(Math.random()>.5?-Math.PI/2:Math.PI/2).multiplyScalar(i),n.move(a);var r=n.getComponent(eD);r&&(r.density*=1.1,r.density>=2.5&&(r.density=1,n.setRole(iW.NORMAL),n.setState(iK.ATTACKING)))}}}]),e}();K._RF.pop(),K._RF.push({},"19c52/F5VRPcbm2BqdbChIp","BaseBehavior",void 0);var aI,aN,aG,aM,aF,az,ax,aU,aH,aj,aV,aW,aK=function(){function e(n){r(this,e),this.bee=n,this.normalBehavior=new aO(n),this.pusherBehavior=new aD(n),this.seekingPathBehavior=null}return y(e,[{key:"onBeginContact",value:function(n,i){switch(this.bee.role){case iW.NORMAL:this.normalBehavior.onBeginContact();break;case iW.PATH_SEEKER:if(!this.seekingPathBehavior)return void console.warn("Bee: Seeking path behavior is null");this.seekingPathBehavior.onBeginContact(n,i);break;case iW.PUSHER:this.pusherBehavior.onBeginContact()}}},{key:"update",value:function(n){this.updateSpecialRole(n)||this.normalBehavior.update(n)}},{key:"updateSpecialRole",value:function(n){switch(this.bee.role){case iW.PATH_SEEKER:return!!this.seekingPathBehavior&&this.seekingPathBehavior.update(n);default:return!1}}}]),e}();K._RF.pop(),K._RF.push({},"0b146P+xAlN5LGe2MJHlJDc","Bee",void 0);var aq=q.ccclass,aY=q.property,aJ=(aI=aq("Bee"),aN=aY(Y),aG=aY(ew.Skeleton),aM=aY(eT),aF=aY(ek),aI((aU=n((ax=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=g.call.apply(g,[this].concat(a)),p(n,"flipNode",aU,d(n)),p(n,"spriteNode",aH,d(n)),n.target=null,n.isSpawnLeftSide=!1,n.role=iW.NORMAL,n.state=iK.IDLE,n.behavior=new aK(d(n)),n.speed=0,p(n,"collider",aj,d(n)),p(n,"rigidBody",aV,d(n)),p(n,"gameObjects",aW,d(n)),n.wanderingOriginHeight=null,n.isWandering=!1,n.onBeginContact=function(i,a){n.enabled&&(n.rigidBody.linearDamping=eA.randomRangeInt(6,8),a.node.name!==iq.THORN&&a.node.name!==iq.POISON&&a.node.name!==iq.BIG_BEE_BULLET?a.node.name!==iq.WATER?(a.node.name===iq.DOGE&&k.playSound(R.BEE_STING_DOGE,{volume:.3}),n.behavior.onBeginContact(i,a)):n.drown():n.smokeDisappear())},n}return y(u,[{key:"__preload",value:function(){var n;this.collider=this.getComponent(eT),this.rigidBody=this.getComponent(ek),this.gameObjects=null===(n=this.node.parent)||void 0===n?void 0:n.getComponent(li),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"start",value:function(){this.setState(iK.IDLE),this.collider.on(eR.BEGIN_CONTACT,this.onBeginContact),this.collider.enabled=!1}},{key:"followTarget",value:function(n){this.target=n,this.collider.enabled=!0,this.attackTarget()}},{key:"followInstructions",value:function(){this.collider.enabled=!0}},{key:"findTarget",value:function(){var n=this.gameObjects.getNearestDogeToBee(this);n&&!n.isCantBeTargeted()?this.target=n.node:this.target=null}},{key:"smokeDisappear",value:function(){this.preHide(),this.setSpineAnimation(av.SMOKE_DISAPPEAR,!1),this.setState(iK.DIE),this.node.scene.emit(aL.BEE_DIE)}},{key:"flap",value:function(){this.setSpineAnimation(av.FLAP_WINGS,!0)}},{key:"attackTarget",value:function(){var n=this;if(!this.target){if(this.isWandering)return;this.isWandering=!0,this.scheduleOnce(function(){n.isWandering=!1},.5),this.speed=eA.randomRange(40,50);var i=this.node.getWorldPosition();null===this.wanderingOriginHeight&&(this.wanderingOriginHeight=i.y+50),i.x+=eA.randomRange(-300,300),i.y=eA.randomRange(this.wanderingOriginHeight,this.wanderingOriginHeight-50);var a=this.getVectorDataFromAToB(this.node.getWorldPosition(),i);return this.move(a),void(this.rigidBody.linearDamping=0)}this.speed=eA.randomRange(20,30);var r=this.getVectorDataFromAToB(this.node.getWorldPosition(),this.target.getWorldPosition());r.vector.rotate(eA.randomRange(-.3,.3)).multiplyScalar(this.speed),this.move(r),this.rigidBody.linearDamping=0,this.setState(iK.ATTACKING)}},{key:"sleep",value:function(){_(P(u.prototype),"sleep",this).call(this),this.target=null}},{key:"rotateToVector",value:function(n){this.node.angle=eA.toDegree(this.angle(n.x,n.y)),this.node.angle+=180;var i=this.node.angle/360-Math.floor(this.node.angle/360);i>.25&&i<.75?this.flipNode.setScale(new ep(1,-1,1)):this.flipNode.setScale(new ep(1,1,1))}},{key:"move",value:function(n){this.rigidBody.linearVelocity=n.vector,this.rotateToVector({x:n.dx,y:n.dy})}},{key:"fly",value:function(n){this.rigidBody.linearVelocity=n,this.rigidBody.linearDamping=0,this.flap(),this.setState(iK.FLYING)}},{key:"setState",value:function(n){this.state=n}},{key:"setRole",value:function(n){this.role=n}},{key:"update",value:function(n){this.behavior.update(n)}},{key:"drown",value:function(){this.collider.enabled=!1,this.speed=20;var n=this.node.getWorldPosition();n.y=n.y-1e3;var i=this.getVectorDataFromAToB(this.node.getWorldPosition(),n);this.move(i),this.rigidBody.linearDamping=0,this.spriteNode.paused=!0,this.setState(iK.DIE),this.node.scene.emit(aL.BEE_DIE)}},{key:"setSpineAnimation",value:function(n,i){this.spriteNode.setAnimation(0,n,i)}}]),u}(an)).prototype,"flipNode",[aN],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),aH=n(ax.prototype,"spriteNode",[aG],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),aj=n(ax.prototype,"collider",[aM],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),aV=n(ax.prototype,"rigidBody",[aF],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),aW=n(ax.prototype,"gameObjects",[aY],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),az=ax))||az);K._RF.pop(),K._RF.push({},"23d64mdR6VPRoojd1BBKwos","World",void 0);var aX,aZ,aQ,a$,a0,a1=28,a2=1792;K._RF.pop(),K._RF.push({},"5f264eibqlEH7PqbJQqHTF7","Line",void 0);var a3=q.ccclass,a4=q.property,a5=(aX=a3("Line"),aZ=a4(ey),aX((a0=n((a$=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return(n=g.call.apply(g,[this].concat(a))).points=[],n.colliderInterval=20,n.colliders=[],n.colliderTag=0,p(n,"graphic",a0,d(n)),n}return y(u,[{key:"__preload",value:function(){this.graphic=this.getComponent(ey),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"init",value:function(){this.points=[],this.colliders=[],this.colliderTag=0}},{key:"drawTo",value:function(n,i,a,r){this.graphic.moveTo(n,i),this.graphic.lineTo(a,r),this.graphic.stroke()}},{key:"addBody",value:function(n,i){var a=this.node.addComponent(eD);a.offset=new eE(n,i),a.radius=8,a.density=5,a.tag=this.colliderTag,a.apply(),this.colliderTag+=1,this.colliders.push(a)}},{key:"deActiveColliders",value:function(){var n,i=T(this.colliders);try{for(i.s();!(n=i.n()).done;)n.value.enabled=!1}catch(n){i.e(n)}finally{i.f()}}},{key:"storePoints",value:function(n,i){var a=new eE(n,i);this.points.push(a)}},{key:"addPhysics",value:function(){for(var n=0;n<this.points.length-1;n++){var i=this.points[n],a=this.points[n+1],r=this.getInternalPoints(i,a);if(n<this.points.length-2){var p=r.pop();if(!p)return void console.warn("Line: lastPoint not found");this.points[n+1]=p}var d,y=T(r);try{for(y.s();!(d=y.n()).done;){var m,g=d.value,b=!1,S=T(this.colliders);try{for(S.s();!(m=S.n()).done;){var C=m.value;eA.Vec2.distance(g,C.offset)<2*C.radius&&(b=!0)}}catch(n){S.e(n)}finally{S.f()}if(b)return;this.addBody(g.x,g.y)}}catch(n){y.e(n)}finally{y.f()}}var k=this.points[this.points.length-1];k&&this.addBody(k.x,k.y)}},{key:"getInternalPoints",value:function(n,i){for(var a=i.x-n.x,r=i.y-n.y,p=new eE(a,r).normalize().multiplyScalar(this.colliderInterval),d=eA.Vec2.distance(n,i),y=Math.floor(d/this.colliderInterval),m=[n],g=0;g<y;g++){var b=m[m.length-1].clone().add(p);m.push(b)}return m}}]),u}(an)).prototype,"graphic",[aZ],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),aQ=a$))||aQ);K._RF.pop(),K._RF.push({},"afc3eWzi4tHNYb9W7f6QpCX","SeekingPathBehavior",void 0);var a7,a6,a9,a8=function(){function e(n,i){r(this,e),this.isFinishSeeking=!1,this.vectorDataGroup=[],this.index=0,this.bee=n,this.isSeekToLastPoint=i,this.vectorDataGroup=[],this.isFinishSeeking=!1,this.time=.02,this.remaining=0,this.index=0}return y(e,[{key:"seek",value:function(n){var i=this.bee.node.scene.getComponentInChildren(a5);if(!i)return console.warn("Bee: Line is null"),!1;var a=i.colliders.findIndex(function(i){if(i.tag===n.tag)return!0});if(-1===a)return!1;this.vectorDataGroup=[],this.isFinishSeeking=!1,this.time=.04,this.remaining=0,this.index=0;var r=this.bee.speed;return r||(r=eA.randomRange(20,30)),this.isSeekToLastPoint?this.seekToLastPoint(a,i,r):this.seekToFirstPoint(a,i,r),!0}},{key:"seekToLastPoint",value:function(n,i,a){for(var r=n;r<i.colliders.length-1;r++){var p=i.colliders[r],d=i.colliders[r+1],y=this.bee.getVectorDataFromAToB(p.worldPosition,d.worldPosition);y.vector.multiplyScalar(a),this.vectorDataGroup.push(y)}}},{key:"seekToFirstPoint",value:function(n,i,a){for(var r=n;r>0;r--){var p=i.colliders[r],d=i.colliders[r-1],y=this.bee.getVectorDataFromAToB(p.worldPosition,d.worldPosition);y.vector.multiplyScalar(a),this.vectorDataGroup.push(y)}}},{key:"flyToNextDirection",value:function(){var n=this.vectorDataGroup[this.index];if(this.index+=1,!n)return this.isFinishSeeking=!0,this.bee.setRole(iW.NORMAL),void this.bee.setState(iK.ATTACKING);this.bee.move(n)}},{key:"fly",value:function(n){this.remaining+=n,this.remaining>this.time&&(this.flyToNextDirection(),this.time=.02,this.remaining=0)}},{key:"onBeginContact",value:function(n,i){if(this.bee.state===iK.SEEKING_PATH&&i.node.name!==iq.DRAW_LINE)return this.isFinishSeeking=!0,this.bee.setRole(iW.NORMAL),void this.bee.setState(iK.ATTACKING);this.isFinishSeeking||this.bee.state===iK.WAITING_TO_SEEK_PATH||i.node.name!==iq.DRAW_LINE||this.handlePathSeekerTouchLine(i)}},{key:"handlePathSeekerTouchLine",value:function(n){var i=this;this.seek(n)&&this.bee.state!==iK.SEEKING_PATH&&(this.bee.setState(iK.WAITING_TO_SEEK_PATH),this.bee.scheduleOnce(function(){i.bee.setState(iK.SEEKING_PATH)},.3))}},{key:"update",value:function(n){return this.bee.state===iK.SEEKING_PATH&&(this.fly(n),!0)}}]),e}();K._RF.pop(),K._RF.push({},"2181aAj+ElOoL2tBGH10euY","Beehive",void 0);var oe,ot,on,oi,oa,oo,or,os,ol,ou,oc,oh=q.ccclass,op=q.property,od=oh("Beehive")((a9=n((a6=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return(n=g.call.apply(g,[this].concat(a))).totalPathSeekers=0,n.isSeekToLastPoint=!0,p(n,"gameObjects",a9,d(n)),n}return y(u,[{key:"onLoad",value:function(){var n;this.gameObjects=null===(n=this.node.parent)||void 0===n?void 0:n.getComponent(li),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"releaseBee",value:function(n){var i=this;this.updateTotalPathSeekers(),this.scheduleOnce(function(){var a=n.getComponent(aJ);if(a){i.createPathSeeker(a),"isRightSide"in i.node&&!0===i.node.isRightSide?i.spawnInRightSide(a):i.spawnInLeftSide(a),a.wake();var r=i.gameObjects.getRandomDogeToBee();r&&i.scheduleOnce(function(){return a.followTarget(r.node)},.2)}},eA.randomRange(.1,.4))}},{key:"updateTotalPathSeekers",value:function(){"totalPathSeekers"in this.node&&"number"==typeof this.node.totalPathSeekers&&(this.totalPathSeekers=this.node.totalPathSeekers)}},{key:"spawnInLeftSide",value:function(n){var i=this.node.getPosition(),a=i.x,r=i.y,p=eA.randomRangeInt(-10,0),d=eA.randomRangeInt(38,48);n.isSpawnLeftSide=!0,n.node.setScale(new ep(1,1,1)),n.node.setPosition(a+p,r+d),n.fly(new eE(-2,-1).normalize().multiplyScalar(2))}},{key:"spawnInRightSide",value:function(n){var i=this.node.getPosition(),a=i.x,r=i.y,p=eA.randomRangeInt(0,10),d=eA.randomRangeInt(38,48);n.isSpawnLeftSide=!1,n.node.setScale(new ep(1,1,1)),n.node.setPosition(a+p,r+d),n.fly(new eE(2,-1).normalize().multiplyScalar(2))}},{key:"createPathSeeker",value:function(n){0!==this.totalPathSeekers&&(n.setRole(iW.PATH_SEEKER),n.behavior.seekingPathBehavior=new a8(n,this.isSeekToLastPoint),this.isSeekToLastPoint=!this.isSeekToLastPoint,this.totalPathSeekers-=1)}}]),u}(an)).prototype,"gameObjects",[op],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),a7=a6))||a7;K._RF.pop(),K._RF.push({},"a17a07Pu/tAGb4MdM3jxHke","BigBeeBullet",void 0);var ov,oy,of,om,og,ob,oS,oC,ok,ow,oE,oT,oR=q.ccclass,oA=q.property,o_=(oe=oR("BigBeeBullet"),ot=oA(el),on=oA(ew.Skeleton),oi=oA(eT),oa=oA(ek),oe((os=n((or=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=g.call.apply(g,[this].concat(a)),p(n,"stinger",os,d(n)),p(n,"ci",ol,d(n)),p(n,"collider",ou,d(n)),p(n,"rigidBody",oc,d(n)),n.onBeginContact=function(){n.stinger.active=!1,n.ci.active=!0;var i=n.ci.getComponent(ew.Skeleton);i?(i.enabled=!0,i.setAnimation(0,"animation",!1),k.playSound(R.BEE_BULLET_EXPLODE,{allowMultiple:!0}),i.setCompleteListener(function(){n.kill()})):console.warn("BigBeeBullet: ske not found")},n}return y(u,[{key:"onLoad",value:function(){this.collider=this.getComponent(eT),this.rigidBody=this.getComponent(ek),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"start",value:function(){this.revive()}},{key:"revive",value:function(){_(P(u.prototype),"revive",this).call(this),this.stinger.active=!0,this.ci.active=!1,this.ci.getComponent(ew.Skeleton).enabled=!1,this.collider.once(eR.BEGIN_CONTACT,this.onBeginContact)}},{key:"kill",value:function(){_(P(u.prototype),"kill",this).call(this),this.stinger.active=!1,this.ci.active=!1}},{key:"forwardToDoge",value:function(n){var i=eA.randomRange(20,30),a=this.getVectorDataFromAToB(this.node.getWorldPosition(),n.getWorldPosition());a.vector.rotate(eA.randomRange(-.3,.3)).multiplyScalar(i),this.rigidBody.linearVelocity=a.vector,this.node.angle=eA.toDegree(this.angle(a.dx,a.dy))}}]),u}(an)).prototype,"stinger",[ot],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ol=n(or.prototype,"ci",[on],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ou=n(or.prototype,"collider",[oi],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),oc=n(or.prototype,"rigidBody",[oa],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),oo=or))||oo);K._RF.pop(),K._RF.push({},"2b15b1CihdEf60Zy/wIYirK","BigBee",void 0);var oP,oB,oL,oO,oD,oI,oN,oG,oM=q.ccclass,oF=q.property,oz=(ov=oM("BigBee"),oy=oF(eO),of=oF(ew.Skeleton),om=oF(eD),og=oF(ek),ov((oC=n((oS=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=g.call.apply(g,[this].concat(a)),p(n,"bulletPrefab",oC,d(n)),n.state=iK.IDLE,n.target=null,n.bulletPool=[],n.timeToAttack=0,n.countTimeToAttack=0,p(n,"skeleton",ok,d(n)),p(n,"gameObjects",ow,d(n)),p(n,"collider",oE,d(n)),p(n,"rigidBody",oT,d(n)),n.onBeginContact=function(i,a){n.enabled&&(a.node.name!==iq.THORN&&a.node.name!==iq.POISON||n.smokeDisappear())},n}return y(u,[{key:"onLoad",value:function(){var n;this.skeleton=this.getComponent(ew.Skeleton),this.gameObjects=null===(n=this.node.parent)||void 0===n?void 0:n.getComponent(li),this.collider=this.getComponent(eD),this.rigidBody=this.getComponent(ek),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"start",value:function(){this.node.setScale(new ep(.7,.7,.7)),this.timeToAttack=eA.randomRange(1,2),this.countTimeToAttack=0,this.createBulletPool(),this.initDustParticle();var n=this.gameObjects.getRandomDogeToBee();n?(this.target=n.node,this.state=iK.FLYING,this.collider.on(eR.BEGIN_CONTACT,this.onBeginContact)):console.warn("BigBee: Target not found")}},{key:"update",value:function(n){this.state===iK.ATTACKING&&(this.countTimeToAttack+=n,this.countTimeToAttack>this.timeToAttack&&(this.attackTarget(),this.timeToAttack=eA.randomRange(1,2),this.countTimeToAttack=0))}},{key:"createBulletPool",value:function(n){var i=arguments.length>0&&void 0!==n?n:5;this.bulletPool=[];for(var a=0;a<i;a++)this.createBullet()}},{key:"initDustParticle",value:function(){var n=this;if(this.node.parent){var i=new Y(iq.DUST_PARTICLE);i.layer=Math.pow(2,25),i.active=!1;var a=i.addComponent(ew.Skeleton);eI.load(i4.DUST_PARTICLE_SPINE,ew.SkeletonData,function(i,r){i?console.error("initDustParticle",i):n.node.isValid&&(a.skeletonData=r)}),this.node.parent.addChild(i),this.dustParticle=i}}},{key:"createDust",value:function(){var n=this;if(this.dustParticle){this.dustParticle.active=!0;var i=this.node.getWorldPosition(),a=i.x,r=i.y;this.dustParticle.setWorldPosition(new ep(a,r));var p=this.dustParticle.getComponent(ew.Skeleton);null==p||p.setAnimation(0,"animation",!1),this.scheduleOnce(function(){n.dustParticle&&(n.dustParticle.active=!1)},.5)}}},{key:"createBullet",value:function(){if(!this.node.parent)return console.warn("BigBee: Parent not found"),null;var n=Q(this.bulletPrefab),i=n.getComponent(o_);return n.name=iq.BIG_BEE_BULLET,i&&i.kill(),this.node.parent.addChild(n),this.bulletPool.push(n),n}},{key:"smokeDisappear",value:function(){this.hide(),this.createDust(),this.state=iK.DIE,this.node.scene.emit(aL.BIG_BEE_DIE)}},{key:"sleep",value:function(){}},{key:"wake",value:function(){}},{key:"hide",value:function(){this.enabled=!1,this.rigidBody.sleep(),this.skeleton.enabled=!1}},{key:"preHide",value:function(){}},{key:"appear",value:function(){}},{key:"setSpineAnimation",value:function(n,i){}},{key:"attackTarget",value:function(){var n=this;this.skeleton.setAnimation(0,"attack",!1),this.skeleton.setCompleteListener(function(){n.skeleton.setAnimation(0,"fly",!0)}),this.scheduleOnce(function(){if(n.target){var i=n.bulletPool.filter(function(n){return!1===n.active})[0];if(i||(i=n.createBullet())){var a=i.getComponent(o_);if(a){a.revive();var r=n.node.getPosition(),p=r.x,d=r.y;i.setPosition(p,d),a.forwardToDoge(n.target)}else console.warn("BigBee: Bullet component not found")}}else console.warn("BigBee: Target not found")},.5)}}]),u}(an)).prototype,"bulletPrefab",[oy],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ok=n(oS.prototype,"skeleton",[of],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ow=n(oS.prototype,"gameObjects",[oF],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),oE=n(oS.prototype,"collider",[om],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),oT=n(oS.prototype,"rigidBody",[og],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ob=oS))||ob);K._RF.pop(),K._RF.push({},"8e16aARuABAK56lFGhIfeH+","Brick",void 0);var ox,oU,oH,oj,oV,oW=q.ccclass,oK=q.property,oq=q.requireComponent,oY=(oP=oW("Brick"),oB=oq([eN]),oL=oK({tooltip:"Use batch draw all bricks"}),oO=oK(el),oP(oD=oB((oN=n((oI=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=g.call.apply(g,[this].concat(a)),p(n,"useBatch",oN,d(n)),p(n,"sprite",oG,d(n)),n.brickPolygons=[],n}return y(u,[{key:"__preload",value:function(){this.mask=this.getComponent(eN),this.graphic=this.getComponent(ey),this.polygonCollider=this.getComponent(eG),this.validateRequiredComponents(),this.listenGameplayEvents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"listenGameplayEvents",value:function(){}},{key:"addBrickPolygon",value:function(n){this.brickPolygons.push(n)}},{key:"onLoad",value:function(){var n=this.getPolygon();n&&(this.useBatch?(this.mask.enabled=!1,this.graphic.enabled=!1,this.addBrickPolygon(n)):(this.updateTransform(n),this.drawMask(n),this.applyCollider(n)))}},{key:"getPolygon",value:function(){if(!("polygon"in this.node))return null;var n=this.node.polygon;return Array.isArray(n)?n:null}},{key:"updateTransform",value:function(n){var i=this.calculatePolygonDimensions(n),a=i.width,r=i.height;this.setPosition(0,0),this.setContentSize(a,r)}},{key:"setPosition",value:function(n,i){this.node.setPosition(n,i)}},{key:"setContentSize",value:function(n,i){var a=this.sprite.getComponent(Z);a&&a.setContentSize(n,i)}},{key:"updateContentSizeForBatchDraw",value:function(){var n=this.brickPolygons.map(function(n){return n.map(function(n){var i=n.x,a=n.y;return new eE(i,a)})}).flat(),i=this.calculatePolygonDimensions(n),a=i.width,r=i.height,p=this.calculateSpritePositionForBatchDraw(n),d=this.sprite.getComponent(Z);if(d){d.setContentSize(a,r);var y=this.sprite.getComponent(el);y&&y.node.setPosition(p.x,p.y)}}},{key:"calculateSpritePositionForBatchDraw",value:function(n){for(var i=n[0].x,a=n[0].x,r=n[0].y,p=n[0].y,d=1;d<n.length;d++){var y=n[d],m=y.x,g=y.y;m<i?i=m:m>a&&(a=m),g<r?r=g:g>p&&(p=g)}return{x:i,y:r}}},{key:"calculatePolygonDimensions",value:function(n){for(var i=n[0].x,a=n[0].x,r=n[0].y,p=n[0].y,d=1;d<n.length;d++){var y=n[d],m=y.x,g=y.y;m<i?i=m:m>a&&(a=m),g<r?r=g:g>p&&(p=g)}return{width:Math.abs(a-i),height:Math.abs(p-r)}}},{key:"drawMask",value:function(n){this.graphic.moveTo(n[0].x,n[0].y);var i,a=T(n);try{for(a.s();!(i=a.n()).done;){var r=i.value;this.graphic.lineTo(r.x,r.y)}}catch(n){a.e(n)}finally{a.f()}this.graphic.close(),this.graphic.fill()}},{key:"batchDrawAllBrick",value:function(){if(!(this.brickPolygons.length<1)){this.mask.enabled=!0,this.graphic.enabled=!0,this.updateContentSizeForBatchDraw();var n,i=T(this.brickPolygons);try{for(i.s();!(n=i.n()).done;){var a=n.value;this.drawMask(a)}}catch(n){i.e(n)}finally{i.f()}this.applyColliderForBatchDraw(),this.brickPolygons=[]}}},{key:"applyCollider",value:function(n){this.polygonCollider.points=n.map(function(n){var i=n.x,a=n.y;return new eE(i,a)}),this.polygonCollider.apply()}},{key:"applyColliderForBatchDraw",value:function(){var n,i=this.brickPolygons.map(function(n){return n.map(function(n){var i=n.x,a=n.y;return new eE(i,a)})}),a=T(i);try{for(a.s();!(n=a.n()).done;){var r=n.value,p=new Y;p.name=iq.BRICK,this.node.addChild(p),p.setPosition(0,0);var d=p.addComponent(ek);d.type=eC.Static,d.group=i2.MAIN_OBJECT;var y=p.addComponent(eG);y.points=r,y.apply()}}catch(n){a.e(n)}finally{a.f()}}}]),u}(ea)).prototype,"useBatch",[oL],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),oG=n(oI.prototype,"sprite",[oO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),oD=oI))||oD)||oD);K._RF.pop(),K._RF.push({},"46fa0f/kl1Heo/JvM2kAEAf","GraphicsPattern",void 0);var oJ,oX,oZ,oQ,o$,o0,o1,o2,o3,o4,o5,o7,o6=q.ccclass,o9=q.property,o8=(ox=o6("GraphicsPattern"),oU=o9(ey),ox((oV=n((oj=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=g.call.apply(g,[this].concat(a)),p(n,"graphic",oV,d(n)),n}return y(u,[{key:"onLoad",value:function(){this.graphic=this.getComponent(ey),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"start",value:function(){}},{key:"sleep",value:function(){}},{key:"draw",value:function(n){this.graphic.moveTo(n[0].x,n[0].y);var i,a=T(n);try{for(a.s();!(i=a.n()).done;){var r=i.value;this.graphic.lineTo(r.x,r.y)}}catch(n){a.e(n)}finally{a.f()}this.graphic.close(),this.graphic.fill()}},{key:"applyCollider",value:function(n){var i=this.getComponent(eG);i?(i.points=n.map(function(n){var i=n.x,a=n.y;return new eE(i,a)}),i.apply()):console.warn("GraphicsPattern: PolygonCollider2D not found")}},{key:"setColor",value:function(n){var i=new J;J.fromHEX(i,n),this.graphic.fillColor=i}}]),u}(an)).prototype,"graphic",[oU],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),oH=oj))||oH);K._RF.pop(),K._RF.push({},"959bd9NhYpMTK0O78HSl4rc","Pattern",void 0);var re,rt=q.ccclass,rn=q.property,ri=q.requireComponent,ra=(oJ=rt("Pattern"),oX=ri([ey,eG,ek]),oZ=rn(el),oQ=rn(ey),o$=rn(ek),o0=rn(eG),oJ(o1=oX((o3=n((o2=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=g.call.apply(g,[this].concat(a)),p(n,"sprite",o3,d(n)),p(n,"graphic",o4,d(n)),p(n,"rigidBody",o5,d(n)),p(n,"polygonCollider",o7,d(n)),n}return y(u,[{key:"onLoad",value:function(){this.graphic=this.getComponent(ey),this.rigidBody=this.getComponent(ek),this.polygonCollider=this.getComponent(eG),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"start",value:function(){}},{key:"draw",value:function(n){var i=this.sprite.getComponent(Z);if(i){var a=this.getBottomLeftPosition(n),r=a.x,p=a.y,d=this.getTopRightPosition(n),y=d.x,m=d.y;i.setContentSize(y-r,m-p),i.node.setPosition(r,p),this.graphic.moveTo(n[0].x,n[0].y);var g,b=T(n);try{for(b.s();!(g=b.n()).done;){var S=g.value;this.graphic.lineTo(S.x,S.y)}}catch(n){b.e(n)}finally{b.f()}this.graphic.close(),this.graphic.fill()}}},{key:"savePolygonPoints",value:function(n){this.points=n}},{key:"getPolygonPoints",value:function(){return this.points}},{key:"applyCollider",value:function(n){this.polygonCollider.points=n.map(function(n){var i=n.x,a=n.y;return new eE(i,a)}),this.polygonCollider.apply()}},{key:"setRigidBodyType",value:function(n){this.rigidBody.type=n}},{key:"getBottomLeftPosition",value:function(n){var i,a=n[0].x,r=n[0].y,p=T(n);try{for(p.s();!(i=p.n()).done;){var d=i.value;a>d.x&&(a=d.x),r>d.y&&(r=d.y)}}catch(n){p.e(n)}finally{p.f()}return{x:a,y:r}}},{key:"getTopRightPosition",value:function(n){var i,a=n[0].x,r=n[0].y,p=T(n);try{for(p.s();!(i=p.n()).done;){var d=i.value;a<d.x&&(a=d.x),r<d.y&&(r=d.y)}}catch(n){p.e(n)}finally{p.f()}return{x:a,y:r}}}]),u}(an)).prototype,"sprite",[oZ],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),o4=n(o2.prototype,"graphic",[oQ],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),o5=n(o2.prototype,"rigidBody",[o$],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),o7=n(o2.prototype,"polygonCollider",[o0],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),o1=o2))||o1)||o1);K._RF.pop(),K._RF.push({},"a08960ZMBtFcLD/1nWNbAM9","Poison",void 0);var ro,rr=q.ccclass,rs=q.requireComponent,rl=rr("Poison")(re=rs([o8])(re=function(n){i(o,n);var p=a(o);function o(){var n;r(this,o);for(var i=arguments.length,a=new Array(i),d=0;d<i;d++)a[d]=arguments[d];return(n=p.call.apply(p,[this].concat(a))).polygon=[],n.useBatch=!1,n.poisonPolygons=[],n.bubbleFrame=null,n.bubblePool=null,n.remaining=0,n.maxPoolSize=0,n.totalBubble=0,n}return y(o,[{key:"onLoad",value:function(){var n;this.graphicPattern=this.getComponent(o8),this.gameObjects=null===(n=this.node.parent)||void 0===n?void 0:n.getComponent(li),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"start",value:function(){this.addRigidBody(),this.useBatch||(this.addPolygonCollider(),this.drawPattern(),this.loadCircleFrame(),this.setTimeSpawnBubble(.2))}},{key:"addPoisonPolygon",value:function(n){this.poisonPolygons.push(n)}},{key:"batchDrawAllPoisonPools",value:function(){if(!(this.poisonPolygons.length<1)){this.graphicPattern.setColor("#774798d1");var n,i=T(this.poisonPolygons);try{for(i.s();!(n=i.n()).done;){var a=n.value;this.graphicPattern.draw(a)}}catch(n){i.e(n)}finally{i.f()}this.applyColliderForBatchDraw(),this.loadCircleFrame(),this.setTimeSpawnBubble(.2)}}},{key:"applyColliderForBatchDraw",value:function(){var n,i=this.poisonPolygons.map(function(n){return n.map(function(n){var i=n.x,a=n.y;return new eE(i,a)})}),a=T(i);try{for(a.s();!(n=a.n()).done;){var r=n.value,p=new Y;p.name=iq.POISON,this.node.addChild(p),p.setPosition(0,0);var d=p.addComponent(ek);d.group=i2.MAIN_OBJECT,d.type=eC.Static;var y=p.addComponent(eG);y.points=r,y.sensor=!0,y.apply()}}catch(n){a.e(n)}finally{a.f()}}},{key:"addRigidBody",value:function(){var n=this.addComponent(ek);n?(n.group=i2.MAIN_OBJECT,n.type=eC.Static):console.warn("Cannot add RigidBody2D")}},{key:"addPolygonCollider",value:function(){var n=this.addComponent(eG);n?n.sensor=!0:console.warn("Cannot add PolygonCollider2D")}},{key:"drawPattern",value:function(){this.graphicPattern.setColor("#774798d1"),this.graphicPattern.draw(this.polygon),this.graphicPattern.applyCollider(this.polygon)}},{key:"loadCircleFrame",value:function(){var n=this;B.loadSpriteFrameAsync(i4.POISON_CIRCLE_FRAME).then(function(i){if(n.node.isValid){if(!i)throw new Error("loadCircleFrame: SpriteFrame not found");n.bubbleFrame=i;var a=n.useBatch?20*n.poisonPolygons.length:20;n.initPool(10,a)}}).catch(function(n){console.error("loadCircleFrame",n)})}},{key:"initPool",value:function(n,i){this.bubblePool=new eM,this.maxPoolSize=i;for(var a=0;a<n;a++)this.spawnBubble()}},{key:"setTimeSpawnBubble",value:function(n){this.remaining=n}},{key:"spawnBubble",value:function(){if(!this.bubblePool)return null;if(this.totalBubble>=this.maxPoolSize)return null;var n=null;return this.bubblePool.size()>0?n=this.bubblePool.get():(n=new Y(iq.POISON_BUBBLE),this.initBubble(n),this.killBubble(n),this.bubblePool.put(n)),n?(this.gameObjects.addObject(n),this.totalBubble+=1,n):null}},{key:"releaseBubble",value:function(n){this.bubblePool&&(this.killBubble(n),this.bubblePool.put(n),this.totalBubble-=1)}},{key:"killBubble",value:function(n){if(n){var i=n.getComponent(el);i&&(i.enabled=!1)}}},{key:"reviveBubble",value:function(n,i){var a=this.getPosition(i),r=a.minX,p=a.minY,d=a.maxX,y=eA.randomRange(r,d),m=n.getComponent(ev);m?m.opacity=125:console.warn("UIOpacity not found in bubble");var g=n.getComponent(el);g&&(g.enabled=!0),n.setPosition(new ep(y,p))}},{key:"initBubble",value:function(n){n.layer=this.node.layer,n.addComponent(el).spriteFrame=this.bubbleFrame,n.addComponent(ev)}},{key:"update",value:function(n){if(this.remaining-=n,this.remaining<=0){if(!this.useBatch){var i=this.spawnBubble();if(!i)return;this.reviveBubble(i,this.polygon),this.playBubbleTween(i,this.polygon);var a=eA.randomRange(.3,.5);return void this.setTimeSpawnBubble(a)}var r,p=eA.randomRange(.3,.5),d=T(this.poisonPolygons);try{for(d.s();!(r=d.n()).done;){var y=r.value,m=this.spawnBubble();if(!m)return;this.reviveBubble(m,y),this.playBubbleTween(m,y)}}catch(n){d.e(n)}finally{d.f()}this.setTimeSpawnBubble(p)}}},{key:"playBubbleTween",value:function(n,i){var a=this;if(n){var r=this.getPosition(i),p=r.minY,d=r.maxY,y=n.getPosition(),m=eA.randomRange(80,120),g=Math.abs(d-p),b=y.x,S=y.y+(d-p)-10,C=g/m;eF(n).to(C,{position:new ep(b,S)},{easing:"smooth"}).start();var k=n.getComponent(ev);if(k){var w=C-.4>0?.4:C;k.opacity=160,eF(k).delay(C-w).to(w,{opacity:0},{easing:"smooth"}).start()}else console.warn("UIOpacity not found in bubble");this.scheduleOnce(function(){a.releaseBubble(n)},C)}}},{key:"getPosition",value:function(n){var i,a=1e4,r=0,p=1e4,d=0,y=T(n);try{for(y.s();!(i=y.n()).done;){var m=i.value,g=m.x,b=m.y;g<a&&(a=g),g>r&&(r=g),b<p&&(p=b),b>d&&(d=b)}}catch(n){y.e(n)}finally{y.f()}return{minX:a+=20,minY:p+=13,maxX:r-=20,maxY:d-=13}}}]),o}(ea))||re)||re;K._RF.pop(),K._RF.push({},"8633c11nMJN7I7TAFaGu3Fg","PoisonSurface",void 0);var ru,rc=(0,q.ccclass)("PoisonSurface")(ro=function(n){i(o,n);var p=a(o);function o(){var n;r(this,o);for(var i=arguments.length,a=new Array(i),d=0;d<i;d++)a[d]=arguments[d];return(n=p.call.apply(p,[this].concat(a))).poisonBubblePrefab=null,n.polygon=[],n.useBatch=!1,n.surfacePolygon=[],n.bubblePool=null,n.remaining=0,n.maxPoolSize=0,n.totalBubble=0,n}return y(o,[{key:"onLoad",value:function(){var n;this.graphicPattern=this.getComponent(o8),this.gameObjects=null===(n=this.node.parent)||void 0===n?void 0:n.getComponent(li),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"start",value:function(){this.useBatch||(this.drawPattern(),this.loadBubbleFrame())}},{key:"drawPattern",value:function(){this.graphicPattern.setColor("#9757bcb0"),this.graphicPattern.draw(this.polygon)}},{key:"addPoisonSurfacePolygon",value:function(n){this.surfacePolygon.push(n)}},{key:"batchDrawAllPoisonSurfaces",value:function(){if(!(this.surfacePolygon.length<1)){this.graphicPattern.setColor("#9757bcb0");var n,i=T(this.surfacePolygon);try{for(i.s();!(n=i.n()).done;){var a=n.value;this.graphicPattern.draw(a)}}catch(n){i.e(n)}finally{i.f()}this.loadBubbleFrame()}}},{key:"loadBubbleFrame",value:function(){var n=this;B.loadPrefabAsync(i4.POISON_BUBBLE_PREFAB).then(function(i){if(n.node.isValid){if(!i)throw new Error("loadBubbleFrame: Prefab is null");n.poisonBubblePrefab=i;var a=n.useBatch?12*n.surfacePolygon.length:12;n.initPool(10,a),n.setTimeSpawnBubble(.3)}}).catch(function(n){console.error("loadBubbleFrame",n)})}},{key:"update",value:function(n){if(this.remaining-=n,this.remaining<=0){if(!this.useBatch){var i=this.spawnPoisonBubblePop();if(!i)return;this.reviveBubble(i,this.polygon);var a=eA.randomRange(.3,.5);return void this.setTimeSpawnBubble(a)}var r,p=eA.randomRange(.3,.5),d=T(this.surfacePolygon);try{for(d.s();!(r=d.n()).done;){var y=r.value,m=this.spawnPoisonBubblePop();if(!m)return;this.reviveBubble(m,y)}}catch(n){d.e(n)}finally{d.f()}this.setTimeSpawnBubble(p)}}},{key:"initPool",value:function(n,i){this.bubblePool=new eM,this.maxPoolSize=i;for(var a=0;a<n;a++)this.spawnPoisonBubblePop()}},{key:"setTimeSpawnBubble",value:function(n){this.remaining=n}},{key:"spawnPoisonBubblePop",value:function(){if(!this.bubblePool)return null;if(this.totalBubble>=this.maxPoolSize)return null;var n=null;if(this.bubblePool.size()>0)n=this.bubblePool.get();else{if(!_instanceof(n=Q(this.poisonBubblePrefab),Y))return null;this.bubblePool.put(n)}return n?(n.name=iq.POISON_SURFACE,this.gameObjects.addObject(n),this.totalBubble+=1,n):null}},{key:"releasePoisonBubblePop",value:function(n){this.bubblePool&&(this.bubblePool.put(n),this.totalBubble-=1)}},{key:"reviveBubble",value:function(n,i){var a=this;if(n){var r=this.getRandomPosition(i),p=r.x,d=r.y;n.setPosition(new ep(p,d));var y=n.getComponent(ew.Skeleton);y&&(y.setAnimation(0,"animation",!1),y.setCompleteListener(function(){a.releasePoisonBubblePop(n)}))}}},{key:"getRandomPosition",value:function(n){var i,a=1e4,r=0,p=1e4,d=0,y=T(n);try{for(y.s();!(i=y.n()).done;){var m=i.value,g=m.x,b=m.y;g<a&&(a=g),g>r&&(r=g),b<p&&(p=b),b>d&&(d=b)}}catch(n){y.e(n)}finally{y.f()}return{x:eA.randomRange(a+25,r-25),y:eA.randomRange(p+5,d-5)}}}]),o}(ea))||ro;K._RF.pop(),K._RF.push({},"9aa6cp2xqhK1LJeA0kz2hWR","Water",void 0);var rh=q.ccclass,rp=q.requireComponent,rd=rh("Water")(ru=rp([o8])(ru=function(n){i(o,n);var p=a(o);function o(){var n;r(this,o);for(var i=arguments.length,a=new Array(i),d=0;d<i;d++)a[d]=arguments[d];return(n=p.call.apply(p,[this].concat(a))).polygon=[],n.useBatch=!1,n.waterPolygon=[],n}return y(o,[{key:"onLoad",value:function(){this.graphicPattern=this.getComponent(o8),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"start",value:function(){this.addRigidBody(),this.useBatch||(this.addPolygonCollider(),this.drawPattern())}},{key:"addWaterPolygon",value:function(n){this.waterPolygon.push(n)}},{key:"batchDrawAllWater",value:function(){if(!(this.waterPolygon.length<1)){this.graphicPattern.setColor("#58cef0d0");var n,i=T(this.waterPolygon);try{for(i.s();!(n=i.n()).done;){var a=n.value;this.graphicPattern.draw(a)}}catch(n){i.e(n)}finally{i.f()}this.applyColliderForBatchDraw()}}},{key:"applyColliderForBatchDraw",value:function(){var n,i=this.waterPolygon.map(function(n){return n.map(function(n){var i=n.x,a=n.y;return new eE(i,a)})}),a=T(i);try{for(a.s();!(n=a.n()).done;){var r=n.value,p=new Y;p.name=iq.WATER,this.node.addChild(p),p.setPosition(0,0);var d=p.addComponent(ek);d.group=i2.MAIN_OBJECT,d.type=eC.Static;var y=p.addComponent(eG);y.points=r,y.sensor=!0,y.apply()}}catch(n){a.e(n)}finally{a.f()}}},{key:"addRigidBody",value:function(){var n=this.addComponent(ek);n?(n.group=i2.MAIN_OBJECT,n.type=eC.Static):console.warn("Cannot add RigidBody2D")}},{key:"addPolygonCollider",value:function(){var n=this.addComponent(eG);n?n.sensor=!0:console.warn("Cannot add PolygonCollider2D")}},{key:"drawPattern",value:function(){this.graphicPattern.setColor("#58cef0d0"),this.graphicPattern.draw(this.polygon),this.graphicPattern.applyCollider(this.polygon)}}]),o}(ea))||ru)||ru;K._RF.pop(),K._RF.push({},"d6e4emyi1lPpLbSlAWFj/GD","CrossingBeeLineTypes",void 0);var rv,ry,rf,rm,rg,rb,rS,rC,rk,rw,rE,rT,rR,rA,r_=function(n){return n[n.LOW=0]="LOW",n[n.MEDIUM=1]="MEDIUM",n[n.HIGH=2]="HIGH",n}(r_||{});ez(r_),K._RF.pop(),K._RF.push({},"988b72EAIhJ1qc0nrLU68l7","CrossingBeeLine",void 0);var rP=q.ccclass,rB=q.property,rL=q.requireComponent,rO=(rv=rP("CrossingBeeLine"),ry=rL([el,Z]),rf=rB(e_),rm=rB(e_),rg=rB(e_),rb=rB({type:r_,displayName:"Sprite type"}),rS=rB({type:ex,displayName:"Line thickness",min:0}),rv(rC=ry((rw=n((rk=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=g.call.apply(g,[this].concat(a)),p(n,"spriteLow",rw,d(n)),p(n,"spriteMedium",rE,d(n)),p(n,"spriteHigh",rT,d(n)),p(n,"spriteType",rR,d(n)),p(n,"lineThickness",rA,d(n)),n.startPos=new ep,n.endPos=new ep,n}return y(u,[{key:"setStartPosition",value:function(n,i,a){var r=arguments.length>1&&void 0!==i?i:this.startPos.x,p=arguments.length>2&&void 0!==a?a:this.startPos.z;this.startPos.set(n,r,p),this.updateLine()}},{key:"setEndPosition",value:function(n,i,a){var r=arguments.length>1&&void 0!==i?i:this.endPos.y,p=arguments.length>2&&void 0!==a?a:this.endPos.z;this.endPos.set(n,r,p),this.updateLine()}},{key:"updateLine",value:function(){this.updateContentSize(),this.updatePosition(),this.updateRotation()}},{key:"thickness",get:function(){return this.lineThickness},set:function(n){this.lineThickness=n,this.updateContentSize()}},{key:"setSpriteType",value:function(n){switch(this.spriteType=n,n){case r_.LOW:this.sprite.spriteFrame=this.spriteLow;break;case r_.MEDIUM:this.sprite.spriteFrame=this.spriteMedium;break;case r_.HIGH:this.sprite.spriteFrame=this.spriteHigh}}},{key:"onLoad",value:function(){this.uiTransform=this.getComponent(Z),this.sprite=this.getComponent(el),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"start",value:function(){this.setSpriteType(this.spriteType),this.updateContentSize(),this.updatePosition(),this.updateRotation()}},{key:"updateContentSize",value:function(){var n=this.endPos.x-this.startPos.x,i=this.endPos.y-this.startPos.y,a=this.endPos.z-this.startPos.z,r=Math.sqrt(n*n+i*i+a*a);this.uiTransform.setContentSize(r,this.lineThickness)}},{key:"updatePosition",value:function(){this.uiTransform.setAnchorPoint(.5,.5),this.node.setWorldPosition((this.startPos.x+this.endPos.x)/2,(this.startPos.y+this.endPos.y)/2,(this.startPos.z+this.endPos.z)/2)}},{key:"updateRotation",value:function(){this.node.setWorldRotationFromEuler(0,0,180*Math.atan2(this.endPos.y-this.startPos.y,this.endPos.x-this.startPos.x)/Math.PI)}}]),u}(ea)).prototype,"spriteLow",[rf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rE=n(rk.prototype,"spriteMedium",[rm],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rT=n(rk.prototype,"spriteHigh",[rg],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rR=n(rk.prototype,"spriteType",[rb],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return r_.LOW}}),rA=n(rk.prototype,"lineThickness",[rS],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),rC=rk))||rC)||rC);K._RF.pop(),K._RF.push({},"169a1O0ruFLoI6OnJUZap7V","DogeState",void 0);var rD,rI=function(n){return n[n.IDLE=0]="IDLE",n[n.SMILE=1]="SMILE",n[n.SCARE=2]="SCARE",n[n.BEE_STING=3]="BEE_STING",n[n.THORN_STAB=4]="THORN_STAB",n[n.OUT_OF_SCREEN=5]="OUT_OF_SCREEN",n[n.POISONED=6]="POISONED",n[n.DROWNING=7]="DROWNING",n[n.OVER_VIEW=8]="OVER_VIEW",n}(rI||{});K._RF.pop(),K._RF.push({},"852f9XjNUVJ3Zt1Kd/EbqXU","Eye",void 0);var rN,rG,rM,rF,rz,rx,rU,rH=(0,q.ccclass)("Eye")(rD=function(n){i(o,n);var p=a(o);function o(){var n;r(this,o);for(var i=arguments.length,a=new Array(i),d=0;d<i;d++)a[d]=arguments[d];return(n=p.call.apply(p,[this].concat(a))).scaleTween=null,n.initialPosition=null,n}return y(o,[{key:"createScaleAnimation",value:function(){var n=eF(this.node).to(.3,{scale:new ep(1.1,1.1,1)},{easing:"smooth"});this.scaleTween=eF(this.node).reverseTime(n).repeatForever()}},{key:"saveInitialPosition",value:function(){this.initialPosition||(this.initialPosition=this.node.position.clone())}},{key:"show",value:function(){this.node.active=!0,this.playAnimation()}},{key:"hide",value:function(){this.stopAnimation(),this.node.active=!1}},{key:"toward",value:function(n){this.initialPosition&&(this.node.setPosition(this.initialPosition),this.node.position.add(n))}},{key:"playAnimation",value:function(){var n;this.scaleTween||this.createScaleAnimation(),null===(n=this.scaleTween)||void 0===n||n.start()}},{key:"stopAnimation",value:function(){var n;null===(n=this.scaleTween)||void 0===n||n.stop()}}]),o}(ea))||rD;K._RF.pop(),K._RF.push({},"df218vrmOtEH5vRQXxIZ3yS","Eyes",void 0);var rj,rV,rW,rK,rq,rY,rJ,rX,rZ=q.ccclass,rQ=q.property,r$=(rN=rZ("Eyes"),rG=rQ(rH),rM=rQ(rH),rN((rx=n((rz=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=g.call.apply(g,[this].concat(a)),p(n,"leftEye",rx,d(n)),p(n,"rightEye",rU,d(n)),n.time=0,n.remaining=0,n.running=!1,n}return y(u,[{key:"onLoad",value:function(){this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"start",value:function(){this.remaining=0,this.running=!1,this.setTimeChangeDirection(.8),this.leftEye.saveInitialPosition(),this.rightEye.saveInitialPosition()}},{key:"setTimeChangeDirection",value:function(n){this.time=n}},{key:"show",value:function(){this.running=!0,this.remaining=this.time,this.leftEye.show(),this.rightEye.show()}},{key:"hide",value:function(){this.running=!1,this.leftEye.hide(),this.rightEye.hide()}},{key:"stopLook",value:function(){this.running=!1}},{key:"look",value:function(){if(this.node.parent){var n=this.node.parent.getComponent(st);if(n){var i=n.getNearbyBee();if(i){var a=this.leftEye.initialPosition;if(a){var r=a.x,p=a.y,d=new ep;this.leftEye.node.inverseTransformPoint(d,i.node.worldPosition);var y=new ep(d.x-r,d.y-p,0).normalize().multiplyScalar(5);this.leftEye.toward(y),this.rightEye.toward(y)}}}}}},{key:"update",value:function(n){this.running&&(this.remaining<=0&&(this.look(),this.remaining=this.time),this.remaining-=n)}}]),u}(ea)).prototype,"leftEye",[rG],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rU=n(rz.prototype,"rightEye",[rM],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rF=rz))||rF);K._RF.pop(),K._RF.push({},"14172TbYDBAeISJqcpvLYV7","Doge",void 0);var r0,r1,r2,r3,r4,r5,r7,r6,r9=q.ccclass,r8=q.property,se=[rI.OVER_VIEW,rI.BEE_STING,rI.THORN_STAB,rI.POISONED,rI.OUT_OF_SCREEN],st=(rj=r9("Doge"),rV=r8(r$),rW=r8(eT),rj((rY=n((rq=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=g.call.apply(g,[this].concat(a)),p(n,"eyes",rY,d(n)),n.state=rI.IDLE,n.dustParticle=null,n.gameHeight=0,p(n,"collider",rJ,d(n)),p(n,"gameObjects",rX,d(n)),n.onBeginContact=function(i,a){a.node.name!==iq.BEE&&a.node.name!==iq.BIG_BEE&&a.node.name!==iq.BIG_BEE_BULLET||n.beeSting(),a.node.name!==iq.THORN&&a.node.name!==iq.THORN_BALL?a.node.name!==iq.POISON?a.node.name===iq.WATER&&n.drowning():n.poisoned():n.stabbedByThorn()},n}return y(u,[{key:"onLoad",value:function(){var n;this.collider=this.getComponent(eT),this.gameObjects=null===(n=this.node.parent)||void 0===n?void 0:n.getComponent(li),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"start",value:function(){var n;this.initDustParticle(),this.idle();var i=null===(n=eU("Canvas"))||void 0===n?void 0:n.getComponent(Z);i&&(this.gameHeight=i.height),this.collider.on(eR.BEGIN_CONTACT,this.onBeginContact)}},{key:"idle",value:function(){!1!==this.setState(rI.IDLE)&&(this.hideEyes(),this.setSpineAnimation(ad.IDLE,!0))}},{key:"smile",value:function(){!1!==this.setState(rI.SMILE)&&(this.hideEyes(),this.setSpineAnimation(ad.SMILE,!0))}},{key:"beeSting",value:function(){var n=this;!1!==this.setState(rI.BEE_STING)&&(this.hideEyes(),this.setSpineAnimation(ad.HURT,!1),this.scareOtherDoges(),this.scheduleOnce(function(){n.state===rI.BEE_STING&&n.setSpineAnimation(ad.INACTIVE,!1)},.3),k.playSound(R.DOGE_HURT))}},{key:"stabbedByThorn",value:function(){!1!==this.setState(rI.THORN_STAB)&&(this.hideEyes(),this.createDust(),this.setSpineAnimation(ad.THORN_INACTIVE,!1),this.scareOtherDoges(),k.playSound(R.DOGE_DIES))}},{key:"poisoned",value:function(){!1!==this.setState(rI.POISONED)&&(this.hide(),this.hideEyes(),this.createDust(),this.scareOtherDoges(),k.playSound(R.DOGE_DIES))}},{key:"drowning",value:function(){!1!==this.setState(rI.DROWNING)&&(this.hideEyes(),this.setSpineAnimation(ad.DROWNING,!1))}},{key:"isCantBeTargeted",value:function(){return -1!==[rI.THORN_STAB,rI.OUT_OF_SCREEN,rI.POISONED,rI.DROWNING].indexOf(this.state)}},{key:"scare",value:function(){var n;!1!==this.setState(rI.SCARE)&&(this.showEyes(),null===(n=this.eyes)||void 0===n||n.look(),this.setSpineAnimation(ad.FREAK_OUT,!0))}},{key:"hideEyes",value:function(){this.eyes.hide()}},{key:"showEyes",value:function(){this.eyes.show()}},{key:"setState",value:function(n){return -1===se.indexOf(n)?-1===se.indexOf(this.state)&&(this.state=n,!0):se.indexOf(n)>se.indexOf(this.state)&&(this.state=n,this.node.scene.emit(aL.DOGE_DIE),!0)}},{key:"scareOtherDoges",value:function(){if(this.gameObjects){var n,i=this.gameObjects.getDoges(this),a=T(i);try{for(a.s();!(n=a.n()).done;)n.value.scare()}catch(n){a.e(n)}finally{a.f()}}}},{key:"update",value:function(){var n=this.node.worldPosition.y;(n>this.gameHeight||n<0)&&this.setState(rI.OUT_OF_SCREEN),this.isBeeNearBy()&&this.scare()}},{key:"isBeeNearBy",value:function(){return this.state===rI.IDLE&&!se.includes(this.state)&&!!this.getNearbyBee()}},{key:"getNearbyBee",value:function(){var n=this;if(!this.node.parent)return null;var i=this.node.parent.getComponentsInChildren(aJ).find(function(i){var a=ep.distance(n.node.getWorldPosition(),i.node.getWorldPosition());if(i.enabled&&a<=200)return!0});return null!=i?i:null}},{key:"createDust",value:function(){var n=this;if(this.dustParticle){this.dustParticle.active=!0;var i=this.node.getWorldPosition(),a=i.x,r=i.y;this.dustParticle.setWorldPosition(new ep(a,r));var p=this.dustParticle.getComponent(ew.Skeleton);null==p||p.setAnimation(0,"animation",!1),this.scheduleOnce(function(){n.dustParticle&&(n.dustParticle.active=!1)},.5)}}},{key:"initDustParticle",value:function(){var n=this;if(this.node.parent){var i=new Y(iq.DUST_PARTICLE);i.layer=Math.pow(2,25),i.active=!1;var a=i.addComponent(ew.Skeleton);eI.load(i4.DUST_PARTICLE_SPINE,ew.SkeletonData,function(i,r){i?console.error("initDustParticle",i):n.node.isValid&&(a.skeletonData=r)}),this.node.parent.addChild(i),this.dustParticle=i}}}]),u}(an)).prototype,"eyes",[rV],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rJ=n(rq.prototype,"collider",[rW],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rX=n(rq.prototype,"gameObjects",[r8],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rK=rq))||rK);K._RF.pop(),K._RF.push({},"2ca763+kElPuqiAkECtFMMS","Grass",void 0);var sn,si,sa,so,sr,ss=q.ccclass,sl=q.property,su=q.requireComponent,sc=(r0=ss("Grass"),r1=su(ey),r2=sl({tooltip:"Use batch draw all grass polygons"}),r3=sl(ey),r0(r4=r1((r7=n((r5=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=g.call.apply(g,[this].concat(a)),p(n,"useBatch",r7,d(n)),p(n,"graphic",r6,d(n)),n.grassPolygons=[],n}return y(u,[{key:"__preload",value:function(){this.graphic=this.getComponent(ey),this.validateRequiredComponents(),this.listenGameplayEvents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"listenGameplayEvents",value:function(){}},{key:"onLoad",value:function(){var n=this.getPolygon();if(n){var i=this.isDark()?iq.GRASS_DARK:iq.GRASS;this.useBatch?this.addGrassPolygon(i,n):(this.updateFillColor(i),this.drawGrass(n))}}},{key:"drawGrass",value:function(n){this.graphic.moveTo(n[0].x,n[0].y);var i,a=T(n);try{for(a.s();!(i=a.n()).done;){var r=i.value;this.graphic.lineTo(r.x,r.y)}}catch(n){a.e(n)}finally{a.f()}this.graphic.close(),this.graphic.fill()}},{key:"getPolygon",value:function(){if(!("polygon"in this.node))return null;var n=this.node.polygon;return Array.isArray(n)?n:null}},{key:"isDark",value:function(){return"isDark"in this.node&&!!this.node.isDark}},{key:"addGrassPolygon",value:function(n,i){this.grassPolygons.push({type:n,polygon:i})}},{key:"updateFillColor",value:function(n){n===iq.GRASS_DARK?this.graphic.fillColor.fromHEX("#5e9c35"):this.graphic.fillColor.fromHEX("#8bdd55")}},{key:"batchDrawAllGrass",value:function(){if(!(this.grassPolygons.length<1)){var n,i=T(this.grassPolygons);try{for(i.s();!(n=i.n()).done;){var a=n.value;this.updateFillColor(a.type),this.drawGrass(a.polygon)}}catch(n){i.e(n)}finally{i.f()}this.grassPolygons=[]}}}]),u}(an)).prototype,"useBatch",[r2],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),r6=n(r5.prototype,"graphic",[r3],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),r4=r5))||r4)||r4);K._RF.pop(),K._RF.push({},"7027fhYTgdDe6EinMz7XLC6","MapLine",void 0);var sh=q.ccclass,sp=q.property,sd=(sn=sh("MapLine"),si=sp(ey),sn((sr=n((so=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=g.call.apply(g,[this].concat(a)),p(n,"graphics",sr,d(n)),n.useBatch=!1,n.mapLines=[],n}return y(u,[{key:"__preload",value:function(){this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"onLoad",value:function(){var n=this.getPolygon();n&&(this.useBatch?(this.graphics.enabled=!1,this.addLine(n)):this.drawLine(n))}},{key:"getPolygon",value:function(){if(!("polygon"in this.node))return null;var n=this.node.polygon;return Array.isArray(n)?n:null}},{key:"addLine",value:function(n){this.mapLines.push(n)}},{key:"drawLine",value:function(n){this.graphics.moveTo(n[0].x,n[0].y);var i,a=T(n.slice(1));try{for(a.s();!(i=a.n()).done;){var r=i.value;this.graphics.lineTo(r.x,r.y)}}catch(n){a.e(n)}finally{a.f()}this.graphics.stroke()}},{key:"batchDrawAllLines",value:function(){if(!(this.mapLines.length<1)){var n,i=T(this.mapLines);try{for(i.s();!(n=i.n()).done;){var a=n.value;this.drawLine(a)}}catch(n){i.e(n)}finally{i.f()}this.mapLines=[]}}}]),u}(ea)).prototype,"graphics",[si],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),sa=so))||sa);K._RF.pop(),K._RF.push({},"87767KZVqpEgIbdzZdGh1CJ","BatchObjectManager",void 0);var sv=function(){function e(){r(this,e),this.isBrickInitialized=!1,this.isGrassInitialized=!1,this.isLineInitialized=!1,this.isPoisonInitialized=!1,this.isPoisonSurfaceInitialized=!1,this.isWaterInitialized=!1,this.isDangerAreaInitialized=!1,this.mainBrickComponent=null,this.mainGrassComponent=null,this.mainLineComponent=null,this.mainPoisonComponent=null,this.mainPoisonSurfaceComponent=null,this.mainWaterComponent=null,this.mainDangerAreaComponent=null}return y(e,[{key:"assignMainBrickComponent",value:function(n){this.mainBrickComponent=n}},{key:"assignMainGrassComponent",value:function(n){this.mainGrassComponent=n}},{key:"assignMainLineComponent",value:function(n){this.mainLineComponent=n}},{key:"assignMainPoisonComponent",value:function(n){this.mainPoisonComponent=n}},{key:"assignMainPoisonSurfaceComponent",value:function(n){this.mainPoisonSurfaceComponent=n}},{key:"assignMainWaterComponent",value:function(n){this.mainWaterComponent=n}},{key:"assignMainDangerAreaComponent",value:function(n){this.mainDangerAreaComponent=n}},{key:"isBrickBatchingEnabled",value:function(){var n,i;return null!==(n=null===(i=this.mainBrickComponent)||void 0===i?void 0:i.useBatch)&&void 0!==n&&n}},{key:"isGrassBatchingEnabled",value:function(){var n,i;return null!==(n=null===(i=this.mainGrassComponent)||void 0===i?void 0:i.useBatch)&&void 0!==n&&n}},{key:"isLineBatchingEnabled",value:function(){var n,i;return null!==(n=null===(i=this.mainLineComponent)||void 0===i?void 0:i.useBatch)&&void 0!==n&&n}},{key:"isPoisonBatchingEnabled",value:function(){var n,i;return null!==(n=null===(i=this.mainPoisonComponent)||void 0===i?void 0:i.useBatch)&&void 0!==n&&n}},{key:"isPoisonSurfaceBatchingEnabled",value:function(){var n,i;return null!==(n=null===(i=this.mainPoisonSurfaceComponent)||void 0===i?void 0:i.useBatch)&&void 0!==n&&n}},{key:"isWaterBatchingEnabled",value:function(){var n,i;return null!==(n=null===(i=this.mainWaterComponent)||void 0===i?void 0:i.useBatch)&&void 0!==n&&n}},{key:"isDangerAreaBatchingEnabled",value:function(){var n,i;return null!==(n=null===(i=this.mainDangerAreaComponent)||void 0===i?void 0:i.useBatch)&&void 0!==n&&n}},{key:"updateBrickPolygon",value:function(n){this.mainBrickComponent?this.mainBrickComponent.addBrickPolygon(n):console.warn("BatchObjectManager: mainBrickComponent is not assigned")}},{key:"updateGrassPolygon",value:function(n,i){this.mainGrassComponent?this.mainGrassComponent.addGrassPolygon(n,i):console.warn("BatchObjectManager: mainGrassComponent is not assigned")}},{key:"updateMapLine",value:function(n){this.mainLineComponent?this.mainLineComponent.addLine(n):console.warn("BatchObjectManager: mainLineNode is not assigned")}},{key:"updatePoisonPolygon",value:function(n){this.mainPoisonComponent?this.mainPoisonComponent.addPoisonPolygon(n):console.warn("BatchObjectManager: mainPoisonComponent is not assigned")}},{key:"updatePoisonSurfacePolygon",value:function(n){this.mainPoisonSurfaceComponent?this.mainPoisonSurfaceComponent.addPoisonSurfacePolygon(n):console.warn("BatchObjectManager: mainPoisonSurfaceComponent is not assigned")}},{key:"updateWaterPolygon",value:function(n){this.mainWaterComponent?this.mainWaterComponent.addWaterPolygon(n):console.warn("BatchObjectManager: mainWaterComponent is not assigned")}},{key:"updateDangerAreaPolygon",value:function(n){this.mainDangerAreaComponent?this.mainDangerAreaComponent.addDangerAreaPolygon(n):console.warn("BatchObjectManager: mainDangerAreaComponent is not assigned")}},{key:"batchDraw",value:function(){var n,i,a,r,p,d,y;null===(n=this.mainBrickComponent)||void 0===n||n.batchDrawAllBrick(),null===(i=this.mainGrassComponent)||void 0===i||i.batchDrawAllGrass(),null===(a=this.mainLineComponent)||void 0===a||a.batchDrawAllLines(),null===(r=this.mainPoisonComponent)||void 0===r||r.batchDrawAllPoisonPools(),null===(p=this.mainPoisonSurfaceComponent)||void 0===p||p.batchDrawAllPoisonSurfaces(),null===(d=this.mainWaterComponent)||void 0===d||d.batchDrawAllWater(),null===(y=this.mainDangerAreaComponent)||void 0===y||y.batchDrawAllDangerAreas()}},{key:"clearObjects",value:function(){this.isBrickInitialized=!1,this.isGrassInitialized=!1,this.isLineInitialized=!1,this.isPoisonInitialized=!1,this.isPoisonSurfaceInitialized=!1,this.isWaterInitialized=!1,this.isDangerAreaInitialized=!1,this.mainBrickComponent=null,this.mainGrassComponent=null,this.mainLineComponent=null,this.mainPoisonComponent=null,this.mainPoisonSurfaceComponent=null,this.mainWaterComponent=null,this.mainDangerAreaComponent=null}}]),e}();K._RF.pop(),K._RF.push({},"4c04ffCcRhGsqEZlVWUHd8s","MapTransformer",void 0);var sy,sm,sg,sb,sS,sC,sk,sw,sE,sT,sR,sA,s_,sP,sB,sL,sO,sD,sI,sN,sG,sM,sF,sz,sx,sU,sH,sj,sV,sW,sK,sq,sY,sJ,sX,sZ,sQ,s$,s0,s1,s2,s3,s4,s5,s7,s6=200,s9=270,s8=function(){function e(){r(this,e)}return y(e,null,[{key:"getPointObject",value:function(n){var i=n.id,a=n.point,r=n.data,p=n.connect;return{id:i,point:{x:a.x*a1+14-s6,y:a2-a.y*a1-14-s9},data:r,connect:p}}},{key:"getPointObjectBỵHalfCoord",value:function(n){var i=n.id,a=n.point,r=n.data,p=n.connect;return{id:i,point:{x:a.x*a1/2-s6,y:a2-a.y*a1/2-s9},data:r,connect:p}}},{key:"getPolygonObject",value:function(n){var i=n.id,a=n.point,r=n.data,p=n.connect;return{id:i,point:a.map(function(n){var i=n.x,a=n.y;return{x:i*a1-s6,y:a2-a*a1-s9}}),data:r,connect:p}}},{key:"getDoublePolygon",value:function(n){var i=n.id,a=n.point,r=n.data,p=n.connect;return{id:i,point:a.map(function(n){var i=n.x,a=n.y;return{x:i*a1/2-s6,y:a2-a*a1/2-s9}}),data:r,connect:p}}},{key:"transformPointsFromMapToDrawAreaCoordinate",value:function(n){return n.map(function(n){var i=n.x,a=n.y;return{x:i*a1-s6,y:a2-a*a1-s9}})}}]),e}();K._RF.pop(),K._RF.push({},"75ad9uPflhLL4N96NmHF2Sk","GameObjects",void 0);var le,lt=q.ccclass,ln=q.property,li=(sy=lt("GameObjects"),sm=ln(eO),sg=ln(eO),sb=ln(eO),sS=ln(eO),sC=ln(eO),sk=ln(eO),sw=ln(eO),sE=ln(eO),sT=ln(eO),sR=ln(eO),sA=ln(eO),s_=ln(eO),sP=ln(eO),sB=ln(eO),sL=ln(eO),sO=ln(eO),sD=ln({tooltip:"Use batch draw all map lines."}),sI=ln({tooltip:"Use batch draw all poison pools."}),sN=ln({tooltip:"Use batch draw all poison surfaces."}),sG=ln({tooltip:"Use batch draw all water pools."}),sM=ln({tooltip:"Use batch draw all danger areas."}),sy((sx=n((sz=function(n){i(l,n);var m=a(l);function l(){var n;r(this,l);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=m.call.apply(m,[this].concat(a)),p(n,"dogePrefab",sx,d(n)),p(n,"spiderPrefab",sU,d(n)),p(n,"beePrefab",sH,d(n)),p(n,"beehivePrefab",sj,d(n)),p(n,"bigBeePrefab",sV,d(n)),p(n,"thornPrefab",sW,d(n)),p(n,"thornBallPrefab",sK,d(n)),p(n,"airFanPrefab",sq,d(n)),p(n,"grassPrefab",sY,d(n)),p(n,"balloonPrefab",sJ,d(n)),p(n,"brickPrefab",sX,d(n)),p(n,"arenaPrefab",sZ,d(n)),p(n,"woodPrefab",sQ,d(n)),p(n,"connectPrefab",s$,d(n)),p(n,"mapLinePrefab",s0,d(n)),p(n,"crossingBeeLinePrefab",s1,d(n)),p(n,"batchMapLines",s2,d(n)),p(n,"batchPoisonPool",s3,d(n)),p(n,"batchPoisonSurface",s4,d(n)),p(n,"batchWaterPool",s5,d(n)),p(n,"batchDangerArea",s7,d(n)),n.batchObjects=new sv,n.objects=new Map,n}return y(l,[{key:"spawnObjects",value:function(n){for(var i=n.map,a=A(i).reverse(),r=0;r<a.length;r++){var p=a[r],d=null;(d=Array.isArray(p.point)?this.spawnPolygonObjectType(p):this.spawnPointObjectType(p))&&this.objects.set(r,d)}var y,m=T(i);try{for(m.s();!(y=m.n()).done;){var g=y.value;if(!Array.isArray(g.point)){var b=g;if(b.id===i1.BALLOON){var S=s8.getPointObject(b).point,C=S.x,k=S.y;if(!b.connect)continue;var w=this.findObjectIndex(i,b.connect);if(!w)continue;this.spawnBalloon(C,k,w)}if(g.id===i1.CONNECT){if(!g.connect)return null;if(!Array.isArray(g.connect.point))return null;var E=s8.getDoublePolygon(g.connect),R=s8.getPointObjectBỵHalfCoord(g).point,_=R.x,P=R.y;this.spawnConnect(_,P,E.point)}}}}catch(n){m.e(n)}finally{m.f()}this.batchObjects.batchDraw(),this.sortObjects(),this.sleepObjects()}},{key:"spawnPolygonObjectType",value:function(n){var i=s8.getPolygonObject(n).point;if(0===i.length)return null;switch(n.id){case i1.BRICK:return this.spawnBrick(i);case i1.GRASS:return this.spawnGrass(i,!1);case i1.GRASS_DARK:return this.spawnGrass(i,!0);case i1.LINE:return this.spawnLine(i);case i1.POISON:return this.spawnPoison(i);case i1.POISON_SURFACE:return this.spawnPoisonSurface(i);case i1.WATER:return this.spawnWater(i);case i1.DANGER_AREA:return this.spawnDangerAreaNormal(i);case i1.CONNECT:return null;case i1.WOOD:var a=s8.getDoublePolygon(n);return this.spawnWood(a.point);case i1.COLLIDER:var r=s8.getDoublePolygon(n);return this.spawnCollider(0,0,r.point);case i1.STROKE:default:return null}}},{key:"spawnPointObjectType",value:function(n){var i=s8.getPointObject(n).point,a=i.x,r=i.y;switch(n.id){case i1.DOGE_A:return this.spawnDoge({x:a,y:r});case i1.DOGE_B:return this.spawnDoge({x:a,y:r,right:!0});case i1.SPIDER:return this.spawnSpider(a,r);case i1.BEEHIVE_A:case i1.BEEHIVE_C:return this.spawnBeehive(a,r);case i1.BEEHIVE_B:case i1.BEEHIVE_D:return this.spawnBeehive(a,r,!0);case i1.THORN_BALL:return this.spawnThornBall(a,r);case i1.BIG_BEE:return this.spawnBigBee(a,r);case i1.WATER_SURFACE:return this.spawnWaterSurface(a,r);case i1.THORN:var p,d=(null===(p=n.data)||void 0===p?void 0:p.a)||0;return this.spawnThorn(a,r,d);case i1.AIR_FAN:var y,m=(null===(y=n.data)||void 0===y?void 0:y.a)||0;return this.spawnAirFan(a,r,m);default:return null}}},{key:"spawnObjectForDevTools",value:function(n){this.spawnPointObjectType(n),this.sortObjects()}},{key:"spawnPolygonObjectForDevTools",value:function(n){this.spawnPolygonObjectType(n),this.sortObjects()}},{key:"addObject",value:function(n){this.node.insertChild(n,this.getSiblingIndex(n.name))}},{key:"sortObjects",value:function(){var n=A(this.node.children);n.sort(function(n,i){return i0[n.name]-i0[i.name]}),n.forEach(function(n,i){n.setSiblingIndex(i)})}},{key:"findObjectIndex",value:function(n,i){var a=this,r=n.findIndex(function(n){return JSON.stringify(n)===JSON.stringify(i)}),p=n[r].point;if(p&&!Array.isArray(p)){var d=s8.getPointObject(n[r]).point,y=d.x,m=d.y,g=this.node.children.find(function(n){var r=n.position;return r.x===y&&r.y===m&&n.name===a.getObjNameFromId(i.id)});if(g)return g}}},{key:"getObjNameFromId",value:function(n){switch(n){case i1.DOGE_A:case i1.DOGE_B:return iq.DOGE;case i1.SPIDER:return iq.SPIDER;case i1.BEEHIVE_A:case i1.BEEHIVE_B:case i1.BEEHIVE_C:case i1.BEEHIVE_D:return iq.BEEHIVE;case i1.THORN_BALL:return iq.THORN_BALL;case i1.BIG_BEE:return iq.BIG_BEE;case i1.WATER_SURFACE:return iq.WATER_SURFACE;case i1.THORN:return iq.THORN;case i1.AIR_FAN:return iq.AIR_FAN;case i1.BRICK:return iq.BRICK;case i1.GRASS:return iq.GRASS;case i1.GRASS_DARK:return iq.GRASS_DARK;case i1.LINE:return iq.MAP_LINE;case i1.POISON:return iq.POISON;case i1.POISON_SURFACE:return iq.POISON_SURFACE;case i1.WATER:return iq.WATER;case i1.DANGER_AREA:return iq.DANGER_AREA;case i1.WOOD:return iq.WOOD;case i1.COLLIDER:return iq.COLLIDER;default:return""}}},{key:"getSiblingIndex",value:function(n){var i=this.node.children,a=i0[n];if(!a)return i.length+1;var r=i.map(function(n){return i0[n.name]}),p=r.findIndex(function(n){return a<n});return p<0?r.length+1:p}},{key:"clearObjects",value:function(){this.node.destroyAllChildren(),this.node.removeAllChildren(),this.batchObjects.clearObjects()}},{key:"stopBeeBehavior",value:function(){var n,i=this.node.getComponentsInChildren(aJ),a=T(i);try{for(a.s();!(n=a.n()).done;)n.value.state=iK.IDLE}catch(n){a.e(n)}finally{a.f()}}},{key:"sleepObjects",value:function(){var n,i=this.getComponentsInChildren(an),a=T(i);try{for(a.s();!(n=a.n()).done;)n.value.sleep()}catch(n){a.e(n)}finally{a.f()}var r,p=this.node.getComponentsInChildren(oz),d=T(p);try{for(d.s();!(r=d.n()).done;)r.value.state=iK.IDLE}catch(n){d.e(n)}finally{d.f()}}},{key:"wakeUpObjects",value:function(){var n,i=this.getComponentsInChildren(an),a=T(i);try{for(a.s();!(n=a.n()).done;)n.value.wake()}catch(n){a.e(n)}finally{a.f()}}},{key:"spawnBeehive",value:function(n,i,a){var r=arguments.length>2&&void 0!==a&&a,p=Q(this.beehivePrefab);return _instanceof(p,Y)?(p.name=iq.BEEHIVE,p.setPosition(n,i),p.setScale(r?-1:1,1),p.attr({isRightSide:r}),this.addObject(p),p):null}},{key:"spawnBees",value:function(){var n,i=this.node.getComponentsInChildren(od),a=1===i.length?8:4,r=T(i);try{for(r.s();!(n=r.n()).done;){var p=n.value;p.node.attr({totalPathSeekers:Math.floor(a/3)});for(var d=0;d<a;d++){var y=this.spawnBee();y&&p.releaseBee(y)}}}catch(n){r.e(n)}finally{r.f()}this.sortObjects()}},{key:"spawnBee",value:function(){var n=Q(this.beePrefab);return _instanceof(n,Y)?(n.name=iq.BEE,this.addObject(n),n.setSiblingIndex(999),n):null}},{key:"spawnCrossingBees",value:function(n){for(var i=this,a=n.beeSpeed,r=n.spawnRandOffset,p=void 0===r?80:r,d=n.playerWorldX,y=n.playerWorldY,m=n.spawnWorldX,g=n.spawnWorldY,b=n.count,S=void 0===b?[1,2]:b,C=n.targetOffsetMultiplier,k=void 0===C?0:C,w=eA.randomRangeInt(S[0],S[1]),E=[],T=m<d,f=function(){var n=i.spawnBee();if(!n)throw new Error("Could not spawn bee");var r=n.getComponent(aJ);if(!r)throw new Error("Bee component not found");i.addObject(n),r.isSpawnLeftSide=!T;var b=eA.randomRangeInt(-p,p),S=eA.randomRangeInt(-p,p),C=m+b,w=g+S,R=n.worldPosition.z;n.setWorldPosition(C,w,R);var A=new eE(d+b*k-C,y+S*k-w);r.rotateToVector(A),r.fly(A.normalize().multiplyScalar(a)),i.scheduleOnce(function(){r.setRole(iW.NORMAL),r.setState(iK.ATTACKING),r.followInstructions()}),E.push(r)},R=0;R<w;R++)f();return this.sortObjects(),E}},{key:"spawnCrossingBeeLine",value:function(n){var i=n.startX,a=n.startY,r=n.endX,p=n.endY,d=n.thickness,y=n.spriteType,m=Q(this.crossingBeeLinePrefab);if(!_instanceof(m,Y))throw new Error("Could not spawn crossing bee line");m.name=iq.CROSSING_BEE_LINE;var g=m.getComponent(rO);if(!g)throw new Error("CrossingBeeLine component not found");return this.addObject(m),g.setSpriteType(y),g.setStartPosition(i,a),g.setEndPosition(r,p),g.thickness=d,this.sortObjects(),g}},{key:"checkAllBeeDie",value:function(){var n=this.node.getComponentsInChildren(aJ),i=this.node.getComponentsInChildren(oz),a=n.some(function(n){return n.enabled}),r=i.some(function(n){return n.enabled});return!a&&!r}},{key:"spawnDoge",value:function(n){var i=n.x,a=n.y,r=n.right,p=void 0!==r&&r,d=n.isWorldPosition,y=void 0!==d&&d,m=n.rigidBodyConfig,g=void 0===m?{}:m,b=Q(this.dogePrefab);if(!_instanceof(b,Y))return null;b.name=iq.DOGE,y||b.setPosition(i,a),b.setScale(p?-1:1,1),this.addObject(b),b.setSiblingIndex(999),y&&b.setWorldPosition(i,a,b.worldPosition.z);var S=g.gravityScale,C=void 0===S?1:S,k=b.getComponent(ek);if(!k)throw new Error("Could not get doge rigidBody");return k.gravityScale=C,b}},{key:"spawnSpider",value:function(n,i){var a=Q(this.spiderPrefab);return _instanceof(a,Y)?(a.name=iq.SPIDER,a.setPosition(n,i),this.addObject(a),a):null}},{key:"spawnBigBee",value:function(n,i){var a=Q(this.bigBeePrefab);return _instanceof(a,Y)?(a.name=iq.BIG_BEE,a.setPosition(n,i),this.addObject(a),a):null}},{key:"reviveBigBees",value:function(){var n,i=this.node.getComponentsInChildren(oz),a=T(i);try{for(a.s();!(n=a.n()).done;)n.value.state=iK.ATTACKING}catch(n){a.e(n)}finally{a.f()}}},{key:"spawnBrick",value:function(n){if(!this.batchObjects.isBrickInitialized){var i=this.spawnBrickNormal(n);if(!i)return null;var a=i.getComponent(oY);return a?(this.batchObjects.isBrickInitialized=!0,a.useBatch&&this.batchObjects.assignMainBrickComponent(a),this.addObject(i),i):null}return this.batchObjects.isBrickBatchingEnabled()?(this.batchObjects.updateBrickPolygon(n),null):this.spawnBrickNormal(n)}},{key:"spawnBrickNormal",value:function(n){var i=Q(this.brickPrefab);return _instanceof(i,Y)?(i.name=iq.BRICK,i.attr({polygon:n}),this.addObject(i),i):null}},{key:"spawnWood",value:function(n){var i=Q(this.woodPrefab);if(!_instanceof(i,Y))return null;i.name=iq.WOOD;var a=i.getComponent(ra);if(!a)return console.warn("Pattern not found"),null;a.savePolygonPoints(n.map(function(n){return{x:n.x,y:n.y}})),this.addObject(i),a.draw(n),a.applyCollider(n),a.setRigidBodyType(eC.Dynamic);var r=this.spawnWoodStroke(n);return r.setParent(i,!1),i.addChild(r),i}},{key:"spawnWoodStroke",value:function(n){var i=new Y;i.name=iq.WOOD_STROKE,i.layer=0x2000000,this.addObject(i);var a=i.addComponent(ey);a.lineWidth=4;var r=new J;J.fromHEX(r,"#0d0d15"),a.strokeColor=r,a.moveTo(n[0].x,n[0].y);var p,d=T(n.slice(1));try{for(d.s();!(p=d.n()).done;){var y=p.value;a.lineTo(y.x,y.y)}}catch(n){d.e(n)}finally{d.f()}return a.close(),a.stroke(),i}},{key:"spawnGrass",value:function(n,i){if(!this.batchObjects.isGrassInitialized){var a=this.spawnGrassNormal(n,!1);if(!a)return null;var r=a.getComponent(sc);return r?(this.batchObjects.isGrassInitialized=!0,r.useBatch&&this.batchObjects.assignMainGrassComponent(r),this.addObject(a),a):null}var p=i?iq.GRASS_DARK:iq.GRASS;return this.batchObjects.isGrassBatchingEnabled()?(this.batchObjects.updateGrassPolygon(p,n),null):this.spawnGrassNormal(n,i)}},{key:"spawnGrassNormal",value:function(n,i){var a=Q(this.grassPrefab);return _instanceof(a,Y)?(a.name=i?iq.GRASS_DARK:iq.GRASS,a.attr({polygon:n,isDark:i}),this.addObject(a),a):null}},{key:"spawnPoison",value:function(n){if(!this.batchPoisonPool)return this.spawnPoisonNormal(n);if(!this.batchObjects.isPoisonInitialized){var i=Q(this.arenaPrefab);if(!_instanceof(i,Y))return null;i.name=iq.POISON,this.addObject(i);var a=i.addComponent(rl);return a.useBatch=!0,this.batchObjects.isPoisonInitialized=!0,this.batchObjects.assignMainPoisonComponent(a),this.batchObjects.updatePoisonPolygon(n),i}return this.batchObjects.updatePoisonPolygon(n),null}},{key:"spawnPoisonNormal",value:function(n){var i=Q(this.arenaPrefab);return _instanceof(i,Y)?(i.name=iq.POISON,this.addObject(i),i.addComponent(rl).polygon=n,i):null}},{key:"spawnPoisonSurface",value:function(n){if(!this.batchPoisonPool)return this.spawnPoisonSurfaceNormal(n);if(!this.batchObjects.isPoisonSurfaceInitialized){var i=Q(this.arenaPrefab);if(!_instanceof(i,Y))return null;i.name=iq.POISON_SURFACE,this.addObject(i);var a=i.addComponent(rc);return a.useBatch=!0,this.batchObjects.isPoisonSurfaceInitialized=!0,this.batchObjects.assignMainPoisonSurfaceComponent(a),this.batchObjects.updatePoisonSurfacePolygon(n),i}return this.batchObjects.updatePoisonSurfacePolygon(n),null}},{key:"spawnPoisonSurfaceNormal",value:function(n){var i=Q(this.arenaPrefab);return _instanceof(i,Y)?(i.name=iq.POISON_SURFACE,this.addObject(i),i.addComponent(rc).polygon=n,i):null}},{key:"spawnWater",value:function(n){if(!this.batchWaterPool)return this.spawnWaterNormal(n);if(!this.batchObjects.isWaterInitialized){var i=Q(this.arenaPrefab);if(!_instanceof(i,Y))return null;i.name=iq.WATER,this.addObject(i);var a=i.addComponent(rd);return a.useBatch=!0,i.addComponent(ev).opacity=.75,this.batchObjects.isWaterInitialized=!0,this.batchObjects.assignMainWaterComponent(a),this.batchObjects.updateWaterPolygon(n),i}return this.batchObjects.updateWaterPolygon(n),null}},{key:"spawnWaterNormal",value:function(n){var i=Q(this.arenaPrefab);return _instanceof(i,Y)?(i.name=iq.WATER,this.addObject(i),i.addComponent(rd).polygon=n,i.addComponent(ev).opacity=.75,i):null}},{key:"spawnDangerAreaNormal",value:function(n){var i=Q(this.arenaPrefab);if(!_instanceof(i,Y))return null;i.name=iq.DANGER_AREA;var a=i.getComponent(o8);if(!a)return console.warn("GraphicsPattern not found"),null;this.addObject(i),a.setColor("#fc03036d"),a.draw(n);var r=i.addComponent(ek);return r.type=eC.Static,r.group=i2.DEFAULT,i.addComponent(eG),a.applyCollider(n),i}},{key:"spawnWaterSurface",value:function(n,i){var a=new Y;return a.name=iq.WATER_SURFACE,a.layer=this.node.layer,a.setPosition(n,i),B.loadSpriteFrameAsync(i4.WATER_SURFACE_FRAME).then(function(n){if(a.isValid){if(!n)throw new Error("spawnWaterSurface: SpriteFrame not found");a.addComponent(el).spriteFrame=n}}).catch(function(n){console.warn("spawnWaterSurface",n)}),this.addObject(a),a}},{key:"spawnThorn",value:function(n,i,a){var r=arguments.length>2&&void 0!==a?a:0,p=Q(this.thornPrefab);return _instanceof(p,Y)?(p.name=iq.THORN,p.angle=r,p.setPosition(n,i),this.addObject(p),p):null}},{key:"spawnThornBall",value:function(n,i){var a=Q(this.thornBallPrefab);return _instanceof(a,Y)?(a.name=iq.THORN_BALL,a.setPosition(n,i),this.addObject(a),a):null}},{key:"spawnAirFan",value:function(n,i,a){var r=arguments.length>2&&void 0!==a?a:0,p=Q(this.airFanPrefab);if(!_instanceof(p,Y))return null;p.name=iq.AIR_FAN,p.angle=r,p.setPosition(n,i),p.attr({id:i1.AIR_FAN});var d=p.getComponent(ao);return d?(d.setForceDirection(r),this.addObject(p),p):(console.warn("AirFan not found"),null)}},{key:"spawnCollider",value:function(n,i,a){var r=new Y;r.name=iq.COLLIDER,this.addObject(r),r.setPosition(n,i);var p=r.addComponent(ek);p.type=eC.Static,p.group=i2.MAIN_OBJECT;var d=r.addComponent(eG);return d.restitution=.2,d.points=a.map(function(n){var i=n.x,a=n.y;return new eE(i,a)}),d.apply(),r}},{key:"spawnLine",value:function(n){if(!this.batchMapLines)return this.spawnLineNormal(n);if(!this.batchObjects.isLineInitialized){var i=this.spawnLineNormal(n);if(!i)return null;this.addObject(i);var a=i.getComponent(sd);return a?(this.batchObjects.isLineInitialized=!0,this.batchObjects.assignMainLineComponent(a),i):null}return this.batchObjects.updateMapLine(n),null}},{key:"spawnLineNormal",value:function(n){var i=Q(this.mapLinePrefab);return _instanceof(i,Y)?i.getComponent(sd)?(i.name=iq.MAP_LINE,i.attr({polygon:n}),this.addObject(i),i):(console.warn("MapLine not found"),null):null}},{key:"spawnConnect",value:function(n,i,a){var r=this.getComponentsInChildren(ra).find(function(n){var i=n.getPolygonPoints();if(i.length===a.length){for(var r=0;r<a.length;r++){var p=i[r],d=p.x,y=p.y,m=a[r],g=m.x,b=m.y;if(d!==g||y!==b)return}return!0}}),p=Q(this.connectPrefab);if(!_instanceof(p,Y))return null;if(p.setPosition(n,i),this.node.insertChild(p,this.getSiblingIndex(p.name)),r){var d=p.getWorldPosition(),y=d.x,m=d.y,g=r.node.getWorldPosition(),b=g.x,S=g.y,C=p.getComponent(eP);C.connectedBody=r.node.getComponent(ek),C.connectedAnchor=new eE(y-b,m-S),C.enabled=!1,C.enabled=!0}}},{key:"spawnBalloon",value:function(n,i,a){var r=Q(this.balloonPrefab);if(!_instanceof(r,Y))return null;r.name=iq.BALLOON,r.setPosition(n,i);var p=r.getComponent(aB);if(!p)return console.warn("Balloon not found"),null;var d=p.connectToDoge(a);return this.addObject(r),d&&this.addObject(d.node),r}},{key:"getRandomDogeToBee",value:function(){if(!this.node.parent)return null;var n=this.node.parent.getComponentsInChildren(st),i=n.length;return n[Math.floor(Math.random()*i)]}},{key:"getNearestDogeToBee",value:function(n){if(!this.node.parent)return null;var i=this.node.parent.getComponentsInChildren(st);return 0===(i=i.filter(function(n){return!n.isCantBeTargeted()})).length?null:(i.sort(function(i,a){return eE.distance(i.node.worldPosition,n.node.worldPosition)-eE.distance(a.node.worldPosition,n.node.worldPosition)}),i[0])}},{key:"getDoges",value:function(n){if(!this.node.parent)return[];var i=this.node.parent.getComponentsInChildren(st);return i.filter(function(i){return i!==n})}}]),l}(ea)).prototype,"dogePrefab",[sm],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),sU=n(sz.prototype,"spiderPrefab",[sg],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),sH=n(sz.prototype,"beePrefab",[sb],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),sj=n(sz.prototype,"beehivePrefab",[sS],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),sV=n(sz.prototype,"bigBeePrefab",[sC],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),sW=n(sz.prototype,"thornPrefab",[sk],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),sK=n(sz.prototype,"thornBallPrefab",[sw],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),sq=n(sz.prototype,"airFanPrefab",[sE],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),sY=n(sz.prototype,"grassPrefab",[sT],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),sJ=n(sz.prototype,"balloonPrefab",[sR],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),sX=n(sz.prototype,"brickPrefab",[sA],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),sZ=n(sz.prototype,"arenaPrefab",[s_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),sQ=n(sz.prototype,"woodPrefab",[sP],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),s$=n(sz.prototype,"connectPrefab",[sB],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),s0=n(sz.prototype,"mapLinePrefab",[sL],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),s1=n(sz.prototype,"crossingBeeLinePrefab",[sO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),s2=n(sz.prototype,"batchMapLines",[sD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),s3=n(sz.prototype,"batchPoisonPool",[sI],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),s4=n(sz.prototype,"batchPoisonSurface",[sN],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),s5=n(sz.prototype,"batchWaterPool",[sG],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),s7=n(sz.prototype,"batchDangerArea",[sM],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),sF=sz))||sF);K._RF.pop(),K._RF.push({},"97f21hkFElI0YdBDCgAkt9+","Hint",void 0);var la,lo,lr,ls,ll,lu=(0,q.ccclass)("Hint")(le=function(n){i(o,n);var p=a(o);function o(){var n;r(this,o);for(var i=arguments.length,a=new Array(i),d=0;d<i;d++)a[d]=arguments[d];return(n=p.call.apply(p,[this].concat(a))).hintLine=null,n.hintHand=null,n.isHintShown=!1,n}return y(o,[{key:"showHint",value:function(n,i){this.isHintShown||(this.isHintShown=!0,this.hintLine=this.createHintLine(),this.hintLine.active=!0,this.drawHintLine(this.hintLine,n),i&&this.showHand(n))}},{key:"drawHintLine",value:function(n,i){var a=n.getComponent(ey);if(!a)throw new Error("drawHintLine: Graphics is null");a.clear(),a.moveTo(i[0].x,i[0].y);var r,p=T(i.slice(1));try{for(p.s();!(r=p.n()).done;){var d=r.value;a.lineTo(d.x,d.y)}}catch(n){p.e(n)}finally{p.f()}a.stroke()}},{key:"hideHint",value:function(){this.hintLine&&(this.hintLine.active=!1),this.hintHand&&(eH.stopAllByTarget(this.hintHand),this.hintHand.active=!1)}},{key:"showHand",value:function(n){var i=this;this.hintHand=this.createHintHand(n),B.loadSpriteFrameAsync(i4.IC_HAND_FRAME).then(function(a){if(!a)throw new Error("showHand: SpriteFrame is null");i.addSpriteToHand(a),i.runHandHintAnimation(n)}).catch(function(n){console.error(n),i.removeHintHand()})}},{key:"addSpriteToHand",value:function(n){var i;this.hintHand&&(this.hintHand.addComponent(el).spriteFrame=n,null===(i=this.hintHand.getComponent(Z))||void 0===i||i.setAnchorPoint(.15,.9))}},{key:"runHandHintAnimation",value:function(n){var i=this;if(this.hintHand){for(var a=eF(this.hintHand),r=[],p=1;p<n.length;p++){var d=n[p-1],y=n[p],m=d.x-y.x,g=d.y-y.y,b=Math.sqrt(m*m+g*g),S=eF(this.hintHand).to(b/250,{position:new ep(y.x,y.y)});r.push(S)}var C=eF(this.hintHand).delay(.5).call(function(){i.hintHand&&i.hintHand.setPosition(n[0].x,n[0].y)});r.push(C),a.sequence.apply(a,r).repeatForever().start()}}},{key:"getIsHintShow",value:function(){return this.isHintShown}},{key:"reset",value:function(){this.isHintShown=!1,this.removeHintLine(),this.removeHintHand()}},{key:"createHintLine",value:function(){if(this.hintLine)return this.hintLine;var n=new Y,i=n.addComponent(ey);i.lineWidth=10,i.lineCap=ey.LineCap.ROUND,i.lineJoin=ey.LineJoin.ROUND;var a=new J;return J.fromHEX(a,"#fc03036d"),i.strokeColor=a,this.node.insertChild(n,0),n}},{key:"createHintHand",value:function(n){if(this.hintHand)return this.hintHand;var i=new Y;return i.setPosition(n[0].x,n[0].y),this.hintHand=i,this.node.addChild(i),i}},{key:"removeHintLine",value:function(){this.hintLine&&(this.hintLine.getComponent(ey).clear(),this.hintLine.destroyAllChildren(),this.hintLine.removeAllChildren(),this.hintLine.destroy(),this.hintLine=null)}},{key:"removeHintHand",value:function(){this.hintHand&&(this.hintHand.destroyAllChildren(),this.hintHand.removeAllChildren(),this.hintHand.destroy(),this.hintHand=null)}}]),o}(ea))||le;K._RF.pop(),K._RF.push({},"33281kEO4dMXLCvmfkrwqQM","CollisionDetectLine",void 0);var lc,lh,lp,ld,lv,ly,lm,lg,lb,lS,lC=q.ccclass,lk=q.property,lw=(la=lC("CollisionDetectLine"),lo=lk(ey),la((ll=n((ls=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=g.call.apply(g,[this].concat(a)),p(n,"graphic",ll,d(n)),n}return y(u,[{key:"onLoad",value:function(){this.graphic=this.getComponent(ey),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"drawFromTo",value:function(n,i){this.graphic.clear(),this.graphic.moveTo(n.x,n.y),this.graphic.lineTo(i.x,i.y),this.graphic.stroke()}}]),u}(an)).prototype,"graphic",[lo],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),lr=ls))||lr);K._RF.pop(),K._RF.push({},"00eeawrUitLxLgSANaGHhcv","LineDrawer",void 0);var lE=q.ccclass,lT=q.property,lR=q.executionOrder,lA=(lc=lE("LineDrawer"),lh=lR(3),lp=lT(eO),ld=lT(eO),lv=lT(es),lc(ly=lh((lg=n((lm=function(n){i(l,n);var m=a(l);function l(){var n;r(this,l);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=m.call.apply(m,[this].concat(a)),p(n,"linePrefab",lg,d(n)),p(n,"collisionDetectLinePrefab",lb,d(n)),p(n,"minDistance",lS,d(n)),n.lastUIPos=null,n.currentLine=null,n.collisionDetectLine=null,n.isColliding=!1,n}return y(l,[{key:"beginDraw",value:function(n){this.createLine(),this.createCollisionDetectLine(),this.initLine(),this.lastUIPos=null,this.isColliding=!1,this.draw(n)}},{key:"createLine",value:function(){var n=Q(this.linePrefab);_instanceof(n,Y)&&(n.name=iq.DRAW_LINE,n.getComponent(ey)&&(this.node.addChild(n),this.currentLine=n))}},{key:"createCollisionDetectLine",value:function(){if(this.currentLine){var n=Q(this.collisionDetectLinePrefab);if(_instanceof(n,Y)){var i=n.getComponent(ey);if(i){var a=this.currentLine.getComponent(ey);if(a){var r=a.lineWidth,p=a.strokeColor;i.strokeColor=new J(p.r,p.g,p.b,128),i.lineWidth=r,this.node.addChild(n),this.collisionDetectLine=n}}}}}},{key:"initLine",value:function(){var n,i=null===(n=this.currentLine)||void 0===n?void 0:n.getComponent(a5);i&&(i.sleep(),i.init())}},{key:"draw",value:function(n){var i,a,r=this;if(n&&this.currentLine&&this.collisionDetectLine){var p=this.currentLine.getComponent(a5);if(p){var d=this.collisionDetectLine.getComponent(lw);if(d){var y=new ep;null===(i=this.node.parent)||void 0===i||i.inverseTransformPoint(y,new ep(n.x,n.y));var m=new eE(y.x,y.y);if(this.isPointOverlapWithMap(n)){if(this.lastUIPos){var g=this.lastUIPos,b=g.x,S=g.y;this.node.inverseTransformPoint(y,new ep(b,S));var C=new eE(y.x,y.y);if(this.isColliding)d.drawFromTo(C,m);else{var k,w=this.isCurrentLineOverlapWithMap(n,this.lastUIPos);if(w.sort(function(n,i){return null==r.lastUIPos?0:eE.distance(n.point,r.lastUIPos)-eE.distance(i.point,r.lastUIPos)}),!(null===(k=w[0])||void 0===k?void 0:k.point))return;this.isColliding=!0}}}else if(this.lastUIPos&&this.isCurrentLineOverlapWithMap(n,this.lastUIPos).length>0){var E=this.lastUIPos,T=E.x,R=E.y;this.node.inverseTransformPoint(y,new ep(T,R));var A=new eE(y.x,y.y);d.drawFromTo(A,m)}else{if(!this.lastUIPos){this.lastUIPos=n.clone();var _=m.x,P=m.y;p.storePoints(_,P)}var B=this.lastUIPos,L=B.x,O=B.y;null===(a=this.node.parent)||void 0===a||a.inverseTransformPoint(y,new ep(L,O));var D=new eE(y.x,y.y),I=D.x,N=D.y,G=m.x,M=m.y,F=I-G,z=N-M;if(!(F*F+z*z<this.minDistance*this.minDistance)){var x=Math.sqrt(F*F+z*z);this.lastUIPos=n.clone(),p.drawTo(I,N,G,M),p.storePoints(G,M);var U=this.collisionDetectLine.getComponent(ey);return null==U||U.clear(),this.isColliding=!1,x}}}}}}},{key:"isPointOverlapWithMap",value:function(n){return this.getCollision(n).length>0}},{key:"isCurrentLineOverlapWithMap",value:function(n,i){var a=this.getParallelLines(i,n,2),r=a.leftLine,p=a.rightLine,d=ej.instance.raycast(i,n,eV.All).filter(function(n){return!n.collider.sensor}).filter(function(n){var i;return"rope"!==(null===(i=n.collider.node.parent)||void 0===i?void 0:i.name)}),y=ej.instance.raycast(r.p1,r.p2,eV.All).filter(function(n){return!n.collider.sensor}).filter(function(n){var i;return"rope"!==(null===(i=n.collider.node.parent)||void 0===i?void 0:i.name)}),m=ej.instance.raycast(p.p1,p.p2,eV.All).filter(function(n){return!n.collider.sensor}).filter(function(n){var i;return"rope"!==(null===(i=n.collider.node.parent)||void 0===i?void 0:i.name)});return[].concat(A(d),A(y),A(m))}},{key:"endDraw",value:function(){if(this.currentLine&&this.collisionDetectLine){var n=this.currentLine.getComponent(a5);if(n){n.addPhysics(),n.wake();var i=this.collisionDetectLine.getComponent(ey);i?(i.clear(),this.lastUIPos=null,this.isColliding=!1,this.currentLine=null):console.warn("Graphics component not found")}else console.warn("Line component not found")}}},{key:"deActivePhysics",value:function(){var n,i=null===(n=this.currentLine)||void 0===n?void 0:n.getComponent(a5);i&&(i.deActiveColliders(),i.sleep())}},{key:"clearLines",value:function(){this.node.destroyAllChildren(),this.node.removeAllChildren()}},{key:"getParallelLines",value:function(n,i,a){var r=i.x-n.x,p=i.y-n.y,d=eA.Vec2.distance(n,i),y=r/d,m=p/d,g=new eE(n.x-m*a,n.y+y*a),b=new eE(n.x+m*a,n.y-y*a);return{leftLine:{p1:g,p2:new eE(g.x+r,g.y+p)},rightLine:{p1:b,p2:new eE(b.x+r,b.y+p)}}}},{key:"getCollision",value:function(n){return ej.instance.testAABB(new eA.Rect(n.x-2,n.y-2,4,4)).filter(function(n){return!n.sensor}).filter(function(n){var i;return"rope"!==(null===(i=n.node.parent)||void 0===i?void 0:i.name)}).filter(function(i){if(_instanceof(i,eG)){var a=new ep;return i.node.inverseTransformPoint(a,new ep(n.x,n.y)),eW.polygonCircle(i.points,new eE(a.x,a.y),2)}if(_instanceof(i,eD)){var r=i.node.getWorldPosition(),p=r.x,d=r.y;return eW.circleCircle(new eE(p,d+i.worldPosition.y),i.radius,new eE(n.x,n.y),2)}return!i.sensor})}}]),l}(ea)).prototype,"linePrefab",[lp],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),lb=n(lm.prototype,"collisionDetectLinePrefab",[ld],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),lS=n(lm.prototype,"minDistance",[lv],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),ly=lm))||ly)||ly);K._RF.pop(),K._RF.push({},"463cfEelRVL4KYgc4n5FJNz","Map",void 0);var l_,lP=[{id:1,map:1,type:1},{id:2,map:2,type:1},{id:3,map:3,type:1},{id:4,map:8,type:1},{id:5,map:9,type:1},{id:6,map:16,type:1},{id:7,map:4,type:1},{id:8,map:7,type:1},{id:9,map:6,type:1},{id:10,map:18,type:1},{id:11,map:10,type:2},{id:12,map:11,type:2},{id:13,map:12,type:2},{id:14,map:13,type:2},{id:15,map:14,type:2},{id:16,map:15,type:2},{id:17,map:5,type:2},{id:18,map:17,type:2},{id:19,map:19,type:2},{id:20,map:20,type:2},{id:21,map:21,type:3},{id:22,map:22,type:3},{id:23,map:23,type:3},{id:24,map:24,type:3},{id:25,map:25,type:3},{id:26,map:26,type:3},{id:27,map:27,type:3},{id:28,map:28,type:3},{id:29,map:29,type:3},{id:30,map:30,type:3},{id:31,map:31,type:4},{id:32,map:32,type:4},{id:33,map:33,type:4},{id:34,map:34,type:4},{id:35,map:35,type:4},{id:36,map:36,type:4},{id:37,map:37,type:4},{id:38,map:38,type:4},{id:39,map:39,type:4},{id:40,map:40,type:4},{id:41,map:41,type:5},{id:42,map:42,type:5},{id:43,map:43,type:5},{id:44,map:44,type:5},{id:45,map:45,type:5},{id:46,map:46,type:5},{id:47,map:47,type:5},{id:48,map:48,type:5},{id:49,map:49,type:5},{id:50,map:50,type:5},{id:51,map:51,type:6},{id:52,map:52,type:6},{id:53,map:53,type:6},{id:54,map:54,type:6},{id:55,map:55,type:6},{id:56,map:56,type:6},{id:57,map:57,type:6},{id:58,map:58,type:6},{id:59,map:59,type:6},{id:60,map:60,type:6},{id:61,map:61,type:7},{id:62,map:62,type:7},{id:63,map:63,type:7},{id:64,map:64,type:7},{id:65,map:65,type:7},{id:66,map:66,type:7},{id:67,map:67,type:7},{id:68,map:68,type:7},{id:69,map:69,type:7},{id:70,map:70,type:7},{id:71,map:71,type:8},{id:72,map:72,type:8},{id:73,map:73,type:8},{id:74,map:74,type:8},{id:75,map:75,type:8},{id:76,map:76,type:8},{id:77,map:77,type:8},{id:78,map:78,type:8},{id:79,map:79,type:8},{id:80,map:80,type:8},{id:81,map:81,type:9},{id:82,map:82,type:9},{id:83,map:83,type:9},{id:84,map:84,type:9},{id:85,map:85,type:9},{id:86,map:86,type:9},{id:87,map:87,type:9},{id:88,map:88,type:9},{id:89,map:89,type:9},{id:90,map:90,type:9},{id:91,map:91,type:10},{id:92,map:92,type:10},{id:93,map:93,type:10},{id:94,map:94,type:10},{id:95,map:95,type:10},{id:96,map:96,type:10},{id:97,map:97,type:10},{id:98,map:98,type:10},{id:99,map:99,type:10},{id:100,map:100,type:10},{id:101,map:101,type:11},{id:102,map:102,type:11},{id:103,map:103,type:11},{id:104,map:104,type:11},{id:105,map:105,type:11},{id:106,map:106,type:11},{id:107,map:107,type:11},{id:108,map:108,type:11},{id:109,map:109,type:11},{id:110,map:110,type:11},{id:111,map:111,type:12},{id:112,map:112,type:12},{id:113,map:113,type:12},{id:114,map:114,type:12},{id:115,map:115,type:12},{id:116,map:116,type:12},{id:117,map:117,type:12},{id:118,map:118,type:12},{id:119,map:119,type:12},{id:120,map:120,type:12},{id:121,map:121,type:13},{id:122,map:122,type:13},{id:123,map:123,type:13},{id:124,map:124,type:13},{id:125,map:125,type:13},{id:126,map:126,type:13},{id:127,map:127,type:13},{id:128,map:128,type:13},{id:129,map:129,type:13},{id:130,map:130,type:13},{id:131,map:131,type:14},{id:132,map:132,type:14},{id:133,map:133,type:14},{id:134,map:134,type:14},{id:135,map:135,type:14},{id:136,map:136,type:14},{id:137,map:137,type:14},{id:138,map:138,type:14},{id:139,map:139,type:14},{id:140,map:140,type:14},{id:141,map:141,type:15},{id:142,map:142,type:15},{id:143,map:143,type:15},{id:144,map:144,type:15},{id:145,map:145,type:15},{id:146,map:146,type:15},{id:147,map:147,type:15},{id:148,map:148,type:15},{id:149,map:149,type:15},{id:150,map:150,type:15},{id:151,map:184,type:16},{id:152,map:185,type:16},{id:153,map:186,type:16},{id:154,map:187,type:16},{id:155,map:188,type:16},{id:156,map:189,type:16},{id:157,map:190,type:16},{id:158,map:191,type:16},{id:159,map:192,type:16},{id:160,map:193,type:16},{id:161,map:194,type:17},{id:162,map:195,type:17},{id:163,map:196,type:17},{id:164,map:197,type:17},{id:165,map:198,type:17},{id:166,map:199,type:17},{id:167,map:200,type:17},{id:168,map:167,type:17},{id:169,map:168,type:17},{id:170,map:169,type:17},{id:171,map:170,type:18},{id:172,map:171,type:18},{id:173,map:172,type:18},{id:174,map:173,type:18},{id:175,map:174,type:18},{id:176,map:175,type:18},{id:177,map:176,type:18},{id:178,map:177,type:18},{id:179,map:178,type:18},{id:180,map:179,type:18},{id:181,map:180,type:19},{id:182,map:181,type:19},{id:183,map:182,type:19},{id:184,map:183,type:19},{id:185,map:151,type:19},{id:186,map:152,type:19},{id:187,map:153,type:19},{id:188,map:154,type:19},{id:189,map:155,type:19},{id:190,map:156,type:19},{id:191,map:157,type:20},{id:192,map:158,type:20},{id:193,map:159,type:20},{id:194,map:160,type:20},{id:195,map:161,type:20},{id:196,map:162,type:20},{id:197,map:163,type:20},{id:198,map:164,type:20},{id:199,map:165,type:20},{id:200,map:166,type:20},{id:201,map:201,type:21},{id:202,map:202,type:21},{id:203,map:203,type:21},{id:204,map:204,type:21},{id:205,map:205,type:21},{id:206,map:206,type:21},{id:207,map:207,type:21},{id:208,map:208,type:21},{id:209,map:209,type:21},{id:210,map:210,type:21},{id:211,map:211,type:22},{id:212,map:212,type:22},{id:213,map:213,type:22},{id:214,map:214,type:22},{id:215,map:215,type:22},{id:216,map:216,type:22},{id:217,map:217,type:22},{id:218,map:218,type:22},{id:219,map:219,type:22},{id:220,map:220,type:22},{id:221,map:221,type:23},{id:222,map:222,type:23},{id:223,map:223,type:23},{id:224,map:224,type:23},{id:225,map:225,type:23},{id:226,map:226,type:23},{id:227,map:227,type:23},{id:228,map:228,type:23},{id:229,map:229,type:23},{id:230,map:230,type:23},{id:231,map:231,type:24},{id:232,map:232,type:24},{id:233,map:233,type:24},{id:234,map:234,type:24},{id:235,map:235,type:24},{id:236,map:236,type:24},{id:237,map:237,type:24},{id:238,map:238,type:24},{id:239,map:239,type:24},{id:240,map:240,type:24},{id:241,map:241,type:25},{id:242,map:242,type:25},{id:243,map:243,type:25},{id:244,map:244,type:25},{id:245,map:245,type:25},{id:246,map:246,type:25},{id:247,map:247,type:25},{id:248,map:248,type:25},{id:249,map:249,type:25},{id:250,map:250,type:25},{id:251,map:251,type:26},{id:252,map:252,type:26},{id:253,map:253,type:26},{id:254,map:254,type:26},{id:255,map:255,type:26},{id:256,map:256,type:26},{id:257,map:257,type:26},{id:258,map:258,type:26},{id:259,map:259,type:26},{id:260,map:260,type:26},{id:261,map:261,type:27},{id:262,map:262,type:27},{id:263,map:263,type:27},{id:264,map:264,type:27},{id:265,map:265,type:27},{id:266,map:266,type:27},{id:267,map:267,type:27},{id:268,map:268,type:27},{id:269,map:269,type:27},{id:270,map:270,type:27},{id:271,map:271,type:28},{id:272,map:272,type:28},{id:273,map:273,type:28},{id:274,map:274,type:28},{id:275,map:275,type:28},{id:276,map:276,type:28},{id:277,map:277,type:28},{id:278,map:278,type:28},{id:279,map:279,type:28},{id:280,map:280,type:28},{id:281,map:281,type:29},{id:282,map:282,type:29},{id:283,map:283,type:29},{id:284,map:284,type:29},{id:285,map:285,type:29},{id:286,map:286,type:29},{id:287,map:287,type:29},{id:288,map:288,type:29},{id:289,map:289,type:29},{id:290,map:290,type:29},{id:291,map:291,type:30},{id:292,map:292,type:30},{id:293,map:293,type:30},{id:294,map:294,type:30},{id:295,map:295,type:30},{id:296,map:296,type:30},{id:297,map:297,type:30},{id:298,map:298,type:30},{id:299,map:299,type:30},{id:300,map:300,type:30},{id:301,map:301,type:31},{id:302,map:302,type:31},{id:303,map:303,type:31},{id:304,map:304,type:31},{id:305,map:305,type:31},{id:306,map:306,type:31},{id:307,map:307,type:31},{id:308,map:308,type:31},{id:309,map:309,type:31},{id:310,map:310,type:31},{id:311,map:311,type:32},{id:312,map:312,type:32},{id:313,map:313,type:32},{id:314,map:314,type:32},{id:315,map:315,type:32},{id:316,map:316,type:32},{id:317,map:317,type:32},{id:318,map:318,type:32},{id:319,map:319,type:32},{id:320,map:320,type:32},{id:321,map:321,type:33},{id:322,map:322,type:33},{id:323,map:323,type:33},{id:324,map:324,type:33},{id:325,map:325,type:33}];K._RF.pop(),K._RF.push({},"45df2RUUZZNhaXqOADOV0HC","MapLoader",void 0);var lB,lL=(0,q.ccclass)("MapLoader")(l_=function(n){i(o,n);var p=a(o);function o(){return r(this,o),p.apply(this,arguments)}return y(o,[{key:"paddingZero",value:function(n,i){return Array(i-n.length).fill("0").join("")+n}},{key:"getMapByLevel",value:function(n){var i=lP.find(function(i){return i.id===n});return i?i.map:1}},{key:"preloadLevel",value:function(n){var i=this.getMapByLevel(n),a=this.paddingZero(i.toString(),3);eI.preload("".concat(i4.MAP_JSON_PREFIX).concat(a),eK)}},{key:"loadLevel",value:function(n,i){var a=this.getMapByLevel(n),r=this.paddingZero(a.toString(),3);eI.load("".concat(i4.MAP_JSON_PREFIX).concat(r),eK,i)}},{key:"isLevelAlreadyLoaded",value:function(n){var i=this.getMapByLevel(n),a=this.paddingZero(i.toString(),3);return null!==eI.getInfoWithPath("".concat(i4.MAP_JSON_PREFIX).concat(a))}}]),o}(ea))||l_;K._RF.pop(),K._RF.push({},"8d3c7nuQGRNgpZcqAOCJY6O","InkCapacityController",void 0);var lO,lD=(0,q.ccclass)("InkCapacityController")(lB=function(n){i(o,n);var p=a(o);function o(){var n;r(this,o);for(var i=arguments.length,a=new Array(i),d=0;d<i;d++)a[d]=arguments[d];return(n=p.call.apply(p,[this].concat(a))).maxInkLevel=0,n.currentInkLevel=0,n}return y(o,[{key:"init",value:function(n){var i=this.getDrawLength(n);this.maxInkLevel=i,this.currentInkLevel=i}},{key:"getCurrentInkLevel",value:function(){return Math.floor(this.currentInkLevel)}},{key:"removeInkLevel",value:function(n){var i=this.currentInkLevel-n;this.setInkLevel(i)}},{key:"setInkLevel",value:function(n){this.currentInkLevel=n,this.currentInkLevel<0&&(this.currentInkLevel=0),this.currentInkLevel>this.maxInkLevel&&(this.currentInkLevel=this.maxInkLevel)}},{key:"isInkEmpty",value:function(){return this.currentInkLevel<=0}},{key:"getInkLevelPercentage",value:function(){return this.currentInkLevel/this.maxInkLevel*100}},{key:"getStarRating",value:function(n){var i=arguments.length>0&&void 0!==n?n:3,a=this.maxInkLevel/i,r=Math.ceil(this.getCurrentInkLevel()/a);return 0===r?1:r}},{key:"getDrawLength",value:function(n){for(var i=0,a=1;a<n.length;a++){var r=n[a-1],p=n[a],d=r.x-p.x,y=r.y-p.y;i+=Math.sqrt(d*d+y*y)}return 3*i}}]),o}(ea))||lB;K._RF.pop(),K._RF.push({},"014cbNey8JEV4aPhDm9R5W4","InputController",void 0);var lI=(0,q.ccclass)("InputController")(lO=function(n){i(o,n);var p=a(o);function o(){var n;r(this,o);for(var i=arguments.length,a=new Array(i),d=0;d<i;d++)a[d]=arguments[d];return(n=p.call.apply(p,[this].concat(a))).pointerDownOutSideCanvas=!1,n.handleElementPointerDown=function(){n.pointerDownOutSideCanvas=!0},n.handleElementPointerUp=function(i){n.onTouchEnd(),n.pointerDownOutSideCanvas=!1},n.onTouchStart=function(i){n.node.scene.emit(aL.GAME_START,{pointer:i})},n.onTouchMove=function(i){if(n.pointerDownOutSideCanvas)return n.node.scene.emit(aL.GAME_START,{pointer:i}),void(n.pointerDownOutSideCanvas=!1);n.node.scene.emit(aL.DRAWING,{pointer:i})},n.onTouchEnd=function(i){n.node.scene.emit(aL.BEE_ATTACK)},n}return y(o,[{key:"onLoad",value:function(){this.listenInputEvents()}},{key:"listenInputEvents",value:function(){em.os===em.OS.WINDOWS||em.os===em.OS.OSX?(document.addEventListener("pointerup",this.handleElementPointerUp),document.addEventListener("pointerdown",this.handleElementPointerDown),this.node.on(Y.EventType.MOUSE_DOWN,this.onTouchStart),this.node.on(Y.EventType.MOUSE_MOVE,this.onTouchMove),this.node.on(Y.EventType.MOUSE_UP,this.onTouchEnd)):(this.node.on(Y.EventType.TOUCH_START,this.onTouchStart),this.node.on(Y.EventType.TOUCH_MOVE,this.onTouchMove),this.node.on(Y.EventType.TOUCH_CANCEL,this.onTouchEnd),this.node.on(Y.EventType.TOUCH_END,this.onTouchEnd))}},{key:"onDestroy",value:function(){em.os===em.OS.WINDOWS||em.os===em.OS.OSX?(document.removeEventListener("pointerup",this.handleElementPointerUp),document.removeEventListener("pointerdown",this.handleElementPointerDown),this.node.off(Y.EventType.MOUSE_DOWN,this.onTouchStart),this.node.off(Y.EventType.MOUSE_MOVE,this.onTouchMove),this.node.off(Y.EventType.MOUSE_UP,this.onTouchEnd)):(this.node.off(Y.EventType.TOUCH_START,this.onTouchStart),this.node.off(Y.EventType.TOUCH_MOVE,this.onTouchMove),this.node.off(Y.EventType.TOUCH_CANCEL,this.onTouchEnd),this.node.off(Y.EventType.TOUCH_END,this.onTouchEnd))}}]),o}(ea))||lO;K._RF.pop(),K._RF.push({},"e6116mseMNPD6VcLUtkvez6","BaseState",void 0);var lN=function(){function e(n){if(r(this,e),this.game=null,this.data={},this.game=n.node.getComponent(hT),!this.game)throw new Error("Gameplay component not found");this.manager=n,this.updateStateData(),this.logDebug()}return y(e,[{key:"logDebug",value:function(){var n=this.constructor.name;console.info("[STATE] ".concat(n),this.data)}},{key:"updateStateData",value:function(){if(this.game){var n=this.game.getGameData();n&&(this.data=n)}}},{key:"updateGameData",value:function(n){var i;null===(i=this.game)||void 0===i||i.setGameData(n)}}]),e}();K._RF.pop(),K._RF.push({},"a79a7LT0s5BuZrk5mvYsyKr","AttackingState",void 0);var lG=function(n){i(o,n);var p=a(o);function o(n){var i;return r(this,o),(i=p.call(this,n)).stopHint(),i.stopDrawing(),i.wakeUpObjects(),i.spawnEnemies(),i.startCountdown(),k.turnDownMusic(),i}return y(o,[{key:"load",value:function(){var n=this.manager.createLoadingState();this.manager.change(n)}},{key:"initialize",value:function(){k.stopSound(R.BEE_FLYING);var n=this.manager.createInitializeState();this.manager.change(n)}},{key:"ready",value:function(){}},{key:"draw",value:function(){}},{key:"attack",value:function(){}},{key:"escape",value:function(){var n=this.manager.createEscapeState();this.manager.change(n)}},{key:"death",value:function(){var n=this.manager.createDeathState();this.manager.change(n)}},{key:"finish",value:function(){}},{key:"update",value:function(){}},{key:"stopDrawing",value:function(){var n;null===(n=this.game)||void 0===n||null===(n=n.lineDrawer)||void 0===n||n.endDraw()}},{key:"stopHint",value:function(){var n;null===(n=this.game)||void 0===n||null===(n=n.hint)||void 0===n||n.hideHint()}},{key:"wakeUpObjects",value:function(){var n;null===(n=this.game)||void 0===n||null===(n=n.gameObjects)||void 0===n||n.wakeUpObjects()}},{key:"spawnEnemies",value:function(){this.game&&this.game.gameObjects&&(this.game.gameObjects.spawnBees(),this.game.gameObjects.reviveBigBees(),k.playSound(R.BEE_FLYING),k.playSound(R.END_DRAW))}},{key:"startCountdown",value:function(){var n;null===(n=this.game)||void 0===n||n.uiManager.startCountdown()}}]),o}(lN);K._RF.pop(),K._RF.push({},"17461foCjdJ276bG2jcxA06","DeathState",void 0);var lM=globalThis.game.analytics,lF=function(n){i(o,n);var p=a(o);function o(n){var i,a,d;return r(this,o),(d=p.call(this,n)).processCrazyGamesEvent(),d.disableUI(),k.stopAllSounds(),d.vibrateDevice(),d.pauseCountdown(),d.logLevelFailAnalytics(),null===(i=d.game)||void 0===i||i.scheduleOnce(function(){d.stopDogesLooking(),d.showUncompletedMark(),k.playSound(R.LEVEL_FAIL,{volume:.3})},.5),null===(a=d.game)||void 0===a||a.scheduleOnce(function(){d.sleepObjects(),d.showLoseScreen(),d.manager.finish()},1.8),d}return y(o,[{key:"processCrazyGamesEvent",value:function(){"gameplayStop"in GameSDK.extra&&GameSDK.extra.gameplayStop()}},{key:"load",value:function(){}},{key:"initialize",value:function(){}},{key:"ready",value:function(){}},{key:"draw",value:function(){}},{key:"attack",value:function(){}},{key:"escape",value:function(){}},{key:"death",value:function(){}},{key:"finish",value:function(){var n=this.manager.createFinishState();this.manager.change(n)}},{key:"update",value:function(){}},{key:"disableUI",value:function(){var n,i;null===(n=this.game)||void 0===n||n.uiManager.disableUI(),null===(i=this.game)||void 0===i||i.hint.reset()}},{key:"sleepObjects",value:function(){var n,i;null===(n=this.game)||void 0===n||null===(n=n.lineDrawer)||void 0===n||n.deActivePhysics(),null===(i=this.game)||void 0===i||null===(i=i.gameObjects)||void 0===i||i.sleepObjects()}},{key:"pauseCountdown",value:function(){var n;null===(n=this.game)||void 0===n||n.uiManager.pauseCountdown()}},{key:"stopDogesLooking",value:function(){var n;if(null!==(n=this.game)&&void 0!==n&&n.gameObjects){var i,a=this.game.gameObjects.getComponentsInChildren(st),r=T(a);try{for(r.s();!(i=r.n()).done;){var p,d=i.value;null===(p=d.eyes)||void 0===p||p.stopLook(),d.setEnable(!1)}}catch(n){r.e(n)}finally{r.f()}}}},{key:"vibrateDevice",value:function(){var n;null===(n=eU("Vibrate"))||void 0===n||null===(n=n.getComponent(iU))||void 0===n||n.vibrate(500)}},{key:"showUncompletedMark",value:function(){var n;null===(n=this.game)||void 0===n||n.uiManager.showUncompletedMark()}},{key:"showLoseScreen",value:function(){var n=this.data.level;L.openScreen(O.LOSE_SCREEN,{level:n})}},{key:"logLevelFailAnalytics",value:function(){if(this.game){var n=this.game.inkCapacityController;if(n){var i=this.data.level,a=void 0===i?0:i,r=n.getStarRating();console.info("logLevelFailAnalytics",a,r),lM.levelFail(a,r)}}}}]),o}(lN);K._RF.pop(),K._RF.push({},"71778iMCmVDQKkpW1Ag0dZz","DrawingState",void 0);var lz=function(n){i(o,n);var p=a(o);function o(n){var i;return r(this,o),(i=p.call(this,n)).dist=0,i.isEmptyDraw=!1,i.initDrawer(),i}return y(o,[{key:"load",value:function(){}},{key:"initialize",value:function(){var n=this.manager.createInitializeState();this.manager.change(n)}},{key:"ready",value:function(){var n=this.manager.createReadyState();this.manager.change(n)}},{key:"draw",value:function(){}},{key:"attack",value:function(){var n,i,a;if(100===(null!==(n=null===(i=this.game)||void 0===i?void 0:i.inkCapacityController.getInkLevelPercentage())&&void 0!==n?n:0))return null===(a=this.game)||void 0===a||a.lineDrawer.endDraw(),void(this.isEmptyDraw=!0);var r=this.manager.createAttackingState();this.manager.change(r)}},{key:"escape",value:function(){}},{key:"death",value:function(){}},{key:"finish",value:function(){}},{key:"update",value:function(){var n;this.isInkEmpty()?null===(n=this.game)||void 0===n||n.node.scene.emit(aL.BEE_ATTACK):this.isEmptyDraw?this.manager.ready():(this.updateStateData(),this.drawLines(),this.updateInkLevel(),this.updateProgressBar())}},{key:"initDrawer",value:function(){var n;if(null!==(n=this.game)&&void 0!==n&&n.lineDrawer){var i=this.data.pointer.getUILocation();this.game.lineDrawer.beginDraw(i),k.playSound(R.BUTTON_CLICK)}}},{key:"isInkEmpty",value:function(){return!!this.game&&this.game.inkCapacityController.isInkEmpty()}},{key:"drawLines",value:function(){var n,i;if(null!==(n=this.game)&&void 0!==n&&n.lineDrawer){var a=this.data.pointer.getUILocation();if(this.dist=null!==(i=this.game.lineDrawer.draw(a))&&void 0!==i?i:0,this.dist>0){var r=R.TOUCH_START;k.playSound(r,{volume:.8})}}}},{key:"updateInkLevel",value:function(){var n;null===(n=this.game)||void 0===n||n.inkCapacityController.removeInkLevel(this.dist)}},{key:"updateProgressBar",value:function(){if(this.game){var n=this.game.inkCapacityController.getStarRating();this.game.uiManager.setProgressStars(n);var i=this.game.inkCapacityController.getInkLevelPercentage();this.game.uiManager.setProgressBarPercentage(i)}}}]),o}(lN);K._RF.pop(),K._RF.push({},"d600e+7dHhGOYCGrcOjxVcl","EscapeState",void 0);var lx=globalThis.game,lU=lx.player,lH=lx.analytics,lj=function(n){i(o,n);var p=a(o);function o(n){var i,a;return r(this,o),(a=p.call(this,n)).processCrazyGamesEvent(),a.disableUI(),a.stopAllSounds(),a.vibrateDevice(),a.makeDogesSmile(),a.pauseCountdown(),a.showCompletedMark(),a.updatePlayerProgress(),a.stopBeeBehavior(),a.logLevelCompleteAnalytics(),null===(i=a.game)||void 0===i||i.scheduleOnce(function(){a.sleepObjects(),a.showWiningScreen(),a.manager.finish()},.5),k.playSound(R.LEVEL_PASS),k.playSound(R.BEE_FLYING),a}return y(o,[{key:"processCrazyGamesEvent",value:function(){"gameplayStop"in GameSDK.extra&&GameSDK.extra.gameplayStop()}},{key:"load",value:function(){}},{key:"initialize",value:function(){}},{key:"ready",value:function(){}},{key:"draw",value:function(){}},{key:"attack",value:function(){}},{key:"escape",value:function(){}},{key:"death",value:function(){}},{key:"finish",value:function(){var n=this.manager.createFinishState();this.manager.change(n)}},{key:"update",value:function(){}},{key:"disableUI",value:function(){var n,i;null===(n=this.game)||void 0===n||n.uiManager.disableUI(),null===(i=this.game)||void 0===i||i.hint.reset()}},{key:"stopBeeBehavior",value:function(){var n;null===(n=this.game)||void 0===n||null===(n=n.gameObjects)||void 0===n||n.stopBeeBehavior()}},{key:"sleepObjects",value:function(){var n,i;null===(n=this.game)||void 0===n||null===(n=n.lineDrawer)||void 0===n||n.deActivePhysics(),null===(i=this.game)||void 0===i||null===(i=i.gameObjects)||void 0===i||i.sleepObjects()}},{key:"stopAllSounds",value:function(){k.stopAllSounds()}},{key:"makeDogesSmile",value:function(){var n;if(null!==(n=this.game)&&void 0!==n&&n.gameObjects){var i,a=this.game.gameObjects.getComponentsInChildren(st),r=T(a);try{for(r.s();!(i=r.n()).done;){var p=i.value;p.smile(),p.setEnable(!1)}}catch(n){r.e(n)}finally{r.f()}}}},{key:"vibrateDevice",value:function(){var n;null===(n=eU("Vibrate"))||void 0===n||null===(n=n.getComponent(iU))||void 0===n||n.vibrate(500)}},{key:"pauseCountdown",value:function(){var n;null===(n=this.game)||void 0===n||n.uiManager.pauseCountdown()}},{key:"showCompletedMark",value:function(){var n;null===(n=this.game)||void 0===n||n.uiManager.showCompletedMark()}},{key:"updatePlayerProgress",value:function(){if(this.game){var n=this.data.level;if(n){var i=this.game.inkCapacityController.getStarRating(),a=lU.getGameData();if(a&&a.levelProgress){var r=a.levelProgress[n]||0,p=a.totalLevel,d=D({},a);n>=p&&(d.passAllLevels=!0),n<a.level&&(d.level=n+1);var y=Math.max(r,i);d.levelProgress[n]=y,lU.setGameData(d)}}}}},{key:"showWiningScreen",value:function(){if(this.game){var n=this.data.level,i=this.game.inkCapacityController.getStarRating();L.openScreen(O.WINNING_SCREEN,{level:n,stars:i})}}},{key:"logLevelCompleteAnalytics",value:function(){if(this.game){var n=this.game.inkCapacityController;if(n){var i=this.data.level,a=void 0===i?0:i,r=n.getStarRating();console.info("logLevelCompleteAnalytics",a,r),lH.levelComplete(a,r)}}}}]),o}(lN);K._RF.pop(),K._RF.push({},"9046etpNclOb7EjoNvbF/aZ","MatchUtils",void 0);var lV=GameCore,lW=lV.Match,lK=lV.Utils,lq=lK.Object,lY=lK.Valid,lJ=lK.String,lX=globalThis.game,lZ=lX.match,lQ=lX.player,l$=lX.leaderboard,l0=function(){function e(){r(this,e)}var n,i,a,p,d,m,g,b,S,C,k,w,E,T,R,A,_,P;return y(e,[{key:"processStartSingleModeAsync",value:(P=I(function(){var n;return _ts_generator(this,function(i){switch(i.label){case 0:n=lQ.getPlayerId();return[4,lZ.single.start.processAsync({playerId:n})];case 1:i.sent();return[2]}})}),function(){return P.apply(this,arguments)})},{key:"processFinishSingleModeAsync",value:(_=I(function(){return _ts_generator(this,function(n){switch(n.label){case 0:return[4,lZ.single.finish.processAsync()];case 1:n.sent();return[2]}})}),function(){return _.apply(this,arguments)})},{key:"processStartTournamentModeAsync",value:(A=I(function(){var n,i;return _ts_generator(this,function(a){switch(a.label){case 0:n=lQ.getPlayerId(),i=GameSDK.context.getID();return[4,lZ.tournament.continue.processAsync({playerId:n,contextId:i})];case 1:a.sent();return[2]}})}),function(){return A.apply(this,arguments)})},{key:"processFinishTournamentModeAsync",value:(R=I(function(){var n,i;return _ts_generator(this,function(a){switch(a.label){case 0:n=lQ.getPlayerId(),i=lQ.getBestScore();return[4,lZ.tournament.finish.processAsync({playerId:n,bestScore:i})];case 1:a.sent();return[2]}})}),function(){return R.apply(this,arguments)})},{key:"processStartChallengeModeAsync",value:(T=I(function(){var n,i,a;return _ts_generator(this,function(r){switch(r.label){case 0:r.trys.push([0,2,,7]);return[4,this.processContinueChallengeAsync()];case 1:r.sent();return[3,7];case 2:n=r.sent();if(!lq.hasOwn(n,"name")||lY.isString(n.name))throw n;i="PlayerHasFinishedMatch"===n.name;if(!i)return[3,4];return[4,this.processChallengeNewOpponentAsync()];case 3:i=r.sent();r.label=4;case 4:a="PlayerNotJoinInMatch"===n.name;if(!a)return[3,6];return[4,this.processJoinChallengeAsync()];case 5:a=r.sent();r.label=6;case 6:return[3,7];case 7:return[2]}})}),function(){return T.apply(this,arguments)})},{key:"processFinishChallengeModeAsync",value:(E=I(function(){return _ts_generator(this,function(n){switch(n.label){case 0:return[4,lZ.challenge.finish.processAsync()];case 1:n.sent();return[2]}})}),function(){return E.apply(this,arguments)})},{key:"processContinueChallengeAsync",value:(w=I(function(){var n,i,a,r,p,d;return _ts_generator(this,function(y){switch(y.label){case 0:n=this.getMatchState(),i=n.id,a=n.customData,r=a.playerId,p=a.opponentId;if(!lY.isString(i))throw new Error("Invalid match id");if(!lY.isString(r))throw new Error("Invalid player id");if(!lY.isString(p))throw new Error("Invalid opponent id");d=GameSDK.context.getID();if(!d)throw new Error("Cannot get contextId");return[4,lZ.challenge.continue.processAsync({matchId:i,contextId:d,playerId:r,opponentId:p})];case 1:y.sent();return[2]}})}),function(){return w.apply(this,arguments)})},{key:"processChallengeNewOpponentAsync",value:(k=I(function(){var n,i,a,r;return _ts_generator(this,function(p){switch(p.label){case 0:n=lQ.getConnectedPlayerIds(100,0),i=Math.floor(Math.random()*n.length),a=lQ.getPlayerId(),r=n[i];return[4,lZ.challenge.friend.processAsync({playerId:a,opponentId:r})];case 1:p.sent();return[2]}})}),function(){return k.apply(this,arguments)})},{key:"processJoinChallengeAsync",value:(C=I(function(){var n,i,a,r,p;return _ts_generator(this,function(d){switch(d.label){case 0:n=this.getMatchState(),i=n.id,a=n.customData,r=a.playerId,p=a.opponentId;if(!lY.isString(i))throw new Error("Invalid match id");if(!lY.isString(r))throw new Error("Invalid player id");if(!lY.isString(p))throw new Error("Invalid opponent id");return[4,lZ.challenge.join.processAsync({matchId:i,playerId:r,opponentId:p})];case 1:d.sent();return[2]}})}),function(){return C.apply(this,arguments)})},{key:"getMatchState",value:function(){var n=lZ.getMatchState();if(!n)throw new Error("Match state not found");return n}},{key:"getMatchMode",value:function(){var n=this.getMatchState();return lY.isString(n.mode)?n.mode:null}},{key:"getTournamentsAsync",value:(S=I(function(){var n;return _ts_generator(this,function(i){switch(i.label){case 0:i.trys.push([0,2,,3]);return[4,GameSDK.tournament.getTournamentsAsync()];case 1:return[2,i.sent()];case 2:n=i.sent();return[2,(console.error(n),[])];case 3:return[2]}})}),function(){return S.apply(this,arguments)})},{key:"createTournamentPayload",value:function(){var n,i,a=lJ.generateObjectId(),r=lQ.getPlayerId(),p=this.getMatchState().profiles;return{score:null!==(n=null===(i=(void 0===p?{}:p)[r])||void 0===i?void 0:i.score)&&void 0!==n?n:0,playerId:r,mode:lW.Modes.TOURNAMENT,name:this.createTournamentName(),leaderboardId:a,payload:{playerId:r,leaderboardId:a}}}},{key:"createTournamentName",value:function(){var n=lQ.getPlayer().name,i=void 0===n?null:n;if(i){var a=i.substring(0,7),r="".concat(a.split(" ")[0]||a,"'s Tournament"),p=lJ.removeDiacritics(r);return"".concat(p)}return"Tournament"}}],[{key:"inst",get:function(){return this._instance||(this._instance=new e),this._instance}},{key:"startMatchAsync",value:(b=I(function(n){var i,a,r;return _ts_generator(this,function(p){switch(p.label){case 0:p.trys.push([0,10,,11]);i=null!=n?n:this.inst.getMatchMode(),a=lW.Modes;switch(i){case a.SINGLE:return[3,1];case a.TOURNAMENT:return[3,3];case a.CHALLENGE_FRIEND:return[3,5]}return[3,7];case 1:return[4,this.inst.processStartSingleModeAsync()];case 2:p.sent();return[3,9];case 3:return[4,this.inst.processStartTournamentModeAsync()];case 4:p.sent();return[3,9];case 5:return[4,this.inst.processStartChallengeModeAsync()];case 6:p.sent();return[3,9];case 7:return[4,this.inst.processStartSingleModeAsync()];case 8:p.sent();p.label=9;case 9:return[3,11];case 10:r=p.sent();console.warn("startMatchAsync",r);return[3,11];case 11:return[2]}})}),function(n){return b.apply(this,arguments)})},{key:"setProfileMatchDataAsync",value:(g=I(function(n){var i;return _ts_generator(this,function(a){switch(a.label){case 0:a.trys.push([0,2,,3]);return[4,lZ.handler.setProfileData(n)];case 1:a.sent();return[3,3];case 2:i=a.sent();console.warn("setProfileMatchDataAsync",i);return[3,3];case 3:return[2]}})}),function(n){return g.apply(this,arguments)})},{key:"setMatchCustomDataAsync",value:(m=I(function(n){var i;return _ts_generator(this,function(a){switch(a.label){case 0:a.trys.push([0,2,,3]);return[4,lZ.handler.setMatchCustomData(n)];case 1:a.sent();return[3,3];case 2:i=a.sent();console.warn("setMatchCustomDataAsync",i);return[3,3];case 3:return[2]}})}),function(n){return m.apply(this,arguments)})},{key:"setLeaderboardScoreAsync",value:(d=I(function(n){var i;return _ts_generator(this,function(a){switch(a.label){case 0:a.trys.push([0,2,,3]);return[4,lZ.handler.setLeaderboardScore(n)];case 1:a.sent();return[3,3];case 2:i=a.sent();console.warn("setLeaderboardScoreAsync",i);return[3,3];case 3:return[2]}})}),function(n){return d.apply(this,arguments)})},{key:"finishMatchAsync",value:(p=I(function(){var n,i,a;return _ts_generator(this,function(r){switch(r.label){case 0:r.trys.push([0,10,,11]);n=this.inst.getMatchMode(),i=GameCore.Match.Modes;switch(n){case i.SINGLE:return[3,1];case i.TOURNAMENT:return[3,3];case i.CHALLENGE_FRIEND:return[3,5]}return[3,7];case 1:return[4,this.inst.processFinishSingleModeAsync()];case 2:r.sent();return[3,9];case 3:return[4,this.inst.processFinishTournamentModeAsync()];case 4:r.sent();return[3,9];case 5:return[4,this.inst.processFinishChallengeModeAsync()];case 6:r.sent();return[3,9];case 7:return[4,this.inst.processFinishSingleModeAsync()];case 8:r.sent();r.label=9;case 9:return[3,11];case 10:a=r.sent();console.warn("finishMatchAsync",a);return[3,11];case 11:return[2]}})}),function(){return p.apply(this,arguments)})},{key:"createTournamentAsync",value:(a=I(function(){var n,i,a,r;return _ts_generator(this,function(p){switch(p.label){case 0:n=!1;return[4,this.inst.getTournamentsAsync()];case 1:if(p.sent().find(function(n){var i,a=JSON.parse(null!==(i=n.getPayload())&&void 0!==i?i:"{}");return"DEFAULT"===n.getTournamentType()&&a.playerId===lQ.getPlayerId()}))return[2,!1];i=this.inst.createTournamentPayload();p.label=2;case 2:p.trys.push([2,4,,5]);return[4,lZ.tournament.create.processAsync(i)];case 3:p.sent();a=i.leaderboardId;l$.addLeaderboard({name:a,type:"tournament",autoSortRank:!0,leaderboardId:a}),n=!0;return[3,5];case 4:r=p.sent();console.warn("processCreateTournament",r);return[3,5];case 5:return[2,n]}})}),function(){return a.apply(this,arguments)})},{key:"joinTournamentAsync",value:(i=I(function(n){var i;return _ts_generator(this,function(a){switch(a.label){case 0:i=lQ.getPlayerId();return[4,lZ.tournament.join.processAsync({tournamentId:n,playerId:i})];case 1:a.sent();return[2]}})}),function(n){return i.apply(this,arguments)})},{key:"continueTournamentAsync",value:(n=I(function(n){var i;return _ts_generator(this,function(a){switch(a.label){case 0:i=lQ.getPlayerId();return[4,lZ.tournament.continue.processAsync({playerId:i,contextId:n})];case 1:a.sent();return[2]}})}),function(i){return n.apply(this,arguments)})}]),e}();K._RF.pop(),K._RF.push({},"a9bc11SkV9L/5L+Y+fhswfJ","FinishState",void 0);var l1=globalThis.game.player,l2=function(n){i(s,n);var p,d=a(s);function s(n){var i;return r(this,s),i=d.call(this,n),k.turnUpMusic(),i.finishGameAsync(),i}return y(s,[{key:"load",value:function(){var n=this.manager.createLoadingState();this.manager.change(n)}},{key:"initialize",value:function(){var n=this.manager.createInitializeState();this.manager.change(n)}},{key:"ready",value:function(){}},{key:"draw",value:function(){}},{key:"attack",value:function(){}},{key:"escape",value:function(){}},{key:"death",value:function(){}},{key:"finish",value:function(){}},{key:"update",value:function(){}},{key:"finishGameAsync",value:(p=I(function(){var n,i,a,r;return _ts_generator(this,function(p){switch(p.label){case 0:p.trys.push([0,2,,3]);if(!this.game)return[2];n=this.game.inkCapacityController;if(!n)return[2];i=this.data.level,a=1e3*(void 0===i?0:i)+100*n.getStarRating();l1.getBestScore()<a&&l1.setBestScore(a);return[4,l0.finishMatchAsync()];case 1:p.sent();return[3,3];case 2:r=p.sent();console.error("finishGameAsync",r);return[3,3];case 3:return[2]}})}),function(){return p.apply(this,arguments)})}]),s}(lN);K._RF.pop(),K._RF.push({},"37a5cRy3ANBGpVlH3wyS3Ra","InitializeState",void 0);var l3=function(n){i(l,n);var p,d,m=a(l);function l(n){var i;return r(this,l),i=m.call(this,n),"CrazyGames"===GameSDK.getSDKName()&&i.processCrazyGamesRequirements(),i.enableUI(),i.disableHintButtonForEarlyLevels(),i.clearHint(),i.clearGameObjects(),i.createGameObjects(),i.initInkCapacity(),i.initCountdown(),i.updateHeader(),i.showTutorialUI(),i.startGameAsync().then(function(){i.closeLoadingScreen(),i.manager.ready()}),i}return y(l,[{key:"processCrazyGamesRequirements",value:function(){"gameplayStart"in GameSDK.extra&&GameSDK.extra.gameplayStart(),this.showInterAdsCrazyGames()}},{key:"disableHintButtonForEarlyLevels",value:function(){if(this.game){var n=this.data.level;n&&n<=3&&this.game.uiManager.disableHintButton()}}},{key:"showInterAdsCrazyGames",value:(d=I(function(){var n;return _ts_generator(this,function(i){switch(i.label){case 0:n=this.game;if(!n)return[3,2];k.stopAllSounds();return[4,N.showInterstitialAdAsync({forLevel:this.data.level,includeSDK:["CrazyGames"]})];case 1:n=(i.sent()&&this.game.disableRewardAdsItemForCrazyGames(),k.turnUpMusic());i.label=2;case 2:return[2]}})}),function(){return d.apply(this,arguments)})},{key:"load",value:function(){if(GameCore.Utils.Valid.isDebugger()){var n=this.manager.createLoadingState();this.manager.change(n)}}},{key:"initialize",value:function(){}},{key:"ready",value:function(){var n=this.manager.createReadyState();this.manager.change(n)}},{key:"draw",value:function(){}},{key:"attack",value:function(){}},{key:"escape",value:function(){var n=this.manager.createEscapeState();this.manager.change(n)}},{key:"death",value:function(){var n=this.manager.createDeathState();this.manager.change(n)}},{key:"finish",value:function(){}},{key:"update",value:function(){}},{key:"closeLoadingScreen",value:function(){L.closeScreen(O.LOADING_SCREEN)}},{key:"enableUI",value:function(){var n;null===(n=this.game)||void 0===n||n.uiManager.enableUI()}},{key:"clearHint",value:function(){var n;null===(n=this.game)||void 0===n||null===(n=n.hint)||void 0===n||n.reset()}},{key:"clearGameObjects",value:function(){var n,i;null!==(n=this.game)&&void 0!==n&&n.lineDrawer&&null!==(i=this.game)&&void 0!==i&&i.gameObjects&&(this.game.lineDrawer.clearLines(),this.game.gameObjects.clearObjects())}},{key:"createGameObjects",value:function(){var n,i=this.data.levelData;i&&(null===(n=this.game)||void 0===n||null===(n=n.gameObjects)||void 0===n||n.spawnObjects(i))}},{key:"initInkCapacity",value:function(){if(this.game){var n=this.data.levelData;if(n){var i=this.game.inkCapacityController,a=n.lnk,r=void 0===a?[]:a;i.init(r)}}}},{key:"initCountdown",value:function(){var n;null===(n=this.game)||void 0===n||n.uiManager.initCountdown()}},{key:"updateHeader",value:function(){var n;if(null!==(n=this.game)&&void 0!==n&&n.hint){var i=this.game.inkCapacityController.getStarRating();this.game.uiManager.setProgressStars(i);var a=this.game.inkCapacityController.getInkLevelPercentage();this.game.uiManager.setProgressBarPercentage(a),this.game.hint.getIsHintShow()||this.game.uiManager.startCountDownHeaderHintBubbleAnim()}}},{key:"showTutorialUI",value:function(){var n,i;if(this.game){var a=this.data,r=a.level,p=a.levelData;if(r&&p&&!(r>3)&&null!==(n=this.game)&&void 0!==n&&n.hint&&null!==(i=this.game)&&void 0!==i&&i.uiManager){var d=p.tips,y=s8.transformPointsFromMapToDrawAreaCoordinate(d);this.game.hint.showHint(y,!0),this.game.uiManager.stopCountDownHeaderHintBubbleAnim()}}}},{key:"startGameAsync",value:(p=I(function(){var n;return _ts_generator(this,function(i){switch(i.label){case 0:i.trys.push([0,2,,3]);if(this.data.isFromLoader)return[2,void this.updateGameData({isFromLoader:!1})];return[4,l0.startMatchAsync()];case 1:i.sent();return[3,3];case 2:n=i.sent();console.error("startGameAsync",n);return[3,3];case 3:return[2]}})}),function(){return p.apply(this,arguments)})}]),l}(lN);K._RF.pop(),K._RF.push({},"a8496IbdA1EnY7sv4ApuaJW","LoadingState",void 0);var l4=function(n){i(o,n);var p=a(o);function o(n){var i;return r(this,o),(i=p.call(this,n)).handleMapLoaded=function(n,a){if(n)console.error("Failed to load level",n);else{var r=a.json;i.updateGameData({levelData:r});var p,d,y=i.data.level;if(y)null===(p=i.game)||void 0===p||null===(p=p.gameMap)||void 0===p||p.preloadLevel(y+1);if(i.loadingScreenFlag)null===(d=i.game)||void 0===d||d.scheduleOnce(function(){i.initialize()},.5);else i.initialize()}},i.loadingScreenFlag=!i.isLevelAlreadyLoaded(),i.loadingScreenFlag&&L.showLoadingScreen(),i.stopHint(),i.loadGameMap(),i.updateLevelText(),i}return y(o,[{key:"load",value:function(){}},{key:"initialize",value:function(){var n=this.manager.createInitializeState();this.manager.change(n)}},{key:"ready",value:function(){}},{key:"draw",value:function(){}},{key:"attack",value:function(){}},{key:"escape",value:function(){}},{key:"death",value:function(){}},{key:"finish",value:function(){}},{key:"update",value:function(){}},{key:"isLevelAlreadyLoaded",value:function(){var n,i,a=this.data.level;if(!a)throw new Error("Level is not defined");return null!==(n=null===(i=this.game)||void 0===i||null===(i=i.gameMap)||void 0===i?void 0:i.isLevelAlreadyLoaded(a))&&void 0!==n&&n}},{key:"stopHint",value:function(){var n;null===(n=this.game)||void 0===n||null===(n=n.hint)||void 0===n||n.hideHint()}},{key:"loadGameMap",value:function(){var n,i=this.data.level;if(!i)throw new Error("Level is not defined");null===(n=this.game)||void 0===n||null===(n=n.gameMap)||void 0===n||n.loadLevel(i,this.handleMapLoaded)}},{key:"updateLevelText",value:function(){var n,i=this.data.level;i&&(null===(n=this.game)||void 0===n||n.uiManager.setLevelText(i))}}]),o}(lN);K._RF.pop(),K._RF.push({},"5ef69tJ5eNNv7o22H/XfSD2","ReadyState",void 0);var l5,l7=globalThis.game.analytics,l6=function(n){i(o,n);var p=a(o);function o(n){var i;return r(this,o),(i=p.call(this,n)).logLevelStartAnalytics(),i}return y(o,[{key:"load",value:function(){if(GameCore.Utils.Valid.isDebugger()){var n=this.manager.createLoadingState();this.manager.change(n)}}},{key:"initialize",value:function(){}},{key:"ready",value:function(){}},{key:"draw",value:function(){var n=this.manager.createDrawingState();this.manager.change(n)}},{key:"attack",value:function(){}},{key:"escape",value:function(){var n=this.manager.createEscapeState();this.manager.change(n)}},{key:"death",value:function(){if(GameCore.Utils.Valid.isDebugger()){var n=this.manager.createDeathState();this.manager.change(n)}}},{key:"finish",value:function(){}},{key:"update",value:function(){}},{key:"logLevelStartAnalytics",value:function(){if(this.game){var n=this.data.level,i=void 0===n?0:n,a=this.game.inkCapacityController.getStarRating();l7.levelStart(i,a)}}}]),o}(lN);K._RF.pop(),K._RF.push({},"bb0e3beWSxOOLCv7gjyg2s0","StateManager",void 0);var l9,l8,ue,ut,un,ui,ua,uo,ur,us,ul,uu,uc,uh,up,ud=(0,q.ccclass)("StateManager")(l5=function(n){i(o,n);var p=a(o);function o(){return r(this,o),p.apply(this,arguments)}return y(o,[{key:"init",value:function(){this.state=new l4(this)}},{key:"change",value:function(n){this.state=n}},{key:"load",value:function(){this.state.load()}},{key:"initialize",value:function(){this.state.initialize()}},{key:"isInitialize",value:function(){return _instanceof(this.state,l3)}},{key:"ready",value:function(){this.state.ready()}},{key:"isReady",value:function(){return _instanceof(this.state,l6)}},{key:"draw",value:function(){this.state.draw()}},{key:"isDrawing",value:function(){return _instanceof(this.state,lz)}},{key:"attack",value:function(){this.state.attack()}},{key:"isAttacking",value:function(){return _instanceof(this.state,lG)}},{key:"escape",value:function(){this.state.escape()}},{key:"isSurviving",value:function(){return _instanceof(this.state,lj)}},{key:"death",value:function(){this.state.death()}},{key:"isFailed",value:function(){return _instanceof(this.state,lF)}},{key:"finish",value:function(){this.state.finish()}},{key:"isFinished",value:function(){return _instanceof(this.state,l2)}},{key:"update",value:function(n){this.state&&this.state.update(n)}},{key:"createInitializeState",value:function(){return new l3(this)}},{key:"createLoadingState",value:function(){return new l4(this)}},{key:"createReadyState",value:function(){return new l6(this)}},{key:"createDrawingState",value:function(){return new lz(this)}},{key:"createAttackingState",value:function(){return new lG(this)}},{key:"createEscapeState",value:function(){return new lj(this)}},{key:"createDeathState",value:function(){return new lF(this)}},{key:"createFinishState",value:function(){return new l2(this)}}]),o}(ea))||l5;K._RF.pop(),K._RF.push({},"9e40aEq56tMKLFoeACyl+eH","Clock",void 0);var uv,uy,uf,um,ug,ub,uS,uC,uk=q.ccclass,uw=q.disallowMultiple,uE=q.property,uT=G.WaitForPassSecs,uR=(l9=uk("Clock"),l8=uE($),ue=uE(Y),ut=uE(el),un=uE(Y),ui=uE(Y),ua=uE(eo),l9(uo=uw((us=n((ur=function(n){i(u,n);var m=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=m.call.apply(m,[this].concat(a)),p(n,"timeText",us,d(n)),p(n,"clockContainer",ul,d(n)),p(n,"clockFill",uu,d(n)),p(n,"successIcon",uc,d(n)),p(n,"failIcon",uh,d(n)),p(n,"animation",up,d(n)),n.time=0,n.remaining=0,n.running=!1,n.timeShake=0,n.remainingToShake=0,n.handleUpdateConfig=function(i){n.enabled&&n.setTime(i.WaitForPassSecs)},n}return y(u,[{key:"__preload",value:function(){this.listenEvents()}},{key:"start",value:function(){this.init(),this.setTime(uT),this.setTimeToShake(1)}},{key:"init",value:function(){this.remaining=0,this.running=!1,this.node.active=!1}},{key:"listenEvents",value:function(){this.node.scene.on(g.GAMEPLAY_UPDATE_CONFIG,this.handleUpdateConfig)}},{key:"setTime",value:function(n){console.info("[Clock] setTime",n),this.time=n,this.timeText.string=Math.ceil(n).toString()}},{key:"setTimeToShake",value:function(n){this.timeShake=n,this.remainingToShake=0}},{key:"startCountdown",value:function(){this.running=!0,this.remaining=this.time,this.remainingToShake=this.timeShake,this.node.active=!0,this.failIcon.active=!1,this.successIcon.active=!1}},{key:"pause",value:function(){this.running=!1}},{key:"resume",value:function(){this.running=!0}},{key:"showUncompletedMark",value:function(){this.failIcon.active=!0,eF(this.failIcon).set({scale:new ep(0,0,1)}).to(.5,{scale:new ep(1,1,1)},{easing:"smooth"}).start()}},{key:"showCompletedMark",value:function(){this.successIcon.active=!0,eF(this.successIcon).set({scale:new ep(0,0,1)}).to(.5,{scale:new ep(1,1,1)},{easing:"smooth"}).start()}},{key:"endCountDown",value:function(){this.running=!1,this.node.scene.emit(aL.TIME_OUT)}},{key:"update",value:function(n){this.running&&(this.remaining<=0?this.endCountDown():(this.remainingToShake<=0&&(this.playShakeAnimation(),this.remainingToShake=this.timeShake),this.remaining-=n,this.remainingToShake-=n,this.updateLabel(),this.clockFill.fillRange=this.remaining/this.time))}},{key:"updateLabel",value:function(){var n=Math.ceil(this.remaining).toString();this.timeText.string=n}},{key:"playShakeAnimation",value:function(){var n="Shake";this.animation.clips.some(function(i){return!(!i||i.name!==n)})?this.animation.play(n):console.warn("SettingsScreen: clip not found")}}]),u}(ea)).prototype,"timeText",[l8],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ul=n(ur.prototype,"clockContainer",[ue],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),uu=n(ur.prototype,"clockFill",[ut],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),uc=n(ur.prototype,"successIcon",[un],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),uh=n(ur.prototype,"failIcon",[ui],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),up=n(ur.prototype,"animation",[ua],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),uo=ur))||uo)||uo);K._RF.pop(),K._RF.push({},"7c115t9HKlH6ZfnhCnLAnpe","Star",void 0);var uA,u_,uP,uB,uL,uO,uD,uI,uN,uG,uM,uF=q.ccclass,uz=q.property,ux=q.requireComponent,uU=(uv=uF("Star"),uy=ux(eo),uf=uz(ea),um=uz(eo),uv(ug=uy((uS=n((ub=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=g.call.apply(g,[this].concat(a)),p(n,"starAppearance",uS,d(n)),p(n,"animation",uC,d(n)),n.isAppear=!1,n.initialPosition=new ep,n}return y(u,[{key:"onLoad",value:function(){this.initialPosition=this.node.position.clone(),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"resetPosition",value:function(){this.node.setPosition(this.initialPosition)}},{key:"show",value:function(){this.starAppearance.node.active=!0,this.isAppear=!0}},{key:"hide",value:function(){this.starAppearance.node.active=!1,this.isAppear=!1}},{key:"playAnimation",value:function(){this.animation.stop();this.animation.clips.some(function(n){return!(!n||"UpAndDown"!==n.name)})?this.animation.play("UpAndDown"):console.warn("SettingsScreen: clip not found")}},{key:"stopAnimation",value:function(){this.animation.stop()}}]),u}(ea)).prototype,"starAppearance",[uf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),uC=n(ub.prototype,"animation",[um],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ug=ub))||ug)||ug);K._RF.pop(),K._RF.push({},"09f0bRvi+1OQZiIGBFqdNzq","LevelProgressBar",void 0);var uH,uj,uV,uW,uK,uq,uY,uJ,uX,uZ,uQ,u$,u0,u1,u2,u3,u4,u5=q.ccclass,u7=q.property,u6=(uA=u5("LevelProgressBar"),u_=u7(eq),uP=u7(uU),uB=u7(uU),uL=u7(uU),uA((uI=n((uD=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=g.call.apply(g,[this].concat(a)),p(n,"progressBar",uI,d(n)),p(n,"leftStar",uN,d(n)),p(n,"midStar",uG,d(n)),p(n,"rightStar",uM,d(n)),n.toProgress=1,n.progressStep=0,n}return y(u,[{key:"onLoad",value:function(){this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"start",value:function(){this.toProgress=1,this.progressStep=0,this.runStartsAnimation()}},{key:"update",value:function(){var n=this.progressBar.getComponent(el);n&&(this.progressBar.progress>=1?n.type=el.Type.SIMPLE:n.type=el.Type.TILED),this.progressBar.progress-this.progressStep<this.toProgress?this.progressBar.progress!==this.toProgress&&(this.progressBar.progress=this.toProgress):this.progressBar.progress-=this.progressStep}},{key:"runStartsAnimation",value:function(){this.leftStar.isAppear&&this.midStar.isAppear&&this.rightStar.isAppear||(this.leftStar.show(),this.midStar.show(),this.rightStar.show(),this.runStarAnimation(this.leftStar),this.runStarAnimation(this.midStar),this.runStarAnimation(this.rightStar))}},{key:"runStarAnimation",value:function(n){n.resetPosition(),n.playAnimation()}},{key:"stopStarAnimation",value:function(n){n.isAppear&&(n.hide(),n.stopAnimation(),n.resetPosition(),k.playSound(R.LOST_STAR_IN_GAMEPLAY))}},{key:"setProgress",value:function(n){this.toProgress=n/100,this.progressStep=(this.progressBar.progress-this.toProgress)/60*16}},{key:"setStars",value:function(n){switch(n){case 1:this.stopStarAnimation(this.rightStar),this.stopStarAnimation(this.midStar);break;case 2:this.stopStarAnimation(this.rightStar);break;default:this.runStartsAnimation()}}},{key:"reset",value:function(){this.progressBar.progress=1}}]),u}(ea)).prototype,"progressBar",[u_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),uN=n(uD.prototype,"leftStar",[uP],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),uG=n(uD.prototype,"midStar",[uB],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),uM=n(uD.prototype,"rightStar",[uL],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),uO=uD))||uO);K._RF.pop(),K._RF.push({},"61791zAr2tJR4p22EZ5QRfk","Header",void 0);var u9,u8,ce,ct,cn,ci,ca,co,cr,cs,cl,cu,cc,ch,cp,cd,cv,cy,cf,cm,cg,cb,cS,cC,ck,cw,cE,cT,cR,cA,c_,cP,cB,cL,cO,cD,cI,cN,cG,cM,cF,cz,cx,cU,cH,cj,cV,cW,cK,cq,cY,cJ,cX,cZ=q.ccclass,cQ=q.property,c$=globalThis.game,c0=c$.language,c1=c$.player,c2=(uH=cZ("Header"),uj=cQ($),uV=cQ(u6),uW=cQ(tw),uK=cQ(Y),uq=cQ(Y),uY=cQ(Y),uJ=cQ(Y),uH((uQ=n((uZ=function(n){i(c,n);var g,b=a(c);function c(){var n;r(this,c);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=b.call.apply(b,[this].concat(a)),p(n,"levelText",uQ,d(n)),p(n,"levelProgressBar",u$,d(n)),p(n,"hintBubbleAnim",u0,d(n)),p(n,"pauseNode",u1,d(n)),p(n,"replayNode",u2,d(n)),p(n,"hintNode",u3,d(n)),p(n,"skipNode",u4,d(n)),n.handlePlayBubble=function(){n.hintBubbleAnim.play(),n.startCountDownHintBubble()},n}return y(c,[{key:"onLoad",value:function(){this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"handleClickedPauseGame",value:function(){this.showSettingScreen(),this.node.scene.emit(aL.GAME_PAUSE)}},{key:"handleClickedReplayGame",value:function(){var n,i=(null!==(n=c1.getGameData())&&void 0!==n?n:{}).level,a=void 0===i?1:i;this.node.scene.emit(aL.GAME_REPLAY,{level:a})}},{key:"handleClickedHintGame",value:function(){this.node.scene.emit(aL.SHOW_HINT)}},{key:"handleClickedSkipLevel",value:(g=I(function(){return _ts_generator(this,function(n){this.node.scene.emit(aL.SKIP_LEVEL);return[2]})}),function(){return g.apply(this,arguments)})},{key:"showSettingScreen",value:function(){L.openScreen(O.SETTINGS_SCREEN,{})}},{key:"setLevelText",value:function(n){var i=c0.getText("level");this.levelText.string="".concat(i," ").concat(n)}},{key:"setProgress",value:function(n){this.levelProgressBar.setProgress(n)}},{key:"setProgressStars",value:function(n){this.levelProgressBar.setStars(n)}},{key:"startCountDownHintBubble",value:function(){this.schedule(this.handlePlayBubble,30)}},{key:"stopCountDownHintBubble",value:function(){this.unschedule(this.handlePlayBubble)}},{key:"disableButtons",value:function(){this.enableBtnNode(this.pauseNode,!1,!0),this.enableBtnNode(this.replayNode,!1,!0),this.enableBtnNode(this.hintNode,!1,!0),this.enableBtnNode(this.skipNode,!1,!0)}},{key:"enableButtons",value:function(){this.enableBtnNode(this.pauseNode,!0,!0),this.enableBtnNode(this.replayNode,!0,!0),this.enableBtnNode(this.hintNode,!0,!0),this.enableBtnNode(this.skipNode,!0,!0)}},{key:"disableRewardAdsButton",value:function(){this.enableBtnNode(this.hintNode,!1,!1),this.enableBtnNode(this.skipNode,!1,!1)}},{key:"disableHintButton",value:function(){this.enableBtnNode(this.hintNode,!1,!0)}},{key:"enableBtnNode",value:function(n,i,a){var r=n.getComponent(en);if(r&&(r.interactable=i),n.active=a,a){var p=n.getComponent(t5);p&&p.changeState(i)}}}]),c}(ea)).prototype,"levelText",[uj],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),u$=n(uZ.prototype,"levelProgressBar",[uV],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),u0=n(uZ.prototype,"hintBubbleAnim",[uW],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),u1=n(uZ.prototype,"pauseNode",[uK],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),u2=n(uZ.prototype,"replayNode",[uq],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),u3=n(uZ.prototype,"hintNode",[uY],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),u4=n(uZ.prototype,"skipNode",[uJ],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),uX=uZ))||uX);K._RF.pop(),K._RF.push({},"151afQBVDpOYpTjtwP+wYH+","DevTools",void 0);var c3,c4,c5,c7,c6,c9,c8,he,ht,hn=q.ccclass,hi=q.property,ha=(u9=hn("DevToolsContainer"),u8=hi(Y),ce=hi(Y),ct=hi(Y),cn=hi(Y),ci=hi(Y),ca=hi(Y),co=hi(Y),cr=hi(Y),cs=hi(Y),cl=hi(Y),cu=hi(Y),cc=hi(Y),ch=hi(Y),cp=hi(Y),cd=hi(Y),cv=hi(Y),cy=hi(Y),cf=hi(Y),cm=hi(Y),cg=hi(Y),cb=hi(Y),cS=hi(Y),cC=hi(Y),ck=hi(Y),cw=hi(Y),u9((cR=n((cT=function(n){i(c,n);var b=a(c);function c(){var n;r(this,c);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=b.call.apply(b,[this].concat(a)),p(n,"devToolsButton",cR,d(n)),p(n,"winLevelButton",cA,d(n)),p(n,"loseLevelButton",c_,d(n)),p(n,"buildVersionButton",cP,d(n)),p(n,"prevLevelButton",cB,d(n)),p(n,"nextLevelButton",cL,d(n)),p(n,"selectLevelButton",cO,d(n)),p(n,"hintButton",cD,d(n)),p(n,"physicButton",cI,d(n)),p(n,"bundleButton",cN,d(n)),p(n,"beehiveButton",cG,d(n)),p(n,"dogeButton",cM,d(n)),p(n,"thornBallButton",cF,d(n)),p(n,"bigBeeButton",cz,d(n)),p(n,"thornButton",cx,d(n)),p(n,"airFanButton",cU,d(n)),p(n,"brickButton",cH,d(n)),p(n,"grassButton",cj,d(n)),p(n,"grassDarkButton",cV,d(n)),p(n,"lineButton",cW,d(n)),p(n,"poisonButton",cK,d(n)),p(n,"poisonSurfaceButton",cq,d(n)),p(n,"waterButton",cY,d(n)),p(n,"dangerAreaButton",cJ,d(n)),p(n,"dashboardButton",cX,d(n)),n.isActive=!0,n.gameplay=null,n.gameObjects=null,n.currentSpawnObjId=-1,n.handleClickDashboardButton=function(){M.switchToDashboardScene()},n.handleClickDevToolsButton=function(){n.isActive?(n.hideAllButtons(),n.isActive=!1):(n.showAllButtons(),n.isActive=!0)},n.handleClickPrevLevelButton=function(){var i=n.getCurrentLevel();i&&n.node.scene.emit(aL.SELECT_LEVEL,{level:i-1})},n.handleClickNextLevelButton=function(){var i=n.getCurrentLevel();i&&n.node.scene.emit(aL.SELECT_LEVEL,{level:i+1})},n.handleClickHintButton=function(){n.node.scene.emit(aL.SHOW_HINT,{noAd:!0})},n.handleClickBuildVersionButton=function(){var n=globalThis.game.getBuildVersion();L.showNotificationScreen("Build version: ".concat(n))},n.handleClickPhysicButton=function(){var n=eY.Aabb,i=eY.Pair,a=eY.CenterOfMass,r=eY.Joint,p=eY.Shape;ej.instance.debugDrawFlags=n|i|a|r|p},n.handleClickWinLevelButton=function(){n.node.scene.emit(aL.DOGE_SURVIVE)},n.handleClickLoseLevelButton=function(){n.node.scene.emit(aL.DOGE_DIE)},n.handleClickBeehiveButton=function(){n.currentSpawnObjId=i1.BEEHIVE_A,n.handleSpawnObject()},n.handleClickDogeButton=function(){n.currentSpawnObjId=i1.DOGE_A,n.handleSpawnObject()},n.handleClickThornBallButton=function(){n.currentSpawnObjId=i1.THORN_BALL,n.handleSpawnObject()},n.handleClickBigBeeButton=function(){n.currentSpawnObjId=i1.BIG_BEE,n.handleSpawnObject()},n.handleClickThornButton=function(){n.currentSpawnObjId=i1.THORN,n.handleSpawnObject()},n.handleClickAirFanButton=function(){n.currentSpawnObjId=i1.AIR_FAN,n.handleSpawnObject()},n.handleClickBrickButton=function(){n.currentSpawnObjId=i1.BRICK,n.handleSpawnPolygonObject()},n.handleClickGrassButton=function(){n.currentSpawnObjId=i1.GRASS,n.handleSpawnPolygonObject()},n.handleClickGrassDarkButton=function(){n.currentSpawnObjId=i1.GRASS_DARK,n.handleSpawnPolygonObject()},n.handleClickLineButton=function(){n.currentSpawnObjId=i1.LINE,n.handleSpawnPolygonObject()},n.handleClickPoisonButton=function(){n.currentSpawnObjId=i1.POISON,n.handleSpawnPolygonObject()},n.handleClickPoisonSurfaceButton=function(){n.currentSpawnObjId=i1.POISON_SURFACE,n.handleSpawnPolygonObject()},n.handleClickWaterButton=function(){n.currentSpawnObjId=i1.WATER,n.handleSpawnPolygonObject()},n.handleClickDangerAreaButton=function(){n.currentSpawnObjId=i1.DANGER_AREA,n.handleSpawnPolygonObject()},n}return y(c,[{key:"start",value:function(){this.handleToggleDevToolsButton(),this.handleGameLevelButtons(),this.handleItemButtons(),this.handleEngineButtons(),this.handleSpawnObjectButtons(),this.handleSwitchSceneButtons()}},{key:"handleToggleDevToolsButton",value:function(){this.devToolsButton.on(Y.EventType.TOUCH_START,this.handleClickDevToolsButton)}},{key:"handleGameLevelButtons",value:function(){this.winLevelButton.on(Y.EventType.TOUCH_START,this.handleClickWinLevelButton),this.loseLevelButton.on(Y.EventType.TOUCH_START,this.handleClickLoseLevelButton),this.prevLevelButton.on(Y.EventType.TOUCH_START,this.handleClickPrevLevelButton),this.nextLevelButton.on(Y.EventType.TOUCH_START,this.handleClickNextLevelButton)}},{key:"handleItemButtons",value:function(){this.hintButton.on(Y.EventType.TOUCH_START,this.handleClickHintButton)}},{key:"handleEngineButtons",value:function(){this.buildVersionButton.on(Y.EventType.TOUCH_START,this.handleClickBuildVersionButton),this.physicButton.on(Y.EventType.TOUCH_START,this.handleClickPhysicButton),this.bundleButton.on(Y.EventType.TOUCH_START,this.handleSwitchBundle)}},{key:"handleSpawnObjectButtons",value:function(){this.beehiveButton.on(Y.EventType.TOUCH_START,this.handleClickBeehiveButton),this.dogeButton.on(Y.EventType.TOUCH_START,this.handleClickDogeButton),this.thornBallButton.on(Y.EventType.TOUCH_START,this.handleClickThornBallButton),this.bigBeeButton.on(Y.EventType.TOUCH_START,this.handleClickBigBeeButton),this.thornButton.on(Y.EventType.TOUCH_START,this.handleClickThornButton),this.airFanButton.on(Y.EventType.TOUCH_START,this.handleClickAirFanButton),this.brickButton.on(Y.EventType.TOUCH_START,this.handleClickBrickButton),this.grassButton.on(Y.EventType.TOUCH_START,this.handleClickGrassButton),this.grassDarkButton.on(Y.EventType.TOUCH_START,this.handleClickGrassDarkButton),this.lineButton.on(Y.EventType.TOUCH_START,this.handleClickLineButton),this.poisonButton.on(Y.EventType.TOUCH_START,this.handleClickPoisonButton),this.poisonSurfaceButton.on(Y.EventType.TOUCH_START,this.handleClickPoisonSurfaceButton,this),this.waterButton.on(Y.EventType.TOUCH_START,this.handleClickWaterButton),this.dangerAreaButton.on(Y.EventType.TOUCH_START,this.handleClickDangerAreaButton)}},{key:"handleSwitchSceneButtons",value:function(){this.dashboardButton.on(Y.EventType.TOUCH_START,this.handleClickDashboardButton)}},{key:"injectGameplay",value:function(n){this.gameplay=n,this.gameObjects=n.gameObjects}},{key:"hideAllButtons",value:function(){var n=this;this.getComponentsInChildren(en).forEach(function(i){i.node.name!==n.devToolsButton.name&&(i.node.active=!1)})}},{key:"showAllButtons",value:function(){var n=this;this.getComponentsInChildren(en).forEach(function(i){i.node.name!==n.devToolsButton.name&&(i.node.active=!0)})}},{key:"getCurrentLevel",value:function(){if(!this.gameplay)return null;var n=this.gameplay.getGameData();return n&&n.level||null}},{key:"handleEnterSelectLevel",value:function(n){var i=Number(n.string);this.node.scene.emit(aL.SELECT_LEVEL,{level:i})}},{key:"handleSpawnObject",value:function(){var n;if(this.validateRequiredComponents(),-1!==this.currentSpawnObjId){var i={x:Math.floor(40*Math.random()),y:Math.floor(40*Math.random())},a={id:this.currentSpawnObjId,point:i};null===(n=this.gameObjects)||void 0===n||n.spawnObjectForDevTools(a)}}},{key:"handleSpawnPolygonObject",value:function(){var n;if(this.validateRequiredComponents(),-1!==this.currentSpawnObjId){var i={x:Math.floor(40*Math.random()),y:Math.floor(40*Math.random())},a={x:i.x+Math.floor(10*Math.random()),y:i.y},r={x:i.x,y:i.y+Math.floor(10*Math.random())},p=[i,a,r,{x:a.x,y:r.y}],d={id:this.currentSpawnObjId,point:p};null===(n=this.gameObjects)||void 0===n||n.spawnPolygonObjectForDevTools(d)}}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"handleSwitchBundle",value:function(){eu.emit(g.CHANGE_QUALITY_ASSETS)}}]),c}(ea)).prototype,"devToolsButton",[u8],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cA=n(cT.prototype,"winLevelButton",[ce],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),c_=n(cT.prototype,"loseLevelButton",[ct],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cP=n(cT.prototype,"buildVersionButton",[cn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cB=n(cT.prototype,"prevLevelButton",[ci],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cL=n(cT.prototype,"nextLevelButton",[ca],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cO=n(cT.prototype,"selectLevelButton",[co],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cD=n(cT.prototype,"hintButton",[cr],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cI=n(cT.prototype,"physicButton",[cs],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cN=n(cT.prototype,"bundleButton",[cl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cG=n(cT.prototype,"beehiveButton",[cu],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cM=n(cT.prototype,"dogeButton",[cc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cF=n(cT.prototype,"thornBallButton",[ch],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cz=n(cT.prototype,"bigBeeButton",[cp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cx=n(cT.prototype,"thornButton",[cd],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cU=n(cT.prototype,"airFanButton",[cv],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cH=n(cT.prototype,"brickButton",[cy],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cj=n(cT.prototype,"grassButton",[cf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cV=n(cT.prototype,"grassDarkButton",[cm],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cW=n(cT.prototype,"lineButton",[cg],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cK=n(cT.prototype,"poisonButton",[cb],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cq=n(cT.prototype,"poisonSurfaceButton",[cS],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cY=n(cT.prototype,"waterButton",[cC],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cJ=n(cT.prototype,"dangerAreaButton",[ck],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cX=n(cT.prototype,"dashboardButton",[cw],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cE=cT))||cE);K._RF.pop(),K._RF.push({},"a3b0f6zU+1D97PyszsgST1H","UIManager",void 0);var ho,hr,hs,hl,hu,hc,hh,hp,hd,hv,hy,hf,hm=q.ccclass,hg=q.property,hb=GameCore.Utils,hS=(c3=hm("UIManager"),c4=hg(uR),c5=hg(c2),c7=hg(ha),c3((c8=n((c9=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=g.call.apply(g,[this].concat(a)),p(n,"clock",c8,d(n)),p(n,"header",he,d(n)),p(n,"devTools",ht,d(n)),n.showDevTools=function(){n.devTools&&(n.devTools.node.active=!0)},n}return y(u,[{key:"onLoad",value:function(){this.validateRequiredComponents(),this.listensDevToolsEvents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"listensDevToolsEvents",value:function(){this.node.scene.on(ij.Events.UNLOCK_DEV_TOOLS,this.showDevTools)}},{key:"initDevTools",value:function(n){this.devTools&&(this.devTools.node.active=hb.Valid.isDebugger(),this.devTools.injectGameplay(n))}},{key:"setLevelText",value:function(n){this.header.setLevelText(n)}},{key:"initCountdown",value:function(){this.clock.init()}},{key:"startCountdown",value:function(){this.clock.startCountdown()}},{key:"pauseCountdown",value:function(){this.clock.pause()}},{key:"resumeCountdown",value:function(){this.clock.resume()}},{key:"showUncompletedMark",value:function(){this.clock.showUncompletedMark()}},{key:"showCompletedMark",value:function(){this.clock.showCompletedMark()}},{key:"setProgressBarPercentage",value:function(n){this.header.setProgress(n)}},{key:"setProgressStars",value:function(n){this.header.setProgressStars(n)}},{key:"startCountDownHeaderHintBubbleAnim",value:function(){this.header.startCountDownHintBubble()}},{key:"stopCountDownHeaderHintBubbleAnim",value:function(){this.header.stopCountDownHintBubble()}},{key:"disableUI",value:function(){this.header.disableButtons()}},{key:"enableUI",value:function(){this.header.enableButtons()}},{key:"disableHintButton",value:function(){this.header.disableHintButton()}},{key:"disableRewardAdsUI",value:function(){this.header.disableRewardAdsButton()}}]),u}(ea)).prototype,"clock",[c4],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),he=n(c9.prototype,"header",[c5],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ht=n(c9.prototype,"devTools",[c7],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),c6=c9))||c6);K._RF.pop(),K._RF.push({},"157f203vjtMma2FDvAlyM6h","Gameplay",void 0);var hC=q.ccclass,hk=q.requireComponent,hw=q.property,hE=globalThis.game.player,hT=(ho=hC("Gameplay"),hr=hk([ud,lI,lD]),hs=hw(lu),hl=hw(lL),hu=hw(lA),hc=hw(li),ho(hh=hr((hd=n((hp=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=g.call.apply(g,[this].concat(a)),p(n,"hint",hd,d(n)),p(n,"gameMap",hv,d(n)),p(n,"lineDrawer",hy,d(n)),p(n,"gameObjects",hf,d(n)),n.gameData=null,n.defaultData=null,n.handleStartGame=function(i){if(!i)throw new Error("handleStartGame: GameEvent payload is not defined");n.setGameData(i),n.stateManager.draw()},n.handlePauseGame=function(i){n.pauseGame(),k.pauseSound(R.BEE_FLYING),n.processCrazyGamesGameplayStop()},n.handleResumeGame=function(i){n.resumeGame(),k.resumeSound(R.BEE_FLYING),n.processCrazyGamesGameplayStart()},n.handleReplayGame=function(i){var a=D(D({},n.defaultData),i);n.setGameData(a),n.stateManager.initialize()},n.handleNextLevel=function(i){if(n.gameData){if(!i)throw new Error("handleNextLevel: GameEvent payload is not defined");var a=n.gameData,r=a.level,p=a.nextLevelCount,d=void 0===p?0:p,y=i.level,m=void 0===y?r:y;if(!m)throw new Error("Level is not defined");var g=m+1;hE.setGameData({level:g});var b=D(D(D({},n.defaultData),i),{},{level:g,nextLevelCount:d+1});n.setGameData(b),n.stateManager.load(),n.attemptCallCreateShortcut(),console.log("Next level",g)}},n.handleStartOver=function(i){hE.setGameData({level:1,passAllLevels:!1});var a=D(D(D({},n.defaultData),i),{},{level:1});n.setGameData(a),n.stateManager.load()},n.handleSelectLevel=function(i){var a;if(!i)throw new Error("handleSelectLevel: GameEvent payload is not defined");var r=i.level;if(r){var p=(null!==(a=hE.getGameData())&&void 0!==a?a:{}).totalLevel,d=void 0===p?r:p,y=r<1?1:r;y=y>d?d:y;var m=D(D(D({},n.defaultData),i),{},{level:y});hE.setGameData({level:y}),n.setGameData(m),n.stateManager.load()}},n.handleClockTimeout=function(i){n.stateManager.escape()},n.handleDrawing=function(i){if(!i)throw new Error("handleDrawing: GameEvent payload is not defined");n.setGameData(i)},n.handleBeeDie=function(i){var a;(null===(a=n.gameObjects)||void 0===a?void 0:a.checkAllBeeDie())&&(n.stateManager.escape(),n.processCrazyGamesHappyTime())},n.handleBigBeeDie=function(i){var a;(null===(a=n.gameObjects)||void 0===a?void 0:a.checkAllBeeDie())&&(n.stateManager.escape(),n.processCrazyGamesHappyTime())},n.handleBeeAttack=function(i){n.stateManager.attack()},n.handleDogeDie=function(i){n.stateManager.death()},n.handleDogeSurvive=function(i){n.stateManager.escape()},n.handleShowHint=function(){var i=I(function(i){var a,r,p,d,y,m,g,b;return _ts_generator(this,function(S){switch(S.label){case 0:if(!((null===(a=n.hint)||void 0===a||!a.getIsHintShow())&&(n.stateManager.isAttacking()||n.stateManager.isReady())))return[3,3];d=(null!=i?i:{}).noAd,y=void 0!==d&&d;if(n.uiManager.stopCountDownHeaderHintBubbleAnim(),!!y)return[3,2];return[4,N.showRewardVideoAdAsync({})];case 1:if(!S.sent())return[2];S.label=2;case 2:m=(null!==(r=n.gameData)&&void 0!==r?r:{}).levelData;if(!m)throw new Error("Level data is not defined");g=m.tips,b=s8.transformPointsFromMapToDrawAreaCoordinate(g);null===(p=n.hint)||void 0===p||p.showHint(b,!1);S.label=3;case 3:return[2]}})});return function(n){return i.apply(this,arguments)}}(),n.handleSkipLevel=function(){var i=I(function(i){var a;return _ts_generator(this,function(i){switch(i.label){case 0:a=n.stateManager.isAttacking()||n.stateManager.isReady();if(!a)return[3,2];return[4,N.showRewardVideoAdAsync({})];case 1:a=(i.sent()&&n.node.scene.emit(aL.DOGE_SURVIVE),n.node.scene.emit(aL.GAME_RESUME));i.label=2;case 2:return[2]}})});return function(n){return i.apply(this,arguments)}}(),n}return y(u,[{key:"__preload",value:function(){this.initComponents(),this.validateRequiredComponents(),this.listenInputEvents(),N.showBannerAds()}},{key:"initComponents",value:function(){this.initUIManager(),this.initStateManager(),this.initInputController(),this.initInkCapacityController()}},{key:"initUIManager",value:function(){var n;this.uiManager=null===(n=this.node.parent)||void 0===n?void 0:n.getComponentInChildren(hS)}},{key:"initStateManager",value:function(){this.stateManager=this.getComponent(ud)}},{key:"initInputController",value:function(){this.inputController=this.getComponent(lI)}},{key:"initInkCapacityController",value:function(){this.inkCapacityController=this.getComponent(lD)}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"listenInputEvents",value:function(){this.node.scene.on(aL.GAME_START,this.handleStartGame),this.node.scene.on(aL.GAME_PAUSE,this.handlePauseGame),this.node.scene.on(aL.GAME_RESUME,this.handleResumeGame),this.node.scene.on(aL.GAME_REPLAY,this.handleReplayGame),this.node.scene.on(aL.NEXT_LEVEL,this.handleNextLevel),this.node.scene.on(aL.START_OVER,this.handleStartOver),this.node.scene.on(aL.SELECT_LEVEL,this.handleSelectLevel),this.node.scene.on(aL.DRAWING,this.handleDrawing),this.node.scene.on(aL.TIME_OUT,this.handleClockTimeout),this.node.scene.on(aL.BEE_DIE,this.handleBeeDie),this.node.scene.on(aL.BIG_BEE_DIE,this.handleBigBeeDie),this.node.scene.on(aL.BEE_ATTACK,this.handleBeeAttack),this.node.scene.on(aL.DOGE_DIE,this.handleDogeDie),this.node.scene.on(aL.DOGE_SURVIVE,this.handleDogeSurvive),this.node.scene.on(aL.SHOW_HINT,this.handleShowHint),this.node.scene.on(aL.SKIP_LEVEL,this.handleSkipLevel)}},{key:"start",value:function(){this.initData(),this.initGame(),this.initDevTools()}},{key:"initDevTools",value:function(){this.uiManager.initDevTools(this)}},{key:"initData",value:function(){var n,i=(null!==(n=hE.getGameData())&&void 0!==n?n:{}).level,a=void 0===i?1:i;this.defaultData={level:a,gameplayMode:"level",nextLevelCount:0,isFromLoader:!1},this.setGameData(this.defaultData)}},{key:"initGame",value:function(){this.stateManager.init(),this.stateManager.load()}},{key:"setGameData",value:function(n){n&&(this.gameData=D(D({},this.gameData),n))}},{key:"getGameData",value:function(){return this.gameData}},{key:"pauseGame",value:function(){this.node.active=!1,this.node.pauseSystemEvents(!0),this.uiManager.pauseCountdown()}},{key:"resumeGame",value:function(){this.node.active=!0,this.node.resumeSystemEvents(!0),this.uiManager.resumeCountdown()}},{key:"attemptCallCreateShortcut",value:function(){var n,i=null!==(n=this.getGameData())&&void 0!==n?n:{},a=i.level,r=void 0===a?0:a,p=i.nextLevelCount;r<2||(void 0===p?0:p)<2||"checkAndCreateShortcutAsync"in GameSDK.extra&&GameSDK.extra.checkAndCreateShortcutAsync().catch(function(n){console.warn("checkAndCreateShortcutAsync",n)})}},{key:"processCrazyGamesGameplayStart",value:function(){"gameplayStart"in GameSDK.extra&&GameSDK.extra.gameplayStart()}},{key:"processCrazyGamesGameplayStop",value:function(){"gameplayStop"in GameSDK.extra&&GameSDK.extra.gameplayStop()}},{key:"processCrazyGamesHappyTime",value:function(){"happyTime"in GameSDK.extra&&GameSDK.extra.happyTime()}},{key:"disableRewardAdsItemForCrazyGames",value:function(){"CrazyGames"===GameSDK.getSDKName()&&this.uiManager.disableRewardAdsUI()}}]),u}(ea)).prototype,"hint",[hs],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),hv=n(hp.prototype,"gameMap",[hl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),hy=n(hp.prototype,"lineDrawer",[hu],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),hf=n(hp.prototype,"gameObjects",[hc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),hh=hp))||hh)||hh);K._RF.pop(),K._RF.push({},"bfd3fZcEttGVawFb2B3Gmqu","DangerArea",void 0);var hR,hA,h_,hP,hB,hL,hO,hD,hI,hN,hG,hM,hF,hz;(0,q.ccclass)("DangerArea")(function(n){i(o,n);var p=a(o);function o(){var n;r(this,o);for(var i=arguments.length,a=new Array(i),d=0;d<i;d++)a[d]=arguments[d];return(n=p.call.apply(p,[this].concat(a))).useBatch=!1,n.dangerPolygons=[],n}return y(o,[{key:"addDangerAreaPolygon",value:function(n){this.dangerPolygons.push(n)}},{key:"addRigidBody",value:function(){var n=this.node.addComponent(ek);n?(n.group=i2.MAIN_OBJECT,n.type=eC.Static):console.warn("Cannot add RigidBody2D")}},{key:"applyColliderForBatchDraw",value:function(){var n,i=this.dangerPolygons.map(function(n){return n.map(function(n){var i=n.x,a=n.y;return new eE(i,a)})}),a=T(i);try{for(a.s();!(n=a.n()).done;){var r=n.value,p=new Y;p.name=iq.DANGER_AREA,this.node.addChild(p),p.setPosition(0,0);var d=p.addComponent(ek);d.type=eC.Static,d.group=i2.MAIN_OBJECT;var y=p.addComponent(eG);y.points=r,y.apply()}}catch(n){a.e(n)}finally{a.f()}}},{key:"batchDrawAllDangerAreas",value:function(){if(!(this.dangerPolygons.length<1)){var n=this.node.getComponent(o8);if(!n)return console.warn("DangerArea: GraphicsPattern not found"),null;this.addRigidBody(),n.setColor("#fc03036d");var i,a=T(this.dangerPolygons);try{for(a.s();!(i=a.n()).done;){var r=i.value;n.draw(r)}}catch(n){a.e(n)}finally{a.f()}this.applyColliderForBatchDraw()}}}]),o}(ea));K._RF.pop(),K._RF.push({},"0daa9+mtbVHG5tVordU0a3q","Spider",void 0);var hx,hU,hH,hj,hV,hW,hK,hq=q.ccclass,hY=q.property;hR=hq("Spider"),hA=hY(Y),h_=hY(Y),hP=hY(Y),hB=hY(eT),hL=hY(ek),hO=hY(ey),hR((hI=n((hD=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=g.call.apply(g,[this].concat(a)),p(n,"spider",hI,d(n)),p(n,"web",hN,d(n)),p(n,"silk",hG,d(n)),n.isStunned=!1,p(n,"spiderCollider",hM,d(n)),p(n,"spiderRigidBody",hF,d(n)),p(n,"silkGraphics",hz,d(n)),n.onSpiderCollisionEnter=function(i,a){if(!n.isStunned){n.isStunned=!0;var r=a.getComponent(a5),p=a.getComponent(st);if(r||p){var d=n.spider.addComponent(eJ),y=n.spider.worldPosition,m=a.node,g=m.worldPosition,b=m.getComponent(ek);if(r){var S=r.findNearestCollider(y);d.connectedAnchor=S.offset.clone()}else d.connectedAnchor=new eE(y.x-g.x,y.y-g.y);d.autoCalcDistance=!1,d.maxLength=5,d.collideConnected=!1,d.connectedBody=b}}},n}return y(u,[{key:"onLoad",value:function(){this.spiderCollider=this.spider.getComponent(eT),this.spiderRigidBody=this.spider.getComponent(ek),this.silkGraphics=this.silk.getComponent(ey),this.validateRequiredComponents()}},{key:"onDestroy",value:function(){this.spiderCollider.off(eR.BEGIN_CONTACT,this.onSpiderCollisionEnter)}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"start",value:function(){this.enabled=!1,this.isStunned=!1,this.silkOffsetVector=new eE,this.spiderCollider.on(eR.BEGIN_CONTACT,this.onSpiderCollisionEnter)}},{key:"update",value:function(){if(this.enabled){if(this.drawSilk(),this.isStunned){var n=this.getVectorDataFromAToB(this.spider.worldPosition,this.web.worldPosition);this.spiderRigidBody.linearVelocity=n.vector.multiplyScalar(5),this.spiderRigidBody.linearDamping=0,this.isSpiderTooCloseToWeb()&&(this.spiderRigidBody.type=eC.Static,this.enabled=!1)}else{var i=this.spider.position.add3f(0,-3,0);this.spider.setPosition(i)}}}},{key:"drawSilk",value:function(){var n=this.web.position,i=this.spider.position,a=eA.toRadian(this.spider.eulerAngles.z);this.silkGraphics.clear(),this.silkGraphics.moveTo(n.x,n.y),this.silkOffsetVector.set(0,50).rotate(a),this.silkGraphics.lineTo(i.x+this.silkOffsetVector.x,i.y+this.silkOffsetVector.y),this.silkGraphics.stroke()}},{key:"isSpiderTooCloseToWeb",value:function(){var n=this.spider.position,i=this.web.position;return ep.distance(n,i)<40}}]),u}(an)).prototype,"spider",[hA],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),hN=n(hD.prototype,"web",[h_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),hG=n(hD.prototype,"silk",[hP],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),hM=n(hD.prototype,"spiderCollider",[hB],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),hF=n(hD.prototype,"spiderRigidBody",[hL],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),hz=n(hD.prototype,"silkGraphics",[hO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),hD));K._RF.pop(),K._RF.push({},"8fe7bkzdtdNfY7I8uaDov+b","EndlessHeader",void 0);var hJ,hX,hZ,hQ,h$,h0,h1,h2,h3,h4=q.ccclass,h5=q.property,h7=(hx=h4("EndlessHeader"),hU=h5(Y),hH=h5(Y),hx((hW=n((hV=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=g.call.apply(g,[this].concat(a)),p(n,"pauseNode",hW,d(n)),p(n,"replayNode",hK,d(n)),n}return y(u,[{key:"__preload",value:function(){this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"handleClickedPauseGame",value:function(){this.showSettingScreen(),this.node.scene.emit(aL.GAME_PAUSE)}},{key:"handleClickedReplayGame",value:function(){this.node.scene.emit(aL.GAME_REPLAY)}},{key:"showSettingScreen",value:function(){L.openScreen(O.SETTINGS_SCREEN,{})}},{key:"disableButtons",value:function(){this.enableBtnNode(this.pauseNode,!1,!0),this.enableBtnNode(this.replayNode,!1,!0)}},{key:"enableButtons",value:function(){this.enableBtnNode(this.pauseNode,!0,!0),this.enableBtnNode(this.replayNode,!0,!0)}},{key:"enableBtnNode",value:function(n,i,a){var r=n.getComponent(en);if(r&&(r.interactable=i),n.active=a,a){var p=n.getComponent(t5);p&&p.changeState(i)}}}]),u}(ea)).prototype,"pauseNode",[hU],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),hK=n(hV.prototype,"replayNode",[hH],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),hj=hV))||hj);K._RF.pop(),K._RF.push({},"bc951s11zREU72nQBqwoD3m","EndlessClock",void 0);var h6,h9,h8,pe,pt,pn,pi,pa,po,pr=q.ccclass,ps=q.disallowMultiple,pl=q.property,pu=(hJ=pr("EndlessClock"),hX=pl($),hZ=pl($),hQ=pl(eo),hJ(h$=ps((h1=n((h0=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=g.call.apply(g,[this].concat(a)),p(n,"timeText",h1,d(n)),p(n,"bestTimeText",h2,d(n)),p(n,"animation",h3,d(n)),n.elapsedTime=0,n.bestTime=0,n.running=!1,n}return y(u,[{key:"__preload",value:function(){this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"getScore",value:function(){return this.elapsedTime}},{key:"getBestScore",value:function(){return Math.max(this.bestTime,this.elapsedTime)}},{key:"setBestScore",value:function(n){this.bestTime=n;var i=Math.floor(n/60),a=Math.floor(n%60),r=i.toString().padStart(2,"0"),p=a.toString().padStart(2,"0");this.bestTimeText.string="".concat(r,":").concat(p)}},{key:"init",value:function(){this.running=!1,this.node.active=!0,this.animation.pause(),this.setElapsedTime(0),this.setBestScore(this.bestTime)}},{key:"startCounting",value:function(){this.running=!0,this.node.active=!0,this.animation.play(),this.setElapsedTime(0),this.setBestScore(this.bestTime)}},{key:"stopCounting",value:function(){this.running=!1,this.node.active=!1,this.animation.pause()}},{key:"pause",value:function(){this.running=!1,this.animation.pause()}},{key:"resume",value:function(){this.running=!0,this.animation.play()}},{key:"update",value:function(n){this.running&&this.setElapsedTime(this.elapsedTime+n)}},{key:"setElapsedTime",value:function(n){this.elapsedTime=n;var i=Math.floor(this.elapsedTime/60),a=Math.floor(this.elapsedTime%60),r=i.toString().padStart(2,"0"),p=a.toString().padStart(2,"0");this.timeText.string="".concat(r,":").concat(p),this.elapsedTime>this.bestTime&&this.setBestScore(this.elapsedTime)}}]),u}(ea)).prototype,"timeText",[hX],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h2=n(h0.prototype,"bestTimeText",[hZ],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h3=n(h0.prototype,"animation",[hQ],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h$=h0))||h$)||h$);K._RF.pop(),K._RF.push({},"346956Nk9hPgpT3ZCsaVr+P","EndlessUIManager",void 0);var pc,ph,pp,pd,pv,py,pf,pm,pg,pb,pS,pC,pk,pw,pE,pT,pR=q.ccclass,pA=q.property,p_=GameCore.Utils,pP=(h6=pR("EndlessUIManager"),h9=pA(pu),h8=pA(h7),pe=pA(ha),h6((pi=n((pn=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=g.call.apply(g,[this].concat(a)),p(n,"clock",pi,d(n)),p(n,"header",pa,d(n)),p(n,"devTools",po,d(n)),n.showDevTools=function(){n.devTools&&(n.devTools.node.active=!0)},n}return y(u,[{key:"onLoad",value:function(){this.validateRequiredComponents(),this.listensDevToolsEvents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"listensDevToolsEvents",value:function(){this.node.scene.on(ij.Events.UNLOCK_DEV_TOOLS,this.showDevTools)}},{key:"initDevTools",value:function(n){this.devTools&&(this.devTools.node.active=p_.Valid.isDebugger(),this.devTools.injectGameplay(n))}},{key:"getBestScore",value:function(){return this.clock.getBestScore()}},{key:"setBestScore",value:function(n){this.clock.setBestScore(n)}},{key:"initCounting",value:function(){this.clock.init()}},{key:"startCounting",value:function(){this.clock.startCounting()}},{key:"stopCounting",value:function(){this.clock.stopCounting()}},{key:"pauseCounting",value:function(){this.clock.pause()}},{key:"resumeCounting",value:function(){this.clock.resume()}},{key:"disableUI",value:function(){this.header.disableButtons()}},{key:"enableUI",value:function(){this.header.enableButtons()}}]),u}(ea)).prototype,"clock",[h9],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pa=n(pn.prototype,"header",[h8],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),po=n(pn.prototype,"devTools",[pe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),pt=pn))||pt);K._RF.pop(),K._RF.push({},"9d32c879Q1FRIas0BgO+iNP","EndlessGameplay",void 0);var pB=q.ccclass,pL=q.property,pO=q.requireComponent,pD=globalThis.game.player,pI=(pc=pB("EndlessGameplay"),ph=pO(Z),pp=pL({type:eO,group:"Thorns"}),pd=pL({type:Y,group:"Thorns"}),pv=pL({type:Y,group:"Thorns"}),py=pL({type:Y,group:"Thorns"}),pf=pL({type:Y,group:"Thorns"}),pm=pL(li),pc(pg=ph((pS=n((pb=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return(n=g.call.apply(g,[this].concat(a))).gameData=null,n.defaultData=null,p(n,"thornPrefab",pS,d(n)),p(n,"bottomThorns",pC,d(n)),p(n,"topThorns",pk,d(n)),p(n,"leftThorns",pw,d(n)),p(n,"rightThorns",pE,d(n)),p(n,"gameObjects",pT,d(n)),n.handleStartGame=function(i){if(!i)throw new Error("handleStartGame: GameEvent payload is not defined");n.setGameData(i),n.stateManager.play()},n.handlePauseGame=function(i){n.pauseGame(),k.pauseSound(R.BEE_FLYING),n.processCrazyGamesGameplayStop()},n.handleResumeGame=function(i){n.resumeGame(),k.resumeSound(R.BEE_FLYING),n.processCrazyGamesGameplayStart()},n.handleReplayGame=function(i){var a=D(D({},n.gameData),i);n.setGameData(a),n.stateManager.initialize(),n.node.active=!0,n.node.resumeSystemEvents(!0)},n.handleDogeDie=function(){n.stateManager.death(),n.attemptCallCreateShortcut()},n.handleBeeDie=function(i){var a;(null===(a=n.gameObjects)||void 0===a?void 0:a.checkAllBeeDie())&&n.processCrazyGamesHappyTime()},n.handleBigBeeDie=function(i){var a;(null===(a=n.gameObjects)||void 0===a?void 0:a.checkAllBeeDie())&&n.processCrazyGamesHappyTime()},n}return y(u,[{key:"__preload",value:function(){this.initComponents(),this.uiTransform=this.getComponent(Z),this.validateRequiredComponents(),this.listenInputEvents(),N.showBannerAds()}},{key:"initComponents",value:function(){this.initUIManager(),this.initStateManager()}},{key:"initUIManager",value:function(){var n;this.uiManager=null===(n=this.node.parent)||void 0===n?void 0:n.getComponentInChildren(pP)}},{key:"initStateManager",value:function(){this.stateManager=this.getComponent(p3)}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"listenInputEvents",value:function(){this.node.scene.on(aL.GAME_START,this.handleStartGame),this.node.scene.on(aL.GAME_PAUSE,this.handlePauseGame),this.node.scene.on(aL.GAME_RESUME,this.handleResumeGame),this.node.scene.on(aL.GAME_REPLAY,this.handleReplayGame),this.node.scene.on(aL.BEE_DIE,this.handleBeeDie),this.node.scene.on(aL.BIG_BEE_DIE,this.handleBigBeeDie),this.node.scene.on(aL.DOGE_DIE,this.handleDogeDie)}},{key:"start",value:function(){this.initData(),this.initGame(),this.initObjects(),this.initDevTools(),this.uiManager.initCounting(),this.uiManager.startCounting()}},{key:"initDevTools",value:function(){}},{key:"initData",value:function(){var n,i=null!==(n=pD.getGameData())&&void 0!==n?n:{},a=i.level,r=void 0===a?1:a,p=i.bestEndlessScore,d=void 0===p?0:p;this.defaultData={level:r,bestEndlessScore:d,gameplayMode:"endless",nextLevelCount:0,isFromLoader:!1},this.setGameData(this.defaultData)}},{key:"initGame",value:function(){this.stateManager.init(),this.stateManager.load()}},{key:"setGameData",value:function(n){n&&(this.gameData=D(D({},this.gameData),n))}},{key:"getGameData",value:function(){return this.gameData}},{key:"pauseGame",value:function(){this.node.active=!1,this.node.pauseSystemEvents(!0),this.uiManager.pauseCounting()}},{key:"resumeGame",value:function(){this.node.active=!0,this.node.resumeSystemEvents(!0),this.uiManager.resumeCounting()}},{key:"attemptCallCreateShortcut",value:function(){var n,i=null!==(n=this.gameData)&&void 0!==n?n:{},a=i.level,r=void 0===a?0:a,p=i.nextLevelCount;r<2||(void 0===p?0:p)<2||"checkAndCreateShortcutAsync"in GameSDK.extra&&GameSDK.extra.checkAndCreateShortcutAsync().catch(function(n){console.warn("checkAndCreateShortcutAsync",n)})}},{key:"initObjects",value:function(){var n=this.createThorn();if(!_instanceof(n,Y))throw new Error("initObjects: Could not create thorn");var i=n.getComponent(Z);if(!_instanceof(i,Z))throw new Error("initObjects: Could not get UITransform of thorn");for(var a=this.uiTransform.getBoundingBoxToWorld(),r=a.width,p=a.height,d=Math.ceil(r/i.width),y=Math.ceil(p/i.height),m=0;m<d;m++)this.topThorns.addChild(this.createThorn()),this.bottomThorns.addChild(this.createThorn());for(var g=0;g<y;g++)this.leftThorns.addChild(this.createThorn()),this.rightThorns.addChild(this.createThorn());this.rightThorns.addChild(n),console.log("initObjects: Done",d,y)}},{key:"getBoundingBox",value:function(){return this.uiTransform.getBoundingBoxToWorld()}},{key:"getDogeSpawnPosition",value:function(){var n=this.uiTransform.getBoundingBoxToWorld().center;return[n.x,n.y]}},{key:"createThorn",value:function(){var n=Q(this.thornPrefab);return n.name=iq.THORN,n}},{key:"processCrazyGamesGameplayStart",value:function(){"gameplayStart"in GameSDK.extra&&GameSDK.extra.gameplayStart()}},{key:"processCrazyGamesGameplayStop",value:function(){"gameplayStop"in GameSDK.extra&&GameSDK.extra.gameplayStop()}},{key:"processCrazyGamesHappyTime",value:function(){"happyTime"in GameSDK.extra&&GameSDK.extra.happyTime()}}]),u}(ea)).prototype,"thornPrefab",[pp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pC=n(pb.prototype,"bottomThorns",[pd],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pk=n(pb.prototype,"topThorns",[pv],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pw=n(pb.prototype,"leftThorns",[py],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pE=n(pb.prototype,"rightThorns",[pf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pT=n(pb.prototype,"gameObjects",[pm],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pg=pb))||pg)||pg);K._RF.pop(),K._RF.push({},"43aefNoI9lJxJNh3LPuKYPt","BaseState",void 0);var pN=function(){function e(n){if(r(this,e),this.game=null,this.data={},this.game=n.node.getComponent(pI),!this.game)throw new Error("Gameplay component not found");this.manager=n,this.updateStateData(),this.logDebug()}return y(e,[{key:"logDebug",value:function(){var n=this.constructor.name;console.info("[STATE] ".concat(n),this.data)}},{key:"updateStateData",value:function(){if(this.game){var n=this.game.getGameData();n&&(this.data=n)}}},{key:"updateGameData",value:function(n){var i;null===(i=this.game)||void 0===i||i.setGameData(n),this.updateStateData()}}]),e}();K._RF.pop(),K._RF.push({},"109f0WH9r9IQqMHpvD45PzQ","DeathState",void 0);var pG=function(n){i(o,n);var p=a(o);function o(n){var i,a,d;return r(this,o),(d=p.call(this,n)).processCrazyGamesEvent(),d.disableUI(),k.stopAllSounds(),d.vibrateDevice(),d.pauseCountdown(),d.logLevelFailAnalytics(),null===(i=d.game)||void 0===i||i.scheduleOnce(function(){d.stopDogesLooking(),k.playSound(R.LEVEL_FAIL,{volume:.3})},.5),null===(a=d.game)||void 0===a||a.scheduleOnce(function(){d.sleepObjects(),d.showLoseScreen(),d.manager.finish()},1.8),d}return y(o,[{key:"processCrazyGamesEvent",value:function(){"gameplayStop"in GameSDK.extra&&GameSDK.extra.gameplayStop()}},{key:"load",value:function(){}},{key:"initialize",value:function(){}},{key:"ready",value:function(){}},{key:"play",value:function(){}},{key:"death",value:function(){}},{key:"finish",value:function(){var n=this.manager.createFinishState();this.manager.change(n)}},{key:"update",value:function(){}},{key:"disableUI",value:function(){var n;null===(n=this.game)||void 0===n||n.uiManager.disableUI()}},{key:"sleepObjects",value:function(){var n;null===(n=this.game)||void 0===n||null===(n=n.gameObjects)||void 0===n||n.sleepObjects()}},{key:"pauseCountdown",value:function(){var n;null===(n=this.game)||void 0===n||n.uiManager.pauseCounting()}},{key:"stopDogesLooking",value:function(){var n;if(null!==(n=this.game)&&void 0!==n&&n.gameObjects){var i,a=this.game.gameObjects.getComponentsInChildren(st),r=T(a);try{for(r.s();!(i=r.n()).done;){var p,d=i.value;null===(p=d.eyes)||void 0===p||p.stopLook(),d.setEnable(!1)}}catch(n){r.e(n)}finally{r.f()}}}},{key:"vibrateDevice",value:function(){var n;null===(n=eU("Vibrate"))||void 0===n||null===(n=n.getComponent(iU))||void 0===n||n.vibrate(500)}},{key:"showLoseScreen",value:function(){var n=this.data.level;L.openScreen(O.LOSE_SCREEN,{level:n})}},{key:"logLevelFailAnalytics",value:function(){}}]),o}(pN);K._RF.pop(),K._RF.push({},"638devCm49MrpqRRWptDInp","FinishState",void 0);var pM=globalThis.game.player,pF=function(n){i(s,n);var p,d=a(s);function s(n){var i;return r(this,s),i=d.call(this,n),k.turnUpMusic(),i.finishGameAsync(),i}return y(s,[{key:"load",value:function(){var n=this.manager.createLoadingState();this.manager.change(n)}},{key:"initialize",value:function(){var n=this.manager.createInitializeState();this.manager.change(n)}},{key:"ready",value:function(){}},{key:"play",value:function(){}},{key:"death",value:function(){}},{key:"finish",value:function(){}},{key:"update",value:function(){}},{key:"finishGameAsync",value:(p=I(function(){var n,i,a,r,p,d;return _ts_generator(this,function(y){switch(y.label){case 0:y.trys.push([0,2,,3]);if(!this.game)return[2];a=this.game.uiManager.getBestScore(),r=null!==(n=null===(i=pM.getGameData())||void 0===i?void 0:i.bestEndlessScore)&&void 0!==n?n:0,p=r<a?a:r;pM.setGameData({bestEndlessScore:p}),this.updateGameData({bestEndlessScore:p});return[4,l0.finishMatchAsync()];case 1:y.sent();return[3,3];case 2:d=y.sent();console.error("finishGameAsync",d);return[3,3];case 3:return[2]}})}),function(){return p.apply(this,arguments)})}]),s}(pN);K._RF.pop(),K._RF.push({},"97260ZJNotE0LYFeNm4wsEz","InitializeState",void 0);var pz=function(n){i(l,n);var p,d,m=a(l);function l(n){var i;return r(this,l),i=m.call(this,n),"CrazyGames"===GameSDK.getSDKName()&&i.processCrazyGamesRequirements(),i.enableUI(),i.clearGameObjects(),i.createGameObjects(),i.initClock(),i.startGameAsync().then(function(){i.closeLoadingScreen(),i.manager.ready()}),i}return y(l,[{key:"processCrazyGamesRequirements",value:function(){"gameplayStart"in GameSDK.extra&&GameSDK.extra.gameplayStart(),this.showInterAdsCrazyGames()}},{key:"showInterAdsCrazyGames",value:(d=I(function(){var n;return _ts_generator(this,function(i){switch(i.label){case 0:n=this.game;if(!n)return[3,2];k.stopAllSounds();return[4,N.showInterstitialAdAsync({forLevel:this.data.level,includeSDK:["CrazyGames"]})];case 1:n=(i.sent(),k.turnUpMusic());i.label=2;case 2:return[2]}})}),function(){return d.apply(this,arguments)})},{key:"load",value:function(){if(GameCore.Utils.Valid.isDebugger()){var n=this.manager.createLoadingState();this.manager.change(n)}}},{key:"initialize",value:function(){}},{key:"ready",value:function(){var n=this.manager.createReadyState();this.manager.change(n)}},{key:"play",value:function(){}},{key:"death",value:function(){var n=this.manager.createDeathState();this.manager.change(n)}},{key:"finish",value:function(){}},{key:"update",value:function(){}},{key:"closeLoadingScreen",value:function(){L.closeScreen(O.LOADING_SCREEN)}},{key:"enableUI",value:function(){var n;null===(n=this.game)||void 0===n||n.uiManager.enableUI()}},{key:"clearGameObjects",value:function(){var n;null!==(n=this.game)&&void 0!==n&&n.gameObjects&&this.game.gameObjects.clearObjects()}},{key:"createGameObjects",value:function(){var n,i,a,r=null!==(n=null===(i=this.game)||void 0===i?void 0:i.getDogeSpawnPosition())&&void 0!==n?n:[0,0],p=F(r,2),d=p[0],y=p[1],m=null===(a=this.game)||void 0===a?void 0:a.gameObjects.spawnDoge({x:d,y:y,right:!1,isWorldPosition:!0,rigidBodyConfig:{gravityScale:2}});if(!_instanceof(m,Y))throw new Error("Could not create doge");var g=m.getComponent(ek);if(!g)throw new Error("Could not get rigidBody");g.sleep()}},{key:"initClock",value:function(){var n,i;null===(n=this.game)||void 0===n||n.uiManager.initCounting();var a=this.data.bestEndlessScore,r=void 0===a?0:a;null===(i=this.game)||void 0===i||i.uiManager.setBestScore(r)}},{key:"startGameAsync",value:(p=I(function(){var n;return _ts_generator(this,function(i){switch(i.label){case 0:i.trys.push([0,2,,3]);if(this.data.isFromLoader)return[2,void this.updateGameData({isFromLoader:!1})];return[4,l0.startMatchAsync()];case 1:i.sent();return[3,3];case 2:n=i.sent();console.error("startGameAsync",n);return[3,3];case 3:return[2]}})}),function(){return p.apply(this,arguments)})}]),l}(pN);K._RF.pop(),K._RF.push({},"ecbe0PxfZNJBLsmLBPc2pBD","LoadingState",void 0);var px=globalThis.game.player,pU=function(n){i(o,n);var p=a(o);function o(n){var i,a,d,y;r(this,o),y=p.call(this,n);var m=null!==(i=null===(a=px.getGameData())||void 0===a?void 0:a.bestEndlessScore)&&void 0!==i?i:0;return y.updateGameData({bestEndlessScore:m}),L.showLoadingScreen(),null===(d=y.game)||void 0===d||d.scheduleOnce(function(){y.initialize()},.5),y}return y(o,[{key:"load",value:function(){}},{key:"initialize",value:function(){var n=this.manager.createInitializeState();this.manager.change(n)}},{key:"ready",value:function(){}},{key:"play",value:function(){}},{key:"death",value:function(){}},{key:"finish",value:function(){}},{key:"update",value:function(){}}]),o}(pN);K._RF.pop(),K._RF.push({},"651d4HD0HpFPLrL8dycqU3R","PlayingState",void 0);var pH=globalThis.game.player;function qv(){var n=Object.keys(iV).map(function(n){return Number.parseInt(n)}).sort(function(n,i){return n-i}),i=0;return{current:function(){return n[i]},canGoNext:function(a){var r=i+1;return!(r>=n.length)&&a>n[r]},next:function(){if(i>=n.length-1)throw new Error("No more progressions");return n[i++]}}}var pj=function(n){i(o,n);var p=a(o);function o(n){var i;return r(this,o),(i=p.call(this,n)).totalElapsed=0,i.spawnElapsed=0,i.spawnInterval=2,i.flyForce=18,i.progressionIt=qv(),i.onTouchStart=function(){i.dogeRigidBody.linearVelocity=new eE(0,i.flyForce)},i.findDoge(),i.wakeUpObjects(),i.spawnEnemies(),i.startCounting(),k.turnDownMusic(),i.listenInputEvents(),i}return y(o,[{key:"listenInputEvents",value:function(){var n,i;em.os===em.OS.WINDOWS||em.os===em.OS.OSX?(document.addEventListener("pointerdown",this.onTouchStart),null===(n=this.game)||void 0===n||n.node.on(Y.EventType.MOUSE_DOWN,this.onTouchStart)):null===(i=this.game)||void 0===i||i.node.on(Y.EventType.TOUCH_START,this.onTouchStart)}},{key:"unlistenInputEvents",value:function(){var n,i;em.os===em.OS.WINDOWS||em.os===em.OS.OSX?(document.removeEventListener("pointerdown",this.onTouchStart),null===(n=this.game)||void 0===n||n.node.off(Y.EventType.MOUSE_DOWN,this.onTouchStart)):null===(i=this.game)||void 0===i||i.node.off(Y.EventType.TOUCH_START,this.onTouchStart)}},{key:"findDoge",value:function(){var n,i=null===(n=this.game)||void 0===n||null===(n=n.gameObjects)||void 0===n?void 0:n.getRandomDogeToBee();if(!i)throw new Error("No doge found in GameObjects");this.doge=i;var a=this.doge.getComponent(ek);if(!a)throw new Error("No rigid body found in doge");this.dogeRigidBody=a}},{key:"load",value:function(){this.unlistenInputEvents();var n=this.manager.createLoadingState();this.manager.change(n)}},{key:"initialize",value:function(){this.unlistenInputEvents(),k.stopSound(R.BEE_FLYING);var n=this.manager.createInitializeState();this.manager.change(n)}},{key:"ready",value:function(){}},{key:"play",value:function(){}},{key:"death",value:function(){this.unlistenInputEvents();var n=this.manager.createDeathState();this.manager.change(n)}},{key:"finish",value:function(){}},{key:"update",value:function(n){if(this.spawnElapsed+=n,this.totalElapsed+=n,this.progressionIt.canGoNext(this.totalElapsed)&&(this.progressionIt.next(),this.updateProgressionToPlugin()),this.spawnElapsed>this.spawnInterval){var i=this.progressionIt.current(),a=iV[i];this.handleSpawn(a),this.spawnElapsed=0}}},{key:"updateProgressionToPlugin",value:function(){var n;l0.setProfileMatchDataAsync({id:pH.getPlayerId(),endlessScore:Math.round(null!==(n=this.data.bestEndlessScore)&&void 0!==n?n:0)})}},{key:"handleSpawn",value:function(n){if(!this.game)throw new Error("Game is not defined");var i=this.game.getBoundingBox(),a=0===eA.randomRangeInt(0,2)?i.xMin-0:i.xMax+0,r=this.doge.node.worldPosition.y+eA.randomRangeInt(-100,100),p=this.doge.node.getWorldPosition(),d=p.x,y=p.y,m=new ep(a,r,0),g=m.x+2*(d-m.x),b=m.y+2*(y-m.y);this.spawnPredictionLine(m,g,b),this.spawnCrossingBee(d,y,m,n)}},{key:"spawnCrossingBee",value:function(n,i,a,r){var p=this;if(!this.game)throw new Error("Game is not defined. Only use this method in PlayingState");this.game.scheduleOnce(function(){p.game.gameObjects.spawnCrossingBees(D({playerWorldX:n,playerWorldY:i,spawnWorldX:a.x,spawnWorldY:a.y},r))},1)}},{key:"spawnPredictionLine",value:function(n,i,a){if(!this.game)throw new Error("Game is not defined. Only use this method in PlayingState");var r=this.game.gameObjects.spawnCrossingBeeLine({startX:n.x,startY:n.y,endX:i,endY:a,spriteType:r_.LOW,thickness:0});eF(r).to(.5,{thickness:80},{easing:"expoOut"}).start(),this.game.scheduleOnce(function(){eF(r).to(.5,{thickness:0},{easing:"expoOut"}).call(function(){r.destroy()}).start()},1)}},{key:"wakeUpObjects",value:function(){var n;null===(n=this.game)||void 0===n||null===(n=n.gameObjects)||void 0===n||n.wakeUpObjects(),this.dogeRigidBody.wakeUp()}},{key:"spawnEnemies",value:function(){this.game&&this.game.gameObjects&&(this.game.gameObjects.spawnBees(),this.game.gameObjects.reviveBigBees(),k.playSound(R.BEE_FLYING),k.playSound(R.END_DRAW))}},{key:"startCounting",value:function(){var n;null===(n=this.game)||void 0===n||n.uiManager.startCounting()}}]),o}(pN);K._RF.pop(),K._RF.push({},"9516f5Gc/FENLPaNEZwDwcn","ReadyState",void 0);var pV,pW=function(n){i(o,n);var p=a(o);function o(n){var i;return r(this,o),(i=p.call(this,n)).onTouchStart=function(){i.manager.play()},i.logLevelStartAnalytics(),i.listenInputEvents(),i}return y(o,[{key:"listenInputEvents",value:function(){var n,i;em.os===em.OS.WINDOWS||em.os===em.OS.OSX?(document.addEventListener("pointerdown",this.onTouchStart,{once:!0}),null===(n=this.game)||void 0===n||n.node.once(Y.EventType.MOUSE_DOWN,this.onTouchStart)):null===(i=this.game)||void 0===i||i.node.once(Y.EventType.TOUCH_START,this.onTouchStart)}},{key:"unlistenInputEvents",value:function(){var n,i;em.os===em.OS.WINDOWS||em.os===em.OS.OSX?(document.removeEventListener("pointerdown",this.onTouchStart),null===(n=this.game)||void 0===n||n.node.off(Y.EventType.MOUSE_DOWN,this.onTouchStart)):null===(i=this.game)||void 0===i||i.node.off(Y.EventType.TOUCH_START,this.onTouchStart)}},{key:"load",value:function(){if(this.unlistenInputEvents(),GameCore.Utils.Valid.isDebugger()){var n=this.manager.createLoadingState();this.manager.change(n)}}},{key:"initialize",value:function(){}},{key:"ready",value:function(){}},{key:"play",value:function(){this.unlistenInputEvents();var n=this.manager.createPlayingState();this.manager.change(n)}},{key:"death",value:function(){if(this.unlistenInputEvents(),GameCore.Utils.Valid.isDebugger()){var n=this.manager.createDeathState();this.manager.change(n)}}},{key:"finish",value:function(){}},{key:"update",value:function(){}},{key:"logLevelStartAnalytics",value:function(){}}]),o}(pN);K._RF.pop(),K._RF.push({},"946848BySlM54Wly5+1otNa","EndlessStateManager",void 0);var pK,pq,pY,pJ,pX,pZ,pQ,p$,p0,p1,p2,p3=(0,q.ccclass)("EndlessStateManager")(pV=function(n){i(o,n);var p=a(o);function o(){return r(this,o),p.apply(this,arguments)}return y(o,[{key:"init",value:function(){this.state=new pU(this)}},{key:"change",value:function(n){this.state=n}},{key:"load",value:function(){this.state.load()}},{key:"initialize",value:function(){this.state.initialize()}},{key:"isInitialize",value:function(){return _instanceof(this.state,pz)}},{key:"ready",value:function(){this.state.ready()}},{key:"isReady",value:function(){return _instanceof(this.state,pW)}},{key:"play",value:function(){this.state.play()}},{key:"isPlaying",value:function(){return _instanceof(this.state,pj)}},{key:"death",value:function(){this.state.death()}},{key:"isFailed",value:function(){return _instanceof(this.state,pG)}},{key:"finish",value:function(){this.state.finish()}},{key:"isFinished",value:function(){return _instanceof(this.state,pF)}},{key:"update",value:function(n){this.state&&this.state.update(n)}},{key:"createInitializeState",value:function(){return new pz(this)}},{key:"createLoadingState",value:function(){return new pU(this)}},{key:"createReadyState",value:function(){return new pW(this)}},{key:"createPlayingState",value:function(){return new pj(this)}},{key:"createDeathState",value:function(){return new pG(this)}},{key:"createFinishState",value:function(){return new pF(this)}}]),o}(ea))||pV;K._RF.pop(),K._RF.push({},"78746Q4viBIlbRROK4J1bSl","Burst",void 0);var p4,p5=q.ccclass,p7=q.property,p6=(pK=p5("Burst"),pq=p7(ex),pY=p7(es),pJ=p7(ex),pX=p7(es),pK((p$=n((pQ=function(){function e(){r(this,e),p(this,"time",p$,this),p(this,"repeatCount",p0,this),p(this,"repeatInterval",p1,this),p(this,"count",p2,this),this.remainingCount=0,this.curTime=0}return y(e,[{key:"update",value:function(n,i){if(0===this.remainingCount&&(this.remainingCount=this.repeatCount,this.curTime=this.time),this.remainingCount>0){var a=eX(n.time-n.startDelay.evaluate(0,1),n.duration)-i;a=a>0?a:0;var r=eX(n.time-n.startDelay.evaluate(0,1),n.duration);this.curTime>=a&&this.curTime<r&&(n.emit(this.count,i-(r-this.curTime)),this.curTime+=this.repeatInterval,--this.remainingCount)}}},{key:"reset",value:function(){this.remainingCount=0,this.curTime=0}}]),e}()).prototype,"time",[pq],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),p0=n(pQ.prototype,"repeatCount",[pY],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),p1=n(pQ.prototype,"repeatInterval",[pJ],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),p2=n(pQ.prototype,"count",[pX],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),pZ=pQ))||pZ);K._RF.pop(),K._RF.push({},"726cc2e08FBqpVIg/tPM7H2","Particle",void 0);var p9,p8,de,dt,dn,di,da,dr,ds,dl,du,dc,dh,dp,dd,dv,dy,df=q.ccclass,dm=q.executeInEditMode,dg=df("Particle")(p4=dm(!0)(p4=function(n){i(o,n);var p=a(o);function o(){var n;r(this,o);for(var i=arguments.length,a=new Array(i),d=0;d<i;d++)a[d]=arguments[d];return(n=p.call.apply(p,[this].concat(a))).remainingLifetime=0,n.startLifetime=0,n}return y(o,[{key:"onLoad",value:function(){this.node.layer=eS.Enum.UI_2D}},{key:"init",value:function(n){this.sprite=this.getComponent(el),this.particleSystem=n,this.velocity=ep.ZERO,this.remainingLifetime=0,this.startLifetime=0,this.startSize=ep.ZERO,this.startColor=J.WHITE.clone(),this.randomSeed=0}},{key:"reset",value:function(){this.node.rotation.set(0,0,0)}}]),o}(ea))||p4)||p4;K._RF.pop(),K._RF.push({},"00eb3NBo0tM/qcD6ViMjx0A","CurveRange",void 0);var db,dS,dC,dk,dw,dE,dT,dR,dA,d_,dP,dB,dL,dO,dD,dI,dN,dG=q.ccclass,dM=q.property,dF=eZ({Constant:0,Curve:1,TwoCurves:2,TwoConstants:3}),dz=(p9=dG("CurveRange"),p8=dM({type:eZ(dF)}),de=dM({visible:function(){return this.mode===dF.Constant}}),dt=dM({visible:function(){return this.mode===dF.Curve}}),dn=dM({visible:function(){return this.mode===dF.TwoCurves}}),di=dM({visible:function(){return this.mode===dF.TwoCurves}}),da=dM({visible:function(){return this.mode===dF.TwoConstants}}),dr=dM({visible:function(){return this.mode===dF.TwoConstants}}),p9((du=n((dl=function(){function e(){r(this,e),p(this,"mode",du,this),p(this,"constant",dc,this),p(this,"spline",dh,this),p(this,"splineMin",dp,this),p(this,"splineMax",dd,this),p(this,"constantMin",dv,this),p(this,"constantMax",dy,this),this.spline.assignSorted([0,1],[0,1]),this.splineMin.assignSorted([0,1],[0,1]),this.splineMax.assignSorted([0,1],[0,1])}return y(e,[{key:"evaluate",value:function(n,i){switch(this.mode){case dF.Curve:return this.spline.evaluate(n);case dF.TwoCurves:return eQ(this.splineMin.evaluate(n),this.splineMax.evaluate(n),i);case dF.TwoConstants:return eQ(this.constantMin,this.constantMax,i);default:return this.constant}}},{key:"getMax",value:function(){switch(this.mode){case dF.Curve:return 1;case dF.TwoConstants:return this.constantMax;case dF.TwoCurves:return 1;default:return this.constant}}},{key:"isZero",value:function(){switch(this.mode){case dF.Curve:return e$(1,0,e0);case dF.TwoConstants:return e$(Math.max(Math.abs(this.constantMax),Math.abs(this.constantMin)),0,e0);case dF.TwoCurves:return e$(1,0,e0);default:return e$(this.constant,0,e0)}}}]),e}()).prototype,"mode",[p8],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return dF.Constant}}),dc=n(dl.prototype,"constant",[de],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),dh=n(dl.prototype,"spline",[dt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new e1}}),dp=n(dl.prototype,"splineMin",[dn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new e1}}),dd=n(dl.prototype,"splineMax",[di],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new e1}}),dv=n(dl.prototype,"constantMin",[da],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),dy=n(dl.prototype,"constantMax",[dr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ds=dl))||ds);K._RF.pop(),K._RF.push({},"3fe5eBRNTJFCZgeD7SqFSh5","GradientRange",void 0);var dx=q.ccclass,dU=q.property,dH=eZ({Color:0,Gradient:1,TwoColors:2,TwoGradients:3,RandomColor:4}),dj=new J,dV=new J,dW=(db=dx("GradientRange"),dS=dU({type:eZ(dH)}),dC=dU({visible:function(){return this.mode===dH.Color}}),dk=dU({visible:function(){return this.mode===dH.TwoColors}}),dw=dU({visible:function(){return this.mode===dH.TwoColors}}),dE=dU({visible:function(){return this.mode===dH.Gradient||this.mode===dH.RandomColor}}),dT=dU({visible:function(){return this.mode===dH.TwoGradients}}),dR=dU({visible:function(){return this.mode===dH.TwoGradients}}),db((dP=n((d_=function(){function e(){r(this,e),p(this,"mode",dP,this),p(this,"color",dB,this),p(this,"colorMin",dL,this),p(this,"colorMax",dO,this),p(this,"gradient",dD,this),p(this,"gradientMin",dI,this),p(this,"gradientMax",dN,this),this._color=J.WHITE.clone()}return y(e,[{key:"evaluate",value:function(n,i){switch(this.mode){case dH.Color:return this.color;case dH.TwoColors:return J.lerp(this._color,this.colorMin,this.colorMax,i),this._color;case dH.RandomColor:return this.gradient.getRandomColor(this._color);case dH.Gradient:return this.gradient.evaluateFast(this._color,n);case dH.TwoGradients:return J.lerp(this._color,this.gradientMin.evaluateFast(dj,n),this.gradientMax.evaluateFast(dV,n),i),this._color;default:return this.color}}}]),e}()).prototype,"mode",[dS],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return dH.Color}}),dB=n(d_.prototype,"color",[dC],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return J.WHITE.clone()}}),dL=n(d_.prototype,"colorMin",[dk],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return J.WHITE.clone()}}),dO=n(d_.prototype,"colorMax",[dw],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return J.WHITE.clone()}}),dD=n(d_.prototype,"gradient",[dE],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new e2}}),dI=n(d_.prototype,"gradientMin",[dT],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new e2}}),dN=n(d_.prototype,"gradientMax",[dR],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new e2}}),dA=d_))||dA);function sf(n,i,a,r){!function(n,i){eE.set(n,Math.cos(i),Math.sin(i))}(n,r),n.z=0,ep.multiplyScalar(n,n,i+(a-i)*e4())}function lf(n){var i=dF;switch(n.mode){case i.TwoCurves:case i.TwoConstants:return!0;default:return!1}}K._RF.pop(),K._RF.push({},"1a4c4Z/fWpFuL5b3emrVLug","ParticleFunction",void 0),K._RF.pop(),K._RF.push({},"c2fc2/T2apMGZCPX5a4abo/","ModuleRandSeed",void 0);var dK,dq,dY,dJ,dX,dZ,dQ,d$=23541,d0=39825,d1=90794,d2=91041,d3=125292,d4=197866,d5=156497;K._RF.pop(),K._RF.push({},"39785+APfBJU5kvcdjZGiLr","ColorOvertimeModule",void 0);var d7,d6,d9,d8,ve,vt,vn,vi,va,vo=q.ccclass,vr=q.property,vs=d2,vl=(dK=vo("ColorOvertimeModule"),dq=vr({type:ec}),dY=vr({type:dW}),dK((dZ=n((dX=function(){function e(){r(this,e),p(this,"enable",dZ,this),p(this,"color",dQ,this)}return y(e,[{key:"update",value:function(n){if(this.enable){var i=n.randomSeed+vs,a=function(n){var i=dH;switch(n.mode){case i.TwoGradients:case i.TwoColors:return!0;default:return!1}}(this.color)?e6(i):0,r=1-n.remainingLifetime/n.startLifetime;n.sprite.color=n.startColor.clone().multiply(this.color.evaluate(r,a))}}}]),e}()).prototype,"enable",[dq],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),dQ=n(dX.prototype,"color",[dY],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new dW}}),dJ=dX))||dJ);K._RF.pop(),K._RF.push({},"c397apirpxFfJTJN1KLAcGi","LimitVelocityOvertimeModule",void 0);var vu,vc,vh,vp,vd,vv,vy,vf=q.ccclass,vm=q.property,vg=d$,vb=(d7=vf("LimitVelocityOvertimeModule"),d6=vm({type:ec}),d9=vm({type:dz}),d8=vm({type:dz}),d7((vn=n((vt=function(){function e(){r(this,e),p(this,"enable",vn,this),p(this,"limit",vi,this),p(this,"dampen",va,this),this.limit.constant=500,this.dampen.constant=.2}return y(e,[{key:"update",value:function(n,i){if(this.enable){var a=1-n.remainingLifetime/n.startLifetime,r=n.velocity.clone().normalize(),p=lf(this.limit)?e6(n.randomSeed+vg):0,d=lf(this.dampen)?e6(n.randomSeed+vg+1):0,y=n.velocity.length(),m=this.limit.evaluate(a,p),g=this.dampen.evaluate(a,d);n.velocity=r.multiplyScalar(this.dampenBeyondLimit(y,m,g,i))}}},{key:"dampenBeyondLimit",value:function(n,i,a,r){if(n<=i)return n;var p=1-Math.exp(-a*r);return eA.lerp(n,i,p)}}]),e}()).prototype,"enable",[d6],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vi=n(vt.prototype,"limit",[d9],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new dz}}),va=n(vt.prototype,"dampen",[d8],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new dz}}),ve=vt))||ve);K._RF.pop(),K._RF.push({},"442c2KaGHdNip4TBoeKOOoY","RendererModule",void 0);var vS,vC,vk,vw,vE,vT,vR,vA,v_,vP,vB,vL,vO,vD,vI=q.ccclass,vN=q.property,vG=(vu=vI("RendererModule"),vc=vN(e9),vh=vN(e_),vu((vv=n((vd=y(function e(){r(this,e),p(this,"material",vv,this),p(this,"spriteFrame",vy,this)})).prototype,"material",[vc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vy=n(vd.prototype,"spriteFrame",[vh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vp=vd))||vp);K._RF.pop(),K._RF.push({},"c6cfbhYVctHt53aUXC4oSWy","RotationOvertimeModule",void 0);var vM,vF,vz,vx,vU,vH,vj,vV,vW,vK,vq,vY,vJ,vX,vZ,vQ,v$,v0,v1,v2,v3,v4,v5,v7=q.ccclass,v6=q.property,v9=d3,v8=(vS=v7("RotationOvertimeModule"),vC=v6({type:ec}),vk=v6(ec),vw=v6({type:dz}),vE=v6({type:dz,visible:function(){return this.separateAxes}}),vT=v6({type:dz,visible:function(){return this.separateAxes}}),vR=v6({type:dz}),vS((vP=n((v_=function(){function e(){r(this,e),p(this,"enable",vP,this),p(this,"separateAxes",vB,this),p(this,"x",vL,this),p(this,"y",vO,this),p(this,"z",vD,this)}return y(e,[{key:"update",value:function(n,i){if(this.enable){var a=1-n.remainingLifetime/n.startLifetime,r=n.randomSeed+v9,p=lf(this.z)?e6(r):0,d=this.z.evaluate(a,p)*i,y=0,m=0;if(this.separateAxes){var g=lf(this.x)?e6(r):0,b=lf(this.y)?e6(r):0;y=this.x.evaluate(a,g)*i,m=this.y.evaluate(a,b)*i}n.node.eulerAngles=new ep(n.node.eulerAngles.x+y,n.node.eulerAngles.y+m,n.node.eulerAngles.z+d)}}}]),e}()).prototype,"enable",[vC],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vB=n(v_.prototype,"separateAxes",[vk],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),vL=n(v_.prototype,"x",[vw],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new dz}}),vO=n(v_.prototype,"y",[vE],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new dz}}),vD=n(v_.prototype,"z",[vT,vR],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new dz}}),vA=v_))||vA);K._RF.pop(),K._RF.push({},"f63cd4ScDJFPrnTLNT4+QKu","ShapeModule",void 0);var ye,yt,yn,yi,ya,yo,yr,ys=q.ccclass,yl=q.property,yu=eZ({Circle:0,Rectangle:1}),yc=eZ({Base:0,Edge:1}),Ym=function(){return this.shape===yu.Circle},Jm=function(){return this.shape===yu.Rectangle},yh=[0,0],yp=(vM=ys("ShapeModule"),vF=yl({type:eZ(yu)}),vz=yl({type:eZ(yc),visible:Jm}),vx=yl({}),vU=yl({}),vH=yl({}),vj=yl({range:[0,360],visible:Ym}),vV=yl({range:[-360,360],visible:Ym}),vW=yl({min:0,visible:Ym}),vK=yl({range:[0,1],step:.01,visible:Ym}),vq=yl({visible:Jm}),vM((vX=n((vJ=function(){function e(){r(this,e),p(this,"shape",vX,this),p(this,"emitFrom",vZ,this),p(this,"position",vQ,this),p(this,"rotation",v$,this),p(this,"scale",v0,this),p(this,"arc",v1,this),p(this,"angle",v2,this),p(this,"radius",v3,this),p(this,"radiusThickness",v4,this),p(this,"rectangleThickness",v5,this)}return y(e,[{key:"emit",value:function(n){switch(this.shape){case yu.Circle:this.circleEmit(this.radius,this.radiusThickness,e8(this.generateArcAngle()),n);break;case yu.Rectangle:this.rectangleEmit(this.emitFrom,this.rectangleThickness,n)}}},{key:"circleEmit",value:function(n,i,a,r){var p=r.node.position;sf(p,n*(1-i),n,a+e8(this.angle)),r.velocity=p.clone().normalize()}},{key:"rectangleEmit",value:function(n,i,a){var r,p,d,y=a.node.position;switch(n){case yc.Base:p=y,d=i,eE.set(p,e5(-d.x,d.x),e5(-d.y,d.y));break;case yc.Edge:yh[0]=e5(-1,1),yh[1]=(0===(r=e5(-1,1))&&r++,e3.sign(r)),function(n){for(var i=0;i<n.length;i++){var a=i+e7(0,n.length-i),r=n[a];n[a]=n[i],n[i]=r}}(yh),this.applyRectThickness(yh,i),eE.set(y,yh[0],yh[1])}a.velocity=y.clone().normalize()}},{key:"generateArcAngle",value:function(){return e5(0,this.arc)}},{key:"applyRectThickness",value:function(n,i){i.x>0&&(n[0]*=i.x),i.y>0&&(n[1]*=i.y)}},{key:"gizmo",value:function(n){switch(n.strokeColor.fromHEX("#46C4FFB0"),n.fillColor.fromHEX("#46C4FF77"),n.lineWidth=8,this.shape){case yu.Circle:this.gizmoCircle(n);break;case yu.Rectangle:this.gizmoRectangle(n)}}},{key:"gizmoCircle",value:function(n){n.clear();var i=this.angle,a=this.angle+this.arc;if(this.createArcPath(n,this.radius,i,a),this.createArcPath(n,this.radius*(1-this.radiusThickness),i,a),this.arc<360&&this.radius>0){var r=this.radius*Math.cos(e8(this.angle)),p=this.radius*Math.sin(e8(this.angle)),d=this.radius*Math.cos(e8(this.arc+this.angle)),y=this.radius*Math.sin(e8(this.arc+this.angle));n.moveTo(r,p),n.lineTo(0,0),n.moveTo(d,y),n.lineTo(0,0)}n.stroke()}},{key:"gizmoRectangle",value:function(n){n.clear();var i=this.rectangleThickness.x,a=this.rectangleThickness.y;n.moveTo(i,a),n.lineTo(-i,a),n.lineTo(-i,-a),n.lineTo(i,-a),n.close(),n.stroke()}},{key:"createArcPath",value:function(n,i,a,r){if(!(i<=0))for(var p=(r-a)/48,d=0;d<=48;d++){var y=a+d*p,m=i*Math.cos(e8(y)),g=i*Math.sin(e8(y));0===d?n.moveTo(m,g):n.lineTo(m,g)}}}]),e}()).prototype,"shape",[vF],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return yu.Circle}}),vZ=n(vJ.prototype,"emitFrom",[vz],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return yc.Base}}),vQ=n(vJ.prototype,"position",[vx],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new ep(0,0,0)}}),v$=n(vJ.prototype,"rotation",[vU],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new ep(0,0,0)}}),v0=n(vJ.prototype,"scale",[vH],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new ep(1,1,1)}}),v1=n(vJ.prototype,"arc",[vj],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 360}}),v2=n(vJ.prototype,"angle",[vV],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 25}}),v3=n(vJ.prototype,"radius",[vW],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),v4=n(vJ.prototype,"radiusThickness",[vK],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),v5=n(vJ.prototype,"rectangleThickness",[vq],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new eE(20,50)}}),vY=vJ))||vY);K._RF.pop(),K._RF.push({},"1b7c1WztGdLzKO8gh4ulm2c","SizeOvertimeModule",void 0);var yd,yv,yy,yf,ym,yg,yb,yS,yC,yk,yw,yE,yT,yR=q.ccclass,yA=q.property,y_=d0,yP=(ye=yR("SizeOvertimeModule"),yt=yA({type:ec}),yn=yA({type:dz}),ye((yo=n((ya=function(){function e(){r(this,e),p(this,"enable",yo,this),p(this,"size",yr,this),this.size.constant=1}return y(e,[{key:"update",value:function(n){if(this.enable){var i=1-n.remainingLifetime/n.startLifetime,a=n.randomSeed+y_,r=lf(this.size)?e6(a):0,p=this.size.evaluate(i,r);n.node.scale=new ep(p*n.startSize.x,p*n.startSize.y,1)}}}]),e}()).prototype,"enable",[yt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yr=n(ya.prototype,"size",[yn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new dz}}),yi=ya))||yi);K._RF.pop(),K._RF.push({},"530341yf3ZOmaqdU+AYM0/U","SpriteAnimationModule",void 0);var yB,yL,yO,yD,yI,yN,yG,yM,yF,yz=q.ccclass,yx=q.property,yU=d1,yH=(yd=yz("SpriteAnimationModule"),yv=yx({type:ec}),yy=yx({type:e_}),yf=yx({type:dz}),ym=yx({type:dz}),yg=yx({type:es}),yd((yC=n((yS=function(){function e(){r(this,e),p(this,"enable",yC,this),p(this,"frames",yk,this),p(this,"frameOverTime",yw,this),p(this,"startFrame",yE,this),p(this,"cycleCount",yT,this),this.frameOverTime.constant=0,this.startFrame.constant=0}return y(e,[{key:"update",value:function(n){if(this.enable){var i=1-n.remainingLifetime/n.startLifetime,a=lf(this.startFrame)?e6(n.randomSeed+yU):0,r=lf(this.frameOverTime)?e6(n.randomSeed+yU):0,p=this.startFrame.evaluate(i,a),d=eX(this.cycleCount*(this.frameOverTime.evaluate(i,r)+p),this.frames.length);n.sprite.spriteFrame=this.frames[Math.floor(d)]}}}]),e}()).prototype,"enable",[yv],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yk=n(yS.prototype,"frames",[yy],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),yw=n(yS.prototype,"frameOverTime",[yf],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new dz}}),yE=n(yS.prototype,"startFrame",[ym],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new dz}}),yT=n(yS.prototype,"cycleCount",[yg],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),yb=yS))||yb);K._RF.pop(),K._RF.push({},"f6ad5Yz6wpE2ZzModn16CYQ","VelocityOvertimeModule",void 0);var yj,yV,yW,yK,yq,yY,yJ,yX,yZ,yQ,y$,y0,y1,y2,y3,y4,y5,y7,y6,y9,y8,fe,ft,fn,fi,fa,fo,fr,fs,fl,fu,fc,fh,fp,fd,fv,fy,ff,fm,fg,fb,fS,fC,fk,fw,fE,fT,fR,fA,f_,fP,fB,fL=q.ccclass,fO=q.property,fD=(yB=fL("VelocityOvertimeModule"),yL=fO({type:ec}),yO=fO({type:dz}),yD=fO({type:dz}),yB((yG=n((yN=function(){function e(){r(this,e),p(this,"enable",yG,this),p(this,"x",yM,this),p(this,"y",yF,this),this._temp_v3=new ep,this.x.constant=0,this.y.constant=0}return y(e,[{key:"update",value:function(n,i){if(this.enable){var a=1-n.remainingLifetime/n.startLifetime,r=lf(this.x)?e6(n.randomSeed+d4):0,p=lf(this.y)?e6(n.randomSeed+d5):0,d=ep.set(this._temp_v3,this.x.evaluate(a,r),this.y.evaluate(a,p),0);ep.add(n.velocity,n.velocity,d.multiplyScalar(i))}}}]),e}()).prototype,"enable",[yL],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yM=n(yN.prototype,"x",[yO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new dz}}),yF=n(yN.prototype,"y",[yD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new dz}}),yI=yN))||yI);K._RF.pop(),K._RF.push({},"10bc3IfFqBLtpSgVri/NVeX","ParticleSystem",void 0);var fI,fN=q.ccclass,fG=q.property,fM=q.executeInEditMode,fF=q.disallowMultiple,fz=(yj=fN("ParticleSystem"),yV=fM(!0),yW=fF(!0),yK=fG({}),yq=fG(ec),yY=fG(ex),yJ=fG(ec),yX=fG({type:dz}),yZ=fG({type:dz}),yQ=fG(dW),y$=fG(ec),y0=fG({type:dz,formerlySerializedAs:"startSize"}),y1=fG({type:dz,visible:function(){return this.startSize2D}}),y2=fG({type:dz}),y3=fG(ec),y4=fG({type:dz,formerlySerializedAs:"startRotation"}),y5=fG({type:dz}),y7=fG({type:dz}),y6=fG({type:yp}),y9=fG({type:fD}),y8=fG({type:yP}),fe=fG({type:v8}),ft=fG({type:vl}),fn=fG({type:yH}),fi=fG({type:vb}),fa=fG(p6),fo=fG({type:vG}),yj(fr=yV(fr=yW((n((fs=function(n){i(l,n);var m=a(l);function l(){var n;return r(this,l),(n=m.call(this))._preview=!1,p(n,"playOnAwake",fl,d(n)),p(n,"duration",fu,d(n)),p(n,"loop",fc,d(n)),p(n,"startDelay",fh,d(n)),p(n,"startLifetime",fp,d(n)),p(n,"startColor",fd,d(n)),p(n,"startSize2D",fv,d(n)),p(n,"startSizeX",fy,d(n)),p(n,"startSizeY",ff,d(n)),p(n,"startSpeed",fm,d(n)),p(n,"startRotation3D",fg,d(n)),p(n,"startRotation",fb,d(n)),p(n,"gravityModifier",fS,d(n)),p(n,"rateOverTime",fC,d(n)),p(n,"shapeModule",fk,d(n)),p(n,"velocityOvertimeModule",fw,d(n)),p(n,"sizeOvertimeModule",fE,d(n)),p(n,"rotationOvertimeModule",fT,d(n)),p(n,"colorOvertimeModule",fR,d(n)),p(n,"spriteAnimationModule",fA,d(n)),p(n,"limitVelocityOvertimeModule",f_,d(n)),p(n,"bursts",fP,d(n)),p(n,"rendererModule",fB,d(n)),n.particles=[],n.time=0,n.emitRateTimeCounter=0,n.isPlaying=!1,n.isStopped=!0,n.isEmitting=!1,n.needToRestart=!1,n.startLifetime.constant=5,n.startSizeX.constant=1,n.startSpeed.constant=5,n.rateOverTime.constant=10,n}return y(l,[{key:"preview",get:function(){return this._preview},set:function(n){this._preview=n,this.graphics&&this.graphics.destroy()}},{key:"onEnable",value:function(){}},{key:"onLoad",value:function(){this.preview=null!==this.getComponent(ey),this.node.removeAllChildren()}},{key:"start",value:function(){this.node.position=new ep(this.node.position.x,this.node.position.y,100),(this.playOnAwake&&!z||this.preview&&z)&&this.play()}},{key:"update",value:function(n){this.isPlaying&&(this.time+=n,this.emitting(n))}},{key:"play",value:function(){this.needToRestart&&(this.needToRestart=!1),this.isStopped&&(this.isStopped=!1),this.time=0,this.isPlaying=!0,this.isEmitting=!0}},{key:"stop",value:function(){this.isPlaying||(this.isPlaying=!1),this.isEmitting||(this.isEmitting=!1),this.isStopped=!0}},{key:"emitting",value:function(n){var i=this,a=this.startDelay.evaluate(0,1);if(this.time>a&&this.time>this.duration+a&&(this.loop||(this.isEmitting=!1)),this.isEmitting){if(this.emitRateTimeCounter+=this.rateOverTime.evaluate(this.time/this.duration,1)*n,this.emitRateTimeCounter>1){var r=Math.floor(this.emitRateTimeCounter);this.emitRateTimeCounter-=r,this.emit(r,n)}var p,d=T(this.bursts);try{for(d.s();!(p=d.n()).done;)p.value.update(this,n)}catch(n){d.e(n)}finally{d.f()}}var y=this.gravityModifier.evaluate(this.time/this.duration,1);this.particles.forEach(function(a,r){a.node.active&&(i.spriteAnimationModule.update(a),i.sizeOvertimeModule.update(a),i.rotationOvertimeModule.update(a,n),i.colorOvertimeModule.update(a),i.velocityOvertimeModule.update(a,n),i.applyGravityModifier(a,y),i.limitVelocityOvertimeModule.update(a,n),a.node.position.add(a.velocity.clone().multiplyScalar(n)),a.remainingLifetime-=n,a.remainingLifetime<=0&&(a.node.active=!1))})}},{key:"emit",value:function(n,i){if(null!==this.rendererModule.spriteFrame)for(var a=this.time%this.duration/this.duration,r=0;r<n;r++){var p=this.getFreeParticle();p.init(this),p.reset(),this.shapeModule.emit(p);var d=this.startSpeed.evaluate(a,this.rand());p.velocity=p.velocity.clone().multiplyScalar(d);var y=this.startSizeX.evaluate(a,this.rand()),m=this.startSize2D?new ep(y,this.startSizeY.evaluate(a,this.rand()),1):new ep(y,y,1);p.startSize=m.clone(),p.node.scale=m.clone();var g=this.startRotation.evaluate(a,this.rand());p.node.eulerAngles=new ep(0,0,g),p.startColor=this.startColor.evaluate(a,this.rand()).clone(),p.sprite.color=p.startColor.clone(),p.startLifetime=this.startLifetime.evaluate(a,this.rand())+i,p.remainingLifetime=p.startLifetime,p.randomSeed=e7(0,233280)}}},{key:"applyGravityModifier",value:function(n,i){n.velocity.add(new ep(0,-9.8*i,0))}},{key:"rand",value:function(){return e6(e7(0,e3.INT_MAX))}},{key:"getFreeParticle",value:function(){var n=this.particles.find(function(n){return!n.node.active});return n||(n=this.createParticle()),n.node.active=!0,n}},{key:"createParticle",value:function(){var n=new Y,i=Q(n),a=i.addComponent(dg),r=i.addComponent(el);return this.particles.push(a),r.spriteFrame=this.rendererModule.spriteFrame,r.customMaterial=this.rendererModule.material,this.node.addChild(i),a}}]),l}(ea)).prototype,"preview",[yK],Object.getOwnPropertyDescriptor(fs.prototype,"preview"),fs.prototype),fl=n(fs.prototype,"playOnAwake",[yq],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),fu=n(fs.prototype,"duration",[yY],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),fc=n(fs.prototype,"loop",[yJ],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),fh=n(fs.prototype,"startDelay",[yX],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new dz}}),fp=n(fs.prototype,"startLifetime",[yZ],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new dz}}),fd=n(fs.prototype,"startColor",[yQ],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new dW}}),fv=n(fs.prototype,"startSize2D",[y$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),fy=n(fs.prototype,"startSizeX",[y0],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new dz}}),ff=n(fs.prototype,"startSizeY",[y1],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new dz}}),fm=n(fs.prototype,"startSpeed",[y2],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new dz}}),fg=n(fs.prototype,"startRotation3D",[y3],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),fb=n(fs.prototype,"startRotation",[y4],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new dz}}),fS=n(fs.prototype,"gravityModifier",[y5],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new dz}}),fC=n(fs.prototype,"rateOverTime",[y7],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new dz}}),fk=n(fs.prototype,"shapeModule",[y6],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new yp}}),fw=n(fs.prototype,"velocityOvertimeModule",[y9],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new fD}}),fE=n(fs.prototype,"sizeOvertimeModule",[y8],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new yP}}),fT=n(fs.prototype,"rotationOvertimeModule",[fe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new v8}}),fR=n(fs.prototype,"colorOvertimeModule",[ft],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new vl}}),fA=n(fs.prototype,"spriteAnimationModule",[fn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new yH}}),f_=n(fs.prototype,"limitVelocityOvertimeModule",[fi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new vb}}),fP=n(fs.prototype,"bursts",[fG,fa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),fB=n(fs.prototype,"rendererModule",[fo],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new vG}}),fr=fs))||fr)||fr)||fr);K._RF.pop(),K._RF.push({},"21a9aAlkBtGxKLqip8g0o6l","ParticleSystem2DExtra",void 0);var fx=q.ccclass,fU=q.disallowMultiple,fH=q.executeInEditMode,fj=q.requireComponent,fV=fx("ParticleSystem2DExtra")(fI=fH(!0)(fI=fU(!0)(fI=fj(te)(fI=function(n){i(o,n);var p=a(o);function o(){var n;r(this,o);for(var i=arguments.length,a=new Array(i),d=0;d<i;d++)a[d]=arguments[d];return(n=p.call.apply(p,[this].concat(a))).emitParticle=function(i){return function(a){i(a);var r=n.particleSystem._simulator.particles.length,p=n.particleSystem._simulator.particles[r-1];n.initParticle(p)}},n.step=function(i){return function(a){for(var r=n.particleSystem._simulator.particles,p=0;p<r.length;p++){var d=r[p];n.updateParticle(d,a)}i(a)}},n}return y(o,[{key:"__preload",value:function(){this.particleSystem=this.getComponent(te),this.validateRequiredComponents(),this.overrideFunctions()}},{key:"overrideFunctions",value:function(){var n=this.particleSystem._simulator.emitParticle.bind(this.particleSystem._simulator);this.particleSystem._simulator.emitParticle=this.emitParticle(n);var i=this.particleSystem._simulator.step.bind(this.particleSystem._simulator);this.particleSystem._simulator.step=this.step(i)}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}}]),o}(ea))||fI)||fI)||fI)||fI;K._RF.pop(),K._RF.push({},"9a5a3MgLaRAKbHluGCPsA8j","ExampleParticleSystem2DExtra",void 0);(0,q.ccclass)("ExampleParticleSystem2DExtra")(function(n){i(o,n);var p=a(o);function o(){return r(this,o),p.apply(this,arguments)}return y(o,[{key:"initParticle",value:function(n){n.maxSize=eA.randomRange(.25,1)*n.size,n.size=0,n.deltaSize=0,n.cycleDuration=eA.randomRange(.4,.6),n.life=n.timeToLive,this.setInitPosition(n.pos)}},{key:"updateParticle",value:function(n,i){this.updateScale(n)}},{key:"setInitPosition",value:function(n){var i=n.x,a=n.y;return n.x=i+eA.randomRange(-350,350),n.y=a+eA.randomRange(-350,350),n}},{key:"updateScale",value:function(n){var i=1-(n.life-n.timeToLive)%n.cycleDuration/n.cycleDuration;n.size=n.maxSize*Math.sin(i*Math.PI)}}]),o}(fV));K._RF.pop(),K._RF.push({},"6adb6Vsx2BIsYfe4A3i4ArN","custom",void 0);var fW;(0,q.ccclass)("CustomSpine")(function(n){i(o,n);var p=a(o);function o(){var n;r(this,o);for(var i=arguments.length,a=new Array(i),d=0;d<i;d++)a[d]=arguments[d];return(n=p.call.apply(p,[this].concat(a))).spine=null,n.anims=null,n.customEnd=function(i){var a;console.log("CustomSpine customEnd",i);var r=null===(a=n.spine)||void 0===a?void 0:a.skeletonData;if(r){var p=r.getRuntimeData();p&&console.log("CustomSpine runtimeData",p)}},n}return y(o,[{key:"__preload",value:function(){var n,i;this.spine=null!==(n=this.node.getComponent(ew.Skeleton))&&void 0!==n?n:null,this.anims=null!==(i=this.node.getComponent(eo))&&void 0!==i?i:null,m.lazyValidateProperties(this)}},{key:"onLoad",value:function(){var n;console.log("CustomSpine onLoad",this.spine,this.anims),null===(n=this.anims)||void 0===n||n.play("custom")}},{key:"start",value:function(){}}]),o}(ea));K._RF.pop(),K._RF.push({},"4a9beTdMntC0q9yngb8a2go","BootScene",void 0);var fK,fq=q.ccclass,fY=q.disallowMultiple,fJ=GameCore,fX=fJ.Events,fZ=fJ.Configs,fQ=globalThis.game,f$=fQ.ads,f0=fQ.player,f1=fQ.event;fq("BootScene")(fW=fY(fW=function(n){i(o,n);var p=a(o);function o(){var n;r(this,o);for(var i=arguments.length,a=new Array(i),d=0;d<i;d++)a[d]=arguments[d];return(n=p.call.apply(p,[this].concat(a))).processWhenGameSdkStarted=function(){n.setupGameData(),n.sendMsGamesDailyNotification()},n.handlePauseAudio=function(){f1.on(fX.VISIBILITY_HIDDEN,n.handleMuteAudio),f1.on(fX.VISIBILITY_VISIBLE,n.handleUnMuteAudio)},n.handleMuteAudio=function(){k.muteAudio(!0)},n.handleUnMuteAudio=function(){f$.isAdFullSizeShowing()||k.muteAudio(!1)},n}return y(o,[{key:"__preload",value:function(){this.setupAndroidPlatformAds(),this.processCrazyGamesLoadingStart(),this.listenEvents()}},{key:"onLoad",value:function(){this.handlePauseAudio(),fZ.Core.StartSDKAfterLoadGame||L.showLoadingFullScreen(x.BOOT_SCENE)}},{key:"start",value:function(){this.processCrazyGamesLoadingStop()}},{key:"listenEvents",value:function(){f1.catchUp(fX.GAME_SDK_STARTED,this.processWhenGameSdkStarted)}},{key:"setupGameData",value:function(){var n=f0.getGameData();if(n){var i=G.MaxLevel,a=n.totalLevel,r={totalLevel:Math.max(a,i)};f0.setGameData(r)}}},{key:"processCrazyGamesLoadingStart",value:function(){"gameLoadingStart"in GameSDK.extra&&GameSDK.extra.gameLoadingStart()}},{key:"processCrazyGamesLoadingStop",value:function(){"gameLoadingStop"in GameSDK.extra&&GameSDK.extra.gameLoadingStop()}},{key:"setupAndroidPlatformAds",value:function(){}},{key:"sendMsGamesDailyNotification",value:function(){var n=GameSDK.extra;"sendDailyNotificationAsync"in n&&n.sendDailyNotificationAsync()}}]),o}(ea))||fW);K._RF.pop(),K._RF.push({},"c4e30ckJiFBG4VHrF+wikMs","DashboardScene",void 0);var f2,f3=q.ccclass,f4=q.disallowMultiple;f3("DashboardScene")(fK=f4(fK=function(n){i(o,n);var p=a(o);function o(){return r(this,o),p.apply(this,arguments)}return y(o,[{key:"__preload",value:function(){this.validateRequiredComponents()}},{key:"start",value:function(){this.scheduleOnce(this.preloadScenes,2)}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"preloadScenes",value:function(){M.preloadGameScene()}},{key:"handleSingleButtonClicked",value:function(){M.switchToGameScene()}},{key:"handleEndlessButtonClicked",value:function(){M.switchToEndlessScene()}},{key:"handleTestLayoutButtonClicked",value:function(){M.switchScene(x.TEST_LAYOUT_SCENE)}}]),o}(ea))||fK);K._RF.pop(),K._RF.push({},"22d76GFn6BEoKFiZCFN1HmA","DraftScene",void 0);var f5,f7=q.ccclass,f6=q.disallowMultiple;f7("DraftScene")(f2=f6(f2=function(n){i(o,n);var p=a(o);function o(){return r(this,o),p.apply(this,arguments)}return y(o,[{key:"__preload",value:function(){this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"onLoad",value:function(){GameSDK.startGameAsync().catch(function(n){console.warn("GameSDK.startGameAsync",n)})}},{key:"switchScene",value:function(){}}]),o}(ea))||f2);K._RF.pop(),K._RF.push({},"27217ZS55VNqbq0d9w9Cc+3","Component",void 0);var f9,f8=q.ccclass,me=q.executeInEditMode,mt=q.disallowMultiple,mn=GameCore.Events,mi=globalThis.game.event;f8("DraftComponent")(f5=mt(f5=me(!0)(f5=function(n){i(o,n);var p=a(o);function o(){var n;r(this,o);for(var i=arguments.length,a=new Array(i),d=0;d<i;d++)a[d]=arguments[d];return(n=p.call.apply(p,[this].concat(a))).locale="en",n.eventPayload={screenName:"DraftScene"},n}return y(o,[{key:"__preload",value:function(){console.log("DraftComponent",mn)}},{key:"onLoad",value:function(){console.log("DraftComponent",mi)}},{key:"start",value:function(){console.log("DraftComponent",z),this.makePersistent()}},{key:"makePersistent",value:function(){ei.addPersistRootNode(this.node)}}]),o}(ea))||f5)||f5);K._RF.pop(),K._RF.push({},"3f6029o9mpM/K2ccwbuv3XD","EndlessScene",void 0);var ma,mo=q.ccclass,mr=q.disallowMultiple,ms=globalThis.game,ml=ms.audio,mu=ms.ads,mc=b.Layout,mh=b.DesignSize.Portrait;mo("EndlessScene")(f9=mr(f9=function(n){i(o,n);var p=a(o);function o(){var n;r(this,o);for(var i=arguments.length,a=new Array(i),d=0;d<i;d++)a[d]=arguments[d];return(n=p.call.apply(p,[this].concat(a))).handleGameMaskWhenLayoutChanged=function(n){var i=eU("Canvas/Game/GameObjects");if(i){var a=i.getComponent(eN);a&&(a.enabled=n===mc.Landscape)}},n.handleAdsWhenResize=function(){n.checkBottomBannerAdSize(),n.setMaxSizeSideBannerAd()},n.attemptCallSubscribeBot=function(){"subscribeBotAsync"in GameSDK.extra&&GameSDK.extra.subscribeBotAsync().catch(function(n){console.warn("subscribeBotAsync",n)})},n}return y(o,[{key:"__preload",value:function(){this.validateRequiredComponents(),this.listenGameEvents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"onLoad",value:function(){}},{key:"listenGameEvents",value:function(){this.node.scene.on(g.LAYOUT_CHANGED,this.handleGameMaskWhenLayoutChanged),this.node.scene.on(g.VIEW_RESIZE,this.handleAdsWhenResize)}},{key:"checkBottomBannerAdSize",value:function(){var n=tt.instance.getVisibleSize(),i=C.worldSizeToCssSize(n.height*U.MAX_BOTTOM_BANNER_RATIO);GameCore.Configs.Ads.BannerDisplayAdOptions.forEach(function(n){var a=n.PlacementId,r=n.Position,p=n.BannerHeight;"bottom"===r&&(p>i?mu.hideBannerAdAsync(a).catch(function(n){}):mu.showBannerAdAsync(a).catch(function(n){}))})}},{key:"setMaxSizeSideBannerAd",value:function(){var n=GameSDK.extra;if("setSideBannerAdRemainSize"in n){var i=tt.instance.getVisibleSize(),a=mh.WIDTH+24,r=(i.width-a)/2,p=C.worldSizeToCssSize(r);n.setSideBannerAdRemainSize(p)}}},{key:"start",value:function(){this.scheduleOnce(this.attemptCallSubscribeBot,.5),this.updateVolumeBackgroundMusic()}},{key:"updateVolumeBackgroundMusic",value:function(){ml.setVolume(1,"global_music")}}]),o}(ea))||f9);K._RF.pop(),K._RF.push({},"9b83boaSv9PE6mRFqy0MSI8","GameScene",void 0);var mp,md=q.ccclass,mv=q.disallowMultiple,my=globalThis.game,mf=my.audio,mm=my.ads,mg=b.Layout,mb=b.DesignSize.Portrait;md("GameScene")(ma=mv(ma=function(n){i(o,n);var p=a(o);function o(){var n;r(this,o);for(var i=arguments.length,a=new Array(i),d=0;d<i;d++)a[d]=arguments[d];return(n=p.call.apply(p,[this].concat(a))).handleGameMaskWhenLayoutChanged=function(n){var i=eU("Canvas/Game/GameObjects");if(i){var a=i.getComponent(eN);a&&(a.enabled=n===mg.Landscape)}},n.handleAdsWhenResize=function(){n.checkBottomBannerAdSize(),n.setMaxSizeSideBannerAd()},n.attemptCallSubscribeBot=function(){"subscribeBotAsync"in GameSDK.extra&&GameSDK.extra.subscribeBotAsync().catch(function(n){console.warn("subscribeBotAsync",n)})},n}return y(o,[{key:"__preload",value:function(){this.validateRequiredComponents(),this.listenGameEvents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"listenGameEvents",value:function(){eu.on(g.VIEW_RESIZE,this.handleAdsWhenResize),eu.on(g.LAYOUT_CHANGED,this.handleGameMaskWhenLayoutChanged)}},{key:"checkBottomBannerAdSize",value:function(){var n=tt.instance.getVisibleSize(),i=C.worldSizeToCssSize(n.height*U.MAX_BOTTOM_BANNER_RATIO);GameCore.Configs.Ads.BannerDisplayAdOptions.forEach(function(n){var a=n.PlacementId,r=n.Position,p=n.BannerHeight;"bottom"===r&&(p>i?mm.hideBannerAdAsync(a).catch(function(n){}):mm.showBannerAdAsync(a).catch(function(n){}))})}},{key:"setMaxSizeSideBannerAd",value:function(){var n=GameSDK.extra;if("setSideBannerAdRemainSize"in n){var i=tt.instance.getVisibleSize(),a=mb.WIDTH+24,r=(i.width-a)/2,p=C.worldSizeToCssSize(r);n.setSideBannerAdRemainSize(p)}}},{key:"start",value:function(){this.scheduleOnce(this.attemptCallSubscribeBot,.5),this.updateVolumeBackgroundMusic(),this.scheduleOnce(this.preloadScenes,2)}},{key:"preloadScenes",value:function(){M.preloadDashboardScene()}},{key:"updateVolumeBackgroundMusic",value:function(){mf.setVolume(1,"global_music")}}]),o}(ea))||ma);K._RF.pop(),K._RF.push({},"2b2ebUm0nFD64V/fcD8RPF/","TestLayoutScene",void 0);var mS,mC,mk,mw,mE,mT=q.ccclass,mR=q.disallowMultiple;mT("TestLayoutScene")(mp=mR(mp=function(n){i(o,n);var p=a(o);function o(){var n;r(this,o);for(var i=arguments.length,a=new Array(i),d=0;d<i;d++)a[d]=arguments[d];return(n=p.call.apply(p,[this].concat(a))).handleLayoutChange=function(){L.showNotificationScreen("Layout changed")},n}return y(o,[{key:"__preload",value:function(){this.validateRequiredComponents(),M.markIsTestScene(x.TEST_LAYOUT_SCENE),this.listenGameEvents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"listenGameEvents",value:function(){eu.on(g.LAYOUT_CHANGED,this.handleLayoutChange)}},{key:"switchScene",value:function(){M.switchScene(x.DASHBOARD_SCENE)}}]),o}(ea))||mp);K._RF.pop(),K._RF.push({},"c0a5fPghzxBxpXiudxt+Qd4","TestParticleSystemScene",void 0);var mA,m_=q.ccclass,mP=q.property;mS=m_("TestParticleSystemScene"),mC=mP(Y),mk=m.required(),mS((mE=n((mw=function(n){i(l,n);var m=a(l);function l(){var n;r(this,l);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=m.call.apply(m,[this].concat(a)),p(n,"stars",mE,d(n)),n}return y(l,[{key:"__preload",value:function(){M.markIsTestScene(x.TEST_PARTICLE_SYSTEM_SCENE)}},{key:"onLoad",value:function(){GameSDK.startGameAsync().catch(function(n){console.warn("GameSDK.startGameAsync",n)})}},{key:"start",value:function(){var n=this.stars.getComponent(fz);null==n||n.play()}}]),l}(ea)).prototype,"stars",[mC,mk],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),mw));K._RF.pop(),K._RF.push({},"7dc71c6qMBI/ZZfA4rG4nFv","TestPerformanceScene",void 0);var mB,mL=q.ccclass,mO=q.disallowMultiple;mL("TestPerformanceScene")(mA=mO(mA=function(n){i(o,n);var p=a(o);function o(){return r(this,o),p.apply(this,arguments)}return y(o,[{key:"__preload",value:function(){this.validateRequiredComponents(),M.markIsTestScene(x.TEST_PERFORMANCE_SCENE),this.listenEvents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"onLoad",value:function(){GameSDK.startGameAsync().catch(function(n){console.warn("GameSDK.startGameAsync",n)})}},{key:"listenEvents",value:function(){}},{key:"start",value:function(){}}]),o}(ea))||mA);K._RF.pop(),K._RF.push({},"0a4aeK2lAdAjq0xWi6SCbV+","TestScene",void 0);var mD=q.ccclass,mI=q.disallowMultiple,mN=GameCore.Events,mG=globalThis.game.event;mD("TestScene")(mB=mI(mB=function(n){i(o,n);var p=a(o);function o(){return r(this,o),p.apply(this,arguments)}return y(o,[{key:"__preload",value:function(){this.validateRequiredComponents(),M.markIsTestScene(x.TEST_SCENE)}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"onLoad",value:function(){this.listenScreenEvents(),GameSDK.startGameAsync().catch(function(n){console.warn("GameSDK.startGameAsync",n)})}},{key:"listenScreenEvents",value:function(){mG.once(mN.CLOSED_SCREEN,function(n){n.screenName===H[O.LOADING_SCREEN]&&L.openScreen(O.NOTIFICATION_SCREEN,{message:"Test screen events pass!",duration:2,isCloseButtonVisible:!1})})}},{key:"start",value:function(){console.log("TestScene.start"),L.openScreen(O.LOADING_SCREEN,{duration:.5})}}]),o}(ea))||mB);K._RF.pop(),K._RF.push({},"56a103phldKO7/xShKcD3bI","AnimationDemo",void 0);(0,q.ccclass)("AnimationDemo")(function(n){i(o,n);var p=a(o);function o(){return r(this,o),p.apply(this,arguments)}return y(o,[{key:"onLoad",value:function(){}},{key:"switchToTestTransitionScene",value:function(){M.switchScene("TestTransitionScene")}}]),o}(ea));K._RF.pop(),K._RF.push({},"a3b8adQtftPmKSSoumHWY1e","AudioDemo",void 0);(0,q.ccclass)("AudioDemo")(function(n){i(o,n);var p=a(o);function o(){var n;r(this,o);for(var i=arguments.length,a=new Array(i),d=0;d<i;d++)a[d]=arguments[d];return(n=p.call.apply(p,[this].concat(a))).isMusicMute=!1,n.isSoundMute=!1,n.listSounds=[],n}return y(o,[{key:"onLoad",value:function(){var n,i;this.musicComp=null===(n=eU("Music"))||void 0===n?void 0:n.getComponent(j),this.soundComp=null===(i=eU("Sound"))||void 0===i?void 0:i.getComponent(V),this.validateRequiredComponents(),this.listSounds=[R.BEE_FLYING,R.BEE_STING_DOGE,R.BG_MUSIC,R.BUTTON_CLICK,R.COLLECTING_COINS,R.DOGE_DIES,R.DOGE_HURT,R.END_DRAW,R.HAND_CLAP,R.LEVEL_FAIL,R.LEVEL_PASS,R.LOST_STAR_IN_GAMEPLAY,R.RAISE_STAR,R.SPAWN_COINS,R.STAR_RAISE,R.TOUCH_START,R.BEE_BULLET_EXPLODE]}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"playBackgroundMusic",value:function(){this.musicComp.play(R.BG_MUSIC)}},{key:"pauseBackgroundMusic",value:function(){this.musicComp.pause(R.BG_MUSIC)}},{key:"stopBackgroundMusic",value:function(){this.musicComp.stop(R.BG_MUSIC)}},{key:"randomMusicChannelVolume",value:function(){var n=Math.random();this.musicComp.setVolume(n)}},{key:"toggleMuteMusicChannel",value:function(){this.isMusicMute?(this.musicComp.mute(!1),this.isMusicMute=!1):(this.musicComp.mute(!0),this.isMusicMute=!0)}},{key:"playRandomSound",value:function(){this.soundComp.play(this.listSounds[Math.floor(Math.random()*this.listSounds.length)])}},{key:"toggleMuteSoundChannel",value:function(){this.isSoundMute?(this.soundComp.mute(!1),this.isSoundMute=!1):(this.soundComp.mute(!0),this.isSoundMute=!0)}},{key:"randomSoundChannelVolume",value:function(){var n=Math.random();this.soundComp.setVolume(n)}}]),o}(ea));K._RF.pop(),K._RF.push({},"9e6b330nHBK2oNz8N9/lpDx","FlowChallenge",void 0);var mM=q.ccclass,mF=globalThis.game,mz=mF.match,mx=mF.player;mM("FlowChallenge")(function(n){i(h,n);var p,d,m,g,b,S=a(h);function h(){var n;r(this,h);for(var i=arguments.length,a=new Array(i),p=0;p<i;p++)a[p]=arguments[p];return(n=S.call.apply(S,[this].concat(a))).playerId="",n}return y(h,[{key:"onLoad",value:function(){this.playerId=mx.getPlayerId()}},{key:"inviteFriends",value:(b=I(function(){var n;return _ts_generator(this,function(i){switch(i.label){case 0:i.trys.push([0,2,3,4]);L.showLoadingScreen(0);return[4,mz.challenge.invite.processAsync({playerId:this.playerId})];case 1:i.sent();return[3,4];case 2:n=i.sent();console.warn("inviteFriends",n),_instanceof(n,Error)&&L.showNotificationScreen(n.message);return[3,4];case 3:L.closeLoadingScreen();return[7];case 4:return[2]}})}),function(){return b.apply(this,arguments)})},{key:"challengeFriend",value:(g=I(function(n,i){var a,r;return _ts_generator(this,function(n){switch(n.label){case 0:a=JSON.parse(i);n.label=1;case 1:n.trys.push([1,3,4,5]);L.showLoadingScreen(0);return[4,mz.challenge.friend.processAsync(D(D({},a),{},{playerId:this.playerId}))];case 2:n.sent();return[3,5];case 3:r=n.sent();console.warn("challengeFriend",r),_instanceof(r,Error)&&L.showNotificationScreen(r.message);return[3,5];case 4:L.closeLoadingScreen();return[7];case 5:return[2]}})}),function(n,i){return g.apply(this,arguments)})},{key:"joinChallenge",value:(m=I(function(n,i){var a,r;return _ts_generator(this,function(n){switch(n.label){case 0:a=JSON.parse(i);n.label=1;case 1:n.trys.push([1,3,4,5]);L.showLoadingScreen(0);return[4,mz.challenge.join.processAsync(D(D({},a),{},{playerId:this.playerId}))];case 2:n.sent();return[3,5];case 3:r=n.sent();console.warn("joinChallenge",r),_instanceof(r,Error)&&L.showNotificationScreen(r.message);return[3,5];case 4:L.closeLoadingScreen();return[7];case 5:return[2]}})}),function(n,i){return m.apply(this,arguments)})},{key:"continueChallenge",value:(d=I(function(n,i){var a,r;return _ts_generator(this,function(n){switch(n.label){case 0:a=JSON.parse(i);n.label=1;case 1:n.trys.push([1,3,4,5]);L.showLoadingScreen(0);return[4,mz.challenge.continue.processAsync(D(D({},a),{},{playerId:this.playerId}))];case 2:n.sent();return[3,5];case 3:r=n.sent();console.warn("continueChallenge",r),_instanceof(r,Error)&&L.showNotificationScreen(r.message);return[3,5];case 4:L.closeLoadingScreen();return[7];case 5:return[2]}})}),function(n,i){return d.apply(this,arguments)})},{key:"finishChallenge",value:(p=I(function(){var n;return _ts_generator(this,function(i){switch(i.label){case 0:i.trys.push([0,2,3,4]);L.showLoadingScreen(0);return[4,mz.challenge.finish.processAsync({playerId:mx.getPlayerId(),playerScore:Math.floor(2*Math.random())})];case 1:i.sent();return[3,4];case 2:n=i.sent();console.warn("finishChallenge",n),_instanceof(n,Error)&&L.showNotificationScreen(n.message);return[3,4];case 3:L.closeLoadingScreen();return[7];case 4:return[2]}})}),function(){return p.apply(this,arguments)})}]),h}(ea));K._RF.pop(),K._RF.push({},"f3decJ3ZlRLt6CDMHpl1XCe","FlowContext",void 0);var mU=q.ccclass,mH=globalThis.game,mj=mH.match,mV=mH.player,mW=mH.context;mU("FlowContext")(function(n){i(l,n);var p,d,m=a(l);function l(){var n;r(this,l);for(var i=arguments.length,a=new Array(i),p=0;p<i;p++)a[p]=arguments[p];return(n=m.call.apply(m,[this].concat(a))).playerId="",n.changeContext=function(){var n=I(function(n,i,a){return _ts_generator(this,function(r){switch(r.label){case 0:mW.receiveContext(n,i,a);return[4,mW.detectContextSessionType()];case 1:r.sent(),game.context.detectContextGameMode();return[2]}})});return function(i,a,r){return n.apply(this,arguments)}}(),n}return y(l,[{key:"onLoad",value:function(){this.playerId=mV.getPlayerId()}},{key:"chooseFriends",value:(d=I(function(n,i){var a,r;return _ts_generator(this,function(n){switch(n.label){case 0:a=JSON.parse(i);n.label=1;case 1:n.trys.push([1,3,4,5]);L.showLoadingScreen(0);return[4,mj.context.choose.processAsync(D(D({},a),{},{playerId:this.playerId}))];case 2:n.sent();return[3,5];case 3:r=n.sent();console.warn("chooseFriends",r),_instanceof(r,Error)&&L.showNotificationScreen(r.message);return[3,5];case 4:L.closeLoadingScreen();return[7];case 5:return[2]}})}),function(n,i){return d.apply(this,arguments)})},{key:"processContextData",value:(p=I(function(){var n;return _ts_generator(this,function(i){switch(i.label){case 0:i.trys.push([0,2,3,4]);L.showLoadingScreen(0);return[4,mW.processContextData()];case 1:i.sent();return[3,4];case 2:n=i.sent();console.warn("processContext",n),_instanceof(n,Error)&&L.showNotificationScreen(n.message);return[3,4];case 3:L.closeLoadingScreen();return[7];case 4:return[2]}})}),function(){return p.apply(this,arguments)})},{key:"setSingleContext",value:function(){this.changeContext("","SOLO",{})}},{key:"setTournamentContext",value:function(){this.changeUrl("/?context_source_id=123&context_type=GENERIC&tournament=true"),this.changeContext("mocked-context-id-tournament","THREAD",{})}},{key:"setShareInviteContext",value:function(){var n={type:mW.getSessionContextTypes().SHARE_INVITE,playerId:"4766619483409000",playerName:"Player",playerPhoto:""};this.changeContext("mocked-context-id-share-invite","THREAD",n)}},{key:"setMatchingGroupContext",value:function(){var n={type:mW.getSessionContextTypes().MATCHING_GROUP,playerId:"4766619483409000",playerName:"Player",playerPhoto:"",playerScore:100};this.changeContext("mocked-context-id-matching-group","GROUP",n)}},{key:"setChallengeFriendContext",value:function(){var n={type:mW.getSessionContextTypes().CHALLENGE_FRIEND,playerId:"4766619483409000",playerName:"Player",playerPhoto:""};this.changeContext("mocked-context-id-challenge-friend","THREAD",n)}},{key:"changeUrl",value:function(n){window.history.pushState({},"",n)}}]),l}(ea));K._RF.pop(),K._RF.push({},"36562c8k/RF2p/1aLUWFaf8","FlowGroup",void 0);var mK=q.ccclass,mq=globalThis.game,mY=mq.match,mJ=mq.player;mK("FlowGroup")(function(n){i(u,n);var p,d,m,g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),p=0;p<i;p++)a[p]=arguments[p];return(n=g.call.apply(g,[this].concat(a))).playerId="",n}return y(u,[{key:"onLoad",value:function(){this.playerId=mJ.getPlayerId()}},{key:"startGroup",value:(m=I(function(n,i){var a,r;return _ts_generator(this,function(n){switch(n.label){case 0:a=JSON.parse(i);n.label=1;case 1:n.trys.push([1,3,4,5]);L.showLoadingScreen(0);return[4,mY.group.start.processAsync(D(D({},a),{},{matchTag:"test",playerId:this.playerId}))];case 2:n.sent();return[3,5];case 3:r=n.sent();console.warn("startGroup",r),_instanceof(r,Error)&&L.showNotificationScreen(r.message);return[3,5];case 4:L.closeLoadingScreen();return[7];case 5:return[2]}})}),function(n,i){return m.apply(this,arguments)})},{key:"joinGroup",value:(d=I(function(n,i){var a,r;return _ts_generator(this,function(n){switch(n.label){case 0:a=JSON.parse(i);n.label=1;case 1:n.trys.push([1,3,4,5]);L.showLoadingScreen(0);return[4,mY.group.join.processAsync(D(D({},a),{},{playerId:this.playerId}))];case 2:n.sent();return[3,5];case 3:r=n.sent();console.warn("joinGroup",r),_instanceof(r,Error)&&L.showNotificationScreen(r.message);return[3,5];case 4:L.closeLoadingScreen();return[7];case 5:return[2]}})}),function(n,i){return d.apply(this,arguments)})},{key:"finishGroup",value:(p=I(function(){var n;return _ts_generator(this,function(i){switch(i.label){case 0:i.trys.push([0,2,3,4]);L.showLoadingScreen(0),mJ.setPlayerDataByName("score",Math.floor(2*Math.random()));return[4,mY.group.finish.processAsync()];case 1:i.sent();return[3,4];case 2:n=i.sent();console.warn("finishGroup",n),_instanceof(n,Error)&&L.showNotificationScreen(n.message);return[3,4];case 3:L.closeLoadingScreen();return[7];case 4:return[2]}})}),function(){return p.apply(this,arguments)})}]),u}(ea));K._RF.pop(),K._RF.push({},"46e6dOzDGJMa48+tVKTAEIT","FlowSingle",void 0);var mX=q.ccclass,mZ=globalThis.game,mQ=mZ.match,m$=mZ.player;mX("FlowSingle")(function(n){i(l,n);var p,d,m=a(l);function l(){var n;r(this,l);for(var i=arguments.length,a=new Array(i),p=0;p<i;p++)a[p]=arguments[p];return(n=m.call.apply(m,[this].concat(a))).playerId="",n}return y(l,[{key:"onLoad",value:function(){this.playerId=m$.getPlayerId()}},{key:"startSingle",value:(d=I(function(){var n;return _ts_generator(this,function(i){switch(i.label){case 0:i.trys.push([0,2,3,4]);L.showLoadingScreen(0);return[4,mQ.single.start.processAsync({playerId:this.playerId})];case 1:i.sent();return[3,4];case 2:n=i.sent();console.warn("startSingle",n),_instanceof(n,Error)&&L.showNotificationScreen(n.message);return[3,4];case 3:L.closeLoadingScreen();return[7];case 4:return[2]}})}),function(){return d.apply(this,arguments)})},{key:"finishSingle",value:(p=I(function(){var n;return _ts_generator(this,function(i){switch(i.label){case 0:i.trys.push([0,2,3,4]);m$.setPlayerDataByName("score",Math.floor(2*Math.random()));return[4,mQ.single.finish.processAsync()];case 1:i.sent();return[3,4];case 2:n=i.sent();console.warn("finishSingle",n),_instanceof(n,Error)&&L.showNotificationScreen(n.message);return[3,4];case 3:L.closeLoadingScreen();return[7];case 4:return[2]}})}),function(){return p.apply(this,arguments)})}]),l}(ea));K._RF.pop(),K._RF.push({},"943b1Zkv9BAaZVhinus8Bkv","FlowTournament",void 0);var m0=q.ccclass,m1=globalThis.game,m2=m1.match,m3=m1.player;m0("FlowTournament")(function(n){i(v,n);var p,d,m,g,b,S,C,k,w=a(v);function v(){var n;r(this,v);for(var i=arguments.length,a=new Array(i),p=0;p<i;p++)a[p]=arguments[p];return(n=w.call.apply(w,[this].concat(a))).playerId="",n}return y(v,[{key:"onLoad",value:function(){this.playerId=m3.getPlayerId()}},{key:"joinTournament",value:(k=I(function(){var n,i;return _ts_generator(this,function(a){switch(a.label){case 0:a.trys.push([0,3,4,5]);L.showLoadingScreen(0);return[4,GameSDK.getTournamentAsync()];case 1:n=a.sent().getID().toString();return[4,m2.tournament.join.processAsync({tournamentId:n,playerId:this.playerId})];case 2:a.sent();return[3,5];case 3:i=a.sent();console.warn("joinTournament",i),_instanceof(i,Error)&&L.showNotificationScreen(i.message);return[3,5];case 4:L.closeLoadingScreen();return[7];case 5:return[2]}})}),function(){return k.apply(this,arguments)})},{key:"continueTournament",value:(C=I(function(){var n,i;return _ts_generator(this,function(a){switch(a.label){case 0:a.trys.push([0,3,4,5]);L.showLoadingScreen(0);return[4,GameSDK.getTournamentAsync()];case 1:n=a.sent().getContextID();return[4,m2.tournament.continue.processAsync({contextId:n,playerId:this.playerId})];case 2:a.sent();return[3,5];case 3:i=a.sent();console.warn("continueTournament",i),_instanceof(i,Error)&&L.showNotificationScreen(i.message);return[3,5];case 4:L.closeLoadingScreen();return[7];case 5:return[2]}})}),function(){return C.apply(this,arguments)})},{key:"finishTournament",value:(S=I(function(){var n;return _ts_generator(this,function(i){switch(i.label){case 0:i.trys.push([0,2,3,4]);L.showLoadingScreen(0),m3.setPlayerDataByName("score",Math.floor(2*Math.random()));return[4,m2.single.finish.processAsync()];case 1:i.sent();return[3,4];case 2:n=i.sent();console.warn("finishTournament",n),_instanceof(n,Error)&&L.showNotificationScreen(n.message);return[3,4];case 3:L.closeLoadingScreen();return[7];case 4:return[2]}})}),function(){return S.apply(this,arguments)})},{key:"createTournament",value:(b=I(function(){var n,i;return _ts_generator(this,function(a){switch(a.label){case 0:a.trys.push([0,2,3,4]);L.showLoadingScreen(0);n=GameCore.Utils.String.generateObjectId();return[4,GameSDK.tournament.createAsync({initialScore:0,config:{title:"Tournament title",tournamentTitle:"Tournament title"},data:{playerId:this.playerId,playerName:"playerName",leaderboardId:n}})];case 1:a.sent();return[3,4];case 2:i=a.sent();console.warn("createTournament",i),_instanceof(i,Error)&&L.showNotificationScreen(i.message);return[3,4];case 3:L.closeLoadingScreen();return[7];case 4:return[2]}})}),function(){return b.apply(this,arguments)})},{key:"postScoreTournament",value:(g=I(function(n){var i,a;return _ts_generator(this,function(r){switch(r.label){case 0:r.trys.push([0,2,3,4]);i=Number(n.string);console.warn("score",i),L.showLoadingScreen(0);return[4,GameSDK.tournament.postScoreAsync(i)];case 1:r.sent();return[3,4];case 2:a=r.sent();console.warn("postScoreTournament",a),_instanceof(a,Error)&&L.showNotificationScreen(a.message);return[3,4];case 3:L.closeLoadingScreen();return[7];case 4:return[2]}})}),function(n){return g.apply(this,arguments)})},{key:"shareTournament",value:(m=I(function(n,i){var a,r;return _ts_generator(this,function(n){switch(n.label){case 0:a=JSON.parse(i);n.label=1;case 1:n.trys.push([1,3,4,5]);L.showLoadingScreen(0),console.warn("payload",a);return[4,GameSDK.tournament.shareAsync(a)];case 2:n.sent();return[3,5];case 3:r=n.sent();console.warn("shareTournament",a),_instanceof(r,Error)&&L.showNotificationScreen(r.message);return[3,5];case 4:L.closeLoadingScreen();return[7];case 5:return[2]}})}),function(n,i){return m.apply(this,arguments)})},{key:"getTournamentsAsync",value:(d=I(function(){var n;return _ts_generator(this,function(i){try{L.showLoadingScreen(0);n=GameSDK.tournament.getTournamentsAsync();console.warn(n)}catch(n){console.warn("getTournamentsAsync",n),_instanceof(n,Error)&&L.showNotificationScreen(n.message)}finally{L.closeLoadingScreen()}return[2]})}),function(){return d.apply(this,arguments)})},{key:"getTournamentAsync",value:(p=I(function(){var n,i;return _ts_generator(this,function(a){switch(a.label){case 0:a.trys.push([0,2,3,4]);L.showLoadingScreen(0);return[4,GameSDK.getTournamentAsync()];case 1:n=a.sent();console.warn(n);return[3,4];case 2:i=a.sent();console.warn("getTournamentAsync",i),_instanceof(i,Error)&&L.showNotificationScreen(i.message);return[3,4];case 3:L.closeLoadingScreen();return[7];case 4:return[2]}})}),function(){return p.apply(this,arguments)})}]),v}(ea));K._RF.pop(),K._RF.push({},"d78a7DHN+5P/YjKftUFEZcU","JavaAds",void 0);(0,q.ccclass)("JavaAds")(function(n){i(o,n);var p=a(o);function o(){return r(this,o),p.apply(this,arguments)}return y(o,[{key:"__preload",value:function(){this.setupAds()}},{key:"setupAds",value:function(){}},{key:"onLoad",value:function(){}},{key:"start",value:function(){}}]),o}(ea));K._RF.pop(),K._RF.push({},"58e17jb3n9LP6677b7ocHg+","PreloadScreens",void 0);(0,q.ccclass)("PreloadScreens")(function(n){i(o,n);var p=a(o);function o(){return r(this,o),p.apply(this,arguments)}return y(o,[{key:"preload",value:function(){L.preloadScreens()}}]),o}(ea));K._RF.pop(),K._RF.push({},"64311EGU4RKDpfjDUran9nc","RewardedAdsTest",void 0);(0,q.ccclass)("RewardedAdsTest")(function(n){i(o,n);var p=a(o);function o(){return r(this,o),p.apply(this,arguments)}return y(o,[{key:"show",value:function(){N.showRewardVideoAdAsync({includeSDK:["GameCore"]})}},{key:"close",value:function(){L.closeLoadingScreen()}}]),o}(ea));K._RF.pop(),K._RF.push({},"0fd01MYjfdD+4IeN6PtQl3m","ScreenCongratulation",void 0);(0,q.ccclass)("ScreenCongratulation")(function(n){i(o,n);var p=a(o);function o(){return r(this,o),p.apply(this,arguments)}return y(o,[{key:"show",value:function(){L.openScreen(O.CONGRATULATION_SCREEN)}},{key:"close",value:function(){L.closeScreen(O.CONGRATULATION_SCREEN)}}]),o}(ea));K._RF.pop(),K._RF.push({},"bb2dcIUQjhPDLt7B6ga20s/","ScreenLoading",void 0);(0,q.ccclass)("ScreenLoading")(function(n){i(o,n);var p=a(o);function o(){return r(this,o),p.apply(this,arguments)}return y(o,[{key:"show",value:function(n,i){var a=Number(i);L.showLoadingScreen(a)}},{key:"close",value:function(){L.closeLoadingScreen()}}]),o}(ea));K._RF.pop(),K._RF.push({},"f3a15oYustB1aev6BrFD/7Y","ScreenLose",void 0);(0,q.ccclass)("ScreenLose")(function(n){i(o,n);var p=a(o);function o(){return r(this,o),p.apply(this,arguments)}return y(o,[{key:"show",value:function(){L.openScreen(O.LOSE_SCREEN,{level:1})}},{key:"close",value:function(){L.closeScreen(O.LOSE_SCREEN)}}]),o}(ea));K._RF.pop(),K._RF.push({},"71603KupFhNAYktx1isDcrj","ScreenNotification",void 0);(0,q.ccclass)("ScreenNotification")(function(n){i(o,n);var p=a(o);function o(){return r(this,o),p.apply(this,arguments)}return y(o,[{key:"show",value:function(n,i){var a=String(i);L.showNotificationScreen(a)}},{key:"close",value:function(){L.closeNotificationScreen()}}]),o}(ea));K._RF.pop(),K._RF.push({},"1fb3eggYuVBQo5Uuzm/Nmjh","ScreenSettings",void 0);(0,q.ccclass)("ScreenSettings")(function(n){i(o,n);var p=a(o);function o(){return r(this,o),p.apply(this,arguments)}return y(o,[{key:"show",value:function(n,i){var a=String(i);L.openScreen(O.SETTINGS_SCREEN,{message:a})}},{key:"close",value:function(){L.closeScreen(O.SETTINGS_SCREEN)}}]),o}(ea));K._RF.pop(),K._RF.push({},"ae2cdksVsdJUKhhznchh9wJ","ScreenWinning",void 0);(0,q.ccclass)("ScreenWinning")(function(n){i(o,n);var p=a(o);function o(){return r(this,o),p.apply(this,arguments)}return y(o,[{key:"show",value:function(){L.openScreen(O.WINNING_SCREEN)}},{key:"close",value:function(){L.closeScreen(O.WINNING_SCREEN)}}]),o}(ea));K._RF.pop(),K._RF.push({},"abf91gNohBK7arKnziqu2PF","AnimationDemo2",void 0);var m4,m5,m7,m6,m9,m8;(0,q.ccclass)("AnimationDemo2")(function(n){i(o,n);var p=a(o);function o(){return r(this,o),p.apply(this,arguments)}return y(o,[{key:"onLoad",value:function(){}},{key:"switchToTestScene",value:function(){M.switchScene("TestScene")}}]),o}(ea));K._RF.pop(),K._RF.push({},"56b92F9LoxNs5aCgvw+tkq6","LoadingSceneTransition",void 0);var ge,gt=q.ccclass,gn=q.requireComponent,gi=q.property;m4=gt("LoadingSceneTransition"),m5=gn([X]),m7=gi([Y]),m4(m6=m5((m8=n((m9=function(n){i(l,n);var m=a(l);function l(){var n;r(this,l);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=m.call.apply(m,[this].concat(a)),p(n,"targets",m8,d(n)),n.realTargets=[],n}return y(l,[{key:"start",value:function(){for(var n=this,i=0;i<this.targets.length;i++){var a=this.targets[i];if(a){var r=Q(a);r.setParent(this.node),r.active=!1,this.realTargets.push(r)}}ei.addPersistRootNode(this.node),ei.once(eb.EVENT_BEFORE_SCENE_LAUNCH,function(){n.playFadeOutAnimationClip()})}},{key:"playFadeOutAnimationClip",value:function(){var n=this,i=0;if(this.realTargets&&0!==this.realTargets.length){var a,r=T(this.realTargets);try{for(r.s();!(a=r.n()).done;){var p=a.value;p.active=!0;var d=p.getComponent(eo);if(d)d.clips.some(function(n){return"FadeOut"===(null==n?void 0:n.name)})?(d.play("FadeOut"),d.once(eo.EventType.FINISHED,function(){++i===n.realTargets.length&&n.node.destroy()})):(this.node.destroy(),console.warn("Not have FadeOut clip"))}}catch(n){r.e(n)}finally{r.f()}}}}]),l}(ea)).prototype,"targets",[m7],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),m6=m9))||m6);K._RF.pop(),K._RF.push({},"f3521L4Mn5I3bhxr0QZJ9y9","BackgroundMask",void 0);var ga,go,gr,gs,gl,gu,gc,gh,gp,gd,gv,gy,gf,gm,gg=q.ccclass,gb=q.requireComponent;gg("BackgroundMask")(ge=gb([ev])(ge=function(n){i(o,n);var p=a(o);function o(){return r(this,o),p.apply(this,arguments)}return y(o,[{key:"onLoad",value:function(){var n=this.getComponent(ev);n?(this.opacity=n,this.updateMaskAlpha()):console.warn("BackgroundMask: UIOpacity not found")}},{key:"updateMaskAlpha",value:function(){var n,i,a=this.opacity.opacity/255;n=a,(i=document.getElementById("app-mask"))&&(i.style.background="rgb(0 0 0 / ".concat(n,")"))}}]),o}(ea))||ge);K._RF.pop(),K._RF.push({},"cecf2nUBzhIWZw7uJgVliXz","CongratulationScreen",void 0);var gS,gC=q.ccclass,gk=q.property,gw=q.disallowMultiple,gE=q.requireComponent,gT=GameCore.Events,gR=globalThis.game.event;ga=gC("CongratulationScreen"),go=gE(W),gr=gk(Y),gs=gk(Y),gl=gk(en),gu=gk(en),gc=gk(en),ga(gh=gw(gh=go((gd=n((gp=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=g.call.apply(g,[this].concat(a)),p(n,"congratulation",gd,d(n)),p(n,"confirmation",gv,d(n)),p(n,"closeButtonComponent",gy,d(n)),p(n,"yesButtonComponent",gf,d(n)),p(n,"noButtonComponent",gm,d(n)),n.handleOpeningScreen=function(i){if(!n.screen)throw new Error("CongratulationScreen: screen not found");n.validateEventPayload(i)&&(n.closeButtonComponent.interactable=!0,n.yesButtonComponent.interactable=!0,n.noButtonComponent.interactable=!0)},n.handleOpenedScreen=function(i){n.validateEventPayload(i)&&n.open()},n}return y(u,[{key:"__preload",value:function(){this.enabled=!1,this.screen=this.getComponent(W),this.validateRequiredComponents(),this.listenScreenEvents()}},{key:"onDestroy",value:function(){this.unListenScreenEvents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"listenScreenEvents",value:function(){gR.on(gT.OPENING_SCREEN,this.handleOpeningScreen),gR.on(gT.OPENED_SCREEN,this.handleOpenedScreen)}},{key:"unListenScreenEvents",value:function(){gR.off(gT.OPENING_SCREEN,this.handleOpeningScreen),gR.off(gT.OPENED_SCREEN,this.handleOpenedScreen)}},{key:"validateEventPayload",value:function(n){return n.screenName===this.node.name}},{key:"open",value:function(){this.enabled&&(this.confirmation.active=!1,this.congratulation.active=!0)}},{key:"close",value:function(){this.closeButtonComponent.interactable=!1,this.yesButtonComponent.interactable=!1,this.noButtonComponent.interactable=!1,L.closeScreen(O.CONGRATULATION_SCREEN)}},{key:"handleStartOver",value:function(){this.confirmation.active=!0,this.congratulation.active=!1;var n=this.confirmation.getComponent(ev);n?(eF(n).set({opacity:0}).to(.2,{opacity:255},{easing:"smooth"}).start(),eF(this.confirmation).set({scale:new ep(0,0,0)}).to(.2,{scale:new ep(1,1,1)},{easing:"smooth"}).start()):console.warn("CongratulationScreen: UIOpacity not found")}},{key:"handleYesStartOver",value:function(){this.close(),this.node.scene.emit(aL.START_OVER)}},{key:"handleNoStartOver",value:function(){this.close(),this.node.scene.emit(aL.GAME_REPLAY,{level:this.screen.data.level})}},{key:"handleClickedClose",value:function(){this.close(),this.node.scene.emit(aL.GAME_REPLAY,{level:this.screen.data.level})}}]),u}(ea)).prototype,"congratulation",[gr],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gv=n(gp.prototype,"confirmation",[gs],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gy=n(gp.prototype,"closeButtonComponent",[gl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gf=n(gp.prototype,"yesButtonComponent",[gu],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gm=n(gp.prototype,"noButtonComponent",[gc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gh=gp))||gh)||gh);K._RF.pop(),K._RF.push({},"61985gSEDBMY6nVNc9Q1D6W","LoadingScreen",void 0);var gA,g_,gP,gB,gL,gO,gD,gI,gN,gG,gM,gF,gz,gx,gU,gH,gj=q.ccclass,gV=q.disallowMultiple,gW=q.requireComponent,gK=GameCore.Events,gq=globalThis.game.event;gj("LoadingScreen")(gS=gV(gS=gW(W)(gS=function(n){i(o,n);var p=a(o);function o(){var n;r(this,o);for(var i=arguments.length,a=new Array(i),d=0;d<i;d++)a[d]=arguments[d];return(n=p.call.apply(p,[this].concat(a))).handleOpeningScreen=function(i){n.validateEventPayload(i)&&(n.enabled=!0)},n.handleOpenedScreen=function(i){n.validateEventPayload(i)&&n.open()},n.handleClosingScreen=function(i){n.validateEventPayload(i)&&n.unscheduleAllCallbacks()},n.handleClosedScreen=function(i){n.validateEventPayload(i)&&(n.enabled=!1)},n.handleOnCloseScreen=function(){L.closeScreen(O.LOADING_SCREEN)},n}return y(o,[{key:"onLoad",value:function(){this.enabled=!1,this.screen=this.getComponent(W),this.validateRequiredComponents(),this.listenScreenEvents()}},{key:"onDestroy",value:function(){this.unListenScreenEvents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"listenScreenEvents",value:function(){gq.on(gK.OPENING_SCREEN,this.handleOpeningScreen),gq.on(gK.OPENED_SCREEN,this.handleOpenedScreen),gq.on(gK.CLOSING_SCREEN,this.handleClosingScreen),gq.on(gK.CLOSED_SCREEN,this.handleClosedScreen)}},{key:"unListenScreenEvents",value:function(){gq.off(gK.OPENING_SCREEN,this.handleOpeningScreen),gq.off(gK.OPENED_SCREEN,this.handleOpenedScreen),gq.off(gK.CLOSING_SCREEN,this.handleClosingScreen),gq.off(gK.CLOSED_SCREEN,this.handleClosedScreen)}},{key:"validateEventPayload",value:function(n){return n.screenName===this.node.name}},{key:"open",value:function(){var n;if(this.enabled){var i=null!==(n=this.screen.data.duration)&&void 0!==n?n:0;i>0&&this.scheduleOnce(this.handleOnCloseScreen,i)}}}]),o}(ea))||gS)||gS);K._RF.pop(),K._RF.push({},"15681ka+CZC45B7BdUhsnhF","LoseScreen",void 0);var gY,gJ,gX,gZ,gQ,g$,g0,g1,g2=q.ccclass,g3=q.property,g4=q.disallowMultiple,g5=q.requireComponent,g7=GameCore.Events,g6=globalThis.game,g9=g6.language,g8=g6.event;gA=g2("LoseScreen"),g_=g5(W),gP=g3($),gB=g3(en),gL=g3(Y),gO=g3(Y),gD=g3(en),gI=g3(en),gA(gN=g4(gN=g_((gM=n((gG=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=g.call.apply(g,[this].concat(a)),p(n,"levelText",gM,d(n)),p(n,"retryButton",gF,d(n)),p(n,"titleRibbon",gz,d(n)),p(n,"dogeHead",gx,d(n)),p(n,"retryButtonComponent",gU,d(n)),p(n,"closeButtonComponent",gH,d(n)),n.handleOpeningScreen=function(i){if(!n.screen)throw new Error("LoseScreen: screen not found");n.validateEventPayload(i)&&(n.retryButtonComponent.interactable=!0,n.closeButtonComponent.interactable=!0)},n.handleOpenedScreen=function(i){n.validateEventPayload(i)&&n.open()},n}return y(u,[{key:"__preload",value:function(){this.enabled=!1,this.screen=this.getComponent(W),this.validateRequiredComponents(),this.listenScreenEvents()}},{key:"onDestroy",value:function(){this.unListenScreenEvents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"listenScreenEvents",value:function(){g8.on(g7.OPENING_SCREEN,this.handleOpeningScreen),g8.on(g7.OPENED_SCREEN,this.handleOpenedScreen)}},{key:"unListenScreenEvents",value:function(){g8.off(g7.OPENING_SCREEN,this.handleOpeningScreen),g8.off(g7.OPENED_SCREEN,this.handleOpenedScreen)}},{key:"validateEventPayload",value:function(n){return n.screenName===this.node.name}},{key:"open",value:function(){this.setLevelText(),this.resetState(),this.runOpenAnimation()}},{key:"close",value:function(){this.closeButtonComponent.interactable=!1,this.retryButtonComponent.interactable=!1,L.closeScreen(O.LOSE_SCREEN)}},{key:"runOpenAnimation",value:function(){var n=this,i=this.createRibbonAnim(),a=this.createLevelAnim(),r=this.createDogeHeadAnim(),p=this.createRetryButtonAnim();i&&a&&r&&p?eF({}).delay(.2).call(function(){return i.start()}).delay(.2).call(function(){return a.start()}).delay(.3).call(function(){return r.start()}).delay(.2).call(function(){return p.start()}).call(function(){N.showInterstitialAdAsync({forLevel:n.screen.data.level,includeSDK:["CrazyGames"]})}).start():console.warn("LoseScreen: animations not found")}},{key:"resetState",value:function(){var n=this.retryButton.getComponent(ev),i=this.titleRibbon.getComponent(ev),a=this.levelText.getComponent(ev),r=this.dogeHead.getComponent(ev);n&&i&&a&&r?(n.opacity=0,i.opacity=0,a.opacity=0,r.opacity=0,this.dogeHead.setPosition(1e3,-19),this.retryButton.node.active=!1):console.warn("LoseScreen: UIOpacity of some component not found")}},{key:"setLevelText",value:function(){var n=this.screen.data.level,i=g9.getText("level");this.levelText.string="".concat(i," ").concat(n)}},{key:"createRibbonAnim",value:function(){var n=this.titleRibbon.getComponent(ev);return n?eF(n).set({opacity:0}).to(.3,{opacity:255},{easing:"smooth"}):null}},{key:"createLevelAnim",value:function(){var n=this.levelText.getComponent(ev);return n?eF(n).set({opacity:0}).to(.3,{opacity:255},{easing:"smooth"}):null}},{key:"createDogeHeadAnim",value:function(){var n=this.dogeHead.getComponent(ev);return n?(this.dogeHead.setPosition(0,-97),eF(n).set({opacity:0}).to(.3,{opacity:255},{easing:"smooth"})):null}},{key:"createRetryButtonAnim",value:function(){var n=this.retryButton.getComponent(ev);return n?(this.retryButton.node.active=!0,eF(n).set({opacity:0}).to(.4,{opacity:255},{easing:"smooth"})):null}},{key:"handleClickedRetryGame",value:function(){this.close(),this.replayGame()}},{key:"handleClickedClose",value:function(){this.close(),this.replayGame()}},{key:"replayGame",value:function(){this.node.scene.emit(aL.GAME_REPLAY,{level:this.screen.data.level})}}]),u}(ea)).prototype,"levelText",[gP],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gF=n(gG.prototype,"retryButton",[gB],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gz=n(gG.prototype,"titleRibbon",[gL],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gx=n(gG.prototype,"dogeHead",[gO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gU=n(gG.prototype,"retryButtonComponent",[gD],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gH=n(gG.prototype,"closeButtonComponent",[gI],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gN=gG))||gN)||gN);K._RF.pop(),K._RF.push({},"6460akNFfhP9pDOT2Z0+s2R","NotificationScreen",void 0);var be,bt,bn,bi,ba,bo,br,bs,bl,bu,bc,bh,bp,bd,bv,by,bf,bm,bg,bb,bS=q.ccclass,bC=q.disallowMultiple,bk=q.requireComponent,bw=q.property,bE=GameCore,bT=bE.Events,bR=bE.Utils,bA=globalThis.game.event;gY=bS("NotificationScreen"),gJ=bk(W),gX=bw($),gZ=bw(en),gY(gQ=bC(gQ=gJ((g0=n((g$=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=g.call.apply(g,[this].concat(a)),p(n,"message",g0,d(n)),p(n,"touchZone",g1,d(n)),n.enableCloseOnTouch=!0,n.handleOpeningScreen=function(i){n.validateEventPayload(i)&&n.updateScreenData(i)},n.handleClosingScreen=function(i){n.validateEventPayload(i)&&n.unscheduleAllCallbacks()},n}return y(u,[{key:"__preload",value:function(){this.listenScreenEvents()}},{key:"onDestroy",value:function(){this.unListenScreenEvents()}},{key:"onLoad",value:function(){this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"listenScreenEvents",value:function(){bA.on(bT.OPENING_SCREEN,this.handleOpeningScreen),bA.on(bT.CLOSING_SCREEN,this.handleClosingScreen)}},{key:"unListenScreenEvents",value:function(){bA.off(bT.OPENING_SCREEN,this.handleOpeningScreen),bA.off(bT.CLOSING_SCREEN,this.handleClosingScreen)}},{key:"validateEventPayload",value:function(n){return n.screenName===this.node.name}},{key:"updateScreenData",value:function(n){var i=n.screenData;bR.Valid.isObject(i)?(i.message&&(this.message.string=i.message),i.duration&&i.duration>0&&this.scheduleOnce(function(){L.closeScreen(O.NOTIFICATION_SCREEN)},i.duration),!1===i.enableCloseOnTouch?this.enableCloseOnTouch=!1:this.enableCloseOnTouch=!0):console.warn("NotificationScreen: screenData not found")}},{key:"handleClickedClose",value:function(){this.unscheduleAllCallbacks(),L.closeScreen(O.NOTIFICATION_SCREEN)}},{key:"closeOnTouch",value:function(){this.enableCloseOnTouch&&this.handleClickedClose()}}]),u}(ea)).prototype,"message",[gX],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g1=n(g$.prototype,"touchZone",[gZ],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gQ=g$))||gQ)||gQ);K._RF.pop(),K._RF.push({},"61932YLC/5CFrE0eD0ez8Zg","SettingsScreen",void 0);var b_,bP,bB,bL,bO,bD,bI,bN,bG,bM,bF,bz,bx,bU,bH,bj,bV,bW,bK,bq,bY,bJ,bX=q.ccclass,bZ=q.property,bQ=q.requireComponent,b$=GameCore,b0=b$.Events,b1=b$.Utils,b2=globalThis.game,b3=b2.player,b4=b2.event;be=bX("SettingsScreen"),bt=bQ(W),bn=bZ(Y),bi=bZ(Y),ba=bZ(Y),bo=bZ(n5),br=bZ(n5),bs=bZ(n5),bl=bZ(en),bu=bZ(en),be(bc=bt((bp=n((bh=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=g.call.apply(g,[this].concat(a)),p(n,"musicSetting",bp,d(n)),p(n,"soundSetting",bd,d(n)),p(n,"vibrateSetting",bv,d(n)),p(n,"musicSwitch",by,d(n)),p(n,"soundSwitch",bf,d(n)),p(n,"vibrateSwitch",bm,d(n)),p(n,"closeButtonComponent",bg,d(n)),p(n,"resumeButtonComponent",bb,d(n)),n.triggerSequence="",n.handleOpeningScreen=function(i){n.validateEventPayload(i)&&(n.closeButtonComponent.interactable=!0,n.resumeButtonComponent.interactable=!0,n.updateStatus())},n.handleResetSequence=function(){n.triggerSequence=""},n.handleTriggerUnlockKey=function(i){var a=i.code,r=ij.UNLOCK_SEQUENCE;"number"==typeof a&&-1!==r.indexOf(a.toString())&&(n.triggerSequence+=a.toString(),console.log("SettingsScreen: handleTriggerUnlockKey",a,n.triggerSequence,n.triggerSequence===r),n.triggerSequence===r&&(n.node.scene.emit(ij.Events.UNLOCK_DEV_TOOLS),n.node.off(ij.Events.TRIGGER_UNLOCK_KEY)))},n.updateVibrateButton=function(){var i=n.vibrateSetting.getComponentInChildren(en),a=n.vibrateSetting.getComponentInChildren(n5),r=n.vibrateSetting.getComponentInChildren(t5);if(i&&a&&r){if(b1.Device.isMobile()){var p,d=null!==(p=b3.getPlayerSetting("vibrate"))&&void 0!==p&&p;a.setEnabled(d)}else i.interactable=!1,a.setEnabled(!1),r.changeState(!1)}else console.warn("SettingsScreen: vibrate button missing components")},n}return y(u,[{key:"onLoad",value:function(){this.enabled=!1,this.screen=this.getComponent(W),this.validateRequiredComponents(),this.listenScreenEvents(),this.listenUnlockDevTools(),this.handleGameDistributionUIChanges()}},{key:"onDestroy",value:function(){this.unListenScreenEvents(),this.unListenUnlockDevTools()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"handleGameDistributionUIChanges",value:function(){if("GameDistributions"===GameSDK.getSDKName()){this.vibrateSetting.active=!1;var n=this.musicSetting.position,i=n.x,a=n.y,r=n.z;this.musicSetting.setPosition(new ep(i,a-50,r));var p=this.soundSetting.position,d=p.x,y=p.y,m=p.z;this.soundSetting.setPosition(new ep(d,y-50,m))}}},{key:"listenScreenEvents",value:function(){b4.on(b0.OPENING_SCREEN,this.handleOpeningScreen)}},{key:"unListenScreenEvents",value:function(){b4.off(b0.OPENING_SCREEN,this.handleOpeningScreen)}},{key:"validateEventPayload",value:function(n){return n.screenName===this.node.name}},{key:"listenUnlockDevTools",value:function(){this.node.off(ij.Events.TRIGGER_UNLOCK_KEY),this.node.on(ij.Events.TRIGGER_RESET_SEQUENCE,this.handleResetSequence),this.node.on(ij.Events.TRIGGER_UNLOCK_KEY,this.handleTriggerUnlockKey)}},{key:"unListenUnlockDevTools",value:function(){this.node.off(ij.Events.TRIGGER_RESET_SEQUENCE,this.handleResetSequence),this.node.off(ij.Events.TRIGGER_UNLOCK_KEY,this.handleTriggerUnlockKey)}},{key:"open",value:function(){this.updateStatus(),this.runPopUpAnimation(),this.node.emit(ij.Events.TRIGGER_RESET_SEQUENCE)}},{key:"close",value:function(){this.closeButtonComponent.interactable=!1,this.resumeButtonComponent.interactable=!1,this.node.emit(ij.Events.TRIGGER_RESET_SEQUENCE),L.closeScreen(O.SETTINGS_SCREEN)}},{key:"updateStatus",value:function(){var n,i,a,r={music:null!==(n=b3.getPlayerSetting("music"))&&void 0!==n&&n,sound:null!==(i=b3.getPlayerSetting("sound"))&&void 0!==i&&i,vibrate:null!==(a=b3.getPlayerSetting("vibrate"))&&void 0!==a&&a};this.musicSwitch?this.soundSwitch?(this.musicSwitch.setEnabled(r.music),this.soundSwitch.setEnabled(r.sound),"GameDistributions"!==GameSDK.getSDKName()&&this.scheduleOnce(this.updateVibrateButton,.1)):console.warn("SettingsScreen: soundSwitch not found"):console.warn("SettingsScreen: musicSwitch not found")}},{key:"runPopUpAnimation",value:function(){this.screen.container||console.warn("SettingsScreen: screen not found")}},{key:"switchMusicButton",value:function(){if(this.musicSwitch){var n=this.musicSwitch.switch();b3.setSetting("music",n),this.node.emit(ij.Events.TRIGGER_UNLOCK_KEY,{code:n?1:0}),n?k.playMusic():k.pauseMusic()}else console.warn("SettingsScreen: musicSwitch not found")}},{key:"switchSoundButton",value:function(){if(this.soundSwitch){var n=this.soundSwitch.switch();b3.setSetting("sound",n),this.node.emit(ij.Events.TRIGGER_UNLOCK_KEY,{code:n?3:2})}else console.warn("SettingsScreen: soundSwitch not found")}},{key:"switchVibrateButton",value:function(){if(this.vibrateSwitch){var n=this.vibrateSwitch.switch();b3.setSetting("vibrate",n)}else console.warn("SettingsScreen: vibrateSwitch not found")}},{key:"handleClickedResume",value:function(){this.resumeGame()}},{key:"handleClickedClose",value:function(){this.resumeGame()}},{key:"resumeGame",value:function(){this.close(),this.node.scene.emit(aL.GAME_RESUME)}}]),u}(ea)).prototype,"musicSetting",[bn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bd=n(bh.prototype,"soundSetting",[bi],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bv=n(bh.prototype,"vibrateSetting",[ba],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),by=n(bh.prototype,"musicSwitch",[bo],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bf=n(bh.prototype,"soundSwitch",[br],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bm=n(bh.prototype,"vibrateSwitch",[bs],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bg=n(bh.prototype,"closeButtonComponent",[bl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bb=n(bh.prototype,"resumeButtonComponent",[bu],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bc=bh))||bc);K._RF.pop(),K._RF.push({},"35c09YGmdFA4pHOJFDg1tw5","WinningScreen",void 0);var b5=q.ccclass,b7=q.property,b6=q.disallowMultiple,b9=q.requireComponent,b8=GameCore.Events,Se=globalThis.game,St=Se.player,Sn=Se.event,Si=Se.language;b_=b5("WinningScreen"),bP=b9(W),bB=b7(el),bL=b7(en),bO=b7(en),bD=b7(Y),bI=b7(Y),bN=b7($),bG=b7(en),bM=b7(en),bF=b7(en),b_(bz=b6(bz=bP((bU=n((bx=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=g.call.apply(g,[this].concat(a)),p(n,"titleRibbon",bU,d(n)),p(n,"nextLevelButton",bH,d(n)),p(n,"retryLevelButton",bj,d(n)),p(n,"confettiGroup",bV,d(n)),p(n,"dogeHead",bW,d(n)),p(n,"levelText",bK,d(n)),p(n,"closeButtonComponent",bq,d(n)),p(n,"nextLevelButtonComponent",bY,d(n)),p(n,"retryLevelButtonComponent",bJ,d(n)),n.starsCollected=3,n.handleOpeningScreen=function(i){if(!n.screen)throw new Error("WinningScreen: screen not found");n.validateEventPayload(i)&&(n.closeButtonComponent.interactable=!0,n.retryLevelButtonComponent.interactable=!0,n.nextLevelButtonComponent.interactable=!0)},n.handleOpenedScreen=function(i){n.validateEventPayload(i)&&n.open()},n.handleClosingScreen=function(i){n.validateEventPayload(i)&&n.unscheduleAllCallbacks()},n}return y(u,[{key:"__preload",value:function(){this.enabled=!1,this.screen=this.getComponent(W),this.validateRequiredComponents(),this.listenScreenEvents()}},{key:"onDestroy",value:function(){this.unListenScreenEvents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"listenScreenEvents",value:function(){Sn.on(b8.OPENING_SCREEN,this.handleOpeningScreen),Sn.on(b8.OPENED_SCREEN,this.handleOpenedScreen),Sn.on(b8.CLOSING_SCREEN,this.handleClosingScreen)}},{key:"unListenScreenEvents",value:function(){Sn.off(b8.OPENING_SCREEN,this.handleOpeningScreen),Sn.off(b8.OPENED_SCREEN,this.handleOpenedScreen),Sn.off(b8.CLOSING_SCREEN,this.handleClosingScreen)}},{key:"validateEventPayload",value:function(n){return n.screenName===this.node.name}},{key:"start",value:function(){var n=this;this.dogeHead.translate(new ep(-1e3,0)),this.scheduleOnce(function(){n.dogeHead.translate(new ep(1e3,0))},.1)}},{key:"open",value:function(){var n=this;this.nextLevelButton.node.active=!1,this.retryLevelButton.node.active=!1,this.closeButtonComponent.interactable=!1,this.updateLevel(),this.updateStars(),this.runRibbonAnimation();var i=this.runStarsAnimation();this.runConfetti(i),this.scheduleOnce(I(function(){var i,a;return _ts_generator(this,function(r){switch(r.label){case 0:return[4,N.showInterstitialAdAsync({forLevel:n.screen.data.level,excludeSDK:["CrazyGames"]})];case 1:r.sent(),n.nextLevelButton.node.active=!0,n.retryLevelButton.node.active=!0,n.closeButtonComponent.interactable=!0;i=n.nextLevelButton.getComponent(ev);eF(i).set({opacity:0}).to(.4,{opacity:255},{easing:"smooth"}).start();a=n.retryLevelButton.getComponent(ev);eF(a).set({opacity:0}).delay(.5).to(.4,{opacity:255},{easing:"smooth"}).start();return[2]}})}),i),k.playSound(R.HAND_CLAP)}},{key:"close",value:function(){this.closeButtonComponent.interactable=!1,this.retryLevelButtonComponent.interactable=!1,this.nextLevelButtonComponent.interactable=!1,L.closeScreen(O.WINNING_SCREEN)}},{key:"showCongratulationScreen",value:function(){L.openScreen(O.CONGRATULATION_SCREEN,{level:this.screen.data.level})}},{key:"handleClickedNextLevel",value:function(){var n=St.getGameData();if(n){var i=this.screen.data.level;if(i)i>=n.totalLevel?this.showCongratulationScreen():this.node.scene.emit(aL.NEXT_LEVEL,{level:i}),this.close();else console.warn("WinningScreen: level not found")}else console.warn("WinningScreen: gameData not found")}},{key:"handleClickedRetry",value:function(){this.close(),this.node.scene.emit(aL.GAME_REPLAY,{level:this.screen.data.level})}},{key:"handleClickedClose",value:function(){this.close();var n=this.screen.data.level;this.node.scene.emit(aL.NEXT_LEVEL,{level:n})}},{key:"updateStars",value:function(){var n;this.starsCollected=null!==(n=this.screen.data.stars)&&void 0!==n?n:0}},{key:"updateLevel",value:function(){var n=this.screen.data.level,i=Si.getText("level");this.levelText.string="".concat(i," ").concat(n)}},{key:"runRibbonAnimation",value:function(){this.titleRibbon.fillRange=0,eF(this.titleRibbon).to(.5,{fillRange:1},{easing:"backInOut"}).start()}},{key:"runStarsAnimation",value:function(){var n=this,i=eU("Container/Stars/RightStar",this.node),a=eU("Container/Stars/LeftStar",this.node),r=eU("Container/Stars/MidStar",this.node),p=[a,r,i];if(!i||!a||!r)return console.warn("WinningScreen: stars not found"),0;for(var d=0,y=p;d<y.length;d++){var m=y[d];if(m){var g=m.getChildByName("Star");g?g.active=!1:console.warn("WinningScreen: starComponent not found")}}this.animateStars(p);for(var b,S=1.32,h=function(){var i=p[C];if(!i)return console.warn("WinningScreen: stars not found"),{v:0};var a=i.getChildByName("Star");if(!a)return console.warn("WinningScreen: starComponent not found"),{v:0};n.scheduleOnce(function(){a.active=!0,k.playSound(R.STAR_RAISE)},S),eF(a).set({scale:new ep(1.7,1.7,1)}).delay(S).to(.35,{scale:new ep(1,1,1)},{easing:"backOut"}).start(),S+=.3},C=0;C<this.starsCollected;C++)if(b=h())return b.v;return S}},{key:"animateStars",value:function(n){for(var i=0;i<n.length;i++){var a=n[i];if(!a)return void console.warn("WinningScreen: starEmpty not found");var r=new ep(0,0,1),p=new ep(1,1,1);1===i&&p.set(1.2,1.2,1),eF(a).set({scale:r}).delay(.7).to(.4,{scale:p},{easing:"backOut"}).start()}}},{key:"runConfetti",value:function(n){this.stopConfetti();var i=this.confettiGroup.getComponentsInChildren(te);this.scheduleOnce(function(){var n,a=T(i);try{for(a.s();!(n=a.n()).done;)n.value.resetSystem()}catch(n){a.e(n)}finally{a.f()}},n)}},{key:"stopConfetti",value:function(){var n,i=this.confettiGroup.getComponentsInChildren(te),a=T(i);try{for(a.s();!(n=a.n()).done;)n.value.stopSystem()}catch(n){a.e(n)}finally{a.f()}}}]),u}(ea)).prototype,"titleRibbon",[bB],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bH=n(bx.prototype,"nextLevelButton",[bL],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bj=n(bx.prototype,"retryLevelButton",[bO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bV=n(bx.prototype,"confettiGroup",[bD],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bW=n(bx.prototype,"dogeHead",[bI],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bK=n(bx.prototype,"levelText",[bN],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bq=n(bx.prototype,"closeButtonComponent",[bG],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bY=n(bx.prototype,"nextLevelButtonComponent",[bM],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bJ=n(bx.prototype,"retryLevelButtonComponent",[bF],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bz=bx))||bz)||bz);K._RF.pop()}}});(function(n){n("virtual:///prerequisite-imports/main","chunks:///main.js")})(function(n,i){System.register(n,[i],function(n,i){return{setters:[function(i){var a={};for(var r in i)if("default"!==r&&"__esModule"!==r)a[r]=i[r];n(a)}],execute:function(){}}})});