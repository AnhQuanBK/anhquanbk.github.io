function _instanceof(left,right){return null!=right&&"u">typeof Symbol&&right[Symbol.hasInstance]?!!right[Symbol.hasInstance](left):left instanceof right}function _ts_generator(thisArg,body){var f,y,t,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]},g=Object.create(("function"==typeof Iterator?Iterator:Object).prototype),d=Object.defineProperty;return d(g,"next",{value:verb(0)}),d(g,"throw",{value:verb(1)}),d(g,"return",{value:verb(2)}),"function"==typeof Symbol&&d(g,Symbol.iterator,{value:function(){return this}}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw TypeError("Generator is already executing.");for(;g&&(g=0,op[0]&&(_=0)),_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}}System.register("chunks:///systems.js",["./TournamentUtils-9f4fc570.js","cc"],function(){var Y,R,p,V,_,L,q,Fe,Qt,jt,K,X,x,Zt,Jt,$t,$,l,en,ct,tn,nn,He,an,ut,rn,on,ve,Ye,Ve,ee,lt,dt,sn,cn,un,m,y,ln,dn,hn,de,F,fn,mn,T,ge,S,Te,W,ye,pn,k,ht,vn,he,gn,Ie,yn,En,ft,Sn,wn,mt,pt,Q,j,An;return{setters:[function(h){Y=h.h,R=h.e,p=h.a,V=h.t,_=h.d,L=h.G,q=h.H,Fe=h.i,Qt=h.p,jt=h.r,K=h.C,X=h.n,x=h.g,Zt=h.M,Jt=h.P,$t=h.I,$=h.v,l=h.k,en=h.J,ct=h.L,tn=h.K,nn=h.s,He=h.u,an=h.w,ut=h.R,rn=h.N,on=h.T,ve=h.B,Ye=h.x,Ve=h.q,ee=h.z,lt=h.F,dt=h.O,sn=h.Q,cn=h.b,un=h.c},function(h){m=h.cclegacy,y=h.game,ln=h.settings,dn=h.Settings,hn=h.View,de=h.AssetManager,F=h.sys,fn=h.input,mn=h.Input,T=h.DynamicAtlasManager,ge=h.macro,S=h.director,Te=h.view,W=h.ResolutionPolicy,ye=h.Size,pn=h.screen,k=h.Director,ht=h.Sprite,vn=h.UITransform,he=h.SpriteFrame,gn=h.Rect,Ie=h.assetManager,yn=h.ImageAsset,En=h.UIOpacity,ft=h.Label,Sn=h.Prefab,wn=h.instantiate,mt=h.Game,pt=h._decorator,Q=h.rendering,j=h.gfx,An=h.Component}],execute:function execute(){var h,bn,_n,Rn={text:{"core.nameless":"Nameless","game.resume":"Resume","game.restart":"Restart","game.cancel":"Cancel","game.challenge":"Challenge\nFriends","game.next":"NEXT","game.completed":"COMPLETED","game.tryAgain":"Try again","game.retry":"RETRY","game.startOverQ":"Start Over?","game.startOverMsg":"Start over? You'll lose your current progress and begin from the start. Are you sure you want to restart?","game.startOver":"START OVER","game.paused":"Paused","game.end":"End","game.quit":"Quit","game.join":"Join","game.joinLeaderboard":"Join Leaderboard","game.continue":"Continue","game.letsPlay":"Let's Play","game.logIn":"Log in","game.create":"Create","game.quitLevelShortMsg":"Quit Level?","game.quitSingleMsg":"Quit now? You're so close to completing this level!","game.quitTourMsg":"Quit now? You're just a few levels away from ranking up!","game.level":"Level","game.levelX":"Level %{0}","game.hardLevel":"Hard Level","game.result":"Your Result","game.nextLevel":"Next Level","game.win":"You Win","game.lose":"You Lose","game.draw":"Draw","game.replay":"Replay","game.boom":"Boom!","game.timesUp":"Time's Up!","game.bombDesc":"The bomb exploded!","game.timesUpDesc":"Restart or add 2 minutes?","game.daily":"Daily","game.weekly":"Weekly","game.endsSoon":"Ends Soon","game.endsIn":"Ends %{0}","game.player":"1 player","game.nPlayers":"%{0} players","game.pTour":"%{0}'s Tournament","game.combo":"Combo","game.tourLbUpdated":"Duel!","settings.level":"Level","settings.settings":"Settings","settings.music":"Music","settings.sound":"Sound","settings.vibrate":"Vibrate","settings.on":"ON","settings.off":"OFF","settings.notification":"Notification","settings.report":"Report","settings.share":"Share","settings.invite":"Invite Friends","settings.feedback":"Feedback","settings.createShortcut":"Create\nShortcut","settings.or":"OR","settings.customMode":"Custom\nMode","custom.customLevel":"Custom Level","custom.time":"Time","custom.difficulty":"Difficulty","custom.easy":"Easy","custom.normal":"Normal","custom.hard":"Hard","custom.extreme":"Extreme","custom.bombs":"Bombs","custom.ads":"Extra ads duration","custom.score":"Score increase:","custom.play":"Play","ads.cancelled":"Sorry, No Rewards!\nYou have cancelled the ad!","ads.loading":"Loading ads...","ads.notReady":"No ads to display!","ads.adAfterT":"AD starting in %{0}...","ads.levelAfterT":"Next level in %{0}...","ads.rewardNotice":"Watch a short ad to receive\nthese rewards:","ads.skip":"Skip","ads.daily":"Daily Rewards","ads.claim":"Claim","ads.claimX2":"Claim x2","ads.claimNow":"Claim Now!","ads.await":"Looking for rewards...","ads.open":"Open","ads.coins":"Get Coins","ads.getNow":"Get Now","ads.freeMinutes":"Get %{0} FREE minutes","ads.interNotice.hangTight":"Short ad break, hang tight!","ads.interNotice.backInSec":"Back to the game in just a sec!","ads.interNotice.quickAd":"Quick ad, then more fun!","status.loading":"Loading","status.congrats":"Congratulations","status.allLevels":"You have passed all levels.","status.later":"Please come back later,\nwe will update soon!","status.confirm":"CONFIRMATION","status.confirmReset":"ARE YOU SURE TO START OVER?","status.resetInfo":"You will play the game again\nfrom the beginning, at level 1.","status.no":"NO","status.yes":"YES","status.first":"1st","status.second":"2nd","status.third":"3rd","status.nth":"%{0}th","status.tap":"Tap to continue","status.waitingX":"Waiting%{0}","status.lbNotAvail":"Leaderboard is empty.","status.tourNotAvail":"No tournaments available.","pages.shop":"Shop","pages.collections":"Collections","pages.home":"Home","pages.leaderboard":"Leaderboard","pages.tournament":"Tournament","guide.step1":"Tap to connect","guide.step2":"Connect similar tiles with less than 2 turns","guide.step3":"Connect similar tiles with less than 2 turns","guide.step4":"More than 2 turns are NOT allowed","guide.step5":"There's obstacle between the tiles","guide.timer":"Remove all tiles before\nthe time end","guide.combo":"Remove tiles continuously\nto increase combo!","guide.hint":"Tap to reveal a connectable pair","guide.thunder":"Tap to remove 2 pairs","guide.storm":"Tap to rearrange the tiles","guide.pliers":"Tap to remove bomb","guide.custom":"Custom mode unlocked.\n Press this button to set your own difficulty","interMsg.reviveAd":"Watch an ad to revive yourself\nKeep playing and don't give up!","interMsg.doubleAd":"Watching an ad doubles your rewards!","interMsg.ranked":"Test your skills\nin ranked tournaments","interMsg.friendChallenge":"Challenge your friend\nSee who can score higher!","interMsg.bragChallenge":"Send a challenge to your friend\nClaim bragging rights!","interMsg.clearTiles":"Clear all tiles to\nwin the level!","interMsg.beatClock":"Beat the clock before\ntime runs out!","interMsg.clearBombs":"Clear bombs before\nthey explode","interMsg.seasonPack":"A season pack unlock\nnew tile sets!","interMsg.collectStars":"The more stars you collect\nThe more coins you'll be rewarded!","interMsg.competeInLb":"Compete globally or with friends\nRise to the top in tournaments!","interMsg.competeWithFriends":"You can challenge a friend\nTest each other's reflexes!","interMsg.thunder":"The Thunder power-up\nblasts tiles away","interMsg.hint":"A Hint power-up reveals\nthe next pair","interMsg.pliers":"Pliers can remove\nany bomb instantly","interMsg.tornado":"The Tornado power-up\nshuffles the board!","interMsg.coins":"Earn coins by completing levels\nWin tournaments for even more!","interMsg.seasonTiles":"A new tile set is unlocked\nevery season packs","interMsg.dailyLogin":"Log in daily to claim\nbetter rewards!","interMsg.levelUp":"Level up and earn coins\nwith each victory!","interMsg.seasonRewards":"Each season pack offers\nnew tiles!","error.tryLater":"Sorry, please try again later","error.soon":"Coming Soon","error.noFriendsLb":"Unable to load friends leaderboard. Please try again later.","error.noWorldLb":"Unable to load world leaderboard. Please try again later.","error.createTourFail":"Unknown error. Failed to Create Tournament","error.tourExists":"You already have a tournament","error.challengeFail":"Sorry, you cannot replay\nat this time.","error.rewardFail":"Unable to validate rewards. Please try again later...","error.tourEnded":"Tournament has ended","error.tourJoinFail":"Sorry, you cannot join\nat this time.","error.noAd":"No ads to display.","error.ratingNoAuth":"You need to log in to rate the game.","error.ratingGameRated":"You have already rated the game.","error.ratingFail":"Failed to rate the game.","error.shortcutFail":"Failed to create shortcut.","error.login":"Failed to log in.","error.joinLb":"Failed to join the leaderboard.","reward.day":"Day","reward.dayX":"Day %{0}","reward.starChestTitle":"Star Chest","reward.starChestAvailable":"Congrats, you have enough stars to open the chest!","reward.starChestUnavailable":"Win more stars to open!","item.hint":"Hint","item.thunder":"Thunder","item.storm":"Storm","item.pliers":"Pliers","item.hintDesc":"Shows a pair of tiles\nthat can be connected.","item.thunderDesc":"Remove 2 pair of tiles\non the game field.","item.stormDesc":"Randomly rearranges the \ntiles on the game field.","item.pliersDesc":"Removes a random bomb\nfrom the game field.","theme.newTiles":"New tiles","theme.summer":"Summer Levels","theme.autumn":"Autumn Levels","theme.winter":"Winter Levels","theme.springFestival":"Spring Festival Levels","theme.treePlantingFestival":"Tree Planting Festival Levels","theme.blueSeaFestival":"Blue Sea Festival Levels","theme.musicFestival":"Music Festival Levels","theme.harvestFestival":"Harvest Festival Levels","theme.foodFestival":"Food Festival Levels","theme.snowFestival":"Snow Festival Levels","theme.lightFestival":"Light Festival Levels","theme.peaceFestival":"Peace Festival Levels","theme.flowerFestival":"Flower Festival Levels","theme.streetFestival":"Street Festival Levels","theme.colorGarden":"Color Garden Levels","theme.colorFestival":"Color Festival Levels","theme.natureSummer":"Nature Summer Levels","theme.snowMountain":"Snow Mountain Levels","theme.iceFestival":"Ice Festival Levels","theme.greenGrassFestival":"Green Grass Festival Levels","theme.communityFestival":"Community Festival Levels","theme.waterFestival":"Water Festival Levels","theme.animalFestival":"Animal Festival Levels","theme.lostFestival":"Lost Festival Levels","theme.halloweenFestival":"Halloween Festival Levels","theme.snowMusicFestival":"Snow Music Festival Levels","theme.christmas":"Christmas Levels","theme.springFlowerFestival":"Spring Flower Festival Levels","theme.tetHoliday":"Tet Holiday Levels","theme.seaFestival":"Sea Festival Levels","theme.fireworkFestival":"Firework Festival Levels","theme.halloweenHorror":"Halloween Horror Levels","theme.midAutumn":"Mid Autumn Levels","theme.christmasSweet":"Christmas Sweet Levels","theme.newYearCountdown":"New Year Countdown Levels","theme.happyNewYear":"Happy New Year Levels","share.canYouDoBetter":"Can you do better?","dashboard.unlockLevel":"Unlock lv.%{0}"},texture:{draw:"locales/en/scenes/result-scene/resources/text_draw",lose:"locales/en/scenes/result-scene/resources/text_lose",victory:"locales/en/scenes/result-scene/resources/text_victory",waiting:"locales/en/scenes/result-scene/resources/text_waiting",excellent:"locales/en/scenes/game-scene/resources/effects/text-effect/excellent",good:"locales/en/scenes/game-scene/resources/effects/text-effect/good",great:"locales/en/scenes/game-scene/resources/effects/text-effect/great",wellDone:"locales/en/screens/level-complete-screen/resources/well_done",freeRewards:"locales/en/screens/get-rewards-screen/resources/free_rewards"}};m._RF.push({},"0b4bc6YT6ZGg4lnXfh/zL6J","AdsManager",void 0);var vt=Ludex,Ee=vt.Events,gt=vt.Configs.Ads,Cn=gt.Enabled,za=gt.PreloadAds,Dn=gt.ShowAdOnLoad,xn=vt.Utils,yt=xn.Time,Ba=xn.Decorator,Se=codex.event,Ha=(h=Ba.tryCatch(),_n=Y((bn=function(){function o(){var e=this;_(this,o),this.m=function(){Se.on(Ee.AD_CLOSED,e.wt),Se.catchUp(Ee.GAME_READY,e.At),Se.catchUp(Ee.GAME_SDK_READY,e.processShowFirstInterstitialAd),Se.catchUp(Ee.CONTEXT_DATA_PROCESSED,e.bt),Se.catchUp(Ee.CONTEXT_DATA_PROCESSED,function(){y.on(L.LAYOUT_CHANGED,e._t)})},this.wt=function(){Se.emit(Ee.REQUEST_RESIZE_GAME)},this.bt=p(function(){return _ts_generator(this,function(_state){switch(_state.label){case 0:if(!Cn)return[3,3];if(!GameSDK.isGameSDK("FacebookInstant"))return[3,2];return[4,yt.sleepAsync(5e3)];case 1:_state.sent(),_state.label=2;case 2:V.updateBannerAdsByLayout(q.getCurrentLayout()),V.refreshBannerAdVisibility(),_state.label=3;case 3:return[2]}})}),this.At=p(function(){return _ts_generator(this,function(_state){switch(_state.label){case 0:if(!za)return[3,2];return[4,yt.sleepAsync(3e3)];case 1:_state.sent(),V.preloadAds(),_state.label=2;case 2:return[2]}})}),Fe(this,"processShowFirstInterstitialAd",_n,this),this._t=function(){V.updateBannerAdsByLayout(q.getCurrentLayout()),V.refreshBannerAdVisibility()}}return R(o,[{key:"init",value:function value(){this.m()}}]),o}()).prototype,"processShowFirstInterstitialAd",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return p(function(){var o,e,t;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(!Cn||(o=Dn.Enabled,e=Dn.DelaySeconds,!o))return[3,4];if(!(e>0))return[3,2];return[4,yt.sleepAsync(1e3*e)];case 1:_state.sent(),_state.label=2;case 2:return(t=GameSDK.isGameSDK("Yandex"))&&y.pause(),[4,V.showInterstitialAdAsync({forceLoad:!0,contextType:"preroll"})];case 3:_state.sent(),t&&y.resume(),_state.label=4;case 4:return[2]}})})}}),bn);m._RF.pop(),m._RF.push({},"b4ad5mMokdAa6EVNGzNedpF","EngineManager",void 0);var Ln,Fn,Tn,Et=Ludex,St=Et.Events,In=Et.Configs.GameEngine,qe=In.DynamicAtlas,Mn=In.PreferredFPS,Pn=Et.Utils,Ya=Pn.Valid,Nn=Pn.Device,wt=codex.event,Va=function(){function o(){var e=this;_(this,o),this.Rt=function(){ln.overrideSettings(dn.Category.ENGINE,"debug",Ya.isDebugger()),hn.instance.resizeWithBrowserSize(!1),Nn.isDesktop()?y.frameRate=Mn.Desktop:y.frameRate=Mn.Mobile},this.Ct=function(){de.instance.cacheAsset=!0},this.Dt=p(function(){var t,n,a;return _ts_generator(this,function(_state){switch(_state.label){case 0:return t=de.instance.downloader,e.xt(),t.maxConcurrency=24,t.maxRequestsPerFrame=24,[4,e.Lt()];case 1:return n=_state.sent(),F.hasFeature(F.Feature.WEBP)&&(a=F.hasFeature,F.hasFeature=function(r){return r===F.Feature.WEBP?n:a(r)}),[2]}})}),this.xt=function(){de.instance.allowImageBitmap=!0;var t=!0;GameSDK.isGameSDK("YoutubePlayables")&&(t=!1),de.instance.allowImageBitmap=t},this.Lt=function(){return new Promise(function(t){var n=new Image;n.onload=function(){return t(!0)},n.onerror=function(){return t(!1)},n.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="})},this.Ft=p(function(){return _ts_generator(this,function(_state){return de.instance.transformPipeline.remove(1),[2]})}),this.Tt=function(){fn.on(mn.EventType.TOUCH_START,e.Pe),wt.catchUp(St.GAME_READY,function(){wt.on(St.VISIBILITY_HIDDEN,e.It),wt.on(St.VISIBILITY_VISIBLE,e.Pe)})},this.It=p(function(){return _ts_generator(this,function(_state){return y.isPaused()||y.pause(),[2]})}),this.Pe=p(function(){return _ts_generator(this,function(_state){return y.isPaused()&&(y.resume(),e.Mt()),[2]})}),this.Pt=function(){F.isBrowser?e.Nt():F.isNative?e.kt():e.Ot()},this.Nt=function(){switch(F.os){case F.OS.IOS:e.Ne();break;case F.OS.ANDROID:e.ke();break;case F.OS.OSX:case F.OS.LINUX:case F.OS.WINDOWS:e.Ut();break;default:e.Oe()}},this.kt=function(){switch(F.platform){case F.Platform.ANDROID:e.ke();break;case F.Platform.IOS:e.Ne();break;default:e.Oe()}},this.ce=function(t){var n=t.Enabled,a=t.MaxAtlasCount,r=t.MaxAtlasSize,i=t.MaxFrameSize,s=T.instance;ge.CLEANUP_IMAGE_CACHE=!n,s.enabled=n,s.textureSize=r,s.maxFrameSize=i,s.maxAtlasCount=a,s.textureBleeding=qe.OptimizeAtlas.TextureBleeding;var c=e.Gt()||r,u=Math.min(r,c);s.textureSize=u,i>u&&(s.maxFrameSize=u)},this.Gt=function(){if(!S.root)return -1;var t=S.root.device.capabilities.maxTextureSize,n=Math.min(Nn.maxTextureSize(),t);if(n>8192)return 7168;var a=T.instance.maxFrameSize,r=n-1024;return r<=(void 0===a?0:a)||r<=0?-1:r},this.Ne=function(){var t=qe.IOS;e.ce(t)},this.ke=function(){var t=qe.Android;e.ce(t)},this.Ut=function(){var t=qe.Desktop;e.ce(t)},this.Oe=function(){e.ce({Enabled:!0,MaxAtlasCount:1,MaxAtlasSize:4096,MaxFrameSize:1024})},this.Ot=function(){ge.CLEANUP_IMAGE_CACHE=!0,T.instance.enabled=!1},this.zt=function(){ge.BATCHER2D_MEM_INCREMENT=512,ge.MAX_LABEL_CANVAS_POOL_SIZE=125},this.Mt=function(){if(GameSDK.isGameSDK("YoutubePlayables")){var t=GameSDK.extra.isAudioEnabled(),n=V.isAdInProgress();t&&!n&&Qt.playMusic(jt.BG_MUSIC)}}}return R(o,[{key:"init",value:function value(){this.Rt(),this.Ct(),this.zt(),this.Pt(),this.Dt(),this.Ft(),this.Tt()}}]),o}();m._RF.pop(),m._RF.push({},"9f0a0l1uXlNwqKEKardFRyv","LayoutManager",void 0);var G=X.Layout,kn=X.DesignSize,On=kn.Portrait,Un=kn.Landscape,qa=X.AcceptPortraitRatio,At=Ludex,Ka=At.Utils.Decorator,Xa=At.Configs.GameEngine.AutoResizeCanvas,Wa=At.Events,Gn=codex,zn=Gn.ads,Qa=Gn.event,ja=(Ln=Ka.debounce(100),Tn=Y((Fn=function(){function o(){var e=this;_(this,o),this.Bt=function(){if(Xa&&ResizeObserver){var t,n=null!=(t=window.__listeners.resize)?t:[];if(n.length>0){var a,r=x(n);try{for(r.s();!(a=r.n()).done;){var i=a.value;window.removeEventListener("resize",i)}}catch(s){r.e(s)}finally{r.f()}}new ResizeObserver(e.handleBodyResize).observe(window.document.body)}Qa.on(Wa.REQUEST_RESIZE_GAME,e.Ht)},this.Yt=function(){Te.setOrientation(ge.ORIENTATION_AUTO),e.E=Te.getResolutionPolicy(),e.E.setContentStrategy(W.ContentStrategy.EXACT_FIT),e.E.setContainerStrategy(W.ContainerStrategy.PROPORTION_TO_FRAME)},this.Ue=function(){return!(null==zn||!zn.isAdFullSizeShowing())},this.Ht=function(t){if(!e.Ue()){var n=K.getMaxPixelRatio(),a=(null!=t?t:{}).forcePixelRatio,r=void 0===a?n:a;window.devicePixelRatio=null!=r?r:n,e.Ge()}},Fe(this,"handleBodyResize",Tn,this),this.Ge=function(){var t=e.ze();switch(X.PRIMARY_LAYOUT){case"portrait":e.Be();break;case"landscape":e.He();break;case"auto":t<=qa?e.Be():e.He()}},this.Be=function(){var t=On.WIDTH,n=On.HEIGHT,a=X.PRIMARY_LAYOUT===G.Portrait;(e.U!==G.Portrait||a)&&(e.U=G.Portrait,e.Ye(t,n)),e.Ve(t,n)},this.He=function(){var t=Un.WIDTH,n=Un.HEIGHT,a=X.PRIMARY_LAYOUT===G.Landscape;(e.U!==G.Landscape||a)&&(e.U=G.Landscape,e.Ye(t,n)),e.Ve(t,n)},this.Ye=function(t,n){var a=Te.getDesignResolutionSize(),r=a.width,i=a.height,s=e.E.getContentStrategy(),c=e.ze(),u=X.AcceptPortraitRatio,d=e.E._containerStrategy.name,f=e.U===G.Portrait,v=e.U===G.Landscape;f&&e.E.setContentStrategy(W.ContentStrategy.FIXED_WIDTH),v&&e.E.setContentStrategy(W.ContentStrategy.FIXED_HEIGHT),f&&e.E.setContainerStrategy(W.ContainerStrategy.EQUAL_TO_FRAME),v&&e.E.setContainerStrategy(W.ContainerStrategy.EQUAL_TO_FRAME),c>u&&f&&(e.E.setContentStrategy(W.ContentStrategy.SHOW_ALL),e.E.setContainerStrategy(W.ContainerStrategy.PROPORTION_TO_FRAME)),r===t&&i===n&&s===e.E.getContentStrategy()&&d===e.E._containerStrategy.name||Te.setDesignResolutionSize(t,n,e.E),y.emit(L.LAYOUT_CHANGED,e.U)},this.Ve=function(t,n){var a=X.DesignSize.Resolution,r=new ye(t/a,n/a),i=K.getScreenWidthCss(),s=K.getScreenHeightCss(),c=i/r.width,u=s/r.height,d=new ye(r.width,r.height),f=e.U===G.Portrait,v=e.U===G.Landscape;if(f||v)d.width*=c,d.height*=u;else{var g=Math.min(c,u);d.width*=g,d.height*=g}var A=K.worldSizeToCssSize(d.width),w=K.worldSizeToCssSize(d.height),E=new ye(A,w);pn.windowSize=E,y.emit(L.VIEW_RESIZED,E)},this.ze=function(){return K.getScreenWidthCss()/K.getScreenHeightCss()}}return R(o,[{key:"init",value:function value(){this.Bt(),this.Yt()}}]),o}()).prototype,"handleBodyResize",[Ln],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){var o=this;return function(){if(!o.Ue()){var e=K.getMaxPixelRatio();window.devicePixelRatio=e,o.Ge()}}}}),Fn);m._RF.pop(),m._RF.push({},"535cbXcmXdEzLn3H3LOIS27","MatchManager",void 0);var Bn=Ludex,Za=Bn.Utils.Valid,Hn=Bn.Dtos.Match,bt=(void 0===Hn?{}:Hn).CustomData,Ja=function(){function o(){_(this,o),this.Vt=function(){bt&&(bt.addDefaults(Zt),bt.addValidator("score",function(e){if(!Za.isNumber(e)||e<0)throw Error("score ".concat(e," is invalid"))}))}}return R(o,[{key:"init",value:function value(){}},{key:"setupDefaultMatchData",value:function value(){this.Vt()}}]),o}();m._RF.pop(),m._RF.push({},"d675ctpYslBHp4qqiYEki+q","PlayerManager",void 0);var Yn=Ludex,Ke=Yn.Utils,Vn=Ke.Valid,we=(Ke.Array,Ke.Object,Ke.Browser,Yn.Dtos.Player),$a=codex.player,er=(window.GameName.replace(/ /g,"-"),function(){function o(){_(this,o)}return R(o,[{key:"init",value:function value(){}},{key:"setupDefaultGameData",value:function value(){we.Data.makeLoose(),we.GameData.makeLoose(),we.Data.addDefaults(Jt),we.GameData.addDefaults($t),we.GameData.addValidator("bestEndlessScore",function(e){if(!Vn.isNumber(e)||e<0)throw Error("bestEndlessScore ".concat(e," is invalid"))}),we.GameData.addValidator("firstLoginTime",function(e){if(!Vn.isNumber(e)||e<0)throw Error("firstLoginTime ".concat(e," is invalid"))})}},{key:"syncPlatformPlayerData",value:function value(){}},{key:"requestConnectedPlayers",value:function value(){$a.requestConnectedPlayers().catch(function(e){})}}]),o}());m._RF.pop(),m._RF.push({},"51079bCfn9MZK6cuxbahS7M","AdaptivePerformance",void 0);var tr=Ludex.Utils.Valid,fe=codex.adaptivePerformance,nr=function(){function o(){var e=this;_(this,o),this.m=function(){S.once(k.EVENT_BEGIN_FRAME,e.qt),S.on(k.EVENT_AFTER_SCENE_LAUNCH,e.Kt)},this.qt=function(){S.on(k.EVENT_AFTER_UPDATE,e.Xt),S.on(k.EVENT_BEFORE_UPDATE,e.Wt)},this.Kt=function(t){fe&&fe.trackingScene(t.name)},this.Xt=function(){var t=1e3*y.deltaTime;null==fe||fe.updatePostStepDeltaTime(t)},this.Wt=function(){var t,n=null==(t=S.root)?void 0:t.fps;tr.isNumber(n)&&(null==fe||fe.updateActualFPS(n))}}return R(o,[{key:"init",value:function value(){fe&&this.m()}}]),o}();m._RF.pop(),m._RF.push({},"0bbd4wf2fRDcKljBcls6K8a","CanvasRecorder",void 0);var Ae=codex.canvasRecorder,ar=function(){function o(){_(this,o)}return R(o,[{key:"init",value:function value(){if(y.canvas&&Ae){Ae.setCanvas(y.canvas);var e=Ae.getOptions(),t=function t(){y.pause(),y.step()},n=Ae.waitNextFrame;Ae.waitNextFrame=function(){var a=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return new Promise(function(r,i){a||Ae.isCapturing()?e.syncFps?(S.once(k.EVENT_AFTER_RENDER,r),t()):n(a).then(r).catch(i):y.resume()})}}}}]),o}();m._RF.pop(),m._RF.push({},"e8b3dVomjtKZ68ykoRs82vP","DailyRewards",void 0);var qn,Kn,Xn,rr=codex.storage,ir=function(){function o(){_(this,o),this.te=function(){rr.addStorage("dashboardDailyRewards",{hasShownPopup:!1})}}return R(o,[{key:"init",value:function value(){this.te()}}]),o}();m._RF.pop(),m._RF.push({},"49a72YoKFFCKbOm5Xgp9R+k","DynamicAssets",void 0);var _t=Ludex,Rt=_t.Configs.GameEngine.DynamicAssets,Xe=Rt.Resolution,Ct=Rt.IgnoreFiles,We=Rt.Compression,or=_t.Events,Qe=_t.Utils,je=Qe.Array,Wn=Qe.Function,sr=Qe.Device,cr=Qe.Decorator,Dt=codex,ur=Dt.event,be=Dt.storage,lr=Dt.getBuildVersion,dr=[".png",".jpg",".jpeg",".webp"],hr=(qn=cr.debounce(1e3),Xn=Y((Kn=function(){var e;function o(){var n,t=this;_(this,o),this.Se=!1,this.Qt=Wn.timeSlice(10),this.ne=1,this.S=3,this.qe=new Set,this.V=new Set,this.we=new Map,this.te=p(function(){return _ts_generator(this,function(_state){switch(_state.label){case 0:return[4,be.addStorage("DynamicAssets",{currentQuality:0,buildVersion:"0"},!0)];case 1:return _state.sent(),[2]}})}),this.jt=function(){var n,a=Math.round(sr.pixelRatio()),r=Xe.Available,i=Xe.Source,s=$(r).sort(function(d,f){return d-f}),c=x(s);try{for(c.s();!(n=c.n()).done;){var u=n.value;if(u>=a)return Math.min(u,i)}}catch(d){c.e(d)}finally{c.f()}return i},this.Zt=function(){return t.ne!==Xe.Source||We.Enabled?We.Enabled?1:2:3},this.Ae=function(){var n=lr().toString(),a=be.getStorage("DynamicAssets"),r=null!=a?a:{},i=r.currentQuality,s=void 0===i?0:i,c=r.buildVersion;t.S<s&&n===c&&(t.S=s),be.setStorageData("DynamicAssets","buildVersion",n),be.updateToWebStorage("DynamicAssets")},this.m=function(){We.Enabled&&3!==t.S&&(ur.catchUp(or.GAME_READY,function(){y.emit(L.REQUEST_UPGRADE_ASSET)}),y.on(L.REQUEST_UPGRADE_ASSET,t.handleChangeQuality))},this.Jt=function(n){Object.defineProperty(ht.prototype,"spriteFrame",{get:function get(){return this._spriteFrame},set:function set(a){if(a&&(a.refreshed||this._spriteFrame!==a)){var r=this._spriteFrame;if(this._spriteFrame=a,this.markForUpdateRenderData(!0),this._applySpriteFrame(r),this.sizeMode!==ht.SizeMode.CUSTOM){var i=this.node.getComponent(vn);if(i){var s=a.originalSize,c=s.width,u=s.height,d=new ye(c/n,u/n);i.setContentSize(d)}}}}})},this.$t=function(n){var a=he.prototype.checkRect;he.prototype.checkRect=function(){if(this.refreshed)return!0;for(var r=arguments.length,i=Array(r),s=0;s<r;s++)i[s]=arguments[s];return a.apply(this,i)}},this.tn=function(n){var a=he.prototype._calculateSlicedUV;he.prototype._calculateSlicedUV=function(){var r,i=null!=(r=this._capInsets)?r:[0,0,0,0],s=i.map(function(c){return(c+1)*n});this._capInsets=s,a.apply(this),this._capInsets=i}},this.nn=function(n){var a=he.prototype._refreshTexture;he.prototype._refreshTexture=function(){for(var r=arguments.length,i=Array(r),s=0;s<r;s++)i[s]=arguments[s];if(this.name&&!this.refreshed){var c=this.rect,u=c.x,d=c.y,f=c.width,v=c.height,g=Number((u*n).toFixed(2)),A=Number((d*n).toFixed(2)),b=new gn(g,A,Math.round(f*n),Math.round(v*n)),C=new ye(b.width,b.height);return this.refreshed=!0,this.reset({rect:b,originalSize:C}),a.apply(this,i)}a.apply(this,i)}},Fe(this,"handleChangeQuality",Xn,this),this.an=function(n){var a="/native@".concat(t.ne,"x/");switch(t.S){case 2:return"".concat(a,"quality/");case 1:return je.has(Ct,n)?"".concat(a,"quality/"):"".concat(a,"medium/");default:return"/native/"}},this.rn=function(n,a){return 3!==t.S&&a.includes("/native/")?a.replace("/native/",t.an(n)):a},this.sn=function(){be.setStorageData("DynamicAssets","currentQuality",t.S),be.updateToWebStorage("DynamicAssets",!0)},this.cn=p(function(){var n,a,r,i,s,c,u,d,f;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(!(n=S.getScene()))return[3,9];r=n.getComponentsInChildren("cc.Sprite"),i=x(r),_state.label=1;case 1:_state.trys.push([1,7,8,9]),i.s(),_state.label=2;case 2:if((a=i.n()).done)return[3,6];if(!(s=a.value.spriteFrame))return[3,5];if(c=s.texture,u=s.original,d=c.uuid,u&&(d=u._texture.uuid),!t.V.has(d))return[3,4];return c.updateImage(),[4,t.Qt()];case 3:_state.sent(),_state.label=4;case 4:_state.label=5;case 5:return[3,2];case 6:return[3,9];case 7:return f=_state.sent(),i.e(f),[3,9];case 8:return i.f(),[7];case 9:return[2]}})}),this.un=function(){y.emit(L.REQUEST_DYNAMIC_ATLAS,{force:!0})},this.ln=function(n){var a,r=n.output=n.input,i=!1,s=x(r);try{for(s.s();!(a=s.n()).done;){var c=a.value;if(je.has(dr,c.ext)&&!je.has(Ct,c.uuid)){var u=c.url,d=t.rn(c.uuid,u);if(d!==u&&(c.url=d,!t.we.has(c.uuid))){var f={ext:c.ext,url:c.url,uuid:c.uuid,options:c.options,resolution:t.ne};t.we.set(c.uuid,f),i=!0}}}}catch(v){s.e(v)}finally{s.f()}i&&y.emit(L.REQUEST_UPGRADE_ASSET)},this.dn=(n=p(function(a){var r,i,s,c,u,d,f,v,g,A,w;return _ts_generator(this,function(_state){return(r=a.uuid,i=a.url,s=a.ext,c=a.options,u=a.resolution,r&&i&&s&&c&&u)?t.V.has(r)?[2,!0]:t.qe.has(r)?[2,!1]:je.has(Ct,r)?[2,(t.V.add(r),!0)]:_instanceof(d=Ie.assets.get(r),yn)?(f="/native@".concat(u,"x/"),v="".concat(f,"medium/"),g="".concat(f,"quality/"),(A=i.replace(v,g))===i)?[2,(t.V.add(r),!0)]:(w={uuid:r,url:A,options:c,resolution:u,ext:s},[2,new Promise(function(E){Ie.loadAny(w,c,function(b,C){b?(t.qe.add(r),E(!1)):(d.reset(C),d._nativeUrl=A,t.V.add(r),y.emit(L.ASSET_QUALITY_CHANGE,{asset:d,item:w}),E(!0))})})]):[2,!1]:[2,!1]})}),function(a){return n.apply(this,arguments)})}return R(o,[{key:"init",value:(e=p(function(){var t;return _ts_generator(this,function(_state){switch(_state.label){case 0:return this.ne=this.jt(),this.S=this.Zt(),[4,this.te()];case 1:return _state.sent(),this.Ae(),Ie.transformPipeline.insert(this.ln,2),this.S<3&&(t=this.ne/Xe.Source,this.Jt(t),this.tn(t),this.$t(t),this.nn(t)),this.m(),[2]}})}),function(){return e.apply(this,arguments)})}]),o}()).prototype,"handleChangeQuality",[qn],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){var o=this;return p(function(){var e,t,n,a,r,i;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(o.Se||!We.Enabled||o.S>=2)return[3,6];_state.label=1;case 1:_state.trys.push([1,4,5,6]),o.Se=!0,t=[],n=o.V.size,a=x(o.we.values());try{for(a.s();!(e=a.n()).done;)r=e.value,i=o.dn(r),t.push(i)}catch(s){a.e(s)}finally{a.f()}if(t.length<1)return[2];return[4,Wn.allSettled(t)];case 2:return _state.sent(),o.V.size>n&&(o.S++,o.sn()),[4,o.cn()];case 3:return _state.sent(),o.un(),[3,6];case 4:return _state.sent(),[3,6];case 5:return o.Se=!1,[7];case 6:return[2]}})})}}),Kn);m._RF.pop(),m._RF.push({},"15ecbqnx5lFtYRSJp2lOLCm","DynamicAtlas",void 0);var Lt=Ludex,Ft=Lt.Events,Pe=Lt.Configs.GameEngine.DynamicAtlas.OptimizeAtlas,fr=Pe.AtlasDebug,mr=Pe.AutoAtlasSize,jn=Pe.UsePowerOfTwo,pr=Pe.AllowNonePackable,Zn=Pe.OnlyOptimizeWhenRenderTooLong,Ne=Lt.Utils,vr=Ne.Json,gr=Ne.Image,Jn=Ne.Function,$n=Ne.Object,ea=Ne.Mark,Tt=codex.event,yr=function(){function o(){var e=this;_(this,o),this.Ke=!0,this.ue=!1,this.le=Jn.mutex(),this.X=[],this.Xe=0,this.be=5e3,this.Y=null,this.de=null,this._e={},this.W=new Map,this.j=new Set,this._={},this.m=function(){y.on(L.REQUEST_DYNAMIC_ATLAS,e.Re),Tt.on(Ft.SCENE_LAUNCHED,e.hn),Tt.catchUp(Ft.GAME_READY,e.fn)},this.hn=function(){e.mn(),e.pn()},this.pn=function(){for(var t in e.j.forEach(function(n){n.isValid&&n._resetDynamicAtlasFrame()}),e.j.clear(),T.instance.reset(),e.Y=null,e.de=null,e._)delete e._[t]},this.vn=function(){var t=T.instance;t.packToDynamicAtlas=e.gn,t.deleteAtlasSpriteFrame=e.yn},this.En=function(){var t=e.We(),n=T.instance.maxAtlasCount+1;e._[n]=t},this.Qe=function(){e.Sn()>8&&e.wn(),S.once(k.EVENT_AFTER_RENDER,function(){setTimeout(function(){e.Qe()},e.be)})},this.wn=function(){e.Ke||(e.be=Math.min(e.be+1e3,1e4)),e.Re({force:!0})},this.mn=function(){e._e={},e.W.clear()},this.fn=function(){S.on(k.EVENT_BEFORE_RENDER,e.An),S.on(k.EVENT_AFTER_RENDER,e.bn),Zn&&Tt.catchUp(Ft.SCENE_LAUNCHED,function(){S.once(k.EVENT_AFTER_RENDER,e.Qe)})},this.An=function(){e.Xe=performance.now()},this.bn=function(){e.X.length>=100&&e.X.shift();var t=performance.now()-e.Xe;e.X.push(t)},this.Sn=function(){if(0===e.X.length)return 0;var t=e.X.reduce(function(n,a){return n+a},0)/e.X.length;return e.X.length=0,t},this.gn=function(t){if($n.hasOwn(t,"spriteFrame")){var n=t.spriteFrame;if(e._n(t,n)){var a=e.ae(n),r=null==a?void 0:a.getId();if(r){var i=e.je(a);e.Rn(r,i,t),Zn||e.Re()}}}},this.yn=function(t){var n=e.ae(t);if(n){var a=e.re();null==a||a.deleteInnerTexture(n),e.j.delete(t),t._resetDynamicAtlasFrame()}},this._n=function(t,n){var a=t.enabled,r=t.node;if(!a||!n||!r.active||!r.activeInHierarchy||!n.packable&&!pr)return!1;if(n.original){var i=n.texture,s=n.original._texture,c=i===s,u=(null==i?void 0:i.getId())===(null==s?void 0:s.getId());if(c||u)return!1}if(t.color.a<1)return!1;for(var d=r;d;){var f=d.getComponent(En);if(f&&f.opacity<1)return!1;d=d.parent}var v=e.Cn(n);return!e.Dn(v)},this.Rn=function(t,n,a){var r=e.W.get(t),s=n.w+2,c=n.h+2;s<=2||c<=2||(r?(r.w=s,r.h=c):(r={id:t,w:s,h:c,x:-1,y:-1,components:new Set},e.W.set(t,r)),r.components.has(a)||r.components.add(a))},this.ae=function(t){var n,a;return null!=(n=null==(a=t.original)?void 0:a._texture)?n:t.texture},this.Cn=function(t){var n=e.ae(t);return e.je(n)},this.je=function(t){var n,a;return null!=t&&t.image?{w:t.image.width,h:t.image.height}:{w:null!=(n=null==t?void 0:t.width)?n:0,h:null!=(a=null==t?void 0:t.height)?a:0}},this.Dn=function(t){var n=T.instance.maxFrameSize;return t.w>=n||t.h>=n},this.xn=function(){if(!e.Y)return!1;if(e.de&&!e.ue){var n=e.Ln(e.de,e.Y);if(e.Ke=!n,n)return!1}var a=e.re();if(null==(t=a)||!t._texture)return!1;var r=e.Y.packedInfo,i=a._texture,s=i.width,c=i.height,u=r.width+5,d=r.height+5;if(5>=Math.max(u,d))return!1;var f=Math.max(u,d),v=jn?f:u,g=jn?f:d;if(!(a=e.Fn(a)))return!1;if(mr||v>s||g>c){a._texture.initWithSize(v,g);var A=e._[e.Z()];A&&(A.width=v,A.height=g)}else{var t,w,E=e._[e.Z()];E&&(null==(w=E.getContext("2d"))||w.clearRect(0,0,E.width,E.height))}return e.de=vr.clone(e.Y),!0},this.Tn=function(){var t=T.instance.newAtlas();if(t&&fr){var n=e.We(),a=e.Z();e._[a]=n}return t},this.We=function(){var t=T.instance.textureSize,n=document.createElement("canvas");return n.width=t,n.height=t,n},this.Fn=function(t){var n=T.instance,a=n._atlases.indexOf(t);return e.j.forEach(function(r){r.isValid&&r._resetDynamicAtlasFrame()}),e.j.clear(),t.destroy(),a>-1&&(n._atlases.splice(a,1),n._atlasIndex>=a&&n._atlasIndex--),e.re()},this.re=function(t){var n,a=T.instance,r=a._atlases,s=a._atlasIndex;return null!=(n=(void 0===r?[]:r)[null!=t?t:s])?n:e.Tn()},this.Z=function(){return T.instance._atlasIndex},this.In=function(){var t=e.re(),n=T.instance.textureSize;return null!=t&&t._texture?{w:Math.max(t._texture.width,n),h:Math.max(t._texture.height,n)}:{w:n,h:n}},this.Re=Jn.debounce(function(t){var n;e.ue||(e.ue=null!=(n=null==t?void 0:t.force)&&n),e.Mn()},800),this.Mn=p(function(){var t;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(!S.getScene())return[3,2];return[4,e.le.use("updateDynamicAtlas")];case 1:t=_state.sent(),ea.start("DynamicAtlas Process");try{if(S.pause(),e.Y=null,e.Pn(),!e.xn()||!e.Nn())return[2];y.emit(L.FINISHED_DYNAMIC_ATLAS),requestAnimationFrame(e.kn)}catch(unused){}finally{e.ue=!1,ea.stop("DynamicAtlas Process"),S.resume(),t.release()}_state.label=2;case 2:return[2]}})}),this.Pn=function(){if(!(e.W.size<1)){var t=[];e.W.forEach(function(n){n.components.size<1||t.push(n)}),e.Ze(t)}},this.Ze=function(t){if(0!==t.length){var n=function(f){var v,g=0,A=0,w=x(f);try{for(w.s();!(v=w.n()).done;){var E=v.value;g+=E.w*E.h,A=Math.max(A,E.w)}}catch(Be){w.e(Be)}finally{w.f()}f.sort(function(Be,io){return io.h-Be.h});var b,C=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(g/.95)),A),h:1/0}],O=0,U=0,H=x(f);try{for(H.s();!(b=H.n()).done;)for(var D=b.value,ze=C.length-1;ze>=0;ze--){var I=C[ze];if(!(D.w>I.w||D.h>I.h)){if(D.x=I.x,D.y=I.y,U=Math.max(U,D.y+D.h),O=Math.max(O,D.x+D.w),D.w===I.w&&D.h===I.h){var Ga=C.pop();Ga&&ze<C.length&&(C[ze]=Ga)}else D.h===I.h?(I.x+=D.w,I.w-=D.w):(D.w===I.w||C.push({x:I.x+D.w,y:I.y,w:I.w-D.w,h:D.h}),I.y+=D.h,I.h-=D.h);break}}}catch(Be){H.e(Be)}finally{H.f()}return{w:O,h:U,fill:g/(O*U)||0}}(t),a=n.w,r=n.h,i=n.fill;if(!(i<.6)){var s=e.In();if(a>s.w||r>s.h){var c=e.On(t,s);if(c.length<1)return;var u=new Set(c),d=t.filter(function(f){return!u.has(f)});e.Ze(d)}else e.Y={atlasSize:s,atlasIndex:e.Z(),packedInfo:{width:Math.round(a),height:Math.round(r),fillRate:i}}}}},this.On=function(t,n){var a=n.w,r=n.h,i=e.Un(a,r,n),s=i.excessWidth,c=i.excessHeight;return e.Gn(t,s,c)},this.Un=function(t,n,a){return{excessWidth:Math.max(0,t-a.w),excessHeight:Math.max(0,n-a.h)}},this.Gn=function(t,n,a){var r,i=0,s=0,c=[],u=e.Z(),d=x(t);try{for(d.s();!(r=d.n()).done;){var f,v=r.value;(n>0&&i<n||a>0&&s<a)&&(i+=v.w,s+=v.h,e._e[v.id]=Math.min(null!=(f=e._e[v.id])?f:u,u),v.x=-1,v.y=-1,c.push(v))}}catch(g){d.e(g)}finally{d.f()}return c},this.Nn=function(){if(!e.Y)return!1;var t=e.re();if(!t)return!1;var n=[],a=new Map,r=new Set;e.W.forEach(function(u){r.add(u.id);var d,f=x(u.components);try{for(f.s();!(d=f.n()).done;){var v,g=d.value;if(g.isValid){var A=null==g?void 0:g.spriteFrame;if(A){var w=e.ae(A),E=null==w?void 0:w.getId();E&&(a.set(E,(null!=(v=a.get(E))?v:0)+1),n.push(g))}}}}catch(b){f.e(b)}finally{f.f()}});for(var i=0;i<n.length;i++){var c=n[i];e.zn(t,c)}return!0},this.zn=function(t,n){if($n.hasOwn(n,"spriteFrame")){var a=n.spriteFrame;a&&e.Bn(t,a,n)}},this.Bn=function(t,n,a){n.original&&n._resetDynamicAtlasFrame();var r=T.instance.textureBleeding,i=e.Hn(t,n,r);i&&(n._setDynamicAtlasFrame(i),e.j.add(n),a.setTextureDirty(),a.markForUpdateRenderData(!0),e.Yn(a))},this.Yn=function(t){var n;if(_instanceof(t,ft)){var a=t.renderData;if(a){a.vertDirty=!1;var r=ft.Assembler.getAssembler(t);null==r||null==(n=r.updateUVs)||n.call(r,t)}}},this.kn=function(){if(fr){var t=T.instance.maxAtlasCount;for(var n in e._){var a=e._[n];if(a&&Number(n)<=t){var r=a.toDataURL("image/jpeg",.6);gr.logImage(r,.5)}}}},this.Hn=function(t,n,a){var r,i,s,c,u=e.ae(n);if(!u)return null;var d=u.getId(),f=e.W.get(d);if(!f)return null;var v=null!=(r=f.x)?r:-1,g=null!=(i=f.y)?i:-1;if(-1===v||-1===g)return null;var A=t._texture,w=A.width,E=A.height;if(v+f.w>w||g+f.h>E)return null;var b=u.image;if(!b)return null;var C=1*!!a,O=v+C,U=g+C,H=t._innerTextureInfos[d];if(!H){if(e.Vn({atlas:t,texId:d,image:b,drawX:O,drawY:U,space:C}),fr){var D=f.components.size;e.qn({image:b,texId:d,drawX:O,drawY:U,usageCount:D,space:C})}t._count++,H={texture:u,x:O,y:U},t._innerTextureInfos[d]=H}return{x:n.rect.x+(null!=(s=H.x)?s:O),y:n.rect.y+(null!=(c=H.y)?c:U),texture:t._texture}},this.Vn=function(t){var n=t.atlas,a=t.image,r=t.drawX,i=t.drawY,s=t.space,c=n._texture;s>0&&(a.width<=16||a.height<=16)&&(c.drawTextureAt(a,r-s,i-s),c.drawTextureAt(a,r-s,i+s),c.drawTextureAt(a,r+s,i-s),c.drawTextureAt(a,r+s,i+s)),c.drawTextureAt(a,r,i)},this.qn=function(t){var n=e.Z(),a=e._[n];if(a){var r=t.image,i=t.texId,s=t.drawX,c=t.drawY,u=t.usageCount,d=t.space,f=a.getContext("2d",{willReadFrequently:!0}),v=null==r?void 0:r.data;f&&v&&e.isDrawableImage(v)&&(e.Kn({ctx:f,image:r,drawX:s,drawY:c,space:d}),e.Xn({ctx:f,image:r,drawX:s,drawY:c,space:d,usageCount:u}),e.Wn({ctx:f,image:r,drawX:s,drawY:c,space:d,texId:i}))}},this.Kn=function(t){var n=t.ctx,a=t.image,r=t.drawX,i=t.drawY,s=t.space,c=a.data;s>0&&(a.width<=16||a.height<=16)&&(n.drawImage(c,r-s,i-s),n.drawImage(c,r-s,i+s),n.drawImage(c,r+s,i-s),n.drawImage(c,r+s,i+s)),n.drawImage(c,r,i)},this.Xn=function(t){var n=t.ctx,a=t.image,r=t.drawX,i=t.drawY,s=t.space,c=t.usageCount,u=r,d=i,f=a.width,v=a.height;s>0&&(u-=s,d-=s,f+=2*s,v+=2*s);var g=240*(1-Math.min(c/15,1));n.fillStyle="hsla(".concat(g,", 100%, 50%, 0.2)"),n.fillRect(u+.5,d+.5,f,v)},this.Wn=function(t){var n=t.ctx,a=t.drawX,r=t.drawY,i=t.space,s=t.texId;n.font="22px Arial",n.textAlign="left",n.textBaseline="top";var c=n.measureText(s.replace("Tex.","")),d=a-i+10,f=r-i+10;n.fillStyle="rgba(0, 50, 0, 0.8)",n.fillRect(d-4,f-4,c.width+8,30),n.fillStyle="rgba(255, 255, 255, 0.95)",n.fillText(s,d,f)},this.Ln=function(t,n){return!(!t||!n||t.atlasIndex!==n.atlasIndex)&&t.packedInfo.fillRate===n.packedInfo.fillRate&&t.packedInfo.width===n.packedInfo.width&&t.packedInfo.height===n.packedInfo.height}}return R(o,[{key:"init",value:function value(){this.m(),this.vn(),fr&&this.En()}},{key:"isDrawableImage",value:function value(e){return _instanceof(e,HTMLCanvasElement)||_instanceof(e,HTMLImageElement)||_instanceof(e,ImageBitmap)}}]),o}();m._RF.pop(),m._RF.push({},"f18351KuT9C+7suAM5eHst5","renderResultChallenge",void 0);var Re=Ludex.Utils.Error,ne="./wideframes",Er="".concat(ne,"/result-challenge.png"),Sr="".concat(ne,"/update-challenge.png"),ta="".concat(ne,"/images/avatar-fallback.png"),me={wideframe:{type:"image",depth:0,size:[952,492],position:[0,0]},playerPhoto:{type:"image",depth:-2,size:[160,160],position:[50,140],fallbackImage:ta},opponentPhoto:{type:"image",depth:-1,size:[160,160],position:[740,140],fallbackImage:ta},leftScore:{type:"text",name:"left-score",depth:3,font:"normal bold 44px",color:"#f2a62e",textAlign:"center",position:[123,372]},rightScore:{type:"text",name:"right-score",depth:3,font:"normal bold 44px",color:"#f2a62e",textAlign:"center",position:[820,372]},leftCrown:{type:"image",name:"crown",depth:3,size:[92,63],position:[80,80],image:"".concat(ne,"/images/crown-icon.png")},rightCrown:{type:"image",name:"crown",depth:3,size:[92,63],position:[775,80],image:"".concat(ne,"/images/crown-icon.png")}},wr={win:{name:"win-image",type:"image",depth:2,size:[277,144],position:[337.5,174],image:"".concat(ne,"/images/win.png")},lose:{name:"lose-image",type:"image",depth:2,size:[326,145],position:[313,173.5],image:"".concat(ne,"/images/lose.png")},draw:{name:"draw-image",type:"image",depth:2,size:[390,144],position:[281,174],image:"".concat(ne,"/images/draw.png")}},Ar=(o=p(function(e){var t,n,a;return _ts_generator(this,function(_state){switch(_state.label){case 0:return t=Re.lift({}),n=Re.pipe(Rr(e),Cr(e),Dr(e),_r(e))(t),[4,Re.applyAsync(br)(n)];case 1:if(a=_state.sent(),Re.isFailure(a))return Re.extractFailure(a),[2,null];return[2,Re.extractSuccess(a)]}})}),function(e){return o.apply(this,arguments)}),br=function br(o){return codex.frameCapture.captureAsync({name:"ResultChallenge",width:952,height:492,renderOptions:o})},_r=function _r(o){return function(e){var t=o.isPlayerFinished,n=o.isOpponentFinished,a=t||n;return l(l({},e),{},{wideframe:l(l({},me.wideframe),{},{image:a?Er:Sr,name:a?"result-challenge-with-score-box":"result-challenge-without-score-box"})})}},Rr=function Rr(o){return function(e){return l(l({},e),{},{playerPhoto:l(l({},me.playerPhoto),{},{name:o.playerId,image:o.playerPhoto}),opponentPhoto:l(l({},me.opponentPhoto),{},{name:o.opponentId,image:o.opponentPhoto})})}},Cr=function Cr(o){return function(e){var t=o.isPlayerFinished,n=o.isOpponentFinished,a=o.playerScore,i=o.opponentScore;return t||n?l(l({},e),{},{leftScore:l(l({},me.leftScore),{},{text:t?"".concat(void 0===a?0:a):"???"}),rightScore:l(l({},me.rightScore),{},{text:n?"".concat(void 0===i?0:i):"???"})}):e}},Dr=function Dr(o){return function(e){var t=xr(o);if("none"===t)return e;var n=wr[t];if("draw"===t)return l(l({},e),{},{statusImage:n});var a="win"===t?me.leftCrown:me.rightCrown;return l(l({},e),{},{crown:a,statusImage:n})}},xr=function xr(o){var e=o.playerScore,t=void 0===e?0:e,n=o.opponentScore,a=void 0===n?0:n,r=o.isPlayerFinished,i=o.isOpponentFinished;return r&&i?t===a?"draw":t>a?"win":"lose":"none"};m._RF.pop(),m._RF.push({},"46949HU2K9PdYlSXXZkfABn","renderShareLeaderboard",void 0);var Ce=Ludex.Utils.Error,na="./wideframes",It="".concat(na,"/images/avatar-fallback.png"),ae={wideframe:{name:"share-leaderboard",type:"image",depth:0,image:"".concat(na,"/share-leaderboard.png"),size:[1500,2e3],position:[0,0],fallbackImage:It},avatar:{type:"image",depth:-2,size:[510,510],position:[510,278],fallbackImage:It},leaderPhoto:{type:"image",depth:-1,size:[100,100],fallbackImage:It,position:[436,0]},leaderName:{type:"text",depth:1,font:"600 48px",position:[600,0]},leaderScore:{type:"text",depth:1,font:"600 48px",position:[100,0]}},Fr=(o1=p(function(e){var t,n,a;return _ts_generator(this,function(_state){switch(_state.label){case 0:return t=Ce.lift({}),n=Ce.pipe(Mr(e),Pr(e),Ir)(t),[4,Ce.applyAsync(Tr)(n)];case 1:if(a=_state.sent(),Ce.isFailure(a))return Ce.extractFailure(a),[2,null];return[2,Ce.extractSuccess(a)]}})}),function(e){return o1.apply(this,arguments)}),Tr=function Tr(o){return codex.frameCapture.captureAsync({name:"ShareLeaderboard",width:1500,height:2e3,renderOptions:o})},Ir=function Ir(o){return l(l({},o),{},{wideframe:ae.wideframe})},Mr=function Mr(o){return function(e){return l(l({},e),{},{avatar:l(l({},ae.avatar),{},{name:o.playerId,image:o.playerPhoto})})}},Pr=function Pr(o){return function(e){for(var t=o.leaders,n=l({},e),a=0;a<t.length;a++){var r=t[a],i=r.id,s=r.name,c=r.photo,u=r.score,d=1292+180*a,f=1360+180*a;n["photo_".concat(i)]=l(l({},ae.leaderPhoto),{},{position:[ae.leaderPhoto.position[0],d],name:i,image:c}),n["name_".concat(i)]=l(l({},ae.leaderName),{},{position:[ae.leaderName.position[0],f],name:i,text:s}),n["score_".concat(i)]=l(l({},ae.leaderScore),{},{position:[ae.leaderScore.position[0],f],name:i,text:"".concat(u)})}return n}};m._RF.pop(),m._RF.push({},"c5f1cF6b7dGYLU3X1NOhOPG","renderShareScore",void 0);var Mt=Ludex.Utils,De=Mt.Error,Nr=(Mt.Valid,Mt.Function),Pt=codex,kr=Pt.frameCapture,Ze=Pt.language,aa=Pt.monitorError,ra="./wideframes",ke={wideframe:{type:"image",name:"share-score",depth:0,image:"".concat(ra,"/share-score.png"),size:[1500,2e3],position:[0,0]},avatar:{type:"image",depth:-1,size:[500,500],position:[500,410],fallbackImage:"".concat(ra,"/images/avatar-fallback.png")},playerScore:{type:"text",name:"player-score",depth:1,font:"normal bold",color:"#f2a62e",textAlign:"center",position:[750,1120]},message:{type:"text",name:"message",depth:2,color:"#8f5543",textAlign:"center",position:[760,1560]}},Gr=(o2=p(function(e){var t,n,a;return _ts_generator(this,function(_state){switch(_state.label){case 0:return t=De.lift({}),n=De.pipe(Hr(e),Yr(e),Vr,Br)(t),[4,De.applyAsync(zr)(n)];case 1:if(a=_state.sent(),De.isFailure(a))return De.extractFailure(a),[2,null];return[2,De.extractSuccess(a)]}})}),function(e){return o2.apply(this,arguments)}),zr=function zr(o){return kr.captureAsync({name:"ShareScore",width:1500,height:2e3,renderOptions:o})},Br=function Br(o){return l(l({},o),{},{wideframe:ke.wideframe})},Hr=function Hr(o){return function(e){return l(l({},e),{},{avatar:l(l({},ke.avatar),{},{name:"".concat(o.playerId),image:o.playerPhoto})})}},Yr=function Yr(o){return function(e){var t=ke.playerScore.font,n=ia(),a=oa();return l(l({},e),{},{playerScore:l(l({},ke.playerScore),{},{text:"".concat(o.playerScore),font:"".concat(t," ").concat(a," ").concat(n,",")})})}},Vr=function Vr(o){var e=ia(),t=oa(),n=Kr(),a=l(l({},ke.message),{},{font:"normal ".concat(t," ").concat(e,","),text:n});return l(l({},o),{},{message:a})},ia=function ia(){var t=qr(ct[Ze.getCurrentLocale()]);return"".concat(t,"_LABEL")},oa=function oa(){var o;return null!=(o=en[Ze.getCurrentLocale()])?o:"104px"},qr=function qr(o){var e,t=o.split("/"),n=null!=(e=t[t.length-1])?e:"",a=n.lastIndexOf(".");return -1===a?n:n.substring(0,a)},Kr=function Kr(){try{return Ze.getText("share.canYouDoBetter")}catch(o){return null==aa||aa.sendException(Nr.toError(o),{locale:Ze.getCurrentLocale(),message:"share.canYouDoBetter"}),"share.canYouDoBetter"}};m._RF.pop(),m._RF.push({},"3639a1RbypBKqHUo6gIZVdm","renderShareScoreWithInvite",void 0);var xe=Ludex.Utils.Error,sa=codex,Xr=sa.frameCapture,ca=sa.language,ua="./wideframes",Je={wideframe:{type:"image",name:"share-score-with-invite",depth:0,image:"".concat(ua,"/invite-score.png"),size:[952,492],position:[0,0]},avatar:{type:"image",depth:-1,size:[160,160],position:[85,140],fallbackImage:"".concat(ua,"/images/avatar-fallback.png")},playerScore:{type:"text",name:"player-score",depth:1,font:"normal bold",color:"#f2a62e",textAlign:"center",position:[165,384]}},jr={en:"44px",ru:"40px"},Zr=(o3=p(function(e){var t,n,a;return _ts_generator(this,function(_state){switch(_state.label){case 0:return t=xe.lift({}),n=xe.pipe(ei(e),ti(e),$r)(t),[4,xe.applyAsync(Jr)(n)];case 1:if(a=_state.sent(),xe.isFailure(a))return xe.extractFailure(a),[2,null];return[2,xe.extractSuccess(a)]}})}),function(e){return o3.apply(this,arguments)}),Jr=function Jr(o){return Xr.captureAsync({name:"ShareScore",width:952,height:492,renderOptions:o})},$r=function $r(o){return l(l({},o),{},{wideframe:Je.wideframe})},ei=function ei(o){return function(e){return l(l({},e),{},{avatar:l(l({},Je.avatar),{},{name:"".concat(o.playerId),image:o.playerPhoto})})}},ti=function ti(o){return function(e){var t=Je.playerScore.font,n=ni(),a=ai();return l(l({},e),{},{playerScore:l(l({},Je.playerScore),{},{text:"".concat(o.playerScore),font:"".concat(t," ").concat(a," ").concat(n,",")})})}},ni=function ni(){var t=ri(ct[ca.getCurrentLocale()]);return"".concat(t,"_LABEL")},ai=function ai(){var o;return null!=(o=jr[ca.getCurrentLocale()])?o:"44px"},ri=function ri(o){var e,t=o.split("/"),n=null!=(e=t[t.length-1])?e:"",a=n.lastIndexOf(".");return -1===a?n:n.substring(0,a)};m._RF.pop(),m._RF.push({},"407a0rBEoFPs6GoXuwQofW2","renderUpdateChallenge",void 0);var Le=Ludex.Utils.Error,la="./wideframes",da="".concat(la,"/images/avatar-fallback.png"),Nt={wideframe:{type:"image",name:"update-challenge",depth:0,image:"".concat(la,"/update-challenge.png"),size:[952,492],position:[0,0]},playerPhoto:{type:"image",depth:-1,size:[160,160],position:[50,140],fallbackImage:da},opponentPhoto:{type:"image",depth:-1,size:[160,160],position:[740,140],fallbackImage:da}},oi=(o4=p(function(e){var t,n,a;return _ts_generator(this,function(_state){switch(_state.label){case 0:return t=Le.lift({}),n=Le.pipe(ui(e),ci)(t),[4,Le.applyAsync(si)(n)];case 1:if(a=_state.sent(),Le.isFailure(a))return Le.extractFailure(a),[2,null];return[2,Le.extractSuccess(a)]}})}),function(e){return o4.apply(this,arguments)}),si=function si(o){return codex.frameCapture.captureAsync({name:"UpdateChallenge",width:952,height:492,renderOptions:o})},ci=function ci(o){return l(l({},o),{},{wideframe:Nt.wideframe})},ui=function ui(o){return function(e){return l(l({},e),{},{playerPhoto:l(l({},Nt.playerPhoto),{},{image:o.playerPhoto,name:o.playerId}),opponentPhoto:l(l({},Nt.opponentPhoto),{},{image:o.opponentPhoto,name:o.opponentId})})}};m._RF.pop(),m._RF.push({},"5cf47s8lohMlZGIaMKBpDK0","FrameCapture",void 0);var o,o1,o2,o3,o4,ha,fa,ma,Oe=codex.frameCapture,li=function(){var e;function o(){_(this,o)}return R(o,[{key:"init",value:(e=p(function(){return _ts_generator(this,function(_state){return Oe.setRenderer("share-score",Gr),Oe.setRenderer("result-challenge",Ar),Oe.setRenderer("update-challenge",oi),Oe.setRenderer("share-leaderboard",Fr),Oe.setRenderer("share-score-with-invite",Zr),[2]})}),function(){return e.apply(this,arguments)})}]),o}();m._RF.pop(),m._RF.push({},"2f36c+IsKJAU5s61TqQdaJ6","HybridFileCache",void 0);var kt=Ludex,pa=kt.Events,Ot=kt.Configs.GameEngine.HybridFileCache,di=Ot.Enabled,$e=Ot.PreviewMode,Ue=Ot.BuildMode,et=kt.Utils,va=et.Object,hi=et.Function,ga=et.Json,fi=et.Decorator,Ut=codex,ya=Ut.event,M=Ut.storage,mi=Ut.getBuildVersion,Gt=de.instance,Ea=Gt.downloader,re=Gt.pipeline,ie=Gt.fetchPipeline,pi=/.*\/([-a-z0-9@]+)\.([^.]+)$/,vi=(ha=fi.throttle(1e3),ma=Y((fa=function(){var e;function o(){var n,t=this;_(this,o),this.he=[],this.Ce={},this.Je={},this.De={},this.te=p(function(){return _ts_generator(this,function(_state){return[2,M.addStorage("HybridFileCache",{commitId:"unknown",buildVersion:"0",cachedFiles:{},cachedBundles:{},cachedExtensions:{}},!0)]})}),this.Ae=p(function(){var n,a,r,i,s,c,u;return _ts_generator(this,function(_state){switch(_state.label){case 0:switch(n=Ue.InvalidateMode,a=window.CommitId,r=mi().toString(),i=M.getStorageData("HybridFileCache","commitId"),s=M.getStorageData("HybridFileCache","buildVersion"),M.setStorageData("HybridFileCache","commitId",a),M.setStorageData("HybridFileCache","buildVersion",r),c=i!==a,u=s!==r,n){case"version":return[3,1];case"commitId":return[3,4]}return[3,7];case 1:if(!u)return[3,3];return[4,t.fe()];case 2:_state.sent(),_state.label=3;case 3:return[3,10];case 4:if(!c)return[3,6];return[4,t.fe()];case 5:_state.sent(),_state.label=6;case 6:return[3,10];case 7:if(!(u||c))return[3,9];return[4,t.fe()];case 8:_state.sent(),_state.label=9;case 9:_state.label=10;case 10:return t.requestUpdateStorage(),[2]}})}),this.Qn=function(){t.he=Ue.SupportedExtensions},this.jn=p(function(){var n,a,r,i;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(_state.trys.push([0,,3,4]),!tn||!Ue.Enabled)return[2];a=[],r=x(t.he);try{for(r.s();!(n=r.n()).done;)i=n.value,t.Zn(i)||a.push(t.Jn(i))}catch(s){r.e(s)}finally{r.f()}if(!(a.length>0))return[3,2];return[4,hi.allSettled(a)];case 1:_state.sent(),_state.label=2;case 2:return[3,4];case 3:return ya.emit(pa.BUNDLE_READY),[7];case 4:return[2]}})}),this.Jn=(n=p(function(a){var r,i,c;return _ts_generator(this,function(_state){switch(_state.label){case 0:return _state.trys.push([0,3,,4]),r=a.replace(".",""),i="./cache/bundle".concat(r.toUpperCase(),".").concat(r),"bundle"===a&&(i="./cache/bundleBUNDLE.json"),[4,fetch(i,{method:"GET",headers:{"Content-Type":"application/json"}})];case 1:return[4,_state.sent().json()];case 2:return c=_state.sent(),t.$n(a,c),[3,4];case 3:return _state.sent(),[3,4];case 4:return[2]}})}),function(a){return n.apply(this,arguments)}),this.ea=function(){if($e.Enabled||Ue.Enabled){var n=ie.pipes[2];n&&(ie.remove(2),ie.insert(function(a,r){try{n(a,r)}catch(unused){}},2))}},this.ta=function(){if($e.Enabled||Ue.Enabled){var n=re.pipes[2];n&&(re.remove(2),re.insert(function(a,r){try{n(a,r)}catch(i){r(i)}},2))}},this.na=function(){if($e.Enabled&&$e.CacheUuidExtension){var n={},a=function a(g,A){g.output=g.input;for(var w=0;w<g.input.length;w++){var E=g.input[w];if(E.id){var b=t.aa(E.id);b?(E.url=E.url.replace(E.ext,b),E.ext=b,n[E.id]=!0):n[E.id]=!1}}A(null,null)},r=function r(g){return function(A,w){for(var E=$(A.input),b=0;b<E.length;b++){var C=E[b];if(C.id){var O,U=n[C.id];va.hasOwn(t.De,C.id)||(t.De[C.id]=null!=(O=C.isNative)&&O),U&&(C.isNative=!0)}}A.input.length,g(A,w)}},i=function i(g,A){g.output=g.input;for(var w=0;w<g.output.length;w++){var E,b=g.output[w];if(b.id){var C=null!=(E=t.De[b.id])&&E;b.isNative=C,n[b.id]||t.ra(b.id,b.ext)}}A(null,null)};re.insert(a,1),ie.insert(a,1),re.insert(i,3),ie.insert(i,3);var s=$(re.pipes),c=$(ie.pipes),u=s[2];u&&(re.pipes[2]=r(u));var d=c[2];d&&(ie.pipes[2]=r(d)),$(re.pipes),$(ie.pipes)}},this.ia=function(){var n,a=x(t.he);try{for(a.s();!(n=a.n()).done;){var r=n.value,i=Ea.handlers[r];i&&(t.Je[r]=i)}}catch(s){a.e(s)}finally{a.f()}},this.oa=function(){var n,a=x(t.he);try{for(a.s();!(n=a.n()).done;){var r=n.value;"bundle"!==r&&Ea.register(r,t.sa(r))}}catch(i){a.e(i)}finally{a.f()}},this.m=function(){ya.on(pa.SCENE_LOADED,t.requestUpdateStorage),y.on(L.CLEAR_HYBRID_FILE_CACHE,t.fe)},this.ca=function(n){var a;return null!=(a=t.Je[n])?a:null},this.sa=function(n){return function(a,r,i){var s=t.ua(n,a);if(s)return i(null,s);var c=t.ca(n);if(!c)return i(Error("Downloader not found"),null);c(a,r,function(u,d){return u||t.la(n,a,d),i(u,d)})}},this.$e=function(n,a){var r=a.match(pi);if(!r)return null;var i=nn(r,3),s=(i[0],i[1]),c=i[2];return!c||0>n.indexOf(c)?null:"".concat(s,":").concat(n)},this.da=function(n){return Array.isArray(n)&&va.hasOwn(n[0],"__type__"),!0},this.la=function(n,a,r){var i=t.$e(n,a);if(i&&t.da(r)){var s=ga.clone(r);M.setStorageData("HybridFileCache","cachedFiles",He({},i,null!=s?s:{})),t.requestUpdateStorage()}},this.ua=function(n,a){var r=t.$e(n,a);if(!r)return null;var i=t.ha()[r];return i||(i=t.fa(n,r)),i?ga.clone(i):null},this.ha=function(){var n;return null!=(n=M.getStorageData("HybridFileCache","cachedFiles"))?n:{}},this.Zn=function(n){var a=M.getStorageData("HybridFileCache","cachedBundles");if(!a)return null;var r=a[n];return r?(t.Ce[n]=r,r):null},this.fa=function(n,a){var r,i=t.Ce[n];return i&&null!=(r=i[a.replace(":".concat(n),"")])?r:null},this.$n=function(n,a){t.Ce[n]=a,M.setStorageData("HybridFileCache","cachedBundles",He({},n,a)),t.requestUpdateStorage()},this.aa=function(n){return t.ma()[n]},this.ra=function(n,a){M.setStorageData("HybridFileCache","cachedExtensions",He({},n,a)),t.requestUpdateStorage()},this.ma=function(){var n;return null!=(n=M.getStorageData("HybridFileCache","cachedExtensions"))?n:{}},Fe(this,"requestUpdateStorage",ma,this),this.fe=function(){M.initStorageData("HybridFileCache","cachedFiles",{}),M.initStorageData("HybridFileCache","cachedBundles",{}),M.updateToWebStorage("HybridFileCache",!0)}}return R(o,[{key:"init",value:(e=p(function(){return _ts_generator(this,function(_state){switch(_state.label){case 0:if(!di)return[3,3];return[4,this.te()];case 1:return _state.sent(),[4,this.Ae()];case 2:_state.sent(),this.Qn(),this.ta(),this.ea(),this.na(),this.ia(),this.oa(),this.jn(),this.m(),_state.label=3;case 3:return[2]}})}),function(){return e.apply(this,arguments)})}]),o}()).prototype,"requestUpdateStorage",[ha],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return function(){M.updateToWebStorage("HybridFileCache",!1)}}}),fa);m._RF.pop(),m._RF.push({},"14b76Yew19JgY7K+L9F5mmu","Languages",void 0);var Sa=Ludex,gi=Sa.Events,yi=Sa.Utils.Array,tt=codex,wa=tt.player,Ei=tt.event,nt=tt.language,oe=tt.monitorError,Si=function(){var e;function o(){var n,n1,n2,n3,t=this;_(this,o),this.pa=p(function(){return _ts_generator(this,function(_state){return nt.add("en",Rn,!0),t.$("en"),[2]})}),this.va=p(function(){var n,a,r;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(!(n=nt.getPlayerLanguage())||!t.me(n))return[2,void t.$("en",!0)];_state.label=1;case 1:return _state.trys.push([1,3,,4]),[4,t.xe(n)];case 2:return _state.sent(),r=null!=(a=wa.getPlayerDataByKey("isFirstLogin"))&&a,t.$(n,r),[3,4];case 3:return _state.sent(),t.$("en",!0),[3,4];case 4:return[2]}})}),this.me=function(n){return yi.has(an,n)},this.ga=function(){Ei.on(gi.REQUEST_LANGUAGE,t.ya),y.on(L.PRELOAD_LANGUAGE,t.Ea),y.on(L.CHOOSE_LANGUAGE,t.Sa)},this.xe=(n=p(function(a){var r,i,_arguments=arguments;return _ts_generator(this,function(_state){switch(_state.label){case 0:return r=_arguments.length>1&&void 0!==_arguments[1]&&_arguments[1],[4,t.wa(a)];case 1:return i=_state.sent(),nt.add(a,i,r),[2]}})}),function(a){return n.apply(this,arguments)}),this.$=function(n){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];nt.choose(n),a&&wa.setSetting("language",n)},this.Ea=(n1=p(function(a){var r,i,s,u,c;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(r=a.locale,i=a.onLoad,s=a.onError,!t.me(r))return[2,void(null==s||s(Error("Language ".concat(r," not found"))))];_state.label=1;case 1:return _state.trys.push([1,3,,4]),[4,t.xe(r)];case 2:return _state.sent(),null==i||i(r),[3,4];case 3:return u=_state.sent(),c=t.pe(u,"handleLanguageRequested"),null==oe||oe.sendException(c),null==s||s(u),[3,4];case 4:return[2]}})}),function(a){return n1.apply(this,arguments)}),this.Sa=function(n){var a=n.locale,r=n.saveToPlayerData;if(t.me(a))try{t.$(a,void 0!==r&&r)}catch(c){var s=t.pe(c,"handleLanguageRequested");null==oe||oe.sendException(s)}},this.wa=(n2=p(function(a){var r,i;return _ts_generator(this,function(_state){switch(_state.label){case 0:if("en"===a)return[2,Rn];return r=rn[a],[4,ut.loadJsonAsync(r)];case 1:if(null===(i=_state.sent()))throw Error("Language ".concat(a," not found"));if(null===i.json)throw Error("Language ".concat(a," is empty"));return[2,i.json]}})}),function(a){return n2.apply(this,arguments)}),this.ya=(n3=p(function(a){var r,i,s,c,u,f,d;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(r=a.locale,s=void 0!==(i=a.saveToPlayerData)&&i,c=a.onLoad,u=a.onError,!t.me(r))return[2,void(null==u||u(Error("Language ".concat(r," not found"))))];_state.label=1;case 1:return _state.trys.push([1,3,,4]),[4,t.xe(r)];case 2:return _state.sent(),null==c||c(r),t.$(r,s),[3,4];case 3:return f=_state.sent(),d=t.pe(f,"handleLanguageRequested"),null==oe||oe.sendException(d),null==u||u(d),[3,4];case 4:return[2]}})}),function(a){return n3.apply(this,arguments)}),this.pe=function(n,a){return _instanceof(n,Error)?n:"string"==typeof n?Error("LanguagePlugin: ".concat(n)):Error("LanguagePlugin: Unknown error in module: <".concat(a,">"))}}return R(o,[{key:"init",value:(e=p(function(){var n,t;return _ts_generator(this,function(_state){switch(_state.label){case 0:return _state.trys.push([0,3,,4]),[4,this.pa()];case 1:return _state.sent(),this.ga(),[4,this.va()];case 2:return _state.sent(),[3,4];case 3:return n=_state.sent(),t=this.pe(n,"handleLanguageRequested"),null==oe||oe.sendException(t),[3,4];case 4:return[2]}})}),function(){return e.apply(this,arguments)})}]),o}();m._RF.pop(),m._RF.push({},"fb33bK/6Y5FAas5AwmmBM/X","Leaderboards",void 0);var Aa=Ludex,ba=Aa.Configs,_a=ba.Mockup,Ra=_a.Leaderboards,wi=_a.GameSDK.Player,Ca=ba.Leaderboards,Da=Aa.Utils.Number,pe=codex.leaderboard,Ai=function(){function o(){var e=this;_(this,o),this.Aa=function(){Ra.Enabled?e.ba():e._a()},this._a=p(function(){return _ts_generator(this,function(_state){return e.Ra(),[2]})}),this.Ra=function(){var t,n=Ca.LeaderboardList,a=x(n);try{for(a.s();!(t=a.n()).done;){var r=t.value,i=r.Id,s=r.Name;pe.addLeaderboard({name:s,type:"global",autoSortRank:!0,leaderboardId:i})}}catch(c){a.e(c)}finally{a.f()}},this.ba=p(function(){return _ts_generator(this,function(_state){return e.Ca(),e.Da(),e.xa(),[2]})}),this.Ca=p(function(){var t,n,a,r,i,s,c,u,d;return _ts_generator(this,function(_state){switch(_state.label){case 0:n=Ra.NumOfLeaders,a=Ca.LeaderboardList,r=x(a),_state.label=1;case 1:_state.trys.push([1,6,7,8]),r.s(),_state.label=2;case 2:if((t=r.n()).done)return[3,5];if(s=(i=t.value).Name,c=i.Id,!s)return[3,4];return[4,pe.createLeaderboardAsync({_id:c,name:s,numberOfLeaders:Da.random(n.Max-n.Min)+n.Min})];case 3:u=_state.sent(),pe.addLeaderboard({name:s,type:"global",autoSortRank:!0,leaderboardId:u}),_state.label=4;case 4:return[3,2];case 5:return[3,8];case 6:return d=_state.sent(),r.e(d),[3,8];case 7:return r.f(),[7];case 8:return[2]}})}),this.Da=p(function(){var t,n,a,r;return _ts_generator(this,function(_state){switch(_state.label){case 0:return t="Mock Friends Leaderboard",n=0,(a=wi.ConnectedPlayers).Enabled&&(n=Da.random(a.NumOfPlayers-1)+1),[4,pe.createLeaderboardAsync({_id:"friends-leaderboard-id",name:t,numberOfLeaders:n})];case 1:return r=_state.sent(),pe.addLeaderboard({name:t,type:"friends",autoSortRank:!0,leaderboardId:r}),[2]}})}),this.xa=p(function(){return _ts_generator(this,function(_state){switch(_state.label){case 0:return[4,on.requestTournamentDataAsync()];case 1:return _state.sent().forEach(function(t){var n=t.payload.leaderboardId;n&&(pe.isExistLeaderboardId(n)||pe.addLeaderboard({type:"tournament",name:n,autoSortRank:!0,leaderboardId:n}))}),[2]}})})}return R(o,[{key:"init",value:function value(){this.Aa()}}]),o}();m._RF.pop(),m._RF.push({},"e7bf73g4jJGuI9FqvW5YBsS","PerformanceMonitor",void 0);var zt=Ludex,bi=zt.Utils.Mark,_i=zt.Events,Bt=zt.Configs.PerformanceMonitor.FpsTracking,Ri=codex.event,Ci=function(){function o(){var e=this;_(this,o),this.l="FPS Tracking",this.m=function(){Ri.catchUp(_i.GAME_READY,e.La)},this.Fa=function(){S.off(k.EVENT_AFTER_UPDATE,e.et)},this.La=function(){e.tt(),S.on(k.EVENT_AFTER_UPDATE,e.et)},this.tt=function(){e.mark&&(e.mark.measure(e.l),e.mark.start(e.l))},this.et=function(){if(e.mark){if(e.nt-=y.deltaTime,e.nt<=0&&!e.at)return e.at=!0,e.Fa(),e.rt(),void e.mark.stop(e.l);e.Le-=y.deltaTime,e.Le>0||(e.Le=e.it,e.rt(),e.mark.stop(e.l),e.tt())}},this.rt=function(){var t,n;if(e.mark){var a=e.Ta(),r=e.Ia(),i=e.Ma(),s=e.Pa();e.ot=Math.min(null!=(t=e.ot)?t:a,a),e.st=Math.max(null!=(n=e.st)?n:0,a),e.mark.putMetric(e.l,"FPS Metric",a),e.mark.putAttr(e.l,"Page Title",document.title),e.mark.putAttr(e.l,"Device Render",i),e.mark.putAttr(e.l,"Draw Calls",r.toString()),e.mark.putAttr(e.l,"Texture Memory",s.toFixed(2)),e.mark.putAttr(e.l,"Min FPS",e.ot.toString()),e.mark.putAttr(e.l,"Max FPS",e.st.toString())}},this.Ta=function(){return S.root&&Math.floor(S.root.fps)||0},this.Ia=function(){return S.root&&S.root.device.numDrawCalls||0},this.Ma=function(){return S.root&&S.root.device.renderer||"Unknown"},this.Pa=function(){return S.root&&S.root.device.memoryStatus.textureSize/1048576||0}}return R(o,[{key:"mark",get:function get(){return Bt.Enabled?bi:null}},{key:"init",value:function value(){var e=Bt.TrackingDuration,t=Bt.TrackingInterval;this.mark&&(this.nt=null!=e?e:60,this.it=null!=t?t:10,this.Le=this.it,this.at=!1,this.m())}}]),o}();m._RF.pop(),m._RF.push({},"58248LBip1DBrMjK0UWw2rM","RemoteConfig",void 0);var Ht=Ludex.Events,Yt=codex.event,Di=function(){function o(){var e=this;_(this,o),this.m=function(){Yt.on(Ht.REQUEST_HOT_RELOAD,e.Na),Yt.on(Ht.REQUEST_UPDATE_CONFIG,e.ka)},this.Na=function(){y.restart()},this.ka=function(t){if("Gameplay"===t.type){y.emit(L.GAMEPLAY_UPDATE_CONFIG,t.config);var n=t.id,a=t.type;Yt.emit(Ht.REMOTE_CONFIG_UPDATED,{id:n,type:a})}}}return R(o,[{key:"init",value:function value(){this.m()}}]),o}();m._RF.pop(),m._RF.push({},"c34a93D1BREiKms1T21AkQS","PluginsManager",void 0);var se=Ludex.Configs,xi=se.Languages,Li=se.Leaderboards,Fi=se.RemoteConfig,Ti=se.FrameCapture,Ii=se.DailyRewards,Mi=se.AdaptivePerformance,xa=se.Debugger,Pi=xa.CanvasRecorder,Ni=xa.Profiler,Vt=se.GameEngine,ki=Vt.HybridFileCache,Oi=Vt.DynamicAssets,Ui=Vt.DynamicAtlas,Gi=function(){function o(){_(this,o),this.Oa=function(){ki.Enabled&&new vi().init()}}return R(o,[{key:"init",value:function value(){this.Oa()}},{key:"initLanguages",value:function value(){xi.Enabled&&new Si().init()}},{key:"initLeaderboards",value:function value(){Li.Enabled&&new Ai().init()}},{key:"initRemoteConfig",value:function value(){Fi.Enabled&&new Di().init()}},{key:"initDynamicAtlas",value:function value(){Ui.OptimizeAtlas.Enabled&&T.instance.enabled&&new yr().init()}},{key:"initDynamicAssets",value:function value(){Oi.Enabled&&new hr().init()}},{key:"initCanvasRecorder",value:function value(){Pi.Enabled&&new ar().init()}},{key:"initPerformanceMonitor",value:function value(){Ni.Enabled&&new Ci().init()}},{key:"initAdaptivePerformance",value:function value(){Mi.Enabled&&new nr().init()}},{key:"initFrameCapture",value:function value(){Ti.Enabled&&new li().init()}},{key:"initDailyRewards",value:function value(){Ii.Enabled&&new ir().init()}}]),o}();m._RF.pop(),m._RF.push({},"ac8b03T+rFB061sXoEEsCUH","SceneManager",void 0);var La=codex,ce=La.event,Fa=La.monitorError,qt=Ludex,ue=qt.Events,zi=qt.Configs.PerformanceMonitor,Ta=qt.Utils,Bi=Ta.Mark,Kt=Ta.Function,Hi=GameSDK,Yi=function(){function o(){var t,t1,t2,e=this;_(this,o),this.l="Load Scene",this.ct={},this.ut=!1,this.lt=null,this.le=Kt.mutex(),this.m=function(){ce.catchUp(ue.MARK_IS_TEST_SCENE,e.Ua),ce.on(ue.SWITCH_SCENE,e.Ga),ce.on(ue.PRELOAD_SCENE,e.za)},this.Ba=function(t){var n=S.getScene(),a=e.Ha();return a?a===(null==n?void 0:n.name)?null:a:null!=n&&n.isValid?t===ve.DASHBOARD_SCENE?ve.GAME_SCENE:t===n.name?null:t:t},this.Ga=(t=p(function(n){var a,i;return _ts_generator(this,function(_state){return a=n.sceneName,n.sceneData,(i=e.Ba(a))&&(ee.isSceneLoaded(i)||Ye.showLoadingFullScreen(i),e.Ya(l(l({},n),{},{sceneName:i}))),[2]})}),function(n){return t.apply(this,arguments)}),this.Ya=(t1=p(function(n){var a,r,i,s,c,d;return _ts_generator(this,function(_state){switch(_state.label){case 0:return a=n.sceneName,r=n.sceneData,[4,e.le.use(a)];case 1:i=_state.sent(),_state.label=2;case 2:return _state.trys.push([2,5,6,7]),e.dt("start",n),[4,e.ht(a,e.ft)];case 3:return s=_state.sent(),[4,e.Va(s)];case 4:return c=_state.sent(),e.qa(c,null!=r?r:{}),ee.markIsSceneLoaded(a),ce.emit(ue.SCENE_LOADED,{sceneName:a}),e.Ka(),e.ve(),e.Xa(a,r),[3,7];case 5:return d=_state.sent(),Kt.toError(d),e.ve(!1),[3,7];case 6:return i.release(),[7];case 7:return[2]}})}),function(n){return t1.apply(this,arguments)}),this.za=(t2=p(function(n){var a,r,s;return _ts_generator(this,function(_state){switch(_state.label){case 0:if((a=n.sceneName)===ve.DASHBOARD_SCENE)return[3,5];return[4,e.le.use(a)];case 1:r=_state.sent(),_state.label=2;case 2:return _state.trys.push([2,4,,5]),e.dt("preload",n),[4,e.ht(a,e.ft)];case 3:return _state.sent(),ee.markIsSceneLoaded(a),ce.emit(ue.SCENE_LOADED,{sceneName:a,isPreload:!0}),e.ve(),r.release(),[3,5];case 4:return s=_state.sent(),Kt.toError(s),e.ve(!1),r.release(),[3,5];case 5:return[2]}})}),function(n){return t2.apply(this,arguments)}),this.ht=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new Promise(function(a,r){var i=Ie.main;i?i.loadScene(t,null!=n?n:null,function(s,c){s?r(s):a(c)}):r(Error("Main bundle not found"))})},this.Va=function(t){return new Promise(function(n,a){S.runScene(t,void 0,function(r,i){if(r)return a(r);if(!i)throw Error("Scene not found");n(i)})})},this.dt=function(t,n){if(e.mark){var a=n.sceneName;e.mark.measure(e.l),e.mark.putAttr(e.l,"Cancel","false"),e.mark.putAttr(e.l,"Success","false"),e.mark.putMetric(e.l,a),e.mark.start(e.l)}},this.ve=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e.mark&&(e.mark.rmAttr(e.l,"File"),e.mark.putAttr(e.l,"Success",t?"true":"false"),e.mark.stop(e.l))},this.ft=function(t,n,a){e.mark&&e.mark.putAttr(e.l,"Last File","".concat(a.id," (").concat(a.ext,")"));var i=Math.floor(t/n*70+30);Hi.setLoadingProgress(i)},this.Ka=function(){e.ut||(ce.clear(ue.MARK_IS_TEST_SCENE),e.ut=!0)},this.Xa=function(t,n){var a;Ye.hideLoadingFullScreen(t),Ve.switchSceneTracking(),null==Fa||Fa.addMetadata({currentScene:t}),null==(a=e.lt)||a.call(e,{sceneName:t,sceneData:n}),ce.emit(ue.SCENE_LAUNCHED,{sceneName:t}),S.once(k.EVENT_AFTER_RENDER,function(){ce.emit(ue.SCENE_RENDERED,{sceneName:t})})},this.Ha=function(){var t;return null!=(t=Object.keys(e.ct)[0])?t:null},this.Ua=function(t){var n=t.sceneName;e.ct[n]=!0},this.onSwitchScene=function(t){e.lt=t},this.qa=function(t,n){if(n&&("data"in t||t.scene.attr({data:{}}),"data"in t)){var a=t.data||{};t.scene.attr({data:l(l({},a),n)})}}}return R(o,[{key:"init",value:function value(){this.m()}},{key:"mark",get:function get(){return zi.LoadResources?Bi:null}}]),o}();m._RF.pop(),m._RF.push({},"617b2SRAL5CyL75C998xBnx","ScreenManager",void 0);var Ia=Ludex,Z=Ia.Events,Xt=Ia.Utils,Vi=Xt.Object,Ma=Xt.Valid,qi=Xt.Time,Pa=codex,J=Pa.event,at=Pa.monitorError,Ki=function(){function o(){var t,t1,t2,t3,t4,e=this;_(this,o),this.o={},this.ee={},this.Wa=function(){J.on(Z.OPEN_SCREEN,e.Qa),J.on(Z.CLOSE_SCREEN,e.ja),J.on(Z.PRELOAD_SCREEN,e.Za),J.on(Z.PRELOAD_SCREENS,e.Ja),J.on(Z.SWITCH_SCENE,e.Fe),y.on("DEBUG_REQUEST_SCREEN_STATES",e.$a)},this.$a=function(){var t=e.o;y.emit("DEBUG_SCREEN_STATES",t)},this.Qa=function(t){e.openScreen(t.screenName,t.screenData)},this.ja=function(t){e.closeScreen(t.screenName,!0)},this.Za=function(t){var n=t.screenName;e.mt([n]);var a=e.o[n];(null==a?void 0:a.state)==="queued"&&e.Te(a)},this.Ja=function(){var t=S.getScene();e.er(t)&&(e.tr(t),e.nr())},this.Fe=function(){e.ar(),e.ee={}},this.ar=function(){for(var t in e.o){var n=e.o[t];void 0!==n&&(e.o[t]=e.rr(n))}},this.rr=function(t){return e.ie(t)?(t.screen.node.removeFromParent(),t.screen.node.destroy(),{state:"prefab",order:t.order,name:t.name,prefab:t.prefab,useCount:t.useCount}):e.ge(t)?l({},t):{state:"queued",order:t.order,name:t.name}},this.er=function(t){return!!t},this.tr=function(t){var n=e.ye();if(null!=n&&n.enabled){var a,r=n.screens,i=x(r);try{for(i.s();!(a=i.n()).done;){var s=a.value,c=lt[s.key];if(c){var u=e.o[c];e.o[c]=u?l(l({},u),{},{order:s.depth}):{state:"queued",order:s.depth,name:c}}}}catch(v){i.e(v)}finally{i.f()}var d=t.getComponentsInChildren("BaseScreen");Ma.isEmpty(d)||(d.map(function(v){return null==v?void 0:v.node.name}).join(", "),e.ir(d))}},this.ye=function(){var t,n=S.getScene();return null!=(t=null==n?void 0:n.getComponentInChildren("Screens"))?t:null},this.ir=function(t){for(var n=0;n<t.length;n++){var a,r=t[n];if(r){var i=r.node.name;if(e.Ee(i)){var s=e.o[i],c=null!=(a=null==s?void 0:s.order)?a:0;e.o[i]={state:"ready",order:c,screen:r,prefab:r.node,name:i,useCount:0}}}}e.Ie()},this.Ee=function(t){return Ma.isString(t)&&Vi.vals(lt).includes(t)},this.mt=function(t){var n=e.ye();if(null!=n&&n.isValid){var a,r=x(t);try{for(r.s();!(a=r.n()).done;){var i=a.value;e.Ee(i)&&void 0===e.o[i]&&(e.o[i]={state:"queued",order:0,name:i})}}catch(s){r.e(s)}finally{r.f()}}},this.Te=(t=p(function(n){var a;return _ts_generator(this,function(_state){switch(_state.label){case 0:return _state.trys.push([0,2,,3]),e.o[n.name]=l(l({},n),{},{state:"loading"}),J.emit(Z.LOADING_SCREEN,{screenName:n.name}),[4,ut.loadPrefabAsync("screens/".concat(n.name))];case 1:if(null===(a=_state.sent()))throw Error("ScreenManager.loadScreen: Failed to load prefab: ".concat(n.name));return e.o[n.name]=l(l({},n),{},{state:"prefab",prefab:a,useCount:0}),J.emit(Z.SCREEN_LOADED,{screenName:n.name}),e.or(n.name),[3,3];case 2:return _state.sent(),e.o[n.name]={state:"queued",order:n.order,name:n.name},[3,3];case 3:return[2]}})}),function(n){return t.apply(this,arguments)}),this.nr=function(){var t=e.ye();if(null!=t&&t.isValid&&null!=t&&t.autoPreload){var n,a=Object.values(e.o).sort(function(s,c){return s.order-c.order}),r=x(a);try{for(r.s();!(n=r.n()).done;){var i=n.value;"queued"===i.state&&e.Te(i)}}catch(s){r.e(s)}finally{r.f()}}},this.sr=(t1=p(function(n){var a,r,i;return _ts_generator(this,function(_state){if(null==(a=e.ye())||!a.isValid)throw Error("ScreenManager.getScreen: Invalid screen holder");if(e.ie(n))return[2,n.screen];if(!e.ge(n))throw Error("ScreenManager.getScreen: Invalid state ".concat(n.state," for ").concat(n.name));if(!_instanceof(n.prefab,Sn))throw Error("ScreenManager.getScreen: Invalid prefab ".concat(n.name));if((r=wn(n.prefab)).name=n.name,!(i=r.getComponent("BaseScreen")))throw Error("ScreenManager.getScreen: Invalid screen ".concat(n.name));return[2,(a.node.addChild(r),r.active=!1,e.o[n.name]=l(l({},n),{},{state:"ready",screen:i}),e.Ie(),i)]})}),function(n){return t1.apply(this,arguments)}),this.Ie=function(){var t=[];for(var n in e.o){var a=e.o[n];e.ie(a)&&a.screen.isValid&&t.push(a)}t.sort(function(c,u){return c.order-u.order});for(var r=0;r<t.length;r++){var i,s=t[r];null!=s&&null!=(i=s.screen)&&i.isValid&&s.screen.node.setSiblingIndex(r)}},this.openScreen=(t2=p(function(n,a){var r,i;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(!e.Ee(n)||void 0===(r=e.cr(n)))return[3,7];if(e.ge(r))return[3,2];return"queued"===r.state&&e.Te(r),[4,e.ur(n,a)];case 1:return[2,_state.sent()];case 2:return _state.trys.push([2,5,6,7]),dt.setBlockInput(!0),[4,e.sr(r)];case 3:if(null==(i=_state.sent())||!i.isValid)throw Error("ScreenManager.performScreenOpen: Invalid screen ".concat(n));return e.lr(n),[4,e.dr(i,n,a)];case 4:case 5:return _state.sent(),[3,7];case 6:return dt.setBlockInput(!1),[7];case 7:return[2]}})}),function(n,a){return t2.apply(this,arguments)}),this.ur=function(t,n){var a,r=null!=(a=e.ee[t])?a:[];return new Promise(function(i){var c,s=(c=p(function(){return _ts_generator(this,function(_state){switch(_state.label){case 0:return[4,e.openScreen(t,n)];case 1:return _state.sent(),i(),[2]}})}),function(){return c.apply(this,arguments)});e.ee[t]=[].concat($(r),[s])})},this.lr=function(t){var n=e.o[t];e.ge(n)&&(e.o[t]=l(l({},n),{},{useCount:n.useCount+1}))},this.dr=(t3=p(function(n,a,r){var i,s;return _ts_generator(this,function(_state){switch(_state.label){case 0:return i={screenName:a,screenData:r},J.emit(Z.OPENING_SCREEN,i),e.updateScreenState(a,"opening",{startTime:Date.now()}),[4,qi.sleepAsync(0)];case 1:return _state.sent(),(null==(s=e.o[a])?void 0:s.state)==="opening"&&(e.updateScreenState(a,"ready"),n.node.active=!0,n.open(r),e.pt(a),e.Ie()),[2]}})}),function(n,a,r){return t3.apply(this,arguments)}),this.closeScreen=(t4=p(function(n){var a,r,i,_arguments=arguments;return _ts_generator(this,function(_state){if(a=_arguments.length>1&&void 0!==_arguments[1]&&_arguments[1],e.Ee(n)&&void 0!==(r=e.o[n])){if("opening"===r.state){if(i=r.startTime,Date.now()-i<100)return[2,void e.updateScreenState(n,"prefab")];e.updateScreenState(n,"closing")}else if(!e.hr(r)&&"closing"!==r.state)return[2,void delete e.ee[n]];try{if(!e.ie(r)||!r.screen.isValid)return[2];r.screen.node.active&&(J.emit(Z.CLOSING_SCREEN,{screenName:n}),r.screen.close()),e.updateScreenState(n,"ready"),a&&e.pt(n,!1)}catch(unused){}}return[2]})}),function(n){return t4.apply(this,arguments)}),this.pt=function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Ve.trackCurrentPage(t,n),n?null==at||at.addMetadata({currentScreen:t}):null==at||at.removeMetadata("currentScreen")},this.closeAllScreens=function(){for(var t in e.o)e.closeScreen(t,!1)},this.cr=function(t){var n=e.o[t];return void 0===n?(e.mt([t]),e.o[t]):n},this.or=function(t){var n,a,r=null!=(n=e.ee[t])?n:[],i=x(r);try{for(i.s();!(a=i.n()).done;)(0,a.value)()}catch(s){i.e(s)}finally{i.f()}delete e.ee[t]},this.ie=function(t){return!!t&&("ready"===t.state||"opening"===t.state||"closing"===t.state)},this.ge=function(t){return!!t&&("prefab"===t.state||e.ie(t))},this.hr=function(t){return(null==t?void 0:t.state)==="ready"}}return R(o,[{key:"init",value:function value(){this.Wa()}},{key:"updateScreenState",value:function value(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=this.o[e];a&&(this.o[e]=l(l(l({},a),n),{},{state:t}))}}]),o}();m._RF.pop(),m._RF.push({},"9d892ZsSyxHSITF2VHJ1zpy","LudosSystem",void 0);var Wt,rt=Ludex,Ge=rt.Configs,Xi=Ge.Core,Wi=Ge.Ads,Qi=Ge.Match,ji=Ge.Player,Zi=Ge.GameEngine.HybridFileCache,P=rt.Events,Na=rt.Plugins.Analytics,le=(void 0===Na?{}:Na).Events,ka=rt.Utils,B=ka.Device,Ji=ka.Time,it=codex,Oa=it.context,N=it.event,ot=it.analytics,st=it.monitorError;new(R(function o(){var e=this;_(this,o),this.vt=null,this.Me=null,this.oe=null,this.fr=function(){N.catchUp(P.ANALYTICS_READY,function(){le&&ot.event(le.ENGINE_READY)})},this.mr=function(){e.gt=new Yi,e.pr=new Ki,e.vr=new Va,e.gr=new ja,e.A=new Gi,Wi.Enabled&&(e.vt=new Ha),Qi.Enabled&&(e.Me=new Ja),ji.Enabled&&(e.oe=new er)},this.yr=function(){var t,n,a;e.gt.init(),e.pr.init(),e.vr.init(),e.gr.init(),e.A.init(),null==(t=e.vt)||t.init(),null==(n=e.Me)||n.init(),null==(a=e.oe)||a.init()},this.m=function(){N.catchUp(P.CORE_BOOTING,e.Er),N.catchUp(P.CORE_STARTING,e.Sr),N.catchUp(P.CORE_READY,e.wr),q.listenLayoutChanges(),e.gt.onSwitchScene(e.Fe)},this.Er=function(){y.inited?e.yt():y.once(mt.EVENT_GAME_INITED,e.yt)},this.yt=function(){N.emit(P.REQUEST_CORE_START)},this.Sr=function(){var t,n;null==(t=e.oe)||t.setupDefaultGameData(),null==(n=e.Me)||n.setupDefaultMatchData()},this.wr=function(){var t;Zi.Enabled||N.emit(P.BUNDLE_READY),N.catchUp(P.BUNDLE_READY,e.Ar),null==(t=e.oe)||t.syncPlatformPlayerData(),le&&ot.event(le.LOAD_START),N.catchUp(P.BUNDLE_READY,e.br)},this.br=function(){N.catchUp(P.SCENE_LOADED,e._r),N.catchUp(P.SCENE_LAUNCHED,e.Rr),e.Cr()},this.Rr=p(function(){return _ts_generator(this,function(_state){switch(_state.label){case 0:if(!Xi.StartSDKAfterLoadGame)return[3,2];return[4,N.waitTo(P.SCENE_LOADED)];case 1:_state.sent(),_state.label=2;case 2:return[4,GameSDK.extra.waitSDKInitiatedAsync()];case 3:if(_state.sent(),!y.isPaused())return[3,5];return[4,e.Dr()];case 4:_state.sent(),_state.label=5;case 5:return e.xr(),[2]}})}),this.Dr=p(function(){return _ts_generator(this,function(_state){return[2,new Promise(function(t){y.once(mt.EVENT_RESUME,t)})]})}),this.Cr=function(){GameSDK.isGameSDK("Playable")?ee.switchScene(ve.PLAYABLE_SCENE):ee.switchScene(ve.BOOT_SCENE)},this._r=function(){GameSDK.isGameSDK("Playable")||("solo"===Oa.getSessionContextType()?ee.preloadDashboardScene():ee.preloadGameScene())},this.xr=p(function(){return _ts_generator(this,function(_state){switch(_state.label){case 0:return le&&ot.event(le.LOAD_COMPLETE),N.catchUp(P.PLAYER_INFO_LOADED,e.Lr),[4,N.waitTo(P.SCENE_RENDERED,1e3).catch(function(){})];case 1:return _state.sent(),[4,Ji.sleepAsync(100)];case 2:return _state.sent(),[4,e.Et()];case 3:return _state.sent(),[2]}})}),this.Fe=function(){Ye.preloadScreens()},this.Et=p(function(){var t,n,_arguments=arguments;return _ts_generator(this,function(_state){switch(_state.label){case 0:t=_arguments.length>0&&void 0!==_arguments[0]?_arguments[0]:0,_state.label=1;case 1:return _state.trys.push([1,3,,4]),[4,GameSDK.startGameAsync()];case 2:return _state.sent(),[3,4];case 3:return n=_state.sent(),t<=3?setTimeout(function(){e.Et(t+1)},1e3):null==st||st.sendException(_instanceof(n,Error)?n:Error(JSON.stringify(n))),[3,4];case 4:return[2]}})}),this.Lr=p(function(){var t,n;return _ts_generator(this,function(_state){switch(_state.label){case 0:le&&ot.event(le.APP_READY),_state.label=1;case 1:return _state.trys.push([1,3,4,5]),null==(t=e.oe)||t.requestConnectedPlayers(),sn.applyCustomFlows(),[4,Oa.processContextData()];case 2:return _state.sent(),[3,5];case 3:return _instanceof(n=_state.sent(),Error)&&(null==st||st.sendException(n)),[3,5];case 4:return N.emit(P.GAME_READY),e.St("begin"),window.addEventListener("beforeunload",function(){e.St("end")}),[7];case 5:return[2]}})}),this.Ar=function(){e.A.initLanguages(),e.A.initFrameCapture(),e.A.initDailyRewards(),e.A.initLeaderboards(),e.A.initDynamicAtlas(),e.A.initDynamicAssets(),e.A.initCanvasRecorder(),e.A.initPerformanceMonitor(),e.A.initAdaptivePerformance()},this.Fr=function(t){try{var n=B.isES5(),a=B.heapMemory(),r=B.pixelRatio(),i=B.audioState(),s=B.orientation(),c=B.gpuRenderer(),u=B.isSupportWebp();return{log_type:t,is_es5:n,pixel_ratio:r,sdk_platform:GameSDK.getPlatform(),screen_orientation:s,audio_state:i,heap_memory:a,support_webp:u,gpu_renderer:c,webgl_version:B.webglVersion(),max_texture_size:B.maxTextureSize(),hardware_concurrency:B.hardwareConcurrency()}}catch(unused){return null}},this.St=function(t){var n=e.Fr(t);n&&Ve.trackDeviceInfo(n)},this.fr(),this.mr(),this.yr(),this.m(),window.__sdkLoad.ensure(10)})),m._RF.pop(),m._RF.push({},"c7df3pBHqRChZTjXMfWIy6H","Optimized2DPipeline",void 0);var $i=pt.ccclass,eo=pt.executeInEditMode,Ua="default",no=Q.SceneFlags.UI|Q.SceneFlags.BLEND|Q.SceneFlags.OPAQUE|Q.SceneFlags.DRAW_INSTANCING,ao=function(){function o(){var e=this;_(this,o),this.D=new j.Color(0,0,0,1),this.se=new j.Viewport,this.Tr=new Q.LightInfo,this.Ir=function(t){return!(null==t||!t.scene||null==t||!t.window)},this.Mr=function(t,n,a){var r=t.viewport;e.se.left=r.x*n,e.se.top=r.y*a,e.se.width=r.z*n,e.se.height=r.w*a},this.Pr=function(t){var n=t.clearColor;e.D.x=n.x,e.D.y=n.y,e.D.z=n.z,e.D.w=n.w}}return R(o,[{key:"setup",value:function value(e,t){for(var n=0;n<e.length;n++){var a=e[n];if(this.Ir(a)){var r=a.window,i=Math.max(Math.floor(r.width),1),s=Math.max(Math.floor(r.height),1),c="Color".concat(r.renderWindowId);t.addRenderWindow(c,j.Format.RGBA8,i,s,r),this.Mr(a,i,s),this.Pr(a);var u=t.addRenderPass(i,s,Ua);u.setViewport(this.se);var d=a.clearFlag&j.ClearFlagBit.COLOR?j.LoadOp.CLEAR:j.LoadOp.LOAD;a.clearFlag&j.ClearFlagBit.COLOR&&(this.D.x=a.clearColor.x,this.D.y=a.clearColor.y,this.D.z=a.clearColor.z,this.D.w=a.clearColor.w),u.addRenderTarget(c,d,j.StoreOp.STORE,this.D),u.addQueue(Q.QueueHint.BLEND,Ua).addSceneOfCamera(a,this.Tr,no)}}}}]),o}();if(Q){var ro=new ao;Q.setCustomPipeline("Optimized2DPipeline",ro)}$i("Optimized2DPipeline")(Wt=eo(Wt=function(o){cn(t,o);var e=un(t);function t(){return _(this,t),e.apply(this,arguments)}return R(t,[{key:"start",value:function value(){}}]),t}(An))||Wt),m._RF.pop(),m._RF.push({},"a3a11eRcsNI5aahAZL2xA8X","ScreenEntry",void 0),m._RF.pop()}}});System.register("virtual:///prerequisite-imports/systems",["chunks:///systems.js"],function(p,V){return{setters:[function(_){var L={};for(var q in _)"default"!==q&&"__esModule"!==q&&(L[q]=_[q]);p(L)}],execute:function execute(){}}});