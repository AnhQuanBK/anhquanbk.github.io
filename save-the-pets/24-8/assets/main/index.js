function _instanceof(n,i){if(null!=i&&"undefined"!=typeof Symbol&&i[Symbol.hasInstance])return!!i[Symbol.hasInstance](n);return n instanceof i}function _ts_generator(n,i){var a,o,y,f,m={label:0,sent:function(){if(1&y[0])throw y[1];return y[1]},trys:[],ops:[]};return f={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(f[Symbol.iterator]=function(){return this}),f;function verb(n){return function(i){return step([n,i])}}function step(f){if(a)throw new TypeError("Generator is already executing.");while(m)try{if(a=1,o&&(y=2&f[0]?o.return:f[0]?o.throw||((y=o.return)&&y.call(o),0):o.next)&&!(y=y.call(o,f[1])).done)return y;if(o=0,y)f=[2&f[0],y.value];switch(f[0]){case 0:case 1:y=f;break;case 4:return m.label++,{value:f[1],done:false};case 5:m.label++,o=f[1],f=[0];continue;case 7:f=m.ops.pop(),m.trys.pop();continue;default:if(!(y=(y=m.trys).length>0&&y[y.length-1])&&(6===f[0]||2===f[0])){m=0;continue}if(3===f[0]&&(!y||f[1]>y[0]&&f[1]<y[3])){m.label=f[1];break}if(6===f[0]&&m.label<y[1]){m.label=y[1],y=f;break}if(y&&m.label<y[2]){m.label=y[2],m.ops.push(f);break}if(y[2])m.ops.pop();m.trys.pop();continue}f=i.call(n,m)}catch(n){f=[6,n],o=0}finally{a=y=0}if(5&f[0])throw f[1];return{value:f[0]?f[1]:void 0,done:true}}}function _ts_values(n){var i="function"==typeof Symbol&&Symbol.iterator,a=i&&n[i],o=0;if(a)return a.call(n);if(n&&"number"==typeof n.length)return{next:function(){if(n&&o>=n.length)n=void 0;return{value:n&&n[o++],done:!n}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")}System.register("chunks:///main.js",["./rollupPluginModLoBabelHelpers-60801af6.js","cc","./GeneralUtils-58d1f2c9.js"],function(){var n,i,a,o,y,f,m,g,b,k,C,w,E,T,_,A,R,P,B,L,D,O,I,N,F,G,M,z,x,U,H,j,V,W,q,K,Y,J,Z,X,Q,$,ee,et,en,ei,ea,eo,er,es,el,eu,ec,eh,ep,ed,ey,ev,ef,em,eg,eb,eS,ek,eC,ew,eE,eT,e_,eA,eR,eP,eB,eL,eD,eO,eI,eN,eF,eG,eM,ez,ex,eU,eH,ej,eV,eW,eq,eK,eY,eJ,eZ,eX,eQ,e$,e0,e1,e2,e3,e4,e5,e6,e7,e9,e8,te,tt,tn,ti,ta,to;return{setters:[function(A){n=A.g,i=A.a,a=A.b,o=A.c,y=A.f,f=A.m,m=A.h,g=A._,b=A.d,k=A.e,C=A.i,w=A.n,E=A.o,T=A.l,_=A.j},function(n){A=n.cclegacy,R=n.isCCObject,P=n._decorator,B=n.Animation,L=n.CCString,D=n.CCInteger,O=n.Component,I=n.AudioSource,N=n.director,F=n.Sprite,G=n.game,M=n.Button,z=n.CCBoolean,x=n.EventTouch,U=n.Vec3,H=n.Input,j=n.Node,V=n.UIOpacity,W=n.Graphics,q=n.Color,K=n.Label,Y=n.Director,J=n.sys,Z=n.ccenum,X=n.Enum,Q=n.UITransform,$=n.CCFloat,ee=n.Widget,et=n.Layers,en=n.ERigidBody2DType,ei=n.RigidBody2D,ea=n.sp,eo=n.Vec2,er=n.Collider2D,es=n.Contact2DType,el=n.math,eu=n.SpriteFrame,ec=n.HingeJoint2D,eh=n.RelativeJoint2D,ep=n.BoxCollider2D,ed=n.Prefab,ey=n.instantiate,ev=n.CircleCollider2D,ef=n.Mask,em=n.PolygonCollider2D,eg=n.NodePool,eb=n.Tween,eS=n.tween,ek=n.find,eC=n.PhysicsSystem2D,ew=n.ERaycast2DType,eE=n.Intersection2D,eT=n.JsonAsset,e_=n.ProgressBar,eA=n.EPhysics2DDrawFlags,eR=n.DistanceJoint2D,eP=n.repeat,eB=n.lerp,eL=n.approx,eD=n.EPSILON,eO=n.RealCurve,eI=n.Gradient,eN=n.bits,eF=n.random,eG=n.randomRange,eM=n.randomRangeInt,ez=n.js,ex=n.misc,eU=n.MeshRenderData,eH=n.pseudoRandom,ej=n.toRadian,eV=n.CCClass,eW=n.ParticleSystem2D,eq=n.UIRenderer,eK=n.Material,eY=n.View,eJ=n.Canvas},function(n){eZ=n.R,eX=n.G,eQ=n.a,e$=n.C,e0=n.k,e1=n.l,e2=n.m,e3=n.g,e4=n.n,e5=n.c,e6=n.E,e7=n.o,e9=n.f,e8=n.p,te=n.A,tt=n.h,tn=n.S,ti=n.q,ta=n.i,to=n.r}],execute:function(){function at(n,i,a){var o=a.value;a.value=function(){if(this.enabledInHierarchy){for(var n=arguments.length,a=new Array(n),y=0;y<n;y++)a[y]=arguments[y];return null==o?void 0:o.apply(this,a)}console.debug("Skipping method call ".concat(String(i)," because component ").concat(this.constructor.name," is not enabled in hierarchy"))}}function ot(i,a,o){var y=o.value,f=function(){var i=n(function(){var n,i,o;var f=arguments;return _ts_generator(this,function(m){switch(m.label){case 0:if(!this.enabledInHierarchy)return[3,2];for(i=new Array(n=f.length),o=0;o<n;o++)i[o]=f[o];return[4,null==y?void 0:y.apply(this,i)];case 1:return[2,m.sent()];case 2:return[2,(console.debug("Skipping method call ".concat(String(a)," because component ").concat(this.constructor.name," is not enabled in hierarchy")),Promise.resolve())]}})});return function(){return i.apply(this,arguments)}}();o.value=f}A._RF.push({},"147a4TjOC9PMpdhlBiKEn54","onlyRunInLifeCycle",void 0),A._RF.pop(),A._RF.push({},"6944aqu6zZOGIj+df3KBDrm","onlyRunInLifeCycleAsync",void 0),A._RF.pop(),A._RF.push({},"99384AdWHlKDIyVvCAqSwJE","index",void 0),A._RF.pop(),A._RF.push({},"09236E0KzVAqotP4Yn9R+4m","MissingPropertiesError",void 0);var tr=function(n){i(r,n);var f=a(r);function r(n,i){var a;return o(this,r),(a=f.call(this,"".concat(n," is missing these required properties: [").concat(i.map(function(n){return n.propertyName}).join(", "),"]"))).className=n,a.errors=i,a}return y(r)}(f(Error));A._RF.pop(),A._RF.push({},"4ce5394i3hCZoi5cZm0Vn2l","MissingPropertyError",void 0);var ts=function(n){i(r,n);var f=a(r);function r(n,i){var a;return o(this,r),(a=f.call(this,"".concat(n," is missing the required property: <").concat(i,">"))).className=n,a.propertyName=i,a}return y(r)}(f(Error));A._RF.pop(),A._RF.push({},"a2990W72mRAYaItrPHe4H5V","required",void 0);var tl=GameCore.Utils,tu=tl.String,tc=tl.Valid,th=globalThis.game.monitorError,tp="_compUtils_ReqPropsMap";function dt(n){return null===n}function yt(n){return void 0===n}function vt(n){return dt(n)||yt(n)}function ft(n){if("function"==typeof n)return n;switch(n){case"null-check":return dt;case"undefined-check":return yt;default:return vt}}function mt(n){return function(i,a){if("function"==typeof i)throw new Error("The required decorator can only be applied to non-static class properties.");var o=i.constructor.name,y="".concat("_compUtils_ReqPropsMethod","_").concat(tu.capitalize(a));if(void 0!==i[y])throw new Error("The required decorator found that property name ".concat(y," already exists. The reserved method name ").concat(y," is used already or the decorator was applied multiple times."));i[y]=function(i){if(n(this[a]))throw new ts(i,a)},void 0===i[tp]&&(i[tp]={}),void 0===i[tp][o]&&(i[tp][o]=[]),i[tp][o].push(y)}}function gt(n,i){if("string"!=typeof i)return mt(ft(n));mt(ft())(n,i)}A._RF.pop(),A._RF.push({},"75e1e0Ei7ZOOr/FzyprYnVJ","index",void 0),A._RF.pop(),A._RF.push({},"bfa55FbayJE75F0wBdnknTr","ComponentUtils",void 0);var td,ty,tv,tf,tm,tg,tb,tS,tk=GameCore.Utils,tC=tk.Array,tw=tk.Object,tE=tk.Valid,tT=["cc.Mask","cc.Label","cc.Canvas","cc.Camera","cc.Layout","cc.Button","cc.Sprite","cc.Widget","cc.Renderer","cc.Animation","cc.UIOpacity"],t_=function(){function e(){o(this,e),this.validComponentCalled={}}return y(e,[{key:"validateRequiredComponents",value:function(n){var i,a=n.name,o=n.constructor,y=this.getRequiredComponentNames(o),f=m(y);try{for(f.s();!(i=f.n()).done;){var g=i.value;if(!n.getComponent(g))throw new Error("".concat(a,": Missing required ").concat(g," component"))}}catch(n){f.e(n)}finally{f.f()}}},{key:"validateRequiredProperties",value:function(n){var i,a=n.name,o=n.constructor,y=this.getRequiredPropNames(o),f=m(y);try{for(f.s();!(i=f.n()).done;){var g=i.value;if(!tw.hasOwn(n,g))throw new Error("".concat(a,": Missing required ").concat(g," property"));var b=this.getProperty(g,n);if(!R(b))throw new Error("".concat(a,": ").concat(g," property is not a cc object"))}}catch(n){f.e(n)}finally{f.f()}}},{key:"validateCustomProperties",value:function(n){var i,a=n.name,o=this.getCustomPropNames(n),y=m(o);try{for(y.s();!(i=y.n()).done;){var f=i.value;if(!tw.hasOwn(n,f))throw new Error("".concat(a,": Missing required ").concat(f," property"));var g=this.getProperty(f,n);if(!R(g))throw new Error("".concat(a,": ").concat(f," property is not a cc object"))}}catch(n){y.e(n)}finally{y.f()}}},{key:"getProperty",value:function(n,i){var a;if(tw.hasOwn(i,n))return(null!==(a=Object.getOwnPropertyDescriptor(i,n))&&void 0!==a?a:{}).value}},{key:"getProps",value:function(n){if(!tw.hasOwn(n,"__props__"))return[];var i=n.__props__;return Array.isArray(i)?i:[]}},{key:"getRequiredPropNames",value:function(n){return this.getProps(n).filter(function(i){return"node"!==i&&!!tw.hasOwn(n,i)&&!!R(n[i])&&!i.startsWith("_")})}},{key:"getBaseComponentName",value:function(n){for(var i=0;i<tT.length;i++){var a=tT[i];if(a.indexOf(n)>=0)return a}return n}},{key:"getRequiredComponentNames",value:function(n){var i=this;if(!tw.hasOwn(n,"_requireComponent"))return[];var a=n._requireComponent;return Array.isArray(a)?a.map(function(n){return i.getBaseComponentName(n)}):[]}},{key:"getCustomPropNames",value:function(n){var i=this,a=Object.keys(n),o=this.getProps(n.constructor);return tC.difference(a,o).filter(function(n){return n.indexOf("_")<0}).filter(function(a){if(!tw.hasOwn(n,a))return!1;var o=i.getProperty(a,n);return!(!tE.isObject(o)||!R(o))})}}],[{key:"inst",get:function(){return this._instance||(this._instance=new e),this._instance}},{key:"required",value:function(n,i){return"string"==typeof i?gt(n,i):gt(n)}},{key:"validateRequiredProperties",value:function(n,i){!function(n,i){var a,o=i?i.name:n.constructor.name,y=i?i.prototype[tp]:n.constructor.prototype[tp],f=null!==(a=null==y?void 0:y[o])&&void 0!==a?a:[],m=[];for(var g in f)if("function"==typeof n[g])try{n[g](o)}catch(n){if(!_instanceof(n,ts))throw n;m.push(n)}if(0!==m.length){var b=new tr(o,m);if(tc.isDebugger())throw b;console.error(b),null==th||th.sendException(b)}}(n,i)}},{key:"lazyValidateProperties",value:function(n,i){var a=!(arguments.length>1&&void 0!==i)||i;if(a){var o=n.constructor.name;if(!this.inst.validComponentCalled[o])try{this.inst.validateRequiredComponents(n),this.inst.validateRequiredProperties(n),this.inst.validateCustomProperties(n)}catch(i){n.enabled=!1,console.error(i)}finally{this.inst.validComponentCalled[o]=!0}}}}]),e}();t_.onlyRunInLifeCycle=function(){return at.apply(void 0,arguments)},t_.onlyRunInLifeCycleAsync=function(){return ot.apply(void 0,arguments)},A._RF.pop(),A._RF.push({},"60ac3vor0dMT5bXi8D3VSJN","BubbleAnimation",void 0);var tA=P.ccclass,tR=P.property,tP=(td=tA("BubbleAnimation"),ty=tR(B),tv=tR(L),tf=tR(D),td((tg=g((tm=function(n){i(r,n);var f=a(r);function r(){var n;o(this,r);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=f.call.apply(f,[this].concat(a)),b(n,"animation",tg,k(n)),b(n,"clipName",tb,k(n)),b(n,"repeat",tS,k(n)),n.currentRepeat=-1,n}return y(r,[{key:"__preload",value:function(){this.animation=this.getComponent(B),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){t_.lazyValidateProperties(this)}},{key:"play",value:function(){var n=this;this.animation&&(this.animation.clips.find(function(i){return(null==i?void 0:i.name)===n.clipName})?(this.currentRepeat=-1,this.animation.play(this.clipName)):console.warn("BubbleAnimation: Animation component must have ".concat(this.clipName," clip")))}},{key:"onBubbleAnimationLoop",value:function(){this.animation&&-1!==this.repeat&&(this.currentRepeat++,this.currentRepeat>this.repeat&&this.animation.stop())}}]),r}(O)).prototype,"animation",[ty],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),tb=g(tm.prototype,"clipName",[tv],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"Bubble"}}),tS=g(tm.prototype,"repeat",[tf],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return -1}}),tm))||tm);A._RF.pop(),A._RF.push({},"cc0a5OvhdRCMZRZuRscaz+7","AudioPlayer",void 0);var tB,tL,tD=function(n){i(r,n);var f=a(r);function r(n,i){var a;return o(this,r),(a=f.call(this,n)).audioSource=i,a}return y(r,[{key:"play",value:function(n){if(n){var i=n.volume,a=n.loop;this.audioSource.volume=void 0===i?1:i,this.audioSource.loop=void 0!==a&&a}this.audioSource.play()}},{key:"pause",value:function(){this.audioSource.pause()}},{key:"resume",value:function(){this.audioSource.state===I.AudioState.PAUSED&&this.audioSource.play()}},{key:"stop",value:function(){this.audioSource.stop()}},{key:"setVolume",value:function(n){this.audioSource.volume=n}},{key:"getVolume",value:function(){return this.audioSource.volume}},{key:"getAudioSource",value:function(){return this.audioSource}}]),r}(GameCore.Plugins.Audio.BaseAudioPlayer);A._RF.pop(),A._RF.push({},"8b5ecHv/+BJiorK1kiVbTcf","AudioChannel",void 0);var tO,tI,tN,tF,tG=GameCore,tM=tG.Plugins.Audio.BaseChannelManager,tz=tG.Utils,tx=tz.Array,tU=(tB=tz.Decorator.tryCatch(),g((tL=function(f){i(l,f);var m,g=a(l);function l(n,i){var a;return o(this,l),(a=g.call(this,i)).allowMultipleTracking={},a.handleLoadedAudio=function(n,i){var o=a.node.addComponent(I);return o.clip=i,o.playOnAwake=!1,new tD(n,o)},a.node=n,a}return y(l,[{key:"playing",value:function(n){var i,a=null===(i=this.getAudioClip(n))||void 0===i?void 0:i.audioPlayer;return!!(a&&_instanceof(a,tD))&&a.getAudioSource().state===I.AudioState.PLAYING}},{key:"onLoadAudio",value:(m=n(function(n,i){var a;return _ts_generator(this,function(i){switch(i.label){case 0:return[4,eZ.loadAudioAsync(n)];case 1:return[2,(a=i.sent())&&this.node.isValid?this.handleLoadedAudio(n,a):null]}})}),function(n,i){return m.apply(this,arguments)})},{key:"playWithRealConfig",value:function(n,i){if(this.isCanPlay(i)){if(i){var a=i.volume,o=i.allowMultiple;if(i.volume=this.getVolume()*(void 0===a?1:a),void 0!==o&&o){var y=n.getAudioSource().clip;if(!y)return;return void this.requestDuplicateAudioPlayer(n.getKey(),y,i).play(i)}}n.play(i)}}},{key:"isCanPlay",value:function(n){var i=this;if(n){var a=n.checkList;if((void 0===a?[]:a).some(function(n){var a=i.getAudioClip(n);if(a){var o=a.audioPlayer;if(o&&_instanceof(o,tD))return o.getAudioSource().state===I.AudioState.PLAYING}return!1}))return!1}return!0}},{key:"requestDuplicateAudioPlayer",value:function(n,i,a){var o=this.getDuplicateAudioFromPool(n);if(o){if(a){var y=o.key,f=a.volume;this.setAudioClip(y,{volume:void 0===f?1:f})}return o.audioPlayer}var m=this.allowMultipleTracking[n];if(!m)throw new Error("Allow multiple tracking is not found");var g="".concat(n,"_").concat(m.currentPostFix),b=this.handleLoadedAudio(g,i);return m.list.push({audioPlayer:b,key:g}),m.currentPostFix+=1,this.setAudioClip(g,{audioPlayer:b,volume:1}),b}},{key:"getDuplicateAudioFromPool",value:function(n){if(this.allowMultipleTracking[n]){var i=this.allowMultipleTracking[n].list,a=tx.search(i,function(n){return n.audioPlayer.getAudioSource().state!==I.AudioState.PLAYING});if(a)return a}else this.allowMultipleTracking[n]={currentPostFix:1,list:[]};return null}}]),l}(tM)).prototype,"onLoadAudio",[tB],Object.getOwnPropertyDescriptor(tL.prototype,"onLoadAudio"),tL.prototype),tL);A._RF.pop(),A._RF.push({},"1a025mmN7BL7r5cF6gWR4b/","Music",void 0);var tH,tj,tV,tW,tq=P.ccclass,tK=P.property,tY=globalThis.game,tJ=tY.audio,tZ=tY.player,tX=(tO=tq("Music"),tI=tK(L),tO((tF=g((tN=function(n){i(r,n);var f=a(r);function r(){var n;o(this,r);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=f.call.apply(f,[this].concat(a)),b(n,"channelId",tF,k(n)),n.channel=null,n}return y(r,[{key:"__preload",value:function(){this.makePersistent(),this.channel=new tU(this.node,this.channelId),tJ.addChannel(this.channel)}},{key:"makePersistent",value:function(){N.addPersistRootNode(this.node)}},{key:"playing",value:function(n){var i,a;return null!==(i=null===(a=this.channel)||void 0===a?void 0:a.playing(n))&&void 0!==i&&i}},{key:"play",value:function(n,i){if(this.isMusicEnable()){var a=null!=i?i:{};a.loop||(a.loop=!0),tJ.play(n,a,this.channelId)}}},{key:"isMusicEnable",value:function(){return!!tZ.getPlayerSetting("music")}},{key:"setVolume",value:function(n){tJ.setVolume(n,this.channelId)}},{key:"getVolume",value:function(){return tJ.getVolume(this.channelId)}},{key:"pause",value:function(n){tJ.pause(n,this.channelId)}},{key:"resume",value:function(n){this.isMusicEnable()&&tJ.resume(n,this.channelId)}},{key:"stop",value:function(n){tJ.stop(n,this.channelId)}},{key:"mute",value:function(n){n?tJ.mute(this.channelId):tJ.unmute(this.channelId)}}]),r}(O)).prototype,"channelId",[tI],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"global_music"}}),tN))||tN);A._RF.pop(),A._RF.push({},"1299a7X1XNNEKxSKMV6E5jQ","Sound",void 0);var tQ,t$,t0,t1,t2=P.ccclass,t3=P.property,t4=globalThis.game,t5=t4.audio,t6=t4.player,t7=(tH=t2("Sound"),tj=t3(L),tH((tW=g((tV=function(n){i(r,n);var f=a(r);function r(){var n;o(this,r);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=f.call.apply(f,[this].concat(a)),b(n,"channelId",tW,k(n)),n.channel=null,n}return y(r,[{key:"__preload",value:function(){""===this.channelId&&(this.channelId=this.node.uuid),this.channel=new tU(this.node,this.channelId),t5.addChannel(this.channel)}},{key:"onLoad",value:function(){}},{key:"makePersistent",value:function(){N.addPersistRootNode(this.node)}},{key:"removePersistent",value:function(){N.removePersistRootNode(this.node)}},{key:"play",value:function(n,i){this.isSoundEnable()&&t5.play(n,i,this.channelId)}},{key:"isSoundEnable",value:function(){return!!t6.getPlayerSetting("sound")}},{key:"setVolume",value:function(n){t5.setVolume(n,this.channelId)}},{key:"pause",value:function(n){t5.pause(n,this.channelId)}},{key:"resume",value:function(n){this.isSoundEnable()&&t5.resume(n,this.channelId)}},{key:"stop",value:function(n){t5.stop(n,this.channelId)}},{key:"stopAll",value:function(){t5.stopAll(this.channelId)}},{key:"mute",value:function(n){n?t5.mute(this.channelId):t5.unmute(this.channelId)}}]),r}(O)).prototype,"channelId",[tj],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),tV))||tV);A._RF.pop(),A._RF.push({},"ca427NpeqpC3bUoGTd9I/BM","Background",void 0);var t9=P.ccclass,t8=eQ.Layout;tQ=t9("Background"),t$=t_.required(),tQ((t1=g((t0=function(n){i(r,n);var f=a(r);function r(){var n;o(this,r);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=f.call.apply(f,[this].concat(a)),b(n,"sprite",t1,k(n)),n.handleSpriteTypeWhenLayoutChanged=function(i){i===t8.Landscape?n.setBackgroundType(F.Type.TILED):n.setBackgroundType(F.Type.SIMPLE)},n}return y(r,[{key:"__preload",value:function(){this.sprite=this.getComponent(F),t_.validateRequiredProperties(this),this.listenGameEvents()}},{key:"listenGameEvents",value:function(){G.on(eX.LAYOUT_CHANGED,this.handleSpriteTypeWhenLayoutChanged,this)}},{key:"setBackgroundType",value:function(n){this.sprite&&(this.sprite.type=n)}}]),r}(O)).prototype,"sprite",[t$],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),t0)),A._RF.pop(),A._RF.push({},"7ddc4vU74pB/LdHrUupDA/G","BlockLines",void 0);var ne,nt,nn,ni,na,no,nr,ns,nl,nu,nc,nh,np,nd,ny,nv,nf,nm=P.ccclass,ng=eQ.Layout;nm("BlockLines")(function(n){i(r,n);var f=a(r);function r(){var n;o(this,r);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return(n=f.call.apply(f,[this].concat(a))).handleSpriteTypeWhenLayoutChanged=function(i){i===ng.Landscape?n.setActiveBlockLines(!0):n.setActiveBlockLines(!1)},n}return y(r,[{key:"__preload",value:function(){this.componentSprites=this.getComponentsInChildren(F),this.validateRequiredComponents(),this.listenGameEvents(),this.handleBlockLinesOnStart()}},{key:"validateRequiredComponents",value:function(){t_.lazyValidateProperties(this)}},{key:"handleBlockLinesOnStart",value:function(){var n=this.getScreenRatio()>750/1366;this.setActiveBlockLines(n)}},{key:"listenGameEvents",value:function(){G.on(eX.LAYOUT_CHANGED,this.handleSpriteTypeWhenLayoutChanged)}},{key:"setActiveBlockLines",value:function(n){var i=this;this.componentSprites&&this.componentSprites.forEach(function(a){a.node!==i.node&&(a.node.active=n)})}},{key:"getScreenRatio",value:function(){return e$.getScreenWidthCss()/e$.getScreenHeightCss()}}]),r}(O)),A._RF.pop(),A._RF.push({},"4b299Dv1kVGcqQmJC9yBPAV","ButtonReleased",void 0);var nb,nS,nk,nC,nw=P.ccclass,nE=P.requireComponent,nT=P.property,n_=P.disallowMultiple,nA=P.executionOrder,nR=globalThis.game.analytics;ne=nw("ButtonReleased"),nt=nE([B,M]),nn=nA(120),ni=nT(L),na=nT(L),no=nT(z),nr=nT({visible:function(){return this.useSound},type:e0}),ns=nT({tooltip:"Add a delay after click to prevent spamming (not apply for cancel click)"}),nl=nT({visible:function(){return this.disableSpamClick},tooltip:"Delay time in seconds"}),ne(nu=n_(nu=nt(nu=nn((nh=g((nc=function(n){i(s,n);var f=a(s);function s(){var n;o(this,s);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=f.call.apply(f,[this].concat(a)),b(n,"downClipName",nh,k(n)),b(n,"upClipName",np,k(n)),b(n,"useSound",nd,k(n)),b(n,"soundKey",ny,k(n)),b(n,"disableSpamClick",nv,k(n)),b(n,"disableSpamDelay",nf,k(n)),n.currentClickBoundingBox=null,n.hasDown=!1,n.hasUp=!1,n.onTouchStart=function(i){if(n.buttonComponent.interactable&&!n.hasDown&&(n.currentClickBoundingBox=e$.getBoundingBoxToWorld(n.node),n.hasDown=!0,n.runAnimation(n.downClipName),n.useSound&&n.soundKey)){var a=e1[n.soundKey];if(!a)return;e2.playSound(a)}},n.onTouchEnd=function(i){n.buttonComponent.interactable&&n.hasDown&&(n.hasUp||n.handleUp(i))},n.onTouchCancel=function(i){var a,o;if(n.buttonComponent.interactable&&n.hasDown&&!n.hasUp){var y=i.getUILocation(),f=null!==(a=null===(o=n.currentClickBoundingBox)||void 0===o?void 0:o.contains(y))&&void 0!==a&&a;_instanceof(i,x)&&f?n.handleUp(i):(n.hasUp=!0,n.runAnimation(n.upClipName),n.animationComponent.once(B.EventType.FINISHED,function(){n.handleResetButtonState()}))}},n.handleResetButtonState=function(){var i;if(n.hasDown=!1,n.hasUp=!1,n.buttonComponent){var a=n.buttonComponent.node.scale.x,o=n.buttonComponent.node.scale.z;null===(i=n.buttonComponent)||void 0===i||i.node.setScale(new U(a,1,o))}},n}return y(s,[{key:"__preload",value:function(){this.buttonComponent=this.getComponent(M),this.animationComponent=this.getComponent(B),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){t_.lazyValidateProperties(this)}},{key:"onEnable",value:function(){this.animationComponent.clips.length<2?console.warn("ButtonAnimAddition: Animation component must have 2 clips in ".concat(this.node.name)):(this.node.off(H.EventType.TOUCH_END,this.buttonComponent._onTouchEnded,this.buttonComponent),this.node.on(j.EventType.TOUCH_START,this.onTouchStart),this.node.on(j.EventType.TOUCH_END,this.onTouchEnd),this.node.on(j.EventType.TOUCH_CANCEL,this.onTouchCancel))}},{key:"onDisable",value:function(){this.node.off(j.EventType.TOUCH_START,this.onTouchStart),this.node.off(j.EventType.TOUCH_END,this.onTouchEnd),this.node.off(j.EventType.TOUCH_CANCEL,this.onTouchCancel),this.unschedule(this.handleResetButtonState),this.handleResetButtonState()}},{key:"handleUp",value:function(n){var i=this;this.hasUp=!0,this.runAnimation(this.upClipName),this.animationComponent.once(B.EventType.FINISHED,function(){if(i.disableSpamClick?i.scheduleOnce(i.handleResetButtonState,i.disableSpamDelay):i.handleResetButtonState(),!i.buttonComponent||i.buttonComponent.interactable){nR.event(GameCore.Plugins.Analytics.Events.BUTTON_CLICK,{button_name:i.node.name,screen_name:e3.getCurrentPage()});var a=i.buttonComponent.clickEvents;if(a){var o,y=m(a);try{for(y.s();!(o=y.n()).done;){var f=o.value;f.emit([n,f.customEventData])}}catch(n){y.e(n)}finally{y.f()}}}})}},{key:"runAnimation",value:function(n){if(!this.isAnimationExist(n))throw new Error("".concat(this.node.name,": Animation component must have ").concat(n," clip"));this.animationComponent.play(n)}},{key:"isAnimationExist",value:function(n){return this.animationComponent.clips.some(function(i){return!(!i||i.name!==n)})}}]),s}(O)).prototype,"downClipName",[ni],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"ButtonDown"}}),np=g(nc.prototype,"upClipName",[na],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"ButtonUp"}}),nd=g(nc.prototype,"useSound",[no],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),ny=g(nc.prototype,"soundKey",[nr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e0[e4.BUTTON_CLICK]}}),nv=g(nc.prototype,"disableSpamClick",[ns],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),nf=g(nc.prototype,"disableSpamDelay",[nl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return .5}}),nu=nc))||nu)||nu)||nu),A._RF.pop(),A._RF.push({},"0e570DdAIZPKY6DNtNerFmX","OpacityToggler",void 0);var nP,nB,nL=P.ccclass,nD=P.requireComponent,nO=P.property,nI=nL("OpacityToggler")(nb=nD([V])((nk=g((nS=function(n){i(r,n);var f=a(r);function r(){var n;o(this,r);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=f.call.apply(f,[this].concat(a)),b(n,"activeValue",nk,k(n)),b(n,"inActiveValue",nC,k(n)),n}return y(r,[{key:"__preload",value:function(){this.opacityComponent=this.getComponent(V),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){t_.lazyValidateProperties(this)}},{key:"changeState",value:function(n){var i=arguments.length>0&&void 0!==n&&n;this.opacityComponent.opacity=i?this.activeValue:this.inActiveValue}}]),r}(O)).prototype,"activeValue",[nO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 255}}),nC=g(nS.prototype,"inActiveValue",[nO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 128}}),nb=nS))||nb)||nb;A._RF.pop(),A._RF.push({},"7ef37Q3PZpKYaeik5JzGwNy","DebugResolution",void 0);var nN=P.ccclass,nF=P.property,nG=P.requireComponent,nM=P.disallowMultiple,nz=P.executeInEditMode,nx=eQ.DesignSize,nU=nx.Portrait,nH=nx.Landscape;nN("DebugResolution")(nP=nM(nP=nG([W])(nP=nz(!0)(((nB=function(n){i(r,n);var f=a(r);function r(){var n;o(this,r);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return(n=f.call.apply(f,[this].concat(a))).handleLayoutChange=function(){var i;null===(i=n.graphics)||void 0===i||i.clear(),n.start()},n}return y(r,[{key:"drawPortrait",get:function(){return r._drawPortrait},set:function(n){n!==r._drawPortrait&&(n?this.drawPortraitResolution():this.graphics.clear(),r._drawPortrait=n,r._drawLandscape&&this.drawLandscapeResolution())}},{key:"drawLandscape",get:function(){return r._drawLandscape},set:function(n){n!==r._drawLandscape&&(n?this.drawLandscapeResolution():this.graphics.clear(),r._drawLandscape=n,r._drawPortrait&&this.drawPortraitResolution())}},{key:"__preload",value:function(){this.graphics=this.getComponent(W),this.validateRequiredComponents(),this.listenGameEvents()}},{key:"validateRequiredComponents",value:function(){t_.lazyValidateProperties(this)}},{key:"listenGameEvents",value:function(){G.on(eX.LAYOUT_CHANGED,this.handleLayoutChange)}},{key:"start",value:function(){this.drawPortrait&&this.drawPortraitResolution(),this.drawLandscape&&this.drawLandscapeResolution()}},{key:"drawPortraitResolution",value:function(){var n=this.graphics;if(n){var i=nU.WIDTH,a=nU.HEIGHT;n.strokeColor=q.GREEN,n.rect(-i/2,-a/2,i,a),n.stroke()}}},{key:"drawLandscapeResolution",value:function(){var n=this.graphics;if(n){var i=nH.WIDTH,a=nH.HEIGHT;n.strokeColor=q.CYAN,n.rect(-i/2,-a/2,i,a),n.stroke()}}}]),r}(O))._drawPortrait=!0,nB._drawLandscape=!0,g(nB.prototype,"drawPortrait",[nF],Object.getOwnPropertyDescriptor(nB.prototype,"drawPortrait"),nB.prototype),g(nB.prototype,"drawLandscape",[nF],Object.getOwnPropertyDescriptor(nB.prototype,"drawLandscape"),nB.prototype),nP=nB))||nP)||nP)||nP),A._RF.pop(),A._RF.push({},"0405b+DQy1IALb/j8jx5Lpc","PerfCounter",void 0);var nj,nV,nW,nq,nK,nY,nJ,nZ,nX,nQ,n$,n0,n1,n2,n3,n4,n5,n6,n7,n9,n8=function(){function e(){o(this,e),this.time=0,this._value=0,this.time=0,this._value=0}return y(e,[{key:"value",get:function(){return this._value}},{key:"start",value:function(n){var i=arguments.length>0&&void 0!==n?n:0;this.time=i}},{key:"end",value:function(n){var i=arguments.length>0&&void 0!==n?n:0;this._value=i-this.time}}]),e}();A._RF.pop(),A._RF.push({},"0e2d6yn/BVObK1kyTJ5a09a","GameStats",void 0);var ie,it,ii,ia,io,ir,is,il,iu,ic,ih,ip,id,iy,iv=P.ccclass,im=P.executionOrder,ig=P.property,ib=GameCore,iS=ib.Utils,ik=iS.Valid,iC=iS.Array,iw=ib.Configs.Debugger.ListPlayerDevIds,iE=globalThis.game.player,iT=q.RED,i_=q.BLACK,iA=q.MAGENTA;nj=iv("GameStats"),nV=im(-1e3),nW=ig(K),nq=ig(K),nK=ig(K),nY=ig(K),nJ=ig(K),nZ=ig(K),nX=ig(K),nQ=ig(K),nj(n$=nV((n1=g((n0=function(n){i(r,n);var f=a(r);function r(){var n;o(this,r);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=f.call.apply(f,[this].concat(a)),b(n,"fpsLabel",n1,k(n)),b(n,"drawCountLabel",n2,k(n)),b(n,"logicTimeLabel",n3,k(n)),b(n,"physicTimeLabel",n4,k(n)),b(n,"renderTimeLabel",n5,k(n)),b(n,"objectMemoryUsageLabel",n6,k(n)),b(n,"textureMemoryUsageLabel",n7,k(n)),b(n,"devicePixelRatioLabel",n9,k(n)),n.refreshInterval=.5,n.handleMouseDown=function(){n.bg.enabled=!n.bg.enabled},n.updateStats=function(){n.updateFps(),n.updateDrawCalls(),n.updateLogicTime(),n.updatePhysicTime(),n.updateRenderTime(),n.updateObjectMemoryUsage(),n.updateTextureMemoryUsage(),n.updateDevicePixelRatio()},n}return y(r,[{key:"__preload",value:function(){this.bg=this.getComponent(F),this.validateRequiredComponents(),this.listenInputEvents()}},{key:"validateRequiredComponents",value:function(){t_.lazyValidateProperties(this)}},{key:"listenInputEvents",value:function(){this.node.on(H.EventType.TOUCH_START,this.handleMouseDown)}},{key:"start",value:function(){this.bg.enabled=!1,this.node.active=!1,this.canDisplayStats()&&(this.node.active=!0,this.logicTimeCounter=new n8,this.physicTimeCounter=new n8,this.renderTimeCounter=new n8,N.on(Y.EVENT_BEFORE_UPDATE,this.beforeUpdate,this),N.on(Y.EVENT_AFTER_UPDATE,this.afterUpdate,this),N.on(Y.EVENT_BEFORE_PHYSICS,this.beforePhysics,this),N.on(Y.EVENT_AFTER_PHYSICS,this.afterPhysics,this),N.on(Y.EVENT_BEFORE_DRAW,this.beforeDraw,this),N.on(Y.EVENT_AFTER_RENDER,this.afterRender,this),this.startUpdateStats())}},{key:"onDestroy",value:function(){this.canDisplayStats()&&(N.off(Y.EVENT_BEFORE_UPDATE,this.beforeUpdate,this),N.off(Y.EVENT_AFTER_UPDATE,this.afterUpdate,this),N.off(Y.EVENT_BEFORE_PHYSICS,this.beforePhysics,this),N.off(Y.EVENT_AFTER_PHYSICS,this.afterPhysics,this),N.off(Y.EVENT_BEFORE_DRAW,this.beforeDraw,this),N.off(Y.EVENT_AFTER_RENDER,this.afterRender,this))}},{key:"canDisplayStats",value:function(){return ik.isDebugger()||iC.has(iw,iE.getPlayerId())}},{key:"startUpdateStats",value:function(){this.schedule(this.updateStats,this.refreshInterval)}},{key:"updateFps",value:function(){var n=this.getFps();this.updateFpsColor(n),this.fpsLabel.string="FPS: ".concat(n)}},{key:"updateFpsColor",value:function(n){this.fpsLabel.color=n<30?iT:n<48?iA:i_}},{key:"updateDrawCalls",value:function(){var n=this.getDrawCalls();this.updateDrawCallsColor(n),this.drawCountLabel.string="Draw Calls: ".concat(n)}},{key:"updateDrawCallsColor",value:function(n){var i=J.os===J.OS.IOS;this.drawCountLabel.color=n>(i?80:25)?iT:n>(i?60:15)?iA:i_}},{key:"updateLogicTime",value:function(){var n=this.getLogicTime();this.updateLogicTimeColor(n),this.logicTimeLabel.string="Logic Time: ".concat(n.toFixed(2),"ms")}},{key:"updateLogicTimeColor",value:function(n){this.logicTimeLabel.color=n>10?iT:n>5?iA:i_}},{key:"updatePhysicTime",value:function(){var n=this.getPhysicTime();this.updatePhysicTimeColor(n),this.physicTimeLabel.string="Physic Time: ".concat(n.toFixed(2),"ms")}},{key:"updatePhysicTimeColor",value:function(n){this.physicTimeLabel.color=n>10?iT:n>5?iA:i_}},{key:"updateRenderTime",value:function(){var n=this.getRenderTime();this.updateRenderTimeColor(n),this.renderTimeLabel.string="Render Time: ".concat(n.toFixed(2),"ms")}},{key:"updateRenderTimeColor",value:function(n){this.renderTimeLabel.color=n>10?iT:n>5?iA:i_}},{key:"updateObjectMemoryUsage",value:function(){var n=this.getObjectMemoryUsage();this.updateObjectMemoryUsageColor(n),this.objectMemoryUsageLabel.string="Object Mem: ".concat(n.toFixed(2),"MB")}},{key:"updateObjectMemoryUsageColor",value:function(n){this.objectMemoryUsageLabel.color=n>40?iT:n>25?iA:i_}},{key:"updateTextureMemoryUsage",value:function(){var n=this.getTextureMemoryUsage();this.updateTextureMemoryUsageColor(n),this.textureMemoryUsageLabel.string="Texture Mem: ".concat(n.toFixed(2),"MB")}},{key:"updateTextureMemoryUsageColor",value:function(n){this.textureMemoryUsageLabel.color=n>50?iT:n>35?iA:i_}},{key:"updateDevicePixelRatio",value:function(){var n=this.getDevicePixelRatio();this.updateDevicePixelRatioColor(n),this.devicePixelRatioLabel.string="Device Pixel Ratio: ".concat(n)}},{key:"updateDevicePixelRatioColor",value:function(n){this.devicePixelRatioLabel.color=n>2?iT:n<=1?iA:i_}},{key:"getFps",value:function(){if(!N.root)return 0;return Math.floor(N.root.fps)||0}},{key:"getDrawCalls",value:function(){return N.root&&N.root.device.numDrawCalls||0}},{key:"getLogicTime",value:function(){return Math.floor(1e3*this.logicTimeCounter.value)/1e3||0}},{key:"getPhysicTime",value:function(){return Math.floor(1e3*this.physicTimeCounter.value)/1e3||0}},{key:"getRenderTime",value:function(){return Math.floor(1e3*this.renderTimeCounter.value)/1e3||0}},{key:"getObjectMemoryUsage",value:function(){return N.root&&N.root.device.memoryStatus.bufferSize/1048576||0}},{key:"getTextureMemoryUsage",value:function(){return N.root&&N.root.device.memoryStatus.textureSize/1048576||0}},{key:"getDevicePixelRatio",value:function(){return window.devicePixelRatio||0}},{key:"beforeUpdate",value:function(){var n=performance.now();this.logicTimeCounter.start(n)}},{key:"afterUpdate",value:function(){var n=performance.now();this.logicTimeCounter.end(n)}},{key:"beforePhysics",value:function(){var n=performance.now();this.physicTimeCounter.start(n)}},{key:"afterPhysics",value:function(){var n=performance.now();this.physicTimeCounter.end(n)}},{key:"beforeDraw",value:function(){var n=performance.now();this.renderTimeCounter.start(n)}},{key:"afterRender",value:function(){var n=performance.now();this.renderTimeCounter.end(n)}}]),r}(O)).prototype,"fpsLabel",[nW],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),n2=g(n0.prototype,"drawCountLabel",[nq],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),n3=g(n0.prototype,"logicTimeLabel",[nK],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),n4=g(n0.prototype,"physicTimeLabel",[nY],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),n5=g(n0.prototype,"renderTimeLabel",[nJ],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),n6=g(n0.prototype,"objectMemoryUsageLabel",[nZ],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),n7=g(n0.prototype,"textureMemoryUsageLabel",[nX],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),n9=g(n0.prototype,"devicePixelRatioLabel",[nQ],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),n$=n0))||n$),A._RF.pop(),A._RF.push({},"aa4b0d0u0hLeqd3+/PQZ/QD","SwitchButton",void 0);var iR,iP,iB,iL,iD,iO,iI,iN,iF,iG,iM,iz,ix,iU,iH,ij,iV,iW,iq,iK,iY,iJ,iZ,iX,iQ,i$,i0,i1,i2,i3,i4,i5,i6,i7,i9,i8,ae=P.ccclass,an=P.property,ai=P.requireComponent,aa=globalThis.game.analytics,ao=(ie=ae("SwitchButton"),it=ai([M]),ii=an(z),ia=an(j),io=an(j),ir=an(z),is=an({visible:function(){return this.useSound},type:e0}),ie(il=it((ic=g((iu=function(n){i(r,n);var f=a(r);function r(){var n;o(this,r);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=f.call.apply(f,[this].concat(a)),b(n,"enable",ic,k(n)),b(n,"nodeOn",ih,k(n)),b(n,"nodeOff",ip,k(n)),b(n,"useSound",id,k(n)),b(n,"soundKey",iy,k(n)),n}return y(r,[{key:"__preload",value:function(){this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){t_.lazyValidateProperties(this)}},{key:"switch",value:function(){if(!this.node.active)return!1;if(aa.event(GameCore.Plugins.Analytics.Events.BUTTON_CLICK,{enable:!this.enable,button_name:this.node.name,screen_name:e3.getCurrentPage()}),this.useSound&&this.soundKey){var n=e1[this.soundKey];n&&e2.playSound(n)}return this.updateStatus(!this.enable)}},{key:"setEnabled",value:function(n){this.node.active&&this.updateStatus(n)}},{key:"updateStatus",value:function(n){return this.enable=n,this.nodeOn.active=n,this.nodeOff.active=!n,n}}]),r}(O)).prototype,"enable",[ii],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),ih=g(iu.prototype,"nodeOn",[ia],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ip=g(iu.prototype,"nodeOff",[io],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),id=g(iu.prototype,"useSound",[ir],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),iy=g(iu.prototype,"soundKey",[is],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e0[e4.BUTTON_CLICK]}}),il=iu))||il)||il);A._RF.pop(),A._RF.push({},"bce15LcVrxOfYMa9rbXN/qi","Localize",void 0);var ar=P.ccclass,as=P.property,al=P.executeInEditMode,au=P.disallowMultiple,ac=GameCore,ah=ac.Utils,ap=ah.Signal,ad=(ah.Function,ah.Array),ay=ac.Events,av=globalThis.game,af=av.language,am=av.event,ag=function(n){return n[n.Text=0]="Text",n[n.Texture=1]="Texture",n}({});Z(ag);var ab,aS,ak,aC,aw,aE,aT,a_,aA,aR,aP,aB,aL,aD,aO,aI,aN="localize-params-updated",aF=(iR=ar("LocalizeParams"),iP=as({visible:!1}),iB=as(L),iR((iD=g((iL=function(){function e(){o(this,e),b(this,"_text",iD,this)}return y(e,[{key:"text",get:function(){return this._text},set:function(n){this._text=n,G.emit(aN,{text:n,param:this})}}]),e}()).prototype,"_text",[iP],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),g(iL.prototype,"text",[iB],Object.getOwnPropertyDescriptor(iL.prototype,"text"),iL.prototype),iL))||iL),aG=(iO=ar("Localize"),iI=al(!0),iN=as({visible:!1}),iF=as({type:L,visible:function(){return this.l10nType===ag.Texture}}),iG=as({visible:!1}),iM=as({type:X(ag)}),iz=as({type:K,visible:function(){return this.l10nType===ag.Text}}),ix=as({type:[aF],visible:function(){return this.l10nType===ag.Text}}),iU=as({type:F,visible:function(){return this.l10nType===ag.Texture}}),iH=as({visible:function(){return this.l10nType===ag.Texture}}),ij=as({visible:!1}),iV=as({type:L}),iW=t_.onlyRunInLifeCycleAsync,iq=t_.onlyRunInLifeCycleAsync,iK=t_.onlyRunInLifeCycleAsync,iY=t_.onlyRunInLifeCycle,iJ=t_.onlyRunInLifeCycleAsync,iZ=t_.onlyRunInLifeCycleAsync,iX=t_.onlyRunInLifeCycleAsync,iQ=t_.onlyRunInLifeCycleAsync,i$=t_.onlyRunInLifeCycle,i0=t_.onlyRunInLifeCycleAsync,iO(i1=au(i1=iI((i3=g((i2=function(f){i(S,f);var m,g,C,w,E,T,_,A,R,P,B,L=a(S);function S(){var n;o(this,S);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return(n=L.call.apply(L,[this].concat(a))).localized=!1,b(n,"_defaultLocale",i3,k(n)),b(n,"_l10nType",i4,k(n)),b(n,"label",i5,k(n)),b(n,"params",i6,k(n)),b(n,"sprite",i7,k(n)),b(n,"packable",i9,k(n)),b(n,"_key",i8,k(n)),n.updateSignalController=new ap.SignalController,n.onLocalizeParamsUpdated=function(i){var a=i.param;ad.has(n.params,a)&&n.updateLocalization()},n.updateLocalization=function(){return n.updateLocalizationComp()},n}return y(S,[{key:"defaultLocale",get:function(){return this._defaultLocale},set:function(n){(function(n){return ad.has(e5,n)})(n)?this._defaultLocale=n:console.warn("Key ".concat(n," not found. Supported locales are ").concat(e5.join(", ")))}},{key:"l10nType",get:function(){return this._l10nType},set:function(n){this._l10nType=n,n===ag.Texture&&(this.label=void 0,this.params=[]),n===ag.Text&&(this.sprite=void 0,this.packable=!0)}},{key:"key",get:function(){return this._key},set:function(n){try{if(!this.isValidKey(n))return void console.warn("Key ".concat(n," not found in locales"));this._key=n,this.updateLocalization()}catch(n){console.warn(n)}}},{key:"setParams",value:function(n){for(;this.params.length<n.length;)this.params.push(new aF);for(var i=0,a=this.params.length;i<a;i++){var o,y=this.params[i];y.text=null!==(o=n[i])&&void 0!==o?o:y.text}}},{key:"waitUntilLocalized",value:function(){var n=this;return this.localized?Promise.resolve():new Promise(function(i){return n.node.once(eX.LOCALIZE_APPLIED,i)})}},{key:"__preload",value:function(){}},{key:"isValidKey",value:function(n){return!!this.isTextKey(n)||!!this.isTextureKey(n)}},{key:"isTextKey",value:function(n){try{return this.l10nType===ag.Text&&af.hasTextKey(n)}catch(n){return console.warn(n),!1}}},{key:"isTextureKey",value:function(n){try{return this.l10nType===ag.Texture&&af.hasTextureKey(n)}catch(n){return console.warn(n),!1}}},{key:"onEnable",value:function(){this.listenEvent()}},{key:"onDisable",value:function(){this.unlistenEvent(),this.updateSignalController.abort()}},{key:"start",value:function(){this.initLocalization()}},{key:"listenEvent",value:function(){am.on(ay.LANGUAGE_CHANGED,this.updateLocalization),G.on(aN,this.onLocalizeParamsUpdated)}},{key:"unlistenEvent",value:function(){am.off(ay.LANGUAGE_CHANGED,this.updateLocalization),G.off(aN,this.onLocalizeParamsUpdated)}},{key:"initLocalization",value:function(){return this.updateLocalizationComp(!0)}},{key:"updateLocalizationComp",value:(B=n(function(){var n,i,a;var o=arguments;return _ts_generator(this,function(y){switch(y.label){case 0:if(n=o.length>0&&void 0!==o[0]&&o[0],!(this.enabledInHierarchy&&void 0!==this.key))return[3,8];i=this.updateSignalController.renew(),y.label=1;case 1:if(y.trys.push([1,7,,8]),this.localized=!1,!this.isTextKey(this.key))return[3,3];return[4,this.updateTextLocalization(this.key,i)];case 2:return y.sent(),[3,6];case 3:if(!this.isTextureKey(this.key))throw new Error("Key ".concat(this.key," not found in locales"));if(a=af.getCurrentLocale(),!e6&&n&&a===this.defaultLocale)return[3,5];return[4,this.updateTextureLocalization(this.key,i)];case 4:y.sent(),y.label=5;case 5:y.label=6;case 6:if(i.aborted)return[2];return this.localized=!0,G.emit(eX.LOCALIZE_APPLIED,{localize:this,key:this.key}),this.node.emit(eX.LOCALIZE_APPLIED,{localize:this,key:this.key}),[3,8];case 7:return console.warn(y.sent()),[3,8];case 8:return[2]}})}),function(){return B.apply(this,arguments)})},{key:"updateTextLocalization",value:(P=n(function(n,i){var a,o,y,f;return _ts_generator(this,function(m){switch(m.label){case 0:return o=this,y=af.getCurrentLocale(),f=af.getText(n,this.params.map(function(n){return n.text}),y),[4,null===(a=i.wrap(function(){return o.setTextFont(f,y,i)}))||void 0===a?void 0:a()];case 1:return m.sent(),[2]}})}),function(n,i){return P.apply(this,arguments)})},{key:"setTextFont",value:(R=n(function(n,i,a){return _ts_generator(this,function(o){switch(o.label){case 0:if(void 0===this.label)throw new Error("Text localize component <".concat(this.node.name,"> has no label"));return this.label.string=n,[4,this.setTextFontRuntime(this.label,i,a)];case 1:return o.sent(),[2]}})}),function(n,i,a){return R.apply(this,arguments)})},{key:"setTextFontRuntime",value:(A=n(function(n,i,a){var o;return _ts_generator(this,function(y){switch(y.label){case 0:return[4,eZ.loadFontAsync(i)];case 1:return o=y.sent(),a.aborted||null!==o&&this.setLabelFontInLifeCycle(n,o),[2]}})}),function(n,i,a){return A.apply(this,arguments)})},{key:"setLabelFontInLifeCycle",value:function(n,i){n.font=i}},{key:"setTextFontEditor",value:(_=n(function(n,i,a){var o,y,f,m,g,b,k;return _ts_generator(this,function(C){switch(C.label){case 0:return f=this,[4,this.requestFontUuid(i)];case 1:if(!(null!==(m=C.sent())))return[3,4];return[4,null===(o=a.wrap(function(){return f.requestNodeInfo(n.node.uuid)}))||void 0===o?void 0:o()];case 2:if(!(void 0!==(g=C.sent())))return[3,4];return b=ad.searchIndex(g.__comps__,function(n){return"cc.Label"===n.type}),k="__comps__.".concat(b,".font"),[4,null===(y=a.wrap(function(){return f.requestUpdateLabelFont(n.node.uuid,k,m)}))||void 0===y?void 0:y()];case 3:C.sent(),C.label=4;case 4:return[2]}})}),function(n,i,a){return _.apply(this,arguments)})},{key:"requestFontUuid",value:(T=n(function(n){return _ts_generator(this,function(i){switch(i.label){case 0:return[4,Editor.Message.request("asset-db","query-uuid","db://assets/loadable/".concat(e7[n]))];case 1:return[2,i.sent()]}})}),function(n){return T.apply(this,arguments)})},{key:"requestNodeInfo",value:function(n){return Editor.Message.request("scene","query-node",n)}},{key:"requestUpdateLabelFont",value:(E=n(function(n,i,a){return _ts_generator(this,function(o){switch(o.label){case 0:return[4,Editor.Message.request("scene","set-property",{uuid:n,path:i,dump:{type:"cc.Font",value:{uuid:a}}})];case 1:return o.sent(),[2]}})}),function(n,i,a){return E.apply(this,arguments)})},{key:"updateTextureLocalization",value:(w=n(function(n,i){var a;return _ts_generator(this,function(o){switch(o.label){case 0:if(void 0===this.sprite)throw new Error("Texture localize component <".concat(this.node.name,"> has no sprite"));return a=af.getTexture(n),[4,this.setSpriteRuntime(this.sprite,a,i)];case 1:return o.sent(),[2]}})}),function(n,i){return w.apply(this,arguments)})},{key:"setSpriteRuntime",value:(C=n(function(n,i,a){var o;return _ts_generator(this,function(y){switch(y.label){case 0:return[4,eZ.loadSpriteFrameAsync("".concat(i,"/spriteFrame"),this.packable)];case 1:return o=y.sent(),a.aborted||(null!==o?this.setSprite(n,o):console.warn("Sprite not found by path: ".concat(i))),[2]}})}),function(n,i,a){return C.apply(this,arguments)})},{key:"setSprite",value:function(n,i){n.spriteFrame=i}},{key:"setSpriteEditor",value:(g=n(function(n,i,a){var o,y,f,m,g,b,k,C,w,E;return _ts_generator(this,function(T){switch(T.label){case 0:return f=this,[4,this.requestSpriteFrameInfo(i)];case 1:if(!(0!==(m=T.sent()).length))return[3,6];if(!(m.length>1))return[3,2];return g=m.slice(0,5).map(function(n){return n.path}),b="".concat(g.join(",")).concat(g.length<m.length?"...":""),console.warn("Ambiguous sprite's path: ".concat(i,". Found ").concat(b)),[3,5];case 2:return[4,null===(o=a.wrap(function(){return f.requestNodeInfo(n.node.uuid)}))||void 0===o?void 0:o()];case 3:if(!(void 0!==(k=T.sent())))return[3,5];return C=m[0].uuid,w=ad.searchIndex(k.__comps__,function(n){return"cc.Sprite"===n.type}),E="__comps__.".concat(w,".spriteFrame"),[4,null===(y=a.wrap(function(){return f.requestUpdateSpriteSpriteFrame(n.node.uuid,E,C)}))||void 0===y?void 0:y()];case 4:T.sent(),T.label=5;case 5:return[3,7];case 6:console.error("Sprite not found by path: ".concat(i)),T.label=7;case 7:return[2]}})}),function(n,i,a){return g.apply(this,arguments)})},{key:"requestSpriteFrameInfo",value:function(n){return Editor.Message.request("asset-db","query-assets",{pattern:"db://assets/loadable/".concat(n,"*"),ccType:"cc.SpriteFrame"})}},{key:"requestUpdateSpriteSpriteFrame",value:(m=n(function(n,i,a){return _ts_generator(this,function(o){switch(o.label){case 0:return[4,Editor.Message.request("scene","set-property",{uuid:n,path:i,dump:{type:"cc.SpriteFrame",value:{uuid:a}}})];case 1:return o.sent(),[2]}})}),function(n,i,a){return m.apply(this,arguments)})}]),S}(O)).prototype,"_defaultLocale",[iN],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"en"}}),g(i2.prototype,"defaultLocale",[iF],Object.getOwnPropertyDescriptor(i2.prototype,"defaultLocale"),i2.prototype),i4=g(i2.prototype,"_l10nType",[iG],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ag.Text}}),g(i2.prototype,"l10nType",[iM],Object.getOwnPropertyDescriptor(i2.prototype,"l10nType"),i2.prototype),i5=g(i2.prototype,"label",[iz],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),i6=g(i2.prototype,"params",[ix],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),i7=g(i2.prototype,"sprite",[iU],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),i9=g(i2.prototype,"packable",[iH],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),i8=g(i2.prototype,"_key",[ij],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g(i2.prototype,"key",[iV],Object.getOwnPropertyDescriptor(i2.prototype,"key"),i2.prototype),g(i2.prototype,"updateTextLocalization",[iW],Object.getOwnPropertyDescriptor(i2.prototype,"updateTextLocalization"),i2.prototype),g(i2.prototype,"setTextFont",[iq],Object.getOwnPropertyDescriptor(i2.prototype,"setTextFont"),i2.prototype),g(i2.prototype,"setTextFontRuntime",[iK],Object.getOwnPropertyDescriptor(i2.prototype,"setTextFontRuntime"),i2.prototype),g(i2.prototype,"setLabelFontInLifeCycle",[iY],Object.getOwnPropertyDescriptor(i2.prototype,"setLabelFontInLifeCycle"),i2.prototype),g(i2.prototype,"setTextFontEditor",[iJ],Object.getOwnPropertyDescriptor(i2.prototype,"setTextFontEditor"),i2.prototype),g(i2.prototype,"requestUpdateLabelFont",[iZ],Object.getOwnPropertyDescriptor(i2.prototype,"requestUpdateLabelFont"),i2.prototype),g(i2.prototype,"updateTextureLocalization",[iX],Object.getOwnPropertyDescriptor(i2.prototype,"updateTextureLocalization"),i2.prototype),g(i2.prototype,"setSpriteRuntime",[iQ],Object.getOwnPropertyDescriptor(i2.prototype,"setSpriteRuntime"),i2.prototype),g(i2.prototype,"setSprite",[i$],Object.getOwnPropertyDescriptor(i2.prototype,"setSprite"),i2.prototype),g(i2.prototype,"setSpriteEditor",[i0],Object.getOwnPropertyDescriptor(i2.prototype,"setSpriteEditor"),i2.prototype),i1=i2))||i1)||i1)||i1);A._RF.pop(),A._RF.push({},"b3fd8kSJpZMS47Z+G6ZUMJb","LocalizePreloader",void 0);var aM,az,ax,aU,aH,aj,aV,aW,aq,aK,aY,aJ,aZ,aX,aQ,a$,a0=P.ccclass,a1=P.property,a2=GameCore.Utils,a3=a2.Array,a4=a2.Valid,a5=globalThis.game.language,a6=(ab=a0("LocalizeTextureKey"),aS=a1({visible:!1}),ak=a1(L),ab((aw=g((aC=function(){function e(){o(this,e),b(this,"_key",aw,this)}return y(e,[{key:"key",get:function(){return this._key},set:function(n){a5.hasTextureKey(n)?this._key=n:console.warn("Key ".concat(n," not found in locales"))}}]),e}()).prototype,"_key",[aS],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),g(aC.prototype,"key",[ak],Object.getOwnPropertyDescriptor(aC.prototype,"key"),aC.prototype),aC))||aC),a7=(aE=a0("SupportedLocaleKey"),aT=a1({visible:!1}),a_=a1(L),aE((aR=g((aA=function(){function e(){o(this,e),b(this,"_key",aR,this)}return y(e,[{key:"key",get:function(){return this._key},set:function(n){a3.has(e5,n)?this._key=n:console.warn("Key ".concat(n," not found. Supported locales are ").concat(e5.join(", ")))}}]),e}()).prototype,"_key",[aT],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),g(aA.prototype,"key",[a_],Object.getOwnPropertyDescriptor(aA.prototype,"key"),aA.prototype),aA))||aA);aP=a0("LocalizePreloader"),aB=a1([a6]),aL=a1({type:a7,tooltip:"Preload only for these locales"}),aP((aO=g((aD=function(n){i(s,n);var f=a(s);function s(){var n;o(this,s);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=f.call.apply(f,[this].concat(a)),b(n,"keys",aO,k(n)),b(n,"locales",aI,k(n)),n}return y(s,[{key:"__preload",value:function(){this.preloadTextures()}},{key:"preloadTextures",value:function(){var n=a5.getCurrentLocale(),i=this.locales.map(function(n){return n.key});if(a3.has(i,n)){var a,o=[],y=m(this.keys);try{for(y.s();!(a=y.n()).done;){var f=a.value;if(!1!==a5.hasTextureKey(f.key)){var g=a5.getTexture(f.key),b="".concat(g,"/spriteFrame");o.push(b)}}}catch(n){y.e(n)}finally{y.f()}eZ.loadSpriteFramesAsync(o)}else a4.isDebugger()&&console.info("Skipping preloading of textures because current locale is not in the list of preloading locales")}}]),s}(O)).prototype,"keys",[aB],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),aI=g(aD.prototype,"locales",[aL],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),aD)),A._RF.pop(),A._RF.push({},"173031IssdPd61TGAHBxghZ","LocalizedLayout",void 0);var a9,a8,oe,on,oi,oa,oo,or,os,ol,ou,oc,oh,op,od,oy,ov,of,om,og,ob,oS,ok,oC,ow,oE,oT,o_,oA=P.ccclass,oR=P.property,oP=P.executeInEditMode,oB=P.disallowMultiple,oL=P.requireComponent;aM=oA("LocalizedLayout"),az=oP(!0),ax=oL(Q),aU=oR(aG),aH=t_.required(),aj=oR(Q),aV=oR({visible:!1}),aW=oR({visible:!1}),aq=oR({type:$,group:"Padding"}),aK=oR({type:$,group:"Padding"}),aM(aY=oB(aY=az(aY=ax((aZ=g((aJ=function(n){i(s,n);var f=a(s);function s(){var n;o(this,s);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=f.call.apply(f,[this].concat(a)),b(n,"label",aZ,k(n)),b(n,"layout",aX,k(n)),b(n,"_horizontal",aQ,k(n)),b(n,"_vertical",a$,k(n)),n.updateContentSize=function(){var i;if(void 0!==n.label){var a=null===(i=n.label.getComponent(Q))||void 0===i?void 0:i.contentSize;if(void 0!==a){n.layout.setContentSize(a.width+n.horizontal,a.height+n.vertical);var o,y=n.node.getComponentsInChildren(ee),f=m(y);try{for(f.s();!(o=f.n()).done;)o.value.updateAlignment()}catch(n){f.e(n)}finally{f.f()}}}},n}return y(s,[{key:"horizontal",get:function(){return this._horizontal},set:function(n){this._horizontal=n,this.updateContentSize()}},{key:"vertical",get:function(){return this._vertical},set:function(n){this._vertical=n,this.updateContentSize()}},{key:"__preload",value:function(){this.layout=this.getComponent(Q),t_.validateRequiredProperties(this)}},{key:"start",value:function(){this.updateContentSize()}},{key:"onEnable",value:function(){this.listenEvent()}},{key:"onDisable",value:function(){this.unlistenEvent()}},{key:"listenEvent",value:function(){var n;null===(n=this.label)||void 0===n||n.node.on(eX.LOCALIZE_APPLIED,this.updateContentSize)}},{key:"unlistenEvent",value:function(){var n;null===(n=this.label)||void 0===n||n.node.off(eX.LOCALIZE_APPLIED,this.updateContentSize)}}]),s}(O)).prototype,"label",[aU],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),aX=g(aJ.prototype,"layout",[aH,aj],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),aQ=g(aJ.prototype,"_horizontal",[aV],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),a$=g(aJ.prototype,"_vertical",[aW],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),g(aJ.prototype,"horizontal",[aq],Object.getOwnPropertyDescriptor(aJ.prototype,"horizontal"),aJ.prototype),g(aJ.prototype,"vertical",[aK],Object.getOwnPropertyDescriptor(aJ.prototype,"vertical"),aJ.prototype),aY=aJ))||aY)||aY)||aY),A._RF.pop(),A._RF.push({},"a2260jBMJFPCrn/Q4Vo4iB1","BatchNodes",void 0);var oD,oO,oI,oN,oF,oG,oM,oz,ox,oU,oH,oj,oV,oW,oq,oK,oY,oJ,oZ,oX,oQ=P.ccclass,o$=P.executionOrder,o0=P.property,o1=GameCore.Utils,o2=o1.Decorator,o3=o1.Array,o4="Batch By Name",o5="Batch Label",o6="Batch Sprite";a9=oQ("BatchNodes"),a8=o$(99999),oe=o0({group:{name:o4}}),on=o0({type:[D],group:{name:o4}}),oi=o0({type:[L],group:{name:o4}}),oa=o0({group:{name:o5}}),oo=o0({group:{name:o5}}),or=o0({group:{name:o5}}),os=o0({group:{name:o6}}),ol=o0({group:{name:o6}}),ou=o0({readonly:!0}),oc=o0({readonly:!0}),oh=o0({readonly:!0}),op=o2.debounce(1e3),a9(od=a8((ov=g((oy=function(n){i(s,n);var f=a(s);function s(){var n;o(this,s);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=f.call.apply(f,[this].concat(a)),b(n,"batchByName",ov,k(n)),b(n,"depthNames",of,k(n)),b(n,"listName",om,k(n)),b(n,"batchLabel",og,k(n)),b(n,"depthLabel",ob,k(n)),b(n,"typeLabel",oS,k(n)),b(n,"batchSprite",ok,k(n)),b(n,"depthSprite",oC,k(n)),b(n,"batchAllNodes",ow,k(n)),b(n,"batchDepth",oE,k(n)),b(n,"checkOverlap",oT,k(n)),n.batchNode={},n.labelChildren=[],n.spriteChildren=[],n.allChildren=[],n.nameChildren=[],n.originalParents={},n.isInited=!1,b(n,"handleNodeChange",o_,k(n)),n.onAfterUpdate=function(){n.isInited&&n.hierarchyChildren()},n.onAfterRender=function(){n.isInited&&n.restoreOriginalChildren()},n}return y(s,[{key:"__preload",value:function(){this.enabled&&(N.on(Y.EVENT_AFTER_UPDATE,this.onAfterUpdate),N.on(Y.EVENT_AFTER_RENDER,this.onAfterRender))}},{key:"onDestroy",value:function(){N.off(Y.EVENT_AFTER_UPDATE,this.onAfterUpdate),N.off(Y.EVENT_AFTER_RENDER,this.onAfterRender)}},{key:"onLoad",value:function(){this.enabled&&(this.setupBatchNodes(this.node),this.isInited=!0)}},{key:"onEnable",value:function(){this.isInited||(N.on(Y.EVENT_AFTER_UPDATE,this.onAfterUpdate),N.on(Y.EVENT_AFTER_RENDER,this.onAfterRender),this.setupBatchNodes(this.node),this.isInited=!0)}},{key:"handleActiveChange",value:function(n){n.once(j.EventType.ACTIVE_IN_HIERARCHY_CHANGED,this.handleNodeChange)}},{key:"onDisable",value:function(){this.restoreOriginalChildren(),N.off(Y.EVENT_AFTER_UPDATE,this.onAfterUpdate),N.off(Y.EVENT_AFTER_RENDER,this.onAfterRender),this.isInited=!1}},{key:"setupBatchNodes",value:function(n){this.allChildren=[],this.nameChildren=[],this.labelChildren=[],this.spriteChildren=[],this.saveOriginalChildren(n),this.createGlobalNodes(n),this.createGlobalNameNodes(n),this.createGlobalLabelNode(n),this.createGlobalSpriteNode(n),this.sortGlobalNodes()}},{key:"sortGlobalNodes",value:function(){var n,i,a,o=this;null===(n=this.batchNode.node)||void 0===n||n.setSiblingIndex(0),null===(i=this.batchNode.label)||void 0===i||i.setSiblingIndex(this.depthLabel),null===(a=this.batchNode.sprite)||void 0===a||a.setSiblingIndex(this.depthSprite),this.listName.forEach(function(n,i){var a,y=o.depthNames[i];void 0!==y?null===(a=o.batchNode[n])||void 0===a||a.setSiblingIndex(y):console.warn("BatchNodes: depth is undefined",n,i,y)})}},{key:"createGlobalNodes",value:function(n){if(this.batchAllNodes){var i=new j("GlobalBatchNode");i.active=!0,this.batchNode.node=i,n.addChild(i)}}},{key:"createGlobalNameNodes",value:function(n){if(this.batchByName){var i,a=m(this.listName);try{for(a.s();!(i=a.n()).done;){var o=i.value;if(!this.batchNode[o]){var y=new j(o);y.active=!0,this.batchNode[o]=y,n.addChild(y)}}}catch(n){a.e(n)}finally{a.f()}}}},{key:"createGlobalLabelNode",value:function(n){if(this.batchLabel){var i=new j("GlobalLabelNode");i.active=!0,this.batchNode.label=i,n.addChild(i)}}},{key:"createGlobalSpriteNode",value:function(n){if(this.batchSprite){var i=new j("GlobalSpriteNode");i.active=!0,this.batchNode.sprite=i,n.addChild(i)}}},{key:"saveOriginalParents",value:function(){var n,i=[].concat(C(this.labelChildren),C(this.spriteChildren)),a=this.nameChildren,o=m(i);try{for(o.s();!(n=o.n()).done;){var y=n.value;y.node.parent&&(this.handleActiveChange(y.node),this.originalParents[y.uuid]=y.node.parent)}}catch(n){o.e(n)}finally{o.f()}var f,g=m(a);try{for(g.s();!(f=g.n()).done;){var b=f.value;b.parent&&(this.handleActiveChange(b),this.originalParents[b.uuid]=b.parent)}}catch(n){g.e(n)}finally{g.f()}}},{key:"saveOriginalChildren",value:function(n){var i,a=n.children,o=m(a);try{for(o.s();!(i=o.n()).done;){var y=i.value;this.saveLabelChildren(y),this.saveSpriteChildren(y),this.saveNodeChildrenByName(y),this.saveNodeChildrenByType(y)}}catch(n){o.e(n)}finally{o.f()}this.saveOriginalParents()}},{key:"saveLabelChildren",value:function(n){var i;if(this.batchLabel){var a=n.getComponentsInChildren(K),o={none:K.CacheMode.NONE,char:K.CacheMode.CHAR,bitmap:K.CacheMode.BITMAP}[this.typeLabel];o&&(a=a.filter(function(n){return n.cacheMode===o})),0!==a.length&&(i=this.labelChildren).push.apply(i,C(a))}}},{key:"saveSpriteChildren",value:function(n){var i;if(this.batchSprite){var a=n.getComponentsInChildren(F);0!==a.length&&(i=this.spriteChildren).push.apply(i,C(a))}}},{key:"saveNodeChildrenByName",value:function(n){if(this.batchByName){var i,a=m(n.children);try{for(a.s();!(i=a.n()).done;){var o=i.value;o3.has(this.listName,o.name)?this.nameChildren.push(o):this.saveNodeChildrenByName(o)}}catch(n){a.e(n)}finally{a.f()}}}},{key:"saveNodeChildrenByType",value:function(n,i){var a,o=arguments.length>1&&void 0!==i?i:0;if(this.batchAllNodes){var y=n.getComponentsInChildren(O);if((a=this.allChildren).push.apply(a,C(y)),!(this.batchDepth<1||o>=this.batchDepth)){var f,g=m(this.allChildren);try{for(g.s();!(f=g.n()).done;){var b=f.value;this.saveNodeChildrenByType(b.node,this.batchDepth)}}catch(n){g.e(n)}finally{g.f()}}}}},{key:"hierarchyChildren",value:function(){var n,t=function(n,i){n.node.isValid&&n.node.activeInHierarchy&&i&&!n.node.isChildOf(i)&&(n.node.setParent(i,!0),n.node.layer=et.Enum.UI_2D)},i=["GlobalLabelNode","GlobalSpriteNode","GlobalBatchNode"],a=m(this.labelChildren);try{for(a.s();!(n=a.n()).done;)t(n.value,this.batchNode.label)}catch(n){a.e(n)}finally{a.f()}var o,y=m(this.spriteChildren);try{for(y.s();!(o=y.n()).done;)t(o.value,this.batchNode.sprite)}catch(n){y.e(n)}finally{y.f()}var f,g=m(this.allChildren);try{for(g.s();!(f=g.n()).done;)t(f.value,this.batchNode.node)}catch(n){g.e(n)}finally{g.f()}this.allChildren.sort(function(n,i){return n.constructor.name.localeCompare(i.constructor.name)}),this.labelChildren.sort(function(n,i){return n.cacheMode-i.cacheMode});var b,k=m(this.nameChildren);try{for(k.s();!(b=k.n()).done;){var C=b.value;if(C.isValid&&C.activeInHierarchy&&C.isTransformDirty()){var w=C.getComponent(V);if(!(w&&w.opacity<1||o3.has(i,C.name))){var E=this.batchNode[C.name];E&&(C.isChildOf(E)||(C.setParent(E,!0),C.layer=et.Enum.UI_2D))}}}}catch(n){k.e(n)}finally{k.f()}}},{key:"restoreOriginalChildren",value:function(){var n=[].concat(C(this.labelChildren),C(this.spriteChildren));if(n.length>0){var i,a=m(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,y=this.originalParents[o.uuid];y&&(o.node.isChildOf(y)||o.node.setParent(y,!0))}}catch(n){a.e(n)}finally{a.f()}}var f,g=m(this.nameChildren);try{for(g.s();!(f=g.n()).done;){var b=f.value,k=this.originalParents[b.uuid];k&&(b.isChildOf(k)||b.setParent(k,!0))}}catch(n){g.e(n)}finally{g.f()}}}]),s}(O)).prototype,"batchByName",[oe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),of=g(oy.prototype,"depthNames",[on],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),om=g(oy.prototype,"listName",[oi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),og=g(oy.prototype,"batchLabel",[oa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ob=g(oy.prototype,"depthLabel",[oo],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),oS=g(oy.prototype,"typeLabel",[or],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"char"}}),ok=g(oy.prototype,"batchSprite",[os],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),oC=g(oy.prototype,"depthSprite",[ol],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ow=g(oy.prototype,"batchAllNodes",[ou],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),oE=g(oy.prototype,"batchDepth",[oc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),oT=g(oy.prototype,"checkOverlap",[oh],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),o_=g(oy.prototype,"handleNodeChange",[op],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var n=this;return function(){n.isInited&&(console.warn("handleNodeChange",n.node.name),n.setupBatchNodes(n.node))}}}),od=oy))||od),A._RF.pop(),A._RF.push({},"1ecebJCOPhK9L6AO92sjHzD","BatchNodesV2",void 0);var o7,o9=P.ccclass,o8=P.executionOrder,re=P.property,rt=GameCore.Utils,rn=rt.Array,ri=rt.Object;oD=o9("BatchNodesV2"),oO=o8(99999),oI=re({group:"Batch Settings"}),oN=re({type:[L],group:"Batch Settings",visible:function(){return this.batchByName}}),oF=re({type:[D],group:"Batch Settings",visible:function(){return this.batchByName}}),oG=re({group:"Label Settings"}),oM=re({group:"Label Settings",visible:function(){return this.batchLabel}}),oz=re({group:"Label Settings",visible:function(){return this.batchLabel}}),ox=re({group:"Sprite Settings"}),oU=re({group:"Sprite Settings",visible:function(){return this.batchSprite}}),oD(oH=oO((oV=g((oj=function(n){i(r,n);var f=a(r);function r(){var n;o(this,r);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=f.call.apply(f,[this].concat(a)),b(n,"batchByName",oV,k(n)),b(n,"listName",oW,k(n)),b(n,"depthNames",oq,k(n)),b(n,"batchLabel",oK,k(n)),b(n,"typeLabel",oY,k(n)),b(n,"depthLabel",oJ,k(n)),b(n,"batchSprite",oZ,k(n)),b(n,"depthSprite",oX,k(n)),n.batchNodes={},n.originalParents={},n.labelNodes=[],n.spriteNodes=[],n.namedNodes={},n.isInitialized=!1,n.labelNodesByType={bitmap:[],char:[],none:[]},n.isEventListenerSetup=!1,n.onAfterUpdate=function(){n.isInitialized&&n.batchActiveNodes()},n.onAfterRender=function(){n.isInitialized&&n.restoreNodes()},n}return y(r,[{key:"depthLabelBitmap",get:function(){return this.depthLabel}},{key:"depthLabelChar",get:function(){return this.depthLabel+1}},{key:"depthLabelNone",get:function(){return this.depthLabel+2}},{key:"onLoad",value:function(){this.enabled&&this.initializeDataStructures()}},{key:"start",value:function(){this.enabled&&this.initialize()}},{key:"onEnable",value:function(){this.isEventListenerSetup||(this.setupEventListeners(),this.isEventListenerSetup=!0)}},{key:"onDisable",value:function(){this.isEventListenerSetup&&(this.removeEventListeners(),this.isEventListenerSetup=!1),this.restoreNodes()}},{key:"onDestroy",value:function(){this.removeEventListeners(),this.restoreNodes(),this.clearData()}},{key:"initializeDataStructures",value:function(){this.batchNodes={},this.originalParents={},this.labelNodes=[],this.spriteNodes=[],this.namedNodes={},this.labelNodesByType={bitmap:[],char:[],none:[]}}},{key:"initialize",value:function(){this.isInitialized||(this.createBatchContainers(),this.scanNodes(this.node),this.sortBatchNodes(),this.isInitialized=!0)}},{key:"clearData",value:function(){this.batchNodes={},this.originalParents={},this.labelNodes=[],this.spriteNodes=[],this.namedNodes={},this.labelNodesByType={bitmap:[],char:[],none:[]},this.isInitialized=!1}},{key:"categorizeNode",value:function(n){if(n.parent){if(this.originalParents[n.uuid]=n.parent,this.batchLabel){var i=n.getComponent(K);i&&("all"===this.typeLabel?i.cacheMode===K.CacheMode.BITMAP?this.labelNodesByType.bitmap.push(n):i.cacheMode===K.CacheMode.CHAR?this.labelNodesByType.char.push(n):this.labelNodesByType.none.push(n):this.isValidLabel(i)&&this.labelNodes.push(n))}if(this.batchSprite)n.getComponent(F)&&this.spriteNodes.push(n);if(this.batchByName){var a=n.name;this.listName.includes(a)&&(this.namedNodes[a]||(this.namedNodes[a]=[]),this.namedNodes[a].push(n))}}}},{key:"isValidLabel",value:function(n){var i={none:K.CacheMode.NONE,char:K.CacheMode.CHAR,bitmap:K.CacheMode.BITMAP};return n.cacheMode===i[this.typeLabel]}},{key:"sortBatchNodes",value:function(){if(this.batchLabel){if("all"===this.typeLabel){var n,i,a;null===(n=this.batchNodes.label_bitmap)||void 0===n||n.setSiblingIndex(this.depthLabelBitmap),null===(i=this.batchNodes.label_char)||void 0===i||i.setSiblingIndex(this.depthLabelChar),null===(a=this.batchNodes.label_none)||void 0===a||a.setSiblingIndex(this.depthLabelNone)}else{var o,y={bitmap:this.depthLabelBitmap,char:this.depthLabelChar,none:this.depthLabelNone}[this.typeLabel]||this.depthLabelChar;null===(o=this.batchNodes.label)||void 0===o||o.setSiblingIndex(y)}}this.batchNodes.sprite&&this.batchNodes.sprite.setSiblingIndex(this.depthSprite);for(var f=0;f<this.listName.length;f++){var m=this.listName[f];if(m){var g=this.depthNames[f]||0,b=this.batchNodes[m];b&&b.setSiblingIndex(g)}}}},{key:"batchNodeArray",value:function(n,i){for(var a=0;a<n.length;a++){var o=n[a];null!=o&&o.isValid&&o.activeInHierarchy&&o.parent!==i&&(this.isBatchContainer(o)||o.isTransformDirty()&&this.isParentChainActive(o)&&(o.setParent(i,!0),o.layer=et.Enum.UI_2D))}}},{key:"isBatchContainer",value:function(n){var i=ri.vals(this.batchNodes);return rn.has(i,n)}},{key:"isParentChainActive",value:function(n){for(var i=n,a=this.node;i&&i!==a;){if(!i.active||!i.isValid)return!1;i=i.parent}return i===a}},{key:"restoreNodes",value:function(){var n=this,t=function(i){var a=n.originalParents[i.uuid];null!=a&&a.isValid&&i.parent!==a&&n.isParentChainActive(a)&&i.setParent(a,!0)};if(this.batchLabel){if("all"===this.typeLabel)for(var i in this.labelNodesByType)for(var a=this.labelNodesByType[i],o=0;o<a.length;o++){var y=a[o];y&&t(y)}else for(var f=0;f<this.labelNodes.length;f++){var m=this.labelNodes[f];m&&t(m)}}if(this.batchSprite)for(var g=0;g<this.spriteNodes.length;g++){var b=this.spriteNodes[g];b&&t(b)}if(this.batchByName)for(var k in this.namedNodes){var C=this.namedNodes[k];if(C)for(var w=0;w<C.length;w++){var E=C[w];E&&t(E)}}}},{key:"setupEventListeners",value:function(){N.on(Y.EVENT_AFTER_UPDATE,this.onAfterUpdate),N.on(Y.EVENT_AFTER_RENDER,this.onAfterRender)}},{key:"removeEventListeners",value:function(){N.off(Y.EVENT_AFTER_UPDATE,this.onAfterUpdate),N.off(Y.EVENT_AFTER_RENDER,this.onAfterRender)}},{key:"createBatchContainers",value:function(){if(this.batchLabel){if("all"===this.typeLabel)for(var n=0,i=["bitmap","char","none"];n<i.length;n++){var a=i[n],o=new j("BatchLabel_".concat(a));o.layer=et.Enum.UI_2D,this.node.addChild(o),this.batchNodes["label_".concat(a)]=o}else{var y=new j("BatchLabel");y.layer=et.Enum.UI_2D,this.node.addChild(y),this.batchNodes.label=y}}if(this.batchSprite){var f=new j("BatchSprite");f.layer=et.Enum.UI_2D,this.node.addChild(f),this.batchNodes.sprite=f}if(this.batchByName)for(var m=0;m<this.listName.length;m++){var g=this.listName[m];if(g){var b=new j("Batch_".concat(g));b.layer=et.Enum.UI_2D,this.node.addChild(b),this.batchNodes[g]=b,this.namedNodes[g]=[]}}}},{key:"scanNodes",value:function(n){for(var i=n.children,a=0;a<i.length;a++){var o=i[a];o&&(this.categorizeNode(o),o.children.length>0&&this.scanNodes(o))}}},{key:"batchActiveNodes",value:function(){if(this.batchLabel&&("all"===this.typeLabel?(this.batchNodesByType(this.labelNodesByType.bitmap,"label_bitmap"),this.batchNodesByType(this.labelNodesByType.char,"label_char"),this.batchNodesByType(this.labelNodesByType.none,"label_none")):this.batchNodesByType(this.labelNodes,"label")),this.batchSprite&&this.batchNodesByType(this.spriteNodes,"sprite"),this.batchByName)for(var n in this.namedNodes){var i=this.namedNodes[n];if(i){var a=this.batchNodes[n];a&&this.batchNodeArray(i,a)}}}},{key:"batchNodesByType",value:function(n,i){var a=this.batchNodes[i];a&&this.batchNodeArray(n,a)}}]),r}(O)).prototype,"batchByName",[oI],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),oW=g(oj.prototype,"listName",[oN],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),oq=g(oj.prototype,"depthNames",[oF],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),oK=g(oj.prototype,"batchLabel",[oG],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),oY=g(oj.prototype,"typeLabel",[oM],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"char"}}),oJ=g(oj.prototype,"depthLabel",[oz],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),oZ=g(oj.prototype,"batchSprite",[ox],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),oX=g(oj.prototype,"depthSprite",[oU],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),oH=oj))||oH),A._RF.pop(),A._RF.push({},"9b958Lf6PFClb/JuJfTLzxG","Vibrate",void 0);var ra=P.ccclass,ro=GameCore.Utils,rr=globalThis.game.player,rs=ra("Vibrate")(o7=function(n){i(r,n);var f=a(r);function r(){return o(this,r),f.apply(this,arguments)}return y(r,[{key:"vibrate",value:function(n){if(this.isVibrateEnable()&&!ro.Browser.vibrate(n)){if("performHapticFeedbackAsync"in GameSDK.extra)return void GameSDK.extra.performHapticFeedbackAsync();console.warn("Vibrate failed")}}},{key:"isVibrateEnable",value:function(){return!!rr.getPlayerSetting("vibrate")}}]),r}(O))||o7;A._RF.pop(),A._RF.push({},"e6289NIEoZEGaTkmk/RVxJy","ClassicModeLevels",void 0);var rl=[165,201,158,230,313,274,280,266,295,260,225,215,253,323,297,312,268,144,121,220,190,311,270,302,166,142,169,103,314,299,228,127,172,132,176,134,118,116,131,271,282,138,108,149,244,261,210,208,234,272,184,249,273,216,120,214,317,148,139,154,109,267,162,105,306,245,153,100,232,194,175,292,124,205,110,145,293,322,255,227,304,187,319,111,207,305,177,259,248,269,238,263,126,188,200,135,198,170,218,178,122,321,137,257,291,196,179,252,140,113,223,303,197,224,115,185,181,112,301,146,202,286,289,106,285,147,247,287,246,163,101,206,164,221,298,219,203,129,283,315,324,281,102,114,307,242,318,173,276,152,217,222,195,130,211,308,141,213,236,290,284,309,320,167,161,192,258,265,233,182,237,279,256,156,229,316,212,157,250,183,123,262,159,264,239,117,189,231,199,278,193,125,186,155,310,209,235,204,104,107,325,128,119,160,275,241,168,191,143,136,171,243,174,150,277,251,296,288,240,180,151,254,226,133,294,300];A._RF.pop(),A._RF.push({},"ad867amogBFGJo9jp78EnQP","DevTools",void 0);var ru=function(n){return n.UNLOCK_DEV_TOOLS="unlock-dev-tools",n.TRIGGER_UNLOCK_KEY="trigger-unlock-key",n.TRIGGER_RESET_SEQUENCE="trigger-reset-sequence",n}(ru||{}),rc={Events:ru,UNLOCK_SEQUENCE:"101013012031"};A._RF.pop(),A._RF.push({},"437c2Vl2gxMEIGhbeMNXO0c","EndlessProgressions",void 0);var rh={0:{beeSpeed:60,spawnRandOffset:100,targetOffsetMultiplier:0,count:[8,15]},10:{beeSpeed:60,spawnRandOffset:100,targetOffsetMultiplier:.5,count:[10,20]},20:{beeSpeed:70,spawnRandOffset:110,targetOffsetMultiplier:.6,count:[10,20]},50:{beeSpeed:70,spawnRandOffset:120,targetOffsetMultiplier:.7,count:[10,20]}};A._RF.pop(),A._RF.push({},"91649r9HndHx6OjoY70+mR1","GameMode",void 0);var rp="classic",rd="endless";A._RF.pop(),A._RF.push({},"adb272QtfxDGZ+87PwkWEiN","GameSettings",void 0),A._RF.pop(),A._RF.push({},"27033qxh65F25R336CXMYGV","BeeRole",void 0);var ry=function(n){return n[n.NORMAL=0]="NORMAL",n[n.PATH_SEEKER=1]="PATH_SEEKER",n[n.PUSHER=2]="PUSHER",n}(ry||{});A._RF.pop(),A._RF.push({},"ab23abxgeZD0KDVdLYEeAQS","BeeState",void 0);var rv=function(n){return n[n.IDLE=0]="IDLE",n[n.FLYING=1]="FLYING",n[n.WAITING_TO_SEEK_PATH=2]="WAITING_TO_SEEK_PATH",n[n.SEEKING_PATH=3]="SEEKING_PATH",n[n.ATTACKING=4]="ATTACKING",n[n.DIE=5]="DIE",n}(rv||{});A._RF.pop(),A._RF.push({},"9ef7e8FlFJOS5DAWzwBrkww","GameObject",void 0);for(var rf=function(n){return n.AIR_FAN="air-fan",n.BALLOON="balloon",n.DOGE="doge",n.SPIDER="spider",n.BEE="bee",n.BIG_BEE="big-bee",n.BIG_BEE_BULLET="big-bee-bullet",n.BEEHIVE="beehive",n.BRICK="brick",n.GRASS="grass",n.GRASS_DARK="grass-dark",n.COLLIDER="collider",n.THORN="thorn",n.THORN_BALL="thorn-ball",n.MAP_LINE="line",n.WOOD="wood",n.WOOD_STROKE="wood-stroke",n.POISON="poison",n.POISON_BUBBLE="poison-bubble",n.POISON_SURFACE="poison-surface",n.WATER="water",n.WATER_SURFACE="water-surface",n.DANGER_AREA="danger-area",n.DUST_PARTICLE="dust-particle",n.ROPE="rope",n.JOINT="joint",n.DRAW_LINE="draw-line",n.CROSSING_BEE_LINE="crossing-bee-line",n}({}),rm=rf.COLLIDER,rg=rf.DANGER_AREA,rb=rf.DOGE,rS=[rm,rg,rf.GRASS,rf.GRASS_DARK,rf.BRICK,rf.MAP_LINE,rf.POISON,rf.POISON_SURFACE,rf.POISON_BUBBLE,rf.AIR_FAN,rf.WOOD,rf.WOOD_STROKE,rf.THORN_BALL,rf.THORN,rf.CROSSING_BEE_LINE,rf.BEE,rb,rf.BEEHIVE,rf.ROPE,rf.BALLOON,rf.WATER,rf.WATER_SURFACE,rf.JOINT,rf.DUST_PARTICLE,rf.DRAW_LINE],rk={},rC=0;rC<rS.length;rC++)rk[rS[rC]]=rC;A._RF.pop(),A._RF.push({},"4c577T9x2FPKpyFoVPXbav0","ObjectIds",void 0);var rw=function(n){return n[n.BRICK=1]="BRICK",n[n.STROKE=3]="STROKE",n[n.GRASS_DARK=4]="GRASS_DARK",n[n.GRASS=5]="GRASS",n[n.COLLIDER=6]="COLLIDER",n[n.THORN=7]="THORN",n[n.WATER=8]="WATER",n[n.WATER_SURFACE=9]="WATER_SURFACE",n[n.LINE=10]="LINE",n[n.POISON_SURFACE=11]="POISON_SURFACE",n[n.POISON=12]="POISON",n[n.WOOD=13]="WOOD",n[n.THORN_BALL=14]="THORN_BALL",n[n.CONNECT=15]="CONNECT",n[n.DANGER_AREA=16]="DANGER_AREA",n[n.BALLOON=17]="BALLOON",n[n.AIR_FAN=18]="AIR_FAN",n[n.SPIDER=19]="SPIDER",n[n.DOGE_A=101]="DOGE_A",n[n.DOGE_B=106]="DOGE_B",n[n.BIG_BEE=107]="BIG_BEE",n[n.BEEHIVE_A=102]="BEEHIVE_A",n[n.BEEHIVE_B=103]="BEEHIVE_B",n[n.BEEHIVE_C=104]="BEEHIVE_C",n[n.BEEHIVE_D=105]="BEEHIVE_D",n}(rw||{});A._RF.pop(),A._RF.push({},"7bb7ftpsjJCX5G6+WtNYJ2x","PhysicsGroup",void 0);var rE=function(n){return n[n.DEFAULT=1]="DEFAULT",n[n.BEE=2]="BEE",n[n.MAIN_OBJECT=4]="MAIN_OBJECT",n[n.WORLD_BOUND=8]="WORLD_BOUND",n[n.ROPE=16]="ROPE",n}(rE||{});A._RF.pop(),A._RF.push({},"a6e4bjV/RVH17qBEx1mZaFg","ResourcePaths",void 0);var rT,r_=function(n){return n.WATER_SURFACE_FRAME="sprites/water-surface/spriteFrame",n.IC_HAND_FRAME="sprites/ic-hand/spriteFrame",n.POISON_CIRCLE_FRAME="sprites/poison-circle/spriteFrame",n.POISON_BUBBLE_PREFAB="prefabs/PoisonBubble",n.DUST_PARTICLE_SPINE="spines/dust-particle/siwang_texiao",n.MAP_JSON_PREFIX="maps-json/",n}(r_||{});A._RF.pop(),A._RF.push({},"476e6UyMHFJyI2GmFP4KpHY","BaseObject",void 0);var rR,rP,rB,rL,rD,rO,rI=(0,P.ccclass)("BaseObject")(rT=function(n){i(r,n);var f=a(r);function r(){var n;o(this,r);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return(n=f.call.apply(f,[this].concat(a))).points=[],n.body=null,n.bodyType=en.Static,n}return y(r,[{key:"onLoad",value:function(){this.node.layer=et.Enum.UI_2D}},{key:"sleep",value:function(){if(!this.body){if(this.body=this.getComponent(ei),!this.body)return;this.bodyType=this.body.type}this.enabled=!1,this.body.sleep(),this.body.type=en.Static}},{key:"wake",value:function(){if(this.enabled=!0,this.body)this.body.wakeUp(),this.body.type=this.bodyType;else{if(this.body=this.getComponent(ei),!this.body)return;this.bodyType=this.body.type}}},{key:"hide",value:function(){var n;this.enabled=!1,null===(n=this.body)||void 0===n||n.sleep();var i=this.getComponent(ea.Skeleton);i&&(i.enabled=!1);var a=this.getComponent(F);a&&(a.enabled=!1)}},{key:"preHide",value:function(){var n;this.enabled=!1,null===(n=this.body)||void 0===n||n.sleep(),this.scheduleOnce(this.hide,.2)}},{key:"appear",value:function(){this.enabled=!0;var n=this.getComponent(ea.Skeleton);n&&(n.enabled=!0)}},{key:"setSpineAnimation",value:function(n,i){var a=this.getComponent(ea.Skeleton);null==a||a.setAnimation(0,n,i)}},{key:"setEnable",value:function(n){this.enabled=n}},{key:"angle",value:function(n,i){var a=Math.atan2(i,n);return a<0&&(a+=2*Math.PI),a}},{key:"getVectorDataFromAToB",value:function(n,i){var a=i.x-n.x,o=i.y-n.y;return{vector:new eo(a,o).normalize(),dx:a,dy:o}}},{key:"kill",value:function(){this.node.active=!1}},{key:"revive",value:function(){this.node.active=!0}}]),r}(O))||rT;A._RF.pop(),A._RF.push({},"15b7bvQaXpFgItiEHCr7GsP","AirFan",void 0);var rN=P.ccclass,rF=P.property,rG=GameCore.Utils.Array,rM=(rR=rN("AirFan"),rP=rF(D),rB=rF(er),rR((rD=g((rL=function(n){i(s,n);var f=a(s);function s(){var n;o(this,s);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=f.call.apply(f,[this].concat(a)),b(n,"pushForce",rD,k(n)),n.force=new eo(0,0),n.affectedObjects=[],b(n,"collider",rO,k(n)),n.colliders=[],n.onBeginContact=function(i,a){rG.has(n.affectedObjects,a.node.name)&&-1===n.colliders.findIndex(function(n){return n.node===a.node})&&n.colliders.push(a)},n.onEndContact=function(i,a){var o=n.colliders.indexOf(a);-1!==o&&n.colliders.splice(o,1)},n}return y(s,[{key:"__preload",value:function(){this.collider=this.getComponent(er),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){t_.lazyValidateProperties(this)}},{key:"start",value:function(){this.colliders=[],this.affectedObjects=[rf.DOGE,rf.THORN_BALL,rf.DRAW_LINE,rf.WOOD,rf.BALLOON],this.collider.on(es.BEGIN_CONTACT,this.onBeginContact),this.collider.on(es.END_CONTACT,this.onEndContact)}},{key:"update",value:function(n){var i,a=m(this.colliders);try{for(a.s();!(i=a.n()).done;){var o=i.value,y=o.getComponent(ei);if(y){var f=this.force;o.node.name===rf.DRAW_LINE&&(f=this.force.clone().multiplyScalar(o.density/3)),o.node.name===rf.DOGE&&(f=this.force.clone().multiplyScalar(250/this.pushForce)),y.applyForceToCenter(f,!0)}}}catch(n){a.e(n)}finally{a.f()}}},{key:"setForceDirection",value:function(n){var i=new eo(0,1).rotate(el.toRadian(n));this.force=i.clone().normalize().multiplyScalar(this.pushForce)}},{key:"sleep",value:function(){w(E(s.prototype),"sleep",this).call(this),this.enabled=!1}},{key:"wake",value:function(){w(E(s.prototype),"wake",this).call(this),this.enabled=!0}}]),s}(rI)).prototype,"pushForce",[rP],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 400}}),rO=g(rL.prototype,"collider",[rB],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rL))||rL);A._RF.pop(),A._RF.push({},"8a02eYTwSpP9IpQ4MrTsAiL","SpineAnimationName",void 0);var rz,rx,rU,rH,rj,rV,rW={IDLE:"normal",SMILE:"smile",HURT:"hurt",INACTIVE:"cry",DROWNING:"troll",FREAK_OUT:"freak out",THORN_INACTIVE:"die"},rq={FLAP_WINGS:"animation",SMOKE_DISAPPEAR:"animation3"},rK={APPEAR:"animation",EXPLODE:"animation2"};A._RF.pop(),A._RF.push({},"ff37brNpltMuaZm+M+x9+1N","Rope",void 0);var rY,rJ,rZ,rX,rQ,r$,r0,r1,r2=P.ccclass,r3=P.property,r4=(rz=r2("Rope"),rx=r3(eu),rU=r3(D),rz((rj=g((rH=function(n){i(s,n);var f=a(s);function s(){var n;o(this,s);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=f.call.apply(f,[this].concat(a)),b(n,"frame",rj,k(n)),b(n,"length",rV,k(n)),n.nodes=[],n}return y(s,[{key:"onLoad",value:function(){this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){t_.lazyValidateProperties(this)}},{key:"start",value:function(){this.nodes=[],this.node.setPosition(this.headJoint.getPosition()),console.log(this.headJoint.getPosition(),this.tailJoint.getPosition(),this.node.getPosition());for(var n=this.headJoint.getPosition().clone().add(new U(0,4)).multiplyScalar(-1),i=this.tailJoint.getPosition().clone().add(new U(0,115)).add(n).multiplyScalar(1/this.length),a=i.length(),o=i.clone().multiplyScalar(-1*this.length),y=new eo(o.x,o.y),f=0;f<this.length;f++){var m=this.createNode(a);if(!m)return void console.warn("Rope: node-".concat(f," not found"));this.node.addChild(m),m.name="node-".concat(f),m.setPosition(i.clone().multiplyScalar(f)),this.nodes.push(m)}for(var g=0;g<this.nodes.length;g++){var b=this.nodes[g];if(0!==g){var k=this.nodes[g-1],C=b.addComponent(ec);C.enabled=!1,C.anchor=new eo(0,-4),C.connectedAnchor=new eo(0,4),C.connectedBody=k.getComponent(ei),C.collideConnected=!1,C.enableLimit=!0,C.enabled=!0;var w=b.addComponent(eh);if(w.enabled=!1,w.connectedBody=this.headJoint.getComponent(ei),w.anchor=new eo(0,-4),w.connectedAnchor=new eo(0,4),w.collideConnected=!1,w.maxForce=160,w.enabled=!0,g===this.nodes.length-1){var E=this.tailJoint.addComponent(ec);E.enabled=!1,E.anchor=new eo(0,115),E.connectedBody=b.getComponent(ei),E.connectedAnchor=new eo(0,4),E.collideConnected=!1,E.enableLimit=!0,E.enabled=!0}}else{var T=b.addComponent(ec);T.enabled=!1,T.connectedBody=this.headJoint.getComponent(ei),T.anchor=new eo(0,-4),T.connectedAnchor=new eo(0,4),T.enableLimit=!0,T.collideConnected=!1,T.enabled=!0}}var _=this.tailJoint.addComponent(eh);_.enabled=!1,_.connectedBody=this.headJoint.getComponent(ei),_.anchor=new eo(0,118),_.connectedAnchor=new eo(0,-4),_.linearOffset=y,_.maxForce=500,_.enabled=!0}},{key:"disconnect",value:function(){console.log("Disconnecting rope");var n=this.nodes[0].getComponent(ec);if(n){n.connectedBody=null,n.enabled=!1;var i=this.tailJoint.getComponent(ec);if(i){i.connectedBody=null,i.enabled=!1;var a=this.tailJoint.getComponent(eh);a&&(a.enabled=!1,a.connectedBody=null);var o,y=m(this.nodes);try{for(y.s();!(o=y.n()).done;){var f=o.value.getComponent(F);if(!f)return void console.warn("Rope: Sprite not found");f.enabled=!1}}catch(n){y.e(n)}finally{y.f()}}else console.warn("Rope: Final joint not found")}else console.warn("Rope: Starting joint not found")}},{key:"createNode",value:function(n){var i=new j("node");i.layer=this.node.layer,i.addComponent(F).spriteFrame=this.frame;var a=i.addComponent(Q);a.setAnchorPoint(.5,.5),a.setContentSize(6,1.2*n);var o=i.addComponent(ei);return o.linearDamping=5,o.angularDamping=50,o.gravityScale=.1,o.group=rE.ROPE,i.addComponent(ep).size=a.contentSize,i.name=rf.ROPE,i}}]),s}(O)).prototype,"frame",[rx],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rV=g(rH.prototype,"length",[rU],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),rH))||rH);A._RF.pop(),A._RF.push({},"a8a47NhLJ9C1ahfjfiJ2xjc","Balloon",void 0);var r5=P.ccclass,r6=P.property,r7=GameCore.Utils.Array,r9=(rY=r5("Balloon"),rJ=r6(ed),rZ=r6(er),rX=r6(ei),rY((r$=g((rQ=function(n){i(r,n);var f=a(r);function r(){var n;o(this,r);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=f.call.apply(f,[this].concat(a)),b(n,"ropePrefab",r$,k(n)),b(n,"collider",r0,k(n)),b(n,"rigidBody",r1,k(n)),n.rope=null,n.onBeginContact=function(i,a){if(n.rope){var o=[rf.BEE,rf.THORN,rf.THORN_BALL];r7.has(o,a.node.name)&&(n.rope.disconnect(),n.setSpineAnimation(rK.EXPLODE,!1),n.scheduleOnce(function(){n.rigidBody.enabled=!1}))}},n}return y(r,[{key:"__preload",value:function(){this.collider=this.getComponent(er),this.rigidBody=this.getComponent(ei),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){t_.lazyValidateProperties(this)}},{key:"start",value:function(){this.setSpineAnimation(rK.APPEAR,!0),this.collider.on(es.BEGIN_CONTACT,this.onBeginContact)}},{key:"connectToDoge",value:function(n){var i=ey(this.ropePrefab).getComponent(r4);if(i)return i.headJoint=this.node,i.tailJoint=n,i.node.name=rf.ROPE,this.rope=i,i;console.warn("Balloon: Rope component not found")}}]),r}(rI)).prototype,"ropePrefab",[rJ],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),r0=g(rQ.prototype,"collider",[rZ],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),r1=g(rQ.prototype,"rigidBody",[rX],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rQ))||rQ);A._RF.pop(),A._RF.push({},"ca922n1V0RLioEyUJg8hQXH","GameEvents",void 0);var r8=function(n){return n.NEXT_LEVEL="next-level",n.UPDATE_LEVEL="update-level",n.START_OVER="start-over",n.SELECT_LEVEL="select-level",n.GAME_START="game-start",n.GAME_PAUSE="game-pause",n.GAME_RESUME="game-resume",n.GAME_REPLAY="game-replay",n.SHOW_HINT="show-hint",n.SKIP_LEVEL="skip-level",n.TIME_OUT="time-out",n.DRAWING="drawing",n.DOGE_DIE="doge-die",n.DOGE_SURVIVE="doge-survive",n.BEE_DIE="bee-die",n.BEE_ATTACK="bee-attack",n.BIG_BEE_DIE="big-bee-die",n.GAME_OBJECTS_SPAWNED="game-objects-spawned",n}(r8||{});A._RF.pop(),A._RF.push({},"744a5WT+0VHFLma6AT7mXct","NormalBehavior",void 0);var se=function(){function e(n){o(this,e),this.touchCount=0,this.bee=n,this.timeToAttack=el.randomRange(.7,.8),this.countTimeToAttack=0}return y(e,[{key:"onBeginContact",value:function(){var n=this;1===this.touchCount&&this.bee.scheduleOnce(function(){n.touchCount>=3&&n.activePusher(),n.touchCount=0},.75),this.touchCount++}},{key:"activePusher",value:function(){this.bee.setRole(ry.PUSHER)}},{key:"update",value:function(n){this.bee.state===rv.ATTACKING&&(this.countTimeToAttack+=n,this.countTimeToAttack>this.timeToAttack&&(this.bee.findTarget(),this.bee.attackTarget(),this.timeToAttack=el.randomRange(.4,.6),this.countTimeToAttack=0))}}]),e}();A._RF.pop(),A._RF.push({},"ec831BZISdLgp8vKNuRirUM","PusherBehavior",void 0);var st=function(){function e(n){o(this,e),this.bee=n}return y(e,[{key:"onBeginContact",value:function(){var n=this.bee;if(n.target){var i=el.randomRange(20,30),a=n.getVectorDataFromAToB(n.node.getWorldPosition(),n.target.getWorldPosition());a.vector.rotate(Math.random()>.5?-Math.PI/2:Math.PI/2).multiplyScalar(i),n.move(a);var o=n.getComponent(ev);o&&(o.density*=1.1,o.density>=2.5&&(o.density=1,n.setRole(ry.NORMAL),n.setState(rv.ATTACKING)))}}}]),e}();A._RF.pop(),A._RF.push({},"19c52/F5VRPcbm2BqdbChIp","BaseBehavior",void 0);var sn,si,sa,so,sr,ss,sl,su,sc,sh,sp,sd=function(){function e(n){o(this,e),this.bee=n,this.normalBehavior=new se(n),this.pusherBehavior=new st(n),this.seekingPathBehavior=null}return y(e,[{key:"onBeginContact",value:function(n,i){switch(this.bee.role){case ry.NORMAL:this.normalBehavior.onBeginContact();break;case ry.PATH_SEEKER:if(!this.seekingPathBehavior)return void console.warn("Bee: Seeking path behavior is null");this.seekingPathBehavior.onBeginContact(n,i);break;case ry.PUSHER:this.pusherBehavior.onBeginContact()}}},{key:"update",value:function(n){this.updateSpecialRole(n)||this.normalBehavior.update(n)}},{key:"updateSpecialRole",value:function(n){switch(this.bee.role){case ry.PATH_SEEKER:return!!this.seekingPathBehavior&&this.seekingPathBehavior.update(n);default:return!1}}}]),e}();A._RF.pop(),A._RF.push({},"0b146P+xAlN5LGe2MJHlJDc","Bee",void 0);var sy=P.ccclass,sv=P.property,sf=(sn=sy("Bee"),si=sv(j),sa=sv(ea.Skeleton),so=sv(er),sr=sv(ei),sn((sl=g((ss=function(n){i(r,n);var f=a(r);function r(){var n;o(this,r);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=f.call.apply(f,[this].concat(a)),b(n,"flipNode",sl,k(n)),b(n,"spriteNode",su,k(n)),n.target=null,n.isSpawnLeftSide=!1,n.role=ry.NORMAL,n.state=rv.IDLE,n.behavior=new sd(k(n)),n.speed=0,b(n,"collider",sc,k(n)),b(n,"rigidBody",sh,k(n)),b(n,"gameObjects",sp,k(n)),n.wanderingOriginHeight=null,n.isWandering=!1,n.onBeginContact=function(i,a){n.enabled&&(n.rigidBody.linearDamping=el.randomRangeInt(6,8),a.node.name!==rf.THORN&&a.node.name!==rf.POISON&&a.node.name!==rf.BIG_BEE_BULLET?a.node.name!==rf.WATER?(a.node.name===rf.DOGE&&e2.playSound(e4.BEE_STING_DOGE,{volume:.3}),n.behavior.onBeginContact(i,a)):n.drown():n.smokeDisappear())},n}return y(r,[{key:"__preload",value:function(){var n;this.collider=this.getComponent(er),this.rigidBody=this.getComponent(ei),this.gameObjects=null===(n=this.node.parent)||void 0===n?void 0:n.getComponent(cT),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){t_.lazyValidateProperties(this)}},{key:"start",value:function(){this.setState(rv.IDLE),this.collider.on(es.BEGIN_CONTACT,this.onBeginContact),this.collider.enabled=!1}},{key:"followTarget",value:function(n){this.target=n,this.collider.enabled=!0,this.attackTarget()}},{key:"followInstructions",value:function(){this.collider.enabled=!0}},{key:"findTarget",value:function(){var n=this.gameObjects.getNearestDogeToBee(this);n&&!n.isCantBeTargeted()?this.target=n.node:this.target=null}},{key:"smokeDisappear",value:function(){this.preHide(),this.setSpineAnimation(rq.SMOKE_DISAPPEAR,!1),this.setState(rv.DIE),this.node.scene.emit(r8.BEE_DIE)}},{key:"flap",value:function(){this.setSpineAnimation(rq.FLAP_WINGS,!0)}},{key:"attackTarget",value:function(){var n=this;if(!this.target){if(this.isWandering)return;this.isWandering=!0,this.scheduleOnce(function(){n.isWandering=!1},.5),this.speed=el.randomRange(40,50);var i=this.node.getWorldPosition();null===this.wanderingOriginHeight&&(this.wanderingOriginHeight=i.y+50),i.x+=el.randomRange(-300,300),i.y=el.randomRange(this.wanderingOriginHeight,this.wanderingOriginHeight-50);var a=this.getVectorDataFromAToB(this.node.getWorldPosition(),i);return this.move(a),void(this.rigidBody.linearDamping=0)}this.speed=el.randomRange(20,30);var o=this.getVectorDataFromAToB(this.node.getWorldPosition(),this.target.getWorldPosition());o.vector.rotate(el.randomRange(-.3,.3)).multiplyScalar(this.speed),this.move(o),this.rigidBody.linearDamping=0,this.setState(rv.ATTACKING)}},{key:"sleep",value:function(){w(E(r.prototype),"sleep",this).call(this),this.target=null}},{key:"rotateToVector",value:function(n){this.node.angle=el.toDegree(this.angle(n.x,n.y)),this.node.angle+=180;var i=this.node.angle/360-Math.floor(this.node.angle/360);i>.25&&i<.75?this.flipNode.setScale(new U(1,-1,1)):this.flipNode.setScale(new U(1,1,1))}},{key:"move",value:function(n){this.rigidBody.linearVelocity=n.vector,this.rotateToVector({x:n.dx,y:n.dy})}},{key:"fly",value:function(n){this.rigidBody.linearVelocity=n,this.rigidBody.linearDamping=0,this.flap(),this.setState(rv.FLYING)}},{key:"setState",value:function(n){this.state=n}},{key:"setRole",value:function(n){this.role=n}},{key:"update",value:function(n){this.behavior.update(n)}},{key:"drown",value:function(){this.collider.enabled=!1,this.speed=20;var n=this.node.getWorldPosition();n.y=n.y-1e3;var i=this.getVectorDataFromAToB(this.node.getWorldPosition(),n);this.move(i),this.rigidBody.linearDamping=0,this.spriteNode.paused=!0,this.setState(rv.DIE),this.node.scene.emit(r8.BEE_DIE)}},{key:"setSpineAnimation",value:function(n,i){this.spriteNode.setAnimation(0,n,i)}}]),r}(rI)).prototype,"flipNode",[si],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),su=g(ss.prototype,"spriteNode",[sa],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),sc=g(ss.prototype,"collider",[so],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),sh=g(ss.prototype,"rigidBody",[sr],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),sp=g(ss.prototype,"gameObjects",[sv],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ss))||ss);A._RF.pop(),A._RF.push({},"23d64mdR6VPRoojd1BBKwos","World",void 0);var sm,sg,sb,sS,sk,sC,sw={WIDTH:1176,HEIGHT:1792};A._RF.pop(),A._RF.push({},"5f264eibqlEH7PqbJQqHTF7","Line",void 0);var sE=P.ccclass,s_=P.property,sA=(sm=sE("Line"),sg=s_(W),sb=s_(ei),sm((sk=g((sS=function(n){i(s,n);var f=a(s);function s(){var n;o(this,s);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return(n=f.call.apply(f,[this].concat(a))).points=[],n.colliderInterval=20,n.colliders=[],n.colliderTag=0,b(n,"graphic",sk,k(n)),b(n,"rigidBody",sC,k(n)),n}return y(s,[{key:"__preload",value:function(){this.graphic=this.getComponent(W),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){t_.lazyValidateProperties(this)}},{key:"init",value:function(){this.points=[],this.colliders=[],this.colliderTag=0}},{key:"drawTo",value:function(n,i,a,o){this.graphic.moveTo(n,i),this.graphic.lineTo(a,o),this.graphic.stroke()}},{key:"addBody",value:function(n,i){var a=this.node.addComponent(ev);a.offset=new eo(n,i),a.radius=8,a.density=5,a.tag=this.colliderTag,a.apply(),this.colliderTag+=1,this.colliders.push(a)}},{key:"deActiveColliders",value:function(){var n,i=m(this.colliders);try{for(i.s();!(n=i.n()).done;)n.value.enabled=!1}catch(n){i.e(n)}finally{i.f()}}},{key:"storePoints",value:function(n,i){var a=new eo(n,i);this.points.push(a)}},{key:"addPhysics",value:function(){for(var n=0;n<this.points.length-1;n++){var i=this.points[n],a=this.points[n+1];if(i&&a){var o=this.getInternalPoints(i,a);if(n<this.points.length-2){var y=o.pop();if(!y){console.warn("Line: lastPoint not found");continue}this.points[n+1]=y}var f,g=m(o);try{for(g.s();!(f=g.n()).done;){var b,k=f.value,C=!1,w=m(this.colliders);try{for(w.s();!(b=w.n()).done;){var E=b.value;el.Vec2.distance(k,E.offset)<2*E.radius&&(C=!0)}}catch(n){w.e(n)}finally{w.f()}C||this.addBody(k.x,k.y)}}catch(n){g.e(n)}finally{g.f()}}}var T=this.points[this.points.length-1];T&&this.addBody(T.x,T.y)}},{key:"getInternalPoints",value:function(n,i){for(var a=i.x-n.x,o=i.y-n.y,y=new eo(a,o).normalize().multiplyScalar(this.colliderInterval),f=el.Vec2.distance(n,i),m=Math.floor(f/this.colliderInterval),g=[n],b=0;b<m;b++){var k=g[g.length-1];if(k){var C=k.clone().add(y);g.push(C)}}return g}},{key:"findNearestCollider",value:function(n){var i=this.colliders[0];if(!i)return null;var a=new U(i.worldPosition.x,i.worldPosition.y,0),o=eo.distance(n,a);return this.colliders.forEach(function(a){var y=new U(a.worldPosition.x,a.worldPosition.y,0);eo.distance(n,y)<o&&(o=eo.distance(n,y),i=a)}),i}}]),s}(rI)).prototype,"graphic",[sg],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),sC=g(sS.prototype,"rigidBody",[sb],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),sS))||sS);A._RF.pop(),A._RF.push({},"afc3eWzi4tHNYb9W7f6QpCX","SeekingPathBehavior",void 0);var sR,sP,sB=function(){function e(n,i){o(this,e),this.isFinishSeeking=!1,this.vectorDataGroup=[],this.index=0,this.bee=n,this.isSeekToLastPoint=i,this.vectorDataGroup=[],this.isFinishSeeking=!1,this.time=.02,this.remaining=0,this.index=0}return y(e,[{key:"seek",value:function(n){var i=this.bee.node.scene.getComponentInChildren(sA);if(!i)return console.warn("Bee: Line is null"),!1;var a=i.colliders.findIndex(function(i){if(i.tag===n.tag)return!0});if(-1===a)return!1;this.vectorDataGroup=[],this.isFinishSeeking=!1,this.time=.04,this.remaining=0,this.index=0;var o=this.bee.speed;return o||(o=el.randomRange(20,30)),this.isSeekToLastPoint?this.seekToLastPoint(a,i,o):this.seekToFirstPoint(a,i,o),!0}},{key:"seekToLastPoint",value:function(n,i,a){for(var o=n;o<i.colliders.length-1;o++){var y=i.colliders[o],f=i.colliders[o+1],m=this.bee.getVectorDataFromAToB(y.worldPosition,f.worldPosition);m.vector.multiplyScalar(a),this.vectorDataGroup.push(m)}}},{key:"seekToFirstPoint",value:function(n,i,a){for(var o=n;o>0;o--){var y=i.colliders[o],f=i.colliders[o-1],m=this.bee.getVectorDataFromAToB(y.worldPosition,f.worldPosition);m.vector.multiplyScalar(a),this.vectorDataGroup.push(m)}}},{key:"flyToNextDirection",value:function(){var n=this.vectorDataGroup[this.index];if(this.index+=1,!n)return this.isFinishSeeking=!0,this.bee.setRole(ry.NORMAL),void this.bee.setState(rv.ATTACKING);this.bee.move(n)}},{key:"fly",value:function(n){this.remaining+=n,this.remaining>this.time&&(this.flyToNextDirection(),this.time=.02,this.remaining=0)}},{key:"onBeginContact",value:function(n,i){if(this.bee.state===rv.SEEKING_PATH&&i.node.name!==rf.DRAW_LINE)return this.isFinishSeeking=!0,this.bee.setRole(ry.NORMAL),void this.bee.setState(rv.ATTACKING);this.isFinishSeeking||this.bee.state===rv.WAITING_TO_SEEK_PATH||i.node.name!==rf.DRAW_LINE||this.handlePathSeekerTouchLine(i)}},{key:"handlePathSeekerTouchLine",value:function(n){var i=this;this.seek(n)&&this.bee.state!==rv.SEEKING_PATH&&(this.bee.setState(rv.WAITING_TO_SEEK_PATH),this.bee.scheduleOnce(function(){i.bee.setState(rv.SEEKING_PATH)},.3))}},{key:"update",value:function(n){return this.bee.state===rv.SEEKING_PATH&&(this.fly(n),!0)}}]),e}();A._RF.pop(),A._RF.push({},"2181aAj+ElOoL2tBGH10euY","Beehive",void 0);var sL,sD,sO,sI,sN,sF,sG,sM,sz,sx,sU=P.ccclass,sH=P.property,sj=sU("Beehive")((sP=g((sR=function(n){i(r,n);var f=a(r);function r(){var n;o(this,r);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return(n=f.call.apply(f,[this].concat(a))).totalPathSeekers=0,n.isSeekToLastPoint=!0,b(n,"gameObjects",sP,k(n)),n}return y(r,[{key:"onLoad",value:function(){var n;this.gameObjects=null===(n=this.node.parent)||void 0===n?void 0:n.getComponent(cT),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){t_.lazyValidateProperties(this)}},{key:"releaseBee",value:function(n){var i=this;this.updateTotalPathSeekers(),this.scheduleOnce(function(){var a=n.getComponent(sf);if(a){i.createPathSeeker(a),"isRightSide"in i.node&&!0===i.node.isRightSide?i.spawnInRightSide(a):i.spawnInLeftSide(a),a.wake();var o=i.gameObjects.getRandomDogeToBee();o&&i.scheduleOnce(function(){return a.followTarget(o.node)},.2)}},el.randomRange(.1,.4))}},{key:"updateTotalPathSeekers",value:function(){"totalPathSeekers"in this.node&&"number"==typeof this.node.totalPathSeekers&&(this.totalPathSeekers=this.node.totalPathSeekers)}},{key:"spawnInLeftSide",value:function(n){var i=this.node.getPosition(),a=i.x,o=i.y,y=el.randomRangeInt(-10,0),f=el.randomRangeInt(38,48);n.isSpawnLeftSide=!0,n.node.setScale(new U(1,1,1)),n.node.setPosition(a+y,o+f),n.fly(new eo(-2,-1).normalize().multiplyScalar(2))}},{key:"spawnInRightSide",value:function(n){var i=this.node.getPosition(),a=i.x,o=i.y,y=el.randomRangeInt(0,10),f=el.randomRangeInt(38,48);n.isSpawnLeftSide=!1,n.node.setScale(new U(1,1,1)),n.node.setPosition(a+y,o+f),n.fly(new eo(2,-1).normalize().multiplyScalar(2))}},{key:"createPathSeeker",value:function(n){0!==this.totalPathSeekers&&(n.setRole(ry.PATH_SEEKER),n.behavior.seekingPathBehavior=new sB(n,this.isSeekToLastPoint),this.isSeekToLastPoint=!this.isSeekToLastPoint,this.totalPathSeekers-=1)}}]),r}(rI)).prototype,"gameObjects",[sH],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),sR))||sR;A._RF.pop(),A._RF.push({},"a17a07Pu/tAGb4MdM3jxHke","BigBeeBullet",void 0);var sV,sW,sq,sK,sY,sJ,sZ,sX,sQ,s$,s0,s1=P.ccclass,s2=P.property,s3=(sL=s1("BigBeeBullet"),sD=s2(F),sO=s2(ea.Skeleton),sI=s2(er),sN=s2(ei),sL((sG=g((sF=function(n){i(r,n);var f=a(r);function r(){var n;o(this,r);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=f.call.apply(f,[this].concat(a)),b(n,"stinger",sG,k(n)),b(n,"ci",sM,k(n)),b(n,"collider",sz,k(n)),b(n,"rigidBody",sx,k(n)),n.onBeginContact=function(){n.stinger.active=!1,n.ci.active=!0;var i=n.ci.getComponent(ea.Skeleton);i?(i.enabled=!0,i.setAnimation(0,"animation",!1),e2.playSound(e4.BEE_BULLET_EXPLODE,{allowMultiple:!0}),i.setCompleteListener(function(){n.kill()})):console.warn("BigBeeBullet: ske not found")},n}return y(r,[{key:"onLoad",value:function(){this.collider=this.getComponent(er),this.rigidBody=this.getComponent(ei),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){t_.lazyValidateProperties(this)}},{key:"start",value:function(){this.revive()}},{key:"revive",value:function(){w(E(r.prototype),"revive",this).call(this),this.stinger.active=!0,this.ci.active=!1,this.ci.getComponent(ea.Skeleton).enabled=!1,this.collider.once(es.BEGIN_CONTACT,this.onBeginContact)}},{key:"kill",value:function(){w(E(r.prototype),"kill",this).call(this),this.stinger.active=!1,this.ci.active=!1}},{key:"forwardToDoge",value:function(n){var i=el.randomRange(20,30),a=this.getVectorDataFromAToB(this.node.getWorldPosition(),n.getWorldPosition());a.vector.rotate(el.randomRange(-.3,.3)).multiplyScalar(i),this.rigidBody.linearVelocity=a.vector,this.node.angle=el.toDegree(this.angle(a.dx,a.dy))}}]),r}(rI)).prototype,"stinger",[sD],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),sM=g(sF.prototype,"ci",[sO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),sz=g(sF.prototype,"collider",[sI],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),sx=g(sF.prototype,"rigidBody",[sN],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),sF))||sF);A._RF.pop(),A._RF.push({},"2b15b1CihdEf60Zy/wIYirK","BigBee",void 0);var s4,s5,s6,s7,s9,s8,le,lt,ln=P.ccclass,li=P.property,la=(sV=ln("BigBee"),sW=li(ed),sq=li(ea.Skeleton),sK=li(ev),sY=li(ei),sV((sZ=g((sJ=function(f){i(c,f);var m,g=a(c);function c(){var n;o(this,c);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=g.call.apply(g,[this].concat(a)),b(n,"bulletPrefab",sZ,k(n)),n.state=rv.IDLE,n.target=null,n.bulletPool=[],n.timeToAttack=0,n.countTimeToAttack=0,b(n,"skeleton",sX,k(n)),b(n,"gameObjects",sQ,k(n)),b(n,"collider",s$,k(n)),b(n,"rigidBody",s0,k(n)),n.onBeginContact=function(i,a){n.enabled&&(a.node.name!==rf.THORN&&a.node.name!==rf.POISON||n.smokeDisappear())},n}return y(c,[{key:"onLoad",value:function(){var n;this.skeleton=this.getComponent(ea.Skeleton),this.gameObjects=null===(n=this.node.parent)||void 0===n?void 0:n.getComponent(cT),this.collider=this.getComponent(ev),this.rigidBody=this.getComponent(ei),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){t_.lazyValidateProperties(this)}},{key:"start",value:function(){this.node.setScale(new U(.7,.7,.7)),this.timeToAttack=el.randomRange(1,2),this.countTimeToAttack=0,this.createBulletPool(),this.initDustParticle();var n=this.gameObjects.getRandomDogeToBee();n?(this.target=n.node,this.state=rv.FLYING,this.collider.on(es.BEGIN_CONTACT,this.onBeginContact)):console.warn("BigBee: Target not found")}},{key:"update",value:function(n){this.state===rv.ATTACKING&&(this.countTimeToAttack+=n,this.countTimeToAttack>this.timeToAttack&&(this.attackTarget(),this.timeToAttack=el.randomRange(1,2),this.countTimeToAttack=0))}},{key:"createBulletPool",value:function(n){var i=arguments.length>0&&void 0!==n?n:5;this.bulletPool=[];for(var a=0;a<i;a++)this.createBullet()}},{key:"initDustParticle",value:(m=n(function(){var n,i,a;return _ts_generator(this,function(o){switch(o.label){case 0:if(!this.node.parent)return[3,2];return(n=new j(rf.DUST_PARTICLE)).layer=Math.pow(2,25),n.active=!1,i=n.addComponent(ea.Skeleton),[4,eZ.loadSkeletonDataAsync(r_.DUST_PARTICLE_SPINE)];case 1:(a=o.sent())?this.node&&this.node.isValid&&(i.skeletonData=a,this.node.parent.addChild(n),this.dustParticle=n):console.warn("initDustParticle","Failed to load dust particle spine"),o.label=2;case 2:return[2]}})}),function(){return m.apply(this,arguments)})},{key:"createDust",value:function(){var n=this;if(this.dustParticle){this.dustParticle.active=!0;var i=this.node.getWorldPosition(),a=i.x,o=i.y;this.dustParticle.setWorldPosition(new U(a,o));try{var y=this.dustParticle.getComponent(ea.Skeleton);null==y||y.setAnimation(0,"animation",!1)}catch(n){console.error("createDust",n)}this.scheduleOnce(function(){n.dustParticle&&(n.dustParticle.active=!1)},.5)}}},{key:"createBullet",value:function(){if(!this.node.parent)return console.warn("BigBee: Parent not found"),null;var n=ey(this.bulletPrefab),i=n.getComponent(s3);return n.name=rf.BIG_BEE_BULLET,i&&i.kill(),this.node.parent.addChild(n),this.bulletPool.push(n),n}},{key:"smokeDisappear",value:function(){this.hide(),this.createDust(),this.state=rv.DIE,this.node.scene.emit(r8.BIG_BEE_DIE)}},{key:"sleep",value:function(){}},{key:"wake",value:function(){}},{key:"hide",value:function(){this.enabled=!1,this.rigidBody.sleep(),this.skeleton.enabled=!1}},{key:"preHide",value:function(){}},{key:"appear",value:function(){}},{key:"setSpineAnimation",value:function(n,i){}},{key:"attackTarget",value:function(){var n=this;this.skeleton.setAnimation(0,"attack",!1),this.skeleton.setCompleteListener(function(){n.skeleton.setAnimation(0,"fly",!0)}),this.scheduleOnce(function(){if(n.target){var i=n.bulletPool.filter(function(n){return!1===n.active})[0];if(!i){var a=n.createBullet();if(!a)return;i=a}var o=i.getComponent(s3);if(o){o.revive();var y=n.node.getPosition(),f=y.x,m=y.y;i.setPosition(f,m),o.forwardToDoge(n.target)}else console.warn("BigBee: Bullet component not found")}else console.warn("BigBee: Target not found")},.5)}}]),c}(rI)).prototype,"bulletPrefab",[sW],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),sX=g(sJ.prototype,"skeleton",[sq],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),sQ=g(sJ.prototype,"gameObjects",[li],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),s$=g(sJ.prototype,"collider",[sK],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),s0=g(sJ.prototype,"rigidBody",[sY],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),sJ))||sJ);A._RF.pop(),A._RF.push({},"8e16aARuABAK56lFGhIfeH+","Brick",void 0);var lo,lr,ls,ll,lu=P.ccclass,lc=P.property,lh=P.requireComponent,lp=(s4=lu("Brick"),s5=lh([ef]),s6=lc({tooltip:"Use batch draw all bricks"}),s7=lc(F),s4(s9=s5((le=g((s8=function(n){i(s,n);var f=a(s);function s(){var n;o(this,s);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=f.call.apply(f,[this].concat(a)),b(n,"useBatch",le,k(n)),b(n,"sprite",lt,k(n)),n.brickPolygons=[],n}return y(s,[{key:"__preload",value:function(){this.mask=this.getComponent(ef),this.graphic=this.getComponent(W),this.polygonCollider=this.getComponent(em),this.validateRequiredComponents(),this.listenGameplayEvents()}},{key:"validateRequiredComponents",value:function(){t_.lazyValidateProperties(this)}},{key:"listenGameplayEvents",value:function(){}},{key:"addBrickPolygon",value:function(n){this.brickPolygons.push(n)}},{key:"onLoad",value:function(){var n=this.getPolygon();n&&(this.useBatch?(this.mask.enabled=!1,this.graphic.enabled=!1,this.addBrickPolygon(n)):(this.updateTransform(n),this.drawMask(n),this.applyCollider(n)))}},{key:"getPolygon",value:function(){if(!("polygon"in this.node))return null;var n=this.node.polygon;return Array.isArray(n)?n:null}},{key:"updateTransform",value:function(n){var i=this.calculatePolygonDimensions(n),a=i.width,o=i.height;this.setPosition(0,0),this.setContentSize(a,o)}},{key:"setPosition",value:function(n,i){this.node.setPosition(n,i)}},{key:"setContentSize",value:function(n,i){var a=this.sprite.getComponent(Q);a&&a.setContentSize(n,i)}},{key:"updateContentSizeForBatchDraw",value:function(){var n=this.brickPolygons.map(function(n){return n.map(function(n){var i=n.x,a=n.y;return new eo(i,a)})}).flat(),i=this.calculatePolygonDimensions(n),a=i.width,o=i.height,y=this.calculateSpritePositionForBatchDraw(n),f=this.sprite.getComponent(Q);if(f){f.setContentSize(a,o);var m=this.sprite.getComponent(F);m&&m.node.setPosition(y.x,y.y)}}},{key:"calculateSpritePositionForBatchDraw",value:function(n){for(var i=n[0].x,a=n[0].x,o=n[0].y,y=n[0].y,f=1;f<n.length;f++){var m=n[f],g=m.x,b=m.y;g<i?i=g:g>a&&(a=g),b<o?o=b:b>y&&(y=b)}return{x:i,y:o}}},{key:"calculatePolygonDimensions",value:function(n){for(var i=n[0].x,a=n[0].x,o=n[0].y,y=n[0].y,f=1;f<n.length;f++){var m=n[f],g=m.x,b=m.y;g<i?i=g:g>a&&(a=g),b<o?o=b:b>y&&(y=b)}return{width:Math.abs(a-i),height:Math.abs(y-o)}}},{key:"drawMask",value:function(n){this.graphic.moveTo(n[0].x,n[0].y);var i,a=m(n);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.graphic.lineTo(o.x,o.y)}}catch(n){a.e(n)}finally{a.f()}this.graphic.close(),this.graphic.fill()}},{key:"batchDrawAllBrick",value:function(){if(!(this.brickPolygons.length<1)){this.mask.enabled=!0,this.graphic.enabled=!0,this.updateContentSizeForBatchDraw();var n,i=m(this.brickPolygons);try{for(i.s();!(n=i.n()).done;){var a=n.value;this.drawMask(a)}}catch(n){i.e(n)}finally{i.f()}this.applyColliderForBatchDraw(),this.brickPolygons=[]}}},{key:"applyCollider",value:function(n){this.polygonCollider.points=n.map(function(n){var i=n.x,a=n.y;return new eo(i,a)}),this.polygonCollider.apply()}},{key:"applyColliderForBatchDraw",value:function(){var n,i=this.brickPolygons.map(function(n){return n.map(function(n){var i=n.x,a=n.y;return new eo(i,a)})}),a=m(i);try{for(a.s();!(n=a.n()).done;){var o=n.value,y=new j;y.name=rf.BRICK,this.node.addChild(y),y.setPosition(0,0);var f=y.addComponent(ei);f.type=en.Static,f.group=rE.MAIN_OBJECT;var g=y.addComponent(em);g.points=o,g.apply()}}catch(n){a.e(n)}finally{a.f()}}}]),s}(O)).prototype,"useBatch",[s6],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),lt=g(s8.prototype,"sprite",[s7],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),s9=s8))||s9)||s9);A._RF.pop(),A._RF.push({},"46fa0f/kl1Heo/JvM2kAEAf","GraphicsPattern",void 0);var ld,ly,lv,lf,lm,lg,lb,lS,lk,lC,lw,lE,lT=P.ccclass,l_=P.property,lA=(lo=lT("GraphicsPattern"),lr=l_(W),lo((ll=g((ls=function(n){i(s,n);var f=a(s);function s(){var n;o(this,s);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=f.call.apply(f,[this].concat(a)),b(n,"graphic",ll,k(n)),n}return y(s,[{key:"onLoad",value:function(){this.graphic=this.getComponent(W),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){t_.lazyValidateProperties(this)}},{key:"start",value:function(){}},{key:"sleep",value:function(){}},{key:"draw",value:function(n){this.graphic.moveTo(n[0].x,n[0].y);var i,a=m(n);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.graphic.lineTo(o.x,o.y)}}catch(n){a.e(n)}finally{a.f()}this.graphic.close(),this.graphic.fill()}},{key:"applyCollider",value:function(n){var i=this.getComponent(em);i?(i.points=n.map(function(n){var i=n.x,a=n.y;return new eo(i,a)}),i.apply()):console.warn("GraphicsPattern: PolygonCollider2D not found")}},{key:"setColor",value:function(n){var i=new q;q.fromHEX(i,n),this.graphic.fillColor=i}}]),s}(rI)).prototype,"graphic",[lr],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ls))||ls);A._RF.pop(),A._RF.push({},"959bd9NhYpMTK0O78HSl4rc","Pattern",void 0);var lR,lP=P.ccclass,lB=P.property,lL=P.requireComponent,lD=(ld=lP("Pattern"),ly=lL([W,em,ei]),lv=lB(F),lf=lB(W),lm=lB(ei),lg=lB(em),ld(lb=ly((lk=g((lS=function(n){i(s,n);var f=a(s);function s(){var n;o(this,s);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=f.call.apply(f,[this].concat(a)),b(n,"sprite",lk,k(n)),b(n,"graphic",lC,k(n)),b(n,"rigidBody",lw,k(n)),b(n,"polygonCollider",lE,k(n)),n}return y(s,[{key:"onLoad",value:function(){this.graphic=this.getComponent(W),this.rigidBody=this.getComponent(ei),this.polygonCollider=this.getComponent(em),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){t_.lazyValidateProperties(this)}},{key:"start",value:function(){}},{key:"draw",value:function(n){var i=this.sprite.getComponent(Q);if(i){var a=this.getBottomLeftPosition(n),o=a.x,y=a.y,f=this.getTopRightPosition(n),g=f.x,b=f.y;i.setContentSize(g-o,b-y),i.node.setPosition(o,y),this.graphic.moveTo(n[0].x,n[0].y);var k,C=m(n);try{for(C.s();!(k=C.n()).done;){var w=k.value;this.graphic.lineTo(w.x,w.y)}}catch(n){C.e(n)}finally{C.f()}this.graphic.close(),this.graphic.fill()}}},{key:"savePolygonPoints",value:function(n){this.points=n}},{key:"getPolygonPoints",value:function(){return this.points}},{key:"applyCollider",value:function(n){this.polygonCollider.points=n.map(function(n){var i=n.x,a=n.y;return new eo(i,a)}),this.polygonCollider.apply()}},{key:"setRigidBodyType",value:function(n){this.rigidBody.type=n}},{key:"getBottomLeftPosition",value:function(n){var i,a=n[0].x,o=n[0].y,y=m(n);try{for(y.s();!(i=y.n()).done;){var f=i.value;a>f.x&&(a=f.x),o>f.y&&(o=f.y)}}catch(n){y.e(n)}finally{y.f()}return{x:a,y:o}}},{key:"getTopRightPosition",value:function(n){var i,a=n[0].x,o=n[0].y,y=m(n);try{for(y.s();!(i=y.n()).done;){var f=i.value;a<f.x&&(a=f.x),o<f.y&&(o=f.y)}}catch(n){y.e(n)}finally{y.f()}return{x:a,y:o}}}]),s}(rI)).prototype,"sprite",[lv],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),lC=g(lS.prototype,"graphic",[lf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),lw=g(lS.prototype,"rigidBody",[lm],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),lE=g(lS.prototype,"polygonCollider",[lg],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),lb=lS))||lb)||lb);A._RF.pop(),A._RF.push({},"a08960ZMBtFcLD/1nWNbAM9","Poison",void 0);var lO,lI=P.ccclass,lN=P.requireComponent,lF=lI("Poison")(lR=lN([lA])(lR=function(f){i(u,f);var g,b=a(u);function u(){var n;o(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return(n=b.call.apply(b,[this].concat(a))).polygon=[],n.useBatch=!1,n.poisonPolygons=[],n.bubbleFrame=null,n.bubblePool=null,n.remaining=0,n.maxPoolSize=0,n.totalBubble=0,n}return y(u,[{key:"onLoad",value:function(){var n;this.graphicPattern=this.getComponent(lA),this.gameObjects=null===(n=this.node.parent)||void 0===n?void 0:n.getComponent(cT),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){t_.lazyValidateProperties(this)}},{key:"start",value:function(){this.addRigidBody(),this.useBatch||(this.addPolygonCollider(),this.drawPattern(),this.loadCircleFrame(),this.setTimeSpawnBubble(.2))}},{key:"addPoisonPolygon",value:function(n){this.poisonPolygons.push(n)}},{key:"batchDrawAllPoisonPools",value:function(){if(!(this.poisonPolygons.length<1)){this.graphicPattern.setColor("#774798d1");var n,i=m(this.poisonPolygons);try{for(i.s();!(n=i.n()).done;){var a=n.value;this.graphicPattern.draw(a)}}catch(n){i.e(n)}finally{i.f()}this.applyColliderForBatchDraw(),this.loadCircleFrame(),this.setTimeSpawnBubble(.2)}}},{key:"applyColliderForBatchDraw",value:function(){var n,i=this.poisonPolygons.map(function(n){return n.map(function(n){var i=n.x,a=n.y;return new eo(i,a)})}),a=m(i);try{for(a.s();!(n=a.n()).done;){var o=n.value,y=new j;y.name=rf.POISON,this.node.addChild(y),y.setPosition(0,0);var f=y.addComponent(ei);f.group=rE.MAIN_OBJECT,f.type=en.Static;var g=y.addComponent(em);g.points=o,g.sensor=!0,g.apply()}}catch(n){a.e(n)}finally{a.f()}}},{key:"addRigidBody",value:function(){var n=this.addComponent(ei);n?(n.group=rE.MAIN_OBJECT,n.type=en.Static):console.warn("Cannot add RigidBody2D")}},{key:"addPolygonCollider",value:function(){var n=this.addComponent(em);n?n.sensor=!0:console.warn("Cannot add PolygonCollider2D")}},{key:"drawPattern",value:function(){this.graphicPattern.setColor("#774798d1"),this.graphicPattern.draw(this.polygon),this.graphicPattern.applyCollider(this.polygon)}},{key:"loadCircleFrame",value:(g=n(function(){var n,i;return _ts_generator(this,function(a){switch(a.label){case 0:return[4,eZ.loadSpriteFrameAsync(r_.POISON_CIRCLE_FRAME)];case 1:if(n=a.sent(),this.node.isValid&&n)this.bubbleFrame=n,i=this.useBatch?20*this.poisonPolygons.length:20,this.initPool(10,i);return[2]}})}),function(){return g.apply(this,arguments)})},{key:"initPool",value:function(n,i){this.bubblePool=new eg,this.maxPoolSize=i;for(var a=0;a<n;a++)this.spawnBubble()}},{key:"setTimeSpawnBubble",value:function(n){this.remaining=n}},{key:"spawnBubble",value:function(){if(!this.bubblePool)return null;if(this.totalBubble>=this.maxPoolSize)return null;var n=null;return this.bubblePool.size()>0?n=this.bubblePool.get():(n=new j(rf.POISON_BUBBLE),this.initBubble(n),this.killBubble(n),this.bubblePool.put(n)),n?(this.gameObjects.addObject(n),this.totalBubble+=1,n):null}},{key:"releaseBubble",value:function(n){this.bubblePool&&(this.killBubble(n),eb.stopAllByTarget(n),this.bubblePool.put(n),this.totalBubble-=1)}},{key:"killBubble",value:function(n){if(n){var i=n.getComponent(F);i&&(i.enabled=!1)}}},{key:"reviveBubble",value:function(n,i){var a=this.getPosition(i),o=a.minX,y=a.minY,f=a.maxX,m=el.randomRange(o,f),g=n.getComponent(V);g?g.opacity=125:console.warn("UIOpacity not found in bubble");var b=n.getComponent(F);b&&(b.enabled=!0),n.setPosition(new U(m,y))}},{key:"initBubble",value:function(n){n.layer=this.node.layer,n.addComponent(F).spriteFrame=this.bubbleFrame,n.addComponent(V)}},{key:"update",value:function(n){if(this.remaining-=n,this.remaining<=0){if(!this.useBatch){var i=this.spawnBubble();if(!i)return;this.reviveBubble(i,this.polygon),this.playBubbleTween(i,this.polygon);var a=el.randomRange(.3,.5);return void this.setTimeSpawnBubble(a)}var o,y=el.randomRange(.3,.5),f=m(this.poisonPolygons);try{for(f.s();!(o=f.n()).done;){var g=o.value,b=this.spawnBubble();if(!b)return;this.reviveBubble(b,g),this.playBubbleTween(b,g)}}catch(n){f.e(n)}finally{f.f()}this.setTimeSpawnBubble(y)}}},{key:"playBubbleTween",value:function(n,i){var a=this;if(n){var o=this.getPosition(i),y=o.minY,f=o.maxY,m=n.getPosition(),g=el.randomRange(80,120),b=Math.abs(f-y),k=m.x,C=m.y+(f-y)-10,w=b/g;eS(n).call(function(){n.setPosition(m)}).to(w,{position:new U(k,C)},{easing:"smooth"}).call(function(){a.releaseBubble(n)}).start();var E=n.getComponent(V);if(E){var T=w-.4>0?.4:w;E.opacity=160,eS(E).delay(w-T).to(T,{opacity:0},{easing:"smooth"}).start()}else console.warn("UIOpacity not found in bubble")}}},{key:"getPosition",value:function(n){var i,a=1e4,o=0,y=1e4,f=0,g=m(n);try{for(g.s();!(i=g.n()).done;){var b=i.value,k=b.x,C=b.y;k<a&&(a=k),k>o&&(o=k),C<y&&(y=C),C>f&&(f=C)}}catch(n){g.e(n)}finally{g.f()}return{minX:a+=20,minY:y+=13,maxX:o-=20,maxY:f-=13}}}]),u}(O))||lR)||lR;A._RF.pop(),A._RF.push({},"8633c11nMJN7I7TAFaGu3Fg","PoisonSurface",void 0);var lG,lM=(0,P.ccclass)("PoisonSurface")(lO=function(f){i(u,f);var g,b=a(u);function u(){var n;o(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return(n=b.call.apply(b,[this].concat(a))).poisonBubblePrefab=null,n.polygon=[],n.useBatch=!1,n.surfacePolygon=[],n.bubblePool=null,n.remaining=0,n.maxPoolSize=0,n.totalBubble=0,n}return y(u,[{key:"onLoad",value:function(){var n;this.graphicPattern=this.getComponent(lA),this.gameObjects=null===(n=this.node.parent)||void 0===n?void 0:n.getComponent(cT),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){t_.lazyValidateProperties(this)}},{key:"start",value:function(){this.useBatch||(this.drawPattern(),this.loadBubbleFrame())}},{key:"drawPattern",value:function(){this.graphicPattern.setColor("#9757bcb0"),this.graphicPattern.draw(this.polygon)}},{key:"addPoisonSurfacePolygon",value:function(n){this.surfacePolygon.push(n)}},{key:"batchDrawAllPoisonSurfaces",value:function(){if(!(this.surfacePolygon.length<1)){this.graphicPattern.setColor("#9757bcb0");var n,i=m(this.surfacePolygon);try{for(i.s();!(n=i.n()).done;){var a=n.value;this.graphicPattern.draw(a)}}catch(n){i.e(n)}finally{i.f()}this.loadBubbleFrame()}}},{key:"loadBubbleFrame",value:(g=n(function(){var n,i,a;return _ts_generator(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,eZ.loadPrefabAsync(r_.POISON_BUBBLE_PREFAB)];case 1:if(n=o.sent(),!this.node.isValid)return[2];if(!n)throw new Error("loadBubbleFrame: Prefab is null");return this.poisonBubblePrefab=n,i=this.useBatch?12*this.surfacePolygon.length:12,this.initPool(10,i),this.setTimeSpawnBubble(.3),[3,3];case 2:return console.error("loadBubbleFrame",_instanceof(a=o.sent(),Error)?a:new Error(String(a))),[3,3];case 3:return[2]}})}),function(){return g.apply(this,arguments)})},{key:"update",value:function(n){if(this.remaining-=n,this.remaining<=0){if(!this.useBatch){var i=this.spawnPoisonBubblePop();if(!i)return;this.reviveBubble(i,this.polygon);var a=el.randomRange(.3,.5);return void this.setTimeSpawnBubble(a)}var o,y=el.randomRange(.3,.5),f=m(this.surfacePolygon);try{for(f.s();!(o=f.n()).done;){var g=o.value,b=this.spawnPoisonBubblePop();if(!b)return;this.reviveBubble(b,g)}}catch(n){f.e(n)}finally{f.f()}this.setTimeSpawnBubble(y)}}},{key:"initPool",value:function(n,i){this.bubblePool=new eg,this.maxPoolSize=i;for(var a=0;a<n;a++)this.spawnPoisonBubblePop()}},{key:"setTimeSpawnBubble",value:function(n){this.remaining=n}},{key:"spawnPoisonBubblePop",value:function(){if(!this.bubblePool)return null;if(this.totalBubble>=this.maxPoolSize)return null;var n=null;if(this.bubblePool.size()>0)n=this.bubblePool.get();else{if(!_instanceof(n=ey(this.poisonBubblePrefab),j))return null;this.bubblePool.put(n)}return n?(n.name=rf.POISON_SURFACE,this.gameObjects.addObject(n),this.totalBubble+=1,n):null}},{key:"releasePoisonBubblePop",value:function(n){this.bubblePool&&(this.bubblePool.put(n),this.totalBubble-=1)}},{key:"reviveBubble",value:function(n,i){var a=this;if(n){var o=this.getRandomPosition(i),y=o.x,f=o.y;n.setPosition(new U(y,f));var m=n.getComponent(ea.Skeleton);m&&(m.setAnimation(0,"animation",!1),m.setCompleteListener(function(){a.releasePoisonBubblePop(n)}))}}},{key:"getRandomPosition",value:function(n){var i,a=1e4,o=0,y=1e4,f=0,g=m(n);try{for(g.s();!(i=g.n()).done;){var b=i.value,k=b.x,C=b.y;k<a&&(a=k),k>o&&(o=k),C<y&&(y=C),C>f&&(f=C)}}catch(n){g.e(n)}finally{g.f()}return{x:el.randomRange(a+25,o-25),y:el.randomRange(y+5,f-5)}}}]),u}(O))||lO;A._RF.pop(),A._RF.push({},"9aa6cp2xqhK1LJeA0kz2hWR","Water",void 0);var lz=P.ccclass,lx=P.requireComponent,lU=lz("Water")(lG=lx([lA])(lG=function(n){i(s,n);var f=a(s);function s(){var n;o(this,s);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return(n=f.call.apply(f,[this].concat(a))).polygon=[],n.useBatch=!1,n.waterPolygon=[],n}return y(s,[{key:"onLoad",value:function(){this.graphicPattern=this.getComponent(lA),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){t_.lazyValidateProperties(this)}},{key:"start",value:function(){this.addRigidBody(),this.useBatch||(this.addPolygonCollider(),this.drawPattern())}},{key:"addWaterPolygon",value:function(n){this.waterPolygon.push(n)}},{key:"batchDrawAllWater",value:function(){if(!(this.waterPolygon.length<1)){this.graphicPattern.setColor("#58cef0d0");var n,i=m(this.waterPolygon);try{for(i.s();!(n=i.n()).done;){var a=n.value;this.graphicPattern.draw(a)}}catch(n){i.e(n)}finally{i.f()}this.applyColliderForBatchDraw()}}},{key:"applyColliderForBatchDraw",value:function(){var n,i=this.waterPolygon.map(function(n){return n.map(function(n){var i=n.x,a=n.y;return new eo(i,a)})}),a=m(i);try{for(a.s();!(n=a.n()).done;){var o=n.value,y=new j;y.name=rf.WATER,this.node.addChild(y),y.setPosition(0,0);var f=y.addComponent(ei);f.group=rE.MAIN_OBJECT,f.type=en.Static;var g=y.addComponent(em);g.points=o,g.sensor=!0,g.apply()}}catch(n){a.e(n)}finally{a.f()}}},{key:"addRigidBody",value:function(){var n=this.addComponent(ei);n?(n.group=rE.MAIN_OBJECT,n.type=en.Static):console.warn("Cannot add RigidBody2D")}},{key:"addPolygonCollider",value:function(){var n=this.addComponent(em);n?n.sensor=!0:console.warn("Cannot add PolygonCollider2D")}},{key:"drawPattern",value:function(){this.graphicPattern.setColor("#58cef0d0"),this.graphicPattern.draw(this.polygon),this.graphicPattern.applyCollider(this.polygon)}}]),s}(O))||lG)||lG;A._RF.pop(),A._RF.push({},"d6e4emyi1lPpLbSlAWFj/GD","CrossingBeeLineTypes",void 0);var lH,lj,lV,lW,lq,lK,lY,lJ,lZ,lX,lQ,l$,l0,l1,l2=function(n){return n[n.LOW=0]="LOW",n[n.MEDIUM=1]="MEDIUM",n[n.HIGH=2]="HIGH",n}(l2||{});Z(l2),A._RF.pop(),A._RF.push({},"988b72EAIhJ1qc0nrLU68l7","CrossingBeeLine",void 0);var l3=P.ccclass,l4=P.property,l5=P.requireComponent,l6=(lH=l3("CrossingBeeLine"),lj=l5([F,Q]),lV=l4(eu),lW=l4(eu),lq=l4(eu),lK=l4({type:l2,displayName:"Sprite type"}),lY=l4({type:$,displayName:"Line thickness",min:0}),lH(lJ=lj((lX=g((lZ=function(n){i(r,n);var f=a(r);function r(){var n;o(this,r);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=f.call.apply(f,[this].concat(a)),b(n,"spriteLow",lX,k(n)),b(n,"spriteMedium",lQ,k(n)),b(n,"spriteHigh",l$,k(n)),b(n,"spriteType",l0,k(n)),b(n,"lineThickness",l1,k(n)),n.startPos=new U,n.endPos=new U,n}return y(r,[{key:"setStartPosition",value:function(n,i,a){var o=arguments.length>1&&void 0!==i?i:this.startPos.x,y=arguments.length>2&&void 0!==a?a:this.startPos.z;this.startPos.set(n,o,y),this.updateLine()}},{key:"setEndPosition",value:function(n,i,a){var o=arguments.length>1&&void 0!==i?i:this.endPos.y,y=arguments.length>2&&void 0!==a?a:this.endPos.z;this.endPos.set(n,o,y),this.updateLine()}},{key:"updateLine",value:function(){this.updateContentSize(),this.updatePosition(),this.updateRotation()}},{key:"thickness",get:function(){return this.lineThickness},set:function(n){this.lineThickness=n,this.updateContentSize()}},{key:"setSpriteType",value:function(n){switch(this.spriteType=n,n){case l2.LOW:this.sprite.spriteFrame=this.spriteLow;break;case l2.MEDIUM:this.sprite.spriteFrame=this.spriteMedium;break;case l2.HIGH:this.sprite.spriteFrame=this.spriteHigh}}},{key:"onLoad",value:function(){this.uiTransform=this.getComponent(Q),this.sprite=this.getComponent(F),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){t_.lazyValidateProperties(this)}},{key:"start",value:function(){this.setSpriteType(this.spriteType),this.updateContentSize(),this.updatePosition(),this.updateRotation()}},{key:"updateContentSize",value:function(){var n=this.endPos.x-this.startPos.x,i=this.endPos.y-this.startPos.y,a=this.endPos.z-this.startPos.z,o=Math.sqrt(n*n+i*i+a*a);this.uiTransform.setContentSize(o,this.lineThickness)}},{key:"updatePosition",value:function(){this.uiTransform.setAnchorPoint(.5,.5),this.node.setWorldPosition((this.startPos.x+this.endPos.x)/2,(this.startPos.y+this.endPos.y)/2,(this.startPos.z+this.endPos.z)/2)}},{key:"updateRotation",value:function(){this.node.setWorldRotationFromEuler(0,0,180*Math.atan2(this.endPos.y-this.startPos.y,this.endPos.x-this.startPos.x)/Math.PI)}}]),r}(O)).prototype,"spriteLow",[lV],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),lQ=g(lZ.prototype,"spriteMedium",[lW],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),l$=g(lZ.prototype,"spriteHigh",[lq],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),l0=g(lZ.prototype,"spriteType",[lK],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return l2.LOW}}),l1=g(lZ.prototype,"lineThickness",[lY],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),lJ=lZ))||lJ)||lJ);A._RF.pop(),A._RF.push({},"169a1O0ruFLoI6OnJUZap7V","DogeState",void 0);var l7,l9=function(n){return n[n.IDLE=0]="IDLE",n[n.SMILE=1]="SMILE",n[n.SCARE=2]="SCARE",n[n.BEE_STING=3]="BEE_STING",n[n.THORN_STAB=4]="THORN_STAB",n[n.OUT_OF_SCREEN=5]="OUT_OF_SCREEN",n[n.POISONED=6]="POISONED",n[n.DROWNING=7]="DROWNING",n[n.OVER_VIEW=8]="OVER_VIEW",n}(l9||{});A._RF.pop(),A._RF.push({},"852f9XjNUVJ3Zt1Kd/EbqXU","Eye",void 0);var l8,ue,ut,un,ui,ua,uo=(0,P.ccclass)("Eye")(l7=function(n){i(r,n);var f=a(r);function r(){var n;o(this,r);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return(n=f.call.apply(f,[this].concat(a))).scaleTween=null,n.initialPosition=null,n}return y(r,[{key:"createScaleAnimation",value:function(){var n=eS(this.node).to(.3,{scale:new U(1.1,1.1,1)},{easing:"smooth"});this.scaleTween=eS(this.node).reverseTime(n).repeatForever()}},{key:"saveInitialPosition",value:function(){this.initialPosition||(this.initialPosition=this.node.position.clone())}},{key:"show",value:function(){this.node.active=!0,this.playAnimation()}},{key:"hide",value:function(){this.stopAnimation(),this.node.active=!1}},{key:"toward",value:function(n){this.initialPosition&&(this.node.setPosition(this.initialPosition),this.node.position.add(n))}},{key:"playAnimation",value:function(){var n;this.scaleTween||this.createScaleAnimation(),null===(n=this.scaleTween)||void 0===n||n.start()}},{key:"stopAnimation",value:function(){var n;null===(n=this.scaleTween)||void 0===n||n.stop()}}]),r}(O))||l7;A._RF.pop(),A._RF.push({},"df218vrmOtEH5vRQXxIZ3yS","Eyes",void 0);var ur,us,ul,uu,uc,uh,up,ud=P.ccclass,uy=P.property,uv=(l8=ud("Eyes"),ue=uy(uo),ut=uy(uo),l8((ui=g((un=function(n){i(r,n);var f=a(r);function r(){var n;o(this,r);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=f.call.apply(f,[this].concat(a)),b(n,"leftEye",ui,k(n)),b(n,"rightEye",ua,k(n)),n.time=0,n.remaining=0,n.running=!1,n}return y(r,[{key:"onLoad",value:function(){this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){t_.lazyValidateProperties(this)}},{key:"start",value:function(){this.remaining=0,this.running=!1,this.setTimeChangeDirection(.8),this.leftEye.saveInitialPosition(),this.rightEye.saveInitialPosition()}},{key:"setTimeChangeDirection",value:function(n){this.time=n}},{key:"show",value:function(){this.running=!0,this.remaining=this.time,this.leftEye.show(),this.rightEye.show()}},{key:"hide",value:function(){this.running=!1,this.leftEye.hide(),this.rightEye.hide()}},{key:"stopLook",value:function(){this.running=!1}},{key:"look",value:function(){if(this.node.parent){var n=this.node.parent.getComponent(uR);if(n){var i=n.getNearbyBee();if(i){var a=this.leftEye.initialPosition;if(a){var o=a.x,y=a.y,f=new U;this.leftEye.node.inverseTransformPoint(f,i.node.worldPosition);var m=new U(f.x-o,f.y-y,0).normalize().multiplyScalar(5);this.leftEye.toward(m),this.rightEye.toward(m)}}}}}},{key:"update",value:function(n){this.running&&(this.remaining<=0&&(this.look(),this.remaining=this.time),this.remaining-=n)}}]),r}(O)).prototype,"leftEye",[ue],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ua=g(un.prototype,"rightEye",[ut],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),un))||un);A._RF.pop(),A._RF.push({},"14172TbYDBAeISJqcpvLYV7","Doge",void 0);var uf,um,ug,ub,uS,uk,uC,uw,uE=P.ccclass,uT=P.property,u_=GameCore.Utils.Array,uA=[l9.OVER_VIEW,l9.BEE_STING,l9.THORN_STAB,l9.POISONED,l9.OUT_OF_SCREEN],uR=(ur=uE("Doge"),us=uT(uv),ul=uT(er),ur((uc=g((uu=function(f){i(h,f);var g,C=a(h);function h(){var n;o(this,h);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=C.call.apply(C,[this].concat(a)),b(n,"eyes",uc,k(n)),n.state=l9.IDLE,n.dustParticle=null,n.gameHeight=0,b(n,"collider",uh,k(n)),b(n,"gameObjects",up,k(n)),n.onBeginContact=function(i,a){a.node.name!==rf.BEE&&a.node.name!==rf.BIG_BEE&&a.node.name!==rf.BIG_BEE_BULLET||n.beeSting(),a.node.name!==rf.THORN&&a.node.name!==rf.THORN_BALL?a.node.name!==rf.POISON?a.node.name===rf.WATER&&n.drowning():n.poisoned():n.stabbedByThorn()},n}return y(h,[{key:"onLoad",value:function(){var n;this.collider=this.getComponent(er),this.gameObjects=null===(n=this.node.parent)||void 0===n?void 0:n.getComponent(cT),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){t_.lazyValidateProperties(this)}},{key:"start",value:function(){var n;this.initDustParticle(),this.idle();var i=null===(n=ek("Canvas"))||void 0===n?void 0:n.getComponent(Q);i&&(this.gameHeight=i.height),this.collider.on(es.BEGIN_CONTACT,this.onBeginContact)}},{key:"idle",value:function(){!1!==this.setState(l9.IDLE)&&(this.hideEyes(),this.setSpineAnimation(rW.IDLE,!0))}},{key:"smile",value:function(){!1!==this.setState(l9.SMILE)&&(this.hideEyes(),this.setSpineAnimation(rW.SMILE,!0))}},{key:"beeSting",value:function(){var n=this;!1!==this.setState(l9.BEE_STING)&&(this.hideEyes(),this.setSpineAnimation(rW.HURT,!1),this.scareOtherDoges(),this.scheduleOnce(function(){n.state===l9.BEE_STING&&n.setSpineAnimation(rW.INACTIVE,!1)},.3),e2.playSound(e4.DOGE_HURT))}},{key:"stabbedByThorn",value:function(){!1!==this.setState(l9.THORN_STAB)&&(this.hideEyes(),this.createDust(),this.setSpineAnimation(rW.THORN_INACTIVE,!1),this.scareOtherDoges(),e2.playSound(e4.DOGE_DIES))}},{key:"poisoned",value:function(){!1!==this.setState(l9.POISONED)&&(this.hide(),this.hideEyes(),this.createDust(),this.scareOtherDoges(),e2.playSound(e4.DOGE_DIES))}},{key:"drowning",value:function(){!1!==this.setState(l9.DROWNING)&&(this.hideEyes(),this.setSpineAnimation(rW.DROWNING,!1))}},{key:"isCantBeTargeted",value:function(){return -1!==[l9.THORN_STAB,l9.OUT_OF_SCREEN,l9.POISONED,l9.DROWNING].indexOf(this.state)}},{key:"scare",value:function(){var n;!1!==this.setState(l9.SCARE)&&(this.showEyes(),null===(n=this.eyes)||void 0===n||n.look(),this.setSpineAnimation(rW.FREAK_OUT,!0))}},{key:"hideEyes",value:function(){this.eyes.hide()}},{key:"showEyes",value:function(){this.eyes.show()}},{key:"setState",value:function(n){return -1===uA.indexOf(n)?-1===uA.indexOf(this.state)&&(this.state=n,!0):uA.indexOf(n)>uA.indexOf(this.state)&&(this.state=n,this.node.scene.emit(r8.DOGE_DIE),!0)}},{key:"scareOtherDoges",value:function(){if(this.gameObjects){var n,i=this.gameObjects.getDoges(this),a=m(i);try{for(a.s();!(n=a.n()).done;)n.value.scare()}catch(n){a.e(n)}finally{a.f()}}}},{key:"update",value:function(){var n=this.node.worldPosition.y;(n>this.gameHeight||n<0)&&this.setState(l9.OUT_OF_SCREEN),this.isBeeNearBy()&&this.scare()}},{key:"isBeeNearBy",value:function(){return this.state===l9.IDLE&&!u_.has(uA,this.state)&&!!this.getNearbyBee()}},{key:"getNearbyBee",value:function(){var n=this;if(!this.node.parent)return null;var i=this.node.parent.getComponentsInChildren(sf).find(function(i){var a=U.distance(n.node.getWorldPosition(),i.node.getWorldPosition());if(i.enabled&&a<=200)return!0});return null!=i?i:null}},{key:"createDust",value:function(){var n=this;if(this.dustParticle){this.dustParticle.active=!0;var i=this.node.getWorldPosition(),a=i.x,o=i.y;this.dustParticle.setWorldPosition(new U(a,o));try{var y=this.dustParticle.getComponent(ea.Skeleton);null==y||y.setAnimation(0,"animation",!1)}catch(n){console.error("createDust",n)}this.scheduleOnce(function(){n.dustParticle&&(n.dustParticle.active=!1)},.5)}}},{key:"initDustParticle",value:(g=n(function(){var n,i,a;return _ts_generator(this,function(o){switch(o.label){case 0:if(!this.node.parent)return[3,2];return(n=new j(rf.DUST_PARTICLE)).layer=Math.pow(2,25),n.active=!1,i=n.addComponent(ea.Skeleton),[4,eZ.loadSkeletonDataAsync(r_.DUST_PARTICLE_SPINE)];case 1:(a=o.sent())?this.node&&this.node.isValid&&(i.skeletonData=a,this.node.parent.addChild(n),this.dustParticle=n):console.warn("initDustParticle","Failed to load dust particle spine"),o.label=2;case 2:return[2]}})}),function(){return g.apply(this,arguments)})}]),h}(rI)).prototype,"eyes",[us],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),uh=g(uu.prototype,"collider",[ul],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),up=g(uu.prototype,"gameObjects",[uT],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),uu))||uu);A._RF.pop(),A._RF.push({},"2ca763+kElPuqiAkECtFMMS","Grass",void 0);var uP,uB,uL,uD,uO=P.ccclass,uI=P.property,uN=P.requireComponent,uF=(uf=uO("Grass"),um=uN(W),ug=uI({tooltip:"Use batch draw all grass polygons"}),ub=uI(W),uf(uS=um((uC=g((uk=function(n){i(s,n);var f=a(s);function s(){var n;o(this,s);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=f.call.apply(f,[this].concat(a)),b(n,"useBatch",uC,k(n)),b(n,"graphic",uw,k(n)),n.grassPolygons=[],n}return y(s,[{key:"__preload",value:function(){this.graphic=this.getComponent(W),this.validateRequiredComponents(),this.listenGameplayEvents()}},{key:"validateRequiredComponents",value:function(){t_.lazyValidateProperties(this)}},{key:"listenGameplayEvents",value:function(){}},{key:"onLoad",value:function(){var n=this.getPolygon();if(n){var i=this.isDark()?rf.GRASS_DARK:rf.GRASS;this.useBatch?this.addGrassPolygon(i,n):(this.updateFillColor(i),this.drawGrass(n))}}},{key:"drawGrass",value:function(n){this.graphic.moveTo(n[0].x,n[0].y);var i,a=m(n);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.graphic.lineTo(o.x,o.y)}}catch(n){a.e(n)}finally{a.f()}this.graphic.close(),this.graphic.fill()}},{key:"getPolygon",value:function(){if(!("polygon"in this.node))return null;var n=this.node.polygon;return Array.isArray(n)?n:null}},{key:"isDark",value:function(){return"isDark"in this.node&&!!this.node.isDark}},{key:"addGrassPolygon",value:function(n,i){this.grassPolygons.push({type:n,polygon:i})}},{key:"updateFillColor",value:function(n){n===rf.GRASS_DARK?this.graphic.fillColor.fromHEX("#5e9c35"):this.graphic.fillColor.fromHEX("#8bdd55")}},{key:"batchDrawAllGrass",value:function(){if(!(this.grassPolygons.length<1)){var n,i=m(this.grassPolygons);try{for(i.s();!(n=i.n()).done;){var a=n.value;this.updateFillColor(a.type),this.drawGrass(a.polygon)}}catch(n){i.e(n)}finally{i.f()}this.grassPolygons=[]}}}]),s}(rI)).prototype,"useBatch",[ug],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),uw=g(uk.prototype,"graphic",[ub],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),uS=uk))||uS)||uS);A._RF.pop(),A._RF.push({},"7027fhYTgdDe6EinMz7XLC6","MapLine",void 0);var uG=P.ccclass,uM=P.property,uz=(uP=uG("MapLine"),uB=uM(W),uP((uD=g((uL=function(n){i(s,n);var f=a(s);function s(){var n;o(this,s);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=f.call.apply(f,[this].concat(a)),b(n,"graphics",uD,k(n)),n.useBatch=!1,n.mapLines=[],n}return y(s,[{key:"__preload",value:function(){this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){t_.lazyValidateProperties(this)}},{key:"onLoad",value:function(){var n=this.getPolygon();n&&(this.useBatch?(this.graphics.enabled=!1,this.addLine(n)):this.drawLine(n))}},{key:"getPolygon",value:function(){if(!("polygon"in this.node))return null;var n=this.node.polygon;return Array.isArray(n)?n:null}},{key:"addLine",value:function(n){this.mapLines.push(n)}},{key:"drawLine",value:function(n){this.graphics.moveTo(n[0].x,n[0].y);var i,a=m(n.slice(1));try{for(a.s();!(i=a.n()).done;){var o=i.value;this.graphics.lineTo(o.x,o.y)}}catch(n){a.e(n)}finally{a.f()}this.graphics.stroke()}},{key:"batchDrawAllLines",value:function(){if(!(this.mapLines.length<1)){var n,i=m(this.mapLines);try{for(i.s();!(n=i.n()).done;){var a=n.value;this.drawLine(a)}}catch(n){i.e(n)}finally{i.f()}this.mapLines=[]}}}]),s}(O)).prototype,"graphics",[uB],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),uL))||uL);A._RF.pop(),A._RF.push({},"87767KZVqpEgIbdzZdGh1CJ","BatchObjectManager",void 0);var ux=function(){function e(){o(this,e),this.isBrickInitialized=!1,this.isGrassInitialized=!1,this.isLineInitialized=!1,this.isPoisonInitialized=!1,this.isPoisonSurfaceInitialized=!1,this.isWaterInitialized=!1,this.isDangerAreaInitialized=!1,this.mainBrickComponent=null,this.mainGrassComponent=null,this.mainLineComponent=null,this.mainPoisonComponent=null,this.mainPoisonSurfaceComponent=null,this.mainWaterComponent=null,this.mainDangerAreaComponent=null}return y(e,[{key:"assignMainBrickComponent",value:function(n){this.mainBrickComponent=n}},{key:"assignMainGrassComponent",value:function(n){this.mainGrassComponent=n}},{key:"assignMainLineComponent",value:function(n){this.mainLineComponent=n}},{key:"assignMainPoisonComponent",value:function(n){this.mainPoisonComponent=n}},{key:"assignMainPoisonSurfaceComponent",value:function(n){this.mainPoisonSurfaceComponent=n}},{key:"assignMainWaterComponent",value:function(n){this.mainWaterComponent=n}},{key:"assignMainDangerAreaComponent",value:function(n){this.mainDangerAreaComponent=n}},{key:"isBrickBatchingEnabled",value:function(){var n,i;return null!==(n=null===(i=this.mainBrickComponent)||void 0===i?void 0:i.useBatch)&&void 0!==n&&n}},{key:"isGrassBatchingEnabled",value:function(){var n,i;return null!==(n=null===(i=this.mainGrassComponent)||void 0===i?void 0:i.useBatch)&&void 0!==n&&n}},{key:"isLineBatchingEnabled",value:function(){var n,i;return null!==(n=null===(i=this.mainLineComponent)||void 0===i?void 0:i.useBatch)&&void 0!==n&&n}},{key:"isPoisonBatchingEnabled",value:function(){var n,i;return null!==(n=null===(i=this.mainPoisonComponent)||void 0===i?void 0:i.useBatch)&&void 0!==n&&n}},{key:"isPoisonSurfaceBatchingEnabled",value:function(){var n,i;return null!==(n=null===(i=this.mainPoisonSurfaceComponent)||void 0===i?void 0:i.useBatch)&&void 0!==n&&n}},{key:"isWaterBatchingEnabled",value:function(){var n,i;return null!==(n=null===(i=this.mainWaterComponent)||void 0===i?void 0:i.useBatch)&&void 0!==n&&n}},{key:"isDangerAreaBatchingEnabled",value:function(){var n,i;return null!==(n=null===(i=this.mainDangerAreaComponent)||void 0===i?void 0:i.useBatch)&&void 0!==n&&n}},{key:"updateBrickPolygon",value:function(n){this.mainBrickComponent?this.mainBrickComponent.addBrickPolygon(n):console.warn("BatchObjectManager: mainBrickComponent is not assigned")}},{key:"updateGrassPolygon",value:function(n,i){this.mainGrassComponent?this.mainGrassComponent.addGrassPolygon(n,i):console.warn("BatchObjectManager: mainGrassComponent is not assigned")}},{key:"updateMapLine",value:function(n){this.mainLineComponent?this.mainLineComponent.addLine(n):console.warn("BatchObjectManager: mainLineNode is not assigned")}},{key:"updatePoisonPolygon",value:function(n){this.mainPoisonComponent?this.mainPoisonComponent.addPoisonPolygon(n):console.warn("BatchObjectManager: mainPoisonComponent is not assigned")}},{key:"updatePoisonSurfacePolygon",value:function(n){this.mainPoisonSurfaceComponent?this.mainPoisonSurfaceComponent.addPoisonSurfacePolygon(n):console.warn("BatchObjectManager: mainPoisonSurfaceComponent is not assigned")}},{key:"updateWaterPolygon",value:function(n){this.mainWaterComponent?this.mainWaterComponent.addWaterPolygon(n):console.warn("BatchObjectManager: mainWaterComponent is not assigned")}},{key:"updateDangerAreaPolygon",value:function(n){this.mainDangerAreaComponent?this.mainDangerAreaComponent.addDangerAreaPolygon(n):console.warn("BatchObjectManager: mainDangerAreaComponent is not assigned")}},{key:"batchDraw",value:function(){var n,i,a,o,y,f,m;null===(n=this.mainBrickComponent)||void 0===n||n.batchDrawAllBrick(),null===(i=this.mainGrassComponent)||void 0===i||i.batchDrawAllGrass(),null===(a=this.mainLineComponent)||void 0===a||a.batchDrawAllLines(),null===(o=this.mainPoisonComponent)||void 0===o||o.batchDrawAllPoisonPools(),null===(y=this.mainPoisonSurfaceComponent)||void 0===y||y.batchDrawAllPoisonSurfaces(),null===(f=this.mainWaterComponent)||void 0===f||f.batchDrawAllWater(),null===(m=this.mainDangerAreaComponent)||void 0===m||m.batchDrawAllDangerAreas()}},{key:"clearObjects",value:function(){this.isBrickInitialized=!1,this.isGrassInitialized=!1,this.isLineInitialized=!1,this.isPoisonInitialized=!1,this.isPoisonSurfaceInitialized=!1,this.isWaterInitialized=!1,this.isDangerAreaInitialized=!1,this.mainBrickComponent=null,this.mainGrassComponent=null,this.mainLineComponent=null,this.mainPoisonComponent=null,this.mainPoisonSurfaceComponent=null,this.mainWaterComponent=null,this.mainDangerAreaComponent=null}}]),e}();A._RF.pop(),A._RF.push({},"4c04ffCcRhGsqEZlVWUHd8s","MapTransformer",void 0);var uU,uH,uj,uV,uW,uq,uK,uY,uJ,uZ,uX,uQ,u$,u0,u1,u2,u3,u4,u5,u6,u7,u9,u8,ce,ct,cn,ci,ca,co,cr,cs,cl,cu,cc,ch,cp,cd,cy,cv,cf,cm,cg,cb,cS,ck=function(){function e(){o(this,e)}return y(e,null,[{key:"getPointObject",value:function(n){var i=n.id,a=n.point,o=n.data,y=n.connect,f=e.getTransformedPoint(a);return console.log(sw.HEIGHT,28*a.y,270),{id:i,point:f,data:o,connect:y}}},{key:"getTransformedPoint",value:function(n){return{x:28*n.x+14-200,y:sw.HEIGHT-28*n.y-14-270}}},{key:"revertTransformedPoint",value:function(n){return{x:(n.x+200-14)/28,y:(sw.HEIGHT-n.y-14-270)/28}}},{key:"getPointObjectBỵHalfCoord",value:function(n){var i=n.id,a=n.point,o=n.data,y=n.connect;return{id:i,point:{x:28*a.x/2-200,y:sw.HEIGHT-28*a.y/2-270},data:o,connect:y}}},{key:"getPolygonObject",value:function(n){var i=n.id,a=n.point,o=n.data,y=n.connect;return{id:i,point:e.getTransformedPolygon(a),data:o,connect:y}}},{key:"getTransformedPolygon",value:function(n){return n.map(function(n){var i=n.x,a=n.y;return{x:28*i-200,y:sw.HEIGHT-28*a-270}})}},{key:"revertTransformedPolygon",value:function(n){return n.map(function(n){var i=n.x,a=n.y;return{x:(i+200)/28,y:(sw.HEIGHT-a-270)/28}})}},{key:"getDoublePolygon",value:function(n){var i=n.id,a=n.point,o=n.data,y=n.connect;return{id:i,point:a.map(function(n){var i=n.x,a=n.y;return{x:28*i/2-200,y:sw.HEIGHT-28*a/2-270}}),data:o,connect:y}}},{key:"getTransformedDoublePolygon",value:function(n){return n.map(function(n){var i=n.x,a=n.y;return{x:28*i/2-200,y:sw.HEIGHT-28*a/2-270}})}},{key:"revertTransformedDoublePolygon",value:function(n){return n.map(function(n){var i=n.x,a=n.y;return{x:(i+200)/14,y:(sw.HEIGHT-a-270)/14}})}},{key:"transformPointsFromMapToDrawAreaCoordinate",value:function(n){return n.map(function(n){var i=n.x,a=n.y;return{x:28*i-200,y:sw.HEIGHT-28*a-270}})}}]),e}();A._RF.pop(),A._RF.push({},"75ad9uPflhLL4N96NmHF2Sk","GameObjects",void 0);var cC,cw=P.ccclass,cE=P.property,cT=(uU=cw("GameObjects"),uH=cE(ed),uj=cE(ed),uV=cE(ed),uW=cE(ed),uq=cE(ed),uK=cE(ed),uY=cE(ed),uJ=cE(ed),uZ=cE(ed),uX=cE(ed),uQ=cE(ed),u$=cE(ed),u0=cE(ed),u1=cE(ed),u2=cE(ed),u3=cE(ed),u4=cE({tooltip:"Use batch draw all map lines."}),u5=cE({tooltip:"Use batch draw all poison pools."}),u6=cE({tooltip:"Use batch draw all poison surfaces."}),u7=cE({tooltip:"Use batch draw all water pools."}),u9=cE({tooltip:"Use batch draw all danger areas."}),uU((ce=g((u8=function(f){i(p,f);var g,w=a(p);function p(){var n;o(this,p);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=w.call.apply(w,[this].concat(a)),b(n,"dogePrefab",ce,k(n)),b(n,"spiderPrefab",ct,k(n)),b(n,"beePrefab",cn,k(n)),b(n,"beehivePrefab",ci,k(n)),b(n,"bigBeePrefab",ca,k(n)),b(n,"thornPrefab",co,k(n)),b(n,"thornBallPrefab",cr,k(n)),b(n,"airFanPrefab",cs,k(n)),b(n,"grassPrefab",cl,k(n)),b(n,"balloonPrefab",cu,k(n)),b(n,"brickPrefab",cc,k(n)),b(n,"arenaPrefab",ch,k(n)),b(n,"woodPrefab",cp,k(n)),b(n,"connectPrefab",cd,k(n)),b(n,"mapLinePrefab",cy,k(n)),b(n,"crossingBeeLinePrefab",cv,k(n)),b(n,"batchMapLines",cf,k(n)),b(n,"batchPoisonPool",cm,k(n)),b(n,"batchPoisonSurface",cg,k(n)),b(n,"batchWaterPool",cb,k(n)),b(n,"batchDangerArea",cS,k(n)),n.batchObjects=new ux,n.objects=new Map,n}return y(p,[{key:"spawnObjects",value:function(n){for(var i=n.map,a=C(i).reverse(),o=0;o<a.length;o++){var y=a[o],f=null;(f=Array.isArray(null==y?void 0:y.point)?this.spawnPolygonObjectType(y):this.spawnPointObjectType(y))&&this.objects.set(o,f)}var g,b=m(i);try{for(b.s();!(g=b.n()).done;){var k=g.value;if(!Array.isArray(k.point)){if(k.id===rw.BALLOON){var w=ck.getPointObject(k).point,E=w.x,T=w.y;if(!k.connect)continue;var _=this.findObjectIndex(i,k.connect);if(!_)continue;this.spawnBalloon(E,T,_)}if(k.id===rw.CONNECT){if(!k.connect)return null;if(!Array.isArray(k.connect.point))return null;var A=ck.getDoublePolygon(k.connect),R=ck.getPointObjectBỵHalfCoord(k).point,P=R.x,B=R.y;this.spawnConnect(P,B,A.point)}}}}catch(n){b.e(n)}finally{b.f()}this.batchObjects.batchDraw(),this.sortObjects(),this.sleepObjects()}},{key:"spawnPolygonObjectType",value:function(n){var i=ck.getPolygonObject(n).point;if(0===i.length)return null;switch(n.id){case rw.BRICK:return this.spawnBrick(i);case rw.GRASS:return this.spawnGrass(i,!1);case rw.GRASS_DARK:return this.spawnGrass(i,!0);case rw.LINE:return this.spawnLine(i);case rw.POISON:return this.spawnPoison(i);case rw.POISON_SURFACE:return this.spawnPoisonSurface(i);case rw.WATER:return this.spawnWater(i);case rw.DANGER_AREA:return this.spawnDangerAreaNormal(i);case rw.CONNECT:return null;case rw.WOOD:var a=ck.getDoublePolygon(n);return this.spawnWood(a.point);case rw.COLLIDER:var o=ck.getDoublePolygon(n);return this.spawnCollider(0,0,o.point);case rw.STROKE:default:return null}}},{key:"spawnPointObjectType",value:function(n){var i=ck.getPointObject(n).point,a=i.x,o=i.y;switch(n.id){case rw.DOGE_A:return this.spawnDoge({x:a,y:o});case rw.DOGE_B:return this.spawnDoge({x:a,y:o,right:!0});case rw.SPIDER:return this.spawnSpider(a,o);case rw.BEEHIVE_A:case rw.BEEHIVE_C:return this.spawnBeehive(a,o);case rw.BEEHIVE_B:case rw.BEEHIVE_D:return this.spawnBeehive(a,o,!0);case rw.THORN_BALL:return this.spawnThornBall(a,o);case rw.BIG_BEE:return this.spawnBigBee(a,o);case rw.WATER_SURFACE:return this.spawnWaterSurface(a,o);case rw.THORN:var y,f=(null===(y=n.data)||void 0===y?void 0:y.a)||0;return this.spawnThorn(a,o,f);case rw.AIR_FAN:var m,g=(null===(m=n.data)||void 0===m?void 0:m.a)||0;return this.spawnAirFan(a,o,g);default:return null}}},{key:"spawnObjectForDevTools",value:function(n){this.spawnPointObjectType(n),this.sortObjects()}},{key:"spawnPolygonObjectForDevTools",value:function(n){this.spawnPolygonObjectType(n),this.sortObjects()}},{key:"addObject",value:function(n){this.node.insertChild(n,this.getSiblingIndex(n.name))}},{key:"sortObjects",value:function(){var n=C(this.node.children);n.sort(function(n,i){var a,o;return(null!==(a=rk[n.name])&&void 0!==a?a:0)-(null!==(o=rk[i.name])&&void 0!==o?o:0)}),n.forEach(function(n,i){n.setSiblingIndex(i)})}},{key:"findObjectIndex",value:function(n,i){var a,o=this,y=n.findIndex(function(n){return JSON.stringify(n)===JSON.stringify(i)}),f=null===(a=n[y])||void 0===a?void 0:a.point;if(f&&!Array.isArray(f)){var m=ck.getPointObject(n[y]).point,g=m.x,b=m.y,k=this.node.children.find(function(n){var a=n.position;return a.x===g&&a.y===b&&n.name===o.getObjNameFromId(i.id)});if(k)return k}}},{key:"getObjNameFromId",value:function(n){switch(n){case rw.DOGE_A:case rw.DOGE_B:return rf.DOGE;case rw.SPIDER:return rf.SPIDER;case rw.BEEHIVE_A:case rw.BEEHIVE_B:case rw.BEEHIVE_C:case rw.BEEHIVE_D:return rf.BEEHIVE;case rw.THORN_BALL:return rf.THORN_BALL;case rw.BIG_BEE:return rf.BIG_BEE;case rw.WATER_SURFACE:return rf.WATER_SURFACE;case rw.THORN:return rf.THORN;case rw.AIR_FAN:return rf.AIR_FAN;case rw.BRICK:return rf.BRICK;case rw.GRASS:return rf.GRASS;case rw.GRASS_DARK:return rf.GRASS_DARK;case rw.LINE:return rf.MAP_LINE;case rw.POISON:return rf.POISON;case rw.POISON_SURFACE:return rf.POISON_SURFACE;case rw.WATER:return rf.WATER;case rw.DANGER_AREA:return rf.DANGER_AREA;case rw.WOOD:return rf.WOOD;case rw.COLLIDER:return rf.COLLIDER;default:return""}}},{key:"getSiblingIndex",value:function(n){var i=this.node.children,a=rk[n];if(!a)return i.length+1;var o=i.map(function(n){return rk[n.name]}).filter(function(n){return void 0!==n}),y=o.findIndex(function(n){return a<n});return y<0?o.length+1:y}},{key:"clearObjects",value:function(){this.node.destroyAllChildren(),this.node.removeAllChildren(),this.batchObjects.clearObjects()}},{key:"stopBeeBehavior",value:function(){var n,i=this.node.getComponentsInChildren(sf),a=m(i);try{for(a.s();!(n=a.n()).done;)n.value.state=rv.IDLE}catch(n){a.e(n)}finally{a.f()}}},{key:"sleepObjects",value:function(){var n,i=this.getComponentsInChildren(rI),a=m(i);try{for(a.s();!(n=a.n()).done;)n.value.sleep()}catch(n){a.e(n)}finally{a.f()}var o,y=this.node.getComponentsInChildren(la),f=m(y);try{for(f.s();!(o=f.n()).done;)o.value.state=rv.IDLE}catch(n){f.e(n)}finally{f.f()}}},{key:"wakeUpObjects",value:function(){var n,i=this.getComponentsInChildren(rI),a=m(i);try{for(a.s();!(n=a.n()).done;)n.value.wake()}catch(n){a.e(n)}finally{a.f()}}},{key:"spawnBeehive",value:function(n,i,a){var o=arguments.length>2&&void 0!==a&&a,y=ey(this.beehivePrefab);return _instanceof(y,j)?(y.name=rf.BEEHIVE,y.setPosition(n,i),y.setScale(o?-1:1,1),y.attr({isRightSide:o}),this.addObject(y),y):null}},{key:"spawnBees",value:function(){var n,i=this.node.getComponentsInChildren(sj),a=1===i.length?8:4,o=m(i);try{for(o.s();!(n=o.n()).done;){var y=n.value;y.node.attr({totalPathSeekers:Math.floor(a/3)});for(var f=0;f<a;f++){var g=this.spawnBee();g&&y.releaseBee(g)}}}catch(n){o.e(n)}finally{o.f()}this.sortObjects()}},{key:"spawnBee",value:function(){var n=ey(this.beePrefab);return _instanceof(n,j)?(n.name=rf.BEE,this.addObject(n),n.setSiblingIndex(999),n):null}},{key:"spawnCrossingBees",value:function(n){for(var i=this,a=n.beeSpeed,o=n.spawnRandOffset,y=void 0===o?80:o,f=n.playerWorldX,m=n.playerWorldY,g=n.spawnWorldX,b=n.spawnWorldY,k=n.count,C=void 0===k?[1,2]:k,w=n.targetOffsetMultiplier,E=void 0===w?0:w,T=el.randomRangeInt(C[0],C[1]),_=[],A=g<f,R=0;R<T;R++)(function(){var n=i.spawnBee();if(!n)throw new Error("Could not spawn bee");var o=n.getComponent(sf);if(!o)throw new Error("Bee component not found");i.addObject(n),o.isSpawnLeftSide=!A;var k=el.randomRangeInt(-y,y),C=el.randomRangeInt(-y,y),w=g+k,T=b+C,R=n.worldPosition.z;n.setWorldPosition(w,T,R);var P=new eo(f+k*E-w,m+C*E-T);o.rotateToVector(P),o.fly(P.normalize().multiplyScalar(a)),i.scheduleOnce(function(){o.setRole(ry.NORMAL),o.setState(rv.ATTACKING),o.followInstructions()}),_.push(o)})();return this.sortObjects(),_}},{key:"spawnCrossingBeeLine",value:function(n){var i=n.startX,a=n.startY,o=n.endX,y=n.endY,f=n.thickness,m=n.spriteType,g=ey(this.crossingBeeLinePrefab);if(!_instanceof(g,j))throw new Error("Could not spawn crossing bee line");g.name=rf.CROSSING_BEE_LINE;var b=g.getComponent(l6);if(!b)throw new Error("CrossingBeeLine component not found");return this.addObject(g),b.setSpriteType(m),b.setStartPosition(i,a),b.setEndPosition(o,y),b.thickness=f,this.sortObjects(),b}},{key:"checkAllBeeDie",value:function(){var n=this.node.getComponentsInChildren(sf),i=this.node.getComponentsInChildren(la),a=n.some(function(n){return n.enabled}),o=i.some(function(n){return n.enabled});return!a&&!o}},{key:"spawnDoge",value:function(n){var i=n.x,a=n.y,o=n.right,y=n.isWorldPosition,f=void 0!==y&&y,m=n.rigidBodyConfig,g=ey(this.dogePrefab);if(!_instanceof(g,j))return null;g.name=rf.DOGE,f||g.setPosition(i,a),g.setScale(void 0!==o&&o?-1:1,1),this.addObject(g),g.setSiblingIndex(999),f&&g.setWorldPosition(i,a,g.worldPosition.z);var b=(void 0===m?{}:m).gravityScale,k=g.getComponent(ei);if(!k)throw new Error("Could not get doge rigidBody");return k.gravityScale=void 0===b?1:b,g}},{key:"spawnSpider",value:function(n,i){var a=ey(this.spiderPrefab);return _instanceof(a,j)?(a.name=rf.SPIDER,a.setPosition(n,i),this.addObject(a),a):null}},{key:"spawnBigBee",value:function(n,i){var a=ey(this.bigBeePrefab);return _instanceof(a,j)?(a.name=rf.BIG_BEE,a.setPosition(n,i),this.addObject(a),a):null}},{key:"reviveBigBees",value:function(){var n,i=this.node.getComponentsInChildren(la),a=m(i);try{for(a.s();!(n=a.n()).done;)n.value.state=rv.ATTACKING}catch(n){a.e(n)}finally{a.f()}}},{key:"spawnBrick",value:function(n){if(!this.batchObjects.isBrickInitialized){var i=this.spawnBrickNormal(n);if(!i)return null;var a=i.getComponent(lp);return a?(this.batchObjects.isBrickInitialized=!0,a.useBatch&&this.batchObjects.assignMainBrickComponent(a),this.addObject(i),i):null}return this.batchObjects.isBrickBatchingEnabled()?(this.batchObjects.updateBrickPolygon(n),null):this.spawnBrickNormal(n)}},{key:"spawnBrickNormal",value:function(n){var i=ey(this.brickPrefab);return _instanceof(i,j)?(i.name=rf.BRICK,i.attr({polygon:n}),this.addObject(i),i):null}},{key:"spawnWood",value:function(n){var i=ey(this.woodPrefab);if(!_instanceof(i,j))return null;i.name=rf.WOOD;var a=i.getComponent(lD);if(!a)return console.warn("Pattern not found"),null;a.savePolygonPoints(n.map(function(n){return{x:n.x,y:n.y}})),this.addObject(i),a.draw(n),a.applyCollider(n),a.setRigidBodyType(en.Dynamic);var o=this.spawnWoodStroke(n);return o.setParent(i,!1),i.addChild(o),i}},{key:"spawnWoodStroke",value:function(n){var i=new j;i.name=rf.WOOD_STROKE,i.layer=0x2000000,this.addObject(i);var a=i.addComponent(W);a.lineWidth=4;var o=new q;q.fromHEX(o,"#0d0d15"),a.strokeColor=o;var y=n[0];if(!y)return i;a.moveTo(y.x,y.y);var f,g=m(n.slice(1));try{for(g.s();!(f=g.n()).done;){var b=f.value;a.lineTo(b.x,b.y)}}catch(n){g.e(n)}finally{g.f()}return a.close(),a.stroke(),i}},{key:"spawnGrass",value:function(n,i){if(!this.batchObjects.isGrassInitialized){var a=this.spawnGrassNormal(n,!1);if(!a)return null;var o=a.getComponent(uF);return o?(this.batchObjects.isGrassInitialized=!0,o.useBatch&&this.batchObjects.assignMainGrassComponent(o),this.addObject(a),a):null}var y=i?rf.GRASS_DARK:rf.GRASS;return this.batchObjects.isGrassBatchingEnabled()?(this.batchObjects.updateGrassPolygon(y,n),null):this.spawnGrassNormal(n,i)}},{key:"spawnGrassNormal",value:function(n,i){var a=ey(this.grassPrefab);return _instanceof(a,j)?(a.name=i?rf.GRASS_DARK:rf.GRASS,a.attr({polygon:n,isDark:i}),this.addObject(a),a):null}},{key:"spawnPoison",value:function(n){if(!this.batchPoisonPool)return this.spawnPoisonNormal(n);if(!this.batchObjects.isPoisonInitialized){var i=ey(this.arenaPrefab);if(!_instanceof(i,j))return null;i.name=rf.POISON,this.addObject(i);var a=i.addComponent(lF);return a.useBatch=!0,this.batchObjects.isPoisonInitialized=!0,this.batchObjects.assignMainPoisonComponent(a),this.batchObjects.updatePoisonPolygon(n),i}return this.batchObjects.updatePoisonPolygon(n),null}},{key:"spawnPoisonNormal",value:function(n){var i=ey(this.arenaPrefab);return _instanceof(i,j)?(i.name=rf.POISON,this.addObject(i),i.addComponent(lF).polygon=n,i):null}},{key:"spawnPoisonSurface",value:function(n){if(!this.batchPoisonPool)return this.spawnPoisonSurfaceNormal(n);if(!this.batchObjects.isPoisonSurfaceInitialized){var i=ey(this.arenaPrefab);if(!_instanceof(i,j))return null;i.name=rf.POISON_SURFACE,this.addObject(i);var a=i.addComponent(lM);return a.useBatch=!0,this.batchObjects.isPoisonSurfaceInitialized=!0,this.batchObjects.assignMainPoisonSurfaceComponent(a),this.batchObjects.updatePoisonSurfacePolygon(n),i}return this.batchObjects.updatePoisonSurfacePolygon(n),null}},{key:"spawnPoisonSurfaceNormal",value:function(n){var i=ey(this.arenaPrefab);return _instanceof(i,j)?(i.name=rf.POISON_SURFACE,this.addObject(i),i.addComponent(lM).polygon=n,i):null}},{key:"spawnWater",value:function(n){if(!this.batchWaterPool)return this.spawnWaterNormal(n);if(!this.batchObjects.isWaterInitialized){var i=ey(this.arenaPrefab);if(!_instanceof(i,j))return null;i.name=rf.WATER,this.addObject(i);var a=i.addComponent(lU);return a.useBatch=!0,i.addComponent(V).opacity=.75,this.batchObjects.isWaterInitialized=!0,this.batchObjects.assignMainWaterComponent(a),this.batchObjects.updateWaterPolygon(n),i}return this.batchObjects.updateWaterPolygon(n),null}},{key:"spawnWaterNormal",value:function(n){var i=ey(this.arenaPrefab);return _instanceof(i,j)?(i.name=rf.WATER,this.addObject(i),i.addComponent(lU).polygon=n,i.addComponent(V).opacity=.75,i):null}},{key:"spawnDangerAreaNormal",value:function(n){var i=ey(this.arenaPrefab);if(!_instanceof(i,j))return null;i.name=rf.DANGER_AREA;var a=i.getComponent(lA);if(!a)return console.warn("GraphicsPattern not found"),null;this.addObject(i),a.setColor("#fc03036d"),a.draw(n);var o=i.addComponent(ei);return o.type=en.Static,o.group=rE.DEFAULT,i.addComponent(em),a.applyCollider(n),i}},{key:"spawnWaterSurface",value:function(n,i){var a=new j;return a.name=rf.WATER_SURFACE,a.layer=this.node.layer,a.setPosition(n,i),this.loadWaterSurfaceSprite(a),this.addObject(a),a}},{key:"loadWaterSurfaceSprite",value:(g=n(function(n){var i,a;return _ts_generator(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,eZ.loadSpriteFrameAsync(r_.WATER_SURFACE_FRAME)];case 1:if(i=o.sent(),!n.isValid)throw new Error("loadWaterSurfaceSprite: WaterSurface is not valid");if(!i)throw new Error("loadWaterSurfaceSprite: SpriteFrame not found");return n.addComponent(F).spriteFrame=i,[3,3];case 2:return console.warn("loadWaterSurfaceSprite",_instanceof(a=o.sent(),Error)?a:new Error(String(a))),[3,3];case 3:return[2]}})}),function(n){return g.apply(this,arguments)})},{key:"spawnThorn",value:function(n,i,a){var o=arguments.length>2&&void 0!==a?a:0,y=ey(this.thornPrefab);return _instanceof(y,j)?(y.name=rf.THORN,y.angle=o,y.setPosition(n,i),this.addObject(y),y):null}},{key:"spawnThornBall",value:function(n,i){var a=ey(this.thornBallPrefab);return _instanceof(a,j)?(a.name=rf.THORN_BALL,a.setPosition(n,i),this.addObject(a),a):null}},{key:"spawnAirFan",value:function(n,i,a){var o=arguments.length>2&&void 0!==a?a:0,y=ey(this.airFanPrefab);if(!_instanceof(y,j))return null;y.name=rf.AIR_FAN,y.angle=o,y.setScale(this.normalizeAngle(o)>180?-1:1,1),y.setPosition(n,i),y.attr({id:rw.AIR_FAN});var f=y.getComponent(rM);return f?(f.setForceDirection(o),this.addObject(y),y):(console.warn("AirFan not found"),null)}},{key:"spawnCollider",value:function(n,i,a){var o=new j;o.name=rf.COLLIDER,this.addObject(o),o.setPosition(n,i);var y=o.addComponent(ei);y.type=en.Static,y.group=rE.MAIN_OBJECT;var f=o.addComponent(em);return f.restitution=.2,f.points=a.map(function(n){var i=n.x,a=n.y;return new eo(i,a)}),f.apply(),o}},{key:"spawnLine",value:function(n){if(!this.batchMapLines)return this.spawnLineNormal(n);if(!this.batchObjects.isLineInitialized){var i=this.spawnLineNormal(n);if(!i)return null;this.addObject(i);var a=i.getComponent(uz);return a?(this.batchObjects.isLineInitialized=!0,this.batchObjects.assignMainLineComponent(a),i):null}return this.batchObjects.updateMapLine(n),null}},{key:"spawnLineNormal",value:function(n){var i=ey(this.mapLinePrefab);return _instanceof(i,j)?i.getComponent(uz)?(i.name=rf.MAP_LINE,i.attr({polygon:n}),this.addObject(i),i):(console.warn("MapLine not found"),null):null}},{key:"spawnConnect",value:function(n,i,a){var o=this.getComponentsInChildren(lD).find(function(n){var i=n.getPolygonPoints();if(i.length===a.length){for(var o=0;o<a.length;o++){var y,f,m=null!==(y=i[o])&&void 0!==y?y:{x:0,y:0},g=(m.x,m.y,null!==(f=a[o])&&void 0!==f?f:{x:0,y:0});g.x,g.y}return!0}}),y=ey(this.connectPrefab);if(!_instanceof(y,j))return null;if(y.setPosition(n,i),this.node.insertChild(y,this.getSiblingIndex(y.name)),o){var f=y.getWorldPosition(),m=f.x,g=f.y,b=o.node.getWorldPosition(),k=b.x,C=b.y,w=y.getComponent(ec);w.connectedBody=o.node.getComponent(ei),w.connectedAnchor=new eo(m-k,g-C),w.enabled=!1,w.enabled=!0}}},{key:"spawnBalloon",value:function(n,i,a){var o=ey(this.balloonPrefab);if(!_instanceof(o,j))return null;o.name=rf.BALLOON,o.setPosition(n,i);var y=o.getComponent(r9);if(!y)return console.warn("Balloon not found"),null;var f=y.connectToDoge(a);return this.addObject(o),f&&this.addObject(f.node),o}},{key:"getRandomDogeToBee",value:function(){var n;if(!this.node.parent)return null;var i=this.node.parent.getComponentsInChildren(uR),a=i.length;return null!==(n=i[Math.floor(Math.random()*a)])&&void 0!==n?n:null}},{key:"getNearestDogeToBee",value:function(n){var i;if(!this.node.parent)return null;var a=this.node.parent.getComponentsInChildren(uR);return 0===(a=a.filter(function(n){return!n.isCantBeTargeted()})).length?null:(a.sort(function(i,a){return eo.distance(i.node.worldPosition,n.node.worldPosition)-eo.distance(a.node.worldPosition,n.node.worldPosition)}),null!==(i=a[0])&&void 0!==i?i:null)}},{key:"getDoges",value:function(n){if(!this.node.parent)return[];return this.node.parent.getComponentsInChildren(uR).filter(function(i){return i!==n})}},{key:"normalizeAngle",value:function(n){var i=n%360;return i<0?360+i:i}}]),p}(O)).prototype,"dogePrefab",[uH],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ct=g(u8.prototype,"spiderPrefab",[uj],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),cn=g(u8.prototype,"beePrefab",[uV],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ci=g(u8.prototype,"beehivePrefab",[uW],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ca=g(u8.prototype,"bigBeePrefab",[uq],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),co=g(u8.prototype,"thornPrefab",[uK],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),cr=g(u8.prototype,"thornBallPrefab",[uY],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),cs=g(u8.prototype,"airFanPrefab",[uJ],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),cl=g(u8.prototype,"grassPrefab",[uZ],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),cu=g(u8.prototype,"balloonPrefab",[uX],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),cc=g(u8.prototype,"brickPrefab",[uQ],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ch=g(u8.prototype,"arenaPrefab",[u$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),cp=g(u8.prototype,"woodPrefab",[u0],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),cd=g(u8.prototype,"connectPrefab",[u1],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),cy=g(u8.prototype,"mapLinePrefab",[u2],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),cv=g(u8.prototype,"crossingBeeLinePrefab",[u3],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),cf=g(u8.prototype,"batchMapLines",[u4],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),cm=g(u8.prototype,"batchPoisonPool",[u5],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),cg=g(u8.prototype,"batchPoisonSurface",[u6],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),cb=g(u8.prototype,"batchWaterPool",[u7],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),cS=g(u8.prototype,"batchDangerArea",[u9],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),u8))||u8);A._RF.pop(),A._RF.push({},"97f21hkFElI0YdBDCgAkt9+","Hint",void 0);var c_,cA,cR,cP,cB=(0,P.ccclass)("Hint")(cC=function(f){i(u,f);var g,b=a(u);function u(){var n;o(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return(n=b.call.apply(b,[this].concat(a))).hintLine=null,n.hintHand=null,n.isHintShown=!1,n}return y(u,[{key:"showHint",value:function(n,i){this.isHintShown||(this.isHintShown=!0,this.hintLine=this.createHintLine(),this.hintLine.active=!0,this.drawHintLine(this.hintLine,n),i&&this.showHand(n))}},{key:"drawHintLine",value:function(n,i){var a=n.getComponent(W);if(!a)throw new Error("drawHintLine: Graphics is null");a.clear();var o=i[0];if(o){a.moveTo(o.x,o.y);var y,f=m(i.slice(1));try{for(f.s();!(y=f.n()).done;){var g=y.value;a.lineTo(g.x,g.y)}}catch(n){f.e(n)}finally{f.f()}a.stroke()}}},{key:"hideHint",value:function(){this.hintLine&&(this.hintLine.active=!1),this.hintHand&&(eb.stopAllByTarget(this.hintHand),this.hintHand.active=!1)}},{key:"showHand",value:(g=n(function(n){var i;return _ts_generator(this,function(a){switch(a.label){case 0:return this.hintHand=this.createHintHand(n),[4,eZ.loadSpriteFrameAsync(r_.IC_HAND_FRAME)];case 1:return(i=a.sent())?(this.addSpriteToHand(i),this.runHandHintAnimation(n)):this.removeHintHand(),[2]}})}),function(n){return g.apply(this,arguments)})},{key:"addSpriteToHand",value:function(n){var i;this.hintHand&&(this.hintHand.addComponent(F).spriteFrame=n,null===(i=this.hintHand.getComponent(Q))||void 0===i||i.setAnchorPoint(.15,.9))}},{key:"runHandHintAnimation",value:function(n){var i=this;if(this.hintHand){for(var a=eS(this.hintHand),o=[],y=1;y<n.length;y++){var f=n[y-1],m=n[y];if(f&&m){var g=f.x-m.x,b=f.y-m.y,k=Math.sqrt(g*g+b*b),C=eS(this.hintHand).to(k/250,{position:new U(m.x,m.y)});o.push(C)}}var w=eS(this.hintHand).delay(.5).call(function(){var a=n[0];a&&i.hintHand&&i.hintHand.setPosition(a.x,a.y)});o.push(w),a.sequence.apply(a,o).repeatForever().start()}}},{key:"getIsHintShow",value:function(){return this.isHintShown}},{key:"reset",value:function(){this.isHintShown=!1,this.removeHintLine(),this.removeHintHand()}},{key:"createHintLine",value:function(){if(this.hintLine)return this.hintLine;var n=new j,i=n.addComponent(W);i.lineWidth=10,i.lineCap=W.LineCap.ROUND,i.lineJoin=W.LineJoin.ROUND;var a=new q;return q.fromHEX(a,"#fc03036d"),i.strokeColor=a,this.node.insertChild(n,0),n}},{key:"createHintHand",value:function(n){if(this.hintHand)return this.hintHand;var i=new j,a=n[0];return a?(i.setPosition(a.x,a.y),this.hintHand=i,this.node.addChild(i),i):i}},{key:"removeHintLine",value:function(){this.hintLine&&(this.hintLine.getComponent(W).clear(),this.hintLine.destroyAllChildren(),this.hintLine.removeAllChildren(),this.hintLine.destroy(),this.hintLine=null)}},{key:"removeHintHand",value:function(){this.hintHand&&(this.hintHand.destroyAllChildren(),this.hintHand.removeAllChildren(),this.hintHand.destroy(),this.hintHand=null)}}]),u}(O))||cC;A._RF.pop(),A._RF.push({},"33281kEO4dMXLCvmfkrwqQM","CollisionDetectLine",void 0);var cL,cD,cO,cI,cN,cF,cG,cM,cz,cx,cU=P.ccclass,cH=P.property,cj=(c_=cU("CollisionDetectLine"),cA=cH(W),c_((cP=g((cR=function(n){i(r,n);var f=a(r);function r(){var n;o(this,r);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=f.call.apply(f,[this].concat(a)),b(n,"graphic",cP,k(n)),n}return y(r,[{key:"onLoad",value:function(){this.graphic=this.getComponent(W),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){t_.lazyValidateProperties(this)}},{key:"drawFromTo",value:function(n,i){this.graphic.clear(),this.graphic.moveTo(n.x,n.y),this.graphic.lineTo(i.x,i.y),this.graphic.stroke()}}]),r}(rI)).prototype,"graphic",[cA],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cR))||cR);A._RF.pop(),A._RF.push({},"00eeawrUitLxLgSANaGHhcv","LineDrawer",void 0);var cV=P.ccclass,cW=P.property,cq=P.executionOrder,cK=(cL=cV("LineDrawer"),cD=cq(3),cO=cW(ed),cI=cW(ed),cN=cW(D),cL(cF=cD((cM=g((cG=function(n){i(r,n);var f=a(r);function r(){var n;o(this,r);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=f.call.apply(f,[this].concat(a)),b(n,"linePrefab",cM,k(n)),b(n,"collisionDetectLinePrefab",cz,k(n)),b(n,"minDistance",cx,k(n)),n.lastUIPos=null,n.currentLine=null,n.collisionDetectLine=null,n.isColliding=!1,n}return y(r,[{key:"beginDraw",value:function(n){this.createLine(),this.createCollisionDetectLine(),this.initLine(),this.lastUIPos=null,this.isColliding=!1,this.draw(n)}},{key:"createLine",value:function(){var n=ey(this.linePrefab);_instanceof(n,j)&&(n.name=rf.DRAW_LINE,n.getComponent(W)&&(this.node.addChild(n),this.currentLine=n))}},{key:"createCollisionDetectLine",value:function(){if(this.currentLine){var n=ey(this.collisionDetectLinePrefab);if(_instanceof(n,j)){var i=n.getComponent(W);if(i){var a=this.currentLine.getComponent(W);if(a){var o=a.lineWidth,y=a.strokeColor;i.strokeColor=new q(y.r,y.g,y.b,128),i.lineWidth=o,this.node.addChild(n),this.collisionDetectLine=n}}}}}},{key:"initLine",value:function(){var n,i=null===(n=this.currentLine)||void 0===n?void 0:n.getComponent(sA);i&&(i.sleep(),i.init())}},{key:"draw",value:function(n){var i,a,o=this;if(n&&this.currentLine&&this.collisionDetectLine){var y=this.currentLine.getComponent(sA);if(y){var f=this.collisionDetectLine.getComponent(cj);if(f){var m=new U;null===(i=this.node.parent)||void 0===i||i.inverseTransformPoint(m,new U(n.x,n.y));var g=new eo(m.x,m.y);if(this.isPointOverlapWithMap(n)){if(this.lastUIPos){var b=this.lastUIPos,k=b.x,C=b.y;this.node.inverseTransformPoint(m,new U(k,C));var w=new eo(m.x,m.y);if(this.isColliding)f.drawFromTo(w,g);else{var E,T=this.isCurrentLineOverlapWithMap(n,this.lastUIPos);if(T.sort(function(n,i){return null==o.lastUIPos?0:eo.distance(n.point,o.lastUIPos)-eo.distance(i.point,o.lastUIPos)}),!(null===(E=T[0])||void 0===E?void 0:E.point))return;this.isColliding=!0}}}else if(this.lastUIPos&&this.isCurrentLineOverlapWithMap(n,this.lastUIPos).length>0){var _=this.lastUIPos,A=_.x,R=_.y;this.node.inverseTransformPoint(m,new U(A,R));var P=new eo(m.x,m.y);f.drawFromTo(P,g)}else{if(!this.lastUIPos){this.lastUIPos=n.clone();var B=g.x,L=g.y;y.storePoints(B,L)}var D=this.lastUIPos,O=D.x,I=D.y;null===(a=this.node.parent)||void 0===a||a.inverseTransformPoint(m,new U(O,I));var N=new eo(m.x,m.y),F=N.x,G=N.y,M=g.x,z=g.y,x=F-M,H=G-z;if(!(x*x+H*H<this.minDistance*this.minDistance)){var j=Math.sqrt(x*x+H*H);this.lastUIPos=n.clone(),y.drawTo(F,G,M,z),y.storePoints(M,z);var V=this.collisionDetectLine.getComponent(W);return null==V||V.clear(),this.isColliding=!1,j}}}}}}},{key:"isPointOverlapWithMap",value:function(n){return this.getCollision(n).length>0}},{key:"isCurrentLineOverlapWithMap",value:function(n,i){var a=this.getParallelLines(i,n,2),o=a.leftLine,y=a.rightLine,f=eC.instance.raycast(i,n,ew.All).filter(function(n){return!n.collider.sensor}).filter(function(n){var i;return"rope"!==(null===(i=n.collider.node.parent)||void 0===i?void 0:i.name)}),m=eC.instance.raycast(o.p1,o.p2,ew.All).filter(function(n){return!n.collider.sensor}).filter(function(n){var i;return"rope"!==(null===(i=n.collider.node.parent)||void 0===i?void 0:i.name)}),g=eC.instance.raycast(y.p1,y.p2,ew.All).filter(function(n){return!n.collider.sensor}).filter(function(n){var i;return"rope"!==(null===(i=n.collider.node.parent)||void 0===i?void 0:i.name)});return[].concat(C(f),C(m),C(g))}},{key:"endDraw",value:function(){if(this.currentLine&&this.collisionDetectLine){var n=this.currentLine.getComponent(sA);if(n){n.addPhysics(),n.wake();var i=this.collisionDetectLine.getComponent(W);i?(i.clear(),this.lastUIPos=null,this.isColliding=!1,this.currentLine=null):console.warn("Graphics component not found")}else console.warn("Line component not found")}}},{key:"deActivePhysics",value:function(){var n,i=null===(n=this.currentLine)||void 0===n?void 0:n.getComponent(sA);i&&(i.deActiveColliders(),i.sleep())}},{key:"clearLines",value:function(){this.node.destroyAllChildren(),this.node.removeAllChildren()}},{key:"getParallelLines",value:function(n,i,a){var o=i.x-n.x,y=i.y-n.y,f=el.Vec2.distance(n,i),m=o/f,g=y/f,b=new eo(n.x-g*a,n.y+m*a),k=new eo(n.x+g*a,n.y-m*a);return{leftLine:{p1:b,p2:new eo(b.x+o,b.y+y)},rightLine:{p1:k,p2:new eo(k.x+o,k.y+y)}}}},{key:"getCollision",value:function(n){return eC.instance.testAABB(new el.Rect(n.x-2,n.y-2,4,4)).filter(function(n){return!n.sensor}).filter(function(n){var i;return"rope"!==(null===(i=n.node.parent)||void 0===i?void 0:i.name)}).filter(function(i){if(_instanceof(i,em)){var a=new U;return i.node.inverseTransformPoint(a,new U(n.x,n.y)),eE.polygonCircle(i.points,new eo(a.x,a.y),2)}if(_instanceof(i,ev)){var o=i.node.getWorldPosition(),y=o.x,f=o.y;return eE.circleCircle(new eo(y,f+i.worldPosition.y),i.radius,new eo(n.x,n.y),2)}return!i.sensor})}}]),r}(O)).prototype,"linePrefab",[cO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),cz=g(cG.prototype,"collisionDetectLinePrefab",[cI],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),cx=g(cG.prototype,"minDistance",[cN],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),cF=cG))||cF)||cF);A._RF.pop(),A._RF.push({},"463cfEelRVL4KYgc4n5FJNz","Map",void 0);var cY,cJ=[{id:1,map:1,type:1},{id:2,map:2,type:1},{id:3,map:3,type:1},{id:4,map:8,type:1},{id:5,map:9,type:1},{id:6,map:16,type:1},{id:7,map:4,type:1},{id:8,map:7,type:1},{id:9,map:6,type:1},{id:10,map:18,type:1},{id:11,map:10,type:2},{id:12,map:11,type:2},{id:13,map:12,type:2},{id:14,map:13,type:2},{id:15,map:14,type:2},{id:16,map:15,type:2},{id:17,map:5,type:2},{id:18,map:17,type:2},{id:19,map:19,type:2},{id:20,map:20,type:2},{id:21,map:21,type:3},{id:22,map:22,type:3},{id:23,map:23,type:3},{id:24,map:24,type:3},{id:25,map:25,type:3},{id:26,map:26,type:3},{id:27,map:27,type:3},{id:28,map:28,type:3},{id:29,map:29,type:3},{id:30,map:30,type:3},{id:31,map:31,type:4},{id:32,map:32,type:4},{id:33,map:33,type:4},{id:34,map:34,type:4},{id:35,map:35,type:4},{id:36,map:36,type:4},{id:37,map:37,type:4},{id:38,map:38,type:4},{id:39,map:39,type:4},{id:40,map:40,type:4},{id:41,map:41,type:5},{id:42,map:42,type:5},{id:43,map:43,type:5},{id:44,map:44,type:5},{id:45,map:45,type:5},{id:46,map:46,type:5},{id:47,map:47,type:5},{id:48,map:48,type:5},{id:49,map:49,type:5},{id:50,map:50,type:5},{id:51,map:51,type:6},{id:52,map:52,type:6},{id:53,map:53,type:6},{id:54,map:54,type:6},{id:55,map:55,type:6},{id:56,map:56,type:6},{id:57,map:57,type:6},{id:58,map:58,type:6},{id:59,map:59,type:6},{id:60,map:60,type:6},{id:61,map:61,type:7},{id:62,map:62,type:7},{id:63,map:63,type:7},{id:64,map:64,type:7},{id:65,map:65,type:7},{id:66,map:66,type:7},{id:67,map:67,type:7},{id:68,map:68,type:7},{id:69,map:69,type:7},{id:70,map:70,type:7},{id:71,map:71,type:8},{id:72,map:72,type:8},{id:73,map:73,type:8},{id:74,map:74,type:8},{id:75,map:75,type:8},{id:76,map:76,type:8},{id:77,map:77,type:8},{id:78,map:78,type:8},{id:79,map:79,type:8},{id:80,map:80,type:8},{id:81,map:81,type:9},{id:82,map:82,type:9},{id:83,map:83,type:9},{id:84,map:84,type:9},{id:85,map:85,type:9},{id:86,map:86,type:9},{id:87,map:87,type:9},{id:88,map:88,type:9},{id:89,map:89,type:9},{id:90,map:90,type:9},{id:91,map:91,type:10},{id:92,map:92,type:10},{id:93,map:93,type:10},{id:94,map:94,type:10},{id:95,map:95,type:10},{id:96,map:96,type:10},{id:97,map:97,type:10},{id:98,map:98,type:10},{id:99,map:99,type:10},{id:100,map:100,type:10},{id:101,map:101,type:11},{id:102,map:102,type:11},{id:103,map:103,type:11},{id:104,map:104,type:11},{id:105,map:105,type:11},{id:106,map:106,type:11},{id:107,map:107,type:11},{id:108,map:108,type:11},{id:109,map:109,type:11},{id:110,map:110,type:11},{id:111,map:111,type:12},{id:112,map:112,type:12},{id:113,map:113,type:12},{id:114,map:114,type:12},{id:115,map:115,type:12},{id:116,map:116,type:12},{id:117,map:117,type:12},{id:118,map:118,type:12},{id:119,map:119,type:12},{id:120,map:120,type:12},{id:121,map:121,type:13},{id:122,map:122,type:13},{id:123,map:123,type:13},{id:124,map:124,type:13},{id:125,map:125,type:13},{id:126,map:126,type:13},{id:127,map:127,type:13},{id:128,map:128,type:13},{id:129,map:129,type:13},{id:130,map:130,type:13},{id:131,map:131,type:14},{id:132,map:132,type:14},{id:133,map:133,type:14},{id:134,map:134,type:14},{id:135,map:135,type:14},{id:136,map:136,type:14},{id:137,map:137,type:14},{id:138,map:138,type:14},{id:139,map:139,type:14},{id:140,map:140,type:14},{id:141,map:141,type:15},{id:142,map:142,type:15},{id:143,map:143,type:15},{id:144,map:144,type:15},{id:145,map:145,type:15},{id:146,map:146,type:15},{id:147,map:147,type:15},{id:148,map:148,type:15},{id:149,map:149,type:15},{id:150,map:150,type:15},{id:151,map:184,type:16},{id:152,map:185,type:16},{id:153,map:186,type:16},{id:154,map:187,type:16},{id:155,map:188,type:16},{id:156,map:189,type:16},{id:157,map:190,type:16},{id:158,map:191,type:16},{id:159,map:192,type:16},{id:160,map:193,type:16},{id:161,map:194,type:17},{id:162,map:195,type:17},{id:163,map:196,type:17},{id:164,map:197,type:17},{id:165,map:198,type:17},{id:166,map:199,type:17},{id:167,map:200,type:17},{id:168,map:167,type:17},{id:169,map:168,type:17},{id:170,map:169,type:17},{id:171,map:170,type:18},{id:172,map:171,type:18},{id:173,map:172,type:18},{id:174,map:173,type:18},{id:175,map:174,type:18},{id:176,map:175,type:18},{id:177,map:176,type:18},{id:178,map:177,type:18},{id:179,map:178,type:18},{id:180,map:179,type:18},{id:181,map:180,type:19},{id:182,map:181,type:19},{id:183,map:182,type:19},{id:184,map:183,type:19},{id:185,map:151,type:19},{id:186,map:152,type:19},{id:187,map:153,type:19},{id:188,map:154,type:19},{id:189,map:155,type:19},{id:190,map:156,type:19},{id:191,map:157,type:20},{id:192,map:158,type:20},{id:193,map:159,type:20},{id:194,map:160,type:20},{id:195,map:161,type:20},{id:196,map:162,type:20},{id:197,map:163,type:20},{id:198,map:164,type:20},{id:199,map:165,type:20},{id:200,map:166,type:20},{id:201,map:201,type:21},{id:202,map:202,type:21},{id:203,map:203,type:21},{id:204,map:204,type:21},{id:205,map:205,type:21},{id:206,map:206,type:21},{id:207,map:207,type:21},{id:208,map:208,type:21},{id:209,map:209,type:21},{id:210,map:210,type:21},{id:211,map:211,type:22},{id:212,map:212,type:22},{id:213,map:213,type:22},{id:214,map:214,type:22},{id:215,map:215,type:22},{id:216,map:216,type:22},{id:217,map:217,type:22},{id:218,map:218,type:22},{id:219,map:219,type:22},{id:220,map:220,type:22},{id:221,map:221,type:23},{id:222,map:222,type:23},{id:223,map:223,type:23},{id:224,map:224,type:23},{id:225,map:225,type:23},{id:226,map:226,type:23},{id:227,map:227,type:23},{id:228,map:228,type:23},{id:229,map:229,type:23},{id:230,map:230,type:23},{id:231,map:231,type:24},{id:232,map:232,type:24},{id:233,map:233,type:24},{id:234,map:234,type:24},{id:235,map:235,type:24},{id:236,map:236,type:24},{id:237,map:237,type:24},{id:238,map:238,type:24},{id:239,map:239,type:24},{id:240,map:240,type:24},{id:241,map:241,type:25},{id:242,map:242,type:25},{id:243,map:243,type:25},{id:244,map:244,type:25},{id:245,map:245,type:25},{id:246,map:246,type:25},{id:247,map:247,type:25},{id:248,map:248,type:25},{id:249,map:249,type:25},{id:250,map:250,type:25},{id:251,map:251,type:26},{id:252,map:252,type:26},{id:253,map:253,type:26},{id:254,map:254,type:26},{id:255,map:255,type:26},{id:256,map:256,type:26},{id:257,map:257,type:26},{id:258,map:258,type:26},{id:259,map:259,type:26},{id:260,map:260,type:26},{id:261,map:261,type:27},{id:262,map:262,type:27},{id:263,map:263,type:27},{id:264,map:264,type:27},{id:265,map:265,type:27},{id:266,map:266,type:27},{id:267,map:267,type:27},{id:268,map:268,type:27},{id:269,map:269,type:27},{id:270,map:270,type:27},{id:271,map:271,type:28},{id:272,map:272,type:28},{id:273,map:273,type:28},{id:274,map:274,type:28},{id:275,map:275,type:28},{id:276,map:276,type:28},{id:277,map:277,type:28},{id:278,map:278,type:28},{id:279,map:279,type:28},{id:280,map:280,type:28},{id:281,map:281,type:29},{id:282,map:282,type:29},{id:283,map:283,type:29},{id:284,map:284,type:29},{id:285,map:285,type:29},{id:286,map:286,type:29},{id:287,map:287,type:29},{id:288,map:288,type:29},{id:289,map:289,type:29},{id:290,map:290,type:29},{id:291,map:291,type:30},{id:292,map:292,type:30},{id:293,map:293,type:30},{id:294,map:294,type:30},{id:295,map:295,type:30},{id:296,map:296,type:30},{id:297,map:297,type:30},{id:298,map:298,type:30},{id:299,map:299,type:30},{id:300,map:300,type:30},{id:301,map:301,type:31},{id:302,map:302,type:31},{id:303,map:303,type:31},{id:304,map:304,type:31},{id:305,map:305,type:31},{id:306,map:306,type:31},{id:307,map:307,type:31},{id:308,map:308,type:31},{id:309,map:309,type:31},{id:310,map:310,type:31},{id:311,map:311,type:32},{id:312,map:312,type:32},{id:313,map:313,type:32},{id:314,map:314,type:32},{id:315,map:315,type:32},{id:316,map:316,type:32},{id:317,map:317,type:32},{id:318,map:318,type:32},{id:319,map:319,type:32},{id:320,map:320,type:32},{id:321,map:321,type:33},{id:322,map:322,type:33},{id:323,map:323,type:33},{id:324,map:324,type:33},{id:325,map:325,type:33}];A._RF.pop(),A._RF.push({},"45df2RUUZZNhaXqOADOV0HC","MapLoader",void 0);var cZ,cX=(0,P.ccclass)("MapLoader")(cY=function(f){i(l,f);var m,g=a(l);function l(){return o(this,l),g.apply(this,arguments)}return y(l,[{key:"paddingZero",value:function(n,i){return Array(i-n.length).fill("0").join("")+n}},{key:"getMapByLevel",value:function(n){var i=n;if(n>325){var a,o=rl.length;i=null!==(a=rl[(n-325)%o-1])&&void 0!==a?a:1}var y=cJ.find(function(n){return n.id===i});return console.log("Map:",i),y?y.map:1}},{key:"getMapJsonPath",value:function(n){var i=this.getMapByLevel(n),a=this.paddingZero(i.toString(),3);return"".concat(r_.MAP_JSON_PREFIX).concat(a)}},{key:"preloadLevel",value:function(n){var i=this.getMapJsonPath(n);eZ.preloadJson(i)}},{key:"loadLevel",value:(m=n(function(n,i){var a,o,y,f;return _ts_generator(this,function(m){switch(m.label){case 0:return m.trys.push([0,2,,3]),console.log("Loading level:",a=this.getMapJsonPath(n)),[4,eZ.loadJsonAsync(a)];case 1:if(!(o=m.sent()))throw new Error("Failed to load JSON asset");return null==i||i(null,o),[3,3];case 2:return f=_instanceof(y=m.sent(),Error)?y:new Error(String(y)),null==i||i(f,null),[3,3];case 3:return[2]}})}),function(n,i){return m.apply(this,arguments)})},{key:"isLevelAlreadyLoaded",value:function(n){var i=this.getMapJsonPath(n);return!!eZ.getAsset(i,eT)}}]),l}(O))||cY;A._RF.pop(),A._RF.push({},"8d3c7nuQGRNgpZcqAOCJY6O","InkCapacityController",void 0);var cQ,c$=(0,P.ccclass)("InkCapacityController")(cZ=function(n){i(r,n);var f=a(r);function r(){var n;o(this,r);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return(n=f.call.apply(f,[this].concat(a))).maxInkLevel=0,n.currentInkLevel=0,n}return y(r,[{key:"init",value:function(n){var i=this.getDrawLength(n);this.maxInkLevel=i,this.currentInkLevel=i}},{key:"getCurrentInkLevel",value:function(){return Math.floor(this.currentInkLevel)}},{key:"removeInkLevel",value:function(n){var i=this.currentInkLevel-n;this.setInkLevel(i)}},{key:"setInkLevel",value:function(n){this.currentInkLevel=n,this.currentInkLevel<0&&(this.currentInkLevel=0),this.currentInkLevel>this.maxInkLevel&&(this.currentInkLevel=this.maxInkLevel)}},{key:"isInkEmpty",value:function(){return this.currentInkLevel<=0}},{key:"getInkLevelPercentage",value:function(){return this.currentInkLevel/this.maxInkLevel*100}},{key:"getStarRating",value:function(n){var i=arguments.length>0&&void 0!==n?n:3,a=this.maxInkLevel/i,o=Math.ceil(this.getCurrentInkLevel()/a);return 0===o?1:o}},{key:"getDrawLength",value:function(n){for(var i=0,a=1;a<n.length;a++){var o=n[a-1],y=n[a],f=o.x-y.x,m=o.y-y.y;i+=Math.sqrt(f*f+m*m)}return 3*i}}]),r}(O))||cZ;A._RF.pop(),A._RF.push({},"014cbNey8JEV4aPhDm9R5W4","InputController",void 0);var c0=(0,P.ccclass)("InputController")(cQ=function(n){i(r,n);var f=a(r);function r(){var n;o(this,r);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return(n=f.call.apply(f,[this].concat(a))).pointerDownOutSideCanvas=!1,n.handleElementPointerDown=function(){n.pointerDownOutSideCanvas=!0},n.handleElementPointerUp=function(i){n.onTouchEnd(),n.pointerDownOutSideCanvas=!1},n.onTouchStart=function(i){n.node.scene.emit(r8.GAME_START,{pointer:i})},n.onTouchMove=function(i){if(n.pointerDownOutSideCanvas)return n.node.scene.emit(r8.GAME_START,{pointer:i}),void(n.pointerDownOutSideCanvas=!1);n.node.scene.emit(r8.DRAWING,{pointer:i})},n.onTouchEnd=function(i){n.node.scene.emit(r8.BEE_ATTACK)},n}return y(r,[{key:"onLoad",value:function(){this.listenInputEvents()}},{key:"listenInputEvents",value:function(){J.os!==J.OS.WINDOWS&&J.os!==J.OS.OSX||(document.addEventListener("pointerup",this.handleElementPointerUp),document.addEventListener("pointerdown",this.handleElementPointerDown),this.node.on(j.EventType.MOUSE_DOWN,this.onTouchStart),this.node.on(j.EventType.MOUSE_MOVE,this.onTouchMove),this.node.on(j.EventType.MOUSE_UP,this.onTouchEnd)),this.node.on(j.EventType.TOUCH_START,this.onTouchStart),this.node.on(j.EventType.TOUCH_MOVE,this.onTouchMove),this.node.on(j.EventType.TOUCH_CANCEL,this.onTouchEnd),this.node.on(j.EventType.TOUCH_END,this.onTouchEnd)}},{key:"onDestroy",value:function(){J.os===J.OS.WINDOWS||J.os===J.OS.OSX?(document.removeEventListener("pointerup",this.handleElementPointerUp),document.removeEventListener("pointerdown",this.handleElementPointerDown),this.node.off(j.EventType.MOUSE_DOWN,this.onTouchStart),this.node.off(j.EventType.MOUSE_MOVE,this.onTouchMove),this.node.off(j.EventType.MOUSE_UP,this.onTouchEnd)):(this.node.off(j.EventType.TOUCH_START,this.onTouchStart),this.node.off(j.EventType.TOUCH_MOVE,this.onTouchMove),this.node.off(j.EventType.TOUCH_CANCEL,this.onTouchEnd),this.node.off(j.EventType.TOUCH_END,this.onTouchEnd))}}]),r}(O))||cQ;A._RF.pop(),A._RF.push({},"e6116mseMNPD6VcLUtkvez6","BaseState",void 0);var c1=function(){function e(n){if(o(this,e),this.game=null,this.data={},this.game=n.node.getComponent(dJ),!this.game)throw new Error("Gameplay component not found");this.manager=n,this.updateStateData(),this.logDebug()}return y(e,[{key:"logDebug",value:function(){var n=this.constructor.name;console.debug("[STATE] ".concat(n),this.data)}},{key:"updateStateData",value:function(){if(this.game){var n=this.game.getGameData();n&&(this.data=n)}}},{key:"updateGameData",value:function(n){var i;null===(i=this.game)||void 0===i||i.setGameData(n)}}]),e}();A._RF.pop(),A._RF.push({},"a79a7LT0s5BuZrk5mvYsyKr","AttackingState",void 0);var c2=function(n){i(r,n);var f=a(r);function r(n){var i;return o(this,r),(i=f.call(this,n)).stopHint(),i.stopDrawing(),i.wakeUpObjects(),i.spawnEnemies(),i.startCountdown(),e2.turnDownMusic(),i}return y(r,[{key:"load",value:function(){var n=this.manager.createLoadingState();this.manager.change(n)}},{key:"initialize",value:function(){e2.stopSound(e4.BEE_FLYING);var n=this.manager.createInitializeState();this.manager.change(n)}},{key:"ready",value:function(){}},{key:"draw",value:function(){}},{key:"attack",value:function(){}},{key:"escape",value:function(){var n=this.manager.createEscapeState();this.manager.change(n)}},{key:"death",value:function(){var n=this.manager.createDeathState();this.manager.change(n)}},{key:"finish",value:function(){}},{key:"update",value:function(){}},{key:"stopDrawing",value:function(){var n;null===(n=this.game)||void 0===n||null===(n=n.lineDrawer)||void 0===n||n.endDraw()}},{key:"stopHint",value:function(){var n;null===(n=this.game)||void 0===n||null===(n=n.hint)||void 0===n||n.hideHint()}},{key:"wakeUpObjects",value:function(){var n;null===(n=this.game)||void 0===n||null===(n=n.gameObjects)||void 0===n||n.wakeUpObjects()}},{key:"spawnEnemies",value:function(){this.game&&this.game.gameObjects&&(this.game.gameObjects.spawnBees(),this.game.gameObjects.reviveBigBees(),e2.playSound(e4.BEE_FLYING),e2.playSound(e4.END_DRAW))}},{key:"startCountdown",value:function(){var n;null===(n=this.game)||void 0===n||n.uiManager.startCountdown()}}]),r}(c1);A._RF.pop(),A._RF.push({},"17461foCjdJ276bG2jcxA06","DeathState",void 0);var c3=globalThis.game.analytics,c4=function(n){i(s,n);var f=a(s);function s(n){var i,a,y;return o(this,s),(y=f.call(this,n)).processCrazyGamesEvent(),y.disableUI(),e2.stopAllSounds(),y.vibrateDevice(),y.pauseCountdown(),y.logLevelFailAnalytics(),null===(i=y.game)||void 0===i||i.scheduleOnce(function(){y.stopDogesLooking(),y.showUncompletedMark(),e2.playSound(e4.LEVEL_FAIL,{volume:.3})},.5),null===(a=y.game)||void 0===a||a.scheduleOnce(function(){y.sleepObjects(),y.showLoseScreen(),y.manager.finish()},1.8),y}return y(s,[{key:"processCrazyGamesEvent",value:function(){"gameplayStop"in GameSDK.extra&&GameSDK.extra.gameplayStop()}},{key:"load",value:function(){}},{key:"initialize",value:function(){}},{key:"ready",value:function(){}},{key:"draw",value:function(){}},{key:"attack",value:function(){}},{key:"escape",value:function(){}},{key:"death",value:function(){}},{key:"finish",value:function(){var n=this.manager.createFinishState();this.manager.change(n)}},{key:"update",value:function(){}},{key:"disableUI",value:function(){var n,i;null===(n=this.game)||void 0===n||n.uiManager.disableUI(),null===(i=this.game)||void 0===i||i.hint.reset()}},{key:"sleepObjects",value:function(){var n,i;null===(n=this.game)||void 0===n||null===(n=n.lineDrawer)||void 0===n||n.deActivePhysics(),null===(i=this.game)||void 0===i||null===(i=i.gameObjects)||void 0===i||i.sleepObjects()}},{key:"pauseCountdown",value:function(){var n;null===(n=this.game)||void 0===n||n.uiManager.pauseCountdown()}},{key:"stopDogesLooking",value:function(){var n;if(null!==(n=this.game)&&void 0!==n&&n.gameObjects){var i,a=this.game.gameObjects.getComponentsInChildren(uR),o=m(a);try{for(o.s();!(i=o.n()).done;){var y,f=i.value;null===(y=f.eyes)||void 0===y||y.stopLook(),f.setEnable(!1)}}catch(n){o.e(n)}finally{o.f()}}}},{key:"vibrateDevice",value:function(){var n;null===(n=ek("Vibrate"))||void 0===n||null===(n=n.getComponent(rs))||void 0===n||n.vibrate(500)}},{key:"showUncompletedMark",value:function(){var n;null===(n=this.game)||void 0===n||n.uiManager.showUncompletedMark()}},{key:"showLoseScreen",value:function(){var n=this.data.level;e9.openScreen(e8.LOSE_SCREEN,{level:n})}},{key:"logLevelFailAnalytics",value:function(){if(this.game){var n=this.game.inkCapacityController;if(n){var i=this.data.level,a=void 0===i?0:i,o=n.getStarRating();console.info("logLevelFailAnalytics",a,o),c3.levelFail(a,o,rp)}}}}]),s}(c1);A._RF.pop(),A._RF.push({},"71778iMCmVDQKkpW1Ag0dZz","DrawingState",void 0);var c5=function(n){i(r,n);var f=a(r);function r(n){var i;return o(this,r),(i=f.call(this,n)).dist=0,i.isEmptyDraw=!1,i.initDrawer(),i}return y(r,[{key:"load",value:function(){}},{key:"initialize",value:function(){var n=this.manager.createInitializeState();this.manager.change(n)}},{key:"ready",value:function(){var n=this.manager.createReadyState();this.manager.change(n)}},{key:"draw",value:function(){}},{key:"attack",value:function(){var n,i,a;if(100===(null!==(n=null===(i=this.game)||void 0===i?void 0:i.inkCapacityController.getInkLevelPercentage())&&void 0!==n?n:0))return null===(a=this.game)||void 0===a||a.lineDrawer.endDraw(),void(this.isEmptyDraw=!0);var o=this.manager.createAttackingState();this.manager.change(o)}},{key:"escape",value:function(){}},{key:"death",value:function(){}},{key:"finish",value:function(){}},{key:"update",value:function(){var n;this.isInkEmpty()?null===(n=this.game)||void 0===n||n.node.scene.emit(r8.BEE_ATTACK):this.isEmptyDraw?this.manager.ready():(this.updateStateData(),this.drawLines(),this.updateInkLevel(),this.updateProgressBar())}},{key:"initDrawer",value:function(){var n;if(null!==(n=this.game)&&void 0!==n&&n.lineDrawer){var i=this.data.pointer.getUILocation();this.game.lineDrawer.beginDraw(i),e2.playSound(e4.BUTTON_CLICK)}}},{key:"isInkEmpty",value:function(){return!!this.game&&this.game.inkCapacityController.isInkEmpty()}},{key:"drawLines",value:function(){var n,i;if(null!==(n=this.game)&&void 0!==n&&n.lineDrawer){var a=this.data.pointer.getUILocation();this.dist=null!==(i=this.game.lineDrawer.draw(a))&&void 0!==i?i:0,this.dist>0&&e2.playSound(e4.TOUCH_START,{volume:.8})}}},{key:"updateInkLevel",value:function(){var n;null===(n=this.game)||void 0===n||n.inkCapacityController.removeInkLevel(this.dist)}},{key:"updateProgressBar",value:function(){if(this.game){var n=this.game.inkCapacityController.getStarRating();this.game.uiManager.setProgressStars(n);var i=this.game.inkCapacityController.getInkLevelPercentage();this.game.uiManager.setProgressBarPercentage(i)}}}]),r}(c1);A._RF.pop(),A._RF.push({},"d600e+7dHhGOYCGrcOjxVcl","EscapeState",void 0);var c6=globalThis.game,c7=c6.player,c9=c6.analytics,c8=function(n){i(s,n);var f=a(s);function s(n){var i,a;return o(this,s),(a=f.call(this,n)).processCrazyGamesEvent(),a.disableUI(),a.stopAllSounds(),a.vibrateDevice(),a.makeDogesSmile(),a.pauseCountdown(),a.showCompletedMark(),a.updatePlayerProgress(),a.stopBeeBehavior(),a.logLevelCompleteAnalytics(),null===(i=a.game)||void 0===i||i.scheduleOnce(function(){a.sleepObjects(),a.showWiningScreen(),a.manager.finish()},.5),e2.playSound(e4.LEVEL_PASS),e2.playSound(e4.BEE_FLYING),a}return y(s,[{key:"processCrazyGamesEvent",value:function(){"gameplayStop"in GameSDK.extra&&GameSDK.extra.gameplayStop()}},{key:"load",value:function(){}},{key:"initialize",value:function(){}},{key:"ready",value:function(){}},{key:"draw",value:function(){}},{key:"attack",value:function(){}},{key:"escape",value:function(){}},{key:"death",value:function(){}},{key:"finish",value:function(){var n=this.manager.createFinishState();this.manager.change(n)}},{key:"update",value:function(){}},{key:"disableUI",value:function(){var n,i;null===(n=this.game)||void 0===n||n.uiManager.disableUI(),null===(i=this.game)||void 0===i||i.hint.reset()}},{key:"stopBeeBehavior",value:function(){var n;null===(n=this.game)||void 0===n||null===(n=n.gameObjects)||void 0===n||n.stopBeeBehavior()}},{key:"sleepObjects",value:function(){var n,i;null===(n=this.game)||void 0===n||null===(n=n.lineDrawer)||void 0===n||n.deActivePhysics(),null===(i=this.game)||void 0===i||null===(i=i.gameObjects)||void 0===i||i.sleepObjects()}},{key:"stopAllSounds",value:function(){e2.stopAllSounds()}},{key:"makeDogesSmile",value:function(){var n;if(null!==(n=this.game)&&void 0!==n&&n.gameObjects){var i,a=this.game.gameObjects.getComponentsInChildren(uR),o=m(a);try{for(o.s();!(i=o.n()).done;){var y=i.value;y.smile(),y.setEnable(!1)}}catch(n){o.e(n)}finally{o.f()}}}},{key:"vibrateDevice",value:function(){var n;null===(n=ek("Vibrate"))||void 0===n||null===(n=n.getComponent(rs))||void 0===n||n.vibrate(500)}},{key:"pauseCountdown",value:function(){var n;null===(n=this.game)||void 0===n||n.uiManager.pauseCountdown()}},{key:"showCompletedMark",value:function(){var n;null===(n=this.game)||void 0===n||n.uiManager.showCompletedMark()}},{key:"updatePlayerProgress",value:function(){if(this.game){var n=this.data.level;if(n){var i=c7.getGameData();if(i){var a=T({},i);n<i.level&&(a.level=n+1),c7.setGameData(a)}}}}},{key:"showWiningScreen",value:function(){if(this.game){var n=this.data.level,i=this.game.inkCapacityController.getStarRating();e9.openScreen(e8.WINNING_SCREEN,{level:n,stars:i})}}},{key:"logLevelCompleteAnalytics",value:function(){if(this.game){var n=this.game.inkCapacityController;if(n){var i=this.data.level,a=void 0===i?0:i,o=n.getStarRating();console.info("logLevelCompleteAnalytics",a,o),c9.levelComplete(a,o,rp)}}}}]),s}(c1);A._RF.pop(),A._RF.push({},"9046etpNclOb7EjoNvbF/aZ","MatchUtils",void 0);var he=GameCore,ht=he.Match,hn=he.Utils,hi=hn.Object,ha=hn.Valid,ho=hn.String,hr=globalThis.game,hs=hr.match,hl=hr.player,hu=hr.leaderboard,hc=function(){var i,a,f,m,g,b,k,C,w,E,T,_,A,R,P,B,L,D,O;function t(){o(this,t)}return y(t,[{key:"processStartSingleModeAsync",value:(O=n(function(){var n;return _ts_generator(this,function(i){switch(i.label){case 0:return n=hl.getPlayerId(),[4,hs.single.start.processAsync({playerId:n})];case 1:return i.sent(),[2]}})}),function(){return O.apply(this,arguments)})},{key:"processFinishSingleModeAsync",value:(D=n(function(){return _ts_generator(this,function(n){switch(n.label){case 0:return[4,hs.single.finish.processAsync()];case 1:return n.sent(),[2]}})}),function(){return D.apply(this,arguments)})},{key:"processStartTournamentModeAsync",value:(L=n(function(){var n,i;return _ts_generator(this,function(a){switch(a.label){case 0:return n=hl.getPlayerId(),i=GameSDK.context.getID(),[4,hs.tournament.continue.processAsync({playerId:n,contextId:i})];case 1:return a.sent(),[2]}})}),function(){return L.apply(this,arguments)})},{key:"processFinishTournamentModeAsync",value:(B=n(function(){var n,i;return _ts_generator(this,function(a){switch(a.label){case 0:return n=hl.getPlayerId(),i=hl.getBestScore(),[4,hs.tournament.finish.processAsync({playerId:n,bestScore:i})];case 1:return a.sent(),[2]}})}),function(){return B.apply(this,arguments)})},{key:"processStartChallengeModeAsync",value:(P=n(function(){var n;return _ts_generator(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,7]),[4,this.processContinueChallengeAsync()];case 1:return i.sent(),[3,7];case 2:if(n=i.sent(),!hi.hasOwn(n,"name")||ha.isString(n.name))throw n;if("PlayerHasFinishedMatch"!==n.name)return[3,4];return[4,this.processChallengeNewOpponentAsync()];case 3:i.sent(),i.label=4;case 4:if("PlayerNotJoinInMatch"!==n.name)return[3,6];return[4,this.processJoinChallengeAsync()];case 5:i.sent(),i.label=6;case 6:return[3,7];case 7:return[2]}})}),function(){return P.apply(this,arguments)})},{key:"processFinishChallengeModeAsync",value:(R=n(function(){return _ts_generator(this,function(n){switch(n.label){case 0:return[4,hs.challenge.finish.processAsync()];case 1:return n.sent(),[2]}})}),function(){return R.apply(this,arguments)})},{key:"processContinueChallengeAsync",value:(A=n(function(){var n,i,a,o,y,f;return _ts_generator(this,function(m){switch(m.label){case 0:if(i=(n=this.getMatchState()).id,o=(a=n.customData).playerId,y=a.opponentId,!ha.isString(i))throw new Error("Invalid match id");if(!ha.isString(o))throw new Error("Invalid player id");if(!ha.isString(y))throw new Error("Invalid opponent id");if(!(f=GameSDK.context.getID()))throw new Error("Cannot get contextId");return[4,hs.challenge.continue.processAsync({matchId:i,contextId:f,playerId:o,opponentId:y})];case 1:return m.sent(),[2]}})}),function(){return A.apply(this,arguments)})},{key:"processChallengeNewOpponentAsync",value:(_=n(function(){var n,i,a,o;return _ts_generator(this,function(y){switch(y.label){case 0:if(i=Math.floor(Math.random()*(n=hl.getConnectedPlayerIds(100,0)).length),a=hl.getPlayerId(),o=n[i],!ha.isString(o)||ha.isEmpty(o))throw new Error("Invalid opponent id");return[4,hs.challenge.friend.processAsync({playerId:a,opponentId:o})];case 1:return y.sent(),[2]}})}),function(){return _.apply(this,arguments)})},{key:"processJoinChallengeAsync",value:(T=n(function(){var n,i,a,o,y;return _ts_generator(this,function(f){switch(f.label){case 0:if(i=(n=this.getMatchState()).id,o=(a=n.customData).playerId,y=a.opponentId,!ha.isString(i))throw new Error("Invalid match id");if(!ha.isString(o))throw new Error("Invalid player id");if(!ha.isString(y))throw new Error("Invalid opponent id");return[4,hs.challenge.join.processAsync({matchId:i,playerId:o,opponentId:y})];case 1:return f.sent(),[2]}})}),function(){return T.apply(this,arguments)})},{key:"getMatchState",value:function(){var n=hs.getMatchState();if(!n)throw new Error("Match state not found");return n}},{key:"getMatchMode",value:function(){var n=this.getMatchState();return ha.isString(n.mode)?n.mode:null}},{key:"getTournamentsAsync",value:(E=n(function(){return _ts_generator(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,GameSDK.tournament.getTournamentsAsync()];case 1:return[2,n.sent()];case 2:return[2,(console.error(n.sent()),[])];case 3:return[2]}})}),function(){return E.apply(this,arguments)})},{key:"createTournamentPayload",value:function(){var n,i,a=ho.generateObjectId(),o=hl.getPlayerId(),y=this.getMatchState().profiles;return{score:null!==(n=null===(i=(void 0===y?{}:y)[o])||void 0===i?void 0:i.score)&&void 0!==n?n:0,playerId:o,mode:ht.Modes.TOURNAMENT,name:this.createTournamentName(),leaderboardId:a,payload:{playerId:o,leaderboardId:a}}}},{key:"createTournamentName",value:function(){var n=hl.getPlayer().name,i=void 0===n?null:n;if(i){var a=i.substring(0,7),o="".concat(a.split(" ")[0]||a,"'s Tournament"),y=ho.removeDiacritics(o);return"".concat(y)}return"Tournament"}}],[{key:"inst",get:function(){return this._instance||(this._instance=new t),this._instance}},{key:"startMatchAsync",value:(w=n(function(n){var i,a;return _ts_generator(this,function(o){switch(o.label){case 0:switch(o.trys.push([0,10,,11]),i=null!=n?n:this.inst.getMatchMode(),a=ht.Modes,i){case a.SINGLE:return[3,1];case a.TOURNAMENT:return[3,3];case a.CHALLENGE_FRIEND:return[3,5]}return[3,7];case 1:return[4,this.inst.processStartSingleModeAsync()];case 2:return o.sent(),[3,9];case 3:return[4,this.inst.processStartTournamentModeAsync()];case 4:return o.sent(),[3,9];case 5:return[4,this.inst.processStartChallengeModeAsync()];case 6:return o.sent(),[3,9];case 7:return[4,this.inst.processStartSingleModeAsync()];case 8:o.sent(),o.label=9;case 9:return[3,11];case 10:return console.warn("startMatchAsync",o.sent()),[3,11];case 11:return[2]}})}),function(n){return w.apply(this,arguments)})},{key:"setProfileMatchDataAsync",value:(C=n(function(n){return _ts_generator(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,hs.handler.setProfileData(n)];case 1:return i.sent(),[3,3];case 2:return console.warn("setProfileMatchDataAsync",i.sent()),[3,3];case 3:return[2]}})}),function(n){return C.apply(this,arguments)})},{key:"setMatchCustomDataAsync",value:(k=n(function(n){return _ts_generator(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,hs.handler.setMatchCustomData(n)];case 1:return i.sent(),[3,3];case 2:return console.warn("setMatchCustomDataAsync",i.sent()),[3,3];case 3:return[2]}})}),function(n){return k.apply(this,arguments)})},{key:"getMatchCustomDataAsync",value:(b=n(function(){return _ts_generator(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,hs.handler.getMatchCustomData()];case 1:return n.sent(),[3,3];case 2:return console.warn("getMatchCustomDataAsync",n.sent()),[3,3];case 3:return[2]}})}),function(){return b.apply(this,arguments)})},{key:"setLeaderboardScoreAsync",value:(g=n(function(n){return _ts_generator(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,hs.handler.setLeaderboardScore(n)];case 1:return i.sent(),[3,3];case 2:return console.warn("setLeaderboardScoreAsync",i.sent()),[3,3];case 3:return[2]}})}),function(n){return g.apply(this,arguments)})},{key:"finishMatchAsync",value:(m=n(function(){var n,i;return _ts_generator(this,function(a){switch(a.label){case 0:switch(a.trys.push([0,10,,11]),n=this.inst.getMatchMode(),i=GameCore.Match.Modes,n){case i.SINGLE:return[3,1];case i.TOURNAMENT:return[3,3];case i.CHALLENGE_FRIEND:return[3,5]}return[3,7];case 1:return[4,this.inst.processFinishSingleModeAsync()];case 2:return a.sent(),[3,9];case 3:return[4,this.inst.processFinishTournamentModeAsync()];case 4:return a.sent(),[3,9];case 5:return[4,this.inst.processFinishChallengeModeAsync()];case 6:return a.sent(),[3,9];case 7:return[4,this.inst.processFinishSingleModeAsync()];case 8:a.sent(),a.label=9;case 9:return[3,11];case 10:return console.warn("finishMatchAsync",a.sent()),[3,11];case 11:return[2]}})}),function(){return m.apply(this,arguments)})},{key:"createTournamentAsync",value:(f=n(function(){var n,i,a;return _ts_generator(this,function(o){switch(o.label){case 0:return n=!1,[4,this.inst.getTournamentsAsync()];case 1:if(o.sent().find(function(n){var i,a=JSON.parse(null!==(i=n.getPayload())&&void 0!==i?i:"{}");return"DEFAULT"===n.getTournamentType()&&a.playerId===hl.getPlayerId()}))return[2,!1];i=this.inst.createTournamentPayload(),o.label=2;case 2:return o.trys.push([2,4,,5]),[4,hs.tournament.create.processAsync(i)];case 3:return o.sent(),a=i.leaderboardId,hu.addLeaderboard({name:a,type:"tournament",autoSortRank:!0,leaderboardId:a}),n=!0,[3,5];case 4:return console.warn("processCreateTournament",o.sent()),[3,5];case 5:return[2,n]}})}),function(){return f.apply(this,arguments)})},{key:"joinTournamentAsync",value:(a=n(function(n){var i;return _ts_generator(this,function(a){switch(a.label){case 0:return i=hl.getPlayerId(),[4,hs.tournament.join.processAsync({tournamentId:n,playerId:i})];case 1:return a.sent(),[2]}})}),function(n){return a.apply(this,arguments)})},{key:"continueTournamentAsync",value:(i=n(function(n){var i;return _ts_generator(this,function(a){switch(a.label){case 0:return i=hl.getPlayerId(),[4,hs.tournament.continue.processAsync({playerId:i,contextId:n})];case 1:return a.sent(),[2]}})}),function(n){return i.apply(this,arguments)})}]),t}();A._RF.pop(),A._RF.push({},"a9bc11SkV9L/5L+Y+fhswfJ","FinishState",void 0);var hh=globalThis.game.player,hp=function(f){i(l,f);var m,g=a(l);function l(n){var i;return o(this,l),i=g.call(this,n),e2.turnUpMusic(),e2.stopSound(e4.BEE_FLYING),i.finishGameAsync(),i}return y(l,[{key:"load",value:function(){var n=this.manager.createLoadingState();this.manager.change(n)}},{key:"initialize",value:function(){var n=this.manager.createInitializeState();this.manager.change(n)}},{key:"ready",value:function(){}},{key:"draw",value:function(){}},{key:"attack",value:function(){}},{key:"escape",value:function(){}},{key:"death",value:function(){}},{key:"finish",value:function(){}},{key:"update",value:function(){}},{key:"finishGameAsync",value:(m=n(function(){var n,i,a,o;return _ts_generator(this,function(y){switch(y.label){case 0:if(y.trys.push([0,2,,3]),!this.game)return[2];if(!(n=this.game.inkCapacityController))return[2];return a=1e3*(void 0===(i=this.data.level)?0:i)+100*n.getStarRating(),o=hh.getBestScore(),"submitGameResultsAsync"in GameSDK.extra&&GameSDK.extra.submitGameResultsAsync(o),o<a&&hh.setBestScore(a),[4,hc.finishMatchAsync()];case 1:return y.sent(),[3,3];case 2:return console.error("finishGameAsync",y.sent()),[3,3];case 3:return[2]}})}),function(){return m.apply(this,arguments)})}]),l}(c1);A._RF.pop(),A._RF.push({},"81384LH7iZM+pyqeb36L9t3","SwitchGameUtils",void 0);var hd=globalThis.game,hy=hd.player,hv=hd.analytics,hf=GameCore.Plugins.Analytics.Events,hm=function(){function e(){o(this,e),this.targetLevel=null}return y(e,null,[{key:"inst",get:function(){return this._instance||(this._instance=new e),this._instance}},{key:"init",value:function(){var n=this,i=this.inst;this.isNewPlayerFirstDay()?i.targetLevel=8:setTimeout(function(){n.assignTargetLevelForReturningUser()},12e4)}},{key:"handleSwitchGame",value:function(){var n,i;"MsGames"===GameSDK.getSDKName()&&"switchGameAsync"in GameSDK.extra&&(this.isSwitchGameCalledToday()||null!==this.inst.targetLevel&&(null!==(n=null===(i=hy.getGameData())||void 0===i?void 0:i.level)&&void 0!==n?n:1)>=this.inst.targetLevel&&this.handleSwitchGameAsync())}},{key:"handleSwitchGameAsync",value:function(){"MsGames"===GameSDK.getSDKName()&&"switchGameAsync"in GameSDK.extra&&(hy.setPlayerDataByName("lastCallSwitchGame",Date.now()),hv.event(hf.SWITCH_GAME_POPUP),GameSDK.extra.switchGameAsync("9pk2rsf72wcd").catch(function(n){hv.event("switch_game_popup_cancel")}))}},{key:"isSwitchGameCalledToday",value:function(){var n,i=null!==(n=hy.getPlayerDataByKey("lastCallSwitchGame"))&&void 0!==n?n:0;return this.isSameDay(i)}},{key:"isNewPlayerFirstDay",value:function(){var n,i,a=hy.getGameData(),o=null!==(i=null==a?void 0:a.firstLoginTime)&&void 0!==i?i:0;if(0===o){if(1===(null!==(n=null==a?void 0:a.level)&&void 0!==n?n:1))return hy.setGameData({firstLoginTime:Date.now()}),!0;var y=Date.now()-864e5;return hy.setGameData({firstLoginTime:y}),!1}return this.isSameDay(o)}},{key:"isSameDay",value:function(n){var i=new Date,a=new Date(n),o=i.getDate()===a.getDate(),y=i.getMonth()===a.getMonth(),f=i.getFullYear()===a.getFullYear();return o&&y&&f}},{key:"assignTargetLevelForReturningUser",value:function(){var n,i=hy.getGameData(),a=null!==(n=null==i?void 0:i.level)&&void 0!==n?n:1;this.inst.targetLevel=a+1}}]),e}();A._RF.pop(),A._RF.push({},"37a5cRy3ANBGpVlH3wyS3Ra","InitializeState",void 0);var hg=globalThis.game.analytics,hb=function(f){i(u,f);var m,g,b=a(u);function u(n){var i;return o(this,u),i=b.call(this,n),"CrazyGames"===GameSDK.getSDKName()&&i.processCrazyGamesRequirements(),i.enableUI(),i.disableHintButtonForEarlyLevels(),i.clearHint(),i.clearGameObjects(),i.createGameObjects(),i.initInkCapacity(),i.initCountdown(),i.updateHeader(),i.showTutorialUI(),e2.playMusic(),hm.handleSwitchGame(),i.startGameAsync().then(function(){i.closeLoadingScreen(),i.manager.ready(),i.logLevelStartAnalytics()}),i}return y(u,[{key:"processCrazyGamesRequirements",value:function(){"gameplayStart"in GameSDK.extra&&GameSDK.extra.gameplayStart(),this.showInterAdsCrazyGames()}},{key:"disableHintButtonForEarlyLevels",value:function(){if(this.game){var n=this.data.level;n&&n<=3&&this.game.uiManager.disableHintButton()}}},{key:"showInterAdsCrazyGames",value:(g=n(function(){return _ts_generator(this,function(n){switch(n.label){case 0:if(!this.game)return[3,2];return e2.stopAllSounds(),[4,te.showInterstitialAdAsync({forLevel:this.data.level,includeSDK:["CrazyGames"]})];case 1:n.sent()&&this.game.disableRewardAdsItemForCrazyGames(),e2.turnUpMusic(),n.label=2;case 2:return[2]}})}),function(){return g.apply(this,arguments)})},{key:"load",value:function(){if(GameCore.Utils.Valid.isDebugger()){var n=this.manager.createLoadingState();this.manager.change(n)}}},{key:"initialize",value:function(){}},{key:"ready",value:function(){var n=this.manager.createReadyState();this.manager.change(n)}},{key:"draw",value:function(){}},{key:"attack",value:function(){}},{key:"escape",value:function(){var n=this.manager.createEscapeState();this.manager.change(n)}},{key:"death",value:function(){var n=this.manager.createDeathState();this.manager.change(n)}},{key:"finish",value:function(){}},{key:"update",value:function(){}},{key:"closeLoadingScreen",value:function(){e9.closeScreen(e8.LOADING_SCREEN)}},{key:"enableUI",value:function(){var n;null===(n=this.game)||void 0===n||n.uiManager.enableUI()}},{key:"clearHint",value:function(){var n;null===(n=this.game)||void 0===n||null===(n=n.hint)||void 0===n||n.reset()}},{key:"clearGameObjects",value:function(){var n,i;null!==(n=this.game)&&void 0!==n&&n.lineDrawer&&null!==(i=this.game)&&void 0!==i&&i.gameObjects&&(this.game.lineDrawer.clearLines(),this.game.gameObjects.clearObjects())}},{key:"createGameObjects",value:function(){var n,i=this.data.levelData;i&&(null===(n=this.game)||void 0===n||null===(n=n.gameObjects)||void 0===n||n.spawnObjects(i))}},{key:"initInkCapacity",value:function(){if(this.game){var n=this.data.levelData;if(n){var i=this.game.inkCapacityController,a=n.lnk;i.init(void 0===a?[]:a)}}}},{key:"initCountdown",value:function(){var n;null===(n=this.game)||void 0===n||n.uiManager.initCountdown()}},{key:"updateHeader",value:function(){var n;if(null!==(n=this.game)&&void 0!==n&&n.hint){var i=this.game.inkCapacityController.getStarRating();this.game.uiManager.setProgressStars(i);var a=this.game.inkCapacityController.getInkLevelPercentage();this.game.uiManager.setProgressBarPercentage(a),this.game.hint.getIsHintShow()||this.game.uiManager.startCountDownHeaderHintBubbleAnim()}}},{key:"showTutorialUI",value:function(){var n,i;if(this.game){var a=this.data,o=a.level,y=a.levelData;if(o&&y&&!(o>3)&&null!==(n=this.game)&&void 0!==n&&n.hint&&null!==(i=this.game)&&void 0!==i&&i.uiManager){var f=y.tips,m=ck.transformPointsFromMapToDrawAreaCoordinate(f);this.game.hint.showHint(m,!0),this.game.uiManager.stopCountDownHeaderHintBubbleAnim()}}}},{key:"startGameAsync",value:(m=n(function(){return _ts_generator(this,function(n){switch(n.label){case 0:if(n.trys.push([0,2,,3]),this.data.isFromLoader)return[2,void this.updateGameData({isFromLoader:!1})];return[4,hc.startMatchAsync()];case 1:return n.sent(),[3,3];case 2:return console.error("startGameAsync",n.sent()),[3,3];case 3:return[2]}})}),function(){return m.apply(this,arguments)})},{key:"logLevelStartAnalytics",value:function(){if(this.game){var n=this.data.level,i=this.game.inkCapacityController.getStarRating();hg.levelStart(void 0===n?0:n,i)}}}]),u}(c1);A._RF.pop(),A._RF.push({},"f98e6wIKqZGv7aAVsWH1sS+","MapUtils",void 0);var hS=function(){function e(){o(this,e)}return y(e,null,[{key:"inst",get:function(){return this._instance||(this._instance=new e),this._instance}},{key:"isMapFlippedHorizontally",value:function(n){var i=n-325;if(i<=0)return!1;return Math.floor(i/rl.length)%2==0}},{key:"getTransformedMapPoints",value:function(n){return n.map(function(n){var i=n.data,a=n.connect;if(i&&void 0!==i.a&&(i.a*=-1),a){var o=a.point,y=a.data;y&&void 0!==y.a&&(y.a*=-1),Array.isArray(o)?a.point=ck.getTransformedPolygon(o):a.point=ck.getTransformedPoint(o)}if(Array.isArray(n.point)){var f=n.id===rw.WOOD||n.id===rw.COLLIDER?ck.getTransformedDoublePolygon(n.point):ck.getTransformedPolygon(n.point);return T(T({},n),{},{point:f})}var m=n.point;return T(T({},n),{},{point:ck.getTransformedPoint(m)})})}},{key:"getTransformedTips",value:function(n){return n.map(function(n){return ck.getTransformedPoint(n)})}},{key:"revertTransformedMapPoints",value:function(n){return n.map(function(n){if(n.connect){var i=n.connect.point;Array.isArray(i)?n.connect.point=ck.revertTransformedPolygon(i):n.connect.point=ck.revertTransformedPoint(i)}if(Array.isArray(n.point)){var a=n.id===rw.WOOD||n.id===rw.COLLIDER?ck.revertTransformedDoublePolygon(n.point):ck.revertTransformedPolygon(n.point);return T(T({},n),{},{point:a})}var o=n.point;return T(T({},n),{},{point:ck.revertTransformedPoint(o)})})}},{key:"revertTransformedTips",value:function(n){return n.map(function(n){return ck.revertTransformedPoint(n)})}},{key:"flipMapDataHorizontally",value:function(n){var i=n.map,a=n.tips,o=n.lnk,y=1/0,f=-1/0,m=[],g=e.getTransformedMapPoints(i),b=e.getTransformedTips(a);return g.forEach(function(n){Array.isArray(n.point)?n.point.forEach(function(n){m.push(n)}):m.push(n.point)}),b.forEach(function(n){m.push(n)}),m.forEach(function(n){n.x<y&&(y=n.x),n.x>f&&(f=n.x)}),g.forEach(function(n){Array.isArray(n.point)?n.point.forEach(function(n){n.x=n.x-2*(n.x-375)}):n.point.x=n.point.x-2*(n.point.x-375),n.connect&&(Array.isArray(n.connect.point)?n.connect.point.forEach(function(n){n.x=n.x-2*(n.x-375)}):n.connect.point.x=n.connect.point.x-2*(n.connect.point.x-375))}),b.forEach(function(n){n.x=n.x-2*(n.x-375)}),o.forEach(function(n){n.x=n.x-2*(n.x-375)}),{map:e.revertTransformedMapPoints(g),tips:e.revertTransformedTips(b),lnk:o}}}]),e}();A._RF.pop(),A._RF.push({},"a8496IbdA1EnY7sv4ApuaJW","LoadingState",void 0);var hk=function(n){i(r,n);var f=a(r);function r(n){var i;return o(this,r),(i=f.call(this,n)).handleMapLoaded=function(n,a){if(!n&&a){var o,y,f=i.data.level,m=a.json;if(hS.isMapFlippedHorizontally(null!=f?f:1)){var g=hS.flipMapDataHorizontally(m);i.updateGameData({levelData:g})}else i.updateGameData({levelData:m});if(f)null===(o=i.game)||void 0===o||null===(o=o.gameMap)||void 0===o||o.preloadLevel(f+1);if(i.loadingScreenFlag)null===(y=i.game)||void 0===y||y.scheduleOnce(function(){i.initialize()},.5);else i.initialize()}else console.error("Failed to load level",n)},i.loadingScreenFlag=!i.isLevelAlreadyLoaded(),i.loadingScreenFlag&&e9.showLoadingScreen(),i.stopHint(),i.loadGameMap(),i.updateLevelText(),i}return y(r,[{key:"load",value:function(){}},{key:"initialize",value:function(){var n=this.manager.createInitializeState();this.manager.change(n)}},{key:"ready",value:function(){}},{key:"draw",value:function(){}},{key:"attack",value:function(){}},{key:"escape",value:function(){}},{key:"death",value:function(){}},{key:"finish",value:function(){}},{key:"update",value:function(){}},{key:"isLevelAlreadyLoaded",value:function(){var n,i,a=this.data.level;if(!a)throw new Error("Level is not defined");return null!==(n=null===(i=this.game)||void 0===i||null===(i=i.gameMap)||void 0===i?void 0:i.isLevelAlreadyLoaded(a))&&void 0!==n&&n}},{key:"stopHint",value:function(){var n;null===(n=this.game)||void 0===n||null===(n=n.hint)||void 0===n||n.hideHint()}},{key:"loadGameMap",value:function(){var n,i=this.data.level;if(!i)throw new Error("Level is not defined");null===(n=this.game)||void 0===n||null===(n=n.gameMap)||void 0===n||n.loadLevel(i,this.handleMapLoaded)}},{key:"updateLevelText",value:function(){var n,i=this.data.level;i&&(null===(n=this.game)||void 0===n||n.uiManager.setLevelText(i))}}]),r}(c1);A._RF.pop(),A._RF.push({},"5ef69tJ5eNNv7o22H/XfSD2","ReadyState",void 0);var hC,hw=function(n){i(r,n);var f=a(r);function r(){return o(this,r),f.apply(this,arguments)}return y(r,[{key:"load",value:function(){if(GameCore.Utils.Valid.isDebugger()){var n=this.manager.createLoadingState();this.manager.change(n)}}},{key:"initialize",value:function(){}},{key:"ready",value:function(){}},{key:"draw",value:function(){var n=this.manager.createDrawingState();this.manager.change(n)}},{key:"attack",value:function(){}},{key:"escape",value:function(){var n=this.manager.createEscapeState();this.manager.change(n)}},{key:"death",value:function(){if(GameCore.Utils.Valid.isDebugger()){var n=this.manager.createDeathState();this.manager.change(n)}}},{key:"finish",value:function(){}},{key:"update",value:function(){}}]),r}(c1);A._RF.pop(),A._RF.push({},"bb0e3beWSxOOLCv7gjyg2s0","StateManager",void 0);var hE,hT,h_,hA,hR,hP,hB,hL,hD,hO,hI,hN,hF,hG,hM,hz=(0,P.ccclass)("StateManager")(hC=function(n){i(r,n);var f=a(r);function r(){return o(this,r),f.apply(this,arguments)}return y(r,[{key:"init",value:function(){this.state=new hk(this)}},{key:"change",value:function(n){this.state=n}},{key:"load",value:function(){this.state&&this.state.load()}},{key:"initialize",value:function(){this.state&&this.state.initialize()}},{key:"isInitialize",value:function(){return _instanceof(this.state,hb)}},{key:"ready",value:function(){this.state&&this.state.ready()}},{key:"isReady",value:function(){return _instanceof(this.state,hw)}},{key:"draw",value:function(){this.state&&this.state.draw()}},{key:"isDrawing",value:function(){return _instanceof(this.state,c5)}},{key:"attack",value:function(){this.state&&this.state.attack()}},{key:"isAttacking",value:function(){return _instanceof(this.state,c2)}},{key:"escape",value:function(){this.state&&this.state.escape()}},{key:"isSurviving",value:function(){return _instanceof(this.state,c8)}},{key:"death",value:function(){this.state&&this.state.death()}},{key:"isFailed",value:function(){return _instanceof(this.state,c4)}},{key:"finish",value:function(){this.state&&this.state.finish()}},{key:"isFinished",value:function(){return _instanceof(this.state,hp)}},{key:"update",value:function(n){this.state&&this.state.update(n)}},{key:"createInitializeState",value:function(){return new hb(this)}},{key:"createLoadingState",value:function(){return new hk(this)}},{key:"createReadyState",value:function(){return new hw(this)}},{key:"createDrawingState",value:function(){return new c5(this)}},{key:"createAttackingState",value:function(){return new c2(this)}},{key:"createEscapeState",value:function(){return new c8(this)}},{key:"createDeathState",value:function(){return new c4(this)}},{key:"createFinishState",value:function(){return new hp(this)}}]),r}(O))||hC;A._RF.pop(),A._RF.push({},"9e40aEq56tMKLFoeACyl+eH","Clock",void 0);var hx,hU,hH,hj,hV,hW,hq,hK,hY=P.ccclass,hJ=P.disallowMultiple,hZ=P.property,hX=(hE=hY("Clock"),hT=hZ(K),h_=hZ(j),hA=hZ(F),hR=hZ(j),hP=hZ(j),hB=hZ(B),hE(hL=hJ((hO=g((hD=function(n){i(r,n);var f=a(r);function r(){var n;o(this,r);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=f.call.apply(f,[this].concat(a)),b(n,"timeText",hO,k(n)),b(n,"clockContainer",hI,k(n)),b(n,"clockFill",hN,k(n)),b(n,"successIcon",hF,k(n)),b(n,"failIcon",hG,k(n)),b(n,"animation",hM,k(n)),n.time=0,n.remaining=0,n.running=!1,n.timeShake=0,n.remainingToShake=0,n.handleUpdateConfig=function(i){n.enabled&&n.setTime(i.WaitForPassSecs)},n}return y(r,[{key:"__preload",value:function(){this.listenEvents()}},{key:"start",value:function(){this.init(),this.setTime(6),this.setTimeToShake(1)}},{key:"init",value:function(){this.remaining=0,this.running=!1,this.node.active=!1}},{key:"listenEvents",value:function(){this.node.scene.on(eX.GAMEPLAY_UPDATE_CONFIG,this.handleUpdateConfig)}},{key:"setTime",value:function(n){this.time=n,this.timeText.string=Math.ceil(n).toString()}},{key:"setTimeToShake",value:function(n){this.timeShake=n,this.remainingToShake=0}},{key:"startCountdown",value:function(){this.running=!0,this.remaining=this.time,this.remainingToShake=this.timeShake,this.node.active=!0,this.failIcon.active=!1,this.successIcon.active=!1}},{key:"pause",value:function(){this.running=!1}},{key:"resume",value:function(){this.running=!0}},{key:"showUncompletedMark",value:function(){this.failIcon.active=!0,eS(this.failIcon).set({scale:new U(0,0,1)}).to(.5,{scale:new U(1,1,1)},{easing:"smooth"}).start()}},{key:"showCompletedMark",value:function(){this.successIcon.active=!0,eS(this.successIcon).set({scale:new U(0,0,1)}).to(.5,{scale:new U(1,1,1)},{easing:"smooth"}).start()}},{key:"endCountDown",value:function(){this.running=!1,this.node.scene.emit(r8.TIME_OUT)}},{key:"update",value:function(n){this.running&&(this.remaining<=0?this.endCountDown():(this.remainingToShake<=0&&(this.playShakeAnimation(),this.remainingToShake=this.timeShake),this.remaining-=n,this.remainingToShake-=n,this.updateLabel(),this.clockFill.fillRange=this.remaining/this.time))}},{key:"updateLabel",value:function(){var n=Math.ceil(this.remaining).toString();this.timeText.string=n}},{key:"playShakeAnimation",value:function(){var n="Shake";this.animation.clips.some(function(i){return!(!i||i.name!==n)})?this.animation.play(n):console.warn("SettingsScreen: clip not found")}}]),r}(O)).prototype,"timeText",[hT],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),hI=g(hD.prototype,"clockContainer",[h_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),hN=g(hD.prototype,"clockFill",[hA],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),hF=g(hD.prototype,"successIcon",[hR],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),hG=g(hD.prototype,"failIcon",[hP],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),hM=g(hD.prototype,"animation",[hB],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),hL=hD))||hL)||hL);A._RF.pop(),A._RF.push({},"7c115t9HKlH6ZfnhCnLAnpe","Star",void 0);var hQ,h$,h0,h1,h2,h3,h4,h5,h6,h7,h9=P.ccclass,h8=P.property,pe=P.requireComponent,pt=(hx=h9("Star"),hU=pe(B),hH=h8(O),hj=h8(B),hx(hV=hU((hq=g((hW=function(n){i(r,n);var f=a(r);function r(){var n;o(this,r);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=f.call.apply(f,[this].concat(a)),b(n,"starAppearance",hq,k(n)),b(n,"animation",hK,k(n)),n.isAppear=!1,n.initialPosition=new U,n}return y(r,[{key:"onLoad",value:function(){this.initialPosition=this.node.position.clone(),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){t_.lazyValidateProperties(this)}},{key:"resetPosition",value:function(){this.node.setPosition(this.initialPosition)}},{key:"show",value:function(){this.starAppearance.node.active=!0,this.isAppear=!0}},{key:"hide",value:function(){this.starAppearance.node.active=!1,this.isAppear=!1}},{key:"playAnimation",value:function(){this.animation.stop(),this.animation.clips.some(function(n){return!(!n||"UpAndDown"!==n.name)})?this.animation.play("UpAndDown"):console.warn("SettingsScreen: clip not found")}},{key:"stopAnimation",value:function(){this.animation.stop()}}]),r}(O)).prototype,"starAppearance",[hH],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),hK=g(hW.prototype,"animation",[hj],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),hV=hW))||hV)||hV);A._RF.pop(),A._RF.push({},"09f0bRvi+1OQZiIGBFqdNzq","LevelProgressBar",void 0);var pn,pi,pa,po,pr,ps,pl,pu,pc,ph,pp,pd,py,pv,pf,pm,pg=P.ccclass,pb=P.property,pS=(hQ=pg("LevelProgressBar"),h$=pb(e_),h0=pb(pt),h1=pb(pt),h2=pb(pt),hQ((h4=g((h3=function(n){i(r,n);var f=a(r);function r(){var n;o(this,r);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=f.call.apply(f,[this].concat(a)),b(n,"progressBar",h4,k(n)),b(n,"leftStar",h5,k(n)),b(n,"midStar",h6,k(n)),b(n,"rightStar",h7,k(n)),n.toProgress=1,n.progressStep=0,n}return y(r,[{key:"onLoad",value:function(){this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){t_.lazyValidateProperties(this)}},{key:"start",value:function(){this.toProgress=1,this.progressStep=0,this.runStartsAnimation()}},{key:"update",value:function(){var n=this.progressBar.getComponent(F);n&&(this.progressBar.progress>=1?n.type=F.Type.SIMPLE:n.type=F.Type.TILED),this.progressBar.progress-this.progressStep<this.toProgress?this.progressBar.progress!==this.toProgress&&(this.progressBar.progress=this.toProgress):this.progressBar.progress-=this.progressStep}},{key:"runStartsAnimation",value:function(){this.leftStar.isAppear&&this.midStar.isAppear&&this.rightStar.isAppear||(this.leftStar.show(),this.midStar.show(),this.rightStar.show(),this.runStarAnimation(this.leftStar),this.runStarAnimation(this.midStar),this.runStarAnimation(this.rightStar))}},{key:"runStarAnimation",value:function(n){n.resetPosition(),n.playAnimation()}},{key:"stopStarAnimation",value:function(n){n.isAppear&&(n.hide(),n.stopAnimation(),n.resetPosition(),e2.playSound(e4.LOST_STAR_IN_GAMEPLAY))}},{key:"setProgress",value:function(n){this.toProgress=n/100,this.progressStep=(this.progressBar.progress-this.toProgress)/60*16}},{key:"setStars",value:function(n){switch(n){case 1:this.stopStarAnimation(this.rightStar),this.stopStarAnimation(this.midStar);break;case 2:this.stopStarAnimation(this.rightStar);break;default:this.runStartsAnimation()}}},{key:"reset",value:function(){this.progressBar.progress=1}}]),r}(O)).prototype,"progressBar",[h$],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h5=g(h3.prototype,"leftStar",[h0],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h6=g(h3.prototype,"midStar",[h1],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h7=g(h3.prototype,"rightStar",[h2],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h3))||h3);A._RF.pop(),A._RF.push({},"61791zAr2tJR4p22EZ5QRfk","Header",void 0);var pk,pC,pw,pE,pT,p_,pA,pR,pP,pB,pL,pD,pO,pI,pN,pF,pG,pM,pz,px,pU,pH,pj,pV,pW,pq,pK,pY,pJ,pZ,pX,pQ,p$,p0,p1,p2,p3,p4,p5,p6,p7,p9,p8,de,dn,di,da,dr,ds,dl,du,dc,dh=P.ccclass,dp=P.property,dd=globalThis.game,dy=dd.language,dv=dd.player,df=(pn=dh("Header"),pi=dp(K),pa=dp(pS),po=dp(tP),pr=dp(j),ps=dp(j),pl=dp(j),pu=dp(j),pn((ph=g((pc=function(f){i(c,f);var m,g=a(c);function c(){var n;o(this,c);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=g.call.apply(g,[this].concat(a)),b(n,"levelText",ph,k(n)),b(n,"levelProgressBar",pp,k(n)),b(n,"hintBubbleAnim",pd,k(n)),b(n,"pauseNode",py,k(n)),b(n,"replayNode",pv,k(n)),b(n,"hintNode",pf,k(n)),b(n,"skipNode",pm,k(n)),n.handlePlayBubble=function(){n.hintBubbleAnim.play(),n.startCountDownHintBubble()},n}return y(c,[{key:"onLoad",value:function(){this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){t_.lazyValidateProperties(this)}},{key:"handleClickedPauseGame",value:function(){this.showSettingScreen(),this.node.scene.emit(r8.GAME_PAUSE)}},{key:"handleClickedReplayGame",value:function(){var n,i=(null!==(n=dv.getGameData())&&void 0!==n?n:{}).level;this.node.scene.emit(r8.GAME_REPLAY,{level:void 0===i?1:i})}},{key:"handleClickedHintGame",value:function(){this.node.scene.emit(r8.SHOW_HINT)}},{key:"handleClickedSkipLevel",value:(m=n(function(){return _ts_generator(this,function(n){return this.node.scene.emit(r8.SKIP_LEVEL),[2]})}),function(){return m.apply(this,arguments)})},{key:"showSettingScreen",value:function(){e9.openScreen(e8.SETTINGS_SCREEN,{})}},{key:"setLevelText",value:function(n){var i=dy.getText("level");this.levelText.string="".concat(i," ").concat(n)}},{key:"setProgress",value:function(n){this.levelProgressBar.setProgress(n)}},{key:"setProgressStars",value:function(n){this.levelProgressBar.setStars(n)}},{key:"startCountDownHintBubble",value:function(){this.schedule(this.handlePlayBubble,30)}},{key:"stopCountDownHintBubble",value:function(){this.unschedule(this.handlePlayBubble)}},{key:"disableButtons",value:function(){this.enableBtnNode(this.pauseNode,!1,!0),this.enableBtnNode(this.replayNode,!1,!0),this.enableBtnNode(this.hintNode,!1,!0),this.enableBtnNode(this.skipNode,!1,!0)}},{key:"enableButtons",value:function(){this.enableBtnNode(this.pauseNode,!0,!0),this.enableBtnNode(this.replayNode,!0,!0),this.enableBtnNode(this.hintNode,!0,!0),this.enableBtnNode(this.skipNode,!0,!0)}},{key:"disableRewardAdsButton",value:function(){this.enableBtnNode(this.hintNode,!1,!1),this.enableBtnNode(this.skipNode,!1,!1)}},{key:"disableHintButton",value:function(){this.enableBtnNode(this.hintNode,!1,!0)}},{key:"enableBtnNode",value:function(n,i,a){var o=n.getComponent(M);if(o&&(o.interactable=i),n.active=a,a){var y=n.getComponent(nI);y&&y.changeState(i)}}}]),c}(O)).prototype,"levelText",[pi],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pp=g(pc.prototype,"levelProgressBar",[pa],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pd=g(pc.prototype,"hintBubbleAnim",[po],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),py=g(pc.prototype,"pauseNode",[pr],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pv=g(pc.prototype,"replayNode",[ps],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pf=g(pc.prototype,"hintNode",[pl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pm=g(pc.prototype,"skipNode",[pu],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pc))||pc);A._RF.pop(),A._RF.push({},"151afQBVDpOYpTjtwP+wYH+","DevTools",void 0);var dm,dg,db,dS,dk,dC,dw,dE,dT=P.ccclass,d_=P.property,dA=(pk=dT("DevToolsContainer"),pC=d_(j),pw=d_(j),pE=d_(j),pT=d_(j),p_=d_(j),pA=d_(j),pR=d_(j),pP=d_(j),pB=d_(j),pL=d_(j),pD=d_(j),pO=d_(j),pI=d_(j),pN=d_(j),pF=d_(j),pG=d_(j),pM=d_(j),pz=d_(j),px=d_(j),pU=d_(j),pH=d_(j),pj=d_(j),pV=d_(j),pW=d_(j),pq=d_(j),pk((pY=g((pK=function(n){i(r,n);var f=a(r);function r(){var n;o(this,r);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=f.call.apply(f,[this].concat(a)),b(n,"devToolsButton",pY,k(n)),b(n,"winLevelButton",pJ,k(n)),b(n,"loseLevelButton",pZ,k(n)),b(n,"buildVersionButton",pX,k(n)),b(n,"prevLevelButton",pQ,k(n)),b(n,"nextLevelButton",p$,k(n)),b(n,"selectLevelButton",p0,k(n)),b(n,"hintButton",p1,k(n)),b(n,"physicButton",p2,k(n)),b(n,"bundleButton",p3,k(n)),b(n,"beehiveButton",p4,k(n)),b(n,"dogeButton",p5,k(n)),b(n,"thornBallButton",p6,k(n)),b(n,"bigBeeButton",p7,k(n)),b(n,"thornButton",p9,k(n)),b(n,"airFanButton",p8,k(n)),b(n,"brickButton",de,k(n)),b(n,"grassButton",dn,k(n)),b(n,"grassDarkButton",di,k(n)),b(n,"lineButton",da,k(n)),b(n,"poisonButton",dr,k(n)),b(n,"poisonSurfaceButton",ds,k(n)),b(n,"waterButton",dl,k(n)),b(n,"dangerAreaButton",du,k(n)),b(n,"dashboardButton",dc,k(n)),n.isActive=!0,n.gameplay=null,n.gameObjects=null,n.currentSpawnObjId=-1,n.handleClickDashboardButton=function(){tt.switchToDashboardScene()},n.handleClickDevToolsButton=function(){n.isActive?(n.hideAllButtons(),n.isActive=!1):(n.showAllButtons(),n.isActive=!0)},n.handleClickPrevLevelButton=function(){var i=n.getCurrentLevel();i&&n.node.scene.emit(r8.SELECT_LEVEL,{level:i-1})},n.handleClickNextLevelButton=function(){var i=n.getCurrentLevel();i&&n.node.scene.emit(r8.SELECT_LEVEL,{level:i+1})},n.handleClickHintButton=function(){n.node.scene.emit(r8.SHOW_HINT,{noAd:!0})},n.handleClickBuildVersionButton=function(){var n=globalThis.game.getBuildVersion();e9.showNotificationScreen("Build version: ".concat(n))},n.handleClickPhysicButton=function(){var n=eA.Aabb,i=eA.Pair,a=eA.CenterOfMass,o=eA.Joint,y=eA.Shape;eC.instance.debugDrawFlags=n|i|a|o|y},n.handleClickWinLevelButton=function(){n.node.scene.emit(r8.DOGE_SURVIVE)},n.handleClickLoseLevelButton=function(){n.node.scene.emit(r8.DOGE_DIE)},n.handleClickBeehiveButton=function(){n.currentSpawnObjId=rw.BEEHIVE_A,n.handleSpawnObject()},n.handleClickDogeButton=function(){n.currentSpawnObjId=rw.DOGE_A,n.handleSpawnObject()},n.handleClickThornBallButton=function(){n.currentSpawnObjId=rw.THORN_BALL,n.handleSpawnObject()},n.handleClickBigBeeButton=function(){n.currentSpawnObjId=rw.BIG_BEE,n.handleSpawnObject()},n.handleClickThornButton=function(){n.currentSpawnObjId=rw.THORN,n.handleSpawnObject()},n.handleClickAirFanButton=function(){n.currentSpawnObjId=rw.AIR_FAN,n.handleSpawnObject()},n.handleClickBrickButton=function(){n.currentSpawnObjId=rw.BRICK,n.handleSpawnPolygonObject()},n.handleClickGrassButton=function(){n.currentSpawnObjId=rw.GRASS,n.handleSpawnPolygonObject()},n.handleClickGrassDarkButton=function(){n.currentSpawnObjId=rw.GRASS_DARK,n.handleSpawnPolygonObject()},n.handleClickLineButton=function(){n.currentSpawnObjId=rw.LINE,n.handleSpawnPolygonObject()},n.handleClickPoisonButton=function(){n.currentSpawnObjId=rw.POISON,n.handleSpawnPolygonObject()},n.handleClickPoisonSurfaceButton=function(){n.currentSpawnObjId=rw.POISON_SURFACE,n.handleSpawnPolygonObject()},n.handleClickWaterButton=function(){n.currentSpawnObjId=rw.WATER,n.handleSpawnPolygonObject()},n.handleClickDangerAreaButton=function(){n.currentSpawnObjId=rw.DANGER_AREA,n.handleSpawnPolygonObject()},n}return y(r,[{key:"start",value:function(){this.handleToggleDevToolsButton(),this.handleGameLevelButtons(),this.handleItemButtons(),this.handleEngineButtons(),this.handleSpawnObjectButtons(),this.handleSwitchSceneButtons()}},{key:"handleToggleDevToolsButton",value:function(){this.devToolsButton.on(j.EventType.TOUCH_START,this.handleClickDevToolsButton)}},{key:"handleGameLevelButtons",value:function(){this.winLevelButton.on(j.EventType.TOUCH_START,this.handleClickWinLevelButton),this.loseLevelButton.on(j.EventType.TOUCH_START,this.handleClickLoseLevelButton),this.prevLevelButton.on(j.EventType.TOUCH_START,this.handleClickPrevLevelButton),this.nextLevelButton.on(j.EventType.TOUCH_START,this.handleClickNextLevelButton)}},{key:"handleItemButtons",value:function(){this.hintButton.on(j.EventType.TOUCH_START,this.handleClickHintButton)}},{key:"handleEngineButtons",value:function(){this.buildVersionButton.on(j.EventType.TOUCH_START,this.handleClickBuildVersionButton),this.physicButton.on(j.EventType.TOUCH_START,this.handleClickPhysicButton),this.bundleButton.on(j.EventType.TOUCH_START,this.handleSwitchBundle)}},{key:"handleSpawnObjectButtons",value:function(){this.beehiveButton.on(j.EventType.TOUCH_START,this.handleClickBeehiveButton),this.dogeButton.on(j.EventType.TOUCH_START,this.handleClickDogeButton),this.thornBallButton.on(j.EventType.TOUCH_START,this.handleClickThornBallButton),this.bigBeeButton.on(j.EventType.TOUCH_START,this.handleClickBigBeeButton),this.thornButton.on(j.EventType.TOUCH_START,this.handleClickThornButton),this.airFanButton.on(j.EventType.TOUCH_START,this.handleClickAirFanButton),this.brickButton.on(j.EventType.TOUCH_START,this.handleClickBrickButton),this.grassButton.on(j.EventType.TOUCH_START,this.handleClickGrassButton),this.grassDarkButton.on(j.EventType.TOUCH_START,this.handleClickGrassDarkButton),this.lineButton.on(j.EventType.TOUCH_START,this.handleClickLineButton),this.poisonButton.on(j.EventType.TOUCH_START,this.handleClickPoisonButton),this.poisonSurfaceButton.on(j.EventType.TOUCH_START,this.handleClickPoisonSurfaceButton,this),this.waterButton.on(j.EventType.TOUCH_START,this.handleClickWaterButton),this.dangerAreaButton.on(j.EventType.TOUCH_START,this.handleClickDangerAreaButton)}},{key:"handleSwitchSceneButtons",value:function(){this.dashboardButton.on(j.EventType.TOUCH_START,this.handleClickDashboardButton)}},{key:"injectGameplay",value:function(n){this.gameplay=n,this.gameObjects=n.gameObjects}},{key:"hideAllButtons",value:function(){var n=this;this.getComponentsInChildren(M).forEach(function(i){i.node.name!==n.devToolsButton.name&&(i.node.active=!1)})}},{key:"showAllButtons",value:function(){var n=this;this.getComponentsInChildren(M).forEach(function(i){i.node.name!==n.devToolsButton.name&&(i.node.active=!0)})}},{key:"getCurrentLevel",value:function(){if(!this.gameplay)return null;var n=this.gameplay.getGameData();return n&&n.level||null}},{key:"handleEnterSelectLevel",value:function(n){var i=Number(n.string);this.node.scene.emit(r8.SELECT_LEVEL,{level:i})}},{key:"handleSpawnObject",value:function(){var n;if(this.validateRequiredComponents(),-1!==this.currentSpawnObjId){var i={x:Math.floor(40*Math.random()),y:Math.floor(40*Math.random())},a={id:this.currentSpawnObjId,point:i};null===(n=this.gameObjects)||void 0===n||n.spawnObjectForDevTools(a)}}},{key:"handleSpawnPolygonObject",value:function(){var n;if(this.validateRequiredComponents(),-1!==this.currentSpawnObjId){var i={x:Math.floor(40*Math.random()),y:Math.floor(40*Math.random())},a={x:i.x+Math.floor(10*Math.random()),y:i.y},o={x:i.x,y:i.y+Math.floor(10*Math.random())},y=[i,a,o,{x:a.x,y:o.y}],f={id:this.currentSpawnObjId,point:y};null===(n=this.gameObjects)||void 0===n||n.spawnPolygonObjectForDevTools(f)}}},{key:"validateRequiredComponents",value:function(){t_.lazyValidateProperties(this)}},{key:"handleSwitchBundle",value:function(){G.emit(eX.REQUEST_UPGRADE_ASSET)}}]),r}(O)).prototype,"devToolsButton",[pC],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pJ=g(pK.prototype,"winLevelButton",[pw],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pZ=g(pK.prototype,"loseLevelButton",[pE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pX=g(pK.prototype,"buildVersionButton",[pT],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pQ=g(pK.prototype,"prevLevelButton",[p_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),p$=g(pK.prototype,"nextLevelButton",[pA],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),p0=g(pK.prototype,"selectLevelButton",[pR],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),p1=g(pK.prototype,"hintButton",[pP],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),p2=g(pK.prototype,"physicButton",[pB],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),p3=g(pK.prototype,"bundleButton",[pL],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),p4=g(pK.prototype,"beehiveButton",[pD],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),p5=g(pK.prototype,"dogeButton",[pO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),p6=g(pK.prototype,"thornBallButton",[pI],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),p7=g(pK.prototype,"bigBeeButton",[pN],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),p9=g(pK.prototype,"thornButton",[pF],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),p8=g(pK.prototype,"airFanButton",[pG],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),de=g(pK.prototype,"brickButton",[pM],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),dn=g(pK.prototype,"grassButton",[pz],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),di=g(pK.prototype,"grassDarkButton",[px],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),da=g(pK.prototype,"lineButton",[pU],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),dr=g(pK.prototype,"poisonButton",[pH],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ds=g(pK.prototype,"poisonSurfaceButton",[pj],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),dl=g(pK.prototype,"waterButton",[pV],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),du=g(pK.prototype,"dangerAreaButton",[pW],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),dc=g(pK.prototype,"dashboardButton",[pq],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pK))||pK);A._RF.pop(),A._RF.push({},"a3b0f6zU+1D97PyszsgST1H","UIManager",void 0);var dR,dP,dB,dL,dD,dO,dI,dN,dF,dG,dM,dz,dx=P.ccclass,dU=P.property,dH=GameCore.Utils,dj=(dm=dx("UIManager"),dg=dU(hX),db=dU(df),dS=dU(dA),dm((dC=g((dk=function(n){i(r,n);var f=a(r);function r(){var n;o(this,r);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=f.call.apply(f,[this].concat(a)),b(n,"clock",dC,k(n)),b(n,"header",dw,k(n)),b(n,"devTools",dE,k(n)),n.showDevTools=function(){n.devTools&&(n.devTools.node.active=!0)},n}return y(r,[{key:"onLoad",value:function(){this.validateRequiredComponents(),this.listensDevToolsEvents()}},{key:"validateRequiredComponents",value:function(){t_.lazyValidateProperties(this)}},{key:"listensDevToolsEvents",value:function(){this.node.scene.on(rc.Events.UNLOCK_DEV_TOOLS,this.showDevTools)}},{key:"initDevTools",value:function(n){this.devTools&&(this.devTools.node.active=dH.Valid.isDebugger(),this.devTools.injectGameplay(n))}},{key:"setLevelText",value:function(n){this.header.setLevelText(n)}},{key:"initCountdown",value:function(){this.clock.init()}},{key:"startCountdown",value:function(){this.clock.startCountdown()}},{key:"pauseCountdown",value:function(){this.clock.pause()}},{key:"resumeCountdown",value:function(){this.clock.resume()}},{key:"showUncompletedMark",value:function(){this.clock.showUncompletedMark()}},{key:"showCompletedMark",value:function(){this.clock.showCompletedMark()}},{key:"setProgressBarPercentage",value:function(n){this.header.setProgress(n)}},{key:"setProgressStars",value:function(n){this.header.setProgressStars(n)}},{key:"startCountDownHeaderHintBubbleAnim",value:function(){this.header.startCountDownHintBubble()}},{key:"stopCountDownHeaderHintBubbleAnim",value:function(){this.header.stopCountDownHintBubble()}},{key:"disableUI",value:function(){this.header.disableButtons()}},{key:"enableUI",value:function(){this.header.enableButtons()}},{key:"disableHintButton",value:function(){this.header.disableHintButton()}},{key:"disableRewardAdsUI",value:function(){this.header.disableRewardAdsButton()}}]),r}(O)).prototype,"clock",[dg],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),dw=g(dk.prototype,"header",[db],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),dE=g(dk.prototype,"devTools",[dS],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),dk))||dk);A._RF.pop(),A._RF.push({},"157f203vjtMma2FDvAlyM6h","Gameplay",void 0);var dV=P.ccclass,dW=P.requireComponent,dq=P.property,dK=globalThis.game,dY=dK.player,dJ=(dK.analytics,dR=dV("Gameplay"),dP=dW([hz,c0,c$]),dB=dq(cB),dL=dq(cX),dD=dq(cK),dO=dq(cT),dR(dI=dP((dF=g((dN=function(f){i(s,f);var m=a(s);function s(){var i;o(this,s);for(var a=arguments.length,y=new Array(a),f=0;f<a;f++)y[f]=arguments[f];return(i=m.call.apply(m,[this].concat(y))).gameStartCount=0,b(i,"hint",dF,k(i)),b(i,"gameMap",dG,k(i)),b(i,"lineDrawer",dM,k(i)),b(i,"gameObjects",dz,k(i)),i.gameData=null,i.defaultData=null,i.handleStartGame=function(n){if(!n)throw new Error("handleStartGame: GameEvent payload is not defined");i.setGameData(n),i.stateManager.draw()},i.handlePauseGame=function(n){i.pauseGame(),e2.pauseSound(e4.BEE_FLYING),i.processCrazyGamesGameplayStop()},i.handleResumeGame=function(n){i.resumeGame(),e2.resumeSound(e4.BEE_FLYING),i.processCrazyGamesGameplayStart()},i.handleReplayGame=function(n){var a=T(T({},i.defaultData),n);i.setGameData(a),i.stateManager.initialize()},i.handleNextLevel=function(n){i.gameData&&(i.updatePlayerLevelProgress(n),i.stateManager.load(),i.attemptCallCreateShortcut())},i.updatePlayerLevelProgress=function(n){if(i.gameData){if(!n)throw new Error("handleNextLevel: GameEvent payload is not defined");var a=i.gameData,o=a.level,y=a.nextLevelCount,f=n.level,m=void 0===f?o:f;if(!m)throw new Error("Level is not defined");var g=m+1;dY.setGameData({level:g});var b=T(T(T({},i.defaultData),n),{},{level:g,nextLevelCount:(void 0===y?0:y)+1});i.setGameData(b)}},i.handleStartOver=function(n){dY.setGameData({level:1});var a=T(T(T({},i.defaultData),n),{},{level:1});i.setGameData(a),i.stateManager.load()},i.handleSelectLevel=function(n){if(!n)throw new Error("handleSelectLevel: GameEvent payload is not defined");var a=n.level;if(a){var o=T(T(T({},i.defaultData),n),{},{level:a});dY.setGameData({level:a}),i.setGameData(o),i.stateManager.load()}},i.handleClockTimeout=function(n){i.stateManager.escape()},i.handleDrawing=function(n){if(!n)throw new Error("handleDrawing: GameEvent payload is not defined");i.setGameData(n)},i.handleBeeDie=function(n){var a;(null===(a=i.gameObjects)||void 0===a?void 0:a.checkAllBeeDie())&&(i.stateManager.escape(),i.processCrazyGamesHappyTime())},i.handleBigBeeDie=function(n){var a;(null===(a=i.gameObjects)||void 0===a?void 0:a.checkAllBeeDie())&&(i.stateManager.escape(),i.processCrazyGamesHappyTime())},i.handleBeeAttack=function(n){i.stateManager.attack()},i.handleDogeDie=function(n){i.stateManager.death()},i.handleDogeSurvive=function(n){i.stateManager.escape()},i.handleShowHint=function(){var a=n(function(n){var a,o,y,f,m,g,b,k;return _ts_generator(this,function(C){switch(C.label){case 0:if(!((null===(a=i.hint)||void 0===a||!a.getIsHintShow())&&i.stateManager.isReady()))return[3,3];if(m=void 0!==(f=(null!=n?n:{}).noAd)&&f,i.uiManager.stopCountDownHeaderHintBubbleAnim(),!!m)return[3,2];return[4,te.showRewardVideoAdAsync()];case 1:if(!C.sent())return[2];C.label=2;case 2:if(!(g=(null!==(o=i.gameData)&&void 0!==o?o:{}).levelData))throw new Error("Level data is not defined");b=g.tips,k=ck.transformPointsFromMapToDrawAreaCoordinate(b),null===(y=i.hint)||void 0===y||y.showHint(k,!1),C.label=3;case 3:return[2]}})});return function(n){return a.apply(this,arguments)}}(),i.handleSkipLevel=function(){var a=n(function(n){return _ts_generator(this,function(n){switch(n.label){case 0:if(!i.stateManager.isReady())return[3,2];return[4,te.showRewardVideoAdAsync()];case 1:n.sent()&&i.node.scene.emit(r8.DOGE_SURVIVE),i.node.scene.emit(r8.GAME_RESUME),n.label=2;case 2:return[2]}})});return function(n){return a.apply(this,arguments)}}(),i}return y(s,[{key:"__preload",value:function(){this.initComponents(),this.validateRequiredComponents(),this.listenInputEvents(),te.showBannerAds(),hm.init()}},{key:"initComponents",value:function(){this.initUIManager(),this.initStateManager(),this.initInputController(),this.initInkCapacityController()}},{key:"initUIManager",value:function(){var n;this.uiManager=null===(n=this.node.parent)||void 0===n?void 0:n.getComponentInChildren(dj)}},{key:"initStateManager",value:function(){this.stateManager=this.getComponent(hz)}},{key:"initInputController",value:function(){this.inputController=this.getComponent(c0)}},{key:"initInkCapacityController",value:function(){this.inkCapacityController=this.getComponent(c$)}},{key:"validateRequiredComponents",value:function(){t_.lazyValidateProperties(this)}},{key:"listenInputEvents",value:function(){this.node.scene.on(r8.GAME_START,this.handleStartGame),this.node.scene.on(r8.GAME_PAUSE,this.handlePauseGame),this.node.scene.on(r8.GAME_RESUME,this.handleResumeGame),this.node.scene.on(r8.GAME_REPLAY,this.handleReplayGame),this.node.scene.on(r8.NEXT_LEVEL,this.handleNextLevel),this.node.scene.on(r8.UPDATE_LEVEL,this.updatePlayerLevelProgress),this.node.scene.on(r8.START_OVER,this.handleStartOver),this.node.scene.on(r8.SELECT_LEVEL,this.handleSelectLevel),this.node.scene.on(r8.DRAWING,this.handleDrawing),this.node.scene.on(r8.TIME_OUT,this.handleClockTimeout),this.node.scene.on(r8.BEE_DIE,this.handleBeeDie),this.node.scene.on(r8.BIG_BEE_DIE,this.handleBigBeeDie),this.node.scene.on(r8.BEE_ATTACK,this.handleBeeAttack),this.node.scene.on(r8.DOGE_DIE,this.handleDogeDie),this.node.scene.on(r8.DOGE_SURVIVE,this.handleDogeSurvive),this.node.scene.on(r8.SHOW_HINT,this.handleShowHint),this.node.scene.on(r8.SKIP_LEVEL,this.handleSkipLevel)}},{key:"start",value:function(){this.initData(),this.initGame(),this.initDevTools()}},{key:"initDevTools",value:function(){this.uiManager.initDevTools(this)}},{key:"initData",value:function(){var n,i=(null!==(n=dY.getGameData())&&void 0!==n?n:{}).level;this.defaultData={level:void 0===i?1:i,gameplayMode:"level",nextLevelCount:0,isFromLoader:!1},this.setGameData(this.defaultData)}},{key:"initGame",value:function(){this.stateManager.init(),this.stateManager.load()}},{key:"setGameData",value:function(n){n&&(this.gameData=T(T({},this.gameData),n))}},{key:"getGameData",value:function(){return this.gameData}},{key:"pauseGame",value:function(){this.node.active=!1,this.node.pauseSystemEvents(!0),this.uiManager.pauseCountdown()}},{key:"resumeGame",value:function(){this.node.active=!0,this.node.resumeSystemEvents(!0),this.uiManager.resumeCountdown()}},{key:"attemptCallCreateShortcut",value:function(){var n,i=null!==(n=this.getGameData())&&void 0!==n?n:{},a=i.level,o=i.nextLevelCount;(void 0===a?0:a)<2||(void 0===o?0:o)<2||"checkAndCreateShortcutAsync"in GameSDK.extra&&GameSDK.extra.checkAndCreateShortcutAsync().catch(function(n){console.warn("checkAndCreateShortcutAsync",n)})}},{key:"processCrazyGamesGameplayStart",value:function(){"gameplayStart"in GameSDK.extra&&GameSDK.extra.gameplayStart()}},{key:"processCrazyGamesGameplayStop",value:function(){"gameplayStop"in GameSDK.extra&&GameSDK.extra.gameplayStop()}},{key:"processCrazyGamesHappyTime",value:function(){"happyTime"in GameSDK.extra&&GameSDK.extra.happyTime()}},{key:"disableRewardAdsItemForCrazyGames",value:function(){"CrazyGames"===GameSDK.getSDKName()&&this.uiManager.disableRewardAdsUI()}}]),s}(O)).prototype,"hint",[dB],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),dG=g(dN.prototype,"gameMap",[dL],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),dM=g(dN.prototype,"lineDrawer",[dD],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),dz=g(dN.prototype,"gameObjects",[dO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),dI=dN))||dI)||dI);A._RF.pop(),A._RF.push({},"bfd3fZcEttGVawFb2B3Gmqu","DangerArea",void 0),(0,P.ccclass)("DangerArea")(function(n){i(s,n);var f=a(s);function s(){var n;o(this,s);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return(n=f.call.apply(f,[this].concat(a))).useBatch=!1,n.dangerPolygons=[],n}return y(s,[{key:"addDangerAreaPolygon",value:function(n){this.dangerPolygons.push(n)}},{key:"addRigidBody",value:function(){var n=this.node.addComponent(ei);n?(n.group=rE.MAIN_OBJECT,n.type=en.Static):console.warn("Cannot add RigidBody2D")}},{key:"applyColliderForBatchDraw",value:function(){var n,i=this.dangerPolygons.map(function(n){return n.map(function(n){var i=n.x,a=n.y;return new eo(i,a)})}),a=m(i);try{for(a.s();!(n=a.n()).done;){var o=n.value,y=new j;y.name=rf.DANGER_AREA,this.node.addChild(y),y.setPosition(0,0);var f=y.addComponent(ei);f.type=en.Static,f.group=rE.MAIN_OBJECT;var g=y.addComponent(em);g.points=o,g.apply()}}catch(n){a.e(n)}finally{a.f()}}},{key:"batchDrawAllDangerAreas",value:function(){if(!(this.dangerPolygons.length<1)){var n=this.node.getComponent(lA);if(!n)return console.warn("DangerArea: GraphicsPattern not found"),null;this.addRigidBody(),n.setColor("#fc03036d");var i,a=m(this.dangerPolygons);try{for(a.s();!(i=a.n()).done;){var o=i.value;n.draw(o)}}catch(n){a.e(n)}finally{a.f()}this.applyColliderForBatchDraw()}}}]),s}(O)),A._RF.pop(),A._RF.push({},"0daa9+mtbVHG5tVordU0a3q","Spider",void 0);var dZ,dX,dQ,d$,d0,d1,d2,d3,d4,d5,d6,d7,d9,d8,ye,yn,yi,ya,yo,yr,ys=P.ccclass,yl=P.property;dZ=ys("Spider"),dX=yl(j),dQ=yl(j),d$=yl(j),d0=yl(er),d1=yl(ei),d2=yl(W),dZ((d4=g((d3=function(n){i(r,n);var f=a(r);function r(){var n;o(this,r);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=f.call.apply(f,[this].concat(a)),b(n,"spider",d4,k(n)),b(n,"web",d5,k(n)),b(n,"silk",d6,k(n)),n.isStunned=!1,b(n,"spiderCollider",d7,k(n)),b(n,"spiderRigidBody",d9,k(n)),b(n,"silkGraphics",d8,k(n)),n.onSpiderCollisionEnter=function(i,a){if(!n.isStunned){n.isStunned=!0,n.spiderRigidBody.linearVelocity=new eo(0,0);var o=n.isLineCollision(a),y=n.isDogeCollision(a);if(o||y){var f=a.node,m=n.spider.addComponent(eR),g=n.spider.worldPosition,b=f.getComponent(ei);if(o)m.connectedAnchor=a.offset.clone();else{var k=f.worldPosition;m.connectedAnchor=new eo(g.x-k.x,g.y-k.y)}m.connectedBody=b,m.autoCalcDistance=!1,m.maxLength=5,m.collideConnected=!1}}},n}return y(r,[{key:"onLoad",value:function(){this.spiderCollider=this.spider.getComponent(er),this.spiderRigidBody=this.spider.getComponent(ei),this.silkGraphics=this.silk.getComponent(W),this.validateRequiredComponents()}},{key:"onDestroy",value:function(){this.spiderCollider.off(es.BEGIN_CONTACT,this.onSpiderCollisionEnter)}},{key:"validateRequiredComponents",value:function(){t_.lazyValidateProperties(this)}},{key:"start",value:function(){this.enabled=!1,this.isStunned=!1,this.silkOffsetVector=new eo,this.spiderCollider.on(es.BEGIN_CONTACT,this.onSpiderCollisionEnter)}},{key:"update",value:function(){if(this.enabled){if(this.drawSilk(),this.isStunned){var n=this.getVectorDataFromAToB(this.spider.worldPosition,this.web.worldPosition);this.spiderRigidBody.linearVelocity=n.vector.multiplyScalar(5),this.spiderRigidBody.linearDamping=0,this.isSpiderTooCloseToWeb()&&(this.spiderRigidBody.type=en.Static,this.enabled=!1)}else{if(-3===this.spiderRigidBody.linearVelocity.y)return;this.spiderRigidBody.linearVelocity=new eo(0,-3)}}}},{key:"drawSilk",value:function(){var n=this.web.position,i=this.spider.position,a=el.toRadian(this.spider.eulerAngles.z);this.silkGraphics.clear(),this.silkGraphics.moveTo(n.x,n.y),this.silkOffsetVector.set(0,50).rotate(a),this.silkGraphics.lineTo(i.x+this.silkOffsetVector.x,i.y+this.silkOffsetVector.y),this.silkGraphics.stroke()}},{key:"isSpiderTooCloseToWeb",value:function(){var n=this.spider.position,i=this.web.position;return U.distance(n,i)<40}},{key:"isLineCollision",value:function(n){var i=n.node;return i&&i.getComponent(sA)||!1}},{key:"isDogeCollision",value:function(n){var i=n.node;return i&&i.getComponent(uR)||!1}}]),r}(rI)).prototype,"spider",[dX],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d5=g(d3.prototype,"web",[dQ],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d6=g(d3.prototype,"silk",[d$],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d7=g(d3.prototype,"spiderCollider",[d0],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d9=g(d3.prototype,"spiderRigidBody",[d1],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d8=g(d3.prototype,"silkGraphics",[d2],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d3)),A._RF.pop(),A._RF.push({},"8fe7bkzdtdNfY7I8uaDov+b","EndlessHeader",void 0);var yu,yc,yh,yp,yd,yy,yv,yf,ym,yg,yb,yS=P.ccclass,yk=P.property,yC=(ye=yS("EndlessHeader"),yn=yk(j),yi=yk(j),ye((yo=g((ya=function(n){i(r,n);var f=a(r);function r(){var n;o(this,r);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=f.call.apply(f,[this].concat(a)),b(n,"pauseNode",yo,k(n)),b(n,"replayNode",yr,k(n)),n}return y(r,[{key:"__preload",value:function(){this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){t_.lazyValidateProperties(this)}},{key:"handleClickedPauseGame",value:function(){this.showSettingScreen(),this.node.scene.emit(r8.GAME_PAUSE)}},{key:"handleClickedReplayGame",value:function(){this.node.scene.emit(r8.GAME_REPLAY)}},{key:"showSettingScreen",value:function(){e9.openScreen(e8.SETTINGS_SCREEN,{})}},{key:"disableButtons",value:function(){this.enableBtnNode(this.pauseNode,!1,!0),this.enableBtnNode(this.replayNode,!1,!0)}},{key:"enableButtons",value:function(){this.enableBtnNode(this.pauseNode,!0,!0),this.enableBtnNode(this.replayNode,!0,!0)}},{key:"enableBtnNode",value:function(n,i,a){var o=n.getComponent(M);if(o&&(o.interactable=i),n.active=a,a){var y=n.getComponent(nI);y&&y.changeState(i)}}}]),r}(O)).prototype,"pauseNode",[yn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yr=g(ya.prototype,"replayNode",[yi],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ya))||ya);A._RF.pop(),A._RF.push({},"bc951s11zREU72nQBqwoD3m","EndlessClock",void 0);var yw,yE,yT,y_,yA,yR,yP,yB,yL,yD,yO=P.ccclass,yI=P.disallowMultiple,yN=P.property,yF=(yu=yO("EndlessClock"),yc=yN(K),yh=yN(K),yp=yN(B),yd=yN(F),yu(yy=yI((yf=g((yv=function(n){i(r,n);var f=a(r);function r(){var n;o(this,r);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=f.call.apply(f,[this].concat(a)),b(n,"timeText",yf,k(n)),b(n,"bestTimeText",ym,k(n)),b(n,"animation",yg,k(n)),b(n,"clockFill",yb,k(n)),n.elapsedTime=0,n.bestTime=0,n.running=!1,n}return y(r,[{key:"__preload",value:function(){this.validateRequiredComponents()}},{key:"start",value:function(){this.animation.stop(),this.clockFill.fillRange=0}},{key:"validateRequiredComponents",value:function(){t_.lazyValidateProperties(this)}},{key:"getScore",value:function(){return this.elapsedTime}},{key:"getBestScore",value:function(){return Math.max(this.bestTime,this.elapsedTime)}},{key:"setBestScore",value:function(n){this.bestTime=n;var i=Math.floor(n/60),a=Math.floor(n%60),o=i.toString().padStart(2,"0"),y=a.toString().padStart(2,"0");this.bestTimeText.string="".concat(o,":").concat(y)}},{key:"init",value:function(){this.running=!1,this.node.active=!0,this.animation.stop(),this.clockFill.fillRange=0,this.setElapsedTime(0),this.setBestScore(this.bestTime)}},{key:"startCounting",value:function(){this.running=!0,this.node.active=!0,this.animation.play(),this.setElapsedTime(0),this.setBestScore(this.bestTime)}},{key:"stopCounting",value:function(){this.running=!1,this.node.active=!1,this.animation.stop(),this.clockFill.fillRange=0}},{key:"pause",value:function(){this.running=!1,this.animation.pause()}},{key:"resume",value:function(){this.running=!0,this.animation.play()}},{key:"update",value:function(n){this.running&&this.setElapsedTime(this.elapsedTime+n)}},{key:"setElapsedTime",value:function(n){this.elapsedTime=n;var i=Math.floor(this.elapsedTime/60),a=Math.floor(this.elapsedTime%60),o=i.toString().padStart(2,"0"),y=a.toString().padStart(2,"0");this.timeText.string="".concat(o,":").concat(y),this.elapsedTime>this.bestTime&&this.setBestScore(this.elapsedTime)}}]),r}(O)).prototype,"timeText",[yc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ym=g(yv.prototype,"bestTimeText",[yh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yg=g(yv.prototype,"animation",[yp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yb=g(yv.prototype,"clockFill",[yd],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yy=yv))||yy)||yy);A._RF.pop(),A._RF.push({},"346956Nk9hPgpT3ZCsaVr+P","EndlessUIManager",void 0);var yG,yM,yz,yx,yU,yH,yj,yV,yW,yq,yK,yY,yJ,yZ,yX,yQ,y$=P.ccclass,y0=P.property,y1=GameCore.Utils,y2=(yw=y$("EndlessUIManager"),yE=y0(yF),yT=y0(yC),y_=y0(dA),yA=y0(j),yw((yP=g((yR=function(n){i(r,n);var f=a(r);function r(){var n;o(this,r);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=f.call.apply(f,[this].concat(a)),b(n,"clock",yP,k(n)),b(n,"header",yB,k(n)),b(n,"devTools",yL,k(n)),b(n,"tapToStartText",yD,k(n)),n.showDevTools=function(){n.devTools&&(n.devTools.node.active=!0)},n}return y(r,[{key:"onLoad",value:function(){this.validateRequiredComponents(),this.listensDevToolsEvents()}},{key:"validateRequiredComponents",value:function(){t_.lazyValidateProperties(this)}},{key:"listensDevToolsEvents",value:function(){this.node.scene.on(rc.Events.UNLOCK_DEV_TOOLS,this.showDevTools)}},{key:"initDevTools",value:function(n){this.devTools&&(this.devTools.node.active=y1.Valid.isDebugger(),this.devTools.injectGameplay(n))}},{key:"getBestScore",value:function(){return this.clock.getBestScore()}},{key:"setBestScore",value:function(n){this.clock.setBestScore(n)}},{key:"initCounting",value:function(){this.clock.init()}},{key:"startCounting",value:function(){this.clock.startCounting()}},{key:"stopCounting",value:function(){this.clock.stopCounting()}},{key:"pauseCounting",value:function(){this.clock.pause()}},{key:"resumeCounting",value:function(){this.clock.resume()}},{key:"disableUI",value:function(){this.header.disableButtons()}},{key:"enableUI",value:function(){this.header.enableButtons()}},{key:"showTapToStartText",value:function(){this.tapToStartText.active=!0;var n=this.tapToStartText.getComponent(V);n.opacity=255,eS(n).to(.5,{opacity:0},{easing:"smooth"}).to(.5,{opacity:255},{easing:"smooth"}).union().repeatForever().start()}},{key:"hideTapToStartText",value:function(){var n=this.tapToStartText.getComponent(V);eb.stopAllByTarget(n),eb.stopAllByTarget(this.tapToStartText),this.tapToStartText.active=!1}}]),r}(O)).prototype,"clock",[yE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yB=g(yR.prototype,"header",[yT],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yL=g(yR.prototype,"devTools",[y_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),yD=g(yR.prototype,"tapToStartText",[yA],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yR))||yR);A._RF.pop(),A._RF.push({},"9d32c879Q1FRIas0BgO+iNP","EndlessGameplay",void 0);var y3=P.ccclass,y4=P.property,y5=P.requireComponent,y6=globalThis.game.player,y7=(yG=y3("EndlessGameplay"),yM=y5(Q),yz=y4({type:ed,group:"Thorns"}),yx=y4({type:j,group:"Thorns"}),yU=y4({type:j,group:"Thorns"}),yH=y4({type:j,group:"Thorns"}),yj=y4({type:j,group:"Thorns"}),yV=y4(cT),yG(yW=yM((yK=g((yq=function(n){i(r,n);var f=a(r);function r(){var n;o(this,r);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return(n=f.call.apply(f,[this].concat(a))).gameData=null,n.defaultData=null,b(n,"thornPrefab",yK,k(n)),b(n,"bottomThorns",yY,k(n)),b(n,"topThorns",yJ,k(n)),b(n,"leftThorns",yZ,k(n)),b(n,"rightThorns",yX,k(n)),b(n,"gameObjects",yQ,k(n)),n.handleStartGame=function(i){if(!i)throw new Error("handleStartGame: GameEvent payload is not defined");n.setGameData(i),n.stateManager.play()},n.handlePauseGame=function(i){n.pauseGame(),e2.pauseSound(e4.BEE_FLYING),n.processCrazyGamesGameplayStop()},n.handleResumeGame=function(i){n.resumeGame(),e2.resumeSound(e4.BEE_FLYING),n.processCrazyGamesGameplayStart()},n.handleReplayGame=function(i){var a=T(T({},n.gameData),i);n.setGameData(a),n.stateManager.initialize(),n.uiManager.showTapToStartText(),n.node.active=!0,n.node.resumeSystemEvents(!0)},n.handleDogeDie=function(){n.stateManager.death(),n.attemptCallCreateShortcut()},n.handleBeeDie=function(i){var a;(null===(a=n.gameObjects)||void 0===a?void 0:a.checkAllBeeDie())&&n.processCrazyGamesHappyTime()},n.handleBigBeeDie=function(i){var a;(null===(a=n.gameObjects)||void 0===a?void 0:a.checkAllBeeDie())&&n.processCrazyGamesHappyTime()},n.handleHideTapToPlayText=function(){n.uiManager.hideTapToStartText()},n}return y(r,[{key:"__preload",value:function(){this.initComponents(),this.uiTransform=this.getComponent(Q),this.validateRequiredComponents(),this.listenInputEvents(),te.showBannerAds()}},{key:"initComponents",value:function(){this.initUIManager(),this.initStateManager()}},{key:"initUIManager",value:function(){var n;this.uiManager=null===(n=this.node.parent)||void 0===n?void 0:n.getComponentInChildren(y2)}},{key:"initStateManager",value:function(){this.stateManager=this.getComponent(vC)}},{key:"validateRequiredComponents",value:function(){t_.lazyValidateProperties(this)}},{key:"listenInputEvents",value:function(){this.node.scene.on(r8.GAME_START,this.handleStartGame),this.node.scene.on(r8.GAME_PAUSE,this.handlePauseGame),this.node.scene.on(r8.GAME_RESUME,this.handleResumeGame),this.node.scene.on(r8.GAME_REPLAY,this.handleReplayGame),this.node.scene.on(r8.BEE_DIE,this.handleBeeDie),this.node.scene.on(r8.BIG_BEE_DIE,this.handleBigBeeDie),this.node.scene.on(r8.DOGE_DIE,this.handleDogeDie)}},{key:"start",value:function(){this.initData(),this.initGame(),this.initObjects(),this.initDevTools(),this.uiManager.startCounting(),this.uiManager.showTapToStartText()}},{key:"initDevTools",value:function(){this.uiManager.initDevTools(this)}},{key:"initData",value:function(){var n,i=null!==(n=y6.getGameData())&&void 0!==n?n:{},a=i.level,o=i.bestEndlessScore;this.defaultData={level:void 0===a?1:a,bestEndlessScore:void 0===o?0:o,gameplayMode:"endless",nextLevelCount:0,isFromLoader:!1},this.setGameData(this.defaultData)}},{key:"initGame",value:function(){this.stateManager.init(),this.stateManager.load()}},{key:"setGameData",value:function(n){n&&(this.gameData=T(T({},this.gameData),n))}},{key:"getGameData",value:function(){return this.gameData}},{key:"pauseGame",value:function(){this.node.active=!1,this.node.pauseSystemEvents(!0),this.uiManager.pauseCounting()}},{key:"resumeGame",value:function(){this.node.active=!0,this.node.resumeSystemEvents(!0),this.uiManager.resumeCounting()}},{key:"attemptCallCreateShortcut",value:function(){var n,i=null!==(n=this.gameData)&&void 0!==n?n:{},a=i.level,o=i.nextLevelCount;(void 0===a?0:a)<2||(void 0===o?0:o)<2||"checkAndCreateShortcutAsync"in GameSDK.extra&&GameSDK.extra.checkAndCreateShortcutAsync().catch(function(n){console.warn("checkAndCreateShortcutAsync",n)})}},{key:"initObjects",value:function(){var n=this.createThorn();if(!_instanceof(n,j))throw new Error("initObjects: Could not create thorn");var i=n.getComponent(Q);if(!_instanceof(i,Q))throw new Error("initObjects: Could not get UITransform of thorn");for(var a=this.uiTransform.getBoundingBoxToWorld(),o=a.width,y=a.height,f=Math.ceil(o/i.width),m=Math.ceil(y/i.height),g=0;g<f;g++)this.topThorns.addChild(this.createThorn()),this.bottomThorns.addChild(this.createThorn());for(var b=0;b<m;b++)this.leftThorns.addChild(this.createThorn()),this.rightThorns.addChild(this.createThorn());this.rightThorns.addChild(n),console.log("initObjects: Done",f,m)}},{key:"getBoundingBox",value:function(){return this.uiTransform.getBoundingBoxToWorld()}},{key:"getDogeSpawnPosition",value:function(){var n=this.uiTransform.getBoundingBoxToWorld().center;return[n.x,n.y]}},{key:"createThorn",value:function(){var n=ey(this.thornPrefab);return n.name=rf.THORN,n}},{key:"processCrazyGamesGameplayStart",value:function(){"gameplayStart"in GameSDK.extra&&GameSDK.extra.gameplayStart()}},{key:"processCrazyGamesGameplayStop",value:function(){"gameplayStop"in GameSDK.extra&&GameSDK.extra.gameplayStop()}},{key:"processCrazyGamesHappyTime",value:function(){"happyTime"in GameSDK.extra&&GameSDK.extra.happyTime()}}]),r}(O)).prototype,"thornPrefab",[yz],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yY=g(yq.prototype,"bottomThorns",[yx],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yJ=g(yq.prototype,"topThorns",[yU],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yZ=g(yq.prototype,"leftThorns",[yH],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yX=g(yq.prototype,"rightThorns",[yj],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yQ=g(yq.prototype,"gameObjects",[yV],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yW=yq))||yW)||yW);A._RF.pop(),A._RF.push({},"43aefNoI9lJxJNh3LPuKYPt","BaseState",void 0);var y9=function(){function e(n){if(o(this,e),this.game=null,this.data={},this.game=n.node.getComponent(y7),!this.game)throw new Error("Gameplay component not found");this.manager=n,this.updateStateData(),this.logDebug()}return y(e,[{key:"logDebug",value:function(){var n=this.constructor.name;console.debug("[STATE] ".concat(n),this.data)}},{key:"updateStateData",value:function(){if(this.game){var n=this.game.getGameData();n&&(this.data=n)}}},{key:"updateGameData",value:function(n){var i;null===(i=this.game)||void 0===i||i.setGameData(n),this.updateStateData()}}]),e}();A._RF.pop(),A._RF.push({},"109f0WH9r9IQqMHpvD45PzQ","DeathState",void 0);var y8=globalThis.game.analytics,ve=function(n){i(s,n);var f=a(s);function s(n){var i,a,y;return o(this,s),(y=f.call(this,n)).processCrazyGamesEvent(),y.disableUI(),e2.stopAllSounds(),y.vibrateDevice(),y.pauseCountdown(),y.logLevelFailAnalytics(),null===(i=y.game)||void 0===i||i.scheduleOnce(function(){y.stopDogesLooking(),e2.playSound(e4.LEVEL_FAIL,{volume:.3})},.5),null===(a=y.game)||void 0===a||a.scheduleOnce(function(){y.sleepObjects(),y.showLoseScreen(),y.manager.finish()},1.8),y}return y(s,[{key:"processCrazyGamesEvent",value:function(){"gameplayStop"in GameSDK.extra&&GameSDK.extra.gameplayStop()}},{key:"load",value:function(){}},{key:"initialize",value:function(){}},{key:"ready",value:function(){}},{key:"play",value:function(){}},{key:"death",value:function(){}},{key:"finish",value:function(){var n=this.manager.createFinishState();this.manager.change(n)}},{key:"update",value:function(){}},{key:"disableUI",value:function(){var n;null===(n=this.game)||void 0===n||n.uiManager.disableUI()}},{key:"sleepObjects",value:function(){var n;null===(n=this.game)||void 0===n||null===(n=n.gameObjects)||void 0===n||n.sleepObjects()}},{key:"pauseCountdown",value:function(){var n;null===(n=this.game)||void 0===n||n.uiManager.pauseCounting()}},{key:"stopDogesLooking",value:function(){var n;if(null!==(n=this.game)&&void 0!==n&&n.gameObjects){var i,a=this.game.gameObjects.getComponentsInChildren(uR),o=m(a);try{for(o.s();!(i=o.n()).done;){var y,f=i.value;null===(y=f.eyes)||void 0===y||y.stopLook(),f.setEnable(!1)}}catch(n){o.e(n)}finally{o.f()}}}},{key:"vibrateDevice",value:function(){var n;null===(n=ek("Vibrate"))||void 0===n||null===(n=n.getComponent(rs))||void 0===n||n.vibrate(500)}},{key:"showLoseScreen",value:function(){var n=this.data.level;e9.openScreen(e8.LOSE_SCREEN,{level:n})}},{key:"logLevelFailAnalytics",value:function(){y8.levelComplete(1,0,rd)}}]),s}(y9);A._RF.pop(),A._RF.push({},"638devCm49MrpqRRWptDInp","FinishState",void 0);var vn=globalThis.game.player,vi=function(f){i(l,f);var m,g=a(l);function l(n){var i;return o(this,l),i=g.call(this,n),e2.turnUpMusic(),e2.stopSound(e4.BEE_FLYING),i.finishGameAsync(),i}return y(l,[{key:"load",value:function(){var n=this.manager.createLoadingState();this.manager.change(n)}},{key:"initialize",value:function(){var n=this.manager.createInitializeState();this.manager.change(n)}},{key:"ready",value:function(){}},{key:"play",value:function(){}},{key:"death",value:function(){}},{key:"finish",value:function(){}},{key:"update",value:function(){}},{key:"finishGameAsync",value:(m=n(function(){var n,i,a,o,y;return _ts_generator(this,function(f){switch(f.label){case 0:if(f.trys.push([0,2,,3]),!this.game)return[2];return a=this.game.uiManager.getBestScore(),y=(o=null!==(n=null===(i=vn.getGameData())||void 0===i?void 0:i.bestEndlessScore)&&void 0!==n?n:0)<a?a:o,vn.setGameData({bestEndlessScore:y}),this.updateGameData({bestEndlessScore:y}),[4,hc.finishMatchAsync()];case 1:return f.sent(),[3,3];case 2:return console.error("finishGameAsync",f.sent()),[3,3];case 3:return[2]}})}),function(){return m.apply(this,arguments)})}]),l}(y9);A._RF.pop(),A._RF.push({},"97260ZJNotE0LYFeNm4wsEz","InitializeState",void 0);var va=function(f){i(u,f);var m,g,b=a(u);function u(n){var i;return o(this,u),i=b.call(this,n),"CrazyGames"===GameSDK.getSDKName()&&i.processCrazyGamesRequirements(),i.enableUI(),i.clearGameObjects(),i.createGameObjects(),i.initClock(),e2.playMusic(),i.startGameAsync().then(function(){i.closeLoadingScreen(),i.manager.ready()}),i}return y(u,[{key:"processCrazyGamesRequirements",value:function(){"gameplayStart"in GameSDK.extra&&GameSDK.extra.gameplayStart(),this.showInterAdsCrazyGames()}},{key:"showInterAdsCrazyGames",value:(g=n(function(){return _ts_generator(this,function(n){switch(n.label){case 0:if(!this.game)return[3,2];return e2.stopAllSounds(),[4,te.showInterstitialAdAsync({forLevel:this.data.level,includeSDK:["CrazyGames"]})];case 1:n.sent(),e2.turnUpMusic(),n.label=2;case 2:return[2]}})}),function(){return g.apply(this,arguments)})},{key:"load",value:function(){if(GameCore.Utils.Valid.isDebugger()){var n=this.manager.createLoadingState();this.manager.change(n)}}},{key:"initialize",value:function(){}},{key:"ready",value:function(){var n=this.manager.createReadyState();this.manager.change(n)}},{key:"play",value:function(){}},{key:"death",value:function(){var n=this.manager.createDeathState();this.manager.change(n)}},{key:"finish",value:function(){}},{key:"update",value:function(){}},{key:"closeLoadingScreen",value:function(){e9.closeScreen(e8.LOADING_SCREEN)}},{key:"enableUI",value:function(){var n;null===(n=this.game)||void 0===n||n.uiManager.enableUI()}},{key:"clearGameObjects",value:function(){var n;null!==(n=this.game)&&void 0!==n&&n.gameObjects&&this.game.gameObjects.clearObjects()}},{key:"createGameObjects",value:function(){var n,i,a,o=null!==(n=null===(i=this.game)||void 0===i?void 0:i.getDogeSpawnPosition())&&void 0!==n?n:[0,0],y=_(o,2),f=y[0],m=y[1],g=null===(a=this.game)||void 0===a?void 0:a.gameObjects.spawnDoge({x:f,y:m,right:!1,isWorldPosition:!0,rigidBodyConfig:{gravityScale:2}});if(!_instanceof(g,j))throw new Error("Could not create doge");var b=g.getComponent(ei);if(!b)throw new Error("Could not get rigidBody");b.sleep()}},{key:"initClock",value:function(){var n,i;null===(n=this.game)||void 0===n||n.uiManager.initCounting();var a=this.data.bestEndlessScore;null===(i=this.game)||void 0===i||i.uiManager.setBestScore(void 0===a?0:a)}},{key:"startGameAsync",value:(m=n(function(){return _ts_generator(this,function(n){switch(n.label){case 0:if(n.trys.push([0,2,,3]),this.data.isFromLoader)return[2,void this.updateGameData({isFromLoader:!1})];return[4,hc.startMatchAsync()];case 1:return n.sent(),[3,3];case 2:return console.error("startGameAsync",n.sent()),[3,3];case 3:return[2]}})}),function(){return m.apply(this,arguments)})}]),u}(y9);A._RF.pop(),A._RF.push({},"ecbe0PxfZNJBLsmLBPc2pBD","LoadingState",void 0);var vo=globalThis.game.player,vr=function(n){i(r,n);var f=a(r);function r(n){var i,a,y,m;o(this,r),m=f.call(this,n);var g=null!==(i=null===(a=vo.getGameData())||void 0===a?void 0:a.bestEndlessScore)&&void 0!==i?i:0;return m.updateGameData({bestEndlessScore:g}),e9.showLoadingScreen(),null===(y=m.game)||void 0===y||y.scheduleOnce(function(){m.initialize()},.5),m}return y(r,[{key:"load",value:function(){}},{key:"initialize",value:function(){var n=this.manager.createInitializeState();this.manager.change(n)}},{key:"ready",value:function(){}},{key:"play",value:function(){}},{key:"death",value:function(){}},{key:"finish",value:function(){}},{key:"update",value:function(){}}]),r}(y9);A._RF.pop(),A._RF.push({},"651d4HD0HpFPLrL8dycqU3R","PlayingState",void 0);var vs=globalThis.game.player;function Pg(){var n=Object.keys(rh).map(function(n){return parseInt(n)}).sort(function(n,i){return n-i}),i=0;return{current:function(){var a;return null!==(a=n[i])&&void 0!==a?a:0},canGoNext:function(a){var o=i+1;if(o>=n.length)return!1;var y=n[o];return!!y&&a>y},next:function(){var a;if(i>=n.length-1)throw new Error("No more progressions");return null!==(a=n[i++])&&void 0!==a?a:0}}}var vl=function(n){i(r,n);var f=a(r);function r(n){var i;return o(this,r),(i=f.call(this,n)).totalElapsed=0,i.spawnElapsed=0,i.spawnInterval=2,i.flyForce=18,i.progressionIt=Pg(),i.onTouchStart=function(){i.dogeRigidBody.linearVelocity=new eo(0,i.flyForce)},i.findDoge(),i.wakeUpObjects(),i.spawnEnemies(),i.startCounting(),e2.turnDownMusic(),i.listenInputEvents(),i}return y(r,[{key:"listenInputEvents",value:function(){var n,i;J.os===J.OS.WINDOWS||J.os===J.OS.OSX?(document.addEventListener("pointerdown",this.onTouchStart),null===(n=this.game)||void 0===n||n.node.on(j.EventType.MOUSE_DOWN,this.onTouchStart)):null===(i=this.game)||void 0===i||i.node.on(j.EventType.TOUCH_START,this.onTouchStart)}},{key:"unlistenInputEvents",value:function(){var n,i;J.os===J.OS.WINDOWS||J.os===J.OS.OSX?(document.removeEventListener("pointerdown",this.onTouchStart),null===(n=this.game)||void 0===n||n.node.off(j.EventType.MOUSE_DOWN,this.onTouchStart)):null===(i=this.game)||void 0===i||i.node.off(j.EventType.TOUCH_START,this.onTouchStart)}},{key:"findDoge",value:function(){var n,i=null===(n=this.game)||void 0===n||null===(n=n.gameObjects)||void 0===n?void 0:n.getRandomDogeToBee();if(!i)throw new Error("No doge found in GameObjects");this.doge=i;var a=this.doge.getComponent(ei);if(!a)throw new Error("No rigid body found in doge");this.dogeRigidBody=a}},{key:"load",value:function(){this.unlistenInputEvents();var n=this.manager.createLoadingState();this.manager.change(n)}},{key:"initialize",value:function(){this.unlistenInputEvents(),e2.stopSound(e4.BEE_FLYING);var n=this.manager.createInitializeState();this.manager.change(n)}},{key:"ready",value:function(){}},{key:"play",value:function(){}},{key:"death",value:function(){this.unlistenInputEvents();var n=this.manager.createDeathState();this.manager.change(n)}},{key:"finish",value:function(){}},{key:"update",value:function(n){if(this.spawnElapsed+=n,this.totalElapsed+=n,this.progressionIt.canGoNext(this.totalElapsed)&&(this.progressionIt.next(),this.updateProgressionToPlugin()),this.spawnElapsed>this.spawnInterval){var i=rh[this.progressionIt.current()];if(!i)return;this.handleSpawn(i),this.spawnElapsed=0}}},{key:"updateProgressionToPlugin",value:function(){var n;hc.setProfileMatchDataAsync({id:vs.getPlayerId(),endlessScore:Math.round(null!==(n=this.data.bestEndlessScore)&&void 0!==n?n:0)})}},{key:"handleSpawn",value:function(n){if(!this.game)throw new Error("Game is not defined");var i=this.game.getBoundingBox(),a=0===el.randomRangeInt(0,2)?i.xMin-0:i.xMax+0,o=this.doge.node.worldPosition.y+el.randomRangeInt(-100,100),y=this.doge.node.getWorldPosition(),f=y.x,m=y.y,g=new U(a,o,0),b=g.x+2*(f-g.x),k=g.y+2*(m-g.y);this.spawnPredictionLine(g,b,k),this.spawnCrossingBee(f,m,g,n)}},{key:"spawnCrossingBee",value:function(n,i,a,o){var y=this;if(!this.game)throw new Error("Game is not defined. Only use this method in PlayingState");this.game.scheduleOnce(function(){y.game.gameObjects.spawnCrossingBees(T({playerWorldX:n,playerWorldY:i,spawnWorldX:a.x,spawnWorldY:a.y},o))},1)}},{key:"spawnPredictionLine",value:function(n,i,a){if(!this.game)throw new Error("Game is not defined. Only use this method in PlayingState");var o=this.game.gameObjects.spawnCrossingBeeLine({startX:n.x,startY:n.y,endX:i,endY:a,spriteType:l2.LOW,thickness:0});eS(o).call(function(){e2.playSound(e4.BEE_FLYING)}).to(.5,{thickness:80},{easing:"expoOut"}).start(),this.game.scheduleOnce(function(){eS(o).to(.5,{thickness:0},{easing:"expoOut"}).call(function(){o.destroy(),e2.stopSound(e4.BEE_FLYING)}).start()},1)}},{key:"wakeUpObjects",value:function(){var n;null===(n=this.game)||void 0===n||null===(n=n.gameObjects)||void 0===n||n.wakeUpObjects(),this.dogeRigidBody.wakeUp()}},{key:"spawnEnemies",value:function(){this.game&&this.game.gameObjects&&(this.game.gameObjects.spawnBees(),this.game.gameObjects.reviveBigBees())}},{key:"startCounting",value:function(){var n;null===(n=this.game)||void 0===n||n.uiManager.startCounting()}}]),r}(y9);A._RF.pop(),A._RF.push({},"9516f5Gc/FENLPaNEZwDwcn","ReadyState",void 0);var vu,vc=globalThis.game.analytics,vh=function(n){i(r,n);var f=a(r);function r(n){var i;return o(this,r),(i=f.call(this,n)).onTouchStart=function(){var n;i.manager.play(),null===(n=i.game)||void 0===n||n.handleHideTapToPlayText()},i.logLevelStartAnalytics(),i.listenInputEvents(),i}return y(r,[{key:"listenInputEvents",value:function(){var n,i;J.os===J.OS.WINDOWS||J.os===J.OS.OSX?(document.addEventListener("pointerdown",this.onTouchStart,{once:!0}),null===(n=this.game)||void 0===n||n.node.once(j.EventType.MOUSE_DOWN,this.onTouchStart)):null===(i=this.game)||void 0===i||i.node.once(j.EventType.TOUCH_START,this.onTouchStart)}},{key:"unlistenInputEvents",value:function(){var n,i;J.os===J.OS.WINDOWS||J.os===J.OS.OSX?(document.removeEventListener("pointerdown",this.onTouchStart),null===(n=this.game)||void 0===n||n.node.off(j.EventType.MOUSE_DOWN,this.onTouchStart)):null===(i=this.game)||void 0===i||i.node.off(j.EventType.TOUCH_START,this.onTouchStart)}},{key:"load",value:function(){if(this.unlistenInputEvents(),GameCore.Utils.Valid.isDebugger()){var n=this.manager.createLoadingState();this.manager.change(n)}}},{key:"initialize",value:function(){}},{key:"ready",value:function(){}},{key:"play",value:function(){this.unlistenInputEvents();var n=this.manager.createPlayingState();this.manager.change(n)}},{key:"death",value:function(){if(this.unlistenInputEvents(),GameCore.Utils.Valid.isDebugger()){var n=this.manager.createDeathState();this.manager.change(n)}}},{key:"finish",value:function(){}},{key:"update",value:function(){}},{key:"logLevelStartAnalytics",value:function(){vc.levelStart(1,0,rd)}}]),r}(y9);A._RF.pop(),A._RF.push({},"946848BySlM54Wly5+1otNa","EndlessStateManager",void 0);var vp,vd,vy,vv,vf,vm,vg,vb,vS,vk,vC=(0,P.ccclass)("EndlessStateManager")(vu=function(n){i(r,n);var f=a(r);function r(){return o(this,r),f.apply(this,arguments)}return y(r,[{key:"init",value:function(){this.state=new vr(this)}},{key:"change",value:function(n){this.state=n}},{key:"load",value:function(){this.state.load()}},{key:"initialize",value:function(){this.state.initialize()}},{key:"isInitialize",value:function(){return _instanceof(this.state,va)}},{key:"ready",value:function(){this.state.ready()}},{key:"isReady",value:function(){return _instanceof(this.state,vh)}},{key:"play",value:function(){this.state.play()}},{key:"isPlaying",value:function(){return _instanceof(this.state,vl)}},{key:"death",value:function(){this.state.death()}},{key:"isFailed",value:function(){return _instanceof(this.state,ve)}},{key:"finish",value:function(){this.state.finish()}},{key:"isFinished",value:function(){return _instanceof(this.state,vi)}},{key:"update",value:function(n){this.state&&this.state.update(n)}},{key:"createInitializeState",value:function(){return new va(this)}},{key:"createLoadingState",value:function(){return new vr(this)}},{key:"createReadyState",value:function(){return new vh(this)}},{key:"createPlayingState",value:function(){return new vl(this)}},{key:"createDeathState",value:function(){return new ve(this)}},{key:"createFinishState",value:function(){return new vi(this)}}]),r}(O))||vu;A._RF.pop(),A._RF.push({},"78746Q4viBIlbRROK4J1bSl","Burst",void 0);var vw,vE,vT,v_,vA,vR,vP,vB,vL,vD,vO,vI,vN,vF,vG,vM,vz=P.ccclass,vx=P.property,vU=(vp=vz("Burst"),vd=vx($),vy=vx(D),vv=vx($),vf=vx(D),vp((vg=g((vm=function(){function e(){o(this,e),b(this,"time",vg,this),b(this,"repeatCount",vb,this),b(this,"repeatInterval",vS,this),b(this,"count",vk,this),this.remainingCount=0,this.curTime=0}return y(e,[{key:"update",value:function(n,i){if(0===this.remainingCount&&(this.remainingCount=this.repeatCount,this.curTime=this.time),this.remainingCount>0){var a=eP(n.time-n.startDelay.evaluate(0,1),n.duration)-i;a=a>0?a:0;var o=eP(n.time-n.startDelay.evaluate(0,1),n.duration);this.curTime>=a&&this.curTime<o&&(n.emit(this.count,i-(o-this.curTime)),this.curTime+=this.repeatInterval,--this.remainingCount)}}},{key:"reset",value:function(){this.remainingCount=0,this.curTime=0}}]),e}()).prototype,"time",[vd],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),vb=g(vm.prototype,"repeatCount",[vy],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),vS=g(vm.prototype,"repeatInterval",[vv],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),vk=g(vm.prototype,"count",[vf],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),vm))||vm);A._RF.pop(),A._RF.push({},"00eb3NBo0tM/qcD6ViMjx0A","CurveRange",void 0);var vH,vj,vV,vW,vq,vK,vY,vJ,vZ,vX,vQ,v$,v0,v1,v2,v3,v4=P.ccclass,v5=P.property,v6=X({Constant:0,Curve:1,TwoCurves:2,TwoConstants:3}),v7=(vw=v4("CurveRange"),vE=v5({type:X(v6)}),vT=v5({visible:function(){return this.mode===v6.Constant}}),v_=v5({visible:function(){return this.mode===v6.Curve}}),vA=v5({visible:function(){return this.mode===v6.TwoCurves}}),vR=v5({visible:function(){return this.mode===v6.TwoCurves}}),vP=v5({visible:function(){return this.mode===v6.TwoConstants}}),vB=v5({visible:function(){return this.mode===v6.TwoConstants}}),vw((vD=g((vL=function(){function e(){o(this,e),b(this,"mode",vD,this),b(this,"constant",vO,this),b(this,"spline",vI,this),b(this,"splineMin",vN,this),b(this,"splineMax",vF,this),b(this,"constantMin",vG,this),b(this,"constantMax",vM,this),this.spline.assignSorted([0,1],[0,1]),this.splineMin.assignSorted([0,1],[0,1]),this.splineMax.assignSorted([0,1],[0,1])}return y(e,[{key:"evaluate",value:function(n,i){switch(this.mode){case v6.Curve:return this.spline.evaluate(n);case v6.TwoCurves:return eB(this.splineMin.evaluate(n),this.splineMax.evaluate(n),i);case v6.TwoConstants:return eB(this.constantMin,this.constantMax,i);default:return this.constant}}},{key:"getMax",value:function(){switch(this.mode){case v6.Curve:return 1;case v6.TwoConstants:return this.constantMax;case v6.TwoCurves:return 1;default:return this.constant}}},{key:"isZero",value:function(){switch(this.mode){case v6.Curve:return eL(1,0,eD);case v6.TwoConstants:return eL(Math.max(Math.abs(this.constantMax),Math.abs(this.constantMin)),0,eD);case v6.TwoCurves:return eL(1,0,eD);default:return eL(this.constant,0,eD)}}}]),e}()).prototype,"mode",[vE],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return v6.Constant}}),vO=g(vL.prototype,"constant",[vT],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),vI=g(vL.prototype,"spline",[v_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new eO}}),vN=g(vL.prototype,"splineMin",[vA],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new eO}}),vF=g(vL.prototype,"splineMax",[vR],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new eO}}),vG=g(vL.prototype,"constantMin",[vP],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),vM=g(vL.prototype,"constantMax",[vB],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),vL))||vL);A._RF.pop(),A._RF.push({},"3fe5eBRNTJFCZgeD7SqFSh5","GradientRange",void 0);var v9=P.ccclass,v8=P.property,fe=X({Color:0,Gradient:1,TwoColors:2,TwoGradients:3,RandomColor:4}),fn=new q,fi=new q,fa=(vH=v9("GradientRange"),vj=v8({type:X(fe)}),vV=v8({visible:function(){return this.mode===fe.Color}}),vW=v8({visible:function(){return this.mode===fe.TwoColors}}),vq=v8({visible:function(){return this.mode===fe.TwoColors}}),vK=v8({visible:function(){return this.mode===fe.Gradient||this.mode===fe.RandomColor}}),vY=v8({visible:function(){return this.mode===fe.TwoGradients}}),vJ=v8({visible:function(){return this.mode===fe.TwoGradients}}),vH((vX=g((vZ=function(){function e(){o(this,e),b(this,"mode",vX,this),b(this,"color",vQ,this),b(this,"colorMin",v$,this),b(this,"colorMax",v0,this),b(this,"gradient",v1,this),b(this,"gradientMin",v2,this),b(this,"gradientMax",v3,this),this._color=q.WHITE.clone()}return y(e,[{key:"evaluate",value:function(n,i){switch(this.mode){case fe.Color:return this.color;case fe.TwoColors:return q.lerp(this._color,this.colorMin,this.colorMax,i),this._color;case fe.RandomColor:return this.gradient.getRandomColor(this._color);case fe.Gradient:return this.gradient.evaluateFast(this._color,n);case fe.TwoGradients:return q.lerp(this._color,this.gradientMin.evaluateFast(fn,n),this.gradientMax.evaluateFast(fi,n),i),this._color;default:return this.color}}}]),e}()).prototype,"mode",[vj],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return fe.Color}}),vQ=g(vZ.prototype,"color",[vV],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return q.WHITE.clone()}}),v$=g(vZ.prototype,"colorMin",[vW],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return q.WHITE.clone()}}),v0=g(vZ.prototype,"colorMax",[vq],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return q.WHITE.clone()}}),v1=g(vZ.prototype,"gradient",[vK],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new eI}}),v2=g(vZ.prototype,"gradientMin",[vY],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new eI}}),v3=g(vZ.prototype,"gradientMax",[vJ],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new eI}}),vZ))||vZ);function Mb(n,i,a,o){(function(n,i){eo.set(n,Math.cos(i),Math.sin(i))})(n,o),n.z=0,U.multiplyScalar(n,n,i+(a-i)*eF())}function zb(n){switch(n.mode){case v6.TwoCurves:case v6.TwoConstants:return!0;default:return!1}}A._RF.pop(),A._RF.push({},"1a4c4Z/fWpFuL5b3emrVLug","ParticleFunction",void 0),A._RF.pop(),A._RF.push({},"370cbFjxn9GKJzqbTOhQZiA","ParticleSimulator",void 0);var fo=new U(0,0,0),fr=function(){function e(){o(this,e),this.pos=new U(0,0,0),this.color=new q(255,255,255,255),this.size=new U(0,0,0),this.startSize=new U(0,0,0),this.rotation=new U(0,0,0),this.startLifetime=0,this.remainingLifetime=0,this.randomSeed=0,this.velocity=new U(0,0),this.width=0,this.height=0}return y(e,[{key:"init",value:function(){this.pos.set(fo),this.remainingLifetime=0,this.startLifetime=0,this.startSize.set(fo),this.startColor=q.WHITE.clone(),this.velocity.set(fo),this.randomSeed=0}}]),e}(),fs=new(function(n){i(r,n);var f=a(r);function r(){return o(this,r),f.apply(this,arguments)}return y(r,[{key:"get",value:function(){return this._get()||new fr}}]),r}(ez.Pool))(function(n){n.pos.set(fo),n.color._val=0xffffffff,n.size.set(fo),n.rotation.set(fo)},1024),fl=function(){function e(n){o(this,e),this.particles=[],this.active=!1,this.uvFilled=0,this.renderData=new eU,this.sys=n,this.particles=[],this.active=!1,this.uvFilled=0}return y(e,[{key:"stop",value:function(){this.active=!1}},{key:"reset",value:function(){this.active=!0;var n,i=this.particles,a=m(i);try{for(a.s();!(n=a.n()).done;){var o=n.value;fs.put(o)}}catch(n){a.e(n)}finally{a.f()}i.length=0,this.renderData.resize(0,0)}},{key:"emitParticle",value:function(){var n=fs.get();return this.particles.push(n),n}},{key:"updateUVs",value:function(n){var i=this.renderData;if(i&&this.sys){var a=i.vData,o=this.sys.spriteFrame;if(!o)return;for(var y=o.uv,f=n?0:this.uvFilled,m=this.particles.length,g=f;g<m;g++){var b=9*g*4;a[b+3]=y[0],a[b+4]=y[1],a[b+12]=y[2],a[b+13]=y[3],a[b+21]=y[4],a[b+22]=y[5],a[b+30]=y[6],a[b+31]=y[7]}this.uvFilled=m}}},{key:"updateParticleBuffer",value:function(n,i,a,o){var y=a.vData,f=i.x,m=i.y,g=i.z,b=n.width*n.size.x/2,k=n.height*n.size.y/2,C=n.rotation.x||0,w=n.rotation.y||0,E=n.rotation.z||0;if(0===C&&0===w&&0===E)y[o]=f-b,y[o+1]=m-k,y[o+2]=g,y[o+9]=f+b,y[o+10]=m-k,y[o+11]=g,y[o+18]=f-b,y[o+19]=m+k,y[o+20]=g,y[o+27]=f+b,y[o+28]=m+k,y[o+29]=g;else{var d=function(n,i,a){var o=i*R-a*P,y=i*P+a*R,f=n*B+y*L;return new U(f*D-o*O,f*O+o*D,y*B-n*L)},T=-ex.degreesToRadians(C),_=-ex.degreesToRadians(w),A=-ex.degreesToRadians(E),R=Math.cos(T),P=Math.sin(T),B=Math.cos(_),L=Math.sin(_),D=Math.cos(A),O=Math.sin(A),I=[d(-b,-k,0),d(b,-k,0),d(-b,k,0),d(b,k,0)];y[o]=I[0].x+f,y[o+1]=I[0].y+m,y[o+2]=I[0].z+g,y[o+9]=I[1].x+f,y[o+10]=I[1].y+m,y[o+11]=I[1].z+g,y[o+18]=I[2].x+f,y[o+19]=I[2].y+m,y[o+20]=I[2].z+g,y[o+27]=I[3].x+f,y[o+28]=I[3].y+m,y[o+29]=I[3].z+g}q.toArray(y,n.color,o+5),q.toArray(y,n.color,o+14),q.toArray(y,n.color,o+23),q.toArray(y,n.color,o+32)}},{key:"step",value:function(n){var i=this.sys.node,a=this.particles;i.updateWorldTransform(),this.active&&this.sys.emitting(n);var o=this.renderData,y=a.length;o.reset(),this.requestData(4*y,6*y),y>this.uvFilled&&this.updateUVs();for(var f=0;f<a.length;){var m=a[f];if(m){if(m.remainingLifetime-=n,m.remainingLifetime>0){var g=9*f*4;this.updateParticleBuffer(m,m.pos,o,g),++f}else{var b=a[f];f!==a.length-1&&(a[f]=a[a.length-1]),fs.put(b),a.length--,o.resize(o.vertexCount-4,o.indexCount-6)}}}this.renderData.material=this.sys.getRenderMaterial(0),this.renderData.frame=this.sys.spriteFrame,o.setRenderDrawInfoAttributes()}},{key:"requestData",value:function(n,i){var a=this.renderData.indexCount;this.renderData.request(n,i);for(var o=this.renderData.indexCount/6,y=this.renderData.iData,f=a;f<o;f++){var m=4*f;y[a++]=m,y[a++]=m+1,y[a++]=m+2,y[a++]=m+1,y[a++]=m+3,y[a++]=m+2}}},{key:"initDrawInfo",value:function(){this.renderData.setRenderDrawInfoAttributes()}}]),e}();A._RF.pop(),A._RF.push({},"c2fc2/T2apMGZCPX5a4abo/","ModuleRandSeed",void 0),A._RF.pop(),A._RF.push({},"39785+APfBJU5kvcdjZGiLr","ColorOvertimeModule",void 0);var fu,fc,fh,fp,fd,fy,fv,ff,fm,fg,fb,fS,fk,fC,fw=P.ccclass,fE=P.property,fT=(fu=fw("ColorOvertimeModule"),fc=fE({type:z}),fh=fE({type:fa}),fu((fd=g((fp=function(){function e(){o(this,e),b(this,"enable",fd,this),b(this,"color",fy,this)}return y(e,[{key:"update",value:function(n){if(this.enable){n.color.set(n.startColor);var i=function(n){switch(n.mode){case fe.TwoGradients:case fe.TwoColors:return!0;default:return!1}}(this.color)?eH(n.randomSeed+91041):0;n.color.multiply(this.color.evaluate(1-n.remainingLifetime/n.startLifetime,i))}}}]),e}()).prototype,"enable",[fc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fy=g(fp.prototype,"color",[fh],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new fa}}),fp))||fp);A._RF.pop(),A._RF.push({},"c397apirpxFfJTJN1KLAcGi","LimitVelocityOvertimeModule",void 0);var f_,fA,fR,fP,fB,fL,fD,fO,fI,fN,fF,fG,fM=P.ccclass,fz=P.property,fx=(fv=fM("LimitVelocityOvertimeModule"),ff=fz({type:z}),fm=fz({type:v7}),fg=fz({type:v7}),fv((fS=g((fb=function(){function e(){o(this,e),b(this,"enable",fS,this),b(this,"limit",fk,this),b(this,"dampen",fC,this),this.limit.constant=500,this.dampen.constant=.2}return y(e,[{key:"update",value:function(n,i){if(this.enable){var a=1-n.remainingLifetime/n.startLifetime,o=n.velocity.clone().normalize(),y=zb(this.limit)?eH(n.randomSeed+23541):0,f=zb(this.dampen)?eH(n.randomSeed+23541+1):0,m=n.velocity.length(),g=this.limit.evaluate(a,y),b=this.dampen.evaluate(a,f);n.velocity=o.multiplyScalar(this.dampenBeyondLimit(m,g,b,i))}}},{key:"dampenBeyondLimit",value:function(n,i,a,o){if(n<=i)return n;var y=1-Math.exp(-a*o);return el.lerp(n,i,y)}}]),e}()).prototype,"enable",[ff],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fk=g(fb.prototype,"limit",[fm],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new v7}}),fC=g(fb.prototype,"dampen",[fg],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new v7}}),fb))||fb);A._RF.pop(),A._RF.push({},"c6cfbhYVctHt53aUXC4oSWy","RotationOvertimeModule",void 0);var fU,fH,fj,fV,fW,fq,fK,fY,fJ,fZ,fX,fQ,f$,f0,f1,f2,f3,f4,f5,f6,f7,f9,f8=P.ccclass,me=P.property,mn=(f_=f8("RotationOvertimeModule"),fA=me({type:z}),fR=me(z),fP=me({type:v7,visible:function(){return this.separateAxes}}),fB=me({type:v7,visible:function(){return this.separateAxes}}),fL=me({type:v7}),f_((fO=g((fD=function(){function e(){o(this,e),b(this,"enable",fO,this),b(this,"separateAxes",fI,this),b(this,"x",fN,this),b(this,"y",fF,this),b(this,"z",fG,this)}return y(e,[{key:"update",value:function(n,i){if(this.enable){var a=1-n.remainingLifetime/n.startLifetime,o=n.randomSeed+125292,y=zb(this.z)?eH(o):0,f=this.z.evaluate(a,y)*i,m=0,g=0;if(this.separateAxes){var b=zb(this.x)?eH(o):0,k=zb(this.y)?eH(o):0;m=this.x.evaluate(a,b)*i,g=this.y.evaluate(a,k)*i}n.rotation.add3f(m,g,f)}}}]),e}()).prototype,"enable",[fA],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fI=g(fD.prototype,"separateAxes",[fR],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),fN=g(fD.prototype,"x",[fP],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new v7}}),fF=g(fD.prototype,"y",[fB],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new v7}}),fG=g(fD.prototype,"z",[fL],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new v7}}),fD))||fD);A._RF.pop(),A._RF.push({},"f63cd4ScDJFPrnTLNT4+QKu","ShapeModule",void 0);var mi,ma,mo,mr,ms,ml,mu,mc,mh,mp,md,my,mv=P.ccclass,mf=P.property,mm=X({Circle:0,Rectangle:1}),mg=X({Base:0,Edge:1}),wk=function(){return this.shape===mm.Circle},Ek=function(){return this.shape===mm.Rectangle},mb=[0,0],mS=(fU=mv("ShapeModule"),fH=mf({type:X(mm)}),fj=mf({type:X(mg),visible:Ek}),fV=mf({}),fW=mf({}),fq=mf({}),fK=mf({range:[0,360],visible:wk}),fY=mf({range:[-360,360],visible:wk}),fJ=mf({min:0,visible:wk}),fZ=mf({range:[0,1],step:.01,visible:wk}),fX=mf({visible:Ek}),fU((f$=g((fQ=function(){function e(){o(this,e),b(this,"shape",f$,this),b(this,"emitFrom",f0,this),b(this,"position",f1,this),b(this,"rotation",f2,this),b(this,"scale",f3,this),b(this,"arc",f4,this),b(this,"angle",f5,this),b(this,"radius",f6,this),b(this,"radiusThickness",f7,this),b(this,"rectangleThickness",f9,this)}return y(e,[{key:"emit",value:function(n){switch(this.shape){case mm.Circle:this.circleEmit(this.radius,this.radiusThickness,ej(this.generateArcAngle()),n);break;case mm.Rectangle:this.rectangleEmit(this.emitFrom,this.rectangleThickness,n)}}},{key:"circleEmit",value:function(n,i,a,o){var y=o.pos;Mb(y,n*(1-i),n,a+ej(this.angle)),o.velocity=y.clone().normalize()}},{key:"rectangleEmit",value:function(n,i,a){var o,y=a.pos;switch(n){case mg.Base:eo.set(y,eG(-i.x,i.x),eG(-i.y,i.y));break;case mg.Edge:mb[0]=eG(-1,1),mb[1]=(0===(o=eG(-1,1))&&o++,eN.sign(o)),function(n){for(var i=0;i<n.length;i++){var a=i+eM(0,n.length-i),o=n[a];n[a]=n[i],n[i]=o}}(mb),this.applyRectThickness(mb,i),eo.set(y,mb[0],mb[1])}a.velocity=y.clone().normalize()}},{key:"generateArcAngle",value:function(){return eG(0,this.arc)}},{key:"applyRectThickness",value:function(n,i){i.x>0&&(n[0]*=i.x),i.y>0&&(n[1]*=i.y)}},{key:"gizmo",value:function(n){switch(n.strokeColor.fromHEX("#46C4FFB0"),n.fillColor.fromHEX("#46C4FF77"),n.lineWidth=8,this.shape){case mm.Circle:this.gizmoCircle(n);break;case mm.Rectangle:this.gizmoRectangle(n)}}},{key:"gizmoCircle",value:function(n){n.clear();var i=this.angle,a=this.angle+this.arc;if(this.createArcPath(n,this.radius,i,a),this.createArcPath(n,this.radius*(1-this.radiusThickness),i,a),this.arc<360&&this.radius>0){var o=this.radius*Math.cos(ej(this.angle)),y=this.radius*Math.sin(ej(this.angle)),f=this.radius*Math.cos(ej(this.arc+this.angle)),m=this.radius*Math.sin(ej(this.arc+this.angle));n.moveTo(o,y),n.lineTo(0,0),n.moveTo(f,m),n.lineTo(0,0)}n.stroke()}},{key:"gizmoRectangle",value:function(n){n.clear();var i=this.rectangleThickness.x,a=this.rectangleThickness.y;n.moveTo(i,a),n.lineTo(-i,a),n.lineTo(-i,-a),n.lineTo(i,-a),n.close(),n.stroke()}},{key:"createArcPath",value:function(n,i,a,o){if(!(i<=0))for(var y=(o-a)/48,f=0;f<=48;f++){var m=a+f*y,g=i*Math.cos(ej(m)),b=i*Math.sin(ej(m));0===f?n.moveTo(g,b):n.lineTo(g,b)}}}]),e}()).prototype,"shape",[fH],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return mm.Circle}}),f0=g(fQ.prototype,"emitFrom",[fj],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return mg.Base}}),f1=g(fQ.prototype,"position",[fV],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new U(0,0,0)}}),f2=g(fQ.prototype,"rotation",[fW],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new U(0,0,0)}}),f3=g(fQ.prototype,"scale",[fq],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new U(1,1,1)}}),f4=g(fQ.prototype,"arc",[fK],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 360}}),f5=g(fQ.prototype,"angle",[fY],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 25}}),f6=g(fQ.prototype,"radius",[fJ],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),f7=g(fQ.prototype,"radiusThickness",[fZ],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),f9=g(fQ.prototype,"rectangleThickness",[fX],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new eo(20,50)}}),fQ))||fQ);A._RF.pop(),A._RF.push({},"1b7c1WztGdLzKO8gh4ulm2c","SizeOvertimeModule",void 0);var mk,mC,mw,mE,mT,m_,mA,mR,mP=P.ccclass,mB=P.property,mL=(mi=mP("SizeOvertimeModule"),ma=mB({type:z}),mo=mB(z),mr=mB({type:v7,visible:function(){return!this.separateAxes}}),ms=mB({type:v7,visible:function(){return this.separateAxes}}),ml=mB({type:v7,visible:function(){return this.separateAxes}}),mi((mc=g((mu=function(){function e(){o(this,e),b(this,"enable",mc,this),b(this,"separateAxes",mh,this),b(this,"size",mp,this),b(this,"x",md,this),b(this,"y",my,this),this.size.constant=1,this.x.constant=1,this.y.constant=1}return y(e,[{key:"update",value:function(n){if(this.enable){var i=1-n.remainingLifetime/n.startLifetime,a=n.randomSeed+39825;if(this.separateAxes){var o=zb(this.x)?eH(a):0,y=zb(this.y)?eH(a):0;n.size.x=n.startSize.x*this.x.evaluate(i,o),n.size.y=n.startSize.y*this.y.evaluate(i,y)}else{var f=zb(this.size)?eH(a):0,m=this.size.evaluate(i,f);U.multiplyScalar(n.size,n.startSize,m)}}}}]),e}()).prototype,"enable",[ma],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),mh=g(mu.prototype,"separateAxes",[mo],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),mp=g(mu.prototype,"size",[mr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new v7}}),md=g(mu.prototype,"x",[ms],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new v7}}),my=g(mu.prototype,"y",[ml],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new v7}}),mu))||mu);A._RF.pop(),A._RF.push({},"f6ad5Yz6wpE2ZzModn16CYQ","VelocityOvertimeModule",void 0);var mD,mO,mI,mN,mF,mG,mM,mz,mx,mU,mH,mj,mV,mW,mq,mK,mY,mJ,mZ,mX,mQ,m$,m0,m1,m2,m3,m4,m5,m6,m7,m9,m8,ge,gn,gi,ga,go,gr,gs,gl,gu,gc,gh,gp,gd,gy,gv,gf,gm,gg,gb,gS,gk,gC,gw,gE,g_,gA,gR,gP,gB,gL=P.ccclass,gD=P.property,gO=(mk=gL("VelocityOvertimeModule"),mC=gD({type:z}),mw=gD({type:v7}),mE=gD({type:v7}),mk((m_=g((mT=function(){function e(){o(this,e),b(this,"enable",m_,this),b(this,"x",mA,this),b(this,"y",mR,this),this._temp_v3=new U,this.x.constant=0,this.y.constant=0}return y(e,[{key:"update",value:function(n,i){if(this.enable){var a=1-n.remainingLifetime/n.startLifetime,o=zb(this.x)?eH(n.randomSeed+197866):0,y=zb(this.y)?eH(n.randomSeed+156497):0,f=U.set(this._temp_v3,this.x.evaluate(a,o),this.y.evaluate(a,y),0);n.velocity.add(f.multiplyScalar(i))}}}]),e}()).prototype,"enable",[mC],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),mA=g(mT.prototype,"x",[mw],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new v7}}),mR=g(mT.prototype,"y",[mE],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new v7}}),mT))||mT);A._RF.pop(),A._RF.push({},"10bc3IfFqBLtpSgVri/NVeX","ParticleSystem",void 0);var gI,gN,gF,gG,gM,gz,gx=P.ccclass,gU=P.property,gH=P.executeInEditMode,gj=P.disallowMultiple,gV=P.playOnFocus,gW=eV.Attr.setClassAttr,gq=X({World:0,Local:1}),gK=(mD=gx("ParticleSystem"),mO=gH(!0),mI=gj(!0),mN=gV(!0),mF=gU({}),mG=gU({formerlySerializedAs:"preview"}),mM=gU(z),mz=gU({type:X(gq)}),mx=gU({formerlySerializedAs:"simulationSpace"}),mU=gU($),mH=gU(z),mj=gU({type:v7}),mV=gU({type:v7}),mW=gU(fa),mq=gU(z),mK=gU({type:v7,formerlySerializedAs:"startSize"}),mY=gU({type:v7,visible:function(){return this.startSize2D}}),mJ=gU({type:v7}),mZ=gU(z),mX=gU({type:v7,visible:function(){return this.startRotation3D}}),mQ=gU({type:v7,visible:function(){return this.startRotation3D}}),m$=gU({type:v7,formerlySerializedAs:"startRotation"}),m0=gU({type:v7}),m1=gU({type:v7}),m2=gU({type:mS}),m3=gU({type:gO}),m4=gU({type:mL}),m5=gU({type:mn}),m6=gU({type:fT}),m7=gU({type:fx}),m9=gU(vU),m8=gU({serializable:!0}),ge=gU({type:eu}),mD(gn=mO(gn=mI(gn=mN((g((gi=function(n){i(s,n);var f=a(s);function s(){var n;return o(this,s),n=f.call(this),b(n,"_preview",ga,k(n)),b(n,"playOnAwake",go,k(n)),b(n,"_simulationSpace",gr,k(n)),b(n,"duration",gs,k(n)),b(n,"loop",gl,k(n)),b(n,"startDelay",gu,k(n)),b(n,"startLifetime",gc,k(n)),b(n,"startColor",gh,k(n)),b(n,"startSize2D",gp,k(n)),b(n,"startSizeX",gd,k(n)),b(n,"startSizeY",gy,k(n)),b(n,"startSpeed",gv,k(n)),b(n,"startRotation3D",gf,k(n)),b(n,"startRotationX",gm,k(n)),b(n,"startRotationY",gg,k(n)),b(n,"startRotationZ",gb,k(n)),b(n,"gravityModifier",gS,k(n)),b(n,"rateOverTime",gk,k(n)),b(n,"shapeModule",gC,k(n)),b(n,"velocityOvertimeModule",gw,k(n)),b(n,"sizeOvertimeModule",gE,k(n)),b(n,"rotationOvertimeModule",g_,k(n)),b(n,"colorOvertimeModule",gA,k(n)),b(n,"limitVelocityOvertimeModule",gR,k(n)),b(n,"bursts",gP,k(n)),b(n,"_spriteFrame",gB,k(n)),n._renderSpriteFrame=null,n.time=0,n.emitRateTimeCounter=0,n.isPlaying=!1,n.isStopped=!0,n.isEmitting=!1,n.startLifetime.constant=5,n.startSizeX.constant=1,n.startSpeed.constant=5,n.rateOverTime.constant=10,n.initProperties(),n}return y(s,[{key:"preview",get:function(){return this._preview},set:function(n){this._preview=n,n?this._startPreview():this._stopPreview()}},{key:"simulationSpace",get:function(){return this._simulationSpace},set:function(n){this._simulationSpace=n,this._updateMaterial(),this._updateSimulationSpace()}},{key:"spriteFrame",get:function(){return this._spriteFrame},set:function(n){this._renderSpriteFrame!==n&&(this._renderSpriteFrame=n,n&&!n._uuid||(this._spriteFrame=n),this._applySpriteFrame())}},{key:"assembler",get:function(){return this._assembler}},{key:"onEnable",value:function(){w(E(s.prototype),"onEnable",this).call(this),this._updateMaterial(),this._updateSimulationSpace()}},{key:"onDestroy",value:function(){w(E(s.prototype),"onDestroy",this).call(this)}},{key:"initProperties",value:function(){this._simulator=new fl(this)}},{key:"onFocusInEditor",value:function(){this._startPreview()}},{key:"onLostFocusInEditor",value:function(){this._stopPreview()}},{key:"_startPreview",value:function(){this._preview&&this.play()}},{key:"_stopPreview",value:function(){this._preview||(this.play(),this.stop())}},{key:"__preload",value:function(){w(E(s.prototype),"__preload",this).call(this),this.spriteFrame&&!this._renderSpriteFrame&&this._applySpriteFrame(),this.playOnAwake&&this.play()}},{key:"start",value:function(){this.node.position=new U(this.node.position.x,this.node.position.y,100)}},{key:"play",value:function(){this.isStopped&&(this.isStopped=!1),this.time=0,this.isPlaying=!0,this.isStopped=!1,this.isEmitting=!0,this._simulator.reset(),this.markForUpdateRenderData()}},{key:"stop",value:function(){this.isPlaying&&(this.isPlaying=!1),this.isEmitting&&(this.isEmitting=!1),this.isStopped=!0,this._simulator.reset(),this._simulator.stop()}},{key:"_flushAssembler",value:function(){var n=eW.Assembler.getAssembler(this);this._assembler!==n&&(this._assembler=n),this._assembler&&this._assembler.createData&&(this._simulator.renderData=this._assembler.createData(this),this._simulator.renderData.particleInitRenderDrawInfo(this.renderEntity),this._simulator.initDrawInfo())}},{key:"_applySpriteFrame",value:function(){this._renderSpriteFrame=this._renderSpriteFrame||this._spriteFrame,this._renderSpriteFrame?this._renderSpriteFrame.texture&&(this._simulator&&this._simulator.updateUVs(!0),this._updateMaterial(),this.isStopped=!1,this.markForUpdateRenderData()):this.stop()}},{key:"_updateMaterial",value:function(){if(this._customMaterial){this.setSharedMaterial(this._customMaterial,0);var n=this.getRenderMaterial(0).passes[0].blendState.targets[0];n&&(this._dstBlendFactor=n.blendDst,this._srcBlendFactor=n.blendSrc)}var i=this.getMaterialInstance(0);i&&i.recompileShaders({USE_LOCAL:this.simulationSpace===gq.Local}),i&&i.passes.length>0&&this._updateBlendFunc()}},{key:"_finishedSimulation",value:function(){this.stop(),this.markForUpdateRenderData()}},{key:"_canRender",value:function(){return w(E(s.prototype),"_canRender",this).call(this)&&!this.isStopped&&null!==this._renderSpriteFrame&&void 0!==this._renderSpriteFrame}},{key:"_render",value:function(n){this.simulationSpace===gq.Local?n.commitComp(this,this._simulator.renderData,this._renderSpriteFrame,this._assembler,this.node):this.simulationSpace===gq.World&&n.commitComp(this,this._simulator.renderData,this._renderSpriteFrame,this._assembler,null)}},{key:"_updateSimulationSpace",value:function(){this.simulationSpace===gq.Local?(this._renderEntity.setRenderTransform(this.node),this._renderEntity.setUseLocal(!0)):this.simulationSpace===gq.World&&(this._renderEntity.setRenderTransform(null),this._renderEntity.setUseLocal(!1))}},{key:"lateUpdate",value:function(n){this.isPlaying&&(this.time+=n,this._simulator.step(n))}},{key:"emitting",value:function(n){var i=this,a=this.startDelay.evaluate(0,1);if(this.time>a&&this.time>this.duration+a&&(this.loop||(this.isEmitting=!1)),this.isEmitting){if(this.emitRateTimeCounter+=this.rateOverTime.evaluate(this.time/this.duration,1)*n,this.emitRateTimeCounter>1){var o=Math.floor(this.emitRateTimeCounter);this.emitRateTimeCounter-=o,this.emit(o,n)}var y,f=m(this.bursts);try{for(f.s();!(y=f.n()).done;)y.value.update(this,n)}catch(n){f.e(n)}finally{f.f()}}var g=this.gravityModifier.evaluate(this.time/this.duration,1);0!==this._simulator.particles.length||this.isEmitting||!this.isPlaying?this._simulator.particles.forEach(function(a,o){i.sizeOvertimeModule.update(a),i.rotationOvertimeModule.update(a,n),i.colorOvertimeModule.update(a),i.velocityOvertimeModule.update(a,n),i.applyGravityModifier(a,g),i.limitVelocityOvertimeModule.update(a,n),a.pos.add(a.velocity.clone().multiplyScalar(n))}):this._finishedSimulation()}},{key:"emit",value:function(n,i){if(null!==this.spriteFrame)for(var a=this.time%this.duration/this.duration,o=0;o<n;o++){var y=this._simulator.emitParticle();if(y.init(),this.shapeModule.emit(y),this.simulationSpace===gq.World){var f=this.node.worldMatrix;y.pos.x+=f.m12,y.pos.y+=f.m13}var m=this.startSpeed.evaluate(a,this.rand());y.velocity.multiplyScalar(m),y.width=this.spriteFrame.width,y.height=this.spriteFrame.height;var g=this.startSizeX.evaluate(a,this.rand()),b=this.startSize2D?new U(g,this.startSizeY.evaluate(a,this.rand()),1):new U(g,g,1);y.startSize=b.clone(),y.size=b.clone();var k=this.startRotationZ.evaluate(a,this.rand()),C=this.startRotation3D?new U(this.startRotationX.evaluate(a,this.rand()),this.startRotationY.evaluate(a,this.rand()),k):new U(0,0,k);y.rotation=C,y.startColor=this.startColor.evaluate(a,this.rand()).clone(),y.color=y.startColor.clone(),y.startLifetime=this.startLifetime.evaluate(a,this.rand())+i,y.remainingLifetime=y.startLifetime,y.randomSeed=eM(0,233280)}}},{key:"applyGravityModifier",value:function(n,i){n.velocity.add(new U(0,-9.8*i,0))}},{key:"rand",value:function(){return eH(eM(0,eN.INT_MAX))}}]),s}(eq)).prototype,"preview",[mF],Object.getOwnPropertyDescriptor(gi.prototype,"preview"),gi.prototype),ga=g(gi.prototype,"_preview",[mG],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),go=g(gi.prototype,"playOnAwake",[mM],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),g(gi.prototype,"simulationSpace",[mz],Object.getOwnPropertyDescriptor(gi.prototype,"simulationSpace"),gi.prototype),gr=g(gi.prototype,"_simulationSpace",[mx],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return gq.Local}}),gs=g(gi.prototype,"duration",[mU],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),gl=g(gi.prototype,"loop",[mH],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),gu=g(gi.prototype,"startDelay",[mj],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new v7}}),gc=g(gi.prototype,"startLifetime",[mV],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new v7}}),gh=g(gi.prototype,"startColor",[mW],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new fa}}),gp=g(gi.prototype,"startSize2D",[mq],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),gd=g(gi.prototype,"startSizeX",[mK],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new v7}}),gy=g(gi.prototype,"startSizeY",[mY],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new v7}}),gv=g(gi.prototype,"startSpeed",[mJ],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new v7}}),gf=g(gi.prototype,"startRotation3D",[mZ],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),gm=g(gi.prototype,"startRotationX",[mX],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new v7}}),gg=g(gi.prototype,"startRotationY",[mQ],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new v7}}),gb=g(gi.prototype,"startRotationZ",[m$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new v7}}),gS=g(gi.prototype,"gravityModifier",[m0],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new v7}}),gk=g(gi.prototype,"rateOverTime",[m1],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new v7}}),gC=g(gi.prototype,"shapeModule",[m2],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new mS}}),gw=g(gi.prototype,"velocityOvertimeModule",[m3],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new gO}}),gE=g(gi.prototype,"sizeOvertimeModule",[m4],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new mL}}),g_=g(gi.prototype,"rotationOvertimeModule",[m5],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new mn}}),gA=g(gi.prototype,"colorOvertimeModule",[m6],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new fT}}),gR=g(gi.prototype,"limitVelocityOvertimeModule",[m7],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new fx}}),gP=g(gi.prototype,"bursts",[gU,m9],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),gB=g(gi.prototype,"_spriteFrame",[m8],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g(gi.prototype,"spriteFrame",[ge],Object.getOwnPropertyDescriptor(gi.prototype,"spriteFrame"),gi.prototype),gn=gi))||gn)||gn)||gn)||gn);gW(gK,"color","visible",!1),A._RF.pop(),A._RF.push({},"442c2KaGHdNip4TBoeKOOoY","RendererModule",void 0);var gY,gJ=P.ccclass,gZ=P.property;gI=gJ("RendererModule"),gN=gZ(eK),gF=gZ(eu),gI((gM=g((gG=y(function e(){o(this,e),b(this,"material",gM,this),b(this,"spriteFrame",gz,this)})).prototype,"material",[gN],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gz=g(gG.prototype,"spriteFrame",[gF],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gG)),A._RF.pop(),A._RF.push({},"21a9aAlkBtGxKLqip8g0o6l","ParticleSystem2DExtra",void 0);var gX=P.ccclass,gQ=P.disallowMultiple,g$=P.executeInEditMode,g0=P.requireComponent,g1=gX("ParticleSystem2DExtra")(gY=g$(!0)(gY=gQ(!0)(gY=g0(eW)(gY=function(n){i(r,n);var f=a(r);function r(){var n;o(this,r);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return(n=f.call.apply(f,[this].concat(a))).emitParticle=function(i){return function(a){i(a);var o=n.particleSystem._simulator.particles.length,y=n.particleSystem._simulator.particles[o-1];n.initParticle(y)}},n.step=function(i){return function(a){for(var o=n.particleSystem._simulator.particles,y=0;y<o.length;y++){var f=o[y];n.updateParticle(f,a)}i(a)}},n}return y(r,[{key:"__preload",value:function(){this.particleSystem=this.getComponent(eW),this.validateRequiredComponents(),this.overrideFunctions()}},{key:"overrideFunctions",value:function(){var n=this.particleSystem._simulator.emitParticle.bind(this.particleSystem._simulator);this.particleSystem._simulator.emitParticle=this.emitParticle(n);var i=this.particleSystem._simulator.step.bind(this.particleSystem._simulator);this.particleSystem._simulator.step=this.step(i)}},{key:"validateRequiredComponents",value:function(){t_.lazyValidateProperties(this)}}]),r}(O))||gY)||gY)||gY)||gY;A._RF.pop(),A._RF.push({},"9a5a3MgLaRAKbHluGCPsA8j","ExampleParticleSystem2DExtra",void 0),(0,P.ccclass)("ExampleParticleSystem2DExtra")(function(n){i(r,n);var f=a(r);function r(){return o(this,r),f.apply(this,arguments)}return y(r,[{key:"initParticle",value:function(n){n.maxSize=el.randomRange(.25,1)*n.size,n.size=0,n.deltaSize=0,n.cycleDuration=el.randomRange(.4,.6),n.life=n.timeToLive,this.setInitPosition(n.pos)}},{key:"updateParticle",value:function(n,i){this.updateScale(n)}},{key:"setInitPosition",value:function(n){var i=n.x,a=n.y;return n.x=i+el.randomRange(-350,350),n.y=a+el.randomRange(-350,350),n}},{key:"updateScale",value:function(n){var i=1-(n.life-n.timeToLive)%n.cycleDuration/n.cycleDuration;n.size=n.maxSize*Math.sin(i*Math.PI)}}]),r}(g1)),A._RF.pop(),A._RF.push({},"4a9beTdMntC0q9yngb8a2go","BootScene",void 0);var g2,g3,g4=P.ccclass,g5=P.disallowMultiple,g6=GameCore,g7=g6.Events,g9=g6.Configs.Core.StartSDKAfterLoadGame,g8=globalThis.game,be=g8.ads,bt=(g8.player,g8.event);g4("BootScene")(g2=g5(g2=function(f){i(l,f);var m,g=a(l);function l(){var n;o(this,l);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return(n=g.call.apply(g,[this].concat(a))).setupLoadingFullScreen=function(){g9||e9.showLoadingFullScreen(tn.BOOT_SCENE)},n.processWhenGameSdkStarted=function(){n.sendMsGamesDailyNotification()},n.handlePauseAudio=function(){bt.on(g7.VISIBILITY_HIDDEN,n.handleMuteAudio),bt.on(g7.VISIBILITY_VISIBLE,n.handleUnMuteAudio)},n.handleMuteAudio=function(){e2.muteAudio(!0)},n.handleUnMuteAudio=function(){be.isAdFullSizeShowing()||e2.muteAudio(!1)},n}return y(l,[{key:"__preload",value:function(){this.setupAndroidPlatformAds(),this.processCrazyGamesLoadingStart(),this.listenEvents()}},{key:"onLoad",value:function(){this.handlePauseAudio(),this.preloadNotificationScreen(),this.setupLoadingFullScreen()}},{key:"start",value:function(){this.processCrazyGamesLoadingStop(),G.emit(eX.REQUEST_VIEW_RESIZE)}},{key:"listenEvents",value:function(){bt.catchUp(g7.GAME_SDK_STARTED,this.processWhenGameSdkStarted)}},{key:"processCrazyGamesLoadingStart",value:function(){"gameLoadingStart"in GameSDK.extra&&GameSDK.extra.gameLoadingStart()}},{key:"processCrazyGamesLoadingStop",value:function(){"gameLoadingStop"in GameSDK.extra&&GameSDK.extra.gameLoadingStop()}},{key:"setupAndroidPlatformAds",value:function(){}},{key:"sendMsGamesDailyNotification",value:function(){var n=GameSDK.extra;"sendDailyNotificationAsync"in n&&n.sendDailyNotificationAsync().catch(function(n){console.warn("sendMsGamesDailyNotification",n)})}},{key:"preloadNotificationScreen",value:(m=n(function(){return _ts_generator(this,function(n){switch(n.label){case 0:return[4,eZ.preloadPrefab("screens/NotificationScreen")];case 1:return n.sent(),[2]}})}),function(){return m.apply(this,arguments)})}]),l}(O))||g2),A._RF.pop(),A._RF.push({},"c4e30ckJiFBG4VHrF+wikMs","DashboardScene",void 0);var bn,bi=P.ccclass,ba=P.disallowMultiple;bi("DashboardScene")(g3=ba(g3=function(n){i(r,n);var f=a(r);function r(){return o(this,r),f.apply(this,arguments)}return y(r,[{key:"__preload",value:function(){this.validateRequiredComponents()}},{key:"start",value:function(){this.scheduleOnce(this.preloadScenes,1)}},{key:"validateRequiredComponents",value:function(){t_.lazyValidateProperties(this)}},{key:"preloadScenes",value:function(){tt.preloadGameScene()}},{key:"handleSingleButtonClicked",value:function(){tt.switchToGameScene()}},{key:"handleEndlessButtonClicked",value:function(){tt.switchToEndlessScene()}},{key:"handleTestLayoutButtonClicked",value:function(){tt.switchScene(tn.TEST_LAYOUT_SCENE)}}]),r}(O))||g3),A._RF.pop(),A._RF.push({},"22d76GFn6BEoKFiZCFN1HmA","DraftScene",void 0);var bo,br=P.ccclass,bs=P.disallowMultiple;br("DraftScene")(bn=bs(bn=function(n){i(r,n);var f=a(r);function r(){return o(this,r),f.apply(this,arguments)}return y(r,[{key:"__preload",value:function(){this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){t_.lazyValidateProperties(this)}},{key:"onLoad",value:function(){GameSDK.startGameAsync().catch(function(n){console.warn("GameSDK.startGameAsync",n)})}},{key:"switchScene",value:function(){}}]),r}(O))||bn),A._RF.pop(),A._RF.push({},"27217ZS55VNqbq0d9w9Cc+3","Component",void 0);var bl=P.ccclass,bu=P.executeInEditMode,bc=P.disallowMultiple,bh=GameCore.Events,bp=globalThis.game.event;bl("DraftComponent")(bo=bc(bo=bu(!0)(bo=function(n){i(r,n);var f=a(r);function r(){var n;o(this,r);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return(n=f.call.apply(f,[this].concat(a))).locale="en",n.eventPayload={screenName:"DraftScene"},n}return y(r,[{key:"__preload",value:function(){console.log("DraftComponent",bh)}},{key:"onLoad",value:function(){console.log("DraftComponent",bp)}},{key:"start",value:function(){console.log("DraftComponent",e6),this.makePersistent()}},{key:"makePersistent",value:function(){N.addPersistRootNode(this.node)}}]),r}(O))||bo)||bo),A._RF.pop(),A._RF.push({},"6adb6Vsx2BIsYfe4A3i4ArN","custom",void 0),(0,P.ccclass)("CustomSpine")(function(n){i(r,n);var f=a(r);function r(){var n;o(this,r);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return(n=f.call.apply(f,[this].concat(a))).spine=null,n.anims=null,n.customEnd=function(i){var a;console.log("CustomSpine customEnd",i);var o=null===(a=n.spine)||void 0===a?void 0:a.skeletonData;if(o){var y=o.getRuntimeData();y&&console.log("CustomSpine runtimeData",y)}},n}return y(r,[{key:"__preload",value:function(){var n,i;this.spine=null!==(n=this.node.getComponent(ea.Skeleton))&&void 0!==n?n:null,this.anims=null!==(i=this.node.getComponent(B))&&void 0!==i?i:null,t_.lazyValidateProperties(this)}},{key:"onLoad",value:function(){var n;console.log("CustomSpine onLoad",this.spine,this.anims),null===(n=this.anims)||void 0===n||n.play("custom")}},{key:"start",value:function(){}}]),r}(O)),A._RF.pop(),A._RF.push({},"3f6029o9mpM/K2ccwbuv3XD","EndlessScene",void 0);var bd,by,bv=P.ccclass,bf=P.disallowMultiple,bm=globalThis.game,bg=bm.audio,bb=bm.ads,bS=eQ.Layout,bk=eQ.DesignSize.Portrait;bv("EndlessScene")(bd=bf(bd=function(n){i(r,n);var f=a(r);function r(){var n;o(this,r);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return(n=f.call.apply(f,[this].concat(a))).handleGameMaskWhenLayoutChanged=function(n){var i=ek("Canvas/Game/GameObjects");if(i){var a=i.getComponent(ef);a&&(a.enabled=n===bS.Landscape)}},n.handleAdsWhenResize=function(){n.checkBottomBannerAdSize(),n.setMaxSizeSideBannerAd()},n.attemptCallSubscribeBot=function(){"subscribeBotAsync"in GameSDK.extra&&GameSDK.extra.subscribeBotAsync().catch(function(n){console.warn("subscribeBotAsync",n)})},n}return y(r,[{key:"__preload",value:function(){this.validateRequiredComponents(),this.listenGameEvents()}},{key:"validateRequiredComponents",value:function(){t_.lazyValidateProperties(this)}},{key:"onLoad",value:function(){}},{key:"listenGameEvents",value:function(){this.node.scene.on(eX.LAYOUT_CHANGED,this.handleGameMaskWhenLayoutChanged),this.node.scene.on(eX.VIEW_RESIZE,this.handleAdsWhenResize)}},{key:"checkBottomBannerAdSize",value:function(){var n=eY.instance.getVisibleSize(),i=e$.worldSizeToCssSize(n.height*ti.MAX_BOTTOM_BANNER_RATIO);GameCore.Configs.Ads.BannerDisplayAdOptions.forEach(function(n){var a=n.PlacementId,o=n.Position,y=n.BannerHeight;"bottom"===o&&(y>i?bb.hideBannerAdAsync(a).catch(function(n){}):bb.showBannerAdAsync(a).catch(function(n){}))})}},{key:"setMaxSizeSideBannerAd",value:function(){var n=GameSDK.extra;if("setSideBannerAdRemainSize"in n){var i=eY.instance.getVisibleSize(),a=bk.WIDTH+24,o=(i.width-a)/2,y=e$.worldSizeToCssSize(o);n.setSideBannerAdRemainSize(y)}}},{key:"start",value:function(){this.scheduleOnce(this.attemptCallSubscribeBot,.5),this.updateVolumeBackgroundMusic()}},{key:"updateVolumeBackgroundMusic",value:function(){bg.setVolume(1,"global_music")}}]),r}(O))||bd),A._RF.pop(),A._RF.push({},"9b83boaSv9PE6mRFqy0MSI8","GameScene",void 0);var bC,bw=P.ccclass,bE=P.disallowMultiple,bT=globalThis.game,b_=bT.audio,bA=bT.ads,bR=eQ.Layout,bP=eQ.DesignSize.Portrait;bw("GameScene")(by=bE(by=function(n){i(r,n);var f=a(r);function r(){var n;o(this,r);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return(n=f.call.apply(f,[this].concat(a))).handleGameMaskWhenLayoutChanged=function(n){var i=ek("Canvas/Game/GameObjects");if(i){var a=i.getComponent(ef);a&&(a.enabled=n===bR.Landscape)}},n.handleAdsWhenResize=function(){n.checkBottomBannerAdSize(),n.setMaxSizeSideBannerAd()},n.attemptCallSubscribeBot=function(){"subscribeBotAsync"in GameSDK.extra&&GameSDK.extra.subscribeBotAsync().catch(function(n){console.warn("subscribeBotAsync",n)})},n}return y(r,[{key:"__preload",value:function(){this.validateRequiredComponents(),this.listenGameEvents()}},{key:"validateRequiredComponents",value:function(){t_.lazyValidateProperties(this)}},{key:"listenGameEvents",value:function(){G.on(eX.VIEW_RESIZE,this.handleAdsWhenResize),G.on(eX.LAYOUT_CHANGED,this.handleGameMaskWhenLayoutChanged)}},{key:"checkBottomBannerAdSize",value:function(){var n=eY.instance.getVisibleSize(),i=e$.worldSizeToCssSize(n.height*ti.MAX_BOTTOM_BANNER_RATIO);GameCore.Configs.Ads.BannerDisplayAdOptions.forEach(function(n){var a=n.PlacementId,o=n.Position,y=n.BannerHeight;"bottom"===o&&(y>i?bA.hideBannerAdAsync(a).catch(function(n){}):bA.showBannerAdAsync(a).catch(function(n){}))})}},{key:"setMaxSizeSideBannerAd",value:function(){var n=GameSDK.extra;if("setSideBannerAdRemainSize"in n){var i=eY.instance.getVisibleSize(),a=bP.WIDTH+24,o=(i.width-a)/2,y=e$.worldSizeToCssSize(o);n.setSideBannerAdRemainSize(y)}}},{key:"start",value:function(){this.scheduleOnce(this.attemptCallSubscribeBot,.5),this.updateVolumeBackgroundMusic(),this.scheduleOnce(this.preloadScenes,2)}},{key:"preloadScenes",value:function(){tt.preloadDashboardScene()}},{key:"updateVolumeBackgroundMusic",value:function(){b_.setVolume(1,"global_music")}}]),r}(O))||by),A._RF.pop(),A._RF.push({},"2b2ebUm0nFD64V/fcD8RPF/","TestLayoutScene",void 0);var bB,bL,bD,bO,bI=P.ccclass,bN=P.disallowMultiple;bI("TestLayoutScene")(bC=bN(bC=function(n){i(r,n);var f=a(r);function r(){var n;return o(this,r),(n=f.call(this)).handleLayoutChange=function(){e9.showNotificationScreen("Layout changed")},tt.markIsTestScene(tn.TEST_LAYOUT_SCENE),n}return y(r,[{key:"start",value:function(){this.isValid&&this.listenGameEvents()}},{key:"listenGameEvents",value:function(){G.on(eX.LAYOUT_CHANGED,this.handleLayoutChange)}},{key:"switchScene",value:function(){tt.switchScene(tn.DASHBOARD_SCENE)}}]),r}(O))||bC),A._RF.pop(),A._RF.push({},"c0a5fPghzxBxpXiudxt+Qd4","TestParticleSystemScene",void 0);var bF,bG=P.ccclass,bM=P.property;bB=bG("TestParticleSystemScene"),bL=bM(gK),bB((bO=g((bD=function(n){i(r,n);var f=a(r);function r(){var n;return o(this,r),n=f.call(this),b(n,"starParticleSystem",bO,k(n)),tt.markIsTestScene(tn.TEST_PARTICLE_SYSTEM_SCENE),n}return y(r,[{key:"start",value:function(){var n=this;this.isValid&&this.scheduleOnce(function(){n.starParticleSystem.play()},1)}}]),r}(O)).prototype,"starParticleSystem",[bL],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bD)),A._RF.pop(),A._RF.push({},"7dc71c6qMBI/ZZfA4rG4nFv","TestPerformanceScene",void 0);var bz,bx=P.ccclass,bU=P.disallowMultiple;bx("TestPerformanceScene")(bF=bU(bF=function(n){i(r,n);var f=a(r);function r(){var n;return o(this,r),n=f.call(this),tt.markIsTestScene(tn.TEST_PERFORMANCE_SCENE),n}return y(r,[{key:"start",value:function(){this.isValid&&this.listenEvents()}},{key:"listenEvents",value:function(){}}]),r}(O))||bF),A._RF.pop(),A._RF.push({},"0a4aeK2lAdAjq0xWi6SCbV+","TestScene",void 0);var bH=P.ccclass,bj=P.disallowMultiple,bV=GameCore.Events,bW=globalThis.game.event;bH("TestScene")(bz=bj(bz=function(n){i(r,n);var f=a(r);function r(){var n;return o(this,r),n=f.call(this),tt.markIsTestScene(tn.TEST_SCENE),n}return y(r,[{key:"start",value:function(){this.isValid&&(this.listenScreenEvents(),e9.openScreen(e8.LOADING_SCREEN,{duration:.5}))}},{key:"listenScreenEvents",value:function(){bW.once(bV.CLOSED_SCREEN,function(n){n.screenName===ta[e8.LOADING_SCREEN]&&e9.openScreen(e8.NOTIFICATION_SCREEN,{message:"Test screen events pass!",duration:2,isCloseButtonVisible:!1})})}}]),r}(O))||bz),A._RF.pop(),A._RF.push({},"b16e7w74XVALY8Zco6TJYe7","AdsFlows",void 0);var bq=P.ccclass,bK=GameCore.Plugins.Ads.Types;bq("AdsFlows")(function(n){i(r,n);var f=a(r);function r(){return o(this,r),f.apply(this,arguments)}return y(r,[{key:"preloadAds",value:function(){te.preloadAds()}},{key:"checkServiceDegraded",value:function(){var n=te.isServiceDegraded();e9.showNotificationScreen("Service degraded: ".concat(n?"true":"false"))}},{key:"loadInterstitialAd",value:function(){te.preloadAdsByType(bK.INTERSTITIAL)}},{key:"loadRewardedVideoAd",value:function(){te.preloadAdsByType(bK.REWARDED_VIDEO)}},{key:"loadRewardedInterstitialAd",value:function(){te.preloadAdsByType(bK.REWARDED_INTERSTITIAL)}},{key:"showInterstitialAd",value:function(){te.showInterstitialAdAsync({contextType:"browse"})}},{key:"showRewardedVideoAd",value:function(){te.showRewardVideoAdAsync({contextType:"reward",forceLoad:!0})}},{key:"showRewardedInterstitialAd",value:function(){te.showRewardedInterstitialAdAsync({contextType:"reward",forceLoad:!0})}},{key:"showBannerAd",value:function(){te.showBannerAds()}},{key:"hideBannerAd",value:function(){te.hideBannerAds()}},{key:"showAdsenseInterstitialAd",value:function(){te.showInterstitialAdAsync({adService:"adsense"})}},{key:"showAdsenseRewardedVideoAd",value:function(){te.showRewardVideoAdAsync({adService:"adsense",forceLoad:!0})}},{key:"showAdsenseRewardedInterstitialAd",value:function(){te.showRewardedInterstitialAdAsync({adService:"adsense",forceLoad:!0})}}]),r}(O)),A._RF.pop(),A._RF.push({},"56a103phldKO7/xShKcD3bI","AnimationDemo",void 0),(0,P.ccclass)("AnimationDemo")(function(n){i(r,n);var f=a(r);function r(){return o(this,r),f.apply(this,arguments)}return y(r,[{key:"onLoad",value:function(){}},{key:"switchToTestTransitionScene",value:function(){tt.switchScene("TestTransitionScene")}}]),r}(O)),A._RF.pop(),A._RF.push({},"a3b8adQtftPmKSSoumHWY1e","AudioDemo",void 0),(0,P.ccclass)("AudioDemo")(function(n){i(r,n);var f=a(r);function r(){var n;o(this,r);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return(n=f.call.apply(f,[this].concat(a))).isMusicMute=!1,n.isSoundMute=!1,n.listSounds=[],n}return y(r,[{key:"onLoad",value:function(){var n,i;this.musicComp=null===(n=ek("Music"))||void 0===n?void 0:n.getComponent(tX),this.soundComp=null===(i=ek("Sound"))||void 0===i?void 0:i.getComponent(t7),this.validateRequiredComponents(),this.listSounds=[e4.BEE_FLYING,e4.BEE_STING_DOGE,e4.BG_MUSIC,e4.BUTTON_CLICK,e4.COLLECTING_COINS,e4.DOGE_DIES,e4.DOGE_HURT,e4.END_DRAW,e4.HAND_CLAP,e4.LEVEL_FAIL,e4.LEVEL_PASS,e4.LOST_STAR_IN_GAMEPLAY,e4.RAISE_STAR,e4.SPAWN_COINS,e4.STAR_RAISE,e4.TOUCH_START,e4.BEE_BULLET_EXPLODE]}},{key:"validateRequiredComponents",value:function(){t_.lazyValidateProperties(this)}},{key:"playBackgroundMusic",value:function(){this.musicComp.play(e4.BG_MUSIC)}},{key:"pauseBackgroundMusic",value:function(){this.musicComp.pause(e4.BG_MUSIC)}},{key:"stopBackgroundMusic",value:function(){this.musicComp.stop(e4.BG_MUSIC)}},{key:"randomMusicChannelVolume",value:function(){var n=Math.random();this.musicComp.setVolume(n)}},{key:"toggleMuteMusicChannel",value:function(){this.isMusicMute?(this.musicComp.mute(!1),this.isMusicMute=!1):(this.musicComp.mute(!0),this.isMusicMute=!0)}},{key:"playRandomSound",value:function(){var n=Math.floor(Math.random()*this.listSounds.length),i=this.listSounds[n];i&&this.soundComp.play(i)}},{key:"toggleMuteSoundChannel",value:function(){this.isSoundMute?(this.soundComp.mute(!1),this.isSoundMute=!1):(this.soundComp.mute(!0),this.isSoundMute=!0)}},{key:"randomSoundChannelVolume",value:function(){var n=Math.random();this.soundComp.setVolume(n)}}]),r}(O)),A._RF.pop(),A._RF.push({},"9e6b330nHBK2oNz8N9/lpDx","FlowChallenge",void 0);var bY,bJ,bZ,bX,bQ,b$,b0,b1,b2,b3,b4,b5=P.ccclass,b6=GameCore.Utils,b7=b6.Decorator,b9=b6.String,b8=b6.Number,Se=globalThis.game,St=Se.match,Sn=Se.player,YE=function(n){e9.closeLoadingScreen(),_instanceof(n,Error)&&e9.showNotificationScreen(n.message)};bY=b5("FlowChallenge"),bJ=b7.tryCatch(YE),bZ=b7.tryCatch(YE),bX=b7.tryCatch(YE),bQ=b7.tryCatch(YE),b$=b7.tryCatch(YE),bY((g((b0=function(f){i(p,f);var m,g,b,k,C,w=a(p);function p(){var n;o(this,p);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return(n=w.call.apply(w,[this].concat(a))).playerId="",n.matchId="",n.contextId="",n.opponentId="",n}return y(p,[{key:"onLoad",value:function(){this.playerId=Sn.getPlayerId(),this.matchId=b9.generateObjectId(),this.contextId=b9.generateObjectId(),this.opponentId=b9.generateObjectId()}},{key:"inviteFriends",value:(C=n(function(){return _ts_generator(this,function(n){switch(n.label){case 0:return e9.showLoadingScreen(0),[4,St.challenge.invite.processAsync({playerId:this.playerId,extraData:{rescued:0}})];case 1:return n.sent(),[2]}})}),function(){return C.apply(this,arguments)})},{key:"challengeFriend",value:(k=n(function(){var n;return _ts_generator(this,function(i){switch(i.label){case 0:return n={playerId:this.playerId,opponentId:this.opponentId},e9.showLoadingScreen(0),[4,St.challenge.friend.processAsync(n)];case 1:return i.sent(),[2]}})}),function(){return k.apply(this,arguments)})},{key:"joinChallenge",value:(b=n(function(){var n,i,a;return _ts_generator(this,function(o){switch(o.label){case 0:return i=St.getMatchState(),a={playerId:this.playerId,contextId:b9.generateObjectId(),matchId:null!==(n=i.id)&&void 0!==n?n:this.matchId,opponentId:this.opponentId},e9.showLoadingScreen(0),[4,St.challenge.join.processAsync(a)];case 1:return o.sent(),[2]}})}),function(){return b.apply(this,arguments)})},{key:"continueChallenge",value:(g=n(function(){var n,i,a;return _ts_generator(this,function(o){switch(o.label){case 0:return i=St.getMatchState(),a={playerId:this.playerId,matchId:null!==(n=i.id)&&void 0!==n?n:this.matchId,contextId:this.contextId,opponentId:this.opponentId},e9.showLoadingScreen(0),[4,St.challenge.continue.processAsync(a)];case 1:return o.sent(),[2]}})}),function(){return g.apply(this,arguments)})},{key:"finishChallenge",value:(m=n(function(){return _ts_generator(this,function(n){switch(n.label){case 0:return e9.showLoadingScreen(0),[4,St.challenge.finish.processAsync({playerId:this.playerId,playerScore:b8.random(99999)})];case 1:return n.sent(),[2]}})}),function(){return m.apply(this,arguments)})}]),p}(O)).prototype,"inviteFriends",[bJ],Object.getOwnPropertyDescriptor(b0.prototype,"inviteFriends"),b0.prototype),g(b0.prototype,"challengeFriend",[bZ],Object.getOwnPropertyDescriptor(b0.prototype,"challengeFriend"),b0.prototype),g(b0.prototype,"joinChallenge",[bX],Object.getOwnPropertyDescriptor(b0.prototype,"joinChallenge"),b0.prototype),g(b0.prototype,"continueChallenge",[bQ],Object.getOwnPropertyDescriptor(b0.prototype,"continueChallenge"),b0.prototype),g(b0.prototype,"finishChallenge",[b$],Object.getOwnPropertyDescriptor(b0.prototype,"finishChallenge"),b0.prototype),b0)),A._RF.pop(),A._RF.push({},"f3decJ3ZlRLt6CDMHpl1XCe","FlowContext",void 0);var Si,Sa,So,Sr,Ss,Sl=P.ccclass,Su=GameCore.Utils.Decorator,Sc=globalThis.game,Sh=Sc.match,Sp=Sc.player,Sd=Sc.context,sT=function(n){e9.closeLoadingScreen(),_instanceof(n,Error)&&e9.showNotificationScreen(n.message)};b1=Sl("FlowContext"),b2=Su.tryCatch(sT),b3=Su.tryCatch(sT),b1((g((b4=function(f){i(u,f);var m,g,b=a(u);function u(){var i;o(this,u);for(var a=arguments.length,y=new Array(a),f=0;f<a;f++)y[f]=arguments[f];return(i=b.call.apply(b,[this].concat(y))).playerId="",i.changeContext=function(){var i=n(function(n,i,a){return _ts_generator(this,function(o){switch(o.label){case 0:return Sd.receiveContext(n,i,a),[4,Sd.detectContextSessionType()];case 1:return o.sent(),game.context.detectContextGameMode(),[2]}})});return function(n,a,o){return i.apply(this,arguments)}}(),i}return y(u,[{key:"onLoad",value:function(){this.playerId=Sp.getPlayerId()}},{key:"chooseFriends",value:(g=n(function(n,i){var a;return _ts_generator(this,function(n){switch(n.label){case 0:return a=JSON.parse(i),e9.showLoadingScreen(0),[4,Sh.context.choose.processAsync(T(T({},a),{},{playerId:this.playerId}))];case 1:return n.sent(),[2]}})}),function(n,i){return g.apply(this,arguments)})},{key:"processContextData",value:(m=n(function(){return _ts_generator(this,function(n){switch(n.label){case 0:return e9.showLoadingScreen(0),[4,Sd.processContextData()];case 1:return n.sent(),[2]}})}),function(){return m.apply(this,arguments)})},{key:"setSingleContext",value:function(){this.changeContext("","SOLO",{})}},{key:"setTournamentContext",value:function(){this.changeUrl("/?context_source_id=123&context_type=GENERIC&tournament=true"),this.changeContext("mocked-context-id-tournament","THREAD",{})}},{key:"setShareInviteContext",value:function(){var n={type:Sd.getSessionContextTypes().SHARE_INVITE,playerId:"4766619483409000",playerName:"Player",playerPhoto:""};this.changeContext("mocked-context-id-share-invite","THREAD",n)}},{key:"setMatchingGroupContext",value:function(){var n={type:Sd.getSessionContextTypes().MATCHING_GROUP,playerId:"4766619483409000",playerName:"Player",playerPhoto:"",playerScore:100};this.changeContext("mocked-context-id-matching-group","GROUP",n)}},{key:"setChallengeFriendContext",value:function(){var n={type:Sd.getSessionContextTypes().CHALLENGE_FRIEND,playerId:"4766619483409000",playerName:"Player",playerPhoto:""};this.changeContext("mocked-context-id-challenge-friend","THREAD",n)}},{key:"changeUrl",value:function(n){window.history.pushState({},"",n)}}]),u}(O)).prototype,"chooseFriends",[b2],Object.getOwnPropertyDescriptor(b4.prototype,"chooseFriends"),b4.prototype),g(b4.prototype,"processContextData",[b3],Object.getOwnPropertyDescriptor(b4.prototype,"processContextData"),b4.prototype),b4)),A._RF.pop(),A._RF.push({},"36562c8k/RF2p/1aLUWFaf8","FlowGroup",void 0);var Sy,Sv,Sf,Sm,Sg=P.ccclass,Sb=GameCore.Utils.Decorator,SS=globalThis.game,Sk=SS.match,SC=SS.player,gT=function(n){e9.closeLoadingScreen(),_instanceof(n,Error)&&e9.showNotificationScreen(n.message)};Si=Sg("FlowGroup"),Sa=Sb.tryCatch(gT),So=Sb.tryCatch(gT),Sr=Sb.tryCatch(gT),Si((g((Ss=function(f){i(c,f);var m,g,b,k=a(c);function c(){var n;o(this,c);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return(n=k.call.apply(k,[this].concat(a))).playerId="",n}return y(c,[{key:"onLoad",value:function(){this.playerId=SC.getPlayerId()}},{key:"startGroup",value:(b=n(function(n,i){var a;return _ts_generator(this,function(n){switch(n.label){case 0:return a=JSON.parse(i),e9.showLoadingScreen(0),[4,Sk.group.start.processAsync(T(T({},a),{},{matchTag:"test",playerId:this.playerId}))];case 1:return n.sent(),[2]}})}),function(n,i){return b.apply(this,arguments)})},{key:"joinGroup",value:(g=n(function(n,i){var a;return _ts_generator(this,function(n){switch(n.label){case 0:return a=JSON.parse(i),e9.showLoadingScreen(0),[4,Sk.group.join.processAsync(T(T({},a),{},{playerId:this.playerId}))];case 1:return n.sent(),[2]}})}),function(n,i){return g.apply(this,arguments)})},{key:"finishGroup",value:(m=n(function(){return _ts_generator(this,function(n){switch(n.label){case 0:return e9.showLoadingScreen(0),SC.setPlayerDataByName("score",Math.floor(2*Math.random())),[4,Sk.group.finish.processAsync()];case 1:return n.sent(),[2]}})}),function(){return m.apply(this,arguments)})}]),c}(O)).prototype,"startGroup",[Sa],Object.getOwnPropertyDescriptor(Ss.prototype,"startGroup"),Ss.prototype),g(Ss.prototype,"joinGroup",[So],Object.getOwnPropertyDescriptor(Ss.prototype,"joinGroup"),Ss.prototype),g(Ss.prototype,"finishGroup",[Sr],Object.getOwnPropertyDescriptor(Ss.prototype,"finishGroup"),Ss.prototype),Ss)),A._RF.pop(),A._RF.push({},"46e6dOzDGJMa48+tVKTAEIT","FlowSingle",void 0);var Sw,SE,ST,S_,SA=P.ccclass,SR=GameCore.Utils,SP=SR.Decorator,SB=SR.Number,SL=globalThis.game,SD=SL.match,SO=SL.player,LT=function(n){e9.closeLoadingScreen(),_instanceof(n,Error)&&e9.showNotificationScreen(n.message)};Sy=SA("FlowSingle"),Sv=SP.tryCatch(LT),Sf=SP.tryCatch(LT),Sy((g((Sm=function(f){i(u,f);var m,g,b=a(u);function u(){var n;o(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return(n=b.call.apply(b,[this].concat(a))).playerId="",n}return y(u,[{key:"onLoad",value:function(){this.playerId=SO.getPlayerId()}},{key:"startSingle",value:(g=n(function(){return _ts_generator(this,function(n){switch(n.label){case 0:return e9.showLoadingScreen(0),[4,SD.single.start.processAsync({playerId:this.playerId})];case 1:return n.sent(),[2]}})}),function(){return g.apply(this,arguments)})},{key:"finishSingle",value:(m=n(function(){return _ts_generator(this,function(n){switch(n.label){case 0:return SO.setPlayerDataByName("score",SB.random(1e3)),[4,SD.single.finish.processAsync()];case 1:return n.sent(),[2]}})}),function(){return m.apply(this,arguments)})}]),u}(O)).prototype,"startSingle",[Sv],Object.getOwnPropertyDescriptor(Sm.prototype,"startSingle"),Sm.prototype),g(Sm.prototype,"finishSingle",[Sf],Object.getOwnPropertyDescriptor(Sm.prototype,"finishSingle"),Sm.prototype),Sm)),A._RF.pop(),A._RF.push({},"e2458xYf5xBG6uFEvkD4R6s","FlowStratery",void 0);var SI,SN,SF,SG,SM,Sz,Sx,SU,SH,Sj,SV=P.ccclass,SW=GameCore,Sq=SW.Utils,SK=Sq.Decorator,SY=Sq.String,SJ=Sq.Number,SZ=SW.Dtos.Match.CustomData,SX=globalThis.game,SQ=SX.match,S$=SX.player,$T=function(n){e9.closeLoadingScreen(),_instanceof(n,Error)&&e9.showNotificationScreen(n.message)};Sw=SV("FlowStrategy"),SE=SK.tryCatch($T),ST=SK.tryCatch($T),Sw((g((S_=function(f){i(u,f);var m,g,b=a(u);function u(){var n;o(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return(n=b.call.apply(b,[this].concat(a))).playerId="",n}return y(u,[{key:"onLoad",value:function(){this.playerId=S$.getPlayerId(),this.initDtosDefaultData()}},{key:"initDtosDefaultData",value:function(){SZ.addDefaultData({maxTime:0}),SZ.addValidateFunction("maxTime",function(n){if(n<0)throw new Error("maxTime must be greater than 0")})}},{key:"startStrategy",value:(g=n(function(){return _ts_generator(this,function(n){switch(n.label){case 0:return e9.showLoadingScreen(0),[4,SQ.strategy.start.processAsync({matchId:SY.generateObjectId(),gameMode:"endless",playerId:this.playerId})];case 1:return n.sent(),[4,SQ.handler.setMatchCustomData({maxTime:600})];case 2:return n.sent(),[4,SQ.handler.setProfileData({id:this.playerId,wish:0})];case 3:return n.sent(),[2]}})}),function(){return g.apply(this,arguments)})},{key:"finishStrategy",value:(m=n(function(){return _ts_generator(this,function(n){switch(n.label){case 0:return[4,SQ.handler.setProfileData({id:this.playerId,wish:SJ.random(9999)})];case 1:return n.sent(),[4,SQ.strategy.finish.processAsync({setPlayerBestScore:!1,postGlobalLeaderboard:!1})];case 2:return n.sent(),[2]}})}),function(){return m.apply(this,arguments)})}]),u}(O)).prototype,"startStrategy",[SE],Object.getOwnPropertyDescriptor(S_.prototype,"startStrategy"),S_.prototype),g(S_.prototype,"finishStrategy",[ST],Object.getOwnPropertyDescriptor(S_.prototype,"finishStrategy"),S_.prototype),S_)),A._RF.pop(),A._RF.push({},"943b1Zkv9BAaZVhinus8Bkv","FlowTournament",void 0);var S0=P.ccclass,S1=GameCore.Utils.Decorator,S2=globalThis.game,S3=S2.match,S4=S2.player,rA=function(n){e9.closeLoadingScreen(),_instanceof(n,Error)&&e9.showNotificationScreen(n.message)};SI=S0("FlowTournament"),SN=S1.tryCatch(rA),SF=S1.tryCatch(rA),SG=S1.tryCatch(rA),SM=S1.tryCatch(rA),Sz=S1.tryCatch(rA),Sx=S1.tryCatch(rA),SU=S1.tryCatch(rA),SH=S1.tryCatch(rA),SI((g((Sj=function(f){i(v,f);var m,g,b,k,C,w,E,T,_=a(v);function v(){var n;o(this,v);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return(n=_.call.apply(_,[this].concat(a))).playerId="",n}return y(v,[{key:"onLoad",value:function(){this.playerId=S4.getPlayerId()}},{key:"joinTournament",value:(T=n(function(){var n;return _ts_generator(this,function(i){switch(i.label){case 0:return e9.showLoadingScreen(0),[4,GameSDK.getTournamentAsync()];case 1:return n=i.sent().getID().toString(),[4,S3.tournament.join.processAsync({tournamentId:n,playerId:this.playerId})];case 2:return i.sent(),[2]}})}),function(){return T.apply(this,arguments)})},{key:"continueTournament",value:(E=n(function(){var n;return _ts_generator(this,function(i){switch(i.label){case 0:return e9.showLoadingScreen(0),[4,GameSDK.getTournamentAsync()];case 1:return n=i.sent().getContextID(),[4,S3.tournament.continue.processAsync({contextId:n,playerId:this.playerId})];case 2:return i.sent(),[2]}})}),function(){return E.apply(this,arguments)})},{key:"finishTournament",value:(w=n(function(){return _ts_generator(this,function(n){switch(n.label){case 0:return e9.showLoadingScreen(0),S4.setPlayerDataByName("score",Math.floor(2*Math.random())),[4,S3.single.finish.processAsync()];case 1:return n.sent(),[2]}})}),function(){return w.apply(this,arguments)})},{key:"createTournament",value:(C=n(function(){var n;return _ts_generator(this,function(i){switch(i.label){case 0:return e9.showLoadingScreen(0),n=GameCore.Utils.String.generateObjectId(),[4,GameSDK.tournament.createAsync({initialScore:0,config:{title:"Tournament title",tournamentTitle:"Tournament title"},data:{playerId:this.playerId,playerName:"playerName",leaderboardId:n}})];case 1:return i.sent(),[2]}})}),function(){return C.apply(this,arguments)})},{key:"postScoreTournament",value:(k=n(function(n){var i;return _ts_generator(this,function(a){switch(a.label){case 0:return console.warn("score",i=Number(n.string)),e9.showLoadingScreen(0),[4,GameSDK.tournament.postScoreAsync(i)];case 1:return a.sent(),[2]}})}),function(n){return k.apply(this,arguments)})},{key:"shareTournament",value:(b=n(function(n,i){var a;return _ts_generator(this,function(n){switch(n.label){case 0:return a=JSON.parse(i),e9.showLoadingScreen(0),console.warn("payload",a),[4,GameSDK.tournament.shareAsync(a)];case 1:return n.sent(),[2]}})}),function(n,i){return b.apply(this,arguments)})},{key:"getTournamentsAsync",value:(g=n(function(){return _ts_generator(this,function(n){return e9.showLoadingScreen(0),console.warn(GameSDK.tournament.getTournamentsAsync()),[2]})}),function(){return g.apply(this,arguments)})},{key:"getTournamentAsync",value:(m=n(function(){return _ts_generator(this,function(n){switch(n.label){case 0:return e9.showLoadingScreen(0),[4,GameSDK.getTournamentAsync()];case 1:return console.warn(n.sent()),[2]}})}),function(){return m.apply(this,arguments)})}]),v}(O)).prototype,"joinTournament",[SN],Object.getOwnPropertyDescriptor(Sj.prototype,"joinTournament"),Sj.prototype),g(Sj.prototype,"continueTournament",[SF],Object.getOwnPropertyDescriptor(Sj.prototype,"continueTournament"),Sj.prototype),g(Sj.prototype,"finishTournament",[SG],Object.getOwnPropertyDescriptor(Sj.prototype,"finishTournament"),Sj.prototype),g(Sj.prototype,"createTournament",[SM],Object.getOwnPropertyDescriptor(Sj.prototype,"createTournament"),Sj.prototype),g(Sj.prototype,"postScoreTournament",[Sz],Object.getOwnPropertyDescriptor(Sj.prototype,"postScoreTournament"),Sj.prototype),g(Sj.prototype,"shareTournament",[Sx],Object.getOwnPropertyDescriptor(Sj.prototype,"shareTournament"),Sj.prototype),g(Sj.prototype,"getTournamentsAsync",[SU],Object.getOwnPropertyDescriptor(Sj.prototype,"getTournamentsAsync"),Sj.prototype),g(Sj.prototype,"getTournamentAsync",[SH],Object.getOwnPropertyDescriptor(Sj.prototype,"getTournamentAsync"),Sj.prototype),Sj)),A._RF.pop(),A._RF.push({},"d78a7DHN+5P/YjKftUFEZcU","JavaAds",void 0),(0,P.ccclass)("JavaAds")(function(n){i(r,n);var f=a(r);function r(){return o(this,r),f.apply(this,arguments)}return y(r,[{key:"__preload",value:function(){this.setupAds()}},{key:"setupAds",value:function(){}},{key:"onLoad",value:function(){}},{key:"start",value:function(){}}]),r}(O)),A._RF.pop(),A._RF.push({},"e8e10DJmXdH8Jw30JCMjJqd","ScreensFlows",void 0),(0,P.ccclass)("ScreensFlows")(function(f){i(u,f);var m,g,b=a(u);function u(){var n;o(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return(n=b.call.apply(b,[this].concat(a))).screenActions=[function(){return n.showLoadingScreen()},function(){return n.showNotificationScreen()},function(){return n.showWinningScreen()},function(){return n.showCongratulationScreen()},function(){return n.showLoseScreen()},function(){return n.showSettingsScreen()}],n}return y(u,[{key:"preloadScreens",value:function(){e9.preloadScreens()}},{key:"getRandomDelay",value:function(n,i){var a=arguments.length>0&&void 0!==n?n:100,o=arguments.length>1&&void 0!==i?i:1e3;return Math.floor(Math.random()*(o-a+1))+a}},{key:"executeRandomScreenAction",value:(g=n(function(){var n,i;return _ts_generator(this,function(a){return n=Math.floor(Math.random()*this.screenActions.length),(i=this.screenActions[n])?i():console.warn("No screen action found at index:",n),[2]})}),function(){return g.apply(this,arguments)})},{key:"spamScreens",value:(m=n(function(){var n,i,a;return _ts_generator(this,function(o){switch(o.label){case 0:n=this,console.info("\uD83C\uDFAD Start spamming screens..."),i=function(){var i;return _ts_generator(this,function(o){switch(o.label){case 0:return i=n.getRandomDelay(200,800),console.debug("\uD83C\uDFAD Spamming screen ".concat(a+1,"/").concat(10)),[4,new Promise(function(n){return setTimeout(n,i)})];case 1:return o.sent(),[4,n.executeRandomScreenAction()];case 2:return o.sent(),[2]}})},a=0,o.label=1;case 1:if(!(a<10))return[3,4];return[5,_ts_values(i())];case 2:o.sent(),o.label=3;case 3:return a++,[3,1];case 4:return console.info("\uD83C\uDFAD Finished spamming screens"),[2]}})}),function(){return m.apply(this,arguments)})},{key:"showNotificationScreen",value:function(){e9.showNotificationScreen("Hey!")}},{key:"closeNotificationScreen",value:function(){e9.closeNotificationScreen()}},{key:"showLoadingScreen",value:function(){e9.showLoadingScreen(5)}},{key:"closeLoadingScreen",value:function(){e9.closeLoadingScreen()}},{key:"showWinningScreen",value:function(){e9.openScreen(e8.WINNING_SCREEN)}},{key:"closeWinningScreen",value:function(){e9.closeScreen(e8.WINNING_SCREEN)}},{key:"showLoseScreen",value:function(){e9.openScreen(e8.LOSE_SCREEN,{level:1})}},{key:"closeLoseScreen",value:function(){e9.closeScreen(e8.LOSE_SCREEN)}},{key:"showSettingsScreen",value:function(){e9.openScreen(e8.SETTINGS_SCREEN)}},{key:"closeSettingsScreen",value:function(){e9.closeScreen(e8.SETTINGS_SCREEN)}},{key:"showCongratulationScreen",value:function(){e9.openScreen(e8.CONGRATULATION_SCREEN)}},{key:"closeCongratulationScreen",value:function(){e9.closeScreen(e8.CONGRATULATION_SCREEN)}}]),u}(O)),A._RF.pop(),A._RF.push({},"abf91gNohBK7arKnziqu2PF","AnimationDemo2",void 0),(0,P.ccclass)("AnimationDemo2")(function(n){i(r,n);var f=a(r);function r(){return o(this,r),f.apply(this,arguments)}return y(r,[{key:"onLoad",value:function(){}},{key:"switchToTestScene",value:function(){tt.switchScene("TestScene")}}]),r}(O)),A._RF.pop(),A._RF.push({},"56b92F9LoxNs5aCgvw+tkq6","LoadingSceneTransition",void 0);var S5,S6,S7,S9,S8,ke,kt,kn,ki,ka,ko,kr,ks,kl=P.ccclass,ku=P.requireComponent,kc=P.property;S5=kl("LoadingSceneTransition"),S6=ku([eJ]),S7=kc([j]),S5(S9=S6((ke=g((S8=function(n){i(s,n);var f=a(s);function s(){var n;o(this,s);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=f.call.apply(f,[this].concat(a)),b(n,"targets",ke,k(n)),n.realTargets=[],n}return y(s,[{key:"start",value:function(){for(var n=this,i=0;i<this.targets.length;i++){var a=this.targets[i];if(a){var o=ey(a);o.setParent(this.node),o.active=!1,this.realTargets.push(o)}}N.addPersistRootNode(this.node),N.once(Y.EVENT_BEFORE_SCENE_LAUNCH,function(){n.playFadeOutAnimationClip()})}},{key:"playFadeOutAnimationClip",value:function(){var n=this,i=0;if(this.realTargets&&0!==this.realTargets.length){var a,o=m(this.realTargets);try{for(o.s();!(a=o.n()).done;){var y=a.value;y.active=!0;var f=y.getComponent(B);if(f)f.clips.some(function(n){return"FadeOut"===(null==n?void 0:n.name)})?(f.play("FadeOut"),f.once(B.EventType.FINISHED,function(){++i===n.realTargets.length&&n.node.destroy()})):(this.node.destroy(),console.warn("Not have FadeOut clip"))}}catch(n){o.e(n)}finally{o.f()}}}}]),s}(O)).prototype,"targets",[S7],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),S9=S8))||S9),A._RF.pop(),A._RF.push({},"acb0egHPppFmYJalVNrDDv/","BaseScreen",void 0);var kh,kp=P.ccclass,kd=P.property,ky=P.disallowMultiple,kv=GameCore.Events,kf=globalThis.game.event,km=(kt=kp("BaseScreen"),kn=kd(j),ki=kd(j),kt(ka=ky((kr=g((ko=function(n){i(r,n);var f=a(r);function r(){var n;o(this,r);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=f.call.apply(f,[this].concat(a)),b(n,"container",kr,k(n)),b(n,"backgroundMask",ks,k(n)),n.data={},n}return y(r,[{key:"__preload",value:function(){this.animation=this.getComponent(B),this.validateRequiredComponents(),this.initializeNodes()}},{key:"initializeNodes",value:function(){var n=this.getMaskOpacity(),i=this.getContainerOpacity();n&&i&&(n.opacity=0,i.opacity=0)}},{key:"validateRequiredComponents",value:function(){t_.lazyValidateProperties(this)}},{key:"open",value:function(n){var i=this;n&&(this.data=n),this.animation.once(B.EventType.PLAY,function(){i.show()}),kf.emit(kv.OPENED_SCREEN,{screenName:this.node.name,screenData:this.data}),this.runAnimation("OpenScreen")}},{key:"close",value:function(){var n=this;this.node.active&&(this.animation.once(B.EventType.FINISHED,function(){kf.emit(kv.CLOSED_SCREEN,{screenName:n.node.name}),n.hide()}),this.runAnimation("CloseScreen"))}},{key:"runAnimation",value:function(n){if(!this.isAnimationExist(n))throw new Error("".concat(this.node.name,": Animation component must have ").concat(n," clip"));this.animation.play(n)}},{key:"isAnimationExist",value:function(n){return this.animation.clips.some(function(i){return!(!i||i.name!==n)})}},{key:"getMaskOpacity",value:function(){return this.backgroundMask.getComponent(V)||(console.warn("BaseScreen: maskOpacity not found"),null)}},{key:"getContainerOpacity",value:function(){return this.container.getComponent(V)||(console.warn("BaseScreen: containerOpacity not found"),null)}},{key:"show",value:function(){this.node.active=!0}},{key:"hide",value:function(){this.node.active=!1}}]),r}(O)).prototype,"container",[kn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ks=g(ko.prototype,"backgroundMask",[ki],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ka=ko))||ka)||ka);A._RF.pop(),A._RF.push({},"f3521L4Mn5I3bhxr0QZJ9y9","BackgroundMask",void 0);var kg,kb,kS,kk,kC,kw=P.ccclass,kE=P.requireComponent;kw("BackgroundMask")(kh=kE([V])(kh=function(n){i(r,n);var f=a(r);function r(){return o(this,r),f.apply(this,arguments)}return y(r,[{key:"onLoad",value:function(){var n=this.getComponent(V);n?(this.opacity=n,this.updateMaskAlpha()):console.warn("BackgroundMask: UIOpacity not found")}},{key:"updateMaskAlpha",value:function(){var n,i=this.opacity.opacity/255;(n=document.getElementById("app-mask"))&&(n.style.background="rgb(0 0 0 / ".concat(i,")"))}}]),r}(O))||kh),A._RF.pop(),A._RF.push({},"d562cAXnG1PQ6vXfOEq2wVu","Screens",void 0);var kT,k_,kA,kR,kP,kB,kL,kD,kO,kI,kN,kF,kG,kM,kz=P.ccclass,kx=P.property,kU=P.executeInEditMode;kg=kz("Screens"),kb=kx({type:X(e8)}),kg(kS=kU((kC=g((kk=function(n){i(r,n);var f=a(r);function r(){var n;o(this,r);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=f.call.apply(f,[this].concat(a)),b(n,"screenKeys",kC,k(n)),n}return y(r,[{key:"onEnable",value:function(){}},{key:"onDisable",value:function(){}},{key:"onChildrenChanged",value:function(){}}]),r}(O)).prototype,"screenKeys",[kb],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),kS=kk))||kS),A._RF.pop(),A._RF.push({},"cecf2nUBzhIWZw7uJgVliXz","CongratulationScreen",void 0);var kH,kj,kV,kW,kq,kK,kY=P.ccclass,kJ=P.property,kZ=P.disallowMultiple,kX=P.requireComponent,kQ=GameCore.Events,k$=globalThis.game.event;kT=kY("CongratulationScreen"),k_=kX(km),kA=kJ(j),kR=kJ(j),kP=kJ(M),kB=kJ(M),kL=kJ(M),kT(kD=kZ(kD=k_((kI=g((kO=function(n){i(r,n);var f=a(r);function r(){var n;o(this,r);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=f.call.apply(f,[this].concat(a)),b(n,"congratulation",kI,k(n)),b(n,"confirmation",kN,k(n)),b(n,"closeButtonComponent",kF,k(n)),b(n,"yesButtonComponent",kG,k(n)),b(n,"noButtonComponent",kM,k(n)),n.handleOpeningScreen=function(i){if(!n.screen)throw new Error("CongratulationScreen: screen not found");n.validateEventPayload(i)&&(n.closeButtonComponent.interactable=!0,n.yesButtonComponent.interactable=!0,n.noButtonComponent.interactable=!0)},n.handleOpenedScreen=function(i){n.validateEventPayload(i)&&n.open()},n}return y(r,[{key:"__preload",value:function(){this.enabled=!1,this.screen=this.getComponent(km),this.validateRequiredComponents(),this.listenScreenEvents()}},{key:"onDestroy",value:function(){this.unListenScreenEvents()}},{key:"validateRequiredComponents",value:function(){t_.lazyValidateProperties(this)}},{key:"listenScreenEvents",value:function(){k$.on(kQ.OPENING_SCREEN,this.handleOpeningScreen),k$.on(kQ.OPENED_SCREEN,this.handleOpenedScreen)}},{key:"unListenScreenEvents",value:function(){k$.off(kQ.OPENING_SCREEN,this.handleOpeningScreen),k$.off(kQ.OPENED_SCREEN,this.handleOpenedScreen)}},{key:"validateEventPayload",value:function(n){return n.screenName===this.node.name}},{key:"open",value:function(){this.enabled&&(this.confirmation.active=!1,this.congratulation.active=!0)}},{key:"close",value:function(){this.closeButtonComponent.interactable=!1,this.yesButtonComponent.interactable=!1,this.noButtonComponent.interactable=!1,e9.closeScreen(e8.CONGRATULATION_SCREEN)}},{key:"handleStartOver",value:function(){this.confirmation.active=!0,this.congratulation.active=!1;var n=this.confirmation.getComponent(V);n?(eS(n).set({opacity:0}).to(.2,{opacity:255},{easing:"smooth"}).start(),eS(this.confirmation).set({scale:new U(0,0,0)}).to(.2,{scale:new U(1,1,1)},{easing:"smooth"}).start()):console.warn("CongratulationScreen: UIOpacity not found")}},{key:"handleYesStartOver",value:function(){this.close(),this.node.scene.emit(r8.START_OVER)}},{key:"handleNoStartOver",value:function(){this.close(),this.node.scene.emit(r8.GAME_REPLAY,{level:this.screen.data.level})}},{key:"handleClickedClose",value:function(){this.close(),this.node.scene.emit(r8.GAME_REPLAY,{level:this.screen.data.level})}}]),r}(O)).prototype,"congratulation",[kA],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),kN=g(kO.prototype,"confirmation",[kR],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),kF=g(kO.prototype,"closeButtonComponent",[kP],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),kG=g(kO.prototype,"yesButtonComponent",[kB],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),kM=g(kO.prototype,"noButtonComponent",[kL],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),kD=kO))||kD)||kD),A._RF.pop(),A._RF.push({},"7b024d/xQ1BBZV0UpNjM9UQ","LoadingFullScreen",void 0);var k0,k1,k2,k3,k4=P.ccclass,k5=P.property,k6=(kH=k4("LoadingFullScreen"),kj=k5(e_),kV=k5(K),kH((kq=g((kW=function(f){i(h,f);var m,g,C=a(h);function h(){var n;o(this,h);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=C.call.apply(C,[this].concat(a)),b(n,"progressBar",kq,k(n)),b(n,"loadingText",kK,k(n)),n}return y(h,[{key:"__preload",value:function(){this.uiOpacity=this.getComponent(V),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){t_.lazyValidateProperties(this)}},{key:"runLoadingTextAnimation",value:function(){var n=this,i=0;this.schedule(function(){i=i>2?0:i+1,n.loadingText.string="Loading"+".".repeat(i)},.5)}},{key:"stopLoadingTextAnimation",value:function(){this.unscheduleAllCallbacks()}},{key:"show",value:(g=n(function(n){var i,a;return _ts_generator(this,function(n){switch(n.label){case 0:return this.uiOpacity.opacity=0,this.progressBar.progress=0,i=eS(this.uiOpacity).to(.2,{opacity:255},{easing:"cubicOut"}),a=eS(this.progressBar).to(8,{progress:.9},{easing:"cubicOut"}),this.runLoadingTextAnimation(),to.runTweenAsync(i),[4,to.runTweenAsync(a)];case 1:return n.sent(),[2]}})}),function(n){return g.apply(this,arguments)})},{key:"hide",value:(m=n(function(n){var i,a;return _ts_generator(this,function(n){switch(n.label){case 0:if(!(this.uiOpacity&&this.progressBar))return[3,3];return this.uiOpacity.opacity=255,this.progressBar.progress=.9,i=eS(this.uiOpacity).to(.15,{opacity:0},{easing:"cubicIn"}),a=eS(this.progressBar).to(.2,{progress:1},{easing:"cubicIn"}),this.runLoadingTextAnimation(),[4,to.runTweenAsync(a)];case 1:return n.sent(),this.stopLoadingTextAnimation(),[4,to.runTweenAsync(i)];case 2:n.sent(),this.node.active=!1,n.label=3;case 3:return[2]}})}),function(n){return m.apply(this,arguments)})}]),h}(O)).prototype,"progressBar",[kj],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),kK=g(kW.prototype,"loadingText",[kV],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),kW))||kW);A._RF.pop(),A._RF.push({},"daa70r49mtGR6iXhcKLcS3q","Loading",void 0);var k7,k9=P.ccclass,k8=P.property;k0=k9("Loading"),k1=k8(ed),k0((k3=g((k2=function(f){i(h,f);var m,g,C=a(h);function h(){var n;o(this,h);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=C.call.apply(C,[this].concat(a)),b(n,"loadingPrefab",k3,k(n)),n.loadingNode=null,n}return y(h,[{key:"__preload",value:function(){this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){t_.lazyValidateProperties(this)}},{key:"onLoad",value:function(){this.makePersistent()}},{key:"makePersistent",value:function(){N.addPersistRootNode(this.node)}},{key:"createLoadingFullScreen",value:function(){var n,i=ek("Canvas");if(i&&!i.getChildByName("Loading")){this.loadingNode||(this.loadingNode=ey(this.loadingPrefab));var a=ey._clone(this.loadingNode);this.loadingFullScreen=a.getComponent(k6),this.node.active=!1,null===(n=ek("Canvas"))||void 0===n||n.addChild(a)}}},{key:"show",value:(g=n(function(n){return _ts_generator(this,function(i){switch(i.label){case 0:if(this.createLoadingFullScreen(),this.node.active)return[3,2];return this.node.active=!0,[4,this.loadingFullScreen.show(n)];case 1:i.sent(),i.label=2;case 2:return[2]}})}),function(n){return g.apply(this,arguments)})},{key:"hide",value:(m=n(function(n){var i;return _ts_generator(this,function(a){switch(a.label){case 0:if(!(null!==(i=this.node)&&void 0!==i&&i.active&&this.loadingFullScreen))return[3,2];return[4,this.loadingFullScreen.hide(n)];case 1:a.sent(),this.node.active=!1,a.label=2;case 2:return[2]}})}),function(n){return m.apply(this,arguments)})}]),h}(O)).prototype,"loadingPrefab",[k1],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k2)),A._RF.pop(),A._RF.push({},"61985gSEDBMY6nVNc9Q1D6W","LoadingScreen",void 0);var Ce,Ct,Cn,Ci,Ca,Co,Cr,Cs,Cl,Cu,Cc,Ch,Cp,Cd,Cy,Cv,Cf,Cm,Cg,Cb,CS,Ck=P.ccclass,CC=P.disallowMultiple,Cw=P.requireComponent,CE=GameCore.Events,CT=globalThis.game.event;Ck("LoadingScreen")(k7=CC(k7=Cw(km)(k7=function(n){i(r,n);var f=a(r);function r(){var n;o(this,r);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return(n=f.call.apply(f,[this].concat(a))).isClosing=!1,n.handleOpeningScreen=function(i){n.validateEventPayload(i)&&(n.enabled=!0,n.isClosing=!1)},n.handleOpenedScreen=function(i){n.validateEventPayload(i)&&n.open()},n.handleClosingScreen=function(i){n.validateEventPayload(i)&&(n.isClosing=!0,n.unscheduleAllCallbacks())},n.handleClosedScreen=function(i){n.validateEventPayload(i)&&(n.enabled=!1,n.isClosing=!1)},n.handleOnCloseScreen=function(){e9.closeScreen(e8.LOADING_SCREEN)},n}return y(r,[{key:"onLoad",value:function(){this.enabled=!1,this.screen=this.getComponent(km),this.validateRequiredComponents(),this.listenScreenEvents()}},{key:"onDestroy",value:function(){this.unListenScreenEvents()}},{key:"validateRequiredComponents",value:function(){t_.lazyValidateProperties(this)}},{key:"listenScreenEvents",value:function(){CT.on(CE.OPENING_SCREEN,this.handleOpeningScreen),CT.on(CE.OPENED_SCREEN,this.handleOpenedScreen),CT.on(CE.CLOSING_SCREEN,this.handleClosingScreen),CT.on(CE.CLOSED_SCREEN,this.handleClosedScreen)}},{key:"unListenScreenEvents",value:function(){CT.off(CE.OPENING_SCREEN,this.handleOpeningScreen),CT.off(CE.OPENED_SCREEN,this.handleOpenedScreen),CT.off(CE.CLOSING_SCREEN,this.handleClosingScreen),CT.off(CE.CLOSED_SCREEN,this.handleClosedScreen)}},{key:"validateEventPayload",value:function(n){return n.screenName===this.node.name}},{key:"open",value:function(){var n;if(this.enabled&&!this.isClosing){var i=null!==(n=this.screen.data.duration)&&void 0!==n?n:0;i>0&&this.scheduleOnce(this.handleOnCloseScreen,i)}}}]),r}(O))||k7)||k7),A._RF.pop(),A._RF.push({},"15681ka+CZC45B7BdUhsnhF","LoseScreen",void 0);var C_,CA,CR,CP,CB,CL,CD,CO,CI=P.ccclass,CN=P.property,CF=P.disallowMultiple,CG=P.requireComponent,CM=GameCore,Cz=CM.Events,Cx=CM.Utils.Decorator,CU=globalThis.game,CH=CU.language,Cj=CU.event;Ce=CI("LoseScreen"),Ct=CG(km),Cn=CN(K),Ci=CN(M),Ca=CN(j),Co=CN(j),Cr=CN(M),Cs=CN(M),Cl=CN(M),Cu=CN(M),Cc=Cx.tryCatch(),Ce(Ch=CF(Ch=Ct((Cd=g((Cp=function(n){i(r,n);var f=a(r);function r(){var n;o(this,r);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return(n=f.call.apply(f,[this].concat(a))).mode="classic",b(n,"levelText",Cd,k(n)),b(n,"retryButton",Cy,k(n)),b(n,"titleRibbon",Cv,k(n)),b(n,"dogeHead",Cf,k(n)),b(n,"retryButtonComponent",Cm,k(n)),b(n,"closeButtonComponent",Cg,k(n)),b(n,"endlessButtonComponent",Cb,k(n)),b(n,"classicButtonComponent",CS,k(n)),n.handleOpeningScreen=function(i){if(!n.screen)throw new Error("LoseScreen: screen not found");n.validateEventPayload(i)&&(n.retryButtonComponent.interactable=!0,n.closeButtonComponent.interactable=!0,n.endlessButtonComponent.interactable=!0,n.classicButtonComponent.interactable=!0)},n.handleOpenedScreen=function(i){n.validateEventPayload(i)&&n.open()},n}return y(r,[{key:"__preload",value:function(){this.enabled=!1,this.screen=this.getComponent(km),this.validateRequiredComponents(),this.listenScreenEvents()}},{key:"onLoad",value:function(){var n=N.getScene();this.mode=n&&n.name===tn.GAME_SCENE?"classic":"endless"}},{key:"onDestroy",value:function(){this.unListenScreenEvents()}},{key:"validateRequiredComponents",value:function(){t_.lazyValidateProperties(this)}},{key:"listenScreenEvents",value:function(){Cj.on(Cz.OPENING_SCREEN,this.handleOpeningScreen),Cj.on(Cz.OPENED_SCREEN,this.handleOpenedScreen)}},{key:"unListenScreenEvents",value:function(){Cj.off(Cz.OPENING_SCREEN,this.handleOpeningScreen),Cj.off(Cz.OPENED_SCREEN,this.handleOpenedScreen)}},{key:"validateEventPayload",value:function(n){return n.screenName===this.node.name}},{key:"open",value:function(){this.setLevelText(),this.resetState(),this.runOpenAnimation()}},{key:"close",value:function(){this.closeButtonComponent.interactable=!1,this.retryButtonComponent.interactable=!1,this.endlessButtonComponent.interactable=!1,this.classicButtonComponent.interactable=!1,e9.closeScreen(e8.LOSE_SCREEN)}},{key:"runOpenAnimation",value:function(){var n=this,i=this.createRibbonAnim(),a=this.createDogeHeadAnim(),o=this.createRetryButtonAnim();if(i&&a&&o){var y=eS({}).delay(.2).call(function(){return i.start()});if("classic"===this.mode){var f=this.createLevelAnim();if(!f)return void console.warn("LoseScreen: levelAnim not found");y.delay(.2).call(function(){return f.start()})}if(y.delay(.3).call(function(){return a.start()}).delay(.2).call(function(){return o.start()}).delay(.2),"endless"===this.mode){var m=this.createClassicButtonAnim();if(!m)return void console.warn("LoseScreen: classicButtonAnim not found");y.call(function(){return m.start()})}else{var g=this.createEndlessButtonAnim();if(!g)return void console.warn("LoseScreen: endlessButtonAnim not found");y.call(function(){return g.start()})}y.call(function(){var i;n.screen.data&&(i=n.screen.data.level),te.showInterstitialAdAsync({forLevel:i,includeSDK:["CrazyGames"]})}).start()}else console.warn("LoseScreen: animations not found")}},{key:"resetState",value:function(){var n=this.retryButton.getComponent(V),i=this.titleRibbon.getComponent(V),a=this.levelText.getComponent(V),o=this.dogeHead.getComponent(V),y=this.classicButtonComponent.getComponent(V),f=this.endlessButtonComponent.getComponent(V);n&&i&&a&&o&&y&&f?(n.opacity=0,i.opacity=0,a.opacity=0,o.opacity=0,y.opacity=0,f.opacity=0,this.dogeHead.setPosition(1e3,-19),this.retryButton.node.active=!1,this.classicButtonComponent.node.active=!1,this.endlessButtonComponent.node.active=!1,this.levelText.node.active=!1):console.warn("LoseScreen: UIOpacity of some component not found")}},{key:"setLevelText",value:function(){var n=this.screen.data.level,i=CH.getText("level");this.levelText.string="".concat(i," ").concat(n)}},{key:"createRibbonAnim",value:function(){var n=this.titleRibbon.getComponent(V);return n?eS(n).set({opacity:0}).to(.3,{opacity:255},{easing:"smooth"}):null}},{key:"createLevelAnim",value:function(){var n=this.levelText.getComponent(V);return n?(this.levelText.node.active=!0,eS(n).set({opacity:0}).to(.3,{opacity:255},{easing:"smooth"})):null}},{key:"createDogeHeadAnim",value:function(){var n=this.dogeHead.getComponent(V);return n?(this.dogeHead.setPosition(0,-97),eS(n).set({opacity:0}).to(.3,{opacity:255},{easing:"smooth"})):null}},{key:"createRetryButtonAnim",value:function(){var n=this.retryButton.getComponent(V);return n?(this.retryButton.node.active=!0,eS(n).set({opacity:0}).to(.4,{opacity:255},{easing:"smooth"})):null}},{key:"createClassicButtonAnim",value:function(){var n=this.classicButtonComponent.getComponent(V);return n?(this.classicButtonComponent.node.active=!0,eS(n).set({opacity:0}).to(.4,{opacity:255},{easing:"smooth"})):null}},{key:"createEndlessButtonAnim",value:function(){var n=this.endlessButtonComponent.getComponent(V);return n?(this.endlessButtonComponent.node.active=!0,eS(n).set({opacity:0}).to(.4,{opacity:255},{easing:"smooth"})):null}},{key:"handleClickedRetryGame",value:function(){this.close(),this.replayGame()}},{key:"handleClickedClassicMode",value:function(){this.close(),tt.switchToGameScene()}},{key:"handleClickedEndlessMode",value:function(){this.close(),tt.switchToEndlessScene()}},{key:"handleClickedClose",value:function(){this.close(),this.replayGame()}},{key:"replayGame",value:function(){this.node.scene.emit(r8.GAME_REPLAY,{level:this.screen.data.level})}}]),r}(O)).prototype,"levelText",[Cn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Cy=g(Cp.prototype,"retryButton",[Ci],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Cv=g(Cp.prototype,"titleRibbon",[Ca],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Cf=g(Cp.prototype,"dogeHead",[Co],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Cm=g(Cp.prototype,"retryButtonComponent",[Cr],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Cg=g(Cp.prototype,"closeButtonComponent",[Cs],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Cb=g(Cp.prototype,"endlessButtonComponent",[Cl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),CS=g(Cp.prototype,"classicButtonComponent",[Cu],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g(Cp.prototype,"setLevelText",[Cc],Object.getOwnPropertyDescriptor(Cp.prototype,"setLevelText"),Cp.prototype),Ch=Cp))||Ch)||Ch),A._RF.pop(),A._RF.push({},"6460akNFfhP9pDOT2Z0+s2R","NotificationScreen",void 0);var CV,CW,Cq,CK,CY,CJ,CZ,CX,CQ,C$,C0,C1,C2,C3,C4,C5,C6,C7,C9,C8,we=P.ccclass,wt=P.disallowMultiple,wn=P.requireComponent,wi=P.property,wa=GameCore,wo=wa.Events,wr=wa.Utils,ws=globalThis.game.event;C_=we("NotificationScreen"),CA=wn(km),CR=wi(K),CP=wi(M),C_(CB=wt(CB=CA((CD=g((CL=function(n){i(r,n);var f=a(r);function r(){var n;o(this,r);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=f.call.apply(f,[this].concat(a)),b(n,"message",CD,k(n)),b(n,"touchZone",CO,k(n)),n.enableCloseOnTouch=!0,n.handleOpeningScreen=function(i){n.validateEventPayload(i)&&n.updateScreenData(i)},n.handleClosingScreen=function(i){n.validateEventPayload(i)&&n.unscheduleAllCallbacks()},n}return y(r,[{key:"__preload",value:function(){this.listenScreenEvents()}},{key:"onDestroy",value:function(){this.unListenScreenEvents()}},{key:"onLoad",value:function(){this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){t_.lazyValidateProperties(this)}},{key:"listenScreenEvents",value:function(){ws.on(wo.OPENING_SCREEN,this.handleOpeningScreen),ws.on(wo.CLOSING_SCREEN,this.handleClosingScreen)}},{key:"unListenScreenEvents",value:function(){ws.off(wo.OPENING_SCREEN,this.handleOpeningScreen),ws.off(wo.CLOSING_SCREEN,this.handleClosingScreen)}},{key:"validateEventPayload",value:function(n){return n.screenName===this.node.name}},{key:"updateScreenData",value:function(n){var i=n.screenData;wr.Valid.isObject(i)?(i.message&&(this.message.string=i.message),i.duration&&i.duration>0&&this.scheduleOnce(function(){e9.closeScreen(e8.NOTIFICATION_SCREEN)},i.duration),!1===i.enableCloseOnTouch?this.enableCloseOnTouch=!1:this.enableCloseOnTouch=!0):console.warn("NotificationScreen: screenData not found")}},{key:"handleClickedClose",value:function(){this.unscheduleAllCallbacks(),e9.closeScreen(e8.NOTIFICATION_SCREEN)}},{key:"closeOnTouch",value:function(){this.enableCloseOnTouch&&this.handleClickedClose()}}]),r}(O)).prototype,"message",[CR],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),CO=g(CL.prototype,"touchZone",[CP],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),CB=CL))||CB)||CB),A._RF.pop(),A._RF.push({},"61932YLC/5CFrE0eD0ez8Zg","SettingsScreen",void 0);var wl,wu,wc,wh,wp,wd,wy,wv,wf,wm,wg,wb,wS,wC,ww,wE,wT,w_,wA,wR,wP,wB,wL,wD,wO,wI,wN=P.ccclass,wF=P.property,wG=P.requireComponent,wM=GameCore,wz=wM.Events,wx=wM.Utils,wU=globalThis.game,wH=wU.player,wj=wU.event;CV=wN("SettingsScreen"),CW=wG(km),Cq=wF(j),CK=wF(j),CY=wF(j),CJ=wF(ao),CZ=wF(ao),CX=wF(ao),CQ=wF(M),C$=wF(M),CV(C0=CW((C2=g((C1=function(n){i(r,n);var f=a(r);function r(){var n;o(this,r);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=f.call.apply(f,[this].concat(a)),b(n,"musicSetting",C2,k(n)),b(n,"soundSetting",C3,k(n)),b(n,"vibrateSetting",C4,k(n)),b(n,"musicSwitch",C5,k(n)),b(n,"soundSwitch",C6,k(n)),b(n,"vibrateSwitch",C7,k(n)),b(n,"closeButtonComponent",C9,k(n)),b(n,"resumeButtonComponent",C8,k(n)),n.triggerSequence="",n.handleOpeningScreen=function(i){n.validateEventPayload(i)&&(n.closeButtonComponent.interactable=!0,n.resumeButtonComponent.interactable=!0,n.updateStatus())},n.handleResetSequence=function(){n.triggerSequence=""},n.handleTriggerUnlockKey=function(i){var a=i.code,o=rc.UNLOCK_SEQUENCE;"number"==typeof a&&-1!==o.indexOf(a.toString())&&(n.triggerSequence+=a.toString(),console.log("SettingsScreen: handleTriggerUnlockKey",a,n.triggerSequence,n.triggerSequence===o),n.triggerSequence===o&&(n.node.scene.emit(rc.Events.UNLOCK_DEV_TOOLS),n.node.off(rc.Events.TRIGGER_UNLOCK_KEY)))},n.updateVibrateButton=function(){var i=n.vibrateSetting.getComponentInChildren(M),a=n.vibrateSetting.getComponentInChildren(ao),o=n.vibrateSetting.getComponentInChildren(nI);if(i&&a&&o){if(wx.Device.isMobile()){var y,f=null!==(y=wH.getPlayerSetting("vibrate"))&&void 0!==y&&y;a.setEnabled(f)}else i.interactable=!1,a.setEnabled(!1),o.changeState(!1)}else console.warn("SettingsScreen: vibrate button missing components")},n}return y(r,[{key:"onLoad",value:function(){this.enabled=!1,this.screen=this.getComponent(km),this.validateRequiredComponents(),this.listenScreenEvents(),this.listenUnlockDevTools(),this.handleGameDistributionUIChanges()}},{key:"onDestroy",value:function(){this.unListenScreenEvents(),this.unListenUnlockDevTools()}},{key:"validateRequiredComponents",value:function(){t_.lazyValidateProperties(this)}},{key:"handleGameDistributionUIChanges",value:function(){if("GameDistributions"===GameSDK.getSDKName()){this.vibrateSetting.active=!1;var n=this.musicSetting.position,i=n.x,a=n.y,o=n.z;this.musicSetting.setPosition(new U(i,a-50,o));var y=this.soundSetting.position,f=y.x,m=y.y,g=y.z;this.soundSetting.setPosition(new U(f,m-50,g))}}},{key:"listenScreenEvents",value:function(){wj.on(wz.OPENING_SCREEN,this.handleOpeningScreen)}},{key:"unListenScreenEvents",value:function(){wj.off(wz.OPENING_SCREEN,this.handleOpeningScreen)}},{key:"validateEventPayload",value:function(n){return n.screenName===this.node.name}},{key:"listenUnlockDevTools",value:function(){this.node.off(rc.Events.TRIGGER_UNLOCK_KEY),this.node.on(rc.Events.TRIGGER_RESET_SEQUENCE,this.handleResetSequence),this.node.on(rc.Events.TRIGGER_UNLOCK_KEY,this.handleTriggerUnlockKey)}},{key:"unListenUnlockDevTools",value:function(){this.node.off(rc.Events.TRIGGER_RESET_SEQUENCE,this.handleResetSequence),this.node.off(rc.Events.TRIGGER_UNLOCK_KEY,this.handleTriggerUnlockKey)}},{key:"open",value:function(){this.updateStatus(),this.runPopUpAnimation(),this.node.emit(rc.Events.TRIGGER_RESET_SEQUENCE)}},{key:"close",value:function(){this.closeButtonComponent.interactable=!1,this.resumeButtonComponent.interactable=!1,this.node.emit(rc.Events.TRIGGER_RESET_SEQUENCE),e9.closeScreen(e8.SETTINGS_SCREEN)}},{key:"updateStatus",value:function(){var n,i,a,o={music:null!==(n=wH.getPlayerSetting("music"))&&void 0!==n&&n,sound:null!==(i=wH.getPlayerSetting("sound"))&&void 0!==i&&i,vibrate:null!==(a=wH.getPlayerSetting("vibrate"))&&void 0!==a&&a};this.musicSwitch?this.soundSwitch?(this.musicSwitch.setEnabled(o.music),this.soundSwitch.setEnabled(o.sound),"GameDistributions"!==GameSDK.getSDKName()&&this.scheduleOnce(this.updateVibrateButton,.1)):console.warn("SettingsScreen: soundSwitch not found"):console.warn("SettingsScreen: musicSwitch not found")}},{key:"runPopUpAnimation",value:function(){this.screen.container||console.warn("SettingsScreen: screen not found")}},{key:"switchMusicButton",value:function(){if(this.musicSwitch){var n=this.musicSwitch.switch();wH.setSetting("music",n),this.node.emit(rc.Events.TRIGGER_UNLOCK_KEY,{code:n?1:0}),n?e2.playMusic():e2.pauseMusic()}else console.warn("SettingsScreen: musicSwitch not found")}},{key:"switchSoundButton",value:function(){if(this.soundSwitch){var n=this.soundSwitch.switch();wH.setSetting("sound",n),this.node.emit(rc.Events.TRIGGER_UNLOCK_KEY,{code:n?3:2})}else console.warn("SettingsScreen: soundSwitch not found")}},{key:"switchVibrateButton",value:function(){if(this.vibrateSwitch){var n=this.vibrateSwitch.switch();wH.setSetting("vibrate",n)}else console.warn("SettingsScreen: vibrateSwitch not found")}},{key:"handleClickedResume",value:function(){this.resumeGame()}},{key:"handleClickedClose",value:function(){this.resumeGame()}},{key:"resumeGame",value:function(){this.close(),this.node.scene.emit(r8.GAME_RESUME)}}]),r}(O)).prototype,"musicSetting",[Cq],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C3=g(C1.prototype,"soundSetting",[CK],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C4=g(C1.prototype,"vibrateSetting",[CY],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C5=g(C1.prototype,"musicSwitch",[CJ],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C6=g(C1.prototype,"soundSwitch",[CZ],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C7=g(C1.prototype,"vibrateSwitch",[CX],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C9=g(C1.prototype,"closeButtonComponent",[CQ],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C8=g(C1.prototype,"resumeButtonComponent",[C$],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C0=C1))||C0),A._RF.pop(),A._RF.push({},"35c09YGmdFA4pHOJFDg1tw5","WinningScreen",void 0);var wV=P.ccclass,wW=P.property,wq=P.disallowMultiple,wK=P.requireComponent,wY=GameCore.Events,wJ=globalThis.game,wZ=wJ.player,wX=wJ.event,wQ=wJ.language;wl=wV("WinningScreen"),wu=wK(km),wc=wW(F),wh=wW(M),wp=wW(M),wd=wW(j),wy=wW(j),wv=wW(K),wf=wW(M),wm=wW(M),wg=wW(M),wb=wW(M),wS=wW(M),wl(wC=wq(wC=wu((wE=g((ww=function(f){i(c,f);var g=a(c);function c(){var n;o(this,c);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return(n=g.call.apply(g,[this].concat(a))).mode="classic",b(n,"titleRibbon",wE,k(n)),b(n,"nextLevelButton",wT,k(n)),b(n,"retryLevelButton",w_,k(n)),b(n,"confettiGroup",wA,k(n)),b(n,"dogeHead",wR,k(n)),b(n,"levelText",wP,k(n)),b(n,"closeButtonComponent",wB,k(n)),b(n,"nextLevelButtonComponent",wL,k(n)),b(n,"retryLevelButtonComponent",wD,k(n)),b(n,"classicButtonComponent",wO,k(n)),b(n,"endlessButtonComponent",wI,k(n)),n.starsCollected=3,n.handleOpeningScreen=function(i){if(!n.screen)throw new Error("WinningScreen: screen not found");n.validateEventPayload(i)&&(n.closeButtonComponent.interactable=!0,n.retryLevelButtonComponent.interactable=!0,n.nextLevelButtonComponent.interactable=!0,n.classicButtonComponent.interactable=!0,n.endlessButtonComponent.interactable=!0)},n.handleOpenedScreen=function(i){n.validateEventPayload(i)&&n.open()},n.handleClosingScreen=function(i){n.validateEventPayload(i)&&n.unscheduleAllCallbacks()},n}return y(c,[{key:"__preload",value:function(){this.enabled=!1,this.screen=this.getComponent(km),this.validateRequiredComponents(),this.listenScreenEvents()}},{key:"onLoad",value:function(){var n=N.getScene();this.mode=n&&n.name===tn.GAME_SCENE?"classic":"endless"}},{key:"onDestroy",value:function(){this.unListenScreenEvents()}},{key:"validateRequiredComponents",value:function(){t_.lazyValidateProperties(this)}},{key:"listenScreenEvents",value:function(){wX.on(wY.OPENING_SCREEN,this.handleOpeningScreen),wX.on(wY.OPENED_SCREEN,this.handleOpenedScreen),wX.on(wY.CLOSING_SCREEN,this.handleClosingScreen)}},{key:"unListenScreenEvents",value:function(){wX.off(wY.OPENING_SCREEN,this.handleOpeningScreen),wX.off(wY.OPENED_SCREEN,this.handleOpenedScreen),wX.off(wY.CLOSING_SCREEN,this.handleClosingScreen)}},{key:"validateEventPayload",value:function(n){return n.screenName===this.node.name}},{key:"start",value:function(){var n=this;this.dogeHead.translate(new U(-1e3,0)),this.scheduleOnce(function(){n.dogeHead.translate(new U(1e3,0))},.1)}},{key:"open",value:function(){var i=this;this.nextLevelButton.node.active=!1,this.retryLevelButton.node.active=!1,this.classicButtonComponent.node.active=!1,this.endlessButtonComponent.node.active=!1,this.closeButtonComponent.interactable=!1,this.classicButtonComponent.interactable=!1,this.endlessButtonComponent.interactable=!1,this.confettiGroup.active=!0,this.updateLevel(),this.updateStars(),this.runRibbonAnimation();var a=this.runStarsAnimation();this.runConfetti(a),this.scheduleOnce(n(function(){var n,a,o,y;return _ts_generator(this,function(f){switch(f.label){case 0:return[4,te.showInterstitialAdAsync({forLevel:i.screen.data.level,excludeSDK:["CrazyGames"]})];case 1:if(f.sent(),i.nextLevelButton.node.active=!0,i.retryLevelButton.node.active=!0,i.closeButtonComponent.interactable=!0,n=i.nextLevelButton.getComponent(V)){if(eS(n).set({opacity:0}).to(.4,{opacity:255},{easing:"smooth"}).start(),a=i.retryLevelButton.getComponent(V)){if(eS(a).set({opacity:0}).delay(.2).to(.4,{opacity:255},{easing:"smooth"}).start(),"classic"===i.mode){if(o=i.createEndlessButtonAnim(),i.endlessButtonComponent.interactable=!0,!o)return[2,void console.warn("WinningScreen: endlessButtonAnim not found")];o.start()}else{if(y=i.createClassicButtonAnim(),i.classicButtonComponent.interactable=!0,!y)return[2,void console.warn("WinningScreen: classicButtonAnim not found")];y.start()}}}return[2]}})}),a),e2.playSound(e4.HAND_CLAP)}},{key:"close",value:function(){this.closeButtonComponent.interactable=!1,this.retryLevelButtonComponent.interactable=!1,this.nextLevelButtonComponent.interactable=!1,this.classicButtonComponent.interactable=!1,this.endlessButtonComponent.interactable=!1,this.confettiGroup.active=!1,e9.closeScreen(e8.WINNING_SCREEN)}},{key:"showCongratulationScreen",value:function(){e9.openScreen(e8.CONGRATULATION_SCREEN,{level:this.screen.data.level})}},{key:"handleClickedNextLevel",value:function(){if(wZ.getGameData()){var n=this.screen.data.level;n?(this.node.scene.emit(r8.NEXT_LEVEL,{level:n}),this.close()):console.warn("WinningScreen: level not found")}else console.warn("WinningScreen: gameData not found")}},{key:"handleClickedRetry",value:function(){this.close(),this.node.scene.emit(r8.GAME_REPLAY,{level:this.screen.data.level})}},{key:"handleClickedClose",value:function(){this.close();var n=this.screen.data.level;this.node.scene.emit(r8.NEXT_LEVEL,{level:n})}},{key:"updateStars",value:function(){var n;this.starsCollected=null!==(n=this.screen.data.stars)&&void 0!==n?n:0}},{key:"updateLevel",value:function(){var n=this.screen.data.level,i=wQ.getText("level");this.levelText.string="".concat(i," ").concat(n)}},{key:"runRibbonAnimation",value:function(){this.titleRibbon.fillRange=0,eS(this.titleRibbon).to(.5,{fillRange:1},{easing:"backInOut"}).start()}},{key:"runStarsAnimation",value:function(){var n=this,i=ek("Container/Stars/RightStar",this.node),a=ek("Container/Stars/LeftStar",this.node),o=ek("Container/Stars/MidStar",this.node),y=[a,o,i];if(!i||!a||!o)return console.warn("WinningScreen: stars not found"),0;for(var f=0;f<y.length;f++){var m=y[f];if(m){var g=m.getChildByName("Star");g?g.active=!1:console.warn("WinningScreen: starComponent not found")}}this.animateStars(y);for(var b,k=1.32,C=0;C<this.starsCollected;C++)if(b=function(){var i=y[C];if(!i)return console.warn("WinningScreen: stars not found"),{v:0};var a=i.getChildByName("Star");if(!a)return console.warn("WinningScreen: starComponent not found"),{v:0};n.scheduleOnce(function(){a.active=!0,e2.playSound(e4.STAR_RAISE)},k),eS(a).set({scale:new U(1.7,1.7,1)}).delay(k).to(.35,{scale:new U(1,1,1)},{easing:"backOut"}).start(),k+=.3}())return b.v;return k}},{key:"animateStars",value:function(n){for(var i=0;i<n.length;i++){var a=n[i];if(!a)return void console.warn("WinningScreen: starEmpty not found");var o=new U(0,0,1),y=new U(1,1,1);1===i&&y.set(1.2,1.2,1),eS(a).set({scale:o}).delay(.7).to(.4,{scale:y},{easing:"backOut"}).start()}}},{key:"createClassicButtonAnim",value:function(){var n=this.classicButtonComponent.getComponent(V);return n?(this.classicButtonComponent.node.active=!0,eS(n).set({opacity:0}).delay(.4).to(.4,{opacity:255},{easing:"smooth"})):null}},{key:"createEndlessButtonAnim",value:function(){var n=this.endlessButtonComponent.getComponent(V);return n?(this.endlessButtonComponent.node.active=!0,eS(n).set({opacity:0}).delay(.4).to(.4,{opacity:255},{easing:"smooth"})):null}},{key:"runConfetti",value:function(n){var i=this;this.stopConfetti();var a=this.confettiGroup.getComponentsInChildren(eW);this.scheduleOnce(function(){if(!1!==i.node.active){var n,o=m(a);try{for(o.s();!(n=o.n()).done;)n.value.resetSystem()}catch(n){o.e(n)}finally{o.f()}}},n)}},{key:"stopConfetti",value:function(){var n,i=this.confettiGroup.getComponentsInChildren(eW),a=m(i);try{for(a.s();!(n=a.n()).done;)n.value.stopSystem()}catch(n){a.e(n)}finally{a.f()}}},{key:"handleClickedClassicMode",value:function(){this.close(),tt.switchToGameScene()}},{key:"handleClickedEndlessMode",value:function(){this.updatePlayerLevelProgress(),this.close(),tt.switchToEndlessScene()}},{key:"updatePlayerLevelProgress",value:function(){if(wZ.getGameData()){var n=this.screen.data.level;n?this.node.scene.emit(r8.UPDATE_LEVEL,{level:n}):console.warn("WinningScreen: level not found")}else console.warn("WinningScreen: gameData not found")}}]),c}(O)).prototype,"titleRibbon",[wc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),wT=g(ww.prototype,"nextLevelButton",[wh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w_=g(ww.prototype,"retryLevelButton",[wp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),wA=g(ww.prototype,"confettiGroup",[wd],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),wR=g(ww.prototype,"dogeHead",[wy],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),wP=g(ww.prototype,"levelText",[wv],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),wB=g(ww.prototype,"closeButtonComponent",[wf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),wL=g(ww.prototype,"nextLevelButtonComponent",[wm],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),wD=g(ww.prototype,"retryLevelButtonComponent",[wg],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),wO=g(ww.prototype,"classicButtonComponent",[wb],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),wI=g(ww.prototype,"endlessButtonComponent",[wS],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),wC=ww))||wC)||wC),A._RF.pop(),A._RF.push({},"ca600QzdYZDSLmGmfSVyz4h","AnimAbortSignal",void 0),GameCore.Utils.Array,A._RF.pop()}}}),function(n){n("virtual:///prerequisite-imports/main","chunks:///main.js")}(function(n,i){System.register(n,[i],function(n,i){return{setters:[function(i){var a={};for(var o in i)if("default"!==o&&"__esModule"!==o)a[o]=i[o];n(a)}],execute:function(){}}})});