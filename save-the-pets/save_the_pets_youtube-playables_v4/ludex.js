"use strict";
function _instanceof1(left, right) {
    return null != right && "u" > typeof Symbol && right[Symbol.hasInstance] ? !!right[Symbol.hasInstance](left) : left instanceof right;
}
function _type_of1(obj) {
    return obj && "u" > typeof Symbol && obj.constructor === Symbol ? "symbol" : typeof obj;
}
function _array_like_to_array(arr, len) {
    (null == len || len > arr.length) && (len = arr.length);
    for(var i = 0, arr2 = Array(len); i < len; i++)arr2[i] = arr[i];
    return arr2;
}
function _array_with_holes(arr) {
    if (Array.isArray(arr)) return arr;
}
function _array_without_holes(arr) {
    if (Array.isArray(arr)) return _array_like_to_array(arr);
}
function _assert_this_initialized(self1) {
    if (void 0 === self1) throw ReferenceError("this hasn't been initialised - super() hasn't been called");
    return self1;
}
function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
    try {
        var info = gen[key](arg), value = info.value;
    } catch (error) {
        reject(error);
        return;
    }
    info.done ? resolve(value) : Promise.resolve(value).then(_next, _throw);
}
function _async_to_generator(fn) {
    return function() {
        var self1 = this, args = arguments;
        return new Promise(function(resolve, reject) {
            var gen = fn.apply(self1, args);
            function _next(value) {
                asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
            }
            function _throw(err) {
                asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
            }
            _next(void 0);
        });
    };
}
function _call_super(_this, derived, args) {
    return derived = _get_prototype_of(derived), _possible_constructor_return(_this, _is_native_reflect_construct() ? Reflect.construct(derived, args || [], _get_prototype_of(_this).constructor) : derived.apply(_this, args));
}
function _class_call_check(instance, Constructor) {
    if (!_instanceof1(instance, Constructor)) throw TypeError("Cannot call a class as a function");
}
function _construct(Parent, args, Class) {
    return (_construct = _is_native_reflect_construct() ? Reflect.construct : function construct(Parent, args, Class) {
        var a = [
            null
        ];
        a.push.apply(a, args);
        var instance = new (Function.bind.apply(Parent, a))();
        return Class && _set_prototype_of(instance, Class.prototype), instance;
    }).apply(null, arguments);
}
function _defineProperties(target, props) {
    for(var i = 0; i < props.length; i++){
        var descriptor = props[i];
        descriptor.enumerable = descriptor.enumerable || !1, descriptor.configurable = !0, "value" in descriptor && (descriptor.writable = !0), Object.defineProperty(target, descriptor.key, descriptor);
    }
}
function _create_class(Constructor, protoProps, staticProps) {
    return protoProps && _defineProperties(Constructor.prototype, protoProps), staticProps && _defineProperties(Constructor, staticProps), Constructor;
}
function _define_property(obj, key, value) {
    return key in obj ? Object.defineProperty(obj, key, {
        value: value,
        enumerable: !0,
        configurable: !0,
        writable: !0
    }) : obj[key] = value, obj;
}
function _get(target, property, receiver) {
    return (_get = "u" > ("u" < typeof Reflect ? "undefined" : _type_of1(Reflect)) && Reflect.get ? Reflect.get : function get(target, property, receiver) {
        var base = _super_prop_base(target, property);
        if (base) {
            var desc = Object.getOwnPropertyDescriptor(base, property);
            return desc.get ? desc.get.call(receiver || target) : desc.value;
        }
    })(target, property, receiver || target);
}
function _get_prototype_of(o) {
    return (_get_prototype_of = Object.setPrototypeOf ? Object.getPrototypeOf : function getPrototypeOf(o) {
        return o.__proto__ || Object.getPrototypeOf(o);
    })(o);
}
function _inherits(subClass, superClass) {
    if ("function" != typeof superClass && null !== superClass) throw TypeError("Super expression must either be null or a function");
    subClass.prototype = Object.create(superClass && superClass.prototype, {
        constructor: {
            value: subClass,
            writable: !0,
            configurable: !0
        }
    }), superClass && _set_prototype_of(subClass, superClass);
}
function _instanceof(left, right) {
    return null != right && "u" > ("u" < typeof Symbol ? "undefined" : _type_of1(Symbol)) && right[Symbol.hasInstance] ? !!right[Symbol.hasInstance](left) : _instanceof1(left, right);
}
function _is_native_function(fn) {
    return -1 !== Function.toString.call(fn).indexOf("[native code]");
}
function _iterable_to_array(iter) {
    if ("u" > ("u" < typeof Symbol ? "undefined" : _type_of1(Symbol)) && null != iter[Symbol.iterator] || null != iter["@@iterator"]) return Array.from(iter);
}
function _iterable_to_array_limit(arr, i) {
    var _s, _e, _i = null == arr ? null : "u" > ("u" < typeof Symbol ? "undefined" : _type_of1(Symbol)) && arr[Symbol.iterator] || arr["@@iterator"];
    if (null != _i) {
        var _arr = [], _n = !0, _d = !1;
        try {
            for(_i = _i.call(arr); !(_n = (_s = _i.next()).done) && (_arr.push(_s.value), !i || _arr.length !== i); _n = !0);
        } catch (err) {
            _d = !0, _e = err;
        } finally{
            try {
                _n || null == _i.return || _i.return();
            } finally{
                if (_d) throw _e;
            }
        }
        return _arr;
    }
}
function _non_iterable_rest() {
    throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _non_iterable_spread() {
    throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _possible_constructor_return(self1, call) {
    return call && ("object" === _type_of(call) || "function" == typeof call) ? call : _assert_this_initialized(self1);
}
function set(target, property, value, receiver) {
    return (set = "u" > ("u" < typeof Reflect ? "undefined" : _type_of1(Reflect)) && Reflect.set ? Reflect.set : function set1(target, property, value, receiver) {
        var desc, base = _super_prop_base(target, property);
        if (base) {
            if ((desc = Object.getOwnPropertyDescriptor(base, property)).set) return desc.set.call(receiver, value), !0;
            if (!desc.writable) return !1;
        }
        if (desc = Object.getOwnPropertyDescriptor(receiver, property)) {
            if (!desc.writable) return !1;
            desc.value = value, Object.defineProperty(receiver, property, desc);
        } else _define_property(receiver, property, value);
        return !0;
    })(target, property, value, receiver);
}
function _set(target, property, value, receiver, isStrict) {
    if (!set(target, property, value, receiver || target) && isStrict) throw Error("failed to set property");
    return value;
}
function _set_prototype_of(o, p) {
    return (_set_prototype_of = Object.setPrototypeOf || function setPrototypeOf(o, p) {
        return o.__proto__ = p, o;
    })(o, p);
}
function _sliced_to_array(arr, i) {
    return _array_with_holes(arr) || _iterable_to_array_limit(arr, i) || _unsupported_iterable_to_array(arr, i) || _non_iterable_rest();
}
function _super_prop_base(object, property) {
    for(; !Object.prototype.hasOwnProperty.call(object, property) && null !== (object = _get_prototype_of(object)););
    return object;
}
function _to_consumable_array(arr) {
    return _array_without_holes(arr) || _iterable_to_array(arr) || _unsupported_iterable_to_array(arr) || _non_iterable_spread();
}
function _type_of(obj) {
    return obj && "u" > typeof Symbol && obj.constructor === Symbol ? "symbol" : typeof obj;
}
function _unsupported_iterable_to_array(o, minLen) {
    if (o) {
        if ("string" == typeof o) return _array_like_to_array(o, minLen);
        var n = Object.prototype.toString.call(o).slice(8, -1);
        if ("Object" === n && o.constructor && (n = o.constructor.name), "Map" === n || "Set" === n) return Array.from(n);
        if ("Arguments" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _array_like_to_array(o, minLen);
    }
}
function _wrap_native_super(Class) {
    var _cache = "function" == typeof Map ? new Map() : void 0;
    return (_wrap_native_super = function wrapNativeSuper(Class) {
        if (null === Class || !_is_native_function(Class)) return Class;
        if ("function" != typeof Class) throw TypeError("Super expression must either be null or a function");
        if (void 0 !== _cache) {
            if (_cache.has(Class)) return _cache.get(Class);
            _cache.set(Class, Wrapper);
        }
        function Wrapper() {
            return _construct(Class, arguments, _get_prototype_of(this).constructor);
        }
        return Wrapper.prototype = Object.create(Class.prototype, {
            constructor: {
                value: Wrapper,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), _set_prototype_of(Wrapper, Class);
    })(Class);
}
function _is_native_reflect_construct() {
    try {
        var result = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {}));
    } catch (_) {}
    return (_is_native_reflect_construct = function _is_native_reflect_construct1() {
        return !!result;
    })();
}
function _ts_generator(thisArg, body) {
    var f, y, t, _ = {
        label: 0,
        sent: function sent() {
            if (1 & t[0]) throw t[1];
            return t[1];
        },
        trys: [],
        ops: []
    }, g = Object.create(("function" == typeof Iterator ? Iterator : Object).prototype), d = Object.defineProperty;
    return d(g, "next", {
        value: verb(0)
    }), d(g, "throw", {
        value: verb(1)
    }), d(g, "return", {
        value: verb(2)
    }), "function" == typeof Symbol && d(g, Symbol.iterator, {
        value: function value() {
            return this;
        }
    }), g;
    function verb(n) {
        return function(v) {
            return step([
                n,
                v
            ]);
        };
    }
    function step(op) {
        if (f) throw TypeError("Generator is already executing.");
        for(; g && (g = 0, op[0] && (_ = 0)), _;)try {
            if (f = 1, y && (t = 2 & op[0] ? y.return : op[0] ? y.throw || ((t = y.return) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            switch(y = 0, t && (op = [
                2 & op[0],
                t.value
            ]), op[0]){
                case 0:
                case 1:
                    t = op;
                    break;
                case 4:
                    return _.label++, {
                        value: op[1],
                        done: !1
                    };
                case 5:
                    _.label++, y = op[1], op = [
                        0
                    ];
                    continue;
                case 7:
                    op = _.ops.pop(), _.trys.pop();
                    continue;
                default:
                    if (!(t = (t = _.trys).length > 0 && t[t.length - 1]) && (6 === op[0] || 2 === op[0])) {
                        _ = 0;
                        continue;
                    }
                    if (3 === op[0] && (!t || op[1] > t[0] && op[1] < t[3])) {
                        _.label = op[1];
                        break;
                    }
                    if (6 === op[0] && _.label < t[1]) {
                        _.label = t[1], t = op;
                        break;
                    }
                    if (t && _.label < t[2]) {
                        _.label = t[2], _.ops.push(op);
                        break;
                    }
                    t[2] && _.ops.pop(), _.trys.pop();
                    continue;
            }
            op = body.call(thisArg, _);
        } catch (e) {
            op = [
                6,
                e
            ], y = 0;
        } finally{
            f = t = 0;
        }
        if (5 & op[0]) throw op[1];
        return {
            value: op[0] ? op[1] : void 0,
            done: !0
        };
    }
}
!function() {
    var define_GAME_CONFIG_default, define_GAME_SDK_CONFIG_default, wc, wev, listeners, originalAddEventListener, MAX_LISTENERS_SIZE, wer, MAX_QUEUE_SIZE, clamp, sdk, AVG_LOAD_MS, MAX_RETRY, RETRY_DELAY, MIN_INTERVAL, SLOW_LOADING_MS, GA_TIMEOUT_MS, INITIAL_PERCENT, TARGET_PERCENT, SDK_WAIT_MS, SDK_MAX_WAIT, progressTimer, stopProgressTimer, startProgressTimer, logError, MARK_NAME, monitorGameSDKFlows, logAnalyticsEvent, slowLoadingTimer, startSlowLoadingCheck, clearSlowLoadingCheck, isGAScriptInit, loadGAScript, initGoogleAnalytics, processGoogleAnalytics, updateUserProperties, finalizeAnalyticsInitialization, initGameSDK, waitForGameSDKAndInitialize, getGamepads, noToolbar, noVConsole, initUtils, setupNoToolbar, setupNoVConsole, MARK_NAMES, initCocos, injectFlushSystem, waitSystemForInitCocos, sanitizeUrl, _YoutubeAdapterRequest, YoutubeAdapterRequest, _YoutubeAdapterImage, YoutubeAdapterImage, empty_script_default, _Context, Context_default, _SDKCommonError, SDKCommonError_default, MAX_WAIT_LUDEX_READY_TIME, _Extra, Extra_default, CommonErrorList, GetCatalogErrorList, PurchaseErrorList, GetPurchasesErrorList, ConsumePurchaseErrorList, PRODUCTS_DATA_MOCK_KEY, PURCHASES_DATA_MOCK_KEY, _Payments, Payments_default, GameName, avatarUrl, _Player, Player_default, _TournamentInstance, TournamentInstance_default, CommonErrorList2, CreateErrorList, JoinErrorList, ShareErrorList, PostScoreErrorList, GetTournamentsErrorList, TOURNAMENTS_DATA_MOCK_KEY, TOURNAMENT_LEADERS_MOCK_KEY, _Tournament, Tournament_default, _GameSDK, GameSDK_default2, _AdInstance, AdInstance_default, ErrorCodes, _YTAdInstance, YTAdInstance_default, _YTExtra, YTExtra_default, _YTPlayer, YTPlayer_default, _YTAdapter, YTAdapter_default, _AccessBlocker, accessBlocker, accessBlocker_default, CREATE_MESSAGE_MAP, _TpError, TpError, _BindingTarget, BindingTarget, _Emitter, Emitter2, _ComplexValue, ComplexValue, _PrimitiveValue, PrimitiveValue, _ReadonlyPrimitiveValue, ReadonlyPrimitiveValue, _ValueMap, ValueMap, _DefiniteRangeConstraint, DefiniteRangeConstraint, _RangeConstraint, RangeConstraint, _StepConstraint, StepConstraint, _NumberLiteralNode, NumberLiteralNode, BINARY_OPERATION_MAP, _BinaryOperationNode, BinaryOperationNode, UNARY_OPERATION_MAP, _UnaryOperationNode, UnaryOperationNode, readDecimalLiteral, readNonDecimalIntegerLiteral, readNumericLiteral, parseBinaryOperationExpression, _BladeApi, BladeApi, _TpEvent, TpEvent, _TpChangeEvent, TpChangeEvent, _TpFoldEvent, TpFoldEvent, _TpTabSelectEvent, TpTabSelectEvent, _TpMouseEvent, TpMouseEvent, _BindingApi, BindingApi, _InputBindingValue, InputBindingValue, MicroParsers, SVG_NS, ICON_ID_TO_INNER_HTML_MAP, PREFIX, cn$r, _LabelView, LabelView, _LabelController, LabelController, cn$q, POS_TO_CLASS_NAME_MAP, _BladeController, BladeController, _LabeledValueBladeController, LabeledValueBladeController, _BindingController, BindingController, _InputBindingController, InputBindingController, _MonitorBindingValue, MonitorBindingValue, _MonitorBindingController, MonitorBindingController, _ButtonApi, ButtonApi, cn$p, _ButtonView, ButtonView, _ButtonController, ButtonController, _ButtonBladeController, ButtonBladeController, _Semver, Semver, VERSION$1, ButtonBladePlugin, _RackApi, RackApi, _ContainerBladeApi, ContainerBladeApi, _ContainerBladeController, ContainerBladeController, _NestedOrderedSet, NestedOrderedSet, _Rack, Rack, _RackController, RackController, _Foldable, Foldable, _FolderApi, FolderApi, bladeContainerClassName, _FolderView, FolderView, _FolderController, FolderController, FolderBladePlugin, cn$o, _ViewProps, ViewProps, cn$n, _TabPageView, TabPageView, cn$m, _TabItemView, TabItemView, _TabItemController, TabItemController, _TabPageController, TabPageController, _TabApi, TabApi, _TabPageApi, TabPageApi, INDEX_NOT_SELECTED, _Tab, Tab, cn$l, _TabView, TabView, _TabController, TabController, TabBladePlugin, _ListInputBindingApi, ListInputBindingApi, _ManualTicker, ManualTicker, _IntervalTicker, IntervalTicker, _CompositeConstraint, CompositeConstraint, _ListConstraint, ListConstraint, cn$k, _ListView, ListView, _ListController, ListController, cn$j, _PopupView, PopupView, _PopupController, PopupController, cn$i, _TextView, TextView, _TextController, TextController, innerFormatter, _PointerHandler, PointerHandler, cn$h, _NumberTextView, NumberTextView, _NumberTextController, NumberTextController, cn$g, _SliderView, SliderView, _SliderController, SliderController, cn$f, _SliderTextView, SliderTextView, _SliderTextController, SliderTextController, CSS_VAR_MAP, cn$e, _CheckboxView, CheckboxView, _CheckboxController, CheckboxController, BooleanInputPlugin, cn$d, _ColorView, ColorView, MODE_CONVERTER_MAP, _IntColor, IntColor, cn$c, _ColorPickerView, ColorPickerView, _FloatColor, FloatColor, TYPE_TO_CONSTRUCTOR_MAP, ANGLE_TO_DEG_MAP, PARSER_AND_RESULT, FORMAT_AND_STRINGIFIERS, cn$b, _APaletteView, APaletteView, _APaletteController, APaletteController, cn$a, _ColorTextsView, ColorTextsView, _ColorTextsController, ColorTextsController, cn$9, _HPaletteView, HPaletteView, _HPaletteController, HPaletteController, cn$8, CANVAS_RESOL, _SvPaletteView, SvPaletteView, _SvPaletteController, SvPaletteController, _ColorPickerController, ColorPickerController, cn$7, _ColorSwatchView, ColorSwatchView, _ColorSwatchController, ColorSwatchController, _ColorController, ColorController, NumberColorInputPlugin, ObjectColorInputPlugin, StringColorInputPlugin, _PointNdConstraint, PointNdConstraint, cn$6, _PointNdTextView, PointNdTextView, _PointNdTextController, PointNdTextController, _SliderInputBindingApi, SliderInputBindingApi, NumberInputPlugin, _Point2d, Point2d, Point2dAssembly, cn$5, _Point2dView, Point2dView, cn$4, _Point2dPickerView, Point2dPickerView, _Point2dPickerController, Point2dPickerController, _Point2dController, Point2dController, Point2dInputPlugin, _Point3d, Point3d, Point3dAssembly, Point3dInputPlugin, _Point4d, Point4d, Point4dAssembly, Point4dInputPlugin, StringInputPlugin, Constants, cn$3, _MultiLogView, MultiLogView, _MultiLogController, MultiLogController, cn$2, _SingleLogView, SingleLogView, _SingleLogController, SingleLogController, BooleanMonitorPlugin, _GraphLogMonitorBindingApi, GraphLogMonitorBindingApi, cn$1, _GraphLogView, GraphLogView, _GraphLogController, GraphLogController, NumberMonitorPlugin, StringMonitorPlugin, _BladeApiCache, BladeApiCache, _ReadWriteBinding, ReadWriteBinding, _ReadonlyBinding, ReadonlyBinding, _PluginPool, PluginPool, sharedCache, _ListBladeApi, ListBladeApi, _SeparatorBladeApi, SeparatorBladeApi, _SliderBladeApi, SliderBladeApi, _TextBladeApi, TextBladeApi, ListBladePlugin, _RootApi, RootApi, _RootController, RootController, cn, _SeparatorView, SeparatorView, _SeparatorController, SeparatorController, SeparatorBladePlugin, SliderBladePlugin, TextBladePlugin, _Pane, Pane, VERSION, I2, _PanelControl, panelControl_default, drawDemoTransitionOnCanvas, getRandomColor, drawDemoTransitionOnCanvas_default, Options_default, import_jszip, T2, I3, B5, D2, O31, _CanvasRecorderPlugin, CanvasRecorderPlugin_default, canvas_recorder_default, disableSimpleTrackErrors = function disableSimpleTrackErrors() {
        var list = [
            "error",
            "unhandledrejection"
        ], listeners2 = null != (_wer___listeners = wer.__listeners) ? _wer___listeners : [], _iteratorNormalCompletion = !0, _didIteratorError = !1, _iteratorError = void 0;
        try {
            for(var _wer___listeners, _step, _iterator = list[Symbol.iterator](); !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = !0){
                var _listeners2_name2, name2 = _step.value;
                (null == (_listeners2_name2 = listeners2[name2]) ? void 0 : _listeners2_name2[0]) && wer.removeEventListener(name2, wer.__listeners[name2].shift());
            }
        } catch (err) {
            _didIteratorError = !0, _iteratorError = err;
        } finally{
            try {
                _iteratorNormalCompletion || null == _iterator.return || _iterator.return();
            } finally{
                if (_didIteratorError) throw _iteratorError;
            }
        }
    }, errorHandler = function errorHandler(error) {
        wer.__errorQueue && (wer.__errorQueue.length >= MAX_QUEUE_SIZE && (wer.__errorQueue.length = 0), wer.__errorQueue.push("string" == typeof error ? Error(error) : error));
    }, init = function init() {
        wer.addEventListener("error", function(event) {
            errorHandler(event.error);
        }), wer.addEventListener("unhandledrejection", function(event) {
            errorHandler(event.reason);
        });
    }, trace = function trace() {
        var args = arguments;
        "event" === args[0] && ("object" !== _type_of(args[2]) && (args[2] = {}), args[2].build = 4, args[2].send_to = "GA", args[2].extend_session = 1), window.dataLayer.push(args);
    }, addGoogleAnalyticsScript = function addGoogleAnalyticsScript() {
        try {
            return;
        } catch (error) {
            console.warn("Error adding preload google analytics script", error);
        }
    }, simpleHash = function simpleHash(str) {
        for(var hash = 0, i = 0; i < str.length; i++)hash = (hash << 5) - hash + str.charCodeAt(i) | 0;
        return hash;
    }, autoDetectAndInitializeSDKAdapter = function autoDetectAndInitializeSDKAdapter() {
        var sdkAdapter, w = window, sdkName = "GameSDK";
        return "FBInstant" in w ? (sdkName = "FBInstant", sdkAdapter = new empty_script_default(window.FBInstant)) : "YaGames" in w ? (sdkName = "Yandex", sdkAdapter = new empty_script_default(window.YaGames)) : "funmax" in w ? (sdkName = "Xiaomi", sdkAdapter = new empty_script_default(window.funmax)) : "$msstart" in w ? (sdkName = "MsGames", sdkAdapter = new empty_script_default(window.$msstart)) : "gdsdk" in w ? (sdkName = "GameDistribution", sdkAdapter = new empty_script_default(window.gdsdk)) : "h5sdk" in w ? (sdkName = "TranssionH5", sdkAdapter = new empty_script_default(window.h5sdk)) : "CrazyGames" in w ? (sdkName = "CrazyGames", sdkAdapter = new empty_script_default(window.CrazyGames.SDK)) : "GlanceGamingAdInterface" in w ? (sdkName = "Glance", sdkAdapter = new empty_script_default(window.GlanceGamingAdInterface)) : "mraid" in w ? (sdkName = "Playable", sdkAdapter = new empty_script_default(window.mraid)) : "MetaHorizon" in w ? (sdkName = "Horizon", sdkAdapter = new empty_script_default(window.MetaHorizon)) : "ytgame" in w ? (sdkName = "YoutubePlayables", sdkAdapter = new YTAdapter_default(window.ytgame)) : sdkAdapter = new GameSDK_default2(), console.info("GameSDK loaded (".concat(sdkName, ")")), console.groupEnd(), sdkAdapter;
    }, forceCast = function forceCast(v) {
        return v;
    }, isEmpty = function isEmpty(value) {
        return null == value;
    }, isObject$1 = function isObject$1(value) {
        return null !== value && (void 0 === value ? "undefined" : _type_of(value)) === "object";
    }, isRecord = function isRecord(value) {
        return null !== value && (void 0 === value ? "undefined" : _type_of(value)) === "object";
    }, deepEqualsArray = function deepEqualsArray(a1, a2) {
        if (a1.length !== a2.length) return !1;
        for(var i = 0; i < a1.length; i++)if (a1[i] !== a2[i]) return !1;
        return !0;
    }, isBinding = function isBinding(value) {
        return !!isObject$1(value) && "target" in value;
    }, createValue = function createValue(initialValue, config) {
        var constraint = null == config ? void 0 : config.constraint, equals = null == config ? void 0 : config.equals;
        return constraint || equals ? new ComplexValue(initialValue, config) : new PrimitiveValue(initialValue);
    }, createReadonlyValue = function createReadonlyValue(value) {
        return [
            new ReadonlyPrimitiveValue(value),
            function(rawValue, options) {
                value.setRawValue(rawValue, options);
            }
        ];
    }, combineReader = function combineReader(parsers) {
        return function(text, cursor) {
            for(var i = 0; i < parsers.length; i++){
                var result3 = parsers[i](text, cursor);
                if ("" !== result3) return result3;
            }
            return "";
        };
    }, readWhitespace = function readWhitespace(text, cursor) {
        var _a, m = text.substr(cursor).match(/^\s+/);
        return null != (_a = m && m[0]) ? _a : "";
    }, readNonZeroDigit = function readNonZeroDigit(text, cursor) {
        var ch = text.substr(cursor, 1);
        return ch.match(/^[1-9]$/) ? ch : "";
    }, readDecimalDigits = function readDecimalDigits(text, cursor) {
        var _a, m = text.substr(cursor).match(/^[0-9]+/);
        return null != (_a = m && m[0]) ? _a : "";
    }, readSignedInteger = function readSignedInteger(text, cursor) {
        var ds = readDecimalDigits(text, cursor);
        if ("" !== ds) return ds;
        var sign = text.substr(cursor, 1);
        if (cursor += 1, "-" !== sign && "+" !== sign) return "";
        var sds = readDecimalDigits(text, cursor);
        return "" === sds ? "" : sign + sds;
    }, readExponentPart = function readExponentPart(text, cursor) {
        var e = text.substr(cursor, 1);
        if (cursor += 1, "e" !== e.toLowerCase()) return "";
        var si = readSignedInteger(text, cursor);
        return "" === si ? "" : e + si;
    }, readDecimalIntegerLiteral = function readDecimalIntegerLiteral(text, cursor) {
        var ch = text.substr(cursor, 1);
        if ("0" === ch) return ch;
        var nzd = readNonZeroDigit(text, cursor);
        return (cursor += nzd.length, "" === nzd) ? "" : nzd + readDecimalDigits(text, cursor);
    }, readDecimalLiteral1 = function readDecimalLiteral1(text, cursor) {
        var dil = readDecimalIntegerLiteral(text, cursor);
        if (cursor += dil.length, "" === dil) return "";
        var dot = text.substr(cursor, 1);
        if (cursor += dot.length, "." !== dot) return "";
        var dds = readDecimalDigits(text, cursor);
        return cursor += dds.length, dil + dot + dds + readExponentPart(text, cursor);
    }, readDecimalLiteral2 = function readDecimalLiteral2(text, cursor) {
        var dot = text.substr(cursor, 1);
        if (cursor += dot.length, "." !== dot) return "";
        var dds = readDecimalDigits(text, cursor);
        return (cursor += dds.length, "" === dds) ? "" : dot + dds + readExponentPart(text, cursor);
    }, readDecimalLiteral3 = function readDecimalLiteral3(text, cursor) {
        var dil = readDecimalIntegerLiteral(text, cursor);
        return (cursor += dil.length, "" === dil) ? "" : dil + readExponentPart(text, cursor);
    }, parseBinaryDigits = function parseBinaryDigits(text, cursor) {
        var _a, m = text.substr(cursor).match(/^[01]+/);
        return null != (_a = m && m[0]) ? _a : "";
    }, readBinaryIntegerLiteral = function readBinaryIntegerLiteral(text, cursor) {
        var prefix = text.substr(cursor, 2);
        if (cursor += prefix.length, "0b" !== prefix.toLowerCase()) return "";
        var bds = parseBinaryDigits(text, cursor);
        return "" === bds ? "" : prefix + bds;
    }, readOctalDigits = function readOctalDigits(text, cursor) {
        var _a, m = text.substr(cursor).match(/^[0-7]+/);
        return null != (_a = m && m[0]) ? _a : "";
    }, readOctalIntegerLiteral = function readOctalIntegerLiteral(text, cursor) {
        var prefix = text.substr(cursor, 2);
        if (cursor += prefix.length, "0o" !== prefix.toLowerCase()) return "";
        var ods = readOctalDigits(text, cursor);
        return "" === ods ? "" : prefix + ods;
    }, readHexDigits = function readHexDigits(text, cursor) {
        var _a, m = text.substr(cursor).match(/^[0-9a-f]+/i);
        return null != (_a = m && m[0]) ? _a : "";
    }, readHexIntegerLiteral = function readHexIntegerLiteral(text, cursor) {
        var prefix = text.substr(cursor, 2);
        if (cursor += prefix.length, "0x" !== prefix.toLowerCase()) return "";
        var hds = readHexDigits(text, cursor);
        return "" === hds ? "" : prefix + hds;
    }, parseLiteral = function parseLiteral(text, cursor) {
        var num = readNumericLiteral(text, cursor);
        return (cursor += num.length, "" === num) ? null : {
            evaluable: new NumberLiteralNode(num),
            cursor: cursor
        };
    }, parseParenthesizedExpression = function parseParenthesizedExpression(text, cursor) {
        var op = text.substr(cursor, 1);
        if (cursor += op.length, "(" !== op) return null;
        var expr = parseExpression(text, cursor);
        if (!expr) return null;
        cursor = expr.cursor, cursor += readWhitespace(text, cursor).length;
        var cl = text.substr(cursor, 1);
        return (cursor += cl.length, ")" !== cl) ? null : {
            evaluable: expr.evaluable,
            cursor: cursor
        };
    }, parsePrimaryExpression = function parsePrimaryExpression(text, cursor) {
        var _a;
        return null != (_a = parseLiteral(text, cursor)) ? _a : parseParenthesizedExpression(text, cursor);
    }, readBinaryOperator = function readBinaryOperator(ops, text, cursor) {
        cursor += readWhitespace(text, cursor).length;
        var op = ops.filter(function(op2) {
            return text.startsWith(op2, cursor);
        })[0];
        return op ? (cursor += op.length, {
            cursor: cursor += readWhitespace(text, cursor).length,
            operator: op
        }) : null;
    }, createBinaryOperationExpressionParser = function createBinaryOperationExpressionParser(exprParser, ops) {
        return function(text, cursor) {
            var firstExpr = exprParser(text, cursor);
            if (!firstExpr) return null;
            cursor = firstExpr.cursor;
            for(var expr = firstExpr.evaluable;;){
                var op = readBinaryOperator(ops, text, cursor);
                if (!op) break;
                var nextExpr = exprParser(text, cursor = op.cursor);
                if (!nextExpr) return null;
                cursor = nextExpr.cursor, expr = new BinaryOperationNode(op.operator, expr, nextExpr.evaluable);
            }
            return expr ? {
                cursor: cursor,
                evaluable: expr
            } : null;
        };
    }, parseExpression = function parseExpression(text, cursor) {
        return cursor += readWhitespace(text, cursor).length, parseBinaryOperationExpression(text, cursor);
    }, parseEcmaNumberExpression = function parseEcmaNumberExpression(text) {
        var expr = parseExpression(text, 0);
        return expr && expr.cursor + readWhitespace(text, expr.cursor).length === text.length ? expr.evaluable : null;
    }, parseNumber = function parseNumber(text) {
        var _a, r = parseEcmaNumberExpression(text);
        return null != (_a = null == r ? void 0 : r.evaluate()) ? _a : null;
    }, numberFromUnknown = function numberFromUnknown(value) {
        if ("number" == typeof value) return value;
        if ("string" == typeof value) {
            var pv = parseNumber(value);
            if (!isEmpty(pv)) return pv;
        }
        return 0;
    }, numberToString = function numberToString(value) {
        return String(value);
    }, createNumberFormatter = function createNumberFormatter(digits) {
        return function(value) {
            return value.toFixed(Math.max(Math.min(digits, 20), 0));
        };
    }, mapRange = function mapRange(value, start1, end1, start2, end2) {
        return start2 + (value - start1) / (end1 - start1) * (end2 - start2);
    }, getDecimalDigits = function getDecimalDigits(value) {
        return String(value.toFixed(10)).split(".")[1].replace(/0+$/, "").length;
    }, constrainRange = function constrainRange(value, min, max) {
        return Math.min(Math.max(value, min), max);
    }, loopRange = function loopRange(value, max) {
        return (value % max + max) % max;
    }, getSuitableDecimalDigits = function getSuitableDecimalDigits(params, rawValue) {
        return isEmpty(params.step) ? Math.max(getDecimalDigits(rawValue), 2) : getDecimalDigits(params.step);
    }, getSuitableKeyScale = function getSuitableKeyScale(params) {
        var _a;
        return null != (_a = params.step) ? _a : 1;
    }, getSuitablePointerScale = function getSuitablePointerScale(params, rawValue) {
        var _a, base = Math.abs(null != (_a = params.step) ? _a : rawValue);
        return 0 === base ? 0.1 : Math.pow(10, Math.floor(Math.log10(base)) - 1);
    }, createStepConstraint = function createStepConstraint(params, initialValue) {
        return isEmpty(params.step) ? null : new StepConstraint(params.step, initialValue);
    }, createRangeConstraint = function createRangeConstraint(params) {
        return isEmpty(params.max) || isEmpty(params.min) ? isEmpty(params.max) && isEmpty(params.min) ? null : new RangeConstraint({
            max: params.max,
            min: params.min
        }) : new DefiniteRangeConstraint({
            max: params.max,
            min: params.min
        });
    }, createNumberTextPropsObject = function createNumberTextPropsObject(params, initialValue) {
        var _a, _b, _c;
        return {
            formatter: null != (_a = params.format) ? _a : createNumberFormatter(getSuitableDecimalDigits(params, initialValue)),
            keyScale: null != (_b = params.keyScale) ? _b : getSuitableKeyScale(params),
            pointerScale: null != (_c = params.pointerScale) ? _c : getSuitablePointerScale(params, initialValue)
        };
    }, createNumberTextInputParamsParser = function createNumberTextInputParamsParser(p) {
        return {
            format: p.optional.function,
            keyScale: p.optional.number,
            max: p.optional.number,
            min: p.optional.number,
            pointerScale: p.optional.number,
            step: p.optional.number
        };
    }, createPointAxis = function createPointAxis(config) {
        return {
            constraint: config.constraint,
            textProps: ValueMap.fromObject(createNumberTextPropsObject(config.params, config.initialValue))
        };
    }, isInputBindingValue = function isInputBindingValue(v) {
        if (!("binding" in v)) return !1;
        var b = v.binding;
        return isBinding(b) && "read" in b && "write" in b;
    }, parseObject = function parseObject(value, keyToParserMap) {
        return forceCast(Object.keys(keyToParserMap).reduce(function(tmp, key) {
            if (void 0 !== tmp) {
                var result4 = (0, keyToParserMap[key])(value[key]);
                return result4.succeeded ? Object.assign(Object.assign({}, tmp), _define_property({}, key, result4.value)) : void 0;
            }
        }, {}));
    }, parseArray = function parseArray(value, parseItem) {
        return value.reduce(function(tmp, item) {
            if (void 0 !== tmp) {
                var result3 = parseItem(item);
                if (result3.succeeded && void 0 !== result3.value) return _to_consumable_array(tmp).concat([
                    result3.value
                ]);
            }
        }, []);
    }, isObject = function isObject(value) {
        return null !== value && (void 0 === value ? "undefined" : _type_of(value)) === "object";
    }, createMicroParserBuilder = function createMicroParserBuilder(parse) {
        return function(optional) {
            return function(v) {
                if (!optional && void 0 === v) return {
                    succeeded: !1,
                    value: void 0
                };
                if (optional && void 0 === v) return {
                    succeeded: !0,
                    value: void 0
                };
                var result3 = parse(v);
                return void 0 !== result3 ? {
                    succeeded: !0,
                    value: result3
                } : {
                    succeeded: !1,
                    value: void 0
                };
            };
        };
    }, createMicroParserBuilders = function createMicroParserBuilders(optional) {
        return {
            custom: __name(function(parse) {
                return createMicroParserBuilder(parse)(optional);
            }, "custom"),
            boolean: createMicroParserBuilder(function(v) {
                return "boolean" == typeof v ? v : void 0;
            })(optional),
            number: createMicroParserBuilder(function(v) {
                return "number" == typeof v ? v : void 0;
            })(optional),
            string: createMicroParserBuilder(function(v) {
                return "string" == typeof v ? v : void 0;
            })(optional),
            function: createMicroParserBuilder(function(v) {
                return "function" == typeof v ? v : void 0;
            })(optional),
            constant: __name(function(value) {
                return createMicroParserBuilder(function(v) {
                    return v === value ? value : void 0;
                })(optional);
            }, "constant"),
            raw: createMicroParserBuilder(function(v) {
                return v;
            })(optional),
            object: __name(function(keyToParserMap) {
                return createMicroParserBuilder(function(v) {
                    if (isObject(v)) return parseObject(v, keyToParserMap);
                })(optional);
            }, "object"),
            array: __name(function(itemParser) {
                return createMicroParserBuilder(function(v) {
                    if (Array.isArray(v)) return parseArray(v, itemParser);
                })(optional);
            }, "array")
        };
    }, parseRecord = function parseRecord(value, keyToParserMap) {
        var map = keyToParserMap(MicroParsers), result3 = MicroParsers.required.object(map)(value);
        return result3.succeeded ? result3.value : void 0;
    }, importBladeState = function importBladeState(state, superImport, parser, callback) {
        if (superImport && !superImport(state)) return !1;
        var result3 = parseRecord(state, parser);
        return !!result3 && callback(result3);
    }, exportBladeState = function exportBladeState(superExport, thisState) {
        var _a;
        return deepMerge(null != (_a = null == superExport ? void 0 : superExport()) ? _a : {}, thisState);
    }, isValueBladeController = function isValueBladeController(bc) {
        return "value" in bc;
    }, isBindingValue = function isBindingValue(v) {
        return !!isObject$1(v) && "binding" in v && isBinding(v.binding);
    }, forceReflow = function forceReflow(element) {
        element.offsetHeight;
    }, disableTransitionTemporarily = function disableTransitionTemporarily(element, callback) {
        var t = element.style.transition;
        element.style.transition = "none", callback(), element.style.transition = t;
    }, supportsTouch = function supportsTouch(doc) {
        return void 0 !== doc.ontouchstart;
    }, getGlobalObject = function getGlobalObject() {
        return globalThis;
    }, getWindowDocument = function getWindowDocument() {
        return forceCast(getGlobalObject()).document;
    }, getCanvasContext = function getCanvasContext(canvasElement) {
        var win = canvasElement.ownerDocument.defaultView;
        return win && "document" in win ? canvasElement.getContext("2d", {
            willReadFrequently: !0
        }) : null;
    }, createSvgIconElement = function createSvgIconElement(document2, iconId) {
        var elem = document2.createElementNS(SVG_NS, "svg");
        return elem.innerHTML = ICON_ID_TO_INNER_HTML_MAP[iconId], elem;
    }, insertElementAt = function insertElementAt(parentElement, element, index) {
        parentElement.insertBefore(element, parentElement.children[index]);
    }, removeElement = function removeElement(element) {
        element.parentElement && element.parentElement.removeChild(element);
    }, removeChildElements = function removeChildElements(element) {
        for(; element.children.length > 0;)element.removeChild(element.children[0]);
    }, removeChildNodes = function removeChildNodes(element) {
        for(; element.childNodes.length > 0;)element.removeChild(element.childNodes[0]);
    }, findNextTarget = function findNextTarget(ev) {
        return ev.relatedTarget ? forceCast(ev.relatedTarget) : "explicitOriginalTarget" in ev ? ev.explicitOriginalTarget : null;
    }, bindValue = function bindValue(value, applyValue) {
        value.emitter.on("change", function(ev) {
            applyValue(ev.rawValue);
        }), applyValue(value.rawValue);
    }, bindValueMap = function bindValueMap(valueMap, key, applyValue) {
        bindValue(valueMap.value(key), applyValue);
    }, ClassName = function ClassName(viewName) {
        return __name(function(opt_elementName, opt_modifier) {
            return PREFIX + "-" + viewName + "v" + (opt_elementName ? "_".concat(opt_elementName) : "") + (opt_modifier ? "-".concat(opt_modifier) : "");
        }, "fn");
    }, createLabelNode = function createLabelNode(doc, label) {
        var frag = doc.createDocumentFragment();
        return label.split("\n").map(function(line) {
            return doc.createTextNode(line);
        }).forEach(function(lineNode, index) {
            index > 0 && frag.appendChild(doc.createElement("br")), frag.appendChild(lineNode);
        }), frag;
    }, getAllBladePositions = function getAllBladePositions() {
        return [
            "veryfirst",
            "first",
            "last",
            "verylast"
        ];
    }, excludeValue = function excludeValue(state) {
        var result3 = Object.assign({}, state);
        return delete result3.value, result3;
    }, isBindingController = function isBindingController(bc) {
        return isValueBladeController(bc) && isBindingValue(bc.value);
    }, isInputBindingController = function isInputBindingController(bc) {
        return isValueBladeController(bc) && isInputBindingValue(bc.value);
    }, fillBuffer = function fillBuffer(buffer, bufferSize) {
        for(; buffer.length < bufferSize;)buffer.push(void 0);
    }, initializeBuffer = function initializeBuffer(bufferSize) {
        var buffer = [];
        return fillBuffer(buffer, bufferSize), buffer;
    }, createTrimmedBuffer = function createTrimmedBuffer(buffer) {
        var index = buffer.indexOf(void 0);
        return forceCast(index < 0 ? buffer : buffer.slice(0, index));
    }, createPushedBuffer = function createPushedBuffer(buffer, newValue) {
        var newBuffer = _to_consumable_array(createTrimmedBuffer(buffer)).concat([
            newValue
        ]);
        return newBuffer.length > buffer.length ? newBuffer.splice(0, newBuffer.length - buffer.length) : fillBuffer(newBuffer, buffer.length), newBuffer;
    }, isMonitorBindingValue = function isMonitorBindingValue(v) {
        if (!("binding" in v)) return !1;
        var b = v.binding;
        return isBinding(b) && "read" in b && !("write" in b);
    }, isMonitorBindingController = function isMonitorBindingController(bc) {
        return isValueBladeController(bc) && isMonitorBindingValue(bc.value);
    }, applyClass = function applyClass(elem, className, active) {
        active ? elem.classList.add(className) : elem.classList.remove(className);
    }, valueToClassName = function valueToClassName(elem, className) {
        return function(value) {
            applyClass(elem, className, value);
        };
    }, bindValueToTextContent = function bindValueToTextContent(value, elem) {
        bindValue(value, function(text) {
            elem.textContent = null != text ? text : "";
        });
    }, createPlugin = function createPlugin(plugin) {
        return Object.assign({
            core: VERSION$1
        }, plugin);
    }, addButtonAsBlade = function addButtonAsBlade(api, params) {
        return api.addBlade(Object.assign(Object.assign({}, params), {
            view: "button"
        }));
    }, addFolderAsBlade = function addFolderAsBlade(api, params) {
        return api.addBlade(Object.assign(Object.assign({}, params), {
            view: "folder"
        }));
    }, addTabAsBlade = function addTabAsBlade(api, params) {
        return api.addBlade(Object.assign(Object.assign({}, params), {
            view: "tab"
        }));
    }, isRefreshable = function isRefreshable(value) {
        return !!isObject$1(value) && "refresh" in value && "function" == typeof value.refresh;
    }, createBindingTarget = function createBindingTarget(obj, key) {
        if (!BindingTarget.isBindable(obj)) throw TpError.notBindable();
        return new BindingTarget(obj, key);
    }, isContainerBladeController = function isContainerBladeController(bc) {
        return "rackController" in bc;
    }, findValueBladeController = function findValueBladeController(bcs, v) {
        for(var i = 0; i < bcs.length; i++){
            var bc = bcs[i];
            if (isValueBladeController(bc) && bc.value === v) return bc;
        }
        return null;
    }, findSubBladeControllerSet = function findSubBladeControllerSet(bc) {
        return isContainerBladeController(bc) ? bc.rackController.rack.bcSet_ : null;
    }, createBlade = function createBlade() {
        return new ValueMap({
            positions: createValue([], {
                equals: deepEqualsArray
            })
        });
    }, computeExpandedFolderHeight = function computeExpandedFolderHeight(folder, containerElement) {
        var height = 0;
        return disableTransitionTemporarily(containerElement, function() {
            folder.set("expandedHeight", null), folder.set("temporaryExpanded", !0), forceReflow(containerElement), height = containerElement.clientHeight, folder.set("temporaryExpanded", null), forceReflow(containerElement);
        }), height;
    }, applyHeight = function applyHeight(foldable, elem) {
        elem.style.height = foldable.styleHeight;
    }, bindFoldable = function bindFoldable(foldable, elem) {
        foldable.value("expanded").emitter.on("beforechange", function() {
            if (foldable.set("completed", !1), isEmpty(foldable.get("expandedHeight"))) {
                var h = computeExpandedFolderHeight(foldable, elem);
                h > 0 && foldable.set("expandedHeight", h);
            }
            foldable.set("shouldFixHeight", !0), forceReflow(elem);
        }), foldable.emitter.on("change", function() {
            applyHeight(foldable, elem);
        }), applyHeight(foldable, elem), elem.addEventListener("transitionend", function(ev) {
            "height" === ev.propertyName && foldable.cleanUpTransition();
        });
    }, valueToModifier = function valueToModifier(elem, modifier) {
        return valueToClassName(elem, cn$o(void 0, modifier));
    }, createBladeController = function createBladeController(plugin, args) {
        var ac = plugin.accept(args.params);
        if (!ac) return null;
        var params = parseRecord(args.params, function(p) {
            return {
                disabled: p.optional.boolean,
                hidden: p.optional.boolean
            };
        });
        return plugin.controller({
            blade: createBlade(),
            document: args.document,
            params: forceCast(Object.assign(Object.assign({}, ac.params), {
                disabled: null == params ? void 0 : params.disabled,
                hidden: null == params ? void 0 : params.hidden
            })),
            viewProps: ViewProps.create({
                disabled: null == params ? void 0 : params.disabled,
                hidden: null == params ? void 0 : params.hidden
            })
        });
    }, findConstraint = function findConstraint(c, constraintClass) {
        if (_instanceof(c, constraintClass)) return c;
        if (_instanceof(c, CompositeConstraint)) {
            var result3 = c.constraints.reduce(function(tmpResult, sc) {
                return tmpResult || (_instanceof(sc, constraintClass) ? sc : null);
            }, null);
            if (result3) return result3;
        }
        return null;
    }, parseListOptions = function parseListOptions(value) {
        var _a, p = MicroParsers;
        return Array.isArray(value) ? null == (_a = parseRecord({
            items: value
        }, function(p2) {
            return {
                items: p2.required.array(p2.required.object({
                    text: p2.required.string,
                    value: p2.required.raw
                }))
            };
        })) ? void 0 : _a.items : (void 0 === value ? "undefined" : _type_of(value)) === "object" ? p.required.raw(value).value : void 0;
    }, normalizeListOptions = function normalizeListOptions(options) {
        if (Array.isArray(options)) return options;
        var items = [];
        return Object.keys(options).forEach(function(text) {
            items.push({
                text: text,
                value: options[text]
            });
        }), items;
    }, createListConstraint = function createListConstraint(options) {
        return isEmpty(options) ? null : new ListConstraint(normalizeListOptions(forceCast(options)));
    }, boolToString = function boolToString(value) {
        return String(value);
    }, boolFromUnknown = function boolFromUnknown(value) {
        return "false" !== value && !!value;
    }, BooleanFormatter = function BooleanFormatter(value) {
        return boolToString(value);
    }, composeParsers = function composeParsers(parsers) {
        return function(text) {
            return parsers.reduce(function(result3, parser) {
                return null !== result3 ? result3 : parser(text);
            }, null);
        };
    }, formatPercentage = function formatPercentage(value) {
        return innerFormatter(value) + "%";
    }, stringFromUnknown = function stringFromUnknown(value) {
        return String(value);
    }, formatString = function formatString(value) {
        return value;
    }, connectValues = function connectValues(param) {
        var primary = param.primary, secondary = param.secondary, forward = param.forward, backward = param.backward, changing = !1;
        function preventFeedback(callback) {
            changing || (changing = !0, callback(), changing = !1);
        }
        __name(preventFeedback, "preventFeedback"), primary.emitter.on("change", function(ev) {
            preventFeedback(function() {
                secondary.setRawValue(forward(primary.rawValue, secondary.rawValue), ev.options);
            });
        }), secondary.emitter.on("change", function(ev) {
            preventFeedback(function() {
                primary.setRawValue(backward(primary.rawValue, secondary.rawValue), ev.options);
            }), preventFeedback(function() {
                secondary.setRawValue(forward(primary.rawValue, secondary.rawValue), ev.options);
            });
        }), preventFeedback(function() {
            secondary.setRawValue(forward(primary.rawValue, secondary.rawValue), {
                forceEmit: !1,
                last: !0
            });
        });
    }, getStepForKey = function getStepForKey(keyScale, keys) {
        var step = keyScale * (keys.altKey ? 0.1 : 1) * (keys.shiftKey ? 10 : 1);
        return keys.upKey ? +step : keys.downKey ? -step : 0;
    }, getVerticalStepKeys = function getVerticalStepKeys(ev) {
        return {
            altKey: ev.altKey,
            downKey: "ArrowDown" === ev.key,
            shiftKey: ev.shiftKey,
            upKey: "ArrowUp" === ev.key
        };
    }, getHorizontalStepKeys = function getHorizontalStepKeys(ev) {
        return {
            altKey: ev.altKey,
            downKey: "ArrowLeft" === ev.key,
            shiftKey: ev.shiftKey,
            upKey: "ArrowRight" === ev.key
        };
    }, isVerticalArrowKey = function isVerticalArrowKey(key) {
        return "ArrowUp" === key || "ArrowDown" === key;
    }, isArrowKey = function isArrowKey(key) {
        return isVerticalArrowKey(key) || "ArrowLeft" === key || "ArrowRight" === key;
    }, computeOffset$1 = function computeOffset$1(ev, elem) {
        var _a, _b, win = elem.ownerDocument.defaultView, rect = elem.getBoundingClientRect();
        return {
            x: ev.pageX - ((null != (_a = win && win.scrollX) ? _a : 0) + rect.left),
            y: ev.pageY - ((null != (_b = win && win.scrollY) ? _b : 0) + rect.top)
        };
    }, createSliderTextProps = function createSliderTextProps(config) {
        return {
            sliderProps: new ValueMap({
                keyScale: config.keyScale,
                max: config.max,
                min: config.min
            }),
            textProps: new ValueMap({
                formatter: createValue(config.formatter),
                keyScale: config.keyScale,
                pointerScale: createValue(config.pointerScale)
            })
        };
    }, getCssVar = function getCssVar(key) {
        return "--".concat(CSS_VAR_MAP[key]);
    }, createPointDimensionParser = function createPointDimensionParser(p) {
        return createNumberTextInputParamsParser(p);
    }, parsePointDimensionParams = function parsePointDimensionParams(value) {
        if (isRecord(value)) return parseRecord(value, createPointDimensionParser);
    }, createDimensionConstraint = function createDimensionConstraint(params, initialValue) {
        if (params) {
            var constraints = [], cs = createStepConstraint(params, initialValue);
            cs && constraints.push(cs);
            var rs = createRangeConstraint(params);
            return rs && constraints.push(rs), new CompositeConstraint(constraints);
        }
    }, isCompatible = function isCompatible(ver) {
        return !!ver && ver.major === VERSION$1.major;
    }, parsePickerLayout = function parsePickerLayout(value) {
        if ("inline" === value || "popup" === value) return value;
    }, writePrimitive = function writePrimitive(target, value) {
        target.write(value);
    }, createConstraint$6 = function createConstraint$6(params) {
        var constraints = [], lc = createListConstraint(params.options);
        return lc && constraints.push(lc), new CompositeConstraint(constraints);
    }, rgbToHslInt = function rgbToHslInt(r, g, b) {
        var rp = constrainRange(r / 255, 0, 1), gp = constrainRange(g / 255, 0, 1), bp = constrainRange(b / 255, 0, 1), cmax = Math.max(rp, gp, bp), cmin = Math.min(rp, gp, bp), c = cmax - cmin, h = 0, s = 0, l = (cmin + cmax) / 2;
        return 0 !== c && (s = c / (1 - Math.abs(cmax + cmin - 1)), h = (h = rp === cmax ? (gp - bp) / c : gp === cmax ? 2 + (bp - rp) / c : 4 + (rp - gp) / c) / 6 + +(h < 0)), [
            360 * h,
            100 * s,
            100 * l
        ];
    }, hslToRgbInt = function hslToRgbInt(h, s, l) {
        var rp, gp, bp, ref, ref1, ref2, ref3, ref4, ref5, hp = (h % 360 + 360) % 360, sp = constrainRange(s / 100, 0, 1), lp = constrainRange(l / 100, 0, 1), c = (1 - Math.abs(2 * lp - 1)) * sp, x = c * (1 - Math.abs(hp / 60 % 2 - 1)), m = lp - c / 2;
        return hp >= 0 && hp < 60 ? (rp = (ref = [
            c,
            x,
            0
        ])[0], gp = ref[1], bp = ref[2]) : hp >= 60 && hp < 120 ? (rp = (ref1 = [
            x,
            c,
            0
        ])[0], gp = ref1[1], bp = ref1[2]) : hp >= 120 && hp < 180 ? (rp = (ref2 = [
            0,
            c,
            x
        ])[0], gp = ref2[1], bp = ref2[2]) : hp >= 180 && hp < 240 ? (rp = (ref3 = [
            0,
            x,
            c
        ])[0], gp = ref3[1], bp = ref3[2]) : hp >= 240 && hp < 300 ? (rp = (ref4 = [
            x,
            0,
            c
        ])[0], gp = ref4[1], bp = ref4[2]) : (rp = (ref5 = [
            c,
            0,
            x
        ])[0], gp = ref5[1], bp = ref5[2]), [
            (rp + m) * 255,
            (gp + m) * 255,
            (bp + m) * 255
        ];
    }, rgbToHsvInt = function rgbToHsvInt(r, g, b) {
        var h, rp = constrainRange(r / 255, 0, 1), gp = constrainRange(g / 255, 0, 1), bp = constrainRange(b / 255, 0, 1), cmax = Math.max(rp, gp, bp), d = cmax - Math.min(rp, gp, bp);
        return [
            h = 0 === d ? 0 : cmax === rp ? ((gp - bp) / d % 6 + 6) % 6 * 60 : cmax === gp ? 60 * ((bp - rp) / d + 2) : 60 * ((rp - gp) / d + 4),
            100 * (0 === cmax ? 0 : d / cmax),
            100 * cmax
        ];
    }, hsvToRgbInt = function hsvToRgbInt(h, s, v) {
        var rp, gp, bp, ref, ref1, ref2, ref3, ref4, ref5, hp = loopRange(h, 360), sp = constrainRange(s / 100, 0, 1), vp = constrainRange(v / 100, 0, 1), c = vp * sp, x = c * (1 - Math.abs(hp / 60 % 2 - 1)), m = vp - c;
        return hp >= 0 && hp < 60 ? (rp = (ref = [
            c,
            x,
            0
        ])[0], gp = ref[1], bp = ref[2]) : hp >= 60 && hp < 120 ? (rp = (ref1 = [
            x,
            c,
            0
        ])[0], gp = ref1[1], bp = ref1[2]) : hp >= 120 && hp < 180 ? (rp = (ref2 = [
            0,
            c,
            x
        ])[0], gp = ref2[1], bp = ref2[2]) : hp >= 180 && hp < 240 ? (rp = (ref3 = [
            0,
            x,
            c
        ])[0], gp = ref3[1], bp = ref3[2]) : hp >= 240 && hp < 300 ? (rp = (ref4 = [
            x,
            0,
            c
        ])[0], gp = ref4[1], bp = ref4[2]) : (rp = (ref5 = [
            c,
            0,
            x
        ])[0], gp = ref5[1], bp = ref5[2]), [
            (rp + m) * 255,
            (gp + m) * 255,
            (bp + m) * 255
        ];
    }, hslToHsvInt = function hslToHsvInt(h, s, l) {
        var sd = l + s * (100 - Math.abs(2 * l - 100)) / 200;
        return [
            h,
            0 !== sd ? s * (100 - Math.abs(2 * l - 100)) / sd : 0,
            l + s * (100 - Math.abs(2 * l - 100)) / 200
        ];
    }, hsvToHslInt = function hsvToHslInt(h, s, v) {
        var sd = 100 - Math.abs(v * (200 - s) / 100 - 100);
        return [
            h,
            0 !== sd ? s * v / sd : 0,
            v * (200 - s) / 200
        ];
    }, removeAlphaComponent = function removeAlphaComponent(comps) {
        return [
            comps[0],
            comps[1],
            comps[2]
        ];
    }, appendAlphaComponent = function appendAlphaComponent(comps, alpha) {
        return [
            comps[0],
            comps[1],
            comps[2],
            alpha
        ];
    }, getColorMaxComponents = function getColorMaxComponents(mode, type) {
        return [
            "float" === type ? 1 : "rgb" === mode ? 255 : 360,
            "float" === type ? 1 : "rgb" === mode ? 255 : 100,
            "float" === type ? 1 : "rgb" === mode ? 255 : 100
        ];
    }, loopHueRange = function loopHueRange(hue, max) {
        return hue === max ? max : loopRange(hue, max);
    }, constrainColorComponents = function constrainColorComponents(components, mode, type) {
        var _a, ms = getColorMaxComponents(mode, type);
        return [
            "rgb" === mode ? constrainRange(components[0], 0, ms[0]) : loopHueRange(components[0], ms[0]),
            constrainRange(components[1], 0, ms[1]),
            constrainRange(components[2], 0, ms[2]),
            constrainRange(null != (_a = components[3]) ? _a : 1, 0, 1)
        ];
    }, convertColorType = function convertColorType(comps, mode, from, to) {
        var fms = getColorMaxComponents(mode, from), tms = getColorMaxComponents(mode, to);
        return comps.map(function(c, index) {
            return c / fms[index] * tms[index];
        });
    }, convertColor = function convertColor(components, from, to) {
        var _MODE_CONVERTER_MAP_from_mode, intComps = convertColorType(components, from.mode, from.type, "int");
        return convertColorType((_MODE_CONVERTER_MAP_from_mode = MODE_CONVERTER_MAP[from.mode])[to.mode].apply(_MODE_CONVERTER_MAP_from_mode, _to_consumable_array(intComps)), to.mode, "int", to.type);
    }, parseColorType = function parseColorType(value) {
        return "int" === value ? "int" : "float" === value ? "float" : void 0;
    }, parseColorInputParams = function parseColorInputParams(params) {
        return parseRecord(params, function(p) {
            return {
                color: p.optional.object({
                    alpha: p.optional.boolean,
                    type: p.optional.custom(parseColorType)
                }),
                expanded: p.optional.boolean,
                picker: p.optional.custom(parsePickerLayout),
                readonly: p.optional.constant(!1)
            };
        });
    }, getKeyScaleForColor = function getKeyScaleForColor(forAlpha) {
        return forAlpha ? 0.1 : 1;
    }, extractColorType = function extractColorType(params) {
        var _a;
        return null == (_a = params.color) ? void 0 : _a.type;
    }, createColor = function createColor(comps, mode, type) {
        return TYPE_TO_CONSTRUCTOR_MAP[type](comps, mode);
    }, isFloatColor = function isFloatColor(c) {
        return "float" === c.type;
    }, isIntColor = function isIntColor(c) {
        return "int" === c.type;
    }, convertFloatToInt = function convertFloatToInt(cf) {
        var comps = cf.getComponents(), ms = getColorMaxComponents(cf.mode, "int");
        return new IntColor([
            Math.round(mapRange(comps[0], 0, 1, 0, ms[0])),
            Math.round(mapRange(comps[1], 0, 1, 0, ms[1])),
            Math.round(mapRange(comps[2], 0, 1, 0, ms[2])),
            comps[3]
        ], cf.mode);
    }, convertIntToFloat = function convertIntToFloat(ci) {
        var comps = ci.getComponents(), ms = getColorMaxComponents(ci.mode, "int");
        return new FloatColor([
            mapRange(comps[0], 0, ms[0], 0, 1),
            mapRange(comps[1], 0, ms[1], 0, 1),
            mapRange(comps[2], 0, ms[2], 0, 1),
            comps[3]
        ], ci.mode);
    }, mapColorType = function mapColorType(c, type) {
        if (c.type === type) return c;
        if (isIntColor(c) && "float" === type) return convertIntToFloat(c);
        if (isFloatColor(c) && "int" === type) return convertFloatToInt(c);
        throw TpError.shouldNeverHappen();
    }, equalsStringColorFormat = function equalsStringColorFormat(f1, f2) {
        return f1.alpha === f2.alpha && f1.mode === f2.mode && f1.notation === f2.notation && f1.type === f2.type;
    }, parseCssNumberOrPercentage = function parseCssNumberOrPercentage(text, max) {
        var m = text.match(/^(.+)%$/);
        return m ? Math.min(0.01 * parseFloat(m[1]) * max, max) : Math.min(parseFloat(text), max);
    }, parseCssNumberOrAngle = function parseCssNumberOrAngle(text) {
        var m = text.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);
        if (!m) return parseFloat(text);
        var angle = parseFloat(m[1]);
        return ANGLE_TO_DEG_MAP[m[2]](angle);
    }, parseFunctionalRgbColorComponents = function parseFunctionalRgbColorComponents(text) {
        var m = text.match(/^rgb\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);
        if (!m) return null;
        var comps = [
            parseCssNumberOrPercentage(m[1], 255),
            parseCssNumberOrPercentage(m[2], 255),
            parseCssNumberOrPercentage(m[3], 255)
        ];
        return isNaN(comps[0]) || isNaN(comps[1]) || isNaN(comps[2]) ? null : comps;
    }, parseFunctionalRgbColor = function parseFunctionalRgbColor(text) {
        var comps = parseFunctionalRgbColorComponents(text);
        return comps ? new IntColor(comps, "rgb") : null;
    }, parseFunctionalRgbaColorComponents = function parseFunctionalRgbaColorComponents(text) {
        var m = text.match(/^rgba\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);
        if (!m) return null;
        var comps = [
            parseCssNumberOrPercentage(m[1], 255),
            parseCssNumberOrPercentage(m[2], 255),
            parseCssNumberOrPercentage(m[3], 255),
            parseCssNumberOrPercentage(m[4], 1)
        ];
        return isNaN(comps[0]) || isNaN(comps[1]) || isNaN(comps[2]) || isNaN(comps[3]) ? null : comps;
    }, parseFunctionalRgbaColor = function parseFunctionalRgbaColor(text) {
        var comps = parseFunctionalRgbaColorComponents(text);
        return comps ? new IntColor(comps, "rgb") : null;
    }, parseFunctionalHslColorComponents = function parseFunctionalHslColorComponents(text) {
        var m = text.match(/^hsl\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);
        if (!m) return null;
        var comps = [
            parseCssNumberOrAngle(m[1]),
            parseCssNumberOrPercentage(m[2], 100),
            parseCssNumberOrPercentage(m[3], 100)
        ];
        return isNaN(comps[0]) || isNaN(comps[1]) || isNaN(comps[2]) ? null : comps;
    }, parseFunctionalHslColor = function parseFunctionalHslColor(text) {
        var comps = parseFunctionalHslColorComponents(text);
        return comps ? new IntColor(comps, "hsl") : null;
    }, parseHslaColorComponents = function parseHslaColorComponents(text) {
        var m = text.match(/^hsla\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);
        if (!m) return null;
        var comps = [
            parseCssNumberOrAngle(m[1]),
            parseCssNumberOrPercentage(m[2], 100),
            parseCssNumberOrPercentage(m[3], 100),
            parseCssNumberOrPercentage(m[4], 1)
        ];
        return isNaN(comps[0]) || isNaN(comps[1]) || isNaN(comps[2]) || isNaN(comps[3]) ? null : comps;
    }, parseFunctionalHslaColor = function parseFunctionalHslaColor(text) {
        var comps = parseHslaColorComponents(text);
        return comps ? new IntColor(comps, "hsl") : null;
    }, parseHexRgbColorComponents = function parseHexRgbColorComponents(text) {
        var mRgb = text.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);
        if (mRgb) return [
            parseInt(mRgb[1] + mRgb[1], 16),
            parseInt(mRgb[2] + mRgb[2], 16),
            parseInt(mRgb[3] + mRgb[3], 16)
        ];
        var mRrggbb = text.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);
        return mRrggbb ? [
            parseInt(mRrggbb[1], 16),
            parseInt(mRrggbb[2], 16),
            parseInt(mRrggbb[3], 16)
        ] : null;
    }, parseHexRgbColor = function parseHexRgbColor(text) {
        var comps = parseHexRgbColorComponents(text);
        return comps ? new IntColor(comps, "rgb") : null;
    }, parseHexRgbaColorComponents = function parseHexRgbaColorComponents(text) {
        var mRgb = text.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);
        if (mRgb) return [
            parseInt(mRgb[1] + mRgb[1], 16),
            parseInt(mRgb[2] + mRgb[2], 16),
            parseInt(mRgb[3] + mRgb[3], 16),
            mapRange(parseInt(mRgb[4] + mRgb[4], 16), 0, 255, 0, 1)
        ];
        var mRrggbb = text.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);
        return mRrggbb ? [
            parseInt(mRrggbb[1], 16),
            parseInt(mRrggbb[2], 16),
            parseInt(mRrggbb[3], 16),
            mapRange(parseInt(mRrggbb[4], 16), 0, 255, 0, 1)
        ] : null;
    }, parseHexRgbaColor = function parseHexRgbaColor(text) {
        var comps = parseHexRgbaColorComponents(text);
        return comps ? new IntColor(comps, "rgb") : null;
    }, parseObjectRgbColorComponents = function parseObjectRgbColorComponents(text) {
        var m = text.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);
        if (!m) return null;
        var comps = [
            parseFloat(m[1]),
            parseFloat(m[2]),
            parseFloat(m[3])
        ];
        return isNaN(comps[0]) || isNaN(comps[1]) || isNaN(comps[2]) ? null : comps;
    }, createObjectRgbColorParser = function createObjectRgbColorParser(type) {
        return function(text) {
            var comps = parseObjectRgbColorComponents(text);
            return comps ? createColor(comps, "rgb", type) : null;
        };
    }, parseObjectRgbaColorComponents = function parseObjectRgbaColorComponents(text) {
        var m = text.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*a\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);
        if (!m) return null;
        var comps = [
            parseFloat(m[1]),
            parseFloat(m[2]),
            parseFloat(m[3]),
            parseFloat(m[4])
        ];
        return isNaN(comps[0]) || isNaN(comps[1]) || isNaN(comps[2]) || isNaN(comps[3]) ? null : comps;
    }, createObjectRgbaColorParser = function createObjectRgbaColorParser(type) {
        return function(text) {
            var comps = parseObjectRgbaColorComponents(text);
            return comps ? createColor(comps, "rgb", type) : null;
        };
    }, detectStringColor = function detectStringColor(text) {
        return PARSER_AND_RESULT.reduce(function(prev, param) {
            var parser = param.parser, detection = param.result;
            return prev || (parser(text) ? detection : null);
        }, null);
    }, detectStringColorFormat = function detectStringColorFormat(text) {
        var type = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : "int", r = detectStringColor(text);
        return r ? "hex" === r.notation && "float" !== type ? Object.assign(Object.assign({}, r), {
            type: "int"
        }) : "func" === r.notation ? Object.assign(Object.assign({}, r), {
            type: type
        }) : null : null;
    }, createColorStringParser = function createColorStringParser(type) {
        var parsers = [
            parseHexRgbColor,
            parseHexRgbaColor,
            parseFunctionalRgbColor,
            parseFunctionalRgbaColor,
            parseFunctionalHslColor,
            parseFunctionalHslaColor
        ];
        "int" === type && parsers.push(createObjectRgbColorParser("int"), createObjectRgbaColorParser("int")), "float" === type && parsers.push(createObjectRgbColorParser("float"), createObjectRgbaColorParser("float"));
        var parser = composeParsers(parsers);
        return function(text) {
            var result3 = parser(text);
            return result3 ? mapColorType(result3, type) : null;
        };
    }, readIntColorString = function readIntColorString(value) {
        var parser = createColorStringParser("int");
        if ("string" != typeof value) return IntColor.black();
        var result3 = parser(value);
        return null != result3 ? result3 : IntColor.black();
    }, zerofill = function zerofill(comp) {
        var hex = constrainRange(Math.floor(comp), 0, 255).toString(16);
        return 1 === hex.length ? "0".concat(hex) : hex;
    }, colorToHexRgbString = function colorToHexRgbString(value) {
        var prefix = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : "#", hexes = removeAlphaComponent(value.getComponents("rgb")).map(zerofill).join("");
        return "".concat(prefix).concat(hexes);
    }, colorToHexRgbaString = function colorToHexRgbaString(value) {
        var prefix = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : "#", rgbaComps = value.getComponents("rgb"), hexes = [
            rgbaComps[0],
            rgbaComps[1],
            rgbaComps[2],
            255 * rgbaComps[3]
        ].map(zerofill).join("");
        return "".concat(prefix).concat(hexes);
    }, colorToFunctionalRgbString = function colorToFunctionalRgbString(value) {
        var formatter = createNumberFormatter(0), comps = removeAlphaComponent(mapColorType(value, "int").getComponents("rgb")).map(function(comp) {
            return formatter(comp);
        });
        return "rgb(".concat(comps.join(", "), ")");
    }, colorToFunctionalRgbaString = function colorToFunctionalRgbaString(value) {
        var aFormatter = createNumberFormatter(2), rgbFormatter = createNumberFormatter(0), comps = mapColorType(value, "int").getComponents("rgb").map(function(comp, index) {
            return (3 === index ? aFormatter : rgbFormatter)(comp);
        });
        return "rgba(".concat(comps.join(", "), ")");
    }, colorToFunctionalHslString = function colorToFunctionalHslString(value) {
        var formatters = [
            createNumberFormatter(0),
            formatPercentage,
            formatPercentage
        ], comps = removeAlphaComponent(mapColorType(value, "int").getComponents("hsl")).map(function(comp, index) {
            return formatters[index](comp);
        });
        return "hsl(".concat(comps.join(", "), ")");
    }, colorToFunctionalHslaString = function colorToFunctionalHslaString(value) {
        var formatters = [
            createNumberFormatter(0),
            formatPercentage,
            formatPercentage,
            createNumberFormatter(2)
        ], comps = mapColorType(value, "int").getComponents("hsl").map(function(comp, index) {
            return formatters[index](comp);
        });
        return "hsla(".concat(comps.join(", "), ")");
    }, colorToObjectRgbString = function colorToObjectRgbString(value, type) {
        var formatter = createNumberFormatter(2 * ("float" === type)), names2 = [
            "r",
            "g",
            "b"
        ], comps = removeAlphaComponent(mapColorType(value, type).getComponents("rgb")).map(function(comp, index) {
            return "".concat(names2[index], ": ").concat(formatter(comp));
        });
        return "{".concat(comps.join(", "), "}");
    }, createObjectRgbColorFormatter = function createObjectRgbColorFormatter(type) {
        return function(value) {
            return colorToObjectRgbString(value, type);
        };
    }, colorToObjectRgbaString = function colorToObjectRgbaString(value, type) {
        var aFormatter = createNumberFormatter(2), rgbFormatter = createNumberFormatter(2 * ("float" === type)), names2 = [
            "r",
            "g",
            "b",
            "a"
        ], comps = mapColorType(value, type).getComponents("rgb").map(function(comp, index) {
            var formatter = 3 === index ? aFormatter : rgbFormatter;
            return "".concat(names2[index], ": ").concat(formatter(comp));
        });
        return "{".concat(comps.join(", "), "}");
    }, createObjectRgbaColorFormatter = function createObjectRgbaColorFormatter(type) {
        return function(value) {
            return colorToObjectRgbaString(value, type);
        };
    }, findColorStringifier = function findColorStringifier(format) {
        return FORMAT_AND_STRINGIFIERS.reduce(function(prev, fas) {
            return prev || (equalsStringColorFormat(fas.format, format) ? fas.stringifier : null);
        }, null);
    }, createModeSelectElement = function createModeSelectElement(doc) {
        var selectElem = doc.createElement("select"), items = [
            {
                text: "RGB",
                value: "rgb"
            },
            {
                text: "HSL",
                value: "hsl"
            },
            {
                text: "HSV",
                value: "hsv"
            },
            {
                text: "HEX",
                value: "hex"
            }
        ];
        return selectElem.appendChild(items.reduce(function(frag, item) {
            var optElem = doc.createElement("option");
            return optElem.textContent = item.text, optElem.value = item.value, frag.appendChild(optElem), frag;
        }, doc.createDocumentFragment())), selectElem;
    }, createFormatter$2 = function createFormatter$2(type) {
        return createNumberFormatter(2 * ("float" === type));
    }, createConstraint$5 = function createConstraint$5(mode, type, index) {
        var max = getColorMaxComponents(mode, type)[index];
        return new DefiniteRangeConstraint({
            min: 0,
            max: max
        });
    }, createComponentController = function createComponentController(doc, config, index) {
        return new NumberTextController(doc, {
            arrayPosition: 0 === index ? "fst" : 2 === index ? "lst" : "mid",
            parser: config.parser,
            props: ValueMap.fromObject({
                formatter: createFormatter$2(config.colorType),
                keyScale: getKeyScaleForColor(!1),
                pointerScale: "float" === config.colorType ? 0.01 : 1
            }),
            value: createValue(0, {
                constraint: createConstraint$5(config.colorMode, config.colorType, index)
            }),
            viewProps: config.viewProps
        });
    }, createComponentControllers = function createComponentControllers(doc, config) {
        var cc = {
            colorMode: config.colorMode,
            colorType: config.colorType,
            parser: parseNumber,
            viewProps: config.viewProps
        };
        return [
            0,
            1,
            2
        ].map(function(i) {
            var c = createComponentController(doc, cc, i);
            return connectValues({
                primary: config.value,
                secondary: c.value,
                forward: function forward(p) {
                    return mapColorType(p, config.colorType).getComponents(config.colorMode)[i];
                },
                backward: function backward(p, s) {
                    var pickedMode = config.colorMode, comps = mapColorType(p, config.colorType).getComponents(pickedMode);
                    return comps[i] = s, mapColorType(createColor(appendAlphaComponent(removeAlphaComponent(comps), comps[3]), pickedMode, config.colorType), "int");
                }
            }), c;
        });
    }, createHexController = function createHexController(doc, config) {
        var c = new TextController(doc, {
            parser: createColorStringParser("int"),
            props: ValueMap.fromObject({
                formatter: colorToHexRgbString
            }),
            value: createValue(IntColor.black()),
            viewProps: config.viewProps
        });
        return connectValues({
            primary: config.value,
            secondary: c.value,
            forward: __name(function(p) {
                return new IntColor(removeAlphaComponent(p.getComponents()), p.mode);
            }, "forward"),
            backward: __name(function(p, s) {
                return new IntColor(appendAlphaComponent(removeAlphaComponent(s.getComponents(p.mode)), p.getComponents()[3]), p.mode);
            }, "backward")
        }), [
            c
        ];
    }, isColorMode = function isColorMode(mode) {
        return "hex" !== mode;
    }, colorToRgbNumber = function colorToRgbNumber(value) {
        return removeAlphaComponent(value.getComponents("rgb")).reduce(function(result3, comp) {
            return result3 << 8 | 255 & Math.floor(comp);
        }, 0);
    }, colorToRgbaNumber = function colorToRgbaNumber(value) {
        return value.getComponents("rgb").reduce(function(result3, comp, index) {
            return result3 << 8 | 255 & Math.floor(3 === index ? 255 * comp : comp);
        }, 0) >>> 0;
    }, numberToRgbColor = function numberToRgbColor(num) {
        return new IntColor([
            num >> 16 & 255,
            num >> 8 & 255,
            255 & num
        ], "rgb");
    }, numberToRgbaColor = function numberToRgbaColor(num) {
        return new IntColor([
            num >> 24 & 255,
            num >> 16 & 255,
            num >> 8 & 255,
            mapRange(255 & num, 0, 255, 0, 1)
        ], "rgb");
    }, colorFromRgbNumber = function colorFromRgbNumber(value) {
        return "number" != typeof value ? IntColor.black() : numberToRgbColor(value);
    }, colorFromRgbaNumber = function colorFromRgbaNumber(value) {
        return "number" != typeof value ? IntColor.black() : numberToRgbaColor(value);
    }, isRgbColorComponent = function isRgbColorComponent(obj, key) {
        return !((void 0 === obj ? "undefined" : _type_of(obj)) !== "object" || isEmpty(obj)) && key in obj && "number" == typeof obj[key];
    }, isRgbColorObject = function isRgbColorObject(obj) {
        return isRgbColorComponent(obj, "r") && isRgbColorComponent(obj, "g") && isRgbColorComponent(obj, "b");
    }, isRgbaColorObject = function isRgbaColorObject(obj) {
        return isRgbColorObject(obj) && isRgbColorComponent(obj, "a");
    }, isColorObject = function isColorObject(obj) {
        return isRgbColorObject(obj);
    }, equalsColor = function equalsColor(v1, v2) {
        if (v1.mode !== v2.mode || v1.type !== v2.type) return !1;
        for(var comps1 = v1.getComponents(), comps2 = v2.getComponents(), i = 0; i < comps1.length; i++)if (comps1[i] !== comps2[i]) return !1;
        return !0;
    }, createColorComponentsFromRgbObject = function createColorComponentsFromRgbObject(obj) {
        return "a" in obj ? [
            obj.r,
            obj.g,
            obj.b,
            obj.a
        ] : [
            obj.r,
            obj.g,
            obj.b
        ];
    }, createColorStringWriter = function createColorStringWriter(format) {
        var stringify = findColorStringifier(format);
        return stringify ? function(target, value) {
            writePrimitive(target, stringify(value));
        } : null;
    }, createColorNumberWriter = function createColorNumberWriter(supportsAlpha) {
        var colorToNumber = supportsAlpha ? colorToRgbaNumber : colorToRgbNumber;
        return function(target, value) {
            writePrimitive(target, colorToNumber(value));
        };
    }, writeRgbaColorObject = function writeRgbaColorObject(target, value, type) {
        var obj = mapColorType(value, type).toRgbaObject();
        target.writeProperty("r", obj.r), target.writeProperty("g", obj.g), target.writeProperty("b", obj.b), target.writeProperty("a", obj.a);
    }, writeRgbColorObject = function writeRgbColorObject(target, value, type) {
        var obj = mapColorType(value, type).toRgbaObject();
        target.writeProperty("r", obj.r), target.writeProperty("g", obj.g), target.writeProperty("b", obj.b);
    }, createColorObjectWriter = function createColorObjectWriter(supportsAlpha, type) {
        return function(target, inValue) {
            supportsAlpha ? writeRgbaColorObject(target, inValue, type) : writeRgbColorObject(target, inValue, type);
        };
    }, shouldSupportAlpha$1 = function shouldSupportAlpha$1(inputParams) {
        var _a;
        return null != (_a = null == inputParams ? void 0 : inputParams.color) && !!_a.alpha;
    }, createFormatter$1 = function createFormatter$1(supportsAlpha) {
        return supportsAlpha ? function(v) {
            return colorToHexRgbaString(v, "0x");
        } : function(v) {
            return colorToHexRgbString(v, "0x");
        };
    }, isForColor = function isForColor(params) {
        return "color" in params || "color" === params.view;
    }, colorFromObject = function colorFromObject(value, type) {
        if (!isColorObject(value)) return mapColorType(IntColor.black(), type);
        if ("int" === type) {
            var comps = createColorComponentsFromRgbObject(value);
            return new IntColor(comps, "rgb");
        }
        if ("float" === type) {
            var comps1 = createColorComponentsFromRgbObject(value);
            return new FloatColor(comps1, "rgb");
        }
        return mapColorType(IntColor.black(), "int");
    }, shouldSupportAlpha = function shouldSupportAlpha(initialValue) {
        return isRgbaColorObject(initialValue);
    }, createColorObjectBindingReader = function createColorObjectBindingReader(type) {
        return function(value) {
            return mapColorType(colorFromObject(value, type), "int");
        };
    }, createColorObjectFormatter = function createColorObjectFormatter(supportsAlpha, type) {
        return function(value) {
            return supportsAlpha ? colorToObjectRgbaString(value, type) : colorToObjectRgbString(value, type);
        };
    }, createAxisController = function createAxisController(doc, config, index) {
        return new NumberTextController(doc, {
            arrayPosition: 0 === index ? "fst" : index === config.axes.length - 1 ? "lst" : "mid",
            parser: config.parser,
            props: config.axes[index].textProps,
            value: createValue(0, {
                constraint: config.axes[index].constraint
            }),
            viewProps: config.viewProps
        });
    }, createConstraint$4 = function createConstraint$4(params, initialValue) {
        var constraints = [], sc = createStepConstraint(params, initialValue);
        sc && constraints.push(sc);
        var rc = createRangeConstraint(params);
        rc && constraints.push(rc);
        var lc = createListConstraint(params.options);
        return lc && constraints.push(lc), new CompositeConstraint(constraints);
    }, computeOffset = function computeOffset(ev, keyScales, invertsY) {
        return [
            getStepForKey(keyScales[0], getHorizontalStepKeys(ev)),
            getStepForKey(keyScales[1], getVerticalStepKeys(ev)) * (invertsY ? 1 : -1)
        ];
    }, point2dFromUnknown = function point2dFromUnknown(value) {
        return Point2d.isObject(value) ? new Point2d(value.x, value.y) : new Point2d();
    }, writePoint2d = function writePoint2d(target, value) {
        target.writeProperty("x", value.x), target.writeProperty("y", value.y);
    }, createConstraint$3 = function createConstraint$3(params, initialValue) {
        return new PointNdConstraint({
            assembly: Point2dAssembly,
            components: [
                createDimensionConstraint(Object.assign(Object.assign({}, params), params.x), initialValue.x),
                createDimensionConstraint(Object.assign(Object.assign({}, params), params.y), initialValue.y)
            ]
        });
    }, getSuitableMaxDimensionValue = function getSuitableMaxDimensionValue(params, rawValue) {
        var _a, _b;
        return isEmpty(params.min) && isEmpty(params.max) ? Math.max(10 * Math.abs(getSuitableKeyScale(params)), 10 * Math.abs(rawValue)) : Math.max(Math.abs(null != (_a = params.min) ? _a : 0), Math.abs(null != (_b = params.max) ? _b : 0));
    }, getSuitableMax = function getSuitableMax(params, initialValue) {
        var _a, _b;
        return Math.max(getSuitableMaxDimensionValue(deepMerge(params, null != (_a = params.x) ? _a : {}), initialValue.x), getSuitableMaxDimensionValue(deepMerge(params, null != (_b = params.y) ? _b : {}), initialValue.y));
    }, shouldInvertY = function shouldInvertY(params) {
        if (!("y" in params)) return !1;
        var yParams = params.y;
        return !!yParams && "inverted" in yParams && !!yParams.inverted;
    }, point3dFromUnknown = function point3dFromUnknown(value) {
        return Point3d.isObject(value) ? new Point3d(value.x, value.y, value.z) : new Point3d();
    }, writePoint3d = function writePoint3d(target, value) {
        target.writeProperty("x", value.x), target.writeProperty("y", value.y), target.writeProperty("z", value.z);
    }, createConstraint$2 = function createConstraint$2(params, initialValue) {
        return new PointNdConstraint({
            assembly: Point3dAssembly,
            components: [
                createDimensionConstraint(Object.assign(Object.assign({}, params), params.x), initialValue.x),
                createDimensionConstraint(Object.assign(Object.assign({}, params), params.y), initialValue.y),
                createDimensionConstraint(Object.assign(Object.assign({}, params), params.z), initialValue.z)
            ]
        });
    }, point4dFromUnknown = function point4dFromUnknown(value) {
        return Point4d.isObject(value) ? new Point4d(value.x, value.y, value.z, value.w) : new Point4d();
    }, writePoint4d = function writePoint4d(target, value) {
        target.writeProperty("x", value.x), target.writeProperty("y", value.y), target.writeProperty("z", value.z), target.writeProperty("w", value.w);
    }, createConstraint$1 = function createConstraint$1(params, initialValue) {
        return new PointNdConstraint({
            assembly: Point4dAssembly,
            components: [
                createDimensionConstraint(Object.assign(Object.assign({}, params), params.x), initialValue.x),
                createDimensionConstraint(Object.assign(Object.assign({}, params), params.y), initialValue.y),
                createDimensionConstraint(Object.assign(Object.assign({}, params), params.z), initialValue.z),
                createDimensionConstraint(Object.assign(Object.assign({}, params), params.w), initialValue.w)
            ]
        });
    }, createConstraint = function createConstraint(params) {
        var constraints = [], lc = createListConstraint(params.options);
        return lc && constraints.push(lc), new CompositeConstraint(constraints);
    }, createFormatter = function createFormatter(params) {
        return isEmpty(params.format) ? createNumberFormatter(2) : params.format;
    }, createTextMonitor = function createTextMonitor(args) {
        var _a;
        return 1 === args.value.rawValue.length ? new SingleLogController(args.document, {
            formatter: createFormatter(args.params),
            value: args.value,
            viewProps: args.viewProps
        }) : new MultiLogController(args.document, {
            formatter: createFormatter(args.params),
            rows: null != (_a = args.params.rows) ? _a : Constants.monitor.defaultRows,
            value: args.value,
            viewProps: args.viewProps
        });
    }, createGraphMonitor = function createGraphMonitor(args) {
        var _a, _b, _c;
        return new GraphLogController(args.document, {
            formatter: createFormatter(args.params),
            rows: null != (_a = args.params.rows) ? _a : Constants.monitor.defaultRows,
            props: ValueMap.fromObject({
                max: null != (_b = args.params.max) ? _b : 100,
                min: null != (_c = args.params.min) ? _c : 0
            }),
            value: args.value,
            viewProps: args.viewProps
        });
    }, shouldShowGraph = function shouldShowGraph(params) {
        return "graph" === params.view;
    }, createInputBindingController = function createInputBindingController(plugin, args) {
        var _a, result3 = plugin.accept(args.target.read(), args.params);
        if (isEmpty(result3)) return null;
        var valueArgs = {
            target: args.target,
            initialValue: result3.initialValue,
            params: result3.params
        }, params = parseRecord(args.params, function(p) {
            return {
                disabled: p.optional.boolean,
                hidden: p.optional.boolean,
                label: p.optional.string,
                tag: p.optional.string
            };
        }), reader = plugin.binding.reader(valueArgs), constraint = plugin.binding.constraint ? plugin.binding.constraint(valueArgs) : void 0, binding = new ReadWriteBinding({
            reader: reader,
            target: args.target,
            writer: plugin.binding.writer(valueArgs)
        }), value = new InputBindingValue(createValue(reader(result3.initialValue), {
            constraint: constraint,
            equals: plugin.binding.equals
        }), binding), controller = plugin.controller({
            constraint: constraint,
            document: args.document,
            initialValue: result3.initialValue,
            params: result3.params,
            value: value,
            viewProps: ViewProps.create({
                disabled: null == params ? void 0 : params.disabled,
                hidden: null == params ? void 0 : params.hidden
            })
        });
        return new InputBindingController(args.document, {
            blade: createBlade(),
            props: ValueMap.fromObject({
                label: "label" in args.params ? null != (_a = null == params ? void 0 : params.label) ? _a : null : args.target.key
            }),
            tag: null == params ? void 0 : params.tag,
            value: value,
            valueController: controller
        });
    }, createTicker = function createTicker(document2, interval) {
        return 0 === interval ? new ManualTicker() : new IntervalTicker(document2, null != interval ? interval : Constants.monitor.defaultInterval);
    }, createMonitorBindingController = function createMonitorBindingController(plugin, args) {
        var _a, _b, _c, result3 = plugin.accept(args.target.read(), args.params);
        if (isEmpty(result3)) return null;
        var bindingArgs = {
            target: args.target,
            initialValue: result3.initialValue,
            params: result3.params
        }, params = parseRecord(args.params, function(p) {
            return {
                bufferSize: p.optional.number,
                disabled: p.optional.boolean,
                hidden: p.optional.boolean,
                interval: p.optional.number,
                label: p.optional.string
            };
        }), reader = plugin.binding.reader(bindingArgs), bufferSize = null != (_b = null != (_a = null == params ? void 0 : params.bufferSize) ? _a : plugin.binding.defaultBufferSize && plugin.binding.defaultBufferSize(result3.params)) ? _b : 1, value = new MonitorBindingValue({
            binding: new ReadonlyBinding({
                reader: reader,
                target: args.target
            }),
            bufferSize: bufferSize,
            ticker: createTicker(args.document, null == params ? void 0 : params.interval)
        }), controller = plugin.controller({
            document: args.document,
            params: result3.params,
            value: value,
            viewProps: ViewProps.create({
                disabled: null == params ? void 0 : params.disabled,
                hidden: null == params ? void 0 : params.hidden
            })
        });
        return controller.viewProps.bindDisabled(value.ticker), controller.viewProps.handleDispose(function() {
            value.ticker.dispose();
        }), new MonitorBindingController(args.document, {
            blade: createBlade(),
            props: ValueMap.fromObject({
                label: "label" in args.params ? null != (_c = null == params ? void 0 : params.label) ? _c : null : args.target.key
            }),
            value: value,
            valueController: controller
        });
    }, createDefaultPluginPool = function createDefaultPluginPool() {
        var pool = new PluginPool(sharedCache);
        return [
            Point2dInputPlugin,
            Point3dInputPlugin,
            Point4dInputPlugin,
            StringInputPlugin,
            NumberInputPlugin,
            StringColorInputPlugin,
            ObjectColorInputPlugin,
            NumberColorInputPlugin,
            BooleanInputPlugin,
            BooleanMonitorPlugin,
            StringMonitorPlugin,
            NumberMonitorPlugin,
            ButtonBladePlugin,
            FolderBladePlugin,
            TabBladePlugin
        ].forEach(function(p) {
            pool.register("core", p);
        }), pool;
    }, createDefaultWrapperElement = function createDefaultWrapperElement(doc) {
        var elem = doc.createElement("div");
        return elem.classList.add(ClassName("dfw")()), doc.body && doc.body.appendChild(elem), elem;
    }, embedStyle = function embedStyle(doc, id, css) {
        if (!doc.querySelector("style[data-tp-style=".concat(id, "]"))) {
            var styleElem = doc.createElement("style");
            styleElem.dataset.tpStyle = id, styleElem.textContent = css, doc.head.appendChild(styleElem);
        }
    }, fun = function fun(input) {
        for(var minLength = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 2, result3 = [], words = input.split(" "), n = words.length, len = n; len >= 1; len--)for(var i = 0; i <= n - len; i++){
            var substr = words.slice(i, i + len).join(" ");
            input.split(substr).length - 1 >= minLength && 0 > result3.indexOf(substr) && substr.length > 1 && result3.push(substr);
        }
        return result3.sort(function(a, b) {
            return a.length - b.length;
        });
    }, generateNameUsingString = function generateNameUsingString(seed) {
        var hash = createHash(seed), firstNameIndex = hash % firstNames.length, lastNameIndex = (hash >> 8) % lastNames.length, numberValue = (hash >> 16) % 1e4;
        return "".concat(firstNames[firstNameIndex]).concat(lastNames[lastNameIndex]).concat(numberValue);
    }, requestSetLocale$ = function requestSetLocale$(locale2) {
        codex.event.emit(Events2.REQUEST_LANGUAGE, {
            locale: locale2
        });
    }, nullOrNotEmpty = function nullOrNotEmpty(value) {
        return V11.isEmpty(value) ? null : value;
    }, __create = Object.create, __defProp = Object.defineProperty, __defProps = Object.defineProperties, __getOwnPropDesc = Object.getOwnPropertyDescriptor, __getOwnPropDescs = Object.getOwnPropertyDescriptors, __getOwnPropNames = Object.getOwnPropertyNames, __getOwnPropSymbols = Object.getOwnPropertySymbols, __getProtoOf = Object.getPrototypeOf, __hasOwnProp = Object.prototype.hasOwnProperty, __propIsEnum = Object.prototype.propertyIsEnumerable, __pow = Math.pow, __defNormalProp = function __defNormalProp(obj, key, value) {
        return key in obj ? __defProp(obj, key, {
            enumerable: !0,
            configurable: !0,
            writable: !0,
            value: value
        }) : obj[key] = value;
    }, __spreadValues = function __spreadValues(a, b) {
        for(var prop in b || (b = {}))__hasOwnProp.call(b, prop) && __defNormalProp(a, prop, b[prop]);
        var _iteratorNormalCompletion = !0, _didIteratorError = !1, _iteratorError = void 0;
        if (__getOwnPropSymbols) try {
            for(var _step, _iterator = __getOwnPropSymbols(b)[Symbol.iterator](); !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = !0){
                var prop = _step.value;
                __propIsEnum.call(b, prop) && __defNormalProp(a, prop, b[prop]);
            }
        } catch (err) {
            _didIteratorError = !0, _iteratorError = err;
        } finally{
            try {
                _iteratorNormalCompletion || null == _iterator.return || _iterator.return();
            } finally{
                if (_didIteratorError) throw _iteratorError;
            }
        }
        return a;
    }, __spreadProps = function __spreadProps(a, b) {
        return __defProps(a, __getOwnPropDescs(b));
    }, __name = function __name(target, value) {
        return __defProp(target, "name", {
            value: value,
            configurable: !0
        });
    }, __require = function(x) {
        return "u" > ("u" < typeof require ? "undefined" : _type_of1(require)) ? require : "u" > ("u" < typeof Proxy ? "undefined" : _type_of1(Proxy)) ? new Proxy(x, {
            get: function get(a, b) {
                return ("u" > ("u" < typeof require ? "undefined" : _type_of1(require)) ? require : a)[b];
            }
        }) : x;
    }(function(x) {
        if ("u" > ("u" < typeof require ? "undefined" : _type_of1(require))) return require.apply(this, arguments);
        throw Error('Dynamic require of "' + x + '" is not supported');
    }), __objRest = function __objRest(source, exclude) {
        var target = {};
        for(var prop in source)__hasOwnProp.call(source, prop) && 0 > exclude.indexOf(prop) && (target[prop] = source[prop]);
        var _iteratorNormalCompletion = !0, _didIteratorError = !1, _iteratorError = void 0;
        if (null != source && __getOwnPropSymbols) try {
            for(var _step, _iterator = __getOwnPropSymbols(source)[Symbol.iterator](); !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = !0){
                var prop = _step.value;
                0 > exclude.indexOf(prop) && __propIsEnum.call(source, prop) && (target[prop] = source[prop]);
            }
        } catch (err) {
            _didIteratorError = !0, _iteratorError = err;
        } finally{
            try {
                _iteratorNormalCompletion || null == _iterator.return || _iterator.return();
            } finally{
                if (_didIteratorError) throw _iteratorError;
            }
        }
        return target;
    }, __esm = function __esm(fn2, res) {
        return function __init() {
            return fn2 && (res = (0, fn2[__getOwnPropNames(fn2)[0]])(fn2 = 0)), res;
        };
    }, __commonJS = function __commonJS(cb, mod) {
        return function __require2() {
            return mod || (0, cb[__getOwnPropNames(cb)[0]])((mod = {
                exports: {}
            }).exports, mod), mod.exports;
        };
    }, __export = function __export(target, all) {
        for(var name2 in all)__defProp(target, name2, {
            get: all[name2],
            enumerable: !0
        });
    }, __copyProps = function __copyProps(to, from, except, desc) {
        if (from && (void 0 === from ? "undefined" : _type_of(from)) === "object" || "function" == typeof from) {
            var _iteratorNormalCompletion = !0, _didIteratorError = !1, _iteratorError = void 0;
            try {
                for(var _step, _loop = function _loop() {
                    var key = _step.value;
                    __hasOwnProp.call(to, key) || key === except || __defProp(to, key, {
                        get: function get() {
                            return from[key];
                        },
                        enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable
                    });
                }, _iterator = __getOwnPropNames(from)[Symbol.iterator](); !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = !0)_loop();
            } catch (err) {
                _didIteratorError = !0, _iteratorError = err;
            } finally{
                try {
                    _iteratorNormalCompletion || null == _iterator.return || _iterator.return();
                } finally{
                    if (_didIteratorError) throw _iteratorError;
                }
            }
        }
        return to;
    }, __toESM = function __toESM(mod, isNodeMode, target) {
        return target = null != mod ? __create(__getProtoOf(mod)) : {}, __copyProps(!isNodeMode && mod && mod.__esModule ? target : __defProp(target, "default", {
            value: mod,
            enumerable: !0
        }), mod);
    }, __decorateClass = function __decorateClass(decorators, target, key, kind) {
        for(var decorator, result3 = kind > 1 ? void 0 : kind ? __getOwnPropDesc(target, key) : target, i = decorators.length - 1; i >= 0; i--)(decorator = decorators[i]) && (result3 = (kind ? decorator(target, key, result3) : decorator(result3)) || result3);
        return kind && result3 && __defProp(target, key, result3), result3;
    }, __publicField = function __publicField(obj, key, value) {
        return __defNormalProp(obj, (void 0 === key ? "undefined" : _type_of(key)) !== "symbol" ? key + "" : key, value);
    }, init_define_GAME_CONFIG = __esm({
        "<define:__GAME_CONFIG__>": function() {
            define_GAME_CONFIG_default = {
                AppId: "save-the-pets",
                AppDescription: "",
                ApiHost: "https://i\
gs-singleplay.suncs.app",
                OtherHost: "https://igs-leaderboard.suncs.app",
                Ads: {
                    Enabled: !0,
                    PreloadAds: !1,
                    NotifyPlayerBeforeShow: !1,
                    ShowAdOnLoad: {
                        Enabled: !1,
                        DelaySeconds: 0,
                        PlacementId: "\
ad_demo_01"
                    },
                    DegradationTracking: {
                        ResetTimeMinutes: 5,
                        MaxFailedAttempts: 8
                    },
                    AdServiceConfigs: {
                        AdSense: {
                            Enabled: !1,
                            UsePreload: !1,
                            DataAdClient: "ca-pub-1234567890",
                            DataAdChannel: "\
1234567890",
                            DataAdBreakTest: !1,
                            DataAdFrequencyHint: 30
                        },
                        Savana: {
                            Enabled: !1,
                            UsePreload: !1,
                            DataAdClient: "ca-pub-1234567890",
                            DataAdChannel: "1234567890",
                            DataAdBreakTest: !1,
                            DataAdFrequencyHint: 45,
                            BannerAdSlotId: "1234567890"
                        },
                        AppLovin: {
                            Enabled: !1,
                            UsePreload: !1
                        }
                    },
                    InterstitialAdOptions: [
                        {
                            DeviceOS: "default",
                            PlacementId: "interstitial_01",
                            SecondsFirstTime: 45,
                            SecondsBetweenAds: 60
                        }
                    ],
                    RewardedVideoAdOptions: [
                        {
                            DeviceOS: "default",
                            PlacementId: "rewarded_video_01",
                            SecondsFirstTime: 0,
                            SecondsBetweenAds: 0
                        }
                    ],
                    RewardedInterstitialAdOptions: [],
                    BannerDisplayAdOptions: []
                },
                Languages: {
                    Enabled: !0,
                    DetectPlayerLocale: !0
                },
                GameSDKOptions: {
                    AllowWithoutSDK: !1,
                    UseNameGenerator: !0,
                    MSGames: {
                        LoginOnStart: !1,
                        MaxLoginAttemptsPerDay: 1
                    },
                    Yandex: {
                        LoginOnStart: !1,
                        MaxLoginAttemptsPerDay: 1
                    },
                    Playable: {
                        AppleAppStoreUrl: "",
                        GooglePlayStoreUrl: ""
                    },
                    TranssionH5: {
                        GaId: "G-XXXXXXXXXX"
                    }
                },
                Core: {
                    InitAsync: !0,
                    AverageLoadTime: 5,
                    StartSDKAfterLoadGame: !1,
                    FastCheckTournamentContext: !0
                },
                GameEngine: {
                    ForceDesktopDPR: 2,
                    AutoResizeCanvas: !0,
                    PreferredFPS: {
                        Mobile: 60,
                        Desktop: 60
                    },
                    DynamicAtlas: {
                        IOS: {
                            Enabled: !0,
                            MaxAtlasSize: 8192,
                            MaxFrameSize: 2048,
                            MaxAtlasCount: 1
                        },
                        Android: {
                            Enabled: !0,
                            MaxAtlasSize: 4096,
                            MaxFrameSize: 2048,
                            MaxAtlasCount: 1
                        },
                        Desktop: {
                            Enabled: !0,
                            MaxAtlasSize: 8192,
                            MaxFrameSize: 2048,
                            MaxAtlasCount: 1
                        },
                        OptimizeAtlas: {
                            Enabled: !1,
                            AtlasDebug: !1,
                            AutoAtlasSize: !0,
                            UsePowerOfTwo: !1,
                            TextureBleeding: !0,
                            AllowNonePackable: !1,
                            OnlyOptimizeWhenRenderTooLong: !0
                        }
                    },
                    DynamicAssets: {
                        Enabled: !1,
                        Resolution: {
                            Source: 2,
                            Available: [
                                1,
                                2
                            ]
                        },
                        Compression: {
                            Debug: !1,
                            Enabled: !1,
                            PNG: {
                                colors: 256,
                                quality: 80,
                                dither: 0.6,
                                palette: !0,
                                compressionLevel: 6
                            },
                            JPEG: {
                                quality: 80,
                                mozjpeg: !0
                            },
                            WEBP: {
                                quality: 80,
                                lossless: !1,
                                alphaQuality: 60,
                                smartSubsample: !0,
                                preset: "drawing"
                            }
                        },
                        IgnoreFiles: []
                    },
                    HybridFileCache: {
                        Enabled: !0,
                        BuildMode: {
                            Enabled: !0,
                            InvalidateMode: "both",
                            SupportedExtensions: [
                                ".json"
                            ]
                        },
                        PreviewMode: {
                            Enabled: !1,
                            CacheScene: !1,
                            CachePrefab: !1,
                            CacheUuidExtension: !1,
                            InvalidateMode: "commitId",
                            SupportedExtensions: [
                                ".json"
                            ]
                        }
                    }
                },
                Gameplay: {
                    StartAdAtLevel: 1,
                    MaxRescueCount: 1,
                    Tutorial: {
                        Enabled: !0,
                        ForceUseTutorial: !1
                    }
                },
                Firebase: {
                    Enabled: !1,
                    Options: {
                        AppId: "",
                        ApiKey: "",
                        ProjectId: "",
                        AuthDomain: "",
                        StorageBucket: "",
                        MeasurementId: "",
                        MessagingSenderId: ""
                    },
                    Services: {
                        Analytics: {
                            Enabled: !1
                        },
                        Performance: {
                            Enabled: !1
                        },
                        RemoteConfig: {
                            Enabled: !1
                        }
                    }
                },
                Analytics: {
                    Enabled: !0,
                    GoogleAnalytics: {
                        Enabled: !0,
                        ConsoleLog: !1
                    },
                    ClarityAnalytics: {
                        Enabled: !1,
                        ConsoleLog: !1,
                        ScreenshotCanvas: {
                            Interval: 1500,
                            ByEvent: [
                                "APP_READY",
                                "PAGE_VIEW",
                                "BUTTON_CLICK",
                                "AD_SHOWING",
                                "LEVEL_START",
                                "LEVEL_END"
                            ]
                        }
                    },
                    FirebaseAnalytics: {
                        Enabled: !1,
                        ConsoleLog: !1
                    },
                    FacebookAnalytics: {
                        Prefix: "fba",
                        Enabled: !1,
                        ConsoleLog: !1
                    }
                },
                PerformanceMonitor: {
                    CoreFlows: !1,
                    EngineFlows: !1,
                    GameSDKFlows: !1,
                    LoadResources: !1,
                    FpsTracking: {
                        Enabled: !1,
                        TrackingDuration: 60,
                        TrackingInterval: 10
                    }
                },
                RemoteConfig: {
                    Enabled: !1,
                    Options: {
                        ForceReloadGame: !1,
                        FetchIntervalInSeconds: 300
                    },
                    ServiceType: "mockup",
                    DefaultConfigId: "default",
                    SupportedDataTypes: [
                        "Ludex",
                        "Gameplay"
                    ],
                    MockupConfig: {
                        Enabled: !0
                    },
                    SelfHostedConfig: {
                        Enabled: !1,
                        AppId: "",
                        ApiKey: "",
                        ApiUrl: ""
                    }
                },
                Network: {
                    MaximumRequest: 6,
                    Timeout: 15e3,
                    Retries: 3
                },
                Leaderboards: {
                    Enabled: !0,
                    LeaderboardList: [
                        {
                            Name: "Daily",
                            Id: "5fed5ccff033f2477a624a66",
                            Mode: "single",
                            Limit: 50
                        },
                        {
                            Name: "Weekly",
                            Id: "5fed5ccff033f2477a624a65",
                            Mode: "single",
                            Limit: 50
                        }
                    ]
                },
                Notification: {
                    Enabled: !1,
                    ApiUrl: "https://notifications.sunstudio.io"
                },
                DailyRewards: {
                    Enabled: !1,
                    MaxDays: 7,
                    MockTime: 0,
                    CheckInterrupt: !1
                },
                Mockup: {
                    Ads: {
                        Enabled: !1,
                        ErrorRate: 5,
                        GiphyApiKey: "VmjHIRsf\
rwCAssDS4mDo9DoImxJm1lLM",
                        SafeAreaBottom: 0
                    },
                    Match: {
                        Enabled: !1,
                        ErrorRate: 5,
                        PlayerInfo: {
                            Id: "player-mock",
                            Name: "Player Mock",
                            Photo: "",
                            Signature: ""
                        },
                        OpponentInfo: {
                            Id: "oppon\
ent-mock",
                            Name: "Opponent Mock",
                            Photo: "",
                            Signature: ""
                        }
                    },
                    GameSDK: {
                        SlowAPI: {
                            Enabled: !1,
                            ErrorRate: 5,
                            StartDelay: 1e3,
                            InitialDelay: 1e3,
                            PlayerDataDelay: 1e3
                        },
                        Context: {
                            Enabled: !1
                        },
                        Player: {
                            SubscribeBot: {
                                Enabled: !1,
                                CanSubscribeBot: !0
                            },
                            ConnectedPlayers: {
                                Enabled: !1,
                                ErrorRate: 5,
                                RandomDelayMs: 1e3,
                                NumOfPlayers: 3
                            }
                        },
                        AddShortcut: {
                            Enabled: !1,
                            CanCreateShortcut: !0
                        },
                        Tournament: {
                            Enabled: !1,
                            ErrorRates: 5,
                            RandomDelayMs: 1e3,
                            NumOfTournament: {
                                Normal: 10,
                                HostPage: 2
                            }
                        },
                        Payments: {
                            Enabled: !1,
                            ErrorRates: 5,
                            RandomDelayMs: 1e3,
                            Products: []
                        }
                    },
                    Profile: {
                        Enabled: !1,
                        ErrorRate: 5,
                        RandomDelayMs: 1e3,
                        AvatarUrl: "https://picsum.photos\
/seed/%1/300/300",
                        RandomNameApiKey: "a1f7164dc9d2468b953aef67b0a19355"
                    },
                    Leaderboards: {
                        Enabled: !1,
                        MinScore: 10,
                        MaxScore: 100,
                        ErrorRate: 5,
                        NumOfLeaders: {
                            Min: 10,
                            Max: 50
                        },
                        DefaultLimit: 60,
                        RandomDelayMs: 1e3
                    }
                },
                Debugger: {
                    Console: {
                        Enabled: !0,
                        UseGroup: !0,
                        UseInGameConsole: !1
                    },
                    Profiler: {
                        Enabled: !1
                    },
                    EventLogging: {
                        Enabled: !1
                    },
                    CanvasRecorder: {
                        Enabled: !0,
                        OnlyCore: !1,
                        PanelExpanded: !1,
                        Options: {
                            Type: "png",
                            Quality: 0.85,
                            RecordFps: 60,
                            SyncFps: !0
                        }
                    },
                    MonitorError: {
                        Enabled: !1,
                        ApiKey: "",
                        Service: "BugSnag",
                        TrackUser: !1,
                        TrackPerformance: !1,
                        FilterErrors: {
                            Codes: {
                                Accepted: [],
                                Ignored: [
                                    "USER_INPUT",
                                    "NETWORK_FAILURE"
                                ]
                            },
                            Messages: {
                                Accepted: [],
                                Ignored: [
                                    "Load image failed"
                                ]
                            }
                        },
                        Feedback: !1
                    },
                    ListPlayerDevIds: [],
                    InputRecorder: {
                        Enabled: !1,
                        Logging: !0,
                        PlaybackDelay: 0,
                        TimeScale: 1,
                        UseVisualizer: !0,
                        SkipInactivity: {
                            Enabled: !0,
                            MinTime: 3e3
                        },
                        MouseEvents: {
                            mousedown: !0,
                            mouseup: !0,
                            mousemove: !0,
                            mouseenter: !0,
                            mouseleave: !0,
                            mouseout: !0,
                            mouseover: !0
                        }
                    }
                },
                AdaptivePerformance: {
                    Enabled: !1,
                    Quality: {
                        Min: 1,
                        Max: 2,
                        AdjustStep: 0.1
                    },
                    Options: {
                        FpsThreshold: 48,
                        CheckInterval: 2e3,
                        AutoUpgradeQuality: !0,
                        OnlyUpdateWhenSwitchScene: !1
                    },
                    TrackingSceneNames: [
                        "GameScene"
                    ]
                },
                FrameCapture: {
                    Enabled: !0,
                    Options: {
                        Quality: 0.85,
                        RenderType: "jpeg",
                        UseBlobIfPossible: !0,
                        FallbackWithWideframe: "Default"
                    }
                },
                Auth: {
                    Enabled: !0
                },
                Audio: {
                    Enabled: !0
                },
                Match: {
                    Enabled: !0
                },
                Player: {
                    Enabled: !0
                },
                Profile: {
                    Enabled: !0
                },
                Context: {
                    Enabled: !0
                },
                Missions: {
                    Enabled: !1
                },
                Visibility: {
                    Enabled: !1
                }
            };
        }
    }), init_define_GAME_SDK_CONFIG = __esm({
        "<define:__GAME_SDK_CONFIG__>": function() {
            define_GAME_SDK_CONFIG_default = {
                AllowWithoutSDK: !1,
                UseNameGenerator: !0
            };
        }
    }), init_console = __esm({
        "extensions/ludex/libs/common/console.ts": function() {
            wc = window.console;
        }
    }), init_track_events = __esm({
        "extensions/ludex/libs/common/track-events.ts": function() {
            listeners = {}, (wev = window).__listeners = listeners, originalAddEventListener = wev.addEventListener.bind(wev), MAX_LISTENERS_SIZE = 100, wev.addEventListener = function(name2, listener, options) {
                listeners[name2] || (listeners[name2] = []), listeners[name2].length >= MAX_LISTENERS_SIZE && (listeners[name2].length = 0), listeners[name2].push(listener), originalAddEventListener(name2, listener, options);
            };
        }
    }), init_track_errors = __esm({
        "extensions/ludex/libs/common/track-errors.ts": function() {
            (wer = window).__errorQueue = [], MAX_QUEUE_SIZE = 100, __name(disableSimpleTrackErrors, "disableSimpleTrackErrors"), __name(errorHandler, "errorHandler"), __name(init, "init"), wer.addEventListener("load", function() {
                disableSimpleTrackErrors(), init();
            });
        }
    }), init_progress = __esm({
        "extensions/ludex/libs/progress.ts": function() {
            clamp = __name(function(value) {
                return Math.max(0, Math.min(100, ~~value));
            }, "clamp"), sdk = null, window.__sdkLoad = {
                percent: 0,
                ensure: function ensure(minPercent) {
                    if (!(this.percent > minPercent)) {
                        var clamped = clamp(minPercent);
                        clamped <= this.percent ? console.debug("[Progress] set: skipped (clamped <= current)", {
                            clamped: clamped,
                            currentPercent: this.percent
                        }) : (this.percent = clamped, sdk || (sdk = GameSDK), sdk && sdk.setLoadingProgress(clamped));
                    }
                }
            };
        }
    }), init_init_core = __esm({
        "extensions/ludex/libs/init-core.ts": function() {
            var _window___errorQueue;
            AVG_LOAD_MS = 5000, MAX_RETRY = 5, RETRY_DELAY = 2e3, MIN_INTERVAL = 50, SLOW_LOADING_MS = 8e3, GA_TIMEOUT_MS = 1e4, INITIAL_PERCENT = 5, TARGET_PERCENT = 100, SDK_WAIT_MS = 50, SDK_MAX_WAIT = 1e4, window.__errorQueue = null != (_window___errorQueue = window.__errorQueue) ? _window___errorQueue : [], progressTimer = null, stopProgressTimer = __name(function() {
                progressTimer && clearInterval(progressTimer), progressTimer = null;
            }, "stopProgressTimer"), startProgressTimer = __name(function(target) {}, "startProgressTimer"), logError = __name(function(error) {
                var _Ludex, _window___errorQueue, _codex_monitorError, _codex, errorInfo = null == (_Ludex = Ludex) ? void 0 : _Ludex.Utils.Function.toError(error);
                (null == errorInfo ? void 0 : errorInfo.message) && (logAnalyticsEvent("app_crash_handle", {
                    error: errorInfo.message
                }), null == (_window___errorQueue = window.__errorQueue) || _window___errorQueue.push(errorInfo), null == (_codex = codex) || null == (_codex_monitorError = _codex.monitorError) || _codex_monitorError.sendException(errorInfo));
            }, "logError"), MARK_NAME = "GameSDK Initialize", monitorGameSDKFlows = __name(function() {
                var originalTime = console.time, originalTimeEnd = console.timeEnd, originalTimeLog = console.timeLog, skipMark = __name(function(args) {
                    return args[0] === MARK_NAME;
                }, "skipMark");
                console.time = function() {
                    for(var _originalTime, _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++)args[_key] = arguments[_key];
                    skipMark(args) || (_originalTime = originalTime).call.apply(_originalTime, [
                        console
                    ].concat(_to_consumable_array(args)));
                }, console.timeEnd = function() {
                    for(var _originalTimeEnd, _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++)args[_key] = arguments[_key];
                    skipMark(args) || (_originalTimeEnd = originalTimeEnd).call.apply(_originalTimeEnd, [
                        console
                    ].concat(_to_consumable_array(args)));
                }, console.timeLog = function() {
                    for(var _originalTimeLog, _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++)args[_key] = arguments[_key];
                    skipMark(args) || (_originalTimeLog = originalTimeLog).call.apply(_originalTimeLog, [
                        console
                    ].concat(_to_consumable_array(args)));
                };
            }, "monitorGameSDKFlows"), logAnalyticsEvent = __name(function(eventName, eventData) {
                var _codex_analytics, _codex;
                eventName && (null == (_codex = codex) || null == (_codex_analytics = _codex.analytics) || _codex_analytics.event(eventName, eventData));
            }, "logAnalyticsEvent"), slowLoadingTimer = null, startSlowLoadingCheck = __name(function() {
                clearSlowLoadingCheck(), slowLoadingTimer = setTimeout(function() {
                    var _GameSDK_extra_displayWarnLoading, _GameSDK_extra, _GameSDK;
                    window.__sdkLoad.percent <= INITIAL_PERCENT && (null == (_GameSDK = GameSDK) || null == (_GameSDK_extra = _GameSDK.extra) || null == (_GameSDK_extra_displayWarnLoading = _GameSDK_extra.displayWarnLoading) || _GameSDK_extra_displayWarnLoading.call(_GameSDK_extra, !0));
                }, SLOW_LOADING_MS);
            }, "startSlowLoadingCheck"), clearSlowLoadingCheck = __name(function() {
                var _GameSDK_extra_displayWarnLoading, _GameSDK_extra, _GameSDK;
                null !== slowLoadingTimer && (clearTimeout(slowLoadingTimer), slowLoadingTimer = null), null == (_GameSDK = GameSDK) || null == (_GameSDK_extra = _GameSDK.extra) || null == (_GameSDK_extra_displayWarnLoading = _GameSDK_extra.displayWarnLoading) || _GameSDK_extra_displayWarnLoading.call(_GameSDK_extra, !1);
            }, "clearSlowLoadingCheck"), isGAScriptInit = !1, loadGAScript = __name(function(tagId) {
                return _async_to_generator(function() {
                    var gaScript;
                    return _ts_generator(this, function(_state) {
                        return isGAScriptInit ? [
                            2
                        ] : (isGAScriptInit = !0, (gaScript = document.createElement("script")).src = "https://www.googletagmanager.com/gtag/js?id=".concat(tagId), gaScript.async = !0, [
                            2,
                            new Promise(function(resolve, reject) {
                                var isHandled = !1, timeout = null, loadHandler = null, errorHandler2 = null, cleanup = __name(function() {
                                    null !== timeout && clearTimeout(timeout), loadHandler && gaScript.removeEventListener("load", loadHandler), errorHandler2 && gaScript.removeEventListener("error", errorHandler2);
                                }, "cleanup");
                                timeout = setTimeout(function() {
                                    isHandled || (isHandled = !0, cleanup(), reject(Error("Timeout loading GA script after ".concat(GA_TIMEOUT_MS / 1e3, "s"))));
                                }, GA_TIMEOUT_MS), loadHandler = __name(function() {
                                    isHandled || (isHandled = !0, cleanup(), resolve());
                                }, "loadHandler"), errorHandler2 = __name(function() {
                                    isHandled || (isHandled = !0, cleanup(), reject(Error("Failed to load GA script")));
                                }, "errorHandler"), gaScript.addEventListener("load", loadHandler), gaScript.addEventListener("error", errorHandler2), document.head.appendChild(gaScript);
                            })
                        ]);
                    });
                })();
            }, "loadGAScript"), initGoogleAnalytics = __name(function(userId, entryPoint, tagIds) {
                try {
                    if ("function" != typeof window.gtag) return;
                    var entryPointData2 = (null == (_GameSDK = GameSDK) ? void 0 : _GameSDK.getEntryPointData()) || {}, fbig_ad_id = entryPointData2.fbig_ad_id, fbig_adset_id = entryPointData2.fbig_adset_id, fbig_campaign_id = entryPointData2.fbig_campaign_id, fb_instant_game_adset_id = entryPointData2.fb_instant_game_adset_id, fb_instant_game_ad_id = entryPointData2.fb_instant_game_ad_id, fb_instant_game_campaign_id = entryPointData2.fb_instant_game_campaign_id, ad_id = null != (_ref = null != fbig_ad_id ? fbig_ad_id : fb_instant_game_ad_id) ? _ref : void 0, adset_id = null != (_ref1 = null != fbig_adset_id ? fbig_adset_id : fb_instant_game_adset_id) ? _ref1 : void 0, campaign_id = null != (_ref2 = null != fbig_campaign_id ? fbig_campaign_id : fb_instant_game_campaign_id) ? _ref2 : void 0;
                    window.dataLayer = window.dataLayer || [], window.gtag("js", new Date()), window.gtag("set", {
                        client_id: "100.".concat(userId),
                        user_id: userId,
                        send_page_view: !1
                    });
                    var buildVersion = 4, _iteratorNormalCompletion = !0, _didIteratorError = !1, _iteratorError = void 0;
                    try {
                        for(var _ref, _ref1, _ref2, _GameSDK, _Ludex_Utils_Browser, _Ludex_Utils, _Ludex, _step, _iterator = tagIds[Symbol.iterator](); !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = !0){
                            var tagId = _step.value;
                            window.gtag("config", tagId, {
                                cookie_flags: "SameSite=None;Secure",
                                build: buildVersion,
                                medium: entryPoint,
                                campaign: campaign_id,
                                groups: "GA"
                            });
                        }
                    } catch (err) {
                        _didIteratorError = !0, _iteratorError = err;
                    } finally{
                        try {
                            _iteratorNormalCompletion || null == _iterator.return || _iterator.return();
                        } finally{
                            if (_didIteratorError) throw _iteratorError;
                        }
                    }
                    var trafficSourceDetail = ((null == (_Ludex = Ludex) || null == (_Ludex_Utils = _Ludex.Utils) || null == (_Ludex_Utils_Browser = _Ludex_Utils.Browser) ? void 0 : _Ludex_Utils_Browser.getQueryParams()) || {}).entry_point || entryPoint, initialUserProperties = {
                        user_id: userId,
                        player_id: userId,
                        app_version: buildVersion,
                        traffic_source: entryPoint,
                        traffic_source_detail: trafficSourceDetail,
                        ad_id: ad_id,
                        adset_id: adset_id,
                        campaign_id: campaign_id,
                        new_user: void 0,
                        coins: void 0,
                        score: void 0
                    };
                    window.gtag("set", "user_properties", initialUserProperties);
                } catch (error) {
                    logError(error);
                }
            }, "initGoogleAnalytics"), processGoogleAnalytics = __name(function() {
                return _async_to_generator(function() {
                    var tagIdsRaw, tagList, primaryTagId, _GameSDK_player, _GameSDK, userId, entryPoint, _ref;
                    return _ts_generator(this, function(_state) {
                        switch(_state.label){
                            case 0:
                                tagIdsRaw = null, tagList = [], _state.label = 1;
                            case 1:
                                if (_state.trys.push([
                                    1,
                                    9,
                                    10,
                                    11
                                ]), !tagIdsRaw) return console.warn("GA_TAGS_IDS not defined, skipping GA initialization."), [
                                    2
                                ];
                                if (0 === (tagList = tagIdsRaw.split(" ").filter(Boolean)).length && tagList.push("G-3ZG4F3ZNXH"), !(primaryTagId = tagList[0]) || "null" === primaryTagId) throw Error("Primary GA Tag ID is invalid.");
                                return [
                                    4,
                                    loadGAScript(primaryTagId)
                                ];
                            case 2:
                                if (_state.sent(), (userId = null == (_GameSDK = GameSDK) || null == (_GameSDK_player = _GameSDK.player) ? void 0 : _GameSDK_player.getID()) || console.warn("User ID not available from GameSDK when initializing GA."), entryPoint = "no_entry", !GameSDK) return [
                                    3,
                                    7
                                ];
                                _state.label = 3;
                            case 3:
                                return _state.trys.push([
                                    3,
                                    5,
                                    ,
                                    6
                                ]), [
                                    4,
                                    GameSDK.getEntryPointAsync()
                                ];
                            case 4:
                                return entryPoint = null != (_ref = _state.sent()) ? _ref : entryPoint, [
                                    3,
                                    6
                                ];
                            case 5:
                                return console.warn("Failed to get entry point asynchronously.", _state.sent()), [
                                    3,
                                    6
                                ];
                            case 6:
                                return [
                                    3,
                                    8
                                ];
                            case 7:
                                console.warn("GameSDK not available to get entry point."), _state.label = 8;
                            case 8:
                                return initGoogleAnalytics(userId || "unknown_user", entryPoint, tagList), [
                                    3,
                                    11
                                ];
                            case 9:
                                return logError(_state.sent()), [
                                    3,
                                    11
                                ];
                            case 10:
                                return finalizeAnalyticsInitialization(), [
                                    7
                                ];
                            case 11:
                                return [
                                    2
                                ];
                        }
                    });
                })();
            }, "processGoogleAnalytics"), updateUserProperties = __name(function() {
                try {
                    if (!(null == (_codex = codex) ? void 0 : _codex.player) || "function" != typeof window.gtag) return void console.warn("Cannot update user properties: codex.player or gtag not available.");
                    var _codex_player_getBestScore, _ref, _codex_player_isFirstSession, _codex, _codex_player_getGameData, _GameSDK, score2 = null != (_codex_player_getBestScore = codex.player.getBestScore()) ? _codex_player_getBestScore : 0, coins2 = null != (_ref = null == (_codex_player_getGameData = codex.player.getGameData()) ? void 0 : _codex_player_getGameData.coins) ? _ref : 0, isNewUser = null != (_codex_player_isFirstSession = codex.player.isFirstSession()) ? _codex_player_isFirstSession : void 0, entryPointData2 = (null == (_GameSDK = GameSDK) ? void 0 : _GameSDK.getEntryPointData()) || {}, content = entryPointData2.content, notif_id = entryPointData2.notif_id, propertiesToUpdate = {
                        new_user: isNewUser,
                        coins: coins2,
                        score: score2
                    };
                    (content || notif_id) && (propertiesToUpdate.traffic_source_detail = null != content ? content : "notif_".concat(notif_id));
                    var filteredProps = Object.entries(propertiesToUpdate).filter(function(param) {
                        var _param = _sliced_to_array(param, 2), value = (_param[0], _param[1]);
                        return void 0 !== value;
                    }).reduce(function(obj, param) {
                        var _param = _sliced_to_array(param, 2), key = _param[0], value = _param[1];
                        return obj[key] = value, obj;
                    }, {});
                    Object.keys(filteredProps).length > 0 && window.gtag("set", "user_properties", filteredProps);
                } catch (error) {
                    logError(error);
                }
            }, "updateUserProperties"), finalizeAnalyticsInitialization = __name(function() {
                var Events11 = Ludex.Events, tmp = Ludex.Plugins.Analytics, AnalyticsEvents2 = (void 0 === tmp ? {} : tmp).Events;
                if (AnalyticsEvents2) try {
                    logAnalyticsEvent(AnalyticsEvents2.APP_LAUNCH), codex.event.catchUp(Events11.GAME_SDK_READY, function() {
                        logAnalyticsEvent(AnalyticsEvents2.APP_INITIALIZED);
                    }), codex.event.catchUp(Events11.PLAYER_INFO_LOADED, updateUserProperties);
                } catch (error) {
                    logError(error);
                } finally{
                    codex.event.emit(Events11.ANALYTICS_READY);
                }
            }, "finalizeAnalyticsInitialization"), initGameSDK = __name(function() {
                var retryCount = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 0;
                return _async_to_generator(function() {
                    var gaPromise, error;
                    return _ts_generator(this, function(_state) {
                        switch(_state.label){
                            case 0:
                                return _state.trys.push([
                                    0,
                                    4,
                                    5,
                                    6
                                ]), console.time(MARK_NAME), startSlowLoadingCheck(), [
                                    4,
                                    GameSDK.initializeAsync()
                                ];
                            case 1:
                                return _state.sent(), console.timeLog(MARK_NAME, "GameSDK initialized"), clearSlowLoadingCheck(), startProgressTimer(TARGET_PERCENT), gaPromise = processGoogleAnalytics(), [
                                    3,
                                    3
                                ];
                            case 2:
                                _state.sent(), _state.label = 3;
                            case 3:
                                return codex.event.emit(Ludex.Events.GAME_SDK_READY), [
                                    3,
                                    6
                                ];
                            case 4:
                                if (error = _state.sent(), clearSlowLoadingCheck(), stopProgressTimer(), retryCount >= MAX_RETRY) return logError(error), [
                                    2
                                ];
                                return console.warn("GameSDK initialize failed (Attempt ".concat(retryCount + 1, "), retrying in ").concat(RETRY_DELAY / 1e3, "s...")), setTimeout(function() {
                                    return initGameSDK(retryCount + 1);
                                }, RETRY_DELAY), [
                                    3,
                                    6
                                ];
                            case 5:
                                return console.timeEnd(MARK_NAME), [
                                    7
                                ];
                            case 6:
                                return [
                                    2
                                ];
                        }
                    });
                })();
            }, "initGameSDK"), waitForGameSDKAndInitialize = __name(function() {
                var elapsedTime = 0, check = __name(function() {
                    "GameSDK" in window ? initGameSDK() : elapsedTime < SDK_MAX_WAIT ? (elapsedTime += SDK_WAIT_MS, setTimeout(check, SDK_WAIT_MS)) : logError(Error("GameSDK not found after ".concat(SDK_MAX_WAIT / 1e3, "s")));
                }, "check");
                check();
            }, "waitForGameSDKAndInitialize"), monitorGameSDKFlows(), waitForGameSDKAndInitialize();
        }
    }), init_navigator = __esm({
        "extensions/ludex/libs/polyfill/navigator.ts": function() {
            getGamepads = window.navigator.getGamepads, window.navigator.getGamepads = function() {
                try {
                    return getGamepads();
                } catch (e) {
                    return [];
                }
            };
        }
    }), init_performance = __esm({
        "extensions/ludex/libs/polyfill/performance.ts": function() {
            window.performance = window.performance || {}, ("function" != typeof performance.mark || "function" != typeof performance.measure) && (window.performance = {
                mark: __name(function() {}, "mark"),
                measure: __name(function() {}, "measure")
            }), performance.mark("load-start");
        }
    }), init_browser = __esm({
        "extensions/ludex/libs/cocos/browser.ts": function() {
            noToolbar = "0", noVConsole = "0", initUtils = __name(function() {
                if (URLSearchParams) {
                    var urlParams = new URLSearchParams(window.location.search);
                    noToolbar = urlParams.get("no-toolbar") || noToolbar, noVConsole = urlParams.get("no-vconsole") || noVConsole, "1" === noToolbar && setupNoToolbar(), "1" === noVConsole && setupNoVConsole();
                }
            }, "initUtils"), setupNoToolbar = __name(function() {
                var wait = setInterval(function() {
                    var toolbar = document.querySelector(".toolbar");
                    _instanceof(toolbar, HTMLDivElement) && (clearInterval(wait), toolbar.style.display = "none");
                }, 100);
            }, "setupNoToolbar"), setupNoVConsole = __name(function() {
                Object.defineProperty(window, "VConsole", {
                    value: void 0,
                    writable: !1,
                    configurable: !1
                });
                var script = document.querySelector('script[src="/node_modules/vconsole/dist/vconsole.min.js"]');
                script && script.remove();
            }, "setupNoVConsole"), initUtils(), MARK_NAMES = [
                "Init Base",
                "Init Infrastructure",
                "Init SubSystem",
                "Init Project"
            ], __name(function() {
                var originalTime = console.time, originalTimeEnd = console.timeEnd, originalTimeLog = console.timeLog, skipMark = __name(function(args) {
                    return !!MARK_NAMES.includes(args[0]);
                }, "skipMark");
                console.time = function() {
                    for(var _originalTime, _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++)args[_key] = arguments[_key];
                    skipMark(args) || (_originalTime = originalTime).call.apply(_originalTime, [
                        console
                    ].concat(_to_consumable_array(args)));
                }, console.timeEnd = function() {
                    for(var _originalTimeEnd, _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++)args[_key] = arguments[_key];
                    skipMark(args) || (_originalTimeEnd = originalTimeEnd).call.apply(_originalTimeEnd, [
                        console
                    ].concat(_to_consumable_array(args)));
                }, console.timeLog = function() {
                    for(var _originalTimeLog, _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++)args[_key] = arguments[_key];
                    skipMark(args) || (_originalTimeLog = originalTimeLog).call.apply(_originalTimeLog, [
                        console
                    ].concat(_to_consumable_array(args)));
                };
            }, "monitorEngineFlows")();
        }
    }), init_init = __esm({
        "extensions/ludex/libs/cocos/init.ts": function() {
            initCocos = __name(function() {
                System.register([
                    "../application.js"
                ], function() {
                    var Application2, topLevelImport = function topLevelImport(url) {
                        return System.import(url);
                    };
                    function execute() {
                        var canvas = document.getElementById("GameCanvas"), $p = null == canvas ? void 0 : canvas.parentElement;
                        if (!$p) return void setTimeout(execute, 300);
                        canvas.style.position = "relative";
                        var bcr = $p.getBoundingClientRect();
                        canvas.width = bcr.width, canvas.height = bcr.height;
                        var application = new Application2();
                        topLevelImport("cc").then(function(engine) {
                            return console.warn("Cocos loaded"), new Promise(function(resolve) {
                                codex.event.catchUp(Ludex.Events.CORE_BOOTING, function() {
                                    window.__sdkLoad.ensure(20), console.warn("Cocos initializing"), resolve(application.init(engine));
                                });
                            });
                        }).then(function() {
                            return window.__sdkLoad.ensure(30), console.warn("Cocos application starting"), application.start();
                        }).then(function() {
                            window.__sdkLoad.ensure(40), console.warn("Cocos application started");
                        }).catch(function(error) {
                            var _codex_monitorError, err = Ludex.Utils.Function.toError(error);
                            null == (_codex_monitorError = codex.monitorError) || _codex_monitorError.sendException(err);
                        });
                    }
                    return __name(topLevelImport, "topLevelImport"), __name(execute, "execute"), {
                        setters: [
                            function(applicationJs) {
                                Application2 = applicationJs.Application;
                            }
                        ],
                        execute: execute
                    };
                });
            }, "initCocos"), injectFlushSystem = __name(function() {
                var S9 = System, originalImport = S9.import, originalRegister = S9.register, deleteModule = __name(function(name2) {
                    setTimeout(function() {
                        return S9.delete(name2);
                    }, 8e3);
                }, "deleteModule");
                S9.import = function() {
                    for(var _originalImport, _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++)args[_key] = arguments[_key];
                    return deleteModule(args[0]), (_originalImport = originalImport).call.apply(_originalImport, [
                        S9
                    ].concat(_to_consumable_array(args)));
                }, S9.register = function() {
                    for(var _originalRegister, _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++)args[_key] = arguments[_key];
                    return (Array.isArray(args[0]) ? args[0] : [
                        args[0]
                    ]).forEach(deleteModule), (_originalRegister = originalRegister).call.apply(_originalRegister, [
                        S9
                    ].concat(_to_consumable_array(args)));
                };
            }, "injectFlushSystem"), waitSystemForInitCocos = setInterval(function() {
                "System" in window && (clearInterval(waitSystemForInitCocos), injectFlushSystem(), initCocos());
            }, 5);
        }
    }), init_google_analytics = __esm({
        "extensions/ludex/libs/platforms/google-analytics.ts": function() {
            window.dataLayer = window.dataLayer || [], __name(trace, "trace"), window.gtag = trace, __name(addGoogleAnalyticsScript, "addGoogleAnalyticsScript"), addGoogleAnalyticsScript();
        }
    }), init_youtube = __esm({
        "extensions/ludex/libs/polyfill/youtube.ts": function() {
            sanitizeUrl = __name(function(url) {
                if (url.startsWith("http") || url.startsWith("data:")) return url;
                var _url_split = _sliced_to_array(url.split("?"), 2), path = _url_split[0], query = _url_split[1], sanitizedPath = path.split("/").map(function(part) {
                    return part ? part.replace(/[^a-zA-Z0-9\-._]/g, ".") : part;
                }).join("/");
                return query ? "".concat(sanitizedPath, "?").concat(query) : sanitizedPath;
            }, "sanitizeUrl"), __name(_YoutubeAdapterRequest = function(OriginalXHR1) {
                function _YoutubeAdapterRequest1() {
                    return _class_call_check(this, _YoutubeAdapterRequest1), _call_super(this, _YoutubeAdapterRequest1, arguments);
                }
                return _inherits(_YoutubeAdapterRequest1, OriginalXHR1), _create_class(_YoutubeAdapterRequest1, [
                    {
                        key: "open",
                        value: function open(method, url, async, user, password) {
                            var sanitizedUrl = "string" == typeof url ? sanitizeUrl(url) : url;
                            _get(_get_prototype_of(_YoutubeAdapterRequest1.prototype), "open", this).call(this, method, sanitizedUrl, !1 !== async, user, password);
                        }
                    }
                ]), _YoutubeAdapterRequest1;
            }(window.XMLHttpRequest), "YoutubeAdapterRequest"), YoutubeAdapterRequest = _YoutubeAdapterRequest, window.XMLHttpRequest = YoutubeAdapterRequest, __name(_YoutubeAdapterImage = function(OriginalImage1) {
                function _YoutubeAdapterImage1() {
                    return _class_call_check(this, _YoutubeAdapterImage1), _call_super(this, _YoutubeAdapterImage1, arguments);
                }
                return _inherits(_YoutubeAdapterImage1, OriginalImage1), _create_class(_YoutubeAdapterImage1, [
                    {
                        key: "src",
                        get: function get() {
                            return _get(_get_prototype_of(_YoutubeAdapterImage1.prototype), "src", this);
                        },
                        set: function set1(url) {
                            _set(_get_prototype_of(_YoutubeAdapterImage1.prototype), "src", sanitizeUrl(url), this, !0);
                        }
                    }
                ]), _YoutubeAdapterImage1;
            }(window.Image), "YoutubeAdapterImage"), YoutubeAdapterImage = _YoutubeAdapterImage, window.Image = YoutubeAdapterImage;
        }
    }), empty_script_exports = {};
    __export(empty_script_exports, {
        default: function _default() {
            return empty_script_default;
        }
    });
    var init_empty_script = __esm({
        "extensions/ludex/libs/empty-script.ts": function() {
            init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), empty_script_default = null;
        }
    }), init_Context = __esm({
        "extensions/ludex/src/game-sdk/sdk/Context.ts": function() {
            init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), _Context = function() {
                function _Context1(adapter) {
                    var _this = this;
                    _class_call_check(this, _Context1), _define_property(this, "adapter$", void 0), _define_property(this, "extra$", void 0), _define_property(this, "currentContextID$", null), _define_property(this, "currentContextType$", "SOLO"), _define_property(this, "currentContextPlayers$", []), _define_property(this, "chooseAsyncPopup$", null), _define_property(this, "createAsyncPopup$", null), _define_property(this, "switchAsyncPopup$", null), _define_property(this, "contextIdsByCreate$", void 0), _define_property(this, "contextIdsByChoose$", []), _define_property(this, "playerIdsInContexts$", void 0), _define_property(this, "handleOnYes$", __name(function(resolve) {
                        return function() {
                            _this.extra$.isPopupShown = !1, resolve(!0);
                        };
                    }, "handleOnYes$")), _define_property(this, "handleOnNo$", __name(function(reject) {
                        return function() {
                            _this.extra$.isPopupShown = !1;
                            try {
                                _this.extra$.exceptionUserInput("Player closed the context menu");
                            } catch (error) {
                                reject(error);
                            }
                        };
                    }, "handleOnNo$")), this.adapter$ = adapter, this.extra$ = adapter.extra;
                }
                return _create_class(_Context1, [
                    {
                        key: "setCurrentContextId",
                        value: function setCurrentContextId(contextId2) {
                            this.checkSameContext$(contextId2), this.currentContextID$ = contextId2, this.currentContextType$ = "THREAD";
                        }
                    },
                    {
                        key: "initContextInfo",
                        value: function initContextInfo(contextId2, contextType2) {
                            var _Ludex_Utils = Ludex.Utils, A10 = _Ludex_Utils.Array, S9 = _Ludex_Utils.String;
                            if (this.contextIdsByCreate$ = {}, this.playerIdsInContexts$ = {}, this.contextIdsByChoose$ = A10.fillWith(10, function() {
                                return S9.generateObjectId();
                            }), contextId2 && contextType2) {
                                if (0 > [
                                    "SOLO",
                                    "THREAD",
                                    "POST",
                                    "GROUP"
                                ].indexOf(contextType2)) return void console.warn("Invalid context type: ".concat(contextType2));
                                this.currentContextID$ = contextId2, this.currentContextType$ = contextType2;
                            }
                        }
                    },
                    {
                        key: "getID",
                        value: function getID() {
                            return this.currentContextID$;
                        }
                    },
                    {
                        key: "getType",
                        value: function getType() {
                            return this.currentContextType$;
                        }
                    },
                    {
                        key: "loadSwitchAsyncPopup$",
                        value: function loadSwitchAsyncPopup$() {
                            return _async_to_generator(function() {
                                var SwitchAsyncPopup;
                                return _ts_generator(this, function(_state) {
                                    switch(_state.label){
                                        case 0:
                                            if (this.switchAsyncPopup$) return [
                                                2
                                            ];
                                            return [
                                                4,
                                                Promise.resolve().then(function() {
                                                    return init_empty_script(), empty_script_exports;
                                                })
                                            ];
                                        case 1:
                                            if ("function" != typeof (SwitchAsyncPopup = _state.sent().default)) return [
                                                2
                                            ];
                                            return this.switchAsyncPopup$ = new SwitchAsyncPopup(), [
                                                4,
                                                this.switchAsyncPopup$.setupTemplate()
                                            ];
                                        case 2:
                                            return _state.sent(), [
                                                2
                                            ];
                                    }
                                });
                            }).call(this);
                        }
                    },
                    {
                        key: "loadChooseAsyncPopup$",
                        value: function loadChooseAsyncPopup$() {
                            return _async_to_generator(function() {
                                var ChooseAsyncPopup;
                                return _ts_generator(this, function(_state) {
                                    switch(_state.label){
                                        case 0:
                                            if (this.chooseAsyncPopup$) return [
                                                2
                                            ];
                                            return [
                                                4,
                                                Promise.resolve().then(function() {
                                                    return init_empty_script(), empty_script_exports;
                                                })
                                            ];
                                        case 1:
                                            if ("function" != typeof (ChooseAsyncPopup = _state.sent().default)) return [
                                                2
                                            ];
                                            return this.chooseAsyncPopup$ = new ChooseAsyncPopup(), [
                                                4,
                                                this.chooseAsyncPopup$.setupTemplate()
                                            ];
                                        case 2:
                                            return _state.sent(), [
                                                2
                                            ];
                                    }
                                });
                            }).call(this);
                        }
                    },
                    {
                        key: "loadCreateAsyncPopup$",
                        value: function loadCreateAsyncPopup$() {
                            return _async_to_generator(function() {
                                var CreateAsyncPopup;
                                return _ts_generator(this, function(_state) {
                                    switch(_state.label){
                                        case 0:
                                            if (this.createAsyncPopup$) return [
                                                2
                                            ];
                                            return [
                                                4,
                                                Promise.resolve().then(function() {
                                                    return init_empty_script(), empty_script_exports;
                                                })
                                            ];
                                        case 1:
                                            if ("function" != typeof (CreateAsyncPopup = _state.sent().default)) return [
                                                2
                                            ];
                                            return this.createAsyncPopup$ = new CreateAsyncPopup(), [
                                                4,
                                                this.createAsyncPopup$.setupTemplate()
                                            ];
                                        case 2:
                                            return _state.sent(), [
                                                2
                                            ];
                                    }
                                });
                            }).call(this);
                        }
                    },
                    {
                        key: "switchAsync",
                        value: function switchAsync(contextId2) {
                            var switchSilentlyIfSolo = arguments.length > 1 && void 0 !== arguments[1] && arguments[1];
                            return _async_to_generator(function() {
                                var _this, players;
                                return _ts_generator(this, function(_state) {
                                    switch(_state.label){
                                        case 0:
                                            return _this = this, this.extra$.checkPopupShown(), [
                                                4,
                                                this.extra$.awaitRandomDelay()
                                            ];
                                        case 1:
                                            if (_state.sent(), this.validateSwitchAsyncContextId$(contextId2), "SOLO" === contextId2 && switchSilentlyIfSolo) return this.currentContextID$ = null, this.currentContextType$ = "SOLO", this.updatePlayers$([]), [
                                                2
                                            ];
                                            return [
                                                4,
                                                this.loadSwitchAsyncPopup$()
                                            ];
                                        case 2:
                                            return _state.sent(), [
                                                4,
                                                new Promise(function(resolve, reject) {
                                                    _this.switchAsyncPopup$ || _this.adapter$.extra.exceptionUnsupported(), _this.switchAsyncPopup$.onYes(_this.handleOnYes$(resolve)), _this.switchAsyncPopup$.onNo(_this.handleOnNo$(reject)), _this.switchAsyncPopup$.show(contextId2), _this.extra$.isPopupShown = !0;
                                                })
                                            ];
                                        case 3:
                                            return _state.sent(), this.currentContextID$ = contextId2, this.currentContextType$ = "THREAD", this.createPlayerIdsInContext$(contextId2, 10), players = this.playerIdsInContexts$[contextId2].map(function(playerId2) {
                                                return _this.createPlayerInfo$(playerId2);
                                            }), this.updatePlayers$(players), [
                                                2
                                            ];
                                    }
                                });
                            }).call(this);
                        }
                    },
                    {
                        key: "chooseAsync",
                        value: function chooseAsync(_options) {
                            return _async_to_generator(function() {
                                var _this, rand, contextId2, players;
                                return _ts_generator(this, function(_state) {
                                    switch(_state.label){
                                        case 0:
                                            return _this = this, this.extra$.checkPopupShown(), [
                                                4,
                                                this.extra$.awaitRandomDelay()
                                            ];
                                        case 1:
                                            return _state.sent(), [
                                                4,
                                                this.loadChooseAsyncPopup$()
                                            ];
                                        case 2:
                                            return _state.sent(), [
                                                4,
                                                new Promise(function(resolve, reject) {
                                                    _this.chooseAsyncPopup$ || _this.adapter$.extra.exceptionUnsupported(), _this.chooseAsyncPopup$.onYes(_this.handleOnYes$(resolve)), _this.chooseAsyncPopup$.onNo(_this.handleOnNo$(reject)), _this.chooseAsyncPopup$.show(), _this.extra$.isPopupShown = !0;
                                                })
                                            ];
                                        case 3:
                                            return _state.sent(), rand = Math.floor(Math.random() * this.contextIdsByChoose$.length), contextId2 = this.contextIdsByChoose$[rand], this.checkSameContext$(contextId2), this.currentContextID$ = contextId2, this.currentContextType$ = "THREAD", this.createPlayerIdsInContext$(contextId2, 2), players = this.playerIdsInContexts$[contextId2].map(function(playerId2) {
                                                return _this.createPlayerInfo$(playerId2);
                                            }), this.updatePlayers$(players), [
                                                2
                                            ];
                                    }
                                });
                            }).call(this);
                        }
                    },
                    {
                        key: "createAsync",
                        value: function createAsync(playerId2) {
                            return _async_to_generator(function() {
                                var _this, S9, contextId2, player;
                                return _ts_generator(this, function(_state) {
                                    switch(_state.label){
                                        case 0:
                                            return _this = this, this.extra$.checkPopupShown(), [
                                                4,
                                                this.extra$.awaitRandomDelay()
                                            ];
                                        case 1:
                                            return _state.sent(), [
                                                4,
                                                this.validateCreateAsyncPlayerId$(playerId2)
                                            ];
                                        case 2:
                                            return _state.sent(), [
                                                4,
                                                this.loadCreateAsyncPopup$()
                                            ];
                                        case 3:
                                            return _state.sent(), [
                                                4,
                                                new Promise(function(resolve, reject) {
                                                    _this.createAsyncPopup$ || _this.adapter$.extra.exceptionUnsupported(), _this.createAsyncPopup$.onYes(_this.handleOnYes$(resolve)), _this.createAsyncPopup$.onNo(_this.handleOnNo$(reject)), _this.createAsyncPopup$.show(playerId2), _this.extra$.isPopupShown = !0;
                                                })
                                            ];
                                        case 4:
                                            return _state.sent(), this.contextIdsByCreate$[playerId2] || (S9 = Ludex.Utils.String, this.contextIdsByCreate$[playerId2] = S9.generateObjectId()), contextId2 = this.contextIdsByCreate$[playerId2], this.checkSameContext$(contextId2), this.currentContextID$ = contextId2, this.currentContextType$ = "THREAD", player = this.createPlayerInfo$(playerId2), this.updatePlayers$([
                                                player
                                            ]), [
                                                2
                                            ];
                                    }
                                });
                            }).call(this);
                        }
                    },
                    {
                        key: "getPlayersAsync",
                        value: function getPlayersAsync() {
                            return _async_to_generator(function() {
                                return _ts_generator(this, function(_state) {
                                    switch(_state.label){
                                        case 0:
                                            return [
                                                4,
                                                this.extra$.awaitRandomDelay()
                                            ];
                                        case 1:
                                            return _state.sent(), [
                                                2,
                                                this.currentContextPlayers$
                                            ];
                                    }
                                });
                            }).call(this);
                        }
                    },
                    {
                        key: "createPlayerIdsInContext$",
                        value: function createPlayerIdsInContext$(contextId2, maxPlayers) {
                            if (!this.playerIdsInContexts$[contextId2]) {
                                var _Ludex_Utils = Ludex.Utils, A10 = _Ludex_Utils.Array, S9 = _Ludex_Utils.String, rand = Math.floor(Math.random() * maxPlayers), playerIds = A10.fillWith(rand, function() {
                                    return S9.generateObjectId();
                                });
                                this.playerIdsInContexts$[contextId2] = playerIds;
                            }
                            return this.playerIdsInContexts$[contextId2];
                        }
                    },
                    {
                        key: "createPlayerInfo$",
                        value: function createPlayerInfo$(playerId2) {
                            return {
                                getID: __name(function() {
                                    return playerId2;
                                }, "getID"),
                                getName: __name(function() {
                                    return "Player ".concat(playerId2);
                                }, "getName"),
                                getPhoto: __name(function() {
                                    return "";
                                }, "getPhoto")
                            };
                        }
                    },
                    {
                        key: "updatePlayers$",
                        value: function updatePlayers$(players) {
                            if ("SOLO" === this.currentContextType$) {
                                this.currentContextPlayers$ = [];
                                return;
                            }
                            this.currentContextPlayers$ = players;
                        }
                    },
                    {
                        key: "checkSameContext$",
                        value: function checkSameContext$(contextId2) {
                            this.currentContextID$ === contextId2 && this.extra$.exceptionSameContext();
                        }
                    },
                    {
                        key: "validateCreateAsyncPlayerId$",
                        value: function validateCreateAsyncPlayerId$(playerId2) {
                            return _async_to_generator(function() {
                                var message2, message21, message22, message;
                                return _ts_generator(this, function(_state) {
                                    switch(_state.label){
                                        case 0:
                                            return (!playerId2 || Array.isArray(playerId2)) && (message2 = "Client does not support no player IDS or multiple player IDs yet", this.extra$.exceptionClientUnsupportedOperation(message2)), Ludex.Utils.Valid.isString(playerId2) || (message21 = "Array of type String contained a value of another type: ".concat(playerId2), this.extra$.exceptionInvalidParam(message21)), playerId2 === GameSDK.player.getID() && (message22 = "At least one player id besides the current player must be provided.", this.extra$.exceptionInvalidParam(message22)), [
                                                4,
                                                GameSDK.player.getConnectedPlayersAsync()
                                            ];
                                        case 1:
                                            if (_state.sent().some(function(connectedPlayer) {
                                                return connectedPlayer.getID() === playerId2;
                                            })) return [
                                                2
                                            ];
                                            return message = "Provided ID ".concat(playerId2, " is not a connected player of the current player."), this.extra$.exceptionInvalidParam(message), [
                                                2
                                            ];
                                    }
                                });
                            }).call(this);
                        }
                    },
                    {
                        key: "validateSwitchAsyncContextId$",
                        value: function validateSwitchAsyncContextId$(contextId2) {
                            if (this.checkSameContext$(contextId2), !Ludex.Utils.Valid.isString(contextId2)) {
                                var message = "Client requires update to support this operation";
                                this.extra$.exceptionClientUnsupportedOperation(message);
                            }
                        }
                    }
                ]), _Context1;
            }(), __name(_Context, "Context"), Context_default = _Context;
        }
    }), init_SDKCommonError = __esm({
        "extensions/ludex/src/game-sdk/exceptions/SDKCommonError.ts": function() {
            init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), __name(_SDKCommonError = function(Error1) {
                function _SDKCommonError1(code, message) {
                    var _this;
                    return _class_call_check(this, _SDKCommonError1), _define_property(_this = _call_super(this, _SDKCommonError1, [
                        message
                    ]), "code", void 0), _this.code = code, _this;
                }
                return _inherits(_SDKCommonError1, Error1), _SDKCommonError1;
            }(_wrap_native_super(Error)), "SDKCommonError"), SDKCommonError_default = _SDKCommonError;
        }
    }), init_Extra = __esm({
        "extensions/ludex/src/game-sdk/sdk/Extra.ts": function() {
            init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_SDKCommonError(), MAX_WAIT_LUDEX_READY_TIME = 1e4, __name(_Extra = function() {
                function _Extra1(adapter) {
                    _class_call_check(this, _Extra1), _define_property(this, "adapter$", void 0), _define_property(this, "isGuest", !1), _define_property(this, "isPopupShown", !1), _define_property(this, "loadingElement$", null), this.adapter$ = adapter;
                }
                return _create_class(_Extra1, [
                    {
                        key: "checkAndSubscribeBotAsync",
                        value: function checkAndSubscribeBotAsync() {
                            return _async_to_generator(function() {
                                var analytics, tmp, Events11;
                                return _ts_generator(this, function(_state) {
                                    switch(_state.label){
                                        case 0:
                                            return [
                                                4,
                                                this.adapter$.player.canSubscribeBotAsync()
                                            ];
                                        case 1:
                                            if (!_state.sent()) return [
                                                2,
                                                !1
                                            ];
                                            analytics = codex.analytics, (Events11 = (void 0 === (tmp = Ludex.Plugins.Analytics) ? {} : tmp).Events) && analytics.event(Events11.BOT_SUBSCRIBE_POPUP), _state.label = 2;
                                        case 2:
                                            return _state.trys.push([
                                                2,
                                                5,
                                                ,
                                                6
                                            ]), [
                                                4,
                                                this.waitSDKInitiatedAsync()
                                            ];
                                        case 3:
                                            return _state.sent(), [
                                                4,
                                                this.adapter$.player.subscribeBotAsync()
                                            ];
                                        case 4:
                                            return _state.sent(), Events11 && analytics.event(Events11.BOT_SUBSCRIBE, {
                                                success: !0
                                            }), [
                                                2,
                                                !0
                                            ];
                                        case 5:
                                            return console.warn(_state.sent()), Events11 && analytics.event(Events11.BOT_SUBSCRIBE, {
                                                success: !1
                                            }), [
                                                2,
                                                !1
                                            ];
                                        case 6:
                                            return [
                                                2
                                            ];
                                    }
                                });
                            }).call(this);
                        }
                    },
                    {
                        key: "checkAndCreateShortcutAsync",
                        value: function checkAndCreateShortcutAsync() {
                            return _async_to_generator(function() {
                                var analytics, tmp, Events11;
                                return _ts_generator(this, function(_state) {
                                    switch(_state.label){
                                        case 0:
                                            return [
                                                4,
                                                this.adapter$.canCreateShortcutAsync()
                                            ];
                                        case 1:
                                            if (!_state.sent()) return [
                                                2
                                            ];
                                            analytics = codex.analytics, (Events11 = (void 0 === (tmp = Ludex.Plugins.Analytics) ? {} : tmp).Events) && analytics.event(Events11.SHORTCUT_CREATE_POPUP), _state.label = 2;
                                        case 2:
                                            return _state.trys.push([
                                                2,
                                                5,
                                                ,
                                                6
                                            ]), [
                                                4,
                                                this.waitSDKInitiatedAsync()
                                            ];
                                        case 3:
                                            return _state.sent(), [
                                                4,
                                                this.adapter$.createShortcutAsync()
                                            ];
                                        case 4:
                                            return _state.sent(), Events11 && analytics.event(Events11.SHORTCUT_CREATE, {
                                                success: !0
                                            }), [
                                                3,
                                                6
                                            ];
                                        case 5:
                                            return console.warn(_state.sent()), Events11 && analytics.event(Events11.SHORTCUT_CREATE, {
                                                success: !1
                                            }), [
                                                3,
                                                6
                                            ];
                                        case 6:
                                            return [
                                                2
                                            ];
                                    }
                                });
                            }).call(this);
                        }
                    },
                    {
                        key: "waitSDKInitiatedAsync",
                        value: function waitSDKInitiatedAsync() {
                            var GAME_SDK_READY = Ludex.Events.GAME_SDK_READY;
                            return new Promise(function(resolve) {
                                codex.event.catchUp(GAME_SDK_READY, resolve);
                            });
                        }
                    },
                    {
                        key: "waitLudexReadyAsync",
                        value: function waitLudexReadyAsync() {
                            return _async_to_generator(function() {
                                var waitTime;
                                return _ts_generator(this, function(_state) {
                                    return waitTime = 0, [
                                        2,
                                        new Promise(function(resolve) {
                                            var waitInterval = setInterval(function() {
                                                if ("Ludex" in window) {
                                                    clearInterval(waitInterval), resolve();
                                                    return;
                                                }
                                                (waitTime += 10) > MAX_WAIT_LUDEX_READY_TIME && (waitTime = 0, console.warn("Ludex is slow to load, please check your network connection."));
                                            }, 10);
                                        })
                                    ];
                                });
                            })();
                        }
                    },
                    {
                        key: "createLoadingElement",
                        value: function createLoadingElement() {
                            return _async_to_generator(function() {
                                var LoadingScreenElement;
                                return _ts_generator(this, function(_state) {
                                    switch(_state.label){
                                        case 0:
                                            if (this.loadingElement$) return [
                                                2
                                            ];
                                            return [
                                                4,
                                                Promise.resolve().then(function() {
                                                    return init_empty_script(), empty_script_exports;
                                                })
                                            ];
                                        case 1:
                                            if ("function" != typeof (LoadingScreenElement = _state.sent().default)) return [
                                                2
                                            ];
                                            return this.loadingElement$ = new LoadingScreenElement(), [
                                                2
                                            ];
                                    }
                                });
                            }).call(this);
                        }
                    },
                    {
                        key: "setLoadingElementProgress",
                        value: function setLoadingElementProgress(progress) {
                            this.loadingElement$ && this.loadingElement$.setLoadingProgress(progress);
                        }
                    },
                    {
                        key: "displayWarnLoading",
                        value: function displayWarnLoading(enable) {
                            this.loadingElement$ && this.loadingElement$.displayWarnLoading(enable);
                        }
                    },
                    {
                        key: "destroyLoadingElement",
                        value: function destroyLoadingElement() {
                            this.loadingElement$ && this.loadingElement$.removeLoadingElement();
                        }
                    },
                    {
                        key: "checkPopupShown",
                        value: function checkPopupShown() {
                            this.isPopupShown && this.exceptionPendingRequest("Please wait for the popup to close");
                        }
                    },
                    {
                        key: "delayInitialAsync",
                        value: function delayInitialAsync() {
                            return _async_to_generator(function() {
                                var T4, SlowAPI;
                                return _ts_generator(this, function(_state) {
                                    switch(_state.label){
                                        case 0:
                                            if (T4 = Ludex.Utils.Time, !(SlowAPI = Ludex.Configs.Mockup.GameSDK.SlowAPI).Enabled || SlowAPI.InitialDelay <= 0) return [
                                                2
                                            ];
                                            return [
                                                4,
                                                T4.sleepAsync(SlowAPI.InitialDelay)
                                            ];
                                        case 1:
                                            return _state.sent(), [
                                                2
                                            ];
                                    }
                                });
                            })();
                        }
                    },
                    {
                        key: "delayStartAsync",
                        value: function delayStartAsync() {
                            return _async_to_generator(function() {
                                var SlowAPI, T4;
                                return _ts_generator(this, function(_state) {
                                    switch(_state.label){
                                        case 0:
                                            if (SlowAPI = Ludex.Configs.Mockup.GameSDK.SlowAPI, T4 = Ludex.Utils.Time, !SlowAPI.Enabled || SlowAPI.StartDelay <= 0) return [
                                                2
                                            ];
                                            return [
                                                4,
                                                T4.sleepAsync(SlowAPI.StartDelay)
                                            ];
                                        case 1:
                                            return _state.sent(), [
                                                2
                                            ];
                                    }
                                });
                            })();
                        }
                    },
                    {
                        key: "delayPlayerDataAsync",
                        value: function delayPlayerDataAsync() {
                            return _async_to_generator(function() {
                                var SlowAPI, T4;
                                return _ts_generator(this, function(_state) {
                                    switch(_state.label){
                                        case 0:
                                            if (SlowAPI = Ludex.Configs.Mockup.GameSDK.SlowAPI, T4 = Ludex.Utils.Time, !SlowAPI.Enabled || SlowAPI.PlayerDataDelay <= 0) return [
                                                2
                                            ];
                                            return [
                                                4,
                                                T4.sleepAsync(SlowAPI.PlayerDataDelay)
                                            ];
                                        case 1:
                                            return _state.sent(), [
                                                2
                                            ];
                                    }
                                });
                            })();
                        }
                    },
                    {
                        key: "awaitRandomDelay",
                        value: function awaitRandomDelay() {
                            var randomDelayMs = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 1e3;
                            return Ludex.Utils.Time.sleepAsync(Math.random() * randomDelayMs);
                        }
                    },
                    {
                        key: "randomException",
                        value: function randomException(exceptions) {
                            var rand = Math.floor(Math.random() * exceptions.length), exception = exceptions[rand];
                            console.warn("Random exception", exception), this["exception".concat(exception)]();
                        }
                    },
                    {
                        key: "getErrorMessage",
                        value: function getErrorMessage(error) {
                            var _Ludex_Utils = Ludex.Utils, V37 = _Ludex_Utils.Valid;
                            return _Ludex_Utils.Object.hasOwn(error, "message") && V37.isString(error.message) ? error.message : null;
                        }
                    },
                    {
                        key: "throwNewCommonError$",
                        value: function throwNewCommonError$(code, message) {
                            throw new SDKCommonError_default(code, message);
                        }
                    },
                    {
                        key: "exceptionUserInput",
                        value: function exceptionUserInput(message) {
                            this.throwNewCommonError$("USER_INPUT", message);
                        }
                    },
                    {
                        key: "exceptionUnsupported",
                        value: function exceptionUnsupported() {
                            this.throwNewCommonError$("UNSUPPORTED", "Unsupported method");
                        }
                    },
                    {
                        key: "exceptionInvalidParam",
                        value: function exceptionInvalidParam(message) {
                            this.throwNewCommonError$("INVALID_PARAM", message);
                        }
                    },
                    {
                        key: "exceptionPendingRequest",
                        value: function exceptionPendingRequest(message) {
                            this.throwNewCommonError$("PENDING_REQUEST", message);
                        }
                    },
                    {
                        key: "exceptionMethodNotImplemented",
                        value: function exceptionMethodNotImplemented() {
                            this.throwNewCommonError$("METHOD_NOT_IMPLEMENTED", "Method n\
ot implemented");
                        }
                    },
                    {
                        key: "exceptionTournamentNotFound",
                        value: function exceptionTournamentNotFound(message) {
                            this.throwNewCommonError$("TOURNAMENT_NOT_FOUND", message);
                        }
                    },
                    {
                        key: "exceptionSameContext",
                        value: function exceptionSameContext() {
                            this.throwNewCommonError$("SAME_CONTEXT", "Must specify a context other\
 than the current one.");
                        }
                    },
                    {
                        key: "exceptionInvalidOperation",
                        value: function exceptionInvalidOperation(message) {
                            this.throwNewCommonError$("INVALID_OPERATION", message);
                        }
                    },
                    {
                        key: "exceptionNetworkFailure",
                        value: function exceptionNetworkFailure() {
                            var message = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : "Request failed to be processed";
                            this.throwNewCommonError$("NETWORK_FAILURE", message);
                        }
                    },
                    {
                        key: "exceptionUnknown",
                        value: function exceptionUnknown(message) {
                            this.throwNewCommonError$("UNKNOWN", message);
                        }
                    },
                    {
                        key: "exceptionClientUnsupportedOperation",
                        value: function exceptionClientUnsupportedOperation(message) {
                            this.throwNewCommonError$("CLIENT_UNSUPPORTED_OPERATION", message);
                        }
                    },
                    {
                        key: "exceptionRateLimited",
                        value: function exceptionRateLimited(message) {
                            this.throwNewCommonError$("RATE_LIMITED", message);
                        }
                    }
                ]), _Extra1;
            }(), "Extra"), Extra_default = _Extra;
        }
    }), init_Payments = __esm({
        "extensions/ludex/src/game-sdk/sdk/Payments.ts": function() {
            init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), GetCatalogErrorList = _to_consumable_array(CommonErrorList = [
                "Unsupported",
                "NetworkFailure",
                "PendingRequest",
                "ClientUnsupportedOperat\
ion"
            ]).concat([
                "InvalidParam"
            ]), PurchaseErrorList = _to_consumable_array(CommonErrorList).concat([
                "InvalidParam",
                "UserInput"
            ]), GetPurchasesErrorList = _to_consumable_array(CommonErrorList).concat([
                "NetworkFailure"
            ]), ConsumePurchaseErrorList = _to_consumable_array(CommonErrorList).concat([
                "InvalidParam",
                "UserInput"
            ]), PRODUCTS_DATA_MOCK_KEY = "ProductsDataMockKey", PURCHASES_DATA_MOCK_KEY = "PurchasesDataMockKey", _Payments = function() {
                function _Payments1(adapter) {
                    var _this = this;
                    _class_call_check(this, _Payments1), _define_property(this, "adapter$", void 0), _define_property(this, "extra$", void 0), _define_property(this, "context$", void 0), _define_property(this, "purchaseAsyncPopup$", null), _define_property(this, "handleOnYes$", __name(function(resolve) {
                        return function() {
                            _this.extra$.isPopupShown = !1, resolve(!0);
                        };
                    }, "handleOnYes$")), _define_property(this, "handleOnNo$", __name(function(reject) {
                        return function() {
                            _this.extra$.isPopupShown = !1;
                            try {
                                _this.extra$.exceptionUserInput("Player closed the context menu");
                            } catch (error) {
                                reject(error);
                            }
                        };
                    }, "handleOnNo$")), this.adapter$ = adapter, this.extra$ = adapter.extra, this.context$ = adapter.context;
                }
                return _create_class(_Payments1, [
                    {
                        key: "initPaymentInfoAsync",
                        value: function initPaymentInfoAsync() {
                            return _async_to_generator(function() {
                                return _ts_generator(this, function(_state) {
                                    switch(_state.label){
                                        case 0:
                                            if (!Ludex.Configs.Mockup.GameSDK.Payments.Enabled) return [
                                                2
                                            ];
                                            return [
                                                4,
                                                this.createMockProductsData$()
                                            ];
                                        case 1:
                                            return _state.sent(), [
                                                2
                                            ];
                                    }
                                });
                            }).call(this);
                        }
                    },
                    {
                        key: "getCatalogAsync",
                        value: function getCatalogAsync() {
                            return _async_to_generator(function() {
                                return _ts_generator(this, function(_state) {
                                    switch(_state.label){
                                        case 0:
                                            return [
                                                4,
                                                this.awaitRandomDelay$()
                                            ];
                                        case 1:
                                            return _state.sent(), this.randomError$(GetCatalogErrorList), [
                                                2,
                                                Object.values(this.getProductsData$())
                                            ];
                                    }
                                });
                            }).call(this);
                        }
                    },
                    {
                        key: "loadPurchasePopupAsync$",
                        value: function loadPurchasePopupAsync$() {
                            return _async_to_generator(function() {
                                var PurchaseAsyncPopup;
                                return _ts_generator(this, function(_state) {
                                    switch(_state.label){
                                        case 0:
                                            if (this.purchaseAsyncPopup$) return [
                                                2
                                            ];
                                            return [
                                                4,
                                                Promise.resolve().then(function() {
                                                    return init_empty_script(), empty_script_exports;
                                                })
                                            ];
                                        case 1:
                                            if ("function" != typeof (PurchaseAsyncPopup = _state.sent().default)) return [
                                                2
                                            ];
                                            return this.purchaseAsyncPopup$ = new PurchaseAsyncPopup(), [
                                                4,
                                                this.purchaseAsyncPopup$.setupTemplate()
                                            ];
                                        case 2:
                                            return _state.sent(), [
                                                2
                                            ];
                                    }
                                });
                            }).call(this);
                        }
                    },
                    {
                        key: "purchaseAsync",
                        value: function purchaseAsync(purchaseConfig) {
                            return _async_to_generator(function() {
                                var _this;
                                return _ts_generator(this, function(_state) {
                                    switch(_state.label){
                                        case 0:
                                            return _this = this, this.extra$.checkPopupShown(), [
                                                4,
                                                this.awaitRandomDelay$()
                                            ];
                                        case 1:
                                            return _state.sent(), this.validatePurchaseConfig$(purchaseConfig), this.randomError$(PurchaseErrorList), [
                                                4,
                                                this.loadPurchasePopupAsync$()
                                            ];
                                        case 2:
                                            return _state.sent(), [
                                                4,
                                                new Promise(function(resolve, reject) {
                                                    _this.purchaseAsyncPopup$ || _this.adapter$.extra.exceptionUnsupported(), _this.purchaseAsyncPopup$.onYes(_this.handleOnYes$(resolve)), _this.purchaseAsyncPopup$.onNo(_this.handleOnNo$(reject)), _this.purchaseAsyncPopup$.show(purchaseConfig), _this.extra$.isPopupShown = !0;
                                                })
                                            ];
                                        case 3:
                                            return _state.sent(), [
                                                2,
                                                this.createMockPurchaseAsync$(purchaseConfig)
                                            ];
                                    }
                                });
                            }).call(this);
                        }
                    },
                    {
                        key: "getPurchasesAsync",
                        value: function getPurchasesAsync() {
                            return _async_to_generator(function() {
                                var playerId2;
                                return _ts_generator(this, function(_state) {
                                    switch(_state.label){
                                        case 0:
                                            return [
                                                4,
                                                this.awaitRandomDelay$()
                                            ];
                                        case 1:
                                            if (_state.sent(), this.randomError$(GetPurchasesErrorList), !(playerId2 = this.adapter$.player.getID())) return [
                                                2,
                                                []
                                            ];
                                            return [
                                                2,
                                                this.getPurchasesData$()[playerId2] || []
                                            ];
                                    }
                                });
                            }).call(this);
                        }
                    },
                    {
                        key: "consumePurchaseAsync",
                        value: function consumePurchaseAsync(purchaseToken) {
                            return _async_to_generator(function() {
                                var playerId2, updatedPurchases;
                                return _ts_generator(this, function(_state) {
                                    switch(_state.label){
                                        case 0:
                                            return [
                                                4,
                                                this.awaitRandomDelay$()
                                            ];
                                        case 1:
                                            if (_state.sent(), this.validatePurchaseToken$(purchaseToken), this.randomError$(ConsumePurchaseErrorList), !(playerId2 = this.adapter$.player.getID())) return [
                                                2
                                            ];
                                            return updatedPurchases = (this.getPurchasesData$()[playerId2] || []).filter(function(purchase) {
                                                return purchase.purchaseToken !== purchaseToken;
                                            }), this.writePurchasesData$(playerId2, updatedPurchases), [
                                                2
                                            ];
                                    }
                                });
                            }).call(this);
                        }
                    },
                    {
                        key: "onReady",
                        value: function onReady(callback) {
                            callback();
                        }
                    },
                    {
                        key: "awaitRandomDelay$",
                        value: function awaitRandomDelay$() {
                            return _async_to_generator(function() {
                                var RandomDelayMs;
                                return _ts_generator(this, function(_state) {
                                    return RandomDelayMs = Ludex.Configs.Mockup.GameSDK.Payments.RandomDelayMs, [
                                        2,
                                        this.extra$.awaitRandomDelay(RandomDelayMs)
                                    ];
                                });
                            }).call(this);
                        }
                    },
                    {
                        key: "randomError$",
                        value: function randomError$(errors) {
                            100 * Math.random() < Ludex.Configs.Mockup.GameSDK.Payments.ErrorRates && this.extra$.randomException(errors);
                        }
                    },
                    {
                        key: "validatePurchaseConfig$",
                        value: function validatePurchaseConfig$(config) {
                            var _Ludex_Utils = Ludex.Utils, O33 = _Ludex_Utils.Object, V37 = _Ludex_Utils.Valid;
                            V37.isObject(config) || this.extra$.exceptionInvalidParam("Config must be an object"), O33.hasOwn(config, "productID") || this.extra$.exceptionInvalidParam("Config must have productID");
                            var productID = config.productID;
                            V37.isString(productID) || this.extra$.exceptionInvalidParam("productID must be a string"), O33.hasOwn(config, "developerPayload") && !V37.isString(config.developerPayload) && this.extra$.exceptionInvalidParam("developerPayload must be a string");
                        }
                    },
                    {
                        key: "validatePurchaseToken$",
                        value: function validatePurchaseToken$(token) {
                            Ludex.Utils.Valid.isString(token) || this.extra$.exceptionInvalidParam("Purchase token must be a string");
                        }
                    },
                    {
                        key: "createMockPurchaseAsync$",
                        value: function createMockPurchaseAsync$(config) {
                            var S9 = Ludex.Utils.String, purchase = {
                                productID: config.productID,
                                paymentID: S9.generateObjectId(),
                                purchaseToken: S9.generateObjectId(),
                                purchaseTime: new Date().toISOString(),
                                developerPayload: config.developerPayload,
                                signedRequest: S9.generateObjectId()
                            }, playerId2 = this.adapter$.player.getID();
                            if (playerId2) {
                                var playerPurchases = this.getPurchasesData$()[playerId2] || [];
                                playerPurchases.push(purchase), this.writePurchasesData$(playerId2, playerPurchases);
                            }
                            return purchase;
                        }
                    },
                    {
                        key: "createMockProductsData$",
                        value: function createMockProductsData$() {
                            return _async_to_generator(function() {
                                var _Ludex_Configs_Mockup_GameSDK_Payments, Enabled2, Products;
                                return _ts_generator(this, function(_state) {
                                    switch(_state.label){
                                        case 0:
                                            if (Enabled2 = (_Ludex_Configs_Mockup_GameSDK_Payments = Ludex.Configs.Mockup.GameSDK.Payments).Enabled, Products = _Ludex_Configs_Mockup_GameSDK_Payments.Products, !Enabled2 || Object.values(this.getProductsData$()).length >= Products.length) return [
                                                2
                                            ];
                                            return [
                                                4,
                                                Promise.all(this.createDefaultProducts$())
                                            ];
                                        case 1:
                                            return _state.sent(), [
                                                2
                                            ];
                                    }
                                });
                            }).call(this);
                        }
                    },
                    {
                        key: "createDefaultProducts$",
                        value: function createDefaultProducts$() {
                            var _this = this;
                            return Ludex.Configs.Mockup.GameSDK.Payments.Products.map(function(product) {
                                var mockProduct = {
                                    productID: product.id,
                                    title: "Product ".concat(product.id),
                                    description: "Description for ".concat(product.id),
                                    price: product.price.toString(),
                                    priceCurrencyCode: "USD",
                                    priceAmount: product.price
                                };
                                return _this.writeProductData$(product.id, mockProduct), mockProduct;
                            });
                        }
                    },
                    {
                        key: "getProductsData$",
                        value: function getProductsData$() {
                            var _Ludex_Utils = Ludex.Utils, B6 = _Ludex_Utils.Browser, V37 = _Ludex_Utils.Valid, data = B6.getLocalStorage(PRODUCTS_DATA_MOCK_KEY);
                            return V37.isObject(data) ? data : {};
                        }
                    },
                    {
                        key: "writeProductData$",
                        value: function writeProductData$(id, data) {
                            var products = this.getProductsData$();
                            products[id] = data, this.writeProductsData$(products);
                        }
                    },
                    {
                        key: "writeProductsData$",
                        value: function writeProductsData$(products) {
                            var _Ludex_Utils = Ludex.Utils, B6 = _Ludex_Utils.Browser;
                            _Ludex_Utils.Valid.isObject(products) && B6.writeLocalStorage(PRODUCTS_DATA_MOCK_KEY, products);
                        }
                    },
                    {
                        key: "getPurchasesData$",
                        value: function getPurchasesData$() {
                            var _Ludex_Utils = Ludex.Utils, B6 = _Ludex_Utils.Browser, V37 = _Ludex_Utils.Valid, data = B6.getLocalStorage(PURCHASES_DATA_MOCK_KEY);
                            return V37.isObject(data) ? data : {};
                        }
                    },
                    {
                        key: "writePurchasesData$",
                        value: function writePurchasesData$(playerId2, purchases) {
                            var _B6_getLocalStorage, B6 = Ludex.Utils.Browser;
                            if (Array.isArray(purchases)) {
                                var data = null != (_B6_getLocalStorage = B6.getLocalStorage(PURCHASES_DATA_MOCK_KEY)) ? _B6_getLocalStorage : {};
                                data[playerId2] = purchases, B6.writeLocalStorage(PURCHASES_DATA_MOCK_KEY, data);
                            }
                        }
                    }
                ]), _Payments1;
            }(), __name(_Payments, "Payments"), Payments_default = _Payments;
        }
    }), init_Player = __esm({
        "extensions/ludex/src/game-sdk/sdk/Player.ts": function() {
            init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), GameName = "Save The Pets".replace(/ /g, "-"), avatarUrl = "https://picsum.photos/seed/%1/300/300", _Player = function() {
                function _Player1(adapter) {
                    var _this = this;
                    _class_call_check(this, _Player1), _define_property(this, "adapter$", void 0), _define_property(this, "extra$", void 0), _define_property(this, "defaultPlayerInfo$", void 0), _define_property(this, "currentPlayerInfo$", void 0), _define_property(this, "infoKey$", "".concat(GameName, "_PlayerInfo")), _define_property(this, "dataKey$", "".concat(GameName, "_PlayerData")), _define_property(this, "subscribeBot$", null), _define_property(this, "connectedPlayers$", null), _define_property(this, "getSignature$", __name(function() {
                        var token = _this.getSignatureFormMockup$();
                        return Ludex.Utils.Valid.isString(token) ? token : "default_token";
                    }, "getSignature$")), this.adapter$ = adapter, this.extra$ = adapter.extra, this.initDefaultPlayerInfo$();
                }
                return _create_class(_Player1, [
                    {
                        key: "initDefaultPlayerInfo$",
                        value: function initDefaultPlayerInfo$() {
                            var playerId2 = "guest-007";
                            this.defaultPlayerInfo$ = {
                                playerId: playerId2,
                                playerName: "Guest",
                                playerPhoto: avatarUrl.replace("%1", playerId2)
                            }, this.extra$.isGuest = !0, this.currentPlayerInfo$ = __spreadValues({}, this.defaultPlayerInfo$);
                        }
                    },
                    {
                        key: "initPlayerInfo",
                        value: function initPlayerInfo(playerId2) {
                            this.updateCurrentPlayerInfo$(playerId2), Ludex.Utils.Browser.writeLocalStorage(this.infoKey$, this.currentPlayerInfo$);
                        }
                    },
                    {
                        key: "canSubscribeBotAsync",
                        value: function canSubscribeBotAsync() {
                            return _async_to_generator(function() {
                                return _ts_generator(this, function(_state) {
                                    switch(_state.label){
                                        case 0:
                                            return [
                                                4,
                                                this.loadMockSubscribeBot$()
                                            ];
                                        case 1:
                                            return _state.sent(), this.subscribeBot$ || this.extra$.exceptionUnsupported(), [
                                                2,
                                                this.subscribeBot$.canSubscribeBotAsync()
                                            ];
                                    }
                                });
                            }).call(this);
                        }
                    },
                    {
                        key: "subscribeBotAsync",
                        value: function subscribeBotAsync() {
                            return _async_to_generator(function() {
                                return _ts_generator(this, function(_state) {
                                    switch(_state.label){
                                        case 0:
                                            return [
                                                4,
                                                this.loadMockSubscribeBot$()
                                            ];
                                        case 1:
                                            return _state.sent(), this.subscribeBot$ || this.extra$.exceptionUnsupported(), [
                                                2,
                                                this.subscribeBot$.subscribeBotAsync()
                                            ];
                                    }
                                });
                            }).call(this);
                        }
                    },
                    {
                        key: "getID",
                        value: function getID() {
                            return this.currentPlayerInfo$.playerId;
                        }
                    },
                    {
                        key: "getName",
                        value: function getName() {
                            return this.currentPlayerInfo$.playerName;
                        }
                    },
                    {
                        key: "getPhoto",
                        value: function getPhoto() {
                            return this.currentPlayerInfo$.playerPhoto;
                        }
                    },
                    {
                        key: "getDataAsync",
                        value: function getDataAsync(keys) {
                            return _async_to_generator(function() {
                                var _Ludex_Utils, B6, V37, O33, data, dataObject, _iteratorNormalCompletion, _didIteratorError, _iteratorError, _iterator, _step, key;
                                return _ts_generator(this, function(_state) {
                                    switch(_state.label){
                                        case 0:
                                            if (keys.length < 1) return [
                                                2,
                                                {}
                                            ];
                                            return [
                                                4,
                                                this.extra$.delayPlayerDataAsync()
                                            ];
                                        case 1:
                                            if (_state.sent(), B6 = (_Ludex_Utils = Ludex.Utils).Browser, V37 = _Ludex_Utils.Valid, O33 = _Ludex_Utils.Object, data = B6.getLocalStorage(this.dataKey$), !V37.isObject(data)) return [
                                                2,
                                                {}
                                            ];
                                            dataObject = {}, _iteratorNormalCompletion = !0, _didIteratorError = !1, _iteratorError = void 0;
                                            try {
                                                for(_iterator = keys[Symbol.iterator](); !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = !0)key = _step.value, O33.hasOwn(data, key) && (dataObject[key] = data[key]);
                                            } catch (err) {
                                                _didIteratorError = !0, _iteratorError = err;
                                            } finally{
                                                try {
                                                    _iteratorNormalCompletion || null == _iterator.return || _iterator.return();
                                                } finally{
                                                    if (_didIteratorError) throw _iteratorError;
                                                }
                                            }
                                            return [
                                                2,
                                                dataObject
                                            ];
                                    }
                                });
                            }).call(this);
                        }
                    },
                    {
                        key: "setDataAsync",
                        value: function setDataAsync(data) {
                            return _async_to_generator(function() {
                                return _ts_generator(this, function(_state) {
                                    switch(_state.label){
                                        case 0:
                                            return [
                                                4,
                                                this.extra$.delayPlayerDataAsync()
                                            ];
                                        case 1:
                                            return _state.sent(), Ludex.Utils.Browser.writeLocalStorage(this.dataKey$, data), [
                                                2
                                            ];
                                    }
                                });
                            }).call(this);
                        }
                    },
                    {
                        key: "getSignedPlayerInfoAsync",
                        value: function getSignedPlayerInfoAsync() {
                            return _async_to_generator(function() {
                                var _this;
                                return _ts_generator(this, function(_state) {
                                    return _this = this, [
                                        2,
                                        {
                                            getPlayerID: __name(function() {
                                                var _this_getID;
                                                return null != (_this_getID = _this.getID()) ? _this_getID : "";
                                            }, "getPlayerID"),
                                            getSignature: this.getSignature$
                                        }
                                    ];
                                });
                            }).call(this);
                        }
                    },
                    {
                        key: "getConnectedPlayersAsync",
                        value: function getConnectedPlayersAsync() {
                            return _async_to_generator(function() {
                                return _ts_generator(this, function(_state) {
                                    switch(_state.label){
                                        case 0:
                                            return [
                                                4,
                                                this.loadMockConnectedPlayers$()
                                            ];
                                        case 1:
                                            return _state.sent(), this.connectedPlayers$ || this.extra$.exceptionUnsupported(), [
                                                2,
                                                this.connectedPlayers$.getConnectedPlayersAsync()
                                            ];
                                    }
                                });
                            }).call(this);
                        }
                    },
                    {
                        key: "updateCurrentPlayerInfo$",
                        value: function updateCurrentPlayerInfo$(playerId2) {
                            var _Ludex_Utils = Ludex.Utils, B6 = _Ludex_Utils.Browser, V37 = _Ludex_Utils.Valid, O33 = _Ludex_Utils.Object, S9 = _Ludex_Utils.String, currentId = null != playerId2 ? playerId2 : "", currentName = "Nameless";
                            if (this.extra$.isGuest) {
                                var data = B6.getLocalStorage(this.infoKey$);
                                V37.isObject(data) && O33.hasOwn(data, "playerId") && V37.isString(data.playerId) && (currentId = data.playerId), V37.isObject(data) && O33.hasOwn(data, "playerName") && V37.isString(data.playerName) && (currentName = data.playerName);
                            }
                            V37.isEmpty(currentId) && (currentId = S9.generateObjectId()), "Nameless" === currentName && this.isUseNameGenerator$() && (currentName = S9.generateNameUsingString(currentId)), this.currentPlayerInfo$.playerId = currentId, this.currentPlayerInfo$.playerName = currentName, this.currentPlayerInfo$.playerPhoto = avatarUrl.replace("%1", currentId), this.updateMockupPlayerInfo$(currentId);
                        }
                    },
                    {
                        key: "isUseNameGenerator$",
                        value: function isUseNameGenerator$() {
                            var gameConfig = define_GAME_SDK_CONFIG_default;
                            return (null == gameConfig ? void 0 : gameConfig.UseNameGenerator) === !0;
                        }
                    },
                    {
                        key: "getMockPlayerInfo$",
                        value: function getMockPlayerInfo$() {
                            var Match = Ludex.Configs.Mockup.Match;
                            return Match.Enabled ? Match.PlayerInfo : null;
                        }
                    },
                    {
                        key: "getMockOpponentInfo$",
                        value: function getMockOpponentInfo$() {
                            var Match = Ludex.Configs.Mockup.Match;
                            return Match.Enabled ? Match.OpponentInfo : null;
                        }
                    },
                    {
                        key: "updateMockupPlayerInfo$",
                        value: function updateMockupPlayerInfo$(playerId2) {
                            var info = this.getMockOpponentInfo$();
                            playerId2 !== (null == info ? void 0 : info.Id) && (info = this.getMockPlayerInfo$()), info && (this.currentPlayerInfo$.playerId = info.Id, info.Name && (this.currentPlayerInfo$.playerName = info.Name), info.Photo && (this.currentPlayerInfo$.playerPhoto = info.Photo));
                        }
                    },
                    {
                        key: "getSignatureFormMockup$",
                        value: function getSignatureFormMockup$() {
                            var Match = Ludex.Configs.Mockup.Match, isPlayer = Match.PlayerInfo.Id === this.getID(), isOpponent = Match.OpponentInfo.Id === this.getID();
                            return isPlayer ? Match.PlayerInfo.Signature : isOpponent ? Match.OpponentInfo.Signature : null;
                        }
                    },
                    {
                        key: "loadMockSubscribeBot$",
                        value: function loadMockSubscribeBot$() {
                            return _async_to_generator(function() {
                                var MockSubscribeBot;
                                return _ts_generator(this, function(_state) {
                                    switch(_state.label){
                                        case 0:
                                            if (this.subscribeBot$) return [
                                                2
                                            ];
                                            return [
                                                4,
                                                Promise.resolve().then(function() {
                                                    return init_empty_script(), empty_script_exports;
                                                })
                                            ];
                                        case 1:
                                            if ("function" != typeof (MockSubscribeBot = _state.sent().default)) return [
                                                2
                                            ];
                                            return this.subscribeBot$ = new MockSubscribeBot(this.adapter$), [
                                                2
                                            ];
                                    }
                                });
                            }).call(this);
                        }
                    },
                    {
                        key: "loadMockConnectedPlayers$",
                        value: function loadMockConnectedPlayers$() {
                            return _async_to_generator(function() {
                                var MockConnectedPlayers;
                                return _ts_generator(this, function(_state) {
                                    switch(_state.label){
                                        case 0:
                                            if (this.connectedPlayers$) return [
                                                2
                                            ];
                                            return [
                                                4,
                                                Promise.resolve().then(function() {
                                                    return init_empty_script(), empty_script_exports;
                                                })
                                            ];
                                        case 1:
                                            if ("function" != typeof (MockConnectedPlayers = _state.sent().default)) return [
                                                2
                                            ];
                                            return this.connectedPlayers$ = new MockConnectedPlayers(this.extra$), [
                                                2
                                            ];
                                    }
                                });
                            }).call(this);
                        }
                    }
                ]), _Player1;
            }(), __name(_Player, "Player"), Player_default = _Player;
        }
    }), init_TournamentInstance = __esm({
        "extensions/ludex/src/game-sdk/sdk/TournamentInstance.ts": function() {
            init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), __name(_TournamentInstance = function() {
                function _TournamentInstance1(id, payload) {
                    var _config_endTime, isPageHosted = arguments.length > 2 && void 0 !== arguments[2] && arguments[2];
                    _class_call_check(this, _TournamentInstance1), _define_property(this, "id$", void 0), _define_property(this, "title$", void 0), _define_property(this, "contextId$", void 0), _define_property(this, "payload$", void 0), _define_property(this, "endTime$", void 0), _define_property(this, "tournamentType$", void 0);
                    var config = payload.config, data = payload.data;
                    this.id$ = id, this.title$ = config.title, this.contextId$ = "0123".concat(this.id$), this.payload$ = JSON.stringify(null != data ? data : {}), this.endTime$ = null != (_config_endTime = config.endTime) ? _config_endTime : this.defaultEndTime$(), this.tournamentType$ = isPageHosted ? "PAGE_HOSTED" : "DEFAULT";
                }
                return _create_class(_TournamentInstance1, [
                    {
                        key: "defaultEndTime$",
                        value: function defaultEndTime$() {
                            return Math.round((Date.now() + 604800000) / 1e3);
                        }
                    },
                    {
                        key: "getID",
                        value: function getID() {
                            return this.id$;
                        }
                    },
                    {
                        key: "getTitle",
                        value: function getTitle() {
                            return this.title$;
                        }
                    },
                    {
                        key: "getPayload",
                        value: function getPayload() {
                            return this.payload$;
                        }
                    },
                    {
                        key: "getEndTime",
                        value: function getEndTime() {
                            return this.endTime$;
                        }
                    },
                    {
                        key: "getContextID",
                        value: function getContextID() {
                            return this.contextId$;
                        }
                    },
                    {
                        key: "getTournamentType",
                        value: function getTournamentType() {
                            return this.tournamentType$;
                        }
                    },
                    {
                        key: "toObject",
                        value: function toObject() {
                            return {
                                id: this.id$,
                                title: this.title$,
                                payload: this.payload$,
                                endTime: this.endTime$,
                                contextId: this.contextId$,
                                tournamentType: this.tournamentType$
                            };
                        }
                    }
                ]), _TournamentInstance1;
            }(), "TournamentInstance"), TournamentInstance_default = _TournamentInstance;
        }
    }), init_Tournament = __esm({
        "extensions/ludex/src/game-sdk/sdk/Tournament.ts": function() {
            init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_Context(), init_TournamentInstance(), CreateErrorList = _to_consumable_array(CommonErrorList2 = [
                "Unsupported",
                "NetworkFailure",
                "PendingRequest",
                "ClientUnsupportedOpera\
tion"
            ]).concat([
                "InvalidParam",
                "UserInput"
            ]), JoinErrorList = _to_consumable_array(CommonErrorList2).concat([
                "InvalidOperation",
                "UserInput"
            ]), ShareErrorList = _to_consumable_array(CommonErrorList2).concat([
                "InvalidParam",
                "UserInput"
            ]), PostScoreErrorList = _to_consumable_array(CommonErrorList2).concat([
                "InvalidParam",
                "UserInput"
            ]), GetTournamentsErrorList = _to_consumable_array(CommonErrorList2).concat([
                "NetworkFailure"
            ]), TOURNAMENTS_DATA_MOCK_KEY = "TournamentsDataMockKey", TOURNAMENT_LEADERS_MOCK_KEY = "TournamentLeadersMockKey", _Tournament = function() {
                function _Tournament1(adapter) {
                    var _this = this;
                    _class_call_check(this, _Tournament1), _define_property(this, "adapter$", void 0), _define_property(this, "extra$", void 0), _define_property(this, "context$", void 0), _define_property(this, "shareAsyncPopup$", null), _define_property(this, "createAsyncPopup$", null), _define_property(this, "processEnterTournament$", __name(function(tournamentId) {
                        return _async_to_generator(function() {
                            return _ts_generator(this, function(_state) {
                                switch(_state.label){
                                    case 0:
                                        if (!this.getTournamentData$(tournamentId)) return [
                                            2
                                        ];
                                        return [
                                            4,
                                            this.joinAsync(tournamentId)
                                        ];
                                    case 1:
                                        return _state.sent(), [
                                            2
                                        ];
                                }
                            });
                        }).call(_this);
                    }, "processEnterTournament$")), _define_property(this, "handleOnYes$", __name(function(resolve) {
                        return function() {
                            _this.extra$.isPopupShown = !1, resolve(!0);
                        };
                    }, "handleOnYes$")), _define_property(this, "handleOnNo$", __name(function(reject) {
                        return function() {
                            _this.extra$.isPopupShown = !1;
                            try {
                                _this.extra$.exceptionUserInput("Player closed the context menu");
                            } catch (error) {
                                reject(error);
                            }
                        };
                    }, "handleOnNo$")), this.adapter$ = adapter, this.extra$ = adapter.extra, this.context$ = adapter.context;
                }
                return _create_class(_Tournament1, [
                    {
                        key: "initTournamentInfoAsync",
                        value: function initTournamentInfoAsync(tournamentId) {
                            return _async_to_generator(function() {
                                return _ts_generator(this, function(_state) {
                                    switch(_state.label){
                                        case 0:
                                            if (!Ludex.Configs.Mockup.GameSDK.Tournament.Enabled) return [
                                                2
                                            ];
                                            return [
                                                4,
                                                this.createMockTournamentsData$()
                                            ];
                                        case 1:
                                            if (_state.sent(), !tournamentId) return [
                                                3,
                                                3
                                            ];
                                            return [
                                                4,
                                                this.processEnterTournament$(tournamentId)
                                            ];
                                        case 2:
                                            _state.sent(), _state.label = 3;
                                        case 3:
                                            return [
                                                2
                                            ];
                                    }
                                });
                            }).call(this);
                        }
                    },
                    {
                        key: "createMockTournamentsData$",
                        value: function createMockTournamentsData$() {
                            return _async_to_generator(function() {
                                var O33, _Ludex_Configs_Mockup_GameSDK_Tournament, Enabled2, NumOfTournament, NumOfNormal, NumOfHostPaged, tournamentsData, allTournaments, tournaments, currentDefaultTournaments, currentHostPageTournaments, defaultTournamentsLength, hostPageTournamentsLength, remainingDefaultTournaments, remainingHostPageTournaments, defaultTournaments, hostPageTournaments;
                                return _ts_generator(this, function(_state) {
                                    switch(_state.label){
                                        case 0:
                                            if (O33 = Ludex.Utils.Object, Enabled2 = (_Ludex_Configs_Mockup_GameSDK_Tournament = Ludex.Configs.Mockup.GameSDK.Tournament).Enabled, NumOfNormal = (NumOfTournament = _Ludex_Configs_Mockup_GameSDK_Tournament.NumOfTournament).Normal, NumOfHostPaged = NumOfTournament.HostPage, !Enabled2) return [
                                                2
                                            ];
                                            return tournamentsData = this.getTournamentsData$(), allTournaments = O33.vals(tournamentsData), currentDefaultTournaments = (tournaments = this.filterExpiredTournaments$(allTournaments)).filter(function(tournament) {
                                                return "DEFAULT" === tournament.tournamentType;
                                            }), currentHostPageTournaments = tournaments.filter(function(tournament) {
                                                return "PAGE_HOSTED" === tournament.tournamentType;
                                            }), defaultTournamentsLength = currentDefaultTournaments.length, hostPageTournamentsLength = currentHostPageTournaments.length, remainingDefaultTournaments = NumOfNormal - defaultTournamentsLength, remainingHostPageTournaments = NumOfHostPaged - hostPageTournamentsLength, defaultTournaments = this.createDefaultTournaments$(remainingDefaultTournaments), hostPageTournaments = this.createGlobalTournaments$(remainingHostPageTournaments), [
                                                4,
                                                Promise.all(_to_consumable_array(defaultTournaments).concat(_to_consumable_array(hostPageTournaments)))
                                            ];
                                        case 1:
                                            return _state.sent(), [
                                                2
                                            ];
                                    }
                                });
                            }).call(this);
                        }
                    },
                    {
                        key: "filterExpiredTournaments$",
                        value: function filterExpiredTournaments$(tournaments) {
                            var now = Date.now() / 1e3, validTournaments = tournaments.filter(function(tournament) {
                                return tournament.endTime > now;
                            }), newTournamentData = {}, _iteratorNormalCompletion = !0, _didIteratorError = !1, _iteratorError = void 0;
                            try {
                                for(var _step, _iterator = validTournaments[Symbol.iterator](); !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = !0){
                                    var tournament = _step.value;
                                    newTournamentData[tournament.id] = tournament;
                                }
                            } catch (err) {
                                _didIteratorError = !0, _iteratorError = err;
                            } finally{
                                try {
                                    _iteratorNormalCompletion || null == _iterator.return || _iterator.return();
                                } finally{
                                    if (_didIteratorError) throw _iteratorError;
                                }
                            }
                            return this.writeTournamentsData$(newTournamentData), validTournaments;
                        }
                    },
                    {
                        key: "createDefaultTournaments$",
                        value: function createDefaultTournaments$(length) {
                            var _this = this, _Ludex_Utils = Ludex.Utils, S9 = _Ludex_Utils.String, A10 = _Ludex_Utils.Array, N = _Ludex_Utils.Number, ExtraPlayerTournamentPayload = Ludex.Configs.Mockup.GameSDK.Tournament.ExtraPlayerTournamentPayload, leaderboard = codex.leaderboard, playerId2 = GameSDK.player.getID(), playerName = GameSDK.player.getName();
                            return A10.length(length).map(function() {
                                return _async_to_generator(function() {
                                    var title, leaderboardId, tournamentId, playerLimit, leaders;
                                    return _ts_generator(this, function(_state) {
                                        switch(_state.label){
                                            case 0:
                                                return title = "".concat(playerName, "'s Tournament ").concat(S9.generateObjectId()), [
                                                    4,
                                                    leaderboard.createLeaderboardAsync({
                                                        name: title
                                                    })
                                                ];
                                            case 1:
                                                if (leaderboardId = _state.sent(), tournamentId = this.createMockTournamentAsync$({
                                                    initialScore: 0,
                                                    config: {
                                                        title: title,
                                                        tournamentTitle: title
                                                    },
                                                    data: __spreadValues({
                                                        playerId: playerId2,
                                                        playerName: playerName,
                                                        leaderboardId: leaderboardId
                                                    }, ExtraPlayerTournamentPayload)
                                                }).getID().toString(), this.getTournamentLeadersData$(tournamentId)) return [
                                                    2
                                                ];
                                                return playerLimit = N.random(2), (leaders = codex.player.getConnectedPlayerIds(playerLimit, 0).map(function(playerId3) {
                                                    return {
                                                        playerId: playerId3,
                                                        score: N.random(4)
                                                    };
                                                })).sort(function(a, b) {
                                                    return a.score - b.score;
                                                }), this.writeTournamentLeadersData$(tournamentId, leaders), [
                                                    2
                                                ];
                                        }
                                    });
                                }).call(_this);
                            });
                        }
                    },
                    {
                        key: "createGlobalTournaments$",
                        value: function createGlobalTournaments$(length) {
                            var _this = this, _Ludex_Utils = Ludex.Utils, S9 = _Ludex_Utils.String, A10 = _Ludex_Utils.Array, N = _Ludex_Utils.Number, ExtraGlobalTournamentPayload = Ludex.Configs.Mockup.GameSDK.Tournament.ExtraGlobalTournamentPayload, leaderboard = codex.leaderboard;
                            return A10.length(length).map(function() {
                                return _async_to_generator(function() {
                                    var id, payload, title, tournamentId, leaderLength, leaders;
                                    return _ts_generator(this, function(_state) {
                                        switch(_state.label){
                                            case 0:
                                                return payload = __spreadValues({
                                                    leaderboardId: id = S9.generateObjectId(),
                                                    playerId: "global"
                                                }, ExtraGlobalTournamentPayload), title = "Global Tournament ".concat(id), [
                                                    4,
                                                    leaderboard.createLeaderboardAsync({
                                                        name: title,
                                                        _id: id,
                                                        type: "world_tournament_leaderboard",
                                                        description: JSON.stringify(payload)
                                                    })
                                                ];
                                            case 1:
                                                if (_state.sent(), tournamentId = this.createMockTournamentAsync$({
                                                    initialScore: 0,
                                                    config: {
                                                        title: title,
                                                        tournamentTitle: title
                                                    },
                                                    data: payload
                                                }, !0).getID().toString(), this.getTournamentLeadersData$(tournamentId)) return [
                                                    2
                                                ];
                                                return leaderLength = N.random(2), (leaders = A10.length(leaderLength).map(function() {
                                                    return {
                                                        playerId: S9.generateObjectId(),
                                                        score: N.random(4)
                                                    };
                                                })).sort(function(a, b) {
                                                    return a.score - b.score;
                                                }), this.writeTournamentLeadersData$(tournamentId, leaders), [
                                                    2
                                                ];
                                        }
                                    });
                                }).call(_this);
                            });
                        }
                    },
                    {
                        key: "awaitRandomDelay$",
                        value: function awaitRandomDelay$() {
                            return _async_to_generator(function() {
                                var RandomDelayMs;
                                return _ts_generator(this, function(_state) {
                                    return RandomDelayMs = Ludex.Configs.Mockup.GameSDK.Tournament.RandomDelayMs, [
                                        2,
                                        this.extra$.awaitRandomDelay(RandomDelayMs)
                                    ];
                                });
                            }).call(this);
                        }
                    },
                    {
                        key: "randomError",
                        value: function randomError(errors) {
                            100 * Math.random() < Ludex.Configs.Mockup.GameSDK.Tournament.ErrorRates && this.extra$.randomException(errors);
                        }
                    },
                    {
                        key: "loadCreateTournamentPopupAsync$",
                        value: function loadCreateTournamentPopupAsync$() {
                            return _async_to_generator(function() {
                                var CreateAsyncPopup;
                                return _ts_generator(this, function(_state) {
                                    switch(_state.label){
                                        case 0:
                                            if (this.createAsyncPopup$) return [
                                                2
                                            ];
                                            return [
                                                4,
                                                Promise.resolve().then(function() {
                                                    return init_empty_script(), empty_script_exports;
                                                })
                                            ];
                                        case 1:
                                            if ("function" != typeof (CreateAsyncPopup = _state.sent().default)) return [
                                                2
                                            ];
                                            return this.createAsyncPopup$ = new CreateAsyncPopup(), [
                                                4,
                                                this.createAsyncPopup$.setupTemplate()
                                            ];
                                        case 2:
                                            return _state.sent(), [
                                                2
                                            ];
                                    }
                                });
                            }).call(this);
                        }
                    },
                    {
                        key: "loadSharePopupAsync$",
                        value: function loadSharePopupAsync$() {
                            return _async_to_generator(function() {
                                var ShareAsyncPopup;
                                return _ts_generator(this, function(_state) {
                                    switch(_state.label){
                                        case 0:
                                            if (this.shareAsyncPopup$) return [
                                                2
                                            ];
                                            return [
                                                4,
                                                Promise.resolve().then(function() {
                                                    return init_empty_script(), empty_script_exports;
                                                })
                                            ];
                                        case 1:
                                            if ("function" != typeof (ShareAsyncPopup = _state.sent().default)) return [
                                                2
                                            ];
                                            return this.shareAsyncPopup$ = new ShareAsyncPopup(), [
                                                4,
                                                this.shareAsyncPopup$.setupTemplate()
                                            ];
                                        case 2:
                                            return _state.sent(), [
                                                2
                                            ];
                                    }
                                });
                            }).call(this);
                        }
                    },
                    {
                        key: "createAsync",
                        value: function createAsync(payload) {
                            return _async_to_generator(function() {
                                var _this, tournament, contextId2;
                                return _ts_generator(this, function(_state) {
                                    switch(_state.label){
                                        case 0:
                                            return _this = this, this.extra$.checkPopupShown(), [
                                                4,
                                                this.awaitRandomDelay$()
                                            ];
                                        case 1:
                                            return _state.sent(), null !== this.context$.getID() && this.extra$.exceptionInvalidOperation("Cannot create tournament while in a context"), this.validateCreatePayload$(payload), this.randomError(CreateErrorList), [
                                                4,
                                                this.loadCreateTournamentPopupAsync$()
                                            ];
                                        case 2:
                                            return _state.sent(), [
                                                4,
                                                new Promise(function(resolve, reject) {
                                                    _this.createAsyncPopup$ || _this.adapter$.extra.exceptionUnsupported(), _this.createAsyncPopup$.onYes(_this.handleOnYes$(resolve)), _this.createAsyncPopup$.onNo(_this.handleOnNo$(reject)), _this.createAsyncPopup$.show(payload), _this.extra$.isPopupShown = !0;
                                                })
                                            ];
                                        case 3:
                                            return _state.sent(), contextId2 = (tournament = this.createMockTournamentAsync$(payload)).getContextID(), this.setCurrentContextID$(contextId2), [
                                                2,
                                                tournament
                                            ];
                                    }
                                });
                            }).call(this);
                        }
                    },
                    {
                        key: "createMockTournamentAsync$",
                        value: function createMockTournamentAsync$(payload) {
                            var isPageHosted = arguments.length > 1 && void 0 !== arguments[1] && arguments[1], id = Ludex.Utils.String.generateObjectId(), tournament = new TournamentInstance_default(id, payload, isPageHosted), tournamentData = tournament.toObject();
                            return this.writeTournamentData$(id, tournamentData), tournament;
                        }
                    },
                    {
                        key: "postScoreAsync",
                        value: function postScoreAsync(score2) {
                            return _async_to_generator(function() {
                                var playerId2;
                                return _ts_generator(this, function(_state) {
                                    switch(_state.label){
                                        case 0:
                                            return [
                                                4,
                                                this.awaitRandomDelay$()
                                            ];
                                        case 1:
                                            return _state.sent(), this.validateAvailableTournament$(), score2 < 0 && this.extra$.exceptionInvalidParam("Score must be a positive number"), this.randomError(PostScoreErrorList), playerId2 = codex.player.getPlayerId(), this.updateBestScore$(playerId2, score2), [
                                                2
                                            ];
                                    }
                                });
                            }).call(this);
                        }
                    },
                    {
                        key: "shareAsync",
                        value: function shareAsync(payload) {
                            return _async_to_generator(function() {
                                var _this, score2, bestScore, tournament, playerId3, tournamentId, lastBestScore, playerId2;
                                return _ts_generator(this, function(_state) {
                                    switch(_state.label){
                                        case 0:
                                            return _this = this, this.extra$.checkPopupShown(), [
                                                4,
                                                this.awaitRandomDelay$()
                                            ];
                                        case 1:
                                            return _state.sent(), this.validateAvailableTournament$(), this.validateSharePayload$(payload), this.randomError(ShareErrorList), [
                                                4,
                                                this.loadSharePopupAsync$()
                                            ];
                                        case 2:
                                            return _state.sent(), bestScore = score2 = payload.score, (tournament = this.getCurrentTournament$()) && (playerId3 = codex.player.getPlayerId(), tournamentId = tournament.getID().toString(), (lastBestScore = this.getBestScore$(tournamentId, playerId3)) && lastBestScore < score2 && (bestScore = lastBestScore)), [
                                                4,
                                                new Promise(function(resolve, reject) {
                                                    _this.shareAsyncPopup$ || _this.adapter$.extra.exceptionUnsupported(), _this.shareAsyncPopup$.onYes(_this.handleOnYes$(resolve)), _this.shareAsyncPopup$.onNo(_this.handleOnNo$(reject)), _this.shareAsyncPopup$.show(bestScore), _this.extra$.isPopupShown = !0;
                                                })
                                            ];
                                        case 3:
                                            return _state.sent(), playerId2 = codex.player.getPlayerId(), this.updateBestScore$(playerId2, score2), [
                                                2
                                            ];
                                    }
                                });
                            }).call(this);
                        }
                    },
                    {
                        key: "getTournamentsAsync",
                        value: function getTournamentsAsync() {
                            return _async_to_generator(function() {
                                var _this, tournamentsData;
                                return _ts_generator(this, function(_state) {
                                    switch(_state.label){
                                        case 0:
                                            return _this = this, [
                                                4,
                                                this.awaitRandomDelay$()
                                            ];
                                        case 1:
                                            return _state.sent(), this.randomError(GetTournamentsErrorList), tournamentsData = this.getTournamentsData$(), [
                                                2,
                                                Ludex.Utils.Object.vals(tournamentsData).map(function(tournament) {
                                                    return _this.getTournamentInstance$(tournament.id);
                                                }).filter(function(tournament) {
                                                    return null !== tournament;
                                                })
                                            ];
                                    }
                                });
                            }).call(this);
                        }
                    },
                    {
                        key: "joinAsync",
                        value: function joinAsync(tournamentId) {
                            return _async_to_generator(function() {
                                var tournament, tournamentContextId;
                                return _ts_generator(this, function(_state) {
                                    switch(_state.label){
                                        case 0:
                                            return [
                                                4,
                                                this.awaitRandomDelay$()
                                            ];
                                        case 1:
                                            return _state.sent(), Ludex.Utils.Valid.isString(tournamentId) || this.extra$.exceptionInvalidParam("Tournament ID must be a string"), (tournament = this.getTournamentInstance$(tournamentId)) || this.extra$.exceptionTournamentNotFound("Tournament could not be found."), this.randomError(JoinErrorList), tournamentContextId = tournament.getContextID(), [
                                                4,
                                                GameSDK.context.switchAsync(tournamentContextId)
                                            ];
                                        case 2:
                                            return _state.sent(), [
                                                2
                                            ];
                                    }
                                });
                            }).call(this);
                        }
                    },
                    {
                        key: "setCurrentContextID$",
                        value: function setCurrentContextID$(contextId2) {
                            _instanceof(this.context$, Context_default) && this.context$.setCurrentContextId(contextId2);
                        }
                    },
                    {
                        key: "getCurrentTournament$",
                        value: function getCurrentTournament$() {
                            var contextId2 = this.context$.getID();
                            if (!contextId2) return null;
                            var tournamentsData = this.getTournamentsData$();
                            for(var tournamentId in tournamentsData)if (Object.hasOwn(tournamentsData, tournamentId) && tournamentsData[tournamentId].contextId === contextId2) return this.getTournamentInstance$(tournamentId);
                            return null;
                        }
                    },
                    {
                        key: "validateCreatePayload$",
                        value: function validateCreatePayload$(payload) {
                            var _Ludex_Utils = Ludex.Utils, O33 = _Ludex_Utils.Object, V37 = _Ludex_Utils.Valid;
                            V37.isObject(payload) || this.extra$.exceptionInvalidParam("Payload must be an object"), O33.hasOwn(payload, "initialScore") || this.extra$.exceptionInvalidParam("Payload must have initialScore"), O33.hasOwn(payload, "config") || this.extra$.exceptionInvalidParam("Payload must have config");
                            var initialScore = payload.initialScore, config = payload.config;
                            V37.isNumber(initialScore) || this.extra$.exceptionInvalidParam("initialScore must be a number"), V37.isObject(config) || this.extra$.exceptionInvalidParam("Config must be an object"), O33.hasOwn(config, "title") || this.extra$.exceptionInvalidParam("Config must have title"), O33.hasOwn(config, "tournamentTitle") || this.extra$.exceptionInvalidParam("Config must have tournamentTitle"), O33.hasOwn(payload, "data") && !V37.isObject(payload.data) && this.extra$.exceptionInvalidParam("Data must be an object");
                        }
                    },
                    {
                        key: "validateSharePayload$",
                        value: function validateSharePayload$(payload) {
                            var _Ludex_Utils = Ludex.Utils, O33 = _Ludex_Utils.Object, V37 = _Ludex_Utils.Valid;
                            V37.isObject(payload) || this.extra$.exceptionInvalidParam("Payload must be an object"), O33.hasOwn(payload, "score") || this.extra$.exceptionInvalidParam("Payload must have score");
                            var score2 = payload.score;
                            V37.isNumber(score2) || this.extra$.exceptionInvalidParam("Score must be a number"), O33.hasOwn(payload, "data") && !V37.isObject(payload.data) && this.extra$.exceptionInvalidParam("Data must be an object");
                        }
                    },
                    {
                        key: "validateAvailableTournament$",
                        value: function validateAvailableTournament$() {
                            this.getCurrentTournament$() || this.extra$.exceptionTournamentNotFound("There is no tournament for this context.");
                        }
                    },
                    {
                        key: "getTournamentInstance$",
                        value: function getTournamentInstance$(id) {
                            var tournamentData = this.getTournamentData$(id);
                            return tournamentData ? {
                                getID: __name(function() {
                                    return tournamentData.id;
                                }, "getID"),
                                getTitle: __name(function() {
                                    return tournamentData.title;
                                }, "getTitle"),
                                getPayload: __name(function() {
                                    return tournamentData.payload;
                                }, "getPayload"),
                                getEndTime: __name(function() {
                                    return tournamentData.endTime;
                                }, "getEndTime"),
                                getContextID: __name(function() {
                                    return tournamentData.contextId;
                                }, "getContextID"),
                                getTournamentType: __name(function() {
                                    return tournamentData.tournamentType;
                                }, "getTourn\
amentType")
                            } : null;
                        }
                    },
                    {
                        key: "getTournamentData$",
                        value: function getTournamentData$(id) {
                            var tournaments = this.getTournamentsData$();
                            return tournaments[id] ? tournaments[id] : null;
                        }
                    },
                    {
                        key: "writeTournamentData$",
                        value: function writeTournamentData$(id, data) {
                            var tournaments = this.getTournamentsData$();
                            tournaments[id] = data, this.writeTournamentsData$(tournaments);
                        }
                    },
                    {
                        key: "getTournamentsData$",
                        value: function getTournamentsData$() {
                            var _Ludex_Utils = Ludex.Utils, B6 = _Ludex_Utils.Browser, V37 = _Ludex_Utils.Valid, data = B6.getLocalStorage(TOURNAMENTS_DATA_MOCK_KEY);
                            return V37.isObject(data) ? data : {};
                        }
                    },
                    {
                        key: "writeTournamentsData$",
                        value: function writeTournamentsData$(tournaments) {
                            var _Ludex_Utils = Ludex.Utils, B6 = _Ludex_Utils.Browser;
                            _Ludex_Utils.Valid.isObject(tournaments) && B6.writeLocalStorage(TOURNAMENTS_DATA_MOCK_KEY, tournaments);
                        }
                    },
                    {
                        key: "getBestScore$",
                        value: function getBestScore$(tournamentId, playerId2) {
                            var _leader_score, leader = this.getTournamentLeader$(tournamentId, playerId2);
                            return leader && null != (_leader_score = leader.score) ? _leader_score : null;
                        }
                    },
                    {
                        key: "updateBestScore$",
                        value: function updateBestScore$(playerId2, score2) {
                            var tournament = this.getCurrentTournament$();
                            if (tournament) {
                                var tournamentId = tournament.getID().toString();
                                if (tournamentId) {
                                    var leader = this.getTournamentLeader$(tournamentId, playerId2);
                                    if (!leader) return void this.writeTournamentLeader$(tournamentId, {
                                        playerId: playerId2,
                                        score: score2
                                    });
                                    leader.score < score2 && (leader.score = score2, this.writeTournamentLeader$(tournamentId, leader));
                                }
                            }
                        }
                    },
                    {
                        key: "getTournamentLeader$",
                        value: function getTournamentLeader$(tournamentId, playerId2) {
                            var _A10_search, tournamentLeaders = this.getTournamentLeadersData$(tournamentId);
                            return tournamentLeaders.length && null != (_A10_search = Ludex.Utils.Array.search(tournamentLeaders, function(leader) {
                                return leader.playerId === playerId2;
                            })) ? _A10_search : null;
                        }
                    },
                    {
                        key: "getTournamentLeadersData$",
                        value: function getTournamentLeadersData$(tournamentId) {
                            var _Ludex_Utils = Ludex.Utils, B6 = _Ludex_Utils.Browser, O33 = _Ludex_Utils.Object, data = B6.getLocalStorage(TOURNAMENT_LEADERS_MOCK_KEY);
                            if (!O33.hasOwn(data, tournamentId)) return [];
                            var tournamentLeaders = data[tournamentId];
                            return Array.isArray(tournamentLeaders) ? (tournamentLeaders.sort(function(a, b) {
                                return b.score - a.score;
                            }), tournamentLeaders) : [];
                        }
                    },
                    {
                        key: "writeTournamentLeader$",
                        value: function writeTournamentLeader$(tournamentId, leader) {
                            var A10 = Ludex.Utils.Array, tournamentLeaders = this.getTournamentLeadersData$(tournamentId), leaderIndex = A10.searchIndex(tournamentLeaders, function(tournamentLeader) {
                                return tournamentLeader.playerId === leader.playerId;
                            });
                            -1 === leaderIndex ? tournamentLeaders.push(leader) : tournamentLeaders[leaderIndex] = leader, this.writeTournamentLeadersData$(tournamentId, tournamentLeaders);
                        }
                    },
                    {
                        key: "writeTournamentLeadersData$",
                        value: function writeTournamentLeadersData$(tournamentId, tournamentLeaders) {
                            var _B6_getLocalStorage, _Ludex_Utils = Ludex.Utils, B6 = _Ludex_Utils.Browser, O33 = _Ludex_Utils.Object;
                            if (Array.isArray(tournamentLeaders)) {
                                var data = null != (_B6_getLocalStorage = B6.getLocalStorage(TOURNAMENT_LEADERS_MOCK_KEY)) ? _B6_getLocalStorage : {};
                                O33.assign(data, _define_property({}, tournamentId, tournamentLeaders)), B6.writeLocalStorage(TOURNAMENT_LEADERS_MOCK_KEY, data);
                            }
                        }
                    }
                ]), _Tournament1;
            }(), __name(_Tournament, "Tournament"), Tournament_default = _Tournament;
        }
    }), init_GameSDK = __esm({
        "extensions/ludex/src/game-sdk/sdk/GameSDK.ts": function() {
            init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_Context(), init_Extra(), init_Payments(), init_Player(), init_Tournament(), __name(_GameSDK = function() {
                function _GameSDK1() {
                    _class_call_check(this, _GameSDK1), _define_property(this, "extra", void 0), _define_property(this, "player", void 0), _define_property(this, "context", void 0), _define_property(this, "tournament", void 0), _define_property(this, "payments", void 0), _define_property(this, "shortcut$", null), _define_property(this, "isInitialized", !1), _define_property(this, "bannerAdInstances$", {}), _define_property(this, "rewardedVideoInstance$", null), _define_property(this, "interstitialAdInstance$", null), _define_property(this, "rewardedInterstitialInstance$", null);
                }
                return _create_class(_GameSDK1, [
                    {
                        key: "initialize$",
                        value: function initialize$() {
                            this.extra = new Extra_default(this), this.player = new Player_default(this), this.context = new Context_default(this), this.payments = new Payments_default(this), this.tournament = new Tournament_default(this);
                        }
                    },
                    {
                        key: "isNeedSDK$",
                        value: function isNeedSDK$() {
                            var gameConfig = define_GAME_SDK_CONFIG_default;
                            return (null == gameConfig ? void 0 : gameConfig.AllowWithoutSDK) !== !0;
                        }
                    },
                    {
                        key: "getLocale",
                        value: function getLocale() {
                            return Ludex.Utils.Browser.getLocale();
                        }
                    },
                    {
                        key: "getPlatform",
                        value: function getPlatform() {
                            var D5 = Ludex.Utils.Device;
                            return D5.isAndroid() ? "ANDROID" : D5.isIOS() ? "IOS" : D5.isDesktop() ? "WEB" : D5.isMobile() ? "MOBILE_WEB" : null;
                        }
                    },
                    {
                        key: "isGameSDK",
                        value: function isGameSDK(name2) {
                            return this.getSDKName() === name2;
                        }
                    },
                    {
                        key: "getSDKName",
                        value: function getSDKName() {
                            return "Ludex";
                        }
                    },
                    {
                        key: "getSDKVersion",
                        value: function getSDKVersion() {
                            return "1.0.0";
                        }
                    },
                    {
                        key: "initializeAsync",
                        value: function initializeAsync() {
                            return _async_to_generator(function() {
                                var params, playerIdInQuery, contextIdInQuery, contextTypeInQuery;
                                return _ts_generator(this, function(_state) {
                                    switch(_state.label){
                                        case 0:
                                            if (this.isInitialized) return [
                                                2
                                            ];
                                            return this.initialize$(), [
                                                4,
                                                this.extra.createLoadingElement()
                                            ];
                                        case 1:
                                            if (_state.sent(), window.__sdkLoad.ensure(1), !this.isNeedSDK$()) return [
                                                3,
                                                3
                                            ];
                                            return [
                                                4,
                                                this.checkSDKInitialized$()
                                            ];
                                        case 2:
                                            _state.sent(), _state.label = 3;
                                        case 3:
                                            return [
                                                4,
                                                this.extra.waitLudexReadyAsync()
                                            ];
                                        case 4:
                                            return _state.sent(), [
                                                4,
                                                this.extra.delayInitialAsync()
                                            ];
                                        case 5:
                                            return _state.sent(), console.debug("Browser params:", params = Ludex.Utils.Browser.getQueryParams()), params.splashPreview && this.extra.destroyLoadingElement(), playerIdInQuery = params.playerId, this.player.initPlayerInfo(playerIdInQuery), contextIdInQuery = params.context_source_id, contextTypeInQuery = params.context_type, this.context.initContextInfo(contextIdInQuery, contextTypeInQuery), this.isInitialized = !0, [
                                                2
                                            ];
                                    }
                                });
                            }).call(this);
                        }
                    },
                    {
                        key: "checkSDKInitialized$",
                        value: function checkSDKInitialized$() {
                            return _async_to_generator(function() {
                                return _ts_generator(this, function(_state) {
                                    return this.extra.exceptionInvalidOperation("GameSDK requires AllowWithoutSDK=true in game config"), [
                                        2
                                    ];
                                });
                            }).call(this);
                        }
                    },
                    {
                        key: "startGameAsync",
                        value: function startGameAsync() {
                            var withEvent = !(arguments.length > 0) || void 0 === arguments[0] || arguments[0];
                            return _async_to_generator(function() {
                                var Events11, tournamentIdInQuery;
                                return _ts_generator(this, function(_state) {
                                    switch(_state.label){
                                        case 0:
                                            return this.isInitialized || this.extra.exceptionInvalidOperation("GameSDK is not initialized"), [
                                                4,
                                                this.extra.delayStartAsync()
                                            ];
                                        case 1:
                                            return _state.sent(), window.__sdkLoad.ensure(95), this.extra.destroyLoadingElement(), Events11 = Ludex.Events, tournamentIdInQuery = (0, Ludex.Utils.Browser.getQueryParams)().tournament_id, [
                                                4,
                                                this.tournament.initTournamentInfoAsync(tournamentIdInQuery)
                                            ];
                                        case 2:
                                            return _state.sent(), [
                                                4,
                                                this.payments.initPaymentInfoAsync()
                                            ];
                                        case 3:
                                            return _state.sent(), withEvent && codex.event.emit(Events11.GAME_SDK_STARTED), [
                                                2
                                            ];
                                    }
                                });
                            }).call(this);
                        }
                    },
                    {
                        key: "setLoadingProgress",
                        value: function setLoadingProgress(percentage) {
                            var _this_extra_setLoadingElementProgress, _this_extra;
                            null == (_this_extra = this.extra) || null == (_this_extra_setLoadingElementProgress = _this_extra.setLoadingElementProgress) || _this_extra_setLoadingElementProgress.call(_this_extra, percentage);
                        }
                    },
                    {
                        key: "getEntryPointData",
                        value: function getEntryPointData() {
                            var _Ludex_Utils = Ludex.Utils, B6 = _Ludex_Utils.Browser, J6 = _Ludex_Utils.Json, _B6_getQueryParams_payload = B6.getQueryParams().payload, payload = void 0 === _B6_getQueryParams_payload ? "{}" : _B6_getQueryParams_payload;
                            return "string" != typeof payload ? {} : J6.decode(payload);
                        }
                    },
                    {
                        key: "getEntryPointAsync",
                        value: function getEntryPointAsync() {
                            return _async_to_generator(function() {
                                return _ts_generator(this, function(_state) {
                                    return [
                                        2,
                                        "no_entry"
                                    ];
                                });
                            })();
                        }
                    },
                    {
                        key: "loadBannerAdAsync",
                        value: function loadBannerAdAsync(placementId) {
                            return _async_to_generator(function() {
                                var MockBannerInstance;
                                return _ts_generator(this, function(_state) {
                                    switch(_state.label){
                                        case 0:
                                            if (!placementId) return [
                                                2
                                            ];
                                            if (this.bannerAdInstances$[placementId]) return [
                                                3,
                                                2
                                            ];
                                            return [
                                                4,
                                                Promise.resolve().then(function() {
                                                    return init_empty_script(), empty_script_exports;
                                                })
                                            ];
                                        case 1:
                                            "function" != typeof (MockBannerInstance = _state.sent().default) && this.extra.exceptionInvalidOperation("Banner ads mock is not enabled"), this.bannerAdInstances$[placementId] = new MockBannerInstance("banner", placementId), _state.label = 2;
                                        case 2:
                                            return [
                                                4,
                                                this.bannerAdInstances$[placementId].loadAsync()
                                            ];
                                        case 3:
                                            return _state.sent(), [
                                                4,
                                                this.bannerAdInstances$[placementId].showAsync()
                                            ];
                                        case 4:
                                            return _state.sent(), [
                                                2
                                            ];
                                    }
                                });
                            }).call(this);
                        }
                    },
                    {
                        key: "hideBannerAdAsync",
                        value: function hideBannerAdAsync(placementId) {
                            return _async_to_generator(function() {
                                return _ts_generator(this, function(_state) {
                                    switch(_state.label){
                                        case 0:
                                            if (!this.bannerAdInstances$[placementId]) return [
                                                2
                                            ];
                                            return [
                                                4,
                                                this.bannerAdInstances$[placementId].hideAsync()
                                            ];
                                        case 1:
                                            return _state.sent(), [
                                                2
                                            ];
                                    }
                                });
                            }).call(this);
                        }
                    },
                    {
                        key: "getBannerHeight",
                        value: function getBannerHeight(bannerConfig) {
                            return bannerConfig.BannerHeight;
                        }
                    },
                    {
                        key: "getInterstitialAdAsync",
                        value: function getInterstitialAdAsync(placementId) {
                            return _async_to_generator(function() {
                                var MockAdInstance;
                                return _ts_generator(this, function(_state) {
                                    switch(_state.label){
                                        case 0:
                                            if (this.interstitialAdInstance$) return [
                                                3,
                                                2
                                            ];
                                            return [
                                                4,
                                                Promise.resolve().then(function() {
                                                    return init_empty_script(), empty_script_exports;
                                                })
                                            ];
                                        case 1:
                                            "function" != typeof (MockAdInstance = _state.sent().default) && this.extra.exceptionInvalidOperation("Interstitial ads mock is not enabled"), this.interstitialAdInstance$ = new MockAdInstance("interstitial", placementId), _state.label = 2;
                                        case 2:
                                            return [
                                                2,
                                                this.interstitialAdInstance$
                                            ];
                                    }
                                });
                            }).call(this);
                        }
                    },
                    {
                        key: "getRewardedVideoAsync",
                        value: function getRewardedVideoAsync(placementId) {
                            return _async_to_generator(function() {
                                var MockAdInstance;
                                return _ts_generator(this, function(_state) {
                                    switch(_state.label){
                                        case 0:
                                            if (this.rewardedVideoInstance$) return [
                                                3,
                                                2
                                            ];
                                            return [
                                                4,
                                                Promise.resolve().then(function() {
                                                    return init_empty_script(), empty_script_exports;
                                                })
                                            ];
                                        case 1:
                                            "function" != typeof (MockAdInstance = _state.sent().default) && this.extra.exceptionInvalidOperation("Rewarded video ads mock is not enabled"), this.rewardedVideoInstance$ = new MockAdInstance("rewarded", placementId), _state.label = 2;
                                        case 2:
                                            return [
                                                2,
                                                this.rewardedVideoInstance$
                                            ];
                                    }
                                });
                            }).call(this);
                        }
                    },
                    {
                        key: "getRewardedInterstitialAsync",
                        value: function getRewardedInterstitialAsync(placementId) {
                            return _async_to_generator(function() {
                                var MockAdInstance;
                                return _ts_generator(this, function(_state) {
                                    switch(_state.label){
                                        case 0:
                                            if (this.rewardedInterstitialInstance$) return [
                                                3,
                                                2
                                            ];
                                            return [
                                                4,
                                                Promise.resolve().then(function() {
                                                    return init_empty_script(), empty_script_exports;
                                                })
                                            ];
                                        case 1:
                                            "function" != typeof (MockAdInstance = _state.sent().default) && this.extra.exceptionInvalidOperation("Rewarded interstitial ads mock is not enabled"), this.rewardedInterstitialInstance$ = new MockAdInstance("rewarded_interstitial", placementId), _state.label = 2;
                                        case 2:
                                            return [
                                                2,
                                                this.rewardedInterstitialInstance$
                                            ];
                                    }
                                });
                            }).call(this);
                        }
                    },
                    {
                        key: "getTournamentAsync",
                        value: function getTournamentAsync() {
                            return _async_to_generator(function() {
                                var currentContextID, _Ludex_Utils, A10, tournaments, wantedTournament;
                                return _ts_generator(this, function(_state) {
                                    switch(_state.label){
                                        case 0:
                                            return this.tournament.randomError([
                                                "Unsupported",
                                                "NetworkFailure"
                                            ]), currentContextID = this.context.getID(), A10 = (_Ludex_Utils = Ludex.Utils).Array, _Ludex_Utils.Valid.isString(currentContextID) || this.extra.exceptionInvalidOperation("Not in a context"), [
                                                4,
                                                this.tournament.getTournamentsAsync()
                                            ];
                                        case 1:
                                            return tournaments = _state.sent(), (wantedTournament = A10.search(tournaments, function(tournament) {
                                                return tournament.getContextID() === currentContextID;
                                            })) || this.extra.exceptionTournamentNotFound("A Tournament with current context was not found"), [
                                                2,
                                                wantedTournament
                                            ];
                                    }
                                });
                            }).call(this);
                        }
                    },
                    {
                        key: "getSupportedAPIs",
                        value: function getSupportedAPIs() {
                            var _Ludex_Configs_Mockup_GameSDK = Ludex.Configs.Mockup.GameSDK, CanSubscribeBot = _Ludex_Configs_Mockup_GameSDK.Player.SubscribeBot.CanSubscribeBot, CanCreateShortcut = _Ludex_Configs_Mockup_GameSDK.AddShortcut.CanCreateShortcut, apis = [];
                            return CanSubscribeBot && apis.push("player.canSubscribeBotAsync"), CanCreateShortcut && apis.push("canCreateShortcutAsync"), apis;
                        }
                    },
                    {
                        key: "canCreateShortcutAsync",
                        value: function canCreateShortcutAsync() {
                            return _async_to_generator(function() {
                                return _ts_generator(this, function(_state) {
                                    switch(_state.label){
                                        case 0:
                                            return [
                                                4,
                                                this.loadMockAddShortcut$()
                                            ];
                                        case 1:
                                            return _state.sent(), this.shortcut$ || this.extra.exceptionUnsupported(), [
                                                2,
                                                this.shortcut$.canCreateShortcutAsync()
                                            ];
                                    }
                                });
                            }).call(this);
                        }
                    },
                    {
                        key: "createShortcutAsync",
                        value: function createShortcutAsync() {
                            return _async_to_generator(function() {
                                return _ts_generator(this, function(_state) {
                                    switch(_state.label){
                                        case 0:
                                            return [
                                                4,
                                                this.loadMockAddShortcut$()
                                            ];
                                        case 1:
                                            return _state.sent(), this.shortcut$ || this.extra.exceptionUnsupported(), [
                                                2,
                                                this.shortcut$.createShortcutAsync()
                                            ];
                                    }
                                });
                            }).call(this);
                        }
                    },
                    {
                        key: "loadMockAddShortcut$",
                        value: function loadMockAddShortcut$() {
                            return _async_to_generator(function() {
                                var MockAddShortcut;
                                return _ts_generator(this, function(_state) {
                                    switch(_state.label){
                                        case 0:
                                            if (this.shortcut$) return [
                                                2
                                            ];
                                            return [
                                                4,
                                                Promise.resolve().then(function() {
                                                    return init_empty_script(), empty_script_exports;
                                                })
                                            ];
                                        case 1:
                                            if ("function" != typeof (MockAddShortcut = _state.sent().default)) return [
                                                2
                                            ];
                                            return this.shortcut$ = new MockAddShortcut(this), [
                                                2
                                            ];
                                    }
                                });
                            }).call(this);
                        }
                    }
                ]), _GameSDK1;
            }(), "GameSDK"), GameSDK_default2 = _GameSDK;
        }
    }), init_AdInstance = __esm({
        "extensions/ludex/src/game-sdk/sdk/AdInstance.ts": function() {
            init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), __name(_AdInstance = function() {
                function _AdInstance1(type, placementId) {
                    _class_call_check(this, _AdInstance1), _define_property(this, "type$", void 0), _define_property(this, "placementId$", void 0), this.type$ = type, this.placementId$ = placementId;
                }
                return _create_class(_AdInstance1, [
                    {
                        key: "getPlacementID",
                        value: function getPlacementID() {
                            return this.placementId$;
                        }
                    },
                    {
                        key: "hideAsync",
                        value: function hideAsync() {
                            return _async_to_generator(function() {
                                return _ts_generator(this, function(_state) {
                                    return [
                                        2
                                    ];
                                });
                            })();
                        }
                    }
                ]), _AdInstance1;
            }(), "AdInstance"), AdInstance_default = _AdInstance;
        }
    }), init_YTAdInstance = __esm({
        "extensions/ludex/src/game-sdk/adapters/youtube-playables/YTAdInstance.ts": function() {
            init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_SDKCommonError(), init_AdInstance(), ErrorCodes = {
                AD_NOT_LOADED: "AD_NOT_LOADED",
                LOAD_ADS_FAILURE: "LOAD_ADS_FAILURE",
                INVALID_OPERATION: "INVALID_OPERATION",
                SHOW_ADS_FAILURE: "SHOW_ADS_FAILURE",
                SHOW_ADS_TIMEOUT: "SHOW_ADS_TIMEOUT",
                SHOW_ADS_COMPLETED_FAILURE: "SHOW_ADS_COMPLETED_FAILURE"
            }, __name(_YTAdInstance = function(AdInstance_default1) {
                function _YTAdInstance1(sdk2) {
                    var _this;
                    return _class_call_check(this, _YTAdInstance1), _define_property(_this = _call_super(this, _YTAdInstance1, [
                        "interstitial",
                        ""
                    ]), "sdk$", void 0), _define_property(_this, "isAdShowInProgress$", !1), _this.sdk$ = sdk2, _this;
                }
                return _inherits(_YTAdInstance1, AdInstance_default1), _create_class(_YTAdInstance1, [
                    {
                        key: "loadAsync",
                        value: function loadAsync() {
                            return _async_to_generator(function() {
                                return _ts_generator(this, function(_state) {
                                    return [
                                        2,
                                        Promise.resolve()
                                    ];
                                });
                            })();
                        }
                    },
                    {
                        key: "showAsync",
                        value: function showAsync() {
                            return _async_to_generator(function() {
                                var error;
                                return _ts_generator(this, function(_state) {
                                    switch(_state.label){
                                        case 0:
                                            if (this.isAdShowInProgress$) throw this.makeErrorWithCode$(ErrorCodes.INVALID_OPERATION, "Can't show ads while showin\
g ads");
                                            _state.label = 1;
                                        case 1:
                                            return _state.trys.push([
                                                1,
                                                3,
                                                4,
                                                5
                                            ]), this.isAdShowInProgress$ = !0, [
                                                4,
                                                this.sdk$.ads.requestInterstitialAd()
                                            ];
                                        case 2:
                                            return _state.sent(), console.debug("YTAdInstance showAsync completed"), [
                                                3,
                                                5
                                            ];
                                        case 3:
                                            throw error = _state.sent(), this.makeErrorWithCode$(ErrorCodes.SHOW_ADS_FAILURE, error);
                                        case 4:
                                            return this.isAdShowInProgress$ = !1, [
                                                7
                                            ];
                                        case 5:
                                            return [
                                                2
                                            ];
                                    }
                                });
                            }).call(this);
                        }
                    },
                    {
                        key: "makeErrorWithCode$",
                        value: function makeErrorWithCode$(code, error) {
                            var O33 = Ludex.Utils.Object, errCode = code, message = "";
                            if ("string" == typeof error) message = error;
                            else if (O33.hasOwn(error, "message") && "string" == typeof error.message) message = error.message;
                            else if (O33.hasOwn(error, "description") && "string" == typeof error.description) message = error.description;
                            else try {
                                message = JSON.stringify(error);
                            } catch (e) {
                                message = "Unknown error";
                            }
                            return O33.hasOwn(error, "code") && "string" == typeof error.code ? errCode = error.code : O33.hasOwn(error, "errorType") && "string" == typeof error.errorType && (errCode = error.errorType), new SDKCommonError_default(errCode, message);
                        }
                    }
                ]), _YTAdInstance1;
            }(AdInstance_default), "YTAdInstance"), YTAdInstance_default = _YTAdInstance;
        }
    }), init_YTExtra = __esm({
        "extensions/ludex/src/game-sdk/adapters/youtube-playables/YTExtra.ts": function() {
            init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_Extra(), __name(_YTExtra = function(Extra_default1) {
                function _YTExtra1(adapter) {
                    var _this;
                    return _class_call_check(this, _YTExtra1), _define_property(_this = _call_super(this, _YTExtra1, [
                        adapter
                    ]), "sdk$", void 0), _this.sdk$ = adapter.sdk, _this;
                }
                return _inherits(_YTExtra1, Extra_default1), _create_class(_YTExtra1, [
                    {
                        key: "logError",
                        value: function logError(error) {
                            try {
                                this.sdk$.health.logError(), console.error("YT Health Error:", error);
                            } catch (e) {
                                console.error("Failed to log error to YT health:", e);
                            }
                        }
                    },
                    {
                        key: "logWarning",
                        value: function logWarning(warning) {
                            try {
                                this.sdk$.health.logWarning(), console.warn("YT Health Warning:", warning);
                            } catch (e) {
                                console.warn("Failed to log warning to YT health:", e);
                            }
                        }
                    },
                    {
                        key: "sendScore",
                        value: function sendScore(score2) {
                            return _async_to_generator(function() {
                                var error;
                                return _ts_generator(this, function(_state) {
                                    switch(_state.label){
                                        case 0:
                                            return _state.trys.push([
                                                0,
                                                2,
                                                ,
                                                3
                                            ]), [
                                                4,
                                                this.sdk$.engagement.sendScore({
                                                    value: score2
                                                })
                                            ];
                                        case 1:
                                            return _state.sent(), [
                                                3,
                                                3
                                            ];
                                        case 2:
                                            throw error = _state.sent(), this.logError(error), console.error("Failed to send score to YT engagement:", error), error;
                                        case 3:
                                            return [
                                                2
                                            ];
                                    }
                                });
                            }).call(this);
                        }
                    },
                    {
                        key: "openYTContent",
                        value: function openYTContent(id) {
                            return _async_to_generator(function() {
                                var error;
                                return _ts_generator(this, function(_state) {
                                    switch(_state.label){
                                        case 0:
                                            return _state.trys.push([
                                                0,
                                                2,
                                                ,
                                                3
                                            ]), [
                                                4,
                                                this.sdk$.engagement.openYTContent({
                                                    id: id
                                                })
                                            ];
                                        case 1:
                                            return _state.sent(), [
                                                3,
                                                3
                                            ];
                                        case 2:
                                            throw error = _state.sent(), this.logError(error), console.error("Failed to open YT content:", error), error;
                                        case 3:
                                            return [
                                                2
                                            ];
                                    }
                                });
                            }).call(this);
                        }
                    },
                    {
                        key: "shareInviteCode",
                        value: function shareInviteCode(inviteCode) {
                            return _async_to_generator(function() {
                                var error;
                                return _ts_generator(this, function(_state) {
                                    switch(_state.label){
                                        case 0:
                                            return _state.trys.push([
                                                0,
                                                2,
                                                ,
                                                3
                                            ]), [
                                                4,
                                                this.sdk$.game.shareInviteCode(inviteCode)
                                            ];
                                        case 1:
                                            return _state.sent(), [
                                                3,
                                                3
                                            ];
                                        case 2:
                                            throw error = _state.sent(), this.logError(error), error;
                                        case 3:
                                            return [
                                                2
                                            ];
                                    }
                                });
                            }).call(this);
                        }
                    },
                    {
                        key: "onPause",
                        value: function onPause(callback) {
                            this.sdk$.system.onPause(callback);
                        }
                    },
                    {
                        key: "onResume",
                        value: function onResume(callback) {
                            this.sdk$.system.onResume(callback);
                        }
                    },
                    {
                        key: "isAudioEnabled",
                        value: function isAudioEnabled() {
                            return this.sdk$.system.isAudioEnabled();
                        }
                    },
                    {
                        key: "onAudioEnabledChange",
                        value: function onAudioEnabledChange(callback) {
                            return this.sdk$.system.onAudioEnabledChange(callback);
                        }
                    }
                ]), _YTExtra1;
            }(Extra_default), "YTExtra"), YTExtra_default = _YTExtra;
        }
    }), init_YTPlayer = __esm({
        "extensions/ludex/src/game-sdk/adapters/youtube-playables/YTPlayer.ts": function() {
            init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_Player(), __name(_YTPlayer = function(Player_default1) {
                function _YTPlayer1(adapter) {
                    var _this;
                    return _class_call_check(this, _YTPlayer1), (_this = _call_super(this, _YTPlayer1, [
                        adapter
                    ])).sdk$ = adapter.sdk, _this.extra$ = adapter.extra, _this;
                }
                return _inherits(_YTPlayer1, Player_default1), _create_class(_YTPlayer1, [
                    {
                        key: "initPlayerAsync",
                        value: function initPlayerAsync() {
                            return this.initGuestMode$();
                        }
                    },
                    {
                        key: "isFallback$",
                        value: function isFallback$() {
                            return !this.adapter$.isInitialized || !this.sdk$.IN_PLAYABLES_ENV;
                        }
                    },
                    {
                        key: "initGuestMode$",
                        value: function initGuestMode$() {
                            return _async_to_generator(function() {
                                var playerId2;
                                return _ts_generator(this, function(_state) {
                                    try {
                                        playerId2 = this.getID(), this.extra$.isGuest = !0, this.initPlayerInfo(playerId2);
                                    } catch (e) {}
                                    return [
                                        2
                                    ];
                                });
                            }).call(this);
                        }
                    },
                    {
                        key: "getDataAsync",
                        value: function getDataAsync(keys) {
                            var _this = this, _this1 = this, _superprop_get_getDataAsync = function _superprop_get_getDataAsync() {
                                return _get(_get_prototype_of(_YTPlayer1.prototype), "getDataAsync", _this);
                            };
                            return _async_to_generator(function() {
                                var dataString, _Ludex_Utils, J6, V37, O33, data, dataObject, _iteratorNormalCompletion, _didIteratorError, _iteratorError, _iterator, _step, key, error;
                                return _ts_generator(this, function(_state) {
                                    switch(_state.label){
                                        case 0:
                                            if (this.isFallback$()) return [
                                                2,
                                                _superprop_get_getDataAsync().call(_this1, keys)
                                            ];
                                            _state.label = 1;
                                        case 1:
                                            return _state.trys.push([
                                                1,
                                                3,
                                                ,
                                                4
                                            ]), [
                                                4,
                                                this.sdk$.game.loadData()
                                            ];
                                        case 2:
                                            if (!(dataString = _state.sent()) || (J6 = (_Ludex_Utils = Ludex.Utils).Json, V37 = _Ludex_Utils.Valid, O33 = _Ludex_Utils.Object, data = J6.decode(dataString), !V37.isObject(data))) return [
                                                2,
                                                {}
                                            ];
                                            if (keys.length < 1) return [
                                                2,
                                                data
                                            ];
                                            dataObject = {}, _iteratorNormalCompletion = !0, _didIteratorError = !1, _iteratorError = void 0;
                                            try {
                                                for(_iterator = keys[Symbol.iterator](); !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = !0)key = _step.value, O33.hasOwn(data, key) && (dataObject[key] = data[key]);
                                            } catch (err) {
                                                _didIteratorError = !0, _iteratorError = err;
                                            } finally{
                                                try {
                                                    _iteratorNormalCompletion || null == _iterator.return || _iterator.return();
                                                } finally{
                                                    if (_didIteratorError) throw _iteratorError;
                                                }
                                            }
                                            return [
                                                2,
                                                dataObject
                                            ];
                                        case 3:
                                            return error = _state.sent(), this.extra$.logWarning(error), [
                                                2,
                                                {}
                                            ];
                                        case 4:
                                            return [
                                                2
                                            ];
                                    }
                                });
                            }).call(this);
                        }
                    },
                    {
                        key: "setDataAsync",
                        value: function setDataAsync(data) {
                            var _this = this, _this1 = this, _superprop_get_setDataAsync = function _superprop_get_setDataAsync() {
                                return _get(_get_prototype_of(_YTPlayer1.prototype), "setDataAsync", _this);
                            };
                            return _async_to_generator(function() {
                                var currentDataString, _Ludex_Utils, J6, V37, O33, currentData, decoded, newData, serialized, error;
                                return _ts_generator(this, function(_state) {
                                    switch(_state.label){
                                        case 0:
                                            if (this.isFallback$()) return [
                                                2,
                                                _superprop_get_setDataAsync().call(_this1, data)
                                            ];
                                            _state.label = 1;
                                        case 1:
                                            return _state.trys.push([
                                                1,
                                                4,
                                                ,
                                                5
                                            ]), [
                                                4,
                                                this.sdk$.game.loadData()
                                            ];
                                        case 2:
                                            return currentDataString = _state.sent(), J6 = (_Ludex_Utils = Ludex.Utils).Json, V37 = _Ludex_Utils.Valid, O33 = _Ludex_Utils.Object, currentData = {}, currentDataString && (decoded = J6.decode(currentDataString), V37.isObject(decoded) && (currentData = decoded)), newData = O33.merge(currentData, data), serialized = J6.encode(newData), [
                                                4,
                                                this.sdk$.game.saveData(serialized)
                                            ];
                                        case 3:
                                            return _state.sent(), [
                                                3,
                                                5
                                            ];
                                        case 4:
                                            throw error = _state.sent(), this.extra$.logError(error), error;
                                        case 5:
                                            return [
                                                2
                                            ];
                                    }
                                });
                            }).call(this);
                        }
                    },
                    {
                        key: "getSignedPlayerInfoAsync",
                        value: function getSignedPlayerInfoAsync() {
                            return _async_to_generator(function() {
                                return _ts_generator(this, function(_state) {
                                    return this.extra$.exceptionUnsupported(), [
                                        2
                                    ];
                                });
                            }).call(this);
                        }
                    },
                    {
                        key: "getConnectedPlayersAsync",
                        value: function getConnectedPlayersAsync() {
                            return _async_to_generator(function() {
                                return _ts_generator(this, function(_state) {
                                    return [
                                        2,
                                        []
                                    ];
                                });
                            })();
                        }
                    },
                    {
                        key: "canSubscribeBotAsync",
                        value: function canSubscribeBotAsync() {
                            return _async_to_generator(function() {
                                return _ts_generator(this, function(_state) {
                                    return [
                                        2,
                                        !1
                                    ];
                                });
                            })();
                        }
                    },
                    {
                        key: "subscribeBotAsync",
                        value: function subscribeBotAsync() {
                            return _async_to_generator(function() {
                                return _ts_generator(this, function(_state) {
                                    return this.extra$.exceptionUnsupported(), [
                                        2
                                    ];
                                });
                            }).call(this);
                        }
                    }
                ]), _YTPlayer1;
            }(Player_default), "YTPlayer"), YTPlayer_default = _YTPlayer;
        }
    }), init_YTAdapter = __esm({
        "extensions/ludex/src/game-sdk/adapters/youtube-playables/YTAdapter.ts": function() {
            init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_GameSDK(), init_YTAdInstance(), init_YTExtra(), init_YTPlayer(), __name(_YTAdapter = function(GameSDK_default21) {
                function _YTAdapter1(sdk2) {
                    var _this;
                    return _class_call_check(this, _YTAdapter1), _define_property(_this = _call_super(this, _YTAdapter1), "sdk", void 0), _define_property(_this, "locale$", null), _this.sdk = sdk2, _this;
                }
                return _inherits(_YTAdapter1, GameSDK_default21), _create_class(_YTAdapter1, [
                    {
                        key: "initialize$",
                        value: function initialize$() {
                            _get(_get_prototype_of(_YTAdapter1.prototype), "initialize$", this).call(this), this.extra = new YTExtra_default(this), this.player = new YTPlayer_default(this), this.interstitialAdInstance$ = new YTAdInstance_default(this.sdk);
                        }
                    },
                    {
                        key: "tryGetLocale$",
                        value: function tryGetLocale$() {
                            return _async_to_generator(function() {
                                var _, error;
                                return _ts_generator(this, function(_state) {
                                    switch(_state.label){
                                        case 0:
                                            return _state.trys.push([
                                                0,
                                                2,
                                                ,
                                                3
                                            ]), _ = this, [
                                                4,
                                                this.sdk.system.getLanguage()
                                            ];
                                        case 1:
                                            return _.locale$ = _state.sent(), [
                                                3,
                                                3
                                            ];
                                        case 2:
                                            return error = _state.sent(), this.extra.logError(error), [
                                                3,
                                                3
                                            ];
                                        case 3:
                                            return [
                                                2
                                            ];
                                    }
                                });
                            }).call(this);
                        }
                    },
                    {
                        key: "getSDKName",
                        value: function getSDKName() {
                            return "YoutubePlayables";
                        }
                    },
                    {
                        key: "getSDKVersion",
                        value: function getSDKVersion() {
                            return this.sdk.SDK_VERSION;
                        }
                    },
                    {
                        key: "getLocale",
                        value: function getLocale() {
                            var _this_locale$;
                            return null != (_this_locale$ = this.locale$) ? _this_locale$ : null;
                        }
                    },
                    {
                        key: "checkSDKInitialized$",
                        value: function checkSDKInitialized$() {
                            return _async_to_generator(function() {
                                return _ts_generator(this, function(_state) {
                                    return void 0 !== this.sdk || this.extra.exceptionInvalidOperation("YouTube Playables SDK is not initialized"), [
                                        2
                                    ];
                                });
                            }).call(this);
                        }
                    },
                    {
                        key: "initializeAsync",
                        value: function initializeAsync() {
                            var _this = this, _this1 = this, _superprop_get_initializeAsync = function _superprop_get_initializeAsync() {
                                return _get(_get_prototype_of(_YTAdapter1.prototype), "initializeAsync", _this);
                            };
                            return _async_to_generator(function() {
                                return _ts_generator(this, function(_state) {
                                    switch(_state.label){
                                        case 0:
                                            if (this.isInitialized) return [
                                                2
                                            ];
                                            return [
                                                4,
                                                _superprop_get_initializeAsync().call(_this1)
                                            ];
                                        case 1:
                                            _state.sent(), this.isInitialized = !1, _state.label = 2;
                                        case 2:
                                            return _state.trys.push([
                                                2,
                                                4,
                                                ,
                                                5
                                            ]), [
                                                4,
                                                this.player.initPlayerAsync()
                                            ];
                                        case 3:
                                            return _state.sent(), this.tryGetLocale$(), this.sdk.game.firstFrameReady(), this.setupLifecycleListeners$(), this.isInitialized = !0, [
                                                3,
                                                5
                                            ];
                                        case 4:
                                            if (console.debug(_state.sent()), this.isNeedSDK$()) throw Error("Youtube Playables SDK not initialized");
                                            return console.warn("Youtube Playables SDK not initialized, running without platform sdk"), [
                                                3,
                                                5
                                            ];
                                        case 5:
                                            return [
                                                2
                                            ];
                                    }
                                });
                            }).call(this);
                        }
                    },
                    {
                        key: "startGameAsync",
                        value: function startGameAsync() {
                            var _this = this, _this1 = this, _superprop_get_startGameAsync = function _superprop_get_startGameAsync() {
                                return _get(_get_prototype_of(_YTAdapter1.prototype), "startGameAsync", _this);
                            };
                            return _async_to_generator(function() {
                                var canvasRecorder, gameCanvas;
                                return _ts_generator(this, function(_state) {
                                    switch(_state.label){
                                        case 0:
                                            return [
                                                4,
                                                _superprop_get_startGameAsync().call(_this1)
                                            ];
                                        case 1:
                                            if (_state.sent(), this.sdk.game.gameReady(), !(canvasRecorder = codex.canvasRecorder) || (canvasRecorder.configure({
                                                type: "webp",
                                                quality: 0.8,
                                                recordFps: 30,
                                                syncFps: !0
                                            }), !(gameCanvas = document.getElementById("GameCanvas")))) return [
                                                2
                                            ];
                                            return canvasRecorder.setCanvas(gameCanvas), canvasRecorder.snapshotFrameAsync().then(function(image2) {
                                                if (image2) {
                                                    var imageUrl = URL.createObjectURL(image2);
                                                    Ludex.Utils.Image.logImage(imageUrl);
                                                }
                                            }), [
                                                2
                                            ];
                                    }
                                });
                            }).call(this);
                        }
                    },
                    {
                        key: "setupLifecycleListeners$",
                        value: function setupLifecycleListeners$() {
                            var Events11 = Ludex.Events, event = codex.event;
                            this.extra.onPause(function() {
                                event.emit(Events11.VISIBILITY_HIDDEN);
                            }), this.extra.onResume(function() {
                                event.emit(Events11.VISIBILITY_VISIBLE);
                            });
                        }
                    },
                    {
                        key: "getInterstitialAdAsync",
                        value: function getInterstitialAdAsync() {
                            return _async_to_generator(function() {
                                return _ts_generator(this, function(_state) {
                                    return [
                                        2,
                                        this.interstitialAdInstance$
                                    ];
                                });
                            }).call(this);
                        }
                    },
                    {
                        key: "getRewardedVideoAsync",
                        value: function getRewardedVideoAsync() {
                            return _async_to_generator(function() {
                                return _ts_generator(this, function(_state) {
                                    return this.extra.exceptionUnsupported(), [
                                        2
                                    ];
                                });
                            }).call(this);
                        }
                    },
                    {
                        key: "getRewardedInterstitialAsync",
                        value: function getRewardedInterstitialAsync() {
                            return _async_to_generator(function() {
                                return _ts_generator(this, function(_state) {
                                    return this.extra.exceptionUnsupported(), [
                                        2
                                    ];
                                });
                            }).call(this);
                        }
                    },
                    {
                        key: "loadBannerAdAsync",
                        value: function loadBannerAdAsync() {
                            return _async_to_generator(function() {
                                return _ts_generator(this, function(_state) {
                                    return this.extra.exceptionUnsupported(), [
                                        2
                                    ];
                                });
                            }).call(this);
                        }
                    },
                    {
                        key: "hideBannerAdAsync",
                        value: function hideBannerAdAsync() {
                            return _async_to_generator(function() {
                                return _ts_generator(this, function(_state) {
                                    return [
                                        2,
                                        Promise.resolve()
                                    ];
                                });
                            })();
                        }
                    },
                    {
                        key: "getBannerHeight",
                        value: function getBannerHeight() {
                            return 0;
                        }
                    },
                    {
                        key: "getTournamentAsync",
                        value: function getTournamentAsync() {
                            return _async_to_generator(function() {
                                return _ts_generator(this, function(_state) {
                                    return this.extra.exceptionUnsupported(), [
                                        2
                                    ];
                                });
                            }).call(this);
                        }
                    },
                    {
                        key: "canCreateShortcutAsync",
                        value: function canCreateShortcutAsync() {
                            return _async_to_generator(function() {
                                return _ts_generator(this, function(_state) {
                                    return [
                                        2,
                                        !1
                                    ];
                                });
                            })();
                        }
                    },
                    {
                        key: "createShortcutAsync",
                        value: function createShortcutAsync() {
                            return _async_to_generator(function() {
                                return _ts_generator(this, function(_state) {
                                    return this.extra.exceptionUnsupported(), [
                                        2
                                    ];
                                });
                            }).call(this);
                        }
                    },
                    {
                        key: "getSupportedAPIs",
                        value: function getSupportedAPIs() {
                            return [
                                "game.firstFrameReady",
                                "game.gameReady",
                                "game.loadData",
                                "game.saveData",
                                "engagement.sendScore",
                                "ads.requestInterstitialAd"
                            ];
                        }
                    }
                ]), _YTAdapter1;
            }(GameSDK_default2), "YTAdapter"), YTAdapter_default = _YTAdapter;
        }
    }), init_accessBlocker = __esm({
        "extensions/ludex/src/utils/function/accessBlocker.ts": function() {
            init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), __name(simpleHash, "simpleHash"), __name(_AccessBlocker = function() {
                function _AccessBlocker1() {
                    _class_call_check(this, _AccessBlocker1), _define_property(this, "usedCallLocationHashes$", void 0), this.usedCallLocationHashes$ = new Set();
                }
                return _create_class(_AccessBlocker1, [
                    {
                        key: "getCallerLine$",
                        value: function getCallerLine$() {
                            var stack = Error().stack;
                            if (!stack) return null;
                            for(var lineStart = 0, i = 0; i < 4; i++){
                                var nextNl = stack.indexOf("\n", lineStart);
                                if (-1 === nextNl) return null;
                                lineStart = nextNl + 1;
                            }
                            var lineEnd = stack.indexOf("\n", lineStart), callerLine = -1 === lineEnd ? stack.substring(lineStart) : stack.substring(lineStart, lineEnd);
                            return callerLine ? callerLine.trim() : null;
                        }
                    },
                    {
                        key: "blockAccess",
                        value: function blockAccess() {
                            try {
                                var callerLine = this.getCallerLine$();
                                if (!callerLine) return !1;
                                var locationHash = simpleHash(callerLine);
                                if (this.usedCallLocationHashes$.has(locationHash)) return !1;
                                if ([
                                    "eval",
                                    "at <",
                                    "(<"
                                ].some(function(keyword) {
                                    return callerLine.includes(keyword);
                                })) throw Error("Access blocked for the caller: ".concat(callerLine));
                                return this.usedCallLocationHashes$.add(locationHash), !1;
                            } catch (error) {
                                return console.warn("Block access encountered an error:", error), !0;
                            }
                        }
                    }
                ]), _AccessBlocker1;
            }(), "AccessBlocker"), accessBlocker = new _AccessBlocker(), accessBlocker_default = __name(function(source, key) {}, "wrapGetterToBlockObjectAccess");
        }
    }), init_GameSDK2 = __esm({
        "extensions/ludex/src/GameSDK.ts": function() {
            init_empty_script(), init_empty_script(), init_empty_script(), init_empty_script(), init_empty_script(), init_empty_script(), init_empty_script(), init_empty_script(), init_empty_script(), init_empty_script(), init_YTAdapter(), init_GameSDK(), init_accessBlocker(), console.groupCollapsed("\u26A1\uFE0F Ludex initialized"), __name(autoDetectAndInitializeSDKAdapter, "autoDetectAndInitializeSDKAdapter"), console.groupCollapsed("\uD83D\uDD79 GameSDK"), window.GameSDK = Object.seal(autoDetectAndInitializeSDKAdapter()), accessBlocker_default(window, "GameSDK");
        }
    }), require_eventemitter3 = __commonJS({
        "node_modules/eventemitter3/index.js": function(exports, module) {
            init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
            var has = Object.prototype.hasOwnProperty, prefix = "~";
            function Events11() {}
            function EE(fn2, context, once) {
                this.fn = fn2, this.context = context, this.once = once || !1;
            }
            function addListener(emitter, event, fn2, context, once) {
                if ("function" != typeof fn2) throw TypeError("The listener must be a function");
                var listener = new EE(fn2, context || emitter, once), evt = prefix ? prefix + event : event;
                return emitter._events[evt] ? emitter._events[evt].fn ? emitter._events[evt] = [
                    emitter._events[evt],
                    listener
                ] : emitter._events[evt].push(listener) : (emitter._events[evt] = listener, emitter._eventsCount++), emitter;
            }
            function clearEvent(emitter, evt) {
                0 == --emitter._eventsCount ? emitter._events = new Events11() : delete emitter._events[evt];
            }
            function EventEmitter2() {
                this._events = new Events11(), this._eventsCount = 0;
            }
            __name(Events11, "Events"), Object.create && (Events11.prototype = Object.create(null), new Events11().__proto__ || (prefix = !1)), __name(EE, "EE"), __name(addListener, "addListener"), __name(clearEvent, "clearEvent"), __name(EventEmitter2, "EventEmitter"), EventEmitter2.prototype.eventNames = __name(function eventNames() {
                var events, name2, names2 = [];
                if (0 === this._eventsCount) return names2;
                for(name2 in events = this._events)has.call(events, name2) && names2.push(prefix ? name2.slice(1) : name2);
                return Object.getOwnPropertySymbols ? names2.concat(Object.getOwnPropertySymbols(events)) : names2;
            }, "eventNames"), EventEmitter2.prototype.listeners = __name(function listeners2(event) {
                var evt = prefix ? prefix + event : event, handlers = this._events[evt];
                if (!handlers) return [];
                if (handlers.fn) return [
                    handlers.fn
                ];
                for(var i = 0, l = handlers.length, ee = Array(l); i < l; i++)ee[i] = handlers[i].fn;
                return ee;
            }, "listeners"), EventEmitter2.prototype.listenerCount = __name(function listenerCount(event) {
                var evt = prefix ? prefix + event : event, listeners2 = this._events[evt];
                return listeners2 ? listeners2.fn ? 1 : listeners2.length : 0;
            }, "listenerCount"), EventEmitter2.prototype.emit = __name(function emit(event, a1, a2, a3, a4, a5) {
                var evt = prefix ? prefix + event : event;
                if (!this._events[evt]) return !1;
                var args, i, listeners2 = this._events[evt], len = arguments.length;
                if (listeners2.fn) {
                    switch(listeners2.once && this.removeListener(event, listeners2.fn, void 0, !0), len){
                        case 1:
                            return listeners2.fn.call(listeners2.context), !0;
                        case 2:
                            return listeners2.fn.call(listeners2.context, a1), !0;
                        case 3:
                            return listeners2.fn.call(listeners2.context, a1, a2), !0;
                        case 4:
                            return listeners2.fn.call(listeners2.context, a1, a2, a3), !0;
                        case 5:
                            return listeners2.fn.call(listeners2.context, a1, a2, a3, a4), !0;
                        case 6:
                            return listeners2.fn.call(listeners2.context, a1, a2, a3, a4, a5), !0;
                    }
                    for(i = 1, args = Array(len - 1); i < len; i++)args[i - 1] = arguments[i];
                    listeners2.fn.apply(listeners2.context, args);
                } else {
                    var j, length = listeners2.length;
                    for(i = 0; i < length; i++)switch(listeners2[i].once && this.removeListener(event, listeners2[i].fn, void 0, !0), len){
                        case 1:
                            listeners2[i].fn.call(listeners2[i].context);
                            break;
                        case 2:
                            listeners2[i].fn.call(listeners2[i].context, a1);
                            break;
                        case 3:
                            listeners2[i].fn.call(listeners2[i].context, a1, a2);
                            break;
                        case 4:
                            listeners2[i].fn.call(listeners2[i].context, a1, a2, a3);
                            break;
                        default:
                            if (!args) for(j = 1, args = Array(len - 1); j < len; j++)args[j - 1] = arguments[j];
                            listeners2[i].fn.apply(listeners2[i].context, args);
                    }
                }
                return !0;
            }, "emit"), EventEmitter2.prototype.on = __name(function on(event, fn2, context) {
                return addListener(this, event, fn2, context, !1);
            }, "on"), EventEmitter2.prototype.once = __name(function once(event, fn2, context) {
                return addListener(this, event, fn2, context, !0);
            }, "once"), EventEmitter2.prototype.removeListener = __name(function removeListener(event, fn2, context, once) {
                var evt = prefix ? prefix + event : event;
                if (!this._events[evt]) return this;
                if (!fn2) return clearEvent(this, evt), this;
                var listeners2 = this._events[evt];
                if (listeners2.fn) listeners2.fn !== fn2 || once && !listeners2.once || context && listeners2.context !== context || clearEvent(this, evt);
                else {
                    for(var i = 0, events = [], length = listeners2.length; i < length; i++)(listeners2[i].fn !== fn2 || once && !listeners2[i].once || context && listeners2[i].context !== context) && events.push(listeners2[i]);
                    events.length ? this._events[evt] = 1 === events.length ? events[0] : events : clearEvent(this, evt);
                }
                return this;
            }, "removeListener"), EventEmitter2.prototype.removeAllListeners = __name(function removeAllListeners(event) {
                var evt;
                return event ? (evt = prefix ? prefix + event : event, this._events[evt] && clearEvent(this, evt)) : (this._events = new Events11(), this._eventsCount = 0), this;
            }, "removeAllListeners"), EventEmitter2.prototype.off = EventEmitter2.prototype.removeListener, EventEmitter2.prototype.addListener = EventEmitter2.prototype.on, EventEmitter2.prefixed = prefix, EventEmitter2.EventEmitter = EventEmitter2, void 0 !== module && (module.exports = EventEmitter2);
        }
    }), require_jszip_min = __commonJS({
        "node_modules/jszip/dist/jszip.min.js": function(exports, module) {
            init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), function(e) {
                "object" == (void 0 === exports ? "undefined" : _type_of(exports)) && void 0 !== module ? module.exports = e() : "function" == typeof define && define.amd ? define([], e) : ("u" > ("u" < typeof window ? "undefined" : _type_of1(window)) ? window : "u" > ("u" < typeof global ? "undefined" : _type_of1(global)) ? global : "u" > ("u" < typeof self ? "undefined" : _type_of1(self)) ? self : this).JSZip = e();
            }(function() {
                return __name(function s(a, o2, h) {
                    function u(r, e2) {
                        if (!o2[r]) {
                            if (!a[r]) {
                                var t = "function" == typeof __require && __require;
                                if (!e2 && t) return t(r, !0);
                                if (l) return l(r, !0);
                                var n = Error("Cannot find module '" + r + "'");
                                throw n.code = "MODULE_NOT_FOUND", n;
                            }
                            var i = o2[r] = {
                                exports: {}
                            };
                            a[r][0].call(i.exports, function(e3) {
                                return u(a[r][1][e3] || e3);
                            }, i, i.exports, s, a, o2, h);
                        }
                        return o2[r].exports;
                    }
                    __name(u, "u");
                    for(var l = "function" == typeof __require && __require, e = 0; e < h.length; e++)u(h[e]);
                    return u;
                }, "s")({
                    1: [
                        function(e, t, r) {
                            var d = e("./utils"), c = e("./support"), p = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopq\
rstuvwxyz0123456789+/=";
                            r.encode = function(e2) {
                                for(var t2, r2, n, i, s, a, o2, h = [], u = 0, l = e2.length, f = l, c2 = "string" !== d.getTypeOf(e2); u < e2.length;)f = l - u, n = c2 ? (t2 = e2[u++], r2 = u < l ? e2[u++] : 0, u < l ? e2[u++] : 0) : (t2 = e2.charCodeAt(u++), r2 = u < l ? e2.charCodeAt(u++) : 0, u < l ? e2.charCodeAt(u++) : 0), i = t2 >> 2, s = (3 & t2) << 4 | r2 >> 4, a = 1 < f ? (15 & r2) << 2 | n >> 6 : 64, o2 = 2 < f ? 63 & n : 64, h.push(p.charAt(i) + p.charAt(s) + p.charAt(a) + p.charAt(o2));
                                return h.join("");
                            }, r.decode = function(e2) {
                                var t2, r2, n, i, s, a, o2 = 0, h = 0, u = "data:";
                                if (e2.substr(0, u.length) === u) throw Error("Invalid base64 input, it looks like a\
 data url.");
                                var l, f = 3 * (e2 = e2.replace(/[^A-Za-z0-9+/=]/g, "")).length / 4;
                                if (e2.charAt(e2.length - 1) === p.charAt(64) && f--, e2.charAt(e2.length - 2) === p.charAt(64) && f--, f % 1 != 0) throw Error("Invalid base64 input, bad content length.");
                                for(l = c.uint8array ? new Uint8Array(0 | f) : Array(0 | f); o2 < e2.length;)t2 = p.indexOf(e2.charAt(o2++)) << 2 | (i = p.indexOf(e2.charAt(o2++))) >> 4, r2 = (15 & i) << 4 | (s = p.indexOf(e2.charAt(o2++))) >> 2, n = (3 & s) << 6 | (a = p.indexOf(e2.charAt(o2++))), l[h++] = t2, 64 !== s && (l[h++] = r2), 64 !== a && (l[h++] = n);
                                return l;
                            };
                        },
                        {
                            "./support": 30,
                            "./utils": 32
                        }
                    ],
                    2: [
                        function(e, t, r) {
                            var n = e("./external"), i = e("./stream/DataWorker"), s = e("./stream/Crc32Probe"), a = e("./stream/DataLengthProbe");
                            function o2(e2, t2, r2, n2, i2) {
                                this.compressedSize = e2, this.uncompressedSize = t2, this.crc32 = r2, this.compression = n2, this.compressedContent = i2;
                            }
                            __name(o2, "o"), o2.prototype = {
                                getContentWorker: __name(function() {
                                    var e2 = new i(n.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new a("data_length")), t2 = this;
                                    return e2.on("end", function() {
                                        if (this.streamInfo.data_length !== t2.uncompressedSize) throw Error("Bug : uncomp\
ressed data size mismatch");
                                    }), e2;
                                }, "getContentWorker"),
                                getCompressedWorker: __name(function() {
                                    return new i(n.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize", this.compressedSize).withStreamInfo("uncompressedSize", this.uncompressedSize).withStreamInfo("crc32", this.crc32).withStreamInfo("compression", this.compression);
                                }, "getCompressedWorker")
                            }, o2.createWorkerFrom = function(e2, t2, r2) {
                                return e2.pipe(new s()).pipe(new a("uncompressedSize")).pipe(t2.compressWorker(r2)).pipe(new a("compressedSize")).withStreamInfo("compression", t2);
                            }, t.exports = o2;
                        },
                        {
                            "./external": 6,
                            "./stream/Crc32Probe": 25,
                            "./stream/DataLengthProbe": 26,
                            "./stream/D\
ataWorker": 27
                        }
                    ],
                    3: [
                        function(e, t, r) {
                            var n = e("./stream/GenericWorker");
                            r.STORE = {
                                magic: "\0\0",
                                compressWorker: __name(function() {
                                    return new n("STORE compression");
                                }, "compressWorker"),
                                uncompressWorker: __name(function() {
                                    return new n("STORE decompression");
                                }, "uncompressWorker")
                            }, r.DEFLATE = e("./flate");
                        },
                        {
                            "./flate": 7,
                            "./stream/GenericWorker": 28
                        }
                    ],
                    4: [
                        function(e, t, r) {
                            var n = e("./utils"), o2 = function() {
                                for(var e2, t2 = [], r2 = 0; r2 < 256; r2++){
                                    e2 = r2;
                                    for(var n2 = 0; n2 < 8; n2++)e2 = 1 & e2 ? 3988292384 ^ e2 >>> 1 : e2 >>> 1;
                                    t2[r2] = e2;
                                }
                                return t2;
                            }();
                            t.exports = function(e2, t2) {
                                return void 0 !== e2 && e2.length ? "string" !== n.getTypeOf(e2) ? function(e3, t3, r2, n2) {
                                    var i = o2, s = 0 + r2;
                                    e3 ^= -1;
                                    for(var a = 0; a < s; a++)e3 = e3 >>> 8 ^ i[255 & (e3 ^ t3[a])];
                                    return -1 ^ e3;
                                }(0 | t2, e2, e2.length, 0) : function(e3, t3, r2, n2) {
                                    var i = o2, s = 0 + r2;
                                    e3 ^= -1;
                                    for(var a = 0; a < s; a++)e3 = e3 >>> 8 ^ i[255 & (e3 ^ t3.charCodeAt(a))];
                                    return -1 ^ e3;
                                }(0 | t2, e2, e2.length, 0) : 0;
                            };
                        },
                        {
                            "./utils": 32
                        }
                    ],
                    5: [
                        function(e, t, r) {
                            r.base64 = !1, r.binary = !1, r.dir = !1, r.createFolders = !0, r.date = null, r.compression = null, r.compressionOptions = null, r.comment = null, r.unixPermissions = null, r.dosPermissions = null;
                        },
                        {}
                    ],
                    6: [
                        function(e, t, r) {
                            var n = null;
                            t.exports = {
                                Promise: n = "u" > ("u" < typeof Promise ? "undefined" : _type_of1(Promise)) ? Promise : e("lie")
                            };
                        },
                        {
                            lie: 37
                        }
                    ],
                    7: [
                        function(e, t, r) {
                            var n = "u" > ("u" < typeof Uint8Array ? "undefined" : _type_of1(Uint8Array)) && "u" > ("u" < typeof Uint16Array ? "undefined" : _type_of1(Uint16Array)) && "u" > ("u" < typeof Uint32Array ? "undefined" : _type_of1(Uint32Array)), i = e("pako"), s = e("./utils"), a = e("./stream/GenericWorker"), o2 = n ? "uint8array" : "array";
                            function h(e2, t2) {
                                a.call(this, "FlateWorker/" + e2), this._pako = null, this._pakoAction = e2, this._pakoOptions = t2, this.meta = {};
                            }
                            __name(h, "h"), r.magic = "\b\0", s.inherits(h, a), h.prototype.processChunk = function(e2) {
                                this.meta = e2.meta, null === this._pako && this._createPako(), this._pako.push(s.transformTo(o2, e2.data), !1);
                            }, h.prototype.flush = function() {
                                a.prototype.flush.call(this), null === this._pako && this._createPako(), this._pako.push([], !0);
                            }, h.prototype.cleanUp = function() {
                                a.prototype.cleanUp.call(this), this._pako = null;
                            }, h.prototype._createPako = function() {
                                this._pako = new i[this._pakoAction]({
                                    raw: !0,
                                    level: this._pakoOptions.level || -1
                                });
                                var t2 = this;
                                this._pako.onData = function(e2) {
                                    t2.push({
                                        data: e2,
                                        meta: t2.meta
                                    });
                                };
                            }, r.compressWorker = function(e2) {
                                return new h("Deflate", e2);
                            }, r.uncompressWorker = function() {
                                return new h("Inflate", {});
                            };
                        },
                        {
                            "./stream/GenericWorker": 28,
                            "./utils": 32,
                            pako: 38
                        }
                    ],
                    8: [
                        function(e, t, r) {
                            function A10(e2, t2) {
                                var r2, n2 = "";
                                for(r2 = 0; r2 < t2; r2++)n2 += String.fromCharCode(255 & e2), e2 >>>= 8;
                                return n2;
                            }
                            function n(e2, t2, r2, n2, i2, s2) {
                                var a, o2, h = e2.file, u = e2.compression, l = s2 !== O33.utf8encode, f = I4.transformTo("string", s2(h.name)), c = I4.transformTo("string", O33.utf8encode(h.name)), d = h.comment, p = I4.transformTo("string", s2(d)), m = I4.transformTo("string", O33.utf8encode(d)), _ = c.length !== h.name.length, g = m.length !== d.length, b = "", v = "", y = "", w = h.dir, k = h.date, x = {
                                    crc32: 0,
                                    compressedSize: 0,
                                    uncompressedSize: 0
                                };
                                t2 && !r2 || (x.crc32 = e2.crc32, x.compressedSize = e2.compressedSize, x.uncompressedSize = e2.uncompressedSize);
                                var S9 = 0;
                                t2 && (S9 |= 8), !l && (_ || g) && (S9 |= 2048);
                                var z = 0, C = 0;
                                w && (z |= 16), "UNIX" === i2 ? (C = 798, z |= function(e3, t3) {
                                    var r3 = e3;
                                    return e3 || (r3 = t3 ? 16893 : 33204), (65535 & r3) << 16;
                                }(h.unixPermissions, w)) : (C = 20, z |= function(e3) {
                                    return 63 & (e3 || 0);
                                }(h.dosPermissions)), a = (k.getUTCHours() << 6 | k.getUTCMinutes()) << 5 | k.getUTCSeconds() / 2, o2 = (k.getUTCFullYear() - 1980 << 4 | k.getUTCMonth() + 1) << 5 | k.getUTCDate(), _ && (v = A10(1, 1) + A10(B6(f), 4) + c, b += "up" + A10(v.length, 2) + v), g && (y = A10(1, 1) + A10(B6(p), 4) + m, b += "uc" + A10(y.length, 2) + y);
                                var E = "";
                                return E += "\n\0", E += A10(S9, 2), E += u.magic, E += A10(a, 2), E += A10(o2, 2), E += A10(x.crc32, 4), E += A10(x.compressedSize, 4), E += A10(x.uncompressedSize, 4), E += A10(f.length, 2), E += A10(b.length, 2), {
                                    fileRecord: R.LOCAL_FILE_HEADER + E + f + b,
                                    dirRecord: R.CENTRAL_FILE_HEADER + A10(C, 2) + E + A10(p.length, 2) + "\0\0\0\0" + A10(z, 4) + A10(n2, 4) + f + b + p
                                };
                            }
                            __name(A10, "A"), __name(n, "n");
                            var I4 = e("../utils"), i = e("../stream/GenericWorker"), O33 = e("../utf8"), B6 = e("../c\
rc32"), R = e("../signature");
                            function s(e2, t2, r2, n2) {
                                i.call(this, "ZipFileWorker"), this.bytesWritten = 0, this.zipComment = t2, this.zipPlatform = r2, this.encodeFileName = n2, this.streamFiles = e2, this.accumulate = !1, this.contentBuffer = [], this.dirRecords = [], this.currentSourceOffset = 0, this.entriesCount = 0, this.currentFile = null, this._sources = [];
                            }
                            __name(s, "s"), I4.inherits(s, i), s.prototype.push = function(e2) {
                                var t2 = e2.meta.percent || 0, r2 = this.entriesCount, n2 = this._sources.length;
                                this.accumulate ? this.contentBuffer.push(e2) : (this.bytesWritten += e2.data.length, i.prototype.push.call(this, {
                                    data: e2.data,
                                    meta: {
                                        currentFile: this.currentFile,
                                        percent: r2 ? (t2 + 100 * (r2 - n2 - 1)) / r2 : 100
                                    }
                                }));
                            }, s.prototype.openedSource = function(e2) {
                                this.currentSourceOffset = this.bytesWritten, this.currentFile = e2.file.name;
                                var t2 = this.streamFiles && !e2.file.dir;
                                if (t2) {
                                    var r2 = n(e2, t2, !1, this.currentSourceOffset, this.zipPlatform, this.encodeFileName);
                                    this.push({
                                        data: r2.fileRecord,
                                        meta: {
                                            percent: 0
                                        }
                                    });
                                } else this.accumulate = !0;
                            }, s.prototype.closedSource = function(e2) {
                                this.accumulate = !1;
                                var t2 = this.streamFiles && !e2.file.dir, r2 = n(e2, t2, !0, this.currentSourceOffset, this.zipPlatform, this.encodeFileName);
                                if (this.dirRecords.push(r2.dirRecord), t2) this.push({
                                    data: function(e3) {
                                        return R.DATA_DESCRIPTOR + A10(e3.crc32, 4) + A10(e3.compressedSize, 4) + A10(e3.uncompressedSize, 4);
                                    }(e2),
                                    meta: {
                                        percent: 100
                                    }
                                });
                                else for(this.push({
                                    data: r2.fileRecord,
                                    meta: {
                                        percent: 0
                                    }
                                }); this.contentBuffer.length;)this.push(this.contentBuffer.shift());
                                this.currentFile = null;
                            }, s.prototype.flush = function() {
                                for(var e2 = this.bytesWritten, t2 = 0; t2 < this.dirRecords.length; t2++)this.push({
                                    data: this.dirRecords[t2],
                                    meta: {
                                        percent: 100
                                    }
                                });
                                var r2 = this.bytesWritten - e2, n2 = function(e3, t3, r3, n3, i2) {
                                    var s2 = I4.transformTo("string", i2(n3));
                                    return R.CENTRAL_DIRECTORY_END + "\0\0\0\0" + A10(e3, 2) + A10(e3, 2) + A10(t3, 4) + A10(r3, 4) + A10(s2.length, 2) + s2;
                                }(this.dirRecords.length, r2, e2, this.zipComment, this.encodeFileName);
                                this.push({
                                    data: n2,
                                    meta: {
                                        percent: 100
                                    }
                                });
                            }, s.prototype.prepareNextSource = function() {
                                this.previous = this._sources.shift(), this.openedSource(this.previous.streamInfo), this.isPaused ? this.previous.pause() : this.previous.resume();
                            }, s.prototype.registerPrevious = function(e2) {
                                this._sources.push(e2);
                                var t2 = this;
                                return e2.on("data", function(e3) {
                                    t2.processChunk(e3);
                                }), e2.on("end", function() {
                                    t2.closedSource(t2.previous.streamInfo), t2._sources.length ? t2.prepareNextSource() : t2.end();
                                }), e2.on("error", function(e3) {
                                    t2.error(e3);
                                }), this;
                            }, s.prototype.resume = function() {
                                return !!i.prototype.resume.call(this) && (!this.previous && this._sources.length ? (this.prepareNextSource(), !0) : this.previous || this._sources.length || this.generatedError ? void 0 : (this.end(), !0));
                            }, s.prototype.error = function(e2) {
                                var t2 = this._sources;
                                if (!i.prototype.error.call(this, e2)) return !1;
                                for(var r2 = 0; r2 < t2.length; r2++)try {
                                    t2[r2].error(e2);
                                } catch (e3) {}
                                return !0;
                            }, s.prototype.lock = function() {
                                i.prototype.lock.call(this);
                                for(var e2 = this._sources, t2 = 0; t2 < e2.length; t2++)e2[t2].lock();
                            }, t.exports = s;
                        },
                        {
                            "../crc32": 4,
                            "../signature": 23,
                            "../stream/GenericWorker": 28,
                            "../utf8": 31,
                            "../ut\
ils": 32
                        }
                    ],
                    9: [
                        function(e, t, r) {
                            var u = e("../compressions"), n = e("./ZipFileWorker");
                            r.generateWorker = function(e2, a, t2) {
                                var o2 = new n(a.streamFiles, t2, a.platform, a.encodeFileName), h = 0;
                                try {
                                    e2.forEach(function(e3, t3) {
                                        h++;
                                        var r2 = function(e4, t4) {
                                            var r3 = e4 || t4, n3 = u[r3];
                                            if (!n3) throw Error(r3 + " is not a valid compression method !");
                                            return n3;
                                        }(t3.options.compression, a.compression), n2 = t3.options.compressionOptions || a.compressionOptions || {}, i = t3.dir, s = t3.date;
                                        t3._compressWorker(r2, n2).withStreamInfo("file", {
                                            name: e3,
                                            dir: i,
                                            date: s,
                                            comment: t3.comment || "",
                                            unixPermissions: t3.unixPermissions,
                                            dosPermissions: t3.dosPermissions
                                        }).pipe(o2);
                                    }), o2.entriesCount = h;
                                } catch (e3) {
                                    o2.error(e3);
                                }
                                return o2;
                            };
                        },
                        {
                            "../compressions": 3,
                            "./ZipFileWorker": 8
                        }
                    ],
                    10: [
                        function(e, t, r) {
                            function n() {
                                if (!_instanceof(this, n)) return new n();
                                if (arguments.length) throw Error("The constructor with parameters has been removed \
in JSZip 3.0, please check the upgrade guide.");
                                this.files = Object.create(null), this.comment = null, this.root = "", this.clone = function() {
                                    var e2 = new n();
                                    for(var t2 in this)"function" != typeof this[t2] && (e2[t2] = this[t2]);
                                    return e2;
                                };
                            }
                            __name(n, "n"), (n.prototype = e("./object")).loadAsync = e("./load"), n.support = e("./support"), n.defaults = e("./defaults"), n.version = "3.10.1", n.loadAsync = function(e2, t2) {
                                return new n().loadAsync(e2, t2);
                            }, n.external = e("./external"), t.exports = n;
                        },
                        {
                            "./defaults": 5,
                            "./external": 6,
                            "./load": 11,
                            "./object": 15,
                            "./support": 30
                        }
                    ],
                    11: [
                        function(e, t, r) {
                            var u = e("./utils"), i = e("./external"), n = e("./utf8"), s = e("./zipEntries"), a = e("\
./stream/Crc32Probe"), l = e("./nodejsUtils");
                            function f(n2) {
                                return new i.Promise(function(e2, t2) {
                                    var r2 = n2.decompressed.getContentWorker().pipe(new a());
                                    r2.on("error", function(e3) {
                                        t2(e3);
                                    }).on("end", function() {
                                        r2.streamInfo.crc32 !== n2.decompressed.crc32 ? t2(Error("Corrupted zip : CRC32 \
mismatch")) : e2();
                                    }).resume();
                                });
                            }
                            __name(f, "f"), t.exports = function(e2, o2) {
                                var h = this;
                                return o2 = u.extend(o2 || {}, {
                                    base64: !1,
                                    checkCRC32: !1,
                                    optimizedBinaryString: !1,
                                    createFolders: !1,
                                    decodeFileName: n.utf8decode
                                }), l.isNode && l.isStream(e2) ? i.Promise.reject(Error("JSZip can't accept a stream when loading a zip file.")) : u.prepareContent("the loaded zip file", e2, !0, o2.optimizedBinaryString, o2.base64).then(function(e3) {
                                    var t2 = new s(o2);
                                    return t2.load(e3), t2;
                                }).then(function(e3) {
                                    var t2 = [
                                        i.Promise.resolve(e3)
                                    ], r2 = e3.files;
                                    if (o2.checkCRC32) for(var n2 = 0; n2 < r2.length; n2++)t2.push(f(r2[n2]));
                                    return i.Promise.all(t2);
                                }).then(function(e3) {
                                    for(var t2 = e3.shift(), r2 = t2.files, n2 = 0; n2 < r2.length; n2++){
                                        var i2 = r2[n2], s2 = i2.fileNameStr, a2 = u.resolve(i2.fileNameStr);
                                        h.file(a2, i2.decompressed, {
                                            binary: !0,
                                            optimizedBinaryString: !0,
                                            date: i2.date,
                                            dir: i2.dir,
                                            comment: i2.fileCommentStr.length ? i2.fileCommentStr : null,
                                            unixPermissions: i2.unixPermissions,
                                            dosPermissions: i2.dosPermissions,
                                            createFolders: o2.createFolders
                                        }), i2.dir || (h.file(a2).unsafeOriginalName = s2);
                                    }
                                    return t2.zipComment.length && (h.comment = t2.zipComment), h;
                                });
                            };
                        },
                        {
                            "./external": 6,
                            "./nodejsUtils": 14,
                            "./stream/Crc32Probe": 25,
                            "./utf8": 31,
                            "./utils": 32,
                            "./zipEntries": 33
                        }
                    ],
                    12: [
                        function(e, t, r) {
                            var n = e("../utils"), i = e("../stream/GenericWorker");
                            function s(e2, t2) {
                                i.call(this, "Nodejs stream input adapter for " + e2), this._upstreamEnded = !1, this._bindStream(t2);
                            }
                            __name(s, "s"), n.inherits(s, i), s.prototype._bindStream = function(e2) {
                                var t2 = this;
                                (this._stream = e2).pause(), e2.on("data", function(e3) {
                                    t2.push({
                                        data: e3,
                                        meta: {
                                            percent: 0
                                        }
                                    });
                                }).on("error", function(e3) {
                                    t2.isPaused ? this.generatedError = e3 : t2.error(e3);
                                }).on("end", function() {
                                    t2.isPaused ? t2._upstreamEnded = !0 : t2.end();
                                });
                            }, s.prototype.pause = function() {
                                return !!i.prototype.pause.call(this) && (this._stream.pause(), !0);
                            }, s.prototype.resume = function() {
                                return !!i.prototype.resume.call(this) && (this._upstreamEnded ? this.end() : this._stream.resume(), !0);
                            }, t.exports = s;
                        },
                        {
                            "../stream/GenericWorker": 28,
                            "../utils": 32
                        }
                    ],
                    13: [
                        function(e, t, r) {
                            var i = e("readable-stream").Readable;
                            function n(e2, t2, r2) {
                                i.call(this, t2), this._helper = e2;
                                var n2 = this;
                                e2.on("data", function(e3, t3) {
                                    n2.push(e3) || n2._helper.pause(), r2 && r2(t3);
                                }).on("error", function(e3) {
                                    n2.emit("error", e3);
                                }).on("end", function() {
                                    n2.push(null);
                                });
                            }
                            __name(n, "n"), e("../utils").inherits(n, i), n.prototype._read = function() {
                                this._helper.resume();
                            }, t.exports = n;
                        },
                        {
                            "../utils": 32,
                            "readable-stream": 16
                        }
                    ],
                    14: [
                        function(e, t, r) {
                            t.exports = {
                                isNode: "u" > ("u" < typeof Buffer ? "undefined" : _type_of1(Buffer)),
                                newBufferFrom: __name(function(e2, t2) {
                                    if (Buffer.from && Buffer.from !== Uint8Array.from) return Buffer.from(e2, t2);
                                    if ("number" == typeof e2) throw Error('The "data" argument must not be a number');
                                    return new Buffer(e2, t2);
                                }, "newBufferFrom"),
                                allocBuffer: __name(function(e2) {
                                    if (Buffer.alloc) return Buffer.alloc(e2);
                                    var t2 = new Buffer(e2);
                                    return t2.fill(0), t2;
                                }, "allocBuffer"),
                                isBuffer: __name(function(e2) {
                                    return Buffer.isBuffer(e2);
                                }, "isBuffer"),
                                isStream: __name(function(e2) {
                                    return e2 && "function" == typeof e2.on && "function" == typeof e2.pause && "function" == typeof e2.resume;
                                }, "isStream")
                            };
                        },
                        {}
                    ],
                    15: [
                        function(e, t, r) {
                            function s(e2, t2, r2) {
                                var n2, i2 = u.getTypeOf(t2), s2 = u.extend(r2 || {}, f);
                                s2.date = s2.date || new Date(), null !== s2.compression && (s2.compression = s2.compression.toUpperCase()), "string" == typeof s2.unixPermissions && (s2.unixPermissions = parseInt(s2.unixPermissions, 8)), s2.unixPermissions && 16384 & s2.unixPermissions && (s2.dir = !0), s2.dosPermissions && 16 & s2.dosPermissions && (s2.dir = !0), s2.dir && (e2 = g(e2)), s2.createFolders && (n2 = _(e2)) && b.call(this, n2, !0);
                                var a2 = "string" === i2 && !1 === s2.binary && !1 === s2.base64;
                                r2 && void 0 !== r2.binary || (s2.binary = !a2), (_instanceof(t2, c) && 0 === t2.uncompressedSize || s2.dir || !t2 || 0 === t2.length) && (s2.base64 = !1, s2.binary = !0, t2 = "", s2.compression = "STORE", i2 = "string");
                                var o3 = null;
                                o3 = _instanceof(t2, c) || _instanceof(t2, l) ? t2 : p.isNode && p.isStream(t2) ? new m(e2, t2) : u.prepareContent(e2, t2, s2.binary, s2.optimizedBinaryString, s2.base64);
                                var h2 = new d(e2, o3, s2);
                                this.files[e2] = h2;
                            }
                            __name(s, "s");
                            var i = e("./utf8"), u = e("./utils"), l = e("./stream/GenericWorker"), a = e("./stream/St\
reamHelper"), f = e("./defaults"), c = e("./compressedObject"), d = e("./zipObject"), o2 = e("./gene\
rate"), p = e("./nodejsUtils"), m = e("./nodejs/NodejsStreamInputAdapter"), _ = __name(function(e2) {
                                "/" === e2.slice(-1) && (e2 = e2.substring(0, e2.length - 1));
                                var t2 = e2.lastIndexOf("/");
                                return 0 < t2 ? e2.substring(0, t2) : "";
                            }, "_"), g = __name(function(e2) {
                                return "/" !== e2.slice(-1) && (e2 += "/"), e2;
                            }, "g"), b = __name(function(e2, t2) {
                                return t2 = void 0 !== t2 ? t2 : f.createFolders, e2 = g(e2), this.files[e2] || s.call(this, e2, null, {
                                    dir: !0,
                                    createFolders: t2
                                }), this.files[e2];
                            }, "b");
                            function h(e2) {
                                return "[object RegExp]" === Object.prototype.toString.call(e2);
                            }
                            __name(h, "h"), t.exports = {
                                load: __name(function() {
                                    throw Error("This method has been removed in JSZip 3.0, please check the upgrade gui\
de.");
                                }, "load"),
                                forEach: __name(function(e2) {
                                    var t2, r2, n2;
                                    for(t2 in this.files)n2 = this.files[t2], (r2 = t2.slice(this.root.length, t2.length)) && t2.slice(0, this.root.length) === this.root && e2(r2, n2);
                                }, "forEach"),
                                filter: __name(function(r2) {
                                    var n2 = [];
                                    return this.forEach(function(e2, t2) {
                                        r2(e2, t2) && n2.push(t2);
                                    }), n2;
                                }, "filter"),
                                file: __name(function(e2, t2, r2) {
                                    if (1 != arguments.length) return e2 = this.root + e2, s.call(this, e2, t2, r2), this;
                                    if (h(e2)) {
                                        var n2 = e2;
                                        return this.filter(function(e3, t3) {
                                            return !t3.dir && n2.test(e3);
                                        });
                                    }
                                    var i2 = this.files[this.root + e2];
                                    return i2 && !i2.dir ? i2 : null;
                                }, "file"),
                                folder: __name(function(r2) {
                                    if (!r2) return this;
                                    if (h(r2)) return this.filter(function(e3, t3) {
                                        return t3.dir && r2.test(e3);
                                    });
                                    var e2 = this.root + r2, t2 = b.call(this, e2), n2 = this.clone();
                                    return n2.root = t2.name, n2;
                                }, "folder"),
                                remove: __name(function(r2) {
                                    r2 = this.root + r2;
                                    var e2 = this.files[r2];
                                    if (e2 || ("/" !== r2.slice(-1) && (r2 += "/"), e2 = this.files[r2]), e2 && !e2.dir) delete this.files[r2];
                                    else for(var t2 = this.filter(function(e3, t3) {
                                        return t3.name.slice(0, r2.length) === r2;
                                    }), n2 = 0; n2 < t2.length; n2++)delete this.files[t2[n2].name];
                                    return this;
                                }, "remove"),
                                generate: __name(function() {
                                    throw Error("This method has been removed in JSZip 3.0, please check the upgrade gui\
de.");
                                }, "generate"),
                                generateInternalStream: __name(function(e2) {
                                    var t2, r2 = {};
                                    try {
                                        if ((r2 = u.extend(e2 || {}, {
                                            streamFiles: !1,
                                            compression: "STORE",
                                            compressionOptions: null,
                                            type: "",
                                            platform: "DOS",
                                            comment: null,
                                            mimeType: "application/zip",
                                            encodeFileName: i.utf8encode
                                        })).type = r2.type.toLowerCase(), r2.compression = r2.compression.toUpperCase(), "binarystring" === r2.type && (r2.type = "string"), !r2.type) throw Error("No outp\
ut type specified.");
                                        u.checkSupport(r2.type), "darwin" !== r2.platform && "freebsd" !== r2.platform && "lin\
ux" !== r2.platform && "sunos" !== r2.platform || (r2.platform = "UNIX"), "win32" === r2.platform && (r2.platform = "DOS");
                                        var n2 = r2.comment || this.comment || "";
                                        t2 = o2.generateWorker(this, r2, n2);
                                    } catch (e3) {
                                        (t2 = new l("error")).error(e3);
                                    }
                                    return new a(t2, r2.type || "string", r2.mimeType);
                                }, "generateInternalStream"),
                                generateAsync: __name(function(e2, t2) {
                                    return this.generateInternalStream(e2).accumulate(t2);
                                }, "generateAsync"),
                                generateNodeStream: __name(function(e2, t2) {
                                    return (e2 = e2 || {}).type || (e2.type = "nodebuffer"), this.generateInternalStream(e2).toNodejsStream(t2);
                                }, "generateNodeStream")
                            };
                        },
                        {
                            "./compressedObject": 2,
                            "./defaults": 5,
                            "./generate": 9,
                            "./nodejs/NodejsStreamInputA\
dapter": 12,
                            "./nodejsUtils": 14,
                            "./stream/GenericWorker": 28,
                            "./stream/StreamHelper": 29,
                            "./utf8": 31,
                            "./utils": 32,
                            "./zipObject": 35
                        }
                    ],
                    16: [
                        function(e, t, r) {
                            t.exports = e("stream");
                        },
                        {
                            stream: void 0
                        }
                    ],
                    17: [
                        function(e, t, r) {
                            var n = e("./DataReader");
                            function i(e2) {
                                n.call(this, e2);
                                for(var t2 = 0; t2 < this.data.length; t2++)e2[t2] = 255 & e2[t2];
                            }
                            __name(i, "i"), e("../utils").inherits(i, n), i.prototype.byteAt = function(e2) {
                                return this.data[this.zero + e2];
                            }, i.prototype.lastIndexOfSignature = function(e2) {
                                for(var t2 = e2.charCodeAt(0), r2 = e2.charCodeAt(1), n2 = e2.charCodeAt(2), i2 = e2.charCodeAt(3), s = this.length - 4; 0 <= s; --s)if (this.data[s] === t2 && this.data[s + 1] === r2 && this.data[s + 2] === n2 && this.data[s + 3] === i2) return s - this.zero;
                                return -1;
                            }, i.prototype.readAndCheckSignature = function(e2) {
                                var t2 = e2.charCodeAt(0), r2 = e2.charCodeAt(1), n2 = e2.charCodeAt(2), i2 = e2.charCodeAt(3), s = this.readData(4);
                                return t2 === s[0] && r2 === s[1] && n2 === s[2] && i2 === s[3];
                            }, i.prototype.readData = function(e2) {
                                if (this.checkOffset(e2), 0 === e2) return [];
                                var t2 = this.data.slice(this.zero + this.index, this.zero + this.index + e2);
                                return this.index += e2, t2;
                            }, t.exports = i;
                        },
                        {
                            "../utils": 32,
                            "./DataReader": 18
                        }
                    ],
                    18: [
                        function(e, t, r) {
                            var n = e("../utils");
                            function i(e2) {
                                this.data = e2, this.length = e2.length, this.index = 0, this.zero = 0;
                            }
                            __name(i, "i"), i.prototype = {
                                checkOffset: __name(function(e2) {
                                    this.checkIndex(this.index + e2);
                                }, "checkOffset"),
                                checkIndex: __name(function(e2) {
                                    if (this.length < this.zero + e2 || e2 < 0) throw Error("End of data reached (data l\
ength = " + this.length + ", asked index = " + e2 + "). Corrupted zip ?");
                                }, "checkIndex"),
                                setIndex: __name(function(e2) {
                                    this.checkIndex(e2), this.index = e2;
                                }, "setIndex"),
                                skip: __name(function(e2) {
                                    this.setIndex(this.index + e2);
                                }, "skip"),
                                byteAt: __name(function() {}, "byteAt"),
                                readInt: __name(function(e2) {
                                    var t2, r2 = 0;
                                    for(this.checkOffset(e2), t2 = this.index + e2 - 1; t2 >= this.index; t2--)r2 = (r2 << 8) + this.byteAt(t2);
                                    return this.index += e2, r2;
                                }, "readInt"),
                                readString: __name(function(e2) {
                                    return n.transformTo("string", this.readData(e2));
                                }, "readString"),
                                readData: __name(function() {}, "readData"),
                                lastIndexOfSignature: __name(function() {}, "lastIndexOfSignature"),
                                readAndCheckSignature: __name(function() {}, "readAndCheckSignature"),
                                readDate: __name(function() {
                                    var e2 = this.readInt(4);
                                    return new Date(Date.UTC(1980 + (e2 >> 25 & 127), (e2 >> 21 & 15) - 1, e2 >> 16 & 31, e2 >> 11 & 31, e2 >> 5 & 63, (31 & e2) << 1));
                                }, "readDate")
                            }, t.exports = i;
                        },
                        {
                            "../utils": 32
                        }
                    ],
                    19: [
                        function(e, t, r) {
                            var n = e("./Uint8ArrayReader");
                            function i(e2) {
                                n.call(this, e2);
                            }
                            __name(i, "i"), e("../utils").inherits(i, n), i.prototype.readData = function(e2) {
                                this.checkOffset(e2);
                                var t2 = this.data.slice(this.zero + this.index, this.zero + this.index + e2);
                                return this.index += e2, t2;
                            }, t.exports = i;
                        },
                        {
                            "../utils": 32,
                            "./Uint8ArrayReader": 21
                        }
                    ],
                    20: [
                        function(e, t, r) {
                            var n = e("./DataReader");
                            function i(e2) {
                                n.call(this, e2);
                            }
                            __name(i, "i"), e("../utils").inherits(i, n), i.prototype.byteAt = function(e2) {
                                return this.data.charCodeAt(this.zero + e2);
                            }, i.prototype.lastIndexOfSignature = function(e2) {
                                return this.data.lastIndexOf(e2) - this.zero;
                            }, i.prototype.readAndCheckSignature = function(e2) {
                                return e2 === this.readData(4);
                            }, i.prototype.readData = function(e2) {
                                this.checkOffset(e2);
                                var t2 = this.data.slice(this.zero + this.index, this.zero + this.index + e2);
                                return this.index += e2, t2;
                            }, t.exports = i;
                        },
                        {
                            "../utils": 32,
                            "./DataReader": 18
                        }
                    ],
                    21: [
                        function(e, t, r) {
                            var n = e("./ArrayReader");
                            function i(e2) {
                                n.call(this, e2);
                            }
                            __name(i, "i"), e("../utils").inherits(i, n), i.prototype.readData = function(e2) {
                                if (this.checkOffset(e2), 0 === e2) return new Uint8Array(0);
                                var t2 = this.data.subarray(this.zero + this.index, this.zero + this.index + e2);
                                return this.index += e2, t2;
                            }, t.exports = i;
                        },
                        {
                            "../utils": 32,
                            "./ArrayReader": 17
                        }
                    ],
                    22: [
                        function(e, t, r) {
                            var n = e("../utils"), i = e("../support"), s = e("./ArrayReader"), a = e("./StringReader"), o2 = e("./NodeBufferReader"), h = e("./Uint8ArrayReader");
                            t.exports = function(e2) {
                                var t2 = n.getTypeOf(e2);
                                return n.checkSupport(t2), "string" !== t2 || i.uint8array ? "nodebuffer" === t2 ? new o2(e2) : i.uint8array ? new h(n.transformTo("uint8array", e2)) : new s(n.transformTo("array", e2)) : new a(e2);
                            };
                        },
                        {
                            "../support": 30,
                            "../utils": 32,
                            "./ArrayReader": 17,
                            "./NodeBufferReader": 19,
                            "./Str\
ingReader": 20,
                            "./Uint8ArrayReader": 21
                        }
                    ],
                    23: [
                        function(e, t, r) {
                            r.LOCAL_FILE_HEADER = "PK", r.CENTRAL_FILE_HEADER = "PK", r.CENTRAL_DIRECTORY_END = "P\
K", r.ZIP64_CENTRAL_DIRECTORY_LOCATOR = "PK\x07", r.ZIP64_CENTRAL_DIRECTORY_END = "PK", r.DATA_DESCRIPTOR = "PK\x07\b";
                        },
                        {}
                    ],
                    24: [
                        function(e, t, r) {
                            var n = e("./GenericWorker"), i = e("../utils");
                            function s(e2) {
                                n.call(this, "ConvertWorker to " + e2), this.destType = e2;
                            }
                            __name(s, "s"), i.inherits(s, n), s.prototype.processChunk = function(e2) {
                                this.push({
                                    data: i.transformTo(this.destType, e2.data),
                                    meta: e2.meta
                                });
                            }, t.exports = s;
                        },
                        {
                            "../utils": 32,
                            "./GenericWorker": 28
                        }
                    ],
                    25: [
                        function(e, t, r) {
                            var n = e("./GenericWorker"), i = e("../crc32");
                            function s() {
                                n.call(this, "Crc32Probe"), this.withStreamInfo("crc32", 0);
                            }
                            __name(s, "s"), e("../utils").inherits(s, n), s.prototype.processChunk = function(e2) {
                                this.streamInfo.crc32 = i(e2.data, this.streamInfo.crc32 || 0), this.push(e2);
                            }, t.exports = s;
                        },
                        {
                            "../crc32": 4,
                            "../utils": 32,
                            "./GenericWorker": 28
                        }
                    ],
                    26: [
                        function(e, t, r) {
                            var n = e("../utils"), i = e("./GenericWorker");
                            function s(e2) {
                                i.call(this, "DataLengthProbe for " + e2), this.propName = e2, this.withStreamInfo(e2, 0);
                            }
                            __name(s, "s"), n.inherits(s, i), s.prototype.processChunk = function(e2) {
                                if (e2) {
                                    var t2 = this.streamInfo[this.propName] || 0;
                                    this.streamInfo[this.propName] = t2 + e2.data.length;
                                }
                                i.prototype.processChunk.call(this, e2);
                            }, t.exports = s;
                        },
                        {
                            "../utils": 32,
                            "./GenericWorker": 28
                        }
                    ],
                    27: [
                        function(e, t, r) {
                            var n = e("../utils"), i = e("./GenericWorker");
                            function s(e2) {
                                i.call(this, "DataWorker");
                                var t2 = this;
                                this.dataIsReady = !1, this.index = 0, this.max = 0, this.data = null, this.type = "", this._tickScheduled = !1, e2.then(function(e3) {
                                    t2.dataIsReady = !0, t2.data = e3, t2.max = e3 && e3.length || 0, t2.type = n.getTypeOf(e3), t2.isPaused || t2._tickAndRepeat();
                                }, function(e3) {
                                    t2.error(e3);
                                });
                            }
                            __name(s, "s"), n.inherits(s, i), s.prototype.cleanUp = function() {
                                i.prototype.cleanUp.call(this), this.data = null;
                            }, s.prototype.resume = function() {
                                return !!i.prototype.resume.call(this) && (!this._tickScheduled && this.dataIsReady && (this._tickScheduled = !0, n.delay(this._tickAndRepeat, [], this)), !0);
                            }, s.prototype._tickAndRepeat = function() {
                                this._tickScheduled = !1, this.isPaused || this.isFinished || (this._tick(), this.isFinished || (n.delay(this._tickAndRepeat, [], this), this._tickScheduled = !0));
                            }, s.prototype._tick = function() {
                                if (this.isPaused || this.isFinished) return !1;
                                var e2 = null, t2 = Math.min(this.max, this.index + 16384);
                                if (this.index >= this.max) return this.end();
                                switch(this.type){
                                    case "string":
                                        e2 = this.data.substring(this.index, t2);
                                        break;
                                    case "uint8array":
                                        e2 = this.data.subarray(this.index, t2);
                                        break;
                                    case "array":
                                    case "nodebuffer":
                                        e2 = this.data.slice(this.index, t2);
                                }
                                return this.index = t2, this.push({
                                    data: e2,
                                    meta: {
                                        percent: this.max ? this.index / this.max * 100 : 0
                                    }
                                });
                            }, t.exports = s;
                        },
                        {
                            "../utils": 32,
                            "./GenericWorker": 28
                        }
                    ],
                    28: [
                        function(e, t, r) {
                            function n(e2) {
                                this.name = e2 || "default", this.streamInfo = {}, this.generatedError = null, this.extraStreamInfo = {}, this.isPaused = !0, this.isFinished = !1, this.isLocked = !1, this._listeners = {
                                    data: [],
                                    end: [],
                                    error: []
                                }, this.previous = null;
                            }
                            __name(n, "n"), n.prototype = {
                                push: __name(function(e2) {
                                    this.emit("data", e2);
                                }, "push"),
                                end: __name(function() {
                                    if (this.isFinished) return !1;
                                    this.flush();
                                    try {
                                        this.emit("end"), this.cleanUp(), this.isFinished = !0;
                                    } catch (e2) {
                                        this.emit("error", e2);
                                    }
                                    return !0;
                                }, "end"),
                                error: __name(function(e2) {
                                    return !this.isFinished && (this.isPaused ? this.generatedError = e2 : (this.isFinished = !0, this.emit("error", e2), this.previous && this.previous.error(e2), this.cleanUp()), !0);
                                }, "error"),
                                on: __name(function(e2, t2) {
                                    return this._listeners[e2].push(t2), this;
                                }, "on"),
                                cleanUp: __name(function() {
                                    this.streamInfo = this.generatedError = this.extraStreamInfo = null, this._listeners = [];
                                }, "cleanUp"),
                                emit: __name(function(e2, t2) {
                                    if (this._listeners[e2]) for(var r2 = 0; r2 < this._listeners[e2].length; r2++)this._listeners[e2][r2].call(this, t2);
                                }, "emit"),
                                pipe: __name(function(e2) {
                                    return e2.registerPrevious(this);
                                }, "pipe"),
                                registerPrevious: __name(function(e2) {
                                    if (this.isLocked) throw Error("The stream '" + this + "' has already been used.");
                                    this.streamInfo = e2.streamInfo, this.mergeStreamInfo(), this.previous = e2;
                                    var t2 = this;
                                    return e2.on("data", function(e3) {
                                        t2.processChunk(e3);
                                    }), e2.on("end", function() {
                                        t2.end();
                                    }), e2.on("error", function(e3) {
                                        t2.error(e3);
                                    }), this;
                                }, "registerPrevious"),
                                pause: __name(function() {
                                    return !this.isPaused && !this.isFinished && (this.isPaused = !0, this.previous && this.previous.pause(), !0);
                                }, "pause"),
                                resume: __name(function() {
                                    if (!this.isPaused || this.isFinished) return !1;
                                    var e2 = this.isPaused = !1;
                                    return this.generatedError && (this.error(this.generatedError), e2 = !0), this.previous && this.previous.resume(), !e2;
                                }, "resume"),
                                flush: __name(function() {}, "flush"),
                                processChunk: __name(function(e2) {
                                    this.push(e2);
                                }, "processChunk"),
                                withStreamInfo: __name(function(e2, t2) {
                                    return this.extraStreamInfo[e2] = t2, this.mergeStreamInfo(), this;
                                }, "withStreamInfo"),
                                mergeStreamInfo: __name(function() {
                                    for(var e2 in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo, e2) && (this.streamInfo[e2] = this.extraStreamInfo[e2]);
                                }, "mergeStreamInfo"),
                                lock: __name(function() {
                                    if (this.isLocked) throw Error("The stream '" + this + "' has already been used.");
                                    this.isLocked = !0, this.previous && this.previous.lock();
                                }, "lock"),
                                toString: __name(function() {
                                    var e2 = "Worker " + this.name;
                                    return this.previous ? this.previous + " -> " + e2 : e2;
                                }, "toString")
                            }, t.exports = n;
                        },
                        {}
                    ],
                    29: [
                        function(e, t, r) {
                            var h = e("../utils"), i = e("./ConvertWorker"), s = e("./GenericWorker"), u = e("../base6\
4"), n = e("../support"), a = e("../external"), o2 = null;
                            if (n.nodestream) try {
                                o2 = e("../nodejs/NodejsStreamOutputAdapter");
                            } catch (e2) {}
                            function l(e2, o3) {
                                return new a.Promise(function(t2, r2) {
                                    var n2 = [], i2 = e2._internalType, s2 = e2._outputType, a2 = e2._mimeType;
                                    e2.on("data", function(e3, t3) {
                                        n2.push(e3), o3 && o3(t3);
                                    }).on("error", function(e3) {
                                        n2 = [], r2(e3);
                                    }).on("end", function() {
                                        try {
                                            var e3 = function(e4, t3, r3) {
                                                switch(e4){
                                                    case "blob":
                                                        return h.newBlob(h.transformTo("arraybuffer", t3), r3);
                                                    case "base64":
                                                        return u.encode(t3);
                                                    default:
                                                        return h.transformTo(e4, t3);
                                                }
                                            }(s2, function(e4, t3) {
                                                var r3, n3 = 0, i3 = null, s3 = 0;
                                                for(r3 = 0; r3 < t3.length; r3++)s3 += t3[r3].length;
                                                switch(e4){
                                                    case "string":
                                                        return t3.join("");
                                                    case "array":
                                                        return Array.prototype.concat.apply([], t3);
                                                    case "uint8array":
                                                        for(i3 = new Uint8Array(s3), r3 = 0; r3 < t3.length; r3++)i3.set(t3[r3], n3), n3 += t3[r3].length;
                                                        return i3;
                                                    case "nodebuffer":
                                                        return Buffer.concat(t3);
                                                    default:
                                                        throw Error("concat : unsupported type '" + e4 + "'");
                                                }
                                            }(i2, n2), a2);
                                            t2(e3);
                                        } catch (e4) {
                                            r2(e4);
                                        }
                                        n2 = [];
                                    }).resume();
                                });
                            }
                            function f(e2, t2, r2) {
                                var n2 = t2;
                                switch(t2){
                                    case "blob":
                                    case "arraybuffer":
                                        n2 = "uint8array";
                                        break;
                                    case "base64":
                                        n2 = "string";
                                }
                                try {
                                    this._internalType = n2, this._outputType = t2, this._mimeType = r2, h.checkSupport(n2), this._worker = e2.pipe(new i(n2)), e2.lock();
                                } catch (e3) {
                                    this._worker = new s("error"), this._worker.error(e3);
                                }
                            }
                            __name(l, "l"), __name(f, "f"), f.prototype = {
                                accumulate: __name(function(e2) {
                                    return l(this, e2);
                                }, "accumulate"),
                                on: __name(function(e2, t2) {
                                    var r2 = this;
                                    return "data" === e2 ? this._worker.on(e2, function(e3) {
                                        t2.call(r2, e3.data, e3.meta);
                                    }) : this._worker.on(e2, function() {
                                        h.delay(t2, arguments, r2);
                                    }), this;
                                }, "on"),
                                resume: __name(function() {
                                    return h.delay(this._worker.resume, [], this._worker), this;
                                }, "resume"),
                                pause: __name(function() {
                                    return this._worker.pause(), this;
                                }, "pause"),
                                toNodejsStream: __name(function(e2) {
                                    if (h.checkSupport("nodestream"), "nodebuffer" !== this._outputType) throw Error(this._outputType + " is not supported by this method");
                                    return new o2(this, {
                                        objectMode: "nodebuffer" !== this._outputType
                                    }, e2);
                                }, "toNodejsStream")
                            }, t.exports = f;
                        },
                        {
                            "../base64": 1,
                            "../external": 6,
                            "../nodejs/NodejsStreamOutputAdapter": 13,
                            "../suppor\
t": 30,
                            "../utils": 32,
                            "./ConvertWorker": 24,
                            "./GenericWorker": 28
                        }
                    ],
                    30: [
                        function(e, t, r) {
                            if (r.base64 = !0, r.array = !0, r.string = !0, r.arraybuffer = "u" > ("u" < typeof ArrayBuffer ? "undefined" : _type_of1(ArrayBuffer)) && "u" > ("u" < typeof Uint8Array ? "undefined" : _type_of1(Uint8Array)), r.nodebuffer = "u" > ("u" < typeof Buffer ? "undefined" : _type_of1(Buffer)), r.uint8array = "u" > ("u" < typeof Uint8Array ? "undefined" : _type_of1(Uint8Array)), "u" < ("u" < typeof ArrayBuffer ? "undefined" : _type_of1(ArrayBuffer))) r.blob = !1;
                            else {
                                var n = new ArrayBuffer(0);
                                try {
                                    r.blob = 0 === new Blob([
                                        n
                                    ], {
                                        type: "application/zip"
                                    }).size;
                                } catch (e2) {
                                    try {
                                        var i = new (self.BlobBuilder || self.WebKitBlobBuilder || self.MozBlobBuilder || self.MSBlobBuilder)();
                                        i.append(n), r.blob = 0 === i.getBlob("application/zip").size;
                                    } catch (e3) {
                                        r.blob = !1;
                                    }
                                }
                            }
                            try {
                                r.nodestream = !!e("readable-stream").Readable;
                            } catch (e2) {
                                r.nodestream = !1;
                            }
                        },
                        {
                            "readable-stream": 16
                        }
                    ],
                    31: [
                        function(e, t, s) {
                            for(var o2 = e("./utils"), h = e("./support"), r = e("./nodejsUtils"), n = e("./stream/Ge\
nericWorker"), u = Array(256), i = 0; i < 256; i++)u[i] = 252 <= i ? 6 : 248 <= i ? 5 : 240 <= i ? 4 : 224 <= i ? 3 : 192 <= i ? 2 : 1;
                            function a() {
                                n.call(this, "utf-8 decode"), this.leftOver = null;
                            }
                            function l() {
                                n.call(this, "utf-8 encode");
                            }
                            u[254] = u[254] = 1, __name(a, "a"), __name(l, "l"), s.utf8encode = function(e2) {
                                return h.nodebuffer ? r.newBufferFrom(e2, "utf-8") : function(e3) {
                                    var t2, r2, n2, i2, s2, a2 = e3.length, o3 = 0;
                                    for(i2 = 0; i2 < a2; i2++)55296 == (64512 & (r2 = e3.charCodeAt(i2))) && i2 + 1 < a2 && 56320 == (64512 & (n2 = e3.charCodeAt(i2 + 1))) && (r2 = 65536 + (r2 - 55296 << 10) + (n2 - 56320), i2++), o3 += r2 < 128 ? 1 : r2 < 2048 ? 2 : r2 < 65536 ? 3 : 4;
                                    for(t2 = h.uint8array ? new Uint8Array(o3) : Array(o3), i2 = s2 = 0; s2 < o3; i2++)55296 == (64512 & (r2 = e3.charCodeAt(i2))) && i2 + 1 < a2 && 56320 == (64512 & (n2 = e3.charCodeAt(i2 + 1))) && (r2 = 65536 + (r2 - 55296 << 10) + (n2 - 56320), i2++), r2 < 128 ? t2[s2++] = r2 : (r2 < 2048 ? t2[s2++] = 192 | r2 >>> 6 : (r2 < 65536 ? t2[s2++] = 224 | r2 >>> 12 : (t2[s2++] = 240 | r2 >>> 18, t2[s2++] = 128 | r2 >>> 12 & 63), t2[s2++] = 128 | r2 >>> 6 & 63), t2[s2++] = 128 | 63 & r2);
                                    return t2;
                                }(e2);
                            }, s.utf8decode = function(e2) {
                                return h.nodebuffer ? o2.transformTo("nodebuffer", e2).toString("utf-8") : function(e3) {
                                    var t2, r2, n2, i2, s2 = e3.length, a2 = Array(2 * s2);
                                    for(t2 = r2 = 0; t2 < s2;)if ((n2 = e3[t2++]) < 128) a2[r2++] = n2;
                                    else if (4 < (i2 = u[n2])) a2[r2++] = 65533, t2 += i2 - 1;
                                    else {
                                        for(n2 &= 2 === i2 ? 31 : 3 === i2 ? 15 : 7; 1 < i2 && t2 < s2;)n2 = n2 << 6 | 63 & e3[t2++], i2--;
                                        1 < i2 ? a2[r2++] = 65533 : n2 < 65536 ? a2[r2++] = n2 : (n2 -= 65536, a2[r2++] = 55296 | n2 >> 10 & 1023, a2[r2++] = 56320 | 1023 & n2);
                                    }
                                    return a2.length !== r2 && (a2.subarray ? a2 = a2.subarray(0, r2) : a2.length = r2), o2.applyFromCharCode(a2);
                                }(e2 = o2.transformTo(h.uint8array ? "uint8array" : "array", e2));
                            }, o2.inherits(a, n), a.prototype.processChunk = function(e2) {
                                var t2 = o2.transformTo(h.uint8array ? "uint8array" : "array", e2.data);
                                if (this.leftOver && this.leftOver.length) {
                                    if (h.uint8array) {
                                        var r2 = t2;
                                        (t2 = new Uint8Array(r2.length + this.leftOver.length)).set(this.leftOver, 0), t2.set(r2, this.leftOver.length);
                                    } else t2 = this.leftOver.concat(t2);
                                    this.leftOver = null;
                                }
                                var n2 = function(e3, t3) {
                                    var r3;
                                    for((t3 = t3 || e3.length) > e3.length && (t3 = e3.length), r3 = t3 - 1; 0 <= r3 && 128 == (192 & e3[r3]);)r3--;
                                    return r3 < 0 || 0 === r3 ? t3 : r3 + u[e3[r3]] > t3 ? r3 : t3;
                                }(t2), i2 = t2;
                                n2 !== t2.length && (h.uint8array ? (i2 = t2.subarray(0, n2), this.leftOver = t2.subarray(n2, t2.length)) : (i2 = t2.slice(0, n2), this.leftOver = t2.slice(n2, t2.length))), this.push({
                                    data: s.utf8decode(i2),
                                    meta: e2.meta
                                });
                            }, a.prototype.flush = function() {
                                this.leftOver && this.leftOver.length && (this.push({
                                    data: s.utf8decode(this.leftOver),
                                    meta: {}
                                }), this.leftOver = null);
                            }, s.Utf8DecodeWorker = a, o2.inherits(l, n), l.prototype.processChunk = function(e2) {
                                this.push({
                                    data: s.utf8encode(e2.data),
                                    meta: e2.meta
                                });
                            }, s.Utf8EncodeWorker = l;
                        },
                        {
                            "./nodejsUtils": 14,
                            "./stream/GenericWorker": 28,
                            "./support": 30,
                            "./utils": 32
                        }
                    ],
                    32: [
                        function(e, t, a) {
                            var o2 = e("./support"), h = e("./base64"), r = e("./nodejsUtils"), u = e("./external");
                            function n(e2) {
                                return e2;
                            }
                            function l(e2, t2) {
                                for(var r2 = 0; r2 < e2.length; ++r2)t2[r2] = 255 & e2.charCodeAt(r2);
                                return t2;
                            }
                            __name(n, "n"), __name(l, "l"), e("setimmediate"), a.newBlob = function(t2, r2) {
                                a.checkSupport("blob");
                                try {
                                    return new Blob([
                                        t2
                                    ], {
                                        type: r2
                                    });
                                } catch (e2) {
                                    try {
                                        var n2 = new (self.BlobBuilder || self.WebKitBlobBuilder || self.MozBlobBuilder || self.MSBlobBuilder)();
                                        return n2.append(t2), n2.getBlob(r2);
                                    } catch (e3) {
                                        throw Error("Bug : can't construct the Blob.");
                                    }
                                }
                            };
                            var i = {
                                stringifyByChunk: __name(function(e2, t2, r2) {
                                    var n2 = [], i2 = 0, s2 = e2.length;
                                    if (s2 <= r2) return String.fromCharCode.apply(null, e2);
                                    for(; i2 < s2;)"array" === t2 || "nodebuffer" === t2 ? n2.push(String.fromCharCode.apply(null, e2.slice(i2, Math.min(i2 + r2, s2)))) : n2.push(String.fromCharCode.apply(null, e2.subarray(i2, Math.min(i2 + r2, s2)))), i2 += r2;
                                    return n2.join("");
                                }, "stringifyByChunk"),
                                stringifyByChar: __name(function(e2) {
                                    for(var t2 = "", r2 = 0; r2 < e2.length; r2++)t2 += String.fromCharCode(e2[r2]);
                                    return t2;
                                }, "stringifyByChar"),
                                applyCanBeUsed: {
                                    uint8array: function() {
                                        try {
                                            return o2.uint8array && 1 === String.fromCharCode.apply(null, new Uint8Array(1)).length;
                                        } catch (e2) {
                                            return !1;
                                        }
                                    }(),
                                    nodebuffer: function() {
                                        try {
                                            return o2.nodebuffer && 1 === String.fromCharCode.apply(null, r.allocBuffer(1)).length;
                                        } catch (e2) {
                                            return !1;
                                        }
                                    }()
                                }
                            };
                            function s(e2) {
                                var t2 = 65536, r2 = a.getTypeOf(e2), n2 = !0;
                                if ("uint8array" === r2 ? n2 = i.applyCanBeUsed.uint8array : "nodebuffer" === r2 && (n2 = i.applyCanBeUsed.nodebuffer), n2) for(; 1 < t2;)try {
                                    return i.stringifyByChunk(e2, r2, t2);
                                } catch (e3) {
                                    t2 = Math.floor(t2 / 2);
                                }
                                return i.stringifyByChar(e2);
                            }
                            function f(e2, t2) {
                                for(var r2 = 0; r2 < e2.length; r2++)t2[r2] = e2[r2];
                                return t2;
                            }
                            __name(s, "s"), __name(f, "f"), a.applyFromCharCode = s;
                            var c = {};
                            c.string = {
                                string: n,
                                array: __name(function(e2) {
                                    return l(e2, Array(e2.length));
                                }, "array"),
                                arraybuffer: __name(function(e2) {
                                    return c.string.uint8array(e2).buffer;
                                }, "arraybuffer"),
                                uint8array: __name(function(e2) {
                                    return l(e2, new Uint8Array(e2.length));
                                }, "uint8array"),
                                nodebuffer: __name(function(e2) {
                                    return l(e2, r.allocBuffer(e2.length));
                                }, "nodebuffer")
                            }, c.array = {
                                string: s,
                                array: n,
                                arraybuffer: __name(function(e2) {
                                    return new Uint8Array(e2).buffer;
                                }, "arraybuffer"),
                                uint8array: __name(function(e2) {
                                    return new Uint8Array(e2);
                                }, "uint8array"),
                                nodebuffer: __name(function(e2) {
                                    return r.newBufferFrom(e2);
                                }, "nodebuffer")
                            }, c.arraybuffer = {
                                string: __name(function(e2) {
                                    return s(new Uint8Array(e2));
                                }, "string"),
                                array: __name(function(e2) {
                                    return f(new Uint8Array(e2), Array(e2.byteLength));
                                }, "array"),
                                arraybuffer: n,
                                uint8array: __name(function(e2) {
                                    return new Uint8Array(e2);
                                }, "uint8array"),
                                nodebuffer: __name(function(e2) {
                                    return r.newBufferFrom(new Uint8Array(e2));
                                }, "nodebuffer")
                            }, c.uint8array = {
                                string: s,
                                array: __name(function(e2) {
                                    return f(e2, Array(e2.length));
                                }, "array"),
                                arraybuffer: __name(function(e2) {
                                    return e2.buffer;
                                }, "arraybuffer"),
                                uint8array: n,
                                nodebuffer: __name(function(e2) {
                                    return r.newBufferFrom(e2);
                                }, "nodebuffer")
                            }, c.nodebuffer = {
                                string: s,
                                array: __name(function(e2) {
                                    return f(e2, Array(e2.length));
                                }, "array"),
                                arraybuffer: __name(function(e2) {
                                    return c.nodebuffer.uint8array(e2).buffer;
                                }, "arraybuffer"),
                                uint8array: __name(function(e2) {
                                    return f(e2, new Uint8Array(e2.length));
                                }, "uint8array"),
                                nodebuffer: n
                            }, a.transformTo = function(e2, t2) {
                                return (t2 = t2 || "", e2) ? (a.checkSupport(e2), c[a.getTypeOf(t2)][e2](t2)) : t2;
                            }, a.resolve = function(e2) {
                                for(var t2 = e2.split("/"), r2 = [], n2 = 0; n2 < t2.length; n2++){
                                    var i2 = t2[n2];
                                    "." === i2 || "" === i2 && 0 !== n2 && n2 !== t2.length - 1 || (".." === i2 ? r2.pop() : r2.push(i2));
                                }
                                return r2.join("/");
                            }, a.getTypeOf = function(e2) {
                                return "string" == typeof e2 ? "string" : "[object Array]" === Object.prototype.toString.call(e2) ? "array" : o2.nodebuffer && r.isBuffer(e2) ? "nodebuffer" : o2.uint8array && _instanceof(e2, Uint8Array) ? "uint8array" : o2.arraybuffer && _instanceof(e2, ArrayBuffer) ? "arraybuffer" : void 0;
                            }, a.checkSupport = function(e2) {
                                if (!o2[e2.toLowerCase()]) throw Error(e2 + " is not supported by this platform");
                            }, a.MAX_VALUE_16BITS = 65535, a.MAX_VALUE_32BITS = -1, a.pretty = function(e2) {
                                var t2, r2, n2 = "";
                                for(r2 = 0; r2 < (e2 || "").length; r2++)n2 += "\\x" + ((t2 = e2.charCodeAt(r2)) < 16 ? "0" : "") + t2.toString(16).toUpperCase();
                                return n2;
                            }, a.delay = function(e2, t2, r2) {
                                setImmediate(function() {
                                    e2.apply(r2 || null, t2 || []);
                                });
                            }, a.inherits = function(e2, t2) {
                                function r2() {}
                                __name(r2, "r"), r2.prototype = t2.prototype, e2.prototype = new r2();
                            }, a.extend = function() {
                                var e2, t2, r2 = {};
                                for(e2 = 0; e2 < arguments.length; e2++)for(t2 in arguments[e2])Object.prototype.hasOwnProperty.call(arguments[e2], t2) && void 0 === r2[t2] && (r2[t2] = arguments[e2][t2]);
                                return r2;
                            }, a.prepareContent = function(r2, e2, n2, i2, s2) {
                                return u.Promise.resolve(e2).then(function(n3) {
                                    return o2.blob && (_instanceof(n3, Blob) || -1 !== [
                                        "[object File]",
                                        "[object Blob]"
                                    ].indexOf(Object.prototype.toString.call(n3))) && "u" > ("u" < typeof FileReader ? "undefined" : _type_of1(FileReader)) ? new u.Promise(function(t2, r3) {
                                        var e3 = new FileReader();
                                        e3.onload = function(e4) {
                                            t2(e4.target.result);
                                        }, e3.onerror = function(e4) {
                                            r3(e4.target.error);
                                        }, e3.readAsArrayBuffer(n3);
                                    }) : n3;
                                }).then(function(e3) {
                                    var t2 = a.getTypeOf(e3);
                                    return t2 ? ("arraybuffer" === t2 ? e3 = a.transformTo("uint8array", e3) : "string" === t2 && (s2 ? e3 = h.decode(e3) : n2 && !0 !== i2 && (e3 = function(e4) {
                                        return l(e4, o2.uint8array ? new Uint8Array(e4.length) : Array(e4.length));
                                    }(e3))), e3) : u.Promise.reject(Error("Can't read the data of '" + r2 + "'. Is it\
 in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"));
                                });
                            };
                        },
                        {
                            "./base64": 1,
                            "./external": 6,
                            "./nodejsUtils": 14,
                            "./support": 30,
                            setimmediate: 54
                        }
                    ],
                    33: [
                        function(e, t, r) {
                            var n = e("./reader/readerFor"), i = e("./utils"), s = e("./signature"), a = e("./zipEntry"), o2 = e("./support");
                            function h(e2) {
                                this.files = [], this.loadOptions = e2;
                            }
                            __name(h, "h"), h.prototype = {
                                checkSignature: __name(function(e2) {
                                    if (!this.reader.readAndCheckSignature(e2)) {
                                        this.reader.index -= 4;
                                        var t2 = this.reader.readString(4);
                                        throw Error("Corrupted zip or bug: unexpected signature (" + i.pretty(t2) + ", exp\
ected " + i.pretty(e2) + ")");
                                    }
                                }, "checkSignature"),
                                isSignature: __name(function(e2, t2) {
                                    var r2 = this.reader.index;
                                    this.reader.setIndex(e2);
                                    var n2 = this.reader.readString(4) === t2;
                                    return this.reader.setIndex(r2), n2;
                                }, "isSignature"),
                                readBlockEndOfCentral: __name(function() {
                                    this.diskNumber = this.reader.readInt(2), this.diskWithCentralDirStart = this.reader.readInt(2), this.centralDirRecordsOnThisDisk = this.reader.readInt(2), this.centralDirRecords = this.reader.readInt(2), this.centralDirSize = this.reader.readInt(4), this.centralDirOffset = this.reader.readInt(4), this.zipCommentLength = this.reader.readInt(2);
                                    var e2 = this.reader.readData(this.zipCommentLength), t2 = o2.uint8array ? "uint8array" : "array", r2 = i.transformTo(t2, e2);
                                    this.zipComment = this.loadOptions.decodeFileName(r2);
                                }, "readBlockEndOfCentral"),
                                readBlockZip64EndOfCentral: __name(function() {
                                    this.zip64EndOfCentralSize = this.reader.readInt(8), this.reader.skip(4), this.diskNumber = this.reader.readInt(4), this.diskWithCentralDirStart = this.reader.readInt(4), this.centralDirRecordsOnThisDisk = this.reader.readInt(8), this.centralDirRecords = this.reader.readInt(8), this.centralDirSize = this.reader.readInt(8), this.centralDirOffset = this.reader.readInt(8), this.zip64ExtensibleData = {};
                                    for(var e2, t2, r2, n2 = this.zip64EndOfCentralSize - 44; 0 < n2;)e2 = this.reader.readInt(2), t2 = this.reader.readInt(4), r2 = this.reader.readData(t2), this.zip64ExtensibleData[e2] = {
                                        id: e2,
                                        length: t2,
                                        value: r2
                                    };
                                }, "readBlockZip64EndOfCentral"),
                                readBlockZip64EndOfCentralLocator: __name(function() {
                                    if (this.diskWithZip64CentralDirStart = this.reader.readInt(4), this.relativeOffsetEndOfZip64CentralDir = this.reader.readInt(8), this.disksCount = this.reader.readInt(4), 1 < this.disksCount) throw Error("Multi-volumes zip are not supported");
                                }, "readBlockZip64EndOfCentralLocator"),
                                readLocalFiles: __name(function() {
                                    var e2, t2;
                                    for(e2 = 0; e2 < this.files.length; e2++)t2 = this.files[e2], this.reader.setIndex(t2.localHeaderOffset), this.checkSignature(s.LOCAL_FILE_HEADER), t2.readLocalPart(this.reader), t2.handleUTF8(), t2.processAttributes();
                                }, "readLocalFiles"),
                                readCentralDir: __name(function() {
                                    var e2;
                                    for(this.reader.setIndex(this.centralDirOffset); this.reader.readAndCheckSignature(s.CENTRAL_FILE_HEADER);)(e2 = new a({
                                        zip64: this.zip64
                                    }, this.loadOptions)).readCentralPart(this.reader), this.files.push(e2);
                                    if (this.centralDirRecords !== this.files.length && 0 !== this.centralDirRecords && 0 === this.files.length) throw Error("Corrupted zip or bug: expected " + this.centralDirRecords + " records in central dir, got " + this.files.length);
                                }, "readCentralDir"),
                                readEndOfCentral: __name(function() {
                                    var e2 = this.reader.lastIndexOfSignature(s.CENTRAL_DIRECTORY_END);
                                    if (e2 < 0) throw this.isSignature(0, s.LOCAL_FILE_HEADER) ? Error("Corrupted zip: can't find end of central directory") : Error("Can't find end \
of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation\
/howto/read_zip.html");
                                    this.reader.setIndex(e2);
                                    var t2 = e2;
                                    if (this.checkSignature(s.CENTRAL_DIRECTORY_END), this.readBlockEndOfCentral(), this.diskNumber === i.MAX_VALUE_16BITS || this.diskWithCentralDirStart === i.MAX_VALUE_16BITS || this.centralDirRecordsOnThisDisk === i.MAX_VALUE_16BITS || this.centralDirRecords === i.MAX_VALUE_16BITS || this.centralDirSize === i.MAX_VALUE_32BITS || this.centralDirOffset === i.MAX_VALUE_32BITS) {
                                        if (this.zip64 = !0, (e2 = this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR)) < 0) throw Error("Corrupted zip: can't find the ZIP64 end of central directory locat\
or");
                                        if (this.reader.setIndex(e2), this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR), this.readBlockZip64EndOfCentralLocator(), !this.isSignature(this.relativeOffsetEndOfZip64CentralDir, s.ZIP64_CENTRAL_DIRECTORY_END) && (this.relativeOffsetEndOfZip64CentralDir = this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_END), this.relativeOffsetEndOfZip64CentralDir < 0)) throw Error("Corrupted zip: can't find the ZIP64 end of central directory");
                                        this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir), this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_END), this.readBlockZip64EndOfCentral();
                                    }
                                    var r2 = this.centralDirOffset + this.centralDirSize;
                                    this.zip64 && (r2 += 20, r2 += 12 + this.zip64EndOfCentralSize);
                                    var n2 = t2 - r2;
                                    if (0 < n2) this.isSignature(t2, s.CENTRAL_FILE_HEADER) || (this.reader.zero = n2);
                                    else if (n2 < 0) throw Error("Corrupted zip: missing " + Math.abs(n2) + " bytes.");
                                }, "readEndOfCentral"),
                                prepareReader: __name(function(e2) {
                                    this.reader = n(e2);
                                }, "prepareReader"),
                                load: __name(function(e2) {
                                    this.prepareReader(e2), this.readEndOfCentral(), this.readCentralDir(), this.readLocalFiles();
                                }, "load")
                            }, t.exports = h;
                        },
                        {
                            "./reader/readerFor": 22,
                            "./signature": 23,
                            "./support": 30,
                            "./utils": 32,
                            "./zipEntr\
y": 34
                        }
                    ],
                    34: [
                        function(e, t, r) {
                            var n = e("./reader/readerFor"), s = e("./utils"), i = e("./compressedObject"), a = e("./c\
rc32"), o2 = e("./utf8"), h = e("./compressions"), u = e("./support");
                            function l(e2, t2) {
                                this.options = e2, this.loadOptions = t2;
                            }
                            __name(l, "l"), l.prototype = {
                                isEncrypted: __name(function() {
                                    return 1 == (1 & this.bitFlag);
                                }, "isEncrypted"),
                                useUTF8: __name(function() {
                                    return 2048 == (2048 & this.bitFlag);
                                }, "useUTF8"),
                                readLocalPart: __name(function(e2) {
                                    var t2, r2;
                                    if (e2.skip(22), this.fileNameLength = e2.readInt(2), r2 = e2.readInt(2), this.fileName = e2.readData(this.fileNameLength), e2.skip(r2), -1 === this.compressedSize || -1 === this.uncompressedSize) throw Error("Bug or corrupted zip : didn't get enough information \
from the central directory (compressedSize === -1 || uncompressedSize === -1)");
                                    if (null === (t2 = function(e3) {
                                        for(var t3 in h)if (Object.prototype.hasOwnProperty.call(h, t3) && h[t3].magic === e3) return h[t3];
                                        return null;
                                    }(this.compressionMethod))) throw Error("Corrupted zip : compression " + s.pretty(this.compressionMethod) + " unknown (inner file : " + s.transformTo("string", this.fileName) + ")");
                                    this.decompressed = new i(this.compressedSize, this.uncompressedSize, this.crc32, t2, e2.readData(this.compressedSize));
                                }, "readLocalPart"),
                                readCentralPart: __name(function(e2) {
                                    this.versionMadeBy = e2.readInt(2), e2.skip(2), this.bitFlag = e2.readInt(2), this.compressionMethod = e2.readString(2), this.date = e2.readDate(), this.crc32 = e2.readInt(4), this.compressedSize = e2.readInt(4), this.uncompressedSize = e2.readInt(4);
                                    var t2 = e2.readInt(2);
                                    if (this.extraFieldsLength = e2.readInt(2), this.fileCommentLength = e2.readInt(2), this.diskNumberStart = e2.readInt(2), this.internalFileAttributes = e2.readInt(2), this.externalFileAttributes = e2.readInt(4), this.localHeaderOffset = e2.readInt(4), this.isEncrypted()) throw Error("Encrypted zip are not supported");
                                    e2.skip(t2), this.readExtraFields(e2), this.parseZIP64ExtraField(e2), this.fileComment = e2.readData(this.fileCommentLength);
                                }, "readCentralPart"),
                                processAttributes: __name(function() {
                                    this.unixPermissions = null, this.dosPermissions = null;
                                    var e2 = this.versionMadeBy >> 8;
                                    this.dir = !!(16 & this.externalFileAttributes), 0 == e2 && (this.dosPermissions = 63 & this.externalFileAttributes), 3 == e2 && (this.unixPermissions = this.externalFileAttributes >> 16 & 65535), this.dir || "/" !== this.fileNameStr.slice(-1) || (this.dir = !0);
                                }, "processAttributes"),
                                parseZIP64ExtraField: __name(function() {
                                    if (this.extraFields[1]) {
                                        var e2 = n(this.extraFields[1].value);
                                        this.uncompressedSize === s.MAX_VALUE_32BITS && (this.uncompressedSize = e2.readInt(8)), this.compressedSize === s.MAX_VALUE_32BITS && (this.compressedSize = e2.readInt(8)), this.localHeaderOffset === s.MAX_VALUE_32BITS && (this.localHeaderOffset = e2.readInt(8)), this.diskNumberStart === s.MAX_VALUE_32BITS && (this.diskNumberStart = e2.readInt(4));
                                    }
                                }, "parseZIP64ExtraField"),
                                readExtraFields: __name(function(e2) {
                                    var t2, r2, n2, i2 = e2.index + this.extraFieldsLength;
                                    for(this.extraFields || (this.extraFields = {}); e2.index + 4 < i2;)t2 = e2.readInt(2), r2 = e2.readInt(2), n2 = e2.readData(r2), this.extraFields[t2] = {
                                        id: t2,
                                        length: r2,
                                        value: n2
                                    };
                                    e2.setIndex(i2);
                                }, "readExtraFields"),
                                handleUTF8: __name(function() {
                                    var e2 = u.uint8array ? "uint8array" : "array";
                                    if (this.useUTF8()) this.fileNameStr = o2.utf8decode(this.fileName), this.fileCommentStr = o2.utf8decode(this.fileComment);
                                    else {
                                        var t2 = this.findExtraFieldUnicodePath();
                                        if (null !== t2) this.fileNameStr = t2;
                                        else {
                                            var r2 = s.transformTo(e2, this.fileName);
                                            this.fileNameStr = this.loadOptions.decodeFileName(r2);
                                        }
                                        var n2 = this.findExtraFieldUnicodeComment();
                                        if (null !== n2) this.fileCommentStr = n2;
                                        else {
                                            var i2 = s.transformTo(e2, this.fileComment);
                                            this.fileCommentStr = this.loadOptions.decodeFileName(i2);
                                        }
                                    }
                                }, "handleUTF8"),
                                findExtraFieldUnicodePath: __name(function() {
                                    var e2 = this.extraFields[28789];
                                    if (e2) {
                                        var t2 = n(e2.value);
                                        return 1 !== t2.readInt(1) || a(this.fileName) !== t2.readInt(4) ? null : o2.utf8decode(t2.readData(e2.length - 5));
                                    }
                                    return null;
                                }, "findExtraFieldUnicodePath"),
                                findExtraFieldUnicodeComment: __name(function() {
                                    var e2 = this.extraFields[25461];
                                    if (e2) {
                                        var t2 = n(e2.value);
                                        return 1 !== t2.readInt(1) || a(this.fileComment) !== t2.readInt(4) ? null : o2.utf8decode(t2.readData(e2.length - 5));
                                    }
                                    return null;
                                }, "findExtraFieldUnicodeComment")
                            }, t.exports = l;
                        },
                        {
                            "./compressedObject": 2,
                            "./compressions": 3,
                            "./crc32": 4,
                            "./reader/readerFor": 22,
                            "\
./support": 30,
                            "./utf8": 31,
                            "./utils": 32
                        }
                    ],
                    35: [
                        function(e, t, r) {
                            function n(e2, t2, r2) {
                                this.name = e2, this.dir = r2.dir, this.date = r2.date, this.comment = r2.comment, this.unixPermissions = r2.unixPermissions, this.dosPermissions = r2.dosPermissions, this._data = t2, this._dataBinary = r2.binary, this.options = {
                                    compression: r2.compression,
                                    compressionOptions: r2.compressionOptions
                                };
                            }
                            __name(n, "n");
                            var s = e("./stream/StreamHelper"), i = e("./stream/DataWorker"), a = e("./utf8"), o2 = e("./compressedObject"), h = e("./stream/GenericWorker");
                            n.prototype = {
                                internalStream: __name(function(e2) {
                                    var t2 = null, r2 = "string";
                                    try {
                                        if (!e2) throw Error("No output type specified.");
                                        var n2 = "string" === (r2 = e2.toLowerCase()) || "text" === r2;
                                        "binarystring" !== r2 && "text" !== r2 || (r2 = "string"), t2 = this._decompressWorker();
                                        var i2 = !this._dataBinary;
                                        i2 && !n2 && (t2 = t2.pipe(new a.Utf8EncodeWorker())), !i2 && n2 && (t2 = t2.pipe(new a.Utf8DecodeWorker()));
                                    } catch (e3) {
                                        (t2 = new h("error")).error(e3);
                                    }
                                    return new s(t2, r2, "");
                                }, "internalStream"),
                                async: __name(function(e2, t2) {
                                    return this.internalStream(e2).accumulate(t2);
                                }, "async"),
                                nodeStream: __name(function(e2, t2) {
                                    return this.internalStream(e2 || "nodebuffer").toNodejsStream(t2);
                                }, "nodeStream"),
                                _compressWorker: __name(function(e2, t2) {
                                    if (_instanceof(this._data, o2) && this._data.compression.magic === e2.magic) return this._data.getCompressedWorker();
                                    var r2 = this._decompressWorker();
                                    return this._dataBinary || (r2 = r2.pipe(new a.Utf8EncodeWorker())), o2.createWorkerFrom(r2, e2, t2);
                                }, "_compressWorker"),
                                _decompressWorker: __name(function() {
                                    return _instanceof(this._data, o2) ? this._data.getContentWorker() : _instanceof(this._data, h) ? this._data : new i(this._data);
                                }, "_decompressWorker")
                            };
                            for(var u = [
                                "asText",
                                "asBinary",
                                "asNodeBuffer",
                                "asUint8Array",
                                "asArrayBuffer"
                            ], l = function l() {
                                throw Error("This method has been removed in JSZip 3.0, please check the upgrade gui\
de.");
                            }, f = 0; f < u.length; f++)n.prototype[u[f]] = l;
                            t.exports = n;
                        },
                        {
                            "./compressedObject": 2,
                            "./stream/DataWorker": 27,
                            "./stream/GenericWorker": 28,
                            "./st\
ream/StreamHelper": 29,
                            "./utf8": 31
                        }
                    ],
                    36: [
                        function(e, l, t) {
                            (function(t2) {
                                var r, n, e2 = t2.MutationObserver || t2.WebKitMutationObserver;
                                if (e2) {
                                    var i = 0, s = new e2(u), a = t2.document.createTextNode("");
                                    s.observe(a, {
                                        characterData: !0
                                    }), r = __name(function() {
                                        a.data = i = ++i % 2;
                                    }, "r");
                                } else if (t2.setImmediate || void 0 === t2.MessageChannel) r = "document" in t2 && "onr\
eadystatechange" in t2.document.createElement("script") ? function r() {
                                    var e3 = t2.document.createElement("script");
                                    e3.onreadystatechange = function() {
                                        u(), e3.onreadystatechange = null, e3.parentNode.removeChild(e3), e3 = null;
                                    }, t2.document.documentElement.appendChild(e3);
                                } : function r() {
                                    setTimeout(u, 0);
                                };
                                else {
                                    var o2 = new t2.MessageChannel();
                                    o2.port1.onmessage = u, r = __name(function() {
                                        o2.port2.postMessage(0);
                                    }, "r");
                                }
                                var h = [];
                                function u() {
                                    var e3, t3;
                                    n = !0;
                                    for(var r2 = h.length; r2;){
                                        for(t3 = h, h = [], e3 = -1; ++e3 < r2;)t3[e3]();
                                        r2 = h.length;
                                    }
                                    n = !1;
                                }
                                __name(u, "u"), l.exports = function(e3) {
                                    1 !== h.push(e3) || n || r();
                                };
                            }).call(this, "u" > ("u" < typeof global ? "undefined" : _type_of1(global)) ? global : "u" > ("u" < typeof self ? "undefined" : _type_of1(self)) ? self : "u" > ("u" < typeof window ? "undefined" : _type_of1(window)) ? window : {});
                        },
                        {}
                    ],
                    37: [
                        function(e, t, r) {
                            var i = e("immediate");
                            function u() {}
                            __name(u, "u");
                            var l = {}, s = [
                                "REJECTED"
                            ], a = [
                                "FULFILLED"
                            ], n = [
                                "PENDING"
                            ];
                            function o2(e2) {
                                if ("function" != typeof e2) throw TypeError("resolver must be a function");
                                this.state = n, this.queue = [], this.outcome = void 0, e2 !== u && d(this, e2);
                            }
                            function h(e2, t2, r2) {
                                this.promise = e2, "function" == typeof t2 && (this.onFulfilled = t2, this.callFulfilled = this.otherCallFulfilled), "function" == typeof r2 && (this.onRejected = r2, this.callRejected = this.otherCallRejected);
                            }
                            function f(t2, r2, n2) {
                                i(function() {
                                    var e2;
                                    try {
                                        e2 = r2(n2);
                                    } catch (e3) {
                                        return l.reject(t2, e3);
                                    }
                                    e2 === t2 ? l.reject(t2, TypeError("Cannot resolve promise with itself")) : l.resolve(t2, e2);
                                });
                            }
                            function c(e2) {
                                var t2 = e2 && e2.then;
                                if (e2 && ("object" == (void 0 === e2 ? "undefined" : _type_of(e2)) || "function" == typeof e2) && "function" == typeof t2) return function() {
                                    t2.apply(e2, arguments);
                                };
                            }
                            function d(t2, e2) {
                                var r2 = !1;
                                function n2(e3) {
                                    r2 || (r2 = !0, l.reject(t2, e3));
                                }
                                function i2(e3) {
                                    r2 || (r2 = !0, l.resolve(t2, e3));
                                }
                                __name(n2, "n"), __name(i2, "i");
                                var s2 = p(function() {
                                    e2(i2, n2);
                                });
                                "error" === s2.status && n2(s2.value);
                            }
                            function p(e2, t2) {
                                var r2 = {};
                                try {
                                    r2.value = e2(t2), r2.status = "success";
                                } catch (e3) {
                                    r2.status = "error", r2.value = e3;
                                }
                                return r2;
                            }
                            __name(o2, "o"), __name(h, "h"), __name(f, "f"), __name(c, "c"), __name(d, "d"), __name(p, "p"), (t.exports = o2).prototype.finally = function(t2) {
                                if ("function" != typeof t2) return this;
                                var r2 = this.constructor;
                                return this.then(function(e2) {
                                    return r2.resolve(t2()).then(function() {
                                        return e2;
                                    });
                                }, function(e2) {
                                    return r2.resolve(t2()).then(function() {
                                        throw e2;
                                    });
                                });
                            }, o2.prototype.catch = function(e2) {
                                return this.then(null, e2);
                            }, o2.prototype.then = function(e2, t2) {
                                if ("function" != typeof e2 && this.state === a || "function" != typeof t2 && this.state === s) return this;
                                var r2 = new this.constructor(u);
                                return this.state !== n ? f(r2, this.state === a ? e2 : t2, this.outcome) : this.queue.push(new h(r2, e2, t2)), r2;
                            }, h.prototype.callFulfilled = function(e2) {
                                l.resolve(this.promise, e2);
                            }, h.prototype.otherCallFulfilled = function(e2) {
                                f(this.promise, this.onFulfilled, e2);
                            }, h.prototype.callRejected = function(e2) {
                                l.reject(this.promise, e2);
                            }, h.prototype.otherCallRejected = function(e2) {
                                f(this.promise, this.onRejected, e2);
                            }, l.resolve = function(e2, t2) {
                                var r2 = p(c, t2);
                                if ("error" === r2.status) return l.reject(e2, r2.value);
                                var n2 = r2.value;
                                if (n2) d(e2, n2);
                                else {
                                    e2.state = a, e2.outcome = t2;
                                    for(var i2 = -1, s2 = e2.queue.length; ++i2 < s2;)e2.queue[i2].callFulfilled(t2);
                                }
                                return e2;
                            }, l.reject = function(e2, t2) {
                                e2.state = s, e2.outcome = t2;
                                for(var r2 = -1, n2 = e2.queue.length; ++r2 < n2;)e2.queue[r2].callRejected(t2);
                                return e2;
                            }, o2.resolve = function(e2) {
                                return _instanceof(e2, this) ? e2 : l.resolve(new this(u), e2);
                            }, o2.reject = function(e2) {
                                var t2 = new this(u);
                                return l.reject(t2, e2);
                            }, o2.all = function(e2) {
                                var r2 = this;
                                if ("[object Array]" !== Object.prototype.toString.call(e2)) return this.reject(TypeError("must be an array"));
                                var n2 = e2.length, i2 = !1;
                                if (!n2) return this.resolve([]);
                                for(var s2 = Array(n2), a2 = 0, t2 = -1, o3 = new this(u); ++t2 < n2;)h2(e2[t2], t2);
                                return o3;
                                function h2(e3, t3) {
                                    r2.resolve(e3).then(function(e4) {
                                        s2[t3] = e4, ++a2 !== n2 || i2 || (i2 = !0, l.resolve(o3, s2));
                                    }, function(e4) {
                                        i2 || (i2 = !0, l.reject(o3, e4));
                                    });
                                }
                            }, o2.race = function(e2) {
                                var a2, t2 = this;
                                if ("[object Array]" !== Object.prototype.toString.call(e2)) return this.reject(TypeError("must be an array"));
                                var r2 = e2.length, n2 = !1;
                                if (!r2) return this.resolve([]);
                                for(var i2 = -1, s2 = new this(u); ++i2 < r2;)a2 = e2[i2], t2.resolve(a2).then(function(e3) {
                                    n2 || (n2 = !0, l.resolve(s2, e3));
                                }, function(e3) {
                                    n2 || (n2 = !0, l.reject(s2, e3));
                                });
                                return s2;
                            };
                        },
                        {
                            immediate: 36
                        }
                    ],
                    38: [
                        function(e, t, r) {
                            var n = {};
                            (0, e("./lib/utils/common").assign)(n, e("./lib/deflate"), e("./lib/inflate"), e("./lib/zl\
ib/constants")), t.exports = n;
                        },
                        {
                            "./lib/deflate": 39,
                            "./lib/inflate": 40,
                            "./lib/utils/common": 41,
                            "./lib/zlib/constan\
ts": 44
                        }
                    ],
                    39: [
                        function(e, t, r) {
                            var a = e("./zlib/deflate"), o2 = e("./utils/common"), h = e("./utils/strings"), i = e("./\
zlib/messages"), s = e("./zlib/zstream"), u = Object.prototype.toString, l = 0, f = -1, c = 0, d = 8;
                            function p(e2) {
                                if (!_instanceof(this, p)) return new p(e2);
                                this.options = o2.assign({
                                    level: f,
                                    method: d,
                                    chunkSize: 16384,
                                    windowBits: 15,
                                    memLevel: 8,
                                    strategy: c,
                                    to: ""
                                }, e2 || {});
                                var n2, t2 = this.options;
                                t2.raw && 0 < t2.windowBits ? t2.windowBits = -t2.windowBits : t2.gzip && 0 < t2.windowBits && t2.windowBits < 16 && (t2.windowBits += 16), this.err = 0, this.msg = "", this.ended = !1, this.chunks = [], this.strm = new s(), this.strm.avail_out = 0;
                                var r2 = a.deflateInit2(this.strm, t2.level, t2.method, t2.windowBits, t2.memLevel, t2.strategy);
                                if (r2 !== l) throw Error(i[r2]);
                                if (t2.header && a.deflateSetHeader(this.strm, t2.header), t2.dictionary) {
                                    if (n2 = "string" == typeof t2.dictionary ? h.string2buf(t2.dictionary) : "[object Arr\
ayBuffer]" === u.call(t2.dictionary) ? new Uint8Array(t2.dictionary) : t2.dictionary, (r2 = a.deflateSetDictionary(this.strm, n2)) !== l) throw Error(i[r2]);
                                    this._dict_set = !0;
                                }
                            }
                            function n(e2, t2) {
                                var r2 = new p(t2);
                                if (r2.push(e2, !0), r2.err) throw r2.msg || i[r2.err];
                                return r2.result;
                            }
                            __name(p, "p"), __name(n, "n"), p.prototype.push = function(e2, t2) {
                                var r2, n2, i2 = this.strm, s2 = this.options.chunkSize;
                                if (this.ended) return !1;
                                n2 = t2 === ~~t2 ? t2 : 4 * (!0 === t2), "string" == typeof e2 ? i2.input = h.string2buf(e2) : "[object ArrayBuffer]" === u.call(e2) ? i2.input = new Uint8Array(e2) : i2.input = e2, i2.next_in = 0, i2.avail_in = i2.input.length;
                                do {
                                    if (0 === i2.avail_out && (i2.output = new o2.Buf8(s2), i2.next_out = 0, i2.avail_out = s2), 1 !== (r2 = a.deflate(i2, n2)) && r2 !== l) return this.onEnd(r2), this.ended = !0, !1;
                                    0 !== i2.avail_out && (0 !== i2.avail_in || 4 !== n2 && 2 !== n2) || ("string" === this.options.to ? this.onData(h.buf2binstring(o2.shrinkBuf(i2.output, i2.next_out))) : this.onData(o2.shrinkBuf(i2.output, i2.next_out)));
                                }while ((0 < i2.avail_in || 0 === i2.avail_out) && 1 !== r2);
                                return 4 === n2 ? (r2 = a.deflateEnd(this.strm), this.onEnd(r2), this.ended = !0, r2 === l) : 2 !== n2 || (this.onEnd(l), i2.avail_out = 0, !0);
                            }, p.prototype.onData = function(e2) {
                                this.chunks.push(e2);
                            }, p.prototype.onEnd = function(e2) {
                                e2 === l && ("string" === this.options.to ? this.result = this.chunks.join("") : this.result = o2.flattenChunks(this.chunks)), this.chunks = [], this.err = e2, this.msg = this.strm.msg;
                            }, r.Deflate = p, r.deflate = n, r.deflateRaw = function(e2, t2) {
                                return (t2 = t2 || {}).raw = !0, n(e2, t2);
                            }, r.gzip = function(e2, t2) {
                                return (t2 = t2 || {}).gzip = !0, n(e2, t2);
                            };
                        },
                        {
                            "./utils/common": 41,
                            "./utils/strings": 42,
                            "./zlib/deflate": 46,
                            "./zlib/messages": 51,
                            "./zlib/zstream": 53
                        }
                    ],
                    40: [
                        function(e, t, r) {
                            var c = e("./zlib/inflate"), d = e("./utils/common"), p = e("./utils/strings"), m = e("./z\
lib/constants"), n = e("./zlib/messages"), i = e("./zlib/zstream"), s = e("./zlib/gzheader"), _ = Object.prototype.toString;
                            function a(e2) {
                                if (!_instanceof(this, a)) return new a(e2);
                                this.options = d.assign({
                                    chunkSize: 16384,
                                    windowBits: 0,
                                    to: ""
                                }, e2 || {});
                                var t2 = this.options;
                                t2.raw && 0 <= t2.windowBits && t2.windowBits < 16 && (t2.windowBits = -t2.windowBits, 0 === t2.windowBits && (t2.windowBits = -15)), !(0 <= t2.windowBits && t2.windowBits < 16) || e2 && e2.windowBits || (t2.windowBits += 32), 15 < t2.windowBits && t2.windowBits < 48 && 0 == (15 & t2.windowBits) && (t2.windowBits |= 15), this.err = 0, this.msg = "", this.ended = !1, this.chunks = [], this.strm = new i(), this.strm.avail_out = 0;
                                var r2 = c.inflateInit2(this.strm, t2.windowBits);
                                if (r2 !== m.Z_OK) throw Error(n[r2]);
                                this.header = new s(), c.inflateGetHeader(this.strm, this.header);
                            }
                            function o2(e2, t2) {
                                var r2 = new a(t2);
                                if (r2.push(e2, !0), r2.err) throw r2.msg || n[r2.err];
                                return r2.result;
                            }
                            __name(a, "a"), __name(o2, "o"), a.prototype.push = function(e2, t2) {
                                var r2, n2, i2, s2, a2, o3, h = this.strm, u = this.options.chunkSize, l = this.options.dictionary, f = !1;
                                if (this.ended) return !1;
                                n2 = t2 === ~~t2 ? t2 : !0 === t2 ? m.Z_FINISH : m.Z_NO_FLUSH, "string" == typeof e2 ? h.input = p.binstring2buf(e2) : "[object ArrayBuffer]" === _.call(e2) ? h.input = new Uint8Array(e2) : h.input = e2, h.next_in = 0, h.avail_in = h.input.length;
                                do {
                                    if (0 === h.avail_out && (h.output = new d.Buf8(u), h.next_out = 0, h.avail_out = u), (r2 = c.inflate(h, m.Z_NO_FLUSH)) === m.Z_NEED_DICT && l && (o3 = "string" == typeof l ? p.string2buf(l) : "[object ArrayBuffer]" === _.call(l) ? new Uint8Array(l) : l, r2 = c.inflateSetDictionary(this.strm, o3)), r2 === m.Z_BUF_ERROR && !0 === f && (r2 = m.Z_OK, f = !1), r2 !== m.Z_STREAM_END && r2 !== m.Z_OK) return this.onEnd(r2), this.ended = !0, !1;
                                    h.next_out && (0 !== h.avail_out && r2 !== m.Z_STREAM_END && (0 !== h.avail_in || n2 !== m.Z_FINISH && n2 !== m.Z_SYNC_FLUSH) || ("string" === this.options.to ? (i2 = p.utf8border(h.output, h.next_out), s2 = h.next_out - i2, a2 = p.buf2string(h.output, i2), h.next_out = s2, h.avail_out = u - s2, s2 && d.arraySet(h.output, h.output, i2, s2, 0), this.onData(a2)) : this.onData(d.shrinkBuf(h.output, h.next_out)))), 0 === h.avail_in && 0 === h.avail_out && (f = !0);
                                }while ((0 < h.avail_in || 0 === h.avail_out) && r2 !== m.Z_STREAM_END);
                                return r2 === m.Z_STREAM_END && (n2 = m.Z_FINISH), n2 === m.Z_FINISH ? (r2 = c.inflateEnd(this.strm), this.onEnd(r2), this.ended = !0, r2 === m.Z_OK) : n2 !== m.Z_SYNC_FLUSH || (this.onEnd(m.Z_OK), h.avail_out = 0, !0);
                            }, a.prototype.onData = function(e2) {
                                this.chunks.push(e2);
                            }, a.prototype.onEnd = function(e2) {
                                e2 === m.Z_OK && ("string" === this.options.to ? this.result = this.chunks.join("") : this.result = d.flattenChunks(this.chunks)), this.chunks = [], this.err = e2, this.msg = this.strm.msg;
                            }, r.Inflate = a, r.inflate = o2, r.inflateRaw = function(e2, t2) {
                                return (t2 = t2 || {}).raw = !0, o2(e2, t2);
                            }, r.ungzip = o2;
                        },
                        {
                            "./utils/common": 41,
                            "./utils/strings": 42,
                            "./zlib/constants": 44,
                            "./zlib/gzheader": 47,
                            "./zlib/inflate": 49,
                            "./zlib/messages": 51,
                            "./zlib/zstream": 53
                        }
                    ],
                    41: [
                        function(e, t, r) {
                            var n = "u" > ("u" < typeof Uint8Array ? "undefined" : _type_of1(Uint8Array)) && "u" > ("u" < typeof Uint16Array ? "undefined" : _type_of1(Uint16Array)) && "u" > ("u" < typeof Int32Array ? "undefined" : _type_of1(Int32Array));
                            r.assign = function(e2) {
                                for(var t2 = Array.prototype.slice.call(arguments, 1); t2.length;){
                                    var r2 = t2.shift();
                                    if (r2) {
                                        if ("object" != (void 0 === r2 ? "undefined" : _type_of(r2))) throw TypeError(r2 + "must be non-object");
                                        for(var n2 in r2)r2.hasOwnProperty(n2) && (e2[n2] = r2[n2]);
                                    }
                                }
                                return e2;
                            }, r.shrinkBuf = function(e2, t2) {
                                return e2.length === t2 ? e2 : e2.subarray ? e2.subarray(0, t2) : (e2.length = t2, e2);
                            };
                            var i = {
                                arraySet: __name(function(e2, t2, r2, n2, i2) {
                                    if (t2.subarray && e2.subarray) e2.set(t2.subarray(r2, r2 + n2), i2);
                                    else for(var s2 = 0; s2 < n2; s2++)e2[i2 + s2] = t2[r2 + s2];
                                }, "arraySet"),
                                flattenChunks: __name(function(e2) {
                                    var t2, r2, n2, i2, s2, a;
                                    for(t2 = n2 = 0, r2 = e2.length; t2 < r2; t2++)n2 += e2[t2].length;
                                    for(a = new Uint8Array(n2), t2 = i2 = 0, r2 = e2.length; t2 < r2; t2++)s2 = e2[t2], a.set(s2, i2), i2 += s2.length;
                                    return a;
                                }, "flattenChunks")
                            }, s = {
                                arraySet: __name(function(e2, t2, r2, n2, i2) {
                                    for(var s2 = 0; s2 < n2; s2++)e2[i2 + s2] = t2[r2 + s2];
                                }, "arraySet"),
                                flattenChunks: __name(function(e2) {
                                    return [].concat.apply([], e2);
                                }, "flattenChunks")
                            };
                            r.setTyped = function(e2) {
                                e2 ? (r.Buf8 = Uint8Array, r.Buf16 = Uint16Array, r.Buf32 = Int32Array, r.assign(r, i)) : (r.Buf8 = Array, r.Buf16 = Array, r.Buf32 = Array, r.assign(r, s));
                            }, r.setTyped(n);
                        },
                        {}
                    ],
                    42: [
                        function(e, t, r) {
                            var h = e("./common"), i = !0, s = !0;
                            try {
                                String.fromCharCode.apply(null, [
                                    0
                                ]);
                            } catch (e2) {
                                i = !1;
                            }
                            try {
                                String.fromCharCode.apply(null, new Uint8Array(1));
                            } catch (e2) {
                                s = !1;
                            }
                            for(var u = new h.Buf8(256), n = 0; n < 256; n++)u[n] = 252 <= n ? 6 : 248 <= n ? 5 : 240 <= n ? 4 : 224 <= n ? 3 : 192 <= n ? 2 : 1;
                            function l(e2, t2) {
                                if (t2 < 65537 && (e2.subarray && s || !e2.subarray && i)) return String.fromCharCode.apply(null, h.shrinkBuf(e2, t2));
                                for(var r2 = "", n2 = 0; n2 < t2; n2++)r2 += String.fromCharCode(e2[n2]);
                                return r2;
                            }
                            __name(l, "l"), u[254] = u[254] = 1, r.string2buf = function(e2) {
                                var t2, r2, n2, i2, s2, a = e2.length, o2 = 0;
                                for(i2 = 0; i2 < a; i2++)55296 == (64512 & (r2 = e2.charCodeAt(i2))) && i2 + 1 < a && 56320 == (64512 & (n2 = e2.charCodeAt(i2 + 1))) && (r2 = 65536 + (r2 - 55296 << 10) + (n2 - 56320), i2++), o2 += r2 < 128 ? 1 : r2 < 2048 ? 2 : r2 < 65536 ? 3 : 4;
                                for(t2 = new h.Buf8(o2), i2 = s2 = 0; s2 < o2; i2++)55296 == (64512 & (r2 = e2.charCodeAt(i2))) && i2 + 1 < a && 56320 == (64512 & (n2 = e2.charCodeAt(i2 + 1))) && (r2 = 65536 + (r2 - 55296 << 10) + (n2 - 56320), i2++), r2 < 128 ? t2[s2++] = r2 : (r2 < 2048 ? t2[s2++] = 192 | r2 >>> 6 : (r2 < 65536 ? t2[s2++] = 224 | r2 >>> 12 : (t2[s2++] = 240 | r2 >>> 18, t2[s2++] = 128 | r2 >>> 12 & 63), t2[s2++] = 128 | r2 >>> 6 & 63), t2[s2++] = 128 | 63 & r2);
                                return t2;
                            }, r.buf2binstring = function(e2) {
                                return l(e2, e2.length);
                            }, r.binstring2buf = function(e2) {
                                for(var t2 = new h.Buf8(e2.length), r2 = 0, n2 = t2.length; r2 < n2; r2++)t2[r2] = e2.charCodeAt(r2);
                                return t2;
                            }, r.buf2string = function(e2, t2) {
                                var r2, n2, i2, s2, a = t2 || e2.length, o2 = Array(2 * a);
                                for(r2 = n2 = 0; r2 < a;)if ((i2 = e2[r2++]) < 128) o2[n2++] = i2;
                                else if (4 < (s2 = u[i2])) o2[n2++] = 65533, r2 += s2 - 1;
                                else {
                                    for(i2 &= 2 === s2 ? 31 : 3 === s2 ? 15 : 7; 1 < s2 && r2 < a;)i2 = i2 << 6 | 63 & e2[r2++], s2--;
                                    1 < s2 ? o2[n2++] = 65533 : i2 < 65536 ? o2[n2++] = i2 : (i2 -= 65536, o2[n2++] = 55296 | i2 >> 10 & 1023, o2[n2++] = 56320 | 1023 & i2);
                                }
                                return l(o2, n2);
                            }, r.utf8border = function(e2, t2) {
                                var r2;
                                for((t2 = t2 || e2.length) > e2.length && (t2 = e2.length), r2 = t2 - 1; 0 <= r2 && 128 == (192 & e2[r2]);)r2--;
                                return r2 < 0 || 0 === r2 ? t2 : r2 + u[e2[r2]] > t2 ? r2 : t2;
                            };
                        },
                        {
                            "./common": 41
                        }
                    ],
                    43: [
                        function(e, t, r) {
                            t.exports = function(e2, t2, r2, n) {
                                for(var i = 65535 & e2, s = e2 >>> 16 & 65535, a = 0; 0 !== r2;){
                                    for(r2 -= a = 2e3 < r2 ? 2e3 : r2; s = s + (i = i + t2[n++] | 0) | 0, --a;);
                                    i %= 65521, s %= 65521;
                                }
                                return i | s << 16;
                            };
                        },
                        {}
                    ],
                    44: [
                        function(e, t, r) {
                            t.exports = {
                                Z_NO_FLUSH: 0,
                                Z_PARTIAL_FLUSH: 1,
                                Z_SYNC_FLUSH: 2,
                                Z_FULL_FLUSH: 3,
                                Z_FINISH: 4,
                                Z_BLOCK: 5,
                                Z_TREES: 6,
                                Z_OK: 0,
                                Z_STREAM_END: 1,
                                Z_NEED_DICT: 2,
                                Z_ERRNO: -1,
                                Z_STREAM_ERROR: -2,
                                Z_DATA_ERROR: -3,
                                Z_BUF_ERROR: -5,
                                Z_NO_COMPRESSION: 0,
                                Z_BEST_SPEED: 1,
                                Z_BEST_COMPRESSION: 9,
                                Z_DEFAULT_COMPRESSION: -1,
                                Z_FILTERED: 1,
                                Z_HUFFMAN_ONLY: 2,
                                Z_RLE: 3,
                                Z_FIXED: 4,
                                Z_DEFAULT_STRATEGY: 0,
                                Z_BINARY: 0,
                                Z_TEXT: 1,
                                Z_UNKNOWN: 2,
                                Z_DEFLATED: 8
                            };
                        },
                        {}
                    ],
                    45: [
                        function(e, t, r) {
                            var o2 = function() {
                                for(var e2, t2 = [], r2 = 0; r2 < 256; r2++){
                                    e2 = r2;
                                    for(var n = 0; n < 8; n++)e2 = 1 & e2 ? 3988292384 ^ e2 >>> 1 : e2 >>> 1;
                                    t2[r2] = e2;
                                }
                                return t2;
                            }();
                            t.exports = function(e2, t2, r2, n) {
                                var i = o2, s = n + r2;
                                e2 ^= -1;
                                for(var a = n; a < s; a++)e2 = e2 >>> 8 ^ i[255 & (e2 ^ t2[a])];
                                return -1 ^ e2;
                            };
                        },
                        {}
                    ],
                    46: [
                        function(e, t, r) {
                            var h, c = e("../utils/common"), u = e("./trees"), d = e("./adler32"), p = e("./crc32"), n = e("./messages"), l = 0, f = 4, m = 0, _ = -2, g = -1, b = 4, i = 2, v = 8, y = 9, s = 286, a = 30, o2 = 19, w = 573, k = 15, x = 3, S9 = 258, z = 262, C = 42, E = 113, A10 = 1, I4 = 2, O33 = 3, B6 = 4;
                            function R(e2, t2) {
                                return e2.msg = n[t2], t2;
                            }
                            function T4(e2) {
                                return (e2 << 1) - 9 * (4 < e2);
                            }
                            function D5(e2) {
                                for(var t2 = e2.length; 0 <= --t2;)e2[t2] = 0;
                            }
                            function F7(e2) {
                                var t2 = e2.state, r2 = t2.pending;
                                r2 > e2.avail_out && (r2 = e2.avail_out), 0 !== r2 && (c.arraySet(e2.output, t2.pending_buf, t2.pending_out, r2, e2.next_out), e2.next_out += r2, t2.pending_out += r2, e2.total_out += r2, e2.avail_out -= r2, t2.pending -= r2, 0 === t2.pending && (t2.pending_out = 0));
                            }
                            function N(e2, t2) {
                                u._tr_flush_block(e2, 0 <= e2.block_start ? e2.block_start : -1, e2.strstart - e2.block_start, t2), e2.block_start = e2.strstart, F7(e2.strm);
                            }
                            function U(e2, t2) {
                                e2.pending_buf[e2.pending++] = t2;
                            }
                            function P(e2, t2) {
                                e2.pending_buf[e2.pending++] = t2 >>> 8 & 255, e2.pending_buf[e2.pending++] = 255 & t2;
                            }
                            function L(e2, t2) {
                                var r2, n2, i2 = e2.max_chain_length, s2 = e2.strstart, a2 = e2.prev_length, o3 = e2.nice_match, h2 = e2.strstart > e2.w_size - z ? e2.strstart - (e2.w_size - z) : 0, u2 = e2.window, l2 = e2.w_mask, f2 = e2.prev, c2 = e2.strstart + S9, d2 = u2[s2 + a2 - 1], p2 = u2[s2 + a2];
                                e2.prev_length >= e2.good_match && (i2 >>= 2), o3 > e2.lookahead && (o3 = e2.lookahead);
                                do if (u2[(r2 = t2) + a2] === p2 && u2[r2 + a2 - 1] === d2 && u2[r2] === u2[s2] && u2[++r2] === u2[s2 + 1]) {
                                    s2 += 2, r2++;
                                    do ;
                                    while (u2[++s2] === u2[++r2] && u2[++s2] === u2[++r2] && u2[++s2] === u2[++r2] && u2[++s2] === u2[++r2] && u2[++s2] === u2[++r2] && u2[++s2] === u2[++r2] && u2[++s2] === u2[++r2] && u2[++s2] === u2[++r2] && s2 < c2);
                                    if (n2 = S9 - (c2 - s2), s2 = c2 - S9, a2 < n2) {
                                        if (e2.match_start = t2, o3 <= (a2 = n2)) break;
                                        d2 = u2[s2 + a2 - 1], p2 = u2[s2 + a2];
                                    }
                                }
                                while ((t2 = f2[t2 & l2]) > h2 && 0 != --i2);
                                return a2 <= e2.lookahead ? a2 : e2.lookahead;
                            }
                            function j(e2) {
                                var t2, r2, n2, i2, s2, a2, o3, h2, u2, l2, f2 = e2.w_size;
                                do {
                                    if (i2 = e2.window_size - e2.lookahead - e2.strstart, e2.strstart >= f2 + (f2 - z)) {
                                        for(c.arraySet(e2.window, e2.window, f2, f2, 0), e2.match_start -= f2, e2.strstart -= f2, e2.block_start -= f2, t2 = r2 = e2.hash_size; n2 = e2.head[--t2], e2.head[t2] = f2 <= n2 ? n2 - f2 : 0, --r2;);
                                        for(t2 = r2 = f2; n2 = e2.prev[--t2], e2.prev[t2] = f2 <= n2 ? n2 - f2 : 0, --r2;);
                                        i2 += f2;
                                    }
                                    if (0 === e2.strm.avail_in) break;
                                    if (a2 = e2.strm, o3 = e2.window, h2 = e2.strstart + e2.lookahead, l2 = void 0, (u2 = i2) < (l2 = a2.avail_in) && (l2 = u2), r2 = 0 === l2 ? 0 : (a2.avail_in -= l2, c.arraySet(o3, a2.input, a2.next_in, l2, h2), 1 === a2.state.wrap ? a2.adler = d(a2.adler, o3, l2, h2) : 2 === a2.state.wrap && (a2.adler = p(a2.adler, o3, l2, h2)), a2.next_in += l2, a2.total_in += l2, l2), e2.lookahead += r2, e2.lookahead + e2.insert >= x) for(s2 = e2.strstart - e2.insert, e2.ins_h = e2.window[s2], e2.ins_h = (e2.ins_h << e2.hash_shift ^ e2.window[s2 + 1]) & e2.hash_mask; e2.insert && (e2.ins_h = (e2.ins_h << e2.hash_shift ^ e2.window[s2 + x - 1]) & e2.hash_mask, e2.prev[s2 & e2.w_mask] = e2.head[e2.ins_h], e2.head[e2.ins_h] = s2, s2++, e2.insert--, !(e2.lookahead + e2.insert < x)););
                                }while (e2.lookahead < z && 0 !== e2.strm.avail_in);
                            }
                            function Z(e2, t2) {
                                for(var r2, n2;;){
                                    if (e2.lookahead < z) {
                                        if (j(e2), e2.lookahead < z && t2 === l) return A10;
                                        if (0 === e2.lookahead) break;
                                    }
                                    if (r2 = 0, e2.lookahead >= x && (e2.ins_h = (e2.ins_h << e2.hash_shift ^ e2.window[e2.strstart + x - 1]) & e2.hash_mask, r2 = e2.prev[e2.strstart & e2.w_mask] = e2.head[e2.ins_h], e2.head[e2.ins_h] = e2.strstart), 0 !== r2 && e2.strstart - r2 <= e2.w_size - z && (e2.match_length = L(e2, r2)), e2.match_length >= x) if (n2 = u._tr_tally(e2, e2.strstart - e2.match_start, e2.match_length - x), e2.lookahead -= e2.match_length, e2.match_length <= e2.max_lazy_match && e2.lookahead >= x) {
                                        for(e2.match_length--; e2.strstart++, e2.ins_h = (e2.ins_h << e2.hash_shift ^ e2.window[e2.strstart + x - 1]) & e2.hash_mask, r2 = e2.prev[e2.strstart & e2.w_mask] = e2.head[e2.ins_h], e2.head[e2.ins_h] = e2.strstart, 0 != --e2.match_length;);
                                        e2.strstart++;
                                    } else e2.strstart += e2.match_length, e2.match_length = 0, e2.ins_h = e2.window[e2.strstart], e2.ins_h = (e2.ins_h << e2.hash_shift ^ e2.window[e2.strstart + 1]) & e2.hash_mask;
                                    else n2 = u._tr_tally(e2, 0, e2.window[e2.strstart]), e2.lookahead--, e2.strstart++;
                                    if (n2 && (N(e2, !1), 0 === e2.strm.avail_out)) return A10;
                                }
                                return e2.insert = e2.strstart < x - 1 ? e2.strstart : x - 1, t2 === f ? (N(e2, !0), 0 === e2.strm.avail_out ? O33 : B6) : e2.last_lit && (N(e2, !1), 0 === e2.strm.avail_out) ? A10 : I4;
                            }
                            function W(e2, t2) {
                                for(var r2, n2, i2;;){
                                    if (e2.lookahead < z) {
                                        if (j(e2), e2.lookahead < z && t2 === l) return A10;
                                        if (0 === e2.lookahead) break;
                                    }
                                    if (r2 = 0, e2.lookahead >= x && (e2.ins_h = (e2.ins_h << e2.hash_shift ^ e2.window[e2.strstart + x - 1]) & e2.hash_mask, r2 = e2.prev[e2.strstart & e2.w_mask] = e2.head[e2.ins_h], e2.head[e2.ins_h] = e2.strstart), e2.prev_length = e2.match_length, e2.prev_match = e2.match_start, e2.match_length = x - 1, 0 !== r2 && e2.prev_length < e2.max_lazy_match && e2.strstart - r2 <= e2.w_size - z && (e2.match_length = L(e2, r2), e2.match_length <= 5 && (1 === e2.strategy || e2.match_length === x && 4096 < e2.strstart - e2.match_start) && (e2.match_length = x - 1)), e2.prev_length >= x && e2.match_length <= e2.prev_length) {
                                        for(i2 = e2.strstart + e2.lookahead - x, n2 = u._tr_tally(e2, e2.strstart - 1 - e2.prev_match, e2.prev_length - x), e2.lookahead -= e2.prev_length - 1, e2.prev_length -= 2; ++e2.strstart <= i2 && (e2.ins_h = (e2.ins_h << e2.hash_shift ^ e2.window[e2.strstart + x - 1]) & e2.hash_mask, r2 = e2.prev[e2.strstart & e2.w_mask] = e2.head[e2.ins_h], e2.head[e2.ins_h] = e2.strstart), 0 != --e2.prev_length;);
                                        if (e2.match_available = 0, e2.match_length = x - 1, e2.strstart++, n2 && (N(e2, !1), 0 === e2.strm.avail_out)) return A10;
                                    } else if (e2.match_available) {
                                        if ((n2 = u._tr_tally(e2, 0, e2.window[e2.strstart - 1])) && N(e2, !1), e2.strstart++, e2.lookahead--, 0 === e2.strm.avail_out) return A10;
                                    } else e2.match_available = 1, e2.strstart++, e2.lookahead--;
                                }
                                return e2.match_available && (n2 = u._tr_tally(e2, 0, e2.window[e2.strstart - 1]), e2.match_available = 0), e2.insert = e2.strstart < x - 1 ? e2.strstart : x - 1, t2 === f ? (N(e2, !0), 0 === e2.strm.avail_out ? O33 : B6) : e2.last_lit && (N(e2, !1), 0 === e2.strm.avail_out) ? A10 : I4;
                            }
                            function M(e2, t2, r2, n2, i2) {
                                this.good_length = e2, this.max_lazy = t2, this.nice_length = r2, this.max_chain = n2, this.func = i2;
                            }
                            function H() {
                                this.strm = null, this.status = 0, this.pending_buf = null, this.pending_buf_size = 0, this.pending_out = 0, this.pending = 0, this.wrap = 0, this.gzhead = null, this.gzindex = 0, this.method = v, this.last_flush = -1, this.w_size = 0, this.w_bits = 0, this.w_mask = 0, this.window = null, this.window_size = 0, this.prev = null, this.head = null, this.ins_h = 0, this.hash_size = 0, this.hash_bits = 0, this.hash_mask = 0, this.hash_shift = 0, this.block_start = 0, this.match_length = 0, this.prev_match = 0, this.match_available = 0, this.strstart = 0, this.match_start = 0, this.lookahead = 0, this.prev_length = 0, this.max_chain_length = 0, this.max_lazy_match = 0, this.level = 0, this.strategy = 0, this.good_match = 0, this.nice_match = 0, this.dyn_ltree = new c.Buf16(2 * w), this.dyn_dtree = new c.Buf16(2 * (2 * a + 1)), this.bl_tree = new c.Buf16(2 * (2 * o2 + 1)), D5(this.dyn_ltree), D5(this.dyn_dtree), D5(this.bl_tree), this.l_desc = null, this.d_desc = null, this.bl_desc = null, this.bl_count = new c.Buf16(k + 1), this.heap = new c.Buf16(2 * s + 1), D5(this.heap), this.heap_len = 0, this.heap_max = 0, this.depth = new c.Buf16(2 * s + 1), D5(this.depth), this.l_buf = 0, this.lit_bufsize = 0, this.last_lit = 0, this.d_buf = 0, this.opt_len = 0, this.static_len = 0, this.matches = 0, this.insert = 0, this.bi_buf = 0, this.bi_valid = 0;
                            }
                            function G(e2) {
                                var t2;
                                return e2 && e2.state ? (e2.total_in = e2.total_out = 0, e2.data_type = i, (t2 = e2.state).pending = 0, t2.pending_out = 0, t2.wrap < 0 && (t2.wrap = -t2.wrap), t2.status = t2.wrap ? C : E, e2.adler = +(2 !== t2.wrap), t2.last_flush = l, u._tr_init(t2), m) : R(e2, _);
                            }
                            function K(e2) {
                                var t2 = G(e2);
                                return t2 === m && function(e3) {
                                    e3.window_size = 2 * e3.w_size, D5(e3.head), e3.max_lazy_match = h[e3.level].max_lazy, e3.good_match = h[e3.level].good_length, e3.nice_match = h[e3.level].nice_length, e3.max_chain_length = h[e3.level].max_chain, e3.strstart = 0, e3.block_start = 0, e3.lookahead = 0, e3.insert = 0, e3.match_length = e3.prev_length = x - 1, e3.match_available = 0, e3.ins_h = 0;
                                }(e2.state), t2;
                            }
                            function Y(e2, t2, r2, n2, i2, s2) {
                                if (!e2) return _;
                                var a2 = 1;
                                if (t2 === g && (t2 = 6), n2 < 0 ? (a2 = 0, n2 = -n2) : 15 < n2 && (a2 = 2, n2 -= 16), i2 < 1 || y < i2 || r2 !== v || n2 < 8 || 15 < n2 || t2 < 0 || 9 < t2 || s2 < 0 || b < s2) return R(e2, _);
                                8 === n2 && (n2 = 9);
                                var o3 = new H();
                                return (e2.state = o3).strm = e2, o3.wrap = a2, o3.gzhead = null, o3.w_bits = n2, o3.w_size = 1 << o3.w_bits, o3.w_mask = o3.w_size - 1, o3.hash_bits = i2 + 7, o3.hash_size = 1 << o3.hash_bits, o3.hash_mask = o3.hash_size - 1, o3.hash_shift = ~~((o3.hash_bits + x - 1) / x), o3.window = new c.Buf8(2 * o3.w_size), o3.head = new c.Buf16(o3.hash_size), o3.prev = new c.Buf16(o3.w_size), o3.lit_bufsize = 1 << i2 + 6, o3.pending_buf_size = 4 * o3.lit_bufsize, o3.pending_buf = new c.Buf8(o3.pending_buf_size), o3.d_buf = +o3.lit_bufsize, o3.l_buf = 3 * o3.lit_bufsize, o3.level = t2, o3.strategy = s2, o3.method = r2, K(e2);
                            }
                            __name(R, "R"), __name(T4, "T"), __name(D5, "D"), __name(F7, "F"), __name(N, "N"), __name(U, "U"), __name(P, "P"), __name(L, "L"), __name(j, "j"), __name(Z, "Z"), __name(W, "W"), __name(M, "M"), __name(H, "H"), __name(G, "G"), __name(K, "K"), __name(Y, "Y"), h = [
                                new M(0, 0, 0, 0, function(e2, t2) {
                                    var r2 = 65535;
                                    for(65535 > e2.pending_buf_size - 5 && (r2 = e2.pending_buf_size - 5);;){
                                        if (e2.lookahead <= 1) {
                                            if (j(e2), 0 === e2.lookahead && t2 === l) return A10;
                                            if (0 === e2.lookahead) break;
                                        }
                                        e2.strstart += e2.lookahead, e2.lookahead = 0;
                                        var n2 = e2.block_start + r2;
                                        if ((0 === e2.strstart || e2.strstart >= n2) && (e2.lookahead = e2.strstart - n2, e2.strstart = n2, N(e2, !1), 0 === e2.strm.avail_out) || e2.strstart - e2.block_start >= e2.w_size - z && (N(e2, !1), 0 === e2.strm.avail_out)) return A10;
                                    }
                                    return e2.insert = 0, t2 === f ? (N(e2, !0), 0 === e2.strm.avail_out ? O33 : B6) : (e2.strstart > e2.block_start && (N(e2, !1), e2.strm.avail_out), A10);
                                }),
                                new M(4, 4, 8, 4, Z),
                                new M(4, 5, 16, 8, Z),
                                new M(4, 6, 32, 32, Z),
                                new M(4, 4, 16, 16, W),
                                new M(8, 16, 32, 32, W),
                                new M(8, 16, 128, 128, W),
                                new M(8, 32, 128, 256, W),
                                new M(32, 128, 258, 1024, W),
                                new M(32, 258, 258, 4096, W)
                            ], r.deflateInit = function(e2, t2) {
                                return Y(e2, t2, v, 15, 8, 0);
                            }, r.deflateInit2 = Y, r.deflateReset = K, r.deflateResetKeep = G, r.deflateSetHeader = function(e2, t2) {
                                return e2 && e2.state ? 2 !== e2.state.wrap ? _ : (e2.state.gzhead = t2, m) : _;
                            }, r.deflate = function(e2, t2) {
                                var r2, n2, i2, s2;
                                if (!e2 || !e2.state || 5 < t2 || t2 < 0) return e2 ? R(e2, _) : _;
                                if (n2 = e2.state, !e2.output || !e2.input && 0 !== e2.avail_in || 666 === n2.status && t2 !== f) return R(e2, 0 === e2.avail_out ? -5 : _);
                                if (n2.strm = e2, r2 = n2.last_flush, n2.last_flush = t2, n2.status === C) if (2 === n2.wrap) e2.adler = 0, U(n2, 31), U(n2, 139), U(n2, 8), n2.gzhead ? (U(n2, +!!n2.gzhead.text + 2 * !!n2.gzhead.hcrc + 4 * !!n2.gzhead.extra + 8 * !!n2.gzhead.name + 16 * !!n2.gzhead.comment), U(n2, 255 & n2.gzhead.time), U(n2, n2.gzhead.time >> 8 & 255), U(n2, n2.gzhead.time >> 16 & 255), U(n2, n2.gzhead.time >> 24 & 255), U(n2, 9 === n2.level ? 2 : 4 * (2 <= n2.strategy || n2.level < 2)), U(n2, 255 & n2.gzhead.os), n2.gzhead.extra && n2.gzhead.extra.length && (U(n2, 255 & n2.gzhead.extra.length), U(n2, n2.gzhead.extra.length >> 8 & 255)), n2.gzhead.hcrc && (e2.adler = p(e2.adler, n2.pending_buf, n2.pending, 0)), n2.gzindex = 0, n2.status = 69) : (U(n2, 0), U(n2, 0), U(n2, 0), U(n2, 0), U(n2, 0), U(n2, 9 === n2.level ? 2 : 4 * (2 <= n2.strategy || n2.level < 2)), U(n2, 3), n2.status = E);
                                else {
                                    var a2 = v + (n2.w_bits - 8 << 4) << 8;
                                    a2 |= (2 <= n2.strategy || n2.level < 2 ? 0 : n2.level < 6 ? 1 : 6 === n2.level ? 2 : 3) << 6, 0 !== n2.strstart && (a2 |= 32), a2 += 31 - a2 % 31, n2.status = E, P(n2, a2), 0 !== n2.strstart && (P(n2, e2.adler >>> 16), P(n2, 65535 & e2.adler)), e2.adler = 1;
                                }
                                if (69 === n2.status) if (n2.gzhead.extra) {
                                    for(i2 = n2.pending; n2.gzindex < (65535 & n2.gzhead.extra.length) && (n2.pending !== n2.pending_buf_size || (n2.gzhead.hcrc && n2.pending > i2 && (e2.adler = p(e2.adler, n2.pending_buf, n2.pending - i2, i2)), F7(e2), i2 = n2.pending, n2.pending !== n2.pending_buf_size));)U(n2, 255 & n2.gzhead.extra[n2.gzindex]), n2.gzindex++;
                                    n2.gzhead.hcrc && n2.pending > i2 && (e2.adler = p(e2.adler, n2.pending_buf, n2.pending - i2, i2)), n2.gzindex === n2.gzhead.extra.length && (n2.gzindex = 0, n2.status = 73);
                                } else n2.status = 73;
                                if (73 === n2.status) if (n2.gzhead.name) {
                                    i2 = n2.pending;
                                    do {
                                        if (n2.pending === n2.pending_buf_size && (n2.gzhead.hcrc && n2.pending > i2 && (e2.adler = p(e2.adler, n2.pending_buf, n2.pending - i2, i2)), F7(e2), i2 = n2.pending, n2.pending === n2.pending_buf_size)) {
                                            s2 = 1;
                                            break;
                                        }
                                        s2 = n2.gzindex < n2.gzhead.name.length ? 255 & n2.gzhead.name.charCodeAt(n2.gzindex++) : 0, U(n2, s2);
                                    }while (0 !== s2);
                                    n2.gzhead.hcrc && n2.pending > i2 && (e2.adler = p(e2.adler, n2.pending_buf, n2.pending - i2, i2)), 0 === s2 && (n2.gzindex = 0, n2.status = 91);
                                } else n2.status = 91;
                                if (91 === n2.status) if (n2.gzhead.comment) {
                                    i2 = n2.pending;
                                    do {
                                        if (n2.pending === n2.pending_buf_size && (n2.gzhead.hcrc && n2.pending > i2 && (e2.adler = p(e2.adler, n2.pending_buf, n2.pending - i2, i2)), F7(e2), i2 = n2.pending, n2.pending === n2.pending_buf_size)) {
                                            s2 = 1;
                                            break;
                                        }
                                        s2 = n2.gzindex < n2.gzhead.comment.length ? 255 & n2.gzhead.comment.charCodeAt(n2.gzindex++) : 0, U(n2, s2);
                                    }while (0 !== s2);
                                    n2.gzhead.hcrc && n2.pending > i2 && (e2.adler = p(e2.adler, n2.pending_buf, n2.pending - i2, i2)), 0 === s2 && (n2.status = 103);
                                } else n2.status = 103;
                                if (103 === n2.status && (n2.gzhead.hcrc ? (n2.pending + 2 > n2.pending_buf_size && F7(e2), n2.pending + 2 <= n2.pending_buf_size && (U(n2, 255 & e2.adler), U(n2, e2.adler >> 8 & 255), e2.adler = 0, n2.status = E)) : n2.status = E), 0 !== n2.pending) {
                                    if (F7(e2), 0 === e2.avail_out) return n2.last_flush = -1, m;
                                } else if (0 === e2.avail_in && T4(t2) <= T4(r2) && t2 !== f) return R(e2, -5);
                                if (666 === n2.status && 0 !== e2.avail_in) return R(e2, -5);
                                if (0 !== e2.avail_in || 0 !== n2.lookahead || t2 !== l && 666 !== n2.status) {
                                    var o3 = 2 === n2.strategy ? function(e3, t3) {
                                        for(var r3;;){
                                            if (0 === e3.lookahead && (j(e3), 0 === e3.lookahead)) {
                                                if (t3 === l) return A10;
                                                break;
                                            }
                                            if (e3.match_length = 0, r3 = u._tr_tally(e3, 0, e3.window[e3.strstart]), e3.lookahead--, e3.strstart++, r3 && (N(e3, !1), 0 === e3.strm.avail_out)) return A10;
                                        }
                                        return e3.insert = 0, t3 === f ? (N(e3, !0), 0 === e3.strm.avail_out ? O33 : B6) : e3.last_lit && (N(e3, !1), 0 === e3.strm.avail_out) ? A10 : I4;
                                    }(n2, t2) : 3 === n2.strategy ? function(e3, t3) {
                                        for(var r3, n3, i3, s3, a3 = e3.window;;){
                                            if (e3.lookahead <= S9) {
                                                if (j(e3), e3.lookahead <= S9 && t3 === l) return A10;
                                                if (0 === e3.lookahead) break;
                                            }
                                            if (e3.match_length = 0, e3.lookahead >= x && 0 < e3.strstart && (n3 = a3[i3 = e3.strstart - 1]) === a3[++i3] && n3 === a3[++i3] && n3 === a3[++i3]) {
                                                s3 = e3.strstart + S9;
                                                do ;
                                                while (n3 === a3[++i3] && n3 === a3[++i3] && n3 === a3[++i3] && n3 === a3[++i3] && n3 === a3[++i3] && n3 === a3[++i3] && n3 === a3[++i3] && n3 === a3[++i3] && i3 < s3);
                                                e3.match_length = S9 - (s3 - i3), e3.match_length > e3.lookahead && (e3.match_length = e3.lookahead);
                                            }
                                            if (e3.match_length >= x ? (r3 = u._tr_tally(e3, 1, e3.match_length - x), e3.lookahead -= e3.match_length, e3.strstart += e3.match_length, e3.match_length = 0) : (r3 = u._tr_tally(e3, 0, e3.window[e3.strstart]), e3.lookahead--, e3.strstart++), r3 && (N(e3, !1), 0 === e3.strm.avail_out)) return A10;
                                        }
                                        return e3.insert = 0, t3 === f ? (N(e3, !0), 0 === e3.strm.avail_out ? O33 : B6) : e3.last_lit && (N(e3, !1), 0 === e3.strm.avail_out) ? A10 : I4;
                                    }(n2, t2) : h[n2.level].func(n2, t2);
                                    if (o3 !== O33 && o3 !== B6 || (n2.status = 666), o3 === A10 || o3 === O33) return 0 === e2.avail_out && (n2.last_flush = -1), m;
                                    if (o3 === I4 && (1 === t2 ? u._tr_align(n2) : 5 !== t2 && (u._tr_stored_block(n2, 0, 0, !1), 3 === t2 && (D5(n2.head), 0 === n2.lookahead && (n2.strstart = 0, n2.block_start = 0, n2.insert = 0))), F7(e2), 0 === e2.avail_out)) return n2.last_flush = -1, m;
                                }
                                return t2 !== f ? m : n2.wrap <= 0 ? 1 : (2 === n2.wrap ? (U(n2, 255 & e2.adler), U(n2, e2.adler >> 8 & 255), U(n2, e2.adler >> 16 & 255), U(n2, e2.adler >> 24 & 255), U(n2, 255 & e2.total_in), U(n2, e2.total_in >> 8 & 255), U(n2, e2.total_in >> 16 & 255), U(n2, e2.total_in >> 24 & 255)) : (P(n2, e2.adler >>> 16), P(n2, 65535 & e2.adler)), F7(e2), 0 < n2.wrap && (n2.wrap = -n2.wrap), 0 !== n2.pending ? m : 1);
                            }, r.deflateEnd = function(e2) {
                                var t2;
                                return e2 && e2.state ? (t2 = e2.state.status) !== C && 69 !== t2 && 73 !== t2 && 91 !== t2 && 103 !== t2 && t2 !== E && 666 !== t2 ? R(e2, _) : (e2.state = null, t2 === E ? R(e2, -3) : m) : _;
                            }, r.deflateSetDictionary = function(e2, t2) {
                                var r2, n2, i2, s2, a2, o3, h2, u2, l2 = t2.length;
                                if (!e2 || !e2.state || 2 === (s2 = (r2 = e2.state).wrap) || 1 === s2 && r2.status !== C || r2.lookahead) return _;
                                for(1 === s2 && (e2.adler = d(e2.adler, t2, l2, 0)), r2.wrap = 0, l2 >= r2.w_size && (0 === s2 && (D5(r2.head), r2.strstart = 0, r2.block_start = 0, r2.insert = 0), u2 = new c.Buf8(r2.w_size), c.arraySet(u2, t2, l2 - r2.w_size, r2.w_size, 0), t2 = u2, l2 = r2.w_size), a2 = e2.avail_in, o3 = e2.next_in, h2 = e2.input, e2.avail_in = l2, e2.next_in = 0, e2.input = t2, j(r2); r2.lookahead >= x;){
                                    for(n2 = r2.strstart, i2 = r2.lookahead - (x - 1); r2.ins_h = (r2.ins_h << r2.hash_shift ^ r2.window[n2 + x - 1]) & r2.hash_mask, r2.prev[n2 & r2.w_mask] = r2.head[r2.ins_h], r2.head[r2.ins_h] = n2, n2++, --i2;);
                                    r2.strstart = n2, r2.lookahead = x - 1, j(r2);
                                }
                                return r2.strstart += r2.lookahead, r2.block_start = r2.strstart, r2.insert = r2.lookahead, r2.lookahead = 0, r2.match_length = r2.prev_length = x - 1, r2.match_available = 0, e2.next_in = o3, e2.input = h2, e2.avail_in = a2, r2.wrap = s2, m;
                            }, r.deflateInfo = "pako deflate (from Nodeca project)";
                        },
                        {
                            "../utils/common": 41,
                            "./adler32": 43,
                            "./crc32": 45,
                            "./messages": 51,
                            "./trees": 52
                        }
                    ],
                    47: [
                        function(e, t, r) {
                            t.exports = function() {
                                this.text = 0, this.time = 0, this.xflags = 0, this.os = 0, this.extra = null, this.extra_len = 0, this.name = "", this.comment = "", this.hcrc = 0, this.done = !1;
                            };
                        },
                        {}
                    ],
                    48: [
                        function(e, t, r) {
                            t.exports = function(e2, t2) {
                                var r2, n, i, s, a, o2, h, u, l, f, c, d, p, m, _, g, b, v, y, w, k, x, S9, z, C;
                                r2 = e2.state, n = e2.next_in, z = e2.input, i = n + (e2.avail_in - 5), s = e2.next_out, C = e2.output, a = s - (t2 - e2.avail_out), o2 = s + (e2.avail_out - 257), h = r2.dmax, u = r2.wsize, l = r2.whave, f = r2.wnext, c = r2.window, d = r2.hold, p = r2.bits, m = r2.lencode, _ = r2.distcode, g = (1 << r2.lenbits) - 1, b = (1 << r2.distbits) - 1;
                                e: do for(p < 15 && (d += z[n++] << p, p += 8, d += z[n++] << p, p += 8), v = m[d & g];;){
                                    if (d >>>= y = v >>> 24, p -= y, 0 == (y = v >>> 16 & 255)) C[s++] = 65535 & v;
                                    else {
                                        if (!(16 & y)) {
                                            if (0 == (64 & y)) {
                                                v = m[(65535 & v) + (d & (1 << y) - 1)];
                                                continue;
                                            }
                                            if (32 & y) {
                                                r2.mode = 12;
                                                break e;
                                            }
                                            e2.msg = "invalid literal/length code", r2.mode = 30;
                                            break e;
                                        }
                                        for(w = 65535 & v, (y &= 15) && (p < y && (d += z[n++] << p, p += 8), w += d & (1 << y) - 1, d >>>= y, p -= y), p < 15 && (d += z[n++] << p, p += 8, d += z[n++] << p, p += 8), v = _[d & b];;){
                                            if (d >>>= y = v >>> 24, p -= y, !(16 & (y = v >>> 16 & 255))) {
                                                if (0 == (64 & y)) {
                                                    v = _[(65535 & v) + (d & (1 << y) - 1)];
                                                    continue;
                                                }
                                                e2.msg = "invalid distance code", r2.mode = 30;
                                                break e;
                                            }
                                            if (k = 65535 & v, p < (y &= 15) && (d += z[n++] << p, (p += 8) < y && (d += z[n++] << p, p += 8)), h < (k += d & (1 << y) - 1)) {
                                                e2.msg = "invalid distance too far back", r2.mode = 30;
                                                break e;
                                            }
                                            if (d >>>= y, p -= y, (y = s - a) < k) {
                                                if (l < (y = k - y) && r2.sane) {
                                                    e2.msg = "invalid distance too far back", r2.mode = 30;
                                                    break e;
                                                }
                                                if (S9 = c, (x = 0) === f) {
                                                    if (x += u - y, y < w) {
                                                        for(w -= y; C[s++] = c[x++], --y;);
                                                        x = s - k, S9 = C;
                                                    }
                                                } else if (f < y) {
                                                    if (x += u + f - y, (y -= f) < w) {
                                                        for(w -= y; C[s++] = c[x++], --y;);
                                                        if (x = 0, f < w) {
                                                            for(w -= y = f; C[s++] = c[x++], --y;);
                                                            x = s - k, S9 = C;
                                                        }
                                                    }
                                                } else if (x += f - y, y < w) {
                                                    for(w -= y; C[s++] = c[x++], --y;);
                                                    x = s - k, S9 = C;
                                                }
                                                for(; 2 < w;)C[s++] = S9[x++], C[s++] = S9[x++], C[s++] = S9[x++], w -= 3;
                                                w && (C[s++] = S9[x++], 1 < w && (C[s++] = S9[x++]));
                                            } else {
                                                for(x = s - k; C[s++] = C[x++], C[s++] = C[x++], C[s++] = C[x++], 2 < (w -= 3););
                                                w && (C[s++] = C[x++], 1 < w && (C[s++] = C[x++]));
                                            }
                                            break;
                                        }
                                    }
                                    break;
                                }
                                while (n < i && s < o2);
                                n -= w = p >> 3, d &= (1 << (p -= w << 3)) - 1, e2.next_in = n, e2.next_out = s, e2.avail_in = n < i ? i - n + 5 : 5 - (n - i), e2.avail_out = s < o2 ? o2 - s + 257 : 257 - (s - o2), r2.hold = d, r2.bits = p;
                            };
                        },
                        {}
                    ],
                    49: [
                        function(e, t, r) {
                            var I4 = e("../utils/common"), O33 = e("./adler32"), B6 = e("./crc32"), R = e("./inffast"), T4 = e("./inftrees"), D5 = 1, F7 = 2, N = 0, U = -2, P = 1, n = 852, i = 592;
                            function L(e2) {
                                return (e2 >>> 24 & 255) + (e2 >>> 8 & 65280) + ((65280 & e2) << 8) + ((255 & e2) << 24);
                            }
                            function s() {
                                this.mode = 0, this.last = !1, this.wrap = 0, this.havedict = !1, this.flags = 0, this.dmax = 0, this.check = 0, this.total = 0, this.head = null, this.wbits = 0, this.wsize = 0, this.whave = 0, this.wnext = 0, this.window = null, this.hold = 0, this.bits = 0, this.length = 0, this.offset = 0, this.extra = 0, this.lencode = null, this.distcode = null, this.lenbits = 0, this.distbits = 0, this.ncode = 0, this.nlen = 0, this.ndist = 0, this.have = 0, this.next = null, this.lens = new I4.Buf16(320), this.work = new I4.Buf16(288), this.lendyn = null, this.distdyn = null, this.sane = 0, this.back = 0, this.was = 0;
                            }
                            function a(e2) {
                                var t2;
                                return e2 && e2.state ? (t2 = e2.state, e2.total_in = e2.total_out = t2.total = 0, e2.msg = "", t2.wrap && (e2.adler = 1 & t2.wrap), t2.mode = P, t2.last = 0, t2.havedict = 0, t2.dmax = 32768, t2.head = null, t2.hold = 0, t2.bits = 0, t2.lencode = t2.lendyn = new I4.Buf32(n), t2.distcode = t2.distdyn = new I4.Buf32(i), t2.sane = 1, t2.back = -1, N) : U;
                            }
                            function o2(e2) {
                                var t2;
                                return e2 && e2.state ? ((t2 = e2.state).wsize = 0, t2.whave = 0, t2.wnext = 0, a(e2)) : U;
                            }
                            function h(e2, t2) {
                                var r2, n2;
                                return e2 && e2.state ? (n2 = e2.state, t2 < 0 ? (r2 = 0, t2 = -t2) : (r2 = 1 + (t2 >> 4), t2 < 48 && (t2 &= 15)), t2 && (t2 < 8 || 15 < t2) ? U : (null !== n2.window && n2.wbits !== t2 && (n2.window = null), n2.wrap = r2, n2.wbits = t2, o2(e2))) : U;
                            }
                            function u(e2, t2) {
                                var r2;
                                return e2 ? ((e2.state = new s()).window = null, (r2 = h(e2, t2)) !== N && (e2.state = null), r2) : U;
                            }
                            __name(L, "L"), __name(s, "s"), __name(a, "a"), __name(o2, "o"), __name(h, "h"), __name(u, "u");
                            var l, f, c = !0;
                            function j(e2) {
                                if (c) {
                                    var t2;
                                    for(l = new I4.Buf32(512), f = new I4.Buf32(32), t2 = 0; t2 < 144;)e2.lens[t2++] = 8;
                                    for(; t2 < 256;)e2.lens[t2++] = 9;
                                    for(; t2 < 280;)e2.lens[t2++] = 7;
                                    for(; t2 < 288;)e2.lens[t2++] = 8;
                                    for(T4(D5, e2.lens, 0, 288, l, 0, e2.work, {
                                        bits: 9
                                    }), t2 = 0; t2 < 32;)e2.lens[t2++] = 5;
                                    T4(F7, e2.lens, 0, 32, f, 0, e2.work, {
                                        bits: 5
                                    }), c = !1;
                                }
                                e2.lencode = l, e2.lenbits = 9, e2.distcode = f, e2.distbits = 5;
                            }
                            function Z(e2, t2, r2, n2) {
                                var i2, s2 = e2.state;
                                return null === s2.window && (s2.wsize = 1 << s2.wbits, s2.wnext = 0, s2.whave = 0, s2.window = new I4.Buf8(s2.wsize)), n2 >= s2.wsize ? (I4.arraySet(s2.window, t2, r2 - s2.wsize, s2.wsize, 0), s2.wnext = 0, s2.whave = s2.wsize) : (n2 < (i2 = s2.wsize - s2.wnext) && (i2 = n2), I4.arraySet(s2.window, t2, r2 - n2, i2, s2.wnext), (n2 -= i2) ? (I4.arraySet(s2.window, t2, r2 - n2, n2, 0), s2.wnext = n2, s2.whave = s2.wsize) : (s2.wnext += i2, s2.wnext === s2.wsize && (s2.wnext = 0), s2.whave < s2.wsize && (s2.whave += i2))), 0;
                            }
                            __name(j, "j"), __name(Z, "Z"), r.inflateReset = o2, r.inflateReset2 = h, r.inflateResetKeep = a, r.inflateInit = function(e2) {
                                return u(e2, 15);
                            }, r.inflateInit2 = u, r.inflate = function(e2, t2) {
                                var r2, n2, i2, s2, a2, o3, h2, u2, l2, f2, c2, d, p, m, _, g, b, v, y, w, k, x, S9, z, C = 0, E = new I4.Buf8(4), A10 = [
                                    16,
                                    17,
                                    18,
                                    0,
                                    8,
                                    7,
                                    9,
                                    6,
                                    10,
                                    5,
                                    11,
                                    4,
                                    12,
                                    3,
                                    13,
                                    2,
                                    14,
                                    1,
                                    15
                                ];
                                if (!e2 || !e2.state || !e2.output || !e2.input && 0 !== e2.avail_in) return U;
                                12 === (r2 = e2.state).mode && (r2.mode = 13), a2 = e2.next_out, i2 = e2.output, h2 = e2.avail_out, s2 = e2.next_in, n2 = e2.input, o3 = e2.avail_in, u2 = r2.hold, l2 = r2.bits, f2 = o3, c2 = h2, x = N;
                                e: for(;;)switch(r2.mode){
                                    case P:
                                        if (0 === r2.wrap) {
                                            r2.mode = 13;
                                            break;
                                        }
                                        for(; l2 < 16;){
                                            if (0 === o3) break e;
                                            o3--, u2 += n2[s2++] << l2, l2 += 8;
                                        }
                                        if (2 & r2.wrap && 35615 === u2) {
                                            E[r2.check = 0] = 255 & u2, E[1] = u2 >>> 8 & 255, r2.check = B6(r2.check, E, 2, 0), l2 = u2 = 0, r2.mode = 2;
                                            break;
                                        }
                                        if (r2.flags = 0, r2.head && (r2.head.done = !1), !(1 & r2.wrap) || (((255 & u2) << 8) + (u2 >> 8)) % 31) {
                                            e2.msg = "incorrect header check", r2.mode = 30;
                                            break;
                                        }
                                        if (8 != (15 & u2)) {
                                            e2.msg = "unknown compression method", r2.mode = 30;
                                            break;
                                        }
                                        if (l2 -= 4, k = 8 + (15 & (u2 >>>= 4)), 0 === r2.wbits) r2.wbits = k;
                                        else if (k > r2.wbits) {
                                            e2.msg = "invalid window size", r2.mode = 30;
                                            break;
                                        }
                                        r2.dmax = 1 << k, e2.adler = r2.check = 1, r2.mode = 512 & u2 ? 10 : 12, l2 = u2 = 0;
                                        break;
                                    case 2:
                                        for(; l2 < 16;){
                                            if (0 === o3) break e;
                                            o3--, u2 += n2[s2++] << l2, l2 += 8;
                                        }
                                        if (r2.flags = u2, 8 != (255 & r2.flags)) {
                                            e2.msg = "unknown compression method", r2.mode = 30;
                                            break;
                                        }
                                        if (57344 & r2.flags) {
                                            e2.msg = "unknown header flags set", r2.mode = 30;
                                            break;
                                        }
                                        r2.head && (r2.head.text = u2 >> 8 & 1), 512 & r2.flags && (E[0] = 255 & u2, E[1] = u2 >>> 8 & 255, r2.check = B6(r2.check, E, 2, 0)), l2 = u2 = 0, r2.mode = 3;
                                    case 3:
                                        for(; l2 < 32;){
                                            if (0 === o3) break e;
                                            o3--, u2 += n2[s2++] << l2, l2 += 8;
                                        }
                                        r2.head && (r2.head.time = u2), 512 & r2.flags && (E[0] = 255 & u2, E[1] = u2 >>> 8 & 255, E[2] = u2 >>> 16 & 255, E[3] = u2 >>> 24 & 255, r2.check = B6(r2.check, E, 4, 0)), l2 = u2 = 0, r2.mode = 4;
                                    case 4:
                                        for(; l2 < 16;){
                                            if (0 === o3) break e;
                                            o3--, u2 += n2[s2++] << l2, l2 += 8;
                                        }
                                        r2.head && (r2.head.xflags = 255 & u2, r2.head.os = u2 >> 8), 512 & r2.flags && (E[0] = 255 & u2, E[1] = u2 >>> 8 & 255, r2.check = B6(r2.check, E, 2, 0)), l2 = u2 = 0, r2.mode = 5;
                                    case 5:
                                        if (1024 & r2.flags) {
                                            for(; l2 < 16;){
                                                if (0 === o3) break e;
                                                o3--, u2 += n2[s2++] << l2, l2 += 8;
                                            }
                                            r2.length = u2, r2.head && (r2.head.extra_len = u2), 512 & r2.flags && (E[0] = 255 & u2, E[1] = u2 >>> 8 & 255, r2.check = B6(r2.check, E, 2, 0)), l2 = u2 = 0;
                                        } else r2.head && (r2.head.extra = null);
                                        r2.mode = 6;
                                    case 6:
                                        if (1024 & r2.flags && (o3 < (d = r2.length) && (d = o3), d && (r2.head && (k = r2.head.extra_len - r2.length, r2.head.extra || (r2.head.extra = Array(r2.head.extra_len)), I4.arraySet(r2.head.extra, n2, s2, d, k)), 512 & r2.flags && (r2.check = B6(r2.check, n2, d, s2)), o3 -= d, s2 += d, r2.length -= d), r2.length)) break e;
                                        r2.length = 0, r2.mode = 7;
                                    case 7:
                                        if (2048 & r2.flags) {
                                            if (0 === o3) break e;
                                            for(d = 0; k = n2[s2 + d++], r2.head && k && r2.length < 65536 && (r2.head.name += String.fromCharCode(k)), k && d < o3;);
                                            if (512 & r2.flags && (r2.check = B6(r2.check, n2, d, s2)), o3 -= d, s2 += d, k) break e;
                                        } else r2.head && (r2.head.name = null);
                                        r2.length = 0, r2.mode = 8;
                                    case 8:
                                        if (4096 & r2.flags) {
                                            if (0 === o3) break e;
                                            for(d = 0; k = n2[s2 + d++], r2.head && k && r2.length < 65536 && (r2.head.comment += String.fromCharCode(k)), k && d < o3;);
                                            if (512 & r2.flags && (r2.check = B6(r2.check, n2, d, s2)), o3 -= d, s2 += d, k) break e;
                                        } else r2.head && (r2.head.comment = null);
                                        r2.mode = 9;
                                    case 9:
                                        if (512 & r2.flags) {
                                            for(; l2 < 16;){
                                                if (0 === o3) break e;
                                                o3--, u2 += n2[s2++] << l2, l2 += 8;
                                            }
                                            if (u2 !== (65535 & r2.check)) {
                                                e2.msg = "header crc mismatch", r2.mode = 30;
                                                break;
                                            }
                                            l2 = u2 = 0;
                                        }
                                        r2.head && (r2.head.hcrc = r2.flags >> 9 & 1, r2.head.done = !0), e2.adler = r2.check = 0, r2.mode = 12;
                                        break;
                                    case 10:
                                        for(; l2 < 32;){
                                            if (0 === o3) break e;
                                            o3--, u2 += n2[s2++] << l2, l2 += 8;
                                        }
                                        e2.adler = r2.check = L(u2), l2 = u2 = 0, r2.mode = 11;
                                    case 11:
                                        if (0 === r2.havedict) return e2.next_out = a2, e2.avail_out = h2, e2.next_in = s2, e2.avail_in = o3, r2.hold = u2, r2.bits = l2, 2;
                                        e2.adler = r2.check = 1, r2.mode = 12;
                                    case 12:
                                        if (5 === t2 || 6 === t2) break e;
                                    case 13:
                                        if (r2.last) {
                                            u2 >>>= 7 & l2, l2 -= 7 & l2, r2.mode = 27;
                                            break;
                                        }
                                        for(; l2 < 3;){
                                            if (0 === o3) break e;
                                            o3--, u2 += n2[s2++] << l2, l2 += 8;
                                        }
                                        switch(r2.last = 1 & u2, l2 -= 1, 3 & (u2 >>>= 1)){
                                            case 0:
                                                r2.mode = 14;
                                                break;
                                            case 1:
                                                if (j(r2), r2.mode = 20, 6 !== t2) break;
                                                u2 >>>= 2, l2 -= 2;
                                                break e;
                                            case 2:
                                                r2.mode = 17;
                                                break;
                                            case 3:
                                                e2.msg = "invalid block type", r2.mode = 30;
                                        }
                                        u2 >>>= 2, l2 -= 2;
                                        break;
                                    case 14:
                                        for(u2 >>>= 7 & l2, l2 -= 7 & l2; l2 < 32;){
                                            if (0 === o3) break e;
                                            o3--, u2 += n2[s2++] << l2, l2 += 8;
                                        }
                                        if ((65535 & u2) != (u2 >>> 16 ^ 65535)) {
                                            e2.msg = "invalid stored block lengths", r2.mode = 30;
                                            break;
                                        }
                                        if (r2.length = 65535 & u2, l2 = u2 = 0, r2.mode = 15, 6 === t2) break e;
                                    case 15:
                                        r2.mode = 16;
                                    case 16:
                                        if (d = r2.length) {
                                            if (o3 < d && (d = o3), h2 < d && (d = h2), 0 === d) break e;
                                            I4.arraySet(i2, n2, s2, d, a2), o3 -= d, s2 += d, h2 -= d, a2 += d, r2.length -= d;
                                            break;
                                        }
                                        r2.mode = 12;
                                        break;
                                    case 17:
                                        for(; l2 < 14;){
                                            if (0 === o3) break e;
                                            o3--, u2 += n2[s2++] << l2, l2 += 8;
                                        }
                                        if (r2.nlen = 257 + (31 & u2), l2 -= 5, r2.ndist = 1 + (31 & (u2 >>>= 5)), l2 -= 5, r2.ncode = 4 + (15 & (u2 >>>= 5)), u2 >>>= 4, l2 -= 4, 286 < r2.nlen || 30 < r2.ndist) {
                                            e2.msg = "too many length or distance symbols", r2.mode = 30;
                                            break;
                                        }
                                        r2.have = 0, r2.mode = 18;
                                    case 18:
                                        for(; r2.have < r2.ncode;){
                                            for(; l2 < 3;){
                                                if (0 === o3) break e;
                                                o3--, u2 += n2[s2++] << l2, l2 += 8;
                                            }
                                            r2.lens[A10[r2.have++]] = 7 & u2, u2 >>>= 3, l2 -= 3;
                                        }
                                        for(; r2.have < 19;)r2.lens[A10[r2.have++]] = 0;
                                        if (r2.lencode = r2.lendyn, r2.lenbits = 7, S9 = {
                                            bits: r2.lenbits
                                        }, x = T4(0, r2.lens, 0, 19, r2.lencode, 0, r2.work, S9), r2.lenbits = S9.bits, x) {
                                            e2.msg = "invalid code lengths set", r2.mode = 30;
                                            break;
                                        }
                                        r2.have = 0, r2.mode = 19;
                                    case 19:
                                        for(; r2.have < r2.nlen + r2.ndist;){
                                            for(; g = (C = r2.lencode[u2 & (1 << r2.lenbits) - 1]) >>> 16 & 255, b = 65535 & C, !((_ = C >>> 24) <= l2);){
                                                if (0 === o3) break e;
                                                o3--, u2 += n2[s2++] << l2, l2 += 8;
                                            }
                                            if (b < 16) u2 >>>= _, l2 -= _, r2.lens[r2.have++] = b;
                                            else {
                                                if (16 === b) {
                                                    for(z = _ + 2; l2 < z;){
                                                        if (0 === o3) break e;
                                                        o3--, u2 += n2[s2++] << l2, l2 += 8;
                                                    }
                                                    if (u2 >>>= _, l2 -= _, 0 === r2.have) {
                                                        e2.msg = "invalid bit length repeat", r2.mode = 30;
                                                        break;
                                                    }
                                                    k = r2.lens[r2.have - 1], d = 3 + (3 & u2), u2 >>>= 2, l2 -= 2;
                                                } else if (17 === b) {
                                                    for(z = _ + 3; l2 < z;){
                                                        if (0 === o3) break e;
                                                        o3--, u2 += n2[s2++] << l2, l2 += 8;
                                                    }
                                                    l2 -= _, k = 0, d = 3 + (7 & (u2 >>>= _)), u2 >>>= 3, l2 -= 3;
                                                } else {
                                                    for(z = _ + 7; l2 < z;){
                                                        if (0 === o3) break e;
                                                        o3--, u2 += n2[s2++] << l2, l2 += 8;
                                                    }
                                                    l2 -= _, k = 0, d = 11 + (127 & (u2 >>>= _)), u2 >>>= 7, l2 -= 7;
                                                }
                                                if (r2.have + d > r2.nlen + r2.ndist) {
                                                    e2.msg = "invalid bit length repeat", r2.mode = 30;
                                                    break;
                                                }
                                                for(; d--;)r2.lens[r2.have++] = k;
                                            }
                                        }
                                        if (30 === r2.mode) break;
                                        if (0 === r2.lens[256]) {
                                            e2.msg = "invalid code -- missing end-of-block", r2.mode = 30;
                                            break;
                                        }
                                        if (r2.lenbits = 9, S9 = {
                                            bits: r2.lenbits
                                        }, x = T4(D5, r2.lens, 0, r2.nlen, r2.lencode, 0, r2.work, S9), r2.lenbits = S9.bits, x) {
                                            e2.msg = "invalid literal/lengths set", r2.mode = 30;
                                            break;
                                        }
                                        if (r2.distbits = 6, r2.distcode = r2.distdyn, S9 = {
                                            bits: r2.distbits
                                        }, x = T4(F7, r2.lens, r2.nlen, r2.ndist, r2.distcode, 0, r2.work, S9), r2.distbits = S9.bits, x) {
                                            e2.msg = "invalid distances set", r2.mode = 30;
                                            break;
                                        }
                                        if (r2.mode = 20, 6 === t2) break e;
                                    case 20:
                                        r2.mode = 21;
                                    case 21:
                                        if (6 <= o3 && 258 <= h2) {
                                            e2.next_out = a2, e2.avail_out = h2, e2.next_in = s2, e2.avail_in = o3, r2.hold = u2, r2.bits = l2, R(e2, c2), a2 = e2.next_out, i2 = e2.output, h2 = e2.avail_out, s2 = e2.next_in, n2 = e2.input, o3 = e2.avail_in, u2 = r2.hold, l2 = r2.bits, 12 === r2.mode && (r2.back = -1);
                                            break;
                                        }
                                        for(r2.back = 0; g = (C = r2.lencode[u2 & (1 << r2.lenbits) - 1]) >>> 16 & 255, b = 65535 & C, !((_ = C >>> 24) <= l2);){
                                            if (0 === o3) break e;
                                            o3--, u2 += n2[s2++] << l2, l2 += 8;
                                        }
                                        if (g && 0 == (240 & g)) {
                                            for(v = _, y = g, w = b; g = (C = r2.lencode[w + ((u2 & (1 << v + y) - 1) >> v)]) >>> 16 & 255, b = 65535 & C, !(v + (_ = C >>> 24) <= l2);){
                                                if (0 === o3) break e;
                                                o3--, u2 += n2[s2++] << l2, l2 += 8;
                                            }
                                            u2 >>>= v, l2 -= v, r2.back += v;
                                        }
                                        if (u2 >>>= _, l2 -= _, r2.back += _, r2.length = b, 0 === g) {
                                            r2.mode = 26;
                                            break;
                                        }
                                        if (32 & g) {
                                            r2.back = -1, r2.mode = 12;
                                            break;
                                        }
                                        if (64 & g) {
                                            e2.msg = "invalid literal/length code", r2.mode = 30;
                                            break;
                                        }
                                        r2.extra = 15 & g, r2.mode = 22;
                                    case 22:
                                        if (r2.extra) {
                                            for(z = r2.extra; l2 < z;){
                                                if (0 === o3) break e;
                                                o3--, u2 += n2[s2++] << l2, l2 += 8;
                                            }
                                            r2.length += u2 & (1 << r2.extra) - 1, u2 >>>= r2.extra, l2 -= r2.extra, r2.back += r2.extra;
                                        }
                                        r2.was = r2.length, r2.mode = 23;
                                    case 23:
                                        for(; g = (C = r2.distcode[u2 & (1 << r2.distbits) - 1]) >>> 16 & 255, b = 65535 & C, !((_ = C >>> 24) <= l2);){
                                            if (0 === o3) break e;
                                            o3--, u2 += n2[s2++] << l2, l2 += 8;
                                        }
                                        if (0 == (240 & g)) {
                                            for(v = _, y = g, w = b; g = (C = r2.distcode[w + ((u2 & (1 << v + y) - 1) >> v)]) >>> 16 & 255, b = 65535 & C, !(v + (_ = C >>> 24) <= l2);){
                                                if (0 === o3) break e;
                                                o3--, u2 += n2[s2++] << l2, l2 += 8;
                                            }
                                            u2 >>>= v, l2 -= v, r2.back += v;
                                        }
                                        if (u2 >>>= _, l2 -= _, r2.back += _, 64 & g) {
                                            e2.msg = "invalid distance code", r2.mode = 30;
                                            break;
                                        }
                                        r2.offset = b, r2.extra = 15 & g, r2.mode = 24;
                                    case 24:
                                        if (r2.extra) {
                                            for(z = r2.extra; l2 < z;){
                                                if (0 === o3) break e;
                                                o3--, u2 += n2[s2++] << l2, l2 += 8;
                                            }
                                            r2.offset += u2 & (1 << r2.extra) - 1, u2 >>>= r2.extra, l2 -= r2.extra, r2.back += r2.extra;
                                        }
                                        if (r2.offset > r2.dmax) {
                                            e2.msg = "invalid distance too far back", r2.mode = 30;
                                            break;
                                        }
                                        r2.mode = 25;
                                    case 25:
                                        if (0 === h2) break e;
                                        if (d = c2 - h2, r2.offset > d) {
                                            if ((d = r2.offset - d) > r2.whave && r2.sane) {
                                                e2.msg = "invalid distance too far back", r2.mode = 30;
                                                break;
                                            }
                                            p = d > r2.wnext ? (d -= r2.wnext, r2.wsize - d) : r2.wnext - d, d > r2.length && (d = r2.length), m = r2.window;
                                        } else m = i2, p = a2 - r2.offset, d = r2.length;
                                        for(h2 < d && (d = h2), h2 -= d, r2.length -= d; i2[a2++] = m[p++], --d;);
                                        0 === r2.length && (r2.mode = 21);
                                        break;
                                    case 26:
                                        if (0 === h2) break e;
                                        i2[a2++] = r2.length, h2--, r2.mode = 21;
                                        break;
                                    case 27:
                                        if (r2.wrap) {
                                            for(; l2 < 32;){
                                                if (0 === o3) break e;
                                                o3--, u2 |= n2[s2++] << l2, l2 += 8;
                                            }
                                            if (c2 -= h2, e2.total_out += c2, r2.total += c2, c2 && (e2.adler = r2.check = r2.flags ? B6(r2.check, i2, c2, a2 - c2) : O33(r2.check, i2, c2, a2 - c2)), c2 = h2, (r2.flags ? u2 : L(u2)) !== r2.check) {
                                                e2.msg = "incorrect data check", r2.mode = 30;
                                                break;
                                            }
                                            l2 = u2 = 0;
                                        }
                                        r2.mode = 28;
                                    case 28:
                                        if (r2.wrap && r2.flags) {
                                            for(; l2 < 32;){
                                                if (0 === o3) break e;
                                                o3--, u2 += n2[s2++] << l2, l2 += 8;
                                            }
                                            if (u2 !== (0 | r2.total)) {
                                                e2.msg = "incorrect length check", r2.mode = 30;
                                                break;
                                            }
                                            l2 = u2 = 0;
                                        }
                                        r2.mode = 29;
                                    case 29:
                                        x = 1;
                                        break e;
                                    case 30:
                                        x = -3;
                                        break e;
                                    case 31:
                                        return -4;
                                    default:
                                        return U;
                                }
                                return e2.next_out = a2, e2.avail_out = h2, e2.next_in = s2, e2.avail_in = o3, r2.hold = u2, r2.bits = l2, (r2.wsize || c2 !== e2.avail_out && r2.mode < 30 && (r2.mode < 27 || 4 !== t2)) && Z(e2, e2.output, e2.next_out, c2 - e2.avail_out) ? (r2.mode = 31, -4) : (f2 -= e2.avail_in, c2 -= e2.avail_out, e2.total_in += f2, e2.total_out += c2, r2.total += c2, r2.wrap && c2 && (e2.adler = r2.check = r2.flags ? B6(r2.check, i2, c2, e2.next_out - c2) : O33(r2.check, i2, c2, e2.next_out - c2)), e2.data_type = r2.bits + 64 * !!r2.last + 128 * (12 === r2.mode) + 256 * (20 === r2.mode || 15 === r2.mode), (0 == f2 && 0 === c2 || 4 === t2) && x === N && (x = -5), x);
                            }, r.inflateEnd = function(e2) {
                                if (!e2 || !e2.state) return U;
                                var t2 = e2.state;
                                return t2.window && (t2.window = null), e2.state = null, N;
                            }, r.inflateGetHeader = function(e2, t2) {
                                var r2;
                                return e2 && e2.state ? 0 == (2 & (r2 = e2.state).wrap) ? U : ((r2.head = t2).done = !1, N) : U;
                            }, r.inflateSetDictionary = function(e2, t2) {
                                var r2, n2 = t2.length;
                                return e2 && e2.state ? 0 !== (r2 = e2.state).wrap && 11 !== r2.mode ? U : 11 === r2.mode && O33(1, t2, n2, 0) !== r2.check ? -3 : Z(e2, t2, n2, n2) ? (r2.mode = 31, -4) : (r2.havedict = 1, N) : U;
                            }, r.inflateInfo = "pako inflate (from Nodeca project)";
                        },
                        {
                            "../utils/common": 41,
                            "./adler32": 43,
                            "./crc32": 45,
                            "./inffast": 48,
                            "./inftrees": 50
                        }
                    ],
                    50: [
                        function(e, t, r) {
                            var D5 = e("../utils/common"), F7 = [
                                3,
                                4,
                                5,
                                6,
                                7,
                                8,
                                9,
                                10,
                                11,
                                13,
                                15,
                                17,
                                19,
                                23,
                                27,
                                31,
                                35,
                                43,
                                51,
                                59,
                                67,
                                83,
                                99,
                                115,
                                131,
                                163,
                                195,
                                227,
                                258,
                                0,
                                0
                            ], N = [
                                16,
                                16,
                                16,
                                16,
                                16,
                                16,
                                16,
                                16,
                                17,
                                17,
                                17,
                                17,
                                18,
                                18,
                                18,
                                18,
                                19,
                                19,
                                19,
                                19,
                                20,
                                20,
                                20,
                                20,
                                21,
                                21,
                                21,
                                21,
                                16,
                                72,
                                78
                            ], U = [
                                1,
                                2,
                                3,
                                4,
                                5,
                                7,
                                9,
                                13,
                                17,
                                25,
                                33,
                                49,
                                65,
                                97,
                                129,
                                193,
                                257,
                                385,
                                513,
                                769,
                                1025,
                                1537,
                                2049,
                                3073,
                                4097,
                                6145,
                                8193,
                                12289,
                                16385,
                                24577,
                                0,
                                0
                            ], P = [
                                16,
                                16,
                                16,
                                16,
                                17,
                                17,
                                18,
                                18,
                                19,
                                19,
                                20,
                                20,
                                21,
                                21,
                                22,
                                22,
                                23,
                                23,
                                24,
                                24,
                                25,
                                25,
                                26,
                                26,
                                27,
                                27,
                                28,
                                28,
                                29,
                                29,
                                64,
                                64
                            ];
                            t.exports = function(e2, t2, r2, n, i, s, a, o2) {
                                var h, u, l, f, c, d, p, m, _, g = o2.bits, b = 0, v = 0, y = 0, w = 0, k = 0, x = 0, S9 = 0, z = 0, C = 0, E = 0, A10 = null, I4 = 0, O33 = new D5.Buf16(16), B6 = new D5.Buf16(16), R = null, T4 = 0;
                                for(b = 0; b <= 15; b++)O33[b] = 0;
                                for(v = 0; v < n; v++)O33[t2[r2 + v]]++;
                                for(k = g, w = 15; 1 <= w && 0 === O33[w]; w--);
                                if (w < k && (k = w), 0 === w) return i[s++] = 20971520, i[s++] = 20971520, o2.bits = 1, 0;
                                for(y = 1; y < w && 0 === O33[y]; y++);
                                for(k < y && (k = y), b = z = 1; b <= 15; b++)if (z <<= 1, (z -= O33[b]) < 0) return -1;
                                if (0 < z && (0 === e2 || 1 !== w)) return -1;
                                for(B6[1] = 0, b = 1; b < 15; b++)B6[b + 1] = B6[b] + O33[b];
                                for(v = 0; v < n; v++)0 !== t2[r2 + v] && (a[B6[t2[r2 + v]]++] = v);
                                if (d = 0 === e2 ? (A10 = R = a, 19) : 1 === e2 ? (A10 = F7, I4 -= 257, R = N, T4 -= 257, 256) : (A10 = U, R = P, -1), b = y, c = s, S9 = v = E = 0, l = -1, f = (C = 1 << (x = k)) - 1, 1 === e2 && 852 < C || 2 === e2 && 592 < C) return 1;
                                for(;;){
                                    for(p = b - S9, _ = a[v] < d ? (m = 0, a[v]) : a[v] > d ? (m = R[T4 + a[v]], A10[I4 + a[v]]) : (m = 96, 0), h = 1 << b - S9, y = u = 1 << x; i[c + (E >> S9) + (u -= h)] = p << 24 | m << 16 | _, 0 !== u;);
                                    for(h = 1 << b - 1; E & h;)h >>= 1;
                                    if (0 !== h ? (E &= h - 1, E += h) : E = 0, v++, 0 == --O33[b]) {
                                        if (b === w) break;
                                        b = t2[r2 + a[v]];
                                    }
                                    if (k < b && (E & f) !== l) {
                                        for(0 === S9 && (S9 = k), c += y, z = 1 << (x = b - S9); x + S9 < w && !((z -= O33[x + S9]) <= 0);)x++, z <<= 1;
                                        if (C += 1 << x, 1 === e2 && 852 < C || 2 === e2 && 592 < C) return 1;
                                        i[l = E & f] = k << 24 | x << 16 | c - s;
                                    }
                                }
                                return 0 !== E && (i[c + E] = b - S9 << 24 | 4194304), o2.bits = k, 0;
                            };
                        },
                        {
                            "../utils/common": 41
                        }
                    ],
                    51: [
                        function(e, t, r) {
                            t.exports = {
                                2: "need dictionary",
                                1: "stream end",
                                0: "",
                                "-1": "file error",
                                "-2": "str\
eam error",
                                "-3": "data error",
                                "-4": "insufficient memory",
                                "-5": "buffer error",
                                "-6": "incompatib\
le version"
                            };
                        },
                        {}
                    ],
                    52: [
                        function(e, t, r) {
                            var i = e("../utils/common"), o2 = 0, h = 1;
                            function n(e2) {
                                for(var t2 = e2.length; 0 <= --t2;)e2[t2] = 0;
                            }
                            __name(n, "n");
                            var s = 0, a = 29, u = 256, l = 286, f = 30, c = 19, _ = 573, g = 15, d = 16, p = 7, m = 256, b = 16, v = 17, y = 18, w = [
                                0,
                                0,
                                0,
                                0,
                                0,
                                0,
                                0,
                                0,
                                1,
                                1,
                                1,
                                1,
                                2,
                                2,
                                2,
                                2,
                                3,
                                3,
                                3,
                                3,
                                4,
                                4,
                                4,
                                4,
                                5,
                                5,
                                5,
                                5,
                                0
                            ], k = [
                                0,
                                0,
                                0,
                                0,
                                1,
                                1,
                                2,
                                2,
                                3,
                                3,
                                4,
                                4,
                                5,
                                5,
                                6,
                                6,
                                7,
                                7,
                                8,
                                8,
                                9,
                                9,
                                10,
                                10,
                                11,
                                11,
                                12,
                                12,
                                13,
                                13
                            ], x = [
                                0,
                                0,
                                0,
                                0,
                                0,
                                0,
                                0,
                                0,
                                0,
                                0,
                                0,
                                0,
                                0,
                                0,
                                0,
                                0,
                                2,
                                3,
                                7
                            ], S9 = [
                                16,
                                17,
                                18,
                                0,
                                8,
                                7,
                                9,
                                6,
                                10,
                                5,
                                11,
                                4,
                                12,
                                3,
                                13,
                                2,
                                14,
                                1,
                                15
                            ], z = Array(576);
                            n(z);
                            var C = Array(2 * f);
                            n(C);
                            var E = Array(512);
                            n(E);
                            var A10 = Array(256);
                            n(A10);
                            var I4 = Array(a);
                            n(I4);
                            var O33, B6, R, T4 = Array(f);
                            function D5(e2, t2, r2, n2, i2) {
                                this.static_tree = e2, this.extra_bits = t2, this.extra_base = r2, this.elems = n2, this.max_length = i2, this.has_stree = e2 && e2.length;
                            }
                            function F7(e2, t2) {
                                this.dyn_tree = e2, this.max_code = 0, this.stat_desc = t2;
                            }
                            function N(e2) {
                                return e2 < 256 ? E[e2] : E[256 + (e2 >>> 7)];
                            }
                            function U(e2, t2) {
                                e2.pending_buf[e2.pending++] = 255 & t2, e2.pending_buf[e2.pending++] = t2 >>> 8 & 255;
                            }
                            function P(e2, t2, r2) {
                                e2.bi_valid > d - r2 ? (e2.bi_buf |= t2 << e2.bi_valid & 65535, U(e2, e2.bi_buf), e2.bi_buf = t2 >> d - e2.bi_valid, e2.bi_valid += r2 - d) : (e2.bi_buf |= t2 << e2.bi_valid & 65535, e2.bi_valid += r2);
                            }
                            function L(e2, t2, r2) {
                                P(e2, r2[2 * t2], r2[2 * t2 + 1]);
                            }
                            function j(e2, t2) {
                                for(var r2 = 0; r2 |= 1 & e2, e2 >>>= 1, r2 <<= 1, 0 < --t2;);
                                return r2 >>> 1;
                            }
                            function Z(e2, t2, r2) {
                                var n2, i2, s2 = Array(g + 1), a2 = 0;
                                for(n2 = 1; n2 <= g; n2++)s2[n2] = a2 = a2 + r2[n2 - 1] << 1;
                                for(i2 = 0; i2 <= t2; i2++){
                                    var o3 = e2[2 * i2 + 1];
                                    0 !== o3 && (e2[2 * i2] = j(s2[o3]++, o3));
                                }
                            }
                            function W(e2) {
                                var t2;
                                for(t2 = 0; t2 < l; t2++)e2.dyn_ltree[2 * t2] = 0;
                                for(t2 = 0; t2 < f; t2++)e2.dyn_dtree[2 * t2] = 0;
                                for(t2 = 0; t2 < c; t2++)e2.bl_tree[2 * t2] = 0;
                                e2.dyn_ltree[2 * m] = 1, e2.opt_len = e2.static_len = 0, e2.last_lit = e2.matches = 0;
                            }
                            function M(e2) {
                                8 < e2.bi_valid ? U(e2, e2.bi_buf) : 0 < e2.bi_valid && (e2.pending_buf[e2.pending++] = e2.bi_buf), e2.bi_buf = 0, e2.bi_valid = 0;
                            }
                            function H(e2, t2, r2, n2) {
                                var i2 = 2 * t2, s2 = 2 * r2;
                                return e2[i2] < e2[s2] || e2[i2] === e2[s2] && n2[t2] <= n2[r2];
                            }
                            function G(e2, t2, r2) {
                                for(var n2 = e2.heap[r2], i2 = r2 << 1; i2 <= e2.heap_len && (i2 < e2.heap_len && H(t2, e2.heap[i2 + 1], e2.heap[i2], e2.depth) && i2++, !H(t2, n2, e2.heap[i2], e2.depth));)e2.heap[r2] = e2.heap[i2], r2 = i2, i2 <<= 1;
                                e2.heap[r2] = n2;
                            }
                            function K(e2, t2, r2) {
                                var n2, i2, s2, a2, o3 = 0;
                                if (0 !== e2.last_lit) for(; n2 = e2.pending_buf[e2.d_buf + 2 * o3] << 8 | e2.pending_buf[e2.d_buf + 2 * o3 + 1], i2 = e2.pending_buf[e2.l_buf + o3], o3++, 0 === n2 ? L(e2, i2, t2) : (L(e2, (s2 = A10[i2]) + u + 1, t2), 0 !== (a2 = w[s2]) && P(e2, i2 -= I4[s2], a2), L(e2, s2 = N(--n2), r2), 0 !== (a2 = k[s2]) && P(e2, n2 -= T4[s2], a2)), o3 < e2.last_lit;);
                                L(e2, m, t2);
                            }
                            function Y(e2, t2) {
                                var r2, n2, i2, s2 = t2.dyn_tree, a2 = t2.stat_desc.static_tree, o3 = t2.stat_desc.has_stree, h2 = t2.stat_desc.elems, u2 = -1;
                                for(e2.heap_len = 0, e2.heap_max = _, r2 = 0; r2 < h2; r2++)0 !== s2[2 * r2] ? (e2.heap[++e2.heap_len] = u2 = r2, e2.depth[r2] = 0) : s2[2 * r2 + 1] = 0;
                                for(; e2.heap_len < 2;)s2[2 * (i2 = e2.heap[++e2.heap_len] = u2 < 2 ? ++u2 : 0)] = 1, e2.depth[i2] = 0, e2.opt_len--, o3 && (e2.static_len -= a2[2 * i2 + 1]);
                                for(t2.max_code = u2, r2 = e2.heap_len >> 1; 1 <= r2; r2--)G(e2, s2, r2);
                                for(i2 = h2; r2 = e2.heap[1], e2.heap[1] = e2.heap[e2.heap_len--], G(e2, s2, 1), n2 = e2.heap[1], e2.heap[--e2.heap_max] = r2, e2.heap[--e2.heap_max] = n2, s2[2 * i2] = s2[2 * r2] + s2[2 * n2], e2.depth[i2] = (e2.depth[r2] >= e2.depth[n2] ? e2.depth[r2] : e2.depth[n2]) + 1, s2[2 * r2 + 1] = s2[2 * n2 + 1] = i2, e2.heap[1] = i2++, G(e2, s2, 1), 2 <= e2.heap_len;);
                                e2.heap[--e2.heap_max] = e2.heap[1], function(e3, t3) {
                                    var r3, n3, i3, s3, a3, o4, h3 = t3.dyn_tree, u3 = t3.max_code, l2 = t3.stat_desc.static_tree, f2 = t3.stat_desc.has_stree, c2 = t3.stat_desc.extra_bits, d2 = t3.stat_desc.extra_base, p2 = t3.stat_desc.max_length, m2 = 0;
                                    for(s3 = 0; s3 <= g; s3++)e3.bl_count[s3] = 0;
                                    for(h3[2 * e3.heap[e3.heap_max] + 1] = 0, r3 = e3.heap_max + 1; r3 < _; r3++)p2 < (s3 = h3[2 * h3[2 * (n3 = e3.heap[r3]) + 1] + 1] + 1) && (s3 = p2, m2++), h3[2 * n3 + 1] = s3, u3 < n3 || (e3.bl_count[s3]++, a3 = 0, d2 <= n3 && (a3 = c2[n3 - d2]), o4 = h3[2 * n3], e3.opt_len += o4 * (s3 + a3), f2 && (e3.static_len += o4 * (l2[2 * n3 + 1] + a3)));
                                    if (0 !== m2) {
                                        do {
                                            for(s3 = p2 - 1; 0 === e3.bl_count[s3];)s3--;
                                            e3.bl_count[s3]--, e3.bl_count[s3 + 1] += 2, e3.bl_count[p2]--, m2 -= 2;
                                        }while (0 < m2);
                                        for(s3 = p2; 0 !== s3; s3--)for(n3 = e3.bl_count[s3]; 0 !== n3;)u3 < (i3 = e3.heap[--r3]) || (h3[2 * i3 + 1] !== s3 && (e3.opt_len += (s3 - h3[2 * i3 + 1]) * h3[2 * i3], h3[2 * i3 + 1] = s3), n3--);
                                    }
                                }(e2, t2), Z(s2, u2, e2.bl_count);
                            }
                            function X(e2, t2, r2) {
                                var n2, i2, s2 = -1, a2 = t2[1], o3 = 0, h2 = 7, u2 = 4;
                                for(0 === a2 && (h2 = 138, u2 = 3), t2[2 * (r2 + 1) + 1] = 65535, n2 = 0; n2 <= r2; n2++)i2 = a2, a2 = t2[2 * (n2 + 1) + 1], ++o3 < h2 && i2 === a2 || (o3 < u2 ? e2.bl_tree[2 * i2] += o3 : 0 !== i2 ? (i2 !== s2 && e2.bl_tree[2 * i2]++, e2.bl_tree[2 * b]++) : o3 <= 10 ? e2.bl_tree[2 * v]++ : e2.bl_tree[2 * y]++, s2 = i2, u2 = (o3 = 0) === a2 ? (h2 = 138, 3) : i2 === a2 ? (h2 = 6, 3) : (h2 = 7, 4));
                            }
                            function V37(e2, t2, r2) {
                                var n2, i2, s2 = -1, a2 = t2[1], o3 = 0, h2 = 7, u2 = 4;
                                for(0 === a2 && (h2 = 138, u2 = 3), n2 = 0; n2 <= r2; n2++)if (i2 = a2, a2 = t2[2 * (n2 + 1) + 1], !(++o3 < h2 && i2 === a2)) {
                                    if (o3 < u2) for(; L(e2, i2, e2.bl_tree), 0 != --o3;);
                                    else 0 !== i2 ? (i2 !== s2 && (L(e2, i2, e2.bl_tree), o3--), L(e2, b, e2.bl_tree), P(e2, o3 - 3, 2)) : o3 <= 10 ? (L(e2, v, e2.bl_tree), P(e2, o3 - 3, 3)) : (L(e2, y, e2.bl_tree), P(e2, o3 - 11, 7));
                                    s2 = i2, u2 = (o3 = 0) === a2 ? (h2 = 138, 3) : i2 === a2 ? (h2 = 6, 3) : (h2 = 7, 4);
                                }
                            }
                            __name(D5, "D"), __name(F7, "F"), __name(N, "N"), __name(U, "U"), __name(P, "P"), __name(L, "L"), __name(j, "j"), __name(Z, "Z"), __name(W, "W"), __name(M, "M"), __name(H, "H"), __name(G, "G"), __name(K, "K"), __name(Y, "Y"), __name(X, "X"), __name(V37, "V"), n(T4);
                            var q = !1;
                            function J6(e2, t2, r2, n2) {
                                P(e2, (s << 1) + +!!n2, 3), function(e3, t3, r3, n3) {
                                    M(e3), n3 && (U(e3, r3), U(e3, ~r3)), i.arraySet(e3.pending_buf, e3.window, t3, r3, e3.pending), e3.pending += r3;
                                }(e2, t2, r2, !0);
                            }
                            __name(J6, "J"), r._tr_init = function(e2) {
                                q || (function() {
                                    var e3, t2, r2, n2, i2, s2 = Array(g + 1);
                                    for(n2 = r2 = 0; n2 < a - 1; n2++)for(I4[n2] = r2, e3 = 0; e3 < 1 << w[n2]; e3++)A10[r2++] = n2;
                                    for(A10[r2 - 1] = n2, n2 = i2 = 0; n2 < 16; n2++)for(T4[n2] = i2, e3 = 0; e3 < 1 << k[n2]; e3++)E[i2++] = n2;
                                    for(i2 >>= 7; n2 < f; n2++)for(T4[n2] = i2 << 7, e3 = 0; e3 < 1 << k[n2] - 7; e3++)E[256 + i2++] = n2;
                                    for(t2 = 0; t2 <= g; t2++)s2[t2] = 0;
                                    for(e3 = 0; e3 <= 143;)z[2 * e3 + 1] = 8, e3++, s2[8]++;
                                    for(; e3 <= 255;)z[2 * e3 + 1] = 9, e3++, s2[9]++;
                                    for(; e3 <= 279;)z[2 * e3 + 1] = 7, e3++, s2[7]++;
                                    for(; e3 <= 287;)z[2 * e3 + 1] = 8, e3++, s2[8]++;
                                    for(Z(z, l + 1, s2), e3 = 0; e3 < f; e3++)C[2 * e3 + 1] = 5, C[2 * e3] = j(e3, 5);
                                    O33 = new D5(z, w, u + 1, l, g), B6 = new D5(C, k, 0, f, g), R = new D5([], x, 0, c, p);
                                }(), q = !0), e2.l_desc = new F7(e2.dyn_ltree, O33), e2.d_desc = new F7(e2.dyn_dtree, B6), e2.bl_desc = new F7(e2.bl_tree, R), e2.bi_buf = 0, e2.bi_valid = 0, W(e2);
                            }, r._tr_stored_block = J6, r._tr_flush_block = function(e2, t2, r2, n2) {
                                var i2, s2, a2 = 0;
                                0 < e2.level ? (2 === e2.strm.data_type && (e2.strm.data_type = function(e3) {
                                    var t3, r3 = 4093624447;
                                    for(t3 = 0; t3 <= 31; t3++, r3 >>>= 1)if (1 & r3 && 0 !== e3.dyn_ltree[2 * t3]) return o2;
                                    if (0 !== e3.dyn_ltree[18] || 0 !== e3.dyn_ltree[20] || 0 !== e3.dyn_ltree[26]) return h;
                                    for(t3 = 32; t3 < u; t3++)if (0 !== e3.dyn_ltree[2 * t3]) return h;
                                    return o2;
                                }(e2)), Y(e2, e2.l_desc), Y(e2, e2.d_desc), a2 = function(e3) {
                                    var t3;
                                    for(X(e3, e3.dyn_ltree, e3.l_desc.max_code), X(e3, e3.dyn_dtree, e3.d_desc.max_code), Y(e3, e3.bl_desc), t3 = c - 1; 3 <= t3 && 0 === e3.bl_tree[2 * S9[t3] + 1]; t3--);
                                    return e3.opt_len += 3 * (t3 + 1) + 5 + 5 + 4, t3;
                                }(e2), i2 = e2.opt_len + 3 + 7 >>> 3, (s2 = e2.static_len + 3 + 7 >>> 3) <= i2 && (i2 = s2)) : i2 = s2 = r2 + 5, r2 + 4 <= i2 && -1 !== t2 ? J6(e2, t2, r2, n2) : 4 === e2.strategy || s2 === i2 ? (P(e2, 2 + +!!n2, 3), K(e2, z, C)) : (P(e2, 4 + +!!n2, 3), function(e3, t3, r3, n3) {
                                    var i3;
                                    for(P(e3, t3 - 257, 5), P(e3, r3 - 1, 5), P(e3, n3 - 4, 4), i3 = 0; i3 < n3; i3++)P(e3, e3.bl_tree[2 * S9[i3] + 1], 3);
                                    V37(e3, e3.dyn_ltree, t3 - 1), V37(e3, e3.dyn_dtree, r3 - 1);
                                }(e2, e2.l_desc.max_code + 1, e2.d_desc.max_code + 1, a2 + 1), K(e2, e2.dyn_ltree, e2.dyn_dtree)), W(e2), n2 && M(e2);
                            }, r._tr_tally = function(e2, t2, r2) {
                                return e2.pending_buf[e2.d_buf + 2 * e2.last_lit] = t2 >>> 8 & 255, e2.pending_buf[e2.d_buf + 2 * e2.last_lit + 1] = 255 & t2, e2.pending_buf[e2.l_buf + e2.last_lit] = 255 & r2, e2.last_lit++, 0 === t2 ? e2.dyn_ltree[2 * r2]++ : (e2.matches++, t2--, e2.dyn_ltree[2 * (A10[r2] + u + 1)]++, e2.dyn_dtree[2 * N(t2)]++), e2.last_lit === e2.lit_bufsize - 1;
                            }, r._tr_align = function(e2) {
                                P(e2, 2, 3), L(e2, m, z), function(e3) {
                                    16 === e3.bi_valid ? (U(e3, e3.bi_buf), e3.bi_buf = 0, e3.bi_valid = 0) : 8 <= e3.bi_valid && (e3.pending_buf[e3.pending++] = 255 & e3.bi_buf, e3.bi_buf >>= 8, e3.bi_valid -= 8);
                                }(e2);
                            };
                        },
                        {
                            "../utils/common": 41
                        }
                    ],
                    53: [
                        function(e, t, r) {
                            t.exports = function() {
                                this.input = null, this.next_in = 0, this.avail_in = 0, this.total_in = 0, this.output = null, this.next_out = 0, this.avail_out = 0, this.total_out = 0, this.msg = "", this.state = null, this.data_type = 2, this.adler = 0;
                            };
                        },
                        {}
                    ],
                    54: [
                        function(e, t, r) {
                            (function(e2) {
                                !function(r2, n) {
                                    if (!r2.setImmediate) {
                                        var i, s, t2, a, o2 = 1, h = {}, u = !1, l = r2.document, e3 = Object.getPrototypeOf && Object.getPrototypeOf(r2);
                                        e3 = e3 && e3.setTimeout ? e3 : r2, i = "[object process]" === ({}).toString.call(r2.process) ? function i(e4) {
                                            process.nextTick(function() {
                                                c(e4);
                                            });
                                        } : !function() {
                                            if (r2.postMessage && !r2.importScripts) {
                                                var e4 = !0, t3 = r2.onmessage;
                                                return r2.onmessage = function() {
                                                    e4 = !1;
                                                }, r2.postMessage("", "*"), r2.onmessage = t3, e4;
                                            }
                                        }() ? r2.MessageChannel ? ((t2 = new MessageChannel()).port1.onmessage = function i(e4) {
                                            c(e4.data);
                                        }, function(e4) {
                                            t2.port2.postMessage(e4);
                                        }) : l && "onreadystatechange" in l.createElement("script") ? (s = l.documentElement, function(e4) {
                                            var t3 = l.createElement("script");
                                            t3.onreadystatechange = function() {
                                                c(e4), t3.onreadystatechange = null, s.removeChild(t3), t3 = null;
                                            }, s.appendChild(t3);
                                        }) : function(e4) {
                                            setTimeout(c, 0, e4);
                                        } : (a = "setImmediate$" + Math.random() + "$", r2.addEventListener ? r2.addEventListener("message", d, !1) : r2.attachEvent("onmessage", d), function(e4) {
                                            r2.postMessage(a + e4, "*");
                                        }), e3.setImmediate = function(e4) {
                                            "function" != typeof e4 && (e4 = Function("" + e4));
                                            for(var t3 = Array(arguments.length - 1), r3 = 0; r3 < t3.length; r3++)t3[r3] = arguments[r3 + 1];
                                            var n2 = {
                                                callback: e4,
                                                args: t3
                                            };
                                            return h[o2] = n2, i(o2), o2++;
                                        }, e3.clearImmediate = f;
                                    }
                                    function f(e4) {
                                        delete h[e4];
                                    }
                                    function c(e4) {
                                        if (u) setTimeout(c, 0, e4);
                                        else {
                                            var t3 = h[e4];
                                            if (t3) {
                                                u = !0;
                                                try {
                                                    !function(e5) {
                                                        var t4 = e5.callback, r3 = e5.args;
                                                        switch(r3.length){
                                                            case 0:
                                                                t4();
                                                                break;
                                                            case 1:
                                                                t4(r3[0]);
                                                                break;
                                                            case 2:
                                                                t4(r3[0], r3[1]);
                                                                break;
                                                            case 3:
                                                                t4(r3[0], r3[1], r3[2]);
                                                                break;
                                                            default:
                                                                t4.apply(n, r3);
                                                        }
                                                    }(t3);
                                                } finally{
                                                    f(e4), u = !1;
                                                }
                                            }
                                        }
                                    }
                                    function d(e4) {
                                        e4.source === r2 && "string" == typeof e4.data && 0 === e4.data.indexOf(a) && c(+e4.data.slice(a.length));
                                    }
                                    __name(f, "f"), __name(c, "c"), __name(d, "d");
                                }("u" < ("u" < typeof self ? "undefined" : _type_of1(self)) ? void 0 === e2 ? this : e2 : self);
                            }).call(this, "u" > ("u" < typeof global ? "undefined" : _type_of1(global)) ? global : "u" > ("u" < typeof self ? "undefined" : _type_of1(self)) ? self : "u" > ("u" < typeof window ? "undefined" : _type_of1(window)) ? window : {});
                        },
                        {}
                    ]
                }, {}, [
                    10
                ])(10);
            });
        }
    });
    function deepMerge(r1, r2) {
        return Array.from(new Set(_to_consumable_array(Object.keys(r1)).concat(_to_consumable_array(Object.keys(r2))))).reduce(function(result3, key) {
            var v1 = r1[key], v2 = r2[key];
            return isRecord(v1) && isRecord(v2) ? Object.assign(Object.assign({}, result3), _define_property({}, key, deepMerge(v1, v2))) : Object.assign(Object.assign({}, result3), _define_property({}, key, key in r2 ? v2 : v1));
        }, {});
    }
    function parseUnaryExpression(text, cursor) {
        var expr = parsePrimaryExpression(text, cursor);
        if (expr) return expr;
        var op = text.substr(cursor, 1);
        if (cursor += op.length, "+" !== op && "-" !== op && "~" !== op) return null;
        var num = parseUnaryExpression(text, cursor);
        return num ? {
            cursor: cursor = num.cursor,
            evaluable: new UnaryOperationNode(op, num.evaluable)
        } : null;
    }
    var init_tweakpane = __esm({
        "node_modules/tweakpane/dist/tweakpane.js": function() {
            init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), __name(forceCast, "forceCast"), __name(isEmpty, "isEmpty"), __name(isObject$1, "isObject$1"), __name(isRecord, "isRecord"), __name(deepEqualsArray, "deepEqualsArray"), __name(deepMerge, "deepMerge"), __name(isBinding, "isBinding"), CREATE_MESSAGE_MAP = {
                alreadydisposed: __name(function() {
                    return "View has been already disposed";
                }, "alreadydisp\
osed"),
                invalidparams: __name(function(context) {
                    return "Invalid parameters for '".concat(context.name, "'");
                }, "invalidparams"),
                nomatchingcontroller: __name(function(context) {
                    return "No matching controller for '".concat(context.key, "'");
                }, "nomatchingcontroller"),
                nomatchingview: __name(function(context) {
                    return "No matching view for '".concat(JSON.stringify(context.params), "'");
                }, "nomatchingview"),
                notbindable: __name(function() {
                    return "Value is not bindable";
                }, "notbindable"),
                notcompatible: __name(function(context) {
                    return "Not compatible with  plugin '".concat(context.id, "'");
                }, "notcompatible"),
                propertynotfound: __name(function(context) {
                    return "Property '".concat(context.name, "' not found");
                }, "propertynotfound"),
                shouldneverhappen: __name(function() {
                    return "This error should never happen";
                }, "shouldnev\
erhappen")
            }, __name(_TpError = function() {
                function _TpError1(config) {
                    var _a;
                    _class_call_check(this, _TpError1), this.message = null != (_a = CREATE_MESSAGE_MAP[config.type](forceCast(config.context))) ? _a : "Unexpected error", this.name = this.constructor.name, this.stack = Error(this.message).stack, this.type = config.type;
                }
                return _create_class(_TpError1, [
                    {
                        key: "toString",
                        value: function toString() {
                            return this.message;
                        }
                    }
                ], [
                    {
                        key: "alreadyDisposed",
                        value: function alreadyDisposed() {
                            return new _TpError1({
                                type: "alreadydisposed"
                            });
                        }
                    },
                    {
                        key: "notBindable",
                        value: function notBindable() {
                            return new _TpError1({
                                type: "notbindable"
                            });
                        }
                    },
                    {
                        key: "notCompatible",
                        value: function notCompatible(bundleId, id) {
                            return new _TpError1({
                                type: "notcompatible",
                                context: {
                                    id: "".concat(bundleId, ".").concat(id)
                                }
                            });
                        }
                    },
                    {
                        key: "propertyNotFound",
                        value: function propertyNotFound(name2) {
                            return new _TpError1({
                                type: "propertynotfound",
                                context: {
                                    name: name2
                                }
                            });
                        }
                    },
                    {
                        key: "shouldNeverHappen",
                        value: function shouldNeverHappen() {
                            return new _TpError1({
                                type: "shouldneverhappen"
                            });
                        }
                    }
                ]), _TpError1;
            }(), "TpError"), TpError = _TpError, __name(_BindingTarget = function() {
                function _BindingTarget1(obj, key) {
                    _class_call_check(this, _BindingTarget1), this.obj_ = obj, this.key = key;
                }
                return _create_class(_BindingTarget1, [
                    {
                        key: "read",
                        value: function read() {
                            return this.obj_[this.key];
                        }
                    },
                    {
                        key: "write",
                        value: function write(value) {
                            this.obj_[this.key] = value;
                        }
                    },
                    {
                        key: "writeProperty",
                        value: function writeProperty(name2, value) {
                            var valueObj = this.read();
                            if (!_BindingTarget1.isBindable(valueObj)) throw TpError.notBindable();
                            if (!(name2 in valueObj)) throw TpError.propertyNotFound(name2);
                            valueObj[name2] = value;
                        }
                    }
                ], [
                    {
                        key: "isBindable",
                        value: function isBindable(obj) {
                            return null !== obj && ((void 0 === obj ? "undefined" : _type_of(obj)) === "object" || "function" == typeof obj);
                        }
                    }
                ]), _BindingTarget1;
            }(), "BindingTarget"), BindingTarget = _BindingTarget, __name(_Emitter = function() {
                function _Emitter1() {
                    _class_call_check(this, _Emitter1), this.observers_ = {};
                }
                return _create_class(_Emitter1, [
                    {
                        key: "on",
                        value: function on(eventName, handler, opt_options) {
                            var _a, observers = this.observers_[eventName];
                            return observers || (observers = this.observers_[eventName] = []), observers.push({
                                handler: handler,
                                key: null != (_a = null == opt_options ? void 0 : opt_options.key) ? _a : handler
                            }), this;
                        }
                    },
                    {
                        key: "off",
                        value: function off(eventName, key) {
                            var observers = this.observers_[eventName];
                            return observers && (this.observers_[eventName] = observers.filter(function(observer) {
                                return observer.key !== key;
                            })), this;
                        }
                    },
                    {
                        key: "emit",
                        value: function emit(eventName, event) {
                            var observers = this.observers_[eventName];
                            observers && observers.forEach(function(observer) {
                                observer.handler(event);
                            });
                        }
                    }
                ]), _Emitter1;
            }(), "Emitter"), Emitter2 = _Emitter, __name(_ComplexValue = function() {
                function _ComplexValue1(initialValue, config) {
                    var _a;
                    _class_call_check(this, _ComplexValue1), this.constraint_ = null == config ? void 0 : config.constraint, this.equals_ = null != (_a = null == config ? void 0 : config.equals) ? _a : function(v1, v2) {
                        return v1 === v2;
                    }, this.emitter = new Emitter2(), this.rawValue_ = initialValue;
                }
                return _create_class(_ComplexValue1, [
                    {
                        key: "constraint",
                        get: function get() {
                            return this.constraint_;
                        }
                    },
                    {
                        key: "rawValue",
                        get: function get() {
                            return this.rawValue_;
                        },
                        set: function set1(rawValue) {
                            this.setRawValue(rawValue, {
                                forceEmit: !1,
                                last: !0
                            });
                        }
                    },
                    {
                        key: "setRawValue",
                        value: function setRawValue(rawValue, options) {
                            var opts = null != options ? options : {
                                forceEmit: !1,
                                last: !0
                            }, constrainedValue = this.constraint_ ? this.constraint_.constrain(rawValue) : rawValue, prevValue = this.rawValue_;
                            (!this.equals_(prevValue, constrainedValue) || opts.forceEmit) && (this.emitter.emit("beforechange", {
                                sender: this
                            }), this.rawValue_ = constrainedValue, this.emitter.emit("change", {
                                options: opts,
                                previousRawValue: prevValue,
                                rawValue: constrainedValue,
                                sender: this
                            }));
                        }
                    }
                ]), _ComplexValue1;
            }(), "ComplexValue"), ComplexValue = _ComplexValue, __name(_PrimitiveValue = function() {
                function _PrimitiveValue1(initialValue) {
                    _class_call_check(this, _PrimitiveValue1), this.emitter = new Emitter2(), this.value_ = initialValue;
                }
                return _create_class(_PrimitiveValue1, [
                    {
                        key: "rawValue",
                        get: function get() {
                            return this.value_;
                        },
                        set: function set1(value) {
                            this.setRawValue(value, {
                                forceEmit: !1,
                                last: !0
                            });
                        }
                    },
                    {
                        key: "setRawValue",
                        value: function setRawValue(value, options) {
                            var opts = null != options ? options : {
                                forceEmit: !1,
                                last: !0
                            }, prevValue = this.value_;
                            (prevValue !== value || opts.forceEmit) && (this.emitter.emit("beforechange", {
                                sender: this
                            }), this.value_ = value, this.emitter.emit("change", {
                                options: opts,
                                previousRawValue: prevValue,
                                rawValue: this.value_,
                                sender: this
                            }));
                        }
                    }
                ]), _PrimitiveValue1;
            }(), "PrimitiveValue"), PrimitiveValue = _PrimitiveValue, __name(_ReadonlyPrimitiveValue = function() {
                function _ReadonlyPrimitiveValue1(value) {
                    _class_call_check(this, _ReadonlyPrimitiveValue1), this.emitter = new Emitter2(), this.onValueBeforeChange_ = this.onValueBeforeChange_.bind(this), this.onValueChange_ = this.onValueChange_.bind(this), this.value_ = value, this.value_.emitter.on("beforechange", this.onValueBeforeChange_), this.value_.emitter.on("change", this.onValueChange_);
                }
                return _create_class(_ReadonlyPrimitiveValue1, [
                    {
                        key: "rawValue",
                        get: function get() {
                            return this.value_.rawValue;
                        }
                    },
                    {
                        key: "onValueBeforeChange_",
                        value: function onValueBeforeChange_(ev) {
                            this.emitter.emit("beforechange", Object.assign(Object.assign({}, ev), {
                                sender: this
                            }));
                        }
                    },
                    {
                        key: "onValueChange_",
                        value: function onValueChange_(ev) {
                            this.emitter.emit("change", Object.assign(Object.assign({}, ev), {
                                sender: this
                            }));
                        }
                    }
                ]), _ReadonlyPrimitiveValue1;
            }(), "ReadonlyPrimitiveValue"), ReadonlyPrimitiveValue = _ReadonlyPrimitiveValue, __name(createValue, "createValue"), __name(createReadonlyValue, "createReadonlyValue"), __name(_ValueMap = function() {
                function _ValueMap1(valueMap) {
                    var _this, _loop = function _loop(key) {
                        _this.valMap_[key].emitter.on("change", function() {
                            _this1.emitter.emit("change", {
                                key: key,
                                sender: _this1
                            });
                        });
                    }, _this1 = this;
                    for(var key in _class_call_check(this, _ValueMap1), this.emitter = new Emitter2(), this.valMap_ = valueMap, this.valMap_)_this = this, _loop(key);
                }
                return _create_class(_ValueMap1, [
                    {
                        key: "get",
                        value: function get(key) {
                            return this.valMap_[key].rawValue;
                        }
                    },
                    {
                        key: "set",
                        value: function set1(key, value) {
                            this.valMap_[key].rawValue = value;
                        }
                    },
                    {
                        key: "value",
                        value: function value(key) {
                            return this.valMap_[key];
                        }
                    }
                ], [
                    {
                        key: "createCore",
                        value: function createCore(initialValue) {
                            return Object.keys(initialValue).reduce(function(o2, key) {
                                return Object.assign(o2, _define_property({}, key, createValue(initialValue[key])));
                            }, {});
                        }
                    },
                    {
                        key: "fromObject",
                        value: function fromObject(initialValue) {
                            return new _ValueMap1(this.createCore(initialValue));
                        }
                    }
                ]), _ValueMap1;
            }(), "ValueMap"), ValueMap = _ValueMap, __name(_DefiniteRangeConstraint = function() {
                function _DefiniteRangeConstraint1(config) {
                    _class_call_check(this, _DefiniteRangeConstraint1), this.values = ValueMap.fromObject({
                        max: config.max,
                        min: config.min
                    });
                }
                return _create_class(_DefiniteRangeConstraint1, [
                    {
                        key: "constrain",
                        value: function constrain(value) {
                            var max = this.values.get("max");
                            return Math.min(Math.max(value, this.values.get("min")), max);
                        }
                    }
                ]), _DefiniteRangeConstraint1;
            }(), "DefiniteRangeConstraint"), DefiniteRangeConstraint = _DefiniteRangeConstraint, __name(_RangeConstraint = function() {
                function _RangeConstraint1(config) {
                    _class_call_check(this, _RangeConstraint1), this.values = ValueMap.fromObject({
                        max: config.max,
                        min: config.min
                    });
                }
                return _create_class(_RangeConstraint1, [
                    {
                        key: "constrain",
                        value: function constrain(value) {
                            var max = this.values.get("max"), min = this.values.get("min"), result3 = value;
                            return isEmpty(min) || (result3 = Math.max(result3, min)), isEmpty(max) || (result3 = Math.min(result3, max)), result3;
                        }
                    }
                ]), _RangeConstraint1;
            }(), "RangeConstraint"), RangeConstraint = _RangeConstraint, __name(_StepConstraint = function() {
                function _StepConstraint1(step) {
                    var origin = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0;
                    _class_call_check(this, _StepConstraint1), this.step = step, this.origin = origin;
                }
                return _create_class(_StepConstraint1, [
                    {
                        key: "constrain",
                        value: function constrain(value) {
                            var o2 = this.origin % this.step, r = Math.round((value - o2) / this.step);
                            return o2 + r * this.step;
                        }
                    }
                ]), _StepConstraint1;
            }(), "StepConstraint"), StepConstraint = _StepConstraint, __name(_NumberLiteralNode = function() {
                function _NumberLiteralNode1(text) {
                    _class_call_check(this, _NumberLiteralNode1), this.text = text;
                }
                return _create_class(_NumberLiteralNode1, [
                    {
                        key: "evaluate",
                        value: function evaluate() {
                            return Number(this.text);
                        }
                    },
                    {
                        key: "toString",
                        value: function toString() {
                            return this.text;
                        }
                    }
                ]), _NumberLiteralNode1;
            }(), "NumberLiteralNode"), NumberLiteralNode = _NumberLiteralNode, BINARY_OPERATION_MAP = {
                "**": __name(function(v1, v2) {
                    return Math.pow(v1, v2);
                }, "**"),
                "*": __name(function(v1, v2) {
                    return v1 * v2;
                }, "*"),
                "/": __name(function(v1, v2) {
                    return v1 / v2;
                }, "/"),
                "%": __name(function(v1, v2) {
                    return v1 % v2;
                }, "%"),
                "+": __name(function(v1, v2) {
                    return v1 + v2;
                }, "+"),
                "-": __name(function(v1, v2) {
                    return v1 - v2;
                }, "-"),
                "<<": __name(function(v1, v2) {
                    return v1 << v2;
                }, "<<"),
                ">>": __name(function(v1, v2) {
                    return v1 >> v2;
                }, ">>"),
                ">>>": __name(function(v1, v2) {
                    return v1 >>> v2;
                }, ">>>"),
                "&": __name(function(v1, v2) {
                    return v1 & v2;
                }, "&"),
                "^": __name(function(v1, v2) {
                    return v1 ^ v2;
                }, "^"),
                "|": __name(function(v1, v2) {
                    return v1 | v2;
                }, "|")
            }, __name(_BinaryOperationNode = function() {
                function _BinaryOperationNode1(operator, left, right) {
                    _class_call_check(this, _BinaryOperationNode1), this.left = left, this.operator = operator, this.right = right;
                }
                return _create_class(_BinaryOperationNode1, [
                    {
                        key: "evaluate",
                        value: function evaluate() {
                            var op = BINARY_OPERATION_MAP[this.operator];
                            if (!op) throw Error("unexpected binary operator: '".concat(this.operator));
                            return op(this.left.evaluate(), this.right.evaluate());
                        }
                    },
                    {
                        key: "toString",
                        value: function toString() {
                            return [
                                "b(",
                                this.left.toString(),
                                this.operator,
                                this.right.toString(),
                                ")"
                            ].join(" ");
                        }
                    }
                ]), _BinaryOperationNode1;
            }(), "BinaryOperationNode"), BinaryOperationNode = _BinaryOperationNode, UNARY_OPERATION_MAP = {
                "+": __name(function(v) {
                    return v;
                }, "+"),
                "-": __name(function(v) {
                    return -v;
                }, "-"),
                "~": __name(function(v) {
                    return ~v;
                }, "~")
            }, __name(_UnaryOperationNode = function() {
                function _UnaryOperationNode1(operator, expr) {
                    _class_call_check(this, _UnaryOperationNode1), this.operator = operator, this.expression = expr;
                }
                return _create_class(_UnaryOperationNode1, [
                    {
                        key: "evaluate",
                        value: function evaluate() {
                            var op = UNARY_OPERATION_MAP[this.operator];
                            if (!op) throw Error("unexpected unary operator: '".concat(this.operator));
                            return op(this.expression.evaluate());
                        }
                    },
                    {
                        key: "toString",
                        value: function toString() {
                            return [
                                "u(",
                                this.operator,
                                this.expression.toString(),
                                ")"
                            ].join(" ");
                        }
                    }
                ]), _UnaryOperationNode1;
            }(), "UnaryOperationNode"), UnaryOperationNode = _UnaryOperationNode, __name(combineReader, "combineReader"), __name(readWhitespace, "readWhitespace"), __name(readNonZeroDigit, "readNonZeroDigit"), __name(readDecimalDigits, "readDecimalDigits"), __name(readSignedInteger, "readSignedInteger"), __name(readExponentPart, "readExponentPart"), __name(readDecimalIntegerLiteral, "readDecimalIntegerLiteral"), __name(readDecimalLiteral1, "readDecimalLiteral1"), __name(readDecimalLiteral2, "readDecimalLiteral2"), __name(readDecimalLiteral3, "readDecimalLiteral3"), readDecimalLiteral = combineReader([
                readDecimalLiteral1,
                readDecimalLiteral2,
                readDecimalLiteral3
            ]), __name(parseBinaryDigits, "parseBinaryDigits"), __name(readBinaryIntegerLiteral, "readBinaryIntegerLiteral"), __name(readOctalDigits, "readOctalDigits"), __name(readOctalIntegerLiteral, "readOctalIntegerLiteral"), __name(readHexDigits, "readHexDigits"), __name(readHexIntegerLiteral, "readHexIntegerLiteral"), readNonDecimalIntegerLiteral = combineReader([
                readBinaryIntegerLiteral,
                readOctalIntegerLiteral,
                readHexIntegerLiteral
            ]), readNumericLiteral = combineReader([
                readNonDecimalIntegerLiteral,
                readDecimalLiteral
            ]), __name(parseLiteral, "parseLiteral"), __name(parseParenthesizedExpression, "parseParenthesizedExpression"), __name(parsePrimaryExpression, "parsePrimaryExpression"), __name(parseUnaryExpression, "parseUnaryExpression"), __name(readBinaryOperator, "readBinaryOperator"), __name(createBinaryOperationExpressionParser, "createBinaryOperationExpressionParser"), parseBinaryOperationExpression = [
                [
                    "**"
                ],
                [
                    "*",
                    "/",
                    "%"
                ],
                [
                    "+",
                    "-"
                ],
                [
                    "<<",
                    ">>>",
                    ">>"
                ],
                [
                    "&"
                ],
                [
                    "^"
                ],
                [
                    "|"
                ]
            ].reduce(function(parser, ops) {
                return createBinaryOperationExpressionParser(parser, ops);
            }, parseUnaryExpression), __name(parseExpression, "parseExpression"), __name(parseEcmaNumberExpression, "parseEcmaNumberExpression"), __name(parseNumber, "parseNumber"), __name(numberFromUnknown, "numberFromUnknown"), __name(numberToString, "numberToString"), __name(createNumberFormatter, "createNumberFormatter"), __name(mapRange, "mapRange"), __name(getDecimalDigits, "getDecimalDigits"), __name(constrainRange, "constrainRange"), __name(loopRange, "loopRange"), __name(getSuitableDecimalDigits, "getSuitableDecimalDigits"), __name(getSuitableKeyScale, "getSuitableKeyScale"), __name(getSuitablePointerScale, "getSuitablePointerScale"), __name(createStepConstraint, "createStepConstraint"), __name(createRangeConstraint, "createRangeConstraint"), __name(createNumberTextPropsObject, "createNumberTextPropsObject"), __name(createNumberTextInputParamsParser, "createNumberTextInputParamsParser"), __name(createPointAxis, "createPointAxis"), __name(_BladeApi = function() {
                function _BladeApi1(controller) {
                    _class_call_check(this, _BladeApi1), this.controller = controller;
                }
                return _create_class(_BladeApi1, [
                    {
                        key: "element",
                        get: function get() {
                            return this.controller.view.element;
                        }
                    },
                    {
                        key: "disabled",
                        get: function get() {
                            return this.controller.viewProps.get("disabled");
                        },
                        set: function set1(disabled) {
                            this.controller.viewProps.set("disabled", disabled);
                        }
                    },
                    {
                        key: "hidden",
                        get: function get() {
                            return this.controller.viewProps.get("hidden");
                        },
                        set: function set1(hidden) {
                            this.controller.viewProps.set("hidden", hidden);
                        }
                    },
                    {
                        key: "dispose",
                        value: function dispose() {
                            this.controller.viewProps.set("disposed", !0);
                        }
                    },
                    {
                        key: "importState",
                        value: function importState(state) {
                            return this.controller.importState(state);
                        }
                    },
                    {
                        key: "exportState",
                        value: function exportState() {
                            return this.controller.exportState();
                        }
                    }
                ]), _BladeApi1;
            }(), "BladeApi"), BladeApi = _BladeApi, __name(_TpEvent = function _TpEvent1(target) {
                _class_call_check(this, _TpEvent1), this.target = target;
            }, "TpEvent"), __name(_TpChangeEvent = function(TpEvent1) {
                function _TpChangeEvent1(target, value, last) {
                    var _this;
                    return _class_call_check(this, _TpChangeEvent1), (_this = _call_super(this, _TpChangeEvent1, [
                        target
                    ])).value = value, _this.last = null == last || last, _this;
                }
                return _inherits(_TpChangeEvent1, TpEvent1), _TpChangeEvent1;
            }(TpEvent = _TpEvent), "TpChangeEvent"), TpChangeEvent = _TpChangeEvent, __name(_TpFoldEvent = function(TpEvent1) {
                function _TpFoldEvent1(target, expanded) {
                    var _this;
                    return _class_call_check(this, _TpFoldEvent1), (_this = _call_super(this, _TpFoldEvent1, [
                        target
                    ])).expanded = expanded, _this;
                }
                return _inherits(_TpFoldEvent1, TpEvent1), _TpFoldEvent1;
            }(TpEvent), "TpFoldEvent"), TpFoldEvent = _TpFoldEvent, __name(_TpTabSelectEvent = function(TpEvent1) {
                function _TpTabSelectEvent1(target, index) {
                    var _this;
                    return _class_call_check(this, _TpTabSelectEvent1), (_this = _call_super(this, _TpTabSelectEvent1, [
                        target
                    ])).index = index, _this;
                }
                return _inherits(_TpTabSelectEvent1, TpEvent1), _TpTabSelectEvent1;
            }(TpEvent), "TpTabSelectEvent"), TpTabSelectEvent = _TpTabSelectEvent, __name(_TpMouseEvent = function(TpEvent1) {
                function _TpMouseEvent1(target, nativeEvent) {
                    var _this;
                    return _class_call_check(this, _TpMouseEvent1), (_this = _call_super(this, _TpMouseEvent1, [
                        target
                    ])).native = nativeEvent, _this;
                }
                return _inherits(_TpMouseEvent1, TpEvent1), _TpMouseEvent1;
            }(TpEvent), "TpMouseEvent"), TpMouseEvent = _TpMouseEvent, __name(_BindingApi = function(BladeApi1) {
                function _BindingApi1(controller) {
                    var _this;
                    return _class_call_check(this, _BindingApi1), (_this = _call_super(this, _BindingApi1, [
                        controller
                    ])).onValueChange_ = _this.onValueChange_.bind(_this), _this.emitter_ = new Emitter2(), _this.controller.value.emitter.on("change", _this.onValueChange_), _this;
                }
                return _inherits(_BindingApi1, BladeApi1), _create_class(_BindingApi1, [
                    {
                        key: "label",
                        get: function get() {
                            return this.controller.labelController.props.get("label");
                        },
                        set: function set1(label) {
                            this.controller.labelController.props.set("label", label);
                        }
                    },
                    {
                        key: "key",
                        get: function get() {
                            return this.controller.value.binding.target.key;
                        }
                    },
                    {
                        key: "tag",
                        get: function get() {
                            return this.controller.tag;
                        },
                        set: function set1(tag) {
                            this.controller.tag = tag;
                        }
                    },
                    {
                        key: "on",
                        value: function on(eventName, handler) {
                            var bh = handler.bind(this);
                            return this.emitter_.on(eventName, function(ev) {
                                bh(ev);
                            }, {
                                key: handler
                            }), this;
                        }
                    },
                    {
                        key: "off",
                        value: function off(eventName, handler) {
                            return this.emitter_.off(eventName, handler), this;
                        }
                    },
                    {
                        key: "refresh",
                        value: function refresh() {
                            this.controller.value.fetch();
                        }
                    },
                    {
                        key: "onValueChange_",
                        value: function onValueChange_(ev) {
                            var value = this.controller.value;
                            this.emitter_.emit("change", new TpChangeEvent(this, forceCast(value.binding.target.read()), ev.options.last));
                        }
                    }
                ]), _BindingApi1;
            }(BladeApi), "BindingApi"), BindingApi = _BindingApi, __name(_InputBindingValue = function() {
                function _InputBindingValue1(value, binding) {
                    _class_call_check(this, _InputBindingValue1), this.onValueBeforeChange_ = this.onValueBeforeChange_.bind(this), this.onValueChange_ = this.onValueChange_.bind(this), this.binding = binding, this.value_ = value, this.value_.emitter.on("beforechange", this.onValueBeforeChange_), this.value_.emitter.on("change", this.onValueChange_), this.emitter = new Emitter2();
                }
                return _create_class(_InputBindingValue1, [
                    {
                        key: "rawValue",
                        get: function get() {
                            return this.value_.rawValue;
                        },
                        set: function set1(rawValue) {
                            this.value_.rawValue = rawValue;
                        }
                    },
                    {
                        key: "setRawValue",
                        value: function setRawValue(rawValue, options) {
                            this.value_.setRawValue(rawValue, options);
                        }
                    },
                    {
                        key: "fetch",
                        value: function fetch1() {
                            this.value_.rawValue = this.binding.read();
                        }
                    },
                    {
                        key: "push",
                        value: function push() {
                            this.binding.write(this.value_.rawValue);
                        }
                    },
                    {
                        key: "onValueBeforeChange_",
                        value: function onValueBeforeChange_(ev) {
                            this.emitter.emit("beforechange", Object.assign(Object.assign({}, ev), {
                                sender: this
                            }));
                        }
                    },
                    {
                        key: "onValueChange_",
                        value: function onValueChange_(ev) {
                            this.push(), this.emitter.emit("change", Object.assign(Object.assign({}, ev), {
                                sender: this
                            }));
                        }
                    }
                ]), _InputBindingValue1;
            }(), "InputBindingValue"), InputBindingValue = _InputBindingValue, __name(isInputBindingValue, "isInputBindingValue"), __name(parseObject, "parseObject"), __name(parseArray, "parseArray"), __name(isObject, "isObject"), __name(createMicroParserBuilder, "createMicroParserBuilder"), __name(createMicroParserBuilders, "createMicroParserBuilders"), MicroParsers = {
                optional: createMicroParserBuilders(!0),
                required: createMicroParserBuilders(!1)
            }, __name(parseRecord, "parseRecord"), __name(importBladeState, "importBladeState"), __name(exportBladeState, "exportBladeState"), __name(isValueBladeController, "isValueBladeController"), __name(isBindingValue, "isBindingValue"), SVG_NS = "http://www.w3.org/2000/svg", __name(forceReflow, "forceReflow"), __name(disableTransitionTemporarily, "disableTransitionTemporarily"), __name(supportsTouch, "supportsTouch"), __name(getGlobalObject, "getGlobalObject"), __name(getWindowDocument, "getWindowDocument"), __name(getCanvasContext, "getCanvasContext"), ICON_ID_TO_INNER_HTML_MAP = {
                check: '<path d="M2 8l4 4l8 -8"/>',
                dropdown: '<path d="M5 7h6l-3 3 z"/>',
                p2dpad: '<path d="M8 4v8"/><path d="M4 8h8"/><circle cx="12" cy="12" r="1.2"/>'
            }, __name(createSvgIconElement, "createSvgIconElement"), __name(insertElementAt, "insertElementAt"), __name(removeElement, "removeElement"), __name(removeChildElements, "removeChildElements"), __name(removeChildNodes, "removeChildNodes"), __name(findNextTarget, "findNextTarget"), __name(bindValue, "bindValue"), __name(bindValueMap, "bindValueMap"), PREFIX = "tp", __name(ClassName, "ClassName"), cn$r = ClassName("lbl"), __name(createLabelNode, "createLabelNode"), __name(_LabelView = function _LabelView1(doc, config) {
                var _this = this;
                _class_call_check(this, _LabelView1), this.element = doc.createElement("div"), this.element.classList.add(cn$r()), config.viewProps.bindClassModifiers(this.element);
                var labelElem = doc.createElement("div");
                labelElem.classList.add(cn$r("l")), bindValueMap(config.props, "label", function(value) {
                    isEmpty(value) ? _this.element.classList.add(cn$r(void 0, "nol")) : (_this.element.classList.remove(cn$r(void 0, "nol")), removeChildNodes(labelElem), labelElem.appendChild(createLabelNode(doc, value)));
                }), this.element.appendChild(labelElem), this.labelElement = labelElem;
                var valueElem = doc.createElement("div");
                valueElem.classList.add(cn$r("v")), this.element.appendChild(valueElem), this.valueElement = valueElem;
            }, "LabelView"), LabelView = _LabelView, __name(_LabelController = function() {
                function _LabelController1(doc, config) {
                    _class_call_check(this, _LabelController1), this.props = config.props, this.valueController = config.valueController, this.viewProps = config.valueController.viewProps, this.view = new LabelView(doc, {
                        props: config.props,
                        viewProps: this.viewProps
                    }), this.view.valueElement.appendChild(this.valueController.view.element);
                }
                return _create_class(_LabelController1, [
                    {
                        key: "importProps",
                        value: function importProps(state) {
                            var _this = this;
                            return importBladeState(state, null, function(p) {
                                return {
                                    label: p.optional.string
                                };
                            }, function(result3) {
                                return _this.props.set("label", result3.label), !0;
                            });
                        }
                    },
                    {
                        key: "exportProps",
                        value: function exportProps() {
                            return exportBladeState(null, {
                                label: this.props.get("label")
                            });
                        }
                    }
                ]), _LabelController1;
            }(), "LabelController"), LabelController = _LabelController, __name(getAllBladePositions, "getAllBladePositions"), cn$q = ClassName(""), POS_TO_CLASS_NAME_MAP = {
                veryfirst: "vfst",
                first: "fst",
                last: "lst",
                verylast: "vlst"
            }, __name(_BladeController = function() {
                function _BladeController1(config) {
                    var _this = this;
                    _class_call_check(this, _BladeController1), this.parent_ = null, this.blade = config.blade, this.view = config.view, this.viewProps = config.viewProps;
                    var elem = this.view.element;
                    this.blade.value("positions").emitter.on("change", function() {
                        getAllBladePositions().forEach(function(pos) {
                            elem.classList.remove(cn$q(void 0, POS_TO_CLASS_NAME_MAP[pos]));
                        }), _this.blade.get("positions").forEach(function(pos) {
                            elem.classList.add(cn$q(void 0, POS_TO_CLASS_NAME_MAP[pos]));
                        });
                    }), this.viewProps.handleDispose(function() {
                        removeElement(elem);
                    });
                }
                return _create_class(_BladeController1, [
                    {
                        key: "parent",
                        get: function get() {
                            return this.parent_;
                        },
                        set: function set1(parent) {
                            this.parent_ = parent, this.viewProps.set("parent", this.parent_ ? this.parent_.viewProps : null);
                        }
                    },
                    {
                        key: "importState",
                        value: function importState(state) {
                            var _this = this;
                            return importBladeState(state, null, function(p) {
                                return {
                                    disabled: p.required.boolean,
                                    hidden: p.required.boolean
                                };
                            }, function(result3) {
                                return _this.viewProps.importState(result3), !0;
                            });
                        }
                    },
                    {
                        key: "exportState",
                        value: function exportState() {
                            return exportBladeState(null, Object.assign({}, this.viewProps.exportState()));
                        }
                    }
                ]), _BladeController1;
            }(), "BladeController"), __name(_LabeledValueBladeController = function(BladeController1) {
                function _LabeledValueBladeController1(doc, config) {
                    if (_class_call_check(this, _LabeledValueBladeController1), config.value !== config.valueController.value) throw TpError.shouldNeverHappen();
                    var _this, viewProps = config.valueController.viewProps, lc = new LabelController(doc, {
                        blade: config.blade,
                        props: config.props,
                        valueController: config.valueController
                    });
                    return (_this = _call_super(this, _LabeledValueBladeController1, [
                        Object.assign(Object.assign({}, config), {
                            view: new LabelView(doc, {
                                props: config.props,
                                viewProps: viewProps
                            }),
                            viewProps: viewProps
                        })
                    ])).labelController = lc, _this.value = config.value, _this.valueController = config.valueController, _this.view.valueElement.appendChild(_this.valueController.view.element), _this;
                }
                return _inherits(_LabeledValueBladeController1, BladeController1), _create_class(_LabeledValueBladeController1, [
                    {
                        key: "importState",
                        value: function importState(state) {
                            var _this = this;
                            return importBladeState(state, function(s) {
                                var _a, _b, _c;
                                return _get(_get_prototype_of(_LabeledValueBladeController1.prototype), "importState", _this).call(_this, s) && _this.labelController.importProps(s) && (null == (_c = null == (_b = (_a = _this.valueController).importProps) ? void 0 : _b.call(_a, state)) || _c);
                            }, function(p) {
                                return {
                                    value: p.optional.raw
                                };
                            }, function(result3) {
                                return result3.value && (_this.value.rawValue = result3.value), !0;
                            });
                        }
                    },
                    {
                        key: "exportState",
                        value: function exportState() {
                            var _a, _b, _c, _this = this;
                            return exportBladeState(function() {
                                return _get(_get_prototype_of(_LabeledValueBladeController1.prototype), "exportState", _this).call(_this);
                            }, Object.assign(Object.assign({
                                value: this.value.rawValue
                            }, this.labelController.exportProps()), null != (_c = null == (_b = (_a = this.valueController).exportProps) ? void 0 : _b.call(_a)) ? _c : {}));
                        }
                    }
                ]), _LabeledValueBladeController1;
            }(BladeController = _BladeController), "LabeledValueBladeController"), LabeledValueBladeController = _LabeledValueBladeController, __name(excludeValue, "excludeValue"), __name(_BindingController = function(LabeledValueBladeController1) {
                function _BindingController1(doc, config) {
                    var _this;
                    return _class_call_check(this, _BindingController1), (_this = _call_super(this, _BindingController1, [
                        doc,
                        config
                    ])).tag = config.tag, _this;
                }
                return _inherits(_BindingController1, LabeledValueBladeController1), _create_class(_BindingController1, [
                    {
                        key: "importState",
                        value: function importState(state) {
                            var _this = this;
                            return importBladeState(state, function(_s) {
                                return _get(_get_prototype_of(_BindingController1.prototype), "importState", _this).call(_this, excludeValue(state));
                            }, function(p) {
                                return {
                                    tag: p.optional.string
                                };
                            }, function(result3) {
                                return _this.tag = result3.tag, !0;
                            });
                        }
                    },
                    {
                        key: "exportState",
                        value: function exportState() {
                            var _this = this;
                            return exportBladeState(function() {
                                return excludeValue(_get(_get_prototype_of(_BindingController1.prototype), "exportState", _this).call(_this));
                            }, {
                                binding: {
                                    key: this.value.binding.target.key,
                                    value: this.value.binding.target.read()
                                },
                                tag: this.tag
                            });
                        }
                    }
                ]), _BindingController1;
            }(LabeledValueBladeController), "BindingController"), BindingController = _BindingController, __name(isBindingController, "isBindingController"), __name(_InputBindingController = function(BindingController1) {
                function _InputBindingController1() {
                    return _class_call_check(this, _InputBindingController1), _call_super(this, _InputBindingController1, arguments);
                }
                return _inherits(_InputBindingController1, BindingController1), _create_class(_InputBindingController1, [
                    {
                        key: "importState",
                        value: function importState(state) {
                            var _this = this;
                            return importBladeState(state, function(s) {
                                return _get(_get_prototype_of(_InputBindingController1.prototype), "importState", _this).call(_this, s);
                            }, function(p) {
                                return {
                                    binding: p.required.object({
                                        value: p.required.raw
                                    })
                                };
                            }, function(result3) {
                                return _this.value.binding.inject(result3.binding.value), _this.value.fetch(), !0;
                            });
                        }
                    }
                ]), _InputBindingController1;
            }(BindingController), "InputBindingController"), InputBindingController = _InputBindingController, __name(isInputBindingController, "isInputBindingController"), __name(fillBuffer, "fillBuffer"), __name(initializeBuffer, "initializeBuffer"), __name(createTrimmedBuffer, "createTrimmedBuffer"), __name(createPushedBuffer, "createPushedBuffer"), __name(_MonitorBindingValue = function() {
                function _MonitorBindingValue1(config) {
                    _class_call_check(this, _MonitorBindingValue1), this.emitter = new Emitter2(), this.onTick_ = this.onTick_.bind(this), this.onValueBeforeChange_ = this.onValueBeforeChange_.bind(this), this.onValueChange_ = this.onValueChange_.bind(this), this.binding = config.binding, this.value_ = createValue(initializeBuffer(config.bufferSize)), this.value_.emitter.on("beforechange", this.onValueBeforeChange_), this.value_.emitter.on("change", this.onValueChange_), this.ticker = config.ticker, this.ticker.emitter.on("tick", this.onTick_), this.fetch();
                }
                return _create_class(_MonitorBindingValue1, [
                    {
                        key: "rawValue",
                        get: function get() {
                            return this.value_.rawValue;
                        },
                        set: function set1(rawValue) {
                            this.value_.rawValue = rawValue;
                        }
                    },
                    {
                        key: "setRawValue",
                        value: function setRawValue(rawValue, options) {
                            this.value_.setRawValue(rawValue, options);
                        }
                    },
                    {
                        key: "fetch",
                        value: function fetch1() {
                            this.value_.rawValue = createPushedBuffer(this.value_.rawValue, this.binding.read());
                        }
                    },
                    {
                        key: "onTick_",
                        value: function onTick_() {
                            this.fetch();
                        }
                    },
                    {
                        key: "onValueBeforeChange_",
                        value: function onValueBeforeChange_(ev) {
                            this.emitter.emit("beforechange", Object.assign(Object.assign({}, ev), {
                                sender: this
                            }));
                        }
                    },
                    {
                        key: "onValueChange_",
                        value: function onValueChange_(ev) {
                            this.emitter.emit("change", Object.assign(Object.assign({}, ev), {
                                sender: this
                            }));
                        }
                    }
                ]), _MonitorBindingValue1;
            }(), "MonitorBindingValue"), MonitorBindingValue = _MonitorBindingValue, __name(isMonitorBindingValue, "isMonitorBindingValue"), __name(_MonitorBindingController = function(BindingController1) {
                function _MonitorBindingController1() {
                    return _class_call_check(this, _MonitorBindingController1), _call_super(this, _MonitorBindingController1, arguments);
                }
                return _inherits(_MonitorBindingController1, BindingController1), _create_class(_MonitorBindingController1, [
                    {
                        key: "exportState",
                        value: function exportState() {
                            var _this = this;
                            return exportBladeState(function() {
                                return _get(_get_prototype_of(_MonitorBindingController1.prototype), "exportState", _this).call(_this);
                            }, {
                                binding: {
                                    readonly: !0
                                }
                            });
                        }
                    }
                ]), _MonitorBindingController1;
            }(BindingController), "MonitorBindingController"), MonitorBindingController = _MonitorBindingController, __name(isMonitorBindingController, "isMonitorBindingController"), __name(_ButtonApi = function(BladeApi1) {
                function _ButtonApi1() {
                    return _class_call_check(this, _ButtonApi1), _call_super(this, _ButtonApi1, arguments);
                }
                return _inherits(_ButtonApi1, BladeApi1), _create_class(_ButtonApi1, [
                    {
                        key: "label",
                        get: function get() {
                            return this.controller.labelController.props.get("label");
                        },
                        set: function set1(label) {
                            this.controller.labelController.props.set("label", label);
                        }
                    },
                    {
                        key: "title",
                        get: function get() {
                            var _a;
                            return null != (_a = this.controller.buttonController.props.get("title")) ? _a : "";
                        },
                        set: function set1(title) {
                            this.controller.buttonController.props.set("title", title);
                        }
                    },
                    {
                        key: "on",
                        value: function on(eventName, handler) {
                            var _this = this, bh = handler.bind(this);
                            return this.controller.buttonController.emitter.on(eventName, function(ev) {
                                bh(new TpMouseEvent(_this, ev.nativeEvent));
                            }), this;
                        }
                    },
                    {
                        key: "off",
                        value: function off(eventName, handler) {
                            return this.controller.buttonController.emitter.off(eventName, handler), this;
                        }
                    }
                ]), _ButtonApi1;
            }(BladeApi), "ButtonApi"), ButtonApi = _ButtonApi, __name(applyClass, "applyClass"), __name(valueToClassName, "valueToClassName"), __name(bindValueToTextContent, "bindValueToTextContent"), cn$p = ClassName("btn"), __name(_ButtonView = function _ButtonView1(doc, config) {
                _class_call_check(this, _ButtonView1), this.element = doc.createElement("div"), this.element.classList.add(cn$p()), config.viewProps.bindClassModifiers(this.element);
                var buttonElem = doc.createElement("button");
                buttonElem.classList.add(cn$p("b")), config.viewProps.bindDisabled(buttonElem), this.element.appendChild(buttonElem), this.buttonElement = buttonElem;
                var titleElem = doc.createElement("div");
                titleElem.classList.add(cn$p("t")), bindValueToTextContent(config.props.value("title"), titleElem), this.buttonElement.appendChild(titleElem);
            }, "ButtonView"), ButtonView = _ButtonView, __name(_ButtonController = function() {
                function _ButtonController1(doc, config) {
                    _class_call_check(this, _ButtonController1), this.emitter = new Emitter2(), this.onClick_ = this.onClick_.bind(this), this.props = config.props, this.viewProps = config.viewProps, this.view = new ButtonView(doc, {
                        props: this.props,
                        viewProps: this.viewProps
                    }), this.view.buttonElement.addEventListener("click", this.onClick_);
                }
                return _create_class(_ButtonController1, [
                    {
                        key: "importProps",
                        value: function importProps(state) {
                            var _this = this;
                            return importBladeState(state, null, function(p) {
                                return {
                                    title: p.optional.string
                                };
                            }, function(result3) {
                                return _this.props.set("title", result3.title), !0;
                            });
                        }
                    },
                    {
                        key: "exportProps",
                        value: function exportProps() {
                            return exportBladeState(null, {
                                title: this.props.get("title")
                            });
                        }
                    },
                    {
                        key: "onClick_",
                        value: function onClick_(ev) {
                            this.emitter.emit("click", {
                                nativeEvent: ev,
                                sender: this
                            });
                        }
                    }
                ]), _ButtonController1;
            }(), "ButtonController"), ButtonController = _ButtonController, __name(_ButtonBladeController = function(BladeController1) {
                function _ButtonBladeController1(doc, config) {
                    _class_call_check(this, _ButtonBladeController1);
                    var _this, bc = new ButtonController(doc, {
                        props: config.buttonProps,
                        viewProps: config.viewProps
                    }), lc = new LabelController(doc, {
                        blade: config.blade,
                        props: config.labelProps,
                        valueController: bc
                    });
                    return (_this = _call_super(this, _ButtonBladeController1, [
                        {
                            blade: config.blade,
                            view: lc.view,
                            viewProps: config.viewProps
                        }
                    ])).buttonController = bc, _this.labelController = lc, _this;
                }
                return _inherits(_ButtonBladeController1, BladeController1), _create_class(_ButtonBladeController1, [
                    {
                        key: "importState",
                        value: function importState(state) {
                            var _this = this;
                            return importBladeState(state, function(s) {
                                return _get(_get_prototype_of(_ButtonBladeController1.prototype), "importState", _this).call(_this, s) && _this.buttonController.importProps(s) && _this.labelController.importProps(s);
                            }, function() {
                                return {};
                            }, function() {
                                return !0;
                            });
                        }
                    },
                    {
                        key: "exportState",
                        value: function exportState() {
                            var _this = this;
                            return exportBladeState(function() {
                                return _get(_get_prototype_of(_ButtonBladeController1.prototype), "exportState", _this).call(_this);
                            }, Object.assign(Object.assign({}, this.buttonController.exportProps()), this.labelController.exportProps()));
                        }
                    }
                ]), _ButtonBladeController1;
            }(BladeController), "ButtonBladeController"), ButtonBladeController = _ButtonBladeController, __name(_Semver = function() {
                function _Semver1(text) {
                    _class_call_check(this, _Semver1);
                    var _text_split = _sliced_to_array(text.split("-"), 2), core = _text_split[0], prerelease = _text_split[1], coreComps = core.split(".");
                    this.major = parseInt(coreComps[0], 10), this.minor = parseInt(coreComps[1], 10), this.patch = parseInt(coreComps[2], 10), this.prerelease = null != prerelease ? prerelease : null;
                }
                return _create_class(_Semver1, [
                    {
                        key: "toString",
                        value: function toString() {
                            var core = [
                                this.major,
                                this.minor,
                                this.patch
                            ].join(".");
                            return null !== this.prerelease ? [
                                core,
                                this.prerelease
                            ].join("-") : core;
                        }
                    }
                ]), _Semver1;
            }(), "Semver"), VERSION$1 = new (Semver = _Semver)("2.0.5"), __name(createPlugin, "createPlugin"), ButtonBladePlugin = createPlugin({
                id: "button",
                type: "blade",
                accept: function accept(params) {
                    var result3 = parseRecord(params, function(p) {
                        return {
                            title: p.required.string,
                            view: p.required.constant("button"),
                            label: p.optional.string
                        };
                    });
                    return result3 ? {
                        params: result3
                    } : null;
                },
                controller: function controller(args) {
                    return new ButtonBladeController(args.document, {
                        blade: args.blade,
                        buttonProps: ValueMap.fromObject({
                            title: args.params.title
                        }),
                        labelProps: ValueMap.fromObject({
                            label: args.params.label
                        }),
                        viewProps: args.viewProps
                    });
                },
                api: function api(args) {
                    return _instanceof(args.controller, ButtonBladeController) ? new ButtonApi(args.controller) : null;
                }
            }), __name(addButtonAsBlade, "addButtonAsBlade"), __name(addFolderAsBlade, "addFolderAsBlade"), __name(addTabAsBlade, "addTabAsBlade"), __name(isRefreshable, "isRefreshable"), __name(createBindingTarget, "createBindingTarget"), __name(_RackApi = function() {
                function _RackApi1(controller, pool) {
                    _class_call_check(this, _RackApi1), this.onRackValueChange_ = this.onRackValueChange_.bind(this), this.controller_ = controller, this.emitter_ = new Emitter2(), this.pool_ = pool, this.controller_.rack.emitter.on("valuechange", this.onRackValueChange_);
                }
                return _create_class(_RackApi1, [
                    {
                        key: "children",
                        get: function get() {
                            var _this = this;
                            return this.controller_.rack.children.map(function(bc) {
                                return _this.pool_.createApi(bc);
                            });
                        }
                    },
                    {
                        key: "addBinding",
                        value: function addBinding(object, key, opt_params) {
                            var params = null != opt_params ? opt_params : {}, doc = this.controller_.element.ownerDocument, bc = this.pool_.createBinding(doc, createBindingTarget(object, key), params), api = this.pool_.createBindingApi(bc);
                            return this.add(api, params.index);
                        }
                    },
                    {
                        key: "addFolder",
                        value: function addFolder(params) {
                            return addFolderAsBlade(this, params);
                        }
                    },
                    {
                        key: "addButton",
                        value: function addButton(params) {
                            return addButtonAsBlade(this, params);
                        }
                    },
                    {
                        key: "addTab",
                        value: function addTab(params) {
                            return addTabAsBlade(this, params);
                        }
                    },
                    {
                        key: "add",
                        value: function add(api, opt_index) {
                            var bc = api.controller;
                            return this.controller_.rack.add(bc, opt_index), api;
                        }
                    },
                    {
                        key: "remove",
                        value: function remove(api) {
                            this.controller_.rack.remove(api.controller);
                        }
                    },
                    {
                        key: "addBlade",
                        value: function addBlade(params) {
                            var doc = this.controller_.element.ownerDocument, bc = this.pool_.createBlade(doc, params), api = this.pool_.createApi(bc);
                            return this.add(api, params.index);
                        }
                    },
                    {
                        key: "on",
                        value: function on(eventName, handler) {
                            var bh = handler.bind(this);
                            return this.emitter_.on(eventName, function(ev) {
                                bh(ev);
                            }, {
                                key: handler
                            }), this;
                        }
                    },
                    {
                        key: "off",
                        value: function off(eventName, handler) {
                            return this.emitter_.off(eventName, handler), this;
                        }
                    },
                    {
                        key: "refresh",
                        value: function refresh() {
                            this.children.forEach(function(c) {
                                isRefreshable(c) && c.refresh();
                            });
                        }
                    },
                    {
                        key: "onRackValueChange_",
                        value: function onRackValueChange_(ev) {
                            var bc = ev.bladeController, api = this.pool_.createApi(bc), binding = isBindingValue(bc.value) ? bc.value.binding : null;
                            this.emitter_.emit("change", new TpChangeEvent(api, binding ? binding.target.read() : bc.value.rawValue, ev.options.last));
                        }
                    }
                ]), _RackApi1;
            }(), "RackApi"), RackApi = _RackApi, __name(_ContainerBladeApi = function(BladeApi1) {
                function _ContainerBladeApi1(controller, pool) {
                    var _this;
                    return _class_call_check(this, _ContainerBladeApi1), (_this = _call_super(this, _ContainerBladeApi1, [
                        controller
                    ])).rackApi_ = new RackApi(controller.rackController, pool), _this;
                }
                return _inherits(_ContainerBladeApi1, BladeApi1), _create_class(_ContainerBladeApi1, [
                    {
                        key: "refresh",
                        value: function refresh() {
                            this.rackApi_.refresh();
                        }
                    }
                ]), _ContainerBladeApi1;
            }(BladeApi), "ContainerBladeApi"), ContainerBladeApi = _ContainerBladeApi, __name(_ContainerBladeController = function(BladeController1) {
                function _ContainerBladeController1(config) {
                    var _this;
                    return _class_call_check(this, _ContainerBladeController1), (_this = _call_super(this, _ContainerBladeController1, [
                        {
                            blade: config.blade,
                            view: config.view,
                            viewProps: config.rackController.viewProps
                        }
                    ])).rackController = config.rackController, _this;
                }
                return _inherits(_ContainerBladeController1, BladeController1), _create_class(_ContainerBladeController1, [
                    {
                        key: "importState",
                        value: function importState(state) {
                            var _this = this;
                            return importBladeState(state, function(s) {
                                return _get(_get_prototype_of(_ContainerBladeController1.prototype), "importState", _this).call(_this, s);
                            }, function(p) {
                                return {
                                    children: p.required.array(p.required.raw)
                                };
                            }, function(result3) {
                                return _this.rackController.rack.children.every(function(c, index) {
                                    return c.importState(result3.children[index]);
                                });
                            });
                        }
                    },
                    {
                        key: "exportState",
                        value: function exportState() {
                            var _this = this;
                            return exportBladeState(function() {
                                return _get(_get_prototype_of(_ContainerBladeController1.prototype), "exportState", _this).call(_this);
                            }, {
                                children: this.rackController.rack.children.map(function(c) {
                                    return c.exportState();
                                })
                            });
                        }
                    }
                ]), _ContainerBladeController1;
            }(BladeController), "ContainerBladeController"), ContainerBladeController = _ContainerBladeController, __name(isContainerBladeController, "isContainerBladeController"), __name(_NestedOrderedSet = function() {
                function _NestedOrderedSet1(extract) {
                    _class_call_check(this, _NestedOrderedSet1), this.emitter = new Emitter2(), this.items_ = [], this.cache_ = new Set(), this.onSubListAdd_ = this.onSubListAdd_.bind(this), this.onSubListRemove_ = this.onSubListRemove_.bind(this), this.extract_ = extract;
                }
                return _create_class(_NestedOrderedSet1, [
                    {
                        key: "items",
                        get: function get() {
                            return this.items_;
                        }
                    },
                    {
                        key: "allItems",
                        value: function allItems() {
                            return Array.from(this.cache_);
                        }
                    },
                    {
                        key: "find",
                        value: function find(callback) {
                            var _iteratorNormalCompletion = !0, _didIteratorError = !1, _iteratorError = void 0;
                            try {
                                for(var _step, _iterator = this.allItems()[Symbol.iterator](); !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = !0){
                                    var item = _step.value;
                                    if (callback(item)) return item;
                                }
                            } catch (err) {
                                _didIteratorError = !0, _iteratorError = err;
                            } finally{
                                try {
                                    _iteratorNormalCompletion || null == _iterator.return || _iterator.return();
                                } finally{
                                    if (_didIteratorError) throw _iteratorError;
                                }
                            }
                            return null;
                        }
                    },
                    {
                        key: "includes",
                        value: function includes(item) {
                            return this.cache_.has(item);
                        }
                    },
                    {
                        key: "add",
                        value: function add(item, opt_index) {
                            var _this = this;
                            if (this.includes(item)) throw TpError.shouldNeverHappen();
                            var index = void 0 !== opt_index ? opt_index : this.items_.length;
                            this.items_.splice(index, 0, item), this.cache_.add(item);
                            var subList = this.extract_(item);
                            subList && (subList.emitter.on("add", this.onSubListAdd_), subList.emitter.on("remove", this.onSubListRemove_), subList.allItems().forEach(function(i) {
                                _this.cache_.add(i);
                            })), this.emitter.emit("add", {
                                index: index,
                                item: item,
                                root: this,
                                target: this
                            });
                        }
                    },
                    {
                        key: "remove",
                        value: function remove(item) {
                            var _this = this, index = this.items_.indexOf(item);
                            if (!(index < 0)) {
                                this.items_.splice(index, 1), this.cache_.delete(item);
                                var subList = this.extract_(item);
                                subList && (subList.allItems().forEach(function(i) {
                                    _this.cache_.delete(i);
                                }), subList.emitter.off("add", this.onSubListAdd_), subList.emitter.off("remove", this.onSubListRemove_)), this.emitter.emit("remove", {
                                    index: index,
                                    item: item,
                                    root: this,
                                    target: this
                                });
                            }
                        }
                    },
                    {
                        key: "onSubListAdd_",
                        value: function onSubListAdd_(ev) {
                            this.cache_.add(ev.item), this.emitter.emit("add", {
                                index: ev.index,
                                item: ev.item,
                                root: this,
                                target: ev.target
                            });
                        }
                    },
                    {
                        key: "onSubListRemove_",
                        value: function onSubListRemove_(ev) {
                            this.cache_.delete(ev.item), this.emitter.emit("remove", {
                                index: ev.index,
                                item: ev.item,
                                root: this,
                                target: ev.target
                            });
                        }
                    }
                ]), _NestedOrderedSet1;
            }(), "NestedOrderedSet"), NestedOrderedSet = _NestedOrderedSet, __name(findValueBladeController, "findValueBladeController"), __name(findSubBladeControllerSet, "findSubBladeControllerSet"), __name(_Rack = function() {
                function _Rack1(config) {
                    var _a, _b;
                    _class_call_check(this, _Rack1), this.emitter = new Emitter2(), this.onBladePositionsChange_ = this.onBladePositionsChange_.bind(this), this.onSetAdd_ = this.onSetAdd_.bind(this), this.onSetRemove_ = this.onSetRemove_.bind(this), this.onChildDispose_ = this.onChildDispose_.bind(this), this.onChildPositionsChange_ = this.onChildPositionsChange_.bind(this), this.onChildValueChange_ = this.onChildValueChange_.bind(this), this.onChildViewPropsChange_ = this.onChildViewPropsChange_.bind(this), this.onRackLayout_ = this.onRackLayout_.bind(this), this.onRackValueChange_ = this.onRackValueChange_.bind(this), this.blade_ = null != (_a = config.blade) ? _a : null, null == (_b = this.blade_) || _b.value("positions").emitter.on("\
change", this.onBladePositionsChange_), this.viewProps = config.viewProps, this.bcSet_ = new NestedOrderedSet(findSubBladeControllerSet), this.bcSet_.emitter.on("add", this.onSetAdd_), this.bcSet_.emitter.on("remove", this.onSetRemove_);
                }
                return _create_class(_Rack1, [
                    {
                        key: "children",
                        get: function get() {
                            return this.bcSet_.items;
                        }
                    },
                    {
                        key: "add",
                        value: function add(bc, opt_index) {
                            var _a;
                            null == (_a = bc.parent) || _a.remove(bc), bc.parent = this, this.bcSet_.add(bc, opt_index);
                        }
                    },
                    {
                        key: "remove",
                        value: function remove(bc) {
                            bc.parent = null, this.bcSet_.remove(bc);
                        }
                    },
                    {
                        key: "find",
                        value: function find(finder) {
                            return this.bcSet_.allItems().filter(finder);
                        }
                    },
                    {
                        key: "onSetAdd_",
                        value: function onSetAdd_(ev) {
                            this.updatePositions_();
                            var root = ev.target === ev.root;
                            if (this.emitter.emit("add", {
                                bladeController: ev.item,
                                index: ev.index,
                                root: root,
                                sender: this
                            }), root) {
                                var bc = ev.item;
                                if (bc.viewProps.emitter.on("change", this.onChildViewPropsChange_), bc.blade.value("positions").emitter.on("change", this.onChildPositionsChange_), bc.viewProps.handleDispose(this.onChildDispose_), isValueBladeController(bc)) bc.value.emitter.on("change", this.onChildValueChange_);
                                else if (isContainerBladeController(bc)) {
                                    var rack = bc.rackController.rack;
                                    if (rack) {
                                        var emitter = rack.emitter;
                                        emitter.on("layout", this.onRackLayout_), emitter.on("valuechange", this.onRackValueChange_);
                                    }
                                }
                            }
                        }
                    },
                    {
                        key: "onSetRemove_",
                        value: function onSetRemove_(ev) {
                            this.updatePositions_();
                            var root = ev.target === ev.root;
                            if (this.emitter.emit("remove", {
                                bladeController: ev.item,
                                root: root,
                                sender: this
                            }), root) {
                                var bc = ev.item;
                                if (isValueBladeController(bc)) bc.value.emitter.off("change", this.onChildValueChange_);
                                else if (isContainerBladeController(bc)) {
                                    var rack = bc.rackController.rack;
                                    if (rack) {
                                        var emitter = rack.emitter;
                                        emitter.off("layout", this.onRackLayout_), emitter.off("valuechange", this.onRackValueChange_);
                                    }
                                }
                            }
                        }
                    },
                    {
                        key: "updatePositions_",
                        value: function updatePositions_() {
                            var _this = this, visibleItems = this.bcSet_.items.filter(function(bc) {
                                return !bc.viewProps.get("hidden");
                            }), firstVisibleItem = visibleItems[0], lastVisibleItem = visibleItems[visibleItems.length - 1];
                            this.bcSet_.items.forEach(function(bc) {
                                var ps = [];
                                bc === firstVisibleItem && (ps.push("first"), (!_this.blade_ || _this.blade_.get("positions").includes("veryfirst")) && ps.push("veryfirst")), bc === lastVisibleItem && (ps.push("last"), (!_this.blade_ || _this.blade_.get("positions").includes("verylast")) && ps.push("verylast")), bc.blade.set("positions", ps);
                            });
                        }
                    },
                    {
                        key: "onChildPositionsChange_",
                        value: function onChildPositionsChange_() {
                            this.updatePositions_(), this.emitter.emit("layout", {
                                sender: this
                            });
                        }
                    },
                    {
                        key: "onChildViewPropsChange_",
                        value: function onChildViewPropsChange_(_ev) {
                            this.updatePositions_(), this.emitter.emit("layout", {
                                sender: this
                            });
                        }
                    },
                    {
                        key: "onChildDispose_",
                        value: function onChildDispose_() {
                            var _this = this;
                            this.bcSet_.items.filter(function(bc) {
                                return bc.viewProps.get("disposed");
                            }).forEach(function(bc) {
                                _this.bcSet_.remove(bc);
                            });
                        }
                    },
                    {
                        key: "onChildValueChange_",
                        value: function onChildValueChange_(ev) {
                            var bc = findValueBladeController(this.find(isValueBladeController), ev.sender);
                            if (!bc) throw TpError.alreadyDisposed();
                            this.emitter.emit("valuechange", {
                                bladeController: bc,
                                options: ev.options,
                                sender: this
                            });
                        }
                    },
                    {
                        key: "onRackLayout_",
                        value: function onRackLayout_(_) {
                            this.updatePositions_(), this.emitter.emit("layout", {
                                sender: this
                            });
                        }
                    },
                    {
                        key: "onRackValueChange_",
                        value: function onRackValueChange_(ev) {
                            this.emitter.emit("valuechange", {
                                bladeController: ev.bladeController,
                                options: ev.options,
                                sender: this
                            });
                        }
                    },
                    {
                        key: "onBladePositionsChange_",
                        value: function onBladePositionsChange_() {
                            this.updatePositions_();
                        }
                    }
                ]), _Rack1;
            }(), "Rack"), Rack = _Rack, __name(_RackController = function() {
                function _RackController1(config) {
                    var _this = this;
                    _class_call_check(this, _RackController1), this.onRackAdd_ = this.onRackAdd_.bind(this), this.onRackRemove_ = this.onRackRemove_.bind(this), this.element = config.element, this.viewProps = config.viewProps;
                    var rack = new Rack({
                        blade: config.root ? void 0 : config.blade,
                        viewProps: config.viewProps
                    });
                    rack.emitter.on("add", this.onRackAdd_), rack.emitter.on("remove", this.onRackRemove_), this.rack = rack, this.viewProps.handleDispose(function() {
                        for(var i = _this.rack.children.length - 1; i >= 0; i--)_this.rack.children[i].viewProps.set("disposed", !0);
                    });
                }
                return _create_class(_RackController1, [
                    {
                        key: "onRackAdd_",
                        value: function onRackAdd_(ev) {
                            ev.root && insertElementAt(this.element, ev.bladeController.view.element, ev.index);
                        }
                    },
                    {
                        key: "onRackRemove_",
                        value: function onRackRemove_(ev) {
                            ev.root && removeElement(ev.bladeController.view.element);
                        }
                    }
                ]), _RackController1;
            }(), "RackController"), RackController = _RackController, __name(createBlade, "createBlade"), _Foldable = function(ValueMap1) {
                function _Foldable1(valueMap) {
                    return _class_call_check(this, _Foldable1), _call_super(this, _Foldable1, [
                        valueMap
                    ]);
                }
                return _inherits(_Foldable1, ValueMap1), _create_class(_Foldable1, [
                    {
                        key: "styleExpanded",
                        get: function get() {
                            var _a;
                            return null != (_a = this.get("temporaryExpanded")) ? _a : this.get("exp\
anded");
                        }
                    },
                    {
                        key: "styleHeight",
                        get: function get() {
                            if (!this.styleExpanded) return "0";
                            var exHeight = this.get("expandedHeight");
                            return this.get("shouldFixHeight") && !isEmpty(exHeight) ? "".concat(exHeight, "px") : "auto";
                        }
                    },
                    {
                        key: "bindExpandedClass",
                        value: function bindExpandedClass(elem, expandedClassName) {
                            var _this = this, onExpand = __name(function() {
                                _this.styleExpanded ? elem.classList.add(expandedClassName) : elem.classList.remove(expandedClassName);
                            }, "onExpand");
                            bindValueMap(this, "expanded", onExpand), bindValueMap(this, "temporaryExpanded", onExpand);
                        }
                    },
                    {
                        key: "cleanUpTransition",
                        value: function cleanUpTransition() {
                            this.set("shouldFixHeight", !1), this.set("expandedHeight", null), this.set("completed", !0);
                        }
                    }
                ], [
                    {
                        key: "create",
                        value: function create(expanded) {
                            var coreObj = {
                                completed: !0,
                                expanded: expanded,
                                expandedHeight: null,
                                shouldFixHeight: !1,
                                temporaryExpanded: null
                            };
                            return new _Foldable1(ValueMap.createCore(coreObj));
                        }
                    }
                ]), _Foldable1;
            }(ValueMap), __name(_Foldable, "Foldable"), Foldable = _Foldable, __name(computeExpandedFolderHeight, "computeExpandedFolderHeight"), __name(applyHeight, "applyHeight"), __name(bindFoldable, "bindFoldable"), __name(_FolderApi = function(ContainerBladeApi1) {
                function _FolderApi1(controller, pool) {
                    var _this;
                    return _class_call_check(this, _FolderApi1), (_this = _call_super(this, _FolderApi1, [
                        controller,
                        pool
                    ])).emitter_ = new Emitter2(), _this.controller.foldable.value("expanded").emitter.on("change", function(ev) {
                        _this.emitter_.emit("fold", new TpFoldEvent(_this, ev.sender.rawValue));
                    }), _this.rackApi_.on("change", function(ev) {
                        _this.emitter_.emit("change", ev);
                    }), _this;
                }
                return _inherits(_FolderApi1, ContainerBladeApi1), _create_class(_FolderApi1, [
                    {
                        key: "expanded",
                        get: function get() {
                            return this.controller.foldable.get("expanded");
                        },
                        set: function set1(expanded) {
                            this.controller.foldable.set("expanded", expanded);
                        }
                    },
                    {
                        key: "title",
                        get: function get() {
                            return this.controller.props.get("title");
                        },
                        set: function set1(title) {
                            this.controller.props.set("title", title);
                        }
                    },
                    {
                        key: "children",
                        get: function get() {
                            return this.rackApi_.children;
                        }
                    },
                    {
                        key: "addBinding",
                        value: function addBinding(object, key, opt_params) {
                            return this.rackApi_.addBinding(object, key, opt_params);
                        }
                    },
                    {
                        key: "addFolder",
                        value: function addFolder(params) {
                            return this.rackApi_.addFolder(params);
                        }
                    },
                    {
                        key: "addButton",
                        value: function addButton(params) {
                            return this.rackApi_.addButton(params);
                        }
                    },
                    {
                        key: "addTab",
                        value: function addTab(params) {
                            return this.rackApi_.addTab(params);
                        }
                    },
                    {
                        key: "add",
                        value: function add(api, opt_index) {
                            return this.rackApi_.add(api, opt_index);
                        }
                    },
                    {
                        key: "remove",
                        value: function remove(api) {
                            this.rackApi_.remove(api);
                        }
                    },
                    {
                        key: "addBlade",
                        value: function addBlade(params) {
                            return this.rackApi_.addBlade(params);
                        }
                    },
                    {
                        key: "on",
                        value: function on(eventName, handler) {
                            var bh = handler.bind(this);
                            return this.emitter_.on(eventName, function(ev) {
                                bh(ev);
                            }, {
                                key: handler
                            }), this;
                        }
                    },
                    {
                        key: "off",
                        value: function off(eventName, handler) {
                            return this.emitter_.off(eventName, handler), this;
                        }
                    }
                ]), _FolderApi1;
            }(ContainerBladeApi), "FolderApi"), FolderApi = _FolderApi, bladeContainerClassName = ClassName("cnt"), __name(_FolderView = function _FolderView1(doc, config) {
                var _a, _this = this;
                _class_call_check(this, _FolderView1), this.className_ = ClassName(null != (_a = config.viewName) ? _a : "fld"), this.element = doc.createElement("div"), this.element.classList.add(this.className_(), bladeContainerClassName()), config.viewProps.bindClassModifiers(this.element), this.foldable_ = config.foldable, this.foldable_.bindExpandedClass(this.element, this.className_(void 0, "expanded")), bindValueMap(this.foldable_, "completed", valueToClassName(this.element, this.className_(void 0, "cpl")));
                var buttonElem = doc.createElement("button");
                buttonElem.classList.add(this.className_("b")), bindValueMap(config.props, "title", function(title) {
                    isEmpty(title) ? _this.element.classList.add(_this.className_(void 0, "not")) : _this.element.classList.remove(_this.className_(void 0, "not"));
                }), config.viewProps.bindDisabled(buttonElem), this.element.appendChild(buttonElem), this.buttonElement = buttonElem;
                var indentElem = doc.createElement("div");
                indentElem.classList.add(this.className_("i")), this.element.appendChild(indentElem);
                var titleElem = doc.createElement("div");
                titleElem.classList.add(this.className_("t")), bindValueToTextContent(config.props.value("title"), titleElem), this.buttonElement.appendChild(titleElem), this.titleElement = titleElem;
                var markElem = doc.createElement("div");
                markElem.classList.add(this.className_("m")), this.buttonElement.appendChild(markElem);
                var containerElem = doc.createElement("div");
                containerElem.classList.add(this.className_("c")), this.element.appendChild(containerElem), this.containerElement = containerElem;
            }, "FolderView"), FolderView = _FolderView, __name(_FolderController = function(ContainerBladeController1) {
                function _FolderController1(doc, config) {
                    _class_call_check(this, _FolderController1);
                    var _this, _a, foldable = Foldable.create(null == (_a = config.expanded) || _a), view = new FolderView(doc, {
                        foldable: foldable,
                        props: config.props,
                        viewName: config.root ? "rot" : void 0,
                        viewProps: config.viewProps
                    });
                    return (_this = _call_super(this, _FolderController1, [
                        Object.assign(Object.assign({}, config), {
                            rackController: new RackController({
                                blade: config.blade,
                                element: view.containerElement,
                                root: config.root,
                                viewProps: config.viewProps
                            }),
                            view: view
                        })
                    ])).onTitleClick_ = _this.onTitleClick_.bind(_this), _this.props = config.props, _this.foldable = foldable, bindFoldable(_this.foldable, _this.view.containerElement), _this.rackController.rack.emitter.on("add", function() {
                        _this.foldable.cleanUpTransition();
                    }), _this.rackController.rack.emitter.on("remove", function() {
                        _this.foldable.cleanUpTransition();
                    }), _this.view.buttonElement.addEventListener("click", _this.onTitleClick_), _this;
                }
                return _inherits(_FolderController1, ContainerBladeController1), _create_class(_FolderController1, [
                    {
                        key: "document",
                        get: function get() {
                            return this.view.element.ownerDocument;
                        }
                    },
                    {
                        key: "importState",
                        value: function importState(state) {
                            var _this = this;
                            return importBladeState(state, function(s) {
                                return _get(_get_prototype_of(_FolderController1.prototype), "importState", _this).call(_this, s);
                            }, function(p) {
                                return {
                                    expanded: p.required.boolean,
                                    title: p.optional.string
                                };
                            }, function(result3) {
                                return _this.foldable.set("expanded", result3.expanded), _this.props.set("title", result3.title), !0;
                            });
                        }
                    },
                    {
                        key: "exportState",
                        value: function exportState() {
                            var _this = this;
                            return exportBladeState(function() {
                                return _get(_get_prototype_of(_FolderController1.prototype), "exportState", _this).call(_this);
                            }, {
                                expanded: this.foldable.get("expanded"),
                                title: this.props.get("title")
                            });
                        }
                    },
                    {
                        key: "onTitleClick_",
                        value: function onTitleClick_() {
                            this.foldable.set("expanded", !this.foldable.get("expanded"));
                        }
                    }
                ]), _FolderController1;
            }(ContainerBladeController), "FolderController"), FolderController = _FolderController, FolderBladePlugin = createPlugin({
                id: "folder",
                type: "blade",
                accept: function accept(params) {
                    var result3 = parseRecord(params, function(p) {
                        return {
                            title: p.required.string,
                            view: p.required.constant("folder"),
                            expanded: p.optional.boolean
                        };
                    });
                    return result3 ? {
                        params: result3
                    } : null;
                },
                controller: function controller(args) {
                    return new FolderController(args.document, {
                        blade: args.blade,
                        expanded: args.params.expanded,
                        props: ValueMap.fromObject({
                            title: args.params.title
                        }),
                        viewProps: args.viewProps
                    });
                },
                api: function api(args) {
                    return _instanceof(args.controller, FolderController) ? new FolderApi(args.controller, args.pool) : null;
                }
            }), cn$o = ClassName(""), __name(valueToModifier, "valueToModifier"), __name(_ViewProps = function(ValueMap1) {
                function _ViewProps1(valueMap) {
                    var _this, _a, ref;
                    return _class_call_check(this, _ViewProps1), (_this = _call_super(this, _ViewProps1, [
                        valueMap
                    ])).onDisabledChange_ = _this.onDisabledChange_.bind(_this), _this.onParentChange_ = _this.onParentChange_.bind(_this), _this.onParentGlobalDisabledChange_ = _this.onParentGlobalDisabledChange_.bind(_this), ref = _sliced_to_array(createReadonlyValue(createValue(_this.getGlobalDisabled_())), 2), _this.globalDisabled_ = ref[0], _this.setGlobalDisabled_ = ref[1], _this.value("disabled").emitter.on("change", _this.onDisabledChange_), _this.value("parent").emitter.on("change", _this.onParentChange_), null == (_a = _this.get("parent")) || _a.globalDisabled.emitter.on("change", _this.onParentGlobalDisabledChange_), _this;
                }
                return _inherits(_ViewProps1, ValueMap1), _create_class(_ViewProps1, [
                    {
                        key: "globalDisabled",
                        get: function get() {
                            return this.globalDisabled_;
                        }
                    },
                    {
                        key: "bindClassModifiers",
                        value: function bindClassModifiers(elem) {
                            bindValue(this.globalDisabled_, valueToModifier(elem, "disabled")), bindValueMap(this, "hidden", valueToModifier(elem, "hidden"));
                        }
                    },
                    {
                        key: "bindDisabled",
                        value: function bindDisabled(target) {
                            bindValue(this.globalDisabled_, function(disabled) {
                                target.disabled = disabled;
                            });
                        }
                    },
                    {
                        key: "bindTabIndex",
                        value: function bindTabIndex(elem) {
                            bindValue(this.globalDisabled_, function(disabled) {
                                elem.tabIndex = disabled ? -1 : 0;
                            });
                        }
                    },
                    {
                        key: "handleDispose",
                        value: function handleDispose(callback) {
                            this.value("disposed").emitter.on("change", function(disposed) {
                                disposed && callback();
                            });
                        }
                    },
                    {
                        key: "importState",
                        value: function importState(state) {
                            this.set("disabled", state.disabled), this.set("hidden", state.hidden);
                        }
                    },
                    {
                        key: "exportState",
                        value: function exportState() {
                            return {
                                disabled: this.get("disabled"),
                                hidden: this.get("hidden")
                            };
                        }
                    },
                    {
                        key: "getGlobalDisabled_",
                        value: function getGlobalDisabled_() {
                            var parent = this.get("parent");
                            return !!parent && parent.globalDisabled.rawValue || this.get("disabled");
                        }
                    },
                    {
                        key: "updateGlobalDisabled_",
                        value: function updateGlobalDisabled_() {
                            this.setGlobalDisabled_(this.getGlobalDisabled_());
                        }
                    },
                    {
                        key: "onDisabledChange_",
                        value: function onDisabledChange_() {
                            this.updateGlobalDisabled_();
                        }
                    },
                    {
                        key: "onParentGlobalDisabledChange_",
                        value: function onParentGlobalDisabledChange_() {
                            this.updateGlobalDisabled_();
                        }
                    },
                    {
                        key: "onParentChange_",
                        value: function onParentChange_(ev) {
                            var _a, prevParent = ev.previousRawValue;
                            null == prevParent || prevParent.globalDisabled.emitter.off("change", this.onParentGlobalDisabledChange_), null == (_a = this.get("parent")) || _a.globalDisabled.emitter.on("change", this.onParentGlobalDisabledChange_), this.updateGlobalDisabled_();
                        }
                    }
                ], [
                    {
                        key: "create",
                        value: function create(opt_initialValue) {
                            var _a, _b, _c, initialValue = null != opt_initialValue ? opt_initialValue : {};
                            return new _ViewProps1(ValueMap.createCore({
                                disabled: null != (_a = initialValue.disabled) && _a,
                                disposed: !1,
                                hidden: null != (_b = initialValue.hidden) && _b,
                                parent: null != (_c = initialValue.parent) ? _c : null
                            }));
                        }
                    }
                ]), _ViewProps1;
            }(ValueMap), "ViewProps"), ViewProps = _ViewProps, cn$n = ClassName("tbp"), __name(_TabPageView = function _TabPageView1(doc, config) {
                _class_call_check(this, _TabPageView1), this.element = doc.createElement("div"), this.element.classList.add(cn$n()), config.viewProps.bindClassModifiers(this.element);
                var containerElem = doc.createElement("div");
                containerElem.classList.add(cn$n("c")), this.element.appendChild(containerElem), this.containerElement = containerElem;
            }, "TabPageView"), TabPageView = _TabPageView, cn$m = ClassName("tbi"), __name(_TabItemView = function _TabItemView1(doc, config) {
                var _this = this;
                _class_call_check(this, _TabItemView1), this.element = doc.createElement("div"), this.element.classList.add(cn$m()), config.viewProps.bindClassModifiers(this.element), bindValueMap(config.props, "selected", function(selected) {
                    selected ? _this.element.classList.add(cn$m(void 0, "sel")) : _this.element.classList.remove(cn$m(void 0, "sel"));
                });
                var buttonElem = doc.createElement("button");
                buttonElem.classList.add(cn$m("b")), config.viewProps.bindDisabled(buttonElem), this.element.appendChild(buttonElem), this.buttonElement = buttonElem;
                var titleElem = doc.createElement("div");
                titleElem.classList.add(cn$m("t")), bindValueToTextContent(config.props.value("title"), titleElem), this.buttonElement.appendChild(titleElem), this.titleElement = titleElem;
            }, "TabItemView"), TabItemView = _TabItemView, __name(_TabItemController = function() {
                function _TabItemController1(doc, config) {
                    _class_call_check(this, _TabItemController1), this.emitter = new Emitter2(), this.onClick_ = this.onClick_.bind(this), this.props = config.props, this.viewProps = config.viewProps, this.view = new TabItemView(doc, {
                        props: config.props,
                        viewProps: config.viewProps
                    }), this.view.buttonElement.addEventListener("click", this.onClick_);
                }
                return _create_class(_TabItemController1, [
                    {
                        key: "onClick_",
                        value: function onClick_() {
                            this.emitter.emit("click", {
                                sender: this
                            });
                        }
                    }
                ]), _TabItemController1;
            }(), "TabItemController"), TabItemController = _TabItemController, __name(_TabPageController = function(ContainerBladeController1) {
                function _TabPageController1(doc, config) {
                    _class_call_check(this, _TabPageController1);
                    var _this, view = new TabPageView(doc, {
                        viewProps: config.viewProps
                    });
                    return (_this = _call_super(this, _TabPageController1, [
                        Object.assign(Object.assign({}, config), {
                            rackController: new RackController({
                                blade: config.blade,
                                element: view.containerElement,
                                viewProps: config.viewProps
                            }),
                            view: view
                        })
                    ])).onItemClick_ = _this.onItemClick_.bind(_this), _this.ic_ = new TabItemController(doc, {
                        props: config.itemProps,
                        viewProps: ViewProps.create()
                    }), _this.ic_.emitter.on("click", _this.onItemClick_), _this.props = config.props, bindValueMap(_this.props, "selected", function(selected) {
                        _this.itemController.props.set("selected", selected), _this.viewProps.set("hidden", !selected);
                    }), _this;
                }
                return _inherits(_TabPageController1, ContainerBladeController1), _create_class(_TabPageController1, [
                    {
                        key: "itemController",
                        get: function get() {
                            return this.ic_;
                        }
                    },
                    {
                        key: "importState",
                        value: function importState(state) {
                            var _this = this;
                            return importBladeState(state, function(s) {
                                return _get(_get_prototype_of(_TabPageController1.prototype), "importState", _this).call(_this, s);
                            }, function(p) {
                                return {
                                    selected: p.required.boolean,
                                    title: p.required.string
                                };
                            }, function(result3) {
                                return _this.ic_.props.set("selected", result3.selected), _this.ic_.props.set("title", result3.title), !0;
                            });
                        }
                    },
                    {
                        key: "exportState",
                        value: function exportState() {
                            var _this = this;
                            return exportBladeState(function() {
                                return _get(_get_prototype_of(_TabPageController1.prototype), "exportState", _this).call(_this);
                            }, {
                                selected: this.ic_.props.get("selected"),
                                title: this.ic_.props.get("title")
                            });
                        }
                    },
                    {
                        key: "onItemClick_",
                        value: function onItemClick_() {
                            this.props.set("selected", !0);
                        }
                    }
                ]), _TabPageController1;
            }(ContainerBladeController), "TabPageController"), TabPageController = _TabPageController, __name(_TabApi = function(ContainerBladeApi1) {
                function _TabApi1(controller, pool) {
                    var _this;
                    return _class_call_check(this, _TabApi1), (_this = _call_super(this, _TabApi1, [
                        controller,
                        pool
                    ])).emitter_ = new Emitter2(), _this.onSelect_ = _this.onSelect_.bind(_this), _this.pool_ = pool, _this.rackApi_.on("change", function(ev) {
                        _this.emitter_.emit("change", ev);
                    }), _this.controller.tab.selectedIndex.emitter.on("change", _this.onSelect_), _this;
                }
                return _inherits(_TabApi1, ContainerBladeApi1), _create_class(_TabApi1, [
                    {
                        key: "pages",
                        get: function get() {
                            return this.rackApi_.children;
                        }
                    },
                    {
                        key: "addPage",
                        value: function addPage(params) {
                            var pc = new TabPageController(this.controller.view.element.ownerDocument, {
                                blade: createBlade(),
                                itemProps: ValueMap.fromObject({
                                    selected: !1,
                                    title: params.title
                                }),
                                props: ValueMap.fromObject({
                                    selected: !1
                                }),
                                viewProps: ViewProps.create()
                            }), papi = this.pool_.createApi(pc);
                            return this.rackApi_.add(papi, params.index);
                        }
                    },
                    {
                        key: "removePage",
                        value: function removePage(index) {
                            this.rackApi_.remove(this.rackApi_.children[index]);
                        }
                    },
                    {
                        key: "on",
                        value: function on(eventName, handler) {
                            var bh = handler.bind(this);
                            return this.emitter_.on(eventName, function(ev) {
                                bh(ev);
                            }, {
                                key: handler
                            }), this;
                        }
                    },
                    {
                        key: "off",
                        value: function off(eventName, handler) {
                            return this.emitter_.off(eventName, handler), this;
                        }
                    },
                    {
                        key: "onSelect_",
                        value: function onSelect_(ev) {
                            this.emitter_.emit("select", new TpTabSelectEvent(this, ev.rawValue));
                        }
                    }
                ]), _TabApi1;
            }(ContainerBladeApi), "TabApi"), TabApi = _TabApi, __name(_TabPageApi = function(ContainerBladeApi1) {
                function _TabPageApi1() {
                    return _class_call_check(this, _TabPageApi1), _call_super(this, _TabPageApi1, arguments);
                }
                return _inherits(_TabPageApi1, ContainerBladeApi1), _create_class(_TabPageApi1, [
                    {
                        key: "title",
                        get: function get() {
                            var _a;
                            return null != (_a = this.controller.itemController.props.get("title")) ? _a : "";
                        },
                        set: function set1(title) {
                            this.controller.itemController.props.set("title", title);
                        }
                    },
                    {
                        key: "selected",
                        get: function get() {
                            return this.controller.props.get("selected");
                        },
                        set: function set1(selected) {
                            this.controller.props.set("selected", selected);
                        }
                    },
                    {
                        key: "children",
                        get: function get() {
                            return this.rackApi_.children;
                        }
                    },
                    {
                        key: "addButton",
                        value: function addButton(params) {
                            return this.rackApi_.addButton(params);
                        }
                    },
                    {
                        key: "addFolder",
                        value: function addFolder(params) {
                            return this.rackApi_.addFolder(params);
                        }
                    },
                    {
                        key: "addTab",
                        value: function addTab(params) {
                            return this.rackApi_.addTab(params);
                        }
                    },
                    {
                        key: "add",
                        value: function add(api, opt_index) {
                            this.rackApi_.add(api, opt_index);
                        }
                    },
                    {
                        key: "remove",
                        value: function remove(api) {
                            this.rackApi_.remove(api);
                        }
                    },
                    {
                        key: "addBinding",
                        value: function addBinding(object, key, opt_params) {
                            return this.rackApi_.addBinding(object, key, opt_params);
                        }
                    },
                    {
                        key: "addBlade",
                        value: function addBlade(params) {
                            return this.rackApi_.addBlade(params);
                        }
                    }
                ]), _TabPageApi1;
            }(ContainerBladeApi), "TabPageApi"), TabPageApi = _TabPageApi, INDEX_NOT_SELECTED = -1, __name(_Tab = function() {
                function _Tab1() {
                    _class_call_check(this, _Tab1), this.onItemSelectedChange_ = this.onItemSelectedChange_.bind(this), this.empty = createValue(!0), this.selectedIndex = createValue(INDEX_NOT_SELECTED), this.items_ = [];
                }
                return _create_class(_Tab1, [
                    {
                        key: "add",
                        value: function add(item, opt_index) {
                            var index = null != opt_index ? opt_index : this.items_.length;
                            this.items_.splice(index, 0, item), item.emitter.on("change", this.onItemSelectedChange_), this.keepSelection_();
                        }
                    },
                    {
                        key: "remove",
                        value: function remove(item) {
                            var index = this.items_.indexOf(item);
                            index < 0 || (this.items_.splice(index, 1), item.emitter.off("change", this.onItemSelectedChange_), this.keepSelection_());
                        }
                    },
                    {
                        key: "keepSelection_",
                        value: function keepSelection_() {
                            if (0 === this.items_.length) {
                                this.selectedIndex.rawValue = INDEX_NOT_SELECTED, this.empty.rawValue = !0;
                                return;
                            }
                            var firstSelIndex = this.items_.findIndex(function(s) {
                                return s.rawValue;
                            });
                            firstSelIndex < 0 ? (this.items_.forEach(function(s, i) {
                                s.rawValue = 0 === i;
                            }), this.selectedIndex.rawValue = 0) : (this.items_.forEach(function(s, i) {
                                s.rawValue = i === firstSelIndex;
                            }), this.selectedIndex.rawValue = firstSelIndex), this.empty.rawValue = !1;
                        }
                    },
                    {
                        key: "onItemSelectedChange_",
                        value: function onItemSelectedChange_(ev) {
                            if (ev.rawValue) {
                                var index = this.items_.findIndex(function(s) {
                                    return s === ev.sender;
                                });
                                this.items_.forEach(function(s, i) {
                                    s.rawValue = i === index;
                                }), this.selectedIndex.rawValue = index;
                            } else this.keepSelection_();
                        }
                    }
                ]), _Tab1;
            }(), "Tab"), Tab = _Tab, cn$l = ClassName("tab"), __name(_TabView = function _TabView1(doc, config) {
                _class_call_check(this, _TabView1), this.element = doc.createElement("div"), this.element.classList.add(cn$l(), bladeContainerClassName()), config.viewProps.bindClassModifiers(this.element), bindValue(config.empty, valueToClassName(this.element, cn$l(void 0, "nop")));
                var titleElem = doc.createElement("div");
                titleElem.classList.add(cn$l("t")), this.element.appendChild(titleElem), this.itemsElement = titleElem;
                var indentElem = doc.createElement("div");
                indentElem.classList.add(cn$l("i")), this.element.appendChild(indentElem);
                var contentsElem = doc.createElement("div");
                contentsElem.classList.add(cn$l("c")), this.element.appendChild(contentsElem), this.contentsElement = contentsElem;
            }, "TabView"), TabView = _TabView, __name(_TabController = function(ContainerBladeController1) {
                function _TabController1(doc, config) {
                    _class_call_check(this, _TabController1);
                    var _this, tab = new Tab(), view = new TabView(doc, {
                        empty: tab.empty,
                        viewProps: config.viewProps
                    });
                    (_this = _call_super(this, _TabController1, [
                        {
                            blade: config.blade,
                            rackController: new RackController({
                                blade: config.blade,
                                element: view.contentsElement,
                                viewProps: config.viewProps
                            }),
                            view: view
                        }
                    ])).onRackAdd_ = _this.onRackAdd_.bind(_this), _this.onRackRemove_ = _this.onRackRemove_.bind(_this);
                    var rack = _this.rackController.rack;
                    return rack.emitter.on("add", _this.onRackAdd_), rack.emitter.on("remove", _this.onRackRemove_), _this.tab = tab, _this;
                }
                return _inherits(_TabController1, ContainerBladeController1), _create_class(_TabController1, [
                    {
                        key: "add",
                        value: function add(pc, opt_index) {
                            this.rackController.rack.add(pc, opt_index);
                        }
                    },
                    {
                        key: "remove",
                        value: function remove(index) {
                            this.rackController.rack.remove(this.rackController.rack.children[index]);
                        }
                    },
                    {
                        key: "onRackAdd_",
                        value: function onRackAdd_(ev) {
                            if (ev.root) {
                                var pc = ev.bladeController;
                                insertElementAt(this.view.itemsElement, pc.itemController.view.element, ev.index), pc.itemController.viewProps.set("parent", this.viewProps), this.tab.add(pc.props.value("selected"));
                            }
                        }
                    },
                    {
                        key: "onRackRemove_",
                        value: function onRackRemove_(ev) {
                            if (ev.root) {
                                var pc = ev.bladeController;
                                removeElement(pc.itemController.view.element), pc.itemController.viewProps.set("parent", null), this.tab.remove(pc.props.value("selected"));
                            }
                        }
                    }
                ]), _TabController1;
            }(ContainerBladeController), "TabController"), TabController = _TabController, TabBladePlugin = createPlugin({
                id: "tab",
                type: "blade",
                accept: function accept(params) {
                    var result3 = parseRecord(params, function(p) {
                        return {
                            pages: p.required.array(p.required.object({
                                title: p.required.string
                            })),
                            view: p.required.constant("tab")
                        };
                    });
                    return result3 && 0 !== result3.pages.length ? {
                        params: result3
                    } : null;
                },
                controller: function controller(args) {
                    var c = new TabController(args.document, {
                        blade: args.blade,
                        viewProps: args.viewProps
                    });
                    return args.params.pages.forEach(function(p) {
                        var pc = new TabPageController(args.document, {
                            blade: createBlade(),
                            itemProps: ValueMap.fromObject({
                                selected: !1,
                                title: p.title
                            }),
                            props: ValueMap.fromObject({
                                selected: !1
                            }),
                            viewProps: ViewProps.create()
                        });
                        c.add(pc);
                    }), c;
                },
                api: function api(args) {
                    return _instanceof(args.controller, TabController) ? new TabApi(args.controller, args.pool) : _instanceof(args.controller, TabPageController) ? new TabPageApi(args.controller, args.pool) : null;
                }
            }), __name(createBladeController, "createBladeController"), __name(_ListInputBindingApi = function(BindingApi1) {
                function _ListInputBindingApi1() {
                    return _class_call_check(this, _ListInputBindingApi1), _call_super(this, _ListInputBindingApi1, arguments);
                }
                return _inherits(_ListInputBindingApi1, BindingApi1), _create_class(_ListInputBindingApi1, [
                    {
                        key: "options",
                        get: function get() {
                            return this.controller.valueController.props.get("options");
                        },
                        set: function set1(options) {
                            this.controller.valueController.props.set("options", options);
                        }
                    }
                ]), _ListInputBindingApi1;
            }(BindingApi), "ListInputBindingApi"), ListInputBindingApi = _ListInputBindingApi, __name(_ManualTicker = function() {
                function _ManualTicker1() {
                    _class_call_check(this, _ManualTicker1), this.disabled = !1, this.emitter = new Emitter2();
                }
                return _create_class(_ManualTicker1, [
                    {
                        key: "dispose",
                        value: function dispose() {}
                    },
                    {
                        key: "tick",
                        value: function tick() {
                            this.disabled || this.emitter.emit("tick", {
                                sender: this
                            });
                        }
                    }
                ]), _ManualTicker1;
            }(), "ManualTicker"), ManualTicker = _ManualTicker, __name(_IntervalTicker = function() {
                function _IntervalTicker1(doc, interval) {
                    _class_call_check(this, _IntervalTicker1), this.disabled_ = !1, this.timerId_ = null, this.onTick_ = this.onTick_.bind(this), this.doc_ = doc, this.emitter = new Emitter2(), this.interval_ = interval, this.setTimer_();
                }
                return _create_class(_IntervalTicker1, [
                    {
                        key: "disabled",
                        get: function get() {
                            return this.disabled_;
                        },
                        set: function set1(inactive) {
                            this.disabled_ = inactive, this.disabled_ ? this.clearTimer_() : this.setTimer_();
                        }
                    },
                    {
                        key: "dispose",
                        value: function dispose() {
                            this.clearTimer_();
                        }
                    },
                    {
                        key: "clearTimer_",
                        value: function clearTimer_() {
                            if (null !== this.timerId_) {
                                var win = this.doc_.defaultView;
                                win && win.clearInterval(this.timerId_), this.timerId_ = null;
                            }
                        }
                    },
                    {
                        key: "setTimer_",
                        value: function setTimer_() {
                            if (this.clearTimer_(), !(this.interval_ <= 0)) {
                                var win = this.doc_.defaultView;
                                win && (this.timerId_ = win.setInterval(this.onTick_, this.interval_));
                            }
                        }
                    },
                    {
                        key: "onTick_",
                        value: function onTick_() {
                            this.disabled_ || this.emitter.emit("tick", {
                                sender: this
                            });
                        }
                    }
                ]), _IntervalTicker1;
            }(), "IntervalTicker"), IntervalTicker = _IntervalTicker, __name(_CompositeConstraint = function() {
                function _CompositeConstraint1(constraints) {
                    _class_call_check(this, _CompositeConstraint1), this.constraints = constraints;
                }
                return _create_class(_CompositeConstraint1, [
                    {
                        key: "constrain",
                        value: function constrain(value) {
                            return this.constraints.reduce(function(result3, c) {
                                return c.constrain(result3);
                            }, value);
                        }
                    }
                ]), _CompositeConstraint1;
            }(), "CompositeConstraint"), CompositeConstraint = _CompositeConstraint, __name(findConstraint, "findConstraint"), __name(_ListConstraint = function() {
                function _ListConstraint1(options) {
                    _class_call_check(this, _ListConstraint1), this.values = ValueMap.fromObject({
                        options: options
                    });
                }
                return _create_class(_ListConstraint1, [
                    {
                        key: "constrain",
                        value: function constrain(value) {
                            var opts = this.values.get("options");
                            return 0 === opts.length || opts.filter(function(item) {
                                return item.value === value;
                            }).length > 0 ? value : opts[0].value;
                        }
                    }
                ]), _ListConstraint1;
            }(), "ListConstraint"), ListConstraint = _ListConstraint, __name(parseListOptions, "parseListOptions"), __name(normalizeListOptions, "normalizeListOptions"), __name(createListConstraint, "createListConstraint"), cn$k = ClassName("lst"), __name(_ListView = function() {
                function _ListView1(doc, config) {
                    var _this = this;
                    _class_call_check(this, _ListView1), this.onValueChange_ = this.onValueChange_.bind(this), this.props_ = config.props, this.element = doc.createElement("div"), this.element.classList.add(cn$k()), config.viewProps.bindClassModifiers(this.element);
                    var selectElem = doc.createElement("select");
                    selectElem.classList.add(cn$k("s")), config.viewProps.bindDisabled(selectElem), this.element.appendChild(selectElem), this.selectElement = selectElem;
                    var markElem = doc.createElement("div");
                    markElem.classList.add(cn$k("m")), markElem.appendChild(createSvgIconElement(doc, "dropdown")), this.element.appendChild(markElem), config.value.emitter.on("change", this.onValueChange_), this.value_ = config.value, bindValueMap(this.props_, "options", function(opts) {
                        removeChildElements(_this.selectElement), opts.forEach(function(item) {
                            var optionElem = doc.createElement("option");
                            optionElem.textContent = item.text, _this.selectElement.appendChild(optionElem);
                        }), _this.update_();
                    });
                }
                return _create_class(_ListView1, [
                    {
                        key: "update_",
                        value: function update_() {
                            var values = this.props_.get("options").map(function(o2) {
                                return o2.value;
                            });
                            this.selectElement.selectedIndex = values.indexOf(this.value_.rawValue);
                        }
                    },
                    {
                        key: "onValueChange_",
                        value: function onValueChange_() {
                            this.update_();
                        }
                    }
                ]), _ListView1;
            }(), "ListView"), ListView = _ListView, __name(_ListController = function() {
                function _ListController1(doc, config) {
                    _class_call_check(this, _ListController1), this.onSelectChange_ = this.onSelectChange_.bind(this), this.props = config.props, this.value = config.value, this.viewProps = config.viewProps, this.view = new ListView(doc, {
                        props: this.props,
                        value: this.value,
                        viewProps: this.viewProps
                    }), this.view.selectElement.addEventListener("change", this.onSelectChange_);
                }
                return _create_class(_ListController1, [
                    {
                        key: "onSelectChange_",
                        value: function onSelectChange_(e) {
                            var selectElem = forceCast(e.currentTarget);
                            this.value.rawValue = this.props.get("options")[selectElem.selectedIndex].value;
                        }
                    },
                    {
                        key: "importProps",
                        value: function importProps(state) {
                            var _this = this;
                            return importBladeState(state, null, function(p) {
                                return {
                                    options: p.required.custom(parseListOptions)
                                };
                            }, function(result3) {
                                return _this.props.set("options", normalizeListOptions(result3.options)), !0;
                            });
                        }
                    },
                    {
                        key: "exportProps",
                        value: function exportProps() {
                            return exportBladeState(null, {
                                options: this.props.get("options")
                            });
                        }
                    }
                ]), _ListController1;
            }(), "ListController"), ListController = _ListController, cn$j = ClassName("pop"), __name(_PopupView = function _PopupView1(doc, config) {
                _class_call_check(this, _PopupView1), this.element = doc.createElement("div"), this.element.classList.add(cn$j()), config.viewProps.bindClassModifiers(this.element), bindValue(config.shows, valueToClassName(this.element, cn$j(void 0, "v")));
            }, "PopupView"), PopupView = _PopupView, __name(_PopupController = function _PopupController1(doc, config) {
                _class_call_check(this, _PopupController1), this.shows = createValue(!1), this.viewProps = config.viewProps, this.view = new PopupView(doc, {
                    shows: this.shows,
                    viewProps: this.viewProps
                });
            }, "PopupController"), PopupController = _PopupController, cn$i = ClassName("txt"), __name(_TextView = function() {
                function _TextView1(doc, config) {
                    _class_call_check(this, _TextView1), this.onChange_ = this.onChange_.bind(this), this.element = doc.createElement("div"), this.element.classList.add(cn$i()), config.viewProps.bindClassModifiers(this.element), this.props_ = config.props, this.props_.emitter.on("change", this.onChange_);
                    var inputElem = doc.createElement("input");
                    inputElem.classList.add(cn$i("i")), inputElem.type = "text", config.viewProps.bindDisabled(inputElem), this.element.appendChild(inputElem), this.inputElement = inputElem, config.value.emitter.on("change", this.onChange_), this.value_ = config.value, this.refresh();
                }
                return _create_class(_TextView1, [
                    {
                        key: "refresh",
                        value: function refresh() {
                            var formatter = this.props_.get("formatter");
                            this.inputElement.value = formatter(this.value_.rawValue);
                        }
                    },
                    {
                        key: "onChange_",
                        value: function onChange_() {
                            this.refresh();
                        }
                    }
                ]), _TextView1;
            }(), "TextView"), TextView = _TextView, __name(_TextController = function() {
                function _TextController1(doc, config) {
                    _class_call_check(this, _TextController1), this.onInputChange_ = this.onInputChange_.bind(this), this.parser_ = config.parser, this.props = config.props, this.value = config.value, this.viewProps = config.viewProps, this.view = new TextView(doc, {
                        props: config.props,
                        value: this.value,
                        viewProps: this.viewProps
                    }), this.view.inputElement.addEventListener("change", this.onInputChange_);
                }
                return _create_class(_TextController1, [
                    {
                        key: "onInputChange_",
                        value: function onInputChange_(e) {
                            var value = forceCast(e.currentTarget).value, parsedValue = this.parser_(value);
                            isEmpty(parsedValue) || (this.value.rawValue = parsedValue), this.view.refresh();
                        }
                    }
                ]), _TextController1;
            }(), "TextController"), TextController = _TextController, __name(boolToString, "boolToString"), __name(boolFromUnknown, "boolFromUnknown"), __name(BooleanFormatter, "BooleanFormatter"), __name(composeParsers, "composeParsers"), innerFormatter = createNumberFormatter(0), __name(formatPercentage, "formatPercentage"), __name(stringFromUnknown, "stringFromUnknown"), __name(formatString, "formatString"), __name(connectValues, "connectValues"), __name(getStepForKey, "getStepForKey"), __name(getVerticalStepKeys, "getVerticalStepKeys"), __name(getHorizontalStepKeys, "getHorizontalStepKeys"), __name(isVerticalArrowKey, "isVerticalArrowKey"), __name(isArrowKey, "isArrowKey"), __name(computeOffset$1, "computeOffset$1"), __name(_PointerHandler = function() {
                function _PointerHandler1(element) {
                    _class_call_check(this, _PointerHandler1), this.lastTouch_ = null, this.onDocumentMouseMove_ = this.onDocumentMouseMove_.bind(this), this.onDocumentMouseUp_ = this.onDocumentMouseUp_.bind(this), this.onMouseDown_ = this.onMouseDown_.bind(this), this.onTouchEnd_ = this.onTouchEnd_.bind(this), this.onTouchMove_ = this.onTouchMove_.bind(this), this.onTouchStart_ = this.onTouchStart_.bind(this), this.elem_ = element, this.emitter = new Emitter2(), element.addEventListener("touchstart", this.onTouchStart_, {
                        passive: !1
                    }), element.addEventListener("touchmove", this.onTouchMove_, {
                        passive: !0
                    }), element.addEventListener("touchend", this.onTouchEnd_), element.addEventListener("mousedown", this.onMouseDown_);
                }
                return _create_class(_PointerHandler1, [
                    {
                        key: "computePosition_",
                        value: function computePosition_(offset) {
                            var rect = this.elem_.getBoundingClientRect();
                            return {
                                bounds: {
                                    width: rect.width,
                                    height: rect.height
                                },
                                point: offset ? {
                                    x: offset.x,
                                    y: offset.y
                                } : null
                            };
                        }
                    },
                    {
                        key: "onMouseDown_",
                        value: function onMouseDown_(ev) {
                            ev.preventDefault(), null == (_a = ev.currentTarget) || _a.focus();
                            var _a, doc = this.elem_.ownerDocument;
                            doc.addEventListener("mousemove", this.onDocumentMouseMove_), doc.addEventListener("mouseup", this.onDocumentMouseUp_), this.emitter.emit("down", {
                                altKey: ev.altKey,
                                data: this.computePosition_(computeOffset$1(ev, this.elem_)),
                                sender: this,
                                shiftKey: ev.shiftKey
                            });
                        }
                    },
                    {
                        key: "onDocumentMouseMove_",
                        value: function onDocumentMouseMove_(ev) {
                            this.emitter.emit("move", {
                                altKey: ev.altKey,
                                data: this.computePosition_(computeOffset$1(ev, this.elem_)),
                                sender: this,
                                shiftKey: ev.shiftKey
                            });
                        }
                    },
                    {
                        key: "onDocumentMouseUp_",
                        value: function onDocumentMouseUp_(ev) {
                            var doc = this.elem_.ownerDocument;
                            doc.removeEventListener("mousemove", this.onDocumentMouseMove_), doc.removeEventListener("mouseup", this.onDocumentMouseUp_), this.emitter.emit("up", {
                                altKey: ev.altKey,
                                data: this.computePosition_(computeOffset$1(ev, this.elem_)),
                                sender: this,
                                shiftKey: ev.shiftKey
                            });
                        }
                    },
                    {
                        key: "onTouchStart_",
                        value: function onTouchStart_(ev) {
                            ev.preventDefault();
                            var touch = ev.targetTouches.item(0), rect = this.elem_.getBoundingClientRect();
                            this.emitter.emit("down", {
                                altKey: ev.altKey,
                                data: this.computePosition_(touch ? {
                                    x: touch.clientX - rect.left,
                                    y: touch.clientY - rect.top
                                } : void 0),
                                sender: this,
                                shiftKey: ev.shiftKey
                            }), this.lastTouch_ = touch;
                        }
                    },
                    {
                        key: "onTouchMove_",
                        value: function onTouchMove_(ev) {
                            var touch = ev.targetTouches.item(0), rect = this.elem_.getBoundingClientRect();
                            this.emitter.emit("move", {
                                altKey: ev.altKey,
                                data: this.computePosition_(touch ? {
                                    x: touch.clientX - rect.left,
                                    y: touch.clientY - rect.top
                                } : void 0),
                                sender: this,
                                shiftKey: ev.shiftKey
                            }), this.lastTouch_ = touch;
                        }
                    },
                    {
                        key: "onTouchEnd_",
                        value: function onTouchEnd_(ev) {
                            var _a, touch = null != (_a = ev.targetTouches.item(0)) ? _a : this.lastTouch_, rect = this.elem_.getBoundingClientRect();
                            this.emitter.emit("up", {
                                altKey: ev.altKey,
                                data: this.computePosition_(touch ? {
                                    x: touch.clientX - rect.left,
                                    y: touch.clientY - rect.top
                                } : void 0),
                                sender: this,
                                shiftKey: ev.shiftKey
                            });
                        }
                    }
                ]), _PointerHandler1;
            }(), "PointerHandler"), PointerHandler = _PointerHandler, cn$h = ClassName("txt"), __name(_NumberTextView = function() {
                function _NumberTextView1(doc, config) {
                    _class_call_check(this, _NumberTextView1), this.onChange_ = this.onChange_.bind(this), this.props_ = config.props, this.props_.emitter.on("change", this.onChange_), this.element = doc.createElement("div"), this.element.classList.add(cn$h(), cn$h(void 0, "num")), config.arrayPosition && this.element.classList.add(cn$h(void 0, config.arrayPosition)), config.viewProps.bindClassModifiers(this.element);
                    var inputElem = doc.createElement("input");
                    inputElem.classList.add(cn$h("i")), inputElem.type = "text", config.viewProps.bindDisabled(inputElem), this.element.appendChild(inputElem), this.inputElement = inputElem, this.onDraggingChange_ = this.onDraggingChange_.bind(this), this.dragging_ = config.dragging, this.dragging_.emitter.on("change", this.onDraggingChange_), this.element.classList.add(cn$h()), this.inputElement.classList.add(cn$h("i"));
                    var knobElem = doc.createElement("div");
                    knobElem.classList.add(cn$h("k")), this.element.appendChild(knobElem), this.knobElement = knobElem;
                    var guideElem = doc.createElementNS(SVG_NS, "svg");
                    guideElem.classList.add(cn$h("g")), this.knobElement.appendChild(guideElem);
                    var bodyElem = doc.createElementNS(SVG_NS, "path");
                    bodyElem.classList.add(cn$h("gb")), guideElem.appendChild(bodyElem), this.guideBodyElem_ = bodyElem;
                    var headElem = doc.createElementNS(SVG_NS, "path");
                    headElem.classList.add(cn$h("gh")), guideElem.appendChild(headElem), this.guideHeadElem_ = headElem;
                    var tooltipElem = doc.createElement("div");
                    tooltipElem.classList.add(ClassName("tt")()), this.knobElement.appendChild(tooltipElem), this.tooltipElem_ = tooltipElem, config.value.emitter.on("change", this.onChange_), this.value = config.value, this.refresh();
                }
                return _create_class(_NumberTextView1, [
                    {
                        key: "onDraggingChange_",
                        value: function onDraggingChange_(ev) {
                            if (null === ev.rawValue) return void this.element.classList.remove(cn$h(void 0, "drg"));
                            this.element.classList.add(cn$h(void 0, "drg"));
                            var x = ev.rawValue / this.props_.get("pointerScale"), aox = x + (x > 0 ? -1 : +(x < 0)), adx = constrainRange(-aox, -4, 4);
                            this.guideHeadElem_.setAttributeNS(null, "d", [
                                "M ".concat(aox + adx, ",0 L").concat(aox, ",4 L").concat(aox + adx, ",8"),
                                "M ".concat(x, ",-1 L").concat(x, ",9")
                            ].join(" ")), this.guideBodyElem_.setAttributeNS(null, "d", "M 0,4 L".concat(x, ",4"));
                            var formatter = this.props_.get("formatter");
                            this.tooltipElem_.textContent = formatter(this.value.rawValue), this.tooltipElem_.style.left = "".concat(x, "px");
                        }
                    },
                    {
                        key: "refresh",
                        value: function refresh() {
                            var formatter = this.props_.get("formatter");
                            this.inputElement.value = formatter(this.value.rawValue);
                        }
                    },
                    {
                        key: "onChange_",
                        value: function onChange_() {
                            this.refresh();
                        }
                    }
                ]), _NumberTextView1;
            }(), "NumberTextView"), NumberTextView = _NumberTextView, __name(_NumberTextController = function() {
                function _NumberTextController1(doc, config) {
                    _class_call_check(this, _NumberTextController1), this.originRawValue_ = 0, this.onInputChange_ = this.onInputChange_.bind(this), this.onInputKeyDown_ = this.onInputKeyDown_.bind(this), this.onInputKeyUp_ = this.onInputKeyUp_.bind(this), this.onPointerDown_ = this.onPointerDown_.bind(this), this.onPointerMove_ = this.onPointerMove_.bind(this), this.onPointerUp_ = this.onPointerUp_.bind(this), this.parser_ = config.parser, this.props = config.props, this.sliderProps_ = null != (_a = config.sliderProps) ? _a : null, this.value = config.value, this.viewProps = config.viewProps, this.dragging_ = createValue(null), this.view = new NumberTextView(doc, {
                        arrayPosition: config.arrayPosition,
                        dragging: this.dragging_,
                        props: this.props,
                        value: this.value,
                        viewProps: this.viewProps
                    }), this.view.inputElement.addEventListener("change", this.onInputChange_), this.view.inputElement.addEventListener("keydown", this.onInputKeyDown_), this.view.inputElement.addEventListener("keyup", this.onInputKeyUp_);
                    var _a, ph = new PointerHandler(this.view.knobElement);
                    ph.emitter.on("down", this.onPointerDown_), ph.emitter.on("move", this.onPointerMove_), ph.emitter.on("up", this.onPointerUp_);
                }
                return _create_class(_NumberTextController1, [
                    {
                        key: "constrainValue_",
                        value: function constrainValue_(value) {
                            var _a, _b, min = null == (_a = this.sliderProps_) ? void 0 : _a.get("min"), max = null == (_b = this.sliderProps_) ? void 0 : _b.get("max"), v = value;
                            return void 0 !== min && (v = Math.max(v, min)), void 0 !== max && (v = Math.min(v, max)), v;
                        }
                    },
                    {
                        key: "onInputChange_",
                        value: function onInputChange_(e) {
                            var value = forceCast(e.currentTarget).value, parsedValue = this.parser_(value);
                            isEmpty(parsedValue) || (this.value.rawValue = this.constrainValue_(parsedValue)), this.view.refresh();
                        }
                    },
                    {
                        key: "onInputKeyDown_",
                        value: function onInputKeyDown_(ev) {
                            var step = getStepForKey(this.props.get("keyScale"), getVerticalStepKeys(ev));
                            0 !== step && this.value.setRawValue(this.constrainValue_(this.value.rawValue + step), {
                                forceEmit: !1,
                                last: !1
                            });
                        }
                    },
                    {
                        key: "onInputKeyUp_",
                        value: function onInputKeyUp_(ev) {
                            0 !== getStepForKey(this.props.get("keyScale"), getVerticalStepKeys(ev)) && this.value.setRawValue(this.value.rawValue, {
                                forceEmit: !0,
                                last: !0
                            });
                        }
                    },
                    {
                        key: "onPointerDown_",
                        value: function onPointerDown_() {
                            this.originRawValue_ = this.value.rawValue, this.dragging_.rawValue = 0;
                        }
                    },
                    {
                        key: "computeDraggingValue_",
                        value: function computeDraggingValue_(data) {
                            if (!data.point) return null;
                            var dx = data.point.x - data.bounds.width / 2;
                            return this.constrainValue_(this.originRawValue_ + dx * this.props.get("pointerScale"));
                        }
                    },
                    {
                        key: "onPointerMove_",
                        value: function onPointerMove_(ev) {
                            var v = this.computeDraggingValue_(ev.data);
                            null !== v && (this.value.setRawValue(v, {
                                forceEmit: !1,
                                last: !1
                            }), this.dragging_.rawValue = this.value.rawValue - this.originRawValue_);
                        }
                    },
                    {
                        key: "onPointerUp_",
                        value: function onPointerUp_(ev) {
                            var v = this.computeDraggingValue_(ev.data);
                            null !== v && (this.value.setRawValue(v, {
                                forceEmit: !0,
                                last: !0
                            }), this.dragging_.rawValue = null);
                        }
                    }
                ]), _NumberTextController1;
            }(), "NumberTextController"), NumberTextController = _NumberTextController, cn$g = ClassName("sld"), __name(_SliderView = function() {
                function _SliderView1(doc, config) {
                    _class_call_check(this, _SliderView1), this.onChange_ = this.onChange_.bind(this), this.props_ = config.props, this.props_.emitter.on("change", this.onChange_), this.element = doc.createElement("div"), this.element.classList.add(cn$g()), config.viewProps.bindClassModifiers(this.element);
                    var trackElem = doc.createElement("div");
                    trackElem.classList.add(cn$g("t")), config.viewProps.bindTabIndex(trackElem), this.element.appendChild(trackElem), this.trackElement = trackElem;
                    var knobElem = doc.createElement("div");
                    knobElem.classList.add(cn$g("k")), this.trackElement.appendChild(knobElem), this.knobElement = knobElem, config.value.emitter.on("change", this.onChange_), this.value = config.value, this.update_();
                }
                return _create_class(_SliderView1, [
                    {
                        key: "update_",
                        value: function update_() {
                            var p = constrainRange(mapRange(this.value.rawValue, this.props_.get("min"), this.props_.get("max"), 0, 100), 0, 100);
                            this.knobElement.style.width = "".concat(p, "%");
                        }
                    },
                    {
                        key: "onChange_",
                        value: function onChange_() {
                            this.update_();
                        }
                    }
                ]), _SliderView1;
            }(), "SliderView"), SliderView = _SliderView, __name(_SliderController = function() {
                function _SliderController1(doc, config) {
                    _class_call_check(this, _SliderController1), this.onKeyDown_ = this.onKeyDown_.bind(this), this.onKeyUp_ = this.onKeyUp_.bind(this), this.onPointerDownOrMove_ = this.onPointerDownOrMove_.bind(this), this.onPointerUp_ = this.onPointerUp_.bind(this), this.value = config.value, this.viewProps = config.viewProps, this.props = config.props, this.view = new SliderView(doc, {
                        props: this.props,
                        value: this.value,
                        viewProps: this.viewProps
                    }), this.ptHandler_ = new PointerHandler(this.view.trackElement), this.ptHandler_.emitter.on("down", this.onPointerDownOrMove_), this.ptHandler_.emitter.on("move", this.onPointerDownOrMove_), this.ptHandler_.emitter.on("up", this.onPointerUp_), this.view.trackElement.addEventListener("keydown", this.onKeyDown_), this.view.trackElement.addEventListener("keyup", this.onKeyUp_);
                }
                return _create_class(_SliderController1, [
                    {
                        key: "handlePointerEvent_",
                        value: function handlePointerEvent_(d, opts) {
                            d.point && this.value.setRawValue(mapRange(constrainRange(d.point.x, 0, d.bounds.width), 0, d.bounds.width, this.props.get("min"), this.props.get("max")), opts);
                        }
                    },
                    {
                        key: "onPointerDownOrMove_",
                        value: function onPointerDownOrMove_(ev) {
                            this.handlePointerEvent_(ev.data, {
                                forceEmit: !1,
                                last: !1
                            });
                        }
                    },
                    {
                        key: "onPointerUp_",
                        value: function onPointerUp_(ev) {
                            this.handlePointerEvent_(ev.data, {
                                forceEmit: !0,
                                last: !0
                            });
                        }
                    },
                    {
                        key: "onKeyDown_",
                        value: function onKeyDown_(ev) {
                            var step = getStepForKey(this.props.get("keyScale"), getHorizontalStepKeys(ev));
                            0 !== step && this.value.setRawValue(this.value.rawValue + step, {
                                forceEmit: !1,
                                last: !1
                            });
                        }
                    },
                    {
                        key: "onKeyUp_",
                        value: function onKeyUp_(ev) {
                            0 !== getStepForKey(this.props.get("keyScale"), getHorizontalStepKeys(ev)) && this.value.setRawValue(this.value.rawValue, {
                                forceEmit: !0,
                                last: !0
                            });
                        }
                    }
                ]), _SliderController1;
            }(), "SliderController"), SliderController = _SliderController, cn$f = ClassName("sldtxt"), __name(_SliderTextView = function _SliderTextView1(doc, config) {
                _class_call_check(this, _SliderTextView1), this.element = doc.createElement("div"), this.element.classList.add(cn$f());
                var sliderElem = doc.createElement("div");
                sliderElem.classList.add(cn$f("s")), this.sliderView_ = config.sliderView, sliderElem.appendChild(this.sliderView_.element), this.element.appendChild(sliderElem);
                var textElem = doc.createElement("div");
                textElem.classList.add(cn$f("t")), this.textView_ = config.textView, textElem.appendChild(this.textView_.element), this.element.appendChild(textElem);
            }, "SliderTextView"), SliderTextView = _SliderTextView, __name(_SliderTextController = function() {
                function _SliderTextController1(doc, config) {
                    _class_call_check(this, _SliderTextController1), this.value = config.value, this.viewProps = config.viewProps, this.sliderC_ = new SliderController(doc, {
                        props: config.sliderProps,
                        value: config.value,
                        viewProps: this.viewProps
                    }), this.textC_ = new NumberTextController(doc, {
                        parser: config.parser,
                        props: config.textProps,
                        sliderProps: config.sliderProps,
                        value: config.value,
                        viewProps: config.viewProps
                    }), this.view = new SliderTextView(doc, {
                        sliderView: this.sliderC_.view,
                        textView: this.textC_.view
                    });
                }
                return _create_class(_SliderTextController1, [
                    {
                        key: "sliderController",
                        get: function get() {
                            return this.sliderC_;
                        }
                    },
                    {
                        key: "textController",
                        get: function get() {
                            return this.textC_;
                        }
                    },
                    {
                        key: "importProps",
                        value: function importProps(state) {
                            var _this = this;
                            return importBladeState(state, null, function(p) {
                                return {
                                    max: p.required.number,
                                    min: p.required.number
                                };
                            }, function(result3) {
                                var sliderProps = _this.sliderC_.props;
                                return sliderProps.set("max", result3.max), sliderProps.set("min", result3.min), !0;
                            });
                        }
                    },
                    {
                        key: "exportProps",
                        value: function exportProps() {
                            var sliderProps = this.sliderC_.props;
                            return exportBladeState(null, {
                                max: sliderProps.get("max"),
                                min: sliderProps.get("min")
                            });
                        }
                    }
                ]), _SliderTextController1;
            }(), "SliderTextController"), SliderTextController = _SliderTextController, __name(createSliderTextProps, "createSliderTextProps"), CSS_VAR_MAP = {
                containerUnitSize: "cnt-usz"
            }, __name(getCssVar, "getCssVar"), __name(createPointDimensionParser, "createPointDimensionParser"), __name(parsePointDimensionParams, "parsePointDimensionParams"), __name(createDimensionConstraint, "createDimensionConstraint"), __name(isCompatible, "isCompatible"), __name(parsePickerLayout, "parsePickerLayout"), __name(writePrimitive, "writePrimitive"), cn$e = ClassName("ckb"), __name(_CheckboxView = function() {
                function _CheckboxView1(doc, config) {
                    _class_call_check(this, _CheckboxView1), this.onValueChange_ = this.onValueChange_.bind(this), this.element = doc.createElement("div"), this.element.classList.add(cn$e()), config.viewProps.bindClassModifiers(this.element);
                    var labelElem = doc.createElement("label");
                    labelElem.classList.add(cn$e("l")), this.element.appendChild(labelElem), this.labelElement = labelElem;
                    var inputElem = doc.createElement("input");
                    inputElem.classList.add(cn$e("i")), inputElem.type = "checkbox", this.labelElement.appendChild(inputElem), this.inputElement = inputElem, config.viewProps.bindDisabled(this.inputElement);
                    var wrapperElem = doc.createElement("div");
                    wrapperElem.classList.add(cn$e("w")), this.labelElement.appendChild(wrapperElem);
                    var markElem = createSvgIconElement(doc, "check");
                    wrapperElem.appendChild(markElem), config.value.emitter.on("change", this.onValueChange_), this.value = config.value, this.update_();
                }
                return _create_class(_CheckboxView1, [
                    {
                        key: "update_",
                        value: function update_() {
                            this.inputElement.checked = this.value.rawValue;
                        }
                    },
                    {
                        key: "onValueChange_",
                        value: function onValueChange_() {
                            this.update_();
                        }
                    }
                ]), _CheckboxView1;
            }(), "CheckboxView"), CheckboxView = _CheckboxView, __name(_CheckboxController = function() {
                function _CheckboxController1(doc, config) {
                    _class_call_check(this, _CheckboxController1), this.onInputChange_ = this.onInputChange_.bind(this), this.onLabelMouseDown_ = this.onLabelMouseDown_.bind(this), this.value = config.value, this.viewProps = config.viewProps, this.view = new CheckboxView(doc, {
                        value: this.value,
                        viewProps: this.viewProps
                    }), this.view.inputElement.addEventListener("change", this.onInputChange_), this.view.labelElement.addEventListener("mousedown", this.onLabelMouseDown_);
                }
                return _create_class(_CheckboxController1, [
                    {
                        key: "onInputChange_",
                        value: function onInputChange_(ev) {
                            var inputElem = forceCast(ev.currentTarget);
                            this.value.rawValue = inputElem.checked, ev.preventDefault(), ev.stopPropagation();
                        }
                    },
                    {
                        key: "onLabelMouseDown_",
                        value: function onLabelMouseDown_(ev) {
                            ev.preventDefault();
                        }
                    }
                ]), _CheckboxController1;
            }(), "CheckboxController"), CheckboxController = _CheckboxController, __name(createConstraint$6, "createConstraint$6"), BooleanInputPlugin = createPlugin({
                id: "input-bool",
                type: "input",
                accept: __name(function(value, params) {
                    if ("boolean" != typeof value) return null;
                    var result3 = parseRecord(params, function(p) {
                        return {
                            options: p.optional.custom(parseListOptions),
                            readonly: p.optional.constant(!1)
                        };
                    });
                    return result3 ? {
                        initialValue: value,
                        params: result3
                    } : null;
                }, "accept"),
                binding: {
                    reader: __name(function(_args) {
                        return boolFromUnknown;
                    }, "reader"),
                    constraint: __name(function(args) {
                        return createConstraint$6(args.params);
                    }, "constraint"),
                    writer: __name(function(_args) {
                        return writePrimitive;
                    }, "writer")
                },
                controller: __name(function(args) {
                    var doc = args.document, value = args.value, c = args.constraint, lc = c && findConstraint(c, ListConstraint);
                    return lc ? new ListController(doc, {
                        props: new ValueMap({
                            options: lc.values.value("options")
                        }),
                        value: value,
                        viewProps: args.viewProps
                    }) : new CheckboxController(doc, {
                        value: value,
                        viewProps: args.viewProps
                    });
                }, "controller"),
                api: function api(args) {
                    return "boolean" != typeof args.controller.value.rawValue ? null : _instanceof(args.controller.valueController, ListController) ? new ListInputBindingApi(args.controller) : null;
                }
            }), cn$d = ClassName("col"), __name(_ColorView = function _ColorView1(doc, config) {
                _class_call_check(this, _ColorView1), this.element = doc.createElement("div"), this.element.classList.add(cn$d()), config.foldable.bindExpandedClass(this.element, cn$d(void 0, "expanded")), bindValueMap(config.foldable, "completed", valueToClassName(this.element, cn$d(void 0, "cp\
l")));
                var headElem = doc.createElement("div");
                headElem.classList.add(cn$d("h")), this.element.appendChild(headElem);
                var swatchElem = doc.createElement("div");
                swatchElem.classList.add(cn$d("s")), headElem.appendChild(swatchElem), this.swatchElement = swatchElem;
                var textElem = doc.createElement("div");
                if (textElem.classList.add(cn$d("t")), headElem.appendChild(textElem), this.textElement = textElem, "inline" === config.pickerLayout) {
                    var pickerElem = doc.createElement("div");
                    pickerElem.classList.add(cn$d("p")), this.element.appendChild(pickerElem), this.pickerElement = pickerElem;
                } else this.pickerElement = null;
            }, "ColorView"), ColorView = _ColorView, __name(rgbToHslInt, "rgbToHslInt"), __name(hslToRgbInt, "hslToRgbInt"), __name(rgbToHsvInt, "rgbToHsvInt"), __name(hsvToRgbInt, "hsvToRgbInt"), __name(hslToHsvInt, "hslToHsvInt"), __name(hsvToHslInt, "hsvToHslInt"), __name(removeAlphaComponent, "removeAlphaComponent"), __name(appendAlphaComponent, "appendAlphaComponent"), MODE_CONVERTER_MAP = {
                hsl: {
                    hsl: __name(function(h, s, l) {
                        return [
                            h,
                            s,
                            l
                        ];
                    }, "hsl"),
                    hsv: hslToHsvInt,
                    rgb: hslToRgbInt
                },
                hsv: {
                    hsl: hsvToHslInt,
                    hsv: __name(function(h, s, v) {
                        return [
                            h,
                            s,
                            v
                        ];
                    }, "hsv"),
                    rgb: hsvToRgbInt
                },
                rgb: {
                    hsl: rgbToHslInt,
                    hsv: rgbToHsvInt,
                    rgb: __name(function(r, g, b) {
                        return [
                            r,
                            g,
                            b
                        ];
                    }, "rgb")
                }
            }, __name(getColorMaxComponents, "getColorMaxComponents"), __name(loopHueRange, "loopHueRange"), __name(constrainColorComponents, "constrainColorComponents"), __name(convertColorType, "convertColorType"), __name(convertColor, "convertColor"), __name(_IntColor = function() {
                function _IntColor1(comps, mode) {
                    _class_call_check(this, _IntColor1), this.type = "int", this.mode = mode, this.comps_ = constrainColorComponents(comps, mode, this.type);
                }
                return _create_class(_IntColor1, [
                    {
                        key: "getComponents",
                        value: function getComponents(opt_mode) {
                            return appendAlphaComponent(convertColor(removeAlphaComponent(this.comps_), {
                                mode: this.mode,
                                type: this.type
                            }, {
                                mode: null != opt_mode ? opt_mode : this.mode,
                                type: this.type
                            }), this.comps_[3]);
                        }
                    },
                    {
                        key: "toRgbaObject",
                        value: function toRgbaObject() {
                            var rgbComps = this.getComponents("rgb");
                            return {
                                r: rgbComps[0],
                                g: rgbComps[1],
                                b: rgbComps[2],
                                a: rgbComps[3]
                            };
                        }
                    }
                ], [
                    {
                        key: "black",
                        value: function black() {
                            return new _IntColor1([
                                0,
                                0,
                                0
                            ], "rgb");
                        }
                    }
                ]), _IntColor1;
            }(), "IntColor"), IntColor = _IntColor, cn$c = ClassName("colp"), __name(_ColorPickerView = function() {
                function _ColorPickerView1(doc, config) {
                    _class_call_check(this, _ColorPickerView1), this.alphaViews_ = null, this.element = doc.createElement("div"), this.element.classList.add(cn$c()), config.viewProps.bindClassModifiers(this.element);
                    var hsvElem = doc.createElement("div");
                    hsvElem.classList.add(cn$c("hsv"));
                    var svElem = doc.createElement("div");
                    svElem.classList.add(cn$c("sv")), this.svPaletteView_ = config.svPaletteView, svElem.appendChild(this.svPaletteView_.element), hsvElem.appendChild(svElem);
                    var hElem = doc.createElement("div");
                    hElem.classList.add(cn$c("h")), this.hPaletteView_ = config.hPaletteView, hElem.appendChild(this.hPaletteView_.element), hsvElem.appendChild(hElem), this.element.appendChild(hsvElem);
                    var rgbElem = doc.createElement("div");
                    if (rgbElem.classList.add(cn$c("rgb")), this.textsView_ = config.textsView, rgbElem.appendChild(this.textsView_.element), this.element.appendChild(rgbElem), config.alphaViews) {
                        this.alphaViews_ = {
                            palette: config.alphaViews.palette,
                            text: config.alphaViews.text
                        };
                        var aElem = doc.createElement("div");
                        aElem.classList.add(cn$c("a"));
                        var apElem = doc.createElement("div");
                        apElem.classList.add(cn$c("ap")), apElem.appendChild(this.alphaViews_.palette.element), aElem.appendChild(apElem);
                        var atElem = doc.createElement("div");
                        atElem.classList.add(cn$c("at")), atElem.appendChild(this.alphaViews_.text.element), aElem.appendChild(atElem), this.element.appendChild(aElem);
                    }
                }
                return _create_class(_ColorPickerView1, [
                    {
                        key: "allFocusableElements",
                        get: function get() {
                            var elems = [
                                this.svPaletteView_.element,
                                this.hPaletteView_.element,
                                this.textsView_.modeSelectElement
                            ].concat(_to_consumable_array(this.textsView_.inputViews.map(function(v) {
                                return v.inputElement;
                            })));
                            return this.alphaViews_ && elems.push(this.alphaViews_.palette.element, this.alphaViews_.text.inputElement), elems;
                        }
                    }
                ]), _ColorPickerView1;
            }(), "ColorPickerView"), ColorPickerView = _ColorPickerView, __name(parseColorType, "parseColorType"), __name(parseColorInputParams, "parseColorInputParams"), __name(getKeyScaleForColor, "getKeyScaleForColor"), __name(extractColorType, "extractColorType"), __name(_FloatColor = function() {
                function _FloatColor1(comps, mode) {
                    _class_call_check(this, _FloatColor1), this.type = "float", this.mode = mode, this.comps_ = constrainColorComponents(comps, mode, this.type);
                }
                return _create_class(_FloatColor1, [
                    {
                        key: "getComponents",
                        value: function getComponents(opt_mode) {
                            return appendAlphaComponent(convertColor(removeAlphaComponent(this.comps_), {
                                mode: this.mode,
                                type: this.type
                            }, {
                                mode: null != opt_mode ? opt_mode : this.mode,
                                type: this.type
                            }), this.comps_[3]);
                        }
                    },
                    {
                        key: "toRgbaObject",
                        value: function toRgbaObject() {
                            var rgbComps = this.getComponents("rgb");
                            return {
                                r: rgbComps[0],
                                g: rgbComps[1],
                                b: rgbComps[2],
                                a: rgbComps[3]
                            };
                        }
                    }
                ]), _FloatColor1;
            }(), "FloatColor"), FloatColor = _FloatColor, TYPE_TO_CONSTRUCTOR_MAP = {
                int: __name(function(comps, mode) {
                    return new IntColor(comps, mode);
                }, "int"),
                float: __name(function(comps, mode) {
                    return new FloatColor(comps, mode);
                }, "float")
            }, __name(createColor, "createColor"), __name(isFloatColor, "isFloatColor"), __name(isIntColor, "isIntColor"), __name(convertFloatToInt, "convertFloatToInt"), __name(convertIntToFloat, "convertIntToFloat"), __name(mapColorType, "mapColorType"), __name(equalsStringColorFormat, "equalsStringColorFormat"), __name(parseCssNumberOrPercentage, "parseCssNumberOrPercentage"), ANGLE_TO_DEG_MAP = {
                deg: __name(function(angle) {
                    return angle;
                }, "deg"),
                grad: __name(function(angle) {
                    return 360 * angle / 400;
                }, "grad"),
                rad: __name(function(angle) {
                    return 360 * angle / (2 * Math.PI);
                }, "rad"),
                turn: __name(function(angle) {
                    return 360 * angle;
                }, "turn")
            }, __name(parseCssNumberOrAngle, "parseCssNumberOrAngle"), __name(parseFunctionalRgbColorComponents, "parseFunctionalRgbColorComponents"), __name(parseFunctionalRgbColor, "parseFunctionalRgbColor"), __name(parseFunctionalRgbaColorComponents, "parseFunctionalRgbaColorComponents"), __name(parseFunctionalRgbaColor, "parseFunctionalRgbaColor"), __name(parseFunctionalHslColorComponents, "parseFunctionalHslColorComponents"), __name(parseFunctionalHslColor, "parseFunctionalHslColor"), __name(parseHslaColorComponents, "parseHslaColorComponents"), __name(parseFunctionalHslaColor, "parseFunctionalHslaColor"), __name(parseHexRgbColorComponents, "parseHexRgbColorComponents"), __name(parseHexRgbColor, "parseHexRgbColor"), __name(parseHexRgbaColorComponents, "parseHexRgbaColorComponents"), __name(parseHexRgbaColor, "parseHexRgbaColor"), __name(parseObjectRgbColorComponents, "parseObjectRgbColorComponents"), __name(createObjectRgbColorParser, "createObjectRgbColorParser"), __name(parseObjectRgbaColorComponents, "parseObjectRgbaColorComponents"), __name(createObjectRgbaColorParser, "createObjectRgbaColorParser"), PARSER_AND_RESULT = [
                {
                    parser: parseHexRgbColorComponents,
                    result: {
                        alpha: !1,
                        mode: "rgb",
                        notation: "hex"
                    }
                },
                {
                    parser: parseHexRgbaColorComponents,
                    result: {
                        alpha: !0,
                        mode: "rgb",
                        notation: "hex"
                    }
                },
                {
                    parser: parseFunctionalRgbColorComponents,
                    result: {
                        alpha: !1,
                        mode: "rgb",
                        notation: "func"
                    }
                },
                {
                    parser: parseFunctionalRgbaColorComponents,
                    result: {
                        alpha: !0,
                        mode: "rgb",
                        notation: "func"
                    }
                },
                {
                    parser: parseFunctionalHslColorComponents,
                    result: {
                        alpha: !1,
                        mode: "hsl",
                        notation: "func"
                    }
                },
                {
                    parser: parseHslaColorComponents,
                    result: {
                        alpha: !0,
                        mode: "hsl",
                        notation: "func"
                    }
                },
                {
                    parser: parseObjectRgbColorComponents,
                    result: {
                        alpha: !1,
                        mode: "rgb",
                        notation: "object"
                    }
                },
                {
                    parser: parseObjectRgbaColorComponents,
                    result: {
                        alpha: !0,
                        mode: "rgb",
                        notation: "object"
                    }
                }
            ], __name(detectStringColor, "detectStringColor"), __name(detectStringColorFormat, "detectStringColorFormat"), __name(createColorStringParser, "createColorStringParser"), __name(readIntColorString, "readIntColorString"), __name(zerofill, "zerofill"), __name(colorToHexRgbString, "colorToHexRgbString"), __name(colorToHexRgbaString, "colorToHexRgbaString"), __name(colorToFunctionalRgbString, "colorToFunctionalRgbString"), __name(colorToFunctionalRgbaString, "colorToFunctionalRgbaString"), __name(colorToFunctionalHslString, "colorToFunctionalHslString"), __name(colorToFunctionalHslaString, "colorToFunctionalHslaString"), __name(colorToObjectRgbString, "colorToObjectRgbString"), __name(createObjectRgbColorFormatter, "createObjectRgbColorFormatter"), __name(colorToObjectRgbaString, "colorToObjectRgbaString"), __name(createObjectRgbaColorFormatter, "createObjectRgbaColorFormatter"), FORMAT_AND_STRINGIFIERS = [
                {
                    format: {
                        alpha: !1,
                        mode: "rgb",
                        notation: "hex",
                        type: "int"
                    },
                    stringifier: colorToHexRgbString
                },
                {
                    format: {
                        alpha: !0,
                        mode: "rgb",
                        notation: "hex",
                        type: "int"
                    },
                    stringifier: colorToHexRgbaString
                },
                {
                    format: {
                        alpha: !1,
                        mode: "rgb",
                        notation: "func",
                        type: "int"
                    },
                    stringifier: colorToFunctionalRgbString
                },
                {
                    format: {
                        alpha: !0,
                        mode: "rgb",
                        notation: "func",
                        type: "int"
                    },
                    stringifier: colorToFunctionalRgbaString
                },
                {
                    format: {
                        alpha: !1,
                        mode: "hsl",
                        notation: "func",
                        type: "int"
                    },
                    stringifier: colorToFunctionalHslString
                },
                {
                    format: {
                        alpha: !0,
                        mode: "hsl",
                        notation: "func",
                        type: "int"
                    },
                    stringifier: colorToFunctionalHslaString
                }
            ].concat(_to_consumable_array([
                "int",
                "float"
            ].reduce(function(prev, type) {
                return _to_consumable_array(prev).concat([
                    {
                        format: {
                            alpha: !1,
                            mode: "rgb",
                            notation: "object",
                            type: type
                        },
                        stringifier: createObjectRgbColorFormatter(type)
                    },
                    {
                        format: {
                            alpha: !0,
                            mode: "rgb",
                            notation: "object",
                            type: type
                        },
                        stringifier: createObjectRgbaColorFormatter(type)
                    }
                ]);
            }, []))), __name(findColorStringifier, "findColorStringifier"), cn$b = ClassName("apl"), __name(_APaletteView = function() {
                function _APaletteView1(doc, config) {
                    _class_call_check(this, _APaletteView1), this.onValueChange_ = this.onValueChange_.bind(this), this.value = config.value, this.value.emitter.on("change", this.onValueChange_), this.element = doc.createElement("div"), this.element.classList.add(cn$b()), config.viewProps.bindClassModifiers(this.element), config.viewProps.bindTabIndex(this.element);
                    var barElem = doc.createElement("div");
                    barElem.classList.add(cn$b("b")), this.element.appendChild(barElem);
                    var colorElem = doc.createElement("div");
                    colorElem.classList.add(cn$b("c")), barElem.appendChild(colorElem), this.colorElem_ = colorElem;
                    var markerElem = doc.createElement("div");
                    markerElem.classList.add(cn$b("m")), this.element.appendChild(markerElem), this.markerElem_ = markerElem;
                    var previewElem = doc.createElement("div");
                    previewElem.classList.add(cn$b("p")), this.markerElem_.appendChild(previewElem), this.previewElem_ = previewElem, this.update_();
                }
                return _create_class(_APaletteView1, [
                    {
                        key: "update_",
                        value: function update_() {
                            var c = this.value.rawValue, rgbaComps = c.getComponents("rgb"), leftColor = new IntColor([
                                rgbaComps[0],
                                rgbaComps[1],
                                rgbaComps[2],
                                0
                            ], "rgb"), rightColor = new IntColor([
                                rgbaComps[0],
                                rgbaComps[1],
                                rgbaComps[2],
                                255
                            ], "rgb"), gradientComps = [
                                "to right",
                                colorToFunctionalRgbaString(leftColor),
                                colorToFunctionalRgbaString(rightColor)
                            ];
                            this.colorElem_.style.background = "linear-gradient(".concat(gradientComps.join(","), ")"), this.previewElem_.style.backgroundColor = colorToFunctionalRgbaString(c);
                            var left = mapRange(rgbaComps[3], 0, 1, 0, 100);
                            this.markerElem_.style.left = "".concat(left, "%");
                        }
                    },
                    {
                        key: "onValueChange_",
                        value: function onValueChange_() {
                            this.update_();
                        }
                    }
                ]), _APaletteView1;
            }(), "APaletteView"), APaletteView = _APaletteView, __name(_APaletteController = function() {
                function _APaletteController1(doc, config) {
                    _class_call_check(this, _APaletteController1), this.onKeyDown_ = this.onKeyDown_.bind(this), this.onKeyUp_ = this.onKeyUp_.bind(this), this.onPointerDown_ = this.onPointerDown_.bind(this), this.onPointerMove_ = this.onPointerMove_.bind(this), this.onPointerUp_ = this.onPointerUp_.bind(this), this.value = config.value, this.viewProps = config.viewProps, this.view = new APaletteView(doc, {
                        value: this.value,
                        viewProps: this.viewProps
                    }), this.ptHandler_ = new PointerHandler(this.view.element), this.ptHandler_.emitter.on("down", this.onPointerDown_), this.ptHandler_.emitter.on("move", this.onPointerMove_), this.ptHandler_.emitter.on("up", this.onPointerUp_), this.view.element.addEventListener("keydown", this.onKeyDown_), this.view.element.addEventListener("keyup", this.onKeyUp_);
                }
                return _create_class(_APaletteController1, [
                    {
                        key: "handlePointerEvent_",
                        value: function handlePointerEvent_(d, opts) {
                            if (d.point) {
                                var alpha = d.point.x / d.bounds.width, _c_getComponents = _sliced_to_array(this.value.rawValue.getComponents("hsv"), 3), h = _c_getComponents[0], s = _c_getComponents[1], v = _c_getComponents[2];
                                this.value.setRawValue(new IntColor([
                                    h,
                                    s,
                                    v,
                                    alpha
                                ], "hsv"), opts);
                            }
                        }
                    },
                    {
                        key: "onPointerDown_",
                        value: function onPointerDown_(ev) {
                            this.handlePointerEvent_(ev.data, {
                                forceEmit: !1,
                                last: !1
                            });
                        }
                    },
                    {
                        key: "onPointerMove_",
                        value: function onPointerMove_(ev) {
                            this.handlePointerEvent_(ev.data, {
                                forceEmit: !1,
                                last: !1
                            });
                        }
                    },
                    {
                        key: "onPointerUp_",
                        value: function onPointerUp_(ev) {
                            this.handlePointerEvent_(ev.data, {
                                forceEmit: !0,
                                last: !0
                            });
                        }
                    },
                    {
                        key: "onKeyDown_",
                        value: function onKeyDown_(ev) {
                            var step = getStepForKey(getKeyScaleForColor(!0), getHorizontalStepKeys(ev));
                            if (0 !== step) {
                                var _c_getComponents = _sliced_to_array(this.value.rawValue.getComponents("hsv"), 4), h = _c_getComponents[0], s = _c_getComponents[1], v = _c_getComponents[2], a = _c_getComponents[3];
                                this.value.setRawValue(new IntColor([
                                    h,
                                    s,
                                    v,
                                    a + step
                                ], "hsv"), {
                                    forceEmit: !1,
                                    last: !1
                                });
                            }
                        }
                    },
                    {
                        key: "onKeyUp_",
                        value: function onKeyUp_(ev) {
                            0 !== getStepForKey(getKeyScaleForColor(!0), getHorizontalStepKeys(ev)) && this.value.setRawValue(this.value.rawValue, {
                                forceEmit: !0,
                                last: !0
                            });
                        }
                    }
                ]), _APaletteController1;
            }(), "APaletteController"), APaletteController = _APaletteController, cn$a = ClassName("coltxt"), __name(createModeSelectElement, "createModeSelectElement"), __name(_ColorTextsView = function() {
                function _ColorTextsView1(doc, config) {
                    var _this = this;
                    _class_call_check(this, _ColorTextsView1), this.element = doc.createElement("div"), this.element.classList.add(cn$a()), config.viewProps.bindClassModifiers(this.element);
                    var modeElem = doc.createElement("div");
                    modeElem.classList.add(cn$a("m")), this.modeElem_ = createModeSelectElement(doc), this.modeElem_.classList.add(cn$a("ms")), modeElem.appendChild(this.modeSelectElement), config.viewProps.bindDisabled(this.modeElem_);
                    var modeMarkerElem = doc.createElement("div");
                    modeMarkerElem.classList.add(cn$a("mm")), modeMarkerElem.appendChild(createSvgIconElement(doc, "dropdown")), modeElem.appendChild(modeMarkerElem), this.element.appendChild(modeElem);
                    var inputsElem = doc.createElement("div");
                    inputsElem.classList.add(cn$a("w")), this.element.appendChild(inputsElem), this.inputsElem_ = inputsElem, this.inputViews_ = config.inputViews, this.applyInputViews_(), bindValue(config.mode, function(mode) {
                        _this.modeElem_.value = mode;
                    });
                }
                return _create_class(_ColorTextsView1, [
                    {
                        key: "modeSelectElement",
                        get: function get() {
                            return this.modeElem_;
                        }
                    },
                    {
                        key: "inputViews",
                        get: function get() {
                            return this.inputViews_;
                        },
                        set: function set1(inputViews) {
                            this.inputViews_ = inputViews, this.applyInputViews_();
                        }
                    },
                    {
                        key: "applyInputViews_",
                        value: function applyInputViews_() {
                            var _this = this;
                            removeChildElements(this.inputsElem_);
                            var doc = this.element.ownerDocument;
                            this.inputViews_.forEach(function(v) {
                                var compElem = doc.createElement("div");
                                compElem.classList.add(cn$a("c")), compElem.appendChild(v.element), _this.inputsElem_.appendChild(compElem);
                            });
                        }
                    }
                ]), _ColorTextsView1;
            }(), "ColorTextsView"), ColorTextsView = _ColorTextsView, __name(createFormatter$2, "createFormatter$2"), __name(createConstraint$5, "createConstraint$5"), __name(createComponentController, "createComponentController"), __name(createComponentControllers, "createComponentControllers"), __name(createHexController, "createHexController"), __name(isColorMode, "isColorMode"), __name(_ColorTextsController = function() {
                function _ColorTextsController1(doc, config) {
                    _class_call_check(this, _ColorTextsController1), this.onModeSelectChange_ = this.onModeSelectChange_.bind(this), this.colorType_ = config.colorType, this.value = config.value, this.viewProps = config.viewProps, this.colorMode = createValue(this.value.rawValue.mode), this.ccs_ = this.createComponentControllers_(doc), this.view = new ColorTextsView(doc, {
                        mode: this.colorMode,
                        inputViews: [
                            this.ccs_[0].view,
                            this.ccs_[1].view,
                            this.ccs_[2].view
                        ],
                        viewProps: this.viewProps
                    }), this.view.modeSelectElement.addEventListener("change", this.onModeSelectChange_);
                }
                return _create_class(_ColorTextsController1, [
                    {
                        key: "createComponentControllers_",
                        value: function createComponentControllers_(doc) {
                            var mode = this.colorMode.rawValue;
                            return isColorMode(mode) ? createComponentControllers(doc, {
                                colorMode: mode,
                                colorType: this.colorType_,
                                value: this.value,
                                viewProps: this.viewProps
                            }) : createHexController(doc, {
                                value: this.value,
                                viewProps: this.viewProps
                            });
                        }
                    },
                    {
                        key: "onModeSelectChange_",
                        value: function onModeSelectChange_(ev) {
                            var selectElem = ev.currentTarget;
                            this.colorMode.rawValue = selectElem.value, this.ccs_ = this.createComponentControllers_(this.view.element.ownerDocument), this.view.inputViews = this.ccs_.map(function(cc) {
                                return cc.view;
                            });
                        }
                    }
                ]), _ColorTextsController1;
            }(), "ColorTextsController"), ColorTextsController = _ColorTextsController, cn$9 = ClassName("hpl"), __name(_HPaletteView = function() {
                function _HPaletteView1(doc, config) {
                    _class_call_check(this, _HPaletteView1), this.onValueChange_ = this.onValueChange_.bind(this), this.value = config.value, this.value.emitter.on("change", this.onValueChange_), this.element = doc.createElement("div"), this.element.classList.add(cn$9()), config.viewProps.bindClassModifiers(this.element), config.viewProps.bindTabIndex(this.element);
                    var colorElem = doc.createElement("div");
                    colorElem.classList.add(cn$9("c")), this.element.appendChild(colorElem);
                    var markerElem = doc.createElement("div");
                    markerElem.classList.add(cn$9("m")), this.element.appendChild(markerElem), this.markerElem_ = markerElem, this.update_();
                }
                return _create_class(_HPaletteView1, [
                    {
                        key: "update_",
                        value: function update_() {
                            var h = _sliced_to_array(this.value.rawValue.getComponents("hsv"), 1)[0];
                            this.markerElem_.style.backgroundColor = colorToFunctionalRgbString(new IntColor([
                                h,
                                100,
                                100
                            ], "hsv"));
                            var left = mapRange(h, 0, 360, 0, 100);
                            this.markerElem_.style.left = "".concat(left, "%");
                        }
                    },
                    {
                        key: "onValueChange_",
                        value: function onValueChange_() {
                            this.update_();
                        }
                    }
                ]), _HPaletteView1;
            }(), "HPaletteView"), HPaletteView = _HPaletteView, __name(_HPaletteController = function() {
                function _HPaletteController1(doc, config) {
                    _class_call_check(this, _HPaletteController1), this.onKeyDown_ = this.onKeyDown_.bind(this), this.onKeyUp_ = this.onKeyUp_.bind(this), this.onPointerDown_ = this.onPointerDown_.bind(this), this.onPointerMove_ = this.onPointerMove_.bind(this), this.onPointerUp_ = this.onPointerUp_.bind(this), this.value = config.value, this.viewProps = config.viewProps, this.view = new HPaletteView(doc, {
                        value: this.value,
                        viewProps: this.viewProps
                    }), this.ptHandler_ = new PointerHandler(this.view.element), this.ptHandler_.emitter.on("down", this.onPointerDown_), this.ptHandler_.emitter.on("move", this.onPointerMove_), this.ptHandler_.emitter.on("up", this.onPointerUp_), this.view.element.addEventListener("keydown", this.onKeyDown_), this.view.element.addEventListener("keyup", this.onKeyUp_);
                }
                return _create_class(_HPaletteController1, [
                    {
                        key: "handlePointerEvent_",
                        value: function handlePointerEvent_(d, opts) {
                            if (d.point) {
                                var hue = mapRange(constrainRange(d.point.x, 0, d.bounds.width), 0, d.bounds.width, 0, 360), _c_getComponents = _sliced_to_array(this.value.rawValue.getComponents("hsv"), 4), s = _c_getComponents[1], v = _c_getComponents[2], a = _c_getComponents[3];
                                this.value.setRawValue(new IntColor([
                                    hue,
                                    s,
                                    v,
                                    a
                                ], "hsv"), opts);
                            }
                        }
                    },
                    {
                        key: "onPointerDown_",
                        value: function onPointerDown_(ev) {
                            this.handlePointerEvent_(ev.data, {
                                forceEmit: !1,
                                last: !1
                            });
                        }
                    },
                    {
                        key: "onPointerMove_",
                        value: function onPointerMove_(ev) {
                            this.handlePointerEvent_(ev.data, {
                                forceEmit: !1,
                                last: !1
                            });
                        }
                    },
                    {
                        key: "onPointerUp_",
                        value: function onPointerUp_(ev) {
                            this.handlePointerEvent_(ev.data, {
                                forceEmit: !0,
                                last: !0
                            });
                        }
                    },
                    {
                        key: "onKeyDown_",
                        value: function onKeyDown_(ev) {
                            var step = getStepForKey(getKeyScaleForColor(!1), getHorizontalStepKeys(ev));
                            if (0 !== step) {
                                var _c_getComponents = _sliced_to_array(this.value.rawValue.getComponents("hsv"), 4), h = _c_getComponents[0], s = _c_getComponents[1], v = _c_getComponents[2], a = _c_getComponents[3];
                                this.value.setRawValue(new IntColor([
                                    h + step,
                                    s,
                                    v,
                                    a
                                ], "hsv"), {
                                    forceEmit: !1,
                                    last: !1
                                });
                            }
                        }
                    },
                    {
                        key: "onKeyUp_",
                        value: function onKeyUp_(ev) {
                            0 !== getStepForKey(getKeyScaleForColor(!1), getHorizontalStepKeys(ev)) && this.value.setRawValue(this.value.rawValue, {
                                forceEmit: !0,
                                last: !0
                            });
                        }
                    }
                ]), _HPaletteController1;
            }(), "HPaletteController"), HPaletteController = _HPaletteController, cn$8 = ClassName("svp"), CANVAS_RESOL = 64, __name(_SvPaletteView = function() {
                function _SvPaletteView1(doc, config) {
                    _class_call_check(this, _SvPaletteView1), this.onValueChange_ = this.onValueChange_.bind(this), this.value = config.value, this.value.emitter.on("change", this.onValueChange_), this.element = doc.createElement("div"), this.element.classList.add(cn$8()), config.viewProps.bindClassModifiers(this.element), config.viewProps.bindTabIndex(this.element);
                    var canvasElem = doc.createElement("canvas");
                    canvasElem.height = CANVAS_RESOL, canvasElem.width = CANVAS_RESOL, canvasElem.classList.add(cn$8("c")), this.element.appendChild(canvasElem), this.canvasElement = canvasElem;
                    var markerElem = doc.createElement("div");
                    markerElem.classList.add(cn$8("m")), this.element.appendChild(markerElem), this.markerElem_ = markerElem, this.update_();
                }
                return _create_class(_SvPaletteView1, [
                    {
                        key: "update_",
                        value: function update_() {
                            var ctx = getCanvasContext(this.canvasElement);
                            if (ctx) {
                                for(var c = this.value.rawValue, hsvComps = c.getComponents("hsv"), width = this.canvasElement.width, height = this.canvasElement.height, imgData = ctx.getImageData(0, 0, width, height), data = imgData.data, iy = 0; iy < height; iy++)for(var ix = 0; ix < width; ix++){
                                    var s = mapRange(ix, 0, width, 0, 100), v = mapRange(iy, 0, height, 100, 0), rgbComps = hsvToRgbInt(hsvComps[0], s, v), i = (iy * width + ix) * 4;
                                    data[i] = rgbComps[0], data[i + 1] = rgbComps[1], data[i + 2] = rgbComps[2], data[i + 3] = 255;
                                }
                                ctx.putImageData(imgData, 0, 0);
                                var left = mapRange(hsvComps[1], 0, 100, 0, 100);
                                this.markerElem_.style.left = "".concat(left, "%");
                                var top = mapRange(hsvComps[2], 0, 100, 100, 0);
                                this.markerElem_.style.top = "".concat(top, "%");
                            }
                        }
                    },
                    {
                        key: "onValueChange_",
                        value: function onValueChange_() {
                            this.update_();
                        }
                    }
                ]), _SvPaletteView1;
            }(), "SvPaletteView"), SvPaletteView = _SvPaletteView, __name(_SvPaletteController = function() {
                function _SvPaletteController1(doc, config) {
                    _class_call_check(this, _SvPaletteController1), this.onKeyDown_ = this.onKeyDown_.bind(this), this.onKeyUp_ = this.onKeyUp_.bind(this), this.onPointerDown_ = this.onPointerDown_.bind(this), this.onPointerMove_ = this.onPointerMove_.bind(this), this.onPointerUp_ = this.onPointerUp_.bind(this), this.value = config.value, this.viewProps = config.viewProps, this.view = new SvPaletteView(doc, {
                        value: this.value,
                        viewProps: this.viewProps
                    }), this.ptHandler_ = new PointerHandler(this.view.element), this.ptHandler_.emitter.on("down", this.onPointerDown_), this.ptHandler_.emitter.on("move", this.onPointerMove_), this.ptHandler_.emitter.on("up", this.onPointerUp_), this.view.element.addEventListener("keydown", this.onKeyDown_), this.view.element.addEventListener("keyup", this.onKeyUp_);
                }
                return _create_class(_SvPaletteController1, [
                    {
                        key: "handlePointerEvent_",
                        value: function handlePointerEvent_(d, opts) {
                            if (d.point) {
                                var saturation = mapRange(d.point.x, 0, d.bounds.width, 0, 100), value = mapRange(d.point.y, 0, d.bounds.height, 100, 0), _this_value_rawValue_getComponents = _sliced_to_array(this.value.rawValue.getComponents("hsv"), 4), h = _this_value_rawValue_getComponents[0], a = _this_value_rawValue_getComponents[3];
                                this.value.setRawValue(new IntColor([
                                    h,
                                    saturation,
                                    value,
                                    a
                                ], "hsv"), opts);
                            }
                        }
                    },
                    {
                        key: "onPointerDown_",
                        value: function onPointerDown_(ev) {
                            this.handlePointerEvent_(ev.data, {
                                forceEmit: !1,
                                last: !1
                            });
                        }
                    },
                    {
                        key: "onPointerMove_",
                        value: function onPointerMove_(ev) {
                            this.handlePointerEvent_(ev.data, {
                                forceEmit: !1,
                                last: !1
                            });
                        }
                    },
                    {
                        key: "onPointerUp_",
                        value: function onPointerUp_(ev) {
                            this.handlePointerEvent_(ev.data, {
                                forceEmit: !0,
                                last: !0
                            });
                        }
                    },
                    {
                        key: "onKeyDown_",
                        value: function onKeyDown_(ev) {
                            isArrowKey(ev.key) && ev.preventDefault();
                            var _this_value_rawValue_getComponents = _sliced_to_array(this.value.rawValue.getComponents("hsv"), 4), h = _this_value_rawValue_getComponents[0], s = _this_value_rawValue_getComponents[1], v = _this_value_rawValue_getComponents[2], a = _this_value_rawValue_getComponents[3], keyScale = getKeyScaleForColor(!1), ds = getStepForKey(keyScale, getHorizontalStepKeys(ev)), dv = getStepForKey(keyScale, getVerticalStepKeys(ev));
                            (0 !== ds || 0 !== dv) && this.value.setRawValue(new IntColor([
                                h,
                                s + ds,
                                v + dv,
                                a
                            ], "hsv"), {
                                forceEmit: !1,
                                last: !1
                            });
                        }
                    },
                    {
                        key: "onKeyUp_",
                        value: function onKeyUp_(ev) {
                            var keyScale = getKeyScaleForColor(!1), ds = getStepForKey(keyScale, getHorizontalStepKeys(ev)), dv = getStepForKey(keyScale, getVerticalStepKeys(ev));
                            (0 !== ds || 0 !== dv) && this.value.setRawValue(this.value.rawValue, {
                                forceEmit: !0,
                                last: !0
                            });
                        }
                    }
                ]), _SvPaletteController1;
            }(), "SvPaletteController"), SvPaletteController = _SvPaletteController, _ColorPickerController = function() {
                function _ColorPickerController1(doc, config) {
                    _class_call_check(this, _ColorPickerController1), this.value = config.value, this.viewProps = config.viewProps, this.hPaletteC_ = new HPaletteController(doc, {
                        value: this.value,
                        viewProps: this.viewProps
                    }), this.svPaletteC_ = new SvPaletteController(doc, {
                        value: this.value,
                        viewProps: this.viewProps
                    }), this.alphaIcs_ = config.supportsAlpha ? {
                        palette: new APaletteController(doc, {
                            value: this.value,
                            viewProps: this.viewProps
                        }),
                        text: new NumberTextController(doc, {
                            parser: parseNumber,
                            props: ValueMap.fromObject({
                                pointerScale: 0.01,
                                keyScale: 0.1,
                                formatter: createNumberFormatter(2)
                            }),
                            value: createValue(0, {
                                constraint: new DefiniteRangeConstraint({
                                    min: 0,
                                    max: 1
                                })
                            }),
                            viewProps: this.viewProps
                        })
                    } : null, this.alphaIcs_ && connectValues({
                        primary: this.value,
                        secondary: this.alphaIcs_.text.value,
                        forward: __name(function(p) {
                            return p.getComponents()[3];
                        }, "forward"),
                        backward: __name(function(p, s) {
                            var comps = p.getComponents();
                            return comps[3] = s, new IntColor(comps, p.mode);
                        }, "backward")
                    }), this.textsC_ = new ColorTextsController(doc, {
                        colorType: config.colorType,
                        value: this.value,
                        viewProps: this.viewProps
                    }), this.view = new ColorPickerView(doc, {
                        alphaViews: this.alphaIcs_ ? {
                            palette: this.alphaIcs_.palette.view,
                            text: this.alphaIcs_.text.view
                        } : null,
                        hPaletteView: this.hPaletteC_.view,
                        supportsAlpha: config.supportsAlpha,
                        svPaletteView: this.svPaletteC_.view,
                        textsView: this.textsC_.view,
                        viewProps: this.viewProps
                    });
                }
                return _create_class(_ColorPickerController1, [
                    {
                        key: "textsController",
                        get: function get() {
                            return this.textsC_;
                        }
                    }
                ]), _ColorPickerController1;
            }(), __name(_ColorPickerController, "ColorPickerController"), ColorPickerController = _ColorPickerController, cn$7 = ClassName("colsw"), __name(_ColorSwatchView = function() {
                function _ColorSwatchView1(doc, config) {
                    _class_call_check(this, _ColorSwatchView1), this.onValueChange_ = this.onValueChange_.bind(this), config.value.emitter.on("change", this.onValueChange_), this.value = config.value, this.element = doc.createElement("div"), this.element.classList.add(cn$7()), config.viewProps.bindClassModifiers(this.element);
                    var swatchElem = doc.createElement("div");
                    swatchElem.classList.add(cn$7("sw")), this.element.appendChild(swatchElem), this.swatchElem_ = swatchElem;
                    var buttonElem = doc.createElement("button");
                    buttonElem.classList.add(cn$7("b")), config.viewProps.bindDisabled(buttonElem), this.element.appendChild(buttonElem), this.buttonElement = buttonElem, this.update_();
                }
                return _create_class(_ColorSwatchView1, [
                    {
                        key: "update_",
                        value: function update_() {
                            var value = this.value.rawValue;
                            this.swatchElem_.style.backgroundColor = colorToHexRgbaString(value);
                        }
                    },
                    {
                        key: "onValueChange_",
                        value: function onValueChange_() {
                            this.update_();
                        }
                    }
                ]), _ColorSwatchView1;
            }(), "ColorSwatchView"), ColorSwatchView = _ColorSwatchView, __name(_ColorSwatchController = function _ColorSwatchController1(doc, config) {
                _class_call_check(this, _ColorSwatchController1), this.value = config.value, this.viewProps = config.viewProps, this.view = new ColorSwatchView(doc, {
                    value: this.value,
                    viewProps: this.viewProps
                });
            }, "ColorSwatchController"), ColorSwatchController = _ColorSwatchController, _ColorController = function() {
                function _ColorController1(doc, config) {
                    var _this = this;
                    _class_call_check(this, _ColorController1), this.onButtonBlur_ = this.onButtonBlur_.bind(this), this.onButtonClick_ = this.onButtonClick_.bind(this), this.onPopupChildBlur_ = this.onPopupChildBlur_.bind(this), this.onPopupChildKeydown_ = this.onPopupChildKeydown_.bind(this), this.value = config.value, this.viewProps = config.viewProps, this.foldable_ = Foldable.create(config.expanded), this.swatchC_ = new ColorSwatchController(doc, {
                        value: this.value,
                        viewProps: this.viewProps
                    });
                    var buttonElem = this.swatchC_.view.buttonElement;
                    buttonElem.addEventListener("blur", this.onButtonBlur_), buttonElem.addEventListener("click", this.onButtonClick_), this.textC_ = new TextController(doc, {
                        parser: config.parser,
                        props: ValueMap.fromObject({
                            formatter: config.formatter
                        }),
                        value: this.value,
                        viewProps: this.viewProps
                    }), this.view = new ColorView(doc, {
                        foldable: this.foldable_,
                        pickerLayout: config.pickerLayout
                    }), this.view.swatchElement.appendChild(this.swatchC_.view.element), this.view.textElement.appendChild(this.textC_.view.element), this.popC_ = "popup" === config.pickerLayout ? new PopupController(doc, {
                        viewProps: this.viewProps
                    }) : null;
                    var pickerC = new ColorPickerController(doc, {
                        colorType: config.colorType,
                        supportsAlpha: config.supportsAlpha,
                        value: this.value,
                        viewProps: this.viewProps
                    });
                    pickerC.view.allFocusableElements.forEach(function(elem) {
                        elem.addEventListener("blur", _this.onPopupChildBlur_), elem.addEventListener("keydown", _this.onPopupChildKeydown_);
                    }), this.pickerC_ = pickerC, this.popC_ ? (this.view.element.appendChild(this.popC_.view.element), this.popC_.view.element.appendChild(pickerC.view.element), connectValues({
                        primary: this.foldable_.value("expanded"),
                        secondary: this.popC_.shows,
                        forward: __name(function(p) {
                            return p;
                        }, "forward"),
                        backward: __name(function(_, s) {
                            return s;
                        }, "backward")
                    })) : this.view.pickerElement && (this.view.pickerElement.appendChild(this.pickerC_.view.element), bindFoldable(this.foldable_, this.view.pickerElement));
                }
                return _create_class(_ColorController1, [
                    {
                        key: "textController",
                        get: function get() {
                            return this.textC_;
                        }
                    },
                    {
                        key: "onButtonBlur_",
                        value: function onButtonBlur_(e) {
                            if (this.popC_) {
                                var elem = this.view.element, nextTarget = forceCast(e.relatedTarget);
                                nextTarget && elem.contains(nextTarget) || (this.popC_.shows.rawValue = !1);
                            }
                        }
                    },
                    {
                        key: "onButtonClick_",
                        value: function onButtonClick_() {
                            this.foldable_.set("expanded", !this.foldable_.get("expanded")), this.foldable_.get("expanded") && this.pickerC_.view.allFocusableElements[0].focus();
                        }
                    },
                    {
                        key: "onPopupChildBlur_",
                        value: function onPopupChildBlur_(ev) {
                            if (this.popC_) {
                                var elem = this.popC_.view.element, nextTarget = findNextTarget(ev);
                                nextTarget && elem.contains(nextTarget) || (!nextTarget || nextTarget !== this.swatchC_.view.buttonElement || supportsTouch(elem.ownerDocument)) && (this.popC_.shows.rawValue = !1);
                            }
                        }
                    },
                    {
                        key: "onPopupChildKeydown_",
                        value: function onPopupChildKeydown_(ev) {
                            this.popC_ ? "Escape" === ev.key && (this.popC_.shows.rawValue = !1) : this.view.pickerElement && "Escape" === ev.key && this.swatchC_.view.buttonElement.focus();
                        }
                    }
                ]), _ColorController1;
            }(), __name(_ColorController, "ColorController"), ColorController = _ColorController, __name(colorToRgbNumber, "colorToRgbNumber"), __name(colorToRgbaNumber, "colorToRgbaNumber"), __name(numberToRgbColor, "numberToRgbColor"), __name(numberToRgbaColor, "numberToRgbaColor"), __name(colorFromRgbNumber, "colorFromRgbNumber"), __name(colorFromRgbaNumber, "colorFromRgbaNumber"), __name(isRgbColorComponent, "isRgbColorComponent"), __name(isRgbColorObject, "isRgbColorObject"), __name(isRgbaColorObject, "isRgbaColorObject"), __name(isColorObject, "isColorObject"), __name(equalsColor, "equalsColor"), __name(createColorComponentsFromRgbObject, "createColorComponentsFromRgbObject"), __name(createColorStringWriter, "createColorStringWriter"), __name(createColorNumberWriter, "createColorNumberWriter"), __name(writeRgbaColorObject, "writeRgbaColorObject"), __name(writeRgbColorObject, "writeRgbColorObject"), __name(createColorObjectWriter, "createColorObjectWriter"), __name(shouldSupportAlpha$1, "shouldSupportAlpha$1"), __name(createFormatter$1, "createFormatter$1"), __name(isForColor, "isForColor"), NumberColorInputPlugin = createPlugin({
                id: "input-color-number",
                type: "input",
                accept: __name(function(value, params) {
                    if ("number" != typeof value || !isForColor(params)) return null;
                    var result3 = parseColorInputParams(params);
                    return result3 ? {
                        initialValue: value,
                        params: Object.assign(Object.assign({}, result3), {
                            supportsAlpha: shouldSupportAlpha$1(params)
                        })
                    } : null;
                }, "accept"),
                binding: {
                    reader: __name(function(args) {
                        return args.params.supportsAlpha ? colorFromRgbaNumber : colorFromRgbNumber;
                    }, "reader"),
                    equals: equalsColor,
                    writer: __name(function(args) {
                        return createColorNumberWriter(args.params.supportsAlpha);
                    }, "writer")
                },
                controller: __name(function(args) {
                    var _a, _b;
                    return new ColorController(args.document, {
                        colorType: "int",
                        expanded: null != (_a = args.params.expanded) && _a,
                        formatter: createFormatter$1(args.params.supportsAlpha),
                        parser: createColorStringParser("int"),
                        pickerLayout: null != (_b = args.params.picker) ? _b : "popup",
                        supportsAlpha: args.params.supportsAlpha,
                        value: args.value,
                        viewProps: args.viewProps
                    });
                }, "controller")
            }), __name(colorFromObject, "colorFromObject"), __name(shouldSupportAlpha, "shouldSupportAlpha"), __name(createColorObjectBindingReader, "createColorObjectBindingReader"), __name(createColorObjectFormatter, "createColorObjectFormatter"), ObjectColorInputPlugin = createPlugin({
                id: "input-color-object",
                type: "input",
                accept: __name(function(value, params) {
                    if (!isColorObject(value)) return null;
                    var _a, result3 = parseColorInputParams(params);
                    return result3 ? {
                        initialValue: value,
                        params: Object.assign(Object.assign({}, result3), {
                            colorType: null != (_a = extractColorType(params)) ? _a : "int"
                        })
                    } : null;
                }, "accept"),
                binding: {
                    reader: __name(function(args) {
                        return createColorObjectBindingReader(args.params.colorType);
                    }, "reader"),
                    equals: equalsColor,
                    writer: __name(function(args) {
                        return createColorObjectWriter(shouldSupportAlpha(args.initialValue), args.params.colorType);
                    }, "writer")
                },
                controller: __name(function(args) {
                    var _a, _b, supportsAlpha = isRgbaColorObject(args.initialValue);
                    return new ColorController(args.document, {
                        colorType: args.params.colorType,
                        expanded: null != (_a = args.params.expanded) && _a,
                        formatter: createColorObjectFormatter(supportsAlpha, args.params.colorType),
                        parser: createColorStringParser("int"),
                        pickerLayout: null != (_b = args.params.picker) ? _b : "popup",
                        supportsAlpha: supportsAlpha,
                        value: args.value,
                        viewProps: args.viewProps
                    });
                }, "controller")
            }), StringColorInputPlugin = createPlugin({
                id: "input-color-string",
                type: "input",
                accept: __name(function(value, params) {
                    if ("string" != typeof value || "text" === params.view) return null;
                    var format = detectStringColorFormat(value, extractColorType(params));
                    if (!format) return null;
                    var stringifier = findColorStringifier(format);
                    if (!stringifier) return null;
                    var result3 = parseColorInputParams(params);
                    return result3 ? {
                        initialValue: value,
                        params: Object.assign(Object.assign({}, result3), {
                            format: format,
                            stringifier: stringifier
                        })
                    } : null;
                }, "accept"),
                binding: {
                    reader: __name(function() {
                        return readIntColorString;
                    }, "reader"),
                    equals: equalsColor,
                    writer: __name(function(args) {
                        var writer = createColorStringWriter(args.params.format);
                        if (!writer) throw TpError.notBindable();
                        return writer;
                    }, "writer")
                },
                controller: __name(function(args) {
                    var _a, _b;
                    return new ColorController(args.document, {
                        colorType: args.params.format.type,
                        expanded: null != (_a = args.params.expanded) && _a,
                        formatter: args.params.stringifier,
                        parser: createColorStringParser("int"),
                        pickerLayout: null != (_b = args.params.picker) ? _b : "popup",
                        supportsAlpha: args.params.format.alpha,
                        value: args.value,
                        viewProps: args.viewProps
                    });
                }, "controller")
            }), __name(_PointNdConstraint = function() {
                function _PointNdConstraint1(config) {
                    _class_call_check(this, _PointNdConstraint1), this.components = config.components, this.asm_ = config.assembly;
                }
                return _create_class(_PointNdConstraint1, [
                    {
                        key: "constrain",
                        value: function constrain(value) {
                            var _this = this, comps = this.asm_.toComponents(value).map(function(comp, index) {
                                var _a, _b;
                                return null != (_b = null == (_a = _this.components[index]) ? void 0 : _a.constrain(comp)) ? _b : comp;
                            });
                            return this.asm_.fromComponents(comps);
                        }
                    }
                ]), _PointNdConstraint1;
            }(), "PointNdConstraint"), PointNdConstraint = _PointNdConstraint, cn$6 = ClassName("pndtxt"), __name(_PointNdTextView = function _PointNdTextView1(doc, config) {
                var _this = this;
                _class_call_check(this, _PointNdTextView1), this.textViews = config.textViews, this.element = doc.createElement("div"), this.element.classList.add(cn$6()), this.textViews.forEach(function(v) {
                    var axisElem = doc.createElement("div");
                    axisElem.classList.add(cn$6("a")), axisElem.appendChild(v.element), _this.element.appendChild(axisElem);
                });
            }, "PointNdTextView"), PointNdTextView = _PointNdTextView, __name(createAxisController, "createAxisController"), _PointNdTextController = function() {
                function _PointNdTextController1(doc, config) {
                    var _this = this;
                    _class_call_check(this, _PointNdTextController1), this.value = config.value, this.viewProps = config.viewProps, this.acs_ = config.axes.map(function(_, index) {
                        return createAxisController(doc, config, index);
                    }), this.acs_.forEach(function(c, index) {
                        connectValues({
                            primary: _this.value,
                            secondary: c.value,
                            forward: __name(function(p) {
                                return config.assembly.toComponents(p)[index];
                            }, "forwar\
d"),
                            backward: __name(function(p, s) {
                                var comps = config.assembly.toComponents(p);
                                return comps[index] = s, config.assembly.fromComponents(comps);
                            }, "backward")
                        });
                    }), this.view = new PointNdTextView(doc, {
                        textViews: this.acs_.map(function(ac) {
                            return ac.view;
                        })
                    });
                }
                return _create_class(_PointNdTextController1, [
                    {
                        key: "textControllers",
                        get: function get() {
                            return this.acs_;
                        }
                    }
                ]), _PointNdTextController1;
            }(), __name(_PointNdTextController, "PointNdTextController"), PointNdTextController = _PointNdTextController, __name(_SliderInputBindingApi = function(BindingApi1) {
                function _SliderInputBindingApi1() {
                    return _class_call_check(this, _SliderInputBindingApi1), _call_super(this, _SliderInputBindingApi1, arguments);
                }
                return _inherits(_SliderInputBindingApi1, BindingApi1), _create_class(_SliderInputBindingApi1, [
                    {
                        key: "max",
                        get: function get() {
                            return this.controller.valueController.sliderController.props.get("max");
                        },
                        set: function set1(max) {
                            this.controller.valueController.sliderController.props.set("max", max);
                        }
                    },
                    {
                        key: "min",
                        get: function get() {
                            return this.controller.valueController.sliderController.props.get("min");
                        },
                        set: function set1(max) {
                            this.controller.valueController.sliderController.props.set("min", max);
                        }
                    }
                ]), _SliderInputBindingApi1;
            }(BindingApi), "SliderInputBindingApi"), SliderInputBindingApi = _SliderInputBindingApi, __name(createConstraint$4, "createConstraint$4"), NumberInputPlugin = createPlugin({
                id: "input-number",
                type: "input",
                accept: __name(function(value, params) {
                    if ("number" != typeof value) return null;
                    var result3 = parseRecord(params, function(p) {
                        return Object.assign(Object.assign({}, createNumberTextInputParamsParser(p)), {
                            options: p.optional.custom(parseListOptions),
                            readonly: p.optional.constant(!1)
                        });
                    });
                    return result3 ? {
                        initialValue: value,
                        params: result3
                    } : null;
                }, "accept"),
                binding: {
                    reader: __name(function(_args) {
                        return numberFromUnknown;
                    }, "reader"),
                    constraint: __name(function(args) {
                        return createConstraint$4(args.params, args.initialValue);
                    }, "constraint"),
                    writer: __name(function(_args) {
                        return writePrimitive;
                    }, "writer")
                },
                controller: __name(function(args) {
                    var value = args.value, c = args.constraint, lc = c && findConstraint(c, ListConstraint);
                    if (lc) return new ListController(args.document, {
                        props: new ValueMap({
                            options: lc.values.value("options")
                        }),
                        value: value,
                        viewProps: args.viewProps
                    });
                    var textPropsObj = createNumberTextPropsObject(args.params, value.rawValue), drc = c && findConstraint(c, DefiniteRangeConstraint);
                    return drc ? new SliderTextController(args.document, Object.assign(Object.assign({}, createSliderTextProps(Object.assign(Object.assign({}, textPropsObj), {
                        keyScale: createValue(textPropsObj.keyScale),
                        max: drc.values.value("max"),
                        min: drc.values.value("min")
                    }))), {
                        parser: parseNumber,
                        value: value,
                        viewProps: args.viewProps
                    })) : new NumberTextController(args.document, {
                        parser: parseNumber,
                        props: ValueMap.fromObject(textPropsObj),
                        value: value,
                        viewProps: args.viewProps
                    });
                }, "controller"),
                api: function api(args) {
                    return "number" != typeof args.controller.value.rawValue ? null : _instanceof(args.controller.valueController, SliderTextController) ? new SliderInputBindingApi(args.controller) : _instanceof(args.controller.valueController, ListController) ? new ListInputBindingApi(args.controller) : null;
                }
            }), __name(_Point2d = function() {
                function _Point2d1() {
                    var x = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 0, y = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0;
                    _class_call_check(this, _Point2d1), this.x = x, this.y = y;
                }
                return _create_class(_Point2d1, [
                    {
                        key: "getComponents",
                        value: function getComponents() {
                            return [
                                this.x,
                                this.y
                            ];
                        }
                    },
                    {
                        key: "toObject",
                        value: function toObject() {
                            return {
                                x: this.x,
                                y: this.y
                            };
                        }
                    }
                ], [
                    {
                        key: "isObject",
                        value: function isObject1(obj) {
                            if (isEmpty(obj)) return !1;
                            var x = obj.x, y = obj.y;
                            return "number" == typeof x && "number" == typeof y;
                        }
                    },
                    {
                        key: "equals",
                        value: function equals(v1, v2) {
                            return v1.x === v2.x && v1.y === v2.y;
                        }
                    }
                ]), _Point2d1;
            }(), "Point2d"), Point2d = _Point2d, Point2dAssembly = {
                toComponents: __name(function(p) {
                    return p.getComponents();
                }, "toComponents"),
                fromComponents: __name(function(comps) {
                    return _construct(Point2d, _to_consumable_array(comps));
                }, "fromComponents")
            }, cn$5 = ClassName("p2d"), __name(_Point2dView = function _Point2dView1(doc, config) {
                _class_call_check(this, _Point2dView1), this.element = doc.createElement("div"), this.element.classList.add(cn$5()), config.viewProps.bindClassModifiers(this.element), bindValue(config.expanded, valueToClassName(this.element, cn$5(void 0, "expanded")));
                var headElem = doc.createElement("div");
                headElem.classList.add(cn$5("h")), this.element.appendChild(headElem);
                var buttonElem = doc.createElement("button");
                buttonElem.classList.add(cn$5("b")), buttonElem.appendChild(createSvgIconElement(doc, "p2dpad")), config.viewProps.bindDisabled(buttonElem), headElem.appendChild(buttonElem), this.buttonElement = buttonElem;
                var textElem = doc.createElement("div");
                if (textElem.classList.add(cn$5("t")), headElem.appendChild(textElem), this.textElement = textElem, "inline" === config.pickerLayout) {
                    var pickerElem = doc.createElement("div");
                    pickerElem.classList.add(cn$5("p")), this.element.appendChild(pickerElem), this.pickerElement = pickerElem;
                } else this.pickerElement = null;
            }, "Point2dView"), Point2dView = _Point2dView, cn$4 = ClassName("p2dp"), __name(_Point2dPickerView = function() {
                function _Point2dPickerView1(doc, config) {
                    _class_call_check(this, _Point2dPickerView1), this.onFoldableChange_ = this.onFoldableChange_.bind(this), this.onPropsChange_ = this.onPropsChange_.bind(this), this.onValueChange_ = this.onValueChange_.bind(this), this.props_ = config.props, this.props_.emitter.on("change", this.onPropsChange_), this.element = doc.createElement("div"), this.element.classList.add(cn$4()), "popup" === config.layout && this.element.classList.add(cn$4(void 0, "p")), config.viewProps.bindClassModifiers(this.element);
                    var padElem = doc.createElement("div");
                    padElem.classList.add(cn$4("p")), config.viewProps.bindTabIndex(padElem), this.element.appendChild(padElem), this.padElement = padElem;
                    var svgElem = doc.createElementNS(SVG_NS, "svg");
                    svgElem.classList.add(cn$4("g")), this.padElement.appendChild(svgElem), this.svgElem_ = svgElem;
                    var xAxisElem = doc.createElementNS(SVG_NS, "line");
                    xAxisElem.classList.add(cn$4("ax")), xAxisElem.setAttributeNS(null, "x1", "0"), xAxisElem.setAttributeNS(null, "y1", "50%"), xAxisElem.setAttributeNS(null, "x2", "100%"), xAxisElem.setAttributeNS(null, "y2", "50%"), this.svgElem_.appendChild(xAxisElem);
                    var yAxisElem = doc.createElementNS(SVG_NS, "line");
                    yAxisElem.classList.add(cn$4("ax")), yAxisElem.setAttributeNS(null, "x1", "50%"), yAxisElem.setAttributeNS(null, "y1", "0"), yAxisElem.setAttributeNS(null, "x2", "50%"), yAxisElem.setAttributeNS(null, "y2", "100%"), this.svgElem_.appendChild(yAxisElem);
                    var lineElem = doc.createElementNS(SVG_NS, "line");
                    lineElem.classList.add(cn$4("l")), lineElem.setAttributeNS(null, "x1", "50%"), lineElem.setAttributeNS(null, "y1", "50%"), this.svgElem_.appendChild(lineElem), this.lineElem_ = lineElem;
                    var markerElem = doc.createElement("div");
                    markerElem.classList.add(cn$4("m")), this.padElement.appendChild(markerElem), this.markerElem_ = markerElem, config.value.emitter.on("change", this.onValueChange_), this.value = config.value, this.update_();
                }
                return _create_class(_Point2dPickerView1, [
                    {
                        key: "allFocusableElements",
                        get: function get() {
                            return [
                                this.padElement
                            ];
                        }
                    },
                    {
                        key: "update_",
                        value: function update_() {
                            var _this_value_rawValue_getComponents = _sliced_to_array(this.value.rawValue.getComponents(), 2), x = _this_value_rawValue_getComponents[0], y = _this_value_rawValue_getComponents[1], max = this.props_.get("max"), px = mapRange(x, -max, +max, 0, 100), py = mapRange(y, -max, +max, 0, 100), ipy = this.props_.get("invertsY") ? 100 - py : py;
                            this.lineElem_.setAttributeNS(null, "x2", "".concat(px, "%")), this.lineElem_.setAttributeNS(null, "y2", "".concat(ipy, "%")), this.markerElem_.style.left = "".concat(px, "%"), this.markerElem_.style.top = "".concat(ipy, "%");
                        }
                    },
                    {
                        key: "onValueChange_",
                        value: function onValueChange_() {
                            this.update_();
                        }
                    },
                    {
                        key: "onPropsChange_",
                        value: function onPropsChange_() {
                            this.update_();
                        }
                    },
                    {
                        key: "onFoldableChange_",
                        value: function onFoldableChange_() {
                            this.update_();
                        }
                    }
                ]), _Point2dPickerView1;
            }(), "Point2dPickerView"), Point2dPickerView = _Point2dPickerView, __name(computeOffset, "computeOffset"), __name(_Point2dPickerController = function() {
                function _Point2dPickerController1(doc, config) {
                    _class_call_check(this, _Point2dPickerController1), this.onPadKeyDown_ = this.onPadKeyDown_.bind(this), this.onPadKeyUp_ = this.onPadKeyUp_.bind(this), this.onPointerDown_ = this.onPointerDown_.bind(this), this.onPointerMove_ = this.onPointerMove_.bind(this), this.onPointerUp_ = this.onPointerUp_.bind(this), this.props = config.props, this.value = config.value, this.viewProps = config.viewProps, this.view = new Point2dPickerView(doc, {
                        layout: config.layout,
                        props: this.props,
                        value: this.value,
                        viewProps: this.viewProps
                    }), this.ptHandler_ = new PointerHandler(this.view.padElement), this.ptHandler_.emitter.on("down", this.onPointerDown_), this.ptHandler_.emitter.on("move", this.onPointerMove_), this.ptHandler_.emitter.on("up", this.onPointerUp_), this.view.padElement.addEventListener("keydown", this.onPadKeyDown_), this.view.padElement.addEventListener("keyup", this.onPadKeyUp_);
                }
                return _create_class(_Point2dPickerController1, [
                    {
                        key: "handlePointerEvent_",
                        value: function handlePointerEvent_(d, opts) {
                            if (d.point) {
                                var max = this.props.get("max"), px = mapRange(d.point.x, 0, d.bounds.width, -max, +max), py = mapRange(this.props.get("invertsY") ? d.bounds.height - d.point.y : d.point.y, 0, d.bounds.height, -max, +max);
                                this.value.setRawValue(new Point2d(px, py), opts);
                            }
                        }
                    },
                    {
                        key: "onPointerDown_",
                        value: function onPointerDown_(ev) {
                            this.handlePointerEvent_(ev.data, {
                                forceEmit: !1,
                                last: !1
                            });
                        }
                    },
                    {
                        key: "onPointerMove_",
                        value: function onPointerMove_(ev) {
                            this.handlePointerEvent_(ev.data, {
                                forceEmit: !1,
                                last: !1
                            });
                        }
                    },
                    {
                        key: "onPointerUp_",
                        value: function onPointerUp_(ev) {
                            this.handlePointerEvent_(ev.data, {
                                forceEmit: !0,
                                last: !0
                            });
                        }
                    },
                    {
                        key: "onPadKeyDown_",
                        value: function onPadKeyDown_(ev) {
                            isArrowKey(ev.key) && ev.preventDefault();
                            var _computeOffset = _sliced_to_array(computeOffset(ev, [
                                this.props.get("xKeyScale"),
                                this.props.get("yKeyScale")
                            ], this.props.get("invertsY")), 2), dx = _computeOffset[0], dy = _computeOffset[1];
                            (0 !== dx || 0 !== dy) && this.value.setRawValue(new Point2d(this.value.rawValue.x + dx, this.value.rawValue.y + dy), {
                                forceEmit: !1,
                                last: !1
                            });
                        }
                    },
                    {
                        key: "onPadKeyUp_",
                        value: function onPadKeyUp_(ev) {
                            var _computeOffset = _sliced_to_array(computeOffset(ev, [
                                this.props.get("xKeyScale"),
                                this.props.get("yKeyScale")
                            ], this.props.get("invertsY")), 2), dx = _computeOffset[0], dy = _computeOffset[1];
                            (0 !== dx || 0 !== dy) && this.value.setRawValue(this.value.rawValue, {
                                forceEmit: !0,
                                last: !0
                            });
                        }
                    }
                ]), _Point2dPickerController1;
            }(), "Point2dPickerController"), Point2dPickerController = _Point2dPickerController, _Point2dController = function() {
                function _Point2dController1(doc, config) {
                    var _a, _b, _this = this;
                    _class_call_check(this, _Point2dController1), this.onPopupChildBlur_ = this.onPopupChildBlur_.bind(this), this.onPopupChildKeydown_ = this.onPopupChildKeydown_.bind(this), this.onPadButtonBlur_ = this.onPadButtonBlur_.bind(this), this.onPadButtonClick_ = this.onPadButtonClick_.bind(this), this.value = config.value, this.viewProps = config.viewProps, this.foldable_ = Foldable.create(config.expanded), this.popC_ = "popup" === config.pickerLayout ? new PopupController(doc, {
                        viewProps: this.viewProps
                    }) : null;
                    var padC = new Point2dPickerController(doc, {
                        layout: config.pickerLayout,
                        props: new ValueMap({
                            invertsY: createValue(config.invertsY),
                            max: createValue(config.max),
                            xKeyScale: config.axes[0].textProps.value("keyScale"),
                            yKeyScale: config.axes[1].textProps.value("keyScale")
                        }),
                        value: this.value,
                        viewProps: this.viewProps
                    });
                    padC.view.allFocusableElements.forEach(function(elem) {
                        elem.addEventListener("blur", _this.onPopupChildBlur_), elem.addEventListener("keydown", _this.onPopupChildKeydown_);
                    }), this.pickerC_ = padC, this.textC_ = new PointNdTextController(doc, {
                        assembly: Point2dAssembly,
                        axes: config.axes,
                        parser: config.parser,
                        value: this.value,
                        viewProps: this.viewProps
                    }), this.view = new Point2dView(doc, {
                        expanded: this.foldable_.value("expanded"),
                        pickerLayout: config.pickerLayout,
                        viewProps: this.viewProps
                    }), this.view.textElement.appendChild(this.textC_.view.element), null == (_a = this.view.buttonElement) || _a.addEventListener("b\
lur", this.onPadButtonBlur_), null == (_b = this.view.buttonElement) || _b.addEventListener("c\
lick", this.onPadButtonClick_), this.popC_ ? (this.view.element.appendChild(this.popC_.view.element), this.popC_.view.element.appendChild(this.pickerC_.view.element), connectValues({
                        primary: this.foldable_.value("expanded"),
                        secondary: this.popC_.shows,
                        forward: __name(function(p) {
                            return p;
                        }, "forward"),
                        backward: __name(function(_, s) {
                            return s;
                        }, "backward")
                    })) : this.view.pickerElement && (this.view.pickerElement.appendChild(this.pickerC_.view.element), bindFoldable(this.foldable_, this.view.pickerElement));
                }
                return _create_class(_Point2dController1, [
                    {
                        key: "textController",
                        get: function get() {
                            return this.textC_;
                        }
                    },
                    {
                        key: "onPadButtonBlur_",
                        value: function onPadButtonBlur_(e) {
                            if (this.popC_) {
                                var elem = this.view.element, nextTarget = forceCast(e.relatedTarget);
                                nextTarget && elem.contains(nextTarget) || (this.popC_.shows.rawValue = !1);
                            }
                        }
                    },
                    {
                        key: "onPadButtonClick_",
                        value: function onPadButtonClick_() {
                            this.foldable_.set("expanded", !this.foldable_.get("expanded")), this.foldable_.get("expanded") && this.pickerC_.view.allFocusableElements[0].focus();
                        }
                    },
                    {
                        key: "onPopupChildBlur_",
                        value: function onPopupChildBlur_(ev) {
                            if (this.popC_) {
                                var elem = this.popC_.view.element, nextTarget = findNextTarget(ev);
                                nextTarget && elem.contains(nextTarget) || (!nextTarget || nextTarget !== this.view.buttonElement || supportsTouch(elem.ownerDocument)) && (this.popC_.shows.rawValue = !1);
                            }
                        }
                    },
                    {
                        key: "onPopupChildKeydown_",
                        value: function onPopupChildKeydown_(ev) {
                            this.popC_ ? "Escape" === ev.key && (this.popC_.shows.rawValue = !1) : this.view.pickerElement && "Escape" === ev.key && this.view.buttonElement.focus();
                        }
                    }
                ]), _Point2dController1;
            }(), __name(_Point2dController, "Point2dController"), Point2dController = _Point2dController, __name(point2dFromUnknown, "point2dFromUnknown"), __name(writePoint2d, "writePoint2d"), __name(createConstraint$3, "createConstraint$3"), __name(getSuitableMaxDimensionValue, "getSuitableMaxDimensionValue"), __name(getSuitableMax, "getSuitableMax"), __name(shouldInvertY, "shouldInvertY"), Point2dInputPlugin = createPlugin({
                id: "input-point2d",
                type: "input",
                accept: __name(function(value, params) {
                    if (!Point2d.isObject(value)) return null;
                    var result3 = parseRecord(params, function(p) {
                        return Object.assign(Object.assign({}, createPointDimensionParser(p)), {
                            expanded: p.optional.boolean,
                            picker: p.optional.custom(parsePickerLayout),
                            readonly: p.optional.constant(!1),
                            x: p.optional.custom(parsePointDimensionParams),
                            y: p.optional.object(Object.assign(Object.assign({}, createPointDimensionParser(p)), {
                                inverted: p.optional.boolean
                            }))
                        });
                    });
                    return result3 ? {
                        initialValue: value,
                        params: result3
                    } : null;
                }, "accept"),
                binding: {
                    reader: __name(function() {
                        return point2dFromUnknown;
                    }, "reader"),
                    constraint: __name(function(args) {
                        return createConstraint$3(args.params, args.initialValue);
                    }, "constraint"),
                    equals: Point2d.equals,
                    writer: __name(function() {
                        return writePoint2d;
                    }, "writer")
                },
                controller: __name(function(args) {
                    var _a, _b, doc = args.document, value = args.value, c = args.constraint, dParams = [
                        args.params.x,
                        args.params.y
                    ];
                    return new Point2dController(doc, {
                        axes: value.rawValue.getComponents().map(function(comp, i) {
                            var _a2;
                            return createPointAxis({
                                constraint: c.components[i],
                                initialValue: comp,
                                params: deepMerge(args.params, null != (_a2 = dParams[i]) ? _a2 : {})
                            });
                        }),
                        expanded: null != (_a = args.params.expanded) && _a,
                        invertsY: shouldInvertY(args.params),
                        max: getSuitableMax(args.params, value.rawValue),
                        parser: parseNumber,
                        pickerLayout: null != (_b = args.params.picker) ? _b : "popup",
                        value: value,
                        viewProps: args.viewProps
                    });
                }, "controller")
            }), __name(_Point3d = function() {
                function _Point3d1() {
                    var x = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 0, y = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0, z = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 0;
                    _class_call_check(this, _Point3d1), this.x = x, this.y = y, this.z = z;
                }
                return _create_class(_Point3d1, [
                    {
                        key: "getComponents",
                        value: function getComponents() {
                            return [
                                this.x,
                                this.y,
                                this.z
                            ];
                        }
                    },
                    {
                        key: "toObject",
                        value: function toObject() {
                            return {
                                x: this.x,
                                y: this.y,
                                z: this.z
                            };
                        }
                    }
                ], [
                    {
                        key: "isObject",
                        value: function isObject1(obj) {
                            if (isEmpty(obj)) return !1;
                            var x = obj.x, y = obj.y, z = obj.z;
                            return "number" == typeof x && "number" == typeof y && "number" == typeof z;
                        }
                    },
                    {
                        key: "equals",
                        value: function equals(v1, v2) {
                            return v1.x === v2.x && v1.y === v2.y && v1.z === v2.z;
                        }
                    }
                ]), _Point3d1;
            }(), "Point3d"), Point3d = _Point3d, Point3dAssembly = {
                toComponents: __name(function(p) {
                    return p.getComponents();
                }, "toComponents"),
                fromComponents: __name(function(comps) {
                    return _construct(Point3d, _to_consumable_array(comps));
                }, "fromComponents")
            }, __name(point3dFromUnknown, "point3dFromUnknown"), __name(writePoint3d, "writePoint3d"), __name(createConstraint$2, "createConstraint$2"), Point3dInputPlugin = createPlugin({
                id: "input-point3d",
                type: "input",
                accept: __name(function(value, params) {
                    if (!Point3d.isObject(value)) return null;
                    var result3 = parseRecord(params, function(p) {
                        return Object.assign(Object.assign({}, createPointDimensionParser(p)), {
                            readonly: p.optional.constant(!1),
                            x: p.optional.custom(parsePointDimensionParams),
                            y: p.optional.custom(parsePointDimensionParams),
                            z: p.optional.custom(parsePointDimensionParams)
                        });
                    });
                    return result3 ? {
                        initialValue: value,
                        params: result3
                    } : null;
                }, "accept"),
                binding: {
                    reader: __name(function(_args) {
                        return point3dFromUnknown;
                    }, "reader"),
                    constraint: __name(function(args) {
                        return createConstraint$2(args.params, args.initialValue);
                    }, "constraint"),
                    equals: Point3d.equals,
                    writer: __name(function(_args) {
                        return writePoint3d;
                    }, "writer")
                },
                controller: __name(function(args) {
                    var value = args.value, c = args.constraint, dParams = [
                        args.params.x,
                        args.params.y,
                        args.params.z
                    ];
                    return new PointNdTextController(args.document, {
                        assembly: Point3dAssembly,
                        axes: value.rawValue.getComponents().map(function(comp, i) {
                            var _a;
                            return createPointAxis({
                                constraint: c.components[i],
                                initialValue: comp,
                                params: deepMerge(args.params, null != (_a = dParams[i]) ? _a : {})
                            });
                        }),
                        parser: parseNumber,
                        value: value,
                        viewProps: args.viewProps
                    });
                }, "controller")
            }), __name(_Point4d = function() {
                function _Point4d1() {
                    var x = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 0, y = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0, z = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 0, w = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : 0;
                    _class_call_check(this, _Point4d1), this.x = x, this.y = y, this.z = z, this.w = w;
                }
                return _create_class(_Point4d1, [
                    {
                        key: "getComponents",
                        value: function getComponents() {
                            return [
                                this.x,
                                this.y,
                                this.z,
                                this.w
                            ];
                        }
                    },
                    {
                        key: "toObject",
                        value: function toObject() {
                            return {
                                x: this.x,
                                y: this.y,
                                z: this.z,
                                w: this.w
                            };
                        }
                    }
                ], [
                    {
                        key: "isObject",
                        value: function isObject1(obj) {
                            if (isEmpty(obj)) return !1;
                            var x = obj.x, y = obj.y, z = obj.z, w = obj.w;
                            return "number" == typeof x && "number" == typeof y && "number" == typeof z && "number" == typeof w;
                        }
                    },
                    {
                        key: "equals",
                        value: function equals(v1, v2) {
                            return v1.x === v2.x && v1.y === v2.y && v1.z === v2.z && v1.w === v2.w;
                        }
                    }
                ]), _Point4d1;
            }(), "Point4d"), Point4d = _Point4d, Point4dAssembly = {
                toComponents: __name(function(p) {
                    return p.getComponents();
                }, "toComponents"),
                fromComponents: __name(function(comps) {
                    return _construct(Point4d, _to_consumable_array(comps));
                }, "fromComponents")
            }, __name(point4dFromUnknown, "point4dFromUnknown"), __name(writePoint4d, "writePoint4d"), __name(createConstraint$1, "createConstraint$1"), Point4dInputPlugin = createPlugin({
                id: "input-point4d",
                type: "input",
                accept: __name(function(value, params) {
                    if (!Point4d.isObject(value)) return null;
                    var result3 = parseRecord(params, function(p) {
                        return Object.assign(Object.assign({}, createPointDimensionParser(p)), {
                            readonly: p.optional.constant(!1),
                            w: p.optional.custom(parsePointDimensionParams),
                            x: p.optional.custom(parsePointDimensionParams),
                            y: p.optional.custom(parsePointDimensionParams),
                            z: p.optional.custom(parsePointDimensionParams)
                        });
                    });
                    return result3 ? {
                        initialValue: value,
                        params: result3
                    } : null;
                }, "accept"),
                binding: {
                    reader: __name(function(_args) {
                        return point4dFromUnknown;
                    }, "reader"),
                    constraint: __name(function(args) {
                        return createConstraint$1(args.params, args.initialValue);
                    }, "constraint"),
                    equals: Point4d.equals,
                    writer: __name(function(_args) {
                        return writePoint4d;
                    }, "writer")
                },
                controller: __name(function(args) {
                    var value = args.value, c = args.constraint, dParams = [
                        args.params.x,
                        args.params.y,
                        args.params.z,
                        args.params.w
                    ];
                    return new PointNdTextController(args.document, {
                        assembly: Point4dAssembly,
                        axes: value.rawValue.getComponents().map(function(comp, i) {
                            var _a;
                            return createPointAxis({
                                constraint: c.components[i],
                                initialValue: comp,
                                params: deepMerge(args.params, null != (_a = dParams[i]) ? _a : {})
                            });
                        }),
                        parser: parseNumber,
                        value: value,
                        viewProps: args.viewProps
                    });
                }, "controller")
            }), __name(createConstraint, "createConstraint"), StringInputPlugin = createPlugin({
                id: "input-string",
                type: "input",
                accept: __name(function(value, params) {
                    if ("string" != typeof value) return null;
                    var result3 = parseRecord(params, function(p) {
                        return {
                            readonly: p.optional.constant(!1),
                            options: p.optional.custom(parseListOptions)
                        };
                    });
                    return result3 ? {
                        initialValue: value,
                        params: result3
                    } : null;
                }, "accept"),
                binding: {
                    reader: __name(function(_args) {
                        return stringFromUnknown;
                    }, "reader"),
                    constraint: __name(function(args) {
                        return createConstraint(args.params);
                    }, "constraint"),
                    writer: __name(function(_args) {
                        return writePrimitive;
                    }, "writer")
                },
                controller: __name(function(args) {
                    var doc = args.document, value = args.value, c = args.constraint, lc = c && findConstraint(c, ListConstraint);
                    return lc ? new ListController(doc, {
                        props: new ValueMap({
                            options: lc.values.value("options")
                        }),
                        value: value,
                        viewProps: args.viewProps
                    }) : new TextController(doc, {
                        parser: __name(function(v) {
                            return v;
                        }, "parser"),
                        props: ValueMap.fromObject({
                            formatter: formatString
                        }),
                        value: value,
                        viewProps: args.viewProps
                    });
                }, "controller"),
                api: function api(args) {
                    return "string" != typeof args.controller.value.rawValue ? null : _instanceof(args.controller.valueController, ListController) ? new ListInputBindingApi(args.controller) : null;
                }
            }), Constants = {
                monitor: {
                    defaultInterval: 200,
                    defaultRows: 3
                }
            }, cn$3 = ClassName("mll"), __name(_MultiLogView = function() {
                function _MultiLogView1(doc, config) {
                    _class_call_check(this, _MultiLogView1), this.onValueUpdate_ = this.onValueUpdate_.bind(this), this.formatter_ = config.formatter, this.element = doc.createElement("div"), this.element.classList.add(cn$3()), config.viewProps.bindClassModifiers(this.element);
                    var textareaElem = doc.createElement("textarea");
                    textareaElem.classList.add(cn$3("i")), textareaElem.style.height = "calc(var(".concat(getCssVar("containerUnitSize"), ") * ").concat(config.rows, ")"), textareaElem.readOnly = !0, config.viewProps.bindDisabled(textareaElem), this.element.appendChild(textareaElem), this.textareaElem_ = textareaElem, config.value.emitter.on("change", this.onValueUpdate_), this.value = config.value, this.update_();
                }
                return _create_class(_MultiLogView1, [
                    {
                        key: "update_",
                        value: function update_() {
                            var _this = this, elem = this.textareaElem_, shouldScroll = elem.scrollTop === elem.scrollHeight - elem.clientHeight, lines = [];
                            this.value.rawValue.forEach(function(value) {
                                void 0 !== value && lines.push(_this.formatter_(value));
                            }), elem.textContent = lines.join("\n"), shouldScroll && (elem.scrollTop = elem.scrollHeight);
                        }
                    },
                    {
                        key: "onValueUpdate_",
                        value: function onValueUpdate_() {
                            this.update_();
                        }
                    }
                ]), _MultiLogView1;
            }(), "MultiLogView"), MultiLogView = _MultiLogView, __name(_MultiLogController = function _MultiLogController1(doc, config) {
                _class_call_check(this, _MultiLogController1), this.value = config.value, this.viewProps = config.viewProps, this.view = new MultiLogView(doc, {
                    formatter: config.formatter,
                    rows: config.rows,
                    value: this.value,
                    viewProps: this.viewProps
                });
            }, "MultiLogController"), MultiLogController = _MultiLogController, cn$2 = ClassName("sgl"), __name(_SingleLogView = function() {
                function _SingleLogView1(doc, config) {
                    _class_call_check(this, _SingleLogView1), this.onValueUpdate_ = this.onValueUpdate_.bind(this), this.formatter_ = config.formatter, this.element = doc.createElement("div"), this.element.classList.add(cn$2()), config.viewProps.bindClassModifiers(this.element);
                    var inputElem = doc.createElement("input");
                    inputElem.classList.add(cn$2("i")), inputElem.readOnly = !0, inputElem.type = "text", config.viewProps.bindDisabled(inputElem), this.element.appendChild(inputElem), this.inputElement = inputElem, config.value.emitter.on("change", this.onValueUpdate_), this.value = config.value, this.update_();
                }
                return _create_class(_SingleLogView1, [
                    {
                        key: "update_",
                        value: function update_() {
                            var values = this.value.rawValue, lastValue = values[values.length - 1];
                            this.inputElement.value = void 0 !== lastValue ? this.formatter_(lastValue) : "";
                        }
                    },
                    {
                        key: "onValueUpdate_",
                        value: function onValueUpdate_() {
                            this.update_();
                        }
                    }
                ]), _SingleLogView1;
            }(), "SingleLogView"), SingleLogView = _SingleLogView, __name(_SingleLogController = function _SingleLogController1(doc, config) {
                _class_call_check(this, _SingleLogController1), this.value = config.value, this.viewProps = config.viewProps, this.view = new SingleLogView(doc, {
                    formatter: config.formatter,
                    value: this.value,
                    viewProps: this.viewProps
                });
            }, "SingleLogController"), SingleLogController = _SingleLogController, BooleanMonitorPlugin = createPlugin({
                id: "monitor-bool",
                type: "monitor",
                accept: __name(function(value, params) {
                    if ("boolean" != typeof value) return null;
                    var result3 = parseRecord(params, function(p) {
                        return {
                            readonly: p.required.constant(!0),
                            rows: p.optional.number
                        };
                    });
                    return result3 ? {
                        initialValue: value,
                        params: result3
                    } : null;
                }, "accept"),
                binding: {
                    reader: __name(function(_args) {
                        return boolFromUnknown;
                    }, "reader")
                },
                controller: __name(function(args) {
                    var _a;
                    return 1 === args.value.rawValue.length ? new SingleLogController(args.document, {
                        formatter: BooleanFormatter,
                        value: args.value,
                        viewProps: args.viewProps
                    }) : new MultiLogController(args.document, {
                        formatter: BooleanFormatter,
                        rows: null != (_a = args.params.rows) ? _a : Constants.monitor.defaultRows,
                        value: args.value,
                        viewProps: args.viewProps
                    });
                }, "controller")
            }), __name(_GraphLogMonitorBindingApi = function(BindingApi1) {
                function _GraphLogMonitorBindingApi1() {
                    return _class_call_check(this, _GraphLogMonitorBindingApi1), _call_super(this, _GraphLogMonitorBindingApi1, arguments);
                }
                return _inherits(_GraphLogMonitorBindingApi1, BindingApi1), _create_class(_GraphLogMonitorBindingApi1, [
                    {
                        key: "max",
                        get: function get() {
                            return this.controller.valueController.props.get("max");
                        },
                        set: function set1(max) {
                            this.controller.valueController.props.set("max", max);
                        }
                    },
                    {
                        key: "min",
                        get: function get() {
                            return this.controller.valueController.props.get("min");
                        },
                        set: function set1(min) {
                            this.controller.valueController.props.set("min", min);
                        }
                    }
                ]), _GraphLogMonitorBindingApi1;
            }(BindingApi), "GraphLogMonitorBindingApi"), GraphLogMonitorBindingApi = _GraphLogMonitorBindingApi, cn$1 = ClassName("grl"), __name(_GraphLogView = function() {
                function _GraphLogView1(doc, config) {
                    _class_call_check(this, _GraphLogView1), this.onCursorChange_ = this.onCursorChange_.bind(this), this.onValueUpdate_ = this.onValueUpdate_.bind(this), this.element = doc.createElement("div"), this.element.classList.add(cn$1()), config.viewProps.bindClassModifiers(this.element), this.formatter_ = config.formatter, this.props_ = config.props, this.cursor_ = config.cursor, this.cursor_.emitter.on("change", this.onCursorChange_);
                    var svgElem = doc.createElementNS(SVG_NS, "svg");
                    svgElem.classList.add(cn$1("g")), svgElem.style.height = "calc(var(".concat(getCssVar("containerUnitSize"), ") * ").concat(config.rows, ")"), this.element.appendChild(svgElem), this.svgElem_ = svgElem;
                    var lineElem = doc.createElementNS(SVG_NS, "polyline");
                    this.svgElem_.appendChild(lineElem), this.lineElem_ = lineElem;
                    var tooltipElem = doc.createElement("div");
                    tooltipElem.classList.add(cn$1("t"), ClassName("tt")()), this.element.appendChild(tooltipElem), this.tooltipElem_ = tooltipElem, config.value.emitter.on("change", this.onValueUpdate_), this.value = config.value, this.update_();
                }
                return _create_class(_GraphLogView1, [
                    {
                        key: "graphElement",
                        get: function get() {
                            return this.svgElem_;
                        }
                    },
                    {
                        key: "update_",
                        value: function update_() {
                            var _this_element = this.element, w = _this_element.clientWidth, h = _this_element.clientHeight, maxIndex = this.value.rawValue.length - 1, min = this.props_.get("min"), max = this.props_.get("max"), points = [];
                            this.value.rawValue.forEach(function(v, index) {
                                if (void 0 !== v) {
                                    var x = mapRange(index, 0, maxIndex, 0, w), y = mapRange(v, min, max, h, 0);
                                    points.push([
                                        x,
                                        y
                                    ].join(","));
                                }
                            }), this.lineElem_.setAttributeNS(null, "points", points.join(" "));
                            var tooltipElem = this.tooltipElem_, value = this.value.rawValue[this.cursor_.rawValue];
                            if (void 0 === value) return void tooltipElem.classList.remove(cn$1("t", "a"));
                            var tx = mapRange(this.cursor_.rawValue, 0, maxIndex, 0, w), ty = mapRange(value, min, max, h, 0);
                            tooltipElem.style.left = "".concat(tx, "px"), tooltipElem.style.top = "".concat(ty, "px"), tooltipElem.textContent = "".concat(this.formatter_(value)), tooltipElem.classList.contains(cn$1("t", "a")) || (tooltipElem.classList.add(cn$1("t", "a"), cn$1("t", "in")), forceReflow(tooltipElem), tooltipElem.classList.remove(cn$1("t", "in")));
                        }
                    },
                    {
                        key: "onValueUpdate_",
                        value: function onValueUpdate_() {
                            this.update_();
                        }
                    },
                    {
                        key: "onCursorChange_",
                        value: function onCursorChange_() {
                            this.update_();
                        }
                    }
                ]), _GraphLogView1;
            }(), "GraphLogView"), GraphLogView = _GraphLogView, __name(_GraphLogController = function() {
                function _GraphLogController1(doc, config) {
                    if (_class_call_check(this, _GraphLogController1), this.onGraphMouseMove_ = this.onGraphMouseMove_.bind(this), this.onGraphMouseLeave_ = this.onGraphMouseLeave_.bind(this), this.onGraphPointerDown_ = this.onGraphPointerDown_.bind(this), this.onGraphPointerMove_ = this.onGraphPointerMove_.bind(this), this.onGraphPointerUp_ = this.onGraphPointerUp_.bind(this), this.props = config.props, this.value = config.value, this.viewProps = config.viewProps, this.cursor_ = createValue(-1), this.view = new GraphLogView(doc, {
                        cursor: this.cursor_,
                        formatter: config.formatter,
                        rows: config.rows,
                        props: this.props,
                        value: this.value,
                        viewProps: this.viewProps
                    }), supportsTouch(doc)) {
                        var ph = new PointerHandler(this.view.element);
                        ph.emitter.on("down", this.onGraphPointerDown_), ph.emitter.on("move", this.onGraphPointerMove_), ph.emitter.on("up", this.onGraphPointerUp_);
                    } else this.view.element.addEventListener("mousemove", this.onGraphMouseMove_), this.view.element.addEventListener("mouseleave", this.onGraphMouseLeave_);
                }
                return _create_class(_GraphLogController1, [
                    {
                        key: "importProps",
                        value: function importProps(state) {
                            var _this = this;
                            return importBladeState(state, null, function(p) {
                                return {
                                    max: p.required.number,
                                    min: p.required.number
                                };
                            }, function(result3) {
                                return _this.props.set("max", result3.max), _this.props.set("min", result3.min), !0;
                            });
                        }
                    },
                    {
                        key: "exportProps",
                        value: function exportProps() {
                            return exportBladeState(null, {
                                max: this.props.get("max"),
                                min: this.props.get("min")
                            });
                        }
                    },
                    {
                        key: "onGraphMouseLeave_",
                        value: function onGraphMouseLeave_() {
                            this.cursor_.rawValue = -1;
                        }
                    },
                    {
                        key: "onGraphMouseMove_",
                        value: function onGraphMouseMove_(ev) {
                            var w = this.view.element.clientWidth;
                            this.cursor_.rawValue = Math.floor(mapRange(ev.offsetX, 0, w, 0, this.value.rawValue.length));
                        }
                    },
                    {
                        key: "onGraphPointerDown_",
                        value: function onGraphPointerDown_(ev) {
                            this.onGraphPointerMove_(ev);
                        }
                    },
                    {
                        key: "onGraphPointerMove_",
                        value: function onGraphPointerMove_(ev) {
                            if (!ev.data.point) {
                                this.cursor_.rawValue = -1;
                                return;
                            }
                            this.cursor_.rawValue = Math.floor(mapRange(ev.data.point.x, 0, ev.data.bounds.width, 0, this.value.rawValue.length));
                        }
                    },
                    {
                        key: "onGraphPointerUp_",
                        value: function onGraphPointerUp_() {
                            this.cursor_.rawValue = -1;
                        }
                    }
                ]), _GraphLogController1;
            }(), "GraphLogController"), GraphLogController = _GraphLogController, __name(createFormatter, "createFormatter"), __name(createTextMonitor, "createTextMonitor"), __name(createGraphMonitor, "createGraphMonitor"), __name(shouldShowGraph, "shouldShowGraph"), NumberMonitorPlugin = createPlugin({
                id: "monitor-number",
                type: "monitor",
                accept: __name(function(value, params) {
                    if ("number" != typeof value) return null;
                    var result3 = parseRecord(params, function(p) {
                        return {
                            format: p.optional.function,
                            max: p.optional.number,
                            min: p.optional.number,
                            readonly: p.required.constant(!0),
                            rows: p.optional.number,
                            view: p.optional.string
                        };
                    });
                    return result3 ? {
                        initialValue: value,
                        params: result3
                    } : null;
                }, "accept"),
                binding: {
                    defaultBufferSize: __name(function(params) {
                        return shouldShowGraph(params) ? 64 : 1;
                    }, "d\
efaultBufferSize"),
                    reader: __name(function(_args) {
                        return numberFromUnknown;
                    }, "reader")
                },
                controller: __name(function(args) {
                    return shouldShowGraph(args.params) ? createGraphMonitor(args) : createTextMonitor(args);
                }, "controller"),
                api: __name(function(args) {
                    return _instanceof(args.controller.valueController, GraphLogController) ? new GraphLogMonitorBindingApi(args.controller) : null;
                }, "api")
            }), StringMonitorPlugin = createPlugin({
                id: "monitor-string",
                type: "monitor",
                accept: __name(function(value, params) {
                    if ("string" != typeof value) return null;
                    var result3 = parseRecord(params, function(p) {
                        return {
                            multiline: p.optional.boolean,
                            readonly: p.required.constant(!0),
                            rows: p.optional.number
                        };
                    });
                    return result3 ? {
                        initialValue: value,
                        params: result3
                    } : null;
                }, "accept"),
                binding: {
                    reader: __name(function(_args) {
                        return stringFromUnknown;
                    }, "reader")
                },
                controller: __name(function(args) {
                    var _a, value = args.value;
                    return value.rawValue.length > 1 || args.params.multiline ? new MultiLogController(args.document, {
                        formatter: formatString,
                        rows: null != (_a = args.params.rows) ? _a : Constants.monitor.defaultRows,
                        value: value,
                        viewProps: args.viewProps
                    }) : new SingleLogController(args.document, {
                        formatter: formatString,
                        value: value,
                        viewProps: args.viewProps
                    });
                }, "controller")
            }), __name(_BladeApiCache = function() {
                function _BladeApiCache1() {
                    _class_call_check(this, _BladeApiCache1), this.map_ = new Map();
                }
                return _create_class(_BladeApiCache1, [
                    {
                        key: "get",
                        value: function get(bc) {
                            var _a;
                            return null != (_a = this.map_.get(bc)) ? _a : null;
                        }
                    },
                    {
                        key: "has",
                        value: function has(bc) {
                            return this.map_.has(bc);
                        }
                    },
                    {
                        key: "add",
                        value: function add(bc, api) {
                            var _this = this;
                            return this.map_.set(bc, api), bc.viewProps.handleDispose(function() {
                                _this.map_.delete(bc);
                            }), api;
                        }
                    }
                ]), _BladeApiCache1;
            }(), "BladeApiCache"), BladeApiCache = _BladeApiCache, __name(_ReadWriteBinding = function() {
                function _ReadWriteBinding1(config) {
                    _class_call_check(this, _ReadWriteBinding1), this.target = config.target, this.reader_ = config.reader, this.writer_ = config.writer;
                }
                return _create_class(_ReadWriteBinding1, [
                    {
                        key: "read",
                        value: function read() {
                            return this.reader_(this.target.read());
                        }
                    },
                    {
                        key: "write",
                        value: function write(value) {
                            this.writer_(this.target, value);
                        }
                    },
                    {
                        key: "inject",
                        value: function inject(value) {
                            this.write(this.reader_(value));
                        }
                    }
                ]), _ReadWriteBinding1;
            }(), "ReadWriteBinding"), ReadWriteBinding = _ReadWriteBinding, __name(createInputBindingController, "createInputBindingController"), __name(_ReadonlyBinding = function() {
                function _ReadonlyBinding1(config) {
                    _class_call_check(this, _ReadonlyBinding1), this.target = config.target, this.reader_ = config.reader;
                }
                return _create_class(_ReadonlyBinding1, [
                    {
                        key: "read",
                        value: function read() {
                            return this.reader_(this.target.read());
                        }
                    }
                ]), _ReadonlyBinding1;
            }(), "ReadonlyBinding"), ReadonlyBinding = _ReadonlyBinding, __name(createTicker, "createTicker"), __name(createMonitorBindingController, "createMonitorBindingController"), __name(_PluginPool = function() {
                function _PluginPool1(apiCache) {
                    _class_call_check(this, _PluginPool1), this.pluginsMap_ = {
                        blades: [],
                        inputs: [],
                        monitors: []
                    }, this.apiCache_ = apiCache;
                }
                return _create_class(_PluginPool1, [
                    {
                        key: "getAll",
                        value: function getAll() {
                            return _to_consumable_array(this.pluginsMap_.blades).concat(_to_consumable_array(this.pluginsMap_.inputs), _to_consumable_array(this.pluginsMap_.monitors));
                        }
                    },
                    {
                        key: "register",
                        value: function register(bundleId, r) {
                            if (!isCompatible(r.core)) throw TpError.notCompatible(bundleId, r.id);
                            "blade" === r.type ? this.pluginsMap_.blades.unshift(r) : "input" === r.type ? this.pluginsMap_.inputs.unshift(r) : "monitor" === r.type && this.pluginsMap_.monitors.unshift(r);
                        }
                    },
                    {
                        key: "createInput_",
                        value: function createInput_(document2, target, params) {
                            return this.pluginsMap_.inputs.reduce(function(result3, plugin) {
                                return null != result3 ? result3 : createInputBindingController(plugin, {
                                    document: document2,
                                    target: target,
                                    params: params
                                });
                            }, null);
                        }
                    },
                    {
                        key: "createMonitor_",
                        value: function createMonitor_(document2, target, params) {
                            return this.pluginsMap_.monitors.reduce(function(result3, plugin) {
                                return null != result3 ? result3 : createMonitorBindingController(plugin, {
                                    document: document2,
                                    params: params,
                                    target: target
                                });
                            }, null);
                        }
                    },
                    {
                        key: "createBinding",
                        value: function createBinding(doc, target, params) {
                            if (isEmpty(target.read())) throw new TpError({
                                context: {
                                    key: target.key
                                },
                                type: "nomatchingcontroller"
                            });
                            var ic = this.createInput_(doc, target, params);
                            if (ic) return ic;
                            var mc = this.createMonitor_(doc, target, params);
                            if (mc) return mc;
                            throw new TpError({
                                context: {
                                    key: target.key
                                },
                                type: "nomatchingcontroller"
                            });
                        }
                    },
                    {
                        key: "createBlade",
                        value: function createBlade1(document2, params) {
                            var bc = this.pluginsMap_.blades.reduce(function(result3, plugin) {
                                return null != result3 ? result3 : createBladeController(plugin, {
                                    document: document2,
                                    params: params
                                });
                            }, null);
                            if (!bc) throw new TpError({
                                type: "nomatchingview",
                                context: {
                                    params: params
                                }
                            });
                            return bc;
                        }
                    },
                    {
                        key: "createInputBindingApi_",
                        value: function createInputBindingApi_(bc) {
                            var api = this.pluginsMap_.inputs.reduce(function(result3, plugin) {
                                var _a, _b;
                                return result3 || (null != (_b = null == (_a = plugin.api) ? void 0 : _a.call(plugin, {
                                    controller: bc
                                })) ? _b : null);
                            }, null);
                            return this.apiCache_.add(bc, null != api ? api : new BindingApi(bc));
                        }
                    },
                    {
                        key: "createMonitorBindingApi_",
                        value: function createMonitorBindingApi_(bc) {
                            var api = this.pluginsMap_.monitors.reduce(function(result3, plugin) {
                                var _a, _b;
                                return result3 || (null != (_b = null == (_a = plugin.api) ? void 0 : _a.call(plugin, {
                                    controller: bc
                                })) ? _b : null);
                            }, null);
                            return this.apiCache_.add(bc, null != api ? api : new BindingApi(bc));
                        }
                    },
                    {
                        key: "createBindingApi",
                        value: function createBindingApi(bc) {
                            if (this.apiCache_.has(bc)) return this.apiCache_.get(bc);
                            if (isInputBindingController(bc)) return this.createInputBindingApi_(bc);
                            if (isMonitorBindingController(bc)) return this.createMonitorBindingApi_(bc);
                            throw TpError.shouldNeverHappen();
                        }
                    },
                    {
                        key: "createApi",
                        value: function createApi(bc) {
                            var _this = this;
                            if (this.apiCache_.has(bc)) return this.apiCache_.get(bc);
                            if (isBindingController(bc)) return this.createBindingApi(bc);
                            var api = this.pluginsMap_.blades.reduce(function(result3, plugin) {
                                return null != result3 ? result3 : plugin.api({
                                    controller: bc,
                                    pool: _this
                                });
                            }, null);
                            if (!api) throw TpError.shouldNeverHappen();
                            return this.apiCache_.add(bc, api);
                        }
                    }
                ]), _PluginPool1;
            }(), "PluginPool"), PluginPool = _PluginPool, sharedCache = new BladeApiCache(), __name(createDefaultPluginPool, "createDefaultPluginPool"), __name(_ListBladeApi = function(BladeApi1) {
                function _ListBladeApi1(controller) {
                    var _this;
                    return _class_call_check(this, _ListBladeApi1), (_this = _call_super(this, _ListBladeApi1, [
                        controller
                    ])).emitter_ = new Emitter2(), _this.controller.value.emitter.on("change", function(ev) {
                        _this.emitter_.emit("change", new TpChangeEvent(_this, ev.rawValue));
                    }), _this;
                }
                return _inherits(_ListBladeApi1, BladeApi1), _create_class(_ListBladeApi1, [
                    {
                        key: "label",
                        get: function get() {
                            return this.controller.labelController.props.get("label");
                        },
                        set: function set1(label) {
                            this.controller.labelController.props.set("label", label);
                        }
                    },
                    {
                        key: "options",
                        get: function get() {
                            return this.controller.valueController.props.get("options");
                        },
                        set: function set1(options) {
                            this.controller.valueController.props.set("options", options);
                        }
                    },
                    {
                        key: "value",
                        get: function get() {
                            return this.controller.value.rawValue;
                        },
                        set: function set1(value) {
                            this.controller.value.rawValue = value;
                        }
                    },
                    {
                        key: "on",
                        value: function on(eventName, handler) {
                            var bh = handler.bind(this);
                            return this.emitter_.on(eventName, function(ev) {
                                bh(ev);
                            }, {
                                key: handler
                            }), this;
                        }
                    },
                    {
                        key: "off",
                        value: function off(eventName, handler) {
                            return this.emitter_.off(eventName, handler), this;
                        }
                    }
                ]), _ListBladeApi1;
            }(BladeApi), "ListBladeApi"), ListBladeApi = _ListBladeApi, __name(_SeparatorBladeApi = function(BladeApi1) {
                function _SeparatorBladeApi1() {
                    return _class_call_check(this, _SeparatorBladeApi1), _call_super(this, _SeparatorBladeApi1, arguments);
                }
                return _inherits(_SeparatorBladeApi1, BladeApi1), _SeparatorBladeApi1;
            }(BladeApi), "SeparatorBladeApi"), SeparatorBladeApi = _SeparatorBladeApi, __name(_SliderBladeApi = function(BladeApi1) {
                function _SliderBladeApi1(controller) {
                    var _this;
                    return _class_call_check(this, _SliderBladeApi1), (_this = _call_super(this, _SliderBladeApi1, [
                        controller
                    ])).emitter_ = new Emitter2(), _this.controller.value.emitter.on("change", function(ev) {
                        _this.emitter_.emit("change", new TpChangeEvent(_this, ev.rawValue));
                    }), _this;
                }
                return _inherits(_SliderBladeApi1, BladeApi1), _create_class(_SliderBladeApi1, [
                    {
                        key: "label",
                        get: function get() {
                            return this.controller.labelController.props.get("label");
                        },
                        set: function set1(label) {
                            this.controller.labelController.props.set("label", label);
                        }
                    },
                    {
                        key: "max",
                        get: function get() {
                            return this.controller.valueController.sliderController.props.get("max");
                        },
                        set: function set1(max) {
                            this.controller.valueController.sliderController.props.set("max", max);
                        }
                    },
                    {
                        key: "min",
                        get: function get() {
                            return this.controller.valueController.sliderController.props.get("min");
                        },
                        set: function set1(min) {
                            this.controller.valueController.sliderController.props.set("min", min);
                        }
                    },
                    {
                        key: "value",
                        get: function get() {
                            return this.controller.value.rawValue;
                        },
                        set: function set1(value) {
                            this.controller.value.rawValue = value;
                        }
                    },
                    {
                        key: "on",
                        value: function on(eventName, handler) {
                            var bh = handler.bind(this);
                            return this.emitter_.on(eventName, function(ev) {
                                bh(ev);
                            }, {
                                key: handler
                            }), this;
                        }
                    },
                    {
                        key: "off",
                        value: function off(eventName, handler) {
                            return this.emitter_.off(eventName, handler), this;
                        }
                    }
                ]), _SliderBladeApi1;
            }(BladeApi), "SliderBladeApi"), SliderBladeApi = _SliderBladeApi, __name(_TextBladeApi = function(BladeApi1) {
                function _TextBladeApi1(controller) {
                    var _this;
                    return _class_call_check(this, _TextBladeApi1), (_this = _call_super(this, _TextBladeApi1, [
                        controller
                    ])).emitter_ = new Emitter2(), _this.controller.value.emitter.on("change", function(ev) {
                        _this.emitter_.emit("change", new TpChangeEvent(_this, ev.rawValue));
                    }), _this;
                }
                return _inherits(_TextBladeApi1, BladeApi1), _create_class(_TextBladeApi1, [
                    {
                        key: "label",
                        get: function get() {
                            return this.controller.labelController.props.get("label");
                        },
                        set: function set1(label) {
                            this.controller.labelController.props.set("label", label);
                        }
                    },
                    {
                        key: "formatter",
                        get: function get() {
                            return this.controller.valueController.props.get("formatter");
                        },
                        set: function set1(formatter) {
                            this.controller.valueController.props.set("formatter", formatter);
                        }
                    },
                    {
                        key: "value",
                        get: function get() {
                            return this.controller.value.rawValue;
                        },
                        set: function set1(value) {
                            this.controller.value.rawValue = value;
                        }
                    },
                    {
                        key: "on",
                        value: function on(eventName, handler) {
                            var bh = handler.bind(this);
                            return this.emitter_.on(eventName, function(ev) {
                                bh(ev);
                            }, {
                                key: handler
                            }), this;
                        }
                    },
                    {
                        key: "off",
                        value: function off(eventName, handler) {
                            return this.emitter_.off(eventName, handler), this;
                        }
                    }
                ]), _TextBladeApi1;
            }(BladeApi), "TextBladeApi"), TextBladeApi = _TextBladeApi, ListBladePlugin = function() {
                return {
                    id: "list",
                    type: "blade",
                    core: VERSION$1,
                    accept: function accept(params) {
                        var result3 = parseRecord(params, function(p) {
                            return {
                                options: p.required.custom(parseListOptions),
                                value: p.required.raw,
                                view: p.required.constant("list"),
                                label: p.optional.string
                            };
                        });
                        return result3 ? {
                            params: result3
                        } : null;
                    },
                    controller: function controller(args) {
                        var lc = new ListConstraint(normalizeListOptions(args.params.options)), value = createValue(args.params.value, {
                            constraint: lc
                        }), ic = new ListController(args.document, {
                            props: new ValueMap({
                                options: lc.values.value("options")
                            }),
                            value: value,
                            viewProps: args.viewProps
                        });
                        return new LabeledValueBladeController(args.document, {
                            blade: args.blade,
                            props: ValueMap.fromObject({
                                label: args.params.label
                            }),
                            value: value,
                            valueController: ic
                        });
                    },
                    api: function api(args) {
                        return _instanceof(args.controller, LabeledValueBladeController) && _instanceof(args.controller.valueController, ListController) ? new ListBladeApi(args.controller) : null;
                    }
                };
            }(), __name(_RootApi = function(FolderApi1) {
                function _RootApi1(controller, pool) {
                    return _class_call_check(this, _RootApi1), _call_super(this, _RootApi1, [
                        controller,
                        pool
                    ]);
                }
                return _inherits(_RootApi1, FolderApi1), _create_class(_RootApi1, [
                    {
                        key: "element",
                        get: function get() {
                            return this.controller.view.element;
                        }
                    }
                ]), _RootApi1;
            }(FolderApi), "RootApi"), RootApi = _RootApi, __name(_RootController = function(FolderController1) {
                function _RootController1(doc, config) {
                    return _class_call_check(this, _RootController1), _call_super(this, _RootController1, [
                        doc,
                        {
                            expanded: config.expanded,
                            blade: config.blade,
                            props: config.props,
                            root: !0,
                            viewProps: config.viewProps
                        }
                    ]);
                }
                return _inherits(_RootController1, FolderController1), _RootController1;
            }(FolderController), "RootController"), RootController = _RootController, cn = ClassName("spr"), __name(_SeparatorView = function _SeparatorView1(doc, config) {
                _class_call_check(this, _SeparatorView1), this.element = doc.createElement("div"), this.element.classList.add(cn()), config.viewProps.bindClassModifiers(this.element);
                var hrElem = doc.createElement("hr");
                hrElem.classList.add(cn("r")), this.element.appendChild(hrElem);
            }, "SeparatorView"), SeparatorView = _SeparatorView, __name(_SeparatorController = function(BladeController1) {
                function _SeparatorController1(doc, config) {
                    return _class_call_check(this, _SeparatorController1), _call_super(this, _SeparatorController1, [
                        Object.assign(Object.assign({}, config), {
                            view: new SeparatorView(doc, {
                                viewProps: config.viewProps
                            })
                        })
                    ]);
                }
                return _inherits(_SeparatorController1, BladeController1), _SeparatorController1;
            }(BladeController), "SeparatorController"), SeparatorController = _SeparatorController, SeparatorBladePlugin = {
                id: "separator",
                type: "blade",
                core: VERSION$1,
                accept: function accept(params) {
                    var result3 = parseRecord(params, function(p) {
                        return {
                            view: p.required.constant("separator")
                        };
                    });
                    return result3 ? {
                        params: result3
                    } : null;
                },
                controller: function controller(args) {
                    return new SeparatorController(args.document, {
                        blade: args.blade,
                        viewProps: args.viewProps
                    });
                },
                api: function api(args) {
                    return _instanceof(args.controller, SeparatorController) ? new SeparatorBladeApi(args.controller) : null;
                }
            }, SliderBladePlugin = {
                id: "slider",
                type: "blade",
                core: VERSION$1,
                accept: function accept(params) {
                    var result3 = parseRecord(params, function(p) {
                        return {
                            max: p.required.number,
                            min: p.required.number,
                            view: p.required.constant("slider"),
                            format: p.optional.function,
                            label: p.optional.string,
                            value: p.optional.number
                        };
                    });
                    return result3 ? {
                        params: result3
                    } : null;
                },
                controller: function controller(args) {
                    var _a, _b, initialValue = null != (_a = args.params.value) ? _a : 0, drc = new DefiniteRangeConstraint({
                        max: args.params.max,
                        min: args.params.min
                    }), v = createValue(initialValue, {
                        constraint: drc
                    }), vc = new SliderTextController(args.document, Object.assign(Object.assign({}, createSliderTextProps({
                        formatter: null != (_b = args.params.format) ? _b : numberToString,
                        keyScale: createValue(1),
                        max: drc.values.value("max"),
                        min: drc.values.value("min"),
                        pointerScale: getSuitablePointerScale(args.params, initialValue)
                    })), {
                        parser: parseNumber,
                        value: v,
                        viewProps: args.viewProps
                    }));
                    return new LabeledValueBladeController(args.document, {
                        blade: args.blade,
                        props: ValueMap.fromObject({
                            label: args.params.label
                        }),
                        value: v,
                        valueController: vc
                    });
                },
                api: function api(args) {
                    return _instanceof(args.controller, LabeledValueBladeController) && _instanceof(args.controller.valueController, SliderTextController) ? new SliderBladeApi(args.controller) : null;
                }
            }, TextBladePlugin = function() {
                return {
                    id: "text",
                    type: "blade",
                    core: VERSION$1,
                    accept: function accept(params) {
                        var result3 = parseRecord(params, function(p) {
                            return {
                                parse: p.required.function,
                                value: p.required.raw,
                                view: p.required.constant("text"),
                                format: p.optional.function,
                                label: p.optional.string
                            };
                        });
                        return result3 ? {
                            params: result3
                        } : null;
                    },
                    controller: function controller(args) {
                        var _a, v = createValue(args.params.value), ic = new TextController(args.document, {
                            parser: args.params.parse,
                            props: ValueMap.fromObject({
                                formatter: null != (_a = args.params.format) ? _a : function(v2) {
                                    return String(v2);
                                }
                            }),
                            value: v,
                            viewProps: args.viewProps
                        });
                        return new LabeledValueBladeController(args.document, {
                            blade: args.blade,
                            props: ValueMap.fromObject({
                                label: args.params.label
                            }),
                            value: v,
                            valueController: ic
                        });
                    },
                    api: function api(args) {
                        return _instanceof(args.controller, LabeledValueBladeController) && _instanceof(args.controller.valueController, TextController) ? new TextBladeApi(args.controller) : null;
                    }
                };
            }(), __name(createDefaultWrapperElement, "createDefaultWrapperElement"), __name(embedStyle, "embedStyle"), __name(_Pane = function(RootApi1) {
                function _Pane1(opt_config) {
                    _class_call_check(this, _Pane1);
                    var _this, _a, _b, config = null != opt_config ? opt_config : {}, doc = null != (_a = config.document) ? _a : getWindowDocument(), pool = createDefaultPluginPool();
                    return (_this = _call_super(this, _Pane1, [
                        new RootController(doc, {
                            expanded: config.expanded,
                            blade: createBlade(),
                            props: ValueMap.fromObject({
                                title: config.title
                            }),
                            viewProps: ViewProps.create()
                        }),
                        pool
                    ])).pool_ = pool, _this.containerElem_ = null != (_b = config.container) ? _b : createDefaultWrapperElement(doc), _this.containerElem_.appendChild(_this.element), _this.doc_ = doc, _this.usesDefaultWrapper_ = !config.container, _this.setUpDefaultPlugins_(), _this;
                }
                return _inherits(_Pane1, RootApi1), _create_class(_Pane1, [
                    {
                        key: "document",
                        get: function get() {
                            if (!this.doc_) throw TpError.alreadyDisposed();
                            return this.doc_;
                        }
                    },
                    {
                        key: "dispose",
                        value: function dispose() {
                            var containerElem = this.containerElem_;
                            if (!containerElem) throw TpError.alreadyDisposed();
                            if (this.usesDefaultWrapper_) {
                                var parentElem = containerElem.parentElement;
                                parentElem && parentElem.removeChild(containerElem);
                            }
                            this.containerElem_ = null, this.doc_ = null, _get(_get_prototype_of(_Pane1.prototype), "dispose", this).call(this);
                        }
                    },
                    {
                        key: "registerPlugin",
                        value: function registerPlugin(bundle) {
                            var _this = this;
                            bundle.css && embedStyle(this.document, "plugin-".concat(bundle.id), bundle.css), ("plugin" in bundle ? [
                                bundle.plugin
                            ] : "plugins" in bundle ? bundle.plugins : []).forEach(function(p) {
                                _this.pool_.register(bundle.id, p);
                            });
                        }
                    },
                    {
                        key: "setUpDefaultPlugins_",
                        value: function setUpDefaultPlugins_() {
                            this.registerPlugin({
                                id: "default",
                                css: '.tp-tbiv_b,.tp-coltxtv_ms,.tp-colswv_b,.tp-ckbv_i,.tp-sglv_i,.tp-mllv_i,.tp-grlv_g\
,.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw,.tp-rotv_b,.tp-fldv_b,.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{-webkit\
-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;\
font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-p2dv_b\
,.tp-btnv_b,.tp-lstv_s{background-color:var(--btn-bg);border-radius:var(--bld-br);color:var(--btn-fg\
);cursor:pointer;display:block;font-weight:bold;height:var(--cnt-usz);line-height:var(--cnt-usz);ove\
rflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-p2dv_b:hover,.tp-btnv_b:hover,.tp-lstv_s:\
hover{background-color:var(--btn-bg-h)}.tp-p2dv_b:focus,.tp-btnv_b:focus,.tp-lstv_s:focus{background\
-color:var(--btn-bg-f)}.tp-p2dv_b:active,.tp-btnv_b:active,.tp-lstv_s:active{background-color:var(--\
btn-bg-a)}.tp-p2dv_b:disabled,.tp-btnv_b:disabled,.tp-lstv_s:disabled{opacity:.5}.tp-rotv_c>.tp-cntv\
.tp-v-lst,.tp-tbpv_c>.tp-cntv.tp-v-lst,.tp-fldv_c>.tp-cntv.tp-v-lst{margin-bottom:calc(-1*var(--cnt-\
vp))}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-tbpv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-fldv_c>.tp-\
fldv.tp-v-lst .tp-fldv_c{border-bottom-left-radius:0}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-tbp\
v_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_b{border-bottom-left-radius:0\
}.tp-rotv_c>*:not(.tp-v-fst),.tp-tbpv_c>*:not(.tp-v-fst),.tp-fldv_c>*:not(.tp-v-fst){margin-top:var(\
--cnt-usp)}.tp-rotv_c>.tp-sprv:not(.tp-v-fst),.tp-tbpv_c>.tp-sprv:not(.tp-v-fst),.tp-fldv_c>.tp-sprv\
:not(.tp-v-fst),.tp-rotv_c>.tp-cntv:not(.tp-v-fst),.tp-tbpv_c>.tp-cntv:not(.tp-v-fst),.tp-fldv_c>.tp\
-cntv:not(.tp-v-fst){margin-top:var(--cnt-vp)}.tp-rotv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-tbpv_c>.tp\
-sprv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-rotv_c>.tp-cntv+*:not(.tp-v-hi\
dden),.tp-tbpv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-cntv+*:not(.tp-v-hidden){margin-top:var\
(--cnt-vp)}.tp-rotv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-tbpv_c>.tp-sprv:not(.tp-v-hidden)+.tp-\
sprv,.tp-fldv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-rotv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.\
tp-tbpv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-fldv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv{margin-\
top:0}.tp-tbpv_c>.tp-cntv,.tp-fldv_c>.tp-cntv{margin-left:4px}.tp-tbpv_c>.tp-fldv>.tp-fldv_b,.tp-fld\
v_c>.tp-fldv>.tp-fldv_b{border-top-left-radius:var(--bld-br);border-bottom-left-radius:var(--bld-br)\
}.tp-tbpv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b{bor\
der-bottom-left-radius:0}.tp-tbpv_c .tp-fldv>.tp-fldv_c,.tp-fldv_c .tp-fldv>.tp-fldv_c{border-bottom\
-left-radius:var(--bld-br)}.tp-tbpv_c>.tp-cntv+.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-cntv+.tp-fldv>.tp-\
fldv_b{border-top-left-radius:0}.tp-tbpv_c>.tp-cntv+.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-cntv+.tp-tabv\
>.tp-tabv_t{border-top-left-radius:0}.tp-tbpv_c>.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-tabv>.tp-tabv_t{b\
order-top-left-radius:var(--bld-br)}.tp-tbpv_c .tp-tabv>.tp-tabv_c,.tp-fldv_c .tp-tabv>.tp-tabv_c{bo\
rder-bottom-left-radius:var(--bld-br)}.tp-rotv_b,.tp-fldv_b{background-color:var(--cnt-bg);color:var\
(--cnt-fg);cursor:pointer;display:block;height:calc(var(--cnt-usz) + 4px);line-height:calc(var(--cnt\
-usz) + 4px);overflow:hidden;padding-left:var(--cnt-hp);padding-right:calc(4px + var(--cnt-usz) + va\
r(--cnt-hp));position:relative;text-align:left;text-overflow:ellipsis;white-space:nowrap;width:100%;\
transition:border-radius .2s ease-in-out .2s}.tp-rotv_b:hover,.tp-fldv_b:hover{background-color:var(\
--cnt-bg-h)}.tp-rotv_b:focus,.tp-fldv_b:focus{background-color:var(--cnt-bg-f)}.tp-rotv_b:active,.tp\
-fldv_b:active{background-color:var(--cnt-bg-a)}.tp-rotv_b:disabled,.tp-fldv_b:disabled{opacity:.5}.\
tp-rotv_m,.tp-fldv_m{background:linear-gradient(to left, var(--cnt-fg), var(--cnt-fg) 2px, transpare\
nt 2px, transparent 4px, var(--cnt-fg) 4px);border-radius:2px;bottom:0;content:"";display:block;heig\
ht:6px;right:calc(var(--cnt-hp) + (var(--cnt-usz) + 4px - 6px)/2 - 2px);margin:auto;opacity:.5;posit\
ion:absolute;top:0;transform:rotate(90deg);transition:transform .2s ease-in-out;width:6px}.tp-rotv.t\
p-rotv-expanded .tp-rotv_m,.tp-fldv.tp-fldv-expanded>.tp-fldv_b>.tp-fldv_m{transform:none}.tp-rotv_c\
,.tp-fldv_c{box-sizing:border-box;height:0;opacity:0;overflow:hidden;padding-bottom:0;padding-top:0;\
position:relative;transition:height .2s ease-in-out,opacity .2s linear,padding .2s ease-in-out}.tp-r\
otv.tp-rotv-cpl:not(.tp-rotv-expanded) .tp-rotv_c,.tp-fldv.tp-fldv-cpl:not(.tp-fldv-expanded)>.tp-fl\
dv_c{display:none}.tp-rotv.tp-rotv-expanded .tp-rotv_c,.tp-fldv.tp-fldv-expanded>.tp-fldv_c{opacity:\
1;padding-bottom:var(--cnt-vp);padding-top:var(--cnt-vp);transform:none;overflow:visible;transition:\
height .2s ease-in-out,opacity .2s linear .2s,padding .2s ease-in-out}.tp-txtv_i,.tp-p2dpv_p,.tp-col\
swv_sw{background-color:var(--in-bg);border-radius:var(--bld-br);box-sizing:border-box;color:var(--i\
n-fg);font-family:inherit;height:var(--cnt-usz);line-height:var(--cnt-usz);min-width:0;width:100%}.t\
p-txtv_i:hover,.tp-p2dpv_p:hover,.tp-colswv_sw:hover{background-color:var(--in-bg-h)}.tp-txtv_i:focu\
s,.tp-p2dpv_p:focus,.tp-colswv_sw:focus{background-color:var(--in-bg-f)}.tp-txtv_i:active,.tp-p2dpv_\
p:active,.tp-colswv_sw:active{background-color:var(--in-bg-a)}.tp-txtv_i:disabled,.tp-p2dpv_p:disabl\
ed,.tp-colswv_sw:disabled{opacity:.5}.tp-lstv,.tp-coltxtv_m{position:relative}.tp-lstv_s{padding:0 2\
0px 0 4px;width:100%}.tp-lstv_m,.tp-coltxtv_mm{bottom:0;margin:auto;pointer-events:none;position:abs\
olute;right:2px;top:0}.tp-lstv_m svg,.tp-coltxtv_mm svg{bottom:0;height:16px;margin:auto;position:ab\
solute;right:0;top:0;width:16px}.tp-lstv_m svg path,.tp-coltxtv_mm svg path{fill:currentColor}.tp-sg\
lv_i,.tp-mllv_i,.tp-grlv_g{background-color:var(--mo-bg);border-radius:var(--bld-br);box-sizing:bord\
er-box;color:var(--mo-fg);height:var(--cnt-usz);scrollbar-color:currentColor rgba(0,0,0,0);scrollbar\
-width:thin;width:100%}.tp-sglv_i::-webkit-scrollbar,.tp-mllv_i::-webkit-scrollbar,.tp-grlv_g::-webk\
it-scrollbar{height:8px;width:8px}.tp-sglv_i::-webkit-scrollbar-corner,.tp-mllv_i::-webkit-scrollbar\
-corner,.tp-grlv_g::-webkit-scrollbar-corner{background-color:rgba(0,0,0,0)}.tp-sglv_i::-webkit-scro\
llbar-thumb,.tp-mllv_i::-webkit-scrollbar-thumb,.tp-grlv_g::-webkit-scrollbar-thumb{background-clip:\
padding-box;background-color:currentColor;border:rgba(0,0,0,0) solid 2px;border-radius:4px}.tp-pndtx\
tv,.tp-coltxtv_w{display:flex}.tp-pndtxtv_a,.tp-coltxtv_c{width:100%}.tp-pndtxtv_a+.tp-pndtxtv_a,.tp\
-coltxtv_c+.tp-pndtxtv_a,.tp-pndtxtv_a+.tp-coltxtv_c,.tp-coltxtv_c+.tp-coltxtv_c{margin-left:2px}.tp\
-rotv{--bs-bg: var(--tp-base-background-color, hsl(230, 7%, 17%));--bs-br: var(--tp-base-border-radi\
us, 6px);--bs-ff: var(--tp-base-font-family, Roboto Mono, Source Code Pro, Menlo, Courier, monospace\
);--bs-sh: var(--tp-base-shadow-color, rgba(0, 0, 0, 0.2));--bld-br: var(--tp-blade-border-radius, 2\
px);--bld-hp: var(--tp-blade-horizontal-padding, 4px);--bld-vw: var(--tp-blade-value-width, 160px);-\
-btn-bg: var(--tp-button-background-color, hsl(230, 7%, 70%));--btn-bg-a: var(--tp-button-background\
-color-active, #d6d7db);--btn-bg-f: var(--tp-button-background-color-focus, #c8cad0);--btn-bg-h: var\
(--tp-button-background-color-hover, #bbbcc4);--btn-fg: var(--tp-button-foreground-color, hsl(230, 7\
%, 17%));--cnt-bg: var(--tp-container-background-color, rgba(187, 188, 196, 0.1));--cnt-bg-a: var(--\
tp-container-background-color-active, rgba(187, 188, 196, 0.25));--cnt-bg-f: var(--tp-container-back\
ground-color-focus, rgba(187, 188, 196, 0.2));--cnt-bg-h: var(--tp-container-background-color-hover,\
 rgba(187, 188, 196, 0.15));--cnt-fg: var(--tp-container-foreground-color, hsl(230, 7%, 75%));--cnt-\
hp: var(--tp-container-horizontal-padding, 4px);--cnt-vp: var(--tp-container-vertical-padding, 4px);\
--cnt-usp: var(--tp-container-unit-spacing, 4px);--cnt-usz: var(--tp-container-unit-size, 20px);--in\
-bg: var(--tp-input-background-color, rgba(187, 188, 196, 0.1));--in-bg-a: var(--tp-input-background\
-color-active, rgba(187, 188, 196, 0.25));--in-bg-f: var(--tp-input-background-color-focus, rgba(187\
, 188, 196, 0.2));--in-bg-h: var(--tp-input-background-color-hover, rgba(187, 188, 196, 0.15));--in-\
fg: var(--tp-input-foreground-color, hsl(230, 7%, 75%));--lbl-fg: var(--tp-label-foreground-color, r\
gba(187, 188, 196, 0.7));--mo-bg: var(--tp-monitor-background-color, rgba(0, 0, 0, 0.2));--mo-fg: va\
r(--tp-monitor-foreground-color, rgba(187, 188, 196, 0.7));--grv-fg: var(--tp-groove-foreground-colo\
r, rgba(187, 188, 196, 0.1))}.tp-btnv_b{width:100%}.tp-btnv_t{text-align:center}.tp-ckbv_l{display:b\
lock;position:relative}.tp-ckbv_i{left:0;opacity:0;position:absolute;top:0}.tp-ckbv_w{background-col\
or:var(--in-bg);border-radius:var(--bld-br);cursor:pointer;display:block;height:var(--cnt-usz);posit\
ion:relative;width:var(--cnt-usz)}.tp-ckbv_w svg{display:block;height:16px;inset:0;margin:auto;opaci\
ty:0;position:absolute;width:16px}.tp-ckbv_w svg path{fill:none;stroke:var(--in-fg);stroke-width:2}.\
tp-ckbv_i:hover+.tp-ckbv_w{background-color:var(--in-bg-h)}.tp-ckbv_i:focus+.tp-ckbv_w{background-co\
lor:var(--in-bg-f)}.tp-ckbv_i:active+.tp-ckbv_w{background-color:var(--in-bg-a)}.tp-ckbv_i:checked+.\
tp-ckbv_w svg{opacity:1}.tp-ckbv.tp-v-disabled .tp-ckbv_w{opacity:.5}.tp-colv{position:relative}.tp-\
colv_h{display:flex}.tp-colv_s{flex-grow:0;flex-shrink:0;width:var(--cnt-usz)}.tp-colv_t{flex:1;marg\
in-left:4px}.tp-colv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in\
-out,opacity .2s linear,margin .2s ease-in-out}.tp-colv.tp-colv-expanded.tp-colv-cpl .tp-colv_p{over\
flow:visible}.tp-colv.tp-colv-expanded .tp-colv_p{margin-top:var(--cnt-usp);opacity:1}.tp-colv .tp-p\
opv{left:calc(-1*var(--cnt-hp));right:calc(-1*var(--cnt-hp));top:var(--cnt-usz)}.tp-colpv_h,.tp-colp\
v_ap{margin-left:6px;margin-right:6px}.tp-colpv_h{margin-top:var(--cnt-usp)}.tp-colpv_rgb{display:fl\
ex;margin-top:var(--cnt-usp);width:100%}.tp-colpv_a{display:flex;margin-top:var(--cnt-vp);padding-to\
p:calc(var(--cnt-vp) + 2px);position:relative}.tp-colpv_a::before{background-color:var(--grv-fg);con\
tent:"";height:2px;left:calc(-1*var(--cnt-hp));position:absolute;right:calc(-1*var(--cnt-hp));top:0}\
.tp-colpv.tp-v-disabled .tp-colpv_a::before{opacity:.5}.tp-colpv_ap{align-items:center;display:flex;\
flex:3}.tp-colpv_at{flex:1;margin-left:4px}.tp-svpv{border-radius:var(--bld-br);outline:none;overflo\
w:hidden;position:relative}.tp-svpv.tp-v-disabled{opacity:.5}.tp-svpv_c{cursor:crosshair;display:blo\
ck;height:calc(var(--cnt-usz)*4);width:100%}.tp-svpv_m{border-radius:100%;border:rgba(255,255,255,.7\
5) solid 2px;box-sizing:border-box;filter:drop-shadow(0 0 1px rgba(0, 0, 0, 0.3));height:12px;margin\
-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;width:12px}.tp-svpv:focus .tp-svpv_\
m{border-color:#fff}.tp-hplv{cursor:pointer;height:var(--cnt-usz);outline:none;position:relative}.tp\
-hplv.tp-v-disabled{opacity:.5}.tp-hplv_c{background-image:url(data:image/png;base64,iVBORw0KGgoAAAA\
NSUhEUgAAAEAAAAABCAYAAABubagXAAAAQ0lEQVQoU2P8z8Dwn0GCgQEDi2OK/RBgYHjBgIpfovFh8j8YBIgzFGQxuqEgPhaDOT5\
gOhPkdCxOZeBg+IDFZZiGAgCaSSMYtcRHLgAAAABJRU5ErkJggg==);background-position:left top;background-repea\
t:no-repeat;background-size:100% 100%;border-radius:2px;display:block;height:4px;left:0;margin-top:-\
2px;position:absolute;top:50%;width:100%}.tp-hplv_m{border-radius:var(--bld-br);border:rgba(255,255,\
255,.75) solid 2px;box-shadow:0 0 2px rgba(0,0,0,.1);box-sizing:border-box;height:12px;left:50%;marg\
in-left:-6px;margin-top:-6px;position:absolute;top:50%;width:12px}.tp-hplv:focus .tp-hplv_m{border-c\
olor:#fff}.tp-aplv{cursor:pointer;height:var(--cnt-usz);outline:none;position:relative;width:100%}.t\
p-aplv.tp-v-disabled{opacity:.5}.tp-aplv_b{background-color:#fff;background-image:linear-gradient(to\
 top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd\
 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:4px 4px;background-position:0 0,2p\
x 2px;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;overflow:hidden;position:abs\
olute;top:50%;width:100%}.tp-aplv_c{inset:0;position:absolute}.tp-aplv_m{background-color:#fff;backg\
round-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),line\
ar-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:12px\
 12px;background-position:0 0,6px 6px;border-radius:var(--bld-br);box-shadow:0 0 2px rgba(0,0,0,.1);\
height:12px;left:50%;margin-left:-6px;margin-top:-6px;overflow:hidden;position:absolute;top:50%;widt\
h:12px}.tp-aplv_p{border-radius:var(--bld-br);border:rgba(255,255,255,.75) solid 2px;box-sizing:bord\
er-box;inset:0;position:absolute}.tp-aplv:focus .tp-aplv_p{border-color:#fff}.tp-colswv{background-c\
olor:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%,\
 #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);backg\
round-size:10px 10px;background-position:0 0,5px 5px;border-radius:var(--bld-br);overflow:hidden}.tp\
-colswv.tp-v-disabled{opacity:.5}.tp-colswv_sw{border-radius:0}.tp-colswv_b{cursor:pointer;display:b\
lock;height:var(--cnt-usz);left:0;position:absolute;top:0;width:var(--cnt-usz)}.tp-colswv_b:focus::a\
fter{border:rgba(255,255,255,.75) solid 2px;border-radius:var(--bld-br);content:"";display:block;ins\
et:0;position:absolute}.tp-coltxtv{display:flex;width:100%}.tp-coltxtv_m{margin-right:4px}.tp-coltxt\
v_ms{border-radius:var(--bld-br);color:var(--lbl-fg);cursor:pointer;height:var(--cnt-usz);line-heigh\
t:var(--cnt-usz);padding:0 18px 0 4px}.tp-coltxtv_ms:hover{background-color:var(--in-bg-h)}.tp-coltx\
tv_ms:focus{background-color:var(--in-bg-f)}.tp-coltxtv_ms:active{background-color:var(--in-bg-a)}.t\
p-coltxtv_mm{color:var(--lbl-fg)}.tp-coltxtv.tp-v-disabled .tp-coltxtv_mm{opacity:.5}.tp-coltxtv_w{f\
lex:1}.tp-dfwv{position:absolute;top:8px;right:8px;width:256px}.tp-fldv{position:relative}.tp-fldv_t\
{padding-left:4px}.tp-fldv_b:disabled .tp-fldv_m{display:none}.tp-fldv_c{padding-left:4px}.tp-fldv_i\
{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--cnt-usz) + 4px\
);width:max(var(--bs-br),4px)}.tp-fldv_i::before{background-color:currentColor;bottom:0;content:"";l\
eft:0;position:absolute;top:0;width:4px}.tp-fldv_b:hover+.tp-fldv_i{color:var(--cnt-bg-h)}.tp-fldv_b\
:focus+.tp-fldv_i{color:var(--cnt-bg-f)}.tp-fldv_b:active+.tp-fldv_i{color:var(--cnt-bg-a)}.tp-fldv.\
tp-v-disabled>.tp-fldv_i{opacity:.5}.tp-grlv{position:relative}.tp-grlv_g{display:block;height:calc(\
var(--cnt-usz)*3)}.tp-grlv_g polyline{fill:none;stroke:var(--mo-fg);stroke-linejoin:round}.tp-grlv_t\
{margin-top:-4px;transition:left .05s,top .05s;visibility:hidden}.tp-grlv_t.tp-grlv_t-a{visibility:v\
isible}.tp-grlv_t.tp-grlv_t-in{transition:none}.tp-grlv.tp-v-disabled .tp-grlv_g{opacity:.5}.tp-grlv\
 .tp-ttv{background-color:var(--mo-fg)}.tp-grlv .tp-ttv::before{border-top-color:var(--mo-fg)}.tp-lb\
lv{align-items:center;display:flex;line-height:1.3;padding-left:var(--cnt-hp);padding-right:var(--cn\
t-hp)}.tp-lblv.tp-lblv-nol{display:block}.tp-lblv_l{color:var(--lbl-fg);flex:1;-webkit-hyphens:auto;\
hyphens:auto;overflow:hidden;padding-left:4px;padding-right:16px}.tp-lblv.tp-v-disabled .tp-lblv_l{o\
pacity:.5}.tp-lblv.tp-lblv-nol .tp-lblv_l{display:none}.tp-lblv_v{align-self:flex-start;flex-grow:0;\
flex-shrink:0;width:var(--bld-vw)}.tp-lblv.tp-lblv-nol .tp-lblv_v{width:100%}.tp-lstv_s{padding:0 20\
px 0 var(--bld-hp);width:100%}.tp-lstv_m{color:var(--btn-fg)}.tp-sglv_i{padding-left:var(--bld-hp);p\
adding-right:var(--bld-hp)}.tp-sglv.tp-v-disabled .tp-sglv_i{opacity:.5}.tp-mllv_i{display:block;hei\
ght:calc(var(--cnt-usz)*3);line-height:var(--cnt-usz);padding-left:var(--bld-hp);padding-right:var(-\
-bld-hp);resize:none;white-space:pre}.tp-mllv.tp-v-disabled .tp-mllv_i{opacity:.5}.tp-p2dv{position:\
relative}.tp-p2dv_h{display:flex}.tp-p2dv_b{height:var(--cnt-usz);margin-right:4px;position:relative\
;width:var(--cnt-usz)}.tp-p2dv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:\
-8px;position:absolute;top:50%;width:16px}.tp-p2dv_b svg path{stroke:currentColor;stroke-width:2}.tp\
-p2dv_b svg circle{fill:currentColor}.tp-p2dv_t{flex:1}.tp-p2dv_p{height:0;margin-top:0;opacity:0;ov\
erflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-p2dv.t\
p-p2dv-expanded .tp-p2dv_p{margin-top:var(--cnt-usp);opacity:1}.tp-p2dv .tp-popv{left:calc(-1*var(--\
cnt-hp));right:calc(-1*var(--cnt-hp));top:var(--cnt-usz)}.tp-p2dpv{padding-left:calc(var(--cnt-usz) \
+ 4px)}.tp-p2dpv_p{cursor:crosshair;height:0;overflow:hidden;padding-bottom:100%;position:relative}.\
tp-p2dpv.tp-v-disabled .tp-p2dpv_p{opacity:.5}.tp-p2dpv_g{display:block;height:100%;left:0;pointer-e\
vents:none;position:absolute;top:0;width:100%}.tp-p2dpv_ax{opacity:.1;stroke:var(--in-fg);stroke-das\
harray:1}.tp-p2dpv_l{opacity:.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_m{border:var(--in-f\
g) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;pos\
ition:absolute;width:4px}.tp-p2dpv_p:focus .tp-p2dpv_m{background-color:var(--in-fg);border-width:0}\
.tp-popv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);\
display:none;max-width:var(--bld-vw);padding:var(--cnt-vp) var(--cnt-hp);position:absolute;visibilit\
y:hidden;z-index:1000}.tp-popv.tp-popv-v{display:block;visibility:visible}.tp-sldv.tp-v-disabled{opa\
city:.5}.tp-sldv_t{box-sizing:border-box;cursor:pointer;height:var(--cnt-usz);margin:0 6px;outline:n\
one;position:relative}.tp-sldv_t::before{background-color:var(--in-bg);border-radius:1px;content:"";\
display:block;height:2px;inset:0;margin:auto;position:absolute}.tp-sldv_k{height:100%;left:0;positio\
n:absolute;top:0}.tp-sldv_k::before{background-color:var(--in-fg);border-radius:1px;content:"";displ\
ay:block;height:2px;inset:0;margin-bottom:auto;margin-top:auto;position:absolute}.tp-sldv_k::after{b\
ackground-color:var(--btn-bg);border-radius:var(--bld-br);bottom:0;content:"";display:block;height:1\
2px;margin-bottom:auto;margin-top:auto;position:absolute;right:-6px;top:0;width:12px}.tp-sldv_t:hove\
r .tp-sldv_k::after{background-color:var(--btn-bg-h)}.tp-sldv_t:focus .tp-sldv_k::after{background-c\
olor:var(--btn-bg-f)}.tp-sldv_t:active .tp-sldv_k::after{background-color:var(--btn-bg-a)}.tp-sldtxt\
v{display:flex}.tp-sldtxtv_s{flex:2}.tp-sldtxtv_t{flex:1;margin-left:4px}.tp-tabv{position:relative}\
.tp-tabv_t{align-items:flex-end;color:var(--cnt-bg);display:flex;overflow:hidden;position:relative}.\
tp-tabv_t:hover{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus){color:var(--cnt-bg-f)}.tp-tabv_t:has(*\
:active){color:var(--cnt-bg-a)}.tp-tabv_t::before{background-color:currentColor;bottom:0;content:"";\
height:2px;left:0;pointer-events:none;position:absolute;right:0}.tp-tabv.tp-v-disabled .tp-tabv_t::b\
efore{opacity:.5}.tp-tabv.tp-tabv-nop .tp-tabv_t{height:calc(var(--cnt-usz) + 4px);position:relative\
}.tp-tabv.tp-tabv-nop .tp-tabv_t::before{background-color:var(--cnt-bg);bottom:0;content:"";height:2\
px;left:0;position:absolute;right:0}.tp-tabv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;p\
osition:absolute;top:calc(var(--cnt-usz) + 4px);width:max(var(--bs-br),4px)}.tp-tabv_i::before{backg\
round-color:currentColor;bottom:0;content:"";left:0;position:absolute;top:0;width:4px}.tp-tabv_t:hov\
er+.tp-tabv_i{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus)+.tp-tabv_i{color:var(--cnt-bg-f)}.tp-tab\
v_t:has(*:active)+.tp-tabv_i{color:var(--cnt-bg-a)}.tp-tabv.tp-v-disabled>.tp-tabv_i{opacity:.5}.tp-\
tbiv{flex:1;min-width:0;position:relative}.tp-tbiv+.tp-tbiv{margin-left:2px}.tp-tbiv+.tp-tbiv.tp-v-d\
isabled::before{opacity:.5}.tp-tbiv_b{display:block;padding-left:calc(var(--cnt-hp) + 4px);padding-r\
ight:calc(var(--cnt-hp) + 4px);position:relative;width:100%}.tp-tbiv_b:disabled{opacity:.5}.tp-tbiv_\
b::before{background-color:var(--cnt-bg);content:"";inset:0 0 2px;pointer-events:none;position:absol\
ute}.tp-tbiv_b:hover::before{background-color:var(--cnt-bg-h)}.tp-tbiv_b:focus::before{background-co\
lor:var(--cnt-bg-f)}.tp-tbiv_b:active::before{background-color:var(--cnt-bg-a)}.tp-tbiv_t{color:var(\
--cnt-fg);height:calc(var(--cnt-usz) + 4px);line-height:calc(var(--cnt-usz) + 4px);opacity:.5;overfl\
ow:hidden;position:relative;text-overflow:ellipsis}.tp-tbiv.tp-tbiv-sel .tp-tbiv_t{opacity:1}.tp-tbp\
v_c{padding-bottom:var(--cnt-vp);padding-left:4px;padding-top:var(--cnt-vp)}.tp-txtv{position:relati\
ve}.tp-txtv_i{padding-left:var(--bld-hp);padding-right:var(--bld-hp)}.tp-txtv.tp-txtv-fst .tp-txtv_i\
{border-bottom-right-radius:0;border-top-right-radius:0}.tp-txtv.tp-txtv-mid .tp-txtv_i{border-radiu\
s:0}.tp-txtv.tp-txtv-lst .tp-txtv_i{border-bottom-left-radius:0;border-top-left-radius:0}.tp-txtv.tp\
-txtv-num .tp-txtv_i{text-align:right}.tp-txtv.tp-txtv-drg .tp-txtv_i{opacity:.3}.tp-txtv_k{cursor:p\
ointer;height:100%;left:calc(var(--bld-hp) - 5px);position:absolute;top:0;width:12px}.tp-txtv_k::bef\
ore{background-color:var(--in-fg);border-radius:1px;bottom:0;content:"";height:calc(var(--cnt-usz) -\
 4px);left:50%;margin-bottom:auto;margin-left:-1px;margin-top:auto;opacity:.1;position:absolute;top:\
0;transition:border-radius .1s,height .1s,transform .1s,width .1s;width:2px}.tp-txtv_k:hover::before\
,.tp-txtv.tp-txtv-drg .tp-txtv_k::before{opacity:1}.tp-txtv.tp-txtv-drg .tp-txtv_k::before{border-ra\
dius:50%;height:4px;transform:translateX(-1px);width:4px}.tp-txtv_g{bottom:0;display:block;height:8p\
x;left:50%;margin:auto;overflow:visible;pointer-events:none;position:absolute;top:0;visibility:hidde\
n;width:100%}.tp-txtv.tp-txtv-drg .tp-txtv_g{visibility:visible}.tp-txtv_gb{fill:none;stroke:var(--i\
n-fg);stroke-dasharray:1}.tp-txtv_gh{fill:none;stroke:var(--in-fg)}.tp-txtv .tp-ttv{margin-left:6px;\
visibility:hidden}.tp-txtv.tp-txtv-drg .tp-ttv{visibility:visible}.tp-ttv{background-color:var(--in-\
fg);border-radius:var(--bld-br);color:var(--bs-bg);padding:2px 4px;pointer-events:none;position:abso\
lute;transform:translate(-50%, -100%)}.tp-ttv::before{border-color:var(--in-fg) rgba(0,0,0,0) rgba(0\
,0,0,0) rgba(0,0,0,0);border-style:solid;border-width:2px;box-sizing:border-box;content:"";font-size\
:.9em;height:4px;left:50%;margin-left:-2px;position:absolute;top:100%;width:4px}.tp-rotv{background-\
color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);font-family:var(--bs\
-ff);font-size:11px;font-weight:500;line-height:1;text-align:left}.tp-rotv_b{border-bottom-left-radi\
us:var(--bs-br);border-bottom-right-radius:var(--bs-br);border-top-left-radius:var(--bs-br);border-t\
op-right-radius:var(--bs-br);padding-left:calc(4px + var(--cnt-usz) + var(--cnt-hp));text-align:cent\
er}.tp-rotv.tp-rotv-expanded .tp-rotv_b{border-bottom-left-radius:0;border-bottom-right-radius:0;tra\
nsition-delay:0s;transition-duration:0s}.tp-rotv.tp-rotv-not>.tp-rotv_b{display:none}.tp-rotv_b:disa\
bled .tp-rotv_m{display:none}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_c{border-bottom-left-radius:var(-\
-bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_i{border-botto\
m-left-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bot\
tom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst.tp\
-fldv-expanded>.tp-fldv_b{transition-delay:0s;transition-duration:0s}.tp-rotv_c .tp-fldv.tp-v-vlst:n\
ot(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-ro\
tv_c>.tp-fldv.tp-v-fst{margin-top:calc(-1*var(--cnt-vp))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp\
-v-fst>.tp-fldv_b{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv_\
c>.tp-tabv.tp-v-lst>.tp-tabv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var\
(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv.tp\
-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst{margin-top:calc(-1*var(--cnt-vp))}.tp-rotv.tp-rotv-not .tp-ro\
tv_c>.tp-tabv.tp-v-fst>.tp-tabv_t{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--\
bs-br)}.tp-rotv.tp-v-disabled,.tp-rotv .tp-v-disabled{pointer-events:none}.tp-rotv.tp-v-hidden,.tp-r\
otv .tp-v-hidden{display:none}.tp-sprv_r{background-color:var(--grv-fg);border-width:0;display:block\
;height:2px;margin:0;width:100%}.tp-sprv.tp-v-disabled .tp-sprv_r{opacity:.5}',
                                plugins: [
                                    ListBladePlugin,
                                    SeparatorBladePlugin,
                                    SliderBladePlugin,
                                    TabBladePlugin,
                                    TextBladePlugin
                                ]
                            });
                        }
                    }
                ]), _Pane1;
            }(RootApi), "Pane"), Pane = _Pane, VERSION = new Semver("4.0.5");
        }
    }), init_panelControl = __esm({
        "extensions/ludex/src/plugins/canvas-recorder/components/panelControl.ts": function() {
            init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_tweakpane(), I2 = Ludex.Utils.Image, _PanelControl = function() {
                function _PanelControl1(recorder, options) {
                    var _this = this;
                    _class_call_check(this, _PanelControl1), _define_property(this, "options$", void 0), _define_property(this, "recorder$", void 0), _define_property(this, "pane$", void 0), _define_property(this, "optionsFolder$", void 0), _define_property(this, "controlFolder$", void 0), _define_property(this, "previewFolder$", void 0), _define_property(this, "infoFolder$", void 0), _define_property(this, "qualityInput$", void 0), _define_property(this, "previewImage$", void 0), _define_property(this, "printScreenButton$", void 0), _define_property(this, "startRecordButton$", void 0), _define_property(this, "stopRecordButton$", void 0), _define_property(this, "previewRecordButton$", void 0), _define_property(this, "downloadZipButton$", void 0), _define_property(this, "recorderMonitor$", void 0), _define_property(this, "cachedImages$", void 0), _define_property(this, "previewImages$", void 0), _define_property(this, "previewImageIndex$", void 0), _define_property(this, "previewTimer$", void 0), _define_property(this, "previewFrame$", {
                        url: "",
                        element: null
                    }), _define_property(this, "snapshotFrame$", __name(function() {
                        return _async_to_generator(function() {
                            var image;
                            return _ts_generator(this, function(_state) {
                                switch(_state.label){
                                    case 0:
                                        return _state.trys.push([
                                            0,
                                            ,
                                            2,
                                            3
                                        ]), this.printScreenButton$.disabled = !0, this.startRecordButton$.disabled = !0, [
                                            4,
                                            this.recorder$.snapshotFrameAsync({
                                                force: !0
                                            })
                                        ];
                                    case 1:
                                        return (image = _state.sent()) ? this.recorder$.downloadImage(image) : console.warn("No image captured"), [
                                            3,
                                            3
                                        ];
                                    case 2:
                                        return this.printScreenButton$.disabled = !1, this.startRecordButton$.disabled = !1, [
                                            7
                                        ];
                                    case 3:
                                        return [
                                            2
                                        ];
                                }
                            });
                        }).call(_this);
                    }, "snapshotFrame$")), _define_property(this, "startCapture$", __name(function() {
                        return _async_to_generator(function() {
                            var _iteratorNormalCompletion, _didIteratorError, _iteratorError, _iterator, _step, cache;
                            return _ts_generator(this, function(_state) {
                                switch(_state.label){
                                    case 0:
                                        return this.previewFolder$.expanded = !1, [
                                            4,
                                            this.recorder$.startCaptureAsync()
                                        ];
                                    case 1:
                                        _state.sent(), _iteratorNormalCompletion = !0, _didIteratorError = !1, _iteratorError = void 0;
                                        try {
                                            for(_iterator = this.cachedImages$[Symbol.iterator](); !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = !0)cache = _step.value, URL.revokeObjectURL(cache);
                                        } catch (err) {
                                            _didIteratorError = !0, _iteratorError = err;
                                        } finally{
                                            try {
                                                _iteratorNormalCompletion || null == _iterator.return || _iterator.return();
                                            } finally{
                                                if (_didIteratorError) throw _iteratorError;
                                            }
                                        }
                                        return this.cachedImages$ = [], this.stopRecordButton$.disabled = !1, [
                                            2
                                        ];
                                }
                            });
                        }).call(_this);
                    }, "startCapture$")), _define_property(this, "stopCapture$", __name(function() {
                        return _async_to_generator(function() {
                            return _ts_generator(this, function(_state) {
                                switch(_state.label){
                                    case 0:
                                        return [
                                            4,
                                            this.recorder$.stopCaptureAsync()
                                        ];
                                    case 1:
                                        return _state.sent(), this.previewFolder$.expanded = !0, this.stopRecordButton$.disabled = !0, this.previewRecord$(), [
                                            2
                                        ];
                                }
                            });
                        }).call(_this);
                    }, "stopCapture$")), _define_property(this, "downloadImages$", __name(function() {
                        return _async_to_generator(function() {
                            return _ts_generator(this, function(_state) {
                                switch(_state.label){
                                    case 0:
                                        return [
                                            4,
                                            this.recorder$.downloadImagesAsync()
                                        ];
                                    case 1:
                                        return _state.sent(), this.printScreenButton$.disabled = !1, this.startRecordButton$.disabled = !1, this.previewRecordButton$.disabled = !1, this.downloadZipButton$.disabled = !0, [
                                            2
                                        ];
                                }
                            });
                        }).call(_this);
                    }, "downloadImages$")), _define_property(this, "previewRecord$", __name(function() {
                        if (clearTimeout(_this.previewTimer$), _this.previewImages$ = _this.recorder$.getRecordImages(), 0 !== _this.previewImages$.length && _this.previewFrame$.element) {
                            var canvas = _this.recorder$.getCanvas();
                            if (canvas) {
                                _this.previewImageIndex$ = -1;
                                var element = _this.previewImage$.element;
                                element.parentElement && (element.parentElement.style.height = "auto"), _this.setPreviewImageSize$(_this.previewFrame$.element, canvas), _this.requestPreviewFrame$(), _this.previewRecordButton$.disabled = !1;
                            }
                        }
                    }, "previewRecord$")), _define_property(this, "requestPreviewFrame$", __name(function() {
                        return _async_to_generator(function() {
                            var recordFps, image;
                            return _ts_generator(this, function(_state) {
                                switch(_state.label){
                                    case 0:
                                        if (clearTimeout(this.previewTimer$), recordFps = this.options$.recordFps, this.previewImageIndex$++, this.previewImageIndex$ >= this.previewImages$.length) return this.previewImageIndex$ = -1, [
                                            2
                                        ];
                                        return this.previewImage$.label = "Frames\n".concat(this.previewImageIndex$ + 1, "/").concat(this.previewImages$.length), image = this.previewImages$[this.previewImageIndex$], [
                                            4,
                                            this.processImage$(this.previewImageIndex$, image)
                                        ];
                                    case 1:
                                        return _state.sent(), this.previewTimer$ = setTimeout(this.requestPreviewFrame$, 1e3 / recordFps), [
                                            2
                                        ];
                                }
                            });
                        }).call(_this);
                    }, "requestPreviewFrame$")), _define_property(this, "processImage$", __name(function(idx, blob) {
                        return _async_to_generator(function() {
                            var img2, image;
                            return _ts_generator(this, function(_state) {
                                switch(_state.label){
                                    case 0:
                                        if (!(img2 = this.previewFrame$.element)) return [
                                            2
                                        ];
                                        if (!this.cachedImages$[idx]) return [
                                            3,
                                            1
                                        ];
                                        return img2.src = this.cachedImages$[idx], [
                                            3,
                                            3
                                        ];
                                    case 1:
                                        return [
                                            4,
                                            I2.blobToHtmlImage(blob, !1, !1)
                                        ];
                                    case 2:
                                        if (!(image = _state.sent())) return [
                                            2
                                        ];
                                        img2.src = image.src, _state.label = 3;
                                    case 3:
                                        return this.previewFrame$.url = img2.src, this.cachedImages$[idx] = img2.src, [
                                            2
                                        ];
                                }
                            });
                        }).call(_this);
                    }, "processImage$")), this.options$ = options, this.recorder$ = recorder, this.cachedImages$ = [], this.createPanel$(), this.createOptionsFolder$(), this.createControlFolder$(), this.createPreviewFolder$(), this.createInfoFolder$(), this.addControlHotKey$();
                }
                return _create_class(_PanelControl1, [
                    {
                        key: "createPanel$",
                        value: function createPanel$() {
                            this.pane$ = new Pane({
                                title: "Canvas Recorder",
                                expanded: !1
                            });
                            var parentElement = this.pane$.element.parentElement;
                            parentElement && (parentElement.style.width = "auto", parentElement.style.zIndex = "9999"), document.onreadystatechange = function() {
                                !parentElement || document.body.contains(parentElement) || document.body.appendChild(parentElement);
                            };
                        }
                    },
                    {
                        key: "createOptionsFolder$",
                        value: function createOptionsFolder$() {
                            this.optionsFolder$ = this.pane$.addFolder({
                                title: "Options",
                                expanded: !0
                            }), this.addImageTypePanel$(), this.addSyncFpsPanel$(), this.addFpsPanel$(), this.addQualityPanel$();
                        }
                    },
                    {
                        key: "createControlFolder$",
                        value: function createControlFolder$() {
                            this.controlFolder$ = this.pane$.addFolder({
                                title: "Control",
                                expanded: !0
                            }), this.addPrintScreenButton$(), this.controlFolder$.addBlade({
                                view: "separator"
                            }), this.addStartRecordButton$(), this.addStopRecordButton$();
                        }
                    },
                    {
                        key: "createPreviewFolder$",
                        value: function createPreviewFolder$() {
                            this.previewFolder$ = this.pane$.addFolder({
                                title: "Preview",
                                expanded: !1
                            }), this.addPreviewAnimation$(), this.addPreviewRecordButton$(), this.addDownloadZipButton$();
                        }
                    },
                    {
                        key: "createInfoFolder$",
                        value: function createInfoFolder$() {
                            this.infoFolder$ = this.pane$.addFolder({
                                title: "Info",
                                expanded: !0
                            }), this.recorderMonitor$ = {
                                videoElapsedTime: "00:00:00",
                                realTimeElapsedTime: "00:00:00"
                            }, this.addVideoElapsedTimeMonitor$(), this.addRealTimeElapsedTimeMonitor$();
                        }
                    },
                    {
                        key: "setPanelExpanded",
                        value: function setPanelExpanded(expanded) {
                            this.pane$.expanded = expanded;
                        }
                    },
                    {
                        key: "blockInputPanel",
                        value: function blockInputPanel() {
                            this.printScreenButton$.disabled = !0, this.startRecordButton$.disabled = !0, this.stopRecordButton$.disabled = !0, this.previewRecordButton$.disabled = !0, this.downloadZipButton$.disabled = !0;
                        }
                    },
                    {
                        key: "unblockInputPanel",
                        value: function unblockInputPanel() {
                            this.printScreenButton$.disabled = !1, this.startRecordButton$.disabled = !1, this.stopRecordButton$.disabled = !1, this.previewRecordButton$.disabled = !1, this.downloadZipButton$.disabled = !1;
                        }
                    },
                    {
                        key: "updateRecordInfo",
                        value: function updateRecordInfo(videoElapsedTime, realTimeElapsedTime) {
                            this.recorderMonitor$.videoElapsedTime = videoElapsedTime, this.recorderMonitor$.realTimeElapsedTime = realTimeElapsedTime;
                        }
                    },
                    {
                        key: "addImageTypePanel$",
                        value: function addImageTypePanel$() {
                            var _this = this;
                            this.optionsFolder$.addBinding(this.options$, "type", {
                                label: "Image Type",
                                options: {
                                    webp: "webp",
                                    png: "png",
                                    jpeg: "jpeg"
                                }
                            }).on("change", function(ev) {
                                _this.qualityInput$.disabled = "png" === ev.value;
                            });
                        }
                    },
                    {
                        key: "addSyncFpsPanel$",
                        value: function addSyncFpsPanel$() {
                            this.optionsFolder$.addBinding(this.options$, "syncFps", {
                                label: "Sync Frames"
                            });
                        }
                    },
                    {
                        key: "addFpsPanel$",
                        value: function addFpsPanel$() {
                            this.optionsFolder$.addBinding(this.options$, "recordFps", {
                                min: 5,
                                max: 60,
                                step: 1,
                                label: "Record FPS"
                            });
                        }
                    },
                    {
                        key: "addQualityPanel$",
                        value: function addQualityPanel$() {
                            this.qualityInput$ = this.optionsFolder$.addBinding(this.options$, "quality", {
                                min: 0,
                                max: 1,
                                step: 0.05,
                                label: "Quality"
                            });
                        }
                    },
                    {
                        key: "addPrintScreenButton$",
                        value: function addPrintScreenButton$() {
                            this.printScreenButton$ = this.controlFolder$.addButton({
                                title: "Screenshot Canvas (or press S)"
                            }), this.printScreenButton$.on("click", this.snapshotFrame$);
                        }
                    },
                    {
                        key: "addStartRecordButton$",
                        value: function addStartRecordButton$() {
                            this.startRecordButton$ = this.controlFolder$.addButton({
                                title: "Record Canvas (or press Z)"
                            }), this.startRecordButton$.on("click", this.startCapture$);
                        }
                    },
                    {
                        key: "addStopRecordButton$",
                        value: function addStopRecordButton$() {
                            this.stopRecordButton$ = this.controlFolder$.addButton({
                                title: "Stop Record (or press X)",
                                disabled: !0
                            }), this.stopRecordButton$.on("click", this.stopCapture$);
                        }
                    },
                    {
                        key: "addPreviewAnimation$",
                        value: function addPreviewAnimation$() {
                            this.previewImage$ = this.previewFolder$.addBinding(this.previewFrame$, "url", {
                                label: "Frames\n0/0",
                                readonly: !0
                            });
                            var element = this.previewImage$.element, blockLabel = element.querySelector(".tp-lblv_l");
                            _instanceof(blockLabel, HTMLDivElement) && (blockLabel.style.flex = "0 1 auto");
                            var blockData = element.querySelector(".tp-lblv_v");
                            _instanceof(blockData, HTMLDivElement) && (blockData.style.flexGrow = "1");
                            var blockContent = element.querySelector(".tp-sglv");
                            if (_instanceof(blockContent, HTMLDivElement)) {
                                var elementImage = document.createElement("img");
                                elementImage.style.width = "250px", elementImage.style.height = "auto", blockContent.appendChild(elementImage), this.previewFrame$.element = elementImage;
                            }
                        }
                    },
                    {
                        key: "setPreviewImageSize$",
                        value: function setPreviewImageSize$(elementImage, canvas) {
                            var width = canvas.width, height = canvas.height, ratio = width / height, maxWidth = 250, maxHeight = 250, newWidth = width, newHeight = height;
                            width > 250 && (newWidth = maxWidth, newHeight = maxWidth / ratio), newHeight > maxHeight && (newHeight = maxHeight, newWidth = maxHeight * ratio), elementImage.style.width = "".concat(newWidth, "px"), elementImage.style.height = "".concat(newHeight, "px");
                        }
                    },
                    {
                        key: "addPreviewRecordButton$",
                        value: function addPreviewRecordButton$() {
                            this.previewRecordButton$ = this.previewFolder$.addButton({
                                title: "Review Record (or press C)"
                            }), this.previewRecordButton$.on("click", this.previewRecord$);
                        }
                    },
                    {
                        key: "addDownloadZipButton$",
                        value: function addDownloadZipButton$() {
                            this.downloadZipButton$ = this.previewFolder$.addButton({
                                title: "Download Zip (or press D)"
                            }), this.downloadZipButton$.on("click", this.downloadImages$);
                        }
                    },
                    {
                        key: "addVideoElapsedTimeMonitor$",
                        value: function addVideoElapsedTimeMonitor$() {
                            this.infoFolder$.addBinding(this.recorderMonitor$, "videoElapsedTime", {
                                label: "Elapsed Time",
                                readonly: !0,
                                interval: 1e3
                            });
                        }
                    },
                    {
                        key: "addRealTimeElapsedTimeMonitor$",
                        value: function addRealTimeElapsedTimeMonitor$() {
                            this.infoFolder$.addBinding(this.recorderMonitor$, "realTimeElapsedTime", {
                                label: "Real Time Elapsed Time",
                                readonly: !0,
                                interval: 1e3
                            });
                        }
                    },
                    {
                        key: "addControlHotKey$",
                        value: function addControlHotKey$() {
                            var _this = this;
                            window.addEventListener("keydown", function(ev) {
                                switch(ev.key){
                                    case "s":
                                        if (_this.printScreenButton$.disabled) return;
                                        _this.snapshotFrame$();
                                        break;
                                    case "d":
                                        if (_this.downloadZipButton$.disabled) return;
                                        _this.downloadImages$();
                                        break;
                                    case "z":
                                        if (_this.startRecordButton$.disabled) return;
                                        _this.startCapture$();
                                        break;
                                    case "x":
                                        if (_this.stopRecordButton$.disabled) return;
                                        _this.stopCapture$();
                                        break;
                                    case "c":
                                        if (_this.previewRecordButton$.disabled) return;
                                        _this.previewRecord$();
                                }
                            });
                        }
                    }
                ]), _PanelControl1;
            }(), __name(_PanelControl, "PanelControl"), panelControl_default = _PanelControl;
        }
    }), init_drawDemoTransitionOnCanvas = __esm({
        "extensions/ludex/src/plugins/canvas-recorder/demo/drawDemoTransitionOnCanvas.ts": function() {
            init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), drawDemoTransitionOnCanvas = __name(function(canvas) {
                var ctx = canvas.getContext("2d");
                if (!ctx) return console.error("Canvas context is null");
                var frameNumber = 0, radius = 10, x = 10, y = 10, dx = 5, dy = 5, color = getRandomColor(), loop = __name(function() {
                    ctx.clearRect(0, 0, canvas.width, canvas.height), ctx.beginPath(), ctx.arc(x, y, radius, 0, 2 * Math.PI), ctx.fillStyle = color, ctx.fill(), ctx.closePath(), (x + dx > canvas.width - radius || x + dx < radius) && (dx = -dx, color = getRandomColor()), (y + dy > canvas.height - radius || y + dy < radius) && (dy = -dy, color = getRandomColor()), x += dx, y += dy, ctx.font = "10px Arial", ctx.fillStyle = "black", ctx.fillText("F".concat(frameNumber++), 5, 15), ctx.beginPath(), ctx.moveTo(0, 0), ctx.lineTo(canvas.width, 0), ctx.lineTo(canvas.width, canvas.height), ctx.lineTo(0, canvas.height), ctx.lineTo(0, 0), ctx.strokeStyle = "black", ctx.stroke(), ctx.closePath(), requestAnimationFrame(loop);
                }, "loop");
                loop();
            }, "drawDemoTransitionOnCanvas"), getRandomColor = __name(function() {
                var r = Math.floor(256 * Math.random()), g = Math.floor(256 * Math.random()), b = Math.floor(256 * Math.random());
                return "rgb(".concat(r, ", ").concat(g, ", ").concat(b, ")");
            }, "getRandomColor"), drawDemoTransitionOnCanvas_default = drawDemoTransitionOnCanvas;
        }
    }), init_Options = __esm({
        "extensions/ludex/src/plugins/canvas-recorder/constants/Options.ts": function() {
            init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), Options_default = {
                recordFps: 30,
                syncFps: !1,
                type: "png",
                quality: 0.92
            };
        }
    }), init_CanvasRecorderPlugin = __esm({
        "extensions/ludex/src/plugins/canvas-recorder/CanvasRecorderPlugin.ts": function() {
            var ref1;
            init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), import_jszip = __toESM(require_jszip_min()), init_panelControl(), init_drawDemoTransitionOnCanvas(), init_Options(), T2 = (ref1 = Ludex.Utils).Time, I3 = ref1.Image, B5 = ref1.Browser, D2 = ref1.Device, O31 = ref1.Object, _CanvasRecorderPlugin = function(_Ludex_Plugins_BasePlugin) {
                function _CanvasRecorderPlugin1() {
                    var _this, _this1;
                    return _class_call_check(this, _CanvasRecorderPlugin1), _this = _call_super(this, _CanvasRecorderPlugin1, arguments), _this1 = _this, _define_property(_this, "options$", void 0), _define_property(_this, "panelControl$", null), _define_property(_this, "canvas$", null), _define_property(_this, "capturing$", void 0), _define_property(_this, "requestCount$", 0), _define_property(_this, "requestFinishCount$", 0), _define_property(_this, "lastCaptureTime$", 0), _define_property(_this, "realStartTime$", 0), _define_property(_this, "countVideoTime$", 0), _define_property(_this, "imageList$", void 0), _define_property(_this, "processCapture$", __name(function() {
                        return _async_to_generator(function() {
                            var now, deltaTime, frameTime;
                            return _ts_generator(this, function(_state) {
                                switch(_state.label){
                                    case 0:
                                        if (!_this1.isCapturing()) return [
                                            2
                                        ];
                                        return now = performance.now(), [
                                            4,
                                            _this1.waitNextFrame(!0)
                                        ];
                                    case 1:
                                        if (_state.sent(), !_this1.isCapturing()) return [
                                            2
                                        ];
                                        return [
                                            4,
                                            _this1.handleCapture$()
                                        ];
                                    case 2:
                                        if (_state.sent(), _this1.lastCaptureTime$ = performance.now(), deltaTime = now - _this1.lastCaptureTime$, _this1.options$.syncFps || !((frameTime = 1e3 / _this1.options$.recordFps) > deltaTime)) return [
                                            3,
                                            4
                                        ];
                                        return [
                                            4,
                                            T2.sleepAsync(frameTime - deltaTime)
                                        ];
                                    case 3:
                                        _state.sent(), _state.label = 4;
                                    case 4:
                                        return _this1.countVideoTime$ += deltaTime, _this1.updateRecordInfo$(), _this1.processCapture$(), [
                                            2
                                        ];
                                }
                            });
                        })();
                    }, "processCapture$")), _define_property(_this, "handleCapture$", __name(function() {
                        return _async_to_generator(function() {
                            var imageData;
                            return _ts_generator(this, function(_state) {
                                switch(_state.label){
                                    case 0:
                                        return _state.trys.push([
                                            0,
                                            2,
                                            ,
                                            4
                                        ]), _this1.requestCount$++, [
                                            4,
                                            _this1.snapshotCanvas$()
                                        ];
                                    case 1:
                                        if (!(imageData = _state.sent())) throw Error("Image data is null");
                                        return _this1.addImageDataToList$(_this1.requestCount$, imageData), _this1.requestFinishCount$++, [
                                            3,
                                            4
                                        ];
                                    case 2:
                                        return console.error("handleCapture", _state.sent()), [
                                            4,
                                            _this1.stopCaptureAsync()
                                        ];
                                    case 3:
                                        return _state.sent(), [
                                            3,
                                            4
                                        ];
                                    case 4:
                                        return [
                                            2
                                        ];
                                }
                            });
                        })();
                    }, "handleCapture$")), _define_property(_this, "addImageDataToList$", __name(function(idx, image) {
                        var name2 = _this.getPaddingName$(idx);
                        _this.imageList$.push({
                            name: "".concat(name2, ".").concat(_this.options$.type),
                            input: image
                        });
                    }, "addImageDataToList$")), _this;
                }
                return _inherits(_CanvasRecorderPlugin1, _Ludex_Plugins_BasePlugin), _create_class(_CanvasRecorderPlugin1, [
                    {
                        key: "init",
                        value: function init() {
                            this.imageList$ = [], this.options$ = __spreadValues({}, Options_default);
                        }
                    },
                    {
                        key: "configure",
                        value: function configure(options) {
                            this.options$ = O31.merge(this.options$, options), "function" == typeof panelControl_default && (this.panelControl$ = new panelControl_default(this, this.options$));
                        }
                    },
                    {
                        key: "setCanvas",
                        value: function setCanvas(canvas) {
                            this.canvas$ = canvas;
                        }
                    },
                    {
                        key: "getCanvas",
                        value: function getCanvas() {
                            return this.canvas$;
                        }
                    },
                    {
                        key: "runTestCanvas",
                        value: function runTestCanvas() {
                            if (drawDemoTransitionOnCanvas_default) {
                                var canvas = this.createCanvas$(200, 300);
                                canvas && (canvas.style.position = "absolute", document.body.appendChild(canvas), drawDemoTransitionOnCanvas_default(canvas), this.setCanvas(canvas));
                            }
                        }
                    },
                    {
                        key: "setPanelExpanded",
                        value: function setPanelExpanded(expanded) {
                            var _this_panelControl$;
                            null == (_this_panelControl$ = this.panelControl$) || _this_panelControl$.setPanelExpanded(expanded);
                        }
                    },
                    {
                        key: "getOptions",
                        value: function getOptions() {
                            return this.options$;
                        }
                    },
                    {
                        key: "isCapturing",
                        value: function isCapturing() {
                            return this.capturing$;
                        }
                    },
                    {
                        key: "initCaptureState$",
                        value: function initCaptureState$() {
                            this.imageList$ = [], this.capturing$ = !1, this.requestCount$ = 0, this.requestFinishCount$ = 0, this.countVideoTime$ = 0, this.realStartTime$ = performance.now();
                        }
                    },
                    {
                        key: "setStateInputPanel$",
                        value: function setStateInputPanel$(enable) {
                            this.panelControl$ && (enable ? this.panelControl$.unblockInputPanel() : this.panelControl$.blockInputPanel());
                        }
                    },
                    {
                        key: "startCaptureAsync",
                        value: function startCaptureAsync() {
                            return _async_to_generator(function() {
                                return _ts_generator(this, function(_state) {
                                    return this.isCapturing() || (this.canvas$ ? (this.initCaptureState$(), this.setStateInputPanel$(!1), this.capturing$ = !0, this.processCapture$()) : console.warn("Canvas is not set")), [
                                        2
                                    ];
                                });
                            }).call(this);
                        }
                    },
                    {
                        key: "waitNextFrame",
                        value: function waitNextFrame() {
                            var _this = this, force = arguments.length > 0 && void 0 !== arguments[0] && arguments[0];
                            return new Promise(function(resolve, reject) {
                                force || _this.isCapturing() || reject(Error("CanvasRecorder is not capturing")), requestAnimationFrame(function() {
                                    resolve();
                                });
                            });
                        }
                    },
                    {
                        key: "updateRecordInfo$",
                        value: function updateRecordInfo$() {
                            if (this.panelControl$) {
                                var videoElapsedTime = this.formatDateHMS$(this.countVideoTime$), realTimeElapsedTime = this.formatDateHMS$(performance.now() - this.realStartTime$);
                                this.panelControl$.updateRecordInfo(videoElapsedTime, realTimeElapsedTime);
                            }
                        }
                    },
                    {
                        key: "snapshotCanvas$",
                        value: function snapshotCanvas$(payload) {
                            var _this = this;
                            return new Promise(function(resolve, reject) {
                                if (!_this.canvas$) return void reject(Error("Canvas is not set"));
                                var _this_options$ = _this.options$, type = _this_options$.type, quality = _this_options$.quality, _ref = payload || {}, tmp = _ref.type, snapshotType = void 0 === tmp ? type : tmp, tmp1 = _ref.quality, snapshotQuality = void 0 === tmp1 ? quality : tmp1, _ref_resolution = _ref.resolution, resolution = void 0 === _ref_resolution ? 1 : _ref_resolution;
                                _this.canvas$.toBlob(function(blob) {
                                    blob ? 1 !== resolution ? _this.resizeBlob$(blob, snapshotType, resolution).then(resolve).catch(reject) : resolve(blob) : reject(Error("Blob is null"));
                                }, "image/".concat(snapshotType), snapshotQuality);
                            });
                        }
                    },
                    {
                        key: "resizeBlob$",
                        value: function resizeBlob$(blob, type, resolution) {
                            return _async_to_generator(function() {
                                var image, scale, result3;
                                return _ts_generator(this, function(_state) {
                                    switch(_state.label){
                                        case 0:
                                            return [
                                                4,
                                                I3.blobToHtmlImage(blob, !0, !1)
                                            ];
                                        case 1:
                                            if (!(image = _state.sent())) throw Error("Can not convert blob to image");
                                            return scale = resolution / D2.pixelRatio(), image.width *= scale, image.height *= scale, [
                                                4,
                                                I3.elementToBlob(image, type)
                                            ];
                                        case 2:
                                            if (result3 = _state.sent(), URL.revokeObjectURL(image.src), !result3) throw Error("Can not convert image to blob");
                                            return [
                                                2,
                                                result3
                                            ];
                                    }
                                });
                            })();
                        }
                    },
                    {
                        key: "stopCaptureAsync",
                        value: function stopCaptureAsync() {
                            return _async_to_generator(function() {
                                var _this;
                                return _ts_generator(this, function(_state) {
                                    return _this = this, this.capturing$ = !1, [
                                        2,
                                        new Promise(function(resolve) {
                                            var waitAllRequestFinish = setInterval(function() {
                                                _this.requestCount$ === _this.requestFinishCount$ && (clearInterval(waitAllRequestFinish), _this.setStateInputPanel$(!0), resolve());
                                            }, 500);
                                        })
                                    ];
                                });
                            }).call(this);
                        }
                    },
                    {
                        key: "snapshotFrameAsync",
                        value: function snapshotFrameAsync(payload) {
                            return _async_to_generator(function() {
                                var _ref_force, force, imageData;
                                return _ts_generator(this, function(_state) {
                                    switch(_state.label){
                                        case 0:
                                            if (_state.trys.push([
                                                0,
                                                3,
                                                ,
                                                4
                                            ]), !this.canvas$) return console.warn("Canvas is not set"), [
                                                2,
                                                null
                                            ];
                                            return force = void 0 !== (_ref_force = (payload || {}).force) && _ref_force, [
                                                4,
                                                this.waitNextFrame(force)
                                            ];
                                        case 1:
                                            return _state.sent(), [
                                                4,
                                                this.snapshotCanvas$(payload)
                                            ];
                                        case 2:
                                            if (!(imageData = _state.sent())) throw Error("Image data is null");
                                            return [
                                                2,
                                                imageData
                                            ];
                                        case 3:
                                            return console.error("snapshotFrame", _state.sent()), [
                                                2,
                                                null
                                            ];
                                        case 4:
                                            return [
                                                2
                                            ];
                                    }
                                });
                            }).call(this);
                        }
                    },
                    {
                        key: "downloadImage",
                        value: function downloadImage(image) {
                            var link = document.createElement("a");
                            link.download = "screenshot-".concat(this.getDateFilename$()), link.href = URL.createObjectURL(image);
                            var MIME_TYPE = "image/".concat(this.options$.type);
                            link.dataset.downloadurl = [
                                MIME_TYPE,
                                link.download,
                                link.href
                            ].join(":"), link.click(), URL.revokeObjectURL(link.href), link.remove();
                        }
                    },
                    {
                        key: "downloadImagesAsync",
                        value: function downloadImagesAsync() {
                            return _async_to_generator(function() {
                                var zip, blob, link;
                                return _ts_generator(this, function(_state) {
                                    switch(_state.label){
                                        case 0:
                                            if (_state.trys.push([
                                                0,
                                                2,
                                                ,
                                                3
                                            ]), this.isCapturing()) return [
                                                2
                                            ];
                                            return this.setStateInputPanel$(!1), zip = new import_jszip.default(), this.imageList$.forEach(function(image) {
                                                zip.file(image.name, image.input);
                                            }), [
                                                4,
                                                zip.generateAsync({
                                                    type: "blob"
                                                })
                                            ];
                                        case 1:
                                            return blob = _state.sent(), (link = document.createElement("a")).download = "images-".concat(this.getDateFilename$()), link.href = URL.createObjectURL(blob), link.click(), URL.revokeObjectURL(link.href), link.remove(), [
                                                3,
                                                3
                                            ];
                                        case 2:
                                            return console.error("downloadZipImages", _state.sent()), [
                                                3,
                                                3
                                            ];
                                        case 3:
                                            return [
                                                2
                                            ];
                                    }
                                });
                            }).call(this);
                        }
                    },
                    {
                        key: "getRecordImages",
                        value: function getRecordImages() {
                            return this.imageList$.map(function(image) {
                                return image.input;
                            });
                        }
                    },
                    {
                        key: "createCanvas$",
                        value: function createCanvas$(width, height) {
                            var result3 = B5.createCanvas({
                                type: "canvas"
                            });
                            return result3 ? (result3.canvas.width = width, result3.canvas.height = height, result3.canvas) : (console.warn("Can not create canvas"), null);
                        }
                    },
                    {
                        key: "getPaddingName$",
                        value: function getPaddingName$(number) {
                            for(var numberLength = number.toString().length, targetLength = 5, padding = "", index = 0; index < targetLength - numberLength; index++)padding += "0";
                            return padding + number.toString();
                        }
                    },
                    {
                        key: "getDateFilename$",
                        value: function getDateFilename$() {
                            var date = new Date();
                            return "".concat(date.toLocaleTimeString(), "-").concat(date.toLocaleDateString());
                        }
                    },
                    {
                        key: "formatDateHMS$",
                        value: function formatDateHMS$(ms) {
                            var showHour = arguments.length > 1 && void 0 !== arguments[1] && arguments[1], dateISO = new Date(ms).toISOString();
                            return showHour ? dateISO.slice(11, -5) : dateISO.slice(14, -5);
                        }
                    }
                ]), _CanvasRecorderPlugin1;
            }(Ludex.Plugins.BasePlugin), __name(_CanvasRecorderPlugin, "CanvasRecorderPlugin"), CanvasRecorderPlugin_default = _CanvasRecorderPlugin;
        }
    }), canvas_recorder_exports = {};
    __export(canvas_recorder_exports, {
        default: function _default() {
            return canvas_recorder_default;
        }
    });
    var init_canvas_recorder = __esm({
        "extensions/ludex/src/plugins/canvas-recorder/index.ts": function() {
            init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_CanvasRecorderPlugin(), canvas_recorder_default = CanvasRecorderPlugin_default;
        }
    });
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var CoreEvents = {
        CORE_BOOTING: "core-booting",
        REQUEST_CORE_START: "core-start",
        CORE_STARTING: "core-starting",
        CORE_READY: "core-ready",
        ANALYTICS_READY: "analytics-ready",
        GAME_SDK_READY: "game-sdk-ready",
        GAME_SDK_STARTED: "game-sdk-started",
        CONTEXT_DATA_PROCESSED: "context-data-processed",
        CONTEXT_SESSION_TYPE_DETECTED: "context-session-type-detected",
        GAME_READY: "game-ready",
        BUNDLE_READY: "bundle-ready",
        PLAYER_INFO_LOADED: "player-info-loaded",
        PLAYER_SETTINGS_CHANGED: "player-settings-changed",
        REQUEST_SHOW_BANNER_ADS: "request-show-banner-ads",
        SWITCH_SCENE: "switch-scene",
        SCENE_LOADED: "scene-loaded",
        PRELOAD_SCENE: "preload-scene",
        SCENE_PROGRESS: "scene-progress",
        SCENE_LAUNCHED: "scene-launched",
        SCENE_RENDERED: "scene-rendered",
        SCENE_BEFORE_RENDERED: "scene-before-rendered",
        MARK_IS_TEST_SCENE: "mark-is-test-scene",
        PRELOAD_SCREEN: "preload-screen",
        PRELOAD_SCREENS: "preload-screens",
        LOADING_SCREEN: "loading-screen",
        SCREEN_LOADED: "screen-loaded",
        OPENING_SCREEN: "opening-screen",
        OPEN_SCREEN: "open-screen",
        OPENED_SCREEN: "opened-screen",
        CLOSING_SCREEN: "closing-screen",
        CLOSE_SCREEN: "close-screen",
        CLOSED_SCREEN: "closed-screen",
        CORE_PLUGIN_READY: "core-plugin-ready",
        MODULE_PLUGIN_READY: "module-plugin-ready",
        AD_LOADING: "ad-loading",
        AD_LOADED: "ad-loaded",
        AD_LOAD_FAILED: "ad-load-failed",
        AD_SHOWING: "ad-showing",
        AD_SHOW: "ad-show",
        AD_CLOSED: "ad-closed",
        AD_SHOW_FAILED: "ad-show-failed",
        LANGUAGE_CHANGED: "language-changed",
        REQUEST_LANGUAGE: "request-language",
        REQUEST_HOT_RELOAD: "request-hot-reload",
        REQUEST_SAVE_CONFIG: "request-save-config",
        REQUEST_UPDATE_CONFIG: "request-update-config",
        REMOTE_CONFIG_UPDATED: "remote-config-updated",
        VISIBILITY_HIDDEN: "visibility-hidden",
        VISIBILITY_VISIBLE: "visibility-visible",
        REQUEST_RESIZE_GAME: "request-resize-game",
        REQUEST_QUALITY_UPGRADED: "request-quality-upgraded",
        REQUEST_QUALITY_DOWNGRADED: "request-quality-downgraded",
        GAME_SDK_POPUP_RESPONDED: "game-sdk-popup-responded"
    }, CoreEvents_default = CoreEvents;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var MatchModes = function(MatchModes3) {
        return MatchModes3.DRAFT = "draft", MatchModes3.SINGLE = "single", MatchModes3.TOURNAMENT = "tournament", MatchModes3.MATCHING_GROUP = "matching-group", MatchModes3.CHALLENGE_FRIEND = "challenge-friend", MatchModes3;
    }(MatchModes || {}), MatchModes_default = MatchModes, MatchModes2 = MatchModes_default, MatchModes_default2 = MatchModes2;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var func = __name(function(data) {
        return data;
    }, "func"), asConst_default = func;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var func2 = __name(function() {}, "func"), noop_default = func2, type_guard_default = {
        asConst: asConst_default,
        noop: noop_default
    };
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var at = __name(function(arr, idx) {
        if (arr) return idx < 0 ? arr[arr.length + idx] : arr[idx];
    }, "at"), at_default = at;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var func3 = __name(function(size, mapFn) {
        for(var result3 = [], i = 0; i < size; i++)result3.push(mapFn(i));
        return result3;
    }, "func"), fillWith_default = func3, func4 = __name(function(length) {
        return fillWith_default(length, function() {});
    }, "func"), length_default = func4, func5 = __name(function(array, size) {
        return length_default(Math.ceil(array.length / size)).map(function(_v, i) {
            return array.slice(i * size, i * size + size);
        });
    }, "func"), chunk_default = func5;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var func6 = __name(function(source, target) {
        return source.filter(function(x) {
            return 0 > target.indexOf(x);
        });
    }, "func"), difference_default = func6;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var func7 = __name(function(data) {
        var keys = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : [], result3 = {}, _iteratorNormalCompletion = !0, _didIteratorError = !1, _iteratorError = void 0;
        try {
            for(var _step, _iterator = data[Symbol.iterator](); !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = !0){
                var value = _step.value;
                for(var key in value){
                    var K = key;
                    keys.includes(K) && (result3[K] || (result3[K] = []), result3[K].push(value[K]));
                }
            }
        } catch (err) {
            _didIteratorError = !0, _iteratorError = err;
        } finally{
            try {
                _iteratorNormalCompletion || null == _iterator.return || _iterator.return();
            } finally{
                if (_didIteratorError) throw _iteratorError;
            }
        }
        return result3;
    }, "func"), dod_default = func7;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var func8 = __name(function(array) {
        return array.reduce(function(acc, val) {
            return acc.concat(val);
        }, []);
    }, "func"), flatten_default = func8;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var func9 = __name(function(array, target) {
        return array.indexOf(target) >= 0;
    }, "func"), has_default = func9;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var func10 = __name(function(array, limit) {
        return array.length = Math.min(array.length, limit), array;
    }, "func"), limit_default = func10;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var func11 = __name(function(array) {
        for(var ref, i = 0; i < array.length / 2; i++)ref = [
            array[array.length - 1 - i],
            array[i]
        ], array[i] = ref[0], array[array.length - 1 - i] = ref[1];
    }, "func"), reverse_default = func11;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var func12 = __name(function(array, predicate) {
        for(var i = 0; i < array.length; i++)if (predicate(array[i], i)) return array[i];
    }, "func"), search_default = func12;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var func13 = __name(function(array, predicate) {
        for(var i = 0; i < array.length; i++)if (predicate(array[i], i)) return i;
        return -1;
    }, "func"), searchIndex_default = func13;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var func14 = __name(function(array) {
        for(var i = array.length - 1; i > 0; i--){
            var ref, j = Math.floor(Math.random() * (i + 1));
            ref = [
                array[j],
                array[i]
            ], array[i] = ref[0], array[j] = ref[1];
        }
    }, "func"), shuffle_default = func14;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var split = __name(function(array, isLeft) {
        return array.reduce(function(acc, item, index) {
            return isLeft(item, index, array) ? acc.left.push(item) : acc.right.push(item), acc;
        }, {
            left: [],
            right: []
        });
    }, "split"), split_default = split;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var func15 = __name(function(array) {
        var copy = _to_consumable_array(array);
        return shuffle_default(copy), copy;
    }, "func"), toShuffled_default = func15;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var unique = __name(function(value, index, self2) {
        return self2.indexOf(value) === index && null != value;
    }, "unique"), func16 = __name(function(array) {
        return array.filter(unique);
    }, "func"), unique_default = func16, array_default = {
        at: at_default,
        chunk: chunk_default,
        difference: difference_default,
        dod: dod_default,
        fillWith: fillWith_default,
        length: length_default,
        limit: limit_default,
        reverse: reverse_default,
        search: search_default,
        searchIndex: searchIndex_default,
        has: has_default,
        shuffle: shuffle_default,
        toShuffled: toShuffled_default,
        unique: unique_default,
        flatten: flatten_default,
        split: split_default
    };
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var isOffscreenCanvasSupported = __name(function() {
        return "OffscreenCanvas" in window && "u" > ("u" < typeof OffscreenCanvas ? "undefined" : _type_of1(OffscreenCanvas));
    }, "isOffscreenCanvasSupported"), createOffscreenCanvas = __name(function(contextType2, contextAttributes) {
        var canvas = new OffscreenCanvas(0, 0), context = canvas.getContext(contextType2, contextAttributes);
        return context ? {
            canvas: canvas,
            context: context
        } : (console.warn("Failed to get ".concat(contextType2, " context from OffscreenCanvas")), null);
    }, "createOffscreenCanvas"), createHTMLCanvas = __name(function(contextType2, contextAttributes) {
        var canvas = document.createElement("canvas"), context = canvas.getContext(contextType2, contextAttributes);
        return context ? {
            canvas: canvas,
            context: context
        } : (console.warn("Failed to get ".concat(contextType2, " context from HTMLCanvas")), null);
    }, "createHTMLCanvas"), func17 = __name(function(options) {
        var tmp = options.contextType, contextType2 = void 0 === tmp ? "2d" : tmp, _options_contextAttributes = options.contextAttributes, contextAttributes = void 0 === _options_contextAttributes ? {} : _options_contextAttributes, _options_type = options.type, type = void 0 === _options_type ? "canvas" : _options_type;
        return "canvas" === type ? createHTMLCanvas(contextType2, contextAttributes) : "offscreen" === type && isOffscreenCanvasSupported() ? createOffscreenCanvas(contextType2, contextAttributes) : null;
    }, "func"), createCanvas_default = func17;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var func18 = __name(function(value) {
        return !value || "" === value || 0 === value || "number" == typeof value && isNaN(value);
    }, "func"), isFalsy_default = func18, func19 = __name(function(value) {
        return isFalsy_default(value) ? !1 !== value && 0 !== value : "string" == typeof value || Array.isArray(value) ? 0 === value.length : (void 0 === value ? "undefined" : _type_of(value)) === "object" && null !== value && 0 === Object.keys(value).length;
    }, "func"), isEmpty_default = func19, gameName = "Save The Pets", dbInstances = {}, getDBName = __name(function(dbName) {
        if (isEmpty_default(dbName)) {
            var _GameSDK_getSDKName;
            return null != (_GameSDK_getSDKName = GameSDK.getSDKName()) ? _GameSDK_getSDKName : "Storage";
        }
        return null != dbName ? dbName : "Storage";
    }, "getDBName"), openIndexedDB = __name(function(dbName) {
        var fullDBName = "".concat(gameName, "_").concat(dbName);
        return dbInstances[fullDBName] ? Promise.resolve(dbInstances[fullDBName]) : new Promise(function(resolve, reject) {
            var request, latestVersion = 1, tryOpen = __name(function(version) {
                (request = indexedDB.open(gameName, version)).onerror = function(event) {
                    var error = event.target.error;
                    (null == error ? void 0 : error.name) === "VersionError" ? tryOpen(++latestVersion) : reject(error);
                }, request.onsuccess = function(_event) {
                    var db = request.result;
                    db.objectStoreNames.contains(dbName) ? (dbInstances[fullDBName] = db, resolve(db)) : tryOpen(++latestVersion);
                }, request.onupgradeneeded = function(event) {
                    var db = event.target.result;
                    latestVersion = db.version, db.objectStoreNames.contains(dbName) || db.createObjectStore(dbName);
                };
            }, "tryOpen");
            tryOpen(latestVersion);
        });
    }, "openIndexedDB"), openIndexedDB_default = openIndexedDB, func20 = __name(function(key, dbName) {
        return _async_to_generator(function() {
            var correctDbName, db, store;
            return _ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return _state.trys.push([
                            0,
                            2,
                            ,
                            3
                        ]), [
                            4,
                            openIndexedDB_default(correctDbName = getDBName(dbName))
                        ];
                    case 1:
                        if (!(db = _state.sent()).objectStoreNames.contains(correctDbName)) return [
                            2,
                            {}
                        ];
                        return store = db.transaction(correctDbName, "readonly").objectStore(correctDbName), [
                            2,
                            new Promise(function(resolve, reject) {
                                var getRequest = store.get(key);
                                getRequest.onerror = function() {
                                    return reject(getRequest.error);
                                }, getRequest.onsuccess = function() {
                                    return resolve(getRequest.result);
                                };
                            })
                        ];
                    case 2:
                        return console.error(_state.sent()), [
                            2,
                            {}
                        ];
                    case 3:
                        return [
                            2
                        ];
                }
            });
        })();
    }, "func"), getIndexedDB_default = func20;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var func21 = __name(function(string) {
        try {
            return JSON.parse(string);
        } catch (e) {
            return null;
        }
    }, "func"), decode_default = func21, func22 = __name(function(key) {
        try {
            if (!localStorage) return null;
            var data = localStorage.getItem(key);
            if (null === data) return null;
            return decode_default(data);
        } catch (error) {
            return console.error("getLocalStorage error", error), null;
        }
    }, "func"), getLocalStorage_default = func22;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var func23 = __name(function(data) {
        try {
            return JSON.stringify(data, null, 0);
        } catch (e) {
            return "";
        }
    }, "func"), encode_default = func23, func24 = __name(function(object) {
        return decode_default(encode_default(object));
    }, "func"), clone_default = func24, func25 = __name(function() {
        var defaultLocale = "en_US", locale2 = search_default(clone_default(window.navigator.languages) || [], function(lang) {
            return lang.indexOf("-") > -1;
        });
        return locale2 && -1 !== locale2.indexOf("-") ? locale2.replace("-", "_") : defaultLocale;
    }, "func"), getLocale_default = func25;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var func26 = __name(function() {
        var query = window.location.search.substring(1);
        if (!query) return {};
        var vars = query.split("&"), result3 = {}, _iteratorNormalCompletion = !0, _didIteratorError = !1, _iteratorError = void 0;
        try {
            for(var _step, _iterator = vars[Symbol.iterator](); !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = !0){
                var pair = _step.value.split("=");
                result3[pair[0]] = decodeURIComponent(pair[1]);
            }
        } catch (err) {
            _didIteratorError = !0, _iteratorError = err;
        } finally{
            try {
                _iteratorNormalCompletion || null == _iterator.return || _iterator.return();
            } finally{
                if (_didIteratorError) throw _iteratorError;
            }
        }
        return result3;
    }, "func"), getQueryParams_default = func26;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var func27 = __name(function() {
        var body = document.body, documentElement = document.documentElement, bodyClientHeight = body.clientHeight;
        return Math.max(documentElement.clientHeight, bodyClientHeight) || 0;
    }, "func"), getScreenHeight_default = func27;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var func28 = __name(function() {
        var body = document.body, documentElement = document.documentElement, bodyClientWidth = body.clientWidth;
        return Math.max(documentElement.clientWidth, bodyClientWidth) || 0;
    }, "func"), getScreenWidth_default = func28;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var func29 = __name(function(key) {
        try {
            localStorage.removeItem(key);
        } catch (error) {
            console.error("removeKeyLocalStorage error", error);
        }
    }, "func"), removeKeyLocalStorage_default = func29;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var func30 = __name(function(key, data, dbName) {
        return _async_to_generator(function() {
            var correctDbName, db, store;
            return _ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        if (_state.trys.push([
                            0,
                            2,
                            ,
                            3
                        ]), isEmpty_default(data)) return [
                            2
                        ];
                        return [
                            4,
                            openIndexedDB_default(correctDbName = getDBName(dbName))
                        ];
                    case 1:
                        if (!(db = _state.sent()).objectStoreNames.contains(correctDbName)) return console.warn("SetIndexedDB: db not found", correctDbName), [
                            2
                        ];
                        return store = db.transaction(correctDbName, "readwrite").objectStore(correctDbName), [
                            2,
                            new Promise(function(resolve, reject) {
                                try {
                                    var request = store.put(data, key);
                                    request.onsuccess = function() {
                                        return resolve();
                                    }, request.onerror = function() {
                                        return reject(request.error);
                                    };
                                } catch (error) {
                                    reject(error);
                                }
                            })
                        ];
                    case 2:
                        return console.warn("SetIndexedDB", _state.sent()), [
                            3,
                            3
                        ];
                    case 3:
                        return [
                            2
                        ];
                }
            });
        })();
    }, "func"), setIndexedDB_default = func30;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var isSupportVibrateApi = __name(function() {
        var hasAPI = "vibrate" in window.navigator;
        if (hasAPI) try {
            window.navigator.vibrate(0);
        } catch (e) {
            return !1;
        }
        return hasAPI;
    }, "isSupportVibrateApi"), func31 = __name(function(value) {
        try {
            if (!isSupportVibrateApi()) return !1;
            return window.navigator.vibrate(0), window.navigator.vibrate(value), !0;
        } catch (error) {
            return !1;
        }
    }, "func"), vibrate_default = func31;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var func32 = __name(function(method, delay, firstCall) {
        var timer, isCalled = !1;
        return function() {
            for(var _this = this, _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++)args[_key] = arguments[_key];
            if (firstCall && !isCalled) {
                isCalled = !0, method.apply(this, args);
                return;
            }
            clearTimeout(timer), timer = setTimeout(function() {
                method.apply(_this, args);
            }, delay);
        };
    }, "func"), debounce_default = func32;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var func33 = __name(function(fn2) {
        var cache = Object.create(null);
        return function() {
            for(var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++)args[_key] = arguments[_key];
            var key = "__memoize__".concat(JSON.stringify(args));
            if (key in cache) return cache[key];
            var result3 = fn2.apply(this, args);
            return cache[key] = result3, result3;
        };
    }, "func"), memoize_default = func33;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var func34 = __name(function(method, interval, firstCall) {
        var timer, shouldFire = !1, isCalled = !1;
        return function() {
            for(var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++)args[_key] = arguments[_key];
            if (firstCall && !isCalled) {
                isCalled = !0, method.apply(this, args);
                return;
            }
            shouldFire && (shouldFire = !1, method.apply(this, args)), clearTimeout(timer), timer = setTimeout(function() {
                shouldFire = !0;
            }, interval);
        };
    }, "func"), throttle_default = func34;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var func35 = __name(function(descriptor, startFn) {
        var method = descriptor.value;
        return descriptor.value = function() {
            for(var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++)args[_key] = arguments[_key];
            return _async_to_generator(function() {
                var result3;
                return _ts_generator(this, function(_state) {
                    switch(_state.label){
                        case 0:
                            return [
                                4,
                                startFn.apply(this, args)
                            ];
                        case 1:
                            if (_state.sent(), !_instanceof(result3 = method.apply(this, args), Promise)) return [
                                3,
                                3
                            ];
                            return [
                                4,
                                result3
                            ];
                        case 2:
                            return [
                                2,
                                _state.sent()
                            ];
                        case 3:
                            return [
                                2,
                                result3
                            ];
                    }
                });
            }).call(this);
        }, descriptor;
    }, "func"), preStart_default = func35;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var o = Object, func36 = __name(function(target, data) {
        if ("assign" in o) return o.assign(target, data);
        var obj = target;
        for(var key in data)obj[key] = data[key];
        return obj;
    }, "func"), assign_default = func36, func37 = __name(function(value) {
        if (_instanceof(value, Error)) return value;
        if (null !== value && (void 0 === value ? "undefined" : _type_of(value)) === "object" && "message" in value && "string" == typeof value.message) {
            var error = Error(value.message);
            return "stack" in value && "string" == typeof value.stack && (error.stack = value.stack), "name" in value && "string" == typeof value.name && (error.name = value.name), "code" in value && "string" == typeof value.code && assign_default(error, {
                code: value.code
            }), error;
        }
        if (null !== value && (void 0 === value ? "undefined" : _type_of(value)) === "object") try {
            return Error(JSON.stringify(value, null, 2));
        } catch (e) {
            return Error("[Object conversion failed] ".concat(String(value)));
        }
        return Error(String(value));
    }, "func"), toError_default = func37, func38 = __name(function(descriptor, finallyFn) {
        var method = descriptor.value;
        return descriptor.value = function() {
            for(var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++)args[_key] = arguments[_key];
            return _async_to_generator(function() {
                var error, result3;
                return _ts_generator(this, function(_state) {
                    switch(_state.label){
                        case 0:
                            if (_state.trys.push([
                                0,
                                3,
                                4,
                                5
                            ]), !_instanceof(result3 = method.apply(this, args), Promise)) return [
                                3,
                                2
                            ];
                            return [
                                4,
                                result3
                            ];
                        case 1:
                            return [
                                2,
                                _state.sent()
                            ];
                        case 2:
                            return [
                                2,
                                result3
                            ];
                        case 3:
                            return console.warn("[Decorator:tryCatch]", (error = toError_default(_state.sent())).message), [
                                3,
                                5
                            ];
                        case 4:
                            return null == finallyFn || finallyFn(error), [
                                7
                            ];
                        case 5:
                            return [
                                2
                            ];
                    }
                });
            }).call(this);
        }, descriptor;
    }, "func"), tryCatch_default = func38;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var func39 = __name(function(input) {
        var isValidObject = (void 0 === input ? "undefined" : _type_of(input)) === "object" || "function" == typeof input, isArray = Array.isArray(input);
        return null !== input && isValidObject && !isArray;
    }, "func"), isObject_default = func39, checkType = __name(function(target, type) {
        if ((void 0 === target ? "undefined" : _type_of(target)) !== type) throw Error("Value ".concat(target, " is not type of ").concat(type, " (").concat(void 0 === target ? "undefined" : _type_of(target), ")"));
    }, "checkType"), func40 = __name(function(target, type, propertyKey) {
        var value;
        return (propertyKey || checkType(target, type), isObject_default(target) && propertyKey) ? Object.defineProperty(target, propertyKey, {
            get: function get() {
                return value;
            },
            set: function set1(newValue) {
                checkType(newValue, type), value = newValue;
            }
        }) : target;
    }, "func"), validateProperty_default = func40, func41 = __name(function(descriptor, types) {
        var method = descriptor.value;
        return descriptor.value = function() {
            for(var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++)args[_key] = arguments[_key];
            return types.forEach(function(type, index) {
                try {
                    validateProperty_default(args[index], type);
                } catch (error) {
                    var message = "[Decorator:validateParams]";
                    if (_instanceof(error, Error)) throw error.message = "".concat(message, ": ").concat(error.message), error;
                    throw Error("".concat(message, ": ").concat(error));
                }
            }), method.apply(this, args);
        }, descriptor;
    }, "func"), validateParams_default = func41;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var isInvalidReturnType = __name(function(result3, types) {
        var _iteratorNormalCompletion = !0, _didIteratorError = !1, _iteratorError = void 0;
        try {
            for(var _step, _iterator = types[Symbol.iterator](); !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = !0){
                var type = _step.value;
                try {
                    return validateProperty_default(result3, type), !1;
                } catch (error) {}
            }
        } catch (err) {
            _didIteratorError = !0, _iteratorError = err;
        } finally{
            try {
                _iteratorNormalCompletion || null == _iterator.return || _iterator.return();
            } finally{
                if (_didIteratorError) throw _iteratorError;
            }
        }
        return !0;
    }, "isInvalidReturnType"), func42 = __name(function(descriptor, types) {
        var method = descriptor.value;
        return descriptor.value = function() {
            for(var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++)args[_key] = arguments[_key];
            var result3 = method.apply(this, args);
            if (isInvalidReturnType(result3, types)) throw Error("[Decorator:validateReturn] ".concat(result3, " (").concat(void 0 === result3 ? "undefined" : _type_of(result3), ") is not type of ").concat(types.join(" |\
 ")));
            return result3;
        }, descriptor;
    }, "func"), validateReturn_default = func42, _DecoratorUtils = function() {
        function _DecoratorUtils() {
            _class_call_check(this, _DecoratorUtils);
        }
        return _create_class(_DecoratorUtils, null, [
            {
                key: "isProperty$",
                value: function isProperty$(name2, propertyKey, descriptor) {
                    return !!descriptor && (void 0 !== descriptor.value || !!descriptor.get || !!descriptor.set) || (console.warn("[Decorator:".concat(name2, "] Unsupported decorator ").concat(propertyKey), descriptor), !1);
                }
            },
            {
                key: "isFunction$",
                value: function isFunction$(name2, propertyKey, descriptor) {
                    return !!descriptor && ("function" == typeof descriptor.value || "function" == typeof descriptor.initializer) || (console.warn("[Decorator:".concat(name2, "] Unsupported decorator ").concat(propertyKey), descriptor), !1);
                }
            },
            {
                key: "locked",
                value: function locked(_target, _propertyKey, descriptor) {
                    return __spreadProps(__spreadValues({}, descriptor), {
                        value: __name(function() {
                            throw Error("Method is locked");
                        }, "value")
                    });
                }
            },
            {
                key: "preStart",
                value: function preStart(startFn) {
                    return function(_target, propertyKey, descriptor) {
                        return _DecoratorUtils.isFunction$("preStart", propertyKey, descriptor) ? preStart_default(descriptor, startFn) : descriptor;
                    };
                }
            },
            {
                key: "tryCatch",
                value: function tryCatch(finallyFn) {
                    return function(_target, propertyKey, descriptor) {
                        return _DecoratorUtils.isFunction$("tryCatch", propertyKey, descriptor) ? tryCatch_default(descriptor, finallyFn) : descriptor;
                    };
                }
            },
            {
                key: "debounce",
                value: function debounce(wait) {
                    return function(_target, propertyKey, descriptor) {
                        if (!_DecoratorUtils.isFunction$("debounce", propertyKey, descriptor)) return descriptor;
                        var fn2 = descriptor.value;
                        return fn2 ? descriptor.value = debounce_default(fn2, wait) : descriptor.initializer && (fn2 = descriptor.initializer, descriptor.initializer = function() {
                            return debounce_default(fn2.call(this), wait);
                        }), descriptor;
                    };
                }
            },
            {
                key: "throttle",
                value: function throttle(wait) {
                    return function(_target, propertyKey, descriptor) {
                        if (!_DecoratorUtils.isFunction$("throttle", propertyKey, descriptor)) return descriptor;
                        var fn2 = descriptor.value;
                        return fn2 ? descriptor.value = throttle_default(fn2, wait) : descriptor.initializer && (fn2 = descriptor.initializer, descriptor.initializer = function() {
                            return throttle_default(fn2.call(this), wait, !0);
                        }), descriptor;
                    };
                }
            },
            {
                key: "memoize",
                value: function memoize(_target, propertyKey, descriptor) {
                    if (!_DecoratorUtils.isFunction$("memoize", propertyKey, descriptor)) return descriptor;
                    var fn2 = descriptor.value;
                    return fn2 ? descriptor.value = memoize_default(fn2) : descriptor.initializer && (fn2 = descriptor.initializer, descriptor.initializer = function() {
                        return memoize_default(fn2.call(this));
                    }), descriptor;
                }
            },
            {
                key: "validateValue",
                value: function validateValue(type) {
                    return function(target, propertyKey, descriptor) {
                        if (!_DecoratorUtils.isProperty$("validateValue", propertyKey, descriptor)) return descriptor;
                        try {
                            return validateProperty_default(target, type, propertyKey);
                        } catch (error) {
                            return _instanceof(error, Error) ? console.warn("[Decorator:validateValue] ".concat(error.message)) : console.warn("[Decorator:validateValue] unknown error", {
                                cause: error
                            }), descriptor;
                        }
                    };
                }
            }
        ]), _DecoratorUtils;
    }();
    __name(_DecoratorUtils, "DecoratorUtils"), __publicField(_DecoratorUtils, "trace", __name(function(target, propertyKey, descriptor) {
        try {
            var _ref = null != descriptor ? descriptor : {}, value = _ref.value, initializer = _ref.initializer, get2 = _ref.get, set1 = _ref.set;
            try {
                if (get2 || set1) console.warn("[Decorator:trace:accessor]", {
                    getter: get2,
                    setter: set1
                });
                else if ("function" == typeof value) console.warn("[Decorator:trace:method]", {
                    method: value,
                    params: value.length
                });
                else if ("function" == typeof initializer) {
                    var initialValue = null == initializer ? void 0 : initializer();
                    if ("function" == typeof initialValue) console.warn("[Decorator:trace:arrow]", {
                        initializer: initializer,
                        initialValue: initialValue
                    });
                    else if (void 0 !== initialValue) console.warn("[Decorator:trace:property]", {
                        initializer: initializer,
                        initialValue: initialValue
                    });
                    else throw Error("Initializer returned undefined");
                } else if (value) {
                    var type = void 0 === value ? "undefined" : _type_of(value);
                    console.warn("[Decorator:trace:field]", {
                        type: type,
                        value: value
                    });
                } else throw Error("Unsupported decorator");
            } catch (error) {
                console.warn("[Decorator:trace:unknown]", {
                    propertyKey: propertyKey,
                    descriptor: descriptor,
                    reason: _instanceof(error, Error) ? error.message : error
                });
            }
        } catch (error) {
            console.error("[Decorator:trace] Fatal error:", error);
        } finally{
            console.debug("[Decorator:trace:info]", {
                target: target,
                propertyKey: propertyKey,
                value: null == descriptor ? void 0 : descriptor.value,
                type: _type_of(null == descriptor ? void 0 : descriptor.value),
                instanceProps: Object.getOwnPropertyNames(target)
            });
        }
        return descriptor;
    }, "trace")), __publicField(_DecoratorUtils, "validateReturn", __name(function() {
        for(var _len = arguments.length, types = Array(_len), _key = 0; _key < _len; _key++)types[_key] = arguments[_key];
        return function(_target, propertyKey, descriptor) {
            return _DecoratorUtils.isFunction$("validateReturn", propertyKey, descriptor) ? validateReturn_default(descriptor, types) : descriptor;
        };
    }, "validateReturn")), __publicField(_DecoratorUtils, "validateParams", __name(function() {
        for(var _len = arguments.length, types = Array(_len), _key = 0; _key < _len; _key++)types[_key] = arguments[_key];
        return function(_target, propertyKey, descriptor) {
            return _DecoratorUtils.isFunction$("validateParams", propertyKey, descriptor) ? validateParams_default(descriptor, types) : descriptor;
        };
    }, "validateParams"));
    var DecoratorUtils = _DecoratorUtils, decorator_default = DecoratorUtils, workerCode = __name(function() {
        var drawImage = function drawImage(data) {
            console.log("Drawing image with data:", data);
        }, saveData = function saveData(data) {
            console.log("Saving data:", data);
        }, getData = function getData(data) {
            console.log("Getting data:", data);
        };
        self.onmessage = function(event) {
            var _event_data = event.data, action = _event_data.action, payload = _event_data.payload;
            switch(action){
                case "drawImage":
                    drawImage(payload);
                    break;
                case "saveData":
                    saveData(payload);
                    break;
                case "getData":
                    getData(payload);
                    break;
                default:
                    console.error("Unknown action:", action);
            }
        }, __name(drawImage, "drawImage"), __name(saveData, "saveData"), __name(getData, "getData");
    }, "workerCode"), _WebWorker = function() {
        function _WebWorker() {
            _class_call_check(this, _WebWorker), _define_property(this, "worker$", null), this.init();
        }
        return _create_class(_WebWorker, [
            {
                key: "init",
                value: function init() {
                    var blob = new Blob([
                        "(".concat(workerCode.toString(), ")()")
                    ], {
                        type: "application/javascript"
                    });
                    this.worker$ = new Worker(URL.createObjectURL(blob));
                }
            }
        ], [
            {
                key: "inst",
                get: function get() {
                    return _WebWorker._inst$ || (_WebWorker._inst$ = new _WebWorker()), _WebWorker._inst$;
                }
            },
            {
                key: "postMessage",
                value: function postMessage(action, payload) {
                    if (!_WebWorker.inst.worker$) throw Error("Worker is not initialized");
                    _WebWorker.inst.worker$.postMessage({
                        action: action,
                        payload: payload
                    });
                }
            }
        ]), _WebWorker;
    }();
    __name(_WebWorker, "WebWorker"), __publicField(_WebWorker, "_inst$"), __decorateClass([
        decorator_default.tryCatch()
    ], _WebWorker.prototype, "init", 1), __decorateClass([
        decorator_default.tryCatch()
    ], _WebWorker, "postMessage", 1);
    var WebWorker = _WebWorker, webWorker_default = WebWorker;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var isNotClear = __name(function(value) {
        return null == value;
    }, "isNotClear"), func43 = __name(function(object) {
        if (!isObject_default(object)) return object;
        for(var key in object)if (isNotClear(object[key])) delete object[key];
        else {
            var value = object[key];
            isObject_default(value) && (object[key] = func43(value));
        }
        return object;
    }, "func"), clear_default = func43;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var func44 = __name(function(data) {
        return (void 0 === data ? "undefined" : _type_of(data)) !== "object" || null === data ? null : assign_default(data, {});
    }, "func"), clone_default2 = func44;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var func45 = __name(function(source, target) {
        for(var key in target)isObject_default(source[key]) && isObject_default(target[key]) ? func45(source[key], target[key]) : assign_default(source, _define_property({}, key, target[key]));
        return source;
    }, "func"), merge_default = func45, func46 = __name(function(key, data) {
        try {
            if (!localStorage) return !1;
            var currentData = getLocalStorage_default(key), correctData = {};
            isObject_default(currentData) && (correctData = currentData);
            var cloneData = clone_default2(data);
            if (!isObject_default(cloneData)) return !1;
            var cleanData = clear_default(cloneData), newData = merge_default(correctData, cleanData), dataEncoded = encode_default(newData);
            return localStorage.setItem(key, dataEncoded), !0;
        } catch (error) {
            return console.debug("writeLocalStorage error", error), !1;
        }
    }, "func"), writeLocalStorage_default = func46, browser_default = {
        createCanvas: createCanvas_default,
        getLocale: getLocale_default,
        getLocalStorage: getLocalStorage_default,
        getQueryParams: getQueryParams_default,
        getScreenHeight: getScreenHeight_default,
        getScreenWidth: getScreenWidth_default,
        writeLocalStorage: writeLocalStorage_default,
        vibrate: vibrate_default,
        getIndexedDB: getIndexedDB_default,
        WebWorker: webWorker_default,
        setIndexedDB: setIndexedDB_default,
        removeKeyLocalStorage: removeKeyLocalStorage_default
    };
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var func47 = __name(function() {
        try {
            var Context5 = window.AudioContext || window.webkitAudioContext;
            if (!Context5) return "unknown";
            var audioContext = new Context5();
            audioContext.resume();
            var state = audioContext.state;
            return audioContext.close(), state;
        } catch (e) {
            return "unknown";
        }
    }, "func"), audioState_default = func47;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var func48 = __name(function() {
        var _window_devicePixelRatio;
        return Number((null != (_window_devicePixelRatio = window.devicePixelRatio) ? _window_devicePixelRatio : 1).toFixed(1));
    }, "func"), pixelRatio_default = func48, func49 = __name(function(value) {
        return value * pixelRatio_default();
    }, "func"), getPhysicPixels_default = func49;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var func50 = __name(function() {
        return /iPhone|iPad|iPod/i.test(navigator.userAgent);
    }, "func"), isIOS_default = func50, func51 = __name(function() {
        try {
            var sab = getComputedStyle(document.documentElement).getPropertyValue("--sab"), val = parseInt(sab, 10);
            if (!isNaN(val) && val > 0) return val;
        } catch (e) {}
        try {
            var div = document.createElement("div");
            div.style.cssText = "position:absolute;top:0;left:0;z-index:-9999;visibility:hidden;padding-bo\
ttom:env(safe-area-inset-bottom);", document.body.appendChild(div);
            var computed = window.getComputedStyle(div).paddingBottom, val1 = parseInt(computed, 10);
            if (document.body.removeChild(div), !isNaN(val1) && val1 > 0) return val1;
        } catch (e) {}
        if (isIOS_default()) {
            var _window_screen = window.screen, width = _window_screen.width, height = _window_screen.height, min = Math.min(width, height), max = Math.max(width, height);
            if ([
                "375,812",
                "360,780",
                "414,896",
                "390,844",
                "428,926",
                "393,852",
                "430,932"
            ].includes("".concat(min, ",").concat(max)) || max / min > 2) return 34;
        }
        return 0;
    }, "func"), getSafeAreaBottom_default = func51;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var func52 = __name(function() {
        try {
            var _createCanvas_default, _ref = null != (_createCanvas_default = createCanvas_default({
                contextType: "webgl",
                type: "canvas"
            })) ? _createCanvas_default : {}, context = _ref.context, canvas = _ref.canvas;
            if (!context || !canvas) return "unknown";
            var gpuRenderer = context.getParameter(context.RENDERER);
            return canvas.remove(), gpuRenderer.substring(0, 70);
        } catch (e) {
            return "unknown";
        }
    }, "func"), gpuRenderer_default = func52;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var func53 = __name(function() {
        try {
            var w = window.navigator;
            if (!("hardwareConcurrency" in w) || "number" != typeof w.hardwareConcurrency) return 0;
            return w.hardwareConcurrency;
        } catch (e) {
            return 0;
        }
    }, "func"), hardwareConcurrency_default = func53;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var func54 = __name(function() {
        try {
            var w = window.performance;
            if (!("memory" in w) || "object" !== _type_of(w.memory)) return "unknown";
            var _w_memory = w.memory, usedJSHeapSize = _w_memory.usedJSHeapSize, jsHeapSizeLimit = _w_memory.jsHeapSizeLimit;
            if (!usedJSHeapSize || !jsHeapSizeLimit) return "unknown";
            var max = Math.round(jsHeapSizeLimit / 1024 / 1024), used = Math.round(usedJSHeapSize / 1024 / 1024), free = max - used;
            return "T:".concat(max, "MB U:").concat(used, "MB F:").concat(free, "MB");
        } catch (e) {
            return "unknown";
        }
    }, "func"), heapMemory_default = func54;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var func55 = __name(function() {
        return /Android/i.test(navigator.userAgent);
    }, "func"), isAndroid_default = func55;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var func56 = __name(function() {
        return !/Android|iPhone|iPad|iPod/i.test(navigator.userAgent);
    }, "func"), isDesktop_default = func56;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var func57 = __name(function() {
        try {
            return eval("try{const func = ()=>{}}catch(e){}"), !1;
        } catch (e) {
            return !0;
        }
    }, "func"), isES5_default = func57;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var func58 = __name(function() {
        return /Android|iPhone|iPad|iPod/i.test(navigator.userAgent);
    }, "func"), isMobile_default = func58;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var func59 = __name(function() {
        try {
            var _createCanvas_default, _ref = null != (_createCanvas_default = createCanvas_default({
                contextType: "2d",
                type: "canvas"
            })) ? _createCanvas_default : {}, canvas = _ref.canvas, context = _ref.context;
            if (!canvas || !context) return !1;
            var supportWebp = canvas.toDataURL("image/webp").startsWith("data:image/webp");
            return canvas.remove(), supportWebp;
        } catch (e) {
            return !1;
        }
    }, "func"), isSupportWebp_default = func59;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var func60 = __name(function() {
        try {
            var _createCanvas_default, _ref = null != (_createCanvas_default = createCanvas_default({
                contextType: "webgl",
                type: "canvas"
            })) ? _createCanvas_default : {}, context = _ref.context, canvas = _ref.canvas;
            if (!context || !canvas) return -1;
            var maxTextureSize = context.getParameter(context.MAX_TEXTURE_SIZE);
            if (canvas.remove(), maxTextureSize < 1) return -1;
            return maxTextureSize;
        } catch (e) {
            return -1;
        }
    }, "func"), maxTextureSize_default = func60;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var func61 = __name(function() {
        var _window_screen_orientation, _window_screen;
        if (null == (_window_screen = window.screen) || null == (_window_screen_orientation = _window_screen.orientation) ? void 0 : _window_screen_orientation.type) return window.screen.orientation.type;
        if ("matchMedia" in window) {
            if (window.matchMedia("(orientation: portrait)").matches) return "portrait-primary";
            if (window.matchMedia("(orientation: landscape)").matches) return "landscape-primary";
        }
        return window.innerHeight > window.innerWidth ? "portrait-primary" : window.innerWidth > window.innerHeight ? "landscape-primary" : "unknown";
    }, "func"), orientation_default = func61;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var func62 = __name(function() {
        try {
            var _createCanvas_default, _ref = null != (_createCanvas_default = createCanvas_default({
                contextType: "webgl",
                type: "canvas"
            })) ? _createCanvas_default : {}, context = _ref.context, canvas = _ref.canvas;
            if (!context || !canvas) return "unknown";
            var version = context.getParameter(context.VERSION);
            return canvas.remove(), version.substring(0, 70);
        } catch (e) {
            return "unknown";
        }
    }, "func"), webglVersion_default = func62, device_default = {
        isES5: isES5_default,
        isIOS: isIOS_default,
        isMobile: isMobile_default,
        isAndroid: isAndroid_default,
        isDesktop: isDesktop_default,
        heapMemory: heapMemory_default,
        audioState: audioState_default,
        pixelRatio: pixelRatio_default,
        orientation: orientation_default,
        gpuRenderer: gpuRenderer_default,
        webglVersion: webglVersion_default,
        isSupportWebp: isSupportWebp_default,
        maxTextureSize: maxTextureSize_default,
        getPhysicPixels: getPhysicPixels_default,
        getSafeAreaBottom: getSafeAreaBottom_default,
        hardwareConcurrency: hardwareConcurrency_default
    };
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var failure = __name(function(error) {
        return [
            null,
            error
        ];
    }, "failure"), failure_default = failure;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var isFailure = __name(function(value) {
        return null !== value[1];
    }, "isFailure"), isFailure_default = isFailure;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var success = __name(function(value) {
        return [
            value,
            null
        ];
    }, "success"), success_default = success, apply = __name(function(fn2) {
        return function(value) {
            if (isFailure_default(value)) return value;
            try {
                return success_default(fn2(value[0]));
            } catch (error) {
                return failure_default(toError_default(error));
            }
        };
    }, "apply"), apply_default = apply;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var applyAsync = __name(function(fn2) {
        return function(value) {
            return _async_to_generator(function() {
                return _ts_generator(this, function(_state) {
                    switch(_state.label){
                        case 0:
                            if (isFailure_default(value)) return [
                                2,
                                value
                            ];
                            _state.label = 1;
                        case 1:
                            return _state.trys.push([
                                1,
                                3,
                                ,
                                4
                            ]), [
                                4,
                                fn2(value[0])
                            ];
                        case 2:
                            return [
                                2,
                                success_default.apply(void 0, [
                                    _state.sent()
                                ])
                            ];
                        case 3:
                            return [
                                2,
                                failure_default(toError_default(_state.sent()))
                            ];
                        case 4:
                            return [
                                2
                            ];
                    }
                });
            })();
        };
    }, "applyAsync"), applyAsync_default = applyAsync;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var applyImmediate = __name(function(fn2) {
        try {
            return success_default(fn2());
        } catch (error) {
            return failure_default(toError_default(error));
        }
    }, "applyImmediate"), applyImmediate_default = applyImmediate;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var applyImmediateAsync = __name(function(fn2) {
        return _async_to_generator(function() {
            return _ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return _state.trys.push([
                            0,
                            2,
                            ,
                            3
                        ]), [
                            4,
                            fn2()
                        ];
                    case 1:
                        return [
                            2,
                            success_default.apply(void 0, [
                                _state.sent()
                            ])
                        ];
                    case 2:
                        return [
                            2,
                            failure_default(toError_default(_state.sent()))
                        ];
                    case 3:
                        return [
                            2
                        ];
                }
            });
        })();
    }, "applyImmediateAsync"), applyImmediateAsync_default = applyImmediateAsync;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var extractFailure = __name(function(result3) {
        return result3[1];
    }, "extractFailure"), extractFailure_default = extractFailure;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var extractSuccess = __name(function(result3) {
        return result3[0];
    }, "extractSuccess"), extractSuccess_default = extractSuccess;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var isSuccess = __name(function(value) {
        return null === value[1];
    }, "isSuccess"), isSuccess_default = isSuccess;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var lift = success_default, lift_default = lift;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var pipe = __name(function() {
        for(var _len = arguments.length, fns = Array(_len), _key = 0; _key < _len; _key++)fns[_key] = arguments[_key];
        return function(value) {
            return fns.reduce(function(acc, fn2) {
                return apply_default(fn2)(acc);
            }, value);
        };
    }, "pipe"), pipe_default = pipe;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var pipeAsync = __name(function() {
        for(var _len = arguments.length, fns = Array(_len), _key = 0; _key < _len; _key++)fns[_key] = arguments[_key];
        return function(value) {
            return _async_to_generator(function() {
                var result3, _iteratorNormalCompletion, _didIteratorError, _iteratorError, _iterator, _step, err;
                return _ts_generator(this, function(_state) {
                    switch(_state.label){
                        case 0:
                            result3 = value, _iteratorNormalCompletion = !0, _didIteratorError = !1, _iteratorError = void 0, _state.label = 1;
                        case 1:
                            _state.trys.push([
                                1,
                                6,
                                7,
                                8
                            ]), _iterator = fns[Symbol.iterator](), _state.label = 2;
                        case 2:
                            if (_iteratorNormalCompletion = (_step = _iterator.next()).done) return [
                                3,
                                5
                            ];
                            return [
                                4,
                                applyAsync_default(_step.value)(result3)
                            ];
                        case 3:
                            result3 = _state.sent(), _state.label = 4;
                        case 4:
                            return _iteratorNormalCompletion = !0, [
                                3,
                                2
                            ];
                        case 5:
                            return [
                                3,
                                8
                            ];
                        case 6:
                            return err = _state.sent(), _didIteratorError = !0, _iteratorError = err, [
                                3,
                                8
                            ];
                        case 7:
                            try {
                                _iteratorNormalCompletion || null == _iterator.return || _iterator.return();
                            } finally{
                                if (_didIteratorError) throw _iteratorError;
                            }
                            return [
                                7
                            ];
                        case 8:
                            return [
                                2,
                                result3
                            ];
                    }
                });
            })();
        };
    }, "pipeAsync"), pipeAsync_default = pipeAsync, error_default = {
        apply: apply_default,
        applyAsync: applyAsync_default,
        applyImmediate: applyImmediate_default,
        applyImmediateAsync: applyImmediateAsync_default,
        lift: lift_default,
        success: success_default,
        pipe: pipe_default,
        pipeAsync: pipeAsync_default,
        extractSuccess: extractSuccess_default,
        extractFailure: extractFailure_default,
        isFailure: isFailure_default,
        isSuccess: isSuccess_default
    };
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_accessBlocker(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var func63 = __name(function(promises) {
        return Promise.all(promises.map(function(p) {
            return Promise.resolve(p).then(function(value) {
                return {
                    status: "fulfilled",
                    value: value
                };
            }, function(reason) {
                return {
                    status: "rejected",
                    reason: reason
                };
            });
        }));
    }, "func"), allSettled_default = func63;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var func64 = __name(function(promises) {
        return "function" == typeof Promise.any ? Promise.any(promises) : new Promise(function(resolve, reject) {
            var results = [], resolved = 0, check = __name(function(idx) {
                if (!(idx < promises.length)) if (results.length > 0) resolve(results[0]);
                else {
                    var error = Error("All promises were rejected");
                    error.errors = results, reject(error);
                }
            }, "check");
            promises.forEach(function(promise, index) {
                promise.then(function(value) {
                    results[index] = value, check(++resolved);
                }).catch(function(error) {
                    results[index] = error, check(++resolved);
                });
            });
        });
    }, "func"), any_default = func64;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var func65 = __name(function(promise, timeout) {
        return _async_to_generator(function() {
            return _ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        if (_state.trys.push([
                            0,
                            4,
                            ,
                            5
                        ]), !timeout) return [
                            3,
                            2
                        ];
                        return [
                            4,
                            Promise.race([
                                promise,
                                new Promise(function(_, reject) {
                                    return setTimeout(function() {
                                        return reject(Error("Timeout"));
                                    }, timeout);
                                })
                            ])
                        ];
                    case 1:
                    case 3:
                        return [
                            2,
                            [
                                _state.sent(),
                                null
                            ]
                        ];
                    case 2:
                        return [
                            4,
                            promise
                        ];
                    case 4:
                        return [
                            2,
                            [
                                null,
                                toError_default(_state.sent())
                            ]
                        ];
                    case 5:
                        return [
                            2
                        ];
                }
            });
        })();
    }, "func"), handleAsync_default = func65;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var func66 = __name(function() {
        var next = null, actions = new Set(), defer = __name(function(action) {
            actions.add(action);
        }, "defer"), cancel = __name(function(action) {
            actions.delete(action);
        }, "cancel"), clear = __name(function() {
            actions.clear();
        }, "clear");
        return {
            defer: defer,
            cancel: cancel,
            successor: __name(function(inst) {
                if (void 0 === inst) throw Error("Latch cannot be its own successor");
                next = inst;
            }, "successor"),
            trigger: __name(function() {
                return _async_to_generator(function() {
                    return _ts_generator(this, function(_state) {
                        switch(_state.label){
                            case 0:
                                return actions.add(clear), [
                                    4,
                                    allSettled_default(_to_consumable_array(actions).map(function(action) {
                                        return Promise.resolve().then(action);
                                    }))
                                ];
                            case 1:
                                if (_state.sent(), !next) return [
                                    3,
                                    3
                                ];
                                return [
                                    4,
                                    next.trigger()
                                ];
                            case 2:
                                _state.sent(), next = null, _state.label = 3;
                            case 3:
                                return [
                                    2
                                ];
                        }
                    });
                })();
            }, "trigger"),
            clear: clear
        };
    }, "func"), latch_default = func66;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var mutex = __name(function() {
        var queue = {}, release = __name(function(key) {
            var _queue_key, next = null == (_queue_key = queue[key]) ? void 0 : _queue_key.shift();
            next ? next() : delete queue[key];
        }, "release");
        return {
            use: __name(function(key) {
                var unlocked = !1, lock = {
                    release: __name(function() {
                        unlocked || (unlocked = !0, release(key));
                    }, "release")
                };
                return queue[key] ? new Promise(function(resolve) {
                    queue[key].push(function() {
                        return resolve(lock);
                    });
                }) : (queue[key] = [], Promise.resolve(lock));
            }, "use")
        };
    }, "mutex"), mutex_default = mutex;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var func67 = __name(function(firstTry, secondTry) {
        try {
            return firstTry();
        } catch (firstError) {
            try {
                return secondTry();
            } catch (secondError) {
                throw firstError;
            }
        }
    }, "func"), retry_default = func67;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var func68 = __name(function(firstTry, secondTry) {
        return _async_to_generator(function() {
            var firstError, secondError;
            return _ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return _state.trys.push([
                            0,
                            2,
                            ,
                            7
                        ]), [
                            4,
                            firstTry()
                        ];
                    case 1:
                        return [
                            2,
                            _state.sent()
                        ];
                    case 2:
                        firstError = _state.sent(), _state.label = 3;
                    case 3:
                        return _state.trys.push([
                            3,
                            5,
                            ,
                            6
                        ]), [
                            4,
                            secondTry()
                        ];
                    case 4:
                        return [
                            2,
                            _state.sent()
                        ];
                    case 5:
                        throw secondError = _state.sent(), firstError;
                    case 6:
                        return [
                            3,
                            7
                        ];
                    case 7:
                        return [
                            2
                        ];
                }
            });
        })();
    }, "func"), retryAsync_default = func68;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var func69 = __name(function(config) {
        var generate = config.generate, _config_generateSeed = config.generateSeed, generateSeed = void 0 === _config_generateSeed ? __name(function() {
            return 1e6 * Math.random();
        }, "generateSeed") : _config_generateSeed, tmp = config.seed, seed = void 0 === tmp ? Date.now() : tmp;
        return function() {
            for(var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++)args[_key] = arguments[_key];
            return seed = generateSeed(seed), generate.apply(void 0, [
                seed
            ].concat(_to_consumable_array(args)));
        };
    }, "func"), rng_default = func69;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var makeMutableTrick = __name(function(target, value) {
        target.__proto__.valueOf = function() {
            return value;
        }, target.__proto__.toString = function() {
            return "".concat(value);
        };
    }, "makeMutableTrick"), makeTypeTrick = __name(function(target) {
        return target.constructor(__spreadProps(__spreadValues({}, target), {
            __proto__: target.__proto__
        }));
    }, "makeTypeTrick"), func70 = __name(function(source) {
        var keys = Object.keys(source), _iteratorNormalCompletion = !0, _didIteratorError = !1, _iteratorError = void 0;
        try {
            for(var _step, _loop = function _loop() {
                var _Object_getOwnPropertyDescriptor, key = _step.value, origin = null == (_Object_getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor(source, key)) ? void 0 : _Object_getOwnPropertyDescriptor.value;
                if (isObject_default(origin)) return func70(origin), "continue";
                try {
                    var draft = origin;
                    makeMutableTrick(draft, origin), Object.defineProperty(source, key, {
                        enumerable: !1,
                        configurable: !0,
                        get: function get() {
                            return makeTypeTrick(draft);
                        },
                        set: function set1(value) {
                            assign_default(draft, value), makeMutableTrick(draft, value);
                        }
                    });
                } catch (error) {}
            }, _iterator = keys[Symbol.iterator](); !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = !0)_loop();
        } catch (err) {
            _didIteratorError = !0, _iteratorError = err;
        } finally{
            try {
                _iteratorNormalCompletion || null == _iterator.return || _iterator.return();
            } finally{
                if (_didIteratorError) throw _iteratorError;
            }
        }
    }, "func"), syncVarsFromSource_default = func70;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var func71 = __name(function(promise, duration) {
        return duration <= 0 ? promise : Promise.race([
            promise,
            new Promise(function(_, reject) {
                setTimeout(function() {
                    return reject(Error("Timeout"));
                }, duration);
            })
        ]);
    }, "func"), timeOut_default = func71;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var func72 = __name(function(duration) {
        var startMs = performance.now();
        return function() {
            return _async_to_generator(function() {
                return _ts_generator(this, function(_state) {
                    switch(_state.label){
                        case 0:
                            if (!(performance.now() - startMs > duration)) return [
                                3,
                                2
                            ];
                            return [
                                4,
                                new Promise(function(resolve) {
                                    return requestAnimationFrame(resolve);
                                })
                            ];
                        case 1:
                            _state.sent(), startMs = performance.now(), _state.label = 2;
                        case 2:
                            return [
                                2
                            ];
                    }
                });
            })();
        };
    }, "func"), timeSlice_default = func72;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var unwrapAllSettled = __name(function(data) {
        return data.reduce(function(acc, d) {
            return "fulfilled" === d.status ? acc.successes.push(d.value) : acc.failures.push(d.reason), acc;
        }, {
            successes: [],
            failures: []
        });
    }, "unwrapAllSettled"), unwrapAllSettled_default = unwrapAllSettled, function_default = {
        accessBlocker: accessBlocker_default,
        allSettled: allSettled_default,
        any: any_default,
        debounce: debounce_default,
        handleAsync: handleAsync_default,
        latch: latch_default,
        memoize: memoize_default,
        mutex: mutex_default,
        retry: retry_default,
        retryAsync: retryAsync_default,
        rng: rng_default,
        syncVars: syncVarsFromSource_default,
        throttle: throttle_default,
        timeOut: timeOut_default,
        timeSlice: timeSlice_default,
        toError: toError_default,
        unwrapAllSettled: unwrapAllSettled_default
    };
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var func73 = __name(function(data) {
        var inverse = {};
        for(var key in data)inverse[data[key]] = key;
        return inverse;
    }, "func"), invert_default = func73, getValue = memoize_default(function(code, valueMap) {
        var codeKey = code.toLowerCase();
        if ("string" == typeof code) {
            var data = valueMap[codeKey];
            if ("string" == typeof data) return data;
        }
        return "?";
    }), findGroups = memoize_default(function(str) {
        for(var groups = [], findGroup = /:([A-Z0-9?]+)/gm, group = null; null !== (group = findGroup.exec(str));)groups.push(group[1]);
        return groups;
    }), findHash = memoize_default(function(str) {
        for(var _loop = function _loop() {
            if (null === (codes = findHash2.exec(str))) return "break";
            var code = codes[0];
            if (code.length >= 2) {
                var _hash, length = code.length, loop = code.slice(0, length - 1), key = code[length - 1], list = length_default(+loop).map(function() {
                    return key;
                });
                return (_hash = hash).push.apply(_hash, _to_consumable_array(list)), "continue";
            }
            hash.push(code);
        }, hash = [], findHash2 = /(\d+[A-Z?]|[A-Z?])/gm, codes = null; "break" !== _loop(););
        return hash;
    }), func74 = __name(function(hash, codeMap) {
        var str = hash, valueMap = invert_default(codeMap), data = {}, codeIndex = 0, groupIndex = 0, groups = findGroups(str), _iteratorNormalCompletion = !0, _didIteratorError = !1, _iteratorError = void 0;
        try {
            for(var _step, _iterator = groups[Symbol.iterator](); !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = !0){
                var hashList = _step.value;
                codeIndex = 0, data[++groupIndex] || (data[groupIndex] = {});
                var hash2 = findHash(hashList), _iteratorNormalCompletion1 = !0, _didIteratorError1 = !1, _iteratorError1 = void 0;
                try {
                    for(var _step1, _iterator1 = hash2[Symbol.iterator](); !(_iteratorNormalCompletion1 = (_step1 = _iterator1.next()).done); _iteratorNormalCompletion1 = !0){
                        var code = _step1.value;
                        codeIndex++;
                        var value = getValue(code, valueMap);
                        data[groupIndex][codeIndex] = value;
                    }
                } catch (err) {
                    _didIteratorError1 = !0, _iteratorError1 = err;
                } finally{
                    try {
                        _iteratorNormalCompletion1 || null == _iterator1.return || _iterator1.return();
                    } finally{
                        if (_didIteratorError1) throw _iteratorError1;
                    }
                }
            }
        } catch (err) {
            _didIteratorError = !0, _iteratorError = err;
        } finally{
            try {
                _iteratorNormalCompletion || null == _iterator.return || _iterator.return();
            } finally{
                if (_didIteratorError) throw _iteratorError;
            }
        }
        return data;
    }, "func"), decodeMap_default = func74;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var func75 = __name(function(obj, key) {
        if (!isObject_default(obj)) return !1;
        try {
            if (isObject_default(obj[key])) return !0;
        } catch (e) {
            return !1;
        }
        return "function" == typeof Object.hasOwn ? Object.hasOwn(obj, key) : Object.prototype.hasOwnProperty.call(obj, key);
    }, "func"), hasOwn_default = func75;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var func76 = __name(function(data) {
        return "string" == typeof data;
    }, "func"), isString_default = func76, getCode = memoize_default(function(value, codeMap) {
        if (!isObject_default(codeMap) || !hasOwn_default(codeMap, value)) return "?";
        var code = codeMap[value];
        return "string" == typeof code ? "".concat(code.toUpperCase()) : "?";
    }), func77 = __name(function(data, codeMap) {
        arguments.length > 2 && void 0 !== arguments[2] && arguments[2];
        var str = "";
        if (!isObject_default(data)) return str;
        var lastCode = "", lastIndex = 1;
        for(var key in data)if (hasOwn_default(data, key)) {
            var value = data[key];
            if (isObject_default(value)) {
                str += ":".concat(func77(value, codeMap, !0));
                continue;
            }
            if (isString_default(value)) {
                var code = getCode(value, codeMap);
                code === lastCode ? (lastIndex++, str = str.slice(0, -2)) : lastIndex = 1, str += "".concat(lastIndex).concat(code), lastCode = code;
            }
        }
        return str.replace(/1([A-Z])/g, "$1");
    }, "func"), encodeMap_default = func77;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var func78 = __name(function(hash, token) {
        try {
            if (!hash) return "";
            if (token) {
                var hashString = atob(hash), hashToken = btoa(token);
                return hashString = hashString.replace(hashToken, "="), atob(hashString);
            }
            return atob(hash);
        } catch (error) {
            return console.warn("Error in hashToString", error), "";
        }
    }, "func"), hashToString_default = func78;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var createCompressDict = __name(function() {
        return {};
    }, "createCompressDict"), compressDicts = {}, getCompressionDict = __name(function(level2) {
        return compressDicts[level2] || (compressDicts[level2] = createCompressDict()), compressDicts[level2];
    }, "getCompressionDict"), setCompressionDict = __name(function(word, level2) {
        var compressDict = getCompressionDict(level2), dictSize = Object.keys(compressDict).length;
        compressDict[word] = dictSize + 1;
    }, "setCompressionDict"), func79 = __name(function(str, customDict) {
        var level2 = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 1, word = str[0], result3 = [], dict = getCompressionDict(level2);
        if (customDict) for(var key in customDict)setCompressionDict(key, level2);
        for(var i2 = 1; i2 < str.length; i2++){
            var char = str[i2], candidate = "".concat(word).concat(char);
            word = str[++i2], void 0 === dict[candidate] && (setCompressionDict(candidate, level2), dict = getCompressionDict(level2));
        }
        word = str[0];
        for(var i = 1, wordIdx = 0; i < str.length;){
            var char1 = str[i], candidate1 = "".concat(word).concat(char1), potentialCandidate = getLongestAvailableKeyInCompressDict(str.slice(wordIdx), dict);
            if (null !== potentialCandidate) {
                result3.push(dict[potentialCandidate]), i += potentialCandidate.length - candidate1.length, word = "", wordIdx = i + 1, i++;
                continue;
            }
            void 0 === dict[candidate1] ? word = candidate1 : (result3.push(dict[candidate1]), word = "", wordIdx = i + 1), i++;
        }
        return console.debug("dict", dict, Object.keys(dict).length), result3;
    }, "func"), getLongestAvailableKeyInCompressDict = __name(function(substring, dict) {
        var keys = Object.keys(dict);
        return 0 === (keys = keys.filter(function(key) {
            return substring.indexOf(key) > -1 && substring !== key;
        })).length ? null : keys.sort(function(a, b) {
            return b.length - a.length;
        })[0];
    }, "getLongestAvailableKeyInCompressDict"), lzwCompress_default = func79;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var createDecompressDict = __name(function(compressDict) {
        var dict = {};
        for(var key in compressDict)dict[compressDict[key]] = key;
        return dict;
    }, "createDecompressDict"), func80 = __name(function(hash, customDict) {
        var level2 = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 1, entry = "", result3 = "", compressDict = getCompressionDict(level2);
        customDict && (compressDict = __spreadValues(__spreadValues({}, customDict), compressDict)), console.debug("compressDict", compressDict);
        var dict = createDecompressDict(compressDict);
        for(var i in hash){
            var code = hash[i];
            result3 += entry = void 0 !== dict[code] ? dict[code] : "?";
        }
        return result3;
    }, "func"), lzwDecompress_default = func80;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var func81 = __name(function(str, token) {
        try {
            if (!str) return "";
            if (token) {
                var hashString = btoa(str), hashToken = btoa(token);
                return hashString = hashString.replace("=", hashToken), btoa(hashString);
            }
            return btoa(str);
        } catch (error) {
            return console.warn("Error in stringToHash", error), "";
        }
    }, "func"), stringToHash_default = func81, hash_default = {
        decodeMap: decodeMap_default,
        encodeMap: encodeMap_default,
        hashToString: hashToString_default,
        stringToHash: stringToHash_default,
        lwzCompress: lzwCompress_default,
        lwzDecompress: lzwDecompress_default
    };
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var base64ToFile = __name(function(base64, filename) {
        var arr = base64.split(","), regex = arr[0].match(/:(.*?);/);
        if (!regex) return null;
        for(var mime = regex[1], bstr = atob(arr[arr.length - 1]), n = bstr.length, u8arr = new Uint8Array(n); n--;)u8arr[n] = bstr.charCodeAt(n);
        return new File([
            u8arr
        ], filename, {
            type: mime
        });
    }, "base64ToFile"), base64ToFile_default = base64ToFile;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var func82 = __name(function(blob) {
        return new Promise(function(resolve, reject) {
            var reader = new FileReader();
            reader.onloadend = function() {
                return resolve(reader.result);
            }, reader.onerror = reject, reader.readAsDataURL(blob);
        });
    }, "func"), blobToDataImage_default = func82;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var img = new Image(), func83 = __name(function(blob) {
        var forceNew = !(arguments.length > 1) || void 0 === arguments[1] || arguments[1], autoRevoke = !(arguments.length > 2) || void 0 === arguments[2] || arguments[2];
        return new Promise(function(resolve) {
            forceNew && (img = new Image()), img.onload = function() {
                resolve(img), autoRevoke && URL.revokeObjectURL(img.src);
            }, img.onerror = function() {
                resolve(null);
            }, img.src = URL.createObjectURL(blob);
        });
    }, "func"), blobToHtmlImage_default = func83;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var func84 = __name(function(blobUrl, fileName) {
        return _async_to_generator(function() {
            var blob;
            return _ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return [
                            4,
                            fetch(blobUrl).then(function(r) {
                                return r.blob();
                            }).catch(function() {
                                return null;
                            })
                        ];
                    case 1:
                        if (!(blob = _state.sent())) return [
                            2,
                            null
                        ];
                        return [
                            2,
                            new File([
                                blob
                            ], fileName)
                        ];
                }
            });
        })();
    }, "func"), blobUrlToFile_default = func84;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var result = createCanvas_default({
        contextType: "2d",
        contextAttributes: {
            willReadFrequently: !0
        }
    }), convertBlobToBase64 = __name(function(blob) {
        return _async_to_generator(function() {
            return _ts_generator(this, function(_state) {
                return [
                    2,
                    new Promise(function(resolve, reject) {
                        var reader = new FileReader();
                        reader.onload = function() {
                            return resolve(reader.result);
                        }, reader.onerror = reject, reader.readAsDataURL(blob);
                    })
                ];
            });
        })();
    }, "convertBlobToBase64"), func85 = __name(function(element) {
        var type = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : "png";
        return _async_to_generator(function() {
            var width, height;
            return _ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        if (width = element.width, height = element.height, !width || !height) throw Error("Element has no width or height");
                        if (!result) throw Error("Failed to create canvas");
                        if (result.canvas.width = width, result.canvas.height = height, result.context.drawImage(element, 0, 0, width, height), _instanceof(result.canvas, HTMLCanvasElement)) return [
                            2,
                            result.canvas.toDataURL("image/".concat(type), 0.85)
                        ];
                        return [
                            4,
                            result.canvas.convertToBlob({
                                type: "image/".concat(type)
                            })
                        ];
                    case 1:
                        return [
                            2,
                            convertBlobToBase64(_state.sent())
                        ];
                }
            });
        })();
    }, "func"), elementToBase64_default = func85;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var result2 = createCanvas_default({
        contextType: "2d",
        contextAttributes: {
            willReadFrequently: !0
        }
    }), func86 = __name(function(element) {
        var type = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : "png";
        return _async_to_generator(function() {
            var canvas, context;
            return _ts_generator(this, function(_state) {
                try {
                    if (!result2) throw Error("Failed to create canvas");
                    if (canvas = result2.canvas, context = result2.context, canvas.width = element.width, canvas.height = element.height, context.drawImage(element, 0, 0, element.width, element.height), _instanceof(canvas, HTMLCanvasElement)) return [
                        2,
                        new Promise(function(resolve) {
                            canvas.toBlob(function(blob) {
                                return resolve(blob);
                            }, "image/".concat(type), 0.9);
                        })
                    ];
                    return [
                        2,
                        canvas.convertToBlob({
                            type: "image/".concat(type),
                            quality: 0.9
                        })
                    ];
                } catch (error) {
                    return console.warn("elementToBlob error:", error), [
                        2,
                        null
                    ];
                }
            });
        })();
    }, "func"), elementToBlob_default = func86;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var func87 = __name(function(url) {
        return _async_to_generator(function() {
            var response, error;
            return _ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        if (!url) throw Error("url is empty");
                        _state.label = 1;
                    case 1:
                        return _state.trys.push([
                            1,
                            4,
                            ,
                            5
                        ]), [
                            4,
                            fetch(url)
                        ];
                    case 2:
                        if (!(response = _state.sent()).ok) throw Error("Network response was not ok");
                        return [
                            4,
                            response.blob()
                        ];
                    case 3:
                        return [
                            2,
                            _state.sent()
                        ];
                    case 4:
                        throw _instanceof(error = _state.sent(), Error) ? error : Error("Failed to fetch image");
                    case 5:
                        return [
                            2
                        ];
                }
            });
        })();
    }, "func"), fetchImage_default = func87;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var func88 = __name(function(url) {
        return _async_to_generator(function() {
            return _ts_generator(this, function(_state) {
                return [
                    2,
                    new Promise(function(resolve, reject) {
                        url || reject(Error("url is empty"));
                        var elementImage = new Image();
                        elementImage.crossOrigin = "anonymous", elementImage.onload = function() {
                            resolve(elementImage);
                        }, elementImage.onerror = function(error) {
                            reject(error);
                        }, elementImage.src = url;
                    })
                ];
            });
        })();
    }, "func"), loadImage_default = func88;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var getBox = __name(function(width, height) {
        if (isNaN(width) || isNaN(height)) throw Error("width and height must be numbers");
        return {
            string: "+",
            style: "font-size: 1px; padding: ".concat(Math.floor(height / 2), "px ").concat(Math.floor(width / 2), "px;")
        };
    }, "getBox"), func89 = __name(function(url) {
        var scale = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 1;
        return new Promise(function(resolve) {
            var img2 = new Image();
            img2.onerror = function() {
                resolve(!1);
            }, img2.onload = function() {
                var width = img2.width * scale, height = img2.height * scale, dim = getBox(width, height);
                console.info("%c ".concat(dim.string), "".concat(dim.style, " background: transparent url(").concat(url, ") no-repeat center center; background-size: ").concat(width, "px ").concat(height, "px;")), resolve(!0);
            }, img2.src = url;
        });
    }, "func"), logImage_default = func89, image_default = {
        base64ToFile: base64ToFile_default,
        blobToDataImage: blobToDataImage_default,
        blobToHtmlImage: blobToHtmlImage_default,
        blobUrlToFile: blobUrlToFile_default,
        elementToBase64: elementToBase64_default,
        elementToBlob: elementToBlob_default,
        fetchImage: fetchImage_default,
        loadImage: loadImage_default,
        logImage: logImage_default
    };
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var json_default = {
        clone: clone_default,
        decode: decode_default,
        encode: encode_default
    };
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var _Mark = function() {
        function _Mark() {
            _class_call_check(this, _Mark), _define_property(this, "perf$", console);
        }
        return _create_class(_Mark, null, [
            {
                key: "inst",
                get: function get() {
                    return _Mark._inst$ || (_Mark._inst$ = new _Mark()), _Mark._inst$;
                }
            },
            {
                key: "isConsole$",
                value: function isConsole$(service) {
                    return service === console;
                }
            },
            {
                key: "isPerformance$",
                value: function isPerformance$(service) {
                    return _instanceof(service, Performance);
                }
            },
            {
                key: "isBaseService$",
                value: function isBaseService$(service) {
                    return !_Mark.isConsole$(service) && !_Mark.isPerformance$(service);
                }
            },
            {
                key: "setService",
                value: function setService(service) {
                    service && (_Mark.inst.perf$ = service);
                }
            },
            {
                key: "measure",
                value: function measure(name2) {
                    var perf = _Mark.inst.perf$;
                    _Mark.isBaseService$(perf) && perf.measure(name2);
                }
            },
            {
                key: "start",
                value: function start(name2) {
                    var perf = _Mark.inst.perf$;
                    _Mark.isConsole$(perf) ? perf.time(name2) : _Mark.isPerformance$(perf) ? perf.mark("".concat(name2, "_start")) : _Mark.isBaseService$(perf) && perf.start(name2);
                }
            },
            {
                key: "stop",
                value: function stop(name2) {
                    var perf = _Mark.inst.perf$;
                    if (_Mark.isConsole$(perf)) perf.timeEnd(name2);
                    else if (_Mark.isPerformance$(perf)) {
                        try {
                            perf.mark("".concat(name2, "_end")), perf.measure(name2, "".concat(name2, "_start"), "".concat(name2, "_end"));
                        } catch (e) {}
                        try {
                            perf.clearMarks("".concat(name2, "_start")), perf.clearMarks("".concat(name2, "_end"));
                        } catch (e) {}
                    } else _Mark.isBaseService$(perf) && perf.stop(name2);
                }
            },
            {
                key: "putMetric",
                value: function putMetric(name2, key) {
                    var value = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : Date.now(), perf = _Mark.inst.perf$;
                    _Mark.isConsole$(perf) ? perf.timeLog(name2, "".concat(key, ": ").concat(value)) : _Mark.isBaseService$(perf) && perf.putMetric(name2, key, value);
                }
            },
            {
                key: "incMetric",
                value: function incMetric(name2, key) {
                    var value = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 1, perf = _Mark.inst.perf$;
                    _Mark.isConsole$(perf) ? perf.timeLog(name2, "".concat(key, ": increment by ").concat(value)) : _Mark.isBaseService$(perf) && perf.incrementMetric(name2, key, value);
                }
            },
            {
                key: "putAttr",
                value: function putAttr(name2, key, value) {
                    var perf = _Mark.inst.perf$, correctValue = value.slice(0, 100);
                    _Mark.isConsole$(perf) ? perf.timeLog(name2, "".concat(key, ": ").concat(correctValue)) : _Mark.isBaseService$(perf) && perf.putAttr(name2, key, correctValue);
                }
            },
            {
                key: "rmAttr",
                value: function rmAttr(name2, key) {
                    var perf = _Mark.inst.perf$;
                    _Mark.isConsole$(perf) ? perf.timeLog(name2, "".concat(key, ": removed")) : _Mark.isBaseService$(perf) && perf.removeAttr(name2, key);
                }
            }
        ]), _Mark;
    }();
    __name(_Mark, "Mark"), __publicField(_Mark, "_inst$");
    var Mark = _Mark, Mark_default = Mark, mark_default = {
        Mark: Mark_default
    };
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var func90 = __name(function(value, maxLength) {
        if ("number" != typeof value) return "0";
        for(var maxNumber = __pow(10, maxLength), shortened = value, numberSuffixCount = 0; shortened >= maxNumber;)shortened = Math.floor(shortened / 1e3), numberSuffixCount++;
        var numberPrefix = shortened.toString(), numberSuffix = [
            "",
            "K",
            "M",
            "B",
            "T",
            "Qa",
            "Qi",
            "Sx",
            "Sp",
            "Oc",
            "No",
            "Dc",
            "Ud",
            "Dd",
            "Td",
            "Qad",
            "Qid",
            "Sxd",
            "Spd"
        ][numberSuffixCount];
        return "".concat(numberPrefix).concat(numberSuffix);
    }, "func"), getShortNumber_default = func90;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var padEnd = __name(function(value, maxLength) {
        for(var fillChar = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : "0", res = value.toString(), valueLength = res.length, i = 0; i < maxLength - valueLength; i++)res += fillChar;
        return res;
    }, "padEnd"), padEnd_default = padEnd;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var padStart = __name(function(value, maxLength) {
        for(var fillChar = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : "0", res = value.toString(), valueLength = res.length, i = 0; i < maxLength - valueLength; i++)res = fillChar + res;
        return res;
    }, "padStart"), padStart_default = padStart;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var func91 = __name(function(length, useNegative) {
        return Math.floor(Math.random() * length) * (useNegative ? Math.random() > 0.5 ? 1 : -1 : 1);
    }, "func"), random_default = func91;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var func92 = __name(function(num) {
        return num > 0 ? 1 : num < 0 ? -1 : 0 === num ? 0 : NaN;
    }, "func"), sign_default = func92;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var toAbbreviatedString = __name(function(value, config) {
        var _ref = config || {}, _ref_fractionalDigits = _ref.fractionalDigits, fractionalDigits = void 0 === _ref_fractionalDigits ? 0 : _ref_fractionalDigits, _ref_startAbbreviate = _ref.startAbbreviate, startAbbreviate = void 0 === _ref_startAbbreviate ? 1e3 : _ref_startAbbreviate, _ref_abbreviateStep = _ref.abbreviateStep, abbreviateStep = void 0 === _ref_abbreviateStep ? 3 : _ref_abbreviateStep, _ref_maxLength = _ref.maxLength, maxLength = void 0 === _ref_maxLength ? -1 : _ref_maxLength, _ref_removeLastZero = _ref.removeLastZero, removeLastZero = void 0 === _ref_removeLastZero || _ref_removeLastZero, _ref_suffixes = _ref.suffixes, suffixes = void 0 === _ref_suffixes ? [
            "",
            "k",
            "m",
            "b",
            "t",
            "q"
        ] : _ref_suffixes, correctMaxLength = -1 === maxLength ? 99999999 : maxLength;
        if (value >= startAbbreviate) {
            var suffixNum = Math.floor((Math.floor(value / __pow(10, abbreviateStep)).toString().length - 1) / abbreviateStep) + 1, fractionalString2 = (value / __pow(__pow(10, abbreviateStep), suffixNum)).toFixed(fractionalDigits), numberLength2 = correctMaxLength - suffixes[suffixNum].length, numberString2 = fractionalString2.substring(0, numberLength2);
            return (removeLastZero ? removeZero(numberString2) : numberString2) + suffixes[suffixNum];
        }
        var fractionalString = value.toFixed(fractionalDigits), numberLength = correctMaxLength - suffixes[0].length, numberString = fractionalString.substring(0, numberLength);
        return removeLastZero ? removeZero(numberString) : numberString + suffixes[0];
    }, "toAbbreviatedString"), removeZero = __name(function(value) {
        if (0 > value.indexOf(".")) return value;
        for(var i = value.length - 1; i >= 0; i--){
            if ("." === value[i]) return value.substring(0, i);
            if ("0" !== value[i]) return value.substring(0, i + 1);
        }
        return value;
    }, "removeZero"), toAbbreviatedString_default = toAbbreviatedString, number_default = {
        getShortNumber: getShortNumber_default,
        sign: sign_default,
        padEnd: padEnd_default,
        padStart: padStart_default,
        random: random_default,
        toAbbreviatedString: toAbbreviatedString_default
    };
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var toUpperCamelCase = __name(function(str) {
        var text = str.replace(/[-_\s.]+(.)?/g, function(_, c) {
            return c ? c.toUpperCase() : "";
        });
        return text.substring(0, 1).toUpperCase() + text.substring(1);
    }, "toUpperCamelCase"), toCamelCase = __name(function(str) {
        var text = str.replace(/[-_\s.]+(.)?/g, function(_, c) {
            return c ? c.toUpperCase() : "";
        });
        return text.substring(0, 1).toLowerCase() + text.substring(1);
    }, "toCamelCase"), func93 = __name(function(obj) {
        var newObj = {};
        for(var key in obj){
            var value = obj[key], newKey = toCamelCase(key);
            Array.isArray(value) ? newObj[newKey] = value.map(function(item) {
                return (void 0 === item ? "undefined" : _type_of(item)) === "object" ? func93(item) : item;
            }) : (void 0 === value ? "undefined" : _type_of(value)) === "object" ? newObj[newKey] = func93(value) : newObj[newKey] = obj[key];
        }
        return newObj;
    }, "func"), camelCaseKeys_default = func93;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var func94 = __name(function(x, y) {
        return x === y ? 0 !== x || 1 / x == 1 / y : x != x && y != y;
    }, "func"), is_default = func94, diffRecursive = __name(function(source, target, compared) {
        var _compared_get, _compared_get1, result3 = {};
        if (compared.has(source) && (null == (_compared_get = compared.get(source)) ? void 0 : _compared_get.has(target))) return result3;
        for(var key in compared.has(source) || compared.set(source, new WeakSet()), null == (_compared_get1 = compared.get(source)) || _compared_get1.add(target), target)if (hasOwn_default(target, key)) {
            var targetValue = void 0;
            try {
                targetValue = target[key];
            } catch (e) {
                continue;
            }
            if (hasOwn_default(source, key)) {
                var sourceValue = void 0;
                try {
                    sourceValue = source[key];
                } catch (e) {
                    result3[key] = targetValue;
                    continue;
                }
                if (isObject_default(sourceValue) && isObject_default(targetValue) && null !== sourceValue && null !== targetValue && "function" != typeof sourceValue && "functio\
n" != typeof targetValue) {
                    var diffResult = diffRecursive(sourceValue, targetValue, compared);
                    Object.keys(diffResult).length > 0 && (result3[key] = diffResult);
                } else is_default(sourceValue, targetValue) || (result3[key] = targetValue);
            } else result3[key] = targetValue;
        }
        for(var key1 in source)hasOwn_default(source, key1) && !hasOwn_default(target, key1) && (result3[key1] = void 0);
        return result3;
    }, "diffRecursive"), func95 = __name(function(source, target) {
        return diffRecursive(source, target, new WeakMap());
    }, "func"), diff_default = func95;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var func96 = __name(function(data) {
        var keys = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : [], result3 = {}, _iteratorNormalCompletion = !0, _didIteratorError = !1, _iteratorError = void 0;
        try {
            for(var _step, _iterator = Object.values(data)[Symbol.iterator](); !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = !0){
                var value = _step.value;
                for(var key in value){
                    var K = key;
                    keys.includes(K) && (result3[K] || (result3[K] = []), result3[K].push(value[K]));
                }
            }
        } catch (err) {
            _didIteratorError = !0, _iteratorError = err;
        } finally{
            try {
                _iteratorNormalCompletion || null == _iterator.return || _iterator.return();
            } finally{
                if (_didIteratorError) throw _iteratorError;
            }
        }
        return result3;
    }, "func"), dod_default2 = func96;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var func97 = __name(function(source, input) {
        var result3 = {};
        for(var key in input)if (hasOwn_default(input, key)) if (isObject_default(input[key]) && null !== input[key]) if (isObject_default(source[key]) && null !== source[key]) {
            if ("function" == typeof input[key]) continue;
            var filteredSubObject = func97(source[key], input[key]);
            Object.keys(filteredSubObject).length > 0 && (result3[key] = filteredSubObject);
        } else hasOwn_default(source, key) || (result3[key] = assign_default({}, input[key]));
        else hasOwn_default(source, key) || (result3[key] = input[key]);
        return result3;
    }, "func"), filterDeep_default = func97;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var func98 = __name(function(value, object) {
        return Object.values(object).includes(value);
    }, "func"), isIn_default = func98;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var func99 = __name(function(key) {
        return [
            "string",
            "number",
            "symbol"
        ].indexOf(void 0 === key ? "undefined" : _type_of(key)) > -1;
    }, "func"), isPropertyKey_default = func99, func100 = __name(function(array, key) {
        var result3 = {}, _iteratorNormalCompletion = !0, _didIteratorError = !1, _iteratorError = void 0;
        try {
            for(var _step, _iterator = array[Symbol.iterator](); !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = !0){
                var item = _step.value, value = item[key];
                isPropertyKey_default(value) && (result3[value] = item);
            }
        } catch (err) {
            _didIteratorError = !0, _iteratorError = err;
        } finally{
            try {
                _iteratorNormalCompletion || null == _iterator.return || _iterator.return();
            } finally{
                if (_didIteratorError) throw _iteratorError;
            }
        }
        return result3;
    }, "func"), keyBy_default = func100;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var toSnakeCase = __name(function(str) {
        return str.replace(/([a-z])([A-Z])/g, "$1_$2").replace(/\s+/g, "_").toLowerCase();
    }, "toSnakeCase"), func101 = __name(function(obj) {
        var newObj = {};
        for(var key in obj){
            var value = obj[key], newKey = toSnakeCase(key);
            Array.isArray(value) ? newObj[newKey] = value.map(function(item) {
                return (void 0 === item ? "undefined" : _type_of(item)) === "object" ? func101(item) : item;
            }) : (void 0 === value ? "undefined" : _type_of(value)) === "object" ? newObj[newKey] = func101(value) : newObj[newKey] = obj[key];
        }
        return newObj;
    }, "func"), snakeCaseKeys_default = func101;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var func102 = __name(function(object) {
        return Object.keys(object).map(function(key) {
            return object[key];
        });
    }, "func"), vals_default = func102, object_default = {
        assign: assign_default,
        camelCaseKeys: camelCaseKeys_default,
        clone: clone_default2,
        clear: clear_default,
        diff: diff_default,
        dod: dod_default2,
        hasOwn: hasOwn_default,
        invert: invert_default,
        is: is_default,
        isIn: isIn_default,
        keyBy: keyBy_default,
        merge: merge_default,
        snakeCaseKeys: snakeCaseKeys_default,
        vals: vals_default,
        filterDeep: filterDeep_default
    };
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var Signal_exports = {};
    __export(Signal_exports, {
        Signal: function Signal1() {
            return Signal;
        },
        SignalAbortedError: function SignalAbortedError1() {
            return SignalAbortedError;
        },
        SignalController: function SignalController1() {
            return SignalController;
        }
    }), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var _SignalAbortedError = function(Error1) {
        function _SignalAbortedError() {
            var _this, reason = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : "Signal aborted with no reason";
            return _class_call_check(this, _SignalAbortedError), (_this = _call_super(this, _SignalAbortedError, [
                reason
            ])).name = "SignalAbortedStopped", _this;
        }
        return _inherits(_SignalAbortedError, Error1), _SignalAbortedError;
    }(_wrap_native_super(Error));
    __name(_SignalAbortedError, "SignalAbortedError");
    var SignalAbortedError = _SignalAbortedError, _Signal = function() {
        function _Signal() {
            _class_call_check(this, _Signal), _define_property(this, "state$", {
                type: "running"
            }), _define_property(this, "callbacks$", []);
        }
        return _create_class(_Signal, [
            {
                key: "once",
                value: function once(callback) {
                    this.callbacks$.push(callback);
                }
            },
            {
                key: "off",
                value: function off(callback) {
                    this.callbacks$ = this.callbacks$.filter(function(cb) {
                        return cb !== callback;
                    });
                }
            },
            {
                key: "abort",
                value: function abort(reasonOrMessage) {
                    var realReason = this.constructReason(reasonOrMessage);
                    this.state$ = {
                        type: "stopped",
                        reason: realReason
                    };
                    var _iteratorNormalCompletion = !0, _didIteratorError = !1, _iteratorError = void 0;
                    try {
                        for(var _step, _iterator = this.callbacks$[Symbol.iterator](); !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = !0)(0, _step.value)(realReason);
                    } catch (err) {
                        _didIteratorError = !0, _iteratorError = err;
                    } finally{
                        try {
                            _iteratorNormalCompletion || null == _iterator.return || _iterator.return();
                        } finally{
                            if (_didIteratorError) throw _iteratorError;
                        }
                    }
                    this.callbacks$ = [];
                }
            },
            {
                key: "aborted",
                get: function get() {
                    return "stopped" === this.state$.type;
                }
            },
            {
                key: "reason",
                get: function get() {
                    if ("stopped" === this.state$.type) return this.state$.reason;
                }
            },
            {
                key: "wrap",
                value: function wrap(callback) {
                    if (!this.aborted) return callback;
                }
            },
            {
                key: "chain",
                value: function chain(signal) {
                    var _this = this;
                    _instanceof(signal, _Signal) ? signal.once(function(reason) {
                        return _this.abort(reason);
                    }) : signal.addEventListener("abort", function() {
                        return _this.abort(signal.reason);
                    }, {
                        once: !0
                    });
                }
            },
            {
                key: "promise",
                value: function promise() {
                    var _this = this;
                    return this.aborted ? Promise.resolve(this.reason) : new Promise(function(resolve) {
                        _this.once(function(reason) {
                            return resolve(reason);
                        });
                    });
                }
            },
            {
                key: "constructReason",
                value: function constructReason(reason) {
                    return _instanceof(reason, Error) ? reason : "string" == typeof reason ? new SignalAbortedError(reason) : new SignalAbortedError();
                }
            }
        ]), _Signal;
    }();
    __name(_Signal, "Signal");
    var Signal = _Signal, _SignalController = function() {
        function _SignalController() {
            _class_call_check(this, _SignalController), _define_property(this, "signal$", void 0);
        }
        return _create_class(_SignalController, [
            {
                key: "renew",
                value: function renew() {
                    null == (_this_signal$ = this.signal$) || _this_signal$.abort();
                    var _this_signal$, signal = new Signal();
                    return this.signal$ = signal, signal;
                }
            },
            {
                key: "abort",
                value: function abort() {
                    var _this_signal$;
                    null == (_this_signal$ = this.signal$) || _this_signal$.abort();
                }
            },
            {
                key: "promise",
                value: function promise() {
                    return void 0 === this.signal$ ? Promise.resolve(void 0) : this.signal$.promise();
                }
            }
        ]), _SignalController;
    }();
    __name(_SignalController, "SignalController");
    var SignalController = _SignalController, signal_default = Signal_exports;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var func103 = __name(function(str) {
        return str ? str[0].toUpperCase() + str.slice(1) : str;
    }, "func"), capitalize_default = func103;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), __name(fun, "fun");
    var findDuplicateSubstrings_default = fun;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var names = null, defaultName = "Anonymous", fetchNames = __name(function() {
        return _async_to_generator(function() {
            var response, data;
            return _ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return [
                            4,
                            fetch("https://randommer.io/api/Name", {
                                method: "GET",
                                headers: {
                                    "X-Api-Key": Ludex.Configs.Mockup.Profile.RandomNameApiKey,
                                    "Content-Type": "application/json"
                                },
                                body: JSON.stringify({
                                    nameType: "surname",
                                    quantity: 1e3
                                })
                            })
                        ];
                    case 1:
                        if (!(response = _state.sent()).ok) throw Error("Can't fetch names");
                        return [
                            4,
                            response.json()
                        ];
                    case 2:
                        if (!isObject_default(data = _state.sent()) || !hasOwn_default(data, "data") || !Array.isArray(data.data)) throw Error("Invalid names response");
                        return [
                            2,
                            data.data
                        ];
                }
            });
        })();
    }, "fetchNames"), func104 = __name(function() {
        return _async_to_generator(function() {
            var firstName, lastName, e;
            return _ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        if (_state.trys.push([
                            0,
                            3,
                            ,
                            4
                        ]), names) return [
                            3,
                            2
                        ];
                        return [
                            4,
                            fetchNames()
                        ];
                    case 1:
                        if (!(names = _state.sent())) throw Error("Cannot fetch names");
                        _state.label = 2;
                    case 2:
                        return firstName = names[random_default(names.length)], lastName = names[random_default(names.length)], [
                            2,
                            "".concat(firstName, " ").concat(lastName)
                        ];
                    case 3:
                        return e = _state.sent(), [
                            2,
                            defaultName
                        ];
                    case 4:
                        return [
                            2
                        ];
                }
            });
        })();
    }, "func"), generateNameAsync_default = func104;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var func105 = __name(function() {
        var radix = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 16, s = __name(function(i) {
            return Math.floor(i).toString(radix);
        }, "s");
        return s(Date.now() / 1e3) + Array(radix + 1).join(" ").replace(/./g, function() {
            return s(Math.random() * radix);
        });
    }, "func"), generateObjectId_default = func105;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var func106 = __name(function(locale2) {
        var parts = locale2 ? locale2.split("_") : [], code = parts.length > 0 ? parts[0] : "en_US";
        switch(code){
            case "id":
            case "in":
                code = "id";
        }
        return code;
    }, "func"), getLanguageCode_default = func106;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var func107 = __name(function(name2, length) {
        var nameArr = name2.split(" "), firstLastName = (nameArr.length <= 1 ? _to_consumable_array(nameArr) : [
            nameArr[0],
            nameArr.pop()
        ]).join(" "), lastIndexOfSpace = firstLastName.lastIndexOf(" ") || 0, lastIndex = lastIndexOfSpace >= 0 ? lastIndexOfSpace : length;
        return (firstLastName.length > length ? firstLastName.substring(0, lastIndex) : firstLastName).substring(0, length);
    }, "func"), getShortName_default = func107;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var func108 = __name(function(str) {
        var hash = 0;
        if (0 === str.length) return hash;
        for(var i = 0; i < str.length; i++)hash = (hash << 5) - hash + str.charCodeAt(i), hash &= hash;
        return hash;
    }, "func"), hashCode_default = func108;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var fn = __name(function(str, searchString) {
        for(var i = 0; i < searchString.length; i++)if (str[i] !== searchString[i]) return !1;
        return !0;
    }, "fn"), matchStart_default = fn;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var func109 = __name(function(value, length) {
        var pad = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : " ", count = Math.floor(length);
        if (value.length >= count) return value;
        for(var paddingLength = count - value.length, repeatedPadString = "", i = 0; i < paddingLength; i++)repeatedPadString += pad;
        return repeatedPadString.slice(0, paddingLength) + value;
    }, "func"), padStart_default2 = func109;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var func110 = __name(function(payload) {
        return Object.keys(payload).reduce(function(accumulator, key) {
            var value = payload[key];
            return void 0 !== value && accumulator.push("".concat(key, "=").concat(value)), accumulator;
        }, []).join("&");
    }, "func"), params_default = func110;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var func111 = __name(function(len, startWith) {
        var letters2 = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789*#%&!", word = "", wordLen = len;
        void 0 !== startWith && (wordLen -= startWith.length, word += startWith);
        for(var i = 0; i < wordLen; i++){
            var index = Math.floor(Math.random() * letters2.length);
            word += letters2.charAt(index);
        }
        return word;
    }, "func"), random_default2 = func111;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var letters = "0123456789ABCDEF", func112 = __name(function() {
        for(var prefix = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : "0x", color = prefix, i = 0; i < 6; i++)color += letters[Math.floor(16 * Math.random())];
        return color;
    }, "func"), randomColor_default = func112;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var func113 = __name(function(str) {
        return str.normalize("NFD").replace(/[\u0300-\u036f]/g, "").replace(/[]/g, function(m) {
            return "\u0111" === m ? "d" : "D";
        });
    }, "func"), removeDiacritics_default = func113;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), __name(generateNameUsingString, "generateNameUsingString");
    var createHash = __name(function(seed) {
        for(var hash = 0, i = 0; i < seed.length; i++)hash = (hash << 5) - hash + seed.charCodeAt(i) | 0;
        return Math.abs(hash);
    }, "createHash"), firstNames = [
        "James",
        "Mary",
        "John",
        "Patricia",
        "Robert",
        "Jennifer",
        "Michael",
        "Linda",
        "William",
        "Elizabeth",
        "David",
        "Susan",
        "Richard",
        "Jessica",
        "Joseph",
        "Sarah",
        "Thomas",
        "Karen",
        "Charles",
        "Nancy",
        "Christopher",
        "Lisa",
        "Daniel",
        "Margaret",
        "Matthew",
        "Betty",
        "Anthony",
        "Sandra",
        "Mark",
        "Ashley",
        "Donald",
        "Dorothy",
        "Steven",
        "Kimberly",
        "Paul",
        "Emily",
        "Andrew",
        "Donna",
        "Joshua",
        "Michelle",
        "Kenneth",
        "Carol",
        "Kevin",
        "Amanda",
        "Brian",
        "Melissa",
        "George",
        "Deborah"
    ], lastNames = [
        "Smith",
        "Johnson",
        "Williams",
        "Jones",
        "Brown",
        "Davis",
        "Miller",
        "Wilson",
        "Moore",
        "Taylor",
        "Anderson",
        "Thomas",
        "Jackson",
        "White",
        "Harris",
        "Martin",
        "Thompson",
        "Garcia",
        "Martinez",
        "Robinson",
        "Clark",
        "Rodriguez",
        "Lewis",
        "Lee",
        "Walker",
        "Hall",
        "Allen",
        "Young",
        "Hernandez",
        "King",
        "Wright",
        "Lopez",
        "Hill",
        "Scott",
        "Green",
        "Adams",
        "Baker",
        "Gonzalez",
        "Nelson",
        "Carter",
        "Mitchell",
        "Perez",
        "Roberts",
        "Turner",
        "Phillips",
        "Campbell",
        "Parker",
        "Evans"
    ], string_default = {
        toCamelCase: toCamelCase,
        toUpperCamelCase: toUpperCamelCase,
        capitalize: capitalize_default,
        generateObjectId: generateObjectId_default,
        getLanguageCode: getLanguageCode_default,
        getShortName: getShortName_default,
        hashCode: hashCode_default,
        matchStart: matchStart_default,
        padStart: padStart_default2,
        params: params_default,
        random: random_default2,
        randomColor: randomColor_default,
        removeDiacritics: removeDiacritics_default,
        findDuplicateSubstrings: findDuplicateSubstrings_default,
        generateNameAsync: generateNameAsync_default,
        toSnakeCase: toSnakeCase,
        generateNameUsingString: generateNameUsingString
    };
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var cutoffs = [
        60,
        3600,
        86400,
        604800,
        2592000,
        31536000,
        1 / 0
    ], units = [
        "second",
        "minute",
        "hour",
        "day",
        "week",
        "month",
        "year"
    ], func114 = __name(function(timestamp, locales, options) {
        var fallbackMessage = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : "Soon";
        try {
            var realLocales = null != locales ? locales : "en", realOptions = null != options ? options : {
                numeric: "auto"
            }, deltaSeconds = Math.round((1e3 * timestamp - Date.now()) / 1e3), positivedeltaSeconds = Math.abs(Math.round((1e3 * timestamp - Date.now()) / 1e3)), unitIndex = searchIndex_default(cutoffs, function(cutoff) {
                return cutoff > positivedeltaSeconds;
            }), divisor = unitIndex ? cutoffs[unitIndex - 1] : 1;
            return new Intl.RelativeTimeFormat(realLocales, realOptions).format(Math.floor(deltaSeconds / divisor), units[unitIndex]);
        } catch (error) {
            if (void 0 !== fallbackMessage) return "Soon";
            throw error;
        }
    }, "func"), getRelativeTime_default = func114;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var func115 = __name(function(timestamp) {
        var date = new Date(timestamp), hours = date.getUTCHours(), minutes = date.getUTCMinutes(), seconds = date.getUTCSeconds(), milliseconds = date.getUTCMilliseconds(), hoursString = hours < 10 ? "0".concat(hours) : "".concat(hours), minutesString = minutes < 10 ? "0".concat(minutes) : "".concat(minutes), secondsString = seconds < 10 ? "0".concat(seconds) : "".concat(seconds), millisecondsString = "".concat(milliseconds);
        return milliseconds < 10 ? millisecondsString = "00".concat(milliseconds) : milliseconds < 100 && (millisecondsString = "0".concat(milliseconds)), "".concat(hoursString, ":").concat(minutesString, ":").concat(secondsString, ":").concat(millisecondsString);
    }, "func"), getTimeString_default = func115;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var func116 = __name(function(timestamp) {
        var last = new Date(timestamp), today = new Date();
        return last.getDate() === today.getDate() && last.getMonth() === today.getMonth() && last.getFullYear() === today.getFullYear();
    }, "func"), isToday_default = func116;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var func117 = __name(function(milliseconds) {
        return new Promise(function(resolve) {
            return setTimeout(resolve, milliseconds);
        });
    }, "func"), sleepAsync_default = func117, time_default = {
        isToday: isToday_default,
        sleepAsync: sleepAsync_default,
        getRelativeTime: getRelativeTime_default,
        getTimeString: getTimeString_default
    };
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var func118 = __name(function(data) {
        return "boolean" == typeof data;
    }, "func"), isBoolean_default = func118;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var func119 = __name(function() {
        return !0;
    }, "func"), isDebugger_default = func119;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var func120 = __name(function(input) {
        return "function" == typeof input;
    }, "func"), isFunction_default = func120;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var func121 = __name(function(data) {
        return "number" == typeof data;
    }, "func"), isNumber_default = func121;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var func122 = __name(function(input) {
        return !!isFunction_default(input) && (!!_instanceof(input, Promise) || "then" in input && "function" == typeof input.then || "AsyncFunction" === input.constructor.name);
    }, "func"), isPromise_default = func122;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var func123 = __name(function(from, to, options) {
        var waitTimeout, waitInterval, _ref = null != options ? options : {}, _ref_timeout = _ref.timeout, timeout = void 0 === _ref_timeout ? 1e3 : _ref_timeout, _ref_checkInterval = _ref.checkInterval, checkInterval = void 0 === _ref_checkInterval ? 16 : _ref_checkInterval;
        return new Promise(function(resolve, reject) {
            if ("function" != typeof from) throw Error("Input from must be a function");
            waitInterval = setInterval(function() {
                from() === ("function" == typeof to ? to() : to) && (clearTimeout(waitTimeout), clearInterval(waitInterval), resolve(!0));
            }, checkInterval), timeout > 0 && (clearTimeout(waitTimeout), waitTimeout = setTimeout(function() {
                clearInterval(waitInterval), reject(Error("Timeout"));
            }, timeout));
        });
    }, "func"), isValueChangeAsync_default = func123, valid_default = {
        isBoolean: isBoolean_default,
        isDebugger: isDebugger_default,
        isEmpty: isEmpty_default,
        isFalsy: isFalsy_default,
        isFunction: isFunction_default,
        isNumber: isNumber_default,
        isObject: isObject_default,
        isPromise: isPromise_default,
        isPropertyKey: isPropertyKey_default,
        isString: isString_default,
        isValueChangeAsync: isValueChangeAsync_default
    }, Utils = {
        Array: array_default,
        Browser: browser_default,
        Decorator: decorator_default,
        Device: device_default,
        Function: function_default,
        Hash: hash_default,
        Image: image_default,
        Json: json_default,
        Mark: mark_default.Mark,
        Object: object_default,
        Signal: signal_default,
        String: string_default,
        Number: number_default,
        Time: time_default,
        Valid: valid_default,
        Error: error_default
    }, utils_default = Utils;
    console.groupCollapsed("\uD83E\uDDEC Ludex initiation");
    var Ludex2 = Object.preventExtensions({
        Dtos: {},
        Utils: Object.freeze(utils_default),
        Match: Object.freeze({
            Modes: Object.freeze(MatchModes_default2)
        }),
        Events: Object.freeze(CoreEvents_default),
        Configs: Object.seal(define_GAME_CONFIG_default),
        Plugins: Object.seal({
            Ads: null,
            Audio: null,
            Analytics: null
        })
    });
    window.Ludex = Ludex2, window.TypeGuard = type_guard_default, window.GameName = "Save The Pets", window.CommitId = "477c8ee9-ef6a42bd", window.BuildVersion = 4, console.warn("Env mode:", "development"), console.warn("Debugger:", Ludex2.Utils.Valid.isDebugger()), console.warn("DevIds:", Ludex2.Configs.Debugger.ListPlayerDevIds), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var _Ludex_Utils = Ludex.Utils, V = _Ludex_Utils.Valid, O = _Ludex_Utils.Object, S = _Ludex_Utils.String, J = _Ludex_Utils.Json, MESSAGE_INVALID = "is invalid", DtosData = {}, _BaseDtos = function() {
        function _BaseDtos(data) {
            _class_call_check(this, _BaseDtos), this.processData$(data);
        }
        return _create_class(_BaseDtos, [
            {
                key: "getSelf$",
                value: function getSelf$() {
                    return this.constructor;
                }
            },
            {
                key: "processData$",
                value: function processData$(data) {
                    V.isObject(data) || this.exception$("input data", "is not an object");
                    var defaults = this.getSelf$().getDefaults(), finalData = O.merge(defaults, data);
                    this.processNestedDtos$(finalData), this.validateStructure$(finalData), this.validateData$(finalData), this.setupData$(finalData);
                }
            },
            {
                key: "processNestedDtos$",
                value: function processNestedDtos$(_data) {}
            },
            {
                key: "lazyValidateStructure$",
                value: function lazyValidateStructure$(data) {
                    V.isObject(data) || this.exception$("structure", "is not an object");
                    var keys = this.getKeys$(), dataKeys = Object.keys(data), self2 = this.getSelf$(), name2 = self2.getName$();
                    if (!self2.loose[name2]) {
                        var extraKeys = dataKeys.filter(function(key) {
                            return !keys.includes(key);
                        });
                        if (extraKeys.length > 0 && V.isObject(data)) {
                            var _iteratorNormalCompletion = !0, _didIteratorError = !1, _iteratorError = void 0;
                            try {
                                for(var _step, _iterator = extraKeys[Symbol.iterator](); !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = !0){
                                    var key = _step.value;
                                    O.assign(data, _define_property({}, key, null));
                                }
                            } catch (err) {
                                _didIteratorError = !0, _iteratorError = err;
                            } finally{
                                try {
                                    _iteratorNormalCompletion || null == _iterator.return || _iterator.return();
                                } finally{
                                    if (_didIteratorError) throw _iteratorError;
                                }
                            }
                        }
                    }
                    var _iteratorNormalCompletion1 = !0, _didIteratorError1 = !1, _iteratorError1 = void 0;
                    try {
                        for(var _step1, _iterator1 = keys[Symbol.iterator](); !(_iteratorNormalCompletion1 = (_step1 = _iterator1.next()).done); _iteratorNormalCompletion1 = !0){
                            var key1 = _step1.value;
                            O.hasOwn(data, key1) || this.exception$("structure", "is missing key: ".concat(key1));
                        }
                    } catch (err) {
                        _didIteratorError1 = !0, _iteratorError1 = err;
                    } finally{
                        try {
                            _iteratorNormalCompletion1 || null == _iterator1.return || _iterator1.return();
                        } finally{
                            if (_didIteratorError1) throw _iteratorError1;
                        }
                    }
                }
            },
            {
                key: "lazyValidateData$",
                value: function lazyValidateData$(data) {
                    var self2 = this.getSelf$(), name2 = self2.getName$(), _iteratorNormalCompletion = !0, _didIteratorError = !1, _iteratorError = void 0;
                    try {
                        for(var _step, _iterator = this.getKeys$()[Symbol.iterator](); !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = !0){
                            var key = _step.value, value = data[key], corrKey = S.removeDiacritics(key).replace(/[^a-zA-Z0-9]/g, ""), validate = this["validate".concat(S.capitalize(corrKey))];
                            if ("function" == typeof validate) try {
                                validate.call(this, value);
                            } catch (error) {
                                if (!self2.loose[name2]) throw error;
                                var _DtosData_name2, defaultValue = null == (_DtosData_name2 = DtosData[name2]) ? void 0 : _DtosData_name2[key];
                                void 0 !== defaultValue && (data[key] = J.clone(defaultValue));
                            }
                            else self2.loose[name2] || this.exception$("validator", "is missing for key '".concat(key, "'"));
                        }
                    } catch (err) {
                        _didIteratorError = !0, _iteratorError = err;
                    } finally{
                        try {
                            _iteratorNormalCompletion || null == _iterator.return || _iterator.return();
                        } finally{
                            if (_didIteratorError) throw _iteratorError;
                        }
                    }
                }
            },
            {
                key: "lazySetupData$",
                value: function lazySetupData$(data) {
                    var _iteratorNormalCompletion = !0, _didIteratorError = !1, _iteratorError = void 0;
                    try {
                        for(var _step, _iterator = this.getKeys$()[Symbol.iterator](); !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = !0){
                            var key = _step.value;
                            O.assign(this, _define_property({}, key, data[key]));
                        }
                    } catch (err) {
                        _didIteratorError = !0, _iteratorError = err;
                    } finally{
                        try {
                            _iteratorNormalCompletion || null == _iterator.return || _iterator.return();
                        } finally{
                            if (_didIteratorError) throw _iteratorError;
                        }
                    }
                }
            },
            {
                key: "exception$",
                value: function exception$(key, message) {
                    var name2 = this.getSelf$().getName$();
                    throw Error("".concat(name2, ": ").concat(key, " ").concat(message));
                }
            },
            {
                key: "toObject",
                value: function toObject() {
                    var result3 = {}, _iteratorNormalCompletion = !0, _didIteratorError = !1, _iteratorError = void 0;
                    try {
                        for(var _step, _iterator = this.getKeys$()[Symbol.iterator](); !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = !0){
                            var key = _step.value;
                            result3[key] = this[key];
                        }
                    } catch (err) {
                        _didIteratorError = !0, _iteratorError = err;
                    } finally{
                        try {
                            _iteratorNormalCompletion || null == _iterator.return || _iterator.return();
                        } finally{
                            if (_didIteratorError) throw _iteratorError;
                        }
                    }
                    return result3;
                }
            },
            {
                key: "getKeys$",
                value: function getKeys$() {
                    var defaults = DtosData[this.getSelf$().getName$()];
                    return V.isObject(defaults) ? Object.keys(defaults) : [];
                }
            }
        ], [
            {
                key: "getName$",
                value: function getName$() {
                    var _BaseDtos_name, rawName = Object.getOwnPropertyNames(_BaseDtos.prototype).join("");
                    return "string" != typeof rawName ? null != (_BaseDtos_name = _BaseDtos.name) ? _BaseDtos_name : "unknown" : rawName.replaceAll("validate", "").replaceAll("constructor", "").replaceAll("toObject", "");
                }
            },
            {
                key: "addDefaults",
                value: function addDefaults(data) {
                    V.isObject(data) || _BaseDtos.prototype.exception$("default data", MESSAGE_INVALID);
                    var clonedData = J.clone(data), name2 = _BaseDtos.getName$();
                    V.isObject(DtosData[name2]) || (DtosData[name2] = {});
                    var existingDefaults = DtosData[name2];
                    DtosData[name2] = O.merge(existingDefaults, clonedData);
                }
            },
            {
                key: "getDefaults",
                value: function getDefaults() {
                    var _J_clone, name2 = _BaseDtos.getName$();
                    return null != (_J_clone = J.clone(DtosData[name2])) ? _J_clone : {};
                }
            },
            {
                key: "addValidator",
                value: function addValidator(key, func124) {
                    V.isString(key) || _BaseDtos.prototype.exception$("validate key", MESSAGE_INVALID), "function" != typeof func124 && _BaseDtos.prototype.exception$("validate function", MESSAGE_INVALID);
                    var name2 = _BaseDtos.getName$(), existData = DtosData[name2], existLoose = _BaseDtos.loose[name2];
                    O.assign(_BaseDtos.loose, _define_property({}, name2, null)), O.assign(DtosData, _define_property({}, name2, null));
                    var funcName = "validate".concat(S.capitalize(key));
                    O.assign(_BaseDtos.prototype, _define_property({}, funcName, func124)), name2 = _BaseDtos.getName$(), _BaseDtos.loose[name2] = existLoose, DtosData[name2] = existData;
                }
            },
            {
                key: "makeStrict",
                value: function makeStrict() {
                    var name2 = _BaseDtos.getName$();
                    _BaseDtos.loose[name2] = !1;
                }
            },
            {
                key: "makeLoose",
                value: function makeLoose() {
                    var name2 = _BaseDtos.getName$();
                    _BaseDtos.loose[name2] = !0;
                }
            }
        ]), _BaseDtos;
    }();
    __name(_BaseDtos, "BaseDtos"), __publicField(_BaseDtos, "loose", {});
    var BaseDtos = _BaseDtos, BaseDtos_default = BaseDtos;
    Ludex.Dtos = {
        Base: BaseDtos_default
    }, init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var _Plugins = function() {
        function _Plugins(codex2) {
            _class_call_check(this, _Plugins), _define_property(this, "codex", void 0), _define_property(this, "plugins$", void 0), this.codex = codex2, this.plugins$ = {};
        }
        return _create_class(_Plugins, [
            {
                key: "install",
                value: function install(name2, plugin, mapping, property) {
                    if ("function" != typeof plugin) return console.warn("Plugin install:", "".concat(name2, " plugin is disabled (").concat(property, ")")), !1;
                    var pluginInstance = new plugin(this.codex);
                    return this.plugins$[name2] = pluginInstance, mapping && Object.defineProperty(this.codex, property, {
                        get: __name(function() {
                            return pluginInstance;
                        }, "get")
                    }), pluginInstance.init(), console.debug("Plugin install:", "".concat(name2, " plugin is installed (").concat(property, ")")), !0;
                }
            },
            {
                key: "get",
                value: function get(name2) {
                    return this.plugins$[name2];
                }
            }
        ]), _Plugins;
    }();
    __name(_Plugins, "Plugins");
    var Plugins = _Plugins, plugins_default = Plugins;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var _BasePlugin = function() {
        function _BasePlugin(codex2) {
            _class_call_check(this, _BasePlugin), _define_property(this, "codex", void 0), this.codex = codex2;
        }
        return _create_class(_BasePlugin, [
            {
                key: "init",
                value: function init() {}
            }
        ]), _BasePlugin;
    }();
    __name(_BasePlugin, "BasePlugin");
    var BasePlugin = _BasePlugin, base_default = BasePlugin, _Game = function() {
        function _Game() {
            _class_call_check(this, _Game), _define_property(this, "codex", void 0), _define_property(this, "plugins", void 0), _define_property(this, "ads", void 0), _define_property(this, "auth", void 0), _define_property(this, "audio", void 0), _define_property(this, "event", void 0), _define_property(this, "match", void 0), _define_property(this, "player", void 0), _define_property(this, "profile", void 0), _define_property(this, "context", void 0), _define_property(this, "storage", void 0), _define_property(this, "language", void 0), _define_property(this, "missions", void 0), _define_property(this, "analytics", void 0), _define_property(this, "visibility", void 0), _define_property(this, "leaderboard", void 0), _define_property(this, "dailyRewards", void 0), _define_property(this, "remoteConfig", void 0), _define_property(this, "frameCapture", void 0), _define_property(this, "firebase", void 0), _define_property(this, "monitorError", void 0), _define_property(this, "adaptivePerformance", void 0), _define_property(this, "inputRecorder", void 0), _define_property(this, "console", void 0), _define_property(this, "profiler", void 0), _define_property(this, "canvasRecorder", void 0), this.codex = this, this.plugins = new plugins_default(this.codex);
        }
        return _create_class(_Game, [
            {
                key: "boot",
                value: function boot() {
                    return _async_to_generator(function() {
                        return _ts_generator(this, function(_state) {
                            return [
                                2
                            ];
                        });
                    })();
                }
            },
            {
                key: "start",
                value: function start() {
                    return _async_to_generator(function() {
                        return _ts_generator(this, function(_state) {
                            return [
                                2
                            ];
                        });
                    })();
                }
            },
            {
                key: "getBuildVersion",
                value: function getBuildVersion() {
                    return 0;
                }
            }
        ]), _Game;
    }();
    __name(_Game, "Game");
    var Game = _Game;
    window.Ludex.Plugins = {
        BasePlugin: base_default
    };
    var codex_default = Game;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var _BadRequest = function(Error1) {
        function _BadRequest(message, payload) {
            var _this;
            return _class_call_check(this, _BadRequest), _define_property(_this = _call_super(this, _BadRequest, [
                message
            ]), "payload", void 0), _this.name = "BadRequest", _this.message = null != message ? message : "This request is bad", _this.payload = payload, _this;
        }
        return _inherits(_BadRequest, Error1), _BadRequest;
    }(_wrap_native_super(Error));
    __name(_BadRequest, "BadRequest");
    var BadRequest = _BadRequest, BadRequest_default = BadRequest;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var _RequestTimeout = function(Error1) {
        function _RequestTimeout(message, payload) {
            var _this;
            return _class_call_check(this, _RequestTimeout), _define_property(_this = _call_super(this, _RequestTimeout, [
                message
            ]), "payload", void 0), _this.name = "RequestTimeout", _this.message = null != message ? message : "This request is timeout", _this.payload = payload, _this;
        }
        return _inherits(_RequestTimeout, Error1), _RequestTimeout;
    }(_wrap_native_super(Error));
    __name(_RequestTimeout, "RequestTimeout");
    var RequestTimeout = _RequestTimeout, RequestTimeout_default = RequestTimeout, _Ludex_Utils1 = Ludex.Utils, V2 = _Ludex_Utils1.Valid, T = _Ludex_Utils1.Time, _Ludex_Configs = Ludex.Configs, AppId = _Ludex_Configs.AppId, Network = _Ludex_Configs.Network, validateResponse = __name(function(response) {
        if (!response.ok) throw new BadRequest_default(void 0, {
            response: response
        });
    }, "validateResponse"), defaultConfig = __name(function() {
        var _codex_auth, token = null == (_codex_auth = codex.auth) ? void 0 : _codex_auth.getToken();
        return {
            token: token,
            timeout: Network.Timeout,
            headers: {
                Authorization: "Bearer ".concat(token),
                "Content-Type": "application/json"
            }
        };
    }, "defaultConfig"), requester = __name(function(host, url, config, data) {
        return function() {
            return _async_to_generator(function() {
                var fullUrl, controller, timeout, response, error;
                return _ts_generator(this, function(_state) {
                    switch(_state.label){
                        case 0:
                            if (_state.trys.push([
                                0,
                                3,
                                ,
                                4
                            ]), !AppId) throw new BadRequest_default("AppId is not defined");
                            return fullUrl = "".concat(host, "/apps/").concat(AppId, "/").concat(url), config.signal = (controller = new AbortController()).signal, timeout = setTimeout(function() {
                                controller.abort();
                            }, config.timeout), V2.isObject(data) && (config.body = JSON.stringify(data)), [
                                4,
                                fetch(fullUrl, config)
                            ];
                        case 1:
                            return response = _state.sent(), clearTimeout(timeout), validateResponse(response), [
                                4,
                                response.json()
                            ];
                        case 2:
                            return [
                                2,
                                _state.sent() || {}
                            ];
                        case 3:
                            if (_instanceof(error = _state.sent(), BadRequest_default)) return [
                                2,
                                null
                            ];
                            if (_instanceof(error, Object) && "name" in error && "AbortError" === error.name) throw new RequestTimeout_default();
                            throw error;
                        case 4:
                            return [
                                2
                            ];
                    }
                });
            })();
        };
    }, "requester"), handleRequest = __name(function(asyncFunc, retry) {
        return _async_to_generator(function() {
            var error, e;
            return _ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return _state.trys.push([
                            0,
                            1,
                            ,
                            7
                        ]), [
                            2,
                            asyncFunc()
                        ];
                    case 1:
                        if (!(_instanceof(error = _state.sent(), RequestTimeout_default) && retry > 0)) return [
                            3,
                            6
                        ];
                        _state.label = 2;
                    case 2:
                        return _state.trys.push([
                            2,
                            5,
                            ,
                            6
                        ]), [
                            4,
                            T.sleepAsync(600)
                        ];
                    case 3:
                        return _state.sent(), [
                            4,
                            handleRequest(asyncFunc, retry - 1)
                        ];
                    case 4:
                        return [
                            2,
                            _state.sent()
                        ];
                    case 5:
                        return e = _state.sent(), [
                            2,
                            {}
                        ];
                    case 6:
                        if (_instanceof(error, RequestTimeout_default)) return [
                            2,
                            {}
                        ];
                        return console.warn("Request error", error), [
                            2,
                            {}
                        ];
                    case 7:
                        return [
                            2
                        ];
                }
            });
        })();
    }, "handleRequest"), get = __name(function(url, configs, host) {
        var retry = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : Network.Retries;
        return _async_to_generator(function() {
            return _ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return _state.trys.push([
                            0,
                            2,
                            ,
                            3
                        ]), [
                            4,
                            handleRequest(requester(host, url, __spreadProps(__spreadValues(__spreadValues({}, defaultConfig()), configs), {
                                method: "GET"
                            })), retry)
                        ];
                    case 1:
                        return [
                            2,
                            _state.sent()
                        ];
                    case 2:
                        return console.warn("Get error", _state.sent()), [
                            2,
                            {}
                        ];
                    case 3:
                        return [
                            2
                        ];
                }
            });
        })();
    }, "get"), post = __name(function(url, data, configs, host) {
        var retry = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : Network.Retries;
        return _async_to_generator(function() {
            return _ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return _state.trys.push([
                            0,
                            2,
                            ,
                            3
                        ]), [
                            4,
                            handleRequest(requester(host, url, __spreadProps(__spreadValues(__spreadValues({}, defaultConfig()), configs), {
                                method: "POST"
                            }), data), retry)
                        ];
                    case 1:
                        return [
                            2,
                            _state.sent()
                        ];
                    case 2:
                        return console.warn("Post error", _state.sent()), [
                            2,
                            {}
                        ];
                    case 3:
                        return [
                            2
                        ];
                }
            });
        })();
    }, "post"), _Ludex_Configs1 = Ludex.Configs, ApiUrl = _Ludex_Configs1.Notification.ApiUrl, _Ludex_Utils2 = Ludex.Utils, O2 = _Ludex_Utils2.Object, updatePlayerProfileNotificationAsync = __name(function(payload) {
        return _async_to_generator(function() {
            var playerId2;
            return _ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        if (!O2.hasOwn(payload, "playerId")) throw Error("Missing playerId");
                        return playerId2 = payload.playerId, [
                            4,
                            post("players/".concat(playerId2), payload, {}, ApiUrl, 10)
                        ];
                    case 1:
                        return _state.sent(), [
                            2
                        ];
                }
            });
        })();
    }, "updatePlayerProfileNotificationAsync");
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var PlayerDataKeys = {
        score: "score",
        settings: "settings",
        isFirstLogin: "isFirstLogin",
        gameData: "gameData",
        missionsData: "missionsData",
        notificationData: "notificationData",
        dailyRewardedData: "dailyRewardedData",
        lastCallSwitchGame: "lastCallSwitchGame",
        remoteConfig: "remoteConfig"
    }, PlayerDataKeys_default = PlayerDataKeys;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var initState = {
        ASID: null,
        playerId: "0000",
        name: "Guest",
        photo: "",
        locale: "en_US",
        connectedPlayers: {},
        data: {
            score: 0,
            isFirstLogin: !0,
            settings: {
                sound: !0,
                music: !0,
                vibrate: !0,
                language: "en"
            },
            gameData: {
                coins: 0,
                level: 1
            },
            notificationData: {
                D1: {
                    arrivalDate: 0
                },
                D2: {
                    arrivalDate: 0
                },
                D3: {
                    arrivalDate: 0
                },
                D4: {
                    arrivalDate: 0
                },
                D5: {
                    arrivalDate: 0
                },
                D6: {
                    arrivalDate: 0
                },
                D7: {
                    arrivalDate: 0
                }
            },
            missionsData: {
                process: {}
            },
            dailyRewardedData: {
                logDays: [],
                firstReward: 0,
                lastReward: 0
            },
            lastCallSwitchGame: 0
        }
    }, state_default = initState, _Ludex_Utils3 = Ludex.Utils, V3 = _Ludex_Utils3.Valid, playerId = state_default.playerId, name = state_default.name, photo = state_default.photo, locale = state_default.locale, MESSAGE_INVALID2 = "is invalid", _PlayerInfoDtos = function(BaseDtos_default) {
        function _PlayerInfoDtos() {
            return _class_call_check(this, _PlayerInfoDtos), _call_super(this, _PlayerInfoDtos, arguments);
        }
        return _inherits(_PlayerInfoDtos, BaseDtos_default), _create_class(_PlayerInfoDtos, [
            {
                key: "setupData$",
                value: function setupData$(data) {
                    this.lazySetupData$(data);
                }
            },
            {
                key: "validateStructure$",
                value: function validateStructure$(data) {
                    this.lazyValidateStructure$(data);
                }
            },
            {
                key: "validateData$",
                value: function validateData$(data) {
                    this.lazyValidateData$(data);
                }
            },
            {
                key: "validateId",
                value: function validateId(_id) {
                    V3.isString(_id) && _id || this.exception$("_id", MESSAGE_INVALID2);
                }
            },
            {
                key: "validatePlayerId",
                value: function validatePlayerId(playerId2) {
                    V3.isString(playerId2) && playerId2 || this.exception$("playerId", MESSAGE_INVALID2);
                }
            },
            {
                key: "validateName",
                value: function validateName(name2) {
                    V3.isString(name2) && name2 || this.exception$("name", MESSAGE_INVALID2);
                }
            },
            {
                key: "validatePhoto",
                value: function validatePhoto(photo2) {
                    V3.isString(photo2) || this.exception$("photo", MESSAGE_INVALID2);
                }
            },
            {
                key: "validateLocale",
                value: function validateLocale(locale2) {
                    V3.isString(locale2) && locale2 || this.exception$("locale", MESSAGE_INVALID2);
                }
            },
            {
                key: "toObject",
                value: function toObject() {
                    return _get(_get_prototype_of(_PlayerInfoDtos.prototype), "toObject", this).call(this);
                }
            }
        ]), _PlayerInfoDtos;
    }(BaseDtos_default);
    __name(_PlayerInfoDtos, "PlayerInfoDtos");
    var PlayerInfoDtos = _PlayerInfoDtos;
    PlayerInfoDtos.addDefaults({
        playerId: playerId,
        name: name,
        photo: photo,
        locale: locale
    });
    var PlayerInfo_default = PlayerInfoDtos, SampleOpponent = new PlayerInfo_default({
        playerId: "10",
        name: "Your Friend"
    }).toObject(), SampleOpponent_default = SampleOpponent;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var _ACreateMatchFailed = function(Error1) {
        function _ACreateMatchFailed(message) {
            var _this;
            return _class_call_check(this, _ACreateMatchFailed), _define_property(_this = _call_super(this, _ACreateMatchFailed, [
                message
            ]), "code", void 0), _this.code = "CREATE_MATCH_FAILED", _this;
        }
        return _inherits(_ACreateMatchFailed, Error1), _ACreateMatchFailed;
    }(_wrap_native_super(Error));
    __name(_ACreateMatchFailed, "ACreateMatchFailed");
    var ACreateMatchFailed = _ACreateMatchFailed, ACreateMatchFailed_default = ACreateMatchFailed, _PlayerIdNotValid = function(ACreateMatchFailed_default) {
        function _PlayerIdNotValid(message) {
            var _this;
            return _class_call_check(this, _PlayerIdNotValid), (_this = _call_super(this, _PlayerIdNotValid, [
                message
            ])).name = "PlayerIdNotValid", _this.message = null != message ? message : "Player id is not valid", _this;
        }
        return _inherits(_PlayerIdNotValid, ACreateMatchFailed_default), _PlayerIdNotValid;
    }(ACreateMatchFailed_default);
    __name(_PlayerIdNotValid, "PlayerIdNotValid");
    var PlayerIdNotValid = _PlayerIdNotValid, PlayerIdNotValid_default = PlayerIdNotValid, Dtos = Ludex.Dtos, _Ludex_Utils4 = Ludex.Utils, A = _Ludex_Utils4.Array, O3 = _Ludex_Utils4.Object, J2 = _Ludex_Utils4.Json, V4 = _Ludex_Utils4.Valid, Events = Ludex.Events, _Ludex_Configs2 = Ludex.Configs, Context2 = _Ludex_Configs2.Context, Player2 = _Ludex_Configs2.Player, _StateInitiator = function _StateInitiator(codex2) {
        var _this = this;
        _class_call_check(this, _StateInitiator), _define_property(this, "codex$", void 0), _define_property(this, "initContext", __name(function() {
            if (Context2.Enabled) {
                var _GameSDK_context_getID, rawData = {
                    contextId: null != (_GameSDK_context_getID = GameSDK.context.getID()) ? _GameSDK_context_getID : "",
                    contextType: GameSDK.context.getType(),
                    entryPointData: GameSDK.getEntryPointData()
                }, context = new Dtos.Context.Info(rawData), _context_toObject = context.toObject(), contextId2 = _context_toObject.contextId, contextType2 = _context_toObject.contextType, entryPointData2 = _context_toObject.entryPointData;
                console.debug("contextInfo", J2.clone(context)), _this.codex$.context.receiveContext(contextId2, contextType2, entryPointData2);
            }
        }, "initContext")), _define_property(this, "initPlayer", __name(function() {
            return _async_to_generator(function() {
                var player, playerInfo, dataKeys, rawData, playerData;
                return _ts_generator(this, function(_state) {
                    switch(_state.label){
                        case 0:
                            if (_state.trys.push([
                                0,
                                2,
                                3,
                                4
                            ]), !Player2.Enabled) return [
                                2
                            ];
                            return player = this.codex$.player, playerInfo = this.getPlayerInfo$(), console.debug("playerInfo", J2.clone(playerInfo)), console.debug("dataKeys", dataKeys = A.unique(O3.vals(PlayerDataKeys_default))), [
                                4,
                                GameSDK.player.getDataAsync(dataKeys)
                            ];
                        case 1:
                            return rawData = _state.sent(), console.debug("rawData", J2.clone(rawData)), playerData = new Dtos.Player.Data(rawData).toObject(), console.debug("playerData", J2.clone(playerData)), player.receiveData(playerInfo, playerData), [
                                3,
                                4
                            ];
                        case 2:
                            return console.warn("StateInitiator.initPlayer", _state.sent()), [
                                3,
                                4
                            ];
                        case 3:
                            return this.codex$.event.emit(Events.PLAYER_INFO_LOADED), [
                                7
                            ];
                        case 4:
                            return [
                                2
                            ];
                    }
                });
            }).call(_this);
        }, "initPlayer")), _define_property(this, "getPlayerInfo$", __name(function() {
            try {
                var playerId2 = GameSDK.player.getID(), playerName = GameSDK.player.getName(), playerPhoto = GameSDK.player.getPhoto(), playerLocale = GameSDK.getLocale();
                if (!V4.isString(playerId2)) throw new PlayerIdNotValid_default();
                return V4.isString(playerName) || (playerName = "You"), V4.isString(playerLocale) && playerLocale || (playerLocale = "en"), new Dtos.Player.Info({
                    playerId: playerId2,
                    name: playerName,
                    photo: playerPhoto,
                    locale: playerLocale
                }).toObject();
            } catch (error) {
                return console.warn("StateInitiator.getPlayerInfo", error), SampleOpponent_default;
            }
        }, "getPlayerInfo$")), this.codex$ = codex2;
    };
    __name(_StateInitiator, "StateInitiator");
    var StateInitiator = _StateInitiator, StateInitiator_default = StateInitiator;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var AdStatus = function(AdStatus2) {
        return AdStatus2.IDLE = "idle", AdStatus2.LOADING = "loading", AdStatus2.FILLED = "filled", AdStatus2.SHOWING = "showing", AdStatus2;
    }(AdStatus || {}), AdsStatus_default = AdStatus;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var Types = function(Types3) {
        return Types3.BANNER = "banner", Types3.INTERSTITIAL = "interstitial", Types3.REWARDED_VIDEO = "rewarded_video", Types3.REWARDED_INTERSTITIAL = "rewarded_interstitial", Types3;
    }(Types || {}), AdsTypes_default = Types;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var _AdError = function(Error1) {
        function _AdError(code, message) {
            var _this;
            return _class_call_check(this, _AdError), _define_property(_this = _call_super(this, _AdError, [
                message
            ]), "code", void 0), _this.code = code, _this.message = message, _this;
        }
        return _inherits(_AdError, Error1), _AdError;
    }(_wrap_native_super(Error));
    __name(_AdError, "AdError");
    var AdError = _AdError, AdError_default = AdError;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var _BaseInstance = function() {
        function _BaseInstance(type, placementId) {
            _class_call_check(this, _BaseInstance), _define_property(this, "type", void 0), _define_property(this, "service", void 0), _define_property(this, "placementId", void 0), _define_property(this, "status$", void 0), this.type = type, this.status$ = AdsStatus_default.IDLE, this.placementId = placementId;
        }
        return _create_class(_BaseInstance, [
            {
                key: "setStatus",
                value: function setStatus(status) {
                    this.status$ !== status && (this.status$ = status);
                }
            },
            {
                key: "status",
                get: function get() {
                    return this.status$;
                }
            },
            {
                key: "exception$",
                value: function exception$(message) {
                    throw new AdError_default("AD_INSTANCE_ERROR", message);
                }
            }
        ]), _BaseInstance;
    }();
    __name(_BaseInstance, "BaseInstance");
    var BaseInstance = _BaseInstance, BaseInstance_default = BaseInstance, _AdInstance2 = function(BaseInstance_default) {
        function _AdInstance2() {
            return _class_call_check(this, _AdInstance2), _call_super(this, _AdInstance2, arguments);
        }
        return _inherits(_AdInstance2, BaseInstance_default), _create_class(_AdInstance2, [
            {
                key: "loadAsync",
                value: function loadAsync() {
                    this.exception$("This method is not implemented");
                }
            },
            {
                key: "showAsync",
                value: function showAsync() {
                    this.exception$("This method is not implemented");
                }
            },
            {
                key: "hideAsync",
                value: function hideAsync() {
                    this.exception$("Unsupported method");
                }
            }
        ]), _AdInstance2;
    }(BaseInstance_default);
    __name(_AdInstance2, "AdInstance");
    var AdInstance2 = _AdInstance2, AdInstance_default2 = AdInstance2;
    Ludex.Plugins.Ads = {
        Types: AdsTypes_default,
        Status: AdsStatus_default,
        AdError: AdError_default,
        AdInstance: AdInstance_default2
    };
    var _Ludex_Utils5 = Ludex.Utils, A2 = _Ludex_Utils5.Array, O4 = _Ludex_Utils5.Object, F = _Ludex_Utils5.Function, D = _Ludex_Utils5.Device, _AdsPlugin = function(_Ludex_Plugins_BasePlugin) {
        function _AdsPlugin() {
            var _this;
            return _class_call_check(this, _AdsPlugin), _this = _call_super(this, _AdsPlugin, arguments), _define_property(_this, "enabled", void 0), _define_property(_this, "config$", void 0), _define_property(_this, "deviceOS$", void 0), _define_property(_this, "lastCallAdShownTime$", void 0), _define_property(_this, "isAdFullSizeShowed$", void 0), _define_property(_this, "ads$", {}), _define_property(_this, "safeAreaBottom$", void 0), _define_property(_this, "degradationTracking$", {
                failedAttempts: 0,
                lastSuccessTime: 0
            }), _this;
        }
        return _inherits(_AdsPlugin, _Ludex_Plugins_BasePlugin), _create_class(_AdsPlugin, [
            {
                key: "getAdsInstances",
                value: function getAdsInstances() {
                    return this.ads$;
                }
            },
            {
                key: "getDeviceOS",
                value: function getDeviceOS() {
                    return this.deviceOS$;
                }
            },
            {
                key: "getDegradationTracking",
                value: function getDegradationTracking() {
                    return this.degradationTracking$;
                }
            },
            {
                key: "getLastCallAdShownTime",
                value: function getLastCallAdShownTime() {
                    return this.lastCallAdShownTime$;
                }
            },
            {
                key: "init",
                value: function init() {
                    var _obj, now = Date.now() / 1e3;
                    this.deviceOS$ = this.getDeviceFromPlatform$(), this.lastCallAdShownTime$ = (_define_property(_obj = {}, AdsTypes_default.BANNER, now), _define_property(_obj, AdsTypes_default.INTERSTITIAL, now), _define_property(_obj, AdsTypes_default.REWARDED_VIDEO, now), _define_property(_obj, AdsTypes_default.REWARDED_INTERSTITIAL, now), _obj), this.isAdFullSizeShowed$ = !1, this.resetDegradationTracking$(), this.safeAreaBottom$ = D.getSafeAreaBottom();
                }
            },
            {
                key: "getDeviceFromPlatform$",
                value: function getDeviceFromPlatform$() {
                    var platform = GameSDK.getPlatform();
                    return "IOS" === platform ? "ios" : "WEB" === platform ? "desktop" : "ANDROID" === platform ? "android" : D.isIOS() ? "ios" : D.isAndroid() ? "android" : D.isDesktop() ? "desktop" : "default";
                }
            },
            {
                key: "configure",
                value: function configure(config) {
                    this.config$ = config, this.enabled = this.config$.Enabled;
                }
            },
            {
                key: "checkEnabled$",
                value: function checkEnabled$() {
                    if (!this.enabled) throw new AdError_default("ADS_NOT_ENABLED", "Ads is't enabled");
                }
            },
            {
                key: "isAdFullSizeShowing",
                value: function isAdFullSizeShowing() {
                    return this.isAdFullSizeShowed$;
                }
            },
            {
                key: "setAdInstance",
                value: function setAdInstance(type, placementId, adInstance, deviceOS) {
                    var _this = this;
                    if (deviceOS === this.deviceOS$ || "default" === deviceOS) {
                        var id = "".concat(type, "-").concat(placementId, "-").concat(deviceOS);
                        if (this.ads$[id]) return void console.warn("AdsPlugin: Ad instance with placementId ".concat(placementId, " already exists"));
                        var config = this.findAdConfig$(type, deviceOS, placementId);
                        if (!config) return void console.warn("AdsPlugin: No config found for ".concat(type, " ").concat(placementId, " on ").concat(deviceOS));
                        var ads = this.getAdsByType(type);
                        if (!A2.search(ads, function(ad) {
                            var _ad_config = ad.config, AdService = _ad_config.AdService, adDeviceOS = _ad_config.DeviceOS;
                            return AdService === config.AdService && adDeviceOS !== deviceOS && adDeviceOS === _this.deviceOS$;
                        })) try {
                            var instance = new adInstance(type, placementId);
                            this.ads$[id] = {
                                type: type,
                                config: config,
                                deviceOS: deviceOS,
                                placementId: placementId,
                                interval: null,
                                instance: instance
                            };
                        } catch (error) {
                            console.warn("AdsPlugin: Failed to create ad instance for ".concat(type, " ").concat(placementId), error);
                            return;
                        }
                    }
                }
            },
            {
                key: "loadAdAsync",
                value: function loadAdAsync(type, placementId) {
                    return _async_to_generator(function() {
                        var event, payload, ad, error;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    this.checkEnabled$(), event = this.codex.event, payload = {
                                        type: type,
                                        placementId: placementId
                                    }, ad = this.getAd(type, placementId), payload.placementId = ad.placementId, _state.label = 1;
                                case 1:
                                    return _state.trys.push([
                                        1,
                                        3,
                                        ,
                                        4
                                    ]), event.emit(Ludex.Events.AD_LOADING, payload), [
                                        4,
                                        ad.instance.loadAsync()
                                    ];
                                case 2:
                                    return _state.sent(), event.emit(Ludex.Events.AD_LOADED, payload), [
                                        3,
                                        4
                                    ];
                                case 3:
                                    throw error = _state.sent(), event.emit(Ludex.Events.AD_LOAD_FAILED, payload), this.degradationTracking$.failedAttempts++, error;
                                case 4:
                                    return [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "showAdAsync",
                value: function showAdAsync(type, placementId) {
                    return _async_to_generator(function() {
                        var event, payload, ad, error;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    if (this.checkEnabled$(), !this.canShowAd(type, placementId)) return console.warn("AdsPlugin: This ad ".concat(type, " is not ready to be shown")), [
                                        2
                                    ];
                                    event = this.codex.event, payload = {
                                        type: type,
                                        placementId: placementId
                                    }, ad = this.getAd(type, placementId), payload.placementId = ad.placementId, _state.label = 1;
                                case 1:
                                    return _state.trys.push([
                                        1,
                                        3,
                                        4,
                                        5
                                    ]), event.emit(Ludex.Events.AD_SHOWING, payload), this.isAdFullSizeShowed$ = !0, [
                                        4,
                                        ad.instance.showAsync()
                                    ];
                                case 2:
                                    return _state.sent(), event.emit(Ludex.Events.AD_SHOW, payload), this.resetDegradationTracking$(), this.lastCallAdShownTime$[type] = Date.now() / 1e3, [
                                        3,
                                        5
                                    ];
                                case 3:
                                    throw error = _state.sent(), event.emit(Ludex.Events.AD_SHOW_FAILED, payload), this.degradationTracking$.failedAttempts++, error;
                                case 4:
                                    return event.emit(Ludex.Events.AD_CLOSED, payload), this.isAdFullSizeShowed$ = !1, [
                                        7
                                    ];
                                case 5:
                                    return [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "getAdStatus",
                value: function getAdStatus(type, placementId) {
                    this.checkEnabled$();
                    try {
                        return this.getAd(type, placementId).instance.status;
                    } catch (error) {
                        return console.warn("Error getting ad status:", error), !1;
                    }
                }
            },
            {
                key: "getAd",
                value: function getAd(type, placementId) {
                    var ad = null;
                    if (!(ad = placementId ? this.getAdByPlacementId(placementId, type) : this.getPriorityAdByType$(type))) throw new AdError_default("AD_INSTANCE_NOT_INITIATED", "The instance ads not yet initiated");
                    return ad;
                }
            },
            {
                key: "getAdsByType",
                value: function getAdsByType(type) {
                    return O4.vals(this.ads$).filter(function(ad) {
                        return ad.type === type;
                    });
                }
            },
            {
                key: "getAdByPlacementId",
                value: function getAdByPlacementId(placementId, type) {
                    var ads = O4.vals(this.ads$);
                    return A2.search(ads, function(ad2) {
                        return ad2.placementId === placementId && (!type || ad2.type === type);
                    }) || null;
                }
            },
            {
                key: "getPriorityAdByType$",
                value: function getPriorityAdByType$(type) {
                    var ads = this.getAdsByType(type);
                    return ads.length > 0 ? ads[0] : null;
                }
            },
            {
                key: "canShowAd",
                value: function canShowAd(type, placementId) {
                    return this.canShowAdByTime$(type, placementId);
                }
            },
            {
                key: "canShowAdByTime$",
                value: function canShowAdByTime$(type, placementId) {
                    try {
                        var ad, now = Date.now() / 1e3;
                        if (placementId) ad = this.getAd(type, placementId);
                        else {
                            var priorityAd = this.getPriorityAdByType$(type);
                            if (!priorityAd) return !1;
                            ad = priorityAd;
                        }
                        var adConfig = ad.config, _adConfig_SecondsBetweenAds = adConfig.SecondsBetweenAds, SecondsBetweenAds = void 0 === _adConfig_SecondsBetweenAds ? 0 : _adConfig_SecondsBetweenAds, _adConfig_SecondsFirstTime = adConfig.SecondsFirstTime, SecondsFirstTime = void 0 === _adConfig_SecondsFirstTime ? 0 : _adConfig_SecondsFirstTime, period = now - this.lastCallAdShownTime$[type], canShowByTime = period > SecondsBetweenAds, canShowFirstTime = period > SecondsFirstTime;
                        if (this.lastCallAdShownTime$[type] > 0) return canShowByTime;
                        return canShowFirstTime;
                    } catch (error) {
                        return console.warn("Error while checking can show ".concat(type, " ad by time"), error), !1;
                    }
                }
            },
            {
                key: "canShowBannerAd",
                value: function canShowBannerAd(placementId) {
                    try {
                        return !!this.getAdByPlacementId(placementId, AdsTypes_default.BANNER);
                    } catch (error) {
                        return console.warn("Error while checking canShowBannerAd", error), !1;
                    }
                }
            },
            {
                key: "showBannerAdAsync",
                value: function showBannerAdAsync(placementId) {
                    var autoRefresh = !(arguments.length > 1) || void 0 === arguments[1] || arguments[1];
                    return _async_to_generator(function() {
                        var ad;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    if (this.checkEnabled$(), ad = this.getAd(AdsTypes_default.BANNER, placementId), !this.canShowBannerAd(ad.placementId)) throw Error("Banner ad can not be shown");
                                    if (this.cleanBannerReloadTimer$(ad), !autoRefresh) return [
                                        3,
                                        2
                                    ];
                                    return [
                                        4,
                                        this.showBannerAdWithSchedule$(ad)
                                    ];
                                case 1:
                                    return _state.sent(), [
                                        3,
                                        4
                                    ];
                                case 2:
                                    return [
                                        4,
                                        this.showBannerAdOnce$(ad)
                                    ];
                                case 3:
                                    _state.sent(), _state.label = 4;
                                case 4:
                                    return [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "showBannerAdOnce$",
                value: function showBannerAdOnce$(ad) {
                    return _async_to_generator(function() {
                        var event, payload, error;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    if (event = this.codex.event, this.isAdFullSizeShowing()) return console.warn("Show banner ad skipped because ad full size is showing"), [
                                        2
                                    ];
                                    payload = {
                                        type: AdsTypes_default.BANNER,
                                        placementId: ad.placementId
                                    }, _state.label = 1;
                                case 1:
                                    return _state.trys.push([
                                        1,
                                        4,
                                        ,
                                        9
                                    ]), [
                                        4,
                                        ad.instance.loadAsync()
                                    ];
                                case 2:
                                    return _state.sent(), event.emit(Ludex.Events.AD_SHOWING, payload), [
                                        4,
                                        ad.instance.showAsync()
                                    ];
                                case 3:
                                    return _state.sent(), event.emit(Ludex.Events.AD_SHOW, payload), this.lastCallAdShownTime$[AdsTypes_default.BANNER] = Date.now() / 1e3, [
                                        3,
                                        9
                                    ];
                                case 4:
                                    if (error = _state.sent(), "AD_NOT_FILLED" === F.toError(error).code) return [
                                        3,
                                        8
                                    ];
                                    _state.label = 5;
                                case 5:
                                    return _state.trys.push([
                                        5,
                                        7,
                                        ,
                                        8
                                    ]), [
                                        4,
                                        ad.instance.hideAsync()
                                    ];
                                case 6:
                                    return _state.sent(), [
                                        3,
                                        8
                                    ];
                                case 7:
                                    return console.warn("Failed to call ad.instance.hideAsync after show banner ad failed", _state.sent()), [
                                        3,
                                        8
                                    ];
                                case 8:
                                    return event.emit(Ludex.Events.AD_SHOW_FAILED, payload), [
                                        3,
                                        9
                                    ];
                                case 9:
                                    return [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "showBannerAdWithSchedule$",
                value: function showBannerAdWithSchedule$(ad) {
                    return _async_to_generator(function() {
                        var _this, _bannerConfig_SecondsReload, SecondsReload, cb;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    return _this = this, [
                                        4,
                                        this.showBannerAdOnce$(ad)
                                    ];
                                case 1:
                                    if (_state.sent(), (SecondsReload = void 0 === (_bannerConfig_SecondsReload = ad.config.SecondsReload) ? 0 : _bannerConfig_SecondsReload) <= 0 || !SecondsReload) return console.warn("Banner ad reload time is less than 0"), [
                                        2
                                    ];
                                    return cb = __name(function() {
                                        return _this.showBannerAdWithSchedule$(ad);
                                    }, "cb"), ad.interval = setTimeout(cb, 1e3 * SecondsReload), [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "hideBannerAdAsync",
                value: function hideBannerAdAsync(placementId) {
                    return _async_to_generator(function() {
                        var ad;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    return this.checkEnabled$(), ad = this.getAd(AdsTypes_default.BANNER, placementId), this.cleanBannerReloadTimer$(ad), [
                                        4,
                                        ad.instance.hideAsync()
                                    ];
                                case 1:
                                    return _state.sent(), this.codex.event.emit(Ludex.Events.AD_CLOSED, {
                                        type: AdsTypes_default.BANNER,
                                        placementId: placementId
                                    }), [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "cleanBannerReloadTimer$",
                value: function cleanBannerReloadTimer$(ad) {
                    try {
                        var interval = ad.interval;
                        if (!interval) return;
                        clearInterval(interval);
                    } catch (error) {
                        console.warn("Error while cleaning banner reload timer", error);
                    }
                }
            },
            {
                key: "findAdConfig$",
                value: function findAdConfig$(type, device, placementId) {
                    var configs;
                    switch(type){
                        case AdsTypes_default.BANNER:
                            configs = this.config$.BannerDisplayAdOptions;
                            break;
                        case AdsTypes_default.INTERSTITIAL:
                            configs = this.config$.InterstitialAdOptions;
                            break;
                        case AdsTypes_default.REWARDED_VIDEO:
                            configs = this.config$.RewardedVideoAdOptions;
                            break;
                        case AdsTypes_default.REWARDED_INTERSTITIAL:
                            configs = this.config$.RewardedInterstitialAdOptions;
                            break;
                        default:
                            return null;
                    }
                    return A2.search(configs, function(config2) {
                        var PlacementId = config2.PlacementId, DeviceOS = config2.DeviceOS;
                        return PlacementId === placementId && (DeviceOS === device || "default" === DeviceOS);
                    }) || null;
                }
            },
            {
                key: "getBannerConfig",
                value: function getBannerConfig(placementId) {
                    var ad = this.getAdByPlacementId(placementId, AdsTypes_default.BANNER);
                    if (!ad) throw Error("Banner ad instance with placementId ".concat(placementId, " not found"));
                    return ad.config;
                }
            },
            {
                key: "getBannerHeight",
                value: function getBannerHeight(placementId, gameZoom) {
                    var includeSAB = !(arguments.length > 2) || void 0 === arguments[2] || arguments[2];
                    this.checkEnabled$();
                    var ad = this.getAdByPlacementId(placementId, AdsTypes_default.BANNER);
                    if (!ad) throw Error("Banner ad instance with placementId ".concat(placementId, " not found"));
                    var bannerConfig = ad.config, bannerHeight = GameSDK.getBannerHeight(bannerConfig);
                    return includeSAB ? (this.safeAreaBottom$ <= 0 && (this.safeAreaBottom$ = D.getSafeAreaBottom()), (bannerHeight + this.safeAreaBottom$) * gameZoom) : bannerHeight * gameZoom;
                }
            },
            {
                key: "getSafeAreaBottom",
                value: function getSafeAreaBottom(gameZoom) {
                    return this.safeAreaBottom$ <= 0 && (this.safeAreaBottom$ = D.getSafeAreaBottom()), this.safeAreaBottom$ * gameZoom;
                }
            },
            {
                key: "resetDegradationTracking$",
                value: function resetDegradationTracking$() {
                    this.degradationTracking$ = {
                        failedAttempts: 0,
                        lastSuccessTime: Date.now()
                    };
                }
            },
            {
                key: "isServiceDegraded",
                value: function isServiceDegraded() {
                    var now = Date.now(), _this_config$_DegradationTracking = this.config$.DegradationTracking, MaxFailedAttempts = _this_config$_DegradationTracking.MaxFailedAttempts, ResetTimeMinutes = _this_config$_DegradationTracking.ResetTimeMinutes, _this_degradationTracking$ = this.degradationTracking$, lastSuccessTime = _this_degradationTracking$.lastSuccessTime, failedAttempts = _this_degradationTracking$.failedAttempts;
                    return now - lastSuccessTime > 60 * ResetTimeMinutes * 1e3 && this.resetDegradationTracking$(), failedAttempts >= MaxFailedAttempts;
                }
            }
        ]), _AdsPlugin;
    }(Ludex.Plugins.BasePlugin);
    __name(_AdsPlugin, "AdsPlugin");
    var AdsPlugin = _AdsPlugin, AdsPlugin_default = AdsPlugin, ads_default = AdsPlugin_default;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var AnalyticsEvents = {
        APP_LAUNCH: "app_launch",
        APP_INITIALIZED: "app_initialized",
        ENGINE_READY: "engine_ready",
        LOAD_START: "load_start",
        LOAD_COMPLETE: "load_complete",
        APP_READY: "app_ready",
        PAGE_VIEW: "page_view",
        SCREEN_OPEN: "screen_open",
        BUTTON_CLICK: "button_click",
        TUTORIAL_BEGIN: "tutorial_begin",
        TUTORIAL_STEP: "tutorial_step",
        TUTORIAL_COMPLETE: "tutorial_complete",
        MATCH_START: "match_start",
        MATCH_END: "match_end",
        LEVEL_START: "level_start",
        LEVEL_RESCUE: "level_rescue",
        LEVEL_END: "level_end",
        USE_ITEM: "use_item",
        EARN_ITEM: "earn_item",
        SHARE: "share",
        INVITE: "invite",
        MESSAGE: "message",
        SHORTCUT_CREATE: "shortcut_create",
        SHORTCUT_CREATE_POPUP: "shortcut_create_popup",
        BOT_SUBSCRIBE: "bot_subscribe",
        BOT_SUBSCRIBE_POPUP: "bot_subscribe_popup",
        AD_INIT: "ad_init",
        AD_LOAD: "ad_load",
        AD_LOAD_FAILED: "ad_load_failed",
        AD_SHOWING: "ad_showing",
        AD_SHOW: "ad_show",
        AD_SHOW_FAILED: "ad_show_failed",
        AD_REWARD: "ad_reward",
        NEW_USER: "new_user",
        RETURNING_USER: "returning_user",
        JOIN_GROUP: "join_group",
        TOURNAMENT_START: "tournament_start",
        TOURNAMENT_SHARE: "tournament_share",
        TOURNAMENT_CREATE: "tournament_create",
        TOURNAMENT_POST_SCORE: "tournament_post_score",
        SWITCH_GAME_POPUP: "switch_game_popup",
        SWITCH_GAME: "switch_game"
    }, Events_default = AnalyticsEvents;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var _BaseFunnel = function() {
        function _BaseFunnel() {
            _class_call_check(this, _BaseFunnel), _define_property(this, "history$", []), _define_property(this, "missing$", []), _define_property(this, "outOfOrder$", []), _define_property(this, "completed$", !1), _define_property(this, "failed$", !1), _define_property(this, "warned$", []), _define_property(this, "debug$", !1), _define_property(this, "restrict$", !1);
        }
        return _create_class(_BaseFunnel, [
            {
                key: "addEvent",
                value: function addEvent(event, _payload) {
                    this.completed$ || this.failed$ ? this.debugLog$("Skip event:", event) : (this.history$.push(event), this.validateAndUpdate$(event));
                }
            },
            {
                key: "validateAndUpdate$",
                value: function validateAndUpdate$(event) {
                    var validationResult = this.validateFunnelState$();
                    if (validationResult.hasFailed) {
                        this.failed$ = !0, this.logValidationError$();
                        return;
                    }
                    validationResult.hasWarnings && this.handleWarnings$(validationResult.warnings), this.checkFunnelCompletion$(event);
                }
            },
            {
                key: "validateFunnelState$",
                value: function validateFunnelState$() {
                    for(var result3 = {
                        hasFailed: !1,
                        hasWarnings: !1,
                        warnings: []
                    }, requiredSteps = this.getCurrentSteps$().filter(function(step) {
                        return step.required$;
                    }), i = 0; i < requiredSteps.length; i++){
                        var step = requiredSteps[i], stepIndex = this.history$.indexOf(step.name);
                        if (-1 === stepIndex) return this.missing$ = [
                            step.name
                        ], result3.hasFailed = !0, result3;
                        if (i > 0) {
                            var prevStep = requiredSteps[i - 1];
                            if (this.history$.indexOf(prevStep.name) > stepIndex) return this.missing$ = [
                                prevStep.name
                            ], result3.hasFailed = !0, result3;
                        }
                    }
                    var outOfOrderEvents = this.validateDependencies$();
                    return outOfOrderEvents.length > 0 && (result3.hasWarnings = !0, result3.warnings = outOfOrderEvents, this.outOfOrder$ = outOfOrderEvents), result3;
                }
            },
            {
                key: "getCurrentSteps$",
                value: function getCurrentSteps$() {
                    var lastEvent = this.history$[this.history$.length - 1], currentIdx = this.funnelSteps$.findIndex(function(step) {
                        return step.name === lastEvent;
                    });
                    return this.funnelSteps$.slice(0, currentIdx + 1);
                }
            },
            {
                key: "validateDependencies$",
                value: function validateDependencies$() {
                    var _this = this, outOfOrder = [];
                    return this.history$.forEach(function(event, index) {
                        var _step_dependencies$, step = _this.funnelSteps$.find(function(s) {
                            return s.name === event;
                        });
                        if (null == step || null == (_step_dependencies$ = step.dependencies$) ? void 0 : _step_dependencies$.length) {
                            var missingDep = step.dependencies$.find(function(dep) {
                                return !_this.history$.includes(dep) || _this.history$.indexOf(dep) > index;
                            });
                            missingDep && !_this.warned$.includes(event) && (outOfOrder.push({
                                event: event,
                                missingDependency: missingDep
                            }), _this.warned$.push(event));
                        }
                    }), outOfOrder;
                }
            },
            {
                key: "checkFunnelCompletion$",
                value: function checkFunnelCompletion$(event) {
                    var _this = this;
                    event === this.funnelSteps$[this.funnelSteps$.length - 1].name && this.funnelSteps$.filter(function(step) {
                        return step.required$;
                    }).every(function(step) {
                        return _this.history$.includes(step.name);
                    }) && (this.completed$ = !0, this.logCompletion$());
                }
            },
            {
                key: "handleWarnings$",
                value: function handleWarnings$(warnings) {
                    var _iteratorNormalCompletion = !0, _didIteratorError = !1, _iteratorError = void 0;
                    try {
                        for(var _step, _iterator = warnings[Symbol.iterator](); !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = !0){
                            var warning = _step.value;
                            console.warn(" [".concat(this.constructor.name, "] Event ").concat(warning.event, " is out of order. Missing: ").concat(warning.missingDependency));
                        }
                    } catch (err) {
                        _didIteratorError = !0, _iteratorError = err;
                    } finally{
                        try {
                            _iteratorNormalCompletion || null == _iterator.return || _iterator.return();
                        } finally{
                            if (_didIteratorError) throw _iteratorError;
                        }
                    }
                }
            },
            {
                key: "logValidationError$",
                value: function logValidationError$() {
                    var name2 = this.constructor.name;
                    if (this.missing$.length && console.error(" [".concat(name2, "] Missing required: ").concat(this.missing$.join(", "))), console.debug(" [".concat(name2, "] History:"), this.history$), this.restrict$) throw Error("[".concat(name2, "] Funnel is required to be completed ! (missing: ").concat(this.missing$.join(", "), ")"));
                }
            },
            {
                key: "logCompletion$",
                value: function logCompletion$() {
                    var name2 = this.constructor.name;
                    this.outOfOrder$.length > 0 ? console.warn(" [".concat(name2, "] Completed with out of order events:"), {
                        history: this.history$,
                        outOfOrder: this.outOfOrder$
                    }) : console.info("\uD83C\uDFAF [".concat(name2, "] Completed"), {
                        history: this.history$
                    });
                }
            },
            {
                key: "debugLog$",
                value: function debugLog$() {
                    for(var _console, _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++)args[_key] = arguments[_key];
                    this.debug$ && (_console = console).debug.apply(_console, [
                        "\uD83D\uDD0D [".concat(this.constructor.name, "]")
                    ].concat(_to_consumable_array(args)));
                }
            },
            {
                key: "isFunnelCompleted",
                value: function isFunnelCompleted() {
                    return this.completed$;
                }
            },
            {
                key: "isFunnelFailed",
                value: function isFunnelFailed() {
                    return this.failed$;
                }
            },
            {
                key: "getEventHistory",
                value: function getEventHistory() {
                    return _to_consumable_array(this.history$);
                }
            },
            {
                key: "getMissingEvents",
                value: function getMissingEvents() {
                    return _to_consumable_array(this.missing$);
                }
            },
            {
                key: "getOutOfOrderEvents",
                value: function getOutOfOrderEvents() {
                    return _to_consumable_array(this.outOfOrder$);
                }
            }
        ]), _BaseFunnel;
    }();
    __name(_BaseFunnel, "BaseFunnel");
    var BaseFunnel = _BaseFunnel, BaseFunnel_default = BaseFunnel, _AdsenseFunnel = function(BaseFunnel_default) {
        function _AdsenseFunnel() {
            var _this;
            return _class_call_check(this, _AdsenseFunnel), _this = _call_super(this, _AdsenseFunnel, arguments), _define_property(_this, "debug$", !1), _define_property(_this, "funnelSteps$", [
                {
                    name: Events_default.AD_INIT,
                    required$: !0,
                    payload$: {
                        service: "adsense"
                    },
                    description$: "Init adsense ad"
                },
                {
                    name: Events_default.AD_LOAD_FAILED,
                    required$: !1,
                    payload$: {
                        service: _this.service
                    },
                    description$: "Platform ad load failed (trigger for adsense)"
                },
                {
                    name: Events_default.AD_LOAD,
                    required$: !0,
                    payload$: {
                        service: "adsense"
                    },
                    description$: "Start loading adsense ad"
                },
                {
                    name: Events_default.AD_LOAD_FAILED,
                    required$: !1,
                    dependencies$: [
                        Events_default.AD_LOAD
                    ],
                    payload$: {
                        service: "adsense"
                    },
                    description$: "Adsense ad load failed"
                },
                {
                    name: Events_default.AD_SHOWING,
                    required$: !0,
                    dependencies$: [
                        Events_default.AD_LOAD
                    ],
                    payload$: {
                        service: "adsense"
                    },
                    description$: "Adsense ad is showing"
                },
                {
                    name: Events_default.AD_SHOW,
                    required$: !1,
                    dependencies$: [
                        Events_default.AD_SHOWING
                    ],
                    payload$: {
                        service: "adsense"
                    },
                    description$: "Adsense ad shown successfully"
                },
                {
                    name: Events_default.AD_SHOW_FAILED,
                    required$: !1,
                    dependencies$: [
                        Events_default.AD_SHOWING
                    ],
                    payload$: {
                        service: "adsense"
                    },
                    description$: "Adsense ad show failed"
                },
                {
                    name: Events_default.AD_LOAD,
                    required$: !1,
                    payload$: {
                        service: "adsense"
                    },
                    description$: "Preload adsense ad"
                }
            ]), _this;
        }
        return _inherits(_AdsenseFunnel, BaseFunnel_default), _create_class(_AdsenseFunnel, [
            {
                key: "service",
                get: function get() {
                    var _ref, _GameSDK;
                    return null != (_ref = null == (_GameSDK = GameSDK) ? void 0 : _GameSDK.getSDKName()) ? _ref : "Ludex";
                }
            },
            {
                key: "addEvent",
                value: function addEvent(event, payload) {
                    var service = (null != payload ? payload : {}).service;
                    service && ("adsense" === service || event === Events_default.AD_LOAD_FAILED && "platform" === service) && _get(_get_prototype_of(_AdsenseFunnel.prototype), "addEvent", this).call(this, event, payload);
                }
            }
        ]), _AdsenseFunnel;
    }(BaseFunnel_default);
    __name(_AdsenseFunnel, "AdsenseFunnel");
    var AdsenseFunnel = _AdsenseFunnel, AdsenseFunnel_default = AdsenseFunnel;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var _LudexFunnel = function(BaseFunnel_default) {
        function _LudexFunnel() {
            var _this;
            return _class_call_check(this, _LudexFunnel), _this = _call_super(this, _LudexFunnel, arguments), _define_property(_this, "debug$", !1), _define_property(_this, "restrict$", !1), _define_property(_this, "funnelSteps$", [
                {
                    name: Events_default.APP_LAUNCH,
                    required$: !0,
                    description$: "Application launched"
                },
                {
                    name: Events_default.APP_INITIALIZED,
                    required$: !0,
                    dependencies$: [
                        Events_default.APP_LAUNCH
                    ],
                    description$: "Application initialized"
                },
                {
                    name: Events_default.ENGINE_READY,
                    required$: !0,
                    dependencies$: [
                        Events_default.APP_INITIALIZED
                    ],
                    description$: "Game engine initialized"
                },
                {
                    name: Events_default.LOAD_START,
                    required$: !0,
                    dependencies$: [
                        Events_default.ENGINE_READY
                    ],
                    description$: "Start loading game assets"
                },
                {
                    name: Events_default.LOAD_COMPLETE,
                    required$: !0,
                    dependencies$: [
                        Events_default.LOAD_START
                    ],
                    description$: "Game assets loaded completely"
                },
                {
                    name: Events_default.APP_READY,
                    required$: !0,
                    dependencies$: [
                        Events_default.LOAD_COMPLETE
                    ],
                    description$: "Game is ready to play"
                }
            ]), _this;
        }
        return _inherits(_LudexFunnel, BaseFunnel_default), _LudexFunnel;
    }(BaseFunnel_default);
    __name(_LudexFunnel, "LudexFunnel");
    var LudexFunnel = _LudexFunnel, LudexFunnel_default = LudexFunnel;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var _PlatformAdsFunnel = function(BaseFunnel_default) {
        function _PlatformAdsFunnel() {
            var _this;
            return _class_call_check(this, _PlatformAdsFunnel), _this = _call_super(this, _PlatformAdsFunnel, arguments), _define_property(_this, "debug$", !1), _define_property(_this, "funnelSteps$", [
                {
                    name: Events_default.AD_INIT,
                    required$: !0,
                    payload$: {
                        service: _this.service
                    },
                    description$: "Init platform ad"
                },
                {
                    name: Events_default.AD_LOAD,
                    required$: !0,
                    payload$: {
                        service: _this.service
                    },
                    description$: "Start loading platform ad"
                },
                {
                    name: Events_default.AD_LOAD_FAILED,
                    required$: !1,
                    dependencies$: [
                        Events_default.AD_LOAD
                    ],
                    payload$: {
                        service: _this.service
                    },
                    description$: "Platform ad load failed"
                },
                {
                    name: Events_default.AD_SHOWING,
                    required$: !0,
                    dependencies$: [
                        Events_default.AD_LOAD
                    ],
                    payload$: {
                        service: _this.service
                    },
                    description$: "Platform ad is showing"
                },
                {
                    name: Events_default.AD_SHOW,
                    required$: !1,
                    dependencies$: [
                        Events_default.AD_SHOWING
                    ],
                    payload$: {
                        service: _this.service
                    },
                    description$: "Platform ad shown successfully"
                },
                {
                    name: Events_default.AD_SHOW_FAILED,
                    required$: !1,
                    dependencies$: [
                        Events_default.AD_SHOWING
                    ],
                    payload$: {
                        service: _this.service
                    },
                    description$: "Platform ad show failed"
                },
                {
                    name: Events_default.AD_LOAD,
                    required$: !1,
                    payload$: {
                        service: _this.service
                    },
                    description$: "Preload platform ad"
                }
            ]), _this;
        }
        return _inherits(_PlatformAdsFunnel, BaseFunnel_default), _create_class(_PlatformAdsFunnel, [
            {
                key: "service",
                get: function get() {
                    return "platform";
                }
            },
            {
                key: "addEvent",
                value: function addEvent(event, payload) {
                    (null == payload ? void 0 : payload.service) === this.service && _get(_get_prototype_of(_PlatformAdsFunnel.prototype), "addEvent", this).call(this, event, payload);
                }
            }
        ]), _PlatformAdsFunnel;
    }(BaseFunnel_default);
    __name(_PlatformAdsFunnel, "PlatformAdsFunnel");
    var PlatformAdsFunnel = _PlatformAdsFunnel, PlatformAdsFunnel_default = PlatformAdsFunnel;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var Modes = Ludex.Match.Modes, _SingleMatchFunnel = function(BaseFunnel_default) {
        function _SingleMatchFunnel() {
            var _this;
            return _class_call_check(this, _SingleMatchFunnel), _this = _call_super(this, _SingleMatchFunnel, arguments), _define_property(_this, "debug$", !1), _define_property(_this, "funnelSteps$", [
                {
                    name: Events_default.MATCH_START,
                    required$: !0,
                    payload$: {
                        game_mode: Modes.SINGLE
                    },
                    description$: "Match started"
                },
                {
                    name: Events_default.LEVEL_START,
                    required$: !0,
                    dependencies$: [
                        Events_default.MATCH_START
                    ],
                    payload$: {
                        game_mode: Modes.SINGLE
                    },
                    description$: "Level started"
                },
                {
                    name: Events_default.LEVEL_RESCUE,
                    required$: !1,
                    dependencies$: [
                        Events_default.LEVEL_START
                    ],
                    payload$: {
                        game_mode: Modes.SINGLE
                    },
                    description$: "User was rescued"
                },
                {
                    name: Events_default.LEVEL_END,
                    required$: !0,
                    dependencies$: [
                        Events_default.LEVEL_START
                    ],
                    payload$: {
                        game_mode: Modes.SINGLE
                    },
                    description$: "Level ended"
                },
                {
                    name: Events_default.MATCH_END,
                    required$: !0,
                    dependencies$: [
                        Events_default.LEVEL_START
                    ],
                    payload$: {
                        game_mode: Modes.SINGLE
                    },
                    description$: "Match ended"
                }
            ]), _this;
        }
        return _inherits(_SingleMatchFunnel, BaseFunnel_default), _create_class(_SingleMatchFunnel, [
            {
                key: "addEvent",
                value: function addEvent(event, payload) {
                    var game_mode = (null != payload ? payload : {}).game_mode;
                    game_mode && game_mode.toLowerCase() === Modes.SINGLE && _get(_get_prototype_of(_SingleMatchFunnel.prototype), "addEvent", this).call(this, event, payload);
                }
            }
        ]), _SingleMatchFunnel;
    }(BaseFunnel_default);
    __name(_SingleMatchFunnel, "SingleMatchFunnel");
    var SingleMatchFunnel = _SingleMatchFunnel, SingleMatchFunnel_default = SingleMatchFunnel;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var _Ludex_Utils6 = Ludex.Utils, S2 = _Ludex_Utils6.String, V5 = _Ludex_Utils6.Valid, _BaseAnalytics = function() {
        function _BaseAnalytics(codex2, name2, options) {
            _class_call_check(this, _BaseAnalytics), _define_property(this, "codex", void 0), _define_property(this, "name", void 0), _define_property(this, "color$", void 0), _define_property(this, "options$", void 0), _define_property(this, "selfLog$", void 0), _define_property(this, "currentPath$", void 0), this.codex = codex2, this.name = name2, this.options$ = options, this.color$ = options.color || "#FFF", this.selfLog$ = options.log, this.currentPath$ = "/", console.info("%c".concat(this.name, ": init"), "color: ".concat(this.color$), this.options$);
        }
        return _create_class(_BaseAnalytics, [
            {
                key: "event",
                value: function event(name2, payload) {
                    this.logInfo$("event", {
                        name: name2,
                        payload: payload
                    });
                    var event = this.formatEventName$(name2);
                    this.processEvent$(event, payload);
                }
            },
            {
                key: "logInfo$",
                value: function logInfo$(message, payload) {
                    this.selfLog$ && console.info("%c".concat(this.name, ": ").concat(message), "color: ".concat(this.color$), payload);
                }
            },
            {
                key: "pageview",
                value: function pageview(pagePath) {
                    var pageTitle = this.getPageTitle$(pagePath);
                    pageTitle = this.addGameModeToPageTitle$(pageTitle), document.title = pageTitle, this.event(Events_default.PAGE_VIEW, {
                        page_path: pagePath,
                        page_title: pageTitle
                    });
                }
            },
            {
                key: "levelStart",
                value: function levelStart(level2, score2, mode) {
                    this.event(Events_default.LEVEL_START, {
                        level: level2,
                        score: score2,
                        level_name: this.getLevelName(level2),
                        game_mode: mode ? S2.toUpperCamelCase(mode) : void 0
                    });
                }
            },
            {
                key: "levelFail",
                value: function levelFail(level2, score2, mode) {
                    this.event(Events_default.LEVEL_END, {
                        level: level2,
                        score: score2,
                        success: !1,
                        level_name: this.getLevelName(level2),
                        game_mode: mode ? S2.toUpperCamelCase(mode) : void 0
                    });
                }
            },
            {
                key: "levelRescue",
                value: function levelRescue(level2, score2, mode) {
                    this.event(Events_default.LEVEL_RESCUE, {
                        level: level2,
                        score: score2,
                        level_name: this.getLevelName(level2),
                        game_mode: mode ? S2.toUpperCamelCase(mode) : void 0
                    });
                }
            },
            {
                key: "levelComplete",
                value: function levelComplete(level2, score2, mode) {
                    this.event(Events_default.LEVEL_END, {
                        level: level2,
                        score: score2,
                        success: !0,
                        level_name: this.getLevelName(level2),
                        game_mode: mode ? S2.toUpperCamelCase(mode) : void 0
                    });
                }
            },
            {
                key: "initAdEvent",
                value: function initAdEvent(payload) {
                    var adService = payload.adService, state = payload.state;
                    this.event(Events_default.AD_INIT, {
                        ad_service: adService,
                        state: state
                    });
                }
            },
            {
                key: "loadAdEvent$",
                value: function loadAdEvent$(payload) {
                    var type = payload.type, placement = payload.placement, adService = payload.service;
                    this.event(Events_default.AD_LOAD, {
                        ad_type: type,
                        screen_name: placement,
                        ad_service: adService
                    });
                }
            },
            {
                key: "showAdEvent$",
                value: function showAdEvent$(payload) {
                    var type = payload.type, placement = payload.placement, adService = payload.service;
                    this.event(Events_default.AD_SHOW, {
                        ad_type: type,
                        screen_name: placement,
                        ad_service: adService
                    });
                }
            },
            {
                key: "loadInterstitialAd",
                value: function loadInterstitialAd(payload) {
                    var placement = payload.placement, adService = payload.service;
                    this.loadAdEvent$({
                        type: "interstitial",
                        placement: placement,
                        service: adService
                    });
                }
            },
            {
                key: "showInterstitialAd",
                value: function showInterstitialAd(payload) {
                    var placement = payload.placement, adService = payload.service;
                    this.showAdEvent$({
                        type: "interstitial",
                        placement: placement,
                        service: adService
                    });
                }
            },
            {
                key: "loadRewardedVideoAd",
                value: function loadRewardedVideoAd(payload) {
                    var placement = payload.placement, adService = payload.service;
                    this.loadAdEvent$({
                        type: "rewarded_video",
                        placement: placement,
                        service: adService
                    });
                }
            },
            {
                key: "showRewardedVideoAd",
                value: function showRewardedVideoAd(payload) {
                    var placement = payload.placement, adService = payload.service;
                    this.showAdEvent$({
                        type: "rewarded_video",
                        placement: placement,
                        service: adService
                    });
                }
            },
            {
                key: "receiveVideoReward",
                value: function receiveVideoReward(payload) {
                    var placement = payload.placement, adService = payload.service;
                    this.event(Events_default.AD_REWARD, {
                        screen_name: placement,
                        ad_service: adService
                    });
                }
            },
            {
                key: "loadRewardedInterstitialAd",
                value: function loadRewardedInterstitialAd(payload) {
                    var placement = payload.placement, adService = payload.service;
                    this.loadAdEvent$({
                        type: "rewarded_interstitial",
                        placement: placement,
                        service: adService
                    });
                }
            },
            {
                key: "showRewardedInterstitialAd",
                value: function showRewardedInterstitialAd(payload) {
                    var placement = payload.placement, adService = payload.service;
                    this.showAdEvent$({
                        type: "rewarded_interstitial",
                        placement: placement,
                        service: adService
                    });
                }
            },
            {
                key: "receiveInterstitialReward",
                value: function receiveInterstitialReward(payload) {
                    var placement = payload.placement, adService = payload.service;
                    this.event(Events_default.AD_REWARD, {
                        screen_name: placement,
                        ad_service: adService
                    });
                }
            },
            {
                key: "loadAdFail",
                value: function loadAdFail(payload) {
                    var type = payload.type, placement = payload.placement, adService = payload.service;
                    this.event(Events_default.AD_LOAD_FAILED, {
                        ad_type: type,
                        screen_name: placement,
                        ad_service: adService
                    });
                }
            },
            {
                key: "showAdFail",
                value: function showAdFail(payload) {
                    var type = payload.type, placement = payload.placement, adService = payload.service;
                    this.event(Events_default.AD_SHOW_FAILED, {
                        ad_type: type,
                        screen_name: placement,
                        ad_service: adService
                    });
                }
            },
            {
                key: "showingAd",
                value: function showingAd(payload) {
                    var type = payload.type, placement = payload.placement, adService = payload.service;
                    this.event(Events_default.AD_SHOWING, {
                        ad_type: type,
                        screen_name: placement,
                        ad_service: adService
                    });
                }
            },
            {
                key: "formatEventName$",
                value: function formatEventName$(rawName) {
                    return rawName.toLowerCase().replace(/:/g, "_");
                }
            },
            {
                key: "getLevelName",
                value: function getLevelName(level2) {
                    return "Level ".concat(S2.padStart(level2.toString(), 5, "0"));
                }
            },
            {
                key: "getPageTitle$",
                value: function getPageTitle$(pagePath) {
                    var pageName = pagePath.split("/").pop();
                    if (!V5.isString(pageName)) return pagePath;
                    var pageTitle = pageName.replace(/([-_\s.])/g, " $1");
                    return S2.toUpperCamelCase(pageTitle);
                }
            },
            {
                key: "addGameModeToPageTitle$",
                value: function addGameModeToPageTitle$(pageTitle) {
                    var match = this.codex.match;
                    if (!match) return pageTitle;
                    var mode = match.getMatchState().mode;
                    mode || (mode = "Normal");
                    var modeTitle = S2.toUpperCamelCase(mode);
                    return "".concat(modeTitle, "::").concat(pageTitle);
                }
            }
        ]), _BaseAnalytics;
    }();
    __name(_BaseAnalytics, "BaseAnalytics");
    var BaseAnalytics = _BaseAnalytics, Analytics_default = BaseAnalytics;
    Ludex.Plugins.Analytics = {
        Events: Events_default,
        BaseFunnel: BaseFunnel_default,
        BaseAnalytics: Analytics_default
    };
    var _AnalyticsPlugin = function(_Ludex_Plugins_BasePlugin) {
        function _AnalyticsPlugin(codex2) {
            var _this;
            return _class_call_check(this, _AnalyticsPlugin), _define_property(_this = _call_super(this, _AnalyticsPlugin, [
                codex2
            ]), "analytics$", []), _define_property(_this, "placement$", "unknown"), _define_property(_this, "funnels$", []), _define_property(_this, "pageview", __name(function(key) {
                if (_this.isActive$()) {
                    _this.placement$ = key;
                    var path = _this.getPageByKey$(key), _iteratorNormalCompletion = !0, _didIteratorError = !1, _iteratorError = void 0;
                    try {
                        for(var _step, _iterator = _this.analytics$[Symbol.iterator](); !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = !0)_step.value.pageview(path);
                    } catch (err) {
                        _didIteratorError = !0, _iteratorError = err;
                    } finally{
                        try {
                            _iteratorNormalCompletion || null == _iterator.return || _iterator.return();
                        } finally{
                            if (_didIteratorError) throw _iteratorError;
                        }
                    }
                    _this.logFunnelEvent$(Events_default.PAGE_VIEW);
                }
            }, "pageview")), _this.initFunnels$(), _this;
        }
        return _inherits(_AnalyticsPlugin, _Ludex_Plugins_BasePlugin), _create_class(_AnalyticsPlugin, [
            {
                key: "mergePayload$",
                value: function mergePayload$(source, target) {
                    return Ludex.Utils.Object.merge(source, target);
                }
            },
            {
                key: "add",
                value: function add(analytic) {
                    var index = this.analytics$.findIndex(function(item) {
                        return item.name === analytic.name;
                    });
                    -1 !== index ? this.analytics$[index] = analytic : this.analytics$.push(analytic);
                }
            },
            {
                key: "isActive$",
                value: function isActive$() {
                    return this.analytics$.length >= 1;
                }
            },
            {
                key: "initFunnels$",
                value: function initFunnels$() {
                    this.addFunnel(new LudexFunnel_default()), this.addFunnel(new AdsenseFunnel_default()), this.addFunnel(new PlatformAdsFunnel_default()), this.addFunnel(new SingleMatchFunnel_default());
                }
            },
            {
                key: "addFunnel",
                value: function addFunnel(funnel) {
                    this.funnels$.push(funnel);
                }
            },
            {
                key: "logFunnelEvent$",
                value: function logFunnelEvent$(name2, payload) {
                    var _iteratorNormalCompletion = !0, _didIteratorError = !1, _iteratorError = void 0;
                    try {
                        for(var _step, _iterator = this.funnels$[Symbol.iterator](); !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = !0)_step.value.addEvent(name2, payload);
                    } catch (err) {
                        _didIteratorError = !0, _iteratorError = err;
                    } finally{
                        try {
                            _iteratorNormalCompletion || null == _iterator.return || _iterator.return();
                        } finally{
                            if (_didIteratorError) throw _iteratorError;
                        }
                    }
                }
            },
            {
                key: "event",
                value: function event(name2, payload) {
                    if (this.isActive$()) {
                        var _iteratorNormalCompletion = !0, _didIteratorError = !1, _iteratorError = void 0;
                        try {
                            for(var _step, _iterator = this.analytics$[Symbol.iterator](); !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = !0)_step.value.event(name2, payload);
                        } catch (err) {
                            _didIteratorError = !0, _iteratorError = err;
                        } finally{
                            try {
                                _iteratorNormalCompletion || null == _iterator.return || _iterator.return();
                            } finally{
                                if (_didIteratorError) throw _iteratorError;
                            }
                        }
                        this.logFunnelEvent$(name2, payload);
                    }
                }
            },
            {
                key: "levelStart",
                value: function levelStart(level2, score2, mode) {
                    if (this.isActive$()) {
                        var _iteratorNormalCompletion = !0, _didIteratorError = !1, _iteratorError = void 0;
                        try {
                            for(var _step, _iterator = this.analytics$[Symbol.iterator](); !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = !0)_step.value.levelStart(level2, score2, mode);
                        } catch (err) {
                            _didIteratorError = !0, _iteratorError = err;
                        } finally{
                            try {
                                _iteratorNormalCompletion || null == _iterator.return || _iterator.return();
                            } finally{
                                if (_didIteratorError) throw _iteratorError;
                            }
                        }
                        this.logFunnelEvent$(Events_default.LEVEL_START, {
                            score: score2,
                            game_mode: mode
                        });
                    }
                }
            },
            {
                key: "levelRescue",
                value: function levelRescue(level2, score2, mode) {
                    if (this.isActive$()) {
                        var _iteratorNormalCompletion = !0, _didIteratorError = !1, _iteratorError = void 0;
                        try {
                            for(var _step, _iterator = this.analytics$[Symbol.iterator](); !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = !0)_step.value.levelRescue(level2, score2, mode);
                        } catch (err) {
                            _didIteratorError = !0, _iteratorError = err;
                        } finally{
                            try {
                                _iteratorNormalCompletion || null == _iterator.return || _iterator.return();
                            } finally{
                                if (_didIteratorError) throw _iteratorError;
                            }
                        }
                        this.logFunnelEvent$(Events_default.LEVEL_RESCUE, {
                            score: score2,
                            game_mode: mode
                        });
                    }
                }
            },
            {
                key: "levelFail",
                value: function levelFail(level2, score2, mode) {
                    if (this.isActive$()) {
                        var _iteratorNormalCompletion = !0, _didIteratorError = !1, _iteratorError = void 0;
                        try {
                            for(var _step, _iterator = this.analytics$[Symbol.iterator](); !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = !0)_step.value.levelFail(level2, score2, mode);
                        } catch (err) {
                            _didIteratorError = !0, _iteratorError = err;
                        } finally{
                            try {
                                _iteratorNormalCompletion || null == _iterator.return || _iterator.return();
                            } finally{
                                if (_didIteratorError) throw _iteratorError;
                            }
                        }
                        this.logFunnelEvent$(Events_default.LEVEL_END, {
                            score: score2,
                            game_mode: mode
                        });
                    }
                }
            },
            {
                key: "levelComplete",
                value: function levelComplete(level2, score2, mode) {
                    if (this.isActive$()) {
                        var _iteratorNormalCompletion = !0, _didIteratorError = !1, _iteratorError = void 0;
                        try {
                            for(var _step, _iterator = this.analytics$[Symbol.iterator](); !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = !0)_step.value.levelComplete(level2, score2, mode);
                        } catch (err) {
                            _didIteratorError = !0, _iteratorError = err;
                        } finally{
                            try {
                                _iteratorNormalCompletion || null == _iterator.return || _iterator.return();
                            } finally{
                                if (_didIteratorError) throw _iteratorError;
                            }
                        }
                        this.logFunnelEvent$(Events_default.LEVEL_END, {
                            score: score2,
                            game_mode: mode
                        });
                    }
                }
            },
            {
                key: "initAdEvent",
                value: function initAdEvent(payload) {
                    return _async_to_generator(function() {
                        var _this, _iteratorNormalCompletion, _didIteratorError, _iteratorError, _iterator, _step;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    if (_this = this, !this.isActive$()) return [
                                        2
                                    ];
                                    return [
                                        4,
                                        new Promise(function(resolve) {
                                            var Events11 = Ludex.Events;
                                            _this.codex.event.catchUp(Events11.GAME_READY, resolve);
                                        })
                                    ];
                                case 1:
                                    _state.sent(), _iteratorNormalCompletion = !0, _didIteratorError = !1, _iteratorError = void 0;
                                    try {
                                        for(_iterator = this.analytics$[Symbol.iterator](); !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = !0)_step.value.initAdEvent(payload);
                                    } catch (err) {
                                        _didIteratorError = !0, _iteratorError = err;
                                    } finally{
                                        try {
                                            _iteratorNormalCompletion || null == _iterator.return || _iterator.return();
                                        } finally{
                                            if (_didIteratorError) throw _iteratorError;
                                        }
                                    }
                                    return [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "loadInterstitialAd",
                value: function loadInterstitialAd(payload) {
                    if (this.isActive$()) {
                        var payloadWithPage = this.mergePayload$(payload, {
                            placement: this.placement$
                        }), _iteratorNormalCompletion = !0, _didIteratorError = !1, _iteratorError = void 0;
                        try {
                            for(var _step, _iterator = this.analytics$[Symbol.iterator](); !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = !0)_step.value.loadInterstitialAd(payloadWithPage);
                        } catch (err) {
                            _didIteratorError = !0, _iteratorError = err;
                        } finally{
                            try {
                                _iteratorNormalCompletion || null == _iterator.return || _iterator.return();
                            } finally{
                                if (_didIteratorError) throw _iteratorError;
                            }
                        }
                        this.logFunnelEvent$(Events_default.AD_LOAD, payloadWithPage);
                    }
                }
            },
            {
                key: "showInterstitialAd",
                value: function showInterstitialAd(payload) {
                    if (this.isActive$()) {
                        var payloadWithPage = this.mergePayload$(payload, {
                            placement: this.placement$
                        }), _iteratorNormalCompletion = !0, _didIteratorError = !1, _iteratorError = void 0;
                        try {
                            for(var _step, _iterator = this.analytics$[Symbol.iterator](); !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = !0)_step.value.showInterstitialAd(payloadWithPage);
                        } catch (err) {
                            _didIteratorError = !0, _iteratorError = err;
                        } finally{
                            try {
                                _iteratorNormalCompletion || null == _iterator.return || _iterator.return();
                            } finally{
                                if (_didIteratorError) throw _iteratorError;
                            }
                        }
                        this.logFunnelEvent$(Events_default.AD_SHOW, payloadWithPage);
                    }
                }
            },
            {
                key: "loadRewardedVideoAd",
                value: function loadRewardedVideoAd(payload) {
                    if (this.isActive$()) {
                        var payloadWithPage = this.mergePayload$(payload, {
                            placement: this.placement$
                        }), _iteratorNormalCompletion = !0, _didIteratorError = !1, _iteratorError = void 0;
                        try {
                            for(var _step, _iterator = this.analytics$[Symbol.iterator](); !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = !0)_step.value.loadRewardedVideoAd(payloadWithPage);
                        } catch (err) {
                            _didIteratorError = !0, _iteratorError = err;
                        } finally{
                            try {
                                _iteratorNormalCompletion || null == _iterator.return || _iterator.return();
                            } finally{
                                if (_didIteratorError) throw _iteratorError;
                            }
                        }
                        this.logFunnelEvent$(Events_default.AD_LOAD, payloadWithPage);
                    }
                }
            },
            {
                key: "showRewardedVideoAd",
                value: function showRewardedVideoAd(payload) {
                    if (this.isActive$()) {
                        var payloadWithPage = this.mergePayload$(payload, {
                            placement: this.placement$
                        }), _iteratorNormalCompletion = !0, _didIteratorError = !1, _iteratorError = void 0;
                        try {
                            for(var _step, _iterator = this.analytics$[Symbol.iterator](); !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = !0)_step.value.showRewardedVideoAd(payloadWithPage);
                        } catch (err) {
                            _didIteratorError = !0, _iteratorError = err;
                        } finally{
                            try {
                                _iteratorNormalCompletion || null == _iterator.return || _iterator.return();
                            } finally{
                                if (_didIteratorError) throw _iteratorError;
                            }
                        }
                        this.logFunnelEvent$(Events_default.AD_SHOW, payloadWithPage);
                    }
                }
            },
            {
                key: "receiveVideoReward",
                value: function receiveVideoReward(payload) {
                    if (this.isActive$()) {
                        var payloadWithPage = this.mergePayload$(payload, {
                            placement: this.placement$
                        }), _iteratorNormalCompletion = !0, _didIteratorError = !1, _iteratorError = void 0;
                        try {
                            for(var _step, _iterator = this.analytics$[Symbol.iterator](); !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = !0)_step.value.receiveVideoReward(payloadWithPage);
                        } catch (err) {
                            _didIteratorError = !0, _iteratorError = err;
                        } finally{
                            try {
                                _iteratorNormalCompletion || null == _iterator.return || _iterator.return();
                            } finally{
                                if (_didIteratorError) throw _iteratorError;
                            }
                        }
                        this.logFunnelEvent$(Events_default.AD_REWARD, payloadWithPage);
                    }
                }
            },
            {
                key: "loadRewardedInterstitialAd",
                value: function loadRewardedInterstitialAd(payload) {
                    if (this.isActive$()) {
                        var payloadWithPage = this.mergePayload$(payload, {
                            placement: this.placement$
                        }), _iteratorNormalCompletion = !0, _didIteratorError = !1, _iteratorError = void 0;
                        try {
                            for(var _step, _iterator = this.analytics$[Symbol.iterator](); !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = !0)_step.value.loadRewardedInterstitialAd(payloadWithPage);
                        } catch (err) {
                            _didIteratorError = !0, _iteratorError = err;
                        } finally{
                            try {
                                _iteratorNormalCompletion || null == _iterator.return || _iterator.return();
                            } finally{
                                if (_didIteratorError) throw _iteratorError;
                            }
                        }
                        this.logFunnelEvent$(Events_default.AD_LOAD, payloadWithPage);
                    }
                }
            },
            {
                key: "showRewardedInterstitialAd",
                value: function showRewardedInterstitialAd(payload) {
                    if (this.isActive$()) {
                        var payloadWithPage = this.mergePayload$(payload, {
                            placement: this.placement$
                        }), _iteratorNormalCompletion = !0, _didIteratorError = !1, _iteratorError = void 0;
                        try {
                            for(var _step, _iterator = this.analytics$[Symbol.iterator](); !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = !0)_step.value.showRewardedInterstitialAd(payloadWithPage);
                        } catch (err) {
                            _didIteratorError = !0, _iteratorError = err;
                        } finally{
                            try {
                                _iteratorNormalCompletion || null == _iterator.return || _iterator.return();
                            } finally{
                                if (_didIteratorError) throw _iteratorError;
                            }
                        }
                        this.logFunnelEvent$(Events_default.AD_SHOW, payloadWithPage);
                    }
                }
            },
            {
                key: "receiveInterstitialReward",
                value: function receiveInterstitialReward(payload) {
                    if (this.isActive$()) {
                        var payloadWithPage = this.mergePayload$(payload, {
                            placement: this.placement$
                        }), _iteratorNormalCompletion = !0, _didIteratorError = !1, _iteratorError = void 0;
                        try {
                            for(var _step, _iterator = this.analytics$[Symbol.iterator](); !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = !0)_step.value.receiveInterstitialReward(payloadWithPage);
                        } catch (err) {
                            _didIteratorError = !0, _iteratorError = err;
                        } finally{
                            try {
                                _iteratorNormalCompletion || null == _iterator.return || _iterator.return();
                            } finally{
                                if (_didIteratorError) throw _iteratorError;
                            }
                        }
                        this.logFunnelEvent$(Events_default.AD_REWARD, payloadWithPage);
                    }
                }
            },
            {
                key: "loadAdFail",
                value: function loadAdFail(payload) {
                    if (this.isActive$()) {
                        var payloadWithPage = this.mergePayload$(payload, {
                            placement: this.placement$
                        }), _iteratorNormalCompletion = !0, _didIteratorError = !1, _iteratorError = void 0;
                        try {
                            for(var _step, _iterator = this.analytics$[Symbol.iterator](); !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = !0)_step.value.loadAdFail(payloadWithPage);
                        } catch (err) {
                            _didIteratorError = !0, _iteratorError = err;
                        } finally{
                            try {
                                _iteratorNormalCompletion || null == _iterator.return || _iterator.return();
                            } finally{
                                if (_didIteratorError) throw _iteratorError;
                            }
                        }
                        this.logFunnelEvent$(Events_default.AD_LOAD_FAILED, payloadWithPage);
                    }
                }
            },
            {
                key: "showAdFail",
                value: function showAdFail(payload) {
                    if (this.isActive$()) {
                        var payloadWithPage = this.mergePayload$(payload, {
                            placement: this.placement$
                        }), _iteratorNormalCompletion = !0, _didIteratorError = !1, _iteratorError = void 0;
                        try {
                            for(var _step, _iterator = this.analytics$[Symbol.iterator](); !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = !0)_step.value.showAdFail(payloadWithPage);
                        } catch (err) {
                            _didIteratorError = !0, _iteratorError = err;
                        } finally{
                            try {
                                _iteratorNormalCompletion || null == _iterator.return || _iterator.return();
                            } finally{
                                if (_didIteratorError) throw _iteratorError;
                            }
                        }
                        this.logFunnelEvent$(Events_default.AD_SHOW_FAILED, payloadWithPage);
                    }
                }
            },
            {
                key: "showingAd",
                value: function showingAd(payload) {
                    if (this.isActive$()) {
                        var payloadWithPage = this.mergePayload$(payload, {
                            placement: this.placement$
                        }), _iteratorNormalCompletion = !0, _didIteratorError = !1, _iteratorError = void 0;
                        try {
                            for(var _step, _iterator = this.analytics$[Symbol.iterator](); !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = !0)_step.value.showingAd(payloadWithPage);
                        } catch (err) {
                            _didIteratorError = !0, _iteratorError = err;
                        } finally{
                            try {
                                _iteratorNormalCompletion || null == _iterator.return || _iterator.return();
                            } finally{
                                if (_didIteratorError) throw _iteratorError;
                            }
                        }
                        this.logFunnelEvent$(Events_default.AD_SHOWING, payloadWithPage);
                    }
                }
            },
            {
                key: "getPageByKey$",
                value: function getPageByKey$(key) {
                    var page = key;
                    if (page.indexOf("_") > -1) return page.replace(/_/g, "-").toLowerCase();
                    for(var i = page.length - 1, character = ""; i > 0;){
                        var isNaNumber = isNaN(parseInt(character = page.charAt(i), 10)), isUpperCase = character === character.toUpperCase();
                        isNaNumber && isUpperCase && (page = "".concat(page.slice(0, i), "-").concat(page.slice(i))), i--;
                    }
                    return page.toLowerCase();
                }
            }
        ]), _AnalyticsPlugin;
    }(Ludex.Plugins.BasePlugin);
    __name(_AnalyticsPlugin, "AnalyticsPlugin");
    var AnalyticsPlugin = _AnalyticsPlugin, AnalyticsPlugin_default = AnalyticsPlugin, analytics_default = AnalyticsPlugin_default;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var _BaseAudioPlayer = function() {
        function _BaseAudioPlayer(key) {
            _class_call_check(this, _BaseAudioPlayer), _define_property(this, "key$", void 0), this.key$ = key;
        }
        return _create_class(_BaseAudioPlayer, [
            {
                key: "getKey",
                value: function getKey() {
                    return this.key$;
                }
            }
        ]), _BaseAudioPlayer;
    }();
    __name(_BaseAudioPlayer, "BaseAudioPlayer");
    var BaseAudioPlayer = _BaseAudioPlayer, AudioPlayer_default = BaseAudioPlayer;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var Decorator = Ludex.Utils.Decorator, _BaseChannelManager = function() {
        function _BaseChannelManager(channelId) {
            _class_call_check(this, _BaseChannelManager), _define_property(this, "id$", void 0), _define_property(this, "isMuteAll$", void 0), _define_property(this, "masterVolume$", void 0), _define_property(this, "audioClips$", void 0), this.id$ = channelId, this.masterVolume$ = 1, this.isMuteAll$ = !1, this.audioClips$ = {};
        }
        return _create_class(_BaseChannelManager, [
            {
                key: "getId",
                value: function getId() {
                    return this.id$;
                }
            },
            {
                key: "getAudioClip",
                value: function getAudioClip(key) {
                    return this.audioClips$[key] ? this.audioClips$[key] : null;
                }
            },
            {
                key: "setAudioClip",
                value: function setAudioClip(key, audioClip) {
                    this.audioClips$[key] = __spreadValues(__spreadValues({}, this.audioClips$[key]), audioClip);
                }
            },
            {
                key: "play",
                value: function play(key, config) {
                    return _async_to_generator(function() {
                        var audioClip, audioPlayer;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    if (!(audioClip = this.getAudioClip(key))) return [
                                        3,
                                        1
                                    ];
                                    return audioPlayer = audioClip.audioPlayer, this.playWithRealConfig$(audioPlayer, config), [
                                        3,
                                        3
                                    ];
                                case 1:
                                    return [
                                        4,
                                        this.loadAndPlay(key, config)
                                    ];
                                case 2:
                                    _state.sent(), _state.label = 3;
                                case 3:
                                    return [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "loadAndPlay",
                value: function loadAndPlay(key, config) {
                    return _async_to_generator(function() {
                        var audioPlayer, _ref_volume, volume;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    return [
                                        4,
                                        this.onLoadAudio(key, config)
                                    ];
                                case 1:
                                    if (!(audioPlayer = _state.sent())) return [
                                        2
                                    ];
                                    return volume = void 0 === (_ref_volume = (config || {}).volume) ? 1 : _ref_volume, this.setAudioClip(key, {
                                        volume: volume,
                                        audioPlayer: audioPlayer
                                    }), this.playWithRealConfig$(audioPlayer, config), [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "playWithRealConfig$",
                value: function playWithRealConfig$(audioPlayer, config) {
                    if (config) {
                        var _config_volume = config.volume, volume = void 0 === _config_volume ? 1 : _config_volume;
                        config.volume = this.masterVolume$ * volume;
                    }
                    audioPlayer.play(config);
                }
            },
            {
                key: "pause",
                value: function pause(key) {
                    var audioClip = this.getAudioClip(key);
                    return !!audioClip && (audioClip.audioPlayer.pause(), !0);
                }
            },
            {
                key: "resume",
                value: function resume(key) {
                    var audioClip = this.getAudioClip(key);
                    return !!audioClip && (audioClip.audioPlayer.resume(), !0);
                }
            },
            {
                key: "stop",
                value: function stop(key) {
                    var audioClip = this.getAudioClip(key);
                    return !!audioClip && (audioClip.audioPlayer.stop(), !0);
                }
            },
            {
                key: "stopAll",
                value: function stopAll() {
                    this.callAudioPlayers$("stop");
                }
            },
            {
                key: "muteAll",
                value: function muteAll() {
                    this.isMuteAll$ || (this.isMuteAll$ = !0, this.callAudioPlayers$("mute"));
                }
            },
            {
                key: "unmuteAll",
                value: function unmuteAll() {
                    this.isMuteAll$ && (this.isMuteAll$ = !1, this.callAudioPlayers$("unmute"));
                }
            },
            {
                key: "setVolume",
                value: function setVolume(value) {
                    this.masterVolume$ = value, this.callAudioPlayers$("setVolume");
                }
            },
            {
                key: "getVolume",
                value: function getVolume() {
                    return this.masterVolume$;
                }
            },
            {
                key: "queueAudioPlayer$",
                value: function queueAudioPlayer$(clip, funcName) {
                    try {
                        var audioPlayer = clip.audioPlayer, _clip_volume = clip.volume, volume = void 0 === _clip_volume ? 1 : _clip_volume;
                        switch(funcName){
                            case "play":
                                audioPlayer.play();
                                break;
                            case "pause":
                                audioPlayer.pause();
                                break;
                            case "resume":
                                audioPlayer.resume();
                                break;
                            case "stop":
                                audioPlayer.stop();
                                break;
                            case "mute":
                                audioPlayer.setVolume(0);
                                break;
                            case "unmute":
                            case "setVolume":
                                audioPlayer.setVolume(this.masterVolume$ * volume);
                                break;
                            default:
                                throw Error("Unsupported function: ".concat(funcName));
                        }
                    } catch (error) {
                        console.warn("queueAudioPlayer", error);
                    }
                }
            },
            {
                key: "callAudioPlayers$",
                value: function callAudioPlayers$(funcName) {
                    var audioClips = Ludex.Utils.Object.vals(this.audioClips$), _iteratorNormalCompletion = !0, _didIteratorError = !1, _iteratorError = void 0;
                    try {
                        for(var _step, _iterator = audioClips[Symbol.iterator](); !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = !0){
                            var audioClip = _step.value;
                            this.queueAudioPlayer$(audioClip, funcName);
                        }
                    } catch (err) {
                        _didIteratorError = !0, _iteratorError = err;
                    } finally{
                        try {
                            _iteratorNormalCompletion || null == _iterator.return || _iterator.return();
                        } finally{
                            if (_didIteratorError) throw _iteratorError;
                        }
                    }
                }
            }
        ]), _BaseChannelManager;
    }();
    __name(_BaseChannelManager, "BaseChannelManager"), __decorateClass([
        Decorator.tryCatch(),
        Decorator.validateParams("string")
    ], _BaseChannelManager.prototype, "loadAndPlay", 1);
    var BaseChannelManager = _BaseChannelManager, ChannelManager_default = BaseChannelManager;
    Ludex.Plugins.Audio = {
        BaseAudioPlayer: AudioPlayer_default,
        BaseChannelManager: ChannelManager_default
    };
    var _Ludex_Utils7 = Ludex.Utils, Decorator2 = _Ludex_Utils7.Decorator, _AudioPlugin = function(_Ludex_Plugins_BasePlugin) {
        function _AudioPlugin() {
            var _this;
            return _class_call_check(this, _AudioPlugin), _this = _call_super(this, _AudioPlugin, arguments), _define_property(_this, "firstChannelId$", void 0), _define_property(_this, "channels$", {}), _this;
        }
        return _inherits(_AudioPlugin, _Ludex_Plugins_BasePlugin), _create_class(_AudioPlugin, [
            {
                key: "addChannel",
                value: function addChannel(channel) {
                    var id = channel.getId();
                    this.channels$[id] = channel, this.firstChannelId$ || (this.firstChannelId$ = id);
                }
            },
            {
                key: "getChannel$",
                value: function getChannel$(channelId) {
                    if (void 0 === channelId) return this.channels$[this.firstChannelId$];
                    var channel = this.channels$[channelId];
                    if (!channel) throw Error("Channel ".concat(channelId, " not found"));
                    return channel;
                }
            },
            {
                key: "play",
                value: function play(key, config, channelId) {
                    return _async_to_generator(function() {
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    return [
                                        4,
                                        this.getChannel$(channelId).play(key, config)
                                    ];
                                case 1:
                                    return _state.sent(), [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "pause",
                value: function pause(key, channelId) {
                    try {
                        this.getChannel$(channelId).pause(key);
                    } catch (error) {
                        console.warn("pauseSound", error);
                    }
                }
            },
            {
                key: "resume",
                value: function resume(key, channelId) {
                    try {
                        this.getChannel$(channelId).resume(key);
                    } catch (error) {
                        console.warn("resumeSound", error);
                    }
                }
            },
            {
                key: "stop",
                value: function stop(key, channelId) {
                    try {
                        this.getChannel$(channelId).stop(key);
                    } catch (error) {
                        console.warn("stopSound", error);
                    }
                }
            },
            {
                key: "stopAll",
                value: function stopAll(channelId) {
                    try {
                        this.getChannel$(channelId).stopAll();
                    } catch (error) {
                        console.warn("stopAllSounds", error);
                    }
                }
            },
            {
                key: "mute",
                value: function mute(channelId) {
                    try {
                        this.getChannel$(channelId).muteAll();
                    } catch (error) {
                        console.warn("mute", error);
                    }
                }
            },
            {
                key: "unmute",
                value: function unmute(channelId) {
                    try {
                        this.getChannel$(channelId).unmuteAll();
                    } catch (error) {
                        console.warn("unmute", error);
                    }
                }
            },
            {
                key: "setVolume",
                value: function setVolume(volume, channelId) {
                    try {
                        this.getChannel$(channelId).setVolume(volume);
                    } catch (error) {
                        console.warn("setSoundVolume", error);
                    }
                }
            },
            {
                key: "getVolume",
                value: function getVolume(channelId) {
                    try {
                        return this.getChannel$(channelId).getVolume();
                    } catch (error) {
                        return console.warn("getSoundVolume", error), -1;
                    }
                }
            }
        ]), _AudioPlugin;
    }(Ludex.Plugins.BasePlugin);
    __name(_AudioPlugin, "AudioPlugin"), __decorateClass([
        Decorator2.tryCatch(),
        Decorator2.validateParams("string")
    ], _AudioPlugin.prototype, "play", 1);
    var AudioPlugin = _AudioPlugin, AudioPlugin_default = AudioPlugin, audio_default = AudioPlugin_default;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var initState2 = {
        token: "",
        isRequesting: !1
    }, state_default2 = initState2, _Ludex_Utils8 = Ludex.Utils, O5 = _Ludex_Utils8.Object, _AuthPlugin = function(_Ludex_Plugins_BasePlugin) {
        function _AuthPlugin() {
            return _class_call_check(this, _AuthPlugin), _call_super(this, _AuthPlugin, arguments);
        }
        return _inherits(_AuthPlugin, _Ludex_Plugins_BasePlugin), _create_class(_AuthPlugin, [
            {
                key: "init",
                value: function init() {
                    this.codex.storage.addStorage("auth", state_default2);
                }
            },
            {
                key: "requestToken",
                value: function requestToken() {
                    return _async_to_generator(function() {
                        var storage, signedPlayer, error;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    storage = this.codex.storage, _state.label = 1;
                                case 1:
                                    if (_state.trys.push([
                                        1,
                                        3,
                                        4,
                                        5
                                    ]), storage.getStorageData("auth", "isRequesting") || "" !== storage.getStorageData("auth", "token")) return [
                                        2
                                    ];
                                    return storage.setStorageData("auth", "isRequesting", !0), [
                                        4,
                                        GameSDK.player.getSignedPlayerInfoAsync()
                                    ];
                                case 2:
                                    return signedPlayer = _state.sent().getSignature(), storage.setStorageData("auth", "token", signedPlayer), [
                                        3,
                                        5
                                    ];
                                case 3:
                                    if (error = _state.sent(), O5.hasOwn(error, "code") && "PENDING_REQUEST" === error.code) return [
                                        2
                                    ];
                                    return storage.setStorageData("auth", "token", ""), [
                                        3,
                                        5
                                    ];
                                case 4:
                                    return storage.setStorageData("auth", "isRequesting", !1), [
                                        7
                                    ];
                                case 5:
                                    return [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "getToken",
                value: function getToken() {
                    var _storage_getStorageData;
                    return null != (_storage_getStorageData = this.codex.storage.getStorageData("auth", "token")) ? _storage_getStorageData : "";
                }
            }
        ]), _AuthPlugin;
    }(Ludex.Plugins.BasePlugin);
    __name(_AuthPlugin, "AuthPlugin");
    var AuthPlugin = _AuthPlugin, AuthPlugin_default = AuthPlugin, auth_default = AuthPlugin_default;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var ContextGameTypes = function(ContextGameTypes2) {
        return ContextGameTypes2.SOLO = "solo", ContextGameTypes2.TOURNAMENT = "tournament", ContextGameTypes2.SHARE_INVITE = "share_invite", ContextGameTypes2.MATCHING_GROUP = "matching_group_match", ContextGameTypes2.CHALLENGE_FRIEND = "challenge_friend_match", ContextGameTypes2;
    }(ContextGameTypes || {}), ContextTypes_default = ContextGameTypes;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var ContextGameModes = MatchModes_default2, ContextModes_default = ContextGameModes, Configs = Ludex.Configs, _Ludex_Utils9 = Ludex.Utils, A3 = _Ludex_Utils9.Array, V6 = _Ludex_Utils9.Valid, B = _Ludex_Utils9.Browser, _Context2 = function() {
        function _Context2(codex2) {
            _class_call_check(this, _Context2), _define_property(this, "codex$", void 0), this.codex$ = codex2;
        }
        return _create_class(_Context2, [
            {
                key: "isValidContextType$",
                value: function isValidContextType$(contextType2) {
                    return [
                        "THREAD",
                        "POST",
                        "SOLO",
                        "GROUP"
                    ].indexOf(contextType2) >= 0;
                }
            },
            {
                key: "isValidEntryPointData$",
                value: function isValidEntryPointData$(entryPointData2) {
                    return V6.isObject(entryPointData2);
                }
            },
            {
                key: "isTournamentEntryPoint$",
                value: function isTournamentEntryPoint$(entryPoint) {
                    return A3.has([
                        "facebook~game_list~tournaments",
                        "fb_feed_tournament_unit",
                        "messenger~bot_thread~tourname\
nts"
                    ], entryPoint);
                }
            },
            {
                key: "receiveContext",
                value: function receiveContext(contextId2, contextType2, entryPointData2) {
                    var storage = this.codex$.storage;
                    storage.setStorageData("context", "contextId", contextId2), this.isValidEntryPointData$(entryPointData2) ? storage.setStorageData("context", "entryPointData", entryPointData2) : console.warn("Invalid entry point data:", entryPointData2), this.isValidContextType$(contextType2) ? storage.setStorageData("context", "contextType", contextType2) : console.warn("Invalid context type: ".concat(contextType2));
                }
            },
            {
                key: "getContextId",
                value: function getContextId() {
                    var _storage_getStorageData;
                    return null != (_storage_getStorageData = this.codex$.storage.getStorageData("context", "contextId")) ? _storage_getStorageData : "";
                }
            },
            {
                key: "getContextType",
                value: function getContextType() {
                    var _storage_getStorageData;
                    return null != (_storage_getStorageData = this.codex$.storage.getStorageData("context", "contextType")) ? _storage_getStorageData : "SOLO";
                }
            },
            {
                key: "getContextData",
                value: function getContextData() {
                    var _storage_getStorageData;
                    return null != (_storage_getStorageData = this.codex$.storage.getStorageData("context", "entryPointData")) ? _storage_getStorageData : {};
                }
            },
            {
                key: "getSessionContextType",
                value: function getSessionContextType() {
                    var _storage_getStorageData;
                    return null != (_storage_getStorageData = this.codex$.storage.getStorageData("context", "sessionContextType")) ? _storage_getStorageData : "unknown";
                }
            },
            {
                key: "detectContextSessionType",
                value: function detectContextSessionType() {
                    return _async_to_generator(function() {
                        var storage, entryPointData2, type, SOLO, TOURNAMENT2, MATCHING_GROUP2, SHARE_INVITE2, CHALLENGE_FRIEND3, sessionContextType;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    if (storage = this.codex$.storage, type = (null != (entryPointData2 = this.getContextData()) ? entryPointData2 : {}).type, SOLO = ContextTypes_default.SOLO, TOURNAMENT2 = ContextTypes_default.TOURNAMENT, MATCHING_GROUP2 = ContextTypes_default.MATCHING_GROUP, SHARE_INVITE2 = ContextTypes_default.SHARE_INVITE, CHALLENGE_FRIEND3 = ContextTypes_default.CHALLENGE_FRIEND, sessionContextType = SOLO, type === TOURNAMENT2 && (sessionContextType = TOURNAMENT2), type === MATCHING_GROUP2 && (sessionContextType = MATCHING_GROUP2), (type === CHALLENGE_FRIEND3 || type === SHARE_INVITE2) && (sessionContextType = CHALLENGE_FRIEND3), sessionContextType !== SOLO) return [
                                        3,
                                        3
                                    ];
                                    if (!Configs.Core.FastCheckTournamentContext) return [
                                        3,
                                        1
                                    ];
                                    return sessionContextType = this.fastCheckTournamentContext$() || sessionContextType, [
                                        3,
                                        3
                                    ];
                                case 1:
                                    return [
                                        4,
                                        this.outdatedCheckTournamentContext$()
                                    ];
                                case 2:
                                    sessionContextType = _state.sent() || sessionContextType, _state.label = 3;
                                case 3:
                                    return storage.setStorageData("context", "sessionContextType", sessionContextType), [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "fastCheckTournamentContext$",
                value: function fastCheckTournamentContext$() {
                    var entryPoint = B.getQueryParams().entry_point;
                    return "string" == typeof entryPoint && !!this.isTournamentEntryPoint$(entryPoint) && ContextTypes_default.TOURNAMENT;
                }
            },
            {
                key: "outdatedCheckTournamentContext$",
                value: function outdatedCheckTournamentContext$() {
                    return _async_to_generator(function() {
                        var storage, tournament, e;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    if (storage = this.codex$.storage, !("getTournamentAsync" in GameSDK)) return [
                                        2,
                                        !1
                                    ];
                                    _state.label = 1;
                                case 1:
                                    return _state.trys.push([
                                        1,
                                        3,
                                        ,
                                        4
                                    ]), [
                                        4,
                                        GameSDK.getTournamentAsync()
                                    ];
                                case 2:
                                    if (tournament = _state.sent(), storage.setStorageData("context", "contextId", tournament.getContextID()), tournament.getEndTime() > Date.now() / 1e3) return [
                                        2,
                                        ContextTypes_default.TOURNAMENT
                                    ];
                                    return [
                                        2,
                                        !1
                                    ];
                                case 3:
                                    return e = _state.sent(), [
                                        2,
                                        !1
                                    ];
                                case 4:
                                    return [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "detectContextGameMode",
                value: function detectContextGameMode() {
                    var _this_codex$ = this.codex$, player = _this_codex$.player, storage = _this_codex$.storage, entryPointData2 = this.getContextData(), contextSessionType = this.getSessionContextType(), currentPlayerId = player.getPlayerId(), _ref = null != entryPointData2 ? entryPointData2 : {}, matchId = _ref.matchId, playerId2 = _ref.playerId, _ref_opponentId = _ref.opponentId, opponentId = void 0 === _ref_opponentId ? SampleOpponent_default.playerId : _ref_opponentId, isPlayer = currentPlayerId === playerId2, isOwnerContext = opponentId === SampleOpponent_default.playerId || [
                        opponentId,
                        playerId2
                    ].indexOf(currentPlayerId) >= 0, TOURNAMENT2 = ContextTypes_default.TOURNAMENT, MATCHING_GROUP2 = ContextTypes_default.MATCHING_GROUP, SHARE_INVITE2 = ContextTypes_default.SHARE_INVITE, CHALLENGE_FRIEND3 = ContextTypes_default.CHALLENGE_FRIEND, contextGameMode = ContextModes_default.SINGLE;
                    contextSessionType === TOURNAMENT2 && (contextGameMode = ContextModes_default.TOURNAMENT), contextSessionType !== SHARE_INVITE2 || isPlayer || (contextGameMode = ContextModes_default.CHALLENGE_FRIEND), contextSessionType === CHALLENGE_FRIEND3 && matchId && isOwnerContext && (contextGameMode = ContextModes_default.CHALLENGE_FRIEND), contextSessionType === MATCHING_GROUP2 && (contextGameMode = ContextModes_default.MATCHING_GROUP), storage.setStorageData("context", "contextGameMode", contextGameMode);
                }
            }
        ]), _Context2;
    }();
    __name(_Context2, "Context");
    var Context3 = _Context2, context_default = Context3;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var StepType = function(StepType2) {
        return StepType2.StartID = "__start__", StepType2;
    }(StepType || {}), StepTypes_default = StepType;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var _StepIdDuplicate = function(Error1) {
        function _StepIdDuplicate(stepId) {
            return _class_call_check(this, _StepIdDuplicate), _call_super(this, _StepIdDuplicate, [
                "Duplicate step id: ".concat(stepId)
            ]);
        }
        return _inherits(_StepIdDuplicate, Error1), _StepIdDuplicate;
    }(_wrap_native_super(Error));
    __name(_StepIdDuplicate, "StepIdDuplicate");
    var StepIdDuplicate = _StepIdDuplicate, StepIdDuplicate_default = StepIdDuplicate;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var _StepIdInvalid = function(Error1) {
        function _StepIdInvalid(stepId) {
            return _class_call_check(this, _StepIdInvalid), _call_super(this, _StepIdInvalid, [
                "Invalid step id: ".concat(stepId)
            ]);
        }
        return _inherits(_StepIdInvalid, Error1), _StepIdInvalid;
    }(_wrap_native_super(Error));
    __name(_StepIdInvalid, "StepIdInvalid");
    var StepIdInvalid = _StepIdInvalid, StepIdInvalid_default = StepIdInvalid;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var _StepNotFound = function(Error1) {
        function _StepNotFound(stepId) {
            return _class_call_check(this, _StepNotFound), _call_super(this, _StepNotFound, [
                "Step not found: ".concat(stepId)
            ]);
        }
        return _inherits(_StepNotFound, Error1), _StepNotFound;
    }(_wrap_native_super(Error));
    __name(_StepNotFound, "StepNotFound");
    var StepNotFound = _StepNotFound, StepNotFound_default = StepNotFound, _StepRegistry = function() {
        function _StepRegistry() {
            var initialSteps = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : [];
            _class_call_check(this, _StepRegistry), _define_property(this, "steps$", void 0), this.steps$ = [];
            var _iteratorNormalCompletion = !0, _didIteratorError = !1, _iteratorError = void 0;
            try {
                for(var _step, _iterator = initialSteps[Symbol.iterator](); !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = !0){
                    var step = _step.value;
                    this.addAfter(StepTypes_default.StartID, step);
                }
            } catch (err) {
                _didIteratorError = !0, _iteratorError = err;
            } finally{
                try {
                    _iteratorNormalCompletion || null == _iterator.return || _iterator.return();
                } finally{
                    if (_didIteratorError) throw _iteratorError;
                }
            }
        }
        return _create_class(_StepRegistry, [
            {
                key: "addBefore",
                value: function addBefore(targetStepId, step) {
                    if (this.validateStepId$(step.id), this.validateStepDuplicate$(step.id), targetStepId === StepTypes_default.StartID) return void this.steps$.unshift(step);
                    var targetIndex = this.getStepIndexOrThrow$(targetStepId);
                    this.steps$.splice(targetIndex, 0, step);
                }
            },
            {
                key: "addAfter",
                value: function addAfter(targetStepId, step) {
                    if (this.validateStepId$(step.id), this.validateStepDuplicate$(step.id), targetStepId === StepTypes_default.StartID) return void this.steps$.push(step);
                    var targetIndex = this.getStepIndexOrThrow$(targetStepId);
                    this.steps$.splice(targetIndex + 1, 0, step);
                }
            },
            {
                key: "replace",
                value: function replace(stepId, patch) {
                    this.validateStepId$(stepId);
                    var index = this.getStepIndexOrThrow$(stepId), currentStep = this.steps$[index];
                    this.steps$[index] = __spreadValues(__spreadValues({}, currentStep), patch);
                }
            },
            {
                key: "remove",
                value: function remove(stepId) {
                    var index = this.getStepIndexOrThrow$(stepId);
                    this.steps$.splice(index, 1);
                }
            },
            {
                key: "runAsync",
                value: function runAsync(context) {
                    return _async_to_generator(function() {
                        var startedAt, rows, _iteratorNormalCompletion, _didIteratorError, _iteratorError, _iterator, _step, step, stepStart, _ref, shouldContinue, targetScene, err;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    startedAt = performance.now(), rows = [], _state.label = 1;
                                case 1:
                                    _state.trys.push([
                                        1,
                                        ,
                                        10,
                                        11
                                    ]), _iteratorNormalCompletion = !0, _didIteratorError = !1, _iteratorError = void 0, _state.label = 2;
                                case 2:
                                    _state.trys.push([
                                        2,
                                        7,
                                        8,
                                        9
                                    ]), _iterator = this.steps$[Symbol.iterator](), _state.label = 3;
                                case 3:
                                    if (_iteratorNormalCompletion = (_step = _iterator.next()).done) return [
                                        3,
                                        6
                                    ];
                                    return step = _step.value, stepStart = performance.now(), [
                                        4,
                                        this.runStep$(step, context)
                                    ];
                                case 4:
                                    if (shouldContinue = (_ref = _state.sent()).shouldContinue, targetScene = _ref.targetScene, shouldContinue && rows.push({
                                        stepId: step.id,
                                        targetScene: targetScene,
                                        ms: this.getDuration$(stepStart)
                                    }), !shouldContinue) return [
                                        2,
                                        !0
                                    ];
                                    _state.label = 5;
                                case 5:
                                    return _iteratorNormalCompletion = !0, [
                                        3,
                                        3
                                    ];
                                case 6:
                                    return [
                                        3,
                                        9
                                    ];
                                case 7:
                                    return err = _state.sent(), _didIteratorError = !0, _iteratorError = err, [
                                        3,
                                        9
                                    ];
                                case 8:
                                    try {
                                        _iteratorNormalCompletion || null == _iterator.return || _iterator.return();
                                    } finally{
                                        if (_didIteratorError) throw _iteratorError;
                                    }
                                    return [
                                        7
                                    ];
                                case 9:
                                    return [
                                        3,
                                        11
                                    ];
                                case 10:
                                    return this.logResult$(rows, startedAt), [
                                        7
                                    ];
                                case 11:
                                    return [
                                        2,
                                        !1
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "runStep$",
                value: function runStep$(step, context) {
                    return _async_to_generator(function() {
                        var _context_sceneName;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    return [
                                        4,
                                        step.runAsync(context)
                                    ];
                                case 1:
                                    return [
                                        2,
                                        {
                                            shouldContinue: _state.sent(),
                                            targetScene: null != (_context_sceneName = context.sceneName) ? _context_sceneName : null
                                        }
                                    ];
                            }
                        });
                    })();
                }
            },
            {
                key: "logResult$",
                value: function logResult$(rows, startedAt) {
                    var totalMs = this.getDuration$(startedAt);
                    console.groupCollapsed("\uD83D\uDD00 Steps Result (".concat(totalMs, "ms)")), console.table(rows), console.groupEnd();
                }
            },
            {
                key: "validateStepId$",
                value: function validateStepId$(stepId) {
                    if ("string" != typeof stepId || 0 === stepId.trim().length) throw new StepIdInvalid_default("".concat(stepId));
                }
            },
            {
                key: "validateStepDuplicate$",
                value: function validateStepDuplicate$(stepId) {
                    if (this.steps$.some(function(s) {
                        return s.id === stepId;
                    })) throw new StepIdDuplicate_default(stepId);
                }
            },
            {
                key: "findIndex$",
                value: function findIndex$(stepId) {
                    return this.validateStepId$(stepId), this.steps$.findIndex(function(s) {
                        return s.id === stepId;
                    });
                }
            },
            {
                key: "getStepIndexOrThrow$",
                value: function getStepIndexOrThrow$(stepId) {
                    var index = this.findIndex$(stepId);
                    if (index < 0) throw new StepNotFound_default(stepId);
                    return index;
                }
            },
            {
                key: "getDuration$",
                value: function getDuration$(start) {
                    return Math.round((performance.now() - start) * 100) / 100;
                }
            }
        ]), _StepRegistry;
    }();
    __name(_StepRegistry, "StepRegistry");
    var StepRegistry = _StepRegistry, StepRegistry_default = StepRegistry;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var createChallengeFromPostStep = __name(function() {
        return {
            id: "ChallengeFromPost",
            runAsync: __name(function(context) {
                return _async_to_generator(function() {
                    var opponentId, match, playerId2;
                    return _ts_generator(this, function(_state) {
                        switch(_state.label){
                            case 0:
                                if ("string" != typeof (opponentId = context.contextData.playerId)) return [
                                    2,
                                    !0
                                ];
                                if (match = codex.match, (playerId2 = codex.player.getPlayerId()) !== opponentId) return [
                                    3,
                                    2
                                ];
                                return [
                                    4,
                                    match.single.start.processAsync({
                                        playerId: playerId2
                                    })
                                ];
                            case 1:
                            case 3:
                            case 5:
                                return _state.sent(), [
                                    3,
                                    6
                                ];
                            case 2:
                                return _state.trys.push([
                                    2,
                                    4,
                                    ,
                                    6
                                ]), [
                                    4,
                                    match.challenge.friend.processAsync({
                                        playerId: playerId2,
                                        opponentId: opponentId
                                    })
                                ];
                            case 4:
                                return console.warn("ChallengeFromPostStep", _state.sent()), [
                                    4,
                                    match.single.start.processAsync({
                                        playerId: playerId2
                                    })
                                ];
                            case 6:
                                return context.sceneName = "GameScene", [
                                    2,
                                    !0
                                ];
                        }
                    });
                })();
            }, "runAsync")
        };
    }, "createChallengeFromPostStep"), ChallengeFromPostStep_default = createChallengeFromPostStep;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var createSwitchSceneStep = __name(function() {
        return {
            id: "SwitchScene",
            runAsync: __name(function(context) {
                return _async_to_generator(function() {
                    var sceneName, sceneData;
                    return _ts_generator(this, function(_state) {
                        return (sceneName = context.sceneName) ? (sceneData = {
                            isFromLoader: !0
                        }, codex.event.emit(Ludex.Events.SWITCH_SCENE, {
                            sceneName: sceneName,
                            sceneData: sceneData
                        }), [
                            2,
                            !1
                        ]) : [
                            2,
                            !0
                        ];
                    });
                })();
            }, "runAsync")
        };
    }, "createSwitchSceneStep"), SwitchSceneStep_default = createSwitchSceneStep, SHARE_INVITE = ContextTypes_default.SHARE_INVITE, CHALLENGE_FRIEND = ContextTypes_default.CHALLENGE_FRIEND, createChallengeFromPostFlow = __name(function() {
        return {
            id: "ChallengeFromPostFlow",
            when: __name(function(context) {
                var _context_contextData = context.contextData, type = _context_contextData.type, playerId2 = _context_contextData.playerId, contextSessionType = context.contextSessionType;
                return type === SHARE_INVITE && "string" == typeof playerId2 && contextSessionType === CHALLENGE_FRIEND;
            }, "when"),
            do: new StepRegistry_default([
                ChallengeFromPostStep_default(),
                SwitchSceneStep_default()
            ])
        };
    }, "createChallengeFromPostFlow"), ChallengeFromPostFlow_default = createChallengeFromPostFlow;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var _PlayerHasFinishedMatch = function(Error1) {
        function _PlayerHasFinishedMatch(message) {
            var _this;
            return _class_call_check(this, _PlayerHasFinishedMatch), (_this = _call_super(this, _PlayerHasFinishedMatch, [
                message
            ])).name = "PlayerHasFinishedMatch", _this.message = null != message ? message : "Player has finished match", _this;
        }
        return _inherits(_PlayerHasFinishedMatch, Error1), _PlayerHasFinishedMatch;
    }(_wrap_native_super(Error));
    __name(_PlayerHasFinishedMatch, "PlayerHasFinishedMatch");
    var PlayerHasFinishedMatch = _PlayerHasFinishedMatch, PlayerHasFinishedMatch_default = PlayerHasFinishedMatch;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var _PlayerNotJoinInMatch = function(Error1) {
        function _PlayerNotJoinInMatch(message) {
            var _this;
            return _class_call_check(this, _PlayerNotJoinInMatch), (_this = _call_super(this, _PlayerNotJoinInMatch, [
                message
            ])).name = "PlayerNotJoinInMatch", _this.message = message || "Player is not join in match", _this;
        }
        return _inherits(_PlayerNotJoinInMatch, Error1), _PlayerNotJoinInMatch;
    }(_wrap_native_super(Error));
    __name(_PlayerNotJoinInMatch, "PlayerNotJoinInMatch");
    var PlayerNotJoinInMatch = _PlayerNotJoinInMatch, PlayerNotJoinInMatch_default = PlayerNotJoinInMatch, processContinueChallengeFromMessageAsync = __name(function(payload) {
        return _async_to_generator(function() {
            var match, player, contextId2, matchId, inviterId, receiverId, curPlayerId, isSampleOpponent;
            return _ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        if (match = codex.match, player = codex.player, contextId2 = payload.contextId, matchId = payload.matchId, inviterId = payload.playerId, receiverId = payload.opponentId, curPlayerId = player.getPlayerId(), inviterId !== curPlayerId) return [
                            3,
                            2
                        ];
                        return [
                            4,
                            match.challenge.continue.processAsync({
                                contextId: contextId2,
                                matchId: matchId,
                                playerId: curPlayerId,
                                opponentId: receiverId
                            })
                        ];
                    case 1:
                        return _state.sent(), [
                            3,
                            4
                        ];
                    case 2:
                        return isSampleOpponent = receiverId === SampleOpponent_default.playerId, [
                            4,
                            match.challenge.continue.processAsync({
                                contextId: contextId2,
                                matchId: matchId,
                                playerId: curPlayerId,
                                opponentId: isSampleOpponent ? receiverId : inviterId
                            })
                        ];
                    case 3:
                        _state.sent(), _state.label = 4;
                    case 4:
                        return [
                            2
                        ];
                }
            });
        })();
    }, "processContinueChallengeFromMessageAsync"), processJoinChallengeFromMessageAsync = __name(function(payload) {
        return _async_to_generator(function() {
            var match, player, contextId2, matchId, inviterId, curPlayerId, e;
            return _ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        match = codex.match, player = codex.player, contextId2 = payload.contextId, matchId = payload.matchId, inviterId = payload.playerId, curPlayerId = player.getPlayerId(), _state.label = 1;
                    case 1:
                        return _state.trys.push([
                            1,
                            3,
                            ,
                            4
                        ]), [
                            4,
                            match.challenge.join.processAsync({
                                contextId: contextId2,
                                matchId: matchId,
                                playerId: curPlayerId,
                                opponentId: inviterId
                            })
                        ];
                    case 2:
                        return _state.sent(), [
                            2,
                            "GameScene"
                        ];
                    case 3:
                        return e = _state.sent(), [
                            2,
                            "DashboardScene"
                        ];
                    case 4:
                        return [
                            2
                        ];
                }
            });
        })();
    }, "processJoinChallengeFromMessageAsync"), processResultChallengeFromMessageAsync = __name(function(payload) {
        return _async_to_generator(function() {
            var match, player, contextId2, matchId, inviterId, curPlayerId, e;
            return _ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        match = codex.match, player = codex.player, contextId2 = payload.contextId, matchId = payload.matchId, inviterId = payload.playerId, curPlayerId = player.getPlayerId(), _state.label = 1;
                    case 1:
                        return _state.trys.push([
                            1,
                            3,
                            ,
                            4
                        ]), [
                            4,
                            match.challenge.result.processAsync({
                                contextId: contextId2,
                                matchId: matchId,
                                playerId: curPlayerId,
                                opponentId: inviterId
                            })
                        ];
                    case 2:
                        return _state.sent(), [
                            2,
                            "ChallengeResultScene"
                        ];
                    case 3:
                        return e = _state.sent(), [
                            2,
                            "DashboardScene"
                        ];
                    case 4:
                        return [
                            2
                        ];
                }
            });
        })();
    }, "processResultChallengeFromMessageAsync"), processAwaitChallengeFromMessageAsync = __name(function(payload) {
        return _async_to_generator(function() {
            var match, player, contextId2, matchId, inviterId, curPlayerId;
            return _ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        match = codex.match, player = codex.player, contextId2 = payload.contextId, matchId = payload.matchId, inviterId = payload.playerId, curPlayerId = player.getPlayerId(), _state.label = 1;
                    case 1:
                        return _state.trys.push([
                            1,
                            3,
                            ,
                            5
                        ]), [
                            4,
                            match.challenge.await.processAsync({
                                contextId: contextId2,
                                matchId: matchId,
                                playerId: curPlayerId,
                                opponentId: inviterId
                            })
                        ];
                    case 2:
                        return _state.sent(), [
                            2,
                            "ChallengeResultScene"
                        ];
                    case 3:
                        return console.warn("processAwaitChallengeFromMessageAsync", _state.sent()), [
                            4,
                            processResultChallengeFromMessageAsync(payload)
                        ];
                    case 4:
                        return [
                            2,
                            _state.sent()
                        ];
                    case 5:
                        return [
                            2
                        ];
                }
            });
        })();
    }, "processAwaitChallengeFromMessageAsync"), processChallengeFromMessageAsync = __name(function(payload) {
        return _async_to_generator(function() {
            var error;
            return _ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return _state.trys.push([
                            0,
                            2,
                            ,
                            7
                        ]), [
                            4,
                            processContinueChallengeFromMessageAsync(payload)
                        ];
                    case 1:
                        return _state.sent(), [
                            3,
                            7
                        ];
                    case 2:
                        if (console.warn("processContinueChallengeFromMessageAsync", error = _state.sent()), !_instanceof(error, PlayerHasFinishedMatch_default)) return [
                            3,
                            4
                        ];
                        return [
                            4,
                            processAwaitChallengeFromMessageAsync(payload)
                        ];
                    case 3:
                    case 5:
                        return [
                            2,
                            _state.sent()
                        ];
                    case 4:
                        if (!_instanceof(error, PlayerNotJoinInMatch_default)) return [
                            3,
                            6
                        ];
                        return [
                            4,
                            processJoinChallengeFromMessageAsync(payload)
                        ];
                    case 6:
                        return [
                            2,
                            "DashboardScene"
                        ];
                    case 7:
                        return [
                            2,
                            "GameScene"
                        ];
                }
            });
        })();
    }, "processChallengeFromMessageAsync"), createChallengeFromMessageStep = __name(function() {
        return {
            id: "ChallengeFromMessage",
            runAsync: __name(function(context) {
                return _async_to_generator(function() {
                    var contextId2, contextData, matchId, playerId2, opponentId;
                    return _ts_generator(this, function(_state) {
                        switch(_state.label){
                            case 0:
                                if (contextId2 = context.contextId, matchId = (contextData = context.contextData).matchId, playerId2 = contextData.playerId, opponentId = contextData.opponentId, "string" != typeof matchId || "string" != typeof playerId2 || "string" != typeof opponentId) return [
                                    2,
                                    !0
                                ];
                                return [
                                    4,
                                    processChallengeFromMessageAsync({
                                        contextId: contextId2,
                                        matchId: matchId,
                                        playerId: playerId2,
                                        opponentId: opponentId
                                    })
                                ];
                            case 1:
                                return context.sceneName = _state.sent(), [
                                    2,
                                    !0
                                ];
                        }
                    });
                })();
            }, "runAsync")
        };
    }, "createChallengeFromMessageStep"), ChallengeFromMessageStep_default = createChallengeFromMessageStep, CHALLENGE_FRIEND2 = ContextTypes_default.CHALLENGE_FRIEND, createChallengeFromMessageFlow = __name(function() {
        return {
            id: "ChallengeFromMessageFlow",
            when: __name(function(context) {
                var _context_contextData = context.contextData, type = _context_contextData.type, matchId = _context_contextData.matchId, playerId2 = _context_contextData.playerId, opponentId = _context_contextData.opponentId, contextSessionType = context.contextSessionType;
                return type === CHALLENGE_FRIEND2 && "string" == typeof matchId && "string" == typeof playerId2 && "string" == typeof opponentId && contextSessionType === CHALLENGE_FRIEND2;
            }, "when"),
            do: new StepRegistry_default([
                ChallengeFromMessageStep_default(),
                SwitchSceneStep_default()
            ])
        };
    }, "createChallengeFromMessageFlow"), ChallengeFromMessageFlow_default = createChallengeFromMessageFlow;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var createStartSingleForFirstSessionStep = __name(function() {
        return {
            id: "StartSingleForFirstSession",
            runAsync: __name(function(context) {
                return _async_to_generator(function() {
                    var match, player, playerId2;
                    return _ts_generator(this, function(_state) {
                        switch(_state.label){
                            case 0:
                                return match = codex.match, playerId2 = (player = codex.player).getPlayerId(), [
                                    4,
                                    match.handler.setMatchCustomData({
                                        playerId: playerId2,
                                        contextId: "SOLO"
                                    })
                                ];
                            case 1:
                                return _state.sent(), [
                                    4,
                                    match.single.start.processAsync({
                                        playerId: playerId2
                                    })
                                ];
                            case 2:
                                return _state.sent(), player.loggedIn(), context.sceneName = "GameScene", [
                                    2,
                                    !0
                                ];
                        }
                    });
                })();
            }, "runAsync")
        };
    }, "createStartSingleForFirstSessionStep"), StartSingleForFirstSessionStep_default = createStartSingleForFirstSessionStep, createFirstSessionFlow = __name(function() {
        return {
            id: "FirstSessionFlow",
            when: __name(function(context) {
                return context.isFirstSession;
            }, "when"),
            do: new StepRegistry_default([
                StartSingleForFirstSessionStep_default(),
                SwitchSceneStep_default()
            ])
        };
    }, "createFirstSessionFlow"), FirstSessionFlow_default = createFirstSessionFlow;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var createMatchingGroupJoinStep = __name(function() {
        return {
            id: "MatchingGroupJoin",
            runAsync: __name(function(context) {
                return _async_to_generator(function() {
                    var _context_contextData, opponentId, opponentScore, match, player;
                    return _ts_generator(this, function(_state) {
                        switch(_state.label){
                            case 0:
                                if (opponentId = (_context_contextData = context.contextData).playerId, opponentScore = _context_contextData.playerScore, "string" != typeof opponentId || "number" != typeof opponentScore) return [
                                    2,
                                    !0
                                ];
                                return match = codex.match, player = codex.player, [
                                    4,
                                    match.group.join.processAsync({
                                        playerId: player.getPlayerId(),
                                        opponentId: opponentId,
                                        opponentScore: opponentScore
                                    })
                                ];
                            case 1:
                                return _state.sent(), context.sceneName = "GameScene", [
                                    2,
                                    !0
                                ];
                        }
                    });
                })();
            }, "runAsync")
        };
    }, "createMatchingGroupJoinStep"), MatchingGroupJoinStep_default = createMatchingGroupJoinStep, MATCHING_GROUP = ContextTypes_default.MATCHING_GROUP, createMatchingGroupFlow = __name(function() {
        return {
            id: "MatchingGroupFlow",
            when: __name(function(context) {
                var _context_contextData = context.contextData, playerId2 = _context_contextData.playerId, playerScore = _context_contextData.playerScore, contextSessionType = context.contextSessionType;
                return "string" == typeof playerId2 && "number" == typeof playerScore && contextSessionType === MATCHING_GROUP;
            }, "when"),
            do: new StepRegistry_default([
                MatchingGroupJoinStep_default(),
                SwitchSceneStep_default()
            ])
        };
    }, "createMatchingGroupFlow"), MatchingGroupFlow_default = createMatchingGroupFlow;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var Events2 = Ludex.Events, _Ludex_Utils10 = Ludex.Utils, V7 = _Ludex_Utils10.Valid;
    __name(requestSetLocale$, "requestSetLocale$");
    var processEntryPointActionAsync = __name(function(action) {
        return _async_to_generator(function() {
            var player;
            return _ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        switch(player = codex.player, action){
                            case "reset_data":
                                return [
                                    3,
                                    1
                                ];
                            case "enable_debug":
                                return [
                                    3,
                                    3
                                ];
                            case "set_locale_en":
                                return [
                                    3,
                                    4
                                ];
                            case "set_locale_ru":
                                return [
                                    3,
                                    5
                                ];
                        }
                        return [
                            3,
                            6
                        ];
                    case 1:
                        return player.setPlayerDataByName("score", 0), player.setGameData({
                            coins: 0,
                            level: 1
                        }), [
                            4,
                            player.syncProfileToServer()
                        ];
                    case 2:
                        return _state.sent(), [
                            3,
                            6
                        ];
                    case 3:
                        return player.setPlayerDataByName("debug", !0), [
                            3,
                            6
                        ];
                    case 4:
                        return requestSetLocale$("en"), [
                            3,
                            6
                        ];
                    case 5:
                        return requestSetLocale$("ru"), [
                            3,
                            6
                        ];
                    case 6:
                        return [
                            2
                        ];
                }
            });
        })();
    }, "processEntryPointActionAsync"), createEntryPointActionStep = __name(function() {
        return {
            id: "EntryPointAction",
            runAsync: __name(function(context) {
                return _async_to_generator(function() {
                    var action;
                    return _ts_generator(this, function(_state) {
                        switch(_state.label){
                            case 0:
                                if (_state.trys.push([
                                    0,
                                    2,
                                    ,
                                    3
                                ]), action = context.contextData.action, !V7.isString(action)) return [
                                    2,
                                    !0
                                ];
                                return [
                                    4,
                                    processEntryPointActionAsync(action)
                                ];
                            case 1:
                                return _state.sent(), [
                                    2,
                                    !0
                                ];
                            case 2:
                                return console.warn("EntryPointActionStep", _state.sent()), [
                                    2,
                                    !0
                                ];
                            case 3:
                                return [
                                    2
                                ];
                        }
                    });
                })();
            }, "runAsync")
        };
    }, "createEntryPointActionStep"), EntryPointActionStep_default = createEntryPointActionStep;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var Analytics = Ludex.Plugins.Analytics, logUserAnalytics$ = __name(function(isFirstSession) {
        try {
            var player = codex.player, analytics = codex.analytics;
            if (!analytics) return;
            if (isFirstSession) analytics.event(Analytics.Events.NEW_USER);
            else {
                var coins2 = player.getPlayerData().gameData.coins;
                analytics.event(Analytics.Events.RETURNING_USER, {
                    coins: coins2
                });
            }
        } catch (e) {}
    }, "logUserAnalytics$"), createLogUserAnalyticsStep = __name(function() {
        return {
            id: "LogUserAnalytics",
            runAsync: __name(function(context) {
                return _async_to_generator(function() {
                    return _ts_generator(this, function(_state) {
                        return setTimeout(function() {
                            logUserAnalytics$(context.isFirstSession);
                        }, 1e3), [
                            2,
                            !0
                        ];
                    });
                })();
            }, "runAsync")
        };
    }, "createLogUserAnalyticsStep"), LogUserAnalyticsStep_default = createLogUserAnalyticsStep, createPreFlow = __name(function() {
        return {
            id: "PreFlow",
            when: __name(function(_context) {
                return !0;
            }, "when"),
            do: new StepRegistry_default([
                EntryPointActionStep_default(),
                LogUserAnalyticsStep_default()
            ])
        };
    }, "createPreFlow"), PreFlow_default = createPreFlow;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var createPrepareDashboardSceneStep = __name(function() {
        return {
            id: "PrepareDashboardScene",
            runAsync: __name(function(context) {
                return _async_to_generator(function() {
                    return _ts_generator(this, function(_state) {
                        return context.sceneName = "DashboardScene", [
                            2,
                            !0
                        ];
                    });
                })();
            }, "runAsync")
        };
    }, "createPrepareDashboardSceneStep"), PrepareDashboardSceneStep_default = createPrepareDashboardSceneStep, createNormalFlow = __name(function() {
        return {
            id: "NormalFlow",
            when: __name(function(_context) {
                return !0;
            }, "when"),
            do: new StepRegistry_default([
                PrepareDashboardSceneStep_default(),
                SwitchSceneStep_default()
            ])
        };
    }, "createNormalFlow"), NormalFlow_default = createNormalFlow;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var _ContextIdInvalid = function(Error1) {
        function _ContextIdInvalid() {
            return _class_call_check(this, _ContextIdInvalid), _call_super(this, _ContextIdInvalid, [
                "ContextIdInvalid"
            ]);
        }
        return _inherits(_ContextIdInvalid, Error1), _ContextIdInvalid;
    }(_wrap_native_super(Error));
    __name(_ContextIdInvalid, "ContextIdInvalid");
    var ContextIdInvalid = _ContextIdInvalid, ContextIdInvalid_default = ContextIdInvalid, _Ludex_Utils11 = Ludex.Utils, V8 = _Ludex_Utils11.Valid, createContinueTournamentStep = __name(function() {
        return {
            id: "ContinueTournament",
            runAsync: __name(function(context) {
                return _async_to_generator(function() {
                    var match, playerId2, e;
                    return _ts_generator(this, function(_state) {
                        switch(_state.label){
                            case 0:
                                if (_state.trys.push([
                                    0,
                                    2,
                                    ,
                                    3
                                ]), match = codex.match, playerId2 = codex.player.getPlayerId(), V8.isEmpty(context.contextId)) throw new ContextIdInvalid_default();
                                return [
                                    4,
                                    match.tournament.continue.processAsync({
                                        playerId: playerId2,
                                        contextId: context.contextId
                                    })
                                ];
                            case 1:
                                return _state.sent(), context.sceneName = "GameScene", [
                                    3,
                                    3
                                ];
                            case 2:
                                return e = _state.sent(), [
                                    3,
                                    3
                                ];
                            case 3:
                                return [
                                    2,
                                    !0
                                ];
                        }
                    });
                })();
            }, "runAsync")
        };
    }, "createContinueTournamentStep"), ContinueTournamentStep_default = createContinueTournamentStep, TOURNAMENT = ContextTypes_default.TOURNAMENT, createTournamentFlow = __name(function() {
        return {
            id: "TournamentFlow",
            when: __name(function(context) {
                return context.contextSessionType === TOURNAMENT;
            }, "when"),
            do: new StepRegistry_default([
                ContinueTournamentStep_default(),
                SwitchSceneStep_default()
            ])
        };
    }, "createTournamentFlow"), TournamentFlow_default = createTournamentFlow;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var FlowType = function(FlowType2) {
        return FlowType2.StartID = "__start__", FlowType2;
    }(FlowType || {}), FlowTypes_default = FlowType;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var _FlowIdDuplicate = function(Error1) {
        function _FlowIdDuplicate(flowId) {
            return _class_call_check(this, _FlowIdDuplicate), _call_super(this, _FlowIdDuplicate, [
                "Duplicate flow id: ".concat(flowId)
            ]);
        }
        return _inherits(_FlowIdDuplicate, Error1), _FlowIdDuplicate;
    }(_wrap_native_super(Error));
    __name(_FlowIdDuplicate, "FlowIdDuplicate");
    var FlowIdDuplicate = _FlowIdDuplicate, FlowIdDuplicate_default = FlowIdDuplicate;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var _FlowIdInvalid = function(Error1) {
        function _FlowIdInvalid(flowId) {
            return _class_call_check(this, _FlowIdInvalid), _call_super(this, _FlowIdInvalid, [
                "Invalid flow id: ".concat(flowId)
            ]);
        }
        return _inherits(_FlowIdInvalid, Error1), _FlowIdInvalid;
    }(_wrap_native_super(Error));
    __name(_FlowIdInvalid, "FlowIdInvalid");
    var FlowIdInvalid = _FlowIdInvalid, FlowIdInvalid_default = FlowIdInvalid;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var _FlowNotFound = function(Error1) {
        function _FlowNotFound(flowId) {
            return _class_call_check(this, _FlowNotFound), _call_super(this, _FlowNotFound, [
                "Flow not found: ".concat(flowId)
            ]);
        }
        return _inherits(_FlowNotFound, Error1), _FlowNotFound;
    }(_wrap_native_super(Error));
    __name(_FlowNotFound, "FlowNotFound");
    var FlowNotFound = _FlowNotFound, FlowNotFound_default = FlowNotFound, _FlowRegistry = function() {
        function _FlowRegistry() {
            var initialFlows = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : [];
            _class_call_check(this, _FlowRegistry), _define_property(this, "flows$", void 0), this.flows$ = [];
            var _iteratorNormalCompletion = !0, _didIteratorError = !1, _iteratorError = void 0;
            try {
                for(var _step, _iterator = initialFlows[Symbol.iterator](); !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = !0){
                    var flow = _step.value;
                    this.addAfter(FlowTypes_default.StartID, flow);
                }
            } catch (err) {
                _didIteratorError = !0, _iteratorError = err;
            } finally{
                try {
                    _iteratorNormalCompletion || null == _iterator.return || _iterator.return();
                } finally{
                    if (_didIteratorError) throw _iteratorError;
                }
            }
        }
        return _create_class(_FlowRegistry, [
            {
                key: "createSteps",
                value: function createSteps(steps) {
                    return new StepRegistry_default(steps);
                }
            },
            {
                key: "addBefore",
                value: function addBefore(targetFlowId, flow) {
                    if (this.validateFlowId$(flow.id), this.validateFlowDuplicate$(flow.id), targetFlowId === FlowTypes_default.StartID) return void this.flows$.unshift(flow);
                    var targetIndex = this.getFlowIndexOrThrow$(targetFlowId);
                    this.flows$.splice(targetIndex, 0, flow);
                }
            },
            {
                key: "addAfter",
                value: function addAfter(targetFlowId, flow) {
                    if (this.validateFlowId$(flow.id), this.validateFlowDuplicate$(flow.id), targetFlowId === FlowTypes_default.StartID) return void this.flows$.push(flow);
                    var targetIndex = this.getFlowIndexOrThrow$(targetFlowId);
                    this.flows$.splice(targetIndex + 1, 0, flow);
                }
            },
            {
                key: "replace",
                value: function replace(flowId, patch) {
                    this.validateFlowId$(flowId);
                    var index = this.getFlowIndexOrThrow$(flowId), currentFlow = this.flows$[index];
                    this.flows$[index] = __spreadValues(__spreadValues({}, currentFlow), patch);
                }
            },
            {
                key: "remove",
                value: function remove(flowId) {
                    var index = this.getFlowIndexOrThrow$(flowId);
                    this.flows$.splice(index, 1);
                }
            },
            {
                key: "runAsync",
                value: function runAsync(context) {
                    return _async_to_generator(function() {
                        var startedAt, rows, _iteratorNormalCompletion, _didIteratorError, _iteratorError, _iterator, _step, flow, flowStart, _ref, matched, done, err;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    startedAt = performance.now(), rows = [], _state.label = 1;
                                case 1:
                                    _state.trys.push([
                                        1,
                                        ,
                                        10,
                                        11
                                    ]), _iteratorNormalCompletion = !0, _didIteratorError = !1, _iteratorError = void 0, _state.label = 2;
                                case 2:
                                    _state.trys.push([
                                        2,
                                        7,
                                        8,
                                        9
                                    ]), _iterator = this.flows$[Symbol.iterator](), _state.label = 3;
                                case 3:
                                    if (_iteratorNormalCompletion = (_step = _iterator.next()).done) return [
                                        3,
                                        6
                                    ];
                                    return flow = _step.value, flowStart = performance.now(), [
                                        4,
                                        this.matchAndRunFlow$(flow, context)
                                    ];
                                case 4:
                                    if (matched = (_ref = _state.sent()).matched, done = _ref.done, rows.push({
                                        flowId: flow.id,
                                        matched: matched,
                                        done: done,
                                        ms: this.getDuration$(flowStart)
                                    }), done) return [
                                        2,
                                        !0
                                    ];
                                    _state.label = 5;
                                case 5:
                                    return _iteratorNormalCompletion = !0, [
                                        3,
                                        3
                                    ];
                                case 6:
                                    return [
                                        3,
                                        9
                                    ];
                                case 7:
                                    return err = _state.sent(), _didIteratorError = !0, _iteratorError = err, [
                                        3,
                                        9
                                    ];
                                case 8:
                                    try {
                                        _iteratorNormalCompletion || null == _iterator.return || _iterator.return();
                                    } finally{
                                        if (_didIteratorError) throw _iteratorError;
                                    }
                                    return [
                                        7
                                    ];
                                case 9:
                                    return [
                                        3,
                                        11
                                    ];
                                case 10:
                                    return this.logResult$(rows, startedAt), [
                                        7
                                    ];
                                case 11:
                                    return [
                                        2,
                                        !1
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "matchAndRunFlow$",
                value: function matchAndRunFlow$(flow, context) {
                    return _async_to_generator(function() {
                        var matched;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    matched = !1;
                                    try {
                                        matched = flow.when(context);
                                    } catch (error) {
                                        console.warn("FlowRegistry.when(".concat(flow.id, ")"), error);
                                    }
                                    if (!matched) return [
                                        2,
                                        {
                                            matched: !1,
                                            done: !1
                                        }
                                    ];
                                    return [
                                        4,
                                        flow.do.runAsync(context)
                                    ];
                                case 1:
                                    return [
                                        2,
                                        {
                                            matched: !0,
                                            done: _state.sent()
                                        }
                                    ];
                            }
                        });
                    })();
                }
            },
            {
                key: "logResult$",
                value: function logResult$(rows, startedAt) {
                    var totalMs = this.getDuration$(startedAt);
                    console.groupCollapsed("\uD83D\uDD00 Flows Result (".concat(totalMs, "ms)")), console.table(rows), console.groupEnd();
                }
            },
            {
                key: "validateFlowId$",
                value: function validateFlowId$(flowId) {
                    if ("string" != typeof flowId || 0 === flowId.trim().length) throw new FlowIdInvalid_default("".concat(flowId));
                }
            },
            {
                key: "validateFlowDuplicate$",
                value: function validateFlowDuplicate$(flowId) {
                    if (this.flows$.some(function(f) {
                        return f.id === flowId;
                    })) throw new FlowIdDuplicate_default(flowId);
                }
            },
            {
                key: "findIndex$",
                value: function findIndex$(flowId) {
                    return this.validateFlowId$(flowId), this.flows$.findIndex(function(f) {
                        return f.id === flowId;
                    });
                }
            },
            {
                key: "getFlowIndexOrThrow$",
                value: function getFlowIndexOrThrow$(flowId) {
                    var index = this.findIndex$(flowId);
                    if (index < 0) throw new FlowNotFound_default(flowId);
                    return index;
                }
            },
            {
                key: "getDuration$",
                value: function getDuration$(start) {
                    return Math.round((performance.now() - start) * 100) / 100;
                }
            }
        ]), _FlowRegistry;
    }();
    __name(_FlowRegistry, "FlowRegistry");
    var FlowRegistry = _FlowRegistry, FlowRegistry_default = FlowRegistry, _Loader = function() {
        function _Loader(codex2) {
            _class_call_check(this, _Loader), _define_property(this, "codex", void 0), _define_property(this, "flows", void 0), this.codex = codex2, this.flows = new FlowRegistry_default([
                PreFlow_default(),
                TournamentFlow_default(),
                ChallengeFromPostFlow_default(),
                ChallengeFromMessageFlow_default(),
                MatchingGroupFlow_default(),
                FirstSessionFlow_default(),
                NormalFlow_default()
            ]);
        }
        return _create_class(_Loader, [
            {
                key: "processContextData",
                value: function processContextData() {
                    return _async_to_generator(function() {
                        var _this_codex, player, context, contextData, contextInfo;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    return player = (_this_codex = this.codex).player, contextData = (context = _this_codex.context).getContextData(), contextInfo = {
                                        contextId: context.getContextId(),
                                        contextData: contextData,
                                        contextSessionType: context.getSessionContextType(),
                                        isFirstSession: player.isFirstSession()
                                    }, console.groupCollapsed("\uD83D\uDD00 ContextLoader"), console.table([
                                        __spreadValues(__spreadValues({}, contextInfo), contextData)
                                    ]), console.groupEnd(), [
                                        4,
                                        this.flows.runAsync(contextInfo)
                                    ];
                                case 1:
                                    return _state.sent() || this.codex.event.emit(Ludex.Events.SWITCH_SCENE, {
                                        sceneName: "DashboardScene",
                                        sceneData: {
                                            isFromLoader: !0
                                        }
                                    }), [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "configureFlows",
                value: function configureFlows(configure) {
                    try {
                        configure(this.flows);
                    } catch (error) {
                        console.warn("configureFlows", error);
                    }
                }
            }
        ]), _Loader;
    }();
    __name(_Loader, "Loader");
    var Loader = _Loader, loader_default = Loader;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var initState3 = {
        processed: !1,
        contextId: "",
        contextType: "SOLO",
        entryPointData: {},
        contextGameMode: "",
        sessionContextType: ""
    }, state_default3 = initState3, Events3 = Ludex.Events, _Ludex_Utils12 = Ludex.Utils, F2 = _Ludex_Utils12.Function, _ContextPlugin = function(_Ludex_Plugins_BasePlugin) {
        function _ContextPlugin(game) {
            var _this;
            return _class_call_check(this, _ContextPlugin), _define_property(_this = _call_super(this, _ContextPlugin, [
                game
            ]), "context$", void 0), _define_property(_this, "loader$", void 0), _this.loader$ = new loader_default(game), _this.context$ = new context_default(game), _this;
        }
        return _inherits(_ContextPlugin, _Ludex_Plugins_BasePlugin), _create_class(_ContextPlugin, [
            {
                key: "init",
                value: function init() {
                    this.codex.storage.addStorage("context", state_default3);
                }
            },
            {
                key: "getSessionContextTypes",
                value: function getSessionContextTypes() {
                    return ContextTypes_default;
                }
            },
            {
                key: "processContextData",
                value: function processContextData() {
                    return _async_to_generator(function() {
                        var _this, _this_codex, event, monitorError;
                        return _ts_generator(this, function(_state) {
                            return _this = this, event = (_this_codex = this.codex).event, monitorError = _this_codex.monitorError, event.catchUp(Events3.CONTEXT_SESSION_TYPE_DETECTED, function() {
                                return _async_to_generator(function() {
                                    var error;
                                    return _ts_generator(this, function(_state) {
                                        switch(_state.label){
                                            case 0:
                                                return _state.trys.push([
                                                    0,
                                                    2,
                                                    ,
                                                    3
                                                ]), [
                                                    4,
                                                    this.loader$.processContextData()
                                                ];
                                            case 1:
                                                return _state.sent(), event.emit(Events3.CONTEXT_DATA_PROCESSED), [
                                                    3,
                                                    3
                                                ];
                                            case 2:
                                                return console.debug("processContextData", error = _state.sent()), this.switchToDashboardScene$(), null == monitorError || monitorError.sendException(F2.toError(error)), [
                                                    3,
                                                    3
                                                ];
                                            case 3:
                                                return [
                                                    2
                                                ];
                                        }
                                    });
                                }).call(_this);
                            }), [
                                2
                            ];
                        });
                    }).call(this);
                }
            },
            {
                key: "configureFlows",
                value: function configureFlows(configure) {
                    this.loader$.configureFlows(configure);
                }
            },
            {
                key: "detectContextSessionType",
                value: function detectContextSessionType() {
                    return _async_to_generator(function() {
                        var _this_codex, event, monitorError, error;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    event = (_this_codex = this.codex).event, monitorError = _this_codex.monitorError, _state.label = 1;
                                case 1:
                                    return _state.trys.push([
                                        1,
                                        3,
                                        4,
                                        5
                                    ]), [
                                        4,
                                        this.context$.detectContextSessionType()
                                    ];
                                case 2:
                                    return _state.sent(), [
                                        3,
                                        5
                                    ];
                                case 3:
                                    return console.debug("detectContextSessionType", error = _state.sent()), null == monitorError || monitorError.sendException(F2.toError(error)), [
                                        3,
                                        5
                                    ];
                                case 4:
                                    return event.emit(Events3.CONTEXT_SESSION_TYPE_DETECTED), [
                                        7
                                    ];
                                case 5:
                                    return [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "detectContextGameMode",
                value: function detectContextGameMode() {
                    this.context$.detectContextGameMode();
                }
            },
            {
                key: "receiveContext",
                value: function receiveContext(contextId2, contextType2, entryPointData2) {
                    this.context$.receiveContext(contextId2, contextType2, entryPointData2);
                }
            },
            {
                key: "getContextId",
                value: function getContextId() {
                    return this.context$.getContextId();
                }
            },
            {
                key: "getContextType",
                value: function getContextType() {
                    return this.context$.getContextType();
                }
            },
            {
                key: "getContextData",
                value: function getContextData() {
                    return this.context$.getContextData();
                }
            },
            {
                key: "getSessionContextType",
                value: function getSessionContextType() {
                    return this.context$.getSessionContextType();
                }
            },
            {
                key: "switchToDashboardScene$",
                value: function switchToDashboardScene$() {
                    this.codex.event.emit(Events3.SWITCH_SCENE, {
                        sceneName: "DashboardScene"
                    });
                }
            }
        ]), _ContextPlugin;
    }(Ludex.Plugins.BasePlugin);
    __name(_ContextPlugin, "ContextPlugin");
    var ContextPlugin = _ContextPlugin, ContextPlugin_default = ContextPlugin;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var _Ludex_Utils13 = Ludex.Utils, V9 = _Ludex_Utils13.Valid, contextId = state_default3.contextId, contextType = state_default3.contextType, entryPointData = state_default3.entryPointData, MESSAGE_INVALID3 = "is invalid", _ContextInfoDtos = function(BaseDtos_default) {
        function _ContextInfoDtos() {
            var _this;
            return _class_call_check(this, _ContextInfoDtos), _this = _call_super(this, _ContextInfoDtos, arguments), _define_property(_this, "data$", void 0), _this;
        }
        return _inherits(_ContextInfoDtos, BaseDtos_default), _create_class(_ContextInfoDtos, [
            {
                key: "setupData$",
                value: function setupData$(data) {
                    this.lazySetupData$(data);
                }
            },
            {
                key: "validateStructure$",
                value: function validateStructure$(data) {
                    this.lazyValidateStructure$(data);
                }
            },
            {
                key: "validateData$",
                value: function validateData$(data) {
                    this.lazyValidateData$(data);
                }
            },
            {
                key: "validateContextId",
                value: function validateContextId(contextId2) {
                    V9.isString(contextId2) || this.exception$("contextId", MESSAGE_INVALID3);
                }
            },
            {
                key: "validateContextType",
                value: function validateContextType(contextType2) {
                    V9.isString(contextType2) && contextType2 || this.exception$("contextType", MESSAGE_INVALID3);
                }
            },
            {
                key: "validateEntryPointData",
                value: function validateEntryPointData(entryPointData2) {
                    V9.isObject(entryPointData2) || this.exception$("entryPointData", MESSAGE_INVALID3);
                }
            },
            {
                key: "toObject",
                value: function toObject() {
                    return _get(_get_prototype_of(_ContextInfoDtos.prototype), "toObject", this).call(this);
                }
            }
        ]), _ContextInfoDtos;
    }(BaseDtos_default);
    __name(_ContextInfoDtos, "ContextInfoDtos");
    var ContextInfoDtos = _ContextInfoDtos;
    ContextInfoDtos.addDefaults({
        contextId: contextId,
        contextType: contextType,
        entryPointData: entryPointData
    });
    var ContextInfo_default = ContextInfoDtos;
    Ludex.Dtos.Context = {
        Info: ContextInfo_default
    };
    var context_default2 = ContextPlugin_default;
    init_empty_script(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var import_index = __toESM(require_eventemitter3(), 1), eventemitter3_default = import_index.default, Emitter = new eventemitter3_default(), emitter_default = Emitter;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var initState4 = {
        names: [],
        history: []
    }, state_default4 = initState4, _Ludex_Utils14 = Ludex.Utils, Decorator3 = _Ludex_Utils14.Decorator, A4 = _Ludex_Utils14.Array, _EventPlugin = function(_Ludex_Plugins_BasePlugin) {
        function _EventPlugin() {
            var _this;
            return _class_call_check(this, _EventPlugin), _this = _call_super(this, _EventPlugin, arguments), _define_property(_this, "enableLog$", !1), _define_property(_this, "muteEvents$", []), _this;
        }
        return _inherits(_EventPlugin, _Ludex_Plugins_BasePlugin), _create_class(_EventPlugin, [
            {
                key: "init",
                value: function init() {
                    this.codex.storage.addStorage("event", state_default4);
                }
            },
            {
                key: "enableLogEvent",
                value: function enableLogEvent() {
                    this.enableLog$ = !0;
                }
            },
            {
                key: "on",
                value: function on(event, callback) {
                    this.addEventName$(event), this.addHistory$(event, "on", "listening"), emitter_default.on(event, callback);
                }
            },
            {
                key: "once",
                value: function once(event, callback) {
                    this.addEventName$(event), this.addHistory$(event, "once", "listening"), emitter_default.once(event, callback);
                }
            },
            {
                key: "waitTo",
                value: function waitTo(event, timeout) {
                    var _this = this;
                    return new Promise(function(resolve, reject) {
                        var timeoutId, callback = __name(function(payload) {
                            clearTimeout(timeoutId), resolve(payload);
                        }, "callback");
                        _this.once(event, callback), timeout && timeout > 0 && (timeoutId = setTimeout(function() {
                            _this.off(event, callback), reject(Error("Event ".concat(event, " timeout")));
                        }, timeout));
                    });
                }
            },
            {
                key: "catchUp",
                value: function catchUp(event, callback) {
                    var eventInfo = this.getLastEventInfo(event, "called");
                    if (!eventInfo) return void this.once(event, callback);
                    if (!(this.muteEvents$.indexOf(event) > -1)) {
                        var payload = eventInfo.payload;
                        this.addHistory$(event, "once", "catchup"), callback(payload);
                    }
                }
            },
            {
                key: "off",
                value: function off(event, callback) {
                    emitter_default.off(event, callback), this.addHistory$(event, "action", "removed");
                }
            },
            {
                key: "mute",
                value: function mute(event) {
                    this.muteEvents$.indexOf(event) > -1 || this.muteEvents$.push(event);
                }
            },
            {
                key: "clear",
                value: function clear(event) {
                    emitter_default.removeAllListeners(event), this.addHistory$(event, "action", "removed");
                }
            },
            {
                key: "emit",
                value: function emit(event, payload) {
                    if (!(this.muteEvents$.indexOf(event) > -1)) {
                        var _emitter_default, args = [];
                        payload && (args = [
                            payload
                        ]), this.addHistory$(event, "action", "called", payload), (_emitter_default = emitter_default).emit.apply(_emitter_default, [
                            event
                        ].concat(_to_consumable_array(args)));
                    }
                }
            },
            {
                key: "addEventName$",
                value: function addEventName$(event) {
                    var names2 = this.codex.storage.getStorageData("event", "names");
                    names2 && 0 > names2.indexOf(event) && names2.push(event);
                }
            },
            {
                key: "limitHistory$",
                value: function limitHistory$(history) {
                    var limit = 1e4;
                    return history.length <= limit ? history : A4.limit(history, limit);
                }
            },
            {
                key: "getEventListeners",
                value: function getEventListeners(event) {
                    return this.getHistory().filter(function(item) {
                        return item.name === event && [
                            "listening",
                            "catchup"
                        ].includes(item.status);
                    }).map(function(item) {
                        return item.name;
                    });
                }
            },
            {
                key: "getHistory",
                value: function getHistory() {
                    var _storage_getStorageData, history = null != (_storage_getStorageData = this.codex.storage.getStorageData("event", "history")) ? _storage_getStorageData : [];
                    return this.limitHistory$(history);
                }
            },
            {
                key: "getEventEmitCount",
                value: function getEventEmitCount(event) {
                    return this.getHistory().filter(function(item) {
                        return item.name === event && "called" === item.status;
                    }).length;
                }
            },
            {
                key: "getLastEventInfo",
                value: function getLastEventInfo(event, status) {
                    for(var history = this.getHistory(), i = history.length - 1; i >= 0; i--){
                        var entry = history[i];
                        if (entry.name === event && (!status || entry.status === status)) return entry;
                    }
                    return null;
                }
            },
            {
                key: "getTypeFromHistory$",
                value: function getTypeFromHistory$(event) {
                    var _ref, lastEvent = this.getLastEventInfo(event);
                    return null != (_ref = null == lastEvent ? void 0 : lastEvent.type) ? _ref : null;
                }
            },
            {
                key: "getCallsFromHistory$",
                value: function getCallsFromHistory$(event) {
                    var _ref, lastEvent = this.getLastEventInfo(event);
                    return null != (_ref = null == lastEvent ? void 0 : lastEvent.called) ? _ref : 0;
                }
            },
            {
                key: "addHistory$",
                value: function addHistory$(event, type, status, payload) {
                    var typeFromHistory = this.getTypeFromHistory$(event), correctType = null != typeFromHistory ? typeFromHistory : type, currentCalled = this.getCallsFromHistory$(event), correctCalled = "called" === status ? currentCalled + 1 : currentCalled;
                    this.getHistory().push({
                        type: correctType,
                        status: status,
                        name: event,
                        called: correctCalled,
                        payload: null != payload ? payload : {}
                    }), this.logEventInfo$(event, correctType, status, correctCalled);
                }
            },
            {
                key: "logEventInfo$",
                value: function logEventInfo$(event, type, status, called) {
                    if (this.enableLog$) {
                        if ("listening" === status) {
                            console.debug("Event (".concat(type, ") ").concat(event, ": ").concat(status));
                            var listenerCount = emitter_default.listenerCount(event);
                            listenerCount > 1 && console.warn("Event ".concat(event, " has ").concat(listenerCount, " listener"));
                        } else "action" !== type && console.debug("Event (".concat(type, ") ").concat(event, ": ").concat(status, " (").concat(called, " times)"));
                        "called" === status && 0 >= emitter_default.listenerCount(event) && console.warn("Event ".concat(event, " is called but not listening"));
                    }
                }
            }
        ]), _EventPlugin;
    }(Ludex.Plugins.BasePlugin);
    __name(_EventPlugin, "EventPlugin"), __decorateClass([
        Decorator3.validateParams("string", "function")
    ], _EventPlugin.prototype, "on", 1), __decorateClass([
        Decorator3.validateParams("string", "function")
    ], _EventPlugin.prototype, "once", 1), __decorateClass([
        Decorator3.validateParams("string")
    ], _EventPlugin.prototype, "waitTo", 1), __decorateClass([
        Decorator3.validateParams("string", "function")
    ], _EventPlugin.prototype, "catchUp", 1), __decorateClass([
        Decorator3.validateParams("string", "function")
    ], _EventPlugin.prototype, "off", 1), __decorateClass([
        Decorator3.validateParams("string")
    ], _EventPlugin.prototype, "mute", 1), __decorateClass([
        Decorator3.validateParams("string")
    ], _EventPlugin.prototype, "clear", 1), __decorateClass([
        Decorator3.validateParams("string")
    ], _EventPlugin.prototype, "emit", 1);
    var EventPlugin = _EventPlugin, EventPlugin_default = EventPlugin, event_default = EventPlugin_default;
    init_empty_script(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var FONT_SYS_FAMILY = 'nunito,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",sans-serif', _Ludex_Configs3 = Ludex.Configs, _Ludex_Configs_FrameCapture = _Ludex_Configs3.FrameCapture, Enabled = _Ludex_Configs_FrameCapture.Enabled, Options = _Ludex_Configs_FrameCapture.Options, _Ludex_Utils15 = Ludex.Utils, B2 = _Ludex_Utils15.Browser, I = _Ludex_Utils15.Image, O6 = _Ludex_Utils15.Object, V10 = _Ludex_Utils15.Valid, _FrameCapturePlugin = function(_Ludex_Plugins_BasePlugin) {
        function _FrameCapturePlugin() {
            var _this;
            return _class_call_check(this, _FrameCapturePlugin), _this = _call_super(this, _FrameCapturePlugin, arguments), _define_property(_this, "width$", void 0), _define_property(_this, "height$", void 0), _define_property(_this, "canvas$", null), _define_property(_this, "context$", null), _define_property(_this, "testRenderOptions$", null), _define_property(_this, "caches$", {}), _define_property(_this, "renderers$", {}), _this;
        }
        return _inherits(_FrameCapturePlugin, _Ludex_Plugins_BasePlugin), _create_class(_FrameCapturePlugin, [
            {
                key: "preloadAsync",
                value: function preloadAsync(payload) {
                    return _async_to_generator(function() {
                        var renderOptions;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    return renderOptions = payload.renderOptions, [
                                        4,
                                        this.loadImages$(renderOptions)
                                    ];
                                case 1:
                                    return _state.sent(), [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "captureAsync",
                value: function captureAsync(payload) {
                    return _async_to_generator(function() {
                        var width, height, renderOptions;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    return width = payload.width, height = payload.height, renderOptions = payload.renderOptions, [
                                        4,
                                        this.loadImages$(renderOptions)
                                    ];
                                case 1:
                                    return _state.sent(), this.width$ = width, this.height$ = height, this.createCanvas$(), this.drawObjects$(renderOptions), [
                                        2,
                                        this.snapshotFrameAsync$()
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "renderAsync",
                value: function renderAsync(key, config) {
                    return _async_to_generator(function() {
                        var render;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    if (!Enabled) return console.warn("FrameCapture is not enabled"), [
                                        2,
                                        null
                                    ];
                                    if (void 0 === (render = this.renderers$[key])) throw Error("Renderer ".concat(key, " has not been set"));
                                    return [
                                        4,
                                        render(config)
                                    ];
                                case 1:
                                    return [
                                        2,
                                        _state.sent()
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "setRenderer",
                value: function setRenderer(renderer, handler) {
                    this.renderers$[renderer] = handler;
                }
            },
            {
                key: "unsetRenderer",
                value: function unsetRenderer(renderer) {
                    delete this.renderers$[renderer];
                }
            },
            {
                key: "setTestRenderOptions",
                value: function setTestRenderOptions(payload) {
                    if (!payload) {
                        this.testRenderOptions$ = null;
                        return;
                    }
                    var options = O6.camelCaseKeys(payload);
                    this.testRenderOptions$ = O6.merge(this.testRenderOptions$, options);
                }
            },
            {
                key: "createCanvas$",
                value: function createCanvas$() {
                    if (!this.canvas$) {
                        var result3 = B2.createCanvas({
                            type: "canvas",
                            contextAttributes: {
                                alpha: !1,
                                desynchronized: !0,
                                willReadFrequently: !0
                            },
                            contextType: "2d"
                        });
                        this.canvas$ = null == result3 ? void 0 : result3.canvas, this.context$ = null == result3 ? void 0 : result3.context;
                    }
                    if (!this.canvas$) throw Error("Failed to create canvas");
                    this.context$ && this.context$.clearRect(0, 0, this.width$, this.height$), this.canvas$.width = this.width$, this.canvas$.height = this.height$;
                }
            },
            {
                key: "loadImages$",
                value: function loadImages$(payload) {
                    return _async_to_generator(function() {
                        var images, queue, promises, result3;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    if (images = this.getRenderImages$(payload), queue = this.prepareLoadImages$(images), (promises = O6.vals(queue)).length < 1) return [
                                        2
                                    ];
                                    return [
                                        4,
                                        Promise.all(promises)
                                    ];
                                case 1:
                                    return result3 = _state.sent(), this.cacheImages$(queue, result3), [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "getRenderImages$",
                value: function getRenderImages$(renderOptions) {
                    var imageOptions = O6.vals(renderOptions).filter(function(option) {
                        return "image" === option.type;
                    }), _iteratorNormalCompletion = !0, _didIteratorError = !1, _iteratorError = void 0;
                    try {
                        for(var _step, _iterator = imageOptions[Symbol.iterator](); !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = !0){
                            var imageOption = _step.value, name2 = imageOption.name, image = imageOption.image, fallbackImage = imageOption.fallbackImage, isImageValid = V10.isString(image) && "" !== image;
                            if (!name2) {
                                var defaultName2 = isImageValid ? image : fallbackImage;
                                defaultName2 && (imageOption.name = defaultName2);
                            }
                            !isImageValid && fallbackImage && (imageOption.image = fallbackImage);
                        }
                    } catch (err) {
                        _didIteratorError = !0, _iteratorError = err;
                    } finally{
                        try {
                            _iteratorNormalCompletion || null == _iterator.return || _iterator.return();
                        } finally{
                            if (_didIteratorError) throw _iteratorError;
                        }
                    }
                    return imageOptions;
                }
            },
            {
                key: "prepareLoadImages$",
                value: function prepareLoadImages$(images) {
                    var queue = {}, _iteratorNormalCompletion = !0, _didIteratorError = !1, _iteratorError = void 0;
                    try {
                        for(var _this, _step, _loop = function _loop() {
                            var img2 = _step.value, name2 = img2.name, image = img2.image, fallbackImage = img2.fallbackImage, cached = _this.caches$[name2];
                            if (!V10.isString(image) || cached) return "continue";
                            "" === image && V10.isString(fallbackImage) && (img2.image = fallbackImage), console.debug("prepareLoadImages", img2), queue[name2] = new Promise(function(resolve) {
                                I.loadImage(image).then(function(img3) {
                                    resolve(img3);
                                }).catch(function() {
                                    V10.isString(fallbackImage) ? (img2.image = fallbackImage, I.loadImage(img2.image).then(function(img3) {
                                        resolve(img3);
                                    }).catch(function() {
                                        resolve(null);
                                    })) : resolve(null);
                                });
                            });
                        }, _iterator = images[Symbol.iterator](); !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = !0)_this = this, _loop();
                    } catch (err) {
                        _didIteratorError = !0, _iteratorError = err;
                    } finally{
                        try {
                            _iteratorNormalCompletion || null == _iterator.return || _iterator.return();
                        } finally{
                            if (_didIteratorError) throw _iteratorError;
                        }
                    }
                    return queue;
                }
            },
            {
                key: "cacheImages$",
                value: function cacheImages$(queue, result3) {
                    for(var id in queue){
                        var image = result3.shift();
                        image && (this.caches$[id] = image);
                    }
                }
            },
            {
                key: "drawObjects$",
                value: function drawObjects$(payload) {
                    var options = O6.vals(payload).sort(function(a, b) {
                        return a.depth - b.depth;
                    }), _iteratorNormalCompletion = !0, _didIteratorError = !1, _iteratorError = void 0;
                    try {
                        for(var _step, _iterator = options[Symbol.iterator](); !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = !0){
                            var option = _step.value;
                            switch(option.type){
                                case "text":
                                    this.drawText$(option);
                                    break;
                                case "image":
                                    this.drawImage$(option);
                            }
                        }
                    } catch (err) {
                        _didIteratorError = !0, _iteratorError = err;
                    } finally{
                        try {
                            _iteratorNormalCompletion || null == _iterator.return || _iterator.return();
                        } finally{
                            if (_didIteratorError) throw _iteratorError;
                        }
                    }
                }
            },
            {
                key: "drawText$",
                value: function drawText$(option) {
                    if (this.canvas$ && this.context$) {
                        var position = option.position, font = option.font, text = option.text, color = option.color, lineWidth = option.lineWidth, textAlign = option.textAlign;
                        this.context$.font = "".concat(font, " ").concat(FONT_SYS_FAMILY), this.context$.fillStyle = null != color ? color : "#ffffff", lineWidth && (this.context$.lineWidth = lineWidth), textAlign && (this.context$.textAlign = textAlign), console.debug("drawText", option);
                        var _position = _sliced_to_array(position, 2), x = _position[0], y = _position[1];
                        this.context$.fillText(text, x, y);
                    }
                }
            },
            {
                key: "drawImage$",
                value: function drawImage$(option) {
                    if (this.canvas$ && this.context$) {
                        var name2 = option.name, size = option.size, position = option.position, fallbackImage = option.fallbackImage, source = this.caches$[name2];
                        if (!source && fallbackImage && (source = this.caches$[fallbackImage]), !source) throw Error("Image ".concat(name2, " not found"));
                        console.debug("drawImage", option);
                        var _position = _sliced_to_array(position, 2), x = _position[0], y = _position[1], _size = _sliced_to_array(size, 2), width = _size[0], height = _size[1];
                        this.context$.drawImage(source, x, y, width, height);
                    }
                }
            },
            {
                key: "snapshotFrameAsync$",
                value: function snapshotFrameAsync$() {
                    return _async_to_generator(function() {
                        var imageData;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    if (!this.canvas$) return [
                                        2,
                                        null
                                    ];
                                    if (imageData = null, !(Options.UseBlobIfPossible && "toBlob" in this.canvas$)) return [
                                        3,
                                        2
                                    ];
                                    return [
                                        4,
                                        this.createAsBlob$()
                                    ];
                                case 1:
                                    return imageData = _state.sent(), [
                                        3,
                                        3
                                    ];
                                case 2:
                                    imageData = this.createAsDataImage$(), _state.label = 3;
                                case 3:
                                    if (!imageData) throw Error("Image data is null");
                                    return V10.isDebugger() && I.logImage(imageData), [
                                        2,
                                        imageData
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "createAsDataImage$",
                value: function createAsDataImage$() {
                    if (!this.canvas$ || !this.context$) return null;
                    var Quality = Options.Quality, RenderType = Options.RenderType;
                    return this.context$.canvas.toDataURL("image/".concat(RenderType), Quality);
                }
            },
            {
                key: "createAsBlob$",
                value: function createAsBlob$() {
                    var _this = this;
                    return new Promise(function(resolve) {
                        if (!_this.canvas$) return void resolve(null);
                        var Quality = Options.Quality, RenderType = Options.RenderType;
                        _this.canvas$.toBlob(function(blob) {
                            blob ? I.blobToDataImage(blob).then(function(image) {
                                resolve(image);
                            }) : resolve(null);
                        }, "image/".concat(RenderType), Quality);
                    });
                }
            }
        ]), _FrameCapturePlugin;
    }(Ludex.Plugins.BasePlugin);
    __name(_FrameCapturePlugin, "FrameCapturePlugin");
    var FrameCapturePlugin = _FrameCapturePlugin, FrameCapturePlugin_default = FrameCapturePlugin, frame_capture_default = FrameCapturePlugin_default;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var _LocaleNotFoundError = function(Error1) {
        function _LocaleNotFoundError(locale2) {
            var _this;
            return _class_call_check(this, _LocaleNotFoundError), _define_property(_this = _call_super(this, _LocaleNotFoundError, [
                'Locale "'.concat(locale2, '" not found')
            ]), "locale", void 0), _this.name = "LocaleNotFoundError", _this.locale = locale2, _this;
        }
        return _inherits(_LocaleNotFoundError, Error1), _LocaleNotFoundError;
    }(_wrap_native_super(Error));
    __name(_LocaleNotFoundError, "LocaleNotFoundError");
    var LocaleNotFoundError = _LocaleNotFoundError, LocaleNotFoundError_default = LocaleNotFoundError;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var _MissingKeyInLocaleError = function(Error1) {
        function _MissingKeyInLocaleError(key, locale2) {
            _class_call_check(this, _MissingKeyInLocaleError);
            var _this, keyString = String(key);
            return _define_property(_this = _call_super(this, _MissingKeyInLocaleError, [
                'Text with key "'.concat(keyString, '" not found in locale "').concat(locale2, '"')
            ]), "key", void 0), _define_property(_this, "locale", void 0), _this.name = "MissingKeyInLocaleError", _this.key = keyString, _this.locale = locale2, _this;
        }
        return _inherits(_MissingKeyInLocaleError, Error1), _MissingKeyInLocaleError;
    }(_wrap_native_super(Error));
    __name(_MissingKeyInLocaleError, "MissingKeyInLocaleError");
    var MissingKeyInLocaleError = _MissingKeyInLocaleError, MissingKeyInLocaleError_default = MissingKeyInLocaleError, _Ludex_Utils16 = Ludex.Utils, O7 = _Ludex_Utils16.Object, F3 = _Ludex_Utils16.Function, B3 = _Ludex_Utils16.Browser, V11 = _Ludex_Utils16.Valid, _Ludex_Configs4 = Ludex.Configs, DetectPlayerLocale = _Ludex_Configs4.Languages.DetectPlayerLocale;
    __name(nullOrNotEmpty, "nullOrNotEmpty");
    var _LanguagePlugin = function(_Ludex_Plugins_BasePlugin) {
        function _LanguagePlugin() {
            var _this;
            return _class_call_check(this, _LanguagePlugin), _this = _call_super(this, _LanguagePlugin, arguments), _define_property(_this, "locale$", void 0), _define_property(_this, "fallbackLocale$", void 0), _define_property(_this, "data$", {}), _this;
        }
        return _inherits(_LanguagePlugin, _Ludex_Plugins_BasePlugin), _create_class(_LanguagePlugin, [
            {
                key: "setFallbackLocale",
                value: function setFallbackLocale(locale2) {
                    this.fallbackLocale$ = locale2;
                }
            },
            {
                key: "hasLocale",
                value: function hasLocale(locale2) {
                    return O7.hasOwn(this.data$, locale2);
                }
            },
            {
                key: "hasTextKey",
                value: function hasTextKey(key, locale2) {
                    var l = null != locale2 ? locale2 : this.getCurrentLocale(), text = this.getLocaleData$(l).text;
                    return O7.hasOwn(text, key);
                }
            },
            {
                key: "hasTextureKey",
                value: function hasTextureKey(key, locale2) {
                    var l = null != locale2 ? locale2 : this.getCurrentLocale(), texture = this.getLocaleData$(l).texture;
                    return O7.hasOwn(texture, key);
                }
            },
            {
                key: "add",
                value: function add(locale2, data) {
                    var setAsFallback = arguments.length > 2 && void 0 !== arguments[2] && arguments[2];
                    this.data$[locale2] = data, setAsFallback && this.setFallbackLocale(locale2);
                }
            },
            {
                key: "choose",
                value: function choose(locale2) {
                    this.locale$ = locale2, this.codex.event.emit(Ludex.Events.LANGUAGE_CHANGED, {
                        locale: locale2
                    });
                }
            },
            {
                key: "getText",
                value: function getText(key, variables, locale2) {
                    var disableFallback = arguments.length > 3 && void 0 !== arguments[3] && arguments[3];
                    try {
                        return this.uncaughtGetText$(key, variables, locale2, !disableFallback);
                    } catch (error) {
                        return _instanceof(error, MissingKeyInLocaleError_default) || _instanceof(error, LocaleNotFoundError_default) ? console.warn(error.message) : console.error(error), String(key);
                    }
                }
            },
            {
                key: "getTexture",
                value: function getTexture(key, locale2) {
                    var disableFallback = arguments.length > 2 && void 0 !== arguments[2] && arguments[2];
                    return this.uncaughtGetTexture$(key, locale2, !disableFallback);
                }
            },
            {
                key: "uncaughtGetText$",
                value: function uncaughtGetText$(key) {
                    var _this = this, variables = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : [], locale2 = arguments.length > 2 ? arguments[2] : void 0, enableFallback = !(arguments.length > 3) || void 0 === arguments[3] || arguments[3];
                    if (!enableFallback || void 0 === this.fallbackLocale$) {
                        var text2 = this.getRawText$(key, null != locale2 ? locale2 : this.getCurrentLocale());
                        return this.replaceVariables$(text2, variables);
                    }
                    var fallbackLocale = this.fallbackLocale$, text = F3.retry(function() {
                        return _this.getRawText$(key, null != locale2 ? locale2 : _this.getCurrentLocale());
                    }, function() {
                        return _this.getRawText$(key, fallbackLocale);
                    });
                    return this.replaceVariables$(text, variables);
                }
            },
            {
                key: "getRawText$",
                value: function getRawText$(key, locale2) {
                    if (!this.hasTextKey(key, locale2)) throw new MissingKeyInLocaleError_default(key, locale2);
                    return this.getLocaleData$(locale2).text[key];
                }
            },
            {
                key: "uncaughtGetTexture$",
                value: function uncaughtGetTexture$(key, locale2) {
                    var _this = this, enableFallback = !(arguments.length > 2) || void 0 === arguments[2] || arguments[2];
                    if (!enableFallback || void 0 === this.fallbackLocale$) return this.getRawTexture$(key, null != locale2 ? locale2 : this.getCurrentLocale());
                    var fallbackLocale = this.fallbackLocale$;
                    return F3.retry(function() {
                        return _this.getRawTexture$(key, null != locale2 ? locale2 : _this.getCurrentLocale());
                    }, function() {
                        return _this.getRawTexture$(key, fallbackLocale);
                    });
                }
            },
            {
                key: "getRawTexture$",
                value: function getRawTexture$(key, locale2) {
                    if (!this.hasTextureKey(key, locale2)) throw new MissingKeyInLocaleError_default(key, locale2);
                    return this.getLocaleData$(locale2).texture[key];
                }
            },
            {
                key: "getCurrentLocale",
                value: function getCurrentLocale() {
                    var _this_locale$;
                    return null != (_this_locale$ = this.locale$) ? _this_locale$ : "en";
                }
            },
            {
                key: "getLocaleData$",
                value: function getLocaleData$(locale2) {
                    var correctLocale = null != locale2 ? locale2 : this.getCurrentLocale();
                    if (!O7.hasOwn(this.data$, correctLocale)) throw new LocaleNotFoundError_default(correctLocale);
                    return this.data$[correctLocale];
                }
            },
            {
                key: "replaceVariables$",
                value: function replaceVariables$(text, variables) {
                    var length = variables.length;
                    if (0 === length) return text;
                    for(var result3 = text, i = 0; i < length; i++){
                        var variable = variables[i], key = "%{".concat(i, "}");
                        result3 = result3.replace(key, variable);
                    }
                    return result3;
                }
            },
            {
                key: "getPlayerLanguage",
                value: function getPlayerLanguage() {
                    var _ref, _ref1, _ref2, player = this.codex.player, localeStringBySDK = GameSDK.getLocale(), localeBySDK = nullOrNotEmpty(null == localeStringBySDK ? void 0 : localeStringBySDK.trim().split(/[-_]/)[0]), currentLocale = nullOrNotEmpty(this.getBrowserLanguage());
                    if (player.isFirstSession()) return null != (_ref2 = null != localeBySDK ? localeBySDK : currentLocale) ? _ref2 : "en";
                    var playerLanguage = nullOrNotEmpty(player.getPlayerSetting("language"));
                    return null != (_ref = null != (_ref1 = null != playerLanguage ? playerLanguage : localeBySDK) ? _ref1 : currentLocale) ? _ref : "en";
                }
            },
            {
                key: "getBrowserLanguage",
                value: function getBrowserLanguage() {
                    if (!1 === DetectPlayerLocale) return "en";
                    var _locale2_trim, locale2 = B3.getLocale();
                    return null == locale2 || null == (_locale2_trim = locale2.trim()) ? void 0 : _locale2_trim.split(/[-_]/)[0];
                }
            }
        ]), _LanguagePlugin;
    }(Ludex.Plugins.BasePlugin);
    __name(_LanguagePlugin, "LanguagePlugin");
    var LanguagePlugin = _LanguagePlugin, LanguagePlugin_default = LanguagePlugin, language_default = LanguagePlugin_default;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var DefaultResponseLeaderboard = {
        _id: "",
        name: "",
        createdBy: "",
        description: "",
        expireTime: 604800000,
        type: "app_leaderboard",
        timezone: "utc+0",
        createdAt: "2024-01-01T09:00:00.000Z",
        sortOrder: "desc",
        statistics: "max",
        resettable: "manually",
        resetScore: 0,
        numberOfLeaders: 15,
        amountPlayer: 15
    }, ResponseLeaderboard_default = DefaultResponseLeaderboard, _Ludex_Configs5 = Ludex.Configs, OtherHost = _Ludex_Configs5.OtherHost, Mockup = _Ludex_Configs5.Mockup, AppId2 = _Ludex_Configs5.AppId, _Ludex_Utils17 = Ludex.Utils, O8 = _Ludex_Utils17.Object, S3 = _Ludex_Utils17.String, V12 = _Ludex_Utils17.Valid, _LeaderboardAPI = function() {
        function _LeaderboardAPI() {
            _class_call_check(this, _LeaderboardAPI), _define_property(this, "mockAPI$", void 0);
        }
        return _create_class(_LeaderboardAPI, [
            {
                key: "initMockAPI$",
                value: function initMockAPI$() {
                    return _async_to_generator(function() {
                        var LeaderboardAPIMock;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    if (this.mockAPI$) return [
                                        2
                                    ];
                                    return [
                                        4,
                                        Promise.resolve().then(function() {
                                            return init_empty_script(), empty_script_exports;
                                        })
                                    ];
                                case 1:
                                    if ("function" != typeof (LeaderboardAPIMock = _state.sent().default)) throw Error("Cannot load LeaderboardAPIMock");
                                    return this.mockAPI$ = new LeaderboardAPIMock(), [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "getLeadersAsync",
                value: function getLeadersAsync(id, url, payload) {
                    return _async_to_generator(function() {
                        var params, result3;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    if (params = S3.params(payload), !Mockup.Leaderboards.Enabled) return [
                                        3,
                                        6
                                    ];
                                    return [
                                        4,
                                        this.initMockAPI$()
                                    ];
                                case 1:
                                    if (_state.sent(), !("playerIds" in payload)) return [
                                        3,
                                        3
                                    ];
                                    return [
                                        4,
                                        this.mockAPI$.getPlayers(id, payload)
                                    ];
                                case 2:
                                    return result3 = _state.sent(), [
                                        3,
                                        5
                                    ];
                                case 3:
                                    return [
                                        4,
                                        this.mockAPI$.getLeaders(id, payload)
                                    ];
                                case 4:
                                    result3 = _state.sent(), _state.label = 5;
                                case 5:
                                    return [
                                        3,
                                        8
                                    ];
                                case 6:
                                    return [
                                        4,
                                        get("".concat(url, "?").concat(params), {}, OtherHost)
                                    ];
                                case 7:
                                    result3 = _state.sent(), _state.label = 8;
                                case 8:
                                    if (!O8.hasOwn(result3, "data") || !Array.isArray(result3.data)) return [
                                        2,
                                        []
                                    ];
                                    return [
                                        2,
                                        result3.data
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "getLeaderboardAsync",
                value: function getLeaderboardAsync(id) {
                    return _async_to_generator(function() {
                        var result3, url;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    if (url = "leaderboards/".concat(id), !Mockup.Leaderboards.Enabled) return [
                                        3,
                                        3
                                    ];
                                    return [
                                        4,
                                        this.initMockAPI$()
                                    ];
                                case 1:
                                    return _state.sent(), [
                                        4,
                                        this.mockAPI$.getLeaderboardAsync(id)
                                    ];
                                case 2:
                                    return result3 = _state.sent(), [
                                        3,
                                        5
                                    ];
                                case 3:
                                    return [
                                        4,
                                        get(url, {}, OtherHost)
                                    ];
                                case 4:
                                    result3 = _state.sent(), O8.hasOwn(result3, "data") && "object" === _type_of(result3.data) && (result3 = result3.data), _state.label = 5;
                                case 5:
                                    return [
                                        2,
                                        result3
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "getLeaderboardsAsync",
                value: function getLeaderboardsAsync(options) {
                    return _async_to_generator(function() {
                        var result3, params, url;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    if (params = S3.params(options), url = "leaderboards", !Mockup.Leaderboards.Enabled) return [
                                        3,
                                        3
                                    ];
                                    return [
                                        4,
                                        this.initMockAPI$()
                                    ];
                                case 1:
                                    return _state.sent(), [
                                        4,
                                        this.mockAPI$.getLeaderboardsAsync(options)
                                    ];
                                case 2:
                                    return result3 = _state.sent(), [
                                        3,
                                        5
                                    ];
                                case 3:
                                    return [
                                        4,
                                        get("".concat(url, "?").concat(params), {}, OtherHost)
                                    ];
                                case 4:
                                    result3 = _state.sent(), result3 = O8.hasOwn(result3, "data") && Array.isArray(result3.data) ? result3.data : [], _state.label = 5;
                                case 5:
                                    return [
                                        2,
                                        result3
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "setLeaderboardScoreAsync",
                value: function setLeaderboardScoreAsync(payload) {
                    return _async_to_generator(function() {
                        var leaderboardId, playerId2, score2;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    if (leaderboardId = payload.leaderboardId, playerId2 = payload.playerId, score2 = payload.score, !Mockup.Leaderboards.Enabled) return [
                                        3,
                                        3
                                    ];
                                    return [
                                        4,
                                        this.initMockAPI$()
                                    ];
                                case 1:
                                    return _state.sent(), [
                                        4,
                                        this.mockAPI$.setScoreAsync(leaderboardId, playerId2, score2)
                                    ];
                                case 2:
                                    return _state.sent(), [
                                        3,
                                        5
                                    ];
                                case 3:
                                    return [
                                        4,
                                        post("leaderboards/".concat(leaderboardId, "/players/").concat(playerId2), {
                                            score: score2
                                        }, {}, OtherHost)
                                    ];
                                case 4:
                                    _state.sent(), _state.label = 5;
                                case 5:
                                    return [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "createLeaderboardAsync",
                value: function createLeaderboardAsync(payload) {
                    return _async_to_generator(function() {
                        var _payload__id, id, numberOfLeaders, leaderboardPayload, url, result3;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    if (id = null != (_payload__id = payload._id) ? _payload__id : S3.generateObjectId(), numberOfLeaders = payload.numberOfLeaders, leaderboardPayload = __spreadProps(__spreadValues(__spreadValues({}, ResponseLeaderboard_default), payload), {
                                        _id: id,
                                        appId: AppId2,
                                        numberOfLeaders: numberOfLeaders
                                    }), url = "leaderboards", !Mockup.Leaderboards.Enabled) return [
                                        3,
                                        3
                                    ];
                                    return [
                                        4,
                                        this.initMockAPI$()
                                    ];
                                case 1:
                                    return _state.sent(), [
                                        4,
                                        this.mockAPI$.createLeaderboard(leaderboardPayload)
                                    ];
                                case 2:
                                    return result3 = _state.sent(), [
                                        3,
                                        5
                                    ];
                                case 3:
                                    return [
                                        4,
                                        post(url, leaderboardPayload, {}, OtherHost)
                                    ];
                                case 4:
                                    result3 = _state.sent(), O8.hasOwn(result3, "data") && V12.isObject(result3.data) && (result3 = result3.data), _state.label = 5;
                                case 5:
                                    if (!O8.hasOwn(result3, "_id") || result3._id !== id) throw Error("Create leaderboard failed");
                                    return [
                                        2,
                                        id
                                    ];
                            }
                        });
                    }).call(this);
                }
            }
        ]), _LeaderboardAPI;
    }();
    __name(_LeaderboardAPI, "LeaderboardAPI");
    var LeaderboardAPI = _LeaderboardAPI, LeaderboardAPI_default = LeaderboardAPI;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var DefaultLeaderboard = {
        limit: 0,
        offset: 0,
        leaders: {},
        isRequesting: !1,
        amountPlayer: 0
    }, DefaultLeaderboard_default = DefaultLeaderboard;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var initState5 = {
        leaderboards: {}
    }, state_default5 = initState5, _Ludex_Utils18 = Ludex.Utils, A5 = _Ludex_Utils18.Array, V13 = _Ludex_Utils18.Valid, J3 = _Ludex_Utils18.Json, O9 = _Ludex_Utils18.Object, _Ludex_Configs6 = Ludex.Configs, _Ludex_Configs_Mockup = _Ludex_Configs6.Mockup, LeaderboardsMockupConfig = _Ludex_Configs_Mockup.Leaderboards, _LeaderboardPlugin = function(_Ludex_Plugins_BasePlugin) {
        function _LeaderboardPlugin() {
            var _this;
            return _class_call_check(this, _LeaderboardPlugin), _this = _call_super(this, _LeaderboardPlugin, arguments), _define_property(_this, "lbAPI$", new LeaderboardAPI_default()), _define_property(_this, "configs$", void 0), _this;
        }
        return _inherits(_LeaderboardPlugin, _Ludex_Plugins_BasePlugin), _create_class(_LeaderboardPlugin, [
            {
                key: "init",
                value: function init() {
                    this.codex.storage.addStorage("leaderboard", state_default5), this.configs$ = {};
                }
            },
            {
                key: "addLeaderboard",
                value: function addLeaderboard(options) {
                    var name2 = options.name, type = options.type, leaderboardId = options.leaderboardId, autoSortRank = options.autoSortRank;
                    if (this.getLeaderboard(name2)) return void console.warn("Leaderboard with name ".concat(name2, " already exists"));
                    var host = "leaderboards/".concat(leaderboardId, "/");
                    ("global" === type || "tournament" === type) && (host += "leaders"), "friends" === type && (host += "players"), this.configs$[name2] = {
                        id: leaderboardId,
                        name: name2,
                        type: type,
                        host: host,
                        autoSortRank: autoSortRank
                    };
                    var defaultData = J3.clone(DefaultLeaderboard_default);
                    this.setLeaderboard$(name2, defaultData);
                }
            },
            {
                key: "requestLeaderboardsAsync",
                value: function requestLeaderboardsAsync(options) {
                    return _async_to_generator(function() {
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    return _state.trys.push([
                                        0,
                                        2,
                                        ,
                                        3
                                    ]), [
                                        4,
                                        this.lbAPI$.getLeaderboardsAsync(options)
                                    ];
                                case 1:
                                    return [
                                        2,
                                        _state.sent()
                                    ];
                                case 2:
                                    return console.warn("requestGlobalLeaderboardsAsync", _state.sent()), [
                                        2,
                                        []
                                    ];
                                case 3:
                                    return [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "requestLeaderboardAsync",
                value: function requestLeaderboardAsync(name2, limit) {
                    return _async_to_generator(function() {
                        var _this_configs$_name2, id, type, host, leaders, player, paramsPlayerIds, res, resettable, amountPlayer;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    if (_state.trys.push([
                                        0,
                                        ,
                                        6,
                                        8
                                    ]), this.validateLeaderboard$(name2), this.clearLeaderboard(name2), this.setLeaderboard$(name2, {
                                        isRequesting: !0
                                    }), id = (_this_configs$_name2 = this.configs$[name2]).id, type = _this_configs$_name2.type, host = _this_configs$_name2.host, leaders = [], "friends" !== type) return [
                                        3,
                                        2
                                    ];
                                    return paramsPlayerIds = [
                                        (player = this.codex.player).getPlayerId()
                                    ].concat(_to_consumable_array(player.getConnectedPlayerIds(limit, 0))), this.configs$[name2].playerIds = _to_consumable_array(paramsPlayerIds), [
                                        4,
                                        this.lbAPI$.getLeadersAsync(id, host, {
                                            playerIds: paramsPlayerIds
                                        })
                                    ];
                                case 1:
                                    return leaders = _state.sent(), [
                                        3,
                                        4
                                    ];
                                case 2:
                                    return [
                                        4,
                                        this.lbAPI$.getLeadersAsync(id, host, {
                                            limit: limit,
                                            offset: 0
                                        })
                                    ];
                                case 3:
                                    leaders = _state.sent(), _state.label = 4;
                                case 4:
                                    if (0 === leaders.length) return [
                                        2
                                    ];
                                    return [
                                        4,
                                        this.receiveLeaderboardAsync$(name2, leaders)
                                    ];
                                case 5:
                                    return _state.sent(), this.setLeaderboard$(name2, {
                                        limit: limit,
                                        offset: 0
                                    }), [
                                        3,
                                        8
                                    ];
                                case 6:
                                    return [
                                        4,
                                        this.lbAPI$.getLeaderboardAsync(this.configs$[name2].id)
                                    ];
                                case 7:
                                    return resettable = (res = _state.sent()) ? res.resettable : "", amountPlayer = res ? res.amountPlayer : 0, this.setLeaderboard$(name2, {
                                        isRequesting: !1,
                                        resettable: resettable,
                                        amountPlayer: amountPlayer
                                    }), [
                                        7
                                    ];
                                case 8:
                                    return [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "loadMoreLeaderboardAsync",
                value: function loadMoreLeaderboardAsync(name2, limit) {
                    return _async_to_generator(function() {
                        var leaderboard, _this_configs$_name2, id, host, newOffset, leaders;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    if (!(leaderboard = this.getLeaderboard(name2))) return [
                                        2
                                    ];
                                    if ("friends" === this.configs$[name2].type) return console.warn("Cannot load more leaderboard with type friend"), [
                                        2
                                    ];
                                    _state.label = 1;
                                case 1:
                                    return _state.trys.push([
                                        1,
                                        ,
                                        3,
                                        4
                                    ]), this.setLeaderboard$(name2, {
                                        isRequesting: !0
                                    }), id = (_this_configs$_name2 = this.configs$[name2]).id, host = _this_configs$_name2.host, newOffset = leaderboard.offset + leaderboard.limit, [
                                        4,
                                        this.lbAPI$.getLeadersAsync(id, host, {
                                            limit: limit,
                                            offset: newOffset
                                        })
                                    ];
                                case 2:
                                    if (0 === (leaders = _state.sent()).length) return [
                                        2
                                    ];
                                    return this.receiveLeaderboardAsync$(name2, leaders), this.setLeaderboard$(name2, {
                                        limit: limit,
                                        offset: newOffset
                                    }), [
                                        3,
                                        4
                                    ];
                                case 3:
                                    return this.setLeaderboard$(name2, {
                                        isRequesting: !1
                                    }), [
                                        7
                                    ];
                                case 4:
                                    return [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "getLeaderboard",
                value: function getLeaderboard(name2) {
                    var leaderboards = this.codex.storage.getStorageData("leaderboard", "leaderboards");
                    return leaderboards && leaderboards[name2] ? leaderboards[name2] : null;
                }
            },
            {
                key: "getLeadersByPlayerIdsAsync",
                value: function getLeadersByPlayerIdsAsync(name2, playerIds) {
                    return _async_to_generator(function() {
                        var id, host, res;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    return _state.trys.push([
                                        0,
                                        2,
                                        ,
                                        3
                                    ]), this.validateLeaderboard$(name2), id = this.configs$[name2].id, host = "leaderboards/".concat(id, "/players"), [
                                        4,
                                        this.lbAPI$.getLeadersAsync(id, host, {
                                            playerIds: playerIds
                                        })
                                    ];
                                case 1:
                                    if (0 === (res = _state.sent()).length) return [
                                        2,
                                        []
                                    ];
                                    return [
                                        2,
                                        this.toLeaders$(res)
                                    ];
                                case 2:
                                    return console.warn(_state.sent()), [
                                        2,
                                        []
                                    ];
                                case 3:
                                    return [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "getLeaderboardResponseAsync",
                value: function getLeaderboardResponseAsync(id) {
                    return _async_to_generator(function() {
                        return _ts_generator(this, function(_state) {
                            return [
                                2,
                                this.lbAPI$.getLeaderboardAsync(id)
                            ];
                        });
                    }).call(this);
                }
            },
            {
                key: "clearLeaderboard",
                value: function clearLeaderboard(name2) {
                    try {
                        this.validateLeaderboard$(name2);
                        var defaultData = J3.clone(DefaultLeaderboard_default);
                        this.setLeaderboard$(name2, null), this.setLeaderboard$(name2, defaultData);
                    } catch (error) {
                        console.warn(error);
                    }
                }
            },
            {
                key: "isLeaderboardEmpty",
                value: function isLeaderboardEmpty(name2) {
                    var leaderboard = this.getLeaderboard(name2);
                    return !leaderboard || 0 === Object.keys(leaderboard.leaders).length;
                }
            },
            {
                key: "isExistLeaderboardId",
                value: function isExistLeaderboardId(leaderboardId) {
                    var _this = this, configs = _this.configs$;
                    return O9.vals(configs).some(function(config) {
                        return config.id === leaderboardId;
                    });
                }
            },
            {
                key: "getLeaderboardName",
                value: function getLeaderboardName(leaderboardId) {
                    var _this = this, configs = _this.configs$, config = A5.search(O9.vals(configs), function(config2) {
                        return config2.id === leaderboardId;
                    });
                    return config ? config.name : null;
                }
            },
            {
                key: "setLeaderboardScoreAsync",
                value: function setLeaderboardScoreAsync(name2, playerId2, score2) {
                    return _async_to_generator(function() {
                        var id, previousScore;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    if (_state.trys.push([
                                        0,
                                        3,
                                        ,
                                        4
                                    ]), GameSDK.extra.isGuest && !LeaderboardsMockupConfig.Enabled) return [
                                        2
                                    ];
                                    return this.validateLeaderboard$(name2), id = this.configs$[name2].id, [
                                        4,
                                        this.getLastScoreOnLeaderboard$(name2, playerId2)
                                    ];
                                case 1:
                                    if ((previousScore = _state.sent()) && score2 <= previousScore) return [
                                        2
                                    ];
                                    return [
                                        4,
                                        this.lbAPI$.setLeaderboardScoreAsync({
                                            leaderboardId: id,
                                            playerId: playerId2,
                                            score: score2
                                        })
                                    ];
                                case 2:
                                    return _state.sent(), [
                                        3,
                                        4
                                    ];
                                case 3:
                                    return console.warn(_state.sent()), [
                                        3,
                                        4
                                    ];
                                case 4:
                                    return [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "getLastScoreOnLeaderboard$",
                value: function getLastScoreOnLeaderboard$(name2, playerId2) {
                    return _async_to_generator(function() {
                        var playerLeaders;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    return [
                                        4,
                                        this.getLeadersByPlayerIdsAsync(name2, [
                                            playerId2
                                        ])
                                    ];
                                case 1:
                                    if (0 === (playerLeaders = _state.sent()).length) return [
                                        2,
                                        null
                                    ];
                                    return [
                                        2,
                                        playerLeaders[0].score
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "createLeaderboardAsync",
                value: function createLeaderboardAsync(payload) {
                    return _async_to_generator(function() {
                        return _ts_generator(this, function(_state) {
                            return [
                                2,
                                this.lbAPI$.createLeaderboardAsync(payload)
                            ];
                        });
                    }).call(this);
                }
            },
            {
                key: "validateLeaderboard$",
                value: function validateLeaderboard$(name2) {
                    var leaderboard = this.getLeaderboard(name2);
                    if (!V13.isObject(leaderboard)) throw Error("Leaderboard with name ".concat(name2, " not found"));
                }
            },
            {
                key: "setLeaderboard$",
                value: function setLeaderboard$(name2, leaderboard) {
                    leaderboard && this.codex.storage.setStorageData("leaderboard", "leaderboards", _define_property({}, name2, leaderboard));
                }
            },
            {
                key: "receiveLeaderboardAsync$",
                value: function receiveLeaderboardAsync$(name2, responses) {
                    return _async_to_generator(function() {
                        var _this_getLeaderboard, cleanLeaders, tmp, currentLeaders, uniqueLeaders, rawLeaders, _rawLeaders, sortedLeaders, keyedLeaders;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    return this.validateLeaderboard$(name2), [
                                        4,
                                        this.toLeaders$(responses)
                                    ];
                                case 1:
                                    return cleanLeaders = _state.sent().filter(function(leader) {
                                        return leader.name && leader.photo;
                                    }), currentLeaders = void 0 === (tmp = (null != (_this_getLeaderboard = this.getLeaderboard(name2)) ? _this_getLeaderboard : {}).leaders) ? {} : tmp, uniqueLeaders = cleanLeaders.filter(function(leader) {
                                        return !currentLeaders[leader.playerId] || (currentLeaders[leader.playerId] = leader, !1);
                                    }), rawLeaders = O9.vals(currentLeaders), uniqueLeaders.length > 0 && (_rawLeaders = rawLeaders).unshift.apply(_rawLeaders, _to_consumable_array(uniqueLeaders)), sortedLeaders = rawLeaders.sort(function(a, b) {
                                        return b.score - a.score;
                                    }), this.configs$[name2].autoSortRank && (sortedLeaders = sortedLeaders.map(function(leader, index) {
                                        return O9.merge(leader, {
                                            rank: index + 1
                                        });
                                    })), keyedLeaders = O9.keyBy(sortedLeaders, "playerId"), this.setLeaderboard$(name2, {
                                        leaders: keyedLeaders
                                    }), [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "toLeaders$",
                value: function toLeaders$(leaders) {
                    return _async_to_generator(function() {
                        var _this, profile, leaderIds, profiles;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    return _this = this, profile = this.codex.profile, leaderIds = leaders.map(function(leader) {
                                        return leader.playerId;
                                    }), [
                                        4,
                                        profile.requestProfiles(leaderIds)
                                    ];
                                case 1:
                                    return _state.sent(), profiles = profile.getProfiles(), [
                                        2,
                                        leaders.map(function(leader) {
                                            var profile2 = profiles[leader.playerId];
                                            if (!profile2) {
                                                var _language2_getText, name2 = null != (_language2_getText = _this.codex.language.getText("core.nameless")) ? _language2_getText : "Nameless";
                                                return O9.merge(leader, {
                                                    name: name2,
                                                    photo: "default"
                                                });
                                            }
                                            return O9.merge(leader, {
                                                name: profile2.name,
                                                photo: profile2.photo
                                            });
                                        }).map(function(leader) {
                                            return __spreadProps(__spreadValues({}, leader), {
                                                score: parseInt(leader.score, 10)
                                            });
                                        })
                                    ];
                            }
                        });
                    }).call(this);
                }
            }
        ]), _LeaderboardPlugin;
    }(Ludex.Plugins.BasePlugin);
    __name(_LeaderboardPlugin, "LeaderboardPlugin");
    var LeaderboardPlugin = _LeaderboardPlugin, LeaderboardPlugin_default = LeaderboardPlugin, leaderboards_default = LeaderboardPlugin_default;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var _BaseAPI = function() {
        function _BaseAPI() {
            _class_call_check(this, _BaseAPI), _define_property(this, "APIHost$", void 0);
        }
        return _create_class(_BaseAPI, [
            {
                key: "setAPIHost",
                value: function setAPIHost(host) {
                    this.APIHost$ = host;
                }
            },
            {
                key: "getAPIHost",
                value: function getAPIHost() {
                    return this.APIHost$;
                }
            }
        ]), _BaseAPI;
    }();
    __name(_BaseAPI, "BaseAPI");
    var BaseAPI = _BaseAPI, BaseAPI_default = BaseAPI, Utils2 = Ludex.Utils, _MatchAPI = function(BaseAPI_default) {
        function _MatchAPI() {
            return _class_call_check(this, _MatchAPI), _call_super(this, _MatchAPI, arguments);
        }
        return _inherits(_MatchAPI, BaseAPI_default), _create_class(_MatchAPI, [
            {
                key: "createSingleMatchAsync",
                value: function createSingleMatchAsync(payload) {
                    return _async_to_generator(function() {
                        var result3;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    return [
                                        4,
                                        post("single-matches", payload, {}, this.getAPIHost())
                                    ];
                                case 1:
                                    return result3 = _state.sent(), [
                                        2,
                                        this.returnValidMatchData$(result3)
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "getSingleMatchDetailAsync",
                value: function getSingleMatchDetailAsync() {
                    return _async_to_generator(function() {
                        var result3;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    return [
                                        4,
                                        get("single-matches/active", {}, this.getAPIHost())
                                    ];
                                case 1:
                                    return result3 = _state.sent(), [
                                        2,
                                        this.returnValidMatchData$(result3)
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "updateSingleMatchMoveAsync",
                value: function updateSingleMatchMoveAsync(matchId, payload) {
                    return _async_to_generator(function() {
                        var result3;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    return [
                                        4,
                                        post("single-matches/".concat(matchId, "/move"), payload, {}, this.getAPIHost())
                                    ];
                                case 1:
                                    return result3 = _state.sent(), [
                                        2,
                                        this.returnValidMatchData$(result3)
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "finishSingleMatchAsync",
                value: function finishSingleMatchAsync(matchId) {
                    return _async_to_generator(function() {
                        var result3;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    return [
                                        4,
                                        post("single-matches/".concat(matchId, "/finish"), {}, {}, this.getAPIHost())
                                    ];
                                case 1:
                                    return result3 = _state.sent(), [
                                        2,
                                        this.returnValidMatchData$(result3)
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "createMatchAsync",
                value: function createMatchAsync(payload) {
                    return _async_to_generator(function() {
                        var result3;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    return [
                                        4,
                                        post("matches", payload, {}, this.getAPIHost())
                                    ];
                                case 1:
                                    return result3 = _state.sent(), [
                                        2,
                                        this.returnValidMatchData$(result3)
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "joinMatchAsync",
                value: function joinMatchAsync(matchId) {
                    return _async_to_generator(function() {
                        var result3;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    return [
                                        4,
                                        post("matches/".concat(matchId, "/join"), {}, {}, this.getAPIHost())
                                    ];
                                case 1:
                                    return result3 = _state.sent(), [
                                        2,
                                        this.returnValidMatchData$(result3)
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "getMatchDetailByIdAsync",
                value: function getMatchDetailByIdAsync(matchId) {
                    return _async_to_generator(function() {
                        var result3;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    return [
                                        4,
                                        get("matches/".concat(matchId), {}, this.getAPIHost())
                                    ];
                                case 1:
                                    return result3 = _state.sent(), [
                                        2,
                                        this.returnValidMatchData$(result3)
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "finishMatchAsync",
                value: function finishMatchAsync(payload) {
                    return _async_to_generator(function() {
                        var _payload_matchId, matchId, tmp, score2, tmp1, level2, _payload_extraData, extraData, result3;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    return matchId = void 0 === (_payload_matchId = payload.matchId) ? "" : _payload_matchId, score2 = void 0 === (tmp = payload.score) ? 0 : tmp, level2 = void 0 === (tmp1 = payload.level) ? 0 : tmp1, extraData = void 0 === (_payload_extraData = payload.extraData) ? {} : _payload_extraData, [
                                        4,
                                        post("matches/".concat(matchId, "/finish"), {
                                            matchId: matchId,
                                            score: score2,
                                            level: level2,
                                            extraData: extraData
                                        }, {}, this.getAPIHost())
                                    ];
                                case 1:
                                    return result3 = _state.sent(), [
                                        2,
                                        this.returnValidMatchData$(result3)
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "returnValidMatchData$",
                value: function returnValidMatchData$(result3) {
                    var _result3_data;
                    return Utils2.Valid.isObject(result3) && Utils2.Object.hasOwn(result3, "data") && null != (_result3_data = result3.data) ? _result3_data : {};
                }
            }
        ]), _MatchAPI;
    }(BaseAPI_default);
    __name(_MatchAPI, "MatchAPI");
    var MatchAPI = _MatchAPI, MatchAPI_default = MatchAPI, _APIHandler = function() {
        function _APIHandler(apiConfig) {
            _class_call_check(this, _APIHandler), _define_property(this, "matchAPI$", void 0), this.createAPI$(), this.setAPIConfig(apiConfig);
        }
        return _create_class(_APIHandler, [
            {
                key: "createAPI$",
                value: function createAPI$() {
                    this.matchAPI$ = new MatchAPI_default();
                }
            },
            {
                key: "setAPIConfig",
                value: function setAPIConfig(apiConfig) {
                    apiConfig.matchAPIHost && this.matchAPI$.setAPIHost(apiConfig.matchAPIHost);
                }
            },
            {
                key: "setMatchAPIInstance",
                value: function setMatchAPIInstance(matchAPI) {
                    this.matchAPI$ = matchAPI;
                }
            },
            {
                key: "getMatchAPI",
                value: function getMatchAPI() {
                    return this.matchAPI$;
                }
            }
        ]), _APIHandler;
    }();
    __name(_APIHandler, "APIHandler");
    var APIHandler = _APIHandler, APIHandler_default = APIHandler;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var _BaseConcrete = function() {
        function _BaseConcrete(codex2, match) {
            _class_call_check(this, _BaseConcrete), _define_property(this, "codex", void 0), _define_property(this, "match", void 0), this.codex = codex2, this.match = match;
        }
        return _create_class(_BaseConcrete, [
            {
                key: "startLog$",
                value: function startLog$(payload) {
                    this.match.useCPUProfile && console.profile(this.constructor.name), console.group("\uD83D\uDE80 ".concat(this.constructor.name)), payload && console.log("\uD83D\uDCE6 ? Payload:", payload);
                }
            },
            {
                key: "endLog$",
                value: function endLog$() {
                    console.groupEnd(), this.match.useCPUProfile && console.profileEnd();
                }
            },
            {
                key: "processAsync",
                value: function processAsync(_payload) {
                    return _async_to_generator(function() {
                        return _ts_generator(this, function(_state) {
                            throw Error("Not implemented");
                        });
                    })();
                }
            }
        ]), _BaseConcrete;
    }();
    __name(_BaseConcrete, "BaseConcrete");
    var BaseConcrete = _BaseConcrete, BaseConcrete_default = BaseConcrete;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var _Ludex_Utils19 = Ludex.Utils, O10 = _Ludex_Utils19.Object, V14 = _Ludex_Utils19.Valid, J4 = _Ludex_Utils19.Json, _BaseHandler = function() {
        function _BaseHandler(concrete) {
            _class_call_check(this, _BaseHandler), _define_property(this, "codex$", void 0), _define_property(this, "match$", void 0), _define_property(this, "nextHandler$", void 0), _define_property(this, "stateData$", void 0), this.codex$ = concrete.codex, this.match$ = concrete.match, this.nextHandler$ = null, this.stateData$ = {
                Before: null,
                After: null
            };
        }
        return _create_class(_BaseHandler, [
            {
                key: "setNext",
                value: function setNext(handler) {
                    return this.nextHandler$ = handler, handler;
                }
            },
            {
                key: "processAsync",
                value: function processAsync(matchState) {
                    return _async_to_generator(function() {
                        return _ts_generator(this, function(_state) {
                            return console.groupCollapsed(" ".concat(this.constructor.name)), this.logData$("Before", matchState), [
                                2
                            ];
                        });
                    }).call(this);
                }
            },
            {
                key: "nextAsync$",
                value: function nextAsync$(matchState) {
                    return _async_to_generator(function() {
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    if (this.logData$("After", matchState), this.logDiff$(), console.groupEnd(), !this.nextHandler$) return [
                                        2
                                    ];
                                    return [
                                        4,
                                        this.nextHandler$.processAsync(matchState)
                                    ];
                                case 1:
                                    return _state.sent(), [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "logData$",
                value: function logData$(name2, matchState) {
                    if (V14.isDebugger()) {
                        console.groupCollapsed("\uD83D\uDCE6 MatchState: ".concat(name2)), this.stateData$[name2] = J4.clone(matchState);
                        var _a = matchState, profiles = _a.profiles, customData = _a.customData, base = __objRest(_a, [
                            "profiles",
                            "custo\
mData"
                        ]);
                        console.info("\uD83D\uDCBE Base"), console.table(O10.clone(base)), console.info("\uD83D\uDCBE Profile"), console.table(O10.clone(profiles)), console.info("\uD83D\uDCBE Custom"), console.table(O10.clone(customData)), console.groupEnd();
                    }
                }
            },
            {
                key: "logDiff$",
                value: function logDiff$() {
                    var _this_stateData$ = this.stateData$, After = _this_stateData$.After, Before = _this_stateData$.Before;
                    if (After && Before) {
                        var diff = O10.diff(Before, After);
                        if (!V14.isEmpty(diff)) {
                            var _a = diff, _a_profiles = _a.profiles, profiles = void 0 === _a_profiles ? {} : _a_profiles, _a_customData = _a.customData, customData = void 0 === _a_customData ? {} : _a_customData, base = __objRest(_a, [
                                "profiles",
                                "\
customData"
                            ]);
                            console.group("\uD83D\uDCE6 MatchState: Diff"), V14.isEmpty(base) || (console.info("\uD83D\uDCBE Base"), console.table(O10.clone(base))), V14.isEmpty(profiles) || (console.info("\uD83D\uDCBE Profile"), console.table(O10.clone(profiles))), V14.isEmpty(customData) || (console.info("\uD83D\uDCBE Custom"), console.table(O10.clone(customData))), console.groupEnd();
                        }
                        this.stateData$.After = null, this.stateData$.Before = null;
                    }
                }
            }
        ]), _BaseHandler;
    }();
    __name(_BaseHandler, "BaseHandler");
    var BaseHandler = _BaseHandler, BaseHandler_default = BaseHandler, _NothingHandler = function(BaseHandler_default) {
        function _NothingHandler() {
            return _class_call_check(this, _NothingHandler), _call_super(this, _NothingHandler, arguments);
        }
        return _inherits(_NothingHandler, BaseHandler_default), _create_class(_NothingHandler, [
            {
                key: "processAsync",
                value: function processAsync(matchState) {
                    return _async_to_generator(function() {
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    return [
                                        4,
                                        this.nextAsync$(matchState)
                                    ];
                                case 1:
                                    return _state.sent(), [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "nextAsync$",
                value: function nextAsync$(matchState) {
                    return _async_to_generator(function() {
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    if (!this.nextHandler$) return [
                                        2
                                    ];
                                    return [
                                        4,
                                        this.nextHandler$.processAsync(matchState)
                                    ];
                                case 1:
                                    return _state.sent(), [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            }
        ]), _NothingHandler;
    }(BaseHandler_default);
    __name(_NothingHandler, "NothingHandler");
    var NothingHandler = _NothingHandler, NothingHandler_default = NothingHandler;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var _LevelNotDefined = function(ACreateMatchFailed_default) {
        function _LevelNotDefined(message) {
            var _this;
            return _class_call_check(this, _LevelNotDefined), (_this = _call_super(this, _LevelNotDefined, [
                message
            ])).name = "LevelNotDefined", _this.message = null != message ? message : "Level is not defined", _this;
        }
        return _inherits(_LevelNotDefined, ACreateMatchFailed_default), _LevelNotDefined;
    }(ACreateMatchFailed_default);
    __name(_LevelNotDefined, "LevelNotDefined");
    var LevelNotDefined = _LevelNotDefined, LevelNotDefined_default = LevelNotDefined;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var _MatchModeNotDefined = function(ACreateMatchFailed_default) {
        function _MatchModeNotDefined(message) {
            var _this;
            return _class_call_check(this, _MatchModeNotDefined), (_this = _call_super(this, _MatchModeNotDefined, [
                message
            ])).name = "MatchModeNotDefined", _this.message = null != message ? message : "Match id is not defined", _this;
        }
        return _inherits(_MatchModeNotDefined, ACreateMatchFailed_default), _MatchModeNotDefined;
    }(ACreateMatchFailed_default);
    __name(_MatchModeNotDefined, "MatchModeNotDefined");
    var MatchModeNotDefined = _MatchModeNotDefined, MatchModeNotDefined_default = MatchModeNotDefined, _Ludex_Plugins = Ludex.Plugins, tmp = _Ludex_Plugins.Analytics, _ref = void 0 === tmp ? {} : tmp, Events4 = _ref.Events, _Ludex_Utils20 = Ludex.Utils, S4 = _Ludex_Utils20.String, V15 = _Ludex_Utils20.Valid, _LogMatchStartHandler = function(BaseHandler_default) {
        function _LogMatchStartHandler() {
            return _class_call_check(this, _LogMatchStartHandler), _call_super(this, _LogMatchStartHandler, arguments);
        }
        return _inherits(_LogMatchStartHandler, BaseHandler_default), _create_class(_LogMatchStartHandler, [
            {
                key: "processAsync",
                value: function processAsync(matchState) {
                    var _this = this, _this1 = this, _superprop_get_processAsync = function _superprop_get_processAsync() {
                        return _get(_get_prototype_of(_LogMatchStartHandler.prototype), "processAsync", _this);
                    };
                    return _async_to_generator(function() {
                        var mode, level2, analytics;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    return _superprop_get_processAsync().call(_this1, matchState), mode = matchState.mode, level2 = matchState.customData.level, this.validateMode$(mode), this.validateLevel$(level2), analytics = this.codex$.analytics, Events4 && analytics.event(Events4.MATCH_START, {
                                        level: level2,
                                        game_mode: S4.toUpperCamelCase(mode),
                                        level_name: this.getLevelName$(level2)
                                    }), [
                                        4,
                                        this.nextAsync$(matchState)
                                    ];
                                case 1:
                                    return _state.sent(), [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "validateMode$",
                value: function validateMode$(mode) {
                    if (!V15.isString(mode)) throw new MatchModeNotDefined_default();
                }
            },
            {
                key: "validateLevel$",
                value: function validateLevel$(level2) {
                    if (!V15.isNumber(level2)) throw new LevelNotDefined_default();
                }
            },
            {
                key: "getLevelName$",
                value: function getLevelName$(level2) {
                    return "Level ".concat(S4.padStart(level2.toString(), 5, "0"));
                }
            }
        ]), _LogMatchStartHandler;
    }(BaseHandler_default);
    __name(_LogMatchStartHandler, "LogMatchStartHandler");
    var LogMatchStartHandler = _LogMatchStartHandler, LogMatchStartHandler_default = LogMatchStartHandler;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var MatchStatus = {
        OPEN: "open",
        ACTIVE: "active",
        FINISHED: "finished"
    }, MatchStatus_default = MatchStatus, _ContextGameModeHandler = function(BaseHandler_default) {
        function _ContextGameModeHandler() {
            return _class_call_check(this, _ContextGameModeHandler), _call_super(this, _ContextGameModeHandler, arguments);
        }
        return _inherits(_ContextGameModeHandler, BaseHandler_default), _create_class(_ContextGameModeHandler, [
            {
                key: "processAsync",
                value: function processAsync(matchState) {
                    var _this = this, _this1 = this, _superprop_get_processAsync = function _superprop_get_processAsync() {
                        return _get(_get_prototype_of(_ContextGameModeHandler.prototype), "processAsync", _this);
                    };
                    return _async_to_generator(function() {
                        var mode, status, gameMode;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    return _superprop_get_processAsync().call(_this1, matchState), mode = matchState.mode, status = matchState.status, gameMode = null != mode ? mode : ContextModes_default.SINGLE, status === MatchStatus_default.FINISHED && (gameMode = ContextModes_default.SINGLE), this.contextGameModeDetected$(gameMode), [
                                        4,
                                        this.nextAsync$(matchState)
                                    ];
                                case 1:
                                    return _state.sent(), [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "contextGameModeDetected$",
                value: function contextGameModeDetected$(gameMode) {
                    this.codex$.storage.setStorageData("context", "contextGameMode", gameMode);
                }
            }
        ]), _ContextGameModeHandler;
    }(BaseHandler_default);
    __name(_ContextGameModeHandler, "ContextGameModeHandler");
    var ContextGameModeHandler = _ContextGameModeHandler, ContextGameModeHandler_default = ContextGameModeHandler;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var _GetMatchDetailFailed = function(Error1) {
        function _GetMatchDetailFailed(message) {
            var _this;
            return _class_call_check(this, _GetMatchDetailFailed), (_this = _call_super(this, _GetMatchDetailFailed, [
                message
            ])).name = "GetMatchDetailFailed", _this.message = null != message ? message : "Get match detail failed", _this;
        }
        return _inherits(_GetMatchDetailFailed, Error1), _GetMatchDetailFailed;
    }(_wrap_native_super(Error));
    __name(_GetMatchDetailFailed, "GetMatchDetailFailed");
    var GetMatchDetailFailed = _GetMatchDetailFailed, GetMatchDetailFailed_default = GetMatchDetailFailed;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var _MatchAreNotActive = function(Error1) {
        function _MatchAreNotActive(message) {
            var _this;
            return _class_call_check(this, _MatchAreNotActive), (_this = _call_super(this, _MatchAreNotActive, [
                message
            ])).name = "MatchAreNotActive", _this.message = null != message ? message : "Match are not active", _this;
        }
        return _inherits(_MatchAreNotActive, Error1), _MatchAreNotActive;
    }(_wrap_native_super(Error));
    __name(_MatchAreNotActive, "MatchAreNotActive");
    var MatchAreNotActive = _MatchAreNotActive, MatchAreNotActive_default = MatchAreNotActive;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var _MatchIdNotValid = function(ACreateMatchFailed_default) {
        function _MatchIdNotValid(message) {
            var _this;
            return _class_call_check(this, _MatchIdNotValid), (_this = _call_super(this, _MatchIdNotValid, [
                message
            ])).name = "MatchIdNotValid", _this.message = null != message ? message : "Match id is not valid", _this;
        }
        return _inherits(_MatchIdNotValid, ACreateMatchFailed_default), _MatchIdNotValid;
    }(ACreateMatchFailed_default);
    __name(_MatchIdNotValid, "MatchIdNotValid");
    var MatchIdNotValid = _MatchIdNotValid, MatchIdNotValid_default = MatchIdNotValid;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var _OpponentHasFinishedMatch = function(Error1) {
        function _OpponentHasFinishedMatch(message) {
            var _this;
            return _class_call_check(this, _OpponentHasFinishedMatch), (_this = _call_super(this, _OpponentHasFinishedMatch, [
                message
            ])).name = "OpponentHasFinishedMatch", _this.message = message || "Opponent has finished match", _this;
        }
        return _inherits(_OpponentHasFinishedMatch, Error1), _OpponentHasFinishedMatch;
    }(_wrap_native_super(Error));
    __name(_OpponentHasFinishedMatch, "OpponentHasFinishedMatch");
    var OpponentHasFinishedMatch = _OpponentHasFinishedMatch, OpponentHasFinishedMatch_default = OpponentHasFinishedMatch;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var _OpponentIdNotValid = function(ACreateMatchFailed_default) {
        function _OpponentIdNotValid(message) {
            var _this;
            return _class_call_check(this, _OpponentIdNotValid), (_this = _call_super(this, _OpponentIdNotValid, [
                message
            ])).name = "OpponentIdNotValid", _this.message = null != message ? message : "Opponent id is not valid", _this;
        }
        return _inherits(_OpponentIdNotValid, ACreateMatchFailed_default), _OpponentIdNotValid;
    }(ACreateMatchFailed_default);
    __name(_OpponentIdNotValid, "OpponentIdNotValid");
    var OpponentIdNotValid = _OpponentIdNotValid, OpponentIdNotValid_default = OpponentIdNotValid;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var _PlayerNotCurrentInMatch = function(Error1) {
        function _PlayerNotCurrentInMatch(message) {
            var _this;
            return _class_call_check(this, _PlayerNotCurrentInMatch), (_this = _call_super(this, _PlayerNotCurrentInMatch, [
                message
            ])).name = "PlayerNotCurrentInMatch", _this.message = null != message ? message : "The player is not currently in this match", _this;
        }
        return _inherits(_PlayerNotCurrentInMatch, Error1), _PlayerNotCurrentInMatch;
    }(_wrap_native_super(Error));
    __name(_PlayerNotCurrentInMatch, "PlayerNotCurrentInMatch");
    var PlayerNotCurrentInMatch = _PlayerNotCurrentInMatch, PlayerNotCurrentInMatch_default = PlayerNotCurrentInMatch;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var _PlayerNotFinishedMatch = function(Error1) {
        function _PlayerNotFinishedMatch(message) {
            var _this;
            return _class_call_check(this, _PlayerNotFinishedMatch), (_this = _call_super(this, _PlayerNotFinishedMatch, [
                message
            ])).name = "PlayerNotFinishedMatch", _this.message = message || "Player not finished match", _this;
        }
        return _inherits(_PlayerNotFinishedMatch, Error1), _PlayerNotFinishedMatch;
    }(_wrap_native_super(Error));
    __name(_PlayerNotFinishedMatch, "PlayerNotFinishedMatch");
    var PlayerNotFinishedMatch = _PlayerNotFinishedMatch, PlayerNotFinishedMatch_default = PlayerNotFinishedMatch, Dtos2 = Ludex.Dtos, _Ludex_Utils21 = Ludex.Utils, O11 = _Ludex_Utils21.Object, _AwaitMatchHandler = function(BaseHandler_default) {
        function _AwaitMatchHandler() {
            return _class_call_check(this, _AwaitMatchHandler), _call_super(this, _AwaitMatchHandler, arguments);
        }
        return _inherits(_AwaitMatchHandler, BaseHandler_default), _create_class(_AwaitMatchHandler, [
            {
                key: "processAsync",
                value: function processAsync(matchState) {
                    var _this = this, _this1 = this, _superprop_get_processAsync = function _superprop_get_processAsync() {
                        return _get(_get_prototype_of(_AwaitMatchHandler.prototype), "processAsync", _this);
                    };
                    return _async_to_generator(function() {
                        var respMatchData, respMatchDataValidated;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    return _superprop_get_processAsync().call(_this1, matchState), this.validateMatchData$(matchState), [
                                        4,
                                        this.getMatchAsync$(matchState)
                                    ];
                                case 1:
                                    return respMatchData = _state.sent(), respMatchDataValidated = new Dtos2.Match.Data(respMatchData).toObject(), this.validateAwaitMatchData$(matchState, respMatchDataValidated), this.updateMatchData$(matchState, respMatchDataValidated), this.validateMatchStatus$(matchState), this.validatePlayerTurn$(matchState), this.validateOpponentTurn$(matchState), [
                                        4,
                                        this.nextAsync$(matchState)
                                    ];
                                case 2:
                                    return _state.sent(), [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "validateMatchData$",
                value: function validateMatchData$(matchState) {
                    if ("string" != typeof matchState.id) throw new MatchIdNotValid_default();
                }
            },
            {
                key: "validateMatchStatus$",
                value: function validateMatchStatus$(matchState) {
                    if (matchState.status !== MatchStatus_default.ACTIVE) throw new MatchAreNotActive_default();
                }
            },
            {
                key: "validateAwaitMatchData$",
                value: function validateAwaitMatchData$(matchState, matchData) {
                    var id = matchState.id, customData = matchState.customData, _id = matchData._id, whitePlayerId = matchData.whitePlayerId, blackPlayerId = matchData.blackPlayerId;
                    if ("string" != typeof _id || _id !== id) throw new GetMatchDetailFailed_default();
                    var playerId2 = customData.playerId, isPlayerWhite = whitePlayerId === playerId2, isPlayerBlack = blackPlayerId === playerId2;
                    if (!isPlayerWhite && blackPlayerId === SampleOpponent_default.playerId) throw new PlayerNotJoinInMatch_default();
                    if (!isPlayerWhite && !isPlayerBlack) throw new PlayerNotCurrentInMatch_default();
                }
            },
            {
                key: "validatePlayerTurn$",
                value: function validatePlayerTurn$(matchState) {
                    var profiles = matchState.profiles, playerId2 = matchState.customData.playerId;
                    if ("string" != typeof playerId2) throw new PlayerIdNotValid_default();
                    if (!profiles[playerId2].finished) throw new PlayerNotFinishedMatch_default();
                }
            },
            {
                key: "validateOpponentTurn$",
                value: function validateOpponentTurn$(matchState) {
                    var profiles = matchState.profiles, opponentId = matchState.customData.opponentId;
                    if ("string" != typeof opponentId) throw new OpponentIdNotValid_default();
                    if (profiles[opponentId].finished) throw new OpponentHasFinishedMatch_default();
                }
            },
            {
                key: "getMatchAsync$",
                value: function getMatchAsync$(matchState) {
                    return _async_to_generator(function() {
                        var id;
                        return _ts_generator(this, function(_state) {
                            return (id = matchState.id) ? [
                                2,
                                this.match$.api.getMatchAPI().getMatchDetailByIdAsync(id)
                            ] : [
                                2,
                                {}
                            ];
                        });
                    }).call(this);
                }
            },
            {
                key: "updateMatchData$",
                value: function updateMatchData$(matchState, matchData) {
                    this.updateMatchGeneral$(matchState, matchData), this.updatePlayerIds$(matchState, matchData), this.initializeProfiles$(matchState), this.updateScoresAndStatus$(matchState, matchData);
                }
            },
            {
                key: "updateMatchGeneral$",
                value: function updateMatchGeneral$(matchState, matchData) {
                    var status = matchData.status, extraData = matchData.extraData;
                    matchState.status = status, matchState.customData = O11.merge(matchState.customData, extraData);
                }
            },
            {
                key: "updatePlayerIds$",
                value: function updatePlayerIds$(matchState, matchData) {
                    var whitePlayerId = matchData.whitePlayerId, blackPlayerId = matchData.blackPlayerId, isPlayerWhite = whitePlayerId === matchState.customData.playerId;
                    matchState.customData.playerId = isPlayerWhite ? whitePlayerId : blackPlayerId, matchState.customData.opponentId = isPlayerWhite ? blackPlayerId : whitePlayerId;
                }
            },
            {
                key: "initializeProfiles$",
                value: function initializeProfiles$(matchState) {
                    var _matchState_customData = matchState.customData, playerId2 = _matchState_customData.playerId, opponentId = _matchState_customData.opponentId;
                    if (playerId2 && opponentId) {
                        var defaultProfile = {
                            name: "",
                            photo: "",
                            finished: !1
                        };
                        matchState.profiles[playerId2] || (matchState.profiles[playerId2] = __spreadValues({
                            id: playerId2
                        }, defaultProfile)), matchState.profiles[opponentId] || (matchState.profiles[opponentId] = __spreadValues({
                            id: opponentId
                        }, defaultProfile));
                    }
                }
            },
            {
                key: "updateScoresAndStatus$",
                value: function updateScoresAndStatus$(matchState, matchData) {
                    var _matchState_customData = matchState.customData, playerId2 = _matchState_customData.playerId, opponentId = _matchState_customData.opponentId;
                    if (playerId2 && opponentId) {
                        var whitePlayerId = matchData.whitePlayerId, whitePlayerScore = matchData.whitePlayerScore, whitePlayerFinish = matchData.whitePlayerFinish, blackPlayerScore = matchData.blackPlayerScore, blackPlayerFinish = matchData.blackPlayerFinish, isPlayerWhite = whitePlayerId === playerId2;
                        matchState.profiles[playerId2].score = isPlayerWhite ? whitePlayerScore : blackPlayerScore, matchState.profiles[opponentId].score = isPlayerWhite ? blackPlayerScore : whitePlayerScore, matchState.profiles[playerId2].finished = isPlayerWhite ? whitePlayerFinish : blackPlayerFinish, matchState.profiles[opponentId].finished = isPlayerWhite ? blackPlayerFinish : whitePlayerFinish;
                    }
                }
            }
        ]), _AwaitMatchHandler;
    }(BaseHandler_default);
    __name(_AwaitMatchHandler, "AwaitMatchHandler");
    var AwaitMatchHandler = _AwaitMatchHandler, AwaitMatchHandler_default = AwaitMatchHandler;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var DefaultCustomData = {
        level: 1,
        rescued: 0,
        contextId: null,
        playerId: null,
        opponentId: null,
        tournamentId: null,
        leaderboardId: null
    }, DefaultCustomData_default = DefaultCustomData, _PrepareMatchHandler = function(BaseHandler_default) {
        function _PrepareMatchHandler(concrete, payload) {
            var _this;
            return _class_call_check(this, _PrepareMatchHandler), _define_property(_this = _call_super(this, _PrepareMatchHandler, [
                concrete
            ]), "payload$", void 0), _this.payload$ = payload, _this;
        }
        return _inherits(_PrepareMatchHandler, BaseHandler_default), _create_class(_PrepareMatchHandler, [
            {
                key: "processAsync",
                value: function processAsync(matchState) {
                    var _this = this, _this1 = this, _superprop_get_processAsync = function _superprop_get_processAsync() {
                        return _get(_get_prototype_of(_PrepareMatchHandler.prototype), "processAsync", _this);
                    };
                    return _async_to_generator(function() {
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    return _superprop_get_processAsync().call(_this1, matchState), this.initializeMatch$(matchState), [
                                        4,
                                        this.nextAsync$(matchState)
                                    ];
                                case 1:
                                    return _state.sent(), [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "initializeMatch$",
                value: function initializeMatch$(matchState) {
                    var _this_payload$ = this.payload$, id = _this_payload$.id, mode = _this_payload$.mode, customData = _this_payload$.customData;
                    matchState.id = null != id ? id : null, matchState.mode = mode || null, matchState.status = MatchStatus_default.OPEN, matchState.startAt = 0, matchState.finishAt = 0, matchState.profiles = {}, matchState.customData = __spreadValues(__spreadValues(__spreadValues({}, DefaultCustomData_default), matchState.customData), customData);
                }
            }
        ]), _PrepareMatchHandler;
    }(BaseHandler_default);
    __name(_PrepareMatchHandler, "PrepareMatchHandler");
    var PrepareMatchHandler = _PrepareMatchHandler, PrepareMatchHandler_default = PrepareMatchHandler;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var ContextTypes = ContextTypes_default, ContextTypes_default2 = ContextTypes;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var _UnavailableFeature = function(Error1) {
        function _UnavailableFeature(message) {
            var _this;
            return _class_call_check(this, _UnavailableFeature), (_this = _call_super(this, _UnavailableFeature, [
                message
            ])).name = "UnavailableFeature", _this.message = "Unavailable feature: ".concat(message), _this;
        }
        return _inherits(_UnavailableFeature, Error1), _UnavailableFeature;
    }(_wrap_native_super(Error));
    __name(_UnavailableFeature, "UnavailableFeature");
    var UnavailableFeature = _UnavailableFeature, UnavailableFeature_default = UnavailableFeature;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var _ContextIdNotValid = function(ACreateMatchFailed_default) {
        function _ContextIdNotValid(message) {
            var _this;
            return _class_call_check(this, _ContextIdNotValid), (_this = _call_super(this, _ContextIdNotValid, [
                message
            ])).name = "ContextIdNotValid", _this.message = null != message ? message : "Context id is not valid", _this;
        }
        return _inherits(_ContextIdNotValid, ACreateMatchFailed_default), _ContextIdNotValid;
    }(ACreateMatchFailed_default);
    __name(_ContextIdNotValid, "ContextIdNotValid");
    var ContextIdNotValid = _ContextIdNotValid, ContextIdNotValid_default = ContextIdNotValid;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var _ProfileNotFound = function(ACreateMatchFailed_default) {
        function _ProfileNotFound(message) {
            var _this;
            return _class_call_check(this, _ProfileNotFound), (_this = _call_super(this, _ProfileNotFound, [
                message
            ])).name = "ProfileNotFound", _this.message = null != message ? message : "Profile not found", _this;
        }
        return _inherits(_ProfileNotFound, ACreateMatchFailed_default), _ProfileNotFound;
    }(ACreateMatchFailed_default);
    __name(_ProfileNotFound, "ProfileNotFound");
    var ProfileNotFound = _ProfileNotFound, ProfileNotFound_default = ProfileNotFound, _SendAwaitingMessageHandler = function(BaseHandler_default) {
        function _SendAwaitingMessageHandler() {
            return _class_call_check(this, _SendAwaitingMessageHandler), _call_super(this, _SendAwaitingMessageHandler, arguments);
        }
        return _inherits(_SendAwaitingMessageHandler, BaseHandler_default), _create_class(_SendAwaitingMessageHandler, [
            {
                key: "processAsync",
                value: function processAsync(matchState) {
                    var _this = this, _this1 = this, _superprop_get_processAsync = function _superprop_get_processAsync() {
                        return _get(_get_prototype_of(_SendAwaitingMessageHandler.prototype), "processAsync", _this);
                    };
                    return _async_to_generator(function() {
                        var imageResult;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    return _superprop_get_processAsync().call(_this1, matchState), this.validateData$(matchState), [
                                        4,
                                        this.createWideframesAwaitingAsync$(matchState)
                                    ];
                                case 1:
                                    return (imageResult = _state.sent()) && this.sendMessageAsync$(matchState, imageResult), [
                                        4,
                                        this.nextAsync$(matchState)
                                    ];
                                case 2:
                                    return _state.sent(), [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "validateData$",
                value: function validateData$(matchState) {
                    var id = matchState.id, customData = matchState.customData, contextId2 = customData.contextId, opponentId = customData.opponentId;
                    if (!id || "string" != typeof id) throw new MatchIdNotValid_default();
                    if (!contextId2 || "string" != typeof contextId2) throw new ContextIdNotValid_default();
                    if (!opponentId || "string" != typeof opponentId) throw new OpponentIdNotValid_default();
                }
            },
            {
                key: "createWideframesAwaitingAsync$",
                value: function createWideframesAwaitingAsync$(matchState) {
                    return _async_to_generator(function() {
                        var frameCapture, profiles, customData, playerId2, opponentId, playerProfile, opponentProfile, playerPhoto, tmp, playerScore, opponentPhoto, tmp1, opponentScore;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    if (_state.trys.push([
                                        0,
                                        2,
                                        ,
                                        3
                                    ]), frameCapture = this.codex$.frameCapture, profiles = matchState.profiles, playerId2 = (customData = matchState.customData).playerId, opponentId = customData.opponentId, !playerId2 || !opponentId || (playerProfile = profiles[playerId2], opponentProfile = profiles[opponentId], !playerProfile || !opponentProfile) || (playerPhoto = playerProfile.photo, playerScore = void 0 === (tmp = playerProfile.score) ? 0 : tmp, !playerProfile.finished) || (opponentPhoto = opponentProfile.photo, opponentScore = void 0 === (tmp1 = opponentProfile.score) ? 0 : tmp1, opponentProfile.finished)) return [
                                        2,
                                        null
                                    ];
                                    return [
                                        4,
                                        frameCapture.renderAsync("result-challenge", {
                                            playerId: playerId2,
                                            playerPhoto: playerPhoto,
                                            playerScore: playerScore,
                                            opponentId: opponentId,
                                            opponentPhoto: opponentPhoto,
                                            opponentScore: opponentScore,
                                            isPlayerFinished: !0,
                                            isOpponentFinished: !1
                                        })
                                    ];
                                case 1:
                                    return [
                                        2,
                                        _state.sent()
                                    ];
                                case 2:
                                    return console.warn("createWideframesAwaitingAsync", _state.sent()), [
                                        2,
                                        null
                                    ];
                                case 3:
                                    return [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "sendMessageAsync$",
                value: function sendMessageAsync$(matchState, wideframes) {
                    return _async_to_generator(function() {
                        var id, profiles, customData, playerId2, opponentId, playerProfile, playerName, message;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    if (id = matchState.id, profiles = matchState.profiles, playerId2 = (customData = matchState.customData).playerId, opponentId = customData.opponentId, !playerId2 || "string" != typeof playerId2) throw new PlayerIdNotValid_default();
                                    if (!("updateAsync" in GameSDK.extra)) throw new UnavailableFeature_default("updateAsync");
                                    if (!(playerProfile = profiles[playerId2])) throw new ProfileNotFound_default();
                                    return playerName = playerProfile.name, message = {
                                        data: {
                                            type: ContextTypes_default2.CHALLENGE_FRIEND,
                                            matchId: id,
                                            playerId: playerId2,
                                            opponentId: opponentId
                                        },
                                        action: "CUSTOM",
                                        template: "challenge",
                                        cta: {
                                            default: "Play",
                                            localizations: {
                                                vi_VN: "Ch\u01A1i ngay"
                                            }
                                        },
                                        text: {
                                            default: "".concat(playerName, " is waiting for you to finish this game. Play now!"),
                                            localizations: {
                                                vi_VN: "".concat(playerName, " ang ch bn kt th\xfac trn u. Chi ngay!")
                                            }
                                        },
                                        image: wideframes,
                                        strategy: "LAST",
                                        notification: "PUSH"
                                    }, [
                                        4,
                                        GameSDK.extra.updateAsync(message)
                                    ];
                                case 1:
                                    return _state.sent(), [
                                        2
                                    ];
                            }
                        });
                    })();
                }
            }
        ]), _SendAwaitingMessageHandler;
    }(BaseHandler_default);
    __name(_SendAwaitingMessageHandler, "SendAwaitingMessageHandler");
    var SendAwaitingMessageHandler = _SendAwaitingMessageHandler, SendAwaitingMessageHandler_default = SendAwaitingMessageHandler;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var Dtos3 = Ludex.Dtos, _GetMatchProfilesHandler = function(BaseHandler_default) {
        function _GetMatchProfilesHandler() {
            return _class_call_check(this, _GetMatchProfilesHandler), _call_super(this, _GetMatchProfilesHandler, arguments);
        }
        return _inherits(_GetMatchProfilesHandler, BaseHandler_default), _create_class(_GetMatchProfilesHandler, [
            {
                key: "processAsync",
                value: function processAsync(matchState) {
                    var _this = this, _this1 = this, _superprop_get_processAsync = function _superprop_get_processAsync() {
                        return _get(_get_prototype_of(_GetMatchProfilesHandler.prototype), "processAsync", _this);
                    };
                    return _async_to_generator(function() {
                        var customData, playerId2, opponentId, profileId, playerProfile, opponentProfile;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    return _superprop_get_processAsync().call(_this1, matchState), this.validateData$(matchState), playerId2 = (customData = matchState.customData).playerId, opponentId = customData.opponentId, profileId = playerId2, [
                                        4,
                                        this.getProfile$(profileId)
                                    ];
                                case 1:
                                    if (!(playerProfile = _state.sent())) throw new ProfileNotFound_default();
                                    if (this.updateMatchProfile$(matchState, profileId, playerProfile), (profileId = opponentId) === SampleOpponent_default.playerId) return [
                                        3,
                                        3
                                    ];
                                    return [
                                        4,
                                        this.getProfile$(profileId)
                                    ];
                                case 2:
                                    if (!(opponentProfile = _state.sent())) throw new ProfileNotFound_default();
                                    return this.updateMatchProfile$(matchState, profileId, opponentProfile), [
                                        3,
                                        4
                                    ];
                                case 3:
                                    this.updateMatchProfile$(matchState, profileId), _state.label = 4;
                                case 4:
                                    return [
                                        4,
                                        this.nextAsync$(matchState)
                                    ];
                                case 5:
                                    return _state.sent(), [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "validateData$",
                value: function validateData$(matchState) {
                    var customData = matchState.customData, playerId2 = customData.playerId, opponentId = customData.opponentId;
                    if (!playerId2 || "string" != typeof playerId2) throw new PlayerIdNotValid_default();
                    if (!opponentId || "string" != typeof opponentId) throw new OpponentIdNotValid_default();
                }
            },
            {
                key: "getProfile$",
                value: function getProfile$(profileId) {
                    return _async_to_generator(function() {
                        var profile;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    return [
                                        4,
                                        (profile = this.codex$.profile).requestProfiles([
                                            profileId
                                        ])
                                    ];
                                case 1:
                                    return _state.sent(), [
                                        2,
                                        profile.getProfiles()[profileId]
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "updateMatchProfile$",
                value: function updateMatchProfile$(matchState, profileId, data) {
                    var _ref = null != data ? data : SampleOpponent_default, name2 = _ref.name, photo2 = _ref.photo, profile = new Dtos3.Match.Profile({
                        id: profileId,
                        name: name2,
                        photo: photo2
                    }).toObject();
                    matchState.profiles[profileId] ? (matchState.profiles[profileId].name = profile.name, matchState.profiles[profileId].photo = profile.photo) : matchState.profiles[profileId] = profile;
                }
            }
        ]), _GetMatchProfilesHandler;
    }(BaseHandler_default);
    __name(_GetMatchProfilesHandler, "GetMatchProfilesHandler");
    var GetMatchProfilesHandler = _GetMatchProfilesHandler, GetMatchProfilesHandler_default = GetMatchProfilesHandler, _AwaitChallengeMatchConcrete = function(BaseConcrete_default) {
        function _AwaitChallengeMatchConcrete() {
            return _class_call_check(this, _AwaitChallengeMatchConcrete), _call_super(this, _AwaitChallengeMatchConcrete, arguments);
        }
        return _inherits(_AwaitChallengeMatchConcrete, BaseConcrete_default), _create_class(_AwaitChallengeMatchConcrete, [
            {
                key: "processAsync",
                value: function processAsync(payload) {
                    return _async_to_generator(function() {
                        var matchId, playerId2, opponentId, flow, prepareMatch, getMatch, getMatchProfiles, sendMessage, logStart, detectGameMode, matchState;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    return _state.trys.push([
                                        0,
                                        ,
                                        2,
                                        3
                                    ]), this.startLog$(payload), matchId = payload.matchId, playerId2 = payload.playerId, opponentId = payload.opponentId, flow = new NothingHandler_default(this), prepareMatch = new PrepareMatchHandler_default(this, {
                                        id: matchId,
                                        mode: MatchModes_default.CHALLENGE_FRIEND,
                                        customData: {
                                            playerId: playerId2,
                                            opponentId: opponentId
                                        }
                                    }), flow.setNext(prepareMatch), getMatch = new AwaitMatchHandler_default(this), prepareMatch.setNext(getMatch), getMatchProfiles = new GetMatchProfilesHandler_default(this), getMatch.setNext(getMatchProfiles), sendMessage = new SendAwaitingMessageHandler_default(this), getMatchProfiles.setNext(sendMessage), logStart = new LogMatchStartHandler_default(this), sendMessage.setNext(logStart), detectGameMode = new ContextGameModeHandler_default(this), logStart.setNext(detectGameMode), matchState = this.match.getMatchState(), [
                                        4,
                                        flow.processAsync(matchState)
                                    ];
                                case 1:
                                    return _state.sent(), [
                                        3,
                                        3
                                    ];
                                case 2:
                                    return this.endLog$(), [
                                        7
                                    ];
                                case 3:
                                    return [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            }
        ]), _AwaitChallengeMatchConcrete;
    }(BaseConcrete_default);
    __name(_AwaitChallengeMatchConcrete, "AwaitChallengeMatchConcrete");
    var AwaitChallengeMatchConcrete = _AwaitChallengeMatchConcrete, AwaitChallengeMatchConcrete_default = AwaitChallengeMatchConcrete;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var _CreateContextFailed = function(ACreateMatchFailed_default) {
        function _CreateContextFailed(message) {
            var _this;
            return _class_call_check(this, _CreateContextFailed), (_this = _call_super(this, _CreateContextFailed, [
                message
            ])).name = "CreateContextFailed", _this.message = null != message ? message : "Create context failed", _this;
        }
        return _inherits(_CreateContextFailed, ACreateMatchFailed_default), _CreateContextFailed;
    }(ACreateMatchFailed_default);
    __name(_CreateContextFailed, "CreateContextFailed");
    var CreateContextFailed = _CreateContextFailed, CreateContextFailed_default = CreateContextFailed, _Ludex_Utils22 = Ludex.Utils, V16 = _Ludex_Utils22.Valid, O12 = _Ludex_Utils22.Object, _CreateContextHandler = function(BaseHandler_default) {
        function _CreateContextHandler(concrete, payload) {
            var _this;
            return _class_call_check(this, _CreateContextHandler), _define_property(_this = _call_super(this, _CreateContextHandler, [
                concrete
            ]), "payload$", void 0), _this.payload$ = payload, _this;
        }
        return _inherits(_CreateContextHandler, BaseHandler_default), _create_class(_CreateContextHandler, [
            {
                key: "processAsync",
                value: function processAsync(matchState) {
                    var _this = this, _this1 = this, _superprop_get_processAsync = function _superprop_get_processAsync() {
                        return _get(_get_prototype_of(_CreateContextHandler.prototype), "processAsync", _this);
                    };
                    return _async_to_generator(function() {
                        var opponentId, contextId2;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    return _superprop_get_processAsync().call(_this1, matchState), opponentId = this.payload$.opponentId, [
                                        4,
                                        this.createAsync$(opponentId)
                                    ];
                                case 1:
                                    return contextId2 = _state.sent(), matchState.customData.contextId = contextId2, [
                                        4,
                                        this.nextAsync$(matchState)
                                    ];
                                case 2:
                                    return _state.sent(), [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "createAsync$",
                value: function createAsync$(opponentId) {
                    return _async_to_generator(function() {
                        var error, contextId2;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    return _state.trys.push([
                                        0,
                                        2,
                                        ,
                                        3
                                    ]), [
                                        4,
                                        GameSDK.context.createAsync(opponentId)
                                    ];
                                case 1:
                                    return _state.sent(), [
                                        3,
                                        3
                                    ];
                                case 2:
                                    return error = _state.sent(), this.validateError$(error), [
                                        3,
                                        3
                                    ];
                                case 3:
                                    if (contextId2 = GameSDK.context.getID(), !V16.isString(contextId2)) throw new CreateContextFailed_default();
                                    return [
                                        2,
                                        contextId2
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "validateError$",
                value: function validateError$(error) {
                    if (!O12.hasOwn(error, "code")) throw error;
                    if ("SAME_CONTEXT" !== error.code) {
                        if ("INVALID_PARAM" === error.code) {
                            if (!this.isNotConnectedPlayerError$(error)) throw error;
                            return;
                        }
                        throw error;
                    }
                }
            },
            {
                key: "validateErrorMessage$",
                value: function validateErrorMessage$(error) {
                    if (!O12.hasOwn(error, "message") || !V16.isString(error.message)) throw error;
                }
            },
            {
                key: "isNotConnectedPlayerError$",
                value: function isNotConnectedPlayerError$(error) {
                    return this.validateErrorMessage$(error), error.message.indexOf("is not a connected player of the current player") > -1;
                }
            }
        ]), _CreateContextHandler;
    }(BaseHandler_default);
    __name(_CreateContextHandler, "CreateContextHandler");
    var CreateContextHandler = _CreateContextHandler, CreateContextHandler_default = CreateContextHandler;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var _MatchAreNotOpen = function(ACreateMatchFailed_default) {
        function _MatchAreNotOpen(message) {
            var _this;
            return _class_call_check(this, _MatchAreNotOpen), (_this = _call_super(this, _MatchAreNotOpen, [
                message
            ])).name = "MatchAreNotOpen", _this.message = null != message ? message : "Match are not open", _this;
        }
        return _inherits(_MatchAreNotOpen, ACreateMatchFailed_default), _MatchAreNotOpen;
    }(ACreateMatchFailed_default);
    __name(_MatchAreNotOpen, "MatchAreNotOpen");
    var MatchAreNotOpen = _MatchAreNotOpen, MatchAreNotOpen_default = MatchAreNotOpen, Dtos4 = Ludex.Dtos, _Ludex_Utils23 = Ludex.Utils, O13 = _Ludex_Utils23.Object, _CreateMatchHandler = function(BaseHandler_default) {
        function _CreateMatchHandler(concrete, payload) {
            var _this;
            return _class_call_check(this, _CreateMatchHandler), _define_property(_this = _call_super(this, _CreateMatchHandler, [
                concrete
            ]), "payload$", void 0), _this.payload$ = payload, _this;
        }
        return _inherits(_CreateMatchHandler, BaseHandler_default), _create_class(_CreateMatchHandler, [
            {
                key: "processAsync",
                value: function processAsync(matchState) {
                    var _this = this, _this1 = this, _superprop_get_processAsync = function _superprop_get_processAsync() {
                        return _get(_get_prototype_of(_CreateMatchHandler.prototype), "processAsync", _this);
                    };
                    return _async_to_generator(function() {
                        var respMatchData, respMatchDataValidated;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    return _superprop_get_processAsync().call(_this1, matchState), this.validateData$(matchState), [
                                        4,
                                        this.createMatchAsync$(matchState)
                                    ];
                                case 1:
                                    return respMatchData = _state.sent(), respMatchDataValidated = new Dtos4.Match.Data(respMatchData).toObject(), this.updateMatchState$(matchState, respMatchDataValidated), [
                                        4,
                                        this.nextAsync$(matchState)
                                    ];
                                case 2:
                                    return _state.sent(), [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "validateData$",
                value: function validateData$(matchState) {
                    var status = matchState.status;
                    if ("string" != typeof matchState.customData.opponentId) throw new OpponentIdNotValid_default();
                    if (status !== MatchStatus_default.OPEN) throw new MatchAreNotOpen_default();
                }
            },
            {
                key: "createMatchAsync$",
                value: function createMatchAsync$(matchState) {
                    return _async_to_generator(function() {
                        var opponentId, extraData, payload;
                        return _ts_generator(this, function(_state) {
                            return (opponentId = matchState.customData.opponentId, extraData = this.payload$.extraData, opponentId) ? (payload = {
                                opponentPlayerId: opponentId,
                                extraData: extraData
                            }, [
                                2,
                                this.match$.api.getMatchAPI().createMatchAsync(payload)
                            ]) : [
                                2,
                                {}
                            ];
                        });
                    }).call(this);
                }
            },
            {
                key: "updateMatchState$",
                value: function updateMatchState$(matchState, matchData) {
                    this.updateMatchGeneral$(matchState, matchData), this.updatePlayerIds$(matchState, matchData), this.initializeProfiles$(matchState), this.updateFinishStatus$(matchState, matchData);
                }
            },
            {
                key: "updateMatchGeneral$",
                value: function updateMatchGeneral$(matchState, matchData) {
                    var _id = matchData._id, extraData = matchData.extraData;
                    matchState.id = _id || null, matchState.customData = O13.merge(matchState.customData, extraData);
                }
            },
            {
                key: "updatePlayerIds$",
                value: function updatePlayerIds$(matchState, matchData) {
                    var whitePlayerId = matchData.whitePlayerId, blackPlayerId = matchData.blackPlayerId, isOpponentWhite = whitePlayerId === matchState.customData.opponentId, playerId2 = isOpponentWhite ? blackPlayerId : whitePlayerId, opponentId = isOpponentWhite ? whitePlayerId : blackPlayerId;
                    matchState.customData.playerId = playerId2, matchState.customData.opponentId = opponentId;
                }
            },
            {
                key: "initializeProfiles$",
                value: function initializeProfiles$(matchState) {
                    var _matchState_customData = matchState.customData, playerId2 = _matchState_customData.playerId, opponentId = _matchState_customData.opponentId;
                    if (playerId2 && opponentId) {
                        var defaultProfile = {
                            name: "",
                            photo: "",
                            finished: !1
                        };
                        matchState.profiles[playerId2] || (matchState.profiles[playerId2] = __spreadValues({
                            id: playerId2
                        }, defaultProfile)), matchState.profiles[opponentId] || (matchState.profiles[opponentId] = __spreadValues({
                            id: opponentId
                        }, defaultProfile));
                    }
                }
            },
            {
                key: "updateFinishStatus$",
                value: function updateFinishStatus$(matchState, matchData) {
                    var _matchState_customData = matchState.customData, playerId2 = _matchState_customData.playerId, opponentId = _matchState_customData.opponentId;
                    if (playerId2 && opponentId) {
                        var whitePlayerId = matchData.whitePlayerId, whitePlayerFinish = matchData.whitePlayerFinish, blackPlayerFinish = matchData.blackPlayerFinish, isOpponentWhite = whitePlayerId === matchState.customData.opponentId, playerFinished = isOpponentWhite ? blackPlayerFinish : whitePlayerFinish, opponentFinished = isOpponentWhite ? whitePlayerFinish : blackPlayerFinish;
                        matchState.profiles[playerId2].finished = playerFinished, matchState.profiles[opponentId].finished = opponentFinished;
                    }
                }
            }
        ]), _CreateMatchHandler;
    }(BaseHandler_default);
    __name(_CreateMatchHandler, "CreateMatchHandler");
    var CreateMatchHandler = _CreateMatchHandler, CreateMatchHandler_default = CreateMatchHandler;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var _StartMatchHandler = function(BaseHandler_default) {
        function _StartMatchHandler() {
            return _class_call_check(this, _StartMatchHandler), _call_super(this, _StartMatchHandler, arguments);
        }
        return _inherits(_StartMatchHandler, BaseHandler_default), _create_class(_StartMatchHandler, [
            {
                key: "processAsync",
                value: function processAsync(matchState) {
                    var _this = this, _this1 = this, _superprop_get_processAsync = function _superprop_get_processAsync() {
                        return _get(_get_prototype_of(_StartMatchHandler.prototype), "processAsync", _this);
                    };
                    return _async_to_generator(function() {
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    if (_superprop_get_processAsync().call(_this1, matchState), matchState.status !== MatchStatus_default.OPEN) throw new MatchAreNotOpen_default();
                                    return this.startMatch$(matchState), [
                                        4,
                                        this.nextAsync$(matchState)
                                    ];
                                case 1:
                                    return _state.sent(), [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "startMatch$",
                value: function startMatch$(matchState) {
                    matchState.status = MatchStatus_default.ACTIVE, matchState.startAt = Date.now();
                }
            }
        ]), _StartMatchHandler;
    }(BaseHandler_default);
    __name(_StartMatchHandler, "StartMatchHandler");
    var StartMatchHandler = _StartMatchHandler, StartMatchHandler_default = StartMatchHandler;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var _SendChallengeMessageHandler = function(BaseHandler_default) {
        function _SendChallengeMessageHandler() {
            return _class_call_check(this, _SendChallengeMessageHandler), _call_super(this, _SendChallengeMessageHandler, arguments);
        }
        return _inherits(_SendChallengeMessageHandler, BaseHandler_default), _create_class(_SendChallengeMessageHandler, [
            {
                key: "processAsync",
                value: function processAsync(matchState) {
                    var _this = this, _this1 = this, _superprop_get_processAsync = function _superprop_get_processAsync() {
                        return _get(_get_prototype_of(_SendChallengeMessageHandler.prototype), "processAsync", _this);
                    };
                    return _async_to_generator(function() {
                        var imageResult;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    return _superprop_get_processAsync().call(_this1, matchState), this.validateData$(matchState), [
                                        4,
                                        this.createWideframesChallengeAsync$(matchState)
                                    ];
                                case 1:
                                    return (imageResult = _state.sent()) && this.sendMessageAsync$(matchState, imageResult), [
                                        4,
                                        this.nextAsync$(matchState)
                                    ];
                                case 2:
                                    return _state.sent(), [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "validateData$",
                value: function validateData$(matchState) {
                    var id = matchState.id, customData = matchState.customData, contextId2 = customData.contextId, opponentId = customData.opponentId;
                    if (!id || "string" != typeof id) throw new MatchIdNotValid_default();
                    if (!contextId2 || "string" != typeof contextId2) throw new ContextIdNotValid_default();
                    if (!opponentId || "string" != typeof opponentId) throw new OpponentIdNotValid_default();
                }
            },
            {
                key: "createWideframesChallengeAsync$",
                value: function createWideframesChallengeAsync$(matchState) {
                    return _async_to_generator(function() {
                        var frameCapture, profiles, customData, playerId2, opponentId, playerProfile, opponentProfile, playerPhoto, tmp, playerScore, opponentPhoto, tmp1, opponentScore;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    if (_state.trys.push([
                                        0,
                                        2,
                                        ,
                                        3
                                    ]), frameCapture = this.codex$.frameCapture, profiles = matchState.profiles, playerId2 = (customData = matchState.customData).playerId, opponentId = customData.opponentId, !playerId2 || !opponentId || (playerProfile = profiles[playerId2], opponentProfile = profiles[opponentId], !playerProfile || !opponentProfile)) return [
                                        2,
                                        null
                                    ];
                                    return playerPhoto = playerProfile.photo, playerScore = void 0 === (tmp = playerProfile.score) ? 0 : tmp, opponentPhoto = opponentProfile.photo, opponentScore = void 0 === (tmp1 = opponentProfile.score) ? 0 : tmp1, [
                                        4,
                                        frameCapture.renderAsync("result-challenge", {
                                            playerId: playerId2,
                                            playerPhoto: playerPhoto,
                                            playerScore: playerScore,
                                            opponentId: opponentId,
                                            opponentPhoto: opponentPhoto,
                                            opponentScore: opponentScore,
                                            isPlayerFinished: !1,
                                            isOpponentFinished: !1
                                        })
                                    ];
                                case 1:
                                    return [
                                        2,
                                        _state.sent()
                                    ];
                                case 2:
                                    return console.warn("createWideframesChallengeAsync", _state.sent()), [
                                        2,
                                        null
                                    ];
                                case 3:
                                    return [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "sendMessageAsync$",
                value: function sendMessageAsync$(matchState, wideframes) {
                    return _async_to_generator(function() {
                        var id, profiles, customData, playerId2, opponentId, playerName, message;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    if (id = matchState.id, profiles = matchState.profiles, playerId2 = (customData = matchState.customData).playerId, opponentId = customData.opponentId, !playerId2 || "string" != typeof playerId2) throw new PlayerIdNotValid_default();
                                    if (!("updateAsync" in GameSDK.extra)) throw new UnavailableFeature_default("updateAsync");
                                    return playerName = profiles[playerId2].name, message = {
                                        data: {
                                            type: ContextTypes_default2.CHALLENGE_FRIEND,
                                            matchId: id,
                                            playerId: playerId2,
                                            opponentId: opponentId
                                        },
                                        action: "CUSTOM",
                                        template: "challenge",
                                        cta: {
                                            default: "Play",
                                            localizations: {
                                                vi_VN: "Ch\u01A1i ngay"
                                            }
                                        },
                                        text: {
                                            default: "".concat(playerName, " challenges you"),
                                            localizations: {
                                                vi_VN: "".concat(playerName, " th th\xe1ch bn trong trn u n\xe0y. Chi ngay!")
                                            }
                                        },
                                        image: wideframes,
                                        strategy: "IMMEDIATE",
                                        notification: "PUSH"
                                    }, [
                                        4,
                                        GameSDK.extra.updateAsync(message)
                                    ];
                                case 1:
                                    return _state.sent(), [
                                        2
                                    ];
                            }
                        });
                    })();
                }
            }
        ]), _SendChallengeMessageHandler;
    }(BaseHandler_default);
    __name(_SendChallengeMessageHandler, "SendChallengeMessageHandler");
    var SendChallengeMessageHandler = _SendChallengeMessageHandler, SendChallengeMessageHandler_default = SendChallengeMessageHandler, _ChallengeFriendConcrete = function(BaseConcrete_default) {
        function _ChallengeFriendConcrete() {
            return _class_call_check(this, _ChallengeFriendConcrete), _call_super(this, _ChallengeFriendConcrete, arguments);
        }
        return _inherits(_ChallengeFriendConcrete, BaseConcrete_default), _create_class(_ChallengeFriendConcrete, [
            {
                key: "processAsync",
                value: function processAsync(payload) {
                    return _async_to_generator(function() {
                        var playerId2, opponentId, extraData, flow, createContext, prepareMatch, createMatch, getMatchProfiles, startMatch, logStart, sendMessage, detectGameMode, matchState;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    return _state.trys.push([
                                        0,
                                        ,
                                        2,
                                        3
                                    ]), this.startLog$(payload), playerId2 = payload.playerId, opponentId = payload.opponentId, extraData = payload.extraData, flow = new NothingHandler_default(this), createContext = new CreateContextHandler_default(this, {
                                        opponentId: opponentId
                                    }), flow.setNext(createContext), prepareMatch = new PrepareMatchHandler_default(this, {
                                        mode: MatchModes_default.CHALLENGE_FRIEND,
                                        customData: {
                                            playerId: playerId2,
                                            opponentId: opponentId
                                        }
                                    }), createContext.setNext(prepareMatch), createMatch = new CreateMatchHandler_default(this, {
                                        extraData: extraData
                                    }), prepareMatch.setNext(createMatch), getMatchProfiles = new GetMatchProfilesHandler_default(this), createMatch.setNext(getMatchProfiles), startMatch = new StartMatchHandler_default(this), getMatchProfiles.setNext(startMatch), logStart = new LogMatchStartHandler_default(this), startMatch.setNext(logStart), sendMessage = new SendChallengeMessageHandler_default(this), logStart.setNext(sendMessage), detectGameMode = new ContextGameModeHandler_default(this), sendMessage.setNext(detectGameMode), matchState = this.match.getMatchState(), [
                                        4,
                                        flow.processAsync(matchState)
                                    ];
                                case 1:
                                    return _state.sent(), [
                                        3,
                                        3
                                    ];
                                case 2:
                                    return this.endLog$(), [
                                        7
                                    ];
                                case 3:
                                    return [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            }
        ]), _ChallengeFriendConcrete;
    }(BaseConcrete_default);
    __name(_ChallengeFriendConcrete, "ChallengeFriendConcrete");
    var ChallengeFriendConcrete = _ChallengeFriendConcrete, ChallengeFriendConcrete_default = ChallengeFriendConcrete;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var _ContextNotValid = function(Error1) {
        function _ContextNotValid(message) {
            var _this;
            return _class_call_check(this, _ContextNotValid), (_this = _call_super(this, _ContextNotValid, [
                message
            ])).name = "ContextNotValid", _this.message = null != message ? message : "Context is not valid", _this;
        }
        return _inherits(_ContextNotValid, Error1), _ContextNotValid;
    }(_wrap_native_super(Error));
    __name(_ContextNotValid, "ContextNotValid");
    var ContextNotValid = _ContextNotValid, ContextNotValid_default = ContextNotValid;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var _SameContext = function(Error1) {
        function _SameContext(message) {
            var _this;
            return _class_call_check(this, _SameContext), (_this = _call_super(this, _SameContext, [
                message
            ])).name = "SameContext", _this.message = null != message ? message : "Same context", _this;
        }
        return _inherits(_SameContext, Error1), _SameContext;
    }(_wrap_native_super(Error));
    __name(_SameContext, "SameContext");
    var SameContext = _SameContext, SameContext_default = SameContext, Utils3 = Ludex.Utils, _SwitchContextHandler = function(BaseHandler_default) {
        function _SwitchContextHandler(concrete, payload) {
            var _this;
            return _class_call_check(this, _SwitchContextHandler), _define_property(_this = _call_super(this, _SwitchContextHandler, [
                concrete
            ]), "payload$", void 0), _this.payload$ = payload, _this;
        }
        return _inherits(_SwitchContextHandler, BaseHandler_default), _create_class(_SwitchContextHandler, [
            {
                key: "processAsync",
                value: function processAsync(matchState) {
                    var _this = this, _this1 = this, _superprop_get_processAsync = function _superprop_get_processAsync() {
                        return _get(_get_prototype_of(_SwitchContextHandler.prototype), "processAsync", _this);
                    };
                    return _async_to_generator(function() {
                        var contextId2;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    return _superprop_get_processAsync().call(_this1, matchState), contextId2 = this.payload$.contextId, [
                                        4,
                                        this.switchAsync$(contextId2)
                                    ];
                                case 1:
                                    return _state.sent(), matchState.customData.contextId = contextId2, [
                                        4,
                                        this.nextAsync$(matchState)
                                    ];
                                case 2:
                                    return _state.sent(), [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "checkSameContext$",
                value: function checkSameContext$(contextId2) {
                    var isSoloContext = "SOLO" === contextId2, currentContextId = GameSDK.context.getID();
                    if (currentContextId === contextId2 || isSoloContext && null === currentContextId) throw new SameContext_default();
                }
            },
            {
                key: "checkValidContext$",
                value: function checkValidContext$(contextId2) {
                    var currentContextId = GameSDK.context.getID(), isExistContextId = null !== currentContextId || "" !== currentContextId;
                    if ("SOLO" === contextId2 && isExistContextId) throw new ContextNotValid_default();
                }
            },
            {
                key: "switchAsync$",
                value: function switchAsync$(contextId2) {
                    return _async_to_generator(function() {
                        var isSoloContext, error;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    isSoloContext = "SOLO" === contextId2, _state.label = 1;
                                case 1:
                                    return _state.trys.push([
                                        1,
                                        3,
                                        ,
                                        4
                                    ]), this.checkSameContext$(contextId2), this.checkValidContext$(contextId2), [
                                        4,
                                        GameSDK.context.switchAsync(contextId2, isSoloContext)
                                    ];
                                case 2:
                                    return _state.sent(), [
                                        3,
                                        4
                                    ];
                                case 3:
                                    if (_instanceof(error = _state.sent(), SameContext_default) || _instanceof(error, ContextNotValid_default)) return [
                                        2
                                    ];
                                    if (!Utils3.Object.hasOwn(error, "code")) throw error;
                                    if (Utils3.Device.isAndroid() && isSoloContext && "INVALID_PARAM" === error.code) return [
                                        2
                                    ];
                                    if ("SAME_CONTEXT" !== error.code) throw error;
                                    return [
                                        3,
                                        4
                                    ];
                                case 4:
                                    return [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            }
        ]), _SwitchContextHandler;
    }(BaseHandler_default);
    __name(_SwitchContextHandler, "SwitchContextHandler");
    var SwitchContextHandler = _SwitchContextHandler, SwitchContextHandler_default = SwitchContextHandler;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var Dtos5 = Ludex.Dtos, _Ludex_Utils24 = Ludex.Utils, O14 = _Ludex_Utils24.Object, _ContinueMatchHandler = function(BaseHandler_default) {
        function _ContinueMatchHandler() {
            return _class_call_check(this, _ContinueMatchHandler), _call_super(this, _ContinueMatchHandler, arguments);
        }
        return _inherits(_ContinueMatchHandler, BaseHandler_default), _create_class(_ContinueMatchHandler, [
            {
                key: "processAsync",
                value: function processAsync(matchState) {
                    var _this = this, _this1 = this, _superprop_get_processAsync = function _superprop_get_processAsync() {
                        return _get(_get_prototype_of(_ContinueMatchHandler.prototype), "processAsync", _this);
                    };
                    return _async_to_generator(function() {
                        var respMatchData, respMatchDataValidated;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    return _superprop_get_processAsync().call(_this1, matchState), this.validateMatchData$(matchState), [
                                        4,
                                        this.getMatchAsync$(matchState)
                                    ];
                                case 1:
                                    return respMatchData = _state.sent(), respMatchDataValidated = new Dtos5.Match.Data(respMatchData).toObject(), this.validateContinueMatchData$(matchState, respMatchDataValidated), this.updateMatchData$(matchState, respMatchDataValidated), this.validatePlayerTurn$(matchState), [
                                        4,
                                        this.nextAsync$(matchState)
                                    ];
                                case 2:
                                    return _state.sent(), [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "validateMatchData$",
                value: function validateMatchData$(matchState) {
                    var id = matchState.id, status = matchState.status;
                    if ("string" != typeof id) throw new MatchIdNotValid_default();
                    if (status !== MatchStatus_default.OPEN) throw new MatchAreNotOpen_default();
                }
            },
            {
                key: "validateContinueMatchData$",
                value: function validateContinueMatchData$(matchState, matchData) {
                    var id = matchState.id, customData = matchState.customData, _id = matchData._id, whitePlayerId = matchData.whitePlayerId, blackPlayerId = matchData.blackPlayerId;
                    if ("string" != typeof _id || _id !== id) throw console.warn("\uD83E\uDD16 ? respMatchDataValidated", matchData), new GetMatchDetailFailed_default();
                    var playerId2 = customData.playerId, isPlayerWhite = whitePlayerId === playerId2, isPlayerBlack = blackPlayerId === playerId2;
                    if (!isPlayerWhite && blackPlayerId === SampleOpponent_default.playerId) throw new PlayerNotJoinInMatch_default();
                    if (!isPlayerWhite && !isPlayerBlack) throw new PlayerNotCurrentInMatch_default();
                }
            },
            {
                key: "validatePlayerTurn$",
                value: function validatePlayerTurn$(matchState) {
                    var profiles = matchState.profiles, playerId2 = matchState.customData.playerId;
                    if ("string" != typeof playerId2) throw new PlayerIdNotValid_default();
                    if (profiles[playerId2].finished) throw new PlayerHasFinishedMatch_default();
                }
            },
            {
                key: "getMatchAsync$",
                value: function getMatchAsync$(matchState) {
                    return _async_to_generator(function() {
                        var id;
                        return _ts_generator(this, function(_state) {
                            return (id = matchState.id) ? [
                                2,
                                this.match$.api.getMatchAPI().getMatchDetailByIdAsync(id)
                            ] : [
                                2,
                                {}
                            ];
                        });
                    }).call(this);
                }
            },
            {
                key: "updateMatchData$",
                value: function updateMatchData$(matchState, matchData) {
                    this.updateMatchGeneral$(matchState, matchData), this.updatePlayerIds$(matchState, matchData), this.initializeProfiles$(matchState), this.updateScoresAndStatus$(matchState, matchData);
                }
            },
            {
                key: "updateMatchGeneral$",
                value: function updateMatchGeneral$(matchState, matchData) {
                    var extraData = matchData.extraData;
                    matchState.customData = O14.merge(matchState.customData, extraData);
                }
            },
            {
                key: "updatePlayerIds$",
                value: function updatePlayerIds$(matchState, matchData) {
                    var whitePlayerId = matchData.whitePlayerId, blackPlayerId = matchData.blackPlayerId, isPlayerWhite = whitePlayerId === matchState.customData.playerId;
                    matchState.customData.playerId = isPlayerWhite ? whitePlayerId : blackPlayerId, matchState.customData.opponentId = isPlayerWhite ? blackPlayerId : whitePlayerId;
                }
            },
            {
                key: "initializeProfiles$",
                value: function initializeProfiles$(matchState) {
                    var _matchState_customData = matchState.customData, playerId2 = _matchState_customData.playerId, opponentId = _matchState_customData.opponentId;
                    if (playerId2 && opponentId) {
                        var defaultProfile = {
                            name: "",
                            photo: "",
                            finished: !1
                        };
                        matchState.profiles[playerId2] || (matchState.profiles[playerId2] = __spreadValues({
                            id: playerId2
                        }, defaultProfile)), matchState.profiles[opponentId] || (matchState.profiles[opponentId] = __spreadValues({
                            id: opponentId
                        }, defaultProfile));
                    }
                }
            },
            {
                key: "updateScoresAndStatus$",
                value: function updateScoresAndStatus$(matchState, matchData) {
                    var _matchState_customData = matchState.customData, playerId2 = _matchState_customData.playerId, opponentId = _matchState_customData.opponentId;
                    if (playerId2 && opponentId) {
                        var whitePlayerId = matchData.whitePlayerId, whitePlayerScore = matchData.whitePlayerScore, whitePlayerFinish = matchData.whitePlayerFinish, blackPlayerScore = matchData.blackPlayerScore, blackPlayerFinish = matchData.blackPlayerFinish, isPlayerWhite = whitePlayerId === playerId2;
                        matchState.profiles[playerId2].score = isPlayerWhite ? whitePlayerScore : blackPlayerScore, matchState.profiles[opponentId].score = isPlayerWhite ? blackPlayerScore : whitePlayerScore, matchState.profiles[playerId2].finished = isPlayerWhite ? whitePlayerFinish : blackPlayerFinish, matchState.profiles[opponentId].finished = isPlayerWhite ? blackPlayerFinish : whitePlayerFinish;
                    }
                }
            }
        ]), _ContinueMatchHandler;
    }(BaseHandler_default);
    __name(_ContinueMatchHandler, "ContinueMatchHandler");
    var ContinueMatchHandler = _ContinueMatchHandler, ContinueMatchHandler_default = ContinueMatchHandler;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var _SendUpdateMessageHandler = function(BaseHandler_default) {
        function _SendUpdateMessageHandler(concrete, payload) {
            var _this;
            return _class_call_check(this, _SendUpdateMessageHandler), _define_property(_this = _call_super(this, _SendUpdateMessageHandler, [
                concrete
            ]), "payload$", void 0), _this.payload$ = payload, _this;
        }
        return _inherits(_SendUpdateMessageHandler, BaseHandler_default), _create_class(_SendUpdateMessageHandler, [
            {
                key: "processAsync",
                value: function processAsync(matchState) {
                    var _this = this, _this1 = this, _superprop_get_processAsync = function _superprop_get_processAsync() {
                        return _get(_get_prototype_of(_SendUpdateMessageHandler.prototype), "processAsync", _this);
                    };
                    return _async_to_generator(function() {
                        var imageResult;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    if (_superprop_get_processAsync().call(_this1, matchState), !this.payload$.ignore) return [
                                        3,
                                        2
                                    ];
                                    return [
                                        4,
                                        this.nextAsync$(matchState)
                                    ];
                                case 1:
                                case 4:
                                    return _state.sent(), [
                                        2
                                    ];
                                case 2:
                                    return this.validateData$(matchState), [
                                        4,
                                        this.createWideframesCurrentScoreAsync$(matchState)
                                    ];
                                case 3:
                                    return (imageResult = _state.sent()) && this.sendMessageAsync$(matchState, imageResult), [
                                        4,
                                        this.nextAsync$(matchState)
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "validateData$",
                value: function validateData$(matchState) {
                    var id = matchState.id, customData = matchState.customData, contextId2 = customData.contextId, opponentId = customData.opponentId;
                    if (!id || "string" != typeof id) throw new MatchIdNotValid_default();
                    if (!contextId2 || "string" != typeof contextId2) throw new ContextIdNotValid_default();
                    if (!opponentId || "string" != typeof opponentId) throw new OpponentIdNotValid_default();
                }
            },
            {
                key: "createWideframesCurrentScoreAsync$",
                value: function createWideframesCurrentScoreAsync$(matchState) {
                    return _async_to_generator(function() {
                        var _this_codex$, player, frameCapture, _player_getPlayer, playerId2, playerPhoto, opponentId, opponentProfile, opponentPhoto;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    if (_state.trys.push([
                                        0,
                                        2,
                                        ,
                                        3
                                    ]), player = (_this_codex$ = this.codex$).player, frameCapture = _this_codex$.frameCapture, playerId2 = (_player_getPlayer = player.getPlayer()).playerId, playerPhoto = _player_getPlayer.photo, null == (opponentId = matchState.customData.opponentId) || !(opponentProfile = matchState.profiles[opponentId])) return [
                                        2,
                                        null
                                    ];
                                    return opponentPhoto = opponentProfile.photo, [
                                        4,
                                        frameCapture.renderAsync("update-challenge", {
                                            playerId: playerId2,
                                            playerPhoto: playerPhoto,
                                            opponentId: opponentId,
                                            opponentPhoto: opponentPhoto
                                        })
                                    ];
                                case 1:
                                    return [
                                        2,
                                        _state.sent()
                                    ];
                                case 2:
                                    return console.warn("createWideframesCurrentScoreAsync", _state.sent()), [
                                        2,
                                        null
                                    ];
                                case 3:
                                    return [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "sendMessageAsync$",
                value: function sendMessageAsync$(matchState, wideframes) {
                    return _async_to_generator(function() {
                        var id, profiles, customData, playerId2, opponentId, playerProfile, playerName, message;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    if (id = matchState.id, profiles = matchState.profiles, playerId2 = (customData = matchState.customData).playerId, opponentId = customData.opponentId, !playerId2 || "string" != typeof playerId2) throw new PlayerIdNotValid_default();
                                    if (!("updateAsync" in GameSDK.extra)) throw new UnavailableFeature_default("updateAsync");
                                    if (!(playerProfile = profiles[playerId2])) throw new ProfileNotFound_default();
                                    if (playerName = playerProfile.name, message = {
                                        data: {
                                            type: ContextTypes_default2.CHALLENGE_FRIEND,
                                            matchId: id,
                                            playerId: playerId2,
                                            opponentId: opponentId
                                        },
                                        action: "CUSTOM",
                                        template: "challenge",
                                        cta: {
                                            default: "Play",
                                            localizations: {
                                                vi_VN: "Ch\u01A1i ngay"
                                            }
                                        },
                                        text: {
                                            default: "".concat(playerName, " made an update."),
                                            localizations: {
                                                vi_VN: "".concat(playerName, " \xe3 cp nht trn u. Chi ngay!")
                                            }
                                        },
                                        image: wideframes,
                                        strategy: "LAST",
                                        notification: "PUSH"
                                    }, !("updateAsync" in GameSDK.extra)) throw new UnavailableFeature_default("updateAsync");
                                    return [
                                        4,
                                        GameSDK.extra.updateAsync(message)
                                    ];
                                case 1:
                                    return _state.sent(), [
                                        2
                                    ];
                            }
                        });
                    })();
                }
            }
        ]), _SendUpdateMessageHandler;
    }(BaseHandler_default);
    __name(_SendUpdateMessageHandler, "SendUpdateMessageHandler");
    var SendUpdateMessageHandler = _SendUpdateMessageHandler, SendUpdateMessageHandler_default = SendUpdateMessageHandler, _ContinueChallengeMatchConcrete = function(BaseConcrete_default) {
        function _ContinueChallengeMatchConcrete() {
            return _class_call_check(this, _ContinueChallengeMatchConcrete), _call_super(this, _ContinueChallengeMatchConcrete, arguments);
        }
        return _inherits(_ContinueChallengeMatchConcrete, BaseConcrete_default), _create_class(_ContinueChallengeMatchConcrete, [
            {
                key: "processAsync",
                value: function processAsync(payload) {
                    return _async_to_generator(function() {
                        var contextId2, matchId, playerId2, opponentId, _payload_sendUpdateMessage, sendUpdateMessage, flow, switchContext, prepareMatch, continueMatch, getMatchProfiles, startMatch, sendMessage, logStart, detectGameMode, matchState;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    return _state.trys.push([
                                        0,
                                        ,
                                        2,
                                        3
                                    ]), this.startLog$(payload), contextId2 = payload.contextId, matchId = payload.matchId, playerId2 = payload.playerId, opponentId = payload.opponentId, sendUpdateMessage = void 0 === (_payload_sendUpdateMessage = payload.sendUpdateMessage) || _payload_sendUpdateMessage, flow = new NothingHandler_default(this), switchContext = new SwitchContextHandler_default(this, {
                                        contextId: contextId2
                                    }), flow.setNext(switchContext), prepareMatch = new PrepareMatchHandler_default(this, {
                                        id: matchId,
                                        mode: MatchModes_default.CHALLENGE_FRIEND,
                                        customData: {
                                            playerId: playerId2,
                                            opponentId: opponentId
                                        }
                                    }), switchContext.setNext(prepareMatch), continueMatch = new ContinueMatchHandler_default(this), prepareMatch.setNext(continueMatch), getMatchProfiles = new GetMatchProfilesHandler_default(this), continueMatch.setNext(getMatchProfiles), startMatch = new StartMatchHandler_default(this), getMatchProfiles.setNext(startMatch), sendMessage = new SendUpdateMessageHandler_default(this, {
                                        ignore: !sendUpdateMessage
                                    }), startMatch.setNext(sendMessage), logStart = new LogMatchStartHandler_default(this), sendMessage.setNext(logStart), detectGameMode = new ContextGameModeHandler_default(this), logStart.setNext(detectGameMode), matchState = this.match.getMatchState(), [
                                        4,
                                        flow.processAsync(matchState)
                                    ];
                                case 1:
                                    return _state.sent(), [
                                        3,
                                        3
                                    ];
                                case 2:
                                    return this.endLog$(), [
                                        7
                                    ];
                                case 3:
                                    return [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            }
        ]), _ContinueChallengeMatchConcrete;
    }(BaseConcrete_default);
    __name(_ContinueChallengeMatchConcrete, "ContinueChallengeMatchConcrete");
    var ContinueChallengeMatchConcrete = _ContinueChallengeMatchConcrete, ContinueChallengeMatchConcrete_default = ContinueChallengeMatchConcrete;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var _Ludex_Plugins1 = Ludex.Plugins, tmp1 = _Ludex_Plugins1.Analytics, _ref1 = void 0 === tmp1 ? {} : tmp1, Events5 = _ref1.Events, _Ludex_Utils25 = Ludex.Utils, S5 = _Ludex_Utils25.String, V17 = _Ludex_Utils25.Valid, _LogMatchFinishedHandler = function(BaseHandler_default) {
        function _LogMatchFinishedHandler() {
            return _class_call_check(this, _LogMatchFinishedHandler), _call_super(this, _LogMatchFinishedHandler, arguments);
        }
        return _inherits(_LogMatchFinishedHandler, BaseHandler_default), _create_class(_LogMatchFinishedHandler, [
            {
                key: "processAsync",
                value: function processAsync(matchState) {
                    var _this = this, _this1 = this, _superprop_get_processAsync = function _superprop_get_processAsync() {
                        return _get(_get_prototype_of(_LogMatchFinishedHandler.prototype), "processAsync", _this);
                    };
                    return _async_to_generator(function() {
                        var customData, mode, startAt, finishAt, level2, seconds, analytics;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    return _superprop_get_processAsync().call(_this1, matchState), customData = matchState.customData, mode = matchState.mode, startAt = matchState.startAt, finishAt = matchState.finishAt, level2 = customData.level, this.validateMode$(mode), this.validateLevel$(level2), seconds = Math.floor((finishAt - startAt) / 1e3), analytics = this.codex$.analytics, Events5 && analytics.event(Events5.MATCH_END, {
                                        level: level2,
                                        game_mode: S5.toUpperCamelCase(mode),
                                        level_name: this.getLevelName$(level2),
                                        time_played: seconds
                                    }), [
                                        4,
                                        this.nextAsync$(matchState)
                                    ];
                                case 1:
                                    return _state.sent(), [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "validateMode$",
                value: function validateMode$(mode) {
                    if (!V17.isString(mode)) throw new MatchModeNotDefined_default();
                }
            },
            {
                key: "validateLevel$",
                value: function validateLevel$(level2) {
                    if (!V17.isNumber(level2)) throw new LevelNotDefined_default();
                }
            },
            {
                key: "getLevelName$",
                value: function getLevelName$(level2) {
                    return "Level ".concat(S5.padStart(level2.toString(), 5, "0"));
                }
            }
        ]), _LogMatchFinishedHandler;
    }(BaseHandler_default);
    __name(_LogMatchFinishedHandler, "LogMatchFinishedHandler");
    var LogMatchFinishedHandler = _LogMatchFinishedHandler, LogMatchFinishedHandler_default = LogMatchFinishedHandler;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var _LeaderboardNotExist = function(Error1) {
        function _LeaderboardNotExist(message) {
            var _this;
            return _class_call_check(this, _LeaderboardNotExist), (_this = _call_super(this, _LeaderboardNotExist, [
                message
            ])).name = "LeaderboardNotExist", _this.message = null != message ? message : "Leaderboard not exist in game", _this;
        }
        return _inherits(_LeaderboardNotExist, Error1), _LeaderboardNotExist;
    }(_wrap_native_super(Error));
    __name(_LeaderboardNotExist, "LeaderboardNotExist");
    var LeaderboardNotExist = _LeaderboardNotExist, LeaderboardNotExist_default = LeaderboardNotExist;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var _ScoreNotValid = function(Error1) {
        function _ScoreNotValid(message) {
            var _this;
            return _class_call_check(this, _ScoreNotValid), (_this = _call_super(this, _ScoreNotValid, [
                message
            ])).name = "ScoreNotValid", _this.message = null != message ? message : "Score is not valid", _this;
        }
        return _inherits(_ScoreNotValid, Error1), _ScoreNotValid;
    }(_wrap_native_super(Error));
    __name(_ScoreNotValid, "ScoreNotValid");
    var ScoreNotValid = _ScoreNotValid, ScoreNotValid_default = ScoreNotValid, _Ludex_Utils26 = Ludex.Utils, V18 = _Ludex_Utils26.Valid, _Ludex_Configs7 = Ludex.Configs, LeaderboardList = _Ludex_Configs7.Leaderboards.LeaderboardList, _PostGlobalLeaderboardsScoreHandler = function(BaseHandler_default) {
        function _PostGlobalLeaderboardsScoreHandler(concrete, payload) {
            var _this;
            return _class_call_check(this, _PostGlobalLeaderboardsScoreHandler), _define_property(_this = _call_super(this, _PostGlobalLeaderboardsScoreHandler, [
                concrete
            ]), "payload$", void 0), _define_property(_this, "skipPostScore$", void 0), _this.payload$ = {
                score: 0,
                playerId: ""
            }, _this.skipPostScore$ = !!(null == payload ? void 0 : payload.ignore), _this;
        }
        return _inherits(_PostGlobalLeaderboardsScoreHandler, BaseHandler_default), _create_class(_PostGlobalLeaderboardsScoreHandler, [
            {
                key: "processAsync",
                value: function processAsync(matchState) {
                    var _this = this, _this1 = this, _superprop_get_processAsync = function _superprop_get_processAsync() {
                        return _get(_get_prototype_of(_PostGlobalLeaderboardsScoreHandler.prototype), "processAsync", _this);
                    };
                    return _async_to_generator(function() {
                        var _iteratorNormalCompletion, _didIteratorError, _iteratorError, _iterator, _step, LeaderboardConfig, Id, Mode;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    if (_superprop_get_processAsync().call(_this1, matchState), !this.skipPostScore$) return [
                                        3,
                                        2
                                    ];
                                    return [
                                        4,
                                        this.nextAsync$(matchState)
                                    ];
                                case 1:
                                    return _state.sent(), [
                                        2
                                    ];
                                case 2:
                                    if (this.setupSetScorePayload$(matchState), !("submitGameResultsAsync" in GameSDK.extra)) return [
                                        3,
                                        4
                                    ];
                                    return [
                                        4,
                                        GameSDK.extra.submitGameResultsAsync(this.payload$.score)
                                    ];
                                case 3:
                                    _state.sent(), _state.label = 4;
                                case 4:
                                    _iteratorNormalCompletion = !0, _didIteratorError = !1, _iteratorError = void 0;
                                    try {
                                        for(_iterator = LeaderboardList[Symbol.iterator](); !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = !0)Id = (LeaderboardConfig = _step.value).Id, Mode = LeaderboardConfig.Mode, matchState.mode && this.isValidMode$(Mode, matchState.mode) && this.setLeaderboardScoreAsync$(__spreadValues({
                                            leaderboardId: Id
                                        }, this.payload$));
                                    } catch (err) {
                                        _didIteratorError = !0, _iteratorError = err;
                                    } finally{
                                        try {
                                            _iteratorNormalCompletion || null == _iterator.return || _iterator.return();
                                        } finally{
                                            if (_didIteratorError) throw _iteratorError;
                                        }
                                    }
                                    return [
                                        4,
                                        this.nextAsync$(matchState)
                                    ];
                                case 5:
                                    return _state.sent(), [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "isValidMode$",
                value: function isValidMode$(leaderboardMode, matchMode) {
                    return leaderboardMode === matchMode;
                }
            },
            {
                key: "setupSetScorePayload$",
                value: function setupSetScorePayload$(matchState) {
                    return _async_to_generator(function() {
                        var profiles, playerId2, score2;
                        return _ts_generator(this, function(_state) {
                            if (profiles = matchState.profiles, !(playerId2 = matchState.customData.playerId) || !profiles[playerId2]) throw new ProfileNotFound_default();
                            if (score2 = profiles[playerId2].score, !V18.isNumber(score2)) throw new ScoreNotValid_default();
                            return this.payload$ = {
                                score: score2,
                                playerId: playerId2
                            }, [
                                2
                            ];
                        });
                    }).call(this);
                }
            },
            {
                key: "setLeaderboardScoreAsync$",
                value: function setLeaderboardScoreAsync$(payload) {
                    return _async_to_generator(function() {
                        var playerId2, score2, leaderboardId, name2;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    if (_state.trys.push([
                                        0,
                                        2,
                                        ,
                                        3
                                    ]), playerId2 = payload.playerId, score2 = payload.score, leaderboardId = payload.leaderboardId, !(name2 = this.codex$.leaderboard.getLeaderboardName(leaderboardId))) throw new LeaderboardNotExist_default();
                                    return [
                                        4,
                                        this.codex$.leaderboard.setLeaderboardScoreAsync(name2, playerId2, score2)
                                    ];
                                case 1:
                                    return _state.sent(), [
                                        3,
                                        3
                                    ];
                                case 2:
                                    return console.warn("setLeaderboardScoreAsync", _state.sent()), [
                                        3,
                                        3
                                    ];
                                case 3:
                                    return [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            }
        ]), _PostGlobalLeaderboardsScoreHandler;
    }(BaseHandler_default);
    __name(_PostGlobalLeaderboardsScoreHandler, "PostGlobalLeaderboardsScoreHandler");
    var PostGlobalLeaderboardsScoreHandler = _PostGlobalLeaderboardsScoreHandler, PostGlobalLeaderboardsScoreHandler_default = PostGlobalLeaderboardsScoreHandler;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var Dtos6 = Ludex.Dtos, Utils4 = Ludex.Utils, V19 = Utils4.Valid, O15 = Utils4.Object, _FinishMatchHandler = function(BaseHandler_default) {
        function _FinishMatchHandler(concrete, payload) {
            var _this;
            return _class_call_check(this, _FinishMatchHandler), _define_property(_this = _call_super(this, _FinishMatchHandler, [
                concrete
            ]), "payload$", void 0), _this.payload$ = payload, _this;
        }
        return _inherits(_FinishMatchHandler, BaseHandler_default), _create_class(_FinishMatchHandler, [
            {
                key: "processAsync",
                value: function processAsync(matchState) {
                    var _this = this, _this1 = this, _superprop_get_processAsync = function _superprop_get_processAsync() {
                        return _get(_get_prototype_of(_FinishMatchHandler.prototype), "processAsync", _this);
                    };
                    return _async_to_generator(function() {
                        var respMatchData, respMatchDataValidated;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    if (_superprop_get_processAsync().call(_this1, matchState), this.validateMatchData$(matchState), !this.payload$.useAPI) return [
                                        3,
                                        2
                                    ];
                                    return [
                                        4,
                                        this.finishMatchAsync$(matchState)
                                    ];
                                case 1:
                                    return respMatchData = _state.sent(), respMatchDataValidated = new Dtos6.Match.Data(respMatchData).toObject(), this.updateMatchFromAPI$(matchState, respMatchDataValidated), [
                                        3,
                                        3
                                    ];
                                case 2:
                                    this.updateMatchData$(matchState), _state.label = 3;
                                case 3:
                                    return this.updateMatchState$(matchState), [
                                        4,
                                        this.nextAsync$(matchState)
                                    ];
                                case 4:
                                    return _state.sent(), [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "validateMatchData$",
                value: function validateMatchData$(matchState) {
                    var status = matchState.status, profiles = matchState.profiles, customData = matchState.customData;
                    if (status !== MatchStatus_default.ACTIVE) throw new MatchAreNotActive_default();
                    var playerId2 = customData.playerId;
                    if (!playerId2 || !O15.hasOwn(profiles, playerId2)) throw new PlayerNotCurrentInMatch_default();
                }
            },
            {
                key: "updateMatchData$",
                value: function updateMatchData$(matchState) {
                    var playerId2 = matchState.customData.playerId;
                    if (!V19.isString(playerId2)) throw new PlayerIdNotValid_default();
                    matchState.profiles[playerId2].finished = !0;
                }
            },
            {
                key: "updateMatchState$",
                value: function updateMatchState$(matchState) {
                    matchState.status = MatchStatus_default.FINISHED, matchState.finishAt = Date.now();
                }
            },
            {
                key: "finishMatchAsync$",
                value: function finishMatchAsync$(matchState) {
                    return _async_to_generator(function() {
                        var id, profiles, customData, level2, playerId2, payload;
                        return _ts_generator(this, function(_state) {
                            if (id = matchState.id, profiles = matchState.profiles, level2 = (customData = matchState.customData).level, playerId2 = customData.playerId, !V19.isString(playerId2)) throw new PlayerIdNotValid_default();
                            return payload = {
                                matchId: null != id ? id : "",
                                score: profiles[playerId2].score,
                                level: level2,
                                extraData: this.payload$.extraData
                            }, [
                                2,
                                this.match$.api.getMatchAPI().finishMatchAsync(payload)
                            ];
                        });
                    }).call(this);
                }
            },
            {
                key: "updateMatchFromAPI$",
                value: function updateMatchFromAPI$(matchState, matchData) {
                    var _matchState_customData = matchState.customData, playerId2 = _matchState_customData.playerId, opponentId = _matchState_customData.opponentId;
                    if (!V19.isString(playerId2)) throw new PlayerIdNotValid_default();
                    if (!V19.isString(opponentId)) throw new OpponentIdNotValid_default();
                    var whitePlayerId = matchData.whitePlayerId, whitePlayerScore = matchData.whitePlayerScore, blackPlayerScore = matchData.blackPlayerScore, whitePlayerFinish = matchData.whitePlayerFinish, blackPlayerFinish = matchData.blackPlayerFinish, isPlayerWhite = playerId2 === whitePlayerId, playerScore = isPlayerWhite ? whitePlayerScore : blackPlayerScore, opponentScore = isPlayerWhite ? blackPlayerScore : whitePlayerScore, playerFinish = isPlayerWhite ? whitePlayerFinish : blackPlayerFinish, opponentFinish = isPlayerWhite ? blackPlayerFinish : whitePlayerFinish;
                    matchState.profiles[playerId2].score = playerScore, matchState.profiles[opponentId].score = opponentScore, matchState.profiles[playerId2].finished = playerFinish, matchState.profiles[opponentId].finished = opponentFinish;
                }
            }
        ]), _FinishMatchHandler;
    }(BaseHandler_default);
    __name(_FinishMatchHandler, "FinishMatchHandler");
    var FinishMatchHandler = _FinishMatchHandler, FinishMatchHandler_default = FinishMatchHandler;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var _SendFinishedMessageHandler = function(BaseHandler_default) {
        function _SendFinishedMessageHandler() {
            return _class_call_check(this, _SendFinishedMessageHandler), _call_super(this, _SendFinishedMessageHandler, arguments);
        }
        return _inherits(_SendFinishedMessageHandler, BaseHandler_default), _create_class(_SendFinishedMessageHandler, [
            {
                key: "processAsync",
                value: function processAsync(matchState) {
                    var _this = this, _this1 = this, _superprop_get_processAsync = function _superprop_get_processAsync() {
                        return _get(_get_prototype_of(_SendFinishedMessageHandler.prototype), "processAsync", _this);
                    };
                    return _async_to_generator(function() {
                        var imageResult;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    return _superprop_get_processAsync().call(_this1, matchState), this.validateData$(matchState), [
                                        4,
                                        this.createWideframesResultAsync$(matchState)
                                    ];
                                case 1:
                                    return (imageResult = _state.sent()) && this.progressSendFinishedMessage$(matchState, imageResult), [
                                        4,
                                        this.nextAsync$(matchState)
                                    ];
                                case 2:
                                    return _state.sent(), [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "validateData$",
                value: function validateData$(matchState) {
                    var id = matchState.id, customData = matchState.customData, contextId2 = customData.contextId, opponentId = customData.opponentId;
                    if (!id || "string" != typeof id) throw new MatchIdNotValid_default();
                    if (!contextId2 || "string" != typeof contextId2) throw new ContextIdNotValid_default();
                    if (!opponentId || "string" != typeof opponentId) throw new OpponentIdNotValid_default();
                }
            },
            {
                key: "createWideframesResultAsync$",
                value: function createWideframesResultAsync$(matchState) {
                    return _async_to_generator(function() {
                        var frameCapture, profiles, customData, playerId2, opponentId, playerProfile, opponentProfile, playerPhoto, tmp, playerScore, playerFinished, opponentPhoto, tmp1, opponentScore, opponentFinished;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    if (_state.trys.push([
                                        0,
                                        2,
                                        ,
                                        3
                                    ]), frameCapture = this.codex$.frameCapture, profiles = matchState.profiles, playerId2 = (customData = matchState.customData).playerId, opponentId = customData.opponentId, !playerId2 || !opponentId || (playerProfile = profiles[playerId2], opponentProfile = profiles[opponentId], !playerProfile || !opponentProfile)) return [
                                        2,
                                        null
                                    ];
                                    return playerPhoto = playerProfile.photo, playerScore = void 0 === (tmp = playerProfile.score) ? 0 : tmp, playerFinished = playerProfile.finished, opponentPhoto = opponentProfile.photo, opponentScore = void 0 === (tmp1 = opponentProfile.score) ? 0 : tmp1, opponentFinished = opponentProfile.finished, [
                                        4,
                                        frameCapture.renderAsync("result-challenge", {
                                            playerId: playerId2,
                                            playerPhoto: playerPhoto,
                                            playerScore: playerScore,
                                            opponentId: opponentId,
                                            opponentPhoto: opponentPhoto,
                                            opponentScore: opponentScore,
                                            isPlayerFinished: !!playerFinished,
                                            isOpponentFinished: !!opponentFinished
                                        })
                                    ];
                                case 1:
                                    return [
                                        2,
                                        _state.sent()
                                    ];
                                case 2:
                                    return console.warn("createWideframesResultAsync", _state.sent()), [
                                        2,
                                        null
                                    ];
                                case 3:
                                    return [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "progressSendFinishedMessage$",
                value: function progressSendFinishedMessage$(matchState, wideframes) {
                    var profiles = matchState.profiles, customData = matchState.customData, playerId2 = customData.playerId, opponentId = customData.opponentId;
                    if (!playerId2 || "string" != typeof playerId2) throw new PlayerIdNotValid_default();
                    if (!opponentId || "string" != typeof opponentId) throw new OpponentIdNotValid_default();
                    if (!profiles[playerId2] || !profiles[opponentId]) throw new ProfileNotFound_default();
                    var _profiles_playerId2 = profiles[playerId2], tmp = _profiles_playerId2.score, playerScore = void 0 === tmp ? 0 : tmp, playerFinished = _profiles_playerId2.finished, _profiles_opponentId = profiles[opponentId], tmp1 = _profiles_opponentId.score, opponentScore = void 0 === tmp1 ? 0 : tmp1, opponentFinished = _profiles_opponentId.finished;
                    playerFinished ? this.sendFinishMessageAsync$(matchState, wideframes) : opponentFinished && playerScore > opponentScore ? this.sendBestScoreMessageAsync$(matchState, wideframes) : this.sendPlayTurnMessageAsync$(matchState, wideframes);
                }
            },
            {
                key: "sendFinishMessageAsync$",
                value: function sendFinishMessageAsync$(matchState, wideframes) {
                    return _async_to_generator(function() {
                        var id, profiles, customData, playerId2, opponentId, playerProfile, playerName, message;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    if (id = matchState.id, profiles = matchState.profiles, playerId2 = (customData = matchState.customData).playerId, opponentId = customData.opponentId, !playerId2 || "string" != typeof playerId2) throw new PlayerIdNotValid_default();
                                    if (!("updateAsync" in GameSDK.extra)) throw new UnavailableFeature_default("updateAsync");
                                    if (!(playerProfile = profiles[playerId2])) throw new ProfileNotFound_default();
                                    if (playerName = playerProfile.name, message = {
                                        data: {
                                            type: ContextTypes_default2.CHALLENGE_FRIEND,
                                            matchId: id,
                                            playerId: playerId2,
                                            opponentId: opponentId,
                                            status: MatchStatus_default.FINISHED
                                        },
                                        action: "CUSTOM",
                                        template: "finished",
                                        cta: {
                                            default: "See result",
                                            localizations: {
                                                vi_VN: "Xem k\u1EBFt qu\u1EA3"
                                            }
                                        },
                                        text: {
                                            default: "".concat(playerName, " just finished. Check them now."),
                                            localizations: {
                                                vi_VN: "".concat(playerName, " va ho\xe0n th\xe0nh m\xe0n chi. Nhn  xem kt qu trn u.")
                                            }
                                        },
                                        image: wideframes,
                                        strategy: "IMMEDIATE",
                                        notification: "PUSH"
                                    }, !("updateAsync" in GameSDK.extra)) throw new UnavailableFeature_default("updateAsync");
                                    return [
                                        4,
                                        GameSDK.extra.updateAsync(message)
                                    ];
                                case 1:
                                    return _state.sent(), [
                                        2
                                    ];
                            }
                        });
                    })();
                }
            },
            {
                key: "sendPlayTurnMessageAsync$",
                value: function sendPlayTurnMessageAsync$(matchState, wideframes) {
                    return _async_to_generator(function() {
                        var id, profiles, customData, playerId2, opponentId, playerProfile, playerName, playerScore, message;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    if (id = matchState.id, profiles = matchState.profiles, playerId2 = (customData = matchState.customData).playerId, opponentId = customData.opponentId, !playerId2 || "string" != typeof playerId2) throw new PlayerIdNotValid_default();
                                    if (!(playerProfile = profiles[playerId2])) throw new ProfileNotFound_default();
                                    if (playerName = playerProfile.name, playerScore = playerProfile.score, message = {
                                        data: {
                                            type: ContextTypes_default2.CHALLENGE_FRIEND,
                                            matchId: id,
                                            playerId: playerId2,
                                            opponentId: opponentId,
                                            status: MatchStatus_default.ACTIVE
                                        },
                                        action: "CUSTOM",
                                        template: "finished",
                                        cta: {
                                            default: "Play",
                                            localizations: {
                                                vi_VN: "Ch\u01A1i ngay"
                                            }
                                        },
                                        text: {
                                            default: "".concat(playerName, " got ").concat(playerScore, " scores. So easy! Can you?"),
                                            localizations: {
                                                vi_VN: "".concat(playerName, " \xe3 t ").concat(playerScore, " im! Nhn Chi  so t\xe0i!")
                                            }
                                        },
                                        image: wideframes,
                                        strategy: "IMMEDIATE",
                                        notification: "PUSH"
                                    }, !("updateAsync" in GameSDK.extra)) throw new UnavailableFeature_default("updateAsync");
                                    return [
                                        4,
                                        GameSDK.extra.updateAsync(message)
                                    ];
                                case 1:
                                    return _state.sent(), [
                                        2
                                    ];
                            }
                        });
                    })();
                }
            },
            {
                key: "sendBestScoreMessageAsync$",
                value: function sendBestScoreMessageAsync$(matchState, wideframes) {
                    return _async_to_generator(function() {
                        var id, profiles, customData, playerId2, opponentId, playerProfile, playerName, playerScore, message;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    if (id = matchState.id, profiles = matchState.profiles, playerId2 = (customData = matchState.customData).playerId, opponentId = customData.opponentId, !playerId2 || "string" != typeof playerId2) throw new PlayerIdNotValid_default();
                                    if (!(playerProfile = profiles[playerId2])) throw new ProfileNotFound_default();
                                    if (playerName = playerProfile.name, playerScore = playerProfile.score, message = {
                                        data: {
                                            type: ContextTypes_default2.CHALLENGE_FRIEND,
                                            matchId: id,
                                            playerId: playerId2,
                                            opponentId: opponentId,
                                            status: MatchStatus_default.FINISHED
                                        },
                                        action: "CUSTOM",
                                        template: "pass_score",
                                        cta: {
                                            default: "See result",
                                            localizations: {
                                                vi_VN: "Xem k\u1EBFt qu\u1EA3"
                                            }
                                        },
                                        text: {
                                            default: "".concat(playerName, " beat your high score. Their score: ").concat(playerScore),
                                            localizations: {
                                                vi_VN: "".concat(playerName, " \xe3 vt qua im s ca bn, vi ").concat(playerScore, " im!")
                                            }
                                        },
                                        image: wideframes,
                                        strategy: "IMMEDIATE",
                                        notification: "PUSH"
                                    }, !("updateAsync" in GameSDK.extra)) throw new UnavailableFeature_default("updateAsync");
                                    return [
                                        4,
                                        GameSDK.extra.updateAsync(message)
                                    ];
                                case 1:
                                    return _state.sent(), [
                                        2
                                    ];
                            }
                        });
                    })();
                }
            }
        ]), _SendFinishedMessageHandler;
    }(BaseHandler_default);
    __name(_SendFinishedMessageHandler, "SendFinishedMessageHandler");
    var SendFinishedMessageHandler = _SendFinishedMessageHandler, SendFinishedMessageHandler_default = SendFinishedMessageHandler;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var _SetPlayerBestScoreHandler = function(BaseHandler_default) {
        function _SetPlayerBestScoreHandler(concrete, payload) {
            var _this;
            return _class_call_check(this, _SetPlayerBestScoreHandler), _define_property(_this = _call_super(this, _SetPlayerBestScoreHandler, [
                concrete
            ]), "ignore$", void 0), _this.ignore$ = !!(null == payload ? void 0 : payload.ignore), _this;
        }
        return _inherits(_SetPlayerBestScoreHandler, BaseHandler_default), _create_class(_SetPlayerBestScoreHandler, [
            {
                key: "processAsync",
                value: function processAsync(matchState) {
                    var _this = this, _this1 = this, _superprop_get_processAsync = function _superprop_get_processAsync() {
                        return _get(_get_prototype_of(_SetPlayerBestScoreHandler.prototype), "processAsync", _this);
                    };
                    return _async_to_generator(function() {
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    return _superprop_get_processAsync().call(_this1, matchState), this.setPlayerBestScore$(matchState), [
                                        4,
                                        this.nextAsync$(matchState)
                                    ];
                                case 1:
                                    return _state.sent(), [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "setPlayerBestScore$",
                value: function setPlayerBestScore$(matchState) {
                    if (!this.ignore$) {
                        var profiles = matchState.profiles, playerId2 = matchState.customData.playerId;
                        if (!playerId2 || !profiles[playerId2]) throw new ProfileNotFound_default();
                        var player = this.codex$.player, bestScore = player.getBestScore() || 0, tmp = profiles[playerId2].score, score2 = void 0 === tmp ? 0 : tmp;
                        score2 <= bestScore || (player.setBestScore(score2), profiles[playerId2].bestScore = score2);
                    }
                }
            }
        ]), _SetPlayerBestScoreHandler;
    }(BaseHandler_default);
    __name(_SetPlayerBestScoreHandler, "SetPlayerBestScoreHandler");
    var SetPlayerBestScoreHandler = _SetPlayerBestScoreHandler, SetPlayerBestScoreHandler_default = SetPlayerBestScoreHandler, _FinishChallengeMatchConcrete = function(BaseConcrete_default) {
        function _FinishChallengeMatchConcrete() {
            return _class_call_check(this, _FinishChallengeMatchConcrete), _call_super(this, _FinishChallengeMatchConcrete, arguments);
        }
        return _inherits(_FinishChallengeMatchConcrete, BaseConcrete_default), _create_class(_FinishChallengeMatchConcrete, [
            {
                key: "processAsync",
                value: function processAsync(payload) {
                    return _async_to_generator(function() {
                        var extraData, flow, finishMatch, sendMessage, logFinish, setPlayerBestScore, postLeaderboardsScore, detectGameMode, matchState;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    return _state.trys.push([
                                        0,
                                        ,
                                        2,
                                        3
                                    ]), this.startLog$(payload), extraData = (null != payload ? payload : {}).extraData, flow = new NothingHandler_default(this), finishMatch = new FinishMatchHandler_default(this, {
                                        useAPI: !0,
                                        extraData: extraData
                                    }), flow.setNext(finishMatch), sendMessage = new SendFinishedMessageHandler_default(this), finishMatch.setNext(sendMessage), logFinish = new LogMatchFinishedHandler_default(this), sendMessage.setNext(logFinish), setPlayerBestScore = new SetPlayerBestScoreHandler_default(this), logFinish.setNext(setPlayerBestScore), postLeaderboardsScore = new PostGlobalLeaderboardsScoreHandler_default(this), setPlayerBestScore.setNext(postLeaderboardsScore), detectGameMode = new ContextGameModeHandler_default(this), postLeaderboardsScore.setNext(detectGameMode), matchState = this.match.getMatchState(), [
                                        4,
                                        flow.processAsync(matchState)
                                    ];
                                case 1:
                                    return _state.sent(), [
                                        3,
                                        3
                                    ];
                                case 2:
                                    return this.endLog$(), [
                                        7
                                    ];
                                case 3:
                                    return [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            }
        ]), _FinishChallengeMatchConcrete;
    }(BaseConcrete_default);
    __name(_FinishChallengeMatchConcrete, "FinishChallengeMatchConcrete");
    var FinishChallengeMatchConcrete = _FinishChallengeMatchConcrete, FinishChallengeMatchConcrete_default = FinishChallengeMatchConcrete;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var _ContextAreSolo = function(Error1) {
        function _ContextAreSolo(message) {
            var _this;
            return _class_call_check(this, _ContextAreSolo), (_this = _call_super(this, _ContextAreSolo, [
                message
            ])).name = "ContextAreSolo", _this.message = null != message ? message : "Context are solo", _this;
        }
        return _inherits(_ContextAreSolo, Error1), _ContextAreSolo;
    }(_wrap_native_super(Error));
    __name(_ContextAreSolo, "ContextAreSolo");
    var ContextAreSolo = _ContextAreSolo, ContextAreSolo_default = ContextAreSolo;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var _ContextNotChallenge = function(Error1) {
        function _ContextNotChallenge(message) {
            var _this;
            return _class_call_check(this, _ContextNotChallenge), (_this = _call_super(this, _ContextNotChallenge, [
                message
            ])).name = "ContextNotChallenge", _this.message = null != message ? message : "Context is not a challenge", _this;
        }
        return _inherits(_ContextNotChallenge, Error1), _ContextNotChallenge;
    }(_wrap_native_super(Error));
    __name(_ContextNotChallenge, "ContextNotChallenge");
    var ContextNotChallenge = _ContextNotChallenge, ContextNotChallenge_default = ContextNotChallenge;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var _NetworkFailure = function(Error1) {
        function _NetworkFailure(message) {
            var _this;
            return _class_call_check(this, _NetworkFailure), (_this = _call_super(this, _NetworkFailure, [
                message
            ])).name = "NetworkFailure", _this.message = null != message ? message : "Network failure", _this;
        }
        return _inherits(_NetworkFailure, Error1), _NetworkFailure;
    }(_wrap_native_super(Error));
    __name(_NetworkFailure, "NetworkFailure");
    var NetworkFailure = _NetworkFailure, NetworkFailure_default = NetworkFailure, Utils5 = Ludex.Utils, Dtos7 = Ludex.Dtos, A6 = Utils5.Array, O16 = Utils5.Object, _GetOpponentChallengeContextHandler = function(BaseHandler_default) {
        function _GetOpponentChallengeContextHandler(concrete, payload) {
            var _this;
            return _class_call_check(this, _GetOpponentChallengeContextHandler), _define_property(_this = _call_super(this, _GetOpponentChallengeContextHandler, [
                concrete
            ]), "payload$", void 0), _this.payload$ = payload, _this;
        }
        return _inherits(_GetOpponentChallengeContextHandler, BaseHandler_default), _create_class(_GetOpponentChallengeContextHandler, [
            {
                key: "processAsync",
                value: function processAsync(matchState) {
                    var _this = this, _this1 = this, _superprop_get_processAsync = function _superprop_get_processAsync() {
                        return _get(_get_prototype_of(_GetOpponentChallengeContextHandler.prototype), "processAsync", _this);
                    };
                    return _async_to_generator(function() {
                        var opponentId;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    return _superprop_get_processAsync().call(_this1, matchState), this.checkCurrentContext$(), [
                                        4,
                                        this.getOpponentIdFromContextAsync$()
                                    ];
                                case 1:
                                    return opponentId = _state.sent(), matchState.customData.opponentId = opponentId, [
                                        4,
                                        this.nextAsync$(matchState)
                                    ];
                                case 2:
                                    return _state.sent(), [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "checkCurrentContext$",
                value: function checkCurrentContext$() {
                    var contextId2 = GameSDK.context.getID();
                    if ("string" != typeof contextId2) throw new ContextIdNotValid_default();
                    if ("SOLO" === contextId2) throw new ContextAreSolo_default();
                }
            },
            {
                key: "getOpponentIdFromContextAsync$",
                value: function getOpponentIdFromContextAsync$() {
                    return _async_to_generator(function() {
                        var ignoreId, players, opponent;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    return ignoreId = this.payload$.ignoreId, [
                                        4,
                                        this.getContextPlayers$([
                                            ignoreId
                                        ])
                                    ];
                                case 1:
                                    if ((players = _state.sent()).length > 1) throw new ContextNotChallenge_default();
                                    return opponent = SampleOpponent_default, 1 === players.length && (opponent = players[0]), [
                                        2,
                                        opponent.playerId
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "getContextPlayers$",
                value: function getContextPlayers$(ignorePlayers) {
                    return _async_to_generator(function() {
                        var playersData, players, _iteratorNormalCompletion, _didIteratorError, _iteratorError, _iterator, _step, player, playerId2, name2, photo2, error;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    return _state.trys.push([
                                        0,
                                        2,
                                        ,
                                        3
                                    ]), [
                                        4,
                                        GameSDK.context.getPlayersAsync()
                                    ];
                                case 1:
                                    playersData = _state.sent(), players = [], _iteratorNormalCompletion = !0, _didIteratorError = !1, _iteratorError = void 0;
                                    try {
                                        for(_iterator = playersData[Symbol.iterator](); !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = !0)playerId2 = (player = _step.value).getID(), !(ignorePlayers.indexOf(playerId2) > -1) && (name2 = player.getName()) && (photo2 = player.getPhoto(), players.push(new Dtos7.Player.Info({
                                            playerId: playerId2,
                                            name: name2,
                                            photo: photo2
                                        }).toObject()));
                                    } catch (err) {
                                        _didIteratorError = !0, _iteratorError = err;
                                    } finally{
                                        try {
                                            _iteratorNormalCompletion || null == _iterator.return || _iterator.return();
                                        } finally{
                                            if (_didIteratorError) throw _iteratorError;
                                        }
                                    }
                                    return [
                                        2,
                                        A6.unique(players)
                                    ];
                                case 2:
                                    if (error = _state.sent(), O16.hasOwn(error, "code") && "NETWORK_FAILURE" === error.code) throw new NetworkFailure_default();
                                    return [
                                        2,
                                        []
                                    ];
                                case 3:
                                    return [
                                        2
                                    ];
                            }
                        });
                    })();
                }
            }
        ]), _GetOpponentChallengeContextHandler;
    }(BaseHandler_default);
    __name(_GetOpponentChallengeContextHandler, "GetOpponentChallengeContextHandler");
    var GetOpponentChallengeContextHandler = _GetOpponentChallengeContextHandler, GetOpponentChallengeContextHandler_default = GetOpponentChallengeContextHandler;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var _ContextIsTournament = function(Error1) {
        function _ContextIsTournament(message) {
            var _this;
            return _class_call_check(this, _ContextIsTournament), (_this = _call_super(this, _ContextIsTournament, [
                message
            ])).name = "ContextIsTournament", _this.message = null != message ? message : "Context is a tournament", _this;
        }
        return _inherits(_ContextIsTournament, Error1), _ContextIsTournament;
    }(_wrap_native_super(Error));
    __name(_ContextIsTournament, "ContextIsTournament");
    var ContextIsTournament = _ContextIsTournament, ContextIsTournament_default = ContextIsTournament, _Ludex_Utils27 = Ludex.Utils, O17 = _Ludex_Utils27.Object, _ChooseContextHandler = function(BaseHandler_default) {
        function _ChooseContextHandler() {
            return _class_call_check(this, _ChooseContextHandler), _call_super(this, _ChooseContextHandler, arguments);
        }
        return _inherits(_ChooseContextHandler, BaseHandler_default), _create_class(_ChooseContextHandler, [
            {
                key: "processAsync",
                value: function processAsync(matchState) {
                    var _this = this, _this1 = this, _superprop_get_processAsync = function _superprop_get_processAsync() {
                        return _get(_get_prototype_of(_ChooseContextHandler.prototype), "processAsync", _this);
                    };
                    return _async_to_generator(function() {
                        var contextId2;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    return _superprop_get_processAsync().call(_this1, matchState), [
                                        4,
                                        this.chooseAsync$()
                                    ];
                                case 1:
                                    return contextId2 = _state.sent(), [
                                        4,
                                        this.checkContextTournament$()
                                    ];
                                case 2:
                                    return _state.sent(), matchState.customData.contextId = contextId2, [
                                        4,
                                        this.nextAsync$(matchState)
                                    ];
                                case 3:
                                    return _state.sent(), [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "chooseAsync$",
                value: function chooseAsync$() {
                    return _async_to_generator(function() {
                        var error, contextId2;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    return _state.trys.push([
                                        0,
                                        2,
                                        ,
                                        3
                                    ]), [
                                        4,
                                        GameSDK.context.chooseAsync({
                                            filters: [
                                                "INCLUDE_EXISTING_CHALLENGES"
                                            ],
                                            minSize: 2,
                                            maxSize: 2
                                        })
                                    ];
                                case 1:
                                    return _state.sent(), [
                                        3,
                                        3
                                    ];
                                case 2:
                                    if (error = _state.sent(), !O17.hasOwn(error, "code") || "SAME_CONTEXT" !== error.code) throw error;
                                    return [
                                        3,
                                        3
                                    ];
                                case 3:
                                    if ("string" != typeof (contextId2 = GameSDK.context.getID())) throw new CreateContextFailed_default();
                                    return [
                                        2,
                                        contextId2
                                    ];
                            }
                        });
                    })();
                }
            },
            {
                key: "checkContextTournament$",
                value: function checkContextTournament$() {
                    return _async_to_generator(function() {
                        var error;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    if (_state.trys.push([
                                        0,
                                        2,
                                        ,
                                        3
                                    ]), !GameSDK.context.getID()) return [
                                        2
                                    ];
                                    if (!("getTournamentAsync" in GameSDK)) throw new UnavailableFeature_default("getTournamentAsync");
                                    return [
                                        4,
                                        GameSDK.getTournamentAsync()
                                    ];
                                case 1:
                                    throw _state.sent(), new ContextIsTournament_default();
                                case 2:
                                    if (_instanceof(error = _state.sent(), ContextIsTournament_default)) throw error;
                                    return [
                                        3,
                                        3
                                    ];
                                case 3:
                                    return [
                                        2
                                    ];
                            }
                        });
                    })();
                }
            }
        ]), _ChooseContextHandler;
    }(BaseHandler_default);
    __name(_ChooseContextHandler, "ChooseContextHandler");
    var ChooseContextHandler = _ChooseContextHandler, ChooseContextHandler_default = ChooseContextHandler, _InviteFriendsConcrete = function(BaseConcrete_default) {
        function _InviteFriendsConcrete() {
            return _class_call_check(this, _InviteFriendsConcrete), _call_super(this, _InviteFriendsConcrete, arguments);
        }
        return _inherits(_InviteFriendsConcrete, BaseConcrete_default), _create_class(_InviteFriendsConcrete, [
            {
                key: "processAsync",
                value: function processAsync(payload) {
                    return _async_to_generator(function() {
                        var playerId2, extraData, flow, chooseContext, prepareMatch, getOpponentId, createMatch, getMatchProfiles, startMatch, logStart, sendMessage, detectGameMode, matchState;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    return _state.trys.push([
                                        0,
                                        ,
                                        2,
                                        3
                                    ]), this.startLog$(payload), playerId2 = payload.playerId, extraData = payload.extraData, flow = new NothingHandler_default(this), chooseContext = new ChooseContextHandler_default(this), flow.setNext(chooseContext), prepareMatch = new PrepareMatchHandler_default(this, {
                                        mode: MatchModes_default.CHALLENGE_FRIEND,
                                        customData: {
                                            playerId: playerId2
                                        }
                                    }), chooseContext.setNext(prepareMatch), getOpponentId = new GetOpponentChallengeContextHandler_default(this, {
                                        ignoreId: playerId2
                                    }), prepareMatch.setNext(getOpponentId), createMatch = new CreateMatchHandler_default(this, {
                                        extraData: extraData
                                    }), getOpponentId.setNext(createMatch), getMatchProfiles = new GetMatchProfilesHandler_default(this), createMatch.setNext(getMatchProfiles), startMatch = new StartMatchHandler_default(this), getMatchProfiles.setNext(startMatch), logStart = new LogMatchStartHandler_default(this), startMatch.setNext(logStart), sendMessage = new SendChallengeMessageHandler_default(this), logStart.setNext(sendMessage), detectGameMode = new ContextGameModeHandler_default(this), sendMessage.setNext(detectGameMode), matchState = this.match.getMatchState(), [
                                        4,
                                        flow.processAsync(matchState)
                                    ];
                                case 1:
                                    return _state.sent(), [
                                        3,
                                        3
                                    ];
                                case 2:
                                    return this.endLog$(), [
                                        7
                                    ];
                                case 3:
                                    return [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            }
        ]), _InviteFriendsConcrete;
    }(BaseConcrete_default);
    __name(_InviteFriendsConcrete, "InviteFriendsConcrete");
    var InviteFriendsConcrete = _InviteFriendsConcrete, InviteFriendsConcrete_default = InviteFriendsConcrete;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var _JoinMatchFailed = function(Error1) {
        function _JoinMatchFailed(message) {
            var _this;
            return _class_call_check(this, _JoinMatchFailed), (_this = _call_super(this, _JoinMatchFailed, [
                message
            ])).name = "JoinMatchFailed", _this.message = null != message ? message : "Join match failed", _this;
        }
        return _inherits(_JoinMatchFailed, Error1), _JoinMatchFailed;
    }(_wrap_native_super(Error));
    __name(_JoinMatchFailed, "JoinMatchFailed");
    var JoinMatchFailed = _JoinMatchFailed, JoinMatchFailed_default = JoinMatchFailed;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var _MatchAreFinished = function(Error1) {
        function _MatchAreFinished(message) {
            var _this;
            return _class_call_check(this, _MatchAreFinished), (_this = _call_super(this, _MatchAreFinished, [
                message
            ])).name = "MatchAreFinished", _this.message = null != message ? message : "Match are finished", _this;
        }
        return _inherits(_MatchAreFinished, Error1), _MatchAreFinished;
    }(_wrap_native_super(Error));
    __name(_MatchAreFinished, "MatchAreFinished");
    var MatchAreFinished = _MatchAreFinished, MatchAreFinished_default = MatchAreFinished;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var _OtherPlayerHasJoinedMatch = function(Error1) {
        function _OtherPlayerHasJoinedMatch(message) {
            var _this;
            return _class_call_check(this, _OtherPlayerHasJoinedMatch), (_this = _call_super(this, _OtherPlayerHasJoinedMatch, [
                message
            ])).name = "OtherPlayerHasJoinedMatch", _this.message = null != message ? message : "Other player has joined match", _this;
        }
        return _inherits(_OtherPlayerHasJoinedMatch, Error1), _OtherPlayerHasJoinedMatch;
    }(_wrap_native_super(Error));
    __name(_OtherPlayerHasJoinedMatch, "OtherPlayerHasJoinedMatch");
    var OtherPlayerHasJoinedMatch = _OtherPlayerHasJoinedMatch, OtherPlayerHasJoinedMatch_default = OtherPlayerHasJoinedMatch, Dtos8 = Ludex.Dtos, _Ludex_Utils28 = Ludex.Utils, O18 = _Ludex_Utils28.Object, _JoinMatchHandler = function(BaseHandler_default) {
        function _JoinMatchHandler() {
            return _class_call_check(this, _JoinMatchHandler), _call_super(this, _JoinMatchHandler, arguments);
        }
        return _inherits(_JoinMatchHandler, BaseHandler_default), _create_class(_JoinMatchHandler, [
            {
                key: "processAsync",
                value: function processAsync(matchState) {
                    var _this = this, _this1 = this, _superprop_get_processAsync = function _superprop_get_processAsync() {
                        return _get(_get_prototype_of(_JoinMatchHandler.prototype), "processAsync", _this);
                    };
                    return _async_to_generator(function() {
                        var respMatchData, respMatchDataValidated;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    return _superprop_get_processAsync().call(_this1, matchState), this.validateMatchData$(matchState), [
                                        4,
                                        this.joinMatchAsync$(matchState)
                                    ];
                                case 1:
                                    return respMatchData = _state.sent(), respMatchDataValidated = new Dtos8.Match.Data(respMatchData).toObject(), this.validateJoinMatchData$(matchState, respMatchDataValidated), this.updateMatchData$(matchState, respMatchDataValidated), [
                                        4,
                                        this.nextAsync$(matchState)
                                    ];
                                case 2:
                                    return _state.sent(), [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "validateMatchData$",
                value: function validateMatchData$(matchState) {
                    if (matchState.status !== MatchStatus_default.OPEN) throw new MatchAreNotOpen_default();
                }
            },
            {
                key: "validateJoinMatchData$",
                value: function validateJoinMatchData$(matchState, matchData) {
                    var id = matchState.id, customData = matchState.customData, _id = matchData._id, blackPlayerId = matchData.blackPlayerId, whitePlayerId = matchData.whitePlayerId, whitePlayerFinish = matchData.whitePlayerFinish, blackPlayerFinish = matchData.blackPlayerFinish, isPlayerBlack = blackPlayerId === customData.playerId, isPlayerWhite = whitePlayerId === customData.opponentId;
                    if ("string" != typeof _id || _id !== id || !isPlayerWhite) throw console.warn("\uD83E\uDD16 ? matchData", matchData), new JoinMatchFailed_default();
                    if (whitePlayerFinish && blackPlayerFinish) throw new MatchAreFinished_default();
                    if (!isPlayerBlack) throw new OtherPlayerHasJoinedMatch_default();
                }
            },
            {
                key: "joinMatchAsync$",
                value: function joinMatchAsync$(matchState) {
                    return _async_to_generator(function() {
                        var id;
                        return _ts_generator(this, function(_state) {
                            return (id = matchState.id) ? [
                                2,
                                this.match$.api.getMatchAPI().joinMatchAsync(id)
                            ] : [
                                2,
                                {}
                            ];
                        });
                    }).call(this);
                }
            },
            {
                key: "updateMatchData$",
                value: function updateMatchData$(matchState, matchData) {
                    this.updateMatchGeneral$(matchState, matchData), this.updatePlayerIds$(matchState, matchData), this.initializeProfiles$(matchState), this.updateScoresAndStatus$(matchState, matchData);
                }
            },
            {
                key: "updateMatchGeneral$",
                value: function updateMatchGeneral$(matchState, matchData) {
                    var extraData = matchData.extraData;
                    matchState.customData = O18.merge(matchState.customData, extraData);
                }
            },
            {
                key: "updatePlayerIds$",
                value: function updatePlayerIds$(matchState, matchData) {
                    var whitePlayerId = matchData.whitePlayerId, blackPlayerId = matchData.blackPlayerId, isPlayerWhite = whitePlayerId === matchState.customData.playerId, playerId2 = isPlayerWhite ? whitePlayerId : blackPlayerId, opponentId = isPlayerWhite ? blackPlayerId : whitePlayerId;
                    matchState.customData.playerId = playerId2, matchState.customData.opponentId = opponentId;
                }
            },
            {
                key: "initializeProfiles$",
                value: function initializeProfiles$(matchState) {
                    var _matchState_customData = matchState.customData, playerId2 = _matchState_customData.playerId, opponentId = _matchState_customData.opponentId;
                    if (playerId2 && opponentId) {
                        var defaultProfile = {
                            name: "",
                            photo: "",
                            finished: !1
                        };
                        matchState.profiles[playerId2] || (matchState.profiles[playerId2] = __spreadValues({
                            id: playerId2
                        }, defaultProfile)), matchState.profiles[opponentId] || (matchState.profiles[opponentId] = __spreadValues({
                            id: opponentId
                        }, defaultProfile));
                    }
                }
            },
            {
                key: "updateScoresAndStatus$",
                value: function updateScoresAndStatus$(matchState, matchData) {
                    var _matchState_customData = matchState.customData, playerId2 = _matchState_customData.playerId, opponentId = _matchState_customData.opponentId;
                    if (playerId2 && opponentId) {
                        var whitePlayerId = matchData.whitePlayerId, whitePlayerScore = matchData.whitePlayerScore, whitePlayerFinish = matchData.whitePlayerFinish, blackPlayerScore = matchData.blackPlayerScore, blackPlayerFinish = matchData.blackPlayerFinish, isPlayerWhite = whitePlayerId === matchState.customData.playerId;
                        matchState.profiles[playerId2].score = isPlayerWhite ? whitePlayerScore : blackPlayerScore, matchState.profiles[opponentId].score = isPlayerWhite ? blackPlayerScore : whitePlayerScore, matchState.profiles[playerId2].finished = isPlayerWhite ? whitePlayerFinish : blackPlayerFinish, matchState.profiles[opponentId].finished = isPlayerWhite ? blackPlayerFinish : whitePlayerFinish;
                    }
                }
            }
        ]), _JoinMatchHandler;
    }(BaseHandler_default);
    __name(_JoinMatchHandler, "JoinMatchHandler");
    var JoinMatchHandler = _JoinMatchHandler, JoinMatchHandler_default = JoinMatchHandler;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var _SendAcceptedMessageHandler = function(BaseHandler_default) {
        function _SendAcceptedMessageHandler() {
            return _class_call_check(this, _SendAcceptedMessageHandler), _call_super(this, _SendAcceptedMessageHandler, arguments);
        }
        return _inherits(_SendAcceptedMessageHandler, BaseHandler_default), _create_class(_SendAcceptedMessageHandler, [
            {
                key: "processAsync",
                value: function processAsync(matchState) {
                    var _this = this, _this1 = this, _superprop_get_processAsync = function _superprop_get_processAsync() {
                        return _get(_get_prototype_of(_SendAcceptedMessageHandler.prototype), "processAsync", _this);
                    };
                    return _async_to_generator(function() {
                        var imageResult;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    return _superprop_get_processAsync().call(_this1, matchState), this.validateData$(matchState), [
                                        4,
                                        this.createWideframesAcceptedAsync$(matchState)
                                    ];
                                case 1:
                                    return (imageResult = _state.sent()) && this.sendMessageAsync$(matchState, imageResult), [
                                        4,
                                        this.nextAsync$(matchState)
                                    ];
                                case 2:
                                    return _state.sent(), [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "validateData$",
                value: function validateData$(matchState) {
                    var id = matchState.id, customData = matchState.customData, contextId2 = customData.contextId, opponentId = customData.opponentId;
                    if (!id || "string" != typeof id) throw new MatchIdNotValid_default();
                    if (!contextId2 || "string" != typeof contextId2) throw new ContextIdNotValid_default();
                    if (!opponentId || "string" != typeof opponentId) throw new OpponentIdNotValid_default();
                }
            },
            {
                key: "createWideframesAcceptedAsync$",
                value: function createWideframesAcceptedAsync$(matchState) {
                    return _async_to_generator(function() {
                        var frameCapture, profiles, customData, playerId2, opponentId, playerProfile, opponentProfile, playerPhoto, tmp, playerScore, opponentPhoto, tmp1, opponentScore;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    if (_state.trys.push([
                                        0,
                                        2,
                                        ,
                                        3
                                    ]), frameCapture = this.codex$.frameCapture, profiles = matchState.profiles, playerId2 = (customData = matchState.customData).playerId, opponentId = customData.opponentId, !playerId2 || !opponentId || (playerProfile = profiles[playerId2], opponentProfile = profiles[opponentId], !playerProfile || !opponentProfile) || (playerPhoto = playerProfile.photo, playerScore = void 0 === (tmp = playerProfile.score) ? 0 : tmp, playerProfile.finished) || (opponentPhoto = opponentProfile.photo, opponentScore = void 0 === (tmp1 = opponentProfile.score) ? 0 : tmp1, !opponentProfile.finished)) return [
                                        2,
                                        null
                                    ];
                                    return [
                                        4,
                                        frameCapture.renderAsync("result-challenge", {
                                            playerId: playerId2,
                                            playerPhoto: playerPhoto,
                                            playerScore: playerScore,
                                            opponentId: opponentId,
                                            opponentPhoto: opponentPhoto,
                                            opponentScore: opponentScore,
                                            isPlayerFinished: !1,
                                            isOpponentFinished: !0
                                        })
                                    ];
                                case 1:
                                    return [
                                        2,
                                        _state.sent()
                                    ];
                                case 2:
                                    return console.warn("createWideframesAcceptedAsync", _state.sent()), [
                                        2,
                                        null
                                    ];
                                case 3:
                                    return [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "sendMessageAsync$",
                value: function sendMessageAsync$(matchState, wideframes) {
                    return _async_to_generator(function() {
                        var id, profiles, customData, playerId2, opponentId, playerProfile, playerName, message;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    if (id = matchState.id, profiles = matchState.profiles, playerId2 = (customData = matchState.customData).playerId, opponentId = customData.opponentId, !playerId2 || "string" != typeof playerId2) throw new PlayerIdNotValid_default();
                                    if (!("updateAsync" in GameSDK.extra)) throw new UnavailableFeature_default("updateAsync");
                                    if (!(playerProfile = profiles[playerId2])) throw new ProfileNotFound_default();
                                    return playerName = playerProfile.name, message = {
                                        data: {
                                            type: ContextTypes_default2.CHALLENGE_FRIEND,
                                            matchId: id,
                                            playerId: playerId2,
                                            opponentId: opponentId
                                        },
                                        action: "CUSTOM",
                                        template: "challenge",
                                        cta: {
                                            default: "Play",
                                            localizations: {
                                                vi_VN: "Ch\u01A1i ngay"
                                            }
                                        },
                                        text: {
                                            default: "".concat(playerName, " accepted the challenge."),
                                            localizations: {
                                                vi_VN: "".concat(playerName, " \xe3 chp nhn tham gia trn u.")
                                            }
                                        },
                                        image: wideframes,
                                        strategy: "LAST",
                                        notification: "PUSH"
                                    }, [
                                        4,
                                        GameSDK.extra.updateAsync(message)
                                    ];
                                case 1:
                                    return _state.sent(), [
                                        2
                                    ];
                            }
                        });
                    })();
                }
            }
        ]), _SendAcceptedMessageHandler;
    }(BaseHandler_default);
    __name(_SendAcceptedMessageHandler, "SendAcceptedMessageHandler");
    var SendAcceptedMessageHandler = _SendAcceptedMessageHandler, SendAcceptedMessageHandler_default = SendAcceptedMessageHandler, _JoinChallengeMatchConcrete = function(BaseConcrete_default) {
        function _JoinChallengeMatchConcrete() {
            return _class_call_check(this, _JoinChallengeMatchConcrete), _call_super(this, _JoinChallengeMatchConcrete, arguments);
        }
        return _inherits(_JoinChallengeMatchConcrete, BaseConcrete_default), _create_class(_JoinChallengeMatchConcrete, [
            {
                key: "processAsync",
                value: function processAsync(payload) {
                    return _async_to_generator(function() {
                        var matchId, playerId2, opponentId, flow, prepareMatch, getMatch, getMatchProfiles, startMatch, sendMessage, logStart, detectGameMode, matchState;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    return _state.trys.push([
                                        0,
                                        ,
                                        2,
                                        3
                                    ]), this.startLog$(payload), matchId = payload.matchId, playerId2 = payload.playerId, opponentId = payload.opponentId, flow = new NothingHandler_default(this), prepareMatch = new PrepareMatchHandler_default(this, {
                                        id: matchId,
                                        mode: MatchModes_default.CHALLENGE_FRIEND,
                                        customData: {
                                            playerId: playerId2,
                                            opponentId: opponentId
                                        }
                                    }), flow.setNext(prepareMatch), getMatch = new JoinMatchHandler_default(this), prepareMatch.setNext(getMatch), getMatchProfiles = new GetMatchProfilesHandler_default(this), getMatch.setNext(getMatchProfiles), startMatch = new StartMatchHandler_default(this), getMatchProfiles.setNext(startMatch), sendMessage = new SendAcceptedMessageHandler_default(this), startMatch.setNext(sendMessage), logStart = new LogMatchStartHandler_default(this), sendMessage.setNext(logStart), detectGameMode = new ContextGameModeHandler_default(this), logStart.setNext(detectGameMode), matchState = this.match.getMatchState(), [
                                        4,
                                        flow.processAsync(matchState)
                                    ];
                                case 1:
                                    return _state.sent(), [
                                        3,
                                        3
                                    ];
                                case 2:
                                    return this.endLog$(), [
                                        7
                                    ];
                                case 3:
                                    return [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            }
        ]), _JoinChallengeMatchConcrete;
    }(BaseConcrete_default);
    __name(_JoinChallengeMatchConcrete, "JoinChallengeMatchConcrete");
    var JoinChallengeMatchConcrete = _JoinChallengeMatchConcrete, JoinChallengeMatchConcrete_default = JoinChallengeMatchConcrete;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var DefaultRespMatchDataDtos = {
        _id: "",
        status: "",
        appId: "",
        createdAt: "",
        startedAt: null,
        finishedAt: null,
        winnerId: "",
        whitePlayerId: "",
        blackPlayerId: "",
        whitePlayerScore: 0,
        blackPlayerScore: 0,
        whitePlayerFinish: !1,
        blackPlayerFinish: !1,
        extraData: {}
    }, DefaultRespMatchDataDtos_default = DefaultRespMatchDataDtos, _Ludex_Configs8 = Ludex.Configs, AppId3 = _Ludex_Configs8.AppId, _Ludex_Utils29 = Ludex.Utils, V20 = _Ludex_Utils29.Valid, MESSAGE_INVALID4 = "is invalid", _RespMatchDataDtos = function(BaseDtos_default) {
        function _RespMatchDataDtos() {
            return _class_call_check(this, _RespMatchDataDtos), _call_super(this, _RespMatchDataDtos, arguments);
        }
        return _inherits(_RespMatchDataDtos, BaseDtos_default), _create_class(_RespMatchDataDtos, [
            {
                key: "setupData$",
                value: function setupData$(data) {
                    this.lazySetupData$(data);
                }
            },
            {
                key: "validateStructure$",
                value: function validateStructure$(data) {
                    this.lazyValidateStructure$(data);
                }
            },
            {
                key: "validateData$",
                value: function validateData$(data) {
                    this.lazyValidateData$(data);
                }
            },
            {
                key: "validateId",
                value: function validateId(_id) {
                    V20.isString(_id) && _id || this.exception$("_id", MESSAGE_INVALID4);
                }
            },
            {
                key: "validateStatus",
                value: function validateStatus(status) {
                    V20.isString(status) && status || this.exception$("status", MESSAGE_INVALID4);
                }
            },
            {
                key: "validateAppId",
                value: function validateAppId(appId) {
                    V20.isString(appId) && appId === AppId3 || this.exception$("appId", MESSAGE_INVALID4);
                }
            },
            {
                key: "validateCreatedAt",
                value: function validateCreatedAt(createdAt) {
                    V20.isString(createdAt) || this.exception$("createdAt", MESSAGE_INVALID4);
                }
            },
            {
                key: "validateStartedAt",
                value: function validateStartedAt(startedAt) {
                    null !== startedAt && (V20.isString(startedAt) || this.exception$("startedAt", MESSAGE_INVALID4));
                }
            },
            {
                key: "validateFinishedAt",
                value: function validateFinishedAt(finishedAt) {
                    null !== finishedAt && (V20.isString(finishedAt) || this.exception$("finishedAt", MESSAGE_INVALID4));
                }
            },
            {
                key: "validateExtraData",
                value: function validateExtraData(extraData) {
                    null !== extraData && (V20.isObject(extraData) || this.exception$("extraData", MESSAGE_INVALID4));
                }
            },
            {
                key: "validateWinnerId",
                value: function validateWinnerId(winnerId) {
                    null !== winnerId && (V20.isString(winnerId) && winnerId || this.exception$("winnerId", MESSAGE_INVALID4));
                }
            },
            {
                key: "validateWhitePlayerId",
                value: function validateWhitePlayerId(whitePlayerId) {
                    V20.isString(whitePlayerId) && whitePlayerId || this.exception$("whitePlayerId", MESSAGE_INVALID4);
                }
            },
            {
                key: "validateBlackPlayerId",
                value: function validateBlackPlayerId(blackPlayerId) {
                    V20.isString(blackPlayerId) && blackPlayerId || this.exception$("blackPlayerId", MESSAGE_INVALID4);
                }
            },
            {
                key: "validateWhitePlayerScore",
                value: function validateWhitePlayerScore(whitePlayerScore) {
                    V20.isNumber(whitePlayerScore) || this.exception$("whitePlayerScore", MESSAGE_INVALID4);
                }
            },
            {
                key: "validateBlackPlayerScore",
                value: function validateBlackPlayerScore(blackPlayerScore) {
                    V20.isNumber(blackPlayerScore) || this.exception$("blackPlayerScore", MESSAGE_INVALID4);
                }
            },
            {
                key: "validateWhitePlayerFinish",
                value: function validateWhitePlayerFinish(whitePlayerFinish) {
                    V20.isBoolean(whitePlayerFinish) || this.exception$("whitePlayerFinish", MESSAGE_INVALID4);
                }
            },
            {
                key: "validateBlackPlayerFinish",
                value: function validateBlackPlayerFinish(blackPlayerFinish) {
                    V20.isBoolean(blackPlayerFinish) || this.exception$("blackPlayerFinish", MESSAGE_INVALID4);
                }
            },
            {
                key: "toObject",
                value: function toObject() {
                    return _get(_get_prototype_of(_RespMatchDataDtos.prototype), "toObject", this).call(this);
                }
            }
        ]), _RespMatchDataDtos;
    }(BaseDtos_default);
    __name(_RespMatchDataDtos, "RespMatchDataDtos");
    var RespMatchDataDtos = _RespMatchDataDtos;
    RespMatchDataDtos.makeStrict(), RespMatchDataDtos.addDefaults(DefaultRespMatchDataDtos_default);
    var RespMatchDataDtos_default = RespMatchDataDtos;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var _MatchAreNotFinished = function(Error1) {
        function _MatchAreNotFinished(message) {
            var _this;
            return _class_call_check(this, _MatchAreNotFinished), (_this = _call_super(this, _MatchAreNotFinished, [
                message
            ])).name = "MatchAreNotFinished", _this.message = message || "Match are not finished", _this;
        }
        return _inherits(_MatchAreNotFinished, Error1), _MatchAreNotFinished;
    }(_wrap_native_super(Error));
    __name(_MatchAreNotFinished, "MatchAreNotFinished");
    var MatchAreNotFinished = _MatchAreNotFinished, MatchAreNotFinished_default = MatchAreNotFinished;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var _OpponentNotFinishedMatch = function(Error1) {
        function _OpponentNotFinishedMatch(message) {
            var _this;
            return _class_call_check(this, _OpponentNotFinishedMatch), (_this = _call_super(this, _OpponentNotFinishedMatch, [
                message
            ])).name = "OpponentNotFinishedMatch", _this.message = message || "Opponent not finished match", _this;
        }
        return _inherits(_OpponentNotFinishedMatch, Error1), _OpponentNotFinishedMatch;
    }(_wrap_native_super(Error));
    __name(_OpponentNotFinishedMatch, "OpponentNotFinishedMatch");
    var OpponentNotFinishedMatch = _OpponentNotFinishedMatch, OpponentNotFinishedMatch_default = OpponentNotFinishedMatch, _Ludex_Utils30 = Ludex.Utils, O19 = _Ludex_Utils30.Object, _ResultMatchHandler = function(BaseHandler_default) {
        function _ResultMatchHandler() {
            return _class_call_check(this, _ResultMatchHandler), _call_super(this, _ResultMatchHandler, arguments);
        }
        return _inherits(_ResultMatchHandler, BaseHandler_default), _create_class(_ResultMatchHandler, [
            {
                key: "processAsync",
                value: function processAsync(matchState) {
                    var _this = this, _this1 = this, _superprop_get_processAsync = function _superprop_get_processAsync() {
                        return _get(_get_prototype_of(_ResultMatchHandler.prototype), "processAsync", _this);
                    };
                    return _async_to_generator(function() {
                        var respMatchDataValidated;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    return _superprop_get_processAsync().call(_this1, matchState), this.validateMatchData$(matchState), [
                                        4,
                                        this.getMatchAsync$(matchState)
                                    ];
                                case 1:
                                    return respMatchDataValidated = new RespMatchDataDtos_default(_state.sent()).toObject(), this.validateResultMatchData$(matchState, respMatchDataValidated), this.updateMatchData$(matchState, respMatchDataValidated), this.validatePlayerTurn$(matchState), this.validateOpponentTurn$(matchState), [
                                        4,
                                        this.nextAsync$(matchState)
                                    ];
                                case 2:
                                    return _state.sent(), [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "validateMatchData$",
                value: function validateMatchData$(matchState) {
                    if ("string" != typeof matchState.id) throw new MatchIdNotValid_default();
                }
            },
            {
                key: "validateResultMatchData$",
                value: function validateResultMatchData$(matchState, matchData) {
                    var id = matchState.id, _id = matchData._id, whitePlayerFinish = matchData.whitePlayerFinish, blackPlayerFinish = matchData.blackPlayerFinish;
                    if ("string" != typeof _id || _id !== id) throw new GetMatchDetailFailed_default();
                    if (!whitePlayerFinish && !blackPlayerFinish) throw new MatchAreNotFinished_default();
                }
            },
            {
                key: "validatePlayerTurn$",
                value: function validatePlayerTurn$(matchState) {
                    var profiles = matchState.profiles, playerId2 = matchState.customData.playerId;
                    if ("string" != typeof playerId2) throw new PlayerIdNotValid_default();
                    if (!profiles[playerId2].finished) throw new PlayerNotFinishedMatch_default();
                }
            },
            {
                key: "validateOpponentTurn$",
                value: function validateOpponentTurn$(matchState) {
                    var profiles = matchState.profiles, opponentId = matchState.customData.opponentId;
                    if ("string" != typeof opponentId) throw new OpponentIdNotValid_default();
                    if (!profiles[opponentId].finished) throw new OpponentNotFinishedMatch_default();
                }
            },
            {
                key: "getMatchAsync$",
                value: function getMatchAsync$(matchState) {
                    return _async_to_generator(function() {
                        var id;
                        return _ts_generator(this, function(_state) {
                            return (id = matchState.id) ? [
                                2,
                                this.match$.api.getMatchAPI().getMatchDetailByIdAsync(id)
                            ] : [
                                2,
                                null
                            ];
                        });
                    }).call(this);
                }
            },
            {
                key: "updateMatchData$",
                value: function updateMatchData$(matchState, matchData) {
                    this.updateMatchGeneral$(matchState, matchData), this.updatePlayerIds$(matchState, matchData), this.initializeProfiles$(matchState), this.updateScoresAndStatus$(matchState, matchData);
                }
            },
            {
                key: "updateMatchGeneral$",
                value: function updateMatchGeneral$(matchState, matchData) {
                    var extraData = matchData.extraData;
                    matchState.status = MatchStatus_default.FINISHED, matchState.customData = O19.merge(matchState.customData, extraData);
                }
            },
            {
                key: "updatePlayerIds$",
                value: function updatePlayerIds$(matchState, matchData) {
                    var whitePlayerId = matchData.whitePlayerId, blackPlayerId = matchData.blackPlayerId, isPlayerWhite = whitePlayerId === matchState.customData.playerId, playerId2 = isPlayerWhite ? whitePlayerId : blackPlayerId, opponentId = isPlayerWhite ? blackPlayerId : whitePlayerId;
                    matchState.customData.playerId = playerId2, matchState.customData.opponentId = opponentId;
                }
            },
            {
                key: "initializeProfiles$",
                value: function initializeProfiles$(matchState) {
                    var _matchState_customData = matchState.customData, playerId2 = _matchState_customData.playerId, opponentId = _matchState_customData.opponentId;
                    if (playerId2 && opponentId) {
                        var defaultProfile = {
                            name: "",
                            photo: "",
                            finished: !0
                        };
                        matchState.profiles[playerId2] || (matchState.profiles[playerId2] = __spreadValues({
                            id: playerId2
                        }, defaultProfile)), matchState.profiles[opponentId] || (matchState.profiles[opponentId] = __spreadValues({
                            id: opponentId
                        }, defaultProfile));
                    }
                }
            },
            {
                key: "updateScoresAndStatus$",
                value: function updateScoresAndStatus$(matchState, matchData) {
                    var _matchState_customData = matchState.customData, playerId2 = _matchState_customData.playerId, opponentId = _matchState_customData.opponentId;
                    if (playerId2 && opponentId) {
                        var whitePlayerId = matchData.whitePlayerId, whitePlayerScore = matchData.whitePlayerScore, whitePlayerFinish = matchData.whitePlayerFinish, blackPlayerScore = matchData.blackPlayerScore, blackPlayerFinish = matchData.blackPlayerFinish, isPlayerWhite = whitePlayerId === matchState.customData.playerId;
                        matchState.profiles[playerId2].score = isPlayerWhite ? whitePlayerScore : blackPlayerScore, matchState.profiles[opponentId].score = isPlayerWhite ? blackPlayerScore : whitePlayerScore, matchState.profiles[playerId2].finished = isPlayerWhite ? whitePlayerFinish : blackPlayerFinish, matchState.profiles[opponentId].finished = isPlayerWhite ? blackPlayerFinish : whitePlayerFinish;
                    }
                }
            }
        ]), _ResultMatchHandler;
    }(BaseHandler_default);
    __name(_ResultMatchHandler, "ResultMatchHandler");
    var ResultMatchHandler = _ResultMatchHandler, ResultMatchHandler_default = ResultMatchHandler, _ResultChallengeMatchConcrete = function(BaseConcrete_default) {
        function _ResultChallengeMatchConcrete() {
            return _class_call_check(this, _ResultChallengeMatchConcrete), _call_super(this, _ResultChallengeMatchConcrete, arguments);
        }
        return _inherits(_ResultChallengeMatchConcrete, BaseConcrete_default), _create_class(_ResultChallengeMatchConcrete, [
            {
                key: "processAsync",
                value: function processAsync(payload) {
                    return _async_to_generator(function() {
                        var matchId, playerId2, opponentId, flow, prepareMatch, getMatch, getMatchProfiles, detectGameMode, matchState;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    return _state.trys.push([
                                        0,
                                        ,
                                        2,
                                        3
                                    ]), this.startLog$(payload), matchId = payload.matchId, playerId2 = payload.playerId, opponentId = payload.opponentId, flow = new NothingHandler_default(this), prepareMatch = new PrepareMatchHandler_default(this, {
                                        id: matchId,
                                        mode: MatchModes_default.CHALLENGE_FRIEND,
                                        customData: {
                                            playerId: playerId2,
                                            opponentId: opponentId
                                        }
                                    }), flow.setNext(prepareMatch), getMatch = new ResultMatchHandler_default(this), prepareMatch.setNext(getMatch), getMatchProfiles = new GetMatchProfilesHandler_default(this), getMatch.setNext(getMatchProfiles), detectGameMode = new ContextGameModeHandler_default(this), getMatchProfiles.setNext(detectGameMode), matchState = this.match.getMatchState(), [
                                        4,
                                        flow.processAsync(matchState)
                                    ];
                                case 1:
                                    return _state.sent(), [
                                        3,
                                        3
                                    ];
                                case 2:
                                    return this.endLog$(), [
                                        7
                                    ];
                                case 3:
                                    return [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            }
        ]), _ResultChallengeMatchConcrete;
    }(BaseConcrete_default);
    __name(_ResultChallengeMatchConcrete, "ResultChallengeMatchConcrete");
    var ResultChallengeMatchConcrete = _ResultChallengeMatchConcrete, ResultChallengeMatchConcrete_default = ResultChallengeMatchConcrete;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var _ChooseContextConcrete = function(BaseConcrete_default) {
        function _ChooseContextConcrete() {
            var _this, _this1;
            return _class_call_check(this, _ChooseContextConcrete), _this = _call_super(this, _ChooseContextConcrete, arguments), _this1 = _this, _define_property(_this, "fallbackSingleMode$", void 0), _define_property(_this, "startFLowChallengeFriend$", __name(function(payload) {
                return _async_to_generator(function() {
                    return _ts_generator(this, function(_state) {
                        switch(_state.label){
                            case 0:
                                return _state.trys.push([
                                    0,
                                    2,
                                    ,
                                    3
                                ]), [
                                    4,
                                    _this1.match.challenge.invite.processAsync(payload)
                                ];
                            case 1:
                                return _state.sent(), [
                                    2,
                                    !0
                                ];
                            case 2:
                                return [
                                    2,
                                    _state.sent()
                                ];
                            case 3:
                                return [
                                    2
                                ];
                        }
                    });
                })();
            }, "startFLowChallengeFriend$")), _define_property(_this, "startFlowTournament$", __name(function(playerId2) {
                return _async_to_generator(function() {
                    var contextId2, e;
                    return _ts_generator(this, function(_state) {
                        switch(_state.label){
                            case 0:
                                if (_state.trys.push([
                                    0,
                                    2,
                                    ,
                                    4
                                ]), "string" != typeof (contextId2 = GameSDK.context.getID())) throw new ContextIdNotValid_default();
                                return [
                                    4,
                                    _this1.match.tournament.continue.processAsync({
                                        playerId: playerId2,
                                        contextId: contextId2
                                    })
                                ];
                            case 1:
                            case 3:
                                return _state.sent(), [
                                    3,
                                    4
                                ];
                            case 2:
                                return e = _state.sent(), [
                                    4,
                                    _this1.startFlowSingle$(playerId2)
                                ];
                            case 4:
                                return [
                                    2
                                ];
                        }
                    });
                })();
            }, "startFlowTournament$")), _define_property(_this, "startFlowSingle$", __name(function(playerId2) {
                return _async_to_generator(function() {
                    return _ts_generator(this, function(_state) {
                        return [
                            2,
                            _this1.match.single.start.processAsync({
                                playerId: playerId2
                            })
                        ];
                    });
                })();
            }, "startFlowSingle$")), _this;
        }
        return _inherits(_ChooseContextConcrete, BaseConcrete_default), _create_class(_ChooseContextConcrete, [
            {
                key: "processAsync",
                value: function processAsync(payload) {
                    return _async_to_generator(function() {
                        var playerId2, extraData, fallbackSingleMode, response;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    return _state.trys.push([
                                        0,
                                        ,
                                        7,
                                        8
                                    ]), this.startLog$(payload), playerId2 = payload.playerId, extraData = payload.extraData, fallbackSingleMode = payload.fallbackSingleMode, this.fallbackSingleMode$ = fallbackSingleMode, [
                                        4,
                                        this.startFLowChallengeFriend$({
                                            playerId: playerId2,
                                            extraData: extraData
                                        })
                                    ];
                                case 1:
                                    if (!0 === (response = _state.sent())) return [
                                        2
                                    ];
                                    if (!_instanceof(response, ContextIsTournament_default)) return [
                                        3,
                                        3
                                    ];
                                    return [
                                        4,
                                        this.startFlowTournament$(playerId2)
                                    ];
                                case 2:
                                case 4:
                                    return _state.sent(), [
                                        3,
                                        6
                                    ];
                                case 3:
                                    if (!this.fallbackSingleMode$) return [
                                        3,
                                        5
                                    ];
                                    return [
                                        4,
                                        this.startFlowSingle$(playerId2)
                                    ];
                                case 5:
                                    throw response;
                                case 6:
                                    return [
                                        3,
                                        8
                                    ];
                                case 7:
                                    return this.endLog$(), [
                                        7
                                    ];
                                case 8:
                                    return [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            }
        ]), _ChooseContextConcrete;
    }(BaseConcrete_default);
    __name(_ChooseContextConcrete, "ChooseContextConcrete");
    var ChooseContextConcrete = _ChooseContextConcrete, ChooseContextConcrete_default = ChooseContextConcrete;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var _LeaderboardIdNotValid = function(Error1) {
        function _LeaderboardIdNotValid(message) {
            var _this;
            return _class_call_check(this, _LeaderboardIdNotValid), (_this = _call_super(this, _LeaderboardIdNotValid, [
                message
            ])).name = "LeaderboardIdNotValid", _this.message = null != message ? message : "Leaderboard id is not valid", _this;
        }
        return _inherits(_LeaderboardIdNotValid, Error1), _LeaderboardIdNotValid;
    }(_wrap_native_super(Error));
    __name(_LeaderboardIdNotValid, "LeaderboardIdNotValid");
    var LeaderboardIdNotValid = _LeaderboardIdNotValid, LeaderboardIdNotValid_default = LeaderboardIdNotValid;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var _Ludex_Utils31 = Ludex.Utils, V21 = _Ludex_Utils31.Valid, _SetLeaderboardScoreHandler = function(BaseHandler_default) {
        function _SetLeaderboardScoreHandler(concrete, payload) {
            var _this;
            return _class_call_check(this, _SetLeaderboardScoreHandler), _define_property(_this = _call_super(this, _SetLeaderboardScoreHandler, [
                concrete
            ]), "payload$", void 0), _define_property(_this, "leaderboardPayload$", void 0), _this.payload$ = payload, _this;
        }
        return _inherits(_SetLeaderboardScoreHandler, BaseHandler_default), _create_class(_SetLeaderboardScoreHandler, [
            {
                key: "processAsync",
                value: function processAsync(matchState) {
                    var _this = this, _this1 = this, _superprop_get_processAsync = function _superprop_get_processAsync() {
                        return _get(_get_prototype_of(_SetLeaderboardScoreHandler.prototype), "processAsync", _this);
                    };
                    return _async_to_generator(function() {
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    if (_superprop_get_processAsync().call(_this1, matchState), this.setupSetScorePayload$(matchState), !("submitGameResultsAsync" in GameSDK.extra)) return [
                                        3,
                                        2
                                    ];
                                    return [
                                        4,
                                        GameSDK.extra.submitGameResultsAsync(this.payload$.score)
                                    ];
                                case 1:
                                    _state.sent(), _state.label = 2;
                                case 2:
                                    return this.setLeaderboardScoreAsync$(), [
                                        4,
                                        this.nextAsync$(matchState)
                                    ];
                                case 3:
                                    return _state.sent(), [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "setupSetScorePayload$",
                value: function setupSetScorePayload$(matchState) {
                    return _async_to_generator(function() {
                        var profiles, playerId2, _this_payload$, score2, leaderboardId;
                        return _ts_generator(this, function(_state) {
                            if (profiles = matchState.profiles, !(playerId2 = matchState.customData.playerId) || !profiles[playerId2]) throw new ProfileNotFound_default();
                            if (score2 = (_this_payload$ = this.payload$).score, leaderboardId = _this_payload$.leaderboardId, !V21.isNumber(score2)) throw new ScoreNotValid_default();
                            if (!V21.isString(leaderboardId)) throw new LeaderboardIdNotValid_default();
                            return this.leaderboardPayload$ = {
                                score: score2,
                                playerId: playerId2,
                                leaderboardId: leaderboardId
                            }, [
                                2
                            ];
                        });
                    }).call(this);
                }
            },
            {
                key: "setLeaderboardScoreAsync$",
                value: function setLeaderboardScoreAsync$() {
                    return _async_to_generator(function() {
                        var _this_leaderboardPayload$, playerId2, score2, leaderboardId, name2;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    if (_state.trys.push([
                                        0,
                                        2,
                                        ,
                                        3
                                    ]), playerId2 = (_this_leaderboardPayload$ = this.leaderboardPayload$).playerId, score2 = _this_leaderboardPayload$.score, leaderboardId = _this_leaderboardPayload$.leaderboardId, !(name2 = this.codex$.leaderboard.getLeaderboardName(leaderboardId))) throw new LeaderboardNotExist_default();
                                    return [
                                        4,
                                        this.codex$.leaderboard.setLeaderboardScoreAsync(name2, playerId2, score2)
                                    ];
                                case 1:
                                    return _state.sent(), [
                                        3,
                                        3
                                    ];
                                case 2:
                                    return console.warn("setLeaderboardScoreAsync", _state.sent()), [
                                        3,
                                        3
                                    ];
                                case 3:
                                    return [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            }
        ]), _SetLeaderboardScoreHandler;
    }(BaseHandler_default);
    __name(_SetLeaderboardScoreHandler, "SetLeaderboardScoreHandler");
    var SetLeaderboardScoreHandler = _SetLeaderboardScoreHandler, SetLeaderboardScoreHandler_default = SetLeaderboardScoreHandler, _Ludex_Utils32 = Ludex.Utils, V22 = _Ludex_Utils32.Valid, _PostLeaderboardScoreHandler = function(SetLeaderboardScoreHandler_default) {
        function _PostLeaderboardScoreHandler(concrete) {
            return _class_call_check(this, _PostLeaderboardScoreHandler), _call_super(this, _PostLeaderboardScoreHandler, [
                concrete,
                {
                    score: 0,
                    leaderboardId: ""
                }
            ]);
        }
        return _inherits(_PostLeaderboardScoreHandler, SetLeaderboardScoreHandler_default), _create_class(_PostLeaderboardScoreHandler, [
            {
                key: "setupSetScorePayload$",
                value: function setupSetScorePayload$(matchState) {
                    var _this = this, _this1 = this, _superprop_get_setupSetScorePayload$ = function _superprop_get_setupSetScorePayload$() {
                        return _get(_get_prototype_of(_PostLeaderboardScoreHandler.prototype), "setupSetScorePayload$", _this);
                    };
                    return _async_to_generator(function() {
                        var profiles, customData, playerId2, leaderboardId, score2;
                        return _ts_generator(this, function(_state) {
                            if (profiles = matchState.profiles, playerId2 = (customData = matchState.customData).playerId, !(leaderboardId = customData.leaderboardId)) throw new LeaderboardIdNotValid_default();
                            if (!playerId2 || !profiles[playerId2]) throw new ProfileNotFound_default();
                            if (score2 = profiles[playerId2].score, !V22.isNumber(score2)) throw new ScoreNotValid_default();
                            return this.payload$.score = score2, this.payload$.leaderboardId = leaderboardId, _superprop_get_setupSetScorePayload$().call(_this1, matchState), [
                                2
                            ];
                        });
                    }).call(this);
                }
            }
        ]), _PostLeaderboardScoreHandler;
    }(SetLeaderboardScoreHandler_default);
    __name(_PostLeaderboardScoreHandler, "PostLeaderboardScoreHandler");
    var PostLeaderboardScoreHandler = _PostLeaderboardScoreHandler, PostLeaderboardScoreHandler_default = PostLeaderboardScoreHandler;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var _SendGroupMessageHandler = function(BaseHandler_default) {
        function _SendGroupMessageHandler() {
            return _class_call_check(this, _SendGroupMessageHandler), _call_super(this, _SendGroupMessageHandler, arguments);
        }
        return _inherits(_SendGroupMessageHandler, BaseHandler_default), _create_class(_SendGroupMessageHandler, [
            {
                key: "processAsync",
                value: function processAsync(matchState) {
                    var _this = this, _this1 = this, _superprop_get_processAsync = function _superprop_get_processAsync() {
                        return _get(_get_prototype_of(_SendGroupMessageHandler.prototype), "processAsync", _this);
                    };
                    return _async_to_generator(function() {
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    return _superprop_get_processAsync().call(_this1, matchState), this.validateData$(matchState), this.progressSendGroupMessage$(matchState), [
                                        4,
                                        this.nextAsync$(matchState)
                                    ];
                                case 1:
                                    return _state.sent(), [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "validateData$",
                value: function validateData$(matchState) {
                    var id = matchState.id, customData = matchState.customData, contextId2 = customData.contextId, opponentId = customData.opponentId;
                    if (!id || "string" != typeof id) throw new MatchIdNotValid_default();
                    if (!contextId2 || "string" != typeof contextId2) throw new ContextIdNotValid_default();
                    if (!opponentId || "string" != typeof opponentId) throw new OpponentIdNotValid_default();
                }
            },
            {
                key: "createWideframesResultGroupAsync$",
                value: function createWideframesResultGroupAsync$(matchState) {
                    return _async_to_generator(function() {
                        var frameCapture, profiles, customData, playerId2, opponentId, playerProfile, opponentProfile, playerPhoto, tmp, playerScore, opponentPhoto, tmp1, opponentScore;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    if (_state.trys.push([
                                        0,
                                        2,
                                        ,
                                        3
                                    ]), frameCapture = this.codex$.frameCapture, profiles = matchState.profiles, playerId2 = (customData = matchState.customData).playerId, opponentId = customData.opponentId, !playerId2 || !opponentId || (playerProfile = profiles[playerId2], opponentProfile = profiles[opponentId], !playerProfile || !opponentProfile)) return [
                                        2,
                                        null
                                    ];
                                    return playerPhoto = playerProfile.photo, playerScore = void 0 === (tmp = playerProfile.score) ? 0 : tmp, opponentPhoto = opponentProfile.photo, opponentScore = void 0 === (tmp1 = opponentProfile.score) ? 0 : tmp1, [
                                        4,
                                        frameCapture.renderAsync("result-challenge", {
                                            playerId: playerId2,
                                            playerPhoto: playerPhoto,
                                            playerScore: playerScore,
                                            opponentId: opponentId,
                                            opponentPhoto: opponentPhoto,
                                            opponentScore: opponentScore,
                                            isPlayerFinished: !0,
                                            isOpponentFinished: !0
                                        })
                                    ];
                                case 1:
                                    return [
                                        2,
                                        _state.sent()
                                    ];
                                case 2:
                                    return console.warn("createWideframesResultGroupAsync", _state.sent()), [
                                        2,
                                        null
                                    ];
                                case 3:
                                    return [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "createWideframesBestScoreAsync$",
                value: function createWideframesBestScoreAsync$(matchState) {
                    return _async_to_generator(function() {
                        var _this_codex$, player, frameCapture, matchPlayerId, _player_getPlayer, playerId2, playerPhoto, data, playerScore;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    if (_state.trys.push([
                                        0,
                                        2,
                                        ,
                                        3
                                    ]), player = (_this_codex$ = this.codex$).player, frameCapture = _this_codex$.frameCapture, matchPlayerId = matchState.customData.playerId, playerId2 = (_player_getPlayer = player.getPlayer()).playerId, playerPhoto = _player_getPlayer.photo, data = _player_getPlayer.data, matchPlayerId !== playerId2) return [
                                        2,
                                        null
                                    ];
                                    return playerScore = (data || {}).score, [
                                        4,
                                        frameCapture.renderAsync("share-score", {
                                            playerId: playerId2,
                                            playerPhoto: playerPhoto,
                                            playerScore: playerScore
                                        })
                                    ];
                                case 1:
                                    return [
                                        2,
                                        _state.sent()
                                    ];
                                case 2:
                                    return console.warn("createWideframesBestScoreAsync", _state.sent()), [
                                        2,
                                        null
                                    ];
                                case 3:
                                    return [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "progressSendGroupMessage$",
                value: function progressSendGroupMessage$(matchState) {
                    return _async_to_generator(function() {
                        var profiles, customData, playerId2, opponentId, playerProfile, opponentProfile, tmp, tmp1, imageResult, imageScore;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    if (profiles = matchState.profiles, playerId2 = (customData = matchState.customData).playerId, !((opponentId = customData.opponentId) && "string" == typeof opponentId)) return [
                                        3,
                                        2
                                    ];
                                    if (!playerId2 || "string" != typeof playerId2) throw new PlayerIdNotValid_default();
                                    if (playerProfile = profiles[playerId2], opponentProfile = profiles[opponentId], !playerProfile || !opponentProfile) return [
                                        2
                                    ];
                                    if (!((void 0 === (tmp = playerProfile.score) ? 0 : tmp) > (void 0 === (tmp1 = opponentProfile.score) ? 0 : tmp1))) return [
                                        3,
                                        2
                                    ];
                                    return [
                                        4,
                                        this.createWideframesResultGroupAsync$(matchState)
                                    ];
                                case 1:
                                    if (!(imageResult = _state.sent())) return [
                                        2
                                    ];
                                    return this.sendBestScoreMessageAsync$(matchState, imageResult), [
                                        2
                                    ];
                                case 2:
                                    return [
                                        4,
                                        this.createWideframesBestScoreAsync$(matchState)
                                    ];
                                case 3:
                                    if (!(imageScore = _state.sent())) return [
                                        2
                                    ];
                                    return this.sendChallengeMessageAsync$(matchState, imageScore), [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "sendBestScoreMessageAsync$",
                value: function sendBestScoreMessageAsync$(matchState, wideframes) {
                    return _async_to_generator(function() {
                        var profiles, playerId2, playerProfile, playerName, playerScore, message;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    if (profiles = matchState.profiles, !(playerId2 = matchState.customData.playerId) || "string" != typeof playerId2) throw new PlayerIdNotValid_default();
                                    if (!("updateAsync" in GameSDK.extra)) throw new UnavailableFeature_default("updateAsync");
                                    if (!(playerProfile = profiles[playerId2])) throw new ProfileNotFound_default();
                                    if (playerName = playerProfile.name, playerScore = playerProfile.score, message = {
                                        data: {
                                            type: this.codex$.context.getSessionContextTypes().MATCHING_GROUP,
                                            playerId: playerId2,
                                            playerName: playerName,
                                            playerScore: playerScore
                                        },
                                        action: "CUSTOM",
                                        template: "play_turn",
                                        cta: {
                                            default: "Play",
                                            localizations: {
                                                vi_VN: "Ch\u01A1i"
                                            }
                                        },
                                        text: {
                                            default: "".concat(playerName, " beats your high score. Their score: ").concat(playerScore, "."),
                                            localizations: {
                                                vi_VN: "".concat(playerName, " va vt im s cao nht ca bn! Chi ln na ch?")
                                            }
                                        },
                                        image: wideframes,
                                        strategy: "IMMEDIATE",
                                        notification: "PUSH"
                                    }, !("updateAsync" in GameSDK.extra)) throw new UnavailableFeature_default("updateAsync");
                                    return [
                                        4,
                                        GameSDK.extra.updateAsync(message)
                                    ];
                                case 1:
                                    return _state.sent(), [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "sendChallengeMessageAsync$",
                value: function sendChallengeMessageAsync$(matchState, wideframes) {
                    return _async_to_generator(function() {
                        var profiles, playerId2, playerProfile, playerName, playerScore, message;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    if (profiles = matchState.profiles, !(playerId2 = matchState.customData.playerId) || "string" != typeof playerId2) throw new PlayerIdNotValid_default();
                                    if (!(playerProfile = profiles[playerId2])) throw new ProfileNotFound_default();
                                    if (playerName = playerProfile.name, playerScore = playerProfile.score, message = {
                                        data: {
                                            type: this.codex$.context.getSessionContextTypes().MATCHING_GROUP,
                                            playerId: playerId2,
                                            playerName: playerName,
                                            playerScore: playerScore
                                        },
                                        action: "CUSTOM",
                                        template: "play_turn",
                                        cta: {
                                            default: "Play",
                                            localizations: {
                                                vi_VN: "Ch\u01A1i ngay"
                                            }
                                        },
                                        text: {
                                            default: "".concat(playerName, " got ").concat(playerScore, " scores. So easy! Can you?"),
                                            localizations: {
                                                vi_VN: "".concat(playerName, " \xe3 t ").concat(playerScore, " im! Qu\xe1 d lu\xf4n. Chi li n\xe0o!")
                                            }
                                        },
                                        image: wideframes,
                                        strategy: "IMMEDIATE",
                                        notification: "PUSH"
                                    }, !("updateAsync" in GameSDK.extra)) throw new UnavailableFeature_default("updateAsync");
                                    return [
                                        4,
                                        GameSDK.extra.updateAsync(message)
                                    ];
                                case 1:
                                    return _state.sent(), [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            }
        ]), _SendGroupMessageHandler;
    }(BaseHandler_default);
    __name(_SendGroupMessageHandler, "SendGroupMessageHandler");
    var SendGroupMessageHandler = _SendGroupMessageHandler, SendGroupMessageHandler_default = SendGroupMessageHandler, _FinishGroupConcrete = function(BaseConcrete_default) {
        function _FinishGroupConcrete() {
            return _class_call_check(this, _FinishGroupConcrete), _call_super(this, _FinishGroupConcrete, arguments);
        }
        return _inherits(_FinishGroupConcrete, BaseConcrete_default), _create_class(_FinishGroupConcrete, [
            {
                key: "processAsync",
                value: function processAsync() {
                    return _async_to_generator(function() {
                        var flow, finishMatch, sendMessage, logFinish, setPlayerBestScore, postLeaderboardScore, detectGameMode, matchState;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    return _state.trys.push([
                                        0,
                                        ,
                                        2,
                                        3
                                    ]), this.startLog$(), flow = new NothingHandler_default(this), finishMatch = new FinishMatchHandler_default(this, {
                                        useAPI: !1
                                    }), flow.setNext(finishMatch), sendMessage = new SendGroupMessageHandler_default(this), finishMatch.setNext(sendMessage), logFinish = new LogMatchFinishedHandler_default(this), sendMessage.setNext(logFinish), setPlayerBestScore = new SetPlayerBestScoreHandler_default(this), logFinish.setNext(setPlayerBestScore), postLeaderboardScore = new PostLeaderboardScoreHandler_default(this), setPlayerBestScore.setNext(postLeaderboardScore), detectGameMode = new ContextGameModeHandler_default(this), postLeaderboardScore.setNext(detectGameMode), matchState = this.match.getMatchState(), [
                                        4,
                                        flow.processAsync(matchState)
                                    ];
                                case 1:
                                    return _state.sent(), [
                                        3,
                                        3
                                    ];
                                case 2:
                                    return this.endLog$(), [
                                        7
                                    ];
                                case 3:
                                    return [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            }
        ]), _FinishGroupConcrete;
    }(BaseConcrete_default);
    __name(_FinishGroupConcrete, "FinishGroupConcrete");
    var FinishGroupConcrete = _FinishGroupConcrete, FinishGroupConcrete_default = FinishGroupConcrete;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var Dtos9 = Ludex.Dtos, _Ludex_Utils33 = Ludex.Utils, O20 = _Ludex_Utils33.Object, _SetProfileDataHandler = function(BaseHandler_default) {
        function _SetProfileDataHandler(concrete, payload) {
            var _this;
            return _class_call_check(this, _SetProfileDataHandler), _define_property(_this = _call_super(this, _SetProfileDataHandler, [
                concrete
            ]), "payload$", void 0), _this.payload$ = payload, _this;
        }
        return _inherits(_SetProfileDataHandler, BaseHandler_default), _create_class(_SetProfileDataHandler, [
            {
                key: "processAsync",
                value: function processAsync(matchState) {
                    var _this = this, _this1 = this, _superprop_get_processAsync = function _superprop_get_processAsync() {
                        return _get(_get_prototype_of(_SetProfileDataHandler.prototype), "processAsync", _this);
                    };
                    return _async_to_generator(function() {
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    return _superprop_get_processAsync().call(_this1, matchState), this.updateProfileMatchData$(matchState), [
                                        4,
                                        this.nextAsync$(matchState)
                                    ];
                                case 1:
                                    return _state.sent(), [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "updateProfileMatchData$",
                value: function updateProfileMatchData$(matchState) {
                    var id = this.payload$.id, profiles = matchState.profiles;
                    if (!profiles[id]) throw new ProfileNotFound_default();
                    var profileMerged = O20.merge(profiles[id], this.payload$), profile = new Dtos9.Match.Profile(profileMerged).toObject();
                    profiles[profile.id] = profile;
                }
            }
        ]), _SetProfileDataHandler;
    }(BaseHandler_default);
    __name(_SetProfileDataHandler, "SetProfileDataHandler");
    var SetProfileDataHandler = _SetProfileDataHandler, SetProfileDataHandler_default = SetProfileDataHandler, _JoinGroupConcrete = function(BaseConcrete_default) {
        function _JoinGroupConcrete() {
            return _class_call_check(this, _JoinGroupConcrete), _call_super(this, _JoinGroupConcrete, arguments);
        }
        return _inherits(_JoinGroupConcrete, BaseConcrete_default), _create_class(_JoinGroupConcrete, [
            {
                key: "processAsync",
                value: function processAsync(payload) {
                    return _async_to_generator(function() {
                        var playerId2, opponentId, opponentScore, flow, prepareMatch, getMatchProfiles, setProfileData, startMatch, logStart, detectGameMode, matchState;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    return _state.trys.push([
                                        0,
                                        ,
                                        2,
                                        3
                                    ]), this.startLog$(payload), playerId2 = payload.playerId, opponentId = payload.opponentId, opponentScore = payload.opponentScore, flow = new NothingHandler_default(this), prepareMatch = new PrepareMatchHandler_default(this, {
                                        id: "7749",
                                        mode: MatchModes_default.MATCHING_GROUP,
                                        customData: {
                                            playerId: playerId2,
                                            opponentId: opponentId
                                        }
                                    }), flow.setNext(prepareMatch), getMatchProfiles = new GetMatchProfilesHandler_default(this), prepareMatch.setNext(getMatchProfiles), setProfileData = new SetProfileDataHandler_default(this, {
                                        id: playerId2,
                                        score: opponentScore
                                    }), getMatchProfiles.setNext(setProfileData), startMatch = new StartMatchHandler_default(this), setProfileData.setNext(startMatch), logStart = new LogMatchStartHandler_default(this), startMatch.setNext(logStart), detectGameMode = new ContextGameModeHandler_default(this), logStart.setNext(detectGameMode), matchState = this.match.getMatchState(), [
                                        4,
                                        flow.processAsync(matchState)
                                    ];
                                case 1:
                                    return _state.sent(), [
                                        3,
                                        3
                                    ];
                                case 2:
                                    return this.endLog$(), [
                                        7
                                    ];
                                case 3:
                                    return [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            }
        ]), _JoinGroupConcrete;
    }(BaseConcrete_default);
    __name(_JoinGroupConcrete, "JoinGroupConcrete");
    var JoinGroupConcrete = _JoinGroupConcrete, JoinGroupConcrete_default = JoinGroupConcrete;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var _MatchGroupNotSupported = function(Error1) {
        function _MatchGroupNotSupported(message) {
            var _this;
            return _class_call_check(this, _MatchGroupNotSupported), (_this = _call_super(this, _MatchGroupNotSupported, [
                message
            ])).name = "MatchGroupNotSupported", _this.message = null != message ? message : "Match group is not supported", _this;
        }
        return _inherits(_MatchGroupNotSupported, Error1), _MatchGroupNotSupported;
    }(_wrap_native_super(Error));
    __name(_MatchGroupNotSupported, "MatchGroupNotSupported");
    var MatchGroupNotSupported = _MatchGroupNotSupported, MatchGroupNotSupported_default = MatchGroupNotSupported, _GroupContextHandler = function(BaseHandler_default) {
        function _GroupContextHandler(concrete, payload) {
            var _this;
            return _class_call_check(this, _GroupContextHandler), _define_property(_this = _call_super(this, _GroupContextHandler, [
                concrete
            ]), "payload$", void 0), _this.payload$ = payload, _this;
        }
        return _inherits(_GroupContextHandler, BaseHandler_default), _create_class(_GroupContextHandler, [
            {
                key: "processAsync",
                value: function processAsync(matchState) {
                    var _this = this, _this1 = this, _superprop_get_processAsync = function _superprop_get_processAsync() {
                        return _get(_get_prototype_of(_GroupContextHandler.prototype), "processAsync", _this);
                    };
                    return _async_to_generator(function() {
                        var contextId2;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    return _superprop_get_processAsync().call(_this1, matchState), [
                                        4,
                                        this.checkMatchGroupSupported$()
                                    ];
                                case 1:
                                    return _state.sent(), [
                                        4,
                                        this.matchingGroup$()
                                    ];
                                case 2:
                                    return contextId2 = _state.sent(), matchState.customData.contextId = contextId2, [
                                        4,
                                        this.nextAsync$(matchState)
                                    ];
                                case 3:
                                    return _state.sent(), [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "checkMatchGroupSupported$",
                value: function checkMatchGroupSupported$() {
                    return _async_to_generator(function() {
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    if (!("getSupportedAPIs" in GameSDK)) throw new UnavailableFeature_default("getSupportedAPIs");
                                    if (!("checkCanPlayerMatchAsync" in GameSDK.extra)) throw new UnavailableFeature_default("checkCanPlayerMatchAsync");
                                    if (!(GameSDK.getSupportedAPIs().indexOf("checkCanPlayerMatchAsync") > -1)) throw new MatchGroupNotSupported_default();
                                    return [
                                        4,
                                        GameSDK.extra.checkCanPlayerMatchAsync()
                                    ];
                                case 1:
                                    if (!_state.sent()) throw new MatchGroupNotSupported_default();
                                    return [
                                        2
                                    ];
                            }
                        });
                    })();
                }
            },
            {
                key: "matchingGroup$",
                value: function matchingGroup$() {
                    return _async_to_generator(function() {
                        var _this_payload$, matchTag, _this_payload$_autoSwitch, autoSwitch, _this_payload$_onlyExisting, onlyExisting, contextId2;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    if (!("matchPlayerAsync" in GameSDK.extra)) throw new UnavailableFeature_default("matchPlayerAsync");
                                    return matchTag = (_this_payload$ = this.payload$).matchTag, autoSwitch = void 0 !== (_this_payload$_autoSwitch = _this_payload$.autoSwitch) && _this_payload$_autoSwitch, onlyExisting = void 0 !== (_this_payload$_onlyExisting = _this_payload$.onlyExisting) && _this_payload$_onlyExisting, [
                                        4,
                                        GameSDK.extra.matchPlayerAsync(matchTag, autoSwitch, onlyExisting)
                                    ];
                                case 1:
                                    if (_state.sent(), "string" != typeof (contextId2 = GameSDK.context.getID())) throw new CreateContextFailed_default();
                                    return [
                                        2,
                                        contextId2
                                    ];
                            }
                        });
                    }).call(this);
                }
            }
        ]), _GroupContextHandler;
    }(BaseHandler_default);
    __name(_GroupContextHandler, "GroupContextHandler");
    var GroupContextHandler = _GroupContextHandler, GroupContextHandler_default = GroupContextHandler, _StartGroupConcrete = function(BaseConcrete_default) {
        function _StartGroupConcrete() {
            return _class_call_check(this, _StartGroupConcrete), _call_super(this, _StartGroupConcrete, arguments);
        }
        return _inherits(_StartGroupConcrete, BaseConcrete_default), _create_class(_StartGroupConcrete, [
            {
                key: "processAsync",
                value: function processAsync(payload) {
                    return _async_to_generator(function() {
                        var matchTag, playerId2, options, flow, groupContext, prepareMatch, getOpponentId, startMatch, getMatchProfiles, logStart, detectGameMode, matchState;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    return _state.trys.push([
                                        0,
                                        ,
                                        2,
                                        3
                                    ]), this.startLog$(payload), matchTag = payload.matchTag, playerId2 = payload.playerId, options = payload.options, flow = new NothingHandler_default(this), groupContext = new GroupContextHandler_default(this, __spreadValues({
                                        matchTag: matchTag
                                    }, options)), flow.setNext(groupContext), prepareMatch = new PrepareMatchHandler_default(this, {
                                        id: "7749",
                                        mode: MatchModes_default.MATCHING_GROUP,
                                        customData: {
                                            playerId: playerId2
                                        }
                                    }), groupContext.setNext(prepareMatch), getOpponentId = new GetOpponentChallengeContextHandler_default(this, {
                                        ignoreId: playerId2
                                    }), prepareMatch.setNext(getOpponentId), startMatch = new StartMatchHandler_default(this), getOpponentId.setNext(startMatch), getMatchProfiles = new GetMatchProfilesHandler_default(this), startMatch.setNext(getMatchProfiles), logStart = new LogMatchStartHandler_default(this), getMatchProfiles.setNext(logStart), detectGameMode = new ContextGameModeHandler_default(this), logStart.setNext(detectGameMode), matchState = this.match.getMatchState(), [
                                        4,
                                        flow.processAsync(matchState)
                                    ];
                                case 1:
                                    return _state.sent(), [
                                        3,
                                        3
                                    ];
                                case 2:
                                    return this.endLog$(), [
                                        7
                                    ];
                                case 3:
                                    return [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            }
        ]), _StartGroupConcrete;
    }(BaseConcrete_default);
    __name(_StartGroupConcrete, "StartGroupConcrete");
    var StartGroupConcrete = _StartGroupConcrete, StartGroupConcrete_default = StartGroupConcrete;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var _FinishSingleConcrete = function(BaseConcrete_default) {
        function _FinishSingleConcrete() {
            return _class_call_check(this, _FinishSingleConcrete), _call_super(this, _FinishSingleConcrete, arguments);
        }
        return _inherits(_FinishSingleConcrete, BaseConcrete_default), _create_class(_FinishSingleConcrete, [
            {
                key: "processAsync",
                value: function processAsync() {
                    return _async_to_generator(function() {
                        var flow, finishMatch, logFinish, setPlayerBestScore, postGlobalLBScore, detectGameMode, matchState;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    return _state.trys.push([
                                        0,
                                        ,
                                        2,
                                        3
                                    ]), this.startLog$(), flow = new NothingHandler_default(this), finishMatch = new FinishMatchHandler_default(this, {
                                        useAPI: !1
                                    }), flow.setNext(finishMatch), logFinish = new LogMatchFinishedHandler_default(this), finishMatch.setNext(logFinish), setPlayerBestScore = new SetPlayerBestScoreHandler_default(this), logFinish.setNext(setPlayerBestScore), postGlobalLBScore = new PostGlobalLeaderboardsScoreHandler_default(this), setPlayerBestScore.setNext(postGlobalLBScore), detectGameMode = new ContextGameModeHandler_default(this), postGlobalLBScore.setNext(detectGameMode), matchState = this.match.getMatchState(), [
                                        4,
                                        flow.processAsync(matchState)
                                    ];
                                case 1:
                                    return _state.sent(), [
                                        3,
                                        3
                                    ];
                                case 2:
                                    return this.endLog$(), [
                                        7
                                    ];
                                case 3:
                                    return [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            }
        ]), _FinishSingleConcrete;
    }(BaseConcrete_default);
    __name(_FinishSingleConcrete, "FinishSingleConcrete");
    var FinishSingleConcrete = _FinishSingleConcrete, FinishSingleConcrete_default = FinishSingleConcrete;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var _ProfileIdNotDefined = function(Error1) {
        function _ProfileIdNotDefined(message) {
            var _this;
            return _class_call_check(this, _ProfileIdNotDefined), (_this = _call_super(this, _ProfileIdNotDefined, [
                message
            ])).name = "ProfileIdNotDefined", _this.message = null != message ? message : "Profile id is not defined", _this;
        }
        return _inherits(_ProfileIdNotDefined, Error1), _ProfileIdNotDefined;
    }(_wrap_native_super(Error));
    __name(_ProfileIdNotDefined, "ProfileIdNotDefined");
    var ProfileIdNotDefined = _ProfileIdNotDefined, ProfileIdNotDefined_default = ProfileIdNotDefined, Dtos10 = Ludex.Dtos, _GetProfileHandler = function(BaseHandler_default) {
        function _GetProfileHandler(concrete, payload) {
            var _this;
            return _class_call_check(this, _GetProfileHandler), _define_property(_this = _call_super(this, _GetProfileHandler, [
                concrete
            ]), "payload$", void 0), _this.payload$ = payload, _this;
        }
        return _inherits(_GetProfileHandler, BaseHandler_default), _create_class(_GetProfileHandler, [
            {
                key: "processAsync",
                value: function processAsync(matchState) {
                    var _this = this, _this1 = this, _superprop_get_processAsync = function _superprop_get_processAsync() {
                        return _get(_get_prototype_of(_GetProfileHandler.prototype), "processAsync", _this);
                    };
                    return _async_to_generator(function() {
                        var profileId, playerId2, profile;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    if (_superprop_get_processAsync().call(_this1, matchState), !(profileId = this.payload$.profileId)) throw new ProfileIdNotDefined_default();
                                    if (playerId2 = this.codex$.player.getPlayerId(), profileId !== playerId2) return [
                                        3,
                                        1
                                    ];
                                    return profile = this.getPlayerProfile$(), [
                                        3,
                                        3
                                    ];
                                case 1:
                                    return [
                                        4,
                                        this.getProfileAsync$(profileId)
                                    ];
                                case 2:
                                    if (!(profile = _state.sent())) throw new ProfileNotFound_default();
                                    _state.label = 3;
                                case 3:
                                    return this.updateMatchData$(profile, matchState), [
                                        4,
                                        this.nextAsync$(matchState)
                                    ];
                                case 4:
                                    return _state.sent(), [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "getPlayerProfile$",
                value: function getPlayerProfile$() {
                    var _player_getPlayer = this.codex$.player.getPlayer();
                    return {
                        playerId: _player_getPlayer.playerId,
                        name: _player_getPlayer.name,
                        photo: _player_getPlayer.photo,
                        locale: _player_getPlayer.locale
                    };
                }
            },
            {
                key: "getProfileAsync$",
                value: function getProfileAsync$(profileId) {
                    return _async_to_generator(function() {
                        var profile;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    return [
                                        4,
                                        (profile = this.codex$.profile).requestProfiles([
                                            profileId
                                        ])
                                    ];
                                case 1:
                                    return _state.sent(), [
                                        2,
                                        profile.getProfiles()[profileId]
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "updateMatchData$",
                value: function updateMatchData$(data, matchState) {
                    var playerId2 = data.playerId, name2 = data.name, photo2 = data.photo, profile = new Dtos10.Match.Profile({
                        id: playerId2,
                        name: name2,
                        photo: photo2
                    }).toObject();
                    matchState.profiles[playerId2] = profile;
                }
            }
        ]), _GetProfileHandler;
    }(BaseHandler_default);
    __name(_GetProfileHandler, "GetProfileHandler");
    var GetProfileHandler = _GetProfileHandler, GetProfileHandler_default = GetProfileHandler, _StartSingleConcrete = function(BaseConcrete_default) {
        function _StartSingleConcrete() {
            return _class_call_check(this, _StartSingleConcrete), _call_super(this, _StartSingleConcrete, arguments);
        }
        return _inherits(_StartSingleConcrete, BaseConcrete_default), _create_class(_StartSingleConcrete, [
            {
                key: "processAsync",
                value: function processAsync(payload) {
                    return _async_to_generator(function() {
                        var playerId2, flow, switchContext, prepareMatch, startMatch, getPlayerProfile, logStart, detectGameMode, matchState;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    return _state.trys.push([
                                        0,
                                        ,
                                        2,
                                        3
                                    ]), this.startLog$(payload), playerId2 = payload.playerId, flow = new NothingHandler_default(this), switchContext = new SwitchContextHandler_default(this, {
                                        contextId: "SOLO"
                                    }), flow.setNext(switchContext), prepareMatch = new PrepareMatchHandler_default(this, {
                                        id: "123456",
                                        mode: MatchModes_default.SINGLE,
                                        customData: {
                                            playerId: playerId2
                                        }
                                    }), switchContext.setNext(prepareMatch), startMatch = new StartMatchHandler_default(this), prepareMatch.setNext(startMatch), getPlayerProfile = new GetProfileHandler_default(this, {
                                        profileId: playerId2
                                    }), startMatch.setNext(getPlayerProfile), logStart = new LogMatchStartHandler_default(this), getPlayerProfile.setNext(logStart), detectGameMode = new ContextGameModeHandler_default(this), logStart.setNext(detectGameMode), matchState = this.match.getMatchState(), [
                                        4,
                                        flow.processAsync(matchState)
                                    ];
                                case 1:
                                    return _state.sent(), [
                                        3,
                                        3
                                    ];
                                case 2:
                                    return this.endLog$(), [
                                        7
                                    ];
                                case 3:
                                    return [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            }
        ]), _StartSingleConcrete;
    }(BaseConcrete_default);
    __name(_StartSingleConcrete, "StartSingleConcrete");
    var StartSingleConcrete = _StartSingleConcrete, StartSingleConcrete_default = StartSingleConcrete;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var _FinishStrategyConcrete = function(BaseConcrete_default) {
        function _FinishStrategyConcrete() {
            return _class_call_check(this, _FinishStrategyConcrete), _call_super(this, _FinishStrategyConcrete, arguments);
        }
        return _inherits(_FinishStrategyConcrete, BaseConcrete_default), _create_class(_FinishStrategyConcrete, [
            {
                key: "processAsync",
                value: function processAsync(payload) {
                    return _async_to_generator(function() {
                        var _ref, _ref_setPlayerBestScore, setPlayerBestScore, _ref_postGlobalLeaderboard, postGlobalLeaderboard, flow, finishMatch, logFinish, setPlayerBS, postGlobalLBScore, detectGameMode, matchState;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    return _state.trys.push([
                                        0,
                                        ,
                                        2,
                                        3
                                    ]), this.startLog$(payload), setPlayerBestScore = void 0 !== (_ref_setPlayerBestScore = (_ref = null != payload ? payload : {}).setPlayerBestScore) && _ref_setPlayerBestScore, postGlobalLeaderboard = void 0 !== (_ref_postGlobalLeaderboard = _ref.postGlobalLeaderboard) && _ref_postGlobalLeaderboard, flow = new NothingHandler_default(this), finishMatch = new FinishMatchHandler_default(this, {
                                        useAPI: !1
                                    }), flow.setNext(finishMatch), logFinish = new LogMatchFinishedHandler_default(this), finishMatch.setNext(logFinish), setPlayerBS = new SetPlayerBestScoreHandler_default(this, {
                                        ignore: !setPlayerBestScore
                                    }), logFinish.setNext(setPlayerBS), postGlobalLBScore = new PostGlobalLeaderboardsScoreHandler_default(this, {
                                        ignore: !postGlobalLeaderboard
                                    }), setPlayerBS.setNext(postGlobalLBScore), detectGameMode = new ContextGameModeHandler_default(this), postGlobalLBScore.setNext(detectGameMode), matchState = this.match.getMatchState(), [
                                        4,
                                        flow.processAsync(matchState)
                                    ];
                                case 1:
                                    return _state.sent(), [
                                        3,
                                        3
                                    ];
                                case 2:
                                    return this.endLog$(), [
                                        7
                                    ];
                                case 3:
                                    return [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            }
        ]), _FinishStrategyConcrete;
    }(BaseConcrete_default);
    __name(_FinishStrategyConcrete, "FinishStrategyConcrete");
    var FinishStrategyConcrete = _FinishStrategyConcrete, FinishStrategyConcrete_default = FinishStrategyConcrete;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var _StartStrategyConcrete = function(BaseConcrete_default) {
        function _StartStrategyConcrete() {
            return _class_call_check(this, _StartStrategyConcrete), _call_super(this, _StartStrategyConcrete, arguments);
        }
        return _inherits(_StartStrategyConcrete, BaseConcrete_default), _create_class(_StartStrategyConcrete, [
            {
                key: "processAsync",
                value: function processAsync(payload) {
                    return _async_to_generator(function() {
                        var matchId, playerId2, gameMode, _payload_extraData, extraData, flow, switchContext, prepareMatch, startMatch, getPlayerProfile, logStart, detectGameMode, matchState;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    return _state.trys.push([
                                        0,
                                        ,
                                        2,
                                        3
                                    ]), this.startLog$(payload), matchId = payload.matchId, playerId2 = payload.playerId, gameMode = payload.gameMode, extraData = void 0 === (_payload_extraData = payload.extraData) ? {} : _payload_extraData, flow = new NothingHandler_default(this), switchContext = new SwitchContextHandler_default(this, {
                                        contextId: "SOLO"
                                    }), flow.setNext(switchContext), prepareMatch = new PrepareMatchHandler_default(this, {
                                        id: matchId,
                                        mode: gameMode,
                                        customData: __spreadValues({
                                            playerId: playerId2
                                        }, extraData)
                                    }), switchContext.setNext(prepareMatch), startMatch = new StartMatchHandler_default(this), prepareMatch.setNext(startMatch), getPlayerProfile = new GetProfileHandler_default(this, {
                                        profileId: playerId2
                                    }), startMatch.setNext(getPlayerProfile), logStart = new LogMatchStartHandler_default(this), getPlayerProfile.setNext(logStart), detectGameMode = new ContextGameModeHandler_default(this), logStart.setNext(detectGameMode), matchState = this.match.getMatchState(), [
                                        4,
                                        flow.processAsync(matchState)
                                    ];
                                case 1:
                                    return _state.sent(), [
                                        3,
                                        3
                                    ];
                                case 2:
                                    return this.endLog$(), [
                                        7
                                    ];
                                case 3:
                                    return [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            }
        ]), _StartStrategyConcrete;
    }(BaseConcrete_default);
    __name(_StartStrategyConcrete, "StartStrategyConcrete");
    var StartStrategyConcrete = _StartStrategyConcrete, StartStrategyConcrete_default = StartStrategyConcrete;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var _Ludex_Plugins2 = Ludex.Plugins, tmp2 = _Ludex_Plugins2.Analytics, _ref2 = void 0 === tmp2 ? {} : tmp2, Events6 = _ref2.Events, _Ludex_Utils34 = Ludex.Utils, S6 = _Ludex_Utils34.String, V23 = _Ludex_Utils34.Valid, _LogTournamentStartHandler = function(BaseHandler_default) {
        function _LogTournamentStartHandler() {
            return _class_call_check(this, _LogTournamentStartHandler), _call_super(this, _LogTournamentStartHandler, arguments);
        }
        return _inherits(_LogTournamentStartHandler, BaseHandler_default), _create_class(_LogTournamentStartHandler, [
            {
                key: "processAsync",
                value: function processAsync(matchState) {
                    var _this = this, _this1 = this, _superprop_get_processAsync = function _superprop_get_processAsync() {
                        return _get(_get_prototype_of(_LogTournamentStartHandler.prototype), "processAsync", _this);
                    };
                    return _async_to_generator(function() {
                        var mode, customData, analytics, tournamentId, leaderboardId;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    return _superprop_get_processAsync().call(_this1, matchState), mode = matchState.mode, customData = matchState.customData, this.validateMode$(mode), analytics = this.codex$.analytics, tournamentId = customData.tournamentId, leaderboardId = customData.leaderboardId, Events6 && (null == analytics || analytics.event(Events6.TOURNAMENT_START, {
                                        success: !0,
                                        game_mode: S6.toUpperCamelCase(mode),
                                        tournament_id: tournamentId,
                                        leaderboard_id: leaderboardId
                                    })), [
                                        4,
                                        this.nextAsync$(matchState)
                                    ];
                                case 1:
                                    return _state.sent(), [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "validateMode$",
                value: function validateMode$(mode) {
                    if (!V23.isString(mode)) throw new MatchModeNotDefined_default();
                }
            }
        ]), _LogTournamentStartHandler;
    }(BaseHandler_default);
    __name(_LogTournamentStartHandler, "LogTournamentStartHandler");
    var LogTournamentStartHandler = _LogTournamentStartHandler, LogTournamentStartHandler_default = LogTournamentStartHandler;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var _TournamentIdNotValid = function(Error1) {
        function _TournamentIdNotValid(message) {
            var _this;
            return _class_call_check(this, _TournamentIdNotValid), (_this = _call_super(this, _TournamentIdNotValid, [
                message
            ])).name = "TournamentIdNotValid", _this.message = null != message ? message : "Tournament id is not valid", _this;
        }
        return _inherits(_TournamentIdNotValid, Error1), _TournamentIdNotValid;
    }(_wrap_native_super(Error));
    __name(_TournamentIdNotValid, "TournamentIdNotValid");
    var TournamentIdNotValid = _TournamentIdNotValid, TournamentIdNotValid_default = TournamentIdNotValid, _Ludex_Utils35 = Ludex.Utils, V24 = _Ludex_Utils35.Valid, _ContinueTournamentHandler = function(BaseHandler_default) {
        function _ContinueTournamentHandler(concrete, payload) {
            var _this;
            return _class_call_check(this, _ContinueTournamentHandler), _define_property(_this = _call_super(this, _ContinueTournamentHandler, [
                concrete
            ]), "payload$", void 0), _this.payload$ = payload, _this;
        }
        return _inherits(_ContinueTournamentHandler, BaseHandler_default), _create_class(_ContinueTournamentHandler, [
            {
                key: "processAsync",
                value: function processAsync(matchState) {
                    var _this = this, _this1 = this, _superprop_get_processAsync = function _superprop_get_processAsync() {
                        return _get(_get_prototype_of(_ContinueTournamentHandler.prototype), "processAsync", _this);
                    };
                    return _async_to_generator(function() {
                        var contextId2, tournament, tournamentId, tournamentType, leaderboardId;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    return _superprop_get_processAsync().call(_this1, matchState), contextId2 = this.payload$.contextId, this.validateContextId$(contextId2), [
                                        4,
                                        GameSDK.getTournamentAsync()
                                    ];
                                case 1:
                                    return tournamentId = (tournament = _state.sent()).getID().toString(), tournamentType = tournament.getTournamentType(), this.validateTournamentId$(tournamentId), matchState.customData.contextId = contextId2, matchState.customData.tournamentId = tournamentId, "DAILY" !== tournamentType && (leaderboardId = JSON.parse(tournament.getPayload() || "{}").leaderboardId, this.validateLeaderboardId$(leaderboardId), matchState.customData.leaderboardId = leaderboardId), [
                                        4,
                                        this.nextAsync$(matchState)
                                    ];
                                case 2:
                                    return _state.sent(), [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "validateContextId$",
                value: function validateContextId$(contextId2) {
                    if (!V24.isString(contextId2)) throw new ContextIdNotValid_default();
                }
            },
            {
                key: "validateTournamentId$",
                value: function validateTournamentId$(tournamentId) {
                    if (!V24.isString(tournamentId)) throw new TournamentIdNotValid_default();
                }
            },
            {
                key: "validateLeaderboardId$",
                value: function validateLeaderboardId$(leaderboardId) {
                    if (!V24.isString(leaderboardId) || "" === leaderboardId) throw new LeaderboardIdNotValid_default();
                }
            }
        ]), _ContinueTournamentHandler;
    }(BaseHandler_default);
    __name(_ContinueTournamentHandler, "ContinueTournamentHandler");
    var ContinueTournamentHandler = _ContinueTournamentHandler, ContinueTournamentHandler_default = ContinueTournamentHandler, _ContinueTournamentConcrete = function(BaseConcrete_default) {
        function _ContinueTournamentConcrete() {
            return _class_call_check(this, _ContinueTournamentConcrete), _call_super(this, _ContinueTournamentConcrete, arguments);
        }
        return _inherits(_ContinueTournamentConcrete, BaseConcrete_default), _create_class(_ContinueTournamentConcrete, [
            {
                key: "processAsync",
                value: function processAsync(payload) {
                    return _async_to_generator(function() {
                        var playerId2, contextId2, flow, continueTournament, prepareMatch, startMatch, getPlayerProfile, logMatchStart, logTournamentStart, detectGameMode, matchState;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    return _state.trys.push([
                                        0,
                                        ,
                                        2,
                                        3
                                    ]), this.startLog$(payload), playerId2 = payload.playerId, contextId2 = payload.contextId, flow = new NothingHandler_default(this), continueTournament = new ContinueTournamentHandler_default(this, {
                                        contextId: contextId2
                                    }), flow.setNext(continueTournament), prepareMatch = new PrepareMatchHandler_default(this, {
                                        id: "1997",
                                        mode: MatchModes_default.TOURNAMENT,
                                        customData: {
                                            playerId: playerId2
                                        }
                                    }), continueTournament.setNext(prepareMatch), startMatch = new StartMatchHandler_default(this), prepareMatch.setNext(startMatch), getPlayerProfile = new GetProfileHandler_default(this, {
                                        profileId: playerId2
                                    }), startMatch.setNext(getPlayerProfile), logMatchStart = new LogMatchStartHandler_default(this), getPlayerProfile.setNext(logMatchStart), logTournamentStart = new LogTournamentStartHandler_default(this), logMatchStart.setNext(logTournamentStart), detectGameMode = new ContextGameModeHandler_default(this), logMatchStart.setNext(detectGameMode), matchState = this.match.getMatchState(), [
                                        4,
                                        flow.processAsync(matchState)
                                    ];
                                case 1:
                                    return _state.sent(), [
                                        3,
                                        3
                                    ];
                                case 2:
                                    return this.endLog$(), [
                                        7
                                    ];
                                case 3:
                                    return [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            }
        ]), _ContinueTournamentConcrete;
    }(BaseConcrete_default);
    __name(_ContinueTournamentConcrete, "ContinueTournamentConcrete");
    var ContinueTournamentConcrete = _ContinueTournamentConcrete, ContinueTournamentConcrete_default = ContinueTournamentConcrete;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var _Ludex_Plugins3 = Ludex.Plugins, tmp3 = _Ludex_Plugins3.Analytics, _ref3 = void 0 === tmp3 ? {} : tmp3, Events7 = _ref3.Events, _LogTournamentCreateHandler = function(BaseHandler_default) {
        function _LogTournamentCreateHandler() {
            return _class_call_check(this, _LogTournamentCreateHandler), _call_super(this, _LogTournamentCreateHandler, arguments);
        }
        return _inherits(_LogTournamentCreateHandler, BaseHandler_default), _create_class(_LogTournamentCreateHandler, [
            {
                key: "processAsync",
                value: function processAsync(matchState) {
                    var _this = this, _this1 = this, _superprop_get_processAsync = function _superprop_get_processAsync() {
                        return _get(_get_prototype_of(_LogTournamentCreateHandler.prototype), "processAsync", _this);
                    };
                    return _async_to_generator(function() {
                        var customData, analytics, tournamentId, leaderboardId;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    return _superprop_get_processAsync().call(_this1, matchState), customData = matchState.customData, analytics = this.codex$.analytics, tournamentId = customData.tournamentId, leaderboardId = customData.leaderboardId, Events7 && analytics.event(Events7.TOURNAMENT_CREATE, {
                                        success: !0,
                                        tournament_id: tournamentId,
                                        leaderboard_id: leaderboardId
                                    }), [
                                        4,
                                        this.nextAsync$(matchState)
                                    ];
                                case 1:
                                    return _state.sent(), [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            }
        ]), _LogTournamentCreateHandler;
    }(BaseHandler_default);
    __name(_LogTournamentCreateHandler, "LogTournamentCreateHandler");
    var LogTournamentCreateHandler = _LogTournamentCreateHandler, LogTournamentCreateHandler_default = LogTournamentCreateHandler;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var _CreateTournamentHandler = function(BaseHandler_default) {
        function _CreateTournamentHandler(concrete, payload) {
            var _this;
            return _class_call_check(this, _CreateTournamentHandler), _define_property(_this = _call_super(this, _CreateTournamentHandler, [
                concrete
            ]), "payload$", void 0), _this.payload$ = payload, _this;
        }
        return _inherits(_CreateTournamentHandler, BaseHandler_default), _create_class(_CreateTournamentHandler, [
            {
                key: "processAsync",
                value: function processAsync(matchState) {
                    var _this = this, _this1 = this, _superprop_get_processAsync = function _superprop_get_processAsync() {
                        return _get(_get_prototype_of(_CreateTournamentHandler.prototype), "processAsync", _this);
                    };
                    return _async_to_generator(function() {
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    return _superprop_get_processAsync().call(_this1, matchState), [
                                        4,
                                        this.createTournamentAsync$()
                                    ];
                                case 1:
                                    return _state.sent(), [
                                        4,
                                        this.updateMatchStateAsync$(matchState)
                                    ];
                                case 2:
                                    return _state.sent(), [
                                        4,
                                        this.nextAsync$(matchState)
                                    ];
                                case 3:
                                    return _state.sent(), [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "createTournamentAsync$",
                value: function createTournamentAsync$() {
                    return _async_to_generator(function() {
                        var _this_payload$, name2, score2, customData;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    return name2 = (_this_payload$ = this.payload$).name, score2 = _this_payload$.score, customData = _this_payload$.customData, [
                                        4,
                                        GameSDK.tournament.createAsync({
                                            initialScore: score2,
                                            config: {
                                                title: name2,
                                                tournamentTitle: name2
                                            },
                                            data: customData
                                        })
                                    ];
                                case 1:
                                    return _state.sent(), [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "updateMatchStateAsync$",
                value: function updateMatchStateAsync$(matchState) {
                    return _async_to_generator(function() {
                        var tournament, contextId2, tournamentId, playerId2;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    if (_state.trys.push([
                                        0,
                                        2,
                                        ,
                                        3
                                    ]), !("getTournamentAsync" in GameSDK)) throw new UnavailableFeature_default("getTournamentAsync");
                                    return [
                                        4,
                                        GameSDK.getTournamentAsync()
                                    ];
                                case 1:
                                    return contextId2 = (tournament = _state.sent()).getContextID(), tournamentId = tournament.getID().toString(), playerId2 = this.payload$.playerId, matchState.customData.playerId = playerId2, matchState.customData.contextId = contextId2, matchState.customData.tournamentId = tournamentId, [
                                        3,
                                        3
                                    ];
                                case 2:
                                    if (_instanceof(_state.sent(), UnavailableFeature_default)) return [
                                        2
                                    ];
                                    return [
                                        3,
                                        3
                                    ];
                                case 3:
                                    return [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            }
        ]), _CreateTournamentHandler;
    }(BaseHandler_default);
    __name(_CreateTournamentHandler, "CreateTournamentHandler");
    var CreateTournamentHandler = _CreateTournamentHandler, CreateTournamentHandler_default = CreateTournamentHandler;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var _Ludex_Utils36 = Ludex.Utils, V25 = _Ludex_Utils36.Valid, _CreateLeaderboardHandler = function(BaseHandler_default) {
        function _CreateLeaderboardHandler(concrete, payload) {
            var _this;
            return _class_call_check(this, _CreateLeaderboardHandler), _define_property(_this = _call_super(this, _CreateLeaderboardHandler, [
                concrete
            ]), "payload$", void 0), _define_property(_this, "leaderboardPayload$", void 0), _this.payload$ = payload, _this;
        }
        return _inherits(_CreateLeaderboardHandler, BaseHandler_default), _create_class(_CreateLeaderboardHandler, [
            {
                key: "processAsync",
                value: function processAsync(matchState) {
                    var _this = this, _this1 = this, _superprop_get_processAsync = function _superprop_get_processAsync() {
                        return _get(_get_prototype_of(_CreateLeaderboardHandler.prototype), "processAsync", _this);
                    };
                    return _async_to_generator(function() {
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    return _superprop_get_processAsync().call(_this1, matchState), this.validatePayload$(), [
                                        4,
                                        this.setupCreatePayload$(matchState)
                                    ];
                                case 1:
                                    return _state.sent(), [
                                        4,
                                        this.createLeaderboardAsync$(matchState)
                                    ];
                                case 2:
                                    return _state.sent(), [
                                        4,
                                        this.nextAsync$(matchState)
                                    ];
                                case 3:
                                    return _state.sent(), [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "validatePayload$",
                value: function validatePayload$() {
                    var leaderboardId = this.payload$.leaderboardId;
                    if (!V25.isString(leaderboardId)) throw new LeaderboardIdNotValid_default();
                }
            },
            {
                key: "validatePlayerId$",
                value: function validatePlayerId$(playerId2) {
                    if (!V25.isString(playerId2)) throw new PlayerIdNotValid_default();
                }
            },
            {
                key: "setupCreatePayload$",
                value: function setupCreatePayload$(matchState) {
                    return _async_to_generator(function() {
                        var playerId2, _this_payload$, name2, leaderboardId, customData;
                        return _ts_generator(this, function(_state) {
                            return playerId2 = matchState.customData.playerId, this.validatePlayerId$(playerId2), name2 = (_this_payload$ = this.payload$).name, leaderboardId = _this_payload$.leaderboardId, customData = _this_payload$.customData, this.leaderboardPayload$ = {
                                _id: leaderboardId,
                                name: null != name2 ? name2 : "",
                                createdBy: playerId2,
                                description: JSON.stringify(customData)
                            }, [
                                2
                            ];
                        });
                    }).call(this);
                }
            },
            {
                key: "createLeaderboardAsync$",
                value: function createLeaderboardAsync$(matchState) {
                    return _async_to_generator(function() {
                        var leaderboardId;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    return [
                                        4,
                                        this.codex$.leaderboard.createLeaderboardAsync(this.leaderboardPayload$)
                                    ];
                                case 1:
                                    return leaderboardId = _state.sent(), matchState.customData.leaderboardId = leaderboardId, [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            }
        ]), _CreateLeaderboardHandler;
    }(BaseHandler_default);
    __name(_CreateLeaderboardHandler, "CreateLeaderboardHandler");
    var CreateLeaderboardHandler = _CreateLeaderboardHandler, CreateLeaderboardHandler_default = CreateLeaderboardHandler, _CreateTournamentConcrete = function(BaseConcrete_default) {
        function _CreateTournamentConcrete() {
            return _class_call_check(this, _CreateTournamentConcrete), _call_super(this, _CreateTournamentConcrete, arguments);
        }
        return _inherits(_CreateTournamentConcrete, BaseConcrete_default), _create_class(_CreateTournamentConcrete, [
            {
                key: "processAsync",
                value: function processAsync(payload) {
                    return _async_to_generator(function() {
                        var playerId2, name2, score2, leaderboardId, customData, flow, switchContext, createTournament, getPlayerProfile, setProfileData, createLeaderboard, postLeaderboardScore, logCreate, matchState;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    return _state.trys.push([
                                        0,
                                        ,
                                        2,
                                        3
                                    ]), this.startLog$(payload), playerId2 = payload.playerId, name2 = payload.name, score2 = payload.score, leaderboardId = payload.leaderboardId, customData = payload.payload, flow = new NothingHandler_default(this), switchContext = new SwitchContextHandler_default(this, {
                                        contextId: "SOLO"
                                    }), flow.setNext(switchContext), createTournament = new CreateTournamentHandler_default(this, {
                                        name: name2,
                                        score: score2,
                                        playerId: playerId2,
                                        customData: customData
                                    }), switchContext.setNext(createTournament), getPlayerProfile = new GetProfileHandler_default(this, {
                                        profileId: playerId2
                                    }), createTournament.setNext(getPlayerProfile), setProfileData = new SetProfileDataHandler_default(this, {
                                        id: playerId2,
                                        score: score2
                                    }), getPlayerProfile.setNext(setProfileData), createLeaderboard = new CreateLeaderboardHandler_default(this, {
                                        name: name2,
                                        customData: customData,
                                        leaderboardId: leaderboardId
                                    }), setProfileData.setNext(createLeaderboard), postLeaderboardScore = new PostLeaderboardScoreHandler_default(this), createLeaderboard.setNext(postLeaderboardScore), logCreate = new LogTournamentCreateHandler_default(this), postLeaderboardScore.setNext(logCreate), matchState = this.match.getMatchState(), [
                                        4,
                                        flow.processAsync(matchState)
                                    ];
                                case 1:
                                    return _state.sent(), [
                                        3,
                                        3
                                    ];
                                case 2:
                                    return this.endLog$(), [
                                        7
                                    ];
                                case 3:
                                    return [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            }
        ]), _CreateTournamentConcrete;
    }(BaseConcrete_default);
    __name(_CreateTournamentConcrete, "CreateTournamentConcrete");
    var CreateTournamentConcrete = _CreateTournamentConcrete, CreateTournamentConcrete_default = CreateTournamentConcrete;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var _Ludex_Plugins4 = Ludex.Plugins, Analytics2 = _Ludex_Plugins4.Analytics, _Ludex_Utils37 = Ludex.Utils, V26 = _Ludex_Utils37.Valid, _PostScoreTournamentHandler = function(BaseHandler_default) {
        function _PostScoreTournamentHandler(concrete, payload) {
            var _this;
            return _class_call_check(this, _PostScoreTournamentHandler), _define_property(_this = _call_super(this, _PostScoreTournamentHandler, [
                concrete
            ]), "payload$", void 0), _this.payload$ = payload, _this;
        }
        return _inherits(_PostScoreTournamentHandler, BaseHandler_default), _create_class(_PostScoreTournamentHandler, [
            {
                key: "processAsync",
                value: function processAsync(matchState) {
                    var _this = this, _this1 = this, _superprop_get_processAsync = function _superprop_get_processAsync() {
                        return _get(_get_prototype_of(_PostScoreTournamentHandler.prototype), "processAsync", _this);
                    };
                    return _async_to_generator(function() {
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    return _superprop_get_processAsync().call(_this1, matchState), this.validateData$(matchState), [
                                        4,
                                        this.postScoreTournamentAsync$(matchState)
                                    ];
                                case 1:
                                    return _state.sent(), [
                                        4,
                                        this.nextAsync$(matchState)
                                    ];
                                case 2:
                                    return _state.sent(), [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "validateData$",
                value: function validateData$(matchState) {
                    var profiles = matchState.profiles, playerId2 = matchState.customData.playerId;
                    if (this.validatePlayerId$(playerId2), !profiles[playerId2]) throw new ProfileNotFound_default();
                }
            },
            {
                key: "validatePlayerId$",
                value: function validatePlayerId$(playerId2) {
                    if (!V26.isString(playerId2)) throw new PlayerIdNotValid_default();
                }
            },
            {
                key: "getPlayerProfile$",
                value: function getPlayerProfile$(matchState) {
                    var profiles = matchState.profiles, playerId2 = matchState.customData.playerId;
                    return this.validatePlayerId$(playerId2), profiles[playerId2];
                }
            },
            {
                key: "isNewBestScore$",
                value: function isNewBestScore$(matchState) {
                    var profile = this.getPlayerProfile$(matchState), tmp = profile.score, score2 = void 0 === tmp ? 0 : tmp, _profile_bestScore = profile.bestScore;
                    return score2 > (void 0 === _profile_bestScore ? 0 : _profile_bestScore);
                }
            },
            {
                key: "postScoreTournamentAsync$",
                value: function postScoreTournamentAsync$(matchState) {
                    return _async_to_generator(function() {
                        var analytics, tmp, score2, _this_payload$_openShareScorePopup, openShareScorePopup, eventName, error1;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    analytics = codex.analytics, score2 = void 0 === (tmp = this.getPlayerProfile$(matchState).score) ? 0 : tmp, _state.label = 1;
                                case 1:
                                    return _state.trys.push([
                                        1,
                                        3,
                                        ,
                                        4
                                    ]), [
                                        4,
                                        this.assertSupportedTournamentContext()
                                    ];
                                case 2:
                                    return _state.sent(), [
                                        3,
                                        4
                                    ];
                                case 3:
                                    return console.warn("Post Score Tournament", _state.sent()), [
                                        2
                                    ];
                                case 4:
                                    eventName = (openShareScorePopup = void 0 === (_this_payload$_openShareScorePopup = this.payload$.openShareScorePopup) || _this_payload$_openShareScorePopup) ? Analytics2.Events.TOURNAMENT_SHARE : Analytics2.Events.TOURNAMENT_POST_SCORE, _state.label = 5;
                                case 5:
                                    if (_state.trys.push([
                                        5,
                                        10,
                                        ,
                                        11
                                    ]), !openShareScorePopup) return [
                                        3,
                                        7
                                    ];
                                    return [
                                        4,
                                        GameSDK.tournament.shareAsync({
                                            score: score2
                                        })
                                    ];
                                case 6:
                                    return _state.sent(), [
                                        3,
                                        9
                                    ];
                                case 7:
                                    return [
                                        4,
                                        GameSDK.tournament.postScoreAsync(score2)
                                    ];
                                case 8:
                                    _state.sent(), _state.label = 9;
                                case 9:
                                    return null == analytics || analytics.event(eventName, {
                                        success: !0
                                    }), [
                                        3,
                                        11
                                    ];
                                case 10:
                                    return console.warn("Post Score Tournament", error1 = _state.sent()), null == analytics || analytics.event(eventName, {
                                        success: !1
                                    }), V26.isObject(error1) && "code" in error1 && "USER_INPUT" === error1.code && codex.event.emit(CoreEvents_default.GAME_SDK_POPUP_RESPONDED, {
                                        type: "cancelled",
                                        extra: error1
                                    }), [
                                        3,
                                        11
                                    ];
                                case 11:
                                    return [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "assertSupportedTournamentContext",
                value: function assertSupportedTournamentContext() {
                    if (!("getTournamentAsync" in GameSDK)) throw new UnavailableFeature_default("getTournamentAsync");
                    return GameSDK.getTournamentAsync();
                }
            }
        ]), _PostScoreTournamentHandler;
    }(BaseHandler_default);
    __name(_PostScoreTournamentHandler, "PostScoreTournamentHandler");
    var PostScoreTournamentHandler = _PostScoreTournamentHandler, PostScoreTournamentHandler_default = PostScoreTournamentHandler, _FinishTournamentConcrete = function(BaseConcrete_default) {
        function _FinishTournamentConcrete() {
            return _class_call_check(this, _FinishTournamentConcrete), _call_super(this, _FinishTournamentConcrete, arguments);
        }
        return _inherits(_FinishTournamentConcrete, BaseConcrete_default), _create_class(_FinishTournamentConcrete, [
            {
                key: "processAsync",
                value: function processAsync(payload) {
                    return _async_to_generator(function() {
                        var playerId2, bestScore, flow, finishMatch, setProfileData, postTournament, logFinish, setPlayerBestScore, postLeaderboardScore, setGlobalLBScore, detectGameMode, matchState;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    return _state.trys.push([
                                        0,
                                        ,
                                        2,
                                        3
                                    ]), this.startLog$(payload), playerId2 = payload.playerId, bestScore = payload.bestScore, flow = new NothingHandler_default(this), finishMatch = new FinishMatchHandler_default(this, {
                                        useAPI: !1
                                    }), flow.setNext(finishMatch), setProfileData = new SetProfileDataHandler_default(this, {
                                        id: playerId2,
                                        bestScore: bestScore
                                    }), finishMatch.setNext(setProfileData), postTournament = new PostScoreTournamentHandler_default(this, payload), setProfileData.setNext(postTournament), logFinish = new LogMatchFinishedHandler_default(this), postTournament.setNext(logFinish), setPlayerBestScore = new SetPlayerBestScoreHandler_default(this), logFinish.setNext(setPlayerBestScore), postLeaderboardScore = new PostLeaderboardScoreHandler_default(this), setPlayerBestScore.setNext(postLeaderboardScore), setGlobalLBScore = new PostGlobalLeaderboardsScoreHandler_default(this), postLeaderboardScore.setNext(setGlobalLBScore), detectGameMode = new ContextGameModeHandler_default(this), setGlobalLBScore.setNext(detectGameMode), matchState = this.match.getMatchState(), [
                                        4,
                                        flow.processAsync(matchState)
                                    ];
                                case 1:
                                    return _state.sent(), [
                                        3,
                                        3
                                    ];
                                case 2:
                                    return this.endLog$(), [
                                        7
                                    ];
                                case 3:
                                    return [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            }
        ]), _FinishTournamentConcrete;
    }(BaseConcrete_default);
    __name(_FinishTournamentConcrete, "FinishTournamentConcrete");
    var FinishTournamentConcrete = _FinishTournamentConcrete, FinishTournamentConcrete_default = FinishTournamentConcrete;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var _Ludex_Utils38 = Ludex.Utils, V27 = _Ludex_Utils38.Valid, O21 = _Ludex_Utils38.Object, _JoinTournamentHandler = function(BaseHandler_default) {
        function _JoinTournamentHandler(concrete, payload) {
            var _this;
            return _class_call_check(this, _JoinTournamentHandler), _define_property(_this = _call_super(this, _JoinTournamentHandler, [
                concrete
            ]), "payload$", void 0), _this.payload$ = payload, _this;
        }
        return _inherits(_JoinTournamentHandler, BaseHandler_default), _create_class(_JoinTournamentHandler, [
            {
                key: "processAsync",
                value: function processAsync(matchState) {
                    var _this = this, _this1 = this, _superprop_get_processAsync = function _superprop_get_processAsync() {
                        return _get(_get_prototype_of(_JoinTournamentHandler.prototype), "processAsync", _this);
                    };
                    return _async_to_generator(function() {
                        var tournamentId, tournament, contextId2, leaderboardId;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    return _superprop_get_processAsync().call(_this1, matchState), tournamentId = this.payload$.tournamentId, this.validateTournamentId$(tournamentId), [
                                        4,
                                        this.joinTournamentAsync$(tournamentId)
                                    ];
                                case 1:
                                    return _state.sent(), [
                                        4,
                                        GameSDK.getTournamentAsync()
                                    ];
                                case 2:
                                    return contextId2 = (tournament = _state.sent()).getContextID(), this.validateContextId$(contextId2), leaderboardId = JSON.parse(tournament.getPayload() || "{}").leaderboardId, this.validateLeaderboardId$(leaderboardId), matchState.customData.contextId = contextId2, matchState.customData.tournamentId = tournamentId, matchState.customData.leaderboardId = leaderboardId, [
                                        4,
                                        this.nextAsync$(matchState)
                                    ];
                                case 3:
                                    return _state.sent(), [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "validateTournamentId$",
                value: function validateTournamentId$(tournamentId) {
                    if (!V27.isString(tournamentId)) throw new TournamentIdNotValid_default();
                }
            },
            {
                key: "validateContextId$",
                value: function validateContextId$(contextId2) {
                    if (!V27.isString(contextId2)) throw new ContextIdNotValid_default();
                }
            },
            {
                key: "validateLeaderboardId$",
                value: function validateLeaderboardId$(leaderboardId) {
                    if (!V27.isString(leaderboardId) || "" === leaderboardId) throw new LeaderboardIdNotValid_default();
                }
            },
            {
                key: "joinTournamentAsync$",
                value: function joinTournamentAsync$(tournamentId) {
                    return _async_to_generator(function() {
                        var error;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    if (!("tournament" in GameSDK)) throw new UnavailableFeature_default("tournament");
                                    _state.label = 1;
                                case 1:
                                    return _state.trys.push([
                                        1,
                                        3,
                                        ,
                                        4
                                    ]), [
                                        4,
                                        GameSDK.tournament.joinAsync(tournamentId)
                                    ];
                                case 2:
                                    return _state.sent(), [
                                        3,
                                        4
                                    ];
                                case 3:
                                    if (error = _state.sent(), !O21.hasOwn(error, "code") || "SAME_CONTEXT" !== error.code) throw error;
                                    return [
                                        3,
                                        4
                                    ];
                                case 4:
                                    return [
                                        2
                                    ];
                            }
                        });
                    })();
                }
            }
        ]), _JoinTournamentHandler;
    }(BaseHandler_default);
    __name(_JoinTournamentHandler, "JoinTournamentHandler");
    var JoinTournamentHandler = _JoinTournamentHandler, JoinTournamentHandler_default = JoinTournamentHandler, _JoinTournamentConcrete = function(BaseConcrete_default) {
        function _JoinTournamentConcrete() {
            return _class_call_check(this, _JoinTournamentConcrete), _call_super(this, _JoinTournamentConcrete, arguments);
        }
        return _inherits(_JoinTournamentConcrete, BaseConcrete_default), _create_class(_JoinTournamentConcrete, [
            {
                key: "processAsync",
                value: function processAsync(payload) {
                    return _async_to_generator(function() {
                        var playerId2, tournamentId, flow, joinTournament, prepareMatch, startMatch, getPlayerProfile, logMatchStart, logTournamentStart, detectGameMode, matchState;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    return _state.trys.push([
                                        0,
                                        ,
                                        2,
                                        3
                                    ]), this.startLog$(payload), playerId2 = payload.playerId, tournamentId = payload.tournamentId, flow = new NothingHandler_default(this), joinTournament = new JoinTournamentHandler_default(this, {
                                        tournamentId: tournamentId
                                    }), flow.setNext(joinTournament), prepareMatch = new PrepareMatchHandler_default(this, {
                                        id: "1997",
                                        mode: MatchModes_default.TOURNAMENT,
                                        customData: {
                                            playerId: playerId2
                                        }
                                    }), joinTournament.setNext(prepareMatch), startMatch = new StartMatchHandler_default(this), prepareMatch.setNext(startMatch), getPlayerProfile = new GetProfileHandler_default(this, {
                                        profileId: playerId2
                                    }), startMatch.setNext(getPlayerProfile), logMatchStart = new LogMatchStartHandler_default(this), getPlayerProfile.setNext(logMatchStart), logTournamentStart = new LogTournamentStartHandler_default(this), logMatchStart.setNext(logTournamentStart), detectGameMode = new ContextGameModeHandler_default(this), logTournamentStart.setNext(detectGameMode), matchState = this.match.getMatchState(), [
                                        4,
                                        flow.processAsync(matchState)
                                    ];
                                case 1:
                                    return _state.sent(), [
                                        3,
                                        3
                                    ];
                                case 2:
                                    return this.endLog$(), [
                                        7
                                    ];
                                case 3:
                                    return [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            }
        ]), _JoinTournamentConcrete;
    }(BaseConcrete_default);
    __name(_JoinTournamentConcrete, "JoinTournamentConcrete");
    var JoinTournamentConcrete = _JoinTournamentConcrete, JoinTournamentConcrete_default = JoinTournamentConcrete;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var Dtos11 = Ludex.Dtos, Utils6 = Ludex.Utils, O22 = Utils6.Object, _GetMatchCustomDataHandler = function(BaseHandler_default) {
        function _GetMatchCustomDataHandler() {
            return _class_call_check(this, _GetMatchCustomDataHandler), _call_super(this, _GetMatchCustomDataHandler, arguments);
        }
        return _inherits(_GetMatchCustomDataHandler, BaseHandler_default), _create_class(_GetMatchCustomDataHandler, [
            {
                key: "processAsync",
                value: function processAsync(matchState) {
                    var _this = this, _this1 = this, _superprop_get_processAsync = function _superprop_get_processAsync() {
                        return _get(_get_prototype_of(_GetMatchCustomDataHandler.prototype), "processAsync", _this);
                    };
                    return _async_to_generator(function() {
                        var extraData;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    return _superprop_get_processAsync().call(_this1, matchState), [
                                        4,
                                        this.getMatchCustomData$(matchState)
                                    ];
                                case 1:
                                    return extraData = _state.sent(), this.updateMatchCustomData$(matchState, extraData), [
                                        4,
                                        this.nextAsync$(matchState)
                                    ];
                                case 2:
                                    return _state.sent(), [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "getMatchCustomData$",
                value: function getMatchCustomData$(matchState) {
                    return _async_to_generator(function() {
                        var _ref, id, matchData;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    if (!(id = matchState.id)) return [
                                        2,
                                        {}
                                    ];
                                    return [
                                        4,
                                        this.match$.api.getMatchAPI().getMatchDetailByIdAsync(id)
                                    ];
                                case 1:
                                    return [
                                        2,
                                        null != (_ref = null == (matchData = _state.sent()) ? void 0 : matchData.extraData) ? _ref : {}
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "updateMatchCustomData$",
                value: function updateMatchCustomData$(matchState, extraData) {
                    var dataMerged = O22.merge(matchState.customData, extraData);
                    matchState.customData = new Dtos11.Match.CustomData(dataMerged).toObject();
                }
            }
        ]), _GetMatchCustomDataHandler;
    }(BaseHandler_default);
    __name(_GetMatchCustomDataHandler, "GetMatchCustomDataHandler");
    var GetMatchCustomDataHandler = _GetMatchCustomDataHandler, GetMatchCustomDataHandler_default = GetMatchCustomDataHandler;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var Dtos12 = Ludex.Dtos, Utils7 = Ludex.Utils, O23 = Utils7.Object, _SetMatchCustomDataHandler = function(BaseHandler_default) {
        function _SetMatchCustomDataHandler(concrete, payload) {
            var _this;
            return _class_call_check(this, _SetMatchCustomDataHandler), _define_property(_this = _call_super(this, _SetMatchCustomDataHandler, [
                concrete
            ]), "payload$", void 0), _this.payload$ = payload, _this;
        }
        return _inherits(_SetMatchCustomDataHandler, BaseHandler_default), _create_class(_SetMatchCustomDataHandler, [
            {
                key: "processAsync",
                value: function processAsync(matchState) {
                    var _this = this, _this1 = this, _superprop_get_processAsync = function _superprop_get_processAsync() {
                        return _get(_get_prototype_of(_SetMatchCustomDataHandler.prototype), "processAsync", _this);
                    };
                    return _async_to_generator(function() {
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    return _superprop_get_processAsync().call(_this1, matchState), this.updateMatchCustomData$(matchState), [
                                        4,
                                        this.nextAsync$(matchState)
                                    ];
                                case 1:
                                    return _state.sent(), [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "updateMatchCustomData$",
                value: function updateMatchCustomData$(matchState) {
                    var customDataMerged = O23.merge(matchState.customData, this.payload$);
                    matchState.customData = new Dtos12.Match.CustomData(customDataMerged).toObject();
                }
            }
        ]), _SetMatchCustomDataHandler;
    }(BaseHandler_default);
    __name(_SetMatchCustomDataHandler, "SetMatchCustomDataHandler");
    var SetMatchCustomDataHandler = _SetMatchCustomDataHandler, SetMatchCustomDataHandler_default = SetMatchCustomDataHandler;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var initState6 = {
        id: null,
        mode: null,
        status: null,
        startAt: 0,
        finishAt: 0,
        profiles: {},
        customData: __spreadValues({}, DefaultCustomData_default)
    }, state_default6 = initState6, Configs2 = Ludex.Configs, _MatchPlugin = function(_Ludex_Plugins_BasePlugin) {
        function _MatchPlugin() {
            var _this;
            return _class_call_check(this, _MatchPlugin), _this = _call_super(this, _MatchPlugin, arguments), _define_property(_this, "base$", void 0), _define_property(_this, "group", void 0), _define_property(_this, "single", void 0), _define_property(_this, "context", void 0), _define_property(_this, "strategy", void 0), _define_property(_this, "challenge", void 0), _define_property(_this, "tournament", void 0), _define_property(_this, "api", void 0), _define_property(_this, "handler", void 0), _define_property(_this, "useCPUProfile", void 0), _this;
        }
        return _inherits(_MatchPlugin, _Ludex_Plugins_BasePlugin), _create_class(_MatchPlugin, [
            {
                key: "init",
                value: function init() {
                    this.createMatchData$(), this.createAPIHandler$(), this.createBaseConcrete$(), this.createConcreteFlows$(), this.createConcreteHandlers$();
                }
            },
            {
                key: "setUseCPUProfile",
                value: function setUseCPUProfile(enable) {
                    this.useCPUProfile = enable;
                }
            },
            {
                key: "createMatchData$",
                value: function createMatchData$() {
                    this.codex.storage.addStorage("match", state_default6);
                }
            },
            {
                key: "getMatchState",
                value: function getMatchState() {
                    return this.codex.storage.getStorage("match");
                }
            },
            {
                key: "createBaseConcrete$",
                value: function createBaseConcrete$() {
                    this.base$ = new BaseConcrete_default(this.codex, this);
                }
            },
            {
                key: "createConcreteFlows$",
                value: function createConcreteFlows$() {
                    this.createGroupFlows$(), this.createSingleFlows$(), this.createContextFlows$(), this.createStrategyFlows$(), this.createChallengeFlows$(), this.createTournamentFlows$();
                }
            },
            {
                key: "createConcreteHandlers$",
                value: function createConcreteHandlers$() {
                    var _this = this;
                    this.handler = {
                        setProfileData: __name(function(payload) {
                            return _async_to_generator(function() {
                                var handler;
                                return _ts_generator(this, function(_state) {
                                    switch(_state.label){
                                        case 0:
                                            return handler = new SetProfileDataHandler_default(this.base$, payload), [
                                                4,
                                                this.processHandlerAsync$(handler)
                                            ];
                                        case 1:
                                            return _state.sent(), [
                                                2
                                            ];
                                    }
                                });
                            }).call(_this);
                        }, "setProfileData"),
                        setMatchCustomData: __name(function(payload) {
                            return _async_to_generator(function() {
                                var handler;
                                return _ts_generator(this, function(_state) {
                                    switch(_state.label){
                                        case 0:
                                            return handler = new SetMatchCustomDataHandler_default(this.base$, payload), [
                                                4,
                                                this.processHandlerAsync$(handler)
                                            ];
                                        case 1:
                                            return _state.sent(), [
                                                2
                                            ];
                                    }
                                });
                            }).call(_this);
                        }, "setMatchCustomData"),
                        getMatchCustomData: __name(function() {
                            return _async_to_generator(function() {
                                var handler;
                                return _ts_generator(this, function(_state) {
                                    switch(_state.label){
                                        case 0:
                                            return handler = new GetMatchCustomDataHandler_default(this.base$), [
                                                4,
                                                this.processHandlerAsync$(handler)
                                            ];
                                        case 1:
                                            return _state.sent(), [
                                                2
                                            ];
                                    }
                                });
                            }).call(_this);
                        }, "getMatchCustomData"),
                        setLeaderboardScore: __name(function(payload) {
                            return _async_to_generator(function() {
                                var handler;
                                return _ts_generator(this, function(_state) {
                                    switch(_state.label){
                                        case 0:
                                            return handler = new SetLeaderboardScoreHandler_default(this.base$, payload), [
                                                4,
                                                this.processHandlerAsync$(handler)
                                            ];
                                        case 1:
                                            return _state.sent(), [
                                                2
                                            ];
                                    }
                                });
                            }).call(_this);
                        }, "setLeaderboardScore")
                    };
                }
            },
            {
                key: "createAPIHandler$",
                value: function createAPIHandler$() {
                    var APIConfig = {
                        appId: Configs2.AppId,
                        matchAPIHost: Configs2.ApiHost
                    };
                    this.api = new APIHandler_default(APIConfig);
                }
            },
            {
                key: "createGroupFlows$",
                value: function createGroupFlows$() {
                    this.group = {
                        join: new JoinGroupConcrete_default(this.codex, this),
                        start: new StartGroupConcrete_default(this.codex, this),
                        finish: new FinishGroupConcrete_default(this.codex, this)
                    };
                }
            },
            {
                key: "createSingleFlows$",
                value: function createSingleFlows$() {
                    this.single = {
                        start: new StartSingleConcrete_default(this.codex, this),
                        finish: new FinishSingleConcrete_default(this.codex, this)
                    };
                }
            },
            {
                key: "createStrategyFlows$",
                value: function createStrategyFlows$() {
                    this.strategy = {
                        start: new StartStrategyConcrete_default(this.codex, this),
                        finish: new FinishStrategyConcrete_default(this.codex, this)
                    };
                }
            },
            {
                key: "createContextFlows$",
                value: function createContextFlows$() {
                    this.context = {
                        choose: new ChooseContextConcrete_default(this.codex, this)
                    };
                }
            },
            {
                key: "createChallengeFlows$",
                value: function createChallengeFlows$() {
                    this.challenge = {
                        invite: new InviteFriendsConcrete_default(this.codex, this),
                        friend: new ChallengeFriendConcrete_default(this.codex, this),
                        join: new JoinChallengeMatchConcrete_default(this.codex, this),
                        await: new AwaitChallengeMatchConcrete_default(this.codex, this),
                        result: new ResultChallengeMatchConcrete_default(this.codex, this),
                        finish: new FinishChallengeMatchConcrete_default(this.codex, this),
                        continue: new ContinueChallengeMatchConcrete_default(this.codex, this)
                    };
                }
            },
            {
                key: "createTournamentFlows$",
                value: function createTournamentFlows$() {
                    this.tournament = {
                        join: new JoinTournamentConcrete_default(this.codex, this),
                        create: new CreateTournamentConcrete_default(this.codex, this),
                        finish: new FinishTournamentConcrete_default(this.codex, this),
                        continue: new ContinueTournamentConcrete_default(this.codex, this)
                    };
                }
            },
            {
                key: "processHandlerAsync$",
                value: function processHandlerAsync$(handler) {
                    var matchState = this.getMatchState();
                    return handler.processAsync(matchState);
                }
            }
        ]), _MatchPlugin;
    }(Ludex.Plugins.BasePlugin);
    __name(_MatchPlugin, "MatchPlugin");
    var MatchPlugin = _MatchPlugin, MatchPlugin_default = MatchPlugin;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var _Ludex_Utils39 = Ludex.Utils, V28 = _Ludex_Utils39.Valid, MESSAGE_INVALID5 = "is invalid", _MatchCustomDataDtos = function(BaseDtos_default) {
        function _MatchCustomDataDtos() {
            return _class_call_check(this, _MatchCustomDataDtos), _call_super(this, _MatchCustomDataDtos, arguments);
        }
        return _inherits(_MatchCustomDataDtos, BaseDtos_default), _create_class(_MatchCustomDataDtos, [
            {
                key: "setupData$",
                value: function setupData$(data) {
                    this.lazySetupData$(data);
                }
            },
            {
                key: "validateStructure$",
                value: function validateStructure$(data) {
                    this.lazyValidateStructure$(data);
                }
            },
            {
                key: "validateData$",
                value: function validateData$(data) {
                    this.lazyValidateData$(data);
                }
            },
            {
                key: "validateLevel",
                value: function validateLevel(level2) {
                    (!V28.isNumber(level2) || level2 < 0) && this.exception$("level", MESSAGE_INVALID5);
                }
            },
            {
                key: "validateRescued",
                value: function validateRescued(rescued) {
                    (!V28.isNumber(rescued) || rescued < 0) && this.exception$("rescued", MESSAGE_INVALID5);
                }
            },
            {
                key: "validateContextId",
                value: function validateContextId(contextId2) {
                    V28.isString(contextId2) || this.exception$("contextId", MESSAGE_INVALID5);
                }
            },
            {
                key: "validatePlayerId",
                value: function validatePlayerId(playerId2) {
                    V28.isString(playerId2) || this.exception$("playerId", MESSAGE_INVALID5);
                }
            },
            {
                key: "validateOpponentId",
                value: function validateOpponentId(opponentId) {
                    V28.isString(opponentId) || null === opponentId || this.exception$("opponentId", MESSAGE_INVALID5);
                }
            },
            {
                key: "validateTournamentId",
                value: function validateTournamentId(tournamentId) {
                    V28.isString(tournamentId) || null === tournamentId || this.exception$("tournamentId", MESSAGE_INVALID5);
                }
            },
            {
                key: "validateLeaderboardId",
                value: function validateLeaderboardId(leaderboardId) {
                    V28.isString(leaderboardId) || null === leaderboardId || this.exception$("leaderboardId", MESSAGE_INVALID5);
                }
            },
            {
                key: "toObject",
                value: function toObject() {
                    return _get(_get_prototype_of(_MatchCustomDataDtos.prototype), "toObject", this).call(this);
                }
            }
        ]), _MatchCustomDataDtos;
    }(BaseDtos_default);
    __name(_MatchCustomDataDtos, "MatchCustomDataDtos");
    var MatchCustomDataDtos = _MatchCustomDataDtos;
    MatchCustomDataDtos.makeStrict(), MatchCustomDataDtos.addDefaults(DefaultCustomData_default);
    var MatchCustomDataDtos_default = MatchCustomDataDtos;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var _Ludex_Utils40 = Ludex.Utils, V29 = _Ludex_Utils40.Valid, MESSAGE_INVALID6 = "is invalid", _MatchProfileDtos = function(BaseDtos_default) {
        function _MatchProfileDtos() {
            return _class_call_check(this, _MatchProfileDtos), _call_super(this, _MatchProfileDtos, arguments);
        }
        return _inherits(_MatchProfileDtos, BaseDtos_default), _create_class(_MatchProfileDtos, [
            {
                key: "setupData$",
                value: function setupData$(data) {
                    this.lazySetupData$(data);
                }
            },
            {
                key: "validateStructure$",
                value: function validateStructure$(data) {
                    this.lazyValidateStructure$(data);
                }
            },
            {
                key: "validateData$",
                value: function validateData$(data) {
                    this.lazyValidateData$(data);
                }
            },
            {
                key: "validateId",
                value: function validateId(id) {
                    V29.isString(id) && id || this.exception$("id", MESSAGE_INVALID6);
                }
            },
            {
                key: "validateName",
                value: function validateName(name2) {
                    V29.isString(name2) && name2 || this.exception$("name", MESSAGE_INVALID6);
                }
            },
            {
                key: "validatePhoto",
                value: function validatePhoto(photo2) {
                    V29.isString(photo2) || this.exception$("photo", MESSAGE_INVALID6);
                }
            },
            {
                key: "validateScore",
                value: function validateScore(score2) {
                    (!V29.isNumber(score2) || score2 < 0) && this.exception$("score", MESSAGE_INVALID6);
                }
            },
            {
                key: "validateBestScore",
                value: function validateBestScore(bestScore) {
                    (!V29.isNumber(bestScore) || bestScore < 0) && this.exception$("bestScore", MESSAGE_INVALID6);
                }
            },
            {
                key: "validateFinished",
                value: function validateFinished(finished) {
                    V29.isBoolean(finished) || this.exception$("finished", MESSAGE_INVALID6);
                }
            },
            {
                key: "toObject",
                value: function toObject() {
                    return _get(_get_prototype_of(_MatchProfileDtos.prototype), "toObject", this).call(this);
                }
            }
        ]), _MatchProfileDtos;
    }(BaseDtos_default);
    __name(_MatchProfileDtos, "MatchProfileDtos");
    var MatchProfileDtos = _MatchProfileDtos;
    MatchProfileDtos.addDefaults({
        id: "10",
        name: "Your Friend",
        photo: null,
        score: 0,
        bestScore: 0,
        finished: !1
    });
    var MatchProfileDtos_default = MatchProfileDtos;
    Ludex.Dtos.Match = {
        Data: RespMatchDataDtos_default,
        Profile: MatchProfileDtos_default,
        CustomData: MatchCustomDataDtos_default
    };
    var match_default = MatchPlugin_default;
    init_empty_script(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var _Ludex_Utils41 = Ludex.Utils, O24 = _Ludex_Utils41.Object, ApiHost = Ludex.Configs.ApiHost, getUrl = __name(function() {
        var url = "players";
        return GameSDK.isGameSDK("MsGames") ? url += "?platform=ms-games" : GameSDK.isGameSDK("Yandex") && (url += "?platform=yandex"), url;
    }, "getUrl"), updatePlayerProfileAsync = __name(function(payload) {
        return _async_to_generator(function() {
            var result3;
            return _ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        if (!ApiHost) return [
                            2,
                            {}
                        ];
                        return [
                            4,
                            post(getUrl(), payload, {}, ApiHost, 10)
                        ];
                    case 1:
                        if (result3 = _state.sent(), !O24.hasOwn(result3, "data")) return [
                            2,
                            {}
                        ];
                        return [
                            2,
                            result3.data || {}
                        ];
                }
            });
        })();
    }, "updatePlayerProfileAsync"), _Ludex_Utils42 = Ludex.Utils, A7 = _Ludex_Utils42.Array, O25 = _Ludex_Utils42.Object, V30 = _Ludex_Utils42.Valid, F4 = _Ludex_Utils42.Function, _Ludex_Configs9 = Ludex.Configs, AppId4 = _Ludex_Configs9.AppId, PLAYER_SETTINGS_CHANGED = Ludex.Events.PLAYER_SETTINGS_CHANGED, _PlayerPlugin = function(_Ludex_Plugins_BasePlugin) {
        function _PlayerPlugin() {
            var _this;
            return _class_call_check(this, _PlayerPlugin), _this = _call_super(this, _PlayerPlugin, arguments), _define_property(_this, "mutex$", F4.mutex()), _define_property(_this, "isLoggedIn$", !1), _this;
        }
        return _inherits(_PlayerPlugin, _Ludex_Plugins_BasePlugin), _create_class(_PlayerPlugin, [
            {
                key: "init",
                value: function init() {
                    this.codex.storage.addStorage("player", state_default);
                }
            },
            {
                key: "receiveData",
                value: function receiveData(playerInfo, playerData) {
                    var storage = this.codex.storage, playerId2 = playerInfo.playerId, name2 = playerInfo.name, photo2 = playerInfo.photo, locale2 = playerInfo.locale;
                    storage.setStorageData("player", "playerId", playerId2), storage.setStorageData("player", "name", name2), storage.setStorageData("player", "photo", photo2), storage.setStorageData("player", "locale", locale2), playerData && (this.setPlayerData(playerData), this.isLoggedIn$ = !playerData.isFirstLogin);
                }
            },
            {
                key: "syncDataToSDK",
                value: function syncDataToSDK() {
                    return _async_to_generator(function() {
                        var lock, playerData;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    return [
                                        4,
                                        this.mutex$.use("syncDataToSDK")
                                    ];
                                case 1:
                                    lock = _state.sent(), _state.label = 2;
                                case 2:
                                    return _state.trys.push([
                                        2,
                                        4,
                                        5,
                                        6
                                    ]), playerData = this.getPlayerData(), [
                                        4,
                                        GameSDK.player.setDataAsync(playerData)
                                    ];
                                case 3:
                                    return _state.sent(), [
                                        3,
                                        6
                                    ];
                                case 4:
                                    return console.warn(_state.sent()), [
                                        3,
                                        6
                                    ];
                                case 5:
                                    return lock.release(), [
                                        7
                                    ];
                                case 6:
                                    return [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "syncProfileToServer",
                value: function syncProfileToServer() {
                    return _async_to_generator(function() {
                        var storage, player, playerId2, name2, photo2, locale2, ASID, _ref, id;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    if (GameSDK.extra.isGuest) throw Error("Guest player cannot sync profile to server");
                                    if (storage = this.codex.storage, playerId2 = (player = this.getPlayer()).playerId, name2 = player.name, photo2 = player.photo, locale2 = player.locale, ASID = this.getPlayerASID(), !(!V30.isString(ASID) && "getASIDAsync" in GameSDK.player)) return [
                                        3,
                                        2
                                    ];
                                    return [
                                        4,
                                        F4.handleAsync(GameSDK.player.getASIDAsync(), 1e4)
                                    ];
                                case 1:
                                    id = (_ref = _sliced_to_array.apply(void 0, [
                                        _state.sent(),
                                        2
                                    ]))[0], !_ref[1] && id && (ASID = id, storage.setStorageData("player", "ASID", ASID)), _state.label = 2;
                                case 2:
                                    return [
                                        4,
                                        updatePlayerProfileAsync({
                                            appId: AppId4,
                                            ASID: ASID,
                                            playerId: playerId2,
                                            name: name2,
                                            photo: photo2,
                                            locale: locale2
                                        })
                                    ];
                                case 3:
                                    return _state.sent(), [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "setPlayerDataByName",
                value: function setPlayerDataByName(name2, data) {
                    this.setPlayerData(_define_property({}, name2, data));
                }
            },
            {
                key: "setPlayerData",
                value: function setPlayerData(data) {
                    this.codex.storage.setStorageData("player", "data", data), this.syncDataToSDK();
                }
            },
            {
                key: "setBestScore",
                value: function setBestScore(score2) {
                    this.setPlayerDataByName("score", score2);
                }
            },
            {
                key: "setSetting",
                value: function setSetting(name2, value) {
                    var event = this.codex.event;
                    this.setPlayerDataByName("settings", _define_property({}, name2, value)), event.emit(PLAYER_SETTINGS_CHANGED, {
                        name: name2,
                        value: value
                    });
                }
            },
            {
                key: "setGameData",
                value: function setGameData(data) {
                    var _this_getGameData, currentData = null != (_this_getGameData = this.getGameData()) ? _this_getGameData : {}, newData = O25.merge(currentData, data);
                    this.setPlayerDataByName("gameData", newData);
                }
            },
            {
                key: "requestConnectedPlayers",
                value: function requestConnectedPlayers() {
                    return _async_to_generator(function() {
                        var storage, connectedPlayers, connectedPlayersUnique, connectedPlayersKeyed;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    return storage = this.codex.storage, [
                                        4,
                                        GameSDK.player.getConnectedPlayersAsync()
                                    ];
                                case 1:
                                    if (connectedPlayers = _state.sent().map(function(player) {
                                        var playerId2 = player.getID(), name2 = player.getName(), photo2 = player.getPhoto();
                                        return playerId2 && name2 && photo2 ? new PlayerInfo_default({
                                            playerId: playerId2,
                                            name: name2,
                                            photo: photo2
                                        }).toObject() : null;
                                    }), (connectedPlayersUnique = A7.unique(connectedPlayers)).length < 1) return [
                                        2
                                    ];
                                    return connectedPlayersKeyed = O25.keyBy(connectedPlayersUnique, "playerId"), storage.setStorageData("player", "connectedPlayers", connectedPlayersKeyed), [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "getPlayer",
                value: function getPlayer() {
                    return this.codex.storage.getStorage("player");
                }
            },
            {
                key: "getPlayerId",
                value: function getPlayerId() {
                    var _storage_getStorageData;
                    return null != (_storage_getStorageData = this.codex.storage.getStorageData("player", "playerId")) ? _storage_getStorageData : "";
                }
            },
            {
                key: "getPlayerASID",
                value: function getPlayerASID() {
                    var _storage_getStorageData;
                    return null != (_storage_getStorageData = this.codex.storage.getStorageData("player", "ASID")) ? _storage_getStorageData : null;
                }
            },
            {
                key: "getPlayerLocale",
                value: function getPlayerLocale() {
                    var _storage_getStorageData;
                    return null != (_storage_getStorageData = this.codex.storage.getStorageData("player", "locale")) ? _storage_getStorageData : "";
                }
            },
            {
                key: "getPlayerData",
                value: function getPlayerData() {
                    var _storage_getStorageData;
                    return null != (_storage_getStorageData = this.codex.storage.getStorageData("player", "data")) ? _storage_getStorageData : state_default.data;
                }
            },
            {
                key: "getPlayerDataByKey",
                value: function getPlayerDataByKey(name2) {
                    var data = this.getPlayerData();
                    return O25.hasOwn(data, name2) ? data[name2] : null;
                }
            },
            {
                key: "getGameData",
                value: function getGameData() {
                    return this.getPlayerDataByKey("gameData");
                }
            },
            {
                key: "getPlayerSetting",
                value: function getPlayerSetting(name2) {
                    var settings2 = this.getPlayerSettings();
                    return O25.hasOwn(settings2, name2) ? settings2[name2] : null;
                }
            },
            {
                key: "getPlayerSettings",
                value: function getPlayerSettings() {
                    return this.getPlayerData().settings;
                }
            },
            {
                key: "isFirstLogin",
                value: function isFirstLogin() {
                    var _this_getPlayerDataByKey;
                    return null != (_this_getPlayerDataByKey = this.getPlayerDataByKey("isFirstLogin")) ? _this_getPlayerDataByKey : state_default.data.isFirstLogin;
                }
            },
            {
                key: "isFirstSession",
                value: function isFirstSession() {
                    return !this.isLoggedIn$;
                }
            },
            {
                key: "loggedIn",
                value: function loggedIn() {
                    this.setPlayerDataByName("isFirstLogin", !1);
                }
            },
            {
                key: "getBestScore",
                value: function getBestScore() {
                    return this.getPlayerData().score;
                }
            },
            {
                key: "getConnectedPlayers",
                value: function getConnectedPlayers() {
                    var _storage_getStorageData;
                    return null != (_storage_getStorageData = this.codex.storage.getStorageData("player", "connectedPlayers")) ? _storage_getStorageData : {};
                }
            },
            {
                key: "getConnectedPlayerIds",
                value: function getConnectedPlayerIds(limit, offset) {
                    return Object.keys(this.getConnectedPlayers()).slice(offset, offset + limit);
                }
            },
            {
                key: "getNotificationData",
                value: function getNotificationData() {
                    var _this_getPlayerDataByKey;
                    return null != (_this_getPlayerDataByKey = this.getPlayerDataByKey("notificationData")) ? _this_getPlayerDataByKey : state_default.data.notificationData;
                }
            }
        ]), _PlayerPlugin;
    }(Ludex.Plugins.BasePlugin);
    __name(_PlayerPlugin, "PlayerPlugin");
    var PlayerPlugin = _PlayerPlugin, PlayerPlugin_default = PlayerPlugin;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var Dtos13 = Ludex.Dtos, _Ludex_Utils43 = Ludex.Utils, V31 = _Ludex_Utils43.Valid, O26 = _Ludex_Utils43.Object, _state_default_data = state_default.data, score = _state_default_data.score, settings = _state_default_data.settings, gameData = _state_default_data.gameData, isFirstLogin = _state_default_data.isFirstLogin, missionsData = _state_default_data.missionsData, notificationData = _state_default_data.notificationData, dailyRewardedData = _state_default_data.dailyRewardedData, lastCallSwitchGame = _state_default_data.lastCallSwitchGame, MESSAGE_INVALID7 = "is invalid", _PlayerDataDtos = function(BaseDtos_default) {
        function _PlayerDataDtos() {
            return _class_call_check(this, _PlayerDataDtos), _call_super(this, _PlayerDataDtos, arguments);
        }
        return _inherits(_PlayerDataDtos, BaseDtos_default), _create_class(_PlayerDataDtos, [
            {
                key: "processNestedDtos$",
                value: function processNestedDtos$(data) {
                    V31.isObject(data) && (data.settings = new Dtos13.Player.Settings(data.settings).toObject(), data.gameData = new Dtos13.Player.GameData(data.gameData).toObject());
                }
            },
            {
                key: "setupData$",
                value: function setupData$(data) {
                    this.lazySetupData$(data);
                }
            },
            {
                key: "validateStructure$",
                value: function validateStructure$(data) {
                    this.lazyValidateStructure$(data);
                }
            },
            {
                key: "validateData$",
                value: function validateData$(data) {
                    this.lazyValidateData$(data);
                }
            },
            {
                key: "validateScore",
                value: function validateScore(score2) {
                    (!V31.isNumber(score2) || score2 < 0) && this.exception$("score", MESSAGE_INVALID7);
                }
            },
            {
                key: "validateSettings",
                value: function validateSettings(settings2) {
                    V31.isObject(settings2) || this.exception$("settings", MESSAGE_INVALID7);
                }
            },
            {
                key: "validateMissionsData",
                value: function validateMissionsData(missionsData2) {
                    V31.isObject(missionsData2) || this.exception$("missionsData", MESSAGE_INVALID7), "process" in missionsData2 && V31.isObject(missionsData2.process) || this.exception$("missionsData.process", MESSAGE_INVALID7);
                }
            },
            {
                key: "validateNotificationData",
                value: function validateNotificationData(notificationData2) {
                    V31.isObject(notificationData2) || this.exception$("notificationData", MESSAGE_INVALID7), "D1" in notificationData2 && V31.isObject(notificationData2.D1) || this.exception$("notificationData.D1", MESSAGE_INVALID7), "D2" in notificationData2 && V31.isObject(notificationData2.D2) || this.exception$("notificationData.D2", MESSAGE_INVALID7), "D3" in notificationData2 && V31.isObject(notificationData2.D3) || this.exception$("notificationData.D3", MESSAGE_INVALID7), "D4" in notificationData2 && V31.isObject(notificationData2.D4) || this.exception$("notificationData.D4", MESSAGE_INVALID7), "D5" in notificationData2 && V31.isObject(notificationData2.D5) || this.exception$("notificationData.D5", MESSAGE_INVALID7), "D6" in notificationData2 && V31.isObject(notificationData2.D6) || this.exception$("notificationData.D6", MESSAGE_INVALID7), "D7" in notificationData2 && V31.isObject(notificationData2.D7) || this.exception$("notificationData.D7", MESSAGE_INVALID7);
                }
            },
            {
                key: "validateGameData",
                value: function validateGameData(gameData2) {
                    V31.isObject(gameData2) || this.exception$("gameData", MESSAGE_INVALID7);
                }
            },
            {
                key: "validateIsFirstLogin",
                value: function validateIsFirstLogin(isFirstLogin2) {
                    V31.isBoolean(isFirstLogin2) || this.exception$("isFirstLogin", MESSAGE_INVALID7);
                }
            },
            {
                key: "validateDailyRewardedData",
                value: function validateDailyRewardedData(dailyRewardedData2) {
                    V31.isObject(dailyRewardedData2) || this.exception$("dailyRewardedData", MESSAGE_INVALID7);
                }
            },
            {
                key: "validateLastCallSwitchGame",
                value: function validateLastCallSwitchGame(lastCallSwitchGame2) {
                    V31.isNumber(lastCallSwitchGame2) || this.exception$("lastCallSwitchGame", MESSAGE_INVALID7), lastCallSwitchGame2 < 0 && this.exception$("lastCallSwitchGame", MESSAGE_INVALID7);
                }
            },
            {
                key: "toObject",
                value: function toObject() {
                    return _get(_get_prototype_of(_PlayerDataDtos.prototype), "toObject", this).call(this);
                }
            }
        ]), _PlayerDataDtos;
    }(BaseDtos_default);
    __name(_PlayerDataDtos, "PlayerDataDtos");
    var PlayerDataDtos = _PlayerDataDtos;
    PlayerDataDtos.addDefaults({
        score: score,
        settings: settings,
        gameData: gameData,
        isFirstLogin: isFirstLogin,
        missionsData: missionsData,
        notificationData: notificationData,
        dailyRewardedData: dailyRewardedData,
        lastCallSwitchGame: lastCallSwitchGame
    });
    var PlayerData_default = PlayerDataDtos;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var _Ludex_Utils44 = Ludex.Utils, V32 = _Ludex_Utils44.Valid, _state_default_data_gameData = state_default.data.gameData, level = _state_default_data_gameData.level, coins = _state_default_data_gameData.coins, _PlayerGameDataDtos = function(BaseDtos_default) {
        function _PlayerGameDataDtos() {
            return _class_call_check(this, _PlayerGameDataDtos), _call_super(this, _PlayerGameDataDtos, arguments);
        }
        return _inherits(_PlayerGameDataDtos, BaseDtos_default), _create_class(_PlayerGameDataDtos, [
            {
                key: "setupData$",
                value: function setupData$(data) {
                    this.lazySetupData$(data);
                }
            },
            {
                key: "validateStructure$",
                value: function validateStructure$(data) {
                    this.lazyValidateStructure$(data);
                }
            },
            {
                key: "validateData$",
                value: function validateData$(data) {
                    this.lazyValidateData$(data);
                }
            },
            {
                key: "validateLevel",
                value: function validateLevel(level2) {
                    (!V32.isNumber(level2) || level2 < 0) && this.exception$("level", "is invalid");
                }
            },
            {
                key: "validateCoins",
                value: function validateCoins(coins2) {
                    (!V32.isNumber(coins2) || coins2 < 0) && this.exception$("coins", "is invalid");
                }
            },
            {
                key: "toObject",
                value: function toObject() {
                    return _get(_get_prototype_of(_PlayerGameDataDtos.prototype), "toObject", this).call(this);
                }
            }
        ]), _PlayerGameDataDtos;
    }(BaseDtos_default);
    __name(_PlayerGameDataDtos, "PlayerGameDataDtos");
    var PlayerGameDataDtos = _PlayerGameDataDtos;
    PlayerGameDataDtos.addDefaults({
        level: level,
        coins: coins
    });
    var PlayerGameData_default = PlayerGameDataDtos;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var _Ludex_Utils45 = Ludex.Utils, V33 = _Ludex_Utils45.Valid, _state_default_data_settings = state_default.data.settings, sound = _state_default_data_settings.sound, music = _state_default_data_settings.music, vibrate = _state_default_data_settings.vibrate, language = _state_default_data_settings.language, MESSAGE_INVALID8 = "is invalid", _PlayerSettingsDtos = function(BaseDtos_default) {
        function _PlayerSettingsDtos() {
            return _class_call_check(this, _PlayerSettingsDtos), _call_super(this, _PlayerSettingsDtos, arguments);
        }
        return _inherits(_PlayerSettingsDtos, BaseDtos_default), _create_class(_PlayerSettingsDtos, [
            {
                key: "setupData$",
                value: function setupData$(data) {
                    this.lazySetupData$(data);
                }
            },
            {
                key: "validateStructure$",
                value: function validateStructure$(data) {
                    this.lazyValidateStructure$(data);
                }
            },
            {
                key: "validateData$",
                value: function validateData$(data) {
                    this.lazyValidateData$(data);
                }
            },
            {
                key: "validateSound",
                value: function validateSound(sound2) {
                    V33.isBoolean(sound2) || this.exception$("sound", MESSAGE_INVALID8);
                }
            },
            {
                key: "validateMusic",
                value: function validateMusic(music2) {
                    V33.isBoolean(music2) || this.exception$("music", MESSAGE_INVALID8);
                }
            },
            {
                key: "validateVibrate",
                value: function validateVibrate(vibrate2) {
                    V33.isBoolean(vibrate2) || this.exception$("vibrate", MESSAGE_INVALID8);
                }
            },
            {
                key: "validateLanguage",
                value: function validateLanguage(language2) {
                    V33.isString(language2) && language2 || this.exception$("language", MESSAGE_INVALID8);
                }
            },
            {
                key: "toObject",
                value: function toObject() {
                    return _get(_get_prototype_of(_PlayerSettingsDtos.prototype), "toObject", this).call(this);
                }
            }
        ]), _PlayerSettingsDtos;
    }(BaseDtos_default);
    __name(_PlayerSettingsDtos, "PlayerSettingsDtos");
    var PlayerSettingsDtos = _PlayerSettingsDtos;
    PlayerSettingsDtos.addDefaults({
        sound: sound,
        music: music,
        vibrate: vibrate,
        language: language
    });
    var PlayerSettings_default = PlayerSettingsDtos;
    Ludex.Dtos.Player = {
        Info: PlayerInfo_default,
        Data: PlayerData_default,
        Settings: PlayerSettings_default,
        GameData: PlayerGameData_default
    };
    var player_default = PlayerPlugin_default;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var _Ludex_Configs10 = Ludex.Configs, ApiHost2 = _Ludex_Configs10.ApiHost, Mockup2 = _Ludex_Configs10.Mockup, _Ludex_Utils46 = Ludex.Utils, O27 = _Ludex_Utils46.Object, S7 = _Ludex_Utils46.String, _ProfileAPI = function() {
        function _ProfileAPI() {
            _class_call_check(this, _ProfileAPI), _define_property(this, "mockAPI$", void 0);
        }
        return _create_class(_ProfileAPI, [
            {
                key: "initMockAPI$",
                value: function initMockAPI$() {
                    return _async_to_generator(function() {
                        var ProfileAPIMock;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    if (this.mockAPI$) return [
                                        2
                                    ];
                                    return [
                                        4,
                                        Promise.resolve().then(function() {
                                            return init_empty_script(), empty_script_exports;
                                        })
                                    ];
                                case 1:
                                    if ("function" != typeof (ProfileAPIMock = _state.sent().default)) throw Error("Cannot load ProfileAPIMock");
                                    return this.mockAPI$ = new ProfileAPIMock(), [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "getPlayersAsync",
                value: function getPlayersAsync(payload) {
                    return _async_to_generator(function() {
                        var params, result3;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    if (params = S7.params(payload), !Mockup2.Profile.Enabled) return [
                                        3,
                                        3
                                    ];
                                    return [
                                        4,
                                        this.initMockAPI$()
                                    ];
                                case 1:
                                    return _state.sent(), [
                                        4,
                                        this.mockAPI$.getPlayersAsync(payload)
                                    ];
                                case 2:
                                    return result3 = _state.sent(), [
                                        3,
                                        5
                                    ];
                                case 3:
                                    if (!ApiHost2) return [
                                        2,
                                        []
                                    ];
                                    return [
                                        4,
                                        get("players?".concat(params), {}, ApiHost2)
                                    ];
                                case 4:
                                    result3 = _state.sent(), _state.label = 5;
                                case 5:
                                    if (!O27.hasOwn(result3, "data") || !Array.isArray(result3.data)) return [
                                        2,
                                        []
                                    ];
                                    return [
                                        2,
                                        result3.data
                                    ];
                            }
                        });
                    }).call(this);
                }
            }
        ]), _ProfileAPI;
    }();
    __name(_ProfileAPI, "ProfileAPI");
    var ProfileAPI = _ProfileAPI, ProfileAPI_default = ProfileAPI;
    init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var initState7 = {
        profiles: {},
        profileIds: []
    }, state_default7 = initState7, Utils8 = Ludex.Utils, Dtos14 = Ludex.Dtos, A8 = Utils8.Array, V34 = Utils8.Valid, O28 = Utils8.Object, F5 = Utils8.Function, _ProfilePlugin = function(_Ludex_Plugins_BasePlugin) {
        function _ProfilePlugin() {
            var _this;
            return _class_call_check(this, _ProfilePlugin), _this = _call_super(this, _ProfilePlugin, arguments), _define_property(_this, "profileAPI$", new ProfileAPI_default()), _this;
        }
        return _inherits(_ProfilePlugin, _Ludex_Plugins_BasePlugin), _create_class(_ProfilePlugin, [
            {
                key: "init",
                value: function init() {
                    this.codex.storage.addStorage("profile", state_default7);
                }
            },
            {
                key: "requestProfiles",
                value: function requestProfiles(playerIds) {
                    return _async_to_generator(function() {
                        var _this, profileIds, needPlayerIds, profilePromises, result3, profiles;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    if (_this = this, profileIds = this.getProfileIds(), (needPlayerIds = A8.difference(playerIds, profileIds)).length < 1) return [
                                        2
                                    ];
                                    return profilePromises = A8.chunk(needPlayerIds, 400).map(function(playerIds2) {
                                        return _this.profileAPI$.getPlayersAsync({
                                            playerIds: playerIds2
                                        });
                                    }), [
                                        4,
                                        F5.allSettled(profilePromises)
                                    ];
                                case 1:
                                    if (result3 = _state.sent().reduce(function(acc, response) {
                                        return "fulfilled" === response.status ? acc.concat(response.value) : acc;
                                    }, []), !this.validateProfilesResponse$(result3)) return [
                                        2
                                    ];
                                    return profiles = this.convertToProfiles$(result3), this.setProfiles$(profiles), [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "getProfile",
                value: function getProfile(playerId2) {
                    var profile = this.getProfiles()[playerId2];
                    return null != profile ? profile : null;
                }
            },
            {
                key: "getProfiles",
                value: function getProfiles() {
                    var _storage_getStorageData;
                    return null != (_storage_getStorageData = this.codex.storage.getStorageData("profile", "profiles")) ? _storage_getStorageData : state_default7.profiles;
                }
            },
            {
                key: "setProfiles$",
                value: function setProfiles$(profiles) {
                    var storage = this.codex.storage;
                    storage.setStorageData("profile", "profiles", profiles), storage.setStorageData("profile", "profileIds", Object.keys(profiles));
                }
            },
            {
                key: "getProfileIds",
                value: function getProfileIds() {
                    var _storage_getStorageData;
                    return null != (_storage_getStorageData = this.codex.storage.getStorageData("profile", "profileIds")) ? _storage_getStorageData : [];
                }
            },
            {
                key: "validateProfilesResponse$",
                value: function validateProfilesResponse$(profiles) {
                    return !!Array.isArray(profiles) && !(profiles.length < 1);
                }
            },
            {
                key: "convertToProfiles$",
                value: function convertToProfiles$(result3) {
                    var profiles = {}, _iteratorNormalCompletion = !0, _didIteratorError = !1, _iteratorError = void 0;
                    try {
                        for(var _step, _iterator = result3[Symbol.iterator](); !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = !0){
                            var data = _step.value;
                            O28.hasOwn(data, "playerId") && V34.isString(data.playerId) && (profiles[data.playerId] = new Dtos14.Player.Info(data).toObject());
                        }
                    } catch (err) {
                        _didIteratorError = !0, _iteratorError = err;
                    } finally{
                        try {
                            _iteratorNormalCompletion || null == _iterator.return || _iterator.return();
                        } finally{
                            if (_didIteratorError) throw _iteratorError;
                        }
                    }
                    return profiles;
                }
            }
        ]), _ProfilePlugin;
    }(Ludex.Plugins.BasePlugin);
    __name(_ProfilePlugin, "ProfilePlugin");
    var ProfilePlugin = _ProfilePlugin, ProfilePlugin_default = ProfilePlugin, profile_default = ProfilePlugin_default;
    init_empty_script(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var gameName2 = "Save The Pets", _Ludex_Utils47 = Ludex.Utils, O29 = _Ludex_Utils47.Object, V35 = _Ludex_Utils47.Valid, B4 = _Ludex_Utils47.Browser, _StoragePlugin = function(_Ludex_Plugins_BasePlugin) {
        function _StoragePlugin(game) {
            var _this;
            return _class_call_check(this, _StoragePlugin), _define_property(_this = _call_super(this, _StoragePlugin, [
                game
            ]), "storages$", void 0), _define_property(_this, "storageLocalKeys$", {}), _this.storages$ = {}, _this;
        }
        return _inherits(_StoragePlugin, _Ludex_Plugins_BasePlugin), _create_class(_StoragePlugin, [
            {
                key: "addStorage",
                value: function addStorage(name2, initState8) {
                    var useWebStorage = arguments.length > 2 && void 0 !== arguments[2] && arguments[2];
                    return _async_to_generator(function() {
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    if (this.storages$[name2] = initState8, !useWebStorage) return [
                                        3,
                                        2
                                    ];
                                    return [
                                        4,
                                        this.initFromWebStorage$(name2, initState8)
                                    ];
                                case 1:
                                    _state.sent(), _state.label = 2;
                                case 2:
                                    return console.debug("addStorage", name2, initState8), [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "initFromWebStorage$",
                value: function initFromWebStorage$(name2, initState8) {
                    return _async_to_generator(function() {
                        var data, keys, _iteratorNormalCompletion, _didIteratorError, _iteratorError, _iterator, _step, key;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    return this.storageLocalKeys$[name2] = !0, [
                                        4,
                                        B4.getIndexedDB("".concat(gameName2, "_S_").concat(name2))
                                    ];
                                case 1:
                                    if (data = _state.sent(), !V35.isObject(data)) return [
                                        2
                                    ];
                                    keys = Object.keys(initState8), _iteratorNormalCompletion = !0, _didIteratorError = !1, _iteratorError = void 0;
                                    try {
                                        for(_iterator = keys[Symbol.iterator](); !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = !0)key = _step.value, O29.hasOwn(data, key) && _type_of(initState8[key]) === _type_of(data[key]) && this.setStorageData(name2, key, data[key]);
                                    } catch (err) {
                                        _didIteratorError = !0, _iteratorError = err;
                                    } finally{
                                        try {
                                            _iteratorNormalCompletion || null == _iterator.return || _iterator.return();
                                        } finally{
                                            if (_didIteratorError) throw _iteratorError;
                                        }
                                    }
                                    return [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "initStorageData",
                value: function initStorageData(storage, field, initData) {
                    this.storages$[storage][field] = initData;
                }
            },
            {
                key: "setStorageData",
                value: function setStorageData(storage, field, data) {
                    var nextData;
                    if (V35.isObject(data)) {
                        var currentData = this.getStorageData(storage, field);
                        nextData = O29.merge(currentData, data);
                    } else nextData = data;
                    this.storages$[storage][field] = nextData;
                }
            },
            {
                key: "getStorageData",
                value: function getStorageData(storage, field) {
                    return this.getStorage(storage)[field];
                }
            },
            {
                key: "getStorage",
                value: function getStorage(storage) {
                    return this.storages$[storage];
                }
            },
            {
                key: "updateToWebStorage",
                value: function updateToWebStorage(storage) {
                    var flushMemory = arguments.length > 1 && void 0 !== arguments[1] && arguments[1];
                    return _async_to_generator(function() {
                        var _this;
                        return _ts_generator(this, function(_state) {
                            return _this = this, this.storageLocalKeys$[storage] && requestAnimationFrame(function() {
                                return _this.saveToWebStorage$(storage, flushMemory);
                            }), [
                                2
                            ];
                        });
                    }).call(this);
                }
            },
            {
                key: "saveToWebStorage$",
                value: function saveToWebStorage$(storage) {
                    var flushMemory = arguments.length > 1 && void 0 !== arguments[1] && arguments[1];
                    return _async_to_generator(function() {
                        var data;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    return data = this.getStorage(storage), [
                                        4,
                                        B4.setIndexedDB("".concat(gameName2, "_S_").concat(storage), data)
                                    ];
                                case 1:
                                    return _state.sent(), flushMemory && O29.assign(this.storages$[storage], {}), [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            }
        ]), _StoragePlugin;
    }(Ludex.Plugins.BasePlugin);
    __name(_StoragePlugin, "StoragePlugin");
    var StoragePlugin = _StoragePlugin, StoragePlugin_default = StoragePlugin, storage_default = StoragePlugin_default;
    init_empty_script(), init_empty_script(), init_empty_script(), init_empty_script(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var _Ludex_Utils48 = Ludex.Utils, O30 = _Ludex_Utils48.Object, _Ludex_Plugins5 = Ludex.Plugins, _Ludex_Plugins_Ads = _Ludex_Plugins5.Ads, Status = _Ludex_Plugins_Ads.Status, Types2 = _Ludex_Plugins_Ads.Types, AdError2 = _Ludex_Plugins_Ads.AdError, AdInstance3 = _Ludex_Plugins_Ads.AdInstance, _NormalAdInstance = function(AdInstance3) {
        function _NormalAdInstance(type, placementId) {
            var _this;
            return _class_call_check(this, _NormalAdInstance), _define_property(_this = _call_super(this, _NormalAdInstance, [
                type,
                placementId
            ]), "service$", void 0), _define_property(_this, "instance$", void 0), _define_property(_this, "instanceQueue$", []), _this.service$ = GameSDK.getSDKName(), _this.instance$ = null, _this;
        }
        return _inherits(_NormalAdInstance, AdInstance3), _create_class(_NormalAdInstance, [
            {
                key: "setInstance",
                value: function setInstance(instance) {
                    instance || this.setStatus(Status.IDLE), this.instance$ = instance;
                }
            },
            {
                key: "loadAsync",
                value: function loadAsync() {
                    return _async_to_generator(function() {
                        var instance, error, _self_codex_analytics;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    if (console.debug("AdInstance", "loadAsync called", {
                                        type: this.type,
                                        status: this.status,
                                        service: this.service$,
                                        placementId: this.placementId
                                    }), this.instance$ && this.status === Status.FILLED) return [
                                        2
                                    ];
                                    if (this.status !== Status.IDLE) throw new AdError2("AD_NOT_READY", "Ad is not ready.");
                                    _state.label = 1;
                                case 1:
                                    return _state.trys.push([
                                        1,
                                        4,
                                        ,
                                        5
                                    ]), [
                                        4,
                                        this.createInstanceByType$(this.type)
                                    ];
                                case 2:
                                    if (instance = _state.sent(), this.setInstance(instance), null === this.instance$) throw new AdError2("AD_INSTANCE_NOT_INITIATED", "Ad instance didn't initiated.");
                                    return this.setStatus(Status.LOADING), [
                                        4,
                                        this.instance$.loadAsync()
                                    ];
                                case 3:
                                    return _state.sent(), this.setStatus(Status.FILLED), console.debug("AdInstance", "loadAsync success", {
                                        type: this.type,
                                        status: this.status,
                                        service: this.service$
                                    }), this.logAdLoad$(), [
                                        3,
                                        5
                                    ];
                                case 4:
                                    throw error = _state.sent(), console.warn("AdInstance", "loadAsync failed", {
                                        type: this.type,
                                        status: this.status,
                                        service: this.service$
                                    }), console.warn(error), this.setStatus(Status.IDLE), _instanceof(error, Object) && "code" in error && "INVALID_PARAM" === error.code && this.setInstance(null), this.instance$ && this.pushInstanceToQueue$(this.instance$), null == (_self_codex_analytics = self.codex.analytics) || _self_codex_analytics.loadAdFail({
                                        type: this.type,
                                        service: this.service$
                                    }), error;
                                case 5:
                                    return [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "showAsync",
                value: function showAsync() {
                    return _async_to_generator(function() {
                        var logShowed, _self_codex_analytics, error, _self_codex_analytics1;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    if (console.debug("AdInstance", "showAsync called", {
                                        type: this.type,
                                        status: this.status,
                                        service: this.service$
                                    }), this.status !== Status.FILLED) throw new AdError2("AD_NOT_FILLED", "Ad is not filled.");
                                    if (null === this.instance$) throw new AdError2("AD_INSTANCE_NOT_INITIATED", "Ad instance didn't initiated.");
                                    logShowed = !1, _state.label = 1;
                                case 1:
                                    return _state.trys.push([
                                        1,
                                        3,
                                        4,
                                        5
                                    ]), this.setStatus(Status.SHOWING), null == (_self_codex_analytics = self.codex.analytics) || _self_codex_analytics.showingAd({
                                        type: this.type,
                                        service: this.service$
                                    }), [
                                        4,
                                        this.instance$.showAsync()
                                    ];
                                case 2:
                                    return _state.sent(), logShowed = !0, this.setInstance(null), console.debug("AdInstance", "showAsync success", {
                                        type: this.type,
                                        status: this.status,
                                        service: this.service$
                                    }), [
                                        3,
                                        5
                                    ];
                                case 3:
                                    throw error = _state.sent(), console.warn("AdInstance", "showAsync failed", {
                                        type: this.type,
                                        status: this.status,
                                        service: this.service$,
                                        error: error
                                    }), O30.hasOwn(error, "code") && ("AD_NOT_LOADED" === error.code && this.setStatus(Status.IDLE), [
                                        "INVALID_PARAM",
                                        "INVALID_OPERATION",
                                        "USER_INPUT"
                                    ].indexOf("".concat(error.code)) > -1 && this.setInstance(null), "USER_INPUT" === error.code && (logShowed = !0)), this.status === Status.SHOWING && this.setInstance(null), error;
                                case 4:
                                    return logShowed ? this.logAdShown$() : null == (_self_codex_analytics1 = self.codex.analytics) || _self_codex_analytics1.showAdFail({
                                        type: this.type,
                                        service: this.service$
                                    }), [
                                        7
                                    ];
                                case 5:
                                    return [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "createInstanceByType$",
                value: function createInstanceByType$(type) {
                    return _async_to_generator(function() {
                        var error;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    return _state.trys.push([
                                        0,
                                        2,
                                        ,
                                        3
                                    ]), [
                                        4,
                                        this.getAdInstanceByType$(type)
                                    ];
                                case 1:
                                    return [
                                        2,
                                        _state.sent()
                                    ];
                                case 2:
                                    if (error = _state.sent(), !O30.hasOwn(error, "code")) return [
                                        2,
                                        null
                                    ];
                                    if ("ADS_TOO_MANY_INSTANCES" === error.code) return [
                                        2,
                                        this.getAdInstanceFailed$()
                                    ];
                                    return [
                                        2,
                                        null
                                    ];
                                case 3:
                                    return [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "getAdInstanceByType$",
                value: function getAdInstanceByType$(type) {
                    return _async_to_generator(function() {
                        return _ts_generator(this, function(_state) {
                            switch(type){
                                case Types2.REWARDED_VIDEO:
                                    return [
                                        2,
                                        GameSDK.getRewardedVideoAsync(this.placementId)
                                    ];
                                case Types2.INTERSTITIAL:
                                    return [
                                        2,
                                        GameSDK.getInterstitialAdAsync(this.placementId)
                                    ];
                                case Types2.REWARDED_INTERSTITIAL:
                                    return [
                                        2,
                                        GameSDK.getRewardedInterstitialAsync(this.placementId)
                                    ];
                                default:
                                    return [
                                        2,
                                        null
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "getAdInstanceFailed$",
                value: function getAdInstanceFailed$() {
                    if (!("canLoadAd" in GameSDK.extra)) return this.instanceQueue$.shift() || null;
                    var _iteratorNormalCompletion = !0, _didIteratorError = !1, _iteratorError = void 0;
                    try {
                        for(var _step, _iterator = this.instanceQueue$[Symbol.iterator](); !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = !0){
                            var instance = _step.value;
                            if (GameSDK.extra.canLoadAd(instance)) return this.instanceQueue$.splice(this.instanceQueue$.indexOf(instance), 1), instance;
                        }
                    } catch (err) {
                        _didIteratorError = !0, _iteratorError = err;
                    } finally{
                        try {
                            _iteratorNormalCompletion || null == _iterator.return || _iterator.return();
                        } finally{
                            if (_didIteratorError) throw _iteratorError;
                        }
                    }
                    return null;
                }
            },
            {
                key: "logAdLoad$",
                value: function logAdLoad$() {
                    var _self_codex_analytics, _self_codex_analytics1, _self_codex_analytics2;
                    switch(this.type){
                        case Types2.INTERSTITIAL:
                            null == (_self_codex_analytics = self.codex.analytics) || _self_codex_analytics.loadInterstitialAd({
                                service: this.service$
                            });
                            break;
                        case Types2.REWARDED_VIDEO:
                            null == (_self_codex_analytics1 = self.codex.analytics) || _self_codex_analytics1.loadRewardedVideoAd({
                                service: this.service$
                            });
                            break;
                        case Types2.REWARDED_INTERSTITIAL:
                            null == (_self_codex_analytics2 = self.codex.analytics) || _self_codex_analytics2.loadRewardedInterstitialAd({
                                service: this.service$
                            });
                    }
                }
            },
            {
                key: "logAdShown$",
                value: function logAdShown$() {
                    var _self_codex_analytics, _self_codex_analytics1, _self_codex_analytics2;
                    switch(this.type){
                        case Types2.INTERSTITIAL:
                            null == (_self_codex_analytics = self.codex.analytics) || _self_codex_analytics.showInterstitialAd({
                                service: this.service$
                            });
                            break;
                        case Types2.REWARDED_VIDEO:
                            null == (_self_codex_analytics1 = self.codex.analytics) || _self_codex_analytics1.showRewardedVideoAd({
                                service: this.service$
                            });
                            break;
                        case Types2.REWARDED_INTERSTITIAL:
                            null == (_self_codex_analytics2 = self.codex.analytics) || _self_codex_analytics2.showRewardedInterstitialAd({
                                service: this.service$
                            });
                    }
                }
            },
            {
                key: "pushInstanceToQueue$",
                value: function pushInstanceToQueue$(instance) {
                    this.instanceQueue$.push(instance);
                }
            }
        ]), _NormalAdInstance;
    }(AdInstance3);
    __name(_NormalAdInstance, "NormalAdInstance");
    var NormalAdInstance = _NormalAdInstance, NormalAdInstance_default = NormalAdInstance;
    init_empty_script(), init_empty_script(), init_empty_script(), init_empty_script(), init_empty_script(), init_define_GAME_CONFIG(), init_define_GAME_SDK_CONFIG(), init_console(), init_track_events(), init_track_errors(), init_GameSDK2(), init_progress(), init_init_core(), init_navigator(), init_performance(), init_browser(), init_init(), init_google_analytics(), init_youtube();
    var _Ludex_Plugins_Analytics = Ludex.Plugins.Analytics, BaseAnalytics2 = _Ludex_Plugins_Analytics.BaseAnalytics, Events8 = _Ludex_Plugins_Analytics.Events, excludeEvents = [
        Events8.SCREEN_OPEN
    ], _Ludex_Utils49 = Ludex.Utils, A9 = _Ludex_Utils49.Array, _GoogleAnalytics = function(BaseAnalytics2) {
        function _GoogleAnalytics(ld, options) {
            return _class_call_check(this, _GoogleAnalytics), _call_super(this, _GoogleAnalytics, [
                ld,
                "GoogleAnalytics",
                __spreadProps(__spreadValues({}, options), {
                    color: "#E35335"
                })
            ]);
        }
        return _inherits(_GoogleAnalytics, BaseAnalytics2), _create_class(_GoogleAnalytics, [
            {
                key: "processEvent$",
                value: function processEvent$(event, payload) {
                    A9.has(excludeEvents, event) || (this.customEvent$(event, payload), gtag("event", event, payload));
                }
            },
            {
                key: "customEvent$",
                value: function customEvent$(event, payload) {
                    switch(event){
                        case Events8.AD_LOAD:
                        case Events8.AD_LOAD_FAILED:
                        case Events8.AD_SHOW:
                        case Events8.AD_SHOW_FAILED:
                        case Events8.AD_SHOWING:
                        case Events8.USE_ITEM:
                        case Events8.EARN_ITEM:
                            this.addLevelName$(payload);
                    }
                }
            },
            {
                key: "addLevelName$",
                value: function addLevelName$(payload) {
                    if (payload && (null == (_this_codex = this.codex) ? void 0 : _this_codex.match)) {
                        var _this_codex, level2 = this.codex.match.getMatchState().customData.level;
                        level2 && !(level2 < 0) && (payload.level_name = this.getLevelName(level2));
                    }
                }
            }
        ]), _GoogleAnalytics;
    }(BaseAnalytics2);
    __name(_GoogleAnalytics, "GoogleAnalytics");
    var GoogleAnalytics = _GoogleAnalytics, GoogleAnalytics_default = GoogleAnalytics;
    init_empty_script(), init_empty_script(), init_empty_script(), init_empty_script(), init_accessBlocker();
    var NODE_ENV = "development", BUILD_VERSION = 4, Dtos15 = Ludex.Dtos, Events9 = Ludex.Events, _Ludex_Configs11 = Ludex.Configs, AppId5 = _Ludex_Configs11.AppId, Ads = _Ludex_Configs11.Ads, Context4 = _Ludex_Configs11.Context, Debugger = _Ludex_Configs11.Debugger, Firebase = _Ludex_Configs11.Firebase, Analytics3 = _Ludex_Configs11.Analytics, Notification = _Ludex_Configs11.Notification, RemoteConfig = _Ludex_Configs11.RemoteConfig, PerformanceMonitor = _Ludex_Configs11.PerformanceMonitor, AdaptivePerformance = _Ludex_Configs11.AdaptivePerformance, Plugins2 = Ludex.Plugins, _Ludex_Utils50 = Ludex.Utils, D3 = _Ludex_Utils50.Device, O32 = _Ludex_Utils50.Object, J5 = _Ludex_Utils50.Json, S8 = _Ludex_Utils50.String, V36 = _Ludex_Utils50.Valid, T3 = _Ludex_Utils50.Time, F6 = _Ludex_Utils50.Function, Mark2 = _Ludex_Utils50.Mark, _MagicCodex = function(codex_default) {
        function _MagicCodex() {
            var _this, _this1;
            return _class_call_check(this, _MagicCodex), _this = _call_super(this, _MagicCodex, arguments), _this1 = _this, _define_property(_this, "markName$", "Core Initialize"), _define_property(_this, "modulePlugins$", []), _define_property(_this, "processContextSession$", __name(function() {
                return _async_to_generator(function() {
                    var _this_mark, _this_context, _this_context1, _this_context2, _this_mark1, contextSessionType, error, _this_monitorError;
                    return _ts_generator(this, function(_state) {
                        switch(_state.label){
                            case 0:
                                if (!Context4.Enabled) return [
                                    2
                                ];
                                _state.label = 1;
                            case 1:
                                return _state.trys.push([
                                    1,
                                    3,
                                    ,
                                    4
                                ]), null == (_this_mark = _this1.mark) || _this_mark.putAttr(_this1.markName$, "Step", "Process Context Payload"), [
                                    4,
                                    null == (_this_context = _this1.context) ? void 0 : _this_context.detectContextSessionType()
                                ];
                            case 2:
                                return _state.sent(), null == (_this_context1 = _this1.context) || _this_context1.detectContextGameMode(), contextSessionType = null == (_this_context2 = _this1.context) ? void 0 : _this_context2.getSessionContextType(), null == (_this_mark1 = _this1.mark) || _this_mark1.putAttr(_this1.markName$, "Context Mode", null != contextSessionType ? contextSessionType : "unknown"), console.debug("Ludex start completed", contextSessionType), [
                                    3,
                                    4
                                ];
                            case 3:
                                return console.warn("Error processing context session:", error = _state.sent()), null == (_this_monitorError = _this1.monitorError) || _this_monitorError.sendException(F6.toError(error)), [
                                    3,
                                    4
                                ];
                            case 4:
                                return [
                                    2
                                ];
                        }
                    });
                })();
            }, "processContextSession$")), _define_property(_this, "addDevPlugins$", __name(function() {
                var _this_player, ListPlayerDevIds = Debugger.ListPlayerDevIds, playerId2 = null == (_this_player = _this.player) ? void 0 : _this_player.getPlayerId();
                "development" !== NODE_ENV && playerId2 && 0 > ListPlayerDevIds.indexOf(playerId2) ? console.warn("PlayerId is not in the list of dev IDs", playerId2) : (_this.addConsolePlugin$(), _this.addProfilerPlugin$());
            }, "addDevPlugins$")), _define_property(_this, "handleProtectGameInstance$", __name(function() {
                _this.event.getEventEmitCount(CoreEvents_default.MODULE_PLUGIN_READY) < _this.modulePlugins$.length || (window.codex = Object.freeze(window.codex), console.warn("window.codex", window.codex), accessBlocker_default(window, "codex"));
            }, "handleProtectGameInstance$")), _define_property(_this, "initCanvasRecorderPlugin$", __name(function() {
                if (_this.canvasRecorder) {
                    var CanvasRecorder = Debugger.CanvasRecorder, _CanvasRecorder_Options = CanvasRecorder.Options, Type = _CanvasRecorder_Options.Type, Quality = _CanvasRecorder_Options.Quality, RecordFps = _CanvasRecorder_Options.RecordFps, SyncFps = _CanvasRecorder_Options.SyncFps;
                    _this.canvasRecorder.configure({
                        type: Type,
                        quality: Quality,
                        syncFps: SyncFps,
                        recordFps: RecordFps
                    }), _this.canvasRecorder.setPanelExpanded(CanvasRecorder.PanelExpanded);
                }
            }, "initCanvasRecorderPlugin$")), _define_property(_this, "initMonitorErrorPlugin$", __name(function() {
                if (_this.monitorError) {
                    var _ref, _this_player, _window_disableSimpleTrackErrors, _window, MonitorError = Debugger.MonitorError, ListPlayerDevIds = Debugger.ListPlayerDevIds, ApiKey = MonitorError.ApiKey, Service = MonitorError.Service, TrackUser = MonitorError.TrackUser, FilterErrors = MonitorError.FilterErrors, _ref1 = null != (_ref = null == (_this_player = _this.player) ? void 0 : _this_player.getPlayer()) ? _ref : {}, playerId2 = _ref1.playerId, name2 = _ref1.name;
                    playerId2 && "0000" !== playerId2 && ListPlayerDevIds.indexOf(playerId2) >= 0 || (null == (_window_disableSimpleTrackErrors = (_window = window).disableSimpleTrackErrors) || _window_disableSimpleTrackErrors.call(_window), _this.monitorError.configure({
                        apiKey: ApiKey,
                        service: Service,
                        trackUser: TrackUser,
                        releaseStage: NODE_ENV,
                        buildVersion: "".concat(null != BUILD_VERSION ? BUILD_VERSION : 1)
                    }), _this.monitorError.setUser({
                        id: null != playerId2 ? playerId2 : null,
                        name: null != name2 ? name2 : null
                    }), _this.monitorError.addFilterErrors(FilterErrors), _this.updateMonitorErrorUserAndMetadata$(), _this.processErrorsQueue$());
                }
            }, "initMonitorErrorPlugin$")), _define_property(_this, "updateMonitorErrorUserAndMetadata$", __name(function() {
                _this.event.catchUp(Events9.PLAYER_INFO_LOADED, _this.processWhenPlayerInfoLoaded$);
            }, "updateMonitorErrorUserAndMetadata$")), _define_property(_this, "processErrorsQueue$", __name(function() {
                if (_this.monitorError && Array.isArray(window.__errorQueue)) {
                    var _iteratorNormalCompletion = !0, _didIteratorError = !1, _iteratorError = void 0;
                    try {
                        for(var _step, _iterator = window.__errorQueue[Symbol.iterator](); !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = !0){
                            var error = _step.value;
                            if (_instanceof(error, Error)) _this.monitorError.sendException(error);
                            else {
                                var errorObj = F6.toError(error);
                                _this.monitorError.sendException(errorObj);
                            }
                        }
                    } catch (err) {
                        _didIteratorError = !0, _iteratorError = err;
                    } finally{
                        try {
                            _iteratorNormalCompletion || null == _iterator.return || _iterator.return();
                        } finally{
                            if (_didIteratorError) throw _iteratorError;
                        }
                    }
                    window.__errorQueue = null;
                }
            }, "processErrorsQueue$")), _define_property(_this, "processWhenPlayerInfoLoaded$", __name(function() {
                if (_this.player && _this.monitorError) {
                    var _this_player_getPlayer = _this.player.getPlayer(), playerId2 = _this_player_getPlayer.playerId, name2 = _this_player_getPlayer.name;
                    _this.monitorError.setUser({
                        id: playerId2,
                        name: name2
                    }), _this.monitorError.addMetadata({
                        isFirstSession: _this.player.isFirstSession()
                    });
                }
            }, "processWhenPlayerInfoLoaded$")), _define_property(_this, "handleSaveRemoteConfig$", __name(function(data) {
                try {
                    var _this_player, config = _define_property({}, data.type, data);
                    null == (_this_player = _this.player) || _this_player.setPlayerDataByName("remoteConfig", config);
                } catch (error) {
                    console.warn("handleSaveLudexConfig", error);
                }
            }, "handleSaveRemoteConfig$")), _define_property(_this, "handleUpdateLudexConfig$", __name(function(data) {
                try {
                    var _this_ads, id = data.id, type = data.type;
                    if ("Ludex" !== type) return;
                    Ludex.Configs = O32.merge(Ludex.Configs, data.config);
                    var Ads2 = Ludex.Configs.Ads;
                    null == (_this_ads = _this.ads) || _this_ads.configure(Ads2), _this.event.emit(CoreEvents_default.REMOTE_CONFIG_UPDATED, {
                        id: id,
                        type: type
                    });
                } catch (error) {
                    console.warn("handleUpdateLudexConfig", error);
                }
            }, "handleUpdateLudexConfig$")), _define_property(_this, "handleStorageCurrentRemoteConfig$", __name(function() {
                if (_this.player && _this.remoteConfig) {
                    var playerRemoteConfig = _this.player.getPlayerDataByKey("remoteConfig");
                    if (console.debug("playerRemoteConfig", J5.clone(playerRemoteConfig)), playerRemoteConfig) {
                        for(var key in playerRemoteConfig)if (O32.hasOwn(playerRemoteConfig, key)) {
                            var remoteConfig = playerRemoteConfig[key], newRemoteConfig = J5.clone(remoteConfig);
                            console.log("newRemoteConfig", newRemoteConfig);
                            var remoteConfigValid = new Dtos15.RemoteConfig.Data(newRemoteConfig).toObject();
                            console.debug("remoteConfigValid", remoteConfigValid), _this.remoteConfig.setRemoteConfig(remoteConfigValid), _this.remoteConfig.processUpdateConfig(remoteConfigValid.id, remoteConfigValid.type);
                        }
                    }
                }
            }, "handleStorageCurrentRemoteConfig$")), _define_property(_this, "initAdaptivePerformancePlugin$", __name(function() {
                if (_this.adaptivePerformance) {
                    var config = J5.clone(AdaptivePerformance);
                    _this.adaptivePerformance.configure(config);
                }
            }, "initAdaptivePerformancePlugin$")), _define_property(_this, "initInputRecorderPlugin$", __name(function() {
                if (_this.inputRecorder) {
                    var InputRecorder = Debugger.InputRecorder, config = J5.clone(InputRecorder);
                    if (!config) return void console.warn("Input Recorder is not configured");
                    _this.inputRecorder.configure(config);
                }
            }, "initInputRecorderPlugin$")), _define_property(_this, "processAfterSyncProfile$", __name(function() {
                Notification.Enabled && _this.updatePlayerProfileToNotificationService$();
            }, "processAfterSyncProfile$")), _this;
        }
        return _inherits(_MagicCodex, codex_default), _create_class(_MagicCodex, [
            {
                key: "getBuildVersion",
                value: function getBuildVersion() {
                    return parseInt(BUILD_VERSION, 10) || 0;
                }
            },
            {
                key: "boot",
                value: function boot() {
                    var _this = this, _this1 = this, _superprop_get_boot = function _superprop_get_boot() {
                        return _get(_get_prototype_of(_MagicCodex.prototype), "boot", _this);
                    };
                    return _async_to_generator(function() {
                        var _this_mark, _this_mark1, _this_mark2, _this_mark3;
                        return _ts_generator(this, function(_state) {
                            return console.groupEnd(), console.groupCollapsed("\uD83E\uDDEC Ludex Boot"), _superprop_get_boot().call(_this1), this.addPlugins$(), this.initEventPlugin$(), this.event.emit(Events9.CORE_BOOTING), this.validateCoreFlow$(), this.initFirebasePlugin$(), this.initMarkCoreInitialize$(), Analytics3.Enabled && (null == (_this_mark3 = this.mark) || _this_mark3.putAttr(this.markName$, "Step", "Init Analytics"), this.initGoogleAnalytics$(), this.initClarityAnalytics$(), this.initFirebaseAnalytics$(), this.initYandexAnalytics$(), this.initXiaomiAnalytics$(), this.initFacebookAnalytics$(), this.initPlayableAnalytics$(), this.initTranssionH5Analytics$()), null == (_this_mark = this.mark) || _this_mark.putAttr(this.markName$, "Step", "Init Plugins"), this.initAds$(), this.initMatchPlugin$(), this.initRemoteConfig$(), null == (_this_mark1 = this.mark) || _this_mark1.putAttr(this.markName$, "Step", "Load Lazy Plugins"), V36.isDebugger() || this.event.on(Events9.MODULE_PLUGIN_READY, this.handleProtectGameInstance$), this.addMonitorPlugin$().then(this.initMonitorErrorPlugin$), this.addCanvasRecorderPlugin$().then(this.initCanvasRecorderPlugin$), this.addAdaptivePerformancePlugin$().then(this.initAdaptivePerformancePlugin$), this.addInputRecorderPlugin$().then(this.initInputRecorderPlugin$), null == (_this_mark2 = this.mark) || _this_mark2.putAttr(this.markName$, "Step", "Load Dev Plugins"), this.event.catchUp(Events9.GAME_SDK_READY, this.addDevPlugins$), console.groupEnd(), [
                                2
                            ];
                        });
                    }).call(this);
                }
            },
            {
                key: "validateCoreFlow$",
                value: function validateCoreFlow$() {
                    return _async_to_generator(function() {
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    return [
                                        4,
                                        T3.sleepAsync(5e3)
                                    ];
                                case 1:
                                    return _state.sent(), 0 === this.event.getEventListeners(Events9.CORE_BOOTING).length && (console.groupEnd(), console.groupEnd(), console.log("%c Your game is not listening CORE_BOOTING event!!", "color: #f17f4a; font-size: 14px; font-weight: bold;"), console.log("%c Or init flow is slower!", "color: #26a0f0; font-weight: bold;")), [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "start",
                value: function start() {
                    var _this = this, _this1 = this, _superprop_get_start = function _superprop_get_start() {
                        return _get(_get_prototype_of(_MagicCodex.prototype), "start", _this);
                    };
                    return _async_to_generator(function() {
                        var _this_mark, _this_mark1, _this_auth, _this_mark2, _this_mark3, _this_mark4, _this_mark5, _this_mark6;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    return console.groupEnd(), console.groupCollapsed("\uD83E\uDDEC Ludex Start"), _superprop_get_start().call(_this1), null == (_this_mark = this.mark) || _this_mark.putAttr(this.markName$, "Step", "Core Start"), this.event.emit(Events9.CORE_STARTING), null == (_this_mark1 = this.mark) || _this_mark1.putAttr(this.markName$, "Step", "Request Token"), [
                                        4,
                                        null == (_this_auth = this.auth) ? void 0 : _this_auth.requestToken()
                                    ];
                                case 1:
                                    return _state.sent(), null == (_this_mark2 = this.mark) || _this_mark2.putAttr(this.markName$, "Step", "Init States"), [
                                        4,
                                        this.initState$()
                                    ];
                                case 2:
                                    if (_state.sent(), null == (_this_mark3 = this.mark) || _this_mark3.putAttr(this.markName$, "Step", "Process Player Profile"), this.processPlayerProfile$(), !(GameSDK.isGameSDK("FacebookInstant") && D3.isIOS())) return [
                                        3,
                                        3
                                    ];
                                    return this.event.catchUp(Events9.GAME_SDK_STARTED, this.processContextSession$), [
                                        3,
                                        5
                                    ];
                                case 3:
                                    return [
                                        4,
                                        this.processContextSession$()
                                    ];
                                case 4:
                                    _state.sent(), _state.label = 5;
                                case 5:
                                    return null == (_this_mark4 = this.mark) || _this_mark4.putAttr(this.markName$, "Step", "Core Ready"), null == (_this_mark5 = this.mark) || _this_mark5.putAttr(this.markName$, "Success", "true"), this.event.emit(Events9.CORE_READY), null == (_this_mark6 = this.mark) || _this_mark6.stop(this.markName$), [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "addPlugins$",
                value: function addPlugins$() {
                    this.installPlugin$("Storage", storage_default), this.installPlugin$("Event", event_default), this.installPlugin$("Ads", ads_default), this.installPlugin$("Auth", auth_default), this.installPlugin$("Audio", audio_default), this.installPlugin$("Match", match_default), this.installPlugin$("Player", player_default), this.installPlugin$("Profile", profile_default), this.installPlugin$("Context", context_default2), this.installPlugin$("Language", language_default), this.installPlugin$("Missions", empty_script_default), this.installPlugin$("Analytics", analytics_default), this.installPlugin$("Visibility", empty_script_default), this.installPlugin$("Leaderboard", leaderboards_default), this.installPlugin$("DailyRewards", empty_script_default), this.installPlugin$("FrameCapture", frame_capture_default), this.installPlugin$("RemoteConfig", empty_script_default), "Proxy" in window && this.installPlugin$("Firebase", empty_script_default);
                }
            },
            {
                key: "installPlugin$",
                value: function installPlugin$(name2, plugin) {
                    var isModule = arguments.length > 2 && void 0 !== arguments[2] && arguments[2], property = S8.toCamelCase(S8.capitalize(name2));
                    this.plugins.install(name2, plugin, !0, property) && "Storage" !== name2 && (isModule ? this.emitModulePluginReady$(name2) : this.emitCorePluginReady$(name2));
                }
            },
            {
                key: "addMonitorPlugin$",
                value: function addMonitorPlugin$() {
                    return _async_to_generator(function() {
                        var MonitorErrorPlugin;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    if (_state.trys.push([
                                        0,
                                        2,
                                        ,
                                        3
                                    ]), !Debugger.MonitorError.Enabled) return [
                                        2
                                    ];
                                    return this.modulePlugins$.push("MonitorError"), [
                                        4,
                                        Promise.resolve().then(function() {
                                            return init_empty_script(), empty_script_exports;
                                        })
                                    ];
                                case 1:
                                    if ("function" != typeof (MonitorErrorPlugin = _state.sent().default)) return [
                                        2
                                    ];
                                    return this.installPlugin$("MonitorError", MonitorErrorPlugin, !0), [
                                        3,
                                        3
                                    ];
                                case 2:
                                    return console.error("Error importing Monitor Error plugin:", _state.sent()), [
                                        3,
                                        3
                                    ];
                                case 3:
                                    return [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "addCanvasRecorderPlugin$",
                value: function addCanvasRecorderPlugin$() {
                    return _async_to_generator(function() {
                        var CanvasRecorderPlugin2;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    if (_state.trys.push([
                                        0,
                                        2,
                                        ,
                                        3
                                    ]), !Debugger.CanvasRecorder.Enabled) return [
                                        2
                                    ];
                                    return this.modulePlugins$.push("CanvasRecorder"), [
                                        4,
                                        Promise.resolve().then(function() {
                                            return init_canvas_recorder(), canvas_recorder_exports;
                                        })
                                    ];
                                case 1:
                                    if ("function" != typeof (CanvasRecorderPlugin2 = _state.sent().default)) throw Error("CanvasRecorderPlugin is not a function");
                                    return this.installPlugin$("CanvasRecorder", CanvasRecorderPlugin2, !0), [
                                        3,
                                        3
                                    ];
                                case 2:
                                    return console.error("Error importing Canvas Recorder plugin:", _state.sent()), [
                                        3,
                                        3
                                    ];
                                case 3:
                                    return [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "addAdaptivePerformancePlugin$",
                value: function addAdaptivePerformancePlugin$() {
                    return _async_to_generator(function() {
                        var AdaptivePerformancePlugin;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    if (_state.trys.push([
                                        0,
                                        2,
                                        ,
                                        3
                                    ]), !AdaptivePerformance.Enabled) return [
                                        2
                                    ];
                                    return this.modulePlugins$.push("AdaptivePerformance"), [
                                        4,
                                        Promise.resolve().then(function() {
                                            return init_empty_script(), empty_script_exports;
                                        })
                                    ];
                                case 1:
                                    if ("function" != typeof (AdaptivePerformancePlugin = _state.sent().default)) return [
                                        2
                                    ];
                                    return this.installPlugin$("AdaptivePerformance", AdaptivePerformancePlugin, !0), [
                                        3,
                                        3
                                    ];
                                case 2:
                                    return console.error("Error importing Adaptive Performance plugin:", _state.sent()), [
                                        3,
                                        3
                                    ];
                                case 3:
                                    return [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "addInputRecorderPlugin$",
                value: function addInputRecorderPlugin$() {
                    return _async_to_generator(function() {
                        var InputRecorderPlugin;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    if (_state.trys.push([
                                        0,
                                        2,
                                        ,
                                        3
                                    ]), !Debugger.InputRecorder.Enabled) return [
                                        2
                                    ];
                                    return this.modulePlugins$.push("InputRecorder"), [
                                        4,
                                        Promise.resolve().then(function() {
                                            return init_empty_script(), empty_script_exports;
                                        })
                                    ];
                                case 1:
                                    if ("function" != typeof (InputRecorderPlugin = _state.sent().default)) return [
                                        2
                                    ];
                                    return this.installPlugin$("InputRecorder", InputRecorderPlugin, !0), [
                                        3,
                                        3
                                    ];
                                case 2:
                                    return console.error("Error importing Input Recorder plugin:", _state.sent()), [
                                        3,
                                        3
                                    ];
                                case 3:
                                    return [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "addConsolePlugin$",
                value: function addConsolePlugin$() {
                    return _async_to_generator(function() {
                        var Console, ConsolePlugin;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    if (_state.trys.push([
                                        0,
                                        2,
                                        ,
                                        3
                                    ]), !(Console = Debugger.Console).Enabled || !Console.UseInGameConsole) return [
                                        2
                                    ];
                                    return this.modulePlugins$.push("Console"), [
                                        4,
                                        Promise.resolve().then(function() {
                                            return init_empty_script(), empty_script_exports;
                                        })
                                    ];
                                case 1:
                                    if ("function" != typeof (ConsolePlugin = _state.sent().default)) throw Error("ConsolePlugin is not a function");
                                    return this.installPlugin$("Console", ConsolePlugin, !0), this.initConsolePlugin$(), [
                                        3,
                                        3
                                    ];
                                case 2:
                                    return console.error("Error importing Console plugin:", _state.sent()), [
                                        3,
                                        3
                                    ];
                                case 3:
                                    return [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "addProfilerPlugin$",
                value: function addProfilerPlugin$() {
                    return _async_to_generator(function() {
                        var ProfilerPlugin;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    if (_state.trys.push([
                                        0,
                                        2,
                                        ,
                                        3
                                    ]), !Debugger.Profiler.Enabled) return [
                                        2
                                    ];
                                    return this.modulePlugins$.push("Profiler"), [
                                        4,
                                        Promise.resolve().then(function() {
                                            return init_empty_script(), empty_script_exports;
                                        })
                                    ];
                                case 1:
                                    if ("function" != typeof (ProfilerPlugin = _state.sent().default)) throw Error("ProfilerPlugin is not a function");
                                    return this.installPlugin$("Profiler", ProfilerPlugin, !0), this.initProfilerPlugin$(), [
                                        3,
                                        3
                                    ];
                                case 2:
                                    return console.error("Error importing Profiler plugin:", _state.sent()), [
                                        3,
                                        3
                                    ];
                                case 3:
                                    return [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "emitCorePluginReady$",
                value: function emitCorePluginReady$(name2) {
                    this.event.emit(CoreEvents_default.CORE_PLUGIN_READY, {
                        name: name2
                    });
                }
            },
            {
                key: "emitModulePluginReady$",
                value: function emitModulePluginReady$(name2) {
                    this.event.emit(CoreEvents_default.MODULE_PLUGIN_READY, {
                        name: name2
                    });
                }
            },
            {
                key: "initEventPlugin$",
                value: function initEventPlugin$() {
                    Debugger.EventLogging.Enabled && this.event.enableLogEvent();
                }
            },
            {
                key: "initMatchPlugin$",
                value: function initMatchPlugin$() {
                    this.match && this.match.setUseCPUProfile(!1);
                }
            },
            {
                key: "initAds$",
                value: function initAds$() {
                    var _this_ads, _this_analytics;
                    Ads.Enabled && (null == (_this_ads = this.ads) || _this_ads.configure(Ads), this.initGoogleAds$(), this.initTranssionH5Ads$(), this.initAdInstance$(), null == (_this_analytics = this.analytics) || _this_analytics.initAdEvent({
                        adService: "platform",
                        state: "loaded"
                    }));
                }
            },
            {
                key: "initGoogleAds$",
                value: function initGoogleAds$() {
                    return _async_to_generator(function() {
                        var AdSense, googleAds;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    if (_state.trys.push([
                                        0,
                                        2,
                                        ,
                                        3
                                    ]), !(AdSense = Ads.AdServiceConfigs.AdSense).Enabled) return [
                                        2
                                    ];
                                    return [
                                        4,
                                        (googleAds = new empty_script_default(this)).initAsync({
                                            usePreload: AdSense.UsePreload,
                                            dataAdHost: AdSense.DataAdHost,
                                            dataAdClient: AdSense.DataAdClient,
                                            dataAdChannel: AdSense.DataAdChannel,
                                            dataAdBreakTest: AdSense.DataAdBreakTest,
                                            dataAdFrequencyHint: AdSense.DataAdFrequencyHint
                                        })
                                    ];
                                case 1:
                                    return _state.sent(), window.GoogleAds = googleAds, [
                                        3,
                                        3
                                    ];
                                case 2:
                                    return console.warn("initGoogleAds", _state.sent()), [
                                        3,
                                        3
                                    ];
                                case 3:
                                    return [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "initTranssionH5Ads$",
                value: function initTranssionH5Ads$() {
                    return _async_to_generator(function() {
                        var Savana, transsionH5Ads;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    if (_state.trys.push([
                                        0,
                                        2,
                                        ,
                                        3
                                    ]), !(Savana = Ads.AdServiceConfigs.Savana).Enabled) return [
                                        2
                                    ];
                                    return [
                                        4,
                                        (transsionH5Ads = new empty_script_default(this)).initAsync({
                                            usePreload: Savana.UsePreload,
                                            dataAdHost: Savana.DataAdHost,
                                            dataAdClient: Savana.DataAdClient,
                                            dataAdChannel: Savana.DataAdChannel,
                                            dataAdBreakTest: Savana.DataAdBreakTest,
                                            dataAdFrequencyHint: Savana.DataAdFrequencyHint
                                        })
                                    ];
                                case 1:
                                    return _state.sent(), window.TranssionH5Ads = transsionH5Ads, [
                                        3,
                                        3
                                    ];
                                case 2:
                                    return console.warn("initTranssionH5Ads", _state.sent()), [
                                        3,
                                        3
                                    ];
                                case 3:
                                    return [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "getAdInstanceByService$",
                value: function getAdInstanceByService$(service) {
                    var isBanner = arguments.length > 1 && void 0 !== arguments[1] && arguments[1], _Ads_AdServiceConfigs = Ads.AdServiceConfigs, AdSense = _Ads_AdServiceConfigs.AdSense, AppLovin = _Ads_AdServiceConfigs.AppLovin, Savana = _Ads_AdServiceConfigs.Savana;
                    switch(service){
                        case "adsense":
                            if (AdSense.Enabled) return empty_script_default;
                            break;
                        case "applovin":
                            AppLovin.Enabled;
                            break;
                        case "savana":
                            if (Savana.Enabled) return empty_script_default;
                            break;
                        default:
                            if (isBanner) return empty_script_default;
                            return NormalAdInstance_default;
                    }
                    return null;
                }
            },
            {
                key: "initAdInstance$",
                value: function initAdInstance$() {
                    var AdsTypes = Plugins2.Ads.Types, defaultDevice = "default", _iteratorNormalCompletion = !0, _didIteratorError = !1, _iteratorError = void 0;
                    try {
                        for(var _step, _iterator = Ads.InterstitialAdOptions[Symbol.iterator](); !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = !0){
                            var _this_ads, option = _step.value, PlacementId = option.PlacementId, AdService = option.AdService, _option_DeviceOS = option.DeviceOS, DeviceOS = void 0 === _option_DeviceOS ? defaultDevice : _option_DeviceOS, instance = this.getAdInstanceByService$(AdService);
                            instance && (null == (_this_ads = this.ads) || _this_ads.setAdInstance(AdsTypes.INTERSTITIAL, PlacementId, instance, DeviceOS));
                        }
                    } catch (err) {
                        _didIteratorError = !0, _iteratorError = err;
                    } finally{
                        try {
                            _iteratorNormalCompletion || null == _iterator.return || _iterator.return();
                        } finally{
                            if (_didIteratorError) throw _iteratorError;
                        }
                    }
                    var _iteratorNormalCompletion1 = !0, _didIteratorError1 = !1, _iteratorError1 = void 0;
                    try {
                        for(var _step1, _iterator1 = Ads.RewardedVideoAdOptions[Symbol.iterator](); !(_iteratorNormalCompletion1 = (_step1 = _iterator1.next()).done); _iteratorNormalCompletion1 = !0){
                            var _this_ads1, option1 = _step1.value, PlacementId1 = option1.PlacementId, AdService1 = option1.AdService, _option_DeviceOS1 = option1.DeviceOS, DeviceOS1 = void 0 === _option_DeviceOS1 ? defaultDevice : _option_DeviceOS1, instance1 = this.getAdInstanceByService$(AdService1);
                            instance1 && (null == (_this_ads1 = this.ads) || _this_ads1.setAdInstance(AdsTypes.REWARDED_VIDEO, PlacementId1, instance1, DeviceOS1));
                        }
                    } catch (err) {
                        _didIteratorError1 = !0, _iteratorError1 = err;
                    } finally{
                        try {
                            _iteratorNormalCompletion1 || null == _iterator1.return || _iterator1.return();
                        } finally{
                            if (_didIteratorError1) throw _iteratorError1;
                        }
                    }
                    var _iteratorNormalCompletion2 = !0, _didIteratorError2 = !1, _iteratorError2 = void 0;
                    try {
                        for(var _step2, _iterator2 = Ads.RewardedInterstitialAdOptions[Symbol.iterator](); !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = !0){
                            var _this_ads2, option2 = _step2.value, PlacementId2 = option2.PlacementId, AdService2 = option2.AdService, _option_DeviceOS2 = option2.DeviceOS, DeviceOS2 = void 0 === _option_DeviceOS2 ? defaultDevice : _option_DeviceOS2, instance2 = this.getAdInstanceByService$(AdService2);
                            instance2 && (null == (_this_ads2 = this.ads) || _this_ads2.setAdInstance(AdsTypes.REWARDED_INTERSTITIAL, PlacementId2, instance2, DeviceOS2));
                        }
                    } catch (err) {
                        _didIteratorError2 = !0, _iteratorError2 = err;
                    } finally{
                        try {
                            _iteratorNormalCompletion2 || null == _iterator2.return || _iterator2.return();
                        } finally{
                            if (_didIteratorError2) throw _iteratorError2;
                        }
                    }
                    var isBanner = !0, _iteratorNormalCompletion3 = !0, _didIteratorError3 = !1, _iteratorError3 = void 0;
                    try {
                        for(var _step3, _iterator3 = Ads.BannerDisplayAdOptions[Symbol.iterator](); !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = !0){
                            var _this_ads3, option3 = _step3.value, PlacementId3 = option3.PlacementId, AdService3 = option3.AdService, _option_DeviceOS3 = option3.DeviceOS, DeviceOS3 = void 0 === _option_DeviceOS3 ? defaultDevice : _option_DeviceOS3, instance3 = this.getAdInstanceByService$(AdService3, isBanner);
                            instance3 && (null == (_this_ads3 = this.ads) || _this_ads3.setAdInstance(AdsTypes.BANNER, PlacementId3, instance3, DeviceOS3));
                        }
                    } catch (err) {
                        _didIteratorError3 = !0, _iteratorError3 = err;
                    } finally{
                        try {
                            _iteratorNormalCompletion3 || null == _iterator3.return || _iterator3.return();
                        } finally{
                            if (_didIteratorError3) throw _iteratorError3;
                        }
                    }
                }
            },
            {
                key: "initState$",
                value: function initState$() {
                    return _async_to_generator(function() {
                        var initiator;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    return _state.trys.push([
                                        0,
                                        2,
                                        ,
                                        3
                                    ]), (initiator = new StateInitiator_default(this)).initContext(), [
                                        4,
                                        initiator.initPlayer()
                                    ];
                                case 1:
                                    return _state.sent(), [
                                        3,
                                        3
                                    ];
                                case 2:
                                    return console.error("StateInitiator", _state.sent()), [
                                        3,
                                        3
                                    ];
                                case 3:
                                    return [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "initConsolePlugin$",
                value: function initConsolePlugin$() {
                    this.console && this.console.configure();
                }
            },
            {
                key: "initProfilerPlugin$",
                value: function initProfilerPlugin$() {
                    this.profiler && this.profiler.configure();
                }
            },
            {
                key: "initRemoteConfig$",
                value: function initRemoteConfig$() {
                    if (this.remoteConfig) {
                        var config = J5.clone(RemoteConfig);
                        this.remoteConfig.configure(config), this.event.on(CoreEvents_default.REQUEST_SAVE_CONFIG, this.handleSaveRemoteConfig$), this.event.on(CoreEvents_default.REQUEST_UPDATE_CONFIG, this.handleUpdateLudexConfig$), this.event.catchUp(CoreEvents_default.PLAYER_INFO_LOADED, this.handleStorageCurrentRemoteConfig$);
                    }
                }
            },
            {
                key: "initFirebasePlugin$",
                value: function initFirebasePlugin$() {
                    if (Firebase.Enabled && this.firebase) {
                        var config = J5.clone(Firebase);
                        this.firebase.configure(config), Mark2.setService(this.firebase.services.performance);
                    }
                }
            },
            {
                key: "mark",
                get: function get() {
                    return PerformanceMonitor.CoreFlows ? Mark2 : null;
                }
            },
            {
                key: "initMarkCoreInitialize$",
                value: function initMarkCoreInitialize$() {
                    var mark = this.mark;
                    mark && (mark.measure(this.markName$), mark.putAttr(this.markName$, "Build", "".concat(BUILD_VERSION)), mark.putAttr(this.markName$, "GameSDK", GameSDK.getSDKName()), mark.putAttr(this.markName$, "Platform", GameSDK.getPlatform()), mark.putAttr(this.markName$, "Success", "false"), mark.start(this.markName$));
                }
            },
            {
                key: "processPlayerProfile$",
                value: function processPlayerProfile$() {
                    return _async_to_generator(function() {
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    if (_state.trys.push([
                                        0,
                                        2,
                                        ,
                                        3
                                    ]), !this.player) return [
                                        2
                                    ];
                                    return [
                                        4,
                                        this.player.syncProfileToServer()
                                    ];
                                case 1:
                                    return _state.sent(), this.processAfterSyncProfile$(), [
                                        3,
                                        3
                                    ];
                                case 2:
                                    return console.warn("processPlayerProfile fail", _state.sent()), [
                                        3,
                                        3
                                    ];
                                case 3:
                                    return [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "updatePlayerProfileToNotificationService$",
                value: function updatePlayerProfileToNotificationService$() {
                    return _async_to_generator(function() {
                        var player, ASID, playerId2, locale2, isNEZP;
                        return _ts_generator(this, function(_state) {
                            switch(_state.label){
                                case 0:
                                    if (_state.trys.push([
                                        0,
                                        2,
                                        ,
                                        3
                                    ]), !this.player) return [
                                        2
                                    ];
                                    return ASID = (player = this.player.getPlayer()).ASID, playerId2 = player.playerId, locale2 = player.locale, isNEZP = !1, "isNEZP" in GameSDK.extra && (isNEZP = GameSDK.extra.isNEZP()), !isNEZP && "isRestricted" in GameSDK.extra && (isNEZP = GameSDK.extra.isRestricted()), [
                                        4,
                                        updatePlayerProfileNotificationAsync({
                                            appId: AppId5,
                                            ASID: ASID,
                                            playerId: playerId2,
                                            locale: locale2,
                                            platform: GameSDK.getPlatform(),
                                            platformMode: isNEZP ? "NEZP" : "NORMAL"
                                        })
                                    ];
                                case 1:
                                    return _state.sent(), [
                                        3,
                                        3
                                    ];
                                case 2:
                                    return console.warn("updatePlayerProfileToNotificationService", _state.sent()), [
                                        3,
                                        3
                                    ];
                                case 3:
                                    return [
                                        2
                                    ];
                            }
                        });
                    }).call(this);
                }
            },
            {
                key: "initGoogleAnalytics$",
                value: function initGoogleAnalytics$() {
                    if (this.analytics) {
                        var _Analytics3_GoogleAnalytics, _ref = null != (_Analytics3_GoogleAnalytics = Analytics3.GoogleAnalytics) ? _Analytics3_GoogleAnalytics : {}, Enabled2 = _ref.Enabled, ConsoleLog = _ref.ConsoleLog;
                        if (Enabled2) {
                            if ("function" != typeof GoogleAnalytics_default || !_instanceof(GoogleAnalytics_default.prototype, Object)) return void console.warn("GoogleAnalytics is not a constructor");
                            this.analytics.add(new GoogleAnalytics_default(this.codex, {
                                log: !!ConsoleLog
                            }));
                        }
                    }
                }
            },
            {
                key: "initClarityAnalytics$",
                value: function initClarityAnalytics$() {
                    if (this.analytics) {
                        var _Analytics3_ClarityAnalytics, _ref, _ref1, _this_player, _GameSDK_extra, _ref2 = null != (_Analytics3_ClarityAnalytics = Analytics3.ClarityAnalytics) ? _Analytics3_ClarityAnalytics : {}, Enabled2 = _ref2.Enabled, ConsoleLog = _ref2.ConsoleLog;
                        if (Enabled2) {
                            if ("function" != typeof empty_script_default || !_instanceof(empty_script_default.prototype, Object)) return void console.warn("ClarityAnalytics is not a constructor");
                            var instance = new empty_script_default(this.codex, {
                                log: !!ConsoleLog
                            }), playerId2 = (null != (_ref = null == (_this_player = this.player) ? void 0 : _this_player.getPlayer()) ? _ref : {}).playerId;
                            playerId2 && instance.setUser(playerId2, null == (_ref1 = null == (_GameSDK_extra = GameSDK.extra) ? void 0 : _GameSDK_extra.isGuest) || _ref1), this.analytics.add(instance);
                        }
                    }
                }
            },
            {
                key: "initFirebaseAnalytics$",
                value: function initFirebaseAnalytics$() {
                    var _Analytics3_FirebaseAnalytics, _this = this;
                    if (this.analytics) {
                        var _ref = null != (_Analytics3_FirebaseAnalytics = Analytics3.FirebaseAnalytics) ? _Analytics3_FirebaseAnalytics : {}, Enabled2 = _ref.Enabled, ConsoleLog = _ref.ConsoleLog;
                        if (Enabled2) {
                            if ("function" != typeof empty_script_default || !_instanceof(empty_script_default.prototype, Object)) return void console.warn("FirebaseAnalytics is not a constructor");
                            var instance = new empty_script_default(this.codex, {
                                log: !!ConsoleLog
                            });
                            this.analytics.add(instance);
                            var entryPoint = "no_entry";
                            GameSDK.getEntryPointAsync().then(function(entry) {
                                entryPoint = entry;
                            }).catch(function(error) {
                                console.warn(error);
                            }).finally(function() {
                                var _ref, _this_player, _ref1 = null != (_ref = null == (_this_player = _this.player) ? void 0 : _this_player.getPlayer()) ? _ref : {}, playerId2 = _ref1.playerId, locale2 = _ref1.locale, _ref2 = GameSDK.getEntryPointData() || {}, fbig_ad_id = _ref2.fbig_ad_id, fbig_adset_id = _ref2.fbig_adset_id, fbig_campaign_id = _ref2.fbig_campaign_id, fb_instant_game_adset_id = _ref2.fb_instant_game_adset_id, fb_instant_game_ad_id = _ref2.fb_instant_game_ad_id, fb_instant_game_campaign_id = _ref2.fb_instant_game_campaign_id, ad_id = fbig_ad_id || fb_instant_game_ad_id, adset_id = fbig_adset_id || fb_instant_game_adset_id, campaign_id = fbig_campaign_id || fb_instant_game_campaign_id;
                                playerId2 && instance.setUser(playerId2, {
                                    locale: locale2,
                                    ad_id: ad_id,
                                    adset_id: adset_id,
                                    campaign_id: campaign_id,
                                    traffic_source: entryPoint
                                });
                            });
                        }
                    }
                }
            },
            {
                key: "initYandexAnalytics$",
                value: function initYandexAnalytics$() {
                    if (this.analytics && GameSDK.isGameSDK("Yandex")) {
                        if ("function" != typeof empty_script_default || !_instanceof(empty_script_default.prototype, Object)) return void console.warn("YandexAnalytics is not a constructor");
                        this.analytics.add(new empty_script_default(this.codex));
                    }
                }
            },
            {
                key: "initXiaomiAnalytics$",
                value: function initXiaomiAnalytics$() {
                    if (this.analytics && GameSDK.isGameSDK("Xiaomi")) {
                        if ("function" != typeof empty_script_default || !_instanceof(empty_script_default.prototype, Object)) return void console.warn("XiaomiAnalytics is not a constructor");
                        this.analytics.add(new empty_script_default(this.codex));
                    }
                }
            },
            {
                key: "initPlayableAnalytics$",
                value: function initPlayableAnalytics$() {
                    if (this.analytics && GameSDK.isGameSDK("Playable")) {
                        if ("function" != typeof empty_script_default || !_instanceof(empty_script_default.prototype, Object)) return void console.warn("PlayableAnalytics is not a constructor");
                        this.analytics.add(new empty_script_default(this.codex));
                    }
                }
            },
            {
                key: "initFacebookAnalytics$",
                value: function initFacebookAnalytics$() {
                    if (this.analytics) {
                        var _Analytics3_FacebookAnalytics, _ref = null != (_Analytics3_FacebookAnalytics = Analytics3.FacebookAnalytics) ? _Analytics3_FacebookAnalytics : {}, Enabled2 = _ref.Enabled, Prefix = _ref.Prefix, ConsoleLog = _ref.ConsoleLog;
                        if (Enabled2 && GameSDK.isGameSDK("FacebookInstant")) {
                            if ("string" != typeof Prefix) return void console.warn("Facebook Analytics is not configured");
                            if ("function" != typeof empty_script_default || !_instanceof(empty_script_default.prototype, Object)) return void console.warn("FacebookAnalytics is not a constructor");
                            this.analytics.add(new empty_script_default(this.codex, {
                                prefix: Prefix,
                                log: !!ConsoleLog
                            }));
                        }
                    }
                }
            },
            {
                key: "initTranssionH5Analytics$",
                value: function initTranssionH5Analytics$() {
                    if (this.analytics && GameSDK.isGameSDK("TranssionH5")) {
                        if ("function" != typeof empty_script_default || !_instanceof(empty_script_default.prototype, Object)) return void console.warn("TranssionH5Analytics is not a constructor");
                        this.analytics.add(new empty_script_default(this.codex));
                    }
                }
            }
        ]), _MagicCodex;
    }(codex_default);
    __name(_MagicCodex, "MagicCodex");
    var MagicCodex = _MagicCodex, codex_default2 = MagicCodex, _Ludex_Configs12 = Ludex.Configs, ForceDesktopDPR = _Ludex_Configs12.GameEngine.ForceDesktopDPR, _Ludex_Utils51 = Ludex.Utils, D4 = _Ludex_Utils51.Device, Events10 = Ludex.Events, initGame = __name(function() {
        return _async_to_generator(function() {
            var codex2;
            return _ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return codex2 = new codex_default2(), window.codex = codex2, "u" > ("u" < typeof globalThis ? "undefined" : _type_of1(globalThis)) && (globalThis.codex = codex2), window.__sdkLoad.ensure(1), [
                            4,
                            codex2.boot()
                        ];
                    case 1:
                        return _state.sent(), window.__sdkLoad.ensure(5), codex2.event.catchUp(Events10.REQUEST_CORE_START, startGame), [
                            2
                        ];
                }
            });
        })();
    }, "initGame"), isGameStarted = !1, startGame = __name(function() {
        if (!isGameStarted) {
            if (1 > codex.event.getEventEmitCount(Events10.GAME_SDK_READY)) return void codex.event.catchUp(Events10.GAME_SDK_READY, startGame);
            codex.start(), isGameStarted = !0, window.__sdkLoad.ensure(15);
        }
    }, "startGame");
    !1 !== ForceDesktopDPR && D4.isDesktop() && "number" == typeof ForceDesktopDPR && ForceDesktopDPR > 0 && (window.devicePixelRatio = ForceDesktopDPR), initGame();
}();
