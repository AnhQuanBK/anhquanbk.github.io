function _instanceof(left,right){return null!=right&&"u">typeof Symbol&&right[Symbol.hasInstance]?!!right[Symbol.hasInstance](left):left instanceof right}function _ts_generator(thisArg,body){var f,y,t,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]},g=Object.create(("function"==typeof Iterator?Iterator:Object).prototype),d=Object.defineProperty;return d(g,"next",{value:verb(0)}),d(g,"throw",{value:verb(1)}),d(g,"return",{value:verb(2)}),"function"==typeof Symbol&&d(g,Symbol.iterator,{value:function(){return this}}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw TypeError("Generator is already executing.");for(;g&&(g=0,op[0]&&(_=0)),_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}}function _ts_values(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")}System.register("chunks:///main.js",["./TournamentUtils-9f4fc570.js","cc"],function(){var Lt,B,E,A,S,k,Bt,O,h,p,v,_e,$,at,ot,Dt,we,jt,dt,Si,bo,M,So,Q,Hn,he,Ot,He,ko,Yr,Jr,G,re,Ve,Ye,wo,Co,Xr,d,ki,f,De,Je,Ct,D,jn,V,Ee,Et,It,j,Zr,oe,me,se,Ce,Qr,I,Oe,b,W,Y,Eo,ne,le,ce,pe,$r,Wt,U,Wn,x,aa,Xe,Nt,Ze,je,J,Ie,Qe,At,yn,vn,oa,es,fe,ee,qn,wi,Ne,Ao,Ci,Kn,ra,To,ts,Ro,Vn,ns,Po,_o,Ei,Ai,sa,la,Lo,is,Yn,ua,as,ca,os,$e,Ft,rs,ss,ls;return{setters:[function(T){Lt=T._,B=T.a,E=T.b,A=T.c,S=T.d,k=T.e,Bt=T.f,O=T.g,h=T.h,p=T.i,v=T.j,_e=T.R,$=T.k,at=T.l,ot=T.m,Dt=T.A,we=T.G,jt=T.n,dt=T.C,Si=T.S,bo=T.o,M=T.p,So=T.q,Q=T.r,Hn=T.s,he=T.t,Ot=T.u,He=T.v,ko=T.w,Yr=T.E,Jr=T.L,G=T.x,re=T.y,Ve=T.z,Ye=T.B,wo=T.W,Co=T.D,Xr=T.F},function(T){d=T.cclegacy,ki=T.isCCObject,f=T._decorator,De=T.Animation,Je=T.CCString,Ct=T.CCInteger,D=T.Component,jn=T.AudioSource,V=T.director,Ee=T.UITransform,Et=T.CCFloat,It=T.Widget,j=T.tween,Zr=T.Layout,oe=T.Sprite,me=T.game,se=T.Button,Ce=T.CCBoolean,Qr=T.EventTouch,I=T.Vec3,Oe=T.Input,b=T.Node,W=T.UIOpacity,Y=T.Label,Eo=T.RichText,ne=T.Graphics,le=T.Color,ce=T.sys,pe=T.Director,$r=T.EventTarget,Wt=T.ParticleSystem2D,U=T.math,Wn=T.View,x=T.Vec2,aa=T.ccenum,Xe=T.Enum,Nt=T.Layers,Ze=T.find,je=T.ERigidBody2DType,J=T.RigidBody2D,Ie=T.sp,Qe=T.Collider2D,At=T.Contact2DType,yn=T.SpriteFrame,vn=T.HingeJoint2D,oa=T.RelativeJoint2D,es=T.BoxCollider2D,fe=T.Prefab,ee=T.instantiate,qn=T.CircleCollider2D,wi=T.Mask,Ne=T.PolygonCollider2D,Ao=T.NodePool,Ci=T.Tween,Kn=T.PhysicsSystem2D,ra=T.ERaycast2DType,To=T.Intersection2D,ts=T.JsonAsset,Ro=T.ProgressBar,Vn=T.EPhysics2DDrawFlags,ns=T.DistanceJoint2D,Po=T.repeat,_o=T.lerp,Ei=T.approx,Ai=T.EPSILON,sa=T.RealCurve,la=T.Gradient,Lo=T.bits,is=T.random,Yn=T.randomRange,ua=T.randomRangeInt,as=T.js,ca=T.misc,os=T.MeshRenderData,$e=T.pseudoRandom,Ft=T.toRadian,rs=T.CCClass,ss=T.UIRenderer,ls=T.Material}],execute:function execute(){function T(l,r,o){var a;if("object"!==Lt(l)||void 0===r||void 0===o)return function(t,n,i){var a=i.value;i.value=function(){for(var s=arguments.length,u=Array(s),c=0;c<s;c++)u[c]=arguments[c];if(l.call(this))return null==a?void 0:a.apply(this,u)}};a=o.value,o.value=function(){for(var s=arguments.length,u=Array(s),c=0;c<s;c++)u[c]=arguments[c];if(this.isValid)return null==a?void 0:a.apply(this,u)}}function us(l,r,o){var u,a;if("object"!==Lt(l)||void 0===r||void 0===o)return function(t,n,i){var u,a=i.value;u=B(function(){var c,y,m,_arguments=arguments;return _ts_generator(this,function(_state){switch(_state.label){case 0:for(y=Array(c=_arguments.length),m=0;m<c;m++)y[m]=_arguments[m];if(!l.call(this))return[3,2];return[4,null==a?void 0:a.apply(this,y)];case 1:return[2,_state.sent()];case 2:return[2]}})}),i.value=function(){return u.apply(this,arguments)}};a=o.value,u=B(function(){var c,y,m,_arguments=arguments;return _ts_generator(this,function(_state){switch(_state.label){case 0:for(y=Array(c=_arguments.length),m=0;m<c;m++)y[m]=_arguments[m];if(!this.isValid)return[3,2];return[4,null==a?void 0:a.apply(this,y)];case 1:return[2,_state.sent()];case 2:return[2]}})}),o.value=function(){return u.apply(this,arguments)}}d._RF.push({},"147a4TjOC9PMpdhlBiKEn54","onlyRunInLifeCycle",void 0),d._RF.pop(),d._RF.push({},"6944aqu6zZOGIj+df3KBDrm","onlyRunInLifeCycleAsync",void 0),d._RF.pop(),d._RF.push({},"99384AdWHlKDIyVvCAqSwJE","index",void 0),d._RF.pop(),d._RF.push({},"09236E0KzVAqotP4Yn9R+4m","MissingPropertiesError",void 0);var kT=function(l){E(o,l);var r=A(o);function o(e,t){var n;return S(this,o),(n=r.call(this,"".concat(e," is missing these required properties: [").concat(t.map(function(i){return i.propertyName}).join(", "),"]"))).className=e,n.errors=t,n}return k(o)}(Bt(Error));d._RF.pop(),d._RF.push({},"4ce5394i3hCZoi5cZm0Vn2l","MissingPropertyError",void 0);var cs=function(l){E(o,l);var r=A(o);function o(e,t){var n;return S(this,o),(n=r.call(this,"".concat(e," is missing the required property: <").concat(t,">"))).className=e,n.propertyName=t,n}return k(o)}(Bt(Error));d._RF.pop(),d._RF.push({},"a2990W72mRAYaItrPHe4H5V","required",void 0);var hs=Ludex.Utils,wT=hs.String,CT=hs.Valid,ds=codex.monitorError,fn="_compUtils_ReqPropsMap";function ps(l){return null===l}function ys(l){return void 0===l}function ET(l){return ps(l)||ys(l)}function vs(l){if("function"==typeof l)return l;switch(l){case"null-check":return ps;case"undefined-check":return ys;default:return ET}}function fs(l){return function(r,o){if("function"==typeof r)throw Error("The required decorator can only be applied to non-static class properties.");var t=r.constructor.name,n="".concat("_compUtils_ReqPropsMethod","_").concat(wT.capitalize(o));if(void 0!==r[n])throw Error("The required decorator found that property name ".concat(n," already exists. The reserved method name ").concat(n," is used already or the decorator was applied multiple times."));r[n]=function(i){if(l(this[o]))throw new cs(i,o)},void 0===r[fn]&&(r[fn]={}),void 0===r[fn][t]&&(r[fn][t]=[]),r[fn][t].push(n)}}function ms(l,r){if("string"!=typeof r)return fs(vs(l));fs(vs())(l,r)}d._RF.pop(),d._RF.push({},"75e1e0Ei7ZOOr/FzyprYnVJ","index",void 0),d._RF.pop(),d._RF.push({},"95972yG/ulEg4gycbc+QB5Y","ComponentUtils",void 0);var gs,bs,Ss,ks,ha,Cs,Es,As,Bo=Ludex.Utils,AT=Bo.Array,mn=Bo.Object,TT=Bo.Valid,RT=["cc.Mask","cc.Label","cc.Canvas","cc.Camera","cc.Layout","cc.Button","cc.Sprite","cc.Widget","cc.Renderer","cc.Animation","cc.UIOpacity"],L=function(l){E(o,l);var r=A(o);function o(){return S(this,o),r.apply(this,arguments)}return k(o)}(function(){function l(){S(this,l),this.se={}}return k(l,[{key:"validateRequiredComponents",value:function value(r){var o,e=r.name,t=r.constructor,n=this.getRequiredComponentNames(t),i=O(n);try{for(i.s();!(o=i.n()).done;){var a=o.value;if(!r.getComponent(a))throw Error("".concat(e,": Missing required ").concat(a," component"))}}catch(s){i.e(s)}finally{i.f()}}},{key:"validateRequiredProperties",value:function value(r){var o,e=r.name,t=r.constructor,n=this.getRequiredPropNames(t),i=O(n);try{for(i.s();!(o=i.n()).done;){var a=o.value;if(!mn.hasOwn(r,a))throw Error("".concat(e,": Missing required ").concat(a," property"));var s=this.getProperty(a,r);if(!ki(s))throw Error("".concat(e,": ").concat(a," property is not a cc object"))}}catch(u){i.e(u)}finally{i.f()}}},{key:"validateCustomProperties",value:function value(r){var o,e=r.name,t=this.getCustomPropNames(r),n=O(t);try{for(n.s();!(o=n.n()).done;){var i=o.value;if(!mn.hasOwn(r,i))throw Error("".concat(e,": Missing required ").concat(i," property"));var a=this.getProperty(i,r);if(!ki(a))throw Error("".concat(e,": ").concat(i," property is not a cc object"))}}catch(s){n.e(s)}finally{n.f()}}},{key:"getProperty",value:function value(r,o){var e;if(mn.hasOwn(o,r))return(null!=(e=Object.getOwnPropertyDescriptor(o,r))?e:{}).value}},{key:"getProps",value:function value(r){if(!mn.hasOwn(r,"__props__"))return[];var o=r.__props__;return Array.isArray(o)?o:[]}},{key:"getRequiredPropNames",value:function value(r){return this.getProps(r).filter(function(o){return"node"!==o&&!!mn.hasOwn(r,o)&&!!ki(r[o])&&!o.startsWith("_")})}},{key:"getBaseComponentName",value:function value(r){for(var o=0;o<RT.length;o++){var t=RT[o];if(t.indexOf(r)>=0)return t}return r}},{key:"getRequiredComponentNames",value:function value(r){var o=this;if(!mn.hasOwn(r,"_requireComponent"))return[];var e=r._requireComponent;return Array.isArray(e)?e.map(function(t){return o.getBaseComponentName(t)}):[]}},{key:"getCustomPropNames",value:function value(r){var o=this,e=Object.keys(r),t=this.getProps(r.constructor);return AT.difference(e,t).filter(function(n){return 0>n.indexOf("_")}).filter(function(n){if(!mn.hasOwn(r,n))return!1;var i=o.getProperty(n,r);return!(!TT.isObject(i)||!ki(i))})}}],[{key:"inst",get:function get(){return this.J||(this.J=new this),this.J}},{key:"required",value:function value(r,o){return"string"==typeof o?ms(r,o):ms(r)}},{key:"onlyRunInLifeCycle",value:function value(r,o,e){return"object"===Lt(r)&&void 0!==o&&void 0!==e?T(r,o,e):T(r)}},{key:"onlyRunInLifeCycleAsync",value:function value(r,o,e){return"object"===Lt(r)&&void 0!==o&&void 0!==e?us(r,o,e):us(r)}},{key:"lazyValidateProperties",value:function value(r){var o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(o){var t=r.constructor.name;if(!this.inst.se[t])try{this.inst.validateRequiredComponents(r),this.inst.validateRequiredProperties(r),this.inst.validateCustomProperties(r)}catch(unused){r.enabled=!1}finally{this.inst.se[t]=!0}}}},{key:"validateRequiredProperties",value:function value(r,o){!function(e,t){var n,i,a=t?t.name:e.constructor.name,s=t?t.prototype[fn]:e.constructor.prototype[fn],u=null!=(n=null==s?void 0:s[a])?n:[],c=[],m=O(u);try{for(m.s();!(i=m.n()).done;){var w=i.value;if("function"==typeof e[w])try{e[w](a)}catch(g){if(!_instanceof(g,cs))throw g;c.push(g)}}}catch(g){m.e(g)}finally{m.f()}if(0!==c.length){var _=new kT(a,c);if(CT.isDebugger())throw _;null==ds||ds.sendException(_)}}(r,o)}}]),l}());d._RF.pop(),d._RF.push({},"60ac3vor0dMT5bXi8D3VSJN","BubbleAnimation",void 0);var Do,PT=f.ccclass,Oo=f.property,_T=(gs=PT("BubbleAnimation"),bs=Oo(De),Ss=Oo(Je),ks=Oo(Ct),gs((Cs=h((ha=function(l){E(o,l);var r=A(o);function o(){var e;S(this,o);for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return e=r.call.apply(r,[this].concat(n)),p(e,"animation",Cs,v(e)),p(e,"clipName",Es,v(e)),p(e,"repeat",As,v(e)),e.currentRepeat=-1,e}return k(o,[{key:"__preload",value:function value(){this.animation=this.getComponent(De),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function value(){L.lazyValidateProperties(this)}},{key:"play",value:function value(){var e=this;this.animation&&this.animation.clips.find(function(t){return(null==t?void 0:t.name)===e.clipName})&&(this.currentRepeat=-1,this.animation.play(this.clipName))}},{key:"onBubbleAnimationLoop",value:function value(){this.animation&&-1!==this.repeat&&(this.currentRepeat++,this.currentRepeat>this.repeat&&this.animation.stop())}}]),o}(D)).prototype,"animation",[bs],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Es=h(ha.prototype,"clipName",[Ss],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return"Bubble"}}),As=h(ha.prototype,"repeat",[ks],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return -1}}),ha))||ha);d._RF.pop(),d._RF.push({},"cc0a5OvhdRCMZRZuRscaz+7","AudioPlayer",void 0);var Io=null==(Do=Ludex.Plugins.Audio)?void 0:Do.BaseAudioPlayer;Io||(Io=k(function l(r){S(this,l)}));var No,Ts,da,Fo=function(l){E(o,l);var r=A(o);function o(e,t){var n;return S(this,o),(n=r.call(this,e)).audioSource=t,n}return k(o,[{key:"play",value:function value(e){if(e){var t=e.volume,i=e.loop;this.audioSource.volume=void 0===t?1:t,this.audioSource.loop=void 0!==i&&i}this.audioSource.play()}},{key:"pause",value:function value(){this.audioSource.pause()}},{key:"resume",value:function value(){this.audioSource.state===jn.AudioState.PAUSED&&this.audioSource.play()}},{key:"stop",value:function value(){this.audioSource.stop()}},{key:"setVolume",value:function value(e){this.audioSource.volume=e}},{key:"getVolume",value:function value(){return this.audioSource.volume}},{key:"getAudioSource",value:function value(){return this.audioSource}}]),o}(Io);d._RF.pop(),d._RF.push({},"8b5ecHv/+BJiorK1kiVbTcf","AudioChannel",void 0);var Rs=Ludex.Utils,LT=Rs.Array,BT=Rs.Decorator,zo=null==(No=Ludex.Plugins.Audio)?void 0:No.BaseChannelManager;zo||(zo=k(function l(r){S(this,l)}));var Ps,_s,Ls,Bs,Ds=(Ts=BT.tryCatch(),h((da=function(l){E(e,l);var r,o=A(e);function e(t,n){var i;return S(this,e),(i=o.call(this,n)).allowMultipleTracking={},i.handleLoadedAudio=function(a,s){var u=i.node.addComponent(jn);return u.clip=s,u.playOnAwake=!1,new Fo(a,u)},i.node=t,i}return k(e,[{key:"playing",value:function value(t){var n,i=null==(n=this.getAudioClip(t))?void 0:n.audioPlayer;return!!(i&&_instanceof(i,Fo))&&i.getAudioSource().state===jn.AudioState.PLAYING}},{key:"onLoadAudio",value:(r=B(function(t,n){var i;return _ts_generator(this,function(_state){switch(_state.label){case 0:return[4,_e.loadAudioAsync(t)];case 1:return[2,(i=_state.sent())&&this.node.isValid?this.handleLoadedAudio(t,i):null]}})}),function(t,n){return r.apply(this,arguments)})},{key:"playWithRealConfig",value:function value(t,n){if(this.isCanPlay(n)){if(n){var i=n.volume,s=n.allowMultiple;if(n.volume=this.getVolume()*(void 0===i?1:i),void 0!==s&&s){var c=t.getAudioSource().clip;return c?void this.requestDuplicateAudioPlayer(t.getKey(),c,n).play(n):void 0}}t.play(n)}}},{key:"isCanPlay",value:function value(t){var n=this;if(t){var i=t.checkList;if((void 0===i?[]:i).some(function(a){var s=n.getAudioClip(a);if(s){var u=s.audioPlayer;if(u&&_instanceof(u,Fo))return u.getAudioSource().state===jn.AudioState.PLAYING}return!1}))return!1}return!0}},{key:"requestDuplicateAudioPlayer",value:function value(t,n,i){var a=this.getDuplicateAudioFromPool(t);if(a){if(i){var s=a.key,u=i.volume;this.setAudioClip(s,{volume:void 0===u?1:u})}return a.audioPlayer}var y=this.allowMultipleTracking[t];if(!y)throw Error("Allow multiple tracking is not found");var m="".concat(t,"_").concat(y.currentPostFix),w=this.handleLoadedAudio(m,n);return y.list.push({audioPlayer:w,key:m}),y.currentPostFix+=1,this.setAudioClip(m,{audioPlayer:w,volume:1}),w}},{key:"getDuplicateAudioFromPool",value:function value(t){if(this.allowMultipleTracking[t]){var n=this.allowMultipleTracking[t].list,i=LT.search(n,function(a){return a.audioPlayer.getAudioSource().state!==jn.AudioState.PLAYING});if(i)return i}else this.allowMultipleTracking[t]={currentPostFix:1,list:[]};return null}}]),e}(zo)).prototype,"onLoadAudio",[Ts],Object.getOwnPropertyDescriptor(da.prototype,"onLoadAudio"),da.prototype),da);d._RF.pop(),d._RF.push({},"1a025mmN7BL7r5cF6gWR4b/","Music",void 0);var Os,Is,Ns,Fs,IT=f.ccclass,NT=f.property,zs=codex,Tt=zs.audio,FT=zs.player;Ps=IT("Music"),_s=NT(Je),Ps((Bs=h((Ls=function(l){E(o,l);var r=A(o);function o(){var e;S(this,o);for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return e=r.call.apply(r,[this].concat(n)),p(e,"channelId",Bs,v(e)),e.channel=null,e.isMute=!1,e.volume=1,e}return k(o,[{key:"__preload",value:function value(){Tt&&(this.makePersistent(),this.channel=new Ds(this.node,this.channelId),Tt.addChannel(this.channel))}},{key:"makePersistent",value:function value(){V.isPersistRootNode(this.node)||V.addPersistRootNode(this.node)}},{key:"playing",value:function value(e){var t,n;return null!=(t=null==(n=this.channel)?void 0:n.playing(e))&&t}},{key:"play",value:function value(e,t){if(this.isMusicEnable()){var n=null!=t?t:{};n.loop||(n.loop=!0),Tt.play(e,n,this.channelId)}}},{key:"isMusicEnable",value:function value(){return!!FT.getPlayerSetting("music")}},{key:"setVolume",value:function value(e){this.volume=e,this.isMute||Tt.setVolume(e,this.channelId)}},{key:"getVolume",value:function value(){return Tt.getVolume(this.channelId)}},{key:"pause",value:function value(e){Tt.pause(e,this.channelId)}},{key:"resume",value:function value(e){this.isMusicEnable()&&Tt.resume(e,this.channelId)}},{key:"stop",value:function value(e){Tt.stop(e,this.channelId)}},{key:"mute",value:function value(e){this.isMute=e,e?Tt.mute(this.channelId):(this.setVolume(this.volume),Tt.unmute(this.channelId))}}]),o}(D)).prototype,"channelId",[_s],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return"global_music"}}),Ls)),d._RF.pop(),d._RF.push({},"1299a7X1XNNEKxSKMV6E5jQ","Sound",void 0);var xs,Gs,Ms,xo,Hs,js,Ws,qs,Ks,Vs,Ys,Js,Xs,pt,Zs,Qs,$s,el,xT=f.ccclass,GT=f.property,tl=codex,Rt=tl.audio,MT=tl.player;Os=xT("Sound"),Is=GT(Je),Os((Fs=h((Ns=function(l){E(o,l);var r=A(o);function o(){var e;S(this,o);for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return e=r.call.apply(r,[this].concat(n)),p(e,"channelId",Fs,v(e)),e.channel=null,e}return k(o,[{key:"__preload",value:function value(){Rt&&(this.channel=new Ds(this.node,this.channelId),Rt.addChannel(this.channel))}},{key:"onLoad",value:function value(){}},{key:"makePersistent",value:function value(){V.addPersistRootNode(this.node)}},{key:"removePersistent",value:function value(){V.removePersistRootNode(this.node)}},{key:"play",value:function value(e,t){if(this.isSoundEnable())return Rt.play(e,t,this.channelId)}},{key:"isSoundEnable",value:function value(){return!!MT.getPlayerSetting("sound")}},{key:"setVolume",value:function value(e){Rt.setVolume(e,this.channelId)}},{key:"pause",value:function value(e){Rt.pause(e,this.channelId)}},{key:"resume",value:function value(e){this.isSoundEnable()&&Rt.resume(e,this.channelId)}},{key:"stop",value:function value(e){Rt.stop(e,this.channelId)}},{key:"stopAll",value:function value(){Rt.stopAll(this.channelId)}},{key:"mute",value:function value(e){e?Rt.mute(this.channelId):Rt.unmute(this.channelId)}}]),o}(D)).prototype,"channelId",[Is],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return""}}),Ns)),d._RF.pop(),d._RF.push({},"84a2dB5IaRJ8JB+n9yXfBc7","AutoLayout",void 0);var nl,il,al,ol,rl=f.ccclass,qt=f.property,HT=(xs=rl("AutoLayoutWrappee"),Gs=qt({type:Ee}),Ms=qt({type:Ee}),xs((Hs=h((xo=k(function l(){S(this,l),p(this,"wrapeeContainer",Hs,this),p(this,"wrapee",js,this)})).prototype,"wrapeeContainer",[Gs],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),js=h(xo.prototype,"wrapee",[Ms],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xo))||xo);Ws=rl("AutoLayout"),qs=qt({displayName:"Use Auto Layout"}),Ks=qt({type:[HT],displayName:"Children",visible:function visible(){return this.useAutoLayout}}),Vs=qt({visible:!1,serializable:!0}),Ys=qt({type:Ct,displayName:"Selected Index",visible:function visible(){return this.useAutoLayout}}),Js=qt({type:Et,displayName:"Deselected Icon Width",group:"Edge Icons",visible:function visible(){return this.useAutoLayout}}),Xs=qt({visible:!1,serializable:!0}),Ws((Zs=h((pt=function(l){E(e,l);var r,o=A(e);function e(){var t;S(this,e);for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];return t=o.call.apply(o,[this].concat(i)),p(t,"useAutoLayout",Zs,v(t)),p(t,"children",Qs,v(t)),t.mappedChildren=[],p(t,"selected",$s,v(t)),p(t,"deselectedIconW",el,v(t)),t.tweens=[],t}return k(e,[{key:"selectedIndex",get:function get(){return this.selected},set:function set(t){this.selected=t,this.updateLayout(!0)}},{key:"deselectedIconWidth",get:function get(){return this.deselectedIconW},set:function set(t){this.deselectedIconW=t,this.updateLayout(!0)}},{key:"__preload",value:function value(){this.mappedChildren=this.children.map(function(t){var n=t.wrapeeContainer.getComponent(It);if(!n)throw Error("AutoLayout: Widget component not found");return $($({},t),{},{wrapeeContainerWidget:n})})}},{key:"updateLayout",value:function value(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this._layoutDirty||t){this.updateChildrenAnchors();var n,i=O(this.mappedChildren);try{for(i.s();!(n=i.n()).done;)n.value.wrapeeContainerWidget.updateAlignment()}catch(s){i.e(s)}finally{i.f()}}at(ot(e.prototype),"updateLayout",this).call(this,t)}},{key:"getSelectedWorldX",value:function value(){var t=this.mappedChildren[this.selectedIndex].wrapeeContainer;return 0===this.selectedIndex||this.selectedIndex===this.children.length-1?t.getBoundingBoxToWorld().xMin+this.getAnchorX(this.selectedIndex)*t.width:t.getBoundingBoxToWorld().center.x}},{key:"getAnchorX",value:function value(t){if(t<this.selectedIndex)return 0;if(t>this.selectedIndex)return 1;if(0===t){var n=this.mappedChildren[t].wrapeeContainer.width,i=this.deselectedIconWidth/2,a=this.paddingLeft;return((a+n+(n-i+this.spacingX))/2-a)/n}if(t===this.children.length-1){var s=this.mappedChildren[t].wrapeeContainer.width,u=s-this.deselectedIconWidth/2+this.spacingX;return((u+s+this.paddingRight)/2-u)/s}return .5}},{key:"updateChildrenAnchors",value:(r=B(function(){var t,n,i;return _ts_generator(this,function(_state){switch(_state.label){case 0:n=this,i=O(this.tweens);try{for(i.s();!(t=i.n()).done;)t.value.stop()}catch(a){i.e(a)}finally{i.f()}return this.tweens=[],[4,Promise.all([this.children.flatMap(function(a,s){return n.getChildrenAnchorsTweens(a,n.getAnchorX(s))}).map(function(a){return Dt.runTweenAsync(a)})])];case 1:return _state.sent(),[2]}})}),function(){return r.apply(this,arguments)})},{key:"updateChildrenAnchorsEditor",value:function value(){var t=this;this.children.forEach(function(n,i){var a=t.getAnchorX(i);n.wrapee.setAnchorPoint(a,n.wrapee.anchorY),n.wrapeeContainer.setAnchorPoint(a,n.wrapeeContainer.anchorY)})}},{key:"getChildrenAnchorsTweens",value:function value(t,n){return[j(t.wrapee).to(.3,{anchorX:n},{easing:"sineInOut"}).call(function(){t.wrapee.setAnchorPoint(n,t.wrapee.anchorY)}),j(t.wrapeeContainer).to(.3,{anchorX:n},{easing:"sineInOut"}).call(function(){t.wrapeeContainer.setAnchorPoint(n,t.wrapeeContainer.anchorY)})]}}]),e}(Zr)).prototype,"useAutoLayout",[qs],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return!0}}),Qs=h(pt.prototype,"children",[Ks],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return[]}}),$s=h(pt.prototype,"selected",[Vs],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return 0}}),h(pt.prototype,"selectedIndex",[Ys],Object.getOwnPropertyDescriptor(pt.prototype,"selectedIndex"),pt.prototype),h(pt.prototype,"deselectedIconWidth",[Js],Object.getOwnPropertyDescriptor(pt.prototype,"deselectedIconWidth"),pt.prototype),el=h(pt.prototype,"deselectedIconW",[Xs],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return 0}}),pt)),d._RF.pop(),d._RF.push({},"ca427NpeqpC3bUoGTd9I/BM","Background",void 0);var WT=f.ccclass,qT=jt.Layout;nl=WT("Background"),il=L.required(),nl((ol=h((al=function(l){E(o,l);var r=A(o);function o(){var e;S(this,o);for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return e=r.call.apply(r,[this].concat(n)),p(e,"sprite",ol,v(e)),e.handleSpriteTypeWhenLayoutChanged=function(a){a===qT.Landscape?e.setBackgroundType(oe.Type.TILED):e.setBackgroundType(oe.Type.SIMPLE)},e}return k(o,[{key:"__preload",value:function value(){this.sprite=this.getComponent(oe),L.validateRequiredProperties(this),this.listenGameEvents()}},{key:"listenGameEvents",value:function value(){me.on(we.LAYOUT_CHANGED,this.handleSpriteTypeWhenLayoutChanged,this)}},{key:"setBackgroundType",value:function value(e){this.sprite&&(this.sprite.type=e)}}]),o}(D)).prototype,"sprite",[il],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),al)),d._RF.pop(),d._RF.push({},"7ddc4vU74pB/LdHrUupDA/G","BlockLines",void 0);var sl,ll,ul,cl,hl,dl,pl,yl,vl,gn,bn,fl,ml,gl,bl,Sl,kl,KT=f.ccclass,VT=jt.Layout;KT("BlockLines")(function(l){E(o,l);var r=A(o);function o(){var e;S(this,o);for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return(e=r.call.apply(r,[this].concat(n))).handleSpriteTypeWhenLayoutChanged=function(a){a===VT.Landscape?e.setActiveBlockLines(!0):e.setActiveBlockLines(!1)},e}return k(o,[{key:"__preload",value:function value(){this.componentSprites=this.getComponentsInChildren(oe),this.validateRequiredComponents(),this.listenGameEvents(),this.handleBlockLinesOnStart()}},{key:"validateRequiredComponents",value:function value(){L.lazyValidateProperties(this)}},{key:"handleBlockLinesOnStart",value:function value(){var e=this.getScreenRatio()>.5490483162518301;this.setActiveBlockLines(e)}},{key:"listenGameEvents",value:function value(){me.on(we.LAYOUT_CHANGED,this.handleSpriteTypeWhenLayoutChanged)}},{key:"setActiveBlockLines",value:function value(e){var t=this;this.componentSprites&&this.componentSprites.forEach(function(n){n.node!==t.node&&(n.node.active=e)})}},{key:"getScreenRatio",value:function value(){return dt.getScreenWidthCss()/dt.getScreenHeightCss()}}]),o}(D)),d._RF.pop(),d._RF.push({},"4b299Dv1kVGcqQmJC9yBPAV","ButtonReleased",void 0);var YT=f.ccclass,JT=f.requireComponent,Jn=f.property,XT=f.disallowMultiple,ZT=f.executionOrder,QT=codex.analytics;sl=YT("ButtonReleased"),ll=JT([De,se]),ul=ZT(120),cl=Jn(Je),hl=Jn(Je),dl=Jn(Ce),pl=Jn({visible:function visible(){return this.useSound},type:Si}),yl=Jn({tooltip:"Add a delay after click to prevent spamming (not apply for cancel click)"}),vl=Jn({visible:function visible(){return this.disableSpamClick},tooltip:"Delay time in seconds"}),sl(gn=XT(gn=ll(gn=ul((fl=h((bn=function(l){E(o,l);var r=A(o);function o(){var e;S(this,o);for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return e=r.call.apply(r,[this].concat(n)),p(e,"downClipName",fl,v(e)),p(e,"upClipName",ml,v(e)),p(e,"useSound",gl,v(e)),p(e,"soundKey",bl,v(e)),p(e,"disableSpamClick",Sl,v(e)),p(e,"disableSpamDelay",kl,v(e)),e.currentClickBoundingBox=null,e.hasDown=!1,e.hasUp=!1,e.onTouchStart=function(a){if(e.buttonComponent.interactable&&!e.hasDown&&(e.currentClickBoundingBox=dt.getBoundingBoxToWorld(e.node),e.hasDown=!0,e.runAnimation(e.downClipName),e.useSound&&e.soundKey)){var s=bo[e.soundKey];s&&M.playSound(s)}},e.onTouchEnd=function(a){e.buttonComponent.interactable&&e.hasDown&&(e.hasUp||e.handleUp(a))},e.onTouchCancel=function(a){var s,u;if(e.buttonComponent.interactable&&e.hasDown&&!e.hasUp){var c=a.getUILocation(),y=null!=(s=null==(u=e.currentClickBoundingBox)?void 0:u.contains(c))&&s;_instanceof(a,Qr)&&y?e.handleUp(a):(e.hasUp=!0,e.runAnimation(e.upClipName),e.animationComponent.once(De.EventType.FINISHED,function(){e.handleResetButtonState()}))}},e.handleResetButtonState=function(){var a;if(e.hasDown=!1,e.hasUp=!1,e.buttonComponent){var s=e.buttonComponent.node.scale.x,u=e.buttonComponent.node.scale.z;null==(a=e.buttonComponent)||a.node.setScale(new I(s,1,u))}},e}return k(o,[{key:"__preload",value:function value(){this.buttonComponent=this.getComponent(se),this.animationComponent=this.getComponent(De),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function value(){L.lazyValidateProperties(this)}},{key:"onEnable",value:function value(){this.animationComponent.clips.length<2||(this.node.off(Oe.EventType.TOUCH_END,this.buttonComponent._onTouchEnded,this.buttonComponent),this.node.on(b.EventType.TOUCH_START,this.onTouchStart),this.node.on(b.EventType.TOUCH_END,this.onTouchEnd),this.node.on(b.EventType.TOUCH_CANCEL,this.onTouchCancel))}},{key:"onDisable",value:function value(){this.node.off(b.EventType.TOUCH_START,this.onTouchStart),this.node.off(b.EventType.TOUCH_END,this.onTouchEnd),this.node.off(b.EventType.TOUCH_CANCEL,this.onTouchCancel),this.unschedule(this.handleResetButtonState),this.handleResetButtonState()}},{key:"handleUp",value:function value(e){var t=this;this.hasUp=!0,this.runAnimation(this.upClipName),this.animationComponent.once(De.EventType.FINISHED,function(){if(t.disableSpamClick?t.scheduleOnce(t.handleResetButtonState,t.disableSpamDelay):t.handleResetButtonState(),!t.buttonComponent||t.buttonComponent.interactable){QT.event(Ludex.Plugins.Analytics.Events.BUTTON_CLICK,{button_name:t.node.name,screen_name:So.getCurrentPage()});var n=t.buttonComponent.clickEvents;if(n){var i,a=O(n);try{for(a.s();!(i=a.n()).done;){var s=i.value;s.emit([e,s.customEventData])}}catch(u){a.e(u)}finally{a.f()}}}})}},{key:"runAnimation",value:function value(e){if(!this.isAnimationExist(e))throw Error("".concat(this.node.name,": Animation component must have ").concat(e," clip"));this.animationComponent.play(e)}},{key:"isAnimationExist",value:function value(e){return this.animationComponent.clips.some(function(t){return!(!t||t.name!==e)})}}]),o}(D)).prototype,"downClipName",[cl],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return"ButtonDown"}}),ml=h(bn.prototype,"upClipName",[hl],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return"ButtonUp"}}),gl=h(bn.prototype,"useSound",[dl],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return!0}}),bl=h(bn.prototype,"soundKey",[pl],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return Si[Q.BUTTON_CLICK]}}),Sl=h(bn.prototype,"disableSpamClick",[yl],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return!1}}),kl=h(bn.prototype,"disableSpamDelay",[vl],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return .5}}),gn=bn))||gn)||gn)||gn),d._RF.pop(),d._RF.push({},"adccaBKYItKsqE+ZU1nBitm","AnimAbortSignal",void 0);var pa,Go,wl,Cl,$T=Ludex.Utils.Array,ya=function(){var r;function l(){S(this,l),this.K=[],this.Z=!1,this.le="",this.K=[]}return k(l,[{key:"aborted",get:function get(){return this.Z}},{key:"reason",get:function get(){return this.le}},{key:"addAbortListener",value:function value(o){this.K.push(o)}},{key:"removeAbortListener",value:function value(o){var e=$T.searchIndex(this.K,function(t){return t===o});-1!==e&&this.K.splice(e,1)}},{key:"abort",value:function value(o){if(!this.Z){this.Z=!0,this.le=o;var e,t=O(this.K);try{for(t.s();!(e=t.n()).done;){var n=e.value;"function"==typeof n&&n()}}catch(i){t.e(i)}finally{t.f()}this.K=[]}}},{key:"untilAborted",value:(r=B(function(){var o;return _ts_generator(this,function(_state){return(o=this,this.Z)?[2]:[2,new Promise(function(e){o.addAbortListener(function(){return e()})})]})}),function(){return r.apply(this,arguments)})},{key:"call",value:function value(o){this.aborted||o(this)}},{key:"callAsync",value:function value(o){return this.aborted?Promise.resolve():o(this)}},{key:"chain",value:function value(o){var e=this;_instanceof(o,l)?o.addAbortListener(function(){return e.abort()}):o.addEventListener("abort",function(){return e.abort()})}}],[{key:"hasBeenAborted",value:function value(o){return null==o||o.aborted}}]),l}();d._RF.pop(),d._RF.push({},"0e570DdAIZPKY6DNtNerFmX","OpacityToggler",void 0);var El,Al,Tl,Rl,Pl,_l,Ll,Bl,Dl,Ol,Mo,Ti,Il,Nl,Fl,zl,e1=f.ccclass,t1=f.requireComponent,xl=f.property,Uo=e1("OpacityToggler")(pa=t1([W])((wl=h((Go=function(l){E(e,l);var r,o=A(e);function e(){var t;S(this,e);for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];return t=o.call.apply(o,[this].concat(i)),p(t,"activeValue",wl,v(t)),p(t,"inActiveValue",Cl,v(t)),t.signal=new ya,t}return k(e,[{key:"__preload",value:function value(){this.opacityComponent=this.getComponent(W),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function value(){L.lazyValidateProperties(this)}},{key:"changeState",value:function value(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.signal.abort(),this.opacityComponent.opacity=t?this.activeValue:this.inActiveValue}},{key:"changeStateFade",value:(r=B(function(){var t,n,i,_arguments=arguments;return _ts_generator(this,function(_state){switch(_state.label){case 0:return t=_arguments.length>0&&void 0!==_arguments[0]&&_arguments[0],n=_arguments.length>1&&void 0!==_arguments[1]?_arguments[1]:.2,this.signal.abort(),this.signal=new ya,i=t?this.activeValue:this.inActiveValue,[4,Dt.runTweenAsync(j(this.opacityComponent).to(n,{opacity:i}),this.signal)];case 1:return _state.sent(),[2]}})}),function(){return r.apply(this,arguments)})}]),e}(D)).prototype,"activeValue",[xl],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return 255}}),Cl=h(Go.prototype,"inActiveValue",[xl],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return 128}}),pa=Go))||pa)||pa;d._RF.pop(),d._RF.push({},"08623z7mLxP/4DVAyNB9srK","DebugAdsPlugin",void 0);var Sn,Ho,n1=f.ccclass,va=f.property,i1=f.requireComponent,Gl=Ludex,wn=Gl.Events,Ml=Gl.Plugins.Ads,fa=(void 0===Ml?{}:Ml).Types,Ul=codex,a1=Ul.event,Cn=Ul.ads,o1={color:"#00FFFF",prefix:"LOADING"},r1={color:"#00FF00",prefix:"LOADED"},s1={color:"#FF00FF",prefix:"LOAD FAIL"},l1={color:"#FFFF00",prefix:"SHOWING..."},u1={color:"#00FF00",prefix:"SHOW"},c1={color:"#FF0000",prefix:"SHOW FAIL"},h1={color:"#AAAAAA",prefix:"CLOSED"};El=n1("DebugAdsPlugin"),Al=i1(W),Tl=L.required(),Rl=va(Y),Pl=L.required(),_l=va(Y),Ll=L.required(),Bl=va(Eo),Dl=L.required(),Ol=va(W),El(Mo=Al((Il=h((Ti=function(l){E(o,l);var r=A(o);function o(){var e;S(this,o);for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return e=r.call.apply(r,[this].concat(n)),p(e,"statusLabel",Il,v(e)),p(e,"timersLabel",Nl,v(e)),p(e,"logLabel",Fl,v(e)),p(e,"opacity",zl,v(e)),e.O=[],e.M=0,e.U=function(a){[[wn.AD_LOADING,e.Le],[wn.AD_LOADED,e.Be],[wn.AD_LOAD_FAILED,e.De],[wn.AD_SHOWING,e.Oe],[wn.AD_SHOW,e.Ie],[wn.AD_SHOW_FAILED,e.Ne],[wn.AD_CLOSED,e.Fe]].forEach(function(s){var u=Hn(s,2),c=u[0],y=u[1];a1[a](c,y)}),e.node[a](Oe.EventType.TOUCH_END,e.H),e.node[a](Oe.EventType.TOUCH_START,e.V)},e.ze=function(){if(Cn){var a=Cn.getAdsInstances();a&&0!==Object.keys(a).length?(e.I("Initialized ".concat(Object.keys(a).length," ad instances:"),"#00FF00"),Object.entries(a).forEach(function(s){var u=Hn(s,2),c=(u[0],u[1]),y=c.deviceOS,m=c.placementId;e.I("".concat(m," on ").concat(y),"#00FFFF")})):e.I("No ad instances initialized","#FFFF00")}else e.I("Ads plugin not available","#FF0000")},e.V=function(a){a.preventSwallow=0===e.opacity.opacity,a.touch&&e.opacity&&(Date.now()-e.M<300&&(255===e.opacity.opacity?e.opacity.opacity=0:e.opacity.opacity=255),e.M=Date.now())},e.H=function(a){a.preventSwallow=0===e.opacity.opacity},e.Le=function(a){return e.T(o1,a)},e.Be=function(a){return e.T(r1,a)},e.De=function(a){return e.T(s1,a)},e.Oe=function(a){return e.T(l1,a)},e.Ie=function(a){return e.T(u1,a)},e.Ne=function(a){return e.T(c1,a)},e.Fe=function(a){return e.T(h1,a)},e.T=function(a,s){var u=s.type,c=s.placementId;e.I("".concat(a.prefix,": ").concat(u," (").concat(c,")"),a.color)},e.I=function(a,s){var u=new Date().toLocaleTimeString().split(" ")[0],c="<color=".concat(s,">[").concat(u,"] ").concat(a,"</color>");e.O.push(c),e.O.length>20&&e.O.shift(),e.logLabel&&(e.logLabel.string=e.O.join("\n"))},e.ee=function(){if(fa){var a=Cn.enabled,s=Cn.getDeviceOS(),u=Cn.getDegradationTracking(),c=Cn.getSafeAreaBottom(1),y=he.getBannerAdHeight(),m="N/A",w="N/A";if(u){var _=u.lastSuccessTime;w=_>0?new Date(_).toLocaleTimeString():"Never",m="".concat(u.failedAttempts)}var g=Object.values(fa).filter(function(C){return!he.isAdEnabled(C)});e.statusLabel.string=["Enabled: ".concat(a),"DeviceOS: ".concat(s),"Last Success: ".concat(w),"Banner Height: ".concat(y),"SafeAreaBottom: ".concat(c),"Degradation Attempts: ".concat(m),"Disabled: ".concat(g.length?g.join(", "):"None")].join("\n")}},e.xe=function(){if(fa){var a=Cn.getLastCallAdShownTime();if(a){var s=Date.now()/1e3,u=Object.values(fa).map(function(c){var y=a[c]||0,m=y>0?(s-y).toFixed(1):"Never";return"".concat(c,": ").concat(m,"s")}).join("\n");e.timersLabel.string="Time Since Last Show\n".concat(u)}}},e}return k(o,[{key:"onLoad",value:function value(){var e=this;this.ze(),this.U("on"),this.schedule(function(){e.ee(),e.xe()},.5)}},{key:"onDestroy",value:function value(){this.U("off"),this.unscheduleAllCallbacks()}}]),o}(D)).prototype,"statusLabel",[Tl,Rl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Nl=h(Ti.prototype,"timersLabel",[Pl,_l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Fl=h(Ti.prototype,"logLabel",[Ll,Bl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),zl=h(Ti.prototype,"opacity",[Dl,Ol],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Mo=Ti))||Mo),d._RF.pop(),d._RF.push({},"7ef37Q3PZpKYaeik5JzGwNy","DebugResolution",void 0);var Hl,jl,Wl,ql,Kl,Vl,Yl,Jl,jo,ma,Xl,Zl,Ql,d1=f.ccclass,$l=f.property,p1=f.requireComponent,y1=f.disallowMultiple,v1=f.executeInEditMode,eu=jt.DesignSize,tu=eu.Portrait,nu=eu.Landscape;d1("DebugResolution")(Sn=y1(Sn=p1([ne])(Sn=v1(!0)(((Ho=function(l){E(o,l);var r=A(o);function o(){var e;S(this,o);for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return(e=r.call.apply(r,[this].concat(n))).handleLayoutChange=function(){var a;null==(a=e.graphics)||a.clear(),e.start()},e}return k(o,[{key:"drawPortrait",get:function get(){return o._drawPortrait},set:function set(e){e!==o._drawPortrait&&(e?this.drawPortraitResolution():this.graphics.clear(),o._drawPortrait=e,o._drawLandscape&&this.drawLandscapeResolution())}},{key:"drawLandscape",get:function get(){return o._drawLandscape},set:function set(e){e!==o._drawLandscape&&(e?this.drawLandscapeResolution():this.graphics.clear(),o._drawLandscape=e,o._drawPortrait&&this.drawPortraitResolution())}},{key:"__preload",value:function value(){this.graphics=this.getComponent(ne),this.validateRequiredComponents(),this.listenGameEvents()}},{key:"validateRequiredComponents",value:function value(){L.lazyValidateProperties(this)}},{key:"listenGameEvents",value:function value(){me.on(we.LAYOUT_CHANGED,this.handleLayoutChange)}},{key:"start",value:function value(){this.drawPortrait&&this.drawPortraitResolution(),this.drawLandscape&&this.drawLandscapeResolution()}},{key:"drawPortraitResolution",value:function value(){var e=this.graphics;if(e){var t=tu.WIDTH,n=tu.HEIGHT;e.strokeColor=le.GREEN,e.rect(-t/2,-n/2,t,n),e.stroke()}}},{key:"drawLandscapeResolution",value:function value(){var e=this.graphics;if(e){var t=nu.WIDTH,n=nu.HEIGHT;e.strokeColor=le.CYAN,e.rect(-t/2,-n/2,t,n),e.stroke()}}}]),o}(D))._drawPortrait=!0,Ho._drawLandscape=!0,h(Ho.prototype,"drawPortrait",[$l],Object.getOwnPropertyDescriptor(Ho.prototype,"drawPortrait"),Ho.prototype),h(Ho.prototype,"drawLandscape",[$l],Object.getOwnPropertyDescriptor(Ho.prototype,"drawLandscape"),Ho.prototype),Sn=Ho))||Sn)||Sn)||Sn),d._RF.pop(),d._RF.push({},"c4718hmr29IBpiwZUE/Uo4H","DebugScreenManager",void 0);var f1=f.ccclass,Wo=f.property,m1=f.requireComponent,Kt=Ludex.Events,g1=codex.event,b1={color:"#00FFFF",prefix:"OPEN"},S1={color:"#FFFF00",prefix:"OPENING..."},k1={color:"#00FF00",prefix:"OPENED"},w1={color:"#FF00FF",prefix:"CLOSE"},C1={color:"#FF0000",prefix:"CLOSING..."},E1={color:"#AAAAAA",prefix:"CLOSED"},A1={color:"#FFA500",prefix:"LOADING..."},T1={color:"#00FF00",prefix:"LOADED"};Hl=f1("DebugScreenManager"),jl=m1(W),Wl=L.required(),ql=Wo(Y),Kl=L.required(),Vl=Wo(Eo),Yl=L.required(),Jl=Wo(W),Hl(jo=jl((Xl=h((ma=function(l){E(o,l);var r=A(o);function o(){var e;S(this,o);for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return e=r.call.apply(r,[this].concat(n)),p(e,"statusLabel",Xl,v(e)),p(e,"logLabel",Zl,v(e)),p(e,"opacity",Ql,v(e)),e.M=0,e.O=[],e.te={},e.ue={},e.Ge=function(){var a;Ot(a={},Kt.OPEN_SCREEN,function(s){return e.T(b1,s)}),Ot(a,Kt.OPENING_SCREEN,function(s){e.T(S1,s)}),Ot(a,Kt.OPENED_SCREEN,function(s){return e.T(k1,s)}),Ot(a,Kt.CLOSE_SCREEN,function(s){return e.T(w1,s)}),Ot(a,Kt.CLOSING_SCREEN,function(s){e.T(C1,s)}),Ot(a,Kt.CLOSED_SCREEN,function(s){return e.T(E1,s)}),Ot(a,Kt.LOADING_SCREEN,function(s){return e.T(A1,s)}),Ot(a,Kt.SCREEN_LOADED,function(s){return e.T(T1,s)}),e.ue=a},e.U=function(a){Object.entries(e.ue).forEach(function(s){var u=Hn(s,2),c=u[0],y=u[1];g1[a](c,y)}),e.node[a](Oe.EventType.TOUCH_END,e.H),e.node[a](Oe.EventType.TOUCH_START,e.V)},e.Me=function(a){e.te=a},e.ce=function(){var a=V.getScene(),s=(null==a?void 0:a.getComponentsInChildren("BaseScreen"))||[],u=s.filter(function(c){return c.node.active});return{sceneName:(null==a?void 0:a.name)||"Unknown",all:s,active:u}},e.Ue=function(){var a=e.ce(),s=a.all,u=a.active;s.length>0&&(e.I("Found ".concat(s.length," screens in scene"),"#00FF00"),u.forEach(function(c){e.I("Active: ".concat(c.node.name),"#00FFFF")}))},e.V=function(a){if(a.preventSwallow=0===e.opacity.opacity,a.touch&&e.opacity){if(Date.now()-e.M<300){var s=e.opacity.opacity;e.opacity.opacity=255*(255!==s)}e.M=Date.now()}},e.H=function(a){a.preventSwallow=0===e.opacity.opacity},e.T=function(a,s){var u=s.screenName;e.I("".concat(a.prefix,": ").concat(u),a.color)},e.I=function(a,s){var u=new Date().toLocaleTimeString().split(" ")[0],c="<color=".concat(s,">[").concat(u,"] ").concat(a,"</color>");e.O.push(c),e.O.length>30&&e.O.shift(),e.logLabel&&(e.logLabel.string=e.O.join("\n"))},e.ee=function(){var a=e.ce().sceneName;if(e.te){var u=Object.values(e.te).sort(function(c,y){return c.order-y.order}).map(function(c){var y={queued:"Queued",loading:"Loading",prefab:"Loaded",ready:"Ready"}[c.state];return"ready"===c.state&&c.screen.node.active&&(y="Active"),"[".concat(y,"] ").concat(c.name)});e.statusLabel.string=["Scene: ".concat(a),"Screens (".concat(u.length,"):")].concat(He(u)).join("\n")}else e.statusLabel.string="Scene: ".concat(a,"\nScreenManager not ready")},e}return k(o,[{key:"onLoad",value:function value(){var e=this;this.Ge(),this.Ue(),this.U("on"),me.on("DEBUG_SCREEN_STATES",this.Me),this.schedule(function(){me.emit("DEBUG_REQUEST_SCREEN_STATES"),e.ee()},.5)}},{key:"onDestroy",value:function value(){this.U("off"),this.unscheduleAllCallbacks()}}]),o}(D)).prototype,"statusLabel",[Wl,ql],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Zl=h(ma.prototype,"logLabel",[Kl,Vl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ql=h(ma.prototype,"opacity",[Yl,Jl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),jo=ma))||jo),d._RF.pop(),d._RF.push({},"0405b+DQy1IALb/j8jx5Lpc","PerfCounter",void 0);var iu,au,ou,ru,su,lu,uu,cu,hu,du,pu,yu,vu,fu,mu,gu,bu,Su,ku,wu,Cu,Eu,Au,Tu,Ru,Pu,_u,Lu,Bu,Du,Ou,Ri,Fe,Iu,Nu,Fu,zu,xu,Gu,Mu,Uu,Hu,ju,Wu,qu,Ku,Vu,ga=function(){function l(){S(this,l),this.time=0,this._value=0,this.time=0,this._value=0}return k(l,[{key:"value",get:function get(){return this._value}},{key:"start",value:function value(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.time=r}},{key:"end",value:function value(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this._value=r-this.time}}]),l}();d._RF.pop(),d._RF.push({},"0e2d6yn/BVObK1kyTJ5a09a","GameStats",void 0);var R1=f.ccclass,P1=f.executionOrder,We=f.property,_1=f.requireComponent,Yu=Ludex,qo=Yu.Utils,L1=qo.Valid,B1=qo.Array,D1=qo.Device,O1=Yu.Configs.Debugger.ListPlayerDevIds,I1=codex.player,yt=le.RED,vt=le.YELLOW,N1=le.WHITE,F1=le.BLACK;iu=R1("GameStats"),au=P1(-1e3),ou=_1([W]),ru=L.required(),su=We(Y),lu=L.required(),uu=We(Y),cu=L.required(),hu=We(Y),du=L.required(),pu=We(Y),yu=L.required(),vu=We(Y),fu=L.required(),mu=We(Y),gu=L.required(),bu=We(Y),Su=L.required(),ku=We(Y),wu=L.required(),Cu=We(Y),Eu=L.required(),Au=We(Y),Tu=L.required(),Ru=We(Y),Pu=L.required(),_u=We(Y),Lu=L.required(),Bu=We(oe),Du=L.required(),Ou=We(W),iu(Ri=au(Ri=ou((Iu=h((Fe=function(l){E(o,l);var r=A(o);function o(){var e;S(this,o);for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return e=r.call.apply(r,[this].concat(n)),p(e,"dprLabel",Iu,v(e)),p(e,"fpsLabel",Nu,v(e)),p(e,"fpsRawLabel",Fu,v(e)),p(e,"drawCountLabel",zu,v(e)),p(e,"rafTimeLabel",xu,v(e)),p(e,"deltaTimeLabel",Gu,v(e)),p(e,"logicTimeLabel",Mu,v(e)),p(e,"physicTimeLabel",Uu,v(e)),p(e,"renderTimeLabel",Hu,v(e)),p(e,"totalMemoryLabel",ju,v(e)),p(e,"objectMemoryLabel",Wu,v(e)),p(e,"textureMemoryLabel",qu,v(e)),p(e,"bg",Ku,v(e)),p(e,"opacity",Vu,v(e)),e.he=0,e.He=1,e.je=.5,e.We=.16,e.de=!1,e.M=0,e.Y=!1,e.qe=function(){e.node.on(Oe.EventType.TOUCH_START,e.V),e.node.on(Oe.EventType.TOUCH_MOVE,e.pe),e.node.on(Oe.EventType.TOUCH_END,e.H),e.node.on(Oe.EventType.TOUCH_CANCEL,e.H),e.node.on(Oe.EventType.MOUSE_WHEEL,function(){me.emit(we.REQUEST_DYNAMIC_ATLAS)})},e.V=function(a){a.preventSwallow=0===e.opacity.opacity,a.touch&&e.opacity&&(e.Y=!1,Date.now()-e.M<300&&(255===e.opacity.opacity?e.opacity.opacity=0:(e.opacity.opacity=255,me.emit(we.REQUEST_DYNAMIC_ATLAS))),e.M=Date.now())},e.pe=function(a){if(a.preventSwallow=0===e.opacity.opacity,a.touch&&e.opacity){var s=a.touch.getUIDelta();!e.Y&&s.length()>10&&(e.Y=!0),e.Y&&e.node.setPosition(e.node.position.x+s.x,e.node.position.y+s.y)}},e.H=function(a){a.preventSwallow=0===e.opacity.opacity,a.touch&&e.opacity&&(e.Y||(e.bg.enabled=!e.bg.enabled,e.de=e.bg.enabled),e.Y=!1)},e.ye=function(){return L1.isDebugger()||B1.has(O1,I1.getPlayerId())},e.Ke=function(){e.schedule(e.ve,e.We),e.schedule(e.fe,e.He),e.schedule(e.me,e.je),requestAnimationFrame(e.ge)},e.ve=function(){e.Ve(),e.Ye(),e.Je()},e.fe=function(){e.Xe(),e.Ze(),e.Qe(),e.$e(),e.et()},e.me=function(){e.tt(),e.nt(),e.it(),e.at()},e.ot=function(a){var s;null!=(s=e.node)&&s.isValid&&(e.Q.end(a),e.he=a,e.ge())},e.ge=function(){e.Q.start(e.he),requestAnimationFrame(e.ot)},e.tt=function(){var a=e.rt();e.st(a),e.fpsLabel.string="FPS: ".concat(a)},e.st=function(a){a<30?e.fpsLabel.color=yt:a<48?e.fpsLabel.color=vt:e.P(e.fpsLabel)},e.Ve=function(){var a=e.lt();e.ut(a),e.fpsRawLabel.string="FPS Raw: ".concat(a)},e.ut=function(a){a<30?e.fpsRawLabel.color=yt:a<48?e.fpsRawLabel.color=vt:e.P(e.fpsRawLabel)},e.Ze=function(){var a=e.ct();e.ht(a),e.drawCountLabel.string="Draw Calls: ".concat(a)},e.ht=function(a){var s=ce.os===ce.OS.IOS;a>(s?80:40)?e.drawCountLabel.color=yt:a>(s?60:25)?e.drawCountLabel.color=vt:e.P(e.drawCountLabel)},e.Ye=function(){var a=e.dt();e.pt(a),e.rafTimeLabel.string="RAF Time: ".concat(a,"ms")},e.pt=function(a){a>33?e.rafTimeLabel.color=yt:a>20?e.rafTimeLabel.color=vt:e.P(e.rafTimeLabel)},e.Je=function(){var a=e.yt();e.vt(a),e.deltaTimeLabel.string="Delta Time: ".concat(a,"ms")},e.vt=function(a){a>33?e.deltaTimeLabel.color=yt:a>20?e.deltaTimeLabel.color=vt:e.P(e.deltaTimeLabel)},e.nt=function(){var a=e.ft();e.mt(a),e.logicTimeLabel.string="Logic Time: ".concat(a,"ms")},e.mt=function(a){a>10?e.logicTimeLabel.color=yt:a>5?e.logicTimeLabel.color=vt:e.P(e.logicTimeLabel)},e.it=function(){var a=e.gt();e.bt(a),e.physicTimeLabel.string="Physic Time: ".concat(a,"ms")},e.bt=function(a){a>10?e.physicTimeLabel.color=yt:a>5?e.physicTimeLabel.color=vt:e.P(e.physicTimeLabel)},e.at=function(){var a=e.St();e.kt(a),e.renderTimeLabel.string="Render Time: ".concat(a,"ms")},e.kt=function(a){a>10?e.renderTimeLabel.color=yt:a>5?e.renderTimeLabel.color=vt:e.P(e.renderTimeLabel)},e.et=function(){var a=e.wt();e.Ct(a),e.textureMemoryLabel.string="Texture Memory: ".concat(a,"MB")},e.Ct=function(a){a>200?e.textureMemoryLabel.color=yt:a>100?e.textureMemoryLabel.color=vt:e.P(e.textureMemoryLabel)},e.Qe=function(){if(e.totalMemoryLabel){var a=(window.performance||{}).memory;if(a){var s=a.jsHeapSizeLimit/1048576;e.P(e.totalMemoryLabel),e.totalMemoryLabel.string="Total Memory: ".concat(e.N(s,0),"MB")}}},e.$e=function(){var a=(window.performance||{}).memory;if(a){var s=a.usedJSHeapSize/1048576,u=a.jsHeapSizeLimit/1048576;e.Et(s,u),e.objectMemoryLabel.string="Object Memory: ".concat(e.N(s),"MB")}},e.Et=function(a,s){var u=s>0?a/s*100:0;u>80?e.objectMemoryLabel.color=yt:u>50?e.objectMemoryLabel.color=vt:e.P(e.objectMemoryLabel)},e.Xe=function(){var a=D1.pixelRatio();e.At(a),e.dprLabel.string="DPR: ".concat(a)},e.At=function(a){a>2?e.dprLabel.color=yt:a<=1?e.dprLabel.color=vt:e.P(e.dprLabel)},e.P=function(a){var s=e.de?F1:N1;a.color.equals(s)||(a.color=s)},e.rt=function(){return V.root&&Math.round(V.root.fps)||0},e.ct=function(){return V.root&&V.root.device.numDrawCalls||0},e.N=function(a){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return Number(a.toFixed(s))||0},e.lt=function(){return e.N(1e3/e.Q.value,0)},e.dt=function(){return e.N(e.Q.value)},e.yt=function(){return e.N(1e3*me.deltaTime)},e.ft=function(){return e.N(e.ne.value)},e.gt=function(){return e.N(e.ie.value)},e.St=function(){return e.N(e.ae.value)},e.wt=function(){if(!V.root)return 0;var a=V.root.device.memoryStatus;return e.N(a.textureSize/1048576,4)||0},e.be=function(){var a=performance.now();e.ne.start(a)},e.Se=function(){var a=performance.now();e.ne.end(a)},e.ke=function(){var a=performance.now();e.ie.start(a)},e.we=function(){var a=performance.now();e.ie.end(a)},e.Ce=function(){var a=performance.now();e.ae.start(a)},e.Ee=function(){var a=performance.now();e.ae.end(a)},e}return k(o,[{key:"__preload",value:function value(){this.qe()}},{key:"onLoad",value:function value(){L.validateRequiredProperties(this)}},{key:"start",value:function value(){this.bg.enabled=!1,this.ye()?(this.node.active=!0,this.Q=new ga,this.ne=new ga,this.ie=new ga,this.ae=new ga,V.on(pe.EVENT_BEFORE_UPDATE,this.be,this),V.on(pe.EVENT_AFTER_UPDATE,this.Se,this),V.on(pe.EVENT_BEFORE_PHYSICS,this.ke,this),V.on(pe.EVENT_AFTER_PHYSICS,this.we,this),V.on(pe.EVENT_BEFORE_DRAW,this.Ce,this),V.on(pe.EVENT_AFTER_DRAW,this.Ee,this),this.Ke()):this.node.active=!1}},{key:"onDestroy",value:function value(){this.ye()&&(V.off(pe.EVENT_BEFORE_UPDATE,this.be,this),V.off(pe.EVENT_AFTER_UPDATE,this.Se,this),V.off(pe.EVENT_BEFORE_PHYSICS,this.ke,this),V.off(pe.EVENT_AFTER_PHYSICS,this.we,this),V.off(pe.EVENT_BEFORE_DRAW,this.Ce,this),V.off(pe.EVENT_AFTER_DRAW,this.Ee,this),this.unschedule(this.fe),this.unschedule(this.ve),this.unschedule(this.me),this.node.off(Oe.EventType.TOUCH_START,this.V),this.node.off(Oe.EventType.TOUCH_MOVE,this.pe),this.node.off(Oe.EventType.TOUCH_END,this.H),this.node.off(Oe.EventType.TOUCH_CANCEL,this.H))}}]),o}(D)).prototype,"dprLabel",[ru,su],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Nu=h(Fe.prototype,"fpsLabel",[lu,uu],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Fu=h(Fe.prototype,"fpsRawLabel",[cu,hu],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),zu=h(Fe.prototype,"drawCountLabel",[du,pu],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xu=h(Fe.prototype,"rafTimeLabel",[yu,vu],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Gu=h(Fe.prototype,"deltaTimeLabel",[fu,mu],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Mu=h(Fe.prototype,"logicTimeLabel",[gu,bu],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Uu=h(Fe.prototype,"physicTimeLabel",[Su,ku],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Hu=h(Fe.prototype,"renderTimeLabel",[wu,Cu],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ju=h(Fe.prototype,"totalMemoryLabel",[Eu,Au],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Wu=h(Fe.prototype,"objectMemoryLabel",[Tu,Ru],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),qu=h(Fe.prototype,"textureMemoryLabel",[Pu,_u],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ku=h(Fe.prototype,"bg",[Lu,Bu],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Vu=h(Fe.prototype,"opacity",[Du,Ou],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ri=Fe))||Ri)||Ri),d._RF.pop(),d._RF.push({},"ca922n1V0RLioEyUJg8hQXH","GameEvents",void 0);var l,Ju,F=((l=F||{}).NEXT_LEVEL="next-level",l.UPDATE_LEVEL="update-level",l.START_OVER="start-over",l.SELECT_LEVEL="select-level",l.GAME_START="game-start",l.GAME_PAUSE="game-pause",l.GAME_RESUME="game-resume",l.GAME_REPLAY="game-replay",l.SHOW_HINT="show-hint",l.SKIP_LEVEL="skip-level",l.TIME_OUT="time-out",l.DRAWING="drawing",l.DOGE_DIE="doge-die",l.DOGE_SURVIVE="doge-survive",l.BEE_DIE="bee-die",l.BEE_ATTACK="bee-attack",l.BIG_BEE_DIE="big-bee-die",l.GAME_OBJECTS_SPAWNED="game-objects-spawned",l);d._RF.pop(),d._RF.push({},"8249dDH5xBEc4nnCGRgSjaW","PanelAnimationController",void 0);var Xu,Zu,Vt,$u,ec,tc,nc,ic,ac,oc,rc,sc,lc,Ko,uc,cc,hc=(0,f.ccclass)("PanelAnimationController")(Ju=function(l){E(o,l);var r=A(o);function o(){S(this,o);for(var e,a,a1,t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return(e=r.call.apply(r,[this].concat(n))).animators=new Set,e.eventTarget=new $r,e.handleRegistration=function(a){if(!a)throw Error("Invalid event payload.");e.animators.has(a),e.animators.add(a)},e.handleUnregistration=function(a){if(!a)throw Error("Invalid event payload.");e.animators.has(a),e.animators.delete(a)},a=B(function(s){var u,c,y,m,w,_,g,C,P,z,K,Z;return _ts_generator(this,function(_state){switch(_state.label){case 0:m=!1,w=[],_=O(e.animators);try{for(_.s();!(y=_.n()).done;)g=y.value,w.push(g)}catch(ae){_.e(ae)}finally{_.f()}for(C=[],P=0,z=w;P<z.length;P++)(Z=z[P]).isReadyForAnimation()||m||(m=!0,null==s||null==(K=s.fallback)||K.call(s)),C.push(Z.handleShowUI());return[4,Promise.all(C)];case 1:return _state.sent(),null==s||null==(u=s.onComplete)||u.call(s),null==(c=e.eventTarget)||c.emit(F.SHOW_UI),[2]}})}),e.handleShowUIs=function(s){return a.apply(this,arguments)},a1=B(function(s){var u,c,y,m,w,_,g,C,P,z,K,Z;return _ts_generator(this,function(_state){switch(_state.label){case 0:m=!1,w=[],_=O(e.animators);try{for(_.s();!(y=_.n()).done;)g=y.value,w.push(g)}catch(ae){_.e(ae)}finally{_.f()}for(C=[],P=0,z=w;P<z.length;P++)(Z=z[P]).isReadyForAnimation()||m||(m=!0,null==s||null==(K=s.fallback)||K.call(s)),C.push(Z.handleHideUI());return[4,Promise.all(C)];case 1:return _state.sent(),null==s||null==(u=s.onComplete)||u.call(s),null==(c=e.eventTarget)||c.emit(F.HIDE_UI),[2]}})}),e.handleHideUIs=function(s){return a1.apply(this,arguments)},e}return k(o,[{key:"onEnable",value:function value(){this.node.scene.on(F.SHOW_UI,this.handleShowUIs,this),this.node.scene.on(F.HIDE_UI,this.handleHideUIs,this)}},{key:"onDisable",value:function value(){this.node.scene.off(F.SHOW_UI,this.handleShowUIs,this),this.node.scene.off(F.HIDE_UI,this.handleHideUIs,this)}},{key:"showUI",value:function value(){return this.handleShowUIs()}},{key:"hideUI",value:function value(){return this.handleHideUIs()}},{key:"on",value:function value(e,t,n,i){this.eventTarget.on(e,t,n,i)}},{key:"off",value:function value(e,t,n){this.eventTarget.off(e,t,n)}}],[{key:"getController",value:function value(e){for(var t=null,n=e;null!==n&&!(t=n.getComponent(o));)n=n.parent;return t}},{key:"registerAnimator",value:function value(e){var t=this.getController(e.node);t&&t.handleRegistration(e)}},{key:"unregisterAnimator",value:function value(e){var t=this.getController(e.node);t&&t.handleUnregistration(e)}}]),o}(D))||Ju;d._RF.pop(),d._RF.push({},"f190aWZvVlGiplYX4XrZG3a","PanelAnimator",void 0);var Yt,dc=f.ccclass,zt=f.property,x1=Ludex.Utils.Object,Xn=(Xu=dc("AnimationConfig"),Zu=zt({type:[It]}),Xu(($u=h((Vt=function(){function l(){S(this,l),p(this,"startHidden",$u,this),p(this,"nodes",ec,this),p(this,"posOffset",tc,this),p(this,"showEase",nc,this),p(this,"hideEase",ic,this),p(this,"showDuration",ac,this),p(this,"hideDuration",oc,this)}return k(l,[{key:"setConfig",value:function value(r){r&&x1.assign(this,r)}}]),l}()).prototype,"startHidden",[zt],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return!0}}),ec=h(Vt.prototype,"nodes",[Zu],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return[]}}),tc=h(Vt.prototype,"posOffset",[zt],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return 0}}),nc=h(Vt.prototype,"showEase",[zt],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return"backOut"}}),ic=h(Vt.prototype,"hideEase",[zt],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return"backIn"}}),ac=h(Vt.prototype,"showDuration",[zt],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return 0}}),oc=h(Vt.prototype,"hideDuration",[zt],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return 0}}),Vt))||Vt);rc=dc("PanelAnimator"),sc=zt({type:Xn,displayName:"Top animation nodes"}),lc=zt({type:Xn,displayName:"Bottom animation nodes"}),rc((uc=h((Ko=function(l){E(t,l);var r,o,e=A(t);function t(){var n;S(this,t);for(var i=arguments.length,a=Array(i),s=0;s<i;s++)a[s]=arguments[s];return n=e.call.apply(e,[this].concat(a)),p(n,"topConfig",uc,v(n)),p(n,"botConfig",cc,v(n)),n.isReady=!1,n}return k(t,[{key:"onEnable",value:function value(){hc.registerAnimator(this)}},{key:"onDisable",value:function value(){hc.unregisterAnimator(this)}},{key:"onLoad",value:function value(){this.topAnimator=this.createAnimator(this.topConfig,"top"),this.botAnimator=this.createAnimator(this.botConfig,"bottom"),this.initUIPos(),this.isReady=!0}},{key:"initUIPos",value:function value(){this.topAnimator.switchState(this.topConfig.startHidden?"hidden":"shown",!0),this.botAnimator.switchState(this.botConfig.startHidden?"hidden":"shown",!0)}},{key:"isReadyForAnimation",value:function value(){return this.isReady}},{key:"handleShowUI",value:(o=B(function(){return _ts_generator(this,function(_state){return this.isReady?[2,Promise.all([this.topAnimator.switchState("shown"),this.botAnimator.switchState("shown")])]:[2]})}),function(){return o.apply(this,arguments)})},{key:"handleHideUI",value:(r=B(function(){return _ts_generator(this,function(_state){return this.isReady?[2,Promise.all([this.topAnimator.switchState("hidden"),this.botAnimator.switchState("hidden")])]:[2]})}),function(){return r.apply(this,arguments)})},{key:"createAnimator",value:function value(n,i){var P,a=n.nodes,s=n.posOffset,u=n.showEase,c=n.hideEase,y=n.showDuration,m=n.hideDuration,w=a.map(function(P){return"top"===i&&P.isAlignTop?{mode:"top",value:P.top}:"bottom"===i&&P.isAlignBottom?{mode:"bottom",value:P.bottom}:{mode:"position",value:P.node.position.y}}),_=a.map(function(P){return"top"===i&&P.isAlignTop?{mode:"top",value:P.top+s}:"bottom"===i&&P.isAlignBottom?{mode:"bottom",value:P.bottom-s}:{mode:"position",value:P.node.position.y+s}}),g="shown",C=new ya;return{switchState:(P=B(function(z){var K,Z,ae,ue,te,ht,Re,_arguments=arguments;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(K=_arguments.length>1&&void 0!==_arguments[1]&&_arguments[1],C.abort(),C=Z=new ya,g===z)return[3,4];if(g=z,ae="hidden"===z?w:_,ue="hidden"===z?_:w,te="hidden"===z?m:y,ht="hidden"===z?c:u,Re=function Re(){for(var Pe=0,Me=a.length;Pe<Me;Pe++){var Ue=a[Pe],it=ae[Pe],pn=ue[Pe].value;t.setToTargetImmediately(Ue,it,pn)}},!K)return[3,1];return Re(),[3,3];case 1:return Z.addAbortListener(Re),[4,Promise.all(a.map(function(Pe,Me){var Ue=ae[Me],it=ue[Me].value;return Dt.runTweenAsync(t.getTween({widget:Pe,config:Ue,target:it,easing:ht,duration:te}),Z)}))];case 2:_state.sent(),Z.aborted||Z.removeAbortListener(Re),_state.label=3;case 3:_state.label=4;case 4:return[2]}})}),function(z){return P.apply(this,arguments)})}}},{key:"setAnimator",value:function value(n){var i=n.topConfig,a=n.botConfig,s=new Xn,u=new Xn;s.setConfig(i),u.setConfig(a),this.topConfig=s,this.botConfig=u,this.topAnimator=this.createAnimator(this.topConfig,"top"),this.botAnimator=this.createAnimator(this.botConfig,"bottom"),this.initUIPos()}}],[{key:"getTween",value:function value(n){var i=n.widget,a=n.config,s=n.target,u=n.easing,c=n.duration;return"top"===a.mode?j(i).call(function(){i.top=a.value}).to(c,{top:s},{easing:u}):"bottom"===a.mode?j(i).call(function(){i.bottom=a.value}).to(c,{bottom:s},{easing:u}):j(i.node.position).call(function(){i.node.setPosition(i.node.position.x,a.value,i.node.position.z)}).to(c,{y:s},{easing:u})}},{key:"setToTargetImmediately",value:function value(n,i,a){"top"===i.mode&&(n.top=a),"bottom"===i.mode&&(n.bottom=a);var s=n.node.position.x,c=n.node.position.z;n.node.setPosition(s,a,c)}}]),t}(D)).prototype,"topConfig",[sc],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return new Xn}}),cc=h(Ko.prototype,"botConfig",[lc],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return new Xn}}),Ko)),d._RF.pop(),d._RF.push({},"21a9aAlkBtGxKLqip8g0o6l","ParticleSystem2DExtra",void 0);var M1=f.ccclass,U1=f.disallowMultiple,H1=f.executeInEditMode,j1=f.requireComponent,W1=M1("ParticleSystem2DExtra")(Yt=H1(!0)(Yt=U1(!0)(Yt=j1(Wt)(Yt=function(l){E(o,l);var r=A(o);function o(){var e;S(this,o);for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return(e=r.call.apply(r,[this].concat(n))).emitParticle=function(a){return function(s){a(s);var u=e.particleSystem._simulator.particles.length,c=e.particleSystem._simulator.particles[u-1];e.initParticle(c)}},e.step=function(a){return function(s){for(var u=e.particleSystem._simulator.particles,c=0;c<u.length;c++){var y=u[c];e.updateParticle(y,s)}a(s)}},e}return k(o,[{key:"__preload",value:function value(){this.particleSystem=this.getComponent(Wt),this.validateRequiredComponents(),this.overrideFunctions()}},{key:"overrideFunctions",value:function value(){var e=this.particleSystem._simulator.emitParticle.bind(this.particleSystem._simulator);this.particleSystem._simulator.emitParticle=this.emitParticle(e);var t=this.particleSystem._simulator.step.bind(this.particleSystem._simulator);this.particleSystem._simulator.step=this.step(t)}},{key:"validateRequiredComponents",value:function value(){L.lazyValidateProperties(this)}}]),o}(D))||Yt)||Yt)||Yt)||Yt;d._RF.pop(),d._RF.push({},"9a5a3MgLaRAKbHluGCPsA8j","ExampleParticleSystem2DExtra",void 0),(0,f.ccclass)("ExampleParticleSystem2DExtra")(function(l){E(o,l);var r=A(o);function o(){return S(this,o),r.apply(this,arguments)}return k(o,[{key:"initParticle",value:function value(e){e.maxSize=U.randomRange(.25,1)*e.size,e.size=0,e.deltaSize=0,e.cycleDuration=U.randomRange(.4,.6),e.life=e.timeToLive,this.setInitPosition(e.pos)}},{key:"updateParticle",value:function value(e,t){this.updateScale(e)}},{key:"setInitPosition",value:function value(e){var t=e.x,n=e.y;return e.x=t+U.randomRange(-350,350),e.y=n+U.randomRange(-350,350),e}},{key:"updateScale",value:function value(e){var t=1-(e.life-e.timeToLive)%e.cycleDuration/e.cycleDuration;e.size=e.maxSize*Math.sin(t*Math.PI)}}]),o}(W1)),d._RF.pop(),d._RF.push({},"6ea01hdw/9MHb28SCDAiRss","ResizeWithBannerAd",void 0);var pc,yc,vc,fc,mc,gc,bc,Sc,kc,wc,Cc,Ec,Ac,Tc,Vo,En,Rc,Pc,_c,Lc,Bc,Dc,Oc,Ic,Nc,Fc,zc,xc,Gc,ba,Zn,Mc,Uc,Hc,jc,Wc,q1=f.ccclass,K1=f.requireComponent,Qn=f.property,qc=codex,ft=qc.ads,V1=qc.event,Yo=Ludex,Jo=Yo.Events,Kc=Yo.Plugins.Ads,Vc=void 0===Kc?{}:Kc,rt=Vc.Types,Xo=Vc.Status,Zo=Yo.Utils,Sa=Zo.Array,Y1=Zo.Function,J1=Zo.Device,X1=["top","topleft","topright"],Z1=["bottom","bottomleft","bottomright"],Q1=["left","topleft","bottomleft"],$1=["right","topright","bottomright"];pc=q1("ResizeWithBannerAd"),yc=K1(It),vc=L.required(),fc=Qn(Ce),mc=L.required(),gc=Qn(Ce),bc=L.required(),Sc=Qn(Ce),kc=L.required(),wc=Qn(Ce),Cc=L.required(),Ec=Qn(Ce),Ac=L.required(),Tc=Qn(It),pc(Vo=yc((Rc=h((En=function(l){E(o,l);var r=A(o);function o(){var e;S(this,o);for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return e=r.call.apply(r,[this].concat(n)),p(e,"includeSAB",Rc,v(e)),p(e,"includeRightBanner",Pc,v(e)),p(e,"includeBottomBanner",_c,v(e)),p(e,"includeLeftBanner",Lc,v(e)),p(e,"closeWhenAdFailed",Bc,v(e)),p(e,"widget",Dc,v(e)),e.U=function(a){[[Jo.AD_SHOWING,e.Tt],[Jo.AD_CLOSED,e.Rt],[Jo.AD_SHOW_FAILED,e.Pt],[we.VIEW_RESIZED,e.Ae]].forEach(function(s){var u=Hn(s,2),c=u[0],y=u[1];V1[a](c,y)})},e.Tt=function(a){var s=a.placementId,u=a.type;if(e.$()&&s&&rt&&u===rt.BANNER){try{if(!ft.getAd(rt.BANNER,s))return}catch(unused){return}e.Te(s),e.emitResizeEvent()}},e.Rt=function(a){var s=a.placementId,u=a.type;if(e.$()&&s&&rt&&u===rt.BANNER){try{if(!ft.getAd(rt.BANNER,s))return}catch(unused){return}e.oe(s),e.emitResizeEvent()}},e.Pt=function(a){var s=a.placementId,u=a.type;e.closeWhenAdFailed&&e.$()&&s&&rt&&u===rt.BANNER&&(e.oe(s),e.emitResizeEvent())},e.Ae=function(){if(e.$()&&rt&&Xo)if(he.isAdEnabled(rt.BANNER)){var a=ft.getAdsByType(rt.BANNER);0!==a.length?a.forEach(function(s){var u=ft.getAdStatus(rt.BANNER,s.placementId);u&&(u===Xo.SHOWING||J1.isIOS()?e.Te(s.placementId):u===Xo.IDLE&&e.oe(s.placementId))}):e.Re()}else e.Re()},e._t=function(a,s){try{var u=ft.getBannerConfig(a),c=u.PlacementId,y=u.Position,m=e.includeSAB&&"bottom"===y;return ft.getBannerHeight(c,s,m)}catch(unused){return 0}},e.Te=function(a){var s,u,c,y,m=dt.cssSizeToWorldSize(1),w=e._t(a,m),_=ft.getBannerConfig(a),g=_.BannerWidth,C=_.Position;if("top"===C)s=w;else if("bottom"===C)e.includeBottomBanner?u=w:e.includeSAB&&(u=ft.getSafeAreaBottom(m));else if("left"===C||"right"===C){if(void 0===g)return;var P=g;"getBannerOffset"in GameSDK.extra&&(P+=GameSDK.extra.getBannerOffset()),"left"===C&&e.includeLeftBanner?c=P*m:"right"===C&&e.includeRightBanner&&(y=P*m)}e.re({top:s,bottom:u,left:c,right:y})},e.oe=function(a){var s=ft.getBannerConfig(a).Position,u=dt.cssSizeToWorldSize(1),c=e.includeSAB?ft.getSafeAreaBottom(u):0;e.re({top:Sa.has(X1,s)?0:void 0,bottom:Sa.has(Z1,s)?c:void 0,left:Sa.has(Q1,s)?0:void 0,right:Sa.has($1,s)?0:void 0})},e.Re=function(){var a=dt.cssSizeToWorldSize(1),s=e.includeSAB?ft.getSafeAreaBottom(a):0;e.re({bottom:s})},e.re=function(a){var s=a.top,u=a.bottom,c=a.left,y=a.right;e.widget.top=null!=s?s:e.widget.top,e.widget.bottom=null!=u?u:e.widget.bottom,e.widget.left=null!=c?c:e.widget.left,e.widget.right=null!=y?y:e.widget.right,Wn.instance.emit("canvas-resize")},e.emitResizeEvent=Y1.debounce(function(){me.emit(we.WIDGET_RESIZED)},100),e.$=function(){return e.node.activeInHierarchy&&null!==e.node.parent&&void 0!==e.node.parent},e}return k(o,[{key:"__preload",value:function value(){L.validateRequiredProperties(this),this.U("on")}},{key:"onDestroy",value:function value(){this.U("off")}},{key:"start",value:function value(){this.Ae()}}]),o}(D)).prototype,"includeSAB",[vc,fc],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return!0}}),Pc=h(En.prototype,"includeRightBanner",[mc,gc],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return!0}}),_c=h(En.prototype,"includeBottomBanner",[bc,Sc],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return!0}}),Lc=h(En.prototype,"includeLeftBanner",[kc,wc],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return!0}}),Bc=h(En.prototype,"closeWhenAdFailed",[Cc,Ec],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return!1}}),Dc=h(En.prototype,"widget",[Ac,Tc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Vo=En))||Vo),d._RF.pop(),d._RF.push({},"aa4b0d0u0hLeqd3+/PQZ/QD","SwitchButton",void 0);var Yc,Jc,Xc,Zc,Qc,Pi,An,eR=f.ccclass,_i=f.property,tR=f.requireComponent,nR=codex.analytics,Li=(Oc=eR("SwitchButton"),Ic=tR([se]),Nc=_i(Ce),Fc=_i(b),zc=_i(b),xc=_i(Ce),Gc=_i({visible:function visible(){return this.useSound},type:Si}),Oc(ba=Ic((Mc=h((Zn=function(l){E(o,l);var r=A(o);function o(){var e;S(this,o);for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return e=r.call.apply(r,[this].concat(n)),p(e,"enable",Mc,v(e)),p(e,"nodeOn",Uc,v(e)),p(e,"nodeOff",Hc,v(e)),p(e,"useSound",jc,v(e)),p(e,"soundKey",Wc,v(e)),e}return k(o,[{key:"__preload",value:function value(){this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function value(){L.lazyValidateProperties(this)}},{key:"switch",value:function value(){if(!this.node.active)return!1;if(nR.event(Ludex.Plugins.Analytics.Events.BUTTON_CLICK,{enable:!this.enable,button_name:this.node.name,screen_name:So.getCurrentPage()}),this.useSound&&this.soundKey){var e=bo[this.soundKey];e&&M.playSound(e)}return this.updateStatus(!this.enable)}},{key:"setEnabled",value:function value(e){this.node.active&&this.updateStatus(e)}},{key:"updateStatus",value:function value(e){return this.enable=e,this.nodeOn.active=e,this.nodeOff.active=!e,e}},{key:"isEnabled",value:function value(){return this.enable}}]),o}(D)).prototype,"enable",[Nc],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return!0}}),Uc=h(Zn.prototype,"nodeOn",[Fc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Hc=h(Zn.prototype,"nodeOff",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),jc=h(Zn.prototype,"useSound",[xc],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return!0}}),Wc=h(Zn.prototype,"soundKey",[Gc],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return Si[Q.BUTTON_CLICK]}}),ba=Zn))||ba)||ba);d._RF.pop(),d._RF.push({},"aa60frMJLtIlJZh2yJhMp1s","DynamicLabel",void 0);var $c,eh,th,Bi,ih,ah,oh,rh,sh,lh,uh,ch,hh,dh,ph,yh,vh,fh,mh,gh,bh,Sh,kh,wh,Ch,Eh,Ah,Th,Rh,$n,H,Ph,_h,Lh,Bh,Dh,Oh,Ih,Nh,iR=f.ccclass,Fh=f.property,aR=f.executeInEditMode,oR=f.requireComponent;Yc=iR("DynamicLabel"),Jc=oR(Y),Xc=aR(!0),Zc=Fh({type:Et,min:1,max:200}),Qc=Fh({type:Et,min:.1,max:4}),Yc(Pi=Jc(Pi=Xc((h((An=function(l){E(o,l);var r=A(o);function o(){var e;S(this,o);for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return(e=r.call.apply(r,[this].concat(n)))._quality=1,e._size=1,e._outlineWidth=0,e._shadowOffset=new x(0,0),e}return k(o,[{key:"size",get:function get(){return this._size},set:function set(e){this._size=e,this.label.fontSize=this.size*this.quality}},{key:"quality",get:function get(){return this._quality},set:function set(e){this._quality=e,this.node.scale=new I(1/this.quality,1/this.quality,1),this.label.fontSize=this.size*this.quality,this.label.outlineWidth=this._outlineWidth*this.quality,this.label.shadowOffset=this._shadowOffset.multiplyScalar(this.quality)}},{key:"__preload",value:function value(){this.label=this.getComponent(Y)}},{key:"start",value:function value(){this._quality=1/this.node.scale.x,this._size=this.label.fontSize/this.quality,this._outlineWidth=this.label.outlineWidth,this._shadowOffset=this.label.shadowOffset,this.quality=window.devicePixelRatio}}]),o}(D)).prototype,"size",[Zc],Object.getOwnPropertyDescriptor(An.prototype,"size"),An.prototype),h(An.prototype,"quality",[Qc],Object.getOwnPropertyDescriptor(An.prototype,"quality"),An.prototype),Pi=An))||Pi)||Pi),d._RF.pop(),d._RF.push({},"bce15LcVrxOfYMa9rbXN/qi","Localize",void 0);var zh=f.ccclass,et=f.property,rR=f.executeInEditMode,sR=f.disallowMultiple,xh=Ludex,Qo=xh.Utils,lR=Qo.Signal,ka=(Qo.Function,Qo.Array),Gh=xh.Events,Mh=codex,ei=Mh.language,Uh=Mh.event,tt=((l2={})[l2.Text=0]="Text",l2[l2.Texture=1]="Texture",l2);aa(tt);var l2,Hh,jh,Wh,Di,Kh,Vh,Yh,Jh,Oi,Zh,Qh,$h,ed,$o,td,nd,er="localize-params-updated",id=($c=zh("LocalizeParams"),eh=et({visible:!1}),th=et(Je),$c((ih=h((Bi=function(){function l(){S(this,l),p(this,"_text",ih,this)}return k(l,[{key:"text",get:function get(){return this._text},set:function set(r){this._text=r,me.emit(er,{text:r,param:this})}}]),l}()).prototype,"_text",[eh],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return""}}),h(Bi.prototype,"text",[th],Object.getOwnPropertyDescriptor(Bi.prototype,"text"),Bi.prototype),Bi))||Bi),cR=(ah=zh("Localize"),oh=rR(!0),rh=et({visible:!1}),sh=et({type:Je,visible:function visible(){return this.l10nType===tt.Texture}}),lh=et({visible:!1}),uh=et({type:Xe(tt)}),ch=et({type:Y,visible:function visible(){return this.l10nType===tt.Text}}),hh=et({visible:function visible(){return this.l10nType===tt.Text}}),dh=et({type:[id],visible:function visible(){return this.l10nType===tt.Text}}),ph=et({type:oe,visible:function visible(){return this.l10nType===tt.Texture}}),yh=et({visible:function visible(){return this.l10nType===tt.Texture}}),vh=et({visible:!1}),fh=et({type:Je}),mh=L.onlyRunInLifeCycleAsync,gh=L.onlyRunInLifeCycleAsync,bh=L.onlyRunInLifeCycleAsync,Sh=L.onlyRunInLifeCycleAsync,kh=L.onlyRunInLifeCycle,wh=L.onlyRunInLifeCycleAsync,Ch=L.onlyRunInLifeCycleAsync,Eh=L.onlyRunInLifeCycleAsync,Ah=L.onlyRunInLifeCycleAsync,Th=L.onlyRunInLifeCycle,Rh=L.onlyRunInLifeCycleAsync,ah($n=sR($n=oh((Ph=h((H=function(l){E(_,l);var r,o,e,t,n,i,a,s,u,c,y,m,w=A(_);function _(){var g;S(this,_);for(var C=arguments.length,P=Array(C),z=0;z<C;z++)P[z]=arguments[z];return(g=w.call.apply(w,[this].concat(P))).localized=!1,p(g,"_defaultLocale",Ph,v(g)),p(g,"_l10nType",_h,v(g)),p(g,"label",Lh,v(g)),p(g,"updateFont",Bh,v(g)),p(g,"params",Dh,v(g)),p(g,"sprite",Oh,v(g)),p(g,"packable",Ih,v(g)),p(g,"_key",Nh,v(g)),g.updateSignalController=new lR.SignalController,g.onLocalizeParamsUpdated=function(K){var Z=K.param;ka.has(g.params,Z)&&g.updateLocalization()},g.updateLocalization=function(){return g.updateLocalizationComp()},g}return k(_,[{key:"defaultLocale",get:function get(){return this._defaultLocale},set:function set(g){ka.has(ko,g)&&(this._defaultLocale=g)}},{key:"l10nType",get:function get(){return this._l10nType},set:function set(g){this._l10nType=g,g===tt.Texture&&(this.label=void 0,this.params=[]),g===tt.Text&&(this.sprite=void 0,this.packable=!0)}},{key:"key",get:function get(){return this._key},set:function set(g){try{if(!this.isValidKey(g))return;this._key=g,this.updateLocalization()}catch(unused){}}},{key:"setParams",value:function value(g){for(;this.params.length<g.length;)this.params.push(new id);for(var C=0,P=this.params.length;C<P;C++){var z,K=this.params[C];K.text=null!=(z=g[C])?z:K.text}}},{key:"waitUntilLocalized",value:function value(){var g=this;return this.localized?Promise.resolve():new Promise(function(C){return g.node.once(we.LOCALIZE_APPLIED,C)})}},{key:"__preload",value:function value(){}},{key:"isValidKey",value:function value(g){return!!this.isTextKey(g)||!!this.isTextureKey(g)}},{key:"isTextKey",value:function value(g){try{return this.l10nType===tt.Text&&ei.hasTextKey(g)}catch(unused){return!1}}},{key:"isTextureKey",value:function value(g){try{return this.l10nType===tt.Texture&&ei.hasTextureKey(g)}catch(unused){return!1}}},{key:"onEnable",value:function value(){this.listenEvent()}},{key:"onDisable",value:function value(){this.unlistenEvent(),this.updateSignalController.abort()}},{key:"start",value:function value(){this.initLocalization()}},{key:"listenEvent",value:function value(){Uh.on(Gh.LANGUAGE_CHANGED,this.updateLocalization),me.on(er,this.onLocalizeParamsUpdated)}},{key:"unlistenEvent",value:function value(){Uh.off(Gh.LANGUAGE_CHANGED,this.updateLocalization),me.off(er,this.onLocalizeParamsUpdated)}},{key:"initLocalization",value:function value(){return this.updateLocalizationComp(!0)}},{key:"updateLocalizationComp",value:(m=B(function(){var g,C,P,_arguments=arguments;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(g=_arguments.length>0&&void 0!==_arguments[0]&&_arguments[0],!(this.enabledInHierarchy&&void 0!==this.key))return[3,8];C=this.updateSignalController.renew(),_state.label=1;case 1:if(_state.trys.push([1,7,,8]),this.localized=!1,!this.isTextKey(this.key))return[3,3];return[4,this.updateTextLocalization(this.key,C)];case 2:return _state.sent(),[3,6];case 3:if(!this.isTextureKey(this.key))throw Error("Key ".concat(this.key," not found in locales"));if(P=ei.getCurrentLocale(),!Yr&&g&&P===this.defaultLocale)return[3,5];return[4,this.updateTextureLocalization(this.key,C)];case 4:_state.sent(),_state.label=5;case 5:_state.label=6;case 6:if(C.aborted)return[2];return this.localized=!0,me.emit(we.LOCALIZE_APPLIED,{localize:this,key:this.key}),this.node.emit(we.LOCALIZE_APPLIED,{localize:this,key:this.key}),[3,8];case 7:return _state.sent(),[3,8];case 8:return[2]}})}),function(){return m.apply(this,arguments)})},{key:"updateTextLocalization",value:(y=B(function(g,C){var P,z,K,Z,ae,ue;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(K=this,Z=ei.getCurrentLocale(),ae=ei.getText(g,this.params.map(function(te){return te.text}),Z),void 0===(ue=this.label))throw Error("Text localize component <".concat(this.node.name,"> has no label"));if(null==(P=C.wrap(function(){return K.setText(ue,ae)}))||P(),!this.updateFont)return[3,2];return[4,null==(z=C.wrap(function(){return K.setTextFont(ue,Z,C)}))?void 0:z()];case 1:_state.sent(),_state.label=2;case 2:return[2]}})}),function(g,C){return y.apply(this,arguments)})},{key:"setText",value:(c=B(function(g,C){return _ts_generator(this,function(_state){return g.string=C,[2]})}),function(g,C){return c.apply(this,arguments)})},{key:"setTextFont",value:(u=B(function(g,C,P){return _ts_generator(this,function(_state){switch(_state.label){case 0:return[4,this.setTextFontRuntime(g,C,P)];case 1:return _state.sent(),[2]}})}),function(g,C,P){return u.apply(this,arguments)})},{key:"setTextFontRuntime",value:(s=B(function(g,C,P){var z;return _ts_generator(this,function(_state){switch(_state.label){case 0:return[4,_e.loadFontAsync(C)];case 1:return z=_state.sent(),P.aborted||null!==z&&this.setLabelFontInLifeCycle(g,z),[2]}})}),function(g,C,P){return s.apply(this,arguments)})},{key:"setLabelFontInLifeCycle",value:function value(g,C){g.font=C}},{key:"setTextFontEditor",value:(a=B(function(g,C,P){var z,K,Z,ae,ue,te,ht;return _ts_generator(this,function(_state){switch(_state.label){case 0:return Z=this,[4,this.requestFontUuid(C)];case 1:if(null===(ae=_state.sent()))return[3,4];return[4,null==(z=P.wrap(function(){return Z.requestNodeInfo(g.node.uuid)}))?void 0:z()];case 2:if(void 0===(ue=_state.sent()))return[3,4];return te=ka.searchIndex(ue.__comps__,function(Re){return"cc.Label"===Re.type}),ht="__comps__.".concat(te,".font"),[4,null==(K=P.wrap(function(){return Z.requestUpdateLabelFont(g.node.uuid,ht,ae)}))?void 0:K()];case 3:_state.sent(),_state.label=4;case 4:return[2]}})}),function(g,C,P){return a.apply(this,arguments)})},{key:"requestFontUuid",value:(i=B(function(g){return _ts_generator(this,function(_state){switch(_state.label){case 0:return[4,Editor.Message.request("asset-db","query-uuid","db://assets/loadable/".concat(Jr[g]))];case 1:return[2,_state.sent()]}})}),function(g){return i.apply(this,arguments)})},{key:"requestNodeInfo",value:function value(g){return Editor.Message.request("scene","query-node",g)}},{key:"requestUpdateLabelFont",value:(n=B(function(g,C,P){return _ts_generator(this,function(_state){switch(_state.label){case 0:return[4,Editor.Message.request("scene","set-property",{uuid:g,path:C,dump:{type:"cc.Font",value:{uuid:P}}})];case 1:return _state.sent(),[2]}})}),function(g,C,P){return n.apply(this,arguments)})},{key:"updateTextureLocalization",value:(t=B(function(g,C){var P;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(void 0===this.sprite)throw Error("Texture localize component <".concat(this.node.name,"> has no sprite"));return P=ei.getTexture(g),[4,this.setSpriteRuntime(this.sprite,P,C)];case 1:return _state.sent(),[2]}})}),function(g,C){return t.apply(this,arguments)})},{key:"setSpriteRuntime",value:(e=B(function(g,C,P){var z;return _ts_generator(this,function(_state){switch(_state.label){case 0:return[4,_e.loadSpriteFrameAsync("".concat(C,"/spriteFrame"),this.packable)];case 1:return z=_state.sent(),P.aborted||null!==z&&this.setSprite(g,z),[2]}})}),function(g,C,P){return e.apply(this,arguments)})},{key:"setSprite",value:function value(g,C){g.spriteFrame=C}},{key:"setSpriteEditor",value:(o=B(function(g,C,P){var z,K,Z,ae,ue,ht,Re,Pe,Me;return _ts_generator(this,function(_state){switch(_state.label){case 0:return Z=this,[4,this.requestSpriteFrameInfo(C)];case 1:if(0===(ae=_state.sent()).length)return[3,5];if(!(ae.length>1))return[3,2];return ue=ae.slice(0,5).map(function(Ue){return Ue.path}),"".concat(ue.join(",")).concat(ue.length<ae.length?"...":""),[3,5];case 2:return[4,null==(z=P.wrap(function(){return Z.requestNodeInfo(g.node.uuid)}))?void 0:z()];case 3:if(void 0===(ht=_state.sent()))return[3,5];return Re=ae[0].uuid,Pe=ka.searchIndex(ht.__comps__,function(Ue){return"cc.Sprite"===Ue.type}),Me="__comps__.".concat(Pe,".spriteFrame"),[4,null==(K=P.wrap(function(){return Z.requestUpdateSpriteSpriteFrame(g.node.uuid,Me,Re)}))?void 0:K()];case 4:_state.sent(),_state.label=5;case 5:return[2]}})}),function(g,C,P){return o.apply(this,arguments)})},{key:"requestSpriteFrameInfo",value:function value(g){return Editor.Message.request("asset-db","query-assets",{pattern:"db://assets/loadable/".concat(g,"*"),ccType:"cc.SpriteFrame"})}},{key:"requestUpdateSpriteSpriteFrame",value:(r=B(function(g,C,P){return _ts_generator(this,function(_state){switch(_state.label){case 0:return[4,Editor.Message.request("scene","set-property",{uuid:g,path:C,dump:{type:"cc.SpriteFrame",value:{uuid:P}}})];case 1:return _state.sent(),[2]}})}),function(g,C,P){return r.apply(this,arguments)})}]),_}(D)).prototype,"_defaultLocale",[rh],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return"en"}}),h(H.prototype,"defaultLocale",[sh],Object.getOwnPropertyDescriptor(H.prototype,"defaultLocale"),H.prototype),_h=h(H.prototype,"_l10nType",[lh],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return tt.Text}}),h(H.prototype,"l10nType",[uh],Object.getOwnPropertyDescriptor(H.prototype,"l10nType"),H.prototype),Lh=h(H.prototype,"label",[ch],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Bh=h(H.prototype,"updateFont",[hh],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return!0}}),Dh=h(H.prototype,"params",[dh],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return[]}}),Oh=h(H.prototype,"sprite",[ph],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ih=h(H.prototype,"packable",[yh],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return!0}}),Nh=h(H.prototype,"_key",[vh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h(H.prototype,"key",[fh],Object.getOwnPropertyDescriptor(H.prototype,"key"),H.prototype),h(H.prototype,"updateTextLocalization",[mh],Object.getOwnPropertyDescriptor(H.prototype,"updateTextLocalization"),H.prototype),h(H.prototype,"setText",[gh],Object.getOwnPropertyDescriptor(H.prototype,"setText"),H.prototype),h(H.prototype,"setTextFont",[bh],Object.getOwnPropertyDescriptor(H.prototype,"setTextFont"),H.prototype),h(H.prototype,"setTextFontRuntime",[Sh],Object.getOwnPropertyDescriptor(H.prototype,"setTextFontRuntime"),H.prototype),h(H.prototype,"setLabelFontInLifeCycle",[kh],Object.getOwnPropertyDescriptor(H.prototype,"setLabelFontInLifeCycle"),H.prototype),h(H.prototype,"setTextFontEditor",[wh],Object.getOwnPropertyDescriptor(H.prototype,"setTextFontEditor"),H.prototype),h(H.prototype,"requestUpdateLabelFont",[Ch],Object.getOwnPropertyDescriptor(H.prototype,"requestUpdateLabelFont"),H.prototype),h(H.prototype,"updateTextureLocalization",[Eh],Object.getOwnPropertyDescriptor(H.prototype,"updateTextureLocalization"),H.prototype),h(H.prototype,"setSpriteRuntime",[Ah],Object.getOwnPropertyDescriptor(H.prototype,"setSpriteRuntime"),H.prototype),h(H.prototype,"setSprite",[Th],Object.getOwnPropertyDescriptor(H.prototype,"setSprite"),H.prototype),h(H.prototype,"setSpriteEditor",[Rh],Object.getOwnPropertyDescriptor(H.prototype,"setSpriteEditor"),H.prototype),$n=H))||$n)||$n)||$n);d._RF.pop(),d._RF.push({},"060a722v8VBE68QPm8fKcyQ","LocalizePreloader",void 0);var ad,od,rd,sd,ld,ud,cd,hd,dd,pd,Tn,mt,yd,vd,fd,md,tr=f.ccclass,ti=f.property,gd=Ludex.Utils,bd=gd.Array,hR=gd.Valid,wa=codex.language,dR=(Hh=tr("LocalizeTextureKey"),jh=ti({visible:!1}),Wh=ti(Je),Hh((Kh=h((Di=function(){function l(){S(this,l),p(this,"_key",Kh,this)}return k(l,[{key:"key",get:function get(){return this._key},set:function set(r){wa.hasTextureKey(r)&&(this._key=r)}}]),l}()).prototype,"_key",[jh],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return""}}),h(Di.prototype,"key",[Wh],Object.getOwnPropertyDescriptor(Di.prototype,"key"),Di.prototype),Di))||Di),pR=(Vh=tr("SupportedLocaleKey"),Yh=ti({visible:!1}),Jh=ti(Je),Vh((Zh=h((Oi=function(){function l(){S(this,l),p(this,"_key",Zh,this)}return k(l,[{key:"key",get:function get(){return this._key},set:function set(r){bd.has(ko,r)&&(this._key=r)}}]),l}()).prototype,"_key",[Yh],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return""}}),h(Oi.prototype,"key",[Jh],Object.getOwnPropertyDescriptor(Oi.prototype,"key"),Oi.prototype),Oi))||Oi);Qh=tr("LocalizePreloader"),$h=ti([dR]),ed=ti({type:pR,tooltip:"Preload only for these locales"}),Qh((td=h(($o=function(l){E(o,l);var r=A(o);function o(){var e;S(this,o);for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return e=r.call.apply(r,[this].concat(n)),p(e,"keys",td,v(e)),p(e,"locales",nd,v(e)),e}return k(o,[{key:"__preload",value:function value(){this.preloadTextures()}},{key:"preloadTextures",value:function value(){var e=wa.getCurrentLocale(),t=this.locales.map(function(y){return y.key});if(bd.has(t,e)){var n,i=[],a=O(this.keys);try{for(a.s();!(n=a.n()).done;){var s=n.value;if(!1!==wa.hasTextureKey(s.key)){var u=wa.getTexture(s.key),c="".concat(u,"/spriteFrame");i.push(c)}}}catch(y){a.e(y)}finally{a.f()}_e.loadSpriteFramesAsync(i)}else hR.isDebugger()}}]),o}(D)).prototype,"keys",[$h],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return[]}}),nd=h($o.prototype,"locales",[ed],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return[]}}),$o)),d._RF.pop(),d._RF.push({},"3f364xnTJtDR5yeow2MWHhm","LocalizedLayout",void 0);var Sd,kd,wd,Cd,Ed,Ad,Td,Rd,Pd,_d,Ld,Bd,Dd,Od,nr,nt,Id,Nd,Fd,zd,xd,Gd,Md,Ud,Hd,jd,Wd,qd,yR=f.ccclass,ni=f.property,vR=f.executeInEditMode,fR=f.disallowMultiple,mR=f.requireComponent;ad=yR("LocalizedLayout"),od=vR(!0),rd=mR(Ee),sd=ni(cR),ld=L.required(),ud=ni(Ee),cd=ni({visible:!1}),hd=ni({visible:!1}),dd=ni({type:Et,group:"Padding"}),pd=ni({type:Et,group:"Padding"}),ad(Tn=fR(Tn=od(Tn=rd((yd=h((mt=function(l){E(o,l);var r=A(o);function o(){var e;S(this,o);for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return e=r.call.apply(r,[this].concat(n)),p(e,"label",yd,v(e)),p(e,"layout",vd,v(e)),p(e,"_horizontal",fd,v(e)),p(e,"_vertical",md,v(e)),e.updateContentSize=function(){var a;if(void 0!==e.label){var s=null==(a=e.label.getComponent(Ee))?void 0:a.contentSize;if(void 0!==s){e.layout.setContentSize(s.width+e.horizontal,s.height+e.vertical);var u,c=e.node.getComponentsInChildren(It),y=O(c);try{for(y.s();!(u=y.n()).done;)u.value.updateAlignment()}catch(m){y.e(m)}finally{y.f()}}}},e}return k(o,[{key:"horizontal",get:function get(){return this._horizontal},set:function set(e){this._horizontal=e,this.updateContentSize()}},{key:"vertical",get:function get(){return this._vertical},set:function set(e){this._vertical=e,this.updateContentSize()}},{key:"__preload",value:function value(){this.layout=this.getComponent(Ee),L.validateRequiredProperties(this)}},{key:"start",value:function value(){this.updateContentSize()}},{key:"onEnable",value:function value(){this.listenEvent()}},{key:"onDisable",value:function value(){this.unlistenEvent()}},{key:"listenEvent",value:function value(){var e;null==(e=this.label)||e.node.on(we.LOCALIZE_APPLIED,this.updateContentSize)}},{key:"unlistenEvent",value:function value(){var e;null==(e=this.label)||e.node.off(we.LOCALIZE_APPLIED,this.updateContentSize)}}]),o}(D)).prototype,"label",[sd],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vd=h(mt.prototype,"layout",[ld,ud],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fd=h(mt.prototype,"_horizontal",[cd],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return 0}}),md=h(mt.prototype,"_vertical",[hd],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return 0}}),h(mt.prototype,"horizontal",[dd],Object.getOwnPropertyDescriptor(mt.prototype,"horizontal"),mt.prototype),h(mt.prototype,"vertical",[pd],Object.getOwnPropertyDescriptor(mt.prototype,"vertical"),mt.prototype),Tn=mt))||Tn)||Tn)||Tn),d._RF.pop(),d._RF.push({},"a2260jBMJFPCrn/Q4Vo4iB1","BatchNodes",void 0);var Kd,Vd,Yd,Jd,Xd,Zd,Qd,$d,ep,tp,ir,xt,np,ip,ap,op,rp,sp,lp,up,gR=f.ccclass,bR=f.executionOrder,gt=f.property,cp=Ludex.Utils,SR=cp.Decorator,hp=cp.Array,ar="Batch By Name",or="Batch Label",dp="Batch Sprite";Sd=gR("BatchNodes"),kd=bR(99999),wd=gt({group:{name:ar}}),Cd=gt({type:[Ct],group:{name:ar}}),Ed=gt({type:[Je],group:{name:ar}}),Ad=gt({group:{name:or}}),Td=gt({group:{name:or}}),Rd=gt({group:{name:or}}),Pd=gt({group:{name:dp}}),_d=gt({group:{name:dp}}),Ld=gt({readonly:!0}),Bd=gt({readonly:!0}),Dd=gt({readonly:!0}),Od=SR.debounce(1e3),Sd(nr=kd((Id=h((nt=function(l){E(o,l);var r=A(o);function o(){var e;S(this,o);for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return e=r.call.apply(r,[this].concat(n)),p(e,"batchByName",Id,v(e)),p(e,"depthNames",Nd,v(e)),p(e,"listName",Fd,v(e)),p(e,"batchLabel",zd,v(e)),p(e,"depthLabel",xd,v(e)),p(e,"typeLabel",Gd,v(e)),p(e,"batchSprite",Md,v(e)),p(e,"depthSprite",Ud,v(e)),p(e,"batchAllNodes",Hd,v(e)),p(e,"batchDepth",jd,v(e)),p(e,"checkOverlap",Wd,v(e)),e.batchNode={},e.labelChildren=[],e.spriteChildren=[],e.allChildren=[],e.nameChildren=[],e.originalParents={},e.isInited=!1,p(e,"handleNodeChange",qd,v(e)),e.onAfterUpdate=function(){e.isInited&&e.hierarchyChildren()},e.onAfterRender=function(){e.isInited&&e.restoreOriginalChildren()},e}return k(o,[{key:"__preload",value:function value(){this.enabled&&(V.on(pe.EVENT_AFTER_UPDATE,this.onAfterUpdate),V.on(pe.EVENT_AFTER_RENDER,this.onAfterRender))}},{key:"onDestroy",value:function value(){V.off(pe.EVENT_AFTER_UPDATE,this.onAfterUpdate),V.off(pe.EVENT_AFTER_RENDER,this.onAfterRender)}},{key:"onLoad",value:function value(){this.enabled&&(this.setupBatchNodes(this.node),this.isInited=!0)}},{key:"onEnable",value:function value(){this.isInited||(V.on(pe.EVENT_AFTER_UPDATE,this.onAfterUpdate),V.on(pe.EVENT_AFTER_RENDER,this.onAfterRender),this.setupBatchNodes(this.node),this.isInited=!0)}},{key:"handleActiveChange",value:function value(e){e.once(b.EventType.ACTIVE_IN_HIERARCHY_CHANGED,this.handleNodeChange)}},{key:"onDisable",value:function value(){this.restoreOriginalChildren(),V.off(pe.EVENT_AFTER_UPDATE,this.onAfterUpdate),V.off(pe.EVENT_AFTER_RENDER,this.onAfterRender),this.isInited=!1}},{key:"setupBatchNodes",value:function value(e){this.allChildren=[],this.nameChildren=[],this.labelChildren=[],this.spriteChildren=[],this.saveOriginalChildren(e),this.createGlobalNodes(e),this.createGlobalNameNodes(e),this.createGlobalLabelNode(e),this.createGlobalSpriteNode(e),this.sortGlobalNodes()}},{key:"sortGlobalNodes",value:function value(){var e,t,n,i=this;null==(e=this.batchNode.node)||e.setSiblingIndex(0),null==(t=this.batchNode.label)||t.setSiblingIndex(this.depthLabel),null==(n=this.batchNode.sprite)||n.setSiblingIndex(this.depthSprite),this.listName.forEach(function(a,s){var u,c=i.depthNames[s];void 0!==c&&(null==(u=i.batchNode[a])||u.setSiblingIndex(c))})}},{key:"createGlobalNodes",value:function value(e){if(this.batchAllNodes){var t=new b("GlobalBatchNode");t.active=!0,this.batchNode.node=t,e.addChild(t)}}},{key:"createGlobalNameNodes",value:function value(e){if(this.batchByName){var t,n=O(this.listName);try{for(n.s();!(t=n.n()).done;){var i=t.value;if(!this.batchNode[i]){var a=new b(i);a.active=!0,this.batchNode[i]=a,e.addChild(a)}}}catch(s){n.e(s)}finally{n.f()}}}},{key:"createGlobalLabelNode",value:function value(e){if(this.batchLabel){var t=new b("GlobalLabelNode");t.active=!0,this.batchNode.label=t,e.addChild(t)}}},{key:"createGlobalSpriteNode",value:function value(e){if(this.batchSprite){var t=new b("GlobalSpriteNode");t.active=!0,this.batchNode.sprite=t,e.addChild(t)}}},{key:"saveOriginalParents",value:function value(){var e,t=[].concat(He(this.labelChildren),He(this.spriteChildren)),n=this.nameChildren,i=O(t);try{for(i.s();!(e=i.n()).done;){var a=e.value;a.node.parent&&(this.handleActiveChange(a.node),this.originalParents[a.uuid]=a.node.parent)}}catch(y){i.e(y)}finally{i.f()}var s,u=O(n);try{for(u.s();!(s=u.n()).done;){var c=s.value;c.parent&&(this.handleActiveChange(c),this.originalParents[c.uuid]=c.parent)}}catch(y){u.e(y)}finally{u.f()}}},{key:"saveOriginalChildren",value:function value(e){var t,n=e.children,i=O(n);try{for(i.s();!(t=i.n()).done;){var a=t.value;this.saveLabelChildren(a),this.saveSpriteChildren(a),this.saveNodeChildrenByName(a),this.saveNodeChildrenByType(a)}}catch(s){i.e(s)}finally{i.f()}this.saveOriginalParents()}},{key:"saveLabelChildren",value:function value(e){var t;if(this.batchLabel){var n=e.getComponentsInChildren(Y),i={none:Y.CacheMode.NONE,char:Y.CacheMode.CHAR,bitmap:Y.CacheMode.BITMAP}[this.typeLabel];i&&(n=n.filter(function(a){return a.cacheMode===i})),0!==n.length&&(t=this.labelChildren).push.apply(t,He(n))}}},{key:"saveSpriteChildren",value:function value(e){var t;if(this.batchSprite){var n=e.getComponentsInChildren(oe);0!==n.length&&(t=this.spriteChildren).push.apply(t,He(n))}}},{key:"saveNodeChildrenByName",value:function value(e){if(this.batchByName){var t,n=O(e.children);try{for(n.s();!(t=n.n()).done;){var i=t.value;hp.has(this.listName,i.name)?this.nameChildren.push(i):this.saveNodeChildrenByName(i)}}catch(a){n.e(a)}finally{n.f()}}}},{key:"saveNodeChildrenByType",value:function value(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(this.batchAllNodes){var i=e.getComponentsInChildren(D);if((t=this.allChildren).push.apply(t,He(i)),!(this.batchDepth<1||n>=this.batchDepth)){var a,s=O(this.allChildren);try{for(s.s();!(a=s.n()).done;){var u=a.value;this.saveNodeChildrenByType(u.node,this.batchDepth)}}catch(c){s.e(c)}finally{s.f()}}}}},{key:"hierarchyChildren",value:function value(){var e,t=function t(C,P){C.node.isValid&&C.node.activeInHierarchy&&P&&!C.node.isChildOf(P)&&(C.node.setParent(P,!0),C.node.layer=Nt.Enum.UI_2D)},n=["GlobalLabelNode","GlobalSpriteNode","GlobalBatchNode"],i=O(this.labelChildren);try{for(i.s();!(e=i.n()).done;)t(e.value,this.batchNode.label)}catch(C){i.e(C)}finally{i.f()}var a,s=O(this.spriteChildren);try{for(s.s();!(a=s.n()).done;)t(a.value,this.batchNode.sprite)}catch(C){s.e(C)}finally{s.f()}var u,c=O(this.allChildren);try{for(c.s();!(u=c.n()).done;)t(u.value,this.batchNode.node)}catch(C){c.e(C)}finally{c.f()}this.allChildren.sort(function(C,P){return C.constructor.name.localeCompare(P.constructor.name)}),this.labelChildren.sort(function(C,P){return C.cacheMode-P.cacheMode});var y,m=O(this.nameChildren);try{for(m.s();!(y=m.n()).done;){var w=y.value;if(w.isValid&&w.activeInHierarchy&&w.isTransformDirty()){var _=w.getComponent(W);if(!(_&&_.opacity<1||hp.has(n,w.name))){var g=this.batchNode[w.name];g&&(w.isChildOf(g)||(w.setParent(g,!0),w.layer=Nt.Enum.UI_2D))}}}}catch(C){m.e(C)}finally{m.f()}}},{key:"restoreOriginalChildren",value:function value(){var e=[].concat(He(this.labelChildren),He(this.spriteChildren));if(e.length>0){var t,n=O(e);try{for(n.s();!(t=n.n()).done;){var i=t.value,a=this.originalParents[i.uuid];a&&(i.node.isChildOf(a)||i.node.setParent(a,!0))}}catch(m){n.e(m)}finally{n.f()}}var s,u=O(this.nameChildren);try{for(u.s();!(s=u.n()).done;){var c=s.value,y=this.originalParents[c.uuid];y&&(c.isChildOf(y)||c.setParent(y,!0))}}catch(m){u.e(m)}finally{u.f()}}}]),o}(D)).prototype,"batchByName",[wd],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return!1}}),Nd=h(nt.prototype,"depthNames",[Cd],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return[]}}),Fd=h(nt.prototype,"listName",[Ed],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return[]}}),zd=h(nt.prototype,"batchLabel",[Ad],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return!1}}),xd=h(nt.prototype,"depthLabel",[Td],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return 1}}),Gd=h(nt.prototype,"typeLabel",[Rd],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return"char"}}),Md=h(nt.prototype,"batchSprite",[Pd],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return!1}}),Ud=h(nt.prototype,"depthSprite",[_d],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return 0}}),Hd=h(nt.prototype,"batchAllNodes",[Ld],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return!1}}),jd=h(nt.prototype,"batchDepth",[Bd],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return 0}}),Wd=h(nt.prototype,"checkOverlap",[Dd],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return!1}}),qd=h(nt.prototype,"handleNodeChange",[Od],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){var l=this;return function(){l.isInited&&l.setupBatchNodes(l.node)}}}),nr=nt))||nr),d._RF.pop(),d._RF.push({},"1ecebJCOPhK9L6AO92sjHzD","BatchNodesV2",void 0);var pp,kR=f.ccclass,wR=f.executionOrder,Jt=f.property,yp=Ludex.Utils,CR=yp.Array,ER=yp.Object;Kd=kR("BatchNodesV2"),Vd=wR(99999),Yd=Jt({group:"Batch Settings"}),Jd=Jt({type:[Je],group:"Batch Settings",visible:function visible(){return this.batchByName}}),Xd=Jt({type:[Ct],group:"Batch Settings",visible:function visible(){return this.batchByName}}),Zd=Jt({group:"Label Settings"}),Qd=Jt({group:"Label Settings",visible:function visible(){return this.batchLabel}}),$d=Jt({group:"Label Settings",visible:function visible(){return this.batchLabel}}),ep=Jt({group:"Sprite Settings"}),tp=Jt({group:"Sprite Settings",visible:function visible(){return this.batchSprite}}),Kd(ir=Vd((np=h((xt=function(l){E(o,l);var r=A(o);function o(){var e;S(this,o);for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return e=r.call.apply(r,[this].concat(n)),p(e,"batchByName",np,v(e)),p(e,"listName",ip,v(e)),p(e,"depthNames",ap,v(e)),p(e,"batchLabel",op,v(e)),p(e,"typeLabel",rp,v(e)),p(e,"depthLabel",sp,v(e)),p(e,"batchSprite",lp,v(e)),p(e,"depthSprite",up,v(e)),e.batchNodes={},e.originalParents={},e.labelNodes=[],e.spriteNodes=[],e.namedNodes={},e.isInitialized=!1,e.labelNodesByType={bitmap:[],char:[],none:[]},e.isEventListenerSetup=!1,e.onAfterUpdate=function(){e.isInitialized&&e.batchActiveNodes()},e.onAfterRender=function(){e.isInitialized&&e.restoreNodes()},e}return k(o,[{key:"depthLabelBitmap",get:function get(){return this.depthLabel}},{key:"depthLabelChar",get:function get(){return this.depthLabel+1}},{key:"depthLabelNone",get:function get(){return this.depthLabel+2}},{key:"onLoad",value:function value(){this.enabled&&this.initializeDataStructures()}},{key:"start",value:function value(){this.enabled&&this.initialize()}},{key:"onEnable",value:function value(){this.isEventListenerSetup||(this.setupEventListeners(),this.isEventListenerSetup=!0)}},{key:"onDisable",value:function value(){this.isEventListenerSetup&&(this.removeEventListeners(),this.isEventListenerSetup=!1),this.restoreNodes()}},{key:"onDestroy",value:function value(){this.removeEventListeners(),this.restoreNodes(),this.clearData()}},{key:"initializeDataStructures",value:function value(){this.batchNodes={},this.originalParents={},this.labelNodes=[],this.spriteNodes=[],this.namedNodes={},this.labelNodesByType={bitmap:[],char:[],none:[]}}},{key:"initialize",value:function value(){this.isInitialized||(this.createBatchContainers(),this.scanNodes(this.node),this.sortBatchNodes(),this.isInitialized=!0)}},{key:"clearData",value:function value(){this.batchNodes={},this.originalParents={},this.labelNodes=[],this.spriteNodes=[],this.namedNodes={},this.labelNodesByType={bitmap:[],char:[],none:[]},this.isInitialized=!1}},{key:"categorizeNode",value:function value(e){if(e.parent){if(this.originalParents[e.uuid]=e.parent,this.batchLabel){var t=e.getComponent(Y);t&&("all"===this.typeLabel?t.cacheMode===Y.CacheMode.BITMAP?this.labelNodesByType.bitmap.push(e):t.cacheMode===Y.CacheMode.CHAR?this.labelNodesByType.char.push(e):this.labelNodesByType.none.push(e):this.isValidLabel(t)&&this.labelNodes.push(e))}if(this.batchSprite&&e.getComponent(oe)&&this.spriteNodes.push(e),this.batchByName){var n=e.name;this.listName.includes(n)&&(this.namedNodes[n]||(this.namedNodes[n]=[]),this.namedNodes[n].push(e))}}}},{key:"isValidLabel",value:function value(e){var t={none:Y.CacheMode.NONE,char:Y.CacheMode.CHAR,bitmap:Y.CacheMode.BITMAP};return e.cacheMode===t[this.typeLabel]}},{key:"sortBatchNodes",value:function value(){if(this.batchLabel)if("all"===this.typeLabel){var e,t,n;null==(e=this.batchNodes.label_bitmap)||e.setSiblingIndex(this.depthLabelBitmap),null==(t=this.batchNodes.label_char)||t.setSiblingIndex(this.depthLabelChar),null==(n=this.batchNodes.label_none)||n.setSiblingIndex(this.depthLabelNone)}else{var i,a={bitmap:this.depthLabelBitmap,char:this.depthLabelChar,none:this.depthLabelNone}[this.typeLabel]||this.depthLabelChar;null==(i=this.batchNodes.label)||i.setSiblingIndex(a)}this.batchNodes.sprite&&this.batchNodes.sprite.setSiblingIndex(this.depthSprite);for(var s=0;s<this.listName.length;s++){var u=this.listName[s];if(u){var c=this.depthNames[s]||0,y=this.batchNodes[u];y&&y.setSiblingIndex(c)}}}},{key:"batchNodeArray",value:function value(e,t){for(var n=0;n<e.length;n++){var i=e[n];null!=i&&i.isValid&&i.activeInHierarchy&&i.parent!==t&&(this.isBatchContainer(i)||i.isTransformDirty()&&this.isParentChainActive(i)&&(i.setParent(t,!0),i.layer=Nt.Enum.UI_2D))}}},{key:"isBatchContainer",value:function value(e){var t=ER.vals(this.batchNodes);return CR.has(t,e)}},{key:"isParentChainActive",value:function value(e){for(var t=e,n=this.node;t&&t!==n;){if(!t.active||!t.isValid)return!1;t=t.parent}return t===n}},{key:"restoreNodes",value:function value(){var e=this,t=function t(P){var z=e.originalParents[P.uuid];null!=z&&z.isValid&&P.parent!==z&&e.isParentChainActive(z)&&P.setParent(z,!0)};if(this.batchLabel)if("all"===this.typeLabel)for(var n in this.labelNodesByType)for(var i=this.labelNodesByType[n],a=0;a<i.length;a++){var s=i[a];s&&t(s)}else for(var u=0;u<this.labelNodes.length;u++){var c=this.labelNodes[u];c&&t(c)}if(this.batchSprite)for(var y=0;y<this.spriteNodes.length;y++){var m=this.spriteNodes[y];m&&t(m)}if(this.batchByName)for(var w in this.namedNodes){var _=this.namedNodes[w];if(_)for(var g=0;g<_.length;g++){var C=_[g];C&&t(C)}}}},{key:"setupEventListeners",value:function value(){V.on(pe.EVENT_AFTER_UPDATE,this.onAfterUpdate),V.on(pe.EVENT_AFTER_RENDER,this.onAfterRender)}},{key:"removeEventListeners",value:function value(){V.off(pe.EVENT_AFTER_UPDATE,this.onAfterUpdate),V.off(pe.EVENT_AFTER_RENDER,this.onAfterRender)}},{key:"createBatchContainers",value:function value(){if(this.batchLabel)if("all"===this.typeLabel)for(var e=0,t=["bitmap","char","none"];e<t.length;e++){var n=t[e],i=new b("BatchLabel_".concat(n));i.layer=Nt.Enum.UI_2D,this.node.addChild(i),this.batchNodes["label_".concat(n)]=i}else{var a=new b("BatchLabel");a.layer=Nt.Enum.UI_2D,this.node.addChild(a),this.batchNodes.label=a}if(this.batchSprite){var s=new b("BatchSprite");s.layer=Nt.Enum.UI_2D,this.node.addChild(s),this.batchNodes.sprite=s}if(this.batchByName)for(var u=0;u<this.listName.length;u++){var c=this.listName[u];if(c){var y=new b("Batch_".concat(c));y.layer=Nt.Enum.UI_2D,this.node.addChild(y),this.batchNodes[c]=y,this.namedNodes[c]=[]}}}},{key:"scanNodes",value:function value(e){for(var t=e.children,n=0;n<t.length;n++){var i=t[n];i&&(this.categorizeNode(i),i.children.length>0&&this.scanNodes(i))}}},{key:"batchActiveNodes",value:function value(){if(this.batchLabel&&("all"===this.typeLabel?(this.batchNodesByType(this.labelNodesByType.bitmap,"label_bitmap"),this.batchNodesByType(this.labelNodesByType.char,"label_char"),this.batchNodesByType(this.labelNodesByType.none,"label_none")):this.batchNodesByType(this.labelNodes,"label")),this.batchSprite&&this.batchNodesByType(this.spriteNodes,"sprite"),this.batchByName)for(var e in this.namedNodes){var t=this.namedNodes[e];if(t){var n=this.batchNodes[e];n&&this.batchNodeArray(t,n)}}}},{key:"batchNodesByType",value:function value(e,t){var n=this.batchNodes[t];n&&this.batchNodeArray(e,n)}}]),o}(D)).prototype,"batchByName",[Yd],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return!1}}),ip=h(xt.prototype,"listName",[Jd],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return[]}}),ap=h(xt.prototype,"depthNames",[Xd],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return[]}}),op=h(xt.prototype,"batchLabel",[Zd],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return!1}}),rp=h(xt.prototype,"typeLabel",[Qd],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return"char"}}),sp=h(xt.prototype,"depthLabel",[$d],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return 1}}),lp=h(xt.prototype,"batchSprite",[ep],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return!1}}),up=h(xt.prototype,"depthSprite",[tp],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return 0}}),ir=xt))||ir),d._RF.pop(),d._RF.push({},"9b958Lf6PFClb/JuJfTLzxG","Vibrate",void 0);var TR=f.ccclass,RR=Ludex.Utils.Browser,PR=codex.player,rr=TR("Vibrate")(pp=function(l){E(o,l);var r=A(o);function o(){return S(this,o),r.apply(this,arguments)}return k(o,[{key:"vibrate",value:function value(e){if(this.isVibrateEnable()&&!RR.vibrate(e)&&"performHapticFeedbackAsync"in GameSDK.extra)return void GameSDK.extra.performHapticFeedbackAsync()}},{key:"isVibrateEnable",value:function value(){return!!PR.getPlayerSetting("vibrate")}}]),o}(D))||pp;d._RF.pop(),d._RF.push({},"21fbd1aIo9DNoKfAoZaF1DC","WidgetCanvasTarget",void 0),(0,f.ccclass)("WidgetCanvasTarget")(function(l){E(o,l);var r=A(o);function o(){return S(this,o),r.apply(this,arguments)}return k(o,[{key:"__preload",value:function value(){var e=this.getComponent(It);if(e){var t=Ze("Canvas");t&&(e.target=t)}}}]),o}(D)),d._RF.pop(),d._RF.push({},"cb1abhXDs1A57EPVKbvTJg/","ButtonPlusEvents",void 0),d._RF.pop(),d._RF.push({},"e6289NIEoZEGaTkmk/RVxJy","ClassicModeLevels",void 0);var fp=[165,201,158,230,313,274,280,266,295,260,225,215,253,323,297,312,268,144,121,220,190,311,270,302,166,142,169,103,314,299,228,127,172,132,176,134,118,116,131,271,282,138,108,149,244,261,210,208,234,272,184,249,273,216,120,214,317,148,139,154,109,267,162,105,306,245,153,100,232,194,175,292,124,205,110,145,293,322,255,227,304,187,319,111,207,305,177,259,248,269,238,263,126,188,200,135,198,170,218,178,122,321,137,257,291,196,179,252,140,113,223,303,197,224,115,185,181,112,301,146,202,286,289,106,285,147,247,287,246,163,101,206,164,221,298,219,203,129,283,315,324,281,102,114,307,242,318,173,276,152,217,222,195,130,211,308,141,213,236,290,284,309,320,167,161,192,258,265,233,182,237,279,256,156,229,316,212,157,250,183,123,262,159,264,239,117,189,231,199,278,193,125,186,155,310,209,235,204,104,107,325,128,119,160,275,241,168,191,143,136,171,243,174,150,277,251,296,288,240,180,151,254,226,133,294,300];d._RF.pop(),d._RF.push({},"bf320amyc1I86bS3oK0M9NR","DashboardEvents",void 0),d._RF.pop(),d._RF.push({},"68b8bf0Va5JT7NVPECDNC5l","DashboardScreens",void 0);var mp=((l3=mp||{})[l3.store=0]="store",l3[l3.collections=1]="collections",l3[l3.home=2]="home",l3[l3.leaderboard=3]="leaderboard",l3[l3.tournaments=4]="tournaments",l3);aa(mp),d._RF.pop(),d._RF.push({},"ad867amogBFGJo9jp78EnQP","DevTools",void 0);var gp=((l4=gp||{}).UNLOCK_DEV_TOOLS="unlock-dev-tools",l4.TRIGGER_UNLOCK_KEY="trigger-unlock-key",l4.TRIGGER_RESET_SEQUENCE="trigger-reset-sequence",l4);d._RF.pop(),d._RF.push({},"d2d6fiURYRNW52Q49fh9+s+","EndlessProgressions",void 0);var l3,l4,bp,Sp,kp,Rn,wp={0:{beeSpeed:60,spawnRandOffset:100,targetOffsetMultiplier:0,count:[8,15]},10:{beeSpeed:60,spawnRandOffset:100,targetOffsetMultiplier:.5,count:[10,20]},20:{beeSpeed:70,spawnRandOffset:110,targetOffsetMultiplier:.6,count:[10,20]},50:{beeSpeed:70,spawnRandOffset:120,targetOffsetMultiplier:.7,count:[10,20]}};d._RF.pop(),d._RF.push({},"e2458xYf5xBG6uFEvkD4R6s","FlowStratery",void 0);var LR=f.ccclass,Cp=Ludex,sr=Cp.Utils,Ep=sr.Decorator,BR=sr.String,DR=sr.Number,Ap=Cp.Dtos.Match.CustomData,Tp=codex,Ii=Tp.match,OR=Tp.player,Rp=function Rp(l){G.closeLoadingScreen(),_instanceof(l,Error)&&G.showNotificationScreen(l.message)};bp=LR("FlowStrategy"),Sp=Ep.tryCatch(Rp),kp=Ep.tryCatch(Rp),bp((h((Rn=function(l){E(t,l);var r,o,e=A(t);function t(){var n;S(this,t);for(var i=arguments.length,a=Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,[this].concat(a))).playerId="",n}return k(t,[{key:"onLoad",value:function value(){this.playerId=OR.getPlayerId(),this.initDtosDefaultData()}},{key:"initDtosDefaultData",value:function value(){Ap.addDefaults({maxTime:0}),Ap.addValidator("maxTime",function(n){if(n<0)throw Error("maxTime must be greater than 0")})}},{key:"startStrategy",value:(o=B(function(){return _ts_generator(this,function(_state){switch(_state.label){case 0:return G.showLoadingScreen(0),[4,Ii.strategy.start.processAsync({matchId:BR.generateObjectId(),gameMode:"endless",playerId:this.playerId})];case 1:return _state.sent(),[4,Ii.handler.setMatchCustomData({maxTime:600})];case 2:return _state.sent(),[4,Ii.handler.setProfileData({id:this.playerId,wish:0})];case 3:return _state.sent(),[2]}})}),function(){return o.apply(this,arguments)})},{key:"finishStrategy",value:(r=B(function(){return _ts_generator(this,function(_state){switch(_state.label){case 0:return[4,Ii.handler.setProfileData({id:this.playerId,wish:DR.random(9999)})];case 1:return _state.sent(),[4,Ii.strategy.finish.processAsync({setPlayerBestScore:!1,postGlobalLeaderboard:!1})];case 2:return _state.sent(),[2]}})}),function(){return r.apply(this,arguments)})}]),t}(D)).prototype,"startStrategy",[Sp],Object.getOwnPropertyDescriptor(Rn.prototype,"startStrategy"),Rn.prototype),h(Rn.prototype,"finishStrategy",[kp],Object.getOwnPropertyDescriptor(Rn.prototype,"finishStrategy"),Rn.prototype),Rn)),d._RF.pop(),d._RF.push({},"91649r9HndHx6OjoY70+mR1","GameMode",void 0);var Pp="classic",_p="endless";d._RF.pop(),d._RF.push({},"adb272QtfxDGZ+87PwkWEiN","GameSettings",void 0),d._RF.pop(),d._RF.push({},"52b52FNwvhBKY/becAy420o","Leaderboard",void 0);var lr,ur,Lp=Ludex.Configs.Leaderboards.LeaderboardList;null==(lr=Lp[0])||lr.Id,null==(ur=Lp[1])||ur.Id,d._RF.pop(),d._RF.push({},"e8e10DJmXdH8Jw30JCMjJqd","ScreensFlows",void 0),(0,f.ccclass)("ScreensFlows")(function(l){E(t,l);var r,o,e=A(t);function t(){var n;S(this,t);for(var i=arguments.length,a=Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,[this].concat(a))).screenActions=[function(){return n.showLoadingScreen()},function(){return n.showNotificationScreen()},function(){return n.showWinningScreen()},function(){return n.showCongratulationScreen()},function(){return n.showLoseScreen()},function(){return n.showSettingsScreen()}],n}return k(t,[{key:"preloadScreens",value:function value(){G.preloadScreens()}},{key:"getRandomDelay",value:function value(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;return Math.floor(Math.random()*(i-n+1))+n}},{key:"executeRandomScreenAction",value:(o=B(function(){var n,i;return _ts_generator(this,function(_state){return n=Math.floor(Math.random()*this.screenActions.length),(i=this.screenActions[n])&&i(),[2]})}),function(){return o.apply(this,arguments)})},{key:"spamScreens",value:(r=B(function(){var n,i,a;return _ts_generator(this,function(_state){switch(_state.label){case 0:n=this,i=function i(){var s;return _ts_generator(this,function(_state){switch(_state.label){case 0:return s=n.getRandomDelay(200,800),[4,new Promise(function(u){return setTimeout(u,s)})];case 1:return _state.sent(),[4,n.executeRandomScreenAction()];case 2:return _state.sent(),[2]}})},a=0,_state.label=1;case 1:if(!(a<10))return[3,4];return[5,_ts_values(i())];case 2:_state.sent(),_state.label=3;case 3:return a++,[3,1];case 4:return[2]}})}),function(){return r.apply(this,arguments)})},{key:"showNotificationScreen",value:function value(){G.showNotificationScreen("Hey!")}},{key:"closeNotificationScreen",value:function value(){G.closeNotificationScreen()}},{key:"showLoadingScreen",value:function value(){G.showLoadingScreen(5)}},{key:"closeLoadingScreen",value:function value(){G.closeLoadingScreen()}},{key:"showWinningScreen",value:function value(){G.openScreen(re.WINNING_SCREEN)}},{key:"closeWinningScreen",value:function value(){G.closeScreen(re.WINNING_SCREEN)}},{key:"showLoseScreen",value:function value(){G.openScreen(re.LOSE_SCREEN,{level:1})}},{key:"closeLoseScreen",value:function value(){G.closeScreen(re.LOSE_SCREEN)}},{key:"showSettingsScreen",value:function value(){G.openScreen(re.SETTINGS_SCREEN)}},{key:"closeSettingsScreen",value:function value(){G.closeScreen(re.SETTINGS_SCREEN)}},{key:"showCongratulationScreen",value:function value(){G.openScreen(re.CONGRATULATION_SCREEN)}},{key:"closeCongratulationScreen",value:function value(){G.closeScreen(re.CONGRATULATION_SCREEN)}}]),t}(D)),d._RF.pop(),d._RF.push({},"f16ffbXQPtDK58g6BNFwzJv","Tournament",void 0),d._RF.pop(),d._RF.push({},"7e0c9Khhb1DD7wE1NBWi3Py","VibrateStyle",void 0),d._RF.pop(),d._RF.push({},"ad7acMQ2iJNKKA2RkT+nGNI","CommonError",void 0);var zR=function(l){E(o,l);var r=A(o);function o(e,t){var n;return S(this,o),(n=r.call(this,t)).code=e,n}return k(o)}(Bt(Error));d._RF.pop(),d._RF.push({},"5ff78u05/tPepABfMzNaOjM","PlayerHasTournamentError",void 0);var xR=function(l){E(o,l);var r=A(o);function o(e,t){var n;return S(this,o),(n=r.call(this,"PLAYER_HAS_TOURNAMENT","Player has a tournament")).playerId=e,n.tournamentId=t,n}return k(o)}(zR);d._RF.pop(),d._RF.push({},"27033qxh65F25R336CXMYGV","BeeRole",void 0);var st=((l5=st||{})[l5.NORMAL=0]="NORMAL",l5[l5.PATH_SEEKER=1]="PATH_SEEKER",l5[l5.PUSHER=2]="PUSHER",l5);d._RF.pop(),d._RF.push({},"ab23abxgeZD0KDVdLYEeAQS","BeeState",void 0);var ye=((l6=ye||{})[l6.IDLE=0]="IDLE",l6[l6.FLYING=1]="FLYING",l6[l6.WAITING_TO_SEEK_PATH=2]="WAITING_TO_SEEK_PATH",l6[l6.SEEKING_PATH=3]="SEEKING_PATH",l6[l6.ATTACKING=4]="ATTACKING",l6[l6.DIE=5]="DIE",l6);d._RF.pop(),d._RF.push({},"9ef7e8FlFJOS5DAWzwBrkww","GameObject",void 0);for(var R=((l7={}).AIR_FAN="air-fan",l7.BALLOON="balloon",l7.DOGE="doge",l7.SPIDER="spider",l7.BEE="bee",l7.BIG_BEE="big-bee",l7.BIG_BEE_BULLET="big-bee-bullet",l7.BEEHIVE="beehive",l7.BRICK="brick",l7.GRASS="grass",l7.GRASS_DARK="grass-dark",l7.COLLIDER="collider",l7.THORN="thorn",l7.THORN_BALL="thorn-ball",l7.MAP_LINE="line",l7.WOOD="wood",l7.WOOD_STROKE="wood-stroke",l7.POISON="poison",l7.POISON_BUBBLE="poison-bubble",l7.POISON_SURFACE="poison-surface",l7.WATER="water",l7.WATER_SURFACE="water-surface",l7.DANGER_AREA="danger-area",l7.DUST_PARTICLE="dust-particle",l7.ROPE="rope",l7.JOINT="joint",l7.DRAW_LINE="draw-line",l7.CROSSING_BEE_LINE="crossing-bee-line",l7),GR=R.COLLIDER,MR=R.DANGER_AREA,UR=R.DOGE,Bp=[GR,MR,R.GRASS,R.GRASS_DARK,R.BRICK,R.MAP_LINE,R.POISON,R.POISON_SURFACE,R.POISON_BUBBLE,R.AIR_FAN,R.WOOD,R.WOOD_STROKE,R.THORN_BALL,R.THORN,R.CROSSING_BEE_LINE,R.BEE,UR,R.BEEHIVE,R.ROPE,R.BALLOON,R.WATER,R.WATER_SURFACE,R.JOINT,R.DUST_PARTICLE,R.DRAW_LINE],Dp={},Ca=0;Ca<Bp.length;Ca++)Dp[Bp[Ca]]=Ca;d._RF.pop(),d._RF.push({},"4c577T9x2FPKpyFoVPXbav0","ObjectIds",void 0);var N=((l8=N||{})[l8.BRICK=1]="BRICK",l8[l8.STROKE=3]="STROKE",l8[l8.GRASS_DARK=4]="GRASS_DARK",l8[l8.GRASS=5]="GRASS",l8[l8.COLLIDER=6]="COLLIDER",l8[l8.THORN=7]="THORN",l8[l8.WATER=8]="WATER",l8[l8.WATER_SURFACE=9]="WATER_SURFACE",l8[l8.LINE=10]="LINE",l8[l8.POISON_SURFACE=11]="POISON_SURFACE",l8[l8.POISON=12]="POISON",l8[l8.WOOD=13]="WOOD",l8[l8.THORN_BALL=14]="THORN_BALL",l8[l8.CONNECT=15]="CONNECT",l8[l8.DANGER_AREA=16]="DANGER_AREA",l8[l8.BALLOON=17]="BALLOON",l8[l8.AIR_FAN=18]="AIR_FAN",l8[l8.SPIDER=19]="SPIDER",l8[l8.DOGE_A=101]="DOGE_A",l8[l8.DOGE_B=106]="DOGE_B",l8[l8.BIG_BEE=107]="BIG_BEE",l8[l8.BEEHIVE_A=102]="BEEHIVE_A",l8[l8.BEEHIVE_B=103]="BEEHIVE_B",l8[l8.BEEHIVE_C=104]="BEEHIVE_C",l8[l8.BEEHIVE_D=105]="BEEHIVE_D",l8);d._RF.pop(),d._RF.push({},"7bb7ftpsjJCX5G6+WtNYJ2x","PhysicsGroup",void 0);var bt=((l9=bt||{})[l9.DEFAULT=1]="DEFAULT",l9[l9.BEE=2]="BEE",l9[l9.MAIN_OBJECT=4]="MAIN_OBJECT",l9[l9.WORLD_BOUND=8]="WORLD_BOUND",l9[l9.ROPE=16]="ROPE",l9);d._RF.pop(),d._RF.push({},"a6e4bjV/RVH17qBEx1mZaFg","ResourcePaths",void 0);var l5,l6,l7,l8,l9,l10,Op,Xt=((l10=Xt||{}).WATER_SURFACE_FRAME="sprites/water-surface/spriteFrame",l10.IC_HAND_FRAME="sprites/ic-hand/spriteFrame",l10.POISON_CIRCLE_FRAME="sprites/poison-circle/spriteFrame",l10.POISON_BUBBLE_PREFAB="prefabs/PoisonBubble",l10.DUST_PARTICLE_SPINE="spines/dust-particle/siwang_texiao",l10.MAP_JSON_PREFIX="maps-json/",l10);d._RF.pop(),d._RF.push({},"476e6UyMHFJyI2GmFP4KpHY","BaseObject",void 0);var Ip,Np,Fp,cr,xp,Gp,ze=(0,f.ccclass)("BaseObject")(Op=function(l){E(o,l);var r=A(o);function o(){var e;S(this,o);for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return(e=r.call.apply(r,[this].concat(n))).points=[],e.body=null,e.bodyType=je.Static,e}return k(o,[{key:"onLoad",value:function value(){this.node.layer=Nt.Enum.UI_2D}},{key:"sleep",value:function value(){if(!this.body){if(this.body=this.getComponent(J),!this.body)return;this.bodyType=this.body.type}this.enabled=!1,this.body.sleep(),this.body.type=je.Static}},{key:"wake",value:function value(){if(this.enabled=!0,this.body)this.body.wakeUp(),this.body.type=this.bodyType;else{if(this.body=this.getComponent(J),!this.body)return;this.bodyType=this.body.type}}},{key:"hide",value:function value(){this.enabled=!1,null==(e=this.body)||e.sleep();var e,t=this.getComponent(Ie.Skeleton);t&&(t.enabled=!1);var n=this.getComponent(oe);n&&(n.enabled=!1)}},{key:"preHide",value:function value(){var e;this.enabled=!1,null==(e=this.body)||e.sleep(),this.scheduleOnce(this.hide,.2)}},{key:"appear",value:function value(){this.enabled=!0;var e=this.getComponent(Ie.Skeleton);e&&(e.enabled=!0)}},{key:"setSpineAnimation",value:function value(e,t){var n=this.getComponent(Ie.Skeleton);null==n||n.setAnimation(0,e,t)}},{key:"setEnable",value:function value(e){this.enabled=e}},{key:"angle",value:function value(e,t){var n=Math.atan2(t,e);return n<0&&(n+=2*Math.PI),n}},{key:"getVectorDataFromAToB",value:function value(e,t){var n=t.x-e.x,i=t.y-e.y;return{vector:new x(n,i).normalize(),dx:n,dy:i}}},{key:"kill",value:function value(){this.node.active=!1}},{key:"revive",value:function value(){this.node.active=!0}}]),o}(D))||Op;d._RF.pop(),d._RF.push({},"15b7bvQaXpFgItiEHCr7GsP","AirFan",void 0);var HR=f.ccclass,Mp=f.property,jR=Ludex.Utils.Array,WR=(Ip=HR("AirFan"),Np=Mp(Ct),Fp=Mp(Qe),Ip((xp=h((cr=function(l){E(o,l);var r=A(o);function o(){var e;S(this,o);for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return e=r.call.apply(r,[this].concat(n)),p(e,"pushForce",xp,v(e)),e.force=new x(0,0),e.affectedObjects=[],p(e,"collider",Gp,v(e)),e.colliders=[],e.onBeginContact=function(a,s){jR.has(e.affectedObjects,s.node.name)&&-1===e.colliders.findIndex(function(u){return u.node===s.node})&&e.colliders.push(s)},e.onEndContact=function(a,s){var u=e.colliders.indexOf(s);-1!==u&&e.colliders.splice(u,1)},e}return k(o,[{key:"__preload",value:function value(){this.collider=this.getComponent(Qe),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function value(){L.lazyValidateProperties(this)}},{key:"start",value:function value(){this.colliders=[],this.affectedObjects=[R.DOGE,R.THORN_BALL,R.DRAW_LINE,R.WOOD,R.BALLOON],this.collider.on(At.BEGIN_CONTACT,this.onBeginContact),this.collider.on(At.END_CONTACT,this.onEndContact)}},{key:"update",value:function value(e){var t,n=O(this.colliders);try{for(n.s();!(t=n.n()).done;){var i=t.value,a=i.getComponent(J);if(a){var s=this.force;i.node.name===R.DRAW_LINE&&(s=this.force.clone().multiplyScalar(i.density/3)),i.node.name===R.DOGE&&(s=this.force.clone().multiplyScalar(250/this.pushForce)),a.applyForceToCenter(s,!0)}}}catch(u){n.e(u)}finally{n.f()}}},{key:"setForceDirection",value:function value(e){var t=new x(0,1).rotate(U.toRadian(e));this.force=t.clone().normalize().multiplyScalar(this.pushForce)}},{key:"sleep",value:function value(){at(ot(o.prototype),"sleep",this).call(this),this.enabled=!1}},{key:"wake",value:function value(){at(ot(o.prototype),"wake",this).call(this),this.enabled=!0}}]),o}(ze)).prototype,"pushForce",[Np],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return 400}}),Gp=h(cr.prototype,"collider",[Fp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cr))||cr);d._RF.pop(),d._RF.push({},"8a02eYTwSpP9IpQ4MrTsAiL","SpineAnimationName",void 0),d._RF.pop(),d._RF.push({},"ff37brNpltMuaZm+M+x9+1N","Rope",void 0);var Up,Hp,jp,hr,qp,Kp,Jp,Xp,Zp,Qp,Aa,ey,ty,ny,qR=f.ccclass,iy=f.property,KR=(Up=qR("Rope"),Hp=iy(yn),jp=iy(Ct),Up((qp=h((hr=function(l){E(o,l);var r=A(o);function o(){var e;S(this,o);for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return e=r.call.apply(r,[this].concat(n)),p(e,"frame",qp,v(e)),p(e,"length",Kp,v(e)),e.nodes=[],e}return k(o,[{key:"onLoad",value:function value(){this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function value(){L.lazyValidateProperties(this)}},{key:"start",value:function value(){this.nodes=[],this.node.setPosition(this.headJoint.getPosition());for(var e=this.headJoint.getPosition().clone().add(new I(0,4)).multiplyScalar(-1),t=this.tailJoint.getPosition().clone().add(new I(0,115)).add(e).multiplyScalar(1/this.length),n=t.length(),i=t.clone().multiplyScalar(-1*this.length),a=new x(i.x,i.y),s=0;s<this.length;s++){var u=this.createNode(n);if(!u)return;this.node.addChild(u),u.name="node-".concat(s),u.setPosition(t.clone().multiplyScalar(s)),this.nodes.push(u)}for(var c=0;c<this.nodes.length;c++){var y=this.nodes[c];if(0!==c){var m=this.nodes[c-1],w=y.addComponent(vn);w.enabled=!1,w.anchor=new x(0,-4),w.connectedAnchor=new x(0,4),w.connectedBody=m.getComponent(J),w.collideConnected=!1,w.enableLimit=!0,w.enabled=!0;var _=y.addComponent(oa);if(_.enabled=!1,_.connectedBody=this.headJoint.getComponent(J),_.anchor=new x(0,-4),_.connectedAnchor=new x(0,4),_.collideConnected=!1,_.maxForce=160,_.enabled=!0,c===this.nodes.length-1){var g=this.tailJoint.addComponent(vn);g.enabled=!1,g.anchor=new x(0,115),g.connectedBody=y.getComponent(J),g.connectedAnchor=new x(0,4),g.collideConnected=!1,g.enableLimit=!0,g.enabled=!0}}else{var C=y.addComponent(vn);C.enabled=!1,C.connectedBody=this.headJoint.getComponent(J),C.anchor=new x(0,-4),C.connectedAnchor=new x(0,4),C.enableLimit=!0,C.collideConnected=!1,C.enabled=!0}}var P=this.tailJoint.addComponent(oa);P.enabled=!1,P.connectedBody=this.headJoint.getComponent(J),P.anchor=new x(0,118),P.connectedAnchor=new x(0,-4),P.linearOffset=a,P.maxForce=500,P.enabled=!0}},{key:"disconnect",value:function value(){var e=this.nodes[0].getComponent(vn);if(e){e.connectedBody=null,e.enabled=!1;var t=this.tailJoint.getComponent(vn);if(t){t.connectedBody=null,t.enabled=!1;var n=this.tailJoint.getComponent(oa);n&&(n.enabled=!1,n.connectedBody=null);var i,a=O(this.nodes);try{for(a.s();!(i=a.n()).done;){var s=i.value.getComponent(oe);if(!s)return;s.enabled=!1}}catch(u){a.e(u)}finally{a.f()}}}}},{key:"createNode",value:function value(e){var t=new b("node");t.layer=this.node.layer,t.addComponent(oe).spriteFrame=this.frame;var n=t.addComponent(Ee);n.setAnchorPoint(.5,.5),n.setContentSize(6,1.2*e);var i=t.addComponent(J);return i.linearDamping=5,i.angularDamping=50,i.gravityScale=.1,i.group=bt.ROPE,t.addComponent(es).size=n.contentSize,t.name=R.ROPE,t}}]),o}(D)).prototype,"frame",[Hp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Kp=h(hr.prototype,"length",[jp],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return 0}}),hr))||hr);d._RF.pop(),d._RF.push({},"a8a47NhLJ9C1ahfjfiJ2xjc","Balloon",void 0);var VR=f.ccclass,dr=f.property,YR=Ludex.Utils.Array,JR=(Jp=VR("Balloon"),Xp=dr(fe),Zp=dr(Qe),Qp=dr(J),Jp((ey=h((Aa=function(l){E(o,l);var r=A(o);function o(){var e;S(this,o);for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return e=r.call.apply(r,[this].concat(n)),p(e,"ropePrefab",ey,v(e)),p(e,"collider",ty,v(e)),p(e,"rigidBody",ny,v(e)),e.rope=null,e.onBeginContact=function(a,s){if(e.rope){var u=[R.BEE,R.THORN,R.THORN_BALL];YR.has(u,s.node.name)&&(e.rope.disconnect(),e.setSpineAnimation("animation2",!1),e.scheduleOnce(function(){e.rigidBody.enabled=!1}))}},e}return k(o,[{key:"__preload",value:function value(){this.collider=this.getComponent(Qe),this.rigidBody=this.getComponent(J),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function value(){L.lazyValidateProperties(this)}},{key:"start",value:function value(){this.setSpineAnimation("animation",!0),this.collider.on(At.BEGIN_CONTACT,this.onBeginContact)}},{key:"connectToDoge",value:function value(e){var t=ee(this.ropePrefab).getComponent(KR);if(t)return t.headJoint=this.node,t.tailJoint=e,t.node.name=R.ROPE,this.rope=t,t}}]),o}(ze)).prototype,"ropePrefab",[Xp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ty=h(Aa.prototype,"collider",[Zp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ny=h(Aa.prototype,"rigidBody",[Qp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Aa))||Aa);d._RF.pop(),d._RF.push({},"ec831BZISdLgp8vKNuRirUM","PusherBehavior",void 0);var XR=function(){function l(r){S(this,l),this.bee=r}return k(l,[{key:"onBeginContact",value:function value(){var r=this.bee;if(r.target){var o=U.randomRange(20,30),e=r.getVectorDataFromAToB(r.node.getWorldPosition(),r.target.getWorldPosition());e.vector.rotate(Math.random()>.5?-Math.PI/2:Math.PI/2).multiplyScalar(o),r.move(e);var t=r.getComponent(qn);t&&(t.density*=1.1,t.density>=2.5&&(t.density=1,r.setRole(st.NORMAL),r.setState(ye.ATTACKING)))}}}]),l}();d._RF.pop(),d._RF.push({},"744a5WT+0VHFLma6AT7mXct","NormalBehavior",void 0);var ZR=function(){function l(r){S(this,l),this.touchCount=0,this.bee=r,this.timeToAttack=U.randomRange(.7,.8),this.countTimeToAttack=0}return k(l,[{key:"onBeginContact",value:function value(){var r=this;1===this.touchCount&&this.bee.scheduleOnce(function(){r.touchCount>=3&&r.activePusher(),r.touchCount=0},.75),this.touchCount++}},{key:"activePusher",value:function value(){this.bee.setRole(st.PUSHER)}},{key:"update",value:function value(r){this.bee.state===ye.ATTACKING&&(this.countTimeToAttack+=r,this.countTimeToAttack>this.timeToAttack&&(this.bee.findTarget(),this.bee.attackTarget(),this.timeToAttack=U.randomRange(.4,.6),this.countTimeToAttack=0))}}]),l}();d._RF.pop(),d._RF.push({},"19c52/F5VRPcbm2BqdbChIp","BaseBehavior",void 0);var ay,oy,ry,sy,ly,ii,cy,hy,dy,py,yy,QR=function(){function l(r){S(this,l),this.bee=r,this.normalBehavior=new ZR(r),this.pusherBehavior=new XR(r),this.seekingPathBehavior=null}return k(l,[{key:"onBeginContact",value:function value(r,o){switch(this.bee.role){case st.NORMAL:this.normalBehavior.onBeginContact();break;case st.PATH_SEEKER:if(!this.seekingPathBehavior)return;this.seekingPathBehavior.onBeginContact(r,o);break;case st.PUSHER:this.pusherBehavior.onBeginContact()}}},{key:"update",value:function value(r){this.updateSpecialRole(r)||this.normalBehavior.update(r)}},{key:"updateSpecialRole",value:function value(r){return this.bee.role===st.PATH_SEEKER&&!!this.seekingPathBehavior&&this.seekingPathBehavior.update(r)}}]),l}();d._RF.pop(),d._RF.push({},"0b146P+xAlN5LGe2MJHlJDc","Bee",void 0);var $R=f.ccclass,Ni=f.property,Fi=(ay=$R("Bee"),oy=Ni(b),ry=Ni(Ie.Skeleton),sy=Ni(Qe),ly=Ni(J),ay((cy=h((ii=function(l){E(o,l);var r=A(o);function o(){var e;S(this,o);for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return e=r.call.apply(r,[this].concat(n)),p(e,"flipNode",cy,v(e)),p(e,"spriteNode",hy,v(e)),e.target=null,e.isSpawnLeftSide=!1,e.role=st.NORMAL,e.state=ye.IDLE,e.behavior=new QR(v(e)),e.speed=0,p(e,"collider",dy,v(e)),p(e,"rigidBody",py,v(e)),p(e,"gameObjects",yy,v(e)),e.wanderingOriginHeight=null,e.isWandering=!1,e.onBeginContact=function(a,s){e.enabled&&(e.rigidBody.linearDamping=U.randomRangeInt(6,8),s.node.name!==R.THORN&&s.node.name!==R.POISON&&s.node.name!==R.BIG_BEE_BULLET?s.node.name!==R.WATER?(s.node.name===R.DOGE&&M.playSound(Q.BEE_STING_DOGE,{volume:.3}),e.behavior.onBeginContact(a,s)):e.drown():e.smokeDisappear())},e}return k(o,[{key:"__preload",value:function value(){var e;this.collider=this.getComponent(Qe),this.rigidBody=this.getComponent(J),this.gameObjects=null==(e=this.node.parent)?void 0:e.getComponent($t),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function value(){L.lazyValidateProperties(this)}},{key:"start",value:function value(){this.setState(ye.IDLE),this.collider.on(At.BEGIN_CONTACT,this.onBeginContact),this.collider.enabled=!1}},{key:"followTarget",value:function value(e){this.target=e,this.collider.enabled=!0,this.attackTarget()}},{key:"followInstructions",value:function value(){this.collider.enabled=!0}},{key:"findTarget",value:function value(){var e=this.gameObjects.getNearestDogeToBee(this);e&&!e.isCantBeTargeted()?this.target=e.node:this.target=null}},{key:"smokeDisappear",value:function value(){this.preHide(),this.setSpineAnimation("animation3",!1),this.setState(ye.DIE),this.node.scene.emit(F.BEE_DIE)}},{key:"flap",value:function value(){this.setSpineAnimation("animation",!0)}},{key:"attackTarget",value:function value(){var e=this;if(!this.target){if(this.isWandering)return;this.isWandering=!0,this.scheduleOnce(function(){e.isWandering=!1},.5),this.speed=U.randomRange(40,50);var t=this.node.getWorldPosition();null===this.wanderingOriginHeight&&(this.wanderingOriginHeight=t.y+50),t.x+=U.randomRange(-300,300),t.y=U.randomRange(this.wanderingOriginHeight,this.wanderingOriginHeight-50);var n=this.getVectorDataFromAToB(this.node.getWorldPosition(),t);return this.move(n),void(this.rigidBody.linearDamping=0)}this.speed=U.randomRange(20,30);var i=this.getVectorDataFromAToB(this.node.getWorldPosition(),this.target.getWorldPosition());i.vector.rotate(U.randomRange(-.3,.3)).multiplyScalar(this.speed),this.move(i),this.rigidBody.linearDamping=0,this.setState(ye.ATTACKING)}},{key:"sleep",value:function value(){at(ot(o.prototype),"sleep",this).call(this),this.target=null}},{key:"rotateToVector",value:function value(e){this.node.angle=U.toDegree(this.angle(e.x,e.y)),this.node.angle+=180;var t=this.node.angle/360-Math.floor(this.node.angle/360);t>.25&&t<.75?this.flipNode.setScale(new I(1,-1,1)):this.flipNode.setScale(new I(1,1,1))}},{key:"move",value:function value(e){this.rigidBody.linearVelocity=e.vector,this.rotateToVector({x:e.dx,y:e.dy})}},{key:"fly",value:function value(e){this.rigidBody.linearVelocity=e,this.rigidBody.linearDamping=0,this.flap(),this.setState(ye.FLYING)}},{key:"setState",value:function value(e){this.state=e}},{key:"setRole",value:function value(e){this.role=e}},{key:"update",value:function value(e){this.behavior.update(e)}},{key:"drown",value:function value(){this.collider.enabled=!1,this.speed=20;var e=this.node.getWorldPosition();e.y=e.y-1e3;var t=this.getVectorDataFromAToB(this.node.getWorldPosition(),e);this.move(t),this.rigidBody.linearDamping=0,this.spriteNode.paused=!0,this.setState(ye.DIE),this.node.scene.emit(F.BEE_DIE)}},{key:"setSpineAnimation",value:function value(e,t){this.spriteNode.setAnimation(0,e,t)}}]),o}(ze)).prototype,"flipNode",[oy],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),hy=h(ii.prototype,"spriteNode",[ry],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),dy=h(ii.prototype,"collider",[sy],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),py=h(ii.prototype,"rigidBody",[ly],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yy=h(ii.prototype,"gameObjects",[Ni],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ii))||ii);d._RF.pop(),d._RF.push({},"23d64mdR6VPRoojd1BBKwos","World",void 0),d._RF.pop(),d._RF.push({},"5f264eibqlEH7PqbJQqHTF7","Line",void 0);var eP=f.ccclass,ky=f.property,ai=(vy=eP("Line"),fy=ky(ne),my=ky(J),vy((by=h((pr=function(l){E(o,l);var r=A(o);function o(){var e;S(this,o);for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return(e=r.call.apply(r,[this].concat(n))).points=[],e.colliderInterval=20,e.colliders=[],e.colliderTag=0,p(e,"graphic",by,v(e)),p(e,"rigidBody",Sy,v(e)),e}return k(o,[{key:"__preload",value:function value(){this.graphic=this.getComponent(ne),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function value(){L.lazyValidateProperties(this)}},{key:"init",value:function value(){this.points=[],this.colliders=[],this.colliderTag=0}},{key:"drawTo",value:function value(e,t,n,i){this.graphic.moveTo(e,t),this.graphic.lineTo(n,i),this.graphic.stroke()}},{key:"addBody",value:function value(e,t){var n=this.node.addComponent(qn);n.offset=new x(e,t),n.radius=8,n.density=5,n.tag=this.colliderTag,n.apply(),this.colliderTag+=1,this.colliders.push(n)}},{key:"deActiveColliders",value:function value(){var e,t=O(this.colliders);try{for(t.s();!(e=t.n()).done;)e.value.enabled=!1}catch(n){t.e(n)}finally{t.f()}}},{key:"storePoints",value:function value(e,t){var n=new x(e,t);this.points.push(n)}},{key:"addPhysics",value:function value(){for(var e=0;e<this.points.length-1;e++){var t=this.points[e],n=this.points[e+1];if(t&&n){var i=this.getInternalPoints(t,n);if(e<this.points.length-2){var a=i.pop();if(!a)continue;this.points[e+1]=a}var s,u=O(i);try{for(u.s();!(s=u.n()).done;){var c,y=s.value,m=!1,w=O(this.colliders);try{for(w.s();!(c=w.n()).done;){var _=c.value;U.Vec2.distance(y,_.offset)<2*_.radius&&(m=!0)}}catch(C){w.e(C)}finally{w.f()}m||this.addBody(y.x,y.y)}}catch(C){u.e(C)}finally{u.f()}}}var g=this.points[this.points.length-1];g&&this.addBody(g.x,g.y)}},{key:"getInternalPoints",value:function value(e,t){for(var n=t.x-e.x,i=t.y-e.y,a=new x(n,i).normalize().multiplyScalar(this.colliderInterval),s=U.Vec2.distance(e,t),u=Math.floor(s/this.colliderInterval),c=[e],y=0;y<u;y++){var m=c[c.length-1];if(m){var w=m.clone().add(a);c.push(w)}}return c}},{key:"findNearestCollider",value:function value(e){var t=this.colliders[0];if(!t)return null;var n=new I(t.worldPosition.x,t.worldPosition.y,0),i=x.distance(e,n);return this.colliders.forEach(function(a){var s=new I(a.worldPosition.x,a.worldPosition.y,0);x.distance(e,s)<i&&(i=x.distance(e,s),t=a)}),t}}]),o}(ze)).prototype,"graphic",[fy],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Sy=h(pr.prototype,"rigidBody",[my],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pr))||pr);d._RF.pop(),d._RF.push({},"afc3eWzi4tHNYb9W7f6QpCX","SeekingPathBehavior",void 0);var vy,fy,my,pr,by,Sy,Cy,Ey,tP=function(){function l(r,o){S(this,l),this.isFinishSeeking=!1,this.vectorDataGroup=[],this.index=0,this.bee=r,this.isSeekToLastPoint=o,this.vectorDataGroup=[],this.isFinishSeeking=!1,this.time=.02,this.remaining=0,this.index=0}return k(l,[{key:"seek",value:function value(r){var o=this.bee.node.scene.getComponentInChildren(ai);if(!o)return!1;var e=o.colliders.findIndex(function(n){if(n.tag===r.tag)return!0});if(-1===e)return!1;this.vectorDataGroup=[],this.isFinishSeeking=!1,this.time=.04,this.remaining=0,this.index=0;var t=this.bee.speed;return t||(t=U.randomRange(20,30)),this.isSeekToLastPoint?this.seekToLastPoint(e,o,t):this.seekToFirstPoint(e,o,t),!0}},{key:"seekToLastPoint",value:function value(r,o,e){for(var t=r;t<o.colliders.length-1;t++){var n=o.colliders[t],i=o.colliders[t+1],a=this.bee.getVectorDataFromAToB(n.worldPosition,i.worldPosition);a.vector.multiplyScalar(e),this.vectorDataGroup.push(a)}}},{key:"seekToFirstPoint",value:function value(r,o,e){for(var t=r;t>0;t--){var n=o.colliders[t],i=o.colliders[t-1],a=this.bee.getVectorDataFromAToB(n.worldPosition,i.worldPosition);a.vector.multiplyScalar(e),this.vectorDataGroup.push(a)}}},{key:"flyToNextDirection",value:function value(){var r=this.vectorDataGroup[this.index];(this.index+=1,r)?this.bee.move(r):(this.isFinishSeeking=!0,this.bee.setRole(st.NORMAL),this.bee.setState(ye.ATTACKING))}},{key:"fly",value:function value(r){this.remaining+=r,this.remaining>this.time&&(this.flyToNextDirection(),this.time=.02,this.remaining=0)}},{key:"onBeginContact",value:function value(r,o){this.bee.state===ye.SEEKING_PATH&&o.node.name!==R.DRAW_LINE?(this.isFinishSeeking=!0,this.bee.setRole(st.NORMAL),this.bee.setState(ye.ATTACKING)):this.isFinishSeeking||this.bee.state===ye.WAITING_TO_SEEK_PATH||o.node.name!==R.DRAW_LINE||this.handlePathSeekerTouchLine(o)}},{key:"handlePathSeekerTouchLine",value:function value(r){var o=this;this.seek(r)&&this.bee.state!==ye.SEEKING_PATH&&(this.bee.setState(ye.WAITING_TO_SEEK_PATH),this.bee.scheduleOnce(function(){o.bee.setState(ye.SEEKING_PATH)},.3))}},{key:"update",value:function value(r){return this.bee.state===ye.SEEKING_PATH&&(this.fly(r),!0)}}]),l}();d._RF.pop(),d._RF.push({},"2181aAj+ElOoL2tBGH10euY","Beehive",void 0);var Ay,Ty,Ry,Py,_y,zi,By,Dy,Oy,Iy,nP=f.ccclass,iP=f.property,aP=nP("Beehive")((Ey=h((Cy=function(l){E(o,l);var r=A(o);function o(){var e;S(this,o);for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return(e=r.call.apply(r,[this].concat(n))).totalPathSeekers=0,e.isSeekToLastPoint=!0,p(e,"gameObjects",Ey,v(e)),e}return k(o,[{key:"onLoad",value:function value(){var e;this.gameObjects=null==(e=this.node.parent)?void 0:e.getComponent($t),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function value(){L.lazyValidateProperties(this)}},{key:"releaseBee",value:function value(e){var t=this;this.updateTotalPathSeekers(),this.scheduleOnce(function(){var n=e.getComponent(Fi);if(n){t.createPathSeeker(n),"isRightSide"in t.node&&!0===t.node.isRightSide?t.spawnInRightSide(n):t.spawnInLeftSide(n),n.wake();var i=t.gameObjects.getRandomDogeToBee();i&&t.scheduleOnce(function(){return n.followTarget(i.node)},.2)}},U.randomRange(.1,.4))}},{key:"updateTotalPathSeekers",value:function value(){"totalPathSeekers"in this.node&&"number"==typeof this.node.totalPathSeekers&&(this.totalPathSeekers=this.node.totalPathSeekers)}},{key:"spawnInLeftSide",value:function value(e){var t=this.node.getPosition(),n=t.x,i=t.y,a=U.randomRangeInt(-10,0),s=U.randomRangeInt(38,48);e.isSpawnLeftSide=!0,e.node.setScale(new I(1,1,1)),e.node.setPosition(n+a,i+s),e.fly(new x(-2,-1).normalize().multiplyScalar(2))}},{key:"spawnInRightSide",value:function value(e){var t=this.node.getPosition(),n=t.x,i=t.y,a=U.randomRangeInt(0,10),s=U.randomRangeInt(38,48);e.isSpawnLeftSide=!1,e.node.setScale(new I(1,1,1)),e.node.setPosition(n+a,i+s),e.fly(new x(2,-1).normalize().multiplyScalar(2))}},{key:"createPathSeeker",value:function value(e){0!==this.totalPathSeekers&&(e.setRole(st.PATH_SEEKER),e.behavior.seekingPathBehavior=new tP(e,this.isSeekToLastPoint),this.isSeekToLastPoint=!this.isSeekToLastPoint,this.totalPathSeekers-=1)}}]),o}(ze)).prototype,"gameObjects",[iP],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Cy))||Cy;d._RF.pop(),d._RF.push({},"a17a07Pu/tAGb4MdM3jxHke","BigBeeBullet",void 0);var Ny,Fy,zy,xy,Gy,oi,Uy,Hy,jy,Wy,qy,oP=f.ccclass,Ta=f.property,Ky=(Ay=oP("BigBeeBullet"),Ty=Ta(oe),Ry=Ta(Ie.Skeleton),Py=Ta(Qe),_y=Ta(J),Ay((By=h((zi=function(l){E(o,l);var r=A(o);function o(){var e;S(this,o);for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return e=r.call.apply(r,[this].concat(n)),p(e,"stinger",By,v(e)),p(e,"ci",Dy,v(e)),p(e,"collider",Oy,v(e)),p(e,"rigidBody",Iy,v(e)),e.onBeginContact=function(){e.stinger.active=!1,e.ci.active=!0;var a=e.ci.getComponent(Ie.Skeleton);a&&(a.enabled=!0,a.setAnimation(0,"animation",!1),M.playSound(Q.BEE_BULLET_EXPLODE,{allowMultiple:!0}),a.setCompleteListener(function(){e.kill()}))},e}return k(o,[{key:"onLoad",value:function value(){this.collider=this.getComponent(Qe),this.rigidBody=this.getComponent(J),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function value(){L.lazyValidateProperties(this)}},{key:"start",value:function value(){this.revive()}},{key:"revive",value:function value(){at(ot(o.prototype),"revive",this).call(this),this.stinger.active=!0,this.ci.active=!1,this.ci.getComponent(Ie.Skeleton).enabled=!1,this.collider.once(At.BEGIN_CONTACT,this.onBeginContact)}},{key:"kill",value:function value(){at(ot(o.prototype),"kill",this).call(this),this.stinger.active=!1,this.ci.active=!1}},{key:"forwardToDoge",value:function value(e){var t=U.randomRange(20,30),n=this.getVectorDataFromAToB(this.node.getWorldPosition(),e.getWorldPosition());n.vector.rotate(U.randomRange(-.3,.3)).multiplyScalar(t),this.rigidBody.linearVelocity=n.vector,this.node.angle=U.toDegree(this.angle(n.dx,n.dy))}}]),o}(ze)).prototype,"stinger",[Ty],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Dy=h(zi.prototype,"ci",[Ry],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Oy=h(zi.prototype,"collider",[Py],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Iy=h(zi.prototype,"rigidBody",[_y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),zi))||zi);d._RF.pop(),d._RF.push({},"2b15b1CihdEf60Zy/wIYirK","BigBee",void 0);var Vy,Yy,Jy,Xy,Ra,yr,Zy,Qy,rP=f.ccclass,xi=f.property,vr=(Ny=rP("BigBee"),Fy=xi(fe),zy=xi(Ie.Skeleton),xy=xi(qn),Gy=xi(J),Ny((Uy=h((oi=function(l){E(e,l);var r,o=A(e);function e(){var t;S(this,e);for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];return t=o.call.apply(o,[this].concat(i)),p(t,"bulletPrefab",Uy,v(t)),t.state=ye.IDLE,t.target=null,t.bulletPool=[],t.timeToAttack=0,t.countTimeToAttack=0,p(t,"skeleton",Hy,v(t)),p(t,"gameObjects",jy,v(t)),p(t,"collider",Wy,v(t)),p(t,"rigidBody",qy,v(t)),t.onBeginContact=function(s,u){t.enabled&&(u.node.name!==R.THORN&&u.node.name!==R.POISON||t.smokeDisappear())},t}return k(e,[{key:"onLoad",value:function value(){var t;this.skeleton=this.getComponent(Ie.Skeleton),this.gameObjects=null==(t=this.node.parent)?void 0:t.getComponent($t),this.collider=this.getComponent(qn),this.rigidBody=this.getComponent(J),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function value(){L.lazyValidateProperties(this)}},{key:"start",value:function value(){this.node.setScale(new I(.7,.7,.7)),this.timeToAttack=U.randomRange(1,2),this.countTimeToAttack=0,this.createBulletPool(),this.initDustParticle();var t=this.gameObjects.getRandomDogeToBee();t&&(this.target=t.node,this.state=ye.FLYING,this.collider.on(At.BEGIN_CONTACT,this.onBeginContact))}},{key:"update",value:function value(t){this.state===ye.ATTACKING&&(this.countTimeToAttack+=t,this.countTimeToAttack>this.timeToAttack&&(this.attackTarget(),this.timeToAttack=U.randomRange(1,2),this.countTimeToAttack=0))}},{key:"createBulletPool",value:function value(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;this.bulletPool=[];for(var n=0;n<t;n++)this.createBullet()}},{key:"initDustParticle",value:(r=B(function(){var t,n,i;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(!this.node.parent)return[3,2];return(t=new b(R.DUST_PARTICLE)).layer=0x2000000,t.active=!1,n=t.addComponent(Ie.Skeleton),[4,_e.loadSkeletonDataAsync(Xt.DUST_PARTICLE_SPINE)];case 1:(i=_state.sent())&&this.node&&this.node.isValid&&(n.skeletonData=i,this.node.parent.addChild(t),this.dustParticle=t),_state.label=2;case 2:return[2]}})}),function(){return r.apply(this,arguments)})},{key:"createDust",value:function value(){var t=this;if(this.dustParticle){this.dustParticle.active=!0;var n=this.node.getWorldPosition(),i=n.x,a=n.y;this.dustParticle.setWorldPosition(new I(i,a));try{var s=this.dustParticle.getComponent(Ie.Skeleton);null==s||s.setAnimation(0,"animation",!1)}catch(unused){}this.scheduleOnce(function(){t.dustParticle&&(t.dustParticle.active=!1)},.5)}}},{key:"createBullet",value:function value(){if(!this.node.parent)return null;var t=ee(this.bulletPrefab),n=t.getComponent(Ky);return t.name=R.BIG_BEE_BULLET,n&&n.kill(),this.node.parent.addChild(t),this.bulletPool.push(t),t}},{key:"smokeDisappear",value:function value(){this.hide(),this.createDust(),this.state=ye.DIE,this.node.scene.emit(F.BIG_BEE_DIE)}},{key:"sleep",value:function value(){}},{key:"wake",value:function value(){}},{key:"hide",value:function value(){this.enabled=!1,this.rigidBody.sleep(),this.skeleton.enabled=!1}},{key:"preHide",value:function value(){}},{key:"appear",value:function value(){}},{key:"setSpineAnimation",value:function value(t,n){}},{key:"attackTarget",value:function value(){var t=this;this.skeleton.setAnimation(0,"attack",!1),this.skeleton.setCompleteListener(function(){t.skeleton.setAnimation(0,"fly",!0)}),this.scheduleOnce(function(){if(t.target){var n=t.bulletPool.filter(function(y){return!1===y.active})[0];if(!n){var i=t.createBullet();if(!i)return;n=i}var a=n.getComponent(Ky);if(a){a.revive();var s=t.node.getPosition(),u=s.x,c=s.y;n.setPosition(u,c),a.forwardToDoge(t.target)}}},.5)}}]),e}(ze)).prototype,"bulletPrefab",[Fy],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Hy=h(oi.prototype,"skeleton",[zy],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),jy=h(oi.prototype,"gameObjects",[xi],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Wy=h(oi.prototype,"collider",[xy],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),qy=h(oi.prototype,"rigidBody",[Gy],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),oi))||oi);d._RF.pop(),d._RF.push({},"8e16aARuABAK56lFGhIfeH+","Brick",void 0);var $y,ev,nv,iv,sP=f.ccclass,av=f.property,lP=f.requireComponent,uP=(Vy=sP("Brick"),Yy=lP([wi]),Jy=av({tooltip:"Use batch draw all bricks"}),Xy=av(oe),Vy(Ra=Yy((Zy=h((yr=function(l){E(o,l);var r=A(o);function o(){var e;S(this,o);for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return e=r.call.apply(r,[this].concat(n)),p(e,"useBatch",Zy,v(e)),p(e,"sprite",Qy,v(e)),e.brickPolygons=[],e}return k(o,[{key:"__preload",value:function value(){this.mask=this.getComponent(wi),this.graphic=this.getComponent(ne),this.polygonCollider=this.getComponent(Ne),this.validateRequiredComponents(),this.listenGameplayEvents()}},{key:"validateRequiredComponents",value:function value(){L.lazyValidateProperties(this)}},{key:"listenGameplayEvents",value:function value(){}},{key:"addBrickPolygon",value:function value(e){this.brickPolygons.push(e)}},{key:"onLoad",value:function value(){var e=this.getPolygon();e&&(this.useBatch?(this.mask.enabled=!1,this.graphic.enabled=!1,this.addBrickPolygon(e)):(this.updateTransform(e),this.drawMask(e),this.applyCollider(e)))}},{key:"getPolygon",value:function value(){if(!("polygon"in this.node))return null;var e=this.node.polygon;return Array.isArray(e)?e:null}},{key:"updateTransform",value:function value(e){var t=this.calculatePolygonDimensions(e),n=t.width,i=t.height;this.setPosition(0,0),this.setContentSize(n,i)}},{key:"setPosition",value:function value(e,t){this.node.setPosition(e,t)}},{key:"setContentSize",value:function value(e,t){var n=this.sprite.getComponent(Ee);n&&n.setContentSize(e,t)}},{key:"updateContentSizeForBatchDraw",value:function value(){var e=this.brickPolygons.map(function(c){return c.map(function(y){var m=y.x,w=y.y;return new x(m,w)})}).flat(),t=this.calculatePolygonDimensions(e),n=t.width,i=t.height,a=this.calculateSpritePositionForBatchDraw(e),s=this.sprite.getComponent(Ee);if(s){s.setContentSize(n,i);var u=this.sprite.getComponent(oe);u&&u.node.setPosition(a.x,a.y)}}},{key:"calculateSpritePositionForBatchDraw",value:function value(e){for(var t=e[0].x,n=e[0].x,i=e[0].y,a=e[0].y,s=1;s<e.length;s++){var u=e[s],c=u.x,y=u.y;c<t?t=c:c>n&&(n=c),y<i?i=y:y>a&&(a=y)}return{x:t,y:i}}},{key:"calculatePolygonDimensions",value:function value(e){for(var t=e[0].x,n=e[0].x,i=e[0].y,a=e[0].y,s=1;s<e.length;s++){var u=e[s],c=u.x,y=u.y;c<t?t=c:c>n&&(n=c),y<i?i=y:y>a&&(a=y)}return{width:Math.abs(n-t),height:Math.abs(a-i)}}},{key:"drawMask",value:function value(e){this.graphic.moveTo(e[0].x,e[0].y);var t,n=O(e);try{for(n.s();!(t=n.n()).done;){var i=t.value;this.graphic.lineTo(i.x,i.y)}}catch(a){n.e(a)}finally{n.f()}this.graphic.close(),this.graphic.fill()}},{key:"batchDrawAllBrick",value:function value(){if(!(this.brickPolygons.length<1)){this.mask.enabled=!0,this.graphic.enabled=!0,this.updateContentSizeForBatchDraw();var e,t=O(this.brickPolygons);try{for(t.s();!(e=t.n()).done;){var n=e.value;this.drawMask(n)}}catch(i){t.e(i)}finally{t.f()}this.applyColliderForBatchDraw(),this.brickPolygons=[]}}},{key:"applyCollider",value:function value(e){this.polygonCollider.points=e.map(function(t){var n=t.x,i=t.y;return new x(n,i)}),this.polygonCollider.apply()}},{key:"applyColliderForBatchDraw",value:function value(){var e,t=this.brickPolygons.map(function(c){return c.map(function(y){var m=y.x,w=y.y;return new x(m,w)})}),n=O(t);try{for(n.s();!(e=n.n()).done;){var i=e.value,a=new b;a.name=R.BRICK,this.node.addChild(a),a.setPosition(0,0);var s=a.addComponent(J);s.type=je.Static,s.group=bt.MAIN_OBJECT;var u=a.addComponent(Ne);u.points=i,u.apply()}}catch(c){n.e(c)}finally{n.f()}}}]),o}(D)).prototype,"useBatch",[Jy],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return!0}}),Qy=h(yr.prototype,"sprite",[Xy],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ra=yr))||Ra)||Ra);d._RF.pop(),d._RF.push({},"46fa0f/kl1Heo/JvM2kAEAf","GraphicsPattern",void 0);var ov,rv,sv,lv,uv,cv,Pa,Gi,hv,dv,pv,yv,cP=f.ccclass,hP=f.property,_n=($y=cP("GraphicsPattern"),ev=hP(ne),$y((iv=h((nv=function(l){E(o,l);var r=A(o);function o(){var e;S(this,o);for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return e=r.call.apply(r,[this].concat(n)),p(e,"graphic",iv,v(e)),e}return k(o,[{key:"onLoad",value:function value(){this.graphic=this.getComponent(ne),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function value(){L.lazyValidateProperties(this)}},{key:"start",value:function value(){}},{key:"sleep",value:function value(){}},{key:"draw",value:function value(e){this.graphic.moveTo(e[0].x,e[0].y);var t,n=O(e);try{for(n.s();!(t=n.n()).done;){var i=t.value;this.graphic.lineTo(i.x,i.y)}}catch(a){n.e(a)}finally{n.f()}this.graphic.close(),this.graphic.fill()}},{key:"applyCollider",value:function value(e){var t=this.getComponent(Ne);t&&(t.points=e.map(function(n){var i=n.x,a=n.y;return new x(i,a)}),t.apply())}},{key:"setColor",value:function value(e){var t=new le;le.fromHEX(t,e),this.graphic.fillColor=t}}]),o}(ze)).prototype,"graphic",[ev],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nv))||nv);d._RF.pop(),d._RF.push({},"959bd9NhYpMTK0O78HSl4rc","Pattern",void 0);var _a,dP=f.ccclass,La=f.property,pP=f.requireComponent,vv=(ov=dP("Pattern"),rv=pP([ne,Ne,J]),sv=La(oe),lv=La(ne),uv=La(J),cv=La(Ne),ov(Pa=rv((hv=h((Gi=function(l){E(o,l);var r=A(o);function o(){var e;S(this,o);for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return e=r.call.apply(r,[this].concat(n)),p(e,"sprite",hv,v(e)),p(e,"graphic",dv,v(e)),p(e,"rigidBody",pv,v(e)),p(e,"polygonCollider",yv,v(e)),e}return k(o,[{key:"onLoad",value:function value(){this.graphic=this.getComponent(ne),this.rigidBody=this.getComponent(J),this.polygonCollider=this.getComponent(Ne),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function value(){L.lazyValidateProperties(this)}},{key:"start",value:function value(){}},{key:"draw",value:function value(e){var t=this.sprite.getComponent(Ee);if(t){var n=this.getBottomLeftPosition(e),i=n.x,a=n.y,s=this.getTopRightPosition(e),u=s.x,c=s.y;t.setContentSize(u-i,c-a),t.node.setPosition(i,a),this.graphic.moveTo(e[0].x,e[0].y);var y,m=O(e);try{for(m.s();!(y=m.n()).done;){var w=y.value;this.graphic.lineTo(w.x,w.y)}}catch(_){m.e(_)}finally{m.f()}this.graphic.close(),this.graphic.fill()}}},{key:"savePolygonPoints",value:function value(e){this.points=e}},{key:"getPolygonPoints",value:function value(){return this.points}},{key:"applyCollider",value:function value(e){this.polygonCollider.points=e.map(function(t){var n=t.x,i=t.y;return new x(n,i)}),this.polygonCollider.apply()}},{key:"setRigidBodyType",value:function value(e){this.rigidBody.type=e}},{key:"getBottomLeftPosition",value:function value(e){var t,n=e[0].x,i=e[0].y,a=O(e);try{for(a.s();!(t=a.n()).done;){var s=t.value;n>s.x&&(n=s.x),i>s.y&&(i=s.y)}}catch(u){a.e(u)}finally{a.f()}return{x:n,y:i}}},{key:"getTopRightPosition",value:function value(e){var t,n=e[0].x,i=e[0].y,a=O(e);try{for(a.s();!(t=a.n()).done;){var s=t.value;n<s.x&&(n=s.x),i<s.y&&(i=s.y)}}catch(u){a.e(u)}finally{a.f()}return{x:n,y:i}}}]),o}(ze)).prototype,"sprite",[sv],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),dv=h(Gi.prototype,"graphic",[lv],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pv=h(Gi.prototype,"rigidBody",[uv],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yv=h(Gi.prototype,"polygonCollider",[cv],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Pa=Gi))||Pa)||Pa);d._RF.pop(),d._RF.push({},"a08960ZMBtFcLD/1nWNbAM9","Poison",void 0);var fv,yP=f.ccclass,vP=f.requireComponent,mv=yP("Poison")(_a=vP([_n])(_a=function(l){E(e,l);var r,o=A(e);function e(){var t;S(this,e);for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];return(t=o.call.apply(o,[this].concat(i))).polygon=[],t.useBatch=!1,t.poisonPolygons=[],t.bubbleFrame=null,t.bubblePool=null,t.remaining=0,t.maxPoolSize=0,t.totalBubble=0,t}return k(e,[{key:"onLoad",value:function value(){var t;this.graphicPattern=this.getComponent(_n),this.gameObjects=null==(t=this.node.parent)?void 0:t.getComponent($t),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function value(){L.lazyValidateProperties(this)}},{key:"start",value:function value(){this.addRigidBody(),this.useBatch||(this.addPolygonCollider(),this.drawPattern(),this.loadCircleFrame(),this.setTimeSpawnBubble(.2))}},{key:"addPoisonPolygon",value:function value(t){this.poisonPolygons.push(t)}},{key:"batchDrawAllPoisonPools",value:function value(){if(!(this.poisonPolygons.length<1)){this.graphicPattern.setColor("#774798d1");var t,n=O(this.poisonPolygons);try{for(n.s();!(t=n.n()).done;){var i=t.value;this.graphicPattern.draw(i)}}catch(a){n.e(a)}finally{n.f()}this.applyColliderForBatchDraw(),this.loadCircleFrame(),this.setTimeSpawnBubble(.2)}}},{key:"applyColliderForBatchDraw",value:function value(){var t,n=this.poisonPolygons.map(function(y){return y.map(function(m){var w=m.x,_=m.y;return new x(w,_)})}),i=O(n);try{for(i.s();!(t=i.n()).done;){var a=t.value,s=new b;s.name=R.POISON,this.node.addChild(s),s.setPosition(0,0);var u=s.addComponent(J);u.group=bt.MAIN_OBJECT,u.type=je.Static;var c=s.addComponent(Ne);c.points=a,c.sensor=!0,c.apply()}}catch(y){i.e(y)}finally{i.f()}}},{key:"addRigidBody",value:function value(){var t=this.addComponent(J);t&&(t.group=bt.MAIN_OBJECT,t.type=je.Static)}},{key:"addPolygonCollider",value:function value(){var t=this.addComponent(Ne);t&&(t.sensor=!0)}},{key:"drawPattern",value:function value(){this.graphicPattern.setColor("#774798d1"),this.graphicPattern.draw(this.polygon),this.graphicPattern.applyCollider(this.polygon)}},{key:"loadCircleFrame",value:(r=B(function(){var t,n;return _ts_generator(this,function(_state){switch(_state.label){case 0:return[4,_e.loadSpriteFrameAsync(Xt.POISON_CIRCLE_FRAME)];case 1:return t=_state.sent(),this.node.isValid&&t&&(this.bubbleFrame=t,n=this.useBatch?20*this.poisonPolygons.length:20,this.initPool(10,n)),[2]}})}),function(){return r.apply(this,arguments)})},{key:"initPool",value:function value(t,n){this.bubblePool=new Ao,this.maxPoolSize=n;for(var i=0;i<t;i++)this.spawnBubble()}},{key:"setTimeSpawnBubble",value:function value(t){this.remaining=t}},{key:"spawnBubble",value:function value(){if(!this.bubblePool||this.totalBubble>=this.maxPoolSize)return null;var t=null;return this.bubblePool.size()>0?t=this.bubblePool.get():(t=new b(R.POISON_BUBBLE),this.initBubble(t),this.killBubble(t),this.bubblePool.put(t)),t?(this.gameObjects.addObject(t),this.totalBubble+=1,t):null}},{key:"releaseBubble",value:function value(t){this.bubblePool&&(this.killBubble(t),Ci.stopAllByTarget(t),this.bubblePool.put(t),this.totalBubble-=1)}},{key:"killBubble",value:function value(t){if(t){var n=t.getComponent(oe);n&&(n.enabled=!1)}}},{key:"reviveBubble",value:function value(t,n){var i=this.getPosition(n),a=i.minX,s=i.minY,u=i.maxX,c=U.randomRange(a,u),y=t.getComponent(W);y&&(y.opacity=125);var m=t.getComponent(oe);m&&(m.enabled=!0),t.setPosition(new I(c,s))}},{key:"initBubble",value:function value(t){t.layer=this.node.layer,t.addComponent(oe).spriteFrame=this.bubbleFrame,t.addComponent(W)}},{key:"update",value:function value(t){if(this.remaining-=t,this.remaining<=0){if(!this.useBatch){var n=this.spawnBubble();if(!n)return;this.reviveBubble(n,this.polygon),this.playBubbleTween(n,this.polygon);var i=U.randomRange(.3,.5);return void this.setTimeSpawnBubble(i)}var a,s=U.randomRange(.3,.5),u=O(this.poisonPolygons);try{for(u.s();!(a=u.n()).done;){var c=a.value,y=this.spawnBubble();if(!y)return;this.reviveBubble(y,c),this.playBubbleTween(y,c)}}catch(m){u.e(m)}finally{u.f()}this.setTimeSpawnBubble(s)}}},{key:"playBubbleTween",value:function value(t,n){var i=this;if(t){var a=this.getPosition(n),s=a.minY,u=a.maxY,c=t.getPosition(),y=U.randomRange(80,120),m=Math.abs(u-s),w=c.x,_=c.y+(u-s)-10,g=m/y;j(t).call(function(){t.setPosition(c)}).to(g,{position:new I(w,_)},{easing:"smooth"}).call(function(){i.releaseBubble(t)}).start();var C=t.getComponent(W);if(C){var P=g-.4>0?.4:g;C.opacity=160,j(C).delay(g-P).to(P,{opacity:0},{easing:"smooth"}).start()}}}},{key:"getPosition",value:function value(t){var n,i=1e4,a=0,s=1e4,u=0,c=O(t);try{for(c.s();!(n=c.n()).done;){var y=n.value,m=y.x,w=y.y;m<i&&(i=m),m>a&&(a=m),w<s&&(s=w),w>u&&(u=w)}}catch(_){c.e(_)}finally{c.f()}return{minX:i+=20,minY:s+=13,maxX:a-=20,maxY:u-=13}}}]),e}(D))||_a)||_a;d._RF.pop(),d._RF.push({},"8633c11nMJN7I7TAFaGu3Fg","PoisonSurface",void 0);var Ba,gv=(0,f.ccclass)("PoisonSurface")(fv=function(l){E(e,l);var r,o=A(e);function e(){var t;S(this,e);for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];return(t=o.call.apply(o,[this].concat(i))).poisonBubblePrefab=null,t.polygon=[],t.useBatch=!1,t.surfacePolygon=[],t.bubblePool=null,t.remaining=0,t.maxPoolSize=0,t.totalBubble=0,t}return k(e,[{key:"onLoad",value:function value(){var t;this.graphicPattern=this.getComponent(_n),this.gameObjects=null==(t=this.node.parent)?void 0:t.getComponent($t),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function value(){L.lazyValidateProperties(this)}},{key:"start",value:function value(){this.useBatch||(this.drawPattern(),this.loadBubbleFrame())}},{key:"drawPattern",value:function value(){this.graphicPattern.setColor("#9757bcb0"),this.graphicPattern.draw(this.polygon)}},{key:"addPoisonSurfacePolygon",value:function value(t){this.surfacePolygon.push(t)}},{key:"batchDrawAllPoisonSurfaces",value:function value(){if(!(this.surfacePolygon.length<1)){this.graphicPattern.setColor("#9757bcb0");var t,n=O(this.surfacePolygon);try{for(n.s();!(t=n.n()).done;){var i=t.value;this.graphicPattern.draw(i)}}catch(a){n.e(a)}finally{n.f()}this.loadBubbleFrame()}}},{key:"loadBubbleFrame",value:(r=B(function(){var t,n,a;return _ts_generator(this,function(_state){switch(_state.label){case 0:return _state.trys.push([0,2,,3]),[4,_e.loadPrefabAsync(Xt.POISON_BUBBLE_PREFAB)];case 1:if(t=_state.sent(),!this.node.isValid)return[2];if(!t)throw Error("loadBubbleFrame: Prefab is null");return this.poisonBubblePrefab=t,n=this.useBatch?12*this.surfacePolygon.length:12,this.initPool(10,n),this.setTimeSpawnBubble(.3),[3,3];case 2:return _instanceof(a=_state.sent(),Error)||Error(String(a)),[3,3];case 3:return[2]}})}),function(){return r.apply(this,arguments)})},{key:"update",value:function value(t){if(this.remaining-=t,this.remaining<=0){if(!this.useBatch){var n=this.spawnPoisonBubblePop();if(!n)return;this.reviveBubble(n,this.polygon);var i=U.randomRange(.3,.5);return void this.setTimeSpawnBubble(i)}var a,s=U.randomRange(.3,.5),u=O(this.surfacePolygon);try{for(u.s();!(a=u.n()).done;){var c=a.value,y=this.spawnPoisonBubblePop();if(!y)return;this.reviveBubble(y,c)}}catch(m){u.e(m)}finally{u.f()}this.setTimeSpawnBubble(s)}}},{key:"initPool",value:function value(t,n){this.bubblePool=new Ao,this.maxPoolSize=n;for(var i=0;i<t;i++)this.spawnPoisonBubblePop()}},{key:"setTimeSpawnBubble",value:function value(t){this.remaining=t}},{key:"spawnPoisonBubblePop",value:function value(){if(!this.bubblePool||this.totalBubble>=this.maxPoolSize)return null;var t=null;if(this.bubblePool.size()>0)t=this.bubblePool.get();else{if(!_instanceof(t=ee(this.poisonBubblePrefab),b))return null;this.bubblePool.put(t)}return t?(t.name=R.POISON_SURFACE,this.gameObjects.addObject(t),this.totalBubble+=1,t):null}},{key:"releasePoisonBubblePop",value:function value(t){this.bubblePool&&(this.bubblePool.put(t),this.totalBubble-=1)}},{key:"reviveBubble",value:function value(t,n){var i=this;if(t){var a=this.getRandomPosition(n),s=a.x,u=a.y;t.setPosition(new I(s,u));var c=t.getComponent(Ie.Skeleton);c&&(c.setAnimation(0,"animation",!1),c.setCompleteListener(function(){i.releasePoisonBubblePop(t)}))}}},{key:"getRandomPosition",value:function value(t){var n,i=1e4,a=0,s=1e4,u=0,c=O(t);try{for(c.s();!(n=c.n()).done;){var y=n.value,m=y.x,w=y.y;m<i&&(i=m),m>a&&(a=m),w<s&&(s=w),w>u&&(u=w)}}catch(_){c.e(_)}finally{c.f()}return{x:U.randomRange(i+25,a-25),y:U.randomRange(s+5,u-5)}}}]),e}(D))||fv;d._RF.pop(),d._RF.push({},"9aa6cp2xqhK1LJeA0kz2hWR","Water",void 0);var fP=f.ccclass,mP=f.requireComponent,bv=fP("Water")(Ba=mP([_n])(Ba=function(l){E(o,l);var r=A(o);function o(){var e;S(this,o);for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return(e=r.call.apply(r,[this].concat(n))).polygon=[],e.useBatch=!1,e.waterPolygon=[],e}return k(o,[{key:"onLoad",value:function value(){this.graphicPattern=this.getComponent(_n),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function value(){L.lazyValidateProperties(this)}},{key:"start",value:function value(){this.addRigidBody(),this.useBatch||(this.addPolygonCollider(),this.drawPattern())}},{key:"addWaterPolygon",value:function value(e){this.waterPolygon.push(e)}},{key:"batchDrawAllWater",value:function value(){if(!(this.waterPolygon.length<1)){this.graphicPattern.setColor("#58cef0d0");var e,t=O(this.waterPolygon);try{for(t.s();!(e=t.n()).done;){var n=e.value;this.graphicPattern.draw(n)}}catch(i){t.e(i)}finally{t.f()}this.applyColliderForBatchDraw()}}},{key:"applyColliderForBatchDraw",value:function value(){var e,t=this.waterPolygon.map(function(c){return c.map(function(y){var m=y.x,w=y.y;return new x(m,w)})}),n=O(t);try{for(n.s();!(e=n.n()).done;){var i=e.value,a=new b;a.name=R.WATER,this.node.addChild(a),a.setPosition(0,0);var s=a.addComponent(J);s.group=bt.MAIN_OBJECT,s.type=je.Static;var u=a.addComponent(Ne);u.points=i,u.sensor=!0,u.apply()}}catch(c){n.e(c)}finally{n.f()}}},{key:"addRigidBody",value:function value(){var e=this.addComponent(J);e&&(e.group=bt.MAIN_OBJECT,e.type=je.Static)}},{key:"addPolygonCollider",value:function value(){var e=this.addComponent(Ne);e&&(e.sensor=!0)}},{key:"drawPattern",value:function value(){this.graphicPattern.setColor("#58cef0d0"),this.graphicPattern.draw(this.polygon),this.graphicPattern.applyCollider(this.polygon)}}]),o}(D))||Ba)||Ba;d._RF.pop(),d._RF.push({},"d6e4emyi1lPpLbSlAWFj/GD","CrossingBeeLineTypes",void 0);var l11,Sv,kv,wv,Cv,Ev,Av,Tv,Da,ri,Rv,Pv,_v,Lv,Bv,Zt=((l11=Zt||{})[l11.LOW=0]="LOW",l11[l11.MEDIUM=1]="MEDIUM",l11[l11.HIGH=2]="HIGH",l11);aa(Zt),d._RF.pop(),d._RF.push({},"988b72EAIhJ1qc0nrLU68l7","CrossingBeeLine",void 0);var gP=f.ccclass,Mi=f.property,bP=f.requireComponent,SP=(Sv=gP("CrossingBeeLine"),kv=bP([oe,Ee]),wv=Mi(yn),Cv=Mi(yn),Ev=Mi(yn),Av=Mi({type:Zt,displayName:"Sprite type"}),Tv=Mi({type:Et,displayName:"Line thickness",min:0}),Sv(Da=kv((Rv=h((ri=function(l){E(o,l);var r=A(o);function o(){var e;S(this,o);for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return e=r.call.apply(r,[this].concat(n)),p(e,"spriteLow",Rv,v(e)),p(e,"spriteMedium",Pv,v(e)),p(e,"spriteHigh",_v,v(e)),p(e,"spriteType",Lv,v(e)),p(e,"lineThickness",Bv,v(e)),e.startPos=new I,e.endPos=new I,e}return k(o,[{key:"setStartPosition",value:function value(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.startPos.x,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.startPos.z;this.startPos.set(e,t,n),this.updateLine()}},{key:"setEndPosition",value:function value(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.endPos.y,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.endPos.z;this.endPos.set(e,t,n),this.updateLine()}},{key:"updateLine",value:function value(){this.updateContentSize(),this.updatePosition(),this.updateRotation()}},{key:"thickness",get:function get(){return this.lineThickness},set:function set(e){this.lineThickness=e,this.updateContentSize()}},{key:"setSpriteType",value:function value(e){switch(this.spriteType=e,e){case Zt.LOW:this.sprite.spriteFrame=this.spriteLow;break;case Zt.MEDIUM:this.sprite.spriteFrame=this.spriteMedium;break;case Zt.HIGH:this.sprite.spriteFrame=this.spriteHigh}}},{key:"onLoad",value:function value(){this.uiTransform=this.getComponent(Ee),this.sprite=this.getComponent(oe),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function value(){L.lazyValidateProperties(this)}},{key:"start",value:function value(){this.setSpriteType(this.spriteType),this.updateContentSize(),this.updatePosition(),this.updateRotation()}},{key:"updateContentSize",value:function value(){var e=this.endPos.x-this.startPos.x,t=this.endPos.y-this.startPos.y,n=this.endPos.z-this.startPos.z,i=Math.sqrt(e*e+t*t+n*n);this.uiTransform.setContentSize(i,this.lineThickness)}},{key:"updatePosition",value:function value(){this.uiTransform.setAnchorPoint(.5,.5),this.node.setWorldPosition((this.startPos.x+this.endPos.x)/2,(this.startPos.y+this.endPos.y)/2,(this.startPos.z+this.endPos.z)/2)}},{key:"updateRotation",value:function value(){this.node.setWorldRotationFromEuler(0,0,180*Math.atan2(this.endPos.y-this.startPos.y,this.endPos.x-this.startPos.x)/Math.PI)}}]),o}(D)).prototype,"spriteLow",[wv],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Pv=h(ri.prototype,"spriteMedium",[Cv],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_v=h(ri.prototype,"spriteHigh",[Ev],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Lv=h(ri.prototype,"spriteType",[Av],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return Zt.LOW}}),Bv=h(ri.prototype,"lineThickness",[Tv],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return 1}}),Da=ri))||Da)||Da);d._RF.pop(),d._RF.push({},"169a1O0ruFLoI6OnJUZap7V","DogeState",void 0);var l12,Dv,Se=((l12=Se||{})[l12.IDLE=0]="IDLE",l12[l12.SMILE=1]="SMILE",l12[l12.SCARE=2]="SCARE",l12[l12.BEE_STING=3]="BEE_STING",l12[l12.THORN_STAB=4]="THORN_STAB",l12[l12.OUT_OF_SCREEN=5]="OUT_OF_SCREEN",l12[l12.POISONED=6]="POISONED",l12[l12.DROWNING=7]="DROWNING",l12[l12.OVER_VIEW=8]="OVER_VIEW",l12);d._RF.pop(),d._RF.push({},"852f9XjNUVJ3Zt1Kd/EbqXU","Eye",void 0);var Ov,Iv,Nv,fr,zv,xv,Gv=(0,f.ccclass)("Eye")(Dv=function(l){E(o,l);var r=A(o);function o(){var e;S(this,o);for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return(e=r.call.apply(r,[this].concat(n))).scaleTween=null,e.initialPosition=null,e}return k(o,[{key:"createScaleAnimation",value:function value(){var e=j(this.node).to(.3,{scale:new I(1.1,1.1,1)},{easing:"smooth"});this.scaleTween=j(this.node).reverseTime(e).repeatForever()}},{key:"saveInitialPosition",value:function value(){this.initialPosition||(this.initialPosition=this.node.position.clone())}},{key:"show",value:function value(){this.node.active=!0,this.playAnimation()}},{key:"hide",value:function value(){this.stopAnimation(),this.node.active=!1}},{key:"toward",value:function value(e){this.initialPosition&&(this.node.setPosition(this.initialPosition),this.node.position.add(e))}},{key:"playAnimation",value:function value(){var e;this.scaleTween||this.createScaleAnimation(),null==(e=this.scaleTween)||e.start()}},{key:"stopAnimation",value:function value(){var e;null==(e=this.scaleTween)||e.stop()}}]),o}(D))||Dv;d._RF.pop(),d._RF.push({},"df218vrmOtEH5vRQXxIZ3yS","Eyes",void 0);var Mv,Uv,Hv,Oa,Wv,qv,Kv,kP=f.ccclass,Vv=f.property,wP=(Ov=kP("Eyes"),Iv=Vv(Gv),Nv=Vv(Gv),Ov((zv=h((fr=function(l){E(o,l);var r=A(o);function o(){var e;S(this,o);for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return e=r.call.apply(r,[this].concat(n)),p(e,"leftEye",zv,v(e)),p(e,"rightEye",xv,v(e)),e.time=0,e.remaining=0,e.running=!1,e}return k(o,[{key:"onLoad",value:function value(){this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function value(){L.lazyValidateProperties(this)}},{key:"start",value:function value(){this.remaining=0,this.running=!1,this.setTimeChangeDirection(.8),this.leftEye.saveInitialPosition(),this.rightEye.saveInitialPosition()}},{key:"setTimeChangeDirection",value:function value(e){this.time=e}},{key:"show",value:function value(){this.running=!0,this.remaining=this.time,this.leftEye.show(),this.rightEye.show()}},{key:"hide",value:function value(){this.running=!1,this.leftEye.hide(),this.rightEye.hide()}},{key:"stopLook",value:function value(){this.running=!1}},{key:"look",value:function value(){if(this.node.parent){var e=this.node.parent.getComponent(Qt);if(e){var t=e.getNearbyBee();if(t){var n=this.leftEye.initialPosition;if(n){var i=n.x,a=n.y,s=new I;this.leftEye.node.inverseTransformPoint(s,t.node.worldPosition);var u=new I(s.x-i,s.y-a,0).normalize().multiplyScalar(5);this.leftEye.toward(u),this.rightEye.toward(u)}}}}}},{key:"update",value:function value(e){this.running&&(this.remaining<=0&&(this.look(),this.remaining=this.time),this.remaining-=e)}}]),o}(D)).prototype,"leftEye",[Iv],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xv=h(fr.prototype,"rightEye",[Nv],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fr))||fr);d._RF.pop(),d._RF.push({},"14172TbYDBAeISJqcpvLYV7","Doge",void 0);var Yv,Jv,Xv,Zv,Ia,mr,Qv,$v,CP=f.ccclass,gr=f.property,EP=Ludex.Utils.Array,Ui=[Se.OVER_VIEW,Se.BEE_STING,Se.THORN_STAB,Se.POISONED,Se.OUT_OF_SCREEN],Qt=(Mv=CP("Doge"),Uv=gr(wP),Hv=gr(Qe),Mv((Wv=h((Oa=function(l){E(e,l);var r,o=A(e);function e(){var t;S(this,e);for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];return t=o.call.apply(o,[this].concat(i)),p(t,"eyes",Wv,v(t)),t.state=Se.IDLE,t.dustParticle=null,t.gameHeight=0,p(t,"collider",qv,v(t)),p(t,"gameObjects",Kv,v(t)),t.onBeginContact=function(s,u){u.node.name!==R.BEE&&u.node.name!==R.BIG_BEE&&u.node.name!==R.BIG_BEE_BULLET||t.beeSting(),u.node.name!==R.THORN&&u.node.name!==R.THORN_BALL?u.node.name!==R.POISON?u.node.name===R.WATER&&t.drowning():t.poisoned():t.stabbedByThorn()},t}return k(e,[{key:"onLoad",value:function value(){var t;this.collider=this.getComponent(Qe),this.gameObjects=null==(t=this.node.parent)?void 0:t.getComponent($t),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function value(){L.lazyValidateProperties(this)}},{key:"start",value:function value(){this.initDustParticle(),this.idle();var t,n=null==(t=Ze("Canvas"))?void 0:t.getComponent(Ee);n&&(this.gameHeight=n.height),this.collider.on(At.BEGIN_CONTACT,this.onBeginContact)}},{key:"idle",value:function value(){!1!==this.setState(Se.IDLE)&&(this.hideEyes(),this.setSpineAnimation("normal",!0))}},{key:"smile",value:function value(){!1!==this.setState(Se.SMILE)&&(this.hideEyes(),this.setSpineAnimation("smile",!0))}},{key:"beeSting",value:function value(){var t=this;!1!==this.setState(Se.BEE_STING)&&(this.hideEyes(),this.setSpineAnimation("hurt",!1),this.scareOtherDoges(),this.scheduleOnce(function(){t.state===Se.BEE_STING&&t.setSpineAnimation("cry",!1)},.3),M.playSound(Q.DOGE_HURT))}},{key:"stabbedByThorn",value:function value(){!1!==this.setState(Se.THORN_STAB)&&(this.hideEyes(),this.createDust(),this.setSpineAnimation("die",!1),this.scareOtherDoges(),M.playSound(Q.DOGE_DIES))}},{key:"poisoned",value:function value(){!1!==this.setState(Se.POISONED)&&(this.hide(),this.hideEyes(),this.createDust(),this.scareOtherDoges(),M.playSound(Q.DOGE_DIES))}},{key:"drowning",value:function value(){!1!==this.setState(Se.DROWNING)&&(this.hideEyes(),this.setSpineAnimation("troll",!1))}},{key:"isCantBeTargeted",value:function value(){return -1!==[Se.THORN_STAB,Se.OUT_OF_SCREEN,Se.POISONED,Se.DROWNING].indexOf(this.state)}},{key:"scare",value:function value(){var t;!1!==this.setState(Se.SCARE)&&(this.showEyes(),null==(t=this.eyes)||t.look(),this.setSpineAnimation("freak out",!0))}},{key:"hideEyes",value:function value(){this.eyes.hide()}},{key:"showEyes",value:function value(){this.eyes.show()}},{key:"setState",value:function value(t){return -1===Ui.indexOf(t)?-1===Ui.indexOf(this.state)&&(this.state=t,!0):Ui.indexOf(t)>Ui.indexOf(this.state)&&(this.state=t,this.node.scene.emit(F.DOGE_DIE),!0)}},{key:"scareOtherDoges",value:function value(){if(this.gameObjects){var t,n=this.gameObjects.getDoges(this),i=O(n);try{for(i.s();!(t=i.n()).done;)t.value.scare()}catch(a){i.e(a)}finally{i.f()}}}},{key:"update",value:function value(){var t=this.node.worldPosition.y;(t>this.gameHeight||t<0)&&this.setState(Se.OUT_OF_SCREEN),this.isBeeNearBy()&&this.scare()}},{key:"isBeeNearBy",value:function value(){return this.state===Se.IDLE&&!EP.has(Ui,this.state)&&!!this.getNearbyBee()}},{key:"getNearbyBee",value:function value(){var t=this;if(!this.node.parent)return null;var n=this.node.parent.getComponentsInChildren(Fi).find(function(i){var a=I.distance(t.node.getWorldPosition(),i.node.getWorldPosition());if(i.enabled&&a<=200)return!0});return null!=n?n:null}},{key:"createDust",value:function value(){var t=this;if(this.dustParticle){this.dustParticle.active=!0;var n=this.node.getWorldPosition(),i=n.x,a=n.y;this.dustParticle.setWorldPosition(new I(i,a));try{var s=this.dustParticle.getComponent(Ie.Skeleton);null==s||s.setAnimation(0,"animation",!1)}catch(unused){}this.scheduleOnce(function(){t.dustParticle&&(t.dustParticle.active=!1)},.5)}}},{key:"initDustParticle",value:(r=B(function(){var t,n,i;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(!this.node.parent)return[3,2];return(t=new b(R.DUST_PARTICLE)).layer=0x2000000,t.active=!1,n=t.addComponent(Ie.Skeleton),[4,_e.loadSkeletonDataAsync(Xt.DUST_PARTICLE_SPINE)];case 1:(i=_state.sent())&&this.node&&this.node.isValid&&(n.skeletonData=i,this.node.parent.addChild(t),this.dustParticle=t),_state.label=2;case 2:return[2]}})}),function(){return r.apply(this,arguments)})}]),e}(ze)).prototype,"eyes",[Uv],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),qv=h(Oa.prototype,"collider",[Hv],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Kv=h(Oa.prototype,"gameObjects",[gr],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Oa))||Oa);d._RF.pop(),d._RF.push({},"2ca763+kElPuqiAkECtFMMS","Grass",void 0);var ef,tf,af,of,AP=f.ccclass,rf=f.property,TP=f.requireComponent,RP=(Yv=AP("Grass"),Jv=TP(ne),Xv=rf({tooltip:"Use batch draw all grass polygons"}),Zv=rf(ne),Yv(Ia=Jv((Qv=h((mr=function(l){E(o,l);var r=A(o);function o(){var e;S(this,o);for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return e=r.call.apply(r,[this].concat(n)),p(e,"useBatch",Qv,v(e)),p(e,"graphic",$v,v(e)),e.grassPolygons=[],e}return k(o,[{key:"__preload",value:function value(){this.graphic=this.getComponent(ne),this.validateRequiredComponents(),this.listenGameplayEvents()}},{key:"validateRequiredComponents",value:function value(){L.lazyValidateProperties(this)}},{key:"listenGameplayEvents",value:function value(){}},{key:"onLoad",value:function value(){var e=this.getPolygon();if(e){var t=this.isDark()?R.GRASS_DARK:R.GRASS;this.useBatch?this.addGrassPolygon(t,e):(this.updateFillColor(t),this.drawGrass(e))}}},{key:"drawGrass",value:function value(e){this.graphic.moveTo(e[0].x,e[0].y);var t,n=O(e);try{for(n.s();!(t=n.n()).done;){var i=t.value;this.graphic.lineTo(i.x,i.y)}}catch(a){n.e(a)}finally{n.f()}this.graphic.close(),this.graphic.fill()}},{key:"getPolygon",value:function value(){if(!("polygon"in this.node))return null;var e=this.node.polygon;return Array.isArray(e)?e:null}},{key:"isDark",value:function value(){return"isDark"in this.node&&!!this.node.isDark}},{key:"addGrassPolygon",value:function value(e,t){this.grassPolygons.push({type:e,polygon:t})}},{key:"updateFillColor",value:function value(e){e===R.GRASS_DARK?this.graphic.fillColor.fromHEX("#5e9c35"):this.graphic.fillColor.fromHEX("#8bdd55")}},{key:"batchDrawAllGrass",value:function value(){if(!(this.grassPolygons.length<1)){var e,t=O(this.grassPolygons);try{for(t.s();!(e=t.n()).done;){var n=e.value;this.updateFillColor(n.type),this.drawGrass(n.polygon)}}catch(i){t.e(i)}finally{t.f()}this.grassPolygons=[]}}}]),o}(ze)).prototype,"useBatch",[Xv],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return!0}}),$v=h(mr.prototype,"graphic",[Zv],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ia=mr))||Ia)||Ia);d._RF.pop(),d._RF.push({},"7027fhYTgdDe6EinMz7XLC6","MapLine",void 0);var PP=f.ccclass,_P=f.property,sf=(ef=PP("MapLine"),tf=_P(ne),ef((of=h((af=function(l){E(o,l);var r=A(o);function o(){var e;S(this,o);for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return e=r.call.apply(r,[this].concat(n)),p(e,"graphics",of,v(e)),e.useBatch=!1,e.mapLines=[],e}return k(o,[{key:"__preload",value:function value(){this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function value(){L.lazyValidateProperties(this)}},{key:"onLoad",value:function value(){var e=this.getPolygon();e&&(this.useBatch?(this.graphics.enabled=!1,this.addLine(e)):this.drawLine(e))}},{key:"getPolygon",value:function value(){if(!("polygon"in this.node))return null;var e=this.node.polygon;return Array.isArray(e)?e:null}},{key:"addLine",value:function value(e){this.mapLines.push(e)}},{key:"drawLine",value:function value(e){this.graphics.moveTo(e[0].x,e[0].y);var t,n=O(e.slice(1));try{for(n.s();!(t=n.n()).done;){var i=t.value;this.graphics.lineTo(i.x,i.y)}}catch(a){n.e(a)}finally{n.f()}this.graphics.stroke()}},{key:"batchDrawAllLines",value:function value(){if(!(this.mapLines.length<1)){var e,t=O(this.mapLines);try{for(t.s();!(e=t.n()).done;){var n=e.value;this.drawLine(n)}}catch(i){t.e(i)}finally{t.f()}this.mapLines=[]}}}]),o}(D)).prototype,"graphics",[tf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),af))||af);d._RF.pop(),d._RF.push({},"87767KZVqpEgIbdzZdGh1CJ","BatchObjectManager",void 0);var LP=function(){function l(){S(this,l),this.isBrickInitialized=!1,this.isGrassInitialized=!1,this.isLineInitialized=!1,this.isPoisonInitialized=!1,this.isPoisonSurfaceInitialized=!1,this.isWaterInitialized=!1,this.isDangerAreaInitialized=!1,this.mainBrickComponent=null,this.mainGrassComponent=null,this.mainLineComponent=null,this.mainPoisonComponent=null,this.mainPoisonSurfaceComponent=null,this.mainWaterComponent=null,this.mainDangerAreaComponent=null}return k(l,[{key:"assignMainBrickComponent",value:function value(r){this.mainBrickComponent=r}},{key:"assignMainGrassComponent",value:function value(r){this.mainGrassComponent=r}},{key:"assignMainLineComponent",value:function value(r){this.mainLineComponent=r}},{key:"assignMainPoisonComponent",value:function value(r){this.mainPoisonComponent=r}},{key:"assignMainPoisonSurfaceComponent",value:function value(r){this.mainPoisonSurfaceComponent=r}},{key:"assignMainWaterComponent",value:function value(r){this.mainWaterComponent=r}},{key:"assignMainDangerAreaComponent",value:function value(r){this.mainDangerAreaComponent=r}},{key:"isBrickBatchingEnabled",value:function value(){var r,o;return null!=(r=null==(o=this.mainBrickComponent)?void 0:o.useBatch)&&r}},{key:"isGrassBatchingEnabled",value:function value(){var r,o;return null!=(r=null==(o=this.mainGrassComponent)?void 0:o.useBatch)&&r}},{key:"isLineBatchingEnabled",value:function value(){var r,o;return null!=(r=null==(o=this.mainLineComponent)?void 0:o.useBatch)&&r}},{key:"isPoisonBatchingEnabled",value:function value(){var r,o;return null!=(r=null==(o=this.mainPoisonComponent)?void 0:o.useBatch)&&r}},{key:"isPoisonSurfaceBatchingEnabled",value:function value(){var r,o;return null!=(r=null==(o=this.mainPoisonSurfaceComponent)?void 0:o.useBatch)&&r}},{key:"isWaterBatchingEnabled",value:function value(){var r,o;return null!=(r=null==(o=this.mainWaterComponent)?void 0:o.useBatch)&&r}},{key:"isDangerAreaBatchingEnabled",value:function value(){var r,o;return null!=(r=null==(o=this.mainDangerAreaComponent)?void 0:o.useBatch)&&r}},{key:"updateBrickPolygon",value:function value(r){this.mainBrickComponent&&this.mainBrickComponent.addBrickPolygon(r)}},{key:"updateGrassPolygon",value:function value(r,o){this.mainGrassComponent&&this.mainGrassComponent.addGrassPolygon(r,o)}},{key:"updateMapLine",value:function value(r){this.mainLineComponent&&this.mainLineComponent.addLine(r)}},{key:"updatePoisonPolygon",value:function value(r){this.mainPoisonComponent&&this.mainPoisonComponent.addPoisonPolygon(r)}},{key:"updatePoisonSurfacePolygon",value:function value(r){this.mainPoisonSurfaceComponent&&this.mainPoisonSurfaceComponent.addPoisonSurfacePolygon(r)}},{key:"updateWaterPolygon",value:function value(r){this.mainWaterComponent&&this.mainWaterComponent.addWaterPolygon(r)}},{key:"updateDangerAreaPolygon",value:function value(r){this.mainDangerAreaComponent&&this.mainDangerAreaComponent.addDangerAreaPolygon(r)}},{key:"batchDraw",value:function value(){var r,o,e,t,n,i,a;null==(r=this.mainBrickComponent)||r.batchDrawAllBrick(),null==(o=this.mainGrassComponent)||o.batchDrawAllGrass(),null==(e=this.mainLineComponent)||e.batchDrawAllLines(),null==(t=this.mainPoisonComponent)||t.batchDrawAllPoisonPools(),null==(n=this.mainPoisonSurfaceComponent)||n.batchDrawAllPoisonSurfaces(),null==(i=this.mainWaterComponent)||i.batchDrawAllWater(),null==(a=this.mainDangerAreaComponent)||a.batchDrawAllDangerAreas()}},{key:"clearObjects",value:function value(){this.isBrickInitialized=!1,this.isGrassInitialized=!1,this.isLineInitialized=!1,this.isPoisonInitialized=!1,this.isPoisonSurfaceInitialized=!1,this.isWaterInitialized=!1,this.isDangerAreaInitialized=!1,this.mainBrickComponent=null,this.mainGrassComponent=null,this.mainLineComponent=null,this.mainPoisonComponent=null,this.mainPoisonSurfaceComponent=null,this.mainWaterComponent=null,this.mainDangerAreaComponent=null}}]),l}();d._RF.pop(),d._RF.push({},"4c04ffCcRhGsqEZlVWUHd8s","MapTransformer",void 0);var lf,uf,cf,hf,df,pf,yf,vf,ff,mf,gf,bf,Sf,kf,wf,Cf,Ef,Af,Tf,Rf,Pf,_f,ge,Bf,Df,Of,If,Nf,Ff,zf,xf,Gf,Mf,Uf,Hf,jf,Wf,qf,Kf,Vf,Yf,Jf,Xf,Zf,be=function(){function l(){S(this,l)}return k(l,null,[{key:"getPointObject",value:function value(r){var o=r.id,e=r.point,t=r.data,n=r.connect;return{id:o,point:l.getTransformedPoint(e),data:t,connect:n}}},{key:"getTransformedPoint",value:function value(r){return{x:28*r.x+14-200,y:1792-28*r.y-14-270}}},{key:"revertTransformedPoint",value:function value(r){return{x:(r.x+200-14)/28,y:(1792-r.y-14-270)/28}}},{key:"getPointObjectBHalfCoord",value:function value(r){var o=r.id,e=r.point,t=r.data,n=r.connect;return{id:o,point:{x:28*e.x/2-200,y:1792-28*e.y/2-270},data:t,connect:n}}},{key:"getPolygonObject",value:function value(r){var o=r.id,e=r.point,t=r.data,n=r.connect;return{id:o,point:l.getTransformedPolygon(e),data:t,connect:n}}},{key:"getTransformedPolygon",value:function value(r){return r.map(function(o){return{x:28*o.x-200,y:1792-28*o.y-270}})}},{key:"revertTransformedPolygon",value:function value(r){return r.map(function(o){return{x:(o.x+200)/28,y:(1792-o.y-270)/28}})}},{key:"getDoublePolygon",value:function value(r){var o=r.id,e=r.point,t=r.data,n=r.connect;return{id:o,point:e.map(function(i){return{x:28*i.x/2-200,y:1792-28*i.y/2-270}}),data:t,connect:n}}},{key:"getTransformedDoublePolygon",value:function value(r){return r.map(function(o){return{x:28*o.x/2-200,y:1792-28*o.y/2-270}})}},{key:"revertTransformedDoublePolygon",value:function value(r){return r.map(function(o){return{x:(o.x+200)/14,y:(1792-o.y-270)/14}})}},{key:"transformPointsFromMapToDrawAreaCoordinate",value:function value(r){return r.map(function(o){return{x:28*o.x-200,y:1792-28*o.y-270}})}}]),l}();d._RF.pop(),d._RF.push({},"75ad9uPflhLL4N96NmHF2Sk","GameObjects",void 0);var Qf,BP=f.ccclass,ke=f.property,$t=(lf=BP("GameObjects"),uf=ke(fe),cf=ke(fe),hf=ke(fe),df=ke(fe),pf=ke(fe),yf=ke(fe),vf=ke(fe),ff=ke(fe),mf=ke(fe),gf=ke(fe),bf=ke(fe),Sf=ke(fe),kf=ke(fe),wf=ke(fe),Cf=ke(fe),Ef=ke(fe),Af=ke({tooltip:"Use batch draw all map lines."}),Tf=ke({tooltip:"Use batch draw all poison pools."}),Rf=ke({tooltip:"Use batch draw all poison surfaces."}),Pf=ke({tooltip:"Use batch draw all water pools."}),_f=ke({tooltip:"Use batch draw all danger areas."}),lf((Bf=h((ge=function(l){E(e,l);var r,o=A(e);function e(){var t;S(this,e);for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];return t=o.call.apply(o,[this].concat(i)),p(t,"dogePrefab",Bf,v(t)),p(t,"spiderPrefab",Df,v(t)),p(t,"beePrefab",Of,v(t)),p(t,"beehivePrefab",If,v(t)),p(t,"bigBeePrefab",Nf,v(t)),p(t,"thornPrefab",Ff,v(t)),p(t,"thornBallPrefab",zf,v(t)),p(t,"airFanPrefab",xf,v(t)),p(t,"grassPrefab",Gf,v(t)),p(t,"balloonPrefab",Mf,v(t)),p(t,"brickPrefab",Uf,v(t)),p(t,"arenaPrefab",Hf,v(t)),p(t,"woodPrefab",jf,v(t)),p(t,"connectPrefab",Wf,v(t)),p(t,"mapLinePrefab",qf,v(t)),p(t,"crossingBeeLinePrefab",Kf,v(t)),p(t,"batchMapLines",Vf,v(t)),p(t,"batchPoisonPool",Yf,v(t)),p(t,"batchPoisonSurface",Jf,v(t)),p(t,"batchWaterPool",Xf,v(t)),p(t,"batchDangerArea",Zf,v(t)),t.batchObjects=new LP,t.objects=new Map,t}return k(e,[{key:"spawnObjects",value:function value(t){for(var n=t.map,i=He(n).reverse(),a=0;a<i.length;a++){var s=i[a],u=null;(u=Array.isArray(null==s?void 0:s.point)?this.spawnPolygonObjectType(s):this.spawnPointObjectType(s))&&this.objects.set(a,u)}var c,y=O(n);try{for(y.s();!(c=y.n()).done;){var m=c.value;if(!Array.isArray(m.point)){if(m.id===N.BALLOON){var _=be.getPointObject(m).point,g=_.x,C=_.y;if(!m.connect)continue;var P=this.findObjectIndex(n,m.connect);if(!P)continue;this.spawnBalloon(g,C,P)}if(m.id===N.CONNECT){if(!m.connect||!Array.isArray(m.connect.point))return null;var z=be.getDoublePolygon(m.connect),K=be.getPointObjectBHalfCoord(m).point,Z=K.x,ae=K.y;this.spawnConnect(Z,ae,z.point)}}}}catch(ue){y.e(ue)}finally{y.f()}this.batchObjects.batchDraw(),this.sortObjects(),this.sleepObjects()}},{key:"spawnPolygonObjectType",value:function value(t){var n=be.getPolygonObject(t).point;if(0===n.length)return null;switch(t.id){case N.BRICK:return this.spawnBrick(n);case N.GRASS:return this.spawnGrass(n,!1);case N.GRASS_DARK:return this.spawnGrass(n,!0);case N.LINE:return this.spawnLine(n);case N.POISON:return this.spawnPoison(n);case N.POISON_SURFACE:return this.spawnPoisonSurface(n);case N.WATER:return this.spawnWater(n);case N.DANGER_AREA:return this.spawnDangerAreaNormal(n);case N.CONNECT:return null;case N.WOOD:var i=be.getDoublePolygon(t);return this.spawnWood(i.point);case N.COLLIDER:var a=be.getDoublePolygon(t);return this.spawnCollider(0,0,a.point);case N.STROKE:default:return null}}},{key:"spawnPointObjectType",value:function value(t){var n=be.getPointObject(t).point,i=n.x,a=n.y;switch(t.id){case N.DOGE_A:return this.spawnDoge({x:i,y:a});case N.DOGE_B:return this.spawnDoge({x:i,y:a,right:!0});case N.SPIDER:return this.spawnSpider(i,a);case N.BEEHIVE_A:case N.BEEHIVE_C:return this.spawnBeehive(i,a);case N.BEEHIVE_B:case N.BEEHIVE_D:return this.spawnBeehive(i,a,!0);case N.THORN_BALL:return this.spawnThornBall(i,a);case N.BIG_BEE:return this.spawnBigBee(i,a);case N.WATER_SURFACE:return this.spawnWaterSurface(i,a);case N.THORN:var s,u=(null==(s=t.data)?void 0:s.a)||0;return this.spawnThorn(i,a,u);case N.AIR_FAN:var c,y=(null==(c=t.data)?void 0:c.a)||0;return this.spawnAirFan(i,a,y);default:return null}}},{key:"spawnObjectForDevTools",value:function value(t){this.spawnPointObjectType(t),this.sortObjects()}},{key:"spawnPolygonObjectForDevTools",value:function value(t){this.spawnPolygonObjectType(t),this.sortObjects()}},{key:"addObject",value:function value(t){this.node.insertChild(t,this.getSiblingIndex(t.name))}},{key:"sortObjects",value:function value(){var t=He(this.node.children);t.sort(function(n,i){var a,s;return(null!=(a=Dp[n.name])?a:0)-(null!=(s=Dp[i.name])?s:0)}),t.forEach(function(n,i){n.setSiblingIndex(i)})}},{key:"findObjectIndex",value:function value(t,n){var i,a=this,s=t.findIndex(function(_){return JSON.stringify(_)===JSON.stringify(n)}),u=null==(i=t[s])?void 0:i.point;if(u&&!Array.isArray(u)){var c=be.getPointObject(t[s]).point,y=c.x,m=c.y,w=this.node.children.find(function(_){var g=_.position;return g.x===y&&g.y===m&&_.name===a.getObjNameFromId(n.id)});if(w)return w}}},{key:"getObjNameFromId",value:function value(t){switch(t){case N.DOGE_A:case N.DOGE_B:return R.DOGE;case N.SPIDER:return R.SPIDER;case N.BEEHIVE_A:case N.BEEHIVE_B:case N.BEEHIVE_C:case N.BEEHIVE_D:return R.BEEHIVE;case N.THORN_BALL:return R.THORN_BALL;case N.BIG_BEE:return R.BIG_BEE;case N.WATER_SURFACE:return R.WATER_SURFACE;case N.THORN:return R.THORN;case N.AIR_FAN:return R.AIR_FAN;case N.BRICK:return R.BRICK;case N.GRASS:return R.GRASS;case N.GRASS_DARK:return R.GRASS_DARK;case N.LINE:return R.MAP_LINE;case N.POISON:return R.POISON;case N.POISON_SURFACE:return R.POISON_SURFACE;case N.WATER:return R.WATER;case N.DANGER_AREA:return R.DANGER_AREA;case N.WOOD:return R.WOOD;case N.COLLIDER:return R.COLLIDER;default:return""}}},{key:"getSiblingIndex",value:function value(t){var n=this.node.children,i=Dp[t];if(!i)return n.length+1;var a=n.map(function(u){return Dp[u.name]}).filter(function(u){return void 0!==u}),s=a.findIndex(function(u){return i<u});return s<0?a.length+1:s}},{key:"clearObjects",value:function value(){this.node.destroyAllChildren(),this.node.removeAllChildren(),this.batchObjects.clearObjects()}},{key:"stopBeeBehavior",value:function value(){var t,n=this.node.getComponentsInChildren(Fi),i=O(n);try{for(i.s();!(t=i.n()).done;)t.value.state=ye.IDLE}catch(a){i.e(a)}finally{i.f()}}},{key:"sleepObjects",value:function value(){var t,n=this.getComponentsInChildren(ze),i=O(n);try{for(i.s();!(t=i.n()).done;)t.value.sleep()}catch(c){i.e(c)}finally{i.f()}var a,s=this.node.getComponentsInChildren(vr),u=O(s);try{for(u.s();!(a=u.n()).done;)a.value.state=ye.IDLE}catch(c){u.e(c)}finally{u.f()}}},{key:"wakeUpObjects",value:function value(){var t,n=this.getComponentsInChildren(ze),i=O(n);try{for(i.s();!(t=i.n()).done;)t.value.wake()}catch(a){i.e(a)}finally{i.f()}}},{key:"spawnBeehive",value:function value(t,n){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=ee(this.beehivePrefab);return _instanceof(a,b)?(a.name=R.BEEHIVE,a.setPosition(t,n),a.setScale(i?-1:1,1),a.attr({isRightSide:i}),this.addObject(a),a):null}},{key:"spawnBees",value:function value(){var t,n=this.node.getComponentsInChildren(aP),i=1===n.length?8:4,a=O(n);try{for(a.s();!(t=a.n()).done;){var s=t.value;s.node.attr({totalPathSeekers:Math.floor(i/3)});for(var u=0;u<i;u++){var c=this.spawnBee();c&&s.releaseBee(c)}}}catch(y){a.e(y)}finally{a.f()}this.sortObjects()}},{key:"spawnBee",value:function value(){var t=ee(this.beePrefab);return _instanceof(t,b)?(t.name=R.BEE,this.addObject(t),t.setSiblingIndex(999),t):null}},{key:"spawnCrossingBees",value:function value(t){for(var n=this,i=t.beeSpeed,a=t.spawnRandOffset,s=void 0===a?80:a,u=t.playerWorldX,c=t.playerWorldY,y=t.spawnWorldX,m=t.spawnWorldY,w=t.count,_=void 0===w?[1,2]:w,g=t.targetOffsetMultiplier,C=void 0===g?0:g,P=U.randomRangeInt(_[0],_[1]),z=[],K=y<u,ae=0;ae<P;ae++)!function Z(){var ue=n.spawnBee();if(!ue)throw Error("Could not spawn bee");var te=ue.getComponent(Fi);if(!te)throw Error("Bee component not found");n.addObject(ue),te.isSpawnLeftSide=!K;var ht=U.randomRangeInt(-s,s),Re=U.randomRangeInt(-s,s),Pe=y+ht,Me=m+Re,Ue=ue.worldPosition.z;ue.setWorldPosition(Pe,Me,Ue);var it=new x(u+ht*C-Pe,c+Re*C-Me);te.rotateToVector(it),te.fly(it.normalize().multiplyScalar(i)),n.scheduleOnce(function(){te.setRole(st.NORMAL),te.setState(ye.ATTACKING),te.followInstructions()}),z.push(te)}();return this.sortObjects(),z}},{key:"spawnCrossingBeeLine",value:function value(t){var n=t.startX,i=t.startY,a=t.endX,s=t.endY,u=t.thickness,c=t.spriteType,y=ee(this.crossingBeeLinePrefab);if(!_instanceof(y,b))throw Error("Could not spawn crossing bee line");y.name=R.CROSSING_BEE_LINE;var m=y.getComponent(SP);if(!m)throw Error("CrossingBeeLine component not found");return this.addObject(y),m.setSpriteType(c),m.setStartPosition(n,i),m.setEndPosition(a,s),m.thickness=u,this.sortObjects(),m}},{key:"checkAllBeeDie",value:function value(){var t=this.node.getComponentsInChildren(Fi),n=this.node.getComponentsInChildren(vr),i=t.some(function(s){return s.enabled}),a=n.some(function(s){return s.enabled});return!i&&!a}},{key:"spawnDoge",value:function value(t){var n=t.x,i=t.y,a=t.right,u=t.isWorldPosition,c=void 0!==u&&u,y=t.rigidBodyConfig,w=ee(this.dogePrefab);if(!_instanceof(w,b))return null;w.name=R.DOGE,c||w.setPosition(n,i),w.setScale(void 0!==a&&a?-1:1,1),this.addObject(w),w.setSiblingIndex(999),c&&w.setWorldPosition(n,i,w.worldPosition.z);var _=(void 0===y?{}:y).gravityScale,C=w.getComponent(J);if(!C)throw Error("Could not get doge rigidBody");return C.gravityScale=void 0===_?1:_,w}},{key:"spawnSpider",value:function value(t,n){var i=ee(this.spiderPrefab);return _instanceof(i,b)?(i.name=R.SPIDER,i.setPosition(t,n),this.addObject(i),i):null}},{key:"spawnBigBee",value:function value(t,n){var i=ee(this.bigBeePrefab);return _instanceof(i,b)?(i.name=R.BIG_BEE,i.setPosition(t,n),this.addObject(i),i):null}},{key:"reviveBigBees",value:function value(){var t,n=this.node.getComponentsInChildren(vr),i=O(n);try{for(i.s();!(t=i.n()).done;)t.value.state=ye.ATTACKING}catch(a){i.e(a)}finally{i.f()}}},{key:"spawnBrick",value:function value(t){if(!this.batchObjects.isBrickInitialized){var n=this.spawnBrickNormal(t);if(!n)return null;var i=n.getComponent(uP);return i?(this.batchObjects.isBrickInitialized=!0,i.useBatch&&this.batchObjects.assignMainBrickComponent(i),this.addObject(n),n):null}return this.batchObjects.isBrickBatchingEnabled()?(this.batchObjects.updateBrickPolygon(t),null):this.spawnBrickNormal(t)}},{key:"spawnBrickNormal",value:function value(t){var n=ee(this.brickPrefab);return _instanceof(n,b)?(n.name=R.BRICK,n.attr({polygon:t}),this.addObject(n),n):null}},{key:"spawnWood",value:function value(t){var n=ee(this.woodPrefab);if(!_instanceof(n,b))return null;n.name=R.WOOD;var i=n.getComponent(vv);if(!i)return null;i.savePolygonPoints(t.map(function(s){return{x:s.x,y:s.y}})),this.addObject(n),i.draw(t),i.applyCollider(t),i.setRigidBodyType(je.Dynamic);var a=this.spawnWoodStroke(t);return a.setParent(n,!1),n.addChild(a),n}},{key:"spawnWoodStroke",value:function value(t){var n=new b;n.name=R.WOOD_STROKE,n.layer=0x2000000,this.addObject(n);var i=n.addComponent(ne);i.lineWidth=4;var a=new le;le.fromHEX(a,"#0d0d15"),i.strokeColor=a;var s=t[0];if(!s)return n;i.moveTo(s.x,s.y);var u,c=O(t.slice(1));try{for(c.s();!(u=c.n()).done;){var y=u.value;i.lineTo(y.x,y.y)}}catch(m){c.e(m)}finally{c.f()}return i.close(),i.stroke(),n}},{key:"spawnGrass",value:function value(t,n){if(!this.batchObjects.isGrassInitialized){var i=this.spawnGrassNormal(t,!1);if(!i)return null;var a=i.getComponent(RP);return a?(this.batchObjects.isGrassInitialized=!0,a.useBatch&&this.batchObjects.assignMainGrassComponent(a),this.addObject(i),i):null}var s=n?R.GRASS_DARK:R.GRASS;return this.batchObjects.isGrassBatchingEnabled()?(this.batchObjects.updateGrassPolygon(s,t),null):this.spawnGrassNormal(t,n)}},{key:"spawnGrassNormal",value:function value(t,n){var i=ee(this.grassPrefab);return _instanceof(i,b)?(i.name=n?R.GRASS_DARK:R.GRASS,i.attr({polygon:t,isDark:n}),this.addObject(i),i):null}},{key:"spawnPoison",value:function value(t){if(!this.batchPoisonPool)return this.spawnPoisonNormal(t);if(!this.batchObjects.isPoisonInitialized){var n=ee(this.arenaPrefab);if(!_instanceof(n,b))return null;n.name=R.POISON,this.addObject(n);var i=n.addComponent(mv);return i.useBatch=!0,this.batchObjects.isPoisonInitialized=!0,this.batchObjects.assignMainPoisonComponent(i),this.batchObjects.updatePoisonPolygon(t),n}return this.batchObjects.updatePoisonPolygon(t),null}},{key:"spawnPoisonNormal",value:function value(t){var n=ee(this.arenaPrefab);return _instanceof(n,b)?(n.name=R.POISON,this.addObject(n),n.addComponent(mv).polygon=t,n):null}},{key:"spawnPoisonSurface",value:function value(t){if(!this.batchPoisonPool)return this.spawnPoisonSurfaceNormal(t);if(!this.batchObjects.isPoisonSurfaceInitialized){var n=ee(this.arenaPrefab);if(!_instanceof(n,b))return null;n.name=R.POISON_SURFACE,this.addObject(n);var i=n.addComponent(gv);return i.useBatch=!0,this.batchObjects.isPoisonSurfaceInitialized=!0,this.batchObjects.assignMainPoisonSurfaceComponent(i),this.batchObjects.updatePoisonSurfacePolygon(t),n}return this.batchObjects.updatePoisonSurfacePolygon(t),null}},{key:"spawnPoisonSurfaceNormal",value:function value(t){var n=ee(this.arenaPrefab);return _instanceof(n,b)?(n.name=R.POISON_SURFACE,this.addObject(n),n.addComponent(gv).polygon=t,n):null}},{key:"spawnWater",value:function value(t){if(!this.batchWaterPool)return this.spawnWaterNormal(t);if(!this.batchObjects.isWaterInitialized){var n=ee(this.arenaPrefab);if(!_instanceof(n,b))return null;n.name=R.WATER,this.addObject(n);var i=n.addComponent(bv);return i.useBatch=!0,n.addComponent(W).opacity=.75,this.batchObjects.isWaterInitialized=!0,this.batchObjects.assignMainWaterComponent(i),this.batchObjects.updateWaterPolygon(t),n}return this.batchObjects.updateWaterPolygon(t),null}},{key:"spawnWaterNormal",value:function value(t){var n=ee(this.arenaPrefab);return _instanceof(n,b)?(n.name=R.WATER,this.addObject(n),n.addComponent(bv).polygon=t,n.addComponent(W).opacity=.75,n):null}},{key:"spawnDangerAreaNormal",value:function value(t){var n=ee(this.arenaPrefab);if(!_instanceof(n,b))return null;n.name=R.DANGER_AREA;var i=n.getComponent(_n);if(!i)return null;this.addObject(n),i.setColor("#fc03036d"),i.draw(t);var a=n.addComponent(J);return a.type=je.Static,a.group=bt.DEFAULT,n.addComponent(Ne),i.applyCollider(t),n}},{key:"spawnWaterSurface",value:function value(t,n){var i=new b;return i.name=R.WATER_SURFACE,i.layer=this.node.layer,i.setPosition(t,n),this.loadWaterSurfaceSprite(i),this.addObject(i),i}},{key:"loadWaterSurfaceSprite",value:(r=B(function(t){var n,a;return _ts_generator(this,function(_state){switch(_state.label){case 0:return _state.trys.push([0,2,,3]),[4,_e.loadSpriteFrameAsync(Xt.WATER_SURFACE_FRAME)];case 1:if(n=_state.sent(),!t.isValid)throw Error("loadWaterSurfaceSprite: WaterSurface is not valid");if(!n)throw Error("loadWaterSurfaceSprite: SpriteFrame not found");return t.addComponent(oe).spriteFrame=n,[3,3];case 2:return _instanceof(a=_state.sent(),Error)||Error(String(a)),[3,3];case 3:return[2]}})}),function(t){return r.apply(this,arguments)})},{key:"spawnThorn",value:function value(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=ee(this.thornPrefab);return _instanceof(a,b)?(a.name=R.THORN,a.angle=i,a.setPosition(t,n),this.addObject(a),a):null}},{key:"spawnThornBall",value:function value(t,n){var i=ee(this.thornBallPrefab);return _instanceof(i,b)?(i.name=R.THORN_BALL,i.setPosition(t,n),this.addObject(i),i):null}},{key:"spawnAirFan",value:function value(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=ee(this.airFanPrefab);if(!_instanceof(a,b))return null;a.name=R.AIR_FAN,a.angle=i,a.setScale(this.normalizeAngle(i)>180?-1:1,1),a.setPosition(t,n),a.attr({id:N.AIR_FAN});var s=a.getComponent(WR);return s?(s.setForceDirection(i),this.addObject(a),a):null}},{key:"spawnCollider",value:function value(t,n,i){var a=new b;a.name=R.COLLIDER,this.addObject(a),a.setPosition(t,n);var s=a.addComponent(J);s.type=je.Static,s.group=bt.MAIN_OBJECT;var u=a.addComponent(Ne);return u.restitution=.2,u.points=i.map(function(c){var y=c.x,m=c.y;return new x(y,m)}),u.apply(),a}},{key:"spawnLine",value:function value(t){if(!this.batchMapLines)return this.spawnLineNormal(t);if(!this.batchObjects.isLineInitialized){var n=this.spawnLineNormal(t);if(!n)return null;this.addObject(n);var i=n.getComponent(sf);return i?(this.batchObjects.isLineInitialized=!0,this.batchObjects.assignMainLineComponent(i),n):null}return this.batchObjects.updateMapLine(t),null}},{key:"spawnLineNormal",value:function value(t){var n=ee(this.mapLinePrefab);return _instanceof(n,b)&&n.getComponent(sf)?(n.name=R.MAP_LINE,n.attr({polygon:t}),this.addObject(n),n):null}},{key:"spawnConnect",value:function value(t,n,i){var a=this.getComponentsInChildren(vv).find(function(C){var P=C.getPolygonPoints();if(P.length!==i.length)return!1;for(var z=0;z<i.length;z++){var K,Z,ae=null!=(K=P[z])?K:{x:0,y:0},ue=(ae.x,ae.y,null!=(Z=i[z])?Z:{x:0,y:0});ue.x,ue.y}return!0}),s=ee(this.connectPrefab);if(!_instanceof(s,b))return null;if(s.setPosition(t,n),this.node.insertChild(s,this.getSiblingIndex(s.name)),a){var u=s.getWorldPosition(),c=u.x,y=u.y,m=a.node.getWorldPosition(),w=m.x,_=m.y,g=s.getComponent(vn);g.connectedBody=a.node.getComponent(J),g.connectedAnchor=new x(c-w,y-_),g.enabled=!1,g.enabled=!0}}},{key:"spawnBalloon",value:function value(t,n,i){var a=ee(this.balloonPrefab);if(!_instanceof(a,b))return null;a.name=R.BALLOON,a.setPosition(t,n);var s=a.getComponent(JR);if(!s)return null;var u=s.connectToDoge(i);return this.addObject(a),u&&this.addObject(u.node),a}},{key:"getRandomDogeToBee",value:function value(){if(!this.node.parent)return null;var t,n=this.node.parent.getComponentsInChildren(Qt),i=n.length;return null!=(t=n[Math.floor(Math.random()*i)])?t:null}},{key:"getNearestDogeToBee",value:function value(t){if(!this.node.parent)return null;var n,i=this.node.parent.getComponentsInChildren(Qt);return 0===(i=i.filter(function(a){return!a.isCantBeTargeted()})).length?null:(i.sort(function(a,s){return x.distance(a.node.worldPosition,t.node.worldPosition)-x.distance(s.node.worldPosition,t.node.worldPosition)}),null!=(n=i[0])?n:null)}},{key:"getDoges",value:function value(t){return this.node.parent?this.node.parent.getComponentsInChildren(Qt).filter(function(i){return i!==t}):[]}},{key:"normalizeAngle",value:function value(t){var n=t%360;return n<0?360+n:n}}]),e}(D)).prototype,"dogePrefab",[uf],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return null}}),Df=h(ge.prototype,"spiderPrefab",[cf],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return null}}),Of=h(ge.prototype,"beePrefab",[hf],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return null}}),If=h(ge.prototype,"beehivePrefab",[df],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return null}}),Nf=h(ge.prototype,"bigBeePrefab",[pf],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return null}}),Ff=h(ge.prototype,"thornPrefab",[yf],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return null}}),zf=h(ge.prototype,"thornBallPrefab",[vf],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return null}}),xf=h(ge.prototype,"airFanPrefab",[ff],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return null}}),Gf=h(ge.prototype,"grassPrefab",[mf],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return null}}),Mf=h(ge.prototype,"balloonPrefab",[gf],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return null}}),Uf=h(ge.prototype,"brickPrefab",[bf],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return null}}),Hf=h(ge.prototype,"arenaPrefab",[Sf],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return null}}),jf=h(ge.prototype,"woodPrefab",[kf],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return null}}),Wf=h(ge.prototype,"connectPrefab",[wf],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return null}}),qf=h(ge.prototype,"mapLinePrefab",[Cf],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return null}}),Kf=h(ge.prototype,"crossingBeeLinePrefab",[Ef],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return null}}),Vf=h(ge.prototype,"batchMapLines",[Af],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return!0}}),Yf=h(ge.prototype,"batchPoisonPool",[Tf],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return!0}}),Jf=h(ge.prototype,"batchPoisonSurface",[Rf],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return!0}}),Xf=h(ge.prototype,"batchWaterPool",[Pf],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return!0}}),Zf=h(ge.prototype,"batchDangerArea",[_f],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return!0}}),ge))||ge);d._RF.pop(),d._RF.push({},"97f21hkFElI0YdBDCgAkt9+","Hint",void 0);var $f,em,nm,im,DP=(0,f.ccclass)("Hint")(Qf=function(l){E(e,l);var r,o=A(e);function e(){var t;S(this,e);for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];return(t=o.call.apply(o,[this].concat(i))).hintLine=null,t.hintHand=null,t.isHintShown=!1,t}return k(e,[{key:"showHint",value:function value(t,n){this.isHintShown||(this.isHintShown=!0,this.hintLine=this.createHintLine(),this.hintLine.active=!0,this.drawHintLine(this.hintLine,t),n&&this.showHand(t))}},{key:"drawHintLine",value:function value(t,n){var i=t.getComponent(ne);if(!i)throw Error("drawHintLine: Graphics is null");i.clear();var a=n[0];if(a){i.moveTo(a.x,a.y);var s,u=O(n.slice(1));try{for(u.s();!(s=u.n()).done;){var c=s.value;i.lineTo(c.x,c.y)}}catch(y){u.e(y)}finally{u.f()}i.stroke()}}},{key:"hideHint",value:function value(){this.hintLine&&(this.hintLine.active=!1),this.hintHand&&(Ci.stopAllByTarget(this.hintHand),this.hintHand.active=!1)}},{key:"showHand",value:(r=B(function(t){var n;return _ts_generator(this,function(_state){switch(_state.label){case 0:return this.hintHand=this.createHintHand(t),[4,_e.loadSpriteFrameAsync(Xt.IC_HAND_FRAME)];case 1:return(n=_state.sent())?(this.addSpriteToHand(n),this.runHandHintAnimation(t)):this.removeHintHand(),[2]}})}),function(t){return r.apply(this,arguments)})},{key:"addSpriteToHand",value:function value(t){var n;this.hintHand&&(this.hintHand.addComponent(oe).spriteFrame=t,null==(n=this.hintHand.getComponent(Ee))||n.setAnchorPoint(.15,.9))}},{key:"runHandHintAnimation",value:function value(t){var n=this;if(this.hintHand){for(var i=j(this.hintHand),a=[],s=1;s<t.length;s++){var u=t[s-1],c=t[s];if(u&&c){var y=u.x-c.x,m=u.y-c.y,w=Math.sqrt(y*y+m*m),_=j(this.hintHand).to(w/250,{position:new I(c.x,c.y)});a.push(_)}}var g=j(this.hintHand).delay(.5).call(function(){var C=t[0];C&&n.hintHand&&n.hintHand.setPosition(C.x,C.y)});a.push(g),i.sequence.apply(i,a).repeatForever().start()}}},{key:"getIsHintShow",value:function value(){return this.isHintShown}},{key:"reset",value:function value(){this.isHintShown=!1,this.removeHintLine(),this.removeHintHand()}},{key:"createHintLine",value:function value(){if(this.hintLine)return this.hintLine;var t=new b,n=t.addComponent(ne);n.lineWidth=10,n.lineCap=ne.LineCap.ROUND,n.lineJoin=ne.LineJoin.ROUND;var i=new le;return le.fromHEX(i,"#fc03036d"),n.strokeColor=i,this.node.insertChild(t,0),t}},{key:"createHintHand",value:function value(t){if(this.hintHand)return this.hintHand;var n=new b,i=t[0];return i&&(n.setPosition(i.x,i.y),this.hintHand=n,this.node.addChild(n)),n}},{key:"removeHintLine",value:function value(){this.hintLine&&(this.hintLine.getComponent(ne).clear(),this.hintLine.destroyAllChildren(),this.hintLine.removeAllChildren(),this.hintLine.destroy(),this.hintLine=null)}},{key:"removeHintHand",value:function value(){this.hintHand&&(this.hintHand.destroyAllChildren(),this.hintHand.removeAllChildren(),this.hintHand.destroy(),this.hintHand=null)}}]),e}(D))||Qf;d._RF.pop(),d._RF.push({},"33281kEO4dMXLCvmfkrwqQM","CollisionDetectLine",void 0);var am,om,rm,sm,lm,Na,Fa,um,cm,hm,OP=f.ccclass,IP=f.property,NP=($f=OP("CollisionDetectLine"),em=IP(ne),$f((im=h((nm=function(l){E(o,l);var r=A(o);function o(){var e;S(this,o);for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return e=r.call.apply(r,[this].concat(n)),p(e,"graphic",im,v(e)),e}return k(o,[{key:"onLoad",value:function value(){this.graphic=this.getComponent(ne),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function value(){L.lazyValidateProperties(this)}},{key:"drawFromTo",value:function value(e,t){this.graphic.clear(),this.graphic.moveTo(e.x,e.y),this.graphic.lineTo(t.x,t.y),this.graphic.stroke()}}]),o}(ze)).prototype,"graphic",[em],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nm))||nm);d._RF.pop(),d._RF.push({},"00eeawrUitLxLgSANaGHhcv","LineDrawer",void 0);var FP=f.ccclass,br=f.property,zP=f.executionOrder,xP=(am=FP("LineDrawer"),om=zP(3),rm=br(fe),sm=br(fe),lm=br(Ct),am(Na=om((um=h((Fa=function(l){E(o,l);var r=A(o);function o(){var e;S(this,o);for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return e=r.call.apply(r,[this].concat(n)),p(e,"linePrefab",um,v(e)),p(e,"collisionDetectLinePrefab",cm,v(e)),p(e,"minDistance",hm,v(e)),e.lastUIPos=null,e.currentLine=null,e.collisionDetectLine=null,e.isColliding=!1,e}return k(o,[{key:"beginDraw",value:function value(e){this.createLine(),this.createCollisionDetectLine(),this.initLine(),this.lastUIPos=null,this.isColliding=!1,this.draw(e)}},{key:"createLine",value:function value(){var e=ee(this.linePrefab);_instanceof(e,b)&&(e.name=R.DRAW_LINE,e.getComponent(ne)&&(this.node.addChild(e),this.currentLine=e))}},{key:"createCollisionDetectLine",value:function value(){if(this.currentLine){var e=ee(this.collisionDetectLinePrefab);if(_instanceof(e,b)){var t=e.getComponent(ne);if(t){var n=this.currentLine.getComponent(ne);if(n){var i=n.lineWidth,a=n.strokeColor;t.strokeColor=new le(a.r,a.g,a.b,128),t.lineWidth=i,this.node.addChild(e),this.collisionDetectLine=e}}}}}},{key:"initLine",value:function value(){var e,t=null==(e=this.currentLine)?void 0:e.getComponent(ai);t&&(t.sleep(),t.init())}},{key:"draw",value:function value(e){var t,n,i=this;if(e&&this.currentLine&&this.collisionDetectLine){var a=this.currentLine.getComponent(ai);if(a){var s=this.collisionDetectLine.getComponent(NP);if(s){var u=new I;null==(t=this.node.parent)||t.inverseTransformPoint(u,new I(e.x,e.y));var c=new x(u.x,u.y);if(this.isPointOverlapWithMap(e)){if(this.lastUIPos){var y=this.lastUIPos,m=y.x,w=y.y;this.node.inverseTransformPoint(u,new I(m,w));var _=new x(u.x,u.y);if(this.isColliding)s.drawFromTo(_,c);else{var g,C=this.isCurrentLineOverlapWithMap(e,this.lastUIPos);if(C.sort(function(NB,FB){return null==i.lastUIPos?0:x.distance(NB.point,i.lastUIPos)-x.distance(FB.point,i.lastUIPos)}),!(null!=(g=C[0])&&g.point))return;this.isColliding=!0}}}else if(this.lastUIPos&&this.isCurrentLineOverlapWithMap(e,this.lastUIPos).length>0){var P=this.lastUIPos,z=P.x,K=P.y;this.node.inverseTransformPoint(u,new I(z,K));var Z=new x(u.x,u.y);s.drawFromTo(Z,c)}else{if(!this.lastUIPos){this.lastUIPos=e.clone();var ae=c.x,ue=c.y;a.storePoints(ae,ue)}var te=this.lastUIPos,ht=te.x,Re=te.y;null==(n=this.node.parent)||n.inverseTransformPoint(u,new I(ht,Re));var Pe=new x(u.x,u.y),Me=Pe.x,Ue=Pe.y,it=c.x,pn=c.y,Un=Me-it,go=Ue-pn;if(!(Un*Un+go*go<this.minDistance*this.minDistance)){var IB=Math.sqrt(Un*Un+go*go);this.lastUIPos=e.clone(),a.drawTo(Me,Ue,it,pn),a.storePoints(it,pn);var ST=this.collisionDetectLine.getComponent(ne);return null==ST||ST.clear(),this.isColliding=!1,IB}}}}}}},{key:"isPointOverlapWithMap",value:function value(e){return this.getCollision(e).length>0}},{key:"isCurrentLineOverlapWithMap",value:function value(e,t){var n=this.getParallelLines(t,e,2),i=n.leftLine,a=n.rightLine,s=Kn.instance.raycast(t,e,ra.All).filter(function(y){return!y.collider.sensor}).filter(function(y){var m;return(null==(m=y.collider.node.parent)?void 0:m.name)!=="rope"}),u=Kn.instance.raycast(i.p1,i.p2,ra.All).filter(function(y){return!y.collider.sensor}).filter(function(y){var m;return(null==(m=y.collider.node.parent)?void 0:m.name)!=="rope"}),c=Kn.instance.raycast(a.p1,a.p2,ra.All).filter(function(y){return!y.collider.sensor}).filter(function(y){var m;return(null==(m=y.collider.node.parent)?void 0:m.name)!=="rope"});return[].concat(He(s),He(u),He(c))}},{key:"endDraw",value:function value(){if(this.currentLine&&this.collisionDetectLine){var e=this.currentLine.getComponent(ai);if(e){e.addPhysics(),e.wake();var t=this.collisionDetectLine.getComponent(ne);t&&(t.clear(),this.lastUIPos=null,this.isColliding=!1,this.currentLine=null)}}}},{key:"deActivePhysics",value:function value(){var e,t=null==(e=this.currentLine)?void 0:e.getComponent(ai);t&&(t.deActiveColliders(),t.sleep())}},{key:"clearLines",value:function value(){this.node.destroyAllChildren(),this.node.removeAllChildren()}},{key:"getParallelLines",value:function value(e,t,n){var i=t.x-e.x,a=t.y-e.y,s=U.Vec2.distance(e,t),u=i/s,c=a/s,y=new x(e.x-c*n,e.y+u*n),m=new x(e.x+c*n,e.y-u*n);return{leftLine:{p1:y,p2:new x(y.x+i,y.y+a)},rightLine:{p1:m,p2:new x(m.x+i,m.y+a)}}}},{key:"getCollision",value:function value(e){return Kn.instance.testAABB(new U.Rect(e.x-2,e.y-2,4,4)).filter(function(t){return!t.sensor}).filter(function(t){var n;return(null==(n=t.node.parent)?void 0:n.name)!=="rope"}).filter(function(t){if(_instanceof(t,Ne)){var n=new I;return t.node.inverseTransformPoint(n,new I(e.x,e.y)),To.polygonCircle(t.points,new x(n.x,n.y),2)}if(_instanceof(t,qn)){var i=t.node.getWorldPosition(),a=i.x,s=i.y;return To.circleCircle(new x(a,s+t.worldPosition.y),t.radius,new x(e.x,e.y),2)}return!t.sensor})}}]),o}(D)).prototype,"linePrefab",[rm],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return null}}),cm=h(Fa.prototype,"collisionDetectLinePrefab",[sm],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return null}}),hm=h(Fa.prototype,"minDistance",[lm],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return 10}}),Na=Fa))||Na)||Na);d._RF.pop(),d._RF.push({},"463cfEelRVL4KYgc4n5FJNz","Map",void 0);var dm,GP=[{id:1,map:1,type:1},{id:2,map:2,type:1},{id:3,map:3,type:1},{id:4,map:8,type:1},{id:5,map:9,type:1},{id:6,map:16,type:1},{id:7,map:4,type:1},{id:8,map:7,type:1},{id:9,map:6,type:1},{id:10,map:18,type:1},{id:11,map:10,type:2},{id:12,map:11,type:2},{id:13,map:12,type:2},{id:14,map:13,type:2},{id:15,map:14,type:2},{id:16,map:15,type:2},{id:17,map:5,type:2},{id:18,map:17,type:2},{id:19,map:19,type:2},{id:20,map:20,type:2},{id:21,map:21,type:3},{id:22,map:22,type:3},{id:23,map:23,type:3},{id:24,map:24,type:3},{id:25,map:25,type:3},{id:26,map:26,type:3},{id:27,map:27,type:3},{id:28,map:28,type:3},{id:29,map:29,type:3},{id:30,map:30,type:3},{id:31,map:31,type:4},{id:32,map:32,type:4},{id:33,map:33,type:4},{id:34,map:34,type:4},{id:35,map:35,type:4},{id:36,map:36,type:4},{id:37,map:37,type:4},{id:38,map:38,type:4},{id:39,map:39,type:4},{id:40,map:40,type:4},{id:41,map:41,type:5},{id:42,map:42,type:5},{id:43,map:43,type:5},{id:44,map:44,type:5},{id:45,map:45,type:5},{id:46,map:46,type:5},{id:47,map:47,type:5},{id:48,map:48,type:5},{id:49,map:49,type:5},{id:50,map:50,type:5},{id:51,map:51,type:6},{id:52,map:52,type:6},{id:53,map:53,type:6},{id:54,map:54,type:6},{id:55,map:55,type:6},{id:56,map:56,type:6},{id:57,map:57,type:6},{id:58,map:58,type:6},{id:59,map:59,type:6},{id:60,map:60,type:6},{id:61,map:61,type:7},{id:62,map:62,type:7},{id:63,map:63,type:7},{id:64,map:64,type:7},{id:65,map:65,type:7},{id:66,map:66,type:7},{id:67,map:67,type:7},{id:68,map:68,type:7},{id:69,map:69,type:7},{id:70,map:70,type:7},{id:71,map:71,type:8},{id:72,map:72,type:8},{id:73,map:73,type:8},{id:74,map:74,type:8},{id:75,map:75,type:8},{id:76,map:76,type:8},{id:77,map:77,type:8},{id:78,map:78,type:8},{id:79,map:79,type:8},{id:80,map:80,type:8},{id:81,map:81,type:9},{id:82,map:82,type:9},{id:83,map:83,type:9},{id:84,map:84,type:9},{id:85,map:85,type:9},{id:86,map:86,type:9},{id:87,map:87,type:9},{id:88,map:88,type:9},{id:89,map:89,type:9},{id:90,map:90,type:9},{id:91,map:91,type:10},{id:92,map:92,type:10},{id:93,map:93,type:10},{id:94,map:94,type:10},{id:95,map:95,type:10},{id:96,map:96,type:10},{id:97,map:97,type:10},{id:98,map:98,type:10},{id:99,map:99,type:10},{id:100,map:100,type:10},{id:101,map:101,type:11},{id:102,map:102,type:11},{id:103,map:103,type:11},{id:104,map:104,type:11},{id:105,map:105,type:11},{id:106,map:106,type:11},{id:107,map:107,type:11},{id:108,map:108,type:11},{id:109,map:109,type:11},{id:110,map:110,type:11},{id:111,map:111,type:12},{id:112,map:112,type:12},{id:113,map:113,type:12},{id:114,map:114,type:12},{id:115,map:115,type:12},{id:116,map:116,type:12},{id:117,map:117,type:12},{id:118,map:118,type:12},{id:119,map:119,type:12},{id:120,map:120,type:12},{id:121,map:121,type:13},{id:122,map:122,type:13},{id:123,map:123,type:13},{id:124,map:124,type:13},{id:125,map:125,type:13},{id:126,map:126,type:13},{id:127,map:127,type:13},{id:128,map:128,type:13},{id:129,map:129,type:13},{id:130,map:130,type:13},{id:131,map:131,type:14},{id:132,map:132,type:14},{id:133,map:133,type:14},{id:134,map:134,type:14},{id:135,map:135,type:14},{id:136,map:136,type:14},{id:137,map:137,type:14},{id:138,map:138,type:14},{id:139,map:139,type:14},{id:140,map:140,type:14},{id:141,map:141,type:15},{id:142,map:142,type:15},{id:143,map:143,type:15},{id:144,map:144,type:15},{id:145,map:145,type:15},{id:146,map:146,type:15},{id:147,map:147,type:15},{id:148,map:148,type:15},{id:149,map:149,type:15},{id:150,map:150,type:15},{id:151,map:184,type:16},{id:152,map:185,type:16},{id:153,map:186,type:16},{id:154,map:187,type:16},{id:155,map:188,type:16},{id:156,map:189,type:16},{id:157,map:190,type:16},{id:158,map:191,type:16},{id:159,map:192,type:16},{id:160,map:193,type:16},{id:161,map:194,type:17},{id:162,map:195,type:17},{id:163,map:196,type:17},{id:164,map:197,type:17},{id:165,map:198,type:17},{id:166,map:199,type:17},{id:167,map:200,type:17},{id:168,map:167,type:17},{id:169,map:168,type:17},{id:170,map:169,type:17},{id:171,map:170,type:18},{id:172,map:171,type:18},{id:173,map:172,type:18},{id:174,map:173,type:18},{id:175,map:174,type:18},{id:176,map:175,type:18},{id:177,map:176,type:18},{id:178,map:177,type:18},{id:179,map:178,type:18},{id:180,map:179,type:18},{id:181,map:180,type:19},{id:182,map:181,type:19},{id:183,map:182,type:19},{id:184,map:183,type:19},{id:185,map:151,type:19},{id:186,map:152,type:19},{id:187,map:153,type:19},{id:188,map:154,type:19},{id:189,map:155,type:19},{id:190,map:156,type:19},{id:191,map:157,type:20},{id:192,map:158,type:20},{id:193,map:159,type:20},{id:194,map:160,type:20},{id:195,map:161,type:20},{id:196,map:162,type:20},{id:197,map:163,type:20},{id:198,map:164,type:20},{id:199,map:165,type:20},{id:200,map:166,type:20},{id:201,map:201,type:21},{id:202,map:202,type:21},{id:203,map:203,type:21},{id:204,map:204,type:21},{id:205,map:205,type:21},{id:206,map:206,type:21},{id:207,map:207,type:21},{id:208,map:208,type:21},{id:209,map:209,type:21},{id:210,map:210,type:21},{id:211,map:211,type:22},{id:212,map:212,type:22},{id:213,map:213,type:22},{id:214,map:214,type:22},{id:215,map:215,type:22},{id:216,map:216,type:22},{id:217,map:217,type:22},{id:218,map:218,type:22},{id:219,map:219,type:22},{id:220,map:220,type:22},{id:221,map:221,type:23},{id:222,map:222,type:23},{id:223,map:223,type:23},{id:224,map:224,type:23},{id:225,map:225,type:23},{id:226,map:226,type:23},{id:227,map:227,type:23},{id:228,map:228,type:23},{id:229,map:229,type:23},{id:230,map:230,type:23},{id:231,map:231,type:24},{id:232,map:232,type:24},{id:233,map:233,type:24},{id:234,map:234,type:24},{id:235,map:235,type:24},{id:236,map:236,type:24},{id:237,map:237,type:24},{id:238,map:238,type:24},{id:239,map:239,type:24},{id:240,map:240,type:24},{id:241,map:241,type:25},{id:242,map:242,type:25},{id:243,map:243,type:25},{id:244,map:244,type:25},{id:245,map:245,type:25},{id:246,map:246,type:25},{id:247,map:247,type:25},{id:248,map:248,type:25},{id:249,map:249,type:25},{id:250,map:250,type:25},{id:251,map:251,type:26},{id:252,map:252,type:26},{id:253,map:253,type:26},{id:254,map:254,type:26},{id:255,map:255,type:26},{id:256,map:256,type:26},{id:257,map:257,type:26},{id:258,map:258,type:26},{id:259,map:259,type:26},{id:260,map:260,type:26},{id:261,map:261,type:27},{id:262,map:262,type:27},{id:263,map:263,type:27},{id:264,map:264,type:27},{id:265,map:265,type:27},{id:266,map:266,type:27},{id:267,map:267,type:27},{id:268,map:268,type:27},{id:269,map:269,type:27},{id:270,map:270,type:27},{id:271,map:271,type:28},{id:272,map:272,type:28},{id:273,map:273,type:28},{id:274,map:274,type:28},{id:275,map:275,type:28},{id:276,map:276,type:28},{id:277,map:277,type:28},{id:278,map:278,type:28},{id:279,map:279,type:28},{id:280,map:280,type:28},{id:281,map:281,type:29},{id:282,map:282,type:29},{id:283,map:283,type:29},{id:284,map:284,type:29},{id:285,map:285,type:29},{id:286,map:286,type:29},{id:287,map:287,type:29},{id:288,map:288,type:29},{id:289,map:289,type:29},{id:290,map:290,type:29},{id:291,map:291,type:30},{id:292,map:292,type:30},{id:293,map:293,type:30},{id:294,map:294,type:30},{id:295,map:295,type:30},{id:296,map:296,type:30},{id:297,map:297,type:30},{id:298,map:298,type:30},{id:299,map:299,type:30},{id:300,map:300,type:30},{id:301,map:301,type:31},{id:302,map:302,type:31},{id:303,map:303,type:31},{id:304,map:304,type:31},{id:305,map:305,type:31},{id:306,map:306,type:31},{id:307,map:307,type:31},{id:308,map:308,type:31},{id:309,map:309,type:31},{id:310,map:310,type:31},{id:311,map:311,type:32},{id:312,map:312,type:32},{id:313,map:313,type:32},{id:314,map:314,type:32},{id:315,map:315,type:32},{id:316,map:316,type:32},{id:317,map:317,type:32},{id:318,map:318,type:32},{id:319,map:319,type:32},{id:320,map:320,type:32},{id:321,map:321,type:33},{id:322,map:322,type:33},{id:323,map:323,type:33},{id:324,map:324,type:33},{id:325,map:325,type:33}];d._RF.pop(),d._RF.push({},"45df2RUUZZNhaXqOADOV0HC","MapLoader",void 0);var pm,UP=(0,f.ccclass)("MapLoader")(dm=function(l){E(e,l);var r,o=A(e);function e(){return S(this,e),o.apply(this,arguments)}return k(e,[{key:"paddingZero",value:function value(t,n){return Array(n-t.length).fill("0").join("")+t}},{key:"getMapByLevel",value:function value(t){var n=t;if(t>325){var i,a=fp.length;n=null!=(i=fp[(t-325)%a-1])?i:1}var s=GP.find(function(u){return u.id===n});return s?s.map:1}},{key:"getMapJsonPath",value:function value(t){var n=this.getMapByLevel(t),i=this.paddingZero(n.toString(),3);return"".concat(Xt.MAP_JSON_PREFIX).concat(i)}},{key:"preloadLevel",value:function value(t){var n=this.getMapJsonPath(t);_e.preloadJson(n)}},{key:"loadLevel",value:(r=B(function(t,n){var i,a,u,s;return _ts_generator(this,function(_state){switch(_state.label){case 0:return _state.trys.push([0,2,,3]),i=this.getMapJsonPath(t),[4,_e.loadJsonAsync(i)];case 1:if(!(a=_state.sent()))throw Error("Failed to load JSON asset");return null==n||n(null,a),[3,3];case 2:return s=_instanceof(u=_state.sent(),Error)?u:Error(String(u)),null==n||n(s,null),[3,3];case 3:return[2]}})}),function(t,n){return r.apply(this,arguments)})},{key:"isLevelAlreadyLoaded",value:function value(t){var n=this.getMapJsonPath(t);return!!_e.getAsset(n,ts)}}]),e}(D))||dm;d._RF.pop(),d._RF.push({},"8d3c7nuQGRNgpZcqAOCJY6O","InkCapacityController",void 0);var fm,mm=(0,f.ccclass)("InkCapacityController")(pm=function(l){E(o,l);var r=A(o);function o(){var e;S(this,o);for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return(e=r.call.apply(r,[this].concat(n))).maxInkLevel=0,e.currentInkLevel=0,e}return k(o,[{key:"init",value:function value(e){var t=this.getDrawLength(e);this.maxInkLevel=t,this.currentInkLevel=t}},{key:"getCurrentInkLevel",value:function value(){return Math.floor(this.currentInkLevel)}},{key:"removeInkLevel",value:function value(e){var t=this.currentInkLevel-e;this.setInkLevel(t)}},{key:"setInkLevel",value:function value(e){this.currentInkLevel=e,this.currentInkLevel<0&&(this.currentInkLevel=0),this.currentInkLevel>this.maxInkLevel&&(this.currentInkLevel=this.maxInkLevel)}},{key:"isInkEmpty",value:function value(){return this.currentInkLevel<=0}},{key:"getInkLevelPercentage",value:function value(){return this.currentInkLevel/this.maxInkLevel*100}},{key:"getStarRating",value:function value(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,t=this.maxInkLevel/e,n=Math.ceil(this.getCurrentInkLevel()/t);return 0===n?1:n}},{key:"getDrawLength",value:function value(e){for(var t=0,n=1;n<e.length;n++){var i=e[n-1],a=e[n],s=i.x-a.x,u=i.y-a.y;t+=Math.sqrt(s*s+u*u)}return 3*t}}]),o}(D))||pm;d._RF.pop(),d._RF.push({},"014cbNey8JEV4aPhDm9R5W4","InputController",void 0);var gm=(0,f.ccclass)("InputController")(fm=function(l){E(o,l);var r=A(o);function o(){var e;S(this,o);for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return(e=r.call.apply(r,[this].concat(n))).pointerDownOutSideCanvas=!1,e.handleElementPointerDown=function(){e.pointerDownOutSideCanvas=!0},e.handleElementPointerUp=function(a){e.onTouchEnd(),e.pointerDownOutSideCanvas=!1},e.onTouchStart=function(a){e.node.scene.emit(F.GAME_START,{pointer:a})},e.onTouchMove=function(a){e.pointerDownOutSideCanvas?(e.node.scene.emit(F.GAME_START,{pointer:a}),e.pointerDownOutSideCanvas=!1):e.node.scene.emit(F.DRAWING,{pointer:a})},e.onTouchEnd=function(a){e.node.scene.emit(F.BEE_ATTACK)},e}return k(o,[{key:"onLoad",value:function value(){this.listenInputEvents()}},{key:"listenInputEvents",value:function value(){ce.os!==ce.OS.WINDOWS&&ce.os!==ce.OS.OSX||(document.addEventListener("pointerup",this.handleElementPointerUp),document.addEventListener("pointerdown",this.handleElementPointerDown),this.node.on(b.EventType.MOUSE_DOWN,this.onTouchStart),this.node.on(b.EventType.MOUSE_MOVE,this.onTouchMove),this.node.on(b.EventType.MOUSE_UP,this.onTouchEnd)),this.node.on(b.EventType.TOUCH_START,this.onTouchStart),this.node.on(b.EventType.TOUCH_MOVE,this.onTouchMove),this.node.on(b.EventType.TOUCH_CANCEL,this.onTouchEnd),this.node.on(b.EventType.TOUCH_END,this.onTouchEnd)}},{key:"onDestroy",value:function value(){ce.os===ce.OS.WINDOWS||ce.os===ce.OS.OSX?(document.removeEventListener("pointerup",this.handleElementPointerUp),document.removeEventListener("pointerdown",this.handleElementPointerDown),this.node.off(b.EventType.MOUSE_DOWN,this.onTouchStart),this.node.off(b.EventType.MOUSE_MOVE,this.onTouchMove),this.node.off(b.EventType.MOUSE_UP,this.onTouchEnd)):(this.node.off(b.EventType.TOUCH_START,this.onTouchStart),this.node.off(b.EventType.TOUCH_MOVE,this.onTouchMove),this.node.off(b.EventType.TOUCH_CANCEL,this.onTouchEnd),this.node.off(b.EventType.TOUCH_END,this.onTouchEnd))}}]),o}(D))||fm;d._RF.pop(),d._RF.push({},"e6116mseMNPD6VcLUtkvez6","BaseState",void 0);var en=function(){function l(r){if(S(this,l),this.game=null,this.data={},this.game=r.node.getComponent(v_),!this.game)throw Error("Gameplay component not found");this.manager=r,this.updateStateData(),this.logDebug()}return k(l,[{key:"logDebug",value:function value(){this.constructor.name}},{key:"updateStateData",value:function value(){if(this.game){var r=this.game.getGameData();r&&(this.data=r)}}},{key:"updateGameData",value:function value(r){var o;null==(o=this.game)||o.setGameData(r)}}]),l}();d._RF.pop(),d._RF.push({},"a79a7LT0s5BuZrk5mvYsyKr","AttackingState",void 0);var bm=function(l){E(o,l);var r=A(o);function o(e){var t;return S(this,o),(t=r.call(this,e)).enableUI(),t.stopHint(),t.stopDrawing(),t.wakeUpObjects(),t.spawnEnemies(),t.startCountdown(),M.turnDownMusic(),t}return k(o,[{key:"enableUI",value:function value(){var e;null==(e=this.game)||e.uiManager.enableUIAttackingState()}},{key:"load",value:function value(){var e=this.manager.createLoadingState();this.manager.change(e)}},{key:"initialize",value:function value(){M.stopSound(Q.BEE_FLYING);var e=this.manager.createInitializeState();this.manager.change(e)}},{key:"ready",value:function value(){}},{key:"draw",value:function value(){}},{key:"attack",value:function value(){}},{key:"escape",value:function value(){var e=this.manager.createEscapeState();this.manager.change(e)}},{key:"death",value:function value(){var e=this.manager.createDeathState();this.manager.change(e)}},{key:"finish",value:function value(){}},{key:"update",value:function value(){}},{key:"stopDrawing",value:function value(){var e;null==(e=this.game)||null==(e=e.lineDrawer)||e.endDraw()}},{key:"stopHint",value:function value(){var e;null==(e=this.game)||null==(e=e.hint)||e.hideHint()}},{key:"wakeUpObjects",value:function value(){var e;null==(e=this.game)||null==(e=e.gameObjects)||e.wakeUpObjects()}},{key:"spawnEnemies",value:function value(){this.game&&this.game.gameObjects&&(this.game.gameObjects.spawnBees(),this.game.gameObjects.reviveBigBees(),M.playSound(Q.BEE_FLYING),M.playSound(Q.END_DRAW))}},{key:"startCountdown",value:function value(){var e;null==(e=this.game)||e.uiManager.startCountdown()}}]),o}(en);d._RF.pop(),d._RF.push({},"17461foCjdJ276bG2jcxA06","DeathState",void 0);var HP=codex.analytics,Sm=function(l){E(o,l);var r=A(o);function o(e){var t,n,i;return S(this,o),(i=r.call(this,e)).processCrazyGamesEvent(),i.disableUI(),M.stopAllSounds(),i.vibrateDevice(),i.pauseCountdown(),i.logLevelFailAnalytics(),null==(t=i.game)||t.scheduleOnce(function(){i.stopDogesLooking(),i.showUncompletedMark(),M.playSound(Q.LEVEL_FAIL,{volume:.3})},.5),null==(n=i.game)||n.scheduleOnce(function(){i.sleepObjects(),i.showLoseScreen(),i.manager.finish()},1.8),i}return k(o,[{key:"processCrazyGamesEvent",value:function value(){"gameplayStop"in GameSDK.extra&&GameSDK.extra.gameplayStop()}},{key:"load",value:function value(){}},{key:"initialize",value:function value(){}},{key:"ready",value:function value(){}},{key:"draw",value:function value(){}},{key:"attack",value:function value(){}},{key:"escape",value:function value(){}},{key:"death",value:function value(){}},{key:"finish",value:function value(){var e=this.manager.createFinishState();this.manager.change(e)}},{key:"update",value:function value(){}},{key:"disableUI",value:function value(){var e,t;null==(e=this.game)||e.uiManager.disableUI(),null==(t=this.game)||t.hint.reset()}},{key:"sleepObjects",value:function value(){var e,t;null==(e=this.game)||null==(e=e.lineDrawer)||e.deActivePhysics(),null==(t=this.game)||null==(t=t.gameObjects)||t.sleepObjects()}},{key:"pauseCountdown",value:function value(){var e;null==(e=this.game)||e.uiManager.pauseCountdown()}},{key:"stopDogesLooking",value:function value(){var e;if(null!=(e=this.game)&&e.gameObjects){var t,n=this.game.gameObjects.getComponentsInChildren(Qt),i=O(n);try{for(i.s();!(t=i.n()).done;){var a,s=t.value;null==(a=s.eyes)||a.stopLook(),s.setEnable(!1)}}catch(u){i.e(u)}finally{i.f()}}}},{key:"vibrateDevice",value:function value(){var e;null==(e=Ze("Vibrate"))||null==(e=e.getComponent(rr))||e.vibrate(500)}},{key:"showUncompletedMark",value:function value(){var e;null==(e=this.game)||e.uiManager.showUncompletedMark()}},{key:"showLoseScreen",value:function value(){var e=this.data.level;G.openScreen(re.LOSE_SCREEN,{level:e})}},{key:"logLevelFailAnalytics",value:function value(){if(this.game){var e=this.game.inkCapacityController;if(e){var t=this.data.level,i=e.getStarRating();HP.levelFail(void 0===t?0:t,i,Pp)}}}}]),o}(en);d._RF.pop(),d._RF.push({},"71778iMCmVDQKkpW1Ag0dZz","DrawingState",void 0);var km=function(l){E(o,l);var r=A(o);function o(e){var t;return S(this,o),(t=r.call(this,e)).dist=0,t.isEmptyDraw=!1,t.initDrawer(),t}return k(o,[{key:"load",value:function value(){}},{key:"initialize",value:function value(){var e=this.manager.createInitializeState();this.manager.change(e)}},{key:"ready",value:function value(){var e=this.manager.createReadyState();this.manager.change(e)}},{key:"draw",value:function value(){}},{key:"attack",value:function value(){if((null!=(e=null==(t=this.game)?void 0:t.inkCapacityController.getInkLevelPercentage())?e:0)===100)return null==(n=this.game)||n.lineDrawer.endDraw(),void(this.isEmptyDraw=!0);var e,t,n,i=this.manager.createAttackingState();this.manager.change(i)}},{key:"escape",value:function value(){}},{key:"death",value:function value(){}},{key:"finish",value:function value(){}},{key:"update",value:function value(){var e;this.isInkEmpty()?null==(e=this.game)||e.node.scene.emit(F.BEE_ATTACK):this.isEmptyDraw?this.manager.ready():(this.updateStateData(),this.drawLines(),this.updateInkLevel(),this.updateProgressBar())}},{key:"initDrawer",value:function value(){var e;if(null!=(e=this.game)&&e.lineDrawer){var t=this.data.pointer.getUILocation();this.game.lineDrawer.beginDraw(t),M.playSound(Q.BUTTON_CLICK)}}},{key:"isInkEmpty",value:function value(){return!!this.game&&this.game.inkCapacityController.isInkEmpty()}},{key:"drawLines",value:function value(){var e,t;if(null!=(e=this.game)&&e.lineDrawer){var n=this.data.pointer.getUILocation();this.dist=null!=(t=this.game.lineDrawer.draw(n))?t:0,this.dist>0&&M.playSound(Q.TOUCH_START,{volume:.8})}}},{key:"updateInkLevel",value:function value(){var e;null==(e=this.game)||e.inkCapacityController.removeInkLevel(this.dist)}},{key:"updateProgressBar",value:function value(){if(this.game){var e=this.game.inkCapacityController.getStarRating();this.game.uiManager.setProgressStars(e);var t=this.game.inkCapacityController.getInkLevelPercentage();this.game.uiManager.setProgressBarPercentage(t)}}}]),o}(en);d._RF.pop(),d._RF.push({},"d600e+7dHhGOYCGrcOjxVcl","EscapeState",void 0);var wm=codex,Cm=wm.player,jP=wm.analytics,Em=function(l){E(o,l);var r=A(o);function o(e){var t,n;return S(this,o),(n=r.call(this,e)).processCrazyGamesEvent(),n.disableUI(),n.stopAllSounds(),n.vibrateDevice(),n.makeDogesSmile(),n.pauseCountdown(),n.showCompletedMark(),n.updatePlayerProgress(),n.stopBeeBehavior(),n.logLevelCompleteAnalytics(),null==(t=n.game)||t.scheduleOnce(function(){n.sleepObjects(),n.showWiningScreen(),n.manager.finish()},.5),M.playSound(Q.LEVEL_PASS),M.playSound(Q.BEE_FLYING),n}return k(o,[{key:"processCrazyGamesEvent",value:function value(){"gameplayStop"in GameSDK.extra&&GameSDK.extra.gameplayStop()}},{key:"load",value:function value(){}},{key:"initialize",value:function value(){}},{key:"ready",value:function value(){}},{key:"draw",value:function value(){}},{key:"attack",value:function value(){}},{key:"escape",value:function value(){}},{key:"death",value:function value(){}},{key:"finish",value:function value(){var e=this.manager.createFinishState();this.manager.change(e)}},{key:"update",value:function value(){}},{key:"disableUI",value:function value(){var e,t;null==(e=this.game)||e.uiManager.disableUI(),null==(t=this.game)||t.hint.reset()}},{key:"stopBeeBehavior",value:function value(){var e;null==(e=this.game)||null==(e=e.gameObjects)||e.stopBeeBehavior()}},{key:"sleepObjects",value:function value(){var e,t;null==(e=this.game)||null==(e=e.lineDrawer)||e.deActivePhysics(),null==(t=this.game)||null==(t=t.gameObjects)||t.sleepObjects()}},{key:"stopAllSounds",value:function value(){M.stopAllSounds()}},{key:"makeDogesSmile",value:function value(){var e;if(null!=(e=this.game)&&e.gameObjects){var t,n=this.game.gameObjects.getComponentsInChildren(Qt),i=O(n);try{for(i.s();!(t=i.n()).done;){var a=t.value;a.smile(),a.setEnable(!1)}}catch(s){i.e(s)}finally{i.f()}}}},{key:"vibrateDevice",value:function value(){var e;null==(e=Ze("Vibrate"))||null==(e=e.getComponent(rr))||e.vibrate(500)}},{key:"pauseCountdown",value:function value(){var e;null==(e=this.game)||e.uiManager.pauseCountdown()}},{key:"showCompletedMark",value:function value(){var e;null==(e=this.game)||e.uiManager.showCompletedMark()}},{key:"updatePlayerProgress",value:function value(){if(this.game){var e=this.data.level;if(e){var t=Cm.getGameData();if(t){var n=$({},t);e<t.level&&(n.level=e+1),Cm.setGameData(n)}}}}},{key:"showWiningScreen",value:function value(){if(this.game){var e=this.data.level,t=this.game.inkCapacityController.getStarRating();G.openScreen(re.WINNING_SCREEN,{level:e,stars:t})}}},{key:"logLevelCompleteAnalytics",value:function value(){if(this.game){var e=this.game.inkCapacityController;if(e){var t=this.data.level,i=e.getStarRating();jP.levelComplete(void 0===t?0:t,i,Pp)}}}}]),o}(en);d._RF.pop(),d._RF.push({},"0397cr2IpZEwbRzwQhlVHMO","MatchUtils",void 0);var Sr=codex,Ae=Sr.match,xe=Sr.player,WP=Sr.leaderboard,Am=Ludex,za=Am.Utils,qP=za.Object,lt=za.Valid,Tm=za.String,KP=za.Array,Ln=Am.Match.Modes,Rm=["Champion","Ultimate","Grand","Elite","Master's","Premier","Epic","Pro's","Supreme","Legendary","Victory","Prime","Titan's","Hero's","Star's"],Hi=function(l){E(o,l);var r=A(o);function o(){return S(this,o),r.apply(this,arguments)}return k(o,[{key:"createTournamentPayload",value:function value(){return at(ot(o.prototype),"createTournamentPayload",this).call(this)}}]),o}(function(){var r,o,e,t,n,i,a,s,u;function l(){var y,y1,c=this;S(this,l),this.Pe=B(function(){var y;return _ts_generator(this,function(_state){return y=xe.getPlayerId(),[2,Ae.single.start.processAsync({playerId:y})]})}),this._e=B(function(){return _ts_generator(this,function(_state){return[2,Ae.single.finish.processAsync()]})}),this.Lt=B(function(){var y,m;return _ts_generator(this,function(_state){return y=xe.getPlayerId(),m=GameSDK.context.getID(),[2,Ae.tournament.continue.processAsync({playerId:y,contextId:m})]})}),this.Bt=B(function(){var y,m;return _ts_generator(this,function(_state){return y=xe.getPlayerId(),m=xe.getBestScore(),[2,Ae.tournament.finish.processAsync({playerId:y,bestScore:m})]})}),this.Dt=B(function(){return _ts_generator(this,function(_state){try{return[2,c.Ot()]}catch(y){if(!qP.hasOwn(y,"name")||lt.isString(y.name))throw y;if("PlayerHasFinishedMatch"===y.name)return[2,c.It()];if("PlayerNotJoinInMatch"===y.name)return[2,c.Nt()]}return[2]})}),this.Ft=(y=B(function(m){return _ts_generator(this,function(_state){return[2,Ae.challenge.finish.processAsync(m)]})}),function(m){return y.apply(this,arguments)}),this.Ot=B(function(){var y,m,w,_,g,C;return _ts_generator(this,function(_state){if(m=(y=c.X()).id,_=(w=y.customData).playerId,g=w.opponentId,!lt.isString(m))throw Error("Invalid match id");if(!lt.isString(_))throw Error("Invalid player id");if(!lt.isString(g))throw Error("Invalid opponent id");if(!(C=GameSDK.context.getID()))throw Error("Cannot get contextId");return[2,Ae.challenge.continue.processAsync({matchId:m,contextId:C,playerId:_,opponentId:g})]})}),this.It=B(function(){var y,m,w,_;return _ts_generator(this,function(_state){if(m=Math.floor(Math.random()*(y=xe.getConnectedPlayerIds(100,0)).length),w=xe.getPlayerId(),_=y[m],!lt.isString(_)||lt.isEmpty(_))throw Error("Invalid opponent id");return[2,Ae.challenge.friend.processAsync({playerId:w,opponentId:_})]})}),this.Nt=B(function(){var y,m,w,_,g;return _ts_generator(this,function(_state){if(m=(y=c.X()).id,_=(w=y.customData).playerId,g=w.opponentId,!lt.isString(m))throw Error("Invalid match id");if(!lt.isString(_))throw Error("Invalid player id");if(!lt.isString(g))throw Error("Invalid opponent id");return[2,Ae.challenge.join.processAsync({matchId:m,playerId:_,opponentId:g})]})}),this.zt=(y1=B(function(m){var w;return _ts_generator(this,function(_state){return w=xe.getPlayerId(),[2,Ae.strategy.start.processAsync({matchId:"123456",gameMode:m,playerId:w})]})}),function(m){return y1.apply(this,arguments)}),this.xt=B(function(){return _ts_generator(this,function(_state){return[2,Ae.strategy.finish.processAsync({postGlobalLeaderboard:!0,setPlayerBestScore:!0})]})}),this.X=function(){var y=Ae.getMatchState();if(!y)throw Error("Match state not found");return y},this.createTournamentName=function(){var y=U.randomRangeInt(0,Rm.length-1),m="".concat(Rm[y]," Tournament"),w=Tm.removeDiacritics(m);return"".concat(w)},this.Gt=B(function(){return _ts_generator(this,function(_state){switch(_state.label){case 0:return _state.trys.push([0,2,,3]),[4,GameSDK.tournament.getTournamentsAsync()];case 1:return[2,_state.sent()];case 2:return _state.sent(),[2,[]];case 3:return[2]}})})}return k(l,[{key:"createTournamentPayload",value:function value(){var c,y,m=Tm.generateObjectId(),w=xe.getPlayerId(),_=xe.getPlayer().name,g=this.X().profiles;return{score:null!=(c=null==(y=(void 0===g?{}:g)[w])?void 0:y.score)?c:0,playerId:w,mode:Ln.TOURNAMENT,name:this.createTournamentName(),leaderboardId:m,payload:{playerId:w,playerName:_,leaderboardId:m}}}}],[{key:"inst",get:function get(){return this.J||(this.J=new this),this.J}},{key:"startMatchAsync",value:(u=B(function(c){var y;return _ts_generator(this,function(_state){switch(_state.label){case 0:switch(_state.trys.push([0,13,,14]),y=null!=c?c:this.getMatchMode()){case Ln.SINGLE:return[3,1];case Ln.TOURNAMENT:return[3,3];case Ln.CHALLENGE_FRIEND:return[3,5]}return[3,7];case 1:case 9:return[4,this.inst.Pe()];case 2:case 4:case 6:return _state.sent(),[3,12];case 3:return[4,this.inst.Lt()];case 5:return[4,this.inst.Dt()];case 7:if(!y)return[3,9];return[4,this.inst.zt(y)];case 8:return _state.sent(),[3,11];case 10:_state.sent(),_state.label=11;case 11:_state.label=12;case 12:return[3,14];case 13:return _state.sent(),[3,14];case 14:return[2]}})}),function(c){return u.apply(this,arguments)})},{key:"setProfileMatchDataAsync",value:(s=B(function(c){return _ts_generator(this,function(_state){switch(_state.label){case 0:return _state.trys.push([0,2,,3]),[4,Ae.handler.setProfileData(c)];case 1:case 2:return _state.sent(),[3,3];case 3:return[2]}})}),function(c){return s.apply(this,arguments)})},{key:"setMatchCustomDataAsync",value:(a=B(function(c){return _ts_generator(this,function(_state){switch(_state.label){case 0:return _state.trys.push([0,2,,3]),[4,Ae.handler.setMatchCustomData(c)];case 1:case 2:return _state.sent(),[3,3];case 3:return[2]}})}),function(c){return a.apply(this,arguments)})},{key:"getMatchCustomDataAsync",value:(i=B(function(){return _ts_generator(this,function(_state){switch(_state.label){case 0:return _state.trys.push([0,2,,3]),[4,Ae.handler.getMatchCustomData()];case 1:case 2:return _state.sent(),[3,3];case 3:return[2]}})}),function(){return i.apply(this,arguments)})},{key:"setLeaderboardScoreAsync",value:(n=B(function(c){return _ts_generator(this,function(_state){switch(_state.label){case 0:return _state.trys.push([0,2,,3]),[4,Ae.handler.setLeaderboardScore(c)];case 1:case 2:return _state.sent(),[3,3];case 3:return[2]}})}),function(c){return n.apply(this,arguments)})},{key:"finishMatchAsync",value:(t=B(function(c){var y;return _ts_generator(this,function(_state){switch(_state.label){case 0:switch(_state.trys.push([0,13,,14]),y=this.getMatchMode()){case Ln.SINGLE:return[3,1];case Ln.TOURNAMENT:return[3,3];case Ln.CHALLENGE_FRIEND:return[3,5]}return[3,7];case 1:case 9:return[4,this.inst._e()];case 2:case 4:case 6:return _state.sent(),[3,12];case 3:return[4,this.inst.Bt()];case 5:return[4,this.inst.Ft(c)];case 7:if(!y)return[3,9];return[4,this.inst.xt()];case 8:return _state.sent(),[3,11];case 10:_state.sent(),_state.label=11;case 11:_state.label=12;case 12:return[3,14];case 13:return _state.sent(),[3,14];case 14:return[2]}})}),function(c){return t.apply(this,arguments)})},{key:"joinTournamentAsync",value:(e=B(function(c){var y;return _ts_generator(this,function(_state){return y=xe.getPlayerId(),[2,Ae.tournament.join.processAsync({tournamentId:c,playerId:y})]})}),function(c){return e.apply(this,arguments)})},{key:"continueTournamentAsync",value:(o=B(function(c){var y;return _ts_generator(this,function(_state){return y=xe.getPlayerId(),[2,Ae.tournament.continue.processAsync({playerId:y,contextId:c})]})}),function(c){return o.apply(this,arguments)})},{key:"getMatchMode",value:function value(){var c=this.inst.X();return lt.isString(c.mode)?c.mode:null}},{key:"getMatchCustomData",value:function value(){var c=this.inst.X();return lt.isObject(c.customData)?c.customData:null}},{key:"updateMatchStateAfterLevelFinish",value:function value(c,y){this.setMatchCustomDataAsync({level:c,score:y});var m=xe.getPlayerId();this.setProfileMatchDataAsync({id:m,score:y})}},{key:"processCreateTournamentAsync",value:(r=B(function(){var c,y,m,w;return _ts_generator(this,function(_state){switch(_state.label){case 0:return[4,this.inst.Gt()];case 1:if(c=_state.sent(),y=KP.search(c,function(_){var g=_.getPayload(),C=JSON.parse(lt.isString(g)?g:"{}");return"DEFAULT"===_.getTournamentType()&&C.playerId===xe.getPlayerId()}))throw new xR(xe.getPlayerId(),y.getID());return m=this.inst.createTournamentPayload(),xe.setGameData({lastCreateTournamentShown:Date.now()}),[4,Ae.tournament.create.processAsync(m)];case 2:return _state.sent(),w=m.leaderboardId,WP.addLeaderboard({name:w,type:"tournament",autoSortRank:!0,leaderboardId:w}),[2]}})}),function(){return r.apply(this,arguments)})}]),l}());d._RF.pop(),d._RF.push({},"a9bc11SkV9L/5L+Y+fhswfJ","FinishState",void 0);var Pm=codex.player,_m=function(l){E(e,l);var r,o=A(e);function e(t){var n;return S(this,e),n=o.call(this,t),M.turnUpMusic(),M.stopSound(Q.BEE_FLYING),n.finishGameAsync(),n}return k(e,[{key:"load",value:function value(){var t=this.manager.createLoadingState();this.manager.change(t)}},{key:"initialize",value:function value(){var t=this.manager.createInitializeState();this.manager.change(t)}},{key:"ready",value:function value(){}},{key:"draw",value:function value(){}},{key:"attack",value:function value(){}},{key:"escape",value:function value(){}},{key:"death",value:function value(){}},{key:"finish",value:function value(){}},{key:"update",value:function value(){}},{key:"finishGameAsync",value:(r=B(function(){var t,n,i,a;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(_state.trys.push([0,2,,3]),!this.game||!(t=this.game.inkCapacityController))return[2];return i=1e3*(void 0===(n=this.data.level)?0:n)+100*t.getStarRating(),a=Pm.getBestScore(),"submitGameResultsAsync"in GameSDK.extra&&GameSDK.extra.submitGameResultsAsync(a),a<i&&Pm.setBestScore(i),[4,Hi.finishMatchAsync()];case 1:case 2:return _state.sent(),[3,3];case 3:return[2]}})}),function(){return r.apply(this,arguments)})}]),e}(en);d._RF.pop(),d._RF.push({},"81384LH7iZM+pyqeb36L9t3","SwitchGameUtils",void 0);var kr="9p066934tllp",Lm="bubble-pop-classic",Bm=codex,Bn=Bm.player,Dm=Bm.analytics,VP=Ludex.Plugins.Analytics.Events,Om=function(){function l(){S(this,l),this.targetLevel=null}return k(l,null,[{key:"inst",get:function get(){return this._instance||(this._instance=new l),this._instance}},{key:"init",value:function value(){var r=this,o=this.inst;this.isNewPlayerFirstDay()?o.targetLevel=8:setTimeout(function(){r.assignTargetLevelForReturningUser()},12e4)}},{key:"handleSwitchGame",value:function value(){var r,o;"MsGames"===GameSDK.getSDKName()&&"switchGameAsync"in GameSDK.extra&&(this.isSwitchGameCalledToday()||null!==this.inst.targetLevel&&(null!=(r=null==(o=Bn.getGameData())?void 0:o.level)?r:1)>=this.inst.targetLevel&&this.handleSwitchGameAsync())}},{key:"handleSwitchGameAsync",value:function value(){"MsGames"===GameSDK.getSDKName()&&"switchGameAsync"in GameSDK.extra&&(Bn.setPlayerDataByName("lastCallSwitchGame",Date.now()),Dm.event(VP.SWITCH_GAME_POPUP,{target_game_id:kr,target_game_name:Lm}),GameSDK.extra.switchGameAsync(kr).catch(function(r){Dm.event("switch_game_popup_cancel",{target_game_id:kr,target_game_name:Lm})}))}},{key:"isSwitchGameCalledToday",value:function value(){var r,o=null!=(r=Bn.getPlayerDataByKey("lastCallSwitchGame"))?r:0;return this.isSameDay(o)}},{key:"isNewPlayerFirstDay",value:function value(){var r,o=Bn.getGameData(),e=null!=(r=null==o?void 0:o.firstLoginTime)?r:0;if(0===e){if((null!=(t=null==o?void 0:o.level)?t:1)===1)return Bn.setGameData({firstLoginTime:Date.now()}),!0;var t,n=Date.now()-864e5;return Bn.setGameData({firstLoginTime:n}),!1}return this.isSameDay(e)}},{key:"isSameDay",value:function value(r){var o=new Date,e=new Date(r),t=o.getDate()===e.getDate(),n=o.getMonth()===e.getMonth(),i=o.getFullYear()===e.getFullYear();return t&&n&&i}},{key:"assignTargetLevelForReturningUser",value:function value(){var r,o=Bn.getGameData(),e=null!=(r=null==o?void 0:o.level)?r:1;this.inst.targetLevel=e+1}}]),l}();d._RF.pop(),d._RF.push({},"37a5cRy3ANBGpVlH3wyS3Ra","InitializeState",void 0);var YP=codex.analytics,Im=function(l){E(t,l);var r,o,e=A(t);function t(n){var i;return S(this,t),i=e.call(this,n),"CrazyGames"===GameSDK.getSDKName()&&i.processCrazyGamesRequirements(),i.disableUI(),i.disableHintButtonForEarlyLevels(),i.clearHint(),i.clearGameObjects(),i.createGameObjects(),i.initInkCapacity(),i.initCountdown(),i.updateHeader(),i.showTutorialUI(),M.playMusic(Q.BG_MUSIC),Om.handleSwitchGame(),i.startGameAsync().then(function(){i.closeLoadingScreen(),i.manager.ready(),i.logLevelStartAnalytics()}),i}return k(t,[{key:"processCrazyGamesRequirements",value:function value(){"gameplayStart"in GameSDK.extra&&GameSDK.extra.gameplayStart(),this.showInterAdsCrazyGames()}},{key:"disableHintButtonForEarlyLevels",value:function value(){if(this.game){var n=this.data.level;n&&n<=3&&this.game.uiManager.disableHintButton()}}},{key:"showInterAdsCrazyGames",value:(o=B(function(){return _ts_generator(this,function(_state){switch(_state.label){case 0:if(!this.game)return[3,2];return M.stopAllSounds(),[4,he.showInterstitialAdAsync({forLevel:this.data.level,includeSDK:["CrazyGames"]})];case 1:_state.sent()&&this.game.disableRewardAdsItemForCrazyGames(),M.turnUpMusic(),_state.label=2;case 2:return[2]}})}),function(){return o.apply(this,arguments)})},{key:"load",value:function value(){if(Ludex.Utils.Valid.isDebugger()){var n=this.manager.createLoadingState();this.manager.change(n)}}},{key:"initialize",value:function value(){}},{key:"ready",value:function value(){var n=this.manager.createReadyState();this.manager.change(n)}},{key:"draw",value:function value(){}},{key:"attack",value:function value(){}},{key:"escape",value:function value(){var n=this.manager.createEscapeState();this.manager.change(n)}},{key:"death",value:function value(){var n=this.manager.createDeathState();this.manager.change(n)}},{key:"finish",value:function value(){}},{key:"update",value:function value(){}},{key:"closeLoadingScreen",value:function value(){G.closeScreen(re.LOADING_SCREEN)}},{key:"disableUI",value:function value(){var n;null==(n=this.game)||n.uiManager.disableUI()}},{key:"clearHint",value:function value(){var n;null==(n=this.game)||null==(n=n.hint)||n.reset()}},{key:"clearGameObjects",value:function value(){var n,i;null!=(n=this.game)&&n.lineDrawer&&null!=(i=this.game)&&i.gameObjects&&(this.game.lineDrawer.clearLines(),this.game.gameObjects.clearObjects())}},{key:"createGameObjects",value:function value(){var n,i=this.data.levelData;i&&(null==(n=this.game)||null==(n=n.gameObjects)||n.spawnObjects(i))}},{key:"initInkCapacity",value:function value(){if(this.game){var n=this.data.levelData;if(n){var i=this.game.inkCapacityController,a=n.lnk;i.init(void 0===a?[]:a)}}}},{key:"initCountdown",value:function value(){var n;null==(n=this.game)||n.uiManager.initCountdown()}},{key:"updateHeader",value:function value(){var n;if(null!=(n=this.game)&&n.hint){var i=this.game.inkCapacityController.getStarRating();this.game.uiManager.setProgressStars(i);var a=this.game.inkCapacityController.getInkLevelPercentage();this.game.uiManager.setProgressBarPercentage(a),this.game.hint.getIsHintShow()||this.game.uiManager.startCountDownHeaderHintBubbleAnim()}}},{key:"showTutorialUI",value:function value(){var n,i;if(this.game){var a=this.data,s=a.level,u=a.levelData;if(s&&u&&!(s>3)&&null!=(n=this.game)&&n.hint&&null!=(i=this.game)&&i.uiManager){var c=u.tips,y=be.transformPointsFromMapToDrawAreaCoordinate(c);this.game.hint.showHint(y,!0),this.game.uiManager.stopCountDownHeaderHintBubbleAnim()}}}},{key:"startGameAsync",value:(r=B(function(){return _ts_generator(this,function(_state){switch(_state.label){case 0:if(_state.trys.push([0,2,,3]),this.data.isFromLoader)return[2,void this.updateGameData({isFromLoader:!1})];return[4,Hi.startMatchAsync()];case 1:case 2:return _state.sent(),[3,3];case 3:return[2]}})}),function(){return r.apply(this,arguments)})},{key:"logLevelStartAnalytics",value:function value(){if(this.game){var n=this.data.level,a=this.game.inkCapacityController.getStarRating();YP.levelStart(void 0===n?0:n,a)}}}]),t}(en);d._RF.pop(),d._RF.push({},"f98e6wIKqZGv7aAVsWH1sS+","MapUtils",void 0);var Nm=function(){function l(){S(this,l)}return k(l,null,[{key:"inst",get:function get(){return this._instance||(this._instance=new l),this._instance}},{key:"isMapFlippedHorizontally",value:function value(r){var o=r-325;return!(o<=0)&&Math.floor(o/fp.length)%2==0}},{key:"getTransformedMapPoints",value:function value(r){return r.map(function(o){var e=o.data,t=o.connect;if(e&&void 0!==e.a&&(e.a*=-1),t){var n=t.point,i=t.data;i&&void 0!==i.a&&(i.a*=-1),Array.isArray(n)?t.point=be.getTransformedPolygon(n):t.point=be.getTransformedPoint(n)}if(Array.isArray(o.point)){var a=o.id===N.WOOD||o.id===N.COLLIDER?be.getTransformedDoublePolygon(o.point):be.getTransformedPolygon(o.point);return $($({},o),{},{point:a})}var s=o.point;return $($({},o),{},{point:be.getTransformedPoint(s)})})}},{key:"getTransformedTips",value:function value(r){return r.map(function(o){return be.getTransformedPoint(o)})}},{key:"revertTransformedMapPoints",value:function value(r){return r.map(function(o){if(o.connect){var e=o.connect.point;Array.isArray(e)?o.connect.point=be.revertTransformedPolygon(e):o.connect.point=be.revertTransformedPoint(e)}if(Array.isArray(o.point)){var t=o.id===N.WOOD||o.id===N.COLLIDER?be.revertTransformedDoublePolygon(o.point):be.revertTransformedPolygon(o.point);return $($({},o),{},{point:t})}var n=o.point;return $($({},o),{},{point:be.revertTransformedPoint(n)})})}},{key:"revertTransformedTips",value:function value(r){return r.map(function(o){return be.revertTransformedPoint(o)})}},{key:"flipMapDataHorizontally",value:function value(r){var o=r.map,e=r.tips,t=r.lnk,n=1/0,i=-1/0,a=[],s=l.getTransformedMapPoints(o),u=l.getTransformedTips(e);return s.forEach(function(c){Array.isArray(c.point)?c.point.forEach(function(y){a.push(y)}):a.push(c.point)}),u.forEach(function(c){a.push(c)}),a.forEach(function(c){c.x<n&&(n=c.x),c.x>i&&(i=c.x)}),s.forEach(function(c){Array.isArray(c.point)?c.point.forEach(function(y){y.x=y.x-2*(y.x-375)}):c.point.x=c.point.x-2*(c.point.x-375),c.connect&&(Array.isArray(c.connect.point)?c.connect.point.forEach(function(y){y.x=y.x-2*(y.x-375)}):c.connect.point.x=c.connect.point.x-2*(c.connect.point.x-375))}),u.forEach(function(c){c.x=c.x-2*(c.x-375)}),t.forEach(function(c){c.x=c.x-2*(c.x-375)}),{map:l.revertTransformedMapPoints(s),tips:l.revertTransformedTips(u),lnk:t}}}]),l}();d._RF.pop(),d._RF.push({},"a8496IbdA1EnY7sv4ApuaJW","LoadingState",void 0);var Fm=function(l){E(o,l);var r=A(o);function o(e){var t;return S(this,o),(t=r.call(this,e)).handleMapLoaded=function(n,i){if(!n&&i){var a,s,u=t.data.level,c=i.json;if(Nm.isMapFlippedHorizontally(null!=u?u:1)){var m=Nm.flipMapDataHorizontally(c);t.updateGameData({levelData:m})}else t.updateGameData({levelData:c});u&&(null==(a=t.game)||null==(a=a.gameMap)||a.preloadLevel(u+1)),t.loadingScreenFlag?null==(s=t.game)||s.scheduleOnce(function(){t.initialize()},.5):t.initialize()}},t.loadingScreenFlag=!t.isLevelAlreadyLoaded(),t.loadingScreenFlag&&G.showLoadingScreen(),t.stopHint(),t.loadGameMap(),t.updateLevelText(),t}return k(o,[{key:"load",value:function value(){}},{key:"initialize",value:function value(){var e=this.manager.createInitializeState();this.manager.change(e)}},{key:"ready",value:function value(){}},{key:"draw",value:function value(){}},{key:"attack",value:function value(){}},{key:"escape",value:function value(){}},{key:"death",value:function value(){}},{key:"finish",value:function value(){}},{key:"update",value:function value(){}},{key:"isLevelAlreadyLoaded",value:function value(){var e,t,n=this.data.level;if(!n)throw Error("Level is not defined");return null!=(e=null==(t=this.game)||null==(t=t.gameMap)?void 0:t.isLevelAlreadyLoaded(n))&&e}},{key:"stopHint",value:function value(){var e;null==(e=this.game)||null==(e=e.hint)||e.hideHint()}},{key:"loadGameMap",value:function value(){var e,t=this.data.level;if(!t)throw Error("Level is not defined");null==(e=this.game)||null==(e=e.gameMap)||e.loadLevel(t,this.handleMapLoaded)}},{key:"updateLevelText",value:function value(){var e,t=this.data.level;t&&(null==(e=this.game)||e.uiManager.setLevelText(t))}}]),o}(en);d._RF.pop(),d._RF.push({},"5ef69tJ5eNNv7o22H/XfSD2","ReadyState",void 0);var zm,xm=function(l){E(o,l);var r=A(o);function o(e){var t;return S(this,o),(t=r.call(this,e)).enableUI(),t}return k(o,[{key:"enableUI",value:function value(){var e;null==(e=this.game)||e.uiManager.enableUIReadyState()}},{key:"load",value:function value(){if(Ludex.Utils.Valid.isDebugger()){var e=this.manager.createLoadingState();this.manager.change(e)}}},{key:"initialize",value:function value(){}},{key:"ready",value:function value(){}},{key:"draw",value:function value(){var e=this.manager.createDrawingState();this.manager.change(e)}},{key:"attack",value:function value(){}},{key:"escape",value:function value(){var e=this.manager.createEscapeState();this.manager.change(e)}},{key:"death",value:function value(){if(Ludex.Utils.Valid.isDebugger()){var e=this.manager.createDeathState();this.manager.change(e)}}},{key:"finish",value:function value(){}},{key:"update",value:function value(){}}]),o}(en);d._RF.pop(),d._RF.push({},"bb0e3beWSxOOLCv7gjyg2s0","StateManager",void 0);var Gm,Mm,Um,Hm,jm,Wm,qm,xa,Dn,Km,Vm,Ym,Jm,Xm,Zm,Qm=(0,f.ccclass)("StateManager")(zm=function(l){E(o,l);var r=A(o);function o(){return S(this,o),r.apply(this,arguments)}return k(o,[{key:"init",value:function value(){this.state=new Fm(this)}},{key:"change",value:function value(e){this.state=e}},{key:"load",value:function value(){this.state&&this.state.load()}},{key:"initialize",value:function value(){this.state&&this.state.initialize()}},{key:"isInitialize",value:function value(){return _instanceof(this.state,Im)}},{key:"ready",value:function value(){this.state&&this.state.ready()}},{key:"isReady",value:function value(){return _instanceof(this.state,xm)}},{key:"draw",value:function value(){this.state&&this.state.draw()}},{key:"isDrawing",value:function value(){return _instanceof(this.state,km)}},{key:"attack",value:function value(){this.state&&this.state.attack()}},{key:"isAttacking",value:function value(){return _instanceof(this.state,bm)}},{key:"escape",value:function value(){this.state&&this.state.escape()}},{key:"isSurviving",value:function value(){return _instanceof(this.state,Em)}},{key:"death",value:function value(){this.state&&this.state.death()}},{key:"isFailed",value:function value(){return _instanceof(this.state,Sm)}},{key:"finish",value:function value(){this.state&&this.state.finish()}},{key:"isFinished",value:function value(){return _instanceof(this.state,_m)}},{key:"update",value:function value(e){this.state&&this.state.update(e)}},{key:"createInitializeState",value:function value(){return new Im(this)}},{key:"createLoadingState",value:function value(){return new Fm(this)}},{key:"createReadyState",value:function value(){return new xm(this)}},{key:"createDrawingState",value:function value(){return new km(this)}},{key:"createAttackingState",value:function value(){return new bm(this)}},{key:"createEscapeState",value:function value(){return new Em(this)}},{key:"createDeathState",value:function value(){return new Sm(this)}},{key:"createFinishState",value:function value(){return new _m(this)}}]),o}(D))||zm;d._RF.pop(),d._RF.push({},"9e40aEq56tMKLFoeACyl+eH","Clock",void 0);var $m,eg,tg,ng,Ga,wr,ig,ag,ZP=f.ccclass,QP=f.disallowMultiple,li=f.property,$P=(Gm=ZP("Clock"),Mm=li(Y),Um=li(b),Hm=li(oe),jm=li(b),Wm=li(b),qm=li(De),Gm(xa=QP((Km=h((Dn=function(l){E(o,l);var r=A(o);function o(){var e;S(this,o);for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return e=r.call.apply(r,[this].concat(n)),p(e,"timeText",Km,v(e)),p(e,"clockContainer",Vm,v(e)),p(e,"clockFill",Ym,v(e)),p(e,"successIcon",Jm,v(e)),p(e,"failIcon",Xm,v(e)),p(e,"animation",Zm,v(e)),e.time=0,e.remaining=0,e.running=!1,e.timeShake=0,e.remainingToShake=0,e.handleUpdateConfig=function(a){e.enabled&&e.setTime(a.WaitForPassSecs)},e}return k(o,[{key:"__preload",value:function value(){this.listenEvents()}},{key:"start",value:function value(){this.init(),this.setTime(6),this.setTimeToShake(1)}},{key:"init",value:function value(){this.remaining=0,this.running=!1,this.node.active=!1}},{key:"listenEvents",value:function value(){this.node.scene.on(we.GAMEPLAY_UPDATE_CONFIG,this.handleUpdateConfig)}},{key:"setTime",value:function value(e){this.time=e,this.timeText.string=Math.ceil(e).toString()}},{key:"setTimeToShake",value:function value(e){this.timeShake=e,this.remainingToShake=0}},{key:"startCountdown",value:function value(){this.running=!0,this.remaining=this.time,this.remainingToShake=this.timeShake,this.node.active=!0,this.failIcon.active=!1,this.successIcon.active=!1}},{key:"pause",value:function value(){this.running=!1}},{key:"resume",value:function value(){this.running=!0}},{key:"showUncompletedMark",value:function value(){this.failIcon.active=!0,j(this.failIcon).set({scale:new I(0,0,1)}).to(.5,{scale:new I(1,1,1)},{easing:"smooth"}).start()}},{key:"showCompletedMark",value:function value(){this.successIcon.active=!0,j(this.successIcon).set({scale:new I(0,0,1)}).to(.5,{scale:new I(1,1,1)},{easing:"smooth"}).start()}},{key:"endCountDown",value:function value(){this.running=!1,this.node.scene.emit(F.TIME_OUT)}},{key:"update",value:function value(e){this.running&&(this.remaining<=0?this.endCountDown():(this.remainingToShake<=0&&(this.playShakeAnimation(),this.remainingToShake=this.timeShake),this.remaining-=e,this.remainingToShake-=e,this.updateLabel(),this.clockFill.fillRange=this.remaining/this.time))}},{key:"updateLabel",value:function value(){var e=Math.ceil(this.remaining).toString();this.timeText.string=e}},{key:"playShakeAnimation",value:function value(){var e="Shake";this.animation.clips.some(function(t){return!(!t||t.name!==e)})&&this.animation.play(e)}}]),o}(D)).prototype,"timeText",[Mm],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Vm=h(Dn.prototype,"clockContainer",[Um],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ym=h(Dn.prototype,"clockFill",[Hm],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Jm=h(Dn.prototype,"successIcon",[jm],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Xm=h(Dn.prototype,"failIcon",[Wm],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Zm=h(Dn.prototype,"animation",[qm],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xa=Dn))||xa)||xa);d._RF.pop(),d._RF.push({},"7c115t9HKlH6ZfnhCnLAnpe","Star",void 0);var og,rg,sg,lg,ug,ji,hg,dg,pg,yg,e_=f.ccclass,vg=f.property,t_=f.requireComponent,Cr=($m=e_("Star"),eg=t_(De),tg=vg(D),ng=vg(De),$m(Ga=eg((ig=h((wr=function(l){E(o,l);var r=A(o);function o(){var e;S(this,o);for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return e=r.call.apply(r,[this].concat(n)),p(e,"starAppearance",ig,v(e)),p(e,"animation",ag,v(e)),e.isAppear=!1,e.initialPosition=new I,e}return k(o,[{key:"onLoad",value:function value(){this.initialPosition=this.node.position.clone(),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function value(){L.lazyValidateProperties(this)}},{key:"resetPosition",value:function value(){this.node.setPosition(this.initialPosition)}},{key:"show",value:function value(){this.starAppearance.node.active=!0,this.isAppear=!0}},{key:"hide",value:function value(){this.starAppearance.node.active=!1,this.isAppear=!1}},{key:"playAnimation",value:function value(){this.animation.stop(),this.animation.clips.some(function(e){return!(!e||"UpAndDown"!==e.name)})&&this.animation.play("UpAndDown")}},{key:"stopAnimation",value:function value(){this.animation.stop()}}]),o}(D)).prototype,"starAppearance",[tg],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ag=h(wr.prototype,"animation",[ng],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ga=wr))||Ga)||Ga);d._RF.pop(),d._RF.push({},"09f0bRvi+1OQZiIGBFqdNzq","LevelProgressBar",void 0);var fg,mg,gg,bg,Sg,kg,wg,Cg,tn,Ag,Tg,Rg,Pg,_g,Lg,Bg,n_=f.ccclass,Ma=f.property,i_=(og=n_("LevelProgressBar"),rg=Ma(Ro),sg=Ma(Cr),lg=Ma(Cr),ug=Ma(Cr),og((hg=h((ji=function(l){E(o,l);var r=A(o);function o(){var e;S(this,o);for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return e=r.call.apply(r,[this].concat(n)),p(e,"progressBar",hg,v(e)),p(e,"leftStar",dg,v(e)),p(e,"midStar",pg,v(e)),p(e,"rightStar",yg,v(e)),e.toProgress=1,e.progressStep=0,e}return k(o,[{key:"onLoad",value:function value(){this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function value(){L.lazyValidateProperties(this)}},{key:"start",value:function value(){this.toProgress=1,this.progressStep=0,this.runStartsAnimation()}},{key:"update",value:function value(){var e=this.progressBar.getComponent(oe);e&&(this.progressBar.progress>=1?e.type=oe.Type.SIMPLE:e.type=oe.Type.TILED),this.progressBar.progress-this.progressStep<this.toProgress?this.progressBar.progress!==this.toProgress&&(this.progressBar.progress=this.toProgress):this.progressBar.progress-=this.progressStep}},{key:"runStartsAnimation",value:function value(){this.leftStar.isAppear&&this.midStar.isAppear&&this.rightStar.isAppear||(this.leftStar.show(),this.midStar.show(),this.rightStar.show(),this.runStarAnimation(this.leftStar),this.runStarAnimation(this.midStar),this.runStarAnimation(this.rightStar))}},{key:"runStarAnimation",value:function value(e){e.resetPosition(),e.playAnimation()}},{key:"stopStarAnimation",value:function value(e){e.isAppear&&(e.hide(),e.stopAnimation(),e.resetPosition(),M.playSound(Q.LOST_STAR_IN_GAMEPLAY))}},{key:"setProgress",value:function value(e){this.toProgress=e/100,this.progressStep=(this.progressBar.progress-this.toProgress)/60*16}},{key:"setStars",value:function value(e){switch(e){case 1:this.stopStarAnimation(this.rightStar),this.stopStarAnimation(this.midStar);break;case 2:this.stopStarAnimation(this.rightStar);break;default:this.runStartsAnimation()}}},{key:"reset",value:function value(){this.progressBar.progress=1}}]),o}(D)).prototype,"progressBar",[rg],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),dg=h(ji.prototype,"leftStar",[sg],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pg=h(ji.prototype,"midStar",[lg],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yg=h(ji.prototype,"rightStar",[ug],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ji))||ji);d._RF.pop(),d._RF.push({},"61791zAr2tJR4p22EZ5QRfk","Header",void 0);var Dg,Og,Ig,Ng,Fg,zg,xg,Gg,Mg,Ug,Hg,jg,Wg,qg,Kg,Vg,Yg,Jg,Xg,Zg,Qg,$g,eb,tb,nb,ib,de,ob,rb,sb,lb,ub,cb,hb,db,pb,yb,vb,fb,mb,gb,bb,Sb,kb,wb,Cb,Eb,Ab,Tb,Rb,Pb,_b,a_=f.ccclass,On=f.property,Lb=codex,o_=Lb.language,r_=Lb.player,s_=(fg=a_("Header"),mg=On(Y),gg=On(i_),bg=On(_T),Sg=On(b),kg=On(b),wg=On(b),Cg=On(b),fg((Ag=h((tn=function(l){E(e,l);var r,o=A(e);function e(){var t;S(this,e);for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];return t=o.call.apply(o,[this].concat(i)),p(t,"levelText",Ag,v(t)),p(t,"levelProgressBar",Tg,v(t)),p(t,"hintBubbleAnim",Rg,v(t)),p(t,"pauseNode",Pg,v(t)),p(t,"replayNode",_g,v(t)),p(t,"hintNode",Lg,v(t)),p(t,"skipNode",Bg,v(t)),t.isHintFeatureEnabled=!0,t.isSkipFeatureEnabled=!0,t.handlePlayBubble=function(){t.hintBubbleAnim.play(),t.startCountDownHintBubble()},t}return k(e,[{key:"onLoad",value:function value(){this.validateRequiredComponents(),this.filterUIFeatures()}},{key:"validateRequiredComponents",value:function value(){L.lazyValidateProperties(this)}},{key:"filterUIFeatures",value:function value(){GameSDK.isGameSDK("YoutubePlayables")&&this.filterUIFeaturesForYoutubePlayables()}},{key:"handleClickedPauseGame",value:function value(){this.showSettingScreen(),this.node.scene.emit(F.GAME_PAUSE)}},{key:"handleClickedReplayGame",value:function value(){var t,n=(null!=(t=r_.getGameData())?t:{}).level;this.node.scene.emit(F.GAME_REPLAY,{level:void 0===n?1:n})}},{key:"handleClickedHintGame",value:function value(){this.node.scene.emit(F.SHOW_HINT)}},{key:"handleClickedSkipLevel",value:(r=B(function(){return _ts_generator(this,function(_state){return this.node.scene.emit(F.SKIP_LEVEL),[2]})}),function(){return r.apply(this,arguments)})},{key:"showSettingScreen",value:function value(){G.openScreen(re.SETTINGS_SCREEN,{})}},{key:"setLevelText",value:function value(t){var n=o_.getText("game.level");this.levelText.string="".concat(n," ").concat(t)}},{key:"setProgress",value:function value(t){this.levelProgressBar.setProgress(t)}},{key:"setProgressStars",value:function value(t){this.levelProgressBar.setStars(t)}},{key:"startCountDownHintBubble",value:function value(){this.schedule(this.handlePlayBubble,30)}},{key:"stopCountDownHintBubble",value:function value(){this.unschedule(this.handlePlayBubble)}},{key:"disableButtons",value:function value(){this.enableBtnNode(this.pauseNode,!1,!0),this.enableBtnNode(this.replayNode,!1,!0),this.enableBtnNode(this.hintNode,!1,!0),this.enableBtnNode(this.skipNode,!1,!0)}},{key:"enableButtonsReadyState",value:function value(){this.enableBtnNode(this.pauseNode,!0,!0),this.enableBtnNode(this.hintNode,!0,!0),this.enableBtnNode(this.skipNode,!0,!0)}},{key:"enableButtonsAttackingState",value:function value(){this.enableBtnNode(this.replayNode,!0,!0)}},{key:"disableRewardAdsButton",value:function value(){this.enableBtnNode(this.hintNode,!1,!1),this.enableBtnNode(this.skipNode,!1,!1)}},{key:"disableHintButton",value:function value(){this.enableBtnNode(this.hintNode,!1,!0)}},{key:"enableBtnNode",value:function value(t,n,i){if(this.isNodeAvailable(t)){var a=t.getComponent(se);if(a&&(a.interactable=n),t.active=i,i){var s=t.getComponent(Uo);s&&s.changeState(n)}}}},{key:"filterUIFeaturesForYoutubePlayables",value:function value(){this.hintNode.active=!1,this.skipNode.active=!1,this.isHintFeatureEnabled=!1,this.isSkipFeatureEnabled=!1}},{key:"isNodeAvailable",value:function value(t){switch(t){case this.hintNode:return this.isHintFeatureEnabled;case this.skipNode:return this.isSkipFeatureEnabled;default:return!0}}}]),e}(D)).prototype,"levelText",[mg],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Tg=h(tn.prototype,"levelProgressBar",[gg],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Rg=h(tn.prototype,"hintBubbleAnim",[bg],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Pg=h(tn.prototype,"pauseNode",[Sg],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_g=h(tn.prototype,"replayNode",[kg],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Lg=h(tn.prototype,"hintNode",[wg],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Bg=h(tn.prototype,"skipNode",[Cg],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),tn))||tn);d._RF.pop(),d._RF.push({},"151afQBVDpOYpTjtwP+wYH+","DevTools",void 0);var Bb,Db,Ob,Ib,Ua,Fb,zb,xb,l_=f.ccclass,ve=f.property,Gb=(Dg=l_("DevToolsContainer"),Og=ve(b),Ig=ve(b),Ng=ve(b),Fg=ve(b),zg=ve(b),xg=ve(b),Gg=ve(b),Mg=ve(b),Ug=ve(b),Hg=ve(b),jg=ve(b),Wg=ve(b),qg=ve(b),Kg=ve(b),Vg=ve(b),Yg=ve(b),Jg=ve(b),Xg=ve(b),Zg=ve(b),Qg=ve(b),$g=ve(b),eb=ve(b),tb=ve(b),nb=ve(b),ib=ve(b),Dg((ob=h((de=function(l){E(o,l);var r=A(o);function o(){var e;S(this,o);for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return e=r.call.apply(r,[this].concat(n)),p(e,"devToolsButton",ob,v(e)),p(e,"winLevelButton",rb,v(e)),p(e,"loseLevelButton",sb,v(e)),p(e,"buildVersionButton",lb,v(e)),p(e,"prevLevelButton",ub,v(e)),p(e,"nextLevelButton",cb,v(e)),p(e,"selectLevelButton",hb,v(e)),p(e,"hintButton",db,v(e)),p(e,"physicButton",pb,v(e)),p(e,"bundleButton",yb,v(e)),p(e,"beehiveButton",vb,v(e)),p(e,"dogeButton",fb,v(e)),p(e,"thornBallButton",mb,v(e)),p(e,"bigBeeButton",gb,v(e)),p(e,"thornButton",bb,v(e)),p(e,"airFanButton",Sb,v(e)),p(e,"brickButton",kb,v(e)),p(e,"grassButton",wb,v(e)),p(e,"grassDarkButton",Cb,v(e)),p(e,"lineButton",Eb,v(e)),p(e,"poisonButton",Ab,v(e)),p(e,"poisonSurfaceButton",Tb,v(e)),p(e,"waterButton",Rb,v(e)),p(e,"dangerAreaButton",Pb,v(e)),p(e,"dashboardButton",_b,v(e)),e.isActive=!0,e.gameplay=null,e.gameObjects=null,e.currentSpawnObjId=-1,e.handleClickDashboardButton=function(){Ve.switchToDashboardScene()},e.handleClickDevToolsButton=function(){e.isActive?(e.hideAllButtons(),e.isActive=!1):(e.showAllButtons(),e.isActive=!0)},e.handleClickPrevLevelButton=function(){var a=e.getCurrentLevel();a&&e.node.scene.emit(F.SELECT_LEVEL,{level:a-1})},e.handleClickNextLevelButton=function(){var a=e.getCurrentLevel();a&&e.node.scene.emit(F.SELECT_LEVEL,{level:a+1})},e.handleClickHintButton=function(){e.node.scene.emit(F.SHOW_HINT,{noAd:!0})},e.handleClickBuildVersionButton=function(){G.showNotificationScreen("Build version: Ludex")},e.handleClickPhysicButton=function(){var a=Vn.Aabb,s=Vn.Pair,u=Vn.CenterOfMass,c=Vn.Joint,y=Vn.Shape;Kn.instance.debugDrawFlags=a|s|u|c|y},e.handleClickWinLevelButton=function(){e.node.scene.emit(F.DOGE_SURVIVE)},e.handleClickLoseLevelButton=function(){e.node.scene.emit(F.DOGE_DIE)},e.handleClickBeehiveButton=function(){e.currentSpawnObjId=N.BEEHIVE_A,e.handleSpawnObject()},e.handleClickDogeButton=function(){e.currentSpawnObjId=N.DOGE_A,e.handleSpawnObject()},e.handleClickThornBallButton=function(){e.currentSpawnObjId=N.THORN_BALL,e.handleSpawnObject()},e.handleClickBigBeeButton=function(){e.currentSpawnObjId=N.BIG_BEE,e.handleSpawnObject()},e.handleClickThornButton=function(){e.currentSpawnObjId=N.THORN,e.handleSpawnObject()},e.handleClickAirFanButton=function(){e.currentSpawnObjId=N.AIR_FAN,e.handleSpawnObject()},e.handleClickBrickButton=function(){e.currentSpawnObjId=N.BRICK,e.handleSpawnPolygonObject()},e.handleClickGrassButton=function(){e.currentSpawnObjId=N.GRASS,e.handleSpawnPolygonObject()},e.handleClickGrassDarkButton=function(){e.currentSpawnObjId=N.GRASS_DARK,e.handleSpawnPolygonObject()},e.handleClickLineButton=function(){e.currentSpawnObjId=N.LINE,e.handleSpawnPolygonObject()},e.handleClickPoisonButton=function(){e.currentSpawnObjId=N.POISON,e.handleSpawnPolygonObject()},e.handleClickPoisonSurfaceButton=function(){e.currentSpawnObjId=N.POISON_SURFACE,e.handleSpawnPolygonObject()},e.handleClickWaterButton=function(){e.currentSpawnObjId=N.WATER,e.handleSpawnPolygonObject()},e.handleClickDangerAreaButton=function(){e.currentSpawnObjId=N.DANGER_AREA,e.handleSpawnPolygonObject()},e}return k(o,[{key:"start",value:function value(){this.handleToggleDevToolsButton(),this.handleGameLevelButtons(),this.handleItemButtons(),this.handleEngineButtons(),this.handleSpawnObjectButtons(),this.handleSwitchSceneButtons()}},{key:"handleToggleDevToolsButton",value:function value(){this.devToolsButton.on(b.EventType.TOUCH_START,this.handleClickDevToolsButton)}},{key:"handleGameLevelButtons",value:function value(){this.winLevelButton.on(b.EventType.TOUCH_START,this.handleClickWinLevelButton),this.loseLevelButton.on(b.EventType.TOUCH_START,this.handleClickLoseLevelButton),this.prevLevelButton.on(b.EventType.TOUCH_START,this.handleClickPrevLevelButton),this.nextLevelButton.on(b.EventType.TOUCH_START,this.handleClickNextLevelButton)}},{key:"handleItemButtons",value:function value(){this.hintButton.on(b.EventType.TOUCH_START,this.handleClickHintButton)}},{key:"handleEngineButtons",value:function value(){this.buildVersionButton.on(b.EventType.TOUCH_START,this.handleClickBuildVersionButton),this.physicButton.on(b.EventType.TOUCH_START,this.handleClickPhysicButton),this.bundleButton.on(b.EventType.TOUCH_START,this.handleSwitchBundle)}},{key:"handleSpawnObjectButtons",value:function value(){this.beehiveButton.on(b.EventType.TOUCH_START,this.handleClickBeehiveButton),this.dogeButton.on(b.EventType.TOUCH_START,this.handleClickDogeButton),this.thornBallButton.on(b.EventType.TOUCH_START,this.handleClickThornBallButton),this.bigBeeButton.on(b.EventType.TOUCH_START,this.handleClickBigBeeButton),this.thornButton.on(b.EventType.TOUCH_START,this.handleClickThornButton),this.airFanButton.on(b.EventType.TOUCH_START,this.handleClickAirFanButton),this.brickButton.on(b.EventType.TOUCH_START,this.handleClickBrickButton),this.grassButton.on(b.EventType.TOUCH_START,this.handleClickGrassButton),this.grassDarkButton.on(b.EventType.TOUCH_START,this.handleClickGrassDarkButton),this.lineButton.on(b.EventType.TOUCH_START,this.handleClickLineButton),this.poisonButton.on(b.EventType.TOUCH_START,this.handleClickPoisonButton),this.poisonSurfaceButton.on(b.EventType.TOUCH_START,this.handleClickPoisonSurfaceButton,this),this.waterButton.on(b.EventType.TOUCH_START,this.handleClickWaterButton),this.dangerAreaButton.on(b.EventType.TOUCH_START,this.handleClickDangerAreaButton)}},{key:"handleSwitchSceneButtons",value:function value(){this.dashboardButton.on(b.EventType.TOUCH_START,this.handleClickDashboardButton)}},{key:"injectGameplay",value:function value(e){this.gameplay=e,this.gameObjects=e.gameObjects}},{key:"hideAllButtons",value:function value(){var e=this;this.getComponentsInChildren(se).forEach(function(t){t.node.name!==e.devToolsButton.name&&(t.node.active=!1)})}},{key:"showAllButtons",value:function value(){var e=this;this.getComponentsInChildren(se).forEach(function(t){t.node.name!==e.devToolsButton.name&&(t.node.active=!0)})}},{key:"getCurrentLevel",value:function value(){if(!this.gameplay)return null;var e=this.gameplay.getGameData();return e&&e.level||null}},{key:"handleEnterSelectLevel",value:function value(e){var t=Number(e.string);this.node.scene.emit(F.SELECT_LEVEL,{level:t})}},{key:"handleSpawnObject",value:function value(){var e;if(this.validateRequiredComponents(),-1!==this.currentSpawnObjId){var n={id:this.currentSpawnObjId,point:{x:Math.floor(40*Math.random()),y:Math.floor(40*Math.random())}};null==(e=this.gameObjects)||e.spawnObjectForDevTools(n)}}},{key:"handleSpawnPolygonObject",value:function value(){var e;if(this.validateRequiredComponents(),-1!==this.currentSpawnObjId){var t={x:Math.floor(40*Math.random()),y:Math.floor(40*Math.random())},n={x:t.x+Math.floor(10*Math.random()),y:t.y},i={x:t.x,y:t.y+Math.floor(10*Math.random())},a=[t,n,i,{x:n.x,y:i.y}],s={id:this.currentSpawnObjId,point:a};null==(e=this.gameObjects)||e.spawnPolygonObjectForDevTools(s)}}},{key:"validateRequiredComponents",value:function value(){L.lazyValidateProperties(this)}},{key:"handleSwitchBundle",value:function value(){me.emit(we.REQUEST_UPGRADE_ASSET)}}]),o}(D)).prototype,"devToolsButton",[Og],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rb=h(de.prototype,"winLevelButton",[Ig],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),sb=h(de.prototype,"loseLevelButton",[Ng],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),lb=h(de.prototype,"buildVersionButton",[Fg],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ub=h(de.prototype,"prevLevelButton",[zg],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cb=h(de.prototype,"nextLevelButton",[xg],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),hb=h(de.prototype,"selectLevelButton",[Gg],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),db=h(de.prototype,"hintButton",[Mg],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pb=h(de.prototype,"physicButton",[Ug],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yb=h(de.prototype,"bundleButton",[Hg],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vb=h(de.prototype,"beehiveButton",[jg],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fb=h(de.prototype,"dogeButton",[Wg],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),mb=h(de.prototype,"thornBallButton",[qg],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gb=h(de.prototype,"bigBeeButton",[Kg],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bb=h(de.prototype,"thornButton",[Vg],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Sb=h(de.prototype,"airFanButton",[Yg],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),kb=h(de.prototype,"brickButton",[Jg],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),wb=h(de.prototype,"grassButton",[Xg],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Cb=h(de.prototype,"grassDarkButton",[Zg],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Eb=h(de.prototype,"lineButton",[Qg],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ab=h(de.prototype,"poisonButton",[$g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Tb=h(de.prototype,"poisonSurfaceButton",[eb],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Rb=h(de.prototype,"waterButton",[tb],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Pb=h(de.prototype,"dangerAreaButton",[nb],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_b=h(de.prototype,"dashboardButton",[ib],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),de))||de);d._RF.pop(),d._RF.push({},"a3b0f6zU+1D97PyszsgST1H","UIManager",void 0);var Mb,Ub,Hb,jb,Wb,qb,Ha,Wi,Kb,Vb,Yb,Jb,u_=f.ccclass,Er=f.property,c_=Ludex.Utils,h_=(Bb=u_("UIManager"),Db=Er($P),Ob=Er(s_),Ib=Er(Gb),Bb((Fb=h((Ua=function(l){E(o,l);var r=A(o);function o(){var e;S(this,o);for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return e=r.call.apply(r,[this].concat(n)),p(e,"clock",Fb,v(e)),p(e,"header",zb,v(e)),p(e,"devTools",xb,v(e)),e.showDevTools=function(){e.devTools&&(e.devTools.node.active=!0)},e}return k(o,[{key:"onLoad",value:function value(){this.validateRequiredComponents(),this.listensDevToolsEvents()}},{key:"validateRequiredComponents",value:function value(){L.lazyValidateProperties(this)}},{key:"listensDevToolsEvents",value:function value(){this.node.scene.on(gp.UNLOCK_DEV_TOOLS,this.showDevTools)}},{key:"initDevTools",value:function value(e){this.devTools&&(this.devTools.node.active=c_.Valid.isDebugger(),this.devTools.injectGameplay(e))}},{key:"setLevelText",value:function value(e){this.header.setLevelText(e)}},{key:"initCountdown",value:function value(){this.clock.init()}},{key:"startCountdown",value:function value(){this.clock.startCountdown()}},{key:"pauseCountdown",value:function value(){this.clock.pause()}},{key:"resumeCountdown",value:function value(){this.clock.resume()}},{key:"showUncompletedMark",value:function value(){this.clock.showUncompletedMark()}},{key:"showCompletedMark",value:function value(){this.clock.showCompletedMark()}},{key:"setProgressBarPercentage",value:function value(e){this.header.setProgress(e)}},{key:"setProgressStars",value:function value(e){this.header.setProgressStars(e)}},{key:"startCountDownHeaderHintBubbleAnim",value:function value(){this.header.startCountDownHintBubble()}},{key:"stopCountDownHeaderHintBubbleAnim",value:function value(){this.header.stopCountDownHintBubble()}},{key:"disableUI",value:function value(){this.header.disableButtons()}},{key:"enableUIReadyState",value:function value(){this.header.enableButtonsReadyState()}},{key:"enableUIAttackingState",value:function value(){this.header.enableButtonsAttackingState()}},{key:"disableHintButton",value:function value(){this.header.disableHintButton()}},{key:"disableRewardAdsUI",value:function value(){this.header.disableRewardAdsButton()}}]),o}(D)).prototype,"clock",[Db],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),zb=h(Ua.prototype,"header",[Ob],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xb=h(Ua.prototype,"devTools",[Ib],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return null}}),Ua))||Ua);d._RF.pop(),d._RF.push({},"157f203vjtMma2FDvAlyM6h","Gameplay",void 0);var p_=f.ccclass,y_=f.requireComponent,ja=f.property,Xb=codex,Wa=Xb.player,v_=(Xb.analytics,Mb=p_("Gameplay"),Ub=y_([Qm,gm,mm]),Hb=ja(DP),jb=ja(UP),Wb=ja(xP),qb=ja($t),Mb(Ha=Ub((Kb=h((Wi=function(l){E(o,l);var r=A(o);function o(){S(this,o);for(var e,a,a1,t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return(e=r.call.apply(r,[this].concat(n))).gameStartCount=0,p(e,"hint",Kb,v(e)),p(e,"gameMap",Vb,v(e)),p(e,"lineDrawer",Yb,v(e)),p(e,"gameObjects",Jb,v(e)),e.gameData=null,e.defaultData=null,e.handleStartGame=function(a){if(!a)throw Error("handleStartGame: GameEvent payload is not defined");e.setGameData(a),e.stateManager.draw()},e.handlePauseGame=function(a){e.pauseGame(),M.pauseSound(Q.BEE_FLYING),e.processCrazyGamesGameplayStop()},e.handleResumeGame=function(a){e.resumeGame(),M.resumeSound(Q.BEE_FLYING),e.processCrazyGamesGameplayStart()},e.handleReplayGame=function(a){var s=$($({},e.defaultData),a);e.setGameData(s),e.stateManager.initialize()},e.handleNextLevel=function(a){e.gameData&&(e.updatePlayerLevelProgress(a),e.stateManager.load(),e.attemptCallCreateShortcut())},e.updatePlayerLevelProgress=function(a){if(e.gameData){if(!a)throw Error("handleNextLevel: GameEvent payload is not defined");var s=e.gameData,u=s.level,c=s.nextLevelCount,m=a.level,w=void 0===m?u:m;if(!w)throw Error("Level is not defined");var _=w+1;Wa.setGameData({level:_});var g=$($($({},e.defaultData),a),{},{level:_,nextLevelCount:(void 0===c?0:c)+1});e.setGameData(g)}},e.handleStartOver=function(a){Wa.setGameData({level:1});var s=$($($({},e.defaultData),a),{},{level:1});e.setGameData(s),e.stateManager.load()},e.handleSelectLevel=function(a){if(!a)throw Error("handleSelectLevel: GameEvent payload is not defined");var s=a.level;if(s){var u=$($($({},e.defaultData),a),{},{level:s});Wa.setGameData({level:s}),e.setGameData(u),e.stateManager.load()}},e.handleClockTimeout=function(a){e.stateManager.escape()},e.handleDrawing=function(a){if(!a)throw Error("handleDrawing: GameEvent payload is not defined");e.setGameData(a)},e.handleBeeDie=function(a){var s;null!=(s=e.gameObjects)&&s.checkAllBeeDie()&&(e.stateManager.escape(),e.processCrazyGamesHappyTime())},e.handleBigBeeDie=function(a){var s;null!=(s=e.gameObjects)&&s.checkAllBeeDie()&&(e.stateManager.escape(),e.processCrazyGamesHappyTime())},e.handleBeeAttack=function(a){e.stateManager.attack()},e.handleDogeDie=function(a){e.stateManager.death()},e.handleDogeSurvive=function(a){e.stateManager.escape()},a=B(function(s){var u,c,y,m,w,_tmp,_,g,C;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(!((null==(u=e.hint)||!u.getIsHintShow())&&e.stateManager.isReady()))return[3,3];if(w=void 0!==(m=(null!=s?s:{}).noAd)&&m,e.uiManager.stopCountDownHeaderHintBubbleAnim(),!(_tmp=!w))return[3,2];return[4,he.showRewardVideoAdAsync()];case 1:_tmp=!_state.sent(),_state.label=2;case 2:if(_tmp)return[2];if(!(_=(null!=(c=e.gameData)?c:{}).levelData))throw Error("Level data is not defined");g=_.tips,C=be.transformPointsFromMapToDrawAreaCoordinate(g),null==(y=e.hint)||y.showHint(C,!1),_state.label=3;case 3:return[2]}})}),e.handleShowHint=function(s){return a.apply(this,arguments)},a1=B(function(s){return _ts_generator(this,function(_state){switch(_state.label){case 0:if(!e.stateManager.isReady())return[3,2];return[4,he.showRewardVideoAdAsync()];case 1:_state.sent()&&e.node.scene.emit(F.DOGE_SURVIVE),e.node.scene.emit(F.GAME_RESUME),_state.label=2;case 2:return[2]}})}),e.handleSkipLevel=function(s){return a1.apply(this,arguments)},e}return k(o,[{key:"__preload",value:function value(){this.initComponents(),this.validateRequiredComponents(),this.listenInputEvents(),he.showBannerAds(),Om.init()}},{key:"initComponents",value:function value(){this.initUIManager(),this.initStateManager(),this.initInputController(),this.initInkCapacityController()}},{key:"initUIManager",value:function value(){var e;this.uiManager=null==(e=this.node.parent)?void 0:e.getComponentInChildren(h_)}},{key:"initStateManager",value:function value(){this.stateManager=this.getComponent(Qm)}},{key:"initInputController",value:function value(){this.inputController=this.getComponent(gm)}},{key:"initInkCapacityController",value:function value(){this.inkCapacityController=this.getComponent(mm)}},{key:"validateRequiredComponents",value:function value(){L.lazyValidateProperties(this)}},{key:"listenInputEvents",value:function value(){this.node.scene.on(F.GAME_START,this.handleStartGame),this.node.scene.on(F.GAME_PAUSE,this.handlePauseGame),this.node.scene.on(F.GAME_RESUME,this.handleResumeGame),this.node.scene.on(F.GAME_REPLAY,this.handleReplayGame),this.node.scene.on(F.NEXT_LEVEL,this.handleNextLevel),this.node.scene.on(F.UPDATE_LEVEL,this.updatePlayerLevelProgress),this.node.scene.on(F.START_OVER,this.handleStartOver),this.node.scene.on(F.SELECT_LEVEL,this.handleSelectLevel),this.node.scene.on(F.TIME_OUT,this.handleClockTimeout),this.node.scene.on(F.DRAWING,this.handleDrawing),this.node.scene.on(F.BEE_DIE,this.handleBeeDie),this.node.scene.on(F.BIG_BEE_DIE,this.handleBigBeeDie),this.node.scene.on(F.BEE_ATTACK,this.handleBeeAttack),this.node.scene.on(F.DOGE_DIE,this.handleDogeDie),this.node.scene.on(F.DOGE_SURVIVE,this.handleDogeSurvive),this.node.scene.on(F.SHOW_HINT,this.handleShowHint),this.node.scene.on(F.SKIP_LEVEL,this.handleSkipLevel)}},{key:"start",value:function value(){this.initData(),this.initGame(),this.initDevTools()}},{key:"initDevTools",value:function value(){this.uiManager.initDevTools(this)}},{key:"initData",value:function value(){var e,t=(null!=(e=Wa.getGameData())?e:{}).level;this.defaultData={level:void 0===t?1:t,gameplayMode:"level",nextLevelCount:0,isFromLoader:!1},this.setGameData(this.defaultData)}},{key:"initGame",value:function value(){this.stateManager.init(),this.stateManager.load()}},{key:"setGameData",value:function value(e){e&&(this.gameData=$($({},this.gameData),e))}},{key:"getGameData",value:function value(){return this.gameData}},{key:"pauseGame",value:function value(){this.node.active=!1,this.node.pauseSystemEvents(!0),this.uiManager.pauseCountdown()}},{key:"resumeGame",value:function value(){this.node.active=!0,this.node.resumeSystemEvents(!0),this.uiManager.resumeCountdown()}},{key:"attemptCallCreateShortcut",value:function value(){var e,t=null!=(e=this.getGameData())?e:{},n=t.level,a=t.nextLevelCount;(void 0===n?0:n)<2||(void 0===a?0:a)<2||"checkAndCreateShortcutAsync"in GameSDK.extra&&GameSDK.extra.checkAndCreateShortcutAsync().catch(function(s){})}},{key:"processCrazyGamesGameplayStart",value:function value(){"gameplayStart"in GameSDK.extra&&GameSDK.extra.gameplayStart()}},{key:"processCrazyGamesGameplayStop",value:function value(){"gameplayStop"in GameSDK.extra&&GameSDK.extra.gameplayStop()}},{key:"processCrazyGamesHappyTime",value:function value(){"happyTime"in GameSDK.extra&&GameSDK.extra.happyTime()}},{key:"disableRewardAdsItemForCrazyGames",value:function value(){"CrazyGames"===GameSDK.getSDKName()&&this.uiManager.disableRewardAdsUI()}}]),o}(D)).prototype,"hint",[Hb],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Vb=h(Wi.prototype,"gameMap",[jb],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Yb=h(Wi.prototype,"lineDrawer",[Wb],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Jb=h(Wi.prototype,"gameObjects",[qb],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ha=Wi))||Ha)||Ha);d._RF.pop(),d._RF.push({},"bfd3fZcEttGVawFb2B3Gmqu","DangerArea",void 0),(0,f.ccclass)("DangerArea")(function(l){E(o,l);var r=A(o);function o(){var e;S(this,o);for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return(e=r.call.apply(r,[this].concat(n))).useBatch=!1,e.dangerPolygons=[],e}return k(o,[{key:"addDangerAreaPolygon",value:function value(e){this.dangerPolygons.push(e)}},{key:"addRigidBody",value:function value(){var e=this.node.addComponent(J);e&&(e.group=bt.MAIN_OBJECT,e.type=je.Static)}},{key:"applyColliderForBatchDraw",value:function value(){var e,t=this.dangerPolygons.map(function(c){return c.map(function(y){var m=y.x,w=y.y;return new x(m,w)})}),n=O(t);try{for(n.s();!(e=n.n()).done;){var i=e.value,a=new b;a.name=R.DANGER_AREA,this.node.addChild(a),a.setPosition(0,0);var s=a.addComponent(J);s.type=je.Static,s.group=bt.MAIN_OBJECT;var u=a.addComponent(Ne);u.points=i,u.apply()}}catch(c){n.e(c)}finally{n.f()}}},{key:"batchDrawAllDangerAreas",value:function value(){if(!(this.dangerPolygons.length<1)){var e=this.node.getComponent(_n);if(!e)return null;this.addRigidBody(),e.setColor("#fc03036d");var t,n=O(this.dangerPolygons);try{for(n.s();!(t=n.n()).done;){var i=t.value;e.draw(i)}}catch(a){n.e(a)}finally{n.f()}this.applyColliderForBatchDraw()}}}]),o}(D)),d._RF.pop(),d._RF.push({},"0daa9+mtbVHG5tVordU0a3q","Spider",void 0);var Zb,Qb,$b,e0,t0,n0,i0,In,a0,o0,r0,s0,l0,u0,c0,h0,d0,Ar,y0,v0,m_=f.ccclass,ui=f.property;Zb=m_("Spider"),Qb=ui(b),$b=ui(b),e0=ui(b),t0=ui(Qe),n0=ui(J),i0=ui(ne),Zb((a0=h((In=function(l){E(o,l);var r=A(o);function o(){var e;S(this,o);for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return e=r.call.apply(r,[this].concat(n)),p(e,"spider",a0,v(e)),p(e,"web",o0,v(e)),p(e,"silk",r0,v(e)),e.isStunned=!1,p(e,"spiderCollider",s0,v(e)),p(e,"spiderRigidBody",l0,v(e)),p(e,"silkGraphics",u0,v(e)),e.onSpiderCollisionEnter=function(a,s){if(!e.isStunned){e.isStunned=!0,e.spiderRigidBody.linearVelocity=new x(0,0);var u=e.isLineCollision(s),c=e.isDogeCollision(s);if(u||c){var y=s.node,m=e.spider.addComponent(ns),w=e.spider.worldPosition,_=y.getComponent(J);if(u)m.connectedAnchor=s.offset.clone();else{var g=y.worldPosition;m.connectedAnchor=new x(w.x-g.x,w.y-g.y)}m.connectedBody=_,m.autoCalcDistance=!1,m.maxLength=5,m.collideConnected=!1}}},e}return k(o,[{key:"onLoad",value:function value(){this.spiderCollider=this.spider.getComponent(Qe),this.spiderRigidBody=this.spider.getComponent(J),this.silkGraphics=this.silk.getComponent(ne),this.validateRequiredComponents()}},{key:"onDestroy",value:function value(){this.spiderCollider.off(At.BEGIN_CONTACT,this.onSpiderCollisionEnter)}},{key:"validateRequiredComponents",value:function value(){L.lazyValidateProperties(this)}},{key:"start",value:function value(){this.enabled=!1,this.isStunned=!1,this.silkOffsetVector=new x,this.spiderCollider.on(At.BEGIN_CONTACT,this.onSpiderCollisionEnter)}},{key:"update",value:function value(){if(this.enabled)if(this.drawSilk(),this.isStunned){var e=this.getVectorDataFromAToB(this.spider.worldPosition,this.web.worldPosition);this.spiderRigidBody.linearVelocity=e.vector.multiplyScalar(5),this.spiderRigidBody.linearDamping=0,this.isSpiderTooCloseToWeb()&&(this.spiderRigidBody.type=je.Static,this.enabled=!1)}else{if(-3===this.spiderRigidBody.linearVelocity.y)return;this.spiderRigidBody.linearVelocity=new x(0,-3)}}},{key:"drawSilk",value:function value(){var e=this.web.position,t=this.spider.position,n=U.toRadian(this.spider.eulerAngles.z);this.silkGraphics.clear(),this.silkGraphics.moveTo(e.x,e.y),this.silkOffsetVector.set(0,50).rotate(n),this.silkGraphics.lineTo(t.x+this.silkOffsetVector.x,t.y+this.silkOffsetVector.y),this.silkGraphics.stroke()}},{key:"isSpiderTooCloseToWeb",value:function value(){var e=this.spider.position,t=this.web.position;return 40>I.distance(e,t)}},{key:"isLineCollision",value:function value(e){var t=e.node;return t&&t.getComponent(ai)||!1}},{key:"isDogeCollision",value:function value(e){var t=e.node;return t&&t.getComponent(Qt)||!1}}]),o}(ze)).prototype,"spider",[Qb],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),o0=h(In.prototype,"web",[$b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),r0=h(In.prototype,"silk",[e0],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),s0=h(In.prototype,"spiderCollider",[t0],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),l0=h(In.prototype,"spiderRigidBody",[n0],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),u0=h(In.prototype,"silkGraphics",[i0],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),In)),d._RF.pop(),d._RF.push({},"8fe7bkzdtdNfY7I8uaDov+b","EndlessHeader",void 0);var f0,m0,g0,b0,S0,qa,qi,k0,w0,C0,E0,g_=f.ccclass,A0=f.property,b_=(c0=g_("EndlessHeader"),h0=A0(b),d0=A0(b),c0((y0=h((Ar=function(l){E(o,l);var r=A(o);function o(){var e;S(this,o);for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return e=r.call.apply(r,[this].concat(n)),p(e,"pauseNode",y0,v(e)),p(e,"replayNode",v0,v(e)),e}return k(o,[{key:"__preload",value:function value(){this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function value(){L.lazyValidateProperties(this)}},{key:"handleClickedPauseGame",value:function value(){this.showSettingScreen(),this.node.scene.emit(F.GAME_PAUSE)}},{key:"handleClickedReplayGame",value:function value(){this.node.scene.emit(F.GAME_REPLAY)}},{key:"showSettingScreen",value:function value(){G.openScreen(re.SETTINGS_SCREEN,{})}},{key:"disableButtons",value:function value(){this.enableBtnNode(this.pauseNode,!1,!0),this.enableBtnNode(this.replayNode,!1,!0)}},{key:"enableButtons",value:function value(){this.enableBtnNode(this.pauseNode,!0,!0),this.enableBtnNode(this.replayNode,!0,!0)}},{key:"enableBtnNode",value:function value(e,t,n){var i=e.getComponent(se);if(i&&(i.interactable=t),e.active=n,n){var a=e.getComponent(Uo);a&&a.changeState(t)}}}]),o}(D)).prototype,"pauseNode",[h0],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v0=h(Ar.prototype,"replayNode",[d0],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ar))||Ar);d._RF.pop(),d._RF.push({},"bc951s11zREU72nQBqwoD3m","EndlessClock",void 0);var T0,R0,P0,_0,L0,Ki,D0,O0,I0,N0,S_=f.ccclass,k_=f.disallowMultiple,Ka=f.property,w_=(f0=S_("EndlessClock"),m0=Ka(Y),g0=Ka(Y),b0=Ka(De),S0=Ka(oe),f0(qa=k_((k0=h((qi=function(l){E(o,l);var r=A(o);function o(){var e;S(this,o);for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return e=r.call.apply(r,[this].concat(n)),p(e,"timeText",k0,v(e)),p(e,"bestTimeText",w0,v(e)),p(e,"animation",C0,v(e)),p(e,"clockFill",E0,v(e)),e.elapsedTime=0,e.bestTime=0,e.running=!1,e}return k(o,[{key:"__preload",value:function value(){this.validateRequiredComponents()}},{key:"start",value:function value(){this.animation.stop(),this.clockFill.fillRange=0}},{key:"validateRequiredComponents",value:function value(){L.lazyValidateProperties(this)}},{key:"getScore",value:function value(){return this.elapsedTime}},{key:"getBestScore",value:function value(){return Math.max(this.bestTime,this.elapsedTime)}},{key:"setBestScore",value:function value(e){this.bestTime=e;var t=Math.floor(e/60),n=Math.floor(e%60),i=t.toString().padStart(2,"0"),a=n.toString().padStart(2,"0");this.bestTimeText.string="".concat(i,":").concat(a)}},{key:"init",value:function value(){this.running=!1,this.node.active=!0,this.animation.stop(),this.clockFill.fillRange=0,this.setElapsedTime(0),this.setBestScore(this.bestTime)}},{key:"startCounting",value:function value(){this.running=!0,this.node.active=!0,this.animation.play(),this.setElapsedTime(0),this.setBestScore(this.bestTime)}},{key:"stopCounting",value:function value(){this.running=!1,this.node.active=!1,this.animation.stop(),this.clockFill.fillRange=0}},{key:"pause",value:function value(){this.running=!1,this.animation.pause()}},{key:"resume",value:function value(){this.running=!0,this.animation.play()}},{key:"update",value:function value(e){this.running&&this.setElapsedTime(this.elapsedTime+e)}},{key:"setElapsedTime",value:function value(e){this.elapsedTime=e;var t=Math.floor(this.elapsedTime/60),n=Math.floor(this.elapsedTime%60),i=t.toString().padStart(2,"0"),a=n.toString().padStart(2,"0");this.timeText.string="".concat(i,":").concat(a),this.elapsedTime>this.bestTime&&this.setBestScore(this.elapsedTime)}}]),o}(D)).prototype,"timeText",[m0],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w0=h(qi.prototype,"bestTimeText",[g0],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C0=h(qi.prototype,"animation",[b0],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E0=h(qi.prototype,"clockFill",[S0],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),qa=qi))||qa)||qa);d._RF.pop(),d._RF.push({},"346956Nk9hPgpT3ZCsaVr+P","EndlessUIManager",void 0);var F0,z0,x0,G0,M0,U0,H0,j0,Va,Nn,W0,q0,K0,V0,Y0,J0,C_=f.ccclass,Ya=f.property,E_=Ludex.Utils,A_=(T0=C_("EndlessUIManager"),R0=Ya(w_),P0=Ya(b_),_0=Ya(Gb),L0=Ya(b),T0((D0=h((Ki=function(l){E(o,l);var r=A(o);function o(){var e;S(this,o);for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return e=r.call.apply(r,[this].concat(n)),p(e,"clock",D0,v(e)),p(e,"header",O0,v(e)),p(e,"devTools",I0,v(e)),p(e,"tapToStartText",N0,v(e)),e.showDevTools=function(){e.devTools&&(e.devTools.node.active=!0)},e}return k(o,[{key:"onLoad",value:function value(){this.validateRequiredComponents(),this.listensDevToolsEvents()}},{key:"validateRequiredComponents",value:function value(){L.lazyValidateProperties(this)}},{key:"listensDevToolsEvents",value:function value(){this.node.scene.on(gp.UNLOCK_DEV_TOOLS,this.showDevTools)}},{key:"initDevTools",value:function value(e){this.devTools&&(this.devTools.node.active=E_.Valid.isDebugger(),this.devTools.injectGameplay(e))}},{key:"getBestScore",value:function value(){return this.clock.getBestScore()}},{key:"setBestScore",value:function value(e){this.clock.setBestScore(e)}},{key:"initCounting",value:function value(){this.clock.init()}},{key:"startCounting",value:function value(){this.clock.startCounting()}},{key:"stopCounting",value:function value(){this.clock.stopCounting()}},{key:"pauseCounting",value:function value(){this.clock.pause()}},{key:"resumeCounting",value:function value(){this.clock.resume()}},{key:"disableUI",value:function value(){this.header.disableButtons()}},{key:"enableUI",value:function value(){this.header.enableButtons()}},{key:"showTapToStartText",value:function value(){this.tapToStartText.active=!0;var e=this.tapToStartText.getComponent(W);e.opacity=255,j(e).to(.5,{opacity:0},{easing:"smooth"}).to(.5,{opacity:255},{easing:"smooth"}).union().repeatForever().start()}},{key:"hideTapToStartText",value:function value(){var e=this.tapToStartText.getComponent(W);Ci.stopAllByTarget(e),Ci.stopAllByTarget(this.tapToStartText),this.tapToStartText.active=!1}}]),o}(D)).prototype,"clock",[R0],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O0=h(Ki.prototype,"header",[P0],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I0=h(Ki.prototype,"devTools",[_0],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return null}}),N0=h(Ki.prototype,"tapToStartText",[L0],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ki))||Ki);d._RF.pop(),d._RF.push({},"9d32c879Q1FRIas0BgO+iNP","EndlessGameplay",void 0);var T_=f.ccclass,ci=f.property,R_=f.requireComponent,P_=codex.player,__=(F0=T_("EndlessGameplay"),z0=R_(Ee),x0=ci({type:fe,group:"Thorns"}),G0=ci({type:b,group:"Thorns"}),M0=ci({type:b,group:"Thorns"}),U0=ci({type:b,group:"Thorns"}),H0=ci({type:b,group:"Thorns"}),j0=ci($t),F0(Va=z0((W0=h((Nn=function(l){E(o,l);var r=A(o);function o(){var e;S(this,o);for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return(e=r.call.apply(r,[this].concat(n))).gameData=null,e.defaultData=null,p(e,"thornPrefab",W0,v(e)),p(e,"bottomThorns",q0,v(e)),p(e,"topThorns",K0,v(e)),p(e,"leftThorns",V0,v(e)),p(e,"rightThorns",Y0,v(e)),p(e,"gameObjects",J0,v(e)),e.handleStartGame=function(a){if(!a)throw Error("handleStartGame: GameEvent payload is not defined");e.setGameData(a),e.stateManager.play()},e.handlePauseGame=function(a){e.pauseGame(),M.pauseSound(Q.BEE_FLYING),e.processCrazyGamesGameplayStop()},e.handleResumeGame=function(a){e.resumeGame(),M.resumeSound(Q.BEE_FLYING),e.processCrazyGamesGameplayStart()},e.handleReplayGame=function(a){var s=$($({},e.gameData),a);e.setGameData(s),e.stateManager.initialize(),e.uiManager.showTapToStartText(),e.node.active=!0,e.node.resumeSystemEvents(!0)},e.handleDogeDie=function(){e.stateManager.death(),e.attemptCallCreateShortcut()},e.handleBeeDie=function(a){var s;null!=(s=e.gameObjects)&&s.checkAllBeeDie()&&e.processCrazyGamesHappyTime()},e.handleBigBeeDie=function(a){var s;null!=(s=e.gameObjects)&&s.checkAllBeeDie()&&e.processCrazyGamesHappyTime()},e.handleHideTapToPlayText=function(){e.uiManager.hideTapToStartText()},e}return k(o,[{key:"__preload",value:function value(){this.initComponents(),this.uiTransform=this.getComponent(Ee),this.validateRequiredComponents(),this.listenInputEvents(),he.showBannerAds()}},{key:"initComponents",value:function value(){this.initUIManager(),this.initStateManager()}},{key:"initUIManager",value:function value(){var e;this.uiManager=null==(e=this.node.parent)?void 0:e.getComponentInChildren(A_)}},{key:"initStateManager",value:function value(){this.stateManager=this.getComponent(N_)}},{key:"validateRequiredComponents",value:function value(){L.lazyValidateProperties(this)}},{key:"listenInputEvents",value:function value(){this.node.scene.on(F.GAME_START,this.handleStartGame),this.node.scene.on(F.GAME_PAUSE,this.handlePauseGame),this.node.scene.on(F.GAME_RESUME,this.handleResumeGame),this.node.scene.on(F.GAME_REPLAY,this.handleReplayGame),this.node.scene.on(F.BEE_DIE,this.handleBeeDie),this.node.scene.on(F.BIG_BEE_DIE,this.handleBigBeeDie),this.node.scene.on(F.DOGE_DIE,this.handleDogeDie)}},{key:"start",value:function value(){this.initData(),this.initGame(),this.initObjects(),this.initDevTools(),this.uiManager.startCounting(),this.uiManager.showTapToStartText()}},{key:"initDevTools",value:function value(){this.uiManager.initDevTools(this)}},{key:"initData",value:function value(){var e,t=null!=(e=P_.getGameData())?e:{},n=t.level,a=t.bestEndlessScore;this.defaultData={level:void 0===n?1:n,bestEndlessScore:void 0===a?0:a,gameplayMode:"endless",nextLevelCount:0,isFromLoader:!1},this.setGameData(this.defaultData)}},{key:"initGame",value:function value(){this.stateManager.init(),this.stateManager.load()}},{key:"setGameData",value:function value(e){e&&(this.gameData=$($({},this.gameData),e))}},{key:"getGameData",value:function value(){return this.gameData}},{key:"pauseGame",value:function value(){this.node.active=!1,this.node.pauseSystemEvents(!0),this.uiManager.pauseCounting()}},{key:"resumeGame",value:function value(){this.node.active=!0,this.node.resumeSystemEvents(!0),this.uiManager.resumeCounting()}},{key:"attemptCallCreateShortcut",value:function value(){var e,t=null!=(e=this.gameData)?e:{},n=t.level,a=t.nextLevelCount;(void 0===n?0:n)<2||(void 0===a?0:a)<2||"checkAndCreateShortcutAsync"in GameSDK.extra&&GameSDK.extra.checkAndCreateShortcutAsync().catch(function(s){})}},{key:"initObjects",value:function value(){var e=this.createThorn();if(!_instanceof(e,b))throw Error("initObjects: Could not create thorn");var t=e.getComponent(Ee);if(!_instanceof(t,Ee))throw Error("initObjects: Could not get UITransform of thorn");for(var n=this.uiTransform.getBoundingBoxToWorld(),i=n.width,a=n.height,s=Math.ceil(i/t.width),u=Math.ceil(a/t.height),c=0;c<s;c++)this.topThorns.addChild(this.createThorn()),this.bottomThorns.addChild(this.createThorn());for(var y=0;y<u;y++)this.leftThorns.addChild(this.createThorn()),this.rightThorns.addChild(this.createThorn());this.rightThorns.addChild(e)}},{key:"getBoundingBox",value:function value(){return this.uiTransform.getBoundingBoxToWorld()}},{key:"getDogeSpawnPosition",value:function value(){var e=this.uiTransform.getBoundingBoxToWorld().center;return[e.x,e.y]}},{key:"createThorn",value:function value(){var e=ee(this.thornPrefab);return e.name=R.THORN,e}},{key:"processCrazyGamesGameplayStart",value:function value(){"gameplayStart"in GameSDK.extra&&GameSDK.extra.gameplayStart()}},{key:"processCrazyGamesGameplayStop",value:function value(){"gameplayStop"in GameSDK.extra&&GameSDK.extra.gameplayStop()}},{key:"processCrazyGamesHappyTime",value:function value(){"happyTime"in GameSDK.extra&&GameSDK.extra.happyTime()}}]),o}(D)).prototype,"thornPrefab",[x0],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),q0=h(Nn.prototype,"bottomThorns",[G0],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),K0=h(Nn.prototype,"topThorns",[M0],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),V0=h(Nn.prototype,"leftThorns",[U0],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Y0=h(Nn.prototype,"rightThorns",[H0],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),J0=h(Nn.prototype,"gameObjects",[j0],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Va=Nn))||Va)||Va);d._RF.pop(),d._RF.push({},"43aefNoI9lJxJNh3LPuKYPt","BaseState",void 0);var hi=function(){function l(r){if(S(this,l),this.game=null,this.data={},this.game=r.node.getComponent(__),!this.game)throw Error("Gameplay component not found");this.manager=r,this.updateStateData(),this.logDebug()}return k(l,[{key:"logDebug",value:function value(){this.constructor.name}},{key:"updateStateData",value:function value(){if(this.game){var r=this.game.getGameData();r&&(this.data=r)}}},{key:"updateGameData",value:function value(r){var o;null==(o=this.game)||o.setGameData(r),this.updateStateData()}}]),l}();d._RF.pop(),d._RF.push({},"109f0WH9r9IQqMHpvD45PzQ","DeathState",void 0);var L_=codex.analytics,X0=function(l){E(o,l);var r=A(o);function o(e){var t,n,i;return S(this,o),(i=r.call(this,e)).processCrazyGamesEvent(),i.disableUI(),M.stopAllSounds(),i.vibrateDevice(),i.pauseCountdown(),i.logLevelFailAnalytics(),null==(t=i.game)||t.scheduleOnce(function(){i.stopDogesLooking(),M.playSound(Q.LEVEL_FAIL,{volume:.3})},.5),null==(n=i.game)||n.scheduleOnce(function(){i.sleepObjects(),i.showLoseScreen(),i.manager.finish()},1.8),i}return k(o,[{key:"processCrazyGamesEvent",value:function value(){"gameplayStop"in GameSDK.extra&&GameSDK.extra.gameplayStop()}},{key:"load",value:function value(){}},{key:"initialize",value:function value(){}},{key:"ready",value:function value(){}},{key:"play",value:function value(){}},{key:"death",value:function value(){}},{key:"finish",value:function value(){var e=this.manager.createFinishState();this.manager.change(e)}},{key:"update",value:function value(){}},{key:"disableUI",value:function value(){var e;null==(e=this.game)||e.uiManager.disableUI()}},{key:"sleepObjects",value:function value(){var e;null==(e=this.game)||null==(e=e.gameObjects)||e.sleepObjects()}},{key:"pauseCountdown",value:function value(){var e;null==(e=this.game)||e.uiManager.pauseCounting()}},{key:"stopDogesLooking",value:function value(){var e;if(null!=(e=this.game)&&e.gameObjects){var t,n=this.game.gameObjects.getComponentsInChildren(Qt),i=O(n);try{for(i.s();!(t=i.n()).done;){var a,s=t.value;null==(a=s.eyes)||a.stopLook(),s.setEnable(!1)}}catch(u){i.e(u)}finally{i.f()}}}},{key:"vibrateDevice",value:function value(){var e;null==(e=Ze("Vibrate"))||null==(e=e.getComponent(rr))||e.vibrate(500)}},{key:"showLoseScreen",value:function value(){var e=this.data.level;G.openScreen(re.LOSE_SCREEN,{level:e})}},{key:"logLevelFailAnalytics",value:function value(){L_.levelComplete(1,0,_p)}}]),o}(hi);d._RF.pop(),d._RF.push({},"638devCm49MrpqRRWptDInp","FinishState",void 0);var Z0=codex.player,Q0=function(l){E(e,l);var r,o=A(e);function e(t){var n;return S(this,e),n=o.call(this,t),M.turnUpMusic(),M.stopSound(Q.BEE_FLYING),n.finishGameAsync(),n}return k(e,[{key:"load",value:function value(){var t=this.manager.createLoadingState();this.manager.change(t)}},{key:"initialize",value:function value(){var t=this.manager.createInitializeState();this.manager.change(t)}},{key:"ready",value:function value(){}},{key:"play",value:function value(){}},{key:"death",value:function value(){}},{key:"finish",value:function value(){}},{key:"update",value:function value(){}},{key:"finishGameAsync",value:(r=B(function(){var t,n,i,a,s;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(_state.trys.push([0,2,,3]),!this.game)return[2];return i=this.game.uiManager.getBestScore(),s=(a=null!=(t=null==(n=Z0.getGameData())?void 0:n.bestEndlessScore)?t:0)<i?i:a,Z0.setGameData({bestEndlessScore:s}),this.updateGameData({bestEndlessScore:s}),[4,Hi.finishMatchAsync()];case 1:case 2:return _state.sent(),[3,3];case 3:return[2]}})}),function(){return r.apply(this,arguments)})}]),e}(hi);d._RF.pop(),d._RF.push({},"97260ZJNotE0LYFeNm4wsEz","InitializeState",void 0);var $0=function(l){E(t,l);var r,o,e=A(t);function t(n){var i;return S(this,t),i=e.call(this,n),"CrazyGames"===GameSDK.getSDKName()&&i.processCrazyGamesRequirements(),i.disableUI(),i.clearGameObjects(),i.createGameObjects(),i.initClock(),M.playMusic(Q.BG_MUSIC),i.startGameAsync().then(function(){i.closeLoadingScreen(),i.manager.ready()}),i}return k(t,[{key:"processCrazyGamesRequirements",value:function value(){"gameplayStart"in GameSDK.extra&&GameSDK.extra.gameplayStart(),this.showInterAdsCrazyGames()}},{key:"showInterAdsCrazyGames",value:(o=B(function(){return _ts_generator(this,function(_state){switch(_state.label){case 0:if(!this.game)return[3,2];return M.stopAllSounds(),[4,he.showInterstitialAdAsync({forLevel:this.data.level,includeSDK:["CrazyGames"]})];case 1:_state.sent(),M.turnUpMusic(),_state.label=2;case 2:return[2]}})}),function(){return o.apply(this,arguments)})},{key:"load",value:function value(){if(Ludex.Utils.Valid.isDebugger()){var n=this.manager.createLoadingState();this.manager.change(n)}}},{key:"initialize",value:function value(){}},{key:"ready",value:function value(){var n=this.manager.createReadyState();this.manager.change(n)}},{key:"play",value:function value(){}},{key:"death",value:function value(){var n=this.manager.createDeathState();this.manager.change(n)}},{key:"finish",value:function value(){}},{key:"update",value:function value(){}},{key:"closeLoadingScreen",value:function value(){G.closeScreen(re.LOADING_SCREEN)}},{key:"disableUI",value:function value(){var n;null==(n=this.game)||n.uiManager.disableUI()}},{key:"clearGameObjects",value:function value(){var n;null!=(n=this.game)&&n.gameObjects&&this.game.gameObjects.clearObjects()}},{key:"createGameObjects",value:function value(){var n,i,a,s=null!=(n=null==(i=this.game)?void 0:i.getDogeSpawnPosition())?n:[0,0],u=Hn(s,2),c=u[0],y=u[1],m=null==(a=this.game)?void 0:a.gameObjects.spawnDoge({x:c,y:y,right:!1,isWorldPosition:!0,rigidBodyConfig:{gravityScale:2}});if(!_instanceof(m,b))throw Error("Could not create doge");var w=m.getComponent(J);if(!w)throw Error("Could not get rigidBody");w.sleep()}},{key:"initClock",value:function value(){null==(n=this.game)||n.uiManager.initCounting();var n,i,a=this.data.bestEndlessScore;null==(i=this.game)||i.uiManager.setBestScore(void 0===a?0:a)}},{key:"startGameAsync",value:(r=B(function(){return _ts_generator(this,function(_state){switch(_state.label){case 0:if(_state.trys.push([0,2,,3]),this.data.isFromLoader)return[2,void this.updateGameData({isFromLoader:!1})];return[4,Hi.startMatchAsync()];case 1:case 2:return _state.sent(),[3,3];case 3:return[2]}})}),function(){return r.apply(this,arguments)})}]),t}(hi);d._RF.pop(),d._RF.push({},"ecbe0PxfZNJBLsmLBPc2pBD","LoadingState",void 0);var B_=codex.player,eS=function(l){E(o,l);var r=A(o);function o(e){S(this,o),a=r.call(this,e);var t,n,i,a,s=null!=(t=null==(n=B_.getGameData())?void 0:n.bestEndlessScore)?t:0;return a.updateGameData({bestEndlessScore:s}),G.showLoadingScreen(),null==(i=a.game)||i.scheduleOnce(function(){a.initialize()},.5),a}return k(o,[{key:"load",value:function value(){}},{key:"initialize",value:function value(){var e=this.manager.createInitializeState();this.manager.change(e)}},{key:"ready",value:function value(){}},{key:"play",value:function value(){}},{key:"death",value:function value(){}},{key:"finish",value:function value(){}},{key:"update",value:function value(){}}]),o}(hi);d._RF.pop(),d._RF.push({},"651d4HD0HpFPLrL8dycqU3R","PlayingState",void 0);var D_=codex.player;function O_(){var l=Object.keys(wp).map(function(o){return parseInt(o)}).sort(function(o,e){return o-e}),r=0;return{current:function current(){var o;return null!=(o=l[r])?o:0},canGoNext:function canGoNext(o){var e=r+1;if(e>=l.length)return!1;var t=l[e];return!!t&&o>t},next:function next(){var o;if(r>=l.length-1)throw Error("No more progressions");return null!=(o=l[r++])?o:0}}}var tS=function(l){E(o,l);var r=A(o);function o(e){var t;return S(this,o),(t=r.call(this,e)).totalElapsed=0,t.spawnElapsed=0,t.spawnInterval=2,t.flyForce=18,t.progressionIt=O_(),t.onTouchStart=function(){t.dogeRigidBody.linearVelocity=new x(0,t.flyForce)},t.findDoge(),t.wakeUpObjects(),t.spawnEnemies(),t.startCounting(),M.turnDownMusic(),t.listenInputEvents(),t}return k(o,[{key:"listenInputEvents",value:function value(){var e,t;ce.os===ce.OS.WINDOWS||ce.os===ce.OS.OSX?(document.addEventListener("pointerdown",this.onTouchStart),null==(e=this.game)||e.node.on(b.EventType.MOUSE_DOWN,this.onTouchStart)):null==(t=this.game)||t.node.on(b.EventType.TOUCH_START,this.onTouchStart)}},{key:"unlistenInputEvents",value:function value(){var e,t;ce.os===ce.OS.WINDOWS||ce.os===ce.OS.OSX?(document.removeEventListener("pointerdown",this.onTouchStart),null==(e=this.game)||e.node.off(b.EventType.MOUSE_DOWN,this.onTouchStart)):null==(t=this.game)||t.node.off(b.EventType.TOUCH_START,this.onTouchStart)}},{key:"findDoge",value:function value(){var e,t=null==(e=this.game)||null==(e=e.gameObjects)?void 0:e.getRandomDogeToBee();if(!t)throw Error("No doge found in GameObjects");this.doge=t;var n=this.doge.getComponent(J);if(!n)throw Error("No rigid body found in doge");this.dogeRigidBody=n}},{key:"load",value:function value(){this.unlistenInputEvents();var e=this.manager.createLoadingState();this.manager.change(e)}},{key:"initialize",value:function value(){this.unlistenInputEvents(),M.stopSound(Q.BEE_FLYING);var e=this.manager.createInitializeState();this.manager.change(e)}},{key:"ready",value:function value(){}},{key:"play",value:function value(){}},{key:"death",value:function value(){this.unlistenInputEvents();var e=this.manager.createDeathState();this.manager.change(e)}},{key:"finish",value:function value(){}},{key:"update",value:function value(e){if(this.spawnElapsed+=e,this.totalElapsed+=e,this.progressionIt.canGoNext(this.totalElapsed)&&(this.progressionIt.next(),this.updateProgressionToPlugin()),this.spawnElapsed>this.spawnInterval){var n=wp[this.progressionIt.current()];n&&(this.handleSpawn(n),this.spawnElapsed=0)}}},{key:"updateProgressionToPlugin",value:function value(){var e;Hi.setProfileMatchDataAsync({id:D_.getPlayerId(),endlessScore:Math.round(null!=(e=this.data.bestEndlessScore)?e:0)})}},{key:"handleSpawn",value:function value(e){if(!this.game)throw Error("Game is not defined");var t=this.game.getBoundingBox(),n=0===U.randomRangeInt(0,2)?t.xMin-0:t.xMax+0,i=this.doge.node.worldPosition.y+U.randomRangeInt(-100,100),a=this.doge.node.getWorldPosition(),s=a.x,u=a.y,c=new I(n,i,0),y=c.x+2*(s-c.x),m=c.y+2*(u-c.y);this.spawnPredictionLine(c,y,m),this.spawnCrossingBee(s,u,c,e)}},{key:"spawnCrossingBee",value:function value(e,t,n,i){var a=this;if(!this.game)throw Error("Game is not defined. Only use this method in PlayingState");this.game.scheduleOnce(function(){a.game.gameObjects.spawnCrossingBees($({playerWorldX:e,playerWorldY:t,spawnWorldX:n.x,spawnWorldY:n.y},i))},1)}},{key:"spawnPredictionLine",value:function value(e,t,n){if(!this.game)throw Error("Game is not defined. Only use this method in PlayingState");var i=this.game.gameObjects.spawnCrossingBeeLine({startX:e.x,startY:e.y,endX:t,endY:n,spriteType:Zt.LOW,thickness:0});j(i).call(function(){M.playSound(Q.BEE_FLYING)}).to(.5,{thickness:80},{easing:"expoOut"}).start(),this.game.scheduleOnce(function(){j(i).to(.5,{thickness:0},{easing:"expoOut"}).call(function(){i.destroy(),M.stopSound(Q.BEE_FLYING)}).start()},1)}},{key:"wakeUpObjects",value:function value(){var e;null==(e=this.game)||null==(e=e.gameObjects)||e.wakeUpObjects(),this.dogeRigidBody.wakeUp()}},{key:"spawnEnemies",value:function value(){this.game&&this.game.gameObjects&&(this.game.gameObjects.spawnBees(),this.game.gameObjects.reviveBigBees())}},{key:"startCounting",value:function value(){var e;null==(e=this.game)||e.uiManager.startCounting()}}]),o}(hi);d._RF.pop(),d._RF.push({},"9516f5Gc/FENLPaNEZwDwcn","ReadyState",void 0);var nS,I_=codex.analytics,iS=function(l){E(o,l);var r=A(o);function o(e){var t;return S(this,o),(t=r.call(this,e)).onTouchStart=function(){var n;t.manager.play(),null==(n=t.game)||n.handleHideTapToPlayText()},t.logLevelStartAnalytics(),t.listenInputEvents(),t.enableUI(),t}return k(o,[{key:"enableUI",value:function value(){var e;null==(e=this.game)||e.uiManager.enableUI()}},{key:"listenInputEvents",value:function value(){var e,t;ce.os===ce.OS.WINDOWS||ce.os===ce.OS.OSX?(document.addEventListener("pointerdown",this.onTouchStart,{once:!0}),null==(e=this.game)||e.node.once(b.EventType.MOUSE_DOWN,this.onTouchStart)):null==(t=this.game)||t.node.once(b.EventType.TOUCH_START,this.onTouchStart)}},{key:"unlistenInputEvents",value:function value(){var e,t;ce.os===ce.OS.WINDOWS||ce.os===ce.OS.OSX?(document.removeEventListener("pointerdown",this.onTouchStart),null==(e=this.game)||e.node.off(b.EventType.MOUSE_DOWN,this.onTouchStart)):null==(t=this.game)||t.node.off(b.EventType.TOUCH_START,this.onTouchStart)}},{key:"load",value:function value(){if(this.unlistenInputEvents(),Ludex.Utils.Valid.isDebugger()){var e=this.manager.createLoadingState();this.manager.change(e)}}},{key:"initialize",value:function value(){}},{key:"ready",value:function value(){}},{key:"play",value:function value(){this.unlistenInputEvents();var e=this.manager.createPlayingState();this.manager.change(e)}},{key:"death",value:function value(){if(this.unlistenInputEvents(),Ludex.Utils.Valid.isDebugger()){var e=this.manager.createDeathState();this.manager.change(e)}}},{key:"finish",value:function value(){}},{key:"update",value:function value(){}},{key:"logLevelStartAnalytics",value:function value(){I_.levelStart(1,0,_p)}}]),o}(hi);d._RF.pop(),d._RF.push({},"946848BySlM54Wly5+1otNa","EndlessStateManager",void 0);var N_=(0,f.ccclass)("EndlessStateManager")(nS=function(l){E(o,l);var r=A(o);function o(){return S(this,o),r.apply(this,arguments)}return k(o,[{key:"init",value:function value(){this.state=new eS(this)}},{key:"change",value:function value(e){this.state=e}},{key:"load",value:function value(){this.state.load()}},{key:"initialize",value:function value(){this.state.initialize()}},{key:"isInitialize",value:function value(){return _instanceof(this.state,$0)}},{key:"ready",value:function value(){this.state.ready()}},{key:"isReady",value:function value(){return _instanceof(this.state,iS)}},{key:"play",value:function value(){this.state.play()}},{key:"isPlaying",value:function value(){return _instanceof(this.state,tS)}},{key:"death",value:function value(){this.state.death()}},{key:"isFailed",value:function value(){return _instanceof(this.state,X0)}},{key:"finish",value:function value(){this.state.finish()}},{key:"isFinished",value:function value(){return _instanceof(this.state,Q0)}},{key:"update",value:function value(e){this.state&&this.state.update(e)}},{key:"createInitializeState",value:function value(){return new $0(this)}},{key:"createLoadingState",value:function value(){return new eS(this)}},{key:"createReadyState",value:function value(){return new iS(this)}},{key:"createPlayingState",value:function value(){return new tS(this)}},{key:"createDeathState",value:function value(){return new X0(this)}},{key:"createFinishState",value:function value(){return new Q0(this)}}]),o}(D))||nS;d._RF.pop(),d._RF.push({},"d10c8b8p8RD45oVz5qSL2LD","clampToBoundingBox",void 0),d._RF.pop(),d._RF.push({},"02e30BdQXxIEbItBFTh00UT","getClosestPair",void 0),d._RF.pop(),d._RF.push({},"eb6c23usqxHPaoJcvF0LbY6","separatePositions",void 0),d._RF.pop(),d._RF.push({},"bfb989Gr/dArq4M9uSSrF5/","stagger",void 0),d._RF.pop(),d._RF.push({},"d2a57+mB4NG9rcdh+dy1VPe","traverse4",void 0),d._RF.pop(),d._RF.push({},"ca614iJ+X5LrL1rX/wDQDTD","shuffle",void 0),d._RF.pop(),d._RF.push({},"1cf4cygDSdP5JL+7w3wIJL7","traverseRandom",void 0),d._RF.pop(),d._RF.push({},"cd0d548/WxD7KCyW2hwySVO","traverseSpiralIn",void 0),d._RF.pop(),d._RF.push({},"a70090n5pRBdIZb/GuW6wDs","toSortedIndices",void 0),Ludex.Utils.Array,d._RF.pop(),d._RF.push({},"56e87lhVSNJ8LMUzQpgUomc","randomSign",void 0),d._RF.pop(),d._RF.push({},"1e7cch8i/5DkYHOwJowrjeg","AFPool",void 0),d._RF.pop(),d._RF.push({},"1faa9NgJrBE7p8Zs/HBWrZn","pad",void 0),d._RF.pop(),d._RF.push({},"78746Q4viBIlbRROK4J1bSl","Burst",void 0);var aS,oS,rS,sS,lS,Vi,cS,hS,dS,pS,yS,vS,fS,mS,gS,bS,SS,kS,nn,CS,ES,AS,TS,RS,PS,_S,F_=f.ccclass,Ja=f.property,z_=(aS=F_("Burst"),oS=Ja(Et),rS=Ja(Ct),sS=Ja(Et),lS=Ja(Ct),aS((cS=h((Vi=function(){function l(){S(this,l),p(this,"time",cS,this),p(this,"repeatCount",hS,this),p(this,"repeatInterval",dS,this),p(this,"count",pS,this),this.remainingCount=0,this.curTime=0}return k(l,[{key:"update",value:function value(r,o){if(0===this.remainingCount&&(this.remainingCount=this.repeatCount,this.curTime=this.time),this.remainingCount>0){var e=Po(r.time-r.startDelay.evaluate(0,1),r.duration)-o;e=e>0?e:0;var t=Po(r.time-r.startDelay.evaluate(0,1),r.duration);this.curTime>=e&&this.curTime<t&&(r.emit(this.count,o-(t-this.curTime)),this.curTime+=this.repeatInterval,--this.remainingCount)}}},{key:"reset",value:function value(){this.remainingCount=0,this.curTime=0}}]),l}()).prototype,"time",[oS],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return 0}}),hS=h(Vi.prototype,"repeatCount",[rS],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return 1}}),dS=h(Vi.prototype,"repeatInterval",[sS],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return 1}}),pS=h(Vi.prototype,"count",[lS],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return 1}}),Vi))||Vi);d._RF.pop(),d._RF.push({},"00eb3NBo0tM/qcD6ViMjx0A","CurveRange",void 0);var LS,BS,DS,OS,IS,NS,FS,zS,an,GS,MS,US,HS,jS,WS,qS,x_=f.ccclass,Fn=f.property,Te=Xe({Constant:0,Curve:1,TwoCurves:2,TwoConstants:3}),q=(yS=x_("CurveRange"),vS=Fn({type:Xe(Te)}),fS=Fn({visible:function visible(){return this.mode===Te.Constant}}),mS=Fn({visible:function visible(){return this.mode===Te.Curve}}),gS=Fn({visible:function visible(){return this.mode===Te.TwoCurves}}),bS=Fn({visible:function visible(){return this.mode===Te.TwoCurves}}),SS=Fn({visible:function visible(){return this.mode===Te.TwoConstants}}),kS=Fn({visible:function visible(){return this.mode===Te.TwoConstants}}),yS((CS=h((nn=function(){function l(){S(this,l),p(this,"mode",CS,this),p(this,"constant",ES,this),p(this,"spline",AS,this),p(this,"splineMin",TS,this),p(this,"splineMax",RS,this),p(this,"constantMin",PS,this),p(this,"constantMax",_S,this),this.spline.assignSorted([0,1],[0,1]),this.splineMin.assignSorted([0,1],[0,1]),this.splineMax.assignSorted([0,1],[0,1])}return k(l,[{key:"evaluate",value:function value(r,o){switch(this.mode){case Te.Curve:return this.spline.evaluate(r);case Te.TwoCurves:return _o(this.splineMin.evaluate(r),this.splineMax.evaluate(r),o);case Te.TwoConstants:return _o(this.constantMin,this.constantMax,o);default:return this.constant}}},{key:"getMax",value:function value(){switch(this.mode){case Te.Curve:return 1;case Te.TwoConstants:return this.constantMax;case Te.TwoCurves:return 1;default:return this.constant}}},{key:"isZero",value:function value(){switch(this.mode){case Te.Curve:return Ei(1,0,Ai);case Te.TwoConstants:return Ei(Math.max(Math.abs(this.constantMax),Math.abs(this.constantMin)),0,Ai);case Te.TwoCurves:return Ei(1,0,Ai);default:return Ei(this.constant,0,Ai)}}}]),l}()).prototype,"mode",[vS],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return Te.Constant}}),ES=h(nn.prototype,"constant",[fS],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return 0}}),AS=h(nn.prototype,"spline",[mS],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return new sa}}),TS=h(nn.prototype,"splineMin",[gS],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return new sa}}),RS=h(nn.prototype,"splineMax",[bS],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return new sa}}),PS=h(nn.prototype,"constantMin",[SS],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return 0}}),_S=h(nn.prototype,"constantMax",[kS],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return 0}}),nn))||nn);d._RF.pop(),d._RF.push({},"3fe5eBRNTJFCZgeD7SqFSh5","GradientRange",void 0);var G_=f.ccclass,zn=f.property,Ge=Xe({Color:0,Gradient:1,TwoColors:2,TwoGradients:3,RandomColor:4}),M_=new le,U_=new le,Xa=(LS=G_("GradientRange"),BS=zn({type:Xe(Ge)}),DS=zn({visible:function visible(){return this.mode===Ge.Color}}),OS=zn({visible:function visible(){return this.mode===Ge.TwoColors}}),IS=zn({visible:function visible(){return this.mode===Ge.TwoColors}}),NS=zn({visible:function visible(){return this.mode===Ge.Gradient||this.mode===Ge.RandomColor}}),FS=zn({visible:function visible(){return this.mode===Ge.TwoGradients}}),zS=zn({visible:function visible(){return this.mode===Ge.TwoGradients}}),LS((GS=h((an=function(){function l(){S(this,l),p(this,"mode",GS,this),p(this,"color",MS,this),p(this,"colorMin",US,this),p(this,"colorMax",HS,this),p(this,"gradient",jS,this),p(this,"gradientMin",WS,this),p(this,"gradientMax",qS,this),this._color=le.WHITE.clone()}return k(l,[{key:"evaluate",value:function value(r,o){switch(this.mode){case Ge.Color:return this.color;case Ge.TwoColors:return le.lerp(this._color,this.colorMin,this.colorMax,o),this._color;case Ge.RandomColor:return this.gradient.getRandomColor(this._color);case Ge.Gradient:return this.gradient.evaluateFast(this._color,r);case Ge.TwoGradients:return le.lerp(this._color,this.gradientMin.evaluateFast(M_,r),this.gradientMax.evaluateFast(U_,r),o),this._color;default:return this.color}}}]),l}()).prototype,"mode",[BS],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return Ge.Color}}),MS=h(an.prototype,"color",[DS],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return le.WHITE.clone()}}),US=h(an.prototype,"colorMin",[OS],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return le.WHITE.clone()}}),HS=h(an.prototype,"colorMax",[IS],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return le.WHITE.clone()}}),jS=h(an.prototype,"gradient",[NS],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return new la}}),WS=h(an.prototype,"gradientMin",[FS],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return new la}}),qS=h(an.prototype,"gradientMax",[zS],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return new la}}),an))||an);function H_(l,r,o,e){x.set(l,Math.cos(e),Math.sin(e)),l.z=0,I.multiplyScalar(l,l,r+(o-r)*is())}function Pt(l){switch(l.mode){case Te.TwoCurves:case Te.TwoConstants:return!0;default:return!1}}d._RF.pop(),d._RF.push({},"1a4c4Z/fWpFuL5b3emrVLug","ParticleFunction",void 0),d._RF.pop(),d._RF.push({},"370cbFjxn9GKJzqbTOhQZiA","ParticleSimulator",void 0);var di=new I(0,0,0),j_=function(){function l(){S(this,l),this.pos=new I(0,0,0),this.color=new le(255,255,255,255),this.size=new I(0,0,0),this.startSize=new I(0,0,0),this.rotation=new I(0,0,0),this.startLifetime=0,this.remainingLifetime=0,this.randomSeed=0,this.velocity=new I(0,0),this.width=0,this.height=0}return k(l,[{key:"init",value:function value(){this.pos.set(di),this.remainingLifetime=0,this.startLifetime=0,this.startSize.set(di),this.startColor=le.WHITE.clone(),this.velocity.set(di),this.randomSeed=0}}]),l}(),Tr=new(function(l){E(o,l);var r=A(o);function o(){return S(this,o),r.apply(this,arguments)}return k(o,[{key:"get",value:function value(){return this._get()||new j_}}]),o}(as.Pool))(function(l){l.pos.set(di),l.color.set(255,255,255,255),l.size.set(di),l.rotation.set(di)},1024),W_=function(){function l(r){S(this,l),this.particles=[],this.active=!1,this.uvFilled=0,this.renderData=new os,this.sys=r,this.particles=[],this.active=!1,this.uvFilled=0}return k(l,[{key:"stop",value:function value(){this.active=!1}},{key:"reset",value:function value(){this.active=!0;var r,o=this.particles,e=O(o);try{for(e.s();!(r=e.n()).done;){var t=r.value;Tr.put(t)}}catch(n){e.e(n)}finally{e.f()}o.length=0,this.renderData.resize(0,0)}},{key:"emitParticle",value:function value(){var r=Tr.get();return this.particles.push(r),r}},{key:"updateUVs",value:function value(r){var o=this.renderData;if(o&&this.sys){var e=o.vData,t=this.sys.spriteFrame;if(!t)return;for(var n=t.uv,i=r?0:this.uvFilled,a=this.particles.length,s=i;s<a;s++){var u,c,y,m,w,_,g,C,P=9*s*4;e[P+3]=null!=(u=n[0])?u:0,e[P+4]=null!=(c=n[1])?c:0,e[P+12]=null!=(y=n[2])?y:0,e[P+13]=null!=(m=n[3])?m:0,e[P+21]=null!=(w=n[4])?w:0,e[P+22]=null!=(_=n[5])?_:0,e[P+30]=null!=(g=n[6])?g:0,e[P+31]=null!=(C=n[7])?C:0}this.uvFilled=a}}},{key:"updateParticleBuffer",value:function value(r,o,e,t){var n=e.vData,i=o.x,a=o.y,s=o.z,u=r.width*r.size.x/2,c=r.height*r.size.y/2,y=r.rotation.x||0,m=r.rotation.y||0,w=r.rotation.z||0;if(0===y&&0===m&&0===w)n[t]=i-u,n[t+1]=a-c,n[t+2]=s,n[t+9]=i+u,n[t+10]=a-c,n[t+11]=s,n[t+18]=i-u,n[t+19]=a+c,n[t+20]=s,n[t+27]=i+u,n[t+28]=a+c,n[t+29]=s;else{var Re=function Re(Pe,Me,Ue){var it=Me*P-Ue*z,pn=Me*z+Ue*P,Un=Pe*K+pn*Z;return new I(Un*ae-it*ue,Un*ue+it*ae,pn*K-Pe*Z)},_=-ca.degreesToRadians(y),g=-ca.degreesToRadians(m),C=-ca.degreesToRadians(w),P=Math.cos(_),z=Math.sin(_),K=Math.cos(g),Z=Math.sin(g),ae=Math.cos(C),ue=Math.sin(C),te=[Re(-u,-c,0),Re(u,-c,0),Re(-u,c,0),Re(u,c,0)];n[t]=te[0].x+i,n[t+1]=te[0].y+a,n[t+2]=te[0].z+s,n[t+9]=te[1].x+i,n[t+10]=te[1].y+a,n[t+11]=te[1].z+s,n[t+18]=te[2].x+i,n[t+19]=te[2].y+a,n[t+20]=te[2].z+s,n[t+27]=te[3].x+i,n[t+28]=te[3].y+a,n[t+29]=te[3].z+s}le.toArray(n,r.color,t+5),le.toArray(n,r.color,t+14),le.toArray(n,r.color,t+23),le.toArray(n,r.color,t+32)}},{key:"step",value:function value(r){var o,e=this.sys.node,t=this.particles;e.updateWorldTransform(),this.active&&this.sys.emitting(r);var n=this.renderData,i=t.length;n.reset(),this.requestData(4*i,6*i),i>this.uvFilled&&this.updateUVs();for(var a=0;a<t.length;){var s=t[a];if(s)if(s.remainingLifetime-=r,s.remainingLifetime>0){var u=9*a*4;this.updateParticleBuffer(s,s.pos,n,u),++a}else{var c=t[a];if(!c)continue;if(a!==t.length-1){var y=t[t.length-1];y&&(t[a]=y)}Tr.put(c),t.length--,n.resize(n.vertexCount-4,n.indexCount-6)}}this.renderData.material=this.sys.getRenderMaterial(0),this.renderData.frame=this.sys.spriteFrame,null==n||null==(o=n.setRenderDrawInfoAttributes)||o.call(n)}},{key:"requestData",value:function value(r,o){var e=this.renderData.indexCount;this.renderData.request(r,o);for(var t=this.renderData.indexCount/6,n=this.renderData.iData,i=e;i<t;i++){var a=4*i;n[e++]=a,n[e++]=a+1,n[e++]=a+2,n[e++]=a+1,n[e++]=a+3,n[e++]=a+2}}},{key:"initDrawInfo",value:function value(){var r,o=this.renderData;null==o||null==(r=o.setRenderDrawInfoAttributes)||r.call(o)}}]),l}();d._RF.pop(),d._RF.push({},"c2fc2/T2apMGZCPX5a4abo/","ModuleRandSeed",void 0),d._RF.pop(),d._RF.push({},"39785+APfBJU5kvcdjZGiLr","ColorOvertimeModule",void 0);var KS,VS,YS,Rr,XS,ZS,QS,$S,ek,tk,Za,ik,ak,ok,Z_=f.ccclass,rk=f.property,sk=(KS=Z_("ColorOvertimeModule"),VS=rk({type:Ce}),YS=rk({type:Xa}),KS((XS=h((Rr=function(){function l(){S(this,l),p(this,"enable",XS,this),p(this,"color",ZS,this)}return k(l,[{key:"update",value:function value(r){if(this.enable){r.color.set(r.startColor);var o=!function(e){switch(e.mode){case Ge.TwoGradients:case Ge.TwoColors:return!0;default:return!1}}(this.color)?0:$e(r.randomSeed+91041);r.color.multiply(this.color.evaluate(1-r.remainingLifetime/r.startLifetime,o))}}}]),l}()).prototype,"enable",[VS],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ZS=h(Rr.prototype,"color",[YS],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return new Xa}}),Rr))||Rr);d._RF.pop(),d._RF.push({},"c397apirpxFfJTJN1KLAcGi","LimitVelocityOvertimeModule",void 0);var lk,uk,ck,hk,dk,pk,pi,vk,fk,mk,gk,bk,$_=f.ccclass,Pr=f.property,kk=(QS=$_("LimitVelocityOvertimeModule"),$S=Pr({type:Ce}),ek=Pr({type:q}),tk=Pr({type:q}),QS((ik=h((Za=function(){function l(){S(this,l),p(this,"enable",ik,this),p(this,"limit",ak,this),p(this,"dampen",ok,this),this.limit.constant=500,this.dampen.constant=.2}return k(l,[{key:"update",value:function value(r,o){if(this.enable){var e=1-r.remainingLifetime/r.startLifetime,t=r.velocity.clone().normalize(),n=Pt(this.limit)?$e(r.randomSeed+23541):0,i=Pt(this.dampen)?$e(r.randomSeed+23541+1):0,a=r.velocity.length(),s=this.limit.evaluate(e,n),u=this.dampen.evaluate(e,i);r.velocity=t.multiplyScalar(this.dampenBeyondLimit(a,s,u,o))}}},{key:"dampenBeyondLimit",value:function value(r,o,e,t){if(r<=o)return r;var n=1-Math.exp(-e*t);return U.lerp(r,o,n)}}]),l}()).prototype,"enable",[$S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ak=h(Za.prototype,"limit",[ek],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return new q}}),ok=h(Za.prototype,"dampen",[tk],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return new q}}),Za))||Za);d._RF.pop(),d._RF.push({},"c6cfbhYVctHt53aUXC4oSWy","RotationOvertimeModule",void 0);var wk,Ck,Ek,Ak,Tk,Rk,Pk,_k,Lk,Bk,Dk,St,Ik,Nk,Fk,zk,xk,Gk,Mk,Uk,Hk,jk,eL=f.ccclass,Yi=f.property,Wk=(lk=eL("RotationOvertimeModule"),uk=Yi({type:Ce}),ck=Yi(Ce),hk=Yi({type:q,visible:function visible(){return this.separateAxes}}),dk=Yi({type:q,visible:function visible(){return this.separateAxes}}),pk=Yi({type:q}),lk((vk=h((pi=function(){function l(){S(this,l),p(this,"enable",vk,this),p(this,"separateAxes",fk,this),p(this,"x",mk,this),p(this,"y",gk,this),p(this,"z",bk,this)}return k(l,[{key:"update",value:function value(r,o){if(this.enable){var e=1-r.remainingLifetime/r.startLifetime,t=r.randomSeed+125292,n=Pt(this.z)?$e(t):0,i=this.z.evaluate(e,n)*o,a=0,s=0;if(this.separateAxes){var u=Pt(this.x)?$e(t):0,c=Pt(this.y)?$e(t):0;a=this.x.evaluate(e,u)*o,s=this.y.evaluate(e,c)*o}r.rotation.add3f(a,s,i)}}}]),l}()).prototype,"enable",[uk],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fk=h(pi.prototype,"separateAxes",[ck],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return!1}}),mk=h(pi.prototype,"x",[hk],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return new q}}),gk=h(pi.prototype,"y",[dk],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return new q}}),bk=h(pi.prototype,"z",[pk],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return new q}}),pi))||pi);d._RF.pop(),d._RF.push({},"f63cd4ScDJFPrnTLNT4+QKu","ShapeModule",void 0);var qk,Kk,Vk,Yk,Jk,Xk,yi,Qk,$k,ew,tw,nw,nL=f.ccclass,_t=f.property,on=Xe({Circle:0,Rectangle:1}),Qa=Xe({Base:0,Edge:1}),$a=function $a(){return this.shape===on.Circle},iw=function iw(){return this.shape===on.Rectangle},vi=[0,0],aw=(wk=nL("ShapeModule"),Ck=_t({type:Xe(on)}),Ek=_t({type:Xe(Qa),visible:iw}),Ak=_t({}),Tk=_t({}),Rk=_t({}),Pk=_t({range:[0,360],visible:$a}),_k=_t({range:[-360,360],visible:$a}),Lk=_t({min:0,visible:$a}),Bk=_t({range:[0,1],step:.01,visible:$a}),Dk=_t({visible:iw}),wk((Ik=h((St=function(){function l(){S(this,l),p(this,"shape",Ik,this),p(this,"emitFrom",Nk,this),p(this,"position",Fk,this),p(this,"rotation",zk,this),p(this,"scale",xk,this),p(this,"arc",Gk,this),p(this,"angle",Mk,this),p(this,"radius",Uk,this),p(this,"radiusThickness",Hk,this),p(this,"rectangleThickness",jk,this)}return k(l,[{key:"emit",value:function value(r){switch(this.shape){case on.Circle:this.circleEmit(this.radius,this.radiusThickness,Ft(this.generateArcAngle()),r);break;case on.Rectangle:this.rectangleEmit(this.emitFrom,this.rectangleThickness,r)}}},{key:"circleEmit",value:function value(r,o,e,t){var n=t.pos;H_(n,r*(1-o),r,e+Ft(this.angle)),t.velocity=n.clone().normalize()}},{key:"rectangleEmit",value:function value(r,o,e){var t,a=e.pos;switch(r){case Qa.Base:x.set(a,Yn(-o.x,o.x),Yn(-o.y,o.y));break;case Qa.Edge:vi[0]=Yn(-1,1),vi[1]=(0===(t=Yn(-1,1))&&t++,Lo.sign(t)),function(s){for(var u=0;u<s.length;u++){var c=u+ua(0,s.length-u),y=s[c];s[c]=s[u],s[u]=y}}(vi),this.applyRectThickness(vi,o),x.set(a,vi[0],vi[1])}e.velocity=a.clone().normalize()}},{key:"generateArcAngle",value:function value(){return Yn(0,this.arc)}},{key:"applyRectThickness",value:function value(r,o){o.x>0&&(r[0]*=o.x),o.y>0&&(r[1]*=o.y)}},{key:"gizmo",value:function value(r){switch(r.strokeColor.fromHEX("#46C4FFB0"),r.fillColor.fromHEX("#46C4FF77"),r.lineWidth=8,this.shape){case on.Circle:this.gizmoCircle(r);break;case on.Rectangle:this.gizmoRectangle(r)}}},{key:"gizmoCircle",value:function value(r){r.clear();var o=this.angle,e=this.angle+this.arc;if(this.createArcPath(r,this.radius,o,e),this.createArcPath(r,this.radius*(1-this.radiusThickness),o,e),this.arc<360&&this.radius>0){var t=this.radius*Math.cos(Ft(this.angle)),n=this.radius*Math.sin(Ft(this.angle)),i=this.radius*Math.cos(Ft(this.arc+this.angle)),a=this.radius*Math.sin(Ft(this.arc+this.angle));r.moveTo(t,n),r.lineTo(0,0),r.moveTo(i,a),r.lineTo(0,0)}r.stroke()}},{key:"gizmoRectangle",value:function value(r){r.clear();var o=this.rectangleThickness.x,e=this.rectangleThickness.y;r.moveTo(o,e),r.lineTo(-o,e),r.lineTo(-o,-e),r.lineTo(o,-e),r.close(),r.stroke()}},{key:"createArcPath",value:function value(r,o,e,t){if(!(o<=0))for(var n=(t-e)/48,i=0;i<=48;i++){var a=e+i*n,s=o*Math.cos(Ft(a)),u=o*Math.sin(Ft(a));0===i?r.moveTo(s,u):r.lineTo(s,u)}}}]),l}()).prototype,"shape",[Ck],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return on.Circle}}),Nk=h(St.prototype,"emitFrom",[Ek],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return Qa.Base}}),Fk=h(St.prototype,"position",[Ak],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return new I(0,0,0)}}),zk=h(St.prototype,"rotation",[Tk],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return new I(0,0,0)}}),xk=h(St.prototype,"scale",[Rk],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return new I(1,1,1)}}),Gk=h(St.prototype,"arc",[Pk],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return 360}}),Mk=h(St.prototype,"angle",[_k],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return 25}}),Uk=h(St.prototype,"radius",[Lk],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return 1}}),Hk=h(St.prototype,"radiusThickness",[Bk],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return 1}}),jk=h(St.prototype,"rectangleThickness",[Dk],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return new x(20,50)}}),St))||St);d._RF.pop(),d._RF.push({},"1b7c1WztGdLzKO8gh4ulm2c","SizeOvertimeModule",void 0);var ow,rw,sw,lw,eo,cw,hw,dw,iL=f.ccclass,Ji=f.property,pw=(qk=iL("SizeOvertimeModule"),Kk=Ji({type:Ce}),Vk=Ji(Ce),Yk=Ji({type:q,visible:function visible(){return!this.separateAxes}}),Jk=Ji({type:q,visible:function visible(){return this.separateAxes}}),Xk=Ji({type:q,visible:function visible(){return this.separateAxes}}),qk((Qk=h((yi=function(){function l(){S(this,l),p(this,"enable",Qk,this),p(this,"separateAxes",$k,this),p(this,"size",ew,this),p(this,"x",tw,this),p(this,"y",nw,this),this.size.constant=1,this.x.constant=1,this.y.constant=1}return k(l,[{key:"update",value:function value(r){if(this.enable){var o=1-r.remainingLifetime/r.startLifetime,e=r.randomSeed+39825;if(this.separateAxes){var t=Pt(this.x)?$e(e):0,n=Pt(this.y)?$e(e):0;r.size.x=r.startSize.x*this.x.evaluate(o,t),r.size.y=r.startSize.y*this.y.evaluate(o,n)}else{var i=Pt(this.size)?$e(e):0,a=this.size.evaluate(o,i);r.size.multiplyScalar(a)}}}}]),l}()).prototype,"enable",[Kk],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$k=h(yi.prototype,"separateAxes",[Vk],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return!1}}),ew=h(yi.prototype,"size",[Yk],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return new q}}),tw=h(yi.prototype,"x",[Jk],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return new q}}),nw=h(yi.prototype,"y",[Xk],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return new q}}),yi))||yi);d._RF.pop(),d._RF.push({},"f6ad5Yz6wpE2ZzModn16CYQ","VelocityOvertimeModule",void 0);var yw,vw,fw,mw,gw,bw,Sw,kw,ww,Cw,Ew,Aw,Tw,Rw,Pw,_w,Lw,Bw,Dw,Ow,Iw,Nw,Fw,zw,xw,Gw,Mw,Uw,Hw,jw,Ww,qw,Kw,rn,X,Vw,Yw,Jw,Xw,Zw,Qw,$w,eC,tC,nC,iC,aC,oC,rC,sC,lC,uC,cC,hC,dC,pC,yC,vC,fC,mC,gC,oL=f.ccclass,_r=f.property,bC=(ow=oL("VelocityOvertimeModule"),rw=_r({type:Ce}),sw=_r({type:q}),lw=_r({type:q}),ow((cw=h((eo=function(){function l(){S(this,l),p(this,"enable",cw,this),p(this,"x",hw,this),p(this,"y",dw,this),this._temp_v3=new I,this.x.constant=0,this.y.constant=0}return k(l,[{key:"update",value:function value(r,o){if(this.enable){var e=1-r.remainingLifetime/r.startLifetime,t=Pt(this.x)?$e(r.randomSeed+197866):0,n=Pt(this.y)?$e(r.randomSeed+156497):0,i=I.set(this._temp_v3,this.x.evaluate(e,t),this.y.evaluate(e,n),0);r.velocity.add(i.multiplyScalar(o))}}}]),l}()).prototype,"enable",[rw],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),hw=h(eo.prototype,"x",[sw],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return new q}}),dw=h(eo.prototype,"y",[lw],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return new q}}),eo))||eo);d._RF.pop(),d._RF.push({},"10bc3IfFqBLtpSgVri/NVeX","ParticleSystem",void 0);var SC,kC,wC,Lr,CC,EC,sL=f.ccclass,ie=f.property,lL=f.executeInEditMode,uL=f.disallowMultiple,cL=f.playOnFocus,hL=rs.Attr.setClassAttr,sn=Xe({World:0,Local:1}),to=(yw=sL("ParticleSystem"),vw=lL(!0),fw=uL(!0),mw=cL(!0),gw=ie({}),bw=ie({formerlySerializedAs:"preview"}),Sw=ie(Ce),kw=ie({type:Xe(sn)}),ww=ie({formerlySerializedAs:"simulationSpace"}),Cw=ie(Et),Ew=ie(Ce),Aw=ie({type:q}),Tw=ie({type:q}),Rw=ie(Xa),Pw=ie(Ce),_w=ie({type:q,formerlySerializedAs:"startSize"}),Lw=ie({type:q,visible:function visible(){return this.startSize2D}}),Bw=ie({type:q}),Dw=ie(Ce),Ow=ie({type:q,visible:function visible(){return this.startRotation3D}}),Iw=ie({type:q,visible:function visible(){return this.startRotation3D}}),Nw=ie({type:q,formerlySerializedAs:"startRotation"}),Fw=ie({type:q}),zw=ie({type:q}),xw=ie({type:aw}),Gw=ie({type:bC}),Mw=ie({type:pw}),Uw=ie({type:Wk}),Hw=ie({type:sk}),jw=ie({type:kk}),Ww=ie(z_),qw=ie({serializable:!0}),Kw=ie({type:yn}),yw(rn=vw(rn=fw(rn=mw((h((X=function(l){E(o,l);var r=A(o);function o(){var e;return S(this,o),e=r.call(this),p(e,"_preview",Vw,v(e)),p(e,"playOnAwake",Yw,v(e)),p(e,"_simulationSpace",Jw,v(e)),p(e,"duration",Xw,v(e)),p(e,"loop",Zw,v(e)),p(e,"startDelay",Qw,v(e)),p(e,"startLifetime",$w,v(e)),p(e,"startColor",eC,v(e)),p(e,"startSize2D",tC,v(e)),p(e,"startSizeX",nC,v(e)),p(e,"startSizeY",iC,v(e)),p(e,"startSpeed",aC,v(e)),p(e,"startRotation3D",oC,v(e)),p(e,"startRotationX",rC,v(e)),p(e,"startRotationY",sC,v(e)),p(e,"startRotationZ",lC,v(e)),p(e,"gravityModifier",uC,v(e)),p(e,"rateOverTime",cC,v(e)),p(e,"shapeModule",hC,v(e)),p(e,"velocityOvertimeModule",dC,v(e)),p(e,"sizeOvertimeModule",pC,v(e)),p(e,"rotationOvertimeModule",yC,v(e)),p(e,"colorOvertimeModule",vC,v(e)),p(e,"limitVelocityOvertimeModule",fC,v(e)),p(e,"bursts",mC,v(e)),p(e,"_spriteFrame",gC,v(e)),e._renderSpriteFrame=null,e.time=0,e.emitRateTimeCounter=0,e.isPlaying=!1,e.isStopped=!0,e.isEmitting=!1,e.startLifetime.constant=5,e.startSizeX.constant=1,e.startSpeed.constant=5,e.rateOverTime.constant=10,e.initProperties(),e}return k(o,[{key:"preview",get:function get(){return this._preview},set:function set(e){this._preview=e,e?this._startPreview():this._stopPreview()}},{key:"simulationSpace",get:function get(){return this._simulationSpace},set:function set(e){this._simulationSpace=e,this._updateMaterial(),this._updateSimulationSpace()}},{key:"spriteFrame",get:function get(){return this._spriteFrame},set:function set(e){this._renderSpriteFrame!==e&&(this._renderSpriteFrame=e,e&&!e._uuid||(this._spriteFrame=e),this._applySpriteFrame())}},{key:"assembler",get:function get(){return this._assembler}},{key:"onEnable",value:function value(){at(ot(o.prototype),"onEnable",this).call(this),this._updateMaterial(),this._updateSimulationSpace()}},{key:"onDestroy",value:function value(){at(ot(o.prototype),"onDestroy",this).call(this)}},{key:"initProperties",value:function value(){this._simulator=new W_(this)}},{key:"onFocusInEditor",value:function value(){this._startPreview()}},{key:"onLostFocusInEditor",value:function value(){this._stopPreview()}},{key:"_startPreview",value:function value(){this._preview&&this.play()}},{key:"_stopPreview",value:function value(){this._preview||(this.play(),this.stop())}},{key:"__preload",value:function value(){at(ot(o.prototype),"__preload",this).call(this),this.spriteFrame&&!this._renderSpriteFrame&&this._applySpriteFrame(),this.playOnAwake&&this.play()}},{key:"start",value:function value(){this.node.position=new I(this.node.position.x,this.node.position.y,100)}},{key:"play",value:function value(){this.isStopped&&(this.isStopped=!1),this.time=0,this.isPlaying=!0,this.isStopped=!1,this.isEmitting=!0,this._simulator.reset(),this.markForUpdateRenderData()}},{key:"stop",value:function value(){this.isPlaying&&(this.isPlaying=!1),this.isEmitting&&(this.isEmitting=!1),this.isStopped=!0,this._simulator.reset(),this._simulator.stop()}},{key:"_flushAssembler",value:function value(){var e,t=Wt.Assembler.getAssembler(this);if(this._assembler!==t&&(this._assembler=t),null!=(e=this._assembler)&&e.createData){var n=this._simulator,i=n.renderData;i||(i=n.renderData=this._assembler.createData(this),n.uvFilled=0,i.particleInitRenderDrawInfo(this.renderEntity),n.initDrawInfo())}}},{key:"_applySpriteFrame",value:function value(){this._renderSpriteFrame=this._renderSpriteFrame||this._spriteFrame,this._renderSpriteFrame?this._renderSpriteFrame.texture&&(this._simulator&&this._simulator.updateUVs(!0),this._updateMaterial(),this.isStopped=!1,this.markForUpdateRenderData()):this.stop()}},{key:"_updateMaterial",value:function value(){if(this._customMaterial){this.setSharedMaterial(this._customMaterial,0);var e,t=null==(e=this.getRenderMaterial(0))||null==(e=e.passes[0])?void 0:e.blendState.targets[0];t&&(this._dstBlendFactor=t.blendDst,this._srcBlendFactor=t.blendSrc)}var n=this.getMaterialInstance(0);n&&n.recompileShaders({USE_LOCAL:this.simulationSpace===sn.Local}),n&&n.passes.length>0&&this._updateBlendFunc()}},{key:"_finishedSimulation",value:function value(){this.stop(),this.markForUpdateRenderData()}},{key:"_canRender",value:function value(){return at(ot(o.prototype),"_canRender",this).call(this)&&!this.isStopped&&null!==this._renderSpriteFrame&&void 0!==this._renderSpriteFrame}},{key:"_render",value:function value(e){this.simulationSpace===sn.Local?e.commitComp(this,this._simulator.renderData,this._renderSpriteFrame,this._assembler,this.node):this.simulationSpace===sn.World&&e.commitComp(this,this._simulator.renderData,this._renderSpriteFrame,this._assembler,null)}},{key:"_updateSimulationSpace",value:function value(){var e;"function"==typeof(null==(e=this._renderEntity)?void 0:e.setRenderTransform)&&(this.simulationSpace===sn.Local?(this._renderEntity.setRenderTransform(this.node),this._renderEntity.setUseLocal(!0)):this.simulationSpace===sn.World&&(this._renderEntity.setRenderTransform(null),this._renderEntity.setUseLocal(!1)))}},{key:"lateUpdate",value:function value(e){this.isPlaying&&(this.time+=e,this._simulator.step(e))}},{key:"emitting",value:function value(e){var t=this,n=this.startDelay.evaluate(0,1);if(this.time>n&&this.time>this.duration+n&&(this.loop||(this.isEmitting=!1)),this.isEmitting){if(this.emitRateTimeCounter+=this.rateOverTime.evaluate(this.time/this.duration,1)*e,this.emitRateTimeCounter>1){var i=Math.floor(this.emitRateTimeCounter);this.emitRateTimeCounter-=i,this.emit(i,e)}var a,s=O(this.bursts);try{for(s.s();!(a=s.n()).done;)a.value.update(this,e)}catch(c){s.e(c)}finally{s.f()}}var u=this.gravityModifier.evaluate(this.time/this.duration,1);0!==this._simulator.particles.length||this.isEmitting||!this.isPlaying?this._simulator.particles.forEach(function(c,y){t.sizeOvertimeModule.update(c),t.rotationOvertimeModule.update(c,e),t.colorOvertimeModule.update(c),t.velocityOvertimeModule.update(c,e),t.applyGravityModifier(c,u),t.limitVelocityOvertimeModule.update(c,e),c.pos.add(c.velocity.clone().multiplyScalar(e))}):this._finishedSimulation()}},{key:"emit",value:function value(e,t){if(null!==this.spriteFrame)for(var n=this.time%this.duration/this.duration,i=0;i<e;i++){var a=this._simulator.emitParticle();if(a.init(),this.shapeModule.emit(a),this.simulationSpace===sn.World){var s=this.node.worldMatrix;a.pos.x+=s.m12,a.pos.y+=s.m13}var u=this.startSpeed.evaluate(n,this.rand());a.velocity.multiplyScalar(u),a.width=this.spriteFrame.width,a.height=this.spriteFrame.height;var c=this.startSizeX.evaluate(n,this.rand()),y=this.startSize2D?new I(c,this.startSizeY.evaluate(n,this.rand()),1):new I(c,c,1);a.startSize=y.clone(),a.size=y.clone();var m=this.startRotationZ.evaluate(n,this.rand());a.rotation=this.startRotation3D?new I(this.startRotationX.evaluate(n,this.rand()),this.startRotationY.evaluate(n,this.rand()),m):new I(0,0,m),a.startColor=this.startColor.evaluate(n,this.rand()).clone(),a.color=a.startColor.clone(),a.startLifetime=this.startLifetime.evaluate(n,this.rand())+t,a.remainingLifetime=a.startLifetime,a.randomSeed=ua(0,233280)}}},{key:"applyGravityModifier",value:function value(e,t){e.velocity.add(new I(0,-9.8*t,0))}},{key:"rand",value:function value(){return $e(ua(0,Lo.INT_MAX))}}]),o}(ss)).prototype,"preview",[gw],Object.getOwnPropertyDescriptor(X.prototype,"preview"),X.prototype),Vw=h(X.prototype,"_preview",[bw],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return!1}}),Yw=h(X.prototype,"playOnAwake",[Sw],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return!0}}),h(X.prototype,"simulationSpace",[kw],Object.getOwnPropertyDescriptor(X.prototype,"simulationSpace"),X.prototype),Jw=h(X.prototype,"_simulationSpace",[ww],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return sn.Local}}),Xw=h(X.prototype,"duration",[Cw],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return 5}}),Zw=h(X.prototype,"loop",[Ew],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return!1}}),Qw=h(X.prototype,"startDelay",[Aw],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return new q}}),$w=h(X.prototype,"startLifetime",[Tw],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return new q}}),eC=h(X.prototype,"startColor",[Rw],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return new Xa}}),tC=h(X.prototype,"startSize2D",[Pw],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return!1}}),nC=h(X.prototype,"startSizeX",[_w],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return new q}}),iC=h(X.prototype,"startSizeY",[Lw],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return new q}}),aC=h(X.prototype,"startSpeed",[Bw],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return new q}}),oC=h(X.prototype,"startRotation3D",[Dw],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return!1}}),rC=h(X.prototype,"startRotationX",[Ow],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return new q}}),sC=h(X.prototype,"startRotationY",[Iw],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return new q}}),lC=h(X.prototype,"startRotationZ",[Nw],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return new q}}),uC=h(X.prototype,"gravityModifier",[Fw],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return new q}}),cC=h(X.prototype,"rateOverTime",[zw],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return new q}}),hC=h(X.prototype,"shapeModule",[xw],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return new aw}}),dC=h(X.prototype,"velocityOvertimeModule",[Gw],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return new bC}}),pC=h(X.prototype,"sizeOvertimeModule",[Mw],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return new pw}}),yC=h(X.prototype,"rotationOvertimeModule",[Uw],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return new Wk}}),vC=h(X.prototype,"colorOvertimeModule",[Hw],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return new sk}}),fC=h(X.prototype,"limitVelocityOvertimeModule",[jw],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return new kk}}),mC=h(X.prototype,"bursts",[ie,Ww],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return[]}}),gC=h(X.prototype,"_spriteFrame",[qw],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return null}}),h(X.prototype,"spriteFrame",[Kw],Object.getOwnPropertyDescriptor(X.prototype,"spriteFrame"),X.prototype),rn=X))||rn)||rn)||rn)||rn);hL(to,"color","visible",!1),d._RF.pop(),d._RF.push({},"442c2KaGHdNip4TBoeKOOoY","RendererModule",void 0);var ln,dL=f.ccclass,AC=f.property;SC=dL("RendererModule"),kC=AC(ls),wC=AC(yn),SC((CC=h((Lr=k(function l(){S(this,l),p(this,"material",CC,this),p(this,"spriteFrame",EC,this)})).prototype,"material",[kC],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),EC=h(Lr.prototype,"spriteFrame",[wC],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Lr)),d._RF.pop(),d._RF.push({},"c20acgKcuRFP6+Am/XjOFeP","ParticleSystem2DExtra",void 0);var yL=f.ccclass,vL=f.disallowMultiple,fL=f.executeInEditMode,mL=f.requireComponent,gL=yL("ParticleSystem2DExtra")(ln=fL(!0)(ln=vL(!0)(ln=mL(Wt)(ln=function(l){E(o,l);var r=A(o);function o(){var e;S(this,o);for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return(e=r.call.apply(r,[this].concat(n))).emitParticle=function(a){return function(s){a(s);var u=e.particleSystem._simulator.particles.length,c=e.particleSystem._simulator.particles[u-1];e.initParticle(c)}},e.step=function(a){return function(s){for(var u=e.particleSystem._simulator.particles,c=0;c<u.length;c++){var y=u[c];e.updateParticle(y,s)}a(s)}},e}return k(o,[{key:"__preload",value:function value(){this.particleSystem=this.getComponent(Wt),this.validateRequiredComponents(),this.overrideFunctions()}},{key:"overrideFunctions",value:function value(){var e=this.particleSystem._simulator.emitParticle.bind(this.particleSystem._simulator);this.particleSystem._simulator.emitParticle=this.emitParticle(e);var t=this.particleSystem._simulator.step.bind(this.particleSystem._simulator);this.particleSystem._simulator.step=this.step(t)}},{key:"validateRequiredComponents",value:function value(){L.lazyValidateProperties(this)}}]),o}(D))||ln)||ln)||ln)||ln;d._RF.pop(),d._RF.push({},"664feJL84ZOTaM99dgWY4x0","ExampleParticleSystem2DExtra",void 0),(0,f.ccclass)("ExampleParticleSystem2DExtra")(function(l){E(o,l);var r=A(o);function o(){return S(this,o),r.apply(this,arguments)}return k(o,[{key:"initParticle",value:function value(e){e.maxSize=U.randomRange(.25,1)*e.size,e.size=0,e.deltaSize=0,e.cycleDuration=U.randomRange(.4,.6),e.life=e.timeToLive,this.setInitPosition(e.pos)}},{key:"updateParticle",value:function value(e,t){this.updateScale(e)}},{key:"setInitPosition",value:function value(e){var t=e.x,n=e.y;return e.x=t+U.randomRange(-350,350),e.y=n+U.randomRange(-350,350),e}},{key:"updateScale",value:function value(e){var t=1-(e.life-e.timeToLive)%e.cycleDuration/e.cycleDuration;e.size=e.maxSize*Math.sin(t*Math.PI)}}]),o}(gL)),d._RF.pop(),d._RF.push({},"4a9beTdMntC0q9yngb8a2go","BootScene",void 0);var Br,Dr,bL=f.ccclass,SL=f.disallowMultiple,no=Ludex,io=no.Events,kL=(no.Utils.Valid,no.Configs.Core.StartSDKAfterLoadGame),TC=no.Plugins.Ads,ao=((void 0===TC?{}:TC).Types,codex),oo=ao.ads,fi=ao.player,ro=ao.event,wL=ao.context;bL("BootScene")(Br=SL(Br=function(l){E(n,l);var r,o,e,t=A(n);function n(){var i;S(this,n);for(var a=arguments.length,s=Array(a),u=0;u<a;u++)s[u]=arguments[u];return(i=t.call.apply(t,[this].concat(s))).setupLoadingFullScreen=function(){kL?(G.addShowedScene(Ye.BOOT_SCENE),fi.isFirstSession()?G.addShowedScene(Ye.GAME_SCENE):G.addShowedScene(Ye.DASHBOARD_SCENE)):G.showLoadingFullScreen(Ye.BOOT_SCENE)},i.processWhenGameSdkStarted=function(){i.sendMsGamesDailyNotification()},i.loadBundles=B(function(){return _ts_generator(this,function(_state){return[2,Promise.all([_e.loadBundle("loadable")])]})}),i.loadWasmModules=B(function(){return _ts_generator(this,function(_state){return"SOLO"!==wL.getContextType()||fi.isFirstSession()?[2,Promise.all([wo.loadModuleAsync("spine")])]:[2]})}),i.lazyLoadWasmModules=B(function(){return _ts_generator(this,function(_state){switch(_state.label){case 0:return[4,Promise.all([wo.loadModuleAsync("spine")])];case 1:return _state.sent(),[2]}})}),i.handlePauseAudio=function(){GameSDK.isGameSDK("YoutubePlayables")?GameSDK.extra.onAudioEnabledChange(function(c){var y=he.isAdInProgress(),m=c&&!y;M.muteAudio(!m),fi.setSetting("music",c),fi.setSetting("sound",c),m?M.playMusic(Q.BG_MUSIC):(M.pauseMusic(),M.stopAllSounds())}):(ro.on(io.VISIBILITY_HIDDEN,i.handleMuteAudio),ro.on(io.VISIBILITY_VISIBLE,i.handleUnMuteAudio))},i.handleMuteAudio=function(){M.muteAudio(!0)},i.handleUnMuteAudio=function(){null!=oo&&oo.isAdFullSizeShowing()||M.muteAudio(!1)},i}return k(n,[{key:"__preload",value:function value(){this.setupAndroidPlatformAds(),this.processCrazyGamesLoadingStart(),this.preloadAssets(),this.listenEvents()}},{key:"preloadAssets",value:(e=B(function(){return _ts_generator(this,function(_state){switch(_state.label){case 0:return _state.trys.push([0,2,3,4]),me.pause(),[4,Promise.all([this.loadWasmModules(),this.loadBundles()])];case 1:case 2:return _state.sent(),[3,4];case 3:return null!=oo&&oo.isAdFullSizeShowing()||me.resume(),[7];case 4:return[2]}})}),function(){return e.apply(this,arguments)})},{key:"onLoad",value:function value(){this.handlePauseAudio(),this.preloadNotificationScreen(),this.overrideGameSDK(),this.setupLoadingFullScreen()}},{key:"start",value:(o=B(function(){return _ts_generator(this,function(_state){switch(_state.label){case 0:return[4,GameSDK.extra.waitSDKInitiatedAsync()];case 1:return _state.sent(),this.processCrazyGamesLoadingStop(),this.setupYoutubeAudioSync(),[2]}})}),function(){return o.apply(this,arguments)})},{key:"setupYoutubeAudioSync",value:function value(){if(GameSDK.isGameSDK("YoutubePlayables")){var i=GameSDK.extra.isAudioEnabled();fi.setSetting("music",i),fi.setSetting("sound",i),M.muteAudio(!i)}}},{key:"listenEvents",value:function value(){ro.catchUp(io.GAME_READY,this.lazyLoadWasmModules),ro.catchUp(io.GAME_SDK_STARTED,this.processWhenGameSdkStarted)}},{key:"overrideGameSDK",value:function value(){if("FBInstant"in window&&"shareAsync"in FBInstant){var a,i=FBInstant.shareAsync;FBInstant.shareAsync=(a=B(function(s){return _ts_generator(this,function(_state){return[2,i($({},s))]})}),function(s){return a.apply(this,arguments)})}}},{key:"processCrazyGamesLoadingStart",value:function value(){"gameLoadingStart"in GameSDK.extra&&GameSDK.extra.gameLoadingStart()}},{key:"processCrazyGamesLoadingStop",value:function value(){"gameLoadingStop"in GameSDK.extra&&GameSDK.extra.gameLoadingStop()}},{key:"setupAndroidPlatformAds",value:function value(){}},{key:"sendMsGamesDailyNotification",value:function value(){var i=GameSDK.extra;"sendDailyNotificationAsync"in i&&i.sendDailyNotificationAsync().catch(function(a){})}},{key:"preloadNotificationScreen",value:(r=B(function(){return _ts_generator(this,function(_state){switch(_state.label){case 0:return[4,_e.preloadPrefab("screens/NotificationScreen")];case 1:return _state.sent(),[2]}})}),function(){return r.apply(this,arguments)})}]),n}(D))||Br),d._RF.pop(),d._RF.push({},"3f6029o9mpM/K2ccwbuv3XD","EndlessScene",void 0);var Or,CL=f.ccclass,EL=f.disallowMultiple,RC=codex,AL=RC.audio,PC=RC.ads,TL=jt.Layout,RL=jt.DesignSize.Portrait;CL("EndlessScene")(Dr=EL(Dr=function(l){E(o,l);var r=A(o);function o(){var e;S(this,o);for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return(e=r.call.apply(r,[this].concat(n))).handleGameMaskWhenLayoutChanged=function(a){var s=Ze("Canvas/Game/GameObjects");if(s){var u=s.getComponent(wi);u&&(u.enabled=a===TL.Landscape)}},e.handleAdsWhenResize=function(){e.checkBottomBannerAdSize(),e.setMaxSizeSideBannerAd()},e.attemptCallSubscribeBot=function(){"subscribeBotAsync"in GameSDK.extra&&GameSDK.extra.subscribeBotAsync().catch(function(a){})},e}return k(o,[{key:"__preload",value:function value(){this.validateRequiredComponents(),this.listenGameEvents()}},{key:"validateRequiredComponents",value:function value(){L.lazyValidateProperties(this)}},{key:"onLoad",value:function value(){}},{key:"listenGameEvents",value:function value(){this.node.scene.on(we.LAYOUT_CHANGED,this.handleGameMaskWhenLayoutChanged),this.node.scene.on(we.VIEW_RESIZED,this.handleAdsWhenResize)}},{key:"checkBottomBannerAdSize",value:function value(){var e=Wn.instance.getVisibleSize(),t=dt.worldSizeToCssSize(e.height*Co.MAX_BOTTOM_BANNER_RATIO);Ludex.Configs.Ads.BannerDisplayAdOptions.forEach(function(n){var i=n.PlacementId,a=n.Position,s=n.BannerHeight;"bottom"===a&&(s>t?PC.hideBannerAdAsync(i).catch(function(u){}):PC.showBannerAdAsync(i).catch(function(u){}))})}},{key:"setMaxSizeSideBannerAd",value:function value(){var e=GameSDK.extra;if("setSideBannerAdRemainSize"in e){var t=Wn.instance.getVisibleSize(),n=RL.WIDTH+24,i=(t.width-n)/2,a=dt.worldSizeToCssSize(i);e.setSideBannerAdRemainSize(a)}}},{key:"start",value:function value(){this.scheduleOnce(this.attemptCallSubscribeBot,.5),this.updateVolumeBackgroundMusic()}},{key:"updateVolumeBackgroundMusic",value:function value(){AL.setVolume(1,"global_music")}}]),o}(D))||Dr),d._RF.pop(),d._RF.push({},"9b83boaSv9PE6mRFqy0MSI8","GameScene",void 0);var _C,LC,BC,DC,OC,IC,NC,FC,zC,xC,GC,MC,Ir,Ke,UC,HC,jC,WC,PL=f.ccclass,_L=f.disallowMultiple,qC=codex,LL=qC.audio,KC=qC.ads,BL=jt.Layout,DL=jt.DesignSize.Portrait;PL("GameScene")(Or=_L(Or=function(l){E(o,l);var r=A(o);function o(){var e;S(this,o);for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return(e=r.call.apply(r,[this].concat(n))).handleGameMaskWhenLayoutChanged=function(a){var s=Ze("Canvas/Game/GameObjects");if(s){var u=s.getComponent(wi);u&&(u.enabled=a===BL.Landscape)}},e.handleAdsWhenResize=function(){e.checkBottomBannerAdSize(),e.setMaxSizeSideBannerAd()},e.attemptCallSubscribeBot=function(){"subscribeBotAsync"in GameSDK.extra&&GameSDK.extra.subscribeBotAsync().catch(function(a){})},e}return k(o,[{key:"__preload",value:function value(){this.validateRequiredComponents(),this.listenGameEvents()}},{key:"validateRequiredComponents",value:function value(){L.lazyValidateProperties(this)}},{key:"listenGameEvents",value:function value(){me.on(we.VIEW_RESIZED,this.handleAdsWhenResize),me.on(we.LAYOUT_CHANGED,this.handleGameMaskWhenLayoutChanged)}},{key:"checkBottomBannerAdSize",value:function value(){var e=Wn.instance.getVisibleSize(),t=dt.worldSizeToCssSize(e.height*Co.MAX_BOTTOM_BANNER_RATIO);Ludex.Configs.Ads.BannerDisplayAdOptions.forEach(function(n){var i=n.PlacementId,a=n.Position,s=n.BannerHeight;"bottom"===a&&(s>t?KC.hideBannerAdAsync(i).catch(function(u){}):KC.showBannerAdAsync(i).catch(function(u){}))})}},{key:"setMaxSizeSideBannerAd",value:function value(){var e=GameSDK.extra;if("setSideBannerAdRemainSize"in e){var t=Wn.instance.getVisibleSize(),n=DL.WIDTH+24,i=(t.width-n)/2,a=dt.worldSizeToCssSize(i);e.setSideBannerAdRemainSize(a)}}},{key:"start",value:function value(){this.scheduleOnce(this.attemptCallSubscribeBot,.5),this.updateVolumeBackgroundMusic(),this.scheduleOnce(this.preloadScenes,2)}},{key:"preloadScenes",value:function value(){Ve.preloadDashboardScene()}},{key:"updateVolumeBackgroundMusic",value:function value(){LL.setVolume(1,"global_music")}}]),o}(D))||Or),d._RF.pop(),d._RF.push({},"11abe47Ss1CtabSFT1/cPKt","PlayableScene",void 0);var Nr,OL=f.ccclass,so=f.property,IL=f.disallowMultiple,VC=codex.analytics;_C=OL("PlayableScene"),LC=L.required(),BC=so({type:Y}),DC=L.required(),OC=so({type:to}),IC=L.required(),NC=so({type:to}),FC=L.required(),zC=so({type:De}),xC=L.onlyRunInLifeCycleAsync,GC=L.onlyRunInLifeCycle,MC=L.onlyRunInLifeCycle,_C(Ir=IL((UC=h((Ke=function(l){E(n,l);var r,o,e,t=A(n);function n(){var i;return S(this,n),i=t.call(this),p(i,"label",UC,v(i)),p(i,"particleLeft",HC,v(i)),p(i,"particleRight",jC,v(i)),p(i,"backgroundAnimation",WC,v(i)),Ve.markIsTestScene(Ye.PLAYABLE_SCENE),i}return k(n,[{key:"__preload",value:function value(){this.listenEvents()}},{key:"onLoad",value:function value(){L.validateRequiredProperties(this)}},{key:"listenEvents",value:function value(){}},{key:"start",value:(e=B(function(){return _ts_generator(this,function(_state){switch(_state.label){case 0:return VC.event("ready_playable"),[4,this.waitViewable()];case 1:return _state.sent(),this.playTweens(),this.playParticles(),this.playAnimations(),VC.event("showing_playable"),setTimeout(function(){"openAppStore"in GameSDK.extra&&GameSDK.extra.openAppStore()},1e4),[2]}})}),function(){return e.apply(this,arguments)})},{key:"waitViewable",value:(o=B(function(){var _tmp1,_tmp2,_tmp3;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(!("isViewable"in GameSDK.extra))return[3,7];if(_tmp1=GameSDK.extra.isViewable())return[3,6];if(!(_tmp2="waitViewableChange"in GameSDK.extra))return[3,5];return me.pause(),[4,GameSDK.extra.waitViewableChange()];case 1:if(!_state.sent())return[3,2];return _tmp3=me.resume(),[3,4];case 2:return[4,this.waitViewable()];case 3:_tmp3=_state.sent(),_state.label=4;case 4:_tmp2=_tmp3,_state.label=5;case 5:_tmp1=_tmp2,_state.label=6;case 6:_state.label=7;case 7:return[2]}})}),function(){return o.apply(this,arguments)})},{key:"playTweens",value:(r=B(function(){var i;return _ts_generator(this,function(_state){return i=j(this.label.node).to(10,{position:new I(0,200,0)},{easing:"cubicInOut"}).to(6,{position:new I(0,-100,0)},{easing:"cubicInOut"}),Dt.runTweenAsync(j(this.label.node).repeat(999,i)),[2]})}),function(){return r.apply(this,arguments)})},{key:"playParticles",value:function value(){this.particleLeft.play(),this.particleRight.play()}},{key:"playAnimations",value:function value(){this.backgroundAnimation.play()}}]),n}(D)).prototype,"label",[LC,BC],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),HC=h(Ke.prototype,"particleLeft",[DC,OC],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),jC=h(Ke.prototype,"particleRight",[IC,NC],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),WC=h(Ke.prototype,"backgroundAnimation",[FC,zC],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h(Ke.prototype,"playTweens",[xC],Object.getOwnPropertyDescriptor(Ke.prototype,"playTweens"),Ke.prototype),h(Ke.prototype,"playParticles",[GC],Object.getOwnPropertyDescriptor(Ke.prototype,"playParticles"),Ke.prototype),h(Ke.prototype,"playAnimations",[MC],Object.getOwnPropertyDescriptor(Ke.prototype,"playAnimations"),Ke.prototype),Ir=Ke))||Ir),d._RF.pop(),d._RF.push({},"16f4aNBnvRI1Z/6f8l+RIiE","TestLayoutScene",void 0);var YC,JC,XC,ZC,FL=f.ccclass,zL=f.disallowMultiple;FL("TestLayoutScene")(Nr=zL(Nr=function(l){E(o,l);var r=A(o);function o(){var e;return S(this,o),(e=r.call(this)).handleLayoutChange=function(){G.showNotificationScreen("Layout changed")},Ve.markIsTestScene(Ye.TEST_LAYOUT_SCENE),e}return k(o,[{key:"start",value:function value(){this.isValid&&this.listenGameEvents()}},{key:"listenGameEvents",value:function value(){me.on(we.LAYOUT_CHANGED,this.handleLayoutChange)}},{key:"switchScene",value:function value(){Ve.switchScene(Ye.DASHBOARD_SCENE)}}]),o}(D))||Nr),d._RF.pop(),d._RF.push({},"b5a9b5CfCVE56tnPfBAE8JR","TestParticleSystemScene",void 0);var Fr,xL=f.ccclass,GL=f.property;YC=xL("TestParticleSystemScene"),JC=GL(to),YC((ZC=h((XC=function(l){E(o,l);var r=A(o);function o(){var e;return S(this,o),e=r.call(this),p(e,"starParticleSystem",ZC,v(e)),Ve.markIsTestScene(Ye.TEST_PARTICLE_SYSTEM_SCENE),e}return k(o,[{key:"start",value:function value(){var e=this;this.isValid&&this.scheduleOnce(function(){e.starParticleSystem.play()},1)}}]),o}(D)).prototype,"starParticleSystem",[JC],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),XC)),d._RF.pop(),d._RF.push({},"03336l0Yy9BkI817xYNA8KM","TestPerformanceScene",void 0);var zr,ML=f.ccclass,UL=f.disallowMultiple;ML("TestPerformanceScene")(Fr=UL(Fr=function(l){E(o,l);var r=A(o);function o(){var e;return S(this,o),e=r.call(this),Ve.markIsTestScene(Ye.TEST_PERFORMANCE_SCENE),e}return k(o,[{key:"start",value:function value(){this.isValid&&this.listenEvents()}},{key:"listenEvents",value:function value(){}}]),o}(D))||Fr),d._RF.pop(),d._RF.push({},"0e876/A9rJJh6RiiBfkpaVx","TestScene",void 0);var jL=f.ccclass,WL=f.disallowMultiple,qL=Ludex.Events,KL=codex.event;jL("TestScene")(zr=WL(zr=function(l){E(o,l);var r=A(o);function o(){var e;return S(this,o),e=r.call(this),Ve.markIsTestScene(Ye.TEST_SCENE),e}return k(o,[{key:"start",value:function value(){this.isValid&&(this.listenScreenEvents(),G.openScreen(re.LOADING_SCREEN,{duration:.5}))}},{key:"listenScreenEvents",value:function value(){KL.once(qL.CLOSED_SCREEN,function(e){e.screenName===Xr[re.LOADING_SCREEN]&&G.openScreen(re.NOTIFICATION_SCREEN,{message:"Test screen events pass!",duration:2,isCloseButtonVisible:!1})})}}]),o}(D))||zr),d._RF.pop(),d._RF.push({},"0a69a5acDJJDrbwLJnxnyXY","AdsFlows",void 0);var QC,$C,eE,tE,nE,iE,Be,YL=f.ccclass,xr=Ludex.Plugins.Ads.Types;YL("AdsFlows")(function(l){E(o,l);var r=A(o);function o(){return S(this,o),r.apply(this,arguments)}return k(o,[{key:"preloadAds",value:function value(){he.preloadAds()}},{key:"checkServiceDegraded",value:function value(){var e=he.isServiceDegraded();G.showNotificationScreen("Service degraded: ".concat(e?"true":"false"))}},{key:"loadInterstitialAd",value:function value(){he.preloadAdsByType(xr.INTERSTITIAL)}},{key:"loadRewardedVideoAd",value:function value(){he.preloadAdsByType(xr.REWARDED_VIDEO)}},{key:"loadRewardedInterstitialAd",value:function value(){he.preloadAdsByType(xr.REWARDED_INTERSTITIAL)}},{key:"showInterstitialAd",value:function value(){he.showInterstitialAdAsync({contextType:"browse"})}},{key:"showRewardedVideoAd",value:function value(){he.showRewardVideoAdAsync({contextType:"reward",forceLoad:!0})}},{key:"showRewardedInterstitialAd",value:function value(){he.showRewardedInterstitialAdAsync({contextType:"reward",forceLoad:!0})}},{key:"showBannerAd",value:function value(){he.showBannerAds()}},{key:"hideBannerAd",value:function value(){he.hideBannerAds()}},{key:"showAdsenseInterstitialAd",value:function value(){he.showInterstitialAdAsync({adService:"adsense"})}},{key:"showAdsenseRewardedVideoAd",value:function value(){he.showRewardVideoAdAsync({adService:"adsense",forceLoad:!0})}},{key:"showAdsenseRewardedInterstitialAd",value:function value(){he.showRewardedInterstitialAdAsync({adService:"adsense",forceLoad:!0})}}]),o}(D)),d._RF.pop(),d._RF.push({},"f5c69RbYb1Cl4DusuWnM8MV","FlowChallenge",void 0);var aE,oE,rE,xn,XL=f.ccclass,Gr=Ludex.Utils,Xi=Gr.Decorator,lo=Gr.String,ZL=Gr.Number,sE=codex,Gn=sE.match,QL=sE.player,Zi=function Zi(l){G.closeLoadingScreen(),_instanceof(l,Error)&&G.showNotificationScreen(l.message)};QC=XL("FlowChallenge"),$C=Xi.tryCatch(Zi),eE=Xi.tryCatch(Zi),tE=Xi.tryCatch(Zi),nE=Xi.tryCatch(Zi),iE=Xi.tryCatch(Zi),QC((h((Be=function(l){E(a,l);var r,o,e,t,n,i=A(a);function a(){var s;S(this,a);for(var u=arguments.length,c=Array(u),y=0;y<u;y++)c[y]=arguments[y];return(s=i.call.apply(i,[this].concat(c))).playerId="",s.matchId="",s.contextId="",s.opponentId="",s}return k(a,[{key:"onLoad",value:function value(){this.playerId=QL.getPlayerId(),this.matchId=lo.generateObjectId(),this.contextId=lo.generateObjectId(),this.opponentId=lo.generateObjectId()}},{key:"inviteFriends",value:(n=B(function(){return _ts_generator(this,function(_state){switch(_state.label){case 0:return G.showLoadingScreen(0),[4,Gn.challenge.invite.processAsync({playerId:this.playerId,extraData:{rescued:0}})];case 1:return _state.sent(),[2]}})}),function(){return n.apply(this,arguments)})},{key:"challengeFriend",value:(t=B(function(){var s;return _ts_generator(this,function(_state){switch(_state.label){case 0:return s={playerId:this.playerId,opponentId:this.opponentId},G.showLoadingScreen(0),[4,Gn.challenge.friend.processAsync(s)];case 1:return _state.sent(),[2]}})}),function(){return t.apply(this,arguments)})},{key:"joinChallenge",value:(e=B(function(){var s,u,c;return _ts_generator(this,function(_state){switch(_state.label){case 0:return u=Gn.getMatchState(),c={playerId:this.playerId,contextId:lo.generateObjectId(),matchId:null!=(s=u.id)?s:this.matchId,opponentId:this.opponentId},G.showLoadingScreen(0),[4,Gn.challenge.join.processAsync(c)];case 1:return _state.sent(),[2]}})}),function(){return e.apply(this,arguments)})},{key:"continueChallenge",value:(o=B(function(){var s,u,c;return _ts_generator(this,function(_state){switch(_state.label){case 0:return u=Gn.getMatchState(),c={playerId:this.playerId,matchId:null!=(s=u.id)?s:this.matchId,contextId:this.contextId,opponentId:this.opponentId},G.showLoadingScreen(0),[4,Gn.challenge.continue.processAsync(c)];case 1:return _state.sent(),[2]}})}),function(){return o.apply(this,arguments)})},{key:"finishChallenge",value:(r=B(function(){return _ts_generator(this,function(_state){switch(_state.label){case 0:return G.showLoadingScreen(0),[4,Gn.challenge.finish.processAsync({playerId:this.playerId,playerScore:ZL.random(99999)})];case 1:return _state.sent(),[2]}})}),function(){return r.apply(this,arguments)})}]),a}(D)).prototype,"inviteFriends",[$C],Object.getOwnPropertyDescriptor(Be.prototype,"inviteFriends"),Be.prototype),h(Be.prototype,"challengeFriend",[eE],Object.getOwnPropertyDescriptor(Be.prototype,"challengeFriend"),Be.prototype),h(Be.prototype,"joinChallenge",[tE],Object.getOwnPropertyDescriptor(Be.prototype,"joinChallenge"),Be.prototype),h(Be.prototype,"continueChallenge",[nE],Object.getOwnPropertyDescriptor(Be.prototype,"continueChallenge"),Be.prototype),h(Be.prototype,"finishChallenge",[iE],Object.getOwnPropertyDescriptor(Be.prototype,"finishChallenge"),Be.prototype),Be)),d._RF.pop(),d._RF.push({},"be648IXP/ZCkJ107nu6VzqO","FlowSingle",void 0);var lE,uE,cE,hE,uo,co,dE,pE,yE,$L=f.ccclass,vE=Ludex.Utils,fE=vE.Decorator,eB=vE.Number,mE=codex,gE=mE.match,bE=mE.player,SE=function SE(l){G.closeLoadingScreen(),_instanceof(l,Error)&&G.showNotificationScreen(l.message)};aE=$L("FlowSingle"),oE=fE.tryCatch(SE),rE=fE.tryCatch(SE),aE((h((xn=function(l){E(t,l);var r,o,e=A(t);function t(){var n;S(this,t);for(var i=arguments.length,a=Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,[this].concat(a))).playerId="",n}return k(t,[{key:"onLoad",value:function value(){this.playerId=bE.getPlayerId()}},{key:"startSingle",value:(o=B(function(){return _ts_generator(this,function(_state){switch(_state.label){case 0:return G.showLoadingScreen(0),[4,gE.single.start.processAsync({playerId:this.playerId})];case 1:return _state.sent(),[2]}})}),function(){return o.apply(this,arguments)})},{key:"finishSingle",value:(r=B(function(){return _ts_generator(this,function(_state){switch(_state.label){case 0:return bE.setPlayerDataByName("score",eB.random(1e3)),[4,gE.single.finish.processAsync()];case 1:return _state.sent(),[2]}})}),function(){return r.apply(this,arguments)})}]),t}(D)).prototype,"startSingle",[oE],Object.getOwnPropertyDescriptor(xn.prototype,"startSingle"),xn.prototype),h(xn.prototype,"finishSingle",[rE],Object.getOwnPropertyDescriptor(xn.prototype,"finishSingle"),xn.prototype),xn)),d._RF.pop(),d._RF.push({},"acb0egHPppFmYJalVNrDDv/","BaseScreen",void 0);var Mr,tB=f.ccclass,Ur=f.property,nB=f.disallowMultiple,kE=Ludex.Events,wE=codex.event,kt=(lE=tB("BaseScreen"),uE=Ur(b),cE=Ur(b),hE=Ur(W),lE(uo=nB((dE=h((co=function(l){E(o,l);var r=A(o);function o(){var e;S(this,o);for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return e=r.call.apply(r,[this].concat(n)),p(e,"container",dE,v(e)),p(e,"backgroundMask",pE,v(e)),p(e,"screenOpacity",yE,v(e)),e.data={},e}return k(o,[{key:"__preload",value:function value(){this.animation=this.getComponent(De),this.backgroundMaskButton=this.backgroundMask.getComponent(se),this.validateRequiredComponents(),this.initializeNodes()}},{key:"initializeNodes",value:function value(){var e=this.getMaskOpacity(),t=this.getContainerOpacity();e&&t&&(e.opacity=0,t.opacity=0)}},{key:"validateRequiredComponents",value:function value(){L.lazyValidateProperties(this)}},{key:"setScreenOpacity",value:function value(e){this.screenOpacity.opacity=e}},{key:"open",value:function value(e){var t,n,i=this;e&&(this.data=e),this.animation.once(De.EventType.PLAY,function(){i.show()}),wE.emit(kE.OPENED_SCREEN,{screenName:this.node.name,screenData:this.data}),this.runAnimation(null!=(t=null==(n=this.data.overrideAnimation)?void 0:n.openScreen)?t:"OpenScreen")}},{key:"close",value:function value(){var e,t,n=this;this.node.active&&(this.animation.once(De.EventType.FINISHED,function(){wE.emit(kE.CLOSED_SCREEN,{screenName:n.node.name}),n.hide()}),this.runAnimation(null!=(e=null==(t=this.data.overrideAnimation)?void 0:t.closeScreen)?e:"CloseScreen"))}},{key:"runAnimation",value:function value(e){if(!this.isAnimationExist(e))throw Error("".concat(this.node.name,": Animation component must have ").concat(e," clip"));this.animation.play(e)}},{key:"isAnimationExist",value:function value(e){return this.animation.clips.some(function(t){return!(!t||t.name!==e)})}},{key:"getMaskOpacity",value:function value(){return this.backgroundMask.getComponent(W)||null}},{key:"getContainerOpacity",value:function value(){return this.container.getComponent(W)||null}},{key:"show",value:function value(){this.node.active=!0;var e=this.node.getComponent(It);if(e){e.enabled=!0,e.updateAlignment();var t,n=this.node.getComponentsInChildren(It),i=O(n);try{for(i.s();!(t=i.n()).done;)t.value.updateAlignment()}catch(a){i.e(a)}finally{i.f()}}}},{key:"hide",value:function value(){this.node.active=!1}}]),o}(D)).prototype,"container",[uE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pE=h(co.prototype,"backgroundMask",[cE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yE=h(co.prototype,"screenOpacity",[hE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),uo=co))||uo)||uo);d._RF.pop(),d._RF.push({},"f3521L4Mn5I3bhxr0QZJ9y9","BackgroundMask",void 0);var CE,EE,Hr,AE,TE,iB=f.ccclass,aB=f.requireComponent;iB("BackgroundMask")(Mr=aB([W])(Mr=function(l){E(o,l);var r=A(o);function o(){return S(this,o),r.apply(this,arguments)}return k(o,[{key:"onLoad",value:function value(){var e=this.getComponent(W);e&&(this.opacity=e,this.updateMaskAlpha())}},{key:"updateMaskAlpha",value:function value(){var t,n=this.opacity.opacity/255;(t=document.getElementById("app-mask"))&&(t.style.background="rgb(0 0 0 / ".concat(n,")"))}}]),o}(D))||Mr),d._RF.pop(),d._RF.push({},"d562cAXnG1PQ6vXfOEq2wVu","Screens",void 0);var RE,PE,_E,LE,BE,DE,OE,Qi,mi,IE,NE,FE,zE,xE,oB=f.ccclass,rB=f.property,sB=f.executeInEditMode;CE=oB("Screens"),EE=rB({type:Xe(re)}),CE(Hr=sB((TE=h((AE=function(l){E(o,l);var r=A(o);function o(){var e;S(this,o);for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return e=r.call.apply(r,[this].concat(n)),p(e,"screenKeys",TE,v(e)),e}return k(o,[{key:"onEnable",value:function value(){}},{key:"onDisable",value:function value(){}},{key:"onChildrenChanged",value:function value(){}}]),o}(D)).prototype,"screenKeys",[EE],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return[]}}),Hr=AE))||Hr),d._RF.pop(),d._RF.push({},"cecf2nUBzhIWZw7uJgVliXz","CongratulationScreen",void 0);var GE,ME,UE,jr,jE,WE,lB=f.ccclass,$i=f.property,uB=f.disallowMultiple,cB=f.requireComponent,ho=Ludex.Events,po=codex.event;RE=lB("CongratulationScreen"),PE=cB(kt),_E=$i(b),LE=$i(b),BE=$i(se),DE=$i(se),OE=$i(se),RE(Qi=uB(Qi=PE((IE=h((mi=function(l){E(o,l);var r=A(o);function o(){var e;S(this,o);for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return e=r.call.apply(r,[this].concat(n)),p(e,"congratulation",IE,v(e)),p(e,"confirmation",NE,v(e)),p(e,"closeButtonComponent",FE,v(e)),p(e,"yesButtonComponent",zE,v(e)),p(e,"noButtonComponent",xE,v(e)),e.handleOpeningScreen=function(a){if(!e.screen)throw Error("CongratulationScreen: screen not found");e.validateEventPayload(a)&&(e.closeButtonComponent.interactable=!0,e.yesButtonComponent.interactable=!0,e.noButtonComponent.interactable=!0)},e.handleOpenedScreen=function(a){e.validateEventPayload(a)&&e.open()},e}return k(o,[{key:"__preload",value:function value(){this.enabled=!1,this.screen=this.getComponent(kt),this.validateRequiredComponents(),this.listenScreenEvents()}},{key:"onDestroy",value:function value(){this.unListenScreenEvents()}},{key:"validateRequiredComponents",value:function value(){L.lazyValidateProperties(this)}},{key:"listenScreenEvents",value:function value(){po.on(ho.OPENING_SCREEN,this.handleOpeningScreen),po.on(ho.OPENED_SCREEN,this.handleOpenedScreen)}},{key:"unListenScreenEvents",value:function value(){po.off(ho.OPENING_SCREEN,this.handleOpeningScreen),po.off(ho.OPENED_SCREEN,this.handleOpenedScreen)}},{key:"validateEventPayload",value:function value(e){return e.screenName===this.node.name}},{key:"open",value:function value(){this.enabled&&(this.confirmation.active=!1,this.congratulation.active=!0)}},{key:"close",value:function value(){this.closeButtonComponent.interactable=!1,this.yesButtonComponent.interactable=!1,this.noButtonComponent.interactable=!1,G.closeScreen(re.CONGRATULATION_SCREEN)}},{key:"handleStartOver",value:function value(){this.confirmation.active=!0,this.congratulation.active=!1;var e=this.confirmation.getComponent(W);e&&(j(e).set({opacity:0}).to(.2,{opacity:255},{easing:"smooth"}).start(),j(this.confirmation).set({scale:new I(0,0,0)}).to(.2,{scale:new I(1,1,1)},{easing:"smooth"}).start())}},{key:"handleYesStartOver",value:function value(){this.close(),this.node.scene.emit(F.START_OVER)}},{key:"handleNoStartOver",value:function value(){this.close(),this.node.scene.emit(F.GAME_REPLAY,{level:this.screen.data.level})}},{key:"handleClickedClose",value:function value(){this.close(),this.node.scene.emit(F.GAME_REPLAY,{level:this.screen.data.level})}}]),o}(D)).prototype,"congratulation",[_E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),NE=h(mi.prototype,"confirmation",[LE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),FE=h(mi.prototype,"closeButtonComponent",[BE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),zE=h(mi.prototype,"yesButtonComponent",[DE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xE=h(mi.prototype,"noButtonComponent",[OE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Qi=mi))||Qi)||Qi),d._RF.pop(),d._RF.push({},"7b024d/xQ1BBZV0UpNjM9UQ","LoadingFullScreen",void 0);var qE,KE,VE,YE,dB=f.ccclass,JE=f.property,pB=(GE=dB("LoadingFullScreen"),ME=JE(Ro),UE=JE(Y),GE((jE=h((jr=function(l){E(t,l);var r,o,e=A(t);function t(){var n;S(this,t);for(var i=arguments.length,a=Array(i),s=0;s<i;s++)a[s]=arguments[s];return n=e.call.apply(e,[this].concat(a)),p(n,"progressBar",jE,v(n)),p(n,"loadingText",WE,v(n)),n}return k(t,[{key:"__preload",value:function value(){this.uiOpacity=this.getComponent(W),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function value(){L.lazyValidateProperties(this)}},{key:"runLoadingTextAnimation",value:function value(){var n=this,i=0;this.schedule(function(){i=i>2?0:i+1,n.loadingText.string="Loading"+".".repeat(i)},.5)}},{key:"stopLoadingTextAnimation",value:function value(){this.unscheduleAllCallbacks()}},{key:"show",value:(o=B(function(n){var i,a;return _ts_generator(this,function(_state){switch(_state.label){case 0:return this.uiOpacity.opacity=0,this.progressBar.progress=0,i=j(this.uiOpacity).to(.2,{opacity:255},{easing:"cubicOut"}),a=j(this.progressBar).to(8,{progress:.9},{easing:"cubicOut"}),this.runLoadingTextAnimation(),Dt.runTweenAsync(i),[4,Dt.runTweenAsync(a)];case 1:return _state.sent(),[2]}})}),function(n){return o.apply(this,arguments)})},{key:"hide",value:(r=B(function(n){var i,a;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(!(this.uiOpacity&&this.progressBar))return[3,3];return this.uiOpacity.opacity=255,this.progressBar.progress=.9,i=j(this.uiOpacity).to(.15,{opacity:0},{easing:"cubicIn"}),a=j(this.progressBar).to(.2,{progress:1},{easing:"cubicIn"}),this.runLoadingTextAnimation(),[4,Dt.runTweenAsync(a)];case 1:return _state.sent(),this.stopLoadingTextAnimation(),[4,Dt.runTweenAsync(i)];case 2:_state.sent(),this.node.active=!1,_state.label=3;case 3:return[2]}})}),function(n){return r.apply(this,arguments)})}]),t}(D)).prototype,"progressBar",[ME],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),WE=h(jr.prototype,"loadingText",[UE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),jr))||jr);d._RF.pop(),d._RF.push({},"daa70r49mtGR6iXhcKLcS3q","Loading",void 0);var ea,yB=f.ccclass,vB=f.property;qE=yB("Loading"),KE=vB(fe),qE((YE=h((VE=function(l){E(t,l);var r,o,e=A(t);function t(){var n;S(this,t);for(var i=arguments.length,a=Array(i),s=0;s<i;s++)a[s]=arguments[s];return n=e.call.apply(e,[this].concat(a)),p(n,"loadingPrefab",YE,v(n)),n.loadingNode=null,n}return k(t,[{key:"__preload",value:function value(){this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function value(){L.lazyValidateProperties(this)}},{key:"onLoad",value:function value(){this.makePersistent()}},{key:"makePersistent",value:function value(){V.addPersistRootNode(this.node)}},{key:"createLoadingFullScreen",value:function value(){var n,i=Ze("Canvas");if(i&&!i.getChildByName("Loading")){this.loadingNode||(this.loadingNode=ee(this.loadingPrefab));var a=ee._clone(this.loadingNode);this.loadingFullScreen=a.getComponent(pB),this.node.active=!1,null==(n=Ze("Canvas"))||n.addChild(a)}}},{key:"show",value:(o=B(function(n){return _ts_generator(this,function(_state){switch(_state.label){case 0:if(this.createLoadingFullScreen(),this.node.active)return[3,2];return this.node.active=!0,[4,this.loadingFullScreen.show(n)];case 1:_state.sent(),_state.label=2;case 2:return[2]}})}),function(n){return o.apply(this,arguments)})},{key:"hide",value:(r=B(function(n){var i;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(!(null!=(i=this.node)&&i.active&&this.loadingFullScreen))return[3,2];return[4,this.loadingFullScreen.hide(n)];case 1:_state.sent(),this.node.active=!1,_state.label=2;case 2:return[2]}})}),function(n){return r.apply(this,arguments)})}]),t}(D)).prototype,"loadingPrefab",[KE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),VE)),d._RF.pop(),d._RF.push({},"61985gSEDBMY6nVNc9Q1D6W","LoadingScreen",void 0);var XE,ZE,QE,$E,eA,tA,nA,iA,aA,oA,rA,ta,ut,sA,lA,uA,cA,hA,dA,pA,yA,fB=f.ccclass,mB=f.disallowMultiple,gB=f.requireComponent,un=Ludex.Events,cn=codex.event;fB("LoadingScreen")(ea=mB(ea=gB(kt)(ea=function(l){E(o,l);var r=A(o);function o(){var e;S(this,o);for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return(e=r.call.apply(r,[this].concat(n))).isClosing=!1,e.handleOpeningScreen=function(a){e.validateEventPayload(a)&&(e.enabled=!0,e.isClosing=!1)},e.handleOpenedScreen=function(a){e.validateEventPayload(a)&&e.open()},e.handleClosingScreen=function(a){e.validateEventPayload(a)&&(e.isClosing=!0,e.unscheduleAllCallbacks())},e.handleClosedScreen=function(a){e.validateEventPayload(a)&&(e.enabled=!1,e.isClosing=!1)},e.handleOnCloseScreen=function(){G.closeScreen(re.LOADING_SCREEN)},e}return k(o,[{key:"onLoad",value:function value(){this.enabled=!1,this.screen=this.getComponent(kt),this.validateRequiredComponents(),this.listenScreenEvents()}},{key:"onDestroy",value:function value(){this.unListenScreenEvents()}},{key:"validateRequiredComponents",value:function value(){L.lazyValidateProperties(this)}},{key:"listenScreenEvents",value:function value(){cn.on(un.OPENING_SCREEN,this.handleOpeningScreen),cn.on(un.OPENED_SCREEN,this.handleOpenedScreen),cn.on(un.CLOSING_SCREEN,this.handleClosingScreen),cn.on(un.CLOSED_SCREEN,this.handleClosedScreen)}},{key:"unListenScreenEvents",value:function value(){cn.off(un.OPENING_SCREEN,this.handleOpeningScreen),cn.off(un.OPENED_SCREEN,this.handleOpenedScreen),cn.off(un.CLOSING_SCREEN,this.handleClosingScreen),cn.off(un.CLOSED_SCREEN,this.handleClosedScreen)}},{key:"validateEventPayload",value:function value(e){return e.screenName===this.node.name}},{key:"open",value:function value(){var e;if(this.enabled&&!this.isClosing){var t=null!=(e=this.screen.data.duration)?e:0;this.scheduleOnce(this.handleOnCloseScreen,t)}}}]),o}(D))||ea)||ea),d._RF.pop(),d._RF.push({},"15681ka+CZC45B7BdUhsnhF","LoseScreen",void 0);var vA,fA,mA,gA,na,Wr,bA,SA,bB=f.ccclass,hn=f.property,SB=f.disallowMultiple,kB=f.requireComponent,kA=Ludex,yo=kA.Events,wB=kA.Utils.Decorator,wA=codex,CB=wA.language,vo=wA.event;XE=bB("LoseScreen"),ZE=kB(kt),QE=hn(Y),$E=hn(se),eA=hn(b),tA=hn(b),nA=hn(se),iA=hn(se),aA=hn(se),oA=hn(se),rA=wB.tryCatch(),XE(ta=SB(ta=ZE((sA=h((ut=function(l){E(o,l);var r=A(o);function o(){var e;S(this,o);for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return(e=r.call.apply(r,[this].concat(n))).mode="classic",p(e,"levelText",sA,v(e)),p(e,"retryButton",lA,v(e)),p(e,"titleRibbon",uA,v(e)),p(e,"dogeHead",cA,v(e)),p(e,"retryButtonComponent",hA,v(e)),p(e,"closeButtonComponent",dA,v(e)),p(e,"endlessButtonComponent",pA,v(e)),p(e,"classicButtonComponent",yA,v(e)),e.isEndlessModeAvailable=!0,e.handleOpeningScreen=function(a){if(!e.screen)throw Error("LoseScreen: screen not found");e.validateEventPayload(a)&&e.setButtonInteractable(!0)},e.handleOpenedScreen=function(a){e.validateEventPayload(a)&&e.open()},e}return k(o,[{key:"__preload",value:function value(){this.enabled=!1,this.screen=this.getComponent(kt),this.validateRequiredComponents(),this.listenScreenEvents(),this.filterUIFeaturesForYoutubePlayables()}},{key:"onLoad",value:function value(){var e=V.getScene();this.mode=e&&e.name===Ye.GAME_SCENE?"classic":"endless"}},{key:"onDestroy",value:function value(){this.unListenScreenEvents()}},{key:"validateRequiredComponents",value:function value(){L.lazyValidateProperties(this)}},{key:"listenScreenEvents",value:function value(){vo.on(yo.OPENING_SCREEN,this.handleOpeningScreen),vo.on(yo.OPENED_SCREEN,this.handleOpenedScreen)}},{key:"unListenScreenEvents",value:function value(){vo.off(yo.OPENING_SCREEN,this.handleOpeningScreen),vo.off(yo.OPENED_SCREEN,this.handleOpenedScreen)}},{key:"validateEventPayload",value:function value(e){return e.screenName===this.node.name}},{key:"open",value:function value(){this.setLevelText(),this.resetState(),this.runOpenAnimation()}},{key:"close",value:function value(){this.setButtonInteractable(!1),G.closeScreen(re.LOSE_SCREEN)}},{key:"runOpenAnimation",value:function value(){var e=this,t=this.createRibbonAnim(),n=this.createDogeHeadAnim(),i=this.createRetryButtonAnim();if(t&&n&&i){var a=j({}).delay(.2).call(function(){return t.start()});if("classic"===this.mode){var s=this.createLevelAnim();if(!s)return;a.delay(.2).call(function(){return s.start()})}a.delay(.3).call(function(){return n.start()}).delay(.2).call(function(){return i.start()}).delay(.2),this.runModeSwapButtonAnim(a),a.call(function(){var u;e.screen.data&&(u=e.screen.data.level),he.showInterstitialAdAsync({forLevel:u,includeSDK:["CrazyGames"]})}).start()}}},{key:"runModeSwapButtonAnim",value:function value(e){if(this.isEndlessModeAvailable)if("endless"===this.mode){var t=this.createClassicButtonAnim();if(!t)return;e.call(function(){return t.start()})}else{var n=this.createEndlessButtonAnim();if(!n)return;e.call(function(){return n.start()})}}},{key:"resetState",value:function value(){var e=this.retryButton.getComponent(W),t=this.titleRibbon.getComponent(W),n=this.levelText.getComponent(W),i=this.dogeHead.getComponent(W),a=this.classicButtonComponent.getComponent(W),s=this.endlessButtonComponent.getComponent(W);e&&t&&n&&i&&a&&s&&(e.opacity=0,t.opacity=0,n.opacity=0,i.opacity=0,a.opacity=0,s.opacity=0,this.dogeHead.setPosition(1e3,-19),this.retryButton.node.active=!1,this.classicButtonComponent.node.active=!1,this.endlessButtonComponent.node.active=!1,this.levelText.node.active=!1)}},{key:"setLevelText",value:function value(){var e=this.screen.data.level,t=CB.getText("game.level");this.levelText.string="".concat(t," ").concat(e)}},{key:"createRibbonAnim",value:function value(){var e=this.titleRibbon.getComponent(W);return e?j(e).set({opacity:0}).to(.3,{opacity:255},{easing:"smooth"}):null}},{key:"createLevelAnim",value:function value(){var e=this.levelText.getComponent(W);return e?(this.levelText.node.active=!0,j(e).set({opacity:0}).to(.3,{opacity:255},{easing:"smooth"})):null}},{key:"createDogeHeadAnim",value:function value(){var e=this.dogeHead.getComponent(W);return e?(this.dogeHead.setPosition(0,-97),j(e).set({opacity:0}).to(.3,{opacity:255},{easing:"smooth"})):null}},{key:"createRetryButtonAnim",value:function value(){var e=this.retryButton.getComponent(W);return e?(this.retryButton.node.active=!0,j(e).set({opacity:0}).to(.4,{opacity:255},{easing:"smooth"})):null}},{key:"createClassicButtonAnim",value:function value(){var e=this.classicButtonComponent.getComponent(W);return e?(this.classicButtonComponent.node.active=!0,j(e).set({opacity:0}).to(.4,{opacity:255},{easing:"smooth"})):null}},{key:"createEndlessButtonAnim",value:function value(){var e=this.endlessButtonComponent.getComponent(W);return e?(this.endlessButtonComponent.node.active=!0,j(e).set({opacity:0}).to(.4,{opacity:255},{easing:"smooth"})):null}},{key:"handleClickedRetryGame",value:function value(){this.close(),this.replayGame()}},{key:"handleClickedClassicMode",value:function value(){this.close(),Ve.switchToGameScene()}},{key:"handleClickedEndlessMode",value:function value(){this.close(),Ve.switchToEndlessScene()}},{key:"handleClickedClose",value:function value(){this.close(),this.replayGame()}},{key:"replayGame",value:function value(){this.node.scene.emit(F.GAME_REPLAY,{level:this.screen.data.level})}},{key:"filterUIFeaturesForYoutubePlayables",value:function value(){this.endlessButtonComponent.node.active=!1,this.classicButtonComponent.node.active=!1,this.endlessButtonComponent.interactable=!1,this.classicButtonComponent.interactable=!1,this.isEndlessModeAvailable=!1}},{key:"setButtonInteractable",value:function value(e){this.retryButtonComponent.interactable=e,this.closeButtonComponent.interactable=e;var t=this.endlessButtonComponent.node.active,n=this.classicButtonComponent.node.active;t&&(this.endlessButtonComponent.interactable=e),n&&(this.classicButtonComponent.interactable=e)}}]),o}(D)).prototype,"levelText",[QE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),lA=h(ut.prototype,"retryButton",[$E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),uA=h(ut.prototype,"titleRibbon",[eA],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cA=h(ut.prototype,"dogeHead",[tA],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),hA=h(ut.prototype,"retryButtonComponent",[nA],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),dA=h(ut.prototype,"closeButtonComponent",[iA],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pA=h(ut.prototype,"endlessButtonComponent",[aA],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yA=h(ut.prototype,"classicButtonComponent",[oA],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h(ut.prototype,"setLevelText",[rA],Object.getOwnPropertyDescriptor(ut.prototype,"setLevelText"),ut.prototype),ta=ut))||ta)||ta),d._RF.pop(),d._RF.push({},"6460akNFfhP9pDOT2Z0+s2R","NotificationScreen",void 0);var CA,EA,AA,TA,RA,PA,_A,LA,BA,DA,qr,Ht,OA,IA,NA,FA,zA,xA,GA,MA,EB=f.ccclass,AB=f.disallowMultiple,TB=f.requireComponent,UA=f.property,HA=Ludex,fo=HA.Events,RB=HA.Utils,mo=codex.event;vA=EB("NotificationScreen"),fA=TB(kt),mA=UA(Y),gA=UA(se),vA(na=AB(na=fA((bA=h((Wr=function(l){E(o,l);var r=A(o);function o(){var e;S(this,o);for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return e=r.call.apply(r,[this].concat(n)),p(e,"message",bA,v(e)),p(e,"touchZone",SA,v(e)),e.enableCloseOnTouch=!0,e.handleOpeningScreen=function(a){e.validateEventPayload(a)&&e.updateScreenData(a)},e.handleClosingScreen=function(a){e.validateEventPayload(a)&&e.unscheduleAllCallbacks()},e}return k(o,[{key:"__preload",value:function value(){this.listenScreenEvents()}},{key:"onDestroy",value:function value(){this.unListenScreenEvents()}},{key:"onLoad",value:function value(){this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function value(){L.lazyValidateProperties(this)}},{key:"listenScreenEvents",value:function value(){mo.on(fo.OPENING_SCREEN,this.handleOpeningScreen),mo.on(fo.CLOSING_SCREEN,this.handleClosingScreen)}},{key:"unListenScreenEvents",value:function value(){mo.off(fo.OPENING_SCREEN,this.handleOpeningScreen),mo.off(fo.CLOSING_SCREEN,this.handleClosingScreen)}},{key:"validateEventPayload",value:function value(e){return e.screenName===this.node.name}},{key:"updateScreenData",value:function value(e){var t=e.screenData;RB.Valid.isObject(t)&&(t.message&&(this.message.string=t.message),t.duration&&t.duration>0&&this.scheduleOnce(function(){G.closeScreen(re.NOTIFICATION_SCREEN)},t.duration),!1===t.enableCloseOnTouch?this.enableCloseOnTouch=!1:this.enableCloseOnTouch=!0)}},{key:"handleClickedClose",value:function value(){this.unscheduleAllCallbacks(),G.closeScreen(re.NOTIFICATION_SCREEN)}},{key:"closeOnTouch",value:function value(){this.enableCloseOnTouch&&this.handleClickedClose()}}]),o}(D)).prototype,"message",[mA],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),SA=h(Wr.prototype,"touchZone",[gA],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),na=Wr))||na)||na),d._RF.pop(),d._RF.push({},"61932YLC/5CFrE0eD0ez8Zg","SettingsScreen",void 0);var jA,WA,qA,KA,VA,YA,JA,XA,ZA,QA,$A,eT,tT,ia,ct,nT,iT,aT,oT,rT,sT,lT,uT,cT,hT,dT,PB=f.ccclass,dn=f.property,_B=f.requireComponent,pT=Ludex,yT=pT.Events,Kr=pT.Utils,vT=codex,Mn=vT.player,fT=vT.event;CA=PB("SettingsScreen"),EA=_B(kt),AA=dn(b),TA=dn(b),RA=dn(b),PA=dn(Li),_A=dn(Li),LA=dn(Li),BA=dn(se),DA=dn(se),CA(qr=EA((OA=h((Ht=function(l){E(o,l);var r=A(o);function o(){var e;S(this,o);for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return e=r.call.apply(r,[this].concat(n)),p(e,"musicSetting",OA,v(e)),p(e,"soundSetting",IA,v(e)),p(e,"vibrateSetting",NA,v(e)),p(e,"musicSwitch",FA,v(e)),p(e,"soundSwitch",zA,v(e)),p(e,"vibrateSwitch",xA,v(e)),p(e,"closeButtonComponent",GA,v(e)),p(e,"resumeButtonComponent",MA,v(e)),e.triggerSequence="",e.handleOpeningScreen=function(a){e.validateEventPayload(a)&&(e.closeButtonComponent.interactable=!0,e.resumeButtonComponent.interactable=!0,e.updateStatus())},e.handleResetSequence=function(){e.triggerSequence=""},e.handleTriggerUnlockKey=function(a){var s=a.code,u="101013012031";"number"==typeof s&&-1!==u.indexOf(s.toString())&&(e.triggerSequence+=s.toString(),e.triggerSequence===u&&(e.node.scene.emit(gp.UNLOCK_DEV_TOOLS),e.node.off(gp.TRIGGER_UNLOCK_KEY)))},e.updateVibrateButton=function(){if(e.isVibrateAvailable()){var a=e.vibrateSetting.getComponentInChildren(Li);if(a)if(Kr.Device.isMobile()){var s,u=null!=(s=Mn.getPlayerSetting("vibrate"))&&s;a.setEnabled(u)}else e.setSwitchNodeUIState(e.vibrateSetting,!1)}},e}return k(o,[{key:"onLoad",value:function value(){this.enabled=!1,this.screen=this.getComponent(kt),this.validateRequiredComponents(),this.listenScreenEvents(),this.listenUnlockDevTools(),this.handleDisableVibrate(),this.handleYoutubePlayablesUIChanges()}},{key:"onDestroy",value:function value(){this.unListenScreenEvents(),this.unListenUnlockDevTools()}},{key:"validateRequiredComponents",value:function value(){L.lazyValidateProperties(this)}},{key:"handleDisableVibrate",value:function value(){if(!this.isVibrateAvailable()){this.vibrateSetting.active=!1;var e=this.musicSetting.position,t=e.x,n=e.y,i=e.z;this.musicSetting.setPosition(new I(t,n-50,i));var a=this.soundSetting.position,s=a.x,u=a.y,c=a.z;this.soundSetting.setPosition(new I(s,u-50,c))}}},{key:"handleYoutubePlayablesUIChanges",value:function value(){var e=this;if(GameSDK.isGameSDK("YoutubePlayables")){var t=function t(n){e.setSwitchNodeUIState(e.musicSetting,n),e.setSwitchNodeUIState(e.soundSetting,n)};GameSDK.extra.onAudioEnabledChange(t),t(GameSDK.extra.isAudioEnabled())}}},{key:"listenScreenEvents",value:function value(){fT.on(yT.OPENING_SCREEN,this.handleOpeningScreen)}},{key:"unListenScreenEvents",value:function value(){fT.off(yT.OPENING_SCREEN,this.handleOpeningScreen)}},{key:"validateEventPayload",value:function value(e){return e.screenName===this.node.name}},{key:"listenUnlockDevTools",value:function value(){this.node.off(gp.TRIGGER_UNLOCK_KEY),this.node.on(gp.TRIGGER_RESET_SEQUENCE,this.handleResetSequence),this.node.on(gp.TRIGGER_UNLOCK_KEY,this.handleTriggerUnlockKey)}},{key:"unListenUnlockDevTools",value:function value(){this.node.off(gp.TRIGGER_RESET_SEQUENCE,this.handleResetSequence),this.node.off(gp.TRIGGER_UNLOCK_KEY,this.handleTriggerUnlockKey)}},{key:"open",value:function value(){this.updateStatus(),this.runPopUpAnimation(),this.node.emit(gp.TRIGGER_RESET_SEQUENCE)}},{key:"close",value:function value(){this.closeButtonComponent.interactable=!1,this.resumeButtonComponent.interactable=!1,this.node.emit(gp.TRIGGER_RESET_SEQUENCE),G.closeScreen(re.SETTINGS_SCREEN)}},{key:"updateStatus",value:function value(){var e,t,n,i={music:null!=(e=Mn.getPlayerSetting("music"))&&e,sound:null!=(t=Mn.getPlayerSetting("sound"))&&t,vibrate:null!=(n=Mn.getPlayerSetting("vibrate"))&&n};this.musicSwitch&&this.soundSwitch&&(this.musicSwitch.setEnabled(i.music),this.soundSwitch.setEnabled(i.sound),this.scheduleOnce(this.updateVibrateButton,.1))}},{key:"runPopUpAnimation",value:function value(){this.screen.container}},{key:"switchMusicButton",value:function value(){if(this.musicSwitch){var e=this.musicSwitch.switch();Mn.setSetting("music",e),this.node.emit(gp.TRIGGER_UNLOCK_KEY,{code:+!!e}),e?M.playMusic(Q.BG_MUSIC):M.pauseMusic()}}},{key:"switchSoundButton",value:function value(){if(this.soundSwitch){var e=this.soundSwitch.switch();Mn.setSetting("sound",e),this.node.emit(gp.TRIGGER_UNLOCK_KEY,{code:e?3:2})}}},{key:"switchVibrateButton",value:function value(){if(this.vibrateSwitch){var e=this.vibrateSwitch.switch();Mn.setSetting("vibrate",e)}}},{key:"handleClickedResume",value:function value(){this.resumeGame()}},{key:"handleClickedClose",value:function value(){this.resumeGame()}},{key:"resumeGame",value:function value(){this.close(),this.node.scene.emit(F.GAME_RESUME)}},{key:"setSwitchNodeUIState",value:function value(e,t){var n=e.getComponentInChildren(se),i=e.getComponentInChildren(Li),a=e.getComponentInChildren(Uo);n&&i&&a&&(n.interactable=t,i.setEnabled(t),a.changeState(t))}},{key:"isVibrateAvailable",value:function value(){var e=GameSDK.isGameSDK("GameDistribution"),t=Kr.Device.isDesktop(),n=Kr.Device.isIOS()&&!GameSDK.isGameSDK("FacebookInstant");return!(e||t||n)}}]),o}(D)).prototype,"musicSetting",[AA],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),IA=h(Ht.prototype,"soundSetting",[TA],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),NA=h(Ht.prototype,"vibrateSetting",[RA],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),FA=h(Ht.prototype,"musicSwitch",[PA],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),zA=h(Ht.prototype,"soundSwitch",[_A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xA=h(Ht.prototype,"vibrateSwitch",[LA],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),GA=h(Ht.prototype,"closeButtonComponent",[BA],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),MA=h(Ht.prototype,"resumeButtonComponent",[DA],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),qr=Ht))||qr),d._RF.pop(),d._RF.push({},"35c09YGmdFA4pHOJFDg1tw5","WinningScreen",void 0);var LB=f.ccclass,wt=f.property,BB=f.disallowMultiple,DB=f.requireComponent,gi=Ludex.Events,Vr=codex,mT=Vr.player,bi=Vr.event,OB=Vr.language;jA=LB("WinningScreen"),WA=DB(kt),qA=wt(oe),KA=wt(se),VA=wt(se),YA=wt(b),JA=wt(b),XA=wt(Y),ZA=wt(se),QA=wt(se),$A=wt(se),eT=wt(se),tT=wt(se),jA(ia=BB(ia=WA((nT=h((ct=function(l){E(o,l);var r=A(o);function o(){var e;S(this,o);for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return(e=r.call.apply(r,[this].concat(n))).mode="classic",p(e,"titleRibbon",nT,v(e)),p(e,"nextLevelButton",iT,v(e)),p(e,"retryLevelButton",aT,v(e)),p(e,"confettiGroup",oT,v(e)),p(e,"dogeHead",rT,v(e)),p(e,"levelText",sT,v(e)),p(e,"closeButtonComponent",lT,v(e)),p(e,"nextLevelButtonComponent",uT,v(e)),p(e,"retryLevelButtonComponent",cT,v(e)),p(e,"classicButtonComponent",hT,v(e)),p(e,"endlessButtonComponent",dT,v(e)),e.starsCollected=3,e.isEndlessModeAvailable=!0,e.handleOpeningScreen=function(a){if(!e.screen)throw Error("WinningScreen: screen not found");e.validateEventPayload(a)&&(e.closeButtonComponent.interactable=!0,e.retryLevelButtonComponent.interactable=!0,e.nextLevelButtonComponent.interactable=!0,e.classicButtonComponent.interactable=!0,e.endlessButtonComponent.interactable=!0)},e.handleOpenedScreen=function(a){e.validateEventPayload(a)&&e.open()},e.handleClosingScreen=function(a){e.validateEventPayload(a)&&e.unscheduleAllCallbacks()},e}return k(o,[{key:"__preload",value:function value(){this.enabled=!1,this.screen=this.getComponent(kt),this.validateRequiredComponents(),this.listenScreenEvents(),this.filterUIFeaturesForYoutubePlayables()}},{key:"onLoad",value:function value(){var e=V.getScene();this.mode=e&&e.name===Ye.GAME_SCENE?"classic":"endless"}},{key:"onDestroy",value:function value(){this.unListenScreenEvents()}},{key:"validateRequiredComponents",value:function value(){L.lazyValidateProperties(this)}},{key:"listenScreenEvents",value:function value(){bi.on(gi.OPENING_SCREEN,this.handleOpeningScreen),bi.on(gi.OPENED_SCREEN,this.handleOpenedScreen),bi.on(gi.CLOSING_SCREEN,this.handleClosingScreen)}},{key:"unListenScreenEvents",value:function value(){bi.off(gi.OPENING_SCREEN,this.handleOpeningScreen),bi.off(gi.OPENED_SCREEN,this.handleOpenedScreen),bi.off(gi.CLOSING_SCREEN,this.handleClosingScreen)}},{key:"validateEventPayload",value:function value(e){return e.screenName===this.node.name}},{key:"start",value:function value(){var e=this;this.dogeHead.translate(new I(-1e3,0)),this.scheduleOnce(function(){e.dogeHead.translate(new I(1e3,0))},.1)}},{key:"open",value:function value(){var e=this;this.nextLevelButton.node.active=!1,this.retryLevelButton.node.active=!1,this.classicButtonComponent.node.active=!1,this.endlessButtonComponent.node.active=!1,this.closeButtonComponent.interactable=!1,this.classicButtonComponent.interactable=!1,this.endlessButtonComponent.interactable=!1,this.confettiGroup.active=!0,this.updateLevel(),this.updateStars(),this.runRibbonAnimation();var t=this.runStarsAnimation();this.runConfetti(t),this.scheduleOnce(B(function(){var n,i,a,s;return _ts_generator(this,function(_state){switch(_state.label){case 0:return[4,he.showInterstitialAdAsync({forLevel:e.screen.data.level,excludeSDK:["CrazyGames"]})];case 1:if(_state.sent(),e.nextLevelButton.node.active=!0,e.retryLevelButton.node.active=!0,e.closeButtonComponent.interactable=!0,(n=e.nextLevelButton.getComponent(W))&&(j(n).set({opacity:0}).to(.4,{opacity:255},{easing:"smooth"}).start(),(i=e.retryLevelButton.getComponent(W))&&(j(i).set({opacity:0}).delay(.2).to(.4,{opacity:255},{easing:"smooth"}).start(),e.isEndlessModeAvailable)))if("classic"===e.mode){if(a=e.createEndlessButtonAnim(),e.endlessButtonComponent.interactable=!0,!a)return[2];a.start()}else{if(s=e.createClassicButtonAnim(),e.classicButtonComponent.interactable=!0,!s)return[2];s.start()}return[2]}})}),t),M.playSound(Q.HAND_CLAP)}},{key:"close",value:function value(){this.closeButtonComponent.interactable=!1,this.retryLevelButtonComponent.interactable=!1,this.nextLevelButtonComponent.interactable=!1,this.classicButtonComponent.interactable=!1,this.endlessButtonComponent.interactable=!1,this.confettiGroup.active=!1,G.closeScreen(re.WINNING_SCREEN)}},{key:"showCongratulationScreen",value:function value(){G.openScreen(re.CONGRATULATION_SCREEN,{level:this.screen.data.level})}},{key:"handleClickedNextLevel",value:function value(){if(mT.getGameData()){var e=this.screen.data.level;e&&(this.node.scene.emit(F.NEXT_LEVEL,{level:e}),this.close())}}},{key:"handleClickedRetry",value:function value(){this.close(),this.node.scene.emit(F.GAME_REPLAY,{level:this.screen.data.level})}},{key:"handleClickedClose",value:function value(){this.close();var e=this.screen.data.level;this.node.scene.emit(F.NEXT_LEVEL,{level:e})}},{key:"updateStars",value:function value(){var e;this.starsCollected=null!=(e=this.screen.data.stars)?e:0}},{key:"updateLevel",value:function value(){var e=this.screen.data.level,t=OB.getText("game.level");this.levelText.string="".concat(t," ").concat(e)}},{key:"runRibbonAnimation",value:function value(){this.titleRibbon.fillRange=0,j(this.titleRibbon).to(.5,{fillRange:1},{easing:"backInOut"}).start()}},{key:"runStarsAnimation",value:function value(){var e=this,t=Ze("Container/Stars/RightStar",this.node),n=Ze("Container/Stars/LeftStar",this.node),i=Ze("Container/Stars/MidStar",this.node),a=[n,i,t];if(!t||!n||!i)return 0;for(var s=0;s<a.length;s++){var c=a[s];if(c){var y=c.getChildByName("Star");y&&(y.active=!1)}}this.animateStars(a);for(var m,w=1.32,g=0;g<this.starsCollected;g++)if(m=function _(){var C=a[g];if(!C)return{v:0};var P=C.getChildByName("Star");if(!P)return{v:0};e.scheduleOnce(function(){P.active=!0,M.playSound(Q.STAR_RAISE),j(P).set({scale:new I(1.7,1.7,1)}).to(.35,{scale:new I(1,1,1)},{easing:"backOut"}).start()},w),w+=.3}())return m.v;return w}},{key:"animateStars",value:function value(e){for(var t=0;t<e.length;t++){var n=e[t];if(!n)return;var i=new I(0,0,1),a=new I(1,1,1);1===t&&a.set(1.2,1.2,1),j(n).set({scale:i}).delay(.7).to(.4,{scale:a},{easing:"backOut"}).start()}}},{key:"createClassicButtonAnim",value:function value(){var e=this.classicButtonComponent.getComponent(W);return e?(this.classicButtonComponent.node.active=!0,j(e).set({opacity:0}).delay(.4).to(.4,{opacity:255},{easing:"smooth"})):null}},{key:"createEndlessButtonAnim",value:function value(){var e=this.endlessButtonComponent.getComponent(W);return e?(this.endlessButtonComponent.node.active=!0,j(e).set({opacity:0}).delay(.4).to(.4,{opacity:255},{easing:"smooth"})):null}},{key:"runConfetti",value:function value(e){var t=this;this.stopConfetti();var n=this.confettiGroup.getComponentsInChildren(Wt);this.scheduleOnce(function(){if(!1!==t.node.active){var i,a=O(n);try{for(a.s();!(i=a.n()).done;)i.value.resetSystem()}catch(s){a.e(s)}finally{a.f()}}},e)}},{key:"stopConfetti",value:function value(){var e,t=this.confettiGroup.getComponentsInChildren(Wt),n=O(t);try{for(n.s();!(e=n.n()).done;)e.value.stopSystem()}catch(i){n.e(i)}finally{n.f()}}},{key:"handleClickedClassicMode",value:function value(){this.close(),Ve.switchToGameScene()}},{key:"handleClickedEndlessMode",value:function value(){this.updatePlayerLevelProgress(),this.close(),Ve.switchToEndlessScene()}},{key:"updatePlayerLevelProgress",value:function value(){if(mT.getGameData()){var e=this.screen.data.level;e&&this.node.scene.emit(F.UPDATE_LEVEL,{level:e})}}},{key:"filterUIFeaturesForYoutubePlayables",value:function value(){this.endlessButtonComponent.node.active=!1,this.classicButtonComponent.node.active=!1,this.endlessButtonComponent.interactable=!1,this.classicButtonComponent.interactable=!1,this.isEndlessModeAvailable=!1}}]),o}(D)).prototype,"titleRibbon",[qA],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),iT=h(ct.prototype,"nextLevelButton",[KA],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),aT=h(ct.prototype,"retryLevelButton",[VA],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),oT=h(ct.prototype,"confettiGroup",[YA],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rT=h(ct.prototype,"dogeHead",[JA],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),sT=h(ct.prototype,"levelText",[XA],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),lT=h(ct.prototype,"closeButtonComponent",[ZA],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),uT=h(ct.prototype,"nextLevelButtonComponent",[QA],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cT=h(ct.prototype,"retryLevelButtonComponent",[$A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),hT=h(ct.prototype,"classicButtonComponent",[eT],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),dT=h(ct.prototype,"endlessButtonComponent",[tT],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ia=ct))||ia)||ia),d._RF.pop(),d._RF.push({},"af947t5g91EkZVWXv5upZaV","CacheUtils",void 0),Ludex.Utils.Image,codex.frameCapture,d._RF.pop(),d._RF.push({},"e80e4nIcfdLN56j5b9SMhvH","LeaderboardUtils",void 0),codex.leaderboard,d._RF.pop(),d._RF.push({},"9ecd9Kte0VJN4rRVFlb6CzI","OverlayUtils",void 0);var gT=codex,bT=(gT.player,gT.analytics,Ludex.Plugins.Analytics);(void 0===bT?{}:bT).Events,d._RF.pop(),d._RF.push({},"36e26OmHk5GXL6+/b4UibIf","SortNodeUtils",void 0),d._RF.pop(),d._RF.push({},"88f2b4WH6NBlaGD7WvCOA2j","VibrateUtils",void 0),Ludex.Utils.Browser,codex.player,d._RF.pop()}}});System.register("virtual:///prerequisite-imports/main",["chunks:///main.js"],function(E,A){return{setters:[function(S){var k={};for(var Bt in S)"default"!==Bt&&"__esModule"!==Bt&&(k[Bt]=S[Bt]);E(k)}],execute:function execute(){}}});