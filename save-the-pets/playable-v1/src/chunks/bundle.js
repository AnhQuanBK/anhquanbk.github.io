function _instanceof(left,right){return null!=right&&"undefined"!=typeof Symbol&&right[Symbol.hasInstance]?!!right[Symbol.hasInstance](left):left instanceof right}function _type_of(obj){return obj&&"undefined"!=typeof Symbol&&obj.constructor===Symbol?"symbol":typeof obj}System.register([],function(_export,_context){return{execute:function execute(){System.register("chunks:///TournamentUtils-6221d3e4.js",["cc"],function(e){var t,n,r,a,i,o,u,s,c,l,f,d,p,h,v,y,m,g,S,E,b,A,w;return{setters:[function(e){t=e.cclegacy,n=e.JsonAsset,r=e.Prefab,a=e.AnimationClip,i=e.ImageAsset,o=e.SpriteFrame,u=e.Font,s=e.assetManager,c=e.AudioClip,l=e.sp,f=e.tween,d=e.Animation,p=e.UITransform,h=e.view,v=e.screen,y=e.math,m=e.director,g=e.find,S=e.loadWasmModuleBullet,E=e.loadWasmModulePhysX,b=e.loadWasmModuleBox2D,A=e.loadWasmModuleSpine,w=e.game}],execute:function execute(){function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach(function(t){D(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function x(){x=e("b",function(){return n});var t,n={},r=Object.prototype,a=r.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},u=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(t){l=function l(e,t,n){return e[t]=n}}function f(e,t,n,r){var o=Object.create((t&&_instanceof(t.prototype,m)?t:m).prototype);return i(o,"_invoke",{value:N(e,n,new _(r||[]))}),o}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}n.wrap=f;var p="suspendedStart",h="executing",v="completed",y={};function m(){}function g(){}function S(){}var E={};l(E,u,function(){return this});var b=Object.getPrototypeOf,A=b&&b(b(C([])));A&&A!==r&&a.call(A,u)&&(E=A);var w=S.prototype=m.prototype=Object.create(E);function T(e){["next","throw","return"].forEach(function(t){l(e,t,function(e){return this._invoke(t,e)})})}function k(e,t){var r;function n(r,i,o,u){var s=d(e[r],e,i);if("throw"!==s.type){var c=s.arg,_$l=c.value;return _$l&&"object"==(void 0===_$l?"undefined":_type_of(_$l))&&a.call(_$l,"__await")?t.resolve(_$l.__await).then(function(e){n("next",e,o,u)},function(e){n("throw",e,o,u)}):t.resolve(_$l).then(function(e){c.value=e,o(c)},function(e){return n("throw",e,o,u)})}u(s.arg)}i(this,"_invoke",{value:function value(e,a){function i(){return new t(function(t,r){n(e,a,t,r)})}return r=r?r.then(i,i):i()}})}function N(e,n,r){var a=p;return function(i,o){if(a===h)throw Error("Generator is already running");if(a===v){if("throw"===i)throw o;return{value:t,done:!0}}for(r.method=i,r.arg=o;;){var u=r.delegate;if(u){var s=I(u,r);if(s){if(s===y)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===p)throw a=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=h;var c=d(e,n,r);if("normal"===c.type){if(a=r.done?v:"suspendedYield",c.arg===y)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(a=v,r.method="throw",r.arg=c.arg)}}}function I(e,n){var r=n.method,a=e.iterator[r];if(a===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,I(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=TypeError("The iterator does not provide a '"+r+"' method")),y;var i=d(a,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,y;var o=i.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,y):o:(n.method="throw",n.arg=TypeError("iterator result is not an object"),n.delegate=null,y)}function R(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function L(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function _(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(R,this),this.reset(!0)}function C(e){if(e||""===e){var n=e[u];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function n(){for(;++r<e.length;)if(a.call(e,r))return n.value=e[r],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}throw TypeError((void 0===e?"undefined":_type_of(e))+" is not iterable")}return g.prototype=S,i(w,"constructor",{value:S,configurable:!0}),i(S,"constructor",{value:g,configurable:!0}),g.displayName=l(S,c,"GeneratorFunction"),n.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},n.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,S):(e.__proto__=S,l(e,c,"GeneratorFunction")),e.prototype=Object.create(w),e},n.awrap=function(e){return{__await:e}},T(k.prototype),l(k.prototype,s,function(){return this}),n.AsyncIterator=k,n.async=function(e,t,r,a,i){void 0===i&&(i=Promise);var o=new k(f(e,t,r,a),i);return n.isGeneratorFunction(t)?o:o.next().then(function(e){return e.done?e.value:o.next()})},T(w),l(w,c,"Generator"),l(w,u,function(){return this}),l(w,"toString",function(){return"[object Generator]"}),n.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},n.values=C,_.prototype={constructor:_,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(L),!e)for(var n in this)"t"===n.charAt(0)&&a.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function stop(){this.done=!0;var _$e=this.tryEntries[0].completion;if("throw"===_$e.type)throw _$e.arg;return this.rval},dispatchException:function dispatchException(e){if(this.done)throw e;var n=this;function r(r,a){return u.type="throw",u.arg=e,n.next=r,a&&(n.method="next",n.arg=t),!!a}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],u=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var s=a.call(o,"catchLoc"),c=a.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function abrupt(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(o)},complete:function complete(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function finish(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),L(n),y}},catch:function _catch(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;L(n)}return a}}throw Error("illegal catch attempt")},delegateYield:function delegateYield(e,n,r){return this.delegate={iterator:C(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),y}},n}function N(t){return(N=e("_","function"==typeof Symbol&&"symbol"==_type_of(Symbol.iterator)?function(e){return void 0===e?"undefined":_type_of(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":_type_of(e)}))(t)}function I(e,t,n,r,a,i,o){try{var u=e[i](o),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,a)}function R(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var i=e.apply(t,n);function o(e){I(i,r,a,o,u,"next",e)}function u(e){I(i,r,a,o,u,"throw",e)}o(void 0)})}}function L(e,t){if(!_instanceof(e,t))throw TypeError("Cannot call a class as a function")}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,q(r.key),r)}}function C(e,t,n){return t&&_(e.prototype,t),n&&_(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function D(e,t,n){return(t=q(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$(e,t)}function P(t){return(P=e("n",Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)}))(t)}function $(e,t){return($=Object.setPrototypeOf?Object.setPrototypeOf.bind():function $(e,t){return e.__proto__=t,e})(e,t)}function F(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function B(e,t,n){return(B=F()?Reflect.construct.bind():function B(e,t,n){var r=[null];r.push.apply(r,t);var a=new(Function.bind.apply(e,r));return n&&$(a,n.prototype),a}).apply(null,arguments)}function G(t){var n="function"==typeof Map?new Map:void 0;return(G=e("g",function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(e))return n.get(e);n.set(e,r)}function r(){return B(e,arguments,P(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),$(r,e)}))(t)}function M(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function U(e,t){if(t&&("object"==(void 0===t?"undefined":_type_of(t))||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return M(e)}function j(e){var t=F();return function(){var n,r=P(e);return n=t?Reflect.construct(r,arguments,P(this).constructor):r.apply(this,arguments),U(this,n)}}function W(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=P(e)););return e}function H(){return(H="undefined"!=typeof Reflect&&Reflect.get?e("m",Reflect.get.bind()):e("m",function(e,t,n){var r=W(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(arguments.length<3?e:n):a.value}})).apply(this,arguments)}function K(e){return function(e){if(Array.isArray(e))return V(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||z(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(e,t){if(e){if("string"==typeof e)return V(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?V(e,t):void 0}}function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Y(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=z(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function a(){};return{s:a,n:function n(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function e(e){throw e},f:a}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,u=!1;return{s:function s(){n=n.call(e)},n:function n1(){var _$e=n.next();return o=_$e.done,_$e},e:function e(e){u=!0,i=e},f:function f(){try{o||null==n.return||n.return()}finally{if(u)throw i}}}}function q(e){var t=function(e,t){if("object"!=(void 0===e?"undefined":_type_of(e))||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=(void 0===r?"undefined":_type_of(r)))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==(void 0===t?"undefined":_type_of(t))?t:String(t)}e({_:N,a:R,b:x,c:O,d:j,e:L,f:C,g:G,h:Y,i:function i(e,t,n,r,a){var i={};return Object.keys(r).forEach(function(e){i[e]=r[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},i),a&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i},j:function j(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})},k:M,l:k,m:H,n:P,p:D,s:function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,u=[],s=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(u.push(r.value),u.length!==t);s=!0);}catch(e){c=!0,a=e}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw a}}return u}}(e,t)||z(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()},u:K}),t._RF.push({},"725f8u/lDtFbY1DMY0uJSL9","Locales",void 0),e("v",["en","ru"]);var J=e("L",{en:"fonts/mikado-bold.ttf",ru:"fonts/nunito-black.ttf"});e("H",{ru:"locales/ru"}),e("F",{en:"104px",ru:"96px"}),t._RF.pop(),t._RF.push({},"30f3eu78CVKp5+jOQ2m1GKG","ResourceUtils",void 0);var Z=Ludex.Utils,X=Z.Function,Q=Z.Time,ee=["loadable","animations"],te=(_$e=R(x().mark(function e(){var t;return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;break;case 2:return e.prev=2,t=ee.map(function(e){return ne.loadBundle(e)}),e.next=6,Promise.all(t);case 6:e.next=13;break;case 8:return e.prev=8,e.t0=e.catch(2),console.warn("ResourceUtils: initBundles failed",e.t0),e.next=13,Q.sleepAsync(500);case 13:case"end":return e.stop()}},e,null,[[2,8]])})),function(){return _$e.apply(this,arguments)}),ne=e("R",function(){var t,f,d,p,h,v,y,m,g,S,E,b,A,w,T,_$k,_$N;function e(){L(this,e),this.bundles={loadable:null,animations:null}}return C(e,[{key:"getBundleNameByType",value:function value(e){return e===a?"animations":"loadable"}},{key:"loadBundleByType",value:(_$N=R(x().mark(function t(n){var r;return x().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=this.getBundleNameByType(n),t.abrupt("return",e.loadBundle(r));case 2:case"end":return t.stop()}},t,this)})),function(e){return _$N.apply(this,arguments)})},{key:"getBundleByType",value:function value(e){var t,n=this.getBundleNameByType(e);return null!=(t=this.bundles[n])?t:null}},{key:"preloadAsset",value:(_$k=R(x().mark(function e(t,n,r){var a,i=this;return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadBundleByType(n);case 2:if(a=this.getBundleByType(n)){e.next=5;break}return e.abrupt("return");case 5:return e.abrupt("return",new Promise(function(e,o){a.preload(t,n,function(a){a?(console.warn("Failed to preload asset at path: ".concat(t),a),o(a)):r?i.loadAssetAsync(t,n).finally(e):e()})}));case 6:case"end":return e.stop()}},e,this)})),function(e,t,n){return _$k.apply(this,arguments)})},{key:"loadAssetAsync",value:(T=R(x().mark(function e(t,n){var r,a;return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadBundleByType(n);case 2:if(r=this.getBundleByType(n)){e.next=5;break}return e.abrupt("return",null);case 5:if(!(a=this.getAsset(t,n))){e.next=8;break}return e.abrupt("return",a);case 8:return e.abrupt("return",new Promise(function(e,a){r.load(t,n,function(n,r){r?e(r):(console.warn("[ResourceUtils] Failed to load asset at path: ".concat(t),n),a(null))})}));case 9:case"end":return e.stop()}},e,this)})),function(e,t){return T.apply(this,arguments)})},{key:"loadAssetsAsync",value:(w=R(x().mark(function e(t,n){var r,a,i,o,u,s,c;return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadBundleByType(n);case 2:if(r=this.getBundleByType(n)){e.next=5;break}return e.abrupt("return",null);case 5:for(a=[],i=[],o=0,u=t.length;o<u;o++)s=t[o],(c=this.getAsset(s,n))?a.push({index:o,asset:c}):i.push({index:o,path:s});if(0!==i.length){e.next=10;break}return e.abrupt("return",Promise.resolve(a.map(function(e){return e.asset})));case 10:return e.abrupt("return",new Promise(function(e){r.load(i.map(function(e){return e.path}),n,function(t,n){if(t||n.length!==i.length)e(null);else{for(var r=0,o=n.length;r<o;r++){var u,s=n[r];if(s){var c=null==(u=i[r])?void 0:u.index;if(!c)return;a.splice(c,0,{index:c,asset:s})}}e(a.map(function(e){return e.asset}))}})}));case 11:case"end":return e.stop()}},e,this)})),function(e,t){return w.apply(this,arguments)})},{key:"loadDirAsync",value:(A=R(x().mark(function e(t,n){var r;return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadBundleByType(n);case 2:if(r=this.getBundleByType(n)){e.next=5;break}return e.abrupt("return",Promise.resolve([]));case 5:return e.abrupt("return",new Promise(function(e){r.loadDir(t,n,function(n,r){r?e(r):(console.warn("Failed to load assets at path: ".concat(t),n),e([]))})}));case 6:case"end":return e.stop()}},e,this)})),function(e,t){return A.apply(this,arguments)})},{key:"preloadDirAsync",value:(b=R(x().mark(function e(t,n,r){var a,i=this;return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadBundleByType(n);case 2:if(a=this.getBundleByType(n)){e.next=5;break}return e.abrupt("return");case 5:return e.abrupt("return",new Promise(function(e,o){a.preloadDir(t,n,function(a){a?(console.warn("Failed to preload assets at path: ".concat(t),a),o(a)):r?i.loadDirAsync(t,n).finally(e):e()})}));case 6:case"end":return e.stop()}},e,this)})),function(e,t,n){return b.apply(this,arguments)})},{key:"getAsset",value:function value(t,n){var r=this.getBundleByType(n);if(!r)return null;var a=e.getAssetInfo(t,n);return a?r.get(a.path,n):null}},{key:"loadFontAsync",value:function value(e){var t=J[e].replace(/\.[^.]+$/,"");return this.loadAssetAsync(t,u)}},{key:"loadSpriteFramesAsync",value:(E=R(x().mark(function e(t){var n,r,a,i,u=arguments;return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=!(u.length>1&&void 0!==u[1])||u[1],e.next=3,this.loadAssetsAsync(t,o);case 3:if(r=e.sent){a=Y(r);try{for(a.s();!(i=a.n()).done;)i.value.packable=n}catch(e){a.e(e)}finally{a.f()}}return e.abrupt("return",r);case 6:case"end":return e.stop()}},e,this)})),function(e){return E.apply(this,arguments)})}],[{key:"inst",get:function get(){return this._instance||(this._instance=new e),this._instance}},{key:"loadBundle",value:(S=R(x().mark(function e(t){var n=this;return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;break;case 2:if(!this.inst.bundles[t]){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,new Promise(function(e,r){var a=setTimeout(r,15e3);s.loadBundle(t,null,function(i,o){clearTimeout(a);var u=n.inst.bundles[t];u||!i&&o?(n.inst.bundles[t]=null!=u?u:o,e(!0)):r(i)})});case 6:case"end":return e.stop()}},e,this)})),function(e){return S.apply(this,arguments)})},{key:"loadAudioAsync",value:(g=R(x().mark(function e(t){return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.inst.loadAssetAsync(t,c));case 1:case"end":return e.stop()}},e,this)})),function(e){return g.apply(this,arguments)})},{key:"loadJsonAsync",value:(m=R(x().mark(function e(t){return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.inst.loadAssetAsync(t,n));case 1:case"end":return e.stop()}},e,this)})),function(e){return m.apply(this,arguments)})},{key:"loadPrefabAsync",value:(y=R(x().mark(function e(t){return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.inst.loadAssetAsync(t,r));case 1:case"end":return e.stop()}},e,this)})),function(e){return y.apply(this,arguments)})},{key:"loadAnimClipAsync",value:(v=R(x().mark(function e(t){return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.inst.loadAssetAsync(t,a));case 1:case"end":return e.stop()}},e,this)})),function(e){return v.apply(this,arguments)})},{key:"loadSkeletonDataAsync",value:(h=R(x().mark(function e(t){return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.inst.loadAssetAsync(t,l.SkeletonData));case 1:case"end":return e.stop()}},e,this)})),function(e){return h.apply(this,arguments)})},{key:"loadImageSpriteFrameAsync",value:(p=R(x().mark(function e(t){var n;return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.inst.loadAssetAsync(t,i);case 2:return n=e.sent,e.abrupt("return",n?o.createWithImage(n):null);case 4:case"end":return e.stop()}},e,this)})),function(e){return p.apply(this,arguments)})},{key:"loadSpriteFrameAsync",value:(d=R(x().mark(function e(t){var n,r,a=arguments;return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=!(a.length>1&&void 0!==a[1])||a[1],e.next=3,this.inst.loadAssetAsync(t,o);case 3:return(r=e.sent)&&(r.packable=n),e.abrupt("return",r);case 6:case"end":return e.stop()}},e,this)})),function(e){return d.apply(this,arguments)})},{key:"loadSpriteFramesDirAsync",value:(f=R(x().mark(function e(t){return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.inst.loadDirAsync(t,o));case 1:case"end":return e.stop()}},e,this)})),function(e){return f.apply(this,arguments)})},{key:"preloadJson",value:function value(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.inst.preloadAsset(e,n,t)}},{key:"preloadPrefab",value:function value(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.inst.preloadAsset(e,r,t)}},{key:"preloadAnimClip",value:function value(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.inst.preloadAsset(e,a,t)}},{key:"preloadImageSpriteFrame",value:function value(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.inst.preloadAsset(e,i,t)}},{key:"preloadSpriteFrame",value:function value(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.inst.preloadAsset(e,o,t)}},{key:"preloadSpriteFramesDir",value:function value(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.inst.preloadDirAsync(e,o,t)}},{key:"getAssetInfo",value:function value(e,t){var n=this.inst.getBundleByType(t);return n?n.getInfoWithPath(e,t):null}},{key:"getAsset",value:function value(e,t){return this.inst.getAsset(e,t)}},{key:"loadFontAsync",value:function value(e){return this.inst.loadFontAsync(e)}},{key:"loadSpriteFramesAsync",value:(t=R(x().mark(function e(t){var n,r=arguments;return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=!(r.length>1&&void 0!==r[1])||r[1],e.abrupt("return",this.inst.loadSpriteFramesAsync(t,n));case 2:case"end":return e.stop()}},e,this)})),function(e){return t.apply(this,arguments)})}]),e}());X.retry(te,te),t._RF.pop(),t._RF.push({},"a0999j91ytLSYSzNSPnMz3i","AnimAbortSignalAdapter",void 0);var re=Ludex.Utils.Signal,ae=function(){function e(t){L(this,e),this.oldCallbacks=[],this.newCallbacks=[],this.signal=t}return C(e,[{key:"once",value:function value(e){var t=this,n=function n(){return e(Error(t.signal.reason))};this.oldCallbacks.push(n),this.newCallbacks.push(e),this.signal.addAbortListener(n)}},{key:"off",value:function value(e){var t=this.newCallbacks.indexOf(e);if(-1!==t){var n=this.oldCallbacks[t];this.signal.removeAbortListener(n),this.oldCallbacks.splice(t,1),this.newCallbacks.splice(t,1)}}},{key:"abort",value:function value(e){var t=_instanceof(e,Error)?e.message:e;this.signal.abort(t)}},{key:"aborted",get:function get(){return this.signal.aborted}},{key:"reason",get:function get(){return"string"==typeof this.signal.reason?Error(this.signal.reason):void 0}},{key:"wrap",value:function value(e){if(!this.aborted)return e}},{key:"chain",value:function value(e){var t=this;_instanceof(e,re.Signal)?e.once(function(){return t.abort()}):e.addEventListener("abort",function(){return t.abort()})}},{key:"promise",value:function value(){var _$e=this;return this.aborted?Promise.resolve(this.reason):new Promise(function(t){_$e.once(function(e){return t(e)})})}}]),e}();t._RF.pop(),t._RF.push({},"99b8eEF6WlE8pzPfD+whiJu","AnimUtils",void 0);var ie=Ludex.Utils.Signal;function oe(e){return _instanceof(e,ie.Signal)?e:new ae(e)}var ue=e("A",function(e){O(n,e);var t=j(n);function n(){return L(this,n),t.apply(this,arguments)}return C(n)}(function(){function e(){L(this,e)}return C(e,null,[{key:"inst",get:function get(){return this.inst$||(this.inst$=new this),this.inst$}},{key:"elasticOut",value:function value(e,t,n){var r=t||.1,a=n||.1;if(0===e)return 0;if(1===e)return 1;var i=a/4;return r<1?r=1:i=a*Math.asin(1/r)/(2*Math.PI),r*Math.pow(2,-10*e)*Math.sin(2*Math.PI*(e-i)/a)+1}},{key:"easeOutExpo",value:function value(e){return 1===e?1:1-Math.pow(2,-10*e)}},{key:"easeInExpo",value:function value(e){return 0===e?0:Math.pow(2,10*e-10)}},{key:"runTweenAsync",value:function value(e,t){if(void 0===t)return new Promise(function(t){e.call(function(){return t({tween:e})}).start()});var n=oe(t);return n.aborted?Promise.resolve({tween:e}):new Promise(function(t){var r=function r(){e.stop(),t({tween:e})};n.once(r),e.call(function(){n.off(r),t({tween:e})}).start()})}},{key:"runOnUpdateAsync",value:function value(e,t,n,r){return new Promise(function(a,i){var o=f(e).to(t,{},{onUpdate:function onUpdate(e,t){if(void 0!==t)try{n(t)}catch(e){i(_instanceof(e,Error)?e:Error(String(e)))}}});if(void 0!==r){var u=oe(r);if(u.aborted)a({tween:o});else{var s=function s(){o.stop(),a({tween:o})};u.once(s),o.call(function(){u.off(s),a({tween:o})}).start()}}else o.call(function(){return a({tween:o})}).start()})}},{key:"waitTweenAsync",value:function value(e,t){return new Promise(function(n){var r=f({}).delay(e);if(void 0!==t){var a=oe(t);if(a.aborted)n();else{var i=function i(){r.stop(),n()};a.once(i),r.call(function(){a.off(i),n()}).start()}}else r.call(function(){return n()}).start()})}},{key:"runAnimationAsync",value:function value(e,t,n){if(void 0===n)return new Promise(function(n){e.once(d.EventType.FINISHED,n),e.play(t)});var r=oe(n);return r.aborted?Promise.resolve():new Promise(function(n){var a=function a(){e.stop(),n()};r.once(a),e.once(d.EventType.FINISHED,function(){r.off(a),n()}),e.play(t)})}}]),e}()));t._RF.pop(),t._RF.push({},"244e9OHsmpDnpHQKeLzgiiX","GameEvents",void 0);var se=e("G",{VIEW_RESIZED:"view-resized",LAYOUT_CHANGED:"layout-changed",ORIENTATION_CHANGED:"orientation-changed",WIDGET_RESIZED:"widget-resized",GAMEPLAY_UPDATE_CONFIG:"gameplay-update-config",OPENED_SKIP_OVERLAY:"opened-skip-overlay",CLOSED_SKIP_OVERLAY:"closed-skip-overlay",RESULT_SCENE_REPLAY:"result-scene-replay",RESULT_SCENE_HOME:"result-scene-home",REQUEST_DYNAMIC_ATLAS:"request-dynamic-atlas",FINISHED_DYNAMIC_ATLAS:"finished-dynamic-atlas",ASSET_QUALITY_CHANGE:"asset-quality-change",REQUEST_UPGRADE_ASSET:"request-upgrade-asset",CLEAR_HYBRID_FILE_CACHE:"clear-hybrid-file-cache",PRELOAD_LANGUAGE:"preload-language",CHOOSE_LANGUAGE:"choose-language",LOCALIZE_APPLIED:"localize-applied"});t._RF.pop(),t._RF.push({},"5c76fxO2ppOqYp4WNO+Kavm","GameWorld",void 0);var ce=e("o",{Layout:{Portrait:"portrait",Landscape:"landscape"},DesignSize:{Portrait:{WIDTH:750,HEIGHT:1583},Landscape:{WIDTH:2732,HEIGHT:1536},Resolution:2},AcceptPortraitRatio:690/829,PRIMARY_LAYOUT:"auto",FULL_PORTRAIT_SIZE:!0,FULL_LANDSCAPE_SIZE:!0});t._RF.pop(),t._RF.push({},"05faedSJ2NHFqLe9b3g4RIl","CocosUtils",void 0);var _$e,le,fe,de=Ludex.Utils.Device,pe=e("C",function(e){O(n,e);var t=j(n);function n(){return L(this,n),t.apply(this,arguments)}return C(n)}(function(){function e(){var t=this;L(this,e),this.getWindowSizeVsWorldGameRatio$=function(){var t=h.getVisibleSize();return v.windowSize.width/e.getMaxPixelRatio()/t.width},this.getBoundingBoxTo$=function(e,n){var r=y.mat4();y.Mat4.fromSRT(r,n.getRotation(),n.getPosition(),n.getScale());var a=n.getComponent(p);if(!a)throw Error("Node must have UITransform component");var i=a.anchorPoint,o=a.contentSize,u=o.width,s=o.height,c=new y.Rect(-i.x*u,-i.y*s,u,s),l=y.mat4();if(y.Mat4.multiply(l,e,r),c.transformMat4(l),!n.children||0===n.children.length)return c;var f,d=n.children,h=n.getWorldMatrix(),v=Y(d);try{for(v.s();!(f=v.n()).done;){var m=f.value;if(null!=m&&m.active&&m.getComponent(p)){var g=t.getBoundingBoxTo$(h,m);g&&y.Rect.union(c,c,g)}}}catch(e){v.e(e)}finally{v.f()}return c}}return C(e,null,[{key:"inst",get:function get(){return this.inst$||(this.inst$=new this),this.inst$}},{key:"getBoundingBoxToWorld",value:function value(e){if(e.parent){var t=e.parent.getWorldMatrix();return this.inst.getBoundingBoxTo$(t,e)}var n=e.getComponent(p);if(!n)throw Error("Node must have UITransform component");return n.getBoundingBox()}},{key:"getMaxPixelRatio",value:function value(){return Math.min(de.pixelRatio(),3)}},{key:"worldSizeToCssSize",value:function value(e){return Math.round(e*this.getMaxPixelRatio())}},{key:"cssSizeToWorldSize",value:function value(e){return e/this.inst.getWindowSizeVsWorldGameRatio$()}},{key:"getScreenWidthCss",value:function value(){var _$e=document,t=_$e.body,n=_$e.documentElement,r=t.clientWidth;return Math.max(n.clientWidth,r)||0}},{key:"getScreenHeightCss",value:function value(){var _$e=document,t=_$e.body,n=_$e.documentElement,r=t.clientHeight;return Math.max(n.clientHeight,r)||0}}]),e}()));t._RF.pop(),t._RF.push({},"7ca06lc4HNFbaPBFusdm7/G","ScreenKeys",void 0);var he=e("w",((e1=he||{})[e1.LOADING_SCREEN=1]="LOADING_SCREEN",e1[e1.SETTINGS_SCREEN=2]="SETTINGS_SCREEN",e1[e1.NOTIFICATION_SCREEN=3]="NOTIFICATION_SCREEN",e1[e1.LOSE_SCREEN=4]="LOSE_SCREEN",e1[e1.WINNING_SCREEN=5]="WINNING_SCREEN",e1[e1.CONGRATULATION_SCREEN=6]="CONGRATULATION_SCREEN",e1)),ve=e("B",(D(le={},he.LOADING_SCREEN,"LoadingScreen"),D(le,he.SETTINGS_SCREEN,"SettingsScreen"),D(le,he.NOTIFICATION_SCREEN,"NotificationScreen"),D(le,he.LOSE_SCREEN,"LoseScreen"),D(le,he.WINNING_SCREEN,"WinningScreen"),D(le,he.CONGRATULATION_SCREEN,"CongratulationScreen"),le)),ye=(D(fe={},ve[he.LOADING_SCREEN],he.LOADING_SCREEN),D(fe,ve[he.SETTINGS_SCREEN],he.SETTINGS_SCREEN),D(fe,ve[he.NOTIFICATION_SCREEN],he.NOTIFICATION_SCREEN),D(fe,ve[he.LOSE_SCREEN],he.LOSE_SCREEN),D(fe,ve[he.WINNING_SCREEN],he.WINNING_SCREEN),D(fe,ve[he.CONGRATULATION_SCREEN],he.CONGRATULATION_SCREEN),[ve[he.NOTIFICATION_SCREEN],ve[he.LOADING_SCREEN]]);t._RF.pop(),t._RF.push({},"09bc071ZcpI978b1NdKUaqD","AnalyticsUtils",void 0);var me=Ludex,ge=me.Utils.Array,Se=me.Configs.Analytics,Ee=codex.analytics,be=function(){function e(){L(this,e)}return C(e,null,[{key:"inst",get:function get(){return this.inst$||(this.inst$=new this),this.inst$}},{key:"trackCurrentPage",value:function value(e,t){if(Se.Enabled&&!ge.has(ye,e)&&(t||ge.has(this.trackingPages$,e))){this.trackingPages$=this.trackingPages$.filter(function(t){return t!==e}),t&&this.trackingPages$.push(e);var n=this.getCurrentPage();Ee.pageview(n)}}},{key:"switchSceneTracking",value:function value(){if(Se.Enabled){this.trackingPages$=[];var _$e=this.getCurrentPage();Ee.pageview(_$e)}}},{key:"getCurrentPage",value:function value(){var _$e,t;return this.trackingPages$.length>0?this.trackingPages$[this.trackingPages$.length-1]||"Unknown Page":null!=(_$e=null==(t=m.getScene())?void 0:t.name)?_$e:"Unknown Scene"}},{key:"trackDeviceInfo",value:function value(e){Se.Enabled&&Ee.event("device_info",e)}}]),e}();be.trackingPages$=[],e("r",function(e){O(n,e);var t=j(n);function n(){return L(this,n),t.apply(this,arguments)}return C(n)}(be)),t._RF.pop(),t._RF.push({},"31871PLRYRJu7yCCX5F6lWK","AudioUtils",void 0);var Ae=Ludex.Utils.Signal,we=e("q",function(e){O(n,e);var t=j(n);function n(){return L(this,n),t.apply(this,arguments)}return C(n)}(function(){var t,n,r,a,i;function e(){L(this,e),this.signalController$=new Ae.SignalController}return C(e,[{key:"sound",get:function get(){var _$e;return null==(_$e=g("Sound"))?void 0:_$e.getComponent("Sound")}},{key:"music",get:function get(){var _$e;return null==(_$e=g("Music"))?void 0:_$e.getComponent("Music")}}],[{key:"inst",get:function get(){return this.inst$||(this.inst$=new this),this.inst$}},{key:"muteAudio",value:function value(e){this.muteMusic(e),this.muteSound(e)}},{key:"muteSound",value:function value(e){var t;null==(t=this.inst.sound)||t.mute(e)}},{key:"muteMusic",value:function value(e){var t;null==(t=this.inst.music)||t.mute(e)}},{key:"getCurrentMusic",value:function value(){return this.inst.currentMusic$}},{key:"turnUpMusic",value:(i=R(x().mark(function e(){var t,n;return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!((null!=(t=null==(n=this.inst.music)?void 0:n.getVolume())?t:0)>.6)){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,this.setVolumeMusic(.6,!0);case 5:case"end":return e.stop()}},e,this)})),function(){return i.apply(this,arguments)})},{key:"turnDownMusic",value:(a=R(x().mark(function e(){var t,n;return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!((null!=(t=null==(n=this.inst.music)?void 0:n.getVolume())?t:0)<.2)){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,this.setVolumeMusic(.2,!0);case 5:case"end":return e.stop()}},e,this)})),function(){return a.apply(this,arguments)})},{key:"turnOffMusic",value:(r=R(x().mark(function e(){return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setVolumeMusic(0);case 2:case"end":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)})},{key:"getVolumeMusic",value:function value(){var _$e,t;return null!=(_$e=null==(t=this.inst.music)?void 0:t.getVolume())?_$e:0}},{key:"setVolumeMusic",value:(n=R(x().mark(function e(t){var n,r,a,i,o,u=this,s=arguments;return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=s.length>1&&void 0!==s[1]&&s[1],this.inst.music){e.next=3;break}return e.abrupt("return");case 3:if(r=this.inst.signalController$.renew(),n){e.next=7;break}return null==(a=this.inst.music)||a.setVolume(t),e.abrupt("return");case 7:return o=i=this.inst.music.getVolume(),e.next=11,ue.runOnUpdateAsync(this.inst.music.node,1,function(e){u.inst.music&&(o=i+(t-i)*e,u.inst.music.setVolume(o))},r);case 11:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"playSound",value:(t=R(x().mark(function e(t,n){var r;return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null==(r=this.inst.sound)?void 0:r.play(t,n));case 1:case"end":return e.stop()}},e,this)})),function(e,n){return t.apply(this,arguments)})},{key:"pauseSound",value:function value(e){var t;null==(t=this.inst.sound)||t.pause(e)}},{key:"resumeSound",value:function value(e){var t;null==(t=this.inst.sound)||t.resume(e)}},{key:"stopSound",value:function value(e){var t;null==(t=this.inst.sound)||t.stop(e)}},{key:"stopAllSounds",value:function value(){var _$e;null==(_$e=this.inst.sound)||_$e.stopAll()}},{key:"playMusic",value:function value(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.inst.music&&(this.inst.currentMusic$!==e&&this.pauseMusic(),this.inst.currentMusic$=e,!t&&this.inst.music.playing(e)||(t&&this.inst.music.stop(e),this.inst.music.play(e)))}},{key:"pauseMusic",value:function value(){var _$e;null==(_$e=this.inst.music)||_$e.pause(this.inst.currentMusic$)}}]),e}()));t._RF.pop(),t._RF.push({},"358fdIqjFdNzZGa95REWt2F","Ads",void 0);var Te=e("z",{MAX_BOTTOM_BANNER_RATIO:1/6,NUM_LEVEL_WITHOUT_BANNER_ADS:0});t._RF.pop(),t._RF.push({},"a0dcdDZxhZImZ8Cfg4Dc7SJ","ScreenUtils",void 0);var ke=codex.event,xe=Ludex,Ne=xe.Events,Ie=xe.Utils.Array,Re=e("S",function(e){O(n,e);var t=j(n);function n(){return L(this,n),t.apply(this,arguments)}return C(n)}(function(){var t,n,r;function e(){L(this,e),this.showedScreens$=[]}return C(e,null,[{key:"inst",get:function get(){return this.inst$||(this.inst$=new this),this.inst$}},{key:"preloadScreen",value:function value(e){var t=ve[e];t&&ke.emit(Ne.PRELOAD_SCREEN,{screenName:t})}},{key:"preloadScreens",value:function value(){ke.emit(Ne.PRELOAD_SCREENS)}},{key:"openScreen",value:function value(e,t){var n=ve[e];return ke.emit(Ne.OPEN_SCREEN,{screenName:n,screenData:t}),new Promise(function(e){ke.on(Ne.OPENED_SCREEN,function t(r){r.screenName===n&&(ke.off(Ne.OPENED_SCREEN,t),e())})})}},{key:"closeScreen",value:function value(e){var t=ve[e];return ke.emit(Ne.CLOSE_SCREEN,{screenName:t}),new Promise(function(e){ke.on(Ne.CLOSED_SCREEN,function n(r){r.screenName===t&&(ke.off(Ne.CLOSED_SCREEN,n),e())})})}},{key:"openScreenAndWaitForClose",value:(r=R(x().mark(function e(t,n){return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.openScreen(t,n);case 2:return e.next=4,new Promise(function(e){ke.on(Ne.CLOSE_SCREEN,function n(r){r.screenName===ve[t]&&(ke.off(Ne.CLOSE_SCREEN,n),e(r))})});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e,this)})),function(e,t){return r.apply(this,arguments)})},{key:"showLoadingScreen",value:function value(e){return this.openScreen(he.LOADING_SCREEN,{duration:e})}},{key:"closeLoadingScreen",value:function value(){return this.closeScreen(he.LOADING_SCREEN)}},{key:"showNotificationScreen",value:function value(e,t){return this.openScreen(he.NOTIFICATION_SCREEN,{message:e,duration:t})}},{key:"showNotificationScreenWithLocalizedKey",value:function value(e,t){return this.openScreen(he.NOTIFICATION_SCREEN,{localizedMessageKey:e,duration:t})}},{key:"closeNotificationScreen",value:function value(){return this.closeScreen(he.NOTIFICATION_SCREEN)}},{key:"addShowedScene",value:function value(e){Ie.has(this.inst.showedScreens$,e)||this.inst.showedScreens$.push(e)}},{key:"showLoadingFullScreen",value:(n=R(x().mark(function e(t){var n,r;return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!Ie.has(this.inst.showedScreens$,t)){e.next=2;break}return e.abrupt("return");case 2:if(this.addShowedScene(t),n=g("Loading")){e.next=6;break}return e.abrupt("return");case 6:return r=n.getComponent("Loading"),e.next=9,r.show(t);case 9:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"hideLoadingFullScreen",value:(t=R(x().mark(function e(t){var n,r;return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!Ie.has(this.inst.showedScreens$,t)){e.next=2;break}return e.abrupt("return");case 2:return r=null==(n=g("Loading"))?void 0:n.getComponent("Loading"),e.next=5,null==r?void 0:r.hide(t);case 5:case"end":return e.stop()}},e,this)})),function(e){return t.apply(this,arguments)})},{key:"showLoadingNotificationScreen",value:function value(){return this.openScreen(he.NOTIFICATION_SCREEN,{message:"Loading",enableCloseOnTouch:!1})}}]),e}()));t._RF.pop(),t._RF.push({},"4a4bfX6KIJCcIozlNHuAwoi","AdsUtils",void 0);var Le=Ludex,_e=Le.Events,Ce=Le.Configs,De=Ce.Ads.Enabled,Oe=Ce.Gameplay.StartAdAtLevel,Pe=Le.Plugins.Ads,$e=void 0===Pe?{}:Pe,Fe=$e.Types,Be=$e.Status,Ge=Le.Utils,Me=Ge.Array,Ue=Ge.Function,je=Ge.Object,We=codex,He=We.ads,Ke=We.event,ze=We.player,Ve=function(e){O(n,e);var t=j(n);function n(e){return L(this,n),t.call(this,"AdsUtils.loadAdAsync: Timed out after ".concat(e,"ms"))}return C(n)}(G(Error)),Ye=e("t",function(e){O(r,e);var t,n=j(r);function r(){return L(this,r),n.apply(this,arguments)}return C(r,null,[{key:"preloadAds",value:(t=R(x().mark(function e(){return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Fe){e.next=2;break}return e.abrupt("return");case 2:this.preloadAdsByType(Fe.INTERSTITIAL),this.preloadAdsByType(Fe.REWARDED_VIDEO);case 4:case"end":return e.stop()}},e,this)})),function(){return t.apply(this,arguments)})},{key:"applyRemoveAds",value:function value(){if(Fe){var _$e=!this.isRemoveAdActive();this.setAdEnable(Fe.BANNER,_$e),this.setAdEnable(Fe.INTERSTITIAL,_$e),this.refreshBannerAdVisibility()}}},{key:"isRemoveAdActive",value:function value(){var _$e=(ze.getGameData()||{}).removeAdEndTime;return!!_$e&&_$e>Date.now()}}]),r}(function(){var t,n,r,a;function e(){var _$e,t=this;L(this,e),this.adsEnable$={},this.visibleBannerConfigs$=[],this.invisibleBannerConfigs$=[],this.updateBannerAdsConfigByLayout$=function(e){if(Fe){var n=h.getVisibleSize(),r=pe.worldSizeToCssSize(n.height*Te.MAX_BOTTOM_BANNER_RATIO),a=e===ce.Layout.Landscape,i=He.getAdsByType(Fe.BANNER).map(function(e){return e.config}).filter(function(e){var t=e.Position,n=e.BannerHeight;return!("bottom"===t&&n>r)});t.visibleBannerConfigs$=i.filter(function(e){var t=e.Position;return a||"bottom"===t||"top"===t}),t.invisibleBannerConfigs$=i.filter(function(e){return!t.visibleBannerConfigs$.includes(e)})}},this.getAdReady$=function(e,t){if(!Be||!Ye.isAdEnabled(e))return null;if(t)return He.getAdStatus(e,t)===Be.FILLED?t:null;var n,r=He.getAdsByType(e).find(function(t){return He.getAdStatus(e,t.placementId)===Be.FILLED});return null!=(n=null==r?void 0:r.placementId)?n:null},this.getPlacementIdByService$=function(e,t){if(!t||!Fe)return!1;var n,r=He.getAdsByType(e),a=Me.search(r,function(e){return e.config.AdService===t});return null!=(n=null==a?void 0:a.placementId)&&n},this.getAdIdByPayload$=function(e,n){var r=n||{},a=r.adService,i=r.placementId;return t.getPlacementIdByService$(e,a)||i},this.getAdErrorMessage$=function(e,n){if(!Fe)return null;switch(e){case Fe.REWARDED_VIDEO:case Fe.REWARDED_INTERSTITIAL:return t.isUserCancelledAdError$(n)?"ads.cancelled":"error.noAd";default:return null}},this.showAdByType$=(_$e=R(x().mark(function e(n,r){var a,i,o,u,s,c,l,f,d,p,h,v,y,m,g,S;return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Fe&&Be){e.next=2;break}return e.abrupt("return",!1);case 2:if(Ye.isAdEnabled(n)){e.next=4;break}return e.abrupt("return",!1);case 4:if(i=(a=r||{}).placementId,o=a.includeSDK,u=a.excludeSDK,s=a.forceLoad,c=a.autoLoad,l=a.adService,d=void 0===(f=a.timeout)?15e3:f,p=a.showError,t.canShowInSDK$(o,u)){e.next=7;break}return e.abrupt("return",!1);case 7:if(h=t.getAdIdByPayload$(n,r),v=!1,y=!1,e.prev=10,we.muteAudio(!0),m=He.getAdStatus(n,i),!(s||c&&m!==Be.FILLED)){e.next=18;break}return Re.showLoadingScreen(),e.next=18,Ue.timeOut(He.loadAdAsync(n,h),d);case 18:if(v){e.next=42;break}if(e.prev=19,g=t.getAdReady$(n,h)){e.next=23;break}return e.abrupt("return",!1);case 23:return h=g,e.next=26,He.showAdAsync(n,h);case 26:v=!0,e.next=40;break;case 29:if(e.prev=29,e.t0=e.catch(19),!l){e.next=33;break}throw e.t0;case 33:if(!t.isUserCancelledAdError$(e.t0)){e.next=35;break}throw e.t0;case 35:if(!t.isRequestAdTimeoutError$(e.t0)){e.next=37;break}throw e.t0;case 37:h=void 0,v=!1,y=!0;case 40:e.next=18;break;case 42:return e.abrupt("return",!0);case 45:return e.prev=45,e.t1=e.catch(10),y=!0,(S=t.getAdErrorMessage$(n,e.t1))&&p&&Re.showNotificationScreenWithLocalizedKey(S,2),e.abrupt("return",!1);case 51:return e.prev=51,we.muteAudio(!1),(s||c)&&Re.closeLoadingScreen(),y&&(h=i),Ye.preloadAdsByType(n,h),Ke.emit(_e.REQUEST_RESIZE_GAME),e.finish(51);case 58:case"end":return e.stop()}},e,null,[[10,45,51,58],[19,29]])})),function(t,n){return _$e.apply(this,arguments)}),this.canShowInSDK$=function(){var _$e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=GameSDK.getSDKName();return(null==t||!t.length||!Me.has(t,n))&&!(null!=_$e&&_$e.length&&!Me.has(_$e,n))},this.isUserCancelledAdError$=function(e){return je.hasOwn(e,"code")&&"USER_INPUT"===e.code},this.isRequestAdTimeoutError$=function(e){return _instanceof(e,Ve)||!(!je.hasOwn(e,"code")||"SHOW_ADS_TIMEOUT"!==e.code)}}return C(e,null,[{key:"inst",get:function get(){return this.inst$||(this.inst$=new this),this.inst$}},{key:"setAdEnable",value:function value(e,t){this.inst.adsEnable$[e]=t}},{key:"isAdEnabled",value:function value(e){return!!De&&!1!==this.inst.adsEnable$[e]}},{key:"preloadAds",value:(a=R(x().mark(function e(){return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Fe){e.next=2;break}return e.abrupt("return");case 2:this.preloadAdsByType(Fe.INTERSTITIAL),this.preloadAdsByType(Fe.REWARDED_VIDEO),this.preloadAdsByType(Fe.REWARDED_INTERSTITIAL);case 5:case"end":return e.stop()}},e,this)})),function(){return a.apply(this,arguments)})},{key:"isServiceDegraded",value:function value(){return He.isServiceDegraded()}},{key:"preloadAdsByType",value:function value(e,t){if(this.isAdEnabled(e)&&Be){var n=He.getAdsByType(e);(t?n.filter(function(e){return e.placementId===t}):n).forEach(function(n){He.getAdStatus(e,n.placementId)!==Be.FILLED&&He.getAdStatus(e,t)!==Be.FILLED&&He.loadAdAsync(e,n.placementId).catch(function(){})})}}},{key:"updateBannerAdsByLayout",value:function value(e){this.inst.updateBannerAdsConfigByLayout$(e)}},{key:"refreshBannerAdVisibility",value:function value(){if(Fe&&Be)if(this.isAdEnabled(Fe.BANNER)){var _$e,t=Y(this.inst.invisibleBannerConfigs$);try{for(t.s();!(_$e=t.n()).done;){var n=_$e.value.PlacementId;He.getAdStatus(Fe.BANNER,n)===Be.SHOWING&&this.hideBannerAd(n)}}catch(e){t.e(e)}finally{t.f()}var r,a=Y(this.inst.visibleBannerConfigs$);try{for(a.s();!(r=a.n()).done;){var i=r.value.PlacementId,o=He.getAdStatus(Fe.BANNER,i);!1!==o&&o!==Be.SHOWING&&this.showBannerAd(i)}}catch(e){a.e(e)}finally{a.f()}}else this.hideBannerAds()}},{key:"getBannerAdHeight",value:function value(){try{if(!Fe)return 0;var _$e=pe.cssSizeToWorldSize(1),t=He.getAd(Fe.BANNER);return Math.round(He.getBannerHeight(t.placementId,_$e))}catch(e){return console.warn("[AdsUtils] getBannerAdHeight error:",e),0}}},{key:"showBannerAds",value:function value(){if(Fe&&Be&&this.isAdEnabled(Fe.BANNER)){var _$e,t=Y(He.getAdsByType(Fe.BANNER));try{for(t.s();!(_$e=t.n()).done;){var n=_$e.value;He.getAdStatus(Fe.BANNER,n.placementId)!==Be.IDLE&&this.showBannerAd(n.placementId)}}catch(e){t.e(e)}finally{t.f()}}}},{key:"hideBannerAds",value:function value(){if(De&&Fe&&Be){var _$e,t=Y(He.getAdsByType(Fe.BANNER));try{for(t.s();!(_$e=t.n()).done;){var n=_$e.value;He.getAdStatus(Fe.BANNER,n.placementId)!==Be.IDLE&&this.hideBannerAd(n.placementId)}}catch(e){t.e(e)}finally{t.f()}}}},{key:"showBannerAd",value:function value(e){Fe&&this.isAdEnabled(Fe.BANNER)&&He.showBannerAdAsync(e).catch(function(){})}},{key:"hideBannerAd",value:function value(e){De&&He.hideBannerAdAsync(e).catch(function(){})}},{key:"isReadyAdShowable",value:function value(e,t){var n=this.inst.getAdReady$(e,t);return!!n&&He.canShowAd(e,n)}},{key:"isBannerAdShowing",value:function value(){if(!Fe||!Be)return!1;var _$e,t=Y(He.getAdsByType(Fe.BANNER));try{for(t.s();!(_$e=t.n()).done;){var n=_$e.value;if(He.getAdStatus(Fe.BANNER,n.placementId)===Be.SHOWING)return!0}}catch(e){t.e(e)}finally{t.f()}return!1}},{key:"showInterstitialAdAsync",value:(r=R(x().mark(function e(t){var n,r,a,i,o,u,s;return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Fe){e.next=2;break}return e.abrupt("return",!1);case 2:if(r=(n=null!=t?t:{}).forLevel,a=n.contextType,i=n.forceLoad,!(r&&Oe>=r)){e.next=5;break}return e.abrupt("return",!1);case 5:return a&&(null==(o=window.GoogleAds)||o.setInterstitialType(a),null==(u=window.TranssionH5Ads)||u.setInterstitialType(a)),s=GameSDK.isGameSDK("MsGames"),GameSDK.isGameSDK("MsGames")&&GameSDK.extra.shareAsync(),e.abrupt("return",this.inst.showAdByType$(Fe.INTERSTITIAL,k(k({},t),{},{forceLoad:i||s})));case 9:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})},{key:"showRewardVideoAdAsync",value:(n=R(x().mark(function e(t){var n,r,a;return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Fe){e.next=2;break}return e.abrupt("return",!1);case 2:return(n=(null!=t?t:{}).contextType)&&(null==(r=window.GoogleAds)||r.setRewardType(n),null==(a=window.TranssionH5Ads)||a.setRewardType(n)),e.abrupt("return",this.inst.showAdByType$(Fe.REWARDED_VIDEO,k(k({showError:!0},t),{},{autoLoad:!0})));case 5:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"showRewardedInterstitialAdAsync",value:(t=R(x().mark(function e(t){var n,r,a;return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Fe){e.next=2;break}return e.abrupt("return",!1);case 2:return(n=(null!=t?t:{}).contextType)&&(null==(r=window.GoogleAds)||r.setRewardType(n),null==(a=window.TranssionH5Ads)||a.setRewardType(n)),e.abrupt("return",this.inst.showAdByType$(Fe.REWARDED_INTERSTITIAL,k(k({showError:!0},t),{},{autoLoad:!0})));case 5:case"end":return e.stop()}},e,this)})),function(e){return t.apply(this,arguments)})}]),e}()));t._RF.pop(),t._RF.push({},"f8533KH/fxOfYqya9sgLrSj","GameData",void 0);var e1,qe,Je=e("E",{level:0,coins:0,bestEndlessScore:0,firstLoginTime:0,removeAdEndTime:0,lastCreateTournamentShown:0,tournamentProgress:{}});t._RF.pop(),t._RF.push({},"3b9bcPJBxpNOqG2I6exTOVn","MatchCustomData",void 0);var Ze=Ludex.Dtos.Match,Xe=(void 0===Ze?{}:Ze).CustomData;e("M",k(k({},null!=(qe=null==Xe?void 0:Xe.getDefaults())?qe:{}),{},{score:0,challengeData:null})),t._RF.pop(),t._RF.push({},"074c4KXFZ1Pq6d+66PrLd2+","PlayerData",void 0),e("P",{score:0,settings:{sound:!0,music:!0,vibrate:!0,language:"en"},gameData:Je,isFirstLogin:!0,dailyRewardedData:{logDays:[],firstReward:0,lastReward:0},lastCallSwitchGame:0,notificationData:{},missionsData:{process:{}}}),t._RF.pop(),t._RF.push({},"ff436w8KphN2o+jnnVL3RYx","SceneKeys",void 0);var et=e("y",{TEST_SCENE:"TestScene",BOOT_SCENE:"BootScene",DASHBOARD_SCENE:"DashboardScene",GAME_SCENE:"GameScene",ENDLESS_SCENE:"EndlessScene",DRAFT_SCENE:"DraftScene",PLAYABLE_SCENE:"PlayableScene",TEST_LAYOUT_SCENE:"TestLayoutScene",TEST_PERFORMANCE_SCENE:"TestPerformanceScene",TEST_PARTICLE_SYSTEM_SCENE:"TestParticleSystemScene"});t._RF.pop(),t._RF.push({},"58f4330KXRL77xyoA3903MY","WasmUtils",void 0);var tt=Ludex.Utils.Function,nt=e("W",function(e){O(n,e);var t=j(n);function n(){return L(this,n),t.apply(this,arguments)}return C(n)}(function(){var t;function e(){L(this,e),this.mutex$=tt.mutex()}return C(e,null,[{key:"inst",get:function get(){return this.inst$||(this.inst$=new this),this.inst$}},{key:"loadModuleAsync",value:(t=R(x().mark(function e(t){var n;return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.inst.mutex$.use("module-wasm-".concat(t));case 2:n=e.sent,e.prev=3,e.t0=t,e.next="spine"===e.t0?7:"box2d"===e.t0?12:"physx"===e.t0?17:"bullet"===e.t0?22:27;break;case 7:if("function"==typeof A){e.next=9;break}return e.abrupt("return");case 9:return e.next=11,A();case 11:case 16:case 21:case 26:return e.abrupt("break",27);case 12:if("function"==typeof b){e.next=14;break}return e.abrupt("return");case 14:return e.next=16,b();case 17:if("function"==typeof E){e.next=19;break}return e.abrupt("return");case 19:return e.next=21,E();case 22:if("function"==typeof S){e.next=24;break}return e.abrupt("return");case 24:return e.next=26,S();case 27:return e.prev=27,n.release(),e.finish(27);case 30:case"end":return e.stop()}},e,this,[[3,,27,30]])})),function(e){return t.apply(this,arguments)})}]),e}()));t._RF.pop(),t._RF.push({},"97ca9J9nzNCeIjC1l+ZT/Hm","SceneUtils",void 0);var rt=codex.event,at=Ludex.Events;e("x",function(e){O(a,e);var t,n,r=j(a);function a(){return L(this,a),r.apply(this,arguments)}return C(a,null,[{key:"preloadDashboardScene",value:function value(){this.preloadScene(et.DASHBOARD_SCENE)}},{key:"switchToDashboardScene",value:function value(e){this.switchScene(et.DASHBOARD_SCENE,e)}},{key:"preloadGameScene",value:(n=R(x().mark(function e(){return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nt.loadModuleAsync("spine");case 2:this.preloadScene(et.GAME_SCENE);case 3:case"end":return e.stop()}},e,this)})),function(){return n.apply(this,arguments)})},{key:"switchToGameScene",value:(t=R(x().mark(function e(t){return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return we.stopAllSounds(),we.turnOffMusic(),e.next=4,nt.loadModuleAsync("spine");case 4:this.switchScene(et.GAME_SCENE,t);case 5:case"end":return e.stop()}},e,this)})),function(e){return t.apply(this,arguments)})},{key:"switchToEndlessScene",value:function value(e){we.stopAllSounds(),we.turnOffMusic(),this.switchScene(et.ENDLESS_SCENE,e)}}]),a}(function(){function e(){L(this,e),this.loadedScenes$={}}return C(e,null,[{key:"inst",get:function get(){return this.inst$||(this.inst$=new this),this.inst$}},{key:"switchScene",value:function value(e,t){rt.emit(at.SWITCH_SCENE,{sceneName:e,sceneData:t})}},{key:"preloadScene",value:function value(e){rt.emit(at.PRELOAD_SCENE,{sceneName:e})}},{key:"isSceneLoaded",value:function value(e){var t;return null!=(t=this.inst.loadedScenes$[e])&&t}},{key:"markIsSceneLoaded",value:function value(e){this.inst.loadedScenes$[e]=!0}},{key:"markIsTestScene",value:function value(e){rt.emit(at.MARK_IS_TEST_SCENE,{sceneName:e})}},{key:"getSceneData",value:function value(e){return"data"in e.scene&&e.scene.data||{}}}]),e}())),t._RF.pop(),t._RF.push({},"669a1OtNF9EDrMRLWTjxk4B","GeneralUtils",void 0),e("I",function(e){O(n,e);var t=j(n);function n(){return L(this,n),t.apply(this,arguments)}return C(n)}(function(){function e(){L(this,e)}return C(e,null,[{key:"inst",get:function get(){return this.inst$||(this.inst$=new this),this.inst$}},{key:"setBlockInput",value:function value(e){var t=g("Canvas/InputBlocker");t&&(t.active=e)}},{key:"getBlockInput",value:function value(){var _$e=g("Canvas/InputBlocker");return!!_$e&&_$e.active}}]),e}())),t._RF.pop(),t._RF.push({},"ed5c6D+6KVEj5lrgtq+D9bJ","LayoutUtils",void 0);var ot=ce.Layout;e("D",function(e){O(n,e);var t=j(n);function n(){return L(this,n),t.apply(this,arguments)}return C(n)}(function(){function e(){var t=this;L(this,e),this.isListening$=!1,this.currentLayout$=ot.Portrait,this.onLayoutChanged$=function(e){t.currentLayout$!==e&&(t.currentLayout$=e,w.emit(se.ORIENTATION_CHANGED,e))}}return C(e,null,[{key:"inst",get:function get(){return this.inst$||(this.inst$=new this),this.inst$}},{key:"listenLayoutChanges",value:function value(){this.inst.isListening$||(this.inst.isListening$=!0,w.on(se.LAYOUT_CHANGED,this.inst.onLayoutChanged$))}},{key:"getCurrentLayout",value:function value(){return this.inst.currentLayout$}},{key:"isPortrait",value:function value(){return this.inst.currentLayout$===ot.Portrait}},{key:"isLandscape",value:function value(){return this.inst.currentLayout$===ot.Landscape}},{key:"getScreenRatio",value:function value(){return pe.getScreenWidthCss()/pe.getScreenHeightCss()}}]),e}())),t._RF.pop(),t._RF.push({},"58eae10lp9GX4EnVB/hLwAg","LoaderUtils",void 0);var ut=codex,st=ut.event,ct=ut.match,lt=ut.player,ft=ut.context,dt=e("J",function(e){O(n,e);var t=j(n);function n(){return L(this,n),t.apply(this,arguments)}return C(n,null,[{key:"applyCustomFlows",value:function value(){var _$e=this;ft.configureFlows(function(t){t.addBefore("ChallengeFromPostFlow",_$e.createNewUserChallengeFriendToSingleFlow$(t)),t.addBefore("ChallengeFromPostFlow",_$e.createStartSingleFromShareInviteContextFlow$(t)),t.addBefore("ChallengeFromMessageFlow",_$e.createFastChallengeFromMessageFlow$(t))})}}]),n}(function(){function e(){L(this,e)}return C(e,null,[{key:"inst",get:function get(){return this.inst$||(this.inst$=new this),this.inst$}}]),e}()));dt.createNewUserChallengeFriendToSingleFlow$=function(e){var t=ft.getSessionContextTypes().CHALLENGE_FRIEND;return{id:"NewUserChallengeFriendToSingleFlow",when:function when(e){var n=e.contextSessionType;return!!e.isFirstSession&&n===t},do:e.createSteps([dt.createNewUserSingleModeStep$(),dt.createSwitchSceneStep$()])}},dt.createStartSingleFromShareInviteContextFlow$=function(e){var t=ft.getSessionContextTypes().CHALLENGE_FRIEND;return{id:"StartSingleFromChallengeContextFlow",when:function when(e){var n=e.contextSessionType;return!e.isFirstSession&&n===t&&null!==dt.extractLevel$(e.contextData)},do:e.createSteps([dt.createStartSingleMode$(),dt.createSwitchSceneStep$()])}},dt.createFastChallengeFromMessageFlow$=function(e){var t=ft.getSessionContextTypes().CHALLENGE_FRIEND;return{id:"FastChallengeFromMessageFlow",when:function when(e){var n=e.contextData,r=n.matchId,a=n.playerId,i=n.opponentId,o=e.contextSessionType;return!e.isFirstSession&&"string"==typeof r&&"string"==typeof a&&"string"==typeof i&&o===t&&null!==dt.extractLevel$(e.contextData)},do:e.createSteps([dt.createPrepareChallengeLevelStep$()])}},dt.createSwitchSceneStep$=function(){var _$e;return{id:"SwitchScene",runAsync:(_$e=R(x().mark(function e(t){var n,r;return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.sceneName){e.next=3;break}return e.abrupt("return",!0);case 3:return r={isFromLoader:!0},st.emit(Ludex.Events.SWITCH_SCENE,{sceneName:n,sceneData:r}),e.abrupt("return",!1);case 6:case"end":return e.stop()}},e)})),function(t){return _$e.apply(this,arguments)})}},dt.createNewUserSingleModeStep$=function(){var _$e;return{id:"NewUserSingleMode",runAsync:(_$e=R(x().mark(function e(t){var n;return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=lt.getPlayerId(),e.next=3,ct.handler.setMatchCustomData({playerId:n,contextId:"SOLO"});case 3:return e.next=5,ct.single.start.processAsync({playerId:n});case 5:return t.sceneName=et.GAME_SCENE,e.abrupt("return",!0);case 7:case"end":return e.stop()}},e)})),function(t){return _$e.apply(this,arguments)})}},dt.createPrepareChallengeLevelStep$=function(){var _$e;return{id:"PrepareChallengeLevelFromMessage",runAsync:(_$e=R(x().mark(function e(t){var n;return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("number"==typeof(n=dt.extractLevel$(t.contextData))){e.next=3;break}return e.abrupt("return",!0);case 3:return e.next=5,ct.handler.setMatchCustomData({level:n});case 5:return e.abrupt("return",!0);case 6:case"end":return e.stop()}},e)})),function(t){return _$e.apply(this,arguments)})}},dt.createStartSingleMode$=function(){var _$e;return{id:"StartSingleMode",runAsync:(_$e=R(x().mark(function e(t){var n,r;return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("number"==typeof(n=dt.extractLevel$(t.contextData))){e.next=3;break}return e.abrupt("return",!0);case 3:return r=lt.getPlayerId(),e.next=6,ct.handler.setMatchCustomData({level:n});case 6:return e.next=8,ct.single.start.processAsync({playerId:r});case 8:return t.sceneName=et.GAME_SCENE,e.abrupt("return",!0);case 10:case"end":return e.stop()}},e)})),function(t){return _$e.apply(this,arguments)})}},dt.extractLevel$=function(e){var t=e.level;return"number"==typeof t?t:null},t._RF.pop(),t._RF.push({},"d6fb7/+FFxLs7k5w6K38JYb","TournamentUtils",void 0);var pt=Ludex,ht=pt.Utils,vt=ht.String,yt=ht.Valid,mt=ht.Array,gt=pt.Configs.Mockup.Leaderboards,St=codex.language,Et=codex,bt=Et.leaderboard,At=Et.player;e("T",function(e){O(r,e);var t,n=j(r);function r(){return L(this,r),n.apply(this,arguments)}return C(r,[{key:"processPlayerTournamentData",value:function value(){var _$e,t=[],n=Y(this.playerTournaments$);try{for(n.s();!(_$e=n.n()).done;){var _$r,a,i=_$e.value,o="".concat(i.getID()),u=i.getContextID(),s=i.getEndTime(),c=this.parseTournamentPayload(i.getPayload());if(this.validateGameSDKTournamentPayload(c)&&!(s<Date.now()/1e3)){var l=i.getTournamentType();if("PAGE_HOSTED"!==l){var f=null!=(_$r=c.playerName)?_$r:"Player",d={id:o,title:null!=(a=i.getTitle())?a:this.createDefaultTournamentName(f),endTime:s,contextId:u,payload:c,tournamentType:l};t.push(d)}}}}catch(e){n.e(e)}finally{n.f()}return t}},{key:"processGlobalTournamentLeaderboardData",value:function value(){var _$e=[];if(gt.Enabled){var t,n=Y(this.playerTournaments$);try{for(n.s();!(t=n.n()).done;){var _$r,a=t.value,i=a.getTournamentType();if("PAGE_HOSTED"===i){var o="".concat(a.getID()),u=a.getContextID(),s=a.getEndTime(),c=this.parseTournamentPayload(a.getPayload()),l={id:o,title:null!=(_$r=a.getTitle())?_$r:"Global Tournament",endTime:s,contextId:u,payload:c,tournamentType:i};_$e.push(l)}}}catch(e){n.e(e)}finally{n.f()}return _$e}var f,d=Y(this.globalTournamentLBData$);try{for(d.s();!(f=d.n()).done;){var p,h,v=f.value,y=void 0;try{y=JSON.parse(v.description)}catch(e){continue}if(this.validateExpireTime(v)&&this.validateGlobalTournamentPayload(y)){var m="isNEZP"in GameSDK.extra&&GameSDK.extra.isNEZP(),g="isRestricted"in GameSDK.extra&&GameSDK.extra.isRestricted();if(m||g){if(!y.restrict)continue}else if(y.restrict)continue;var S=null!=(p=null==(h=y.i18n)||null==(h=h[St.getCurrentLocale()])?void 0:h.title)?p:v.name,E={id:y.tournamentId,title:S,endTime:this.getTournamentEndTime(v),contextId:y.contextId,payload:{playerId:"global",playerName:"global",leaderboardId:v._id},tournamentType:"PAGE_HOSTED"};_$e.push(E)}}}catch(e){d.e(e)}finally{d.f()}return _$e}},{key:"createDefaultTournamentName",value:function value(e){var t=e.substring(0,7),n="".concat(t.split(" ")[0]||t,"'s Tournament"),_$r=vt.removeDiacritics(n);return"".concat(_$r)}}],[{key:"requestTournamentDataAsync",value:(t=R(x().mark(function e(){var t,n,_$r,a,i,s;return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.inst,e.next=3,Promise.all([t.fetchTournamentsAsync$(),t.fetchGlobalTournamentLeaderboardAsync$()]);case 3:n=t.processPlayerTournamentData(),_$r=t.processGlobalTournamentLeaderboardData(),n.sort(function(e,t){return e.endTime-t.endTime}),_$r.sort(function(e,t){return e.endTime-t.endTime}),t.tournamentData$=[].concat(K(_$r),K(n)),a=Y(t.tournamentData$),e.prev=9,a.s();case 11:if((i=a.n()).done){e.next=22;break}if(s=i.value.payload.leaderboardId){e.next=17;break}return e.abrupt("continue",20);case 17:if(!bt.isExistLeaderboardId(s)){e.next=19;break}return e.abrupt("continue",20);case 19:bt.addLeaderboard({type:"tournament",name:s,autoSortRank:!0,leaderboardId:s});case 20:e.next=11;break;case 22:e.next=27;break;case 24:e.prev=24,e.t0=e.catch(9),a.e(e.t0);case 27:return e.prev=27,a.f(),e.finish(27);case 30:return e.abrupt("return",t.tournamentData$);case 31:case"end":return e.stop()}},e,this,[[9,24,27,30]])})),function(){return t.apply(this,arguments)})},{key:"saveTournamentProgress",value:function value(e,t,n){var _$r,a,i,o,u=(null!=(_$r=At.getGameData())?_$r:{}).tournamentProgress,s=null==u?void 0:u[n],c={level:Math.max(e,null!=(a=null==s?void 0:s.level)?a:0),score:Math.max(t,null!=(i=null==s?void 0:s.score)?i:0),replayCount:null!=(o=null==s?void 0:s.replayCount)?o:0};At.setGameData({tournamentProgress:k(k({},u),{},D({},n,c))})}},{key:"syncTournamentProgress",value:function value(){var _$e,t=(null!=(_$e=At.getGameData())?_$e:{}).tournamentProgress;if(t){var n=this.inst,_$r=function r(e){mt.search(n.tournamentData$,function(t){return t.id===e})||delete t[e]};for(var a in t)_$r(a);At.setGameData({tournamentProgress:t})}}}]),r}(function(){function e(){var t=this;L(this,e),this.globalTournamentLBData$=[],this.playerTournaments$=[],this.tournamentData$=[],this.maxTimeRefetch$=5e3,this.lastFetchTournamentsData$=0,this.lastFetchGlobalTournament$=0,this.fetchGlobalTournamentLeaderboardAsync$=R(x().mark(function e(){return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(Date.now()-t.lastFetchGlobalTournament$>t.maxTimeRefetch$)){e.next=7;break}return e.next=5,bt.requestLeaderboardsAsync({limit:100,type:"world_tournament_leaderboard"});case 5:t.globalTournamentLBData$=e.sent,t.globalTournamentLBData$.sort(function(e,t){return e.expireTime-t.expireTime});case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.warn("fetchGlobalTournamentLeaderboardAsync",e.t0);case 12:return e.abrupt("return",t.globalTournamentLBData$);case 13:case"end":return e.stop()}},e,null,[[0,9]])})),this.fetchTournamentsAsync$=R(x().mark(function e(){return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(Date.now()-t.lastFetchTournamentsData$>t.maxTimeRefetch$)){e.next=7;break}return e.next=5,GameSDK.tournament.getTournamentsAsync();case 5:t.playerTournaments$=e.sent,t.playerTournaments$.sort(function(e,t){return e.getEndTime()-t.getEndTime()});case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.warn("fetchTournamentsAsync",e.t0);case 12:return e.abrupt("return",t.playerTournaments$);case 13:case"end":return e.stop()}},e,null,[[0,9]])}))}return C(e,[{key:"validateGlobalTournamentPayload",value:function value(e){var t=e.tournamentId,n=e.contextId;return!(!yt.isString(t)||""===t)&&!(!yt.isString(n)||""===n)}},{key:"getTournamentEndTime",value:function value(e){var t=new Date(e.createdAt).getTime();return Math.round((1e3*e.expireTime+t)/1e3)}},{key:"validateExpireTime",value:function value(e){return 1e3*this.getTournamentEndTime(e)-Date.now()>0}},{key:"validateGameSDKTournamentPayload",value:function value(e){return!(!yt.isString(e.playerId)||""===e.playerId)&&!(!yt.isString(e.playerName)||""===e.playerName)&&!(!yt.isString(e.leaderboardId)||""===e.leaderboardId)}},{key:"parseTournamentPayload",value:function value(e){if("string"!=typeof e)return{};try{return JSON.parse(e)}catch(e){return{}}}}],[{key:"inst",get:function get(){return this.inst$||(this.inst$=new this),this.inst$}},{key:"getAllTournamentData",value:function value(){return this.inst.tournamentData$}},{key:"getTournamentDataById",value:function value(e){var t=this.inst;return mt.search(t.tournamentData$,function(t){return t.id===e})}},{key:"getPlayerTournamentData",value:function value(){var _$e=this.inst,t=At.getPlayerId();return _$e.tournamentData$.filter(function(e){return e.payload.playerId===t})}},{key:"getFriendsTournamentData",value:function value(){var _$e=this.inst,t=At.getPlayerId();return _$e.tournamentData$.filter(function(e){var n=e.payload;return n.playerId!==t&&"global"!==n.playerId})}},{key:"getGlobalTournamentData",value:function value(){return this.inst.tournamentData$.filter(function(e){return"global"===e.payload.playerId})}},{key:"validateTournamentExpired",value:function value(e){var t=this.getTournamentDataById(e);return!!t&&t.endTime<Date.now()/1e3}}]),e}())),t._RF.pop()}}})}}});