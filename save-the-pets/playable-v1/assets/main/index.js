function _instanceof(left,right){return null!=right&&"undefined"!=typeof Symbol&&right[Symbol.hasInstance]?!!right[Symbol.hasInstance](left):left instanceof right}System.register("chunks:///main.js",["./TournamentUtils-6221d3e4.js","cc"],function(){var e,t,n,i,a,o,r,s,l,u,c,h,p,d,v,y,f,m,g,b,S,k,w,C,E,A,T,R,L,P,_,B,D,O,I,x,N,F,z,G,M,U,H,j,W,V,$,q,K,Y,J,X,Z,Q,ee,te,ne,ie,ae,oe,re,se,le,ue,ce,he,pe,de,ve,ye,fe,me,ge,be,Se,ke,we,Ce,Ee,Ae,Te,Re,Le,Pe,_e,Be,De,Oe,Ie,xe,Ne,Fe,ze,Ge,Me,Ue,He,je,We,Ve,$e,qe,Ke,Ye,Je,Xe,Ze,Qe,et,tt,nt,it,at,ot;return{setters:[function(x){e=x._,t=x.a,n=x.b,i=x.c,a=x.d,o=x.e,r=x.f,s=x.g,l=x.h,u=x.i,c=x.j,h=x.k,p=x.R,d=x.l,v=x.m,y=x.n,f=x.A,m=x.G,g=x.o,b=x.C,S=x.p,k=x.q,w=x.r,C=x.s,E=x.t,A=x.u,T=x.v,R=x.L,L=x.S,P=x.w,_=x.x,B=x.y,D=x.W,O=x.z,I=x.B},function(e){x=e.cclegacy,N=e.isCCObject,F=e._decorator,z=e.Animation,G=e.CCString,M=e.CCInteger,U=e.Component,H=e.AudioSource,j=e.director,W=e.UITransform,V=e.CCFloat,$=e.Widget,q=e.tween,K=e.Layout,Y=e.Sprite,J=e.game,X=e.ccenum,Z=e.Button,Q=e.CCBoolean,ee=e.EventTouch,te=e.Vec3,ne=e.Input,ie=e.Node,ae=e.UIOpacity,oe=e.Label,re=e.RichText,se=e.Graphics,le=e.Color,ue=e.sys,ce=e.Director,he=e.EventTarget,pe=e.ParticleSystem2D,de=e.math,ve=e.View,ye=e.Vec2,fe=e.Enum,me=e.Layers,ge=e.find,be=e.ERigidBody2DType,Se=e.RigidBody2D,ke=e.sp,we=e.Collider2D,Ce=e.Contact2DType,Ee=e.SpriteFrame,Ae=e.HingeJoint2D,Te=e.RelativeJoint2D,Re=e.BoxCollider2D,Le=e.Prefab,Pe=e.instantiate,_e=e.CircleCollider2D,Be=e.Mask,De=e.PolygonCollider2D,Oe=e.NodePool,Ie=e.Tween,xe=e.PhysicsSystem2D,Ne=e.ERaycast2DType,Fe=e.Intersection2D,ze=e.JsonAsset,Ge=e.ProgressBar,Me=e.EPhysics2DDrawFlags,Ue=e.DistanceJoint2D,He=e.repeat,je=e.lerp,We=e.approx,Ve=e.EPSILON,$e=e.RealCurve,qe=e.Gradient,Ke=e.bits,Ye=e.random,Je=e.randomRange,Xe=e.randomRangeInt,Ze=e.js,Qe=e.misc,et=e.MeshRenderData,tt=e.pseudoRandom,nt=e.toRadian,it=e.CCClass,at=e.UIRenderer,ot=e.Material}],execute:function execute(){function rt(t,n,i){var _$i;if("object"!==e(t)||void 0===n||void 0===i)return function(e,t1,n){var _$i=n.value;n.value=function(){for(var e=arguments.length,_$n=Array(e),o=0;o<e;o++)_$n[o]=arguments[o];if(t.call(this))return null==_$i?void 0:_$i.apply(this,_$n);console.debug("Skipping method call ".concat(String(t1)," because component ").concat(this.constructor.name," is not enabled in hierarchy"))}};_$i=i.value,i.value=function(){for(var e=arguments.length,_$n=Array(e),a=0;a<e;a++)_$n[a]=arguments[a];if(this.isValid)return null==_$i?void 0:_$i.apply(this,_$n);console.debug("Skipping method call ".concat(String(n)," because component ").concat(this.constructor.name," is not enabled in hierarchy"))}}function st(i,a,o){var e1,_$o;if("object"!==e(i)||void 0===a||void 0===o)return function(e,i1,a){var e1,_$o=a.value;e1=t(n().mark(function e(){var t,_$a,s,l=arguments;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(_$a=Array(t=l.length),s=0;s<t;s++)_$a[s]=l[s];if(!i.call(this)){e.next=5;break}return e.next=4,null==_$o?void 0:_$o.apply(this,_$a);case 4:return e.abrupt("return",e.sent);case 5:console.debug("Skipping method call ".concat(String(i1)," because component ").concat(this.constructor.name," is not enabled in hierarchy"));case 6:case"end":return e.stop()}},e,this)})),a.value=function(){return e1.apply(this,arguments)}};_$o=o.value,e1=t(n().mark(function e(){var t,_$a,r,s=arguments;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(_$a=Array(t=s.length),r=0;r<t;r++)_$a[r]=s[r];if(!this.isValid){e.next=5;break}return e.next=4,null==_$o?void 0:_$o.apply(this,_$a);case 4:return e.abrupt("return",e.sent);case 5:console.debug("Skipping method call ".concat(String(a)," because component ").concat(this.constructor.name," is not enabled in hierarchy"));case 6:case"end":return e.stop()}},e,this)})),o.value=function(){return e1.apply(this,arguments)}}x._RF.push({},"147a4TjOC9PMpdhlBiKEn54","onlyRunInLifeCycle",void 0),x._RF.pop(),x._RF.push({},"6944aqu6zZOGIj+df3KBDrm","onlyRunInLifeCycleAsync",void 0),x._RF.pop(),x._RF.push({},"99384AdWHlKDIyVvCAqSwJE","index",void 0),x._RF.pop(),x._RF.push({},"09236E0KzVAqotP4Yn9R+4m","MissingPropertiesError",void 0);var lt=function(e){i(n,e);var t=a(n);function n(e,i){var a;return o(this,n),(a=t.call(this,"".concat(e," is missing these required properties: [").concat(i.map(function(e){return e.propertyName}).join(", "),"]"))).className=e,a.errors=i,a}return r(n)}(s(Error));x._RF.pop(),x._RF.push({},"4ce5394i3hCZoi5cZm0Vn2l","MissingPropertyError",void 0);var ut=function(e){i(n,e);var t=a(n);function n(e,i){var a;return o(this,n),(a=t.call(this,"".concat(e," is missing the required property: <").concat(i,">"))).className=e,a.propertyName=i,a}return r(n)}(s(Error));x._RF.pop(),x._RF.push({},"a2990W72mRAYaItrPHe4H5V","required",void 0);var ct=Ludex.Utils,ht=ct.String,pt=ct.Valid,dt=codex.monitorError,vt="_compUtils_ReqPropsMap";function yt(e){return null===e}function ft(e){return void 0===e}function mt(e){return yt(e)||ft(e)}function gt(e){if("function"==typeof e)return e;switch(e){case"null-check":return yt;case"undefined-check":return ft;default:return mt}}function bt(e){return function(t,n){if("function"==typeof t)throw Error("The required decorator can only be applied to non-static class properties.");var a=t.constructor.name,o="".concat("_compUtils_ReqPropsMethod","_").concat(ht.capitalize(n));if(void 0!==t[o])throw Error("The required decorator found that property name ".concat(o," already exists. The reserved method name ").concat(o," is used already or the decorator was applied multiple times."));t[o]=function(t){if(e(this[n]))throw new ut(t,n)},void 0===t[vt]&&(t[vt]={}),void 0===t[vt][a]&&(t[vt][a]=[]),t[vt][a].push(o)}}function St(e,t){if("string"!=typeof t)return bt(gt(e));bt(gt())(e,t)}x._RF.pop(),x._RF.push({},"75e1e0Ei7ZOOr/FzyprYnVJ","index",void 0),x._RF.pop(),x._RF.push({},"95972yG/ulEg4gycbc+QB5Y","ComponentUtils",void 0);var kt,wt,Ct,Et,Tt,Rt,Lt,Pt,_t=Ludex.Utils,Bt=_t.Array,Dt=_t.Object,Ot=_t.Valid,It=["cc.Mask","cc.Label","cc.Canvas","cc.Camera","cc.Layout","cc.Button","cc.Sprite","cc.Widget","cc.Renderer","cc.Animation","cc.UIOpacity"],xt=function(e){i(n,e);var t=a(n);function n(){return o(this,n),t.apply(this,arguments)}return r(n)}(function(){function t(){o(this,t),this.validComponentCalled$={}}return r(t,[{key:"validateRequiredComponents",value:function value(e){var _$t,n=e.name,i=e.constructor,a=this.getRequiredComponentNames(i),o=l(a);try{for(o.s();!(_$t=o.n()).done;){var r=_$t.value;if(!e.getComponent(r))throw Error("".concat(n,": Missing required ").concat(r," component"))}}catch(e){o.e(e)}finally{o.f()}}},{key:"validateRequiredProperties",value:function value(e){var _$t,n=e.name,i=e.constructor,a=this.getRequiredPropNames(i),o=l(a);try{for(o.s();!(_$t=o.n()).done;){var r=_$t.value;if(!Dt.hasOwn(e,r))throw Error("".concat(n,": Missing required ").concat(r," property"));var s=this.getProperty(r,e);if(!N(s))throw Error("".concat(n,": ").concat(r," property is not a cc object"))}}catch(e){o.e(e)}finally{o.f()}}},{key:"validateCustomProperties",value:function value(e){var _$t,n=e.name,i=this.getCustomPropNames(e),a=l(i);try{for(a.s();!(_$t=a.n()).done;){var o=_$t.value;if(!Dt.hasOwn(e,o))throw Error("".concat(n,": Missing required ").concat(o," property"));var r=this.getProperty(o,e);if(!N(r))throw Error("".concat(n,": ").concat(o," property is not a cc object"))}}catch(e){a.e(e)}finally{a.f()}}},{key:"getProperty",value:function value(e,t){var n;if(Dt.hasOwn(t,e))return(null!=(n=Object.getOwnPropertyDescriptor(t,e))?n:{}).value}},{key:"getProps",value:function value(e){if(!Dt.hasOwn(e,"__props__"))return[];var _$t=e.__props__;return Array.isArray(_$t)?_$t:[]}},{key:"getRequiredPropNames",value:function value(e){return this.getProps(e).filter(function(t){return"node"!==t&&!!Dt.hasOwn(e,t)&&!!N(e[t])&&!t.startsWith("_")})}},{key:"getBaseComponentName",value:function value(e){for(var _$t=0;_$t<It.length;_$t++){var i=It[_$t];if(i.indexOf(e)>=0)return i}return e}},{key:"getRequiredComponentNames",value:function value(e){var _$t=this;if(!Dt.hasOwn(e,"_requireComponent"))return[];var n=e._requireComponent;return Array.isArray(n)?n.map(function(e){return _$t.getBaseComponentName(e)}):[]}},{key:"getCustomPropNames",value:function value(e){var _$t=this,n=Object.keys(e),i=this.getProps(e.constructor);return Bt.difference(n,i).filter(function(e){return 0>e.indexOf("_")}).filter(function(n){if(!Dt.hasOwn(e,n))return!1;var i=_$t.getProperty(n,e);return!(!Ot.isObject(i)||!N(i))})}}],[{key:"inst",get:function get(){return this.inst$||(this.inst$=new this),this.inst$}},{key:"required",value:function value(e,t){return"string"==typeof t?St(e,t):St(e)}},{key:"onlyRunInLifeCycle",value:function value(t,n,i){return"object"===e(t)&&void 0!==n&&void 0!==i?rt(t,n,i):rt(t)}},{key:"onlyRunInLifeCycleAsync",value:function value(t,n,i){return"object"===e(t)&&void 0!==n&&void 0!==i?st(t,n,i):st(t)}},{key:"lazyValidateProperties",value:function value(e){var _$t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(_$t){var i=e.constructor.name;if(!this.inst.validComponentCalled$[i])try{this.inst.validateRequiredComponents(e),this.inst.validateRequiredProperties(e),this.inst.validateCustomProperties(e)}catch(t){e.enabled=!1,console.error(t)}finally{this.inst.validComponentCalled$[i]=!0}}}},{key:"validateRequiredProperties",value:function value(e,t){!function(e,t){var n,i,a=t?t.name:e.constructor.name,o=t?t.prototype[vt]:e.constructor.prototype[vt],r=null!=(n=null==o?void 0:o[a])?n:[],s=[],c=l(r);try{for(c.s();!(i=c.n()).done;){var h=i.value;if("function"==typeof e[h])try{e[h](a)}catch(p){if(!_instanceof(p,ut))throw p;s.push(p)}}}catch(e){c.e(e)}finally{c.f()}if(0!==s.length){var _$p=new lt(a,s);if(pt.isDebugger())throw _$p;console.error(_$p),null==dt||dt.sendException(_$p)}}(e,t)}}]),t}());x._RF.pop(),x._RF.push({},"60ac3vor0dMT5bXi8D3VSJN","BubbleAnimation",void 0);var Nt=F.ccclass,Ft=F.property,zt=(kt=Nt("BubbleAnimation"),wt=Ft(z),Ct=Ft(G),Et=Ft(M),kt((Rt=u((Tt=function(e){i(n,e);var t=a(n);function n(){var _$e;o(this,n);for(var i=arguments.length,a=Array(i),r=0;r<i;r++)a[r]=arguments[r];return _$e=t.call.apply(t,[this].concat(a)),c(_$e,"animation",Rt,h(_$e)),c(_$e,"clipName",Lt,h(_$e)),c(_$e,"repeat",Pt,h(_$e)),_$e.currentRepeat=-1,_$e}return r(n,[{key:"__preload",value:function value(){this.animation=this.getComponent(z),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function value(){xt.lazyValidateProperties(this)}},{key:"play",value:function value(){var _$e=this;this.animation&&(this.animation.clips.find(function(t){return(null==t?void 0:t.name)===_$e.clipName})?(this.currentRepeat=-1,this.animation.play(this.clipName)):console.warn("BubbleAnimation: Animation component must have ".concat(this.clipName," clip")))}},{key:"onBubbleAnimationLoop",value:function value(){this.animation&&-1!==this.repeat&&(this.currentRepeat++,this.currentRepeat>this.repeat&&this.animation.stop())}}]),n}(U)).prototype,"animation",[wt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Lt=u(Tt.prototype,"clipName",[Ct],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return"Bubble"}}),Pt=u(Tt.prototype,"repeat",[Et],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return -1}}),Tt))||Tt);x._RF.pop(),x._RF.push({},"cc0a5OvhdRCMZRZuRscaz+7","AudioPlayer",void 0);var Mt=null==(Gt=Ludex.Plugins.Audio)?void 0:Gt.BaseAudioPlayer;Mt||(Mt=r(function e(t){o(this,e),console.warn("BaseAudioPlayer is not defined",t)}));var Gt,Ut,Ht,jt,Wt=function(e){i(n,e);var t=a(n);function n(e,i){var a;return o(this,n),(a=t.call(this,e)).audioSource=i,a}return r(n,[{key:"play",value:function value(e){if(e){var t=e.volume,i=e.loop;this.audioSource.volume=void 0===t?1:t,this.audioSource.loop=void 0!==i&&i}this.audioSource.play()}},{key:"pause",value:function value(){this.audioSource.pause()}},{key:"resume",value:function value(){this.audioSource.state===H.AudioState.PAUSED&&this.audioSource.play()}},{key:"stop",value:function value(){this.audioSource.stop()}},{key:"setVolume",value:function value(e){this.audioSource.volume=e}},{key:"getVolume",value:function value(){return this.audioSource.volume}},{key:"getAudioSource",value:function value(){return this.audioSource}}]),n}(Mt);x._RF.pop(),x._RF.push({},"8b5ecHv/+BJiorK1kiVbTcf","AudioChannel",void 0);var Vt=Ludex.Utils,$t=Vt.Array,qt=Vt.Decorator,Kt=null==(Ut=Ludex.Plugins.Audio)?void 0:Ut.BaseChannelManager;Kt||(Kt=r(function e(t){o(this,e),console.warn("BaseChannelManager is not defined",t)}));var Yt,Jt,Zt,Qt,en=(Ht=qt.tryCatch(),u((jt=function(e){i(u,e);var s,l=a(u);function u(e,t){var n;return o(this,u),(n=l.call(this,t)).allowMultipleTracking={},n.handleLoadedAudio=function(e,t){var i=n.node.addComponent(H);return i.clip=t,i.playOnAwake=!1,new Wt(e,i)},n.node=e,n}return r(u,[{key:"playing",value:function value(e){var t,n=null==(t=this.getAudioClip(e))?void 0:t.audioPlayer;return!!(n&&_instanceof(n,Wt))&&n.getAudioSource().state===H.AudioState.PLAYING}},{key:"onLoadAudio",value:(s=t(n().mark(function e(t,i){var a;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.loadAudioAsync(t);case 2:if(a=e.sent){e.next=5;break}return e.abrupt("return",null);case 5:if(this.node.isValid){e.next=7;break}return e.abrupt("return",null);case 7:return e.abrupt("return",this.handleLoadedAudio(t,a));case 8:case"end":return e.stop()}},e,this)})),function(e,t){return s.apply(this,arguments)})},{key:"playWithRealConfig",value:function value(e,t){if(this.isCanPlay(t)){if(t){var n=t.volume,a=t.allowMultiple;if(t.volume=this.getVolume()*(void 0===n?1:n),void 0!==a&&a){var r=e.getAudioSource().clip;if(!r)return;return void this.requestDuplicateAudioPlayer(e.getKey(),r,t).play(t)}}e.play(t)}}},{key:"isCanPlay",value:function value(e){var t=this;if(e){var n=e.checkList;if((void 0===n?[]:n).some(function(e){var n=t.getAudioClip(e);if(n){var i=n.audioPlayer;if(i&&_instanceof(i,Wt))return i.getAudioSource().state===H.AudioState.PLAYING}return!1}))return!1}return!0}},{key:"requestDuplicateAudioPlayer",value:function value(e,t,n){var i=this.getDuplicateAudioFromPool(e);if(i){if(n){var a=i.key,o=n.volume;this.setAudioClip(a,{volume:void 0===o?1:o})}return i.audioPlayer}var s=this.allowMultipleTracking[e];if(!s)throw Error("Allow multiple tracking is not found");var l="".concat(e,"_").concat(s.currentPostFix),_$u=this.handleLoadedAudio(l,t);return s.list.push({audioPlayer:_$u,key:l}),s.currentPostFix+=1,this.setAudioClip(l,{audioPlayer:_$u,volume:1}),_$u}},{key:"getDuplicateAudioFromPool",value:function value(e){if(this.allowMultipleTracking[e]){var t=this.allowMultipleTracking[e].list,n=$t.search(t,function(e){return e.audioPlayer.getAudioSource().state!==H.AudioState.PLAYING});if(n)return n}else this.allowMultipleTracking[e]={currentPostFix:1,list:[]};return null}}]),u}(Kt)).prototype,"onLoadAudio",[Ht],Object.getOwnPropertyDescriptor(jt.prototype,"onLoadAudio"),jt.prototype),jt);x._RF.pop(),x._RF.push({},"1a025mmN7BL7r5cF6gWR4b/","Music",void 0);var tn,nn,on,rn,sn=F.ccclass,ln=F.property,un=codex,cn=un.audio,hn=un.player;Yt=sn("Music"),Jt=ln(G),Yt((Qt=u((Zt=function(e){i(n,e);var t=a(n);function n(){var _$e;o(this,n);for(var i=arguments.length,a=Array(i),r=0;r<i;r++)a[r]=arguments[r];return _$e=t.call.apply(t,[this].concat(a)),c(_$e,"channelId",Qt,h(_$e)),_$e.channel=null,_$e.isMute=!1,_$e.volume=1,_$e}return r(n,[{key:"__preload",value:function value(){cn&&(this.makePersistent(),this.channel=new en(this.node,this.channelId),cn.addChannel(this.channel))}},{key:"makePersistent",value:function value(){j.isPersistRootNode(this.node)||j.addPersistRootNode(this.node)}},{key:"playing",value:function value(e){var t,_$n;return null!=(t=null==(_$n=this.channel)?void 0:_$n.playing(e))&&t}},{key:"play",value:function value(e,t){if(this.isMusicEnable()){var _$n=null!=t?t:{};_$n.loop||(_$n.loop=!0),cn.play(e,_$n,this.channelId)}}},{key:"isMusicEnable",value:function value(){return!!hn.getPlayerSetting("music")}},{key:"setVolume",value:function value(e){this.volume=e,this.isMute||cn.setVolume(e,this.channelId)}},{key:"getVolume",value:function value(){return cn.getVolume(this.channelId)}},{key:"pause",value:function value(e){cn.pause(e,this.channelId)}},{key:"resume",value:function value(e){this.isMusicEnable()&&cn.resume(e,this.channelId)}},{key:"stop",value:function value(e){cn.stop(e,this.channelId)}},{key:"mute",value:function value(e){this.isMute=e,e?cn.mute(this.channelId):(this.setVolume(this.volume),cn.unmute(this.channelId))}}]),n}(U)).prototype,"channelId",[Jt],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return"global_music"}}),Zt)),x._RF.pop(),x._RF.push({},"1299a7X1XNNEKxSKMV6E5jQ","Sound",void 0);var pn,dn,vn,fn,mn,gn,bn,Sn,kn,wn,Cn,En,An,Rn,Ln,Pn,_n,Bn,Dn=F.ccclass,On=F.property,In=codex,xn=In.audio,Nn=In.player;tn=Dn("Sound"),nn=On(G),tn((rn=u((on=function(e){i(n,e);var t=a(n);function n(){var _$e;o(this,n);for(var i=arguments.length,a=Array(i),r=0;r<i;r++)a[r]=arguments[r];return _$e=t.call.apply(t,[this].concat(a)),c(_$e,"channelId",rn,h(_$e)),_$e.channel=null,_$e}return r(n,[{key:"__preload",value:function value(){xn&&(this.channel=new en(this.node,this.channelId),xn.addChannel(this.channel))}},{key:"onLoad",value:function value(){}},{key:"makePersistent",value:function value(){j.addPersistRootNode(this.node)}},{key:"removePersistent",value:function value(){j.removePersistRootNode(this.node)}},{key:"play",value:function value(e,t){if(this.isSoundEnable())return xn.play(e,t,this.channelId)}},{key:"isSoundEnable",value:function value(){return!!Nn.getPlayerSetting("sound")}},{key:"setVolume",value:function value(e){xn.setVolume(e,this.channelId)}},{key:"pause",value:function value(e){xn.pause(e,this.channelId)}},{key:"resume",value:function value(e){this.isSoundEnable()&&xn.resume(e,this.channelId)}},{key:"stop",value:function value(e){xn.stop(e,this.channelId)}},{key:"stopAll",value:function value(){xn.stopAll(this.channelId)}},{key:"mute",value:function value(e){e?xn.mute(this.channelId):xn.unmute(this.channelId)}}]),n}(U)).prototype,"channelId",[nn],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return""}}),on)),x._RF.pop(),x._RF.push({},"84a2dB5IaRJ8JB+n9yXfBc7","AutoLayout",void 0);var Fn,zn,Mn,Un,Hn=F.ccclass,jn=F.property,Wn=(pn=Hn("AutoLayoutWrappee"),dn=jn({type:W}),vn=jn({type:W}),pn((mn=u((fn=r(function e(){o(this,e),c(this,"wrapeeContainer",mn,this),c(this,"wrapee",gn,this)})).prototype,"wrapeeContainer",[dn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gn=u(fn.prototype,"wrapee",[vn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fn))||fn);bn=Hn("AutoLayout"),Sn=jn({displayName:"Use Auto Layout"}),kn=jn({type:[Wn],displayName:"Children",visible:function visible(){return this.useAutoLayout}}),wn=jn({visible:!1,serializable:!0}),Cn=jn({type:M,displayName:"Selected Index",visible:function visible(){return this.useAutoLayout}}),En=jn({type:V,displayName:"Deselected Icon Width",group:"Edge Icons",visible:function visible(){return this.useAutoLayout}}),An=jn({visible:!1,serializable:!0}),bn((Ln=u((Rn=function(e){i(p,e);var s,u=a(p);function p(){var _$e;o(this,p);for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return _$e=u.call.apply(u,[this].concat(n)),c(_$e,"useAutoLayout",Ln,h(_$e)),c(_$e,"children",Pn,h(_$e)),_$e.mappedChildren=[],c(_$e,"selected",_n,h(_$e)),c(_$e,"deselectedIconW",Bn,h(_$e)),_$e.tweens=[],_$e}return r(p,[{key:"selectedIndex",get:function get(){return this.selected},set:function set(e){this.selected=e,this.updateLayout(!0)}},{key:"deselectedIconWidth",get:function get(){return this.deselectedIconW},set:function set(e){this.deselectedIconW=e,this.updateLayout(!0)}},{key:"__preload",value:function value(){this.mappedChildren=this.children.map(function(e){var t=e.wrapeeContainer.getComponent($);if(!t)throw Error("AutoLayout: Widget component not found");return d(d({},e),{},{wrapeeContainerWidget:t})})}},{key:"updateLayout",value:function value(){var _$e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this._layoutDirty||_$e){this.updateChildrenAnchors();var t,n=l(this.mappedChildren);try{for(n.s();!(t=n.n()).done;)t.value.wrapeeContainerWidget.updateAlignment()}catch(e){n.e(e)}finally{n.f()}}v(y(p.prototype),"updateLayout",this).call(this,_$e)}},{key:"getSelectedWorldX",value:function value(){var _$e=this.mappedChildren[this.selectedIndex].wrapeeContainer;return 0===this.selectedIndex||this.selectedIndex===this.children.length-1?_$e.getBoundingBoxToWorld().xMin+this.getAnchorX(this.selectedIndex)*_$e.width:_$e.getBoundingBoxToWorld().center.x}},{key:"getAnchorX",value:function value(e){if(e<this.selectedIndex)return 0;if(e>this.selectedIndex)return 1;if(0===e){var t=this.mappedChildren[e].wrapeeContainer.width,n=this.deselectedIconWidth/2,i=this.paddingLeft;return((i+t+(t-n+this.spacingX))/2-i)/t}if(e===this.children.length-1){var a=this.mappedChildren[e].wrapeeContainer.width,o=a-this.deselectedIconWidth/2+this.spacingX;return((o+a+this.paddingRight)/2-o)/a}return .5}},{key:"updateChildrenAnchors",value:(s=t(n().mark(function e(){var t,i,a=this;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=l(this.tweens);try{for(t.s();!(i=t.n()).done;)i.value.stop()}catch(e){t.e(e)}finally{t.f()}return this.tweens=[],e.next=5,Promise.all([this.children.flatMap(function(e,t){return a.getChildrenAnchorsTweens(e,a.getAnchorX(t))}).map(function(e){return f.runTweenAsync(e)})]);case 5:case"end":return e.stop()}},e,this)})),function(){return s.apply(this,arguments)})},{key:"updateChildrenAnchorsEditor",value:function value(){var _$e=this;this.children.forEach(function(t,n){var i=_$e.getAnchorX(n);t.wrapee.setAnchorPoint(i,t.wrapee.anchorY),t.wrapeeContainer.setAnchorPoint(i,t.wrapeeContainer.anchorY)})}},{key:"getChildrenAnchorsTweens",value:function value(e,t){return[q(e.wrapee).to(.3,{anchorX:t},{easing:"sineInOut"}).call(function(){e.wrapee.setAnchorPoint(t,e.wrapee.anchorY)}),q(e.wrapeeContainer).to(.3,{anchorX:t},{easing:"sineInOut"}).call(function(){e.wrapeeContainer.setAnchorPoint(t,e.wrapeeContainer.anchorY)})]}}]),p}(K)).prototype,"useAutoLayout",[Sn],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return!0}}),Pn=u(Rn.prototype,"children",[kn],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return[]}}),_n=u(Rn.prototype,"selected",[wn],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return 0}}),u(Rn.prototype,"selectedIndex",[Cn],Object.getOwnPropertyDescriptor(Rn.prototype,"selectedIndex"),Rn.prototype),u(Rn.prototype,"deselectedIconWidth",[En],Object.getOwnPropertyDescriptor(Rn.prototype,"deselectedIconWidth"),Rn.prototype),Bn=u(Rn.prototype,"deselectedIconW",[An],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return 0}}),Rn)),x._RF.pop(),x._RF.push({},"ca427NpeqpC3bUoGTd9I/BM","Background",void 0);var $n=F.ccclass,qn=g.Layout;Fn=$n("Background"),zn=xt.required(),Fn((Un=u((Mn=function(e){i(n,e);var t=a(n);function n(){var _$e;o(this,n);for(var i=arguments.length,a=Array(i),r=0;r<i;r++)a[r]=arguments[r];return _$e=t.call.apply(t,[this].concat(a)),c(_$e,"sprite",Un,h(_$e)),_$e.handleSpriteTypeWhenLayoutChanged=function(t){t===qn.Landscape?_$e.setBackgroundType(Y.Type.TILED):_$e.setBackgroundType(Y.Type.SIMPLE)},_$e}return r(n,[{key:"__preload",value:function value(){this.sprite=this.getComponent(Y),xt.validateRequiredProperties(this),this.listenGameEvents()}},{key:"listenGameEvents",value:function value(){J.on(m.LAYOUT_CHANGED,this.handleSpriteTypeWhenLayoutChanged,this)}},{key:"setBackgroundType",value:function value(e){this.sprite&&(this.sprite.type=e)}}]),n}(U)).prototype,"sprite",[zn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Mn)),x._RF.pop(),x._RF.push({},"7ddc4vU74pB/LdHrUupDA/G","BlockLines",void 0);var Kn=F.ccclass,Yn=g.Layout;Kn("BlockLines")(function(e){i(n,e);var t=a(n);function n(){var _$e;o(this,n);for(var i=arguments.length,a=Array(i),r=0;r<i;r++)a[r]=arguments[r];return(_$e=t.call.apply(t,[this].concat(a))).handleSpriteTypeWhenLayoutChanged=function(t){t===Yn.Landscape?_$e.setActiveBlockLines(!0):_$e.setActiveBlockLines(!1)},_$e}return r(n,[{key:"__preload",value:function value(){this.componentSprites=this.getComponentsInChildren(Y),this.validateRequiredComponents(),this.listenGameEvents(),this.handleBlockLinesOnStart()}},{key:"validateRequiredComponents",value:function value(){xt.lazyValidateProperties(this)}},{key:"handleBlockLinesOnStart",value:function value(){var _$e=this.getScreenRatio()>750/1366;this.setActiveBlockLines(_$e)}},{key:"listenGameEvents",value:function value(){J.on(m.LAYOUT_CHANGED,this.handleSpriteTypeWhenLayoutChanged)}},{key:"setActiveBlockLines",value:function value(e){var t=this;this.componentSprites&&this.componentSprites.forEach(function(n){n.node!==t.node&&(n.node.active=e)})}},{key:"getScreenRatio",value:function value(){return b.getScreenWidthCss()/b.getScreenHeightCss()}}]),n}(U)),x._RF.pop(),x._RF.push({},"d159egaUVVLHKLg1UL865ub","SoundKeys",void 0);var Jn=Ludex.Utils.Object,Xn="sounds/",Zn={BEE_FLYING:"".concat(Xn,"bee-flying"),BEE_STING_DOGE:"".concat(Xn,"bee-sting-doge"),BG_MUSIC:"".concat(Xn,"bg-music"),BUTTON_CLICK:"".concat(Xn,"button-click"),COLLECTING_COINS:"".concat(Xn,"collecting-coins"),DOGE_DIES:"".concat(Xn,"doge-dies"),DOGE_HURT:"".concat(Xn,"doge-hurt"),END_DRAW:"".concat(Xn,"end-draw"),HAND_CLAP:"".concat(Xn,"hand-clap"),LEVEL_FAIL:"".concat(Xn,"level-fail"),LEVEL_PASS:"".concat(Xn,"level-pass"),LOST_STAR_IN_GAMEPLAY:"".concat(Xn,"lost-star-in-gameplay"),RAISE_STAR:"".concat(Xn,"raise-star"),SPAWN_COINS:"".concat(Xn,"spawn-coins"),STAR_RAISE:"".concat(Xn,"star-raise"),TOUCH_START:"".concat(Xn,"touch-start"),BEE_BULLET_EXPLODE:"".concat(Xn,"bee-bullet-explode")},Qn=Jn.vals(Zn).reduce(function(e,t,n){return Jn.assign(e,S({},t,n))},{});X(Qn);var ei,ti,ni,ii,ai,oi,ri,si,li,ui,ci,hi,pi,di,vi,yi,fi,mi=Jn.invert(Qn);x._RF.pop(),x._RF.push({},"4b299Dv1kVGcqQmJC9yBPAV","ButtonReleased",void 0);var gi=F.ccclass,bi=F.requireComponent,Si=F.property,ki=F.disallowMultiple,wi=F.executionOrder,Ci=codex.analytics;ei=gi("ButtonReleased"),ti=bi([z,Z]),ni=wi(120),ii=Si(G),ai=Si(G),oi=Si(Q),ri=Si({visible:function visible(){return this.useSound},type:Qn}),si=Si({tooltip:"Add a delay after click to prevent spamming (not apply for cancel click)"}),li=Si({visible:function visible(){return this.disableSpamClick},tooltip:"Delay time in seconds"}),ei(ui=ki(ui=ti(ui=ni((hi=u((ci=function(e){i(n,e);var t=a(n);function n(){var _$e;o(this,n);for(var i=arguments.length,a=Array(i),r=0;r<i;r++)a[r]=arguments[r];return _$e=t.call.apply(t,[this].concat(a)),c(_$e,"downClipName",hi,h(_$e)),c(_$e,"upClipName",pi,h(_$e)),c(_$e,"useSound",di,h(_$e)),c(_$e,"soundKey",vi,h(_$e)),c(_$e,"disableSpamClick",yi,h(_$e)),c(_$e,"disableSpamDelay",fi,h(_$e)),_$e.currentClickBoundingBox=null,_$e.hasDown=!1,_$e.hasUp=!1,_$e.onTouchStart=function(t){if(_$e.buttonComponent.interactable&&!_$e.hasDown&&(_$e.currentClickBoundingBox=b.getBoundingBoxToWorld(_$e.node),_$e.hasDown=!0,_$e.runAnimation(_$e.downClipName),_$e.useSound&&_$e.soundKey)){var _$n=mi[_$e.soundKey];_$n&&k.playSound(_$n)}},_$e.onTouchEnd=function(t){_$e.buttonComponent.interactable&&_$e.hasDown&&(_$e.hasUp||_$e.handleUp(t))},_$e.onTouchCancel=function(t){var _$n,i;if(_$e.buttonComponent.interactable&&_$e.hasDown&&!_$e.hasUp){var a=t.getUILocation(),o=null!=(_$n=null==(i=_$e.currentClickBoundingBox)?void 0:i.contains(a))&&_$n;_instanceof(t,ee)&&o?_$e.handleUp(t):(_$e.hasUp=!0,_$e.runAnimation(_$e.upClipName),_$e.animationComponent.once(z.EventType.FINISHED,function(){_$e.handleResetButtonState()}))}},_$e.handleResetButtonState=function(){var t;if(_$e.hasDown=!1,_$e.hasUp=!1,_$e.buttonComponent){var _$n=_$e.buttonComponent.node.scale.x,i=_$e.buttonComponent.node.scale.z;null==(t=_$e.buttonComponent)||t.node.setScale(new te(_$n,1,i))}},_$e}return r(n,[{key:"__preload",value:function value(){this.buttonComponent=this.getComponent(Z),this.animationComponent=this.getComponent(z),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function value(){xt.lazyValidateProperties(this)}},{key:"onEnable",value:function value(){this.animationComponent.clips.length<2?console.warn("ButtonAnimAddition: Animation component must have 2 clips in ".concat(this.node.name)):(this.node.off(ne.EventType.TOUCH_END,this.buttonComponent._onTouchEnded,this.buttonComponent),this.node.on(ie.EventType.TOUCH_START,this.onTouchStart),this.node.on(ie.EventType.TOUCH_END,this.onTouchEnd),this.node.on(ie.EventType.TOUCH_CANCEL,this.onTouchCancel))}},{key:"onDisable",value:function value(){this.node.off(ie.EventType.TOUCH_START,this.onTouchStart),this.node.off(ie.EventType.TOUCH_END,this.onTouchEnd),this.node.off(ie.EventType.TOUCH_CANCEL,this.onTouchCancel),this.unschedule(this.handleResetButtonState),this.handleResetButtonState()}},{key:"handleUp",value:function value(e){var t=this;this.hasUp=!0,this.runAnimation(this.upClipName),this.animationComponent.once(z.EventType.FINISHED,function(){if(t.disableSpamClick?t.scheduleOnce(t.handleResetButtonState,t.disableSpamDelay):t.handleResetButtonState(),!t.buttonComponent||t.buttonComponent.interactable){Ci.event(Ludex.Plugins.Analytics.Events.BUTTON_CLICK,{button_name:t.node.name,screen_name:w.getCurrentPage()});var _$n=t.buttonComponent.clickEvents;if(_$n){var i,a=l(_$n);try{for(a.s();!(i=a.n()).done;){var o=i.value;o.emit([e,o.customEventData])}}catch(e){a.e(e)}finally{a.f()}}}})}},{key:"runAnimation",value:function value(e){if(!this.isAnimationExist(e))throw Error("".concat(this.node.name,": Animation component must have ").concat(e," clip"));this.animationComponent.play(e)}},{key:"isAnimationExist",value:function value(e){return this.animationComponent.clips.some(function(t){return!(!t||t.name!==e)})}}]),n}(U)).prototype,"downClipName",[ii],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return"ButtonDown"}}),pi=u(ci.prototype,"upClipName",[ai],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return"ButtonUp"}}),di=u(ci.prototype,"useSound",[oi],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return!0}}),vi=u(ci.prototype,"soundKey",[ri],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return Qn[Zn.BUTTON_CLICK]}}),yi=u(ci.prototype,"disableSpamClick",[si],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return!1}}),fi=u(ci.prototype,"disableSpamDelay",[li],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return .5}}),ui=ci))||ui)||ui)||ui),x._RF.pop(),x._RF.push({},"adccaBKYItKsqE+ZU1nBitm","AnimAbortSignal",void 0);var Ei,Ai,Ti,Ri,Li=Ludex.Utils.Array,Pi=function(){var i;function e(){o(this,e),this.callbacks$=[],this.isAborted$=!1,this.abortReason$="",this.callbacks$=[]}return r(e,[{key:"aborted",get:function get(){return this.isAborted$}},{key:"reason",get:function get(){return this.abortReason$}},{key:"addAbortListener",value:function value(e){this.callbacks$.push(e)}},{key:"removeAbortListener",value:function value(e){var t=Li.searchIndex(this.callbacks$,function(t){return t===e});-1!==t&&this.callbacks$.splice(t,1)}},{key:"abort",value:function value(e){if(!this.isAborted$){this.isAborted$=!0,this.abortReason$=e;var t,n=l(this.callbacks$);try{for(n.s();!(t=n.n()).done;){var i=t.value;"function"==typeof i&&i()}}catch(e){n.e(e)}finally{n.f()}this.callbacks$=[]}}},{key:"untilAborted",value:(i=t(n().mark(function e(){var t=this;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isAborted$){e.next=2;break}return e.abrupt("return");case 2:return e.abrupt("return",new Promise(function(e){t.addAbortListener(function(){return e()})}));case 3:case"end":return e.stop()}},e,this)})),function(){return i.apply(this,arguments)})},{key:"call",value:function value(e){this.aborted||e(this)}},{key:"callAsync",value:function value(e){return this.aborted?Promise.resolve():e(this)}},{key:"chain",value:function value(t){var n=this;_instanceof(t,e)?t.addAbortListener(function(){return n.abort()}):t.addEventListener("abort",function(){return n.abort()})}}],[{key:"hasBeenAborted",value:function value(e){return null==e||e.aborted}}]),e}();x._RF.pop(),x._RF.push({},"0e570DdAIZPKY6DNtNerFmX","OpacityToggler",void 0);var _i,Bi,Di,Oi,Ii,xi,Ni,Fi,zi,Gi,Mi,Ui,Hi,ji,Wi,Vi,$i=F.ccclass,qi=F.requireComponent,Ki=F.property,Yi=$i("OpacityToggler")(Ei=qi([ae])((Ti=u((Ai=function(e){i(u,e);var s,l=a(u);function u(){var _$e;o(this,u);for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return _$e=l.call.apply(l,[this].concat(n)),c(_$e,"activeValue",Ti,h(_$e)),c(_$e,"inActiveValue",Ri,h(_$e)),_$e.signal=new Pi,_$e}return r(u,[{key:"__preload",value:function value(){this.opacityComponent=this.getComponent(ae),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function value(){xt.lazyValidateProperties(this)}},{key:"changeState",value:function value(){var _$e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.signal.abort(),this.opacityComponent.opacity=_$e?this.activeValue:this.inActiveValue}},{key:"changeStateFade",value:(s=t(n().mark(function e(){var t,i,a,o=arguments;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]&&o[0],i=o.length>1&&void 0!==o[1]?o[1]:.2,this.signal.abort(),this.signal=new Pi,a=t?this.activeValue:this.inActiveValue,e.next=7,f.runTweenAsync(q(this.opacityComponent).to(i,{opacity:a}),this.signal);case 7:case"end":return e.stop()}},e,this)})),function(){return s.apply(this,arguments)})}]),u}(U)).prototype,"activeValue",[Ki],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return 255}}),Ri=u(Ai.prototype,"inActiveValue",[Ki],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return 128}}),Ei=Ai))||Ei)||Ei;x._RF.pop(),x._RF.push({},"08623z7mLxP/4DVAyNB9srK","DebugAdsPlugin",void 0);var Ji,Zi,Qi=F.ccclass,ea=F.property,ta=F.requireComponent,na=Ludex,ia=na.Events,aa=na.Plugins.Ads,oa=(void 0===aa?{}:aa).Types,ra=codex,sa=ra.event,la=ra.ads,ua={color:"#00FFFF",prefix:"LOADING"},ca={color:"#00FF00",prefix:"LOADED"},ha={color:"#FF00FF",prefix:"LOAD FAIL"},pa={color:"#FFFF00",prefix:"SHOWING..."},da={color:"#00FF00",prefix:"SHOW"},va={color:"#FF0000",prefix:"SHOW FAIL"},ya={color:"#AAAAAA",prefix:"CLOSED"};_i=Qi("DebugAdsPlugin"),Bi=ta(ae),Di=xt.required(),Oi=ea(oe),Ii=xt.required(),xi=ea(oe),Ni=xt.required(),Fi=ea(re),zi=xt.required(),Gi=ea(ae),_i(Mi=Bi((Hi=u((Ui=function(e){i(n,e);var t=a(n);function n(){var _$e;o(this,n);for(var i=arguments.length,a=Array(i),r=0;r<i;r++)a[r]=arguments[r];return _$e=t.call.apply(t,[this].concat(a)),c(_$e,"statusLabel",Hi,h(_$e)),c(_$e,"timersLabel",ji,h(_$e)),c(_$e,"logLabel",Wi,h(_$e)),c(_$e,"opacity",Vi,h(_$e)),_$e.logLines$=[],_$e.touchMs$=0,_$e.setupEventListeners$=function(t){[[ia.AD_LOADING,_$e.onAdLoading$],[ia.AD_LOADED,_$e.onAdLoaded$],[ia.AD_LOAD_FAILED,_$e.onAdLoadFailed$],[ia.AD_SHOWING,_$e.onAdShowing$],[ia.AD_SHOW,_$e.onAdShow$],[ia.AD_SHOW_FAILED,_$e.onAdShowFailed$],[ia.AD_CLOSED,_$e.onAdClosed$]].forEach(function(e){var _$n=C(e,2),i=_$n[0],a=_$n[1];sa[t](i,a)}),_$e.node[t](ne.EventType.TOUCH_END,_$e.handleTouchEnd$),_$e.node[t](ne.EventType.TOUCH_START,_$e.handleTouchStart$)},_$e.logInitializedAds$=function(){if(la){var t=la.getAdsInstances();t&&0!==Object.keys(t).length?(_$e.addLog$("Initialized ".concat(Object.keys(t).length," ad instances:"),"#00FF00"),Object.entries(t).forEach(function(t){var _$n=C(t,2),i=(_$n[0],_$n[1]),a=i.deviceOS,o=i.placementId;_$e.addLog$("".concat(o," on ").concat(a),"#00FFFF")})):_$e.addLog$("No ad instances initialized","#FFFF00")}else _$e.addLog$("Ads plugin not available","#FF0000")},_$e.handleTouchStart$=function(t){t.preventSwallow=0===_$e.opacity.opacity,t.touch&&_$e.opacity&&(Date.now()-_$e.touchMs$<300&&(255===_$e.opacity.opacity?_$e.opacity.opacity=0:_$e.opacity.opacity=255),_$e.touchMs$=Date.now())},_$e.handleTouchEnd$=function(t){t.preventSwallow=0===_$e.opacity.opacity},_$e.onAdLoading$=function(t){return _$e.logEvent$(ua,t)},_$e.onAdLoaded$=function(t){return _$e.logEvent$(ca,t)},_$e.onAdLoadFailed$=function(t){return _$e.logEvent$(ha,t)},_$e.onAdShowing$=function(t){return _$e.logEvent$(pa,t)},_$e.onAdShow$=function(t){return _$e.logEvent$(da,t)},_$e.onAdShowFailed$=function(t){return _$e.logEvent$(va,t)},_$e.onAdClosed$=function(t){return _$e.logEvent$(ya,t)},_$e.logEvent$=function(t,n){var i=n.type,a=n.placementId;_$e.addLog$("".concat(t.prefix,": ").concat(i," (").concat(a,")"),t.color)},_$e.addLog$=function(t,n){var i=(new Date).toLocaleTimeString().split(" ")[0],a="<color=".concat(n,">[").concat(i,"] ").concat(t,"</color>");_$e.logLines$.push(a),_$e.logLines$.length>20&&_$e.logLines$.shift(),_$e.logLabel&&(_$e.logLabel.string=_$e.logLines$.join("\n"))},_$e.updateStatus$=function(){if(oa){var t=la.enabled,_$n=la.getDeviceOS(),i=la.getDegradationTracking(),a=la.getSafeAreaBottom(1),o=E.getBannerAdHeight(),r="N/A",s="N/A";if(i){var l=i.lastSuccessTime;s=l>0?new Date(l).toLocaleTimeString():"Never",r="".concat(i.failedAttempts)}var u=Object.values(oa).filter(function(e){return!E.isAdEnabled(e)});_$e.statusLabel.string=["Enabled: ".concat(t),"DeviceOS: ".concat(_$n),"Last Success: ".concat(s),"Banner Height: ".concat(o),"SafeAreaBottom: ".concat(a),"Degradation Attempts: ".concat(r),"Disabled: ".concat(u.length?u.join(", "):"None")].join("\n")}},_$e.updateTimers$=function(){if(oa){var t=la.getLastCallAdShownTime();if(t){var _$n=Date.now()/1e3,i=Object.values(oa).map(function(e){var i=t[e]||0,a=i>0?(_$n-i).toFixed(1):"Never";return"".concat(e,": ").concat(a,"s")}).join("\n");_$e.timersLabel.string="Time Since Last Show\n".concat(i)}}},_$e}return r(n,[{key:"onLoad",value:function value(){var _$e=this;this.logInitializedAds$(),this.setupEventListeners$("on"),this.schedule(function(){_$e.updateStatus$(),_$e.updateTimers$()},.5)}},{key:"onDestroy",value:function value(){this.setupEventListeners$("off"),this.unscheduleAllCallbacks()}}]),n}(U)).prototype,"statusLabel",[Di,Oi],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ji=u(Ui.prototype,"timersLabel",[Ii,xi],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Wi=u(Ui.prototype,"logLabel",[Ni,Fi],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Vi=u(Ui.prototype,"opacity",[zi,Gi],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Mi=Ui))||Mi),x._RF.pop(),x._RF.push({},"7ef37Q3PZpKYaeik5JzGwNy","DebugResolution",void 0);var fa,ma,ga,ba,Sa,ka,wa,Ca,Ea,Aa,Ta,Ra,La,Pa=F.ccclass,_a=F.property,Ba=F.requireComponent,Da=F.disallowMultiple,Oa=F.executeInEditMode,Ia=g.DesignSize,xa=Ia.Portrait,Na=Ia.Landscape;Pa("DebugResolution")(Ji=Da(Ji=Ba([se])(Ji=Oa(!0)(((Zi=function(e){i(n,e);var t=a(n);function n(){var _$e;o(this,n);for(var i=arguments.length,a=Array(i),r=0;r<i;r++)a[r]=arguments[r];return(_$e=t.call.apply(t,[this].concat(a))).handleLayoutChange=function(){var t;null==(t=_$e.graphics)||t.clear(),_$e.start()},_$e}return r(n,[{key:"drawPortrait",get:function get(){return n._drawPortrait},set:function set(e){e!==n._drawPortrait&&(e?this.drawPortraitResolution():this.graphics.clear(),n._drawPortrait=e,n._drawLandscape&&this.drawLandscapeResolution())}},{key:"drawLandscape",get:function get(){return n._drawLandscape},set:function set(e){e!==n._drawLandscape&&(e?this.drawLandscapeResolution():this.graphics.clear(),n._drawLandscape=e,n._drawPortrait&&this.drawPortraitResolution())}},{key:"__preload",value:function value(){this.graphics=this.getComponent(se),this.validateRequiredComponents(),this.listenGameEvents()}},{key:"validateRequiredComponents",value:function value(){xt.lazyValidateProperties(this)}},{key:"listenGameEvents",value:function value(){J.on(m.LAYOUT_CHANGED,this.handleLayoutChange)}},{key:"start",value:function value(){this.drawPortrait&&this.drawPortraitResolution(),this.drawLandscape&&this.drawLandscapeResolution()}},{key:"drawPortraitResolution",value:function value(){var _$e=this.graphics;if(_$e){var t=xa.WIDTH,_$n=xa.HEIGHT;_$e.strokeColor=le.GREEN,_$e.rect(-t/2,-_$n/2,t,_$n),_$e.stroke()}}},{key:"drawLandscapeResolution",value:function value(){var _$e=this.graphics;if(_$e){var t=Na.WIDTH,_$n=Na.HEIGHT;_$e.strokeColor=le.CYAN,_$e.rect(-t/2,-_$n/2,t,_$n),_$e.stroke()}}}]),n}(U))._drawPortrait=!0,Zi._drawLandscape=!0,u(Zi.prototype,"drawPortrait",[_a],Object.getOwnPropertyDescriptor(Zi.prototype,"drawPortrait"),Zi.prototype),u(Zi.prototype,"drawLandscape",[_a],Object.getOwnPropertyDescriptor(Zi.prototype,"drawLandscape"),Zi.prototype),Ji=Zi))||Ji)||Ji)||Ji),x._RF.pop(),x._RF.push({},"c4718hmr29IBpiwZUE/Uo4H","DebugScreenManager",void 0);var Fa=F.ccclass,za=F.property,Ga=F.requireComponent,Ma=Ludex.Events,Ua=codex.event,Ha={color:"#00FFFF",prefix:"OPEN"},ja={color:"#FFFF00",prefix:"OPENING..."},Wa={color:"#00FF00",prefix:"OPENED"},Va={color:"#FF00FF",prefix:"CLOSE"},$a={color:"#FF0000",prefix:"CLOSING..."},qa={color:"#AAAAAA",prefix:"CLOSED"},Ka={color:"#FFA500",prefix:"LOADING..."},Ya={color:"#00FF00",prefix:"LOADED"};fa=Fa("DebugScreenManager"),ma=Ga(ae),ga=xt.required(),ba=za(oe),Sa=xt.required(),ka=za(re),wa=xt.required(),Ca=za(ae),fa(Ea=ma((Ta=u((Aa=function(e){i(n,e);var t=a(n);function n(){var _$e;o(this,n);for(var i=arguments.length,a=Array(i),r=0;r<i;r++)a[r]=arguments[r];return _$e=t.call.apply(t,[this].concat(a)),c(_$e,"statusLabel",Ta,h(_$e)),c(_$e,"logLabel",Ra,h(_$e)),c(_$e,"opacity",La,h(_$e)),_$e.touchMs$=0,_$e.logLines$=[],_$e.screenStates$={},_$e.eventHandlers$={},_$e.initEventHandlers$=function(){var t;S(t={},Ma.OPEN_SCREEN,function(t){return _$e.logEvent$(Ha,t)}),S(t,Ma.OPENING_SCREEN,function(t){_$e.logEvent$(ja,t)}),S(t,Ma.OPENED_SCREEN,function(t){return _$e.logEvent$(Wa,t)}),S(t,Ma.CLOSE_SCREEN,function(t){return _$e.logEvent$(Va,t)}),S(t,Ma.CLOSING_SCREEN,function(t){_$e.logEvent$($a,t)}),S(t,Ma.CLOSED_SCREEN,function(t){return _$e.logEvent$(qa,t)}),S(t,Ma.LOADING_SCREEN,function(t){return _$e.logEvent$(Ka,t)}),S(t,Ma.SCREEN_LOADED,function(t){return _$e.logEvent$(Ya,t)}),_$e.eventHandlers$=t},_$e.setupEventListeners$=function(t){Object.entries(_$e.eventHandlers$).forEach(function(e){var _$n=C(e,2),i=_$n[0],a=_$n[1];Ua[t](i,a)}),_$e.node[t](ne.EventType.TOUCH_END,_$e.handleTouchEnd$),_$e.node[t](ne.EventType.TOUCH_START,_$e.handleTouchStart$)},_$e.handleScreenStates$=function(t){_$e.screenStates$=t},_$e.getScreensInScene$=function(){var _$e=j.getScene(),t=(null==_$e?void 0:_$e.getComponentsInChildren("BaseScreen"))||[],_$n=t.filter(function(e){return e.node.active});return{sceneName:(null==_$e?void 0:_$e.name)||"Unknown",all:t,active:_$n}},_$e.logActiveScreens$=function(){var t=_$e.getScreensInScene$(),_$n=t.all,i=t.active;_$n.length>0&&(_$e.addLog$("Found ".concat(_$n.length," screens in scene"),"#00FF00"),i.forEach(function(t){_$e.addLog$("Active: ".concat(t.node.name),"#00FFFF")}))},_$e.handleTouchStart$=function(t){if(t.preventSwallow=0===_$e.opacity.opacity,t.touch&&_$e.opacity){if(Date.now()-_$e.touchMs$<300){var _$n=_$e.opacity.opacity;_$e.opacity.opacity=255*(255!==_$n)}_$e.touchMs$=Date.now()}},_$e.handleTouchEnd$=function(t){t.preventSwallow=0===_$e.opacity.opacity},_$e.logEvent$=function(t,n){var i=n.screenName;_$e.addLog$("".concat(t.prefix,": ").concat(i),t.color)},_$e.addLog$=function(t,n){var i=(new Date).toLocaleTimeString().split(" ")[0],a="<color=".concat(n,">[").concat(i,"] ").concat(t,"</color>");_$e.logLines$.push(a),_$e.logLines$.length>30&&_$e.logLines$.shift(),_$e.logLabel&&(_$e.logLabel.string=_$e.logLines$.join("\n"))},_$e.updateStatus$=function(){var t=_$e.getScreensInScene$().sceneName;if(_$e.screenStates$){var i=Object.values(_$e.screenStates$).sort(function(e,t){return e.order-t.order}).map(function(e){var t={queued:"Queued",loading:"Loading",prefab:"Loaded",ready:"Ready"}[e.state];return"ready"===e.state&&e.screen.node.active&&(t="Active"),"[".concat(t,"] ").concat(e.name)});_$e.statusLabel.string=["Scene: ".concat(t),"Screens (".concat(i.length,"):")].concat(A(i)).join("\n")}else _$e.statusLabel.string="Scene: ".concat(t,"\nScreenManager not ready")},_$e}return r(n,[{key:"onLoad",value:function value(){var _$e=this;this.initEventHandlers$(),this.logActiveScreens$(),this.setupEventListeners$("on"),J.on("DEBUG_SCREEN_STATES",this.handleScreenStates$),this.schedule(function(){J.emit("DEBUG_REQUEST_SCREEN_STATES"),_$e.updateStatus$()},.5)}},{key:"onDestroy",value:function value(){this.setupEventListeners$("off"),this.unscheduleAllCallbacks()}}]),n}(U)).prototype,"statusLabel",[ga,ba],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ra=u(Aa.prototype,"logLabel",[Sa,ka],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),La=u(Aa.prototype,"opacity",[wa,Ca],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ea=Aa))||Ea),x._RF.pop(),x._RF.push({},"0405b+DQy1IALb/j8jx5Lpc","PerfCounter",void 0);var Ja,Xa,Za,Qa,eo,to,no,io,ao,oo,ro,so,lo,uo,co,ho,po,vo,yo,fo,mo,go,bo,So,ko,wo,Co,Eo,Ao,To,Ro,Lo,Po,_o,Bo,Do,Oo,Io,xo,No,Fo,zo,Go,Mo,Uo,Ho,jo,Wo=function(){function e(){o(this,e),this.time=0,this._value=0,this.time=0,this._value=0}return r(e,[{key:"value",get:function get(){return this._value}},{key:"start",value:function value(){var _$e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.time=_$e}},{key:"end",value:function value(){var _$e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this._value=_$e-this.time}}]),e}();x._RF.pop(),x._RF.push({},"0e2d6yn/BVObK1kyTJ5a09a","GameStats",void 0);var Vo=F.ccclass,$o=F.executionOrder,qo=F.property,Ko=F.requireComponent,Yo=Ludex,Jo=Yo.Utils,Xo=Jo.Valid,Zo=Jo.Array,Qo=Jo.Device,er=Yo.Configs.Debugger.ListPlayerDevIds,tr=codex.player,nr=le.RED,ir=le.YELLOW,ar=le.WHITE,or=le.BLACK;Ja=Vo("GameStats"),Xa=$o(-1e3),Za=Ko([ae]),Qa=xt.required(),eo=qo(oe),to=xt.required(),no=qo(oe),io=xt.required(),ao=qo(oe),oo=xt.required(),ro=qo(oe),so=xt.required(),lo=qo(oe),uo=xt.required(),co=qo(oe),ho=xt.required(),po=qo(oe),vo=xt.required(),yo=qo(oe),fo=xt.required(),mo=qo(oe),go=xt.required(),bo=qo(oe),So=xt.required(),ko=qo(oe),wo=xt.required(),Co=qo(oe),Eo=xt.required(),Ao=qo(Y),To=xt.required(),Ro=qo(ae),Ja(Lo=Xa(Lo=Za((_o=u((Po=function(e){i(n,e);var t=a(n);function n(){var _$e;o(this,n);for(var i=arguments.length,a=Array(i),r=0;r<i;r++)a[r]=arguments[r];return _$e=t.call.apply(t,[this].concat(a)),c(_$e,"dprLabel",_o,h(_$e)),c(_$e,"fpsLabel",Bo,h(_$e)),c(_$e,"fpsRawLabel",Do,h(_$e)),c(_$e,"drawCountLabel",Oo,h(_$e)),c(_$e,"rafTimeLabel",Io,h(_$e)),c(_$e,"deltaTimeLabel",xo,h(_$e)),c(_$e,"logicTimeLabel",No,h(_$e)),c(_$e,"physicTimeLabel",Fo,h(_$e)),c(_$e,"renderTimeLabel",zo,h(_$e)),c(_$e,"totalMemoryLabel",Go,h(_$e)),c(_$e,"objectMemoryLabel",Mo,h(_$e)),c(_$e,"textureMemoryLabel",Uo,h(_$e)),c(_$e,"bg",Ho,h(_$e)),c(_$e,"opacity",jo,h(_$e)),_$e.lastRafTime$=0,_$e.slowRefreshInterval$=1,_$e.mediumRefreshInterval$=.5,_$e.fastRefreshInterval$=.16,_$e.isBackgroundEnabled$=!1,_$e.touchMs$=0,_$e.isDragging$=!1,_$e.listenInputEvents$=function(){_$e.node.on(ne.EventType.TOUCH_START,_$e.handleTouchStart$),_$e.node.on(ne.EventType.TOUCH_MOVE,_$e.handleTouchMove$),_$e.node.on(ne.EventType.TOUCH_END,_$e.handleTouchEnd$),_$e.node.on(ne.EventType.TOUCH_CANCEL,_$e.handleTouchEnd$),_$e.node.on(ne.EventType.MOUSE_WHEEL,function(){J.emit(m.REQUEST_DYNAMIC_ATLAS)})},_$e.handleTouchStart$=function(t){t.preventSwallow=0===_$e.opacity.opacity,t.touch&&_$e.opacity&&(_$e.isDragging$=!1,Date.now()-_$e.touchMs$<300&&(255===_$e.opacity.opacity?_$e.opacity.opacity=0:(_$e.opacity.opacity=255,J.emit(m.REQUEST_DYNAMIC_ATLAS))),_$e.touchMs$=Date.now())},_$e.handleTouchMove$=function(t){if(t.preventSwallow=0===_$e.opacity.opacity,t.touch&&_$e.opacity){var _$n=t.touch.getUIDelta();!_$e.isDragging$&&_$n.length()>10&&(_$e.isDragging$=!0),_$e.isDragging$&&_$e.node.setPosition(_$e.node.position.x+_$n.x,_$e.node.position.y+_$n.y)}},_$e.handleTouchEnd$=function(t){t.preventSwallow=0===_$e.opacity.opacity,t.touch&&_$e.opacity&&(_$e.isDragging$||(_$e.bg.enabled=!_$e.bg.enabled,_$e.isBackgroundEnabled$=_$e.bg.enabled),_$e.isDragging$=!1)},_$e.canDisplayStats$=function(){return Xo.isDebugger()||Zo.has(er,tr.getPlayerId())},_$e.startUpdateStats$=function(){_$e.schedule(_$e.updateFastStats$,_$e.fastRefreshInterval$),_$e.schedule(_$e.updateSlowStats$,_$e.slowRefreshInterval$),_$e.schedule(_$e.updateMediumStats$,_$e.mediumRefreshInterval$),requestAnimationFrame(_$e.handleRequestAnimationFrame$)},_$e.updateFastStats$=function(){_$e.updateFpsRaw$(),_$e.updateRafTime$(),_$e.updateDeltaTime$()},_$e.updateSlowStats$=function(){_$e.updateDPR$(),_$e.updateDrawCalls$(),_$e.updateTotalMemory$(),_$e.updateObjectMemory$(),_$e.updateTextureMemory$()},_$e.updateMediumStats$=function(){_$e.updateFps$(),_$e.updateLogicTime$(),_$e.updatePhysicTime$(),_$e.updateRenderTime$()},_$e.calcRafTime$=function(t){var _$n;null!=(_$n=_$e.node)&&_$n.isValid&&(_$e.rafTimeCounter$.end(t),_$e.lastRafTime$=t,_$e.handleRequestAnimationFrame$())},_$e.handleRequestAnimationFrame$=function(){_$e.rafTimeCounter$.start(_$e.lastRafTime$),requestAnimationFrame(_$e.calcRafTime$)},_$e.updateFps$=function(){var t=_$e.getFps$();_$e.updateFpsColor$(t),_$e.fpsLabel.string="FPS: ".concat(t)},_$e.updateFpsColor$=function(t){t<30?_$e.fpsLabel.color=nr:t<48?_$e.fpsLabel.color=ir:_$e.setColorWithBackground$(_$e.fpsLabel)},_$e.updateFpsRaw$=function(){var t=_$e.getFpsRaw$();_$e.updateFpsRawColor$(t),_$e.fpsRawLabel.string="FPS Raw: ".concat(t)},_$e.updateFpsRawColor$=function(t){t<30?_$e.fpsRawLabel.color=nr:t<48?_$e.fpsRawLabel.color=ir:_$e.setColorWithBackground$(_$e.fpsRawLabel)},_$e.updateDrawCalls$=function(){var t=_$e.getDrawCalls$();_$e.updateDrawCallsColor$(t),_$e.drawCountLabel.string="Draw Calls: ".concat(t)},_$e.updateDrawCallsColor$=function(t){var _$n=ue.os===ue.OS.IOS;t>(_$n?80:40)?_$e.drawCountLabel.color=nr:t>(_$n?60:25)?_$e.drawCountLabel.color=ir:_$e.setColorWithBackground$(_$e.drawCountLabel)},_$e.updateRafTime$=function(){var t=_$e.getRafTime$();_$e.updateRafTimeColor$(t),_$e.rafTimeLabel.string="RAF Time: ".concat(t,"ms")},_$e.updateRafTimeColor$=function(t){t>33?_$e.rafTimeLabel.color=nr:t>20?_$e.rafTimeLabel.color=ir:_$e.setColorWithBackground$(_$e.rafTimeLabel)},_$e.updateDeltaTime$=function(){var t=_$e.getDeltaTime$();_$e.updateDeltaTimeColor$(t),_$e.deltaTimeLabel.string="Delta Time: ".concat(t,"ms")},_$e.updateDeltaTimeColor$=function(t){t>33?_$e.deltaTimeLabel.color=nr:t>20?_$e.deltaTimeLabel.color=ir:_$e.setColorWithBackground$(_$e.deltaTimeLabel)},_$e.updateLogicTime$=function(){var t=_$e.getLogicTime$();_$e.updateLogicTimeColor$(t),_$e.logicTimeLabel.string="Logic Time: ".concat(t,"ms")},_$e.updateLogicTimeColor$=function(t){t>10?_$e.logicTimeLabel.color=nr:t>5?_$e.logicTimeLabel.color=ir:_$e.setColorWithBackground$(_$e.logicTimeLabel)},_$e.updatePhysicTime$=function(){var t=_$e.getPhysicTime$();_$e.updatePhysicTimeColor$(t),_$e.physicTimeLabel.string="Physic Time: ".concat(t,"ms")},_$e.updatePhysicTimeColor$=function(t){t>10?_$e.physicTimeLabel.color=nr:t>5?_$e.physicTimeLabel.color=ir:_$e.setColorWithBackground$(_$e.physicTimeLabel)},_$e.updateRenderTime$=function(){var t=_$e.getRenderTime$();_$e.updateRenderTimeColor$(t),_$e.renderTimeLabel.string="Render Time: ".concat(t,"ms")},_$e.updateRenderTimeColor$=function(t){t>10?_$e.renderTimeLabel.color=nr:t>5?_$e.renderTimeLabel.color=ir:_$e.setColorWithBackground$(_$e.renderTimeLabel)},_$e.updateTextureMemory$=function(){var t=_$e.getTextureMemoryUsage$();_$e.updateTextureMemoryColor$(t),_$e.textureMemoryLabel.string="Texture Memory: ".concat(t,"MB")},_$e.updateTextureMemoryColor$=function(t){t>200?_$e.textureMemoryLabel.color=nr:t>100?_$e.textureMemoryLabel.color=ir:_$e.setColorWithBackground$(_$e.textureMemoryLabel)},_$e.updateTotalMemory$=function(){if(_$e.totalMemoryLabel){var t=(window.performance||{}).memory;if(t){var _$n=t.jsHeapSizeLimit/1048576;_$e.setColorWithBackground$(_$e.totalMemoryLabel),_$e.totalMemoryLabel.string="Total Memory: ".concat(_$e.toFixed$(_$n,0),"MB")}}},_$e.updateObjectMemory$=function(){var t=(window.performance||{}).memory;if(t){var _$n=t.usedJSHeapSize/1048576,i=t.jsHeapSizeLimit/1048576;_$e.updateObjectMemoryColor$(_$n,i),_$e.objectMemoryLabel.string="Object Memory: ".concat(_$e.toFixed$(_$n),"MB")}},_$e.updateObjectMemoryColor$=function(t,n){var i=n>0?t/n*100:0;i>80?_$e.objectMemoryLabel.color=nr:i>50?_$e.objectMemoryLabel.color=ir:_$e.setColorWithBackground$(_$e.objectMemoryLabel)},_$e.updateDPR$=function(){var t=Qo.pixelRatio();_$e.updateDPRColor$(t),_$e.dprLabel.string="DPR: ".concat(t)},_$e.updateDPRColor$=function(t){t>2?_$e.dprLabel.color=nr:t<=1?_$e.dprLabel.color=ir:_$e.setColorWithBackground$(_$e.dprLabel)},_$e.setColorWithBackground$=function(t){var _$n=_$e.isBackgroundEnabled$?or:ar;t.color.equals(_$n)||(t.color=_$n)},_$e.getFps$=function(){return j.root&&Math.round(j.root.fps)||0},_$e.getDrawCalls$=function(){return j.root&&j.root.device.numDrawCalls||0},_$e.toFixed$=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return Number(e.toFixed(t))||0},_$e.getFpsRaw$=function(){return _$e.toFixed$(1e3/_$e.rafTimeCounter$.value,0)},_$e.getRafTime$=function(){return _$e.toFixed$(_$e.rafTimeCounter$.value)},_$e.getDeltaTime$=function(){return _$e.toFixed$(1e3*J.deltaTime)},_$e.getLogicTime$=function(){return _$e.toFixed$(_$e.logicTimeCounter$.value)},_$e.getPhysicTime$=function(){return _$e.toFixed$(_$e.physicTimeCounter$.value)},_$e.getRenderTime$=function(){return _$e.toFixed$(_$e.renderTimeCounter$.value)},_$e.getTextureMemoryUsage$=function(){if(!j.root)return 0;var t=j.root.device.memoryStatus;return _$e.toFixed$(t.textureSize/1048576,4)||0},_$e.beforeUpdate$=function(){var t=performance.now();_$e.logicTimeCounter$.start(t)},_$e.afterUpdate$=function(){var t=performance.now();_$e.logicTimeCounter$.end(t)},_$e.beforePhysics$=function(){var t=performance.now();_$e.physicTimeCounter$.start(t)},_$e.afterPhysics$=function(){var t=performance.now();_$e.physicTimeCounter$.end(t)},_$e.beforeDraw$=function(){var t=performance.now();_$e.renderTimeCounter$.start(t)},_$e.afterDraw$=function(){var t=performance.now();_$e.renderTimeCounter$.end(t)},_$e}return r(n,[{key:"__preload",value:function value(){this.listenInputEvents$()}},{key:"onLoad",value:function value(){xt.validateRequiredProperties(this)}},{key:"start",value:function value(){this.bg.enabled=!1,this.canDisplayStats$()?(this.node.active=!0,this.rafTimeCounter$=new Wo,this.logicTimeCounter$=new Wo,this.physicTimeCounter$=new Wo,this.renderTimeCounter$=new Wo,j.on(ce.EVENT_BEFORE_UPDATE,this.beforeUpdate$,this),j.on(ce.EVENT_AFTER_UPDATE,this.afterUpdate$,this),j.on(ce.EVENT_BEFORE_PHYSICS,this.beforePhysics$,this),j.on(ce.EVENT_AFTER_PHYSICS,this.afterPhysics$,this),j.on(ce.EVENT_BEFORE_DRAW,this.beforeDraw$,this),j.on(ce.EVENT_AFTER_DRAW,this.afterDraw$,this),this.startUpdateStats$()):this.node.active=!1}},{key:"onDestroy",value:function value(){this.canDisplayStats$()&&(j.off(ce.EVENT_BEFORE_UPDATE,this.beforeUpdate$,this),j.off(ce.EVENT_AFTER_UPDATE,this.afterUpdate$,this),j.off(ce.EVENT_BEFORE_PHYSICS,this.beforePhysics$,this),j.off(ce.EVENT_AFTER_PHYSICS,this.afterPhysics$,this),j.off(ce.EVENT_BEFORE_DRAW,this.beforeDraw$,this),j.off(ce.EVENT_AFTER_DRAW,this.afterDraw$,this),this.unschedule(this.updateSlowStats$),this.unschedule(this.updateFastStats$),this.unschedule(this.updateMediumStats$),this.node.off(ne.EventType.TOUCH_START,this.handleTouchStart$),this.node.off(ne.EventType.TOUCH_MOVE,this.handleTouchMove$),this.node.off(ne.EventType.TOUCH_END,this.handleTouchEnd$),this.node.off(ne.EventType.TOUCH_CANCEL,this.handleTouchEnd$))}}]),n}(U)).prototype,"dprLabel",[Qa,eo],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Bo=u(Po.prototype,"fpsLabel",[to,no],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Do=u(Po.prototype,"fpsRawLabel",[io,ao],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Oo=u(Po.prototype,"drawCountLabel",[oo,ro],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Io=u(Po.prototype,"rafTimeLabel",[so,lo],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xo=u(Po.prototype,"deltaTimeLabel",[uo,co],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),No=u(Po.prototype,"logicTimeLabel",[ho,po],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Fo=u(Po.prototype,"physicTimeLabel",[vo,yo],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),zo=u(Po.prototype,"renderTimeLabel",[fo,mo],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Go=u(Po.prototype,"totalMemoryLabel",[go,bo],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Mo=u(Po.prototype,"objectMemoryLabel",[So,ko],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Uo=u(Po.prototype,"textureMemoryLabel",[wo,Co],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ho=u(Po.prototype,"bg",[Eo,Ao],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),jo=u(Po.prototype,"opacity",[To,Ro],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Lo=Po))||Lo)||Lo),x._RF.pop(),x._RF.push({},"ca922n1V0RLioEyUJg8hQXH","GameEvents",void 0);var e1,rr,sr=((e1=sr||{}).NEXT_LEVEL="next-level",e1.UPDATE_LEVEL="update-level",e1.START_OVER="start-over",e1.SELECT_LEVEL="select-level",e1.GAME_START="game-start",e1.GAME_PAUSE="game-pause",e1.GAME_RESUME="game-resume",e1.GAME_REPLAY="game-replay",e1.SHOW_HINT="show-hint",e1.SKIP_LEVEL="skip-level",e1.TIME_OUT="time-out",e1.DRAWING="drawing",e1.DOGE_DIE="doge-die",e1.DOGE_SURVIVE="doge-survive",e1.BEE_DIE="bee-die",e1.BEE_ATTACK="bee-attack",e1.BIG_BEE_DIE="big-bee-die",e1.GAME_OBJECTS_SPAWNED="game-objects-spawned",e1);x._RF.pop(),x._RF.push({},"8249dDH5xBEc4nnCGRgSjaW","PanelAnimationController",void 0);var lr,ur,hr,pr,dr,vr,yr,fr,mr,gr,br,Sr,kr,Cr,Er,Ar,Tr=(0,F.ccclass)("PanelAnimationController")(rr=function(e){i(u,e);var s=a(u);function u(){o(this,u);for(var _$e,i,i1,i2=arguments.length,a=Array(i2),r=0;r<i2;r++)a[r]=arguments[r];return(_$e=s.call.apply(s,[this].concat(a))).animators=new Set,_$e.eventTarget=new he,_$e.handleRegistration=function(t){if(!t)throw Error("Invalid event payload.");_$e.animators.has(t)&&console.warn("Animator already registered."),_$e.animators.add(t)},_$e.handleUnregistration=function(t){if(!t)throw Error("Invalid event payload.");_$e.animators.has(t)||console.warn("Animator not registered."),_$e.animators.delete(t)},i=t(n().mark(function t(i){var a,o,r,s,_$u,c,h,p,d,v,y,f;return n().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r=!1,s=[],_$u=l(_$e.animators);try{for(_$u.s();!(c=_$u.n()).done;)h=c.value,s.push(h)}catch(e){_$u.e(e)}finally{_$u.f()}for(p=[],d=0,v=s;d<v.length;d++)(y=v[d]).isReadyForAnimation()||r||(r=!0,null==i||null==(f=i.fallback)||f.call(i)),p.push(y.handleShowUI());return t.next=8,Promise.all(p);case 8:null==i||null==(a=i.onComplete)||a.call(i),null==(o=_$e.eventTarget)||o.emit(sr.SHOW_UI);case 10:case"end":return t.stop()}},t)})),_$e.handleShowUIs=function(e){return i.apply(this,arguments)},i1=t(n().mark(function t(i){var a,o,r,s,_$u,c,h,p,d,v,y,f;return n().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r=!1,s=[],_$u=l(_$e.animators);try{for(_$u.s();!(c=_$u.n()).done;)h=c.value,s.push(h)}catch(e){_$u.e(e)}finally{_$u.f()}for(p=[],d=0,v=s;d<v.length;d++)(y=v[d]).isReadyForAnimation()||r||(r=!0,null==i||null==(f=i.fallback)||f.call(i)),p.push(y.handleHideUI());return t.next=8,Promise.all(p);case 8:null==i||null==(a=i.onComplete)||a.call(i),null==(o=_$e.eventTarget)||o.emit(sr.HIDE_UI);case 10:case"end":return t.stop()}},t)})),_$e.handleHideUIs=function(e){return i1.apply(this,arguments)},_$e}return r(u,[{key:"onEnable",value:function value(){this.node.scene.on(sr.SHOW_UI,this.handleShowUIs,this),this.node.scene.on(sr.HIDE_UI,this.handleHideUIs,this)}},{key:"onDisable",value:function value(){this.node.scene.off(sr.SHOW_UI,this.handleShowUIs,this),this.node.scene.off(sr.HIDE_UI,this.handleHideUIs,this)}},{key:"showUI",value:function value(){return this.handleShowUIs()}},{key:"hideUI",value:function value(){return this.handleHideUIs()}},{key:"on",value:function value(e,t,n,i){this.eventTarget.on(e,t,n,i)}},{key:"off",value:function value(e,t,n){this.eventTarget.off(e,t,n)}}],[{key:"getController",value:function value(e){for(var t=null,n=e;null!==n&&!(t=n.getComponent(u));)n=n.parent;return t}},{key:"registerAnimator",value:function value(e){var t=this.getController(e.node);t?t.handleRegistration(e):console.warn("No PanelAnimationController found for animator ".concat(e.node.name))}},{key:"unregisterAnimator",value:function value(e){var t=this.getController(e.node);t?t.handleUnregistration(e):console.warn("No PanelAnimationController found for animator ".concat(e.node.name))}}]),u}(U))||rr;x._RF.pop(),x._RF.push({},"f190aWZvVlGiplYX4XrZG3a","PanelAnimator",void 0);var Rr,Lr=F.ccclass,Pr=F.property,_r=Ludex.Utils.Object,Br=(lr=Lr("AnimationConfig"),ur=Pr({type:[$]}),lr((pr=u((hr=function(){function e(){o(this,e),c(this,"startHidden",pr,this),c(this,"nodes",dr,this),c(this,"posOffset",vr,this),c(this,"showEase",yr,this),c(this,"hideEase",fr,this),c(this,"showDuration",mr,this),c(this,"hideDuration",gr,this)}return r(e,[{key:"setConfig",value:function value(e){e&&_r.assign(this,e)}}]),e}()).prototype,"startHidden",[Pr],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return!0}}),dr=u(hr.prototype,"nodes",[ur],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return[]}}),vr=u(hr.prototype,"posOffset",[Pr],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return 0}}),yr=u(hr.prototype,"showEase",[Pr],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return"backOut"}}),fr=u(hr.prototype,"hideEase",[Pr],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return"backIn"}}),mr=u(hr.prototype,"showDuration",[Pr],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return 0}}),gr=u(hr.prototype,"hideDuration",[Pr],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return 0}}),hr))||hr);br=Lr("PanelAnimator"),Sr=Pr({type:Br,displayName:"Top animation nodes"}),kr=Pr({type:Br,displayName:"Bottom animation nodes"}),br((Er=u((Cr=function(e){i(p,e);var s,l,u=a(p);function p(){var _$e;o(this,p);for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return _$e=u.call.apply(u,[this].concat(n)),c(_$e,"topConfig",Er,h(_$e)),c(_$e,"botConfig",Ar,h(_$e)),_$e.isReady=!1,_$e}return r(p,[{key:"onEnable",value:function value(){Tr.registerAnimator(this)}},{key:"onDisable",value:function value(){Tr.unregisterAnimator(this)}},{key:"onLoad",value:function value(){this.topAnimator=this.createAnimator(this.topConfig,"top"),this.botAnimator=this.createAnimator(this.botConfig,"bottom"),this.initUIPos(),this.isReady=!0}},{key:"initUIPos",value:function value(){this.topAnimator.switchState(this.topConfig.startHidden?"hidden":"shown",!0),this.botAnimator.switchState(this.botConfig.startHidden?"hidden":"shown",!0)}},{key:"isReadyForAnimation",value:function value(){return this.isReady}},{key:"handleShowUI",value:(l=t(n().mark(function e(){return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isReady){e.next=3;break}return console.warn("".concat(this.node.name,"'s ").concat(this.name,": not ready")),e.abrupt("return");case 3:return e.abrupt("return",Promise.all([this.topAnimator.switchState("shown"),this.botAnimator.switchState("shown")]));case 4:case"end":return e.stop()}},e,this)})),function(){return l.apply(this,arguments)})},{key:"handleHideUI",value:(s=t(n().mark(function e(){return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isReady){e.next=3;break}return console.warn("".concat(this.node.name,"'s ").concat(this.name,": not ready")),e.abrupt("return");case 3:return e.abrupt("return",Promise.all([this.topAnimator.switchState("hidden"),this.botAnimator.switchState("hidden")]));case 4:case"end":return e.stop()}},e,this)})),function(){return s.apply(this,arguments)})},{key:"createAnimator",value:function value(e,i){var _$e,a=e.nodes,o=e.posOffset,r=e.showEase,s=e.hideEase,l=e.showDuration,u=e.hideDuration,c=a.map(function(e){return"top"===i&&e.isAlignTop?{mode:"top",value:e.top}:"bottom"===i&&e.isAlignBottom?{mode:"bottom",value:e.bottom}:{mode:"position",value:e.node.position.y}}),h=a.map(function(e){return"top"===i&&e.isAlignTop?{mode:"top",value:e.top+o}:"bottom"===i&&e.isAlignBottom?{mode:"bottom",value:e.bottom-o}:{mode:"position",value:e.node.position.y+o}}),d="shown",v=new Pi;return{switchState:(_$e=t(n().mark(function e(t){var i,o,y,m,g,b,S,k=arguments;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=k.length>1&&void 0!==k[1]&&k[1],v.abort(),v=o=new Pi,d!==t){e.next=6;break}return e.abrupt("return");case 6:if(d=t,y="hidden"===t?c:h,m="hidden"===t?h:c,g="hidden"===t?u:l,b="hidden"===t?s:r,S=function S(){for(var _$e=0,_$t=a.length;_$e<_$t;_$e++){var n=a[_$e],i=y[_$e],o=m[_$e].value;p.setToTargetImmediately(n,i,o)}},!i){e.next=15;break}return S(),e.abrupt("return");case 15:return o.addAbortListener(S),e.next=18,Promise.all(a.map(function(e,t){var n=y[t],i=m[t].value;return f.runTweenAsync(p.getTween({widget:e,config:n,target:i,easing:b,duration:g}),o)}));case 18:o.aborted||o.removeAbortListener(S);case 19:case"end":return e.stop()}},e)})),function(t){return _$e.apply(this,arguments)})}}},{key:"setAnimator",value:function value(e){var t=e.topConfig,n=e.botConfig,i=new Br,a=new Br;i.setConfig(t),a.setConfig(n),this.topConfig=i,this.botConfig=a,this.topAnimator=this.createAnimator(this.topConfig,"top"),this.botAnimator=this.createAnimator(this.botConfig,"bottom"),this.initUIPos()}}],[{key:"getTween",value:function value(e){var t=e.widget,n=e.config,i=e.target,a=e.easing,o=e.duration;return"top"===n.mode?q(t).call(function(){t.top=n.value}).to(o,{top:i},{easing:a}):"bottom"===n.mode?q(t).call(function(){t.bottom=n.value}).to(o,{bottom:i},{easing:a}):q(t.node.position).call(function(){t.node.setPosition(t.node.position.x,n.value,t.node.position.z)}).to(o,{y:i},{easing:a})}},{key:"setToTargetImmediately",value:function value(e,t,n){"top"===t.mode&&(e.top=n),"bottom"===t.mode&&(e.bottom=n);var i=e.node.position.x,o=e.node.position.z;e.node.setPosition(i,n,o)}}]),p}(U)).prototype,"topConfig",[Sr],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return new Br}}),Ar=u(Cr.prototype,"botConfig",[kr],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return new Br}}),Cr)),x._RF.pop(),x._RF.push({},"21a9aAlkBtGxKLqip8g0o6l","ParticleSystem2DExtra",void 0);var Or=F.ccclass,Ir=F.disallowMultiple,xr=F.executeInEditMode,Nr=F.requireComponent,Fr=Or("ParticleSystem2DExtra")(Rr=xr(!0)(Rr=Ir(!0)(Rr=Nr(pe)(Rr=function(e){i(n,e);var t=a(n);function n(){var _$e;o(this,n);for(var i=arguments.length,a=Array(i),r=0;r<i;r++)a[r]=arguments[r];return(_$e=t.call.apply(t,[this].concat(a))).emitParticle=function(t){return function(n){t(n);var i=_$e.particleSystem._simulator.particles.length,a=_$e.particleSystem._simulator.particles[i-1];_$e.initParticle(a)}},_$e.step=function(t){return function(n){for(var i=_$e.particleSystem._simulator.particles,a=0;a<i.length;a++){var o=i[a];_$e.updateParticle(o,n)}t(n)}},_$e}return r(n,[{key:"__preload",value:function value(){this.particleSystem=this.getComponent(pe),this.validateRequiredComponents(),this.overrideFunctions()}},{key:"overrideFunctions",value:function value(){var _$e=this.particleSystem._simulator.emitParticle.bind(this.particleSystem._simulator);this.particleSystem._simulator.emitParticle=this.emitParticle(_$e);var t=this.particleSystem._simulator.step.bind(this.particleSystem._simulator);this.particleSystem._simulator.step=this.step(t)}},{key:"validateRequiredComponents",value:function value(){xt.lazyValidateProperties(this)}}]),n}(U))||Rr)||Rr)||Rr)||Rr;x._RF.pop(),x._RF.push({},"9a5a3MgLaRAKbHluGCPsA8j","ExampleParticleSystem2DExtra",void 0),(0,F.ccclass)("ExampleParticleSystem2DExtra")(function(e){i(n,e);var t=a(n);function n(){return o(this,n),t.apply(this,arguments)}return r(n,[{key:"initParticle",value:function value(e){e.maxSize=de.randomRange(.25,1)*e.size,e.size=0,e.deltaSize=0,e.cycleDuration=de.randomRange(.4,.6),e.life=e.timeToLive,this.setInitPosition(e.pos)}},{key:"updateParticle",value:function value(e,t){this.updateScale(e)}},{key:"setInitPosition",value:function value(e){var t=e.x,_$n=e.y;return e.x=t+de.randomRange(-350,350),e.y=_$n+de.randomRange(-350,350),e}},{key:"updateScale",value:function value(e){var t=1-(e.life-e.timeToLive)%e.cycleDuration/e.cycleDuration;e.size=e.maxSize*Math.sin(t*Math.PI)}}]),n}(Fr)),x._RF.pop(),x._RF.push({},"6ea01hdw/9MHb28SCDAiRss","ResizeWithBannerAd",void 0);var zr,Gr,Mr,Ur,Hr,jr,Wr,Vr,$r,qr,Kr,Yr,Jr,Xr,Zr,Qr,es,ts,ns,is,as,os,rs,ss,ls,us,cs,hs,ps,ds,vs,ys,fs,ms,gs,bs,Ss=F.ccclass,ks=F.requireComponent,ws=F.property,Cs=codex,Es=Cs.ads,As=Cs.event,Ts=Ludex,Rs=Ts.Events,Ls=Ts.Plugins.Ads,Ps=void 0===Ls?{}:Ls,_s=Ps.Types,Bs=Ps.Status,Ds=Ts.Utils,Os=Ds.Array,Is=Ds.Function,xs=Ds.Device,Ns=["top","topleft","topright"],Fs=["bottom","bottomleft","bottomright"],zs=["left","topleft","bottomleft"],Gs=["right","topright","bottomright"];zr=Ss("ResizeWithBannerAd"),Gr=ks($),Mr=xt.required(),Ur=ws(Q),Hr=xt.required(),jr=ws(Q),Wr=xt.required(),Vr=ws(Q),$r=xt.required(),qr=ws(Q),Kr=xt.required(),Yr=ws(Q),Jr=xt.required(),Xr=ws($),zr(Zr=Gr((es=u((Qr=function(e){i(n,e);var t=a(n);function n(){var _$e;o(this,n);for(var i=arguments.length,a=Array(i),r=0;r<i;r++)a[r]=arguments[r];return _$e=t.call.apply(t,[this].concat(a)),c(_$e,"includeSAB",es,h(_$e)),c(_$e,"includeRightBanner",ts,h(_$e)),c(_$e,"includeBottomBanner",ns,h(_$e)),c(_$e,"includeLeftBanner",is,h(_$e)),c(_$e,"closeWhenAdFailed",as,h(_$e)),c(_$e,"widget",os,h(_$e)),_$e.setupEventListeners$=function(t){[[Rs.AD_SHOWING,_$e.handleOnAdShowing$],[Rs.AD_CLOSED,_$e.handleOnAdClosed$],[Rs.AD_SHOW_FAILED,_$e.handleOnAdFailed$],[m.VIEW_RESIZED,_$e.handleOnResize$]].forEach(function(e){var _$n=C(e,2),i=_$n[0],a=_$n[1];As[t](i,a)})},_$e.handleOnAdShowing$=function(t){var _$n=t.placementId,i=t.type;if(_$e.checkValid$()&&_$n&&_s&&i===_s.BANNER){try{if(!Es.getAd(_s.BANNER,_$n))return}catch(e){return void console.debug("Error getting banner ad:",e)}_$e.resizeWhenBannerAdShow$(_$n),_$e.emitResizeEvent()}},_$e.handleOnAdClosed$=function(t){var _$n=t.placementId,i=t.type;if(_$e.checkValid$()&&_$n&&_s&&i===_s.BANNER){try{if(!Es.getAd(_s.BANNER,_$n))return}catch(e){return void console.debug("Error getting banner ad:",e)}_$e.resizeWhenBannerAdClose$(_$n),_$e.emitResizeEvent()}},_$e.handleOnAdFailed$=function(t){var _$n=t.placementId,i=t.type;_$e.closeWhenAdFailed&&_$e.checkValid$()&&_$n&&_s&&i===_s.BANNER&&(_$e.resizeWhenBannerAdClose$(_$n),_$e.emitResizeEvent())},_$e.handleOnResize$=function(){if(_$e.checkValid$()&&_s&&Bs)if(E.isAdEnabled(_s.BANNER)){var t=Es.getAdsByType(_s.BANNER);0!==t.length?t.forEach(function(t){var _$n=Es.getAdStatus(_s.BANNER,t.placementId);_$n&&(_$n===Bs.SHOWING||xs.isIOS()?_$e.resizeWhenBannerAdShow$(t.placementId):_$n===Bs.IDLE&&_$e.resizeWhenBannerAdClose$(t.placementId))}):_$e.resizeSafeAreaBottom$()}else _$e.resizeSafeAreaBottom$()},_$e.getBannerHeight$=function(t,n){try{var i=Es.getBannerConfig(t),a=i.PlacementId,o=i.Position,r=_$e.includeSAB&&"bottom"===o;return Es.getBannerHeight(a,n,r)}catch(e){return console.debug("[ResizeWithBannerAd] Error getting banner ad:",e),0}},_$e.resizeWhenBannerAdShow$=function(t){var _$n,i,a,o,r=b.cssSizeToWorldSize(1),s=_$e.getBannerHeight$(t,r),l=Es.getBannerConfig(t),u=l.BannerWidth,c=l.Position;if("top"===c)_$n=s;else if("bottom"===c)_$e.includeBottomBanner?i=s:_$e.includeSAB&&(i=Es.getSafeAreaBottom(r));else if("left"===c||"right"===c){if(void 0===u)return;var h=u;"getBannerOffset"in GameSDK.extra&&(h+=GameSDK.extra.getBannerOffset()),"left"===c&&_$e.includeLeftBanner?a=h*r:"right"===c&&_$e.includeRightBanner&&(o=h*r)}_$e.updateWidgets$({top:_$n,bottom:i,left:a,right:o})},_$e.resizeWhenBannerAdClose$=function(t){var _$n=Es.getBannerConfig(t).Position,i=b.cssSizeToWorldSize(1),a=_$e.includeSAB?Es.getSafeAreaBottom(i):0;_$e.updateWidgets$({top:Os.has(Ns,_$n)?0:void 0,bottom:Os.has(Fs,_$n)?a:void 0,left:Os.has(zs,_$n)?0:void 0,right:Os.has(Gs,_$n)?0:void 0})},_$e.resizeSafeAreaBottom$=function(){var t=b.cssSizeToWorldSize(1),_$n=_$e.includeSAB?Es.getSafeAreaBottom(t):0;_$e.updateWidgets$({bottom:_$n})},_$e.updateWidgets$=function(t){var _$n=t.top,i=t.bottom,a=t.left,o=t.right;_$e.widget.top=null!=_$n?_$n:_$e.widget.top,_$e.widget.bottom=null!=i?i:_$e.widget.bottom,_$e.widget.left=null!=a?a:_$e.widget.left,_$e.widget.right=null!=o?o:_$e.widget.right,ve.instance.emit("canvas-resize")},_$e.emitResizeEvent=Is.debounce(function(){J.emit(m.WIDGET_RESIZED)},100),_$e.checkValid$=function(){return _$e.node.activeInHierarchy&&null!==_$e.node.parent&&void 0!==_$e.node.parent},_$e}return r(n,[{key:"__preload",value:function value(){xt.validateRequiredProperties(this),this.setupEventListeners$("on")}},{key:"onDestroy",value:function value(){this.setupEventListeners$("off")}},{key:"start",value:function value(){this.handleOnResize$()}}]),n}(U)).prototype,"includeSAB",[Mr,Ur],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return!0}}),ts=u(Qr.prototype,"includeRightBanner",[Hr,jr],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return!0}}),ns=u(Qr.prototype,"includeBottomBanner",[Wr,Vr],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return!0}}),is=u(Qr.prototype,"includeLeftBanner",[$r,qr],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return!0}}),as=u(Qr.prototype,"closeWhenAdFailed",[Kr,Yr],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return!1}}),os=u(Qr.prototype,"widget",[Jr,Xr],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Zr=Qr))||Zr),x._RF.pop(),x._RF.push({},"aa4b0d0u0hLeqd3+/PQZ/QD","SwitchButton",void 0);var Ms,Us,Hs,js,Ws,Vs,$s,qs=F.ccclass,Ks=F.property,Ys=F.requireComponent,Js=codex.analytics,Xs=(rs=qs("SwitchButton"),ss=Ys([Z]),ls=Ks(Q),us=Ks(ie),cs=Ks(ie),hs=Ks(Q),ps=Ks({visible:function visible(){return this.useSound},type:Qn}),rs(ds=ss((ys=u((vs=function(e){i(n,e);var t=a(n);function n(){var _$e;o(this,n);for(var i=arguments.length,a=Array(i),r=0;r<i;r++)a[r]=arguments[r];return _$e=t.call.apply(t,[this].concat(a)),c(_$e,"enable",ys,h(_$e)),c(_$e,"nodeOn",fs,h(_$e)),c(_$e,"nodeOff",ms,h(_$e)),c(_$e,"useSound",gs,h(_$e)),c(_$e,"soundKey",bs,h(_$e)),_$e}return r(n,[{key:"__preload",value:function value(){this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function value(){xt.lazyValidateProperties(this)}},{key:"switch",value:function value(){if(!this.node.active)return!1;if(Js.event(Ludex.Plugins.Analytics.Events.BUTTON_CLICK,{enable:!this.enable,button_name:this.node.name,screen_name:w.getCurrentPage()}),this.useSound&&this.soundKey){var _$e=mi[this.soundKey];_$e&&k.playSound(_$e)}return this.updateStatus(!this.enable)}},{key:"setEnabled",value:function value(e){this.node.active&&this.updateStatus(e)}},{key:"updateStatus",value:function value(e){return this.enable=e,this.nodeOn.active=e,this.nodeOff.active=!e,e}}]),n}(U)).prototype,"enable",[ls],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return!0}}),fs=u(vs.prototype,"nodeOn",[us],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ms=u(vs.prototype,"nodeOff",[cs],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gs=u(vs.prototype,"useSound",[hs],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return!0}}),bs=u(vs.prototype,"soundKey",[ps],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return Qn[Zn.BUTTON_CLICK]}}),ds=vs))||ds)||ds);x._RF.pop(),x._RF.push({},"aa60frMJLtIlJZh2yJhMp1s","DynamicLabel",void 0);var Zs,Qs,el,nl,il,al,ol,rl,sl,ll,ul,cl,hl,pl,dl,vl,yl,fl,ml,gl,bl,Sl,kl,wl,Cl,El,Al,Tl,Rl,Ll,Pl,_l,Bl,Dl,Ol,Il,xl,Nl,Fl,zl=F.ccclass,Gl=F.property,Ml=F.executeInEditMode,Ul=F.requireComponent;Ms=zl("DynamicLabel"),Us=Ul(oe),Hs=Ml(!0),js=Gl({type:V,min:1,max:200}),Ws=Gl({type:V,min:.1,max:4}),Ms(Vs=Us(Vs=Hs((u(($s=function(e){i(n,e);var t=a(n);function n(){var _$e;o(this,n);for(var i=arguments.length,a=Array(i),r=0;r<i;r++)a[r]=arguments[r];return(_$e=t.call.apply(t,[this].concat(a)))._quality=1,_$e._size=1,_$e._outlineWidth=0,_$e._shadowOffset=new ye(0,0),_$e}return r(n,[{key:"size",get:function get(){return this._size},set:function set(e){this._size=e,this.label.fontSize=this.size*this.quality}},{key:"quality",get:function get(){return this._quality},set:function set(e){this._quality=e,this.node.scale=new te(1/this.quality,1/this.quality,1),this.label.fontSize=this.size*this.quality,this.label.outlineWidth=this._outlineWidth*this.quality,this.label.shadowOffset=this._shadowOffset.multiplyScalar(this.quality)}},{key:"__preload",value:function value(){this.label=this.getComponent(oe)}},{key:"start",value:function value(){this._quality=1/this.node.scale.x,this._size=this.label.fontSize/this.quality,this._outlineWidth=this.label.outlineWidth,this._shadowOffset=this.label.shadowOffset,this.quality=window.devicePixelRatio,console.info("\uD83D\uDD20 ".concat(this.node.name,"<Label> quality:"),this.quality)}}]),n}(U)).prototype,"size",[js],Object.getOwnPropertyDescriptor($s.prototype,"size"),$s.prototype),u($s.prototype,"quality",[Ws],Object.getOwnPropertyDescriptor($s.prototype,"quality"),$s.prototype),Vs=$s))||Vs)||Vs),x._RF.pop(),x._RF.push({},"bce15LcVrxOfYMa9rbXN/qi","Localize",void 0);var Hl=F.ccclass,jl=F.property,Wl=F.executeInEditMode,Vl=F.disallowMultiple,$l=Ludex,ql=$l.Utils,Kl=ql.Signal,Yl=(ql.Function,ql.Array),Jl=$l.Events,Xl=codex,Zl=Xl.language,Ql=Xl.event,eu=((e2={})[e2.Text=0]="Text",e2[e2.Texture=1]="Texture",e2);X(eu);var e2,tu,nu,iu,ou,ru,su,lu,uu,hu,pu,du,vu,yu,mu,gu,bu,Su="localize-params-updated",ku=(Zs=Hl("LocalizeParams"),Qs=jl({visible:!1}),el=jl(G),Zs((il=u((nl=function(){function e(){o(this,e),c(this,"_text",il,this)}return r(e,[{key:"text",get:function get(){return this._text},set:function set(e){this._text=e,J.emit(Su,{text:e,param:this})}}]),e}()).prototype,"_text",[Qs],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return""}}),u(nl.prototype,"text",[el],Object.getOwnPropertyDescriptor(nl.prototype,"text"),nl.prototype),nl))||nl),wu=(al=Hl("Localize"),ol=Wl(!0),rl=jl({visible:!1}),sl=jl({type:G,visible:function visible(){return this.l10nType===eu.Texture}}),ll=jl({visible:!1}),ul=jl({type:fe(eu)}),cl=jl({type:oe,visible:function visible(){return this.l10nType===eu.Text}}),hl=jl({visible:function visible(){return this.l10nType===eu.Text}}),pl=jl({type:[ku],visible:function visible(){return this.l10nType===eu.Text}}),dl=jl({type:Y,visible:function visible(){return this.l10nType===eu.Texture}}),vl=jl({visible:function visible(){return this.l10nType===eu.Texture}}),yl=jl({visible:!1}),fl=jl({type:G}),ml=xt.onlyRunInLifeCycleAsync,gl=xt.onlyRunInLifeCycleAsync,bl=xt.onlyRunInLifeCycleAsync,Sl=xt.onlyRunInLifeCycleAsync,kl=xt.onlyRunInLifeCycle,wl=xt.onlyRunInLifeCycleAsync,Cl=xt.onlyRunInLifeCycleAsync,El=xt.onlyRunInLifeCycleAsync,Al=xt.onlyRunInLifeCycleAsync,Tl=xt.onlyRunInLifeCycle,Rl=xt.onlyRunInLifeCycleAsync,al(Ll=Vl(Ll=ol((_l=u((Pl=function(e){i(E,e);var s,l,u,d,v,y,f,g,b,S,k,w,C=a(E);function E(){var _$e;o(this,E);for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return(_$e=C.call.apply(C,[this].concat(n))).localized=!1,c(_$e,"_defaultLocale",_l,h(_$e)),c(_$e,"_l10nType",Bl,h(_$e)),c(_$e,"label",Dl,h(_$e)),c(_$e,"updateFont",Ol,h(_$e)),c(_$e,"params",Il,h(_$e)),c(_$e,"sprite",xl,h(_$e)),c(_$e,"packable",Nl,h(_$e)),c(_$e,"_key",Fl,h(_$e)),_$e.updateSignalController=new Kl.SignalController,_$e.onLocalizeParamsUpdated=function(t){var n=t.param;Yl.has(_$e.params,n)&&_$e.updateLocalization()},_$e.updateLocalization=function(){return _$e.updateLocalizationComp()},_$e}return r(E,[{key:"defaultLocale",get:function get(){return this._defaultLocale},set:function set(e){Yl.has(T,e)?this._defaultLocale=e:console.warn("Key ".concat(e," not found. Supported locales are ").concat(T.join(", ")))}},{key:"l10nType",get:function get(){return this._l10nType},set:function set(e){this._l10nType=e,e===eu.Texture&&(this.label=void 0,this.params=[]),e===eu.Text&&(this.sprite=void 0,this.packable=!0)}},{key:"key",get:function get(){return this._key},set:function set(e){try{if(!this.isValidKey(e))return void console.warn("Key ".concat(e," not found in locales"));this._key=e,this.updateLocalization()}catch(e){console.warn(e)}}},{key:"setParams",value:function value(e){for(;this.params.length<e.length;)this.params.push(new ku);for(var t=0,n=this.params.length;t<n;t++){var i,a=this.params[t];a.text=null!=(i=e[t])?i:a.text}}},{key:"waitUntilLocalized",value:function value(){var _$e=this;return this.localized?Promise.resolve():new Promise(function(t){return _$e.node.once(m.LOCALIZE_APPLIED,t)})}},{key:"__preload",value:function value(){}},{key:"isValidKey",value:function value(e){return!!this.isTextKey(e)||!!this.isTextureKey(e)}},{key:"isTextKey",value:function value(e){try{return this.l10nType===eu.Text&&Zl.hasTextKey(e)}catch(e){return console.warn(e),!1}}},{key:"isTextureKey",value:function value(e){try{return this.l10nType===eu.Texture&&Zl.hasTextureKey(e)}catch(e){return console.warn(e),!1}}},{key:"onEnable",value:function value(){this.listenEvent()}},{key:"onDisable",value:function value(){this.unlistenEvent(),this.updateSignalController.abort()}},{key:"start",value:function value(){this.initLocalization()}},{key:"listenEvent",value:function value(){Ql.on(Jl.LANGUAGE_CHANGED,this.updateLocalization),J.on(Su,this.onLocalizeParamsUpdated)}},{key:"unlistenEvent",value:function value(){Ql.off(Jl.LANGUAGE_CHANGED,this.updateLocalization),J.off(Su,this.onLocalizeParamsUpdated)}},{key:"initLocalization",value:function value(){return this.updateLocalizationComp(!0)}},{key:"updateLocalizationComp",value:(w=t(n().mark(function e(){var t,i,a,o=arguments;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=o.length>0&&void 0!==o[0]&&o[0],e.next=4;break;case 4:if(this.enabledInHierarchy){e.next=6;break}return e.abrupt("return");case 6:if(void 0!==this.key){e.next=8;break}return e.abrupt("return");case 8:if(i=this.updateSignalController.renew(),e.prev=9,this.localized=!1,!this.isTextKey(this.key)){e.next=16;break}return e.next=14,this.updateTextLocalization(this.key,i);case 14:case 22:e.next=25;break;case 16:if(!this.isTextureKey(this.key)){e.next=24;break}if(a=Zl.getCurrentLocale(),t&&a===this.defaultLocale){e.next=22;break}return e.next=22,this.updateTextureLocalization(this.key,i);case 24:throw Error("Key ".concat(this.key," not found in locales"));case 25:if(!i.aborted){e.next=27;break}return e.abrupt("return");case 27:this.localized=!0,J.emit(m.LOCALIZE_APPLIED,{localize:this,key:this.key}),this.node.emit(m.LOCALIZE_APPLIED,{localize:this,key:this.key}),e.next=35;break;case 32:e.prev=32,e.t0=e.catch(9),console.warn(e.t0);case 35:case"end":return e.stop()}},e,this,[[9,32]])})),function(){return w.apply(this,arguments)})},{key:"updateTextLocalization",value:(k=t(n().mark(function e(t,i){var a,o,r,s,l,u=this;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o=Zl.getCurrentLocale(),r=Zl.getText(t,this.params.map(function(e){return e.text}),o),void 0!==(s=this.label)){e.next=5;break}throw Error("Text localize component <".concat(this.node.name,"> has no label"));case 5:if(null==(a=i.wrap(function(){return u.setText(s,r)}))||a(),!this.updateFont){e.next=9;break}return e.next=9,null==(l=i.wrap(function(){return u.setTextFont(s,o,i)}))?void 0:l();case 9:case"end":return e.stop()}},e,this)})),function(e,t){return k.apply(this,arguments)})},{key:"setText",value:(S=t(n().mark(function e(t,i){return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.string=i;case 1:case"end":return e.stop()}},e)})),function(e,t){return S.apply(this,arguments)})},{key:"setTextFont",value:(b=t(n().mark(function e(t,i,a){return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,this.setTextFontRuntime(t,i,a);case 3:e.next=7;break;case 5:return e.next=7,this.setTextFontEditor(t,i,a);case 7:case"end":return e.stop()}},e,this)})),function(e,t,n){return b.apply(this,arguments)})},{key:"setTextFontRuntime",value:(g=t(n().mark(function e(t,i,a){var o;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.loadFontAsync(i);case 2:if(o=e.sent,!a.aborted){e.next=5;break}return e.abrupt("return");case 5:null!==o&&this.setLabelFontInLifeCycle(t,o);case 6:case"end":return e.stop()}},e,this)})),function(e,t,n){return g.apply(this,arguments)})},{key:"setLabelFontInLifeCycle",value:function value(e,t){e.font=t}},{key:"setTextFontEditor",value:(f=t(n().mark(function e(t,i,a){var o,r,s,l,u,c,h=this;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.requestFontUuid(i);case 2:if(null!==(s=e.sent)){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,null==(o=a.wrap(function(){return h.requestNodeInfo(t.node.uuid)}))?void 0:o();case 7:if(void 0!==(l=e.sent)){e.next=10;break}return e.abrupt("return");case 10:return u=Yl.searchIndex(l.__comps__,function(e){return"cc.Label"===e.type}),c="__comps__.".concat(u,".font"),e.next=14,null==(r=a.wrap(function(){return h.requestUpdateLabelFont(t.node.uuid,c,s)}))?void 0:r();case 14:case"end":return e.stop()}},e,this)})),function(e,t,n){return f.apply(this,arguments)})},{key:"requestFontUuid",value:(y=t(n().mark(function e(t){return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Editor.Message.request("asset-db","query-uuid","db://assets/loadable/".concat(R[t]));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)})),function(e){return y.apply(this,arguments)})},{key:"requestNodeInfo",value:function value(e){return Editor.Message.request("scene","query-node",e)}},{key:"requestUpdateLabelFont",value:(v=t(n().mark(function e(t,i,a){return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Editor.Message.request("scene","set-property",{uuid:t,path:i,dump:{type:"cc.Font",value:{uuid:a}}});case 2:case"end":return e.stop()}},e)})),function(e,t,n){return v.apply(this,arguments)})},{key:"updateTextureLocalization",value:(d=t(n().mark(function e(t,i){var a;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==this.sprite){e.next=2;break}throw Error("Texture localize component <".concat(this.node.name,"> has no sprite"));case 2:return a=Zl.getTexture(t),e.next=6,this.setSpriteRuntime(this.sprite,a,i);case 6:e.next=10;break;case 8:return e.next=10,this.setSpriteEditor(this.sprite,a,i);case 10:case"end":return e.stop()}},e,this)})),function(e,t){return d.apply(this,arguments)})},{key:"setSpriteRuntime",value:(u=t(n().mark(function e(t,i,a){var o;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.loadSpriteFrameAsync("".concat(i,"/spriteFrame"),this.packable);case 2:if(o=e.sent,!a.aborted){e.next=5;break}return e.abrupt("return");case 5:if(null!==o){e.next=8;break}return console.warn("Sprite not found by path: ".concat(i)),e.abrupt("return");case 8:this.setSprite(t,o);case 9:case"end":return e.stop()}},e,this)})),function(e,t,n){return u.apply(this,arguments)})},{key:"setSprite",value:function value(e,t){e.spriteFrame=t}},{key:"setSpriteEditor",value:(l=t(n().mark(function e(t,i,a){var o,r,s,l,u,c,h,p,d,v=this;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.requestSpriteFrameInfo(i);case 2:if(0!==(s=e.sent).length){e.next=6;break}return console.error("Sprite not found by path: ".concat(i)),e.abrupt("return");case 6:if(!(s.length>1)){e.next=11;break}return l=s.slice(0,5).map(function(e){return e.path}),u="".concat(l.join(",")).concat(l.length<s.length?"...":""),console.warn("Ambiguous sprite's path: ".concat(i,". Found ").concat(u)),e.abrupt("return");case 11:return e.next=13,null==(o=a.wrap(function(){return v.requestNodeInfo(t.node.uuid)}))?void 0:o();case 13:if(void 0!==(c=e.sent)){e.next=16;break}return e.abrupt("return");case 16:return h=s[0].uuid,p=Yl.searchIndex(c.__comps__,function(e){return"cc.Sprite"===e.type}),d="__comps__.".concat(p,".spriteFrame"),e.next=21,null==(r=a.wrap(function(){return v.requestUpdateSpriteSpriteFrame(t.node.uuid,d,h)}))?void 0:r();case 21:case"end":return e.stop()}},e,this)})),function(e,t,n){return l.apply(this,arguments)})},{key:"requestSpriteFrameInfo",value:function value(e){return Editor.Message.request("asset-db","query-assets",{pattern:"db://assets/loadable/".concat(e,"*"),ccType:"cc.SpriteFrame"})}},{key:"requestUpdateSpriteSpriteFrame",value:(s=t(n().mark(function e(t,i,a){return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Editor.Message.request("scene","set-property",{uuid:t,path:i,dump:{type:"cc.SpriteFrame",value:{uuid:a}}});case 2:case"end":return e.stop()}},e)})),function(e,t,n){return s.apply(this,arguments)})}]),E}(U)).prototype,"_defaultLocale",[rl],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return"en"}}),u(Pl.prototype,"defaultLocale",[sl],Object.getOwnPropertyDescriptor(Pl.prototype,"defaultLocale"),Pl.prototype),Bl=u(Pl.prototype,"_l10nType",[ll],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return eu.Text}}),u(Pl.prototype,"l10nType",[ul],Object.getOwnPropertyDescriptor(Pl.prototype,"l10nType"),Pl.prototype),Dl=u(Pl.prototype,"label",[cl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ol=u(Pl.prototype,"updateFont",[hl],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return!0}}),Il=u(Pl.prototype,"params",[pl],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return[]}}),xl=u(Pl.prototype,"sprite",[dl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Nl=u(Pl.prototype,"packable",[vl],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return!0}}),Fl=u(Pl.prototype,"_key",[yl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),u(Pl.prototype,"key",[fl],Object.getOwnPropertyDescriptor(Pl.prototype,"key"),Pl.prototype),u(Pl.prototype,"updateTextLocalization",[ml],Object.getOwnPropertyDescriptor(Pl.prototype,"updateTextLocalization"),Pl.prototype),u(Pl.prototype,"setText",[gl],Object.getOwnPropertyDescriptor(Pl.prototype,"setText"),Pl.prototype),u(Pl.prototype,"setTextFont",[bl],Object.getOwnPropertyDescriptor(Pl.prototype,"setTextFont"),Pl.prototype),u(Pl.prototype,"setTextFontRuntime",[Sl],Object.getOwnPropertyDescriptor(Pl.prototype,"setTextFontRuntime"),Pl.prototype),u(Pl.prototype,"setLabelFontInLifeCycle",[kl],Object.getOwnPropertyDescriptor(Pl.prototype,"setLabelFontInLifeCycle"),Pl.prototype),u(Pl.prototype,"setTextFontEditor",[wl],Object.getOwnPropertyDescriptor(Pl.prototype,"setTextFontEditor"),Pl.prototype),u(Pl.prototype,"requestUpdateLabelFont",[Cl],Object.getOwnPropertyDescriptor(Pl.prototype,"requestUpdateLabelFont"),Pl.prototype),u(Pl.prototype,"updateTextureLocalization",[El],Object.getOwnPropertyDescriptor(Pl.prototype,"updateTextureLocalization"),Pl.prototype),u(Pl.prototype,"setSpriteRuntime",[Al],Object.getOwnPropertyDescriptor(Pl.prototype,"setSpriteRuntime"),Pl.prototype),u(Pl.prototype,"setSprite",[Tl],Object.getOwnPropertyDescriptor(Pl.prototype,"setSprite"),Pl.prototype),u(Pl.prototype,"setSpriteEditor",[Rl],Object.getOwnPropertyDescriptor(Pl.prototype,"setSpriteEditor"),Pl.prototype),Ll=Pl))||Ll)||Ll)||Ll);x._RF.pop(),x._RF.push({},"060a722v8VBE68QPm8fKcyQ","LocalizePreloader",void 0);var Cu,Eu,Au,Tu,Ru,Lu,Pu,_u,Bu,Du,Ou,Iu,xu,Nu,Fu,zu,Gu=F.ccclass,Mu=F.property,Uu=Ludex.Utils,Hu=Uu.Array,ju=Uu.Valid,Wu=codex.language,Vu=(tu=Gu("LocalizeTextureKey"),nu=Mu({visible:!1}),iu=Mu(G),tu((ru=u((ou=function(){function e(){o(this,e),c(this,"_key",ru,this)}return r(e,[{key:"key",get:function get(){return this._key},set:function set(e){Wu.hasTextureKey(e)?this._key=e:console.warn("Key ".concat(e," not found in locales"))}}]),e}()).prototype,"_key",[nu],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return""}}),u(ou.prototype,"key",[iu],Object.getOwnPropertyDescriptor(ou.prototype,"key"),ou.prototype),ou))||ou),$u=(su=Gu("SupportedLocaleKey"),lu=Mu({visible:!1}),uu=Mu(G),su((pu=u((hu=function(){function e(){o(this,e),c(this,"_key",pu,this)}return r(e,[{key:"key",get:function get(){return this._key},set:function set(e){Hu.has(T,e)?this._key=e:console.warn("Key ".concat(e," not found. Supported locales are ").concat(T.join(", ")))}}]),e}()).prototype,"_key",[lu],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return""}}),u(hu.prototype,"key",[uu],Object.getOwnPropertyDescriptor(hu.prototype,"key"),hu.prototype),hu))||hu);du=Gu("LocalizePreloader"),vu=Mu([Vu]),yu=Mu({type:$u,tooltip:"Preload only for these locales"}),du((gu=u((mu=function(e){i(n,e);var t=a(n);function n(){var _$e;o(this,n);for(var i=arguments.length,a=Array(i),r=0;r<i;r++)a[r]=arguments[r];return _$e=t.call.apply(t,[this].concat(a)),c(_$e,"keys",gu,h(_$e)),c(_$e,"locales",bu,h(_$e)),_$e}return r(n,[{key:"__preload",value:function value(){this.preloadTextures()}},{key:"preloadTextures",value:function value(){var _$e=Wu.getCurrentLocale(),t=this.locales.map(function(e){return e.key});if(Hu.has(t,_$e)){var _$n,i=[],a=l(this.keys);try{for(a.s();!(_$n=a.n()).done;){var o=_$n.value;if(!1!==Wu.hasTextureKey(o.key)){var r=Wu.getTexture(o.key),s="".concat(r,"/spriteFrame");i.push(s)}}}catch(e){a.e(e)}finally{a.f()}p.loadSpriteFramesAsync(i)}else ju.isDebugger()&&console.info("Skipping preloading of textures because current locale is not in the list of preloading locales")}}]),n}(U)).prototype,"keys",[vu],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return[]}}),bu=u(mu.prototype,"locales",[yu],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return[]}}),mu)),x._RF.pop(),x._RF.push({},"3f364xnTJtDR5yeow2MWHhm","LocalizedLayout",void 0);var qu,Ku,Yu,Ju,Xu,Zu,Qu,ec,tc,nc,ic,ac,oc,rc,sc,lc,uc,cc,hc,pc,dc,vc,yc,fc,mc,gc,bc,Sc,kc=F.ccclass,wc=F.property,Cc=F.executeInEditMode,Ec=F.disallowMultiple,Ac=F.requireComponent;Cu=kc("LocalizedLayout"),Eu=Cc(!0),Au=Ac(W),Tu=wc(wu),Ru=xt.required(),Lu=wc(W),Pu=wc({visible:!1}),_u=wc({visible:!1}),Bu=wc({type:V,group:"Padding"}),Du=wc({type:V,group:"Padding"}),Cu(Ou=Ec(Ou=Eu(Ou=Au((xu=u((Iu=function(e){i(n,e);var t=a(n);function n(){var _$e;o(this,n);for(var i=arguments.length,a=Array(i),r=0;r<i;r++)a[r]=arguments[r];return _$e=t.call.apply(t,[this].concat(a)),c(_$e,"label",xu,h(_$e)),c(_$e,"layout",Nu,h(_$e)),c(_$e,"_horizontal",Fu,h(_$e)),c(_$e,"_vertical",zu,h(_$e)),_$e.updateContentSize=function(){var t;if(void 0!==_$e.label){var _$n=null==(t=_$e.label.getComponent(W))?void 0:t.contentSize;if(void 0!==_$n){_$e.layout.setContentSize(_$n.width+_$e.horizontal,_$n.height+_$e.vertical);var i,a=_$e.node.getComponentsInChildren($),o=l(a);try{for(o.s();!(i=o.n()).done;)i.value.updateAlignment()}catch(e){o.e(e)}finally{o.f()}}}},_$e}return r(n,[{key:"horizontal",get:function get(){return this._horizontal},set:function set(e){this._horizontal=e,this.updateContentSize()}},{key:"vertical",get:function get(){return this._vertical},set:function set(e){this._vertical=e,this.updateContentSize()}},{key:"__preload",value:function value(){this.layout=this.getComponent(W),xt.validateRequiredProperties(this)}},{key:"start",value:function value(){this.updateContentSize()}},{key:"onEnable",value:function value(){this.listenEvent()}},{key:"onDisable",value:function value(){this.unlistenEvent()}},{key:"listenEvent",value:function value(){var _$e;null==(_$e=this.label)||_$e.node.on(m.LOCALIZE_APPLIED,this.updateContentSize)}},{key:"unlistenEvent",value:function value(){var _$e;null==(_$e=this.label)||_$e.node.off(m.LOCALIZE_APPLIED,this.updateContentSize)}}]),n}(U)).prototype,"label",[Tu],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Nu=u(Iu.prototype,"layout",[Ru,Lu],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Fu=u(Iu.prototype,"_horizontal",[Pu],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return 0}}),zu=u(Iu.prototype,"_vertical",[_u],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return 0}}),u(Iu.prototype,"horizontal",[Bu],Object.getOwnPropertyDescriptor(Iu.prototype,"horizontal"),Iu.prototype),u(Iu.prototype,"vertical",[Du],Object.getOwnPropertyDescriptor(Iu.prototype,"vertical"),Iu.prototype),Ou=Iu))||Ou)||Ou)||Ou),x._RF.pop(),x._RF.push({},"a2260jBMJFPCrn/Q4Vo4iB1","BatchNodes",void 0);var Tc,Rc,Lc,Pc,_c,Bc,Dc,Oc,Ic,xc,Nc,Fc,zc,Gc,Mc,Uc,Hc,jc,Wc,Vc,$c=F.ccclass,qc=F.executionOrder,Kc=F.property,Yc=Ludex.Utils,Jc=Yc.Decorator,Xc=Yc.Array,Zc="Batch By Name",Qc="Batch Label",eh="Batch Sprite";qu=$c("BatchNodes"),Ku=qc(99999),Yu=Kc({group:{name:Zc}}),Ju=Kc({type:[M],group:{name:Zc}}),Xu=Kc({type:[G],group:{name:Zc}}),Zu=Kc({group:{name:Qc}}),Qu=Kc({group:{name:Qc}}),ec=Kc({group:{name:Qc}}),tc=Kc({group:{name:eh}}),nc=Kc({group:{name:eh}}),ic=Kc({readonly:!0}),ac=Kc({readonly:!0}),oc=Kc({readonly:!0}),rc=Jc.debounce(1e3),qu(sc=Ku((uc=u((lc=function(e){i(n,e);var t=a(n);function n(){var _$e;o(this,n);for(var i=arguments.length,a=Array(i),r=0;r<i;r++)a[r]=arguments[r];return _$e=t.call.apply(t,[this].concat(a)),c(_$e,"batchByName",uc,h(_$e)),c(_$e,"depthNames",cc,h(_$e)),c(_$e,"listName",hc,h(_$e)),c(_$e,"batchLabel",pc,h(_$e)),c(_$e,"depthLabel",dc,h(_$e)),c(_$e,"typeLabel",vc,h(_$e)),c(_$e,"batchSprite",yc,h(_$e)),c(_$e,"depthSprite",fc,h(_$e)),c(_$e,"batchAllNodes",mc,h(_$e)),c(_$e,"batchDepth",gc,h(_$e)),c(_$e,"checkOverlap",bc,h(_$e)),_$e.batchNode={},_$e.labelChildren=[],_$e.spriteChildren=[],_$e.allChildren=[],_$e.nameChildren=[],_$e.originalParents={},_$e.isInited=!1,c(_$e,"handleNodeChange",Sc,h(_$e)),_$e.onAfterUpdate=function(){_$e.isInited&&_$e.hierarchyChildren()},_$e.onAfterRender=function(){_$e.isInited&&_$e.restoreOriginalChildren()},_$e}return r(n,[{key:"__preload",value:function value(){this.enabled&&(j.on(ce.EVENT_AFTER_UPDATE,this.onAfterUpdate),j.on(ce.EVENT_AFTER_RENDER,this.onAfterRender))}},{key:"onDestroy",value:function value(){j.off(ce.EVENT_AFTER_UPDATE,this.onAfterUpdate),j.off(ce.EVENT_AFTER_RENDER,this.onAfterRender)}},{key:"onLoad",value:function value(){this.enabled&&(this.setupBatchNodes(this.node),this.isInited=!0)}},{key:"onEnable",value:function value(){this.isInited||(j.on(ce.EVENT_AFTER_UPDATE,this.onAfterUpdate),j.on(ce.EVENT_AFTER_RENDER,this.onAfterRender),this.setupBatchNodes(this.node),this.isInited=!0)}},{key:"handleActiveChange",value:function value(e){e.once(ie.EventType.ACTIVE_IN_HIERARCHY_CHANGED,this.handleNodeChange)}},{key:"onDisable",value:function value(){this.restoreOriginalChildren(),j.off(ce.EVENT_AFTER_UPDATE,this.onAfterUpdate),j.off(ce.EVENT_AFTER_RENDER,this.onAfterRender),this.isInited=!1}},{key:"setupBatchNodes",value:function value(e){this.allChildren=[],this.nameChildren=[],this.labelChildren=[],this.spriteChildren=[],this.saveOriginalChildren(e),this.createGlobalNodes(e),this.createGlobalNameNodes(e),this.createGlobalLabelNode(e),this.createGlobalSpriteNode(e),this.sortGlobalNodes()}},{key:"sortGlobalNodes",value:function value(){var _$e,t,_$n,i=this;null==(_$e=this.batchNode.node)||_$e.setSiblingIndex(0),null==(t=this.batchNode.label)||t.setSiblingIndex(this.depthLabel),null==(_$n=this.batchNode.sprite)||_$n.setSiblingIndex(this.depthSprite),this.listName.forEach(function(e,t){var _$n,a=i.depthNames[t];void 0!==a?null==(_$n=i.batchNode[e])||_$n.setSiblingIndex(a):console.warn("BatchNodes: depth is undefined",e,t,a)})}},{key:"createGlobalNodes",value:function value(e){if(this.batchAllNodes){var t=new ie("GlobalBatchNode");t.active=!0,this.batchNode.node=t,e.addChild(t)}}},{key:"createGlobalNameNodes",value:function value(e){if(this.batchByName){var t,_$n=l(this.listName);try{for(_$n.s();!(t=_$n.n()).done;){var i=t.value;if(!this.batchNode[i]){var a=new ie(i);a.active=!0,this.batchNode[i]=a,e.addChild(a)}}}catch(e){_$n.e(e)}finally{_$n.f()}}}},{key:"createGlobalLabelNode",value:function value(e){if(this.batchLabel){var t=new ie("GlobalLabelNode");t.active=!0,this.batchNode.label=t,e.addChild(t)}}},{key:"createGlobalSpriteNode",value:function value(e){if(this.batchSprite){var t=new ie("GlobalSpriteNode");t.active=!0,this.batchNode.sprite=t,e.addChild(t)}}},{key:"saveOriginalParents",value:function value(){var _$e,t=[].concat(A(this.labelChildren),A(this.spriteChildren)),_$n=this.nameChildren,i=l(t);try{for(i.s();!(_$e=i.n()).done;){var a=_$e.value;a.node.parent&&(this.handleActiveChange(a.node),this.originalParents[a.uuid]=a.node.parent)}}catch(e){i.e(e)}finally{i.f()}var o,r=l(_$n);try{for(r.s();!(o=r.n()).done;){var s=o.value;s.parent&&(this.handleActiveChange(s),this.originalParents[s.uuid]=s.parent)}}catch(e){r.e(e)}finally{r.f()}}},{key:"saveOriginalChildren",value:function value(e){var t,_$n=e.children,i=l(_$n);try{for(i.s();!(t=i.n()).done;){var a=t.value;this.saveLabelChildren(a),this.saveSpriteChildren(a),this.saveNodeChildrenByName(a),this.saveNodeChildrenByType(a)}}catch(e){i.e(e)}finally{i.f()}this.saveOriginalParents()}},{key:"saveLabelChildren",value:function value(e){var t;if(this.batchLabel){var _$n=e.getComponentsInChildren(oe),i={none:oe.CacheMode.NONE,char:oe.CacheMode.CHAR,bitmap:oe.CacheMode.BITMAP}[this.typeLabel];i&&(_$n=_$n.filter(function(e){return e.cacheMode===i})),0!==_$n.length&&(t=this.labelChildren).push.apply(t,A(_$n))}}},{key:"saveSpriteChildren",value:function value(e){var t;if(this.batchSprite){var _$n=e.getComponentsInChildren(Y);0!==_$n.length&&(t=this.spriteChildren).push.apply(t,A(_$n))}}},{key:"saveNodeChildrenByName",value:function value(e){if(this.batchByName){var t,_$n=l(e.children);try{for(_$n.s();!(t=_$n.n()).done;){var i=t.value;Xc.has(this.listName,i.name)?this.nameChildren.push(i):this.saveNodeChildrenByName(i)}}catch(e){_$n.e(e)}finally{_$n.f()}}}},{key:"saveNodeChildrenByType",value:function value(e){var t,_$n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(this.batchAllNodes){var i=e.getComponentsInChildren(U);if((t=this.allChildren).push.apply(t,A(i)),!(this.batchDepth<1||_$n>=this.batchDepth)){var a,o=l(this.allChildren);try{for(o.s();!(a=o.n()).done;){var r=a.value;this.saveNodeChildrenByType(r.node,this.batchDepth)}}catch(e){o.e(e)}finally{o.f()}}}}},{key:"hierarchyChildren",value:function value(){var _$e,t=function t(e,t){e.node.isValid&&e.node.activeInHierarchy&&t&&!e.node.isChildOf(t)&&(e.node.setParent(t,!0),e.node.layer=me.Enum.UI_2D)},_$n=["GlobalLabelNode","GlobalSpriteNode","GlobalBatchNode"],i=l(this.labelChildren);try{for(i.s();!(_$e=i.n()).done;)t(_$e.value,this.batchNode.label)}catch(e){i.e(e)}finally{i.f()}var a,o=l(this.spriteChildren);try{for(o.s();!(a=o.n()).done;)t(a.value,this.batchNode.sprite)}catch(e){o.e(e)}finally{o.f()}var r,s=l(this.allChildren);try{for(s.s();!(r=s.n()).done;)t(r.value,this.batchNode.node)}catch(e){s.e(e)}finally{s.f()}this.allChildren.sort(function(e,t){return e.constructor.name.localeCompare(t.constructor.name)}),this.labelChildren.sort(function(e,t){return e.cacheMode-t.cacheMode});var u,c=l(this.nameChildren);try{for(c.s();!(u=c.n()).done;){var h=u.value;if(h.isValid&&h.activeInHierarchy&&h.isTransformDirty()){var p=h.getComponent(ae);if(!(p&&p.opacity<1||Xc.has(_$n,h.name))){var d=this.batchNode[h.name];d&&(h.isChildOf(d)||(h.setParent(d,!0),h.layer=me.Enum.UI_2D))}}}}catch(e){c.e(e)}finally{c.f()}}},{key:"restoreOriginalChildren",value:function value(){var _$e=[].concat(A(this.labelChildren),A(this.spriteChildren));if(_$e.length>0){var t,_$n=l(_$e);try{for(_$n.s();!(t=_$n.n()).done;){var i=t.value,a=this.originalParents[i.uuid];a&&(i.node.isChildOf(a)||i.node.setParent(a,!0))}}catch(e){_$n.e(e)}finally{_$n.f()}}var o,r=l(this.nameChildren);try{for(r.s();!(o=r.n()).done;){var s=o.value,u=this.originalParents[s.uuid];u&&(s.isChildOf(u)||s.setParent(u,!0))}}catch(e){r.e(e)}finally{r.f()}}}]),n}(U)).prototype,"batchByName",[Yu],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return!1}}),cc=u(lc.prototype,"depthNames",[Ju],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return[]}}),hc=u(lc.prototype,"listName",[Xu],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return[]}}),pc=u(lc.prototype,"batchLabel",[Zu],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return!1}}),dc=u(lc.prototype,"depthLabel",[Qu],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return 1}}),vc=u(lc.prototype,"typeLabel",[ec],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return"char"}}),yc=u(lc.prototype,"batchSprite",[tc],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return!1}}),fc=u(lc.prototype,"depthSprite",[nc],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return 0}}),mc=u(lc.prototype,"batchAllNodes",[ic],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return!1}}),gc=u(lc.prototype,"batchDepth",[ac],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return 0}}),bc=u(lc.prototype,"checkOverlap",[oc],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return!1}}),Sc=u(lc.prototype,"handleNodeChange",[rc],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){var e=this;return function(){e.isInited&&(console.warn("handleNodeChange",e.node.name),e.setupBatchNodes(e.node))}}}),sc=lc))||sc),x._RF.pop(),x._RF.push({},"1ecebJCOPhK9L6AO92sjHzD","BatchNodesV2",void 0);var th,nh=F.ccclass,ih=F.executionOrder,ah=F.property,oh=Ludex.Utils,rh=oh.Array,sh=oh.Object;Tc=nh("BatchNodesV2"),Rc=ih(99999),Lc=ah({group:"Batch Settings"}),Pc=ah({type:[G],group:"Batch Settings",visible:function visible(){return this.batchByName}}),_c=ah({type:[M],group:"Batch Settings",visible:function visible(){return this.batchByName}}),Bc=ah({group:"Label Settings"}),Dc=ah({group:"Label Settings",visible:function visible(){return this.batchLabel}}),Oc=ah({group:"Label Settings",visible:function visible(){return this.batchLabel}}),Ic=ah({group:"Sprite Settings"}),xc=ah({group:"Sprite Settings",visible:function visible(){return this.batchSprite}}),Tc(Nc=Rc((zc=u((Fc=function(e){i(n,e);var t=a(n);function n(){var _$e;o(this,n);for(var i=arguments.length,a=Array(i),r=0;r<i;r++)a[r]=arguments[r];return _$e=t.call.apply(t,[this].concat(a)),c(_$e,"batchByName",zc,h(_$e)),c(_$e,"listName",Gc,h(_$e)),c(_$e,"depthNames",Mc,h(_$e)),c(_$e,"batchLabel",Uc,h(_$e)),c(_$e,"typeLabel",Hc,h(_$e)),c(_$e,"depthLabel",jc,h(_$e)),c(_$e,"batchSprite",Wc,h(_$e)),c(_$e,"depthSprite",Vc,h(_$e)),_$e.batchNodes={},_$e.originalParents={},_$e.labelNodes=[],_$e.spriteNodes=[],_$e.namedNodes={},_$e.isInitialized=!1,_$e.labelNodesByType={bitmap:[],char:[],none:[]},_$e.isEventListenerSetup=!1,_$e.onAfterUpdate=function(){_$e.isInitialized&&_$e.batchActiveNodes()},_$e.onAfterRender=function(){_$e.isInitialized&&_$e.restoreNodes()},_$e}return r(n,[{key:"depthLabelBitmap",get:function get(){return this.depthLabel}},{key:"depthLabelChar",get:function get(){return this.depthLabel+1}},{key:"depthLabelNone",get:function get(){return this.depthLabel+2}},{key:"onLoad",value:function value(){this.enabled&&this.initializeDataStructures()}},{key:"start",value:function value(){this.enabled&&this.initialize()}},{key:"onEnable",value:function value(){this.isEventListenerSetup||(this.setupEventListeners(),this.isEventListenerSetup=!0)}},{key:"onDisable",value:function value(){this.isEventListenerSetup&&(this.removeEventListeners(),this.isEventListenerSetup=!1),this.restoreNodes()}},{key:"onDestroy",value:function value(){this.removeEventListeners(),this.restoreNodes(),this.clearData()}},{key:"initializeDataStructures",value:function value(){this.batchNodes={},this.originalParents={},this.labelNodes=[],this.spriteNodes=[],this.namedNodes={},this.labelNodesByType={bitmap:[],char:[],none:[]}}},{key:"initialize",value:function value(){this.isInitialized||(this.createBatchContainers(),this.scanNodes(this.node),this.sortBatchNodes(),this.isInitialized=!0)}},{key:"clearData",value:function value(){this.batchNodes={},this.originalParents={},this.labelNodes=[],this.spriteNodes=[],this.namedNodes={},this.labelNodesByType={bitmap:[],char:[],none:[]},this.isInitialized=!1}},{key:"categorizeNode",value:function value(e){if(e.parent){if(this.originalParents[e.uuid]=e.parent,this.batchLabel){var t=e.getComponent(oe);t&&("all"===this.typeLabel?t.cacheMode===oe.CacheMode.BITMAP?this.labelNodesByType.bitmap.push(e):t.cacheMode===oe.CacheMode.CHAR?this.labelNodesByType.char.push(e):this.labelNodesByType.none.push(e):this.isValidLabel(t)&&this.labelNodes.push(e))}if(this.batchSprite&&e.getComponent(Y)&&this.spriteNodes.push(e),this.batchByName){var _$n=e.name;this.listName.includes(_$n)&&(this.namedNodes[_$n]||(this.namedNodes[_$n]=[]),this.namedNodes[_$n].push(e))}}}},{key:"isValidLabel",value:function value(e){var t={none:oe.CacheMode.NONE,char:oe.CacheMode.CHAR,bitmap:oe.CacheMode.BITMAP};return e.cacheMode===t[this.typeLabel]}},{key:"sortBatchNodes",value:function value(){if(this.batchLabel)if("all"===this.typeLabel){var _$e,t,_$n;null==(_$e=this.batchNodes.label_bitmap)||_$e.setSiblingIndex(this.depthLabelBitmap),null==(t=this.batchNodes.label_char)||t.setSiblingIndex(this.depthLabelChar),null==(_$n=this.batchNodes.label_none)||_$n.setSiblingIndex(this.depthLabelNone)}else{var i,a={bitmap:this.depthLabelBitmap,char:this.depthLabelChar,none:this.depthLabelNone}[this.typeLabel]||this.depthLabelChar;null==(i=this.batchNodes.label)||i.setSiblingIndex(a)}this.batchNodes.sprite&&this.batchNodes.sprite.setSiblingIndex(this.depthSprite);for(var o=0;o<this.listName.length;o++){var r=this.listName[o];if(r){var s=this.depthNames[o]||0,l=this.batchNodes[r];l&&l.setSiblingIndex(s)}}}},{key:"batchNodeArray",value:function value(e,t){for(var _$n=0;_$n<e.length;_$n++){var i=e[_$n];null!=i&&i.isValid&&i.activeInHierarchy&&i.parent!==t&&(this.isBatchContainer(i)||i.isTransformDirty()&&this.isParentChainActive(i)&&(i.setParent(t,!0),i.layer=me.Enum.UI_2D))}}},{key:"isBatchContainer",value:function value(e){var t=sh.vals(this.batchNodes);return rh.has(t,e)}},{key:"isParentChainActive",value:function value(e){for(var t=e,_$n=this.node;t&&t!==_$n;){if(!t.active||!t.isValid)return!1;t=t.parent}return t===_$n}},{key:"restoreNodes",value:function value(){var _$e=this,t=function t(t){var _$n=_$e.originalParents[t.uuid];null!=_$n&&_$n.isValid&&t.parent!==_$n&&_$e.isParentChainActive(_$n)&&t.setParent(_$n,!0)};if(this.batchLabel)if("all"===this.typeLabel)for(var _$n in this.labelNodesByType)for(var i=this.labelNodesByType[_$n],a=0;a<i.length;a++){var o=i[a];o&&t(o)}else for(var r=0;r<this.labelNodes.length;r++){var s=this.labelNodes[r];s&&t(s)}if(this.batchSprite)for(var l=0;l<this.spriteNodes.length;l++){var u=this.spriteNodes[l];u&&t(u)}if(this.batchByName)for(var c in this.namedNodes){var h=this.namedNodes[c];if(h)for(var p=0;p<h.length;p++){var d=h[p];d&&t(d)}}}},{key:"setupEventListeners",value:function value(){j.on(ce.EVENT_AFTER_UPDATE,this.onAfterUpdate),j.on(ce.EVENT_AFTER_RENDER,this.onAfterRender)}},{key:"removeEventListeners",value:function value(){j.off(ce.EVENT_AFTER_UPDATE,this.onAfterUpdate),j.off(ce.EVENT_AFTER_RENDER,this.onAfterRender)}},{key:"createBatchContainers",value:function value(){if(this.batchLabel)if("all"===this.typeLabel)for(var _$e=0,t=["bitmap","char","none"];_$e<t.length;_$e++){var _$n=t[_$e],i=new ie("BatchLabel_".concat(_$n));i.layer=me.Enum.UI_2D,this.node.addChild(i),this.batchNodes["label_".concat(_$n)]=i}else{var a=new ie("BatchLabel");a.layer=me.Enum.UI_2D,this.node.addChild(a),this.batchNodes.label=a}if(this.batchSprite){var o=new ie("BatchSprite");o.layer=me.Enum.UI_2D,this.node.addChild(o),this.batchNodes.sprite=o}if(this.batchByName)for(var r=0;r<this.listName.length;r++){var s=this.listName[r];if(s){var l=new ie("Batch_".concat(s));l.layer=me.Enum.UI_2D,this.node.addChild(l),this.batchNodes[s]=l,this.namedNodes[s]=[]}}}},{key:"scanNodes",value:function value(e){for(var t=e.children,_$n=0;_$n<t.length;_$n++){var i=t[_$n];i&&(this.categorizeNode(i),i.children.length>0&&this.scanNodes(i))}}},{key:"batchActiveNodes",value:function value(){if(this.batchLabel&&("all"===this.typeLabel?(this.batchNodesByType(this.labelNodesByType.bitmap,"label_bitmap"),this.batchNodesByType(this.labelNodesByType.char,"label_char"),this.batchNodesByType(this.labelNodesByType.none,"label_none")):this.batchNodesByType(this.labelNodes,"label")),this.batchSprite&&this.batchNodesByType(this.spriteNodes,"sprite"),this.batchByName)for(var _$e in this.namedNodes){var t=this.namedNodes[_$e];if(t){var _$n=this.batchNodes[_$e];_$n&&this.batchNodeArray(t,_$n)}}}},{key:"batchNodesByType",value:function value(e,t){var _$n=this.batchNodes[t];_$n&&this.batchNodeArray(e,_$n)}}]),n}(U)).prototype,"batchByName",[Lc],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return!1}}),Gc=u(Fc.prototype,"listName",[Pc],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return[]}}),Mc=u(Fc.prototype,"depthNames",[_c],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return[]}}),Uc=u(Fc.prototype,"batchLabel",[Bc],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return!1}}),Hc=u(Fc.prototype,"typeLabel",[Dc],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return"char"}}),jc=u(Fc.prototype,"depthLabel",[Oc],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return 1}}),Wc=u(Fc.prototype,"batchSprite",[Ic],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return!1}}),Vc=u(Fc.prototype,"depthSprite",[xc],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return 0}}),Nc=Fc))||Nc),x._RF.pop(),x._RF.push({},"9b958Lf6PFClb/JuJfTLzxG","Vibrate",void 0);var uh=F.ccclass,ch=Ludex.Utils.Browser,hh=codex.player,ph=uh("Vibrate")(th=function(e){i(n,e);var t=a(n);function n(){return o(this,n),t.apply(this,arguments)}return r(n,[{key:"vibrate",value:function value(e){if(this.isVibrateEnable()&&!ch.vibrate(e)){if("performHapticFeedbackAsync"in GameSDK.extra)return void GameSDK.extra.performHapticFeedbackAsync();console.warn("Vibrate failed")}}},{key:"isVibrateEnable",value:function value(){return!!hh.getPlayerSetting("vibrate")}}]),n}(U))||th;x._RF.pop(),x._RF.push({},"21fbd1aIo9DNoKfAoZaF1DC","WidgetCanvasTarget",void 0),(0,F.ccclass)("WidgetCanvasTarget")(function(e){i(n,e);var t=a(n);function n(){return o(this,n),t.apply(this,arguments)}return r(n,[{key:"__preload",value:function value(){var _$e=this.getComponent($);if(_$e){var t=ge("Canvas");t&&(_$e.target=t)}}}]),n}(U)),x._RF.pop(),x._RF.push({},"cb1abhXDs1A57EPVKbvTJg/","ButtonPlusEvents",void 0),x._RF.pop(),x._RF.push({},"e6289NIEoZEGaTkmk/RVxJy","ClassicModeLevels",void 0);var vh=[165,201,158,230,313,274,280,266,295,260,225,215,253,323,297,312,268,144,121,220,190,311,270,302,166,142,169,103,314,299,228,127,172,132,176,134,118,116,131,271,282,138,108,149,244,261,210,208,234,272,184,249,273,216,120,214,317,148,139,154,109,267,162,105,306,245,153,100,232,194,175,292,124,205,110,145,293,322,255,227,304,187,319,111,207,305,177,259,248,269,238,263,126,188,200,135,198,170,218,178,122,321,137,257,291,196,179,252,140,113,223,303,197,224,115,185,181,112,301,146,202,286,289,106,285,147,247,287,246,163,101,206,164,221,298,219,203,129,283,315,324,281,102,114,307,242,318,173,276,152,217,222,195,130,211,308,141,213,236,290,284,309,320,167,161,192,258,265,233,182,237,279,256,156,229,316,212,157,250,183,123,262,159,264,239,117,189,231,199,278,193,125,186,155,310,209,235,204,104,107,325,128,119,160,275,241,168,191,143,136,171,243,174,150,277,251,296,288,240,180,151,254,226,133,294,300];x._RF.pop(),x._RF.push({},"bf320amyc1I86bS3oK0M9NR","DashboardEvents",void 0),x._RF.pop(),x._RF.push({},"68b8bf0Va5JT7NVPECDNC5l","DashboardScreens",void 0);var yh=((e3=yh||{})[e3.store=0]="store",e3[e3.collections=1]="collections",e3[e3.home=2]="home",e3[e3.leaderboard=3]="leaderboard",e3[e3.tournaments=4]="tournaments",e3);X(yh),x._RF.pop(),x._RF.push({},"ad867amogBFGJo9jp78EnQP","DevTools",void 0);var fh=((e4=fh||{}).UNLOCK_DEV_TOOLS="unlock-dev-tools",e4.TRIGGER_UNLOCK_KEY="trigger-unlock-key",e4.TRIGGER_RESET_SEQUENCE="trigger-reset-sequence",e4);x._RF.pop(),x._RF.push({},"d2d6fiURYRNW52Q49fh9+s+","EndlessProgressions",void 0);var e3,e4,gh,bh,Sh,wh,Ch={0:{beeSpeed:60,spawnRandOffset:100,targetOffsetMultiplier:0,count:[8,15]},10:{beeSpeed:60,spawnRandOffset:100,targetOffsetMultiplier:.5,count:[10,20]},20:{beeSpeed:70,spawnRandOffset:110,targetOffsetMultiplier:.6,count:[10,20]},50:{beeSpeed:70,spawnRandOffset:120,targetOffsetMultiplier:.7,count:[10,20]}};x._RF.pop(),x._RF.push({},"e2458xYf5xBG6uFEvkD4R6s","FlowStratery",void 0);var Eh=F.ccclass,Ah=Ludex,Th=Ah.Utils,Rh=Th.Decorator,Lh=Th.String,Ph=Th.Number,_h=Ah.Dtos.Match.CustomData,Bh=codex,Dh=Bh.match,Oh=Bh.player,Ih=function Ih(e){L.closeLoadingScreen(),_instanceof(e,Error)&&L.showNotificationScreen(e.message)};gh=Eh("FlowStrategy"),bh=Rh.tryCatch(Ih),Sh=Rh.tryCatch(Ih),gh((u((wh=function(e){i(c,e);var s,l,u=a(c);function c(){var _$e;o(this,c);for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return(_$e=u.call.apply(u,[this].concat(n))).playerId="",_$e}return r(c,[{key:"onLoad",value:function value(){this.playerId=Oh.getPlayerId(),this.initDtosDefaultData()}},{key:"initDtosDefaultData",value:function value(){_h.addDefaults({maxTime:0}),_h.addValidator("maxTime",function(e){if(e<0)throw Error("maxTime must be greater than 0")})}},{key:"startStrategy",value:(l=t(n().mark(function e(){return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return L.showLoadingScreen(0),e.next=3,Dh.strategy.start.processAsync({matchId:Lh.generateObjectId(),gameMode:"endless",playerId:this.playerId});case 3:return e.next=5,Dh.handler.setMatchCustomData({maxTime:600});case 5:return e.next=7,Dh.handler.setProfileData({id:this.playerId,wish:0});case 7:case"end":return e.stop()}},e,this)})),function(){return l.apply(this,arguments)})},{key:"finishStrategy",value:(s=t(n().mark(function e(){return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Dh.handler.setProfileData({id:this.playerId,wish:Ph.random(9999)});case 2:return e.next=4,Dh.strategy.finish.processAsync({setPlayerBestScore:!1,postGlobalLeaderboard:!1});case 4:case"end":return e.stop()}},e,this)})),function(){return s.apply(this,arguments)})}]),c}(U)).prototype,"startStrategy",[bh],Object.getOwnPropertyDescriptor(wh.prototype,"startStrategy"),wh.prototype),u(wh.prototype,"finishStrategy",[Sh],Object.getOwnPropertyDescriptor(wh.prototype,"finishStrategy"),wh.prototype),wh)),x._RF.pop(),x._RF.push({},"91649r9HndHx6OjoY70+mR1","GameMode",void 0);var xh="classic",Nh="endless";x._RF.pop(),x._RF.push({},"adb272QtfxDGZ+87PwkWEiN","GameSettings",void 0),x._RF.pop(),x._RF.push({},"52b52FNwvhBKY/becAy420o","Leaderboard",void 0);var zh,Mh,Hh=Ludex.Configs.Leaderboards.LeaderboardList;null==(zh=Hh[0])||zh.Id,null==(Mh=Hh[1])||Mh.Id,x._RF.pop(),x._RF.push({},"e8e10DJmXdH8Jw30JCMjJqd","ScreensFlows",void 0),(0,F.ccclass)("ScreensFlows")(function(e){i(c,e);var s,l,u=a(c);function c(){var _$e;o(this,c);for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return(_$e=u.call.apply(u,[this].concat(n))).screenActions=[function(){return _$e.showLoadingScreen()},function(){return _$e.showNotificationScreen()},function(){return _$e.showWinningScreen()},function(){return _$e.showCongratulationScreen()},function(){return _$e.showLoseScreen()},function(){return _$e.showSettingsScreen()}],_$e}return r(c,[{key:"preloadScreens",value:function value(){L.preloadScreens()}},{key:"getRandomDelay",value:function value(){var _$e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;return Math.floor(Math.random()*(t-_$e+1))+_$e}},{key:"executeRandomScreenAction",value:(l=t(n().mark(function e(){var t,i;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Math.floor(Math.random()*this.screenActions.length),i=this.screenActions[t]){e.next=5;break}return console.warn("No screen action found at index:",t),e.abrupt("return");case 5:i();case 6:case"end":return e.stop()}},e,this)})),function(){return l.apply(this,arguments)})},{key:"spamScreens",value:(s=t(n().mark(function e(){var t,i,a,o=this;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=10,console.info("\uD83C\uDFAD Start spamming screens..."),i=n().mark(function e(){var i;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=o.getRandomDelay(200,800),console.debug("\uD83C\uDFAD Spamming screen ".concat(a+1,"/").concat(t)),e.next=4,new Promise(function(e){return setTimeout(e,i)});case 4:return e.next=6,o.executeRandomScreenAction();case 6:case"end":return e.stop()}},e)}),a=0;case 4:if(!(a<t)){e.next=9;break}return e.delegateYield(i(),"t0",6);case 6:a++,e.next=4;break;case 9:console.info("\uD83C\uDFAD Finished spamming screens");case 10:case"end":return e.stop()}},e)})),function(){return s.apply(this,arguments)})},{key:"showNotificationScreen",value:function value(){L.showNotificationScreen("Hey!")}},{key:"closeNotificationScreen",value:function value(){L.closeNotificationScreen()}},{key:"showLoadingScreen",value:function value(){L.showLoadingScreen(5)}},{key:"closeLoadingScreen",value:function value(){L.closeLoadingScreen()}},{key:"showWinningScreen",value:function value(){L.openScreen(P.WINNING_SCREEN)}},{key:"closeWinningScreen",value:function value(){L.closeScreen(P.WINNING_SCREEN)}},{key:"showLoseScreen",value:function value(){L.openScreen(P.LOSE_SCREEN,{level:1})}},{key:"closeLoseScreen",value:function value(){L.closeScreen(P.LOSE_SCREEN)}},{key:"showSettingsScreen",value:function value(){L.openScreen(P.SETTINGS_SCREEN)}},{key:"closeSettingsScreen",value:function value(){L.closeScreen(P.SETTINGS_SCREEN)}},{key:"showCongratulationScreen",value:function value(){L.openScreen(P.CONGRATULATION_SCREEN)}},{key:"closeCongratulationScreen",value:function value(){L.closeScreen(P.CONGRATULATION_SCREEN)}}]),c}(U)),x._RF.pop(),x._RF.push({},"f16ffbXQPtDK58g6BNFwzJv","Tournament",void 0),x._RF.pop(),x._RF.push({},"7e0c9Khhb1DD7wE1NBWi3Py","VibrateStyle",void 0),x._RF.pop(),x._RF.push({},"ad7acMQ2iJNKKA2RkT+nGNI","CommonError",void 0);var jh=function(e){i(n,e);var t=a(n);function n(e,i){var a;return o(this,n),(a=t.call(this,i)).code=e,a}return r(n)}(s(Error));x._RF.pop(),x._RF.push({},"5ff78u05/tPepABfMzNaOjM","PlayerHasTournamentError",void 0);var Wh=function(e){i(n,e);var t=a(n);function n(e,i){var a;return o(this,n),(a=t.call(this,"PLAYER_HAS_TOURNAMENT","Player has a tournament")).playerId=e,a.tournamentId=i,a}return r(n)}(jh);x._RF.pop(),x._RF.push({},"27033qxh65F25R336CXMYGV","BeeRole",void 0);var Vh=((e5=Vh||{})[e5.NORMAL=0]="NORMAL",e5[e5.PATH_SEEKER=1]="PATH_SEEKER",e5[e5.PUSHER=2]="PUSHER",e5);x._RF.pop(),x._RF.push({},"ab23abxgeZD0KDVdLYEeAQS","BeeState",void 0);var $h=((e6=$h||{})[e6.IDLE=0]="IDLE",e6[e6.FLYING=1]="FLYING",e6[e6.WAITING_TO_SEEK_PATH=2]="WAITING_TO_SEEK_PATH",e6[e6.SEEKING_PATH=3]="SEEKING_PATH",e6[e6.ATTACKING=4]="ATTACKING",e6[e6.DIE=5]="DIE",e6);x._RF.pop(),x._RF.push({},"9ef7e8FlFJOS5DAWzwBrkww","GameObject",void 0);for(var qh=((e7={}).AIR_FAN="air-fan",e7.BALLOON="balloon",e7.DOGE="doge",e7.SPIDER="spider",e7.BEE="bee",e7.BIG_BEE="big-bee",e7.BIG_BEE_BULLET="big-bee-bullet",e7.BEEHIVE="beehive",e7.BRICK="brick",e7.GRASS="grass",e7.GRASS_DARK="grass-dark",e7.COLLIDER="collider",e7.THORN="thorn",e7.THORN_BALL="thorn-ball",e7.MAP_LINE="line",e7.WOOD="wood",e7.WOOD_STROKE="wood-stroke",e7.POISON="poison",e7.POISON_BUBBLE="poison-bubble",e7.POISON_SURFACE="poison-surface",e7.WATER="water",e7.WATER_SURFACE="water-surface",e7.DANGER_AREA="danger-area",e7.DUST_PARTICLE="dust-particle",e7.ROPE="rope",e7.JOINT="joint",e7.DRAW_LINE="draw-line",e7.CROSSING_BEE_LINE="crossing-bee-line",e7),Kh=qh.COLLIDER,Yh=qh.DANGER_AREA,Jh=qh.DOGE,Xh=[Kh,Yh,qh.GRASS,qh.GRASS_DARK,qh.BRICK,qh.MAP_LINE,qh.POISON,qh.POISON_SURFACE,qh.POISON_BUBBLE,qh.AIR_FAN,qh.WOOD,qh.WOOD_STROKE,qh.THORN_BALL,qh.THORN,qh.CROSSING_BEE_LINE,qh.BEE,Jh,qh.BEEHIVE,qh.ROPE,qh.BALLOON,qh.WATER,qh.WATER_SURFACE,qh.JOINT,qh.DUST_PARTICLE,qh.DRAW_LINE],Zh={},Qh=0;Qh<Xh.length;Qh++)Zh[Xh[Qh]]=Qh;x._RF.pop(),x._RF.push({},"4c577T9x2FPKpyFoVPXbav0","ObjectIds",void 0);var tp=((e8=tp||{})[e8.BRICK=1]="BRICK",e8[e8.STROKE=3]="STROKE",e8[e8.GRASS_DARK=4]="GRASS_DARK",e8[e8.GRASS=5]="GRASS",e8[e8.COLLIDER=6]="COLLIDER",e8[e8.THORN=7]="THORN",e8[e8.WATER=8]="WATER",e8[e8.WATER_SURFACE=9]="WATER_SURFACE",e8[e8.LINE=10]="LINE",e8[e8.POISON_SURFACE=11]="POISON_SURFACE",e8[e8.POISON=12]="POISON",e8[e8.WOOD=13]="WOOD",e8[e8.THORN_BALL=14]="THORN_BALL",e8[e8.CONNECT=15]="CONNECT",e8[e8.DANGER_AREA=16]="DANGER_AREA",e8[e8.BALLOON=17]="BALLOON",e8[e8.AIR_FAN=18]="AIR_FAN",e8[e8.SPIDER=19]="SPIDER",e8[e8.DOGE_A=101]="DOGE_A",e8[e8.DOGE_B=106]="DOGE_B",e8[e8.BIG_BEE=107]="BIG_BEE",e8[e8.BEEHIVE_A=102]="BEEHIVE_A",e8[e8.BEEHIVE_B=103]="BEEHIVE_B",e8[e8.BEEHIVE_C=104]="BEEHIVE_C",e8[e8.BEEHIVE_D=105]="BEEHIVE_D",e8);x._RF.pop(),x._RF.push({},"7bb7ftpsjJCX5G6+WtNYJ2x","PhysicsGroup",void 0);var np=((e9=np||{})[e9.DEFAULT=1]="DEFAULT",e9[e9.BEE=2]="BEE",e9[e9.MAIN_OBJECT=4]="MAIN_OBJECT",e9[e9.WORLD_BOUND=8]="WORLD_BOUND",e9[e9.ROPE=16]="ROPE",e9);x._RF.pop(),x._RF.push({},"a6e4bjV/RVH17qBEx1mZaFg","ResourcePaths",void 0);var e5,e6,e7,e8,e9,e10,ip,ap=((e10=ap||{}).WATER_SURFACE_FRAME="sprites/water-surface/spriteFrame",e10.IC_HAND_FRAME="sprites/ic-hand/spriteFrame",e10.POISON_CIRCLE_FRAME="sprites/poison-circle/spriteFrame",e10.POISON_BUBBLE_PREFAB="prefabs/PoisonBubble",e10.DUST_PARTICLE_SPINE="spines/dust-particle/siwang_texiao",e10.MAP_JSON_PREFIX="maps-json/",e10);x._RF.pop(),x._RF.push({},"476e6UyMHFJyI2GmFP4KpHY","BaseObject",void 0);var op,rp,sp,up,cp,hp,pp=(0,F.ccclass)("BaseObject")(ip=function(e){i(n,e);var t=a(n);function n(){var _$e;o(this,n);for(var i=arguments.length,a=Array(i),r=0;r<i;r++)a[r]=arguments[r];return(_$e=t.call.apply(t,[this].concat(a))).points=[],_$e.body=null,_$e.bodyType=be.Static,_$e}return r(n,[{key:"onLoad",value:function value(){this.node.layer=me.Enum.UI_2D}},{key:"sleep",value:function value(){if(!this.body){if(this.body=this.getComponent(Se),!this.body)return;this.bodyType=this.body.type}this.enabled=!1,this.body.sleep(),this.body.type=be.Static}},{key:"wake",value:function value(){if(this.enabled=!0,this.body)this.body.wakeUp(),this.body.type=this.bodyType;else{if(this.body=this.getComponent(Se),!this.body)return;this.bodyType=this.body.type}}},{key:"hide",value:function value(){this.enabled=!1,null==(_$e=this.body)||_$e.sleep();var _$e,t=this.getComponent(ke.Skeleton);t&&(t.enabled=!1);var _$n=this.getComponent(Y);_$n&&(_$n.enabled=!1)}},{key:"preHide",value:function value(){var _$e;this.enabled=!1,null==(_$e=this.body)||_$e.sleep(),this.scheduleOnce(this.hide,.2)}},{key:"appear",value:function value(){this.enabled=!0;var _$e=this.getComponent(ke.Skeleton);_$e&&(_$e.enabled=!0)}},{key:"setSpineAnimation",value:function value(e,t){var _$n=this.getComponent(ke.Skeleton);null==_$n||_$n.setAnimation(0,e,t)}},{key:"setEnable",value:function value(e){this.enabled=e}},{key:"angle",value:function value(e,t){var _$n=Math.atan2(t,e);return _$n<0&&(_$n+=2*Math.PI),_$n}},{key:"getVectorDataFromAToB",value:function value(e,t){var _$n=t.x-e.x,i=t.y-e.y;return{vector:new ye(_$n,i).normalize(),dx:_$n,dy:i}}},{key:"kill",value:function value(){this.node.active=!1}},{key:"revive",value:function value(){this.node.active=!0}}]),n}(U))||ip;x._RF.pop(),x._RF.push({},"15b7bvQaXpFgItiEHCr7GsP","AirFan",void 0);var dp=F.ccclass,vp=F.property,yp=Ludex.Utils.Array,fp=(op=dp("AirFan"),rp=vp(M),sp=vp(we),op((cp=u((up=function(e){i(n,e);var t=a(n);function n(){var _$e;o(this,n);for(var i=arguments.length,a=Array(i),r=0;r<i;r++)a[r]=arguments[r];return _$e=t.call.apply(t,[this].concat(a)),c(_$e,"pushForce",cp,h(_$e)),_$e.force=new ye(0,0),_$e.affectedObjects=[],c(_$e,"collider",hp,h(_$e)),_$e.colliders=[],_$e.onBeginContact=function(t,n){yp.has(_$e.affectedObjects,n.node.name)&&-1===_$e.colliders.findIndex(function(e){return e.node===n.node})&&_$e.colliders.push(n)},_$e.onEndContact=function(t,n){var i=_$e.colliders.indexOf(n);-1!==i&&_$e.colliders.splice(i,1)},_$e}return r(n,[{key:"__preload",value:function value(){this.collider=this.getComponent(we),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function value(){xt.lazyValidateProperties(this)}},{key:"start",value:function value(){this.colliders=[],this.affectedObjects=[qh.DOGE,qh.THORN_BALL,qh.DRAW_LINE,qh.WOOD,qh.BALLOON],this.collider.on(Ce.BEGIN_CONTACT,this.onBeginContact),this.collider.on(Ce.END_CONTACT,this.onEndContact)}},{key:"update",value:function value(e){var t,_$n=l(this.colliders);try{for(_$n.s();!(t=_$n.n()).done;){var i=t.value,a=i.getComponent(Se);if(a){var o=this.force;i.node.name===qh.DRAW_LINE&&(o=this.force.clone().multiplyScalar(i.density/3)),i.node.name===qh.DOGE&&(o=this.force.clone().multiplyScalar(250/this.pushForce)),a.applyForceToCenter(o,!0)}}}catch(e){_$n.e(e)}finally{_$n.f()}}},{key:"setForceDirection",value:function value(e){var t=new ye(0,1).rotate(de.toRadian(e));this.force=t.clone().normalize().multiplyScalar(this.pushForce)}},{key:"sleep",value:function value(){v(y(n.prototype),"sleep",this).call(this),this.enabled=!1}},{key:"wake",value:function value(){v(y(n.prototype),"wake",this).call(this),this.enabled=!0}}]),n}(pp)).prototype,"pushForce",[rp],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return 400}}),hp=u(up.prototype,"collider",[sp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),up))||up);x._RF.pop(),x._RF.push({},"8a02eYTwSpP9IpQ4MrTsAiL","SpineAnimationName",void 0),x._RF.pop(),x._RF.push({},"ff37brNpltMuaZm+M+x9+1N","Rope",void 0);var mp,gp,bp,kp,wp,Cp,Rp,Lp,Pp,_p,Dp,Op,Ip,xp,Np=F.ccclass,Fp=F.property,zp=(mp=Np("Rope"),gp=Fp(Ee),bp=Fp(M),mp((wp=u((kp=function(e){i(n,e);var t=a(n);function n(){var _$e;o(this,n);for(var i=arguments.length,a=Array(i),r=0;r<i;r++)a[r]=arguments[r];return _$e=t.call.apply(t,[this].concat(a)),c(_$e,"frame",wp,h(_$e)),c(_$e,"length",Cp,h(_$e)),_$e.nodes=[],_$e}return r(n,[{key:"onLoad",value:function value(){this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function value(){xt.lazyValidateProperties(this)}},{key:"start",value:function value(){this.nodes=[],this.node.setPosition(this.headJoint.getPosition()),console.log(this.headJoint.getPosition(),this.tailJoint.getPosition(),this.node.getPosition());for(var _$e=this.headJoint.getPosition().clone().add(new te(0,4)).multiplyScalar(-1),t=this.tailJoint.getPosition().clone().add(new te(0,115)).add(_$e).multiplyScalar(1/this.length),_$n=t.length(),i=t.clone().multiplyScalar(-1*this.length),a=new ye(i.x,i.y),o=0;o<this.length;o++){var r=this.createNode(_$n);if(!r)return void console.warn("Rope: node-".concat(o," not found"));this.node.addChild(r),r.name="node-".concat(o),r.setPosition(t.clone().multiplyScalar(o)),this.nodes.push(r)}for(var s=0;s<this.nodes.length;s++){var l=this.nodes[s];if(0!==s){var u=this.nodes[s-1],c=l.addComponent(Ae);c.enabled=!1,c.anchor=new ye(0,-4),c.connectedAnchor=new ye(0,4),c.connectedBody=u.getComponent(Se),c.collideConnected=!1,c.enableLimit=!0,c.enabled=!0;var h=l.addComponent(Te);if(h.enabled=!1,h.connectedBody=this.headJoint.getComponent(Se),h.anchor=new ye(0,-4),h.connectedAnchor=new ye(0,4),h.collideConnected=!1,h.maxForce=160,h.enabled=!0,s===this.nodes.length-1){var p=this.tailJoint.addComponent(Ae);p.enabled=!1,p.anchor=new ye(0,115),p.connectedBody=l.getComponent(Se),p.connectedAnchor=new ye(0,4),p.collideConnected=!1,p.enableLimit=!0,p.enabled=!0}}else{var d=l.addComponent(Ae);d.enabled=!1,d.connectedBody=this.headJoint.getComponent(Se),d.anchor=new ye(0,-4),d.connectedAnchor=new ye(0,4),d.enableLimit=!0,d.collideConnected=!1,d.enabled=!0}}var v=this.tailJoint.addComponent(Te);v.enabled=!1,v.connectedBody=this.headJoint.getComponent(Se),v.anchor=new ye(0,118),v.connectedAnchor=new ye(0,-4),v.linearOffset=a,v.maxForce=500,v.enabled=!0}},{key:"disconnect",value:function value(){console.log("Disconnecting rope");var _$e=this.nodes[0].getComponent(Ae);if(_$e){_$e.connectedBody=null,_$e.enabled=!1;var t=this.tailJoint.getComponent(Ae);if(t){t.connectedBody=null,t.enabled=!1;var _$n=this.tailJoint.getComponent(Te);_$n&&(_$n.enabled=!1,_$n.connectedBody=null);var i,a=l(this.nodes);try{for(a.s();!(i=a.n()).done;){var o=i.value.getComponent(Y);if(!o)return void console.warn("Rope: Sprite not found");o.enabled=!1}}catch(e){a.e(e)}finally{a.f()}}else console.warn("Rope: Final joint not found")}else console.warn("Rope: Starting joint not found")}},{key:"createNode",value:function value(e){var t=new ie("node");t.layer=this.node.layer,t.addComponent(Y).spriteFrame=this.frame;var _$n=t.addComponent(W);_$n.setAnchorPoint(.5,.5),_$n.setContentSize(6,1.2*e);var i=t.addComponent(Se);return i.linearDamping=5,i.angularDamping=50,i.gravityScale=.1,i.group=np.ROPE,t.addComponent(Re).size=_$n.contentSize,t.name=qh.ROPE,t}}]),n}(U)).prototype,"frame",[gp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Cp=u(kp.prototype,"length",[bp],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return 0}}),kp))||kp);x._RF.pop(),x._RF.push({},"a8a47NhLJ9C1ahfjfiJ2xjc","Balloon",void 0);var Gp=F.ccclass,Mp=F.property,Up=Ludex.Utils.Array,Hp=(Rp=Gp("Balloon"),Lp=Mp(Le),Pp=Mp(we),_p=Mp(Se),Rp((Op=u((Dp=function(e){i(n,e);var t=a(n);function n(){var _$e;o(this,n);for(var i=arguments.length,a=Array(i),r=0;r<i;r++)a[r]=arguments[r];return _$e=t.call.apply(t,[this].concat(a)),c(_$e,"ropePrefab",Op,h(_$e)),c(_$e,"collider",Ip,h(_$e)),c(_$e,"rigidBody",xp,h(_$e)),_$e.rope=null,_$e.onBeginContact=function(t,n){if(_$e.rope){var i=[qh.BEE,qh.THORN,qh.THORN_BALL];Up.has(i,n.node.name)&&(_$e.rope.disconnect(),_$e.setSpineAnimation("animation2",!1),_$e.scheduleOnce(function(){_$e.rigidBody.enabled=!1}))}},_$e}return r(n,[{key:"__preload",value:function value(){this.collider=this.getComponent(we),this.rigidBody=this.getComponent(Se),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function value(){xt.lazyValidateProperties(this)}},{key:"start",value:function value(){this.setSpineAnimation("animation",!0),this.collider.on(Ce.BEGIN_CONTACT,this.onBeginContact)}},{key:"connectToDoge",value:function value(e){var t=Pe(this.ropePrefab).getComponent(zp);if(t)return t.headJoint=this.node,t.tailJoint=e,t.node.name=qh.ROPE,this.rope=t,t;console.warn("Balloon: Rope component not found")}}]),n}(pp)).prototype,"ropePrefab",[Lp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ip=u(Dp.prototype,"collider",[Pp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xp=u(Dp.prototype,"rigidBody",[_p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Dp))||Dp);x._RF.pop(),x._RF.push({},"ec831BZISdLgp8vKNuRirUM","PusherBehavior",void 0);var jp=function(){function e(t){o(this,e),this.bee=t}return r(e,[{key:"onBeginContact",value:function value(){var _$e=this.bee;if(_$e.target){var t=de.randomRange(20,30),n=_$e.getVectorDataFromAToB(_$e.node.getWorldPosition(),_$e.target.getWorldPosition());n.vector.rotate(Math.random()>.5?-Math.PI/2:Math.PI/2).multiplyScalar(t),_$e.move(n);var i=_$e.getComponent(_e);i&&(i.density*=1.1,i.density>=2.5&&(i.density=1,_$e.setRole(Vh.NORMAL),_$e.setState($h.ATTACKING)))}}}]),e}();x._RF.pop(),x._RF.push({},"744a5WT+0VHFLma6AT7mXct","NormalBehavior",void 0);var Wp=function(){function e(t){o(this,e),this.touchCount=0,this.bee=t,this.timeToAttack=de.randomRange(.7,.8),this.countTimeToAttack=0}return r(e,[{key:"onBeginContact",value:function value(){var _$e=this;1===this.touchCount&&this.bee.scheduleOnce(function(){_$e.touchCount>=3&&_$e.activePusher(),_$e.touchCount=0},.75),this.touchCount++}},{key:"activePusher",value:function value(){this.bee.setRole(Vh.PUSHER)}},{key:"update",value:function value(e){this.bee.state===$h.ATTACKING&&(this.countTimeToAttack+=e,this.countTimeToAttack>this.timeToAttack&&(this.bee.findTarget(),this.bee.attackTarget(),this.timeToAttack=de.randomRange(.4,.6),this.countTimeToAttack=0))}}]),e}();x._RF.pop(),x._RF.push({},"19c52/F5VRPcbm2BqdbChIp","BaseBehavior",void 0);var Vp,$p,qp,Kp,Yp,Xp,Zp,Qp,ed,td,nd,id=function(){function e(t){o(this,e),this.bee=t,this.normalBehavior=new Wp(t),this.pusherBehavior=new jp(t),this.seekingPathBehavior=null}return r(e,[{key:"onBeginContact",value:function value(e,t){switch(this.bee.role){case Vh.NORMAL:this.normalBehavior.onBeginContact();break;case Vh.PATH_SEEKER:if(!this.seekingPathBehavior)return void console.warn("Bee: Seeking path behavior is null");this.seekingPathBehavior.onBeginContact(e,t);break;case Vh.PUSHER:this.pusherBehavior.onBeginContact()}}},{key:"update",value:function value(e){this.updateSpecialRole(e)||this.normalBehavior.update(e)}},{key:"updateSpecialRole",value:function value(e){return this.bee.role===Vh.PATH_SEEKER&&!!this.seekingPathBehavior&&this.seekingPathBehavior.update(e)}}]),e}();x._RF.pop(),x._RF.push({},"0b146P+xAlN5LGe2MJHlJDc","Bee",void 0);var ad=F.ccclass,od=F.property,rd=(Vp=ad("Bee"),$p=od(ie),qp=od(ke.Skeleton),Kp=od(we),Yp=od(Se),Vp((Zp=u((Xp=function(e){i(n,e);var t=a(n);function n(){var _$e;o(this,n);for(var i=arguments.length,a=Array(i),r=0;r<i;r++)a[r]=arguments[r];return _$e=t.call.apply(t,[this].concat(a)),c(_$e,"flipNode",Zp,h(_$e)),c(_$e,"spriteNode",Qp,h(_$e)),_$e.target=null,_$e.isSpawnLeftSide=!1,_$e.role=Vh.NORMAL,_$e.state=$h.IDLE,_$e.behavior=new id(h(_$e)),_$e.speed=0,c(_$e,"collider",ed,h(_$e)),c(_$e,"rigidBody",td,h(_$e)),c(_$e,"gameObjects",nd,h(_$e)),_$e.wanderingOriginHeight=null,_$e.isWandering=!1,_$e.onBeginContact=function(t,n){_$e.enabled&&(_$e.rigidBody.linearDamping=de.randomRangeInt(6,8),n.node.name!==qh.THORN&&n.node.name!==qh.POISON&&n.node.name!==qh.BIG_BEE_BULLET?n.node.name!==qh.WATER?(n.node.name===qh.DOGE&&k.playSound(Zn.BEE_STING_DOGE,{volume:.3}),_$e.behavior.onBeginContact(t,n)):_$e.drown():_$e.smokeDisappear())},_$e}return r(n,[{key:"__preload",value:function value(){var _$e;this.collider=this.getComponent(we),this.rigidBody=this.getComponent(Se),this.gameObjects=null==(_$e=this.node.parent)?void 0:_$e.getComponent(im),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function value(){xt.lazyValidateProperties(this)}},{key:"start",value:function value(){this.setState($h.IDLE),this.collider.on(Ce.BEGIN_CONTACT,this.onBeginContact),this.collider.enabled=!1}},{key:"followTarget",value:function value(e){this.target=e,this.collider.enabled=!0,this.attackTarget()}},{key:"followInstructions",value:function value(){this.collider.enabled=!0}},{key:"findTarget",value:function value(){var _$e=this.gameObjects.getNearestDogeToBee(this);_$e&&!_$e.isCantBeTargeted()?this.target=_$e.node:this.target=null}},{key:"smokeDisappear",value:function value(){this.preHide(),this.setSpineAnimation("animation3",!1),this.setState($h.DIE),this.node.scene.emit(sr.BEE_DIE)}},{key:"flap",value:function value(){this.setSpineAnimation("animation",!0)}},{key:"attackTarget",value:function value(){var _$e=this;if(!this.target){if(this.isWandering)return;this.isWandering=!0,this.scheduleOnce(function(){_$e.isWandering=!1},.5),this.speed=de.randomRange(40,50);var t=this.node.getWorldPosition();null===this.wanderingOriginHeight&&(this.wanderingOriginHeight=t.y+50),t.x+=de.randomRange(-300,300),t.y=de.randomRange(this.wanderingOriginHeight,this.wanderingOriginHeight-50);var _$n=this.getVectorDataFromAToB(this.node.getWorldPosition(),t);return this.move(_$n),void(this.rigidBody.linearDamping=0)}this.speed=de.randomRange(20,30);var i=this.getVectorDataFromAToB(this.node.getWorldPosition(),this.target.getWorldPosition());i.vector.rotate(de.randomRange(-.3,.3)).multiplyScalar(this.speed),this.move(i),this.rigidBody.linearDamping=0,this.setState($h.ATTACKING)}},{key:"sleep",value:function value(){v(y(n.prototype),"sleep",this).call(this),this.target=null}},{key:"rotateToVector",value:function value(e){this.node.angle=de.toDegree(this.angle(e.x,e.y)),this.node.angle+=180;var t=this.node.angle/360-Math.floor(this.node.angle/360);t>.25&&t<.75?this.flipNode.setScale(new te(1,-1,1)):this.flipNode.setScale(new te(1,1,1))}},{key:"move",value:function value(e){this.rigidBody.linearVelocity=e.vector,this.rotateToVector({x:e.dx,y:e.dy})}},{key:"fly",value:function value(e){this.rigidBody.linearVelocity=e,this.rigidBody.linearDamping=0,this.flap(),this.setState($h.FLYING)}},{key:"setState",value:function value(e){this.state=e}},{key:"setRole",value:function value(e){this.role=e}},{key:"update",value:function value(e){this.behavior.update(e)}},{key:"drown",value:function value(){this.collider.enabled=!1,this.speed=20;var _$e=this.node.getWorldPosition();_$e.y=_$e.y-1e3;var t=this.getVectorDataFromAToB(this.node.getWorldPosition(),_$e);this.move(t),this.rigidBody.linearDamping=0,this.spriteNode.paused=!0,this.setState($h.DIE),this.node.scene.emit(sr.BEE_DIE)}},{key:"setSpineAnimation",value:function value(e,t){this.spriteNode.setAnimation(0,e,t)}}]),n}(pp)).prototype,"flipNode",[$p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Qp=u(Xp.prototype,"spriteNode",[qp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ed=u(Xp.prototype,"collider",[Kp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),td=u(Xp.prototype,"rigidBody",[Yp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nd=u(Xp.prototype,"gameObjects",[od],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Xp))||Xp);x._RF.pop(),x._RF.push({},"23d64mdR6VPRoojd1BBKwos","World",void 0),x._RF.pop(),x._RF.push({},"5f264eibqlEH7PqbJQqHTF7","Line",void 0);var fd=F.ccclass,md=F.property,gd=(sd=fd("Line"),ld=md(se),ud=md(Se),sd((pd=u((hd=function(e){i(n,e);var t=a(n);function n(){var _$e;o(this,n);for(var i=arguments.length,a=Array(i),r=0;r<i;r++)a[r]=arguments[r];return(_$e=t.call.apply(t,[this].concat(a))).points=[],_$e.colliderInterval=20,_$e.colliders=[],_$e.colliderTag=0,c(_$e,"graphic",pd,h(_$e)),c(_$e,"rigidBody",dd,h(_$e)),_$e}return r(n,[{key:"__preload",value:function value(){this.graphic=this.getComponent(se),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function value(){xt.lazyValidateProperties(this)}},{key:"init",value:function value(){this.points=[],this.colliders=[],this.colliderTag=0}},{key:"drawTo",value:function value(e,t,n,i){this.graphic.moveTo(e,t),this.graphic.lineTo(n,i),this.graphic.stroke()}},{key:"addBody",value:function value(e,t){var _$n=this.node.addComponent(_e);_$n.offset=new ye(e,t),_$n.radius=8,_$n.density=5,_$n.tag=this.colliderTag,_$n.apply(),this.colliderTag+=1,this.colliders.push(_$n)}},{key:"deActiveColliders",value:function value(){var _$e,t=l(this.colliders);try{for(t.s();!(_$e=t.n()).done;)_$e.value.enabled=!1}catch(e){t.e(e)}finally{t.f()}}},{key:"storePoints",value:function value(e,t){var _$n=new ye(e,t);this.points.push(_$n)}},{key:"addPhysics",value:function value(){for(var _$e=0;_$e<this.points.length-1;_$e++){var t=this.points[_$e],_$n=this.points[_$e+1];if(t&&_$n){var i=this.getInternalPoints(t,_$n);if(_$e<this.points.length-2){var a=i.pop();if(!a){console.warn("Line: lastPoint not found");continue}this.points[_$e+1]=a}var o,r=l(i);try{for(r.s();!(o=r.n()).done;){var s,u=o.value,c=!1,h=l(this.colliders);try{for(h.s();!(s=h.n()).done;){var p=s.value;de.Vec2.distance(u,p.offset)<2*p.radius&&(c=!0)}}catch(e){h.e(e)}finally{h.f()}c||this.addBody(u.x,u.y)}}catch(e){r.e(e)}finally{r.f()}}}var d=this.points[this.points.length-1];d&&this.addBody(d.x,d.y)}},{key:"getInternalPoints",value:function value(e,t){for(var _$n=t.x-e.x,i=t.y-e.y,a=new ye(_$n,i).normalize().multiplyScalar(this.colliderInterval),o=de.Vec2.distance(e,t),r=Math.floor(o/this.colliderInterval),s=[e],l=0;l<r;l++){var u=s[s.length-1];if(u){var c=u.clone().add(a);s.push(c)}}return s}},{key:"findNearestCollider",value:function value(e){var t=this.colliders[0];if(!t)return null;var _$n=new te(t.worldPosition.x,t.worldPosition.y,0),i=ye.distance(e,_$n);return this.colliders.forEach(function(n){var a=new te(n.worldPosition.x,n.worldPosition.y,0);ye.distance(e,a)<i&&(i=ye.distance(e,a),t=n)}),t}}]),n}(pp)).prototype,"graphic",[ld],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),dd=u(hd.prototype,"rigidBody",[ud],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),hd))||hd);x._RF.pop(),x._RF.push({},"afc3eWzi4tHNYb9W7f6QpCX","SeekingPathBehavior",void 0);var sd,ld,ud,hd,pd,dd,Sd,kd,wd=function(){function e(t,n){o(this,e),this.isFinishSeeking=!1,this.vectorDataGroup=[],this.index=0,this.bee=t,this.isSeekToLastPoint=n,this.vectorDataGroup=[],this.isFinishSeeking=!1,this.time=.02,this.remaining=0,this.index=0}return r(e,[{key:"seek",value:function value(e){var t=this.bee.node.scene.getComponentInChildren(gd);if(!t)return console.warn("Bee: Line is null"),!1;var n=t.colliders.findIndex(function(t){if(t.tag===e.tag)return!0});if(-1===n)return!1;this.vectorDataGroup=[],this.isFinishSeeking=!1,this.time=.04,this.remaining=0,this.index=0;var i=this.bee.speed;return i||(i=de.randomRange(20,30)),this.isSeekToLastPoint?this.seekToLastPoint(n,t,i):this.seekToFirstPoint(n,t,i),!0}},{key:"seekToLastPoint",value:function value(e,t,n){for(var i=e;i<t.colliders.length-1;i++){var a=t.colliders[i],o=t.colliders[i+1],r=this.bee.getVectorDataFromAToB(a.worldPosition,o.worldPosition);r.vector.multiplyScalar(n),this.vectorDataGroup.push(r)}}},{key:"seekToFirstPoint",value:function value(e,t,n){for(var i=e;i>0;i--){var a=t.colliders[i],o=t.colliders[i-1],r=this.bee.getVectorDataFromAToB(a.worldPosition,o.worldPosition);r.vector.multiplyScalar(n),this.vectorDataGroup.push(r)}}},{key:"flyToNextDirection",value:function value(){var _$e=this.vectorDataGroup[this.index];(this.index+=1,_$e)?this.bee.move(_$e):(this.isFinishSeeking=!0,this.bee.setRole(Vh.NORMAL),this.bee.setState($h.ATTACKING))}},{key:"fly",value:function value(e){this.remaining+=e,this.remaining>this.time&&(this.flyToNextDirection(),this.time=.02,this.remaining=0)}},{key:"onBeginContact",value:function value(e,t){this.bee.state===$h.SEEKING_PATH&&t.node.name!==qh.DRAW_LINE?(this.isFinishSeeking=!0,this.bee.setRole(Vh.NORMAL),this.bee.setState($h.ATTACKING)):this.isFinishSeeking||this.bee.state===$h.WAITING_TO_SEEK_PATH||t.node.name!==qh.DRAW_LINE||this.handlePathSeekerTouchLine(t)}},{key:"handlePathSeekerTouchLine",value:function value(e){var t=this;this.seek(e)&&this.bee.state!==$h.SEEKING_PATH&&(this.bee.setState($h.WAITING_TO_SEEK_PATH),this.bee.scheduleOnce(function(){t.bee.setState($h.SEEKING_PATH)},.3))}},{key:"update",value:function value(e){return this.bee.state===$h.SEEKING_PATH&&(this.fly(e),!0)}}]),e}();x._RF.pop(),x._RF.push({},"2181aAj+ElOoL2tBGH10euY","Beehive",void 0);var Cd,Ed,Ad,Td,Rd,Pd,_d,Bd,Dd,Od,Id=F.ccclass,xd=F.property,Nd=Id("Beehive")((kd=u((Sd=function(e){i(n,e);var t=a(n);function n(){var _$e;o(this,n);for(var i=arguments.length,a=Array(i),r=0;r<i;r++)a[r]=arguments[r];return(_$e=t.call.apply(t,[this].concat(a))).totalPathSeekers=0,_$e.isSeekToLastPoint=!0,c(_$e,"gameObjects",kd,h(_$e)),_$e}return r(n,[{key:"onLoad",value:function value(){var _$e;this.gameObjects=null==(_$e=this.node.parent)?void 0:_$e.getComponent(im),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function value(){xt.lazyValidateProperties(this)}},{key:"releaseBee",value:function value(e){var t=this;this.updateTotalPathSeekers(),this.scheduleOnce(function(){var _$n=e.getComponent(rd);if(_$n){t.createPathSeeker(_$n),"isRightSide"in t.node&&!0===t.node.isRightSide?t.spawnInRightSide(_$n):t.spawnInLeftSide(_$n),_$n.wake();var i=t.gameObjects.getRandomDogeToBee();i&&t.scheduleOnce(function(){return _$n.followTarget(i.node)},.2)}},de.randomRange(.1,.4))}},{key:"updateTotalPathSeekers",value:function value(){"totalPathSeekers"in this.node&&"number"==typeof this.node.totalPathSeekers&&(this.totalPathSeekers=this.node.totalPathSeekers)}},{key:"spawnInLeftSide",value:function value(e){var t=this.node.getPosition(),_$n=t.x,i=t.y,a=de.randomRangeInt(-10,0),o=de.randomRangeInt(38,48);e.isSpawnLeftSide=!0,e.node.setScale(new te(1,1,1)),e.node.setPosition(_$n+a,i+o),e.fly(new ye(-2,-1).normalize().multiplyScalar(2))}},{key:"spawnInRightSide",value:function value(e){var t=this.node.getPosition(),_$n=t.x,i=t.y,a=de.randomRangeInt(0,10),o=de.randomRangeInt(38,48);e.isSpawnLeftSide=!1,e.node.setScale(new te(1,1,1)),e.node.setPosition(_$n+a,i+o),e.fly(new ye(2,-1).normalize().multiplyScalar(2))}},{key:"createPathSeeker",value:function value(e){0!==this.totalPathSeekers&&(e.setRole(Vh.PATH_SEEKER),e.behavior.seekingPathBehavior=new wd(e,this.isSeekToLastPoint),this.isSeekToLastPoint=!this.isSeekToLastPoint,this.totalPathSeekers-=1)}}]),n}(pp)).prototype,"gameObjects",[xd],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Sd))||Sd;x._RF.pop(),x._RF.push({},"a17a07Pu/tAGb4MdM3jxHke","BigBeeBullet",void 0);var Fd,zd,Gd,Md,Ud,jd,Wd,Vd,$d,qd,Kd,Yd=F.ccclass,Jd=F.property,Xd=(Cd=Yd("BigBeeBullet"),Ed=Jd(Y),Ad=Jd(ke.Skeleton),Td=Jd(we),Rd=Jd(Se),Cd((_d=u((Pd=function(e){i(n,e);var t=a(n);function n(){var _$e;o(this,n);for(var i=arguments.length,a=Array(i),r=0;r<i;r++)a[r]=arguments[r];return _$e=t.call.apply(t,[this].concat(a)),c(_$e,"stinger",_d,h(_$e)),c(_$e,"ci",Bd,h(_$e)),c(_$e,"collider",Dd,h(_$e)),c(_$e,"rigidBody",Od,h(_$e)),_$e.onBeginContact=function(){_$e.stinger.active=!1,_$e.ci.active=!0;var t=_$e.ci.getComponent(ke.Skeleton);t?(t.enabled=!0,t.setAnimation(0,"animation",!1),k.playSound(Zn.BEE_BULLET_EXPLODE,{allowMultiple:!0}),t.setCompleteListener(function(){_$e.kill()})):console.warn("BigBeeBullet: ske not found")},_$e}return r(n,[{key:"onLoad",value:function value(){this.collider=this.getComponent(we),this.rigidBody=this.getComponent(Se),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function value(){xt.lazyValidateProperties(this)}},{key:"start",value:function value(){this.revive()}},{key:"revive",value:function value(){v(y(n.prototype),"revive",this).call(this),this.stinger.active=!0,this.ci.active=!1,this.ci.getComponent(ke.Skeleton).enabled=!1,this.collider.once(Ce.BEGIN_CONTACT,this.onBeginContact)}},{key:"kill",value:function value(){v(y(n.prototype),"kill",this).call(this),this.stinger.active=!1,this.ci.active=!1}},{key:"forwardToDoge",value:function value(e){var t=de.randomRange(20,30),_$n=this.getVectorDataFromAToB(this.node.getWorldPosition(),e.getWorldPosition());_$n.vector.rotate(de.randomRange(-.3,.3)).multiplyScalar(t),this.rigidBody.linearVelocity=_$n.vector,this.node.angle=de.toDegree(this.angle(_$n.dx,_$n.dy))}}]),n}(pp)).prototype,"stinger",[Ed],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Bd=u(Pd.prototype,"ci",[Ad],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Dd=u(Pd.prototype,"collider",[Td],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Od=u(Pd.prototype,"rigidBody",[Rd],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Pd))||Pd);x._RF.pop(),x._RF.push({},"2b15b1CihdEf60Zy/wIYirK","BigBee",void 0);var Zd,Qd,ev,tv,nv,iv,av,ov,rv=F.ccclass,sv=F.property,lv=(Fd=rv("BigBee"),zd=sv(Le),Gd=sv(ke.Skeleton),Md=sv(_e),Ud=sv(Se),Fd((Wd=u((jd=function(e){i(u,e);var s,l=a(u);function u(){var _$e;o(this,u);for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return _$e=l.call.apply(l,[this].concat(n)),c(_$e,"bulletPrefab",Wd,h(_$e)),_$e.state=$h.IDLE,_$e.target=null,_$e.bulletPool=[],_$e.timeToAttack=0,_$e.countTimeToAttack=0,c(_$e,"skeleton",Vd,h(_$e)),c(_$e,"gameObjects",$d,h(_$e)),c(_$e,"collider",qd,h(_$e)),c(_$e,"rigidBody",Kd,h(_$e)),_$e.onBeginContact=function(t,n){_$e.enabled&&(n.node.name!==qh.THORN&&n.node.name!==qh.POISON||_$e.smokeDisappear())},_$e}return r(u,[{key:"onLoad",value:function value(){var _$e;this.skeleton=this.getComponent(ke.Skeleton),this.gameObjects=null==(_$e=this.node.parent)?void 0:_$e.getComponent(im),this.collider=this.getComponent(_e),this.rigidBody=this.getComponent(Se),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function value(){xt.lazyValidateProperties(this)}},{key:"start",value:function value(){this.node.setScale(new te(.7,.7,.7)),this.timeToAttack=de.randomRange(1,2),this.countTimeToAttack=0,this.createBulletPool(),this.initDustParticle();var _$e=this.gameObjects.getRandomDogeToBee();_$e?(this.target=_$e.node,this.state=$h.FLYING,this.collider.on(Ce.BEGIN_CONTACT,this.onBeginContact)):console.warn("BigBee: Target not found")}},{key:"update",value:function value(e){this.state===$h.ATTACKING&&(this.countTimeToAttack+=e,this.countTimeToAttack>this.timeToAttack&&(this.attackTarget(),this.timeToAttack=de.randomRange(1,2),this.countTimeToAttack=0))}},{key:"createBulletPool",value:function value(){var _$e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;this.bulletPool=[];for(var t=0;t<_$e;t++)this.createBullet()}},{key:"initDustParticle",value:(s=t(n().mark(function e(){var t,i,a;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.node.parent){e.next=2;break}return e.abrupt("return");case 2:return(t=new ie(qh.DUST_PARTICLE)).layer=0x2000000,t.active=!1,i=t.addComponent(ke.Skeleton),e.next=8,p.loadSkeletonDataAsync(ap.DUST_PARTICLE_SPINE);case 8:if(a=e.sent){e.next=12;break}return console.warn("initDustParticle","Failed to load dust particle spine"),e.abrupt("return");case 12:if(this.node&&this.node.isValid){e.next=14;break}return e.abrupt("return");case 14:i.skeletonData=a,this.node.parent.addChild(t),this.dustParticle=t;case 17:case"end":return e.stop()}},e,this)})),function(){return s.apply(this,arguments)})},{key:"createDust",value:function value(){var _$e=this;if(this.dustParticle){this.dustParticle.active=!0;var t=this.node.getWorldPosition(),n=t.x,i=t.y;this.dustParticle.setWorldPosition(new te(n,i));try{var a=this.dustParticle.getComponent(ke.Skeleton);null==a||a.setAnimation(0,"animation",!1)}catch(e){console.error("createDust",e)}this.scheduleOnce(function(){_$e.dustParticle&&(_$e.dustParticle.active=!1)},.5)}}},{key:"createBullet",value:function value(){if(!this.node.parent)return console.warn("BigBee: Parent not found"),null;var _$e=Pe(this.bulletPrefab),t=_$e.getComponent(Xd);return _$e.name=qh.BIG_BEE_BULLET,t&&t.kill(),this.node.parent.addChild(_$e),this.bulletPool.push(_$e),_$e}},{key:"smokeDisappear",value:function value(){this.hide(),this.createDust(),this.state=$h.DIE,this.node.scene.emit(sr.BIG_BEE_DIE)}},{key:"sleep",value:function value(){}},{key:"wake",value:function value(){}},{key:"hide",value:function value(){this.enabled=!1,this.rigidBody.sleep(),this.skeleton.enabled=!1}},{key:"preHide",value:function value(){}},{key:"appear",value:function value(){}},{key:"setSpineAnimation",value:function value(e,t){}},{key:"attackTarget",value:function value(){var _$e=this;this.skeleton.setAnimation(0,"attack",!1),this.skeleton.setCompleteListener(function(){_$e.skeleton.setAnimation(0,"fly",!0)}),this.scheduleOnce(function(){if(_$e.target){var t=_$e.bulletPool.filter(function(e){return!1===e.active})[0];if(!t){var n=_$e.createBullet();if(!n)return;t=n}var i=t.getComponent(Xd);if(i){i.revive();var a=_$e.node.getPosition(),o=a.x,r=a.y;t.setPosition(o,r),i.forwardToDoge(_$e.target)}else console.warn("BigBee: Bullet component not found")}else console.warn("BigBee: Target not found")},.5)}}]),u}(pp)).prototype,"bulletPrefab",[zd],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Vd=u(jd.prototype,"skeleton",[Gd],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$d=u(jd.prototype,"gameObjects",[sv],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),qd=u(jd.prototype,"collider",[Md],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Kd=u(jd.prototype,"rigidBody",[Ud],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),jd))||jd);x._RF.pop(),x._RF.push({},"8e16aARuABAK56lFGhIfeH+","Brick",void 0);var uv,cv,pv,dv,vv=F.ccclass,yv=F.property,fv=F.requireComponent,mv=(Zd=vv("Brick"),Qd=fv([Be]),ev=yv({tooltip:"Use batch draw all bricks"}),tv=yv(Y),Zd(nv=Qd((av=u((iv=function(e){i(n,e);var t=a(n);function n(){var _$e;o(this,n);for(var i=arguments.length,a=Array(i),r=0;r<i;r++)a[r]=arguments[r];return _$e=t.call.apply(t,[this].concat(a)),c(_$e,"useBatch",av,h(_$e)),c(_$e,"sprite",ov,h(_$e)),_$e.brickPolygons=[],_$e}return r(n,[{key:"__preload",value:function value(){this.mask=this.getComponent(Be),this.graphic=this.getComponent(se),this.polygonCollider=this.getComponent(De),this.validateRequiredComponents(),this.listenGameplayEvents()}},{key:"validateRequiredComponents",value:function value(){xt.lazyValidateProperties(this)}},{key:"listenGameplayEvents",value:function value(){}},{key:"addBrickPolygon",value:function value(e){this.brickPolygons.push(e)}},{key:"onLoad",value:function value(){var _$e=this.getPolygon();_$e&&(this.useBatch?(this.mask.enabled=!1,this.graphic.enabled=!1,this.addBrickPolygon(_$e)):(this.updateTransform(_$e),this.drawMask(_$e),this.applyCollider(_$e)))}},{key:"getPolygon",value:function value(){if(!("polygon"in this.node))return null;var _$e=this.node.polygon;return Array.isArray(_$e)?_$e:null}},{key:"updateTransform",value:function value(e){var t=this.calculatePolygonDimensions(e),_$n=t.width,i=t.height;this.setPosition(0,0),this.setContentSize(_$n,i)}},{key:"setPosition",value:function value(e,t){this.node.setPosition(e,t)}},{key:"setContentSize",value:function value(e,t){var _$n=this.sprite.getComponent(W);_$n&&_$n.setContentSize(e,t)}},{key:"updateContentSizeForBatchDraw",value:function value(){var _$e=this.brickPolygons.map(function(e){return e.map(function(e){var t=e.x,_$n=e.y;return new ye(t,_$n)})}).flat(),t=this.calculatePolygonDimensions(_$e),_$n=t.width,i=t.height,a=this.calculateSpritePositionForBatchDraw(_$e),o=this.sprite.getComponent(W);if(o){o.setContentSize(_$n,i);var r=this.sprite.getComponent(Y);r&&r.node.setPosition(a.x,a.y)}}},{key:"calculateSpritePositionForBatchDraw",value:function value(e){for(var t=e[0].x,_$n=e[0].x,i=e[0].y,a=e[0].y,o=1;o<e.length;o++){var r=e[o],s=r.x,l=r.y;s<t?t=s:s>_$n&&(_$n=s),l<i?i=l:l>a&&(a=l)}return{x:t,y:i}}},{key:"calculatePolygonDimensions",value:function value(e){for(var t=e[0].x,_$n=e[0].x,i=e[0].y,a=e[0].y,o=1;o<e.length;o++){var r=e[o],s=r.x,l=r.y;s<t?t=s:s>_$n&&(_$n=s),l<i?i=l:l>a&&(a=l)}return{width:Math.abs(_$n-t),height:Math.abs(a-i)}}},{key:"drawMask",value:function value(e){this.graphic.moveTo(e[0].x,e[0].y);var t,_$n=l(e);try{for(_$n.s();!(t=_$n.n()).done;){var i=t.value;this.graphic.lineTo(i.x,i.y)}}catch(e){_$n.e(e)}finally{_$n.f()}this.graphic.close(),this.graphic.fill()}},{key:"batchDrawAllBrick",value:function value(){if(!(this.brickPolygons.length<1)){this.mask.enabled=!0,this.graphic.enabled=!0,this.updateContentSizeForBatchDraw();var _$e,t=l(this.brickPolygons);try{for(t.s();!(_$e=t.n()).done;){var _$n=_$e.value;this.drawMask(_$n)}}catch(e){t.e(e)}finally{t.f()}this.applyColliderForBatchDraw(),this.brickPolygons=[]}}},{key:"applyCollider",value:function value(e){this.polygonCollider.points=e.map(function(e){var t=e.x,_$n=e.y;return new ye(t,_$n)}),this.polygonCollider.apply()}},{key:"applyColliderForBatchDraw",value:function value(){var _$e,t=this.brickPolygons.map(function(e){return e.map(function(e){var t=e.x,_$n=e.y;return new ye(t,_$n)})}),_$n=l(t);try{for(_$n.s();!(_$e=_$n.n()).done;){var i=_$e.value,a=new ie;a.name=qh.BRICK,this.node.addChild(a),a.setPosition(0,0);var o=a.addComponent(Se);o.type=be.Static,o.group=np.MAIN_OBJECT;var r=a.addComponent(De);r.points=i,r.apply()}}catch(e){_$n.e(e)}finally{_$n.f()}}}]),n}(U)).prototype,"useBatch",[ev],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return!0}}),ov=u(iv.prototype,"sprite",[tv],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nv=iv))||nv)||nv);x._RF.pop(),x._RF.push({},"46fa0f/kl1Heo/JvM2kAEAf","GraphicsPattern",void 0);var gv,bv,Sv,kv,wv,Cv,Ev,Av,Tv,Rv,Lv,Pv,_v=F.ccclass,Bv=F.property,Dv=(uv=_v("GraphicsPattern"),cv=Bv(se),uv((dv=u((pv=function(e){i(n,e);var t=a(n);function n(){var _$e;o(this,n);for(var i=arguments.length,a=Array(i),r=0;r<i;r++)a[r]=arguments[r];return _$e=t.call.apply(t,[this].concat(a)),c(_$e,"graphic",dv,h(_$e)),_$e}return r(n,[{key:"onLoad",value:function value(){this.graphic=this.getComponent(se),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function value(){xt.lazyValidateProperties(this)}},{key:"start",value:function value(){}},{key:"sleep",value:function value(){}},{key:"draw",value:function value(e){this.graphic.moveTo(e[0].x,e[0].y);var t,_$n=l(e);try{for(_$n.s();!(t=_$n.n()).done;){var i=t.value;this.graphic.lineTo(i.x,i.y)}}catch(e){_$n.e(e)}finally{_$n.f()}this.graphic.close(),this.graphic.fill()}},{key:"applyCollider",value:function value(e){var t=this.getComponent(De);t?(t.points=e.map(function(e){var t=e.x,_$n=e.y;return new ye(t,_$n)}),t.apply()):console.warn("GraphicsPattern: PolygonCollider2D not found")}},{key:"setColor",value:function value(e){var t=new le;le.fromHEX(t,e),this.graphic.fillColor=t}}]),n}(pp)).prototype,"graphic",[cv],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pv))||pv);x._RF.pop(),x._RF.push({},"959bd9NhYpMTK0O78HSl4rc","Pattern",void 0);var Ov,Iv=F.ccclass,xv=F.property,Nv=F.requireComponent,Fv=(gv=Iv("Pattern"),bv=Nv([se,De,Se]),Sv=xv(Y),kv=xv(se),wv=xv(Se),Cv=xv(De),gv(Ev=bv((Tv=u((Av=function(e){i(n,e);var t=a(n);function n(){var _$e;o(this,n);for(var i=arguments.length,a=Array(i),r=0;r<i;r++)a[r]=arguments[r];return _$e=t.call.apply(t,[this].concat(a)),c(_$e,"sprite",Tv,h(_$e)),c(_$e,"graphic",Rv,h(_$e)),c(_$e,"rigidBody",Lv,h(_$e)),c(_$e,"polygonCollider",Pv,h(_$e)),_$e}return r(n,[{key:"onLoad",value:function value(){this.graphic=this.getComponent(se),this.rigidBody=this.getComponent(Se),this.polygonCollider=this.getComponent(De),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function value(){xt.lazyValidateProperties(this)}},{key:"start",value:function value(){}},{key:"draw",value:function value(e){var t=this.sprite.getComponent(W);if(t){var _$n=this.getBottomLeftPosition(e),i=_$n.x,a=_$n.y,o=this.getTopRightPosition(e),r=o.x,s=o.y;t.setContentSize(r-i,s-a),t.node.setPosition(i,a),this.graphic.moveTo(e[0].x,e[0].y);var u,c=l(e);try{for(c.s();!(u=c.n()).done;){var h=u.value;this.graphic.lineTo(h.x,h.y)}}catch(e){c.e(e)}finally{c.f()}this.graphic.close(),this.graphic.fill()}}},{key:"savePolygonPoints",value:function value(e){this.points=e}},{key:"getPolygonPoints",value:function value(){return this.points}},{key:"applyCollider",value:function value(e){this.polygonCollider.points=e.map(function(e){var t=e.x,_$n=e.y;return new ye(t,_$n)}),this.polygonCollider.apply()}},{key:"setRigidBodyType",value:function value(e){this.rigidBody.type=e}},{key:"getBottomLeftPosition",value:function value(e){var t,_$n=e[0].x,i=e[0].y,a=l(e);try{for(a.s();!(t=a.n()).done;){var o=t.value;_$n>o.x&&(_$n=o.x),i>o.y&&(i=o.y)}}catch(e){a.e(e)}finally{a.f()}return{x:_$n,y:i}}},{key:"getTopRightPosition",value:function value(e){var t,_$n=e[0].x,i=e[0].y,a=l(e);try{for(a.s();!(t=a.n()).done;){var o=t.value;_$n<o.x&&(_$n=o.x),i<o.y&&(i=o.y)}}catch(e){a.e(e)}finally{a.f()}return{x:_$n,y:i}}}]),n}(pp)).prototype,"sprite",[Sv],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Rv=u(Av.prototype,"graphic",[kv],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Lv=u(Av.prototype,"rigidBody",[wv],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Pv=u(Av.prototype,"polygonCollider",[Cv],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ev=Av))||Ev)||Ev);x._RF.pop(),x._RF.push({},"a08960ZMBtFcLD/1nWNbAM9","Poison",void 0);var zv,Gv=F.ccclass,Mv=F.requireComponent,Uv=Gv("Poison")(Ov=Mv([Dv])(Ov=function(e){i(c,e);var s,u=a(c);function c(){var _$e;o(this,c);for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return(_$e=u.call.apply(u,[this].concat(n))).polygon=[],_$e.useBatch=!1,_$e.poisonPolygons=[],_$e.bubbleFrame=null,_$e.bubblePool=null,_$e.remaining=0,_$e.maxPoolSize=0,_$e.totalBubble=0,_$e}return r(c,[{key:"onLoad",value:function value(){var _$e;this.graphicPattern=this.getComponent(Dv),this.gameObjects=null==(_$e=this.node.parent)?void 0:_$e.getComponent(im),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function value(){xt.lazyValidateProperties(this)}},{key:"start",value:function value(){this.addRigidBody(),this.useBatch||(this.addPolygonCollider(),this.drawPattern(),this.loadCircleFrame(),this.setTimeSpawnBubble(.2))}},{key:"addPoisonPolygon",value:function value(e){this.poisonPolygons.push(e)}},{key:"batchDrawAllPoisonPools",value:function value(){if(!(this.poisonPolygons.length<1)){this.graphicPattern.setColor("#774798d1");var _$e,t=l(this.poisonPolygons);try{for(t.s();!(_$e=t.n()).done;){var n=_$e.value;this.graphicPattern.draw(n)}}catch(e){t.e(e)}finally{t.f()}this.applyColliderForBatchDraw(),this.loadCircleFrame(),this.setTimeSpawnBubble(.2)}}},{key:"applyColliderForBatchDraw",value:function value(){var _$e,t=this.poisonPolygons.map(function(e){return e.map(function(e){var t=e.x,n=e.y;return new ye(t,n)})}),n=l(t);try{for(n.s();!(_$e=n.n()).done;){var i=_$e.value,a=new ie;a.name=qh.POISON,this.node.addChild(a),a.setPosition(0,0);var o=a.addComponent(Se);o.group=np.MAIN_OBJECT,o.type=be.Static;var r=a.addComponent(De);r.points=i,r.sensor=!0,r.apply()}}catch(e){n.e(e)}finally{n.f()}}},{key:"addRigidBody",value:function value(){var _$e=this.addComponent(Se);_$e?(_$e.group=np.MAIN_OBJECT,_$e.type=be.Static):console.warn("Cannot add RigidBody2D")}},{key:"addPolygonCollider",value:function value(){var _$e=this.addComponent(De);_$e?_$e.sensor=!0:console.warn("Cannot add PolygonCollider2D")}},{key:"drawPattern",value:function value(){this.graphicPattern.setColor("#774798d1"),this.graphicPattern.draw(this.polygon),this.graphicPattern.applyCollider(this.polygon)}},{key:"loadCircleFrame",value:(s=t(n().mark(function e(){var t,i;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.loadSpriteFrameAsync(ap.POISON_CIRCLE_FRAME);case 2:if(t=e.sent,this.node.isValid){e.next=5;break}return e.abrupt("return");case 5:if(t){e.next=7;break}return e.abrupt("return");case 7:this.bubbleFrame=t,i=this.useBatch?20*this.poisonPolygons.length:20,this.initPool(10,i);case 10:case"end":return e.stop()}},e,this)})),function(){return s.apply(this,arguments)})},{key:"initPool",value:function value(e,t){this.bubblePool=new Oe,this.maxPoolSize=t;for(var n=0;n<e;n++)this.spawnBubble()}},{key:"setTimeSpawnBubble",value:function value(e){this.remaining=e}},{key:"spawnBubble",value:function value(){if(!this.bubblePool||this.totalBubble>=this.maxPoolSize)return null;var _$e=null;return this.bubblePool.size()>0?_$e=this.bubblePool.get():(_$e=new ie(qh.POISON_BUBBLE),this.initBubble(_$e),this.killBubble(_$e),this.bubblePool.put(_$e)),_$e?(this.gameObjects.addObject(_$e),this.totalBubble+=1,_$e):null}},{key:"releaseBubble",value:function value(e){this.bubblePool&&(this.killBubble(e),Ie.stopAllByTarget(e),this.bubblePool.put(e),this.totalBubble-=1)}},{key:"killBubble",value:function value(e){if(e){var t=e.getComponent(Y);t&&(t.enabled=!1)}}},{key:"reviveBubble",value:function value(e,t){var n=this.getPosition(t),i=n.minX,a=n.minY,o=n.maxX,r=de.randomRange(i,o),s=e.getComponent(ae);s?s.opacity=125:console.warn("UIOpacity not found in bubble");var l=e.getComponent(Y);l&&(l.enabled=!0),e.setPosition(new te(r,a))}},{key:"initBubble",value:function value(e){e.layer=this.node.layer,e.addComponent(Y).spriteFrame=this.bubbleFrame,e.addComponent(ae)}},{key:"update",value:function value(e){if(this.remaining-=e,this.remaining<=0){if(!this.useBatch){var t=this.spawnBubble();if(!t)return;this.reviveBubble(t,this.polygon),this.playBubbleTween(t,this.polygon);var n=de.randomRange(.3,.5);return void this.setTimeSpawnBubble(n)}var i,a=de.randomRange(.3,.5),o=l(this.poisonPolygons);try{for(o.s();!(i=o.n()).done;){var r=i.value,s=this.spawnBubble();if(!s)return;this.reviveBubble(s,r),this.playBubbleTween(s,r)}}catch(e){o.e(e)}finally{o.f()}this.setTimeSpawnBubble(a)}}},{key:"playBubbleTween",value:function value(e,t){var n=this;if(e){var i=this.getPosition(t),a=i.minY,o=i.maxY,r=e.getPosition(),s=de.randomRange(80,120),l=Math.abs(o-a),u=r.x,_$c=r.y+(o-a)-10,h=l/s;q(e).call(function(){e.setPosition(r)}).to(h,{position:new te(u,_$c)},{easing:"smooth"}).call(function(){n.releaseBubble(e)}).start();var p=e.getComponent(ae);if(p){var d=h-.4>0?.4:h;p.opacity=160,q(p).delay(h-d).to(d,{opacity:0},{easing:"smooth"}).start()}else console.warn("UIOpacity not found in bubble")}}},{key:"getPosition",value:function value(e){var t,n=1e4,i=0,a=1e4,o=0,r=l(e);try{for(r.s();!(t=r.n()).done;){var s=t.value,u=s.x,_$c=s.y;u<n&&(n=u),u>i&&(i=u),_$c<a&&(a=_$c),_$c>o&&(o=_$c)}}catch(e){r.e(e)}finally{r.f()}return{minX:n+=20,minY:a+=13,maxX:i-=20,maxY:o-=13}}}]),c}(U))||Ov)||Ov;x._RF.pop(),x._RF.push({},"8633c11nMJN7I7TAFaGu3Fg","PoisonSurface",void 0);var Hv,jv=(0,F.ccclass)("PoisonSurface")(zv=function(e){i(c,e);var s,u=a(c);function c(){var _$e;o(this,c);for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return(_$e=u.call.apply(u,[this].concat(n))).poisonBubblePrefab=null,_$e.polygon=[],_$e.useBatch=!1,_$e.surfacePolygon=[],_$e.bubblePool=null,_$e.remaining=0,_$e.maxPoolSize=0,_$e.totalBubble=0,_$e}return r(c,[{key:"onLoad",value:function value(){var _$e;this.graphicPattern=this.getComponent(Dv),this.gameObjects=null==(_$e=this.node.parent)?void 0:_$e.getComponent(im),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function value(){xt.lazyValidateProperties(this)}},{key:"start",value:function value(){this.useBatch||(this.drawPattern(),this.loadBubbleFrame())}},{key:"drawPattern",value:function value(){this.graphicPattern.setColor("#9757bcb0"),this.graphicPattern.draw(this.polygon)}},{key:"addPoisonSurfacePolygon",value:function value(e){this.surfacePolygon.push(e)}},{key:"batchDrawAllPoisonSurfaces",value:function value(){if(!(this.surfacePolygon.length<1)){this.graphicPattern.setColor("#9757bcb0");var _$e,t=l(this.surfacePolygon);try{for(t.s();!(_$e=t.n()).done;){var n=_$e.value;this.graphicPattern.draw(n)}}catch(e){t.e(e)}finally{t.f()}this.loadBubbleFrame()}}},{key:"loadBubbleFrame",value:(s=t(n().mark(function e(){var t,i;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.loadPrefabAsync(ap.POISON_BUBBLE_PREFAB);case 3:if(t=e.sent,this.node.isValid){e.next=6;break}return e.abrupt("return");case 6:if(t){e.next=8;break}throw Error("loadBubbleFrame: Prefab is null");case 8:this.poisonBubblePrefab=t,i=this.useBatch?12*this.surfacePolygon.length:12,this.initPool(10,i),this.setTimeSpawnBubble(.3),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),console.error("loadBubbleFrame",_instanceof(e.t0,Error)?e.t0:Error(String(e.t0)));case 18:case"end":return e.stop()}},e,this,[[0,14]])})),function(){return s.apply(this,arguments)})},{key:"update",value:function value(e){if(this.remaining-=e,this.remaining<=0){if(!this.useBatch){var t=this.spawnPoisonBubblePop();if(!t)return;this.reviveBubble(t,this.polygon);var n=de.randomRange(.3,.5);return void this.setTimeSpawnBubble(n)}var i,a=de.randomRange(.3,.5),o=l(this.surfacePolygon);try{for(o.s();!(i=o.n()).done;){var r=i.value,s=this.spawnPoisonBubblePop();if(!s)return;this.reviveBubble(s,r)}}catch(e){o.e(e)}finally{o.f()}this.setTimeSpawnBubble(a)}}},{key:"initPool",value:function value(e,t){this.bubblePool=new Oe,this.maxPoolSize=t;for(var n=0;n<e;n++)this.spawnPoisonBubblePop()}},{key:"setTimeSpawnBubble",value:function value(e){this.remaining=e}},{key:"spawnPoisonBubblePop",value:function value(){if(!this.bubblePool||this.totalBubble>=this.maxPoolSize)return null;var _$e=null;if(this.bubblePool.size()>0)_$e=this.bubblePool.get();else{if(!_instanceof(_$e=Pe(this.poisonBubblePrefab),ie))return null;this.bubblePool.put(_$e)}return _$e?(_$e.name=qh.POISON_SURFACE,this.gameObjects.addObject(_$e),this.totalBubble+=1,_$e):null}},{key:"releasePoisonBubblePop",value:function value(e){this.bubblePool&&(this.bubblePool.put(e),this.totalBubble-=1)}},{key:"reviveBubble",value:function value(e,t){var n=this;if(e){var i=this.getRandomPosition(t),a=i.x,o=i.y;e.setPosition(new te(a,o));var r=e.getComponent(ke.Skeleton);r&&(r.setAnimation(0,"animation",!1),r.setCompleteListener(function(){n.releasePoisonBubblePop(e)}))}}},{key:"getRandomPosition",value:function value(e){var t,n=1e4,i=0,a=1e4,o=0,r=l(e);try{for(r.s();!(t=r.n()).done;){var s=t.value,u=s.x,_$c=s.y;u<n&&(n=u),u>i&&(i=u),_$c<a&&(a=_$c),_$c>o&&(o=_$c)}}catch(e){r.e(e)}finally{r.f()}return{x:de.randomRange(n+25,i-25),y:de.randomRange(a+5,o-5)}}}]),c}(U))||zv;x._RF.pop(),x._RF.push({},"9aa6cp2xqhK1LJeA0kz2hWR","Water",void 0);var Wv=F.ccclass,Vv=F.requireComponent,$v=Wv("Water")(Hv=Vv([Dv])(Hv=function(e){i(n,e);var t=a(n);function n(){var _$e;o(this,n);for(var i=arguments.length,a=Array(i),r=0;r<i;r++)a[r]=arguments[r];return(_$e=t.call.apply(t,[this].concat(a))).polygon=[],_$e.useBatch=!1,_$e.waterPolygon=[],_$e}return r(n,[{key:"onLoad",value:function value(){this.graphicPattern=this.getComponent(Dv),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function value(){xt.lazyValidateProperties(this)}},{key:"start",value:function value(){this.addRigidBody(),this.useBatch||(this.addPolygonCollider(),this.drawPattern())}},{key:"addWaterPolygon",value:function value(e){this.waterPolygon.push(e)}},{key:"batchDrawAllWater",value:function value(){if(!(this.waterPolygon.length<1)){this.graphicPattern.setColor("#58cef0d0");var _$e,t=l(this.waterPolygon);try{for(t.s();!(_$e=t.n()).done;){var _$n=_$e.value;this.graphicPattern.draw(_$n)}}catch(e){t.e(e)}finally{t.f()}this.applyColliderForBatchDraw()}}},{key:"applyColliderForBatchDraw",value:function value(){var _$e,t=this.waterPolygon.map(function(e){return e.map(function(e){var t=e.x,_$n=e.y;return new ye(t,_$n)})}),_$n=l(t);try{for(_$n.s();!(_$e=_$n.n()).done;){var i=_$e.value,a=new ie;a.name=qh.WATER,this.node.addChild(a),a.setPosition(0,0);var o=a.addComponent(Se);o.group=np.MAIN_OBJECT,o.type=be.Static;var r=a.addComponent(De);r.points=i,r.sensor=!0,r.apply()}}catch(e){_$n.e(e)}finally{_$n.f()}}},{key:"addRigidBody",value:function value(){var _$e=this.addComponent(Se);_$e?(_$e.group=np.MAIN_OBJECT,_$e.type=be.Static):console.warn("Cannot add RigidBody2D")}},{key:"addPolygonCollider",value:function value(){var _$e=this.addComponent(De);_$e?_$e.sensor=!0:console.warn("Cannot add PolygonCollider2D")}},{key:"drawPattern",value:function value(){this.graphicPattern.setColor("#58cef0d0"),this.graphicPattern.draw(this.polygon),this.graphicPattern.applyCollider(this.polygon)}}]),n}(U))||Hv)||Hv;x._RF.pop(),x._RF.push({},"d6e4emyi1lPpLbSlAWFj/GD","CrossingBeeLineTypes",void 0);var e11,qv,Kv,Yv,Jv,Xv,Zv,Qv,ey,ty,ny,iy,ay,oy,ry,sy=((e11=sy||{})[e11.LOW=0]="LOW",e11[e11.MEDIUM=1]="MEDIUM",e11[e11.HIGH=2]="HIGH",e11);X(sy),x._RF.pop(),x._RF.push({},"988b72EAIhJ1qc0nrLU68l7","CrossingBeeLine",void 0);var ly=F.ccclass,uy=F.property,cy=F.requireComponent,hy=(qv=ly("CrossingBeeLine"),Kv=cy([Y,W]),Yv=uy(Ee),Jv=uy(Ee),Xv=uy(Ee),Zv=uy({type:sy,displayName:"Sprite type"}),Qv=uy({type:V,displayName:"Line thickness",min:0}),qv(ey=Kv((ny=u((ty=function(e){i(n,e);var t=a(n);function n(){var _$e;o(this,n);for(var i=arguments.length,a=Array(i),r=0;r<i;r++)a[r]=arguments[r];return _$e=t.call.apply(t,[this].concat(a)),c(_$e,"spriteLow",ny,h(_$e)),c(_$e,"spriteMedium",iy,h(_$e)),c(_$e,"spriteHigh",ay,h(_$e)),c(_$e,"spriteType",oy,h(_$e)),c(_$e,"lineThickness",ry,h(_$e)),_$e.startPos=new te,_$e.endPos=new te,_$e}return r(n,[{key:"setStartPosition",value:function value(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.startPos.x,_$n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.startPos.z;this.startPos.set(e,t,_$n),this.updateLine()}},{key:"setEndPosition",value:function value(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.endPos.y,_$n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.endPos.z;this.endPos.set(e,t,_$n),this.updateLine()}},{key:"updateLine",value:function value(){this.updateContentSize(),this.updatePosition(),this.updateRotation()}},{key:"thickness",get:function get(){return this.lineThickness},set:function set(e){this.lineThickness=e,this.updateContentSize()}},{key:"setSpriteType",value:function value(e){switch(this.spriteType=e,e){case sy.LOW:this.sprite.spriteFrame=this.spriteLow;break;case sy.MEDIUM:this.sprite.spriteFrame=this.spriteMedium;break;case sy.HIGH:this.sprite.spriteFrame=this.spriteHigh}}},{key:"onLoad",value:function value(){this.uiTransform=this.getComponent(W),this.sprite=this.getComponent(Y),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function value(){xt.lazyValidateProperties(this)}},{key:"start",value:function value(){this.setSpriteType(this.spriteType),this.updateContentSize(),this.updatePosition(),this.updateRotation()}},{key:"updateContentSize",value:function value(){var _$e=this.endPos.x-this.startPos.x,t=this.endPos.y-this.startPos.y,_$n=this.endPos.z-this.startPos.z,i=Math.sqrt(_$e*_$e+t*t+_$n*_$n);this.uiTransform.setContentSize(i,this.lineThickness)}},{key:"updatePosition",value:function value(){this.uiTransform.setAnchorPoint(.5,.5),this.node.setWorldPosition((this.startPos.x+this.endPos.x)/2,(this.startPos.y+this.endPos.y)/2,(this.startPos.z+this.endPos.z)/2)}},{key:"updateRotation",value:function value(){this.node.setWorldRotationFromEuler(0,0,180*Math.atan2(this.endPos.y-this.startPos.y,this.endPos.x-this.startPos.x)/Math.PI)}}]),n}(U)).prototype,"spriteLow",[Yv],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),iy=u(ty.prototype,"spriteMedium",[Jv],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ay=u(ty.prototype,"spriteHigh",[Xv],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),oy=u(ty.prototype,"spriteType",[Zv],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return sy.LOW}}),ry=u(ty.prototype,"lineThickness",[Qv],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return 1}}),ey=ty))||ey)||ey);x._RF.pop(),x._RF.push({},"169a1O0ruFLoI6OnJUZap7V","DogeState",void 0);var e12,py,dy=((e12=dy||{})[e12.IDLE=0]="IDLE",e12[e12.SMILE=1]="SMILE",e12[e12.SCARE=2]="SCARE",e12[e12.BEE_STING=3]="BEE_STING",e12[e12.THORN_STAB=4]="THORN_STAB",e12[e12.OUT_OF_SCREEN=5]="OUT_OF_SCREEN",e12[e12.POISONED=6]="POISONED",e12[e12.DROWNING=7]="DROWNING",e12[e12.OVER_VIEW=8]="OVER_VIEW",e12);x._RF.pop(),x._RF.push({},"852f9XjNUVJ3Zt1Kd/EbqXU","Eye",void 0);var vy,yy,fy,gy,by,Sy,ky=(0,F.ccclass)("Eye")(py=function(e){i(n,e);var t=a(n);function n(){var _$e;o(this,n);for(var i=arguments.length,a=Array(i),r=0;r<i;r++)a[r]=arguments[r];return(_$e=t.call.apply(t,[this].concat(a))).scaleTween=null,_$e.initialPosition=null,_$e}return r(n,[{key:"createScaleAnimation",value:function value(){var _$e=q(this.node).to(.3,{scale:new te(1.1,1.1,1)},{easing:"smooth"});this.scaleTween=q(this.node).reverseTime(_$e).repeatForever()}},{key:"saveInitialPosition",value:function value(){this.initialPosition||(this.initialPosition=this.node.position.clone())}},{key:"show",value:function value(){this.node.active=!0,this.playAnimation()}},{key:"hide",value:function value(){this.stopAnimation(),this.node.active=!1}},{key:"toward",value:function value(e){this.initialPosition&&(this.node.setPosition(this.initialPosition),this.node.position.add(e))}},{key:"playAnimation",value:function value(){var _$e;this.scaleTween||this.createScaleAnimation(),null==(_$e=this.scaleTween)||_$e.start()}},{key:"stopAnimation",value:function value(){var _$e;null==(_$e=this.scaleTween)||_$e.stop()}}]),n}(U))||py;x._RF.pop(),x._RF.push({},"df218vrmOtEH5vRQXxIZ3yS","Eyes",void 0);var wy,Cy,Ey,Ty,Ry,Ly,Py,_y=F.ccclass,By=F.property,Dy=(vy=_y("Eyes"),yy=By(ky),fy=By(ky),vy((by=u((gy=function(e){i(n,e);var t=a(n);function n(){var _$e;o(this,n);for(var i=arguments.length,a=Array(i),r=0;r<i;r++)a[r]=arguments[r];return _$e=t.call.apply(t,[this].concat(a)),c(_$e,"leftEye",by,h(_$e)),c(_$e,"rightEye",Sy,h(_$e)),_$e.time=0,_$e.remaining=0,_$e.running=!1,_$e}return r(n,[{key:"onLoad",value:function value(){this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function value(){xt.lazyValidateProperties(this)}},{key:"start",value:function value(){this.remaining=0,this.running=!1,this.setTimeChangeDirection(.8),this.leftEye.saveInitialPosition(),this.rightEye.saveInitialPosition()}},{key:"setTimeChangeDirection",value:function value(e){this.time=e}},{key:"show",value:function value(){this.running=!0,this.remaining=this.time,this.leftEye.show(),this.rightEye.show()}},{key:"hide",value:function value(){this.running=!1,this.leftEye.hide(),this.rightEye.hide()}},{key:"stopLook",value:function value(){this.running=!1}},{key:"look",value:function value(){if(this.node.parent){var _$e=this.node.parent.getComponent(Vy);if(_$e){var t=_$e.getNearbyBee();if(t){var _$n=this.leftEye.initialPosition;if(_$n){var i=_$n.x,a=_$n.y,o=new te;this.leftEye.node.inverseTransformPoint(o,t.node.worldPosition);var r=new te(o.x-i,o.y-a,0).normalize().multiplyScalar(5);this.leftEye.toward(r),this.rightEye.toward(r)}}}}}},{key:"update",value:function value(e){this.running&&(this.remaining<=0&&(this.look(),this.remaining=this.time),this.remaining-=e)}}]),n}(U)).prototype,"leftEye",[yy],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Sy=u(gy.prototype,"rightEye",[fy],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gy))||gy);x._RF.pop(),x._RF.push({},"14172TbYDBAeISJqcpvLYV7","Doge",void 0);var Oy,Iy,xy,Ny,Fy,zy,Gy,My,Uy=F.ccclass,Hy=F.property,jy=Ludex.Utils.Array,Wy=[dy.OVER_VIEW,dy.BEE_STING,dy.THORN_STAB,dy.POISONED,dy.OUT_OF_SCREEN],Vy=(wy=Uy("Doge"),Cy=Hy(Dy),Ey=Hy(we),wy((Ry=u((Ty=function(e){i(d,e);var s,u=a(d);function d(){var _$e;o(this,d);for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return _$e=u.call.apply(u,[this].concat(n)),c(_$e,"eyes",Ry,h(_$e)),_$e.state=dy.IDLE,_$e.dustParticle=null,_$e.gameHeight=0,c(_$e,"collider",Ly,h(_$e)),c(_$e,"gameObjects",Py,h(_$e)),_$e.onBeginContact=function(t,n){n.node.name!==qh.BEE&&n.node.name!==qh.BIG_BEE&&n.node.name!==qh.BIG_BEE_BULLET||_$e.beeSting(),n.node.name!==qh.THORN&&n.node.name!==qh.THORN_BALL?n.node.name!==qh.POISON?n.node.name===qh.WATER&&_$e.drowning():_$e.poisoned():_$e.stabbedByThorn()},_$e}return r(d,[{key:"onLoad",value:function value(){var _$e;this.collider=this.getComponent(we),this.gameObjects=null==(_$e=this.node.parent)?void 0:_$e.getComponent(im),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function value(){xt.lazyValidateProperties(this)}},{key:"start",value:function value(){this.initDustParticle(),this.idle();var _$e,t=null==(_$e=ge("Canvas"))?void 0:_$e.getComponent(W);t&&(this.gameHeight=t.height),this.collider.on(Ce.BEGIN_CONTACT,this.onBeginContact)}},{key:"idle",value:function value(){!1!==this.setState(dy.IDLE)&&(this.hideEyes(),this.setSpineAnimation("normal",!0))}},{key:"smile",value:function value(){!1!==this.setState(dy.SMILE)&&(this.hideEyes(),this.setSpineAnimation("smile",!0))}},{key:"beeSting",value:function value(){var _$e=this;!1!==this.setState(dy.BEE_STING)&&(this.hideEyes(),this.setSpineAnimation("hurt",!1),this.scareOtherDoges(),this.scheduleOnce(function(){_$e.state===dy.BEE_STING&&_$e.setSpineAnimation("cry",!1)},.3),k.playSound(Zn.DOGE_HURT))}},{key:"stabbedByThorn",value:function value(){!1!==this.setState(dy.THORN_STAB)&&(this.hideEyes(),this.createDust(),this.setSpineAnimation("die",!1),this.scareOtherDoges(),k.playSound(Zn.DOGE_DIES))}},{key:"poisoned",value:function value(){!1!==this.setState(dy.POISONED)&&(this.hide(),this.hideEyes(),this.createDust(),this.scareOtherDoges(),k.playSound(Zn.DOGE_DIES))}},{key:"drowning",value:function value(){!1!==this.setState(dy.DROWNING)&&(this.hideEyes(),this.setSpineAnimation("troll",!1))}},{key:"isCantBeTargeted",value:function value(){return -1!==[dy.THORN_STAB,dy.OUT_OF_SCREEN,dy.POISONED,dy.DROWNING].indexOf(this.state)}},{key:"scare",value:function value(){var _$e;!1!==this.setState(dy.SCARE)&&(this.showEyes(),null==(_$e=this.eyes)||_$e.look(),this.setSpineAnimation("freak out",!0))}},{key:"hideEyes",value:function value(){this.eyes.hide()}},{key:"showEyes",value:function value(){this.eyes.show()}},{key:"setState",value:function value(e){return -1===Wy.indexOf(e)?-1===Wy.indexOf(this.state)&&(this.state=e,!0):Wy.indexOf(e)>Wy.indexOf(this.state)&&(this.state=e,this.node.scene.emit(sr.DOGE_DIE),!0)}},{key:"scareOtherDoges",value:function value(){if(this.gameObjects){var _$e,t=this.gameObjects.getDoges(this),n=l(t);try{for(n.s();!(_$e=n.n()).done;)_$e.value.scare()}catch(e){n.e(e)}finally{n.f()}}}},{key:"update",value:function value(){var _$e=this.node.worldPosition.y;(_$e>this.gameHeight||_$e<0)&&this.setState(dy.OUT_OF_SCREEN),this.isBeeNearBy()&&this.scare()}},{key:"isBeeNearBy",value:function value(){return this.state===dy.IDLE&&!jy.has(Wy,this.state)&&!!this.getNearbyBee()}},{key:"getNearbyBee",value:function value(){var _$e=this;if(!this.node.parent)return null;var t=this.node.parent.getComponentsInChildren(rd).find(function(t){var n=te.distance(_$e.node.getWorldPosition(),t.node.getWorldPosition());if(t.enabled&&n<=200)return!0});return null!=t?t:null}},{key:"createDust",value:function value(){var _$e=this;if(this.dustParticle){this.dustParticle.active=!0;var t=this.node.getWorldPosition(),n=t.x,i=t.y;this.dustParticle.setWorldPosition(new te(n,i));try{var a=this.dustParticle.getComponent(ke.Skeleton);null==a||a.setAnimation(0,"animation",!1)}catch(e){console.error("createDust",e)}this.scheduleOnce(function(){_$e.dustParticle&&(_$e.dustParticle.active=!1)},.5)}}},{key:"initDustParticle",value:(s=t(n().mark(function e(){var t,i,a;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.node.parent){e.next=2;break}return e.abrupt("return");case 2:return(t=new ie(qh.DUST_PARTICLE)).layer=0x2000000,t.active=!1,i=t.addComponent(ke.Skeleton),e.next=8,p.loadSkeletonDataAsync(ap.DUST_PARTICLE_SPINE);case 8:if(a=e.sent){e.next=12;break}return console.warn("initDustParticle","Failed to load dust particle spine"),e.abrupt("return");case 12:if(this.node&&this.node.isValid){e.next=14;break}return e.abrupt("return");case 14:i.skeletonData=a,this.node.parent.addChild(t),this.dustParticle=t;case 17:case"end":return e.stop()}},e,this)})),function(){return s.apply(this,arguments)})}]),d}(pp)).prototype,"eyes",[Cy],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ly=u(Ty.prototype,"collider",[Ey],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Py=u(Ty.prototype,"gameObjects",[Hy],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ty))||Ty);x._RF.pop(),x._RF.push({},"2ca763+kElPuqiAkECtFMMS","Grass",void 0);var $y,qy,Yy,Jy,Xy=F.ccclass,Zy=F.property,Qy=F.requireComponent,ef=(Oy=Xy("Grass"),Iy=Qy(se),xy=Zy({tooltip:"Use batch draw all grass polygons"}),Ny=Zy(se),Oy(Fy=Iy((Gy=u((zy=function(e){i(n,e);var t=a(n);function n(){var _$e;o(this,n);for(var i=arguments.length,a=Array(i),r=0;r<i;r++)a[r]=arguments[r];return _$e=t.call.apply(t,[this].concat(a)),c(_$e,"useBatch",Gy,h(_$e)),c(_$e,"graphic",My,h(_$e)),_$e.grassPolygons=[],_$e}return r(n,[{key:"__preload",value:function value(){this.graphic=this.getComponent(se),this.validateRequiredComponents(),this.listenGameplayEvents()}},{key:"validateRequiredComponents",value:function value(){xt.lazyValidateProperties(this)}},{key:"listenGameplayEvents",value:function value(){}},{key:"onLoad",value:function value(){var _$e=this.getPolygon();if(_$e){var t=this.isDark()?qh.GRASS_DARK:qh.GRASS;this.useBatch?this.addGrassPolygon(t,_$e):(this.updateFillColor(t),this.drawGrass(_$e))}}},{key:"drawGrass",value:function value(e){this.graphic.moveTo(e[0].x,e[0].y);var t,_$n=l(e);try{for(_$n.s();!(t=_$n.n()).done;){var i=t.value;this.graphic.lineTo(i.x,i.y)}}catch(e){_$n.e(e)}finally{_$n.f()}this.graphic.close(),this.graphic.fill()}},{key:"getPolygon",value:function value(){if(!("polygon"in this.node))return null;var _$e=this.node.polygon;return Array.isArray(_$e)?_$e:null}},{key:"isDark",value:function value(){return"isDark"in this.node&&!!this.node.isDark}},{key:"addGrassPolygon",value:function value(e,t){this.grassPolygons.push({type:e,polygon:t})}},{key:"updateFillColor",value:function value(e){e===qh.GRASS_DARK?this.graphic.fillColor.fromHEX("#5e9c35"):this.graphic.fillColor.fromHEX("#8bdd55")}},{key:"batchDrawAllGrass",value:function value(){if(!(this.grassPolygons.length<1)){var _$e,t=l(this.grassPolygons);try{for(t.s();!(_$e=t.n()).done;){var _$n=_$e.value;this.updateFillColor(_$n.type),this.drawGrass(_$n.polygon)}}catch(e){t.e(e)}finally{t.f()}this.grassPolygons=[]}}}]),n}(pp)).prototype,"useBatch",[xy],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return!0}}),My=u(zy.prototype,"graphic",[Ny],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Fy=zy))||Fy)||Fy);x._RF.pop(),x._RF.push({},"7027fhYTgdDe6EinMz7XLC6","MapLine",void 0);var tf=F.ccclass,nf=F.property,af=($y=tf("MapLine"),qy=nf(se),$y((Jy=u((Yy=function(e){i(n,e);var t=a(n);function n(){var _$e;o(this,n);for(var i=arguments.length,a=Array(i),r=0;r<i;r++)a[r]=arguments[r];return _$e=t.call.apply(t,[this].concat(a)),c(_$e,"graphics",Jy,h(_$e)),_$e.useBatch=!1,_$e.mapLines=[],_$e}return r(n,[{key:"__preload",value:function value(){this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function value(){xt.lazyValidateProperties(this)}},{key:"onLoad",value:function value(){var _$e=this.getPolygon();_$e&&(this.useBatch?(this.graphics.enabled=!1,this.addLine(_$e)):this.drawLine(_$e))}},{key:"getPolygon",value:function value(){if(!("polygon"in this.node))return null;var _$e=this.node.polygon;return Array.isArray(_$e)?_$e:null}},{key:"addLine",value:function value(e){this.mapLines.push(e)}},{key:"drawLine",value:function value(e){this.graphics.moveTo(e[0].x,e[0].y);var t,_$n=l(e.slice(1));try{for(_$n.s();!(t=_$n.n()).done;){var i=t.value;this.graphics.lineTo(i.x,i.y)}}catch(e){_$n.e(e)}finally{_$n.f()}this.graphics.stroke()}},{key:"batchDrawAllLines",value:function value(){if(!(this.mapLines.length<1)){var _$e,t=l(this.mapLines);try{for(t.s();!(_$e=t.n()).done;){var _$n=_$e.value;this.drawLine(_$n)}}catch(e){t.e(e)}finally{t.f()}this.mapLines=[]}}}]),n}(U)).prototype,"graphics",[qy],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Yy))||Yy);x._RF.pop(),x._RF.push({},"87767KZVqpEgIbdzZdGh1CJ","BatchObjectManager",void 0);var of=function(){function e(){o(this,e),this.isBrickInitialized=!1,this.isGrassInitialized=!1,this.isLineInitialized=!1,this.isPoisonInitialized=!1,this.isPoisonSurfaceInitialized=!1,this.isWaterInitialized=!1,this.isDangerAreaInitialized=!1,this.mainBrickComponent=null,this.mainGrassComponent=null,this.mainLineComponent=null,this.mainPoisonComponent=null,this.mainPoisonSurfaceComponent=null,this.mainWaterComponent=null,this.mainDangerAreaComponent=null}return r(e,[{key:"assignMainBrickComponent",value:function value(e){this.mainBrickComponent=e}},{key:"assignMainGrassComponent",value:function value(e){this.mainGrassComponent=e}},{key:"assignMainLineComponent",value:function value(e){this.mainLineComponent=e}},{key:"assignMainPoisonComponent",value:function value(e){this.mainPoisonComponent=e}},{key:"assignMainPoisonSurfaceComponent",value:function value(e){this.mainPoisonSurfaceComponent=e}},{key:"assignMainWaterComponent",value:function value(e){this.mainWaterComponent=e}},{key:"assignMainDangerAreaComponent",value:function value(e){this.mainDangerAreaComponent=e}},{key:"isBrickBatchingEnabled",value:function value(){var _$e,t;return null!=(_$e=null==(t=this.mainBrickComponent)?void 0:t.useBatch)&&_$e}},{key:"isGrassBatchingEnabled",value:function value(){var _$e,t;return null!=(_$e=null==(t=this.mainGrassComponent)?void 0:t.useBatch)&&_$e}},{key:"isLineBatchingEnabled",value:function value(){var _$e,t;return null!=(_$e=null==(t=this.mainLineComponent)?void 0:t.useBatch)&&_$e}},{key:"isPoisonBatchingEnabled",value:function value(){var _$e,t;return null!=(_$e=null==(t=this.mainPoisonComponent)?void 0:t.useBatch)&&_$e}},{key:"isPoisonSurfaceBatchingEnabled",value:function value(){var _$e,t;return null!=(_$e=null==(t=this.mainPoisonSurfaceComponent)?void 0:t.useBatch)&&_$e}},{key:"isWaterBatchingEnabled",value:function value(){var _$e,t;return null!=(_$e=null==(t=this.mainWaterComponent)?void 0:t.useBatch)&&_$e}},{key:"isDangerAreaBatchingEnabled",value:function value(){var _$e,t;return null!=(_$e=null==(t=this.mainDangerAreaComponent)?void 0:t.useBatch)&&_$e}},{key:"updateBrickPolygon",value:function value(e){this.mainBrickComponent?this.mainBrickComponent.addBrickPolygon(e):console.warn("BatchObjectManager: mainBrickComponent is not assigned")}},{key:"updateGrassPolygon",value:function value(e,t){this.mainGrassComponent?this.mainGrassComponent.addGrassPolygon(e,t):console.warn("BatchObjectManager: mainGrassComponent is not assigned")}},{key:"updateMapLine",value:function value(e){this.mainLineComponent?this.mainLineComponent.addLine(e):console.warn("BatchObjectManager: mainLineNode is not assigned")}},{key:"updatePoisonPolygon",value:function value(e){this.mainPoisonComponent?this.mainPoisonComponent.addPoisonPolygon(e):console.warn("BatchObjectManager: mainPoisonComponent is not assigned")}},{key:"updatePoisonSurfacePolygon",value:function value(e){this.mainPoisonSurfaceComponent?this.mainPoisonSurfaceComponent.addPoisonSurfacePolygon(e):console.warn("BatchObjectManager: mainPoisonSurfaceComponent is not assigned")}},{key:"updateWaterPolygon",value:function value(e){this.mainWaterComponent?this.mainWaterComponent.addWaterPolygon(e):console.warn("BatchObjectManager: mainWaterComponent is not assigned")}},{key:"updateDangerAreaPolygon",value:function value(e){this.mainDangerAreaComponent?this.mainDangerAreaComponent.addDangerAreaPolygon(e):console.warn("BatchObjectManager: mainDangerAreaComponent is not assigned")}},{key:"batchDraw",value:function value(){var _$e,t,n,i,a,o,r;null==(_$e=this.mainBrickComponent)||_$e.batchDrawAllBrick(),null==(t=this.mainGrassComponent)||t.batchDrawAllGrass(),null==(n=this.mainLineComponent)||n.batchDrawAllLines(),null==(i=this.mainPoisonComponent)||i.batchDrawAllPoisonPools(),null==(a=this.mainPoisonSurfaceComponent)||a.batchDrawAllPoisonSurfaces(),null==(o=this.mainWaterComponent)||o.batchDrawAllWater(),null==(r=this.mainDangerAreaComponent)||r.batchDrawAllDangerAreas()}},{key:"clearObjects",value:function value(){this.isBrickInitialized=!1,this.isGrassInitialized=!1,this.isLineInitialized=!1,this.isPoisonInitialized=!1,this.isPoisonSurfaceInitialized=!1,this.isWaterInitialized=!1,this.isDangerAreaInitialized=!1,this.mainBrickComponent=null,this.mainGrassComponent=null,this.mainLineComponent=null,this.mainPoisonComponent=null,this.mainPoisonSurfaceComponent=null,this.mainWaterComponent=null,this.mainDangerAreaComponent=null}}]),e}();x._RF.pop(),x._RF.push({},"4c04ffCcRhGsqEZlVWUHd8s","MapTransformer",void 0);var rf,sf,lf,uf,cf,hf,pf,df,vf,yf,ff,mf,gf,bf,Sf,kf,wf,Cf,Ef,Af,Tf,Rf,Pf,_f,Bf,Df,Of,If,xf,Nf,Ff,zf,Gf,Mf,Uf,Hf,jf,Wf,Vf,$f,qf,Kf,Yf,Jf,Qf=function(){function e(){o(this,e)}return r(e,null,[{key:"getPointObject",value:function value(t){var n=t.id,i=t.point,a=t.data,o=t.connect,r=e.getTransformedPoint(i);return console.log(1792,28*i.y,270),{id:n,point:r,data:a,connect:o}}},{key:"getTransformedPoint",value:function value(e){return{x:28*e.x+14-200,y:1792-28*e.y-14-270}}},{key:"revertTransformedPoint",value:function value(e){return{x:(e.x+200-14)/28,y:(1792-e.y-14-270)/28}}},{key:"getPointObjectBHalfCoord",value:function value(e){var t=e.id,n=e.point,i=e.data,a=e.connect;return{id:t,point:{x:28*n.x/2-200,y:1792-28*n.y/2-270},data:i,connect:a}}},{key:"getPolygonObject",value:function value(t){var n=t.id,i=t.point,a=t.data,o=t.connect;return{id:n,point:e.getTransformedPolygon(i),data:a,connect:o}}},{key:"getTransformedPolygon",value:function value(e){return e.map(function(e){return{x:28*e.x-200,y:1792-28*e.y-270}})}},{key:"revertTransformedPolygon",value:function value(e){return e.map(function(e){return{x:(e.x+200)/28,y:(1792-e.y-270)/28}})}},{key:"getDoublePolygon",value:function value(e){var t=e.id,n=e.point,i=e.data,a=e.connect;return{id:t,point:n.map(function(e){return{x:28*e.x/2-200,y:1792-28*e.y/2-270}}),data:i,connect:a}}},{key:"getTransformedDoublePolygon",value:function value(e){return e.map(function(e){return{x:28*e.x/2-200,y:1792-28*e.y/2-270}})}},{key:"revertTransformedDoublePolygon",value:function value(e){return e.map(function(e){return{x:(e.x+200)/14,y:(1792-e.y-270)/14}})}},{key:"transformPointsFromMapToDrawAreaCoordinate",value:function value(e){return e.map(function(e){return{x:28*e.x-200,y:1792-28*e.y-270}})}}]),e}();x._RF.pop(),x._RF.push({},"75ad9uPflhLL4N96NmHF2Sk","GameObjects",void 0);var em,tm=F.ccclass,nm=F.property,im=(rf=tm("GameObjects"),sf=nm(Le),lf=nm(Le),uf=nm(Le),cf=nm(Le),hf=nm(Le),pf=nm(Le),df=nm(Le),vf=nm(Le),yf=nm(Le),ff=nm(Le),mf=nm(Le),gf=nm(Le),bf=nm(Le),Sf=nm(Le),kf=nm(Le),wf=nm(Le),Cf=nm({tooltip:"Use batch draw all map lines."}),Ef=nm({tooltip:"Use batch draw all poison pools."}),Af=nm({tooltip:"Use batch draw all poison surfaces."}),Tf=nm({tooltip:"Use batch draw all water pools."}),Rf=nm({tooltip:"Use batch draw all danger areas."}),rf((_f=u((Pf=function(e){i(d,e);var s,u=a(d);function d(){var _$e;o(this,d);for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return _$e=u.call.apply(u,[this].concat(n)),c(_$e,"dogePrefab",_f,h(_$e)),c(_$e,"spiderPrefab",Bf,h(_$e)),c(_$e,"beePrefab",Df,h(_$e)),c(_$e,"beehivePrefab",Of,h(_$e)),c(_$e,"bigBeePrefab",If,h(_$e)),c(_$e,"thornPrefab",xf,h(_$e)),c(_$e,"thornBallPrefab",Nf,h(_$e)),c(_$e,"airFanPrefab",Ff,h(_$e)),c(_$e,"grassPrefab",zf,h(_$e)),c(_$e,"balloonPrefab",Gf,h(_$e)),c(_$e,"brickPrefab",Mf,h(_$e)),c(_$e,"arenaPrefab",Uf,h(_$e)),c(_$e,"woodPrefab",Hf,h(_$e)),c(_$e,"connectPrefab",jf,h(_$e)),c(_$e,"mapLinePrefab",Wf,h(_$e)),c(_$e,"crossingBeeLinePrefab",Vf,h(_$e)),c(_$e,"batchMapLines",$f,h(_$e)),c(_$e,"batchPoisonPool",qf,h(_$e)),c(_$e,"batchPoisonSurface",Kf,h(_$e)),c(_$e,"batchWaterPool",Yf,h(_$e)),c(_$e,"batchDangerArea",Jf,h(_$e)),_$e.batchObjects=new of,_$e.objects=new Map,_$e}return r(d,[{key:"spawnObjects",value:function value(e){for(var t=e.map,n=A(t).reverse(),i=0;i<n.length;i++){var a=n[i],o=null;(o=Array.isArray(null==a?void 0:a.point)?this.spawnPolygonObjectType(a):this.spawnPointObjectType(a))&&this.objects.set(i,o)}var r,s=l(t);try{for(s.s();!(r=s.n()).done;){var u=r.value;if(!Array.isArray(u.point)){if(u.id===tp.BALLOON){var h=Qf.getPointObject(u).point,p=h.x,_$d=h.y;if(!u.connect)continue;var v=this.findObjectIndex(t,u.connect);if(!v)continue;this.spawnBalloon(p,_$d,v)}if(u.id===tp.CONNECT){if(!u.connect||!Array.isArray(u.connect.point))return null;var y=Qf.getDoublePolygon(u.connect),f=Qf.getPointObjectBHalfCoord(u).point,m=f.x,g=f.y;this.spawnConnect(m,g,y.point)}}}}catch(e){s.e(e)}finally{s.f()}this.batchObjects.batchDraw(),this.sortObjects(),this.sleepObjects()}},{key:"spawnPolygonObjectType",value:function value(e){var t=Qf.getPolygonObject(e).point;if(0===t.length)return null;switch(e.id){case tp.BRICK:return this.spawnBrick(t);case tp.GRASS:return this.spawnGrass(t,!1);case tp.GRASS_DARK:return this.spawnGrass(t,!0);case tp.LINE:return this.spawnLine(t);case tp.POISON:return this.spawnPoison(t);case tp.POISON_SURFACE:return this.spawnPoisonSurface(t);case tp.WATER:return this.spawnWater(t);case tp.DANGER_AREA:return this.spawnDangerAreaNormal(t);case tp.CONNECT:return null;case tp.WOOD:var n=Qf.getDoublePolygon(e);return this.spawnWood(n.point);case tp.COLLIDER:var i=Qf.getDoublePolygon(e);return this.spawnCollider(0,0,i.point);case tp.STROKE:default:return null}}},{key:"spawnPointObjectType",value:function value(e){var t=Qf.getPointObject(e).point,n=t.x,i=t.y;switch(e.id){case tp.DOGE_A:return this.spawnDoge({x:n,y:i});case tp.DOGE_B:return this.spawnDoge({x:n,y:i,right:!0});case tp.SPIDER:return this.spawnSpider(n,i);case tp.BEEHIVE_A:case tp.BEEHIVE_C:return this.spawnBeehive(n,i);case tp.BEEHIVE_B:case tp.BEEHIVE_D:return this.spawnBeehive(n,i,!0);case tp.THORN_BALL:return this.spawnThornBall(n,i);case tp.BIG_BEE:return this.spawnBigBee(n,i);case tp.WATER_SURFACE:return this.spawnWaterSurface(n,i);case tp.THORN:var a,o=(null==(a=e.data)?void 0:a.a)||0;return this.spawnThorn(n,i,o);case tp.AIR_FAN:var r,s=(null==(r=e.data)?void 0:r.a)||0;return this.spawnAirFan(n,i,s);default:return null}}},{key:"spawnObjectForDevTools",value:function value(e){this.spawnPointObjectType(e),this.sortObjects()}},{key:"spawnPolygonObjectForDevTools",value:function value(e){this.spawnPolygonObjectType(e),this.sortObjects()}},{key:"addObject",value:function value(e){this.node.insertChild(e,this.getSiblingIndex(e.name))}},{key:"sortObjects",value:function value(){var _$e=A(this.node.children);_$e.sort(function(e,t){var n,i;return(null!=(n=Zh[e.name])?n:0)-(null!=(i=Zh[t.name])?i:0)}),_$e.forEach(function(e,t){e.setSiblingIndex(t)})}},{key:"findObjectIndex",value:function value(e,t){var n,i=this,a=e.findIndex(function(e){return JSON.stringify(e)===JSON.stringify(t)}),o=null==(n=e[a])?void 0:n.point;if(o&&!Array.isArray(o)){var r=Qf.getPointObject(e[a]).point,s=r.x,l=r.y,u=this.node.children.find(function(e){var n=e.position;return n.x===s&&n.y===l&&e.name===i.getObjNameFromId(t.id)});if(u)return u}}},{key:"getObjNameFromId",value:function value(e){switch(e){case tp.DOGE_A:case tp.DOGE_B:return qh.DOGE;case tp.SPIDER:return qh.SPIDER;case tp.BEEHIVE_A:case tp.BEEHIVE_B:case tp.BEEHIVE_C:case tp.BEEHIVE_D:return qh.BEEHIVE;case tp.THORN_BALL:return qh.THORN_BALL;case tp.BIG_BEE:return qh.BIG_BEE;case tp.WATER_SURFACE:return qh.WATER_SURFACE;case tp.THORN:return qh.THORN;case tp.AIR_FAN:return qh.AIR_FAN;case tp.BRICK:return qh.BRICK;case tp.GRASS:return qh.GRASS;case tp.GRASS_DARK:return qh.GRASS_DARK;case tp.LINE:return qh.MAP_LINE;case tp.POISON:return qh.POISON;case tp.POISON_SURFACE:return qh.POISON_SURFACE;case tp.WATER:return qh.WATER;case tp.DANGER_AREA:return qh.DANGER_AREA;case tp.WOOD:return qh.WOOD;case tp.COLLIDER:return qh.COLLIDER;default:return""}}},{key:"getSiblingIndex",value:function value(e){var t=this.node.children,n=Zh[e];if(!n)return t.length+1;var i=t.map(function(e){return Zh[e.name]}).filter(function(e){return void 0!==e}),a=i.findIndex(function(e){return n<e});return a<0?i.length+1:a}},{key:"clearObjects",value:function value(){this.node.destroyAllChildren(),this.node.removeAllChildren(),this.batchObjects.clearObjects()}},{key:"stopBeeBehavior",value:function value(){var _$e,t=this.node.getComponentsInChildren(rd),n=l(t);try{for(n.s();!(_$e=n.n()).done;)_$e.value.state=$h.IDLE}catch(e){n.e(e)}finally{n.f()}}},{key:"sleepObjects",value:function value(){var _$e,t=this.getComponentsInChildren(pp),n=l(t);try{for(n.s();!(_$e=n.n()).done;)_$e.value.sleep()}catch(e){n.e(e)}finally{n.f()}var i,a=this.node.getComponentsInChildren(lv),o=l(a);try{for(o.s();!(i=o.n()).done;)i.value.state=$h.IDLE}catch(e){o.e(e)}finally{o.f()}}},{key:"wakeUpObjects",value:function value(){var _$e,t=this.getComponentsInChildren(pp),n=l(t);try{for(n.s();!(_$e=n.n()).done;)_$e.value.wake()}catch(e){n.e(e)}finally{n.f()}}},{key:"spawnBeehive",value:function value(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=Pe(this.beehivePrefab);return _instanceof(i,ie)?(i.name=qh.BEEHIVE,i.setPosition(e,t),i.setScale(n?-1:1,1),i.attr({isRightSide:n}),this.addObject(i),i):null}},{key:"spawnBees",value:function value(){var _$e,t=this.node.getComponentsInChildren(Nd),n=1===t.length?8:4,i=l(t);try{for(i.s();!(_$e=i.n()).done;){var a=_$e.value;a.node.attr({totalPathSeekers:Math.floor(n/3)});for(var o=0;o<n;o++){var r=this.spawnBee();r&&a.releaseBee(r)}}}catch(e){i.e(e)}finally{i.f()}this.sortObjects()}},{key:"spawnBee",value:function value(){var _$e=Pe(this.beePrefab);return _instanceof(_$e,ie)?(_$e.name=qh.BEE,this.addObject(_$e),_$e.setSiblingIndex(999),_$e):null}},{key:"spawnCrossingBees",value:function value(e){for(var t=this,n=e.beeSpeed,i=e.spawnRandOffset,a=void 0===i?80:i,o=e.playerWorldX,r=e.playerWorldY,s=e.spawnWorldX,l=e.spawnWorldY,u=e.count,c=void 0===u?[1,2]:u,h=e.targetOffsetMultiplier,p=void 0===h?0:h,_$d=de.randomRangeInt(c[0],c[1]),v=[],y=s<o,m=0;m<_$d;m++)!function f(){var _$e=t.spawnBee();if(!_$e)throw Error("Could not spawn bee");var i=_$e.getComponent(rd);if(!i)throw Error("Bee component not found");t.addObject(_$e),i.isSpawnLeftSide=!y;var u=de.randomRangeInt(-a,a),c=de.randomRangeInt(-a,a),h=s+u,_$d=l+c,f=_$e.worldPosition.z;_$e.setWorldPosition(h,_$d,f);var m=new ye(o+u*p-h,r+c*p-_$d);i.rotateToVector(m),i.fly(m.normalize().multiplyScalar(n)),t.scheduleOnce(function(){i.setRole(Vh.NORMAL),i.setState($h.ATTACKING),i.followInstructions()}),v.push(i)}();return this.sortObjects(),v}},{key:"spawnCrossingBeeLine",value:function value(e){var t=e.startX,n=e.startY,i=e.endX,a=e.endY,o=e.thickness,r=e.spriteType,s=Pe(this.crossingBeeLinePrefab);if(!_instanceof(s,ie))throw Error("Could not spawn crossing bee line");s.name=qh.CROSSING_BEE_LINE;var l=s.getComponent(hy);if(!l)throw Error("CrossingBeeLine component not found");return this.addObject(s),l.setSpriteType(r),l.setStartPosition(t,n),l.setEndPosition(i,a),l.thickness=o,this.sortObjects(),l}},{key:"checkAllBeeDie",value:function value(){var _$e=this.node.getComponentsInChildren(rd),t=this.node.getComponentsInChildren(lv),n=_$e.some(function(e){return e.enabled}),i=t.some(function(e){return e.enabled});return!n&&!i}},{key:"spawnDoge",value:function value(e){var t=e.x,n=e.y,i=e.right,o=e.isWorldPosition,r=void 0!==o&&o,s=e.rigidBodyConfig,u=Pe(this.dogePrefab);if(!_instanceof(u,ie))return null;u.name=qh.DOGE,r||u.setPosition(t,n),u.setScale(void 0!==i&&i?-1:1,1),this.addObject(u),u.setSiblingIndex(999),r&&u.setWorldPosition(t,n,u.worldPosition.z);var c=(void 0===s?{}:s).gravityScale,p=u.getComponent(Se);if(!p)throw Error("Could not get doge rigidBody");return p.gravityScale=void 0===c?1:c,u}},{key:"spawnSpider",value:function value(e,t){var n=Pe(this.spiderPrefab);return _instanceof(n,ie)?(n.name=qh.SPIDER,n.setPosition(e,t),this.addObject(n),n):null}},{key:"spawnBigBee",value:function value(e,t){var n=Pe(this.bigBeePrefab);return _instanceof(n,ie)?(n.name=qh.BIG_BEE,n.setPosition(e,t),this.addObject(n),n):null}},{key:"reviveBigBees",value:function value(){var _$e,t=this.node.getComponentsInChildren(lv),n=l(t);try{for(n.s();!(_$e=n.n()).done;)_$e.value.state=$h.ATTACKING}catch(e){n.e(e)}finally{n.f()}}},{key:"spawnBrick",value:function value(e){if(!this.batchObjects.isBrickInitialized){var t=this.spawnBrickNormal(e);if(!t)return null;var n=t.getComponent(mv);return n?(this.batchObjects.isBrickInitialized=!0,n.useBatch&&this.batchObjects.assignMainBrickComponent(n),this.addObject(t),t):null}return this.batchObjects.isBrickBatchingEnabled()?(this.batchObjects.updateBrickPolygon(e),null):this.spawnBrickNormal(e)}},{key:"spawnBrickNormal",value:function value(e){var t=Pe(this.brickPrefab);return _instanceof(t,ie)?(t.name=qh.BRICK,t.attr({polygon:e}),this.addObject(t),t):null}},{key:"spawnWood",value:function value(e){var t=Pe(this.woodPrefab);if(!_instanceof(t,ie))return null;t.name=qh.WOOD;var n=t.getComponent(Fv);if(!n)return console.warn("Pattern not found"),null;n.savePolygonPoints(e.map(function(e){return{x:e.x,y:e.y}})),this.addObject(t),n.draw(e),n.applyCollider(e),n.setRigidBodyType(be.Dynamic);var i=this.spawnWoodStroke(e);return i.setParent(t,!1),t.addChild(i),t}},{key:"spawnWoodStroke",value:function value(e){var t=new ie;t.name=qh.WOOD_STROKE,t.layer=0x2000000,this.addObject(t);var n=t.addComponent(se);n.lineWidth=4;var i=new le;le.fromHEX(i,"#0d0d15"),n.strokeColor=i;var a=e[0];if(!a)return t;n.moveTo(a.x,a.y);var o,r=l(e.slice(1));try{for(r.s();!(o=r.n()).done;){var s=o.value;n.lineTo(s.x,s.y)}}catch(e){r.e(e)}finally{r.f()}return n.close(),n.stroke(),t}},{key:"spawnGrass",value:function value(e,t){if(!this.batchObjects.isGrassInitialized){var n=this.spawnGrassNormal(e,!1);if(!n)return null;var i=n.getComponent(ef);return i?(this.batchObjects.isGrassInitialized=!0,i.useBatch&&this.batchObjects.assignMainGrassComponent(i),this.addObject(n),n):null}var a=t?qh.GRASS_DARK:qh.GRASS;return this.batchObjects.isGrassBatchingEnabled()?(this.batchObjects.updateGrassPolygon(a,e),null):this.spawnGrassNormal(e,t)}},{key:"spawnGrassNormal",value:function value(e,t){var n=Pe(this.grassPrefab);return _instanceof(n,ie)?(n.name=t?qh.GRASS_DARK:qh.GRASS,n.attr({polygon:e,isDark:t}),this.addObject(n),n):null}},{key:"spawnPoison",value:function value(e){if(!this.batchPoisonPool)return this.spawnPoisonNormal(e);if(!this.batchObjects.isPoisonInitialized){var t=Pe(this.arenaPrefab);if(!_instanceof(t,ie))return null;t.name=qh.POISON,this.addObject(t);var n=t.addComponent(Uv);return n.useBatch=!0,this.batchObjects.isPoisonInitialized=!0,this.batchObjects.assignMainPoisonComponent(n),this.batchObjects.updatePoisonPolygon(e),t}return this.batchObjects.updatePoisonPolygon(e),null}},{key:"spawnPoisonNormal",value:function value(e){var t=Pe(this.arenaPrefab);return _instanceof(t,ie)?(t.name=qh.POISON,this.addObject(t),t.addComponent(Uv).polygon=e,t):null}},{key:"spawnPoisonSurface",value:function value(e){if(!this.batchPoisonPool)return this.spawnPoisonSurfaceNormal(e);if(!this.batchObjects.isPoisonSurfaceInitialized){var t=Pe(this.arenaPrefab);if(!_instanceof(t,ie))return null;t.name=qh.POISON_SURFACE,this.addObject(t);var n=t.addComponent(jv);return n.useBatch=!0,this.batchObjects.isPoisonSurfaceInitialized=!0,this.batchObjects.assignMainPoisonSurfaceComponent(n),this.batchObjects.updatePoisonSurfacePolygon(e),t}return this.batchObjects.updatePoisonSurfacePolygon(e),null}},{key:"spawnPoisonSurfaceNormal",value:function value(e){var t=Pe(this.arenaPrefab);return _instanceof(t,ie)?(t.name=qh.POISON_SURFACE,this.addObject(t),t.addComponent(jv).polygon=e,t):null}},{key:"spawnWater",value:function value(e){if(!this.batchWaterPool)return this.spawnWaterNormal(e);if(!this.batchObjects.isWaterInitialized){var t=Pe(this.arenaPrefab);if(!_instanceof(t,ie))return null;t.name=qh.WATER,this.addObject(t);var n=t.addComponent($v);return n.useBatch=!0,t.addComponent(ae).opacity=.75,this.batchObjects.isWaterInitialized=!0,this.batchObjects.assignMainWaterComponent(n),this.batchObjects.updateWaterPolygon(e),t}return this.batchObjects.updateWaterPolygon(e),null}},{key:"spawnWaterNormal",value:function value(e){var t=Pe(this.arenaPrefab);return _instanceof(t,ie)?(t.name=qh.WATER,this.addObject(t),t.addComponent($v).polygon=e,t.addComponent(ae).opacity=.75,t):null}},{key:"spawnDangerAreaNormal",value:function value(e){var t=Pe(this.arenaPrefab);if(!_instanceof(t,ie))return null;t.name=qh.DANGER_AREA;var n=t.getComponent(Dv);if(!n)return console.warn("GraphicsPattern not found"),null;this.addObject(t),n.setColor("#fc03036d"),n.draw(e);var i=t.addComponent(Se);return i.type=be.Static,i.group=np.DEFAULT,t.addComponent(De),n.applyCollider(e),t}},{key:"spawnWaterSurface",value:function value(e,t){var n=new ie;return n.name=qh.WATER_SURFACE,n.layer=this.node.layer,n.setPosition(e,t),this.loadWaterSurfaceSprite(n),this.addObject(n),n}},{key:"loadWaterSurfaceSprite",value:(s=t(n().mark(function e(t){var i;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.loadSpriteFrameAsync(ap.WATER_SURFACE_FRAME);case 3:if(i=e.sent,t.isValid){e.next=6;break}throw Error("loadWaterSurfaceSprite: WaterSurface is not valid");case 6:if(i){e.next=8;break}throw Error("loadWaterSurfaceSprite: SpriteFrame not found");case 8:t.addComponent(Y).spriteFrame=i,e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),console.warn("loadWaterSurfaceSprite",_instanceof(e.t0,Error)?e.t0:Error(String(e.t0)));case 15:case"end":return e.stop()}},e,null,[[0,11]])})),function(e){return s.apply(this,arguments)})},{key:"spawnThorn",value:function value(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=Pe(this.thornPrefab);return _instanceof(i,ie)?(i.name=qh.THORN,i.angle=n,i.setPosition(e,t),this.addObject(i),i):null}},{key:"spawnThornBall",value:function value(e,t){var n=Pe(this.thornBallPrefab);return _instanceof(n,ie)?(n.name=qh.THORN_BALL,n.setPosition(e,t),this.addObject(n),n):null}},{key:"spawnAirFan",value:function value(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=Pe(this.airFanPrefab);if(!_instanceof(i,ie))return null;i.name=qh.AIR_FAN,i.angle=n,i.setScale(this.normalizeAngle(n)>180?-1:1,1),i.setPosition(e,t),i.attr({id:tp.AIR_FAN});var a=i.getComponent(fp);return a?(a.setForceDirection(n),this.addObject(i),i):(console.warn("AirFan not found"),null)}},{key:"spawnCollider",value:function value(e,t,n){var i=new ie;i.name=qh.COLLIDER,this.addObject(i),i.setPosition(e,t);var a=i.addComponent(Se);a.type=be.Static,a.group=np.MAIN_OBJECT;var o=i.addComponent(De);return o.restitution=.2,o.points=n.map(function(e){var _$t=e.x,_$n=e.y;return new ye(_$t,_$n)}),o.apply(),i}},{key:"spawnLine",value:function value(e){if(!this.batchMapLines)return this.spawnLineNormal(e);if(!this.batchObjects.isLineInitialized){var t=this.spawnLineNormal(e);if(!t)return null;this.addObject(t);var n=t.getComponent(af);return n?(this.batchObjects.isLineInitialized=!0,this.batchObjects.assignMainLineComponent(n),t):null}return this.batchObjects.updateMapLine(e),null}},{key:"spawnLineNormal",value:function value(e){var t=Pe(this.mapLinePrefab);return _instanceof(t,ie)?t.getComponent(af)?(t.name=qh.MAP_LINE,t.attr({polygon:e}),this.addObject(t),t):(console.warn("MapLine not found"),null):null}},{key:"spawnConnect",value:function value(e,t,n){var i=this.getComponentsInChildren(Fv).find(function(e){var _$t=e.getPolygonPoints();if(_$t.length!==n.length)return!1;for(var i=0;i<n.length;i++){var a,o,r=null!=(a=_$t[i])?a:{x:0,y:0},s=(r.x,r.y,null!=(o=n[i])?o:{x:0,y:0});s.x,s.y}return!0}),a=Pe(this.connectPrefab);if(!_instanceof(a,ie))return null;if(a.setPosition(e,t),this.node.insertChild(a,this.getSiblingIndex(a.name)),i){var o=a.getWorldPosition(),r=o.x,s=o.y,l=i.node.getWorldPosition(),u=l.x,c=l.y,h=a.getComponent(Ae);h.connectedBody=i.node.getComponent(Se),h.connectedAnchor=new ye(r-u,s-c),h.enabled=!1,h.enabled=!0}}},{key:"spawnBalloon",value:function value(e,t,n){var i=Pe(this.balloonPrefab);if(!_instanceof(i,ie))return null;i.name=qh.BALLOON,i.setPosition(e,t);var a=i.getComponent(Hp);if(!a)return console.warn("Balloon not found"),null;var o=a.connectToDoge(n);return this.addObject(i),o&&this.addObject(o.node),i}},{key:"getRandomDogeToBee",value:function value(){if(!this.node.parent)return null;var _$e,t=this.node.parent.getComponentsInChildren(Vy),n=t.length;return null!=(_$e=t[Math.floor(Math.random()*n)])?_$e:null}},{key:"getNearestDogeToBee",value:function value(e){if(!this.node.parent)return null;var t,n=this.node.parent.getComponentsInChildren(Vy);return 0===(n=n.filter(function(e){return!e.isCantBeTargeted()})).length?null:(n.sort(function(t,n){return ye.distance(t.node.worldPosition,e.node.worldPosition)-ye.distance(n.node.worldPosition,e.node.worldPosition)}),null!=(t=n[0])?t:null)}},{key:"getDoges",value:function value(e){return this.node.parent?this.node.parent.getComponentsInChildren(Vy).filter(function(t){return t!==e}):[]}},{key:"normalizeAngle",value:function value(e){var t=e%360;return t<0?360+t:t}}]),d}(U)).prototype,"dogePrefab",[sf],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return null}}),Bf=u(Pf.prototype,"spiderPrefab",[lf],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return null}}),Df=u(Pf.prototype,"beePrefab",[uf],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return null}}),Of=u(Pf.prototype,"beehivePrefab",[cf],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return null}}),If=u(Pf.prototype,"bigBeePrefab",[hf],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return null}}),xf=u(Pf.prototype,"thornPrefab",[pf],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return null}}),Nf=u(Pf.prototype,"thornBallPrefab",[df],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return null}}),Ff=u(Pf.prototype,"airFanPrefab",[vf],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return null}}),zf=u(Pf.prototype,"grassPrefab",[yf],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return null}}),Gf=u(Pf.prototype,"balloonPrefab",[ff],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return null}}),Mf=u(Pf.prototype,"brickPrefab",[mf],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return null}}),Uf=u(Pf.prototype,"arenaPrefab",[gf],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return null}}),Hf=u(Pf.prototype,"woodPrefab",[bf],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return null}}),jf=u(Pf.prototype,"connectPrefab",[Sf],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return null}}),Wf=u(Pf.prototype,"mapLinePrefab",[kf],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return null}}),Vf=u(Pf.prototype,"crossingBeeLinePrefab",[wf],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return null}}),$f=u(Pf.prototype,"batchMapLines",[Cf],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return!0}}),qf=u(Pf.prototype,"batchPoisonPool",[Ef],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return!0}}),Kf=u(Pf.prototype,"batchPoisonSurface",[Af],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return!0}}),Yf=u(Pf.prototype,"batchWaterPool",[Tf],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return!0}}),Jf=u(Pf.prototype,"batchDangerArea",[Rf],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return!0}}),Pf))||Pf);x._RF.pop(),x._RF.push({},"97f21hkFElI0YdBDCgAkt9+","Hint",void 0);var am,om,sm,lm,um=(0,F.ccclass)("Hint")(em=function(e){i(c,e);var s,u=a(c);function c(){var _$e;o(this,c);for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return(_$e=u.call.apply(u,[this].concat(n))).hintLine=null,_$e.hintHand=null,_$e.isHintShown=!1,_$e}return r(c,[{key:"showHint",value:function value(e,t){this.isHintShown||(this.isHintShown=!0,this.hintLine=this.createHintLine(),this.hintLine.active=!0,this.drawHintLine(this.hintLine,e),t&&this.showHand(e))}},{key:"drawHintLine",value:function value(e,t){var n=e.getComponent(se);if(!n)throw Error("drawHintLine: Graphics is null");n.clear();var i=t[0];if(i){n.moveTo(i.x,i.y);var a,o=l(t.slice(1));try{for(o.s();!(a=o.n()).done;){var r=a.value;n.lineTo(r.x,r.y)}}catch(e){o.e(e)}finally{o.f()}n.stroke()}}},{key:"hideHint",value:function value(){this.hintLine&&(this.hintLine.active=!1),this.hintHand&&(Ie.stopAllByTarget(this.hintHand),this.hintHand.active=!1)}},{key:"showHand",value:(s=t(n().mark(function e(t){var i;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.hintHand=this.createHintHand(t),e.next=3,p.loadSpriteFrameAsync(ap.IC_HAND_FRAME);case 3:if(i=e.sent){e.next=7;break}return this.removeHintHand(),e.abrupt("return");case 7:this.addSpriteToHand(i),this.runHandHintAnimation(t);case 9:case"end":return e.stop()}},e,this)})),function(e){return s.apply(this,arguments)})},{key:"addSpriteToHand",value:function value(e){var t;this.hintHand&&(this.hintHand.addComponent(Y).spriteFrame=e,null==(t=this.hintHand.getComponent(W))||t.setAnchorPoint(.15,.9))}},{key:"runHandHintAnimation",value:function value(e){var t=this;if(this.hintHand){for(var n=q(this.hintHand),i=[],a=1;a<e.length;a++){var o=e[a-1],r=e[a];if(o&&r){var s=o.x-r.x,l=o.y-r.y,u=Math.sqrt(s*s+l*l),_$c=q(this.hintHand).to(u/250,{position:new te(r.x,r.y)});i.push(_$c)}}var h=q(this.hintHand).delay(.5).call(function(){var n=e[0];n&&t.hintHand&&t.hintHand.setPosition(n.x,n.y)});i.push(h),n.sequence.apply(n,i).repeatForever().start()}}},{key:"getIsHintShow",value:function value(){return this.isHintShown}},{key:"reset",value:function value(){this.isHintShown=!1,this.removeHintLine(),this.removeHintHand()}},{key:"createHintLine",value:function value(){if(this.hintLine)return this.hintLine;var _$e=new ie,t=_$e.addComponent(se);t.lineWidth=10,t.lineCap=se.LineCap.ROUND,t.lineJoin=se.LineJoin.ROUND;var n=new le;return le.fromHEX(n,"#fc03036d"),t.strokeColor=n,this.node.insertChild(_$e,0),_$e}},{key:"createHintHand",value:function value(e){if(this.hintHand)return this.hintHand;var t=new ie,n=e[0];return n&&(t.setPosition(n.x,n.y),this.hintHand=t,this.node.addChild(t)),t}},{key:"removeHintLine",value:function value(){this.hintLine&&(this.hintLine.getComponent(se).clear(),this.hintLine.destroyAllChildren(),this.hintLine.removeAllChildren(),this.hintLine.destroy(),this.hintLine=null)}},{key:"removeHintHand",value:function value(){this.hintHand&&(this.hintHand.destroyAllChildren(),this.hintHand.removeAllChildren(),this.hintHand.destroy(),this.hintHand=null)}}]),c}(U))||em;x._RF.pop(),x._RF.push({},"33281kEO4dMXLCvmfkrwqQM","CollisionDetectLine",void 0);var cm,hm,pm,dm,vm,ym,fm,mm,gm,bm,Sm=F.ccclass,km=F.property,wm=(am=Sm("CollisionDetectLine"),om=km(se),am((lm=u((sm=function(e){i(n,e);var t=a(n);function n(){var _$e;o(this,n);for(var i=arguments.length,a=Array(i),r=0;r<i;r++)a[r]=arguments[r];return _$e=t.call.apply(t,[this].concat(a)),c(_$e,"graphic",lm,h(_$e)),_$e}return r(n,[{key:"onLoad",value:function value(){this.graphic=this.getComponent(se),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function value(){xt.lazyValidateProperties(this)}},{key:"drawFromTo",value:function value(e,t){this.graphic.clear(),this.graphic.moveTo(e.x,e.y),this.graphic.lineTo(t.x,t.y),this.graphic.stroke()}}]),n}(pp)).prototype,"graphic",[om],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),sm))||sm);x._RF.pop(),x._RF.push({},"00eeawrUitLxLgSANaGHhcv","LineDrawer",void 0);var Cm=F.ccclass,Em=F.property,Am=F.executionOrder,Tm=(cm=Cm("LineDrawer"),hm=Am(3),pm=Em(Le),dm=Em(Le),vm=Em(M),cm(ym=hm((mm=u((fm=function(e){i(n,e);var t=a(n);function n(){var _$e;o(this,n);for(var i=arguments.length,a=Array(i),r=0;r<i;r++)a[r]=arguments[r];return _$e=t.call.apply(t,[this].concat(a)),c(_$e,"linePrefab",mm,h(_$e)),c(_$e,"collisionDetectLinePrefab",gm,h(_$e)),c(_$e,"minDistance",bm,h(_$e)),_$e.lastUIPos=null,_$e.currentLine=null,_$e.collisionDetectLine=null,_$e.isColliding=!1,_$e}return r(n,[{key:"beginDraw",value:function value(e){this.createLine(),this.createCollisionDetectLine(),this.initLine(),this.lastUIPos=null,this.isColliding=!1,this.draw(e)}},{key:"createLine",value:function value(){var _$e=Pe(this.linePrefab);_instanceof(_$e,ie)&&(_$e.name=qh.DRAW_LINE,_$e.getComponent(se)&&(this.node.addChild(_$e),this.currentLine=_$e))}},{key:"createCollisionDetectLine",value:function value(){if(this.currentLine){var _$e=Pe(this.collisionDetectLinePrefab);if(_instanceof(_$e,ie)){var t=_$e.getComponent(se);if(t){var _$n=this.currentLine.getComponent(se);if(_$n){var i=_$n.lineWidth,a=_$n.strokeColor;t.strokeColor=new le(a.r,a.g,a.b,128),t.lineWidth=i,this.node.addChild(_$e),this.collisionDetectLine=_$e}}}}}},{key:"initLine",value:function value(){var _$e,t=null==(_$e=this.currentLine)?void 0:_$e.getComponent(gd);t&&(t.sleep(),t.init())}},{key:"draw",value:function value(e){var t,_$n,i=this;if(e&&this.currentLine&&this.collisionDetectLine){var a=this.currentLine.getComponent(gd);if(a){var o=this.collisionDetectLine.getComponent(wm);if(o){var r=new te;null==(t=this.node.parent)||t.inverseTransformPoint(r,new te(e.x,e.y));var s=new ye(r.x,r.y);if(this.isPointOverlapWithMap(e)){if(this.lastUIPos){var l=this.lastUIPos,u=l.x,c=l.y;this.node.inverseTransformPoint(r,new te(u,c));var h=new ye(r.x,r.y);if(this.isColliding)o.drawFromTo(h,s);else{var p,d=this.isCurrentLineOverlapWithMap(e,this.lastUIPos);if(d.sort(function(e,t){return null==i.lastUIPos?0:ye.distance(e.point,i.lastUIPos)-ye.distance(t.point,i.lastUIPos)}),!(null==(p=d[0])?void 0:p.point))return;this.isColliding=!0}}}else if(this.lastUIPos&&this.isCurrentLineOverlapWithMap(e,this.lastUIPos).length>0){var v=this.lastUIPos,y=v.x,f=v.y;this.node.inverseTransformPoint(r,new te(y,f));var m=new ye(r.x,r.y);o.drawFromTo(m,s)}else{if(!this.lastUIPos){this.lastUIPos=e.clone();var g=s.x,b=s.y;a.storePoints(g,b)}var S=this.lastUIPos,k=S.x,w=S.y;null==(_$n=this.node.parent)||_$n.inverseTransformPoint(r,new te(k,w));var C=new ye(r.x,r.y),E=C.x,A=C.y,T=s.x,R=s.y,L=E-T,P=A-R;if(!(L*L+P*P<this.minDistance*this.minDistance)){var _=Math.sqrt(L*L+P*P);this.lastUIPos=e.clone(),a.drawTo(E,A,T,R),a.storePoints(T,R);var B=this.collisionDetectLine.getComponent(se);return null==B||B.clear(),this.isColliding=!1,_}}}}}}},{key:"isPointOverlapWithMap",value:function value(e){return this.getCollision(e).length>0}},{key:"isCurrentLineOverlapWithMap",value:function value(e,t){var _$n=this.getParallelLines(t,e,2),i=_$n.leftLine,a=_$n.rightLine,o=xe.instance.raycast(t,e,Ne.All).filter(function(e){return!e.collider.sensor}).filter(function(e){var _$t;return"rope"!==(null==(_$t=e.collider.node.parent)?void 0:_$t.name)}),r=xe.instance.raycast(i.p1,i.p2,Ne.All).filter(function(e){return!e.collider.sensor}).filter(function(e){var _$t;return"rope"!==(null==(_$t=e.collider.node.parent)?void 0:_$t.name)}),s=xe.instance.raycast(a.p1,a.p2,Ne.All).filter(function(e){return!e.collider.sensor}).filter(function(e){var _$t;return"rope"!==(null==(_$t=e.collider.node.parent)?void 0:_$t.name)});return[].concat(A(o),A(r),A(s))}},{key:"endDraw",value:function value(){if(this.currentLine&&this.collisionDetectLine){var _$e=this.currentLine.getComponent(gd);if(_$e){_$e.addPhysics(),_$e.wake();var t=this.collisionDetectLine.getComponent(se);t?(t.clear(),this.lastUIPos=null,this.isColliding=!1,this.currentLine=null):console.warn("Graphics component not found")}else console.warn("Line component not found")}}},{key:"deActivePhysics",value:function value(){var _$e,t=null==(_$e=this.currentLine)?void 0:_$e.getComponent(gd);t&&(t.deActiveColliders(),t.sleep())}},{key:"clearLines",value:function value(){this.node.destroyAllChildren(),this.node.removeAllChildren()}},{key:"getParallelLines",value:function value(e,t,n){var i=t.x-e.x,a=t.y-e.y,o=de.Vec2.distance(e,t),r=i/o,s=a/o,l=new ye(e.x-s*n,e.y+r*n),u=new ye(e.x+s*n,e.y-r*n);return{leftLine:{p1:l,p2:new ye(l.x+i,l.y+a)},rightLine:{p1:u,p2:new ye(u.x+i,u.y+a)}}}},{key:"getCollision",value:function value(e){return xe.instance.testAABB(new de.Rect(e.x-2,e.y-2,4,4)).filter(function(e){return!e.sensor}).filter(function(e){var t;return"rope"!==(null==(t=e.node.parent)?void 0:t.name)}).filter(function(t){if(_instanceof(t,De)){var _$n=new te;return t.node.inverseTransformPoint(_$n,new te(e.x,e.y)),Fe.polygonCircle(t.points,new ye(_$n.x,_$n.y),2)}if(_instanceof(t,_e)){var i=t.node.getWorldPosition(),a=i.x,o=i.y;return Fe.circleCircle(new ye(a,o+t.worldPosition.y),t.radius,new ye(e.x,e.y),2)}return!t.sensor})}}]),n}(U)).prototype,"linePrefab",[pm],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return null}}),gm=u(fm.prototype,"collisionDetectLinePrefab",[dm],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return null}}),bm=u(fm.prototype,"minDistance",[vm],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return 10}}),ym=fm))||ym)||ym);x._RF.pop(),x._RF.push({},"463cfEelRVL4KYgc4n5FJNz","Map",void 0);var Rm,Lm=[{id:1,map:1,type:1},{id:2,map:2,type:1},{id:3,map:3,type:1},{id:4,map:8,type:1},{id:5,map:9,type:1},{id:6,map:16,type:1},{id:7,map:4,type:1},{id:8,map:7,type:1},{id:9,map:6,type:1},{id:10,map:18,type:1},{id:11,map:10,type:2},{id:12,map:11,type:2},{id:13,map:12,type:2},{id:14,map:13,type:2},{id:15,map:14,type:2},{id:16,map:15,type:2},{id:17,map:5,type:2},{id:18,map:17,type:2},{id:19,map:19,type:2},{id:20,map:20,type:2},{id:21,map:21,type:3},{id:22,map:22,type:3},{id:23,map:23,type:3},{id:24,map:24,type:3},{id:25,map:25,type:3},{id:26,map:26,type:3},{id:27,map:27,type:3},{id:28,map:28,type:3},{id:29,map:29,type:3},{id:30,map:30,type:3},{id:31,map:31,type:4},{id:32,map:32,type:4},{id:33,map:33,type:4},{id:34,map:34,type:4},{id:35,map:35,type:4},{id:36,map:36,type:4},{id:37,map:37,type:4},{id:38,map:38,type:4},{id:39,map:39,type:4},{id:40,map:40,type:4},{id:41,map:41,type:5},{id:42,map:42,type:5},{id:43,map:43,type:5},{id:44,map:44,type:5},{id:45,map:45,type:5},{id:46,map:46,type:5},{id:47,map:47,type:5},{id:48,map:48,type:5},{id:49,map:49,type:5},{id:50,map:50,type:5},{id:51,map:51,type:6},{id:52,map:52,type:6},{id:53,map:53,type:6},{id:54,map:54,type:6},{id:55,map:55,type:6},{id:56,map:56,type:6},{id:57,map:57,type:6},{id:58,map:58,type:6},{id:59,map:59,type:6},{id:60,map:60,type:6},{id:61,map:61,type:7},{id:62,map:62,type:7},{id:63,map:63,type:7},{id:64,map:64,type:7},{id:65,map:65,type:7},{id:66,map:66,type:7},{id:67,map:67,type:7},{id:68,map:68,type:7},{id:69,map:69,type:7},{id:70,map:70,type:7},{id:71,map:71,type:8},{id:72,map:72,type:8},{id:73,map:73,type:8},{id:74,map:74,type:8},{id:75,map:75,type:8},{id:76,map:76,type:8},{id:77,map:77,type:8},{id:78,map:78,type:8},{id:79,map:79,type:8},{id:80,map:80,type:8},{id:81,map:81,type:9},{id:82,map:82,type:9},{id:83,map:83,type:9},{id:84,map:84,type:9},{id:85,map:85,type:9},{id:86,map:86,type:9},{id:87,map:87,type:9},{id:88,map:88,type:9},{id:89,map:89,type:9},{id:90,map:90,type:9},{id:91,map:91,type:10},{id:92,map:92,type:10},{id:93,map:93,type:10},{id:94,map:94,type:10},{id:95,map:95,type:10},{id:96,map:96,type:10},{id:97,map:97,type:10},{id:98,map:98,type:10},{id:99,map:99,type:10},{id:100,map:100,type:10},{id:101,map:101,type:11},{id:102,map:102,type:11},{id:103,map:103,type:11},{id:104,map:104,type:11},{id:105,map:105,type:11},{id:106,map:106,type:11},{id:107,map:107,type:11},{id:108,map:108,type:11},{id:109,map:109,type:11},{id:110,map:110,type:11},{id:111,map:111,type:12},{id:112,map:112,type:12},{id:113,map:113,type:12},{id:114,map:114,type:12},{id:115,map:115,type:12},{id:116,map:116,type:12},{id:117,map:117,type:12},{id:118,map:118,type:12},{id:119,map:119,type:12},{id:120,map:120,type:12},{id:121,map:121,type:13},{id:122,map:122,type:13},{id:123,map:123,type:13},{id:124,map:124,type:13},{id:125,map:125,type:13},{id:126,map:126,type:13},{id:127,map:127,type:13},{id:128,map:128,type:13},{id:129,map:129,type:13},{id:130,map:130,type:13},{id:131,map:131,type:14},{id:132,map:132,type:14},{id:133,map:133,type:14},{id:134,map:134,type:14},{id:135,map:135,type:14},{id:136,map:136,type:14},{id:137,map:137,type:14},{id:138,map:138,type:14},{id:139,map:139,type:14},{id:140,map:140,type:14},{id:141,map:141,type:15},{id:142,map:142,type:15},{id:143,map:143,type:15},{id:144,map:144,type:15},{id:145,map:145,type:15},{id:146,map:146,type:15},{id:147,map:147,type:15},{id:148,map:148,type:15},{id:149,map:149,type:15},{id:150,map:150,type:15},{id:151,map:184,type:16},{id:152,map:185,type:16},{id:153,map:186,type:16},{id:154,map:187,type:16},{id:155,map:188,type:16},{id:156,map:189,type:16},{id:157,map:190,type:16},{id:158,map:191,type:16},{id:159,map:192,type:16},{id:160,map:193,type:16},{id:161,map:194,type:17},{id:162,map:195,type:17},{id:163,map:196,type:17},{id:164,map:197,type:17},{id:165,map:198,type:17},{id:166,map:199,type:17},{id:167,map:200,type:17},{id:168,map:167,type:17},{id:169,map:168,type:17},{id:170,map:169,type:17},{id:171,map:170,type:18},{id:172,map:171,type:18},{id:173,map:172,type:18},{id:174,map:173,type:18},{id:175,map:174,type:18},{id:176,map:175,type:18},{id:177,map:176,type:18},{id:178,map:177,type:18},{id:179,map:178,type:18},{id:180,map:179,type:18},{id:181,map:180,type:19},{id:182,map:181,type:19},{id:183,map:182,type:19},{id:184,map:183,type:19},{id:185,map:151,type:19},{id:186,map:152,type:19},{id:187,map:153,type:19},{id:188,map:154,type:19},{id:189,map:155,type:19},{id:190,map:156,type:19},{id:191,map:157,type:20},{id:192,map:158,type:20},{id:193,map:159,type:20},{id:194,map:160,type:20},{id:195,map:161,type:20},{id:196,map:162,type:20},{id:197,map:163,type:20},{id:198,map:164,type:20},{id:199,map:165,type:20},{id:200,map:166,type:20},{id:201,map:201,type:21},{id:202,map:202,type:21},{id:203,map:203,type:21},{id:204,map:204,type:21},{id:205,map:205,type:21},{id:206,map:206,type:21},{id:207,map:207,type:21},{id:208,map:208,type:21},{id:209,map:209,type:21},{id:210,map:210,type:21},{id:211,map:211,type:22},{id:212,map:212,type:22},{id:213,map:213,type:22},{id:214,map:214,type:22},{id:215,map:215,type:22},{id:216,map:216,type:22},{id:217,map:217,type:22},{id:218,map:218,type:22},{id:219,map:219,type:22},{id:220,map:220,type:22},{id:221,map:221,type:23},{id:222,map:222,type:23},{id:223,map:223,type:23},{id:224,map:224,type:23},{id:225,map:225,type:23},{id:226,map:226,type:23},{id:227,map:227,type:23},{id:228,map:228,type:23},{id:229,map:229,type:23},{id:230,map:230,type:23},{id:231,map:231,type:24},{id:232,map:232,type:24},{id:233,map:233,type:24},{id:234,map:234,type:24},{id:235,map:235,type:24},{id:236,map:236,type:24},{id:237,map:237,type:24},{id:238,map:238,type:24},{id:239,map:239,type:24},{id:240,map:240,type:24},{id:241,map:241,type:25},{id:242,map:242,type:25},{id:243,map:243,type:25},{id:244,map:244,type:25},{id:245,map:245,type:25},{id:246,map:246,type:25},{id:247,map:247,type:25},{id:248,map:248,type:25},{id:249,map:249,type:25},{id:250,map:250,type:25},{id:251,map:251,type:26},{id:252,map:252,type:26},{id:253,map:253,type:26},{id:254,map:254,type:26},{id:255,map:255,type:26},{id:256,map:256,type:26},{id:257,map:257,type:26},{id:258,map:258,type:26},{id:259,map:259,type:26},{id:260,map:260,type:26},{id:261,map:261,type:27},{id:262,map:262,type:27},{id:263,map:263,type:27},{id:264,map:264,type:27},{id:265,map:265,type:27},{id:266,map:266,type:27},{id:267,map:267,type:27},{id:268,map:268,type:27},{id:269,map:269,type:27},{id:270,map:270,type:27},{id:271,map:271,type:28},{id:272,map:272,type:28},{id:273,map:273,type:28},{id:274,map:274,type:28},{id:275,map:275,type:28},{id:276,map:276,type:28},{id:277,map:277,type:28},{id:278,map:278,type:28},{id:279,map:279,type:28},{id:280,map:280,type:28},{id:281,map:281,type:29},{id:282,map:282,type:29},{id:283,map:283,type:29},{id:284,map:284,type:29},{id:285,map:285,type:29},{id:286,map:286,type:29},{id:287,map:287,type:29},{id:288,map:288,type:29},{id:289,map:289,type:29},{id:290,map:290,type:29},{id:291,map:291,type:30},{id:292,map:292,type:30},{id:293,map:293,type:30},{id:294,map:294,type:30},{id:295,map:295,type:30},{id:296,map:296,type:30},{id:297,map:297,type:30},{id:298,map:298,type:30},{id:299,map:299,type:30},{id:300,map:300,type:30},{id:301,map:301,type:31},{id:302,map:302,type:31},{id:303,map:303,type:31},{id:304,map:304,type:31},{id:305,map:305,type:31},{id:306,map:306,type:31},{id:307,map:307,type:31},{id:308,map:308,type:31},{id:309,map:309,type:31},{id:310,map:310,type:31},{id:311,map:311,type:32},{id:312,map:312,type:32},{id:313,map:313,type:32},{id:314,map:314,type:32},{id:315,map:315,type:32},{id:316,map:316,type:32},{id:317,map:317,type:32},{id:318,map:318,type:32},{id:319,map:319,type:32},{id:320,map:320,type:32},{id:321,map:321,type:33},{id:322,map:322,type:33},{id:323,map:323,type:33},{id:324,map:324,type:33},{id:325,map:325,type:33}];x._RF.pop(),x._RF.push({},"45df2RUUZZNhaXqOADOV0HC","MapLoader",void 0);var Pm,Om=(0,F.ccclass)("MapLoader")(Rm=function(e){i(u,e);var s,l=a(u);function u(){return o(this,u),l.apply(this,arguments)}return r(u,[{key:"paddingZero",value:function value(e,t){return Array(t-e.length).fill("0").join("")+e}},{key:"getMapByLevel",value:function value(e){var t=e;if(e>325){var n,i=vh.length;t=null!=(n=vh[(e-325)%i-1])?n:1}var a=Lm.find(function(e){return e.id===t});return console.log("Map:",t),a?a.map:1}},{key:"getMapJsonPath",value:function value(e){var t=this.getMapByLevel(e),n=this.paddingZero(t.toString(),3);return"".concat(ap.MAP_JSON_PREFIX).concat(n)}},{key:"preloadLevel",value:function value(e){var t=this.getMapJsonPath(e);p.preloadJson(t)}},{key:"loadLevel",value:(s=t(n().mark(function e(t,i){var a,o,r;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("Loading level:",a=this.getMapJsonPath(t)),e.next=5,p.loadJsonAsync(a);case 5:if(o=e.sent){e.next=8;break}throw Error("Failed to load JSON asset");case 8:null==i||i(null,o),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),r=_instanceof(e.t0,Error)?e.t0:Error(String(e.t0)),null==i||i(r,null);case 15:case"end":return e.stop()}},e,this,[[0,11]])})),function(e,t){return s.apply(this,arguments)})},{key:"isLevelAlreadyLoaded",value:function value(e){var t=this.getMapJsonPath(e);return!!p.getAsset(t,ze)}}]),u}(U))||Rm;x._RF.pop(),x._RF.push({},"8d3c7nuQGRNgpZcqAOCJY6O","InkCapacityController",void 0);var Im,xm=(0,F.ccclass)("InkCapacityController")(Pm=function(e){i(n,e);var t=a(n);function n(){var _$e;o(this,n);for(var i=arguments.length,a=Array(i),r=0;r<i;r++)a[r]=arguments[r];return(_$e=t.call.apply(t,[this].concat(a))).maxInkLevel=0,_$e.currentInkLevel=0,_$e}return r(n,[{key:"init",value:function value(e){var t=this.getDrawLength(e);this.maxInkLevel=t,this.currentInkLevel=t}},{key:"getCurrentInkLevel",value:function value(){return Math.floor(this.currentInkLevel)}},{key:"removeInkLevel",value:function value(e){var t=this.currentInkLevel-e;this.setInkLevel(t)}},{key:"setInkLevel",value:function value(e){this.currentInkLevel=e,this.currentInkLevel<0&&(this.currentInkLevel=0),this.currentInkLevel>this.maxInkLevel&&(this.currentInkLevel=this.maxInkLevel)}},{key:"isInkEmpty",value:function value(){return this.currentInkLevel<=0}},{key:"getInkLevelPercentage",value:function value(){return this.currentInkLevel/this.maxInkLevel*100}},{key:"getStarRating",value:function value(){var _$e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,t=this.maxInkLevel/_$e,_$n=Math.ceil(this.getCurrentInkLevel()/t);return 0===_$n?1:_$n}},{key:"getDrawLength",value:function value(e){for(var t=0,_$n=1;_$n<e.length;_$n++){var i=e[_$n-1],a=e[_$n],o=i.x-a.x,r=i.y-a.y;t+=Math.sqrt(o*o+r*r)}return 3*t}}]),n}(U))||Pm;x._RF.pop(),x._RF.push({},"014cbNey8JEV4aPhDm9R5W4","InputController",void 0);var Nm=(0,F.ccclass)("InputController")(Im=function(e){i(n,e);var t=a(n);function n(){var _$e;o(this,n);for(var i=arguments.length,a=Array(i),r=0;r<i;r++)a[r]=arguments[r];return(_$e=t.call.apply(t,[this].concat(a))).pointerDownOutSideCanvas=!1,_$e.handleElementPointerDown=function(){_$e.pointerDownOutSideCanvas=!0},_$e.handleElementPointerUp=function(t){_$e.onTouchEnd(),_$e.pointerDownOutSideCanvas=!1},_$e.onTouchStart=function(t){_$e.node.scene.emit(sr.GAME_START,{pointer:t})},_$e.onTouchMove=function(t){_$e.pointerDownOutSideCanvas?(_$e.node.scene.emit(sr.GAME_START,{pointer:t}),_$e.pointerDownOutSideCanvas=!1):_$e.node.scene.emit(sr.DRAWING,{pointer:t})},_$e.onTouchEnd=function(t){_$e.node.scene.emit(sr.BEE_ATTACK)},_$e}return r(n,[{key:"onLoad",value:function value(){this.listenInputEvents()}},{key:"listenInputEvents",value:function value(){ue.os!==ue.OS.WINDOWS&&ue.os!==ue.OS.OSX||(document.addEventListener("pointerup",this.handleElementPointerUp),document.addEventListener("pointerdown",this.handleElementPointerDown),this.node.on(ie.EventType.MOUSE_DOWN,this.onTouchStart),this.node.on(ie.EventType.MOUSE_MOVE,this.onTouchMove),this.node.on(ie.EventType.MOUSE_UP,this.onTouchEnd)),this.node.on(ie.EventType.TOUCH_START,this.onTouchStart),this.node.on(ie.EventType.TOUCH_MOVE,this.onTouchMove),this.node.on(ie.EventType.TOUCH_CANCEL,this.onTouchEnd),this.node.on(ie.EventType.TOUCH_END,this.onTouchEnd)}},{key:"onDestroy",value:function value(){ue.os===ue.OS.WINDOWS||ue.os===ue.OS.OSX?(document.removeEventListener("pointerup",this.handleElementPointerUp),document.removeEventListener("pointerdown",this.handleElementPointerDown),this.node.off(ie.EventType.MOUSE_DOWN,this.onTouchStart),this.node.off(ie.EventType.MOUSE_MOVE,this.onTouchMove),this.node.off(ie.EventType.MOUSE_UP,this.onTouchEnd)):(this.node.off(ie.EventType.TOUCH_START,this.onTouchStart),this.node.off(ie.EventType.TOUCH_MOVE,this.onTouchMove),this.node.off(ie.EventType.TOUCH_CANCEL,this.onTouchEnd),this.node.off(ie.EventType.TOUCH_END,this.onTouchEnd))}}]),n}(U))||Im;x._RF.pop(),x._RF.push({},"e6116mseMNPD6VcLUtkvez6","BaseState",void 0);var Fm=function(){function e(t){if(o(this,e),this.game=null,this.data={},this.game=t.node.getComponent(mk),!this.game)throw Error("Gameplay component not found");this.manager=t,this.updateStateData(),this.logDebug()}return r(e,[{key:"logDebug",value:function value(){var _$e=this.constructor.name;console.debug("[STATE] ".concat(_$e),this.data)}},{key:"updateStateData",value:function value(){if(this.game){var _$e=this.game.getGameData();_$e&&(this.data=_$e)}}},{key:"updateGameData",value:function value(e){var t;null==(t=this.game)||t.setGameData(e)}}]),e}();x._RF.pop(),x._RF.push({},"a79a7LT0s5BuZrk5mvYsyKr","AttackingState",void 0);var zm=function(e){i(n,e);var t=a(n);function n(e){var i;return o(this,n),(i=t.call(this,e)).stopHint(),i.stopDrawing(),i.wakeUpObjects(),i.spawnEnemies(),i.startCountdown(),k.turnDownMusic(),i}return r(n,[{key:"load",value:function value(){var _$e=this.manager.createLoadingState();this.manager.change(_$e)}},{key:"initialize",value:function value(){k.stopSound(Zn.BEE_FLYING);var _$e=this.manager.createInitializeState();this.manager.change(_$e)}},{key:"ready",value:function value(){}},{key:"draw",value:function value(){}},{key:"attack",value:function value(){}},{key:"escape",value:function value(){var _$e=this.manager.createEscapeState();this.manager.change(_$e)}},{key:"death",value:function value(){var _$e=this.manager.createDeathState();this.manager.change(_$e)}},{key:"finish",value:function value(){}},{key:"update",value:function value(){}},{key:"stopDrawing",value:function value(){var _$e;null==(_$e=this.game)||null==(_$e=_$e.lineDrawer)||_$e.endDraw()}},{key:"stopHint",value:function value(){var _$e;null==(_$e=this.game)||null==(_$e=_$e.hint)||_$e.hideHint()}},{key:"wakeUpObjects",value:function value(){var _$e;null==(_$e=this.game)||null==(_$e=_$e.gameObjects)||_$e.wakeUpObjects()}},{key:"spawnEnemies",value:function value(){this.game&&this.game.gameObjects&&(this.game.gameObjects.spawnBees(),this.game.gameObjects.reviveBigBees(),k.playSound(Zn.BEE_FLYING),k.playSound(Zn.END_DRAW))}},{key:"startCountdown",value:function value(){var _$e;null==(_$e=this.game)||_$e.uiManager.startCountdown()}}]),n}(Fm);x._RF.pop(),x._RF.push({},"17461foCjdJ276bG2jcxA06","DeathState",void 0);var Gm=codex.analytics,Mm=function(e){i(n,e);var t=a(n);function n(e){var i,a,r;return o(this,n),(r=t.call(this,e)).processCrazyGamesEvent(),r.disableUI(),k.stopAllSounds(),r.vibrateDevice(),r.pauseCountdown(),r.logLevelFailAnalytics(),null==(i=r.game)||i.scheduleOnce(function(){r.stopDogesLooking(),r.showUncompletedMark(),k.playSound(Zn.LEVEL_FAIL,{volume:.3})},.5),null==(a=r.game)||a.scheduleOnce(function(){r.sleepObjects(),r.showLoseScreen(),r.manager.finish()},1.8),r}return r(n,[{key:"processCrazyGamesEvent",value:function value(){"gameplayStop"in GameSDK.extra&&GameSDK.extra.gameplayStop()}},{key:"load",value:function value(){}},{key:"initialize",value:function value(){}},{key:"ready",value:function value(){}},{key:"draw",value:function value(){}},{key:"attack",value:function value(){}},{key:"escape",value:function value(){}},{key:"death",value:function value(){}},{key:"finish",value:function value(){var _$e=this.manager.createFinishState();this.manager.change(_$e)}},{key:"update",value:function value(){}},{key:"disableUI",value:function value(){var _$e,t;null==(_$e=this.game)||_$e.uiManager.disableUI(),null==(t=this.game)||t.hint.reset()}},{key:"sleepObjects",value:function value(){var _$e,t;null==(_$e=this.game)||null==(_$e=_$e.lineDrawer)||_$e.deActivePhysics(),null==(t=this.game)||null==(t=t.gameObjects)||t.sleepObjects()}},{key:"pauseCountdown",value:function value(){var _$e;null==(_$e=this.game)||_$e.uiManager.pauseCountdown()}},{key:"stopDogesLooking",value:function value(){var _$e;if(null!=(_$e=this.game)&&_$e.gameObjects){var t,_$n=this.game.gameObjects.getComponentsInChildren(Vy),i=l(_$n);try{for(i.s();!(t=i.n()).done;){var a,o=t.value;null==(a=o.eyes)||a.stopLook(),o.setEnable(!1)}}catch(e){i.e(e)}finally{i.f()}}}},{key:"vibrateDevice",value:function value(){var _$e;null==(_$e=ge("Vibrate"))||null==(_$e=_$e.getComponent(ph))||_$e.vibrate(500)}},{key:"showUncompletedMark",value:function value(){var _$e;null==(_$e=this.game)||_$e.uiManager.showUncompletedMark()}},{key:"showLoseScreen",value:function value(){var _$e=this.data.level;L.openScreen(P.LOSE_SCREEN,{level:_$e})}},{key:"logLevelFailAnalytics",value:function value(){if(this.game){var _$e=this.game.inkCapacityController;if(_$e){var t=this.data.level,_$n=void 0===t?0:t,i=_$e.getStarRating();console.info("logLevelFailAnalytics",_$n,i),Gm.levelFail(_$n,i,xh)}}}}]),n}(Fm);x._RF.pop(),x._RF.push({},"71778iMCmVDQKkpW1Ag0dZz","DrawingState",void 0);var Um=function(e){i(n,e);var t=a(n);function n(e){var i;return o(this,n),(i=t.call(this,e)).dist=0,i.isEmptyDraw=!1,i.initDrawer(),i}return r(n,[{key:"load",value:function value(){}},{key:"initialize",value:function value(){var _$e=this.manager.createInitializeState();this.manager.change(_$e)}},{key:"ready",value:function value(){var _$e=this.manager.createReadyState();this.manager.change(_$e)}},{key:"draw",value:function value(){}},{key:"attack",value:function value(){if(100===(null!=(_$e=null==(t=this.game)?void 0:t.inkCapacityController.getInkLevelPercentage())?_$e:0))return null==(_$n=this.game)||_$n.lineDrawer.endDraw(),void(this.isEmptyDraw=!0);var _$e,t,_$n,i=this.manager.createAttackingState();this.manager.change(i)}},{key:"escape",value:function value(){}},{key:"death",value:function value(){}},{key:"finish",value:function value(){}},{key:"update",value:function value(){var _$e;this.isInkEmpty()?null==(_$e=this.game)||_$e.node.scene.emit(sr.BEE_ATTACK):this.isEmptyDraw?this.manager.ready():(this.updateStateData(),this.drawLines(),this.updateInkLevel(),this.updateProgressBar())}},{key:"initDrawer",value:function value(){var _$e;if(null!=(_$e=this.game)&&_$e.lineDrawer){var t=this.data.pointer.getUILocation();this.game.lineDrawer.beginDraw(t),k.playSound(Zn.BUTTON_CLICK)}}},{key:"isInkEmpty",value:function value(){return!!this.game&&this.game.inkCapacityController.isInkEmpty()}},{key:"drawLines",value:function value(){var _$e,t;if(null!=(_$e=this.game)&&_$e.lineDrawer){var _$n=this.data.pointer.getUILocation();this.dist=null!=(t=this.game.lineDrawer.draw(_$n))?t:0,this.dist>0&&k.playSound(Zn.TOUCH_START,{volume:.8})}}},{key:"updateInkLevel",value:function value(){var _$e;null==(_$e=this.game)||_$e.inkCapacityController.removeInkLevel(this.dist)}},{key:"updateProgressBar",value:function value(){if(this.game){var _$e=this.game.inkCapacityController.getStarRating();this.game.uiManager.setProgressStars(_$e);var t=this.game.inkCapacityController.getInkLevelPercentage();this.game.uiManager.setProgressBarPercentage(t)}}}]),n}(Fm);x._RF.pop(),x._RF.push({},"d600e+7dHhGOYCGrcOjxVcl","EscapeState",void 0);var Hm=codex,jm=Hm.player,Wm=Hm.analytics,Vm=function(e){i(n,e);var t=a(n);function n(e){var i,a;return o(this,n),(a=t.call(this,e)).processCrazyGamesEvent(),a.disableUI(),a.stopAllSounds(),a.vibrateDevice(),a.makeDogesSmile(),a.pauseCountdown(),a.showCompletedMark(),a.updatePlayerProgress(),a.stopBeeBehavior(),a.logLevelCompleteAnalytics(),null==(i=a.game)||i.scheduleOnce(function(){a.sleepObjects(),a.showWiningScreen(),a.manager.finish()},.5),k.playSound(Zn.LEVEL_PASS),k.playSound(Zn.BEE_FLYING),a}return r(n,[{key:"processCrazyGamesEvent",value:function value(){"gameplayStop"in GameSDK.extra&&GameSDK.extra.gameplayStop()}},{key:"load",value:function value(){}},{key:"initialize",value:function value(){}},{key:"ready",value:function value(){}},{key:"draw",value:function value(){}},{key:"attack",value:function value(){}},{key:"escape",value:function value(){}},{key:"death",value:function value(){}},{key:"finish",value:function value(){var _$e=this.manager.createFinishState();this.manager.change(_$e)}},{key:"update",value:function value(){}},{key:"disableUI",value:function value(){var _$e,t;null==(_$e=this.game)||_$e.uiManager.disableUI(),null==(t=this.game)||t.hint.reset()}},{key:"stopBeeBehavior",value:function value(){var _$e;null==(_$e=this.game)||null==(_$e=_$e.gameObjects)||_$e.stopBeeBehavior()}},{key:"sleepObjects",value:function value(){var _$e,t;null==(_$e=this.game)||null==(_$e=_$e.lineDrawer)||_$e.deActivePhysics(),null==(t=this.game)||null==(t=t.gameObjects)||t.sleepObjects()}},{key:"stopAllSounds",value:function value(){k.stopAllSounds()}},{key:"makeDogesSmile",value:function value(){var _$e;if(null!=(_$e=this.game)&&_$e.gameObjects){var t,_$n=this.game.gameObjects.getComponentsInChildren(Vy),i=l(_$n);try{for(i.s();!(t=i.n()).done;){var a=t.value;a.smile(),a.setEnable(!1)}}catch(e){i.e(e)}finally{i.f()}}}},{key:"vibrateDevice",value:function value(){var _$e;null==(_$e=ge("Vibrate"))||null==(_$e=_$e.getComponent(ph))||_$e.vibrate(500)}},{key:"pauseCountdown",value:function value(){var _$e;null==(_$e=this.game)||_$e.uiManager.pauseCountdown()}},{key:"showCompletedMark",value:function value(){var _$e;null==(_$e=this.game)||_$e.uiManager.showCompletedMark()}},{key:"updatePlayerProgress",value:function value(){if(this.game){var _$e=this.data.level;if(_$e){var t=jm.getGameData();if(t){var _$n=d({},t);_$e<t.level&&(_$n.level=_$e+1),jm.setGameData(_$n)}}}}},{key:"showWiningScreen",value:function value(){if(this.game){var _$e=this.data.level,t=this.game.inkCapacityController.getStarRating();L.openScreen(P.WINNING_SCREEN,{level:_$e,stars:t})}}},{key:"logLevelCompleteAnalytics",value:function value(){if(this.game){var _$e=this.game.inkCapacityController;if(_$e){var t=this.data.level,_$n=void 0===t?0:t,i=_$e.getStarRating();console.info("logLevelCompleteAnalytics",_$n,i),Wm.levelComplete(_$n,i,xh)}}}}]),n}(Fm);x._RF.pop(),x._RF.push({},"0397cr2IpZEwbRzwQhlVHMO","MatchUtils",void 0);var $m=codex,qm=$m.match,Km=$m.player,Ym=$m.leaderboard,Jm=Ludex,Xm=Jm.Utils,Zm=Xm.Object,Qm=Xm.Valid,eg=Xm.String,tg=Xm.Array,ng=Jm.Match.Modes,ig=["Champion","Ultimate","Grand","Elite","Master's","Premier","Epic","Pro's","Supreme","Legendary","Victory","Prime","Titan's","Hero's","Star's"],ag=function(e){i(n,e);var t=a(n);function n(){return o(this,n),t.apply(this,arguments)}return r(n,[{key:"createTournamentPayload",value:function value(){return v(y(n.prototype),"createTournamentPayload",this).call(this)}}]),n}(function(){var i,a,s,l,u,c,h,p,d;function e(){var _$e,_$e1,i=this;o(this,e),this.processStartSingleModeAsync$=t(n().mark(function e(){var t;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=Km.getPlayerId(),e.abrupt("return",qm.single.start.processAsync({playerId:t}));case 2:case"end":return e.stop()}},e)})),this.processFinishSingleModeAsync$=t(n().mark(function e(){return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",qm.single.finish.processAsync());case 1:case"end":return e.stop()}},e)})),this.processStartTournamentModeAsync$=t(n().mark(function e(){var t,i;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=Km.getPlayerId(),i=GameSDK.context.getID(),e.abrupt("return",qm.tournament.continue.processAsync({playerId:t,contextId:i}));case 3:case"end":return e.stop()}},e)})),this.processFinishTournamentModeAsync$=t(n().mark(function e(){var t,i;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=Km.getPlayerId(),i=Km.getBestScore(),e.abrupt("return",qm.tournament.finish.processAsync({playerId:t,bestScore:i}));case 3:case"end":return e.stop()}},e)})),this.processStartChallengeModeAsync$=t(n().mark(function e(){return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",i.processContinueChallengeAsync$());case 4:if(e.prev=4,e.t0=e.catch(0),Zm.hasOwn(e.t0,"name")&&!Qm.isString(e.t0.name)){e.next=8;break}throw e.t0;case 8:if("PlayerHasFinishedMatch"!==e.t0.name){e.next=10;break}return e.abrupt("return",i.processChallengeNewOpponentAsync$());case 10:if("PlayerNotJoinInMatch"!==e.t0.name){e.next=12;break}return e.abrupt("return",i.processJoinChallengeAsync$());case 12:case"end":return e.stop()}},e,null,[[0,4]])})),this.processFinishChallengeModeAsync$=(_$e=t(n().mark(function e(t){return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",qm.challenge.finish.processAsync(t));case 1:case"end":return e.stop()}},e)})),function(t){return _$e.apply(this,arguments)}),this.processContinueChallengeAsync$=t(n().mark(function e(){var t,a,o,r,s,l;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=(t=i.getMatchState$()).id,r=(o=t.customData).playerId,s=o.opponentId,Qm.isString(a)){e.next=4;break}throw Error("Invalid match id");case 4:if(Qm.isString(r)){e.next=6;break}throw Error("Invalid player id");case 6:if(Qm.isString(s)){e.next=8;break}throw Error("Invalid opponent id");case 8:if(l=GameSDK.context.getID()){e.next=11;break}throw Error("Cannot get contextId");case 11:return e.abrupt("return",qm.challenge.continue.processAsync({matchId:a,contextId:l,playerId:r,opponentId:s}));case 12:case"end":return e.stop()}},e)})),this.processChallengeNewOpponentAsync$=t(n().mark(function e(){var t,i,a,o;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Math.floor(Math.random()*(t=Km.getConnectedPlayerIds(100,0)).length),a=Km.getPlayerId(),o=t[i],Qm.isString(o)&&!Qm.isEmpty(o)){e.next=6;break}throw Error("Invalid opponent id");case 6:return e.abrupt("return",qm.challenge.friend.processAsync({playerId:a,opponentId:o}));case 7:case"end":return e.stop()}},e)})),this.processJoinChallengeAsync$=t(n().mark(function e(){var t,a,o,r,s;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=(t=i.getMatchState$()).id,r=(o=t.customData).playerId,s=o.opponentId,Qm.isString(a)){e.next=4;break}throw Error("Invalid match id");case 4:if(Qm.isString(r)){e.next=6;break}throw Error("Invalid player id");case 6:if(Qm.isString(s)){e.next=8;break}throw Error("Invalid opponent id");case 8:return e.abrupt("return",qm.challenge.join.processAsync({matchId:a,playerId:r,opponentId:s}));case 9:case"end":return e.stop()}},e)})),this.processStartGameModeAsync$=(_$e1=t(n().mark(function e(t){var i;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=Km.getPlayerId(),e.abrupt("return",qm.strategy.start.processAsync({matchId:"123456",gameMode:t,playerId:i}));case 2:case"end":return e.stop()}},e)})),function(t){return _$e1.apply(this,arguments)}),this.processFinishGameModeAsync$=t(n().mark(function e(){return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",qm.strategy.finish.processAsync({postGlobalLeaderboard:!0,setPlayerBestScore:!0}));case 1:case"end":return e.stop()}},e)})),this.getMatchState$=function(){var _$e=qm.getMatchState();if(!_$e)throw Error("Match state not found");return _$e},this.createTournamentName=function(){var _$e=de.randomRangeInt(0,ig.length-1),t="".concat(ig[_$e]," Tournament"),n=eg.removeDiacritics(t);return"".concat(n)},this.getTournamentsAsync$=t(n().mark(function e(){return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,GameSDK.tournament.getTournamentsAsync();case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",[]);case 10:case"end":return e.stop()}},e,null,[[0,6]])}))}return r(e,[{key:"createTournamentPayload",value:function value(){var _$e,t,n=eg.generateObjectId(),i=Km.getPlayerId(),a=Km.getPlayer().name,o=this.getMatchState$().profiles;return{score:null!=(_$e=null==(t=(void 0===o?{}:o)[i])?void 0:t.score)?_$e:0,playerId:i,mode:ng.TOURNAMENT,name:this.createTournamentName(),leaderboardId:n,payload:{playerId:i,playerName:a,leaderboardId:n}}}}],[{key:"inst",get:function get(){return this.inst$||(this.inst$=new this),this.inst$}},{key:"startMatchAsync",value:(d=t(n().mark(function e(t){var i;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,e.t0=i=null!=t?t:this.getMatchMode(),e.next=e.t0===ng.SINGLE?5:e.t0===ng.TOURNAMENT?8:e.t0===ng.CHALLENGE_FRIEND?11:14;break;case 5:return e.next=7,this.inst.processStartSingleModeAsync$();case 7:case 10:case 13:return e.abrupt("break",21);case 8:return e.next=10,this.inst.processStartTournamentModeAsync$();case 11:return e.next=13,this.inst.processStartChallengeModeAsync$();case 14:if(!i){e.next=19;break}return e.next=17,this.inst.processStartGameModeAsync$(i);case 17:e.next=21;break;case 19:return e.next=21,this.inst.processStartSingleModeAsync$();case 21:e.next=26;break;case 23:e.prev=23,e.t1=e.catch(0),console.warn("startMatchAsync",e.t1);case 26:case"end":return e.stop()}},e,this,[[0,23]])})),function(e){return d.apply(this,arguments)})},{key:"setProfileMatchDataAsync",value:(p=t(n().mark(function e(t){return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,qm.handler.setProfileData(t);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.warn("setProfileMatchDataAsync",e.t0);case 8:case"end":return e.stop()}},e,null,[[0,5]])})),function(e){return p.apply(this,arguments)})},{key:"setMatchCustomDataAsync",value:(h=t(n().mark(function e(t){return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,qm.handler.setMatchCustomData(t);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.warn("setMatchCustomDataAsync",e.t0);case 8:case"end":return e.stop()}},e,null,[[0,5]])})),function(e){return h.apply(this,arguments)})},{key:"getMatchCustomDataAsync",value:(c=t(n().mark(function e(){return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,qm.handler.getMatchCustomData();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.warn("getMatchCustomDataAsync",e.t0);case 8:case"end":return e.stop()}},e,null,[[0,5]])})),function(){return c.apply(this,arguments)})},{key:"setLeaderboardScoreAsync",value:(u=t(n().mark(function e(t){return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,qm.handler.setLeaderboardScore(t);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.warn("setLeaderboardScoreAsync",e.t0);case 8:case"end":return e.stop()}},e,null,[[0,5]])})),function(e){return u.apply(this,arguments)})},{key:"finishMatchAsync",value:(l=t(n().mark(function e(t){var i;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,e.t0=i=this.getMatchMode(),e.next=e.t0===ng.SINGLE?5:e.t0===ng.TOURNAMENT?8:e.t0===ng.CHALLENGE_FRIEND?11:14;break;case 5:return e.next=7,this.inst.processFinishSingleModeAsync$();case 7:case 10:case 13:return e.abrupt("break",21);case 8:return e.next=10,this.inst.processFinishTournamentModeAsync$();case 11:return e.next=13,this.inst.processFinishChallengeModeAsync$(t);case 14:if(!i){e.next=19;break}return e.next=17,this.inst.processFinishGameModeAsync$();case 17:e.next=21;break;case 19:return e.next=21,this.inst.processFinishSingleModeAsync$();case 21:e.next=26;break;case 23:e.prev=23,e.t1=e.catch(0),console.warn("finishMatchAsync",e.t1);case 26:case"end":return e.stop()}},e,this,[[0,23]])})),function(e){return l.apply(this,arguments)})},{key:"joinTournamentAsync",value:(s=t(n().mark(function e(t){var i;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=Km.getPlayerId(),e.abrupt("return",qm.tournament.join.processAsync({tournamentId:t,playerId:i}));case 2:case"end":return e.stop()}},e)})),function(e){return s.apply(this,arguments)})},{key:"continueTournamentAsync",value:(a=t(n().mark(function e(t){var i;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=Km.getPlayerId(),e.abrupt("return",qm.tournament.continue.processAsync({playerId:i,contextId:t}));case 2:case"end":return e.stop()}},e)})),function(e){return a.apply(this,arguments)})},{key:"getMatchMode",value:function value(){var _$e=this.inst.getMatchState$();return Qm.isString(_$e.mode)?_$e.mode:null}},{key:"getMatchCustomData",value:function value(){var _$e=this.inst.getMatchState$();return Qm.isObject(_$e.customData)?_$e.customData:null}},{key:"updateMatchStateAfterLevelFinish",value:function value(e,t){this.setMatchCustomDataAsync({level:e,score:t});var n=Km.getPlayerId();this.setProfileMatchDataAsync({id:n,score:t})}},{key:"processCreateTournamentAsync",value:(i=t(n().mark(function e(){var t,i,a,o;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.inst.getTournamentsAsync$();case 2:if(t=e.sent,!(i=tg.search(t,function(e){var t=e.getPayload(),n=JSON.parse(Qm.isString(t)?t:"{}");return"DEFAULT"===e.getTournamentType()&&n.playerId===Km.getPlayerId()}))){e.next=6;break}throw new Wh(Km.getPlayerId(),i.getID());case 6:return a=this.inst.createTournamentPayload(),Km.setGameData({lastCreateTournamentShown:Date.now()}),e.next=10,qm.tournament.create.processAsync(a);case 10:o=a.leaderboardId,Ym.addLeaderboard({name:o,type:"tournament",autoSortRank:!0,leaderboardId:o});case 12:case"end":return e.stop()}},e,this)})),function(){return i.apply(this,arguments)})}]),e}());x._RF.pop(),x._RF.push({},"a9bc11SkV9L/5L+Y+fhswfJ","FinishState",void 0);var og=codex.player,rg=function(e){i(u,e);var s,l=a(u);function u(e){var t;return o(this,u),t=l.call(this,e),k.turnUpMusic(),k.stopSound(Zn.BEE_FLYING),t.finishGameAsync(),t}return r(u,[{key:"load",value:function value(){var _$e=this.manager.createLoadingState();this.manager.change(_$e)}},{key:"initialize",value:function value(){var _$e=this.manager.createInitializeState();this.manager.change(_$e)}},{key:"ready",value:function value(){}},{key:"draw",value:function value(){}},{key:"attack",value:function value(){}},{key:"escape",value:function value(){}},{key:"death",value:function value(){}},{key:"finish",value:function value(){}},{key:"update",value:function value(){}},{key:"finishGameAsync",value:(s=t(n().mark(function e(){var t,i,r,s;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.game){e.next=3;break}return e.abrupt("return");case 3:if(t=this.game.inkCapacityController){e.next=6;break}return e.abrupt("return");case 6:return r=1e3*(void 0===(i=this.data.level)?0:i)+100*t.getStarRating(),s=og.getBestScore(),"submitGameResultsAsync"in GameSDK.extra&&GameSDK.extra.submitGameResultsAsync(s),s<r&&og.setBestScore(r),e.next=14,ag.finishMatchAsync();case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),console.error("finishGameAsync",e.t0);case 19:case"end":return e.stop()}},e,this,[[0,16]])})),function(){return s.apply(this,arguments)})}]),u}(Fm);x._RF.pop(),x._RF.push({},"81384LH7iZM+pyqeb36L9t3","SwitchGameUtils",void 0);var sg="9p066934tllp",lg="bubble-pop-classic",ug=codex,cg=ug.player,hg=ug.analytics,pg=Ludex.Plugins.Analytics.Events,dg=function(){function e(){o(this,e),this.targetLevel=null}return r(e,null,[{key:"inst",get:function get(){return this._instance||(this._instance=new e),this._instance}},{key:"init",value:function value(){var _$e=this,t=this.inst;this.isNewPlayerFirstDay()?t.targetLevel=8:setTimeout(function(){_$e.assignTargetLevelForReturningUser()},12e4)}},{key:"handleSwitchGame",value:function value(){var _$e,t;"MsGames"===GameSDK.getSDKName()&&"switchGameAsync"in GameSDK.extra&&(this.isSwitchGameCalledToday()||null!==this.inst.targetLevel&&(null!=(_$e=null==(t=cg.getGameData())?void 0:t.level)?_$e:1)>=this.inst.targetLevel&&this.handleSwitchGameAsync())}},{key:"handleSwitchGameAsync",value:function value(){"MsGames"===GameSDK.getSDKName()&&"switchGameAsync"in GameSDK.extra&&(cg.setPlayerDataByName("lastCallSwitchGame",Date.now()),hg.event(pg.SWITCH_GAME_POPUP,{target_game_id:sg,target_game_name:lg}),GameSDK.extra.switchGameAsync(sg).catch(function(e){hg.event("switch_game_popup_cancel",{target_game_id:sg,target_game_name:lg})}))}},{key:"isSwitchGameCalledToday",value:function value(){var _$e,t=null!=(_$e=cg.getPlayerDataByKey("lastCallSwitchGame"))?_$e:0;return this.isSameDay(t)}},{key:"isNewPlayerFirstDay",value:function value(){var _$e,t=cg.getGameData(),n=null!=(_$e=null==t?void 0:t.firstLoginTime)?_$e:0;if(0===n){if(1===(null!=(i=null==t?void 0:t.level)?i:1))return cg.setGameData({firstLoginTime:Date.now()}),!0;var i,a=Date.now()-864e5;return cg.setGameData({firstLoginTime:a}),!1}return this.isSameDay(n)}},{key:"isSameDay",value:function value(e){var t=new Date,n=new Date(e),i=t.getDate()===n.getDate(),a=t.getMonth()===n.getMonth(),o=t.getFullYear()===n.getFullYear();return i&&a&&o}},{key:"assignTargetLevelForReturningUser",value:function value(){var _$e,t=cg.getGameData(),n=null!=(_$e=null==t?void 0:t.level)?_$e:1;this.inst.targetLevel=n+1}}]),e}();x._RF.pop(),x._RF.push({},"37a5cRy3ANBGpVlH3wyS3Ra","InitializeState",void 0);var vg=codex.analytics,yg=function(e){i(c,e);var s,l,u=a(c);function c(e){var t;return o(this,c),t=u.call(this,e),"CrazyGames"===GameSDK.getSDKName()&&t.processCrazyGamesRequirements(),t.enableUI(),t.disableHintButtonForEarlyLevels(),t.clearHint(),t.clearGameObjects(),t.createGameObjects(),t.initInkCapacity(),t.initCountdown(),t.updateHeader(),t.showTutorialUI(),k.playMusic(Zn.BG_MUSIC),dg.handleSwitchGame(),t.startGameAsync().then(function(){t.closeLoadingScreen(),t.manager.ready(),t.logLevelStartAnalytics()}),t}return r(c,[{key:"processCrazyGamesRequirements",value:function value(){"gameplayStart"in GameSDK.extra&&GameSDK.extra.gameplayStart(),this.showInterAdsCrazyGames()}},{key:"disableHintButtonForEarlyLevels",value:function value(){if(this.game){var _$e=this.data.level;_$e&&_$e<=3&&this.game.uiManager.disableHintButton()}}},{key:"showInterAdsCrazyGames",value:(l=t(n().mark(function e(){return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.game){e.next=2;break}return e.abrupt("return");case 2:return k.stopAllSounds(),e.next=5,E.showInterstitialAdAsync({forLevel:this.data.level,includeSDK:["CrazyGames"]});case 5:e.sent&&this.game.disableRewardAdsItemForCrazyGames(),k.turnUpMusic();case 8:case"end":return e.stop()}},e,this)})),function(){return l.apply(this,arguments)})},{key:"load",value:function value(){if(Ludex.Utils.Valid.isDebugger()){var _$e=this.manager.createLoadingState();this.manager.change(_$e)}}},{key:"initialize",value:function value(){}},{key:"ready",value:function value(){var _$e=this.manager.createReadyState();this.manager.change(_$e)}},{key:"draw",value:function value(){}},{key:"attack",value:function value(){}},{key:"escape",value:function value(){var _$e=this.manager.createEscapeState();this.manager.change(_$e)}},{key:"death",value:function value(){var _$e=this.manager.createDeathState();this.manager.change(_$e)}},{key:"finish",value:function value(){}},{key:"update",value:function value(){}},{key:"closeLoadingScreen",value:function value(){L.closeScreen(P.LOADING_SCREEN)}},{key:"enableUI",value:function value(){var _$e;null==(_$e=this.game)||_$e.uiManager.enableUI()}},{key:"clearHint",value:function value(){var _$e;null==(_$e=this.game)||null==(_$e=_$e.hint)||_$e.reset()}},{key:"clearGameObjects",value:function value(){var _$e,t;null!=(_$e=this.game)&&_$e.lineDrawer&&null!=(t=this.game)&&t.gameObjects&&(this.game.lineDrawer.clearLines(),this.game.gameObjects.clearObjects())}},{key:"createGameObjects",value:function value(){var _$e,t=this.data.levelData;t&&(null==(_$e=this.game)||null==(_$e=_$e.gameObjects)||_$e.spawnObjects(t))}},{key:"initInkCapacity",value:function value(){if(this.game){var _$e=this.data.levelData;if(_$e){var t=this.game.inkCapacityController,n=_$e.lnk;t.init(void 0===n?[]:n)}}}},{key:"initCountdown",value:function value(){var _$e;null==(_$e=this.game)||_$e.uiManager.initCountdown()}},{key:"updateHeader",value:function value(){var _$e;if(null!=(_$e=this.game)&&_$e.hint){var t=this.game.inkCapacityController.getStarRating();this.game.uiManager.setProgressStars(t);var n=this.game.inkCapacityController.getInkLevelPercentage();this.game.uiManager.setProgressBarPercentage(n),this.game.hint.getIsHintShow()||this.game.uiManager.startCountDownHeaderHintBubbleAnim()}}},{key:"showTutorialUI",value:function value(){var _$e,t;if(this.game){var n=this.data,i=n.level,a=n.levelData;if(i&&a&&!(i>3)&&null!=(_$e=this.game)&&_$e.hint&&null!=(t=this.game)&&t.uiManager){var o=a.tips,r=Qf.transformPointsFromMapToDrawAreaCoordinate(o);this.game.hint.showHint(r,!0),this.game.uiManager.stopCountDownHeaderHintBubbleAnim()}}}},{key:"startGameAsync",value:(s=t(n().mark(function e(){return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!this.data.isFromLoader){e.next=4;break}return this.updateGameData({isFromLoader:!1}),e.abrupt("return");case 4:return e.next=6,ag.startMatchAsync();case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("startGameAsync",e.t0);case 11:case"end":return e.stop()}},e,this,[[0,8]])})),function(){return s.apply(this,arguments)})},{key:"logLevelStartAnalytics",value:function value(){if(this.game){var _$e=this.data.level,n=this.game.inkCapacityController.getStarRating();vg.levelStart(void 0===_$e?0:_$e,n)}}}]),c}(Fm);x._RF.pop(),x._RF.push({},"f98e6wIKqZGv7aAVsWH1sS+","MapUtils",void 0);var bg=function(){function e(){o(this,e)}return r(e,null,[{key:"inst",get:function get(){return this._instance||(this._instance=new e),this._instance}},{key:"isMapFlippedHorizontally",value:function value(e){var t=e-325;return!(t<=0)&&Math.floor(t/vh.length)%2==0}},{key:"getTransformedMapPoints",value:function value(e){return e.map(function(e){var t=e.data,n=e.connect;if(t&&void 0!==t.a&&(t.a*=-1),n){var i=n.point,a=n.data;a&&void 0!==a.a&&(a.a*=-1),Array.isArray(i)?n.point=Qf.getTransformedPolygon(i):n.point=Qf.getTransformedPoint(i)}if(Array.isArray(e.point)){var o=e.id===tp.WOOD||e.id===tp.COLLIDER?Qf.getTransformedDoublePolygon(e.point):Qf.getTransformedPolygon(e.point);return d(d({},e),{},{point:o})}var r=e.point;return d(d({},e),{},{point:Qf.getTransformedPoint(r)})})}},{key:"getTransformedTips",value:function value(e){return e.map(function(e){return Qf.getTransformedPoint(e)})}},{key:"revertTransformedMapPoints",value:function value(e){return e.map(function(e){if(e.connect){var t=e.connect.point;Array.isArray(t)?e.connect.point=Qf.revertTransformedPolygon(t):e.connect.point=Qf.revertTransformedPoint(t)}if(Array.isArray(e.point)){var n=e.id===tp.WOOD||e.id===tp.COLLIDER?Qf.revertTransformedDoublePolygon(e.point):Qf.revertTransformedPolygon(e.point);return d(d({},e),{},{point:n})}var i=e.point;return d(d({},e),{},{point:Qf.revertTransformedPoint(i)})})}},{key:"revertTransformedTips",value:function value(e){return e.map(function(e){return Qf.revertTransformedPoint(e)})}},{key:"flipMapDataHorizontally",value:function value(t){var n=t.map,i=t.tips,a=t.lnk,o=1/0,r=-1/0,s=[],l=e.getTransformedMapPoints(n),u=e.getTransformedTips(i);return l.forEach(function(e){Array.isArray(e.point)?e.point.forEach(function(e){s.push(e)}):s.push(e.point)}),u.forEach(function(e){s.push(e)}),s.forEach(function(e){e.x<o&&(o=e.x),e.x>r&&(r=e.x)}),l.forEach(function(e){Array.isArray(e.point)?e.point.forEach(function(e){e.x=e.x-2*(e.x-375)}):e.point.x=e.point.x-2*(e.point.x-375),e.connect&&(Array.isArray(e.connect.point)?e.connect.point.forEach(function(e){e.x=e.x-2*(e.x-375)}):e.connect.point.x=e.connect.point.x-2*(e.connect.point.x-375))}),u.forEach(function(e){e.x=e.x-2*(e.x-375)}),a.forEach(function(e){e.x=e.x-2*(e.x-375)}),{map:e.revertTransformedMapPoints(l),tips:e.revertTransformedTips(u),lnk:a}}}]),e}();x._RF.pop(),x._RF.push({},"a8496IbdA1EnY7sv4ApuaJW","LoadingState",void 0);var Sg=function(e){i(n,e);var t=a(n);function n(e){var i;return o(this,n),(i=t.call(this,e)).handleMapLoaded=function(e,t){if(!e&&t){var _$n,a,o=i.data.level,r=t.json;if(bg.isMapFlippedHorizontally(null!=o?o:1)){var l=bg.flipMapDataHorizontally(r);i.updateGameData({levelData:l})}else i.updateGameData({levelData:r});o&&(null==(_$n=i.game)||null==(_$n=_$n.gameMap)||_$n.preloadLevel(o+1)),i.loadingScreenFlag?null==(a=i.game)||a.scheduleOnce(function(){i.initialize()},.5):i.initialize()}else console.error("Failed to load level",e)},i.loadingScreenFlag=!i.isLevelAlreadyLoaded(),i.loadingScreenFlag&&L.showLoadingScreen(),i.stopHint(),i.loadGameMap(),i.updateLevelText(),i}return r(n,[{key:"load",value:function value(){}},{key:"initialize",value:function value(){var _$e=this.manager.createInitializeState();this.manager.change(_$e)}},{key:"ready",value:function value(){}},{key:"draw",value:function value(){}},{key:"attack",value:function value(){}},{key:"escape",value:function value(){}},{key:"death",value:function value(){}},{key:"finish",value:function value(){}},{key:"update",value:function value(){}},{key:"isLevelAlreadyLoaded",value:function value(){var _$e,t,_$n=this.data.level;if(!_$n)throw Error("Level is not defined");return null!=(_$e=null==(t=this.game)||null==(t=t.gameMap)?void 0:t.isLevelAlreadyLoaded(_$n))&&_$e}},{key:"stopHint",value:function value(){var _$e;null==(_$e=this.game)||null==(_$e=_$e.hint)||_$e.hideHint()}},{key:"loadGameMap",value:function value(){var _$e,t=this.data.level;if(!t)throw Error("Level is not defined");null==(_$e=this.game)||null==(_$e=_$e.gameMap)||_$e.loadLevel(t,this.handleMapLoaded)}},{key:"updateLevelText",value:function value(){var _$e,t=this.data.level;t&&(null==(_$e=this.game)||_$e.uiManager.setLevelText(t))}}]),n}(Fm);x._RF.pop(),x._RF.push({},"5ef69tJ5eNNv7o22H/XfSD2","ReadyState",void 0);var kg,wg=function(e){i(n,e);var t=a(n);function n(){return o(this,n),t.apply(this,arguments)}return r(n,[{key:"load",value:function value(){if(Ludex.Utils.Valid.isDebugger()){var _$e=this.manager.createLoadingState();this.manager.change(_$e)}}},{key:"initialize",value:function value(){}},{key:"ready",value:function value(){}},{key:"draw",value:function value(){var _$e=this.manager.createDrawingState();this.manager.change(_$e)}},{key:"attack",value:function value(){}},{key:"escape",value:function value(){var _$e=this.manager.createEscapeState();this.manager.change(_$e)}},{key:"death",value:function value(){if(Ludex.Utils.Valid.isDebugger()){var _$e=this.manager.createDeathState();this.manager.change(_$e)}}},{key:"finish",value:function value(){}},{key:"update",value:function value(){}}]),n}(Fm);x._RF.pop(),x._RF.push({},"bb0e3beWSxOOLCv7gjyg2s0","StateManager",void 0);var Cg,Eg,Ag,Tg,Rg,Lg,Pg,_g,Bg,Dg,Og,Ig,xg,Ng,Fg,zg=(0,F.ccclass)("StateManager")(kg=function(e){i(n,e);var t=a(n);function n(){return o(this,n),t.apply(this,arguments)}return r(n,[{key:"init",value:function value(){this.state=new Sg(this)}},{key:"change",value:function value(e){this.state=e}},{key:"load",value:function value(){this.state&&this.state.load()}},{key:"initialize",value:function value(){this.state&&this.state.initialize()}},{key:"isInitialize",value:function value(){return _instanceof(this.state,yg)}},{key:"ready",value:function value(){this.state&&this.state.ready()}},{key:"isReady",value:function value(){return _instanceof(this.state,wg)}},{key:"draw",value:function value(){this.state&&this.state.draw()}},{key:"isDrawing",value:function value(){return _instanceof(this.state,Um)}},{key:"attack",value:function value(){this.state&&this.state.attack()}},{key:"isAttacking",value:function value(){return _instanceof(this.state,zm)}},{key:"escape",value:function value(){this.state&&this.state.escape()}},{key:"isSurviving",value:function value(){return _instanceof(this.state,Vm)}},{key:"death",value:function value(){this.state&&this.state.death()}},{key:"isFailed",value:function value(){return _instanceof(this.state,Mm)}},{key:"finish",value:function value(){this.state&&this.state.finish()}},{key:"isFinished",value:function value(){return _instanceof(this.state,rg)}},{key:"update",value:function value(e){this.state&&this.state.update(e)}},{key:"createInitializeState",value:function value(){return new yg(this)}},{key:"createLoadingState",value:function value(){return new Sg(this)}},{key:"createReadyState",value:function value(){return new wg(this)}},{key:"createDrawingState",value:function value(){return new Um(this)}},{key:"createAttackingState",value:function value(){return new zm(this)}},{key:"createEscapeState",value:function value(){return new Vm(this)}},{key:"createDeathState",value:function value(){return new Mm(this)}},{key:"createFinishState",value:function value(){return new rg(this)}}]),n}(U))||kg;x._RF.pop(),x._RF.push({},"9e40aEq56tMKLFoeACyl+eH","Clock",void 0);var Gg,Mg,Ug,Hg,jg,Wg,Vg,$g,qg=F.ccclass,Kg=F.disallowMultiple,Yg=F.property,Jg=(Cg=qg("Clock"),Eg=Yg(oe),Ag=Yg(ie),Tg=Yg(Y),Rg=Yg(ie),Lg=Yg(ie),Pg=Yg(z),Cg(_g=Kg((Dg=u((Bg=function(e){i(n,e);var t=a(n);function n(){var _$e;o(this,n);for(var i=arguments.length,a=Array(i),r=0;r<i;r++)a[r]=arguments[r];return _$e=t.call.apply(t,[this].concat(a)),c(_$e,"timeText",Dg,h(_$e)),c(_$e,"clockContainer",Og,h(_$e)),c(_$e,"clockFill",Ig,h(_$e)),c(_$e,"successIcon",xg,h(_$e)),c(_$e,"failIcon",Ng,h(_$e)),c(_$e,"animation",Fg,h(_$e)),_$e.time=0,_$e.remaining=0,_$e.running=!1,_$e.timeShake=0,_$e.remainingToShake=0,_$e.handleUpdateConfig=function(t){_$e.enabled&&_$e.setTime(t.WaitForPassSecs)},_$e}return r(n,[{key:"__preload",value:function value(){this.listenEvents()}},{key:"start",value:function value(){this.init(),this.setTime(6),this.setTimeToShake(1)}},{key:"init",value:function value(){this.remaining=0,this.running=!1,this.node.active=!1}},{key:"listenEvents",value:function value(){this.node.scene.on(m.GAMEPLAY_UPDATE_CONFIG,this.handleUpdateConfig)}},{key:"setTime",value:function value(e){this.time=e,this.timeText.string=Math.ceil(e).toString()}},{key:"setTimeToShake",value:function value(e){this.timeShake=e,this.remainingToShake=0}},{key:"startCountdown",value:function value(){this.running=!0,this.remaining=this.time,this.remainingToShake=this.timeShake,this.node.active=!0,this.failIcon.active=!1,this.successIcon.active=!1}},{key:"pause",value:function value(){this.running=!1}},{key:"resume",value:function value(){this.running=!0}},{key:"showUncompletedMark",value:function value(){this.failIcon.active=!0,q(this.failIcon).set({scale:new te(0,0,1)}).to(.5,{scale:new te(1,1,1)},{easing:"smooth"}).start()}},{key:"showCompletedMark",value:function value(){this.successIcon.active=!0,q(this.successIcon).set({scale:new te(0,0,1)}).to(.5,{scale:new te(1,1,1)},{easing:"smooth"}).start()}},{key:"endCountDown",value:function value(){this.running=!1,this.node.scene.emit(sr.TIME_OUT)}},{key:"update",value:function value(e){this.running&&(this.remaining<=0?this.endCountDown():(this.remainingToShake<=0&&(this.playShakeAnimation(),this.remainingToShake=this.timeShake),this.remaining-=e,this.remainingToShake-=e,this.updateLabel(),this.clockFill.fillRange=this.remaining/this.time))}},{key:"updateLabel",value:function value(){var _$e=Math.ceil(this.remaining).toString();this.timeText.string=_$e}},{key:"playShakeAnimation",value:function value(){var _$e="Shake";this.animation.clips.some(function(t){return!(!t||t.name!==_$e)})?this.animation.play(_$e):console.warn("SettingsScreen: clip not found")}}]),n}(U)).prototype,"timeText",[Eg],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Og=u(Bg.prototype,"clockContainer",[Ag],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ig=u(Bg.prototype,"clockFill",[Tg],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xg=u(Bg.prototype,"successIcon",[Rg],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ng=u(Bg.prototype,"failIcon",[Lg],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Fg=u(Bg.prototype,"animation",[Pg],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_g=Bg))||_g)||_g);x._RF.pop(),x._RF.push({},"7c115t9HKlH6ZfnhCnLAnpe","Star",void 0);var Xg,Zg,Qg,eb,tb,ib,ab,ob,rb,sb,lb=F.ccclass,ub=F.property,cb=F.requireComponent,hb=(Gg=lb("Star"),Mg=cb(z),Ug=ub(U),Hg=ub(z),Gg(jg=Mg((Vg=u((Wg=function(e){i(n,e);var t=a(n);function n(){var _$e;o(this,n);for(var i=arguments.length,a=Array(i),r=0;r<i;r++)a[r]=arguments[r];return _$e=t.call.apply(t,[this].concat(a)),c(_$e,"starAppearance",Vg,h(_$e)),c(_$e,"animation",$g,h(_$e)),_$e.isAppear=!1,_$e.initialPosition=new te,_$e}return r(n,[{key:"onLoad",value:function value(){this.initialPosition=this.node.position.clone(),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function value(){xt.lazyValidateProperties(this)}},{key:"resetPosition",value:function value(){this.node.setPosition(this.initialPosition)}},{key:"show",value:function value(){this.starAppearance.node.active=!0,this.isAppear=!0}},{key:"hide",value:function value(){this.starAppearance.node.active=!1,this.isAppear=!1}},{key:"playAnimation",value:function value(){this.animation.stop(),this.animation.clips.some(function(e){return!(!e||"UpAndDown"!==e.name)})?this.animation.play("UpAndDown"):console.warn("SettingsScreen: clip not found")}},{key:"stopAnimation",value:function value(){this.animation.stop()}}]),n}(U)).prototype,"starAppearance",[Ug],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$g=u(Wg.prototype,"animation",[Hg],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),jg=Wg))||jg)||jg);x._RF.pop(),x._RF.push({},"09f0bRvi+1OQZiIGBFqdNzq","LevelProgressBar",void 0);var pb,db,vb,yb,fb,mb,gb,bb,kb,wb,Cb,Eb,Ab,Tb,Rb,Lb,Pb=F.ccclass,_b=F.property,Bb=(Xg=Pb("LevelProgressBar"),Zg=_b(Ge),Qg=_b(hb),eb=_b(hb),tb=_b(hb),Xg((ab=u((ib=function(e){i(n,e);var t=a(n);function n(){var _$e;o(this,n);for(var i=arguments.length,a=Array(i),r=0;r<i;r++)a[r]=arguments[r];return _$e=t.call.apply(t,[this].concat(a)),c(_$e,"progressBar",ab,h(_$e)),c(_$e,"leftStar",ob,h(_$e)),c(_$e,"midStar",rb,h(_$e)),c(_$e,"rightStar",sb,h(_$e)),_$e.toProgress=1,_$e.progressStep=0,_$e}return r(n,[{key:"onLoad",value:function value(){this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function value(){xt.lazyValidateProperties(this)}},{key:"start",value:function value(){this.toProgress=1,this.progressStep=0,this.runStartsAnimation()}},{key:"update",value:function value(){var _$e=this.progressBar.getComponent(Y);_$e&&(this.progressBar.progress>=1?_$e.type=Y.Type.SIMPLE:_$e.type=Y.Type.TILED),this.progressBar.progress-this.progressStep<this.toProgress?this.progressBar.progress!==this.toProgress&&(this.progressBar.progress=this.toProgress):this.progressBar.progress-=this.progressStep}},{key:"runStartsAnimation",value:function value(){this.leftStar.isAppear&&this.midStar.isAppear&&this.rightStar.isAppear||(this.leftStar.show(),this.midStar.show(),this.rightStar.show(),this.runStarAnimation(this.leftStar),this.runStarAnimation(this.midStar),this.runStarAnimation(this.rightStar))}},{key:"runStarAnimation",value:function value(e){e.resetPosition(),e.playAnimation()}},{key:"stopStarAnimation",value:function value(e){e.isAppear&&(e.hide(),e.stopAnimation(),e.resetPosition(),k.playSound(Zn.LOST_STAR_IN_GAMEPLAY))}},{key:"setProgress",value:function value(e){this.toProgress=e/100,this.progressStep=(this.progressBar.progress-this.toProgress)/60*16}},{key:"setStars",value:function value(e){switch(e){case 1:this.stopStarAnimation(this.rightStar),this.stopStarAnimation(this.midStar);break;case 2:this.stopStarAnimation(this.rightStar);break;default:this.runStartsAnimation()}}},{key:"reset",value:function value(){this.progressBar.progress=1}}]),n}(U)).prototype,"progressBar",[Zg],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ob=u(ib.prototype,"leftStar",[Qg],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rb=u(ib.prototype,"midStar",[eb],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),sb=u(ib.prototype,"rightStar",[tb],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ib))||ib);x._RF.pop(),x._RF.push({},"61791zAr2tJR4p22EZ5QRfk","Header",void 0);var Db,Ob,Ib,xb,Nb,Fb,zb,Gb,Mb,Ub,Hb,jb,Wb,Vb,$b,qb,Kb,Yb,Jb,Xb,Zb,Qb,eS,tS,nS,iS,oS,rS,sS,lS,uS,cS,hS,pS,dS,vS,yS,fS,mS,gS,bS,SS,kS,wS,CS,ES,AS,TS,RS,LS,PS,_S,BS=F.ccclass,DS=F.property,OS=codex,IS=OS.language,xS=OS.player,NS=(pb=BS("Header"),db=DS(oe),vb=DS(Bb),yb=DS(zt),fb=DS(ie),mb=DS(ie),gb=DS(ie),bb=DS(ie),pb((wb=u((kb=function(e){i(u,e);var s,l=a(u);function u(){var _$e;o(this,u);for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return _$e=l.call.apply(l,[this].concat(n)),c(_$e,"levelText",wb,h(_$e)),c(_$e,"levelProgressBar",Cb,h(_$e)),c(_$e,"hintBubbleAnim",Eb,h(_$e)),c(_$e,"pauseNode",Ab,h(_$e)),c(_$e,"replayNode",Tb,h(_$e)),c(_$e,"hintNode",Rb,h(_$e)),c(_$e,"skipNode",Lb,h(_$e)),_$e.handlePlayBubble=function(){_$e.hintBubbleAnim.play(),_$e.startCountDownHintBubble()},_$e}return r(u,[{key:"onLoad",value:function value(){this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function value(){xt.lazyValidateProperties(this)}},{key:"handleClickedPauseGame",value:function value(){this.showSettingScreen(),this.node.scene.emit(sr.GAME_PAUSE)}},{key:"handleClickedReplayGame",value:function value(){var _$e,t=(null!=(_$e=xS.getGameData())?_$e:{}).level;this.node.scene.emit(sr.GAME_REPLAY,{level:void 0===t?1:t})}},{key:"handleClickedHintGame",value:function value(){this.node.scene.emit(sr.SHOW_HINT)}},{key:"handleClickedSkipLevel",value:(s=t(n().mark(function e(){return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.node.scene.emit(sr.SKIP_LEVEL);case 1:case"end":return e.stop()}},e,this)})),function(){return s.apply(this,arguments)})},{key:"showSettingScreen",value:function value(){L.openScreen(P.SETTINGS_SCREEN,{})}},{key:"setLevelText",value:function value(e){var t=IS.getText("game.level");this.levelText.string="".concat(t," ").concat(e)}},{key:"setProgress",value:function value(e){this.levelProgressBar.setProgress(e)}},{key:"setProgressStars",value:function value(e){this.levelProgressBar.setStars(e)}},{key:"startCountDownHintBubble",value:function value(){this.schedule(this.handlePlayBubble,30)}},{key:"stopCountDownHintBubble",value:function value(){this.unschedule(this.handlePlayBubble)}},{key:"disableButtons",value:function value(){this.enableBtnNode(this.pauseNode,!1,!0),this.enableBtnNode(this.replayNode,!1,!0),this.enableBtnNode(this.hintNode,!1,!0),this.enableBtnNode(this.skipNode,!1,!0)}},{key:"enableButtons",value:function value(){this.enableBtnNode(this.pauseNode,!0,!0),this.enableBtnNode(this.replayNode,!0,!0),this.enableBtnNode(this.hintNode,!0,!0),this.enableBtnNode(this.skipNode,!0,!0)}},{key:"disableRewardAdsButton",value:function value(){this.enableBtnNode(this.hintNode,!1,!1),this.enableBtnNode(this.skipNode,!1,!1)}},{key:"disableHintButton",value:function value(){this.enableBtnNode(this.hintNode,!1,!0)}},{key:"enableBtnNode",value:function value(e,t,n){var i=e.getComponent(Z);if(i&&(i.interactable=t),e.active=n,n){var a=e.getComponent(Yi);a&&a.changeState(t)}}}]),u}(U)).prototype,"levelText",[db],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Cb=u(kb.prototype,"levelProgressBar",[vb],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Eb=u(kb.prototype,"hintBubbleAnim",[yb],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ab=u(kb.prototype,"pauseNode",[fb],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Tb=u(kb.prototype,"replayNode",[mb],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Rb=u(kb.prototype,"hintNode",[gb],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Lb=u(kb.prototype,"skipNode",[bb],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),kb))||kb);x._RF.pop(),x._RF.push({},"151afQBVDpOYpTjtwP+wYH+","DevTools",void 0);var FS,zS,GS,MS,HS,jS,WS,VS,$S=F.ccclass,qS=F.property,KS=(Db=$S("DevToolsContainer"),Ob=qS(ie),Ib=qS(ie),xb=qS(ie),Nb=qS(ie),Fb=qS(ie),zb=qS(ie),Gb=qS(ie),Mb=qS(ie),Ub=qS(ie),Hb=qS(ie),jb=qS(ie),Wb=qS(ie),Vb=qS(ie),$b=qS(ie),qb=qS(ie),Kb=qS(ie),Yb=qS(ie),Jb=qS(ie),Xb=qS(ie),Zb=qS(ie),Qb=qS(ie),eS=qS(ie),tS=qS(ie),nS=qS(ie),iS=qS(ie),Db((rS=u((oS=function(e){i(n,e);var t=a(n);function n(){var _$e;o(this,n);for(var i=arguments.length,a=Array(i),r=0;r<i;r++)a[r]=arguments[r];return _$e=t.call.apply(t,[this].concat(a)),c(_$e,"devToolsButton",rS,h(_$e)),c(_$e,"winLevelButton",sS,h(_$e)),c(_$e,"loseLevelButton",lS,h(_$e)),c(_$e,"buildVersionButton",uS,h(_$e)),c(_$e,"prevLevelButton",cS,h(_$e)),c(_$e,"nextLevelButton",hS,h(_$e)),c(_$e,"selectLevelButton",pS,h(_$e)),c(_$e,"hintButton",dS,h(_$e)),c(_$e,"physicButton",vS,h(_$e)),c(_$e,"bundleButton",yS,h(_$e)),c(_$e,"beehiveButton",fS,h(_$e)),c(_$e,"dogeButton",mS,h(_$e)),c(_$e,"thornBallButton",gS,h(_$e)),c(_$e,"bigBeeButton",bS,h(_$e)),c(_$e,"thornButton",SS,h(_$e)),c(_$e,"airFanButton",kS,h(_$e)),c(_$e,"brickButton",wS,h(_$e)),c(_$e,"grassButton",CS,h(_$e)),c(_$e,"grassDarkButton",ES,h(_$e)),c(_$e,"lineButton",AS,h(_$e)),c(_$e,"poisonButton",TS,h(_$e)),c(_$e,"poisonSurfaceButton",RS,h(_$e)),c(_$e,"waterButton",LS,h(_$e)),c(_$e,"dangerAreaButton",PS,h(_$e)),c(_$e,"dashboardButton",_S,h(_$e)),_$e.isActive=!0,_$e.gameplay=null,_$e.gameObjects=null,_$e.currentSpawnObjId=-1,_$e.handleClickDashboardButton=function(){_.switchToDashboardScene()},_$e.handleClickDevToolsButton=function(){_$e.isActive?(_$e.hideAllButtons(),_$e.isActive=!1):(_$e.showAllButtons(),_$e.isActive=!0)},_$e.handleClickPrevLevelButton=function(){var t=_$e.getCurrentLevel();t&&_$e.node.scene.emit(sr.SELECT_LEVEL,{level:t-1})},_$e.handleClickNextLevelButton=function(){var t=_$e.getCurrentLevel();t&&_$e.node.scene.emit(sr.SELECT_LEVEL,{level:t+1})},_$e.handleClickHintButton=function(){_$e.node.scene.emit(sr.SHOW_HINT,{noAd:!0})},_$e.handleClickBuildVersionButton=function(){L.showNotificationScreen("Build version: Ludex")},_$e.handleClickPhysicButton=function(){var _$e=Me.Aabb,t=Me.Pair,_$n=Me.CenterOfMass,i=Me.Joint,a=Me.Shape;xe.instance.debugDrawFlags=_$e|t|_$n|i|a},_$e.handleClickWinLevelButton=function(){_$e.node.scene.emit(sr.DOGE_SURVIVE)},_$e.handleClickLoseLevelButton=function(){_$e.node.scene.emit(sr.DOGE_DIE)},_$e.handleClickBeehiveButton=function(){_$e.currentSpawnObjId=tp.BEEHIVE_A,_$e.handleSpawnObject()},_$e.handleClickDogeButton=function(){_$e.currentSpawnObjId=tp.DOGE_A,_$e.handleSpawnObject()},_$e.handleClickThornBallButton=function(){_$e.currentSpawnObjId=tp.THORN_BALL,_$e.handleSpawnObject()},_$e.handleClickBigBeeButton=function(){_$e.currentSpawnObjId=tp.BIG_BEE,_$e.handleSpawnObject()},_$e.handleClickThornButton=function(){_$e.currentSpawnObjId=tp.THORN,_$e.handleSpawnObject()},_$e.handleClickAirFanButton=function(){_$e.currentSpawnObjId=tp.AIR_FAN,_$e.handleSpawnObject()},_$e.handleClickBrickButton=function(){_$e.currentSpawnObjId=tp.BRICK,_$e.handleSpawnPolygonObject()},_$e.handleClickGrassButton=function(){_$e.currentSpawnObjId=tp.GRASS,_$e.handleSpawnPolygonObject()},_$e.handleClickGrassDarkButton=function(){_$e.currentSpawnObjId=tp.GRASS_DARK,_$e.handleSpawnPolygonObject()},_$e.handleClickLineButton=function(){_$e.currentSpawnObjId=tp.LINE,_$e.handleSpawnPolygonObject()},_$e.handleClickPoisonButton=function(){_$e.currentSpawnObjId=tp.POISON,_$e.handleSpawnPolygonObject()},_$e.handleClickPoisonSurfaceButton=function(){_$e.currentSpawnObjId=tp.POISON_SURFACE,_$e.handleSpawnPolygonObject()},_$e.handleClickWaterButton=function(){_$e.currentSpawnObjId=tp.WATER,_$e.handleSpawnPolygonObject()},_$e.handleClickDangerAreaButton=function(){_$e.currentSpawnObjId=tp.DANGER_AREA,_$e.handleSpawnPolygonObject()},_$e}return r(n,[{key:"start",value:function value(){this.handleToggleDevToolsButton(),this.handleGameLevelButtons(),this.handleItemButtons(),this.handleEngineButtons(),this.handleSpawnObjectButtons(),this.handleSwitchSceneButtons()}},{key:"handleToggleDevToolsButton",value:function value(){this.devToolsButton.on(ie.EventType.TOUCH_START,this.handleClickDevToolsButton)}},{key:"handleGameLevelButtons",value:function value(){this.winLevelButton.on(ie.EventType.TOUCH_START,this.handleClickWinLevelButton),this.loseLevelButton.on(ie.EventType.TOUCH_START,this.handleClickLoseLevelButton),this.prevLevelButton.on(ie.EventType.TOUCH_START,this.handleClickPrevLevelButton),this.nextLevelButton.on(ie.EventType.TOUCH_START,this.handleClickNextLevelButton)}},{key:"handleItemButtons",value:function value(){this.hintButton.on(ie.EventType.TOUCH_START,this.handleClickHintButton)}},{key:"handleEngineButtons",value:function value(){this.buildVersionButton.on(ie.EventType.TOUCH_START,this.handleClickBuildVersionButton),this.physicButton.on(ie.EventType.TOUCH_START,this.handleClickPhysicButton),this.bundleButton.on(ie.EventType.TOUCH_START,this.handleSwitchBundle)}},{key:"handleSpawnObjectButtons",value:function value(){this.beehiveButton.on(ie.EventType.TOUCH_START,this.handleClickBeehiveButton),this.dogeButton.on(ie.EventType.TOUCH_START,this.handleClickDogeButton),this.thornBallButton.on(ie.EventType.TOUCH_START,this.handleClickThornBallButton),this.bigBeeButton.on(ie.EventType.TOUCH_START,this.handleClickBigBeeButton),this.thornButton.on(ie.EventType.TOUCH_START,this.handleClickThornButton),this.airFanButton.on(ie.EventType.TOUCH_START,this.handleClickAirFanButton),this.brickButton.on(ie.EventType.TOUCH_START,this.handleClickBrickButton),this.grassButton.on(ie.EventType.TOUCH_START,this.handleClickGrassButton),this.grassDarkButton.on(ie.EventType.TOUCH_START,this.handleClickGrassDarkButton),this.lineButton.on(ie.EventType.TOUCH_START,this.handleClickLineButton),this.poisonButton.on(ie.EventType.TOUCH_START,this.handleClickPoisonButton),this.poisonSurfaceButton.on(ie.EventType.TOUCH_START,this.handleClickPoisonSurfaceButton,this),this.waterButton.on(ie.EventType.TOUCH_START,this.handleClickWaterButton),this.dangerAreaButton.on(ie.EventType.TOUCH_START,this.handleClickDangerAreaButton)}},{key:"handleSwitchSceneButtons",value:function value(){this.dashboardButton.on(ie.EventType.TOUCH_START,this.handleClickDashboardButton)}},{key:"injectGameplay",value:function value(e){this.gameplay=e,this.gameObjects=e.gameObjects}},{key:"hideAllButtons",value:function value(){var _$e=this;this.getComponentsInChildren(Z).forEach(function(t){t.node.name!==_$e.devToolsButton.name&&(t.node.active=!1)})}},{key:"showAllButtons",value:function value(){var _$e=this;this.getComponentsInChildren(Z).forEach(function(t){t.node.name!==_$e.devToolsButton.name&&(t.node.active=!0)})}},{key:"getCurrentLevel",value:function value(){if(!this.gameplay)return null;var _$e=this.gameplay.getGameData();return _$e&&_$e.level||null}},{key:"handleEnterSelectLevel",value:function value(e){var t=Number(e.string);this.node.scene.emit(sr.SELECT_LEVEL,{level:t})}},{key:"handleSpawnObject",value:function value(){var _$e;if(this.validateRequiredComponents(),-1!==this.currentSpawnObjId){var _$n={id:this.currentSpawnObjId,point:{x:Math.floor(40*Math.random()),y:Math.floor(40*Math.random())}};null==(_$e=this.gameObjects)||_$e.spawnObjectForDevTools(_$n)}}},{key:"handleSpawnPolygonObject",value:function value(){var _$e;if(this.validateRequiredComponents(),-1!==this.currentSpawnObjId){var t={x:Math.floor(40*Math.random()),y:Math.floor(40*Math.random())},_$n={x:t.x+Math.floor(10*Math.random()),y:t.y},i={x:t.x,y:t.y+Math.floor(10*Math.random())},a=[t,_$n,i,{x:_$n.x,y:i.y}],o={id:this.currentSpawnObjId,point:a};null==(_$e=this.gameObjects)||_$e.spawnPolygonObjectForDevTools(o)}}},{key:"validateRequiredComponents",value:function value(){xt.lazyValidateProperties(this)}},{key:"handleSwitchBundle",value:function value(){J.emit(m.REQUEST_UPGRADE_ASSET)}}]),n}(U)).prototype,"devToolsButton",[Ob],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),sS=u(oS.prototype,"winLevelButton",[Ib],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),lS=u(oS.prototype,"loseLevelButton",[xb],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),uS=u(oS.prototype,"buildVersionButton",[Nb],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cS=u(oS.prototype,"prevLevelButton",[Fb],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),hS=u(oS.prototype,"nextLevelButton",[zb],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pS=u(oS.prototype,"selectLevelButton",[Gb],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),dS=u(oS.prototype,"hintButton",[Mb],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vS=u(oS.prototype,"physicButton",[Ub],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yS=u(oS.prototype,"bundleButton",[Hb],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fS=u(oS.prototype,"beehiveButton",[jb],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),mS=u(oS.prototype,"dogeButton",[Wb],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gS=u(oS.prototype,"thornBallButton",[Vb],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bS=u(oS.prototype,"bigBeeButton",[$b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),SS=u(oS.prototype,"thornButton",[qb],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),kS=u(oS.prototype,"airFanButton",[Kb],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),wS=u(oS.prototype,"brickButton",[Yb],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),CS=u(oS.prototype,"grassButton",[Jb],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ES=u(oS.prototype,"grassDarkButton",[Xb],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),AS=u(oS.prototype,"lineButton",[Zb],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),TS=u(oS.prototype,"poisonButton",[Qb],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),RS=u(oS.prototype,"poisonSurfaceButton",[eS],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),LS=u(oS.prototype,"waterButton",[tS],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),PS=u(oS.prototype,"dangerAreaButton",[nS],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_S=u(oS.prototype,"dashboardButton",[iS],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),oS))||oS);x._RF.pop(),x._RF.push({},"a3b0f6zU+1D97PyszsgST1H","UIManager",void 0);var YS,JS,XS,ZS,QS,ek,tk,nk,ik,ak,ok,rk,sk=F.ccclass,lk=F.property,uk=Ludex.Utils,ck=(FS=sk("UIManager"),zS=lk(Jg),GS=lk(NS),MS=lk(KS),FS((jS=u((HS=function(e){i(n,e);var t=a(n);function n(){var _$e;o(this,n);for(var i=arguments.length,a=Array(i),r=0;r<i;r++)a[r]=arguments[r];return _$e=t.call.apply(t,[this].concat(a)),c(_$e,"clock",jS,h(_$e)),c(_$e,"header",WS,h(_$e)),c(_$e,"devTools",VS,h(_$e)),_$e.showDevTools=function(){_$e.devTools&&(_$e.devTools.node.active=!0)},_$e}return r(n,[{key:"onLoad",value:function value(){this.validateRequiredComponents(),this.listensDevToolsEvents()}},{key:"validateRequiredComponents",value:function value(){xt.lazyValidateProperties(this)}},{key:"listensDevToolsEvents",value:function value(){this.node.scene.on(fh.UNLOCK_DEV_TOOLS,this.showDevTools)}},{key:"initDevTools",value:function value(e){this.devTools&&(this.devTools.node.active=uk.Valid.isDebugger(),this.devTools.injectGameplay(e))}},{key:"setLevelText",value:function value(e){this.header.setLevelText(e)}},{key:"initCountdown",value:function value(){this.clock.init()}},{key:"startCountdown",value:function value(){this.clock.startCountdown()}},{key:"pauseCountdown",value:function value(){this.clock.pause()}},{key:"resumeCountdown",value:function value(){this.clock.resume()}},{key:"showUncompletedMark",value:function value(){this.clock.showUncompletedMark()}},{key:"showCompletedMark",value:function value(){this.clock.showCompletedMark()}},{key:"setProgressBarPercentage",value:function value(e){this.header.setProgress(e)}},{key:"setProgressStars",value:function value(e){this.header.setProgressStars(e)}},{key:"startCountDownHeaderHintBubbleAnim",value:function value(){this.header.startCountDownHintBubble()}},{key:"stopCountDownHeaderHintBubbleAnim",value:function value(){this.header.stopCountDownHintBubble()}},{key:"disableUI",value:function value(){this.header.disableButtons()}},{key:"enableUI",value:function value(){this.header.enableButtons()}},{key:"disableHintButton",value:function value(){this.header.disableHintButton()}},{key:"disableRewardAdsUI",value:function value(){this.header.disableRewardAdsButton()}}]),n}(U)).prototype,"clock",[zS],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),WS=u(HS.prototype,"header",[GS],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),VS=u(HS.prototype,"devTools",[MS],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return null}}),HS))||HS);x._RF.pop(),x._RF.push({},"157f203vjtMma2FDvAlyM6h","Gameplay",void 0);var pk=F.ccclass,dk=F.requireComponent,vk=F.property,yk=codex,fk=yk.player,mk=(yk.analytics,YS=pk("Gameplay"),JS=dk([zg,Nm,xm]),XS=vk(um),ZS=vk(Om),QS=vk(Tm),ek=vk(im),YS(tk=JS((ik=u((nk=function(e){i(l,e);var s=a(l);function l(){o(this,l);for(var _$e,i,i1,i2=arguments.length,a=Array(i2),r=0;r<i2;r++)a[r]=arguments[r];return(_$e=s.call.apply(s,[this].concat(a))).gameStartCount=0,c(_$e,"hint",ik,h(_$e)),c(_$e,"gameMap",ak,h(_$e)),c(_$e,"lineDrawer",ok,h(_$e)),c(_$e,"gameObjects",rk,h(_$e)),_$e.gameData=null,_$e.defaultData=null,_$e.handleStartGame=function(t){if(!t)throw Error("handleStartGame: GameEvent payload is not defined");_$e.setGameData(t),_$e.stateManager.draw()},_$e.handlePauseGame=function(t){_$e.pauseGame(),k.pauseSound(Zn.BEE_FLYING),_$e.processCrazyGamesGameplayStop()},_$e.handleResumeGame=function(t){_$e.resumeGame(),k.resumeSound(Zn.BEE_FLYING),_$e.processCrazyGamesGameplayStart()},_$e.handleReplayGame=function(t){var n=d(d({},_$e.defaultData),t);_$e.setGameData(n),_$e.stateManager.initialize()},_$e.handleNextLevel=function(t){_$e.gameData&&(_$e.updatePlayerLevelProgress(t),_$e.stateManager.load(),_$e.attemptCallCreateShortcut())},_$e.updatePlayerLevelProgress=function(t){if(_$e.gameData){if(!t)throw Error("handleNextLevel: GameEvent payload is not defined");var n=_$e.gameData,i=n.level,a=n.nextLevelCount,r=t.level,s=void 0===r?i:r;if(!s)throw Error("Level is not defined");var _$l=s+1;fk.setGameData({level:_$l});var u=d(d(d({},_$e.defaultData),t),{},{level:_$l,nextLevelCount:(void 0===a?0:a)+1});_$e.setGameData(u)}},_$e.handleStartOver=function(t){fk.setGameData({level:1});var n=d(d(d({},_$e.defaultData),t),{},{level:1});_$e.setGameData(n),_$e.stateManager.load()},_$e.handleSelectLevel=function(t){if(!t)throw Error("handleSelectLevel: GameEvent payload is not defined");var n=t.level;if(n){var i=d(d(d({},_$e.defaultData),t),{},{level:n});fk.setGameData({level:n}),_$e.setGameData(i),_$e.stateManager.load()}},_$e.handleClockTimeout=function(t){_$e.stateManager.escape()},_$e.handleDrawing=function(t){if(!t)throw Error("handleDrawing: GameEvent payload is not defined");_$e.setGameData(t)},_$e.handleBeeDie=function(t){var n;(null==(n=_$e.gameObjects)?void 0:n.checkAllBeeDie())&&(_$e.stateManager.escape(),_$e.processCrazyGamesHappyTime())},_$e.handleBigBeeDie=function(t){var n;(null==(n=_$e.gameObjects)?void 0:n.checkAllBeeDie())&&(_$e.stateManager.escape(),_$e.processCrazyGamesHappyTime())},_$e.handleBeeAttack=function(t){_$e.stateManager.attack()},_$e.handleDogeDie=function(t){_$e.stateManager.death()},_$e.handleDogeSurvive=function(t){_$e.stateManager.escape()},i=t(n().mark(function t(i){var a,o,r,s,_$l,c,h,p;return n().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(null==(a=_$e.hint)||!a.getIsHintShow()){t.next=2;break}return t.abrupt("return");case 2:if(_$e.stateManager.isReady()){t.next=5;break}return t.abrupt("return");case 5:if(_$l=void 0!==(s=(null!=i?i:{}).noAd)&&s,_$e.uiManager.stopCountDownHeaderHintBubbleAnim(),_$l){t.next=13;break}return t.next=10,E.showRewardVideoAdAsync();case 10:if(t.sent){t.next=13;break}return t.abrupt("return");case 13:if(c=(null!=(o=_$e.gameData)?o:{}).levelData){t.next=16;break}throw Error("Level data is not defined");case 16:h=c.tips,p=Qf.transformPointsFromMapToDrawAreaCoordinate(h),null==(r=_$e.hint)||r.showHint(p,!1);case 19:case"end":return t.stop()}},t)})),_$e.handleShowHint=function(e){return i.apply(this,arguments)},i1=t(n().mark(function t(i){return n().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(_$e.stateManager.isReady()){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,E.showRewardVideoAdAsync();case 5:t.sent&&_$e.node.scene.emit(sr.DOGE_SURVIVE),_$e.node.scene.emit(sr.GAME_RESUME);case 8:case"end":return t.stop()}},t)})),_$e.handleSkipLevel=function(e){return i1.apply(this,arguments)},_$e}return r(l,[{key:"__preload",value:function value(){this.initComponents(),this.validateRequiredComponents(),this.listenInputEvents(),E.showBannerAds(),dg.init()}},{key:"initComponents",value:function value(){this.initUIManager(),this.initStateManager(),this.initInputController(),this.initInkCapacityController()}},{key:"initUIManager",value:function value(){var _$e;this.uiManager=null==(_$e=this.node.parent)?void 0:_$e.getComponentInChildren(ck)}},{key:"initStateManager",value:function value(){this.stateManager=this.getComponent(zg)}},{key:"initInputController",value:function value(){this.inputController=this.getComponent(Nm)}},{key:"initInkCapacityController",value:function value(){this.inkCapacityController=this.getComponent(xm)}},{key:"validateRequiredComponents",value:function value(){xt.lazyValidateProperties(this)}},{key:"listenInputEvents",value:function value(){this.node.scene.on(sr.GAME_START,this.handleStartGame),this.node.scene.on(sr.GAME_PAUSE,this.handlePauseGame),this.node.scene.on(sr.GAME_RESUME,this.handleResumeGame),this.node.scene.on(sr.GAME_REPLAY,this.handleReplayGame),this.node.scene.on(sr.NEXT_LEVEL,this.handleNextLevel),this.node.scene.on(sr.UPDATE_LEVEL,this.updatePlayerLevelProgress),this.node.scene.on(sr.START_OVER,this.handleStartOver),this.node.scene.on(sr.SELECT_LEVEL,this.handleSelectLevel),this.node.scene.on(sr.TIME_OUT,this.handleClockTimeout),this.node.scene.on(sr.DRAWING,this.handleDrawing),this.node.scene.on(sr.BEE_DIE,this.handleBeeDie),this.node.scene.on(sr.BIG_BEE_DIE,this.handleBigBeeDie),this.node.scene.on(sr.BEE_ATTACK,this.handleBeeAttack),this.node.scene.on(sr.DOGE_DIE,this.handleDogeDie),this.node.scene.on(sr.DOGE_SURVIVE,this.handleDogeSurvive),this.node.scene.on(sr.SHOW_HINT,this.handleShowHint),this.node.scene.on(sr.SKIP_LEVEL,this.handleSkipLevel)}},{key:"start",value:function value(){this.initData(),this.initGame(),this.initDevTools()}},{key:"initDevTools",value:function value(){this.uiManager.initDevTools(this)}},{key:"initData",value:function value(){var _$e,t=(null!=(_$e=fk.getGameData())?_$e:{}).level;this.defaultData={level:void 0===t?1:t,gameplayMode:"level",nextLevelCount:0,isFromLoader:!1},this.setGameData(this.defaultData)}},{key:"initGame",value:function value(){this.stateManager.init(),this.stateManager.load()}},{key:"setGameData",value:function value(e){e&&(this.gameData=d(d({},this.gameData),e))}},{key:"getGameData",value:function value(){return this.gameData}},{key:"pauseGame",value:function value(){this.node.active=!1,this.node.pauseSystemEvents(!0),this.uiManager.pauseCountdown()}},{key:"resumeGame",value:function value(){this.node.active=!0,this.node.resumeSystemEvents(!0),this.uiManager.resumeCountdown()}},{key:"attemptCallCreateShortcut",value:function value(){var _$e,t=null!=(_$e=this.getGameData())?_$e:{},n=t.level,a=t.nextLevelCount;(void 0===n?0:n)<2||(void 0===a?0:a)<2||"checkAndCreateShortcutAsync"in GameSDK.extra&&GameSDK.extra.checkAndCreateShortcutAsync().catch(function(e){console.warn("checkAndCreateShortcutAsync",e)})}},{key:"processCrazyGamesGameplayStart",value:function value(){"gameplayStart"in GameSDK.extra&&GameSDK.extra.gameplayStart()}},{key:"processCrazyGamesGameplayStop",value:function value(){"gameplayStop"in GameSDK.extra&&GameSDK.extra.gameplayStop()}},{key:"processCrazyGamesHappyTime",value:function value(){"happyTime"in GameSDK.extra&&GameSDK.extra.happyTime()}},{key:"disableRewardAdsItemForCrazyGames",value:function value(){"CrazyGames"===GameSDK.getSDKName()&&this.uiManager.disableRewardAdsUI()}}]),l}(U)).prototype,"hint",[XS],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ak=u(nk.prototype,"gameMap",[ZS],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ok=u(nk.prototype,"lineDrawer",[QS],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rk=u(nk.prototype,"gameObjects",[ek],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),tk=nk))||tk)||tk);x._RF.pop(),x._RF.push({},"bfd3fZcEttGVawFb2B3Gmqu","DangerArea",void 0),(0,F.ccclass)("DangerArea")(function(e){i(n,e);var t=a(n);function n(){var _$e;o(this,n);for(var i=arguments.length,a=Array(i),r=0;r<i;r++)a[r]=arguments[r];return(_$e=t.call.apply(t,[this].concat(a))).useBatch=!1,_$e.dangerPolygons=[],_$e}return r(n,[{key:"addDangerAreaPolygon",value:function value(e){this.dangerPolygons.push(e)}},{key:"addRigidBody",value:function value(){var _$e=this.node.addComponent(Se);_$e?(_$e.group=np.MAIN_OBJECT,_$e.type=be.Static):console.warn("Cannot add RigidBody2D")}},{key:"applyColliderForBatchDraw",value:function value(){var _$e,t=this.dangerPolygons.map(function(e){return e.map(function(e){var t=e.x,_$n=e.y;return new ye(t,_$n)})}),_$n=l(t);try{for(_$n.s();!(_$e=_$n.n()).done;){var i=_$e.value,a=new ie;a.name=qh.DANGER_AREA,this.node.addChild(a),a.setPosition(0,0);var o=a.addComponent(Se);o.type=be.Static,o.group=np.MAIN_OBJECT;var r=a.addComponent(De);r.points=i,r.apply()}}catch(e){_$n.e(e)}finally{_$n.f()}}},{key:"batchDrawAllDangerAreas",value:function value(){if(!(this.dangerPolygons.length<1)){var _$e=this.node.getComponent(Dv);if(!_$e)return console.warn("DangerArea: GraphicsPattern not found"),null;this.addRigidBody(),_$e.setColor("#fc03036d");var t,_$n=l(this.dangerPolygons);try{for(_$n.s();!(t=_$n.n()).done;){var i=t.value;_$e.draw(i)}}catch(e){_$n.e(e)}finally{_$n.f()}this.applyColliderForBatchDraw()}}}]),n}(U)),x._RF.pop(),x._RF.push({},"0daa9+mtbVHG5tVordU0a3q","Spider",void 0);var gk,bk,Sk,kk,wk,Ck,Ek,Tk,Rk,Lk,Pk,_k,Bk,Dk,Ok,Ik,xk,Fk,zk,Gk,Mk=F.ccclass,Uk=F.property;gk=Mk("Spider"),bk=Uk(ie),Sk=Uk(ie),kk=Uk(ie),wk=Uk(we),Ck=Uk(Se),Ek=Uk(se),gk((Rk=u((Tk=function(e){i(n,e);var t=a(n);function n(){var _$e;o(this,n);for(var i=arguments.length,a=Array(i),r=0;r<i;r++)a[r]=arguments[r];return _$e=t.call.apply(t,[this].concat(a)),c(_$e,"spider",Rk,h(_$e)),c(_$e,"web",Lk,h(_$e)),c(_$e,"silk",Pk,h(_$e)),_$e.isStunned=!1,c(_$e,"spiderCollider",_k,h(_$e)),c(_$e,"spiderRigidBody",Bk,h(_$e)),c(_$e,"silkGraphics",Dk,h(_$e)),_$e.onSpiderCollisionEnter=function(t,n){if(!_$e.isStunned){_$e.isStunned=!0,_$e.spiderRigidBody.linearVelocity=new ye(0,0);var i=_$e.isLineCollision(n),a=_$e.isDogeCollision(n);if(i||a){var o=n.node,r=_$e.spider.addComponent(Ue),s=_$e.spider.worldPosition,l=o.getComponent(Se);if(i)r.connectedAnchor=n.offset.clone();else{var u=o.worldPosition;r.connectedAnchor=new ye(s.x-u.x,s.y-u.y)}r.connectedBody=l,r.autoCalcDistance=!1,r.maxLength=5,r.collideConnected=!1}}},_$e}return r(n,[{key:"onLoad",value:function value(){this.spiderCollider=this.spider.getComponent(we),this.spiderRigidBody=this.spider.getComponent(Se),this.silkGraphics=this.silk.getComponent(se),this.validateRequiredComponents()}},{key:"onDestroy",value:function value(){this.spiderCollider.off(Ce.BEGIN_CONTACT,this.onSpiderCollisionEnter)}},{key:"validateRequiredComponents",value:function value(){xt.lazyValidateProperties(this)}},{key:"start",value:function value(){this.enabled=!1,this.isStunned=!1,this.silkOffsetVector=new ye,this.spiderCollider.on(Ce.BEGIN_CONTACT,this.onSpiderCollisionEnter)}},{key:"update",value:function value(){if(this.enabled)if(this.drawSilk(),this.isStunned){var _$e=this.getVectorDataFromAToB(this.spider.worldPosition,this.web.worldPosition);this.spiderRigidBody.linearVelocity=_$e.vector.multiplyScalar(5),this.spiderRigidBody.linearDamping=0,this.isSpiderTooCloseToWeb()&&(this.spiderRigidBody.type=be.Static,this.enabled=!1)}else{if(-3===this.spiderRigidBody.linearVelocity.y)return;this.spiderRigidBody.linearVelocity=new ye(0,-3)}}},{key:"drawSilk",value:function value(){var _$e=this.web.position,t=this.spider.position,_$n=de.toRadian(this.spider.eulerAngles.z);this.silkGraphics.clear(),this.silkGraphics.moveTo(_$e.x,_$e.y),this.silkOffsetVector.set(0,50).rotate(_$n),this.silkGraphics.lineTo(t.x+this.silkOffsetVector.x,t.y+this.silkOffsetVector.y),this.silkGraphics.stroke()}},{key:"isSpiderTooCloseToWeb",value:function value(){var _$e=this.spider.position,t=this.web.position;return 40>te.distance(_$e,t)}},{key:"isLineCollision",value:function value(e){var t=e.node;return t&&t.getComponent(gd)||!1}},{key:"isDogeCollision",value:function value(e){var t=e.node;return t&&t.getComponent(Vy)||!1}}]),n}(pp)).prototype,"spider",[bk],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Lk=u(Tk.prototype,"web",[Sk],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Pk=u(Tk.prototype,"silk",[kk],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_k=u(Tk.prototype,"spiderCollider",[wk],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Bk=u(Tk.prototype,"spiderRigidBody",[Ck],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Dk=u(Tk.prototype,"silkGraphics",[Ek],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Tk)),x._RF.pop(),x._RF.push({},"8fe7bkzdtdNfY7I8uaDov+b","EndlessHeader",void 0);var Hk,jk,Wk,Vk,$k,qk,Kk,Yk,Jk,Xk,Zk,Qk=F.ccclass,ew=F.property,tw=(Ok=Qk("EndlessHeader"),Ik=ew(ie),xk=ew(ie),Ok((zk=u((Fk=function(e){i(n,e);var t=a(n);function n(){var _$e;o(this,n);for(var i=arguments.length,a=Array(i),r=0;r<i;r++)a[r]=arguments[r];return _$e=t.call.apply(t,[this].concat(a)),c(_$e,"pauseNode",zk,h(_$e)),c(_$e,"replayNode",Gk,h(_$e)),_$e}return r(n,[{key:"__preload",value:function value(){this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function value(){xt.lazyValidateProperties(this)}},{key:"handleClickedPauseGame",value:function value(){this.showSettingScreen(),this.node.scene.emit(sr.GAME_PAUSE)}},{key:"handleClickedReplayGame",value:function value(){this.node.scene.emit(sr.GAME_REPLAY)}},{key:"showSettingScreen",value:function value(){L.openScreen(P.SETTINGS_SCREEN,{})}},{key:"disableButtons",value:function value(){this.enableBtnNode(this.pauseNode,!1,!0),this.enableBtnNode(this.replayNode,!1,!0)}},{key:"enableButtons",value:function value(){this.enableBtnNode(this.pauseNode,!0,!0),this.enableBtnNode(this.replayNode,!0,!0)}},{key:"enableBtnNode",value:function value(e,t,n){var i=e.getComponent(Z);if(i&&(i.interactable=t),e.active=n,n){var a=e.getComponent(Yi);a&&a.changeState(t)}}}]),n}(U)).prototype,"pauseNode",[Ik],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Gk=u(Fk.prototype,"replayNode",[xk],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Fk))||Fk);x._RF.pop(),x._RF.push({},"bc951s11zREU72nQBqwoD3m","EndlessClock",void 0);var nw,iw,aw,ow,rw,lw,uw,cw,hw,pw,dw=F.ccclass,vw=F.disallowMultiple,yw=F.property,fw=(Hk=dw("EndlessClock"),jk=yw(oe),Wk=yw(oe),Vk=yw(z),$k=yw(Y),Hk(qk=vw((Yk=u((Kk=function(e){i(n,e);var t=a(n);function n(){var _$e;o(this,n);for(var i=arguments.length,a=Array(i),r=0;r<i;r++)a[r]=arguments[r];return _$e=t.call.apply(t,[this].concat(a)),c(_$e,"timeText",Yk,h(_$e)),c(_$e,"bestTimeText",Jk,h(_$e)),c(_$e,"animation",Xk,h(_$e)),c(_$e,"clockFill",Zk,h(_$e)),_$e.elapsedTime=0,_$e.bestTime=0,_$e.running=!1,_$e}return r(n,[{key:"__preload",value:function value(){this.validateRequiredComponents()}},{key:"start",value:function value(){this.animation.stop(),this.clockFill.fillRange=0}},{key:"validateRequiredComponents",value:function value(){xt.lazyValidateProperties(this)}},{key:"getScore",value:function value(){return this.elapsedTime}},{key:"getBestScore",value:function value(){return Math.max(this.bestTime,this.elapsedTime)}},{key:"setBestScore",value:function value(e){this.bestTime=e;var t=Math.floor(e/60),_$n=Math.floor(e%60),i=t.toString().padStart(2,"0"),a=_$n.toString().padStart(2,"0");this.bestTimeText.string="".concat(i,":").concat(a)}},{key:"init",value:function value(){this.running=!1,this.node.active=!0,this.animation.stop(),this.clockFill.fillRange=0,this.setElapsedTime(0),this.setBestScore(this.bestTime)}},{key:"startCounting",value:function value(){this.running=!0,this.node.active=!0,this.animation.play(),this.setElapsedTime(0),this.setBestScore(this.bestTime)}},{key:"stopCounting",value:function value(){this.running=!1,this.node.active=!1,this.animation.stop(),this.clockFill.fillRange=0}},{key:"pause",value:function value(){this.running=!1,this.animation.pause()}},{key:"resume",value:function value(){this.running=!0,this.animation.play()}},{key:"update",value:function value(e){this.running&&this.setElapsedTime(this.elapsedTime+e)}},{key:"setElapsedTime",value:function value(e){this.elapsedTime=e;var t=Math.floor(this.elapsedTime/60),_$n=Math.floor(this.elapsedTime%60),i=t.toString().padStart(2,"0"),a=_$n.toString().padStart(2,"0");this.timeText.string="".concat(i,":").concat(a),this.elapsedTime>this.bestTime&&this.setBestScore(this.elapsedTime)}}]),n}(U)).prototype,"timeText",[jk],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Jk=u(Kk.prototype,"bestTimeText",[Wk],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Xk=u(Kk.prototype,"animation",[Vk],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Zk=u(Kk.prototype,"clockFill",[$k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),qk=Kk))||qk)||qk);x._RF.pop(),x._RF.push({},"346956Nk9hPgpT3ZCsaVr+P","EndlessUIManager",void 0);var mw,gw,bw,Sw,kw,ww,Cw,Ew,Aw,Tw,Rw,Lw,Pw,_w,Bw,Dw,Ow=F.ccclass,Iw=F.property,xw=Ludex.Utils,Nw=(nw=Ow("EndlessUIManager"),iw=Iw(fw),aw=Iw(tw),ow=Iw(KS),rw=Iw(ie),nw((uw=u((lw=function(e){i(n,e);var t=a(n);function n(){var _$e;o(this,n);for(var i=arguments.length,a=Array(i),r=0;r<i;r++)a[r]=arguments[r];return _$e=t.call.apply(t,[this].concat(a)),c(_$e,"clock",uw,h(_$e)),c(_$e,"header",cw,h(_$e)),c(_$e,"devTools",hw,h(_$e)),c(_$e,"tapToStartText",pw,h(_$e)),_$e.showDevTools=function(){_$e.devTools&&(_$e.devTools.node.active=!0)},_$e}return r(n,[{key:"onLoad",value:function value(){this.validateRequiredComponents(),this.listensDevToolsEvents()}},{key:"validateRequiredComponents",value:function value(){xt.lazyValidateProperties(this)}},{key:"listensDevToolsEvents",value:function value(){this.node.scene.on(fh.UNLOCK_DEV_TOOLS,this.showDevTools)}},{key:"initDevTools",value:function value(e){this.devTools&&(this.devTools.node.active=xw.Valid.isDebugger(),this.devTools.injectGameplay(e))}},{key:"getBestScore",value:function value(){return this.clock.getBestScore()}},{key:"setBestScore",value:function value(e){this.clock.setBestScore(e)}},{key:"initCounting",value:function value(){this.clock.init()}},{key:"startCounting",value:function value(){this.clock.startCounting()}},{key:"stopCounting",value:function value(){this.clock.stopCounting()}},{key:"pauseCounting",value:function value(){this.clock.pause()}},{key:"resumeCounting",value:function value(){this.clock.resume()}},{key:"disableUI",value:function value(){this.header.disableButtons()}},{key:"enableUI",value:function value(){this.header.enableButtons()}},{key:"showTapToStartText",value:function value(){this.tapToStartText.active=!0;var _$e=this.tapToStartText.getComponent(ae);_$e.opacity=255,q(_$e).to(.5,{opacity:0},{easing:"smooth"}).to(.5,{opacity:255},{easing:"smooth"}).union().repeatForever().start()}},{key:"hideTapToStartText",value:function value(){var _$e=this.tapToStartText.getComponent(ae);Ie.stopAllByTarget(_$e),Ie.stopAllByTarget(this.tapToStartText),this.tapToStartText.active=!1}}]),n}(U)).prototype,"clock",[iw],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cw=u(lw.prototype,"header",[aw],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),hw=u(lw.prototype,"devTools",[ow],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return null}}),pw=u(lw.prototype,"tapToStartText",[rw],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),lw))||lw);x._RF.pop(),x._RF.push({},"9d32c879Q1FRIas0BgO+iNP","EndlessGameplay",void 0);var Fw=F.ccclass,zw=F.property,Gw=F.requireComponent,Mw=codex.player,Uw=(mw=Fw("EndlessGameplay"),gw=Gw(W),bw=zw({type:Le,group:"Thorns"}),Sw=zw({type:ie,group:"Thorns"}),kw=zw({type:ie,group:"Thorns"}),ww=zw({type:ie,group:"Thorns"}),Cw=zw({type:ie,group:"Thorns"}),Ew=zw(im),mw(Aw=gw((Rw=u((Tw=function(e){i(n,e);var t=a(n);function n(){var _$e;o(this,n);for(var i=arguments.length,a=Array(i),r=0;r<i;r++)a[r]=arguments[r];return(_$e=t.call.apply(t,[this].concat(a))).gameData=null,_$e.defaultData=null,c(_$e,"thornPrefab",Rw,h(_$e)),c(_$e,"bottomThorns",Lw,h(_$e)),c(_$e,"topThorns",Pw,h(_$e)),c(_$e,"leftThorns",_w,h(_$e)),c(_$e,"rightThorns",Bw,h(_$e)),c(_$e,"gameObjects",Dw,h(_$e)),_$e.handleStartGame=function(t){if(!t)throw Error("handleStartGame: GameEvent payload is not defined");_$e.setGameData(t),_$e.stateManager.play()},_$e.handlePauseGame=function(t){_$e.pauseGame(),k.pauseSound(Zn.BEE_FLYING),_$e.processCrazyGamesGameplayStop()},_$e.handleResumeGame=function(t){_$e.resumeGame(),k.resumeSound(Zn.BEE_FLYING),_$e.processCrazyGamesGameplayStart()},_$e.handleReplayGame=function(t){var _$n=d(d({},_$e.gameData),t);_$e.setGameData(_$n),_$e.stateManager.initialize(),_$e.uiManager.showTapToStartText(),_$e.node.active=!0,_$e.node.resumeSystemEvents(!0)},_$e.handleDogeDie=function(){_$e.stateManager.death(),_$e.attemptCallCreateShortcut()},_$e.handleBeeDie=function(t){var _$n;(null==(_$n=_$e.gameObjects)?void 0:_$n.checkAllBeeDie())&&_$e.processCrazyGamesHappyTime()},_$e.handleBigBeeDie=function(t){var _$n;(null==(_$n=_$e.gameObjects)?void 0:_$n.checkAllBeeDie())&&_$e.processCrazyGamesHappyTime()},_$e.handleHideTapToPlayText=function(){_$e.uiManager.hideTapToStartText()},_$e}return r(n,[{key:"__preload",value:function value(){this.initComponents(),this.uiTransform=this.getComponent(W),this.validateRequiredComponents(),this.listenInputEvents(),E.showBannerAds()}},{key:"initComponents",value:function value(){this.initUIManager(),this.initStateManager()}},{key:"initUIManager",value:function value(){var _$e;this.uiManager=null==(_$e=this.node.parent)?void 0:_$e.getComponentInChildren(Nw)}},{key:"initStateManager",value:function value(){this.stateManager=this.getComponent(nC)}},{key:"validateRequiredComponents",value:function value(){xt.lazyValidateProperties(this)}},{key:"listenInputEvents",value:function value(){this.node.scene.on(sr.GAME_START,this.handleStartGame),this.node.scene.on(sr.GAME_PAUSE,this.handlePauseGame),this.node.scene.on(sr.GAME_RESUME,this.handleResumeGame),this.node.scene.on(sr.GAME_REPLAY,this.handleReplayGame),this.node.scene.on(sr.BEE_DIE,this.handleBeeDie),this.node.scene.on(sr.BIG_BEE_DIE,this.handleBigBeeDie),this.node.scene.on(sr.DOGE_DIE,this.handleDogeDie)}},{key:"start",value:function value(){this.initData(),this.initGame(),this.initObjects(),this.initDevTools(),this.uiManager.startCounting(),this.uiManager.showTapToStartText()}},{key:"initDevTools",value:function value(){this.uiManager.initDevTools(this)}},{key:"initData",value:function value(){var _$e,t=null!=(_$e=Mw.getGameData())?_$e:{},_$n=t.level,a=t.bestEndlessScore;this.defaultData={level:void 0===_$n?1:_$n,bestEndlessScore:void 0===a?0:a,gameplayMode:"endless",nextLevelCount:0,isFromLoader:!1},this.setGameData(this.defaultData)}},{key:"initGame",value:function value(){this.stateManager.init(),this.stateManager.load()}},{key:"setGameData",value:function value(e){e&&(this.gameData=d(d({},this.gameData),e))}},{key:"getGameData",value:function value(){return this.gameData}},{key:"pauseGame",value:function value(){this.node.active=!1,this.node.pauseSystemEvents(!0),this.uiManager.pauseCounting()}},{key:"resumeGame",value:function value(){this.node.active=!0,this.node.resumeSystemEvents(!0),this.uiManager.resumeCounting()}},{key:"attemptCallCreateShortcut",value:function value(){var _$e,t=null!=(_$e=this.gameData)?_$e:{},_$n=t.level,a=t.nextLevelCount;(void 0===_$n?0:_$n)<2||(void 0===a?0:a)<2||"checkAndCreateShortcutAsync"in GameSDK.extra&&GameSDK.extra.checkAndCreateShortcutAsync().catch(function(e){console.warn("checkAndCreateShortcutAsync",e)})}},{key:"initObjects",value:function value(){var _$e=this.createThorn();if(!_instanceof(_$e,ie))throw Error("initObjects: Could not create thorn");var t=_$e.getComponent(W);if(!_instanceof(t,W))throw Error("initObjects: Could not get UITransform of thorn");for(var _$n=this.uiTransform.getBoundingBoxToWorld(),i=_$n.width,a=_$n.height,o=Math.ceil(i/t.width),r=Math.ceil(a/t.height),s=0;s<o;s++)this.topThorns.addChild(this.createThorn()),this.bottomThorns.addChild(this.createThorn());for(var l=0;l<r;l++)this.leftThorns.addChild(this.createThorn()),this.rightThorns.addChild(this.createThorn());this.rightThorns.addChild(_$e),console.log("initObjects: Done",o,r)}},{key:"getBoundingBox",value:function value(){return this.uiTransform.getBoundingBoxToWorld()}},{key:"getDogeSpawnPosition",value:function value(){var _$e=this.uiTransform.getBoundingBoxToWorld().center;return[_$e.x,_$e.y]}},{key:"createThorn",value:function value(){var _$e=Pe(this.thornPrefab);return _$e.name=qh.THORN,_$e}},{key:"processCrazyGamesGameplayStart",value:function value(){"gameplayStart"in GameSDK.extra&&GameSDK.extra.gameplayStart()}},{key:"processCrazyGamesGameplayStop",value:function value(){"gameplayStop"in GameSDK.extra&&GameSDK.extra.gameplayStop()}},{key:"processCrazyGamesHappyTime",value:function value(){"happyTime"in GameSDK.extra&&GameSDK.extra.happyTime()}}]),n}(U)).prototype,"thornPrefab",[bw],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Lw=u(Tw.prototype,"bottomThorns",[Sw],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Pw=u(Tw.prototype,"topThorns",[kw],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_w=u(Tw.prototype,"leftThorns",[ww],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Bw=u(Tw.prototype,"rightThorns",[Cw],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Dw=u(Tw.prototype,"gameObjects",[Ew],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Aw=Tw))||Aw)||Aw);x._RF.pop(),x._RF.push({},"43aefNoI9lJxJNh3LPuKYPt","BaseState",void 0);var Hw=function(){function e(t){if(o(this,e),this.game=null,this.data={},this.game=t.node.getComponent(Uw),!this.game)throw Error("Gameplay component not found");this.manager=t,this.updateStateData(),this.logDebug()}return r(e,[{key:"logDebug",value:function value(){var _$e=this.constructor.name;console.debug("[STATE] ".concat(_$e),this.data)}},{key:"updateStateData",value:function value(){if(this.game){var _$e=this.game.getGameData();_$e&&(this.data=_$e)}}},{key:"updateGameData",value:function value(e){var t;null==(t=this.game)||t.setGameData(e),this.updateStateData()}}]),e}();x._RF.pop(),x._RF.push({},"109f0WH9r9IQqMHpvD45PzQ","DeathState",void 0);var jw=codex.analytics,Ww=function(e){i(n,e);var t=a(n);function n(e){var i,a,r;return o(this,n),(r=t.call(this,e)).processCrazyGamesEvent(),r.disableUI(),k.stopAllSounds(),r.vibrateDevice(),r.pauseCountdown(),r.logLevelFailAnalytics(),null==(i=r.game)||i.scheduleOnce(function(){r.stopDogesLooking(),k.playSound(Zn.LEVEL_FAIL,{volume:.3})},.5),null==(a=r.game)||a.scheduleOnce(function(){r.sleepObjects(),r.showLoseScreen(),r.manager.finish()},1.8),r}return r(n,[{key:"processCrazyGamesEvent",value:function value(){"gameplayStop"in GameSDK.extra&&GameSDK.extra.gameplayStop()}},{key:"load",value:function value(){}},{key:"initialize",value:function value(){}},{key:"ready",value:function value(){}},{key:"play",value:function value(){}},{key:"death",value:function value(){}},{key:"finish",value:function value(){var _$e=this.manager.createFinishState();this.manager.change(_$e)}},{key:"update",value:function value(){}},{key:"disableUI",value:function value(){var _$e;null==(_$e=this.game)||_$e.uiManager.disableUI()}},{key:"sleepObjects",value:function value(){var _$e;null==(_$e=this.game)||null==(_$e=_$e.gameObjects)||_$e.sleepObjects()}},{key:"pauseCountdown",value:function value(){var _$e;null==(_$e=this.game)||_$e.uiManager.pauseCounting()}},{key:"stopDogesLooking",value:function value(){var _$e;if(null!=(_$e=this.game)&&_$e.gameObjects){var t,_$n=this.game.gameObjects.getComponentsInChildren(Vy),i=l(_$n);try{for(i.s();!(t=i.n()).done;){var a,o=t.value;null==(a=o.eyes)||a.stopLook(),o.setEnable(!1)}}catch(e){i.e(e)}finally{i.f()}}}},{key:"vibrateDevice",value:function value(){var _$e;null==(_$e=ge("Vibrate"))||null==(_$e=_$e.getComponent(ph))||_$e.vibrate(500)}},{key:"showLoseScreen",value:function value(){var _$e=this.data.level;L.openScreen(P.LOSE_SCREEN,{level:_$e})}},{key:"logLevelFailAnalytics",value:function value(){jw.levelComplete(1,0,Nh)}}]),n}(Hw);x._RF.pop(),x._RF.push({},"638devCm49MrpqRRWptDInp","FinishState",void 0);var Vw=codex.player,$w=function(e){i(u,e);var s,l=a(u);function u(e){var t;return o(this,u),t=l.call(this,e),k.turnUpMusic(),k.stopSound(Zn.BEE_FLYING),t.finishGameAsync(),t}return r(u,[{key:"load",value:function value(){var _$e=this.manager.createLoadingState();this.manager.change(_$e)}},{key:"initialize",value:function value(){var _$e=this.manager.createInitializeState();this.manager.change(_$e)}},{key:"ready",value:function value(){}},{key:"play",value:function value(){}},{key:"death",value:function value(){}},{key:"finish",value:function value(){}},{key:"update",value:function value(){}},{key:"finishGameAsync",value:(s=t(n().mark(function e(){var t,i,a,o,r;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.game){e.next=3;break}return e.abrupt("return");case 3:return a=this.game.uiManager.getBestScore(),r=(o=null!=(t=null==(i=Vw.getGameData())?void 0:i.bestEndlessScore)?t:0)<a?a:o,Vw.setGameData({bestEndlessScore:r}),this.updateGameData({bestEndlessScore:r}),e.next=10,ag.finishMatchAsync();case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.error("finishGameAsync",e.t0);case 15:case"end":return e.stop()}},e,this,[[0,12]])})),function(){return s.apply(this,arguments)})}]),u}(Hw);x._RF.pop(),x._RF.push({},"97260ZJNotE0LYFeNm4wsEz","InitializeState",void 0);var qw=function(e){i(c,e);var s,l,u=a(c);function c(e){var t;return o(this,c),t=u.call(this,e),"CrazyGames"===GameSDK.getSDKName()&&t.processCrazyGamesRequirements(),t.enableUI(),t.clearGameObjects(),t.createGameObjects(),t.initClock(),k.playMusic(Zn.BG_MUSIC),t.startGameAsync().then(function(){t.closeLoadingScreen(),t.manager.ready()}),t}return r(c,[{key:"processCrazyGamesRequirements",value:function value(){"gameplayStart"in GameSDK.extra&&GameSDK.extra.gameplayStart(),this.showInterAdsCrazyGames()}},{key:"showInterAdsCrazyGames",value:(l=t(n().mark(function e(){return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.game){e.next=2;break}return e.abrupt("return");case 2:return k.stopAllSounds(),e.next=5,E.showInterstitialAdAsync({forLevel:this.data.level,includeSDK:["CrazyGames"]});case 5:k.turnUpMusic();case 6:case"end":return e.stop()}},e,this)})),function(){return l.apply(this,arguments)})},{key:"load",value:function value(){if(Ludex.Utils.Valid.isDebugger()){var _$e=this.manager.createLoadingState();this.manager.change(_$e)}}},{key:"initialize",value:function value(){}},{key:"ready",value:function value(){var _$e=this.manager.createReadyState();this.manager.change(_$e)}},{key:"play",value:function value(){}},{key:"death",value:function value(){var _$e=this.manager.createDeathState();this.manager.change(_$e)}},{key:"finish",value:function value(){}},{key:"update",value:function value(){}},{key:"closeLoadingScreen",value:function value(){L.closeScreen(P.LOADING_SCREEN)}},{key:"enableUI",value:function value(){var _$e;null==(_$e=this.game)||_$e.uiManager.enableUI()}},{key:"clearGameObjects",value:function value(){var _$e;null!=(_$e=this.game)&&_$e.gameObjects&&this.game.gameObjects.clearObjects()}},{key:"createGameObjects",value:function value(){var _$e,t,n,i=null!=(_$e=null==(t=this.game)?void 0:t.getDogeSpawnPosition())?_$e:[0,0],a=C(i,2),o=a[0],r=a[1],s=null==(n=this.game)?void 0:n.gameObjects.spawnDoge({x:o,y:r,right:!1,isWorldPosition:!0,rigidBodyConfig:{gravityScale:2}});if(!_instanceof(s,ie))throw Error("Could not create doge");var l=s.getComponent(Se);if(!l)throw Error("Could not get rigidBody");l.sleep()}},{key:"initClock",value:function value(){null==(_$e=this.game)||_$e.uiManager.initCounting();var _$e,t,n=this.data.bestEndlessScore;null==(t=this.game)||t.uiManager.setBestScore(void 0===n?0:n)}},{key:"startGameAsync",value:(s=t(n().mark(function e(){return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!this.data.isFromLoader){e.next=4;break}return this.updateGameData({isFromLoader:!1}),e.abrupt("return");case 4:return e.next=6,ag.startMatchAsync();case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("startGameAsync",e.t0);case 11:case"end":return e.stop()}},e,this,[[0,8]])})),function(){return s.apply(this,arguments)})}]),c}(Hw);x._RF.pop(),x._RF.push({},"ecbe0PxfZNJBLsmLBPc2pBD","LoadingState",void 0);var Kw=codex.player,Yw=function(e){i(n,e);var t=a(n);function n(e){o(this,n),s=t.call(this,e);var i,a,r,s,l=null!=(i=null==(a=Kw.getGameData())?void 0:a.bestEndlessScore)?i:0;return s.updateGameData({bestEndlessScore:l}),L.showLoadingScreen(),null==(r=s.game)||r.scheduleOnce(function(){s.initialize()},.5),s}return r(n,[{key:"load",value:function value(){}},{key:"initialize",value:function value(){var _$e=this.manager.createInitializeState();this.manager.change(_$e)}},{key:"ready",value:function value(){}},{key:"play",value:function value(){}},{key:"death",value:function value(){}},{key:"finish",value:function value(){}},{key:"update",value:function value(){}}]),n}(Hw);x._RF.pop(),x._RF.push({},"651d4HD0HpFPLrL8dycqU3R","PlayingState",void 0);var Jw=codex.player;function Xw(){var e=Object.keys(Ch).map(function(e){return parseInt(e)}).sort(function(e,t){return e-t}),t=0;return{current:function current(){var n;return null!=(n=e[t])?n:0},canGoNext:function canGoNext(n){var i=t+1;if(i>=e.length)return!1;var a=e[i];return!!a&&n>a},next:function next(){var n;if(t>=e.length-1)throw Error("No more progressions");return null!=(n=e[t++])?n:0}}}var Zw=function(e){i(n,e);var t=a(n);function n(e){var i;return o(this,n),(i=t.call(this,e)).totalElapsed=0,i.spawnElapsed=0,i.spawnInterval=2,i.flyForce=18,i.progressionIt=Xw(),i.onTouchStart=function(){i.dogeRigidBody.linearVelocity=new ye(0,i.flyForce)},i.findDoge(),i.wakeUpObjects(),i.spawnEnemies(),i.startCounting(),k.turnDownMusic(),i.listenInputEvents(),i}return r(n,[{key:"listenInputEvents",value:function value(){var _$e,t;ue.os===ue.OS.WINDOWS||ue.os===ue.OS.OSX?(document.addEventListener("pointerdown",this.onTouchStart),null==(_$e=this.game)||_$e.node.on(ie.EventType.MOUSE_DOWN,this.onTouchStart)):null==(t=this.game)||t.node.on(ie.EventType.TOUCH_START,this.onTouchStart)}},{key:"unlistenInputEvents",value:function value(){var _$e,t;ue.os===ue.OS.WINDOWS||ue.os===ue.OS.OSX?(document.removeEventListener("pointerdown",this.onTouchStart),null==(_$e=this.game)||_$e.node.off(ie.EventType.MOUSE_DOWN,this.onTouchStart)):null==(t=this.game)||t.node.off(ie.EventType.TOUCH_START,this.onTouchStart)}},{key:"findDoge",value:function value(){var _$e,t=null==(_$e=this.game)||null==(_$e=_$e.gameObjects)?void 0:_$e.getRandomDogeToBee();if(!t)throw Error("No doge found in GameObjects");this.doge=t;var _$n=this.doge.getComponent(Se);if(!_$n)throw Error("No rigid body found in doge");this.dogeRigidBody=_$n}},{key:"load",value:function value(){this.unlistenInputEvents();var _$e=this.manager.createLoadingState();this.manager.change(_$e)}},{key:"initialize",value:function value(){this.unlistenInputEvents(),k.stopSound(Zn.BEE_FLYING);var _$e=this.manager.createInitializeState();this.manager.change(_$e)}},{key:"ready",value:function value(){}},{key:"play",value:function value(){}},{key:"death",value:function value(){this.unlistenInputEvents();var _$e=this.manager.createDeathState();this.manager.change(_$e)}},{key:"finish",value:function value(){}},{key:"update",value:function value(e){if(this.spawnElapsed+=e,this.totalElapsed+=e,this.progressionIt.canGoNext(this.totalElapsed)&&(this.progressionIt.next(),this.updateProgressionToPlugin()),this.spawnElapsed>this.spawnInterval){var _$n=Ch[this.progressionIt.current()];_$n&&(this.handleSpawn(_$n),this.spawnElapsed=0)}}},{key:"updateProgressionToPlugin",value:function value(){var _$e;ag.setProfileMatchDataAsync({id:Jw.getPlayerId(),endlessScore:Math.round(null!=(_$e=this.data.bestEndlessScore)?_$e:0)})}},{key:"handleSpawn",value:function value(e){if(!this.game)throw Error("Game is not defined");var t=this.game.getBoundingBox(),_$n=0===de.randomRangeInt(0,2)?t.xMin-0:t.xMax+0,i=this.doge.node.worldPosition.y+de.randomRangeInt(-100,100),a=this.doge.node.getWorldPosition(),o=a.x,r=a.y,s=new te(_$n,i,0),l=s.x+2*(o-s.x),u=s.y+2*(r-s.y);this.spawnPredictionLine(s,l,u),this.spawnCrossingBee(o,r,s,e)}},{key:"spawnCrossingBee",value:function value(e,t,n,i){var a=this;if(!this.game)throw Error("Game is not defined. Only use this method in PlayingState");this.game.scheduleOnce(function(){a.game.gameObjects.spawnCrossingBees(d({playerWorldX:e,playerWorldY:t,spawnWorldX:n.x,spawnWorldY:n.y},i))},1)}},{key:"spawnPredictionLine",value:function value(e,t,n){if(!this.game)throw Error("Game is not defined. Only use this method in PlayingState");var i=this.game.gameObjects.spawnCrossingBeeLine({startX:e.x,startY:e.y,endX:t,endY:n,spriteType:sy.LOW,thickness:0});q(i).call(function(){k.playSound(Zn.BEE_FLYING)}).to(.5,{thickness:80},{easing:"expoOut"}).start(),this.game.scheduleOnce(function(){q(i).to(.5,{thickness:0},{easing:"expoOut"}).call(function(){i.destroy(),k.stopSound(Zn.BEE_FLYING)}).start()},1)}},{key:"wakeUpObjects",value:function value(){var _$e;null==(_$e=this.game)||null==(_$e=_$e.gameObjects)||_$e.wakeUpObjects(),this.dogeRigidBody.wakeUp()}},{key:"spawnEnemies",value:function value(){this.game&&this.game.gameObjects&&(this.game.gameObjects.spawnBees(),this.game.gameObjects.reviveBigBees())}},{key:"startCounting",value:function value(){var _$e;null==(_$e=this.game)||_$e.uiManager.startCounting()}}]),n}(Hw);x._RF.pop(),x._RF.push({},"9516f5Gc/FENLPaNEZwDwcn","ReadyState",void 0);var Qw,eC=codex.analytics,tC=function(e){i(n,e);var t=a(n);function n(e){var i;return o(this,n),(i=t.call(this,e)).onTouchStart=function(){var _$e;i.manager.play(),null==(_$e=i.game)||_$e.handleHideTapToPlayText()},i.logLevelStartAnalytics(),i.listenInputEvents(),i}return r(n,[{key:"listenInputEvents",value:function value(){var _$e,t;ue.os===ue.OS.WINDOWS||ue.os===ue.OS.OSX?(document.addEventListener("pointerdown",this.onTouchStart,{once:!0}),null==(_$e=this.game)||_$e.node.once(ie.EventType.MOUSE_DOWN,this.onTouchStart)):null==(t=this.game)||t.node.once(ie.EventType.TOUCH_START,this.onTouchStart)}},{key:"unlistenInputEvents",value:function value(){var _$e,t;ue.os===ue.OS.WINDOWS||ue.os===ue.OS.OSX?(document.removeEventListener("pointerdown",this.onTouchStart),null==(_$e=this.game)||_$e.node.off(ie.EventType.MOUSE_DOWN,this.onTouchStart)):null==(t=this.game)||t.node.off(ie.EventType.TOUCH_START,this.onTouchStart)}},{key:"load",value:function value(){if(this.unlistenInputEvents(),Ludex.Utils.Valid.isDebugger()){var _$e=this.manager.createLoadingState();this.manager.change(_$e)}}},{key:"initialize",value:function value(){}},{key:"ready",value:function value(){}},{key:"play",value:function value(){this.unlistenInputEvents();var _$e=this.manager.createPlayingState();this.manager.change(_$e)}},{key:"death",value:function value(){if(this.unlistenInputEvents(),Ludex.Utils.Valid.isDebugger()){var _$e=this.manager.createDeathState();this.manager.change(_$e)}}},{key:"finish",value:function value(){}},{key:"update",value:function value(){}},{key:"logLevelStartAnalytics",value:function value(){eC.levelStart(1,0,Nh)}}]),n}(Hw);x._RF.pop(),x._RF.push({},"946848BySlM54Wly5+1otNa","EndlessStateManager",void 0);var nC=(0,F.ccclass)("EndlessStateManager")(Qw=function(e){i(n,e);var t=a(n);function n(){return o(this,n),t.apply(this,arguments)}return r(n,[{key:"init",value:function value(){this.state=new Yw(this)}},{key:"change",value:function value(e){this.state=e}},{key:"load",value:function value(){this.state.load()}},{key:"initialize",value:function value(){this.state.initialize()}},{key:"isInitialize",value:function value(){return _instanceof(this.state,qw)}},{key:"ready",value:function value(){this.state.ready()}},{key:"isReady",value:function value(){return _instanceof(this.state,tC)}},{key:"play",value:function value(){this.state.play()}},{key:"isPlaying",value:function value(){return _instanceof(this.state,Zw)}},{key:"death",value:function value(){this.state.death()}},{key:"isFailed",value:function value(){return _instanceof(this.state,Ww)}},{key:"finish",value:function value(){this.state.finish()}},{key:"isFinished",value:function value(){return _instanceof(this.state,$w)}},{key:"update",value:function value(e){this.state&&this.state.update(e)}},{key:"createInitializeState",value:function value(){return new qw(this)}},{key:"createLoadingState",value:function value(){return new Yw(this)}},{key:"createReadyState",value:function value(){return new tC(this)}},{key:"createPlayingState",value:function value(){return new Zw(this)}},{key:"createDeathState",value:function value(){return new Ww(this)}},{key:"createFinishState",value:function value(){return new $w(this)}}]),n}(U))||Qw;x._RF.pop(),x._RF.push({},"d10c8b8p8RD45oVz5qSL2LD","clampToBoundingBox",void 0),x._RF.pop(),x._RF.push({},"02e30BdQXxIEbItBFTh00UT","getClosestPair",void 0),x._RF.pop(),x._RF.push({},"eb6c23usqxHPaoJcvF0LbY6","separatePositions",void 0),x._RF.pop(),x._RF.push({},"bfb989Gr/dArq4M9uSSrF5/","stagger",void 0),x._RF.pop(),x._RF.push({},"d2a57+mB4NG9rcdh+dy1VPe","traverse4",void 0),x._RF.pop(),x._RF.push({},"ca614iJ+X5LrL1rX/wDQDTD","shuffle",void 0),x._RF.pop(),x._RF.push({},"1cf4cygDSdP5JL+7w3wIJL7","traverseRandom",void 0),x._RF.pop(),x._RF.push({},"cd0d548/WxD7KCyW2hwySVO","traverseSpiralIn",void 0),x._RF.pop(),x._RF.push({},"a70090n5pRBdIZb/GuW6wDs","toSortedIndices",void 0),Ludex.Utils.Array,x._RF.pop(),x._RF.push({},"56e87lhVSNJ8LMUzQpgUomc","randomSign",void 0),x._RF.pop(),x._RF.push({},"1e7cch8i/5DkYHOwJowrjeg","AFPool",void 0),x._RF.pop(),x._RF.push({},"1faa9NgJrBE7p8Zs/HBWrZn","pad",void 0),x._RF.pop(),x._RF.push({},"78746Q4viBIlbRROK4J1bSl","Burst",void 0);var iC,aC,oC,rC,sC,uC,cC,hC,pC,dC,vC,yC,fC,mC,gC,bC,SC,kC,CC,EC,AC,TC,RC,LC,PC,_C,BC=F.ccclass,DC=F.property,OC=(iC=BC("Burst"),aC=DC(V),oC=DC(M),rC=DC(V),sC=DC(M),iC((cC=u((uC=function(){function e(){o(this,e),c(this,"time",cC,this),c(this,"repeatCount",hC,this),c(this,"repeatInterval",pC,this),c(this,"count",dC,this),this.remainingCount=0,this.curTime=0}return r(e,[{key:"update",value:function value(e,t){if(0===this.remainingCount&&(this.remainingCount=this.repeatCount,this.curTime=this.time),this.remainingCount>0){var n=He(e.time-e.startDelay.evaluate(0,1),e.duration)-t;n=n>0?n:0;var i=He(e.time-e.startDelay.evaluate(0,1),e.duration);this.curTime>=n&&this.curTime<i&&(e.emit(this.count,t-(i-this.curTime)),this.curTime+=this.repeatInterval,--this.remainingCount)}}},{key:"reset",value:function value(){this.remainingCount=0,this.curTime=0}}]),e}()).prototype,"time",[aC],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return 0}}),hC=u(uC.prototype,"repeatCount",[oC],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return 1}}),pC=u(uC.prototype,"repeatInterval",[rC],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return 1}}),dC=u(uC.prototype,"count",[sC],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return 1}}),uC))||uC);x._RF.pop(),x._RF.push({},"00eb3NBo0tM/qcD6ViMjx0A","CurveRange",void 0);var IC,xC,NC,FC,zC,GC,MC,UC,jC,WC,VC,$C,qC,KC,YC,JC,XC=F.ccclass,ZC=F.property,QC=fe({Constant:0,Curve:1,TwoCurves:2,TwoConstants:3}),eE=(vC=XC("CurveRange"),yC=ZC({type:fe(QC)}),fC=ZC({visible:function visible(){return this.mode===QC.Constant}}),mC=ZC({visible:function visible(){return this.mode===QC.Curve}}),gC=ZC({visible:function visible(){return this.mode===QC.TwoCurves}}),bC=ZC({visible:function visible(){return this.mode===QC.TwoCurves}}),SC=ZC({visible:function visible(){return this.mode===QC.TwoConstants}}),kC=ZC({visible:function visible(){return this.mode===QC.TwoConstants}}),vC((EC=u((CC=function(){function e(){o(this,e),c(this,"mode",EC,this),c(this,"constant",AC,this),c(this,"spline",TC,this),c(this,"splineMin",RC,this),c(this,"splineMax",LC,this),c(this,"constantMin",PC,this),c(this,"constantMax",_C,this),this.spline.assignSorted([0,1],[0,1]),this.splineMin.assignSorted([0,1],[0,1]),this.splineMax.assignSorted([0,1],[0,1])}return r(e,[{key:"evaluate",value:function value(e,t){switch(this.mode){case QC.Curve:return this.spline.evaluate(e);case QC.TwoCurves:return je(this.splineMin.evaluate(e),this.splineMax.evaluate(e),t);case QC.TwoConstants:return je(this.constantMin,this.constantMax,t);default:return this.constant}}},{key:"getMax",value:function value(){switch(this.mode){case QC.Curve:return 1;case QC.TwoConstants:return this.constantMax;case QC.TwoCurves:return 1;default:return this.constant}}},{key:"isZero",value:function value(){switch(this.mode){case QC.Curve:return We(1,0,Ve);case QC.TwoConstants:return We(Math.max(Math.abs(this.constantMax),Math.abs(this.constantMin)),0,Ve);case QC.TwoCurves:return We(1,0,Ve);default:return We(this.constant,0,Ve)}}}]),e}()).prototype,"mode",[yC],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return QC.Constant}}),AC=u(CC.prototype,"constant",[fC],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return 0}}),TC=u(CC.prototype,"spline",[mC],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return new $e}}),RC=u(CC.prototype,"splineMin",[gC],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return new $e}}),LC=u(CC.prototype,"splineMax",[bC],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return new $e}}),PC=u(CC.prototype,"constantMin",[SC],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return 0}}),_C=u(CC.prototype,"constantMax",[kC],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return 0}}),CC))||CC);x._RF.pop(),x._RF.push({},"3fe5eBRNTJFCZgeD7SqFSh5","GradientRange",void 0);var tE=F.ccclass,nE=F.property,iE=fe({Color:0,Gradient:1,TwoColors:2,TwoGradients:3,RandomColor:4}),aE=new le,oE=new le,rE=(IC=tE("GradientRange"),xC=nE({type:fe(iE)}),NC=nE({visible:function visible(){return this.mode===iE.Color}}),FC=nE({visible:function visible(){return this.mode===iE.TwoColors}}),zC=nE({visible:function visible(){return this.mode===iE.TwoColors}}),GC=nE({visible:function visible(){return this.mode===iE.Gradient||this.mode===iE.RandomColor}}),MC=nE({visible:function visible(){return this.mode===iE.TwoGradients}}),UC=nE({visible:function visible(){return this.mode===iE.TwoGradients}}),IC((WC=u((jC=function(){function e(){o(this,e),c(this,"mode",WC,this),c(this,"color",VC,this),c(this,"colorMin",$C,this),c(this,"colorMax",qC,this),c(this,"gradient",KC,this),c(this,"gradientMin",YC,this),c(this,"gradientMax",JC,this),this._color=le.WHITE.clone()}return r(e,[{key:"evaluate",value:function value(e,t){switch(this.mode){case iE.Color:return this.color;case iE.TwoColors:return le.lerp(this._color,this.colorMin,this.colorMax,t),this._color;case iE.RandomColor:return this.gradient.getRandomColor(this._color);case iE.Gradient:return this.gradient.evaluateFast(this._color,e);case iE.TwoGradients:return le.lerp(this._color,this.gradientMin.evaluateFast(aE,e),this.gradientMax.evaluateFast(oE,e),t),this._color;default:return this.color}}}]),e}()).prototype,"mode",[xC],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return iE.Color}}),VC=u(jC.prototype,"color",[NC],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return le.WHITE.clone()}}),$C=u(jC.prototype,"colorMin",[FC],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return le.WHITE.clone()}}),qC=u(jC.prototype,"colorMax",[zC],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return le.WHITE.clone()}}),KC=u(jC.prototype,"gradient",[GC],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return new qe}}),YC=u(jC.prototype,"gradientMin",[MC],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return new qe}}),JC=u(jC.prototype,"gradientMax",[UC],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return new qe}}),jC))||jC);function sE(e,t,n,i){ye.set(e,Math.cos(i),Math.sin(i)),e.z=0,te.multiplyScalar(e,e,t+(n-t)*Ye())}function lE(e){switch(e.mode){case QC.TwoCurves:case QC.TwoConstants:return!0;default:return!1}}x._RF.pop(),x._RF.push({},"1a4c4Z/fWpFuL5b3emrVLug","ParticleFunction",void 0),x._RF.pop(),x._RF.push({},"370cbFjxn9GKJzqbTOhQZiA","ParticleSimulator",void 0);var uE=new te(0,0,0),cE=function(){function e(){o(this,e),this.pos=new te(0,0,0),this.color=new le(255,255,255,255),this.size=new te(0,0,0),this.startSize=new te(0,0,0),this.rotation=new te(0,0,0),this.startLifetime=0,this.remainingLifetime=0,this.randomSeed=0,this.velocity=new te(0,0),this.width=0,this.height=0}return r(e,[{key:"init",value:function value(){this.pos.set(uE),this.remainingLifetime=0,this.startLifetime=0,this.startSize.set(uE),this.startColor=le.WHITE.clone(),this.velocity.set(uE),this.randomSeed=0}}]),e}(),hE=new(function(e){i(n,e);var t=a(n);function n(){return o(this,n),t.apply(this,arguments)}return r(n,[{key:"get",value:function value(){return this._get()||new cE}}]),n}(Ze.Pool))(function(e){e.pos.set(uE),e.color.set(255,255,255,255),e.size.set(uE),e.rotation.set(uE)},1024),pE=function(){function e(t){o(this,e),this.particles=[],this.active=!1,this.uvFilled=0,this.renderData=new et,this.sys=t,this.particles=[],this.active=!1,this.uvFilled=0}return r(e,[{key:"stop",value:function value(){this.active=!1}},{key:"reset",value:function value(){this.active=!0;var _$e,t=this.particles,n=l(t);try{for(n.s();!(_$e=n.n()).done;){var i=_$e.value;hE.put(i)}}catch(e){n.e(e)}finally{n.f()}t.length=0,this.renderData.resize(0,0)}},{key:"emitParticle",value:function value(){var _$e=hE.get();return this.particles.push(_$e),_$e}},{key:"updateUVs",value:function value(e){var t=this.renderData;if(t&&this.sys){var n=t.vData,i=this.sys.spriteFrame;if(!i)return;for(var a=i.uv,o=e?0:this.uvFilled,r=this.particles.length,s=o;s<r;s++){var l,u,c,h,p,d,v,y,f=9*s*4;n[f+3]=null!=(l=a[0])?l:0,n[f+4]=null!=(u=a[1])?u:0,n[f+12]=null!=(c=a[2])?c:0,n[f+13]=null!=(h=a[3])?h:0,n[f+21]=null!=(p=a[4])?p:0,n[f+22]=null!=(d=a[5])?d:0,n[f+30]=null!=(v=a[6])?v:0,n[f+31]=null!=(y=a[7])?y:0}this.uvFilled=r}}},{key:"updateParticleBuffer",value:function value(e,t,n,i){var a=n.vData,o=t.x,r=t.y,s=t.z,l=e.width*e.size.x/2,u=e.height*e.size.y/2,c=e.rotation.x||0,h=e.rotation.y||0,p=e.rotation.z||0;if(0===c&&0===h&&0===p)a[i]=o-l,a[i+1]=r-u,a[i+2]=s,a[i+9]=o+l,a[i+10]=r-u,a[i+11]=s,a[i+18]=o-l,a[i+19]=r+u,a[i+20]=s,a[i+27]=o+l,a[i+28]=r+u,a[i+29]=s;else{var w=function w(e,t,n){var _$i=t*f-n*m,a=t*m+n*f,o=e*g+a*b;return new te(o*S-_$i*k,o*k+_$i*S,a*g-e*b)},d=-Qe.degreesToRadians(c),v=-Qe.degreesToRadians(h),y=-Qe.degreesToRadians(p),f=Math.cos(d),m=Math.sin(d),g=Math.cos(v),b=Math.sin(v),S=Math.cos(y),k=Math.sin(y),C=[w(-l,-u,0),w(l,-u,0),w(-l,u,0),w(l,u,0)];a[i]=C[0].x+o,a[i+1]=C[0].y+r,a[i+2]=C[0].z+s,a[i+9]=C[1].x+o,a[i+10]=C[1].y+r,a[i+11]=C[1].z+s,a[i+18]=C[2].x+o,a[i+19]=C[2].y+r,a[i+20]=C[2].z+s,a[i+27]=C[3].x+o,a[i+28]=C[3].y+r,a[i+29]=C[3].z+s}le.toArray(a,e.color,i+5),le.toArray(a,e.color,i+14),le.toArray(a,e.color,i+23),le.toArray(a,e.color,i+32)}},{key:"step",value:function value(e){var t,n=this.sys.node,i=this.particles;n.updateWorldTransform(),this.active&&this.sys.emitting(e);var a=this.renderData,o=i.length;a.reset(),this.requestData(4*o,6*o),o>this.uvFilled&&this.updateUVs();for(var r=0;r<i.length;){var s=i[r];if(s)if(s.remainingLifetime-=e,s.remainingLifetime>0){var l=9*r*4;this.updateParticleBuffer(s,s.pos,a,l),++r}else{var u=i[r];if(!u)continue;if(r!==i.length-1){var c=i[i.length-1];c&&(i[r]=c)}hE.put(u),i.length--,a.resize(a.vertexCount-4,a.indexCount-6)}}this.renderData.material=this.sys.getRenderMaterial(0),this.renderData.frame=this.sys.spriteFrame,null==a||null==(t=a.setRenderDrawInfoAttributes)||t.call(a)}},{key:"requestData",value:function value(e,t){var n=this.renderData.indexCount;this.renderData.request(e,t);for(var i=this.renderData.indexCount/6,a=this.renderData.iData,o=n;o<i;o++){var r=4*o;a[n++]=r,a[n++]=r+1,a[n++]=r+2,a[n++]=r+1,a[n++]=r+3,a[n++]=r+2}}},{key:"initDrawInfo",value:function value(){var _$e,t=this.renderData;null==t||null==(_$e=t.setRenderDrawInfoAttributes)||_$e.call(t)}}]),e}();x._RF.pop(),x._RF.push({},"c2fc2/T2apMGZCPX5a4abo/","ModuleRandSeed",void 0),x._RF.pop(),x._RF.push({},"39785+APfBJU5kvcdjZGiLr","ColorOvertimeModule",void 0);var dE,vE,yE,mE,gE,bE,TE,RE,LE,PE,BE,DE,OE,IE,xE=F.ccclass,NE=F.property,zE=(dE=xE("ColorOvertimeModule"),vE=NE({type:Q}),yE=NE({type:rE}),dE((gE=u((mE=function(){function e(){o(this,e),c(this,"enable",gE,this),c(this,"color",bE,this)}return r(e,[{key:"update",value:function value(e){if(this.enable){e.color.set(e.startColor);var t=!function(e){switch(e.mode){case iE.TwoGradients:case iE.TwoColors:return!0;default:return!1}}(this.color)?0:tt(e.randomSeed+91041);e.color.multiply(this.color.evaluate(1-e.remainingLifetime/e.startLifetime,t))}}}]),e}()).prototype,"enable",[vE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bE=u(mE.prototype,"color",[yE],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return new rE}}),mE))||mE);x._RF.pop(),x._RF.push({},"c397apirpxFfJTJN1KLAcGi","LimitVelocityOvertimeModule",void 0);var GE,ME,UE,HE,jE,WE,$E,qE,KE,YE,JE,XE,ZE=F.ccclass,QE=F.property,tA=(TE=ZE("LimitVelocityOvertimeModule"),RE=QE({type:Q}),LE=QE({type:eE}),PE=QE({type:eE}),TE((DE=u((BE=function(){function e(){o(this,e),c(this,"enable",DE,this),c(this,"limit",OE,this),c(this,"dampen",IE,this),this.limit.constant=500,this.dampen.constant=.2}return r(e,[{key:"update",value:function value(e,t){if(this.enable){var n=1-e.remainingLifetime/e.startLifetime,i=e.velocity.clone().normalize(),a=lE(this.limit)?tt(e.randomSeed+23541):0,o=lE(this.dampen)?tt(e.randomSeed+23541+1):0,r=e.velocity.length(),s=this.limit.evaluate(n,a),l=this.dampen.evaluate(n,o);e.velocity=i.multiplyScalar(this.dampenBeyondLimit(r,s,l,t))}}},{key:"dampenBeyondLimit",value:function value(e,t,n,i){if(e<=t)return e;var a=1-Math.exp(-n*i);return de.lerp(e,t,a)}}]),e}()).prototype,"enable",[RE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),OE=u(BE.prototype,"limit",[LE],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return new eE}}),IE=u(BE.prototype,"dampen",[PE],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return new eE}}),BE))||BE);x._RF.pop(),x._RF.push({},"c6cfbhYVctHt53aUXC4oSWy","RotationOvertimeModule",void 0);var nA,iA,aA,oA,rA,sA,lA,uA,cA,hA,pA,vA,yA,fA,mA,gA,bA,SA,kA,wA,CA,EA,AA=F.ccclass,TA=F.property,LA=(GE=AA("RotationOvertimeModule"),ME=TA({type:Q}),UE=TA(Q),HE=TA({type:eE,visible:function visible(){return this.separateAxes}}),jE=TA({type:eE,visible:function visible(){return this.separateAxes}}),WE=TA({type:eE}),GE((qE=u(($E=function(){function e(){o(this,e),c(this,"enable",qE,this),c(this,"separateAxes",KE,this),c(this,"x",YE,this),c(this,"y",JE,this),c(this,"z",XE,this)}return r(e,[{key:"update",value:function value(e,t){if(this.enable){var n=1-e.remainingLifetime/e.startLifetime,i=e.randomSeed+125292,a=lE(this.z)?tt(i):0,o=this.z.evaluate(n,a)*t,r=0,s=0;if(this.separateAxes){var l=lE(this.x)?tt(i):0,u=lE(this.y)?tt(i):0;r=this.x.evaluate(n,l)*t,s=this.y.evaluate(n,u)*t}e.rotation.add3f(r,s,o)}}}]),e}()).prototype,"enable",[ME],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),KE=u($E.prototype,"separateAxes",[UE],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return!1}}),YE=u($E.prototype,"x",[HE],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return new eE}}),JE=u($E.prototype,"y",[jE],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return new eE}}),XE=u($E.prototype,"z",[WE],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return new eE}}),$E))||$E);x._RF.pop(),x._RF.push({},"f63cd4ScDJFPrnTLNT4+QKu","ShapeModule",void 0);var PA,_A,BA,DA,OA,IA,NA,FA,zA,GA,MA,UA,HA=F.ccclass,jA=F.property,WA=fe({Circle:0,Rectangle:1}),VA=fe({Base:0,Edge:1}),$A=function $A(){return this.shape===WA.Circle},qA=function qA(){return this.shape===WA.Rectangle},KA=[0,0],YA=(nA=HA("ShapeModule"),iA=jA({type:fe(WA)}),aA=jA({type:fe(VA),visible:qA}),oA=jA({}),rA=jA({}),sA=jA({}),lA=jA({range:[0,360],visible:$A}),uA=jA({range:[-360,360],visible:$A}),cA=jA({min:0,visible:$A}),hA=jA({range:[0,1],step:.01,visible:$A}),pA=jA({visible:qA}),nA((yA=u((vA=function(){function e(){o(this,e),c(this,"shape",yA,this),c(this,"emitFrom",fA,this),c(this,"position",mA,this),c(this,"rotation",gA,this),c(this,"scale",bA,this),c(this,"arc",SA,this),c(this,"angle",kA,this),c(this,"radius",wA,this),c(this,"radiusThickness",CA,this),c(this,"rectangleThickness",EA,this)}return r(e,[{key:"emit",value:function value(e){switch(this.shape){case WA.Circle:this.circleEmit(this.radius,this.radiusThickness,nt(this.generateArcAngle()),e);break;case WA.Rectangle:this.rectangleEmit(this.emitFrom,this.rectangleThickness,e)}}},{key:"circleEmit",value:function value(e,t,n,i){var a=i.pos;sE(a,e*(1-t),e,n+nt(this.angle)),i.velocity=a.clone().normalize()}},{key:"rectangleEmit",value:function value(e,t,n){var i,r=n.pos;switch(e){case VA.Base:ye.set(r,Je(-t.x,t.x),Je(-t.y,t.y));break;case VA.Edge:KA[0]=Je(-1,1),KA[1]=(0===(i=Je(-1,1))&&i++,Ke.sign(i)),function(e){for(var _$t=0;_$t<e.length;_$t++){var _$n=_$t+Xe(0,e.length-_$t),i=e[_$n];e[_$n]=e[_$t],e[_$t]=i}}(KA),this.applyRectThickness(KA,t),ye.set(r,KA[0],KA[1])}n.velocity=r.clone().normalize()}},{key:"generateArcAngle",value:function value(){return Je(0,this.arc)}},{key:"applyRectThickness",value:function value(e,t){t.x>0&&(e[0]*=t.x),t.y>0&&(e[1]*=t.y)}},{key:"gizmo",value:function value(e){switch(e.strokeColor.fromHEX("#46C4FFB0"),e.fillColor.fromHEX("#46C4FF77"),e.lineWidth=8,this.shape){case WA.Circle:this.gizmoCircle(e);break;case WA.Rectangle:this.gizmoRectangle(e)}}},{key:"gizmoCircle",value:function value(e){e.clear();var t=this.angle,n=this.angle+this.arc;if(this.createArcPath(e,this.radius,t,n),this.createArcPath(e,this.radius*(1-this.radiusThickness),t,n),this.arc<360&&this.radius>0){var i=this.radius*Math.cos(nt(this.angle)),a=this.radius*Math.sin(nt(this.angle)),o=this.radius*Math.cos(nt(this.arc+this.angle)),r=this.radius*Math.sin(nt(this.arc+this.angle));e.moveTo(i,a),e.lineTo(0,0),e.moveTo(o,r),e.lineTo(0,0)}e.stroke()}},{key:"gizmoRectangle",value:function value(e){e.clear();var t=this.rectangleThickness.x,n=this.rectangleThickness.y;e.moveTo(t,n),e.lineTo(-t,n),e.lineTo(-t,-n),e.lineTo(t,-n),e.close(),e.stroke()}},{key:"createArcPath",value:function value(e,t,n,i){if(!(t<=0))for(var a=(i-n)/48,o=0;o<=48;o++){var r=n+o*a,s=t*Math.cos(nt(r)),l=t*Math.sin(nt(r));0===o?e.moveTo(s,l):e.lineTo(s,l)}}}]),e}()).prototype,"shape",[iA],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return WA.Circle}}),fA=u(vA.prototype,"emitFrom",[aA],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return VA.Base}}),mA=u(vA.prototype,"position",[oA],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return new te(0,0,0)}}),gA=u(vA.prototype,"rotation",[rA],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return new te(0,0,0)}}),bA=u(vA.prototype,"scale",[sA],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return new te(1,1,1)}}),SA=u(vA.prototype,"arc",[lA],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return 360}}),kA=u(vA.prototype,"angle",[uA],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return 25}}),wA=u(vA.prototype,"radius",[cA],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return 1}}),CA=u(vA.prototype,"radiusThickness",[hA],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return 1}}),EA=u(vA.prototype,"rectangleThickness",[pA],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return new ye(20,50)}}),vA))||vA);x._RF.pop(),x._RF.push({},"1b7c1WztGdLzKO8gh4ulm2c","SizeOvertimeModule",void 0);var JA,XA,ZA,QA,tT,nT,iT,aT,oT=F.ccclass,rT=F.property,lT=(PA=oT("SizeOvertimeModule"),_A=rT({type:Q}),BA=rT(Q),DA=rT({type:eE,visible:function visible(){return!this.separateAxes}}),OA=rT({type:eE,visible:function visible(){return this.separateAxes}}),IA=rT({type:eE,visible:function visible(){return this.separateAxes}}),PA((FA=u((NA=function(){function e(){o(this,e),c(this,"enable",FA,this),c(this,"separateAxes",zA,this),c(this,"size",GA,this),c(this,"x",MA,this),c(this,"y",UA,this),this.size.constant=1,this.x.constant=1,this.y.constant=1}return r(e,[{key:"update",value:function value(e){if(this.enable){var t=1-e.remainingLifetime/e.startLifetime,n=e.randomSeed+39825;if(this.separateAxes){var i=lE(this.x)?tt(n):0,a=lE(this.y)?tt(n):0;e.size.x=e.startSize.x*this.x.evaluate(t,i),e.size.y=e.startSize.y*this.y.evaluate(t,a)}else{var o=lE(this.size)?tt(n):0,r=this.size.evaluate(t,o);e.size.multiplyScalar(r)}}}}]),e}()).prototype,"enable",[_A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),zA=u(NA.prototype,"separateAxes",[BA],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return!1}}),GA=u(NA.prototype,"size",[DA],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return new eE}}),MA=u(NA.prototype,"x",[OA],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return new eE}}),UA=u(NA.prototype,"y",[IA],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return new eE}}),NA))||NA);x._RF.pop(),x._RF.push({},"f6ad5Yz6wpE2ZzModn16CYQ","VelocityOvertimeModule",void 0);var uT,cT,hT,pT,dT,vT,yT,fT,mT,gT,bT,ST,kT,wT,CT,ET,AT,TT,RT,LT,PT,_T,BT,DT,OT,IT,xT,NT,FT,zT,GT,MT,UT,HT,jT,WT,VT,$T,qT,KT,YT,JT,XT,ZT,QT,eR,tR,nR,iR,aR,oR,rR,sR,lR,uR,cR,hR,pR,dR,vR,yR,fR=F.ccclass,mR=F.property,gR=(JA=fR("VelocityOvertimeModule"),XA=mR({type:Q}),ZA=mR({type:eE}),QA=mR({type:eE}),JA((nT=u((tT=function(){function e(){o(this,e),c(this,"enable",nT,this),c(this,"x",iT,this),c(this,"y",aT,this),this._temp_v3=new te,this.x.constant=0,this.y.constant=0}return r(e,[{key:"update",value:function value(e,t){if(this.enable){var n=1-e.remainingLifetime/e.startLifetime,i=lE(this.x)?tt(e.randomSeed+197866):0,a=lE(this.y)?tt(e.randomSeed+156497):0,o=te.set(this._temp_v3,this.x.evaluate(n,i),this.y.evaluate(n,a),0);e.velocity.add(o.multiplyScalar(t))}}}]),e}()).prototype,"enable",[XA],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),iT=u(tT.prototype,"x",[ZA],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return new eE}}),aT=u(tT.prototype,"y",[QA],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return new eE}}),tT))||tT);x._RF.pop(),x._RF.push({},"10bc3IfFqBLtpSgVri/NVeX","ParticleSystem",void 0);var bR,SR,kR,CR,ER,AR,TR=F.ccclass,RR=F.property,LR=F.executeInEditMode,PR=F.disallowMultiple,_R=F.playOnFocus,BR=it.Attr.setClassAttr,DR=fe({World:0,Local:1}),OR=(uT=TR("ParticleSystem"),cT=LR(!0),hT=PR(!0),pT=_R(!0),dT=RR({}),vT=RR({formerlySerializedAs:"preview"}),yT=RR(Q),fT=RR({type:fe(DR)}),mT=RR({formerlySerializedAs:"simulationSpace"}),gT=RR(V),bT=RR(Q),ST=RR({type:eE}),kT=RR({type:eE}),wT=RR(rE),CT=RR(Q),ET=RR({type:eE,formerlySerializedAs:"startSize"}),AT=RR({type:eE,visible:function visible(){return this.startSize2D}}),TT=RR({type:eE}),RT=RR(Q),LT=RR({type:eE,visible:function visible(){return this.startRotation3D}}),PT=RR({type:eE,visible:function visible(){return this.startRotation3D}}),_T=RR({type:eE,formerlySerializedAs:"startRotation"}),BT=RR({type:eE}),DT=RR({type:eE}),OT=RR({type:YA}),IT=RR({type:gR}),xT=RR({type:lT}),NT=RR({type:LA}),FT=RR({type:zE}),zT=RR({type:tA}),GT=RR(OC),MT=RR({serializable:!0}),UT=RR({type:Ee}),uT(HT=cT(HT=hT(HT=pT((u((jT=function(e){i(n,e);var t=a(n);function n(){var _$e;return o(this,n),_$e=t.call(this),c(_$e,"_preview",WT,h(_$e)),c(_$e,"playOnAwake",VT,h(_$e)),c(_$e,"_simulationSpace",$T,h(_$e)),c(_$e,"duration",qT,h(_$e)),c(_$e,"loop",KT,h(_$e)),c(_$e,"startDelay",YT,h(_$e)),c(_$e,"startLifetime",JT,h(_$e)),c(_$e,"startColor",XT,h(_$e)),c(_$e,"startSize2D",ZT,h(_$e)),c(_$e,"startSizeX",QT,h(_$e)),c(_$e,"startSizeY",eR,h(_$e)),c(_$e,"startSpeed",tR,h(_$e)),c(_$e,"startRotation3D",nR,h(_$e)),c(_$e,"startRotationX",iR,h(_$e)),c(_$e,"startRotationY",aR,h(_$e)),c(_$e,"startRotationZ",oR,h(_$e)),c(_$e,"gravityModifier",rR,h(_$e)),c(_$e,"rateOverTime",sR,h(_$e)),c(_$e,"shapeModule",lR,h(_$e)),c(_$e,"velocityOvertimeModule",uR,h(_$e)),c(_$e,"sizeOvertimeModule",cR,h(_$e)),c(_$e,"rotationOvertimeModule",hR,h(_$e)),c(_$e,"colorOvertimeModule",pR,h(_$e)),c(_$e,"limitVelocityOvertimeModule",dR,h(_$e)),c(_$e,"bursts",vR,h(_$e)),c(_$e,"_spriteFrame",yR,h(_$e)),_$e._renderSpriteFrame=null,_$e.time=0,_$e.emitRateTimeCounter=0,_$e.isPlaying=!1,_$e.isStopped=!0,_$e.isEmitting=!1,_$e.startLifetime.constant=5,_$e.startSizeX.constant=1,_$e.startSpeed.constant=5,_$e.rateOverTime.constant=10,_$e.initProperties(),_$e}return r(n,[{key:"preview",get:function get(){return this._preview},set:function set(e){this._preview=e,e?this._startPreview():this._stopPreview()}},{key:"simulationSpace",get:function get(){return this._simulationSpace},set:function set(e){this._simulationSpace=e,this._updateMaterial(),this._updateSimulationSpace()}},{key:"spriteFrame",get:function get(){return this._spriteFrame},set:function set(e){this._renderSpriteFrame!==e&&(this._renderSpriteFrame=e,e&&!e._uuid||(this._spriteFrame=e),this._applySpriteFrame())}},{key:"assembler",get:function get(){return this._assembler}},{key:"onEnable",value:function value(){v(y(n.prototype),"onEnable",this).call(this),this._updateMaterial(),this._updateSimulationSpace()}},{key:"onDestroy",value:function value(){v(y(n.prototype),"onDestroy",this).call(this)}},{key:"initProperties",value:function value(){this._simulator=new pE(this)}},{key:"onFocusInEditor",value:function value(){this._startPreview()}},{key:"onLostFocusInEditor",value:function value(){this._stopPreview()}},{key:"_startPreview",value:function value(){this._preview&&this.play()}},{key:"_stopPreview",value:function value(){this._preview||(this.play(),this.stop())}},{key:"__preload",value:function value(){v(y(n.prototype),"__preload",this).call(this),this.spriteFrame&&!this._renderSpriteFrame&&this._applySpriteFrame(),this.playOnAwake&&this.play()}},{key:"start",value:function value(){this.node.position=new te(this.node.position.x,this.node.position.y,100)}},{key:"play",value:function value(){this.isStopped&&(this.isStopped=!1),this.time=0,this.isPlaying=!0,this.isStopped=!1,this.isEmitting=!0,this._simulator.reset(),this.markForUpdateRenderData()}},{key:"stop",value:function value(){this.isPlaying&&(this.isPlaying=!1),this.isEmitting&&(this.isEmitting=!1),this.isStopped=!0,this._simulator.reset(),this._simulator.stop()}},{key:"_flushAssembler",value:function value(){var _$e,t=pe.Assembler.getAssembler(this);if(this._assembler!==t&&(this._assembler=t),null!=(_$e=this._assembler)&&_$e.createData){var _$n=this._simulator,i=_$n.renderData;i||(i=_$n.renderData=this._assembler.createData(this),_$n.uvFilled=0,i.particleInitRenderDrawInfo(this.renderEntity),_$n.initDrawInfo())}}},{key:"_applySpriteFrame",value:function value(){this._renderSpriteFrame=this._renderSpriteFrame||this._spriteFrame,this._renderSpriteFrame?this._renderSpriteFrame.texture&&(this._simulator&&this._simulator.updateUVs(!0),this._updateMaterial(),this.isStopped=!1,this.markForUpdateRenderData()):this.stop()}},{key:"_updateMaterial",value:function value(){if(this._customMaterial){this.setSharedMaterial(this._customMaterial,0);var _$e=this.getRenderMaterial(0).passes[0].blendState.targets[0];_$e&&(this._dstBlendFactor=_$e.blendDst,this._srcBlendFactor=_$e.blendSrc)}var t=this.getMaterialInstance(0);t&&t.recompileShaders({USE_LOCAL:this.simulationSpace===DR.Local}),t&&t.passes.length>0&&this._updateBlendFunc()}},{key:"_finishedSimulation",value:function value(){this.stop(),this.markForUpdateRenderData()}},{key:"_canRender",value:function value(){return v(y(n.prototype),"_canRender",this).call(this)&&!this.isStopped&&null!==this._renderSpriteFrame&&void 0!==this._renderSpriteFrame}},{key:"_render",value:function value(e){this.simulationSpace===DR.Local?e.commitComp(this,this._simulator.renderData,this._renderSpriteFrame,this._assembler,this.node):this.simulationSpace===DR.World&&e.commitComp(this,this._simulator.renderData,this._renderSpriteFrame,this._assembler,null)}},{key:"_updateSimulationSpace",value:function value(){var _$e;"function"==typeof(null==(_$e=this._renderEntity)?void 0:_$e.setRenderTransform)&&(this.simulationSpace===DR.Local?(this._renderEntity.setRenderTransform(this.node),this._renderEntity.setUseLocal(!0)):this.simulationSpace===DR.World&&(this._renderEntity.setRenderTransform(null),this._renderEntity.setUseLocal(!1)))}},{key:"lateUpdate",value:function value(e){this.isPlaying&&(this.time+=e,this._simulator.step(e))}},{key:"emitting",value:function value(e){var t=this,_$n=this.startDelay.evaluate(0,1);if(this.time>_$n&&this.time>this.duration+_$n&&(this.loop||(this.isEmitting=!1)),this.isEmitting){if(this.emitRateTimeCounter+=this.rateOverTime.evaluate(this.time/this.duration,1)*e,this.emitRateTimeCounter>1){var i=Math.floor(this.emitRateTimeCounter);this.emitRateTimeCounter-=i,this.emit(i,e)}var a,o=l(this.bursts);try{for(o.s();!(a=o.n()).done;)a.value.update(this,e)}catch(e){o.e(e)}finally{o.f()}}var r=this.gravityModifier.evaluate(this.time/this.duration,1);0!==this._simulator.particles.length||this.isEmitting||!this.isPlaying?this._simulator.particles.forEach(function(n,i){t.sizeOvertimeModule.update(n),t.rotationOvertimeModule.update(n,e),t.colorOvertimeModule.update(n),t.velocityOvertimeModule.update(n,e),t.applyGravityModifier(n,r),t.limitVelocityOvertimeModule.update(n,e),n.pos.add(n.velocity.clone().multiplyScalar(e))}):this._finishedSimulation()}},{key:"emit",value:function value(e,t){if(null!==this.spriteFrame)for(var _$n=this.time%this.duration/this.duration,i=0;i<e;i++){var a=this._simulator.emitParticle();if(a.init(),this.shapeModule.emit(a),this.simulationSpace===DR.World){var o=this.node.worldMatrix;a.pos.x+=o.m12,a.pos.y+=o.m13}var r=this.startSpeed.evaluate(_$n,this.rand());a.velocity.multiplyScalar(r),a.width=this.spriteFrame.width,a.height=this.spriteFrame.height;var s=this.startSizeX.evaluate(_$n,this.rand()),l=this.startSize2D?new te(s,this.startSizeY.evaluate(_$n,this.rand()),1):new te(s,s,1);a.startSize=l.clone(),a.size=l.clone();var u=this.startRotationZ.evaluate(_$n,this.rand());a.rotation=this.startRotation3D?new te(this.startRotationX.evaluate(_$n,this.rand()),this.startRotationY.evaluate(_$n,this.rand()),u):new te(0,0,u),a.startColor=this.startColor.evaluate(_$n,this.rand()).clone(),a.color=a.startColor.clone(),a.startLifetime=this.startLifetime.evaluate(_$n,this.rand())+t,a.remainingLifetime=a.startLifetime,a.randomSeed=Xe(0,233280)}}},{key:"applyGravityModifier",value:function value(e,t){e.velocity.add(new te(0,-9.8*t,0))}},{key:"rand",value:function value(){return tt(Xe(0,Ke.INT_MAX))}}]),n}(at)).prototype,"preview",[dT],Object.getOwnPropertyDescriptor(jT.prototype,"preview"),jT.prototype),WT=u(jT.prototype,"_preview",[vT],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return!1}}),VT=u(jT.prototype,"playOnAwake",[yT],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return!0}}),u(jT.prototype,"simulationSpace",[fT],Object.getOwnPropertyDescriptor(jT.prototype,"simulationSpace"),jT.prototype),$T=u(jT.prototype,"_simulationSpace",[mT],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return DR.Local}}),qT=u(jT.prototype,"duration",[gT],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return 5}}),KT=u(jT.prototype,"loop",[bT],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return!1}}),YT=u(jT.prototype,"startDelay",[ST],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return new eE}}),JT=u(jT.prototype,"startLifetime",[kT],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return new eE}}),XT=u(jT.prototype,"startColor",[wT],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return new rE}}),ZT=u(jT.prototype,"startSize2D",[CT],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return!1}}),QT=u(jT.prototype,"startSizeX",[ET],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return new eE}}),eR=u(jT.prototype,"startSizeY",[AT],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return new eE}}),tR=u(jT.prototype,"startSpeed",[TT],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return new eE}}),nR=u(jT.prototype,"startRotation3D",[RT],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return!1}}),iR=u(jT.prototype,"startRotationX",[LT],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return new eE}}),aR=u(jT.prototype,"startRotationY",[PT],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return new eE}}),oR=u(jT.prototype,"startRotationZ",[_T],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return new eE}}),rR=u(jT.prototype,"gravityModifier",[BT],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return new eE}}),sR=u(jT.prototype,"rateOverTime",[DT],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return new eE}}),lR=u(jT.prototype,"shapeModule",[OT],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return new YA}}),uR=u(jT.prototype,"velocityOvertimeModule",[IT],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return new gR}}),cR=u(jT.prototype,"sizeOvertimeModule",[xT],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return new lT}}),hR=u(jT.prototype,"rotationOvertimeModule",[NT],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return new LA}}),pR=u(jT.prototype,"colorOvertimeModule",[FT],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return new zE}}),dR=u(jT.prototype,"limitVelocityOvertimeModule",[zT],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return new tA}}),vR=u(jT.prototype,"bursts",[RR,GT],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return[]}}),yR=u(jT.prototype,"_spriteFrame",[MT],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return null}}),u(jT.prototype,"spriteFrame",[UT],Object.getOwnPropertyDescriptor(jT.prototype,"spriteFrame"),jT.prototype),HT=jT))||HT)||HT)||HT)||HT);BR(OR,"color","visible",!1),x._RF.pop(),x._RF.push({},"442c2KaGHdNip4TBoeKOOoY","RendererModule",void 0);var IR,xR=F.ccclass,NR=F.property;bR=xR("RendererModule"),SR=NR(ot),kR=NR(Ee),bR((ER=u((CR=r(function e(){o(this,e),c(this,"material",ER,this),c(this,"spriteFrame",AR,this)})).prototype,"material",[SR],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),AR=u(CR.prototype,"spriteFrame",[kR],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),CR)),x._RF.pop(),x._RF.push({},"c20acgKcuRFP6+Am/XjOFeP","ParticleSystem2DExtra",void 0);var zR=F.ccclass,GR=F.disallowMultiple,MR=F.executeInEditMode,UR=F.requireComponent,HR=zR("ParticleSystem2DExtra")(IR=MR(!0)(IR=GR(!0)(IR=UR(pe)(IR=function(e){i(n,e);var t=a(n);function n(){var _$e;o(this,n);for(var i=arguments.length,a=Array(i),r=0;r<i;r++)a[r]=arguments[r];return(_$e=t.call.apply(t,[this].concat(a))).emitParticle=function(t){return function(n){t(n);var i=_$e.particleSystem._simulator.particles.length,a=_$e.particleSystem._simulator.particles[i-1];_$e.initParticle(a)}},_$e.step=function(t){return function(n){for(var i=_$e.particleSystem._simulator.particles,a=0;a<i.length;a++){var o=i[a];_$e.updateParticle(o,n)}t(n)}},_$e}return r(n,[{key:"__preload",value:function value(){this.particleSystem=this.getComponent(pe),this.validateRequiredComponents(),this.overrideFunctions()}},{key:"overrideFunctions",value:function value(){var _$e=this.particleSystem._simulator.emitParticle.bind(this.particleSystem._simulator);this.particleSystem._simulator.emitParticle=this.emitParticle(_$e);var t=this.particleSystem._simulator.step.bind(this.particleSystem._simulator);this.particleSystem._simulator.step=this.step(t)}},{key:"validateRequiredComponents",value:function value(){xt.lazyValidateProperties(this)}}]),n}(U))||IR)||IR)||IR)||IR;x._RF.pop(),x._RF.push({},"664feJL84ZOTaM99dgWY4x0","ExampleParticleSystem2DExtra",void 0),(0,F.ccclass)("ExampleParticleSystem2DExtra")(function(e){i(n,e);var t=a(n);function n(){return o(this,n),t.apply(this,arguments)}return r(n,[{key:"initParticle",value:function value(e){e.maxSize=de.randomRange(.25,1)*e.size,e.size=0,e.deltaSize=0,e.cycleDuration=de.randomRange(.4,.6),e.life=e.timeToLive,this.setInitPosition(e.pos)}},{key:"updateParticle",value:function value(e,t){this.updateScale(e)}},{key:"setInitPosition",value:function value(e){var t=e.x,_$n=e.y;return e.x=t+de.randomRange(-350,350),e.y=_$n+de.randomRange(-350,350),e}},{key:"updateScale",value:function value(e){var t=1-(e.life-e.timeToLive)%e.cycleDuration/e.cycleDuration;e.size=e.maxSize*Math.sin(t*Math.PI)}}]),n}(HR)),x._RF.pop(),x._RF.push({},"4a9beTdMntC0q9yngb8a2go","BootScene",void 0);var jR,WR,VR=F.ccclass,$R=F.disallowMultiple,qR=Ludex,KR=qR.Events,YR=(qR.Utils.Valid,qR.Configs.Core.StartSDKAfterLoadGame),JR=qR.Plugins.Ads,XR=((void 0===JR?{}:JR).Types,codex),ZR=XR.ads,QR=XR.player,eL=XR.event,tL=XR.context;VR("BootScene")(jR=$R(jR=function(e){i(h,e);var s,l,u,c=a(h);function h(){var _$e;o(this,h);for(var i=arguments.length,a=Array(i),r=0;r<i;r++)a[r]=arguments[r];return(_$e=c.call.apply(c,[this].concat(a))).setupLoadingFullScreen=function(){YR?(L.addShowedScene(B.BOOT_SCENE),QR.isFirstSession()?L.addShowedScene(B.GAME_SCENE):L.addShowedScene(B.DASHBOARD_SCENE)):L.showLoadingFullScreen(B.BOOT_SCENE)},_$e.processWhenGameSdkStarted=function(){_$e.sendMsGamesDailyNotification()},_$e.loadBundles=t(n().mark(function e(){return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all([p.loadBundle("loadable")]));case 1:case"end":return e.stop()}},e)})),_$e.loadWasmModules=t(n().mark(function e(){return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("SOLO"===tL.getContextType()&&!QR.isFirstSession()){e.next=2;break}return e.abrupt("return",Promise.all([D.loadModuleAsync("spine")]));case 2:case"end":return e.stop()}},e)})),_$e.lazyLoadWasmModules=t(n().mark(function e(){return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([D.loadModuleAsync("spine")]);case 2:case"end":return e.stop()}},e)})),_$e.handlePauseAudio=function(){eL.on(KR.VISIBILITY_HIDDEN,_$e.handleMuteAudio),eL.on(KR.VISIBILITY_VISIBLE,_$e.handleUnMuteAudio),GameSDK.isGameSDK("YoutubePlayables")&&GameSDK.extra.onAudioEnabledChange(function(t){t?_$e.handleUnMuteAudio():_$e.handleMuteAudio()})},_$e.handleMuteAudio=function(){k.muteAudio(!0)},_$e.handleUnMuteAudio=function(){(null==ZR||!ZR.isAdFullSizeShowing())&&(!GameSDK.isGameSDK("YoutubePlayables")||GameSDK.extra.isAudioEnabled())&&k.muteAudio(!1)},_$e}return r(h,[{key:"__preload",value:function value(){console.log("BootScene __preload"),this.setupAndroidPlatformAds(),this.processCrazyGamesLoadingStart(),this.preloadAssets(),this.listenEvents()}},{key:"preloadAssets",value:(u=t(n().mark(function e(){return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,J.pause(),e.next=4,Promise.all([this.loadWasmModules(),this.loadBundles()]);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.warn("processPreloadAssets",e.t0);case 9:return e.prev=9,null!=ZR&&ZR.isAdFullSizeShowing()||J.resume(),e.finish(9);case 12:case"end":return e.stop()}},e,this,[[0,6,9,12]])})),function(){return u.apply(this,arguments)})},{key:"onLoad",value:function value(){this.handlePauseAudio(),this.preloadNotificationScreen(),this.overrideGameSDK(),this.setupLoadingFullScreen()}},{key:"start",value:(l=t(n().mark(function e(){return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.extra.waitSDKInitiatedAsync();case 2:this.processCrazyGamesLoadingStop(),this.setupYoutubeAudioSync();case 4:case"end":return e.stop()}},e,this)})),function(){return l.apply(this,arguments)})},{key:"setupYoutubeAudioSync",value:function value(){GameSDK.isGameSDK("YoutubePlayables")&&(GameSDK.extra.isAudioEnabled()||k.muteAudio(!0))}},{key:"listenEvents",value:function value(){eL.catchUp(KR.GAME_READY,this.lazyLoadWasmModules),eL.catchUp(KR.GAME_SDK_STARTED,this.processWhenGameSdkStarted)}},{key:"overrideGameSDK",value:function value(){if("FBInstant"in window&&"shareAsync"in FBInstant){var i,_$e=FBInstant.shareAsync;FBInstant.shareAsync=(i=t(n().mark(function t(i){var a;return n().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=d({},i),t.abrupt("return",_$e(a));case 2:case"end":return t.stop()}},t)})),function(e){return i.apply(this,arguments)})}}},{key:"processCrazyGamesLoadingStart",value:function value(){"gameLoadingStart"in GameSDK.extra&&GameSDK.extra.gameLoadingStart()}},{key:"processCrazyGamesLoadingStop",value:function value(){"gameLoadingStop"in GameSDK.extra&&GameSDK.extra.gameLoadingStop()}},{key:"setupAndroidPlatformAds",value:function value(){}},{key:"sendMsGamesDailyNotification",value:function value(){var _$e=GameSDK.extra;"sendDailyNotificationAsync"in _$e&&_$e.sendDailyNotificationAsync().catch(function(e){console.warn("sendMsGamesDailyNotification",e)})}},{key:"preloadNotificationScreen",value:(s=t(n().mark(function e(){return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.preloadPrefab("screens/NotificationScreen");case 2:case"end":return e.stop()}},e)})),function(){return s.apply(this,arguments)})}]),h}(U))||jR),x._RF.pop(),x._RF.push({},"3f6029o9mpM/K2ccwbuv3XD","EndlessScene",void 0);var nL,iL=F.ccclass,aL=F.disallowMultiple,oL=codex,rL=oL.audio,sL=oL.ads,lL=g.Layout,uL=g.DesignSize.Portrait;iL("EndlessScene")(WR=aL(WR=function(e){i(n,e);var t=a(n);function n(){var _$e;o(this,n);for(var i=arguments.length,a=Array(i),r=0;r<i;r++)a[r]=arguments[r];return(_$e=t.call.apply(t,[this].concat(a))).handleGameMaskWhenLayoutChanged=function(e){var t=ge("Canvas/Game/GameObjects");if(t){var _$n=t.getComponent(Be);_$n&&(_$n.enabled=e===lL.Landscape)}},_$e.handleAdsWhenResize=function(){_$e.checkBottomBannerAdSize(),_$e.setMaxSizeSideBannerAd()},_$e.attemptCallSubscribeBot=function(){"subscribeBotAsync"in GameSDK.extra&&GameSDK.extra.subscribeBotAsync().catch(function(e){console.warn("subscribeBotAsync",e)})},_$e}return r(n,[{key:"__preload",value:function value(){this.validateRequiredComponents(),this.listenGameEvents()}},{key:"validateRequiredComponents",value:function value(){xt.lazyValidateProperties(this)}},{key:"onLoad",value:function value(){}},{key:"listenGameEvents",value:function value(){this.node.scene.on(m.LAYOUT_CHANGED,this.handleGameMaskWhenLayoutChanged),this.node.scene.on(m.VIEW_RESIZED,this.handleAdsWhenResize)}},{key:"checkBottomBannerAdSize",value:function value(){var _$e=ve.instance.getVisibleSize(),t=b.worldSizeToCssSize(_$e.height*O.MAX_BOTTOM_BANNER_RATIO);Ludex.Configs.Ads.BannerDisplayAdOptions.forEach(function(e){var _$n=e.PlacementId,i=e.Position,a=e.BannerHeight;"bottom"===i&&(a>t?sL.hideBannerAdAsync(_$n).catch(function(e){}):sL.showBannerAdAsync(_$n).catch(function(e){}))})}},{key:"setMaxSizeSideBannerAd",value:function value(){var _$e=GameSDK.extra;if("setSideBannerAdRemainSize"in _$e){var t=ve.instance.getVisibleSize(),_$n=uL.WIDTH+24,i=(t.width-_$n)/2,a=b.worldSizeToCssSize(i);_$e.setSideBannerAdRemainSize(a)}}},{key:"start",value:function value(){this.scheduleOnce(this.attemptCallSubscribeBot,.5),this.updateVolumeBackgroundMusic()}},{key:"updateVolumeBackgroundMusic",value:function value(){rL.setVolume(1,"global_music")}}]),n}(U))||WR),x._RF.pop(),x._RF.push({},"9b83boaSv9PE6mRFqy0MSI8","GameScene",void 0);var cL,hL,pL,dL,vL,yL,fL,mL,gL,bL,SL,kL,wL,CL,EL,AL,TL,RL,LL=F.ccclass,PL=F.disallowMultiple,_L=codex,BL=_L.audio,DL=_L.ads,OL=g.Layout,IL=g.DesignSize.Portrait;LL("GameScene")(nL=PL(nL=function(e){i(n,e);var t=a(n);function n(){var _$e;o(this,n);for(var i=arguments.length,a=Array(i),r=0;r<i;r++)a[r]=arguments[r];return(_$e=t.call.apply(t,[this].concat(a))).handleGameMaskWhenLayoutChanged=function(e){var t=ge("Canvas/Game/GameObjects");if(t){var _$n=t.getComponent(Be);_$n&&(_$n.enabled=e===OL.Landscape)}},_$e.handleAdsWhenResize=function(){_$e.checkBottomBannerAdSize(),_$e.setMaxSizeSideBannerAd()},_$e.attemptCallSubscribeBot=function(){"subscribeBotAsync"in GameSDK.extra&&GameSDK.extra.subscribeBotAsync().catch(function(e){console.warn("subscribeBotAsync",e)})},_$e}return r(n,[{key:"__preload",value:function value(){this.validateRequiredComponents(),this.listenGameEvents()}},{key:"validateRequiredComponents",value:function value(){xt.lazyValidateProperties(this)}},{key:"listenGameEvents",value:function value(){J.on(m.VIEW_RESIZED,this.handleAdsWhenResize),J.on(m.LAYOUT_CHANGED,this.handleGameMaskWhenLayoutChanged)}},{key:"checkBottomBannerAdSize",value:function value(){var _$e=ve.instance.getVisibleSize(),t=b.worldSizeToCssSize(_$e.height*O.MAX_BOTTOM_BANNER_RATIO);Ludex.Configs.Ads.BannerDisplayAdOptions.forEach(function(e){var _$n=e.PlacementId,i=e.Position,a=e.BannerHeight;"bottom"===i&&(a>t?DL.hideBannerAdAsync(_$n).catch(function(e){}):DL.showBannerAdAsync(_$n).catch(function(e){}))})}},{key:"setMaxSizeSideBannerAd",value:function value(){var _$e=GameSDK.extra;if("setSideBannerAdRemainSize"in _$e){var t=ve.instance.getVisibleSize(),_$n=IL.WIDTH+24,i=(t.width-_$n)/2,a=b.worldSizeToCssSize(i);_$e.setSideBannerAdRemainSize(a)}}},{key:"start",value:function value(){this.scheduleOnce(this.attemptCallSubscribeBot,.5),this.updateVolumeBackgroundMusic(),this.scheduleOnce(this.preloadScenes,2)}},{key:"preloadScenes",value:function value(){_.preloadDashboardScene()}},{key:"updateVolumeBackgroundMusic",value:function value(){BL.setVolume(1,"global_music")}}]),n}(U))||nL),x._RF.pop(),x._RF.push({},"11abe47Ss1CtabSFT1/cPKt","PlayableScene",void 0);var xL,NL=F.ccclass,FL=F.property,zL=F.disallowMultiple,GL=codex.analytics;cL=NL("PlayableScene"),hL=xt.required(),pL=FL({type:oe}),dL=xt.required(),vL=FL({type:OR}),yL=xt.required(),fL=FL({type:OR}),mL=xt.required(),gL=FL({type:z}),bL=xt.onlyRunInLifeCycleAsync,SL=xt.onlyRunInLifeCycle,kL=xt.onlyRunInLifeCycle,cL(wL=zL((EL=u((CL=function(e){i(d,e);var s,l,u,p=a(d);function d(){var _$e;return o(this,d),_$e=p.call(this),c(_$e,"label",EL,h(_$e)),c(_$e,"particleLeft",AL,h(_$e)),c(_$e,"particleRight",TL,h(_$e)),c(_$e,"backgroundAnimation",RL,h(_$e)),_.markIsTestScene(B.PLAYABLE_SCENE),_$e}return r(d,[{key:"__preload",value:function value(){this.listenEvents()}},{key:"onLoad",value:function value(){xt.validateRequiredProperties(this)}},{key:"listenEvents",value:function value(){}},{key:"start",value:(u=t(n().mark(function e(){return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return GL.event("ready_playable"),e.next=3,this.waitViewable();case 3:this.playTweens(),this.playParticles(),this.playAnimations(),GL.event("showing_playable"),setTimeout(function(){"openAppStore"in GameSDK.extra&&GameSDK.extra.openAppStore()},1e4);case 8:case"end":return e.stop()}},e,this)})),function(){return u.apply(this,arguments)})},{key:"waitViewable",value:(l=t(n().mark(function e(){return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("isViewable"in GameSDK.extra){e.next=2;break}return e.abrupt("return");case 2:if(!GameSDK.extra.isViewable()){e.next=4;break}return e.abrupt("return");case 4:if("waitViewableChange"in GameSDK.extra){e.next=6;break}return e.abrupt("return");case 6:return J.pause(),e.next=9,GameSDK.extra.waitViewableChange();case 9:if(e.sent){e.next=14;break}return e.next=13,this.waitViewable();case 13:return e.abrupt("return");case 14:J.resume();case 15:case"end":return e.stop()}},e,this)})),function(){return l.apply(this,arguments)})},{key:"playTweens",value:(s=t(n().mark(function e(){var t;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=q(this.label.node).to(10,{position:new te(0,200,0)},{easing:"cubicInOut"}).to(6,{position:new te(0,-100,0)},{easing:"cubicInOut"}),f.runTweenAsync(q(this.label.node).repeat(999,t));case 2:case"end":return e.stop()}},e,this)})),function(){return s.apply(this,arguments)})},{key:"playParticles",value:function value(){console.log("playParticles",this.particleLeft,this.particleRight),this.particleLeft.play(),this.particleRight.play()}},{key:"playAnimations",value:function value(){this.backgroundAnimation.play()}}]),d}(U)).prototype,"label",[hL,pL],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),AL=u(CL.prototype,"particleLeft",[dL,vL],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),TL=u(CL.prototype,"particleRight",[yL,fL],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),RL=u(CL.prototype,"backgroundAnimation",[mL,gL],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),u(CL.prototype,"playTweens",[bL],Object.getOwnPropertyDescriptor(CL.prototype,"playTweens"),CL.prototype),u(CL.prototype,"playParticles",[SL],Object.getOwnPropertyDescriptor(CL.prototype,"playParticles"),CL.prototype),u(CL.prototype,"playAnimations",[kL],Object.getOwnPropertyDescriptor(CL.prototype,"playAnimations"),CL.prototype),wL=CL))||wL),x._RF.pop(),x._RF.push({},"16f4aNBnvRI1Z/6f8l+RIiE","TestLayoutScene",void 0);var ML,UL,jL,WL,VL=F.ccclass,$L=F.disallowMultiple;VL("TestLayoutScene")(xL=$L(xL=function(e){i(n,e);var t=a(n);function n(){var _$e;return o(this,n),(_$e=t.call(this)).handleLayoutChange=function(){L.showNotificationScreen("Layout changed")},_.markIsTestScene(B.TEST_LAYOUT_SCENE),_$e}return r(n,[{key:"start",value:function value(){this.isValid&&this.listenGameEvents()}},{key:"listenGameEvents",value:function value(){J.on(m.LAYOUT_CHANGED,this.handleLayoutChange)}},{key:"switchScene",value:function value(){_.switchScene(B.DASHBOARD_SCENE)}}]),n}(U))||xL),x._RF.pop(),x._RF.push({},"b5a9b5CfCVE56tnPfBAE8JR","TestParticleSystemScene",void 0);var qL,KL=F.ccclass,YL=F.property;ML=KL("TestParticleSystemScene"),UL=YL(OR),ML((WL=u((jL=function(e){i(n,e);var t=a(n);function n(){var _$e;return o(this,n),_$e=t.call(this),c(_$e,"starParticleSystem",WL,h(_$e)),_.markIsTestScene(B.TEST_PARTICLE_SYSTEM_SCENE),_$e}return r(n,[{key:"start",value:function value(){var _$e=this;this.isValid&&this.scheduleOnce(function(){_$e.starParticleSystem.play()},1)}}]),n}(U)).prototype,"starParticleSystem",[UL],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),jL)),x._RF.pop(),x._RF.push({},"03336l0Yy9BkI817xYNA8KM","TestPerformanceScene",void 0);var JL,XL=F.ccclass,ZL=F.disallowMultiple;XL("TestPerformanceScene")(qL=ZL(qL=function(e){i(n,e);var t=a(n);function n(){var _$e;return o(this,n),_$e=t.call(this),_.markIsTestScene(B.TEST_PERFORMANCE_SCENE),_$e}return r(n,[{key:"start",value:function value(){this.isValid&&this.listenEvents()}},{key:"listenEvents",value:function value(){}}]),n}(U))||qL),x._RF.pop(),x._RF.push({},"0e876/A9rJJh6RiiBfkpaVx","TestScene",void 0);var eP=F.ccclass,tP=F.disallowMultiple,nP=Ludex.Events,iP=codex.event;eP("TestScene")(JL=tP(JL=function(e){i(n,e);var t=a(n);function n(){var _$e;return o(this,n),_$e=t.call(this),_.markIsTestScene(B.TEST_SCENE),_$e}return r(n,[{key:"start",value:function value(){this.isValid&&(this.listenScreenEvents(),L.openScreen(P.LOADING_SCREEN,{duration:.5}))}},{key:"listenScreenEvents",value:function value(){iP.once(nP.CLOSED_SCREEN,function(e){e.screenName===I[P.LOADING_SCREEN]&&L.openScreen(P.NOTIFICATION_SCREEN,{message:"Test screen events pass!",duration:2,isCloseButtonVisible:!1})})}}]),n}(U))||JL),x._RF.pop(),x._RF.push({},"0a69a5acDJJDrbwLJnxnyXY","AdsFlows",void 0);var aP,oP,rP,sP,lP,uP,hP,pP=F.ccclass,dP=Ludex.Plugins.Ads.Types;pP("AdsFlows")(function(e){i(n,e);var t=a(n);function n(){return o(this,n),t.apply(this,arguments)}return r(n,[{key:"preloadAds",value:function value(){E.preloadAds()}},{key:"checkServiceDegraded",value:function value(){var _$e=E.isServiceDegraded();L.showNotificationScreen("Service degraded: ".concat(_$e?"true":"false"))}},{key:"loadInterstitialAd",value:function value(){E.preloadAdsByType(dP.INTERSTITIAL)}},{key:"loadRewardedVideoAd",value:function value(){E.preloadAdsByType(dP.REWARDED_VIDEO)}},{key:"loadRewardedInterstitialAd",value:function value(){E.preloadAdsByType(dP.REWARDED_INTERSTITIAL)}},{key:"showInterstitialAd",value:function value(){E.showInterstitialAdAsync({contextType:"browse"})}},{key:"showRewardedVideoAd",value:function value(){E.showRewardVideoAdAsync({contextType:"reward",forceLoad:!0})}},{key:"showRewardedInterstitialAd",value:function value(){E.showRewardedInterstitialAdAsync({contextType:"reward",forceLoad:!0})}},{key:"showBannerAd",value:function value(){E.showBannerAds()}},{key:"hideBannerAd",value:function value(){E.hideBannerAds()}},{key:"showAdsenseInterstitialAd",value:function value(){E.showInterstitialAdAsync({adService:"adsense"})}},{key:"showAdsenseRewardedVideoAd",value:function value(){E.showRewardVideoAdAsync({adService:"adsense",forceLoad:!0})}},{key:"showAdsenseRewardedInterstitialAd",value:function value(){E.showRewardedInterstitialAdAsync({adService:"adsense",forceLoad:!0})}}]),n}(U)),x._RF.pop(),x._RF.push({},"f5c69RbYb1Cl4DusuWnM8MV","FlowChallenge",void 0);var vP,yP,fP,gP,bP=F.ccclass,SP=Ludex.Utils,kP=SP.Decorator,wP=SP.String,CP=SP.Number,EP=codex,AP=EP.match,TP=EP.player,RP=function RP(e){L.closeLoadingScreen(),_instanceof(e,Error)&&L.showNotificationScreen(e.message)};aP=bP("FlowChallenge"),oP=kP.tryCatch(RP),rP=kP.tryCatch(RP),sP=kP.tryCatch(RP),lP=kP.tryCatch(RP),uP=kP.tryCatch(RP),aP((u((hP=function(e){i(d,e);var s,l,u,c,h,p=a(d);function d(){var _$e;o(this,d);for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return(_$e=p.call.apply(p,[this].concat(n))).playerId="",_$e.matchId="",_$e.contextId="",_$e.opponentId="",_$e}return r(d,[{key:"onLoad",value:function value(){this.playerId=TP.getPlayerId(),this.matchId=wP.generateObjectId(),this.contextId=wP.generateObjectId(),this.opponentId=wP.generateObjectId()}},{key:"inviteFriends",value:(h=t(n().mark(function e(){return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return L.showLoadingScreen(0),e.next=3,AP.challenge.invite.processAsync({playerId:this.playerId,extraData:{rescued:0}});case 3:case"end":return e.stop()}},e,this)})),function(){return h.apply(this,arguments)})},{key:"challengeFriend",value:(c=t(n().mark(function e(){var t;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={playerId:this.playerId,opponentId:this.opponentId},L.showLoadingScreen(0),e.next=4,AP.challenge.friend.processAsync(t);case 4:case"end":return e.stop()}},e,this)})),function(){return c.apply(this,arguments)})},{key:"joinChallenge",value:(u=t(n().mark(function e(){var t,i,a;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=AP.getMatchState(),a={playerId:this.playerId,contextId:wP.generateObjectId(),matchId:null!=(t=i.id)?t:this.matchId,opponentId:this.opponentId},L.showLoadingScreen(0),e.next=5,AP.challenge.join.processAsync(a);case 5:case"end":return e.stop()}},e,this)})),function(){return u.apply(this,arguments)})},{key:"continueChallenge",value:(l=t(n().mark(function e(){var t,i,a;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=AP.getMatchState(),a={playerId:this.playerId,matchId:null!=(t=i.id)?t:this.matchId,contextId:this.contextId,opponentId:this.opponentId},L.showLoadingScreen(0),e.next=5,AP.challenge.continue.processAsync(a);case 5:case"end":return e.stop()}},e,this)})),function(){return l.apply(this,arguments)})},{key:"finishChallenge",value:(s=t(n().mark(function e(){return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return L.showLoadingScreen(0),e.next=3,AP.challenge.finish.processAsync({playerId:this.playerId,playerScore:CP.random(99999)});case 3:case"end":return e.stop()}},e,this)})),function(){return s.apply(this,arguments)})}]),d}(U)).prototype,"inviteFriends",[oP],Object.getOwnPropertyDescriptor(hP.prototype,"inviteFriends"),hP.prototype),u(hP.prototype,"challengeFriend",[rP],Object.getOwnPropertyDescriptor(hP.prototype,"challengeFriend"),hP.prototype),u(hP.prototype,"joinChallenge",[sP],Object.getOwnPropertyDescriptor(hP.prototype,"joinChallenge"),hP.prototype),u(hP.prototype,"continueChallenge",[lP],Object.getOwnPropertyDescriptor(hP.prototype,"continueChallenge"),hP.prototype),u(hP.prototype,"finishChallenge",[uP],Object.getOwnPropertyDescriptor(hP.prototype,"finishChallenge"),hP.prototype),hP)),x._RF.pop(),x._RF.push({},"be648IXP/ZCkJ107nu6VzqO","FlowSingle",void 0);var LP,PP,_P,BP,DP,OP,IP,xP,NP,FP=F.ccclass,zP=Ludex.Utils,GP=zP.Decorator,MP=zP.Number,UP=codex,HP=UP.match,jP=UP.player,WP=function WP(e){L.closeLoadingScreen(),_instanceof(e,Error)&&L.showNotificationScreen(e.message)};vP=FP("FlowSingle"),yP=GP.tryCatch(WP),fP=GP.tryCatch(WP),vP((u((gP=function(e){i(c,e);var s,l,u=a(c);function c(){var _$e;o(this,c);for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return(_$e=u.call.apply(u,[this].concat(n))).playerId="",_$e}return r(c,[{key:"onLoad",value:function value(){this.playerId=jP.getPlayerId()}},{key:"startSingle",value:(l=t(n().mark(function e(){return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return L.showLoadingScreen(0),e.next=3,HP.single.start.processAsync({playerId:this.playerId});case 3:case"end":return e.stop()}},e,this)})),function(){return l.apply(this,arguments)})},{key:"finishSingle",value:(s=t(n().mark(function e(){return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return jP.setPlayerDataByName("score",MP.random(1e3)),e.next=3,HP.single.finish.processAsync();case 3:case"end":return e.stop()}},e)})),function(){return s.apply(this,arguments)})}]),c}(U)).prototype,"startSingle",[yP],Object.getOwnPropertyDescriptor(gP.prototype,"startSingle"),gP.prototype),u(gP.prototype,"finishSingle",[fP],Object.getOwnPropertyDescriptor(gP.prototype,"finishSingle"),gP.prototype),gP)),x._RF.pop(),x._RF.push({},"acb0egHPppFmYJalVNrDDv/","BaseScreen",void 0);var VP,$P=F.ccclass,qP=F.property,KP=F.disallowMultiple,YP=Ludex.Events,JP=codex.event,XP=(LP=$P("BaseScreen"),PP=qP(ie),_P=qP(ie),BP=qP(ae),LP(DP=KP((IP=u((OP=function(e){i(n,e);var t=a(n);function n(){var _$e;o(this,n);for(var i=arguments.length,a=Array(i),r=0;r<i;r++)a[r]=arguments[r];return _$e=t.call.apply(t,[this].concat(a)),c(_$e,"container",IP,h(_$e)),c(_$e,"backgroundMask",xP,h(_$e)),c(_$e,"screenOpacity",NP,h(_$e)),_$e.data={},_$e}return r(n,[{key:"__preload",value:function value(){this.animation=this.getComponent(z),this.backgroundMaskButton=this.backgroundMask.getComponent(Z),this.validateRequiredComponents(),this.initializeNodes()}},{key:"initializeNodes",value:function value(){var _$e=this.getMaskOpacity(),t=this.getContainerOpacity();_$e&&t&&(_$e.opacity=0,t.opacity=0)}},{key:"validateRequiredComponents",value:function value(){xt.lazyValidateProperties(this)}},{key:"setScreenOpacity",value:function value(e){this.screenOpacity.opacity=e}},{key:"open",value:function value(e){var t,_$n,i=this;e&&(this.data=e),this.animation.once(z.EventType.PLAY,function(){i.show()}),JP.emit(YP.OPENED_SCREEN,{screenName:this.node.name,screenData:this.data}),this.runAnimation(null!=(t=null==(_$n=this.data.overrideAnimation)?void 0:_$n.openScreen)?t:"OpenScreen")}},{key:"close",value:function value(){var _$e,t,_$n=this;this.node.active&&(this.animation.once(z.EventType.FINISHED,function(){JP.emit(YP.CLOSED_SCREEN,{screenName:_$n.node.name}),_$n.hide()}),this.runAnimation(null!=(_$e=null==(t=this.data.overrideAnimation)?void 0:t.closeScreen)?_$e:"CloseScreen"))}},{key:"runAnimation",value:function value(e){if(!this.isAnimationExist(e))throw Error("".concat(this.node.name,": Animation component must have ").concat(e," clip"));this.animation.play(e)}},{key:"isAnimationExist",value:function value(e){return this.animation.clips.some(function(t){return!(!t||t.name!==e)})}},{key:"getMaskOpacity",value:function value(){return this.backgroundMask.getComponent(ae)||(console.warn("BaseScreen: maskOpacity not found"),null)}},{key:"getContainerOpacity",value:function value(){return this.container.getComponent(ae)||(console.warn("BaseScreen: containerOpacity not found"),null)}},{key:"show",value:function value(){this.node.active=!0;var _$e=this.node.getComponent($);if(_$e){_$e.enabled=!0,_$e.updateAlignment();var t,_$n=this.node.getComponentsInChildren($),i=l(_$n);try{for(i.s();!(t=i.n()).done;)t.value.updateAlignment()}catch(e){i.e(e)}finally{i.f()}}}},{key:"hide",value:function value(){this.node.active=!1}}]),n}(U)).prototype,"container",[PP],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xP=u(OP.prototype,"backgroundMask",[_P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),NP=u(OP.prototype,"screenOpacity",[BP],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),DP=OP))||DP)||DP);x._RF.pop(),x._RF.push({},"f3521L4Mn5I3bhxr0QZJ9y9","BackgroundMask",void 0);var ZP,QP,e_,t_,n_,i_=F.ccclass,a_=F.requireComponent;i_("BackgroundMask")(VP=a_([ae])(VP=function(e){i(n,e);var t=a(n);function n(){return o(this,n),t.apply(this,arguments)}return r(n,[{key:"onLoad",value:function value(){var _$e=this.getComponent(ae);_$e?(this.opacity=_$e,this.updateMaskAlpha()):console.warn("BackgroundMask: UIOpacity not found")}},{key:"updateMaskAlpha",value:function value(){var t,_$n=this.opacity.opacity/255;(t=document.getElementById("app-mask"))&&(t.style.background="rgb(0 0 0 / ".concat(_$n,")"))}}]),n}(U))||VP),x._RF.pop(),x._RF.push({},"d562cAXnG1PQ6vXfOEq2wVu","Screens",void 0);var o_,r_,s_,l_,u_,c_,h_,p_,d_,v_,y_,f_,m_,g_,b_=F.ccclass,S_=F.property,k_=F.executeInEditMode;ZP=b_("Screens"),QP=S_({type:fe(P)}),ZP(e_=k_((n_=u((t_=function(e){i(n,e);var t=a(n);function n(){var _$e;o(this,n);for(var i=arguments.length,a=Array(i),r=0;r<i;r++)a[r]=arguments[r];return _$e=t.call.apply(t,[this].concat(a)),c(_$e,"screenKeys",n_,h(_$e)),_$e}return r(n,[{key:"onEnable",value:function value(){}},{key:"onDisable",value:function value(){}},{key:"onChildrenChanged",value:function value(){}}]),n}(U)).prototype,"screenKeys",[QP],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return[]}}),e_=t_))||e_),x._RF.pop(),x._RF.push({},"cecf2nUBzhIWZw7uJgVliXz","CongratulationScreen",void 0);var w_,C_,E_,T_,R_,L_,P_=F.ccclass,__=F.property,B_=F.disallowMultiple,D_=F.requireComponent,O_=Ludex.Events,I_=codex.event;o_=P_("CongratulationScreen"),r_=D_(XP),s_=__(ie),l_=__(ie),u_=__(Z),c_=__(Z),h_=__(Z),o_(p_=B_(p_=r_((v_=u((d_=function(e){i(n,e);var t=a(n);function n(){var _$e;o(this,n);for(var i=arguments.length,a=Array(i),r=0;r<i;r++)a[r]=arguments[r];return _$e=t.call.apply(t,[this].concat(a)),c(_$e,"congratulation",v_,h(_$e)),c(_$e,"confirmation",y_,h(_$e)),c(_$e,"closeButtonComponent",f_,h(_$e)),c(_$e,"yesButtonComponent",m_,h(_$e)),c(_$e,"noButtonComponent",g_,h(_$e)),_$e.handleOpeningScreen=function(t){if(!_$e.screen)throw Error("CongratulationScreen: screen not found");_$e.validateEventPayload(t)&&(_$e.closeButtonComponent.interactable=!0,_$e.yesButtonComponent.interactable=!0,_$e.noButtonComponent.interactable=!0)},_$e.handleOpenedScreen=function(t){_$e.validateEventPayload(t)&&_$e.open()},_$e}return r(n,[{key:"__preload",value:function value(){this.enabled=!1,this.screen=this.getComponent(XP),this.validateRequiredComponents(),this.listenScreenEvents()}},{key:"onDestroy",value:function value(){this.unListenScreenEvents()}},{key:"validateRequiredComponents",value:function value(){xt.lazyValidateProperties(this)}},{key:"listenScreenEvents",value:function value(){I_.on(O_.OPENING_SCREEN,this.handleOpeningScreen),I_.on(O_.OPENED_SCREEN,this.handleOpenedScreen)}},{key:"unListenScreenEvents",value:function value(){I_.off(O_.OPENING_SCREEN,this.handleOpeningScreen),I_.off(O_.OPENED_SCREEN,this.handleOpenedScreen)}},{key:"validateEventPayload",value:function value(e){return e.screenName===this.node.name}},{key:"open",value:function value(){this.enabled&&(this.confirmation.active=!1,this.congratulation.active=!0)}},{key:"close",value:function value(){this.closeButtonComponent.interactable=!1,this.yesButtonComponent.interactable=!1,this.noButtonComponent.interactable=!1,L.closeScreen(P.CONGRATULATION_SCREEN)}},{key:"handleStartOver",value:function value(){this.confirmation.active=!0,this.congratulation.active=!1;var _$e=this.confirmation.getComponent(ae);_$e?(q(_$e).set({opacity:0}).to(.2,{opacity:255},{easing:"smooth"}).start(),q(this.confirmation).set({scale:new te(0,0,0)}).to(.2,{scale:new te(1,1,1)},{easing:"smooth"}).start()):console.warn("CongratulationScreen: UIOpacity not found")}},{key:"handleYesStartOver",value:function value(){this.close(),this.node.scene.emit(sr.START_OVER)}},{key:"handleNoStartOver",value:function value(){this.close(),this.node.scene.emit(sr.GAME_REPLAY,{level:this.screen.data.level})}},{key:"handleClickedClose",value:function value(){this.close(),this.node.scene.emit(sr.GAME_REPLAY,{level:this.screen.data.level})}}]),n}(U)).prototype,"congratulation",[s_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y_=u(d_.prototype,"confirmation",[l_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f_=u(d_.prototype,"closeButtonComponent",[u_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m_=u(d_.prototype,"yesButtonComponent",[c_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g_=u(d_.prototype,"noButtonComponent",[h_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),p_=d_))||p_)||p_),x._RF.pop(),x._RF.push({},"7b024d/xQ1BBZV0UpNjM9UQ","LoadingFullScreen",void 0);var x_,N_,z_,G_,M_=F.ccclass,U_=F.property,H_=(w_=M_("LoadingFullScreen"),C_=U_(Ge),E_=U_(oe),w_((R_=u((T_=function(e){i(p,e);var s,l,u=a(p);function p(){var _$e;o(this,p);for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return _$e=u.call.apply(u,[this].concat(n)),c(_$e,"progressBar",R_,h(_$e)),c(_$e,"loadingText",L_,h(_$e)),_$e}return r(p,[{key:"__preload",value:function value(){this.uiOpacity=this.getComponent(ae),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function value(){xt.lazyValidateProperties(this)}},{key:"runLoadingTextAnimation",value:function value(){var _$e=this,t=0;this.schedule(function(){t=t>2?0:t+1,_$e.loadingText.string="Loading"+".".repeat(t)},.5)}},{key:"stopLoadingTextAnimation",value:function value(){this.unscheduleAllCallbacks()}},{key:"show",value:(l=t(n().mark(function e(t){var i,a;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.uiOpacity.opacity=0,this.progressBar.progress=0,i=q(this.uiOpacity).to(.2,{opacity:255},{easing:"cubicOut"}),a=q(this.progressBar).to(8,{progress:.9},{easing:"cubicOut"}),this.runLoadingTextAnimation(),f.runTweenAsync(i),e.next=8,f.runTweenAsync(a);case 8:case"end":return e.stop()}},e,this)})),function(e){return l.apply(this,arguments)})},{key:"hide",value:(s=t(n().mark(function e(t){var i,a;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.uiOpacity&&this.progressBar){e.next=2;break}return e.abrupt("return");case 2:return this.uiOpacity.opacity=255,this.progressBar.progress=.9,i=q(this.uiOpacity).to(.15,{opacity:0},{easing:"cubicIn"}),a=q(this.progressBar).to(.2,{progress:1},{easing:"cubicIn"}),this.runLoadingTextAnimation(),e.next=9,f.runTweenAsync(a);case 9:return this.stopLoadingTextAnimation(),e.next=12,f.runTweenAsync(i);case 12:this.node.active=!1;case 13:case"end":return e.stop()}},e,this)})),function(e){return s.apply(this,arguments)})}]),p}(U)).prototype,"progressBar",[C_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L_=u(T_.prototype,"loadingText",[E_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T_))||T_);x._RF.pop(),x._RF.push({},"daa70r49mtGR6iXhcKLcS3q","Loading",void 0);var j_,W_=F.ccclass,V_=F.property;x_=W_("Loading"),N_=V_(Le),x_((G_=u((z_=function(e){i(p,e);var s,l,u=a(p);function p(){var _$e;o(this,p);for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return _$e=u.call.apply(u,[this].concat(n)),c(_$e,"loadingPrefab",G_,h(_$e)),_$e.loadingNode=null,_$e}return r(p,[{key:"__preload",value:function value(){this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function value(){xt.lazyValidateProperties(this)}},{key:"onLoad",value:function value(){this.makePersistent()}},{key:"makePersistent",value:function value(){j.addPersistRootNode(this.node)}},{key:"createLoadingFullScreen",value:function value(){var _$e,t=ge("Canvas");if(t&&!t.getChildByName("Loading")){this.loadingNode||(this.loadingNode=Pe(this.loadingPrefab));var n=Pe._clone(this.loadingNode);this.loadingFullScreen=n.getComponent(H_),this.node.active=!1,null==(_$e=ge("Canvas"))||_$e.addChild(n)}}},{key:"show",value:(l=t(n().mark(function e(t){return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.createLoadingFullScreen(),!this.node.active){e.next=3;break}return e.abrupt("return");case 3:return this.node.active=!0,e.next=6,this.loadingFullScreen.show(t);case 6:case"end":return e.stop()}},e,this)})),function(e){return l.apply(this,arguments)})},{key:"hide",value:(s=t(n().mark(function e(t){var i;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(i=this.node)&&i.active){e.next=2;break}return e.abrupt("return");case 2:if(this.loadingFullScreen){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,this.loadingFullScreen.hide(t);case 6:this.node.active=!1;case 7:case"end":return e.stop()}},e,this)})),function(e){return s.apply(this,arguments)})}]),p}(U)).prototype,"loadingPrefab",[N_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z_)),x._RF.pop(),x._RF.push({},"61985gSEDBMY6nVNc9Q1D6W","LoadingScreen",void 0);var $_,q_,K_,Y_,J_,X_,Z_,Q_,eB,tB,nB,iB,aB,oB,rB,sB,lB,uB,cB,hB,pB,dB=F.ccclass,vB=F.disallowMultiple,yB=F.requireComponent,fB=Ludex.Events,mB=codex.event;dB("LoadingScreen")(j_=vB(j_=yB(XP)(j_=function(e){i(n,e);var t=a(n);function n(){var _$e;o(this,n);for(var i=arguments.length,a=Array(i),r=0;r<i;r++)a[r]=arguments[r];return(_$e=t.call.apply(t,[this].concat(a))).isClosing=!1,_$e.handleOpeningScreen=function(t){_$e.validateEventPayload(t)&&(_$e.enabled=!0,_$e.isClosing=!1)},_$e.handleOpenedScreen=function(t){_$e.validateEventPayload(t)&&_$e.open()},_$e.handleClosingScreen=function(t){_$e.validateEventPayload(t)&&(_$e.isClosing=!0,_$e.unscheduleAllCallbacks())},_$e.handleClosedScreen=function(t){_$e.validateEventPayload(t)&&(_$e.enabled=!1,_$e.isClosing=!1)},_$e.handleOnCloseScreen=function(){L.closeScreen(P.LOADING_SCREEN)},_$e}return r(n,[{key:"onLoad",value:function value(){this.enabled=!1,this.screen=this.getComponent(XP),this.validateRequiredComponents(),this.listenScreenEvents()}},{key:"onDestroy",value:function value(){this.unListenScreenEvents()}},{key:"validateRequiredComponents",value:function value(){xt.lazyValidateProperties(this)}},{key:"listenScreenEvents",value:function value(){mB.on(fB.OPENING_SCREEN,this.handleOpeningScreen),mB.on(fB.OPENED_SCREEN,this.handleOpenedScreen),mB.on(fB.CLOSING_SCREEN,this.handleClosingScreen),mB.on(fB.CLOSED_SCREEN,this.handleClosedScreen)}},{key:"unListenScreenEvents",value:function value(){mB.off(fB.OPENING_SCREEN,this.handleOpeningScreen),mB.off(fB.OPENED_SCREEN,this.handleOpenedScreen),mB.off(fB.CLOSING_SCREEN,this.handleClosingScreen),mB.off(fB.CLOSED_SCREEN,this.handleClosedScreen)}},{key:"validateEventPayload",value:function value(e){return e.screenName===this.node.name}},{key:"open",value:function value(){var _$e;if(this.enabled&&!this.isClosing){var t=null!=(_$e=this.screen.data.duration)?_$e:0;t>0&&this.scheduleOnce(this.handleOnCloseScreen,t)}}}]),n}(U))||j_)||j_),x._RF.pop(),x._RF.push({},"15681ka+CZC45B7BdUhsnhF","LoseScreen",void 0);var gB,bB,SB,kB,wB,CB,EB,AB,TB=F.ccclass,RB=F.property,LB=F.disallowMultiple,PB=F.requireComponent,_B=Ludex,BB=_B.Events,DB=_B.Utils.Decorator,OB=codex,IB=OB.language,xB=OB.event;$_=TB("LoseScreen"),q_=PB(XP),K_=RB(oe),Y_=RB(Z),J_=RB(ie),X_=RB(ie),Z_=RB(Z),Q_=RB(Z),eB=RB(Z),tB=RB(Z),nB=DB.tryCatch(),$_(iB=LB(iB=q_((oB=u((aB=function(e){i(n,e);var t=a(n);function n(){var _$e;o(this,n);for(var i=arguments.length,a=Array(i),r=0;r<i;r++)a[r]=arguments[r];return(_$e=t.call.apply(t,[this].concat(a))).mode="classic",c(_$e,"levelText",oB,h(_$e)),c(_$e,"retryButton",rB,h(_$e)),c(_$e,"titleRibbon",sB,h(_$e)),c(_$e,"dogeHead",lB,h(_$e)),c(_$e,"retryButtonComponent",uB,h(_$e)),c(_$e,"closeButtonComponent",cB,h(_$e)),c(_$e,"endlessButtonComponent",hB,h(_$e)),c(_$e,"classicButtonComponent",pB,h(_$e)),_$e.handleOpeningScreen=function(t){if(!_$e.screen)throw Error("LoseScreen: screen not found");_$e.validateEventPayload(t)&&(_$e.retryButtonComponent.interactable=!0,_$e.closeButtonComponent.interactable=!0,_$e.endlessButtonComponent.interactable=!0,_$e.classicButtonComponent.interactable=!0)},_$e.handleOpenedScreen=function(t){_$e.validateEventPayload(t)&&_$e.open()},_$e}return r(n,[{key:"__preload",value:function value(){this.enabled=!1,this.screen=this.getComponent(XP),this.validateRequiredComponents(),this.listenScreenEvents()}},{key:"onLoad",value:function value(){var _$e=j.getScene();this.mode=_$e&&_$e.name===B.GAME_SCENE?"classic":"endless"}},{key:"onDestroy",value:function value(){this.unListenScreenEvents()}},{key:"validateRequiredComponents",value:function value(){xt.lazyValidateProperties(this)}},{key:"listenScreenEvents",value:function value(){xB.on(BB.OPENING_SCREEN,this.handleOpeningScreen),xB.on(BB.OPENED_SCREEN,this.handleOpenedScreen)}},{key:"unListenScreenEvents",value:function value(){xB.off(BB.OPENING_SCREEN,this.handleOpeningScreen),xB.off(BB.OPENED_SCREEN,this.handleOpenedScreen)}},{key:"validateEventPayload",value:function value(e){return e.screenName===this.node.name}},{key:"open",value:function value(){this.setLevelText(),this.resetState(),this.runOpenAnimation()}},{key:"close",value:function value(){this.closeButtonComponent.interactable=!1,this.retryButtonComponent.interactable=!1,this.endlessButtonComponent.interactable=!1,this.classicButtonComponent.interactable=!1,L.closeScreen(P.LOSE_SCREEN)}},{key:"runOpenAnimation",value:function value(){var _$e=this,t=this.createRibbonAnim(),_$n=this.createDogeHeadAnim(),i=this.createRetryButtonAnim();if(t&&_$n&&i){var a=q({}).delay(.2).call(function(){return t.start()});if("classic"===this.mode){var o=this.createLevelAnim();if(!o)return void console.warn("LoseScreen: levelAnim not found");a.delay(.2).call(function(){return o.start()})}if(a.delay(.3).call(function(){return _$n.start()}).delay(.2).call(function(){return i.start()}).delay(.2),"endless"===this.mode){var r=this.createClassicButtonAnim();if(!r)return void console.warn("LoseScreen: classicButtonAnim not found");a.call(function(){return r.start()})}else{var s=this.createEndlessButtonAnim();if(!s)return void console.warn("LoseScreen: endlessButtonAnim not found");a.call(function(){return s.start()})}a.call(function(){var t;_$e.screen.data&&(t=_$e.screen.data.level),E.showInterstitialAdAsync({forLevel:t,includeSDK:["CrazyGames"]})}).start()}else console.warn("LoseScreen: animations not found")}},{key:"resetState",value:function value(){var _$e=this.retryButton.getComponent(ae),t=this.titleRibbon.getComponent(ae),_$n=this.levelText.getComponent(ae),i=this.dogeHead.getComponent(ae),a=this.classicButtonComponent.getComponent(ae),o=this.endlessButtonComponent.getComponent(ae);_$e&&t&&_$n&&i&&a&&o?(_$e.opacity=0,t.opacity=0,_$n.opacity=0,i.opacity=0,a.opacity=0,o.opacity=0,this.dogeHead.setPosition(1e3,-19),this.retryButton.node.active=!1,this.classicButtonComponent.node.active=!1,this.endlessButtonComponent.node.active=!1,this.levelText.node.active=!1):console.warn("LoseScreen: UIOpacity of some component not found")}},{key:"setLevelText",value:function value(){var _$e=this.screen.data.level,t=IB.getText("game.level");this.levelText.string="".concat(t," ").concat(_$e)}},{key:"createRibbonAnim",value:function value(){var _$e=this.titleRibbon.getComponent(ae);return _$e?q(_$e).set({opacity:0}).to(.3,{opacity:255},{easing:"smooth"}):null}},{key:"createLevelAnim",value:function value(){var _$e=this.levelText.getComponent(ae);return _$e?(this.levelText.node.active=!0,q(_$e).set({opacity:0}).to(.3,{opacity:255},{easing:"smooth"})):null}},{key:"createDogeHeadAnim",value:function value(){var _$e=this.dogeHead.getComponent(ae);return _$e?(this.dogeHead.setPosition(0,-97),q(_$e).set({opacity:0}).to(.3,{opacity:255},{easing:"smooth"})):null}},{key:"createRetryButtonAnim",value:function value(){var _$e=this.retryButton.getComponent(ae);return _$e?(this.retryButton.node.active=!0,q(_$e).set({opacity:0}).to(.4,{opacity:255},{easing:"smooth"})):null}},{key:"createClassicButtonAnim",value:function value(){var _$e=this.classicButtonComponent.getComponent(ae);return _$e?(this.classicButtonComponent.node.active=!0,q(_$e).set({opacity:0}).to(.4,{opacity:255},{easing:"smooth"})):null}},{key:"createEndlessButtonAnim",value:function value(){var _$e=this.endlessButtonComponent.getComponent(ae);return _$e?(this.endlessButtonComponent.node.active=!0,q(_$e).set({opacity:0}).to(.4,{opacity:255},{easing:"smooth"})):null}},{key:"handleClickedRetryGame",value:function value(){this.close(),this.replayGame()}},{key:"handleClickedClassicMode",value:function value(){this.close(),_.switchToGameScene()}},{key:"handleClickedEndlessMode",value:function value(){this.close(),_.switchToEndlessScene()}},{key:"handleClickedClose",value:function value(){this.close(),this.replayGame()}},{key:"replayGame",value:function value(){this.node.scene.emit(sr.GAME_REPLAY,{level:this.screen.data.level})}}]),n}(U)).prototype,"levelText",[K_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rB=u(aB.prototype,"retryButton",[Y_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),sB=u(aB.prototype,"titleRibbon",[J_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),lB=u(aB.prototype,"dogeHead",[X_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),uB=u(aB.prototype,"retryButtonComponent",[Z_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cB=u(aB.prototype,"closeButtonComponent",[Q_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),hB=u(aB.prototype,"endlessButtonComponent",[eB],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pB=u(aB.prototype,"classicButtonComponent",[tB],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),u(aB.prototype,"setLevelText",[nB],Object.getOwnPropertyDescriptor(aB.prototype,"setLevelText"),aB.prototype),iB=aB))||iB)||iB),x._RF.pop(),x._RF.push({},"6460akNFfhP9pDOT2Z0+s2R","NotificationScreen",void 0);var NB,FB,zB,GB,MB,UB,HB,jB,WB,VB,$B,qB,KB,YB,JB,XB,ZB,QB,eD,tD,nD=F.ccclass,iD=F.disallowMultiple,aD=F.requireComponent,oD=F.property,rD=Ludex,sD=rD.Events,lD=rD.Utils,uD=codex.event;gB=nD("NotificationScreen"),bB=aD(XP),SB=oD(oe),kB=oD(Z),gB(wB=iD(wB=bB((EB=u((CB=function(e){i(n,e);var t=a(n);function n(){var _$e;o(this,n);for(var i=arguments.length,a=Array(i),r=0;r<i;r++)a[r]=arguments[r];return _$e=t.call.apply(t,[this].concat(a)),c(_$e,"message",EB,h(_$e)),c(_$e,"touchZone",AB,h(_$e)),_$e.enableCloseOnTouch=!0,_$e.handleOpeningScreen=function(t){_$e.validateEventPayload(t)&&_$e.updateScreenData(t)},_$e.handleClosingScreen=function(t){_$e.validateEventPayload(t)&&_$e.unscheduleAllCallbacks()},_$e}return r(n,[{key:"__preload",value:function value(){this.listenScreenEvents()}},{key:"onDestroy",value:function value(){this.unListenScreenEvents()}},{key:"onLoad",value:function value(){this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function value(){xt.lazyValidateProperties(this)}},{key:"listenScreenEvents",value:function value(){uD.on(sD.OPENING_SCREEN,this.handleOpeningScreen),uD.on(sD.CLOSING_SCREEN,this.handleClosingScreen)}},{key:"unListenScreenEvents",value:function value(){uD.off(sD.OPENING_SCREEN,this.handleOpeningScreen),uD.off(sD.CLOSING_SCREEN,this.handleClosingScreen)}},{key:"validateEventPayload",value:function value(e){return e.screenName===this.node.name}},{key:"updateScreenData",value:function value(e){var t=e.screenData;lD.Valid.isObject(t)?(t.message&&(this.message.string=t.message),t.duration&&t.duration>0&&this.scheduleOnce(function(){L.closeScreen(P.NOTIFICATION_SCREEN)},t.duration),!1===t.enableCloseOnTouch?this.enableCloseOnTouch=!1:this.enableCloseOnTouch=!0):console.warn("NotificationScreen: screenData not found")}},{key:"handleClickedClose",value:function value(){this.unscheduleAllCallbacks(),L.closeScreen(P.NOTIFICATION_SCREEN)}},{key:"closeOnTouch",value:function value(){this.enableCloseOnTouch&&this.handleClickedClose()}}]),n}(U)).prototype,"message",[SB],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),AB=u(CB.prototype,"touchZone",[kB],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),wB=CB))||wB)||wB),x._RF.pop(),x._RF.push({},"61932YLC/5CFrE0eD0ez8Zg","SettingsScreen",void 0);var cD,hD,pD,dD,vD,yD,fD,mD,gD,bD,SD,kD,wD,CD,ED,AD,TD,RD,LD,PD,_D,BD,DD,OD,ID,xD,ND=F.ccclass,FD=F.property,zD=F.requireComponent,GD=Ludex,MD=GD.Events,UD=GD.Utils,HD=codex,jD=HD.player,WD=HD.event;NB=ND("SettingsScreen"),FB=zD(XP),zB=FD(ie),GB=FD(ie),MB=FD(ie),UB=FD(Xs),HB=FD(Xs),jB=FD(Xs),WB=FD(Z),VB=FD(Z),NB($B=FB((KB=u((qB=function(e){i(n,e);var t=a(n);function n(){var _$e;o(this,n);for(var i=arguments.length,a=Array(i),r=0;r<i;r++)a[r]=arguments[r];return _$e=t.call.apply(t,[this].concat(a)),c(_$e,"musicSetting",KB,h(_$e)),c(_$e,"soundSetting",YB,h(_$e)),c(_$e,"vibrateSetting",JB,h(_$e)),c(_$e,"musicSwitch",XB,h(_$e)),c(_$e,"soundSwitch",ZB,h(_$e)),c(_$e,"vibrateSwitch",QB,h(_$e)),c(_$e,"closeButtonComponent",eD,h(_$e)),c(_$e,"resumeButtonComponent",tD,h(_$e)),_$e.triggerSequence="",_$e.handleOpeningScreen=function(t){_$e.validateEventPayload(t)&&(_$e.closeButtonComponent.interactable=!0,_$e.resumeButtonComponent.interactable=!0,_$e.updateStatus())},_$e.handleResetSequence=function(){_$e.triggerSequence=""},_$e.handleTriggerUnlockKey=function(t){var _$n=t.code,i="101013012031";"number"==typeof _$n&&-1!==i.indexOf(_$n.toString())&&(_$e.triggerSequence+=_$n.toString(),console.log("SettingsScreen: handleTriggerUnlockKey",_$n,_$e.triggerSequence,_$e.triggerSequence===i),_$e.triggerSequence===i&&(_$e.node.scene.emit(fh.UNLOCK_DEV_TOOLS),_$e.node.off(fh.TRIGGER_UNLOCK_KEY)))},_$e.updateVibrateButton=function(){var t=_$e.vibrateSetting.getComponentInChildren(Z),_$n=_$e.vibrateSetting.getComponentInChildren(Xs),i=_$e.vibrateSetting.getComponentInChildren(Yi);if(t&&_$n&&i)if(UD.Device.isMobile()){var a,o=null!=(a=jD.getPlayerSetting("vibrate"))&&a;_$n.setEnabled(o)}else t.interactable=!1,_$n.setEnabled(!1),i.changeState(!1);else console.warn("SettingsScreen: vibrate button missing components")},_$e}return r(n,[{key:"onLoad",value:function value(){this.enabled=!1,this.screen=this.getComponent(XP),this.validateRequiredComponents(),this.listenScreenEvents(),this.listenUnlockDevTools(),this.handleGameDistributionUIChanges()}},{key:"onDestroy",value:function value(){this.unListenScreenEvents(),this.unListenUnlockDevTools()}},{key:"validateRequiredComponents",value:function value(){xt.lazyValidateProperties(this)}},{key:"handleGameDistributionUIChanges",value:function value(){if(GameSDK.isGameSDK("GameDistribution")){this.vibrateSetting.active=!1;var _$e=this.musicSetting.position,t=_$e.x,_$n=_$e.y,i=_$e.z;this.musicSetting.setPosition(new te(t,_$n-50,i));var a=this.soundSetting.position,o=a.x,r=a.y,s=a.z;this.soundSetting.setPosition(new te(o,r-50,s))}}},{key:"listenScreenEvents",value:function value(){WD.on(MD.OPENING_SCREEN,this.handleOpeningScreen)}},{key:"unListenScreenEvents",value:function value(){WD.off(MD.OPENING_SCREEN,this.handleOpeningScreen)}},{key:"validateEventPayload",value:function value(e){return e.screenName===this.node.name}},{key:"listenUnlockDevTools",value:function value(){this.node.off(fh.TRIGGER_UNLOCK_KEY),this.node.on(fh.TRIGGER_RESET_SEQUENCE,this.handleResetSequence),this.node.on(fh.TRIGGER_UNLOCK_KEY,this.handleTriggerUnlockKey)}},{key:"unListenUnlockDevTools",value:function value(){this.node.off(fh.TRIGGER_RESET_SEQUENCE,this.handleResetSequence),this.node.off(fh.TRIGGER_UNLOCK_KEY,this.handleTriggerUnlockKey)}},{key:"open",value:function value(){this.updateStatus(),this.runPopUpAnimation(),this.node.emit(fh.TRIGGER_RESET_SEQUENCE)}},{key:"close",value:function value(){this.closeButtonComponent.interactable=!1,this.resumeButtonComponent.interactable=!1,this.node.emit(fh.TRIGGER_RESET_SEQUENCE),L.closeScreen(P.SETTINGS_SCREEN)}},{key:"updateStatus",value:function value(){var _$e,t,_$n,i={music:null!=(_$e=jD.getPlayerSetting("music"))&&_$e,sound:null!=(t=jD.getPlayerSetting("sound"))&&t,vibrate:null!=(_$n=jD.getPlayerSetting("vibrate"))&&_$n};this.musicSwitch?this.soundSwitch?(this.musicSwitch.setEnabled(i.music),this.soundSwitch.setEnabled(i.sound),GameSDK.isGameSDK("GameDistribution")||this.scheduleOnce(this.updateVibrateButton,.1)):console.warn("SettingsScreen: soundSwitch not found"):console.warn("SettingsScreen: musicSwitch not found")}},{key:"runPopUpAnimation",value:function value(){this.screen.container||console.warn("SettingsScreen: screen not found")}},{key:"switchMusicButton",value:function value(){if(this.musicSwitch){var _$e=this.musicSwitch.switch();jD.setSetting("music",_$e),this.node.emit(fh.TRIGGER_UNLOCK_KEY,{code:+!!_$e}),_$e?k.playMusic(Zn.BG_MUSIC):k.pauseMusic()}else console.warn("SettingsScreen: musicSwitch not found")}},{key:"switchSoundButton",value:function value(){if(this.soundSwitch){var _$e=this.soundSwitch.switch();jD.setSetting("sound",_$e),this.node.emit(fh.TRIGGER_UNLOCK_KEY,{code:_$e?3:2})}else console.warn("SettingsScreen: soundSwitch not found")}},{key:"switchVibrateButton",value:function value(){if(this.vibrateSwitch){var _$e=this.vibrateSwitch.switch();jD.setSetting("vibrate",_$e)}else console.warn("SettingsScreen: vibrateSwitch not found")}},{key:"handleClickedResume",value:function value(){this.resumeGame()}},{key:"handleClickedClose",value:function value(){this.resumeGame()}},{key:"resumeGame",value:function value(){this.close(),this.node.scene.emit(sr.GAME_RESUME)}}]),n}(U)).prototype,"musicSetting",[zB],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),YB=u(qB.prototype,"soundSetting",[GB],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),JB=u(qB.prototype,"vibrateSetting",[MB],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),XB=u(qB.prototype,"musicSwitch",[UB],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ZB=u(qB.prototype,"soundSwitch",[HB],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),QB=u(qB.prototype,"vibrateSwitch",[jB],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),eD=u(qB.prototype,"closeButtonComponent",[WB],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),tD=u(qB.prototype,"resumeButtonComponent",[VB],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$B=qB))||$B),x._RF.pop(),x._RF.push({},"35c09YGmdFA4pHOJFDg1tw5","WinningScreen",void 0);var VD=F.ccclass,$D=F.property,qD=F.disallowMultiple,KD=F.requireComponent,YD=Ludex.Events,JD=codex,XD=JD.player,ZD=JD.event;JD.language,cD=VD("WinningScreen"),hD=KD(XP),pD=$D(Y),dD=$D(Z),vD=$D(Z),yD=$D(ie),fD=$D(ie),mD=$D(oe),gD=$D(Z),bD=$D(Z),SD=$D(Z),kD=$D(Z),wD=$D(Z),cD(CD=qD(CD=hD((AD=u((ED=function(e){i(u,e);var s=a(u);function u(){var _$e;o(this,u);for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return(_$e=s.call.apply(s,[this].concat(n))).mode="classic",c(_$e,"titleRibbon",AD,h(_$e)),c(_$e,"nextLevelButton",TD,h(_$e)),c(_$e,"retryLevelButton",RD,h(_$e)),c(_$e,"confettiGroup",LD,h(_$e)),c(_$e,"dogeHead",PD,h(_$e)),c(_$e,"levelText",_D,h(_$e)),c(_$e,"closeButtonComponent",BD,h(_$e)),c(_$e,"nextLevelButtonComponent",DD,h(_$e)),c(_$e,"retryLevelButtonComponent",OD,h(_$e)),c(_$e,"classicButtonComponent",ID,h(_$e)),c(_$e,"endlessButtonComponent",xD,h(_$e)),_$e.starsCollected=3,_$e.handleOpeningScreen=function(t){if(!_$e.screen)throw Error("WinningScreen: screen not found");_$e.validateEventPayload(t)&&(_$e.closeButtonComponent.interactable=!0,_$e.retryLevelButtonComponent.interactable=!0,_$e.nextLevelButtonComponent.interactable=!0,_$e.classicButtonComponent.interactable=!0,_$e.endlessButtonComponent.interactable=!0)},_$e.handleOpenedScreen=function(t){_$e.validateEventPayload(t)&&_$e.open()},_$e.handleClosingScreen=function(t){_$e.validateEventPayload(t)&&_$e.unscheduleAllCallbacks()},_$e}return r(u,[{key:"__preload",value:function value(){this.enabled=!1,this.screen=this.getComponent(XP),this.validateRequiredComponents(),this.listenScreenEvents()}},{key:"onLoad",value:function value(){var _$e=j.getScene();this.mode=_$e&&_$e.name===B.GAME_SCENE?"classic":"endless"}},{key:"onDestroy",value:function value(){this.unListenScreenEvents()}},{key:"validateRequiredComponents",value:function value(){xt.lazyValidateProperties(this)}},{key:"listenScreenEvents",value:function value(){ZD.on(YD.OPENING_SCREEN,this.handleOpeningScreen),ZD.on(YD.OPENED_SCREEN,this.handleOpenedScreen),ZD.on(YD.CLOSING_SCREEN,this.handleClosingScreen)}},{key:"unListenScreenEvents",value:function value(){ZD.off(YD.OPENING_SCREEN,this.handleOpeningScreen),ZD.off(YD.OPENED_SCREEN,this.handleOpenedScreen),ZD.off(YD.CLOSING_SCREEN,this.handleClosingScreen)}},{key:"validateEventPayload",value:function value(e){return e.screenName===this.node.name}},{key:"start",value:function value(){var _$e=this;this.dogeHead.translate(new te(-1e3,0)),this.scheduleOnce(function(){_$e.dogeHead.translate(new te(1e3,0))},.1)}},{key:"open",value:function value(){var _$e=this;this.nextLevelButton.node.active=!1,this.retryLevelButton.node.active=!1,this.classicButtonComponent.node.active=!1,this.endlessButtonComponent.node.active=!1,this.closeButtonComponent.interactable=!1,this.classicButtonComponent.interactable=!1,this.endlessButtonComponent.interactable=!1,this.confettiGroup.active=!0,this.updateLevel(),this.updateStars(),this.runRibbonAnimation();var i=this.runStarsAnimation();this.runConfetti(i),this.scheduleOnce(t(n().mark(function t(){var i,a,o,r;return n().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E.showInterstitialAdAsync({forLevel:_$e.screen.data.level,excludeSDK:["CrazyGames"]});case 2:if(_$e.nextLevelButton.node.active=!0,_$e.retryLevelButton.node.active=!0,_$e.closeButtonComponent.interactable=!0,i=_$e.nextLevelButton.getComponent(ae)){t.next=8;break}return t.abrupt("return");case 8:if(q(i).set({opacity:0}).to(.4,{opacity:255},{easing:"smooth"}).start(),a=_$e.retryLevelButton.getComponent(ae)){t.next=12;break}return t.abrupt("return");case 12:if(q(a).set({opacity:0}).delay(.2).to(.4,{opacity:255},{easing:"smooth"}).start(),"classic"!==_$e.mode){t.next=22;break}if(o=_$e.createEndlessButtonAnim(),_$e.endlessButtonComponent.interactable=!0,o){t.next=19;break}return console.warn("WinningScreen: endlessButtonAnim not found"),t.abrupt("return");case 19:o.start(),t.next=28;break;case 22:if(r=_$e.createClassicButtonAnim(),_$e.classicButtonComponent.interactable=!0,r){t.next=27;break}return console.warn("WinningScreen: classicButtonAnim not found"),t.abrupt("return");case 27:r.start();case 28:case"end":return t.stop()}},t)})),i),k.playSound(Zn.HAND_CLAP)}},{key:"close",value:function value(){this.closeButtonComponent.interactable=!1,this.retryLevelButtonComponent.interactable=!1,this.nextLevelButtonComponent.interactable=!1,this.classicButtonComponent.interactable=!1,this.endlessButtonComponent.interactable=!1,this.confettiGroup.active=!1,L.closeScreen(P.WINNING_SCREEN)}},{key:"showCongratulationScreen",value:function value(){L.openScreen(P.CONGRATULATION_SCREEN,{level:this.screen.data.level})}},{key:"handleClickedNextLevel",value:function value(){if(XD.getGameData()){var _$e=this.screen.data.level;_$e?(this.node.scene.emit(sr.NEXT_LEVEL,{level:_$e}),this.close()):console.warn("WinningScreen: level not found")}else console.warn("WinningScreen: gameData not found")}},{key:"handleClickedRetry",value:function value(){this.close(),this.node.scene.emit(sr.GAME_REPLAY,{level:this.screen.data.level})}},{key:"handleClickedClose",value:function value(){this.close();var _$e=this.screen.data.level;this.node.scene.emit(sr.NEXT_LEVEL,{level:_$e})}},{key:"updateStars",value:function value(){var _$e;this.starsCollected=null!=(_$e=this.screen.data.stars)?_$e:0}},{key:"updateLevel",value:function value(){var _$e=this.screen.data.level;this.levelText.string="Level ".concat(_$e)}},{key:"runRibbonAnimation",value:function value(){this.titleRibbon.fillRange=0,q(this.titleRibbon).to(.5,{fillRange:1},{easing:"backInOut"}).start()}},{key:"runStarsAnimation",value:function value(){var _$e=this,t=ge("Container/Stars/RightStar",this.node),n=ge("Container/Stars/LeftStar",this.node),i=ge("Container/Stars/MidStar",this.node),a=[n,i,t];if(!t||!n||!i)return console.warn("WinningScreen: stars not found"),0;for(var o=0;o<a.length;o++){var s=a[o];if(s){var l=s.getChildByName("Star");l?l.active=!1:console.warn("WinningScreen: starComponent not found")}}this.animateStars(a);for(var _$u,c=1.32,p=0;p<this.starsCollected;p++)if(_$u=function h(){var t=a[p];if(!t)return console.warn("WinningScreen: stars not found"),{v:0};var n=t.getChildByName("Star");if(!n)return console.warn("WinningScreen: starComponent not found"),{v:0};_$e.scheduleOnce(function(){n.active=!0,k.playSound(Zn.STAR_RAISE),q(n).set({scale:new te(1.7,1.7,1)}).to(.35,{scale:new te(1,1,1)},{easing:"backOut"}).start()},c),c+=.3}())return _$u.v;return c}},{key:"animateStars",value:function value(e){for(var t=0;t<e.length;t++){var n=e[t];if(!n)return void console.warn("WinningScreen: starEmpty not found");var i=new te(0,0,1),a=new te(1,1,1);1===t&&a.set(1.2,1.2,1),q(n).set({scale:i}).delay(.7).to(.4,{scale:a},{easing:"backOut"}).start()}}},{key:"createClassicButtonAnim",value:function value(){var _$e=this.classicButtonComponent.getComponent(ae);return _$e?(this.classicButtonComponent.node.active=!0,q(_$e).set({opacity:0}).delay(.4).to(.4,{opacity:255},{easing:"smooth"})):null}},{key:"createEndlessButtonAnim",value:function value(){var _$e=this.endlessButtonComponent.getComponent(ae);return _$e?(this.endlessButtonComponent.node.active=!0,q(_$e).set({opacity:0}).delay(.4).to(.4,{opacity:255},{easing:"smooth"})):null}},{key:"runConfetti",value:function value(e){var t=this;this.stopConfetti();var n=this.confettiGroup.getComponentsInChildren(pe);this.scheduleOnce(function(){if(!1!==t.node.active){var _$e,i=l(n);try{for(i.s();!(_$e=i.n()).done;)_$e.value.resetSystem()}catch(e){i.e(e)}finally{i.f()}}},e)}},{key:"stopConfetti",value:function value(){var _$e,t=this.confettiGroup.getComponentsInChildren(pe),n=l(t);try{for(n.s();!(_$e=n.n()).done;)_$e.value.stopSystem()}catch(e){n.e(e)}finally{n.f()}}},{key:"handleClickedClassicMode",value:function value(){this.close(),_.switchToGameScene()}},{key:"handleClickedEndlessMode",value:function value(){this.updatePlayerLevelProgress(),this.close(),_.switchToEndlessScene()}},{key:"updatePlayerLevelProgress",value:function value(){if(XD.getGameData()){var _$e=this.screen.data.level;_$e?this.node.scene.emit(sr.UPDATE_LEVEL,{level:_$e}):console.warn("WinningScreen: level not found")}else console.warn("WinningScreen: gameData not found")}}]),u}(U)).prototype,"titleRibbon",[pD],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),TD=u(ED.prototype,"nextLevelButton",[dD],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),RD=u(ED.prototype,"retryLevelButton",[vD],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),LD=u(ED.prototype,"confettiGroup",[yD],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),PD=u(ED.prototype,"dogeHead",[fD],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_D=u(ED.prototype,"levelText",[mD],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),BD=u(ED.prototype,"closeButtonComponent",[gD],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),DD=u(ED.prototype,"nextLevelButtonComponent",[bD],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),OD=u(ED.prototype,"retryLevelButtonComponent",[SD],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ID=u(ED.prototype,"classicButtonComponent",[kD],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xD=u(ED.prototype,"endlessButtonComponent",[wD],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),CD=ED))||CD)||CD),x._RF.pop(),x._RF.push({},"af947t5g91EkZVWXv5upZaV","CacheUtils",void 0),Ludex.Utils.Image,codex.frameCapture,x._RF.pop(),x._RF.push({},"e80e4nIcfdLN56j5b9SMhvH","LeaderboardUtils",void 0),codex.leaderboard,x._RF.pop(),x._RF.push({},"9ecd9Kte0VJN4rRVFlb6CzI","OverlayUtils",void 0);var QD=codex,eO=(QD.player,QD.analytics,Ludex.Plugins.Analytics);(void 0===eO?{}:eO).Events,x._RF.pop(),x._RF.push({},"36e26OmHk5GXL6+/b4UibIf","SortNodeUtils",void 0),x._RF.pop(),x._RF.push({},"88f2b4WH6NBlaGD7WvCOA2j","VibrateUtils",void 0),Ludex.Utils.Browser,codex.player,x._RF.pop()}}});System.register("virtual:///prerequisite-imports/main",["chunks:///main.js"],function(_export,_context){return{setters:[function(_m){var _exportObj={};for(var _key in _m)"default"!==_key&&"__esModule"!==_key&&(_exportObj[_key]=_m[_key]);_export(_exportObj)}],execute:function execute(){}}});