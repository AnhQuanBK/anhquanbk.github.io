function _instanceof(left,right){return null!=right&&"undefined"!=typeof Symbol&&right[Symbol.hasInstance]?!!right[Symbol.hasInstance](left):left instanceof right}System.register("chunks:///systems.js",["./TournamentUtils-6221d3e4.js","cc"],function(){var e,t,n,a,r,i,s,o,c,u,l,d,p,h,f,m,g,v,$,S,y,w,E,b,x,A,C,D,R,k,L,T,F,_,I,M,P,N,O,U,G,B,z,H,V,Y,q,Q,W,K,j,X,Z,J,ee,te,ne,ae,re,ie,se,oe,ce,ue,le,de,pe;return{setters:[function(M){e=M.i,t=M.f,n=M.a,a=M.b,r=M.t,i=M.e,s=M.G,o=M.D,c=M.j,u=M.q,l=M.C,d=M.o,p=M.h,h=M.M,f=M.P,m=M.E,g=M.u,v=M.l,$=M.F,S=M.L,y=M.s,w=M.p,E=M.v,b=M.R,x=M.H,A=M.T,C=M.y,D=M.S,R=M.r,k=M.x,L=M.B,T=M.I,F=M.J,_=M.c,I=M.d},function(e){M=e.cclegacy,P=e.game,N=e.settings,O=e.Settings,U=e.View,G=e.AssetManager,B=e.sys,z=e.input,H=e.Input,V=e.DynamicAtlasManager,Y=e.macro,q=e.director,Q=e.view,W=e.ResolutionPolicy,K=e.Size,j=e.screen,X=e.Director,Z=e.Sprite,J=e.UITransform,ee=e.SpriteFrame,te=e.Rect,ne=e.assetManager,ae=e.ImageAsset,re=e.UIOpacity,ie=e.Label,se=e.instantiate,oe=e.Prefab,ce=e.Game,ue=e._decorator,le=e.rendering,de=e.gfx,pe=e.Component}],execute:function execute(){var he,fe,me,ge={text:{"core.nameless":"Nameless","game.resume":"Resume","game.restart":"Restart","game.cancel":"Cancel","game.challenge":"Challenge\nFriends","game.next":"NEXT","game.completed":"COMPLETED","game.tryAgain":"Try again","game.retry":"RETRY","game.startOverQ":"Start Over?","game.startOverMsg":"Start over? You'll lose your current progress and begin from the start. Are you sure you want to restart?","game.startOver":"START OVER","game.paused":"Paused","game.end":"End","game.quit":"Quit","game.join":"Join","game.joinLeaderboard":"Join Leaderboard","game.continue":"Continue","game.letsPlay":"Let's Play","game.logIn":"Log in","game.create":"Create","game.quitLevelShortMsg":"Quit Level?","game.quitSingleMsg":"Quit now? You're so close to completing this level!","game.quitTourMsg":"Quit now? You're just a few levels away from ranking up!","game.level":"Level","game.levelX":"Level %{0}","game.hardLevel":"Hard Level","game.result":"Your Result","game.nextLevel":"Next Level","game.win":"You Win","game.lose":"You Lose","game.draw":"Draw","game.replay":"Replay","game.boom":"Boom!","game.timesUp":"Time's Up!","game.bombDesc":"The bomb exploded!","game.timesUpDesc":"Restart or add 2 minutes?","game.daily":"Daily","game.weekly":"Weekly","game.endsSoon":"Ends Soon","game.endsIn":"Ends %{0}","game.player":"1 player","game.nPlayers":"%{0} players","game.pTour":"%{0}'s Tournament","game.combo":"Combo","game.tourLbUpdated":"Duel!","settings.level":"Level","settings.settings":"Settings","settings.music":"Music","settings.sound":"Sound","settings.vibrate":"Vibrate","settings.on":"ON","settings.off":"OFF","settings.notification":"Notification","settings.report":"Report","settings.share":"Share","settings.invite":"Invite Friends","settings.feedback":"Feedback","settings.createShortcut":"Create\nShortcut","settings.or":"OR","settings.customMode":"Custom\nMode","custom.customLevel":"Custom Level","custom.time":"Time","custom.difficulty":"Difficulty","custom.easy":"Easy","custom.normal":"Normal","custom.hard":"Hard","custom.extreme":"Extreme","custom.bombs":"Bombs","custom.ads":"Extra ads duration","custom.score":"Score increase:","custom.play":"Play","ads.cancelled":"Sorry, No Rewards!\nYou have cancelled the ad!","ads.loading":"Loading ads...","ads.notReady":"No ads to display!","ads.adAfterT":"AD starting in %{0}...","ads.levelAfterT":"Next level in %{0}...","ads.rewardNotice":"Watch a short ad to receive\nthese rewards:","ads.skip":"Skip","ads.daily":"Daily Rewards","ads.claim":"Claim","ads.claimX2":"Claim x2","ads.claimNow":"Claim Now!","ads.await":"Looking for rewards...","ads.open":"Open","ads.coins":"Get Coins","ads.getNow":"Get Now","ads.freeMinutes":"Get %{0} FREE minutes","ads.interNotice.hangTight":"Short ad break, hang tight!","ads.interNotice.backInSec":"Back to the game in just a sec!","ads.interNotice.quickAd":"Quick ad, then more fun!","status.loading":"Loading","status.congrats":"Congratulations","status.allLevels":"You have passed all levels.","status.later":"Please come back later,\nwe will update soon!","status.confirm":"CONFIRMATION","status.confirmReset":"ARE YOU SURE TO START OVER?","status.resetInfo":"You will play the game again\nfrom the beginning, at level 1.","status.no":"NO","status.yes":"YES","status.first":"1st","status.second":"2nd","status.third":"3rd","status.nth":"%{0}th","status.tap":"Tap to continue","status.waitingX":"Waiting%{0}","status.lbNotAvail":"Leaderboard is empty.","status.tourNotAvail":"No tournaments available.","pages.shop":"Shop","pages.collections":"Collections","pages.home":"Home","pages.leaderboard":"Leaderboard","pages.tournament":"Tournament","guide.step1":"Tap to connect","guide.step2":"Connect similar tiles with less than 2 turns","guide.step3":"Connect similar tiles with less than 2 turns","guide.step4":"More than 2 turns are NOT allowed","guide.step5":"There's obstacle between the tiles","guide.timer":"Remove all tiles before\nthe time end","guide.combo":"Remove tiles continuously\nto increase combo!","guide.hint":"Tap to reveal a connectable pair","guide.thunder":"Tap to remove 2 pairs","guide.storm":"Tap to rearrange the tiles","guide.pliers":"Tap to remove bomb","guide.custom":"Custom mode unlocked.\n Press this button to set your own difficulty","interMsg.reviveAd":"Watch an ad to revive yourself\nKeep playing and don't give up!","interMsg.doubleAd":"Watching an ad doubles your rewards!","interMsg.ranked":"Test your skills\nin ranked tournaments","interMsg.friendChallenge":"Challenge your friend\nSee who can score higher!","interMsg.bragChallenge":"Send a challenge to your friend\nClaim bragging rights!","interMsg.clearTiles":"Clear all tiles to\nwin the level!","interMsg.beatClock":"Beat the clock before\ntime runs out!","interMsg.clearBombs":"Clear bombs before\nthey explode","interMsg.seasonPack":"A season pack unlock\nnew tile sets!","interMsg.collectStars":"The more stars you collect\nThe more coins you'll be rewarded!","interMsg.competeInLb":"Compete globally or with friends\nRise to the top in tournaments!","interMsg.competeWithFriends":"You can challenge a friend\nTest each other's reflexes!","interMsg.thunder":"The Thunder power-up\nblasts tiles away","interMsg.hint":"A Hint power-up reveals\nthe next pair","interMsg.pliers":"Pliers can remove\nany bomb instantly","interMsg.tornado":"The Tornado power-up\nshuffles the board!","interMsg.coins":"Earn coins by completing levels\nWin tournaments for even more!","interMsg.seasonTiles":"A new tile set is unlocked\nevery season packs","interMsg.dailyLogin":"Log in daily to claim\nbetter rewards!","interMsg.levelUp":"Level up and earn coins\nwith each victory!","interMsg.seasonRewards":"Each season pack offers\nnew tiles!","error.tryLater":"Sorry, please try again later","error.soon":"Coming Soon","error.noFriendsLb":"Unable to load friends leaderboard. Please try again later.","error.noWorldLb":"Unable to load world leaderboard. Please try again later.","error.createTourFail":"Unknown error. Failed to Create Tournament","error.tourExists":"You already have a tournament","error.challengeFail":"Sorry, you cannot replay\nat this time.","error.rewardFail":"Unable to validate rewards. Please try again later...","error.tourEnded":"Tournament has ended","error.tourJoinFail":"Sorry, you cannot join\nat this time.","error.noAd":"No ads to display.","error.ratingNoAuth":"You need to log in to rate the game.","error.ratingGameRated":"You have already rated the game.","error.ratingFail":"Failed to rate the game.","error.shortcutFail":"Failed to create shortcut.","error.login":"Failed to log in.","error.joinLb":"Failed to join the leaderboard.","reward.day":"Day","reward.dayX":"Day %{0}","reward.starChestTitle":"Star Chest","reward.starChestAvailable":"Congrats, you have enough stars to open the chest!","reward.starChestUnavailable":"Win more stars to open!","item.hint":"Hint","item.thunder":"Thunder","item.storm":"Storm","item.pliers":"Pliers","item.hintDesc":"Shows a pair of tiles\nthat can be connected.","item.thunderDesc":"Remove 2 pair of tiles\non the game field.","item.stormDesc":"Randomly rearranges the \ntiles on the game field.","item.pliersDesc":"Removes a random bomb\nfrom the game field.","theme.newTiles":"New tiles","theme.summer":"Summer Levels","theme.autumn":"Autumn Levels","theme.winter":"Winter Levels","theme.springFestival":"Spring Festival Levels","theme.treePlantingFestival":"Tree Planting Festival Levels","theme.blueSeaFestival":"Blue Sea Festival Levels","theme.musicFestival":"Music Festival Levels","theme.harvestFestival":"Harvest Festival Levels","theme.foodFestival":"Food Festival Levels","theme.snowFestival":"Snow Festival Levels","theme.lightFestival":"Light Festival Levels","theme.peaceFestival":"Peace Festival Levels","theme.flowerFestival":"Flower Festival Levels","theme.streetFestival":"Street Festival Levels","theme.colorGarden":"Color Garden Levels","theme.colorFestival":"Color Festival Levels","theme.natureSummer":"Nature Summer Levels","theme.snowMountain":"Snow Mountain Levels","theme.iceFestival":"Ice Festival Levels","theme.greenGrassFestival":"Green Grass Festival Levels","theme.communityFestival":"Community Festival Levels","theme.waterFestival":"Water Festival Levels","theme.animalFestival":"Animal Festival Levels","theme.lostFestival":"Lost Festival Levels","theme.halloweenFestival":"Halloween Festival Levels","theme.snowMusicFestival":"Snow Music Festival Levels","theme.christmas":"Christmas Levels","theme.springFlowerFestival":"Spring Flower Festival Levels","theme.tetHoliday":"Tet Holiday Levels","theme.seaFestival":"Sea Festival Levels","theme.fireworkFestival":"Firework Festival Levels","theme.halloweenHorror":"Halloween Horror Levels","theme.midAutumn":"Mid Autumn Levels","theme.christmasSweet":"Christmas Sweet Levels","theme.newYearCountdown":"New Year Countdown Levels","theme.happyNewYear":"Happy New Year Levels","share.canYouDoBetter":"Can you do better?","dashboard.unlockLevel":"Unlock lv.%{0}"},texture:{draw:"locales/en/scenes/result-scene/resources/text_draw",lose:"locales/en/scenes/result-scene/resources/text_lose",victory:"locales/en/scenes/result-scene/resources/text_victory",waiting:"locales/en/scenes/result-scene/resources/text_waiting",excellent:"locales/en/scenes/game-scene/resources/effects/text-effect/excellent",good:"locales/en/scenes/game-scene/resources/effects/text-effect/good",great:"locales/en/scenes/game-scene/resources/effects/text-effect/great",wellDone:"locales/en/screens/level-complete-screen/resources/well_done",freeRewards:"locales/en/screens/get-rewards-screen/resources/free_rewards"}};M._RF.push({},"0b4bc6YT6ZGg4lnXfh/zL6J","AdsManager",void 0);var ve=Ludex,$e=ve.Events,Se=ve.Configs.Ads,ye=Se.Enabled,we=Se.PreloadAds,Ee=Se.ShowAdOnLoad,be=ve.Utils,xe=be.Time,Ae=be.Decorator,Ce=codex.event,De=(he=Ae.tryCatch(),me=e((fe=function(){function e(){var t=this;i(this,e),this.listenEvents$=function(){Ce.on($e.AD_CLOSED,t.requestResizeGame$),Ce.catchUp($e.GAME_READY,t.processPreloadAds$),Ce.catchUp($e.GAME_SDK_READY,t.processShowFirstInterstitialAd),Ce.catchUp($e.CONTEXT_DATA_PROCESSED,t.processShowBannerAds$),Ce.catchUp($e.CONTEXT_DATA_PROCESSED,function(){P.on(s.LAYOUT_CHANGED,t.handleLayoutChanged$)})},this.requestResizeGame$=function(){Ce.emit($e.REQUEST_RESIZE_GAME)},this.processShowBannerAds$=n(a().mark(function e(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(ye){e.next=2;break}return e.abrupt("return");case 2:if(!GameSDK.isGameSDK("FacebookInstant")){e.next=5;break}return e.next=5,xe.sleepAsync(5e3);case 5:r.updateBannerAdsByLayout(o.getCurrentLayout()),r.refreshBannerAdVisibility();case 7:case"end":return e.stop()}},e)})),this.processPreloadAds$=n(a().mark(function e(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(we){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,xe.sleepAsync(3e3);case 4:r.preloadAds();case 5:case"end":return e.stop()}},e)})),c(this,"processShowFirstInterstitialAd",me,this),this.handleLayoutChanged$=function(){r.updateBannerAdsByLayout(o.getCurrentLayout()),r.refreshBannerAdVisibility()}}return t(e,[{key:"init",value:function value(){this.listenEvents$(),console.debug("Ads Manager: Initialized",{Enabled:ye,PreloadAds:we,ShowAdOnLoad:Ee})}}]),e}()).prototype,"processShowFirstInterstitialAd",[he],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return n(a().mark(function e(){var t,n,i;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(ye){e.next=2;break}return e.abrupt("return");case 2:if(t=Ee.Enabled,n=Ee.DelaySeconds,t){e.next=5;break}return e.abrupt("return");case 5:if(!(n>0)){e.next=8;break}return e.next=8,xe.sleepAsync(1e3*n);case 8:return(i=GameSDK.isGameSDK("Yandex"))&&P.pause(),e.next=12,r.showInterstitialAdAsync({forceLoad:!0,contextType:"preroll"});case 12:i&&P.resume();case 13:case"end":return e.stop()}},e)}))}}),fe);M._RF.pop(),M._RF.push({},"b4ad5mMokdAa6EVNGzNedpF","EngineManager",void 0);var Re,ke,Le,Te=Ludex,Fe=Te.Events,_e=Te.Configs.GameEngine,Ie=_e.DynamicAtlas,Me=_e.PreferredFPS,Pe=Te.Utils,Ne=Pe.Valid,Oe=Pe.Device,Ue=codex.event,Ge=function(){function e(){var t=this;i(this,e),this.overrideSettings$=function(){N.overrideSettings(O.Category.ENGINE,"debug",Ne.isDebugger()),U.instance.resizeWithBrowserSize(!1),Oe.isDesktop()?P.frameRate=Me.Desktop:P.frameRate=Me.Mobile},this.setupAutoAtlas$=function(){G.instance.cacheAsset=!0},this.setupAssetDownloader$=n(a().mark(function e(){var n,r,i;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=G.instance.downloader,t.setupAllowImageBitmap$(),n.maxConcurrency=24,n.maxRequestsPerFrame=24,e.next=6,t.checkWebpSupport$();case 6:r=e.sent,B.hasFeature(B.Feature.WEBP)&&(i=B.hasFeature,B.hasFeature=function(e){return e===B.Feature.WEBP?r:i(e)});case 8:case"end":return e.stop()}},e)})),this.setupAllowImageBitmap$=function(){G.instance.allowImageBitmap=!0;var _$e=!0;GameSDK.isGameSDK("YoutubePlayables")&&(_$e=!1),G.instance.allowImageBitmap=_$e},this.checkWebpSupport$=function(){return new Promise(function(e){var t=new Image;t.onload=function(){return e(!0)},t.onerror=function(){return e(!1)},t.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="})},this.setupOptimalPipelines$=n(a().mark(function e(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:G.instance.transformPipeline.remove(1);case 2:case"end":return e.stop()}},e)})),this.setupEngineRunningState$=function(){z.on(H.EventType.TOUCH_START,t.handleResumeEngine$),Ue.catchUp(Fe.GAME_READY,function(){Ue.on(Fe.VISIBILITY_HIDDEN,t.handlePauseEngine$),Ue.on(Fe.VISIBILITY_VISIBLE,t.handleResumeEngine$)})},this.handlePauseEngine$=n(a().mark(function e(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(console.debug("Engine: Paused",P.isPaused()),!P.isPaused()){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,u.turnOffMusic();case 5:P.pause();case 6:case"end":return e.stop()}},e)})),this.handleResumeEngine$=n(a().mark(function e(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(console.debug("Engine: Resumed",P.isPaused()),P.isPaused()){e.next=3;break}return e.abrupt("return");case 3:return P.resume(),e.next=6,u.turnUpMusic();case 6:case"end":return e.stop()}},e)})),this.setupDynamicAtlas$=function(){B.isBrowser?t.setupDynamicAtlasForBrowser$():B.isNative?t.setupDynamicAtlasForNative$():t.disableDynamicAtlas$()},this.setupDynamicAtlasForBrowser$=function(){switch(B.os){case B.OS.IOS:t.setupDynamicAtlasForIOS$();break;case B.OS.ANDROID:t.setupDynamicAtlasForAndroid$();break;case B.OS.OSX:case B.OS.LINUX:case B.OS.WINDOWS:t.setupDynamicAtlasForDesktop$();break;default:t.setupDynamicAtlasDefault$()}},this.setupDynamicAtlasForNative$=function(){switch(B.platform){case B.Platform.ANDROID:t.setupDynamicAtlasForAndroid$();break;case B.Platform.IOS:t.setupDynamicAtlasForIOS$();break;default:t.setupDynamicAtlasDefault$()}},this.setDynamicAtlas$=function(e){var n=e.Enabled,a=e.MaxAtlasCount,r=e.MaxAtlasSize,i=e.MaxFrameSize,s=V.instance;Y.CLEANUP_IMAGE_CACHE=!n,s.enabled=n,s.textureSize=r,s.maxFrameSize=i,s.maxAtlasCount=a,s.textureBleeding=Ie.OptimizeAtlas.TextureBleeding;var o=t.getMaxTextureSize$()||r,c=Math.min(r,o);s.textureSize=c,i>c&&(s.maxFrameSize=c)},this.getMaxTextureSize$=function(){if(!q.root)return -1;var _$e=q.root.device.capabilities.maxTextureSize,t=Math.min(Oe.maxTextureSize(),_$e);if(t>8192)return 7168;var n=V.instance.maxFrameSize,a=t-1024;return a<=(void 0===n?0:n)||a<=0?-1:a},this.setupDynamicAtlasForIOS$=function(){var _$e=Ie.IOS;t.setDynamicAtlas$(_$e)},this.setupDynamicAtlasForAndroid$=function(){var _$e=Ie.Android;t.setDynamicAtlas$(_$e)},this.setupDynamicAtlasForDesktop$=function(){var _$e=Ie.Desktop;t.setDynamicAtlas$(_$e)},this.setupDynamicAtlasDefault$=function(){t.setDynamicAtlas$({Enabled:!0,MaxAtlasCount:1,MaxAtlasSize:4096,MaxFrameSize:1024})},this.disableDynamicAtlas$=function(){Y.CLEANUP_IMAGE_CACHE=!0,V.instance.enabled=!1},this.setupBatcherLimit$=function(){Y.BATCHER2D_MEM_INCREMENT=512,Y.MAX_LABEL_CANVAS_POOL_SIZE=125}}return t(e,[{key:"init",value:function value(){this.overrideSettings$(),this.setupAutoAtlas$(),this.setupBatcherLimit$(),this.setupDynamicAtlas$(),this.setupAssetDownloader$(),this.setupOptimalPipelines$(),this.setupEngineRunningState$(),console.debug("Engine Manager: Initialized",{PreferredFPS:Me})}}]),e}();M._RF.pop(),M._RF.push({},"9f0a0l1uXlNwqKEKardFRyv","LayoutManager",void 0);var Be=d.Layout,ze=d.DesignSize,He=ze.Portrait,Ve=ze.Landscape,Ye=d.AcceptPortraitRatio,qe=Ludex,Qe=qe.Utils.Decorator,We=qe.Configs.GameEngine.AutoResizeCanvas,Ke=qe.Events,je=codex,Xe=je.ads,Ze=je.event,Je=(Re=Qe.debounce(100),Le=e((ke=function(){function e(){var t=this;i(this,e),this.listenResizeEvent$=function(){if(We&&ResizeObserver){var _$e,n=null!=(_$e=window.__listeners.resize)?_$e:[];if(n.length>0){var a,r=p(n);try{for(r.s();!(a=r.n()).done;){var i=a.value;window.removeEventListener("resize",i)}}catch(e){r.e(e)}finally{r.f()}}new ResizeObserver(t.handleBodyResize).observe(window.document.body)}Ze.on(Ke.REQUEST_RESIZE_GAME,t.handleViewResizeBySystem$)},this.setupResolutionPolicy$=function(){Q.setOrientation(Y.ORIENTATION_AUTO),t.resolutionPolicy$=Q.getResolutionPolicy(),t.resolutionPolicy$.setContentStrategy(W.ContentStrategy.EXACT_FIT),t.resolutionPolicy$.setContainerStrategy(W.ContainerStrategy.PROPORTION_TO_FRAME)},this.isAdShowing$=function(){return!(null==Xe||!Xe.isAdFullSizeShowing())&&(console.error("⚠️ LayoutManager:handleViewResize skipped because ad is showing"),!0)},this.handleViewResizeBySystem$=function(e){if(!t.isAdShowing$()){var n=l.getMaxPixelRatio(),a=(null!=e?e:{}).forcePixelRatio,r=void 0===a?n:a;console.debug("\uD83D\uDCF1 View resize by system",{forcePixelRatio:r,maxDpr:n}),window.devicePixelRatio=null!=r?r:n,t.setupOrientationByCanvasSize$()}},c(this,"handleBodyResize",Le,this),this.setupOrientationByCanvasSize$=function(){var _$e=t.getScreenRatio$();switch(d.PRIMARY_LAYOUT){case"portrait":t.setPortraitView$();break;case"landscape":t.setLandscapeView$();break;case"auto":_$e<=Ye?t.setPortraitView$():t.setLandscapeView$()}},this.setPortraitView$=function(){var _$e=He.WIDTH,n=He.HEIGHT,a=d.PRIMARY_LAYOUT===Be.Portrait;(t.currentLayout$!==Be.Portrait||a)&&(t.currentLayout$=Be.Portrait,t.setupLayoutStrategy$(_$e,n)),t.resizeGameView$(_$e,n)},this.setLandscapeView$=function(){var _$e=Ve.WIDTH,n=Ve.HEIGHT,a=d.PRIMARY_LAYOUT===Be.Landscape;(t.currentLayout$!==Be.Landscape||a)&&(t.currentLayout$=Be.Landscape,t.setupLayoutStrategy$(_$e,n)),t.resizeGameView$(_$e,n)},this.setupLayoutStrategy$=function(e,n){var a=Q.getDesignResolutionSize(),r=a.width,i=a.height,o=t.resolutionPolicy$.getContentStrategy(),c=t.getScreenRatio$(),u=d.AcceptPortraitRatio,l=t.resolutionPolicy$._containerStrategy.name,p=t.currentLayout$===Be.Portrait,h=t.currentLayout$===Be.Landscape;p&&t.resolutionPolicy$.setContentStrategy(W.ContentStrategy.FIXED_WIDTH),h&&t.resolutionPolicy$.setContentStrategy(W.ContentStrategy.FIXED_HEIGHT),p&&t.resolutionPolicy$.setContainerStrategy(W.ContainerStrategy.EQUAL_TO_FRAME),h&&t.resolutionPolicy$.setContainerStrategy(W.ContainerStrategy.EQUAL_TO_FRAME),c>u&&p&&(t.resolutionPolicy$.setContentStrategy(W.ContentStrategy.SHOW_ALL),t.resolutionPolicy$.setContainerStrategy(W.ContainerStrategy.PROPORTION_TO_FRAME)),r===e&&i===n&&o===t.resolutionPolicy$.getContentStrategy()&&l===t.resolutionPolicy$._containerStrategy.name||Q.setDesignResolutionSize(e,n,t.resolutionPolicy$),console.debug("\uD83D\uDD25 Change layout to",t.currentLayout$,t.resolutionPolicy$),P.emit(s.LAYOUT_CHANGED,t.currentLayout$)},this.resizeGameView$=function(e,n){var a=d.DesignSize.Resolution,r=new K(e/a,n/a),i=l.getScreenWidthCss(),o=l.getScreenHeightCss(),c=i/r.width,u=o/r.height,p=new K(r.width,r.height),h=t.currentLayout$===Be.Portrait,f=t.currentLayout$===Be.Landscape;if(h||f)p.width*=c,p.height*=u;else{var m=Math.min(c,u);p.width*=m,p.height*=m}var g=l.worldSizeToCssSize(p.width),v=l.worldSizeToCssSize(p.height),$=new K(g,v);j.windowSize=$,P.emit(s.VIEW_RESIZED,$),console.info("\uD83D\uDCD0 View Resized",$)},this.getScreenRatio$=function(){return l.getScreenWidthCss()/l.getScreenHeightCss()}}return t(e,[{key:"init",value:function value(){this.listenResizeEvent$(),this.setupResolutionPolicy$(),console.debug("Layout Manager: Initialized",{AcceptPortraitRatio:Ye,AutoResizeCanvas:We})}}]),e}()).prototype,"handleBodyResize",[Re],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){var e=this;return function(){if(!e.isAdShowing$()){var t=l.getMaxPixelRatio();console.debug("\uD83D\uDCF1 View resize by body",{maxDpr:t}),window.devicePixelRatio=t,e.setupOrientationByCanvasSize$()}}}}),ke);M._RF.pop(),M._RF.push({},"535cbXcmXdEzLn3H3LOIS27","MatchManager",void 0);var et=Ludex,tt=et.Utils.Valid,nt=et.Dtos.Match,at=(void 0===nt?{}:nt).CustomData,rt=function(){function e(){i(this,e),this.setupMatchCustomData$=function(){at&&(at.addDefaults(h),at.addValidator("score",function(e){if(!tt.isNumber(e)||e<0)throw Error("score ".concat(e," is invalid"))}))}}return t(e,[{key:"init",value:function value(){console.debug("Match Manager: Initialized")}},{key:"setupDefaultMatchData",value:function value(){this.setupMatchCustomData$()}}]),e}();M._RF.pop(),M._RF.push({},"d675ctpYslBHp4qqiYEki+q","PlayerManager",void 0);var it=Ludex,st=it.Utils,ot=st.Valid,ct=(st.Array,st.Object,st.Browser,it.Dtos.Player),ut=codex.player,lt=(window.GameName.replace(/ /g,"-"),function(){function e(){i(this,e)}return t(e,[{key:"init",value:function value(){console.debug("Player Manager: Initialized")}},{key:"setupDefaultGameData",value:function value(){ct.Data.makeLoose(),ct.GameData.makeLoose(),ct.Data.addDefaults(f),ct.GameData.addDefaults(m),ct.GameData.addValidator("bestEndlessScore",function(e){if(!ot.isNumber(e)||e<0)throw Error("bestEndlessScore ".concat(e," is invalid"))}),ct.GameData.addValidator("firstLoginTime",function(e){if(!ot.isNumber(e)||e<0)throw Error("firstLoginTime ".concat(e," is invalid"))})}},{key:"syncPlatformPlayerData",value:function value(){}},{key:"requestConnectedPlayers",value:function value(){ut.requestConnectedPlayers().catch(function(e){console.warn("player.requestConnectedPlayers",e)})}}]),e}());M._RF.pop(),M._RF.push({},"51079bCfn9MZK6cuxbahS7M","AdaptivePerformance",void 0);var dt=Ludex.Utils.Valid,pt=codex.adaptivePerformance,ht=function(){function e(){var t=this;i(this,e),this.listenEvents$=function(){q.once(X.EVENT_BEGIN_FRAME,t.handleBeginFrame$),q.on(X.EVENT_AFTER_SCENE_LAUNCH,t.handleAfterSceneLaunch$)},this.handleBeginFrame$=function(){q.on(X.EVENT_AFTER_UPDATE,t.lateUpdate$),q.on(X.EVENT_BEFORE_UPDATE,t.updateActualFPS$)},this.handleAfterSceneLaunch$=function(e){pt&&pt.trackingScene(e.name)},this.lateUpdate$=function(){var _$e=1e3*P.deltaTime;null==pt||pt.updatePostStepDeltaTime(_$e)},this.updateActualFPS$=function(){var _$e,t=null==(_$e=q.root)?void 0:_$e.fps;dt.isNumber(t)&&(null==pt||pt.updateActualFPS(t))}}return t(e,[{key:"init",value:function value(){pt&&this.listenEvents$()}}]),e}();M._RF.pop(),M._RF.push({},"0bbd4wf2fRDcKljBcls6K8a","CanvasRecorder",void 0);var ft=codex.canvasRecorder,mt=function(){function e(){i(this,e)}return t(e,[{key:"init",value:function value(){if(P.canvas&&ft){ft.setCanvas(P.canvas);var _$e=ft.getOptions(),t=function t(){P.pause(),P.step()},n=ft.waitNextFrame;ft.waitNextFrame=function(){var a=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return new Promise(function(r,i){a||ft.isCapturing()?_$e.syncFps?(q.once(X.EVENT_AFTER_RENDER,r),t()):n(a).then(r).catch(i):P.resume()})}}}}]),e}();M._RF.pop(),M._RF.push({},"e8b3dVomjtKZ68ykoRs82vP","DailyRewards",void 0);var gt,vt,$t,St=codex.storage,yt=function(){function e(){i(this,e),this.initStorage$=function(){St.addStorage("dashboardDailyRewards",{hasShownPopup:!1})}}return t(e,[{key:"init",value:function value(){this.initStorage$()}}]),e}();M._RF.pop(),M._RF.push({},"49a72YoKFFCKbOm5Xgp9R+k","DynamicAssets",void 0);var wt=Ludex,Et=wt.Configs.GameEngine.DynamicAssets,bt=Et.Resolution,xt=Et.IgnoreFiles,At=Et.Compression,Ct=wt.Events,Dt=wt.Utils,Rt=Dt.Array,kt=Dt.Function,Lt=Dt.Device,Tt=Dt.Decorator,Ft=codex,_t=Ft.event,It=Ft.storage,Mt=Ft.getBuildVersion,Pt=[".png",".jpg",".jpeg",".webp"],Gt=(gt=Tt.debounce(1e3),$t=e((vt=function(){var r;function e(){var _$e,t=this;i(this,e),this.isProcessing$=!1,this.yield10msIfNeeded$=kt.timeSlice(10),this.targetScale$=1,this.sessionQuality$=3,this.failedAssets$=new Set,this.isAssetUpgraded$=new Set,this.upgradableAssets$=new Map,this.initStorage$=n(a().mark(function e(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,It.addStorage("DynamicAssets",{currentQuality:0,buildVersion:"0"},!0);case 2:case"end":return e.stop()}},e)})),this.getOptimalScale$=function(){var _$e,t=Math.round(Lt.pixelRatio()),n=bt.Available,a=bt.Source,r=g(n).sort(function(e,t){return e-t}),i=p(r);try{for(i.s();!(_$e=i.n()).done;){var s=_$e.value;if(s>=t)return Math.min(s,a)}}catch(e){i.e(e)}finally{i.f()}return a},this.getCurrentQuality$=function(){return t.targetScale$!==bt.Source||At.Enabled?At.Enabled?1:2:3},this.checkCacheVersion$=function(){var _$e=Mt().toString(),n=It.getStorage("DynamicAssets"),a=null!=n?n:{},r=a.currentQuality,i=void 0===r?0:r,s=a.buildVersion;t.sessionQuality$<i&&_$e===s&&(t.sessionQuality$=i),It.setStorageData("DynamicAssets","buildVersion",_$e),It.updateToWebStorage("DynamicAssets")},this.listenEvents$=function(){At.Enabled&&3!==t.sessionQuality$&&(_t.catchUp(Ct.GAME_READY,function(){P.emit(s.REQUEST_UPGRADE_ASSET)}),P.on(s.REQUEST_UPGRADE_ASSET,t.handleChangeQuality))},this.injectSpriteUpdate$=function(e){Object.defineProperty(Z.prototype,"spriteFrame",{get:function get(){return this._spriteFrame},set:function set(t){if(t&&(t.refreshed||this._spriteFrame!==t)){var n=this._spriteFrame;if(this._spriteFrame=t,this.markForUpdateRenderData(!0),this._applySpriteFrame(n),this.sizeMode!==Z.SizeMode.CUSTOM){var a=this.node.getComponent(J);if(a){var r=t.originalSize,i=r.width,s=r.height,o=new K(i/e,s/e);a.setContentSize(o)}}}}})},this.injectSpriteFrameCheckRect$=function(e){var t=ee.prototype.checkRect;ee.prototype.checkRect=function(){if(this.refreshed)return!0;for(var _$e=arguments.length,n=Array(_$e),a=0;a<_$e;a++)n[a]=arguments[a];return t.apply(this,n)}},this.injectSpriteFrameSlicedUV$=function(e){var t=ee.prototype._calculateSlicedUV;ee.prototype._calculateSlicedUV=function(){var n,a=null!=(n=this._capInsets)?n:[0,0,0,0],r=a.map(function(t){return(t+1)*e});this._capInsets=r,t.apply(this),this._capInsets=a}},this.injectSpriteFrameResolution$=function(e){var t=ee.prototype._refreshTexture;ee.prototype._refreshTexture=function(){for(var n=arguments.length,a=Array(n),r=0;r<n;r++)a[r]=arguments[r];if(this.name&&!this.refreshed){var i=this.rect,s=i.x,o=i.y,c=i.width,u=i.height,l=Number((s*e).toFixed(2)),d=Number((o*e).toFixed(2)),f=new te(l,d,Math.round(c*e),Math.round(u*e)),m=new K(f.width,f.height);return this.refreshed=!0,this.reset({rect:f,originalSize:m}),t.apply(this,a)}t.apply(this,a)}},c(this,"handleChangeQuality",$t,this),this.getAssetQuality$=function(e){var n="/native@".concat(t.targetScale$,"x/");switch(t.sessionQuality$){case 2:return"".concat(n,"quality/");case 1:return Rt.has(xt,e)?"".concat(n,"quality/"):"".concat(n,"medium/");default:return"/native/"}},this.replaceAssetUrl$=function(e,n){return 3!==t.sessionQuality$&&n.includes("/native/")?n.replace("/native/",t.getAssetQuality$(e)):n},this.saveStateToStorage$=function(){It.setStorageData("DynamicAssets","currentQuality",t.sessionQuality$),It.updateToWebStorage("DynamicAssets",!0)},this.updateSpriteFrames$=n(a().mark(function e(){var n,r,i,s,c,u,l,d;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=q.getScene()){e.next=3;break}return e.abrupt("return");case 3:r=n.getComponentsInChildren("cc.Sprite"),i=p(r),e.prev=5,i.s();case 7:if((s=i.n()).done){e.next=22;break}if(c=s.value.spriteFrame){e.next=12;break}return e.abrupt("continue",20);case 12:if(u=c.texture,l=c.original,d=u.uuid,l&&(d=l._texture.uuid),t.isAssetUpgraded$.has(d)){e.next=17;break}return e.abrupt("continue",20);case 17:return u.updateImage(),e.next=20,t.yield10msIfNeeded$();case 20:e.next=7;break;case 22:e.next=27;break;case 24:e.prev=24,e.t0=e.catch(5),i.e(e.t0);case 27:return e.prev=27,i.f(),e.finish(27);case 30:case"end":return e.stop()}},e,null,[[5,24,27,30]])})),this.requestUpdateDynamicAssets$=function(){P.emit(s.REQUEST_DYNAMIC_ATLAS,{force:!0})},this.collectUpgradableAssets$=function(e){var n,a=e.output=e.input,r=!1,i=p(a);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(Rt.has(Pt,o.ext)&&!Rt.has(xt,o.uuid)){var c=o.url,u=t.replaceAssetUrl$(o.uuid,c);if(u!==c&&(o.url=u,!t.upgradableAssets$.has(o.uuid))){var l={ext:o.ext,url:o.url,uuid:o.uuid,options:o.options,resolution:t.targetScale$};t.upgradableAssets$.set(o.uuid,l),r=!0}}}}catch(e){i.e(e)}finally{i.f()}r&&P.emit(s.REQUEST_UPGRADE_ASSET)},this.processUpgradeQualityAsync$=(_$e=n(a().mark(function e(n){var r,i,o,c,u,l,d,p,h,f,m;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.uuid,i=n.url,o=n.ext,c=n.options,u=n.resolution,r&&i&&o&&c&&u){e.next=3;break}return e.abrupt("return",!1);case 3:if(!t.isAssetUpgraded$.has(r)){e.next=5;break}return e.abrupt("return",!0);case 5:if(!t.failedAssets$.has(r)){e.next=7;break}return e.abrupt("return",!1);case 7:if(!Rt.has(xt,r)){e.next=10;break}return t.isAssetUpgraded$.add(r),e.abrupt("return",!0);case 10:if(_instanceof(l=ne.assets.get(r),ae)){e.next=14;break}return console.warn("DynamicAssets: Asset not found for upgrade",r),e.abrupt("return",!1);case 14:if(d="/native@".concat(u,"x/"),p="".concat(d,"medium/"),h="".concat(d,"quality/"),(f=i.replace(p,h))!==i){e.next=21;break}return t.isAssetUpgraded$.add(r),e.abrupt("return",!0);case 21:return m={uuid:r,url:f,options:c,resolution:u,ext:o},e.abrupt("return",new Promise(function(e){ne.loadAny(m,c,function(n,a){n?(console.warn("[DynamicAssets] processUpgrade: Upgrade error for ".concat(r.slice(0,5)),n),t.failedAssets$.add(r),e(!1)):(l.reset(a),l._nativeUrl=f,t.isAssetUpgraded$.add(r),P.emit(s.ASSET_QUALITY_CHANGE,{asset:l,item:m}),e(!0))})}));case 23:case"end":return e.stop()}},e)})),function(t){return _$e.apply(this,arguments)})}return t(e,[{key:"init",value:(r=n(a().mark(function e(){var t;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;break;case 2:return this.targetScale$=this.getOptimalScale$(),this.sessionQuality$=this.getCurrentQuality$(),e.next=6,this.initStorage$();case 6:this.checkCacheVersion$(),ne.transformPipeline.insert(this.collectUpgradableAssets$,2),this.sessionQuality$<3&&(t=this.targetScale$/bt.Source,this.injectSpriteUpdate$(t),this.injectSpriteFrameSlicedUV$(t),this.injectSpriteFrameCheckRect$(t),this.injectSpriteFrameResolution$(t)),this.listenEvents$();case 11:case"end":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)})}]),e}()).prototype,"handleChangeQuality",[gt],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){var e=this;return n(a().mark(function t(){var n,r,i,s,o,c;return a().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.isProcessing$||!At.Enabled||e.sessionQuality$>=2)){t.next=2;break}return t.abrupt("return");case 2:t.prev=2,e.isProcessing$=!0,n=[],r=e.isAssetUpgraded$.size,i=p(e.upgradableAssets$.values());try{for(i.s();!(s=i.n()).done;)o=s.value,c=e.processUpgradeQualityAsync$(o),n.push(c)}catch(e){i.e(e)}finally{i.f()}if(!(n.length<1)){t.next=10;break}return t.abrupt("return");case 10:return t.next=12,kt.allSettled(n);case 12:return e.isAssetUpgraded$.size>r&&(e.sessionQuality$++,e.saveStateToStorage$()),t.next=15,e.updateSpriteFrames$();case 15:e.requestUpdateDynamicAssets$(),t.next=21;break;case 18:t.prev=18,t.t0=t.catch(2),console.warn("DynamicAssets: Handle change quality error",t.t0);case 21:return t.prev=21,e.isProcessing$=!1,t.finish(21);case 24:case"end":return t.stop()}},t,null,[[2,18,21,24]])}))}}),vt);M._RF.pop(),M._RF.push({},"15ecbqnx5lFtYRSJp2lOLCm","DynamicAtlas",void 0);var Bt=Ludex,zt=Bt.Events,Ht=Bt.Configs.GameEngine.DynamicAtlas.OptimizeAtlas,Vt=Ht.AtlasDebug,Yt=Ht.AutoAtlasSize,qt=Ht.UsePowerOfTwo,Qt=Ht.AllowNonePackable,Wt=Ht.OnlyOptimizeWhenRenderTooLong,Kt=Bt.Utils,jt=Kt.Json,Xt=Kt.Image,Zt=Kt.Function,Jt=Kt.Object,en=Kt.Mark,tn=codex.event,sn=function(){function e(){var t=this;i(this,e),this.isEffective$=!0,this.forceUpdateDynamicAtlas$=!1,this.mutex$=Zt.mutex(),this.renderTimes$=[],this.lastRenderTime$=0,this.renderTimeInterval$=5e3,this.atlasInfo$=null,this.lastAtlasInfo$=null,this.atlasIds$={},this.collectInfo$=new Map,this.packedFrames$=new Set,this.debugCanvases$={},this.listenEvents$=function(){P.on(s.REQUEST_DYNAMIC_ATLAS,t.requestUpdateDynamicAtlas$),tn.on(zt.SCENE_LAUNCHED,t.onSceneLaunched$),tn.catchUp(zt.GAME_READY,t.setupRenderListeners$)},this.onSceneLaunched$=function(){t.resetPendingInfo$(),t.resetAllAtlases$()},this.resetAllAtlases$=function(){for(var _$e in t.packedFrames$.forEach(function(e){e.isValid&&e._resetDynamicAtlasFrame()}),t.packedFrames$.clear(),V.instance.reset(),t.atlasInfo$=null,t.lastAtlasInfo$=null,t.debugCanvases$)delete t.debugCanvases$[_$e]},this.overrideDynamicAtlasManager$=function(){var _$e=V.instance;_$e.packToDynamicAtlas=t.collectSpriteFrame$,_$e.deleteAtlasSpriteFrame=t.deleteSpriteFrame$},this.createPendingDebugCanvas$=function(){var _$e=t.createDebugCanvas$(),n=V.instance.maxAtlasCount+1;t.debugCanvases$[n]=_$e},this.checkRenderTimeThreshold$=function(){t.calculateMeanRenderTimeAndReset$()>8&&t.handleLaggyFrame$(),q.once(X.EVENT_AFTER_RENDER,function(){setTimeout(function(){t.checkRenderTimeThreshold$()},t.renderTimeInterval$)})},this.handleLaggyFrame$=function(){t.isEffective$||(t.renderTimeInterval$=Math.min(t.renderTimeInterval$+1e3,1e4)),t.requestUpdateDynamicAtlas$({force:!0})},this.resetPendingInfo$=function(){t.atlasIds$={},t.collectInfo$.clear()},this.setupRenderListeners$=function(){q.on(X.EVENT_BEFORE_RENDER,t.updateBeforeRenderTime$),q.on(X.EVENT_AFTER_RENDER,t.updateAfterRenderTime$),Wt&&tn.catchUp(zt.SCENE_LAUNCHED,function(){q.once(X.EVENT_AFTER_RENDER,t.checkRenderTimeThreshold$)})},this.updateBeforeRenderTime$=function(){t.lastRenderTime$=performance.now()},this.updateAfterRenderTime$=function(){t.renderTimes$.length>=100&&t.renderTimes$.shift();var _$e=performance.now()-t.lastRenderTime$;t.renderTimes$.push(_$e)},this.calculateMeanRenderTimeAndReset$=function(){if(0===t.renderTimes$.length)return 0;var _$e=t.renderTimes$.reduce(function(e,t){return e+t},0)/t.renderTimes$.length;return t.renderTimes$.length=0,_$e},this.collectSpriteFrame$=function(e){if(Jt.hasOwn(e,"spriteFrame")){var n=e.spriteFrame;if(t.isSpriteFrameValidForAtlas$(e,n)){var a=t.getTexture$(n),r=null==a?void 0:a.getId();if(r){var i=t.getTextureSizeFromTexture$(a);t.addTextureToCollectInfo$(r,i,e),Wt||t.requestUpdateDynamicAtlas$()}}}},this.deleteSpriteFrame$=function(e){var n=t.getTexture$(e);if(n){var a=t.getAtlas$();null==a||a.deleteInnerTexture(n),t.packedFrames$.delete(e),e._resetDynamicAtlasFrame()}},this.isSpriteFrameValidForAtlas$=function(e,n){var a=e.enabled,r=e.node;if(!a||!n||!r.active||!r.activeInHierarchy||!n.packable&&!Qt)return!1;if(n.original){var i=n.texture,s=n.original._texture,o=i===s,c=(null==i?void 0:i.getId())===(null==s?void 0:s.getId());if(o||c)return!1}if(e.color.a<1)return!1;for(var u=r;u;){var l=u.getComponent(re);if(l&&l.opacity<1)return!1;u=u.parent}var d=t.getTextureSize$(n);return!t.isTextureTooLarge$(d)},this.addTextureToCollectInfo$=function(e,n,a){var r=t.collectInfo$.get(e),s=n.w+2,o=n.h+2;s<=2||o<=2||(r?(r.w=s,r.h=o):(r={id:e,w:s,h:o,x:-1,y:-1,components:new Set},t.collectInfo$.set(e,r)),r.components.has(a)||r.components.add(a))},this.getTexture$=function(e){var t,n;return null!=(t=null==(n=e.original)?void 0:n._texture)?t:e.texture},this.getTextureSize$=function(e){var n=t.getTexture$(e);return t.getTextureSizeFromTexture$(n)},this.getTextureSizeFromTexture$=function(e){var t,n;return null!=e&&e.image?{w:e.image.width,h:e.image.height}:{w:null!=(t=null==e?void 0:e.width)?t:0,h:null!=(n=null==e?void 0:e.height)?n:0}},this.isTextureTooLarge$=function(e){var t=V.instance.maxFrameSize;return e.w>=t||e.h>=t},this.rebuildAtlasIfNecessary$=function(){if(!t.atlasInfo$)return!1;if(t.lastAtlasInfo$&&!t.forceUpdateDynamicAtlas$){var n=t.isSameAtlas$(t.lastAtlasInfo$,t.atlasInfo$);if(t.isEffective$=!n,n)return!1}var a=t.getAtlas$();if(null==(_$e=a)||!_$e._texture)return!1;var r=t.atlasInfo$.packedInfo,i=a._texture,s=i.width,o=i.height,c=r.width+5,u=r.height+5;if(5>=Math.max(c,u))return!1;var l=Math.max(c,u),d=qt?l:c,p=qt?l:u;if(!(a=t.resetAtlas$(a)))return!1;if(Yt||d>s||p>o){a._texture.initWithSize(d,p);var h=t.debugCanvases$[t.getAtlasIndex$()];h&&(h.width=d,h.height=p)}else{var _$e,f,m=t.debugCanvases$[t.getAtlasIndex$()];m&&(null==(f=m.getContext("2d"))||f.clearRect(0,0,m.width,m.height))}return t.lastAtlasInfo$=jt.clone(t.atlasInfo$),!0},this.createAtlas$=function(){var _$e=V.instance.newAtlas();if(_$e&&Vt){var n=t.createDebugCanvas$(),a=t.getAtlasIndex$();t.debugCanvases$[a]=n}return _$e},this.createDebugCanvas$=function(){var _$e=V.instance.textureSize,t=document.createElement("canvas");return t.width=_$e,t.height=_$e,t},this.resetAtlas$=function(e){var n=V.instance,a=n._atlases.indexOf(e);return t.packedFrames$.forEach(function(e){e.isValid&&e._resetDynamicAtlasFrame()}),t.packedFrames$.clear(),e.destroy(),a>-1&&(n._atlases.splice(a,1),n._atlasIndex>=a&&n._atlasIndex--),t.getAtlas$()},this.getAtlas$=function(e){var n,a=V.instance,r=a._atlases,s=a._atlasIndex;return null!=(n=(void 0===r?[]:r)[null!=e?e:s])?n:t.createAtlas$()},this.getAtlasIndex$=function(){return V.instance._atlasIndex},this.getAtlasSize$=function(){var _$e=t.getAtlas$(),n=V.instance.textureSize;return null!=_$e&&_$e._texture?{w:Math.max(_$e._texture.width,n),h:Math.max(_$e._texture.height,n)}:{w:n,h:n}},this.requestUpdateDynamicAtlas$=Zt.debounce(function(e){var n;t.forceUpdateDynamicAtlas$||(t.forceUpdateDynamicAtlas$=null!=(n=null==e?void 0:e.force)&&n),t.updateDynamicAtlas$(),console.debug("[DynamicAtlas] Request update dynamic atlas",t)},800),this.updateDynamicAtlas$=n(a().mark(function e(){var n;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q.getScene()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,t.mutex$.use("updateDynamicAtlas");case 4:if(n=e.sent,en.start("DynamicAtlas Process"),e.prev=6,q.pause(),t.atlasInfo$=null,t.prepareDrawInfo$(),t.rebuildAtlasIfNecessary$()){e.next=13;break}return e.abrupt("return");case 13:if(t.packCollectedTextures$()){e.next=16;break}return e.abrupt("return");case 16:P.emit(s.FINISHED_DYNAMIC_ATLAS),requestAnimationFrame(t.printAtlasTextures$),e.next=22;break;case 20:e.prev=20,e.t0=e.catch(6);case 22:return e.prev=22,t.forceUpdateDynamicAtlas$=!1,en.stop("DynamicAtlas Process"),q.resume(),n.release(),e.finish(22);case 28:case"end":return e.stop()}},e,null,[[6,20,22,28]])})),this.prepareDrawInfo$=function(){if(!(t.collectInfo$.size<1)){var _$e=[];t.collectInfo$.forEach(function(t){t.components.size<1||_$e.push(t)}),t.calculateOptimizedAtlas$(_$e)}},this.calculateOptimizedAtlas$=function(e){if(0!==e.length){var n=function(e){var t,n=0,a=0,r=p(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;n+=i.w*i.h,a=Math.max(a,i.w)}}catch(e){r.e(e)}finally{r.f()}e.sort(function(e,t){return t.h-e.h});var s,o=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(n/.95)),a),h:1/0}],c=0,u=0,l=p(e);try{for(l.s();!(s=l.n()).done;)for(var d=s.value,h=o.length-1;h>=0;h--){var f=o[h];if(!(d.w>f.w||d.h>f.h)){if(d.x=f.x,d.y=f.y,u=Math.max(u,d.y+d.h),c=Math.max(c,d.x+d.w),d.w===f.w&&d.h===f.h){var m=o.pop();m&&h<o.length&&(o[h]=m)}else d.h===f.h?(f.x+=d.w,f.w-=d.w):(d.w===f.w||o.push({x:f.x+d.w,y:f.y,w:f.w-d.w,h:d.h}),f.y+=d.h,f.h-=d.h);break}}}catch(e){l.e(e)}finally{l.f()}return{w:c,h:u,fill:n/(c*u)||0}}(e),a=n.w,r=n.h,i=n.fill;if(!(i<.6)){var s=t.getAtlasSize$();if(a>s.w||r>s.h){var o=t.excessTextures$(e,s);if(o.length<1)return;var c=new Set(o),u=e.filter(function(e){return!c.has(e)});t.calculateOptimizedAtlas$(u)}else t.atlasInfo$={atlasSize:s,atlasIndex:t.getAtlasIndex$(),packedInfo:{width:Math.round(a),height:Math.round(r),fillRate:i}}}}},this.excessTextures$=function(e,n){var a=n.w,r=n.h,i=t.calculateExcessDimensions$(a,r,n),s=i.excessWidth,o=i.excessHeight;return t.tryRemoveExcessTextures$(e,s,o)},this.calculateExcessDimensions$=function(e,t,n){return{excessWidth:Math.max(0,e-n.w),excessHeight:Math.max(0,t-n.h)}},this.tryRemoveExcessTextures$=function(e,n,a){var r,i=0,s=0,o=[],c=t.getAtlasIndex$(),u=p(e);try{for(u.s();!(r=u.n()).done;){var l,d=r.value;(n>0&&i<n||a>0&&s<a)&&(i+=d.w,s+=d.h,t.atlasIds$[d.id]=Math.min(null!=(l=t.atlasIds$[d.id])?l:c,c),d.x=-1,d.y=-1,o.push(d))}}catch(e){u.e(e)}finally{u.f()}return o},this.packCollectedTextures$=function(){if(!t.atlasInfo$)return!1;var _$e=t.getAtlas$();if(!_$e)return!1;var n=[],a=new Map,r=new Set;t.collectInfo$.forEach(function(e){r.add(e.id);var i,s=p(e.components);try{for(s.s();!(i=s.n()).done;){var o,c=i.value;if(c.isValid){var u=null==c?void 0:c.spriteFrame;if(u){var l=t.getTexture$(u),d=null==l?void 0:l.getId();d&&(a.set(d,(null!=(o=a.get(d))?o:0)+1),n.push(c))}}}}catch(e){s.e(e)}finally{s.f()}});for(var i=0;i<n.length;i++){var o=n[i];t.packComponentIntoAtlas$(_$e,o)}return!0},this.packComponentIntoAtlas$=function(e,n){if(Jt.hasOwn(n,"spriteFrame")){var a=n.spriteFrame;a&&t.tryInsertSpriteFrame$(e,a,n)}},this.tryInsertSpriteFrame$=function(e,n,a){n.original&&n._resetDynamicAtlasFrame();var r=V.instance.textureBleeding,i=t.drawTexture$(e,n,r);i&&(n._setDynamicAtlasFrame(i),t.packedFrames$.add(n),a.setTextureDirty(),a.markForUpdateRenderData(!0),t.updateLabelUVs$(a))},this.updateLabelUVs$=function(e){var t;if(_instanceof(e,ie)){var n=e.renderData;if(n){n.vertDirty=!1;var a=ie.Assembler.getAssembler(e);null==a||null==(t=a.updateUVs)||t.call(a,e)}}},this.printAtlasTextures$=function(){if(Vt){var _$e=V.instance.maxAtlasCount;for(var n in t.debugCanvases$){var a=t.debugCanvases$[n];if(a&&Number(n)<=_$e){var r=a.toDataURL("image/jpeg",.6);Xt.logImage(r,.5)}}}},this.drawTexture$=function(e,n,a){var r,i,s,o,c=t.getTexture$(n);if(!c)return null;var u=c.getId(),l=t.collectInfo$.get(u);if(!l)return null;var d=null!=(r=l.x)?r:-1,p=null!=(i=l.y)?i:-1;if(-1===d||-1===p)return null;var h=e._texture,f=h.width,m=h.height;if(d+l.w>f||p+l.h>m)return null;var g=c.image;if(!g)return null;var v=1*!!a,$=d+v,S=p+v,y=e._innerTextureInfos[u];if(!y){if(t.drawToAtlas$({atlas:e,texId:u,image:g,drawX:$,drawY:S,space:v}),Vt){var w=l.components.size;t.drawDebugFrame$({image:g,texId:u,drawX:$,drawY:S,usageCount:w,space:v})}e._count++,y={texture:c,x:$,y:S},e._innerTextureInfos[u]=y}return{x:n.rect.x+(null!=(s=y.x)?s:$),y:n.rect.y+(null!=(o=y.y)?o:S),texture:e._texture}},this.drawToAtlas$=function(e){var t=e.atlas,n=e.image,a=e.drawX,r=e.drawY,i=e.space,s=t._texture;i>0&&(n.width<=16||n.height<=16)&&(s.drawTextureAt(n,a-i,r-i),s.drawTextureAt(n,a-i,r+i),s.drawTextureAt(n,a+i,r-i),s.drawTextureAt(n,a+i,r+i)),s.drawTextureAt(n,a,r)},this.drawDebugFrame$=function(e){var n=t.getAtlasIndex$(),a=t.debugCanvases$[n];if(a){var r=e.image,i=e.texId,s=e.drawX,o=e.drawY,c=e.usageCount,u=e.space,l=a.getContext("2d",{willReadFrequently:!0}),d=null==r?void 0:r.data;l&&d&&t.isDrawableImage(d)&&(t.drawDebugImageWithBleed$({ctx:l,image:r,drawX:s,drawY:o,space:u}),t.drawDebugOutlineAndOverlay$({ctx:l,image:r,drawX:s,drawY:o,space:u,usageCount:c}),t.drawDebugText$({ctx:l,image:r,drawX:s,drawY:o,space:u,texId:i}))}},this.drawDebugImageWithBleed$=function(e){var t=e.ctx,n=e.image,a=e.drawX,r=e.drawY,i=e.space,s=n.data;i>0&&(n.width<=16||n.height<=16)&&(t.drawImage(s,a-i,r-i),t.drawImage(s,a-i,r+i),t.drawImage(s,a+i,r-i),t.drawImage(s,a+i,r+i)),t.drawImage(s,a,r)},this.drawDebugOutlineAndOverlay$=function(e){var t=e.ctx,n=e.image,a=e.drawX,r=e.drawY,i=e.space,s=e.usageCount,o=a,c=r,u=n.width,l=n.height;i>0&&(o-=i,c-=i,u+=2*i,l+=2*i);var d=240*(1-Math.min(s/15,1));t.fillStyle="hsla(".concat(d,", 100%, 50%, 0.2)"),t.fillRect(o+.5,c+.5,u,l)},this.drawDebugText$=function(e){var t=e.ctx,n=e.drawX,a=e.drawY,r=e.space,i=e.texId;t.font="22px Arial",t.textAlign="left",t.textBaseline="top";var s=t.measureText(i.replace("Tex.","")),c=n-r+10,u=a-r+10;t.fillStyle="rgba(0, 50, 0, 0.8)",t.fillRect(c-4,u-4,s.width+8,30),t.fillStyle="rgba(255, 255, 255, 0.95)",t.fillText(i,c,u)},this.isSameAtlas$=function(e,t){return!(!e||!t||e.atlasIndex!==t.atlasIndex)&&e.packedInfo.fillRate===t.packedInfo.fillRate&&e.packedInfo.width===t.packedInfo.width&&e.packedInfo.height===t.packedInfo.height}}return t(e,[{key:"init",value:function value(){this.listenEvents$(),this.overrideDynamicAtlasManager$(),Vt&&this.createPendingDebugCanvas$()}},{key:"isDrawableImage",value:function value(e){return _instanceof(e,HTMLCanvasElement)||_instanceof(e,HTMLImageElement)||_instanceof(e,ImageBitmap)}}]),e}();M._RF.pop(),M._RF.push({},"f18351KuT9C+7suAM5eHst5","renderResultChallenge",void 0);var on=Ludex.Utils.Error,cn="./wideframes",un="".concat(cn,"/result-challenge.png"),ln="".concat(cn,"/update-challenge.png"),dn="".concat(cn,"/images/avatar-fallback.png"),pn={wideframe:{type:"image",depth:0,size:[952,492],position:[0,0]},playerPhoto:{type:"image",depth:-2,size:[160,160],position:[50,140],fallbackImage:dn},opponentPhoto:{type:"image",depth:-1,size:[160,160],position:[740,140],fallbackImage:dn},leftScore:{type:"text",name:"left-score",depth:3,font:"normal bold 44px",color:"#f2a62e",textAlign:"center",position:[123,372]},rightScore:{type:"text",name:"right-score",depth:3,font:"normal bold 44px",color:"#f2a62e",textAlign:"center",position:[820,372]},leftCrown:{type:"image",name:"crown",depth:3,size:[92,63],position:[80,80],image:"".concat(cn,"/images/crown-icon.png")},rightCrown:{type:"image",name:"crown",depth:3,size:[92,63],position:[775,80],image:"".concat(cn,"/images/crown-icon.png")}},hn={win:{name:"win-image",type:"image",depth:2,size:[277,144],position:[337.5,174],image:"".concat(cn,"/images/win.png")},lose:{name:"lose-image",type:"image",depth:2,size:[326,145],position:[313,173.5],image:"".concat(cn,"/images/lose.png")},draw:{name:"draw-image",type:"image",depth:2,size:[390,144],position:[281,174],image:"".concat(cn,"/images/draw.png")}},fn=(e1=n(a().mark(function e(t){var n,r,i;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=on.lift({}),r=on.pipe(vn(t),$n(t),Sn(t),gn(t))(n),e.next=4,on.applyAsync(mn)(r);case 4:if(i=e.sent,!on.isFailure(i)){e.next=9;break}return console.error(on.extractFailure(i)),e.abrupt("return",null);case 9:return e.abrupt("return",on.extractSuccess(i));case 10:case"end":return e.stop()}},e)})),function(t){return e1.apply(this,arguments)}),mn=function mn(e){return codex.frameCapture.captureAsync({name:"ResultChallenge",width:952,height:492,renderOptions:e})},gn=function gn(e){return function(t){var n=e.isPlayerFinished,a=e.isOpponentFinished,r=n||a;return v(v({},t),{},{wideframe:v(v({},pn.wideframe),{},{image:r?un:ln,name:r?"result-challenge-with-score-box":"result-challenge-without-score-box"})})}},vn=function vn(e){return function(t){return v(v({},t),{},{playerPhoto:v(v({},pn.playerPhoto),{},{name:e.playerId,image:e.playerPhoto}),opponentPhoto:v(v({},pn.opponentPhoto),{},{name:e.opponentId,image:e.opponentPhoto})})}},$n=function $n(e){return function(t){var n=e.isPlayerFinished,a=e.isOpponentFinished,r=e.playerScore,s=e.opponentScore;return n||a?v(v({},t),{},{leftScore:v(v({},pn.leftScore),{},{text:n?"".concat(void 0===r?0:r):"???"}),rightScore:v(v({},pn.rightScore),{},{text:a?"".concat(void 0===s?0:s):"???"})}):t}},Sn=function Sn(e){return function(t){var n=yn(e);if("none"===n)return t;var a=hn[n];if("draw"===n)return v(v({},t),{},{statusImage:a});var r="win"===n?pn.leftCrown:pn.rightCrown;return v(v({},t),{},{crown:r,statusImage:a})}},yn=function yn(e){var t=e.playerScore,n=void 0===t?0:t,a=e.opponentScore,r=void 0===a?0:a,i=e.isPlayerFinished,s=e.isOpponentFinished;return i&&s?n===r?"draw":n>r?"win":"lose":"none"};M._RF.pop(),M._RF.push({},"46949HU2K9PdYlSXXZkfABn","renderShareLeaderboard",void 0);var wn=Ludex.Utils.Error,En="./wideframes",xn="".concat(En,"/images/avatar-fallback.png"),An={wideframe:{name:"share-leaderboard",type:"image",depth:0,image:"".concat(En,"/share-leaderboard.png"),size:[1500,2e3],position:[0,0],fallbackImage:xn},avatar:{type:"image",depth:-2,size:[510,510],position:[510,278],fallbackImage:xn},leaderPhoto:{type:"image",depth:-1,size:[100,100],fallbackImage:xn,position:[436,0]},leaderName:{type:"text",depth:1,font:"600 48px",position:[600,0]},leaderScore:{type:"text",depth:1,font:"600 48px",position:[100,0]}},Cn=(e2=n(a().mark(function e(t){var n,r,i;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=wn.lift({}),r=wn.pipe(kn(t),Ln(t),Rn)(n),e.next=4,wn.applyAsync(Dn)(r);case 4:if(i=e.sent,!wn.isFailure(i)){e.next=9;break}return console.error(wn.extractFailure(i)),e.abrupt("return",null);case 9:return e.abrupt("return",wn.extractSuccess(i));case 10:case"end":return e.stop()}},e)})),function(t){return e2.apply(this,arguments)}),Dn=function Dn(e){return codex.frameCapture.captureAsync({name:"ShareLeaderboard",width:1500,height:2e3,renderOptions:e})},Rn=function Rn(e){return v(v({},e),{},{wideframe:An.wideframe})},kn=function kn(e){return function(t){return v(v({},t),{},{avatar:v(v({},An.avatar),{},{name:e.playerId,image:e.playerPhoto})})}},Ln=function Ln(e){return function(t){for(var n=e.leaders,a=v({},t),r=0;r<n.length;r++){var i=n[r],s=i.id,o=i.name,c=i.photo,u=i.score,l=1292+180*r,d=1360+180*r;a["photo_".concat(s)]=v(v({},An.leaderPhoto),{},{position:[An.leaderPhoto.position[0],l],name:s,image:c}),a["name_".concat(s)]=v(v({},An.leaderName),{},{position:[An.leaderName.position[0],d],name:s,text:o}),a["score_".concat(s)]=v(v({},An.leaderScore),{},{position:[An.leaderScore.position[0],d],name:s,text:"".concat(u)})}return a}};M._RF.pop(),M._RF.push({},"c5f1cF6b7dGYLU3X1NOhOPG","renderShareScore",void 0);var Tn=Ludex.Utils,Fn=Tn.Error,_n=(Tn.Valid,Tn.Function),In=codex,Mn=In.frameCapture,Pn=In.language,Nn=In.monitorError,On="./wideframes",Bn={wideframe:{type:"image",name:"share-score",depth:0,image:"".concat(On,"/share-score.png"),size:[1500,2e3],position:[0,0]},avatar:{type:"image",depth:-1,size:[500,500],position:[500,410],fallbackImage:"".concat(On,"/images/avatar-fallback.png")},playerScore:{type:"text",name:"player-score",depth:1,font:"normal bold",color:"#f2a62e",textAlign:"center",position:[750,1120]},message:{type:"text",name:"message",depth:2,color:"#8f5543",textAlign:"center",position:[760,1560]}},zn=(e3=n(a().mark(function e(t){var n,r,i;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Fn.lift({}),r=Fn.pipe(Yn(t),qn(t),Qn,Vn)(n),e.next=4,Fn.applyAsync(Hn)(r);case 4:if(i=e.sent,!Fn.isFailure(i)){e.next=9;break}return console.error(Fn.extractFailure(i)),e.abrupt("return",null);case 9:return e.abrupt("return",Fn.extractSuccess(i));case 10:case"end":return e.stop()}},e)})),function(t){return e3.apply(this,arguments)}),Hn=function Hn(e){return Mn.captureAsync({name:"ShareScore",width:1500,height:2e3,renderOptions:e})},Vn=function Vn(e){return v(v({},e),{},{wideframe:Bn.wideframe})},Yn=function Yn(e){return function(t){return v(v({},t),{},{avatar:v(v({},Bn.avatar),{},{name:"".concat(e.playerId),image:e.playerPhoto})})}},qn=function qn(e){return function(t){var n=Bn.playerScore.font,a=Wn(),r=Kn();return v(v({},t),{},{playerScore:v(v({},Bn.playerScore),{},{text:"".concat(e.playerScore),font:"".concat(n," ").concat(r," ").concat(a,",")})})}},Qn=function Qn(e){var t=Wn(),n=Kn(),a=Xn(),r=v(v({},Bn.message),{},{font:"normal ".concat(n," ").concat(t,","),text:a});return v(v({},e),{},{message:r})},Wn=function Wn(){var n=jn(S[Pn.getCurrentLocale()]);return"".concat(n,"_LABEL")},Kn=function Kn(){var e;return null!=(e=$[Pn.getCurrentLocale()])?e:"104px"},jn=function jn(e){var t,n=e.split("/"),a=null!=(t=n[n.length-1])?t:"",r=a.lastIndexOf(".");return -1===r?a:a.substring(0,r)},Xn=function Xn(){try{return Pn.getText("share.canYouDoBetter")}catch(e){return null==Nn||Nn.sendException(_n.toError(e),{locale:Pn.getCurrentLocale(),message:"share.canYouDoBetter"}),"share.canYouDoBetter"}};M._RF.pop(),M._RF.push({},"3639a1RbypBKqHUo6gIZVdm","renderShareScoreWithInvite",void 0);var Zn=Ludex.Utils.Error,Jn=codex,ea=Jn.frameCapture,ta=Jn.language,na="./wideframes",ia={wideframe:{type:"image",name:"share-score-with-invite",depth:0,image:"".concat(na,"/invite-score.png"),size:[952,492],position:[0,0]},avatar:{type:"image",depth:-1,size:[160,160],position:[85,140],fallbackImage:"".concat(na,"/images/avatar-fallback.png")},playerScore:{type:"text",name:"player-score",depth:1,font:"normal bold",color:"#f2a62e",textAlign:"center",position:[165,384]}},sa={en:"44px",ru:"40px"},oa=(e4=n(a().mark(function e(t){var n,r,i;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Zn.lift({}),r=Zn.pipe(la(t),da(t),ua)(n),e.next=4,Zn.applyAsync(ca)(r);case 4:if(i=e.sent,!Zn.isFailure(i)){e.next=9;break}return console.error(Zn.extractFailure(i)),e.abrupt("return",null);case 9:return e.abrupt("return",Zn.extractSuccess(i));case 10:case"end":return e.stop()}},e)})),function(t){return e4.apply(this,arguments)}),ca=function ca(e){return ea.captureAsync({name:"ShareScore",width:952,height:492,renderOptions:e})},ua=function ua(e){return v(v({},e),{},{wideframe:ia.wideframe})},la=function la(e){return function(t){return v(v({},t),{},{avatar:v(v({},ia.avatar),{},{name:"".concat(e.playerId),image:e.playerPhoto})})}},da=function da(e){return function(t){var n=ia.playerScore.font,a=pa(),r=ha();return v(v({},t),{},{playerScore:v(v({},ia.playerScore),{},{text:"".concat(e.playerScore),font:"".concat(n," ").concat(r," ").concat(a,",")})})}},pa=function pa(){var n=fa(S[ta.getCurrentLocale()]);return"".concat(n,"_LABEL")},ha=function ha(){var e;return null!=(e=sa[ta.getCurrentLocale()])?e:"44px"},fa=function fa(e){var t,n=e.split("/"),a=null!=(t=n[n.length-1])?t:"",r=a.lastIndexOf(".");return -1===r?a:a.substring(0,r)};M._RF.pop(),M._RF.push({},"407a0rBEoFPs6GoXuwQofW2","renderUpdateChallenge",void 0);var ma=Ludex.Utils.Error,ga="./wideframes",$a="".concat(ga,"/images/avatar-fallback.png"),Sa={wideframe:{type:"image",name:"update-challenge",depth:0,image:"".concat(ga,"/update-challenge.png"),size:[952,492],position:[0,0]},playerPhoto:{type:"image",depth:-1,size:[160,160],position:[50,140],fallbackImage:$a},opponentPhoto:{type:"image",depth:-1,size:[160,160],position:[740,140],fallbackImage:$a}},ya=(e5=n(a().mark(function e(t){var n,r,i;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=ma.lift({}),r=ma.pipe(ba(t),Ea)(n),e.next=4,ma.applyAsync(wa)(r);case 4:if(i=e.sent,!ma.isFailure(i)){e.next=9;break}return console.error(ma.extractFailure(i)),e.abrupt("return",null);case 9:return e.abrupt("return",ma.extractSuccess(i));case 10:case"end":return e.stop()}},e)})),function(t){return e5.apply(this,arguments)}),wa=function wa(e){return codex.frameCapture.captureAsync({name:"UpdateChallenge",width:952,height:492,renderOptions:e})},Ea=function Ea(e){return v(v({},e),{},{wideframe:Sa.wideframe})},ba=function ba(e){return function(t){return v(v({},t),{},{playerPhoto:v(v({},Sa.playerPhoto),{},{image:e.playerPhoto,name:e.playerId}),opponentPhoto:v(v({},Sa.opponentPhoto),{},{image:e.opponentPhoto,name:e.opponentId})})}};M._RF.pop(),M._RF.push({},"5cf47s8lohMlZGIaMKBpDK0","FrameCapture",void 0);var e1,e2,e3,e4,e5,xa,Aa,Ca,Da=codex.frameCapture,Ra=function(){var r;function e(){i(this,e)}return t(e,[{key:"init",value:(r=n(a().mark(function e(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:Da.setRenderer("share-score",zn),Da.setRenderer("result-challenge",fn),Da.setRenderer("update-challenge",ya),Da.setRenderer("share-leaderboard",Cn),Da.setRenderer("share-score-with-invite",oa);case 5:case"end":return e.stop()}},e)})),function(){return r.apply(this,arguments)})}]),e}();M._RF.pop(),M._RF.push({},"2f36c+IsKJAU5s61TqQdaJ6","HybridFileCache",void 0);var ka=Ludex,La=ka.Events,Ta=ka.Configs.GameEngine.HybridFileCache,Fa=Ta.Enabled,_a=Ta.PreviewMode,Ia=Ta.BuildMode,Ma=ka.Utils,Pa=Ma.Object,Na=Ma.Function,Oa=Ma.Json,Ua=Ma.Decorator,Ga=codex,Ba=Ga.event,za=Ga.storage,Ha=Ga.getBuildVersion,Va=G.instance,Ya=Va.downloader,qa=Va.pipeline,Qa=Va.fetchPipeline,Wa=/.*\/([-a-z0-9@]+)\.([^\.]+)$/,Ka=(xa=Ua.throttle(1e3),Ca=e((Aa=function(){var r;function e(){var _$e,t=this;i(this,e),this.supportTypes$=[],this.bundledFiles$={},this.originHandler$={},this.nativeAssetDictionary$={},this.initStorage$=n(a().mark(function e(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",za.addStorage("HybridFileCache",{commitId:"unknown",buildVersion:"0",cachedFiles:{},cachedBundles:{},cachedExtensions:{}},!0));case 1:case"end":return e.stop()}},e)})),this.checkCacheVersion$=n(a().mark(function e(){var n,r,i,s,o,c,u;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=Ia.InvalidateMode,r=window.CommitId,i=Ha().toString(),s=za.getStorageData("HybridFileCache","commitId"),o=za.getStorageData("HybridFileCache","buildVersion"),za.setStorageData("HybridFileCache","commitId",r),za.setStorageData("HybridFileCache","buildVersion",i),c=s!==r,u=o!==i,e.t0=n,e.next="version"===e.t0?13:"commitId"===e.t0?17:21;break;case 13:if(!u){e.next=16;break}return e.next=16,t.clearCache$();case 16:case 20:case 24:return e.abrupt("break",25);case 17:if(!c){e.next=20;break}return e.next=20,t.clearCache$();case 21:if(!u&&!c){e.next=24;break}return e.next=24,t.clearCache$();case 25:t.requestUpdateStorage();case 26:case"end":return e.stop()}},e)})),this.initSupportedTypes$=function(){t.supportTypes$=Ia.SupportedExtensions},this.setupBundledFiles$=n(a().mark(function e(){var n,r,i,s;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,Ia.Enabled){e.next=3;break}return e.abrupt("return");case 3:n=[],r=p(t.supportTypes$),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=15;break}if(s=i.value,!t.getCachedBundles$(s)){e.next=12;break}return e.abrupt("continue",13);case 12:n.push(t.downloadBundledFile$(s));case 13:e.next=7;break;case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(5),r.e(e.t0);case 20:return e.prev=20,r.f(),e.finish(20);case 23:if(!(n.length>0)){e.next=26;break}return e.next=26,Na.allSettled(n);case 26:return e.prev=26,Ba.emit(La.BUNDLE_READY),e.finish(26);case 29:case"end":return e.stop()}},e,null,[[0,,26,29],[5,17,20,23]])})),this.downloadBundledFile$=(_$e=n(a().mark(function e(n){var r,i,s,o;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=n.replace(".",""),i="./cache/bundle".concat(r.toUpperCase(),".").concat(r),"bundle"===n&&(i="./cache/bundleBUNDLE.json"),e.next=6,fetch(i,{method:"GET",headers:{"Content-Type":"application/json"}});case 6:return s=e.sent,e.next=9,s.json();case 9:o=e.sent,t.setBundledCache$(n,o),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.error("Hybrid File Cache: Downloaded bundled file",{type:n,error:e.t0});case 16:case"end":return e.stop()}},e,null,[[0,13]])})),function(t){return _$e.apply(this,arguments)}),this.injectOptimalFetchPipeline$=function(){if(_a.Enabled||Ia.Enabled){var _$e=Qa.pipes[2];_$e&&(Qa.remove(2),Qa.insert(function(t,n){try{_$e(t,n)}catch(e){console.error("Hybrid File Cache: optimized fetch pipeline",{error:e})}},2))}},this.injectOptimalLoadPipeline$=function(){if(_a.Enabled||Ia.Enabled){var _$e=qa.pipes[2];_$e&&(qa.remove(2),qa.insert(function(t,n){try{_$e(t,n)}catch(e){console.warn("Hybrid File Cache: optimized load pipeline",{error:e}),n(e)}},2))}},this.injectCacheExtensionPipeline$=function(){if(_a.Enabled&&_a.CacheUuidExtension){var _$e={},n=function n(n,a){n.output=n.input;for(var r=0;r<n.input.length;r++){var i=n.input[r];if(i.id){var s=t.getCacheExtension$(i.id);s?(i.url=i.url.replace(i.ext,s),i.ext=s,_$e[i.id]=!0):_$e[i.id]=!1}}a(null,null)},a=function a(n){return function(a,r){for(var i=g(a.input),s=0;s<i.length;s++){var o=i[s];if(o.id){var c,u=_$e[o.id];Pa.hasOwn(t.nativeAssetDictionary$,o.id)||(t.nativeAssetDictionary$[o.id]=null!=(c=o.isNative)&&c),u&&(o.isNative=!0)}}a.input.length,n(a,r)}},r=function r(n,a){n.output=n.input;for(var r=0;r<n.output.length;r++){var i,s=n.output[r];if(s.id){var o=null!=(i=t.nativeAssetDictionary$[s.id])&&i;s.isNative=o,_$e[s.id]||t.setCacheExtension$(s.id,s.ext)}}a(null,null)};qa.insert(n,1),Qa.insert(n,1),qa.insert(r,3),Qa.insert(r,3);var i=g(qa.pipes),s=g(Qa.pipes),o=i[2];o&&(qa.pipes[2]=a(o));var c=s[2];c&&(Qa.pipes[2]=a(c)),console.debug("Hybrid File Cache: inject cache extension pipelines",i,s,g(qa.pipes),g(Qa.pipes))}},this.saveOriginDownloaders$=function(){var _$e,n=p(t.supportTypes$);try{for(n.s();!(_$e=n.n()).done;){var a=_$e.value,r=Ya.handlers[a];r&&(t.originHandler$[a]=r)}}catch(e){n.e(e)}finally{n.f()}},this.registerCustomDownloader$=function(){var _$e,n=p(t.supportTypes$);try{for(n.s();!(_$e=n.n()).done;){var a=_$e.value;"bundle"!==a&&Ya.register(a,t.downloadFile$(a))}}catch(e){n.e(e)}finally{n.f()}},this.listenEvents$=function(){Ba.on(La.SCENE_LOADED,t.requestUpdateStorage),P.on(s.CLEAR_HYBRID_FILE_CACHE,t.clearCache$)},this.getDownloadHandler$=function(e){var n;return null!=(n=t.originHandler$[e])?n:null},this.downloadFile$=function(e){return function(n,a,r){var i=t.getCache$(e,n);if(i)return r(null,i);var s=t.getDownloadHandler$(e);if(!s)return r(Error("Downloader not found"),null);s(n,a,function(a,i){return a||t.setCache$(e,n,i),r(a,i)})}},this.getCacheKey$=function(e,t){var n=t.match(Wa);if(!n)return null;var a=y(n,3),r=(a[0],a[1]),i=a[2];return!i||0>e.indexOf(i)?null:"".concat(r,":").concat(e)},this.validateDataType$=function(e){return Array.isArray(e)&&Pa.hasOwn(e[0],"__type__"),!0},this.setCache$=function(e,n,a){var r=t.getCacheKey$(e,n);if(r&&t.validateDataType$(a)){var i=Oa.clone(a);za.setStorageData("HybridFileCache","cachedFiles",w({},r,null!=i?i:{})),t.requestUpdateStorage()}},this.getCache$=function(e,n){var a=t.getCacheKey$(e,n);if(!a)return null;var r=t.getFileCaches$()[a];return r||(r=t.getBundledCache$(e,a)),r?Oa.clone(r):null},this.getFileCaches$=function(){var _$e;return null!=(_$e=za.getStorageData("HybridFileCache","cachedFiles"))?_$e:{}},this.getCachedBundles$=function(e){var n=za.getStorageData("HybridFileCache","cachedBundles");if(!n)return null;var a=n[e];return a?(t.bundledFiles$[e]=a,a):null},this.getBundledCache$=function(e,n){var a,r=t.bundledFiles$[e];return r&&null!=(a=r[n.replace(":".concat(e),"")])?a:null},this.setBundledCache$=function(e,n){t.bundledFiles$[e]=n,za.setStorageData("HybridFileCache","cachedBundles",w({},e,n)),t.requestUpdateStorage()},this.getCacheExtension$=function(e){return t.getCachedExtensions$()[e]},this.setCacheExtension$=function(e,n){za.setStorageData("HybridFileCache","cachedExtensions",w({},e,n)),t.requestUpdateStorage()},this.getCachedExtensions$=function(){var _$e;return null!=(_$e=za.getStorageData("HybridFileCache","cachedExtensions"))?_$e:{}},c(this,"requestUpdateStorage",Ca,this),this.clearCache$=function(){za.initStorageData("HybridFileCache","cachedFiles",{}),za.initStorageData("HybridFileCache","cachedBundles",{}),za.updateToWebStorage("HybridFileCache",!0)}}return t(e,[{key:"init",value:(r=n(a().mark(function e(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Fa){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.initStorage$();case 4:return e.next=6,this.checkCacheVersion$();case 6:this.initSupportedTypes$(),this.injectOptimalLoadPipeline$(),this.injectOptimalFetchPipeline$(),this.injectCacheExtensionPipeline$(),this.saveOriginDownloaders$(),this.registerCustomDownloader$(),this.setupBundledFiles$(),this.listenEvents$(),console.debug("Hybrid File Cache: Initialized",{supportTypes:this.supportTypes$});case 15:case"end":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)})}]),e}()).prototype,"requestUpdateStorage",[xa],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return function(){za.updateToWebStorage("HybridFileCache",!1)}}}),Aa);M._RF.pop(),M._RF.push({},"14b76Yew19JgY7K+L9F5mmu","Languages",void 0);var ja=Ludex,Xa=ja.Events,Za=ja.Utils.Array,Ja=codex,er=Ja.player,tr=Ja.event,nr=Ja.language,ar=Ja.monitorError,rr=function(){var r;function e(){var _$e,_$e1,_$e2,_$e3,t=this;i(this,e),this.initDefaultLanguage$=n(a().mark(function e(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:nr.add("en",ge,!0),t.setLanguage$("en");case 2:case"end":return e.stop()}},e)})),this.initPlayerLanguage$=n(a().mark(function e(){var n,r,i;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((r=nr.getPlayerLanguage())&&t.isSupportedLocale$(r)){e.next=5;break}return console.warn("Language ".concat(r," not supported. Overriding with default language")),t.setLanguage$("en",!0),e.abrupt("return");case 5:return e.next=7,t.addLanguage$(r);case 7:i=null!=(n=er.getPlayerDataByKey("isFirstLogin"))&&n,t.setLanguage$(r,i);case 9:case"end":return e.stop()}},e)})),this.isSupportedLocale$=function(e){return Za.has(E,e)},this.listenEvent$=function(){tr.on(Xa.REQUEST_LANGUAGE,t.handleLanguageRequested$),P.on(Xa.REQUEST_LANGUAGE,t.handleLanguageRequested$),P.on(s.PRELOAD_LANGUAGE,t.handlePreloadLanguage$),P.on(s.CHOOSE_LANGUAGE,t.handleChooseLanguage$)},this.addLanguage$=(_$e=n(a().mark(function e(n){var r,i,s=arguments;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>1&&void 0!==s[1]&&s[1],e.next=3,t.getLangData$(n);case 3:i=e.sent,nr.add(n,i,r);case 5:case"end":return e.stop()}},e)})),function(t){return _$e.apply(this,arguments)}),this.setLanguage$=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];nr.choose(e),t&&er.setSetting("language",e)},this.handlePreloadLanguage$=(_$e1=n(a().mark(function e(n){var r,i,s,o;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.locale,i=n.onLoad,s=n.onError,t.isSupportedLocale$(r)){e.next=5;break}return console.warn("Preload language ".concat(r," not found")),null==s||s(Error("Language ".concat(r," not found"))),e.abrupt("return");case 5:return e.prev=5,e.next=8,t.addLanguage$(r);case 8:null==i||i(r),e.next=17;break;case 11:e.prev=11,e.t0=e.catch(5),console.error(o=t.toError$(e.t0,"handleLanguageRequested")),null==ar||ar.sendException(o),null==s||s(e.t0);case 17:case"end":return e.stop()}},e,null,[[5,11]])})),function(t){return _$e1.apply(this,arguments)}),this.handleChooseLanguage$=function(e){var n=e.locale,a=e.saveToPlayerData;if(t.isSupportedLocale$(n))try{t.setLanguage$(n,void 0!==a&&a)}catch(e){var i=t.toError$(e,"handleLanguageRequested");console.error(i),null==ar||ar.sendException(i)}else console.warn("Choose language ".concat(n," not found"))},this.getLangData$=(_$e2=n(a().mark(function e(t){var n;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("en"!==t){e.next=2;break}return e.abrupt("return",ge);case 2:return e.next=4,b.loadJsonAsync(x[t]);case 4:if(null!==(n=e.sent)){e.next=7;break}throw Error("Language ".concat(t," not found"));case 7:if(null!==n.json){e.next=9;break}throw Error("Language ".concat(t," is empty"));case 9:return e.abrupt("return",n.json);case 10:case"end":return e.stop()}},e)})),function(t){return _$e2.apply(this,arguments)}),this.handleLanguageRequested$=(_$e3=n(a().mark(function e(n){var r,i,s,o,c,u;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.locale,s=void 0!==(i=n.saveToPlayerData)&&i,o=n.onLoad,c=n.onError,t.isSupportedLocale$(r)){e.next=5;break}return console.warn("Request language ".concat(r," not found")),null==c||c(Error("Language ".concat(r," not found"))),e.abrupt("return");case 5:return e.prev=5,e.next=8,t.addLanguage$(r);case 8:null==o||o(r),t.setLanguage$(r,s),e.next=18;break;case 12:e.prev=12,e.t0=e.catch(5),console.error(u=t.toError$(e.t0,"handleLanguageRequested")),null==ar||ar.sendException(u),null==c||c(u);case 18:case"end":return e.stop()}},e,null,[[5,12]])})),function(t){return _$e3.apply(this,arguments)}),this.toError$=function(e,t){return _instanceof(e,Error)?e:"string"==typeof e?Error("LanguagePlugin: ".concat(e)):Error("LanguagePlugin: Unknown error in module: <".concat(t,">"))}}return t(e,[{key:"init",value:(r=n(a().mark(function e(){var t;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.initDefaultLanguage$();case 3:return this.listenEvent$(),e.next=6,this.initPlayerLanguage$();case 6:e.next=13;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(t=this.toError$(e.t0,"handleLanguageRequested")),null==ar||ar.sendException(t);case 13:case"end":return e.stop()}},e,this,[[0,8]])})),function(){return r.apply(this,arguments)})}]),e}();M._RF.pop(),M._RF.push({},"fb33bK/6Y5FAas5AwmmBM/X","Leaderboards",void 0);var ir=Ludex,sr=ir.Configs,or=sr.Mockup,cr=or.Leaderboards,ur=or.GameSDK.Player,lr=sr.Leaderboards,dr=ir.Utils.Number,pr=codex.leaderboard,hr=function(){function e(){var t=this;i(this,e),this.handleWhenGameSDKStarted$=function(){cr.Enabled?t.setupLeaderboardsMockup$():t.setupLeaderboards$()},this.setupLeaderboards$=n(a().mark(function e(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.setupLeaderboardByConfigs$();case 1:case"end":return e.stop()}},e)})),this.setupLeaderboardByConfigs$=function(){var _$e,t=lr.LeaderboardList,n=p(t);try{for(n.s();!(_$e=n.n()).done;){var a=_$e.value,r=a.Id,i=a.Name;pr.addLeaderboard({name:i,type:"global",autoSortRank:!0,leaderboardId:r})}}catch(e){n.e(e)}finally{n.f()}},this.setupLeaderboardsMockup$=n(a().mark(function e(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.setupMockGlobalLeaderboards$(),t.setupMockFriendsLeaderboard$(),t.setupMockGlobalTournamentLeaderboard$();case 3:case"end":return e.stop()}},e)})),this.setupMockGlobalLeaderboards$=n(a().mark(function e(){var t,n,r,i,s,o,c,u;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=cr.NumOfLeaders,n=lr.LeaderboardList,r=p(n),e.prev=3,r.s();case 5:if((i=r.n()).done){e.next=16;break}if(o=(s=i.value).Name,c=s.Id,o){e.next=10;break}return e.abrupt("continue",14);case 10:return e.next=12,pr.createLeaderboardAsync({_id:c,name:o,numberOfLeaders:dr.random(t.Max-t.Min)+t.Min});case 12:u=e.sent,pr.addLeaderboard({name:o,type:"global",autoSortRank:!0,leaderboardId:u});case 14:e.next=5;break;case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(3),r.e(e.t0);case 21:return e.prev=21,r.f(),e.finish(21);case 24:case"end":return e.stop()}},e,null,[[3,18,21,24]])})),this.setupMockFriendsLeaderboard$=n(a().mark(function e(){var t,n,r,i;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t="Mock Friends Leaderboard",n=0,(r=ur.ConnectedPlayers).Enabled&&(n=dr.random(r.NumOfPlayers-1)+1),e.next=7,pr.createLeaderboardAsync({_id:"friends-leaderboard-id",name:t,numberOfLeaders:n});case 7:i=e.sent,pr.addLeaderboard({name:t,type:"friends",autoSortRank:!0,leaderboardId:i});case 9:case"end":return e.stop()}},e)})),this.setupMockGlobalTournamentLeaderboard$=n(a().mark(function e(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.requestTournamentDataAsync();case 2:e.sent.forEach(function(e){var t=e.payload.leaderboardId;t&&(pr.isExistLeaderboardId(t)||pr.addLeaderboard({type:"tournament",name:t,autoSortRank:!0,leaderboardId:t}))});case 4:case"end":return e.stop()}},e)}))}return t(e,[{key:"init",value:function value(){this.handleWhenGameSDKStarted$()}}]),e}();M._RF.pop(),M._RF.push({},"e7bf73g4jJGuI9FqvW5YBsS","PerformanceMonitor",void 0);var fr=Ludex,mr=fr.Utils.Mark,gr=fr.Events,vr=fr.Configs.PerformanceMonitor.FpsTracking,$r=codex.event,Sr=function(){function e(){var t=this;i(this,e),this.markName$="FPS Tracking",this.listenEvents$=function(){$r.catchUp(gr.GAME_READY,t.handleStartTraceFps$)},this.unListenEvents$=function(){q.off(X.EVENT_AFTER_UPDATE,t.handleLateUpdate$)},this.handleStartTraceFps$=function(){t.startTraceFps$(),q.on(X.EVENT_AFTER_UPDATE,t.handleLateUpdate$)},this.startTraceFps$=function(){t.mark&&(t.mark.measure(t.markName$),t.mark.start(t.markName$))},this.handleLateUpdate$=function(){if(t.mark){if(t.fpsTraceDuration$-=P.deltaTime,t.fpsTraceDuration$<=0&&!t.traceStopped$)return t.traceStopped$=!0,t.unListenEvents$(),t.updateFPS$(),void t.mark.stop(t.markName$);t.fpsTraceIntervalTimer$-=P.deltaTime,t.fpsTraceIntervalTimer$>0||(t.fpsTraceIntervalTimer$=t.fpsTraceInterval$,t.updateFPS$(),t.mark.stop(t.markName$),t.startTraceFps$())}},this.updateFPS$=function(){var _$e,n;if(t.mark){var a=t.getFPS$(),r=t.getDrawCalls$(),i=t.getDeviceRender$(),s=t.getTextureMemory$();t.minFps$=Math.min(null!=(_$e=t.minFps$)?_$e:a,a),t.maxFps$=Math.max(null!=(n=t.maxFps$)?n:0,a),t.mark.putMetric(t.markName$,"FPS Metric",a),t.mark.putAttr(t.markName$,"Page Title",document.title),t.mark.putAttr(t.markName$,"Device Render",i),t.mark.putAttr(t.markName$,"Draw Calls",r.toString()),t.mark.putAttr(t.markName$,"Texture Memory",s.toFixed(2)),t.mark.putAttr(t.markName$,"Min FPS",t.minFps$.toString()),t.mark.putAttr(t.markName$,"Max FPS",t.maxFps$.toString()),console.debug("FPS: ".concat(a," Min: ").concat(t.minFps$," Max: ").concat(t.maxFps$,", draw calls: ").concat(r,", texture memory: ").concat(s.toFixed(2),"MB"))}},this.getFPS$=function(){return q.root&&Math.floor(q.root.fps)||0},this.getDrawCalls$=function(){return q.root&&q.root.device.numDrawCalls||0},this.getDeviceRender$=function(){return q.root&&q.root.device.renderer||"Unknown"},this.getTextureMemory$=function(){return q.root&&q.root.device.memoryStatus.textureSize/1048576||0}}return t(e,[{key:"mark",get:function get(){return vr.Enabled?mr:null}},{key:"init",value:function value(){var _$e=vr.TrackingDuration,t=vr.TrackingInterval;this.mark&&(this.fpsTraceDuration$=null!=_$e?_$e:60,this.fpsTraceInterval$=null!=t?t:10,this.fpsTraceIntervalTimer$=this.fpsTraceInterval$,this.traceStopped$=!1,this.listenEvents$())}}]),e}();M._RF.pop(),M._RF.push({},"58248LBip1DBrMjK0UWw2rM","RemoteConfig",void 0);var yr=Ludex.Events,wr=codex.event,Er=function(){function e(){var t=this;i(this,e),this.listenEvents$=function(){wr.on(yr.REQUEST_HOT_RELOAD,t.handleHotReload$),wr.on(yr.REQUEST_UPDATE_CONFIG,t.handleUpdateConfig$)},this.handleHotReload$=function(){P.restart()},this.handleUpdateConfig$=function(e){if("Gameplay"===e.type){P.emit(s.GAMEPLAY_UPDATE_CONFIG,e.config);var t=e.id,n=e.type;wr.emit(yr.REMOTE_CONFIG_UPDATED,{id:t,type:n})}}}return t(e,[{key:"init",value:function value(){this.listenEvents$()}}]),e}();M._RF.pop(),M._RF.push({},"c34a93D1BREiKms1T21AkQS","PluginsManager",void 0);var br=Ludex.Configs,xr=br.Languages,Ar=br.Leaderboards,Cr=br.RemoteConfig,Dr=br.FrameCapture,Rr=br.DailyRewards,kr=br.AdaptivePerformance,Lr=br.Debugger,Tr=Lr.CanvasRecorder,Fr=Lr.Profiler,_r=br.GameEngine,Ir=_r.HybridFileCache,Mr=_r.DynamicAssets,Pr=_r.DynamicAtlas,Nr=function(){function e(){i(this,e),this.initHybridFileCache$=function(){Ir.Enabled&&(new Ka).init()}}return t(e,[{key:"init",value:function value(){this.initHybridFileCache$(),console.debug("Plugins Manager: Initialized")}},{key:"initLanguages",value:function value(){xr.Enabled&&(new rr).init()}},{key:"initLeaderboards",value:function value(){Ar.Enabled&&(new hr).init()}},{key:"initRemoteConfig",value:function value(){Cr.Enabled&&(new Er).init()}},{key:"initDynamicAtlas",value:function value(){Pr.OptimizeAtlas.Enabled&&V.instance.enabled&&(new sn).init()}},{key:"initDynamicAssets",value:function value(){Mr.Enabled&&(new Gt).init()}},{key:"initCanvasRecorder",value:function value(){Tr.Enabled&&(new mt).init()}},{key:"initPerformanceMonitor",value:function value(){Fr.Enabled&&(new Sr).init()}},{key:"initAdaptivePerformance",value:function value(){kr.Enabled&&(new ht).init()}},{key:"initFrameCapture",value:function value(){Dr.Enabled&&(new Ra).init()}},{key:"initDailyRewards",value:function value(){Rr.Enabled&&(new yt).init()}}]),e}();M._RF.pop(),M._RF.push({},"ac8b03T+rFB061sXoEEsCUH","SceneManager",void 0);var Or=codex,Ur=Or.event,Gr=Or.monitorError,Br=Ludex,zr=Br.Events,Hr=Br.Configs.PerformanceMonitor,Vr=Br.Utils,Yr=Vr.Mark,qr=Vr.Function,Qr=GameSDK,Wr=function(){function e(){var _$e,_$e1,_$e2,t=this;i(this,e),this.markName$="Load Scene",this.testScene$={},this.isClearedMark$=!1,this.callbackSwitchScene$=null,this.mutex$=qr.mutex(),this.listenEvents$=function(){Ur.catchUp(zr.MARK_IS_TEST_SCENE,t.setTestScene$),Ur.on(zr.SWITCH_SCENE,t.switchScene$),Ur.on(zr.PRELOAD_SCENE,t.preloadScene$)},this.correctSceneName$=function(e){var n=q.getScene(),a=t.getTestScene$();return a?a===(null==n?void 0:n.name)?null:a:null!=n&&n.isValid?e===C.DASHBOARD_SCENE?C.GAME_SCENE:e===n.name?null:e:e},this.switchScene$=(_$e=n(a().mark(function e(n){var r,i,s;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.sceneName,i=n.sceneData,console.debug("Switching",s=t.correctSceneName$(r),null!=i?i:{}),s){e.next=5;break}return e.abrupt("return");case 5:k.isSceneLoaded(s)||D.showLoadingFullScreen(s),t.startScene$(v(v({},n),{},{sceneName:s}));case 7:case"end":return e.stop()}},e)})),function(t){return _$e.apply(this,arguments)}),this.startScene$=(_$e1=n(a().mark(function e(n){var r,i,s,o,c;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.sceneName,i=n.sceneData,e.next=3,t.mutex$.use(r);case 3:return s=e.sent,e.prev=4,t.startMeasure$("start",n),e.next=8,t.loadSceneAsync$(r,t.onSceneProgress$);case 8:return o=e.sent,e.next=11,t.runSceneAsync$(o);case 11:c=e.sent,t.setSceneData$(c,null!=i?i:{}),k.markIsSceneLoaded(r),Ur.emit(zr.SCENE_LOADED,{sceneName:r}),t.clearTestMark$(),t.stopMeasure$(),t.handleSceneLaunched$(r,i),e.next=25;break;case 20:e.prev=20,e.t0=e.catch(4),console.warn("SceneManager.startScene",qr.toError(e.t0)),t.stopMeasure$(!1);case 25:return e.prev=25,s.release(),e.finish(25);case 28:case"end":return e.stop()}},e,null,[[4,20,25,28]])})),function(t){return _$e1.apply(this,arguments)}),this.preloadScene$=(_$e2=n(a().mark(function e(n){var r,i;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((r=n.sceneName)!==C.DASHBOARD_SCENE){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,t.mutex$.use(r);case 5:return i=e.sent,e.prev=6,t.startMeasure$("preload",n),e.next=10,t.loadSceneAsync$(r,t.onSceneProgress$);case 10:k.markIsSceneLoaded(r),Ur.emit(zr.SCENE_LOADED,{sceneName:r,isPreload:!0}),t.stopMeasure$(),i.release(),e.next=22;break;case 16:e.prev=16,e.t0=e.catch(6),console.warn("SceneManager.preloadScene",qr.toError(e.t0)),t.stopMeasure$(!1),i.release();case 22:case"end":return e.stop()}},e,null,[[6,16]])})),function(t){return _$e2.apply(this,arguments)}),this.loadSceneAsync$=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new Promise(function(n,a){var r=ne.main;r?r.loadScene(e,null!=t?t:null,function(e,t){e?a(e):n(t)}):a(Error("Main bundle not found"))})},this.runSceneAsync$=function(e){return new Promise(function(t,n){q.runScene(e,void 0,function(e,a){if(e)return n(e);if(!a)throw Error("Scene not found");t(a)})})},this.startMeasure$=function(e,n){if(t.mark){var a=n.sceneName;console.groupCollapsed("\uD83D\uDCE6 ".concat(a,": ").concat(e," progress")),t.mark.measure(t.markName$),t.mark.putAttr(t.markName$,"Cancel","false"),t.mark.putAttr(t.markName$,"Success","false"),t.mark.putMetric(t.markName$,a),t.mark.start(t.markName$)}},this.stopMeasure$=function(){var _$e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];t.mark&&(t.mark.rmAttr(t.markName$,"File"),t.mark.putAttr(t.markName$,"Success",_$e?"true":"false"),t.mark.stop(t.markName$),console.groupEnd())},this.onSceneProgress$=function(e,n,a){t.mark&&t.mark.putAttr(t.markName$,"Last File","".concat(a.id," (").concat(a.ext,")"));var i=Math.floor(e/n*70+30);Qr.setLoadingProgress(i)},this.clearTestMark$=function(){t.isClearedMark$||(Ur.clear(zr.MARK_IS_TEST_SCENE),t.isClearedMark$=!0)},this.handleSceneLaunched$=function(e,n){var a;D.hideLoadingFullScreen(e),R.switchSceneTracking(),null==Gr||Gr.addMetadata({currentScene:e}),null==(a=t.callbackSwitchScene$)||a.call(t,{sceneName:e,sceneData:n}),Ur.emit(zr.SCENE_LAUNCHED,{sceneName:e}),q.once(X.EVENT_AFTER_RENDER,function(){Ur.emit(zr.SCENE_RENDERED,{sceneName:e})})},this.getTestScene$=function(){var _$e;return null!=(_$e=Object.keys(t.testScene$)[0])?_$e:null},this.setTestScene$=function(e){var n=e.sceneName;console.warn("SceneManager.setTestScene",n),t.testScene$[n]=!0},this.onSwitchScene=function(e){t.callbackSwitchScene$=e},this.setSceneData$=function(e,t){if(t&&("data"in e||e.scene.attr({data:{}}),"data"in e)){var n=e.data||{};e.scene.attr({data:v(v({},n),t)}),console.debug("SceneManager.setSceneData",{sceneName:e.name,sceneData:t,currentData:n})}}}return t(e,[{key:"init",value:function value(){this.listenEvents$(),console.debug("Scene Manager: Initialized")}},{key:"mark",get:function get(){return Hr.LoadResources?Yr:null}}]),e}();M._RF.pop(),M._RF.push({},"617b2SRAL5CyL75C998xBnx","ScreenManager",void 0);var Kr=Ludex,jr=Kr.Events,Xr=Kr.Utils,Zr=Xr.Object,Jr=Xr.Valid,ei=Xr.Time,ti=codex,ni=ti.event,ai=ti.monitorError;function ri(e){return"ready"===e.state?(e.screen.node.removeFromParent(),e.screen.node.destroy(),{state:"prefab",order:e.order,name:e.name,prefab:e.prefab,useCount:e.useCount}):"prefab"===e.state?v({},e):{state:"queued",order:e.order,name:e.name}}var ii=function(){function e(){var _$e,_$e1,_$e2,_$e3,_$e4,t=this;i(this,e),this.screens$={},this.onPrefabReadyCallbacks$={},this.bindEventHandlers$=function(){ni.on(jr.OPEN_SCREEN,t.handleOpenScreen$),ni.on(jr.CLOSE_SCREEN,t.handleCloseScreen$),ni.on(jr.PRELOAD_SCREEN,t.handlePreloadScreen$),ni.on(jr.PRELOAD_SCREENS,t.handlePreloadScreens$),ni.on(jr.SWITCH_SCENE,t.handleSwitchScene$),P.on("DEBUG_REQUEST_SCREEN_STATES",t.handleRequestScreenStates$)},this.handleRequestScreenStates$=function(){var _$e=t.screens$;P.emit("DEBUG_SCREEN_STATES",_$e)},this.handleOpenScreen$=function(e){t.openScreen(e.screenName,e.screenData)},this.handleCloseScreen$=function(e){t.closeScreen(e.screenName,!0)},this.handlePreloadScreen$=function(e){var n=e.screenName;t.addScreenQueues$([n]);var a=t.screens$[n];"queued"===(null==a?void 0:a.state)&&t.loadScreen$(a)},this.handlePreloadScreens$=function(){var _$e=q.getScene();t.validateScene$(_$e)&&(t.initScreens$(_$e),t.preloadScreens$())},this.handleSwitchScene$=function(){t.resetAllScreenParents$(),t.onPrefabReadyCallbacks$={}},this.resetAllScreenParents$=function(){for(var _$e in t.screens$){var n=t.screens$[_$e];void 0!==n&&(t.screens$[_$e]=ri(n))}},this.validateScene$=function(e){return!!e||(console.warn("No scene found for preloading screens"),!1)},this.initScreens$=function(e){var n=t.getScreenHolder$();if(null!=n&&n.enabled){var a,r=n.screens,i=p(r);try{for(i.s();!(a=i.n()).done;){var s=a.value,o=L[s.key];if(o){var c=t.screens$[o];t.screens$[o]=c?v(v({},c),{},{order:s.depth}):{state:"queued",order:s.depth,name:o}}}}catch(e){i.e(e)}finally{i.f()}var u=e.getComponentsInChildren("BaseScreen");if(!Jr.isEmpty(u)){var l=u.map(function(e){return null==e?void 0:e.node.name}).join(", ");console.info("\uD83D\uDCFA Active Screens in ".concat(e.name,": ").concat(l)),t.addScreens$(u)}}},this.getScreenHolder$=function(){var _$e,t=q.getScene();return null!=(_$e=null==t?void 0:t.getComponentInChildren("Screens"))?_$e:null},this.addScreens$=function(e){for(var n=0;n<e.length;n++){var a,r=e[n];if(r){var i=r.node.name;if(t.isScreenNameValid$(i)){var s=t.screens$[i],o=null!=(a=null==s?void 0:s.order)?a:0;t.screens$[i]={state:"ready",order:o,screen:r,prefab:r.node,name:i,useCount:0}}else console.warn("ScreenManager.addScreens: Invalid screen name ".concat(i))}else console.warn("ScreenManager.addScreens: Invalid screen ".concat(n))}t.reorderScreens$()},this.isScreenNameValid$=function(e){return Jr.isString(e)&&Zr.vals(L).includes(e)},this.addScreenQueues$=function(e){var n=t.getScreenHolder$();if(null!=n&&n.isValid){var a,r=p(e);try{for(r.s();!(a=r.n()).done;){var i=a.value;t.isScreenNameValid$(i)?void 0===t.screens$[i]&&(t.screens$[i]={state:"queued",order:0,name:i}):console.warn("ScreenManager.addScreenQueues: Invalid screen name ".concat(i))}}catch(e){r.e(e)}finally{r.f()}}else console.warn("ScreenManager.addScreenQueues: No valid screen holder found")},this.loadScreen$=(_$e=n(a().mark(function e(n){var r;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.screens$[n.name]=v(v({},n),{},{state:"loading"}),ni.emit(jr.LOADING_SCREEN,{screenName:n.name}),e.next=5,b.loadPrefabAsync("screens/".concat(n.name));case 5:if(null!==(r=e.sent)){e.next=8;break}throw Error("ScreenManager.loadScreen: Failed to load prefab: ".concat(n.name));case 8:t.screens$[n.name]=v(v({},n),{},{state:"prefab",prefab:r,useCount:0}),console.debug("ScreenManager.loadScreen: ".concat(n.name," loaded successfully")),ni.emit(jr.SCREEN_LOADED,{screenName:n.name}),t.emitPrefabReady$(n.name),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),console.warn("ScreenManager.loadScreen: Failed to load ".concat(n.name),e.t0),t.screens$[n.name]={state:"queued",order:n.order,name:n.name};case 18:case"end":return e.stop()}},e,null,[[0,14]])})),function(t){return _$e.apply(this,arguments)}),this.preloadScreens$=function(){var _$e=t.getScreenHolder$();if(null!=_$e&&_$e.isValid&&null!=_$e&&_$e.autoPreload){var n,a=Object.values(t.screens$).sort(function(e,t){return e.order-t.order}),r=p(a);try{for(r.s();!(n=r.n()).done;){var i=n.value;"queued"===i.state&&t.loadScreen$(i)}}catch(e){r.e(e)}finally{r.f()}}},this.getScreen$=(_$e1=n(a().mark(function e(n){var r,i,s;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(r=t.getScreenHolder$())&&r.isValid){e.next=3;break}throw Error("ScreenManager.getScreen: Invalid screen holder");case 3:if("ready"!==n.state){e.next=5;break}return e.abrupt("return",n.screen);case 5:if(_instanceof(n.prefab,oe)){e.next=7;break}throw Error("ScreenManager.getScreen: Invalid prefab ".concat(n.name));case 7:if((i=se(n.prefab)).name=n.name,s=i.getComponent("BaseScreen")){e.next=12;break}throw Error("ScreenManager.getScreen: Invalid screen ".concat(n.name));case 12:return r.node.addChild(i),i.active=!1,t.screens$[n.name]=v(v({},n),{},{state:"ready",screen:s}),t.reorderScreens$(),console.debug("ScreenManager.getScreen: Retrieved ".concat(n.name),n),e.abrupt("return",s);case 18:case"end":return e.stop()}},e)})),function(t){return _$e1.apply(this,arguments)}),this.reorderScreens$=function(){var _$e=[];for(var n in t.screens$){var a=t.screens$[n];"ready"===(null==a?void 0:a.state)&&null!=a&&a.screen.isValid&&_$e.push(a)}_$e.sort(function(e,t){return e.order-t.order});for(var r=0;r<_$e.length;r++){var i,s=_$e[r];null!=s&&null!=(i=s.screen)&&i.isValid&&s.screen.node.setSiblingIndex(r)}},this.openScreen=(_$e2=n(a().mark(function e(n,r){var i,s;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.isScreenNameValid$(n)){e.next=2;break}return e.abrupt("return");case 2:if(void 0!==(i=t.getOrTryAddScreen$(n))){e.next=6;break}return console.warn("ScreenManager.openScreen: Screen ".concat(n," not found")),e.abrupt("return");case 6:if("ready"===i.state||"prefab"===i.state){e.next=11;break}return"queued"===i.state&&t.loadScreen$(i),e.next=10,t.queueScreen$(n,r);case 10:return e.abrupt("return",e.sent);case 11:return e.prev=11,T.setBlockInput(!0),e.next=15,t.getScreen$(i);case 15:if(null!=(s=e.sent)&&s.isValid){e.next=18;break}throw Error("ScreenManager.performScreenOpen: Invalid screen ".concat(n));case 18:return t.incrementUseCount$(n),e.next=21,t.showScreen$(s,n,r);case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(11),console.error("ScreenManager.openScreen: Error opening ".concat(n),e.t0);case 26:return e.prev=26,T.setBlockInput(!1),e.finish(26);case 29:case"end":return e.stop()}},e,null,[[11,23,26,29]])})),function(t,n){return _$e2.apply(this,arguments)}),this.queueScreen$=function(e,r){console.debug("ScreenManager.queueScreen: Queuing ".concat(e));var i,s=null!=(i=t.onPrefabReadyCallbacks$[e])?i:[];return new Promise(function(i){var s1,o=(s1=n(a().mark(function n(){return a().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.openScreen(e,r);case 2:i();case 3:case"end":return n.stop()}},n)})),function(){return s1.apply(this,arguments)});t.onPrefabReadyCallbacks$[e]=[].concat(g(s),[o])})},this.incrementUseCount$=function(e){var n=t.screens$[e];"ready"!==(null==n?void 0:n.state)&&"prefab"!==(null==n?void 0:n.state)||(t.screens$[e]=v(v({},n),{},{useCount:n.useCount+1}))},this.showScreen$=(_$e3=n(a().mark(function e(n,r,i){var s;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s={screenName:r,screenData:i},ni.emit(jr.OPENING_SCREEN,s),e.next=4,ei.sleepAsync(0);case 4:n.node.active=!0,n.open(i),t.updateAnalytics$(r),t.reorderScreens$();case 8:case"end":return e.stop()}},e)})),function(t,n,a){return _$e3.apply(this,arguments)}),this.closeScreen=(_$e4=n(a().mark(function e(n){var r,i,s=arguments;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>1&&void 0!==s[1]&&s[1],t.isScreenNameValid$(n)){e.next=3;break}return e.abrupt("return");case 3:if(void 0!==(i=t.screens$[n])){e.next=7;break}return console.debug("ScreenManager.closeScreen: Screen ".concat(n," not found")),e.abrupt("return");case 7:if("ready"===i.state){e.next=11;break}return console.debug("ScreenManager.closeScreen: ".concat(n," is not ready")),delete t.onPrefabReadyCallbacks$[n],e.abrupt("return");case 11:if(e.prev=11,i.screen.isValid&&i.screen.node.active){e.next=14;break}return e.abrupt("return");case 14:ni.emit(jr.CLOSING_SCREEN,{screenName:n}),i.screen.close(),r&&t.updateAnalytics$(n,!1),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(11),console.error("ScreenManager.closeScreen: Error closing ".concat(n),e.t0);case 22:case"end":return e.stop()}},e,null,[[11,19]])})),function(t){return _$e4.apply(this,arguments)}),this.updateAnalytics$=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];R.trackCurrentPage(e,t),t?null==ai||ai.addMetadata({currentScreen:e}):null==ai||ai.removeMetadata("currentScreen")},this.closeAllScreens=function(){for(var _$e in t.screens$)t.closeScreen(_$e,!1)},this.getOrTryAddScreen$=function(e){var n=t.screens$[e];return void 0===n?(console.debug("ScreenManager.getOrTryAddScreen: Adding new screen (".concat(e,") to queue")),t.addScreenQueues$([e]),t.screens$[e]):n},this.emitPrefabReady$=function(e){var n,a,r=null!=(n=t.onPrefabReadyCallbacks$[e])?n:[],i=p(r);try{for(i.s();!(a=i.n()).done;)(0,a.value)()}catch(e){i.e(e)}finally{i.f()}delete t.onPrefabReadyCallbacks$[e]}}return t(e,[{key:"init",value:function value(){this.bindEventHandlers$(),console.debug("Screen Manager: Initialized")}}]),e}();M._RF.pop(),M._RF.push({},"9d892ZsSyxHSITF2VHJ1zpy","LudosSystem",void 0);var si,oi=Ludex,ci=oi.Configs,ui=ci.Core,li=ci.Ads,di=ci.Match,pi=ci.Player,hi=ci.GameEngine.HybridFileCache,fi=oi.Events,mi=oi.Plugins.Analytics,gi=(void 0===mi?{}:mi).Events,vi=oi.Utils,$i=vi.Device,Si=vi.Time,yi=codex,wi=yi.context,Ei=yi.event,bi=yi.analytics,xi=yi.monitorError,Ai=t(function e(){var t=this;i(this,e),this.adsManager$=null,this.matchManager$=null,this.playerManager$=null,this.logEngineReady$=function(){Ei.catchUp(fi.ANALYTICS_READY,function(){gi&&bi.event(gi.ENGINE_READY)})},this.createManager$=function(){t.sceneManager$=new Wr,t.screenManager$=new ii,t.engineManager$=new Ge,t.layoutManager$=new Je,t.pluginsManager$=new Nr,li.Enabled&&(t.adsManager$=new De),di.Enabled&&(t.matchManager$=new rt),pi.Enabled&&(t.playerManager$=new lt)},this.initManagers$=function(){var _$e,n,a;t.sceneManager$.init(),t.screenManager$.init(),t.engineManager$.init(),t.layoutManager$.init(),t.pluginsManager$.init(),null==(_$e=t.adsManager$)||_$e.init(),null==(n=t.matchManager$)||n.init(),null==(a=t.playerManager$)||a.init()},this.listenEvents$=function(){Ei.catchUp(fi.CORE_BOOTING,t.handleWhenCoreBoot$),Ei.catchUp(fi.CORE_STARTING,t.handleWhenCoreStart$),Ei.catchUp(fi.CORE_READY,t.handleWhenCoreReady$),o.listenLayoutChanges(),t.sceneManager$.onSwitchScene(t.handleSwitchScene$)},this.handleWhenCoreBoot$=function(){console.warn("Ludos System: Core boot",{inited:P.inited,game:P}),P.inited?t.handleCocosInit$():P.once(ce.EVENT_GAME_INITED,t.handleCocosInit$)},this.handleCocosInit$=function(){window.debugComp="handleCocosInit",Ei.emit(fi.REQUEST_CORE_START)},this.handleWhenCoreStart$=function(){var _$e,n;window.debugComp="handleWhenCoreStart",null==(_$e=t.playerManager$)||_$e.setupDefaultGameData(),null==(n=t.matchManager$)||n.setupDefaultMatchData()},this.handleWhenCoreReady$=function(){var _$e;window.debugComp="handleWhenCoreReady",hi.Enabled||Ei.emit(fi.BUNDLE_READY),t.initPlugins$(),null==(_$e=t.playerManager$)||_$e.syncPlatformPlayerData(),gi&&bi.event(gi.LOAD_START),Ei.catchUp(fi.BUNDLE_READY,t.processPreStartGame$)},this.processPreStartGame$=function(){window.debugComp="processPreStartGame",Ei.catchUp(fi.SCENE_LOADED,t.preloadScenes$),Ei.catchUp(fi.SCENE_LAUNCHED,t.processBootSceneLaunched$),t.runBootScene$()},this.processBootSceneLaunched$=n(a().mark(function e(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.debugComp="processBootSceneLaunched",!ui.StartSDKAfterLoadGame){e.next=4;break}return e.next=4,Ei.waitTo(fi.SCENE_LOADED);case 4:return window.debugComp="waitSDKInitiatedAsync",e.next=7,GameSDK.extra.waitSDKInitiatedAsync();case 7:if(window.debugComp="waitSDKInitiatedAsync complete",console.debug("Game paused",P.isPaused()),!P.isPaused()){e.next=12;break}return e.next=12,t.waitGameResume$();case 12:t.processStartGame$();case 13:case"end":return e.stop()}},e)})),this.waitGameResume$=n(a().mark(function e(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return window.debugComp="waitGameResume",e.abrupt("return",new Promise(function(e){P.once(ce.EVENT_RESUME,e)}));case 2:case"end":return e.stop()}},e)})),this.runBootScene$=function(){k.switchScene(C.BOOT_SCENE)},this.preloadScenes$=function(){window.debugComp="preloadScenes",GameSDK.isGameSDK("Playable")||("solo"===wi.getSessionContextType()?k.preloadDashboardScene():k.preloadGameScene())},this.processStartGame$=n(a().mark(function e(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return window.debugComp="processStartGame",console.groupEnd(),gi&&bi.event(gi.LOAD_COMPLETE),Ei.catchUp(fi.PLAYER_INFO_LOADED,t.startProcessContextData$),e.next=6,Ei.waitTo(fi.SCENE_RENDERED,1e3).catch(function(){});case 6:return e.next=8,Si.sleepAsync(100);case 8:return Ei.emit("custom"),e.next=11,t.startGameAsync$();case 11:case"end":return e.stop()}},e)})),this.handleSwitchScene$=function(){window.debugComp="handleSwitchScene",D.preloadScreens(),console.groupEnd()},this.startGameAsync$=n(a().mark(function e(){var n,r=arguments;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>0&&void 0!==r[0]?r[0]:0,window.debugComp="startGameAsync",e.prev=2,e.next=5,GameSDK.startGameAsync();case 5:e.next=11;break;case 7:e.prev=7,e.t0=e.catch(2),console.warn("GameSDK.startGameAsync",e.t0),n<=3?setTimeout(function(){t.startGameAsync$(n+1)},1e3):null==xi||xi.sendException(_instanceof(e.t0,Error)?e.t0:Error(JSON.stringify(e.t0)));case 11:case"end":return e.stop()}},e,null,[[2,7]])})),this.startProcessContextData$=n(a().mark(function e(){var n;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return window.debugComp="startProcessContextData",gi&&bi.event(gi.APP_READY),e.prev=2,null==(n=t.playerManager$)||n.requestConnectedPlayers(),F.applyCustomFlows(),e.next=7,wi.processContextData();case 7:e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),console.error("startProcessContextData",e.t0),_instanceof(e.t0,Error)&&(null==xi||xi.sendException(e.t0));case 13:return e.prev=13,Ei.emit(fi.GAME_READY),t.trackDeviceInfo$("begin"),window.addEventListener("beforeunload",function(){t.trackDeviceInfo$("end")}),e.finish(13);case 18:case"end":return e.stop()}},e,null,[[2,9,13,18]])})),this.initPlugins$=function(){window.debugComp="initPlugins",t.pluginsManager$.initLanguages(),t.pluginsManager$.initFrameCapture(),t.pluginsManager$.initDailyRewards(),t.pluginsManager$.initLeaderboards(),t.pluginsManager$.initDynamicAtlas(),t.pluginsManager$.initDynamicAssets(),t.pluginsManager$.initCanvasRecorder(),t.pluginsManager$.initPerformanceMonitor(),t.pluginsManager$.initAdaptivePerformance()},this.getDeviceInfo$=function(e){try{var t=$i.isES5(),n=$i.heapMemory(),a=$i.pixelRatio(),r=$i.audioState(),i=$i.orientation(),s=$i.gpuRenderer(),o=$i.isSupportWebp();return{log_type:e,is_es5:t,pixel_ratio:a,sdk_platform:GameSDK.getPlatform(),screen_orientation:i,audio_state:r,heap_memory:n,support_webp:o,gpu_renderer:s,webgl_version:$i.webglVersion(),max_texture_size:$i.maxTextureSize(),hardware_concurrency:$i.hardwareConcurrency()}}catch(e){return console.warn("Error getting device info",e),null}},this.trackDeviceInfo$=function(e){var n=t.getDeviceInfo$(e);n&&R.trackDeviceInfo(n)},window.debugComp="LudosSystem constructor",console.groupCollapsed("\uD83D\uDCE6 Ludos System"),this.logEngineReady$(),this.createManager$(),this.initManagers$(),this.listenEvents$(),console.groupEnd(),window.__sdkLoad.ensure(10)});window.debugComp="245",new Ai,M._RF.pop(),M._RF.push({},"c7df3pBHqRChZTjXMfWIy6H","Optimized2DPipeline",void 0);var Ci=ue.ccclass,Di=ue.executeInEditMode,Ri="Optimized2DPipeline",ki="default",Li=le.SceneFlags.UI|le.SceneFlags.BLEND|le.SceneFlags.OPAQUE|le.SceneFlags.DRAW_INSTANCING,Ti=function(){function e(){var t=this;i(this,e),this.clearColor$=new de.Color(0,0,0,1),this.viewport$=new de.Viewport,this.lightInfo$=new le.LightInfo,this.isValidCamera$=function(e){return!(null==e||!e.scene||null==e||!e.window)},this.syncViewport$=function(e,n,a){var r=e.viewport;t.viewport$.left=r.x*n,t.viewport$.top=r.y*a,t.viewport$.width=r.z*n,t.viewport$.height=r.w*a},this.syncClearColor$=function(e){var n=e.clearColor;t.clearColor$.x=n.x,t.clearColor$.y=n.y,t.clearColor$.z=n.z,t.clearColor$.w=n.w}}return t(e,[{key:"setup",value:function value(e,t){for(var n=0;n<e.length;n++){var a=e[n];if(this.isValidCamera$(a)){var r=a.window,i=Math.max(Math.floor(r.width),1),s=Math.max(Math.floor(r.height),1),o="Color".concat(r.renderWindowId);t.addRenderWindow(o,de.Format.RGBA8,i,s,r),this.syncViewport$(a,i,s),this.syncClearColor$(a);var c=t.addRenderPass(i,s,ki);c.setViewport(this.viewport$);var u=a.clearFlag&de.ClearFlagBit.COLOR?de.LoadOp.CLEAR:de.LoadOp.LOAD;a.clearFlag&de.ClearFlagBit.COLOR&&(this.clearColor$.x=a.clearColor.x,this.clearColor$.y=a.clearColor.y,this.clearColor$.z=a.clearColor.z,this.clearColor$.w=a.clearColor.w),c.addRenderTarget(o,u,de.StoreOp.STORE,this.clearColor$),c.addQueue(le.QueueHint.BLEND,ki).addSceneOfCamera(a,this.lightInfo$,Li)}}}}]),e}();if(le){var Fi=new Ti;le.setCustomPipeline(Ri,Fi),console.info("[".concat(Ri,"] Registered successfully."))}Ci("Optimized2DPipeline")(si=Di(si=function(e){_(a,e);var n=I(a);function a(){return i(this,a),n.apply(this,arguments)}return t(a,[{key:"start",value:function value(){}}]),a}(pe))||si),M._RF.pop(),M._RF.push({},"a3a11eRcsNI5aahAZL2xA8X","ScreenEntry",void 0),M._RF.pop()}}});System.register("virtual:///prerequisite-imports/systems",["chunks:///systems.js"],function(_export,_context){return{setters:[function(_m){var _exportObj={};for(var _key in _m)"default"!==_key&&"__esModule"!==_key&&(_exportObj[_key]=_m[_key]);_export(_exportObj)}],execute:function execute(){}}});