function _instanceof(left, right) {
    return null != right && "u" > typeof Symbol && right[Symbol.hasInstance] ? !!right[Symbol.hasInstance](left) : left instanceof right;
}
function _type_of(obj) {
    return obj && "u" > typeof Symbol && obj.constructor === Symbol ? "symbol" : typeof obj;
}
System.register([], function(t1, i) {
    return {
        execute: function execute() {
            function n(t1, i) {
                for(var n = 0; n < i.length; n++){
                    var s = i[n];
                    s.enumerable = s.enumerable || !1, s.configurable = !0, "value" in s && (s.writable = !0), Object.defineProperty(t1, g(s.key), s);
                }
            }
            function s(t1, i, s) {
                return i && n(t1.prototype, i), s && n(t1, s), Object.defineProperty(t1, "prototype", {
                    writable: !1
                }), t1;
            }
            function r() {
                return (r = Object.assign ? Object.assign.bind() : function r(t1) {
                    for(var i = 1; i < arguments.length; i++){
                        var n = arguments[i];
                        for(var s in n)Object.prototype.hasOwnProperty.call(n, s) && (t1[s] = n[s]);
                    }
                    return t1;
                }).apply(this, arguments);
            }
            function h(t1, i) {
                t1.prototype = Object.create(i.prototype), t1.prototype.constructor = t1, u(t1, i);
            }
            function e(t1) {
                return (e = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function e(t1) {
                    return t1.__proto__ || Object.getPrototypeOf(t1);
                })(t1);
            }
            function u(t1, i) {
                return (u = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function u(t1, i) {
                    return t1.__proto__ = i, t1;
                })(t1, i);
            }
            function o() {
                if ("u" < typeof Reflect || !Reflect.construct || Reflect.construct.sham) return !1;
                if ("function" == typeof Proxy) return !0;
                try {
                    return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {})), !0;
                } catch (t1) {
                    return !1;
                }
            }
            function f(t1, i, n) {
                return (f = o() ? Reflect.construct.bind() : function f(t1, i, n) {
                    var s = [
                        null
                    ];
                    s.push.apply(s, i);
                    var _$r = new (Function.bind.apply(t1, s));
                    return n && u(_$r, n.prototype), _$r;
                }).apply(null, arguments);
            }
            function c(t1) {
                var i = "function" == typeof Map ? new Map : void 0;
                return (c = function c(t1) {
                    if (null === t1 || -1 === Function.toString.call(t1).indexOf("[native code]")) return t1;
                    if ("function" != typeof t1) throw TypeError("Super expression must either be null or a function");
                    if (void 0 !== i) {
                        if (i.has(t1)) return i.get(t1);
                        i.set(t1, s);
                    }
                    function s() {
                        return f(t1, arguments, e(this).constructor);
                    }
                    return s.prototype = Object.create(t1.prototype, {
                        constructor: {
                            value: s,
                            enumerable: !1,
                            writable: !0,
                            configurable: !0
                        }
                    }), u(s, t1);
                })(t1);
            }
            function a(t1) {
                if (void 0 === t1) throw ReferenceError("this hasn't been initialised - super() hasn't been called");
                return t1;
            }
            function v(t1, i) {
                if (t1) {
                    if ("string" == typeof t1) return l(t1, i);
                    var n = Object.prototype.toString.call(t1).slice(8, -1);
                    return "Object" === n && t1.constructor && (n = t1.constructor.name), "Map" === n || "Set" === n ? Array.from(t1) : "Arguments" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n) ? l(t1, i) : void 0;
                }
            }
            function l(t1, i) {
                (null == i || i > t1.length) && (i = t1.length);
                for(var n = 0, s = Array(i); n < i; n++)s[n] = t1[n];
                return s;
            }
            function d(t1, i) {
                var n = "u" > typeof Symbol && t1[Symbol.iterator] || t1["@@iterator"];
                if (n) return (n = n.call(t1)).next.bind(n);
                if (Array.isArray(t1) || (n = v(t1)) || i) {
                    n && (t1 = n);
                    var s = 0;
                    return function() {
                        return s >= t1.length ? {
                            done: !0
                        } : {
                            done: !1,
                            value: t1[s++]
                        };
                    };
                }
                throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
            }
            function w(t1, i) {
                if ("object" != (void 0 === t1 ? "undefined" : _type_of(t1)) || null === t1) return t1;
                var n = t1[Symbol.toPrimitive];
                if (void 0 !== n) {
                    var s = n.call(t1, i);
                    if ("object" != (void 0 === s ? "undefined" : _type_of(s))) return s;
                    throw TypeError("@@toPrimitive must return a primitive value.");
                }
                return String(t1);
            }
            function g(t1) {
                var i = w(t1, "string");
                return "symbol" == (void 0 === i ? "undefined" : _type_of(i)) ? i : String(i);
            }
            function p(t1, i, n, s) {
                n && Object.defineProperty(t1, i, {
                    enumerable: n.enumerable,
                    configurable: n.configurable,
                    writable: n.writable,
                    value: n.initializer ? n.initializer.call(s) : void 0
                });
            }
            function y(t1, i, n, s, r) {
                var h = {};
                return Object.keys(s).forEach(function(t1) {
                    h[t1] = s[t1];
                }), h.enumerable = !!h.enumerable, h.configurable = !!h.configurable, ("value" in h || h.initializer) && (h.writable = !0), h = n.slice().reverse().reduce(function(n, s) {
                    return s(t1, i, n) || n;
                }, h), r && void 0 !== h.initializer && (h.value = h.initializer ? h.initializer.call(r) : void 0, h.initializer = void 0), void 0 === h.initializer && (Object.defineProperty(t1, i, h), h = null), h;
            }
            function _(t1, i) {
                var n = "u" < typeof window ? global : window;
                return void 0 === n[t1] ? n[t1] = i : n[t1];
            }
            t1({
                D: OD,
                E: ID,
                G: RD,
                J: MD,
                K: function K(t1) {
                    return ED.test(t1);
                },
                N: function N(t1) {
                    return AD.test(t1);
                },
                P: function P(t1) {
                    return ED.exec(t1);
                },
                Q: function Q(t1) {
                    return AD.exec(t1);
                },
                W: DD,
                _: d,
                a$: ts,
                a7: LV,
                a8: BV,
                aA: th,
                aC: rh,
                aE: Kr,
                aJ: Bn,
                aK: Fn,
                aL: Un,
                aM: xn,
                aN: jn,
                aO: Gn,
                aP: Hn,
                aQ: Vn,
                aR: Wn,
                aS: zn,
                aT: $n,
                aU: Xn,
                aV: qn,
                aW: Yn,
                aX: Kn,
                aY: Jn,
                aZ: Qn,
                a_: Zn,
                aa: function aa(t1, i) {
                    for(var n = t1, s = ""; null !== n && n !== i;)s = n.name + "/" + s, n = n.parent;
                    return s.slice(0, -1);
                },
                ab: function ab(t1, i, n) {
                    for(cr.identity(n); t1 !== i;)cr.fromRTS(E$, t1.rotation, t1.position, t1.scale), cr.multiply(n, E$, n), t1 = t1.parent;
                    return n;
                },
                ap: Ir,
                ar: Os,
                at: Vr,
                av: ir,
                ay: lr,
                b0: is,
                b1: ns,
                b2: os,
                b3: fs,
                b9: li,
                bD: function bD(t1) {
                    return t1[Io];
                },
                bG: ne,
                bI: X,
                bJ: V,
                bK: z,
                bL: W,
                bM: $,
                bN: tt,
                bO: Q,
                bP: rt,
                bQ: nt,
                bR: et,
                bS: ft,
                bT: ct,
                bU: ot,
                ba: gi,
                bb: _i,
                bg: function bg(t1) {
                    t1 > 0 && (fv = t1);
                },
                bk: function bk(t1) {
                    for(var i in t1){
                        var n = t1[i];
                        lv[i] = n;
                    }
                },
                bl: function bl(t1) {
                    for(var i, n = d(t1); !(i = n()).done;)dv(i.value);
                },
                bm: function bm(t1) {
                    return vv || (vv = "u" < typeof Proxy ? {} : new Proxy(t1, {
                        get: function get(t1, i, n) {
                            return dv(i), Reflect.get(t1, i, n);
                        }
                    })), vv;
                },
                bn: gv,
                bo: pv,
                br: An,
                bs: En,
                cB: Xh,
                cC: qh,
                cF: function cF(t1, i) {
                    i.forEach(function(i) {
                        Object.getOwnPropertyNames(i.prototype).forEach(function(n) {
                            "constructor" !== n && Object.defineProperty(t1.prototype, n, Object.getOwnPropertyDescriptor(i.prototype, n));
                        });
                    });
                },
                cG: q,
                cH: function cH(t1, i) {
                    return Zu(t1, i, 0);
                },
                cI: Zu,
                cJ: function cJ(t1, i, n) {
                    for(var s = 0, _$r = t1.length - 1, h = _$r >>> 1; s <= _$r; h = s + _$r >>> 1){
                        var e = t1[h];
                        if (0 > n(e, i)) _$r = h - 1;
                        else {
                            if (!(n(e, i) > 0)) return h;
                            s = h + 1;
                        }
                    }
                    return ~s;
                },
                cK: function cK() {},
                cL: function cL() {},
                cM: di,
                cN: Pv,
                c_: LC,
                cf: Iv,
                cg: Yc,
                ch: va,
                cs: Mo,
                cu: function cu(t1, i, n) {
                    if (di(t1, i), di(t1, n), i === n) return t1;
                    var s = t1[i];
                    if (i < n) for(var _$r = i + 1; _$r <= n; ++_$r)t1[_$r - 1] = t1[_$r];
                    else for(var h = i; h !== n; --h)t1[h] = t1[h - 1];
                    return t1[n] = s, t1;
                },
                cx: fn,
                cy: cn,
                du: Vp,
                dw: wX,
                eM: yit,
                eR: Mnt,
                eS: Cnt,
                w: wD,
                y: TD,
                z: SD
            }), _("CC_WECHAT", !1), _("CC_XIAOMI", !1), _("CC_ALIPAY", !1), _("CC_BYTEDANCE", !1), _("CC_OPPO", !1), _("CC_VIVO", !1), _("CC_HUAWEI", !1), _("CC_MIGU", !1), _("CC_HONOR", !1), _("CC_COCOS_RUNTIME", !1), _("CC_EDITOR", !1), _("CC_PREVIEW", !1), _("CC_BUILD", !0), _("CC_TEST", !1), _("CC_DEBUG", !1), _("CC_DEV", !1), _("CC_MINIGAME", !1), _("CC_RUNTIME_BASED", !1), _("CC_SUPPORT_JIT", !0), _("CC_JSB", !1);
            var rot, hot, eot, uot, k = "u" < typeof window ? global : window, A = t1("am", {
                _global: k
            });
            A.internal = {};
            var T = t1("al", "3.8.7");
            k.CocosEngine = A.ENGINE_VERSION = T, k.cc = A;
            var S = void 0 !== globalThis.jsb && void 0 !== jsb.window ? jsb.window : globalThis;
            function O(t1, i) {
                return t1 ^ (t1 ^ i) & -(t1 < i);
            }
            function I(t1) {
                var i, n;
                return i = (t1 > 65535) << 4, i |= n = ((t1 >>>= i) > 255) << 3, i |= n = ((t1 >>>= n) > 15) << 2, (i |= n = ((t1 >>>= n) > 3) << 1) | (t1 >>>= n) >> 1;
            }
            function R(t1) {
                return 16843009 * ((t1 = (858993459 & (t1 -= t1 >>> 1 & 1431655765)) + (t1 >>> 2 & 858993459)) + (t1 >>> 4) & 252645135) >>> 24;
            }
            function M(t1) {
                var i = 32;
                return (t1 &= -t1) && i--, 65535 & t1 && (i -= 16), 16711935 & t1 && (i -= 8), 252645135 & t1 && (i -= 4), 858993459 & t1 && (i -= 2), 1431655765 & t1 && (i -= 1), i;
            }
            function C(t1) {
                return --t1, t1 |= t1 >>> 1, t1 |= t1 >>> 2, t1 |= t1 >>> 4, t1 |= t1 >>> 8, 1 + (t1 |= t1 >>> 16);
            }
            k.ccwindow = S;
            for(var N = Array(256), i1 = 0; i1 < 256; ++i1){
                var n1 = i1, s1 = i1, _$r = 7;
                for(n1 >>>= 1; n1; n1 >>>= 1)s1 <<= 1, s1 |= 1 & n1, --_$r;
                N[i1] = s1 << _$r & 255;
            }
            var P = Object.freeze({
                __proto__: null,
                INT_BITS: 32,
                INT_MAX: 2147483647,
                INT_MIN: -2147483648,
                abs: function abs(t1) {
                    var i = t1 >> 31;
                    return (t1 ^ i) - i;
                },
                countTrailingZeros: M,
                deinterleave2: function deinterleave2(t1, i) {
                    return (t1 = 65535 & ((t1 = 16711935 & ((t1 = 252645135 & ((t1 = 858993459 & ((t1 = t1 >>> i & 1431655765) | t1 >>> 1)) | t1 >>> 2)) | t1 >>> 4)) | t1 >>> 16)) << 16 >> 16;
                },
                deinterleave3: function deinterleave3(t1, i) {
                    return (t1 = 1023 & ((t1 = 4278190335 & ((t1 = 251719695 & ((t1 = 3272356035 & ((t1 = t1 >>> i & 1227133513) | t1 >>> 2)) | t1 >>> 4)) | t1 >>> 8)) | t1 >>> 16)) << 22 >> 22;
                },
                interleave2: function interleave2(t1, i) {
                    return (t1 = 1431655765 & ((t1 = 858993459 & ((t1 = 252645135 & ((t1 = 16711935 & ((t1 &= 65535) | t1 << 8)) | t1 << 4)) | t1 << 2)) | t1 << 1)) | (i = 1431655765 & ((i = 858993459 & ((i = 252645135 & ((i = 16711935 & ((i &= 65535) | i << 8)) | i << 4)) | i << 2)) | i << 1)) << 1;
                },
                interleave3: function interleave3(t1, i, n) {
                    return (t1 = 1227133513 & ((t1 = 3272356035 & ((t1 = 251719695 & ((t1 = 4278190335 & ((t1 &= 1023) | t1 << 16)) | t1 << 8)) | t1 << 4)) | t1 << 2) | (i = 1227133513 & ((i = 3272356035 & ((i = 251719695 & ((i = 4278190335 & ((i &= 1023) | i << 16)) | i << 8)) | i << 4)) | i << 2)) << 1) | (n = 1227133513 & ((n = 3272356035 & ((n = 251719695 & ((n = 4278190335 & ((n &= 1023) | n << 16)) | n << 8)) | n << 4)) | n << 2)) << 2;
                },
                isPow2: function isPow2(t1) {
                    return !(t1 & t1 - 1 || !t1);
                },
                log10: function log10(t1) {
                    return t1 >= 1e9 ? 9 : t1 >= 1e8 ? 8 : t1 >= 1e7 ? 7 : t1 >= 1e6 ? 6 : t1 >= 1e5 ? 5 : t1 >= 1e4 ? 4 : t1 >= 1e3 ? 3 : t1 >= 100 ? 2 : +(t1 >= 10);
                },
                log2: I,
                max: O,
                min: function min(t1, i) {
                    return i ^ (t1 ^ i) & -(t1 < i);
                },
                nextCombination: function nextCombination(t1) {
                    var i = t1 | t1 - 1;
                    return i + 1 | (~i & -~i) - 1 >>> M(t1) + 1;
                },
                nextPow2: C,
                parity: function parity(t1) {
                    return t1 ^= t1 >>> 16, t1 ^= t1 >>> 8, t1 ^= t1 >>> 4, 27030 >>> (t1 &= 15) & 1;
                },
                popCount: R,
                prevPow2: function prevPow2(t1) {
                    return t1 |= t1 >>> 1, t1 |= t1 >>> 2, t1 |= t1 >>> 4, t1 |= t1 >>> 8, (t1 |= t1 >>> 16) - (t1 >>> 1);
                },
                reverse: function reverse(t1) {
                    return N[255 & t1] << 24 | N[t1 >>> 8 & 255] << 16 | N[t1 >>> 16 & 255] << 8 | N[t1 >>> 24 & 255];
                },
                sign: function sign(t1) {
                    return (t1 > 0) - (t1 < 0);
                }
            });
            t1("an", P);
            var D = S.document, L = "https://github.com/cocos/cocos-engine/blob/" + T + "/EngineErrorMap.md", B = null, F = console.log.bind(console), U = F, x = F, j = function j(t1, i) {
                if (!t1) {
                    for(var n = arguments.length, s = Array(n > 2 ? n - 2 : 0), _$r = 2; _$r < n; _$r++)s[_$r - 2] = arguments[_$r];
                    console.log("ASSERT: " + H.apply(void 0, [
                        i
                    ].concat(s)));
                }
            }, G = F;
            function H() {
                for(var _$t = arguments.length, i = Array(_$t), n = 0; n < _$t; n++)i[n] = arguments[n];
                return A.js.formatStr.apply(null, i);
            }
            function V() {
                return F.apply(void 0, arguments);
            }
            function W() {
                return U.apply(void 0, arguments);
            }
            function z() {
                return x.apply(void 0, arguments);
            }
            function $(t1, i) {
                for(var n = arguments.length, s = Array(n > 2 ? n - 2 : 0), _$r = 2; _$r < n; _$r++)s[_$r - 2] = arguments[_$r];
                return j.apply(void 0, [
                    t1,
                    i
                ].concat(s));
            }
            function X() {
                return G.apply(void 0, arguments);
            }
            function q(t1) {
                if (F = U = x = j = G = function G() {}, 0 !== t1) {
                    if (t1 > 4) {
                        var i = function i(t1) {
                            if (A.game.canvas) {
                                if (!B) {
                                    var i = D.createElement("Div");
                                    i.setAttribute("id", "logInfoDiv"), i.setAttribute("width", "200");
                                    var n = A.game.canvas.height;
                                    i.setAttribute("height", "" + n);
                                    var s = i.style;
                                    s.zIndex = "99999", s.position = "absolute", s.top = s.left = "0", (B = D.createElement("textarea")).setAttribute("rows", "20"), B.setAttribute("cols", "30"), B.setAttribute("disabled", "true");
                                    var _$r = B.style;
                                    _$r.backgroundColor = "transparent", _$r.borderBottom = "1px solid #cccccc", _$r.borderTopWidth = _$r.borderLeftWidth = _$r.borderRightWidth = "0px", _$r.borderTopStyle = _$r.borderLeftStyle = _$r.borderRightStyle = "none", _$r.padding = "0px", _$r.margin = "0px", i.appendChild(B), A.game.canvas.parentNode.appendChild(i);
                                }
                                B.value = B.value + t1 + "\r\n", B.scrollTop = B.scrollHeight;
                            }
                        };
                        x = function x() {
                            i("ERROR :  " + H.apply(void 0, arguments));
                        }, j = function j(t1, n) {
                            if (!t1) {
                                for(var s = arguments.length, _$r = Array(s > 2 ? s - 2 : 0), h = 2; h < s; h++)_$r[h - 2] = arguments[h];
                                i("ASSERT: " + H.apply(void 0, [
                                    n
                                ].concat(_$r)));
                            }
                        }, 7 !== t1 && (U = function U() {
                            i("WARN :  " + H.apply(void 0, arguments));
                        }), 5 === t1 && (F = function F() {
                            i(H.apply(void 0, arguments));
                        });
                    } else console && (console.error || (console.error = console.log), console.warn || (console.warn = console.log), x = console.error.bind ? console.error.bind(console) : function x() {
                        for(var _$t = arguments.length, i = Array(_$t), n = 0; n < _$t; n++)i[n] = arguments[n];
                        return console.error.apply(console, i);
                    }, j = function j(t1, i) {
                        if (!t1) {
                            for(var n = arguments.length, s = Array(n > 2 ? n - 2 : 0), _$r = 2; _$r < n; _$r++)s[_$r - 2] = arguments[_$r];
                            throw Error(H.apply(void 0, [
                                i
                            ].concat(s)));
                        }
                    });
                    if (4 !== t1 && (U = console.warn.bind ? console.warn.bind(console) : function U() {
                        for(var _$t = arguments.length, i = Array(_$t), n = 0; n < _$t; n++)i[n] = arguments[n];
                        return console.warn.apply(console, i);
                    }), t1 <= 2 && (F = console.log.bind ? console.log.bind(console) : function F() {
                        for(var _$t = arguments.length, i = Array(_$t), n = 0; n < _$t; n++)i[n] = arguments[n];
                        return console.log.apply(console, i);
                    }), t1 <= 1 && "function" == typeof console.debug) {
                        var n = console.debug.bind(console);
                        G = function G() {
                            return n.apply(void 0, arguments);
                        };
                    }
                }
            }
            function Y(t1) {
                z(t1.stack || t1);
            }
            function K(t1) {
                return function(i) {
                    for(var n = t1 + " " + i + ", please go to " + L + "#" + i + " to see details.", s = arguments.length, _$r = Array(s > 1 ? s - 1 : 0), h = 1; h < s; h++)_$r[h - 1] = arguments[h];
                    return 0 === _$r.length ? n : n + " Arguments: " + _$r.join(", ");
                };
            }
            var J = K("Log");
            function Q(t1) {
                for(var i = arguments.length, n = Array(i > 1 ? i - 1 : 0), s = 1; s < i; s++)n[s - 1] = arguments[s];
                V(J.apply(void 0, [
                    t1
                ].concat(n)));
            }
            var Z = K("Debug");
            function tt(t1) {
                for(var i = arguments.length, n = Array(i > 1 ? i - 1 : 0), s = 1; s < i; s++)n[s - 1] = arguments[s];
                X(Z.apply(void 0, [
                    t1
                ].concat(n)));
            }
            var it = K("Warning");
            function nt(t1) {
                for(var i = arguments.length, n = Array(i > 1 ? i - 1 : 0), s = 1; s < i; s++)n[s - 1] = arguments[s];
                W(it.apply(void 0, [
                    t1
                ].concat(n)));
            }
            var st = K("Error");
            function rt(t1) {
                for(var i = arguments.length, n = Array(i > 1 ? i - 1 : 0), s = 1; s < i; s++)n[s - 1] = arguments[s];
                z(st.apply(void 0, [
                    t1
                ].concat(n)));
            }
            var ht = K("Assert");
            function et(t1, i) {
                if (!t1) {
                    for(var n = arguments.length, s = Array(n > 2 ? n - 2 : 0), _$r = 2; _$r < n; _$r++)s[_$r - 2] = arguments[_$r];
                    $(!1, ht.apply(void 0, [
                        i
                    ].concat(s)));
                }
            }
            function ot(t1) {
                for(var i = arguments.length, n = Array(i > 1 ? i - 1 : 0), s = 1; s < i; s++)n[s - 1] = arguments[s];
                return st.apply(void 0, [
                    t1
                ].concat(n));
            }
            function ft() {
                return !!A.profiler && A.profiler.isShowingStats();
            }
            function ct(t1) {
                A.profiler && (t1 ? A.profiler.showStats() : A.profiler.hideStats());
            }
            var vt = Object.freeze({
                __proto__: null,
                DebugMode: t1("bV", {
                    NONE: 0,
                    VERBOSE: 1,
                    INFO: 2,
                    WARN: 3,
                    ERROR: 4,
                    INFO_FOR_WEB_PAGE: 5,
                    WARN_FOR_WEB_PAGE: 6,
                    ERROR_FOR_WEB_PAGE: 7
                }),
                _resetDebugSetting: q,
                _throw: Y,
                assert: $,
                assertID: et,
                debug: X,
                debugID: tt,
                error: z,
                errorID: rt,
                getError: ot,
                isDisplayStats: ft,
                log: V,
                logID: Q,
                setDisplayStats: ct,
                warn: W,
                warnID: nt
            }), lt = function() {
                function t1(t1) {
                    this.id = 0 | 998 * Math.random(), this.prefix = t1 ? t1 + "." : "";
                }
                return t1.prototype.getNewId = function() {
                    return this.prefix + (++this.id).toString();
                }, t1;
            }();
            lt.global = new lt("global");
            var dt = new lt("TmpCId."), wt = "u" < typeof Symbol ? "__aliases__" : Symbol("[[Aliases]]"), gt = "__classname__", pt = "__cid__";
            function yt(t1) {
                return "number" == typeof t1 || _instanceof(t1, Number);
            }
            function _t(t1) {
                return "string" == typeof t1 || _instanceof(t1, String);
            }
            function mt(t1) {
                for(var i in t1)return !1;
                return !0;
            }
            var _$t, _$t1, _$t2, bt, kt = (bt = {
                value: void 0,
                enumerable: !1,
                writable: !1,
                configurable: !0
            }, function kt(t1, i, n, s, r) {
                bt.value = n, bt.writable = s, bt.enumerable = r, Object.defineProperty(t1, i, bt), bt.value = void 0;
            }), At = (_$t = {
                get: void 0,
                set: void 0,
                enumerable: !1
            }, function(i, n, s, r, h, e) {
                void 0 === h && (h = !1), void 0 === e && (e = !1), "boolean" == typeof r && (Q(1031), h = r, r = void 0), _$t.get = s, _$t.set = r, _$t.enumerable = h, _$t.configurable = e, Object.defineProperty(i, n, _$t), _$t.get = void 0, _$t.set = void 0;
            }), Et = (_$t1 = {
                get: void 0,
                enumerable: !1,
                configurable: !1
            }, function(i, n, s, r, h) {
                _$t1.get = s, _$t1.enumerable = r, _$t1.configurable = h, Object.defineProperty(i, n, _$t1), _$t1.get = void 0;
            }), Tt = (_$t2 = {
                set: void 0,
                enumerable: !1,
                configurable: !1
            }, function(i, n, s, r, h) {
                _$t2.set = s, _$t2.enumerable = r, _$t2.configurable = h, Object.defineProperty(i, n, _$t2), _$t2.set = void 0;
            });
            function St(t1) {
                var i = Object.create(null);
                return t1 && (i["."] = 1, i["/"] = 1, delete i["."], delete i["/"]), i;
            }
            function Ot(t1) {
                if ("function" == typeof t1) {
                    var i = t1.prototype;
                    if (i && i.hasOwnProperty(gt) && i[gt]) return i[gt];
                    var n = "";
                    if (t1.name) n = t1.name;
                    else if (t1.toString) {
                        var s, _$r = t1.toString();
                        (s = "[" === _$r.charAt(0) ? /\[\w+\s*(\w+)\]/.exec(_$r) : /^function\s*(\w+)/.exec(_$r)) && 2 === s.length && (n = s[1]);
                    }
                    return "Object" !== n ? n : "";
                }
                return t1 && t1.constructor ? Ot(t1.constructor) : "";
            }
            function It(t1, i, n, s) {
                var _$r = /([^.]+)$/, h = _$r.exec(i)[0], e = _$r.exec(n)[0];
                function u() {
                    return this[e];
                }
                s ? At(t1, h, u, function(t1) {
                    this[e] = t1;
                }) : Et(t1, h, u);
            }
            function Rt(t1, i, n, s) {
                for(var _$r in n)It(t1, i + "." + _$r, n[_$r], s);
            }
            var Mt = /(%d)|(%s)/, Ct = /%s/;
            function Nt(t1) {
                for(var i = arguments.length, n = Array(i > 1 ? i - 1 : 0), s = 1; s < i; s++)n[s - 1] = arguments[s];
                if (0 == arguments.length) return "";
                if (0 === n.length) return "" + t1;
                if ("string" == typeof t1 && Mt.test(t1)) for(var _$r, h = d(n); !(_$r = h()).done;){
                    var e = _$r.value, u = "number" == typeof e ? Mt : Ct;
                    if (u.test(t1)) {
                        var o = "" + e;
                        t1 = t1.replace(u, o);
                    } else t1 += " " + e;
                }
                else for(var f, _$c = d(n); !(f = _$c()).done;)t1 += " " + f.value;
                return t1;
            }
            function Pt() {
                for(var _$t = arguments.length - 1, i = Array(_$t), n = 0; n < _$t; ++n)i[n] = arguments[n + 1];
                return i;
            }
            function Dt(t1, i) {
                for(; t1;){
                    var n = Object.getOwnPropertyDescriptor(t1, i);
                    if (n) return n;
                    t1 = Object.getPrototypeOf(t1);
                }
                return null;
            }
            function Lt(t1, i, n) {
                var s = Dt(i, t1);
                s && Object.defineProperty(n, t1, s);
            }
            function Bt(t1) {
                t1 = t1 || {};
                for(var i = 0; i < (arguments.length <= 1 ? 0 : arguments.length - 1); ++i){
                    var n = i + 1 < 1 || arguments.length <= i + 1 ? void 0 : arguments[i + 1];
                    if (n) {
                        if ("object" != (void 0 === n ? "undefined" : _type_of(n))) {
                            rt(5402, n);
                            continue;
                        }
                        for(var s in n)s in t1 || Lt(s, n, t1);
                    }
                }
                return t1;
            }
            function Ft(t1) {
                t1 = t1 || {};
                for(var i = 0; i < (arguments.length <= 1 ? 0 : arguments.length - 1); ++i){
                    var n = i + 1 < 1 || arguments.length <= i + 1 ? void 0 : arguments[i + 1];
                    if (n) {
                        if ("object" != (void 0 === n ? "undefined" : _type_of(n))) {
                            rt(5403, n);
                            continue;
                        }
                        for(var s in n)Lt(s, n, t1);
                    }
                }
                return t1;
            }
            function Ut(t1, i) {
                for(var n in i)i.hasOwnProperty(n) && (t1[n] = i[n]);
                return t1.prototype = Object.create(i.prototype, {
                    constructor: {
                        value: t1,
                        writable: !0,
                        configurable: !0
                    }
                }), t1;
            }
            function xt(t1) {
                var i = t1.prototype, n = i && Object.getPrototypeOf(i);
                return n && n.constructor;
            }
            function jt(t1, i) {
                if (t1 && i) {
                    if ("function" != typeof t1 || "function" != typeof i) return !1;
                    if (t1 === i) return !0;
                    for(; t1 = xt(t1);)if (t1 === i) return !0;
                }
                return !1;
            }
            function Gt(t1) {
                for(var i = 0, n = Object.keys(t1); i < n.length; i++)delete t1[n[i]];
            }
            var Ht = St(!0), Vt = St(!0);
            function Wt(t1, i, n) {
                return function(s, r) {
                    if (r.prototype.hasOwnProperty(t1) && delete i[r.prototype[t1]], kt(r.prototype, t1, s), s) {
                        var h = i[s];
                        !n && h && h !== r ? rt(16334, t1, s, "") : i[s] = r;
                    }
                };
            }
            var zt = Wt("__cid__", Ht, !1), $t = Wt("__classname__", Vt, !0);
            function Xt(t1, i) {
                if ($t(t1, i), !i.prototype.hasOwnProperty(pt)) {
                    var n = t1 || dt.getNewId();
                    n && zt(n, i);
                }
            }
            function qt(t1, i) {
                var n = Vt[i], s = Ht[i], _$r = !0;
                if (n && n !== t1 && (rt(16335, i), _$r = !1), s && s !== t1 && (rt(16336, i), _$r = !1), _$r) {
                    var h = t1[wt];
                    h || (h = [], t1[wt] = h), h.push(i), Vt[i] = t1, Ht[i] = t1;
                }
            }
            function Yt() {
                for(var _$t = arguments.length, i = Array(_$t), n = 0; n < _$t; n++)i[n] = arguments[n];
                for(var s = 0; s < i.length; s++){
                    var h = i[s].prototype, e = h[pt];
                    e && delete Ht[e];
                    var u = h[gt];
                    u && delete Vt[u];
                    var o = h[wt];
                    if (o) for(var f = 0; f < o.length; ++f){
                        var _$c = o[f];
                        delete Vt[_$c], delete Ht[_$c];
                    }
                }
            }
            function Kt(t1) {
                return Jt(t1);
            }
            function Jt(t1) {
                return Ht[t1];
            }
            function Qt(t1) {
                return Vt[t1];
            }
            function Zt(t1) {
                return ti(t1);
            }
            function ti(t1) {
                if ("function" == typeof t1 && t1.prototype.hasOwnProperty(pt)) return t1.prototype[pt];
                if (t1 && t1.constructor) {
                    var i = t1.constructor.prototype;
                    if (i && i.hasOwnProperty(pt)) return t1[pt];
                }
                return "";
            }
            var ii = function() {
                var _$t = i.prototype;
                function i(t1, i) {
                    this.count = 0;
                    var s = void 0 === i ? null : t1;
                    this.S = Array(void 0 === i ? t1 : i), this.O = s;
                }
                return _$t.get = function() {
                    return this._get();
                }, _$t._get = function() {
                    if (this.count > 0) {
                        --this.count;
                        var _$t = this.S[this.count];
                        return this.S[this.count] = null, _$t;
                    }
                    return null;
                }, _$t.put = function(t1) {
                    var _$i = this.S;
                    if (this.count < _$i.length) {
                        if (this.O && !1 === this.O(t1)) return;
                        _$i[this.count] = t1, ++this.count;
                    }
                }, _$t.resize = function(t1) {
                    t1 >= 0 && (this.S.length = t1, this.count > t1 && (this.count = t1));
                }, i;
            }(), ni = function() {
                function t1(t1) {
                    this.i = 0, this.array = t1;
                }
                var i = t1.prototype;
                return i.remove = function(t1) {
                    var i = this.array.indexOf(t1);
                    i >= 0 && this.removeAt(i);
                }, i.removeAt = function(t1) {
                    this.array.splice(t1, 1), t1 <= this.i && --this.i;
                }, i.fastRemove = function(t1) {
                    var i = this.array.indexOf(t1);
                    i >= 0 && this.fastRemoveAt(i);
                }, i.fastRemoveAt = function(t1) {
                    var i = this.array;
                    i[t1] = i[i.length - 1], --i.length, t1 <= this.i && --this.i;
                }, i.push = function(t1) {
                    this.array.push(t1);
                }, s(t1, [
                    {
                        key: "length",
                        get: function get() {
                            return this.array.length;
                        },
                        set: function set(t1) {
                            this.array.length = t1, this.i >= t1 && (this.i = t1 - 1);
                        }
                    }
                ]), t1;
            }();
            function si(t1, i) {
                t1.splice(i, 1);
            }
            function ri(t1, i) {
                var n = t1.length;
                i < 0 || i >= n || (t1[i] = t1[n - 1], t1.length = n - 1);
            }
            function hi(t1, i) {
                var n = t1.indexOf(i);
                return n >= 0 && (si(t1, n), !0);
            }
            function ei(t1, i) {
                var n = t1.indexOf(i);
                n >= 0 && (t1[n] = t1[t1.length - 1], --t1.length);
            }
            function ui(t1, i) {
                var n = t1.findIndex(i);
                if (n >= 0) {
                    var s = t1[n];
                    return si(t1, n), s;
                }
            }
            function oi(t1, i) {
                return t1.indexOf(i) >= 0;
            }
            function fi(t1) {
                for(var i = 0, n = arguments.length <= 1 ? 0 : arguments.length - 1; i < n; ++i)t1[i] = i + 1 < 1 || arguments.length <= i + 1 ? void 0 : arguments[i + 1];
            }
            var ci = Object.freeze({
                __proto__: null,
                MutableForwardIterator: ni,
                appendObjectsAt: function appendObjectsAt(t1, i, n) {
                    return t1.splice.apply(t1, [
                        n,
                        0
                    ].concat(i)), t1;
                },
                contains: oi,
                copy: function copy(t1) {
                    for(var i = t1.length, n = Array(i), s = 0; s < i; s += 1)n[s] = t1[s];
                    return n;
                },
                fastRemove: ei,
                fastRemoveAt: ri,
                fillItems: fi,
                remove: hi,
                removeArray: function removeArray(t1, i) {
                    for(var n = 0, s = i.length; n < s; n++)hi(t1, i[n]);
                },
                removeAt: si,
                removeIf: ui,
                verifyType: function verifyType(t1, i) {
                    if (t1 && t1.length > 0) {
                        for(var n, s = d(t1); !(n = s()).done;)if (!_instanceof(n.value, i)) return Q(1300), !1;
                    }
                    return !0;
                }
            }), ai = {
                IDGenerator: lt,
                Pool: ii,
                array: ci,
                isNumber: yt,
                isString: _t,
                isEmptyObject: mt,
                getPropertyDescriptor: Dt,
                addon: Bt,
                mixin: Ft,
                extend: Ut,
                getSuper: xt,
                isChildClassOf: jt,
                clear: Gt,
                value: kt,
                getset: At,
                get: Et,
                set: Tt,
                unregisterClass: Yt,
                getClassName: Ot,
                setClassName: Xt,
                setClassAlias: qt,
                getClassByName: Qt,
                getClassById: Jt,
                get _registeredClassNames () {
                    return r({}, Vt);
                },
                set _registeredClassNames (t){
                    Gt(Vt), Object.assign(Vt, t);
                },
                get _registeredClassIds () {
                    return r({}, Ht);
                },
                set _registeredClassIds (t){
                    Gt(Ht), Object.assign(Ht, t);
                },
                _getClassId: Zt,
                getClassId: ti,
                _setClassId: zt,
                _getClassById: Kt,
                obsolete: It,
                obsoletes: Rt,
                formatStr: Nt,
                shiftArguments: Pt,
                createMap: St
            };
            function li(t1) {
                if ("__bitmask__" in t1) return t1;
                kt(t1, "__bitmask__", null, !0);
                for(var i = -1, n = Object.keys(t1), s = 0; s < n.length; s++){
                    var _$r = n[s], h = t1[_$r];
                    if (-1 === h) h = ++i, t1[_$r] = h;
                    else if ("number" == typeof h) i = h;
                    else if ("string" == typeof h && Number.isInteger(parseFloat(_$r))) continue;
                    var e = "" + h;
                    _$r !== e && kt(t1, e, _$r);
                }
                return t1;
            }
            function di(t1, i) {
                i >= 0 && t1.length, t1.length;
            }
            A.js = ai, t1("bd", Object.freeze({
                __proto__: null,
                IDGenerator: lt,
                Pool: ii,
                _getClassById: Kt,
                _getClassId: Zt,
                _idToClass: Ht,
                _nameToClass: Vt,
                _setClassId: zt,
                addon: Bt,
                array: ci,
                clear: Gt,
                copyAllProperties: function copyAllProperties(t1, i, n) {
                    for(var s = Object.getOwnPropertyNames(t1), _$r = 0, h = s.length; _$r < h; ++_$r){
                        var e = s[_$r];
                        -1 === n.indexOf(e) && Lt(e, t1, i);
                    }
                },
                createMap: St,
                extend: Ut,
                formatStr: Nt,
                get: Et,
                getClassById: Jt,
                getClassByName: Qt,
                getClassId: ti,
                getClassName: Ot,
                getPropertyDescriptor: Dt,
                getSuper: xt,
                getset: At,
                isChildClassOf: jt,
                isEmptyObject: mt,
                isNumber: yt,
                isString: _t,
                js: ai,
                mixin: Ft,
                obsolete: It,
                obsoletes: Rt,
                set: Tt,
                setClassAlias: qt,
                setClassName: Xt,
                shiftArguments: Pt,
                unregisterClass: Yt,
                value: kt
            })), li.isBitMask = function(t1) {
                return t1 && Object.prototype.hasOwnProperty.call(t1, "__bitmask__");
            }, li.getList = function(t1) {
                return t1.__bitmask__ ? t1.__bitmask__ : li.update(t1);
            }, li.update = function(t1) {
                Array.isArray(t1.__bitmask__) || (t1.__bitmask__ = []);
                var i = t1.__bitmask__;
                for(var n in i.length = 0, t1){
                    var s = t1[n];
                    Number.isInteger(s) && i.push({
                        name: n,
                        value: s
                    });
                }
                return i.sort(function(t1, i) {
                    return t1.value - i.value;
                }), i;
            }, A.BitMask = li;
            var wi = Object.prototype.hasOwnProperty;
            function gi(t1) {
                return "__enums__" in t1 ? t1 : (kt(t1, "__enums__", null, !0), gi.update(t1));
            }
            function pi(t1) {
                wi.call(t1, "__enums__");
            }
            function yi(t1) {
                pi(t1);
                var i = t1.__enums__ || [];
                i.length = 0;
                var n = !0;
                for(var s in t1){
                    var _$r = t1[s], h = Number.isInteger(_$r);
                    h || (n = !1), (h || "string" == typeof _$r && t1[_$r] !== Number.parseInt(s)) && i.push({
                        name: s,
                        value: _$r
                    });
                }
                return n && i.sort(function(t1, i) {
                    return t1.value - i.value;
                }), t1.__enums__ = i, i;
            }
            function _i(t1) {
                "__enums__" in t1 || kt(t1, "__enums__", null, !0);
            }
            gi.update = function(t1) {
                for(var i = -1, n = Object.keys(t1), s = 0; s < n.length; s++){
                    var _$r = n[s], h = t1[_$r];
                    if (-1 === h) h = ++i, t1[_$r] = h;
                    else if ("number" == typeof h) i = h;
                    else if ("string" == typeof h && Number.isInteger(parseFloat(_$r))) continue;
                    var e = "" + h;
                    _$r !== e && kt(t1, e, _$r);
                }
                return Array.isArray(t1.__enums__) && yi(t1), t1;
            }, gi.isEnum = function(t1) {
                return t1 && wi.call(t1, "__enums__");
            }, gi.getList = function(t1) {
                return pi(t1), t1.__enums__ ? t1.__enums__ : yi(t1);
            }, gi.sortList = function(t1, i) {
                pi(t1), Array.isArray(t1.__enums__) && t1.__enums__.sort(i);
            }, A.Enum = gi;
            var mi = t1("bc", function() {
                function t1() {}
                var i = t1.prototype;
                return i.clone = function() {
                    return rt(100, Ot(this) + ".clone"), this;
                }, i.equals = function() {
                    return !1;
                }, i.set = function() {
                    rt(100, Ot(this) + ".set");
                }, i.toString = function() {
                    return "";
                }, t1;
            }());
            Xt("cc.ValueType", mi), A.ValueType = mi;
            var bi = t1("c9", {
                PATH: "path",
                ENGINE: "engine",
                ASSETS: "assets",
                SCRIPTING: "scripting",
                PHYSICS: "physics",
                RENDERING: "rendering",
                LAUNCH: "launch",
                SCREEN: "screen",
                SPLASH_SCREEN: "splashScreen",
                ANIMATION: "animation",
                PROFILING: "profiling",
                PLUGINS: "plugins",
                XR: "xr"
            }), ki = t1("ca", function() {
                function t1() {
                    this.M = {}, this.C = {};
                }
                var i = t1.prototype;
                return i.init = function(t1, i) {
                    var n = this;
                    for(var s in void 0 === t1 && (t1 = ""), void 0 === i && (i = {}), i){
                        var _$r = i[s];
                        if (_$r) for(var h in _$r)this.overrideSettings(s, h, _$r[h]);
                    }
                    return t1 ? new Promise(function(i, s) {
                        var _$r = new XMLHttpRequest;
                        _$r.open("GET", t1), _$r.responseType = "text", _$r.onload = function() {
                            n.M = JSON.parse(_$r.response), i();
                        }, _$r.onerror = function() {
                            s(Error("request settings failed!"));
                        }, _$r.send(null);
                    }) : Promise.resolve();
                }, i.overrideSettings = function(t1, i, n) {
                    t1 in this.C || (this.C[t1] = {}), this.C[t1][i] = n;
                }, i.querySettings = function(t1, i) {
                    if (t1 in this.C) {
                        var n = this.C[t1];
                        if (n && i in n) return n[i];
                    }
                    if (t1 in this.M) {
                        var s = this.M[t1];
                        if (s && i in s) return s[i];
                    }
                    return null;
                }, t1;
            }());
            ki.Category = bi;
            var Ai, Ei = t1("cb", new ki);
            A.settings = Ei, (t11 = Ai || (Ai = {}))[t11.PORTRAIT = 1] = "PORTRAIT", t11[t11.PORTRAIT_UPSIDE_DOWN = 2] = "PORTRAIT_UPSIDE_DOWN", t11[t11.LANDSCAPE_LEFT = 4] = "LANDSCAPE_LEFT", t11[t11.LANDSCAPE_RIGHT = 8] = "LANDSCAPE_RIGHT", t11[t11.LANDSCAPE = 12] = "LANDSCAPE", t11[t11.AUTO = 13] = "AUTO";
            var Ti = t1("bY", {
                SUPPORT_TEXTURE_FORMATS: [
                    ".astc",
                    ".pkm",
                    ".pvr",
                    ".webp",
                    ".jpg",
                    ".jpeg",
                    ".bmp",
                    ".png"
                ],
                KEY: {
                    none: 0,
                    back: 6,
                    menu: 18,
                    backspace: 8,
                    tab: 9,
                    enter: 13,
                    shift: 16,
                    ctrl: 17,
                    alt: 18,
                    pause: 19,
                    capslock: 20,
                    escape: 27,
                    space: 32,
                    pageup: 33,
                    pagedown: 34,
                    end: 35,
                    home: 36,
                    left: 37,
                    up: 38,
                    right: 39,
                    down: 40,
                    select: 41,
                    insert: 45,
                    Delete: 46,
                    0: 48,
                    1: 49,
                    2: 50,
                    3: 51,
                    4: 52,
                    5: 53,
                    6: 54,
                    7: 55,
                    8: 56,
                    9: 57,
                    a: 65,
                    b: 66,
                    c: 67,
                    d: 68,
                    e: 69,
                    f: 70,
                    g: 71,
                    h: 72,
                    i: 73,
                    j: 74,
                    k: 75,
                    l: 76,
                    m: 77,
                    n: 78,
                    o: 79,
                    p: 80,
                    q: 81,
                    r: 82,
                    s: 83,
                    t: 84,
                    u: 85,
                    v: 86,
                    w: 87,
                    x: 88,
                    y: 89,
                    z: 90,
                    num0: 96,
                    num1: 97,
                    num2: 98,
                    num3: 99,
                    num4: 100,
                    num5: 101,
                    num6: 102,
                    num7: 103,
                    num8: 104,
                    num9: 105,
                    "*": 106,
                    "+": 107,
                    "-": 109,
                    numdel: 110,
                    "/": 111,
                    f1: 112,
                    f2: 113,
                    f3: 114,
                    f4: 115,
                    f5: 116,
                    f6: 117,
                    f7: 118,
                    f8: 119,
                    f9: 120,
                    f10: 121,
                    f11: 122,
                    f12: 123,
                    numlock: 144,
                    scrolllock: 145,
                    ";": 186,
                    semicolon: 186,
                    equal: 187,
                    "=": 187,
                    ",": 188,
                    comma: 188,
                    dash: 189,
                    ".": 190,
                    period: 190,
                    forwardslash: 191,
                    grave: 192,
                    "[": 219,
                    openbracket: 219,
                    backslash: 220,
                    "]": 221,
                    closebracket: 221,
                    quote: 222,
                    dpadLeft: 1e3,
                    dpadRight: 1001,
                    dpadUp: 1003,
                    dpadDown: 1004,
                    dpadCenter: 1005
                },
                RAD: Math.PI / 180,
                DEG: 180 / Math.PI,
                REPEAT_FOREVER: Number.MAX_VALUE - 1,
                FLT_EPSILON: 1.192092896e-7,
                ORIENTATION_PORTRAIT: Ai.PORTRAIT,
                ORIENTATION_PORTRAIT_UPSIDE_DOWN: Ai.PORTRAIT_UPSIDE_DOWN,
                ORIENTATION_LANDSCAPE: Ai.LANDSCAPE,
                ORIENTATION_LANDSCAPE_LEFT: Ai.LANDSCAPE_LEFT,
                ORIENTATION_LANDSCAPE_RIGHT: Ai.LANDSCAPE_RIGHT,
                ORIENTATION_AUTO: Ai.AUTO,
                ENABLE_TILEDMAP_CULLING: !0,
                TOUCH_TIMEOUT: 5e3,
                ENABLE_TRANSPARENT_CANVAS: !1,
                ENABLE_WEBGL_ANTIALIAS: !0,
                ENABLE_FLOAT_OUTPUT: !1,
                CLEANUP_IMAGE_CACHE: !1,
                ENABLE_MULTI_TOUCH: !0,
                MAX_LABEL_CANVAS_POOL_SIZE: 20,
                ENABLE_WEBGL_HIGHP_STRUCT_VALUES: !1,
                BATCHER2D_MEM_INCREMENT: 144,
                CUSTOM_PIPELINE_NAME: "Builtin",
                init: function init() {
                    var _$t = Ei.querySettings("engine", "macros");
                    if (_$t) for(var i in _$t)Ti[i] = _$t[i];
                }
            });
            function Si(t1, i) {
                for(var n = arguments.length, s = Array(n > 2 ? n - 2 : 0), _$r = 2; _$r < n; _$r++)s[_$r - 2] = arguments[_$r];
                var h = performance.now(), e = requestAnimationFrame || window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame;
                return void 0 === e ? setTimeout.apply(void 0, [
                    t1,
                    i
                ].concat(s)) : e(function n() {
                    performance.now() - h < i ? e(n) : t1.apply(void 0, s);
                });
            }
            A.macro = Ti;
            for(var Oi = /^(?:cc|dragonBones|sp|ccsg)\..+/, Ii = Array(123), Ri = 0; Ri < 123; ++Ri)Ii[Ri] = 64;
            for(var Mi = 0; Mi < 64; ++Mi)Ii["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charCodeAt(Mi)] = Mi;
            function Ni(t1, i, n) {
                function s(t1, i, n, s) {
                    var _$r = Object.getOwnPropertyDescriptor(t1, i);
                    if (_$r) _$r.get && n && (t1[n] = _$r.get), _$r.set && s && (t1[s] = _$r.set);
                    else {
                        var h = t1[n];
                        At(t1, i, h, t1[s]);
                    }
                }
                for(var _$r, h = t1.prototype, e = 0, u = i.length; e < u; ++e){
                    var o = (_$r = i[e])[0].toUpperCase() + _$r.slice(1);
                    s(h, _$r, "get" + o, "set" + o);
                }
                for(_$r in n){
                    var f = n[_$r];
                    s(h, _$r, f[0], f[1]);
                }
            }
            function Pi(t1, i, n, s) {
                var _$r = t1[i];
                _$r ? Array.isArray(_$r) ? s ? (_$r.push(_$r[0]), _$r[0] = n) : _$r.push(n) : t1[i] = s ? [
                    n,
                    _$r
                ] : [
                    _$r,
                    n
                ] : t1[i] = n;
            }
            function Di(t1, i) {
                if ("function" == typeof t1.contains) return t1.contains(i);
                if ("function" == typeof t1.compareDocumentPosition) return !!(16 & t1.compareDocumentPosition(i));
                var n = i.parentNode;
                if (n) do {
                    if (n === t1) return !0;
                    n = n.parentNode;
                }while (null !== n);
                return !1;
            }
            function Li(t1) {
                return "object" == ("u" < typeof window ? "undefined" : _type_of(window)) && "function" == typeof Node ? _instanceof(t1, Node) : !!t1 && "object" == (void 0 === t1 ? "undefined" : _type_of(t1)) && "number" == typeof t1.nodeType && "string" == typeof t1.nodeName;
            }
            function Bi(t1) {
                for(var i = arguments.length, n = Array(i > 1 ? i - 1 : 0), s = 1; s < i; s++)n[s - 1] = arguments[s];
                t1 && Si(function() {
                    t1.apply(void 0, n);
                }, 0);
            }
            function Fi(t1) {
                return !(!t1 || t1.constructor !== Object) && mt(t1);
            }
            function Ui(t1, i, n) {
                if (i > n) {
                    var s = i;
                    i = n, n = s;
                }
                return t1 < i ? i : t1 < n ? t1 : n;
            }
            function xi(t1) {
                return t1 * Ti.RAD;
            }
            function ji(t1) {
                return t1 * Ti.DEG;
            }
            function Hi(t1, i) {
                var n = i ? Object.create(i) : {};
                return kt(t1, "__attrs__", n), n;
            }
            function Vi(t1) {
                if ("function" != typeof t1) return Hi(t1, zi(t1.constructor));
                for(var i, n = A.Class.getInheritanceChain(t1), s = n.length - 1; s >= 0; s--){
                    var _$r = n[s];
                    _$r.hasOwnProperty("__attrs__") && _$r.__attrs__ || Hi(_$r, (i = n[s + 1]) && i.__attrs__);
                }
                return Hi(t1, (i = n[0]) && i.__attrs__), t1.__attrs__;
            }
            function Wi(t1, i) {
                var n = zi(t1), s = i + "$_$", _$r = {};
                for(var h in n)h.startsWith(s) && (_$r[h.slice(s.length)] = n[h]);
                return _$r;
            }
            function zi(t1) {
                return t1.hasOwnProperty("__attrs__") && t1.__attrs__ || Vi(t1);
            }
            function $i(t1, i, n, s) {
                zi(t1)[i + "$_$" + n] = s;
            }
            A.misc = {
                BUILTIN_CLASSID_RE: Oi,
                BASE64_VALUES: Ii,
                propertyDefine: Ni,
                pushToMap: Pi,
                contains: Di,
                isDomNode: Li,
                callInNextTick: Bi,
                isPlainEmptyObj_DEV: Fi,
                clampf: Ui,
                degreesToRadians: xi,
                radiansToDegrees: ji
            }, t1("be", Object.freeze({
                __proto__: null,
                BASE64_VALUES: Ii,
                BUILTIN_CLASSID_RE: Oi,
                callInNextTick: Bi,
                clampf: Ui,
                contains: Di,
                degreesToRadians: xi,
                isDomNode: Li,
                isPlainEmptyObj_DEV: Fi,
                propertyDefine: Ni,
                pushToMap: Pi,
                radiansToDegrees: ji,
                tryCatchFunctor_EDITOR: function tryCatchFunctor_EDITOR(t1) {
                    return Function("target", "try {\n  target." + t1 + "();\n}\ncatch (e) {\n  cc._throw(e);\n}");
                }
            }));
            var Xi = function() {
                function t1(t1, i) {
                    this.name = t1, this.default = i;
                }
                return t1.prototype.toString = function() {
                    return this.name;
                }, t1;
            }(), qi = t1("bv", new Xi("Integer", 0));
            A.Integer = qi, A.CCInteger = qi;
            var Yi = t1("bw", new Xi("Float", 0));
            A.Float = Yi, A.CCFloat = Yi;
            var Ki = t1("bx", new Xi("Boolean", !1));
            A.Boolean = Ki, A.CCBoolean = Ki;
            var Ji = t1("by", new Xi("String", ""));
            function Qi(t1, i) {
                return function(n, s) {
                    var _$r = '"' + Ot(n) + "." + s + '"', h = Wi(n, s), e = h.type;
                    if (e === qi || e === Yi ? e = "Number" : e !== Ji && e !== Ki || (e = "" + e), e === t1) {
                        if (h.hasOwnProperty("default")) {
                            var u = h.default;
                            if (void 0 !== u && !Array.isArray(u) && !Fi(u)) {
                                var o = void 0 === u ? "undefined" : _type_of(u), f = t1.toLowerCase();
                                if (o === f) if ("object" === f) {
                                    if (!u || _instanceof(u, h.ctor)) return;
                                    nt(3605, _$r, Ot(h.ctor));
                                } else "Number" !== t1 && nt(3606, i, _$r, t1);
                                else {
                                    if ("function" === o) return;
                                    t1 === Ji.default && null == u ? nt(3607, _$r) : nt(3611, i, _$r, o);
                                }
                                delete h.type;
                            }
                        }
                    } else nt(3604, _$r);
                };
            }
            A.String = Ji, A.CCString = Ji;
            var Zi = Object.freeze({
                __proto__: null,
                CCBoolean: Ki,
                CCFloat: Yi,
                CCInteger: qi,
                CCString: Ji,
                DELIMETER: "$_$",
                PrimitiveType: Xi,
                attr: Wi,
                createAttrs: Vi,
                createAttrsSingle: Hi,
                getClassAttrs: zi,
                getObjTypeChecker_ET: function getObjTypeChecker_ET(t1) {
                    return function(i, n) {
                        Qi("Object", "type")(i, n);
                        var s = zi(i)[n + "$_$default"];
                        if (!Array.isArray(A.Class.getDefault(s)) && jt(t1, A.ValueType)) {
                            var h = Ot(t1), e = Nt('No need to specify the "type" of "%s.%s" because %s is a child class of ValueType.', Ot(i), n, h);
                            s ? V(e) : nt(3612, e, h, Ot(i), n, h);
                        }
                    };
                },
                getTypeChecker_ET: Qi,
                setClassAttr: $i
            }), tn = {
                default: {},
                serializable: {},
                editorOnly: {},
                formerlySerializedAs: {}
            };
            function nn(t1, i, n, s) {
                if (!t1.get && !t1.set && t1.hasOwnProperty("default")) {
                    var _$r = "_N$" + i;
                    t1.get = function() {
                        return this[_$r];
                    }, t1.set = function(t1) {
                        var _$i = this[_$r];
                        this[_$r] = t1, n.call(this, _$i);
                    };
                    var h = {};
                    for(var e in s[_$r] = h, tn){
                        var u = tn[e];
                        t1.hasOwnProperty(e) && (h[e] = t1[e], u.canUsedInGet || delete t1[e]);
                    }
                }
            }
            function sn(t1, i, n, s) {
                if (Array.isArray(i)) {
                    if (!(i.length > 0)) return rt(5508, n, s);
                    t1.type = i = i[0];
                }
                "function" == typeof i && (i === String ? t1.type = A.String : i === Boolean ? t1.type = A.Boolean : i === Number && (t1.type = A.Float));
            }
            function rn(t1, i, n) {
                var s = t1 || void 0 === i ? {
                    _short: !0
                } : {
                    _short: !0,
                    default: i
                };
                return n && (s.type = n), s;
            }
            function hn(t1, i) {
                return t1 && t1.constructor === Object ? null : Array.isArray(t1) && t1.length > 0 ? rn(i, [], t1) : "function" == typeof t1 ? rn(i, jt(t1, A.ValueType) ? new t1 : null, t1) : _instanceof(t1, Xi) ? rn(i, void 0, t1) : rn(i, t1);
            }
            function en(t1, i) {
                for(var n in t1){
                    var s = t1[n], _$r = hn(s, !1);
                    if (_$r && (s = t1[n] = _$r), s) {
                        var h = s.notify;
                        h && nn(s, n, h, t1), "type" in s && sn(s, s.type, i, n);
                    }
                }
            }
            var un = [];
            function on() {
                return un[un.length - 1];
            }
            function fn(t1, i, n) {
                cn(zi(t1), i, n);
            }
            function cn(t1, i, n) {
                t1["" + i + "$_$type"] = "Enum", t1["" + i + "$_$enumList"] = gi.getList(n);
            }
            A._RF = {
                push: function push(t1, i, n, s) {
                    void 0 === n && (n = i, i = ""), un.push({
                        uuid: i,
                        script: n,
                        module: t1,
                        exports: t1.exports,
                        beh: null,
                        importMeta: s
                    });
                },
                pop: function pop() {
                    var _$t = un.pop(), i = _$t.module, n = i.exports;
                    if (n === _$t.exports) {
                        for(var s in n)return;
                        i.exports = n = _$t.cls;
                    }
                },
                peek: on
            };
            var vn = "__ctors__", ln = t1("cz", "Enum"), dn = t1("cA", "BitMask");
            function wn(t1, i) {
                0 > t1.indexOf(i) && t1.push(i);
            }
            function gn(t1, i) {
                wn(t1.__props__, i);
            }
            function pn(t1, i, n, s) {
                gn(t1, n), Sn(t1, s, i, n);
            }
            function yn(t1, i, n, s) {
                var _$r = s.get;
                s.set, _$r && (Sn(t1, s, i, n), $i(t1, n, "serializable", !1));
            }
            function _n(t1) {
                return "function" == typeof t1 ? t1() : t1;
            }
            function mn(t1, i, n) {
                var s = n.ctor;
                return kt(s, vn, !0, !0), s.prototype, i && (s.$super = i), Xt(t1, s), s;
            }
            function bn(t1, i, n) {
                var s = A.Component, _$r = on();
                if (_$r && jt(i, s)) {
                    if (jt(_$r.cls, s)) return rt(3615), null;
                    t1 = t1 || _$r.script;
                }
                var h = mn(t1, i, n);
                if (_$r) if (jt(i, s)) {
                    var e = _$r.uuid;
                    e && zt(e, h), _$r.cls = h;
                } else jt(_$r.cls, s) || (_$r.cls = h);
                return h;
            }
            function kn(t1, i, n, s) {
                if (t1.__props__ = [], s && s.__props__ && (t1.__props__ = s.__props__.slice()), n) for(var _$r in en(n, i), n){
                    var h = n[_$r];
                    h.get || h.set ? yn(t1, i, _$r, h) : pn(t1, i, _$r, h);
                }
                var e = zi(t1);
                t1.__values__ = t1.__props__.filter(function(t1) {
                    return !1 !== e["" + t1 + "$_$serializable"];
                });
            }
            function An(t1) {
                var i = t1.name, n = t1.extends, s = bn(i, n, t1);
                i || (i = A.js.getClassName(s)), s._sealed = !0, n && (n._sealed = !1), kn(s, i, t1.properties, n);
                var _$r = t1.editor;
                return _$r && jt(n, A.Component) && A.Component._registerEditorProps(s, _$r), s;
            }
            function En(t1) {
                return null == t1 || null == t1.hasOwnProperty ? void 0 : t1.hasOwnProperty("__values__");
            }
            An._isCCClass = function(t1) {
                return null == t1 || null == t1.hasOwnProperty ? void 0 : t1.hasOwnProperty(vn);
            }, An.fastDefine = function(t1, i, n) {
                Xt(t1, i);
                for(var s = i.__props__ = i.__values__ = Object.keys(n), _$r = zi(i), h = 0; h < s.length; h++){
                    var e = s[h];
                    _$r[e + "$_$visible"] = !1, _$r[e + "$_$default"] = n[e];
                }
            }, An.Attr = Zi, An.attr = Wi, An.isCCClassOrFastDefined = En, An.getInheritanceChain = function(t1) {
                for(var i = []; t1 = xt(t1);)t1 !== Object && i.push(t1);
                return i;
            };
            var Tn = {
                Integer: "Number",
                Float: "Number",
                Boolean: "Boolean",
                String: "String"
            };
            function Sn(t1, i, n, s) {
                var _$r = null, h = "";
                function e() {
                    return h = s + "$_$", _$r = zi(t1);
                }
                "type" in i && void 0 === i.type && nt(3660, s, n);
                var u = i.type;
                u && (Tn[u] ? (_$r || e())[h + "type"] = u : "Object" === u || ("object" == (void 0 === u ? "undefined" : _type_of(u)) ? gi.isEnum(u) ? cn(_$r || e(), s, u) : li.isBitMask(u) && ((_$r || e())[h + "type"] = dn, _$r[h + "bitmaskList"] = li.getList(u)) : "function" == typeof u && ((_$r || e())[h + "type"] = "Object", _$r[h + "ctor"] = u))), "default" in i && ((_$r || e())[h + "default"] = i.default);
                var o, f = function f(t1, n) {
                    if (t1 in i) {
                        var _$s = i[t1];
                        (void 0 === _$s ? "undefined" : _type_of(_$s)) === n && ((_$r || e())[h + t1] = _$s);
                    }
                };
                i.editorOnly && ((_$r || e())[h + "editorOnly"] = !0), 1 & i.__internalFlags ? o = !0 === i.serializable || !!(4 & i.__internalFlags) : !1 === i.serializable && (o = !1), void 0 !== o && ((_$r || e())[h + "serializable"] = o), f("formerlySerializedAs", "string");
                var _$c = i.range;
                _$c && Array.isArray(_$c) && _$c.length >= 2 && ((_$r || e())[h + "min"] = _$c[0], _$r[h + "max"] = _$c[1], _$c.length > 2 && (_$r[h + "step"] = _$c[2])), f("step", "number"), f("userData", "object");
            }
            An.isArray = function(t1) {
                return Array.isArray(t1 = _n(t1));
            }, An.getDefault = _n, An.escapeForJS = function(t1) {
                return JSON.stringify(t1).replace(/\u2028/g, "\\u2028").replace(/\u2029/g, "\\u2029");
            }, An.IDENTIFIER_RE = /^[A-Za-z_$][0-9A-Za-z_$]*$/, An.getNewValueTypeCode = function(t1) {
                for(var i = Ot(t1), n = t1.constructor, s = "new " + i + "(", _$r = 0; _$r < n.__props__.length; _$r++)s += t1[n.__props__[_$r]], _$r < n.__props__.length - 1 && (s += ",");
                return s + ")";
            }, A.Class = An;
            var On = Math.abs, In = Math.floor, Rn = Math.PI, Mn = Rn / 180, Cn = 180 / Rn, Nn = Math.random, Pn = t1("aG", .5 * Rn), Dn = t1("aH", 2 * Rn), Ln = t1("aI", 1e-6);
            function Bn(t1, i) {
                return On(t1 - i) <= Ln * Math.max(1, On(t1), On(i));
            }
            function Fn(t1, i, n) {
                return n = n || Ln, On(t1 - i) <= n;
            }
            function Un(t1, i, n) {
                if (i > n) {
                    var s = i;
                    i = n, n = s;
                }
                return t1 < i ? i : t1 > n ? n : t1;
            }
            function xn(t1) {
                return t1 < 0 ? 0 : t1 > 1 ? 1 : t1;
            }
            function jn(t1, i, n) {
                return t1 + (i - t1) * n;
            }
            function Gn(t1) {
                return t1 * Mn;
            }
            function Hn(t1) {
                return t1 * Cn;
            }
            function Vn() {
                return Nn();
            }
            function Wn(t1) {
                Nn = t1;
            }
            function zn(t1, i) {
                return Vn() * (i - t1) + t1;
            }
            function $n(t1, i) {
                return In(zn(t1, i));
            }
            function Xn(t1) {
                return (t1 = (9301 * t1 + 49297) % 233280) / 233280;
            }
            function qn(t1, i, n) {
                return Xn(t1) * (n - i) + i;
            }
            function Yn(t1, i, n) {
                return In(qn(t1, i, n));
            }
            function Kn(t1) {
                return C(t1);
            }
            function Jn(t1, i) {
                return t1 - In(t1 / i) * i;
            }
            function Qn(t1, i) {
                return t1 = Jn(t1, 2 * i), i - On(t1 - i);
            }
            function Zn(t1, i, n) {
                return (n - t1) / (i - t1);
            }
            function ts(t1) {
                return On(t1.x) > On(t1.y) ? On(t1.x) > On(t1.z) ? t1.x : t1.z : On(t1.y) > On(t1.z) ? t1.y : t1.z;
            }
            function is(t1, i) {
                return On(t1) > On(i) ? t1 : i;
            }
            function ns(t1, i) {
                i.forEach(function(i) {
                    Object.defineProperty(t1, i, {
                        enumerable: !0
                    });
                });
            }
            var t11, _$t3, i2, ss, rs, es = (rs = new Int32Array((ss = new Float32Array(1)).buffer), function es(t1) {
                ss[0] = t1;
                var i = rs[0], s = 2147483647 & i, _$r = s - 939524096 + 4096 >> 13;
                return _$r = s < 947912704 ? 0 : _$r, _$r = s >= 1199570944 ? 31744 : _$r, _$r = s > 2139095040 ? 32256 : _$r, rs[0] = i >> 16 & 32768 | _$r, rs[0];
            }), us = (i2 = new Int32Array((_$t3 = new Float32Array(1)).buffer), function(n) {
                var s, _$r = 32767 & n, h = _$r << 13;
                return 31744 !== h ? (h += 939524096, 0 === _$r ? h = (1048575 & h) >> 1 : 32767 === _$r && (h = 2147483647)) : h = 2139095040, s = (n >> 15 & 1) << 31 | h, i2[0] = s, _$t3[0];
            });
            function os(t1) {
                return es(t1);
            }
            function fs(t1) {
                return us(t1);
            }
            var cs = Math.abs, as = Math.max, vs = Math.min, ls = Math.PI, ds = Math.acos, ws = Math.sin, gs = Math.cos, ps = Math.sqrt, ys = Math.ceil, _s = Math.floor, ms = Math.round;
            function bs(t1, i, n) {
                return Object.freeze(new Ss(t1, i, n));
            }
            var ks, As, Es, Ts, Ss = t1("aq", function(t1) {
                function i(i, n, s) {
                    var _$r;
                    return _$r = t1.call(this) || this, "object" == (void 0 === i ? "undefined" : _type_of(i)) ? (_$r.x = i.x, _$r.y = i.y, _$r.z = i.z) : (_$r.x = i || 0, _$r.y = n || 0, _$r.z = s || 0), _$r;
                }
                h(i, t1), i.zero = function(t1) {
                    return t1.x = 0, t1.y = 0, t1.z = 0, t1;
                }, i.clone = function(t1) {
                    return new i(t1.x, t1.y, t1.z);
                }, i.copy = function(t1, i) {
                    return t1.x = i.x, t1.y = i.y, t1.z = i.z, t1;
                }, i.set = function(t1, i, n, s) {
                    return t1.x = i, t1.y = n, t1.z = s, t1;
                }, i.add = function(t1, i, n) {
                    return t1.x = i.x + n.x, t1.y = i.y + n.y, t1.z = i.z + n.z, t1;
                }, i.subtract = function(t1, i, n) {
                    return t1.x = i.x - n.x, t1.y = i.y - n.y, t1.z = i.z - n.z, t1;
                }, i.multiply = function(t1, i, n) {
                    return t1.x = i.x * n.x, t1.y = i.y * n.y, t1.z = i.z * n.z, t1;
                }, i.divide = function(t1, i, n) {
                    return t1.x = i.x / n.x, t1.y = i.y / n.y, t1.z = i.z / n.z, t1;
                }, i.ceil = function(t1, i) {
                    return t1.x = ys(i.x), t1.y = ys(i.y), t1.z = ys(i.z), t1;
                }, i.floor = function(t1, i) {
                    return t1.x = _s(i.x), t1.y = _s(i.y), t1.z = _s(i.z), t1;
                }, i.min = function(t1, i, n) {
                    return t1.x = vs(i.x, n.x), t1.y = vs(i.y, n.y), t1.z = vs(i.z, n.z), t1;
                }, i.max = function(t1, i, n) {
                    return t1.x = as(i.x, n.x), t1.y = as(i.y, n.y), t1.z = as(i.z, n.z), t1;
                }, i.round = function(t1, i) {
                    return t1.x = ms(i.x), t1.y = ms(i.y), t1.z = ms(i.z), t1;
                }, i.multiplyScalar = function(t1, i, n) {
                    return t1.x = i.x * n, t1.y = i.y * n, t1.z = i.z * n, t1;
                }, i.scaleAndAdd = function(t1, i, n, s) {
                    return t1.x = i.x + n.x * s, t1.y = i.y + n.y * s, t1.z = i.z + n.z * s, t1;
                }, i.distance = function(t1, i) {
                    var n = i.x - t1.x, s = i.y - t1.y, _$r = i.z - t1.z;
                    return ps(n * n + s * s + _$r * _$r);
                }, i.squaredDistance = function(t1, i) {
                    var n = i.x - t1.x, s = i.y - t1.y, _$r = i.z - t1.z;
                    return n * n + s * s + _$r * _$r;
                }, i.len = function(t1) {
                    var _$i = t1.x, n = t1.y, s = t1.z;
                    return ps(_$i * _$i + n * n + s * s);
                }, i.lengthSqr = function(t1) {
                    var _$i = t1.x, n = t1.y, s = t1.z;
                    return _$i * _$i + n * n + s * s;
                }, i.negate = function(t1, i) {
                    return t1.x = -i.x, t1.y = -i.y, t1.z = -i.z, t1;
                }, i.invert = function(t1, i) {
                    return t1.x = 1 / i.x, t1.y = 1 / i.y, t1.z = 1 / i.z, t1;
                }, i.invertSafe = function(t1, i) {
                    var n = i.x, s = i.y, _$r = i.z;
                    return cs(n) < Ln ? t1.x = 0 : t1.x = 1 / n, cs(s) < Ln ? t1.y = 0 : t1.y = 1 / s, cs(_$r) < Ln ? t1.z = 0 : t1.z = 1 / _$r, t1;
                }, i.normalize = function(t1, i) {
                    var n = i.x, s = i.y, _$r = i.z, _$h = n * n + s * s + _$r * _$r;
                    return _$h > 0 ? (t1.x = n * (_$h = 1 / ps(_$h)), t1.y = s * _$h, t1.z = _$r * _$h) : (t1.x = 0, t1.y = 0, t1.z = 0), t1;
                }, i.dot = function(t1, i) {
                    return t1.x * i.x + t1.y * i.y + t1.z * i.z;
                }, i.cross = function(t1, i, n) {
                    var s = i.x, _$r = i.y, _$h = i.z, e = n.x, u = n.y, o = n.z;
                    return t1.x = _$r * o - _$h * u, t1.y = _$h * e - s * o, t1.z = s * u - _$r * e, t1;
                }, i.lerp = function(t1, i, n, s) {
                    return t1.x = i.x + s * (n.x - i.x), t1.y = i.y + s * (n.y - i.y), t1.z = i.z + s * (n.z - i.z), t1;
                }, i.random = function(t1, i) {
                    i = i || 1;
                    var n = 2 * Vn() * ls, s = 2 * Vn() - 1, _$r = ps(1 - s * s);
                    return t1.x = _$r * gs(n) * i, t1.y = _$r * ws(n) * i, t1.z = s * i, t1;
                }, i.transformMat4 = function(t1, i, n) {
                    var s = i.x, _$r = i.y, _$h = i.z, e = n.m03 * s + n.m07 * _$r + n.m11 * _$h + n.m15;
                    return e = e ? 1 / e : 1, t1.x = (n.m00 * s + n.m04 * _$r + n.m08 * _$h + n.m12) * e, t1.y = (n.m01 * s + n.m05 * _$r + n.m09 * _$h + n.m13) * e, t1.z = (n.m02 * s + n.m06 * _$r + n.m10 * _$h + n.m14) * e, t1;
                }, i.transformMat4Normal = function(t1, i, n) {
                    var s = i.x, _$r = i.y, _$h = i.z, e = n.m03 * s + n.m07 * _$r + n.m11 * _$h;
                    return e = e ? 1 / e : 1, t1.x = (n.m00 * s + n.m04 * _$r + n.m08 * _$h) * e, t1.y = (n.m01 * s + n.m05 * _$r + n.m09 * _$h) * e, t1.z = (n.m02 * s + n.m06 * _$r + n.m10 * _$h) * e, t1;
                }, i.transformMat3 = function(t1, i, n) {
                    var s = i.x, _$r = i.y, _$h = i.z;
                    return t1.x = s * n.m00 + _$r * n.m03 + _$h * n.m06, t1.y = s * n.m01 + _$r * n.m04 + _$h * n.m07, t1.z = s * n.m02 + _$r * n.m05 + _$h * n.m08, t1;
                }, i.transformAffine = function(t1, i, n) {
                    var s = i.x, _$r = i.y, _$h = i.z;
                    return t1.x = n.m00 * s + n.m04 * _$r + n.m08 * _$h + n.m12, t1.y = n.m01 * s + n.m05 * _$r + n.m09 * _$h + n.m13, t1.z = n.m02 * s + n.m06 * _$r + n.m10 * _$h + n.m14, t1;
                }, i.transformQuat = function(t1, i, n) {
                    var s = n.w * i.x + n.y * i.z - n.z * i.y, _$r = n.w * i.y + n.z * i.x - n.x * i.z, _$h = n.w * i.z + n.x * i.y - n.y * i.x, e = -n.x * i.x - n.y * i.y - n.z * i.z;
                    return t1.x = s * n.w + -(e * n.x) + -(_$r * n.z) - -(_$h * n.y), t1.y = _$r * n.w + -(e * n.y) + -(_$h * n.x) - -(s * n.z), t1.z = _$h * n.w + -(e * n.z) + -(s * n.y) - -(_$r * n.x), t1;
                }, i.transformRTS = function(t1, i, n, s, r) {
                    var _$h = i.x * r.x, e = i.y * r.y, u = i.z * r.z, o = n.w * _$h + n.y * u - n.z * e, f = n.w * e + n.z * _$h - n.x * u, _$c = n.w * u + n.x * e - n.y * _$h, a = -n.x * _$h - n.y * e - n.z * u;
                    return t1.x = o * n.w + -(a * n.x) + -(f * n.z) - -(_$c * n.y) + s.x, t1.y = f * n.w + -(a * n.y) + -(_$c * n.x) - -(o * n.z) + s.y, t1.z = _$c * n.w + -(a * n.z) + -(o * n.y) - -(f * n.x) + s.z, t1;
                }, i.transformInverseRTS = function(t1, i, n, s, r) {
                    var _$h = i.x - s.x, e = i.y - s.y, u = i.z - s.z, o = n.w * _$h - n.y * u + n.z * e, f = n.w * e - n.z * _$h + n.x * u, _$c = n.w * u - n.x * e + n.y * _$h, a = n.x * _$h + n.y * e + n.z * u;
                    return t1.x = (o * n.w + a * n.x + f * n.z - _$c * n.y) / r.x, t1.y = (f * n.w + a * n.y + _$c * n.x - o * n.z) / r.y, t1.z = (_$c * n.w + a * n.z + o * n.y - f * n.x) / r.z, t1;
                }, i.rotateX = function(t1, i, n, s) {
                    var _$r = i.x - n.x, _$h = i.y - n.y, e = i.z - n.z, u = gs(s), o = ws(s);
                    return t1.x = _$r + n.x, t1.y = _$h * u - e * o + n.y, t1.z = _$h * o + e * u + n.z, t1;
                }, i.rotateY = function(t1, i, n, s) {
                    var _$r = i.x - n.x, _$h = i.y - n.y, e = i.z - n.z, u = gs(s), o = ws(s);
                    return t1.x = e * o + _$r * u + n.x, t1.y = _$h + n.y, t1.z = e * u - _$r * o + n.z, t1;
                }, i.rotateZ = function(t1, i, n, s) {
                    var _$r = i.x - n.x, _$h = i.y - n.y, e = i.z - n.z, u = gs(s), o = ws(s);
                    return t1.x = _$r * u - _$h * o + n.x, t1.y = _$r * o + _$h * u + n.y, t1.z = e + n.z, t1;
                }, i.rotateN = function(t1, i, n, s, r) {
                    var _$h = i.x - n.x, e = i.y - n.y, u = i.z - n.z, o = s.x, f = s.y, _$c = s.z, a = gs(r), v = ws(r), l = _$h * (o * o * (1 - a) + a) + e * (o * f * (1 - a) - _$c * v) + u * (o * _$c * (1 - a) + f * v), _$d = _$h * (o * f * (1 - a) + _$c * v) + e * (f * f * (1 - a) + a) + u * (f * _$c * (1 - a) - o * v), w = _$h * (o * _$c * (1 - a) - f * v) + e * (f * _$c * (1 - a) + o * v) + u * (_$c * _$c * (1 - a) + a);
                    return t1.x = l + n.x, t1.y = _$d + n.y, t1.z = w + n.z, t1;
                }, i.toArray = function(t1, i, n) {
                    return void 0 === n && (n = 0), t1[n + 0] = i.x, t1[n + 1] = i.y, t1[n + 2] = i.z, t1;
                }, i.fromArray = function(t1, i, n) {
                    return void 0 === n && (n = 0), t1.x = i[n + 0], t1.y = i[n + 1], t1.z = i[n + 2], t1;
                }, i.strictEquals = function(t1, i) {
                    return t1.x === i.x && t1.y === i.y && t1.z === i.z;
                }, i.equals = function(t1, i, n) {
                    void 0 === n && (n = Ln);
                    var s = t1.x, _$r = t1.y, _$h = t1.z, e = i.x, u = i.y, o = i.z;
                    return cs(s - e) <= n * as(1, cs(s), cs(e)) && cs(_$r - u) <= n * as(1, cs(_$r), cs(u)) && cs(_$h - o) <= n * as(1, cs(_$h), cs(o));
                }, i.angle = function(t1, i) {
                    var n = t1.x * t1.x + t1.y * t1.y + t1.z * t1.z, s = i.x * i.x + i.y * i.y + i.z * i.z;
                    if (0 === n || 0 === s) return 0;
                    var _$r = (t1.x * i.x + t1.y * i.y + t1.z * i.z) / ps(n * s);
                    return ds(_$r = Un(_$r, -1, 1));
                }, i.projectOnPlane = function(t1, n, s) {
                    return i.subtract(t1, n, i.project(t1, n, s));
                }, i.project = function(t1, n, s) {
                    var _$r = i.lengthSqr(s);
                    return _$r < 1e-6 ? i.set(t1, 0, 0, 0) : i.multiplyScalar(t1, s, i.dot(n, s) / _$r);
                }, i.moveTowards = function(t1, i, n, s) {
                    var _$r = n.x - i.x, _$h = n.y - i.y, e = n.z - i.z, u = _$r * _$r + _$h * _$h + e * e;
                    if (0 === u || s >= 0 && u < s * s) return t1.x = n.x, t1.y = n.y, t1.z = n.z, t1;
                    var o = s / ps(u);
                    return t1.x = i.x + _$r * o, t1.y = i.y + _$h * o, t1.z = i.z + e * o, t1;
                }, i.generateOrthogonal = function(t1, n) {
                    var s = n.x, _$r = n.y, _$h = n.z, e = cs(s), u = cs(_$r), o = cs(_$h);
                    return e < u && e < o ? i.set(t1, 0, _$h, -_$r) : u < o ? i.set(t1, _$h, 0, -s) : i.set(t1, _$r, -s, 0), i.normalize(t1, t1);
                };
                var n = i.prototype;
                return n.clone = function() {
                    return new i(this.x, this.y, this.z);
                }, n.set = function(t1, i, n) {
                    return "object" == (void 0 === t1 ? "undefined" : _type_of(t1)) ? (this.x = t1.x, this.y = t1.y, this.z = t1.z) : (this.x = t1 || 0, this.y = i || 0, this.z = n || 0), this;
                }, n.equals = function(t1, i) {
                    return void 0 === i && (i = Ln), cs(this.x - t1.x) <= i && cs(this.y - t1.y) <= i && cs(this.z - t1.z) <= i;
                }, n.equals3f = function(t1, i, n, s) {
                    return void 0 === s && (s = Ln), cs(this.x - t1) <= s && cs(this.y - i) <= s && cs(this.z - n) <= s;
                }, n.strictEquals = function(t1) {
                    return this.x === t1.x && this.y === t1.y && this.z === t1.z;
                }, n.strictEquals3f = function(t1, i, n) {
                    return this.x === t1 && this.y === i && this.z === n;
                }, n.toString = function() {
                    return "(" + this.x + ", " + this.y + ", " + this.z + ")";
                }, n.lerp = function(t1, i) {
                    return this.x += i * (t1.x - this.x), this.y += i * (t1.y - this.y), this.z += i * (t1.z - this.z), this;
                }, n.add = function(t1) {
                    return this.x += t1.x, this.y += t1.y, this.z += t1.z, this;
                }, n.add3f = function(t1, i, n) {
                    return this.x += t1, this.y += i, this.z += n, this;
                }, n.subtract = function(t1) {
                    return this.x -= t1.x, this.y -= t1.y, this.z -= t1.z, this;
                }, n.subtract3f = function(t1, i, n) {
                    return this.x -= t1, this.y -= i, this.z -= n, this;
                }, n.multiplyScalar = function(t1) {
                    return "object" == (void 0 === t1 ? "undefined" : _type_of(t1)) && nt(16357), this.x *= t1, this.y *= t1, this.z *= t1, this;
                }, n.multiply = function(t1) {
                    return "object" != (void 0 === t1 ? "undefined" : _type_of(t1)) && nt(16358), this.x *= t1.x, this.y *= t1.y, this.z *= t1.z, this;
                }, n.multiply3f = function(t1, i, n) {
                    return this.x *= t1, this.y *= i, this.z *= n, this;
                }, n.divide = function(t1) {
                    return this.x /= t1.x, this.y /= t1.y, this.z /= t1.z, this;
                }, n.divide3f = function(t1, i, n) {
                    return this.x /= t1, this.y /= i, this.z /= n, this;
                }, n.negative = function() {
                    return this.x = -this.x, this.y = -this.y, this.z = -this.z, this;
                }, n.clampf = function(t1, i) {
                    return this.x = Un(this.x, t1.x, i.x), this.y = Un(this.y, t1.y, i.y), this.z = Un(this.z, t1.z, i.z), this;
                }, n.dot = function(t1) {
                    return this.x * t1.x + this.y * t1.y + this.z * t1.z;
                }, n.cross = function(t1) {
                    var _$i = this.x, n = this.y, s = this.z, _$r = t1.x, _$h = t1.y, e = t1.z;
                    return this.x = n * e - s * _$h, this.y = s * _$r - _$i * e, this.z = _$i * _$h - n * _$r, this;
                }, n.length = function() {
                    return ps(this.x * this.x + this.y * this.y + this.z * this.z);
                }, n.lengthSqr = function() {
                    return this.x * this.x + this.y * this.y + this.z * this.z;
                }, n.normalize = function() {
                    var _$i = this.x, n = this.y, s = this.z, _$r = _$i * _$i + n * n + s * s;
                    return _$r > 0 && (_$r = 1 / ps(_$r), this.x = _$i * _$r, this.y = n * _$r, this.z = s * _$r), this;
                }, n.transformMat4 = function(t1) {
                    var n = this.x, s = this.y, _$r = this.z, _$h = t1.m03 * n + t1.m07 * s + t1.m11 * _$r + t1.m15;
                    return _$h = _$h ? 1 / _$h : 1, this.x = (t1.m00 * n + t1.m04 * s + t1.m08 * _$r + t1.m12) * _$h, this.y = (t1.m01 * n + t1.m05 * s + t1.m09 * _$r + t1.m13) * _$h, this.z = (t1.m02 * n + t1.m06 * s + t1.m10 * _$r + t1.m14) * _$h, this;
                }, n.toVec2 = function() {
                    return new A.Vec2(this.x, this.y);
                }, i;
            }(mi));
            function Os(t1, i, n) {
                return new Ss(t1, i, n);
            }
            Ss.UNIT_X = bs(1, 0, 0), Ss.UNIT_Y = bs(0, 1, 0), Ss.UNIT_Z = bs(0, 0, 1), Ss.RIGHT = bs(1, 0, 0), Ss.UP = bs(0, 1, 0), Ss.FORWARD = bs(0, 0, -1), Ss.ZERO = bs(0, 0, 0), Ss.ONE = bs(1, 1, 1), Ss.NEG_ONE = bs(-1, -1, -1), ks = new Ss, As = new Ss, Es = new Ss, Ss.slerp = function(t1, i, n, s) {
                var h = Ss.len(i), e = Ss.len(n);
                if (h < 1e-5 || e < 1e-5) return Ss.lerp(t1, i, n, s);
                var u = jn(h, e, s), o = Ss.dot(i, n) / (h * e);
                if (o > .99999) return Ss.lerp(t1, i, n, s);
                if (o < -0.99999) {
                    var f = Ss.multiplyScalar(ks, i, 1 / h), _$c = Ss.generateOrthogonal(As, f);
                    return Ms(Es, f, _$c, ls * s), Ss.multiplyScalar(t1, Es, u), t1;
                }
                var v = ds(o) * s, l = Ss.multiplyScalar(ks, i, 1 / h), _$d = Ss.multiplyScalar(As, n, 1 / e);
                return Ss.scaleAndAdd(Es, _$d, l, -o), Ss.normalize(Es, Es), Ss.multiplyScalar(Es, Es, ws(v)), Ss.scaleAndAdd(Es, Es, l, gs(v)), Ss.multiplyScalar(t1, Es, u), t1;
            }, Ts = new Ss, Ss.signedAngle = function(t1, i, n) {
                var s = Ss.angle(t1, i), _$r = Ss.cross(Ts, t1, i);
                return 0 > Ss.dot(_$r, n) ? -s : s;
            }, An.fastDefine("cc.Vec3", Ss, {
                x: 0,
                y: 0,
                z: 0
            }), A.Vec3 = Ss;
            var Is, Ms = (Is = {
                x: 0,
                y: 0,
                z: 0,
                w: 0
            }, function Ms(t1, i, n, s) {
                var _$r = .5 * s, h = ws(_$r);
                return Is.x = h * n.x, Is.y = h * n.y, Is.z = h * n.z, Is.w = gs(_$r), Ss.transformQuat(t1, i, Is), t1;
            });
            A.v3 = Os;
            var Cs = Math.abs, Ns = Math.max, Ps = t1("aw", function(t1) {
                function i(i, n, s, r, h, e, u, o, f) {
                    void 0 === i && (i = 1), void 0 === n && (n = 0), void 0 === s && (s = 0), void 0 === r && (r = 0), void 0 === h && (h = 1), void 0 === e && (e = 0), void 0 === u && (u = 0), void 0 === o && (o = 0), void 0 === f && (f = 1);
                    var _$c, v = a(_$c = t1.call(this) || this);
                    return "object" == (void 0 === i ? "undefined" : _type_of(i)) ? (v.m00 = i.m00, v.m01 = i.m01, v.m02 = i.m02, v.m03 = i.m03, v.m04 = i.m04, v.m05 = i.m05, v.m06 = i.m06, v.m07 = i.m07, v.m08 = i.m08) : (v.m00 = i, v.m01 = n, v.m02 = s, v.m03 = r, v.m04 = h, v.m05 = e, v.m06 = u, v.m07 = o, v.m08 = f), _$c;
                }
                h(i, t1), i.clone = function(t1) {
                    return new i(t1.m00, t1.m01, t1.m02, t1.m03, t1.m04, t1.m05, t1.m06, t1.m07, t1.m08);
                }, i.copy = function(t1, i) {
                    return t1.m00 = i.m00, t1.m01 = i.m01, t1.m02 = i.m02, t1.m03 = i.m03, t1.m04 = i.m04, t1.m05 = i.m05, t1.m06 = i.m06, t1.m07 = i.m07, t1.m08 = i.m08, t1;
                }, i.set = function(t1, i, n, s, r, h, e, u, o, f) {
                    return t1.m00 = i, t1.m01 = n, t1.m02 = s, t1.m03 = r, t1.m04 = h, t1.m05 = e, t1.m06 = u, t1.m07 = o, t1.m08 = f, t1;
                }, i.identity = function(t1) {
                    return t1.m00 = 1, t1.m01 = 0, t1.m02 = 0, t1.m03 = 0, t1.m04 = 1, t1.m05 = 0, t1.m06 = 0, t1.m07 = 0, t1.m08 = 1, t1;
                }, i.transpose = function(t1, i) {
                    if (t1 === i) {
                        var n = i.m01, s = i.m02, _$r = i.m05;
                        t1.m01 = i.m03, t1.m02 = i.m06, t1.m03 = n, t1.m05 = i.m07, t1.m06 = s, t1.m07 = _$r;
                    } else t1.m00 = i.m00, t1.m01 = i.m03, t1.m02 = i.m06, t1.m03 = i.m01, t1.m04 = i.m04, t1.m05 = i.m07, t1.m06 = i.m02, t1.m07 = i.m05, t1.m08 = i.m08;
                    return t1;
                }, i.invert = function(t1, n) {
                    var s = n.m00, _$r = n.m01, _$h = n.m02, e = n.m03, u = n.m04, o = n.m05, f = n.m06, _$c = n.m07, a = n.m08, v = a * u - o * _$c, l = -a * e + o * f, _$d = _$c * e - u * f, w = s * v + _$r * l + _$h * _$d;
                    return 0 === w ? i.set(t1, 0, 0, 0, 0, 0, 0, 0, 0, 0) : (t1.m00 = v * (w = 1 / w), t1.m01 = (-a * _$r + _$h * _$c) * w, t1.m02 = (o * _$r - _$h * u) * w, t1.m03 = l * w, t1.m04 = (a * s - _$h * f) * w, t1.m05 = (-o * s + _$h * e) * w, t1.m06 = _$d * w, t1.m07 = (-_$c * s + _$r * f) * w, t1.m08 = (u * s - _$r * e) * w), t1;
                }, i.determinant = function(t1) {
                    var _$i = t1.m00, n = t1.m01, s = t1.m02, _$r = t1.m03, _$h = t1.m04, e = t1.m05, u = t1.m06, o = t1.m07, f = t1.m08;
                    return _$i * (f * _$h - e * o) + n * (-f * _$r + e * u) + s * (o * _$r - _$h * u);
                }, i.multiply = function(t1, i, n) {
                    var s = i.m00, _$r = i.m01, _$h = i.m02, e = i.m03, u = i.m04, o = i.m05, f = i.m06, _$c = i.m07, a = i.m08, v = n.m00, l = n.m01, _$d = n.m02, w = n.m03, g = n.m04, p = n.m05, _$y = n.m06, _$_ = n.m07, m = n.m08;
                    return t1.m00 = v * s + l * e + _$d * f, t1.m01 = v * _$r + l * u + _$d * _$c, t1.m02 = v * _$h + l * o + _$d * a, t1.m03 = w * s + g * e + p * f, t1.m04 = w * _$r + g * u + p * _$c, t1.m05 = w * _$h + g * o + p * a, t1.m06 = _$y * s + _$_ * e + m * f, t1.m07 = _$y * _$r + _$_ * u + m * _$c, t1.m08 = _$y * _$h + _$_ * o + m * a, t1;
                }, i.multiplyMat4 = function(t1, i, n) {
                    var s = i.m00, _$r = i.m01, _$h = i.m02, e = i.m03, u = i.m04, o = i.m05, f = i.m06, _$c = i.m07, a = i.m08, v = n.m00, l = n.m01, _$d = n.m02, w = n.m04, g = n.m05, p = n.m06, _$y = n.m08, _$_ = n.m09, m = n.m10;
                    return t1.m00 = v * s + l * e + _$d * f, t1.m01 = v * _$r + l * u + _$d * _$c, t1.m02 = v * _$h + l * o + _$d * a, t1.m03 = w * s + g * e + p * f, t1.m04 = w * _$r + g * u + p * _$c, t1.m05 = w * _$h + g * o + p * a, t1.m06 = _$y * s + _$_ * e + m * f, t1.m07 = _$y * _$r + _$_ * u + m * _$c, t1.m08 = _$y * _$h + _$_ * o + m * a, t1;
                }, i.transform = function(t1, i, n) {
                    this.translate(t1, i, n);
                }, i.translate = function(t1, i, n) {
                    var s = i.m00, _$r = i.m01, _$h = i.m02, e = i.m03, u = i.m04, o = i.m05, f = i.m06, _$c = i.m07, a = i.m08, v = n.x, l = n.y;
                    return t1.m00 = s, t1.m01 = _$r, t1.m02 = _$h, t1.m03 = e, t1.m04 = u, t1.m05 = o, t1.m06 = v * s + l * e + f, t1.m07 = v * _$r + l * u + _$c, t1.m08 = v * _$h + l * o + a, t1;
                }, i.scale = function(t1, i, n) {
                    var s = n.x, _$r = n.y;
                    return t1.m00 = s * i.m00, t1.m01 = s * i.m01, t1.m02 = s * i.m02, t1.m03 = _$r * i.m03, t1.m04 = _$r * i.m04, t1.m05 = _$r * i.m05, t1.m06 = i.m06, t1.m07 = i.m07, t1.m08 = i.m08, t1;
                }, i.rotate = function(t1, i, n) {
                    var s = i.m00, _$r = i.m01, _$h = i.m02, e = i.m03, u = i.m04, o = i.m05, f = i.m06, _$c = i.m07, a = i.m08, v = Math.sin(n), l = Math.cos(n);
                    return t1.m00 = l * s + v * e, t1.m01 = l * _$r + v * u, t1.m02 = l * _$h + v * o, t1.m03 = l * e - v * s, t1.m04 = l * u - v * _$r, t1.m05 = l * o - v * _$h, t1.m06 = f, t1.m07 = _$c, t1.m08 = a, t1;
                }, i.fromMat4 = function(t1, i) {
                    return t1.m00 = i.m00, t1.m01 = i.m01, t1.m02 = i.m02, t1.m03 = i.m04, t1.m04 = i.m05, t1.m05 = i.m06, t1.m06 = i.m08, t1.m07 = i.m09, t1.m08 = i.m10, t1;
                }, i.fromViewUp = function(t1, n, s) {
                    return Ss.lengthSqr(n) < Ln * Ln ? i.identity(t1) : (s = s || Ss.UNIT_Y, Ss.normalize(Ls, Ss.cross(Ls, s, n)), Ss.lengthSqr(Ls) < Ln * Ln ? i.identity(t1) : (Ss.cross(Bs, n, Ls), i.set(t1, Ls.x, Ls.y, Ls.z, Bs.x, Bs.y, Bs.z, n.x, n.y, n.z))), t1;
                }, i.fromTranslation = function(t1, i) {
                    return t1.m00 = 1, t1.m01 = 0, t1.m02 = 0, t1.m03 = 0, t1.m04 = 1, t1.m05 = 0, t1.m06 = i.x, t1.m07 = i.y, t1.m08 = 1, t1;
                }, i.fromScaling = function(t1, i) {
                    return t1.m00 = i.x, t1.m01 = 0, t1.m02 = 0, t1.m03 = 0, t1.m04 = i.y, t1.m05 = 0, t1.m06 = 0, t1.m07 = 0, t1.m08 = 1, t1;
                }, i.fromRotation = function(t1, i) {
                    var n = Math.sin(i), s = Math.cos(i);
                    return t1.m00 = s, t1.m01 = n, t1.m02 = 0, t1.m03 = -n, t1.m04 = s, t1.m05 = 0, t1.m06 = 0, t1.m07 = 0, t1.m08 = 1, t1;
                }, i.fromQuat = function(t1, i) {
                    var n = i.x, s = i.y, _$r = i.z, _$h = i.w, e = n + n, u = s + s, o = _$r + _$r, f = n * e, _$c = s * e, a = s * u, v = _$r * e, l = _$r * u, _$d = _$r * o, w = _$h * e, g = _$h * u, p = _$h * o;
                    return t1.m00 = 1 - a - _$d, t1.m03 = _$c - p, t1.m06 = v + g, t1.m01 = _$c + p, t1.m04 = 1 - f - _$d, t1.m07 = l - w, t1.m02 = v - g, t1.m05 = l + w, t1.m08 = 1 - f - a, t1;
                }, i.inverseTransposeMat4 = function(t1, i) {
                    var n = i.m00, s = i.m01, _$r = i.m02, _$h = i.m03, e = i.m04, u = i.m05, o = i.m06, f = i.m07, _$c = i.m08, a = i.m09, v = i.m10, l = i.m11, _$d = i.m12, w = i.m13, g = i.m14, p = i.m15, _$y = n * u - s * e, _$_ = n * o - _$r * e, m = n * f - _$h * e, b = s * o - _$r * u, k = s * f - _$h * u, A = _$r * f - _$h * o, E = _$c * w - a * _$d, T = _$c * g - v * _$d, S = _$c * p - l * _$d, _$O = a * g - v * w, _$I = a * p - l * w, _$R = v * p - l * g, _$M = _$y * _$R - _$_ * _$I + m * _$O + b * S - k * T + A * E;
                    return _$M ? (t1.m00 = (u * _$R - o * _$I + f * _$O) * (_$M = 1 / _$M), t1.m01 = (o * S - e * _$R - f * T) * _$M, t1.m02 = (e * _$I - u * S + f * E) * _$M, t1.m03 = (_$r * _$I - s * _$R - _$h * _$O) * _$M, t1.m04 = (n * _$R - _$r * S + _$h * T) * _$M, t1.m05 = (s * S - n * _$I - _$h * E) * _$M, t1.m06 = (w * A - g * k + p * b) * _$M, t1.m07 = (g * m - _$d * A - p * _$_) * _$M, t1.m08 = (_$d * k - w * m + p * _$y) * _$M, t1) : null;
                }, i.toArray = function(t1, i, n) {
                    return void 0 === n && (n = 0), t1[n + 0] = i.m00, t1[n + 1] = i.m01, t1[n + 2] = i.m02, t1[n + 3] = i.m03, t1[n + 4] = i.m04, t1[n + 5] = i.m05, t1[n + 6] = i.m06, t1[n + 7] = i.m07, t1[n + 8] = i.m08, t1;
                }, i.fromArray = function(t1, i, n) {
                    return void 0 === n && (n = 0), t1.m00 = i[n + 0], t1.m01 = i[n + 1], t1.m02 = i[n + 2], t1.m03 = i[n + 3], t1.m04 = i[n + 4], t1.m05 = i[n + 5], t1.m06 = i[n + 6], t1.m07 = i[n + 7], t1.m08 = i[n + 8], t1;
                }, i.add = function(t1, i, n) {
                    return t1.m00 = i.m00 + n.m00, t1.m01 = i.m01 + n.m01, t1.m02 = i.m02 + n.m02, t1.m03 = i.m03 + n.m03, t1.m04 = i.m04 + n.m04, t1.m05 = i.m05 + n.m05, t1.m06 = i.m06 + n.m06, t1.m07 = i.m07 + n.m07, t1.m08 = i.m08 + n.m08, t1;
                }, i.subtract = function(t1, i, n) {
                    return t1.m00 = i.m00 - n.m00, t1.m01 = i.m01 - n.m01, t1.m02 = i.m02 - n.m02, t1.m03 = i.m03 - n.m03, t1.m04 = i.m04 - n.m04, t1.m05 = i.m05 - n.m05, t1.m06 = i.m06 - n.m06, t1.m07 = i.m07 - n.m07, t1.m08 = i.m08 - n.m08, t1;
                }, i.multiplyScalar = function(t1, i, n) {
                    return t1.m00 = i.m00 * n, t1.m01 = i.m01 * n, t1.m02 = i.m02 * n, t1.m03 = i.m03 * n, t1.m04 = i.m04 * n, t1.m05 = i.m05 * n, t1.m06 = i.m06 * n, t1.m07 = i.m07 * n, t1.m08 = i.m08 * n, t1;
                }, i.multiplyScalarAndAdd = function(t1, i, n, s) {
                    return t1.m00 = n.m00 * s + i.m00, t1.m01 = n.m01 * s + i.m01, t1.m02 = n.m02 * s + i.m02, t1.m03 = n.m03 * s + i.m03, t1.m04 = n.m04 * s + i.m04, t1.m05 = n.m05 * s + i.m05, t1.m06 = n.m06 * s + i.m06, t1.m07 = n.m07 * s + i.m07, t1.m08 = n.m08 * s + i.m08, t1;
                }, i.strictEquals = function(t1, i) {
                    return t1.m00 === i.m00 && t1.m01 === i.m01 && t1.m02 === i.m02 && t1.m03 === i.m03 && t1.m04 === i.m04 && t1.m05 === i.m05 && t1.m06 === i.m06 && t1.m07 === i.m07 && t1.m08 === i.m08;
                }, i.equals = function(t1, i, n) {
                    return void 0 === n && (n = Ln), Cs(t1.m00 - i.m00) <= n * Ns(1, Cs(t1.m00), Cs(i.m00)) && Cs(t1.m01 - i.m01) <= n * Ns(1, Cs(t1.m01), Cs(i.m01)) && Cs(t1.m02 - i.m02) <= n * Ns(1, Cs(t1.m02), Cs(i.m02)) && Cs(t1.m03 - i.m03) <= n * Ns(1, Cs(t1.m03), Cs(i.m03)) && Cs(t1.m04 - i.m04) <= n * Ns(1, Cs(t1.m04), Cs(i.m04)) && Cs(t1.m05 - i.m05) <= n * Ns(1, Cs(t1.m05), Cs(i.m05)) && Cs(t1.m06 - i.m06) <= n * Ns(1, Cs(t1.m06), Cs(i.m06)) && Cs(t1.m07 - i.m07) <= n * Ns(1, Cs(t1.m07), Cs(i.m07)) && Cs(t1.m08 - i.m08) <= n * Ns(1, Cs(t1.m08), Cs(i.m08));
                }, i.toEuler = function(t1, i) {
                    var n = t1.m00, s = t1.m01;
                    t1.m02;
                    var _$r = t1.m03, _$h = t1.m04;
                    t1.m05;
                    var e = t1.m06, u = t1.m07, o = t1.m08;
                    return u < .999 ? u > -0.999 ? (i.x = Math.asin(-u), i.y = Math.atan2(e, o), i.z = Math.atan2(s, _$h), !0) : (i.x = Pn, i.y = Math.atan2(_$r, n), i.z = 0, !1) : (i.x = -Pn, i.y = Math.atan2(-_$r, n), i.z = 0, !1);
                };
                var n = i.prototype;
                return n.clone = function() {
                    return new i(this);
                }, n.set = function(t1, i, n, s, r, h, e, u, o) {
                    return void 0 === t1 && (t1 = 1), void 0 === i && (i = 0), void 0 === n && (n = 0), void 0 === s && (s = 0), void 0 === r && (r = 1), void 0 === h && (h = 0), void 0 === e && (e = 0), void 0 === u && (u = 0), void 0 === o && (o = 1), "object" == (void 0 === t1 ? "undefined" : _type_of(t1)) ? (this.m00 = t1.m00, this.m01 = t1.m01, this.m02 = t1.m02, this.m03 = t1.m03, this.m04 = t1.m04, this.m05 = t1.m05, this.m06 = t1.m06, this.m07 = t1.m07, this.m08 = t1.m08) : (this.m00 = t1, this.m01 = i, this.m02 = n, this.m03 = s, this.m04 = r, this.m05 = h, this.m06 = e, this.m07 = u, this.m08 = o), this;
                }, n.equals = function(t1, n) {
                    return void 0 === n && (n = Ln), i.equals(this, t1, n);
                }, n.strictEquals = function(t1) {
                    return i.strictEquals(this, t1);
                }, n.toString = function() {
                    return "[\n" + this.m00 + ", " + this.m01 + ", " + this.m02 + ",\n" + this.m03 + ", " + this.m04 + ", " + this.m05 + ",\n" + this.m06 + ", " + this.m07 + ", " + this.m08 + "\n]";
                }, n.identity = function() {
                    return i.identity(this);
                }, n.transpose = function() {
                    var _$i = this.m01, n = this.m02, s = this.m05;
                    return this.m01 = this.m03, this.m02 = this.m06, this.m03 = _$i, this.m05 = this.m07, this.m06 = n, this.m07 = s, this;
                }, n.invert = function() {
                    return i.invert(this, this);
                }, n.determinant = function() {
                    return i.determinant(this);
                }, n.add = function(t1) {
                    return this.m00 += t1.m00, this.m01 += t1.m01, this.m02 += t1.m02, this.m03 += t1.m03, this.m04 += t1.m04, this.m05 += t1.m05, this.m06 += t1.m06, this.m07 += t1.m07, this.m08 += t1.m08, this;
                }, n.subtract = function(t1) {
                    return this.m00 -= t1.m00, this.m01 -= t1.m01, this.m02 -= t1.m02, this.m03 -= t1.m03, this.m04 -= t1.m04, this.m05 -= t1.m05, this.m06 -= t1.m06, this.m07 -= t1.m07, this.m08 -= t1.m08, this;
                }, n.multiply = function(t1) {
                    return i.multiply(this, this, t1);
                }, n.multiplyScalar = function(t1) {
                    return this.m00 *= t1, this.m01 *= t1, this.m02 *= t1, this.m03 *= t1, this.m04 *= t1, this.m05 *= t1, this.m06 *= t1, this.m07 *= t1, this.m08 *= t1, this;
                }, n.scale = function(t1) {
                    var _$i = t1.x, n = t1.y;
                    return this.m00 *= _$i, this.m01 *= _$i, this.m02 *= _$i, this.m03 *= n, this.m04 *= n, this.m05 *= n, this;
                }, n.rotate = function(t1) {
                    var n = this.m00, s = this.m01, _$r = this.m02, _$h = this.m03, e = this.m04, u = this.m05, o = this.m06, f = this.m07, _$c = this.m08, a = Math.sin(t1), v = Math.cos(t1);
                    return this.m00 = v * n + a * _$h, this.m01 = v * s + a * e, this.m02 = v * _$r + a * u, this.m03 = v * _$h - a * n, this.m04 = v * e - a * s, this.m05 = v * u - a * _$r, this.m06 = o, this.m07 = f, this.m08 = _$c, this;
                }, n.fromQuat = function(t1) {
                    var _$i = t1.x, n = t1.y, s = t1.z, _$r = t1.w, _$h = _$i + _$i, e = n + n, u = s + s, o = _$i * _$h, f = n * _$h, _$c = n * e, a = s * _$h, v = s * e, l = s * u, _$d = _$r * _$h, w = _$r * e, g = _$r * u;
                    return this.m00 = 1 - _$c - l, this.m03 = f - g, this.m06 = a + w, this.m01 = f + g, this.m04 = 1 - o - l, this.m07 = v - _$d, this.m02 = a - w, this.m05 = v + _$d, this.m08 = 1 - o - _$c, this;
                }, i;
            }(mi));
            Ps.IDENTITY = Object.freeze(new Ps);
            var Ls = new Ss, Bs = new Ss;
            An.fastDefine("cc.Mat3", Ps, {
                m00: 1,
                m01: 0,
                m02: 0,
                m03: 0,
                m04: 1,
                m05: 0,
                m06: 0,
                m07: 0,
                m08: 1
            }), A.Mat3 = Ps;
            var Fs = Math.abs, Us = Math.max, xs = Math.min, js = Math.PI, Gs = Math.acos, Hs = Math.sin, Vs = Math.cos, Ws = Math.sqrt, zs = Math.atan2, $s = Math.asin, Xs = Math.sign, qs = t1("au", function(t1) {
                function i(i, n, s, r) {
                    var _$h;
                    return _$h = t1.call(this) || this, "object" == (void 0 === i ? "undefined" : _type_of(i)) ? (_$h.x = i.x, _$h.y = i.y, _$h.z = i.z, _$h.w = i.w) : (_$h.x = i || 0, _$h.y = n || 0, _$h.z = s || 0, _$h.w = null != r ? r : 1), _$h;
                }
                h(i, t1), i.clone = function(t1) {
                    return new i(t1.x, t1.y, t1.z, t1.w);
                }, i.copy = function(t1, i) {
                    return t1.x = i.x, t1.y = i.y, t1.z = i.z, t1.w = i.w, t1;
                }, i.set = function(t1, i, n, s, r) {
                    return t1.x = i, t1.y = n, t1.z = s, t1.w = r, t1;
                }, i.identity = function(t1) {
                    return t1.x = 0, t1.y = 0, t1.z = 0, t1.w = 1, t1;
                }, i.rotationTo = function(t1, n, s) {
                    var _$r = Ss.dot(n, s);
                    return _$r < -0.999999 ? (Ss.cross(Qs, Ss.UNIT_X, n), 1e-6 > Qs.length() && Ss.cross(Qs, Ss.UNIT_Y, n), Ss.normalize(Qs, Qs), i.fromAxisAngle(t1, Qs, js), t1) : _$r > .999999 ? (t1.x = 0, t1.y = 0, t1.z = 0, t1.w = 1, t1) : (Ss.cross(Qs, n, s), t1.x = Qs.x, t1.y = Qs.y, t1.z = Qs.z, t1.w = 1 + _$r, i.normalize(t1, t1));
                }, i.getAxisAngle = function(t1, i) {
                    var n = 2 * Gs(i.w), s = Hs(n / 2);
                    return 0 !== s ? (t1.x = i.x / s, t1.y = i.y / s, t1.z = i.z / s) : (t1.x = 1, t1.y = 0, t1.z = 0), n;
                }, i.multiply = function(t1, i, n) {
                    var s = i.x * n.w + i.w * n.x + i.y * n.z - i.z * n.y, _$r = i.y * n.w + i.w * n.y + i.z * n.x - i.x * n.z, _$h = i.z * n.w + i.w * n.z + i.x * n.y - i.y * n.x, e = i.w * n.w - i.x * n.x - i.y * n.y - i.z * n.z;
                    return t1.x = s, t1.y = _$r, t1.z = _$h, t1.w = e, t1;
                }, i.multiplyScalar = function(t1, i, n) {
                    return t1.x = i.x * n, t1.y = i.y * n, t1.z = i.z * n, t1.w = i.w * n, t1;
                }, i.scaleAndAdd = function(t1, i, n, s) {
                    return t1.x = i.x + n.x * s, t1.y = i.y + n.y * s, t1.z = i.z + n.z * s, t1.w = i.w + n.w * s, t1;
                }, i.rotateX = function(t1, i, n) {
                    var s = Hs(n *= .5), _$r = Vs(n), _$h = i.x, e = i.y, u = i.z, o = i.w;
                    return t1.x = _$h * _$r + o * s, t1.y = e * _$r + u * s, t1.z = u * _$r - e * s, t1.w = o * _$r - _$h * s, t1;
                }, i.rotateY = function(t1, i, n) {
                    var s = Hs(n *= .5), _$r = Vs(n), _$h = i.x, e = i.y, u = i.z, o = i.w;
                    return t1.x = _$h * _$r - u * s, t1.y = e * _$r + o * s, t1.z = u * _$r + _$h * s, t1.w = o * _$r - e * s, t1;
                }, i.rotateZ = function(t1, i, n) {
                    var s = Hs(n *= .5), _$r = Vs(n), _$h = i.x, e = i.y, u = i.z, o = i.w;
                    return t1.x = _$h * _$r + e * s, t1.y = e * _$r - _$h * s, t1.z = u * _$r + o * s, t1.w = o * _$r - u * s, t1;
                }, i.rotateAround = function(t1, n, s, r) {
                    return i.invert(Ks, n), Ss.transformQuat(Qs, s, Ks), i.fromAxisAngle(Ks, Qs, r), i.multiply(t1, n, Ks), t1;
                }, i.rotateAroundLocal = function(t1, n, s, r) {
                    return i.fromAxisAngle(Ks, s, r), i.multiply(t1, n, Ks), t1;
                }, i.calculateW = function(t1, i) {
                    return t1.x = i.x, t1.y = i.y, t1.z = i.z, t1.w = Ws(Fs(1 - i.x * i.x - i.y * i.y - i.z * i.z)), t1;
                }, i.dot = function(t1, i) {
                    return t1.x * i.x + t1.y * i.y + t1.z * i.z + t1.w * i.w;
                }, i.lerp = function(t1, i, n, s) {
                    return t1.x = i.x + s * (n.x - i.x), t1.y = i.y + s * (n.y - i.y), t1.z = i.z + s * (n.z - i.z), t1.w = i.w + s * (n.w - i.w), t1;
                }, i.slerp = function(t1, i, n, s) {
                    var _$r = 0, _$h = 0, e = n.x, u = n.y, o = n.z, f = n.w, _$c = i.x * n.x + i.y * n.y + i.z * n.z + i.w * n.w;
                    if (_$c < 0 && (_$c = -_$c, e = -e, u = -u, o = -o, f = -f), 1 - _$c > 1e-6) {
                        var a = Gs(_$c), v = Hs(a);
                        _$r = Hs((1 - s) * a) / v, _$h = Hs(s * a) / v;
                    } else _$r = 1 - s, _$h = s;
                    return t1.x = _$r * i.x + _$h * e, t1.y = _$r * i.y + _$h * u, t1.z = _$r * i.z + _$h * o, t1.w = _$r * i.w + _$h * f, t1;
                }, i.sqlerp = function(t1, n, s, r, h, e) {
                    return i.slerp(Ks, n, h, e), i.slerp(Js, s, r, e), i.slerp(t1, Ks, Js, 2 * e * (1 - e)), t1;
                }, i.invert = function(t1, i) {
                    var n = i.x * i.x + i.y * i.y + i.z * i.z + i.w * i.w, s = n ? 1 / n : 0;
                    return t1.x = -i.x * s, t1.y = -i.y * s, t1.z = -i.z * s, t1.w = i.w * s, t1;
                }, i.conjugate = function(t1, i) {
                    return t1.x = -i.x, t1.y = -i.y, t1.z = -i.z, t1.w = i.w, t1;
                }, i.len = function(t1) {
                    return Ws(t1.x * t1.x + t1.y * t1.y + t1.z * t1.z + t1.w * t1.w);
                }, i.lengthSqr = function(t1) {
                    return t1.x * t1.x + t1.y * t1.y + t1.z * t1.z + t1.w * t1.w;
                }, i.normalize = function(t1, i) {
                    var n = i.x * i.x + i.y * i.y + i.z * i.z + i.w * i.w;
                    return n > 0 ? (n = 1 / Ws(n), t1.x = i.x * n, t1.y = i.y * n, t1.z = i.z * n, t1.w = i.w * n) : (t1.x = 0, t1.y = 0, t1.z = 0, t1.w = 0), t1;
                }, i.fromAxes = function(t1, n, s, r) {
                    return Ps.set(Zs, n.x, n.y, n.z, s.x, s.y, s.z, r.x, r.y, r.z), i.normalize(t1, i.fromMat3(t1, Zs));
                }, i.fromViewUp = function(t1, n, s) {
                    return Ps.fromViewUp(Zs, n, s), i.normalize(t1, i.fromMat3(t1, Zs));
                }, i.fromAxisAngle = function(t1, i, n) {
                    var s = Hs(n *= .5);
                    return t1.x = s * i.x, t1.y = s * i.y, t1.z = s * i.z, t1.w = Vs(n), t1;
                }, i.fromMat3 = function(t1, i) {
                    var n = i.m00, s = i.m01, _$r = i.m02, _$h = i.m03, e = i.m04, u = i.m05, o = i.m06, f = i.m07, _$c = i.m08, a = n - e - _$c, v = e - n - _$c, l = _$c - n - e, _$d = 0, w = n + e + _$c;
                    a > w && (w = a, _$d = 1), v > w && (w = v, _$d = 2), l > w && (w = l, _$d = 3);
                    var g = .5 * Ws(w + 1), p = .25 / g;
                    switch(_$d){
                        case 0:
                            t1.w = g, t1.x = (u - f) * p, t1.y = (o - _$r) * p, t1.z = (s - _$h) * p;
                            break;
                        case 1:
                            t1.w = (u - f) * p, t1.x = g, t1.y = (s + _$h) * p, t1.z = (o + _$r) * p;
                            break;
                        case 2:
                            t1.w = (o - _$r) * p, t1.x = (s + _$h) * p, t1.y = g, t1.z = (u + f) * p;
                            break;
                        case 3:
                            t1.w = (s - _$h) * p, t1.x = (o + _$r) * p, t1.y = (u + f) * p, t1.z = g;
                            break;
                        default:
                            t1.w = 1, t1.x = 0, t1.y = 0, t1.z = 0;
                    }
                    return t1;
                }, i.fromEuler = function(t1, i, n, s) {
                    n *= tr, s *= tr;
                    var _$r = Hs(i *= tr), _$h = Vs(i), e = Hs(n), u = Vs(n), o = Hs(s), f = Vs(s);
                    return t1.x = _$r * u * f + _$h * e * o, t1.y = _$h * e * f + _$r * u * o, t1.z = _$h * u * o - _$r * e * f, t1.w = _$h * u * f - _$r * e * o, t1;
                }, i.fromAngleZ = function(t1, i) {
                    return i *= tr, t1.x = t1.y = 0, t1.z = Hs(i), t1.w = Vs(i), t1;
                }, i.toAxisX = function(t1, i) {
                    var n = 2 * i.y, s = 2 * i.z;
                    return t1.x = 1 - n * i.y - s * i.z, t1.y = n * i.x + s * i.w, t1.z = s * i.x - n * i.w, t1;
                }, i.toAxisY = function(t1, i) {
                    var n = 2 * i.x, s = 2 * i.y, _$r = 2 * i.z;
                    return t1.x = s * i.x - _$r * i.w, t1.y = 1 - n * i.x - _$r * i.z, t1.z = _$r * i.y + n * i.w, t1;
                }, i.toAxisZ = function(t1, i) {
                    var n = 2 * i.x, s = 2 * i.y, _$r = 2 * i.z;
                    return t1.x = _$r * i.x + s * i.w, t1.y = _$r * i.y - n * i.w, t1.z = 1 - n * i.x - s * i.y, t1;
                }, i.toEuler = function(t1, i, n) {
                    var s = i.x, _$r = i.y, _$h = i.z, e = i.w, u = 0, o = 0, f = 0, _$c = s * _$r + _$h * e;
                    if (_$c > .499999) u = 0, o = Hn(2 * zs(s, e)), f = 90;
                    else if (_$c < -0.499999) u = 0, o = -Hn(2 * zs(s, e)), f = -90;
                    else {
                        var v = _$h * _$h;
                        u = Hn(zs(2 * s * e - 2 * _$r * _$h, 1 - s * s * 2 - 2 * v)), o = Hn(zs(2 * _$r * e - 2 * s * _$h, 1 - _$r * _$r * 2 - 2 * v)), f = Hn($s(2 * _$c)), n && (u = -180 * Xs(u + 1e-6) + u, o = -180 * Xs(o + 1e-6) + o, f = 180 * Xs(f + 1e-6) - f);
                    }
                    return t1.x = u, t1.y = o, t1.z = f, t1;
                }, i.toEulerInYXZOrder = function(t1, i) {
                    Ps.fromQuat(Zs, i), Ps.toEuler(Zs, t1), t1.x = Hn(t1.x), t1.y = Hn(t1.y), t1.z = Hn(t1.z);
                }, i.toArray = function(t1, i, n) {
                    return void 0 === n && (n = 0), t1[n + 0] = i.x, t1[n + 1] = i.y, t1[n + 2] = i.z, t1[n + 3] = i.w, t1;
                }, i.fromArray = function(t1, i, n) {
                    return void 0 === n && (n = 0), t1.x = i[n + 0], t1.y = i[n + 1], t1.z = i[n + 2], t1.w = i[n + 3], t1;
                }, i.strictEquals = function(t1, i) {
                    return t1.x === i.x && t1.y === i.y && t1.z === i.z && t1.w === i.w;
                }, i.equals = function(t1, i, n) {
                    return void 0 === n && (n = Ln), Fs(t1.x - i.x) <= n * Us(1, Fs(t1.x), Fs(i.x)) && Fs(t1.y - i.y) <= n * Us(1, Fs(t1.y), Fs(i.y)) && Fs(t1.z - i.z) <= n * Us(1, Fs(t1.z), Fs(i.z)) && Fs(t1.w - i.w) <= n * Us(1, Fs(t1.w), Fs(i.w));
                }, i.angle = function(t1, n) {
                    return 2 * Gs(xs(Fs(i.dot(t1, n)), 1));
                }, i.rotateTowards = function(t1, n, s, r) {
                    var _$h = i.angle(n, s);
                    if (0 === _$h) return t1.x = s.x, t1.y = s.y, t1.z = s.z, t1.w = s.w, t1;
                    var e = xs(r / Hn(_$h), 1);
                    return i.slerp(t1, n, s, e);
                };
                var n = i.prototype;
                return n.clone = function() {
                    return new i(this.x, this.y, this.z, this.w);
                }, n.set = function(t1, i, n, s) {
                    return "object" == (void 0 === t1 ? "undefined" : _type_of(t1)) ? (this.x = t1.x, this.y = t1.y, this.z = t1.z, this.w = t1.w) : (this.x = t1 || 0, this.y = i || 0, this.z = n || 0, this.w = null != s ? s : 1), this;
                }, n.equals = function(t1, n) {
                    return void 0 === n && (n = Ln), i.equals(this, t1, n);
                }, n.strictEquals = function(t1) {
                    return t1 && this.x === t1.x && this.y === t1.y && this.z === t1.z && this.w === t1.w;
                }, n.getEulerAngles = function(t1) {
                    return i.toEuler(t1, this);
                }, n.lerp = function(t1, i) {
                    return this.x += i * (t1.x - this.x), this.y += i * (t1.y - this.y), this.z += i * (t1.z - this.z), this.w += i * (t1.w - this.w), this;
                }, n.slerp = function(t1, n) {
                    return i.slerp(this, this, t1, n);
                }, n.length = function() {
                    var _$i = this.x, n = this.y, s = this.z, _$r = this.w;
                    return Ws(_$i * _$i + n * n + s * s + _$r * _$r);
                }, n.lengthSqr = function() {
                    var _$i = this.x, n = this.y, s = this.z, _$r = this.w;
                    return _$i * _$i + n * n + s * s + _$r * _$r;
                }, n.toString = function() {
                    return "(" + this.x + ", " + this.y + ", " + this.z + ", " + this.w + ")";
                }, i;
            }(mi));
            qs.IDENTITY = Object.freeze(new qs);
            var Ks = new qs, Js = new qs, Qs = new Ss, Zs = new Ps, tr = .5 * js / 180;
            function ir(t1, i, n, s) {
                return void 0 === t1 && (t1 = 0), void 0 === i && (i = 0), void 0 === n && (n = 0), void 0 === s && (s = 1), new qs(t1, i, n, s);
            }
            An.fastDefine("cc.Quat", qs, {
                x: 0,
                y: 0,
                z: 0,
                w: 1
            }), A.Quat = qs, A.quat = ir;
            var nr = Object.freeze, sr = t1("aF", nr([
                nr([
                    1,
                    0,
                    0,
                    1
                ]),
                nr([
                    0,
                    1,
                    -1,
                    0
                ]),
                nr([
                    -1,
                    0,
                    0,
                    -1
                ]),
                nr([
                    0,
                    -1,
                    1,
                    0
                ])
            ])), rr = Math.abs, hr = Math.max, er = Math.sqrt, ur = Math.sin, or = Math.cos, fr = Math.tan, cr = t1("ax", function(t1) {
                function i(i, n, s, r, h, e, u, o, f, c, v, l, d, w, g, p) {
                    void 0 === i && (i = 1), void 0 === n && (n = 0), void 0 === s && (s = 0), void 0 === r && (r = 0), void 0 === h && (h = 0), void 0 === e && (e = 1), void 0 === u && (u = 0), void 0 === o && (o = 0), void 0 === f && (f = 0), void 0 === c && (c = 0), void 0 === v && (v = 1), void 0 === l && (l = 0), void 0 === d && (d = 0), void 0 === w && (w = 0), void 0 === g && (g = 0), void 0 === p && (p = 1);
                    var _$y, _$_ = a(_$y = t1.call(this) || this);
                    return "object" == (void 0 === i ? "undefined" : _type_of(i)) ? (_$_.m00 = i.m00, _$y.m01 = i.m01, _$y.m02 = i.m02, _$y.m03 = i.m03, _$_.m04 = i.m04, _$y.m05 = i.m05, _$y.m06 = i.m06, _$y.m07 = i.m07, _$_.m08 = i.m08, _$y.m09 = i.m09, _$y.m10 = i.m10, _$y.m11 = i.m11, _$_.m12 = i.m12, _$y.m13 = i.m13, _$y.m14 = i.m14, _$y.m15 = i.m15) : (_$_.m00 = i, _$y.m01 = n, _$y.m02 = s, _$y.m03 = r, _$_.m04 = h, _$y.m05 = e, _$y.m06 = u, _$y.m07 = o, _$_.m08 = f, _$y.m09 = c, _$y.m10 = v, _$y.m11 = l, _$_.m12 = d, _$y.m13 = w, _$y.m14 = g, _$y.m15 = p), _$y;
                }
                h(i, t1), i.clone = function(t1) {
                    return new i(t1.m00, t1.m01, t1.m02, t1.m03, t1.m04, t1.m05, t1.m06, t1.m07, t1.m08, t1.m09, t1.m10, t1.m11, t1.m12, t1.m13, t1.m14, t1.m15);
                }, i.copy = function(t1, i) {
                    return t1.m00 = i.m00, t1.m01 = i.m01, t1.m02 = i.m02, t1.m03 = i.m03, t1.m04 = i.m04, t1.m05 = i.m05, t1.m06 = i.m06, t1.m07 = i.m07, t1.m08 = i.m08, t1.m09 = i.m09, t1.m10 = i.m10, t1.m11 = i.m11, t1.m12 = i.m12, t1.m13 = i.m13, t1.m14 = i.m14, t1.m15 = i.m15, t1;
                }, i.set = function(t1, i, n, s, r, h, e, u, o, f, c, a, v, l, d, w, g) {
                    return t1.m00 = i, t1.m01 = n, t1.m02 = s, t1.m03 = r, t1.m04 = h, t1.m05 = e, t1.m06 = u, t1.m07 = o, t1.m08 = f, t1.m09 = c, t1.m10 = a, t1.m11 = v, t1.m12 = l, t1.m13 = d, t1.m14 = w, t1.m15 = g, t1;
                }, i.identity = function(t1) {
                    return t1.m00 = 1, t1.m01 = 0, t1.m02 = 0, t1.m03 = 0, t1.m04 = 0, t1.m05 = 1, t1.m06 = 0, t1.m07 = 0, t1.m08 = 0, t1.m09 = 0, t1.m10 = 1, t1.m11 = 0, t1.m12 = 0, t1.m13 = 0, t1.m14 = 0, t1.m15 = 1, t1;
                }, i.zero = function(t1) {
                    return t1.m00 = 0, t1.m01 = 0, t1.m02 = 0, t1.m03 = 0, t1.m04 = 0, t1.m05 = 0, t1.m06 = 0, t1.m07 = 0, t1.m08 = 0, t1.m09 = 0, t1.m10 = 0, t1.m11 = 0, t1.m12 = 0, t1.m13 = 0, t1.m14 = 0, t1.m15 = 0, t1;
                }, i.transpose = function(t1, i) {
                    if (t1 === i) {
                        var n = i.m01, s = i.m02, _$r = i.m03, _$h = i.m06, e = i.m07, u = i.m11;
                        t1.m01 = i.m04, t1.m02 = i.m08, t1.m03 = i.m12, t1.m04 = n, t1.m06 = i.m09, t1.m07 = i.m13, t1.m08 = s, t1.m09 = _$h, t1.m11 = i.m14, t1.m12 = _$r, t1.m13 = e, t1.m14 = u;
                    } else t1.m00 = i.m00, t1.m01 = i.m04, t1.m02 = i.m08, t1.m03 = i.m12, t1.m04 = i.m01, t1.m05 = i.m05, t1.m06 = i.m09, t1.m07 = i.m13, t1.m08 = i.m02, t1.m09 = i.m06, t1.m10 = i.m10, t1.m11 = i.m14, t1.m12 = i.m03, t1.m13 = i.m07, t1.m14 = i.m11, t1.m15 = i.m15;
                    return t1;
                }, i.invert = function(t1, n) {
                    var s = n.m00, _$r = n.m01, _$h = n.m02, e = n.m03, u = n.m04, o = n.m05, f = n.m06, _$c = n.m07, a = n.m08, v = n.m09, l = n.m10, _$d = n.m11, w = n.m12, g = n.m13, p = n.m14, _$y = n.m15, _$_ = s * o - _$r * u, m = s * f - _$h * u, b = s * _$c - e * u, k = _$r * f - _$h * o, A = _$r * _$c - e * o, E = _$h * _$c - e * f, T = a * g - v * w, S = a * p - l * w, _$O = a * _$y - _$d * w, _$I = v * p - l * g, _$R = v * _$y - _$d * g, _$M = l * _$y - _$d * p, _$C = _$_ * _$M - m * _$R + b * _$I + k * _$O - A * S + E * T;
                    return 0 === _$C ? i.zero(t1) : (t1.m00 = (o * _$M - f * _$R + _$c * _$I) * (_$C = 1 / _$C), t1.m01 = (_$h * _$R - _$r * _$M - e * _$I) * _$C, t1.m02 = (g * E - p * A + _$y * k) * _$C, t1.m03 = (l * A - v * E - _$d * k) * _$C, t1.m04 = (f * _$O - u * _$M - _$c * S) * _$C, t1.m05 = (s * _$M - _$h * _$O + e * S) * _$C, t1.m06 = (p * b - w * E - _$y * m) * _$C, t1.m07 = (a * E - l * b + _$d * m) * _$C, t1.m08 = (u * _$R - o * _$O + _$c * T) * _$C, t1.m09 = (_$r * _$O - s * _$R - e * T) * _$C, t1.m10 = (w * A - g * b + _$y * _$_) * _$C, t1.m11 = (v * b - a * A - _$d * _$_) * _$C, t1.m12 = (o * S - u * _$I - f * T) * _$C, t1.m13 = (s * _$I - _$r * S + _$h * T) * _$C, t1.m14 = (g * m - w * k - p * _$_) * _$C, t1.m15 = (a * k - v * m + l * _$_) * _$C, t1);
                }, i.determinant = function(t1) {
                    var _$i = t1.m00, n = t1.m01, s = t1.m02, _$r = t1.m03, _$h = t1.m04, e = t1.m05, u = t1.m06, o = t1.m07, f = t1.m08, _$c = t1.m09, a = t1.m10, v = t1.m11, l = t1.m12, _$d = t1.m13, w = t1.m14, g = t1.m15;
                    return (_$i * e - n * _$h) * (a * g - v * w) - (_$i * u - s * _$h) * (_$c * g - v * _$d) + (_$i * o - _$r * _$h) * (_$c * w - a * _$d) + (n * u - s * e) * (f * g - v * l) - (n * o - _$r * e) * (f * w - a * l) + (s * o - _$r * u) * (f * _$d - _$c * l);
                }, i.multiply = function(t1, i, n) {
                    var s = i.m00, _$r = i.m01, _$h = i.m02, e = i.m03, u = i.m04, o = i.m05, f = i.m06, _$c = i.m07, a = i.m08, v = i.m09, l = i.m10, _$d = i.m11, w = i.m12, g = i.m13, p = i.m14, _$y = i.m15, _$_ = n.m00, m = n.m01, b = n.m02, k = n.m03;
                    return t1.m00 = _$_ * s + m * u + b * a + k * w, t1.m01 = _$_ * _$r + m * o + b * v + k * g, t1.m02 = _$_ * _$h + m * f + b * l + k * p, t1.m03 = _$_ * e + m * _$c + b * _$d + k * _$y, _$_ = n.m04, m = n.m05, t1.m04 = _$_ * s + m * u + (b = n.m06) * a + (k = n.m07) * w, t1.m05 = _$_ * _$r + m * o + b * v + k * g, t1.m06 = _$_ * _$h + m * f + b * l + k * p, t1.m07 = _$_ * e + m * _$c + b * _$d + k * _$y, _$_ = n.m08, m = n.m09, t1.m08 = _$_ * s + m * u + (b = n.m10) * a + (k = n.m11) * w, t1.m09 = _$_ * _$r + m * o + b * v + k * g, t1.m10 = _$_ * _$h + m * f + b * l + k * p, t1.m11 = _$_ * e + m * _$c + b * _$d + k * _$y, _$_ = n.m12, m = n.m13, t1.m12 = _$_ * s + m * u + (b = n.m14) * a + (k = n.m15) * w, t1.m13 = _$_ * _$r + m * o + b * v + k * g, t1.m14 = _$_ * _$h + m * f + b * l + k * p, t1.m15 = _$_ * e + m * _$c + b * _$d + k * _$y, t1;
                }, i.transform = function(t1, i, n) {
                    var s = n.x, _$r = n.y, _$h = n.z;
                    if (i === t1) t1.m12 = i.m00 * s + i.m04 * _$r + i.m08 * _$h + i.m12, t1.m13 = i.m01 * s + i.m05 * _$r + i.m09 * _$h + i.m13, t1.m14 = i.m02 * s + i.m06 * _$r + i.m10 * _$h + i.m14, t1.m15 = i.m03 * s + i.m07 * _$r + i.m11 * _$h + i.m15;
                    else {
                        var e = i.m00, u = i.m01, o = i.m02, f = i.m03, _$c = i.m04, a = i.m05, v = i.m06, l = i.m07, _$d = i.m08, w = i.m09, g = i.m10, p = i.m11;
                        t1.m00 = e, t1.m01 = u, t1.m02 = o, t1.m03 = f, t1.m04 = _$c, t1.m05 = a, t1.m06 = v, t1.m07 = l, t1.m08 = _$d, t1.m09 = w, t1.m10 = g, t1.m11 = p, t1.m12 = e * s + _$c * _$r + _$d * _$h + i.m12, t1.m13 = u * s + a * _$r + w * _$h + i.m13, t1.m14 = o * s + v * _$r + g * _$h + i.m14, t1.m15 = f * s + l * _$r + p * _$h + i.m15;
                    }
                    return t1;
                }, i.translate = function(t1, i, n) {
                    return i === t1 ? (t1.m12 += n.x, t1.m13 += n.y, t1.m14 += n.z) : (t1.m00 = i.m00, t1.m01 = i.m01, t1.m02 = i.m02, t1.m03 = i.m03, t1.m04 = i.m04, t1.m05 = i.m05, t1.m06 = i.m06, t1.m07 = i.m07, t1.m08 = i.m08, t1.m09 = i.m09, t1.m10 = i.m10, t1.m11 = i.m11, t1.m12 = i.m12 + n.x, t1.m13 = i.m13 + n.y, t1.m14 = i.m14 + n.z, t1.m15 = i.m15), t1;
                }, i.scale = function(t1, i, n) {
                    var s = n.x, _$r = n.y, _$h = n.z;
                    return t1.m00 = i.m00 * s, t1.m01 = i.m01 * s, t1.m02 = i.m02 * s, t1.m03 = i.m03 * s, t1.m04 = i.m04 * _$r, t1.m05 = i.m05 * _$r, t1.m06 = i.m06 * _$r, t1.m07 = i.m07 * _$r, t1.m08 = i.m08 * _$h, t1.m09 = i.m09 * _$h, t1.m10 = i.m10 * _$h, t1.m11 = i.m11 * _$h, t1.m12 = i.m12, t1.m13 = i.m13, t1.m14 = i.m14, t1.m15 = i.m15, t1;
                }, i.rotate = function(t1, i, n, s) {
                    var _$r = s.x, _$h = s.y, e = s.z, u = er(_$r * _$r + _$h * _$h + e * e);
                    if (rr(u) < Ln) return null;
                    _$r *= u = 1 / u, _$h *= u, e *= u;
                    var o = ur(n), f = or(n), _$c = 1 - f, a = i.m00, v = i.m01, l = i.m02, _$d = i.m03, w = i.m04, g = i.m05, p = i.m06, _$y = i.m07, _$_ = i.m08, m = i.m09, b = i.m10, k = i.m11, A = _$r * _$r * _$c + f, E = _$h * _$r * _$c + e * o, T = e * _$r * _$c - _$h * o, S = _$r * _$h * _$c - e * o, _$O = _$h * _$h * _$c + f, _$I = e * _$h * _$c + _$r * o, _$R = _$r * e * _$c + _$h * o, _$M = _$h * e * _$c - _$r * o, _$C = e * e * _$c + f;
                    return t1.m00 = a * A + w * E + _$_ * T, t1.m01 = v * A + g * E + m * T, t1.m02 = l * A + p * E + b * T, t1.m03 = _$d * A + _$y * E + k * T, t1.m04 = a * S + w * _$O + _$_ * _$I, t1.m05 = v * S + g * _$O + m * _$I, t1.m06 = l * S + p * _$O + b * _$I, t1.m07 = _$d * S + _$y * _$O + k * _$I, t1.m08 = a * _$R + w * _$M + _$_ * _$C, t1.m09 = v * _$R + g * _$M + m * _$C, t1.m10 = l * _$R + p * _$M + b * _$C, t1.m11 = _$d * _$R + _$y * _$M + k * _$C, i !== t1 && (t1.m12 = i.m12, t1.m13 = i.m13, t1.m14 = i.m14, t1.m15 = i.m15), t1;
                }, i.rotateX = function(t1, i, n) {
                    var s = ur(n), _$r = or(n), _$h = i.m04, e = i.m05, u = i.m06, o = i.m07, f = i.m08, _$c = i.m09, a = i.m10, v = i.m11;
                    return i !== t1 && (t1.m00 = i.m00, t1.m01 = i.m01, t1.m02 = i.m02, t1.m03 = i.m03, t1.m12 = i.m12, t1.m13 = i.m13, t1.m14 = i.m14, t1.m15 = i.m15), t1.m04 = _$h * _$r + f * s, t1.m05 = e * _$r + _$c * s, t1.m06 = u * _$r + a * s, t1.m07 = o * _$r + v * s, t1.m08 = f * _$r - _$h * s, t1.m09 = _$c * _$r - e * s, t1.m10 = a * _$r - u * s, t1.m11 = v * _$r - o * s, t1;
                }, i.rotateY = function(t1, i, n) {
                    var s = ur(n), _$r = or(n), _$h = i.m00, e = i.m01, u = i.m02, o = i.m03, f = i.m08, _$c = i.m09, a = i.m10, v = i.m11;
                    return i !== t1 && (t1.m04 = i.m04, t1.m05 = i.m05, t1.m06 = i.m06, t1.m07 = i.m07, t1.m12 = i.m12, t1.m13 = i.m13, t1.m14 = i.m14, t1.m15 = i.m15), t1.m00 = _$h * _$r - f * s, t1.m01 = e * _$r - _$c * s, t1.m02 = u * _$r - a * s, t1.m03 = o * _$r - v * s, t1.m08 = _$h * s + f * _$r, t1.m09 = e * s + _$c * _$r, t1.m10 = u * s + a * _$r, t1.m11 = o * s + v * _$r, t1;
                }, i.rotateZ = function(t1, i, n) {
                    var s = ur(n), _$r = or(n), _$h = i.m00, e = i.m01, u = i.m02, o = i.m03, f = i.m04, _$c = i.m05, a = i.m06, v = i.m07;
                    return i !== t1 && (t1.m08 = i.m08, t1.m09 = i.m09, t1.m10 = i.m10, t1.m11 = i.m11, t1.m12 = i.m12, t1.m13 = i.m13, t1.m14 = i.m14, t1.m15 = i.m15), t1.m00 = _$h * _$r + f * s, t1.m01 = e * _$r + _$c * s, t1.m02 = u * _$r + a * s, t1.m03 = o * _$r + v * s, t1.m04 = f * _$r - _$h * s, t1.m05 = _$c * _$r - e * s, t1.m06 = a * _$r - u * s, t1.m07 = v * _$r - o * s, t1;
                }, i.fromTranslation = function(t1, n) {
                    return i.identity(t1), t1.m12 = n.x, t1.m13 = n.y, t1.m14 = n.z, t1;
                }, i.fromScaling = function(t1, n) {
                    return i.identity(t1), t1.m00 = n.x, t1.m05 = n.y, t1.m10 = n.z, t1;
                }, i.fromRotation = function(t1, i, n) {
                    var s = n.x, _$r = n.y, _$h = n.z, e = er(s * s + _$r * _$r + _$h * _$h);
                    if (rr(e) < Ln) return null;
                    s *= e = 1 / e, _$r *= e, _$h *= e;
                    var u = ur(i), o = or(i), f = 1 - o;
                    return t1.m00 = s * s * f + o, t1.m01 = _$r * s * f + _$h * u, t1.m02 = _$h * s * f - _$r * u, t1.m03 = 0, t1.m04 = s * _$r * f - _$h * u, t1.m05 = _$r * _$r * f + o, t1.m06 = _$h * _$r * f + s * u, t1.m07 = 0, t1.m08 = s * _$h * f + _$r * u, t1.m09 = _$r * _$h * f - s * u, t1.m10 = _$h * _$h * f + o, t1.m11 = 0, t1.m12 = 0, t1.m13 = 0, t1.m14 = 0, t1.m15 = 1, t1;
                }, i.fromXRotation = function(t1, n) {
                    var s = ur(n), _$r = or(n);
                    return i.identity(t1), t1.m05 = _$r, t1.m06 = s, t1.m09 = -s, t1.m10 = _$r, t1;
                }, i.fromYRotation = function(t1, n) {
                    var s = ur(n), _$r = or(n);
                    return i.identity(t1), t1.m00 = _$r, t1.m02 = -s, t1.m08 = s, t1.m10 = _$r, t1;
                }, i.fromZRotation = function(t1, n) {
                    var s = ur(n), _$r = or(n);
                    return i.identity(t1), t1.m00 = _$r, t1.m01 = s, t1.m04 = -s, t1.m05 = _$r, t1;
                }, i.fromRT = function(t1, i, n) {
                    var s = i.x, _$r = i.y, _$h = i.z, e = i.w, u = s + s, o = _$r + _$r, f = _$h + _$h, _$c = s * u, a = s * o, v = s * f, l = _$r * o, _$d = _$r * f, w = _$h * f, g = e * u, p = e * o, _$y = e * f;
                    return t1.m00 = 1 - (l + w), t1.m01 = a + _$y, t1.m02 = v - p, t1.m03 = 0, t1.m04 = a - _$y, t1.m05 = 1 - (_$c + w), t1.m06 = _$d + g, t1.m07 = 0, t1.m08 = v + p, t1.m09 = _$d - g, t1.m10 = 1 - (_$c + l), t1.m11 = 0, t1.m12 = n.x, t1.m13 = n.y, t1.m14 = n.z, t1.m15 = 1, t1;
                }, i.getTranslation = function(t1, i) {
                    return t1.x = i.m12, t1.y = i.m13, t1.z = i.m14, t1;
                }, i.getScaling = function(t1, i) {
                    var n = vr.m00 = i.m00, s = vr.m01 = i.m01, _$r = vr.m02 = i.m02, _$h = vr.m03 = i.m04, e = vr.m04 = i.m05, u = vr.m05 = i.m06, o = vr.m06 = i.m08, f = vr.m07 = i.m09, _$c = vr.m08 = i.m10;
                    return t1.x = er(n * n + s * s + _$r * _$r), t1.y = er(_$h * _$h + e * e + u * u), t1.z = er(o * o + f * f + _$c * _$c), 0 > Ps.determinant(vr) && (t1.x *= -1), t1;
                }, i.getRotation = function(t1, i) {
                    var n = i.m00 + i.m05 + i.m10, s = 0;
                    return n > 0 ? (t1.w = .25 * (s = 2 * er(n + 1)), t1.x = (i.m06 - i.m09) / s, t1.y = (i.m08 - i.m02) / s, t1.z = (i.m01 - i.m04) / s) : i.m00 > i.m05 && i.m00 > i.m10 ? (s = 2 * er(1 + i.m00 - i.m05 - i.m10), t1.w = (i.m06 - i.m09) / s, t1.x = .25 * s, t1.y = (i.m01 + i.m04) / s, t1.z = (i.m08 + i.m02) / s) : i.m05 > i.m10 ? (s = 2 * er(1 + i.m05 - i.m00 - i.m10), t1.w = (i.m08 - i.m02) / s, t1.x = (i.m01 + i.m04) / s, t1.y = .25 * s, t1.z = (i.m06 + i.m09) / s) : (s = 2 * er(1 + i.m10 - i.m00 - i.m05), t1.w = (i.m01 - i.m04) / s, t1.x = (i.m08 + i.m02) / s, t1.y = (i.m06 + i.m09) / s, t1.z = .25 * s), t1;
                }, i.toRTS = function(t1, n, s, r) {
                    i.toSRT(t1, n, s, r);
                }, i.toSRT = function(t1, i, n, s) {
                    n && Ss.set(n, t1.m12, t1.m13, t1.m14);
                    var _$r = Ss.set(ar, t1.m00, t1.m01, t1.m02).length(), _$h = Ss.set(ar, t1.m04, t1.m05, t1.m06).length(), e = Ss.set(ar, t1.m08, t1.m09, t1.m10).length();
                    if (s && (s.x = _$r, s.y = _$h, s.z = e), 0 !== _$r && 0 !== _$h && 0 !== e) {
                        vr.m00 = t1.m00 / _$r, vr.m01 = t1.m01 / _$r, vr.m02 = t1.m02 / _$r, vr.m03 = t1.m04 / _$h, vr.m04 = t1.m05 / _$h, vr.m05 = t1.m06 / _$h, vr.m06 = t1.m08 / e, vr.m07 = t1.m09 / e, vr.m08 = t1.m10 / e;
                        var u = Ps.determinant(vr);
                        s && u < 0 && (s.x *= -1), i && (u < 0 && (vr.m00 *= -1, vr.m01 *= -1, vr.m02 *= -1), qs.fromMat3(i, vr));
                    } else i && qs.identity(i);
                }, i.toEuler = function(t1, i) {
                    return Ps.set(vr, t1.m00, t1.m01, t1.m02, t1.m04, t1.m05, t1.m06, t1.m08, t1.m09, t1.m10), Ps.toEuler(vr, i);
                }, i.fromRTS = function(t1, n, s, r) {
                    return i.fromSRT(t1, n, s, r);
                }, i.fromSRT = function(t1, i, n, s) {
                    var _$r = i.x, _$h = i.y, e = i.z, u = i.w, o = _$r + _$r, f = _$h + _$h, _$c = e + e, a = _$r * o, v = _$r * f, l = _$r * _$c, _$d = _$h * f, w = _$h * _$c, g = e * _$c, p = u * o, _$y = u * f, _$_ = u * _$c, m = s.x, b = s.y, k = s.z;
                    return t1.m00 = (1 - (_$d + g)) * m, t1.m01 = (v + _$_) * m, t1.m02 = (l - _$y) * m, t1.m03 = 0, t1.m04 = (v - _$_) * b, t1.m05 = (1 - (a + g)) * b, t1.m06 = (w + p) * b, t1.m07 = 0, t1.m08 = (l + _$y) * k, t1.m09 = (w - p) * k, t1.m10 = (1 - (a + _$d)) * k, t1.m11 = 0, t1.m12 = n.x, t1.m13 = n.y, t1.m14 = n.z, t1.m15 = 1, t1;
                }, i.fromRTSOrigin = function(t1, n, s, r, h) {
                    return i.fromSRTOrigin(t1, n, s, r, h);
                }, i.fromSRTOrigin = function(t1, i, n, s, r) {
                    var _$h = i.x, e = i.y, u = i.z, o = i.w, f = _$h + _$h, _$c = e + e, a = u + u, v = _$h * f, l = _$h * _$c, _$d = _$h * a, w = e * _$c, g = e * a, p = u * a, _$y = o * f, _$_ = o * _$c, m = o * a, b = s.x, k = s.y, A = s.z, E = r.x, T = r.y, S = r.z;
                    return t1.m00 = (1 - (w + p)) * b, t1.m01 = (l + m) * b, t1.m02 = (_$d - _$_) * b, t1.m03 = 0, t1.m04 = (l - m) * k, t1.m05 = (1 - (v + p)) * k, t1.m06 = (g + _$y) * k, t1.m07 = 0, t1.m08 = (_$d + _$_) * A, t1.m09 = (g - _$y) * A, t1.m10 = (1 - (v + w)) * A, t1.m11 = 0, t1.m12 = n.x + E - (t1.m00 * E + t1.m04 * T + t1.m08 * S), t1.m13 = n.y + T - (t1.m01 * E + t1.m05 * T + t1.m09 * S), t1.m14 = n.z + S - (t1.m02 * E + t1.m06 * T + t1.m10 * S), t1.m15 = 1, t1;
                }, i.fromQuat = function(t1, i) {
                    var n = i.x, s = i.y, _$r = i.z, _$h = i.w, e = n + n, u = s + s, o = _$r + _$r, f = n * e, _$c = s * e, a = s * u, v = _$r * e, l = _$r * u, _$d = _$r * o, w = _$h * e, g = _$h * u, p = _$h * o;
                    return t1.m00 = 1 - a - _$d, t1.m01 = _$c + p, t1.m02 = v - g, t1.m03 = 0, t1.m04 = _$c - p, t1.m05 = 1 - f - _$d, t1.m06 = l + w, t1.m07 = 0, t1.m08 = v + g, t1.m09 = l - w, t1.m10 = 1 - f - a, t1.m11 = 0, t1.m12 = 0, t1.m13 = 0, t1.m14 = 0, t1.m15 = 1, t1;
                }, i.frustum = function(t1, i, n, s, r, h, e) {
                    var u = 1 / (n - i), o = 1 / (r - s), f = 1 / (h - e);
                    return t1.m00 = 2 * h * u, t1.m01 = 0, t1.m02 = 0, t1.m03 = 0, t1.m04 = 0, t1.m05 = 2 * h * o, t1.m06 = 0, t1.m07 = 0, t1.m08 = (n + i) * u, t1.m09 = (r + s) * o, t1.m10 = (e + h) * f, t1.m11 = -1, t1.m12 = 0, t1.m13 = 0, t1.m14 = e * h * 2 * f, t1.m15 = 0, t1;
                }, i.perspective = function(t1, i, n, s, r, h, e, u, o) {
                    void 0 === h && (h = !0), void 0 === e && (e = -1), void 0 === u && (u = 1), void 0 === o && (o = 0);
                    var f = 1 / fr(i / 2), _$c = 1 / (s - r), a = h ? f / n : f, v = (h ? f : f * n) * u, l = sr[o];
                    return t1.m00 = a * l[0], t1.m01 = a * l[1], t1.m02 = 0, t1.m03 = 0, t1.m04 = v * l[2], t1.m05 = v * l[3], t1.m06 = 0, t1.m07 = 0, t1.m08 = 0, t1.m09 = 0, t1.m10 = (r - e * s) * _$c, t1.m11 = -1, t1.m12 = 0, t1.m13 = 0, t1.m14 = r * s * _$c * (1 - e), t1.m15 = 0, t1;
                }, i.ortho = function(t1, i, n, s, r, h, e, u, o, f) {
                    void 0 === u && (u = -1), void 0 === o && (o = 1), void 0 === f && (f = 0);
                    var _$c = 1 / (i - n), a = 1 / (s - r) * o, v = 1 / (h - e), l = -2 * _$c, _$d = -2 * a, w = (i + n) * _$c, g = (r + s) * a, p = sr[f];
                    return t1.m00 = l * p[0], t1.m01 = l * p[1], t1.m02 = 0, t1.m03 = 0, t1.m04 = _$d * p[2], t1.m05 = _$d * p[3], t1.m06 = 0, t1.m07 = 0, t1.m08 = 0, t1.m09 = 0, t1.m10 = v * (1 - u), t1.m11 = 0, t1.m12 = w * p[0] + g * p[2], t1.m13 = w * p[1] + g * p[3], t1.m14 = (h - u * e) * v, t1.m15 = 1, t1;
                }, i.lookAt = function(t1, i, n, s) {
                    var _$r = i.x, _$h = i.y, e = i.z, u = s.x, o = s.y, f = s.z, _$c = _$r - n.x, a = _$h - n.y, v = e - n.z, l = 1 / er(_$c * _$c + a * a + v * v), _$d = o * (v *= l) - f * (a *= l), w = f * (_$c *= l) - u * v, g = u * a - o * _$c, p = a * (g *= l = 1 / er(_$d * _$d + w * w + g * g)) - v * (w *= l), _$y = v * (_$d *= l) - _$c * g, _$_ = _$c * w - a * _$d;
                    return t1.m00 = _$d, t1.m01 = p, t1.m02 = _$c, t1.m03 = 0, t1.m04 = w, t1.m05 = _$y, t1.m06 = a, t1.m07 = 0, t1.m08 = g, t1.m09 = _$_, t1.m10 = v, t1.m11 = 0, t1.m12 = -(_$d * _$r + w * _$h + g * e), t1.m13 = -(p * _$r + _$y * _$h + _$_ * e), t1.m14 = -(_$c * _$r + a * _$h + v * e), t1.m15 = 1, t1;
                }, i.inverseTranspose = function(t1, i) {
                    var n = i.m00, s = i.m01, _$r = i.m02, _$h = i.m03, e = i.m04, u = i.m05, o = i.m06, f = i.m07, _$c = i.m08, a = i.m09, v = i.m10, l = i.m11, _$d = i.m12, w = i.m13, g = i.m14, p = i.m15, _$y = n * u - s * e, _$_ = n * o - _$r * e, m = n * f - _$h * e, b = s * o - _$r * u, k = s * f - _$h * u, A = _$r * f - _$h * o, E = _$c * w - a * _$d, T = _$c * g - v * _$d, S = _$c * p - l * _$d, _$O = a * g - v * w, _$I = a * p - l * w, _$R = v * p - l * g, _$M = _$y * _$R - _$_ * _$I + m * _$O + b * S - k * T + A * E;
                    return _$M ? (t1.m00 = (u * _$R - o * _$I + f * _$O) * (_$M = 1 / _$M), t1.m01 = (o * S - e * _$R - f * T) * _$M, t1.m02 = (e * _$I - u * S + f * E) * _$M, t1.m03 = 0, t1.m04 = (_$r * _$I - s * _$R - _$h * _$O) * _$M, t1.m05 = (n * _$R - _$r * S + _$h * T) * _$M, t1.m06 = (s * S - n * _$I - _$h * E) * _$M, t1.m07 = 0, t1.m08 = (w * A - g * k + p * b) * _$M, t1.m09 = (g * m - _$d * A - p * _$_) * _$M, t1.m10 = (_$d * k - w * m + p * _$y) * _$M, t1.m11 = 0, t1.m12 = 0, t1.m13 = 0, t1.m14 = 0, t1.m15 = 1, t1) : null;
                }, i.toArray = function(t1, i, n) {
                    return void 0 === n && (n = 0), t1[n + 0] = i.m00, t1[n + 1] = i.m01, t1[n + 2] = i.m02, t1[n + 3] = i.m03, t1[n + 4] = i.m04, t1[n + 5] = i.m05, t1[n + 6] = i.m06, t1[n + 7] = i.m07, t1[n + 8] = i.m08, t1[n + 9] = i.m09, t1[n + 10] = i.m10, t1[n + 11] = i.m11, t1[n + 12] = i.m12, t1[n + 13] = i.m13, t1[n + 14] = i.m14, t1[n + 15] = i.m15, t1;
                }, i.fromArray = function(t1, i, n) {
                    return void 0 === n && (n = 0), t1.m00 = i[n + 0], t1.m01 = i[n + 1], t1.m02 = i[n + 2], t1.m03 = i[n + 3], t1.m04 = i[n + 4], t1.m05 = i[n + 5], t1.m06 = i[n + 6], t1.m07 = i[n + 7], t1.m08 = i[n + 8], t1.m09 = i[n + 9], t1.m10 = i[n + 10], t1.m11 = i[n + 11], t1.m12 = i[n + 12], t1.m13 = i[n + 13], t1.m14 = i[n + 14], t1.m15 = i[n + 15], t1;
                }, i.add = function(t1, i, n) {
                    return t1.m00 = i.m00 + n.m00, t1.m01 = i.m01 + n.m01, t1.m02 = i.m02 + n.m02, t1.m03 = i.m03 + n.m03, t1.m04 = i.m04 + n.m04, t1.m05 = i.m05 + n.m05, t1.m06 = i.m06 + n.m06, t1.m07 = i.m07 + n.m07, t1.m08 = i.m08 + n.m08, t1.m09 = i.m09 + n.m09, t1.m10 = i.m10 + n.m10, t1.m11 = i.m11 + n.m11, t1.m12 = i.m12 + n.m12, t1.m13 = i.m13 + n.m13, t1.m14 = i.m14 + n.m14, t1.m15 = i.m15 + n.m15, t1;
                }, i.subtract = function(t1, i, n) {
                    return t1.m00 = i.m00 - n.m00, t1.m01 = i.m01 - n.m01, t1.m02 = i.m02 - n.m02, t1.m03 = i.m03 - n.m03, t1.m04 = i.m04 - n.m04, t1.m05 = i.m05 - n.m05, t1.m06 = i.m06 - n.m06, t1.m07 = i.m07 - n.m07, t1.m08 = i.m08 - n.m08, t1.m09 = i.m09 - n.m09, t1.m10 = i.m10 - n.m10, t1.m11 = i.m11 - n.m11, t1.m12 = i.m12 - n.m12, t1.m13 = i.m13 - n.m13, t1.m14 = i.m14 - n.m14, t1.m15 = i.m15 - n.m15, t1;
                }, i.multiplyScalar = function(t1, i, n) {
                    return t1.m00 = i.m00 * n, t1.m01 = i.m01 * n, t1.m02 = i.m02 * n, t1.m03 = i.m03 * n, t1.m04 = i.m04 * n, t1.m05 = i.m05 * n, t1.m06 = i.m06 * n, t1.m07 = i.m07 * n, t1.m08 = i.m08 * n, t1.m09 = i.m09 * n, t1.m10 = i.m10 * n, t1.m11 = i.m11 * n, t1.m12 = i.m12 * n, t1.m13 = i.m13 * n, t1.m14 = i.m14 * n, t1.m15 = i.m15 * n, t1;
                }, i.multiplyScalarAndAdd = function(t1, i, n, s) {
                    return t1.m00 = i.m00 + n.m00 * s, t1.m01 = i.m01 + n.m01 * s, t1.m02 = i.m02 + n.m02 * s, t1.m03 = i.m03 + n.m03 * s, t1.m04 = i.m04 + n.m04 * s, t1.m05 = i.m05 + n.m05 * s, t1.m06 = i.m06 + n.m06 * s, t1.m07 = i.m07 + n.m07 * s, t1.m08 = i.m08 + n.m08 * s, t1.m09 = i.m09 + n.m09 * s, t1.m10 = i.m10 + n.m10 * s, t1.m11 = i.m11 + n.m11 * s, t1.m12 = i.m12 + n.m12 * s, t1.m13 = i.m13 + n.m13 * s, t1.m14 = i.m14 + n.m14 * s, t1.m15 = i.m15 + n.m15 * s, t1;
                }, i.strictEquals = function(t1, i) {
                    return t1.m00 === i.m00 && t1.m01 === i.m01 && t1.m02 === i.m02 && t1.m03 === i.m03 && t1.m04 === i.m04 && t1.m05 === i.m05 && t1.m06 === i.m06 && t1.m07 === i.m07 && t1.m08 === i.m08 && t1.m09 === i.m09 && t1.m10 === i.m10 && t1.m11 === i.m11 && t1.m12 === i.m12 && t1.m13 === i.m13 && t1.m14 === i.m14 && t1.m15 === i.m15;
                }, i.equals = function(t1, i, n) {
                    return void 0 === n && (n = Ln), rr(t1.m00 - i.m00) <= n * hr(1, rr(t1.m00), rr(i.m00)) && rr(t1.m01 - i.m01) <= n * hr(1, rr(t1.m01), rr(i.m01)) && rr(t1.m02 - i.m02) <= n * hr(1, rr(t1.m02), rr(i.m02)) && rr(t1.m03 - i.m03) <= n * hr(1, rr(t1.m03), rr(i.m03)) && rr(t1.m04 - i.m04) <= n * hr(1, rr(t1.m04), rr(i.m04)) && rr(t1.m05 - i.m05) <= n * hr(1, rr(t1.m05), rr(i.m05)) && rr(t1.m06 - i.m06) <= n * hr(1, rr(t1.m06), rr(i.m06)) && rr(t1.m07 - i.m07) <= n * hr(1, rr(t1.m07), rr(i.m07)) && rr(t1.m08 - i.m08) <= n * hr(1, rr(t1.m08), rr(i.m08)) && rr(t1.m09 - i.m09) <= n * hr(1, rr(t1.m09), rr(i.m09)) && rr(t1.m10 - i.m10) <= n * hr(1, rr(t1.m10), rr(i.m10)) && rr(t1.m11 - i.m11) <= n * hr(1, rr(t1.m11), rr(i.m11)) && rr(t1.m12 - i.m12) <= n * hr(1, rr(t1.m12), rr(i.m12)) && rr(t1.m13 - i.m13) <= n * hr(1, rr(t1.m13), rr(i.m13)) && rr(t1.m14 - i.m14) <= n * hr(1, rr(t1.m14), rr(i.m14)) && rr(t1.m15 - i.m15) <= n * hr(1, rr(t1.m15), rr(i.m15));
                };
                var n = i.prototype;
                return n.clone = function() {
                    return new i(this.m00, this.m01, this.m02, this.m03, this.m04, this.m05, this.m06, this.m07, this.m08, this.m09, this.m10, this.m11, this.m12, this.m13, this.m14, this.m15);
                }, n.set = function(t1, i, n, s, r, h, e, u, o, f, c, a, v, l, d, w) {
                    return void 0 === t1 && (t1 = 1), void 0 === i && (i = 0), void 0 === n && (n = 0), void 0 === s && (s = 0), void 0 === r && (r = 0), void 0 === h && (h = 1), void 0 === e && (e = 0), void 0 === u && (u = 0), void 0 === o && (o = 0), void 0 === f && (f = 0), void 0 === c && (c = 1), void 0 === a && (a = 0), void 0 === v && (v = 0), void 0 === l && (l = 0), void 0 === d && (d = 0), void 0 === w && (w = 1), "object" == (void 0 === t1 ? "undefined" : _type_of(t1)) ? (this.m01 = t1.m01, this.m02 = t1.m02, this.m03 = t1.m03, this.m04 = t1.m04, this.m05 = t1.m05, this.m06 = t1.m06, this.m07 = t1.m07, this.m08 = t1.m08, this.m09 = t1.m09, this.m10 = t1.m10, this.m11 = t1.m11, this.m12 = t1.m12, this.m13 = t1.m13, this.m14 = t1.m14, this.m15 = t1.m15, this.m00 = t1.m00) : (this.m01 = i, this.m02 = n, this.m03 = s, this.m04 = r, this.m05 = h, this.m06 = e, this.m07 = u, this.m08 = o, this.m09 = f, this.m10 = c, this.m11 = a, this.m12 = v, this.m13 = l, this.m14 = d, this.m15 = w, this.m00 = t1), this;
                }, n.equals = function(t1, i) {
                    void 0 === i && (i = Ln);
                    var n = 1 / 0, _$r = this.m00, _$h = this.m01, e = this.m02, u = this.m03, o = this.m04, f = this.m05, _$c = this.m06, a = this.m07, v = this.m08, l = this.m09, _$d = this.m10, w = this.m11, g = this.m12, p = this.m13, _$y = this.m14, _$_ = this.m15;
                    return rr(_$r) !== n && rr(_$h) !== n && rr(e) !== n && rr(u) !== n && rr(o) !== n && rr(f) !== n && rr(_$c) !== n && rr(a) !== n && rr(v) !== n && rr(l) !== n && rr(_$d) !== n && rr(w) !== n && rr(g) !== n && rr(p) !== n && rr(_$y) !== n && rr(_$_) !== n && rr(_$r - t1.m00) <= i * hr(1, rr(_$r), rr(t1.m00)) && rr(_$h - t1.m01) <= i * hr(1, rr(_$h), rr(t1.m01)) && rr(e - t1.m02) <= i * hr(1, rr(e), rr(t1.m02)) && rr(u - t1.m03) <= i * hr(1, rr(u), rr(t1.m03)) && rr(o - t1.m04) <= i * hr(1, rr(o), rr(t1.m04)) && rr(f - t1.m05) <= i * hr(1, rr(f), rr(t1.m05)) && rr(_$c - t1.m06) <= i * hr(1, rr(_$c), rr(t1.m06)) && rr(a - t1.m07) <= i * hr(1, rr(a), rr(t1.m07)) && rr(v - t1.m08) <= i * hr(1, rr(v), rr(t1.m08)) && rr(l - t1.m09) <= i * hr(1, rr(l), rr(t1.m09)) && rr(_$d - t1.m10) <= i * hr(1, rr(_$d), rr(t1.m10)) && rr(w - t1.m11) <= i * hr(1, rr(w), rr(t1.m11)) && rr(g - t1.m12) <= i * hr(1, rr(g), rr(t1.m12)) && rr(p - t1.m13) <= i * hr(1, rr(p), rr(t1.m13)) && rr(_$y - t1.m14) <= i * hr(1, rr(_$y), rr(t1.m14)) && rr(_$_ - t1.m15) <= i * hr(1, rr(_$_), rr(t1.m15));
                }, n.strictEquals = function(t1) {
                    return this.m00 === t1.m00 && this.m01 === t1.m01 && this.m02 === t1.m02 && this.m03 === t1.m03 && this.m04 === t1.m04 && this.m05 === t1.m05 && this.m06 === t1.m06 && this.m07 === t1.m07 && this.m08 === t1.m08 && this.m09 === t1.m09 && this.m10 === t1.m10 && this.m11 === t1.m11 && this.m12 === t1.m12 && this.m13 === t1.m13 && this.m14 === t1.m14 && this.m15 === t1.m15;
                }, n.toString = function() {
                    return "[\n" + this.m00 + ", " + this.m01 + ", " + this.m02 + ", " + this.m03 + ",\n" + this.m04 + ", " + this.m05 + ", " + this.m06 + ", " + this.m07 + ",\n" + this.m08 + ", " + this.m09 + ", " + this.m10 + ", " + this.m11 + ",\n" + this.m12 + ", " + this.m13 + ", " + this.m14 + ", " + this.m15 + "\n]";
                }, n.identity = function() {
                    return i.identity(this);
                }, n.zero = function() {
                    return i.zero(this);
                }, n.transpose = function() {
                    var _$i = this.m01, n = this.m02, s = this.m03, _$r = this.m06, _$h = this.m07, e = this.m11;
                    return this.m01 = this.m04, this.m02 = this.m08, this.m03 = this.m12, this.m04 = _$i, this.m06 = this.m09, this.m07 = this.m13, this.m08 = n, this.m09 = _$r, this.m11 = this.m14, this.m12 = s, this.m13 = _$h, this.m14 = e, this;
                }, n.invert = function() {
                    var _$i = this.m00, n = this.m01, s = this.m02, _$r = this.m03, _$h = this.m04, e = this.m05, u = this.m06, o = this.m07, f = this.m08, _$c = this.m09, a = this.m10, v = this.m11, l = this.m12, _$d = this.m13, w = this.m14, g = this.m15, p = _$i * e - n * _$h, _$y = _$i * u - s * _$h, _$_ = _$i * o - _$r * _$h, m = n * u - s * e, b = n * o - _$r * e, k = s * o - _$r * u, A = f * _$d - _$c * l, E = f * w - a * l, T = f * g - v * l, S = _$c * w - a * _$d, _$O = _$c * g - v * _$d, _$I = a * g - v * w, _$R = p * _$I - _$y * _$O + _$_ * S + m * T - b * E + k * A;
                    return 0 === _$R ? this.set(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0) : (_$R = 1 / _$R, this.m00 = (e * _$I - u * _$O + o * S) * _$R, this.m01 = (s * _$O - n * _$I - _$r * S) * _$R, this.m02 = (_$d * k - w * b + g * m) * _$R, this.m03 = (a * b - _$c * k - v * m) * _$R, this.m04 = (u * T - _$h * _$I - o * E) * _$R, this.m05 = (_$i * _$I - s * T + _$r * E) * _$R, this.m06 = (w * _$_ - l * k - g * _$y) * _$R, this.m07 = (f * k - a * _$_ + v * _$y) * _$R, this.m08 = (_$h * _$O - e * T + o * A) * _$R, this.m09 = (n * T - _$i * _$O - _$r * A) * _$R, this.m10 = (l * b - _$d * _$_ + g * p) * _$R, this.m11 = (_$c * _$_ - f * b - v * p) * _$R, this.m12 = (e * E - _$h * S - u * A) * _$R, this.m13 = (_$i * S - n * E + s * A) * _$R, this.m14 = (_$d * _$y - l * m - w * p) * _$R, this.m15 = (f * m - _$c * _$y + a * p) * _$R), this;
                }, n.determinant = function() {
                    var _$i = this.m00, n = this.m01, s = this.m02, _$r = this.m03, _$h = this.m04, e = this.m05, u = this.m06, o = this.m07, f = this.m08, _$c = this.m09, a = this.m10, v = this.m11, l = this.m12, _$d = this.m13, w = this.m14, g = this.m15;
                    return (_$i * e - n * _$h) * (a * g - v * w) - (_$i * u - s * _$h) * (_$c * g - v * _$d) + (_$i * o - _$r * _$h) * (_$c * w - a * _$d) + (n * u - s * e) * (f * g - v * l) - (n * o - _$r * e) * (f * w - a * l) + (s * o - _$r * u) * (f * _$d - _$c * l);
                }, n.add = function(t1) {
                    return this.m00 += t1.m00, this.m01 += t1.m01, this.m02 += t1.m02, this.m03 += t1.m03, this.m04 += t1.m04, this.m05 += t1.m05, this.m06 += t1.m06, this.m07 += t1.m07, this.m08 += t1.m08, this.m09 += t1.m09, this.m10 += t1.m10, this.m11 += t1.m11, this.m12 += t1.m12, this.m13 += t1.m13, this.m14 += t1.m14, this.m15 += t1.m15, this;
                }, n.subtract = function(t1) {
                    return this.m00 -= t1.m00, this.m01 -= t1.m01, this.m02 -= t1.m02, this.m03 -= t1.m03, this.m04 -= t1.m04, this.m05 -= t1.m05, this.m06 -= t1.m06, this.m07 -= t1.m07, this.m08 -= t1.m08, this.m09 -= t1.m09, this.m10 -= t1.m10, this.m11 -= t1.m11, this.m12 -= t1.m12, this.m13 -= t1.m13, this.m14 -= t1.m14, this.m15 -= t1.m15, this;
                }, n.multiply = function(t1) {
                    return i.multiply(this, this, t1);
                }, n.multiplyScalar = function(t1) {
                    return this.m00 *= t1, this.m01 *= t1, this.m02 *= t1, this.m03 *= t1, this.m04 *= t1, this.m05 *= t1, this.m06 *= t1, this.m07 *= t1, this.m08 *= t1, this.m09 *= t1, this.m10 *= t1, this.m11 *= t1, this.m12 *= t1, this.m13 *= t1, this.m14 *= t1, this.m15 *= t1, this;
                }, n.translate = function(t1) {
                    return this.m12 += t1.x, this.m13 += t1.y, this.m14 += t1.z, this;
                }, n.transform = function(t1) {
                    var _$i = t1.x, n = t1.y, s = t1.z, _$h = this.m00, e = this.m01, u = this.m02, o = this.m03, f = this.m04, _$c = this.m05, a = this.m06, v = this.m07, l = this.m08, _$d = this.m09, w = this.m10, g = this.m11;
                    return this.m12 = _$h * _$i + f * n + l * s + this.m12, this.m13 = e * _$i + _$c * n + _$d * s + this.m13, this.m14 = u * _$i + a * n + w * s + this.m14, this.m15 = o * _$i + v * n + g * s + this.m15, this;
                }, n.scale = function(t1) {
                    var _$i = t1.x, n = t1.y, s = t1.z;
                    return this.m00 *= _$i, this.m01 *= _$i, this.m02 *= _$i, this.m03 *= _$i, this.m04 *= n, this.m05 *= n, this.m06 *= n, this.m07 *= n, this.m08 *= s, this.m09 *= s, this.m10 *= s, this.m11 *= s, this;
                }, n.rotate = function(t1, i) {
                    var n = i.x, s = i.y, _$r = i.z, _$h = er(n * n + s * s + _$r * _$r);
                    if (rr(_$h) < Ln) return null;
                    n *= _$h = 1 / _$h, s *= _$h, _$r *= _$h;
                    var e = ur(t1), u = or(t1), o = 1 - u, _$c = this.m00, a = this.m01, v = this.m02, l = this.m03, _$d = this.m04, w = this.m05, g = this.m06, p = this.m07, _$y = this.m08, _$_ = this.m09, m = this.m10, b = this.m11, k = n * n * o + u, A = s * n * o + _$r * e, E = _$r * n * o - s * e, T = n * s * o - _$r * e, S = s * s * o + u, _$O = _$r * s * o + n * e, _$I = n * _$r * o + s * e, _$R = s * _$r * o - n * e, _$M = _$r * _$r * o + u;
                    return this.m00 = _$c * k + _$d * A + _$y * E, this.m01 = a * k + w * A + _$_ * E, this.m02 = v * k + g * A + m * E, this.m03 = l * k + p * A + b * E, this.m04 = _$c * T + _$d * S + _$y * _$O, this.m05 = a * T + w * S + _$_ * _$O, this.m06 = v * T + g * S + m * _$O, this.m07 = l * T + p * S + b * _$O, this.m08 = _$c * _$I + _$d * _$R + _$y * _$M, this.m09 = a * _$I + w * _$R + _$_ * _$M, this.m10 = v * _$I + g * _$R + m * _$M, this.m11 = l * _$I + p * _$R + b * _$M, this;
                }, n.getTranslation = function(t1) {
                    return t1.x = this.m12, t1.y = this.m13, t1.z = this.m14, t1;
                }, n.getScale = function(t1) {
                    var n = vr.m00 = this.m00, s = vr.m01 = this.m01, _$r = vr.m02 = this.m02, _$h = vr.m03 = this.m04, e = vr.m04 = this.m05, u = vr.m05 = this.m06, o = vr.m06 = this.m08, f = vr.m07 = this.m09, _$c = vr.m08 = this.m10;
                    return t1.x = er(n * n + s * s + _$r * _$r), t1.y = er(_$h * _$h + e * e + u * u), t1.z = er(o * o + f * f + _$c * _$c), 0 > Ps.determinant(vr) && (t1.x *= -1), t1;
                }, n.getRotation = function(t1) {
                    var n = Ss.set(ar, this.m00, this.m01, this.m02).length(), s = Ss.set(ar, this.m04, this.m05, this.m06).length(), _$r = Ss.set(ar, this.m08, this.m09, this.m10).length();
                    return vr.m00 = this.m00 / n, vr.m01 = this.m01 / n, vr.m02 = this.m02 / n, vr.m03 = this.m04 / s, vr.m04 = this.m05 / s, vr.m05 = this.m06 / s, vr.m06 = this.m08 / _$r, vr.m07 = this.m09 / _$r, vr.m08 = this.m10 / _$r, 0 > Ps.determinant(vr) && (vr.m00 *= -1, vr.m01 *= -1, vr.m02 *= -1), qs.fromMat3(t1, vr);
                }, n.fromRTS = function(t1, n, s) {
                    return i.fromSRT(this, t1, n, s);
                }, n.fromSRT = function(t1, n, s) {
                    return i.fromSRT(this, t1, n, s);
                }, n.fromQuat = function(t1) {
                    return i.fromQuat(this, t1);
                }, i;
            }(mi));
            cr.IDENTITY = Object.freeze(new cr);
            var ar = new Ss, vr = new Ps;
            function lr(t1, i, n, s, r, h, e, u, o, f, c, a, v, l, d, w) {
                return new cr(t1, i, n, s, r, h, e, u, o, f, c, a, v, l, d, w);
            }
            An.fastDefine("cc.Mat4", cr, {
                m00: 1,
                m01: 0,
                m02: 0,
                m03: 0,
                m04: 0,
                m05: 1,
                m06: 0,
                m07: 0,
                m08: 0,
                m09: 0,
                m10: 1,
                m11: 0,
                m12: 0,
                m13: 0,
                m14: 0,
                m15: 1
            }), A.Mat4 = cr, A.mat4 = lr;
            var dr = Math.abs, wr = Math.max, gr = Math.min, pr = Math.PI, yr = Math.acos, _r = Math.sin, mr = Math.cos, br = Math.sqrt, kr = Math.atan2, Ar = Math.ceil, Er = Math.floor, Tr = Math.round;
            function Sr(t1, i) {
                return Object.freeze(new Or(t1, i));
            }
            var Or = t1("ao", function(t1) {
                function i(i, n) {
                    var s;
                    return s = t1.call(this) || this, "object" == (void 0 === i ? "undefined" : _type_of(i)) ? (s.x = i.x, s.y = i.y) : (s.x = i || 0, s.y = n || 0), s;
                }
                h(i, t1), i.clone = function(t1) {
                    return new i(t1.x, t1.y);
                }, i.copy = function(t1, i) {
                    return t1.x = i.x, t1.y = i.y, t1;
                }, i.set = function(t1, i, n) {
                    return t1.x = i, t1.y = n, t1;
                }, i.add = function(t1, i, n) {
                    return t1.x = i.x + n.x, t1.y = i.y + n.y, t1;
                }, i.subtract = function(t1, i, n) {
                    return t1.x = i.x - n.x, t1.y = i.y - n.y, t1;
                }, i.multiply = function(t1, i, n) {
                    return t1.x = i.x * n.x, t1.y = i.y * n.y, t1;
                }, i.divide = function(t1, i, n) {
                    return t1.x = i.x / n.x, t1.y = i.y / n.y, t1;
                }, i.ceil = function(t1, i) {
                    return t1.x = Ar(i.x), t1.y = Ar(i.y), t1;
                }, i.floor = function(t1, i) {
                    return t1.x = Er(i.x), t1.y = Er(i.y), t1;
                }, i.min = function(t1, i, n) {
                    return t1.x = gr(i.x, n.x), t1.y = gr(i.y, n.y), t1;
                }, i.max = function(t1, i, n) {
                    return t1.x = wr(i.x, n.x), t1.y = wr(i.y, n.y), t1;
                }, i.round = function(t1, i) {
                    return t1.x = Tr(i.x), t1.y = Tr(i.y), t1;
                }, i.multiplyScalar = function(t1, i, n) {
                    return t1.x = i.x * n, t1.y = i.y * n, t1;
                }, i.scaleAndAdd = function(t1, i, n, s) {
                    return t1.x = i.x + n.x * s, t1.y = i.y + n.y * s, t1;
                }, i.distance = function(t1, i) {
                    var n = i.x - t1.x, s = i.y - t1.y;
                    return br(n * n + s * s);
                }, i.squaredDistance = function(t1, i) {
                    var n = i.x - t1.x, s = i.y - t1.y;
                    return n * n + s * s;
                }, i.len = function(t1) {
                    var _$i = t1.x, n = t1.y;
                    return br(_$i * _$i + n * n);
                }, i.lengthSqr = function(t1) {
                    var _$i = t1.x, n = t1.y;
                    return _$i * _$i + n * n;
                }, i.negate = function(t1, i) {
                    return t1.x = -i.x, t1.y = -i.y, t1;
                }, i.inverse = function(t1, i) {
                    return t1.x = 1 / i.x, t1.y = 1 / i.y, t1;
                }, i.inverseSafe = function(t1, i) {
                    var n = i.x, s = i.y;
                    return dr(n) < Ln ? t1.x = 0 : t1.x = 1 / n, dr(s) < Ln ? t1.y = 0 : t1.y = 1 / s, t1;
                }, i.normalize = function(t1, i) {
                    var n = i.x, s = i.y, _$r = n * n + s * s;
                    return _$r > 0 ? (t1.x = n * (_$r = 1 / br(_$r)), t1.y = s * _$r) : (t1.x = 0, t1.y = 0), t1;
                }, i.dot = function(t1, i) {
                    return t1.x * i.x + t1.y * i.y;
                }, i.cross = function(t1, i, n) {
                    return _instanceof(t1, Ss) ? (t1.x = t1.y = 0, t1.z = i.x * n.y - i.y * n.x, t1) : t1.x * i.y - t1.y * i.x;
                }, i.lerp = function(t1, i, n, s) {
                    var _$r = i.x, _$h = i.y;
                    return t1.x = _$r + s * (n.x - _$r), t1.y = _$h + s * (n.y - _$h), t1;
                }, i.random = function(t1, i) {
                    i = i || 1;
                    var n = 2 * Vn() * pr;
                    return t1.x = mr(n) * i, t1.y = _r(n) * i, t1;
                }, i.transformMat3 = function(t1, i, n) {
                    var s = i.x, _$r = i.y;
                    return t1.x = n.m00 * s + n.m03 * _$r + n.m06, t1.y = n.m01 * s + n.m04 * _$r + n.m07, t1;
                }, i.transformMat4 = function(t1, i, n) {
                    var s = i.x, _$r = i.y;
                    return t1.x = n.m00 * s + n.m04 * _$r + n.m12, t1.y = n.m01 * s + n.m05 * _$r + n.m13, t1;
                }, i.str = function(t1) {
                    return "Vec2(" + t1.x + ", " + t1.y + ")";
                }, i.toArray = function(t1, i, n) {
                    return void 0 === n && (n = 0), t1[n + 0] = i.x, t1[n + 1] = i.y, t1;
                }, i.fromArray = function(t1, i, n) {
                    return void 0 === n && (n = 0), t1.x = i[n + 0], t1.y = i[n + 1], t1;
                }, i.strictEquals = function(t1, i) {
                    return t1.x === i.x && t1.y === i.y;
                }, i.equals = function(t1, i, n) {
                    return void 0 === n && (n = Ln), dr(t1.x - i.x) <= n * wr(1, dr(t1.x), dr(i.x)) && dr(t1.y - i.y) <= n * wr(1, dr(t1.y), dr(i.y));
                }, i.angle = function(t1, i) {
                    var n = t1.x * t1.x + t1.y * t1.y, s = i.x * i.x + i.y * i.y;
                    if (0 === n || 0 === s) return 0;
                    var _$r = (t1.x * i.x + t1.y * i.y) / br(n * s);
                    return yr(_$r = Un(_$r, -1, 1));
                };
                var n = i.prototype;
                return n.clone = function() {
                    return new i(this.x, this.y);
                }, n.set = function(t1, i) {
                    return "object" == (void 0 === t1 ? "undefined" : _type_of(t1)) ? (this.x = t1.x, this.y = t1.y) : (this.x = t1 || 0, this.y = i || 0), this;
                }, n.equals = function(t1, n) {
                    return void 0 === n && (n = Ln), i.equals(this, t1, n);
                }, n.equals2f = function(t1, i, n) {
                    return void 0 === n && (n = Ln), dr(this.x - t1) <= n * wr(1, dr(this.x), dr(t1)) && dr(this.y - i) <= n * wr(1, dr(this.y), dr(i));
                }, n.strictEquals = function(t1) {
                    return t1 && this.x === t1.x && this.y === t1.y;
                }, n.strictEquals2f = function(t1, i) {
                    return this.x === t1 && this.y === i;
                }, n.toString = function() {
                    return "(" + this.x + ", " + this.y + ")";
                }, n.lerp = function(t1, i) {
                    var n = this.x, s = this.y;
                    return this.x = n + i * (t1.x - n), this.y = s + i * (t1.y - s), this;
                }, n.clampf = function(t1, i) {
                    return this.x = Un(this.x, t1.x, i.x), this.y = Un(this.y, t1.y, i.y), this;
                }, n.add = function(t1) {
                    return this.x += t1.x, this.y += t1.y, this;
                }, n.add2f = function(t1, i) {
                    return this.x += t1, this.y += i, this;
                }, n.subtract = function(t1) {
                    return this.x -= t1.x, this.y -= t1.y, this;
                }, n.subtract2f = function(t1, i) {
                    return this.x -= t1, this.y -= i, this;
                }, n.multiplyScalar = function(t1) {
                    return "object" == (void 0 === t1 ? "undefined" : _type_of(t1)) && nt(16359), this.x *= t1, this.y *= t1, this;
                }, n.multiply = function(t1) {
                    return "object" != (void 0 === t1 ? "undefined" : _type_of(t1)) && nt(16360), this.x *= t1.x, this.y *= t1.y, this;
                }, n.multiply2f = function(t1, i) {
                    return this.x *= t1, this.y *= i, this;
                }, n.divide = function(t1) {
                    return this.x /= t1.x, this.y /= t1.y, this;
                }, n.divide2f = function(t1, i) {
                    return this.x /= t1, this.y /= i, this;
                }, n.negative = function() {
                    return this.x = -this.x, this.y = -this.y, this;
                }, n.dot = function(t1) {
                    return this.x * t1.x + this.y * t1.y;
                }, n.cross = function(t1) {
                    return this.x * t1.y - this.y * t1.x;
                }, n.length = function() {
                    return br(this.x * this.x + this.y * this.y);
                }, n.lengthSqr = function() {
                    return this.x * this.x + this.y * this.y;
                }, n.normalize = function() {
                    var _$i = this.x, n = this.y, s = _$i * _$i + n * n;
                    return s > 0 && (s = 1 / br(s), this.x *= s, this.y *= s), this;
                }, n.angle = function(t1) {
                    var _$i = this.lengthSqr(), n = t1.lengthSqr();
                    if (0 === _$i || 0 === n) return 0;
                    var s = this.dot(t1) / br(_$i * n);
                    return yr(s = Un(s, -1, 1));
                }, n.signAngle = function(t1) {
                    return kr(this.cross(t1), this.dot(t1));
                }, n.rotate = function(t1) {
                    var _$i = this.x, n = this.y, s = _r(t1), _$r = mr(t1);
                    return this.x = _$r * _$i - s * n, this.y = s * _$i + _$r * n, this;
                }, n.project = function(t1) {
                    var _$i = this.dot(t1) / t1.dot(t1);
                    return this.x = t1.x * _$i, this.y = t1.y * _$i, this;
                }, n.transformMat4 = function(t1) {
                    var _$i = this.x, n = this.y;
                    return this.x = t1.m00 * _$i + t1.m04 * n + t1.m12, this.y = t1.m01 * _$i + t1.m05 * n + t1.m13, this;
                }, n.toVec3 = function() {
                    return new Ss(this.x, this.y, 0);
                }, i;
            }(mi));
            function Ir(t1, i) {
                return new Or(t1, i);
            }
            Or.ZERO = Sr(0, 0), Or.ONE = Sr(1, 1), Or.NEG_ONE = Sr(-1, -1), Or.UNIT_X = Sr(1, 0), Or.UNIT_Y = Sr(0, 1), An.fastDefine("cc.Vec2", Or, {
                x: 0,
                y: 0
            }), A.Vec2 = Or, A.v2 = Ir;
            var Rr = Math.abs, Mr = Math.max, Cr = Math.min, Nr = Math.PI, Pr = Math.sin, Dr = Math.cos, Lr = Math.atan2, Br = Math.sqrt, Fr = Math.ceil, Ur = Math.floor, jr = Math.round;
            function Gr(t1, i, n, s) {
                return Object.freeze(new Hr(t1, i, n, s));
            }
            var Hr = t1("as", function(t1) {
                function i(i, n, s, r) {
                    var _$h;
                    return _$h = t1.call(this) || this, "object" == (void 0 === i ? "undefined" : _type_of(i)) ? (_$h.x = i.x, _$h.y = i.y, _$h.z = i.z, _$h.w = i.w) : (_$h.x = i || 0, _$h.y = n || 0, _$h.z = s || 0, _$h.w = r || 0), _$h;
                }
                h(i, t1), i.clone = function(t1) {
                    return new i(t1.x, t1.y, t1.z, t1.w);
                }, i.copy = function(t1, i) {
                    return t1.x = i.x, t1.y = i.y, t1.z = i.z, t1.w = i.w, t1;
                }, i.set = function(t1, i, n, s, r) {
                    return t1.x = i, t1.y = n, t1.z = s, t1.w = r, t1;
                }, i.fromColor = function(t1, i) {
                    return t1.x = i.r, t1.y = i.g, t1.z = i.b, t1.w = i.a, t1;
                }, i.angle = function(t1, i) {
                    var n = t1.y * i.z - t1.z * i.y, s = t1.z * i.x - t1.x * i.z, _$r = t1.x * i.y - t1.y * i.x, _$h = t1.x * i.x + t1.y * i.y + t1.z * i.z;
                    return Lr(Br(n * n + s * s + _$r * _$r), _$h);
                }, i.add = function(t1, i, n) {
                    return t1.x = i.x + n.x, t1.y = i.y + n.y, t1.z = i.z + n.z, t1.w = i.w + n.w, t1;
                }, i.subtract = function(t1, i, n) {
                    return t1.x = i.x - n.x, t1.y = i.y - n.y, t1.z = i.z - n.z, t1.w = i.w - n.w, t1;
                }, i.multiply = function(t1, i, n) {
                    return t1.x = i.x * n.x, t1.y = i.y * n.y, t1.z = i.z * n.z, t1.w = i.w * n.w, t1;
                }, i.divide = function(t1, i, n) {
                    return t1.x = i.x / n.x, t1.y = i.y / n.y, t1.z = i.z / n.z, t1.w = i.w / n.w, t1;
                }, i.ceil = function(t1, i) {
                    return t1.x = Fr(i.x), t1.y = Fr(i.y), t1.z = Fr(i.z), t1.w = Fr(i.w), t1;
                }, i.floor = function(t1, i) {
                    return t1.x = Ur(i.x), t1.y = Ur(i.y), t1.z = Ur(i.z), t1.w = Ur(i.w), t1;
                }, i.min = function(t1, i, n) {
                    return t1.x = Cr(i.x, n.x), t1.y = Cr(i.y, n.y), t1.z = Cr(i.z, n.z), t1.w = Cr(i.w, n.w), t1;
                }, i.max = function(t1, i, n) {
                    return t1.x = Mr(i.x, n.x), t1.y = Mr(i.y, n.y), t1.z = Mr(i.z, n.z), t1.w = Mr(i.w, n.w), t1;
                }, i.round = function(t1, i) {
                    return t1.x = jr(i.x), t1.y = jr(i.y), t1.z = jr(i.z), t1.w = jr(i.w), t1;
                }, i.multiplyScalar = function(t1, i, n) {
                    return t1.x = i.x * n, t1.y = i.y * n, t1.z = i.z * n, t1.w = i.w * n, t1;
                }, i.scaleAndAdd = function(t1, i, n, s) {
                    return t1.x = i.x + n.x * s, t1.y = i.y + n.y * s, t1.z = i.z + n.z * s, t1.w = i.w + n.w * s, t1;
                }, i.distance = function(t1, i) {
                    var n = i.x - t1.x, s = i.y - t1.y, _$r = i.z - t1.z, _$h = i.w - t1.w;
                    return Br(n * n + s * s + _$r * _$r + _$h * _$h);
                }, i.squaredDistance = function(t1, i) {
                    var n = i.x - t1.x, s = i.y - t1.y, _$r = i.z - t1.z, _$h = i.w - t1.w;
                    return n * n + s * s + _$r * _$r + _$h * _$h;
                }, i.len = function(t1) {
                    var _$i = t1.x, n = t1.y, s = t1.z, _$r = t1.w;
                    return Br(_$i * _$i + n * n + s * s + _$r * _$r);
                }, i.lengthSqr = function(t1) {
                    var _$i = t1.x, n = t1.y, s = t1.z, _$r = t1.w;
                    return _$i * _$i + n * n + s * s + _$r * _$r;
                }, i.negate = function(t1, i) {
                    return t1.x = -i.x, t1.y = -i.y, t1.z = -i.z, t1.w = -i.w, t1;
                }, i.inverse = function(t1, i) {
                    return t1.x = 1 / i.x, t1.y = 1 / i.y, t1.z = 1 / i.z, t1.w = 1 / i.w, t1;
                }, i.inverseSafe = function(t1, i) {
                    var n = i.x, s = i.y, _$r = i.z, _$h = i.w;
                    return Rr(n) < Ln ? t1.x = 0 : t1.x = 1 / n, Rr(s) < Ln ? t1.y = 0 : t1.y = 1 / s, Rr(_$r) < Ln ? t1.z = 0 : t1.z = 1 / _$r, Rr(_$h) < Ln ? t1.w = 0 : t1.w = 1 / _$h, t1;
                }, i.normalize = function(t1, i) {
                    var n = i.x, s = i.y, _$r = i.z, _$h = i.w, e = n * n + s * s + _$r * _$r + _$h * _$h;
                    return e > 0 ? (t1.x = n * (e = 1 / Br(e)), t1.y = s * e, t1.z = _$r * e, t1.w = _$h * e) : (t1.x = 0, t1.y = 0, t1.z = 0, t1.w = 0), t1;
                }, i.dot = function(t1, i) {
                    return t1.x * i.x + t1.y * i.y + t1.z * i.z + t1.w * i.w;
                }, i.lerp = function(t1, i, n, s) {
                    return t1.x = i.x + s * (n.x - i.x), t1.y = i.y + s * (n.y - i.y), t1.z = i.z + s * (n.z - i.z), t1.w = i.w + s * (n.w - i.w), t1;
                }, i.scale = function(t1, i, n) {
                    return t1.x = i.x * n, t1.y = i.y * n, t1.z = i.z * n, t1.w = i.w * n, t1;
                }, i.random = function(t1, i) {
                    i = i || 1;
                    var n = 2 * Vn() * Nr, s = 2 * Vn() - 1, _$r = Br(1 - s * s);
                    return t1.x = _$r * Dr(n) * i, t1.y = _$r * Pr(n) * i, t1.z = s * i, t1.w = 0, t1;
                }, i.transformMat4 = function(t1, i, n) {
                    var s = i.x, _$r = i.y, _$h = i.z, e = i.w;
                    return t1.x = n.m00 * s + n.m04 * _$r + n.m08 * _$h + n.m12 * e, t1.y = n.m01 * s + n.m05 * _$r + n.m09 * _$h + n.m13 * e, t1.z = n.m02 * s + n.m06 * _$r + n.m10 * _$h + n.m14 * e, t1.w = n.m03 * s + n.m07 * _$r + n.m11 * _$h + n.m15 * e, t1;
                }, i.transformAffine = function(t1, i, n) {
                    var s = i.x, _$r = i.y, _$h = i.z, e = i.w;
                    return t1.x = n.m00 * s + n.m04 * _$r + n.m08 * _$h + n.m12 * e, t1.y = n.m01 * s + n.m05 * _$r + n.m09 * _$h + n.m13 * e, t1.z = n.m02 * s + n.m06 * _$r + n.m10 * _$h + n.m14 * e, t1.w = i.w, t1;
                }, i.transformQuat = function(t1, i, n) {
                    var s = i.x, _$r = i.y, _$h = i.z, e = n.x, u = n.y, o = n.z, f = n.w, _$c = f * s + u * _$h - o * _$r, a = f * _$r + o * s - e * _$h, v = f * _$h + e * _$r - u * s, l = -e * s - u * _$r - o * _$h;
                    return t1.x = _$c * f + -(l * e) + -(a * o) - -(v * u), t1.y = a * f + -(l * u) + -(v * e) - -(_$c * o), t1.z = v * f + -(l * o) + -(_$c * u) - -(a * e), t1.w = i.w, t1;
                }, i.toArray = function(t1, i, n) {
                    return void 0 === n && (n = 0), t1[n + 0] = i.x, t1[n + 1] = i.y, t1[n + 2] = i.z, t1[n + 3] = i.w, t1;
                }, i.fromArray = function(t1, i, n) {
                    return void 0 === n && (n = 0), t1.x = i[n + 0], t1.y = i[n + 1], t1.z = i[n + 2], t1.w = i[n + 3], t1;
                }, i.strictEquals = function(t1, i) {
                    return t1.x === i.x && t1.y === i.y && t1.z === i.z && t1.w === i.w;
                }, i.equals = function(t1, i, n) {
                    void 0 === n && (n = Ln);
                    var s = 1 / 0;
                    return Rr(t1.x) !== s && Rr(t1.y) !== s && Rr(t1.z) !== s && Rr(t1.w) !== s && Rr(i.x) !== s && Rr(i.y) !== s && Rr(i.z) !== s && Rr(i.w) !== s && Rr(t1.x - i.x) <= n * Mr(1, Rr(t1.x), Rr(i.x)) && Rr(t1.y - i.y) <= n * Mr(1, Rr(t1.y), Rr(i.y)) && Rr(t1.z - i.z) <= n * Mr(1, Rr(t1.z), Rr(i.z)) && Rr(t1.w - i.w) <= n * Mr(1, Rr(t1.w), Rr(i.w));
                };
                var n = i.prototype;
                return n.clone = function() {
                    return new i(this.x, this.y, this.z, this.w);
                }, n.set = function(t1, i, n, s) {
                    return "object" == (void 0 === t1 ? "undefined" : _type_of(t1)) ? (this.x = t1.x, this.y = t1.y, this.z = t1.z, this.w = t1.w) : (this.x = t1 || 0, this.y = i || 0, this.z = n || 0, this.w = s || 0), this;
                }, n.equals = function(t1, i) {
                    return void 0 === i && (i = Ln), Rr(this.x - t1.x) <= i * Mr(1, Rr(this.x), Rr(t1.x)) && Rr(this.y - t1.y) <= i * Mr(1, Rr(this.y), Rr(t1.y)) && Rr(this.z - t1.z) <= i * Mr(1, Rr(this.z), Rr(t1.z)) && Rr(this.w - t1.w) <= i * Mr(1, Rr(this.w), Rr(t1.w));
                }, n.equals4f = function(t1, i, n, s, r) {
                    return void 0 === r && (r = Ln), Rr(this.x - t1) <= r * Mr(1, Rr(this.x), Rr(t1)) && Rr(this.y - i) <= r * Mr(1, Rr(this.y), Rr(i)) && Rr(this.z - n) <= r * Mr(1, Rr(this.z), Rr(n)) && Rr(this.w - s) <= r * Mr(1, Rr(this.w), Rr(s));
                }, n.strictEquals = function(t1) {
                    return this.x === t1.x && this.y === t1.y && this.z === t1.z && this.w === t1.w;
                }, n.strictEquals4f = function(t1, i, n, s) {
                    return this.x === t1 && this.y === i && this.z === n && this.w === s;
                }, n.lerp = function(t1, i) {
                    var s = this.x, _$r = this.y, _$h = this.z, e = this.w;
                    return this.x = s + i * (t1.x - s), this.y = _$r + i * (t1.y - _$r), this.z = _$h + i * (t1.z - _$h), this.w = e + i * (t1.w - e), this;
                }, n.toString = function() {
                    return "(" + this.x + ", " + this.y + ", " + this.z + ", " + this.w + ")";
                }, n.clampf = function(t1, i) {
                    return this.x = Un(this.x, t1.x, i.x), this.y = Un(this.y, t1.y, i.y), this.z = Un(this.z, t1.z, i.z), this.w = Un(this.w, t1.w, i.w), this;
                }, n.add = function(t1) {
                    return this.x += t1.x, this.y += t1.y, this.z += t1.z, this.w += t1.w, this;
                }, n.add4f = function(t1, i, n, s) {
                    return this.x += t1, this.y += i, this.z += n, this.w += s, this;
                }, n.subtract = function(t1) {
                    return this.x -= t1.x, this.y -= t1.y, this.z -= t1.z, this.w -= t1.w, this;
                }, n.subtract4f = function(t1, i, n, s) {
                    return this.x -= t1, this.y -= i, this.z -= n, this.w -= s, this;
                }, n.multiplyScalar = function(t1) {
                    return this.x *= t1, this.y *= t1, this.z *= t1, this.w *= t1, this;
                }, n.multiply = function(t1) {
                    return this.x *= t1.x, this.y *= t1.y, this.z *= t1.z, this.w *= t1.w, this;
                }, n.multiply4f = function(t1, i, n, s) {
                    return this.x *= t1, this.y *= i, this.z *= n, this.w *= s, this;
                }, n.divide = function(t1) {
                    return this.x /= t1.x, this.y /= t1.y, this.z /= t1.z, this.w /= t1.w, this;
                }, n.divide4f = function(t1, i, n, s) {
                    return this.x /= t1, this.y /= i, this.z /= n, this.w /= s, this;
                }, n.negative = function() {
                    return this.x = -this.x, this.y = -this.y, this.z = -this.z, this.w = -this.w, this;
                }, n.dot = function(t1) {
                    return this.x * t1.x + this.y * t1.y + this.z * t1.z + this.w * t1.w;
                }, n.cross = function(t1) {
                    var n = this.x, s = this.y, _$r = this.z, _$h = t1.x, e = t1.y, u = t1.z;
                    return this.x = s * u - _$r * e, this.y = _$r * _$h - n * u, this.z = n * e - s * _$h, this;
                }, n.length = function() {
                    var _$i = this.x, n = this.y, s = this.z, _$r = this.w;
                    return Br(_$i * _$i + n * n + s * s + _$r * _$r);
                }, n.lengthSqr = function() {
                    var _$i = this.x, n = this.y, s = this.z, _$r = this.w;
                    return _$i * _$i + n * n + s * s + _$r * _$r;
                }, n.normalize = function() {
                    var _$i = this.x, n = this.y, s = this.z, _$r = this.w, _$h = _$i * _$i + n * n + s * s + _$r * _$r;
                    return _$h > 0 && (_$h = 1 / Br(_$h), this.x = _$i * _$h, this.y = n * _$h, this.z = s * _$h, this.w = _$r * _$h), this;
                }, n.scale = function(t1) {
                    return this.x *= t1, this.y *= t1, this.z *= t1, this.w *= t1, this;
                }, n.transformMat4 = function(t1) {
                    var n = this.x, s = this.y, _$r = this.z, _$h = this.w;
                    return this.x = t1.m00 * n + t1.m04 * s + t1.m08 * _$r + t1.m12 * _$h, this.y = t1.m01 * n + t1.m05 * s + t1.m09 * _$r + t1.m13 * _$h, this.z = t1.m02 * n + t1.m06 * s + t1.m10 * _$r + t1.m14 * _$h, this.w = t1.m03 * n + t1.m07 * s + t1.m11 * _$r + t1.m15 * _$h, this;
                }, i;
            }(mi));
            function Vr(t1, i, n, s) {
                return new Hr(t1, i, n, s);
            }
            Hr.ZERO = Gr(0, 0, 0, 0), Hr.ONE = Gr(1, 1, 1, 1), Hr.NEG_ONE = Gr(-1, -1, -1, -1), Hr.UNIT_X = Gr(1, 0, 0, 0), Hr.UNIT_Y = Gr(0, 1, 0, 0), Hr.UNIT_Z = Gr(0, 0, 1, 0), Hr.UNIT_W = Gr(0, 0, 0, 1), An.fastDefine("cc.Vec4", Hr, {
                x: 0,
                y: 0,
                z: 0,
                w: 0
            }), A.Vec4 = Hr, A.v4 = Vr;
            var Wr = 1 / 255, zr = Math.abs, $r = Math.max;
            function Xr(t1, i, n, s) {
                return Object.freeze(new Yr(t1, i, n, s));
            }
            var Yr = t1("aD", function(t1) {
                function i(i, n, s, r) {
                    var _$h;
                    return (_$h = t1.call(this) || this).L = new Uint8ClampedArray(4), "string" == typeof i ? _$h.fromHEX(i) : void 0 !== n ? _$h.set(i, n, s, r) : _$h.set(i), _$h;
                }
                h(i, t1), i.clone = function(t1) {
                    var n = new i;
                    return n.r = t1.r, n.g = t1.g, n.b = t1.b, n.a = t1.a, n;
                }, i.copy = function(t1, i) {
                    return t1.r = i.r, t1.g = i.g, t1.b = i.b, t1.a = i.a, t1;
                }, i.set = function(t1, i, n, s, r) {
                    return t1.r = i, t1.g = n, t1.b = s, t1.a = r, t1;
                }, i.toVec4 = function(t1, i) {
                    var n = t1.L;
                    return (i = void 0 !== i ? i : new Hr).x = n[0] * Wr, i.y = n[1] * Wr, i.z = n[2] * Wr, i.w = n[3] * Wr, i;
                }, i.fromVec4 = function(t1, n) {
                    var _$s = (n = void 0 === n ? new i : n).L;
                    return _$s[0] = t1.x / Wr, _$s[1] = t1.y / Wr, _$s[2] = t1.z / Wr, _$s[3] = t1.w / Wr, n;
                }, i.fromHEX = function(t1, i) {
                    var n;
                    return "string" == typeof i ? (6 === (i = "#" === i[0] ? i.substring(1) : i).length ? i += "FF" : 3 === i.length ? i = i[0] + i[0] + i[1] + i[1] + i[2] + i[2] + "FF" : 4 === i.length && (i = i[0] + i[0] + i[1] + i[1] + i[2] + i[2] + i[3] + i[3]), n = Number("0x" + i)) : (i < 16777216 && (i = 255 + (i << 8)), n = i), t1.r = n >>> 24, t1.g = (16711680 & n) >>> 16, t1.b = (65280 & n) >>> 8, t1.a = 255 & n, t1;
                }, i.add = function(t1, i, n) {
                    return t1.r = i.r + n.r, t1.g = i.g + n.g, t1.b = i.b + n.b, t1.a = i.a + n.a, t1;
                }, i.subtract = function(t1, i, n) {
                    return t1.r = i.r - n.r, t1.g = i.g - n.g, t1.b = i.b - n.b, t1.a = i.a - n.a, t1;
                }, i.multiply = function(t1, i, n) {
                    return t1.r = i.r * n.r, t1.g = i.g * n.g, t1.b = i.b * n.b, t1.a = i.a * n.a, t1;
                }, i.divide = function(t1, i, n) {
                    return t1.r = i.r / n.r, t1.g = i.g / n.g, t1.b = i.b / n.b, t1.a = i.a / n.a, t1;
                }, i.scale = function(t1, i, n) {
                    return t1.r = i.r * n, t1.g = i.g * n, t1.b = i.b * n, t1.a = i.a * n, t1;
                }, i.lerp = function(t1, i, n, s) {
                    var _$r = i.r, _$h = i.g, e = i.b, u = i.a;
                    return t1.r = _$r + (n.r - _$r) * s, t1.g = _$h + (n.g - _$h) * s, t1.b = e + (n.b - e) * s, t1.a = u + (n.a - u) * s, t1;
                }, i.toArray = function(t1, n, s) {
                    void 0 === s && (s = 0);
                    var _$r = _instanceof(n, i) || n.a > 1 ? 1 / 255 : 1;
                    return t1[s + 0] = n.r * _$r, t1[s + 1] = n.g * _$r, t1[s + 2] = n.b * _$r, t1[s + 3] = n.a * _$r, t1;
                }, i.fromArray = function(t1, i, n) {
                    return void 0 === n && (n = 0), i.r = 255 * t1[n + 0], i.g = 255 * t1[n + 1], i.b = 255 * t1[n + 2], i.a = 255 * t1[n + 3], i;
                }, i.fromUint32 = function(t1, i) {
                    return t1.r = 255 & (i >>>= 0), t1.g = i >> 8 & 255, t1.b = i >> 16 & 255, t1.a = i >> 24 & 255, t1;
                }, i.toUint32 = function(t1) {
                    return (t1.a << 24 | t1.b << 16 | t1.g << 8 | t1.r) >>> 0;
                }, i.strictEquals = function(t1, i) {
                    return t1.r === i.r && t1.g === i.g && t1.b === i.b && t1.a === i.a;
                }, i.equals = function(t1, i, n) {
                    return void 0 === n && (n = Ln), zr(t1.r) !== 1 / 0 && zr(t1.g) !== 1 / 0 && zr(t1.b) !== 1 / 0 && zr(t1.a) !== 1 / 0 && zr(t1.r - i.r) <= n * $r(1, zr(t1.r), zr(i.r)) && zr(t1.g - i.g) <= n * $r(1, zr(t1.g), zr(i.g)) && zr(t1.b - i.b) <= n * $r(1, zr(t1.b), zr(i.b)) && zr(t1.a - i.a) <= n * $r(1, zr(t1.a), zr(i.a));
                }, i.hex = function(t1) {
                    return (255 * t1.r << 24 | 255 * t1.g << 16 | 255 * t1.b << 8 | 255 * t1.a) >>> 0;
                };
                var n = i.prototype;
                return n.clone = function() {
                    var _$t = new i;
                    return _$t.L.set(this.L), _$t;
                }, n.equals = function(t1) {
                    var n = this.L;
                    return t1 && n[0] === t1.r && n[1] === t1.g && n[2] === t1.b && n[3] === t1.a;
                }, n.lerp = function(t1, n) {
                    return i.lerp(this, this, t1, n), this;
                }, n.toString = function() {
                    return "rgba(" + this.r.toFixed() + ", " + this.g.toFixed() + ", " + this.b.toFixed() + ", " + this.a.toFixed() + ")";
                }, n.toCSS = function(t1) {
                    return void 0 === t1 && (t1 = "rgba"), "rgba" === t1 ? "rgba(" + this.r + "," + this.g + "," + this.b + "," + (this.a * Wr).toFixed(2) + ")" : "rgb" === t1 ? "rgb(" + this.r + "," + this.g + "," + this.b + ")" : "#" + this.toHEX(t1);
                }, n.fromHEX = function(t1) {
                    var _$i;
                    return "string" == typeof t1 ? (6 === (t1 = "#" === t1[0] ? t1.substring(1) : t1).length ? t1 += "FF" : 3 === t1.length ? t1 = t1[0] + t1[0] + t1[1] + t1[1] + t1[2] + t1[2] + "FF" : 4 === t1.length && (t1 = t1[0] + t1[0] + t1[1] + t1[1] + t1[2] + t1[2] + t1[3] + t1[3]), _$i = Number("0x" + t1)) : (t1 < 16777216 && (t1 = 255 + (t1 << 8)), _$i = t1), this.r = _$i >>> 24, this.g = (16711680 & _$i) >>> 16, this.b = (65280 & _$i) >>> 8, this.a = 255 & _$i, this;
                }, n.toHEX = function(t1) {
                    void 0 === t1 && (t1 = "#rrggbb");
                    var _$i = this.L, _$s = [
                        (_$i[0] < 16 ? "0" : "") + _$i[0].toString(16),
                        (_$i[1] < 16 ? "0" : "") + _$i[1].toString(16),
                        (_$i[2] < 16 ? "0" : "") + _$i[2].toString(16)
                    ];
                    return "#rgb" === t1 ? (_$s[0] = _$s[0][0], _$s[1] = _$s[1][0], _$s[2] = _$s[2][0]) : "#rrggbbaa" === t1 && _$s.push((_$i[3] < 16 ? "0" : "") + _$i[3].toString(16)), _$s.join("");
                }, n.toRGBValue = function() {
                    return this.L[2] << 16 | this.L[1] << 8 | this.L[0];
                }, n.fromHSV = function(t1, i, n) {
                    var _$s = 0, _$r = 0, _$h = 0;
                    if (0 === i) _$s = _$r = _$h = n;
                    else if (0 === n) _$s = _$r = _$h = 0;
                    else {
                        1 === t1 && (t1 = 0);
                        var e = Math.floor(t1 *= 6), u = t1 - e, o = n * (1 - i), f = n * (1 - i * u), _$c = n * (1 - i * (1 - u));
                        switch(e){
                            default:
                            case 0:
                                _$s = n, _$r = _$c, _$h = o;
                                break;
                            case 1:
                                _$s = f, _$r = n, _$h = o;
                                break;
                            case 2:
                                _$s = o, _$r = n, _$h = _$c;
                                break;
                            case 3:
                                _$s = o, _$r = f, _$h = n;
                                break;
                            case 4:
                                _$s = _$c, _$r = o, _$h = n;
                                break;
                            case 5:
                                _$s = n, _$r = o, _$h = f;
                        }
                    }
                    var a = this.L;
                    return a[0] = 255 * _$s, a[1] = 255 * _$r, a[2] = 255 * _$h, this;
                }, n.toHSV = function() {
                    var _$t = this.L[0] * Wr, _$i = this.L[1] * Wr, n = this.L[2] * Wr, _$s = {
                        h: 0,
                        s: 0,
                        v: 0
                    }, _$r = Math.max(_$t, _$i, n), _$h = Math.min(_$t, _$i, n), e = 0;
                    return _$s.v = _$r, _$s.s = _$r ? (_$r - _$h) / _$r : 0, _$s.s ? (e = _$r - _$h, _$s.h = _$t === _$r ? (_$i - n) / e : _$i === _$r ? 2 + (n - _$t) / e : 4 + (_$t - _$i) / e, _$s.h /= 6, _$s.h < 0 && (_$s.h += 1)) : _$s.h = 0, _$s;
                }, n.set = function(t1, i, n, s) {
                    var _$h, e, u, o, _$r = this.L;
                    return "object" == (void 0 === t1 ? "undefined" : _type_of(t1)) ? t1.L ? _$r.set(t1.L) : (_$r[0] = null != (_$h = t1.r) ? _$h : 0, _$r[1] = null != (e = t1.g) ? e : 0, _$r[2] = null != (u = t1.b) ? u : 0, _$r[3] = null != (o = t1.a) ? o : 255) : (_$r[0] = null != t1 ? t1 : 0, _$r[1] = null != i ? i : 0, _$r[2] = null != n ? n : 0, _$r[3] = null != s ? s : 255), this;
                }, n.multiply = function(t1) {
                    var _$i = this.L;
                    return _$i[0] *= t1.r / 255, _$i[1] *= t1.g / 255, _$i[2] *= t1.b / 255, _$i[3] *= t1.a / 255, this;
                }, n.getModifiableProperties = function() {
                    return [
                        "r",
                        "g",
                        "b",
                        "a"
                    ];
                }, s(i, [
                    {
                        key: "r",
                        get: function get() {
                            return this.L[0];
                        },
                        set: function set(t1) {
                            this.L[0] = t1;
                        }
                    },
                    {
                        key: "g",
                        get: function get() {
                            return this.L[1];
                        },
                        set: function set(t1) {
                            this.L[1] = t1;
                        }
                    },
                    {
                        key: "b",
                        get: function get() {
                            return this.L[2];
                        },
                        set: function set(t1) {
                            this.L[2] = t1;
                        }
                    },
                    {
                        key: "a",
                        get: function get() {
                            return this.L[3];
                        },
                        set: function set(t1) {
                            this.L[3] = t1;
                        }
                    },
                    {
                        key: "x",
                        get: function get() {
                            return this.L[0] * Wr;
                        },
                        set: function set(t1) {
                            this.L[0] = 255 * t1;
                        }
                    },
                    {
                        key: "y",
                        get: function get() {
                            return this.L[1] * Wr;
                        },
                        set: function set(t1) {
                            this.L[1] = 255 * t1;
                        }
                    },
                    {
                        key: "z",
                        get: function get() {
                            return this.L[2] * Wr;
                        },
                        set: function set(t1) {
                            this.L[2] = 255 * t1;
                        }
                    },
                    {
                        key: "w",
                        get: function get() {
                            return this.L[3] * Wr;
                        },
                        set: function set(t1) {
                            this.L[3] = 255 * t1;
                        }
                    }
                ]), i;
            }(mi));
            function Kr(t1, i, n, s) {
                return new Yr(t1, i, n, s);
            }
            function Jr(t1, i, n) {
                if (i > n) {
                    var s = i;
                    i = n, n = s;
                }
                return t1 < i ? i : t1 > n ? n : t1;
            }
            function Qr(t1) {
                var i = t1.clone();
                return i.x = Math.floor(t1.x), i.y = Math.floor(t1.y), i.z = Math.floor(t1.z), i;
            }
            Yr.WHITE = Xr(255, 255, 255, 255), Yr.GRAY = Xr(127, 127, 127, 255), Yr.BLACK = Xr(0, 0, 0, 255), Yr.TRANSPARENT = Xr(0, 0, 0, 0), Yr.RED = Xr(255, 0, 0, 255), Yr.GREEN = Xr(0, 255, 0, 255), Yr.BLUE = Xr(0, 0, 255, 255), Yr.CYAN = Xr(0, 255, 255, 255), Yr.MAGENTA = Xr(255, 0, 255, 255), Yr.YELLOW = Xr(255, 255, 0, 255), An.fastDefine("cc.Color", Yr, {
                r: 0,
                g: 0,
                b: 0,
                a: 255
            }), A.Color = Yr, A.color = Kr;
            var Zr = t1("az", function(t1) {
                function i(i, n) {
                    var _$s;
                    return _$s = t1.call(this) || this, "object" == (void 0 === i ? "undefined" : _type_of(i)) ? (_$s.width = i.width, _$s.height = i.height) : (_$s.width = i || 0, _$s.height = n || 0), _$s;
                }
                h(i, t1), i.lerp = function(t1, i, n, s) {
                    return t1.width = i.width + (n.width - i.width) * s, t1.height = i.height + (n.height - i.height) * s, t1;
                }, i.equals = function(t1, i) {
                    return t1.width === i.width && t1.height === i.height;
                };
                var n = i.prototype;
                return n.clone = function() {
                    return new i(this.width, this.height);
                }, n.set = function(t1, i) {
                    return "object" == (void 0 === t1 ? "undefined" : _type_of(t1)) ? (this.height = t1.height, this.width = t1.width) : (this.width = t1 || 0, this.height = i || 0), this;
                }, n.equals = function(t1) {
                    return this.width === t1.width && this.height === t1.height;
                }, n.lerp = function(t1, i) {
                    return this.width += (t1.width - this.width) * i, this.height += (t1.height - this.height) * i, this;
                }, n.toString = function() {
                    return "(" + this.width + ", " + this.height + ")";
                }, s(i, [
                    {
                        key: "x",
                        get: function get() {
                            return this.width;
                        },
                        set: function set(t1) {
                            this.width = t1;
                        }
                    },
                    {
                        key: "y",
                        get: function get() {
                            return this.height;
                        },
                        set: function set(t1) {
                            this.height = t1;
                        }
                    }
                ]), i;
            }(mi));
            function th(t1, i) {
                return void 0 === t1 && (t1 = 0), void 0 === i && (i = 0), new Zr(t1, i);
            }
            Zr.ZERO = Object.freeze(new Zr(0, 0)), Zr.ONE = Object.freeze(new Zr(1, 1)), An.fastDefine("cc.Size", Zr, {
                width: 0,
                height: 0
            }), A.size = th, A.Size = Zr;
            var ih = Math.max, nh = Math.min, sh = t1("aB", function(t1) {
                function i(i, n, s, r) {
                    var _$h;
                    return _$h = t1.call(this) || this, "object" == (void 0 === i ? "undefined" : _type_of(i)) ? (_$h.x = i.x, _$h.y = i.y, _$h.width = i.width, _$h.height = i.height) : (_$h.x = i || 0, _$h.y = n || 0, _$h.width = s || 0, _$h.height = r || 0), _$h;
                }
                h(i, t1), i.fromMinMax = function(t1, i, n) {
                    var _$s = nh(i.x, n.x), _$r = nh(i.y, n.y), _$h = ih(i.x, n.x), e = ih(i.y, n.y);
                    return t1.x = _$s, t1.y = _$r, t1.width = _$h - _$s, t1.height = e - _$r, t1;
                }, i.lerp = function(t1, i, n, s) {
                    var _$r = i.x, _$h = i.y, e = i.width, u = i.height;
                    return t1.x = _$r + (n.x - _$r) * s, t1.y = _$h + (n.y - _$h) * s, t1.width = e + (n.width - e) * s, t1.height = u + (n.height - u) * s, t1;
                }, i.intersection = function(t1, i, n) {
                    var _$s = i.x, _$r = i.y, _$h = i.x + i.width, e = i.y + i.height, u = n.x, o = n.y, f = n.x + n.width, _$c = n.y + n.height;
                    return t1.x = ih(_$s, u), t1.y = ih(_$r, o), t1.width = nh(_$h, f) - t1.x, t1.height = nh(e, _$c) - t1.y, t1;
                }, i.union = function(t1, i, n) {
                    var _$s = i.x, _$r = i.y, _$h = i.width, e = i.height, u = n.x, o = n.y, f = n.width, _$c = n.height;
                    return t1.x = nh(_$s, u), t1.y = nh(_$r, o), t1.width = ih(_$s + _$h, u + f) - t1.x, t1.height = ih(_$r + e, o + _$c) - t1.y, t1;
                }, i.equals = function(t1, i) {
                    return t1.x === i.x && t1.y === i.y && t1.width === i.width && t1.height === i.height;
                };
                var n = i.prototype;
                return n.clone = function() {
                    return new i(this.x, this.y, this.width, this.height);
                }, n.set = function(t1, i, n, s) {
                    return "object" == (void 0 === t1 ? "undefined" : _type_of(t1)) ? (this.x = t1.x, this.y = t1.y, this.width = t1.width, this.height = t1.height) : (this.x = t1 || 0, this.y = i || 0, this.width = n || 0, this.height = s || 0), this;
                }, n.equals = function(t1) {
                    return this.x === t1.x && this.y === t1.y && this.width === t1.width && this.height === t1.height;
                }, n.lerp = function(t1, i) {
                    var _$s = this.x, _$r = this.y, _$h = this.width, e = this.height;
                    return this.x = _$s + (t1.x - _$s) * i, this.y = _$r + (t1.y - _$r) * i, this.width = _$h + (t1.width - _$h) * i, this.height = e + (t1.height - e) * i, this;
                }, n.toString = function() {
                    return "(" + this.x + ", " + this.y + ", " + this.width + ", " + this.height + ")";
                }, n.intersects = function(t1) {
                    var n = this.x + this.width, _$s = this.y + this.height, _$r = t1.x + t1.width, _$h = t1.y + t1.height;
                    return !(n < t1.x || _$r < this.x || _$s < t1.y || _$h < this.y);
                }, n.contains = function(t1) {
                    return this.x <= t1.x && this.x + this.width >= t1.x && this.y <= t1.y && this.y + this.height >= t1.y;
                }, n.containsRect = function(t1) {
                    return this.x <= t1.x && this.x + this.width >= t1.x + t1.width && this.y <= t1.y && this.y + this.height >= t1.y + t1.height;
                }, n.transformMat4 = function(t1) {
                    var n = this.x, _$s = this.y, _$r = n + this.width, _$h = _$s + this.height, e = t1.m00 * n + t1.m04 * _$s + t1.m12, u = t1.m01 * n + t1.m05 * _$s + t1.m13, o = t1.m00 * _$r + t1.m04 * _$s + t1.m12, f = t1.m01 * _$r + t1.m05 * _$s + t1.m13, _$c = t1.m00 * n + t1.m04 * _$h + t1.m12, a = t1.m01 * n + t1.m05 * _$h + t1.m13, v = t1.m00 * _$r + t1.m04 * _$h + t1.m12, l = t1.m01 * _$r + t1.m05 * _$h + t1.m13, _$d = nh(e, o, _$c, v), w = ih(e, o, _$c, v), g = nh(u, f, a, l), p = ih(u, f, a, l);
                    return this.x = _$d, this.y = g, this.width = w - _$d, this.height = p - g, this;
                }, n.transformMat4ToPoints = function(t1, i, n, s, r) {
                    var e = this.x, u = this.y, o = e + this.width, f = u + this.height;
                    i.x = t1.m00 * e + t1.m04 * u + t1.m12, i.y = t1.m01 * e + t1.m05 * u + t1.m13, r.x = t1.m00 * o + t1.m04 * u + t1.m12, r.y = t1.m01 * o + t1.m05 * u + t1.m13, n.x = t1.m00 * e + t1.m04 * f + t1.m12, n.y = t1.m01 * e + t1.m05 * f + t1.m13, s.x = t1.m00 * o + t1.m04 * f + t1.m12, s.y = t1.m01 * o + t1.m05 * f + t1.m13;
                }, s(i, [
                    {
                        key: "xMin",
                        get: function get() {
                            return this.x;
                        },
                        set: function set(t1) {
                            this.width += this.x - t1, this.x = t1;
                        }
                    },
                    {
                        key: "yMin",
                        get: function get() {
                            return this.y;
                        },
                        set: function set(t1) {
                            this.height += this.y - t1, this.y = t1;
                        }
                    },
                    {
                        key: "xMax",
                        get: function get() {
                            return this.x + this.width;
                        },
                        set: function set(t1) {
                            this.width = t1 - this.x;
                        }
                    },
                    {
                        key: "yMax",
                        get: function get() {
                            return this.y + this.height;
                        },
                        set: function set(t1) {
                            this.height = t1 - this.y;
                        }
                    },
                    {
                        key: "center",
                        get: function get() {
                            return new Or(this.x + .5 * this.width, this.y + .5 * this.height);
                        },
                        set: function set(t1) {
                            this.x = t1.x - .5 * this.width, this.y = t1.y - .5 * this.height;
                        }
                    },
                    {
                        key: "origin",
                        get: function get() {
                            return new Or(this.x, this.y);
                        },
                        set: function set(t1) {
                            this.x = t1.x, this.y = t1.y;
                        }
                    },
                    {
                        key: "size",
                        get: function get() {
                            return new Zr(this.width, this.height);
                        },
                        set: function set(t1) {
                            this.width = t1.width, this.height = t1.height;
                        }
                    },
                    {
                        key: "z",
                        get: function get() {
                            return this.width;
                        },
                        set: function set(t1) {
                            this.width = t1;
                        }
                    },
                    {
                        key: "w",
                        get: function get() {
                            return this.height;
                        },
                        set: function set(t1) {
                            this.height = t1;
                        }
                    }
                ]), i;
            }(mi));
            function rh(t1, i, n, s) {
                return void 0 === t1 && (t1 = 0), void 0 === i && (i = 0), void 0 === n && (n = 0), void 0 === s && (s = 0), new sh(t1, i, n, s);
            }
            An.fastDefine("cc.Rect", sh, {
                x: 0,
                y: 0,
                width: 0,
                height: 0
            }), A.Rect = sh, A.rect = rh;
            var hh = t1("b4", Float64Array), eh = t1("b5", function(t1) {
                function i() {
                    return t1.apply(this, arguments) || this;
                }
                return h(i, t1), i.createFloatArray = function(t1) {
                    return new hh(t1);
                }, s(i, [
                    {
                        key: "array",
                        get: function get() {
                            return this._array;
                        }
                    }
                ]), i;
            }(mi)), uh = Object.freeze({
                __proto__: null,
                Color: Yr,
                EPSILON: Ln,
                HALF_PI: Pn,
                MATH_FLOAT_ARRAY: hh,
                Mat3: Ps,
                Mat4: cr,
                MathBase: eh,
                Quat: qs,
                Rect: sh,
                Size: Zr,
                TWO_PI: Dn,
                Vec2: Or,
                Vec3: Ss,
                Vec4: Hr,
                absMax: is,
                absMaxComponent: ts,
                approx: Fn,
                bits: P,
                clamp: Un,
                clamp01: xn,
                color: Kr,
                enumerableProps: ns,
                equals: Bn,
                floatToHalf: os,
                halfToFloat: fs,
                inverseLerp: Zn,
                lerp: jn,
                mat4: lr,
                nextPow2: Kn,
                pingPong: Qn,
                preTransforms: sr,
                pseudoRandom: Xn,
                pseudoRandomRange: qn,
                pseudoRandomRangeInt: Yn,
                quat: ir,
                random: Vn,
                randomRange: zn,
                randomRangeInt: $n,
                rect: rh,
                repeat: Jn,
                setRandGenerator: Wn,
                size: th,
                toDegree: Hn,
                toRadian: Gn,
                v2: Ir,
                v3: Os,
                v4: Vr
            });
            t1("ai", uh);
            var oh = new Ss, fh = new Ss, ch = new Ss, ah = new Ss, vh = new Ss, lh = new Ss, dh = [
                ,
                ,
                , 
            ], _$wh = [
                ,
                ,
                , 
            ];
            function gh(t1, i) {
                return Ss.dot(i.n, t1) - i.d;
            }
            function ph(t1, i, n) {
                return Ss.copy(t1, i), Ss.subtract(vh, n.center, n.halfExtents), Ss.add(lh, n.center, n.halfExtents), t1.x = t1.x < vh.x ? vh.x : t1.x, t1.y = t1.y < vh.y ? vh.y : t1.y, t1.z = t1.z < vh.z ? vh.z : t1.z, t1.x = t1.x > lh.x ? lh.x : t1.x, t1.y = t1.y > lh.y ? lh.y : t1.y, t1.z = t1.z > lh.z ? lh.z : t1.z, t1;
            }
            function yh(t1, i, n) {
                Ss.set(oh, n.orientation.m00, n.orientation.m01, n.orientation.m02), Ss.set(fh, n.orientation.m03, n.orientation.m04, n.orientation.m05), Ss.set(ch, n.orientation.m06, n.orientation.m07, n.orientation.m08), dh[0] = oh, dh[1] = fh, dh[2] = ch, _$wh[0] = n.halfExtents.x, _$wh[1] = n.halfExtents.y, _$wh[2] = n.halfExtents.z, Ss.subtract(ah, i, n.center), Ss.set(t1, n.center.x, n.center.y, n.center.z);
                for(var s = 0; s < 3; s++){
                    var _$r = Ss.dot(ah, dh[s]);
                    _$r > _$wh[s] && (_$r = _$wh[s]), _$r < -_$wh[s] && (_$r = -_$wh[s]), t1.x += _$r * dh[s].x, t1.y += _$r * dh[s].y, t1.z += _$r * dh[s].z;
                }
                return t1;
            }
            var _h = Object.freeze({
                __proto__: null,
                point_plane: gh,
                pt_point_aabb: ph,
                pt_point_line: function pt_point_line(t1, i, n, s) {
                    Ss.subtract(oh, n, s);
                    var _$r = oh.clone(), h = Ss.lengthSqr(_$r);
                    if (0 === h) Ss.copy(t1, n);
                    else {
                        Ss.subtract(oh, i, n);
                        var e = Ss.dot(oh, _$r) / h;
                        e < 0 ? Ss.copy(t1, n) : e > 1 ? Ss.copy(t1, s) : Ss.scaleAndAdd(t1, n, _$r, e);
                    }
                },
                pt_point_obb: yh,
                pt_point_plane: function pt_point_plane(t1, i, n) {
                    var s = gh(i, n);
                    return Ss.subtract(t1, i, Ss.multiplyScalar(t1, n.n, s));
                }
            }), mh = function() {
                function t1(t1, i, n, s, r, h) {
                    void 0 === t1 && (t1 = 0), void 0 === i && (i = 0), void 0 === n && (n = 0), void 0 === s && (s = 0), void 0 === r && (r = 0), void 0 === h && (h = -1), this.s = void 0, this.e = void 0, this.U = void 0, this.U = 2, this.s = new Ss(t1, i, n), this.e = new Ss(s, r, h);
                }
                return t1.create = function(i, n, s, r, h, e) {
                    return new t1(i, n, s, r, h, e);
                }, t1.clone = function(i) {
                    return new t1(i.s.x, i.s.y, i.s.z, i.e.x, i.e.y, i.e.z);
                }, t1.copy = function(t1, i) {
                    return Ss.copy(t1.s, i.s), Ss.copy(t1.e, i.e), t1;
                }, t1.fromPoints = function(t1, i, n) {
                    return Ss.copy(t1.s, i), Ss.copy(t1.e, n), t1;
                }, t1.set = function(t1, i, n, s, r, h, e) {
                    return t1.s.x = i, t1.s.y = n, t1.s.z = s, t1.e.x = r, t1.e.y = h, t1.e.z = e, t1;
                }, t1.len = function(t1) {
                    return Ss.distance(t1.s, t1.e);
                }, t1.prototype.length = function() {
                    return Ss.distance(this.s, this.e);
                }, s(t1, [
                    {
                        key: "type",
                        get: function get() {
                            return this.U;
                        }
                    }
                ]), t1;
            }(), bh = new Ss(0, 0, 0), kh = new Ss(0, 0, 0), Ah = lr(), Eh = Vr(), Th = function() {
                function t1(t1, i, n, s) {
                    void 0 === t1 && (t1 = 0), void 0 === i && (i = 1), void 0 === n && (n = 0), void 0 === s && (s = 0), this._type = 32, this.n = new Ss(t1, i, n), this.d = s;
                }
                return t1.create = function(i, n, s, r) {
                    return new t1(i, n, s, r);
                }, t1.clone = function(i) {
                    return new t1(i.n.x, i.n.y, i.n.z, i.d);
                }, t1.copy = function(t1, i) {
                    return Ss.copy(t1.n, i.n), t1.d = i.d, t1;
                }, t1.fromPoints = function(t1, i, n, s) {
                    return Ss.subtract(bh, n, i), Ss.subtract(kh, s, i), Ss.normalize(t1.n, Ss.cross(t1.n, bh, kh)), t1.d = Ss.dot(t1.n, i), t1;
                }, t1.set = function(t1, i, n, s, r) {
                    return t1.n.x = i, t1.n.y = n, t1.n.z = s, t1.d = r, t1;
                }, t1.fromNormalAndPoint = function(t1, i, n) {
                    return Ss.copy(t1.n, i), t1.d = Ss.dot(i, n), t1;
                }, t1.normalize = function(t1, i) {
                    var n = i.n.length();
                    return Ss.normalize(t1.n, i.n), n > 0 && (t1.d = i.d / n), t1;
                }, t1.prototype.transform = function(t1) {
                    cr.invert(Ah, t1), cr.transpose(Ah, Ah), Hr.set(Eh, this.n.x, this.n.y, this.n.z, -this.d), Hr.transformMat4(Eh, Eh, Ah), Ss.set(this.n, Eh.x, Eh.y, Eh.z), this.d = -Eh.w;
                }, s(t1, [
                    {
                        key: "type",
                        get: function get() {
                            return this._type;
                        }
                    },
                    {
                        key: "x",
                        get: function get() {
                            return this.n.x;
                        },
                        set: function set(t1) {
                            this.n.x = t1;
                        }
                    },
                    {
                        key: "y",
                        get: function get() {
                            return this.n.y;
                        },
                        set: function set(t1) {
                            this.n.y = t1;
                        }
                    },
                    {
                        key: "z",
                        get: function get() {
                            return this.n.z;
                        },
                        set: function set(t1) {
                            this.n.z = t1;
                        }
                    },
                    {
                        key: "w",
                        get: function get() {
                            return this.d;
                        },
                        set: function set(t1) {
                            this.d = t1;
                        }
                    }
                ]), t1;
            }(), Sh = function() {
                function t1(t1, i, n, s, r, h) {
                    void 0 === t1 && (t1 = 0), void 0 === i && (i = 0), void 0 === n && (n = 0), void 0 === s && (s = 0), void 0 === r && (r = 0), void 0 === h && (h = -1), this._type = 1, this.o = new Ss(t1, i, n), this.d = new Ss(s, r, h);
                }
                return t1.create = function(i, n, s, r, h, e) {
                    return void 0 === i && (i = 0), void 0 === n && (n = 0), void 0 === s && (s = 0), void 0 === r && (r = 0), void 0 === h && (h = 0), void 0 === e && (e = 1), new t1(i, n, s, r, h, e);
                }, t1.clone = function(i) {
                    return new t1(i.o.x, i.o.y, i.o.z, i.d.x, i.d.y, i.d.z);
                }, t1.copy = function(t1, i) {
                    return Ss.copy(t1.o, i.o), Ss.copy(t1.d, i.d), t1;
                }, t1.fromPoints = function(t1, i, n) {
                    return Ss.copy(t1.o, i), Ss.normalize(t1.d, Ss.subtract(t1.d, n, i)), t1;
                }, t1.set = function(t1, i, n, s, r, h, e) {
                    return t1.o.x = i, t1.o.y = n, t1.o.z = s, t1.d.x = r, t1.d.y = h, t1.d.z = e, t1;
                }, t1.prototype.computeHit = function(t1, i) {
                    Ss.normalize(t1, this.d), Ss.scaleAndAdd(t1, this.o, t1, i);
                }, s(t1, [
                    {
                        key: "type",
                        get: function get() {
                            return this._type;
                        }
                    }
                ]), t1;
            }(), Oh = function() {
                function t1(t1, i, n, s, r, h, e, u, o) {
                    void 0 === t1 && (t1 = 0), void 0 === i && (i = 0), void 0 === n && (n = 0), void 0 === s && (s = 1), void 0 === r && (r = 0), void 0 === h && (h = 0), void 0 === e && (e = 0), void 0 === u && (u = 1), void 0 === o && (o = 0), this._type = 64, this.a = new Ss(t1, i, n), this.b = new Ss(s, r, h), this.c = new Ss(e, u, o);
                }
                return t1.create = function(i, n, s, r, h, e, u, o, f) {
                    return void 0 === i && (i = 1), void 0 === n && (n = 0), void 0 === s && (s = 0), void 0 === r && (r = 0), void 0 === h && (h = 0), void 0 === e && (e = 0), void 0 === u && (u = 0), void 0 === o && (o = 0), void 0 === f && (f = 1), new t1(i, n, s, r, h, e, u, o, f);
                }, t1.clone = function(i) {
                    return new t1(i.a.x, i.a.y, i.a.z, i.b.x, i.b.y, i.b.z, i.c.x, i.c.y, i.c.z);
                }, t1.copy = function(t1, i) {
                    return Ss.copy(t1.a, i.a), Ss.copy(t1.b, i.b), Ss.copy(t1.c, i.c), t1;
                }, t1.fromPoints = function(t1, i, n, s) {
                    return Ss.copy(t1.a, i), Ss.copy(t1.b, n), Ss.copy(t1.c, s), t1;
                }, t1.set = function(t1, i, n, s, r, h, e, u, o, f) {
                    return t1.a.x = i, t1.a.y = n, t1.a.z = s, t1.b.x = r, t1.b.y = h, t1.b.z = e, t1.c.x = u, t1.c.y = o, t1.c.z = f, t1;
                }, s(t1, [
                    {
                        key: "type",
                        get: function get() {
                            return this._type;
                        }
                    }
                ]), t1;
            }(), Ih = new Ss, Rh = new Ss, Mh = new Ss, Ch = new Ss;
            function Nh(t1) {
                return Math.max(Math.max(t1.x, t1.y), t1.z);
            }
            var Ph = function() {
                function t1(t1, i, n, s) {
                    void 0 === t1 && (t1 = 0), void 0 === i && (i = 0), void 0 === n && (n = 0), void 0 === s && (s = 1), this._type = 4, this._center = new Ss(t1, i, n), this.H = s;
                }
                t1.create = function(i, n, s, r) {
                    return new t1(i, n, s, r);
                }, t1.clone = function(i) {
                    return new t1(i.center.x, i.center.y, i.center.z, i.radius);
                }, t1.copy = function(t1, i) {
                    return Ss.copy(t1.center, i.center), t1.radius = i.radius, t1;
                }, t1.fromPoints = function(t1, i, n) {
                    return Ss.multiplyScalar(t1.center, Ss.add(Ih, i, n), .5), t1.radius = .5 * Ss.subtract(Ih, n, i).length(), t1;
                }, t1.set = function(t1, i, n, s, r) {
                    return t1.center.x = i, t1.center.y = n, t1.center.z = s, t1.radius = r, t1;
                };
                var i = t1.prototype;
                return i.destroy = function() {}, i.clone = function() {
                    return t1.clone(this);
                }, i.copy = function(i) {
                    return t1.copy(this, i);
                }, i.getBoundary = function(t1, i) {
                    Ss.set(t1, this.center.x - this.radius, this.center.y - this.radius, this.center.z - this.radius), Ss.set(i, this.center.x + this.radius, this.center.y + this.radius, this.center.z + this.radius);
                }, i.transform = function(t1, i, n, s, r) {
                    Ss.transformMat4(r.center, this.center, t1), r.radius = this.radius * Nh(s);
                }, i.translateAndRotate = function(t1, i, n) {
                    Ss.transformMat4(n.center, this.center, t1);
                }, i.setScale = function(t1, i) {
                    i.radius = this.radius * Nh(t1);
                }, i.mergePoint = function(t1) {
                    this.radius < 0 && (this.center.set(t1), this.radius = 0), Ss.subtract(Rh, t1, this.center);
                    var i = Rh.length();
                    if (i > this.radius) {
                        var n = .5 * (i - this.radius);
                        this.radius += n, Ss.multiplyScalar(Rh, Rh, n / i), Ss.add(this.center, this.center, Rh);
                    }
                }, i.mergePoints = function(t1) {
                    var i = t1.length;
                    if (!(i < 1)) {
                        this.radius = -1;
                        for(var n = 0; n < i; n++)this.mergePoint(t1[n]);
                    }
                }, i.mergeAABB = function(t1) {
                    t1.getBoundary(Mh, Ch), this.mergePoint(Mh), this.mergePoint(Ch);
                }, s(t1, [
                    {
                        key: "center",
                        get: function get() {
                            return this._center;
                        },
                        set: function set(t1) {
                            this._center = t1;
                        }
                    },
                    {
                        key: "radius",
                        get: function get() {
                            return this.H;
                        },
                        set: function set(t1) {
                            this.H = t1;
                        }
                    },
                    {
                        key: "type",
                        get: function get() {
                            return this._type;
                        }
                    }
                ]), t1;
            }(), Dh = function() {
                function t1() {
                    this._poolHandle = -1, Bh.addContainer(this);
                }
                return t1.prototype.destroy = function() {
                    Bh.removeContainer(this);
                }, t1;
            }(), Bh = new (function() {
                function t1() {
                    this.V = [], this.$ = 0, this.shrinkTimeSpan = 5;
                }
                var i = t1.prototype;
                return i.addContainer = function(t1) {
                    -1 === t1._poolHandle && (t1._poolHandle = this.V.length, this.V.push(t1));
                }, i.removeContainer = function(t1) {
                    -1 !== t1._poolHandle && (this.V[this.V.length - 1]._poolHandle = t1._poolHandle, ri(this.V, t1._poolHandle), t1._poolHandle = -1);
                }, i.tryShrink = function() {
                    for(var _$t = 0; _$t < this.V.length; _$t++)this.V[_$t].tryShrink();
                }, i.update = function(t1) {
                    this.$ += t1, this.$ > this.shrinkTimeSpan && (this.tryShrink(), this.$ -= this.shrinkTimeSpan);
                }, t1;
            }()), Fh = t1("b6", function(t1) {
                function i(i, n, s, r) {
                    var _$h;
                    (_$h = t1.call(this) || this).tt = [], _$h.it = i, _$h.nt = s || null, _$h.st = Math.max(n, 1), _$h.rt = r ? O(r, 1) : _$h.st, _$h.ht = _$h.st - 1;
                    for(var e = 0; e < _$h.st; ++e)_$h.tt.push(i());
                    return _$h;
                }
                h(i, t1);
                var n = i.prototype;
                return n.alloc = function() {
                    if (this.ht < 0) {
                        this.tt.length = this.st;
                        for(var _$t = 0; _$t < this.st; _$t++)this.tt[_$t] = this.it();
                        this.ht = this.st - 1;
                    }
                    return this.tt[this.ht--];
                }, n.free = function(t1) {
                    this.tt[++this.ht] = t1;
                }, n.freeArray = function(t1) {
                    this.tt.length = this.ht + 1, Array.prototype.push.apply(this.tt, t1), this.ht += t1.length;
                }, n.tryShrink = function() {
                    var _$i, _$t = this.ht + 1;
                    if (!(_$t <= this.rt)) {
                        if (_$i = _$t >> 1 >= this.rt ? _$t >> 1 : Math.floor((_$t - this.rt + 1) / 2), this.nt) for(var n = this.ht - _$i + 1; n <= this.ht; ++n)this.nt(this.tt[n]);
                        this.ht -= _$i, this.tt.length = this.ht + 1;
                    }
                }, n.destroy = function() {
                    var _$i = arguments.length > 0 ? arguments[0] : null;
                    _$i && nt(14100);
                    var n = _$i || this.nt;
                    if (n) for(var s = 0; s <= this.ht; s++)n(this.tt[s]);
                    this.tt.length = 0, this.ht = -1, t1.prototype.destroy.call(this);
                }, i;
            }(Dh)), Uh = t1("b7", function(t1) {
                function i(i, n, s) {
                    var _$r;
                    (_$r = t1.call(this) || this).et = 0, _$r.ut = i, _$r.nt = s || null, _$r.L = Array(n), _$r.ot = n;
                    for(var _$h = 0; _$h < n; ++_$h)_$r.L[_$h] = i();
                    return _$r;
                }
                h(i, t1);
                var n = i.prototype;
                return n.reset = function() {
                    this.et = 0;
                }, n.resize = function(t1) {
                    if (t1 > this.L.length) for(var _$i = this.L.length; _$i < t1; ++_$i)this.L[_$i] = this.ut();
                }, n.add = function() {
                    return this.et >= this.L.length && this.resize(this.L.length << 1), this.L[this.et++];
                }, n.destroy = function() {
                    if (this.nt) for(var _$i = 0; _$i < this.L.length; _$i++)this.nt(this.L[_$i]);
                    this.L.length = 0, this.et = 0, t1.prototype.destroy.call(this);
                }, n.tryShrink = function() {
                    if (this.L.length >> 2 > this.et) {
                        var _$t = Math.max(this.ot, this.L.length >> 1);
                        if (this.nt) for(var _$i = _$t; _$i < this.L.length; _$i++)this.nt(this.L[_$i]);
                        this.L.length = _$t;
                    }
                }, n.removeAt = function(t1) {
                    if (!(t1 >= this.et)) {
                        var _$i = this.et - 1, n = this.L[t1];
                        this.L[t1] = this.L[_$i], this.L[_$i] = n, this.et -= 1;
                    }
                }, s(i, [
                    {
                        key: "length",
                        get: function get() {
                            return this.et;
                        }
                    },
                    {
                        key: "data",
                        get: function get() {
                            return this.L;
                        }
                    }
                ]), i;
            }(Dh)), xh = t1("b8", function(t1) {
                function i(i, n) {
                    var s;
                    return (s = t1.call(this) || this).length = 0, s.ot = 0, s.array = Array(i), s.ot = i, s.ft = n, s;
                }
                h(i, t1);
                var n = i.prototype;
                return n.push = function(t1) {
                    this.array[this.length++] = t1;
                }, n.pop = function() {
                    return this.array[--this.length];
                }, n.get = function(t1) {
                    return this.array[t1];
                }, n.clear = function() {
                    this.length = 0;
                }, n.destroy = function() {
                    this.length = 0, this.array.length = 0, t1.prototype.destroy.call(this);
                }, n.tryShrink = function() {
                    this.array.length >> 2 > this.length && (this.array.length = Math.max(this.ot, this.array.length >> 1));
                }, n.sort = function() {
                    this.array.length = this.length, this.array.sort(this.ft);
                }, n.concat = function(t1) {
                    for(var _$i = 0; _$i < t1.length; ++_$i)this.array[this.length++] = t1[_$i];
                }, n.fastRemove = function(t1) {
                    if (!(t1 >= this.length || t1 < 0)) {
                        var _$i = --this.length;
                        this.array[t1] = this.array[_$i];
                    }
                }, n.indexOf = function(t1) {
                    for(var _$i = 0, n = this.length; _$i < n; ++_$i)if (this.array[_$i] === t1) return _$i;
                    return -1;
                }, i;
            }(Dh));
            t1("aj", Object.freeze({
                __proto__: null,
                CachedArray: xh,
                Pool: Fh,
                RecyclePool: Uh
            }));
            var jh = t1("bA", "__editorExtras__"), Gh = t1("bu", {
                Destroyed: 1,
                RealDestroyed: 2,
                ToDestroy: 4,
                DontSave: 8,
                EditorOnly: 16,
                Dirty: 32,
                DontDestroy: 64,
                Destroying: 128,
                Deactivating: 256,
                LockedInEditor: 512,
                HideInHierarchy: 1024,
                IsOnEnableCalled: 2048,
                IsEditorOnEnableCalled: 4096,
                IsPreloadStarted: 8192,
                IsOnLoadCalled: 16384,
                IsOnLoadStarted: 32768,
                IsStartCalled: 65536,
                IsRotationLocked: 131072,
                IsScaleLocked: 262144,
                IsAnchorLocked: 524288,
                IsSizeLocked: 1048576,
                IsPositionLocked: 2097152,
                IsSkipTransformUpdate: 16777216,
                PersistentMask: -4192741,
                AllHideMasks: 1560
            }), Hh = [];
            function Vh(t1, i) {
                var n, s = _instanceof(t1, A.Node) || _instanceof(t1, A.Component), _$r = s ? "_id" : null, h = {};
                for(n in t1)if (t1.hasOwnProperty(n)) {
                    if (n === _$r) continue;
                    switch(_type_of(t1[n])){
                        case "string":
                            h[n] = "";
                            break;
                        case "object":
                        case "function":
                            h[n] = null;
                    }
                }
                if (An._isCCClass(i)) for(var e = A.Class.Attr.getClassAttrs(i), u = i.__props__, o = 0; o < u.length; o++){
                    var f = "" + (n = u[o]);
                    if (f in e) {
                        if (s && "_id" === n) continue;
                        switch(_type_of(e[f])){
                            case "string":
                                h[n] = "";
                                break;
                            case "object":
                            case "function":
                                h[n] = null;
                                break;
                            case "undefined":
                                h[n] = void 0;
                        }
                    }
                }
                var _$c = "";
                for(n in h){
                    var a = An.IDENTIFIER_RE.test(n) ? "o." + n + "=" : "o[" + An.escapeForJS(n) + "]=", v = h[n];
                    "" === v && (v = '""'), _$c += a + v + ";\n";
                }
                return Function("o", _$c);
            }
            var Wh = t1("bt", function() {
                function t1(t1) {
                    void 0 === t1 && (t1 = ""), this._objFlags = 0, this._name = t1;
                }
                t1._deferredDestroy = function() {
                    for(var _$t = Hh.length, i = 0; i < _$t; ++i){
                        var n = Hh[i];
                        1 & n._objFlags || n._destroyImmediate();
                    }
                    _$t === Hh.length ? Hh.length = 0 : Hh.splice(0, _$t);
                };
                var i = t1.prototype;
                return i.destroy = function() {
                    return 1 & this._objFlags ? (nt(5e3), !1) : !(4 & this._objFlags || (this._objFlags |= 4, Hh.push(this), 0));
                }, i._destruct = function() {
                    var _$t, i = this.constructor;
                    Object.prototype.hasOwnProperty.call(i, "__destruct__") ? _$t = i.__destruct__ : (_$t = Vh(this, i), kt(i, "__destruct__", _$t, !0)), _$t(this);
                }, i._destroyImmediate = function() {
                    var _$t;
                    1 & this._objFlags ? rt(5e3) : (null == (_$t = this._onPreDestroy) || _$t.call(this), this._destruct(), this._objFlags |= 1);
                }, s(t1, [
                    {
                        key: "name",
                        get: function get() {
                            return this._name;
                        },
                        set: function set(t1) {
                            this._name = t1;
                        }
                    },
                    {
                        key: "hideFlags",
                        get: function get() {
                            return 1560 & this._objFlags;
                        },
                        set: function set(t1) {
                            this._objFlags = -1561 & this._objFlags | 1560 & t1;
                        }
                    },
                    {
                        key: "isValid",
                        get: function get() {
                            return !(1 & this._objFlags);
                        }
                    }
                ]), t1;
            }());
            Wh.prototype._deserialize = null, An.fastDefine("cc.Object", Wh, {
                _name: "",
                _objFlags: 0
            });
            var zh = {};
            for(var $h in Gh)"string" == typeof $h && "number" == typeof Gh[$h] && (zh[$h] = Gh[$h]);
            function Xh(t1) {
                return _instanceof(t1, Wh);
            }
            function qh(t1, i) {
                return "object" == (void 0 === t1 ? "undefined" : _type_of(t1)) ? !(!t1 || t1._objFlags & (i ? 5 : 1)) : void 0 !== t1;
            }
            kt(Wh, "Flags", zh), A.isValid = qh, A.Object = Wh;
            var Yh = ri;
            function Kh() {}
            var Jh = function() {
                function t1() {
                    this.callback = Kh, this.target = void 0, this.once = !1;
                }
                var i = t1.prototype;
                return i.set = function(t1, i, n) {
                    this.callback = t1 || Kh, this.target = i, this.once = !!n;
                }, i.reset = function() {
                    this.target = void 0, this.callback = Kh, this.once = !1;
                }, i.check = function() {
                    return !(Xh(this.target) && !qh(this.target, !0));
                }, t1;
            }(), Qh = new Fh(function() {
                return new Jh;
            }, 32), Zh = function() {
                function t1() {
                    this.callbackInfos = [], this.isInvoking = !1, this.containCanceled = !1;
                }
                var i = t1.prototype;
                return i.removeByCallback = function(t1) {
                    for(var i = 0; i < this.callbackInfos.length; ++i){
                        var n = this.callbackInfos[i];
                        n && n.callback === t1 && (n.reset(), Qh.free(n), Yh(this.callbackInfos, i), --i);
                    }
                }, i.removeByTarget = function(t1) {
                    for(var i = 0; i < this.callbackInfos.length; ++i){
                        var n = this.callbackInfos[i];
                        n && n.target === t1 && (n.reset(), Qh.free(n), Yh(this.callbackInfos, i), --i);
                    }
                }, i.cancel = function(t1) {
                    var i = this.callbackInfos[t1];
                    i && (i.reset(), this.isInvoking ? this.callbackInfos[t1] = null : Yh(this.callbackInfos, t1), Qh.free(i)), this.containCanceled = !0;
                }, i.cancelAll = function() {
                    for(var _$t = 0; _$t < this.callbackInfos.length; _$t++){
                        var i = this.callbackInfos[_$t];
                        i && (i.reset(), Qh.free(i), this.callbackInfos[_$t] = null);
                    }
                    this.containCanceled = !0;
                }, i.purgeCanceled = function() {
                    for(var _$t = this.callbackInfos.length - 1; _$t >= 0; --_$t)this.callbackInfos[_$t] || Yh(this.callbackInfos, _$t);
                    this.containCanceled = !1;
                }, i.clear = function() {
                    this.cancelAll(), this.callbackInfos.length = 0, this.isInvoking = !1, this.containCanceled = !1;
                }, t1;
            }(), te = new Fh(function() {
                return new Zh;
            }, 16), ie = t1("cE", function() {
                function t1() {
                    this._callbackTable = St(!0), this.ct = void 0;
                }
                var i = t1.prototype;
                return i.on = function(t1, i, n, s) {
                    if (!this.hasEventListener(t1, i, n)) {
                        var _$r = this._callbackTable[t1];
                        _$r || (_$r = this._callbackTable[t1] = te.alloc());
                        var h = Qh.alloc();
                        h.set(i, n, s), _$r.callbackInfos.push(h);
                    }
                    return i;
                }, i.hasEventListener = function(t1, i, n) {
                    var s = this._callbackTable && this._callbackTable[t1];
                    if (!s) return !1;
                    var _$r = s.callbackInfos;
                    if (!i) {
                        if (s.isInvoking) {
                            for(var h = 0; h < _$r.length; ++h)if (_$r[h]) return !0;
                            return !1;
                        }
                        return _$r.length > 0;
                    }
                    for(var e = 0; e < _$r.length; ++e){
                        var u = _$r[e];
                        if (u && u.check() && u.callback === i && u.target === n) return !0;
                    }
                    return !1;
                }, i.removeAll = function(t1) {
                    var i = void 0 === t1 ? "undefined" : _type_of(t1);
                    if ("string" === i || "number" === i) {
                        var n = this._callbackTable && this._callbackTable[t1];
                        n && (n.isInvoking ? n.cancelAll() : (n.clear(), te.free(n), delete this._callbackTable[t1]));
                    } else if (t1) for(var s in this._callbackTable){
                        var _$r = this._callbackTable[s];
                        if (_$r.isInvoking) for(var h = _$r.callbackInfos, e = 0; e < h.length; ++e){
                            var u = h[e];
                            u && u.target === t1 && _$r.cancel(e);
                        }
                        else _$r.removeByTarget(t1);
                    }
                }, i.off = function(t1, i, n) {
                    var s, _$r = this._callbackTable && this._callbackTable[t1];
                    if (_$r) {
                        var h = _$r.callbackInfos;
                        if (i) for(var e = 0; e < h.length; ++e){
                            var u = h[e];
                            if (u && u.callback === i && u.target === n) {
                                _$r.cancel(e);
                                break;
                            }
                        }
                        else this.removeAll(t1);
                    }
                    null == (s = this.ct) || s.call(this);
                }, i.emit = function(t1, i, n, s, r, h) {
                    var e = this._callbackTable && this._callbackTable[t1];
                    if (e) {
                        var u = !e.isInvoking;
                        e.isInvoking = !0;
                        for(var o = e.callbackInfos, f = 0, _$c = o.length; f < _$c; ++f){
                            var a = o[f];
                            if (a) {
                                var v = a.callback, l = a.target;
                                a.once && this.off(t1, v, l), a.check() ? l ? v.call(l, i, n, s, r, h) : v(i, n, s, r, h) : this.off(t1, v, l);
                            }
                        }
                        u && (e.isInvoking = !1, e.containCanceled && e.purgeCanceled());
                    }
                }, i.clear = function() {
                    for(var _$t in this._callbackTable){
                        var i = this._callbackTable[_$t];
                        i && (i.clear(), te.free(i), delete this._callbackTable[_$t]);
                    }
                }, i.vt = function(t1) {
                    this.ct = t1;
                }, t1;
            }());
            function ne(t1) {
                for(var i = function(t1) {
                    function i() {
                        for(var _$i, n = arguments.length, s = Array(n), _$r = 0; _$r < n; _$r++)s[_$r] = arguments[_$r];
                        return (_$i = t1.call.apply(t1, [
                            this
                        ].concat(s)) || this)._callbackTable = St(!0), _$i;
                    }
                    h(i, t1);
                    var n = i.prototype;
                    return n.once = function(t1, i, n) {
                        return this.on(t1, i, n, !0);
                    }, n.targetOff = function(t1) {
                        this.removeAll(t1);
                    }, i;
                }(t1), n = ie.prototype, s = Object.getOwnPropertyNames(n).concat(Object.getOwnPropertySymbols(n)), _$r = 0; _$r < s.length; ++_$r){
                    var e = s[_$r];
                    if (!(e in i.prototype)) {
                        var u = Object.getOwnPropertyDescriptor(n, e);
                        u && Object.defineProperty(i.prototype, e, u);
                    }
                }
                return i;
            }
            var se = t1("bF", ne(function() {}));
            A.EventTarget = se;
            var re, he, ee, ue, oe, fe, ce = t1("bH", function() {
                function t1() {
                    this.lt = [];
                }
                var i = t1.prototype;
                return i.add = function(t1) {
                    this.lt.includes(t1) || this.lt.push(t1);
                }, i.hasListener = function(t1) {
                    return this.lt.includes(t1);
                }, i.remove = function(t1) {
                    ei(this.lt, t1);
                }, i.dispatch = function() {
                    for(var _$t = arguments, i = arguments.length, n = Array(i), s = 0; s < i; s++)n[s] = arguments[s];
                    return Promise.all(this.lt.map(function(i) {
                        return i.apply(void 0, _$t);
                    }).filter(Boolean));
                }, t1;
            }());
            (t12 = re || (re = {})).UNKNOWN = "unknown", t12.WECHAT = "wechat", t12.ANDROID = "androidbrowser", t12.IE = "ie", t12.EDGE = "edge", t12.QQ = "qqbrowser", t12.MOBILE_QQ = "mqqbrowser", t12.UC = "ucbrowser", t12.UCBS = "ucbs", t12.BROWSER_360 = "360browser", t12.BAIDU_APP = "baiduboxapp", t12.BAIDU = "baidubrowser", t12.MAXTHON = "maxthon", t12.OPERA = "opera", t12.OUPENG = "oupeng", t12.MIUI = "miuibrowser", t12.FIREFOX = "firefox", t12.SAFARI = "safari", t12.CHROME = "chrome", t12.LIEBAO = "liebao", t12.QZONE = "qzone", t12.SOUGOU = "sogou", t12.HUAWEI = "huawei", (t13 = he || (he = {})).UNKNOWN = "unknown", t13.ENGLISH = "en", t13.CHINESE = "zh", t13.FRENCH = "fr", t13.ITALIAN = "it", t13.GERMAN = "de", t13.SPANISH = "es", t13.DUTCH = "du", t13.RUSSIAN = "ru", t13.KOREAN = "ko", t13.JAPANESE = "ja", t13.HUNGARIAN = "hu", t13.PORTUGUESE = "pt", t13.ARABIC = "ar", t13.NORWEGIAN = "no", t13.POLISH = "pl", t13.TURKISH = "tr", t13.UKRAINIAN = "uk", t13.ROMANIAN = "ro", t13.BULGARIAN = "bg", t13.HINDI = "hi", (t14 = ee || (ee = {}))[t14.NONE = 0] = "NONE", t14[t14.LAN = 1] = "LAN", t14[t14.WWAN = 2] = "WWAN", (t15 = ue || (ue = {})).UNKNOWN = "Unknown", t15.IOS = "iOS", t15.ANDROID = "Android", t15.WINDOWS = "Windows", t15.LINUX = "Linux", t15.OSX = "OS X", t15.OHOS = "OHOS", t15.OPENHARMONY = "OpenHarmony", (t16 = oe || (oe = {})).UNKNOWN = "UNKNOWN", t16.EDITOR_PAGE = "EDITOR_PAGE", t16.EDITOR_CORE = "EDITOR_CORE", t16.MOBILE_BROWSER = "MOBILE_BROWSER", t16.DESKTOP_BROWSER = "DESKTOP_BROWSER", t16.WIN32 = "WIN32", t16.ANDROID = "ANDROID", t16.IOS = "IOS", t16.MACOS = "MACOS", t16.OHOS = "OHOS", t16.OPENHARMONY = "OPENHARMONY", t16.WECHAT_GAME = "WECHAT_GAME", t16.WECHAT_MINI_PROGRAM = "WECHAT_MINI_PROGRAM", t16.XIAOMI_QUICK_GAME = "XIAOMI_QUICK_GAME", t16.ALIPAY_MINI_GAME = "ALIPAY_MINI_GAME", t16.TAOBAO_CREATIVE_APP = "TAOBAO_CREATIVE_APP", t16.TAOBAO_MINI_GAME = "TAOBAO_MINI_GAME", t16.BYTEDANCE_MINI_GAME = "BYTEDANCE_MINI_GAME", t16.OPPO_MINI_GAME = "OPPO_MINI_GAME", t16.VIVO_MINI_GAME = "VIVO_MINI_GAME", t16.HUAWEI_QUICK_GAME = "HUAWEI_QUICK_GAME", t16.MIGU_MINI_GAME = "MIGU_MINI_GAME", t16.HONOR_MINI_GAME = "HONOR_MINI_GAME", (t17 = fe || (fe = {})).WEBP = "WEBP", t17.IMAGE_BITMAP = "IMAGE_BITMAP", t17.WEB_VIEW = "WEB_VIEW", t17.VIDEO_PLAYER = "VIDEO_PLAYER", t17.SAFE_AREA = "SAFE_AREA", t17.HPE = "HPE", t17.INPUT_TOUCH = "INPUT_TOUCH", t17.EVENT_KEYBOARD = "EVENT_KEYBOARD", t17.EVENT_MOUSE = "EVENT_MOUSE", t17.EVENT_TOUCH = "EVENT_TOUCH", t17.EVENT_ACCELEROMETER = "EVENT_ACCELEROMETER", t17.EVENT_GAMEPAD = "EVENT_GAMEPAD", t17.EVENT_HANDLE = "EVENT_HANDLE", t17.EVENT_HMD = "EVENT_HMD", t17.EVENT_HANDHELD = "EVENT_HANDHELD", t17.WASM = "WASM";
            var t12, t13, t14, t15, t16, t17, ae, le = new (function(t1) {
                function i() {
                    (n = t1.call(this) || this).wt = null, n.gt = [];
                    var _$i, n, s, _$r = window.navigator, _$h = _$r.userAgent.toLowerCase();
                    null == _$r.getBattery || _$r.getBattery().then(function(t1) {
                        n.wt = t1;
                    }), n.networkType = ee.LAN, n.isNative = !1, n.isBrowser = !0, n.isMobile = /mobile|android|iphone|ipad/.test(_$h), n.platform = n.isMobile ? oe.MOBILE_BROWSER : oe.DESKTOP_BROWSER, new DataView(s = new ArrayBuffer(2)).setInt16(0, 256, !0), n.isLittleEndian = 256 === new Int16Array(s)[0];
                    var e = _$r.language;
                    n.nativeLanguage = e.toLowerCase(), n.language = e = (e = e || _$r.browserLanguage) ? e.split("-")[0] : he.ENGLISH;
                    var u = !1, o = !1, f = "", _$c = 0, a = /android\s*(\d+(?:\.\d+)*)/i.exec(_$h) || /android\s*(\d+(?:\.\d+)*)/i.exec(_$r.platform);
                    a && (u = !0, _$c = parseInt(f = a[1] || "") || 0), (a = /(iPad|iPhone|iPod).*OS ((\d+_?){2,3})/i.exec(_$h)) ? (o = !0, _$c = parseInt(f = a[2] || "") || 0) : (/(iPhone|iPad|iPod)/.exec(_$r.platform) || "MacIntel" === _$r.platform && _$r.maxTouchPoints && _$r.maxTouchPoints > 1) && (o = !0, f = "", _$c = 0);
                    var v = ue.UNKNOWN;
                    -1 !== _$r.appVersion.indexOf("Win") ? v = ue.WINDOWS : o ? v = ue.IOS : -1 !== _$r.appVersion.indexOf("Mac") ? v = ue.OSX : -1 !== _$r.appVersion.indexOf("X11") && -1 === _$r.appVersion.indexOf("Linux") ? v = ue.LINUX : u ? v = ue.ANDROID : -1 === _$r.appVersion.indexOf("Linux") && -1 === _$h.indexOf("ubuntu") || (v = ue.LINUX), n.os = v, n.osVersion = f, n.osMainVersion = _$c, n.browserType = re.UNKNOWN;
                    var l = /wechat|weixin|micromessenger/i.exec(_$h) || /mqqbrowser|micromessenger|qqbrowser|sogou|qzone|liebao|maxthon|ucbs|360 aphone|360browser|baiduboxapp|baidubrowser|maxthon|mxbrowser|miuibrowser/i.exec(_$h) || /qq|qqbrowser|ucbrowser|ubrowser|edge|HuaweiBrowser/i.exec(_$h) || /chrome|safari|firefox|trident|opera|opr\/|oupeng/i.exec(_$h), _$d = l ? l[0].toLowerCase() : ue.UNKNOWN;
                    ("safari" === _$d && u || "qq" === _$d && /android.*applewebkit/i.test(_$h)) && (_$d = re.ANDROID), n.browserType = ({
                        micromessenger: re.WECHAT,
                        wechat: re.WECHAT,
                        weixin: re.WECHAT,
                        trident: re.IE,
                        edge: re.EDGE,
                        "360 aphone": re.BROWSER_360,
                        mxbrowser: re.MAXTHON,
                        "opr/": re.OPERA,
                        ubrowser: re.UC,
                        huaweibrowser: re.HUAWEI
                    })[_$d] || _$d, n.browserVersion = "";
                    var g = /(mqqbrowser|micromessenger|qqbrowser|sogou|qzone|liebao|maxthon|uc|ucbs|360 aphone|360|baiduboxapp|baidu|maxthon|mxbrowser|miui(?:.hybrid)?)(mobile)?(browser)?\/?([\d.]+)/i.exec(_$h);
                    g || (g = /(qq|chrome|safari|firefox|trident|opera|opr\/|oupeng)(mobile)?(browser)?\/?([\d.]+)/i.exec(_$h)), n.browserVersion = g ? g[4] : "", n.isXR = !1;
                    var p, _$y = document.createElement("canvas");
                    _$y.getContext("2d");
                    try {
                        p = _$y.toDataURL("image/webp").startsWith("data:image/webp");
                    } catch (t1) {
                        p = !1;
                    }
                    if (n.os === ue.IOS) {
                        var _$_, k = null == (_$_ = / applewebkit\/(\d+)/.exec(_$h)) ? void 0 : _$_[1];
                        "string" == typeof k && Number.parseInt(k) >= 604 && (p = !0);
                    } else if (n.browserType === re.SAFARI) {
                        var A, E = null == (A = / version\/(\d+)/.exec(_$h)) ? void 0 : A[1];
                        "string" == typeof E && Number.parseInt(E) >= 14 && (p = !0);
                    }
                    var T = void 0 !== document.documentElement.ontouchstart || void 0 !== document.ontouchstart, S = void 0 !== document.documentElement.onmouseup, _$O = void 0 !== navigator.xr, _$I = function() {
                        if ((n.os === ue.IOS || n.os === ue.OSX) && /(OS 15_4)|(Version\/15.4)/.test(window.navigator.userAgent)) return !1;
                        try {
                            if ("object" == ("u" < typeof WebAssembly ? "undefined" : _type_of(WebAssembly)) && "function" == typeof WebAssembly.instantiate) {
                                var _$t = new WebAssembly.Module(new Uint8Array([
                                    0,
                                    97,
                                    115,
                                    109,
                                    1,
                                    0,
                                    0,
                                    0
                                ]));
                                if (_instanceof(_$t, WebAssembly.Module)) return _instanceof(new WebAssembly.Instance(_$t), WebAssembly.Instance);
                            }
                        } catch (t1) {}
                        return !1;
                    }();
                    return (_$i = {})[fe.WEBP] = p, _$i[fe.IMAGE_BITMAP] = !1, _$i[fe.WEB_VIEW] = !0, _$i[fe.VIDEO_PLAYER] = !0, _$i[fe.SAFE_AREA] = !1, _$i[fe.HPE] = !1, _$i[fe.INPUT_TOUCH] = T, _$i[fe.EVENT_KEYBOARD] = void 0 !== document.documentElement.onkeyup, _$i[fe.EVENT_MOUSE] = S, _$i[fe.EVENT_TOUCH] = T || S, _$i[fe.EVENT_ACCELEROMETER] = void 0 !== window.DeviceMotionEvent || void 0 !== window.DeviceOrientationEvent, _$i[fe.EVENT_GAMEPAD] = void 0 !== navigator.getGamepads || void 0 !== navigator.webkitGetGamepads || _$O, _$i[fe.EVENT_HANDLE] = !1, _$i[fe.EVENT_HMD] = _$O, _$i[fe.EVENT_HANDHELD] = _$O, _$i[fe.WASM] = _$I, n.yt = _$i, n.gt.push(n._t()), n.bt(), n;
                }
                h(i, t1);
                var n = i.prototype;
                return n._t = function() {
                    var _$t = this;
                    if ("u" > typeof createImageBitmap && "u" > typeof Blob) {
                        var _$i = document.createElement("canvas");
                        _$i.width = _$i.height = 2;
                        var n = createImageBitmap(_$i);
                        if (_instanceof(n, Promise)) return n.then(function(i) {
                            i && i.close && (_$t.kt(fe.IMAGE_BITMAP, !0), i.close());
                        });
                    }
                    return Promise.resolve();
                }, n.bt = function() {
                    var _$t, _$i = this;
                    _$t = void 0 !== document.hidden ? "hidden" : void 0 !== document.mozHidden ? "mozHidden" : void 0 !== document.msHidden ? "msHidden" : void 0 !== document.webkitHidden ? "webkitHidden" : "hidden";
                    var n = !1, s = function s() {
                        n || (n = !0, _$i.emit("hide"));
                    }, _$r = function r(t1, s, r, h, e) {
                        n && (n = !1, _$i.emit("show", t1, s, r, h, e));
                    };
                    if (_$t) for(var _$h = [
                        "visibilitychange",
                        "mozvisibilitychange",
                        "msvisibilitychange",
                        "webkitvisibilitychange",
                        "qbrowserVisibilityChange"
                    ], e = 0; e < _$h.length; e++)document.addEventListener(_$h[e], function(i) {
                        var n = document[_$t];
                        (n = n || i.hidden) ? s() : _$r();
                    });
                    else window.addEventListener("blur", s), window.addEventListener("focus", _$r);
                    window.navigator.userAgent.indexOf("MicroMessenger") > -1 && (window.onfocus = _$r), "onpageshow" in window && "onpagehide" in window && (window.addEventListener("pagehide", s), window.addEventListener("pageshow", _$r), document.addEventListener("pagehide", s), document.addEventListener("pageshow", _$r));
                }, n.kt = function(t1, i) {
                    return this.yt[t1] = i;
                }, n.init = function() {
                    return Promise.all(this.gt);
                }, n.hasFeature = function(t1) {
                    return this.yt[t1];
                }, n.getBatteryLevel = function() {
                    return this.wt ? this.wt.level : 1;
                }, n.triggerGC = function() {}, n.openURL = function(t1) {
                    window.open(t1);
                }, n.now = function() {
                    return Date.now ? Date.now() : +new Date;
                }, n.restartJSVM = function() {}, n.exit = function() {
                    window.close();
                }, n.close = function() {
                    this.emit("close");
                }, i;
            }(se)), de = {
                auto: Ai.AUTO,
                landscape: Ai.LANDSCAPE,
                portrait: Ai.PORTRAIT
            };
            (t18 = ae || (ae = {}))[t18.Unknown = 0] = "Unknown", t18[t18.SubFrame = 1] = "SubFrame", t18[t18.BrowserWindow = 2] = "BrowserWindow", t18[t18.Fullscreen = 3] = "Fullscreen";
            var ge = new (function(t1) {
                h(n, t1);
                var i = n.prototype;
                function n() {
                    var i, _$n, _$s, _$r, _$h, e;
                    (i = t1.call(this) || this).isFrameRotated = !1, i.handleResizeEvent = !0, i.At = void 0, i.Et = void 0, i.Tt = void 0, i.St = !1, i.Ot = {
                        width: "0px",
                        height: "0px"
                    }, i.It = {
                        width: "0px",
                        height: "0px"
                    }, i.Rt = void 0, i.Mt = !1, i.Ct = void 0, i.Nt = void 0, i.Pt = void 0, i.Dt = -1, i.Lt = new Zr(0, 0), i.Bt = !1, i.Ft = !1, i.ut = {}, i.Ut = [
                        [
                            "requestFullscreen",
                            "exitFullscreen",
                            "fullscreenchange",
                            "fullscreenEnabled",
                            "fullscreenElement",
                            "fullscreenerror"
                        ],
                        [
                            "requestFullScreen",
                            "exitFullScreen",
                            "fullScreenchange",
                            "fullScreenEnabled",
                            "fullScreenElement",
                            "fullscreenerror"
                        ],
                        [
                            "webkitRequestFullScreen",
                            "webkitCancelFullScreen",
                            "webkitfullscreenchange",
                            "webkitIsFullScreen",
                            "webkitCurrentFullScreenElement",
                            "webkitfullscreenerror"
                        ],
                        [
                            "mozRequestFullScreen",
                            "mozCancelFullScreen",
                            "mozfullscreenchange",
                            "mozFullScreen",
                            "mozFullScreenElement",
                            "mozfullscreenerror"
                        ],
                        [
                            "msRequestFullscreen",
                            "msExitFullscreen",
                            "MSFullscreenChange",
                            "msFullscreenEnabled",
                            "msFullscreenElement",
                            "msfullscreenerror"
                        ]
                    ], i.xt = 1, i.jt = Ai.AUTO, i.Gt = Ai.AUTO, i.At = document.getElementById("GameDiv"), i.Et = document.getElementById("Cocos3dGameContainer"), i.Tt = document.getElementById("GameCanvas"), i.At || (i.At = document.createElement("div"), i.At.setAttribute("id", "GameDiv"), null == (_$n = i.Tt) || null == (_$s = _$n.parentNode) || _$s.insertBefore(i.At, i.Tt), i.At.appendChild(i.Tt)), i.Et || (i.Et = document.createElement("div"), i.Et.setAttribute("id", "Cocos3dGameContainer"), null == (_$r = i.Tt) || null == (_$h = _$r.parentNode) || _$h.insertBefore(i.Et, i.Tt), i.Et.appendChild(i.Tt));
                    for(var u = i.Ut, o = 0; o < u.length; o++)if (void 0 !== document[(e = u[o])[1]]) {
                        for(var f = 0; f < e.length; f++)i.ut[u[0][f]] = e[f];
                        break;
                    }
                    return i.Mt = void 0 !== i.ut.requestFullscreen, i.Ct = "ontouchstart" in window ? "touchend" : "mousedown", i.bt(), i;
                }
                return i.Ht = function() {
                    this.Vt(), this.Wt();
                }, i.init = function(t1, i) {
                    this.Rt = i, this.orientation = de[t1.configOrientation], this.Bt = t1.exactFitScreen, this.Ft = t1.isHeadlessMode, this.Wt();
                }, i.requestFullScreen = function() {
                    var _$t = this;
                    return new Promise(function(i, n) {
                        _$t.isFullScreen ? i() : (_$t.Lt = _$t.windowSize, _$t.zt().then(function() {
                            i();
                        }).catch(function() {
                            var _$s = _$t.$t();
                            _$s ? _$s.addEventListener(_$t.Ct, function() {
                                _$t.zt().then(function() {
                                    i();
                                }).catch(n);
                            }, {
                                once: !0,
                                capture: !0
                            }) : n(Error("Cannot access fullscreen target"));
                        }));
                    });
                }, i.exitFullScreen = function() {
                    var _$t = this;
                    return new Promise(function(i, n) {
                        var _$s = document[_$t.ut.exitFullscreen]();
                        window.Promise && _instanceof(_$s, Promise) ? _$s.then(function() {
                            _$t.windowSize = _$t.Lt, i();
                        }).catch(n) : (_$t.windowSize = _$t.Lt, i());
                    });
                }, i.bt = function() {
                    var _$t = this;
                    document.addEventListener(this.ut.fullscreenerror, function() {
                        null == _$t.Pt || _$t.Pt();
                    }), window.addEventListener("resize", function() {
                        _$t.Ht();
                    });
                    var i, _$n = function n(i) {
                        i !== _$t.Gt && (_$t.Gt = i, _$t.Ht(), _$t.emit("orientation-change", i));
                    }, _$s = function s() {
                        var i = Ai.PORTRAIT;
                        switch(window.orientation){
                            case 0:
                                i = Ai.PORTRAIT;
                                break;
                            case 90:
                                i = Ai.LANDSCAPE_RIGHT;
                                break;
                            case -90:
                                i = Ai.LANDSCAPE_LEFT;
                                break;
                            case 180:
                                i = Ai.PORTRAIT_UPSIDE_DOWN;
                                break;
                            default:
                                i = _$t.Gt;
                        }
                        return i;
                    }, _$r = function r() {
                        -1 !== _$t.Dt && clearTimeout(_$t.Dt), _$t.Dt = setTimeout(function() {
                            i();
                        }, 200);
                    };
                    if ("function" == typeof window.matchMedia) {
                        !function i() {
                            var _$n = window.devicePixelRatio, _$s = window.matchMedia("(resolution: " + _$n + "dppx)");
                            _$s.addEventListener ? _$s.addEventListener("change", function() {
                                _$t.emit("window-resize", _$t.windowSize.width, _$t.windowSize.height), i();
                            }, {
                                once: !0
                            }) : _$s.addListener && _$s.addListener(function() {
                                _$t.emit("window-resize", _$t.windowSize.width, _$t.windowSize.height);
                            });
                        }();
                        var _$h = window.matchMedia("(orientation: portrait)"), e = window.matchMedia("(orientation: landscape)"), u = screen.orientation;
                        i = function i() {
                            var i = _$t.Gt;
                            _$h.matches ? (i = Ai.PORTRAIT, u && (i = "portrait-primary" === screen.orientation.type ? Ai.PORTRAIT : Ai.PORTRAIT_UPSIDE_DOWN)) : e.matches && (i = Ai.LANDSCAPE, u && (i = "landscape-primary" === screen.orientation.type ? Ai.LANDSCAPE_LEFT : Ai.LANDSCAPE_RIGHT)), _$n(i);
                        }, _$h.addEventListener ? (_$h.addEventListener("change", _$r), e.addEventListener("change", _$r)) : _$h.addListener && (_$h.addListener(_$r), e.addListener(_$r));
                    } else i = function i() {
                        _$n(_$s());
                    }, window.addEventListener("orientationchange", _$r);
                    document.addEventListener(this.ut.fullscreenchange, function() {
                        null == _$t.Nt || _$t.Nt(), _$t.emit("fullscreen-change", _$t.windowSize.width, _$t.windowSize.height);
                    });
                }, i.Xt = function(t1) {
                    var i = t1.clone(), _$n = this.devicePixelRatio;
                    return i.width /= _$n, i.height /= _$n, i;
                }, i.Wt = function(t1) {
                    if (this.At) {
                        if (this.At.style.display = "flex", this.At.style["justify-content"] = "center", this.At.style["align-items"] = "center", this._windowType === ae.SubFrame) {
                            if (!t1) return void this.qt();
                            this.At.style.width = t1.width + "px", this.At.style.height = t1.height + "px";
                        } else {
                            var i = window.innerWidth, _$n = window.innerHeight, _$s = document.body.scrollHeight - _$n;
                            le.os === ue.ANDROID && _$n < _$s && (_$n += _$s), this.isFrameRotated ? (this.At.style["-webkit-transform"] = "rotate(90deg)", this.At.style.transform = "rotate(90deg)", this.At.style["-webkit-transform-origin"] = "0px 0px 0px", this.At.style.transformOrigin = "0px 0px 0px", this.At.style.margin = "0 0 0 " + i + "px", this.At.style.width = _$n + "px", this.At.style.height = i + "px") : (this.At.style["-webkit-transform"] = "rotate(0deg)", this.At.style.transform = "rotate(0deg)", this.At.style.margin = "0px auto", this.At.style.width = i + "px", this.At.style.height = _$n + "px");
                        }
                        this.qt();
                    }
                }, i.$t = function() {
                    var _$t = this._windowType;
                    return _$t === ae.Fullscreen ? document[this.ut.fullscreenElement] : _$t === ae.SubFrame ? this.At : document.body;
                }, i.zt = function() {
                    var _$t = this;
                    return new Promise(function(i, n) {
                        if (_$t.Mt) {
                            var _$s = _$t.$t();
                            if (_$s) {
                                _$t.Nt = void 0, _$t.Pt = void 0;
                                var _$r = _$s[_$t.ut.requestFullscreen]();
                                window.Promise && _instanceof(_$r, Promise) ? _$r.then(i).catch(n) : (_$t.Nt = i, _$t.Pt = n);
                            } else n(Error("Cannot access fullscreen target"));
                        } else n(Error("fullscreen is not supported"));
                    });
                }, i.Vt = function() {
                    var _$t = this.orientation, i = window.innerWidth > window.innerHeight;
                    this.isFrameRotated = le.isMobile && (i && _$t === Ai.PORTRAIT || !i && _$t === Ai.LANDSCAPE);
                }, i.qt = function() {
                    if (this.Et) {
                        if (this.isProportionalToFrame) {
                            if (!this.At) return void nt(9201);
                            var _$t, i, _$n = A.view.getDesignResolutionSize(), _$s = this.At, _$r = _$s.clientWidth, _$h = _$s.clientHeight, e = _$n.width, u = _$n.height, o = _$r / e, f = _$h / u, _$c = this.Et.style;
                            o < f ? (_$t = _$r, i = u * o) : (_$t = e * f, i = _$h), _$c.width = _$t + "px", _$c.height = i + "px";
                        } else {
                            var a = this.Et.style;
                            a.width = "100%", a.height = "100%";
                        }
                        this.At && (this.Ot.width !== this.At.style.width || this.Ot.height !== this.At.style.height || this.It.width !== this.Et.style.width || this.It.height !== this.Et.style.height) && (this.emit("window-resize", this.windowSize.width, this.windowSize.height), this.Ot.width = this.At.style.width, this.Ot.height = this.At.style.height, this.It.width = this.Et.style.width, this.It.height = this.Et.style.height);
                    } else nt(9201);
                }, s(n, [
                    {
                        key: "supportFullScreen",
                        get: function get() {
                            return this.Mt;
                        }
                    },
                    {
                        key: "isFullScreen",
                        get: function get() {
                            return !!this.Mt && !!document[this.ut.fullscreenElement];
                        }
                    },
                    {
                        key: "devicePixelRatio",
                        get: function get() {
                            var _$t;
                            return Math.min(null != (_$t = window.devicePixelRatio) ? _$t : 1, 2);
                        }
                    },
                    {
                        key: "windowSize",
                        get: function get() {
                            var _$t = this._windowSizeInCssPixels, i = this.devicePixelRatio;
                            return _$t.width *= i, _$t.height *= i, _$t;
                        },
                        set: function set(t1) {
                            this._windowType === ae.SubFrame ? this.Wt(this.Xt(t1)) : nt(9202);
                        }
                    },
                    {
                        key: "resolution",
                        get: function get() {
                            var _$t = this.windowSize, i = this.resolutionScale;
                            return new Zr(_$t.width * i, _$t.height * i);
                        }
                    },
                    {
                        key: "resolutionScale",
                        get: function get() {
                            return this.xt;
                        },
                        set: function set(t1) {
                            var i;
                            t1 !== this.xt && (this.xt = t1, null == (i = this.Rt) || i.call(this));
                        }
                    },
                    {
                        key: "orientation",
                        get: function get() {
                            return this.jt;
                        },
                        set: function set(t1) {
                            this.jt !== t1 && (this.jt = t1, this.Ht());
                        }
                    },
                    {
                        key: "safeAreaEdge",
                        get: function get() {
                            var _$t = this.devicePixelRatio;
                            return {
                                top: parseInt(getComputedStyle(document.documentElement).getPropertyValue("--safe-top") || "0") * _$t,
                                bottom: parseInt(getComputedStyle(document.documentElement).getPropertyValue("--safe-bottom") || "0") * _$t,
                                left: parseInt(getComputedStyle(document.documentElement).getPropertyValue("--safe-left") || "0") * _$t,
                                right: parseInt(getComputedStyle(document.documentElement).getPropertyValue("--safe-right") || "0") * _$t
                            };
                        }
                    },
                    {
                        key: "isProportionalToFrame",
                        get: function get() {
                            return this.St;
                        },
                        set: function set(t1) {
                            this.St !== t1 && (this.St = t1, this.qt());
                        }
                    },
                    {
                        key: "_windowSizeInCssPixels",
                        get: function get() {
                            var _$t, i;
                            if (this.isProportionalToFrame) return this.Et ? new Zr(this.Et.clientWidth, this.Et.clientHeight) : (nt(9201), new Zr(0, 0));
                            switch(this._windowType){
                                case ae.SubFrame:
                                    return this.At ? new Zr(this.At.clientWidth, this.At.clientHeight) : (nt(9201), new Zr(0, 0));
                                case ae.Fullscreen:
                                    return _$t = this.$t(), new Zr(i = this.isFrameRotated ? _$t.clientHeight : _$t.clientWidth, this.isFrameRotated ? _$t.clientWidth : _$t.clientHeight);
                                case ae.BrowserWindow:
                                    return new Zr(i = this.isFrameRotated ? window.innerHeight : window.innerWidth, this.isFrameRotated ? window.innerWidth : window.innerHeight);
                                case ae.Unknown:
                                default:
                                    return new Zr(1, 1);
                            }
                        }
                    },
                    {
                        key: "_windowType",
                        get: function get() {
                            return this.Ft ? ae.Unknown : this.isFullScreen ? ae.Fullscreen : this.At ? this.Bt ? ae.BrowserWindow : ae.SubFrame : (nt(9201), ae.Unknown);
                        }
                    }
                ]), n;
            }(se)), ye = t1("bW", new (function() {
                function t1() {}
                var i = t1.prototype;
                return i.init = function() {
                    var _$t, i, n = null == (_$t = Ei.querySettings("screen", "exactFitScreen")) || _$t, _$s = null != (i = Ei.querySettings("screen", "orientation")) ? i : "auto", _$r = 3 === Ei.querySettings("rendering", "renderMode");
                    ge.init({
                        exactFitScreen: n,
                        configOrientation: _$s,
                        isHeadlessMode: _$r
                    }, function() {
                        var _$t, i = A.director;
                        null != (_$t = i.root) && _$t.pipeline ? i.root.pipeline.shadingScale = ge.resolutionScale : nt(1220);
                    });
                }, i.fullScreen = function() {
                    return ge.isFullScreen;
                }, i.requestFullScreen = function(t1, i, n) {
                    return arguments.length > 0 && nt(1400, "screen.requestFullScreen(element, onFullScreenChange?, onFullScreenError?)", "screen.requestFullScreen(): Promise"), ge.requestFullScreen().then(function() {
                        null == i || i.call(document);
                    }).catch(function(t1) {
                        z(t1), null == n || n.call(document);
                    });
                }, i.exitFullScreen = function() {
                    return ge.exitFullScreen();
                }, i.autoFullScreen = function(t1, i) {
                    var n;
                    null == (n = this.requestFullScreen(t1, i)) || n.catch(function(t1) {
                        W(t1);
                    });
                }, i.disableAutoFullScreen = function() {}, i.on = function(t1, i, n) {
                    ge.on(t1, i, n);
                }, i.once = function(t1, i, n) {
                    ge.once(t1, i, n);
                }, i.off = function(t1, i, n) {
                    ge.off(t1, i, n);
                }, s(t1, [
                    {
                        key: "devicePixelRatio",
                        get: function get() {
                            return ge.devicePixelRatio;
                        }
                    },
                    {
                        key: "windowSize",
                        get: function get() {
                            return ge.windowSize;
                        },
                        set: function set(t1) {
                            ge.windowSize = t1;
                        }
                    },
                    {
                        key: "resolution",
                        get: function get() {
                            return ge.resolution;
                        }
                    },
                    {
                        key: "supportsFullScreen",
                        get: function get() {
                            return ge.supportFullScreen;
                        }
                    }
                ]), t1;
            }()));
            A.screen = ye;
            var _e = t1("bX", {
                Feature: fe,
                hasFeature: function hasFeature(t1) {
                    return le.hasFeature(t1);
                },
                NetworkType: ee,
                Language: he,
                OS: ue,
                Platform: oe,
                BrowserType: re,
                isNative: le.isNative,
                isBrowser: le.isBrowser,
                isMobile: le.isMobile,
                isLittleEndian: le.isLittleEndian,
                platform: le.platform,
                language: le.language,
                languageCode: le.nativeLanguage,
                os: le.os,
                osVersion: le.osVersion,
                osMainVersion: le.osMainVersion,
                browserType: le.browserType,
                browserVersion: le.browserVersion,
                isXR: le.isXR,
                windowPixelResolution: ye.windowSize,
                capabilities: {
                    canvas: !0,
                    opengl: !0,
                    webp: le.hasFeature(fe.WEBP),
                    imageBitmap: le.hasFeature(fe.IMAGE_BITMAP),
                    touches: le.hasFeature(fe.INPUT_TOUCH),
                    mouse: le.hasFeature(fe.EVENT_MOUSE),
                    keyboard: le.hasFeature(fe.EVENT_KEYBOARD),
                    accelerometer: le.hasFeature(fe.EVENT_ACCELEROMETER)
                },
                localStorage: {},
                getNetworkType: function getNetworkType() {
                    return le.networkType;
                },
                getBatteryLevel: function getBatteryLevel() {
                    return le.getBatteryLevel();
                },
                garbageCollect: function garbageCollect() {
                    le.triggerGC();
                },
                isObjectValid: function isObjectValid(t1) {
                    return null != t1;
                },
                Yt: !1,
                dump: function dump() {
                    var _$t = "";
                    V(_$t += "isMobile : " + this.isMobile + "\r\n" + ("language : " + this.language) + "\r\n" + ("browserType : " + this.browserType) + "\r\n" + ("browserVersion : " + this.browserVersion) + "\r\n" + ("supports webp: " + _e.hasFeature(fe.WEBP)) + "\r\n" + ("supports bitmap: " + _e.hasFeature(fe.IMAGE_BITMAP)) + "\r\n" + ("supports touches: " + _e.hasFeature(fe.INPUT_TOUCH)) + "\r\n" + ("supports mouse: " + _e.hasFeature(fe.EVENT_MOUSE)) + "\r\n" + ("supports keyboard: " + _e.hasFeature(fe.EVENT_KEYBOARD)) + "\r\n" + ("supports accelerometer: " + _e.hasFeature(fe.EVENT_ACCELEROMETER)) + "\r\n" + ("os : " + this.os) + "\r\n" + ("osVersion : " + this.osVersion) + "\r\n" + ("platform : " + this.platform) + "\r\n" + ("Using " + (A.game.renderType === A.game.RENDER_TYPE_WEBGL ? "WEBGL" : "CANVAS")) + " renderer.\r\n");
                },
                openURL: function openURL(t1) {
                    le.openURL(t1);
                },
                init: function init() {
                    var _$t = this;
                    return Promise.resolve().then(function() {
                        return le.init();
                    }).then(function() {
                        try {
                            var i = _e.localStorage = window.localStorage;
                            i.setItem("storage", ""), i.removeItem("storage"), i = null;
                        } catch (i) {
                            var n = function n() {
                                nt(5200);
                            };
                            _$t.localStorage = {
                                getItem: n,
                                setItem: n,
                                clear: n,
                                removeItem: n,
                                key: n,
                                length: 0
                            };
                        }
                        _$t.Yt = (_e.os === ue.IOS || _e.os === ue.OSX) && le.isBrowser && /(OS 14)|(Version\/14)/.test(window.navigator.userAgent);
                    });
                },
                now: function now() {
                    return le.now();
                },
                restartVM: function restartVM() {
                    le.restartJSVM();
                },
                getSafeAreaRect: function getSafeAreaRect(t1) {
                    void 0 === t1 && (t1 = !0);
                    var i = A.view, n = ge.safeAreaEdge;
                    t1 && (ge.orientation === Ti.ORIENTATION_PORTRAIT ? n.top < n.bottom ? n.top = n.bottom : n.bottom = n.top : n.left < n.right ? n.left = n.right : n.right = n.left);
                    var s = ge.windowSize, _$r = new Or(n.left, n.bottom), h = new Or(s.width - n.right, s.height - n.top);
                    return i.Kt(_$r), i.Kt(h), new sh(_$r.x, _$r.y, h.x - _$r.x, h.y - _$r.y);
                }
            });
            A.sys = _e;
            var me = t1("bZ", {
                topLeft: A.v2(0, 0),
                topRight: A.v2(0, 0),
                top: A.v2(0, 0),
                bottomLeft: A.v2(0, 0),
                bottomRight: A.v2(0, 0),
                bottom: A.v2(0, 0),
                center: A.v2(0, 0),
                left: A.v2(0, 0),
                right: A.v2(0, 0),
                width: 0,
                height: 0,
                init: function init(t1) {
                    var i = this.width = t1.width, n = this.height = t1.height, s = t1.x, _$r = t1.y, h = _$r + n, e = s + i;
                    this.topLeft.x = s, this.topLeft.y = h, this.topRight.x = e, this.topRight.y = h, this.top.x = s + i / 2, this.top.y = h, this.bottomLeft.x = s, this.bottomLeft.y = _$r, this.bottomRight.x = e, this.bottomRight.y = _$r, this.bottom.x = s + i / 2, this.bottom.y = _$r, this.center.x = s + i / 2, this.center.y = _$r + n / 2, this.left.x = s, this.left.y = _$r + n / 2, this.right.x = e, this.right.y = _$r + n / 2;
                }
            });
            A.visibleRect = me;
            var be = new Ss, ke = new Ss, Ae = new Ss, Ee = new Ss, Te = new Ps, Se = Math.abs, Oe = function Oe(t1, i, n) {
                Te.m00 = Se(n.m00), Te.m01 = Se(n.m01), Te.m02 = Se(n.m02), Te.m03 = Se(n.m04), Te.m04 = Se(n.m05), Te.m05 = Se(n.m06), Te.m06 = Se(n.m08), Te.m07 = Se(n.m09), Te.m08 = Se(n.m10), Ss.transformMat3(t1, i, Te);
            }, Ie = function() {
                function t1(t1, i, n, s, r, h) {
                    void 0 === t1 && (t1 = 0), void 0 === i && (i = 0), void 0 === n && (n = 0), void 0 === s && (s = 1), void 0 === r && (r = 1), void 0 === h && (h = 1), this.center = void 0, this.halfExtents = void 0, this._type = void 0, this._type = 8, this.center = new Ss(t1, i, n), this.halfExtents = new Ss(s, r, h);
                }
                t1.create = function(i, n, s, r, h, e) {
                    return new t1(i, n, s, r, h, e);
                }, t1.clone = function(i) {
                    return new t1(i.center.x, i.center.y, i.center.z, i.halfExtents.x, i.halfExtents.y, i.halfExtents.z);
                }, t1.copy = function(t1, i) {
                    return Ss.copy(t1.center, i.center), Ss.copy(t1.halfExtents, i.halfExtents), t1;
                }, t1.fromPoints = function(t1, i, n) {
                    return Ss.add(be, n, i), Ss.subtract(ke, n, i), Ss.multiplyScalar(t1.center, be, .5), Ss.multiplyScalar(t1.halfExtents, ke, .5), t1;
                }, t1.set = function(t1, i, n, s, r, h, e) {
                    return t1.center.set(i, n, s), t1.halfExtents.set(r, h, e), t1;
                }, t1.merge = function(i, n, s) {
                    return Ss.subtract(be, n.center, n.halfExtents), Ss.subtract(ke, s.center, s.halfExtents), Ss.add(Ae, n.center, n.halfExtents), Ss.add(Ee, s.center, s.halfExtents), Ss.max(Ee, Ae, Ee), Ss.min(Ae, be, ke), t1.fromPoints(i, Ae, Ee);
                }, t1.toBoundingSphere = function(t1, i) {
                    return t1.center.set(i.center), t1.radius = i.halfExtents.length(), t1;
                }, t1.transform = function(t1, i, n) {
                    return Ss.transformMat4(t1.center, i.center, n), Oe(t1.halfExtents, i.halfExtents, n), t1;
                };
                var i = t1.prototype;
                return i.getBoundary = function(t1, i) {
                    Ss.subtract(t1, this.center, this.halfExtents), Ss.add(i, this.center, this.halfExtents);
                }, i.transform = function(t1, i, n, s, r) {
                    Ss.transformMat4(r.center, this.center, t1), Oe(r.halfExtents, this.halfExtents, t1);
                }, i.clone = function() {
                    var i = this.center, n = this.halfExtents;
                    return new t1(i.x, i.y, i.z, n.x, n.y, n.z);
                }, i.copy = function(t1) {
                    return Ss.copy(this.center, t1.center), Ss.copy(this.halfExtents, t1.halfExtents), this;
                }, i.mergePoint = function(t1) {
                    this.getBoundary(be, ke), t1.x < be.x && (be.x = t1.x), t1.y < be.y && (be.y = t1.y), t1.z < be.z && (be.z = t1.z), t1.x > ke.x && (ke.x = t1.x), t1.y > ke.y && (ke.y = t1.y), t1.z > ke.z && (ke.z = t1.z), Ss.add(Ae, be, ke), this.center.set(Ss.multiplyScalar(Ae, Ae, .5)), this.halfExtents.set(ke.x - Ae.x, ke.y - Ae.y, ke.z - Ae.z);
                }, i.mergePoints = function(t1) {
                    if (!(t1.length < 1)) for(var i = 0; i < t1.length; i++)this.mergePoint(t1[i]);
                }, i.mergeFrustum = function(t1) {
                    this.mergePoints(t1.vertices);
                }, s(t1, [
                    {
                        key: "type",
                        get: function get() {
                            return this._type;
                        }
                    }
                ]), t1;
            }(), Re = function() {
                function t1(t1, i, n) {
                    void 0 === t1 && (t1 = .5), void 0 === i && (i = .5), void 0 === n && (n = 1), this._type = void 0, this.radius = void 0, this.halfHeight = void 0, this.axis = void 0, this.center = void 0, this.rotation = void 0, this.ellipseCenter0 = void 0, this.ellipseCenter1 = void 0, this._type = 512, this.radius = t1, this.halfHeight = i, this.axis = n, this.center = new Ss, this.rotation = new qs, this.ellipseCenter0 = new Ss(0, i, 0), this.ellipseCenter1 = new Ss(0, -i, 0), this.updateCache();
                }
                var i = t1.prototype;
                return i.transform = function(t1, i, n, s, r) {
                    var e = ts(s);
                    r.radius = this.radius * Math.abs(e);
                    var u = (this.halfHeight + this.radius) * Math.abs(s.y) - r.radius;
                    u < 0 && (u = 0), r.halfHeight = u, Ss.transformMat4(r.center, this.center, t1), qs.multiply(r.rotation, this.rotation, n), r.updateCache();
                }, i.updateCache = function() {
                    this.updateLocalCenter(), Ss.transformQuat(this.ellipseCenter0, this.ellipseCenter0, this.rotation), Ss.transformQuat(this.ellipseCenter1, this.ellipseCenter1, this.rotation), this.ellipseCenter0.add(this.center), this.ellipseCenter1.add(this.center);
                }, i.updateLocalCenter = function() {
                    var _$t = this.halfHeight;
                    switch(this.axis){
                        case 0:
                            this.ellipseCenter0.set(_$t, 0, 0), this.ellipseCenter1.set(-_$t, 0, 0);
                            break;
                        case 1:
                            this.ellipseCenter0.set(0, _$t, 0), this.ellipseCenter1.set(0, -_$t, 0);
                            break;
                        case 2:
                            this.ellipseCenter0.set(0, 0, _$t), this.ellipseCenter1.set(0, 0, -_$t);
                    }
                }, s(t1, [
                    {
                        key: "type",
                        get: function get() {
                            return this._type;
                        }
                    }
                ]), t1;
            }(), Me = Array(8);
            Me[0] = Os(1, 1, 1), Me[1] = Os(-1, 1, 1), Me[2] = Os(-1, -1, 1), Me[3] = Os(1, -1, 1), Me[4] = Os(1, 1, -1), Me[5] = Os(-1, 1, -1), Me[6] = Os(-1, -1, -1), Me[7] = Os(1, -1, -1);
            var t18, _$t4, _$t5, i3, Ce, Ne, Pe, De, Le, Be = Os(), Fe = Os(), Ue = Os(), xe = Th.fromPoints, je = Ss.set, Ge = Ss.transformMat4, He = function() {
                i.createOrthographic = function(t1, i, n, s, r, h) {
                    var e = i / 2, u = n / 2;
                    je(Ue, e, u, -s), Ge(t1.vertices[0], Ue, h), je(Ue, -e, u, -s), Ge(t1.vertices[1], Ue, h), je(Ue, -e, -u, -s), Ge(t1.vertices[2], Ue, h), je(Ue, e, -u, -s), Ge(t1.vertices[3], Ue, h), je(Ue, e, u, -r), Ge(t1.vertices[4], Ue, h), je(Ue, -e, u, -r), Ge(t1.vertices[5], Ue, h), je(Ue, -e, -u, -r), Ge(t1.vertices[6], Ue, h), je(Ue, e, -u, -r), Ge(t1.vertices[7], Ue, h), t1.updatePlanes();
                }, i.createOrtho = function(t1, n, s, r, h, e) {
                    return i.createOrthographic(t1, n, s, r, h, e);
                }, i.createPerspective = function(t1, i, n, s, r, h) {
                    var e = Math.tan(.5 * n), u = e * i;
                    Be.set(s * u, s * e, s), Fe.set(r * u, r * e, r);
                    var o = t1.vertices;
                    Ue.set(Be.x, Be.y, -Be.z), Ge(o[0], Ue, h), Ue.set(-Be.x, Be.y, -Be.z), Ge(o[1], Ue, h), Ue.set(-Be.x, -Be.y, -Be.z), Ge(o[2], Ue, h), Ue.set(Be.x, -Be.y, -Be.z), Ge(o[3], Ue, h), Ue.set(Fe.x, Fe.y, -Fe.z), Ge(o[4], Ue, h), Ue.set(-Fe.x, Fe.y, -Fe.z), Ge(o[5], Ue, h), Ue.set(-Fe.x, -Fe.y, -Fe.z), Ge(o[6], Ue, h), Ue.set(Fe.x, -Fe.y, -Fe.z), Ge(o[7], Ue, h), t1.updatePlanes();
                }, i.createFromAABB = function(t1, i) {
                    var n = new Ss, _$s = new Ss;
                    Ss.subtract(n, i.center, i.halfExtents), Ss.add(_$s, i.center, i.halfExtents);
                    var _$r = t1.vertices;
                    return _$r[0].set(_$s.x, _$s.y, -n.z), _$r[1].set(n.x, _$s.y, -n.z), _$r[2].set(n.x, n.y, -n.z), _$r[3].set(_$s.x, n.y, -n.z), _$r[4].set(_$s.x, _$s.y, -_$s.z), _$r[5].set(n.x, _$s.y, -_$s.z), _$r[6].set(n.x, n.y, -_$s.z), _$r[7].set(_$s.x, n.y, -_$s.z), t1.updatePlanes(), t1;
                };
                var _$t = i.prototype;
                function i() {
                    this.planes = void 0, this.vertices = void 0, this._type = void 0, this._type = 128, this.planes = Array(6);
                    for(var _$t = 0; _$t < 6; ++_$t)this.planes[_$t] = Th.create(0, 0, 0, 0);
                    this.vertices = Array(8);
                    for(var _$i = 0; _$i < 8; ++_$i)this.vertices[_$i] = new Ss;
                }
                return _$t.split = function(t1, n, s, r, h) {
                    return i.createPerspective(this, s, r, t1, n, h);
                }, i.create = function() {
                    return new i;
                }, i.clone = function(t1) {
                    return i.copy(new i, t1);
                }, i.copy = function(t1, i) {
                    t1._type = i.type;
                    for(var n = 0; n < 6; ++n)Th.copy(t1.planes[n], i.planes[n]);
                    for(var _$s = 0; _$s < 8; ++_$s)Ss.copy(t1.vertices[_$s], i.vertices[_$s]);
                    return t1;
                }, _$t.update = function(t1, i) {
                    var n = this.planes;
                    je(n[0].n, t1.m03 + t1.m00, t1.m07 + t1.m04, t1.m11 + t1.m08), n[0].d = -(t1.m15 + t1.m12), je(n[1].n, t1.m03 - t1.m00, t1.m07 - t1.m04, t1.m11 - t1.m08), n[1].d = -(t1.m15 - t1.m12), je(n[2].n, t1.m03 + t1.m01, t1.m07 + t1.m05, t1.m11 + t1.m09), n[2].d = -(t1.m15 + t1.m13), je(n[3].n, t1.m03 - t1.m01, t1.m07 - t1.m05, t1.m11 - t1.m09), n[3].d = -(t1.m15 - t1.m13), je(n[4].n, t1.m03 + t1.m02, t1.m07 + t1.m06, t1.m11 + t1.m10), n[4].d = -(t1.m15 + t1.m14), je(n[5].n, t1.m03 - t1.m02, t1.m07 - t1.m06, t1.m11 - t1.m10), n[5].d = -(t1.m15 - t1.m14);
                    for(var _$s = 0; _$s < 6; _$s++){
                        var _$r = n[_$s], h = 1 / _$r.n.length();
                        Ss.multiplyScalar(_$r.n, _$r.n, h), _$r.d *= h;
                    }
                    for(var e = 0; e < 8; e++)Ge(this.vertices[e], Me[e], i);
                }, _$t.transform = function(t1) {
                    for(var _$i = 0; _$i < 8; _$i++)Ge(this.vertices[_$i], this.vertices[_$i], t1);
                    this.updatePlanes();
                }, _$t.zero = function() {
                    for(var _$t = 0; _$t < 8; _$t++)this.vertices[_$t].set(0, 0, 0);
                    for(var _$i = 0; _$i < 6; _$i++)Th.set(this.planes[_$i], 0, 0, 0, 0);
                }, _$t.updatePlanes = function() {
                    var _$t = this.planes, _$i = this.vertices;
                    xe(_$t[0], _$i[1], _$i[6], _$i[5]), xe(_$t[1], _$i[3], _$i[4], _$i[7]), xe(_$t[2], _$i[6], _$i[3], _$i[7]), xe(_$t[3], _$i[0], _$i[5], _$i[4]), xe(_$t[4], _$i[2], _$i[0], _$i[3]), xe(_$t[5], _$i[7], _$i[5], _$i[6]);
                }, s(i, [
                    {
                        key: "accurate",
                        set: function set(t1) {
                            this._type = t1 ? 256 : 128;
                        }
                    },
                    {
                        key: "type",
                        get: function get() {
                            return this._type;
                        }
                    }
                ]), i;
            }(), Ve = Ss.squaredDistance, We = Ss.subtract, ze = Ss.dot, $e = Ss.set, Xe = Ss.cross, qe = Ss.multiplyScalar, Ye = Ss.copy, Ke = Ss.add, Je = Ss.scaleAndAdd, Qe = Math.max, Ze = Math.min, tu = Math.abs, iu = function iu(t1, i) {
                var n = ze(t1.d, i.n);
                if (tu(n) < Number.EPSILON) return 0;
                var s = -gh(t1.o, i) / n;
                return s < 0 ? 0 : s;
            }, nu = (Ce = Os(), Ne = Os(), Pe = Os(), De = Os(), Le = Os(), function nu(t1, i, n) {
                We(Ce, i.b, i.a), We(Ne, i.c, i.a), Xe(Pe, t1.d, Ne);
                var s = ze(Ce, Pe);
                if (s < Number.EPSILON && (!n || s > -Number.EPSILON)) return 0;
                var _$r = 1 / s;
                We(De, t1.o, i.a);
                var h = ze(De, Pe) * _$r;
                if (h < 0 || h > 1) return 0;
                Xe(Le, De, Ce);
                var e = ze(t1.d, Le) * _$r;
                if (e < 0 || h + e > 1) return 0;
                var u = ze(Ne, Le) * _$r;
                return u < 0 ? 0 : u;
            }), su = (_$t4 = Os(), function(i, n) {
                var s = n.radius, _$r = n.center, h = i.o, e = i.d, u = s * s;
                We(_$t4, _$r, h);
                var o = _$t4.lengthSqr(), f = ze(_$t4, e), _$c = u - (o - f * f);
                if (_$c < 0) return 0;
                var a = Math.sqrt(_$c), v = o < u ? f + a : f - a;
                return v < 0 ? 0 : v;
            }), ru = (_$t5 = Os(), i3 = Os(), function(n, s) {
                return We(_$t5, s.center, s.halfExtents), Ke(i3, s.center, s.halfExtents), hu(n, _$t5, i3);
            });
            function hu(t1, i, n) {
                var s = t1.o, _$r = t1.d, h = 1 / _$r.x, e = 1 / _$r.y, u = 1 / _$r.z, o = (i.x - s.x) * h, f = (n.x - s.x) * h, _$c = (i.y - s.y) * e, a = (n.y - s.y) * e, v = (i.z - s.z) * u, l = (n.z - s.z) * u, _$d = Qe(Qe(Ze(o, f), Ze(_$c, a)), Ze(v, l)), w = Ze(Ze(Qe(o, f), Qe(_$c, a)), Qe(v, l));
                return w < 0 || _$d > w ? 0 : _$d > 0 ? _$d : w;
            }
            var eu = (_$t6 = Os(), i4 = Os(), n2 = Os(), s2 = Os(), _$r1 = Os(), h1 = Os(), e1 = Os(), u1 = [
                ,
                ,
                , 
            ], o1 = [
                ,
                ,
                , 
            ], f1 = [
                ,
                ,
                , 
            ], _$c = Array(6), function(a, v) {
                var l = v.halfExtents, _$d = v.orientation;
                u1[0] = l.x, u1[1] = l.y, u1[2] = l.z, _$t6 = v.center, i4 = a.o, n2 = a.d, $e(s2, _$d.m00, _$d.m01, _$d.m02), $e(_$r1, _$d.m03, _$d.m04, _$d.m05), $e(h1, _$d.m06, _$d.m07, _$d.m08), We(e1, _$t6, i4), o1[0] = ze(s2, n2), o1[1] = ze(_$r1, n2), o1[2] = ze(h1, n2), f1[0] = ze(s2, e1), f1[1] = ze(_$r1, e1), f1[2] = ze(h1, e1);
                for(var w = 0; w < 3; ++w){
                    if (0 === o1[w]) {
                        if (-f1[w] - u1[w] > 0 || -f1[w] + u1[w] < 0) return 0;
                        o1[w] = 1e-7;
                    }
                    _$c[2 * w + 0] = (f1[w] + u1[w]) / o1[w], _$c[2 * w + 1] = (f1[w] - u1[w]) / o1[w];
                }
                var g = Qe(Qe(Ze(_$c[0], _$c[1]), Ze(_$c[2], _$c[3])), Ze(_$c[4], _$c[5])), p = Ze(Ze(Qe(_$c[0], _$c[1]), Qe(_$c[2], _$c[3])), Qe(_$c[4], _$c[5]));
                return p < 0 || g > p ? 0 : g > 0 ? g : p;
            }), uu = (_$t7 = Os(), i5 = Os(), n3 = Os(), s3 = Os(), _$r2 = Os(), h2 = Os(), e2 = Os(), u2 = new Ph, function(o, f) {
                var _$c = f.ellipseCenter0, a = f.ellipseCenter1, v = We(i5, a, _$c);
                if (v.length() < Ln) return u2.radius = f.radius, u2.center.set(f.ellipseCenter0), zu.raySphere(o, u2);
                var l = o.o, _$d = We(n3, l, _$c), w = Ss.normalize(_$t7, o.d), g = Xe(s3, w, v), p = g.lengthSqr();
                if (0 === p) {
                    u2.radius = f.radius;
                    var _$y = We(_$r2, a, l);
                    return _$d.lengthSqr() < _$y.lengthSqr() ? u2.center.set(_$c) : u2.center.set(a), zu.raySphere(o, u2);
                }
                var _$_ = Xe(_$r2, _$d, v), m = v.lengthSqr(), b = 2 * ze(g, _$_), k = f.radius * f.radius, A = b * b - 4 * p * (_$_.lengthSqr() - k * m);
                if (A < 0) return 0;
                var E = (-b - Math.sqrt(A)) / (2 * p);
                if (E < 0) {
                    u2.radius = f.radius;
                    var T = We(h2, a, l);
                    return _$d.lengthSqr() < T.lengthSqr() ? u2.center.set(f.ellipseCenter0) : u2.center.set(f.ellipseCenter1), zu.raySphere(o, u2);
                }
                var _$I = ze(We(e2, Je(h2, o.o, w, E), _$c), v) / m;
                return _$I >= 0 && _$I <= 1 ? E : _$I < 0 ? (u2.radius = f.radius, u2.center.set(f.ellipseCenter0), zu.raySphere(o, u2)) : _$I > 1 ? (u2.radius = f.radius, u2.center.set(f.ellipseCenter1), zu.raySphere(o, u2)) : 0;
            }), ou = (_$t8 = Os(), function(i, n) {
                We(_$t8, i.e, i.s);
                var s = -gh(i.s, n) / ze(_$t8, n.n);
                return s < 0 || s > 1 ? 0 : s;
            }), fu = (_$t9 = Os(), i6 = Os(), n4 = Os(), s4 = Os(), _$r3 = Os(), h3 = Os(), function(e, u, o) {
                We(_$t9, u.b, u.a), We(i6, u.c, u.a), We(n4, e.s, e.e), Xe(_$r3, _$t9, i6);
                var f = ze(n4, _$r3);
                if (f <= 0) return 0;
                We(s4, e.s, u.a);
                var _$c = ze(s4, _$r3);
                if (_$c < 0 || _$c > f) return 0;
                Xe(h3, n4, s4);
                var a = ze(i6, h3);
                if (a < 0 || a > f) return 0;
                var v = -ze(_$t9, h3);
                if (v < 0 || a + v > f) return 0;
                if (o) {
                    var l = 1 / f, _$d = 1 - (a *= l) - (v *= l);
                    $e(o, u.a.x * _$d + u.b.x * a + u.c.x * v, u.a.y * _$d + u.b.y * a + u.c.y * v, u.a.z * _$d + u.b.z * a + u.c.z * v);
                }
                return 1;
            }), cu = new Sh;
            function au(t1, i) {
                cu.o.set(t1.s), We(cu.d, t1.e, t1.s), cu.d.normalize();
                var n = ru(cu, i);
                return n <= t1.length() ? n : 0;
            }
            function vu(t1, i) {
                cu.o.set(t1.s), We(cu.d, t1.e, t1.s), cu.d.normalize();
                var n = eu(cu, i);
                return n <= t1.length() ? n : 0;
            }
            function lu(t1, i) {
                cu.o.set(t1.s), We(cu.d, t1.e, t1.s), cu.d.normalize();
                var n = su(cu, i);
                return n <= t1.length() ? n : 0;
            }
            var _$t6, i4, n2, s2, _$r1, h1, e1, u1, o1, f1, _$c, _$t7, i5, n3, s3, _$r2, h2, e2, u2, _$t8, _$t9, i6, n4, s4, _$r3, h3, du, wu, gu, pu, yu = (du = Os(), wu = Os(), gu = Os(), pu = Os(), function yu(t1, i) {
                return We(du, t1.center, t1.halfExtents), Ke(wu, t1.center, t1.halfExtents), We(gu, i.center, i.halfExtents), Ke(pu, i.center, i.halfExtents), du.x <= pu.x && wu.x >= gu.x && du.y <= pu.y && wu.y >= gu.y && du.z <= pu.z && wu.z >= gu.z;
            });
            function _u(t1, i, n) {
                $e(n[0], t1.x, i.y, i.z), $e(n[1], t1.x, i.y, t1.z), $e(n[2], t1.x, t1.y, i.z), $e(n[3], t1.x, t1.y, t1.z), $e(n[4], i.x, i.y, i.z), $e(n[5], i.x, i.y, t1.z), $e(n[6], i.x, t1.y, i.z), $e(n[7], i.x, t1.y, t1.z);
            }
            function mu(t1, i, n, s, r, h) {
                $e(h[0], t1.x + n.x * i.x + s.x * i.y + r.x * i.z, t1.y + n.y * i.x + s.y * i.y + r.y * i.z, t1.z + n.z * i.x + s.z * i.y + r.z * i.z), $e(h[1], t1.x - n.x * i.x + s.x * i.y + r.x * i.z, t1.y - n.y * i.x + s.y * i.y + r.y * i.z, t1.z - n.z * i.x + s.z * i.y + r.z * i.z), $e(h[2], t1.x + n.x * i.x - s.x * i.y + r.x * i.z, t1.y + n.y * i.x - s.y * i.y + r.y * i.z, t1.z + n.z * i.x - s.z * i.y + r.z * i.z), $e(h[3], t1.x + n.x * i.x + s.x * i.y - r.x * i.z, t1.y + n.y * i.x + s.y * i.y - r.y * i.z, t1.z + n.z * i.x + s.z * i.y - r.z * i.z), $e(h[4], t1.x - n.x * i.x - s.x * i.y - r.x * i.z, t1.y - n.y * i.x - s.y * i.y - r.y * i.z, t1.z - n.z * i.x - s.z * i.y - r.z * i.z), $e(h[5], t1.x + n.x * i.x - s.x * i.y - r.x * i.z, t1.y + n.y * i.x - s.y * i.y - r.y * i.z, t1.z + n.z * i.x - s.z * i.y - r.z * i.z), $e(h[6], t1.x - n.x * i.x + s.x * i.y - r.x * i.z, t1.y - n.y * i.x + s.y * i.y - r.y * i.z, t1.z - n.z * i.x + s.z * i.y - r.z * i.z), $e(h[7], t1.x - n.x * i.x - s.x * i.y + r.x * i.z, t1.y - n.y * i.x - s.y * i.y + r.y * i.z, t1.z - n.z * i.x - s.z * i.y + r.z * i.z);
            }
            function bu(t1, i) {
                for(var n = ze(i, t1[0]), s = n, _$r = 1; _$r < 8; ++_$r){
                    var h = ze(i, t1[_$r]);
                    n = h < n ? h : n, s = h > s ? h : s;
                }
                return [
                    n,
                    s
                ];
            }
            var _$t10, _$t11, _$t12, i7, _$t13, i8, n5, s5, _$r4, h4, ku, Au, Eu, Tu, Su, Ou = function() {
                for(var _$t = Array(15), i = 0; i < 15; i++)_$t[i] = Os();
                for(var n = Array(8), s = Array(8), _$r = 0; _$r < 8; _$r++)n[_$r] = Os(), s[_$r] = Os();
                var h = Os(), e = Os();
                return function(i, r) {
                    var u = r.orientation;
                    $e(_$t[0], 1, 0, 0), $e(_$t[1], 0, 1, 0), $e(_$t[2], 0, 0, 1), $e(_$t[3], u.m00, u.m01, u.m02), $e(_$t[4], u.m03, u.m04, u.m05), $e(_$t[5], u.m06, u.m07, u.m08);
                    for(var o = 0; o < 3; ++o)Xe(_$t[6 + 3 * o], _$t[o], _$t[3]), Xe(_$t[7 + 3 * o], _$t[o], _$t[4]), Xe(_$t[7 + 3 * o], _$t[o], _$t[5]);
                    We(h, i.center, i.halfExtents), Ke(e, i.center, i.halfExtents), _u(h, e, n), mu(r.center, r.halfExtents, _$t[3], _$t[4], _$t[5], s);
                    for(var f = 0; f < 15; ++f){
                        var _$c = bu(n, _$t[f]), a = bu(s, _$t[f]);
                        if (a[0] > _$c[1] || _$c[0] > a[1]) return 0;
                    }
                    return 1;
                };
            }(), Iu = function Iu(t1, i) {
                var n = t1.halfExtents, s = i.n, _$r = n.x * tu(s.x) + n.y * tu(s.y) + n.z * tu(s.z), h = ze(s, t1.center);
                return h + _$r < i.d ? -1 : h - _$r > i.d ? 0 : 1;
            }, Ru = function Ru(t1, i) {
                for(var n = i.planes, s = 0; s < n.length; s++)if (-1 === Iu(t1, n[s])) return 0;
                return 1;
            }, Mu = function() {
                for(var _$t = Array(8), i = 0, n = 0, s = 0; s < _$t.length; s++)_$t[s] = Os();
                return function(s, r) {
                    for(var h = r.vertices, e = s.halfExtents, u = 0, o = !1, f = 0; f < r.planes.length; f++){
                        if (-1 === (u = Iu(s, r.planes[f]))) return 0;
                        1 === u && (o = !0);
                    }
                    if (!o) return 1;
                    for(var _$c = 0; _$c < h.length; _$c++)We(_$t[_$c], h[_$c], s.center);
                    i = 0, n = 0;
                    for(var a = 0; a < h.length; a++)_$t[a].x > e.x ? i++ : _$t[a].x < -e.x && n++;
                    if (i === h.length || n === h.length) return 0;
                    i = 0, n = 0;
                    for(var v = 0; v < h.length; v++)_$t[v].y > e.y ? i++ : _$t[v].y < -e.y && n++;
                    if (i === h.length || n === h.length) return 0;
                    i = 0, n = 0;
                    for(var l = 0; l < h.length; l++)_$t[l].z > e.z ? i++ : _$t[l].z < -e.z && n++;
                    return +(i !== h.length && n !== h.length);
                };
            }(), Cu = (ku = Os(), Au = new Ps, function Cu(t1, i) {
                var s;
                return We(ku, i, t1.center), Ss.transformMat3(ku, ku, Ps.transpose(Au, t1.orientation)), s = t1.halfExtents, tu(ku.x) < s.x && tu(ku.y) < s.y && tu(ku.z) < s.z;
            }), Nu = (Eu = function Eu(t1, i, n, s) {
                return tu(t1.x * i + t1.y * n + t1.z * s);
            }, function Nu(t1, i) {
                var n = t1.orientation, s = t1.halfExtents, _$r = i.n, h = i.d, e = s.x * Eu(_$r, n.m00, n.m01, n.m02) + s.y * Eu(_$r, n.m03, n.m04, n.m05) + s.z * Eu(_$r, n.m06, n.m07, n.m08), u = ze(_$r, t1.center);
                return u + e < h ? -1 : u - e > h ? 0 : 1;
            }), Pu = function Pu(t1, i) {
                for(var n = i.planes, s = 0; s < n.length; s++)if (-1 === Nu(t1, n[s])) return 0;
                return 1;
            }, Du = function() {
                for(var _$t = Array(8), i = 0, n = 0, s = 0, _$r = 0; _$r < _$t.length; _$r++)_$t[_$r] = Os();
                var h = function h(t1, i, n, s) {
                    return t1.x * i + t1.y * n + t1.z * s;
                };
                return function(r, e) {
                    for(var u = r.orientation, o = r.halfExtents, f = e.vertices, _$c = e.planes, a = 0, v = !1, l = 0; l < _$c.length; l++){
                        if (-1 === (a = Nu(r, _$c[l]))) return 0;
                        1 === a && (v = !0);
                    }
                    if (!v) return 1;
                    for(var _$d = 0; _$d < f.length; _$d++)We(_$t[_$d], f[_$d], r.center);
                    n = 0, s = 0;
                    for(var w = 0; w < f.length; w++)(i = h(_$t[w], u.m00, u.m01, u.m02)) > o.x ? n++ : i < -o.x && s++;
                    if (n === f.length || s === f.length) return 0;
                    n = 0, s = 0;
                    for(var g = 0; g < f.length; g++)(i = h(_$t[g], u.m03, u.m04, u.m05)) > o.y ? n++ : i < -o.y && s++;
                    if (n === f.length || s === f.length) return 0;
                    n = 0, s = 0;
                    for(var p = 0; p < f.length; p++)(i = h(_$t[p], u.m06, u.m07, u.m08)) > o.z ? n++ : i < -o.z && s++;
                    return +(n !== f.length && s !== f.length);
                };
            }(), Lu = function() {
                for(var _$t = Array(15), i = 0; i < 15; i++)_$t[i] = Os();
                for(var n = Array(8), s = Array(8), _$r = 0; _$r < 8; _$r++)n[_$r] = Os(), s[_$r] = Os();
                return function(i, r) {
                    var h = i.orientation, e = r.orientation;
                    $e(_$t[0], h.m00, h.m01, h.m02), $e(_$t[1], h.m03, h.m04, h.m05), $e(_$t[2], h.m06, h.m07, h.m08), $e(_$t[3], e.m00, e.m01, e.m02), $e(_$t[4], e.m03, e.m04, e.m05), $e(_$t[5], e.m06, e.m07, e.m08);
                    for(var u = 0; u < 3; ++u)Xe(_$t[6 + 3 * u], _$t[u], _$t[3]), Xe(_$t[7 + 3 * u], _$t[u], _$t[4]), Xe(_$t[8 + 3 * u], _$t[u], _$t[5]);
                    mu(i.center, i.halfExtents, _$t[0], _$t[1], _$t[2], n), mu(r.center, r.halfExtents, _$t[3], _$t[4], _$t[5], s);
                    for(var o = 0; o < 15; ++o){
                        var f = bu(n, _$t[o]), _$c = bu(s, _$t[o]);
                        if (_$c[0] > f[1] || f[0] > _$c[1]) return 0;
                    }
                    return 1;
                };
            }(), Bu = function() {
                for(var _$t = new Ph, i = Os(), n = Os(), s = Os(), _$r = Array(8), h = 0; h < 8; h++)_$r[h] = Os();
                for(var e = Array(8), u = 0; u < 8; u++)e[u] = Os();
                return function(h, u) {
                    var o = u.ellipseCenter0, f = u.ellipseCenter1, _$c = u.radius;
                    if (0 === Ve(o, f)) return _$t.radius = u.radius, _$t.center.set(o), zu.sphereOBB(_$t, h);
                    var a = h.orientation;
                    i.x = a.m00, i.y = a.m01, i.z = a.m02, n.x = a.m03, n.y = a.m04, n.z = a.m05, s.x = a.m06, s.y = a.m07, s.z = a.m08, mu(h.center, h.halfExtents, i, n, s, _$r);
                    var l = Ye(e[0], i), _$d = Ye(e[1], n), w = Ye(e[2], s);
                    We(e[3], u.center, h.center).normalize();
                    var g = We(e[4], o, f);
                    g.normalize(), Xe(e[5], l, g), Xe(e[6], _$d, g), Xe(e[7], w, g);
                    for(var p = 0; p < 8; ++p){
                        var _$y = bu(_$r, e[p]), _$_ = ze(e[p], o), m = ze(e[p], f), b = Qe(_$_, m) + _$c;
                        if (Ze(_$_, m) - _$c > _$y[1] || _$y[0] > b) return 0;
                    }
                    return 1;
                };
            }(), Fu = function Fu(t1, i) {
                var n = ze(i.n, t1.center), s = t1.radius * i.n.length();
                return n + s < i.d ? -1 : n - s > i.d ? 0 : 1;
            }, Uu = function Uu(t1, i) {
                for(var n = i.planes, s = 0; s < n.length; s++)if (-1 === Fu(t1, n[s])) return 0;
                return 1;
            }, xu = (Tu = Os(), Su = [
                1,
                -1,
                1,
                -1,
                1,
                -1
            ], function xu(t1, i) {
                for(var n = 0; n < 6; n++){
                    var s = i.planes[n], _$r = t1.radius, h = t1.center, e = s.n, u = s.d, o = ze(e, h);
                    if (o + _$r < u) return 0;
                    if (!(o - _$r > u)) {
                        Ke(Tu, h, qe(Tu, e, _$r));
                        for(var f = 0; f < 6; f++)if (f !== n && f !== n + Su[n]) {
                            var _$c = i.planes[f];
                            if (ze(_$c.n, Tu) < _$c.d) return 0;
                        }
                    }
                }
                return 1;
            }), ju = function ju(t1, i) {
                var n = t1.radius + i.radius;
                return Ve(t1.center, i.center) < n * n;
            }, Gu = (_$t10 = Os(), function(i, n) {
                var s = i.radius;
                return ph(_$t10, i.center, n), Ve(i.center, _$t10) < s * s;
            }), Hu = (_$t11 = Os(), function(i, n) {
                var s = i.radius;
                return yh(_$t11, i.center, n), Ve(i.center, _$t11) < s * s;
            }), Vu = (_$t12 = Os(), i7 = Os(), function(n, s) {
                var _$r = s.ellipseCenter0, h = s.ellipseCenter1, e = n.center, u = n.radius + s.radius, o = u * u, f = Ve(_$r, h);
                if (0 === f) return Ve(e, s.center) < o;
                We(_$t12, e, _$r), We(i7, h, _$r);
                var _$c = ze(_$t12, i7) / f;
                return _$c < 0 ? Ve(e, _$r) < o : _$c > 1 ? Ve(e, h) < o : (Je(_$t12, _$r, i7, _$c), Ve(e, _$t12) < o);
            }), Wu = (_$t13 = Os(), i8 = Os(), n5 = Os(), s5 = Os(), _$r4 = Os(), h4 = Os(), function(e, u) {
                var o, f, _$c = e.ellipseCenter0, a = e.ellipseCenter1, v = u.ellipseCenter1, l = u.ellipseCenter0, _$d = We(_$t13, a, _$c), w = We(i8, v, l), g = We(n5, _$c, l), p = ze(_$d, _$d), _$y = ze(_$d, w), _$_ = ze(w, w), m = ze(_$d, g), b = ze(w, g), k = p * _$_ - _$y * _$y, A = k, E = k;
                k < Ln ? (o = 0, A = 1, f = b, E = _$_) : (f = p * b - _$y * m, (o = _$y * b - _$_ * m) < 0 ? (o = 0, f = b, E = _$_) : o > A && (o = A, f = b + _$y, E = _$_)), f < 0 ? (f = 0, 0 > -m ? o = 0 : -m > p ? o = A : (o = -m, A = p)) : f > E && (f = E, -m + _$y < 0 ? o = 0 : -m + _$y > p ? o = A : (o = -m + _$y, A = p));
                var T = tu(o) < Ln ? 0 : o / A, S = tu(f) < Ln ? 0 : f / E;
                s5.set(g), s5.add(qe(_$r4, _$d, T)), s5.subtract(qe(h4, w, S));
                var _$I = e.radius + u.radius;
                return s5.lengthSqr() < _$I * _$I;
            }), zu = {
                raySphere: su,
                rayAABB: ru,
                rayOBB: eu,
                rayPlane: iu,
                rayTriangle: nu,
                rayCapsule: uu,
                raySubMesh: null,
                rayMesh: null,
                rayModel: null,
                lineSphere: lu,
                lineAABB: au,
                lineOBB: vu,
                linePlane: ou,
                lineTriangle: fu,
                sphereWithSphere: ju,
                sphereAABB: Gu,
                sphereOBB: Hu,
                spherePlane: Fu,
                sphereFrustum: Uu,
                sphereFrustumAccurate: xu,
                sphereCapsule: Vu,
                aabbWithAABB: yu,
                aabbWithOBB: Ou,
                aabbPlane: Iu,
                aabbFrustum: Ru,
                aabbFrustumAccurate: Mu,
                obbWithOBB: Lu,
                obbPlane: Nu,
                obbFrustum: Pu,
                obbFrustumAccurate: Du,
                obbPoint: Cu,
                obbCapsule: Bu,
                aabbFrustumCompletelyInside: function aabbFrustumCompletelyInside(t1, i) {
                    for(var n = i.planes, s = 0; s < n.length; s++)if (0 !== Iu(t1, n[s])) return 0;
                    return 1;
                },
                capsuleWithCapsule: Wu,
                resolve: function resolve(t1, i, n) {
                    void 0 === n && (n = null);
                    var s = t1._type, _$r = i._type, h = this[s | _$r];
                    return s < _$r ? h(t1, i, n) : h(i, t1, n);
                }
            };
            zu[5] = su, zu[9] = ru, zu[17] = eu, zu[33] = iu, zu[65] = nu, zu[513] = uu, zu[6] = lu, zu[10] = au, zu[18] = vu, zu[34] = ou, zu[66] = fu, zu[4] = ju, zu[12] = Gu, zu[20] = Hu, zu[36] = Fu, zu[132] = Uu, zu[260] = xu, zu[516] = Vu, zu[8] = yu, zu[24] = Ou, zu[40] = Iu, zu[136] = Ru, zu[264] = Mu, zu[16] = Lu, zu[48] = Nu, zu[144] = Pu, zu[272] = Du, zu[528] = Bu, zu[512] = Wu;
            var $u, Xu = new Ss, qu = new Ss, Yu = new Ps, Ku = Math.abs, Ju = function Ju(t1, i, n) {
                Yu.m00 = Ku(n.m00), Yu.m01 = Ku(n.m01), Yu.m02 = Ku(n.m02), Yu.m03 = Ku(n.m03), Yu.m04 = Ku(n.m04), Yu.m05 = Ku(n.m05), Yu.m06 = Ku(n.m06), Yu.m07 = Ku(n.m07), Yu.m08 = Ku(n.m08), Ss.transformMat3(t1, i, Yu);
            }, Qu = function() {
                function t1(t1, i, n, s, r, h, e, u, o, f, c, a, v, l, d) {
                    void 0 === t1 && (t1 = 0), void 0 === i && (i = 0), void 0 === n && (n = 0), void 0 === s && (s = 1), void 0 === r && (r = 1), void 0 === h && (h = 1), void 0 === e && (e = 1), void 0 === u && (u = 0), void 0 === o && (o = 0), void 0 === f && (f = 0), void 0 === c && (c = 1), void 0 === a && (a = 0), void 0 === v && (v = 0), void 0 === l && (l = 0), void 0 === d && (d = 1), this.center = void 0, this.halfExtents = void 0, this.orientation = void 0, this._type = void 0, this._type = 16, this.center = new Ss(t1, i, n), this.halfExtents = new Ss(s, r, h), this.orientation = new Ps(e, u, o, f, c, a, v, l, d);
                }
                t1.create = function(i, n, s, r, h, e, u, o, f, c, a, v, l, d, w) {
                    return new t1(i, n, s, r, h, e, u, o, f, c, a, v, l, d, w);
                }, t1.clone = function(i) {
                    return new t1(i.center.x, i.center.y, i.center.z, i.halfExtents.x, i.halfExtents.y, i.halfExtents.z, i.orientation.m00, i.orientation.m01, i.orientation.m02, i.orientation.m03, i.orientation.m04, i.orientation.m05, i.orientation.m06, i.orientation.m07, i.orientation.m08);
                }, t1.copy = function(t1, i) {
                    return Ss.copy(t1.center, i.center), Ss.copy(t1.halfExtents, i.halfExtents), Ps.copy(t1.orientation, i.orientation), t1;
                }, t1.fromPoints = function(t1, i, n) {
                    return Ss.multiplyScalar(t1.center, Ss.add(Xu, i, n), .5), Ss.multiplyScalar(t1.halfExtents, Ss.subtract(qu, n, i), .5), Ps.identity(t1.orientation), t1;
                }, t1.set = function(t1, i, n, s, r, h, e, u, o, f, c, a, v, l, d, w) {
                    return Ss.set(t1.center, i, n, s), Ss.set(t1.halfExtents, r, h, e), Ps.set(t1.orientation, u, o, f, c, a, v, l, d, w), t1;
                };
                var i = t1.prototype;
                return i.getBoundary = function(t1, i) {
                    Ju(Xu, this.halfExtents, this.orientation), Ss.subtract(t1, this.center, Xu), Ss.add(i, this.center, Xu);
                }, i.transform = function(t1, i, n, s, r) {
                    Ss.transformMat4(r.center, this.center, t1), Ps.fromQuat(r.orientation, n), Ss.multiply(r.halfExtents, this.halfExtents, s);
                }, i.translateAndRotate = function(t1, i, n) {
                    Ss.transformMat4(n.center, this.center, t1), Ps.fromQuat(n.orientation, i);
                }, i.setScale = function(t1, i) {
                    Ss.multiply(i.halfExtents, this.halfExtents, t1);
                }, s(t1, [
                    {
                        key: "type",
                        get: function get() {
                            return this._type;
                        }
                    }
                ]), t1;
            }();
            function Zu(t1, i, n) {
                void 0 === n && (n = 1e-6);
                for(var s = 0, _$r = t1.length - 1, h = _$r >>> 1; s <= _$r; h = s + _$r >>> 1){
                    var e = t1[h];
                    if (e > i + n) _$r = h - 1;
                    else {
                        if (!(e < i - n)) return h;
                        s = h + 1;
                    }
                }
                return ~s;
            }
            $u = Symbol.iterator;
            var to = function() {
                function t1() {
                    this._times = [], this._values = [];
                }
                var i = t1.prototype;
                return i[$u] = function() {
                    var _$t = this, i = 0;
                    return {
                        next: function next() {
                            if (i >= _$t._times.length) return {
                                done: !0,
                                value: void 0
                            };
                            var n = [
                                _$t._times[i],
                                _$t._values[i]
                            ];
                            return ++i, {
                                done: !1,
                                value: n
                            };
                        }
                    };
                }, i.keyframes = function() {
                    return this;
                }, i.times = function() {
                    return this._times;
                }, i.values = function() {
                    return this._values;
                }, i.getKeyframeTime = function(t1) {
                    return this._times[t1];
                }, i.getKeyframeValue = function(t1) {
                    return this._values[t1];
                }, i.addKeyFrame = function(t1, i) {
                    return this.Jt(t1, i);
                }, i.removeKeyframe = function(t1) {
                    this._times.splice(t1, 1), this._values.splice(t1, 1);
                }, i.indexOfKeyframe = function(t1) {
                    return Zu(this._times, t1);
                }, i.updateTime = function(t1, i) {
                    var n = this._values[t1];
                    this.removeKeyframe(t1), this.Jt(i, n);
                }, i.assignSorted = function(t1, i) {
                    if (void 0 !== i) this.setKeyframes(t1.slice(), i.slice());
                    else {
                        var n = Array.from(t1);
                        this.setKeyframes(n.map(function(t1) {
                            return t1[0];
                        }), n.map(function(t1) {
                            return t1[1];
                        }));
                    }
                }, i.clear = function() {
                    this._times.length = 0, this._values.length = 0;
                }, i.searchKeyframe = function(t1) {
                    return Zu(this._times, t1);
                }, i.setKeyframes = function(t1, i) {
                    t1.length, i.length, io(t1), this._times = t1, this._values = i;
                }, i.Jt = function(t1, i) {
                    var n = this._times, _$s = this._values, _$r = n.length, h = Zu(n, t1);
                    if (h >= 0) return h;
                    var e = ~h;
                    return 0 === e ? (n.unshift(t1), _$s.unshift(i)) : e === _$r ? (n.push(t1), _$s.push(i)) : (n.splice(e - 1, 0, t1), _$s.splice(e - 1, 0, i)), e;
                }, s(t1, [
                    {
                        key: "keyFramesCount",
                        get: function get() {
                            return this._times.length;
                        }
                    },
                    {
                        key: "rangeMin",
                        get: function get() {
                            return this._times[0];
                        }
                    },
                    {
                        key: "rangeMax",
                        get: function get() {
                            return this._times[this._values.length - 1];
                        }
                    }
                ]), t1;
            }();
            function io(t1) {
                return t1.every(function(t1, i, n) {
                    return 0 === i || t1 > n[i - 1] || Fn(t1, n[i - 1], 1e-6);
                });
            }
            function no(t1, i, n, s, r) {
                var h = n / s, e = i / s, u = h * h, o = 1 / 3 * (-1 / 3 * u + e), f = .5 * (2 / 27 * h * u - 1 / 3 * h * e + t1 / s), _$c = o * o * o, a = f * f + _$c, v = 0;
                if (ro(a)) {
                    if (ro(f)) return r[0] = 0, 1;
                    var l = Math.cbrt(-f);
                    return r[0] = 2 * l, r[1] = -l, 2;
                }
                if (a < 0) {
                    var _$d = 1 / 3 * Math.acos(-f / Math.sqrt(-_$c)), w = 2 * Math.sqrt(-o);
                    r[0] = w * Math.cos(_$d), r[1] = -w * Math.cos(_$d + Math.PI / 3), r[2] = -w * Math.cos(_$d - Math.PI / 3), v = 3;
                } else {
                    var g = Math.sqrt(a), p = Math.cbrt(g - f), _$y = -Math.cbrt(g + f);
                    r[0] = p + _$y, v = 1;
                }
                for(var _$_ = 1 / 3 * h, m = 0; m < v; ++m)r[m] -= _$_;
                return v;
            }
            function ro(t1) {
                return t1 > -1e-9 && t1 < 1e-9;
            }
            function ho(t1, i, n, s) {
                return n.slice().reverse().reduce(function(n, s) {
                    return s(t1, i, n) || n;
                }, s);
            }
            An.fastDefine("cc.KeyframeCurve", to, {
                _times: [],
                _values: []
            }), t1("c0", {
                LINEAR: 0,
                CONSTANT: 1,
                CUBIC: 2
            }), t1("c1", {
                LINEAR: 0,
                CLAMP: 1,
                LOOP: 2,
                PING_PONG: 3
            }), t1("c2", {
                NONE: 0,
                LEFT: 1,
                RIGHT: 2,
                BOTH: 3
            });
            var eo = function eo() {}, uo = function uo() {
                return eo;
            }, oo = fo(function() {});
            function fo(t1) {
                return function(i) {
                    return "function" == typeof i ? t1(i) : function(n) {
                        return t1(n, i);
                    };
                };
            }
            function co(t1, i, n) {
                var s = wo(t1, vo);
                if (s) {
                    var _$r = wo(s, "proto");
                    wo(_$r, "editor")[i] = n;
                }
            }
            function ao(t1) {
                return function(i) {
                    return function(n) {
                        co(n, t1, i);
                    };
                };
            }
            var vo = "__ccclassCache__";
            function wo(t1, i) {
                return t1[i] || (t1[i] = {});
            }
            var go = fo(function(t1, i) {
                var n = xt(t1);
                n === Object && (n = null);
                var s = {
                    name: i,
                    extends: n,
                    ctor: t1
                }, _$r = t1[vo];
                if (_$r) {
                    var h = _$r.proto;
                    h && Ft(s, h), t1[vo] = void 0;
                }
                return An(s);
            }), po = ao("requireComponent"), yo = ao("executionOrder");
            function mo(t1, i, n) {
                var s = null;
                function r(t1, i, n) {
                    So(Ao(t1), Eo(t1, i), t1.constructor, i, s, n);
                }
                return void 0 === t1 ? mo({
                    type: void 0
                }) : void 0 === i ? (s = t1, r) : void r(t1, i, n);
            }
            function bo(t1) {
                var i;
                try {
                    i = t1();
                } catch (i) {
                    return t1;
                }
                return "object" != (void 0 === i ? "undefined" : _type_of(i)) || null === i ? i : t1;
            }
            function ko(t1) {
                var i;
                try {
                    i = new t1;
                } catch (t1) {
                    return {};
                }
                return i;
            }
            function Ao(t1) {
                return wo(t1.constructor, vo);
            }
            function Eo(t1, i) {
                var s, _$r = wo(wo(t1.constructor, vo), "proto"), h = wo(_$r, "properties");
                return null != (s = h[i]) ? s : h[i] = {};
            }
            function To(t1, i, n) {
                var _$r, h = wo(t1.constructor, vo), e = wo(h, "proto"), u = wo(e, "properties"), o = null != (_$r = u[i]) ? _$r : u[i] = {};
                return o.__internalFlags |= 1, n && "function" != typeof n && (n.get || n.set) ? (n.get && (o.get = n.get), n.set && (o.set = n.set)) : Oo(h, o, t1.constructor, i, n), o;
            }
            function So(t1, i, n, s, r, h) {
                var e, u = h && "function" != typeof h && (h.get || h.set);
                r && (e = hn(r, u));
                var o = Ft(i, e || r || {});
                u ? (h.get && (o.get = h.get), h.set && (o.set = h.set)) : Oo(t1, o, n, s, h);
            }
            function Oo(t1, i, n, s, r) {
                if (void 0 !== r) "function" == typeof r ? i.default = bo(r) : null === r || r.initializer && (i.default = bo(r.initializer));
                else {
                    var h = t1.default || (t1.default = ko(n));
                    h.hasOwnProperty(s) && (i.default = h[s]);
                }
            }
            var Io = Symbol("cc:SerializationMetadata"), Ro = t1("ct", function(t1, i, n) {
                No(To(t1, i, n));
            });
            function Mo(t1) {
                return function(i, n, s) {
                    var _$r = To(i, n, s);
                    _$r.formerlySerializedAs = t1, No(_$r);
                };
            }
            var Co = function Co(t1, i, n) {
                var s = To(t1, i, n);
                s.editorOnly = !0, No(s);
            };
            function No(t1) {
                t1.__internalFlags |= 4;
            }
            var jo = t1("ci", eo), Go = t1("ck", uo), Ho = t1("cl", uo), Vo = t1("cj", uo), Wo = t1("cn", uo), zo = t1("co", uo), $o = t1("cp", eo), Xo = t1("cm", uo), qo = t1("cq", eo), Yo = Zo(qi), Ko = Zo(Yi), Jo = Zo(Ki), Qo = Zo(Ji);
            function Zo(t1) {
                return mo({
                    type: t1
                });
            }
            var sf, rf, hf, ef, uf, of, ff = t1("cr", function(t1, i, n) {
                To(t1, i, n).override = !0;
            }), cf = t1("bE", function() {}), af = Object.freeze({
                __proto__: null,
                boolean: Jo,
                ccclass: go,
                disallowAnimation: qo,
                disallowMultiple: oo,
                displayName: Ho,
                displayOrder: Xo,
                editable: jo,
                executeInEditMode: oo,
                executionOrder: yo,
                float: Ko,
                formerlySerializedAs: Mo,
                help: uo,
                icon: uo,
                inspector: uo,
                integer: Yo,
                menu: uo,
                override: ff,
                playOnFocus: oo,
                property: mo,
                range: Wo,
                rangeStep: zo,
                requireComponent: po,
                serializable: Ro,
                slide: $o,
                string: Qo,
                tooltip: Vo,
                type: Zo,
                uniquelyReferenced: eo,
                visible: Go
            });
            function df(t1) {
                switch(t1){
                    case 0:
                        return Uint8Array;
                    case 1:
                        return Uint16Array;
                    case 2:
                        return Uint32Array;
                    case 3:
                        return Int8Array;
                    case 4:
                        return Int16Array;
                    case 5:
                        return Int32Array;
                    case 6:
                        return Float32Array;
                    case 7:
                        return Float64Array;
                }
            }
            t1("bq", af), t1("bz", go("cc.CompactValueTypeArray")(((uf = function() {
                function t1() {
                    this._byteOffset = sf && sf(), this._unitCount = rf && rf(), this._unitElement = hf && hf(), this._length = ef && ef();
                }
                return t1.lengthFor = function(t1, i, n) {
                    return wf[i].requiredUnits * t1.length * df(n).BYTES_PER_ELEMENT;
                }, t1.compress = function(i, n, s, r, h, e) {
                    for(var u = wf[n], o = df(s), f = u.requiredUnits * i.length, _$c = new o(r, h, f), a = 0; a < i.length; ++a)u.compress(_$c, a, i[a]);
                    var v = new t1;
                    return v._unitElement = (n << 3) + s, v._byteOffset = e, v._unitCount = f, v._length = i.length, v;
                }, t1.prototype.decompress = function(t1) {
                    for(var i, n = {
                        storageUnit: 7 & (i = this._unitElement),
                        elementType: i >> 3
                    }, s = n.storageUnit, _$r = wf[n.elementType], h = new (df(s))(t1, this._byteOffset, this._unitCount), e = Array(this._length), u = 0; u < this._length; ++u)e[u] = _$r.decompress(h, u);
                    return e;
                }, t1;
            }()).StorageUnit = {
                Uint8: 0,
                Uint16: 1,
                Uint32: 2,
                Int8: 3,
                Int16: 4,
                Int32: 5,
                Float32: 6,
                Float64: 7
            }, uf.ElementType = {
                Scalar: 0,
                Vec2: 1,
                Vec3: 2,
                Vec4: 3,
                Quat: 4,
                Mat4: 5
            }, sf = ho(uf.prototype, "_byteOffset", [
                Ro
            ], function() {
                return 0;
            }), rf = ho(uf.prototype, "_unitCount", [
                Ro
            ], function() {
                return 0;
            }), hf = ho(uf.prototype, "_unitElement", [
                Ro
            ], function() {
                return 0;
            }), ef = ho(uf.prototype, "_length", [
                Ro
            ], function() {
                return 0;
            }), uf)) || uf);
            var wf = ((of = {})[0] = {
                requiredUnits: 1,
                compress: function compress(t1, i, n) {
                    t1[i] = n;
                },
                decompress: function decompress(t1, i) {
                    return t1[i];
                }
            }, of[1] = {
                requiredUnits: 2,
                compress: function compress(t1, i, n) {
                    t1[2 * i] = n.x, t1[2 * i + 1] = n.y;
                },
                decompress: function decompress(t1, i) {
                    return new Ss(t1[2 * i], t1[2 * i + 1]);
                }
            }, of[2] = {
                requiredUnits: 3,
                compress: function compress(t1, i, n) {
                    t1[3 * i] = n.x, t1[3 * i + 1] = n.y, t1[3 * i + 2] = n.z;
                },
                decompress: function decompress(t1, i) {
                    return new Ss(t1[3 * i], t1[3 * i + 1], t1[3 * i + 2]);
                }
            }, of[3] = {
                requiredUnits: 4,
                compress: function compress(t1, i, n) {
                    t1[4 * i] = n.x, t1[4 * i + 1] = n.y, t1[4 * i + 2] = n.z, t1[4 * i + 3] = n.w;
                },
                decompress: function decompress(t1, i) {
                    return new Hr(t1[4 * i], t1[4 * i + 1], t1[4 * i + 2], t1[4 * i + 3]);
                }
            }, of[4] = {
                requiredUnits: 4,
                compress: function compress(t1, i, n) {
                    t1[4 * i] = n.x, t1[4 * i + 1] = n.y, t1[4 * i + 2] = n.z, t1[4 * i + 3] = n.w;
                },
                decompress: function decompress(t1, i) {
                    return new qs(t1[4 * i], t1[4 * i + 1], t1[4 * i + 2], t1[4 * i + 3]);
                }
            }, of[5] = {
                requiredUnits: 16,
                compress: function compress(t1, i, n) {
                    cr.toArray(t1, n, 16 * i);
                },
                decompress: function decompress(t1, i) {
                    return cr.fromArray(new cr, t1, 16 * i);
                }
            }, of), gf = t1("bC", Symbol("[[Serialize]]")), pf = t1("bB", Symbol("[[Deserialize]]"));
            function yf() {
                return 0;
            }
            function _f(t1) {
                return t1;
            }
            function mf(t1) {
                return t1 * t1;
            }
            function bf(t1) {
                return t1 * (2 - t1);
            }
            function kf(t1) {
                return (t1 *= 2) < 1 ? .5 * t1 * t1 : -0.5 * (--t1 * (t1 - 2) - 1);
            }
            function Af(t1) {
                return t1 * t1 * t1;
            }
            function Ef(t1) {
                return --t1 * t1 * t1 + 1;
            }
            function Tf(t1) {
                return (t1 *= 2) < 1 ? .5 * t1 * t1 * t1 : .5 * ((t1 -= 2) * t1 * t1 + 2);
            }
            function Sf(t1) {
                return t1 * t1 * t1 * t1;
            }
            function Of(t1) {
                return 1 - --t1 * t1 * t1 * t1;
            }
            function If(t1) {
                return (t1 *= 2) < 1 ? .5 * t1 * t1 * t1 * t1 : -0.5 * ((t1 -= 2) * t1 * t1 * t1 - 2);
            }
            function Rf(t1) {
                return t1 * t1 * t1 * t1 * t1;
            }
            function Mf(t1) {
                return --t1 * t1 * t1 * t1 * t1 + 1;
            }
            function Cf(t1) {
                return (t1 *= 2) < 1 ? .5 * t1 * t1 * t1 * t1 * t1 : .5 * ((t1 -= 2) * t1 * t1 * t1 * t1 + 2);
            }
            function Nf(t1) {
                return 1 === t1 ? 1 : 1 - Math.cos(t1 * Math.PI / 2);
            }
            function Pf(t1) {
                return Math.sin(t1 * Math.PI / 2);
            }
            function Df(t1) {
                return .5 * (1 - Math.cos(Math.PI * t1));
            }
            function Lf(t1) {
                return 0 === t1 ? 0 : Math.pow(1024, t1 - 1);
            }
            function Bf(t1) {
                return 1 === t1 ? 1 : 1 - Math.pow(2, -10 * t1);
            }
            function Ff(t1) {
                return 0 === t1 ? 0 : 1 === t1 ? 1 : (t1 *= 2) < 1 ? .5 * Math.pow(1024, t1 - 1) : .5 * (2 - Math.pow(2, -10 * (t1 - 1)));
            }
            function Uf(t1) {
                return 1 - Math.sqrt(1 - t1 * t1);
            }
            function xf(t1) {
                return Math.sqrt(1 - --t1 * t1);
            }
            function jf(t1) {
                return (t1 *= 2) < 1 ? -0.5 * (Math.sqrt(1 - t1 * t1) - 1) : .5 * (Math.sqrt(1 - (t1 -= 2) * t1) + 1);
            }
            function Gf(t1) {
                var i, n = .1;
                return 0 === t1 ? 0 : 1 === t1 ? 1 : (!n || n < 1 ? (n = 1, i = .1) : i = .4 * Math.asin(1 / n) / (2 * Math.PI), -n * Math.pow(2, 10 * (t1 -= 1)) * Math.sin(2 * (t1 - i) * Math.PI / .4));
            }
            function Hf(t1) {
                var i, n = .1;
                return 0 === t1 ? 0 : 1 === t1 ? 1 : (!n || n < 1 ? (n = 1, i = .1) : i = .4 * Math.asin(1 / n) / (2 * Math.PI), n * Math.pow(2, -10 * t1) * Math.sin(2 * (t1 - i) * Math.PI / .4) + 1);
            }
            function Vf(t1) {
                var i, n = .1;
                return 0 === t1 ? 0 : 1 === t1 ? 1 : (!n || n < 1 ? (n = 1, i = .1) : i = .4 * Math.asin(1 / n) / (2 * Math.PI), (t1 *= 2) < 1 ? -(n * Math.pow(2, 10 * (t1 -= 1)) * Math.sin(2 * (t1 - i) * Math.PI / .4) * 0.5) : n * Math.pow(2, -10 * (t1 -= 1)) * Math.sin(2 * (t1 - i) * Math.PI / .4) * .5 + 1);
            }
            function Wf(t1) {
                return 1 === t1 ? 1 : t1 * t1 * (2.70158 * t1 - 1.70158);
            }
            function zf(t1) {
                return 0 === t1 ? 0 : --t1 * t1 * (2.70158 * t1 + 1.70158) + 1;
            }
            function $f(t1) {
                return (t1 *= 2) < 1 ? t1 * t1 * (3.5949095 * t1 - 2.5949095) * .5 : .5 * ((t1 -= 2) * t1 * (3.5949095 * t1 + 2.5949095) + 2);
            }
            function Xf(t1) {
                return 1 - qf(1 - t1);
            }
            function qf(t1) {
                return t1 < 1 / 2.75 ? 7.5625 * t1 * t1 : t1 < 2 / 2.75 ? 7.5625 * (t1 -= 1.5 / 2.75) * t1 + .75 : t1 < 2.5 / 2.75 ? 7.5625 * (t1 -= 2.25 / 2.75) * t1 + .9375 : 7.5625 * (t1 -= 2.625 / 2.75) * t1 + .984375;
            }
            function Yf(t1) {
                return t1 < .5 ? .5 * Xf(2 * t1) : .5 * qf(2 * t1 - 1) + .5;
            }
            function Kf(t1) {
                return t1 <= 0 ? 0 : t1 >= 1 ? 1 : t1 * t1 * (3 - 2 * t1);
            }
            function Jf(t1) {
                return t1 <= 0 ? 0 : t1 >= 1 ? 1 : t1 * t1 * t1 * (t1 * (6 * t1 - 15) + 10);
            }
            A._decorator = af;
            var Qf = oc(mf, bf), Zf = oc(Af, Ef), tc = oc(Sf, Of), ic = oc(Rf, Mf), nc = oc(Nf, Pf), sc = oc(Lf, Bf), rc = oc(Uf, xf), hc = oc(Gf, Hf), ec = oc(Wf, zf), uc = oc(Xf, qf);
            function oc(t1, i) {
                return function(n) {
                    return n < .5 ? i(2 * n) / 2 : t1(2 * n - 1) / 2 + .5;
                };
            }
            var fc, cc = Object.freeze({
                __proto__: null,
                backIn: Wf,
                backInOut: $f,
                backOut: zf,
                backOutIn: ec,
                bounceIn: Xf,
                bounceInOut: Yf,
                bounceOut: qf,
                bounceOutIn: uc,
                circIn: Uf,
                circInOut: jf,
                circOut: xf,
                circOutIn: rc,
                constant: yf,
                cubicIn: Af,
                cubicInOut: Tf,
                cubicOut: Ef,
                cubicOutIn: Zf,
                elasticIn: Gf,
                elasticInOut: Vf,
                elasticOut: Hf,
                elasticOutIn: hc,
                expoIn: Lf,
                expoInOut: Ff,
                expoOut: Bf,
                expoOutIn: sc,
                fade: Jf,
                linear: _f,
                quadIn: mf,
                quadInOut: kf,
                quadOut: bf,
                quadOutIn: Qf,
                quartIn: Sf,
                quartInOut: If,
                quartOut: Of,
                quartOutIn: tc,
                quintIn: Rf,
                quintInOut: Cf,
                quintOut: Mf,
                quintOutIn: ic,
                sineIn: Nf,
                sineInOut: Df,
                sineOut: Pf,
                sineOutIn: nc,
                smooth: Kf
            });
            t1("ce", cc), t1("cD", {
                LINEAR: 0,
                CONSTANT: 1,
                QUAD_IN: 2,
                QUAD_OUT: 3,
                QUAD_IN_OUT: 4,
                QUAD_OUT_IN: 5,
                CUBIC_IN: 6,
                CUBIC_OUT: 7,
                CUBIC_IN_OUT: 8,
                CUBIC_OUT_IN: 9,
                QUART_IN: 10,
                QUART_OUT: 11,
                QUART_IN_OUT: 12,
                QUART_OUT_IN: 13,
                QUINT_IN: 14,
                QUINT_OUT: 15,
                QUINT_IN_OUT: 16,
                QUINT_OUT_IN: 17,
                SINE_IN: 18,
                SINE_OUT: 19,
                SINE_IN_OUT: 20,
                SINE_OUT_IN: 21,
                EXPO_IN: 22,
                EXPO_OUT: 23,
                EXPO_IN_OUT: 24,
                EXPO_OUT_IN: 25,
                CIRC_IN: 26,
                CIRC_OUT: 27,
                CIRC_IN_OUT: 28,
                CIRC_OUT_IN: 29,
                ELASTIC_IN: 30,
                ELASTIC_OUT: 31,
                ELASTIC_IN_OUT: 32,
                ELASTIC_OUT_IN: 33,
                BACK_IN: 34,
                BACK_OUT: 35,
                BACK_IN_OUT: 36,
                BACK_OUT_IN: 37,
                BOUNCE_IN: 38,
                BOUNCE_OUT: 39,
                BOUNCE_IN_OUT: 40,
                BOUNCE_OUT_IN: 41,
                SMOOTH: 42,
                FADE: 43
            });
            var ac, vc = ((fc = {})[1] = yf, fc[0] = _f, fc[2] = mf, fc[3] = bf, fc[4] = kf, fc[5] = Qf, fc[6] = Af, fc[7] = Ef, fc[8] = Tf, fc[9] = Zf, fc[10] = Sf, fc[11] = Of, fc[12] = If, fc[13] = tc, fc[14] = Rf, fc[15] = Mf, fc[16] = Cf, fc[17] = ic, fc[18] = Nf, fc[19] = Pf, fc[20] = Df, fc[21] = nc, fc[22] = Lf, fc[23] = Bf, fc[24] = Ff, fc[25] = sc, fc[26] = Uf, fc[27] = xf, fc[28] = jf, fc[29] = rc, fc[30] = Gf, fc[31] = Hf, fc[32] = Vf, fc[33] = hc, fc[34] = Wf, fc[35] = zf, fc[36] = $f, fc[37] = ec, fc[38] = Xf, fc[39] = qf, fc[40] = Yf, fc[41] = uc, fc[42] = Kf, fc[43] = Jf, fc);
            R(255), R(65280);
            var gc, pc = function(t1) {
                function i() {
                    var _$i;
                    return (_$i = t1.call(this) || this).value = 0, _$i.rightTangent = 0, _$i.rightTangentWeight = 0, _$i.leftTangent = 0, _$i.leftTangentWeight = 0, _$i.Qt = 0, _$i;
                }
                return h(i, t1), s(i, [
                    {
                        key: "interpolationMode",
                        get: function get() {
                            return 255 & this.Qt;
                        },
                        set: function set(t1) {
                            this.Qt &= -256, this.Qt |= t1;
                        }
                    },
                    {
                        key: "tangentWeightMode",
                        get: function get() {
                            return (65280 & this.Qt) >> 8;
                        },
                        set: function set(t1) {
                            this.Qt &= -65281, this.Qt |= t1 << 8;
                        }
                    },
                    {
                        key: "easingMethod",
                        get: function get() {
                            return (16711680 & this.Qt) >> 16;
                        },
                        set: function set(t1) {
                            this.Qt &= -16711681, this.Qt |= t1 << 16;
                        }
                    }
                ]), i;
            }(cf);
            function yc(t1) {
                var i = new pc;
                if ("number" == typeof t1) i.value = t1;
                else {
                    var n = t1.interpolationMode, s = t1.tangentWeightMode, _$r = t1.value, h = t1.rightTangent, e = t1.rightTangentWeight, u = t1.leftTangent, o = t1.leftTangentWeight, f = t1.easingMethod, _$c = t1[jh];
                    i.value = null != _$r ? _$r : i.value, i.rightTangent = null != h ? h : i.rightTangent, i.rightTangentWeight = null != e ? e : i.rightTangentWeight, i.leftTangent = null != u ? u : i.leftTangent, i.leftTangentWeight = null != o ? o : i.leftTangentWeight, i.interpolationMode = null != n ? n : i.interpolationMode, i.tangentWeightMode = null != s ? s : i.tangentWeightMode, i.easingMethod = null != f ? f : i.easingMethod, _$c && (i[jh] = _$c);
                }
                return i;
            }
            An.fastDefine("cc.RealKeyframeValue", pc, ((ac = {
                interpolationMode: 0,
                tangentWeightMode: 0,
                value: 0,
                rightTangent: 0,
                rightTangentWeight: 0,
                leftTangent: 0,
                leftTangentWeight: 0,
                easingMethod: 0
            })[jh] = void 0, ac)), An.Attr.setClassAttr(pc, jh, "editorOnly", !0), (null != (gc = pc[Io]) ? gc : pc[Io] = {}).uniquelyReferenced = !0;
            var _c = t1("b$", function(t1) {
                function i() {
                    var _$i;
                    return (_$i = t1.call(this) || this).preExtrapolation = 1, _$i.postExtrapolation = 1, _$i;
                }
                h(i, t1);
                var n = i.prototype;
                return n.evaluate = function(t1) {
                    var _$i = this._times, n = this._values, s = _$i.length;
                    if (0 === s) return 0;
                    var _$r = _$i[0], _$h = _$i[s - 1];
                    if (t1 < _$r) {
                        var t11, i, n1, s1, t12, i1, t13, i2, e = this.preExtrapolation, u = n[0];
                        if (1 === e || s < 2) return u.value;
                        switch(e){
                            case 0:
                                return t11 = _$r, i = n[0].value, n1 = _$i[1], s1 = n[1].value, i + (s1 - i) / (n1 - t11) * (t1 - t11);
                            case 2:
                                t12 = t1, t1 = (i1 = _$r) + Jn(t12 - i1, _$h - i1);
                                break;
                            case 3:
                                t13 = t1, t1 = (i2 = _$r) + Qn(t13 - i2, _$h - i2);
                                break;
                            default:
                                return u.value;
                        }
                    } else if (t1 > _$h) {
                        var t14, i3, n2, s2, t15, i4, t16, i5, o = this.postExtrapolation, f = n[s - 1];
                        if (1 === o || s < 2) return f.value;
                        switch(o){
                            case 0:
                                return t14 = _$h, i3 = f.value, n2 = _$i[s - 2], s2 = n[s - 2].value, i3 + (s2 - i3) / (n2 - t14) * (t1 - t14);
                            case 2:
                                t15 = t1, t1 = (i4 = _$r) + Jn(t15 - i4, _$h - i4);
                                break;
                            case 3:
                                t16 = t1, t1 = (i5 = _$r) + Qn(t16 - i5, _$h - i5);
                                break;
                            default:
                                return f.value;
                        }
                    }
                    var _$c = Zu(_$i, t1);
                    if (_$c >= 0) return n[_$c].value;
                    var a = ~_$c, v = a - 1, l = _$i[v], _$d = n[v], w = _$i[a];
                    return $c(l, _$d, w, n[a], (t1 - l) / (w - l));
                }, n.addKeyFrame = function(i, n) {
                    return t1.prototype.addKeyFrame.call(this, i, yc(n));
                }, n.assignSorted = function(t1, i) {
                    if (void 0 !== i) this.setKeyframes(t1.slice(), i.map(function(t1) {
                        return yc(t1);
                    }));
                    else {
                        var n = Array.from(t1);
                        this.setKeyframes(n.map(function(t1) {
                            return t1[0];
                        }), n.map(function(t1) {
                            return yc(t1[1]);
                        }));
                    }
                }, n.isConstant = function(t1) {
                    if (this._values.length <= 1) return !0;
                    var _$i = this._values[0].value;
                    return this._values.every(function(n) {
                        return Fn(n.value, _$i, t1);
                    });
                }, n[gf] = function(t1, i) {
                    if (i.toCCON) {
                        var n = this._times, s = this._values, _$r = n.length, _$h = new DataView(new ArrayBuffer(0 + kc + kc + Ac + Ec * _$r + jc * _$r)), e = 0;
                        _$h.setUint8(e, this.preExtrapolation), e += kc, _$h.setUint8(e, this.postExtrapolation), e += kc, _$h.setUint32(e, _$r, !0), e += Ac, n.forEach(function(t1, i) {
                            return _$h.setFloat32(e + Ec * i, t1, !0);
                        }), e += Ec * _$r;
                        for(var u, o = d(s); !(u = o()).done;)e = Gc(_$h, u.value, e);
                        var _$c = new Uint8Array(_$h.buffer, 0, e);
                        t1.writeProperty("bytes", _$c);
                        var a = s.map(function(t1) {
                            return t1[jh];
                        });
                        a.some(function(t1) {
                            return void 0 !== t1;
                        }) && t1.writeProperty("keyframeValueEditorExtras", a);
                    } else t1.writeThis();
                }, n[pf] = function(t1, i) {
                    if (i.fromCCON) {
                        var n = t1.readProperty("bytes"), s = new DataView(n.buffer, n.byteOffset, n.byteLength), _$r = 0;
                        this.preExtrapolation = s.getUint8(_$r), _$r += kc, this.postExtrapolation = s.getUint8(_$r), _$r += kc;
                        var _$h = s.getUint32(_$r, !0);
                        _$r += Ac;
                        var e = Array.from({
                            length: _$h
                        }, function(t1, i) {
                            return s.getFloat32(_$r + Ec * i, !0);
                        });
                        _$r += Ec * _$h;
                        for(var u = Array(_$h), o = 0; o < _$h; ++o){
                            var f = yc({});
                            _$r = Hc(s, f, _$r), u[o] = f;
                        }
                        n.byteLength;
                        var _$c = t1.readProperty("keyframeValueEditorExtras");
                        _$c && (_$c.length, _$c.forEach(function(t1, i) {
                            return u[i][jh] = t1;
                        })), this._times = e, this._values = u;
                    } else t1.readThis();
                }, i;
            }(to));
            An.fastDefine("cc.RealCurve", _c, {
                _times: [],
                _values: [],
                preExtrapolation: 1,
                postExtrapolation: 1
            });
            var kc = 1, Ac = 4, Ec = 4, Pc = yc({}), Dc = Pc.interpolationMode, Lc = Pc.tangentWeightMode, Bc = Pc.leftTangent, Fc = Pc.leftTangentWeight, Uc = Pc.rightTangent, xc = Pc.rightTangentWeight, jc = 26;
            function Gc(t1, i, n) {
                var s = 0, _$r = n, h = _$r;
                _$r += 4;
                var e = i.value, u = i.interpolationMode, o = i.tangentWeightMode, f = i.rightTangent, _$c = i.rightTangentWeight, a = i.leftTangent, v = i.leftTangentWeight, l = i.easingMethod;
                return t1.setFloat32(_$r, e, !0), _$r += 4, u !== Dc && (s |= 2, t1.setUint8(_$r, u), _$r += 1), o !== Lc && (s |= 4, t1.setUint8(_$r, o), _$r += 1), a !== Bc && (s |= 8, t1.setFloat32(_$r, a, !0), _$r += 4), v !== Fc && (s |= 16, t1.setFloat32(_$r, v, !0), _$r += 4), f !== Uc && (s |= 32, t1.setFloat32(_$r, f, !0), _$r += 4), _$c !== xc && (s |= 64, t1.setFloat32(_$r, _$c, !0), _$r += 4), s |= l << 8, t1.setUint32(h, s, !0), _$r;
            }
            function Hc(t1, i, n) {
                var s = n, _$r = t1.getUint32(s, !0);
                return s += 4, i.value = t1.getFloat32(s, !0), s += 4, 2 & _$r && (i.interpolationMode = t1.getUint8(s), s += 1), 4 & _$r && (i.tangentWeightMode = t1.getUint8(s), s += 1), 8 & _$r && (i.leftTangent = t1.getFloat32(s, !0), s += 4), 16 & _$r && (i.leftTangentWeight = t1.getFloat32(s, !0), s += 4), 32 & _$r && (i.rightTangent = t1.getFloat32(s, !0), s += 4), 64 & _$r && (i.rightTangentWeight = t1.getFloat32(s, !0), s += 4), i.easingMethod = (65280 & _$r) >> 8, s;
            }
            function $c(t1, i, n, s, r) {
                var h = n - t1;
                switch(i.interpolationMode){
                    default:
                    case 1:
                        return i.value;
                    case 0:
                        var e = 0 === i.easingMethod ? r : vc[i.easingMethod](r);
                        return jn(i.value, s.value, e);
                    case 2:
                        var u = 1 / 3, o = i.rightTangent, f = i.rightTangentWeight, _$c = !!(2 & i.tangentWeightMode), a = s.leftTangent, v = s.leftTangentWeight, l = !!(1 & s.tangentWeightMode);
                        if (_$c || l) {
                            var _$d = 0;
                            if (_$c) _$d = f;
                            else {
                                var g = h * o;
                                _$d = Math.sqrt(h * h + g * g) * u;
                            }
                            var p = Math.atan(o), _$y = Math.cos(p) * _$d + t1, _$_ = Math.sin(p) * _$d + i.value, m = 0;
                            if (l) m = v;
                            else {
                                var k = h * a;
                                m = Math.sqrt(h * h + k * k) * u;
                            }
                            var A = Math.atan(a), E = (_$y - t1) / h, T = (-Math.cos(A) * m + n - t1) / h, _$O = -Math.sin(A) * m + s.value, _$I = [
                                0,
                                0,
                                0
                            ], _$R = qc(_$I, no(0 - r, 3 * E, 3 * T - 6 * E, 3 * (E - T) + 1, _$I), r);
                            return Xc(i.value, _$_, _$O, s.value, _$R);
                        }
                        var _$M = i.value + u * o * h, _$C = s.value - u * a * h;
                        return Xc(i.value, _$M, _$C, s.value, r);
                }
            }
            function Xc(t1, i, n, s, r) {
                var h = 1 - r;
                return h * h * h * t1 + 3 * h * h * r * i + 3 * h * r * r * n + r * r * r * s;
            }
            function qc(t1, i, n) {
                var s = n;
                if (1 === i) s = t1[0];
                else {
                    s = -1 / 0;
                    for(var _$r = 0; _$r < i; ++_$r){
                        var h = t1[_$r];
                        h >= 0 && h <= 1 && h > s && (s = h);
                    }
                    s === -1 / 0 && (s = 0);
                }
                return s;
            }
            function Yc(t1, i, n, s, r) {
                var h = 1 - r;
                return h * (h * (t1 + (3 * i - t1) * r) + 3 * n * r * r) + s * r * r * r;
            }
            A.bezier = Yc;
            var Kc, Jc, Qc, Zc, ta, na, sa, ra, ha = Math.cos, ea = Math.acos, ua = Math.max, oa = 2 * Math.PI, fa = Math.sqrt;
            function ca(t1) {
                return t1 < 0 ? -Math.pow(-t1, 1 / 3) : Math.pow(t1, 1 / 3);
            }
            function aa(t1, i) {
                var n, s, _$r, h, e = i - 0, u = i - t1[0], o = 3 * e, f = 3 * u, _$c = 3 * (i - t1[2]), a = 1 / (-e + f - _$c + (i - 1)), v = 1 / 3, l = (o - 6 * u + _$c) * a, _$d = 1 / 3 * l, w = (-o + f) * a, g = 1 / 3 * (3 * w - l * l), p = 1 / 3 * g, _$y = (2 * l * l * l - 9 * l * w + e * a * 27) / 27, _$_ = _$y / 2, m = _$_ * _$_ + p * p * p;
                if (m < 0) {
                    var b = -g * v, k = fa(b * b * b), A = -_$y / (2 * k), E = ea(A < -1 ? -1 : A > 1 ? 1 : A), T = 2 * ca(k);
                    return s = T * ha(E * v) - _$d, _$r = T * ha((E + oa) * v) - _$d, h = T * ha((E + 2 * oa) * v) - _$d, s >= 0 && s <= 1 ? _$r >= 0 && _$r <= 1 ? h >= 0 && h <= 1 ? ua(s, _$r, h) : ua(s, _$r) : h >= 0 && h <= 1 ? ua(s, h) : s : _$r >= 0 && _$r <= 1 ? h >= 0 && h <= 1 ? ua(_$r, h) : _$r : h;
                }
                if (0 === m) return _$r = -(n = _$_ < 0 ? ca(-_$_) : -ca(_$_)) - _$d, (s = 2 * n - _$d) >= 0 && s <= 1 ? _$r >= 0 && _$r <= 1 ? ua(s, _$r) : s : _$r;
                var S = fa(m);
                return (n = ca(-_$_ + S)) - ca(_$_ + S) - _$d;
            }
            function va(t1, i) {
                var n = aa(t1, i), s = t1[1];
                return ((1 - n) * (s + (t1[3] - s) * n) * 3 + n * n) * n;
            }
            A.bezierByTime = va, t1("c4", {
                SLERP: 0,
                CONSTANT: 1
            });
            var la = go("cc.QuatKeyframeValue")(Kc = eo((Qc = ho((Jc = function Jc(t1) {
                var i = void 0 === t1 ? {} : t1, n = i.value, s = i.interpolationMode, _$r = i.easingMethod;
                this.interpolationMode = Qc && Qc(), this.value = Zc && Zc(), this.easingMethod = ta && ta(), this.value = n ? qs.clone(n) : this.value, this.interpolationMode = null != s ? s : this.interpolationMode, this.easingMethod = null != _$r ? _$r : this.easingMethod;
            }).prototype, "interpolationMode", [
                Ro
            ], function() {
                return 0;
            }), Zc = ho(Jc.prototype, "value", [
                Ro
            ], function() {
                return qs.clone(qs.IDENTITY);
            }), ta = ho(Jc.prototype, "easingMethod", [
                Ro
            ], function() {
                return 0;
            }), Kc = Jc)) || Kc) || Kc, wa, ga = t1("c3", go("cc.QuatCurve")((sa = ho((na = function(t1) {
                function i() {
                    var _$i;
                    return (_$i = t1.call(this) || this).preExtrapolation = sa && sa(), _$i.postExtrapolation = ra && ra(), _$i;
                }
                h(i, t1);
                var n = i.prototype;
                return n.evaluate = function(t1, i) {
                    null != i || (i = new qs);
                    var s = this._times, _$r = this._values, _$h = this.postExtrapolation, e = this.preExtrapolation, u = s.length;
                    if (0 === u) return i;
                    var o = s[0], f = s[u - 1];
                    if (t1 < o) {
                        var _$c = _$r[0];
                        switch(e){
                            case 2:
                                t1 = o + Jn(t1 - o, f - o);
                                break;
                            case 3:
                                t1 = o + Qn(t1 - o, f - o);
                                break;
                            default:
                                return qs.copy(i, _$c.value);
                        }
                    } else if (t1 > f) {
                        var a = _$r[u - 1];
                        switch(_$h){
                            case 2:
                                t1 = o + Jn(t1 - o, f - o);
                                break;
                            case 3:
                                t1 = o + Qn(t1 - o, f - o);
                                break;
                            default:
                                return qs.copy(i, a.value);
                        }
                    }
                    var v = Zu(s, t1);
                    if (v >= 0) return qs.copy(i, _$r[v].value);
                    var l = ~v, _$d = l - 1, w = s[_$d], g = _$r[_$d], p = s[l], _$y = _$r[l], _$_ = (t1 - w) / (p - w);
                    switch(g.interpolationMode){
                        default:
                        case 1:
                            return qs.copy(i, g.value);
                        case 0:
                            var m = g.easingMethod, b = 0 === m ? _$_ : Array.isArray(m) ? va(m, _$_) : vc[m](_$_);
                            return qs.slerp(i, g.value, _$y.value, b);
                    }
                }, n.addKeyFrame = function(i, n) {
                    var s = new la(n);
                    return t1.prototype.addKeyFrame.call(this, i, s);
                }, n.assignSorted = function(t1, i) {
                    if (void 0 !== i) this.setKeyframes(t1.slice(), i.map(function(t1) {
                        return new la(t1);
                    }));
                    else {
                        var n = Array.from(t1);
                        this.setKeyframes(n.map(function(t1) {
                            return t1[0];
                        }), n.map(function(t1) {
                            return new la(t1[1]);
                        }));
                    }
                }, n[gf] = function(t1, i) {
                    if (i.toCCON) {
                        var n = this._times, s = this._values, _$r = !0;
                        s.forEach(function(t1, i, n) {
                            var s = n[0];
                            _$r && t1.interpolationMode !== s.interpolationMode && (_$r = !1);
                        });
                        var _$h = n.length, e = ba * (_$r ? 1 : _$h), f = new DataView(new ArrayBuffer(0 + (pa + ya + _a * _$h + 4 * ma * _$h + s.reduce(function(t1, i) {
                            return t1 + (Array.isArray(i.easingMethod) ? ka + 4 * Ea : ka);
                        }, 0) + e + 0))), _$c = 0, a = 0;
                        _$r && (a |= 1), f.setUint32(_$c, a, !0), _$c += pa, f.setUint32(_$c, _$h, !0), _$c += ya, n.forEach(function(t1, i) {
                            return f.setFloat32(_$c + _a * i, t1, !0);
                        }), _$c += _a * _$h, s.forEach(function(t1, i) {
                            var n = t1.value, s = n.x, _$r = n.y, _$h = n.z, e = n.w, u = _$c + 4 * ma * i;
                            f.setFloat32(u + 0 * ma, s, !0), f.setFloat32(u + +ma, _$r, !0), f.setFloat32(u + 2 * ma, _$h, !0), f.setFloat32(u + 3 * ma, e, !0);
                        }), _$c += 4 * ma * _$h, s.forEach(function(t1) {
                            var _$i = t1.easingMethod;
                            Array.isArray(_$i) ? (f.setUint8(_$c, Aa), ++_$c, f.setFloat32(_$c + 0 * Ea, _$i[0], !0), f.setFloat32(_$c + +Ea, _$i[1], !0), f.setFloat32(_$c + 2 * Ea, _$i[2], !0), f.setFloat32(_$c + 3 * Ea, _$i[3], !0), _$c += 4 * Ea) : (f.setUint8(_$c, _$i), ++_$c);
                        });
                        var v = _$c;
                        _$c += e;
                        var l = v;
                        s.forEach(function(t1) {
                            var _$i = t1.interpolationMode;
                            f.setUint8(l, _$i), _$r || (l += ba);
                        });
                        var _$d = new Uint8Array(f.buffer);
                        t1.writeProperty("bytes", _$d);
                    } else t1.writeThis();
                }, n[pf] = function(t1, i) {
                    if (i.fromCCON) {
                        var n = t1.readProperty("bytes"), s = new DataView(n.buffer, n.byteOffset, n.byteLength), _$r = 0, _$h = s.getUint32(_$r, !0);
                        _$r += pa;
                        var u = s.getUint32(_$r, !0);
                        _$r += ya;
                        var o = Array.from({
                            length: u
                        }, function(t1, i) {
                            return s.getFloat32(_$r + _a * i, !0);
                        }), f = _$r += _a * u;
                        _$r += 4 * ma * u;
                        var _$c = Array.from({
                            length: u
                        }, function(t1, i) {
                            var n = f + 4 * ma * i, _$h = s.getFloat32(n + 0 * ma, !0), e = s.getFloat32(n + +ma, !0), u = s.getFloat32(n + 2 * ma, !0), o = s.getFloat32(n + 3 * ma, !0), _$c = s.getUint8(_$r);
                            ++_$r;
                            var a = new la({
                                value: {
                                    x: _$h,
                                    y: e,
                                    z: u,
                                    w: o
                                }
                            });
                            return _$c !== Aa ? a.easingMethod = _$c : (a.easingMethod = [
                                s.getFloat32(_$r + 0 * Ea, !0),
                                s.getFloat32(_$r + +Ea, !0),
                                s.getFloat32(_$r + 2 * Ea, !0),
                                s.getFloat32(_$r + 3 * Ea, !0)
                            ], _$r += 4 * Ea), a;
                        });
                        if (1 & _$h) {
                            var a = s.getUint8(_$r);
                            ++_$r;
                            for(var v = 0; v < u; ++v)_$c[v].interpolationMode = a;
                        } else {
                            for(var l = 0; l < u; ++l){
                                var _$d = s.getUint8(_$r + l);
                                _$c[l].interpolationMode = _$d;
                            }
                            _$r += u;
                        }
                        this._times = o, this._values = _$c;
                    } else t1.readThis();
                }, i;
            }(to)).prototype, "preExtrapolation", [
                Ro
            ], function() {
                return 1;
            }), ra = ho(na.prototype, "postExtrapolation", [
                Ro
            ], function() {
                return 1;
            }), na)) || na), pa = 1, ya = 4, _a = 4, ma = 4, ba = 1, ka = 1, Aa = 255, Ea = 4, Ta = t1("c5", go("cc.ObjectCurve")(wa = function(t1) {
                function i() {
                    return t1.apply(this, arguments) || this;
                }
                return h(i, t1), i.prototype.evaluate = function(t1) {
                    var _$i = this.searchKeyframe(t1);
                    if (_$i >= 0) return this._values[_$i];
                    var n = Un(~_$i - 1, 0, this._values.length - 1);
                    return this._values[n];
                }, i;
            }(to)) || wa), Sa = {
                Blend: 0,
                Fixed: 1
            };
            gi(Sa);
            var Oa = t1("c6", function() {
                this.color = Yr.WHITE.clone(), this.time = 0;
            });
            An.fastDefine("cc.ColorKey", Oa, {
                color: Yr.WHITE.clone(),
                time: 0
            }), An.Attr.setClassAttr(Oa, "color", "visible", !0), An.Attr.setClassAttr(Oa, "time", "visible", !0);
            var Ia = t1("c7", function() {
                this.alpha = 1, this.time = 0;
            });
            An.fastDefine("cc.AlphaKey", Ia, {
                alpha: 1,
                time: 0
            }), An.Attr.setClassAttr(Ia, "alpha", "visible", !0), An.Attr.setClassAttr(Ia, "time", "visible", !0);
            var Ra = t1("c8", function() {
                function t1() {
                    this.colorKeys = [], this.alphaKeys = [], this.mode = 0;
                }
                var i = t1.prototype;
                return i.setKeys = function(t1, i) {
                    this.colorKeys = t1, this.alphaKeys = i;
                }, i.sortKeys = function() {
                    this.colorKeys.length > 1 && this.colorKeys.sort(function(t1, i) {
                        return t1.time - i.time;
                    }), this.alphaKeys.length > 1 && this.alphaKeys.sort(function(t1, i) {
                        return t1.time - i.time;
                    });
                }, i.evaluate = function(t1) {
                    return this.evaluateFast(new Yr, t1);
                }, i.evaluateFast = function(t1, i) {
                    return this.Zt(t1, i), t1.a = this.ti(i), t1;
                }, i.randomColor = function() {
                    return this.getRandomColor(new Yr);
                }, i.getRandomColor = function(t1) {
                    var i = this.colorKeys[Math.trunc(Vn() * this.colorKeys.length)], n = this.alphaKeys[Math.trunc(Vn() * this.alphaKeys.length)];
                    return t1.set(i.color), t1.a = n.alpha, t1;
                }, i.Zt = function(t1, i) {
                    var n = this.colorKeys, s = n.length;
                    if (s > 1) {
                        i = Jn(i, 1 + Ln);
                        for(var _$r = 1; _$r < s; ++_$r){
                            var h = n[_$r - 1].time, e = n[_$r].time;
                            if (i >= h && i < e) {
                                if (1 === this.mode) return Yr.copy(t1, n[_$r].color), t1;
                                var u = (i - h) / (e - h);
                                return Yr.lerp(t1, n[_$r - 1].color, n[_$r].color, u), t1;
                            }
                        }
                        var o = s - 1;
                        Fn(i, n[o].time, Ln) ? Yr.copy(t1, n[o].color) : i < n[0].time ? Yr.lerp(t1, Yr.BLACK, n[0].color, i / n[0].time) : i > n[o].time && Yr.lerp(t1, n[o].color, Yr.BLACK, (i - n[o].time) / (1 - n[o].time));
                    } else 1 === s ? Yr.copy(t1, n[0].color) : Yr.copy(t1, Yr.WHITE);
                    return t1;
                }, i.ti = function(t1) {
                    var i = this.alphaKeys, n = i.length;
                    if (n > 1) {
                        t1 = Jn(t1, 1 + Ln);
                        for(var s = 1; s < n; ++s){
                            var _$r = i[s - 1].time, h = i[s].time;
                            if (t1 >= _$r && t1 < h) {
                                if (1 === this.mode) return i[s].alpha;
                                var e = (t1 - _$r) / (h - _$r);
                                return jn(i[s - 1].alpha, i[s].alpha, e);
                            }
                        }
                        var u = n - 1;
                        return Fn(t1, i[u].time, Ln) ? i[u].alpha : t1 < i[0].time ? jn(0, i[0].alpha, t1 / i[0].time) : t1 > i[u].time ? jn(i[u].alpha, 0, (t1 - i[u].time) / (1 - i[u].time)) : 255;
                    }
                    return 1 === n ? i[0].alpha : 255;
                }, t1;
            }());
            Ra.Mode = Sa, An.fastDefine("cc.Gradient", Ra, {
                colorKeys: [],
                alphaKeys: [],
                mode: 0
            }), An.Attr.setClassAttr(Ra, "colorKeys", "visible", !0), An.Attr.setClassAttr(Ra, "alphaKeys", "visible", !0), An.Attr.setClassAttr(Ra, "mode", "visible", !0);
            var Ma = function Ma() {
                this.time = 0, this.value = 0, this.inTangent = 0, this.outTangent = 0;
            };
            An.fastDefine("cc.Keyframe", Ma, {
                time: 0,
                value: 0,
                inTangent: 0,
                outTangent: 0
            });
            var Ca = function() {
                function t1() {
                    this.index = void 0, this.time = void 0, this.endTime = void 0, this.coefficient = void 0, this.index = -1, this.time = 0, this.endTime = 0, this.coefficient = new Float32Array(4);
                }
                return t1.prototype.evaluate = function(t1) {
                    return Na(t1 - this.time, this.coefficient);
                }, t1;
            }();
            function Na(t1, i) {
                return t1 * (t1 * (t1 * i[0] + i[1]) + i[2]) + i[3];
            }
            var Pa = function() {
                function t1(t1) {
                    if (void 0 === t1 && (t1 = null), this._curve = void 0, this.ii = void 0, _instanceof(t1, _c)) this._curve = t1;
                    else {
                        var i = new _c;
                        this._curve = i, i.preExtrapolation = 2, i.postExtrapolation = 1, t1 ? i.assignSorted(t1.map(function(t1) {
                            return [
                                t1.time,
                                {
                                    interpolationMode: 2,
                                    value: t1.value,
                                    leftTangent: t1.inTangent,
                                    rightTangent: t1.outTangent
                                }
                            ];
                        })) : i.assignSorted([
                            [
                                0,
                                {
                                    interpolationMode: 2,
                                    value: 1
                                }
                            ],
                            [
                                1,
                                {
                                    interpolationMode: 2,
                                    value: 1
                                }
                            ]
                        ]);
                    }
                    this.ii = new Ca;
                }
                var i = t1.prototype;
                return i.addKey = function(t1) {
                    t1 ? this._curve.addKeyFrame(t1.time, {
                        interpolationMode: 2,
                        value: t1.value,
                        leftTangent: t1.inTangent,
                        rightTangent: t1.outTangent
                    }) : this._curve.clear();
                }, i.evaluate_slow = function(t1) {
                    return this._curve.evaluate(t1);
                }, i.evaluate = function(t1) {
                    var i = this.ii, n = this._curve, _$s = n.keyFramesCount - 1, _$r = t1, h = t1 < 0 ? n.preExtrapolation : n.postExtrapolation, e = n.getKeyframeTime(0), u = n.getKeyframeTime(_$s);
                    switch(h){
                        case 2:
                            _$r = Jn(t1 - e, u - e) + e;
                            break;
                        case 3:
                            _$r = Qn(t1 - e, u - e) + e;
                            break;
                        default:
                            _$r = Un(t1, e, u);
                    }
                    if (_$r >= i.time && _$r < i.endTime) return i.evaluate(_$r);
                    var o = this.ni(i, _$r), f = Math.min(o + 1, _$s);
                    return this.calcOptimizedKey(i, o, f), i.evaluate(_$r);
                }, i.calcOptimizedKey = function(t1, i, n) {
                    var _$s = this._curve.getKeyframeTime(i), _$r = this._curve.getKeyframeTime(n), h = this._curve.getKeyframeValue(i), e = h.value, u = h.leftTangent, o = this._curve.getKeyframeValue(n), f = o.value, _$c = o.rightTangent;
                    t1.index = i, t1.time = _$s, t1.endTime = _$r;
                    var a = _$r - _$s, v = f - e, l = 1 / (a * a), _$d = u * a, w = _$c * a;
                    t1.coefficient[0] = (_$d + w - v - v) * l / a, t1.coefficient[1] = (v + v + v - _$d - _$d - w) * l, t1.coefficient[2] = u, t1.coefficient[3] = e;
                }, i.ni = function(t1, i) {
                    var n = this._curve, _$s = n.keyFramesCount, _$r = t1.index;
                    if (-1 !== _$r) if (i > n.getKeyframeTime(_$r)) for(var h = 0; h < 3; h++){
                        var e = _$r + h;
                        if (e + 1 < _$s && n.getKeyframeTime(e + 1) > i) return e;
                    }
                    else for(var u = 0; u < 3; u++){
                        var o = _$r - u;
                        if (o >= 0 && n.getKeyframeTime(o - 1) <= i) return o - 1;
                    }
                    for(var f, _$c = 0, a = _$s; a - _$c > 1;)f = Math.floor((_$c + a) / 2), n.getKeyframeTime(f) >= i ? a = f : _$c = f;
                    return _$c;
                }, s(t1, [
                    {
                        key: "_internalCurve",
                        get: function get() {
                            return this._curve;
                        }
                    },
                    {
                        key: "keyFrames",
                        get: function get() {
                            return Array.from(this._curve.keyframes()).map(function(t1) {
                                var i = t1[0], n = t1[1], _$s = new Ma;
                                return _$s.time = i, _$s.value = n.value, _$s.inTangent = n.leftTangent, _$s.outTangent = n.rightTangent, _$s;
                            });
                        },
                        set: function set(t1) {
                            this._curve.assignSorted(t1.map(function(t1) {
                                return [
                                    t1.time,
                                    {
                                        interpolationMode: 2,
                                        value: t1.value,
                                        leftTangent: t1.inTangent,
                                        rightTangent: t1.outTangent
                                    }
                                ];
                            }));
                        }
                    },
                    {
                        key: "preWrapMode",
                        get: function get() {
                            return La(this._curve.preExtrapolation);
                        },
                        set: function set(t1) {
                            this._curve.preExtrapolation = Da(t1);
                        }
                    },
                    {
                        key: "postWrapMode",
                        get: function get() {
                            return La(this._curve.postExtrapolation);
                        },
                        set: function set(t1) {
                            this._curve.postExtrapolation = Da(t1);
                        }
                    }
                ]), t1;
            }();
            function Da(t1) {
                switch(t1){
                    default:
                    case 0:
                    case 1:
                    case 8:
                        return 1;
                    case 22:
                        return 3;
                    case 2:
                        return 2;
                }
            }
            function La(t1) {
                switch(t1){
                    default:
                    case 0:
                    case 1:
                        return 8;
                    case 3:
                        return 22;
                    case 2:
                        return 2;
                }
            }
            Pa.si = [
                {
                    time: 0,
                    value: 1,
                    inTangent: 0,
                    outTangent: 0
                },
                {
                    time: 1,
                    value: 1,
                    inTangent: 0,
                    outTangent: 0
                }
            ], An.fastDefine("cc.AnimationCurve", Pa, {
                _curve: null
            });
            var Ba = Ss.multiplyScalar, Fa = Ss.add, xa = Os(), ja = Os(), Ga = Os(), Ha = Os(), Va = function() {
                function t1(t1, i) {
                    void 0 === t1 && (t1 = 2), void 0 === i && (i = []), this.U = void 0, this.ri = [], this.U = 1024, this.hi = t1;
                    for(var n = 0; n < i.length; n++)this.ri[n] = Os(i[n]);
                }
                t1.create = function(i, n) {
                    return void 0 === n && (n = []), new t1(i, n);
                }, t1.clone = function(i) {
                    return new t1(i.mode, i.knots);
                }, t1.copy = function(t1, i) {
                    t1.hi = i.mode, t1.ri.length = 0;
                    for(var n = i.knots, _$s = n.length, _$r = 0; _$r < _$s; _$r++)t1.ri[_$r] = Os(n[_$r]);
                    return t1;
                };
                var i = t1.prototype;
                return i.setModeAndKnots = function(t1, i) {
                    this.hi = t1, this.ri.length = 0;
                    for(var n = 0; n < i.length; n++)this.ri[n] = Os(i[n]);
                }, i.clearKnots = function() {
                    this.ri.length = 0;
                }, i.getKnotCount = function() {
                    return this.ri.length;
                }, i.addKnot = function(t1) {
                    this.ri.push(Os(t1));
                }, i.insertKnot = function(t1, i) {
                    var n = Os(i);
                    t1 >= this.ri.length ? this.ri.push(n) : this.ri.splice(t1, 0, n);
                }, i.removeKnot = function(t1) {
                    di(this.ri, t1), this.ri.splice(t1, 1);
                }, i.setKnot = function(t1, i) {
                    di(this.ri, t1), this.ri[t1].set(i);
                }, i.getKnot = function(t1) {
                    return di(this.ri, t1), this.ri[t1];
                }, i.getPoint = function(i, n) {
                    void 0 === n && (n = 4294967295), i = Un(i, 0, 1);
                    var _$s = this.ei();
                    if (0 === _$s) return Os();
                    if (4294967295 === n) {
                        var _$r = 1 / _$s;
                        n = Math.floor(i / _$r), i = i % _$r / _$r;
                    }
                    var h = this.ri;
                    if (n >= _$s) return Os(h[h.length - 1]);
                    switch(this.hi){
                        case 0:
                            return t1.ui(h[n], h[n + 1], i);
                        case 1:
                            var e = 4 * n;
                            return t1.oi(h[e], h[e + 1], h[e + 2], h[e + 3], i);
                        case 2:
                            var u = n > 0 ? h[n - 1] : h[n], o = n + 2 < h.length ? h[n + 2] : h[n + 1];
                            return t1.fi(u, h[n], h[n + 1], o, i);
                        default:
                            return Os();
                    }
                }, i.getPoints = function(t1, i) {
                    if (void 0 === i && (i = 4294967295), 0 === t1) return [];
                    if (1 === t1) return [
                        this.getPoint(0, i)
                    ];
                    for(var n = [], _$s = 1 / (t1 - 1), _$r = 0; _$r < t1; _$r++){
                        var h = _$r * _$s, e = this.getPoint(h, i);
                        n.push(e);
                    }
                    return n;
                }, i.ei = function() {
                    var _$t = this.ri.length;
                    switch(this.hi){
                        case 0:
                        case 2:
                            return _$t < 2 ? (nt(14300), 0) : _$t - 1;
                        case 1:
                            return _$t < 4 || _$t % 4 != 0 ? (nt(14301), 0) : _$t / 4;
                        default:
                            return et(!1, 16407), 0;
                    }
                }, t1.ui = function(t1, i, n) {
                    var _$s = new Ss;
                    return Ba(xa, t1, 1 - n), Ba(ja, i, n), Fa(_$s, xa, ja), _$s;
                }, t1.oi = function(t1, i, n, s, r) {
                    var h = new Ss, e = 1 - r;
                    return Ba(xa, t1, e * e * e), Ba(ja, i, 3 * r * e * e), Ba(Ga, n, 3 * r * r * e), Ba(Ha, s, r * r * r), Fa(xa, xa, ja), Fa(Ga, Ga, Ha), Fa(h, xa, Ga), h;
                }, t1.fi = function(t1, i, n, s, r) {
                    var h = new Ss, e = r * r, u = e * r;
                    return Ba(xa, t1, -0.5 * u + e - .5 * r), Ba(ja, i, 1.5 * u - 2.5 * e + 1), Ba(Ga, n, -1.5 * u + 2 * e + .5 * r), Ba(Ha, s, .5 * u - .5 * e), Fa(xa, xa, ja), Fa(Ga, Ga, Ha), Fa(h, xa, Ga), h;
                }, s(t1, [
                    {
                        key: "type",
                        get: function get() {
                            return this.U;
                        }
                    },
                    {
                        key: "mode",
                        get: function get() {
                            return this.hi;
                        }
                    },
                    {
                        key: "knots",
                        get: function get() {
                            return this.ri;
                        }
                    }
                ]), t1;
            }(), Wa = Object.freeze({
                __proto__: null,
                AABB: Ie,
                AnimationCurve: Pa,
                Capsule: Re,
                ERaycastMode: {
                    ALL: 0,
                    CLOSEST: 1,
                    ANY: 2
                },
                Frustum: He,
                Keyframe: Ma,
                Line: mh,
                OBB: Qu,
                OptimizedKey: Ca,
                Plane: Th,
                Ray: Sh,
                Sphere: Ph,
                Spline: Va,
                SplineMode: {
                    LINEAR: 0,
                    BEZIER: 1,
                    CATMULL_ROM: 2
                },
                Triangle: Oh,
                WrapModeMask: {
                    Default: 0,
                    Normal: 1,
                    Loop: 2,
                    ShouldWrap: 4,
                    Clamp: 8,
                    PingPong: 22,
                    Reverse: 36
                },
                constructLegacyCurveAndConvert: function constructLegacyCurveAndConvert() {
                    var _$t = new _c;
                    return _$t.assignSorted([
                        [
                            0,
                            {
                                interpolationMode: 2,
                                value: 1
                            }
                        ],
                        [
                            1,
                            {
                                interpolationMode: 2,
                                value: 1
                            }
                        ]
                    ]), _$t;
                },
                distance: _h,
                enums: {
                    SHAPE_RAY: 1,
                    SHAPE_LINE: 2,
                    SHAPE_SPHERE: 4,
                    SHAPE_AABB: 8,
                    SHAPE_OBB: 16,
                    SHAPE_PLANE: 32,
                    SHAPE_TRIANGLE: 64,
                    SHAPE_FRUSTUM: 128,
                    SHAPE_FRUSTUM_ACCURATE: 256,
                    SHAPE_CAPSULE: 512,
                    SHAPE_SPLINE: 1024
                },
                evalOptCurve: Na,
                intersect: zu
            });
            t1("ak", Wa);
            var za = /(\.[^./?\\]*)(\?.*)?$/, $a = /((.*)(\/|\\|\\\\))?(.*?\..*$)?/, Xa = /[^./]+\/\.\.\//;
            function qa() {
                for(var _$t = "", i = arguments.length, n = Array(i), s = 0; s < i; s++)n[s] = arguments[s];
                return n.forEach(function(i) {
                    _$t = (_$t + ("" === _$t ? "" : "/") + i).replace(/(\/|\\\\)$/, "");
                }), _$t;
            }
            function Ya(t1) {
                var i = za.exec(t1);
                return i ? i[1] : "";
            }
            function Ka(t1) {
                if (t1) {
                    var i = t1.lastIndexOf(".");
                    if (-1 !== i) return t1.substring(0, i);
                }
                return t1;
            }
            function Ja(t1, i) {
                var n = t1.indexOf("?");
                n > 0 && (t1 = t1.substring(0, n));
                var s = /(\/|\\)([^/\\]+)$/g.exec(t1.replace(/(\/|\\)$/, ""));
                if (!s) return t1;
                var _$r = s[2];
                return i && t1.substring(t1.length - i.length).toLowerCase() === i.toLowerCase() ? _$r.substring(0, _$r.length - i.length) : _$r;
            }
            function Qa(t1) {
                var i = $a.exec(t1);
                return i ? i[2] : "";
            }
            function Za(t1, i) {
                i = i || "";
                var n = t1.indexOf("?"), s = "";
                return n > 0 && (s = t1.substring(n), t1 = t1.substring(0, n)), (n = t1.lastIndexOf(".")) < 0 ? t1 + i + s : t1.substring(0, n) + i + s;
            }
            function tv(t1, i, n) {
                if (0 === i.indexOf(".")) return Za(t1, i);
                var s = t1.indexOf("?"), _$r = "", h = n ? Ya(t1) : "";
                return s > 0 && (_$r = t1.substring(s), t1 = t1.substring(0, s)), s = (s = t1.lastIndexOf("/")) <= 0 ? 0 : s + 1, t1.substring(0, s) + i + h + _$r;
            }
            function iv(t1) {
                var i = t1 = String(t1);
                do i = t1, t1 = t1.replace(Xa, "");
                while (i.length !== t1.length);
                return t1;
            }
            function nv(t1) {
                return t1.replace(/[/\\]$/, "");
            }
            function sv() {
                return le.os === ue.WINDOWS ? "\\" : "/";
            }
            t1("bf", Object.freeze({
                __proto__: null,
                _normalize: iv,
                basename: Ja,
                changeBasename: tv,
                changeExtname: Za,
                dirname: Qa,
                extname: Ya,
                getSeperator: sv,
                join: qa,
                mainFileName: Ka,
                stripSep: nv
            }));
            var rv, hv, ev, uv, ov, fv = 10;
            t1("bh", rv), t1("bi", hv), t1("bj", ev);
            var cv = 0, av = new Map;
            uv = function uv(t1, i, n, s, r, h, e) {
                var u = av.get(h);
                u && u.logTimes > u.count && (r("'%s' is deprecated, please use '%s' instead. " + e, t1 + "." + i, n + "." + s), u.count++);
            }, t1("bh", rv = function rv(t1, i, n) {
                null != t1 && n.forEach(function(n) {
                    var s = cv++;
                    av.set(s, {
                        id: s,
                        count: 0,
                        logTimes: void 0 !== n.logTimes ? n.logTimes : fv
                    });
                    var _$r = null != n.target ? n.target : t1, h = null != n.newName ? n.newName : n.name, e = null != n.targetName ? n.targetName : i, u = _$r === t1, o = n.suggest ? "(" + n.suggest + ")" : "";
                    if (null != n.customFunction) t1[n.name] = function() {
                        var _$t;
                        return uv(i, n.name, e, h, W, s, o), (_$t = n.customFunction).call.apply(_$t, [
                            this
                        ].concat(Array.prototype.slice.call(arguments)));
                    };
                    else if (null != n.customSetter || null != n.customGetter) {
                        var f = null != n.customSetter, _$c = null != n.customGetter;
                        f && _$c ? Object.defineProperty(t1, n.name, {
                            get: function get() {
                                return uv(i, n.name, e, h, W, s, o), n.customGetter.call(this);
                            },
                            set: function set(t1) {
                                uv(i, n.name, e, h, W, s, o), n.customSetter.call(this, t1);
                            },
                            enumerable: !1
                        }) : f ? Object.defineProperty(t1, n.name, {
                            set: function set(t1) {
                                uv(i, n.name, e, h, W, s, o), n.customSetter.call(this, t1);
                            },
                            enumerable: !1
                        }) : _$c && Object.defineProperty(t1, n.name, {
                            get: function get() {
                                return uv(i, n.name, e, h, W, s, o), n.customGetter.call(this);
                            },
                            enumerable: !1
                        });
                    } else Object.defineProperty(t1, n.name, {
                        get: function get() {
                            return uv(i, n.name, e, h, W, s, o), u ? this[h] : _$r[h];
                        },
                        set: function set(t1) {
                            uv(i, n.name, e, h, W, s, o), u ? this[h] = t1 : _$r[h] = t1;
                        },
                        enumerable: !1
                    });
                });
            }), ov = function ov(t1, i, n, s, r) {
                var h = av.get(s);
                h && h.logTimes > h.count && (n("'%s' has been removed. " + r, t1 + "." + i), h.count++);
            }, t1("bi", hv = function hv(t1, i, n) {
                null != t1 && n.forEach(function(n) {
                    var s = cv++;
                    av.set(s, {
                        id: s,
                        count: 0,
                        logTimes: void 0 !== n.logTimes ? n.logTimes : fv
                    });
                    var _$r = n.suggest ? "(" + n.suggest + ")" : "";
                    Object.defineProperty(t1, n.name, {
                        get: function get() {
                            return ov(i, n.name, z, s, _$r);
                        },
                        set: function set() {
                            ov(i, n.name, z, s, _$r);
                        },
                        enumerable: !1
                    });
                });
            }), t1("bj", ev = function ev() {});
            var vv, lv = {};
            function dv(t1) {
                var i = lv[t1];
                if (i) {
                    var n = i.newName, s = i.since;
                    i.removed ? n ? rt(16003, t1, s, n) : rt(16002, t1, s) : n ? nt(16001, t1, s, n) : nt(16e3, t1, s);
                }
            }
            var wv = new Ss;
            function gv(t1, i, n, s) {
                s || (s = new Ss), t1.convertToUINode(i, n, s);
                var _$r = n.position;
                return s.add(_$r), s;
            }
            function pv(t1, i, n) {
                return n || (n = new Ss), t1.worldToScreen(i, n), n.x /= A.view.getScaleX(), n.y /= A.view.getScaleY(), n;
            }
            A.pipelineUtils = t1("bp", {
                WorldNode3DToLocalNodeUI: gv,
                WorldNode3DToWorldNodeUI: pv
            }), rv(A.pipelineUtils, "cc.pipelineUtils", [
                {
                    name: "WorldNode3DToLocalNodeUI",
                    newName: "convertToUINode",
                    targetName: "cc.Camera.prototype",
                    customFunction: function customFunction() {
                        for(var _$t = arguments.length, i = Array(_$t), n = 0; n < _$t; n++)i[n] = arguments[n];
                        var s = i[0], _$r = i[3] || wv;
                        return s.convertToUINode(i[1], i[2], _$r), _$r.add(i[2].position), i[3] || _$r.clone();
                    }
                }
            ]), t1("cc", {
                LOW: 0,
                MEDIUM: 100,
                HIGH: 200,
                SCHEDULER: 2147483648
            });
            var _v = t1("cd", function() {
                function t1() {
                    this._id = "", this._priority = 0, this._executeInEditMode = !1;
                }
                t1.sortByPriority = function(t1, i) {
                    return t1._priority < i._priority ? 1 : t1._priority > i.priority ? -1 : 0;
                };
                var i = t1.prototype;
                return i.init = function() {}, i.update = function() {}, i.postUpdate = function() {}, i.destroy = function() {}, s(t1, [
                    {
                        key: "priority",
                        get: function get() {
                            return this._priority;
                        },
                        set: function set(t1) {
                            this._priority = t1;
                        }
                    },
                    {
                        key: "id",
                        get: function get() {
                            return this._id;
                        },
                        set: function set(t1) {
                            this._id = t1;
                        }
                    }
                ]), t1;
            }());
            _v.Priority = gi({
                LOW: 0,
                MEDIUM: 100,
                HIGH: 200,
                SCHEDULER: 2147483648
            });
            var mv = new lt("Scheduler"), bv = function() {
                function t1(t1, i, n, s) {
                    this.ci = void 0, this.ai = void 0, this.li = void 0, this.di = void 0, this.ci = t1, this.ai = i, this.li = n, this.di = s;
                }
                return t1.wi = function(i, n, s, r) {
                    var h = t1.gi.pop();
                    return h ? (h.ci = i, h.ai = n, h.li = s, h.di = r) : h = new t1(i, n, s, r), h;
                }, t1.pi = function(i) {
                    t1.gi.length < 20 && (i.ci = null, t1.gi.push(i));
                }, t1;
            }();
            bv.gi = [];
            var kv = function() {
                function t1(t1, i, n, s) {
                    this.yi = void 0, this._i = void 0, this.ci = void 0, this.mi = void 0, this.yi = t1, this._i = i, this.ci = n, this.mi = s;
                }
                return t1.wi = function(i, n, s, r) {
                    var h = t1.bi.pop();
                    return h ? (h.yi = i, h._i = n, h.ci = s, h.mi = r) : h = new t1(i, n, s, r), h;
                }, t1.pi = function(i) {
                    t1.bi.length < 20 && (i.yi = i._i = i.ci = i.mi = null, t1.bi.push(i));
                }, t1;
            }();
            kv.bi = [];
            var Av = function() {
                function t1(t1, i, n, s, r, h) {
                    this.ki = void 0, this.ci = void 0, this.Ai = void 0, this.Ei = void 0, this.Ti = void 0, this.li = void 0, this.ki = t1, this.ci = i, this.Ai = n, this.Ei = s, this.Ti = r, this.li = h;
                }
                return t1.wi = function(i, n, s, r, h, e) {
                    var u = t1.Si.pop();
                    return u ? (u.ki = i, u.ci = n, u.Ai = s, u.Ei = r, u.Ti = h, u.li = e) : u = new t1(i, n, s, r, h, e), u;
                }, t1.pi = function(i) {
                    t1.Si.length < 20 && (i.ki = i.ci = i.Ei = null, t1.Si.push(i));
                }, t1;
            }();
            Av.Si = [];
            var Ev = function() {
                function t1() {
                    this.Oi = void 0, this.Ii = void 0, this.Ri = void 0, this.Mi = void 0, this.Ci = void 0, this.Ni = void 0, this.Pi = void 0, this.Di = void 0, this.Li = void 0, this.Bi = void 0, this.Fi = void 0, this.Oi = !1, this.Ii = null, this.Ri = -1, this.Mi = !1, this.Ci = !1, this.Ni = 0, this.Pi = 0, this.Di = 0, this.Li = 0, this.Bi = null;
                }
                t1.wi = function() {
                    return t1.Ui.pop() || new t1;
                }, t1.pi = function(i) {
                    t1.Ui.length < 20 && !i.Oi && (i.Ii = i.Bi = i.Fi = null, t1.Ui.push(i));
                };
                var i = t1.prototype;
                return i.xi = function(t1, i, n, s, r, h) {
                    return this.Oi = !1, this.Ii = t1, this.Bi = n, this.Fi = i, this.Ni = 0, this.Ri = -1, this.Li = s, this.Di = h, this.Ci = this.Di > 0, this.Pi = r, this.Mi = this.Pi === A.macro.REPEAT_FOREVER, !0;
                }, i.ji = function() {
                    return this.Li;
                }, i.Gi = function(t1) {
                    this.Li = t1;
                }, i.Hi = function(t1) {
                    -1 === this.Ri ? (this.Ri = 0, this.Ni = 0) : (this.Ri += t1, this.Mi && !this.Ci ? this.Ri >= this.Li && (this.Vi(), this.Ri = 0) : (this.Ci ? this.Ri >= this.Di && (this.Vi(), this.Ri -= this.Di, this.Ni += 1, this.Ci = !1) : this.Ri >= this.Li && (this.Vi(), this.Ri = 0, this.Ni += 1), this.Fi && !this.Mi && this.Ni > this.Pi && this.Wi()));
                }, i.zi = function() {
                    return this.Fi;
                }, i.Vi = function() {
                    this.Bi && this.Fi && (this.Oi = !0, this.Fi.call(this.Bi, this.Ri), this.Oi = !1);
                }, i.Wi = function() {
                    this.Ii && this.Fi && this.Bi && this.Ii.$i(this, this.Bi);
                }, t1;
            }();
            Ev.Ui = [];
            var Tv = t1("b_", function(t1) {
                function i() {
                    var _$i;
                    return (_$i = t1.call(this) || this).Xi = void 0, _$i.qi = void 0, _$i.Yi = void 0, _$i.Ki = void 0, _$i.Ji = void 0, _$i.Qi = void 0, _$i.Zi = void 0, _$i.tn = void 0, _$i.nn = void 0, _$i.sn = void 0, _$i.Xi = 1, _$i.qi = [], _$i.Yi = [], _$i.Ki = [], _$i.Ji = St(!0), _$i.Qi = St(!0), _$i.Zi = null, _$i.tn = !1, _$i.nn = !1, _$i.sn = [], _$i;
                }
                h(i, t1), i.enableForTarget = function(t1) {
                    var _$i = !1;
                    (t1.uuid || t1.id) && (_$i = !0), _$i || (t1.id = mv.getNewId());
                };
                var n = i.prototype;
                return n.setTimeScale = function(t1) {
                    this.Xi = t1;
                }, n.getTimeScale = function() {
                    return this.Xi;
                }, n.update = function(t1) {
                    for(this.nn = !0, 1 !== this.Xi && (t1 *= this.Xi), _$i = 0, s = (n = this.qi).length; _$i < s; _$i++)(_$r = n[_$i]).li || _$r.di || !_$r.ci || null == _$r.ci.update || _$r.ci.update(t1);
                    for(_$i = 0, s = (n = this.Yi).length; _$i < s; _$i++)(_$r = n[_$i]).li || _$r.di || !_$r.ci || null == _$r.ci.update || _$r.ci.update(t1);
                    for(_$i = 0, s = (n = this.Ki).length; _$i < s; _$i++)(_$r = n[_$i]).li || _$r.di || !_$r.ci || null == _$r.ci.update || _$r.ci.update(t1);
                    var _$i, n, s, _$r, _$h, u, e = this.sn;
                    for(_$i = 0; _$i < e.length; _$i++){
                        if (_$h = e[_$i], this.Zi = _$h, this.tn = !1, !_$h.li && _$h.ki) for(_$h.Ai = 0; _$h.Ai < _$h.ki.length; ++_$h.Ai)_$h.Ei = _$h.ki[_$h.Ai], _$h.Ti = !1, _$h.Ei.Hi(t1), _$h.Ei = null;
                        this.tn && 0 === (null == (u = this.Zi.ki) ? void 0 : u.length) && (this.rn(this.Zi), --_$i);
                    }
                    for(_$i = 0, n = this.qi; _$i < n.length;)(_$r = n[_$i]).di ? this.hn(_$r) : _$i++;
                    for(_$i = 0, n = this.Yi; _$i < n.length;)(_$r = n[_$i]).di ? this.hn(_$r) : _$i++;
                    for(_$i = 0, n = this.Ki; _$i < n.length;)(_$r = n[_$i]).di ? this.hn(_$r) : _$i++;
                    this.nn = !1, this.Zi = null;
                }, n.schedule = function(t1, i, n, s, r, h) {
                    "function" != typeof t1 ? (nt(1514), o = i, f = t1) : (o = t1, f = i), 3 != arguments.length && 4 != arguments.length && 5 != arguments.length || (h = !!s, s = A.macro.REPEAT_FOREVER, r = 0), et(!!f, 1502);
                    var _$c = f.uuid || f.id;
                    if (_$c) {
                        var e, u, o, f, a, v, l = this.Qi[_$c];
                        if (l ? l.li !== h && nt(1511) : (l = Av.wi(null, f, 0, null, !1, !!h), this.sn.push(l), this.Qi[_$c] = l), null == l.ki) l.ki = [];
                        else for(v = 0; v < l.ki.length; ++v)if ((a = l.ki[v]) && o === a.zi()) return Q(1507, a.ji(), n), void a.Gi(n);
                        (a = Ev.wi()).xi(this, o, f, n, null != (e = s) ? e : 0, null != (u = r) ? u : 0), l.ki.push(a), this.Zi === l && this.tn && (this.tn = !1);
                    } else rt(1510);
                }, n.scheduleUpdate = function(t1, i, n) {
                    var s = t1.uuid || t1.id;
                    if (s) {
                        var _$r = this.Ji[s];
                        if (_$r && _$r._i) {
                            if (_$r._i.ai === i) return _$r._i.di = !1, void (_$r._i.li = n);
                            if (this.nn) return Q(1506), _$r._i.di = !1, void (_$r._i.li = n);
                            this.unscheduleUpdate(t1);
                        }
                        var _$h, e = bv.wi(t1, i, n, !1);
                        0 === i ? (_$h = this.Yi, this.en(_$h, e)) : (_$h = i < 0 ? this.qi : this.Ki, this.un(_$h, e, i)), this.Ji[s] = kv.wi(_$h, e, t1, null);
                    } else rt(1510);
                }, n.unschedule = function(t1, i) {
                    if (i && t1) {
                        var n = i.uuid || i.id;
                        if (n) {
                            var s = this.Qi[n];
                            if (s) {
                                var _$r = s.ki;
                                if (!_$r) return;
                                for(var _$h = 0, e = _$r.length; _$h < e; _$h++){
                                    var u = _$r[_$h];
                                    if (t1 === u.zi()) return u !== s.Ei || s.Ti || (s.Ti = !0), _$r.splice(_$h, 1), Ev.pi(u), s.Ai >= _$h && s.Ai--, void (0 === _$r.length && (this.Zi === s ? this.tn = !0 : this.rn(s)));
                                }
                            }
                        } else rt(1510);
                    }
                }, n.$i = function(t1, i) {
                    var n = i.uuid || i.id, s = this.Qi[n], _$r = s.ki;
                    if (_$r && 0 !== _$r.length) for(var _$h = _$r.length - 1; _$h >= 0; _$h--){
                        var e = _$r[_$h];
                        if (e === t1) return _$r.splice(_$h, 1), Ev.pi(e), s.Ai >= _$h && s.Ai--, void (0 === _$r.length && (this.tn = !0));
                    }
                }, n.unscheduleUpdate = function(t1) {
                    if (t1) {
                        var _$i = t1.uuid || t1.id;
                        if (_$i) {
                            var n = this.Ji[_$i];
                            null != n && n._i && (this.nn ? n._i.di = !0 : this.hn(n._i));
                        } else rt(1510);
                    }
                }, n.unscheduleAllForTarget = function(t1) {
                    if (t1) {
                        var _$i = t1.uuid || t1.id;
                        if (_$i) {
                            var n = this.Qi[_$i];
                            if (null != n && n.ki) {
                                var s = n.ki;
                                n.Ei && s.indexOf(n.Ei) > -1 && !n.Ti && (n.Ti = !0);
                                for(var _$r = 0, _$h = s.length; _$r < _$h; _$r++)Ev.pi(s[_$r]);
                                s.length = 0, this.Zi === n ? this.tn = !0 : this.rn(n);
                            }
                            this.unscheduleUpdate(t1);
                        } else rt(1510);
                    }
                }, n.unscheduleAll = function() {
                    this.unscheduleAllWithMinPriority(2147483648);
                }, n.unscheduleAllWithMinPriority = function(t1) {
                    var e, u, o, _$i, n, s, _$r = this.sn;
                    for(_$i = _$r.length - 1; _$i >= 0; _$i--)(n = _$r[_$i]).ci && this.unscheduleAllForTarget(n.ci);
                    var _$h = 0;
                    if (t1 < 0) for(_$i = 0; _$i < this.qi.length;)_$h = this.qi.length, null != (e = s = this.qi[_$i]) && e.ci && s.ai >= t1 && this.unscheduleUpdate(s.ci), _$h === this.qi.length && _$i++;
                    if (t1 <= 0) for(_$i = 0; _$i < this.Yi.length;)_$h = this.Yi.length, null != (u = s = this.Yi[_$i]) && u.ci && this.unscheduleUpdate(s.ci), _$h === this.Yi.length && _$i++;
                    for(_$i = 0; _$i < this.Ki.length;)_$h = this.Ki.length, null != (o = s = this.Ki[_$i]) && o.ci && s.ai >= t1 && this.unscheduleUpdate(s.ci), _$h === this.Ki.length && _$i++;
                }, n.isScheduled = function(t1, i) {
                    et(!!t1, 1508), et(!!i, 1509);
                    var n = i.uuid || i.id;
                    if (!n) return rt(1510), !1;
                    var s = this.Qi[n];
                    if (!s || null == s.ki) return !1;
                    for(var _$r = s.ki, _$h = 0; _$h < _$r.length; ++_$h)if (t1 === _$r[_$h].zi()) return !0;
                    return !1;
                }, n.pauseAllTargets = function() {
                    return this.pauseAllTargetsWithMinPriority(2147483648);
                }, n.pauseAllTargetsWithMinPriority = function(t1) {
                    var u, o, f, _$c, _$i, n, s, _$r, _$h = [], e = this.sn;
                    for(n = 0, s = e.length; n < s; n++)null != (u = _$i = e[n]) && u.ci && (_$i.li = !0, _$h.push(_$i.ci));
                    if (t1 < 0) for(n = 0; n < this.qi.length; n++)null != (o = _$r = this.qi[n]) && o.ci && _$r.ai >= t1 && (_$r.li = !0, _$h.push(_$r.ci));
                    if (t1 <= 0) for(n = 0; n < this.Yi.length; n++)null != (f = _$r = this.Yi[n]) && f.ci && (_$r.li = !0, _$h.push(_$r.ci));
                    for(n = 0; n < this.Ki.length; n++)null != (_$c = _$r = this.Ki[n]) && _$c.ci && _$r.ai >= t1 && (_$r.li = !0, _$h.push(_$r.ci));
                    return _$h;
                }, n.resumeTargets = function(t1) {
                    if (t1) for(var _$i = 0; _$i < t1.length; _$i++)this.resumeTarget(t1[_$i]);
                }, n.pauseTarget = function(t1) {
                    et(!!t1, 1503);
                    var _$i = t1.uuid || t1.id;
                    if (_$i) {
                        var n = this.Qi[_$i];
                        n && (n.li = !0);
                        var s = this.Ji[_$i];
                        null != s && s._i && (s._i.li = !0);
                    } else rt(1510);
                }, n.resumeTarget = function(t1) {
                    et(!!t1, 1504);
                    var _$i = t1.uuid || t1.id;
                    if (_$i) {
                        var n = this.Qi[_$i];
                        n && (n.li = !1);
                        var s = this.Ji[_$i];
                        null != s && s._i && (s._i.li = !1);
                    } else rt(1510);
                }, n.isTargetPaused = function(t1) {
                    et(!!t1, 1505);
                    var _$i = t1.uuid || t1.id;
                    if (!_$i) return rt(1510), !1;
                    var n = this.Qi[_$i];
                    if (n) return n.li;
                    var s = this.Ji[_$i];
                    return !(null == s || !s._i) && s._i.li;
                }, n.rn = function(t1) {
                    if (t1.ci) {
                        var _$i = t1.ci.uuid || t1.ci.id;
                        if (void 0 !== _$i) {
                            delete this.Qi[_$i];
                            for(var n = this.sn, s = 0, _$r = n.length; s < _$r; s++)if (n[s] === t1) {
                                n.splice(s, 1);
                                break;
                            }
                            Av.pi(t1);
                        }
                    }
                }, n.hn = function(t1) {
                    if (t1.ci) {
                        var _$i = t1.ci.uuid || t1.ci.id;
                        if (void 0 !== _$i) {
                            var n = this.Ji[_$i];
                            if (n) {
                                var s = n.yi, _$r = n._i;
                                if (s) {
                                    for(var _$h = 0, e = s.length; _$h < e; _$h++)if (s[_$h] === _$r) {
                                        s.splice(_$h, 1);
                                        break;
                                    }
                                }
                                delete this.Ji[_$i], _$r && bv.pi(_$r), kv.pi(n);
                            }
                        }
                    }
                }, n.un = function(t1, i, n) {
                    for(var s = 0; s < t1.length; s++)if (n < t1[s].ai) return void t1.splice(s, 0, i);
                    t1.push(i);
                }, n.en = function(t1, i) {
                    t1.push(i);
                }, i;
            }(_v));
            Tv.ID = "scheduler", A.Scheduler = Tv;
            var Sv = String.prototype.charCodeAt;
            function Ov(t1) {
                return this[t1];
            }
            function Iv(t1, i) {
                for(var n = t1.length, s = i ^ n, _$r = 0, h = "string" == typeof t1 ? Sv : Ov; n >= 4;){
                    var e = 255 & h.call(t1, _$r) | (255 & h.call(t1, ++_$r)) << 8 | (255 & h.call(t1, ++_$r)) << 16 | (255 & h.call(t1, ++_$r)) << 24;
                    e = 1540483477 * (65535 & e) + ((1540483477 * (e >>> 16) & 65535) << 16), s = 1540483477 * (65535 & s) + ((1540483477 * (s >>> 16) & 65535) << 16) ^ (e = 1540483477 * (65535 & (e ^= e >>> 24)) + ((1540483477 * (e >>> 16) & 65535) << 16)), n -= 4, ++_$r;
                }
                switch(n){
                    case 3:
                        s ^= (255 & h.call(t1, _$r + 2)) << 16;
                    case 2:
                        s ^= (255 & h.call(t1, _$r + 1)) << 8;
                    case 1:
                        s = 1540483477 * (65535 & (s ^= 255 & h.call(t1, _$r))) + ((1540483477 * (s >>> 16) & 65535) << 16);
                }
                return s = 1540483477 * (65535 & (s ^= s >>> 13)) + ((1540483477 * (s >>> 16) & 65535) << 16), (s ^= s >>> 15) >>> 0;
            }
            A.easing = cc;
            var Mv = t1("cv", new (function() {
                function t1() {
                    this.cn = null, this.an = new WeakMap;
                }
                var i = t1.prototype;
                return i.registerGCObject = function(t1) {
                    return t1;
                }, i.init = function() {}, i.vn = function() {}, i.destroy = function() {}, t1;
            }())), Cv = t1("cw", function() {
                function t1() {
                    return Mv.registerGCObject(this);
                }
                return t1.prototype.destroy = function() {}, t1;
            }());
            function Nv(t1, i) {
                for(var n, s = d(i); !(n = s()).done;){
                    var _$r = n.value;
                    Array.isArray(_$r) ? Nv(t1, _$r) : t1.push(_$r);
                }
            }
            function Pv(t1) {
                var i = [];
                return Nv(i, t1), i.join("");
            }
            A.math = uh, A.geometry = Wa;
            var Dv = function Dv(t1, i, n) {
                for(var s = 0; s < i.length; ++s)t1.length <= s && t1.push(new n), t1[s].copy(i[s]);
                t1.length = i.length;
            }, Lv = {
                UNKNOWN: 0,
                SWAPCHAIN: 1,
                BUFFER: 2,
                TEXTURE: 3,
                RENDER_PASS: 4,
                FRAMEBUFFER: 5,
                SAMPLER: 6,
                SHADER: 7,
                DESCRIPTOR_SET_LAYOUT: 8,
                PIPELINE_LAYOUT: 9,
                PIPELINE_STATE: 10,
                DESCRIPTOR_SET: 11,
                INPUT_ASSEMBLER: 12,
                COMMAND_BUFFER: 13,
                QUEUE: 14,
                QUERY_POOL: 15,
                GLOBAL_BARRIER: 16,
                TEXTURE_BARRIER: 17,
                BUFFER_BARRIER: 18,
                COUNT: 19
            }, Bv = {
                UNREADY: 0,
                FAILED: 1,
                SUCCESS: 2
            }, Fv = {
                UNKNOWN: 0,
                GLES2: 1,
                GLES3: 2,
                METAL: 3,
                VULKAN: 4,
                NVN: 5,
                WEBGL: 6,
                WEBGL2: 7,
                WEBGPU: 8
            }, Uv = {
                IDENTITY: 0,
                ROTATE_90: 1,
                ROTATE_180: 2,
                ROTATE_270: 3
            }, xv = {
                ELEMENT_INDEX_UINT: 0,
                INSTANCED_ARRAYS: 1,
                MULTIPLE_RENDER_TARGETS: 2,
                BLEND_MINMAX: 3,
                COMPUTE_SHADER: 4,
                INPUT_ATTACHMENT_BENEFIT: 5,
                SUBPASS_COLOR_INPUT: 6,
                SUBPASS_DEPTH_STENCIL_INPUT: 7,
                RASTERIZATION_ORDER_NOCOHERENT: 8,
                MULTI_SAMPLE_RESOLVE_DEPTH_STENCIL: 9,
                COUNT: 10
            }, jv = {
                UNKNOWN: 0,
                A8: 1,
                L8: 2,
                LA8: 3,
                R8: 4,
                R8SN: 5,
                R8UI: 6,
                R8I: 7,
                R16F: 8,
                R16UI: 9,
                R16I: 10,
                R32F: 11,
                R32UI: 12,
                R32I: 13,
                RG8: 14,
                RG8SN: 15,
                RG8UI: 16,
                RG8I: 17,
                RG16F: 18,
                RG16UI: 19,
                RG16I: 20,
                RG32F: 21,
                RG32UI: 22,
                RG32I: 23,
                RGB8: 24,
                SRGB8: 25,
                RGB8SN: 26,
                RGB8UI: 27,
                RGB8I: 28,
                RGB16F: 29,
                RGB16UI: 30,
                RGB16I: 31,
                RGB32F: 32,
                RGB32UI: 33,
                RGB32I: 34,
                RGBA8: 35,
                BGRA8: 36,
                SRGB8_A8: 37,
                RGBA8SN: 38,
                RGBA8UI: 39,
                RGBA8I: 40,
                RGBA16F: 41,
                RGBA16UI: 42,
                RGBA16I: 43,
                RGBA32F: 44,
                RGBA32UI: 45,
                RGBA32I: 46,
                R5G6B5: 47,
                R11G11B10F: 48,
                RGB5A1: 49,
                RGBA4: 50,
                RGB10A2: 51,
                RGB10A2UI: 52,
                RGB9E5: 53,
                DEPTH: 54,
                DEPTH_STENCIL: 55,
                BC1: 56,
                BC1_ALPHA: 57,
                BC1_SRGB: 58,
                BC1_SRGB_ALPHA: 59,
                BC2: 60,
                BC2_SRGB: 61,
                BC3: 62,
                BC3_SRGB: 63,
                BC4: 64,
                BC4_SNORM: 65,
                BC5: 66,
                BC5_SNORM: 67,
                BC6H_UF16: 68,
                BC6H_SF16: 69,
                BC7: 70,
                BC7_SRGB: 71,
                ETC_RGB8: 72,
                ETC2_RGB8: 73,
                ETC2_SRGB8: 74,
                ETC2_RGB8_A1: 75,
                ETC2_SRGB8_A1: 76,
                ETC2_RGBA8: 77,
                ETC2_SRGB8_A8: 78,
                EAC_R11: 79,
                EAC_R11SN: 80,
                EAC_RG11: 81,
                EAC_RG11SN: 82,
                PVRTC_RGB2: 83,
                PVRTC_RGBA2: 84,
                PVRTC_RGB4: 85,
                PVRTC_RGBA4: 86,
                PVRTC2_2BPP: 87,
                PVRTC2_4BPP: 88,
                ASTC_RGBA_4X4: 89,
                ASTC_RGBA_5X4: 90,
                ASTC_RGBA_5X5: 91,
                ASTC_RGBA_6X5: 92,
                ASTC_RGBA_6X6: 93,
                ASTC_RGBA_8X5: 94,
                ASTC_RGBA_8X6: 95,
                ASTC_RGBA_8X8: 96,
                ASTC_RGBA_10X5: 97,
                ASTC_RGBA_10X6: 98,
                ASTC_RGBA_10X8: 99,
                ASTC_RGBA_10X10: 100,
                ASTC_RGBA_12X10: 101,
                ASTC_RGBA_12X12: 102,
                ASTC_SRGBA_4X4: 103,
                ASTC_SRGBA_5X4: 104,
                ASTC_SRGBA_5X5: 105,
                ASTC_SRGBA_6X5: 106,
                ASTC_SRGBA_6X6: 107,
                ASTC_SRGBA_8X5: 108,
                ASTC_SRGBA_8X6: 109,
                ASTC_SRGBA_8X8: 110,
                ASTC_SRGBA_10X5: 111,
                ASTC_SRGBA_10X6: 112,
                ASTC_SRGBA_10X8: 113,
                ASTC_SRGBA_10X10: 114,
                ASTC_SRGBA_12X10: 115,
                ASTC_SRGBA_12X12: 116,
                COUNT: 117
            }, Gv = {
                NONE: 0,
                UNORM: 1,
                SNORM: 2,
                UINT: 3,
                INT: 4,
                UFLOAT: 5,
                FLOAT: 6
            }, Hv = {
                FLOAT: 0,
                UNFILTERABLE_FLOAT: 1,
                SINT: 2,
                UINT: 3
            }, Vv = {
                UNKNOWN: 0,
                BOOL: 1,
                BOOL2: 2,
                BOOL3: 3,
                BOOL4: 4,
                INT: 5,
                INT2: 6,
                INT3: 7,
                INT4: 8,
                UINT: 9,
                UINT2: 10,
                UINT3: 11,
                UINT4: 12,
                FLOAT: 13,
                FLOAT2: 14,
                FLOAT3: 15,
                FLOAT4: 16,
                MAT2: 17,
                MAT2X3: 18,
                MAT2X4: 19,
                MAT3X2: 20,
                MAT3: 21,
                MAT3X4: 22,
                MAT4X2: 23,
                MAT4X3: 24,
                MAT4: 25,
                SAMPLER1D: 26,
                SAMPLER1D_ARRAY: 27,
                SAMPLER2D: 28,
                SAMPLER2D_ARRAY: 29,
                SAMPLER3D: 30,
                SAMPLER_CUBE: 31,
                SAMPLER: 32,
                TEXTURE1D: 33,
                TEXTURE1D_ARRAY: 34,
                TEXTURE2D: 35,
                TEXTURE2D_ARRAY: 36,
                TEXTURE3D: 37,
                TEXTURE_CUBE: 38,
                IMAGE1D: 39,
                IMAGE1D_ARRAY: 40,
                IMAGE2D: 41,
                IMAGE2D_ARRAY: 42,
                IMAGE3D: 43,
                IMAGE_CUBE: 44,
                SUBPASS_INPUT: 45,
                COUNT: 46
            }, Wv = {
                NONE: 0,
                TRANSFER_SRC: 1,
                TRANSFER_DST: 2,
                INDEX: 4,
                VERTEX: 8,
                UNIFORM: 16,
                STORAGE: 32,
                INDIRECT: 64
            }, zv = {
                NONE: 0,
                ENABLE_STAGING_WRITE: 1
            }, $v = {
                NONE: 0,
                READ_ONLY: 1,
                WRITE_ONLY: 2,
                READ_WRITE: 3
            }, Xv = {
                NONE: 0,
                DEVICE: 1,
                HOST: 2
            }, qv = {
                TEX1D: 0,
                TEX2D: 1,
                TEX3D: 2,
                CUBE: 3,
                TEX1D_ARRAY: 4,
                TEX2D_ARRAY: 5
            }, Yv = {
                UNKNOWN: 0,
                BUFFER: 1,
                TEX1D: 2,
                TEX1D_ARRAY: 3,
                TEX2D: 4,
                TEX2D_ARRAY: 5,
                TEX2DMS: 6,
                TEX2DMS_ARRAY: 7,
                TEX3D: 8,
                TEXCUBE: 9,
                TEXCUBE_ARRAY: 10,
                RAYTRACING_ACCELERATION_STRUCTURE: 11
            }, Kv = {
                NONE: 0,
                TRANSFER_SRC: 1,
                TRANSFER_DST: 2,
                SAMPLED: 4,
                STORAGE: 8,
                COLOR_ATTACHMENT: 16,
                DEPTH_STENCIL_ATTACHMENT: 32,
                INPUT_ATTACHMENT: 64,
                SHADING_RATE: 128
            }, Jv = {
                NONE: 0,
                GEN_MIPMAP: 1,
                GENERAL_LAYOUT: 2,
                EXTERNAL_OES: 4,
                EXTERNAL_NORMAL: 8,
                LAZILY_ALLOCATED: 16,
                MUTABLE_VIEW_FORMAT: 64,
                MUTABLE_STORAGE: 128
            }, Qv = {
                NONE: 0,
                RENDER_TARGET: 1,
                SAMPLED_TEXTURE: 2,
                LINEAR_FILTER: 4,
                STORAGE_TEXTURE: 8,
                VERTEX_ATTRIBUTE: 16,
                SHADING_RATE: 32
            }, Zv = {
                X1: 1,
                X2: 2,
                X4: 4,
                X8: 8,
                X16: 16,
                X32: 32,
                X64: 64
            }, tl = {
                OFF: 0,
                ON: 1,
                RELAXED: 2,
                MAILBOX: 3,
                HALF: 4
            }, il = {
                NONE: 0,
                POINT: 1,
                LINEAR: 2,
                ANISOTROPIC: 3
            }, nl = {
                WRAP: 0,
                MIRROR: 1,
                CLAMP: 2,
                BORDER: 3
            }, sl = {
                NEVER: 0,
                LESS: 1,
                EQUAL: 2,
                LESS_EQUAL: 3,
                GREATER: 4,
                NOT_EQUAL: 5,
                GREATER_EQUAL: 6,
                ALWAYS: 7
            }, rl = {
                ZERO: 0,
                KEEP: 1,
                REPLACE: 2,
                INCR: 3,
                DECR: 4,
                INVERT: 5,
                INCR_WRAP: 6,
                DECR_WRAP: 7
            }, hl = {
                ZERO: 0,
                ONE: 1,
                SRC_ALPHA: 2,
                DST_ALPHA: 3,
                ONE_MINUS_SRC_ALPHA: 4,
                ONE_MINUS_DST_ALPHA: 5,
                SRC_COLOR: 6,
                DST_COLOR: 7,
                ONE_MINUS_SRC_COLOR: 8,
                ONE_MINUS_DST_COLOR: 9,
                SRC_ALPHA_SATURATE: 10,
                CONSTANT_COLOR: 11,
                ONE_MINUS_CONSTANT_COLOR: 12,
                CONSTANT_ALPHA: 13,
                ONE_MINUS_CONSTANT_ALPHA: 14
            }, el = {
                ADD: 0,
                SUB: 1,
                REV_SUB: 2,
                MIN: 3,
                MAX: 4
            }, ul = {
                NONE: 0,
                R: 1,
                G: 2,
                B: 4,
                A: 8,
                ALL: 15
            }, ol = {
                NONE: 0,
                VERTEX: 1,
                CONTROL: 2,
                EVALUATION: 4,
                GEOMETRY: 8,
                FRAGMENT: 16,
                COMPUTE: 32,
                ALL: 63
            }, fl = {
                LOAD: 0,
                CLEAR: 1,
                DISCARD: 2
            }, cl = {
                STORE: 0,
                DISCARD: 1
            }, al = {
                NONE: 0,
                INDIRECT_BUFFER: 1,
                INDEX_BUFFER: 2,
                VERTEX_BUFFER: 4,
                VERTEX_SHADER_READ_UNIFORM_BUFFER: 8,
                VERTEX_SHADER_READ_TEXTURE: 16,
                VERTEX_SHADER_READ_OTHER: 32,
                FRAGMENT_SHADER_READ_UNIFORM_BUFFER: 64,
                FRAGMENT_SHADER_READ_TEXTURE: 128,
                FRAGMENT_SHADER_READ_COLOR_INPUT_ATTACHMENT: 256,
                FRAGMENT_SHADER_READ_DEPTH_STENCIL_INPUT_ATTACHMENT: 512,
                FRAGMENT_SHADER_READ_OTHER: 1024,
                COLOR_ATTACHMENT_READ: 2048,
                DEPTH_STENCIL_ATTACHMENT_READ: 4096,
                COMPUTE_SHADER_READ_UNIFORM_BUFFER: 8192,
                COMPUTE_SHADER_READ_TEXTURE: 16384,
                COMPUTE_SHADER_READ_OTHER: 32768,
                TRANSFER_READ: 65536,
                HOST_READ: 131072,
                PRESENT: 262144,
                VERTEX_SHADER_WRITE: 524288,
                FRAGMENT_SHADER_WRITE: 1048576,
                COLOR_ATTACHMENT_WRITE: 2097152,
                DEPTH_STENCIL_ATTACHMENT_WRITE: 4194304,
                COMPUTE_SHADER_WRITE: 8388608,
                TRANSFER_WRITE: 16777216,
                HOST_PREINITIALIZED: 33554432,
                HOST_WRITE: 67108864,
                SHADING_RATE: 134217728
            }, vl = {
                NONE: 0,
                SAMPLE_ZERO: 1,
                AVERAGE: 2,
                MIN: 3,
                MAX: 4
            }, ll = {
                GRAPHICS: 0,
                COMPUTE: 1,
                RAY_TRACING: 2
            }, dl = {
                POINT_LIST: 0,
                LINE_LIST: 1,
                LINE_STRIP: 2,
                LINE_LOOP: 3,
                LINE_LIST_ADJACENCY: 4,
                LINE_STRIP_ADJACENCY: 5,
                ISO_LINE_LIST: 6,
                TRIANGLE_LIST: 7,
                TRIANGLE_STRIP: 8,
                TRIANGLE_FAN: 9,
                TRIANGLE_LIST_ADJACENCY: 10,
                TRIANGLE_STRIP_ADJACENCY: 11,
                TRIANGLE_PATCH_ADJACENCY: 12,
                QUAD_PATCH_LIST: 13
            }, wl = {
                FILL: 0,
                POINT: 1,
                LINE: 2
            }, gl = {
                GOURAND: 0,
                FLAT: 1
            }, pl = {
                NONE: 0,
                FRONT: 1,
                BACK: 2
            }, yl = {
                NONE: 0,
                LINE_WIDTH: 1,
                DEPTH_BIAS: 2,
                BLEND_CONSTANTS: 4,
                DEPTH_BOUNDS: 8,
                STENCIL_WRITE_MASK: 16,
                STENCIL_COMPARE_MASK: 32
            }, _l = {
                FRONT: 1,
                BACK: 2,
                ALL: 3
            }, ml = {
                UNKNOWN: 0,
                UNIFORM_BUFFER: 1,
                DYNAMIC_UNIFORM_BUFFER: 2,
                STORAGE_BUFFER: 4,
                DYNAMIC_STORAGE_BUFFER: 8,
                SAMPLER_TEXTURE: 16,
                SAMPLER: 32,
                TEXTURE: 64,
                STORAGE_IMAGE: 128,
                INPUT_ATTACHMENT: 256
            }, bl = {
                GRAPHICS: 0,
                COMPUTE: 1,
                TRANSFER: 2
            }, kl = {
                OCCLUSION: 0,
                PIPELINE_STATISTICS: 1,
                TIMESTAMP: 2
            }, Al = {
                PRIMARY: 0,
                SECONDARY: 1
            }, El = {
                NONE: 0,
                COLOR: 1,
                DEPTH: 2,
                STENCIL: 4,
                DEPTH_STENCIL: 6,
                ALL: 7
            }, Tl = {
                FULL: 0,
                SPLIT_BEGIN: 1,
                SPLIT_END: 2
            }, Sl = {
                RASTER: 0,
                COMPUTE: 1,
                COPY: 2,
                MOVE: 3,
                RAYTRACE: 4,
                PRESENT: 5
            }, Ol = function() {
                function t1(t1, i, n) {
                    void 0 === t1 && (t1 = 0), void 0 === i && (i = 0), void 0 === n && (n = 0), this.x = t1, this.y = i, this.z = n;
                }
                return t1.prototype.copy = function(t1) {
                    return this.x = t1.x, this.y = t1.y, this.z = t1.z, this;
                }, t1;
            }(), Il = function() {
                function t1(t1, i, n, s, r, h, e, u, o, f, c, a, v, l, d, w, g, p, y, _, m, b, k, A, E, T) {
                    void 0 === t1 && (t1 = 0), void 0 === i && (i = 0), void 0 === n && (n = 0), void 0 === s && (s = 0), void 0 === r && (r = 0), void 0 === h && (h = 0), void 0 === e && (e = 0), void 0 === u && (u = 0), void 0 === o && (o = 0), void 0 === f && (f = 0), void 0 === c && (c = 0), void 0 === a && (a = 0), void 0 === v && (v = 0), void 0 === l && (l = 0), void 0 === d && (d = 0), void 0 === w && (w = 1), void 0 === g && (g = 0), void 0 === p && (p = 0), void 0 === y && (y = new Ol), void 0 === _ && (_ = new Ol), void 0 === m && (m = !1), void 0 === b && (b = !1), void 0 === k && (k = !1), void 0 === A && (A = -1), void 0 === E && (E = 1), void 0 === T && (T = 1), this.maxVertexAttributes = t1, this.maxVertexUniformVectors = i, this.maxFragmentUniformVectors = n, this.maxTextureUnits = s, this.maxImageUnits = r, this.maxVertexTextureUnits = h, this.maxColorRenderTargets = e, this.maxShaderStorageBufferBindings = u, this.maxShaderStorageBlockSize = o, this.maxUniformBufferBindings = f, this.maxUniformBlockSize = c, this.maxTextureSize = a, this.maxCubeMapTextureSize = v, this.maxArrayTextureLayers = l, this.max3DTextureSize = d, this.uboOffsetAlignment = w, this.maxComputeSharedMemorySize = g, this.maxComputeWorkGroupInvocations = p, this.maxComputeWorkGroupSize = y, this.maxComputeWorkGroupCount = _, this.supportQuery = m, this.supportVariableRateShading = b, this.supportSubPassShading = k, this.clipSpaceMinZ = A, this.screenSpaceSignY = E, this.clipSpaceSignY = T;
                }
                return t1.prototype.copy = function(t1) {
                    return this.maxVertexAttributes = t1.maxVertexAttributes, this.maxVertexUniformVectors = t1.maxVertexUniformVectors, this.maxFragmentUniformVectors = t1.maxFragmentUniformVectors, this.maxTextureUnits = t1.maxTextureUnits, this.maxImageUnits = t1.maxImageUnits, this.maxVertexTextureUnits = t1.maxVertexTextureUnits, this.maxColorRenderTargets = t1.maxColorRenderTargets, this.maxShaderStorageBufferBindings = t1.maxShaderStorageBufferBindings, this.maxShaderStorageBlockSize = t1.maxShaderStorageBlockSize, this.maxUniformBufferBindings = t1.maxUniformBufferBindings, this.maxUniformBlockSize = t1.maxUniformBlockSize, this.maxTextureSize = t1.maxTextureSize, this.maxCubeMapTextureSize = t1.maxCubeMapTextureSize, this.maxArrayTextureLayers = t1.maxArrayTextureLayers, this.max3DTextureSize = t1.max3DTextureSize, this.uboOffsetAlignment = t1.uboOffsetAlignment, this.maxComputeSharedMemorySize = t1.maxComputeSharedMemorySize, this.maxComputeWorkGroupInvocations = t1.maxComputeWorkGroupInvocations, this.maxComputeWorkGroupSize.copy(t1.maxComputeWorkGroupSize), this.maxComputeWorkGroupCount.copy(t1.maxComputeWorkGroupCount), this.supportQuery = t1.supportQuery, this.supportVariableRateShading = t1.supportVariableRateShading, this.supportSubPassShading = t1.supportSubPassShading, this.clipSpaceMinZ = t1.clipSpaceMinZ, this.screenSpaceSignY = t1.screenSpaceSignY, this.clipSpaceSignY = t1.clipSpaceSignY, this;
                }, t1;
            }(), Rl = function() {
                function t1(t1) {
                    void 0 === t1 && (t1 = !0), this.enableBarrierDeduce = t1;
                }
                return t1.prototype.copy = function(t1) {
                    return this.enableBarrierDeduce = t1.enableBarrierDeduce, this;
                }, t1;
            }(), Ml = function() {
                function t1(t1, i, n) {
                    void 0 === t1 && (t1 = 0), void 0 === i && (i = 0), void 0 === n && (n = 0), this.x = t1, this.y = i, this.z = n;
                }
                return t1.prototype.copy = function(t1) {
                    return this.x = t1.x, this.y = t1.y, this.z = t1.z, this;
                }, t1;
            }(), Cl = function() {
                function t1(t1, i, n, s) {
                    void 0 === t1 && (t1 = 0), void 0 === i && (i = 0), void 0 === n && (n = 0), void 0 === s && (s = 0), this.x = t1, this.y = i, this.width = n, this.height = s;
                }
                return t1.prototype.copy = function(t1) {
                    return this.x = t1.x, this.y = t1.y, this.width = t1.width, this.height = t1.height, this;
                }, t1;
            }(), Nl = function() {
                function t1(t1, i, n) {
                    void 0 === t1 && (t1 = 0), void 0 === i && (i = 0), void 0 === n && (n = 1), this.width = t1, this.height = i, this.depth = n;
                }
                return t1.prototype.copy = function(t1) {
                    return this.width = t1.width, this.height = t1.height, this.depth = t1.depth, this;
                }, t1;
            }(), Pl = function() {
                function t1(t1, i, n) {
                    void 0 === t1 && (t1 = 0), void 0 === i && (i = 0), void 0 === n && (n = 1), this.mipLevel = t1, this.baseArrayLayer = i, this.layerCount = n;
                }
                return t1.prototype.copy = function(t1) {
                    return this.mipLevel = t1.mipLevel, this.baseArrayLayer = t1.baseArrayLayer, this.layerCount = t1.layerCount, this;
                }, t1;
            }(), Dl = function() {
                function t1(t1, i, n, s) {
                    void 0 === t1 && (t1 = 0), void 0 === i && (i = 1), void 0 === n && (n = 0), void 0 === s && (s = 1), this.baseMipLevel = t1, this.levelCount = i, this.baseArrayLayer = n, this.layerCount = s;
                }
                return t1.prototype.copy = function(t1) {
                    return this.baseMipLevel = t1.baseMipLevel, this.levelCount = t1.levelCount, this.baseArrayLayer = t1.baseArrayLayer, this.layerCount = t1.layerCount, this;
                }, t1;
            }(), Ll = function() {
                function t1(t1, i, n, s, r) {
                    void 0 === t1 && (t1 = new Pl), void 0 === i && (i = new Ml), void 0 === n && (n = new Pl), void 0 === s && (s = new Ml), void 0 === r && (r = new Nl), this.srcSubres = t1, this.srcOffset = i, this.dstSubres = n, this.dstOffset = s, this.extent = r;
                }
                return t1.prototype.copy = function(t1) {
                    return this.srcSubres.copy(t1.srcSubres), this.srcOffset.copy(t1.srcOffset), this.dstSubres.copy(t1.dstSubres), this.dstOffset.copy(t1.dstOffset), this.extent.copy(t1.extent), this;
                }, t1;
            }(), Bl = function() {
                function t1(t1, i, n, s, r, h) {
                    void 0 === t1 && (t1 = new Pl), void 0 === i && (i = new Ml), void 0 === n && (n = new Nl), void 0 === s && (s = new Pl), void 0 === r && (r = new Ml), void 0 === h && (h = new Nl), this.srcSubres = t1, this.srcOffset = i, this.srcExtent = n, this.dstSubres = s, this.dstOffset = r, this.dstExtent = h;
                }
                return t1.prototype.copy = function(t1) {
                    return this.srcSubres.copy(t1.srcSubres), this.srcOffset.copy(t1.srcOffset), this.srcExtent.copy(t1.srcExtent), this.dstSubres.copy(t1.dstSubres), this.dstOffset.copy(t1.dstOffset), this.dstExtent.copy(t1.dstExtent), this;
                }, t1;
            }(), Fl = function() {
                function t1(t1, i, n, s, r, h) {
                    void 0 === t1 && (t1 = 0), void 0 === i && (i = 0), void 0 === n && (n = 0), void 0 === s && (s = new Ml), void 0 === r && (r = new Nl), void 0 === h && (h = new Pl), this.buffOffset = t1, this.buffStride = i, this.buffTexHeight = n, this.texOffset = s, this.texExtent = r, this.texSubres = h;
                }
                return t1.prototype.copy = function(t1) {
                    return this.buffOffset = t1.buffOffset, this.buffStride = t1.buffStride, this.buffTexHeight = t1.buffTexHeight, this.texOffset.copy(t1.texOffset), this.texExtent.copy(t1.texExtent), this.texSubres.copy(t1.texSubres), this;
                }, t1;
            }(), Ul = function() {
                function t1(t1, i, n, s, r, h) {
                    void 0 === t1 && (t1 = 0), void 0 === i && (i = 0), void 0 === n && (n = 0), void 0 === s && (s = 0), void 0 === r && (r = 0), void 0 === h && (h = 1), this.left = t1, this.top = i, this.width = n, this.height = s, this.minDepth = r, this.maxDepth = h;
                }
                var i = t1.prototype;
                return i.copy = function(t1) {
                    return this.left = t1.left, this.top = t1.top, this.width = t1.width, this.height = t1.height, this.minDepth = t1.minDepth, this.maxDepth = t1.maxDepth, this;
                }, i.reset = function() {
                    this.left = 0, this.top = 0, this.width = 0, this.height = 0, this.minDepth = 0, this.maxDepth = 1;
                }, t1;
            }(), xl = function() {
                function t1(t1, i, n, s) {
                    void 0 === t1 && (t1 = 0), void 0 === i && (i = 0), void 0 === n && (n = 0), void 0 === s && (s = 0), this.x = t1, this.y = i, this.z = n, this.w = s;
                }
                var i = t1.prototype;
                return i.copy = function(t1) {
                    return this.x = t1.x, this.y = t1.y, this.z = t1.z, this.w = t1.w, this;
                }, i.set = function(t1, i, n, s) {
                    return this.x = t1, this.y = i, this.z = n, this.w = s, this;
                }, i.reset = function() {
                    this.x = 0, this.y = 0, this.z = 0, this.w = 0;
                }, t1;
            }(), jl = function() {
                function t1(t1, i) {
                    void 0 === t1 && (t1 = ""), void 0 === i && (i = new xl), this.name = t1, this.color = i;
                }
                return t1.prototype.copy = function(t1) {
                    return this.name = t1.name, this.color.copy(t1.color), this;
                }, t1;
            }(), Gl = function() {
                function t1(t1, i, n, s, r, h, e, u) {
                    void 0 === t1 && (t1 = [
                        0
                    ]), void 0 === i && (i = [
                        0
                    ]), void 0 === n && (n = [
                        0
                    ]), void 0 === s && (s = [
                        0
                    ]), void 0 === r && (r = [
                        0
                    ]), void 0 === h && (h = [
                        0
                    ]), void 0 === e && (e = [
                        0
                    ]), void 0 === u && (u = [
                        0
                    ]), this.maxBlockCounts = t1, this.maxSamplerTextureCounts = i, this.maxSamplerCounts = n, this.maxTextureCounts = s, this.maxBufferCounts = r, this.maxImageCounts = h, this.maxSubpassInputCounts = e, this.setIndices = u;
                }
                return t1.prototype.copy = function(t1) {
                    return this.maxBlockCounts = t1.maxBlockCounts.slice(), this.maxSamplerTextureCounts = t1.maxSamplerTextureCounts.slice(), this.maxSamplerCounts = t1.maxSamplerCounts.slice(), this.maxTextureCounts = t1.maxTextureCounts.slice(), this.maxBufferCounts = t1.maxBufferCounts.slice(), this.maxImageCounts = t1.maxImageCounts.slice(), this.maxSubpassInputCounts = t1.maxSubpassInputCounts.slice(), this.setIndices = t1.setIndices.slice(), this;
                }, t1;
            }(), Hl = function() {
                function t1(t1, i, n, s, r) {
                    void 0 === t1 && (t1 = 0), void 0 === i && (i = null), void 0 === n && (n = 1), void 0 === s && (s = 0), void 0 === r && (r = 0), this.windowId = t1, this.windowHandle = i, this.vsyncMode = n, this.width = s, this.height = r;
                }
                return t1.prototype.copy = function(t1) {
                    return this.windowId = t1.windowId, this.windowHandle = t1.windowHandle, this.vsyncMode = t1.vsyncMode, this.width = t1.width, this.height = t1.height, this;
                }, t1;
            }(), Vl = function() {
                function t1(t1) {
                    void 0 === t1 && (t1 = new Gl), this.bindingMappingInfo = t1;
                }
                return t1.prototype.copy = function(t1) {
                    return this.bindingMappingInfo.copy(t1.bindingMappingInfo), this;
                }, t1;
            }(), Wl = function() {
                function t1(t1, i, n, s, r) {
                    void 0 === t1 && (t1 = 0), void 0 === i && (i = 0), void 0 === n && (n = 0), void 0 === s && (s = 1), void 0 === r && (r = 0), this.usage = t1, this.memUsage = i, this.size = n, this.stride = s, this.flags = r;
                }
                return t1.prototype.copy = function(t1) {
                    return this.usage = t1.usage, this.memUsage = t1.memUsage, this.size = t1.size, this.stride = t1.stride, this.flags = t1.flags, this;
                }, t1;
            }(), zl = function() {
                function t1(t1, i, n) {
                    void 0 === t1 && (t1 = null), void 0 === i && (i = 0), void 0 === n && (n = 0), this.buffer = t1, this.offset = i, this.range = n;
                }
                return t1.prototype.copy = function(t1) {
                    return this.buffer = t1.buffer, this.offset = t1.offset, this.range = t1.range, this;
                }, t1;
            }(), $l = function() {
                function t1(t1, i, n, s, r, h, e) {
                    void 0 === t1 && (t1 = 0), void 0 === i && (i = 0), void 0 === n && (n = 0), void 0 === s && (s = 0), void 0 === r && (r = 0), void 0 === h && (h = 0), void 0 === e && (e = 0), this.vertexCount = t1, this.firstVertex = i, this.indexCount = n, this.firstIndex = s, this.vertexOffset = r, this.instanceCount = h, this.firstInstance = e;
                }
                return t1.prototype.copy = function(t1) {
                    return this.vertexCount = t1.vertexCount, this.firstVertex = t1.firstVertex, this.indexCount = t1.indexCount, this.firstIndex = t1.firstIndex, this.vertexOffset = t1.vertexOffset, this.instanceCount = t1.instanceCount, this.firstInstance = t1.firstInstance, this;
                }, t1;
            }(), Xl = function() {
                function t1(t1, i, n, s, r) {
                    void 0 === t1 && (t1 = 0), void 0 === i && (i = 0), void 0 === n && (n = 0), void 0 === s && (s = null), void 0 === r && (r = 0), this.groupCountX = t1, this.groupCountY = i, this.groupCountZ = n, this.indirectBuffer = s, this.indirectOffset = r;
                }
                return t1.prototype.copy = function(t1) {
                    return this.groupCountX = t1.groupCountX, this.groupCountY = t1.groupCountY, this.groupCountZ = t1.groupCountZ, this.indirectBuffer = t1.indirectBuffer, this.indirectOffset = t1.indirectOffset, this;
                }, t1;
            }(), ql = function() {
                function t1(t1) {
                    void 0 === t1 && (t1 = []), this.drawInfos = t1;
                }
                return t1.prototype.copy = function(t1) {
                    return Dv(this.drawInfos, t1.drawInfos, $l), this;
                }, t1;
            }(), Yl = function() {
                function t1(t1, i, n, s, r, h, e, u, o, f, c) {
                    void 0 === t1 && (t1 = 1), void 0 === i && (i = 0), void 0 === n && (n = 0), void 0 === s && (s = 0), void 0 === r && (r = 0), void 0 === h && (h = 0), void 0 === e && (e = 1), void 0 === u && (u = 1), void 0 === o && (o = 1), void 0 === f && (f = 1), void 0 === c && (c = 0), this.type = t1, this.usage = i, this.format = n, this.width = s, this.height = r, this.flags = h, this.layerCount = e, this.levelCount = u, this.samples = o, this.depth = f, this.externalRes = c;
                }
                return t1.prototype.copy = function(t1) {
                    return this.type = t1.type, this.usage = t1.usage, this.format = t1.format, this.width = t1.width, this.height = t1.height, this.flags = t1.flags, this.layerCount = t1.layerCount, this.levelCount = t1.levelCount, this.samples = t1.samples, this.depth = t1.depth, this.externalRes = t1.externalRes, this;
                }, t1;
            }(), Kl = function() {
                function t1(t1, i, n, s, r, h, e, u, o) {
                    void 0 === t1 && (t1 = null), void 0 === i && (i = 1), void 0 === n && (n = 0), void 0 === s && (s = 0), void 0 === r && (r = 1), void 0 === h && (h = 0), void 0 === e && (e = 1), void 0 === u && (u = 0), void 0 === o && (o = 1), this.texture = t1, this.type = i, this.format = n, this.baseLevel = s, this.levelCount = r, this.baseLayer = h, this.layerCount = e, this.basePlane = u, this.planeCount = o;
                }
                return t1.prototype.copy = function(t1) {
                    return this.texture = t1.texture, this.type = t1.type, this.format = t1.format, this.baseLevel = t1.baseLevel, this.levelCount = t1.levelCount, this.baseLayer = t1.baseLayer, this.layerCount = t1.layerCount, this.basePlane = t1.basePlane, this.planeCount = t1.planeCount, this;
                }, t1;
            }(), Jl = function() {
                function t1(t1, i, n, s, r, h, e, u) {
                    void 0 === t1 && (t1 = 2), void 0 === i && (i = 2), void 0 === n && (n = 0), void 0 === s && (s = 0), void 0 === r && (r = 0), void 0 === h && (h = 0), void 0 === e && (e = 0), void 0 === u && (u = 7), this.minFilter = t1, this.magFilter = i, this.mipFilter = n, this.addressU = s, this.addressV = r, this.addressW = h, this.maxAnisotropy = e, this.cmpFunc = u;
                }
                return t1.prototype.copy = function(t1) {
                    return this.minFilter = t1.minFilter, this.magFilter = t1.magFilter, this.mipFilter = t1.mipFilter, this.addressU = t1.addressU, this.addressV = t1.addressV, this.addressW = t1.addressW, this.maxAnisotropy = t1.maxAnisotropy, this.cmpFunc = t1.cmpFunc, this;
                }, t1;
            }(), Ql = function() {
                function t1(t1, i, n) {
                    void 0 === t1 && (t1 = ""), void 0 === i && (i = 0), void 0 === n && (n = 0), this.name = t1, this.type = i, this.count = n;
                }
                return t1.prototype.copy = function(t1) {
                    return this.name = t1.name, this.type = t1.type, this.count = t1.count, this;
                }, t1;
            }(), Zl = function() {
                function t1(t1, i, n, s, r, h) {
                    void 0 === t1 && (t1 = 0), void 0 === i && (i = 0), void 0 === n && (n = ""), void 0 === s && (s = []), void 0 === r && (r = 0), void 0 === h && (h = 0), this.set = t1, this.binding = i, this.name = n, this.members = s, this.count = r, this.flattened = h;
                }
                return t1.prototype.copy = function(t1) {
                    return this.set = t1.set, this.binding = t1.binding, this.name = t1.name, Dv(this.members, t1.members, Ql), this.count = t1.count, this.flattened = t1.flattened, this;
                }, t1;
            }(), td = function() {
                function t1(t1, i, n, s, r, h) {
                    void 0 === t1 && (t1 = 0), void 0 === i && (i = 0), void 0 === n && (n = ""), void 0 === s && (s = 0), void 0 === r && (r = 0), void 0 === h && (h = 0), this.set = t1, this.binding = i, this.name = n, this.type = s, this.count = r, this.flattened = h;
                }
                return t1.prototype.copy = function(t1) {
                    return this.set = t1.set, this.binding = t1.binding, this.name = t1.name, this.type = t1.type, this.count = t1.count, this.flattened = t1.flattened, this;
                }, t1;
            }(), id = function() {
                function t1(t1, i, n, s, r) {
                    void 0 === t1 && (t1 = 0), void 0 === i && (i = 0), void 0 === n && (n = ""), void 0 === s && (s = 0), void 0 === r && (r = 0), this.set = t1, this.binding = i, this.name = n, this.count = s, this.flattened = r;
                }
                return t1.prototype.copy = function(t1) {
                    return this.set = t1.set, this.binding = t1.binding, this.name = t1.name, this.count = t1.count, this.flattened = t1.flattened, this;
                }, t1;
            }(), nd = function() {
                function t1(t1, i, n, s, r, h) {
                    void 0 === t1 && (t1 = 0), void 0 === i && (i = 0), void 0 === n && (n = ""), void 0 === s && (s = 0), void 0 === r && (r = 0), void 0 === h && (h = 0), this.set = t1, this.binding = i, this.name = n, this.type = s, this.count = r, this.flattened = h;
                }
                return t1.prototype.copy = function(t1) {
                    return this.set = t1.set, this.binding = t1.binding, this.name = t1.name, this.type = t1.type, this.count = t1.count, this.flattened = t1.flattened, this;
                }, t1;
            }(), sd = function() {
                function t1(t1, i, n, s, r, h, e) {
                    void 0 === t1 && (t1 = 0), void 0 === i && (i = 0), void 0 === n && (n = ""), void 0 === s && (s = 0), void 0 === r && (r = 0), void 0 === h && (h = 3), void 0 === e && (e = 0), this.set = t1, this.binding = i, this.name = n, this.type = s, this.count = r, this.memoryAccess = h, this.flattened = e;
                }
                return t1.prototype.copy = function(t1) {
                    return this.set = t1.set, this.binding = t1.binding, this.name = t1.name, this.type = t1.type, this.count = t1.count, this.memoryAccess = t1.memoryAccess, this.flattened = t1.flattened, this;
                }, t1;
            }(), rd = function() {
                function t1(t1, i, n, s, r, h) {
                    void 0 === t1 && (t1 = 0), void 0 === i && (i = 0), void 0 === n && (n = ""), void 0 === s && (s = 0), void 0 === r && (r = 3), void 0 === h && (h = 0), this.set = t1, this.binding = i, this.name = n, this.count = s, this.memoryAccess = r, this.flattened = h;
                }
                return t1.prototype.copy = function(t1) {
                    return this.set = t1.set, this.binding = t1.binding, this.name = t1.name, this.count = t1.count, this.memoryAccess = t1.memoryAccess, this.flattened = t1.flattened, this;
                }, t1;
            }(), hd = function() {
                function t1(t1, i, n, s, r) {
                    void 0 === t1 && (t1 = 0), void 0 === i && (i = 0), void 0 === n && (n = ""), void 0 === s && (s = 0), void 0 === r && (r = 0), this.set = t1, this.binding = i, this.name = n, this.count = s, this.flattened = r;
                }
                return t1.prototype.copy = function(t1) {
                    return this.set = t1.set, this.binding = t1.binding, this.name = t1.name, this.count = t1.count, this.flattened = t1.flattened, this;
                }, t1;
            }(), ed = function() {
                function t1(t1, i) {
                    void 0 === t1 && (t1 = 0), void 0 === i && (i = ""), this.stage = t1, this.source = i;
                }
                return t1.prototype.copy = function(t1) {
                    return this.stage = t1.stage, this.source = t1.source, this;
                }, t1;
            }(), ud = function() {
                function t1(t1, i, n, s, r, h) {
                    void 0 === t1 && (t1 = ""), void 0 === i && (i = 0), void 0 === n && (n = !1), void 0 === s && (s = 0), void 0 === r && (r = !1), void 0 === h && (h = 0), this.name = t1, this.format = i, this.isNormalized = n, this.stream = s, this.isInstanced = r, this.location = h;
                }
                return t1.prototype.copy = function(t1) {
                    return this.name = t1.name, this.format = t1.format, this.isNormalized = t1.isNormalized, this.stream = t1.stream, this.isInstanced = t1.isInstanced, this.location = t1.location, this;
                }, t1;
            }(), od = function() {
                function t1(t1, i, n, s, r, h, e, u, o, f, c) {
                    void 0 === t1 && (t1 = ""), void 0 === i && (i = []), void 0 === n && (n = []), void 0 === s && (s = []), void 0 === r && (r = []), void 0 === h && (h = []), void 0 === e && (e = []), void 0 === u && (u = []), void 0 === o && (o = []), void 0 === f && (f = []), void 0 === c && (c = 4294967295), this.name = t1, this.stages = i, this.attributes = n, this.blocks = s, this.buffers = r, this.samplerTextures = h, this.samplers = e, this.textures = u, this.images = o, this.subpassInputs = f, this.hash = c;
                }
                return t1.prototype.copy = function(t1) {
                    return this.name = t1.name, Dv(this.stages, t1.stages, ed), Dv(this.attributes, t1.attributes, ud), Dv(this.blocks, t1.blocks, Zl), Dv(this.buffers, t1.buffers, rd), Dv(this.samplerTextures, t1.samplerTextures, td), Dv(this.samplers, t1.samplers, id), Dv(this.textures, t1.textures, nd), Dv(this.images, t1.images, sd), Dv(this.subpassInputs, t1.subpassInputs, hd), this.hash = t1.hash, this;
                }, t1;
            }(), fd = function() {
                function t1(t1, i, n, s) {
                    void 0 === t1 && (t1 = []), void 0 === i && (i = []), void 0 === n && (n = null), void 0 === s && (s = null), this.attributes = t1, this.vertexBuffers = i, this.indexBuffer = n, this.indirectBuffer = s;
                }
                return t1.prototype.copy = function(t1) {
                    return Dv(this.attributes, t1.attributes, ud), this.vertexBuffers = t1.vertexBuffers.slice(), this.indexBuffer = t1.indexBuffer, this.indirectBuffer = t1.indirectBuffer, this;
                }, t1;
            }(), cd = function() {
                function t1(t1, i, n, s, r) {
                    void 0 === t1 && (t1 = 0), void 0 === i && (i = 1), void 0 === n && (n = 1), void 0 === s && (s = 0), void 0 === r && (r = null), this.format = t1, this.sampleCount = i, this.loadOp = n, this.storeOp = s, this.barrier = r;
                }
                return t1.prototype.copy = function(t1) {
                    return this.format = t1.format, this.sampleCount = t1.sampleCount, this.loadOp = t1.loadOp, this.storeOp = t1.storeOp, this.barrier = t1.barrier, this;
                }, t1;
            }(), ad = function() {
                function t1(t1, i, n, s, r, h, e) {
                    void 0 === t1 && (t1 = 0), void 0 === i && (i = 1), void 0 === n && (n = 1), void 0 === s && (s = 0), void 0 === r && (r = 1), void 0 === h && (h = 0), void 0 === e && (e = null), this.format = t1, this.sampleCount = i, this.depthLoadOp = n, this.depthStoreOp = s, this.stencilLoadOp = r, this.stencilStoreOp = h, this.barrier = e;
                }
                return t1.prototype.copy = function(t1) {
                    return this.format = t1.format, this.sampleCount = t1.sampleCount, this.depthLoadOp = t1.depthLoadOp, this.depthStoreOp = t1.depthStoreOp, this.stencilLoadOp = t1.stencilLoadOp, this.stencilStoreOp = t1.stencilStoreOp, this.barrier = t1.barrier, this;
                }, t1;
            }(), vd = function() {
                function t1(t1, i, n, s, r, h, e, u, o) {
                    void 0 === t1 && (t1 = []), void 0 === i && (i = []), void 0 === n && (n = []), void 0 === s && (s = []), void 0 === r && (r = -1), void 0 === h && (h = -1), void 0 === e && (e = -1), void 0 === u && (u = 0), void 0 === o && (o = 0), this.inputs = t1, this.colors = i, this.resolves = n, this.preserves = s, this.depthStencil = r, this.depthStencilResolve = h, this.shadingRate = e, this.depthResolveMode = u, this.stencilResolveMode = o;
                }
                return t1.prototype.copy = function(t1) {
                    return this.inputs = t1.inputs.slice(), this.colors = t1.colors.slice(), this.resolves = t1.resolves.slice(), this.preserves = t1.preserves.slice(), this.depthStencil = t1.depthStencil, this.depthStencilResolve = t1.depthStencilResolve, this.shadingRate = t1.shadingRate, this.depthResolveMode = t1.depthResolveMode, this.stencilResolveMode = t1.stencilResolveMode, this;
                }, t1;
            }(), ld = function() {
                function t1(t1, i, n, s, r) {
                    void 0 === t1 && (t1 = 0), void 0 === i && (i = 0), void 0 === n && (n = null), void 0 === s && (s = 0), void 0 === r && (r = 0), this.srcSubpass = t1, this.dstSubpass = i, this.generalBarrier = n, this.prevAccesses = s, this.nextAccesses = r;
                }
                return t1.prototype.copy = function(t1) {
                    return this.srcSubpass = t1.srcSubpass, this.dstSubpass = t1.dstSubpass, this.generalBarrier = t1.generalBarrier, this.prevAccesses = t1.prevAccesses, this.nextAccesses = t1.nextAccesses, this;
                }, t1;
            }(), dd = function() {
                function t1(t1, i, n, s, r) {
                    void 0 === t1 && (t1 = []), void 0 === i && (i = new ad), void 0 === n && (n = new ad), void 0 === s && (s = []), void 0 === r && (r = []), this.colorAttachments = t1, this.depthStencilAttachment = i, this.depthStencilResolveAttachment = n, this.subpasses = s, this.dependencies = r;
                }
                return t1.prototype.copy = function(t1) {
                    return Dv(this.colorAttachments, t1.colorAttachments, cd), this.depthStencilAttachment.copy(t1.depthStencilAttachment), this.depthStencilResolveAttachment.copy(t1.depthStencilResolveAttachment), Dv(this.subpasses, t1.subpasses, vd), Dv(this.dependencies, t1.dependencies, ld), this;
                }, t1;
            }(), wd = function() {
                function t1(t1, i, n, s, r, h, e, u, o) {
                    void 0 === t1 && (t1 = 0), void 0 === i && (i = 0), void 0 === n && (n = 0), void 0 === s && (s = 0), void 0 === r && (r = 0), void 0 === h && (h = 0), void 0 === e && (e = 0), void 0 === u && (u = 0), void 0 === o && (o = 0), this.width = t1, this.height = i, this.depthOrArraySize = n, this.firstSlice = s, this.numSlices = r, this.mipLevel = h, this.levelCount = e, this.basePlane = u, this.planeCount = o;
                }
                return t1.prototype.copy = function(t1) {
                    return this.width = t1.width, this.height = t1.height, this.depthOrArraySize = t1.depthOrArraySize, this.firstSlice = t1.firstSlice, this.numSlices = t1.numSlices, this.mipLevel = t1.mipLevel, this.levelCount = t1.levelCount, this.basePlane = t1.basePlane, this.planeCount = t1.planeCount, this;
                }, t1;
            }(), gd = function() {
                function t1(t1, i, n) {
                    void 0 === t1 && (t1 = 0), void 0 === i && (i = 0), void 0 === n && (n = 0), this.prevAccesses = t1, this.nextAccesses = i, this.type = n;
                }
                return t1.prototype.copy = function(t1) {
                    return this.prevAccesses = t1.prevAccesses, this.nextAccesses = t1.nextAccesses, this.type = t1.type, this;
                }, t1;
            }(), pd = function() {
                function t1(t1, i, n, s, r, h, e) {
                    void 0 === t1 && (t1 = 0), void 0 === i && (i = 0), void 0 === n && (n = 0), void 0 === s && (s = new wd), void 0 === r && (r = !1), void 0 === h && (h = null), void 0 === e && (e = null), this.prevAccesses = t1, this.nextAccesses = i, this.type = n, this.range = s, this.discardContents = r, this.srcQueue = h, this.dstQueue = e;
                }
                return t1.prototype.copy = function(t1) {
                    return this.prevAccesses = t1.prevAccesses, this.nextAccesses = t1.nextAccesses, this.type = t1.type, this.range.copy(t1.range), this.discardContents = t1.discardContents, this.srcQueue = t1.srcQueue, this.dstQueue = t1.dstQueue, this;
                }, t1;
            }(), yd = function() {
                function t1(t1, i, n, s, r, h, e, u) {
                    void 0 === t1 && (t1 = 0), void 0 === i && (i = 0), void 0 === n && (n = 0), void 0 === s && (s = 0), void 0 === r && (r = 0), void 0 === h && (h = !1), void 0 === e && (e = null), void 0 === u && (u = null), this.prevAccesses = t1, this.nextAccesses = i, this.type = n, this.offset = s, this.size = r, this.discardContents = h, this.srcQueue = e, this.dstQueue = u;
                }
                return t1.prototype.copy = function(t1) {
                    return this.prevAccesses = t1.prevAccesses, this.nextAccesses = t1.nextAccesses, this.type = t1.type, this.offset = t1.offset, this.size = t1.size, this.discardContents = t1.discardContents, this.srcQueue = t1.srcQueue, this.dstQueue = t1.dstQueue, this;
                }, t1;
            }(), _d = function() {
                function t1(t1, i, n, s) {
                    void 0 === t1 && (t1 = null), void 0 === i && (i = []), void 0 === n && (n = null), void 0 === s && (s = null), this.renderPass = t1, this.colorTextures = i, this.depthStencilTexture = n, this.depthStencilResolveTexture = s;
                }
                return t1.prototype.copy = function(t1) {
                    return this.renderPass = t1.renderPass, this.colorTextures = t1.colorTextures.slice(), this.depthStencilTexture = t1.depthStencilTexture, this.depthStencilResolveTexture = t1.depthStencilResolveTexture, this;
                }, t1;
            }(), md = function() {
                function t1(t1, i, n, s, r, h, e, u, o) {
                    void 0 === t1 && (t1 = -1), void 0 === i && (i = 0), void 0 === n && (n = 0), void 0 === s && (s = 0), void 0 === r && (r = 1), void 0 === h && (h = 0), void 0 === e && (e = 0), void 0 === u && (u = 0), void 0 === o && (o = []), this.binding = t1, this.descriptorType = i, this.count = n, this.stageFlags = s, this.access = r, this.viewDimension = h, this.sampleType = e, this.format = u, this.immutableSamplers = o;
                }
                return t1.prototype.copy = function(t1) {
                    return this.binding = t1.binding, this.descriptorType = t1.descriptorType, this.count = t1.count, this.stageFlags = t1.stageFlags, this.access = t1.access, this.viewDimension = t1.viewDimension, this.sampleType = t1.sampleType, this.format = t1.format, this.immutableSamplers = t1.immutableSamplers.slice(), this;
                }, t1;
            }(), bd = function() {
                function t1(t1) {
                    void 0 === t1 && (t1 = []), this.bindings = t1;
                }
                return t1.prototype.copy = function(t1) {
                    return Dv(this.bindings, t1.bindings, md), this;
                }, t1;
            }(), kd = function() {
                function t1(t1) {
                    void 0 === t1 && (t1 = null), this.layout = t1;
                }
                return t1.prototype.copy = function(t1) {
                    return this.layout = t1.layout, this;
                }, t1;
            }(), Ad = function() {
                function t1(t1) {
                    void 0 === t1 && (t1 = []), this.setLayouts = t1;
                }
                return t1.prototype.copy = function(t1) {
                    return this.setLayouts = t1.setLayouts.slice(), this;
                }, t1;
            }(), Ed = function() {
                function t1(t1) {
                    void 0 === t1 && (t1 = []), this.attributes = t1;
                }
                return t1.prototype.copy = function(t1) {
                    return Dv(this.attributes, t1.attributes, ud), this;
                }, t1;
            }(), Td = function() {
                function t1(t1, i) {
                    void 0 === t1 && (t1 = null), void 0 === i && (i = 0), this.queue = t1, this.type = i;
                }
                return t1.prototype.copy = function(t1) {
                    return this.queue = t1.queue, this.type = t1.type, this;
                }, t1;
            }(), Sd = function() {
                function t1(t1) {
                    void 0 === t1 && (t1 = 0), this.type = t1;
                }
                return t1.prototype.copy = function(t1) {
                    return this.type = t1.type, this;
                }, t1;
            }(), Od = function() {
                function t1(t1, i, n) {
                    void 0 === t1 && (t1 = 0), void 0 === i && (i = 32767), void 0 === n && (n = !0), this.type = t1, this.maxQueryObjects = i, this.forceWait = n;
                }
                return t1.prototype.copy = function(t1) {
                    return this.type = t1.type, this.maxQueryObjects = t1.maxQueryObjects, this.forceWait = t1.forceWait, this;
                }, t1;
            }(), Id = function() {
                function t1(t1, i, n, s, r, h, e, u) {
                    void 0 === t1 && (t1 = ""), void 0 === i && (i = 0), void 0 === n && (n = 0), void 0 === s && (s = 0), void 0 === r && (r = !1), void 0 === h && (h = !1), void 0 === e && (e = !1), void 0 === u && (u = !1), this.name = t1, this.size = i, this.count = n, this.type = s, this.hasAlpha = r, this.hasDepth = h, this.hasStencil = e, this.isCompressed = u;
                }
                return t1.prototype.copy = function(t1) {
                    return this.name = t1.name, this.size = t1.size, this.count = t1.count, this.type = t1.type, this.hasAlpha = t1.hasAlpha, this.hasDepth = t1.hasDepth, this.hasStencil = t1.hasStencil, this.isCompressed = t1.isCompressed, this;
                }, t1;
            }(), Rd = function() {
                function t1(t1, i) {
                    void 0 === t1 && (t1 = 0), void 0 === i && (i = 0), this.bufferSize = t1, this.textureSize = i;
                }
                return t1.prototype.copy = function(t1) {
                    return this.bufferSize = t1.bufferSize, this.textureSize = t1.textureSize, this;
                }, t1;
            }(), Md = function() {
                function t1(t1, i, n) {
                    void 0 === t1 && (t1 = 0), void 0 === i && (i = 0), void 0 === n && (n = 0), this.writeMask = t1, this.compareMask = i, this.reference = n;
                }
                return t1.prototype.copy = function(t1) {
                    return this.writeMask = t1.writeMask, this.compareMask = t1.compareMask, this.reference = t1.reference, this;
                }, t1;
            }(), Cd = function() {
                function t1(t1, i, n, s, r, h, e, u, o, f, c) {
                    void 0 === t1 && (t1 = new Ul), void 0 === i && (i = new Cl), void 0 === n && (n = new xl), void 0 === s && (s = 1), void 0 === r && (r = 0), void 0 === h && (h = 0), void 0 === e && (e = 0), void 0 === u && (u = 0), void 0 === o && (o = 0), void 0 === f && (f = new Md), void 0 === c && (c = new Md), this.viewport = t1, this.scissor = i, this.blendConstant = n, this.lineWidth = s, this.depthBiasConstant = r, this.depthBiasClamp = h, this.depthBiasSlope = e, this.depthMinBounds = u, this.depthMaxBounds = o, this.stencilStatesFront = f, this.stencilStatesBack = c;
                }
                return t1.prototype.copy = function(t1) {
                    return this.viewport.copy(t1.viewport), this.scissor.copy(t1.scissor), this.blendConstant.copy(t1.blendConstant), this.lineWidth = t1.lineWidth, this.depthBiasConstant = t1.depthBiasConstant, this.depthBiasClamp = t1.depthBiasClamp, this.depthBiasSlope = t1.depthBiasSlope, this.depthMinBounds = t1.depthMinBounds, this.depthMaxBounds = t1.depthMaxBounds, this.stencilStatesFront.copy(t1.stencilStatesFront), this.stencilStatesBack.copy(t1.stencilStatesBack), this;
                }, t1;
            }(), Nd = function(t1) {
                function i(n) {
                    var _$s;
                    return (_$s = t1.call(this) || this).ln = 0, _$s.dn = 0, _$s.wn = 0, _$s.ln = n, _$s.dn = i.gn[0]++, _$s.wn = i.gn[n]++, _$s;
                }
                return h(i, t1), s(i, [
                    {
                        key: "objectType",
                        get: function get() {
                            return this.ln;
                        }
                    },
                    {
                        key: "objectID",
                        get: function get() {
                            return this.dn;
                        }
                    },
                    {
                        key: "typedID",
                        get: function get() {
                            return this.wn;
                        }
                    }
                ]), i;
            }(Cv);
            Nd.gn = Array(19).fill(65536);
            var Pd = {
                ATTR_POSITION: "a_position",
                ATTR_NORMAL: "a_normal",
                ATTR_TANGENT: "a_tangent",
                ATTR_BITANGENT: "a_bitangent",
                ATTR_WEIGHTS: "a_weights",
                ATTR_JOINTS: "a_joints",
                ATTR_COLOR: "a_color",
                ATTR_COLOR1: "a_color1",
                ATTR_COLOR2: "a_color2",
                ATTR_TEX_COORD: "a_texCoord",
                ATTR_TEX_COORD1: "a_texCoord1",
                ATTR_TEX_COORD2: "a_texCoord2",
                ATTR_TEX_COORD3: "a_texCoord3",
                ATTR_TEX_COORD4: "a_texCoord4",
                ATTR_TEX_COORD5: "a_texCoord5",
                ATTR_TEX_COORD6: "a_texCoord6",
                ATTR_TEX_COORD7: "a_texCoord7",
                ATTR_TEX_COORD8: "a_texCoord8",
                ATTR_BATCH_ID: "a_batch_id",
                ATTR_BATCH_UV: "a_batch_uv"
            };
            function Dd(t1, i, n, s, r, h, e, u) {
                return new Id(t1, i, n, s, r, h, e, u);
            }
            function Ld(t1) {
                return new Id("ASTC_SRGBA_" + t1, 1, 4, 1, !0, !1, !1, !0);
            }
            function Bd(t1) {
                return new Id("ASTC_RGBA_" + t1, 1, 4, 1, !0, !1, !1, !0);
            }
            var Fd = Object.freeze([
                Dd("UNKNOWN"),
                Dd("A8", 1, 1, 1, !0),
                Dd("L8", 1, 1, 1),
                Dd("LA8", 1, 2, 1, !0),
                Dd("R8", 1, 1, 1),
                Dd("R8SN", 1, 1, 2),
                Dd("R8UI", 1, 1, 3),
                Dd("R8I", 1, 1, 4),
                Dd("R16F", 2, 1, 6),
                Dd("R16UI", 2, 1, 3),
                Dd("R16I", 2, 1, 4),
                Dd("R32F", 4, 1, 6),
                Dd("R32UI", 4, 1, 3),
                Dd("R32I", 4, 1, 4),
                Dd("RG8", 2, 2, 1),
                Dd("RG8SN", 2, 2, 2),
                Dd("RG8UI", 2, 2, 3),
                Dd("RG8I", 2, 2, 4),
                Dd("RG16F", 4, 2, 6),
                Dd("RG16UI", 4, 2, 3),
                Dd("RG16I", 4, 2, 4),
                Dd("RG32F", 8, 2, 6),
                Dd("RG32UI", 8, 2, 3),
                Dd("RG32I", 8, 2, 4),
                Dd("RGB8", 3, 3, 1),
                Dd("SRGB8", 3, 3, 1),
                Dd("RGB8SN", 3, 3, 2),
                Dd("RGB8UI", 3, 3, 3),
                Dd("RGB8I", 3, 3, 4),
                Dd("RGB16F", 6, 3, 6),
                Dd("RGB16UI", 6, 3, 3),
                Dd("RGB16I", 6, 3, 4),
                Dd("RGB32F", 12, 3, 6),
                Dd("RGB32UI", 12, 3, 3),
                Dd("RGB32I", 12, 3, 4),
                Dd("RGBA8", 4, 4, 1, !0),
                Dd("BGRA8", 4, 4, 1, !0),
                Dd("SRGB8_A8", 4, 4, 1, !0),
                Dd("RGBA8SN", 4, 4, 2, !0),
                Dd("RGBA8UI", 4, 4, 3, !0),
                Dd("RGBA8I", 4, 4, 4, !0),
                Dd("RGBA16F", 8, 4, 6, !0),
                Dd("RGBA16UI", 8, 4, 3, !0),
                Dd("RGBA16I", 8, 4, 4, !0),
                Dd("RGBA32F", 16, 4, 6, !0),
                Dd("RGBA32UI", 16, 4, 3, !0),
                Dd("RGBA32I", 16, 4, 4, !0),
                Dd("R5G6B5", 2, 3, 1),
                Dd("R11G11B10F", 4, 3, 6),
                Dd("RGB5A1", 2, 4, 1, !0),
                Dd("RGBA4", 2, 4, 1, !0),
                Dd("RGB10A2", 2, 4, 1, !0),
                Dd("RGB10A2UI", 2, 4, 3, !0),
                Dd("RGB9E5", 2, 4, 6, !0),
                Dd("DEPTH", 4, 1, 6, !1, !0),
                Dd("DEPTH_STENCIL", 5, 2, 6, !1, !0, !0),
                Dd("BC1", 1, 3, 1, !1, !1, !1, !0),
                Dd("BC1_ALPHA", 1, 4, 1, !0, !1, !1, !0),
                Dd("BC1_SRGB", 1, 3, 1, !1, !1, !1, !0),
                Dd("BC1_SRGB_ALPHA", 1, 4, 1, !0, !1, !1, !0),
                Dd("BC2", 1, 4, 1, !0, !1, !1, !0),
                Dd("BC2_SRGB", 1, 4, 1, !0, !1, !1, !0),
                Dd("BC3", 1, 4, 1, !0, !1, !1, !0),
                Dd("BC3_SRGB", 1, 4, 1, !0, !1, !1, !0),
                Dd("BC4", 1, 1, 1, !1, !1, !1, !0),
                Dd("BC4_SNORM", 1, 1, 2, !1, !1, !1, !0),
                Dd("BC5", 1, 2, 1, !1, !1, !1, !0),
                Dd("BC5_SNORM", 1, 2, 2, !1, !1, !1, !0),
                Dd("BC6H_UF16", 1, 3, 5, !1, !1, !1, !0),
                Dd("BC6H_SF16", 1, 3, 6, !1, !1, !1, !0),
                Dd("BC7", 1, 4, 1, !0, !1, !1, !0),
                Dd("BC7_SRGB", 1, 4, 1, !0, !1, !1, !0),
                Dd("ETC_RGB8", 1, 3, 1, !1, !1, !1, !0),
                Dd("ETC2_RGB8", 1, 3, 1, !1, !1, !1, !0),
                Dd("ETC2_SRGB8", 1, 3, 1, !1, !1, !1, !0),
                Dd("ETC2_RGB8_A1", 1, 4, 1, !0, !1, !1, !0),
                Dd("ETC2_SRGB8_A1", 1, 4, 1, !0, !1, !1, !0),
                Dd("ETC2_RGBA8", 2, 4, 1, !0, !1, !1, !0),
                Dd("ETC2_SRGB8_A8", 2, 4, 1, !0, !1, !1, !0),
                Dd("EAC_R11", 1, 1, 1, !1, !1, !1, !0),
                Dd("EAC_R11SN", 1, 1, 2, !1, !1, !1, !0),
                Dd("EAC_RG11", 2, 2, 1, !1, !1, !1, !0),
                Dd("EAC_RG11SN", 2, 2, 2, !1, !1, !1, !0),
                Dd("PVRTC_RGB2", 2, 3, 1, !1, !1, !1, !0),
                Dd("PVRTC_RGBA2", 2, 4, 1, !0, !1, !1, !0),
                Dd("PVRTC_RGB4", 2, 3, 1, !1, !1, !1, !0),
                Dd("PVRTC_RGBA4", 2, 4, 1, !0, !1, !1, !0),
                Dd("PVRTC2_2BPP", 2, 4, 1, !0, !1, !1, !0),
                Dd("PVRTC2_4BPP", 2, 4, 1, !0, !1, !1, !0),
                Bd("4x4"),
                Bd("5x4"),
                Bd("5x5"),
                Bd("6x5"),
                Bd("6x6"),
                Bd("8x5"),
                Bd("8x6"),
                Bd("8x8"),
                Bd("10x5"),
                Bd("10x6"),
                Bd("10x8"),
                Bd("10x10"),
                Bd("12x10"),
                Bd("12x12"),
                Ld("4x4"),
                Ld("5x4"),
                Ld("5x5"),
                Ld("6x5"),
                Ld("6x6"),
                Ld("8x5"),
                Ld("8x6"),
                Ld("8x8"),
                Ld("10x5"),
                Ld("10x6"),
                Ld("10x8"),
                Ld("10x10"),
                Ld("12x10"),
                Ld("12x12")
            ]);
            function jd(t1) {
                return t1 > 0 && !(t1 & t1 - 1);
            }
            var Gd = Math.ceil;
            function Hd(t1, i, n, s) {
                if (!Fd[t1].isCompressed) return i * n * s * Fd[t1].size;
                switch(t1){
                    case 56:
                    case 57:
                    case 58:
                    case 59:
                    case 72:
                    case 73:
                    case 74:
                    case 75:
                    case 79:
                    case 80:
                    case 85:
                    case 86:
                    case 88:
                        return Gd(i / 4) * Gd(n / 4) * 8 * s;
                    case 60:
                    case 61:
                    case 62:
                    case 63:
                    case 64:
                    case 65:
                    case 69:
                    case 68:
                    case 70:
                    case 71:
                    case 77:
                    case 76:
                    case 81:
                    case 82:
                    case 89:
                    case 103:
                        return Gd(i / 4) * Gd(n / 4) * 16 * s;
                    case 66:
                    case 67:
                        return Gd(i / 4) * Gd(n / 4) * 32 * s;
                    case 83:
                    case 84:
                    case 87:
                        return Gd(i / 8) * Gd(n / 4) * 8 * s;
                    case 90:
                    case 104:
                        return Gd(i / 5) * Gd(n / 4) * 16 * s;
                    case 91:
                    case 105:
                        return Gd(i / 5) * Gd(n / 5) * 16 * s;
                    case 92:
                    case 106:
                        return Gd(i / 6) * Gd(n / 5) * 16 * s;
                    case 93:
                    case 107:
                        return Gd(i / 6) * Gd(n / 6) * 16 * s;
                    case 94:
                    case 108:
                        return Gd(i / 8) * Gd(n / 5) * 16 * s;
                    case 95:
                    case 109:
                        return Gd(i / 8) * Gd(n / 6) * 16 * s;
                    case 96:
                    case 110:
                        return Gd(i / 8) * Gd(n / 8) * 16 * s;
                    case 97:
                    case 111:
                        return Gd(i / 10) * Gd(n / 5) * 16 * s;
                    case 98:
                    case 112:
                        return Gd(i / 10) * Gd(n / 6) * 16 * s;
                    case 99:
                    case 113:
                        return Gd(i / 10) * Gd(n / 8) * 16 * s;
                    case 100:
                    case 114:
                        return Gd(i / 10) * Gd(n / 10) * 16 * s;
                    case 101:
                    case 115:
                        return Gd(i / 12) * Gd(n / 10) * 16 * s;
                    case 102:
                    case 116:
                        return Gd(i / 12) * Gd(n / 12) * 16 * s;
                    default:
                        return 0;
                }
            }
            function Vd(t1, i, n, s, r) {
                for(var h = 0, e = 0; e < r; ++e)h += Hd(t1, i, n, s), i = Math.max(i >> 1, 1), n = Math.max(n >> 1, 1);
                return h;
            }
            var Wd = [
                0,
                4,
                8,
                12,
                16,
                4,
                8,
                12,
                16,
                4,
                8,
                12,
                16,
                4,
                8,
                12,
                16,
                16,
                24,
                32,
                24,
                36,
                48,
                32,
                48,
                64,
                4,
                4,
                4,
                4,
                4,
                4
            ];
            function zd(t1) {
                return Wd[t1] || 0;
            }
            function $d(t1) {
                if (t1.isCompressed) return Uint8Array;
                var i = t1.size / t1.count;
                switch(t1.type){
                    case 1:
                    case 3:
                        switch(i){
                            case 1:
                            default:
                                return Uint8Array;
                            case 2:
                                return Uint16Array;
                            case 4:
                                return Uint32Array;
                        }
                    case 2:
                    case 4:
                        switch(i){
                            case 1:
                            default:
                                return Int8Array;
                            case 2:
                                return Int16Array;
                            case 4:
                                return Int32Array;
                        }
                    case 6:
                        return 2 === i ? Uint16Array : Float32Array;
                }
                return Float32Array;
            }
            function Xd(t1) {
                switch(t1){
                    case 56:
                    case 57:
                    case 58:
                    case 59:
                    case 60:
                    case 61:
                    case 62:
                    case 63:
                    case 64:
                    case 65:
                    case 69:
                    case 68:
                    case 70:
                    case 71:
                    case 66:
                    case 67:
                    case 72:
                    case 73:
                    case 74:
                    case 75:
                    case 79:
                    case 80:
                    case 77:
                    case 76:
                    case 81:
                    case 82:
                    case 85:
                    case 86:
                    case 88:
                    case 89:
                    case 103:
                        return {
                            width: 4,
                            height: 4
                        };
                    case 83:
                    case 84:
                    case 87:
                        return {
                            width: 8,
                            height: 4
                        };
                    case 90:
                    case 104:
                        return {
                            width: 5,
                            height: 4
                        };
                    case 91:
                    case 105:
                        return {
                            width: 5,
                            height: 5
                        };
                    case 92:
                    case 106:
                        return {
                            width: 6,
                            height: 5
                        };
                    case 93:
                    case 107:
                        return {
                            width: 6,
                            height: 6
                        };
                    case 94:
                    case 108:
                        return {
                            width: 8,
                            height: 5
                        };
                    case 95:
                    case 109:
                        return {
                            width: 8,
                            height: 6
                        };
                    case 96:
                    case 110:
                        return {
                            width: 8,
                            height: 8
                        };
                    case 97:
                    case 111:
                        return {
                            width: 10,
                            height: 5
                        };
                    case 98:
                    case 112:
                        return {
                            width: 10,
                            height: 6
                        };
                    case 99:
                    case 113:
                        return {
                            width: 10,
                            height: 8
                        };
                    case 100:
                    case 114:
                        return {
                            width: 10,
                            height: 10
                        };
                    case 101:
                    case 115:
                        return {
                            width: 12,
                            height: 10
                        };
                    case 102:
                    case 116:
                        return {
                            width: 12,
                            height: 12
                        };
                    default:
                        return {
                            width: 1,
                            height: 1
                        };
                }
            }
            function qd(t1, i) {
                return Gd(t1 / i) * i;
            }
            var Yd = Object.freeze({
                __proto__: null,
                API: Fv,
                AccessFlagBit: al,
                Address: nl,
                Attribute: ud,
                AttributeName: Pd,
                BarrierType: Tl,
                BindingMappingInfo: Gl,
                BlendFactor: hl,
                BlendOp: el,
                BufferBarrierInfo: yd,
                BufferFlagBit: zv,
                BufferInfo: Wl,
                BufferTextureCopy: Fl,
                BufferUsageBit: Wv,
                BufferViewInfo: zl,
                ClearFlagBit: El,
                Color: xl,
                ColorAttachment: cd,
                ColorMask: ul,
                CommandBufferInfo: Td,
                CommandBufferType: Al,
                ComparisonFunc: sl,
                CullMode: pl,
                DESCRIPTOR_BUFFER_TYPE: 15,
                DESCRIPTOR_DYNAMIC_TYPE: 10,
                DESCRIPTOR_SAMPLER_TYPE: 496,
                DESCRIPTOR_STORAGE_BUFFER_TYPE: 12,
                DRAW_INFO_SIZE: 28,
                DepthStencilAttachment: ad,
                DescriptorSetInfo: kd,
                DescriptorSetLayoutBinding: md,
                DescriptorSetLayoutInfo: bd,
                DescriptorType: ml,
                DeviceCaps: Il,
                DeviceInfo: Vl,
                DeviceOptions: Rl,
                DispatchInfo: Xl,
                DrawInfo: $l,
                DynamicStateFlagBit: yl,
                DynamicStates: Cd,
                DynamicStencilStates: Md,
                Extent: Nl,
                Feature: xv,
                Filter: il,
                Format: jv,
                FormatFeatureBit: Qv,
                FormatInfo: Id,
                FormatInfos: Fd,
                FormatSize: Hd,
                FormatSurfaceSize: Vd,
                FormatType: Gv,
                FramebufferInfo: _d,
                GFXObject: Nd,
                GeneralBarrierInfo: gd,
                GetTypeSize: zd,
                IndirectBuffer: ql,
                InputAssemblerInfo: fd,
                InputState: Ed,
                IsPowerOf2: jd,
                LoadOp: fl,
                MarkerInfo: jl,
                MemoryAccessBit: $v,
                MemoryStatus: Rd,
                MemoryUsageBit: Xv,
                ObjectType: Lv,
                Offset: Ml,
                PassType: Sl,
                PipelineBindPoint: ll,
                PipelineLayoutInfo: Ad,
                PolygonMode: wl,
                PrimitiveMode: dl,
                QueryPoolInfo: Od,
                QueryType: kl,
                QueueInfo: Sd,
                QueueType: bl,
                Rect: Cl,
                RenderPassInfo: dd,
                ResolveMode: vl,
                ResourceRange: wd,
                SampleCount: Zv,
                SampleType: Hv,
                SamplerInfo: Jl,
                ShadeModel: gl,
                ShaderInfo: od,
                ShaderStage: ed,
                ShaderStageFlagBit: ol,
                Size: Ol,
                Status: Bv,
                StencilFace: _l,
                StencilOp: rl,
                StoreOp: cl,
                SubpassDependency: ld,
                SubpassInfo: vd,
                SurfaceTransform: Uv,
                SwapchainInfo: Hl,
                TextureBarrierInfo: pd,
                TextureBlit: Bl,
                TextureCopy: Ll,
                TextureFlagBit: Jv,
                TextureInfo: Yl,
                TextureSubresLayers: Pl,
                TextureSubresRange: Dl,
                TextureType: qv,
                TextureUsageBit: Kv,
                TextureViewInfo: Kl,
                Type: Vv,
                Uniform: Ql,
                UniformBlock: Zl,
                UniformInputAttachment: hd,
                UniformSampler: id,
                UniformSamplerTexture: td,
                UniformStorageBuffer: rd,
                UniformStorageImage: sd,
                UniformTexture: nd,
                ViewDimension: Yv,
                Viewport: Ul,
                VsyncMode: tl,
                alignTo: qd,
                formatAlignment: Xd,
                getTypedArrayConstructor: $d
            }), Kd = function(t1) {
                function i() {
                    var _$i;
                    return (_$i = t1.call(this, 2) || this).pn = 0, _$i.yn = 0, _$i._n = 0, _$i.mn = 1, _$i.et = 0, _$i.Qt = 0, _$i.kn = !1, _$i;
                }
                return h(i, t1), s(i, [
                    {
                        key: "usage",
                        get: function get() {
                            return this.pn;
                        }
                    },
                    {
                        key: "memUsage",
                        get: function get() {
                            return this.yn;
                        }
                    },
                    {
                        key: "size",
                        get: function get() {
                            return this._n;
                        }
                    },
                    {
                        key: "stride",
                        get: function get() {
                            return this.mn;
                        }
                    },
                    {
                        key: "count",
                        get: function get() {
                            return this.et;
                        }
                    },
                    {
                        key: "flags",
                        get: function get() {
                            return this.Qt;
                        }
                    }
                ]), i;
            }(Nd), Jd = function(t1) {
                function i() {
                    var _$i;
                    return (_$i = t1.call(this, 13) || this).An = null, _$i.U = 0, _$i.En = 0, _$i.Tn = 0, _$i.Sn = 0, _$i;
                }
                return h(i, t1), s(i, [
                    {
                        key: "type",
                        get: function get() {
                            return this.U;
                        }
                    },
                    {
                        key: "queue",
                        get: function get() {
                            return this.An;
                        }
                    },
                    {
                        key: "numDrawCalls",
                        get: function get() {
                            return this.En;
                        }
                    },
                    {
                        key: "numInstances",
                        get: function get() {
                            return this.Tn;
                        }
                    },
                    {
                        key: "numTris",
                        get: function get() {
                            return this.Sn;
                        }
                    }
                ]), i;
            }(Nd), Qd = function() {
                function t1() {
                    this.On = 0, this.In = "", this.Rn = "", this.Mn = Array(10), this.Cn = Array(117), this.An = null, this.Nn = null, this.En = 0, this.Tn = 0, this.Sn = 0, this.Pn = new Rd, this.Dn = new Il, this.Ln = new Gl, this.Bn = new Map, this.Fn = new Map, this.Un = new Map, this.xn = new Map, this.jn = 35;
                }
                var i = t1.prototype;
                return i.hasFeature = function(t1) {
                    return this.Mn[t1];
                }, i.getFormatFeatures = function(t1) {
                    return this.Cn[t1];
                }, i.enableAutoBarrier = function() {}, i.getMaxSampleCount = function() {
                    return 1;
                }, s(t1, [
                    {
                        key: "gfxAPI",
                        get: function get() {
                            return this.On;
                        }
                    },
                    {
                        key: "queue",
                        get: function get() {
                            return this.An;
                        }
                    },
                    {
                        key: "commandBuffer",
                        get: function get() {
                            return this.Nn;
                        }
                    },
                    {
                        key: "swapchainFormat",
                        get: function get() {
                            return this.jn;
                        }
                    },
                    {
                        key: "renderer",
                        get: function get() {
                            return this.In;
                        }
                    },
                    {
                        key: "vendor",
                        get: function get() {
                            return this.Rn;
                        }
                    },
                    {
                        key: "numDrawCalls",
                        get: function get() {
                            return this.En;
                        }
                    },
                    {
                        key: "numInstances",
                        get: function get() {
                            return this.Tn;
                        }
                    },
                    {
                        key: "numTris",
                        get: function get() {
                            return this.Sn;
                        }
                    },
                    {
                        key: "memoryStatus",
                        get: function get() {
                            return this.Pn;
                        }
                    },
                    {
                        key: "capabilities",
                        get: function get() {
                            return this.Dn;
                        }
                    },
                    {
                        key: "bindingMappingInfo",
                        get: function get() {
                            return this.Ln;
                        }
                    }
                ]), t1;
            }();
            Qd.Gn = void 0;
            var Zd = function() {
                function t1(t1) {
                    this.Hn = null, this.Vn = null, this.Wn = null, this.zn = null;
                    var i = t1.capabilities, n = new Uint8Array(64);
                    if (n.fill(255), i.maxTextureSize >= 2) {
                        this.Hn = t1.createTexture(new Yl(1, 12, 35, 2, 2, 0));
                        var s = new Fl(0, 0, 0, new Ml(0, 0, 0), new Nl(2, 2, 1));
                        t1.copyBuffersToTexture([
                            n
                        ], this.Hn, [
                            s
                        ]);
                    }
                    if (i.maxTextureSize >= 2) {
                        this.Wn = t1.createTexture(new Yl(3, 12, 35, 2, 2, 0, 6));
                        var _$r = new Fl(0, 0, 0, new Ml(0, 0, 0), new Nl(2, 2, 1));
                        t1.copyBuffersToTexture([
                            n
                        ], this.Wn, [
                            _$r
                        ]), _$r.texSubres.baseArrayLayer = 1, t1.copyBuffersToTexture([
                            n
                        ], this.Wn, [
                            _$r
                        ]), _$r.texSubres.baseArrayLayer = 2, t1.copyBuffersToTexture([
                            n
                        ], this.Wn, [
                            _$r
                        ]), _$r.texSubres.baseArrayLayer = 3, t1.copyBuffersToTexture([
                            n
                        ], this.Wn, [
                            _$r
                        ]), _$r.texSubres.baseArrayLayer = 4, t1.copyBuffersToTexture([
                            n
                        ], this.Wn, [
                            _$r
                        ]), _$r.texSubres.baseArrayLayer = 5, t1.copyBuffersToTexture([
                            n
                        ], this.Wn, [
                            _$r
                        ]);
                    }
                    if (i.max3DTextureSize >= 2) {
                        this.Vn = t1.createTexture(new Yl(2, 12, 35, 2, 2, 0, 1, 1, 1, 2));
                        var h = new Fl(0, 0, 0, new Ml(0, 0, 0), new Nl(2, 2, 2), new Pl(0, 0, 1));
                        t1.copyBuffersToTexture([
                            n
                        ], this.Vn, [
                            h
                        ]);
                    }
                    if (i.maxArrayTextureLayers >= 2) {
                        this.zn = t1.createTexture(new Yl(5, 12, 35, 2, 2, 0, 2));
                        var e = new Fl(0, 0, 0, new Ml(0, 0, 0), new Nl(2, 2, 1), new Pl(0, 0, 1));
                        t1.copyBuffersToTexture([
                            n
                        ], this.zn, [
                            e
                        ]), e.texSubres.baseArrayLayer = 1, t1.copyBuffersToTexture([
                            n
                        ], this.zn, [
                            e
                        ]);
                    }
                }
                return t1.prototype.$n = function(t1) {
                    switch(t1){
                        case 1:
                            return this.Hn;
                        case 2:
                            return this.Vn;
                        case 3:
                            return this.Wn;
                        case 5:
                            return this.zn;
                        default:
                            return null;
                    }
                }, t1;
            }(), tw = function(t1) {
                function i() {
                    var _$i;
                    return (_$i = t1.call(this, 1) || this).Xn = 0, _$i.qn = null, _$i.Yn = null, _$i;
                }
                return h(i, t1), s(i, [
                    {
                        key: "colorTexture",
                        get: function get() {
                            return this.qn;
                        }
                    },
                    {
                        key: "depthStencilTexture",
                        get: function get() {
                            return this.Yn;
                        }
                    },
                    {
                        key: "surfaceTransform",
                        get: function get() {
                            return this.Xn;
                        }
                    },
                    {
                        key: "width",
                        get: function get() {
                            return this.qn.width;
                        }
                    },
                    {
                        key: "height",
                        get: function get() {
                            return this.qn.height;
                        }
                    }
                ]), i;
            }(Nd), iw = function(t1) {
                function i() {
                    var _$i;
                    return (_$i = t1.call(this, 5) || this).Kn = null, _$i.Jn = [], _$i.Yn = null, _$i.Qn = 0, _$i.Zn = 0, _$i;
                }
                return h(i, t1), s(i, [
                    {
                        key: "renderPass",
                        get: function get() {
                            return this.Kn;
                        }
                    },
                    {
                        key: "colorTextures",
                        get: function get() {
                            return this.Jn;
                        }
                    },
                    {
                        key: "depthStencilTexture",
                        get: function get() {
                            return this.Yn;
                        }
                    },
                    {
                        key: "width",
                        get: function get() {
                            var _$t, _$i;
                            return this.colorTextures.length > 0 ? null != (_$t = null == (_$i = this.colorTextures[0]) ? void 0 : _$i.width) ? _$t : this.Qn : this.depthStencilTexture ? this.depthStencilTexture.width : this.Qn;
                        }
                    },
                    {
                        key: "height",
                        get: function get() {
                            var _$t, _$i;
                            return this.colorTextures.length > 0 ? null != (_$t = null == (_$i = this.colorTextures[0]) ? void 0 : _$i.height) ? _$t : this.Zn : this.depthStencilTexture ? this.depthStencilTexture.height : this.Zn;
                        }
                    },
                    {
                        key: "needRebuild",
                        get: function get() {
                            return !1;
                        }
                    }
                ]), i;
            }(Nd), nw = function(t1) {
                function i() {
                    var _$i;
                    return (_$i = t1.call(this, 12) || this).ts = [], _$i.ns = 0, _$i.ss = [], _$i.rs = null, _$i.hs = null, _$i.es = new $l, _$i;
                }
                h(i, t1);
                var n = i.prototype;
                return n.getVertexBuffer = function(t1) {
                    return void 0 === t1 && (t1 = 0), t1 < this.ss.length ? this.ss[t1] : null;
                }, n.computeAttributesHash = function() {
                    for(var _$t = "attrs", _$i = 0; _$i < this.attributes.length; ++_$i){
                        var n = this.attributes[_$i];
                        _$t += "," + n.name + "," + n.format + "," + n.isNormalized + "," + n.stream + "," + n.isInstanced + "," + n.location;
                    }
                    return Iv(_$t, 666);
                }, s(i, [
                    {
                        key: "attributes",
                        get: function get() {
                            return this.ts;
                        }
                    },
                    {
                        key: "vertexBuffers",
                        get: function get() {
                            return this.ss;
                        }
                    },
                    {
                        key: "indexBuffer",
                        get: function get() {
                            return this.rs;
                        }
                    },
                    {
                        key: "indirectBuffer",
                        get: function get() {
                            return this.hs;
                        }
                    },
                    {
                        key: "attributesHash",
                        get: function get() {
                            return this.ns;
                        }
                    },
                    {
                        key: "vertexCount",
                        get: function get() {
                            return this.es.vertexCount;
                        },
                        set: function set(t1) {
                            this.es.vertexCount = t1;
                        }
                    },
                    {
                        key: "firstVertex",
                        get: function get() {
                            return this.es.firstVertex;
                        },
                        set: function set(t1) {
                            this.es.firstVertex = t1;
                        }
                    },
                    {
                        key: "indexCount",
                        get: function get() {
                            return this.es.indexCount;
                        },
                        set: function set(t1) {
                            this.es.indexCount = t1;
                        }
                    },
                    {
                        key: "firstIndex",
                        get: function get() {
                            return this.es.firstIndex;
                        },
                        set: function set(t1) {
                            this.es.firstIndex = t1;
                        }
                    },
                    {
                        key: "vertexOffset",
                        get: function get() {
                            return this.es.vertexOffset;
                        },
                        set: function set(t1) {
                            this.es.vertexOffset = t1;
                        }
                    },
                    {
                        key: "instanceCount",
                        get: function get() {
                            return this.es.instanceCount;
                        },
                        set: function set(t1) {
                            this.es.instanceCount = t1;
                        }
                    },
                    {
                        key: "firstInstance",
                        get: function get() {
                            return this.es.firstInstance;
                        },
                        set: function set(t1) {
                            this.es.firstInstance = t1;
                        }
                    },
                    {
                        key: "drawInfo",
                        get: function get() {
                            return this.es;
                        },
                        set: function set(t1) {
                            this.es = t1;
                        }
                    }
                ]), i;
            }(Nd), sw = function(t1) {
                function i() {
                    var _$i;
                    return (_$i = t1.call(this, 11) || this).us = null, _$i.fs = [], _$i.vs = [], _$i.Bn = [], _$i.ls = !1, _$i;
                }
                h(i, t1);
                var n = i.prototype;
                return n.bindBuffer = function(t1, i, n) {
                    void 0 === n && (n = 0);
                    var _$s = this.us.bindingIndices[t1], _$r = this.us.bindings[_$s];
                    if (_$r && 15 & _$r.descriptorType) {
                        var _$h = this.us.descriptorIndices[t1];
                        this.fs[_$h + n] !== i && (this.fs[_$h + n] = i, this.ls = !0);
                    }
                }, n.bindSampler = function(t1, i, n) {
                    void 0 === n && (n = 0);
                    var _$s = this.us.bindingIndices[t1], _$r = this.us.bindings[_$s];
                    if (_$r && 496 & _$r.descriptorType) {
                        var _$h = this.us.descriptorIndices[t1];
                        this.Bn[_$h + n] !== i && (this.Bn[_$h + n] = i, this.ls = !0);
                    }
                }, n.bindTexture = function(t1, i, n) {
                    void 0 === n && (n = 0);
                    var _$s = this.us.bindingIndices[t1], _$r = this.us.bindings[_$s];
                    if (_$r && 496 & _$r.descriptorType) {
                        var _$h = this.us.descriptorIndices[t1];
                        this.vs[_$h + n] !== i && (this.vs[_$h + n] = i, this.ls = !0);
                    }
                }, n.getBuffer = function(t1, i) {
                    void 0 === i && (i = 0);
                    var n = this.us.descriptorIndices[t1];
                    return this.fs[n + i];
                }, n.getSampler = function(t1, i) {
                    void 0 === i && (i = 0);
                    var n = this.us.descriptorIndices[t1];
                    return this.Bn[n + i];
                }, n.getTexture = function(t1, i) {
                    void 0 === i && (i = 0);
                    var n = this.us.descriptorIndices[t1];
                    return this.vs[n + i];
                }, s(i, [
                    {
                        key: "layout",
                        get: function get() {
                            return this.us;
                        }
                    }
                ]), i;
            }(Nd), rw = function(t1) {
                function i() {
                    var _$i;
                    return (_$i = t1.call(this, 8) || this).ds = [], _$i.ws = [], _$i.gs = [], _$i;
                }
                return h(i, t1), s(i, [
                    {
                        key: "bindings",
                        get: function get() {
                            return this.ds;
                        }
                    },
                    {
                        key: "bindingIndices",
                        get: function get() {
                            return this.ws;
                        }
                    },
                    {
                        key: "descriptorIndices",
                        get: function get() {
                            return this.gs;
                        }
                    }
                ]), i;
            }(Nd), hw = function(t1) {
                function i() {
                    var _$i;
                    return (_$i = t1.call(this, 9) || this).ps = [], _$i;
                }
                return h(i, t1), s(i, [
                    {
                        key: "setLayouts",
                        get: function get() {
                            return this.ps;
                        }
                    }
                ]), i;
            }(Nd), ew = function() {
                function t1(t1, i, n, s, r, h, e, u, o, f, c, a) {
                    void 0 === t1 && (t1 = !1), void 0 === i && (i = 0), void 0 === n && (n = 0), void 0 === s && (s = 2), void 0 === r && (r = !0), void 0 === h && (h = !1), void 0 === e && (e = 0), void 0 === u && (u = 0), void 0 === o && (o = 0), void 0 === f && (f = !0), void 0 === c && (c = !1), void 0 === a && (a = 1), this.isDiscard = t1, this.polygonMode = i, this.shadeModel = n, this.cullMode = s, this.isFrontFaceCCW = r, this.depthBiasEnabled = h, this.depthBias = e, this.depthBiasClamp = u, this.depthBiasSlop = o, this.isDepthClip = f, this.isMultisample = c, this.lineWidth = a;
                }
                var i = t1.prototype;
                return i.reset = function() {
                    this.isDiscard = !1, this.polygonMode = 0, this.shadeModel = 0, this.cullMode = 2, this.isFrontFaceCCW = !0, this.depthBiasEnabled = !1, this.depthBias = 0, this.depthBiasClamp = 0, this.depthBiasSlop = 0, this.isDepthClip = !0, this.isMultisample = !1, this.lineWidth = 1;
                }, i.assign = function(t1) {
                    Object.assign(this, t1);
                }, i.destroy = function() {}, s(t1, [
                    {
                        key: "native",
                        get: function get() {
                            return this;
                        }
                    }
                ]), t1;
            }(), uw = function() {
                function t1(t1, i, n, s, r, h, e, u, o, f, c, a, v, l, d, w, g, p, y) {
                    void 0 === t1 && (t1 = !0), void 0 === i && (i = !0), void 0 === n && (n = 1), void 0 === s && (s = !1), void 0 === r && (r = 7), void 0 === h && (h = 65535), void 0 === e && (e = 65535), void 0 === u && (u = 1), void 0 === o && (o = 1), void 0 === f && (f = 1), void 0 === c && (c = 1), void 0 === a && (a = !1), void 0 === v && (v = 7), void 0 === l && (l = 65535), void 0 === d && (d = 65535), void 0 === w && (w = 1), void 0 === g && (g = 1), void 0 === p && (p = 1), void 0 === y && (y = 1), this.depthTest = t1, this.depthWrite = i, this.depthFunc = n, this.stencilTestFront = s, this.stencilFuncFront = r, this.stencilReadMaskFront = h, this.stencilWriteMaskFront = e, this.stencilFailOpFront = u, this.stencilZFailOpFront = o, this.stencilPassOpFront = f, this.stencilRefFront = c, this.stencilTestBack = a, this.stencilFuncBack = v, this.stencilReadMaskBack = l, this.stencilWriteMaskBack = d, this.stencilFailOpBack = w, this.stencilZFailOpBack = g, this.stencilPassOpBack = p, this.stencilRefBack = y;
                }
                var i = t1.prototype;
                return i.reset = function() {
                    this.depthTest = !0, this.depthWrite = !0, this.depthFunc = 1, this.stencilTestFront = !1, this.stencilFuncFront = 7, this.stencilReadMaskFront = 65535, this.stencilWriteMaskFront = 65535, this.stencilFailOpFront = 1, this.stencilZFailOpFront = 1, this.stencilPassOpFront = 1, this.stencilRefFront = 1, this.stencilTestBack = !1, this.stencilFuncBack = 7, this.stencilReadMaskBack = 65535, this.stencilWriteMaskBack = 65535, this.stencilFailOpBack = 1, this.stencilZFailOpBack = 1, this.stencilPassOpBack = 1, this.stencilRefBack = 1;
                }, i.assign = function(t1) {
                    Object.assign(this, t1);
                }, i.destroy = function() {}, s(t1, [
                    {
                        key: "native",
                        get: function get() {
                            return this;
                        }
                    }
                ]), t1;
            }(), ow = function() {
                function t1(t1, i, n, s, r, h, e, u) {
                    void 0 === t1 && (t1 = !1), void 0 === i && (i = 1), void 0 === n && (n = 0), void 0 === s && (s = 0), void 0 === r && (r = 1), void 0 === h && (h = 0), void 0 === e && (e = 0), void 0 === u && (u = 15), this.blend = t1, this.blendSrc = i, this.blendDst = n, this.blendEq = s, this.blendSrcAlpha = r, this.blendDstAlpha = h, this.blendAlphaEq = e, this.blendColorMask = u;
                }
                var i = t1.prototype;
                return i.reset = function() {
                    this.blend = !1, this.blendSrc = 1, this.blendDst = 0, this.blendEq = 0, this.blendSrcAlpha = 1, this.blendDstAlpha = 0, this.blendAlphaEq = 0, this.blendColorMask = 15;
                }, i.assign = function(t1) {
                    Object.assign(this, t1);
                }, i.destroy = function() {}, t1;
            }(), fw = function() {
                function t1(t1, i, n, s) {
                    void 0 === t1 && (t1 = !1), void 0 === i && (i = !1), void 0 === n && (n = new xl), void 0 === s && (s = [
                        new ow
                    ]), this.isA2C = t1, this.isIndepend = i, this.blendColor = n, this.targets = s;
                }
                var i = t1.prototype;
                return i.setTarget = function(t1, i) {
                    var n = this.targets[t1];
                    n || (n = this.targets[t1] = new ow), Object.assign(n, i);
                }, i.reset = function() {
                    this.isA2C = !1, this.isIndepend = !1, this.blendColor.x = 0, this.blendColor.y = 0, this.blendColor.z = 0, this.blendColor.w = 0, this.targets.length = 1, this.targets[0].reset();
                }, i.destroy = function() {}, s(t1, [
                    {
                        key: "native",
                        get: function get() {
                            return this;
                        }
                    }
                ]), t1;
            }(), cw = function cw(t1, i, n, s, r, h, e, u, o, f) {
                void 0 === t1 && (t1 = null), void 0 === i && (i = null), void 0 === n && (n = null), void 0 === s && (s = new Ed), void 0 === r && (r = new ew), void 0 === h && (h = new uw), void 0 === e && (e = new fw), void 0 === u && (u = 7), void 0 === o && (o = 0), void 0 === f && (f = 0), this.shader = t1, this.pipelineLayout = i, this.renderPass = n, this.inputState = s, this.rasterizerState = r, this.depthStencilState = h, this.blendState = e, this.primitive = u, this.dynamicStates = o, this.bindPoint = f;
            }, aw = function(t1) {
                function i() {
                    var _$i;
                    return (_$i = t1.call(this, 10) || this).ys = null, _$i._s = null, _$i.ks = 7, _$i.As = null, _$i.Es = new ew, _$i.Ts = new uw, _$i.Ss = new fw, _$i.Os = 0, _$i.Kn = null, _$i;
                }
                return h(i, t1), s(i, [
                    {
                        key: "shader",
                        get: function get() {
                            return this.ys;
                        }
                    },
                    {
                        key: "pipelineLayout",
                        get: function get() {
                            return this._s;
                        }
                    },
                    {
                        key: "primitive",
                        get: function get() {
                            return this.ks;
                        }
                    },
                    {
                        key: "rasterizerState",
                        get: function get() {
                            return this.Es;
                        }
                    },
                    {
                        key: "depthStencilState",
                        get: function get() {
                            return this.Ts;
                        }
                    },
                    {
                        key: "blendState",
                        get: function get() {
                            return this.Ss;
                        }
                    },
                    {
                        key: "inputState",
                        get: function get() {
                            return this.As;
                        }
                    },
                    {
                        key: "dynamicStates",
                        get: function get() {
                            return this.Os;
                        }
                    },
                    {
                        key: "renderPass",
                        get: function get() {
                            return this.Kn;
                        }
                    }
                ]), i;
            }(Nd), vw = function(t1) {
                function i() {
                    var _$i;
                    return (_$i = t1.call(this, 14) || this).U = 0, _$i;
                }
                return h(i, t1), s(i, [
                    {
                        key: "type",
                        get: function get() {
                            return this.U;
                        }
                    }
                ]), i;
            }(Nd), lw = function(t1) {
                function i() {
                    var _$i;
                    return (_$i = t1.call(this, 4) || this).Is = [], _$i.Rs = null, _$i.Ms = [], _$i.Cs = 0, _$i;
                }
                return h(i, t1), i.prototype.computeHash = function() {
                    var _$t = "";
                    if (this.Ms.length) for(var _$i = 0; _$i < this.Ms.length; ++_$i){
                        var n = this.Ms[_$i];
                        if (n.inputs.length) {
                            _$t += "ia";
                            for(var _$s = 0; _$s < n.inputs.length; ++_$s){
                                var _$r = this.Is[n.inputs[_$s]];
                                _$t += "," + _$r.format + "," + _$r.sampleCount;
                            }
                        }
                        if (n.colors.length) {
                            _$t += "ca";
                            for(var _$h = 0; _$h < n.colors.length; ++_$h){
                                var e = this.Is[n.colors[_$h]];
                                _$t += "," + e.format + "," + e.sampleCount;
                            }
                        }
                        if (n.depthStencil >= 0) {
                            var u = this.Is[n.depthStencil];
                            _$t += "ds," + u.format + "," + u.sampleCount;
                        }
                    }
                    else {
                        _$t += "ca";
                        for(var o = 0; o < this.Is.length; ++o){
                            var f = this.Is[o];
                            _$t += "," + f.format + "," + f.sampleCount;
                        }
                        var _$c = this.Rs;
                        _$c && (_$t += "ds," + _$c.format + "," + _$c.sampleCount);
                    }
                    return Iv(_$t, 666);
                }, s(i, [
                    {
                        key: "colorAttachments",
                        get: function get() {
                            return this.Is;
                        }
                    },
                    {
                        key: "depthStencilAttachment",
                        get: function get() {
                            return this.Rs;
                        }
                    },
                    {
                        key: "subPasses",
                        get: function get() {
                            return this.Ms;
                        }
                    },
                    {
                        key: "hash",
                        get: function get() {
                            return this.Cs;
                        }
                    }
                ]), i;
            }(Nd), dw = function(t1) {
                function i(i, n) {
                    var _$s;
                    return (_$s = t1.call(this, 6) || this).Ns = new Jl, _$s.Cs = 0, _$s.Ns.copy(i), _$s.Cs = n, _$s;
                }
                return h(i, t1), i.computeHash = function(t1) {
                    var _$i = t1.minFilter;
                    return _$i |= t1.magFilter << 2, _$i |= t1.mipFilter << 4, _$i |= t1.addressU << 6, _$i |= t1.addressV << 8, _$i |= t1.addressW << 10, (_$i |= Math.min(t1.maxAnisotropy, 16) << 12) | t1.cmpFunc << 17;
                }, i.unpackFromHash = function(t1) {
                    var _$i = new Jl;
                    return _$i.minFilter = 3 & t1, _$i.magFilter = t1 >> 2 & 3, _$i.mipFilter = t1 >> 4 & 3, _$i.addressU = t1 >> 6 & 3, _$i.addressV = t1 >> 8 & 3, _$i.addressW = t1 >> 10 & 3, _$i.maxAnisotropy = t1 >> 12 & 31, _$i.cmpFunc = t1 >> 17 & 7, _$i;
                }, s(i, [
                    {
                        key: "info",
                        get: function get() {
                            return this.Ns;
                        }
                    },
                    {
                        key: "hash",
                        get: function get() {
                            return this.Cs;
                        }
                    }
                ]), i;
            }(Nd), ww = function(t1) {
                function i() {
                    var _$i;
                    return (_$i = t1.call(this, 7) || this).Ps = "", _$i.Ds = [], _$i.ts = [], _$i.Ls = [], _$i.Bn = [], _$i;
                }
                return h(i, t1), s(i, [
                    {
                        key: "name",
                        get: function get() {
                            return this.Ps;
                        }
                    },
                    {
                        key: "attributes",
                        get: function get() {
                            return this.ts;
                        }
                    },
                    {
                        key: "blocks",
                        get: function get() {
                            return this.Ls;
                        }
                    },
                    {
                        key: "samplers",
                        get: function get() {
                            return this.Bn;
                        }
                    },
                    {
                        key: "stages",
                        get: function get() {
                            return this.Ds;
                        }
                    }
                ]), i;
            }(Nd), gw = function(t1) {
                function i() {
                    var _$i;
                    return (_$i = t1.call(this, 3) || this).Ns = new Yl, _$i.Bs = new Kl, _$i.Fs = !1, _$i.Us = !1, _$i._n = 0, _$i;
                }
                return h(i, t1), i.getLevelCount = function(t1, i) {
                    return Math.floor(Math.log2(Math.max(t1, i)));
                }, s(i, [
                    {
                        key: "type",
                        get: function get() {
                            return this.Ns.type;
                        }
                    },
                    {
                        key: "usage",
                        get: function get() {
                            return this.Ns.usage;
                        }
                    },
                    {
                        key: "format",
                        get: function get() {
                            return this.Ns.format;
                        }
                    },
                    {
                        key: "width",
                        get: function get() {
                            return this.Ns.width;
                        }
                    },
                    {
                        key: "height",
                        get: function get() {
                            return this.Ns.height;
                        }
                    },
                    {
                        key: "depth",
                        get: function get() {
                            return this.Ns.depth;
                        }
                    },
                    {
                        key: "layerCount",
                        get: function get() {
                            return this.Ns.layerCount;
                        }
                    },
                    {
                        key: "levelCount",
                        get: function get() {
                            return this.Ns.levelCount;
                        }
                    },
                    {
                        key: "samples",
                        get: function get() {
                            return this.Ns.samples;
                        }
                    },
                    {
                        key: "flags",
                        get: function get() {
                            return this.Ns.flags;
                        }
                    },
                    {
                        key: "size",
                        get: function get() {
                            return this._n;
                        }
                    },
                    {
                        key: "info",
                        get: function get() {
                            return this.Ns;
                        }
                    },
                    {
                        key: "viewInfo",
                        get: function get() {
                            return this.Bs;
                        }
                    },
                    {
                        key: "isTextureView",
                        get: function get() {
                            return this.Us;
                        }
                    }
                ]), i;
            }(Nd), pw = function(t1) {
                function i(i, n) {
                    var _$s;
                    return (_$s = t1.call(this, 16) || this).Ns = new gd, _$s.Cs = 0, _$s.Ns.copy(i), _$s.Cs = n, _$s;
                }
                return h(i, t1), i.computeHash = function(t1) {
                    return Iv(t1.prevAccesses + " " + t1.nextAccesses + " " + t1.type, 666);
                }, s(i, [
                    {
                        key: "info",
                        get: function get() {
                            return this.Ns;
                        }
                    },
                    {
                        key: "hash",
                        get: function get() {
                            return this.Cs;
                        }
                    }
                ]), i;
            }(Nd), yw = function(t1) {
                function i(i, n) {
                    var _$s;
                    return (_$s = t1.call(this, 17) || this).Ns = new pd, _$s.Cs = 0, _$s.Ns.copy(i), _$s.Cs = n, _$s;
                }
                return h(i, t1), i.computeHash = function(t1) {
                    var _$i = t1.prevAccesses + " " + t1.nextAccesses;
                    return _$i += t1.type, _$i += t1.range.mipLevel, _$i += t1.range.levelCount, _$i += t1.range.firstSlice, _$i += t1.range.numSlices, _$i += t1.range.basePlane, _$i += t1.range.planeCount, _$i += t1.discardContents, _$i += t1.srcQueue ? t1.srcQueue.type : 0, Iv(_$i += t1.dstQueue ? t1.dstQueue.type : 0, 666);
                }, s(i, [
                    {
                        key: "info",
                        get: function get() {
                            return this.Ns;
                        }
                    },
                    {
                        key: "hash",
                        get: function get() {
                            return this.Cs;
                        }
                    }
                ]), i;
            }(Nd), _w = function(t1) {
                function i(i, n) {
                    var _$s;
                    return (_$s = t1.call(this, 18) || this).Ns = new yd, _$s.Cs = 0, _$s.Ns.copy(i), _$s.Cs = n, _$s;
                }
                return h(i, t1), i.computeHash = function(t1) {
                    var _$i = t1.prevAccesses + " " + t1.nextAccesses;
                    return _$i += t1.type, _$i += t1.offset, _$i += t1.size, _$i += t1.discardContents, _$i += t1.srcQueue ? t1.srcQueue.type : 0, Iv(_$i += t1.dstQueue ? t1.dstQueue.type : 0, 666);
                }, s(i, [
                    {
                        key: "info",
                        get: function get() {
                            return this.Ns;
                        }
                    },
                    {
                        key: "hash",
                        get: function get() {
                            return this.Cs;
                        }
                    }
                ]), i;
            }(Nd), mw = {
                Device: Qd,
                Swapchain: tw,
                Buffer: Kd,
                Texture: gw,
                Sampler: dw,
                Shader: ww,
                InputAssembler: nw,
                RenderPass: lw,
                Framebuffer: iw,
                DescriptorSet: sw,
                DescriptorSetLayout: rw,
                PipelineLayout: hw,
                PipelineState: aw,
                CommandBuffer: Jd,
                Queue: vw,
                GeneralBarrier: pw,
                TextureBarrier: yw,
                BufferBarrier: _w,
                RasterizerState: ew,
                BlendState: fw,
                BlendTarget: ow,
                DepthStencilState: uw,
                PipelineStateInfo: cw
            };
            Object.assign(mw, Yd), A.gfx = mw;
            var bw = function() {
                function t1() {
                    this.xs = !1, this.Gs = void 0, this.Hs = null, this.Vs = void 0, this.Ws = -1, this.zs = !1;
                }
                var i = t1.prototype;
                return i.$s = function(t1, i) {
                    var n = this;
                    return this.zs ? Promise.resolve(!0) : t1 ? (this.Gs = new t1, new Promise(function(t1, s) {
                        n.Gs.initialize(i).then(function(i) {
                            n.zs = i, t1(i);
                        }).catch(function(t1) {
                            s(t1);
                        });
                    })) : Promise.resolve(!1);
                }, i.Xs = function(t1, i) {
                    return !!this.zs || (t1 && (this.Gs = new t1, this.zs = this.Gs.initialize(i)), this.zs);
                }, i.init = function(t1, i) {
                    var n = this;
                    if (this.xs) return !0;
                    var _$s = Ei.querySettings(ki.Category.RENDERING, "renderMode");
                    this.Hs = t1, this.Hs && (this.Hs.oncontextmenu = function() {
                        return !1;
                    }), this.Ws = this.qs(_$s), this.zs = !1;
                    var _$r = new Vl(i);
                    if (1 === this.Ws || 2 === this.Ws) {
                        var h = !!globalThis.WebGL2RenderingContext;
                        if (globalThis.navigator.userAgent.toLowerCase(), _e.browserType === re.UC && (h = !1), Qd.Gn = t1, 2 === this.Ws && A.WebGPUDevice) return new Promise(function(t1, i) {
                            n.$s(A.WebGPUDevice, _$r).then(function(i) {
                                n.Ys(), t1(i);
                            }).catch(function(t1) {
                                i(t1);
                            });
                        });
                        h && A.WebGL2Device && this.Xs(A.WebGL2Device, _$r), A.WebGLDevice && this.Xs(A.WebGLDevice, _$r), A.EmptyDevice && this.Xs(A.EmptyDevice, _$r), this.Ys();
                    } else 4 === this.Ws && A.EmptyDevice && (this.Xs(A.EmptyDevice, _$r), this.Ys());
                    return !!this.Gs || (rt(16337), this.Ws = -1, !1);
                }, i.Ys = function() {
                    var _$t = new Hl(1, this.Hs), i = ye.windowSize;
                    _$t.width = i.width, _$t.height = i.height, this.Vs = this.Gs.createSwapchain(_$t);
                }, i.Ks = function() {
                    return "gpu" in globalThis.navigator;
                }, i.qs = function(t1) {
                    ("number" != typeof t1 || t1 > 4 || t1 < 0) && (t1 = 0);
                    var i = 0, n = !1;
                    if (1 === t1 ? (i = 0, n = !0) : 0 === t1 || 4 === t1 ? (i = this.Ks() ? 2 : 1, n = !0) : 2 === t1 ? (i = 1, n = !0) : 3 === t1 && (i = 4, n = !0), !n) throw Error(ot(3820, t1));
                    return i;
                }, s(t1, [
                    {
                        key: "gfxDevice",
                        get: function get() {
                            return this.Gs;
                        }
                    },
                    {
                        key: "swapchain",
                        get: function get() {
                            return this.Vs;
                        }
                    }
                ]), t1;
            }(), kw = new bw;
            t1("af", Object.freeze({
                __proto__: null,
                API: Fv,
                AccessFlagBit: al,
                Address: nl,
                Attribute: ud,
                AttributeName: Pd,
                BarrierType: Tl,
                BindingMappingInfo: Gl,
                BlendFactor: hl,
                BlendOp: el,
                BlendState: fw,
                BlendTarget: ow,
                Buffer: Kd,
                BufferBarrierInfo: yd,
                BufferFlagBit: zv,
                BufferInfo: Wl,
                BufferTextureCopy: Fl,
                BufferUsageBit: Wv,
                BufferViewInfo: zl,
                ClearFlagBit: El,
                Color: xl,
                ColorAttachment: cd,
                ColorMask: ul,
                CommandBuffer: Jd,
                CommandBufferInfo: Td,
                CommandBufferType: Al,
                ComparisonFunc: sl,
                CullMode: pl,
                DESCRIPTOR_BUFFER_TYPE: 15,
                DESCRIPTOR_DYNAMIC_TYPE: 10,
                DESCRIPTOR_SAMPLER_TYPE: 496,
                DESCRIPTOR_STORAGE_BUFFER_TYPE: 12,
                DRAW_INFO_SIZE: 28,
                DefaultResource: Zd,
                DepthStencilAttachment: ad,
                DepthStencilState: uw,
                DescriptorSet: sw,
                DescriptorSetInfo: kd,
                DescriptorSetLayout: rw,
                DescriptorSetLayoutBinding: md,
                DescriptorSetLayoutInfo: bd,
                DescriptorType: ml,
                Device: Qd,
                DeviceCaps: Il,
                DeviceInfo: Vl,
                DeviceManager: bw,
                DeviceOptions: Rl,
                DispatchInfo: Xl,
                DrawInfo: $l,
                DynamicStateFlagBit: yl,
                DynamicStates: Cd,
                DynamicStencilStates: Md,
                Extent: Nl,
                Feature: xv,
                Filter: il,
                Format: jv,
                FormatFeatureBit: Qv,
                FormatInfo: Id,
                FormatInfos: Fd,
                FormatSize: Hd,
                FormatSurfaceSize: Vd,
                FormatType: Gv,
                Framebuffer: iw,
                FramebufferInfo: _d,
                GFXObject: Nd,
                GeneralBarrier: pw,
                GeneralBarrierInfo: gd,
                GetTypeSize: zd,
                IndirectBuffer: ql,
                InputAssembler: nw,
                InputAssemblerInfo: fd,
                InputState: Ed,
                IsPowerOf2: jd,
                LegacyRenderMode: {
                    AUTO: 0,
                    CANVAS: 1,
                    WEBGL: 2,
                    HEADLESS: 3,
                    WEBGPU: 4
                },
                LoadOp: fl,
                MarkerInfo: jl,
                MemoryAccessBit: $v,
                MemoryStatus: Rd,
                MemoryUsageBit: Xv,
                ObjectType: Lv,
                Offset: Ml,
                PassType: Sl,
                PipelineBindPoint: ll,
                PipelineLayout: hw,
                PipelineLayoutInfo: Ad,
                PipelineState: aw,
                PipelineStateInfo: cw,
                PolygonMode: wl,
                PrimitiveMode: dl,
                QueryPoolInfo: Od,
                QueryType: kl,
                Queue: vw,
                QueueInfo: Sd,
                QueueType: bl,
                RasterizerState: ew,
                Rect: Cl,
                RenderPass: lw,
                RenderPassInfo: dd,
                RenderType: {
                    UNKNOWN: -1,
                    CANVAS: 0,
                    WEBGL: 1,
                    WEBGPU: 2,
                    OPENGL: 3,
                    HEADLESS: 4
                },
                ResolveMode: vl,
                ResourceRange: wd,
                SampleCount: Zv,
                SampleType: Hv,
                Sampler: dw,
                SamplerInfo: Jl,
                ShadeModel: gl,
                Shader: ww,
                ShaderInfo: od,
                ShaderStage: ed,
                ShaderStageFlagBit: ol,
                Size: Ol,
                Status: Bv,
                StencilFace: _l,
                StencilOp: rl,
                StoreOp: cl,
                SubpassDependency: ld,
                SubpassInfo: vd,
                SurfaceTransform: Uv,
                Swapchain: tw,
                SwapchainInfo: Hl,
                Texture: gw,
                TextureBarrier: yw,
                TextureBarrierInfo: pd,
                TextureBlit: Bl,
                TextureCopy: Ll,
                TextureFlagBit: Jv,
                TextureInfo: Yl,
                TextureSubresLayers: Pl,
                TextureSubresRange: Dl,
                TextureType: qv,
                TextureUsageBit: Kv,
                TextureViewInfo: Kl,
                Type: Vv,
                Uniform: Ql,
                UniformBlock: Zl,
                UniformInputAttachment: hd,
                UniformSampler: id,
                UniformSamplerTexture: td,
                UniformStorageBuffer: rd,
                UniformStorageImage: sd,
                UniformTexture: nd,
                ViewDimension: Yv,
                Viewport: Ul,
                VsyncMode: tl,
                alignTo: qd,
                deviceManager: kw,
                formatAlignment: Xd,
                getTypedArrayConstructor: $d
            }));
            var Aw = new Hr;
            function Ew(t1, i, n, s) {
                if (n) {
                    var _$r = n.chunk, h = n.data, e = _$r.vb, u = n.vertexCount, o = t1.worldMatrix, f = o.m00, _$c = o.m01, a = o.m02, v = o.m03, l = o.m04, _$d = o.m05, w = o.m06, g = o.m07, p = o.m12, _$y = o.m13, _$_ = o.m14, m = o.m15;
                    Aw.set(s.r / 255, s.g / 255, s.b / 255, s.a / 255);
                    for(var b = 0, k = 0; k < u; ++k){
                        var A = h[k], E = A.x, T = A.y, S = v * E + g * T + m;
                        S = S ? 1 / S : 1, e[b + 0] = (f * E + l * T + p) * S, e[b + 1] = (_$c * E + _$d * T + _$y) * S, e[b + 2] = (a * E + w * T + _$_) * S, Hr.toArray(e, Aw, b + 5), b += n.floatStride;
                    }
                    _$r.bufferId;
                    for(var _$O = _$r.vertexOffset, _$I = _$r.meshBuffer, _$R = _$r.meshBuffer.iData, _$M = _$I.indexOffset, _$C = 0, N = u / 4; _$C < N; _$C++){
                        var P = _$O + 4 * _$C;
                        _$R[_$M++] = P, _$R[_$M++] = P + 1, _$R[_$M++] = P + 2, _$R[_$M++] = P + 1, _$R[_$M++] = P + 3, _$R[_$M++] = P + 2;
                    }
                    _$I.indexOffset += n.indexCount, _$I.setDirty();
                }
            }
            function Tw(t1, i) {
                if (t1.chunk) for(var n, _$r, h, e = t1.vertexFormat, u = t1.chunk.vb, o = 0, f = 0; f < e.length; ++f){
                    if ((_$r = Fd[e[f].format]).hasAlpha) {
                        if (h = t1.floatStride, _$r.size / _$r.count == 1) {
                            n || (n = new Uint32Array(u.buffer, u.byteOffset, u.length));
                            for(var _$c = ~~Un(Math.round(255 * i), 0, 255), a = o; a < n.length; a += h)n[a] = (16777215 & n[a] | _$c << 24) >>> 0;
                        } else if (_$r.size / _$r.count == 4) for(var v = o + 3; v < u.length; v += h)u[v] = i;
                    }
                    o += _$r.size >> 2;
                }
            }
            var Sw = function() {
                function t1(t1) {
                    this._map = null, this._count = 0, t1 ? (this._map = t1, this._count = Object.keys(t1).length) : (this._map = St(!0), this._count = 0);
                }
                var i = t1.prototype;
                return i.add = function(t1, i) {
                    return t1 in this._map || this._count++, this._map[t1] = i;
                }, i.get = function(t1) {
                    return this._map[t1];
                }, i.has = function(t1) {
                    return t1 in this._map;
                }, i.remove = function(t1) {
                    var i = this._map[t1];
                    return t1 in this._map && (delete this._map[t1], this._count--), i;
                }, i.clear = function() {
                    0 !== this._count && (this._map = St(!0), this._count = 0);
                }, i.forEach = function(t1) {
                    for(var i in this._map)t1(this._map[i], i);
                }, i.find = function(t1) {
                    for(var i in this._map)if (t1(this._map[i], i)) return this._map[i];
                    return null;
                }, i.destroy = function() {
                    this._map = null;
                }, s(t1, [
                    {
                        key: "map",
                        get: function get() {
                            return this._map;
                        }
                    },
                    {
                        key: "count",
                        get: function get() {
                            return this._count;
                        }
                    }
                ]), t1;
            }(), Ow = function() {
                function t1(i, n) {
                    this.id = t1.Js++, this.name = "", this.pipes = [], this.name = i;
                    for(var s = 0, _$r = n.length; s < _$r; s++)this.pipes.push(n[s]);
                }
                var i = t1.prototype;
                return i.insert = function(t1, i) {
                    return i > this.pipes.length ? nt(4921) : this.pipes.splice(i, 0, t1), this;
                }, i.append = function(t1) {
                    return this.pipes.push(t1), this;
                }, i.remove = function(t1) {
                    return this.pipes.splice(t1, 1), this;
                }, i.sync = function(t1) {
                    var i = this.pipes;
                    if (0 === i.length) return null;
                    t1.isFinished = !1;
                    for(var n = 0, s = i.length; n < s;){
                        var _$r = (0, i[n])(t1);
                        if (_$r) return t1.isFinished = !0, _$r;
                        ++n !== s && (t1.input = t1.output, t1.output = null);
                    }
                    return t1.isFinished = !0, t1.output;
                }, i.async = function(t1) {
                    0 !== this.pipes.length && (t1.isFinished = !1, this.Qs(0, t1));
                }, i.Qs = function(t1, i) {
                    var n = this;
                    (0, this.pipes[t1])(i, function(s) {
                        s ? (i.isFinished = !0, i.dispatch("complete", s)) : ++t1 < n.pipes.length ? (i.input = i.output, i.output = null, n.Qs(t1, i)) : (i.isFinished = !0, i.dispatch("complete", s, i.output));
                    });
                }, t1;
            }();
            Ow.Js = 0;
            var Iw = new Sw, Rw = new Sw, Mw = new Sw, Cw = new Sw, Nw = new Ow("normal load", []), Pw = new Ow("fetch", []), Dw = new Ow("transform url", []), Lw = new Map, Bw = {
                default: {
                    priority: 0
                },
                preload: {
                    maxConcurrency: 6,
                    maxRequestsPerFrame: 2,
                    priority: -1
                },
                scene: {
                    maxConcurrency: 20,
                    maxRequestsPerFrame: 20,
                    priority: 1
                },
                bundle: {
                    maxConcurrency: 20,
                    maxRequestsPerFrame: 20,
                    priority: 2
                },
                remote: {
                    maxRetryCount: 4
                }
            }, Fw = function() {
                function t1(i) {
                    this.id = t1.Zs++, this.onComplete = null, this.onProgress = null, this.onError = null, this.source = null, this.output = null, this.input = null, this.progress = null, this.options = null, this.isFinished = !0, this.set(i);
                }
                t1.create = function(i) {
                    var n;
                    return 0 !== t1.tr.length ? (n = t1.tr.pop()).set(i) : n = new t1(i), n;
                };
                var i = t1.prototype;
                return i.set = function(t1) {
                    void 0 === t1 && (t1 = Object.create(null)), this.onComplete = t1.onComplete || null, this.onProgress = t1.onProgress || null, this.onError = t1.onError || null, this.source = this.input = t1.input, this.output = null, this.progress = t1.progress, this.options = t1.options || Object.create(null);
                }, i.dispatch = function(t1, i, n, s, r) {
                    switch(t1){
                        case "complete":
                            this.onComplete && this.onComplete(i, n);
                            break;
                        case "progress":
                            this.onProgress && this.onProgress(i, n, s, r);
                            break;
                        case "error":
                            this.onError && this.onError(i, n, s, r);
                            break;
                        default:
                            var h = "on" + t1[0].toUpperCase() + t1.substring(1);
                            "function" == typeof this[h] && this[h](i, n, s, r);
                    }
                }, i.recycle = function() {
                    t1.tr.length !== t1.ir && (this.onComplete = null, this.onProgress = null, this.onError = null, this.source = this.output = this.input = null, this.progress = null, this.options = null, t1.tr.push(this));
                }, s(t1, [
                    {
                        key: "isFinish",
                        get: function get() {
                            return this.isFinished;
                        },
                        set: function set(t1) {
                            this.isFinished = t1;
                        }
                    }
                ]), t1;
            }();
            Fw.ir = 500, Fw.Zs = 0, Fw.tr = [];
            var Uw = "0123456789abcdef".split(""), xw = [
                "",
                "",
                "",
                ""
            ], jw = xw.concat(xw, "-", xw, "-", xw, "-", xw, "-", xw, xw, xw), Gw = jw.map(function(t1, i) {
                return "-" === t1 ? NaN : i;
            }).filter(Number.isFinite);
            function Hw(t1) {
                var i = t1.split("@")[0];
                if (22 !== i.length) return t1;
                jw[0] = t1[0], jw[1] = t1[1];
                for(var n = 2, s = 2; n < 22; n += 2){
                    var _$r = Ii[t1.charCodeAt(n)], h = Ii[t1.charCodeAt(n + 1)];
                    jw[Gw[s++]] = Uw[_$r >> 2], jw[Gw[s++]] = Uw[(3 & _$r) << 2 | h >> 4], jw[Gw[s++]] = Uw[15 & h];
                }
                return t1.replace(i, jw.join(""));
            }
            var Vw = /.*[/\\][0-9a-fA-F]{2}[/\\]([0-9a-fA-F-@]{8,}).*/;
            function Ww(t1, i) {
                (i = i || Object.create(null)).__isNative__ = i.isNative, i.nativeExt && (i.ext = i.nativeExt);
                var n = Cw.find(function(i) {
                    return !!i.getAssetInfo(t1);
                });
                return n && (i.bundle = n.name), Xw(t1, i);
            }
            function zw(t1) {
                return !!t1 && (_instanceof(t1, A.SceneAsset) || _instanceof(t1, A.Scene));
            }
            function $w(t1) {
                return t1 && (46 === t1.charCodeAt(0) && 47 === t1.charCodeAt(1) ? t1 = t1.slice(2) : 47 === t1.charCodeAt(0) && (t1 = t1.slice(1))), t1;
            }
            function Xw(t1, i) {
                var n = Fw.create({
                    input: t1,
                    options: i
                }), s = [];
                try {
                    for(var _$r, h = d(Dw.sync(n)); !(_$r = h()).done;){
                        var e = _$r.value, u = e.url;
                        e.recycle(), s.push(u);
                    }
                } catch (t1) {
                    for(var o, f = d(n.output); !(o = f()).done;)o.value.recycle();
                    z(t1.message, t1.stack);
                }
                return n.recycle(), s.length > 1 ? s : s[0];
            }
            var Yw, Kw, Zw, tg = Object.freeze({
                __proto__: null,
                decodeUuid: Hw,
                getUrlWithUuid: Ww,
                getUuidFromURL: function getUuidFromURL(t1) {
                    var i = Vw.exec(t1);
                    return i ? i[1] : "";
                },
                isScene: zw,
                normalize: $w,
                transform: Xw
            }), ng = mo, sg = t1("dx", go("cc.Asset")((Kw = ho((Yw = function(t1) {
                function i(i) {
                    var n;
                    return (n = t1.call(this, i) || this).loaded = !0, n._native = Kw && Kw(), n._nativeUrl = "", n.nr = null, n.sr = 0, Object.defineProperty(a(n), "_uuid", {
                        value: "",
                        writable: !0
                    }), n;
                }
                h(i, t1), i.deserialize = function(t1) {
                    return A.deserialize(t1);
                };
                var n = i.prototype;
                return n.toString = function() {
                    return this.nativeUrl;
                }, n.serialize = function() {}, n._setRawAsset = function(t1, i) {
                    void 0 === i && (i = !0), this._native = !1 !== i ? t1 || "" : "/" + t1;
                }, n.addRef = function() {
                    return this.sr++, this;
                }, n.decRef = function(t1) {
                    return void 0 === t1 && (t1 = !0), this.sr > 0 && this.sr--, t1 && A.assetManager.getReleaseManager().tryRelease(this), this;
                }, n.onLoaded = function() {}, n.initDefault = function(t1) {
                    t1 && (this._uuid = t1), this.isDefault = !0;
                }, n.validate = function() {
                    return !0;
                }, n.destroy = function() {
                    return X(ot(12101, this._uuid)), t1.prototype.destroy.call(this);
                }, s(i, [
                    {
                        key: "nativeUrl",
                        get: function get() {
                            if (!this._nativeUrl) {
                                if (!this._native) return "";
                                var _$t = this._native;
                                if (47 === _$t.charCodeAt(0)) return _$t.slice(1);
                                46 === _$t.charCodeAt(0) ? this._nativeUrl = Ww(this._uuid, {
                                    nativeExt: _$t,
                                    isNative: !0
                                }) : this._nativeUrl = Ww(this._uuid, {
                                    __nativeName__: _$t,
                                    nativeExt: Ya(_$t),
                                    isNative: !0
                                });
                            }
                            return this._nativeUrl;
                        }
                    },
                    {
                        key: "uuid",
                        get: function get() {
                            return this._uuid;
                        }
                    },
                    {
                        key: "_nativeAsset",
                        get: function get() {
                            return this.nr;
                        },
                        set: function set(t1) {
                            this.nr = t1;
                        }
                    },
                    {
                        key: "nativeAsset",
                        get: function get() {
                            return this.nr;
                        }
                    },
                    {
                        key: "_nativeDep",
                        get: function get() {
                            if (this._native) return {
                                __isNative__: !0,
                                uuid: this._uuid,
                                ext: this._native
                            };
                        }
                    },
                    {
                        key: "refCount",
                        get: function get() {
                            return this.sr;
                        }
                    }
                ]), i;
            }(ne(Wh))).prototype, "_native", [
                Ro
            ], function() {
                return "";
            }), y(Yw.prototype, "_nativeAsset", [
                ng
            ], Object.getOwnPropertyDescriptor(Yw.prototype, "_nativeAsset"), Yw.prototype), Yw)) || Yw);
            sg.prototype.createNode = null, A.Asset = sg;
            var hg = gi({
                PVR: 0,
                PKM: 1,
                ASTC: 2
            });
            function eg(t1, i) {
                return 4 === t1 ? 89 : 5 === t1 ? 4 === i ? 90 : 91 : 6 === t1 ? 5 === i ? 92 : 93 : 8 === t1 ? 5 === i ? 94 : 6 === i ? 95 : 96 : 10 === t1 ? 5 === i ? 97 : 6 === i ? 98 : 8 === i ? 99 : 100 : 10 === i ? 101 : 102;
            }
            function ug(t1, i) {
                return t1[i] << 8 | t1[i + 1];
            }
            function og(t1) {
                return !!(_e.hasFeature(_e.Feature.IMAGE_BITMAP) && _instanceof(t1, ImageBitmap));
            }
            var ag, vg, lg, dg, wg, gg, pg, yg, _g, mg = t1("dD", go("cc.ImageAsset")(((Zw = function(t1) {
                h(n, t1), n.mergeCompressedTextureMips = function(t1) {
                    var i = new Uint8Array(0);
                    try {
                        for(var _$n, _$s = 8 + 4 * t1.length, _$r = 0, _$h = d(t1); !(_$n = _$h()).done;)_$r += _$n.value.byteLength;
                        _$r += _$s, i = new Uint8Array(_$r);
                        var e = new DataView(i.buffer, i.byteOffset, i.byteLength);
                        e.setUint32(0, 1346981187, !0), e.setUint32(4, t1.length, !0);
                        for(var u = _$s, o = 0; o < t1.length; o++){
                            var f = t1[o];
                            if (e.setUint32(8 + 4 * o, f.byteLength, !0), _instanceof(f, ArrayBuffer)) {
                                var _$c = new Uint8Array(f);
                                i.set(_$c, u);
                            } else {
                                var a = new Uint8Array(f.buffer, f.byteOffset, f.byteLength);
                                i.set(a, u);
                            }
                            u += f.byteLength;
                        }
                    } catch (t1) {
                        W(t1);
                    }
                    return i;
                }, n.rr = function(t1, i) {
                    var _$s = {
                        _data: new Uint8Array(0),
                        _compressed: !0,
                        width: 0,
                        height: 0,
                        format: 0,
                        mipmapLevelDataSize: []
                    }, _$h = new DataView(_instanceof(t1, ArrayBuffer) ? t1 : t1.buffer);
                    if (1346981187 === _$h.getUint32(0, !0)) {
                        var e = _$h.getUint32(4, !0), u = _$h.getUint32(8, !0), o = 8 + 4 * e;
                        n.hr(t1, 0, o, u, i, _$s);
                        for(var f = o + u, _$c = 1; _$c < e; _$c++){
                            var a = _$h.getUint32(8 + 4 * _$c, !0);
                            n.hr(t1, _$c, f, a, i, _$s), f += a;
                        }
                    } else n.hr(t1, 0, 0, 0, i, _$s);
                    return _$s;
                }, n.hr = function(t1, i, s, r, h, e) {
                    switch(h){
                        case hg.PVR:
                            n.er(t1, i, s, r, e);
                            break;
                        case hg.PKM:
                            n.ur(t1, i, s, r, e);
                            break;
                        case hg.ASTC:
                            n.cr(t1, i, s, r, e);
                    }
                }, n.er = function(t1, i, n, s, r) {
                    var _$h = _instanceof(t1, ArrayBuffer) ? t1 : t1.buffer, e = new Int32Array(_$h, n, 13);
                    if (55727696 === e[0]) {
                        var u = n + e[12] + 52, o = s - e.byteLength;
                        if (s > 0) {
                            var f = new Uint8Array(_$h, u, o), _$c = new Uint8Array(r._data.byteLength + f.byteLength);
                            _$c.set(r._data), _$c.set(f, r._data.byteLength), r._data = _$c, r.mipmapLevelDataSize[i] = o;
                        } else r._data = new Uint8Array(_$h, u);
                        r.width = i > 0 ? r.width : e[7], r.height = i > 0 ? r.height : e[6];
                    } else {
                        if (559044176 !== e[11]) throw Error("Invalid magic number in PVR header");
                        var a = n + e[0], v = s - e.byteLength;
                        if (s > 0) {
                            var l = new Uint8Array(_$h, a, v), _$d = new Uint8Array(r._data.byteLength + l.byteLength);
                            _$d.set(r._data), _$d.set(l, r._data.byteLength), r._data = _$d, r.mipmapLevelDataSize[i] = v;
                        } else r._data = new Uint8Array(_$h, a);
                        r.width = i > 0 ? r.width : e[1], r.height = i > 0 ? r.height : e[2];
                    }
                }, n.ur = function(t1, i, n, s, r) {
                    var _$h = _instanceof(t1, ArrayBuffer) ? t1 : t1.buffer, e = new Uint8Array(_$h, n, 16), u = ug(e, 6);
                    if (0 !== u && 1 !== u && 3 !== u) throw Error("Invalid magic number in ETC header");
                    var o = n + 16, f = s - 16;
                    if (s > 0) {
                        var _$c = new Uint8Array(_$h, o, f), a = new Uint8Array(r._data.byteLength + _$c.byteLength);
                        a.set(r._data), a.set(_$c, r._data.byteLength), r._data = a, r.mipmapLevelDataSize[i] = f;
                    } else r._data = new Uint8Array(_$h, o);
                    r.width = i > 0 ? r.width : ug(e, 12), r.height = i > 0 ? r.height : ug(e, 14);
                }, n.cr = function(t1, i, n, s, r) {
                    var _$h = _instanceof(t1, ArrayBuffer) ? t1 : t1.buffer, e = new Uint8Array(_$h, n, 16);
                    if (1554098963 !== e[0] + (e[1] << 8) + (e[2] << 16) + (e[3] << 24)) throw Error("Invalid magic number in ASTC header");
                    var u = e[4], o = e[5], f = e[6];
                    if ((u < 3 || u > 6 || o < 3 || o > 6 || f < 3 || f > 6) && (u < 4 || 7 === u || 9 === u || 11 === u || u > 12 || o < 4 || 7 === o || 9 === o || 11 === o || o > 12 || 1 !== f)) throw Error("Invalid block number in ASTC header");
                    var _$c = eg(u, o), a = n + 16, v = s - 16;
                    if (s > 0) {
                        var l = new Uint8Array(_$h, a, v), _$d = new Uint8Array(r._data.byteLength + l.byteLength);
                        _$d.set(r._data), _$d.set(l, r._data.byteLength), r._data = _$d, r.mipmapLevelDataSize[i] = v;
                    } else r._data = new Uint8Array(_$h, a);
                    r.width = i > 0 ? r.width : e[7] + (e[8] << 8) + (e[9] << 16), r.height = i > 0 ? r.height : e[10] + (e[11] << 8) + (e[12] << 16), r.format = _$c;
                };
                var i = n.prototype;
                function n(i) {
                    var _$n;
                    return (_$n = t1.call(this) || this).vr = void 0, _$n.lr = void 0, _$n.dr = 35, _$n.Qn = 0, _$n.Zn = 0, _$n.vr = {
                        _data: null,
                        width: 0,
                        height: 0,
                        format: 0,
                        _compressed: !1,
                        mipmapLevelDataSize: []
                    }, void 0 !== i && _$n.reset(i), _$n;
                }
                return i.wr = function() {
                    if (this.mipmapLevelDataSize && this.mipmapLevelDataSize.length > 0) {
                        var _$t = this.mipmapLevelDataSize[0], _$s = new n({
                            _data: new Uint8Array(this.data.buffer, 0, _$t),
                            _compressed: !0,
                            width: this.width,
                            height: this.height,
                            format: this.format,
                            mipmapLevelDataSize: []
                        });
                        return _$s._uuid = "" + this._uuid, _$s;
                    }
                    return this;
                }, i.gr = function() {
                    var _$t = [];
                    if (this.mipmapLevelDataSize && this.mipmapLevelDataSize.length > 0) for(var i, _$s = this.mipmapLevelDataSize, _$r = this.data, _$h = 0, e = this.height, u = this.width, o = d(_$s); !(i = o()).done;){
                        var f = i.value, _$c = new n({
                            _data: new Uint8Array(_$r.buffer, _$h, f),
                            _compressed: !0,
                            width: u,
                            height: e,
                            format: this.format,
                            mipmapLevelDataSize: []
                        });
                        _$h += f, _$c._uuid = "" + this._uuid, u = Math.max(u >> 1, 1), e = Math.max(e >> 1, 1), _$t.push(_$c);
                    }
                    else _$t.push(this);
                    return _$t;
                }, i.reset = function(t1) {
                    og(t1) || _instanceof(t1, HTMLElement) ? this.vr = t1 : (this.vr = t1, this.dr = t1.format);
                }, i.destroy = function() {
                    if (this.data && _instanceof(this.data, HTMLImageElement)) this.data.src = "", this._setRawAsset("");
                    else if (og(this.data)) {
                        var i;
                        null == (i = this.data) || i.close();
                    }
                    return t1.prototype.destroy.call(this);
                }, i._serialize = function() {}, i._deserialize = function(t1) {
                    var i = "";
                    "string" == typeof t1 ? i = t1 : (this.Qn = t1.w, this.Zn = t1.h, i = t1.fmt);
                    for(var _$s, _$r = kw.gfxDevice, _$h = i.split("_"), e = Number.MAX_VALUE, u = this.dr, o = "", f = Ti.SUPPORT_TEXTURE_FORMATS, _$c = d(_$h); !(_$s = _$c()).done;){
                        var a = _$s.value.split("@"), v = parseInt(a[0], void 0), l = n.pr[v] || a[0], w = f.indexOf(l);
                        if (-1 !== w && w < e) {
                            var g = a[1] ? parseInt(a[1]) : this.dr;
                            if (!(".astc" !== l || _$r && 2 & _$r.getFormatFeatures(89)) || !(".pvr" !== l || _$r && 2 & _$r.getFormatFeatures(86)) || !(72 !== g && 1026 !== g || _$r && 2 & _$r.getFormatFeatures(72)) || !(73 !== g && 77 !== g || _$r && 2 & _$r.getFormatFeatures(73)) || ".webp" === l && !_e.hasFeature(_e.Feature.WEBP)) continue;
                            e = w, o = l, u = g;
                        }
                    }
                    o ? (this._setRawAsset(o), this.dr = u) : nt(3121);
                }, i.initDefault = function(i) {
                    if (t1.prototype.initDefault.call(this, i), n.yr) this.reset(n.yr);
                    else {
                        var _$s = S.document.createElement("canvas"), _$r = _$s.getContext("2d"), _$h = _$s.width = _$s.height = 2;
                        _$r.fillStyle = "#ff00ff", _$r.fillRect(0, 0, _$h, _$h), this.reset(_$s), n.yr = _$s;
                    }
                }, i.validate = function() {
                    return !!this.data;
                }, s(n, [
                    {
                        key: "_nativeAsset",
                        get: function get() {
                            return this.vr;
                        },
                        set: function set(t1) {
                            _instanceof(t1, HTMLElement) || og(t1) || (t1.format = t1.format || this.dr), this.reset(t1);
                        }
                    },
                    {
                        key: "data",
                        get: function get() {
                            var _$t;
                            return _instanceof(_$t = this.vr, HTMLImageElement) || _instanceof(_$t, HTMLCanvasElement) || og(_$t) ? this.vr : this.vr && this.vr._data;
                        }
                    },
                    {
                        key: "width",
                        get: function get() {
                            return this.vr.width || this.Qn;
                        }
                    },
                    {
                        key: "height",
                        get: function get() {
                            return this.vr.height || this.Zn;
                        }
                    },
                    {
                        key: "format",
                        get: function get() {
                            return this.dr;
                        }
                    },
                    {
                        key: "isCompressed",
                        get: function get() {
                            return this.dr >= 72 && this.dr <= 102 || this.dr >= 1024 && this.dr <= 1026;
                        }
                    },
                    {
                        key: "mipmapLevelDataSize",
                        get: function get() {
                            return this.vr.mipmapLevelDataSize;
                        }
                    },
                    {
                        key: "url",
                        get: function get() {
                            return this.nativeUrl;
                        }
                    }
                ]), n;
            }(sg)).pr = [
                ".png",
                ".jpg",
                ".jpeg",
                ".bmp",
                ".webp",
                ".pvr",
                ".pkm",
                ".astc"
            ], Zw.yr = null, y(Zw.prototype, "_nativeAsset", [
                ff
            ], Object.getOwnPropertyDescriptor(Zw.prototype, "_nativeAsset"), Zw.prototype), Zw)) || Zw);
            A.ImageAsset = mg, _i(jv);
            var bg, kg, Ag, Eg = new lt("Tex"), Tg = go("cc.TextureBase")(((_g = function(t1) {
                function i(i) {
                    var n;
                    return (n = t1.call(this, i) || this)._format = ag && ag(), n._minFilter = vg && vg(), n._magFilter = lg && lg(), n._mipFilter = dg && dg(), n._wrapS = wg && wg(), n._wrapT = gg && gg(), n._wrapR = pg && pg(), n._anisotropy = yg && yg(), n.Qn = 1, n.Zn = 1, n._r = new Jl, n.mr = null, n.Gs = null, n.kr = 0, n.Ar = Eg.getNewId(), n.Gs = n._getGFXDevice(), n.kr = Iv(n.Ar, 666), n;
                }
                h(i, t1);
                var n = i.prototype;
                return n.getId = function() {
                    return this.Ar;
                }, n.getPixelFormat = function() {
                    return this._format;
                }, n.getAnisotropy = function() {
                    return this._anisotropy;
                }, n.setWrapMode = function(t1, i, n) {
                    void 0 === n && (n = t1), this._wrapS = t1, this._r.addressU = t1, this._wrapT = i, this._r.addressV = i, this._wrapR = n, this._r.addressW = n, this.Gs && (this.mr = this.Gs.getSampler(this._r));
                }, n.setFilters = function(t1, i) {
                    this._minFilter = t1, this._r.minFilter = t1, this._magFilter = i, this._r.magFilter = i, this.Gs && (this.mr = this.Gs.getSampler(this._r));
                }, n.setMipFilter = function(t1) {
                    this._mipFilter = t1, this._r.mipFilter = t1, this.Gs && (this.mr = this.Gs.getSampler(this._r));
                }, n.setAnisotropy = function(t1) {
                    t1 = Math.min(t1, 16), this._anisotropy = t1, this._r.maxAnisotropy = t1, this.Gs && (this.mr = this.Gs.getSampler(this._r));
                }, n.destroy = function() {
                    var _$i, n = t1.prototype.destroy.call(this);
                    return n && null != (_$i = A.director.root) && _$i.batcher2D && A.director.root.batcher2D.Er(this.kr), n;
                }, n.getHash = function() {
                    return this.kr;
                }, n.getGFXTexture = function() {
                    return null;
                }, n.getSamplerInfo = function() {
                    return this._r;
                }, n.getGFXSampler = function() {
                    return this.mr || (this.Gs ? this.mr = this.Gs.getSampler(this._r) : rt(9302)), this.mr;
                }, n._serialize = function() {
                    return "";
                }, n._deserialize = function(t1) {
                    var _$i = t1.split(",");
                    _$i.unshift(""), _$i.length >= 5 && (this.setFilters(parseInt(_$i[1]), parseInt(_$i[2])), this.setWrapMode(parseInt(_$i[3]), parseInt(_$i[4]))), _$i.length >= 7 && (this.setMipFilter(parseInt(_$i[5])), this.setAnisotropy(parseInt(_$i[6])));
                }, n._getGFXDevice = function() {
                    return kw.gfxDevice;
                }, n._getGFXFormat = function() {
                    return this._getGFXPixelFormat(this._format);
                }, n._setGFXFormat = function(t1) {
                    this._format = void 0 === t1 ? 35 : t1;
                }, n._getGFXPixelFormat = function(t1) {
                    return 1026 === t1 ? t1 = 72 : 1025 === t1 ? t1 = 85 : 1024 === t1 && (t1 = 83), t1;
                }, s(i, [
                    {
                        key: "isCompressed",
                        get: function get() {
                            return this._format >= 72 && this._format <= 102 || this._format >= 1024 && this._format <= 1026;
                        }
                    },
                    {
                        key: "isAlphaAtlas",
                        get: function get() {
                            return 1026 === this._format || 1025 === this._format || 1024 === this._format;
                        }
                    },
                    {
                        key: "width",
                        get: function get() {
                            return this.Qn;
                        }
                    },
                    {
                        key: "height",
                        get: function get() {
                            return this.Zn;
                        }
                    }
                ]), i;
            }(sg)).PixelFormat = {
                RGB565: 47,
                RGB5A1: 49,
                RGBA4444: 50,
                RGB888: 24,
                RGB32F: 32,
                RGBA8888: 35,
                BGRA8888: 36,
                RGBA32F: 44,
                A8: 1,
                I8: 2,
                AI8: 3,
                RGB_PVRTC_2BPPV1: 83,
                RGBA_PVRTC_2BPPV1: 84,
                RGB_A_PVRTC_2BPPV1: 1024,
                RGB_PVRTC_4BPPV1: 85,
                RGBA_PVRTC_4BPPV1: 86,
                RGB_A_PVRTC_4BPPV1: 1025,
                RGB_ETC1: 72,
                RGBA_ETC1: 1026,
                RGB_ETC2: 73,
                RGBA_ETC2: 77,
                RGBA_ASTC_4x4: 89,
                RGBA_ASTC_5x4: 90,
                RGBA_ASTC_5x5: 91,
                RGBA_ASTC_6x5: 92,
                RGBA_ASTC_6x6: 93,
                RGBA_ASTC_8x5: 94,
                RGBA_ASTC_8x6: 95,
                RGBA_ASTC_8x8: 96,
                RGBA_ASTC_10x5: 97,
                RGBA_ASTC_10x6: 98,
                RGBA_ASTC_10x8: 99,
                RGBA_ASTC_10x10: 100,
                RGBA_ASTC_12x10: 101,
                RGBA_ASTC_12x12: 102
            }, _g.WrapMode = {
                REPEAT: 0,
                CLAMP_TO_EDGE: 2,
                MIRRORED_REPEAT: 1,
                CLAMP_TO_BORDER: 3
            }, _g.Filter = {
                NONE: 0,
                LINEAR: 2,
                NEAREST: 1
            }, ag = ho(_g.prototype, "_format", [
                Ro
            ], function() {
                return 35;
            }), vg = ho(_g.prototype, "_minFilter", [
                Ro
            ], function() {
                return 2;
            }), lg = ho(_g.prototype, "_magFilter", [
                Ro
            ], function() {
                return 2;
            }), dg = ho(_g.prototype, "_mipFilter", [
                Ro
            ], function() {
                return 0;
            }), wg = ho(_g.prototype, "_wrapS", [
                Ro
            ], function() {
                return 0;
            }), gg = ho(_g.prototype, "_wrapT", [
                Ro
            ], function() {
                return 0;
            }), pg = ho(_g.prototype, "_wrapR", [
                Ro
            ], function() {
                return 0;
            }), yg = ho(_g.prototype, "_anisotropy", [
                Ro
            ], function() {
                return 0;
            }), _g)) || _g;
            A.TextureBase = Tg;
            var Sg = t1("dJ", go("cc.Script")(bg = function(t1) {
                function i(i) {
                    return t1.call(this, i) || this;
                }
                return h(i, t1), i;
            }(sg)) || bg);
            A._Script = Sg, A._JavaScript = t1("dK", go("cc.JavaScript")(kg = function(t1) {
                function i(i) {
                    return t1.call(this, i) || this;
                }
                return h(i, t1), i;
            }(Sg)) || kg), A._TypeScript = t1("dL", go("cc.TypeScript")(Ag = function(t1) {
                function i(i) {
                    return t1.call(this, i) || this;
                }
                return h(i, t1), i;
            }(Sg)) || Ag);
            var Rg, Mg, Cg, Ng, Pg, Dg, Bg, Fg, jg, Gg, Hg, Vg, zg, $g, Xg = t1("c$", go("cc.ClickEvent")((Mg = ho((Rg = function() {
                function t1() {
                    this.target = Mg && Mg(), this.component = Cg && Cg(), this._componentId = Ng && Ng(), this.handler = Pg && Pg(), this.customEventData = Dg && Dg();
                }
                t1.emitEvents = function(i) {
                    for(var n = arguments.length, _$s = Array(n > 1 ? n - 1 : 0), _$r = 1; _$r < n; _$r++)_$s[_$r - 1] = arguments[_$r];
                    for(var h = 0, e = i.length; h < e; h++){
                        var u = i[h];
                        _instanceof(u, t1) && u.emit(_$s);
                    }
                };
                var i = t1.prototype;
                return i.emit = function(t1) {
                    var i = this.target;
                    if (A.isValid(i)) {
                        this.Tr();
                        var n = A.js.getClassById(this._componentId), _$s = i.getComponent(n);
                        if (A.isValid(_$s)) {
                            var _$r = _$s[this.handler];
                            "function" == typeof _$r && (null != this.customEventData && "" !== this.customEventData && (t1 = t1.slice()).push(this.customEventData), _$r.apply(_$s, t1));
                        }
                    }
                }, i.Sr = function(t1) {
                    var i = A.js.getClassByName(t1);
                    return A.js.getClassId(i);
                }, i.Or = function(t1) {
                    var i = A.js.getClassById(t1);
                    return A.js.getClassName(i);
                }, i.Tr = function() {
                    this._componentId || (this._componentName = this.component, this.component = "");
                }, s(t1, [
                    {
                        key: "_componentName",
                        get: function get() {
                            return this.Tr(), this.Or(this._componentId);
                        },
                        set: function set(t1) {
                            this._componentId = this.Sr(t1);
                        }
                    }
                ]), t1;
            }()).prototype, "target", [
                Ro
            ], function() {
                return null;
            }), Cg = ho(Rg.prototype, "component", [
                Ro
            ], function() {
                return "";
            }), Ng = ho(Rg.prototype, "_componentId", [
                Ro
            ], function() {
                return "";
            }), Pg = ho(Rg.prototype, "handler", [
                Ro
            ], function() {
                return "";
            }), Dg = ho(Rg.prototype, "customEventData", [
                Ro
            ], function() {
                return "";
            }), Rg)) || Rg), qg = new lt("Comp"), Yg = t1("d0", (Bg = go("cc.Component"), Fg = Zo(Sg), Bg(((Vg = function(t1) {
                function i() {
                    var _$i;
                    return (_$i = t1.call(this) || this).node = jg && jg(), _$i._enabled = Gg && Gg(), _$i.__prefab = Hg && Hg(), _$i._sceneGetter = null, _$i._id = qg.getNewId(), _$i;
                }
                h(i, t1);
                var n = i.prototype;
                return n._getRenderScene = function() {
                    return this._sceneGetter ? this._sceneGetter() : this.node.scene.renderScene;
                }, n.addComponent = function(t1) {
                    return this.node.addComponent(t1);
                }, n.getComponent = function(t1) {
                    return this.node.getComponent(t1);
                }, n.getComponents = function(t1) {
                    return this.node.getComponents(t1);
                }, n.getComponentInChildren = function(t1) {
                    return this.node.getComponentInChildren(t1);
                }, n.getComponentsInChildren = function(t1) {
                    return this.node.getComponentsInChildren(t1);
                }, n.destroy = function() {
                    return !!t1.prototype.destroy.call(this) && (this._enabled && this.node.activeInHierarchy && A.director._compScheduler.disableComp(this), !0);
                }, n._onPreDestroy = function() {
                    this.unscheduleAllCallbacks(), A.director._nodeActivator.destroyComp(this), this.node._removeComponent(this);
                }, n._instantiate = function(t1) {
                    return t1 || (t1 = A.instantiate._clone(this, this)), t1 && (t1.node = null), t1;
                }, n.schedule = function(t1, i, n, s) {
                    void 0 === i && (i = 0), void 0 === n && (n = A.macro.REPEAT_FOREVER), void 0 === s && (s = 0), et(!!t1, 1619), et((i = i || 0) >= 0, 1620), n = Number.isNaN(n) ? A.macro.REPEAT_FOREVER : n, s = s || 0;
                    var _$r = A.director.getScheduler(), _$h = _$r.isTargetPaused(this);
                    _$r.schedule(t1, this, i, n, s, _$h);
                }, n.scheduleOnce = function(t1, i) {
                    void 0 === i && (i = 0), this.schedule(t1, 0, 0, i);
                }, n.unschedule = function(t1) {
                    t1 && A.director.getScheduler().unschedule(t1, this);
                }, n.unscheduleAllCallbacks = function() {
                    A.director.getScheduler().unscheduleAllForTarget(this);
                }, s(i, [
                    {
                        key: "name",
                        get: function get() {
                            if (this._name) return this._name;
                            var _$t = Ot(this), _$i = _$t.lastIndexOf(".");
                            return _$i >= 0 && (_$t = _$t.slice(_$i + 1)), this.node ? this.node.name + "<" + _$t + ">" : _$t;
                        },
                        set: function set(t1) {
                            this._name = t1;
                        }
                    },
                    {
                        key: "uuid",
                        get: function get() {
                            return this._id;
                        }
                    },
                    {
                        key: "__scriptAsset",
                        get: function get() {
                            return null;
                        }
                    },
                    {
                        key: "enabled",
                        get: function get() {
                            return this._enabled;
                        },
                        set: function set(t1) {
                            if (this._enabled !== t1 && (this._enabled = t1, this.node.activeInHierarchy)) {
                                var _$i = A.director._compScheduler;
                                t1 ? _$i.enableComp(this) : _$i.disableComp(this);
                            }
                        }
                    },
                    {
                        key: "enabledInHierarchy",
                        get: function get() {
                            return this._enabled && this.node && this.node.activeInHierarchy;
                        }
                    },
                    {
                        key: "_isOnLoadCalled",
                        get: function get() {
                            return 16384 & this._objFlags;
                        }
                    },
                    {
                        key: "internalUpdate",
                        get: function get() {
                            return this.update;
                        }
                    },
                    {
                        key: "internalLateUpdate",
                        get: function get() {
                            return this.lateUpdate;
                        }
                    },
                    {
                        key: "internalPreload",
                        get: function get() {
                            return this.__preload;
                        }
                    },
                    {
                        key: "internalOnLoad",
                        get: function get() {
                            return this.onLoad;
                        }
                    },
                    {
                        key: "internalStart",
                        get: function get() {
                            return this.start;
                        }
                    },
                    {
                        key: "internalOnEnable",
                        get: function get() {
                            return this.onEnable;
                        }
                    },
                    {
                        key: "internalOnDisable",
                        get: function get() {
                            return this.onDisable;
                        }
                    },
                    {
                        key: "internalOnDestroy",
                        get: function get() {
                            return this.onDestroy;
                        }
                    }
                ]), i;
            }(Wh)).EventHandler = Xg, Vg._executionOrder = 0, Vg._requireComponent = null, Vg.system = null, y(Vg.prototype, "__scriptAsset", [
                Fg
            ], Object.getOwnPropertyDescriptor(Vg.prototype, "__scriptAsset"), Vg.prototype), jg = ho(Vg.prototype, "node", [
                Ro
            ], function() {
                return null;
            }), Gg = ho(Vg.prototype, "_enabled", [
                Ro
            ], function() {
                return !0;
            }), Hg = ho(Vg.prototype, "__prefab", [
                Ro
            ], function() {
                return null;
            }), Vg)) || Vg));
            kt(Yg, "_registerEditorProps", function(t1, i) {
                var n = i.requireComponent;
                n && (Array.isArray(n) && (n = n.filter(Boolean)), t1._requireComponent = n);
                var s = i.executionOrder;
                s && "number" == typeof s && (t1._executionOrder = s);
            }), A.Component = Yg;
            var Kg = t1("dm", go("cc.MissingScript")(($g = ho((zg = function(t1) {
                function i() {
                    var _$i;
                    return (_$i = t1.call(this) || this)._$erialized = $g && $g(), _$i;
                }
                return h(i, t1), i.safeFindClass = function(t1) {
                    var _$i = Jt(t1);
                    if (_$i) return _$i;
                    A.deserialize.reportMissingClass(t1);
                }, i.prototype.onLoad = function() {
                    nt(4600, this.node.name);
                }, i;
            }(Yg)).prototype, "_$erialized", [
                Ro,
                Co
            ], function() {
                return null;
            }), zg)) || zg);
            A._MissingScript = Kg;
            try {
                var Jg = Kg.__values__;
                0 !== Jg.length && "_$erialized" === Jg[Jg.length - 1] || (rt(16338), rt(16339, Jg.join(", ")));
            } catch (wh) {
                rt(16340, "" + wh);
            }
            var Qg = function() {
                function t1(t1) {
                    if (this.Ir = 0, this.Rr = void 0, this.Mr = void 0, _instanceof(t1, ArrayBuffer)) this.Rr = t1, this.Mr = new DataView(this.Rr);
                    else {
                        if (!ArrayBuffer.isView(t1)) throw Error("Invalid argument");
                        this.Rr = t1.buffer, this.Mr = new DataView(this.Rr, t1.byteOffset, t1.byteLength);
                    }
                }
                var i = t1.prototype;
                return i.Cr = function(t1) {
                    for(var i = Array(t1), n = 0; n < t1; n++)i[n] = this.parse();
                    return i;
                }, i.Nr = function(t1) {
                    for(var i = {}, n = 0; n < t1; n++)i[this.parse()] = this.parse();
                    return i;
                }, i.Pr = function(t1) {
                    var i = Zg(this.Mr, this.Ir, t1);
                    return this.Ir += t1, i;
                }, i.Dr = function(t1) {
                    var i = this.Rr.slice(this.Ir, this.Ir + t1);
                    return this.Ir += t1, i;
                }, i.parse = function() {
                    var _$t, i = this.Mr.getUint8(this.Ir++), n = 0, _$s = 0, _$r = 0, h = 0;
                    if (i < 192) return i < 128 ? i : i < 144 ? this.Nr(15 & i) : i < 160 ? this.Cr(15 & i) : this.Pr(31 & i);
                    if (i > 223) return -1 * (255 - i + 1);
                    switch(i){
                        case 192:
                            return null;
                        case 194:
                            return !1;
                        case 195:
                            return !0;
                        case 196:
                            return n = this.Mr.getUint8(this.Ir), this.Ir += 1, this.Dr(n);
                        case 197:
                            return n = this.Mr.getUint16(this.Ir), this.Ir += 2, this.Dr(n);
                        case 198:
                            return n = this.Mr.getUint32(this.Ir), this.Ir += 4, this.Dr(n);
                        case 199:
                            if (n = this.Mr.getUint8(this.Ir), _$s = this.Mr.getInt8(this.Ir + 1), this.Ir += 2, -1 === _$s) {
                                var e = this.Mr.getUint32(this.Ir);
                                return _$r = this.Mr.getInt32(this.Ir + 4), h = this.Mr.getUint32(this.Ir + 8), this.Ir += 12, new Date(1e3 * (4294967296 * _$r + h) + e / 1e6);
                            }
                            return [
                                _$s,
                                this.Dr(n)
                            ];
                        case 200:
                            return n = this.Mr.getUint16(this.Ir), _$s = this.Mr.getInt8(this.Ir + 2), this.Ir += 3, [
                                _$s,
                                this.Dr(n)
                            ];
                        case 201:
                            return n = this.Mr.getUint32(this.Ir), _$s = this.Mr.getInt8(this.Ir + 4), this.Ir += 5, [
                                _$s,
                                this.Dr(n)
                            ];
                        case 202:
                            return _$t = this.Mr.getFloat32(this.Ir), this.Ir += 4, _$t;
                        case 203:
                            return _$t = this.Mr.getFloat64(this.Ir), this.Ir += 8, _$t;
                        case 204:
                            return _$t = this.Mr.getUint8(this.Ir), this.Ir += 1, _$t;
                        case 205:
                            return _$t = this.Mr.getUint16(this.Ir), this.Ir += 2, _$t;
                        case 206:
                            return _$t = this.Mr.getUint32(this.Ir), this.Ir += 4, _$t;
                        case 207:
                            return _$r = 4294967296 * this.Mr.getUint32(this.Ir), h = this.Mr.getUint32(this.Ir + 4), this.Ir += 8, _$r + h;
                        case 208:
                            return _$t = this.Mr.getInt8(this.Ir), this.Ir += 1, _$t;
                        case 209:
                            return _$t = this.Mr.getInt16(this.Ir), this.Ir += 2, _$t;
                        case 210:
                            return _$t = this.Mr.getInt32(this.Ir), this.Ir += 4, _$t;
                        case 211:
                            return _$r = 4294967296 * this.Mr.getInt32(this.Ir), h = this.Mr.getUint32(this.Ir + 4), this.Ir += 8, _$r + h;
                        case 212:
                            return _$s = this.Mr.getInt8(this.Ir), this.Ir += 1, 0 === _$s ? void (this.Ir += 1) : [
                                _$s,
                                this.Dr(1)
                            ];
                        case 213:
                            return _$s = this.Mr.getInt8(this.Ir), this.Ir += 1, [
                                _$s,
                                this.Dr(2)
                            ];
                        case 214:
                            return _$s = this.Mr.getInt8(this.Ir), this.Ir += 1, -1 === _$s ? (_$t = this.Mr.getUint32(this.Ir), this.Ir += 4, new Date(1e3 * _$t)) : [
                                _$s,
                                this.Dr(4)
                            ];
                        case 215:
                            return _$s = this.Mr.getInt8(this.Ir), this.Ir += 1, 0 === _$s ? (_$r = 4294967296 * this.Mr.getInt32(this.Ir), h = this.Mr.getUint32(this.Ir + 4), this.Ir += 8, new Date(_$r + h)) : -1 === _$s ? (_$r = this.Mr.getUint32(this.Ir), h = this.Mr.getUint32(this.Ir + 4), this.Ir += 8, new Date(1e3 * (4294967296 * (3 & _$r) + h) + (_$r >>> 2) / 1e6)) : [
                                _$s,
                                this.Dr(8)
                            ];
                        case 216:
                            return _$s = this.Mr.getInt8(this.Ir), this.Ir += 1, [
                                _$s,
                                this.Dr(16)
                            ];
                        case 217:
                            return n = this.Mr.getUint8(this.Ir), this.Ir += 1, this.Pr(n);
                        case 218:
                            return n = this.Mr.getUint16(this.Ir), this.Ir += 2, this.Pr(n);
                        case 219:
                            return n = this.Mr.getUint32(this.Ir), this.Ir += 4, this.Pr(n);
                        case 220:
                            return n = this.Mr.getUint16(this.Ir), this.Ir += 2, this.Cr(n);
                        case 221:
                            return n = this.Mr.getUint32(this.Ir), this.Ir += 4, this.Cr(n);
                        case 222:
                            return n = this.Mr.getUint16(this.Ir), this.Ir += 2, this.Nr(n);
                        case 223:
                            return n = this.Mr.getUint32(this.Ir), this.Ir += 4, this.Nr(n);
                    }
                    throw Error("Could not parse");
                }, s(t1, [
                    {
                        key: "offset",
                        get: function get() {
                            return this.Ir;
                        }
                    }
                ]), t1;
            }();
            function Zg(t1, i, n) {
                for(var s = "", _$r = 0, h = i, e = i + n; h < e; h++){
                    var u = t1.getUint8(h);
                    if (128 & u) if (192 != (224 & u)) if (224 != (240 & u)) {
                        if (240 != (248 & u)) throw Error("Invalid byte " + u.toString(16));
                        (_$r = (7 & u) << 18 | (63 & t1.getUint8(++h)) << 12 | (63 & t1.getUint8(++h)) << 6 | 63 & t1.getUint8(++h)) >= 65536 ? (_$r -= 65536, s += String.fromCharCode(55296 + (_$r >>> 10), 56320 + (1023 & _$r))) : s += String.fromCharCode(_$r);
                    } else s += String.fromCharCode((15 & u) << 12 | (63 & t1.getUint8(++h)) << 6 | 63 & t1.getUint8(++h));
                    else s += String.fromCharCode((31 & u) << 6 | 63 & t1.getUint8(++h));
                    else s += String.fromCharCode(u);
                }
                return s;
            }
            function tp(t1) {
                var i = new Qg(t1), n = i.parse();
                if (i.offset !== t1.byteLength) throw Error(t1.byteLength - i.offset + " trailing bytes");
                return n;
            }
            var ip = function() {
                function t1(t1, i) {
                    this.Lr = t1, this.Br = i;
                }
                return s(t1, [
                    {
                        key: "document",
                        get: function get() {
                            return this.Lr;
                        }
                    },
                    {
                        key: "chunks",
                        get: function get() {
                            return this.Br;
                        }
                    }
                ]), t1;
            }();
            function np(t1) {
                if (t1.length < 16) throw new rp(ot(13102));
                var i = new DataView(t1.buffer, t1.byteOffset, t1.byteLength);
                if (1313817411 !== i.getUint32(0, !0)) throw new rp(ot(13100));
                var n = i.getUint32(4, !0);
                if (i.getUint32(8, !0) !== i.byteLength) throw new rp(ot(13102));
                var s = 12, _$r = i.getUint32(s, !0);
                s += 4;
                var h, e = new Uint8Array(i.buffer, s + i.byteOffset, _$r);
                s += _$r;
                try {
                    if (1 === n) {
                        var u = sp(e);
                        h = JSON.parse(u);
                    } else 2 === n && (h = tp(e));
                } catch (t1) {
                    throw new rp(t1);
                }
                for(var o = []; s < i.byteLength;){
                    s % 8 != 0 && (s += 8 - s % 8);
                    var f = i.getUint32(s, !0);
                    s += 4, o.push(new Uint8Array(i.buffer, s + i.byteOffset, f)), s += f;
                }
                if (s !== i.byteLength) throw new rp(ot(13102));
                return new ip(h, o);
            }
            function sp(t1) {
                if ("u" > typeof TextDecoder) return (new TextDecoder).decode(t1);
                if ("Buffer" in globalThis) return globalThis.Buffer.from(t1.buffer, t1.byteOffset, t1.byteLength).toString();
                throw Error(ot(13104));
            }
            var rp = function(t1) {
                function i() {
                    return t1.apply(this, arguments) || this;
                }
                return h(i, t1), i;
            }(c(Error));
            function hp(t1, i, n, s, r) {
                if (_instanceof(i, A.ValueType)) {
                    r || t1.push("if(prop){");
                    var h = Ot(i);
                    t1.push("s._deserializeFastDefinedObject(o" + n + ",prop," + h + ");"), r || t1.push("}else o" + n + "=null;");
                } else t1.push("\nif (prop) {\n    s._deserializeAndAssignField(o, prop, " + s + ");\n} else {\n    o" + n + "=null;\n}\n");
            }
            !function() {
                function t1() {
                    this.Fr = [], this.Ur = 0;
                }
                var i = t1.prototype;
                i.alignAs = function(t1) {
                    if (0 !== t1) {
                        var i = this.Ur % t1;
                        if (0 !== i) {
                            var n = t1 - i;
                            return this.Fr.push(n), this.Ur += n, n;
                        }
                    }
                    return 0;
                }, i.append = function(t1) {
                    var i = this.Ur;
                    return this.Fr.push(t1), this.Ur += t1.byteLength, i;
                }, i.get = function() {
                    var _$t = new Uint8Array(this.Ur), i = 0;
                    return this.Fr.forEach(function(n) {
                        "number" == typeof n ? i += n : (_$t.set(new Uint8Array(n.buffer, n.byteOffset, n.byteLength), i), i += n.byteLength);
                    }), _$t;
                }, s(t1, [
                    {
                        key: "byteLength",
                        get: function get() {
                            return this.Ur;
                        }
                    }
                ]);
            }(), A.internal.decodeCCONBinary = np, A.internal.CCON = ip;
            var ep = function ep(t1, i) {
                for(var n = An.Attr.getClassAttrs(i), s = i.__values__, _$r = [
                    "var prop;"
                ], h = ap(i), e = 0; e < s.length; e++){
                    var u = s[e], o = void 0, f = void 0;
                    An.IDENTIFIER_RE.test(u) ? (f = '"' + u + '"', o = "." + u) : o = "[" + (f = An.escapeForJS(u)) + "]";
                    var _$c = o;
                    if (n[u + cp]) {
                        var a = n[u + cp];
                        _$c = An.IDENTIFIER_RE.test(a) ? "." + a : "[" + An.escapeForJS(a) + "]";
                    }
                    _$r.push("prop=d" + _$c + ";"), _$r.push('if(typeof prop!=="undefined"){');
                    var v = An.getDefault(n[u + fp]), l = n[u + op];
                    h && (void 0 !== v || l) ? vp(v, l) ? _$r.push("o" + o + "=prop;") : hp(_$r, v, o, f, !0) : (_$r.push('if(typeof prop!=="object"){o' + o + "=prop;}else{"), hp(_$r, v, o, f, !1), _$r.push("}")), _$r.push("}");
                }
                return (jt(i, A.Node) || jt(i, A.Component)) && _$r.push("d._id&&(o._id=d._id);"), "_$erialized" === s[s.length - 1] && (_$r.push("o._$erialized=JSON.parse(JSON.stringify(d));"), _$r.push("s._fillPlainObject(o._$erialized,d);")), Function("s", "o", "d", "k", _$r.join(""));
            }, up = An.Attr.DELIMETER, op = up + "type", fp = up + "default", cp = up + "formerlySerializedAs";
            function ap(t1) {
                return Oi.test(ti(t1));
            }
            function vp(t1, i) {
                if (void 0 === t1) return _instanceof(i, An.Attr.PrimitiveType) || i === ln || i === dn;
                var n = void 0 === t1 ? "undefined" : _type_of(t1);
                return "string" === n || "number" === n || "boolean" === n;
            }
            var lp = function(t1) {
                function i() {
                    return t1.call(this, function(t1) {
                        t1.clear();
                    }, 1) || this;
                }
                return h(i, t1), i;
            }(ii);
            lp.prototype.get = function(t1, i, n, s, r) {
                var h = this._get();
                return h ? (h.reset(t1, i, n, s, r), h) : new dp(t1, i, n, s, r);
            };
            var dp = function() {
                function t1(t1, i, n, s) {
                    this.deserializedList = [], this.deserializedData = null, this.result = t1, this.customEnv = s, this.jr = i, this.Gr = n, this.Hr = null == i ? void 0 : i.onDereferenced;
                }
                var i = t1.prototype;
                return i.reset = function(t1, i, n, s) {
                    this.result = t1, this.customEnv = s, this.jr = i, this.Gr = n, this.Hr = null == i ? void 0 : i.onDereferenced;
                }, i.clear = function() {
                    this.result = null, this.customEnv = null, this.deserializedList.length = 0, this.deserializedData = null, this.jr = null, this.Gr = null, this.Hr = null;
                }, i.deserialize = function(t1) {
                    var i, n = !1;
                    _instanceof(t1, ip) ? (n = !0, i = t1.document, t1.chunks.length > 0 && (t1.chunks.length, this.Vr = t1.chunks[0])) : i = t1, this.Wr = i, this.zr = {
                        fromCCON: n
                    };
                    var _$s = Array.isArray(i) ? i[0] : i;
                    return this.deserializedData = this.$r(_$s, 0), this.Wr = void 0, this.Vr = void 0, this.zr = void 0, this.deserializedData;
                }, i.$r = function(t1, i, n, s) {
                    switch(t1.__type__){
                        case "TypedArray":
                            return this.Xr(t1);
                        case "TypedArrayRef":
                            return this.qr(t1);
                        default:
                            return t1.__type__ ? this.Yr(t1, i, n, s) : Array.isArray(t1) ? this.Kr(t1) : this.Jr(t1);
                    }
                }, i.Xr = function(t1) {
                    return globalThis[t1.ctor].from(t1.array);
                }, i.qr = function(t1) {
                    var i = t1.offset, n = t1.length, _$s = t1.ctor;
                    return new globalThis[_$s](this.Vr.buffer, this.Vr.byteOffset + i, n);
                }, i.Kr = function(t1) {
                    for(var i, n = Array(t1.length), _$s = 0; _$s < t1.length; _$s++)"object" == _type_of(i = t1[_$s]) && i ? this._deserializeAndAssignField(n, i, "" + _$s) && (n[_$s] = null) : n[_$s] = i;
                    return n;
                }, i.Jr = function(t1) {
                    var i = {};
                    return this._fillPlainObject(i, t1), i;
                }, i.Yr = function(t1, i, n, s) {
                    var _$n, h = t1.__type__, e = this.jr(h, t1, n, s);
                    if (!e) return this.jr === Jt && this.Gr(h), null;
                    var u = (_$n = new e, i >= 0 && (this.deserializedList[i] = _$n), _$n);
                    return this.Qr(t1, u, e), u;
                }, i.Qr = function(t1, i, n, s) {
                    void 0 === s && (s = !1), s || !i[pf] ? i._deserialize ? i._deserialize(t1.content, this) : A.Class._isCCClass(n) ? this.Zr(i, t1, n) : this._deserializeFastDefinedObject(i, t1, n) : this.th(t1, i, n);
                }, i.th = function(t1, i, n) {
                    var _$s = this;
                    i[pf]({
                        readProperty: function readProperty(i) {
                            var n = t1[i];
                            return "object" == (void 0 === n ? "undefined" : _type_of(n)) && n ? _$s.ih(n) : n;
                        },
                        readThis: function readThis() {
                            _$s.Qr(t1, i, n, !0);
                        },
                        readSuper: function readSuper() {
                            var _$r = xt(n);
                            _$r && _$s.Qr(t1, i, _$r);
                        }
                    }, this.zr);
                }, i.Zr = function(t1, i, n) {
                    var _$s;
                    if (n.hasOwnProperty("__deserialize__")) _$s = n.__deserialize__;
                    else {
                        _$s = ep(0, n);
                        try {
                            if (n === Kg) {
                                var _$r = n.__values__;
                                0 !== _$r.length && "_$erialized" === _$r[_$r.length - 1] || (rt(16341), rt(16342, _$r.join(", ")));
                                var h = _$s;
                                _$s = function s(t1, i, n, s) {
                                    h(t1, i, n, s), i._$erialized || rt(16343, JSON.stringify(n));
                                };
                            }
                        } catch (t1) {
                            rt(16344, "" + t1);
                        }
                        kt(n, "__deserialize__", _$s, !0);
                    }
                    _$s(this, t1, i, n);
                }, i._deserializeAndAssignField = function(t1, i, n) {
                    var _$s = i.__id__;
                    if ("number" == typeof _$s) {
                        var _$r = this.deserializedList[_$s];
                        if (_$r) t1[n] = _$r;
                        else {
                            var h, e = this.Wr[_$s];
                            t1[n] = this.$r(e, _$s, void 0, n), null == (h = this.Hr) || h.call(this, this.deserializedList, _$s, t1, n);
                        }
                    } else {
                        var u = i.__uuid__;
                        if (u) {
                            var o = i.__expectedType__;
                            this.result.push(t1, n, u, o);
                        } else t1[n] = this.$r(i, -1);
                    }
                    return !1;
                }, i.ih = function(t1) {
                    var i = t1.__id__;
                    if ("number" == typeof i) {
                        var n = this.deserializedList[i];
                        if (n) return n;
                        var _$s = this.Wr[i];
                        return this.$r(_$s, i, void 0, void 0);
                    }
                    if (t1.__uuid__) throw t1.__expectedType__, Error("Asset reference field serialization is currently not supported in custom serialization.");
                    return this.$r(t1, -1);
                }, i._fillPlainObject = function(t1, i) {
                    for(var n in i)if (i.hasOwnProperty(n)) {
                        var _$s = i[n];
                        "object" != (void 0 === _$s ? "undefined" : _type_of(_$s)) ? "__type__" !== n && (t1[n] = _$s) : _$s ? this._deserializeAndAssignField(t1, _$s, n) && (t1[n] = null) : t1[n] = null;
                    }
                }, i._deserializeFastDefinedObject = function(t1, i, n) {
                    if (n === A.Vec2) return t1.x = i.x || 0, void (t1.y = i.y || 0);
                    if (n === A.Vec3) return t1.x = i.x || 0, t1.y = i.y || 0, void (t1.z = i.z || 0);
                    if (n !== A.Color) {
                        if (n === A.Size) return t1.width = i.width || 0, void (t1.height = i.height || 0);
                        for(var _$s = An.Attr.getClassAttrs(n), _$r = n.__values__, h = 0; h < _$r.length; h++){
                            var e = _$r[h], u = i[e];
                            void 0 !== u || i.hasOwnProperty(e) || (u = An.getDefault(_$s[e + fp])), "object" != (void 0 === u ? "undefined" : _type_of(u)) ? t1[e] = u : u ? this._deserializeAndAssignField(t1, u, e) : t1[e] = null;
                        }
                    } else {
                        t1.r = i.r || 0, t1.g = i.g || 0, t1.b = i.b || 0;
                        var o = i.a;
                        t1.a = void 0 === o ? 255 : o;
                    }
                }, s(t1, [
                    {
                        key: "ignoreEditorOnly",
                        get: function get() {
                            return this.nh;
                        }
                    }
                ]), t1;
            }();
            function wp(t1, i, n) {
                var s, _$r = (n = n || {}).classFinder || Jt, h = n.createAssetRefs || _e.platform === oe.EDITOR_CORE, e = n.customEnv, u = n.ignoreEditorOnly, o = null != (s = n.reportMissingClass) ? s : A.deserialize.reportMissingClass;
                i.init();
                var f = dp.pool.get(i, _$r, o, e, u);
                A.game._isCloning = !0;
                var _$c = f.deserialize(t1);
                return A.game._isCloning = !1, dp.pool.put(f), h && i.assignAssetsBy(function(t1, i) {
                    return EditorExtends.serialize.asAsset(t1, i.type);
                }), _$c;
            }
            dp.pool = new lp;
            var gp = [
                Or,
                Ss,
                Hr,
                qs,
                Yr,
                Zr,
                sh,
                cr
            ];
            function pp(t1, i) {
                t1.x = i[1], t1.y = i[2], t1.z = i[3], t1.w = i[4];
            }
            var yp = [
                function(t1, i) {
                    t1.x = i[1], t1.y = i[2];
                },
                function(t1, i) {
                    t1.x = i[1], t1.y = i[2], t1.z = i[3];
                },
                pp,
                pp,
                function(t1, i) {
                    Yr.fromUint32(t1, i[1]);
                },
                function(t1, i) {
                    t1.width = i[1], t1.height = i[2];
                },
                function(t1, i) {
                    t1.x = i[1], t1.y = i[2], t1.width = i[3], t1.height = i[4];
                },
                function(t1, i) {
                    cr.fromArray(t1, i, 1);
                }
            ], Sp = t1("dv", function() {
                function t1() {
                    this.uuidObjList = null, this.uuidPropList = null, this.uuidList = null, this.uuidTypeList = [];
                }
                var i = t1.prototype;
                return i.init = function(t1) {
                    t1 ? (this.uuidObjList = t1[8], this.uuidPropList = t1[9], this.uuidList = t1[10]) : this.uuidList || (this.uuidList = [], this.uuidObjList = [], this.uuidPropList = [], this.uuidTypeList = []);
                }, i.reset = function() {
                    this.uuidList && (this.uuidList.length = 0, this.uuidObjList.length = 0, this.uuidPropList.length = 0, this.uuidTypeList.length = 0);
                }, i.push = function(t1, i, n, s) {
                    this.uuidObjList.push(t1), this.uuidPropList.push(i), this.uuidList.push(n), this.uuidTypeList.push(s || "");
                }, t1;
            }());
            function Op(t1, i, n) {
                for(var s = t1.length - 1, _$r = 0, h = 3 * t1[s]; _$r < h; _$r += 3){
                    var e = t1[_$r], u = i[t1[_$r + 2]], o = t1[_$r + 1];
                    o >= 0 ? e[n[o]] = u : e[~o] = u;
                }
                for(; _$r < s; _$r += 3){
                    var f = i[t1[_$r]], _$c = i[t1[_$r + 2]], a = t1[_$r + 1];
                    a >= 0 ? f[n[a]] = _$c : f[~a] = _$c;
                }
            }
            function Ip(t1, i) {
                for(var n = t1[4][i[0]], s = n[0], _$r = new (0, s[0]), h = s[1], e = s[2], u = n[n.length - 1], o = 1; o < u; ++o)_$r[h[n[o]]] = i[o];
                for(; o < i.length; ++o){
                    var f = h[n[o]];
                    (0, Dp[s[n[o] + e]])(t1, _$r, f, i[o]);
                }
                return _$r;
            }
            function Rp(t1, i, n) {
                var s = new i;
                return s._deserialize ? s._deserialize(n, t1[0]) : rt(5303, Ot(i)), s;
            }
            function Mp(t1, i, n, s) {
                s >= 0 ? i[n] = t1[5][s] : t1[7][3 * ~s] = i;
            }
            function Cp(t1) {
                return function(i, n, s, r) {
                    for(var h = 0; h < r.length; ++h)t1(i, r, h, r[h]);
                    n[s] = r;
                };
            }
            function Np(t1, i, n, s) {
                i[n] = null, t1[8][s] = i;
            }
            function Pp(t1, i, n, s) {
                i[n] = Ip(t1, s);
            }
            Sp.pool = new ii(function(t1) {
                t1.reset();
            }, 5), Sp.pool.get = function() {
                return this._get() || new Sp;
            };
            var Dp = Array(13);
            function Lp(t1) {
                var i = t1[5], n = t1[6], s = 0 === n ? 0 : n.length, _$r = i[i.length - 1], h = i.length - s;
                "number" != typeof _$r ? _$r = 0 : (_$r < 0 && (_$r = ~_$r), --h);
                for(var e = 0; e < h; ++e)i[e] = Ip(t1, i[e]);
                for(var u = t1[3], o = 0; o < s; ++o, ++e){
                    var f = n[o], _$c = i[e];
                    if (f >= 0) {
                        var a = u[f];
                        i[e] = Rp(t1, a, _$c);
                    } else (0, Dp[f = ~f])(t1, i, e, _$c);
                }
                return _$r;
            }
            function Fp(t1, i, n, s, r, h, e) {
                var u = t1(i);
                if (!u) {
                    if (r) return void (n[s] = function() {
                        var _$r = t1(i) || (h || e(i), Object);
                        return n[s] = _$r, new _$r;
                    });
                    h || e(i), u = Object;
                }
                n[s] = u;
            }
            function Up(t1, i, n, s) {
                for(var _$r = n || Jt, h = t1[3], e = 0; e < h.length; ++e){
                    var u = h[e];
                    "string" != typeof u ? Fp(_$r, u[0], u, 0, i, n, s) : Fp(_$r, u, h, e, i, n, s);
                }
            }
            function xp(t1) {
                var i = t1[4];
                if (i) for(var n = t1[3], s = 0; s < i.length; ++s){
                    var _$r = i[s];
                    _$r[0] = n[_$r[0]];
                }
            }
            function jp(t1) {
                for(var i = t1[5], n = t1[2], s = t1[1], _$r = t1[8], h = t1[9], e = t1[10], u = 0; u < _$r.length; ++u){
                    var o = _$r[u];
                    "number" == typeof o && (_$r[u] = i[o]);
                    var f = h[u];
                    "number" == typeof f && (f = f >= 0 ? n[f] : ~f, h[u] = f);
                    var _$c = e[u];
                    "number" == typeof _$c && (e[u] = s[_$c]);
                }
            }
            function Gp(t1) {
                if (Array.isArray(t1)) {
                    var i = t1[0];
                    return "number" == typeof i || _instanceof(i, Wp);
                }
                return !1;
            }
            function Hp(t1, i, n) {
                i.init(t1), null != n || (n = {});
                var _$r = t1[0], h = !1;
                if ("object" == (void 0 === _$r ? "undefined" : _type_of(_$r)) && (h = _$r.preprocessed, _$r = _$r.version), _$r < 1) throw Error(ot(5304, _$r));
                var e, u = n;
                u._version = _$r, u.result = i, t1[0] = u, h || (Up(t1, !1, n.classFinder, null != (e = n.reportMissingClass) ? e : Vp.reportMissingClass), xp(t1));
            }
            function Vp(t1, i, n) {
                "string" == typeof t1 && (t1 = JSON.parse(t1));
                var s, _$r = !1;
                if (i || (i = Sp.pool.get(), _$r = !0), Gp(t1)) {
                    Hp(t1, i, n);
                    var h = t1;
                    A.game._isCloning = !0;
                    var e = h[5], u = Lp(h);
                    A.game._isCloning = !1, h[7] && Op(h[7], e, h[2]), jp(h), s = e[u];
                } else s = wp(t1, i, n);
                return _$r && Sp.pool.put(i), s;
            }
            Dp[0] = function(t1, i, n, s) {
                i[n] = s;
            }, Dp[1] = Mp, Dp[2] = Cp(Mp), Dp[3] = Cp(Np), Dp[4] = Pp, Dp[5] = function(t1, i, n, s) {
                var _$r = s[0], h = i[n];
                (0, yp[_$r])(h, s);
            }, Dp[6] = Np, Dp[7] = function(t1, i, n, s) {
                i[n].set(s);
            }, Dp[8] = function(t1, i, n, s) {
                var _$r = s[0], h = new gp[_$r];
                (0, yp[_$r])(h, s), i[n] = h;
            }, Dp[9] = Cp(Pp), Dp[10] = function(t1, i, n, s) {
                var _$r = t1[3][s[0]];
                i[n] = Rp(t1, _$r, s[1]);
            }, Dp[11] = function(t1, i, n, s) {
                var _$r = s[0];
                i[n] = _$r;
                for(var h = 1; h < s.length; h += 3){
                    var e = s[h], u = s[h + 1], o = s[h + 2];
                    (0, Dp[u])(t1, _$r, e, o);
                }
            }, Dp[12] = function(t1, i, n, s) {
                for(var _$r = s[0], h = 0; h < _$r.length; ++h){
                    var e = _$r[h], u = s[h + 1];
                    0 !== u && (0, Dp[u])(t1, _$r, h, e);
                }
                i[n] = _$r;
            }, Vp.Details = Sp, Vp.reportMissingClass = function(t1) {
                rt(5302, t1);
            };
            var Wp = function Wp(t1) {
                this.preprocessed = !0, this.version = t1;
            };
            function zp(t1, i) {
                if (t1[0] < 1) throw Error(ot(5304, t1[0]));
                Up(t1, !0, i, Vp.reportMissingClass), xp(t1);
                for(var n = new Wp(t1[0]), s = t1[1], _$r = t1[2], h = t1[3], e = t1[4], u = t1[5], o = 0; o < u.length; ++o)u[o].unshift(n, s, _$r, h, e);
                return u;
            }
            function $p(t1, i, n) {
                return [
                    1,
                    0,
                    0,
                    [
                        t1
                    ],
                    0,
                    n ? [
                        i,
                        -1
                    ] : [
                        i
                    ],
                    [
                        0
                    ],
                    0,
                    [],
                    [],
                    []
                ];
            }
            function Xp(t1) {
                var n;
                return n = t1[1], t1[10].map(function(t1) {
                    return n[t1];
                });
            }
            A.deserialize = Vp;
            var qp = new WeakMap, Yp = new WeakSet, Kp = new WeakSet;
            function Jp(t1, i) {
                var s, n = Kg.safeFindClass, _$r = Sp.pool.get();
                try {
                    s = Vp(t1, _$r, {
                        classFinder: n,
                        customEnv: i
                    });
                } catch (t1) {
                    throw z(t1), Sp.pool.put(_$r), t1;
                }
                s._uuid = i.__uuid__ || "";
                for(var h = _$r.uuidList, e = _$r.uuidObjList, u = _$r.uuidPropList, o = _$r.uuidTypeList || [], f = [], _$c = 0; _$c < h.length; _$c++){
                    var a = h[_$c];
                    f[_$c] = {
                        uuid: Hw(a),
                        owner: e[_$c],
                        prop: u[_$c],
                        type: Jt(o[_$c])
                    };
                }
                return qp.set(s, f), s._native && Yp.add(s), Sp.pool.put(_$r), s;
            }
            var Qp = function() {
                function t1() {
                    this._depends = new Sw;
                }
                var i = t1.prototype;
                return i.init = function() {
                    this._depends.clear();
                }, i.getNativeDep = function(t1) {
                    var i = this._depends.get(t1);
                    return i && i.nativeDep ? r({}, i.nativeDep) : null;
                }, i.getDeps = function(t1) {
                    return this._depends.has(t1) ? this._depends.get(t1).deps : [];
                }, i.getDepsRecursively = function(t1) {
                    var i = Object.create(null), n = [];
                    return this.sh(t1, i, n), n;
                }, i.remove = function(t1) {
                    this._depends.remove(t1);
                }, i.parse = function(t1, i) {
                    var n, _$s, _$r = null;
                    if (Array.isArray(i) || i.__type__ || _instanceof(i, ip)) {
                        if (this._depends.has(t1)) return this._depends.get(t1);
                        if (!Array.isArray(i) || "number" == typeof (_$s = (n = i[5])[n.length - 1]) && _$s < 0) try {
                            var h = Jp(i, {
                                __uuid__: t1
                            });
                            (_$r = this.rh(h)).nativeDep && (_$r.nativeDep.uuid = t1), Mw.add(t1 + "@import", h);
                        } catch (i) {
                            Rw.remove(t1 + "@import"), _$r = {
                                deps: []
                            };
                        }
                        else _$r = {
                            deps: this.hh(i)
                        };
                    } else {
                        if (this._depends.has(t1) && (_$r = this._depends.get(t1)).parsedFromExistAsset) return _$r;
                        _$r = this.rh(i);
                    }
                    return this._depends.add(t1, _$r), _$r;
                }, i.rh = function(t1) {
                    for(var i = {
                        deps: [],
                        parsedFromExistAsset: !0
                    }, n = qp.get(t1), _$s = 0, _$r = n.length; _$s < _$r; _$s++)i.deps.push(n[_$s].uuid);
                    return Yp.has(t1) && (i.nativeDep = t1._nativeDep), i;
                }, i.hh = function(t1) {
                    var i = Xp(t1);
                    return i.forEach(function(t1, n) {
                        return i[n] = Hw(t1);
                    }), i;
                }, i.sh = function(t1, i, n) {
                    for(var _$s = this.getDeps(t1), _$r = 0; _$r < _$s.length; _$r++){
                        var h = _$s[_$r];
                        i[h] || (i[h] = !0, n.push(h), this.sh(h, i, n));
                    }
                }, s(t1, null, [
                    {
                        key: "instance",
                        get: function get() {
                            return this.eh || (this.eh = new t1), this.eh;
                        }
                    }
                ]), t1;
            }();
            Qp.eh = void 0;
            var Zp, ty = Qp.instance, iy = [
                new Fl
            ];
            function ny(t1, i) {
                for(var n = Math.max(t1, i), s = 0; n;)n >>= 1, s++;
                return s;
            }
            function ry(t1, i, n) {
                var t11;
                return 6 !== t1.gfxAPI || i && !(i & i - 1) && (t11 = n) && !(t11 & t11 - 1);
            }
            var hy, ey, oy, fy, cy = go("cc.SimpleTexture")(Zp = function(t1) {
                function i(i) {
                    var n;
                    return (n = t1.call(this, i) || this).uh = null, n.oh = null, n.fh = 1, n.ah = 0, n.dh = 0, n.wh = 0, n.gh = 1e3, n;
                }
                h(i, t1);
                var n = i.prototype;
                return n.getGFXTexture = function() {
                    return this.oh;
                }, n.destroy = function() {
                    return this.ph(), this.yh(), t1.prototype.destroy.call(this);
                }, n.updateImage = function() {
                    this.updateMipmaps(0);
                }, n.updateMipmaps = function() {}, n.uploadData = function(t1, i, n) {
                    if (void 0 === i && (i = 0), void 0 === n && (n = 0), this.uh && !(this.fh <= i)) {
                        var _$s = this._getGFXDevice();
                        if (_$s) {
                            var _$r = iy[0];
                            _$r.texExtent.width = this.ah >> i, _$r.texExtent.height = this.dh >> i, _$r.texSubres.mipLevel = i, _$r.texSubres.baseArrayLayer = n, ArrayBuffer.isView(t1) ? _$s.copyBuffersToTexture([
                                t1
                            ], this.uh, iy) : _$s.copyTexImagesToTexture([
                                t1
                            ], this.uh, iy);
                        }
                    }
                }, n._h = function(t1, i, n) {
                    var _$s = t1.data;
                    if (_$s && (this.uploadData(_$s, i, n), this.mh(), Ti.CLEANUP_IMAGE_CACHE)) {
                        var _$r = ty.getDeps(this._uuid), _$h = _$r.indexOf(t1._uuid);
                        -1 !== _$h && (ri(_$r, _$h), t1.decRef());
                    }
                }, n.mh = function() {
                    this.bh();
                }, n.bh = function() {
                    this.loaded = !0, this.emit("load");
                }, n.kh = function(t1) {
                    this.fh = t1 < 1 ? 1 : t1;
                }, n.Ah = function(t1, i) {
                    this.wh = t1 < 1 ? 0 : t1, this.gh = i < 1 ? 0 : i;
                }, n.setMipRange = function(t1, i) {
                    et(t1 <= i, 3124), this.Ah(t1, i);
                    var n = this._getGFXDevice();
                    if (n) {
                        var _$s = this.Eh(n);
                        this.ph(), this.oh = _$s;
                    }
                }, n.Th = function() {
                    return null;
                }, n.Sh = function() {
                    return null;
                }, n.Oh = function() {
                    if (this.ph(), this.yh(), 0 !== this.fh) {
                        var _$t = this._getGFXDevice();
                        _$t && (this.Ih(_$t), this.oh = this.Eh(_$t));
                    }
                }, n.isUsingOfflineMipmaps = function() {
                    return !1;
                }, n.Ih = function(t1) {
                    if (0 !== this.Qn && 0 !== this.Zn) {
                        var _$i = 0;
                        0 !== this._mipFilter && ry(t1, this.Qn, this.Zn) && (this.fh = ny(this.Qn, this.Zn), this.isUsingOfflineMipmaps() || this.isCompressed || (_$i = 1));
                        var n = this.Th({
                            usage: 22,
                            format: this._getGFXFormat(),
                            levelCount: this.fh,
                            flags: _$i
                        });
                        if (n) {
                            var _$s = t1.createTexture(n);
                            this.ah = n.width, this.dh = n.height, this.uh = _$s;
                        }
                    }
                }, n.Eh = function(t1) {
                    if (!this.uh) return null;
                    var _$i = this.gh < this.fh ? this.gh : this.fh - 1, n = this.Sh({
                        texture: this.uh,
                        format: this._getGFXFormat(),
                        baseLevel: this.wh,
                        levelCount: _$i - this.wh + 1
                    });
                    return n ? t1.createTexture(n) : null;
                }, n.yh = function() {
                    this.uh && (this.uh.destroy(), this.uh = null);
                }, n.ph = function() {
                    this.oh && (this.oh.destroy(), this.oh = null);
                }, s(i, [
                    {
                        key: "mipmapLevel",
                        get: function get() {
                            return this.fh;
                        }
                    }
                ]), i;
            }(Tg)) || Zp;
            A.SimpleTexture = cy;
            var ay = t1("dE", (hy = go("cc.Texture2D"), ey = Zo([
                mg
            ]), hy((fy = ho((oy = function(t1) {
                function i(i) {
                    var n;
                    return (n = t1.call(this, i) || this)._mipmaps = fy && fy(), n.Rh = [], n;
                }
                h(i, t1);
                var n = i.prototype;
                return n.Mh = function(t1) {
                    var _$i = this;
                    if (this.Rh = t1, this.kh(this.Rh.length), this.Rh.length > 0) {
                        var n = this.Rh[0];
                        this.reset({
                            width: n.width,
                            height: n.height,
                            format: n.format,
                            mipmapLevel: this.Rh.length,
                            baseLevel: this.wh,
                            maxLevel: this.gh
                        }), this.Rh.forEach(function(t1, n) {
                            _$i._h(t1, n);
                        });
                    } else this.reset({
                        width: 0,
                        height: 0,
                        mipmapLevel: this.Rh.length,
                        baseLevel: this.wh,
                        maxLevel: this.gh
                    });
                }, n.Ch = function() {
                    this.mipmaps = this._mipmaps;
                }, n.onLoaded = function() {
                    this.Ch();
                }, n.reset = function(t1) {
                    this.Qn = t1.width, this.Zn = t1.height, this._setGFXFormat(t1.format);
                    var _$i = void 0 === t1.mipmapLevel ? 1 : t1.mipmapLevel;
                    this.kh(_$i);
                    var n = void 0 === t1.baseLevel ? 0 : t1.baseLevel, _$s = void 0 === t1.maxLevel ? 1e3 : t1.maxLevel;
                    this.Ah(n, _$s), this.Oh();
                }, n.create = function(t1, i, n, s, r, h) {
                    void 0 === n && (n = 35), void 0 === s && (s = 1), void 0 === r && (r = 0), void 0 === h && (h = 1e3), this.reset({
                        width: t1,
                        height: i,
                        format: n,
                        mipmapLevel: s,
                        baseLevel: r,
                        maxLevel: h
                    });
                }, n.toString = function() {
                    return 0 !== this._mipmaps.length ? this._mipmaps[0].url : "";
                }, n.updateMipmaps = function(t1, i) {
                    if (void 0 === t1 && (t1 = 0), void 0 === i && (i = void 0), !(t1 >= this.Rh.length)) for(var n = Math.min(void 0 === i ? this.Rh.length : i, this.Rh.length - t1), _$s = 0; _$s < n; ++_$s){
                        var _$r = t1 + _$s;
                        this._h(this.Rh[_$r], _$r);
                    }
                }, n.getHtmlElementObj = function() {
                    return this._mipmaps[0] && _instanceof(this._mipmaps[0].data, HTMLElement) ? this._mipmaps[0].data : null;
                }, n.destroy = function() {
                    return this._mipmaps = [], this.Rh = [], t1.prototype.destroy.call(this);
                }, n.description = function() {
                    return "<cc.Texture2D | Name = " + (this._mipmaps[0] ? this._mipmaps[0].url : "") + " | Dimension = " + this.width + " x " + this.height + ">";
                }, n.releaseTexture = function() {
                    this.destroy();
                }, n._serialize = function() {
                    return null;
                }, n._deserialize = function(i, n) {
                    t1.prototype._deserialize.call(this, i.base, n), this._mipmaps = Array(i.mipmaps.length);
                    for(var _$r = 0; _$r < i.mipmaps.length; ++_$r)if (this._mipmaps[_$r] = new mg, i.mipmaps[_$r]) {
                        var _$h = i.mipmaps[_$r];
                        n.result.push(this._mipmaps, "" + _$r, _$h, ti(mg));
                    }
                }, n.Th = function(t1) {
                    var _$i = new Yl(1);
                    return _$i.width = this.Qn, _$i.height = this.Zn, Object.assign(_$i, t1), _$i;
                }, n.Sh = function(t1) {
                    var _$i = new Kl;
                    return _$i.type = 1, Object.assign(_$i, t1), _$i;
                }, n.initDefault = function(i) {
                    t1.prototype.initDefault.call(this, i);
                    var n = new mg;
                    n.initDefault(), this.image = n;
                }, n.validate = function() {
                    return this.mipmaps && 0 !== this.mipmaps.length;
                }, s(i, [
                    {
                        key: "mipmaps",
                        get: function get() {
                            return this._mipmaps;
                        },
                        set: function set(t1) {
                            this._mipmaps = t1;
                            var _$i = [];
                            if (1 === t1.length) {
                                var n = t1[0];
                                _$i.push.apply(_$i, n.gr());
                            } else if (t1.length > 1) for(var _$s = 0; _$s < t1.length; ++_$s){
                                var _$r = t1[_$s];
                                _$i.push(_$r.wr());
                            }
                            this.Mh(_$i);
                        }
                    },
                    {
                        key: "image",
                        get: function get() {
                            return 0 === this._mipmaps.length ? null : this._mipmaps[0];
                        },
                        set: function set(t1) {
                            this.mipmaps = t1 ? [
                                t1
                            ] : [];
                        }
                    }
                ]), i;
            }(cy)).prototype, "_mipmaps", [
                ey
            ], function() {
                return [];
            }), oy)) || oy));
            function vy(t1, i, n, s) {
                t1.drawTextureAt(i, n, s);
            }
            A.Texture2D = ay;
            var Oy = t1("A", function() {
                function t1(t1, i) {
                    this._innerTextureInfos = {}, this.Nh = [], this._count = 0;
                    var n = new Iy;
                    n.initWithSize(t1, i), this._texture = n, this.Qn = t1, this.Zn = i, this.Ph = 2, this.Dh = 2, this.Lh = 2;
                }
                var i = t1.prototype;
                return i.insertSpriteFrame = function(t1) {
                    var i = t1.rect, n = t1.texture, s = this._innerTextureInfos[n.getId()], _$r = i.x, h = i.y;
                    if (s) _$r += s.x, h += s.y;
                    else {
                        var e = n.width, u = n.height;
                        if (this.Ph + e + 2 > this.Qn && (this.Ph = 2, this.Dh = this.Lh), this.Dh + u + 2 > this.Lh && (this.Lh = this.Dh + u + 2), this.Lh > this.Zn) return null;
                        var o = this._texture, f = n.image;
                        A.internal.dynamicAtlasManager.textureBleeding && ((e <= 8 || u <= 8) && (vy(o, f, this.Ph - 1, this.Dh - 1), vy(o, f, this.Ph - 1, this.Dh + 1), vy(o, f, this.Ph + 1, this.Dh - 1), vy(o, f, this.Ph + 1, this.Dh + 1)), vy(o, f, this.Ph - 1, this.Dh), vy(o, f, this.Ph + 1, this.Dh), vy(o, f, this.Ph, this.Dh - 1), vy(o, f, this.Ph, this.Dh + 1)), vy(o, f, this.Ph, this.Dh), this._innerTextureInfos[n.getId()] = {
                            x: this.Ph,
                            y: this.Dh,
                            texture: n
                        }, this._count++, _$r += this.Ph, h += this.Dh, this.Ph += e + 2;
                    }
                    var _$c = {
                        x: _$r,
                        y: h,
                        texture: this._texture
                    };
                    return this.Nh.push(t1), _$c;
                }, i.removeSpriteFrame = function(t1) {
                    ei(this.Nh, t1);
                }, i.deleteInnerTexture = function(t1) {
                    t1 && this._innerTextureInfos[t1.getId()] && (delete this._innerTextureInfos[t1.getId()], this._count--);
                }, i.isEmpty = function() {
                    return this._count <= 0;
                }, i.reset = function() {
                    this.Ph = 2, this.Dh = 2, this.Lh = 2;
                    for(var _$t = this.Nh, i = 0, n = _$t.length; i < n; i++){
                        var s = _$t[i];
                        s.isValid && s._resetDynamicAtlasFrame();
                    }
                    this.Nh.length = 0, this._innerTextureInfos = {};
                }, i.destroy = function() {
                    this.reset(), this._texture.destroy();
                }, t1;
            }()), Iy = function(t1) {
                function i() {
                    return t1.apply(this, arguments) || this;
                }
                h(i, t1);
                var n = i.prototype;
                return n.initWithSize = function(t1, i, n) {
                    void 0 === n && (n = 35), this.reset({
                        width: t1,
                        height: i,
                        format: n
                    });
                }, n.drawTextureAt = function(t1, i, n) {
                    var s = this.getGFXTexture();
                    if (t1 && s) {
                        var _$r = this._getGFXDevice();
                        if (_$r) {
                            var _$h = new Fl;
                            _$h.texOffset.x = i, _$h.texOffset.y = n, _$h.texExtent.width = t1.width, _$h.texExtent.height = t1.height, _$r.copyTexImagesToTexture([
                                t1.data
                            ], s, [
                                _$h
                            ]);
                        } else nt(16363);
                    }
                }, i;
            }(ay), Ry = {
                NONE: 0,
                IGNORE_RAYCAST: 1048576,
                GIZMOS: 2097152,
                EDITOR: 4194304,
                UI_3D: 8388608,
                SCENE_GIZMO: 16777216,
                UI_2D: 33554432,
                PROFILER: 268435456,
                DEFAULT: 1073741824,
                ALL: 4294967295
            }, My = t1("cZ", function() {
                function t1() {}
                return t1.init = function() {
                    var i = Ei.querySettings("engine", "customLayers");
                    if (i) for(var n = 0; n < i.length; n++){
                        var s = i[n];
                        t1.addLayer(s.name, s.bit);
                    }
                }, t1.makeMaskInclude = function(t1) {
                    return t1.reduce(function(t1, i) {
                        return t1 | i;
                    }, 0);
                }, t1.makeMaskExclude = function(i) {
                    return ~t1.makeMaskInclude(i);
                }, t1.addLayer = function(i, n) {
                    if (void 0 !== n) if (n > 19 || n < 0) nt(16365);
                    else {
                        var s = 1 << n;
                        t1.Enum[i], ot(2104, i), t1.Enum[i] = s, kt(t1.Enum, String(s), i), t1.BitMask[i] = s, kt(t1.BitMask, String(s), i), li.update(t1.BitMask), gi.update(t1.Enum);
                    }
                    else nt(16364);
                }, t1.deleteLayer = function(i) {
                    if (i > 19 || i < 0) nt(16366);
                    else {
                        var n = 1 << i;
                        delete t1.Enum[t1.Enum[n]], delete t1.Enum[n], delete t1.BitMask[t1.BitMask[n]], delete t1.BitMask[n], li.update(t1.BitMask), gi.update(t1.Enum);
                    }
                }, t1.nameToLayer = function(i) {
                    return void 0 === i ? (nt(16367), -1) : I(t1.Enum[i]);
                }, t1.layerToName = function(i) {
                    return i > 31 || i < 0 ? (nt(16368), "") : t1.Enum[1 << i];
                }, t1;
            }());
            My.Enum = gi(Ry), My.BitMask = li(r({}, Ry)), A.Layers = My;
            var Cy = {
                DEFAULT: 100,
                UI: 200
            };
            A.RenderPassStage = Cy;
            var Ny = {
                bindings: [],
                layouts: {}
            }, Py = {
                bindings: [],
                layouts: {}
            }, Dy = new Gl([
                4,
                0,
                7,
                0
            ], [
                4,
                0,
                9,
                0
            ], [
                0,
                0,
                0,
                0
            ], [
                0,
                0,
                0,
                0
            ], [
                0,
                0,
                0,
                0
            ], [
                0,
                0,
                0,
                0
            ], [
                0,
                0,
                0,
                0
            ], [
                0,
                2,
                1,
                3
            ]), Ly = function Ly() {};
            Ly.TIME_OFFSET = 0, Ly.SCREEN_SIZE_OFFSET = 4, Ly.NATIVE_SIZE_OFFSET = 8, Ly.PROBE_INFO_OFFSET = 12, Ly.DEBUG_VIEW_MODE_OFFSET = 16, Ly.COUNT = 20, Ly.SIZE = 80, Ly.NAME = "CCGlobal", Ly.BINDING = 0, Ly.DESCRIPTOR = new md(Ly.BINDING, 1, 1, 63), Ly.LAYOUT = new Zl(0, Ly.BINDING, Ly.NAME, [
                new Ql("cc_time", 16, 1),
                new Ql("cc_screenSize", 16, 1),
                new Ql("cc_nativeSize", 16, 1),
                new Ql("cc_probeInfo", 16, 1),
                new Ql("cc_debug_view_mode", 16, 1)
            ], 1), Ny.layouts[Ly.NAME] = Ly.LAYOUT, Ny.bindings[Ly.BINDING] = Ly.DESCRIPTOR;
            var By = function By() {};
            By.MAT_VIEW_OFFSET = 0, By.MAT_VIEW_INV_OFFSET = 16, By.MAT_PROJ_OFFSET = 32, By.MAT_PROJ_INV_OFFSET = 48, By.MAT_VIEW_PROJ_OFFSET = 64, By.MAT_VIEW_PROJ_INV_OFFSET = 80, By.CAMERA_POS_OFFSET = 96, By.SURFACE_TRANSFORM_OFFSET = 100, By.SCREEN_SCALE_OFFSET = 104, By.EXPOSURE_OFFSET = 108, By.MAIN_LIT_DIR_OFFSET = 112, By.MAIN_LIT_COLOR_OFFSET = 116, By.AMBIENT_SKY_OFFSET = 120, By.AMBIENT_GROUND_OFFSET = 124, By.GLOBAL_FOG_COLOR_OFFSET = 128, By.GLOBAL_FOG_BASE_OFFSET = 132, By.GLOBAL_FOG_ADD_OFFSET = 136, By.NEAR_FAR_OFFSET = 140, By.VIEW_PORT_OFFSET = 144, By.COUNT = 148, By.SIZE = 592, By.NAME = "CCCamera", By.BINDING = 1, By.DESCRIPTOR = new md(By.BINDING, 1, 1, 63), By.LAYOUT = new Zl(0, By.BINDING, By.NAME, [
                new Ql("cc_matView", 25, 1),
                new Ql("cc_matViewInv", 25, 1),
                new Ql("cc_matProj", 25, 1),
                new Ql("cc_matProjInv", 25, 1),
                new Ql("cc_matViewProj", 25, 1),
                new Ql("cc_matViewProjInv", 25, 1),
                new Ql("cc_cameraPos", 16, 1),
                new Ql("cc_surfaceTransform", 16, 1),
                new Ql("cc_screenScale", 16, 1),
                new Ql("cc_exposure", 16, 1),
                new Ql("cc_mainLitDir", 16, 1),
                new Ql("cc_mainLitColor", 16, 1),
                new Ql("cc_ambientSky", 16, 1),
                new Ql("cc_ambientGround", 16, 1),
                new Ql("cc_fogColor", 16, 1),
                new Ql("cc_fogBase", 16, 1),
                new Ql("cc_fogAdd", 16, 1),
                new Ql("cc_nearFar", 16, 1),
                new Ql("cc_viewPort", 16, 1)
            ], 1), Ny.layouts[By.NAME] = By.LAYOUT, Ny.bindings[By.BINDING] = By.DESCRIPTOR;
            var Fy = function Fy() {};
            Fy.MAT_LIGHT_VIEW_OFFSET = 0, Fy.MAT_LIGHT_VIEW_PROJ_OFFSET = 16, Fy.SHADOW_INV_PROJ_DEPTH_INFO_OFFSET = 32, Fy.SHADOW_PROJ_DEPTH_INFO_OFFSET = 36, Fy.SHADOW_PROJ_INFO_OFFSET = 40, Fy.SHADOW_NEAR_FAR_LINEAR_SATURATION_INFO_OFFSET = 44, Fy.SHADOW_WIDTH_HEIGHT_PCF_BIAS_INFO_OFFSET = 48, Fy.SHADOW_LIGHT_PACKING_NBIAS_NULL_INFO_OFFSET = 52, Fy.SHADOW_COLOR_OFFSET = 56, Fy.PLANAR_NORMAL_DISTANCE_INFO_OFFSET = 60, Fy.COUNT = 64, Fy.SIZE = 256, Fy.NAME = "CCShadow", Fy.BINDING = 2, Fy.DESCRIPTOR = new md(Fy.BINDING, 1, 1, 63), Fy.LAYOUT = new Zl(0, Fy.BINDING, Fy.NAME, [
                new Ql("cc_matLightView", 25, 1),
                new Ql("cc_matLightViewProj", 25, 1),
                new Ql("cc_shadowInvProjDepthInfo", 16, 1),
                new Ql("cc_shadowProjDepthInfo", 16, 1),
                new Ql("cc_shadowProjInfo", 16, 1),
                new Ql("cc_shadowNFLSInfo", 16, 1),
                new Ql("cc_shadowWHPBInfo", 16, 1),
                new Ql("cc_shadowLPNNInfo", 16, 1),
                new Ql("cc_shadowColor", 16, 1),
                new Ql("cc_planarNDInfo", 16, 1)
            ], 1), Ny.layouts[Fy.NAME] = Fy.LAYOUT, Ny.bindings[Fy.BINDING] = Fy.DESCRIPTOR;
            var Uy = function Uy() {};
            Uy.CSM_LEVEL_COUNT = 4, Uy.CSM_VIEW_DIR_0_OFFSET = 0, Uy.CSM_VIEW_DIR_1_OFFSET = 16, Uy.CSM_VIEW_DIR_2_OFFSET = 32, Uy.CSM_ATLAS_OFFSET = 48, Uy.MAT_CSM_VIEW_PROJ_OFFSET = 64, Uy.CSM_PROJ_DEPTH_INFO_OFFSET = 128, Uy.CSM_PROJ_INFO_OFFSET = 144, Uy.CSM_SPLITS_INFO_OFFSET = 160, Uy.COUNT = 164, Uy.SIZE = 656, Uy.NAME = "CCCSM", Uy.BINDING = 3, Uy.DESCRIPTOR = new md(Uy.BINDING, 1, 1, 16), Uy.LAYOUT = new Zl(0, Uy.BINDING, Uy.NAME, [
                new Ql("cc_csmViewDir0", 16, Uy.CSM_LEVEL_COUNT),
                new Ql("cc_csmViewDir1", 16, Uy.CSM_LEVEL_COUNT),
                new Ql("cc_csmViewDir2", 16, Uy.CSM_LEVEL_COUNT),
                new Ql("cc_csmAtlas", 16, Uy.CSM_LEVEL_COUNT),
                new Ql("cc_matCSMViewProj", 25, Uy.CSM_LEVEL_COUNT),
                new Ql("cc_csmProjDepthInfo", 16, Uy.CSM_LEVEL_COUNT),
                new Ql("cc_csmProjInfo", 16, Uy.CSM_LEVEL_COUNT),
                new Ql("cc_csmSplitsInfo", 16, 1)
            ], 1), Ny.layouts[Uy.NAME] = Uy.LAYOUT, Ny.bindings[Uy.BINDING] = Uy.DESCRIPTOR;
            var xy = "cc_shadowMap", jy = new md(4, 16, 1, 16), Gy = new td(0, 4, xy, 28, 1);
            Ny.layouts[xy] = Gy, Ny.bindings[4] = jy;
            var Hy = "cc_environment", Vy = new md(5, 16, 1, 16), Wy = new td(0, 5, Hy, 31, 1);
            Ny.layouts[Hy] = Wy, Ny.bindings[5] = Vy;
            var zy = "cc_diffuseMap", $y = new md(7, 16, 1, 16), Xy = new td(0, 7, zy, 31, 1);
            Ny.layouts[zy] = Xy, Ny.bindings[7] = $y;
            var qy = "cc_spotShadowMap", Yy = new md(6, 16, 1, 16), Ky = new td(0, 6, qy, 28, 1);
            Ny.layouts[qy] = Ky, Ny.bindings[6] = Yy;
            var Jy = function Jy() {};
            Jy.MAT_WORLD_OFFSET = 0, Jy.MAT_WORLD_IT_OFFSET = 16, Jy.LIGHTINGMAP_UVPARAM = 32, Jy.LOCAL_SHADOW_BIAS = 36, Jy.REFLECTION_PROBE_DATA1 = 40, Jy.REFLECTION_PROBE_DATA2 = 44, Jy.REFLECTION_PROBE_BLEND_DATA1 = 48, Jy.REFLECTION_PROBE_BLEND_DATA2 = 52, Jy.COUNT = 56, Jy.SIZE = 224, Jy.NAME = "CCLocal", Jy.BINDING = 0, Jy.DESCRIPTOR = new md(0, 1, 1, 49, 1, 1), Jy.LAYOUT = new Zl(2, 0, Jy.NAME, [
                new Ql("cc_matWorld", 25, 1),
                new Ql("cc_matWorldIT", 25, 1),
                new Ql("cc_lightingMapUVParam", 16, 1),
                new Ql("cc_localShadowBias", 16, 1),
                new Ql("cc_reflectionProbeData1", 16, 1),
                new Ql("cc_reflectionProbeData2", 16, 1),
                new Ql("cc_reflectionProbeBlendData1", 16, 1),
                new Ql("cc_reflectionProbeBlendData2", 16, 1)
            ], 1), Py.layouts[Jy.NAME] = Jy.LAYOUT, Py.bindings[0] = Jy.DESCRIPTOR;
            var Qy = function Qy() {};
            Qy.WORLD_BOUND_CENTER = 0, Qy.WORLD_BOUND_HALF_EXTENTS = Qy.WORLD_BOUND_CENTER + 4, Qy.COUNT = Qy.WORLD_BOUND_HALF_EXTENTS + 4, Qy.SIZE = 4 * Qy.COUNT, Qy.NAME = "CCWorldBound", Qy.BINDING = 0, Qy.DESCRIPTOR = new md(Qy.BINDING, 1, 1, 33, 1, 1), Qy.LAYOUT = new Zl(2, Qy.BINDING, Qy.NAME, [
                new Ql("cc_worldBoundCenter", 16, 1),
                new Ql("cc_worldBoundHalfExtents", 16, 1)
            ], 1), Py.layouts[Qy.NAME] = Qy.LAYOUT, Py.bindings[Qy.BINDING] = Qy.DESCRIPTOR;
            var Zy = "a_matWorld0", t_ = "a_sh_linear_const_r", i_ = function i_() {};
            i_.BATCHING_COUNT = 10, i_.MAT_WORLDS_OFFSET = 0, i_.COUNT = 16 * i_.BATCHING_COUNT, i_.SIZE = 4 * i_.COUNT, i_.NAME = "CCLocalBatched", i_.BINDING = 0, i_.DESCRIPTOR = new md(i_.BINDING, 1, 1, 33, 1, 1), i_.LAYOUT = new Zl(2, i_.BINDING, i_.NAME, [
                new Ql("cc_matWorlds", 25, i_.BATCHING_COUNT)
            ], 1), Py.layouts[i_.NAME] = i_.LAYOUT, Py.bindings[i_.BINDING] = i_.DESCRIPTOR;
            var n_ = function n_() {};
            n_.LIGHTS_PER_PASS = 1, n_.LIGHT_POS_OFFSET = 0, n_.LIGHT_COLOR_OFFSET = 4, n_.LIGHT_SIZE_RANGE_ANGLE_OFFSET = 8, n_.LIGHT_DIR_OFFSET = 12, n_.LIGHT_BOUNDING_SIZE_VS_OFFSET = 16, n_.COUNT = 20, n_.SIZE = 80, n_.NAME = "CCForwardLight", n_.BINDING = 1, n_.DESCRIPTOR = new md(n_.BINDING, 2, 1, 16, 1, 1), n_.LAYOUT = new Zl(2, n_.BINDING, n_.NAME, [
                new Ql("cc_lightPos", 16, 1),
                new Ql("cc_lightColor", 16, 1),
                new Ql("cc_lightSizeRangeAngle", 16, 1),
                new Ql("cc_lightDir", 16, 1),
                new Ql("cc_lightBoundingSizeVS", 16, 1)
            ], 1), Py.layouts[n_.NAME] = n_.LAYOUT, Py.bindings[n_.BINDING] = n_.DESCRIPTOR;
            var s_ = function s_() {};
            s_.LIGHTS_PER_PASS = 10;
            var r_ = function r_() {};
            r_.JOINTS_TEXTURE_INFO_OFFSET = 0, r_.COUNT = r_.JOINTS_TEXTURE_INFO_OFFSET + 4, r_.SIZE = 4 * r_.COUNT, r_.NAME = "CCSkinningTexture", r_.BINDING = 3, r_.DESCRIPTOR = new md(r_.BINDING, 1, 1, 1, 1, 1), r_.LAYOUT = new Zl(2, r_.BINDING, r_.NAME, [
                new Ql("cc_jointTextureInfo", 16, 1)
            ], 1), Py.layouts[r_.NAME] = r_.LAYOUT, Py.bindings[r_.BINDING] = r_.DESCRIPTOR;
            var h_ = function h_() {};
            h_.JOINTS_ANIM_INFO_OFFSET = 0, h_.COUNT = h_.JOINTS_ANIM_INFO_OFFSET + 4, h_.SIZE = 4 * h_.COUNT, h_.NAME = "CCSkinningAnimation", h_.BINDING = 2, h_.DESCRIPTOR = new md(h_.BINDING, 1, 1, 1, 1, 1), h_.LAYOUT = new Zl(2, h_.BINDING, h_.NAME, [
                new Ql("cc_jointAnimInfo", 16, 1)
            ], 1), Py.layouts[h_.NAME] = h_.LAYOUT, Py.bindings[h_.BINDING] = h_.DESCRIPTOR;
            var e_ = function() {
                function t1() {}
                return t1.initLayout = function(i) {
                    t1.Bh = i, t1.et = 12 * i, t1._n = 4 * t1.et, t1.LAYOUT.members[0].count = 3 * i;
                }, s(t1, null, [
                    {
                        key: "JOINT_UNIFORM_CAPACITY",
                        get: function get() {
                            return t1.Bh;
                        }
                    },
                    {
                        key: "COUNT",
                        get: function get() {
                            return t1.et;
                        }
                    },
                    {
                        key: "SIZE",
                        get: function get() {
                            return t1._n;
                        }
                    }
                ]), t1;
            }();
            function u_(t1) {
                e_.initLayout(t1), Py.layouts[e_.NAME] = e_.LAYOUT, Py.bindings[e_.BINDING] = e_.DESCRIPTOR;
            }
            e_.Bh = 0, e_.et = 0, e_._n = 0, e_.NAME = "CCSkinning", e_.BINDING = 3, e_.DESCRIPTOR = new md(e_.BINDING, 1, 1, 1, 1, 1), e_.LAYOUT = new Zl(2, e_.BINDING, e_.NAME, [
                new Ql("cc_joints", 16, 1)
            ], 1);
            var o_ = function o_() {};
            o_.MAX_MORPH_TARGET_COUNT = 60, o_.OFFSET_OF_WEIGHTS = 0, o_.OFFSET_OF_DISPLACEMENT_TEXTURE_WIDTH = 240, o_.OFFSET_OF_DISPLACEMENT_TEXTURE_HEIGHT = 244, o_.OFFSET_OF_VERTICES_COUNT = 248, o_.COUNT_BASE_4_BYTES = 64, o_.SIZE = 256, o_.NAME = "CCMorph", o_.BINDING = 4, o_.DESCRIPTOR = new md(o_.BINDING, 1, 1, 1, 1, 1), o_.LAYOUT = new Zl(2, o_.BINDING, o_.NAME, [
                new Ql("cc_displacementWeights", 16, 15),
                new Ql("cc_displacementTextureInfo", 16, 1)
            ], 1), Py.layouts[o_.NAME] = o_.LAYOUT, Py.bindings[o_.BINDING] = o_.DESCRIPTOR;
            var f_ = function f_() {};
            f_.NAME = "CCUILocal", f_.BINDING = 5, f_.DESCRIPTOR = new md(f_.BINDING, 2, 1, 1, 1, 1), f_.LAYOUT = new Zl(2, f_.BINDING, f_.NAME, [
                new Ql("cc_local_data", 16, 1)
            ], 1), Py.layouts[f_.NAME] = f_.LAYOUT, Py.bindings[f_.BINDING] = f_.DESCRIPTOR;
            var c_ = function c_() {};
            c_.SH_LINEAR_CONST_R_OFFSET = 0, c_.SH_LINEAR_CONST_G_OFFSET = 4, c_.SH_LINEAR_CONST_B_OFFSET = 8, c_.SH_QUADRATIC_R_OFFSET = 12, c_.SH_QUADRATIC_G_OFFSET = 16, c_.SH_QUADRATIC_B_OFFSET = 20, c_.SH_QUADRATIC_A_OFFSET = 24, c_.COUNT = 28, c_.SIZE = 112, c_.NAME = "CCSH", c_.BINDING = 6, c_.DESCRIPTOR = new md(6, 1, 1, 16, 1, 1), c_.LAYOUT = new Zl(2, 6, c_.NAME, [
                new Ql("cc_sh_linear_const_r", 16, 1),
                new Ql("cc_sh_linear_const_g", 16, 1),
                new Ql("cc_sh_linear_const_b", 16, 1),
                new Ql("cc_sh_quadratic_r", 16, 1),
                new Ql("cc_sh_quadratic_g", 16, 1),
                new Ql("cc_sh_quadratic_b", 16, 1),
                new Ql("cc_sh_quadratic_a", 16, 1)
            ], 1), Py.layouts[c_.NAME] = c_.LAYOUT, Py.bindings[6] = c_.DESCRIPTOR;
            var a_ = "cc_jointTexture", v_ = new md(7, 16, 1, 1, 1, 4), l_ = new td(2, 7, a_, 28, 1);
            Py.layouts[a_] = l_, Py.bindings[7] = v_;
            var d_ = "cc_realtimeJoint", w_ = new md(7, 16, 1, 1, 1, 4), g_ = new td(2, 7, d_, 28, 1);
            Py.layouts[d_] = g_, Py.bindings[7] = w_;
            var p_ = "cc_PositionDisplacements", y_ = new md(8, 16, 1, 1, 1, 4), __ = new td(2, 8, p_, 28, 1);
            Py.layouts[p_] = __, Py.bindings[8] = y_;
            var m_ = "cc_NormalDisplacements", b_ = new md(9, 16, 1, 1, 1, 4), k_ = new td(2, 9, m_, 28, 1);
            Py.layouts[m_] = k_, Py.bindings[9] = b_;
            var A_ = "cc_TangentDisplacements", E_ = new md(10, 16, 1, 1, 1, 4), T_ = new td(2, 10, A_, 28, 1);
            Py.layouts[A_] = T_, Py.bindings[10] = E_;
            var S_ = "cc_lightingMap", I_ = new md(11, 16, 1, 16, 1, 4), R_ = new td(2, 11, S_, 28, 1);
            Py.layouts[S_] = R_, Py.bindings[11] = I_;
            var M_ = "cc_spriteTexture", C_ = new md(12, 16, 1, 16, 1, 4), N_ = new td(2, 12, M_, 28, 1);
            Py.layouts[M_] = N_, Py.bindings[12] = C_;
            var P_ = "cc_reflectionProbeCubemap", L_ = new md(13, 16, 1, 16, 1, 9), B_ = new td(2, 13, P_, 31, 1);
            Py.layouts[P_] = B_, Py.bindings[13] = L_;
            var F_ = "cc_reflectionProbePlanarMap", x_ = new md(14, 16, 1, 16, 1, 4), j_ = new td(2, 14, F_, 28, 1);
            Py.layouts[F_] = j_, Py.bindings[14] = x_;
            var G_ = "cc_reflectionProbeDataMap", H_ = new md(15, 16, 1, 16, 1, 4), V_ = new td(2, 15, G_, 28, 1);
            Py.layouts[G_] = V_, Py.bindings[15] = H_, new md(16, 16, 1, 16, 1, 9), new td(2, 16, "cc_reflectionProbeBlendCubemap", 31, 1);
            var W_, z_, $_, X_, q_ = My.makeMaskExclude([
                My.BitMask.UI_2D,
                My.BitMask.GIZMOS,
                My.BitMask.EDITOR,
                My.BitMask.SCENE_GIZMO,
                My.BitMask.PROFILER
            ]);
            function J_(t1) {
                if (W_) return W_;
                var i = new Yl(1, 0, Q_(t1) ? 11 : 35, 16, 16, 0, 1, 1, 1, 1);
                return W_ = t1.createTexture(i);
            }
            function Q_(t1) {
                return !(3 & ~t1.getFormatFeatures(11) || 6 === t1.gfxAPI);
            }
            function Z_(t1) {
                return !(3 & ~t1.getFormatFeatures(41));
            }
            function tm() {
                return new Uh(function() {
                    return {
                        priority: 0,
                        hash: 0,
                        depth: 0,
                        shaderId: 0,
                        subModel: null,
                        passIdx: 0
                    };
                }, 64);
            }
            t1("cO", Object.freeze({
                __proto__: null,
                CAMERA_DEFAULT_MASK: q_,
                CAMERA_EDITOR_MASK: My.makeMaskExclude([
                    My.BitMask.UI_2D,
                    My.BitMask.PROFILER
                ]),
                ENABLE_PROBE_BLEND: !1,
                INST_JOINT_ANIM_INFO: "a_jointAnimInfo",
                INST_MAT_WORLD: Zy,
                INST_SH: t_,
                JOINT_UNIFORM_CAPACITY: 30,
                MODEL_ALWAYS_MASK: My.Enum.ALL,
                ModelLocalBindings: {
                    UBO_LOCAL: 0,
                    UBO_FORWARD_LIGHTS: 1,
                    UBO_SKINNING_ANIMATION: 2,
                    UBO_SKINNING_TEXTURE: 3,
                    UBO_MORPH: 4,
                    UBO_UI_LOCAL: 5,
                    UBO_SH: 6,
                    SAMPLER_JOINTS: 7,
                    SAMPLER_MORPH_POSITION: 8,
                    SAMPLER_MORPH_NORMAL: 9,
                    SAMPLER_MORPH_TANGENT: 10,
                    SAMPLER_LIGHTMAP: 11,
                    SAMPLER_SPRITE: 12,
                    SAMPLER_REFLECTION_PROBE_CUBE: 13,
                    SAMPLER_REFLECTION_PROBE_PLANAR: 14,
                    SAMPLER_REFLECTION_PROBE_DATA_MAP: 15,
                    COUNT: 16
                },
                PIPELINE_FLOW_FORWARD: "ForwardFlow",
                PIPELINE_FLOW_MAIN: "MainFlow",
                PIPELINE_FLOW_SHADOW: "ShadowFlow",
                PIPELINE_FLOW_SMAA: "SMAAFlow",
                PIPELINE_FLOW_TONEMAP: "ToneMapFlow",
                PipelineGlobalBindings: {
                    UBO_GLOBAL: 0,
                    UBO_CAMERA: 1,
                    UBO_SHADOW: 2,
                    UBO_CSM: 3,
                    SAMPLER_SHADOWMAP: 4,
                    SAMPLER_ENVIRONMENT: 5,
                    SAMPLER_SPOT_SHADOW_MAP: 6,
                    SAMPLER_DIFFUSEMAP: 7,
                    COUNT: 8
                },
                RenderPassStage: Cy,
                RenderPriority: {
                    MIN: 0,
                    MAX: 255,
                    DEFAULT: 128
                },
                SetIndex: {
                    GLOBAL: 0,
                    MATERIAL: 1,
                    LOCAL: 2,
                    COUNT: 3
                },
                UBOCSM: Uy,
                UBOCSMEnum: {
                    CSM_LEVEL_COUNT: 4,
                    CSM_VIEW_DIR_0_OFFSET: 0,
                    CSM_VIEW_DIR_1_OFFSET: 16,
                    CSM_VIEW_DIR_2_OFFSET: 32,
                    CSM_ATLAS_OFFSET: 48,
                    MAT_CSM_VIEW_PROJ_OFFSET: 64,
                    CSM_PROJ_DEPTH_INFO_OFFSET: 128,
                    CSM_PROJ_INFO_OFFSET: 144,
                    CSM_SPLITS_INFO_OFFSET: 160,
                    COUNT: 164,
                    SIZE: 656
                },
                UBOCamera: By,
                UBOCameraEnum: {
                    MAT_VIEW_OFFSET: 0,
                    MAT_VIEW_INV_OFFSET: 16,
                    MAT_PROJ_OFFSET: 32,
                    MAT_PROJ_INV_OFFSET: 48,
                    MAT_VIEW_PROJ_OFFSET: 64,
                    MAT_VIEW_PROJ_INV_OFFSET: 80,
                    CAMERA_POS_OFFSET: 96,
                    SURFACE_TRANSFORM_OFFSET: 100,
                    SCREEN_SCALE_OFFSET: 104,
                    EXPOSURE_OFFSET: 108,
                    MAIN_LIT_DIR_OFFSET: 112,
                    MAIN_LIT_COLOR_OFFSET: 116,
                    AMBIENT_SKY_OFFSET: 120,
                    AMBIENT_GROUND_OFFSET: 124,
                    GLOBAL_FOG_COLOR_OFFSET: 128,
                    GLOBAL_FOG_BASE_OFFSET: 132,
                    GLOBAL_FOG_ADD_OFFSET: 136,
                    NEAR_FAR_OFFSET: 140,
                    VIEW_PORT_OFFSET: 144,
                    COUNT: 148,
                    SIZE: 592
                },
                UBODeferredLight: s_,
                UBOForwardLight: n_,
                UBOForwardLightEnum: {
                    LIGHTS_PER_PASS: 1,
                    LIGHT_POS_OFFSET: 0,
                    LIGHT_COLOR_OFFSET: 4,
                    LIGHT_SIZE_RANGE_ANGLE_OFFSET: 8,
                    LIGHT_DIR_OFFSET: 12,
                    LIGHT_BOUNDING_SIZE_VS_OFFSET: 16,
                    COUNT: 20,
                    SIZE: 80
                },
                UBOGlobal: Ly,
                UBOGlobalEnum: {
                    TIME_OFFSET: 0,
                    SCREEN_SIZE_OFFSET: 4,
                    NATIVE_SIZE_OFFSET: 8,
                    PROBE_INFO_OFFSET: 12,
                    DEBUG_VIEW_MODE_OFFSET: 16,
                    COUNT: 20,
                    SIZE: 80
                },
                UBOLocal: Jy,
                UBOLocalBatched: i_,
                UBOLocalEnum: {
                    MAT_WORLD_OFFSET: 0,
                    MAT_WORLD_IT_OFFSET: 16,
                    LIGHTINGMAP_UVPARAM: 32,
                    LOCAL_SHADOW_BIAS: 36,
                    REFLECTION_PROBE_DATA1: 40,
                    REFLECTION_PROBE_DATA2: 44,
                    REFLECTION_PROBE_BLEND_DATA1: 48,
                    REFLECTION_PROBE_BLEND_DATA2: 52,
                    COUNT: 56,
                    SIZE: 224,
                    BINDING: 0
                },
                UBOMorph: o_,
                UBOMorphEnum: {
                    MAX_MORPH_TARGET_COUNT: 60,
                    OFFSET_OF_WEIGHTS: 0,
                    OFFSET_OF_DISPLACEMENT_TEXTURE_WIDTH: 240,
                    OFFSET_OF_DISPLACEMENT_TEXTURE_HEIGHT: 244,
                    OFFSET_OF_VERTICES_COUNT: 248,
                    COUNT_BASE_4_BYTES: 64,
                    SIZE: 256
                },
                UBOSH: c_,
                UBOSHEnum: {
                    SH_LINEAR_CONST_R_OFFSET: 0,
                    SH_LINEAR_CONST_G_OFFSET: 4,
                    SH_LINEAR_CONST_B_OFFSET: 8,
                    SH_QUADRATIC_R_OFFSET: 12,
                    SH_QUADRATIC_G_OFFSET: 16,
                    SH_QUADRATIC_B_OFFSET: 20,
                    SH_QUADRATIC_A_OFFSET: 24,
                    COUNT: 28,
                    SIZE: 112,
                    BINDING: 6
                },
                UBOShadow: Fy,
                UBOShadowEnum: {
                    MAT_LIGHT_VIEW_OFFSET: 0,
                    MAT_LIGHT_VIEW_PROJ_OFFSET: 16,
                    SHADOW_INV_PROJ_DEPTH_INFO_OFFSET: 32,
                    SHADOW_PROJ_DEPTH_INFO_OFFSET: 36,
                    SHADOW_PROJ_INFO_OFFSET: 40,
                    SHADOW_NEAR_FAR_LINEAR_SATURATION_INFO_OFFSET: 44,
                    SHADOW_WIDTH_HEIGHT_PCF_BIAS_INFO_OFFSET: 48,
                    SHADOW_LIGHT_PACKING_NBIAS_NULL_INFO_OFFSET: 52,
                    SHADOW_COLOR_OFFSET: 56,
                    PLANAR_NORMAL_DISTANCE_INFO_OFFSET: 60,
                    COUNT: 64,
                    SIZE: 256
                },
                UBOSkinning: e_,
                UBOSkinningAnimation: h_,
                UBOSkinningTexture: r_,
                UBOUILocal: f_,
                UBOWorldBound: Qy,
                UNIFORM_DIFFUSEMAP_BINDING: 7,
                UNIFORM_ENVIRONMENT_BINDING: 5,
                UNIFORM_JOINT_TEXTURE_BINDING: 7,
                UNIFORM_LIGHTMAP_TEXTURE_BINDING: 11,
                UNIFORM_NORMAL_MORPH_TEXTURE_BINDING: 9,
                UNIFORM_POSITION_MORPH_TEXTURE_BINDING: 8,
                UNIFORM_REALTIME_JOINT_TEXTURE_BINDING: 7,
                UNIFORM_REFLECTION_PROBE_BLEND_CUBEMAP_BINDING: 16,
                UNIFORM_REFLECTION_PROBE_CUBEMAP_BINDING: 13,
                UNIFORM_REFLECTION_PROBE_DATA_MAP_BINDING: 15,
                UNIFORM_REFLECTION_PROBE_TEXTURE_BINDING: 14,
                UNIFORM_SHADOWMAP_BINDING: 4,
                UNIFORM_SPOT_SHADOW_MAP_TEXTURE_BINDING: 6,
                UNIFORM_SPRITE_TEXTURE_BINDING: 12,
                UNIFORM_TANGENT_MORPH_TEXTURE_BINDING: 10,
                bindingMappingInfo: Dy,
                getDefaultShadowTexture: J_,
                getPassPool: tm,
                globalDescriptorSetLayout: Ny,
                isEnableEffect: function isEnableEffect() {
                    return !(!A.rendering || !A.rendering.enableEffectImport);
                },
                localDescriptorSetLayout: Py,
                localDescriptorSetLayout_ResizeMaxJoints: u_,
                supportsR16HalfFloatTexture: function supportsR16HalfFloatTexture(t1) {
                    return !(3 & ~t1.getFormatFeatures(8));
                },
                supportsR32FloatTexture: Q_,
                supportsRGBA16HalfFloatTexture: Z_,
                supportsRGBA32FloatTexture: function supportsRGBA32FloatTexture(t1) {
                    return !(3 & ~t1.getFormatFeatures(44));
                }
            }));
            var rm = function rm(t1, i, n, s) {
                return void 0 === s && (s = 0), i << 26 & 4227858432 | t1 << 20 & 66060288 | n << 12 & 1044480 | 4095 & s;
            }, hm = function hm(t1) {
                return (4227858432 & t1) >>> 26;
            }, em = function em(t1) {
                return (66060288 & t1) >>> 20;
            }, um = function um(t1) {
                return (1044480 & t1) >>> 12;
            }, om = function om(t1) {
                return 4095 & t1;
            }, fm = function fm(t1, i) {
                return 67108863 & t1 | i << 26 & 4227858432;
            }, cm = ((z_ = {})[0] = function cm(t1, i, n) {
                return void 0 === n && (n = 0), nt(12010, n);
            }, z_[5] = function(t1, i, n) {
                return void 0 === n && (n = 0), t1[n];
            }, z_[6] = function(t1, i, n) {
                return void 0 === n && (n = 0), Or.fromArray(i, t1, n);
            }, z_[7] = function(t1, i, n) {
                return void 0 === n && (n = 0), Ss.fromArray(i, t1, n);
            }, z_[8] = function(t1, i, n) {
                return void 0 === n && (n = 0), Hr.fromArray(i, t1, n);
            }, z_[13] = function(t1, i, n) {
                return void 0 === n && (n = 0), t1[n];
            }, z_[14] = function(t1, i, n) {
                return void 0 === n && (n = 0), Or.fromArray(i, t1, n);
            }, z_[15] = function(t1, i, n) {
                return void 0 === n && (n = 0), Ss.fromArray(i, t1, n);
            }, z_[16] = function(t1, i, n) {
                return void 0 === n && (n = 0), Hr.fromArray(i, t1, n);
            }, z_[21] = function(t1, i, n) {
                return void 0 === n && (n = 0), Ps.fromArray(i, t1, n);
            }, z_[25] = function(t1, i, n) {
                return void 0 === n && (n = 0), cr.fromArray(i, t1, n);
            }, z_), am = (($_ = {})[0] = function am(t1, i, n) {
                return void 0 === n && (n = 0), nt(12010, n);
            }, $_[5] = function(t1, i, n) {
                return void 0 === n && (n = 0), t1[n] = i;
            }, $_[6] = function(t1, i, n) {
                return void 0 === n && (n = 0), Or.toArray(t1, i, n);
            }, $_[7] = function(t1, i, n) {
                return void 0 === n && (n = 0), Ss.toArray(t1, i, n);
            }, $_[8] = function(t1, i, n) {
                return void 0 === n && (n = 0), Hr.toArray(t1, i, n);
            }, $_[13] = function(t1, i, n) {
                return void 0 === n && (n = 0), t1[n] = i;
            }, $_[14] = function(t1, i, n) {
                return void 0 === n && (n = 0), Or.toArray(t1, i, n);
            }, $_[15] = function(t1, i, n) {
                return void 0 === n && (n = 0), Ss.toArray(t1, i, n);
            }, $_[16] = function(t1, i, n) {
                return void 0 === n && (n = 0), Hr.toArray(t1, i, n);
            }, $_[21] = function(t1, i, n) {
                return void 0 === n && (n = 0), Ps.toArray(t1, i, n);
            }, $_[25] = function(t1, i, n) {
                return void 0 === n && (n = 0), cr.toArray(t1, i, n);
            }, $_), vm = ((X_ = {})[5] = function vm(t1) {
                return "number" == typeof t1;
            }, X_[13] = function(t1) {
                return "number" == typeof t1;
            }, X_[6] = function(t1) {
                return !!_instanceof(t1, Or);
            }, X_[14] = function(t1) {
                return !!_instanceof(t1, Or);
            }, X_[7] = function(t1) {
                return !!_instanceof(t1, Ss);
            }, X_[15] = function(t1) {
                return !!_instanceof(t1, Ss);
            }, X_[8] = function(t1) {
                return !!_instanceof(t1, Hr);
            }, X_[16] = function(t1) {
                return !!(_instanceof(t1, Hr) || _instanceof(t1, Yr) || _instanceof(t1, qs));
            }, X_[21] = function(t1) {
                return !!_instanceof(t1, Ps);
            }, X_[25] = function(t1) {
                return !!_instanceof(t1, cr);
            }, X_), lm = [
                Object.freeze([
                    0
                ]),
                Object.freeze([
                    0,
                    0
                ]),
                Object.freeze([
                    0,
                    0,
                    0,
                    0
                ]),
                Object.freeze([
                    1,
                    0,
                    0,
                    0,
                    0,
                    1,
                    0,
                    0,
                    0,
                    0,
                    1,
                    0,
                    0,
                    0,
                    0,
                    1
                ])
            ];
            function dm(t1) {
                switch(t1){
                    case 1:
                    case 5:
                    case 9:
                    case 13:
                        break;
                    case 2:
                    case 6:
                    case 10:
                    case 14:
                        return lm[1];
                    case 4:
                    case 8:
                    case 12:
                    case 16:
                        return lm[2];
                    case 25:
                        return lm[3];
                    case 28:
                        return "default-texture";
                    case 31:
                        return "default-cube-texture";
                    case 29:
                        return "default-array-texture";
                    case 30:
                        return "default-3d-texture";
                }
                return lm[0];
            }
            function wm(t1) {
                switch(t1){
                    case 28:
                        return "-texture";
                    case 31:
                        return "-cube-texture";
                    case 29:
                        return "-array-texture";
                    case 30:
                        return "-3d-texture";
                    default:
                        return "-unknown";
                }
            }
            function gm(t1, i) {
                for(var n = Object.entries(i), s = !1, _$r = 0; _$r < n.length; _$r++)t1[n[_$r][0]] !== n[_$r][1] && (t1[n[_$r][0]] = n[_$r][1], s = !0);
                return s;
            }
            function pm(t1, i) {
                switch(t1.type){
                    case "boolean":
                        return "number" == typeof i ? i.toString() : i ? "1" : "0";
                    case "string":
                        return void 0 !== i ? i : t1.options[0];
                    case "number":
                        return void 0 !== i ? i.toString() : t1.range[0].toString();
                    default:
                        return nt(16369), "-1";
                }
            }
            function ym(t1, i) {
                for(var n = [], s = 0; s < i.length; s++){
                    var _$r = i[s], h = _$r.name, e = t1[h], u = pm(_$r, e), o = !e || "0" === e;
                    n.push({
                        name: h,
                        value: u,
                        isDefault: o
                    });
                }
                return n;
            }
            function _m(t1, i) {
                return t1 + i.reduce(function(t1, i) {
                    return i.isDefault ? t1 : t1 + "|" + i.name + i.value;
                }, "");
            }
            function mm(t1, i) {
                for(var n = 0; n < t1.length; n++){
                    var s = t1[n];
                    if ("!" === s[0]) {
                        if (i[s.slice(1)]) return !1;
                    } else if (!i[s]) return !1;
                }
                return !0;
            }
            function bm(t1, i, n) {
                for(var s = [], _$r = t1.attributes, h = 0; h < _$r.length; h++)mm(_$r[h].defines, n) && s.push(i[h]);
                return s;
            }
            function km(t1, i) {
                var n = t1.defines;
                if (t1.uber) {
                    for(var s = "", _$r = 0; _$r < n.length; _$r++){
                        var h = n[_$r], e = i[h.name];
                        if (e && h._map) {
                            var u = h._map(e);
                            s += "" + h._offset + u + "|";
                        }
                    }
                    return "" + s + t1.hash;
                }
                for(var o = 0, f = 0; f < n.length; f++){
                    var _$c = n[f], a = i[_$c.name];
                    a && _$c._map && (o |= _$c._map(a) << _$c._offset);
                }
                return o.toString(16) + "|" + t1.hash;
            }
            var Am = new Map;
            function Em(t1, i) {
                if (i.count) return t1 + zd(i.type) * i.count;
                var n = Am.get(i.name);
                return void 0 !== n ? t1 + zd(i.type) * n : (rt(16345, i.name), t1);
            }
            function Tm(t1) {
                return t1.reduce(Em, 0);
            }
            function Sm(t1) {
                for(var i = {}, n = 0; n < t1.blocks.length; n++)for(var s = t1.blocks[n], _$r = s.members, h = 0, e = 0; e < _$r.length; e++){
                    var u = _$r[e];
                    i[u.name] = rm(s.binding, u.type, u.count, h), h += (zd(u.type) >> 2) * u.count;
                }
                for(var o = 0; o < t1.samplerTextures.length; o++){
                    var f = t1.samplerTextures[o];
                    i[f.name] = rm(f.binding, f.type, f.count);
                }
                return i;
            }
            function Om(t1) {
                return Math.ceil(Math.log2(Math.max(t1, 2)));
            }
            function Im(t1) {
                for(var i = 0, s = 0; s < t1.defines.length; s++)!function n() {
                    var n = t1.defines[s], _$r = 1;
                    if ("number" === n.type) {
                        var h = n.range;
                        _$r = Om(h[1] - h[0] + 1), n._map = function(t1) {
                            return t1 - h[0];
                        };
                    } else "string" === n.type ? (_$r = Om(n.options.length), n._map = function(t1) {
                        return Math.max(0, n.options.findIndex(function(i) {
                            return i === t1;
                        }));
                    }) : "boolean" === n.type && (n._map = function(t1) {
                        return +!!t1;
                    });
                    n._offset = i, i += _$r;
                }();
                for(var _$r in i > 31 && (t1.uber = !0), t1.constantMacros = "", t1.builtins.statistics)t1.constantMacros += "#define " + _$r + " " + t1.builtins.statistics[_$r] + "\n";
            }
            function Rm(t1) {
                return Object.keys(t1).reduce(function(i, n) {
                    return i.reduce(function(i, s) {
                        for(var h = t1[n], e = 0; e < h.length; ++e){
                            var u = r({}, s);
                            u[n] = h[e], i.push(u);
                        }
                        return i;
                    }, []);
                }, [
                    {}
                ]);
            }
            function Mm(t1) {
                for(var i = 0; i < t1.techniques.length; i++)for(var n = t1.techniques[i], s = 0; s < n.passes.length; s++){
                    var _$r = n.passes[s];
                    void 0 !== _$r.propertyIndex && void 0 === _$r.properties && (_$r.properties = n.passes[_$r.propertyIndex].properties);
                }
            }
            Am.set("cc_joints", e_.LAYOUT.members[0].count), Am.set("cc_lightPos", 1), Am.set("cc_lightColor", 1), Am.set("cc_lightSizeRangeAngle", 1), Am.set("cc_lightDir", 1), Am.set("cc_lightBoundingSizeVS", 1);
            var Cm = new bd;
            function Nm(t1, i, n, s) {
                for(var _$r = t1.builtins[s], h = [], u = 0; u < _$r.blocks.length; u++)!function e() {
                    var _$t = _$r.blocks[u], _$i = n.layouts[_$t.name], _$s = _$i && n.bindings.find(function(t1) {
                        return t1.binding === _$i.binding;
                    });
                    if (!(_$i && _$s && 15 & _$s.descriptorType)) return nt(16348, _$t.name);
                    h.push(_$i);
                }();
                Array.prototype.unshift.apply(i.shaderInfo.blocks, h);
                for(var o = [], _$c = 0; _$c < _$r.samplerTextures.length; _$c++)!function f() {
                    var _$t = _$r.samplerTextures[_$c], _$i = n.layouts[_$t.name], _$s = _$i && n.bindings.find(function(t1) {
                        return t1.binding === _$i.binding;
                    });
                    if (!(_$i && _$s && 496 & _$s.descriptorType)) return nt(16349, _$t.name);
                    o.push(_$i);
                }();
                Array.prototype.unshift.apply(i.shaderInfo.samplerTextures, o);
            }
            function Dm(t1) {
                switch(t1.gfxAPI){
                    case 1:
                    case 6:
                        return "glsl1";
                    case 2:
                    case 7:
                        return "glsl3";
                    default:
                        return "glsl4";
                }
            }
            var Fm, Um, xm, jm, Gm, Hm = new (function() {
                function t1() {
                    this._templates = {}, this._cache = {}, this._templateInfos = {};
                }
                var i = t1.prototype;
                return i.register = function(t1) {
                    for(var i = 0; i < t1.shaders.length; i++)this.define(t1.shaders[i]).effectName = t1.name;
                    for(var n = 0; n < t1.techniques.length; n++)for(var s = t1.techniques[n], _$r = 0; _$r < s.passes.length; _$r++){
                        var h = s.passes[_$r];
                        void 0 !== h.propertyIndex && void 0 === h.properties && (h.properties = s.passes[h.propertyIndex].properties);
                    }
                }, i.define = function(t1) {
                    var i = this._templates[t1.name];
                    if (i && i.hash === t1.hash) return i;
                    var n = r({}, t1);
                    if (Im(n), this._templates[t1.name] = n, !this._templateInfos[n.hash]) {
                        var s = {};
                        s.samplerStartBinding = n.blocks.length, s.shaderInfo = new od, s.blockSizes = [], s.bindings = [];
                        for(var h = 0; h < n.blocks.length; h++){
                            var e = n.blocks[h];
                            s.blockSizes.push(Tm(e.members)), s.bindings.push(new md(e.binding, 1, 1, e.stageFlags)), s.shaderInfo.blocks.push(new Zl(1, e.binding, e.name, e.members.map(function(t1) {
                                return new Ql(t1.name, t1.type, t1.count);
                            }), 1));
                        }
                        for(var u = 0; u < n.samplerTextures.length; u++){
                            var o = n.samplerTextures[u];
                            s.bindings.push(new md(o.binding, 16, o.count, o.stageFlags)), s.shaderInfo.samplerTextures.push(new td(1, o.binding, o.name, o.type, o.count));
                        }
                        for(var f = 0; f < n.samplers.length; f++){
                            var _$c = n.samplers[f];
                            s.bindings.push(new md(_$c.binding, 32, _$c.count, _$c.stageFlags)), s.shaderInfo.samplers.push(new id(1, _$c.binding, _$c.name, _$c.count));
                        }
                        for(var a = 0; a < n.textures.length; a++){
                            var v = n.textures[a];
                            s.bindings.push(new md(v.binding, 64, v.count, v.stageFlags)), s.shaderInfo.textures.push(new nd(1, v.binding, v.name, v.type, v.count));
                        }
                        for(var l = 0; l < n.buffers.length; l++){
                            var _$d = n.buffers[l];
                            s.bindings.push(new md(_$d.binding, 4, 1, _$d.stageFlags)), s.shaderInfo.buffers.push(new rd(1, _$d.binding, _$d.name, 1, _$d.memoryAccess));
                        }
                        for(var w = 0; w < n.images.length; w++){
                            var g = n.images[w];
                            s.bindings.push(new md(g.binding, 128, g.count, g.stageFlags)), s.shaderInfo.images.push(new sd(1, g.binding, g.name, g.type, g.count, g.memoryAccess));
                        }
                        for(var p = 0; p < n.subpassInputs.length; p++){
                            var _$y = n.subpassInputs[p];
                            s.bindings.push(new md(_$y.binding, 256, _$y.count, _$y.stageFlags)), s.shaderInfo.subpassInputs.push(new hd(1, _$y.binding, _$y.name, _$y.count));
                        }
                        s.gfxAttributes = [];
                        for(var _$_ = 0; _$_ < n.attributes.length; _$_++){
                            var m = n.attributes[_$_];
                            s.gfxAttributes.push(new ud(m.name, m.format, m.isNormalized, 0, m.isInstanced, m.location));
                        }
                        Nm(n, s, Py, "locals"), s.shaderInfo.stages.push(new ed(1, "")), s.shaderInfo.stages.push(new ed(16, "")), s.handleMap = Sm(n), s.setLayouts = [], this._templateInfos[n.hash] = s;
                    }
                    return n;
                }, i.getTemplate = function(t1) {
                    return this._templates[t1];
                }, i.getTemplateInfo = function(t1) {
                    var i = this._templates[t1].hash;
                    return this._templateInfos[i];
                }, i.getDescriptorSetLayout = function(t1, i, n) {
                    void 0 === n && (n = !1);
                    var s = this._templates[i], _$r = this._templateInfos[s.hash];
                    return _$r.setLayouts.length || (Cm.bindings = _$r.bindings, _$r.setLayouts[1] = t1.createDescriptorSetLayout(Cm), Cm.bindings = Py.bindings, _$r.setLayouts[2] = t1.createDescriptorSetLayout(Cm)), _$r.setLayouts[n ? 2 : 1];
                }, i.hasProgram = function(t1) {
                    return void 0 !== this._templates[t1];
                }, i.getKey = function(t1, i) {
                    return km(this._templates[t1], i);
                }, i.destroyShaderByDefines = function(t1) {
                    var i = this, n = Object.keys(t1);
                    if (n.length) for(var s = n.map(function(i) {
                        var n = t1[i];
                        return "boolean" == typeof n && (n = n ? "1" : "0"), RegExp("" + i + n);
                    }), _$r = Object.keys(this._cache).filter(function(t1) {
                        return s.every(function(n) {
                            return n.test(i._cache[t1].name);
                        });
                    }), h = 0; h < _$r.length; h++){
                        var e = _$r[h], u = this._cache[e];
                        X("destroyed shader " + u.name), u.destroy(), delete this._cache[e];
                    }
                }, i.getGFXShader = function(t1, i, n, s, r) {
                    Object.assign(n, s.macros), r || (r = this.getKey(i, n));
                    var h = this._cache[r];
                    if (h) return h;
                    var e = this._templates[i], u = this._templateInfos[e.hash];
                    u.pipelineLayout || (this.getDescriptorSetLayout(t1, i), Nm(e, u, Ny, "globals"), u.setLayouts[0] = s.descriptorSetLayout, u.pipelineLayout = t1.createPipelineLayout(new Ad(u.setLayouts)));
                    var o = ym(n, e.defines), f = s.constantMacros + e.constantMacros + o.reduce(function(t1, i) {
                        return t1 + "#define " + i.name + " " + i.value + "\n";
                    }, ""), _$c = e.glsl3, a = Dm(t1);
                    a ? _$c = e[a] : rt(16346), u.shaderInfo.stages[0].source = f + _$c.vert, u.shaderInfo.stages[1].source = f + _$c.frag, u.shaderInfo.attributes = bm(e, u.gfxAttributes, n), u.shaderInfo.name = _m(i, o);
                    var v = u.shaderInfo;
                    return this._cache[r] = t1.createShader(v);
                }, t1;
            }());
            A.programLib = Hm;
            var zm, $m, Xm, qm, Ym, Km = [
                "planar-shadow",
                "skybox",
                "deferred-lighting",
                "bloom",
                "hbao",
                "copy-pass",
                "post-process",
                "profiler",
                "splash-screen",
                "unlit",
                "sprite",
                "particle",
                "particle-gpu",
                "particle-trail",
                "billboard",
                "terrain",
                "graphics",
                "clear-stencil",
                "spine",
                "occlusion-query",
                "geometry-renderer",
                "debug-renderer",
                "ssss-blur",
                "float-output-process"
            ], Jm = t1("dG", go("cc.EffectAsset")(((Gm = function(t1) {
                function i(i) {
                    var n;
                    return (n = t1.call(this, i) || this).techniques = Fm && Fm(), n.shaders = Um && Um(), n.combinations = xm && xm(), n.hideInEditor = jm && jm(), n;
                }
                h(i, t1), i.register = function(t1) {
                    i.Fh[t1.name] = t1, i.Uh = !1;
                }, i.remove = function(t1) {
                    if ("string" != typeof t1) i.Fh[t1.name] && i.Fh[t1.name] === t1 && delete i.Fh[t1.name];
                    else {
                        if (i.Fh[t1]) return void delete i.Fh[t1];
                        for(var n in i.Fh)if (i.Fh[n]._uuid === t1) return void delete i.Fh[n];
                    }
                }, i.get = function(t1) {
                    if (i.Fh[t1]) return i.Fh[t1];
                    for(var n in i.Fh)if (i.Fh[n]._uuid === t1) return i.Fh[n];
                    return Km.includes(t1) && nt(16101, t1), null;
                }, i.getAll = function() {
                    return i.Fh;
                }, i.isLayoutValid = function() {
                    return i.Uh;
                }, i.setLayoutValid = function() {
                    i.Uh = !0;
                };
                var n = i.prototype;
                return n.onLoaded = function() {
                    if (A.rendering && A.rendering.enableEffectImport) {
                        Mm(this);
                        var _$t = A.rendering.programLib;
                        _$t.addEffect(this), _$t.init(kw.gfxDevice);
                    } else Hm.register(this);
                    i.register(this), A.game.once(A.Game.EVENT_RENDERER_INITED, this.xh, this);
                }, n.xh = function() {
                    var _$t = this;
                    if (A.rendering && A.rendering.enableEffectImport) A.rendering.programLib.precompileEffect(kw.gfxDevice, this);
                    else for(var _$i = A.director.root, s = 0; s < this.shaders.length; s++)!function n() {
                        var n = _$t.shaders[s], _$r = _$t.combinations[s];
                        _$r && Rm(_$r).forEach(function(t1) {
                            return Hm.getGFXShader(kw.gfxDevice, n.name, t1, _$i.pipeline);
                        });
                    }();
                }, n.destroy = function() {
                    return i.remove(this), t1.prototype.destroy.call(this);
                }, n.initDefault = function(n) {
                    t1.prototype.initDefault.call(this, n);
                    var s = i.get("builtin-unlit");
                    this.name = "builtin-unlit", this.shaders = s.shaders, this.combinations = s.combinations, this.techniques = s.techniques;
                }, n.validate = function() {
                    return this.techniques.length > 0 && this.shaders.length > 0;
                }, i;
            }(sg)).Fh = {}, Gm.Uh = !0, Fm = ho(Gm.prototype, "techniques", [
                Ro
            ], function() {
                return [];
            }), Um = ho(Gm.prototype, "shaders", [
                Ro
            ], function() {
                return [];
            }), xm = ho(Gm.prototype, "combinations", [
                Ro
            ], function() {
                return [];
            }), jm = ho(Gm.prototype, "hideInEditor", [
                Ro,
                Co
            ], function() {
                return !1;
            }), Gm)) || Gm);
            A.EffectAsset = Jm;
            var Qm = t1("dF", go("cc.TextureCube")(((Ym = function(t1) {
                function i(i) {
                    var n;
                    return (n = t1.call(this, i) || this).isRGBE = zm && zm(), n._mipmapAtlas = $m && $m(), n._mipmapMode = Xm && Xm(), n._mipmaps = qm && qm(), n.Rh = [], n;
                }
                h(i, t1);
                var n = i.prototype;
                return n.Mh = function(t1) {
                    var _$i = this;
                    if (this.Rh = t1, this.kh(this.Rh.length), this.Rh.length > 0) {
                        var n = this.Rh[0].front;
                        this.reset({
                            width: n.width,
                            height: n.height,
                            format: n.format,
                            mipmapLevel: this.Rh.length,
                            baseLevel: this.wh,
                            maxLevel: this.gh
                        }), this.Rh.forEach(function(t1, n) {
                            Zm(t1, function(t1, s) {
                                _$i._h(t1, n, s);
                            });
                        });
                    } else this.reset({
                        width: 0,
                        height: 0,
                        mipmapLevel: this.Rh.length,
                        baseLevel: this.wh,
                        maxLevel: this.gh
                    });
                }, n.isUsingOfflineMipmaps = function() {
                    return 2 === this._mipmapMode;
                }, i.fromTexture2DArray = function(t1, n) {
                    for(var _$s = [], _$r = t1.length / 6, _$h = 0; _$h < _$r; _$h++){
                        var e = 6 * _$h;
                        _$s.push({
                            front: t1[e + 4].image,
                            back: t1[e + 5].image,
                            left: t1[e + 1].image,
                            right: t1[e + 0].image,
                            top: t1[e + 2].image,
                            bottom: t1[e + 3].image
                        });
                    }
                    return (n = n || new i).mipmaps = _$s, n;
                }, n.onLoaded = function() {
                    2 === this._mipmapMode ? this.mipmapAtlas = this._mipmapAtlas : this.mipmaps = this._mipmaps;
                }, n.reset = function(t1) {
                    this.Qn = t1.width, this.Zn = t1.height, this._setGFXFormat(t1.format);
                    var _$i = void 0 === t1.mipmapLevel ? 1 : t1.mipmapLevel;
                    this.kh(_$i);
                    var n = void 0 === t1.baseLevel ? 0 : t1.baseLevel, _$s = void 0 === t1.maxLevel ? 1e3 : t1.maxLevel;
                    this.Ah(n, _$s), this.Oh();
                }, n.updateMipmaps = function(t1, i) {
                    var n = this;
                    if (void 0 === t1 && (t1 = 0), void 0 === i && (i = void 0), !(t1 >= this.Rh.length)) for(var _$s = Math.min(void 0 === i ? this.Rh.length : i, this.Rh.length - t1), _$h = 0; _$h < _$s; ++_$h)!function r() {
                        var _$i = t1 + _$h;
                        Zm(n.Rh[_$i], function(t1, s) {
                            n._h(t1, _$i, s);
                        });
                    }();
                }, n.destroy = function() {
                    return this._mipmaps = [], this.Rh = [], this._mipmapAtlas = null, t1.prototype.destroy.call(this);
                }, n.releaseTexture = function() {
                    this.destroy();
                }, n._serialize = function() {
                    return null;
                }, n._deserialize = function(i, n) {
                    if (t1.prototype._deserialize.call(this, i.base, n), this.isRGBE = i.rgbe, this._mipmapMode = i.mipmapMode, 2 === this._mipmapMode) {
                        var _$r = i.mipmapAtlas, _$h = i.mipmapLayout;
                        this._mipmapAtlas = {
                            atlas: {},
                            layout: _$h
                        }, this._mipmapAtlas.atlas = {
                            front: new mg,
                            back: new mg,
                            left: new mg,
                            right: new mg,
                            top: new mg,
                            bottom: new mg
                        };
                        var e = ti(mg);
                        n.result.push(this._mipmapAtlas.atlas, "front", _$r.front, e), n.result.push(this._mipmapAtlas.atlas, "back", _$r.back, e), n.result.push(this._mipmapAtlas.atlas, "left", _$r.left, e), n.result.push(this._mipmapAtlas.atlas, "right", _$r.right, e), n.result.push(this._mipmapAtlas.atlas, "top", _$r.top, e), n.result.push(this._mipmapAtlas.atlas, "bottom", _$r.bottom, e);
                    } else {
                        this._mipmaps = Array(i.mipmaps.length);
                        for(var u = 0; u < i.mipmaps.length; ++u){
                            this._mipmaps[u] = {
                                front: new mg,
                                back: new mg,
                                left: new mg,
                                right: new mg,
                                top: new mg,
                                bottom: new mg
                            };
                            var o = i.mipmaps[u], f = ti(mg);
                            n.result.push(this._mipmaps[u], "front", o.front, f), n.result.push(this._mipmaps[u], "back", o.back, f), n.result.push(this._mipmaps[u], "left", o.left, f), n.result.push(this._mipmaps[u], "right", o.right, f), n.result.push(this._mipmaps[u], "top", o.top, f), n.result.push(this._mipmaps[u], "bottom", o.bottom, f);
                        }
                    }
                }, n.Th = function(t1) {
                    var _$i = new Yl(3);
                    return _$i.width = this.Qn, _$i.height = this.Zn, _$i.layerCount = 6, Object.assign(_$i, t1), _$i;
                }, n.Sh = function(t1) {
                    var _$i = new Kl;
                    return _$i.type = 3, _$i.baseLayer = 0, _$i.layerCount = 6, Object.assign(_$i, t1), _$i;
                }, n._uploadAtlas = function() {
                    var _$t = this, _$i = this._mipmapAtlas.layout, n = _$i[0];
                    this.reset({
                        width: n.width,
                        height: n.height,
                        format: this._mipmapAtlas.atlas.front.format,
                        mipmapLevel: _$i.length
                    }), Zm(this._mipmapAtlas.atlas, function(n, s) {
                        var _$r = new ay;
                        _$r.image = n, _$r.reset({
                            width: n.width,
                            height: n.height,
                            format: n.format
                        }), _$r.uploadData(n.data);
                        for(var _$h = 0; _$h < _$i.length; _$h++){
                            var e = _$i[_$h], o = new Uint8Array(_$r.getGFXTexture().size), f = new Fl;
                            f.texOffset.x = e.left, f.texOffset.y = e.top, f.texExtent.width = e.width, f.texExtent.height = e.height, _$t._getGFXDevice().copyTextureToBuffers(_$r.getGFXTexture(), [
                                o
                            ], [
                                f
                            ]);
                            var _$c = new mg({
                                _data: o,
                                _compressed: n.isCompressed,
                                width: e.width,
                                height: e.height,
                                format: n.format
                            });
                            _$t._h(_$c, e.level, s);
                        }
                    });
                }, n.initDefault = function(i) {
                    t1.prototype.initDefault.call(this, i);
                    var n = new mg;
                    n.initDefault(), this.mipmaps = [
                        {
                            front: n,
                            back: n,
                            top: n,
                            bottom: n,
                            left: n,
                            right: n
                        }
                    ];
                }, n.validate = function() {
                    if (2 === this._mipmapMode) {
                        if (null === this.mipmapAtlas || 0 === this.mipmapAtlas.layout.length) return !1;
                        var _$t = this.mipmapAtlas.atlas;
                        return !!(_$t.top && _$t.bottom && _$t.front && _$t.back && _$t.left && _$t.right);
                    }
                    return 0 !== this._mipmaps.length && !this._mipmaps.find(function(t1) {
                        return !(t1.top && t1.bottom && t1.front && t1.back && t1.left && t1.right);
                    });
                }, s(i, [
                    {
                        key: "mipmaps",
                        get: function get() {
                            return this._mipmaps;
                        },
                        set: function set(t1) {
                            this._mipmaps = t1;
                            var _$i = [];
                            if (1 === t1.length) {
                                var n = t1[0], _$s = n.front.gr(), _$r = n.back.gr(), _$h = n.left.gr(), e = n.right.gr(), u = n.top.gr(), o = n.bottom.gr();
                                if (_$s.length !== _$r.length || _$s.length !== _$h.length || _$s.length !== e.length || _$s.length !== u.length || _$s.length !== o.length) return rt(16347), void this.Mh([]);
                                for(var f = _$s.length, _$c = 0; _$c < f; ++_$c){
                                    var a = {
                                        front: _$s[_$c],
                                        back: _$r[_$c],
                                        left: _$h[_$c],
                                        right: e[_$c],
                                        top: u[_$c],
                                        bottom: o[_$c]
                                    };
                                    _$i.push(a);
                                }
                            } else t1.length > 1 && t1.forEach(function(t1) {
                                var n = {
                                    front: t1.front.wr(),
                                    back: t1.back.wr(),
                                    left: t1.left.wr(),
                                    right: t1.right.wr(),
                                    top: t1.top.wr(),
                                    bottom: t1.bottom.wr()
                                };
                                _$i.push(n);
                            });
                            this.Mh(_$i);
                        }
                    },
                    {
                        key: "mipmapAtlas",
                        get: function get() {
                            return this._mipmapAtlas;
                        },
                        set: function set(t1) {
                            var _$i = this;
                            if (this._mipmapAtlas = t1, this._mipmapAtlas) {
                                var n = this._mipmapAtlas.atlas.front;
                                if (n.data) {
                                    var _$s = this._mipmapAtlas.atlas, _$r = this._mipmapAtlas.layout, _$h = _$r[0], e = Object.assign(S.document.createElement("canvas"), {
                                        width: n.width,
                                        height: n.height
                                    }).getContext("2d");
                                    this.reset({
                                        width: _$h.width,
                                        height: _$h.height,
                                        format: n.format,
                                        mipmapLevel: _$r.length
                                    });
                                    for(var o = 0; o < _$r.length; o++)!function u() {
                                        var _$t = _$r[o];
                                        Zm(_$s, function(s, r) {
                                            e.clearRect(0, 0, n.width, n.height);
                                            var _$h = s.data;
                                            e.drawImage(_$h, 0, 0);
                                            var u = e.getImageData(_$t.left, _$t.top, _$t.width, _$t.height), o = new mg({
                                                _data: u.data,
                                                _compressed: s.isCompressed,
                                                width: u.width,
                                                height: u.height,
                                                format: s.format
                                            });
                                            _$i._h(o, _$t.level, r);
                                        });
                                    }();
                                }
                            } else this.reset({
                                width: 0,
                                height: 0,
                                mipmapLevel: 0
                            });
                        }
                    },
                    {
                        key: "image",
                        get: function get() {
                            return 0 === this._mipmaps.length ? null : this._mipmaps[0];
                        },
                        set: function set(t1) {
                            this.mipmaps = t1 ? [
                                t1
                            ] : [];
                        }
                    }
                ]), i;
            }(cy)).FaceIndex = {
                right: 0,
                left: 1,
                top: 2,
                bottom: 3,
                front: 4,
                back: 5
            }, zm = ho(Ym.prototype, "isRGBE", [
                Ro
            ], function() {
                return !1;
            }), $m = ho(Ym.prototype, "_mipmapAtlas", [
                Ro
            ], function() {
                return null;
            }), Xm = ho(Ym.prototype, "_mipmapMode", [
                Ro
            ], function() {
                return 0;
            }), qm = ho(Ym.prototype, "_mipmaps", [
                Ro
            ], function() {
                return [];
            }), Ym)) || Ym);
            function Zm(t1, i) {
                i(t1.front, 4), i(t1.back, 5), i(t1.left, 1), i(t1.right, 0), i(t1.top, 2), i(t1.bottom, 3);
            }
            A.TextureCube = Qm;
            var ib = function ib(t1) {
                var i = t1.uuids, n = t1.paths, s = t1.types, _$r = t1.deps, h = t1.paths = Object.create(null);
                if (!1 === t1.debug) {
                    for(var e = 0, u = i.length; e < u; e++)i[e] = Hw(i[e]);
                    for(var o in n){
                        var f = n[o], _$c = f[1];
                        f[1] = s[_$c];
                    }
                } else {
                    for(var a = Object.create(null), v = 0, l = i.length; v < l; v++){
                        var _$d = i[v];
                        i[v] = a[_$d] = Hw(_$d);
                    }
                    i = a;
                }
                for(var w in n){
                    var g = n[w];
                    h[i[w]] = g;
                }
                var p = t1.scenes;
                for(var _$y in p){
                    var _$_ = p[_$y];
                    p[_$y] = i[_$_];
                }
                var m = t1.packs;
                for(var b in m)for(var k = m[b], A = 0; A < k.length; ++A)k[A] = i[k[A]];
                var E = t1.versions;
                if (E) for(var T in E)for(var S = E[T], _$O = 0; _$O < S.length; _$O += 2){
                    var _$I = S[_$O];
                    S[_$O] = i[_$I] || _$I;
                }
                var _$R = t1.redirect;
                if (_$R) for(var _$M = 0; _$M < _$R.length; _$M += 2)_$R[_$M] = i[_$R[_$M]], _$R[_$M + 1] = _$r[_$R[_$M + 1]];
                if (t1.extensionMap) {
                    var _$C = function C(n) {
                        if (!Object.prototype.hasOwnProperty.call(t1.extensionMap, n)) return 1;
                        t1.extensionMap[n].forEach(function(s, r) {
                            t1.extensionMap[n][r] = i[s] || s;
                        });
                    };
                    for(var N in t1.extensionMap)_$C(N);
                }
            }, nb = function() {
                function t1() {
                    this.name = "", this.base = "", this.importBase = "", this.nativeBase = "", this.deps = null, this.assetInfos = new Sw, this.scenes = new Sw, this.paths = new Sw;
                }
                var i = t1.prototype;
                return i.init = function(t1) {
                    var i = this;
                    ib(t1), this.importBase = t1.importBase || "", this.nativeBase = t1.nativeBase || "", this.base = t1.base || "", this.name = t1.name || "", this.deps = t1.deps || [], this.jh(t1.uuids), this.Gh(t1.paths), this.Hh(t1.scenes), this.Vh(t1.packs, t1.extensionMap[".cconb"]), this.Wh(t1.versions), this.zh(t1.redirect);
                    var n = function n(n) {
                        if (!Object.prototype.hasOwnProperty.call(t1.extensionMap, n)) return 1;
                        t1.extensionMap[n].forEach(function(t1) {
                            var s = i.assetInfos.get(t1);
                            s && (s.extension = n);
                        });
                    };
                    for(var s in t1.extensionMap)n(s);
                }, i.getInfoWithPath = function(t1, i) {
                    if (!t1) return null;
                    t1 = $w(t1);
                    var n = this.paths.get(t1);
                    if (n) {
                        if (!i) return n[0];
                        for(var s = 0, _$r = n.length; s < _$r; s++){
                            var h = n[s];
                            if (jt(h.ctor, i)) return h;
                        }
                    }
                    return null;
                }, i.getDirWithPath = function(t1, i, n) {
                    "/" === (t1 = $w(t1))[t1.length - 1] && (t1 = t1.slice(0, -1));
                    var s = n || [];
                    return this.paths.forEach(function(n, r) {
                        var i1;
                        if (r.startsWith(t1) && (i1 = t1, !(r.length > i1.length) || 47 === r.charCodeAt(i1.length)) || !t1) for(var h = 0, e = n.length; h < e; h++){
                            var u = n[h];
                            i && !jt(u.ctor, i) || s.push(u);
                        }
                    }), s;
                }, i.getAssetInfo = function(t1) {
                    return this.assetInfos.get(t1) || null;
                }, i.getSceneInfo = function(t1) {
                    return t1.endsWith(".scene") || (t1 += ".scene"), "/" === t1[0] || t1.startsWith("db://") || (t1 = "/" + t1), this.scenes.find(function(i, n) {
                        return n.endsWith(t1);
                    });
                }, i.destroy = function() {
                    this.paths.destroy(), this.scenes.destroy(), this.assetInfos.destroy();
                }, i.jh = function(t1) {
                    if (t1) {
                        this.assetInfos.clear();
                        for(var i = 0, n = t1.length; i < n; i++){
                            var s = t1[i];
                            this.assetInfos.add(s, {
                                uuid: s
                            });
                        }
                    }
                }, i.Gh = function(t1) {
                    if (t1) {
                        var i = this.paths;
                        for(var n in i.clear(), t1){
                            var s = t1[n], _$r = s[0], h = s[1], e = 3 === s.length, u = this.assetInfos.get(n);
                            u.path = _$r, u.ctor = Jt(h), i.has(_$r) ? e ? i.get(_$r).push(u) : i.get(_$r).unshift(u) : i.add(_$r, [
                                u
                            ]);
                        }
                    }
                }, i.Hh = function(t1) {
                    if (t1) {
                        var i = this.scenes;
                        i.clear();
                        var n = this.assetInfos;
                        for(var s in t1){
                            var _$r = t1[s], h = n.get(_$r);
                            h.url = s, i.add(s, h);
                        }
                    }
                }, i.Vh = function(t1, i) {
                    if (t1) {
                        var n = this.assetInfos;
                        for(var s in t1){
                            var _$r = t1[s], h = {
                                uuid: s,
                                packedUuids: _$r,
                                ext: (null == _$r ? void 0 : _$r.length) > 0 && (null == i ? void 0 : i.includes(_$r[0])) ? ".bin" : ".json"
                            };
                            n.add(s, h);
                            for(var e = 0, u = _$r.length; e < u; e++){
                                var o = _$r[e], f = n.get(o), _$c = f.packs;
                                _$c ? 1 === u ? _$c.unshift(h) : _$c.push(h) : f.packs = [
                                    h
                                ];
                            }
                        }
                    }
                }, i.Wh = function(t1) {
                    if (t1) {
                        var i = this.assetInfos, n = t1.import;
                        if (n) for(var s = 0, _$r = n.length; s < _$r; s += 2){
                            var h = n[s];
                            i.get(h).ver = n[s + 1];
                        }
                        if (n = t1.native) for(var e = 0, u = n.length; e < u; e += 2){
                            var o = n[e];
                            i.get(o).nativeVer = n[e + 1];
                        }
                    }
                }, i.zh = function(t1) {
                    if (t1) for(var i = this.assetInfos, n = 0, s = t1.length; n < s; n += 2){
                        var _$r = t1[n];
                        i.get(_$r).redirect = t1[n + 1];
                    }
                }, t1;
            }();
            function sb(t1, i) {
                t1._uuid && i.push(t1._uuid);
            }
            function rb(t1, i) {
                for(var n = Object.getOwnPropertyNames(t1), s = 0; s < n.length; s++){
                    var _$r = n[s];
                    if ("node" !== _$r && "__eventTargets" !== _$r) {
                        var h = t1[_$r];
                        if ("object" == (void 0 === h ? "undefined" : _type_of(h)) && h) if (Array.isArray(h)) for(var e = 0; e < h.length; e++){
                            var u = h[e];
                            _instanceof(u, sg) && sb(u, i);
                        }
                        else if (h.constructor && h.constructor !== Object) _instanceof(h, sg) && sb(h, i);
                        else for(var o = Object.getOwnPropertyNames(h), f = 0; f < o.length; f++){
                            var _$c = h[o[f]];
                            _instanceof(_$c, sg) && sb(_$c, i);
                        }
                    }
                }
            }
            function hb(t1, i) {
                for(var n = 0; n < t1._components.length; n++)rb(t1._components[n], i);
                for(var s = 0; s < t1._children.length; s++)hb(t1._children[s], i);
            }
            function eb(t1, i, n, s) {
                n.push(t1._uuid);
                for(var _$r = ty.getDeps(t1._uuid), h = 0, e = _$r.length; h < e; h++){
                    var u = Iw.get(_$r[h]);
                    if (u) {
                        var o = u._uuid;
                        o in i ? i[o] += s : i[o] = u.refCount + s, n.includes(o) || eb(u, i, n, s);
                    }
                }
            }
            var ub = [];
            function ob(t1) {
                var i = Object.create(null);
                if (i[t1._uuid] = t1.refCount, eb(t1, i, ub, -1), ub.length = 0, 0 !== i[t1._uuid]) return i[t1._uuid];
                for(var n in i)0 !== i[n] && eb(Iw.get(n), i, ub, 1);
                return ub.length = 0, i[t1._uuid];
            }
            var cb = new (function() {
                function t1() {
                    this.$h = new Sw, this.Xh = new Sw, this.qh = !1, this.Yh = [];
                }
                var i = t1.prototype;
                return i.addIgnoredAsset = function(t1) {
                    this.Yh.push(t1._uuid);
                }, i.init = function() {
                    this.$h.clear(), this.Xh.clear();
                }, i._addPersistNodeRef = function(t1) {
                    var i = [];
                    hb(t1, i);
                    for(var n = 0, s = i.length; n < s; n++){
                        var _$r = Iw.get(i[n]);
                        _$r && _$r.addRef();
                    }
                    this.$h.add(t1.uuid, i);
                }, i._removePersistNodeRef = function(t1) {
                    if (this.$h.has(t1.uuid)) {
                        for(var i = this.$h.get(t1.uuid), n = 0, s = i.length; n < s; n++){
                            var _$r = Iw.get(i[n]);
                            _$r && _$r.decRef();
                        }
                        this.$h.remove(t1.uuid);
                    }
                }, i._autoRelease = function(t1, i, n) {
                    if (t1) {
                        for(var s = ty.getDeps(t1.uuid), _$r = 0, h = s.length; _$r < h; _$r++){
                            var e = Iw.get(s[_$r]);
                            e && e.decRef(t1.autoReleaseAssets);
                        }
                        var u = ty._depends.get(t1.uuid);
                        if (u && u.persistDeps) for(var o = u.persistDeps, f = 0, _$c = o.length; f < _$c; f++){
                            var a = Iw.get(o[f]);
                            a && a.decRef(t1.autoReleaseAssets);
                        }
                        t1.uuid !== i.uuid && ty.remove(t1.uuid);
                    }
                    var v = ty._depends.get(i.uuid);
                    for(var l in v && (v.persistDeps = []), n){
                        for(var w, g, p = n[l], _$y = this.$h.get(p.uuid), _$_ = d(_$y); !(g = _$_()).done;){
                            var m = g.value, b = Iw.get(m);
                            b && b.addRef();
                        }
                        v && (w = v.persistDeps).push.apply(w, _$y);
                    }
                }, i.tryRelease = function(t1, i) {
                    void 0 === i && (i = !1), _instanceof(t1, sg) && (i ? this.Kh(t1, i) : (this.Xh.add(t1._uuid, t1), this.qh || (this.qh = !0, Bi(this.Jh.bind(this)))));
                }, i.Jh = function() {
                    var _$t = this;
                    this.qh = !1, this.Xh.forEach(function(i) {
                        _$t.Kh(i);
                    }), this.Xh.clear();
                }, i.Kh = function(t1, i) {
                    void 0 === i && (i = !1);
                    var n = t1._uuid;
                    if (this.Xh.remove(n), qh(t1, !0) && -1 === this.Yh.indexOf(n) && !(!i && t1.refCount > 0 && ob(t1) > 0)) {
                        Iw.remove(n);
                        for(var s = ty.getDeps(n), _$r = 0, h = s.length; _$r < h; _$r++){
                            var e = Iw.get(s[_$r]);
                            e && (e.decRef(!1), this.Kh(e, !1));
                        }
                        t1.destroy(), ty.remove(n);
                    }
                }, t1;
            }());
            function ab(t1) {
                for(var i = 0, n = t1.input.length; i < n; i++){
                    var s = t1.input[i];
                    !s.isNative && _instanceof(s.content, sg) && s.content.decRef(!1), s.recycle();
                }
                t1.input = null;
            }
            function vb(t1, i) {
                return i ? /\?/.test(t1) ? t1 + "&_t=" + Date.now() : t1 + "?_t=" + Date.now() : t1;
            }
            function lb(t1, i, n, s, r) {
                void 0 === r && (r = 0), t1(r, function(h, e) {
                    r++, !h || r > i ? s && s(h, e) : setTimeout(function() {
                        lb(t1, i, n, s, r);
                    }, n);
                });
            }
            function db(t1, i, n, s, h) {
                try {
                    for(var e = ty.parse(t1, i), u = 0, o = e.deps.length; u < o; u++){
                        var f = e.deps[u];
                        f in n || (n[f] = !0, s.push({
                            uuid: f,
                            bundle: h && h.name
                        }));
                    }
                    e.nativeDep && (h && (e.nativeDep.bundle = h.name), s.push(r({}, e.nativeDep)));
                } catch (t1) {
                    z(t1.message, t1.stack);
                }
            }
            function wb(t1, i, n) {
                i && (n = void 0 !== n ? n : A.assetManager.cacheAsset, zw(i) || !n || i.isDefault || Iw.add(t1, i));
            }
            function gb(t1, i, n) {
                var s = !1, _$r = qp.get(i);
                if (_$r) {
                    for(var h = 0, e = _$r.length; h < e; h++){
                        var u = _$r[h], o = n[u.uuid + "@import"];
                        if (o) u.owner[u.prop] = o.addRef();
                        else {
                            if (rt(16350, u.uuid), A.assetManager.dispatchAssetMissing(i, u.owner, u.prop, u.uuid), u.type && u.type !== sg) {
                                var f = new u.type;
                                f.initDefault(u.uuid), u.owner[u.prop] = f;
                            }
                            s = !0;
                        }
                    }
                    qp.delete(i);
                }
                return Yp.has(i) && (n[t1 + "@native"] ? i._nativeAsset = n[t1 + "@native"] : (s = !0, rt(16351, t1)), Yp.delete(i)), s;
            }
            function pb(t1) {
                var i = t1.source;
                if (t1.options.__outputAsArray__ || 1 !== i.length) for(var n = t1.output = [], s = 0, _$r = i.length; s < _$r; s++)n.push(i[s].content);
                else t1.output = i[0].content;
            }
            function yb(t1, i, n) {
                var s = 0, _$r = [], h = t1.length;
                0 === h && n && n(_$r);
                for(var e = function e(t1) {
                    t1 && _$r.push(t1), ++s === h && n && n(_$r);
                }, u = 0; u < h; u++)i(t1[u], e);
            }
            function _b(t1, i, n) {
                var s = t1, _$r = i, h = n;
                if (void 0 === n) {
                    var e = "function" == typeof t1;
                    i ? (h = i, e || (_$r = null)) : void 0 === i && e && (h = t1, s = null, _$r = null), void 0 !== i && e && (_$r = t1, s = null);
                }
                return {
                    options: s || Object.create(null),
                    onProgress: _$r,
                    onComplete: h
                };
            }
            function mb(t1, i, n) {
                var s = t1, _$r = i, h = n;
                if (void 0 === n) {
                    var e = jt(t1, sg);
                    i ? (h = i, e && (_$r = null)) : void 0 !== i || e || (h = t1, _$r = null, s = null), void 0 === i || e || (_$r = t1, s = null);
                }
                return {
                    type: s,
                    onProgress: _$r || null,
                    onComplete: h
                };
            }
            function bb(t1, i, n, s) {
                if (void 0 === s && (s = {}), !n[i] || s[i]) return !1;
                s[i] = !0;
                var _$r = !1, h = ty.getDeps(i);
                if (h) for(var e = 0, u = h.length; e < u; e++){
                    var o = h[e];
                    if (o === t1 || bb(t1, o, n, s)) {
                        _$r = !0;
                        break;
                    }
                }
                return _$r;
            }
            function kb(t1) {
                return function(i, n) {
                    if (t1) {
                        var s = [];
                        Array.isArray(n) ? n.forEach(function(t1) {
                            return _instanceof(t1, sg) && s.push(t1.addRef());
                        }) : _instanceof(n, sg) && s.push(n.addRef()), Bi(function() {
                            s.forEach(function(t1) {
                                return t1.decRef(!1);
                            }), t1(i, n);
                        });
                    }
                };
            }
            var Ab = function() {
                function t1() {
                    this.Qh = new nb;
                }
                var i = t1.prototype;
                return i.getInfoWithPath = function(t1, i) {
                    return this.Qh.getInfoWithPath(t1, i);
                }, i.getDirWithPath = function(t1, i, n) {
                    return this.Qh.getDirWithPath(t1, i, n);
                }, i.getAssetInfo = function(t1) {
                    return this.Qh.getAssetInfo(t1);
                }, i.getSceneInfo = function(t1) {
                    return this.Qh.getSceneInfo(t1);
                }, i.init = function(t1) {
                    this.Qh.init(t1), Cw.add(t1.name, this);
                }, i.load = function(t1, i, n, s) {
                    var _$r = mb(i, n, s), h = _$r.type, e = _$r.onProgress, u = _$r.onComplete, o = {
                        __requestType__: "path",
                        type: h,
                        bundle: this.name,
                        __outputAsArray__: Array.isArray(t1)
                    };
                    A.assetManager.loadAny(t1, o, e, u);
                }, i.preload = function(t1, i, n, s) {
                    var _$r = mb(i, n, s), h = _$r.type, e = _$r.onProgress, u = _$r.onComplete;
                    A.assetManager.preloadAny(t1, {
                        __requestType__: "path",
                        type: h,
                        bundle: this.name
                    }, e, u);
                }, i.loadDir = function(t1, i, n, s) {
                    var _$r = mb(i, n, s), h = _$r.type, e = _$r.onProgress, u = _$r.onComplete;
                    A.assetManager.loadAny(t1, {
                        __requestType__: "dir",
                        type: h,
                        bundle: this.name,
                        __outputAsArray__: !0
                    }, e, u);
                }, i.preloadDir = function(t1, i, n, s) {
                    var _$r = mb(i, n, s), h = _$r.type, e = _$r.onProgress, u = _$r.onComplete;
                    A.assetManager.preloadAny(t1, {
                        __requestType__: "dir",
                        type: h,
                        bundle: this.name
                    }, e, u);
                }, i.loadScene = function(t1, i, n, s) {
                    var _$r = _b(i, n, s), h = _$r.options, e = _$r.onProgress, u = _$r.onComplete;
                    h.preset = h.preset || "scene", h.bundle = this.name, A.assetManager.loadAny({
                        scene: t1
                    }, h, e, function(t1, i) {
                        if (t1) z(t1.message, t1.stack);
                        else if (i.scene) {
                            var _$n = i.scene;
                            _$n.id = i._uuid, _$n.name = i.name;
                        } else t1 = Error("The asset " + i._uuid + " is not a scene");
                        u && u(t1, i);
                    });
                }, i.preloadScene = function(t1, i, n, s) {
                    var _$r = _b(i, n, s), h = _$r.options, e = _$r.onProgress, u = _$r.onComplete;
                    h.bundle = this.name, A.assetManager.preloadAny({
                        scene: t1
                    }, h, e, function(i) {
                        i && rt(1210, t1, i.message), u && u(i);
                    });
                }, i.get = function(t1, i) {
                    var n = this.getInfoWithPath(t1, i);
                    return n && Iw.get(n.uuid) || null;
                }, i.release = function(t1, i) {
                    var n = this.get(t1, i);
                    n && cb.tryRelease(n, !0);
                }, i.releaseUnusedAssets = function() {
                    var _$t = this;
                    Iw.forEach(function(i) {
                        var n = _$t.getAssetInfo(i._uuid);
                        n && !n.redirect && cb.tryRelease(i);
                    });
                }, i.releaseAll = function() {
                    var _$t = this;
                    Iw.forEach(function(i) {
                        var n = _$t.getAssetInfo(i._uuid);
                        n && !n.redirect && cb.tryRelease(i, !0);
                    });
                }, i._destroy = function() {
                    this.Qh.destroy();
                }, s(t1, [
                    {
                        key: "config",
                        get: function get() {
                            return this.Qh;
                        }
                    },
                    {
                        key: "name",
                        get: function get() {
                            return this.Qh.name;
                        }
                    },
                    {
                        key: "deps",
                        get: function get() {
                            return this.Qh.deps;
                        }
                    },
                    {
                        key: "base",
                        get: function get() {
                            return this.Qh.base;
                        }
                    }
                ]), t1;
            }(), Eb = t1("dO", new Ab);
            function Tb(t1, i, n) {
                var s = new S.Image;
                function r() {
                    s.removeEventListener("load", r), s.removeEventListener("error", h), n && n(null, s);
                }
                function h() {
                    s.removeEventListener("load", r), s.removeEventListener("error", h), n && n(Error(ot(4930, t1)));
                }
                return "file:" !== S.location.protocol && (s.crossOrigin = "anonymous"), s.addEventListener("load", r), s.addEventListener("error", h), s.src = t1, s;
            }
            function Sb(t1, i, n, s) {
                var _$r = new XMLHttpRequest, h = "download failed: " + t1 + ", status: ";
                if (_$r.open("GET", t1, !0), void 0 !== i.xhrResponseType && (_$r.responseType = i.xhrResponseType), void 0 !== i.xhrWithCredentials && (_$r.withCredentials = i.xhrWithCredentials), void 0 !== i.xhrMimeType && _$r.overrideMimeType && _$r.overrideMimeType(i.xhrMimeType), void 0 !== i.xhrTimeout && (_$r.timeout = i.xhrTimeout), i.xhrHeader) for(var e in i.xhrHeader)_$r.setRequestHeader(e, i.xhrHeader[e]);
                return _$r.onload = function() {
                    200 === _$r.status || 0 === _$r.status ? s && s(null, _$r.response) : s && s(Error("" + h + _$r.status + "(no response)"));
                }, n && (_$r.onprogress = function(t1) {
                    t1.lengthComputable && n(t1.loaded, t1.total);
                }), _$r.onerror = function() {
                    s && s(Error("" + h + _$r.status + "(error)"));
                }, _$r.ontimeout = function() {
                    s && s(Error("" + h + _$r.status + "(time out)"));
                }, _$r.onabort = function() {
                    s && s(Error("" + h + _$r.status + "(abort)"));
                }, _$r.send(null), _$r;
            }
            A.resources = Eb;
            var Ob = S.document, Ib = {};
            function Rb(t1, i, n) {
                if (Ib[t1]) return n && n(null), null;
                var s = Ob.createElement("script");
                function r() {
                    s.parentNode.removeChild(s), s.removeEventListener("load", r, !1), s.removeEventListener("error", h, !1), Ib[t1] = !0, n && n(null);
                }
                function h() {
                    s.parentNode.removeChild(s), s.removeEventListener("load", r, !1), s.removeEventListener("error", h, !1), n && n(Error(ot(4928, t1)));
                }
                return "file:" !== S.location.protocol && (s.crossOrigin = "anonymous"), s.async = i.scriptAsyncLoading || !1, s.src = t1, s.addEventListener("load", r, !1), s.addEventListener("error", h, !1), Ob.body.appendChild(s), s;
            }
            var Mb = /^(?:\w+:\/\/|\.+\/).+/, Cb = function Cb(t1, i, n) {
                (_e.hasFeature(_e.Feature.IMAGE_BITMAP) && A.assetManager.allowImageBitmap ? Nb : Tb)(t1, i, n);
            }, Nb = function Nb(t1, i, n) {
                i.xhrResponseType = "blob", Sb(t1, i, i.onFileProgress, n);
            }, Pb = function Pb(t1, i, n) {
                i.xhrResponseType = "json", Sb(t1, i, i.onFileProgress, n);
            }, Db = function Db(t1, i, n) {
                i.xhrResponseType = "arraybuffer", Sb(t1, i, i.onFileProgress, n);
            }, Lb = function Lb(t1, i, n) {
                var s = function s(t1, i) {
                    try {
                        i(null, np(new Uint8Array(t1)));
                    } catch (t1) {
                        i(t1);
                    }
                };
                zb._downloadArrayBuffer(t1.replace(".cconb", ".bin"), i, function(r, h) {
                    r ? zb._downloadArrayBuffer(t1, i, function(t1, i) {
                        t1 ? n(t1) : s(i, n);
                    }) : s(h, n);
                });
            }, Bb = function Bb(t1, i, n) {
                i.xhrResponseType = "text", Sb(t1, i, i.onFileProgress, n);
            }, Fb = function Fb(t1, i, n) {
                var s = Ja(t1), _$r = t1;
                Mb.test(_$r) || (_$r = -1 !== zb.remoteBundles.indexOf(s) ? zb.remoteServerAddress + "remote/" + s : "assets/" + s);
                var h = i.version || zb.bundleVers[s], e = 0, u = null, o = null;
                Pb(_$r + "/config." + (h ? h + "." : "") + "json", i, function(t1, i) {
                    o = t1 || o, (u = i) && (u.base = _$r + "/"), 2 == ++e && n(o, u);
                }), Rb(_$r + "/index." + (h ? h + "." : "") + "js", i, function(t1) {
                    o = t1 || o, 2 == ++e && n(o, u);
                });
            }, Ub = function() {
                var _$t = i.prototype;
                function i() {
                    this.maxConcurrency = 15, this.maxRequestsPerFrame = 15, this.maxRetryCount = 3, this.appendTimeStamp = !1, this.limited = !0, this.retryInterval = 2e3, this.bundleVers = {}, this.remoteBundles = [], this.downloadDomImage = Tb, this.downloadDomAudio = null, this.downloadFile = Sb, this.downloadScript = Rb, this._downloadArrayBuffer = Db, this._downloadJson = Pb, this.Zh = {
                        ".png": Cb,
                        ".jpg": Cb,
                        ".bmp": Cb,
                        ".jpeg": Cb,
                        ".gif": Cb,
                        ".ico": Cb,
                        ".tiff": Cb,
                        ".webp": Cb,
                        ".image": Cb,
                        ".pvr": Db,
                        ".pkm": Db,
                        ".astc": Db,
                        ".txt": Bb,
                        ".xml": Bb,
                        ".vsh": Bb,
                        ".fsh": Bb,
                        ".atlas": Bb,
                        ".tmx": Bb,
                        ".tsx": Bb,
                        ".json": Pb,
                        ".ExportJson": Pb,
                        ".plist": Bb,
                        ".cconb": Lb,
                        ".fnt": Bb,
                        ".binary": Db,
                        ".bin": Db,
                        ".dbbin": Db,
                        ".skel": Db,
                        ".js": Rb,
                        bundle: Fb,
                        default: Bb
                    }, this.te = new Sw, this.An = [], this.se = !1, this.re = 0, this.he = 0, this.ee = -1, this.ue = !1, this.fe = "", this.ce = 1 / 30;
                }
                return _$t.init = function(t1, i, n) {
                    void 0 === t1 && (t1 = ""), void 0 === i && (i = {}), void 0 === n && (n = []), this.te.clear(), this.An.length = 0, this.fe = t1, this.bundleVers = i, this.remoteBundles = n;
                }, _$t.register = function(t1, i) {
                    "object" == (void 0 === t1 ? "undefined" : _type_of(t1)) ? Ft(this.Zh, t1) : this.Zh[t1] = i;
                }, _$t.download = function(t1, i, n, s, r) {
                    var h = this, e = Rw.get(t1);
                    if (e) r(null, e);
                    else {
                        var u = this.te.get(t1);
                        if (u) {
                            u.push(r);
                            var o = this.An.find(function(i) {
                                return i.id === t1;
                            });
                            if (!o) return;
                            var f = s.priority || 0;
                            o.priority < f && (o.priority = f, this.se = !0);
                        } else {
                            var _$c = void 0 !== s.maxRetryCount ? s.maxRetryCount : this.maxRetryCount, a = void 0 !== s.maxConcurrency ? s.maxConcurrency : this.maxConcurrency, v = void 0 !== s.maxRequestsPerFrame ? s.maxRequestsPerFrame : this.maxRequestsPerFrame, l = this.Zh[n] || this.Zh.default;
                            lb(function(n, e) {
                                if (0 === n && h.te.add(t1, [
                                    r
                                ]), h.limited) {
                                    h.ae();
                                    var u = function u(t1, i) {
                                        h.re--, h.ve(a, v), e(t1, i);
                                    };
                                    h.re < a && h.he < v ? (l(vb(i, h.appendTimeStamp), s, u), h.re++, h.he++) : (h.An.push({
                                        id: t1,
                                        priority: s.priority || 0,
                                        url: i,
                                        options: s,
                                        done: u,
                                        handler: l
                                    }), h.se = !0, h.re < a && h.ve(a, v));
                                } else l(vb(i, h.appendTimeStamp), s, e);
                            }, _$c, this.retryInterval, function(i, n) {
                                i || Rw.add(t1, n);
                                for(var _$s = h.te.remove(t1), _$r = 0, e = _$s.length; _$r < e; _$r++)_$s[_$r](i, n);
                            });
                        }
                    }
                }, _$t.loadSubpackage = function(t1, i) {
                    A.assetManager.loadBundle(t1, null, i);
                }, _$t.ae = function() {
                    var _$t = performance.now(), _$i = A.game.deltaTime, n = _$i > this.ce ? this.ce : _$i;
                    _$t - this.ee > 1e3 * n && (this.he = 0, this.ee = _$t);
                }, _$t.le = function(t1, i) {
                    for(this.ue = !1, this.ae(); this.An.length > 0 && this.re < t1 && this.he < i;){
                        this.se && (this.An.sort(function(t1, i) {
                            return t1.priority - i.priority;
                        }), this.se = !1);
                        var n = this.An.pop();
                        if (!n) break;
                        this.re++, this.he++, n.handler(vb(n.url, this.appendTimeStamp), n.options, n.done);
                    }
                    this.ve(t1, i);
                }, _$t.ve = function(t1, i) {
                    !this.ue && this.An.length > 0 && (Bi(this.le.bind(this), t1, i), this.ue = !0);
                }, s(i, [
                    {
                        key: "remoteServerAddress",
                        get: function get() {
                            return this.fe;
                        }
                    },
                    {
                        key: "handlers",
                        get: function get() {
                            return this.Zh;
                        }
                    }
                ], [
                    {
                        key: "instance",
                        get: function get() {
                            return i.eh || (i.eh = new i), i.eh;
                        }
                    }
                ]), i;
            }();
            Ub.eh = void 0;
            var jb, Gb, Vb, Wb, zb = Ub.instance, $b = Ub.instance, Xb = t1("dC", go("cc.JsonAsset")((Gb = ho((jb = function(t1) {
                function i(i) {
                    var n;
                    return (n = t1.call(this, i) || this).json = Gb && Gb(), n;
                }
                return h(i, t1), i;
            }(sg)).prototype, "json", [
                Ro
            ], function() {
                return null;
            }), jb)) || jb);
            A.JsonAsset = Xb;
            var Yb, Kb = t1("dB", go("cc.TextAsset")((Wb = ho((Vb = function(t1) {
                function i(i) {
                    var n;
                    return (n = t1.call(this, i) || this).text = Wb && Wb(), n;
                }
                return h(i, t1), i.prototype.toString = function() {
                    return this.text;
                }, i;
            }(sg)).prototype, "text", [
                Ro
            ], function() {
                return "";
            }), Vb)) || Vb);
            A.TextAsset = Kb;
            var Jb = t1("dy", go("cc.BufferAsset")((y((Yb = function(t1) {
                function i(i) {
                    var n;
                    return (n = t1.call(this, i) || this).Rr = null, n;
                }
                h(i, t1);
                var n = i.prototype;
                return n.buffer = function() {
                    return this.Rr, this.Rr;
                }, n.validate = function() {
                    return !!this.Rr;
                }, s(i, [
                    {
                        key: "_nativeAsset",
                        get: function get() {
                            return this.Rr;
                        },
                        set: function set(t1) {
                            _instanceof(t1, ArrayBuffer) ? this.Rr = t1 : this.Rr = t1.buffer;
                        }
                    }
                ]), i;
            }(sg)).prototype, "_nativeAsset", [
                ff
            ], Object.getOwnPropertyDescriptor(Yb.prototype, "_nativeAsset"), Yb.prototype), Yb)) || Yb);
            function Qb(t1, i, n, s) {
                var _$r = null, h = null;
                try {
                    (_$r = new mg)._nativeUrl = t1, _$r._nativeAsset = i;
                } catch (t1) {
                    h = t1;
                }
                s(h, _$r);
            }
            function Zb(t1, i, n, s) {
                var _$r = new Xb;
                _$r.json = i, s(null, _$r);
            }
            function tk(t1, i, n, s) {
                var _$r = new Kb;
                _$r.text = i, s(null, _$r);
            }
            function ik(t1, i, n, s) {
                var _$r = new Jb;
                _$r._nativeUrl = t1, _$r._nativeAsset = i, s(null, _$r);
            }
            function nk(t1, i, n, s) {
                var _$r = new sg;
                _$r._nativeUrl = t1, _$r._nativeAsset = i, s(null, _$r);
            }
            function sk(t1, n, s, r) {
                var h = Cw.get(n.name);
                h || (h = "resources" === n.name ? Eb : new Ab, n.base = n.base || t1 + "/", h.init(n)), i.import("virtual:///prerequisite-imports/" + h.name).then(function() {
                    r(null, h);
                }).catch(r);
            }
            A.BufferAsset = Jb;
            var hk = new (function() {
                function t1() {
                    this.de = new Sw, this.we = {
                        ".png": Qb,
                        ".jpg": Qb,
                        ".bmp": Qb,
                        ".jpeg": Qb,
                        ".gif": Qb,
                        ".ico": Qb,
                        ".tiff": Qb,
                        ".webp": Qb,
                        ".image": Qb,
                        ".pvr": Qb,
                        ".pkm": Qb,
                        ".astc": Qb,
                        ".txt": tk,
                        ".xml": tk,
                        ".vsh": tk,
                        ".fsh": tk,
                        ".atlas": tk,
                        ".tmx": tk,
                        ".tsx": tk,
                        ".fnt": tk,
                        ".json": Zb,
                        ".ExportJson": Zb,
                        ".binary": ik,
                        ".bin": ik,
                        ".dbbin": ik,
                        ".skel": ik,
                        bundle: sk,
                        default: nk
                    };
                }
                var i = t1.prototype;
                return i.register = function(t1, i) {
                    "object" == (void 0 === t1 ? "undefined" : _type_of(t1)) ? Ft(this.we, t1) : this.we[t1] = i;
                }, i.create = function(t1, i, n, s, r) {
                    var h = this, e = this.we[n] || this.we.default, u = Iw.get(t1);
                    if (s.reloadAsset || !u) {
                        var o = this.de.get(t1);
                        o ? o.push(r) : (this.de.add(t1, [
                            r
                        ]), e(t1, i, s, function(i, n) {
                            !i && _instanceof(n, sg) && (n._uuid = t1, wb(t1, n, s.cacheAsset));
                            for(var _$r = h.de.remove(t1), e = 0, u = _$r.length; e < u; e++)_$r[e](i, n);
                        }));
                    } else r(null, u);
                }, t1;
            }());
            function uk(t1) {
                var i = new DataView(t1, 0, t1.byteLength);
                if ("BINP" !== String.fromCharCode.apply(String, new Uint8Array(t1.slice(0, 4)))) throw Error("Invalid bin package format");
                var n = i.getUint32(4, !0);
                if (2 !== n) return ok(t1, i, n);
                for(var s = i.getUint32(8, !0), _$r = [], h = 4 * (3 + 2 * s), e = 0; e < s; e++){
                    var u = i.getUint32(4 * (3 + 2 * e), !0) + h, o = i.getUint32(4 * (4 + 2 * e), !0);
                    _$r.push({
                        offset: u,
                        size: o
                    });
                }
                return _$r.map(function(i) {
                    return new Uint8Array(t1, i.offset, i.size);
                });
            }
            function ok(t1, i, n) {
                return ({
                    1: fk
                })[n](t1, i);
            }
            function fk(t1, i) {
                for(var n = i.getUint32(8, !0), s = [], _$r = 4 * (3 + n), h = 0; h < n; h++){
                    var e = i.getUint32(4 * (3 + h), !0);
                    s.push({
                        offset: _$r,
                        size: e
                    }), _$r += e;
                }
                return s.map(function(i) {
                    return new Uint8Array(t1, i.offset, i.size);
                });
            }
            var ak = new (function() {
                function t1() {
                    this.ge = new Sw, this.pe = {
                        ".json": this.unpackJson,
                        ".bin": this.unpackBin
                    };
                }
                var i = t1.prototype;
                return i.unpackJson = function(t1, i, n, s) {
                    var _$r = St(!0), h = null;
                    if (Array.isArray(i)) {
                        (i = zp(i)).length !== t1.length && rt(4915);
                        for(var e = 0; e < t1.length; e++)_$r[t1[e] + "@import"] = i[e];
                    } else {
                        var u = ti(ay), o = ti(mg);
                        if (i.type === u && i.data) {
                            var f = i.data;
                            f.length !== t1.length && rt(4915);
                            for(var _$c = 0; _$c < t1.length; _$c++)_$r[t1[_$c] + "@import"] = $p(u, {
                                base: f[_$c][0],
                                mipmaps: f[_$c][1]
                            });
                        } else {
                            if (i.type !== o || !i.data) return void s(h = Error("unmatched type pack!"), null);
                            var a = i.data;
                            a.length !== t1.length && rt(4915);
                            for(var v = 0; v < t1.length; v++)_$r[t1[v] + "@import"] = a[v];
                        }
                    }
                    s(h, _$r);
                }, i.unpackBin = function(t1, i, n, s) {
                    var _$r = St(!0), h = null;
                    try {
                        var e = uk(i);
                        t1.forEach(function(t1, i) {
                            return _$r[t1 + "@import"] = np(e[i]);
                        });
                    } catch (t1) {
                        h = t1;
                    }
                    s(h, _$r);
                }, i.init = function() {
                    this.ge.clear();
                }, i.register = function(t1, i) {
                    "object" == (void 0 === t1 ? "undefined" : _type_of(t1)) ? Ft(this.pe, t1) : this.pe[t1] = i;
                }, i.unpack = function(t1, i, n, s, r) {
                    i ? (0, this.pe[n])(t1, i, s, r) : r(Error("package data is wrong!"));
                }, i.load = function(t1, i, n) {
                    var s = this;
                    if (!t1.isNative && t1.info && t1.info.packs) if (Rw.has(t1.id)) n(null, Rw.get(t1.id));
                    else {
                        var _$r = t1.info.packs, h = _$r.find(function(t1) {
                            return s.ge.has(t1.uuid);
                        });
                        if (h) this.ge.get(h.uuid).push({
                            onComplete: n,
                            id: t1.id
                        });
                        else {
                            var e = _$r[0];
                            this.ge.add(e.uuid, [
                                {
                                    onComplete: n,
                                    id: t1.id
                                }
                            ]), t1.config;
                            var u = Xw(e.uuid, {
                                ext: e.ext,
                                bundle: t1.config.name
                            }), o = function o(i, n) {
                                Rw.remove(e.uuid), i && z(i.message, i.stack), s.unpack(e.packedUuids, n, e.ext, t1.options, function(t1, n) {
                                    if (!t1) for(var _$r in n)Rw.add(_$r, n[_$r]);
                                    for(var h = s.ge.remove(e.uuid), u = 0, o = h.length; u < o; u++){
                                        var f = h[u];
                                        if (i || t1) f.onComplete(i || t1);
                                        else {
                                            var _$c = n[f.id];
                                            _$c ? f.onComplete(null, _$c) : f.onComplete(Error("can not retrieve data from package"));
                                        }
                                    }
                                });
                            };
                            ".bin" === e.ext ? $b._downloadArrayBuffer(u, t1.options, o) : ".json" === e.ext ? $b.download(e.uuid, u, e.ext, t1.options, o) : rt(4916, e.ext);
                        }
                    }
                    else $b.download(t1.id, t1.url, t1.ext, t1.options, n);
                }, t1;
            }());
            function vk(t1, i) {
                var n = !1;
                t1.progress || (t1.progress = {
                    finish: 0,
                    total: t1.input.length,
                    canInvoke: !0
                }, n = !0);
                var s = t1.options, _$r = t1.progress, h = [], e = _$r.total, u = s.__exclude__ = s.__exclude__ || Object.create(null);
                t1.output = [], yb(t1.input, function(s, o) {
                    if (!s.isNative && Iw.has(s.uuid)) {
                        var f = Iw.get(s.uuid);
                        return s.content = f.addRef(), t1.output.push(s), _$r.canInvoke && t1.dispatch("progress", ++_$r.finish, _$r.total, s), void o();
                    }
                    ak.load(s, t1.options, function(f, c) {
                        f ? t1.isFinished || (!A.assetManager.force || n ? (z(f.message, f.stack), _$r.canInvoke = !1, i(f)) : (t1.output.push(s), _$r.canInvoke && t1.dispatch("progress", ++_$r.finish, _$r.total, s))) : t1.isFinished || (s.file = c, t1.output.push(s), s.isNative || (u[s.uuid] = !0, db(s.uuid, c, u, h, s.config), _$r.total = e + h.length), _$r.canInvoke && t1.dispatch("progress", ++_$r.finish, _$r.total, s)), o();
                    });
                }, function() {
                    if (t1.isFinished) return ab(t1), void t1.dispatch("error");
                    if (h.length > 0) {
                        var e = Fw.create({
                            input: h,
                            progress: _$r,
                            options: s,
                            onProgress: t1.onProgress,
                            onError: Fw.prototype.recycle,
                            onComplete: function onComplete(s) {
                                var _$r;
                                s || ((_$r = t1.output).push.apply(_$r, e.output), e.recycle()), n && lk(t1), i(s);
                            }
                        });
                        Pw.async(e);
                    } else n && lk(t1), i();
                });
            }
            function lk(t1) {
                for(var i = t1.output, n = 0, s = i.length; n < s; n++)i[n].content && i[n].content.decRef(!1);
            }
            var wk = new (function(t1) {
                function i() {
                    return t1.apply(this, arguments) || this;
                }
                h(i, t1);
                var n = i.prototype;
                return n.parse = function(t1) {
                    var _$i = this._parseXML(t1).documentElement;
                    if ("plist" !== _$i.tagName) return nt(5100), {};
                    for(var n = null, s = 0, _$r = _$i.childNodes.length; s < _$r && 1 !== (n = _$i.childNodes[s]).nodeType; s++);
                    return this.ye(n);
                }, n.ye = function(t1) {
                    var _$i = null, n = t1.tagName;
                    if ("dict" === n) _$i = this._e(t1);
                    else if ("array" === n) _$i = this.me(t1);
                    else if ("string" === n) if (1 === t1.childNodes.length) _$i = t1.firstChild.nodeValue;
                    else {
                        _$i = "";
                        for(var s = 0; s < t1.childNodes.length; s++)_$i += t1.childNodes[s].nodeValue;
                    }
                    else "false" === n ? _$i = !1 : "true" === n ? _$i = !0 : "real" === n ? _$i = parseFloat(t1.firstChild.nodeValue) : "integer" === n && (_$i = parseInt(t1.firstChild.nodeValue, 10));
                    return _$i;
                }, n.me = function(t1) {
                    for(var _$i = [], n = 0, s = t1.childNodes.length; n < s; n++){
                        var _$r = t1.childNodes[n];
                        1 === _$r.nodeType && _$i.push(this.ye(_$r));
                    }
                    return _$i;
                }, n._e = function(t1) {
                    for(var _$i = {}, n = "", s = 0, _$r = t1.childNodes.length; s < _$r; s++){
                        var _$h = t1.childNodes[s];
                        1 === _$h.nodeType && ("key" === _$h.tagName ? n = _$h.firstChild.nodeValue : _$i[n] = this.ye(_$h));
                    }
                    return _$i;
                }, i;
            }(function() {
                function t1() {
                    this.be = null, globalThis.DOMParser && (this.be = new DOMParser);
                }
                var i = t1.prototype;
                return i.parse = function(t1) {
                    return this._parseXML(t1);
                }, i._parseXML = function(t1) {
                    if (this.be) return this.be.parseFromString(t1, "text/xml");
                    throw Error("Dom parser is not supported in this platform!");
                }, t1;
            }())), gk = function() {
                function t1() {
                    this.ke = new Sw, this.Ae = {
                        ".png": this.Ee,
                        ".jpg": this.Ee,
                        ".bmp": this.Ee,
                        ".jpeg": this.Ee,
                        ".gif": this.Ee,
                        ".ico": this.Ee,
                        ".tiff": this.Ee,
                        ".webp": this.Ee,
                        ".image": this.Ee,
                        ".pvr": this.parsePVRTex,
                        ".pkm": this.parsePKMTex,
                        ".astc": this.parseASTCTex,
                        ".plist": this.parsePlist,
                        import: this.Te,
                        ".ccon": this.Te,
                        ".cconb": this.Te
                    };
                }
                var i = t1.prototype;
                return i.Ee = function(t1, i, n) {
                    _instanceof(t1, HTMLImageElement) ? n(null, t1) : createImageBitmap(t1, {
                        premultiplyAlpha: "none"
                    }).then(function(t1) {
                        n(null, t1);
                    }, function(t1) {
                        n(t1, null);
                    });
                }, i.parsePVRTex = function(t1, i, n) {
                    var _$s = null, _$r = null;
                    try {
                        _$r = mg.rr(t1, 0);
                    } catch (t1) {
                        W(_$s = t1);
                    }
                    n(_$s, _$r);
                }, i.parsePKMTex = function(t1, i, n) {
                    var _$s = null, _$r = null;
                    try {
                        _$r = mg.rr(t1, 1);
                    } catch (t1) {
                        W(_$s = t1);
                    }
                    n(_$s, _$r);
                }, i.parseASTCTex = function(t1, i, n) {
                    var _$s = null, _$r = null;
                    try {
                        _$r = mg.rr(t1, 2);
                    } catch (t1) {
                        W(_$s = t1);
                    }
                    n(_$s, _$r);
                }, i.parsePlist = function(t1, i, n) {
                    var _$s = null, _$r = wk.parse(t1);
                    _$r || (_$s = Error("parse failed")), n(_$s, _$r);
                }, i.Te = function(t1, i, n) {
                    if (t1) {
                        var _$s = null, _$r = null;
                        try {
                            _$s = Jp(t1, i);
                        } catch (t1) {
                            _$r = t1;
                        }
                        n(_$r, _$s);
                    } else n(Error(ot(3702, i.__uuid__)));
                }, i.Se = function() {
                    this.ke.clear();
                }, i.register = function(t1, i) {
                    "object" == (void 0 === t1 ? "undefined" : _type_of(t1)) ? Ft(this.Ae, t1) : this.Ae[t1] = i;
                }, i.parse = function(t1, i, n, s, r) {
                    var h = this, e = Mw.get(t1);
                    if (e) r(null, e);
                    else {
                        var u = this.ke.get(t1);
                        if (u) u.push(r);
                        else {
                            var o = this.Ae[n];
                            o ? (this.ke.add(t1, [
                                r
                            ]), o(i, s, function(i, n) {
                                i ? Rw.remove(t1) : zw(n) || Mw.add(t1, n);
                                for(var _$s = h.ke.remove(t1), _$r = 0, e = _$s.length; _$r < e; _$r++)_$s[_$r](i, n);
                            })) : r(null, i);
                        }
                    }
                }, s(t1, null, [
                    {
                        key: "instance",
                        get: function get() {
                            return this.eh || (this.eh = new t1), this.eh;
                        }
                    }
                ]), t1;
            }();
            gk.eh = void 0;
            var pk = gk.instance;
            function yk(t1, i) {
                var n = !1;
                t1.progress || (t1.progress = {
                    finish: 0,
                    total: t1.input.length,
                    canInvoke: !0
                }, n = !0);
                var s = t1.options, _$r = t1.progress;
                s.__exclude__ = s.__exclude__ || Object.create(null), t1.output = [], yb(t1.input, function(h, e) {
                    var u = Fw.create({
                        input: h,
                        onProgress: t1.onProgress,
                        options: s,
                        progress: _$r,
                        onComplete: function onComplete(s, o) {
                            s && !t1.isFinished && (!A.assetManager.force || n ? (z(s.message, s.stack), _$r.canInvoke = !1, i(s)) : _$r.canInvoke && t1.dispatch("progress", ++_$r.finish, _$r.total, h)), t1.output.push(o), u.recycle(), e(null);
                        }
                    });
                    _k.async(u);
                }, function() {
                    (s.__exclude__ = null, t1.isFinished) ? (ab(t1), t1.dispatch("error")) : (pb(t1), ab(t1), i());
                });
            }
            var _k = new Ow("loadOneAsset", [
                function(t1, i) {
                    var n = t1.output = t1.input, s = n.options, _$r = n.isNative, h = n.uuid, e = n.file, u = s.reloadAsset;
                    e || !u && !_$r && Iw.has(h) ? i() : ak.load(n, t1.options, function(t1, s) {
                        n.file = s, i(t1);
                    });
                },
                function(t1, i) {
                    var n = t1.output = t1.input, s = t1.progress, _$r = t1.options.__exclude__, h = n.id, e = n.file, u = n.options;
                    if (n.isNative) pk.parse(h, e, n.ext, u, function(r, e) {
                        r ? i(r) : (n.content = e, s.canInvoke && t1.dispatch("progress", ++s.finish, s.total, n), Rw.remove(h), Mw.remove(h), i());
                    });
                    else {
                        var o = n.uuid;
                        if (o in _$r) {
                            var f = _$r[o], _$c = f.finish, a = f.content, v = f.err, l = f.callbacks;
                            s.canInvoke && t1.dispatch("progress", ++s.finish, s.total, n), _$c || bb(o, o, _$r) ? (a && a.addRef(), n.content = a, i(v)) : l.push({
                                done: i,
                                item: n
                            });
                        } else !u.reloadAsset && Iw.has(o) ? (n.content = Iw.get(o).addRef(), s.canInvoke && t1.dispatch("progress", ++s.finish, s.total, n), i()) : (u.__uuid__ = o, pk.parse(h, e, "import", u, function(n, s) {
                            n ? i(n) : mk(t1, s, i);
                        }));
                    }
                }
            ]);
            function mk(t1, i, n) {
                var s = t1.input, _$r = t1.progress, e = s.uuid, u = s.id, o = s.options, f = s.config, _$c = o.cacheAsset, a = [];
                i.addRef && i.addRef(), db(e, i, Object.create(null), a, f), _$r.canInvoke && t1.dispatch("progress", ++_$r.finish, _$r.total += a.length, s);
                var v = t1.options.__exclude__[e] = {
                    content: i,
                    finish: !1,
                    callbacks: [
                        {
                            done: n,
                            item: s
                        }
                    ]
                }, l = Fw.create({
                    input: a,
                    options: t1.options,
                    onProgress: t1.onProgress,
                    onError: Fw.prototype.recycle,
                    progress: _$r,
                    onComplete: function onComplete(t1) {
                        if (i.decRef && i.decRef(!1), v.finish = !0, v.err = t1, !t1) {
                            for(var _$n, s = Array.isArray(l.output) ? l.output : [
                                l.output
                            ], _$r = Object.create(null), h = d(s); !(_$n = h()).done;){
                                var o = _$n.value;
                                o && (_$r[_instanceof(o, sg) ? o._uuid + "@import" : e + "@native"] = o);
                            }
                            gb(e, i, _$r);
                            try {
                                "function" != typeof i.onLoaded || Kp.has(i) || Yp.has(i) || (i.onLoaded(), Kp.add(i));
                            } catch (t1) {
                                rt(16352, e, t1.message, t1.stack);
                            }
                            Rw.remove(u), Mw.remove(u), wb(e, i, _$c), l.recycle();
                        }
                        for(var f = v.callbacks, a = 0, w = f.length; a < w; a++){
                            var g = f[a];
                            i.addRef && i.addRef(), g.item.content = i, g.done(t1);
                        }
                        f.length = 0;
                    }
                });
                Nw.async(l);
            }
            function bk(t1, i) {
                var n = t1.options, s = Object.create(null), _$r = Object.create(null);
                for(var h in n)switch(h){
                    case "path":
                    case "uuid":
                    case "dir":
                    case "scene":
                    case "url":
                        break;
                    case "__requestType__":
                    case "__isNative__":
                    case "ext":
                    case "type":
                    case "__nativeName__":
                    case "audioLoadMode":
                    case "bundle":
                        s[h] = n[h];
                        break;
                    case "__exclude__":
                    case "__outputAsArray__":
                        _$r[h] = n[h];
                        break;
                    default:
                        s[h] = n[h], _$r[h] = n[h];
                }
                t1.options = _$r;
                var e = Fw.create({
                    input: t1.input,
                    options: s
                }), u = null;
                try {
                    t1.output = t1.source = Dw.sync(e);
                } catch (t1) {
                    u = t1;
                    for(var o = 0, f = e.output.length; o < f; o++)e.output[o].recycle();
                }
                e.recycle(), i(u);
            }
            var kk = function() {
                function t1() {
                    this.uuid = "", this.overrideUuid = "", this.url = "", this.ext = ".json", this.content = null, this.file = null, this.info = null, this.config = null, this.isNative = !1, this.options = Object.create(null), this.Ar = "";
                }
                return t1.create = function() {
                    return 0 !== t1.tr.length ? t1.tr.pop() : new t1;
                }, t1.prototype.recycle = function() {
                    t1.tr.length !== t1.ir && (this.Ar = "", this.uuid = "", this.overrideUuid = "", this.url = "", this.ext = ".json", this.content = null, this.file = null, this.info = null, this.config = null, this.isNative = !1, this.options = Object.create(null), t1.tr.push(this));
                }, s(t1, [
                    {
                        key: "id",
                        get: function get() {
                            return this.Ar || (this.Ar = (this.overrideUuid || this.uuid) + "@" + (this.isNative ? "native" : "import")), this.Ar;
                        }
                    }
                ]), t1;
            }();
            kk.ir = 500, kk.tr = [];
            var Ak = [];
            function Ek(t1) {
                var i = t1.options, n = Array.isArray(t1.input) ? t1.input : [
                    t1.input
                ];
                t1.output = [];
                for(var _$r = 0; _$r < n.length; _$r++)!function s() {
                    var s = n[_$r], h = kk.create(), e = null, u = null;
                    if ("string" == typeof s && ((s = Object.create(null))[i.__requestType__ || "uuid"] = n[_$r]), "object" == (void 0 === s ? "undefined" : _type_of(s))) {
                        for(var f in Bt(s, i), s.preset && Bt(s, Bw[s.preset]), s)if (function o() {
                            var _$t;
                            switch(f){
                                case "uuid":
                                    var i, _$r = h.uuid = Hw(s.uuid);
                                    if (!s.bundle) {
                                        var o = Cw.find(function(t1) {
                                            return !!t1.getAssetInfo(_$r);
                                        });
                                        s.bundle = o && o.name;
                                    }
                                    if (Cw.has(s.bundle)) {
                                        if ((u = (e = Cw.get(s.bundle).config).getAssetInfo(_$r)) && u.redirect) {
                                            if (!Cw.has(u.redirect)) throw Error("Please load bundle " + u.redirect + " first");
                                            u = (e = Cw.get(u.redirect).config).getAssetInfo(_$r);
                                        }
                                        h.config = e, h.info = u;
                                    }
                                    h.ext = s.ext || (null == (i = u) ? void 0 : i.extension) || ".json";
                                    break;
                                case "__requestType__":
                                case "ext":
                                case "bundle":
                                case "preset":
                                case "type":
                                    break;
                                case "dir":
                                    if (Cw.has(s.bundle)) {
                                        Cw.get(s.bundle).config.getDirWithPath(s.dir, s.type, Ak);
                                        for(var _$c, a = d(Ak); !(_$c = a()).done;){
                                            var v = _$c.value;
                                            n.push({
                                                uuid: v.uuid,
                                                __isNative__: !1,
                                                ext: v.extension || ".json",
                                                bundle: s.bundle
                                            });
                                        }
                                        Ak.length = 0;
                                    }
                                    h.recycle(), h = null;
                                    break;
                                case "path":
                                    if (Cw.has(s.bundle)) {
                                        if ((u = (e = Cw.get(s.bundle).config).getInfoWithPath(s.path, s.type)) && u.redirect) {
                                            if (!Cw.has(u.redirect)) throw Error("you need to load bundle " + u.redirect + " first");
                                            u = (e = Cw.get(u.redirect).config).getAssetInfo(u.uuid);
                                        }
                                        if (!u) throw h.recycle(), Error("Bundle " + s.bundle + " doesn't contain " + s.path);
                                        h.config = e, h.uuid = u.uuid, h.info = u;
                                    }
                                    h.ext = s.ext || (null == (_$t = u) ? void 0 : _$t.extension) || ".json";
                                    break;
                                case "scene":
                                    if (!s.bundle) {
                                        var l = Cw.find(function(t1) {
                                            return !!t1.getSceneInfo(s.scene);
                                        });
                                        s.bundle = l && l.name;
                                    }
                                    if (Cw.has(s.bundle)) {
                                        if ((u = (e = Cw.get(s.bundle).config).getSceneInfo(s.scene)) && u.redirect) {
                                            if (!Cw.has(u.redirect)) throw Error("you need to load bundle " + u.redirect + " first");
                                            u = (e = Cw.get(u.redirect).config).getAssetInfo(u.uuid);
                                        }
                                        if (!u) throw h.recycle(), Error("Bundle " + e.name + " doesn't contain scene " + s.scene);
                                        h.config = e, h.uuid = u.uuid, h.info = u;
                                    }
                                    break;
                                case "__isNative__":
                                    h.isNative = s.__isNative__;
                                    break;
                                case "url":
                                    h.url = s.url, h.uuid = s.uuid || s.url, h.ext = s.ext || Ya(s.url), h.isNative = void 0 === s.__isNative__ || s.__isNative__;
                                    break;
                                default:
                                    h.options[f] = s[f];
                            }
                            if (!h) return 1;
                        }()) break;
                    }
                    if (h) {
                        if (t1.output.push(h), !h.uuid && !h.url) throw Error("Can not parse this input:" + JSON.stringify(s));
                    }
                }();
                return null;
            }
            function Tk(t1) {
                for(var i = t1.output = t1.input, s = 0; s < i.length; s++)!function n() {
                    var _$t = i[s];
                    if (Lw.has(_$t.uuid)) {
                        var n = Lw.get(_$t.uuid), _$r = Cw.find(function(t1) {
                            return !!t1.getAssetInfo(n);
                        });
                        if (_$r) {
                            _$t.overrideUuid = n;
                            var h, e = _$r.config, u = e.getAssetInfo(n);
                            if (u && u.redirect) {
                                if (!Cw.has(u.redirect)) throw Error("Please load bundle " + u.redirect + " first");
                                u = (e = Cw.get(u.redirect).config).getAssetInfo(n);
                            }
                            _$t.config = e, _$t.info = u, _$t.ext = _$t.isNative ? _$t.ext : (null == (h = u) ? void 0 : h.extension) || ".json";
                        } else nt(16201, n, _$t.uuid);
                    }
                }();
            }
            function Sk(t1) {
                for(var i = t1.output = t1.input, n = 0; n < i.length; n++){
                    var s = i[n];
                    if (!s.url) {
                        var _$r, h, e = s.config;
                        h = s.isNative ? e && e.nativeBase ? e.base + e.nativeBase : A.assetManager.generalNativeBase : e && e.importBase ? e.base + e.importBase : A.assetManager.generalImportBase;
                        var u = s.overrideUuid || s.uuid, o = "";
                        s.info && (o = s.isNative ? s.info.nativeVer ? "." + s.info.nativeVer : "" : s.info.ver ? "." + s.info.ver : ""), _$r = ".ttf" === s.ext ? h + "/" + u.slice(0, 2) + "/" + u + o + "/" + s.options.__nativeName__ : h + "/" + u.slice(0, 2) + "/" + u + o + s.ext, s.url = _$r;
                    }
                }
                return null;
            }
            var Ok = Ei.querySettings.bind(Ei), Ik = "assets", Rk = "asset-missing", Mk = t1("dN", function() {
                function t1() {
                    this.pipeline = Nw.append(bk).append(yk), this.fetchPipeline = Pw.append(bk).append(vk), this.transformPipeline = Dw.append(Ek).append(Tk).append(Sk), this.bundles = Cw, this.assets = Iw, this.assetsOverrideMap = Lw, this.generalImportBase = "", this.generalNativeBase = "", this.dependUtil = ty, this.force = !1, this.allowImageBitmap = !1, this.utils = tg, this.downloader = $b, this.parser = pk, this.packManager = ak, this.cacheAsset = !0, this.cacheManager = null, this.presets = Bw, this.factory = hk, this.preprocessPipe = bk, this.fetchPipe = vk, this.loadPipe = yk, this.references = null, this.Oe = cb, this.Ie = Rw, this.Re = Mw, this.Me = null, this.Ce = [], this.Ne = new se;
                }
                var i = t1.prototype;
                return i.getReleaseManager = function() {
                    return this.Oe;
                }, i.onAssetMissing = function(t1, i) {
                    this.Ne.on(Rk, t1, i);
                }, i.offAssetMissing = function(t1, i) {
                    this.Ne.off(Rk, t1, i);
                }, i.dispatchAssetMissing = function(t1, i, n, s) {
                    this.Ne.emit(Rk, t1, i, n, s);
                }, i.init = function(t1) {
                    void 0 === t1 && (t1 = {});
                    var i = t1.server || Ok(Ik, "server") || "", n = t1.bundleVers || Ok(Ik, "bundleVers") || {}, _$s = t1.remoteBundles || Ok(Ik, "remoteBundles") || [], _$r = t1.downloadMaxConcurrency || Ok(Ik, "downloadMaxConcurrency");
                    _$r && _$r > 0 && (this.downloader.maxConcurrency = _$r), this.Ie.clear(), this.Re.clear(), this.Oe.init(), this.assets.clear(), this.bundles.clear(), this.packManager.init(), this.downloader.init(i, n, _$s), this.parser.Se(), this.dependUtil.init();
                    var h = t1.importBase || Ok(Ik, "importBase") || "";
                    h && h.endsWith("/") && (h = h.substring(0, h.length - 1));
                    var e = t1.nativeBase || Ok(Ik, "nativeBase") || "";
                    e && e.endsWith("/") && (e = e.substring(0, e.length - 1)), this.generalImportBase = h, this.generalNativeBase = e, this.Ce = Ok(Ik, "projectBundles") || [];
                    var u = Ok(Ik, "assetsOverrides") || {};
                    for(var o in u)this.assetsOverrideMap.set(o, u[o]);
                }, i.getBundle = function(t1) {
                    return Cw.get(t1) || null;
                }, i.removeBundle = function(t1) {
                    t1._destroy(), Cw.remove(t1.name);
                }, i.loadAny = function(t1, i, n, s) {
                    var _$r = _b(i, n, s), h = _$r.options, e = _$r.onProgress, u = _$r.onComplete;
                    h.preset = h.preset || "default", t1 = Array.isArray(t1) ? t1.slice() : t1;
                    var o = Fw.create({
                        input: t1,
                        onProgress: e,
                        onComplete: kb(u),
                        options: h
                    });
                    Nw.async(o);
                }, i.preloadAny = function(t1, i, n, s) {
                    var _$r = _b(i, n, s), h = _$r.options, e = _$r.onProgress, u = _$r.onComplete;
                    h.preset = h.preset || "preload", t1 = Array.isArray(t1) ? t1.slice() : t1;
                    var o = Fw.create({
                        input: t1,
                        onProgress: e,
                        onComplete: kb(u),
                        options: h
                    });
                    Pw.async(o);
                }, i.loadRemote = function(t1, i, n) {
                    var _$s = _b(i, void 0, n), _$r = _$s.options, h = _$s.onComplete;
                    _$r.reloadAsset || !this.assets.has(t1) ? (_$r.__isNative__ = !0, _$r.preset = _$r.preset || "remote", this.loadAny({
                        url: t1
                    }, _$r, null, function(i, n) {
                        i ? (z(i.message, i.stack), h && h(i, n)) : hk.create(t1, n, _$r.ext || Ya(t1), _$r, function(t1, i) {
                            h && h(t1, i);
                        });
                    })) : kb(h)(null, this.assets.get(t1));
                }, i.loadBundle = function(t1, i, n) {
                    var _$s = _b(i, void 0, n), _$r = _$s.options, h = _$s.onComplete, e = Ja(t1);
                    this.bundles.has(e) ? kb(h)(null, this.getBundle(e)) : (_$r.preset = _$r.preset || "bundle", _$r.ext = "bundle", _$r.__isNative__ = !0, this.loadAny({
                        url: t1
                    }, _$r, null, function(i, n) {
                        i ? (z(i.message, i.stack), h && h(i, n)) : hk.create(t1, n, "bundle", _$r, function(t1, i) {
                            h && h(t1, i);
                        });
                    }));
                }, i.releaseAsset = function(t1) {
                    cb.tryRelease(t1, !0);
                }, i.releaseUnusedAssets = function() {
                    Iw.forEach(function(t1) {
                        cb.tryRelease(t1);
                    });
                }, i.releaseAll = function() {
                    Iw.forEach(function(t1) {
                        cb.tryRelease(t1, !0);
                    });
                }, i.loadWithJson = function() {
                    throw Error("Only valid in Editor");
                }, s(t1, [
                    {
                        key: "files",
                        get: function get() {
                            return this.Ie;
                        }
                    },
                    {
                        key: "main",
                        get: function get() {
                            return Cw.get("main") || null;
                        }
                    },
                    {
                        key: "resources",
                        get: function get() {
                            return Cw.get("resources") || null;
                        }
                    }
                ], [
                    {
                        key: "instance",
                        get: function get() {
                            return this.eh || (this.eh = new t1), this.eh;
                        }
                    }
                ]), t1;
            }());
            Mk.eh = void 0, Mk.Pipeline = Ow, Mk.Task = Fw, Mk.Cache = Sw, Mk.RequestItem = kk, Mk.Bundle = Ab, Mk.BuiltinBundleName = {
                INTERNAL: "internal",
                RESOURCES: "resources",
                MAIN: "main",
                START_SCENE: "start-scene"
            }, Mk.CacheManager = function() {
                this.cacheDir = void 0, this.cacheEnabled = void 0, this.autoClear = void 0, this.cacheInterval = void 0, this.deleteInterval = void 0, this.cachedFiles = void 0;
            }, Mk.Downloader = Ub, Mk.Parser = gk, Mk.DependUtil = Qp;
            var Ck = t1("dM", A.assetManager = Mk.instance);
            A.AssetManager = Mk;
            var Nk, Pk, Dk = t1("dP", function() {
                function t1() {
                    this._resources = {}, this._materialsToBeCompiled = [];
                }
                var i = t1.prototype;
                return i.init = function() {
                    for(var _$t = this._resources, i = new Uint8Array(16), n = new Uint8Array(16), s = new Uint8Array(16), _$r = new Uint8Array(16), h = new Uint8Array(16), e = 0, u = 0; u < 4; u++)i[e] = 0, i[e + 1] = 0, i[e + 2] = 0, i[e + 3] = 255, n[e] = 0, n[e + 1] = 0, n[e + 2] = 0, n[e + 3] = 0, s[e] = 119, s[e + 1] = 119, s[e + 2] = 119, s[e + 3] = 255, _$r[e] = 255, _$r[e + 1] = 255, _$r[e + 2] = 255, _$r[e + 3] = 255, h[e] = 127, h[e + 1] = 127, h[e + 2] = 255, h[e + 3] = 255, e += 4;
                    var o = new Uint8Array(1024);
                    e = 0;
                    for(var f = 0; f < 256; f++)o[e] = 221, o[e + 1] = 221, o[e + 2] = 221, o[e + 3] = 255, e += 4;
                    e = 0;
                    for(var _$c = 0; _$c < 8; _$c++){
                        for(var a = 0; a < 8; a++)o[e] = 85, o[e + 1] = 85, o[e + 2] = 85, o[e + 3] = 255, e += 4;
                        e += 32;
                    }
                    e += 32;
                    for(var v = 0; v < 8; v++){
                        for(var l = 0; l < 8; l++)o[e] = 85, o[e + 1] = 85, o[e + 2] = 85, o[e + 3] = 255, e += 4;
                        e += 32;
                    }
                    var _$d = {
                        width: 2,
                        height: 2,
                        _data: i,
                        _compressed: !1,
                        format: 35
                    }, g = {
                        width: 2,
                        height: 2,
                        _data: s,
                        _compressed: !1,
                        format: 35
                    }, p = {
                        width: 2,
                        height: 2,
                        _data: _$r,
                        _compressed: !1,
                        format: 35
                    }, _$_ = {
                        width: 16,
                        height: 16,
                        _data: o,
                        _compressed: !1,
                        format: 35
                    }, m = new mg(_$d), b = new ay;
                    b._uuid = "black-texture", b.image = m, _$t[b._uuid] = b;
                    var k = new mg({
                        width: 2,
                        height: 2,
                        _data: n,
                        _compressed: !1,
                        format: 35
                    }), E = new ay;
                    E._uuid = "empty-texture", E.image = k, _$t[E._uuid] = E;
                    var T = new Qm;
                    T._uuid = "black-cube-texture", T.setMipFilter(1), T.image = {
                        front: new mg(_$d),
                        back: new mg(_$d),
                        left: new mg(_$d),
                        right: new mg(_$d),
                        top: new mg(_$d),
                        bottom: new mg(_$d)
                    }, _$t[T._uuid] = T;
                    var S = new mg(g), _$O = new ay;
                    _$O._uuid = "grey-texture", _$O.image = S, _$t[_$O._uuid] = _$O;
                    var _$I = new Qm;
                    _$I._uuid = "grey-cube-texture", _$I.setMipFilter(1), _$I.image = {
                        front: new mg(g),
                        back: new mg(g),
                        left: new mg(g),
                        right: new mg(g),
                        top: new mg(g),
                        bottom: new mg(g)
                    }, _$t[_$I._uuid] = _$I;
                    var _$R = new mg(p), _$M = new ay;
                    _$M._uuid = "white-texture", _$M.image = _$R, _$t[_$M._uuid] = _$M;
                    var _$C = new Qm;
                    _$C._uuid = "white-cube-texture", _$C.setMipFilter(1), _$C.image = {
                        front: new mg(p),
                        back: new mg(p),
                        left: new mg(p),
                        right: new mg(p),
                        top: new mg(p),
                        bottom: new mg(p)
                    }, _$t[_$C._uuid] = _$C;
                    var N = new mg({
                        width: 2,
                        height: 2,
                        _data: h,
                        _compressed: !1,
                        format: 35
                    }), P = new ay;
                    P._uuid = "normal-texture", P.image = N, _$t[P._uuid] = P;
                    var D = new mg(_$_), L = new ay;
                    L._uuid = "default-texture", L.image = D, _$t[L._uuid] = L;
                    var B = new Qm;
                    if (B.setMipFilter(1), B._uuid = "default-cube-texture", B.image = {
                        front: new mg(_$_),
                        back: new mg(_$_),
                        left: new mg(_$_),
                        right: new mg(_$_),
                        top: new mg(_$_),
                        bottom: new mg(_$_)
                    }, _$t[B._uuid] = B, A.SpriteFrame) {
                        var F = new A.SpriteFrame, x = new ay;
                        x.image = m, F.texture = x, F._uuid = "default-spriteframe", _$t[F._uuid] = F;
                    }
                }, i.addAsset = function(t1, i) {
                    this._resources[t1] = i;
                }, i.get = function(t1) {
                    return this._resources[t1];
                }, i.loadBuiltinAssets = function() {
                    var _$t = this, i = Ei.querySettings("engine", "builtinAssets");
                    if (!i) return Promise.resolve();
                    var n = this._resources;
                    return new Promise(function(s, r) {
                        Ck.loadBundle("internal", function(h) {
                            h ? r(h) : Ck.loadAny(i, function(i, h) {
                                i ? r(i) : (h.forEach(function(i) {
                                    n[i.name] = i, cb.addIgnoredAsset(i), _instanceof(i, A.Material) && _$t._materialsToBeCompiled.push(i);
                                }), s());
                            });
                        });
                    });
                }, i.compileBuiltinMaterial = function() {
                    for(var _$t = 0; _$t < this._materialsToBeCompiled.length; ++_$t)for(var i = this._materialsToBeCompiled[_$t], n = 0; n < i.passes.length; ++n)i.passes[n].tryCompile();
                    this._materialsToBeCompiled.length = 0;
                }, t1;
            }()), Lk = t1("dQ", A.builtinResMgr = new Dk), Bk = t1("cV", (Nk = new Map, Pk = 0, function(t1) {
                return "number" == typeof t1 ? t1 : (Nk.has(t1) || (Nk.set(t1, 1 << Pk), Pk++), Nk.get(t1));
            }));
            function Fk(t1, i) {
                var n = t1.sortRender, s = i.sortRender;
                return n.hash - s.hash || n.shaderId - s.shaderId;
            }
            var Uk = t1("cQ", function() {
                function t1(t1) {
                    this.instances = [], this.hasPendingModels = !1, this.dynamicOffsets = [], this.sortRender = void 0, this.Pe = t1.device, this.pass = t1, this.De = tm(), this.sortRender = this.De.add();
                }
                var i = t1.prototype;
                return i.destroy = function() {
                    this.instances.forEach(function(t1) {
                        t1.vb.destroy(), t1.ia.destroy();
                    }), this.De.reset(), this.instances.length = 0;
                }, i.merge = function(t1, i, n) {
                    void 0 === n && (n = null);
                    var s = t1.instancedAttributeBlock, _$r = s.buffer.length;
                    if (_$r) {
                        var h = t1.inputAssembler, e = t1.descriptorSet, u = e.getTexture(11), o = e.getTexture(13), f = e.getTexture(14), _$c = t1.useReflectionProbeType, a = n;
                        a || (a = t1.shaders[i]);
                        var v = t1.descriptorSet, l = t1.passes[i].priority << 16 | t1.priority << 8 | i;
                        this.sortRender.hash = l, this.sortRender.shaderId = a.typedID, this.sortRender.passIdx = i;
                        for(var _$d = 0; _$d < this.instances.length; ++_$d){
                            var w, g, p = this.instances[_$d];
                            if (!((null == (w = p.ia.indexBuffer) ? void 0 : w.objectID) !== (null == (g = h.indexBuffer) ? void 0 : g.objectID) || p.count >= 1024) && p.lightingMap.objectID === u.objectID && p.useReflectionProbeType === _$c && p.reflectionProbeCubemap.objectID === o.objectID && p.reflectionProbePlanarMap.objectID === f.objectID && p.stride === _$r) {
                                if (p.count >= p.capacity) {
                                    p.capacity <<= 1;
                                    var _$y = p.stride * p.capacity, _$_ = p.data;
                                    p.data = new Uint8Array(_$y), p.data.set(_$_), p.vb.resize(_$y);
                                }
                                return p.shader = a, p.descriptorSet = v, p.data.set(s.buffer, p.stride * p.count++), void (this.hasPendingModels = !0);
                            }
                        }
                        for(var m = this.Pe.createBuffer(new Wl(10, 3, 32 * _$r, _$r)), b = new Uint8Array(32 * _$r), k = h.vertexBuffers.slice(), A = h.attributes.slice(), E = h.indexBuffer, T = 0; T < s.attributes.length; T++){
                            var S = s.attributes[T], _$O = new ud(S.name, S.format, S.isNormalized, k.length, !0);
                            A.push(_$O);
                        }
                        b.set(s.buffer), k.push(m);
                        var _$I = new fd(A, k, E), _$R = this.Pe.createInputAssembler(_$I);
                        this.instances.push({
                            count: 1,
                            capacity: 32,
                            vb: m,
                            data: b,
                            ia: _$R,
                            stride: _$r,
                            shader: a,
                            descriptorSet: v,
                            lightingMap: u,
                            reflectionProbeCubemap: o,
                            reflectionProbePlanarMap: f,
                            useReflectionProbeType: _$c,
                            reflectionProbeBlendCubemap: null
                        }), this.hasPendingModels = !0;
                    }
                }, i.uploadBuffers = function(t1) {
                    for(var i = 0; i < this.instances.length; ++i){
                        var n = this.instances[i];
                        n.count && (n.ia.instanceCount = n.count, t1.updateBuffer(n.vb, n.data));
                    }
                }, i.clear = function() {
                    this.instances.forEach(function(t1) {
                        t1.count = 0;
                    }), this.hasPendingModels = !1, this.De.reset();
                }, t1;
            }()), xk = new Wl(18, 1), jk = new zl(null), Gk = new kd(null), Hk = function() {
                function t1(t1) {
                    this._rootBuffer = null, this._buffers = [], this._descriptorSet = null, this._pipelineLayout = null, this._passIndex = 0, this._propertyIndex = 0, this._programName = "", this._dynamics = {}, this._propertyHandleMap = {}, this._rootBlock = null, this._blocksInt = [], this._blocks = [], this._shaderInfo = null, this._defines = {}, this._properties = {}, this._shader = null, this._bs = new fw, this._dss = new uw, this._rs = new ew, this._priority = 128, this._stage = 100, this._phase = Bk("default"), this._passID = 4294967295, this._subpassID = 4294967295, this._phaseID = 4294967295, this._primitive = 7, this._batchingScheme = 0, this._dynamicStates = 0, this._instancedBuffers = {}, this._hash = 0, this._rootBufferDirty = !1, this._root = t1, this._device = kw.gfxDevice;
                }
                t1.fillPipelineInfo = function(t1, i) {
                    void 0 !== i.priority && (t1._priority = i.priority), void 0 !== i.primitive && (t1._primitive = i.primitive), void 0 !== i.stage && (t1._stage = i.stage), void 0 !== i.dynamicStates && (t1._dynamicStates = i.dynamicStates), void 0 !== i.phase && (t1._phase = Bk(i.phase));
                    var n = t1._bs;
                    if (i.blendState) {
                        var _$s = i.blendState, _$r = _$s.targets;
                        _$r && _$r.forEach(function(t1, i) {
                            n.setTarget(i, t1);
                        }), void 0 !== _$s.isA2C && (n.isA2C = _$s.isA2C), void 0 !== _$s.isIndepend && (n.isIndepend = _$s.isIndepend), void 0 !== _$s.blendColor && (n.blendColor = _$s.blendColor);
                    }
                    t1._rs.assign(i.rasterizerState), t1._dss.assign(i.depthStencilState);
                }, t1.getPassHash = function(t1) {
                    var i = "";
                    if (A.rendering && A.rendering.enableEffectImport) {
                        var n = A.rendering.programLib.getKey(t1._phaseID, t1.program, t1.defines);
                        i = t1._phaseID.toString() + "," + n;
                    } else i = Hm.getKey(t1.program, t1.defines);
                    var _$s, _$r = i + "," + t1._primitive + "," + t1._dynamicStates;
                    return _$r += Vk(t1._bs), _$r += Wk(t1._dss), Iv(_$r += ",rs," + (_$s = t1._rs).cullMode + "," + _$s.depthBias + "," + _$s.isFrontFaceCCW, 666);
                };
                var i = t1.prototype;
                return i.initialize = function(t1) {
                    this._doInit(t1), this.resetUBOs(), this.resetTextures(), this.tryCompile();
                }, i.getHandle = function(t1, i, n) {
                    void 0 === i && (i = 0), void 0 === n && (n = 0);
                    var _$s = this._propertyHandleMap[t1];
                    return _$s ? (n ? _$s = fm(_$s, n) : i && (_$s = fm(_$s, hm(_$s) - i)), _$s + i) : 0;
                }, i.getBinding = function(t1) {
                    var i = this.getHandle(t1);
                    return i ? em(i) : -1;
                }, i.setUniform = function(t1, i) {
                    var n = em(t1), _$s = hm(t1), _$r = om(t1), h = this.Le(_$s, n);
                    am[_$s](h, i, _$r), this._rootBufferDirty = !0;
                }, i.getUniform = function(t1, i) {
                    var n = em(t1), _$s = hm(t1), _$r = om(t1), h = this.Le(_$s, n);
                    return cm[_$s](h, i, _$r);
                }, i.setUniformArray = function(t1, i) {
                    for(var n = em(t1), _$s = hm(t1), _$r = zd(_$s) >> 2, h = this.Le(_$s, n), e = om(t1), u = 0; u < i.length; u++, e += _$r)null !== i[u] && am[_$s](h, i[u], e);
                    this._rootBufferDirty = !0;
                }, i.bindTexture = function(t1, i, n) {
                    this._descriptorSet.bindTexture(t1, i, n || 0);
                }, i.bindSampler = function(t1, i, n) {
                    this._descriptorSet.bindSampler(t1, i, n || 0);
                }, i.setDynamicState = function(t1, i) {
                    var n = this._dynamics[t1];
                    n && n.value === i || (n.value = i, n.dirty = !0);
                }, i.overridePipelineStates = function() {
                    nt(12102);
                }, i.update = function() {
                    this._descriptorSet ? (this._rootBuffer && this._rootBufferDirty && (this._rootBuffer.update(this._rootBlock), this._rootBufferDirty = !1), this._descriptorSet.update()) : rt(12006);
                }, i.getInstancedBuffer = function(t1) {
                    return void 0 === t1 && (t1 = 0), this._instancedBuffers[t1] || (this._instancedBuffers[t1] = new Uk(this));
                }, i.destroy = function() {
                    for(var _$t = 0; _$t < this._shaderInfo.blocks.length; _$t++){
                        var i = this._shaderInfo.blocks[_$t];
                        this._buffers[i.binding].destroy();
                    }
                    for(var n in this._buffers = [], this._rootBuffer && (this._rootBuffer.destroy(), this._rootBuffer = null), this._instancedBuffers)this._instancedBuffers[n].destroy();
                    this._descriptorSet.destroy(), this._rs.destroy(), this._dss.destroy(), this._bs.destroy();
                }, i.resetUniform = function(t1) {
                    var i = this.getHandle(t1);
                    if (i) {
                        for(var n = hm(i), _$s = em(i), _$r = om(i), h = um(i), e = this.Le(n, _$s), u = this._properties[t1], o = u && u.value || dm(n), f = (zd(n) >> 2) * h, _$c = 0; _$c + o.length <= f; _$c += o.length)e.set(o, _$r + _$c);
                        this._rootBufferDirty = !0;
                    }
                }, i.resetTexture = function(t1, i) {
                    var n = this.getHandle(t1);
                    if (n) {
                        var _$s, _$r = hm(n), h = em(n), e = this._properties[t1], u = e && e.value, o = (_$s = "string" == typeof u ? Lk.get("" + u + wm(_$r)) : u || Lk.get(dm(_$r))) && _$s.getGFXTexture(), f = e && void 0 !== e.samplerHash ? dw.unpackFromHash(e.samplerHash) : _$s && _$s.getSamplerInfo(), _$c = this._device.getSampler(f);
                        this._descriptorSet.bindSampler(h, _$c, i || 0), this._descriptorSet.bindTexture(h, o, i || 0);
                    }
                }, i.resetUBOs = function() {
                    for(var _$t = 0; _$t < this._shaderInfo.blocks.length; _$t++)for(var i = this._shaderInfo.blocks[_$t], n = 0, _$s = 0; _$s < i.members.length; _$s++){
                        for(var _$r = i.members[_$s], h = this.Le(_$r.type, i.binding), e = this._properties[_$r.name], u = e && e.value || dm(_$r.type), o = (zd(_$r.type) >> 2) * _$r.count, f = 0; f + u.length <= o; f += u.length)h.set(u, n + f);
                        n += o;
                    }
                    this._rootBufferDirty = !0;
                }, i.resetTextures = function() {
                    var _$t = this;
                    if (A.rendering) this._shaderInfo.descriptors[1].samplerTextures.forEach(function(i) {
                        for(var n = 0; n < i.count; ++n)_$t.resetTexture(i.name, n);
                    });
                    else for(var i = 0; i < this._shaderInfo.samplerTextures.length; i++)for(var n = this._shaderInfo.samplerTextures[i], _$s = 0; _$s < n.count; _$s++)this.resetTexture(n.name, _$s);
                }, i.tryCompile = function() {
                    var i = this._root.pipeline;
                    if (!i) return !1;
                    if (this._syncBatchingScheme(), A.rendering && A.rendering.enableEffectImport) {
                        var n = A.rendering.programLib, _$s = n.getProgramVariant(this._device, this._phaseID, this._programName, this._defines);
                        if (!_$s) return nt(12103, this._programName), !1;
                        this._shader = _$s.shader, this._pipelineLayout = n.getPipelineLayout(this.device, this._phaseID, this._programName);
                    } else {
                        var _$r = Hm.getGFXShader(this._device, this._programName, this._defines, i);
                        if (!_$r) return nt(12104, this._programName), !1;
                        this._shader = _$r, this._pipelineLayout = Hm.getTemplateInfo(this._programName).pipelineLayout;
                    }
                    return this._hash = t1.getPassHash(this), !0;
                }, i.getShaderVariant = function(t1) {
                    if (void 0 === t1 && (t1 = null), !this._shader && !this.tryCompile()) return nt(12105), null;
                    if (!t1) return this._shader;
                    for(var i = this._root.pipeline, n = 0; n < t1.length; n++){
                        var _$s = t1[n];
                        this._defines[_$s.name] = _$s.value;
                    }
                    this._isBlend && (this._defines.CC_IS_TRANSPARENCY_PASS = 1);
                    var _$r = null;
                    if (A.rendering && A.rendering.enableEffectImport) {
                        var h = A.rendering.programLib.getProgramVariant(this._device, this._phaseID, this._programName, this._defines);
                        h && (_$r = h.shader);
                    } else _$r = Hm.getGFXShader(this._device, this._programName, this._defines, i);
                    for(var e = 0; e < t1.length; e++){
                        var u = t1[e];
                        delete this._defines[u.name];
                    }
                    return _$r;
                }, i.beginChangeStatesSilently = function() {}, i.endChangeStatesSilently = function() {}, i._doInit = function(i, n) {
                    void 0 === n && (n = !1), this._priority = 128, this._stage = 100;
                    var h = null == (_$s = A.rendering) ? void 0 : _$s.enableEffectImport;
                    if (h) {
                        var e = A.rendering;
                        if ("number" == typeof i.phase ? (this._passID = i._passID, this._subpassID = i._subpassID, this._phaseID = i._phaseID) : (this._passID = e.getPassID(i.pass), this._passID !== e.INVALID_ID && (i.subpass ? (this._subpassID = e.getSubpassID(this._passID, i.subpass), this._phaseID = e.getPhaseID(this._subpassID, i.phase)) : this._phaseID = e.getPhaseID(this._passID, i.phase))), this._passID === e.INVALID_ID) return void rt(12107, i.program);
                        if (this._phaseID === e.INVALID_ID) return void rt(12108, i.program);
                    } else "number" == typeof i.phase ? this._passID = i._passID : i.pass && "default" !== i.pass && (et(4294967295 === this._passID, 12110), this._passID = 0);
                    this._phase = Bk("default"), this._primitive = 7, this._passIndex = i.passIndex, this._propertyIndex = void 0 !== i.propertyIndex ? i.propertyIndex : i.passIndex, this._programName = i.program, this._defines = n ? r({}, i.defines) : i.defines, this._shaderInfo = h ? A.rendering.programLib.getProgramInfo(this._phaseID, this._programName) : Hm.getTemplate(i.program), this._properties = i.properties || this._properties;
                    var u = this._device;
                    t1.fillPipelineInfo(this, i), i.stateOverrides && t1.fillPipelineInfo(this, i.stateOverrides), Gk.layout = h ? A.rendering.programLib.getMaterialDescriptorSetLayout(this._device, this._phaseID, i.program) : Hm.getDescriptorSetLayout(this._device, i.program), this._descriptorSet = this._device.createDescriptorSet(Gk);
                    var _$s, o, f, _$c = this._shaderInfo.blocks;
                    if (h) {
                        var a = A.rendering.programLib;
                        o = a.getBlockSizes(this._phaseID, this._programName), f = a.getHandleMap(this._phaseID, this._programName);
                    } else {
                        var v = Hm.getTemplateInfo(i.program);
                        o = v.blockSizes, f = v.handleMap;
                    }
                    if (h) {
                        var l = A.rendering.programLib.getShaderInfo(this._phaseID, this.program);
                        this.Be(u, l.blocks, o);
                    } else this.Fe(u, _$c, o);
                    var _$d = this._propertyHandleMap = f, w = {};
                    for(var g in this._properties){
                        var p = this._properties[g];
                        p.handleInfo && (w[g] = this.getHandle.apply(this, p.handleInfo));
                    }
                    Object.assign(_$d, w);
                }, i.Fe = function(t1, i, n) {
                    for(var _$s = t1.capabilities.uboOffsetAlignment, _$r = [], h = 0, e = 0, u = 0; u < i.length; u++){
                        var o = n[u];
                        _$r.push(e), e += Math.ceil(o / _$s) * _$s, h = o;
                    }
                    var f = _$r[_$r.length - 1] + 16 * Math.ceil(h / 16);
                    f && (xk.size = 16 * Math.ceil(f / 16), this._rootBuffer = t1.createBuffer(xk), this._rootBlock = new ArrayBuffer(f));
                    for(var _$c = 0, a = 0; _$c < i.length; _$c++){
                        var v = i[_$c].binding, l = n[_$c];
                        jk.buffer = this._rootBuffer, jk.offset = _$r[a++], jk.range = 16 * Math.ceil(l / 16);
                        var _$d = this._buffers[v] = t1.createBuffer(jk);
                        this._blocks[v] = new Float32Array(this._rootBlock, jk.offset, l / 4), this._blocksInt[v] = new Int32Array(this._blocks[v].buffer, this._blocks[v].byteOffset, this._blocks[v].length), this._descriptorSet.bindBuffer(v, _$d);
                    }
                }, i.Be = function(t1, i, n) {
                    for(var _$s = t1.capabilities.uboOffsetAlignment, _$r = [], h = 0, e = 0, u = 0; u < i.length; u++)if (1 === i[u].set) {
                        var o = n[u];
                        _$r.push(e), e += Math.ceil(o / _$s) * _$s, h = o;
                    }
                    if (0 !== h) {
                        var f = _$r[_$r.length - 1] + h;
                        f && (xk.size = 16 * Math.ceil(f / 16), this._rootBuffer = t1.createBuffer(xk), this._rootBlock = new ArrayBuffer(f));
                    }
                    for(var _$c = 0, a = 0; _$c < i.length; _$c++)if (1 === i[_$c].set) {
                        var v = i[_$c].binding, l = n[_$c];
                        jk.buffer = this._rootBuffer, jk.offset = _$r[a++], jk.range = 16 * Math.ceil(l / 16);
                        var _$d = this._buffers[v] = t1.createBuffer(jk);
                        this._blocks[v] = new Float32Array(this._rootBlock, jk.offset, l / 4), this._blocksInt[v] = new Int32Array(this._blocks[v].buffer, this._blocks[v].byteOffset, this._blocks[v].length), this._descriptorSet.bindBuffer(v, _$d);
                    }
                }, i._syncBatchingScheme = function() {
                    this._defines.USE_INSTANCING ? this._device.hasFeature(1) ? this._batchingScheme = 1 : (this._defines.USE_INSTANCING = !1, this._batchingScheme = 0) : this._batchingScheme = 0;
                }, i.Le = function(t1, i) {
                    return t1 < 13 ? this._blocksInt[i] : this._blocks[i];
                }, i.Ue = function(t1, i, n) {
                    this._priority = t1.priority, this._stage = t1.stage, this._phase = t1.phase, this._phaseID = t1._phaseID, this._passID = t1._passID, this._batchingScheme = t1.batchingScheme, this._primitive = t1.primitive, this._dynamicStates = t1.dynamicStates, this._bs = t1.blendState, this._dss = i, this._descriptorSet = t1.descriptorSet, this._rs = t1.rasterizerState, this._passIndex = t1.passIndex, this._propertyIndex = t1.propertyIndex, this._programName = t1.program, this._defines = t1.defines, this._shaderInfo = t1._shaderInfo, this._properties = t1._properties, this._blocks = t1._blocks, this._blocksInt = t1._blocksInt, this._dynamics = t1._dynamics, this._shader = t1._shader, A.rendering && A.rendering.enableEffectImport ? this._pipelineLayout = A.rendering.programLib.getPipelineLayout(this.device, this._phaseID, this._programName) : this._pipelineLayout = Hm.getTemplateInfo(this._programName).pipelineLayout, this._hash = t1._hash ^ n;
                }, i.xe = function() {
                    this._hash = t1.getPassHash(this);
                }, i.je = function(t1) {
                    this._rootBufferDirty = t1;
                }, i.Ge = function(t1) {
                    this._priority = t1;
                }, s(t1, [
                    {
                        key: "_isBlend",
                        get: function get() {
                            return this.blendState.targets.some(function(t1) {
                                return t1.blend;
                            });
                        }
                    },
                    {
                        key: "root",
                        get: function get() {
                            return this._root;
                        }
                    },
                    {
                        key: "device",
                        get: function get() {
                            return this._device;
                        }
                    },
                    {
                        key: "shaderInfo",
                        get: function get() {
                            return this._shaderInfo;
                        }
                    },
                    {
                        key: "localSetLayout",
                        get: function get() {
                            return A.rendering && A.rendering.enableEffectImport ? A.rendering.programLib.getLocalDescriptorSetLayout(this._device, this._phaseID, this._programName) : Hm.getDescriptorSetLayout(this._device, this._programName, !0);
                        }
                    },
                    {
                        key: "program",
                        get: function get() {
                            return this._programName;
                        }
                    },
                    {
                        key: "properties",
                        get: function get() {
                            return this._properties;
                        }
                    },
                    {
                        key: "defines",
                        get: function get() {
                            return this._defines;
                        }
                    },
                    {
                        key: "passIndex",
                        get: function get() {
                            return this._passIndex;
                        }
                    },
                    {
                        key: "propertyIndex",
                        get: function get() {
                            return this._propertyIndex;
                        }
                    },
                    {
                        key: "dynamics",
                        get: function get() {
                            return this._dynamics;
                        }
                    },
                    {
                        key: "blocks",
                        get: function get() {
                            return this._blocks;
                        }
                    },
                    {
                        key: "blocksInt",
                        get: function get() {
                            return this._blocksInt;
                        }
                    },
                    {
                        key: "rootBufferDirty",
                        get: function get() {
                            return this._rootBufferDirty;
                        }
                    },
                    {
                        key: "priority",
                        get: function get() {
                            return this._priority;
                        }
                    },
                    {
                        key: "primitive",
                        get: function get() {
                            return this._primitive;
                        }
                    },
                    {
                        key: "stage",
                        get: function get() {
                            return this._stage;
                        }
                    },
                    {
                        key: "phase",
                        get: function get() {
                            return this._phase;
                        }
                    },
                    {
                        key: "passID",
                        get: function get() {
                            return this._passID;
                        }
                    },
                    {
                        key: "phaseID",
                        get: function get() {
                            return this._phaseID;
                        }
                    },
                    {
                        key: "rasterizerState",
                        get: function get() {
                            return this._rs;
                        }
                    },
                    {
                        key: "depthStencilState",
                        get: function get() {
                            return this._dss;
                        }
                    },
                    {
                        key: "blendState",
                        get: function get() {
                            return this._bs;
                        }
                    },
                    {
                        key: "dynamicStates",
                        get: function get() {
                            return this._dynamicStates;
                        }
                    },
                    {
                        key: "batchingScheme",
                        get: function get() {
                            return this._batchingScheme;
                        }
                    },
                    {
                        key: "descriptorSet",
                        get: function get() {
                            return this._descriptorSet;
                        }
                    },
                    {
                        key: "hash",
                        get: function get() {
                            return this._hash;
                        }
                    },
                    {
                        key: "pipelineLayout",
                        get: function get() {
                            return this._pipelineLayout;
                        }
                    }
                ]), t1;
            }();
            function Vk(t1) {
                var i = ",bs," + t1.isA2C;
                return t1.targets.forEach(function(t1) {
                    i += ",bt," + t1.blend + "," + t1.blendEq + "," + t1.blendAlphaEq + "," + t1.blendColorMask + ("," + t1.blendSrc + "," + t1.blendDst + "," + t1.blendSrcAlpha + ",") + t1.blendDstAlpha;
                }), i;
            }
            function Wk(t1) {
                var i = ",dss," + t1.depthTest + "," + t1.depthWrite + "," + t1.depthFunc;
                return (i += "," + t1.stencilTestFront + "," + t1.stencilFuncFront + "," + t1.stencilRefFront + "," + t1.stencilReadMaskFront + ("," + t1.stencilFailOpFront + "," + t1.stencilZFailOpFront + "," + t1.stencilPassOpFront + ",") + t1.stencilWriteMaskFront + ("," + t1.stencilTestBack + "," + t1.stencilFuncBack + "," + t1.stencilRefBack + ",") + t1.stencilReadMaskBack) + "," + t1.stencilFailOpBack + "," + t1.stencilZFailOpBack + "," + t1.stencilPassOpBack + "," + t1.stencilWriteMaskBack;
            }
            Hk.getTypeFromHandle = hm, Hk.getBindingFromHandle = em, Hk.getCountFromHandle = um, Hk.getOffsetFromHandle = om;
            var zk, $k, qk, Yk, Kk, Jk, Qk, Zk, tA = t1("cR", function() {
                function t1() {}
                return t1.getOrCreatePipelineState = function(t1, i, n, s, r) {
                    var h = i.hash ^ s.hash ^ r.attributesHash ^ n.typedID, e = this.He.get(h);
                    if (!e) {
                        var f = new cw(n, i.pipelineLayout, s, new Ed(r.attributes), i.rasterizerState, i.depthStencilState, i.blendState, i.primitive, i.dynamicStates);
                        e = t1.createPipelineState(f), this.He.set(h, e);
                    }
                    return e;
                }, t1;
            }());
            function iA(t1, i) {
                t1.x = i.x * i.x, t1.y = i.y * i.y, t1.z = i.z * i.z;
            }
            function nA(t1) {
                for(var i = t1.length - 1; i >= 0; --i)if (t1[i].window.swapchain) return;
            }
            tA.He = new Map, new Ul, new Cl;
            var sA = new Hr, rA = t1("dH", (zk = go("cc.Material"), $k = Zo(Jm), zk((Yk = ho((qk = function(t1) {
                function i(i) {
                    var n;
                    return (n = t1.call(this, i) || this)._effectAsset = Yk && Yk(), n._techIdx = Kk && Kk(), n._defines = Jk && Jk(), n._states = Qk && Qk(), n._props = Zk && Zk(), n._passes = [], n._hash = 0, n;
                }
                h(i, t1), i.getHash = function(t1) {
                    for(var _$i, n = 0, _$s = d(t1.passes); !(_$i = _$s()).done;)n ^= _$i.value.hash;
                    return n;
                };
                var n = i.prototype;
                return n.initialize = function(t1) {
                    this._passes.length ? nt(12005) : (this._defines || (this._defines = []), this._states || (this._states = []), this._props || (this._props = []), this.Ve(t1), this.We());
                }, n.reset = function(t1) {
                    this.initialize(t1);
                }, n.destroy = function() {
                    return this.ze(), t1.prototype.destroy.call(this);
                }, n.recompileShaders = function() {
                    nt(16370, this.name);
                }, n.overridePipelineStates = function() {
                    nt(16371, this.name);
                }, n.onLoaded = function() {
                    this.We();
                }, n.resetUniforms = function(t1) {
                    void 0 === t1 && (t1 = !0), this._props.length = this._passes.length;
                    for(var _$i = 0; _$i < this._props.length; _$i++)this._props[_$i] = {};
                    if (t1) for(var n, _$s = d(this._passes); !(n = _$s()).done;){
                        var _$r = n.value;
                        _$r.resetUBOs(), _$r.resetTextures();
                    }
                }, n.setProperty = function(t1, i, n) {
                    var _$s = !1;
                    if (void 0 === n) for(var _$r = this._passes, _$h = _$r.length, e = 0; e < _$h; e++){
                        var u = _$r[e];
                        this.$e(u, t1, i) && (this._props[u.propertyIndex][t1] = i, _$s = !0);
                    }
                    else {
                        n >= this._passes.length && nt(16372, n);
                        var o = this._passes[n];
                        this.$e(o, t1, i) && (this._props[o.propertyIndex][t1] = i, _$s = !0);
                    }
                    _$s || nt(16373, t1);
                }, n.getProperty = function(t1, i) {
                    if (void 0 === i) for(var n = this._props, _$s = n.length, _$r = 0; _$r < _$s; _$r++){
                        var _$h = n[_$r];
                        if (t1 in _$h) return _$h[t1];
                    }
                    else {
                        if (i >= this._passes.length) return nt(16372, i), null;
                        var e = this._props[this._passes[i].propertyIndex];
                        if (t1 in e) return e[t1];
                    }
                    return null;
                }, n.copy = function(t1, i) {
                    this._techIdx = t1._techIdx, this._props.length = t1._props.length;
                    for(var n = 0; n < t1._props.length; n++)this._props[n] = r({}, t1._props[n]);
                    this._defines.length = t1._defines.length;
                    for(var _$s = 0; _$s < t1._defines.length; _$s++)this._defines[_$s] = r({}, t1._defines[_$s]);
                    this._states.length = t1._states.length;
                    for(var _$h = 0; _$h < t1._states.length; _$h++)this._states[_$h] = r({}, t1._states[_$h]);
                    this._effectAsset = t1._effectAsset, i && this.Ve(i), this.We();
                }, n.Ve = function(t1) {
                    void 0 !== t1.technique && (this._techIdx = t1.technique), t1.effectAsset ? this._effectAsset = t1.effectAsset : t1.effectName && (this._effectAsset = Jm.get(t1.effectName)), t1.defines && this.Xe(t1.defines, this._defines), t1.states && this.Xe(t1.states, this._states);
                }, n.Xe = function(t1, i) {
                    var n = t1;
                    Array.isArray(n) || (n = Array(this._effectAsset ? this._effectAsset.techniques[this._techIdx].passes.length : 1).fill(n));
                    for(var _$r = 0; _$r < n.length; ++_$r)Object.assign(i[_$r] || (i[_$r] = {}), n[_$r]);
                }, n.qe = function() {
                    var _$t = this._effectAsset.techniques[this._techIdx || 0];
                    if (!_$t) return [];
                    for(var _$i = _$t.passes.length, n = [], _$s = 0; _$s < _$i; ++_$s){
                        var _$r = _$t.passes[_$s], _$h = _$r.passIndex = _$s, e = _$r.defines = this._defines[_$h] || (this._defines[_$h] = {});
                        if (_$r.stateOverrides = this._states[_$h] || (this._states[_$h] = {}), void 0 !== _$r.propertyIndex && Object.assign(e, this._defines[_$r.propertyIndex]), void 0 !== _$r.embeddedMacros && Object.assign(e, _$r.embeddedMacros), !_$r.switch || e[_$r.switch]) {
                            var u = new Hk(A.director.root);
                            u.initialize(_$r), n.push(u);
                        }
                    }
                    return n;
                }, n.We = function(t1) {
                    var n = this;
                    if (void 0 === t1 && (t1 = !0), this._effectAsset) {
                        this._passes = this.qe();
                        var _$s = this._effectAsset.techniques[this._techIdx].passes.length;
                        if (this._props.length = _$s, t1) this._passes.forEach(function(t1, i) {
                            var _$s = n._props[i];
                            for(var _$r in _$s || (_$s = n._props[i] = {}), void 0 !== t1.propertyIndex && Object.assign(_$s, n._props[t1.propertyIndex]), _$s)n.$e(t1, _$r, _$s[_$r]);
                        });
                        else for(var _$r = 0; _$r < this._props.length; _$r++)this._props[_$r] = {};
                    }
                    this._hash = i.getHash(this);
                }, n.$e = function(t1, i, n) {
                    var _$h, _$s = this, _$r = t1.getHandle(i);
                    if (!_$r) return !1;
                    if (26 > hm(_$r)) if (Array.isArray(n)) t1.setUniformArray(_$r, n);
                    else if (null !== n) {
                        if (null != (_$h = t1.properties[i]) && _$h.linear) {
                            var e = n;
                            iA(sA, e), sA.w = e.w, n = sA;
                        }
                        t1.setUniform(_$r, n);
                    } else t1.resetUniform(i);
                    else Array.isArray(n) ? n.forEach(function(i, n) {
                        _$s.Ye(t1, _$r, i, n);
                    }) : n ? this.Ye(t1, _$r, n) : t1.resetTexture(i);
                    return !0;
                }, n.Ye = function(t1, i, n, s) {
                    var _$r = Hk.getBindingFromHandle(i);
                    if (_instanceof(n, gw)) t1.bindTexture(_$r, n, s);
                    else if (_instanceof(n, Tg)) {
                        var _$h = n.getGFXTexture();
                        if (!_$h || !_$h.width || !_$h.height) return;
                        t1.bindTexture(_$r, _$h, s), t1.bindSampler(_$r, n.getGFXSampler(), s);
                    }
                }, n.ze = function() {
                    if (this._passes && this._passes.length) for(var _$t, _$i = d(this._passes); !(_$t = _$i()).done;)_$t.value.destroy();
                    this._passes.length = 0;
                }, n.initDefault = function(i) {
                    t1.prototype.initDefault.call(this, i), this.initialize({
                        effectName: "builtin-unlit",
                        defines: {
                            USE_COLOR: !0
                        },
                        technique: 0
                    }), this.setProperty("mainColor", new Yr("#ff00ff"));
                }, n.validate = function() {
                    return !!this._effectAsset && !this._effectAsset.isDefault && this.passes.length > 0;
                }, s(i, [
                    {
                        key: "effectAsset",
                        get: function get() {
                            return this._effectAsset;
                        }
                    },
                    {
                        key: "effectName",
                        get: function get() {
                            return this._effectAsset ? this._effectAsset.name : "";
                        }
                    },
                    {
                        key: "technique",
                        get: function get() {
                            return this._techIdx;
                        }
                    },
                    {
                        key: "passes",
                        get: function get() {
                            return this._passes;
                        }
                    },
                    {
                        key: "hash",
                        get: function get() {
                            return this._hash;
                        }
                    },
                    {
                        key: "parent",
                        get: function get() {
                            return null;
                        }
                    },
                    {
                        key: "owner",
                        get: function get() {
                            return null;
                        }
                    }
                ]), i;
            }(sg)).prototype, "_effectAsset", [
                $k
            ], function() {
                return null;
            }), Kk = ho(qk.prototype, "_techIdx", [
                Ro
            ], function() {
                return 0;
            }), Jk = ho(qk.prototype, "_defines", [
                Ro
            ], function() {
                return [];
            }), Qk = ho(qk.prototype, "_states", [
                Ro
            ], function() {
                return [];
            }), Zk = ho(qk.prototype, "_props", [
                Ro
            ], function() {
                return [];
            }), qk)) || qk));
            A.Material = rA;
            var hA = t1("cW", function() {
                this.quadIB = null, this.quadVB = null, this.quadIA = null;
            }), eA = new Hr, uA = gi({
                LINEAR: 0,
                EXP: 1,
                EXP_SQUARED: 2,
                LAYERED: 3
            }), oA = uA.LAYERED + 1, fA = function() {
                function t1() {
                    this._fogColor = new Yr("#C8C8C8"), this._colorArray = new Hr(.2, .2, .2, 1), this._enabled = !1, this._accurate = !1, this._type = 0, this._fogDensity = .3, this._fogStart = .5, this._fogEnd = 300, this._fogAtten = 5, this._fogTop = 1.5, this._fogRange = 1.2, this._activated = !1;
                }
                var i = t1.prototype;
                return i.initialize = function(t1) {
                    this._activated = !1, this.fogColor = t1.fogColor, this._enabled = t1.enabled, this._type = this.enabled ? t1.type : oA, this._accurate = t1.accurate, this.fogDensity = t1.fogDensity, this.fogStart = t1.fogStart, this.fogEnd = t1.fogEnd, this.fogAtten = t1.fogAtten, this.fogTop = t1.fogTop, this.fogRange = t1.fogRange;
                }, i.activate = function() {
                    this._updatePipeline(), this._activated = !0;
                }, i._updatePipeline = function() {
                    var _$t = A.director.root, i = this.enabled ? this.type : oA, n = +!!this.accurate, _$s = _$t.pipeline;
                    _$s.macros.CC_USE_FOG === i && _$s.macros.CC_USE_ACCURATE_FOG === n || (_$s.macros.CC_USE_FOG = i, _$s.macros.CC_USE_ACCURATE_FOG = n, this._activated && _$t.onGlobalPipelineStateChanged());
                }, s(t1, [
                    {
                        key: "enabled",
                        get: function get() {
                            return this._enabled;
                        },
                        set: function set(t1) {
                            this._enabled = t1, t1 ? this.activate() : (this._type = oA, this._updatePipeline());
                        }
                    },
                    {
                        key: "accurate",
                        get: function get() {
                            return this._accurate;
                        },
                        set: function set(t1) {
                            this._accurate = t1, this._updatePipeline();
                        }
                    },
                    {
                        key: "fogColor",
                        get: function get() {
                            return this._fogColor;
                        },
                        set: function set(t1) {
                            this._fogColor.set(t1), eA.set(t1.x, t1.y, t1.z, t1.w), iA(this._colorArray, eA);
                        }
                    },
                    {
                        key: "type",
                        get: function get() {
                            return this._type;
                        },
                        set: function set(t1) {
                            this._type = this.enabled ? t1 : oA, this.enabled && this._updatePipeline();
                        }
                    },
                    {
                        key: "fogDensity",
                        get: function get() {
                            return this._fogDensity;
                        },
                        set: function set(t1) {
                            this._fogDensity = t1;
                        }
                    },
                    {
                        key: "fogStart",
                        get: function get() {
                            return this._fogStart;
                        },
                        set: function set(t1) {
                            this._fogStart = t1;
                        }
                    },
                    {
                        key: "fogEnd",
                        get: function get() {
                            return this._fogEnd;
                        },
                        set: function set(t1) {
                            this._fogEnd = t1;
                        }
                    },
                    {
                        key: "fogAtten",
                        get: function get() {
                            return this._fogAtten;
                        },
                        set: function set(t1) {
                            this._fogAtten = t1;
                        }
                    },
                    {
                        key: "fogTop",
                        get: function get() {
                            return this._fogTop;
                        },
                        set: function set(t1) {
                            this._fogTop = t1;
                        }
                    },
                    {
                        key: "fogRange",
                        get: function get() {
                            return this._fogRange;
                        },
                        set: function set(t1) {
                            this._fogRange = t1;
                        }
                    },
                    {
                        key: "colorArray",
                        get: function get() {
                            return this._colorArray;
                        }
                    }
                ]), t1;
            }();
            function cA() {
                return A.director.root.pipeline.pipelineSceneData;
            }
            A.Fog = fA;
            var aA = function() {
                function t1() {
                    this._groundAlbedoHDR = new Hr(.2, .2, .2, 1), this._skyColorHDR = new Hr(.2, .5, .8, 1), this._skyIllumHDR = 0, this._groundAlbedoLDR = new Hr(.2, .2, .2, 1), this._skyColorLDR = new Hr(.2, .5, .8, 1), this._skyIllumLDR = 0, this._mipmapCount = 1, this._enabled = !1;
                }
                return t1.prototype.initialize = function(t1) {
                    this._skyColorHDR = t1.skyColorHDR, this._groundAlbedoHDR.set(t1.groundAlbedoHDR), this._skyIllumHDR = t1.skyIllumHDR, this._skyColorLDR = t1.skyColorLDR, this._groundAlbedoLDR.set(t1.groundAlbedoLDR), this._skyIllumLDR = t1.skyIllumLDR;
                }, s(t1, [
                    {
                        key: "enabled",
                        get: function get() {
                            return this._enabled;
                        },
                        set: function set(t1) {
                            this._enabled = t1;
                        }
                    },
                    {
                        key: "skyColor",
                        get: function get() {
                            return cA().isHDR ? this._skyColorHDR : this._skyColorLDR;
                        },
                        set: function set(t1) {
                            cA().isHDR ? this._skyColorHDR.set(t1) : this._skyColorLDR.set(t1);
                        }
                    },
                    {
                        key: "skyIllum",
                        get: function get() {
                            return cA().isHDR ? this._skyIllumHDR : this._skyIllumLDR;
                        },
                        set: function set(t1) {
                            cA().isHDR ? this._skyIllumHDR = t1 : this._skyIllumLDR = t1;
                        }
                    },
                    {
                        key: "groundAlbedo",
                        get: function get() {
                            return cA().isHDR ? this._groundAlbedoHDR : this._groundAlbedoLDR;
                        },
                        set: function set(t1) {
                            cA().isHDR ? this._groundAlbedoHDR.set(t1) : this._groundAlbedoLDR.set(t1);
                        }
                    }
                ]), t1;
            }();
            aA.SUN_ILLUM = 65e3, aA.SKY_ILLUM = 2e4, A.Ambient = aA;
            var vA = function(t1) {
                function i(i, n) {
                    (_$s = t1.call(this, i.root) || this).Ke = !1, _$s.Je = i, _$s.Qe = n, _$s._doInit(_$s.Je, !0), _$s._shaderInfo.blocks.forEach(function(t1) {
                        var _$i = _$s._blocks[t1.binding], _$n = _$s.Je.blocks[t1.binding];
                        _$i.set(_$n);
                    }), _$s._rootBufferDirty = !0;
                    var _$s, _$r = _$s.Je, _$h = _$s._descriptorSet;
                    return _$s._shaderInfo.samplerTextures.forEach(function(t1) {
                        for(var _$i = 0; _$i < t1.count; _$i++){
                            var _$n = _$r._descriptorSet, _$s = t1.binding, e = _$n.getSampler(_$s, _$i), u = _$n.getTexture(_$s, _$i);
                            _$h.bindSampler(_$s, e, _$i), _$h.bindTexture(_$s, u, _$i);
                        }
                    }), t1.prototype.tryCompile.call(a(_$s)), _$s;
                }
                h(i, t1);
                var n = i.prototype;
                return n.overridePipelineStates = function(t1, i) {
                    this._bs.reset(), this._rs.reset(), this._dss.reset(), Hk.fillPipelineInfo(this, t1), Hk.fillPipelineInfo(this, i), this._onStateChange();
                }, n.tryCompile = function(i) {
                    if (i && !gm(this._defines, i)) return !1;
                    var n = t1.prototype.tryCompile.call(this);
                    return this._onStateChange(), n;
                }, n.beginChangeStatesSilently = function() {
                    this.Ke = !0;
                }, n.endChangeStatesSilently = function() {
                    this.Ke = !1;
                }, n._syncBatchingScheme = function() {
                    this._defines.USE_INSTANCING = !1, this._batchingScheme = 0;
                }, n._onStateChange = function() {
                    this._hash = Hk.getPassHash(this), this.Qe.onPassStateChange(this.Ke);
                }, s(i, [
                    {
                        key: "parent",
                        get: function get() {
                            return this.Je;
                        }
                    }
                ]), i;
            }(Hk), lA = function(t1) {
                function i(i) {
                    var n;
                    return (n = t1.call(this) || this)._passes = [], n.Ze = 0, n.Je = i.parent, n.Qe = i.owner || null, n.Ze = i.subModelIdx || 0, n.copy(n.Je), n;
                }
                h(i, t1);
                var n = i.prototype;
                return n.recompileShaders = function(t1, i) {
                    this._passes && this.effectAsset && (void 0 === i ? this._passes.forEach(function(i) {
                        i.tryCompile(t1);
                    }) : this._passes[i].tryCompile(t1));
                }, n.overridePipelineStates = function(t1, i) {
                    if (this._passes && this.effectAsset) {
                        var n = this.effectAsset.techniques[this.technique].passes;
                        if (void 0 === i) for(var _$s = 0; _$s < this._passes.length; _$s++){
                            var _$r = this._passes[_$s], _$h = this._states[_$s] || (this._states[_$s] = {});
                            for(var e in t1)_$h[e] = t1[e];
                            _$r.overridePipelineStates(n[_$r.passIndex], _$h);
                        }
                        else {
                            var u = this._states[i] || (this._states[i] = {});
                            for(var o in t1)u[o] = t1[o];
                            this._passes[i].overridePipelineStates(n[i], u);
                        }
                    }
                }, n.destroy = function() {
                    return this.ze(), !0;
                }, n.onPassStateChange = function(t1) {
                    this._hash = rA.getHash(this), !t1 && this.Qe && this.Qe.tu(this.Ze, this);
                }, n.qe = function() {
                    var _$t = [], _$i = this.Je.passes;
                    if (!_$i) return _$t;
                    for(var n = 0; n < _$i.length; ++n)_$t.push(new vA(_$i[n], this));
                    return _$t;
                }, s(i, [
                    {
                        key: "parent",
                        get: function get() {
                            return this.Je;
                        }
                    },
                    {
                        key: "owner",
                        get: function get() {
                            return this.Qe;
                        }
                    }
                ]), i;
            }(rA), dA = null, wA = null, gA = {
                HEMISPHERE_DIFFUSE: 0,
                AUTOGEN_HEMISPHERE_DIFFUSE_WITH_REFLECTION: 1,
                DIFFUSEMAP_WITH_REFLECTION: 2
            };
            gi(gA);
            var pA = function() {
                function t1() {
                    this._envmapLDR = null, this._envmapHDR = null, this._diffuseMapLDR = null, this._diffuseMapHDR = null, this._globalDSManager = null, this._model = null, this._default = null, this._enabled = !1, this._useIBL = !1, this._useHDR = !0, this._useDiffuseMap = !1, this._editableMaterial = null, this._activated = !1, this._reflectionHDR = null, this._reflectionLDR = null, this._rotationAngle = 0;
                }
                var i = t1.prototype;
                return i.initialize = function(t1) {
                    this._activated = !1, this._enabled = t1.enabled, this._useIBL = t1.useIBL, this._useDiffuseMap = t1.applyDiffuseMap, this._useHDR = t1.useHDR;
                }, i.setEnvMaps = function(t1, i) {
                    this._envmapHDR = t1, this._envmapLDR = i, this._updateGlobalBinding(), this._updatePipeline();
                }, i.setDiffuseMaps = function(t1, i) {
                    this._diffuseMapHDR = t1, this._diffuseMapLDR = i, this._updateGlobalBinding(), this._updatePipeline();
                }, i.setSkyboxMaterial = function(t1) {
                    t1 ? (this._editableMaterial = new lA({
                        parent: t1
                    }), this._editableMaterial.recompileShaders({
                        USE_RGBE_CUBEMAP: this.isRGBE
                    })) : this._editableMaterial = null, this._updatePipeline();
                }, i.setReflectionMaps = function(t1, i) {
                    this._reflectionHDR = t1, this._reflectionLDR = i, this._updateGlobalBinding(), this._updatePipeline();
                }, i.setRotationAngle = function(t1) {
                    this._rotationAngle = t1;
                }, i.getRotationAngle = function() {
                    return this._rotationAngle;
                }, i.updateMaterialRenderInfo = function() {
                    this._updateGlobalBinding(), this._updatePipeline();
                }, i.activate = function() {
                    var _$t = A.director.root.pipeline;
                    this._globalDSManager = _$t.globalDSManager, this._default = Lk.get("default-cube-texture"), this._model || (this._model = A.director.root.createModel(A.renderer.scene.Model));
                    var i = this._default.isRGBE;
                    if (this._default.isUsingOfflineMipmaps(), this.envmap && (i = this.envmap.isRGBE, this.envmap.isUsingOfflineMipmaps()), !wA) {
                        var n = new rA;
                        n.initialize({
                            effectName: "pipeline/skybox",
                            defines: {
                                USE_RGBE_CUBEMAP: i
                            }
                        }), wA = new lA({
                            parent: n
                        });
                    }
                    this.enabled && (dA || (dA = A.utils.createMesh(A.primitives.box({
                        width: 2,
                        height: 2,
                        length: 2
                    }))), this._editableMaterial ? this._model.initSubModel(0, dA.renderingSubMeshes[0], this._editableMaterial) : this._model.initSubModel(0, dA.renderingSubMeshes[0], wA)), this.envmap || (this.envmap = this._default), this.diffuseMap || (this.diffuseMap = this._default), this._updateGlobalBinding(), this._updatePipeline(), this._activated = !0;
                }, i._updatePipeline = function() {
                    var _$t = A.director.root, i = _$t.pipeline, n = this.useIBL ? this.isRGBE ? 2 : 1 : 0, _$s = this.useIBL && this.useDiffuseMap && this.diffuseMap && this.diffuseMap !== this._default ? this.isRGBE ? 2 : 1 : 0, _$r = this.useHDR, h = this.useConvolutionMap;
                    if (i.macros.CC_USE_IBL === n && i.macros.CC_USE_DIFFUSEMAP === _$s && i.macros.CC_USE_HDR === _$r && i.macros.CC_IBL_CONVOLUTED === h || (i.macros.CC_USE_IBL = n, i.macros.CC_USE_DIFFUSEMAP = _$s, i.macros.CC_USE_HDR = _$r, i.macros.CC_IBL_CONVOLUTED = h, this._activated && _$t.onGlobalPipelineStateChanged()), this.enabled) {
                        var e = this.envmap ? this.envmap : this._default, u = this._editableMaterial ? this._editableMaterial : wA;
                        u && (u.setProperty("environmentMap", e), u.recompileShaders({
                            USE_RGBE_CUBEMAP: this.isRGBE
                        })), this._model && (this._model.setSubModelMaterial(0, u), this._updateSubModes());
                    }
                }, i._updateGlobalBinding = function() {
                    if (!A.rendering && this._globalDSManager) {
                        var _$t = kw.gfxDevice;
                        if (this.reflectionMap) {
                            var i = this.reflectionMap.getGFXTexture(), n = _$t.getSampler(this.reflectionMap.getSamplerInfo());
                            this._globalDSManager.bindSampler(5, n), this._globalDSManager.bindTexture(5, i);
                        } else {
                            var _$s = this.envmap ? this.envmap : this._default;
                            if (_$s) {
                                var _$r = _$s.getGFXTexture(), h = _$t.getSampler(_$s.getSamplerInfo());
                                this._globalDSManager.bindSampler(5, h), this._globalDSManager.bindTexture(5, _$r);
                            }
                        }
                        var e = this.diffuseMap ? this.diffuseMap : this._default;
                        if (e) {
                            var u = e.getGFXTexture(), o = _$t.getSampler(e.getSamplerInfo());
                            this._globalDSManager.bindSampler(7, o), this._globalDSManager.bindTexture(7, u);
                        }
                        this._globalDSManager.update();
                    }
                }, i._updateSubModes = function() {
                    if (this._model) for(var _$t = this._model.subModels, i = 0; i < _$t.length; i++)_$t[i].update();
                }, s(t1, [
                    {
                        key: "model",
                        get: function get() {
                            return this._model;
                        }
                    },
                    {
                        key: "enabled",
                        get: function get() {
                            return this._enabled;
                        },
                        set: function set(t1) {
                            this._enabled = t1, t1 ? this.activate() : this._updatePipeline();
                        }
                    },
                    {
                        key: "useHDR",
                        get: function get() {
                            return this._useHDR;
                        },
                        set: function set(t1) {
                            this._useHDR = t1, this.setEnvMaps(this._envmapHDR, this._envmapLDR);
                        }
                    },
                    {
                        key: "useIBL",
                        get: function get() {
                            return this._useIBL;
                        },
                        set: function set(t1) {
                            this._useIBL = t1, this._updatePipeline();
                        }
                    },
                    {
                        key: "useDiffuseMap",
                        get: function get() {
                            return this._useDiffuseMap;
                        },
                        set: function set(t1) {
                            this._useDiffuseMap = t1, this._updatePipeline();
                        }
                    },
                    {
                        key: "isRGBE",
                        get: function get() {
                            return !!this.envmap && this.envmap.isRGBE;
                        }
                    },
                    {
                        key: "useConvolutionMap",
                        get: function get() {
                            return this.reflectionMap ? this.reflectionMap.isUsingOfflineMipmaps() : !!this.envmap && this.envmap.isUsingOfflineMipmaps();
                        }
                    },
                    {
                        key: "envmap",
                        get: function get() {
                            return cA().isHDR ? this._envmapHDR : this._envmapLDR;
                        },
                        set: function set(t1) {
                            cA().isHDR ? this.setEnvMaps(t1, this._envmapLDR) : this.setEnvMaps(this._envmapHDR, t1);
                        }
                    },
                    {
                        key: "diffuseMap",
                        get: function get() {
                            return cA().isHDR ? this._diffuseMapHDR : this._diffuseMapLDR;
                        },
                        set: function set(t1) {
                            cA().isHDR ? this.setDiffuseMaps(t1, this._diffuseMapLDR) : this.setDiffuseMaps(this._diffuseMapHDR, t1);
                        }
                    },
                    {
                        key: "reflectionMap",
                        get: function get() {
                            return cA().isHDR ? this._reflectionHDR : this._reflectionLDR;
                        }
                    },
                    {
                        key: "editableMaterial",
                        get: function get() {
                            return this._editableMaterial;
                        }
                    }
                ]), t1;
            }();
            A.Skybox = pA;
            var yA = gi({
                Low_256x256: 256,
                Medium_512x512: 512,
                High_1024x1024: 1024,
                Ultra_2048x2048: 2048
            }), _A = gi({
                Planar: 0,
                ShadowMap: 1
            }), mA = gi({
                HARD: 0,
                SOFT: 1,
                SOFT_2X: 2,
                SOFT_4X: 3
            }), bA = gi({
                LEVEL_1: 1,
                LEVEL_2: 2,
                LEVEL_3: 3,
                LEVEL_4: 4
            }), kA = gi({
                NONE: 1,
                RemoveDuplicates: 2,
                DisableRotationFix: 3
            }), AA = _A.ShadowMap + 1, EA = function() {
                function t1() {
                    this.fixedSphere = new Ph(0, 0, 0, .01), this.maxReceived = 4, this._matLight = new cr, this._material = null, this._instancingMaterial = null, this._enabled = !1, this._type = AA, this._distance = 0, this._planeBias = 1, this._normal = new Ss(0, 1, 0), this._shadowColor = new Yr(0, 0, 0, 76), this._size = new Or(1024, 1024), this._shadowMapDirty = !1;
                }
                var i = t1.prototype;
                return i.getPlanarShader = function(t1) {
                    this._material || (this._material = new rA, this._material.initialize({
                        effectName: "pipeline/planar-shadow"
                    }));
                    var i = this._material.passes;
                    return i.length > 0 ? i[0].getShaderVariant(t1) : null;
                }, i.initialize = function(t1) {
                    this._enabled = t1.enabled, this._type = this.enabled ? t1.type : AA, this.normal = t1.planeDirection, this.distance = t1.planeHeight, this.planeBias = t1.planeBias, this.shadowColor = t1.shadowColor, this.maxReceived = t1.maxReceived, t1.shadowMapSize !== this._size.x && (this.size.set(t1.shadowMapSize, t1.shadowMapSize), this._shadowMapDirty = !0);
                }, i.activate = function() {
                    if (this._enabled) if (this.type === _A.Planar) this._updatePlanarInfo();
                    else {
                        var _$t = A.director.root;
                        _$t.pipeline.macros.CC_SHADOW_TYPE = 2, _$t.onGlobalPipelineStateChanged();
                    }
                    else {
                        var i = A.director.root;
                        i.pipeline.macros.CC_SHADOW_TYPE = 0, i.onGlobalPipelineStateChanged();
                    }
                }, i._updatePlanarInfo = function() {
                    this._material || (this._material = new rA, this._material.initialize({
                        effectName: "pipeline/planar-shadow"
                    }));
                    var _$t = A.director.root;
                    _$t.pipeline.macros.CC_SHADOW_TYPE = 1, _$t.onGlobalPipelineStateChanged();
                }, i.destroy = function() {
                    this._material && this._material.destroy(), this._instancingMaterial && this._instancingMaterial.destroy(), this.fixedSphere.destroy();
                }, s(t1, [
                    {
                        key: "enabled",
                        get: function get() {
                            return this._enabled;
                        },
                        set: function set(t1) {
                            this._enabled = t1, this.activate();
                        }
                    },
                    {
                        key: "type",
                        get: function get() {
                            return this._type;
                        },
                        set: function set(t1) {
                            this._type = this.enabled ? t1 : AA, this.activate();
                        }
                    },
                    {
                        key: "normal",
                        get: function get() {
                            return this._normal;
                        },
                        set: function set(t1) {
                            Ss.copy(this._normal, t1);
                        }
                    },
                    {
                        key: "distance",
                        get: function get() {
                            return this._distance;
                        },
                        set: function set(t1) {
                            this._distance = t1;
                        }
                    },
                    {
                        key: "planeBias",
                        get: function get() {
                            return this._planeBias;
                        },
                        set: function set(t1) {
                            this._planeBias = t1;
                        }
                    },
                    {
                        key: "shadowColor",
                        get: function get() {
                            return this._shadowColor;
                        },
                        set: function set(t1) {
                            this._shadowColor = t1;
                        }
                    },
                    {
                        key: "size",
                        get: function get() {
                            return this._size;
                        },
                        set: function set(t1) {
                            this._size.set(t1);
                        }
                    },
                    {
                        key: "shadowMapDirty",
                        get: function get() {
                            return this._shadowMapDirty;
                        },
                        set: function set(t1) {
                            this._shadowMapDirty = t1;
                        }
                    },
                    {
                        key: "matLight",
                        get: function get() {
                            return this._matLight;
                        }
                    },
                    {
                        key: "material",
                        get: function get() {
                            return this._material;
                        }
                    },
                    {
                        key: "instancingMaterial",
                        get: function get() {
                            return this._instancingMaterial;
                        }
                    }
                ]), t1;
            }();
            EA.MAX_FAR = 2e3, EA.COEFFICIENT_OF_EXPANSION = 2 * Math.sqrt(3), A.Shadows = EA;
            var TA, SA = function() {
                function t1() {
                    this._enabled = !1, this._minPos = new Ss(0, 0, 0), this._maxPos = new Ss(0, 0, 0), this._depth = 0;
                }
                return t1.prototype.initialize = function(t1) {
                    this._enabled = t1.enabled, this._minPos = t1.minPos, this._maxPos = t1.maxPos, this._depth = t1.depth;
                }, s(t1, [
                    {
                        key: "enabled",
                        get: function get() {
                            return this._enabled;
                        },
                        set: function set(t1) {
                            this._enabled = t1;
                        }
                    },
                    {
                        key: "minPos",
                        get: function get() {
                            return this._minPos;
                        },
                        set: function set(t1) {
                            this._minPos = t1;
                        }
                    },
                    {
                        key: "maxPos",
                        get: function get() {
                            return this._maxPos;
                        },
                        set: function set(t1) {
                            this._maxPos = t1;
                        }
                    },
                    {
                        key: "depth",
                        get: function get() {
                            return this._depth;
                        },
                        set: function set(t1) {
                            this._depth = t1;
                        }
                    }
                ]), t1;
            }(), OA = new cd;
            OA.format = 35;
            var IA = new ad;
            IA.format = 55;
            var RA, MA = new dd([
                OA
            ], IA), CA = {
                width: 1,
                height: 1,
                renderPassInfo: MA
            }, NA = t1("dI", go("cc.RenderTexture")(TA = function(t1) {
                function i(i) {
                    var n;
                    return (n = t1.call(this, i) || this).iu = null, n;
                }
                h(i, t1);
                var n = i.prototype;
                return n.initialize = function(t1) {
                    this._name = t1.name || "", this.Qn = t1.width, this.Zn = t1.height, this.nu(t1);
                }, n.reset = function(t1) {
                    this.initialize(t1);
                }, n.destroy = function() {
                    if (this.iu) {
                        var _$i = A.director.root;
                        null == _$i || _$i.destroyWindow(this.iu), this.iu = null;
                    }
                    return t1.prototype.destroy.call(this);
                }, n.resize = function(t1, i) {
                    this.Qn = Math.floor(Un(t1, 1, 2048)), this.Zn = Math.floor(Un(i, 1, 2048)), this.iu && this.iu.resize(this.Qn, this.Zn), this.emit("resize", this.iu);
                }, n._serialize = function() {
                    return {};
                }, n._deserialize = function(i, n) {
                    this.Qn = i.w, this.Zn = i.h, this._name = i.n, t1.prototype._deserialize.call(this, i.base, n);
                }, n.getGFXTexture = function() {
                    return this.iu && this.iu.framebuffer.colorTextures[0];
                }, n.onLoaded = function() {
                    this.nu();
                }, n.nu = function(t1) {
                    var _$i = A.director.root;
                    CA.title = this._name, CA.width = this.Qn, CA.height = this.Zn, CA.renderPassInfo = t1 && t1.passInfo ? t1.passInfo : MA, CA.externalResLow = t1 && t1.externalResLow ? t1.externalResLow : 0, CA.externalResHigh = t1 && t1.externalResHigh ? t1.externalResHigh : 0, CA.externalFlag = t1 && t1.externalFlag ? t1.externalFlag : 0, CA.renderPassInfo.colorAttachments.forEach(function(t1) {
                        t1.format = _$i.device.swapchainFormat;
                    }), OA.barrier = kw.gfxDevice.getGeneralBarrier(new gd(128, 128)), this.iu ? (this.iu.destroy(), this.iu.initialize(kw.gfxDevice, CA)) : this.iu = _$i.createWindow(CA);
                }, n.initDefault = function(i) {
                    t1.prototype.initDefault.call(this, i), this.Qn = this.Zn = 1, this.nu();
                }, n.validate = function() {
                    return this.width >= 1 && this.width <= 2048 && this.height >= 1 && this.height <= 2048;
                }, n.readPixels = function(t1, i, n, s, r) {
                    t1 = t1 || 0, i = i || 0, n = n || this.width, s = s || this.height;
                    var _$h = this.getGFXTexture();
                    if (!_$h) return rt(7606), null;
                    var e = 4 * n * s;
                    if (void 0 === r) r = new Uint8Array(e);
                    else if (r.length < e) return rt(7607, e), null;
                    var u = this._getGFXDevice(), o = [], f = [], _$c = new Fl;
                    return _$c.texOffset.x = t1, _$c.texOffset.y = i, _$c.texExtent.width = n, _$c.texExtent.height = s, f.push(_$c), o.push(r), null == u || u.copyTextureToBuffers(_$h, o, f), r;
                }, s(i, [
                    {
                        key: "window",
                        get: function get() {
                            return this.iu;
                        }
                    }
                ]), i;
            }(Tg)) || TA);
            A.RenderTexture = NA, hv(Tg.prototype, "TextureBase.prototype", [
                {
                    name: "hasPremultipliedAlpha"
                },
                {
                    name: "setPremultiplyAlpha"
                },
                {
                    name: "setFlipY"
                }
            ]), rv(NA.prototype, "RenderTexture.prototype", [
                {
                    name: "getGFXWindow",
                    customFunction: function customFunction() {
                        return this.window;
                    }
                }
            ]);
            var PA = ((RA = {})[1] = "Uint", RA[2] = "Int", RA[3] = "Uint", RA[4] = "Int", RA[5] = "Float", RA[6] = "Float", RA.default = "Uint", RA);
            function DA(t1) {
                return "" + (PA[t1.type] || PA.default) + t1.size / t1.count * 8;
            }
            function LA(t1, i, n, s, r) {
                void 0 === n && (n = 11), void 0 === s && (s = 0), void 0 === r && (r = 0);
                var h = Fd[n];
                r || (r = h.size);
                for(var e = "set" + DA(h), u = h.size / h.count, o = Math.floor(i.length / h.count), f = _e.isLittleEndian, _$c = 0; _$c < o; ++_$c)for(var a = s + r * _$c, v = 0; v < h.count; ++v){
                    var l = a + u * v;
                    t1[e](l, i[h.count * _$c + v], f);
                }
            }
            function BA(t1, i, n, s, r, h, e) {
                void 0 === n && (n = 11), void 0 === s && (s = 0), void 0 === r && (r = t1.byteLength - s), void 0 === h && (h = 0), e || (e = new DataView(t1.buffer.slice(t1.byteOffset, t1.byteOffset + t1.byteLength)));
                var u = Fd[n];
                h || (h = u.size);
                for(var o = "set" + DA(u), f = "get" + DA(u), _$c = u.size / u.count, a = Math.floor(r / h), v = _e.isLittleEndian, l = 0; l < a; ++l)for(var _$d = s + h * l, w = 0; w < u.count; ++w){
                    var g = _$d + _$c * w, p = t1[f](g, v);
                    e[o](g, i(p, w, t1), v);
                }
                return e;
            }
            var FA = {
                positions: new Float32Array,
                indices: new Uint8Array,
                boundingBox: {
                    min: Ss.ZERO,
                    max: Ss.ZERO
                }
            }, UA = t1("dz", function() {
                function t1(t1, i, n, s, r, h) {
                    void 0 === s && (s = null), void 0 === r && (r = null), void 0 === h && (h = !0), this.mesh = void 0, this.subMeshIdx = void 0, this.su = [], this.ru = void 0, this.hu = void 0, this.eu = void 0, this.uu = void 0, this.ss = void 0, this.es = null, this.ts = i, this.ss = t1, this.rs = s, this.hs = r, this.ou = n, this.fu = new fd(i, t1, s, r), this.au = h;
                }
                var i = t1.prototype;
                return i.invalidateGeometricInfo = function() {
                    this.uu = void 0;
                }, i.genFlatBuffers = function() {
                    if (!this.su.length && this.mesh && void 0 !== this.subMeshIdx) {
                        var _$t = this.mesh, i = 0, n = _$t.struct.primitives[this.subMeshIdx];
                        n.indexView && (i = n.indexView.count);
                        for(var _$s = 0; _$s < n.vertexBundelIndices.length; _$s++){
                            var _$r = n.vertexBundelIndices[_$s], h = _$t.struct.vertexBundles[_$r], e = n.indexView ? n.indexView.count : h.view.count, u = h.view.stride, o = u * e, f = new Uint8Array(_$t.data.buffer, h.view.offset, h.view.length), _$c = new Uint8Array(n.indexView ? o : h.view.length);
                            if (n.indexView) {
                                for(var a = _$t.readIndices(this.subMeshIdx), v = 0; v < i; ++v)for(var l = v * u, _$d = a[v] * u, w = 0; w < u; ++w)_$c[l + w] = f[_$d + w];
                                this.su.push({
                                    stride: u,
                                    count: e,
                                    buffer: _$c
                                });
                            } else _$c.set(_$t.data.subarray(h.view.offset, h.view.offset + h.view.length)), this.su.push({
                                stride: u,
                                count: e,
                                buffer: _$c
                            });
                        }
                    }
                }, i.destroy = function() {
                    for(var _$t = 0; _$t < this.vertexBuffers.length; _$t++)this.vertexBuffers[_$t].destroy();
                    if (this.vertexBuffers.length = 0, this.rs && (this.au && this.rs.destroy(), this.rs = null), this.ru && this.hu) {
                        for(var i = 0; i < this.hu.length; i++)this.ru[this.hu[i]].destroy();
                        this.ru = void 0, this.hu = void 0;
                    }
                    this.hs && (this.hs.destroy(), this.hs = null);
                }, i.enableVertexIdChannel = function(t1) {
                    if (!this.eu) {
                        var i = this.vertexBuffers.length, n = this.attributes.length, _$s = this.vu(t1);
                        this.ss.push(_$s), this.ts.push(new ud("a_vertexId", 11, !1, i)), this.fu.attributes = this.ts, this.fu.vertexBuffers = this.ss, this.eu = {
                            stream: i,
                            index: n
                        };
                    }
                }, i.vu = function(t1) {
                    for(var i = 0 === this.vertexBuffers.length || 0 === this.vertexBuffers[0].stride ? 0 : this.vertexBuffers[0].size / this.vertexBuffers[0].stride, n = new Float32Array(i), _$s = 0; _$s < i; ++_$s)n[_$s] = _$s + .5;
                    var _$r = t1.createBuffer(new Wl(10, 1, n.byteLength, n.BYTES_PER_ELEMENT));
                    return _$r.update(n), _$r;
                }, s(t1, [
                    {
                        key: "attributes",
                        get: function get() {
                            return this.ts;
                        }
                    },
                    {
                        key: "vertexBuffers",
                        get: function get() {
                            return this.ss;
                        }
                    },
                    {
                        key: "indexBuffer",
                        get: function get() {
                            return this.rs;
                        }
                    },
                    {
                        key: "indirectBuffer",
                        get: function get() {
                            return this.hs;
                        }
                    },
                    {
                        key: "primitiveMode",
                        get: function get() {
                            return this.ou;
                        }
                    },
                    {
                        key: "geometricInfo",
                        get: function get() {
                            if (this.uu) return this.uu;
                            if (void 0 === this.mesh || void 0 === this.subMeshIdx) return FA;
                            var _$t, i = this.mesh, n = this.subMeshIdx, _$s = this.attributes.find(function(t1) {
                                return "a_position" === t1.name;
                            });
                            if (!_$s) return FA;
                            switch(_$s.format){
                                case 21:
                                case 32:
                                    if (!(_$t = i.readAttribute(n, "a_position"))) return FA;
                                    break;
                                case 44:
                                    var _$r = i.readAttribute(n, "a_position");
                                    if (!_$r) return FA;
                                    var h = _$r.length / 4;
                                    _$t = new Float32Array(3 * h);
                                    for(var e = 0; e < h; ++e){
                                        var u = 3 * e, o = 4 * e;
                                        _$t[u] = _$r[o], _$t[u + 1] = _$r[o + 1], _$t[u + 2] = _$r[o + 2];
                                    }
                                    break;
                                case 18:
                                case 29:
                                    var f = i.readAttribute(n, "a_position");
                                    if (!f) return FA;
                                    _$t = new Float32Array(f.length);
                                    for(var _$c = 0; _$c < f.length; ++_$c)_$t[_$c] = fs(f[_$c]);
                                    break;
                                case 41:
                                    var a = i.readAttribute(n, "a_position");
                                    if (!a) return FA;
                                    var v = a.length / 4;
                                    _$t = new Float32Array(3 * v);
                                    for(var l = 0; l < v; ++l){
                                        var _$d = 3 * l, w = 4 * l;
                                        _$t[_$d] = fs(a[w]), _$t[_$d + 1] = fs(a[w + 1]), _$t[_$d + 2] = fs(a[w + 2]);
                                    }
                                    break;
                                default:
                                    return FA;
                            }
                            var g = i.readIndices(n) || void 0, p = new Ss, _$y = new Ss, _$_ = Fd[_$s.format].count;
                            2 === _$_ ? (p.set(_$t[0], _$t[1], 0), _$y.set(_$t[0], _$t[1], 0)) : (p.set(_$t[0], _$t[1], _$t[2]), _$y.set(_$t[0], _$t[1], _$t[2]));
                            for(var m = 0; m < _$t.length; m += _$_)2 === _$_ ? (p.x = _$t[m] > p.x ? _$t[m] : p.x, p.y = _$t[m + 1] > p.y ? _$t[m + 1] : p.y, _$y.x = _$t[m] < _$y.x ? _$t[m] : _$y.x, _$y.y = _$t[m + 1] < _$y.y ? _$t[m + 1] : _$y.y) : (p.x = _$t[m] > p.x ? _$t[m] : p.x, p.y = _$t[m + 1] > p.y ? _$t[m + 1] : p.y, p.z = _$t[m + 2] > p.z ? _$t[m + 2] : p.z, _$y.x = _$t[m] < _$y.x ? _$t[m] : _$y.x, _$y.y = _$t[m + 1] < _$y.y ? _$t[m + 1] : _$y.y, _$y.z = _$t[m + 2] < _$y.z ? _$t[m + 2] : _$y.z);
                            return this.uu = {
                                positions: _$t,
                                indices: g,
                                boundingBox: {
                                    max: p,
                                    min: _$y
                                }
                            }, this.uu;
                        }
                    },
                    {
                        key: "drawInfo",
                        get: function get() {
                            return this.es;
                        },
                        set: function set(t1) {
                            this.es = t1;
                        }
                    },
                    {
                        key: "flatBuffers",
                        get: function get() {
                            return this.su;
                        }
                    },
                    {
                        key: "jointMappedBuffers",
                        get: function get() {
                            var _$t = this;
                            if (this.ru) return this.ru;
                            var i = this.ru = [], n = this.hu = [];
                            if (!this.mesh || void 0 === this.subMeshIdx) return this.ru = this.vertexBuffers;
                            var _$s, _$r, h = this.mesh.struct, e = h.primitives[this.subMeshIdx];
                            if (!h.jointMaps || void 0 === e.jointMapIndex || !h.jointMaps[e.jointMapIndex]) return this.ru = this.vertexBuffers;
                            for(var u = A.director.root.device, f = 0; f < e.vertexBundelIndices.length; f++)!function o() {
                                var o = h.vertexBundles[e.vertexBundelIndices[f]];
                                _$r = 0, _$s = 0;
                                for(var _$c = 0; _$c < o.attributes.length; _$c++){
                                    var a = o.attributes[_$c];
                                    if ("a_joints" === a.name) {
                                        _$s = a.format;
                                        break;
                                    }
                                    _$r += Fd[a.format].size;
                                }
                                if (_$s) {
                                    var l = new DataView(new Uint8Array(_$t.mesh.data.buffer, o.view.offset, o.view.length).slice().buffer), _$d = h.jointMaps[e.jointMapIndex];
                                    BA(l, function(t1) {
                                        return _$d.indexOf(t1);
                                    }, _$s, _$r, o.view.length, o.view.stride, l);
                                    var w = u.createBuffer(new Wl(10, 1, o.view.length, o.view.stride));
                                    w.update(l.buffer), i.push(w), n.push(f);
                                } else i.push(_$t.vertexBuffers[e.vertexBundelIndices[f]]);
                            }();
                            return this.eu && i.push(this.vu(u)), i;
                        }
                    },
                    {
                        key: "iaInfo",
                        get: function get() {
                            return this.fu;
                        }
                    }
                ]), t1;
            }()), xA = function() {
                var _$t = i.prototype;
                function i(t1) {
                    this.lu = null, this.wu = 1, this.gu = 1, this.colorDirty = !0, this._uiTransformComp = null, this.pu = null, this.yu = t1;
                }
                return _$t._u = function(t1) {
                    this.wu = t1;
                }, _$t.applyOpacity = function(t1) {
                    this.wu = this.gu * t1;
                }, i.markOpacityTree = function() {}, s(i, [
                    {
                        key: "uiTransformComp",
                        get: function get() {
                            return this._uiTransformComp || (this._uiTransformComp = this.yu.getComponent("cc.UITransform")), this._uiTransformComp;
                        },
                        set: function set(t1) {
                            this._uiTransformComp = t1;
                        }
                    },
                    {
                        key: "uiComp",
                        get: function get() {
                            return this.lu;
                        },
                        set: function set(t1) {
                            this.lu && t1 ? nt(12002) : this.lu = t1;
                        }
                    },
                    {
                        key: "opacity",
                        get: function get() {
                            return this.wu;
                        }
                    },
                    {
                        key: "localOpacity",
                        get: function get() {
                            return this.gu;
                        },
                        set: function set(t1) {
                            this.gu = t1, this.colorDirty = !0;
                        }
                    }
                ]), i;
            }();
            A.GAME_VIEW;
            var jA = t1("d3", {
                LOCAL: 0,
                WORLD: 1
            }), GA = t1("d4", {
                NONE: 0,
                POSITION: 1,
                ROTATION: 2,
                SCALE: 4,
                SKEW: 8,
                RS: 6,
                RSS: 14,
                TRS: 7,
                TRS_MASK: -8
            });
            A.internal.TransformBit = GA;
            var HA = t1("d5", gi({
                Static: 0,
                Stationary: 1,
                Movable: 2
            })), VA = t1("d6", {
                TOUCH_START: "touch-start",
                TOUCH_MOVE: "touch-move",
                TOUCH_END: "touch-end",
                TOUCH_CANCEL: "touch-cancel",
                MOUSE_DOWN: "mouse-down",
                MOUSE_MOVE: "mouse-move",
                MOUSE_UP: "mouse-up",
                MOUSE_WHEEL: "mouse-wheel",
                MOUSE_ENTER: "mouse-enter",
                MOUSE_LEAVE: "mouse-leave",
                KEY_DOWN: "keydown",
                KEY_UP: "keyup",
                DEVICEMOTION: "devicemotion",
                TRANSFORM_CHANGED: "transform-changed",
                MOBILITY_CHANGED: "mobility-changed",
                SCENE_CHANGED_FOR_PERSISTS: "scene-changed-for-persists",
                SIZE_CHANGED: "size-changed",
                ANCHOR_CHANGED: "anchor-changed",
                COLOR_CHANGED: "color-changed",
                CHILD_ADDED: "child-added",
                CHILD_REMOVED: "child-removed",
                PARENT_CHANGED: "parent-changed",
                NODE_DESTROYED: "node-destroyed",
                LAYER_CHANGED: "layer-changed",
                SIBLING_ORDER_CHANGED: "sibling-order-changed",
                CHILDREN_ORDER_CHANGED: "sibling-order-changed",
                ACTIVE_IN_HIERARCHY_CHANGED: "active-in-hierarchy-changed",
                COMPONENT_ADDED: "component-added",
                COMPONENT_REMOVED: "component-removed",
                LIGHT_PROBE_CHANGED: "light-probe-changed",
                LIGHT_PROBE_BAKING_CHANGED: "light-probe-baking-changed",
                ACTIVE_CHANGED: "active-changed"
            }), WA = t1("dT", function() {
                function t1(t1, i) {
                    this.target = null, this.currentTarget = null, this.eventPhase = 0, this.propagationStopped = !1, this.propagationImmediateStopped = !1, this.type = t1, this.bubbles = !!i;
                }
                var i = t1.prototype;
                return i.unuse = function() {
                    this.type = t1.NO_TYPE, this.target = null, this.currentTarget = null, this.eventPhase = t1.NONE, this.propagationStopped = !1, this.propagationImmediateStopped = !1;
                }, i.reuse = function(t1, i) {
                    this.type = t1, this.bubbles = i || !1;
                }, i.isStopped = function() {
                    return this.propagationStopped || this.propagationImmediateStopped;
                }, i.getCurrentTarget = function() {
                    return this.currentTarget;
                }, i.getType = function() {
                    return this.type;
                }, t1;
            }());
            WA.NO_TYPE = "no_type", WA.TOUCH = "touch", WA.MOUSE = "mouse", WA.KEYBOARD = "keyboard", WA.ACCELERATION = "acceleration", WA.NONE = 0, WA.CAPTURING_PHASE = 1, WA.AT_TARGET = 2, WA.BUBBLING_PHASE = 3, A.Event = WA;
            var zA = t1("dU", function(t1) {
                function i(i, n) {
                    var s;
                    return (s = t1.call(this, "devicemotion", n) || this).acc = i, s;
                }
                return h(i, t1), i;
            }(WA));
            WA.EventAcceleration = zA;
            var $A = t1("dV", function(t1) {
                function i(i, n, s) {
                    var _$r;
                    return "boolean" == typeof n && (n = n ? "keydown" : "keyup"), (_$r = t1.call(this, n, s) || this).rawEvent = void 0, _$r.mu = "keyup" !== n, "number" == typeof i ? _$r.keyCode = i : (_$r.keyCode = i.keyCode, _$r.rawEvent = i), _$r.windowId = 0, _$r;
                }
                return h(i, t1), s(i, [
                    {
                        key: "isPressed",
                        get: function get() {
                            return this.mu;
                        }
                    }
                ]), i;
            }(WA));
            WA.EventKeyboard = $A;
            var XA = t1("dW", function(t1) {
                function i(n, s, r, h) {
                    var e;
                    return (e = t1.call(this, n, s) || this).movementX = 0, e.movementY = 0, e.windowId = 0, e.preventSwallow = !1, e.bu = i.BUTTON_MISSING, e.Ph = 0, e.Dh = 0, e.ku = 0, e.Au = 0, e.Eu = 0, e.Tu = 0, e.Su = n, r && (e.ku = r.x, e.Au = r.y), e.windowId = null != h ? h : e.windowId, e;
                }
                h(i, t1);
                var n = i.prototype;
                return n.setScrollData = function(t1, i) {
                    this.Eu = t1, this.Tu = i;
                }, n.getScrollX = function() {
                    return this.Eu;
                }, n.getScrollY = function() {
                    return this.Tu;
                }, n.setLocation = function(t1, i) {
                    this.Ph = t1, this.Dh = i;
                }, n.getLocation = function(t1) {
                    return t1 || (t1 = new Or), Or.set(t1, this.Ph, this.Dh), t1;
                }, n.getLocationInView = function(t1) {
                    return t1 || (t1 = new Or), Or.set(t1, this.Ph, A.view._designResolutionSize.height - this.Dh), t1;
                }, n.getUILocation = function(t1) {
                    return t1 || (t1 = new Or), Or.set(t1, this.Ph, this.Dh), A.view.Kt(t1), t1;
                }, n.getPreviousLocation = function(t1) {
                    return t1 || (t1 = new Or), Or.set(t1, this.ku, this.Au), t1;
                }, n.getUIPreviousLocation = function(t1) {
                    return t1 || (t1 = new Or), Or.set(t1, this.ku, this.Au), A.view.Kt(t1), t1;
                }, n.getDelta = function(t1) {
                    return t1 || (t1 = new Or), Or.set(t1, this.Ph - this.ku, this.Dh - this.Au), t1;
                }, n.getDeltaX = function() {
                    return this.Ph - this.ku;
                }, n.getDeltaY = function() {
                    return this.Dh - this.Au;
                }, n.getUIDelta = function(t1) {
                    t1 || (t1 = new Or);
                    var _$i = A.view;
                    return Or.set(t1, (this.Ph - this.ku) / _$i.getScaleX(), (this.Dh - this.Au) / _$i.getScaleY()), t1;
                }, n.getUIDeltaX = function() {
                    return (this.Ph - this.ku) / A.view.getScaleX();
                }, n.getUIDeltaY = function() {
                    return (this.Dh - this.Au) / A.view.getScaleY();
                }, n.setButton = function(t1) {
                    this.bu = t1;
                }, n.getButton = function() {
                    return this.bu;
                }, n.getLocationX = function() {
                    return this.Ph;
                }, n.getLocationY = function() {
                    return this.Dh;
                }, n.getUILocationX = function() {
                    var _$t = A.view, _$i = _$t.getViewportRect();
                    return (this.Ph - _$i.x) / _$t.getScaleX();
                }, n.getUILocationY = function() {
                    var _$t = A.view, _$i = _$t.getViewportRect();
                    return (this.Dh - _$i.y) / _$t.getScaleY();
                }, s(i, [
                    {
                        key: "eventType",
                        get: function get() {
                            return this.Su;
                        }
                    }
                ]), i;
            }(WA));
            XA.BUTTON_MISSING = -1, XA.BUTTON_LEFT = 0, XA.BUTTON_RIGHT = 2, XA.BUTTON_MIDDLE = 1, XA.BUTTON_4 = 3, XA.BUTTON_5 = 4, XA.BUTTON_6 = 5, XA.BUTTON_7 = 6, XA.BUTTON_8 = 7, WA.EventMouse = XA;
            var qA = new Or, YA = t1("dX", function(t1) {
                function i(i, n, s, r) {
                    var _$h;
                    return void 0 === r && (r = []), (_$h = t1.call(this, s, n) || this).touch = null, _$h.simulate = !1, _$h.windowId = 0, _$h.preventSwallow = !1, _$h.Ou = s, _$h.Iu = i || [], _$h.Ru = r, _$h;
                }
                h(i, t1);
                var n = i.prototype;
                return n.getEventCode = function() {
                    return this.Ou;
                }, n.getTouches = function() {
                    return this.Iu;
                }, n.getAllTouches = function() {
                    return this.Ru;
                }, n.setLocation = function(t1, i) {
                    this.touch && this.touch.setTouchInfo(this.touch.getID(), t1, i);
                }, n.getLocation = function(t1) {
                    return this.touch ? this.touch.getLocation(t1) : new Or;
                }, n.getUILocation = function(t1) {
                    return this.touch ? this.touch.getUILocation(t1) : new Or;
                }, n.getLocationInView = function(t1) {
                    return this.touch ? this.touch.getLocationInView(t1) : new Or;
                }, n.getPreviousLocation = function(t1) {
                    return this.touch ? this.touch.getPreviousLocation(t1) : new Or;
                }, n.getStartLocation = function(t1) {
                    return this.touch ? this.touch.getStartLocation(t1) : new Or;
                }, n.getUIStartLocation = function(t1) {
                    return this.touch ? this.touch.getUIStartLocation(t1) : new Or;
                }, n.getID = function() {
                    return this.touch ? this.touch.getID() : null;
                }, n.getDelta = function(t1) {
                    return this.touch ? this.touch.getDelta(t1) : new Or;
                }, n.getUIDelta = function(t1) {
                    return this.touch ? this.touch.getUIDelta(t1) : new Or;
                }, n.getDeltaX = function() {
                    return this.touch ? this.touch.getDelta(qA).x : 0;
                }, n.getDeltaY = function() {
                    return this.touch ? this.touch.getDelta(qA).y : 0;
                }, n.getLocationX = function() {
                    return this.touch ? this.touch.getLocationX() : 0;
                }, n.getLocationY = function() {
                    return this.touch ? this.touch.getLocationY() : 0;
                }, i;
            }(WA));
            YA.MAX_TOUCHES = 5, WA.EventTouch = YA;
            var KA = t1("dY", function(t1) {
                function i(i, n) {
                    var s;
                    return (s = t1.call(this, i, !1) || this).gamepad = n, s;
                }
                return h(i, t1), i;
            }(WA)), JA = t1("dZ", function(t1) {
                function i(i, n) {
                    var s;
                    return (s = t1.call(this, i, !1) || this).handleInputDevice = n, s;
                }
                return h(i, t1), i;
            }(WA)), QA = t1("d_", function(t1) {
                function i(i, n) {
                    var s;
                    return (s = t1.call(this, i, !1) || this).hmdInputDevice = n, s;
                }
                return h(i, t1), i;
            }(WA)), ZA = (t1("d$", function(t1) {
                function i(i, n) {
                    var s;
                    return (s = t1.call(this, i, !1) || this).handheldInputDevice = n, s;
                }
                return h(i, t1), i;
            }(WA)), t1("e0", function(t1, i, n, s) {
                void 0 === t1 && (t1 = 0), void 0 === i && (i = 0), void 0 === n && (n = 0), void 0 === s && (s = 0), this.x = t1, this.y = i, this.z = n, this.timestamp = s;
            })), tE = t1("dS", {
                TOUCH_START: "touch-start",
                TOUCH_MOVE: "touch-move",
                TOUCH_END: "touch-end",
                TOUCH_CANCEL: "touch-cancel",
                MOUSE_DOWN: "mouse-down",
                MOUSE_MOVE: "mouse-move",
                MOUSE_UP: "mouse-up",
                MOUSE_WHEEL: "mouse-wheel",
                MOUSE_ENTER: "mouse-enter",
                MOUSE_LEAVE: "mouse-leave",
                KEY_DOWN: "keydown",
                KEY_UP: "keyup",
                DEVICEMOTION: "devicemotion",
                TRANSFORM_CHANGED: "transform-changed",
                SCENE_CHANGED_FOR_PERSISTS: "scene-changed-for-persists",
                SIZE_CHANGED: "size-changed",
                ANCHOR_CHANGED: "anchor-changed",
                COLOR_CHANGED: "color-changed",
                CHILD_ADDED: "child-added",
                CHILD_REMOVED: "child-removed",
                PARENT_CHANGED: "parent-changed",
                NODE_DESTROYED: "node-destroyed",
                LAYER_CHANGED: "layer-changed",
                SIBLING_ORDER_CHANGED: "sibling-order-changed"
            });
            A.SystemEventType = tE, t1("e1", {
                NONE: 0,
                MOBILE_BACK: 6,
                BACKSPACE: 8,
                TAB: 9,
                ENTER: 13,
                SHIFT_LEFT: 16,
                CTRL_LEFT: 17,
                ALT_LEFT: 18,
                PAUSE: 19,
                CAPS_LOCK: 20,
                ESCAPE: 27,
                SPACE: 32,
                PAGE_UP: 33,
                PAGE_DOWN: 34,
                END: 35,
                HOME: 36,
                ARROW_LEFT: 37,
                ARROW_UP: 38,
                ARROW_RIGHT: 39,
                ARROW_DOWN: 40,
                INSERT: 45,
                DELETE: 46,
                DIGIT_0: 48,
                DIGIT_1: 49,
                DIGIT_2: 50,
                DIGIT_3: 51,
                DIGIT_4: 52,
                DIGIT_5: 53,
                DIGIT_6: 54,
                DIGIT_7: 55,
                DIGIT_8: 56,
                DIGIT_9: 57,
                KEY_A: 65,
                KEY_B: 66,
                KEY_C: 67,
                KEY_D: 68,
                KEY_E: 69,
                KEY_F: 70,
                KEY_G: 71,
                KEY_H: 72,
                KEY_I: 73,
                KEY_J: 74,
                KEY_K: 75,
                KEY_L: 76,
                KEY_M: 77,
                KEY_N: 78,
                KEY_O: 79,
                KEY_P: 80,
                KEY_Q: 81,
                KEY_R: 82,
                KEY_S: 83,
                KEY_T: 84,
                KEY_U: 85,
                KEY_V: 86,
                KEY_W: 87,
                KEY_X: 88,
                KEY_Y: 89,
                KEY_Z: 90,
                NUM_0: 96,
                NUM_1: 97,
                NUM_2: 98,
                NUM_3: 99,
                NUM_4: 100,
                NUM_5: 101,
                NUM_6: 102,
                NUM_7: 103,
                NUM_8: 104,
                NUM_9: 105,
                NUM_MULTIPLY: 106,
                NUM_PLUS: 107,
                NUM_SUBTRACT: 109,
                NUM_DECIMAL: 110,
                NUM_DIVIDE: 111,
                F1: 112,
                F2: 113,
                F3: 114,
                F4: 115,
                F5: 116,
                F6: 117,
                F7: 118,
                F8: 119,
                F9: 120,
                F10: 121,
                F11: 122,
                F12: 123,
                NUM_LOCK: 144,
                SCROLL_LOCK: 145,
                SEMICOLON: 186,
                EQUAL: 187,
                COMMA: 188,
                DASH: 189,
                PERIOD: 190,
                SLASH: 191,
                BACK_QUOTE: 192,
                BRACKET_LEFT: 219,
                BACKSLASH: 220,
                BRACKET_RIGHT: 221,
                QUOTE: 222,
                SHIFT_RIGHT: 2e3,
                CTRL_RIGHT: 2001,
                ALT_RIGHT: 2002,
                NUM_ENTER: 2003
            });
            var iE = new Or, nE = t1("e2", function() {
                function t1(t1, i, n) {
                    void 0 === n && (n = 0), this.Mu = new Or, this.Cu = new Or, this.Nu = 0, this.Ar = 0, this.Pu = new Or, this.Du = !1, this.setTouchInfo(n, t1, i);
                }
                var i = t1.prototype;
                return i.getLocation = function(t1) {
                    return t1 || (t1 = new Or), t1.set(this.Mu.x, this.Mu.y), t1;
                }, i.getLocationX = function() {
                    return this.Mu.x;
                }, i.getLocationY = function() {
                    return this.Mu.y;
                }, i.getUILocation = function(t1) {
                    return t1 || (t1 = new Or), t1.set(this.Mu.x, this.Mu.y), A.view.Kt(t1), t1;
                }, i.getUILocationX = function() {
                    var _$t = A.view, i = _$t.getViewportRect();
                    return (this.Mu.x - i.x) / _$t.getScaleX();
                }, i.getUILocationY = function() {
                    var _$t = A.view, i = _$t.getViewportRect();
                    return (this.Mu.y - i.y) / _$t.getScaleY();
                }, i.getPreviousLocation = function(t1) {
                    return t1 || (t1 = new Or), t1.set(this.Cu.x, this.Cu.y), t1;
                }, i.getUIPreviousLocation = function(t1) {
                    return t1 || (t1 = new Or), t1.set(this.Cu.x, this.Cu.y), A.view.Kt(t1), t1;
                }, i.getStartLocation = function(t1) {
                    return t1 || (t1 = new Or), t1.set(this.Pu.x, this.Pu.y), t1;
                }, i.getUIStartLocation = function(t1) {
                    return t1 || (t1 = new Or), t1.set(this.Pu.x, this.Pu.y), A.view.Kt(t1), t1;
                }, i.getDelta = function(t1) {
                    return t1 || (t1 = new Or), t1.set(this.Mu), t1.subtract(this.Cu), t1;
                }, i.getUIDelta = function(t1) {
                    t1 || (t1 = new Or), iE.set(this.Mu), iE.subtract(this.Cu);
                    var i = A.view;
                    return t1.set(i.getScaleX(), i.getScaleY()), Or.divide(t1, iE, t1), t1;
                }, i.getLocationInView = function(t1) {
                    return t1 || (t1 = new Or), t1.set(this.Mu.x, A.view._designResolutionSize.height - this.Mu.y), t1;
                }, i.getPreviousLocationInView = function(t1) {
                    return t1 || (t1 = new Or), t1.set(this.Cu.x, A.view._designResolutionSize.height - this.Cu.y), t1;
                }, i.getStartLocationInView = function(t1) {
                    return t1 || (t1 = new Or), t1.set(this.Pu.x, A.view._designResolutionSize.height - this.Pu.y), t1;
                }, i.getID = function() {
                    return this.Ar;
                }, i.setTouchInfo = function(t1, i, n) {
                    void 0 === t1 && (t1 = 0), void 0 === i && (i = 0), void 0 === n && (n = 0), this.Cu = this.Mu, this.Mu = new Or(i || 0, n || 0), this.Ar = t1, this.Du || (this.Pu = new Or(this.Mu), this.Du = !0);
                }, i.setPoint = function(t1, i) {
                    "object" == (void 0 === t1 ? "undefined" : _type_of(t1)) ? (this.Mu.x = t1.x, this.Mu.y = t1.y) : (this.Mu.x = t1 || 0, this.Mu.y = i || 0), this.Nu = A.game.frameStartTime;
                }, i.setPrevPoint = function(t1, i) {
                    this.Cu = "object" == (void 0 === t1 ? "undefined" : _type_of(t1)) ? new Or(t1.x, t1.y) : new Or(t1 || 0, i || 0), this.Nu = A.game.frameStartTime;
                }, i.clone = function() {
                    var i = this.getID();
                    this.getStartLocation(iE);
                    var n = new t1(iE.x, iE.y, i);
                    return this.getLocation(iE), n.setPoint(iE.x, iE.y), this.getPreviousLocation(iE), n.setPrevPoint(iE), n;
                }, s(t1, [
                    {
                        key: "lastModified",
                        get: function get() {
                            return this.Nu;
                        }
                    }
                ]), t1;
            }());
            A.Touch = nE;
            var sE, rE, hE, oE, fE, cE, aE, vE, lE, dE, wE, gE, pE, yE, _E, mE = new Fh(function() {
                return Array(16);
            }, 3), bE = null, kE = new Or, AE = [
                "touch-start",
                "touch-move",
                "touch-end",
                "touch-cancel"
            ], EE = [
                "mouse-down",
                "mouse-enter",
                "mouse-move",
                "mouse-leave",
                "mouse-up",
                "mouse-wheel"
            ], TE = new ie, SE = function() {
                function t1(t1) {
                    this.claimedTouchIdList = [], this.maskList = null, this.cachedCameraPriority = 0, this.previousMouseIn = !1, this.bubblingTarget = null, this.capturingTarget = null, this.shouldHandleEventMouse = !1, this.shouldHandleEventTouch = !1, this.Lu = null, this.Bu = !1, this.Fu = !1, this.yu = t1;
                }
                var i = t1.prototype;
                return i.setEnabled = function(t1, i) {
                    if (void 0 === i && (i = !1), this.Bu !== t1) {
                        this.Bu = t1;
                        var n = this.node.children;
                        if (t1 && this.Uu(), TE.emit(2), i && n.length > 0) for(var _$s = 0; _$s < n.length; ++_$s)n[_$s].eventProcessor.setEnabled(t1, !0);
                    }
                }, i.reattach = function() {
                    this.node.walk(function(i) {
                        var n = i.eventProcessor, _$s = n.xu(t1._maskComp);
                        n.maskList = _$s;
                    });
                }, i.destroy = function() {
                    if (bE === this.yu && (bE = null), this.capturingTarget && this.capturingTarget.clear(), this.bubblingTarget && this.bubblingTarget.clear(), TE.emit(1, this), this.Lu) {
                        var _$t = new YA([
                            this.Lu
                        ], !0, "touch-cancel");
                        _$t.touch = this.Lu, this.dispatchEvent(_$t), this.Lu = null;
                    }
                }, i.on = function(t1, i, n, s) {
                    var _$r, h;
                    return this.ju(t1), ((s = !!s) ? null != (_$r = this.capturingTarget) ? _$r : this.capturingTarget = this.Gu() : null != (h = this.bubblingTarget) ? h : this.bubblingTarget = this.Gu()).on(t1, i, n), i;
                }, i.once = function(t1, i, n, s) {
                    var _$r, h;
                    return this.ju(t1), ((s = !!s) ? null != (_$r = this.capturingTarget) ? _$r : this.capturingTarget = this.Gu() : null != (h = this.bubblingTarget) ? h : this.bubblingTarget = this.Gu()).on(t1, i, n, !0), i;
                }, i.off = function(t1, i, n, s) {
                    var _$r;
                    null == (_$r = (s = !!s) ? this.capturingTarget : this.bubblingTarget) || _$r.off(t1, i, n);
                }, i.targetOff = function(t1) {
                    var i, n;
                    null == (i = this.capturingTarget) || i.removeAll(t1), null == (n = this.bubblingTarget) || n.removeAll(t1), this.shouldHandleEventTouch && !this.Hu() && (this.shouldHandleEventTouch = !1), this.shouldHandleEventMouse && !this.Vu() && (this.shouldHandleEventMouse = !1), this.Wu() || TE.emit(1, this);
                }, i.emit = function(t1, i, n, s, r, h) {
                    var e;
                    null == (e = this.bubblingTarget) || e.emit(t1, i, n, s, r, h);
                }, i.dispatchEvent = function(t1) {
                    var i, n = this.node, _$s = 0;
                    t1.target = n;
                    var _$r = mE.alloc();
                    for(_$r.length = 0, this.getCapturingTargets(t1.type, _$r), t1.eventPhase = 1, _$s = _$r.length - 1; _$s >= 0; --_$s)if ((i = _$r[_$s]).eventProcessor.capturingTarget && (t1.currentTarget = i, i.eventProcessor.capturingTarget.emit(t1.type, t1, _$r), t1.propagationStopped)) return void mE.free(_$r);
                    if (t1.eventPhase = 2, t1.currentTarget = n, this.capturingTarget && this.capturingTarget.emit(t1.type, t1), !t1.propagationImmediateStopped && this.bubblingTarget && this.bubblingTarget.emit(t1.type, t1), !t1.propagationStopped && t1.bubbles) {
                        for(_$r.length = 0, this.getBubblingTargets(t1.type, _$r), t1.eventPhase = 3, _$s = 0; _$s < _$r.length; ++_$s)if ((i = _$r[_$s]).eventProcessor.bubblingTarget && (t1.currentTarget = i, i.eventProcessor.bubblingTarget.emit(t1.type, t1), t1.propagationStopped)) return void mE.free(_$r);
                    }
                    mE.free(_$r);
                }, i.hasEventListener = function(t1, i, n) {
                    var _$s = !1;
                    return this.bubblingTarget && (_$s = this.bubblingTarget.hasEventListener(t1, i, n)), !_$s && this.capturingTarget && (_$s = this.capturingTarget.hasEventListener(t1, i, n)), _$s;
                }, i.getCapturingTargets = function(t1, i) {
                    for(var _$s, n = this.yu.parent; n;)null != (_$s = n.eventProcessor.capturingTarget) && _$s.hasEventListener(t1) && i.push(n), n = n.parent;
                }, i.getBubblingTargets = function(t1, i) {
                    for(var _$s, n = this.yu.parent; n;)null != (_$s = n.eventProcessor.bubblingTarget) && _$s.hasEventListener(t1) && i.push(n), n = n.parent;
                }, i.onUpdatingSiblingIndex = function() {
                    TE.emit(2);
                }, i.xu = function(t1) {
                    var i = this.node;
                    if (t1) {
                        for(var n = 0, _$s = [], _$r = i; _$r && A.Node.isNode(_$r); _$r = _$r.parent, ++n){
                            var h = _$r.getComponent(t1);
                            if (h) {
                                var e = {
                                    index: n,
                                    comp: h
                                };
                                _$s ? _$s.push(e) : _$s = [
                                    e
                                ];
                            }
                        }
                        return _$s.length > 0 ? _$s : null;
                    }
                    return null;
                }, i.Uu = function() {
                    this.maskList = this.xu(t1._maskComp);
                }, i.zu = function(t1) {
                    return -1 !== AE.indexOf(t1);
                }, i.$u = function(t1) {
                    return -1 !== EE.indexOf(t1);
                }, i.Hu = function() {
                    for(var _$t = 0; _$t < AE.length; ++_$t){
                        var i = AE[_$t];
                        if (this.hasEventListener(i)) return !0;
                    }
                    return !1;
                }, i.Vu = function() {
                    for(var _$t = 0; _$t < EE.length; ++_$t){
                        var i = EE[_$t];
                        if (this.hasEventListener(i)) return !0;
                    }
                    return !1;
                }, i.Wu = function() {
                    return !!this.Hu() || this.Vu();
                }, i.ju = function(t1) {
                    var i = this.zu(t1), n = this.$u(t1);
                    i ? this.shouldHandleEventTouch = !0 : n && (this.shouldHandleEventMouse = !0), !i && !n || this.Wu() || TE.emit(0, this);
                }, i.Gu = function() {
                    var _$t = this, i = new ie;
                    return i.vt(function() {
                        _$t.shouldHandleEventTouch && !_$t.Hu() && (_$t.shouldHandleEventTouch = !1), _$t.shouldHandleEventMouse && !_$t.Vu() && (_$t.shouldHandleEventMouse = !1), _$t.Wu() || TE.emit(1, _$t);
                    }), i;
                }, i.Xu = function(t1) {
                    switch(t1.type){
                        case "mouse-down":
                            return this.qu(t1);
                        case "mouse-move":
                            return this.Yu(t1);
                        case "mouse-up":
                            return this.Ku(t1);
                        case "mouse-wheel":
                            return this.Ju(t1);
                        case "mouse-leave-window":
                            return this.Qu(t1);
                        case "mouse-enter-window":
                            return this.Zu(t1);
                        default:
                            return !1;
                    }
                }, i.qu = function(t1) {
                    var i = this.yu, n = i.io();
                    return !(!i || !n || (t1.getLocation(kE), !n.hitTest(kE, t1.windowId) || (t1.type = "mouse-down", t1.bubbles = !0, i.dispatchEvent(t1), t1.propagationStopped = !0, 0)));
                }, i.Yu = function(t1) {
                    var i = this.yu, n = i.io();
                    return !(!i || !n || this.Fu || (t1.getLocation(kE), n.hitTest(kE, t1.windowId) ? (this.previousMouseIn || (bE && bE !== i && (t1.type = "mouse-leave", bE.dispatchEvent(t1), bE.eventProcessor.previousMouseIn = !1), bE = i, t1.type = "mouse-enter", i.dispatchEvent(t1), this.previousMouseIn = !0), t1.type = "mouse-move", t1.bubbles = !0, i.dispatchEvent(t1), t1.propagationStopped = !0, 0) : (this.previousMouseIn && (t1.type = "mouse-leave", i.dispatchEvent(t1), this.previousMouseIn = !1, bE = null), 1)));
                }, i.Ku = function(t1) {
                    var i = this.yu, n = i.io();
                    return !(!i || !n || (t1.getLocation(kE), !n.hitTest(kE, t1.windowId) || (t1.type = "mouse-up", t1.bubbles = !0, i.dispatchEvent(t1), t1.propagationStopped = !0, 0)));
                }, i.Ju = function(t1) {
                    var i = this.yu, n = i.io();
                    return !(!i || !n || (t1.getLocation(kE), !n.hitTest(kE, t1.windowId) || (t1.type = "mouse-wheel", t1.bubbles = !0, i.dispatchEvent(t1), t1.propagationStopped = !0, 0)));
                }, i.Qu = function(t1) {
                    return this.Fu = !0, this.previousMouseIn && (t1.type = "mouse-leave", this.yu.dispatchEvent(t1), this.previousMouseIn = !1, bE = null), !1;
                }, i.Zu = function() {
                    return this.Fu = !1, !1;
                }, i.no = function(t1) {
                    try {
                        switch(t1.type){
                            case "touch-start":
                                return this.so(t1);
                            case "touch-move":
                                return this.ro(t1);
                            case "touch-end":
                                return this.ho(t1);
                            case "touch-cancel":
                                return this.eo(t1);
                            default:
                                return !1;
                        }
                    } catch (t1) {
                        throw this.claimedTouchIdList.length = 0, t1;
                    }
                }, i.so = function(t1) {
                    var i = this.node, n = i.io();
                    return !(!i || !n || (t1.getLocation(kE), !n.hitTest(kE, t1.windowId) || (t1.type = "touch-start", t1.bubbles = !0, this.Lu = t1.touch, i.dispatchEvent(t1), 0)));
                }, i.ro = function(t1) {
                    var i = this.node;
                    return !(!i || !i.io() || (t1.type = "touch-move", t1.bubbles = !0, this.Lu = t1.touch, i.dispatchEvent(t1), 0));
                }, i.ho = function(t1) {
                    var i = this.node, n = i.io();
                    i && n && (t1.getLocation(kE), n.hitTest(kE, t1.windowId) ? t1.type = "touch-end" : t1.type = "touch-cancel", t1.bubbles = !0, i.dispatchEvent(t1), this.Lu = null);
                }, i.eo = function(t1) {
                    var i = this.node;
                    i && i.io() && (t1.type = "touch-cancel", t1.bubbles = !0, i.dispatchEvent(t1), this.Lu = null);
                }, s(t1, [
                    {
                        key: "isEnabled",
                        get: function get() {
                            return this.Bu;
                        }
                    },
                    {
                        key: "node",
                        get: function get() {
                            return this.yu;
                        }
                    }
                ]), t1;
            }();
            SE._maskComp = null, SE.callbacksInvoker = TE, A.NodeEventProcessor = SE;
            var IE = "transform-changed", RE = "active-changed", ME = new lt("Node");
            function CE(t1) {
                return t1 ? "string" == typeof t1 ? Qt(t1) : t1 : (rt(3804), null);
            }
            var NE = Os(), PE = Os(), DE = ir(), LE = ir(), BE = ir(), FE = new Ps, UE = lr(), xE = lr(), jE = [], GE = Symbol("ReserveContentsForAllSyncablePrefab"), HE = 0, VE = t1("cX", (sE = go("cc.Node"), rE = Zo(Ss), hE = Zo(HA), sE(((_E = function(t1) {
                h(n, t1);
                var i = n.prototype;
                function n(i) {
                    var _$n;
                    return void 0 === i && (i = "New Node"), (_$n = t1.call(this, i) || this)._parent = oE && oE(), _$n._children = fE && fE(), _$n._active = cE && cE(), _$n._components = aE && aE(), _$n._prefab = vE && vE(), _$n._scene = null, _$n._activeInHierarchy = !1, _$n._id = ME.getNewId(), _$n._eventProcessor = new SE(a(_$n)), _$n._eventMask = 0, _$n._siblingIndex = 0, _$n._originalSceneId = "", _$n._uiProps = new xA(a(_$n)), _$n._static = !1, _$n._lpos = lE && lE(), _$n._lrot = dE && dE(), _$n._lscale = wE && wE(), _$n._mobility = gE && gE(), _$n._layer = pE && pE(), _$n._euler = yE && yE(), _$n._transformFlags = 15, _$n._eulerDirty = !1, _$n._flagChangeVersion = 0, _$n._hasChangedFlags = 0, _$n._pos = new Ss, _$n._rot = new qs, _$n._scale = new Ss(1, 1, 1), _$n._mat = new cr, _$n;
                }
                return i.uo = function(t1) {
                    this._activeInHierarchy = t1;
                }, n.oo = function(t1) {
                    t1._updateScene();
                }, n._incSkewCompCount = function() {}, n._decSkewCompCount = function() {}, n._findComponent = function(t1, i) {
                    var _$s = t1._components;
                    if (i._sealed) for(var _$r = 0; _$r < _$s.length; ++_$r){
                        var _$h = _$s[_$r];
                        if (_$h.constructor === i) return _$h;
                    }
                    else for(var e = 0; e < _$s.length; ++e){
                        var u = _$s[e];
                        if (_instanceof(u, i)) return u;
                    }
                    return null;
                }, n.fo = function(t1, i, n) {
                    var _$r = t1._components;
                    if (i._sealed) for(var _$h = 0; _$h < _$r.length; ++_$h){
                        var e = _$r[_$h];
                        e.constructor === i && n.push(e);
                    }
                    else for(var u = 0; u < _$r.length; ++u){
                        var o = _$r[u];
                        _instanceof(o, i) && n.push(o);
                    }
                }, n.co = function(t1, i) {
                    for(var _$s = 0; _$s < t1.length; ++_$s){
                        var _$r = t1[_$s], _$h = n._findComponent(_$r, i);
                        if (_$h || _$r._children.length > 0 && (_$h = n.co(_$r._children, i))) return _$h;
                    }
                    return null;
                }, n.ao = function(t1, i, s) {
                    for(var _$r = 0; _$r < t1.length; ++_$r){
                        var _$h = t1[_$r];
                        n.fo(_$h, i, s), _$h._children.length > 0 && n.ao(_$h._children, i, s);
                    }
                }, i.vo = function() {
                    return this._components;
                }, i._updateScene = function() {
                    null == this._parent ? rt(1640, this.name, this.uuid) : this._scene = this._parent._scene;
                }, i.attr = function(t1) {
                    Ft(this, t1);
                }, i.getParent = function() {
                    return this._parent;
                }, i.lo = function(t1) {
                    this._parent = t1;
                }, i.setParent = function(t1, i) {
                    if (void 0 === i && (i = !1), i && this.updateWorldTransform(), this._parent !== t1) {
                        var _$n = this._parent;
                        if (this._parent = t1, this._siblingIndex = 0, this._onSetParent(_$n, i), this.emit && this.emit("parent-changed", _$n), _$n && !(128 & _$n._objFlags)) {
                            var _$r = _$n._children.indexOf(this);
                            _$n._children.splice(_$r, 1), _$n._updateSiblingIndex(), _$n.emit && _$n.emit("child-removed", this);
                        }
                        t1 && (t1._children.push(this), this._siblingIndex = t1._children.length - 1, t1.emit && t1.emit("child-added", this)), this._onHierarchyChanged(_$n);
                    }
                }, i.getChildByUuid = function(t1) {
                    if (!t1) return V("Invalid uuid"), null;
                    for(var i = this._children, _$n = 0, _$s = i.length; _$n < _$s; _$n++)if (i[_$n]._id === t1) return i[_$n];
                    return null;
                }, i.getChildByName = function(t1) {
                    if (!t1) return V("Invalid name"), null;
                    for(var i = this._children, _$n = 0, _$s = i.length; _$n < _$s; _$n++)if (i[_$n]._name === t1) return i[_$n];
                    return null;
                }, i.getChildByPath = function(t1) {
                    for(var i, _$n = t1.split("/"), _$s = this, _$h = 0; _$h < _$n.length; ++_$h)if (0 !== (i = function r() {
                        var _$t = _$n[_$h];
                        if (0 === _$t.length) return 0;
                        var i = _$s.children.find(function(i) {
                            return i.name === _$t;
                        });
                        if (!i) return {
                            v: null
                        };
                        _$s = i;
                    }()) && i) return i.v;
                    return _$s;
                }, i.addChild = function(t1) {
                    t1.setParent(this);
                }, i.insertChild = function(t1, i) {
                    t1.setParent(this), t1.setSiblingIndex(i);
                }, i.getSiblingIndex = function() {
                    return this._siblingIndex;
                }, i.setSiblingIndex = function(t1) {
                    if (this._parent) if (256 & this._parent._objFlags) rt(3821);
                    else {
                        var i = this._parent._children;
                        t1 = t1 >= 0 ? t1 : i.length + t1;
                        var _$n = i.indexOf(this);
                        t1 !== _$n && (i.splice(_$n, 1), t1 < i.length ? i.splice(t1, 0, this) : i.push(this), this._parent._updateSiblingIndex(), this._onSiblingIndexChanged && this._onSiblingIndexChanged(t1), this._eventProcessor.onUpdatingSiblingIndex());
                    }
                }, i.walk = function(t1, i) {
                    var _$s = 1, _$r = null, _$h = null, e = 0, u = n.do[n.wo];
                    u || (u = [], n.do.push(u)), n.wo++, u.length = 0, u[0] = this;
                    for(var o = null, f = !1; _$s;)if (_$h = u[--_$s]) if (!f && t1 ? t1(_$h) : f && i && i(_$h), u[_$s] = null, f) {
                        if (o === this._parent) break;
                        if (f = !1, _$r) {
                            if (_$r[++e]) u[_$s] = _$r[e], _$s++;
                            else if (o && (u[_$s] = o, _$s++, f = !0, o._parent ? (e = (_$r = o._parent._children).indexOf(o), o = o._parent) : (o = null, _$r = null), e < 0)) break;
                        }
                    } else _$h._children.length > 0 ? (o = _$h, _$r = _$h._children, e = 0, u[_$s] = _$r[e], _$s++) : (u[_$s] = _$h, _$s++, f = !0);
                    u.length = 0, n.wo--;
                }, i.removeFromParent = function() {
                    this._parent && this._parent.removeChild(this);
                }, i.removeChild = function(t1) {
                    this._children.indexOf(t1) > -1 && (t1.parent = null);
                }, i.removeAllChildren = function() {
                    for(var _$t = this._children, i = _$t.length - 1; i >= 0; i--){
                        var _$n = _$t[i];
                        _$n && (_$n.parent = null);
                    }
                    this._children.length = 0;
                }, i.isChildOf = function(t1) {
                    var i = this;
                    do {
                        if (i === t1) return !0;
                        i = i._parent;
                    }while (i);
                    return !1;
                }, i.getComponent = function(t1) {
                    var i = CE(t1);
                    return i ? n._findComponent(this, i) : null;
                }, i.getComponents = function(t1) {
                    var i = CE(t1), _$s = [];
                    return i && n.fo(this, i, _$s), _$s;
                }, i.getComponentInChildren = function(t1) {
                    var i = CE(t1);
                    return i ? n.co(this._children, i) : null;
                }, i.getComponentsInChildren = function(t1) {
                    var i = CE(t1), _$s = [];
                    return i && (n.fo(this, i, _$s), n.ao(this._children, i, _$s)), _$s;
                }, i.addComponent = function(t1) {
                    if ("string" == typeof t1) {
                        if (!(i = Qt(t1))) throw A._RF.peek() && rt(3808, t1), TypeError(ot(3807, t1));
                    } else {
                        if (!t1) throw TypeError(ot(3804));
                        i = t1;
                    }
                    if ("function" != typeof i) throw TypeError(ot(3809));
                    if (!jt(i, A.Component)) throw TypeError(ot(3810));
                    var i, _$n = i._requireComponent;
                    if (_$n) if (Array.isArray(_$n)) for(var _$s = 0; _$s < _$n.length; _$s++){
                        var _$r = _$n[_$s];
                        this.getComponent(_$r) || this.addComponent(_$r);
                    }
                    else this.getComponent(_$n) || this.addComponent(_$n);
                    var e = new i;
                    return e.node = this, this._components.push(e), this.emit("component-added", e), this._activeInHierarchy && A.director._nodeActivator.activateComp(e), e;
                }, i.removeComponent = function(t1) {
                    if (t1) {
                        var i = null;
                        (i = _instanceof(t1, Yg) ? t1 : this.getComponent(t1)) && i.destroy();
                    } else rt(3813);
                }, i.on = function(t1, i, n, s) {
                    switch(void 0 === s && (s = !1), t1){
                        case IE:
                            this._eventMask |= 1;
                            break;
                        case RE:
                            this._eventMask |= 2;
                    }
                    this._eventProcessor.on(t1, i, n, s);
                }, i.off = function(t1, i, n, s) {
                    if (void 0 === s && (s = !1), this._eventProcessor.off(t1, i, n, s), !this._eventProcessor.hasEventListener(t1)) switch(t1){
                        case IE:
                            this._eventMask &= -2;
                            break;
                        case RE:
                            this._eventMask &= -3;
                    }
                }, i.once = function(t1, i, n, s) {
                    this._eventProcessor.once(t1, i, n, s);
                }, i.emit = function(t1, i, n, s, r, h) {
                    this._eventProcessor.emit(t1, i, n, s, r, h);
                }, i.dispatchEvent = function(t1) {
                    this._eventProcessor.dispatchEvent(t1);
                }, i.hasEventListener = function(t1, i, n) {
                    return this._eventProcessor.hasEventListener(t1, i, n);
                }, i.targetOff = function(t1) {
                    this._eventProcessor.targetOff(t1), 1 & this._eventMask && !this._eventProcessor.hasEventListener(IE) && (this._eventMask &= -2), 2 & this._eventMask && !this._eventProcessor.hasEventListener(RE) && (this._eventMask &= -3);
                }, i.destroy = function() {
                    return !!t1.prototype.destroy.call(this) && (this.active = !1, !0);
                }, i.destroyAllChildren = function() {
                    for(var _$t = this._children, i = 0; i < _$t.length; ++i)_$t[i].destroy();
                }, i._removeComponent = function(t1) {
                    if (t1) {
                        if (!(128 & this._objFlags)) {
                            var i = this._components.indexOf(t1);
                            -1 !== i ? (this._components.splice(i, 1), this.emit("component-removed", t1)) : t1.node !== this && rt(3815);
                        }
                    } else rt(3814);
                }, i._updateSiblingIndex = function() {
                    for(var _$t = 0; _$t < this._children.length; ++_$t)this._children[_$t]._siblingIndex = _$t;
                    this.emit("sibling-order-changed");
                }, i._instantiate = function(t1, i) {
                    return void 0 === i && (i = !1), t1 || (t1 = A.instantiate._clone(this, this)), t1._prefab, t1._parent = null, t1._onBatchCreated(i), t1;
                }, i._onHierarchyChangedBase = function() {
                    var _$t = this._parent;
                    !this._persistNode || _instanceof(_$t, A.Scene) || A.game.removePersistRootNode(this);
                    var i = this._active && !(!_$t || !_$t._activeInHierarchy);
                    this._activeInHierarchy !== i && A.director._nodeActivator.activateNode(this, i);
                }, i._onPreDestroyBase = function() {
                    this._objFlags |= 128;
                    var _$t = this._parent, i = !!_$t && !!(128 & _$t._objFlags);
                    if (this._persistNode && A.game.removePersistRootNode(this), !i && _$t) {
                        this.emit("parent-changed", this);
                        var _$n = _$t._children.indexOf(this);
                        _$t._children.splice(_$n, 1), this._siblingIndex = 0, _$t._updateSiblingIndex(), _$t.emit && _$t.emit("child-removed", this);
                    }
                    this.emit("node-destroyed", this), this._eventProcessor.destroy();
                    for(var _$s = this._children, _$r = 0; _$r < _$s.length; ++_$r)_$s[_$r]._destroyImmediate();
                    for(var _$h = this._components, e = 0; e < _$h.length; ++e)_$h[e]._destroyImmediate();
                    return i;
                }, n.isNode = function(t1) {
                    return _instanceof(t1, n) && (t1.constructor === n || !_instanceof(t1, A.Scene));
                }, i._onPreDestroy = function() {
                    return this._onPreDestroyBase();
                }, i[gf] = function(t1) {
                    t1.writeThis();
                }, i._onSetParent = function(t1, i) {
                    void 0 === i && (i = !1);
                    var _$r = this._parent;
                    if (_$r && (null != t1 && t1._scene === _$r._scene || null == _$r._scene || this.walk(n.oo)), i) {
                        if (_$r) if (_$r.updateWorldTransform(), Fn(cr.determinant(_$r._mat), 0, Ln)) nt(14300), this._transformFlags |= 7, this.updateWorldTransform();
                        else {
                            var _$h = _$r._mat;
                            cr.multiply(UE, cr.invert(UE, _$h), this._mat), cr.toSRT(UE, this._lrot, this._lpos, this._lscale);
                        }
                        else Ss.copy(this._lpos, this._pos), qs.copy(this._lrot, this._rot), Ss.copy(this._lscale, this._scale);
                        this._eulerDirty = !0;
                    }
                    this.invalidateChildren(7);
                }, i._onHierarchyChanged = function(t1) {
                    this.eventProcessor.reattach(), this._onHierarchyChangedBase(t1);
                }, i._onBatchCreated = function(t1) {
                    2 & this._eventMask && (this._activeInHierarchy || this.emit(RE, this, !1)), this.hasChangedFlags = 7, this._children.forEach(function(i, n) {
                        i._siblingIndex = n, i._onBatchCreated(t1);
                    });
                }, i._onBeforeSerialize = function() {
                    this.eulerAngles;
                }, i._onPostActivated = function(t1) {
                    2 & this._eventMask && this.emit(RE, this, t1);
                    var _$n = this._eventProcessor;
                    if (_$n.isEnabled === t1 && SE.callbacksInvoker.emit(2), _$n.setEnabled(t1), t1) {
                        this.invalidateChildren(7);
                        var _$s = this._uiProps && this._uiProps.uiComp;
                        _$s && (_$s.setNodeDirty(), _$s.setTextureDirty(), _$s.po());
                    }
                }, i.translate = function(t1, i) {
                    var _$n = i || 0;
                    if (0 === _$n) Ss.transformQuat(NE, t1, this._lrot), this._lpos.x += NE.x, this._lpos.y += NE.y, this._lpos.z += NE.z;
                    else if (1 === _$n) if (this._parent) {
                        qs.invert(DE, this._parent.worldRotation), Ss.transformQuat(NE, t1, DE);
                        var _$s = this.worldScale;
                        this._lpos.x += NE.x / _$s.x, this._lpos.y += NE.y / _$s.y, this._lpos.z += NE.z / _$s.z;
                    } else this._lpos.x += t1.x, this._lpos.y += t1.y, this._lpos.z += t1.z;
                    this.invalidateChildren(1), 1 & this._eventMask && this.emit(IE, 1);
                }, i.rotate = function(t1, i) {
                    var _$n = i || 0;
                    if (qs.normalize(DE, t1), 0 === _$n) qs.multiply(this._lrot, this._lrot, DE);
                    else if (1 === _$n) {
                        var _$s = this.worldRotation;
                        qs.multiply(LE, DE, _$s), qs.invert(DE, _$s), qs.multiply(LE, DE, LE), qs.multiply(this._lrot, this._lrot, LE);
                    }
                    this._eulerDirty = !0, this.invalidateChildren(2), 1 & this._eventMask && this.emit(IE, 2);
                }, i.lookAt = function(t1, i) {
                    this.getWorldPosition(NE), Ss.subtract(NE, NE, t1), Ss.normalize(NE, NE), qs.fromViewUp(DE, NE, i), this.setWorldRotation(DE);
                }, i.invalidateChildren = function(t1) {
                    var i, _$n, _$s = 0, _$r = 0, _$h = 0, e = 0, u = 1 | t1;
                    for(jE[0] = this; _$s >= 0;){
                        if (e = (i = jE[_$s--]).hasChangedFlags, i.isValid && !i.isSkipTransformUpdate && (i._transformFlags & e & t1) !== t1) for(i._transformFlags |= t1, i.hasChangedFlags = e | t1, _$h = (_$n = i._children).length, _$r = 0; _$r < _$h; _$r++)jE[++_$s] = _$n[_$r];
                        t1 = u;
                    }
                }, i.updateWorldTransform = function() {
                    if (this._transformFlags) {
                        for(var _$t, i, _$n, _$s = this, _$r = 0; _$s && _$s._transformFlags;)jE[_$r++] = _$s, _$s = _$s._parent;
                        for(var _$h = 0, e = 0, u = 0; _$r;){
                            if (i = (_$t = jE[--_$r])._mat, _$n = _$t._pos, e = 1 & (_$h |= _$t._transformFlags), u = 14 & _$h, _$s) {
                                if (e && !u && (Ss.transformMat4(_$n, _$t._lpos, _$s._mat), i.m12 = _$n.x, i.m13 = _$n.y, i.m14 = _$n.z), u) {
                                    cr.fromSRT(UE, _$t._lrot, _$t._lpos, _$t._lscale), cr.multiply(i, _$s._mat, UE);
                                    var f = 2 & _$h ? _$t._rot : null;
                                    cr.toSRT(i, f, _$n, _$t._scale);
                                }
                            } else e && (Ss.copy(_$n, _$t._lpos), i.m12 = _$n.x, i.m13 = _$n.y, i.m14 = _$n.z), u && (2 & _$h && qs.copy(_$t._rot, _$t._lrot), 4 & _$h && Ss.copy(_$t._scale, _$t._lscale), cr.fromSRT(i, _$t._rot, _$t._pos, _$t._scale));
                            _$t._transformFlags = 0, _$s = _$t;
                        }
                    }
                }, i.setPosition = function(t1, i, n) {
                    var _$s = this._lpos;
                    void 0 === i ? Ss.copy(_$s, t1) : (void 0 === n && (n = _$s.z), Ss.set(_$s, t1, i, n)), this.invalidateChildren(1), 1 & this._eventMask && this.emit(IE, 1);
                }, i.getPosition = function(t1) {
                    return t1 ? Ss.set(t1, this._lpos.x, this._lpos.y, this._lpos.z) : Ss.copy(new Ss, this._lpos);
                }, i.setRotation = function(t1, i, n, s) {
                    void 0 === i ? qs.copy(this._lrot, t1) : qs.set(this._lrot, t1, i, n, s), this._eulerDirty = !0, this.invalidateChildren(2), 1 & this._eventMask && this.emit(IE, 2);
                }, i.setRotationFromEuler = function(t1, i, n) {
                    if (void 0 === i) Ss.copy(this._euler, t1), qs.fromEuler(this._lrot, t1.x, t1.y, t1.z);
                    else {
                        var _$s = void 0 === n ? this._euler.z : n;
                        Ss.set(this._euler, t1, i, _$s), qs.fromEuler(this._lrot, t1, i, _$s);
                    }
                    this._eulerDirty = !1, this.invalidateChildren(2), 1 & this._eventMask && this.emit(IE, 2);
                }, i.getRotation = function(t1) {
                    return t1 ? qs.set(t1, this._lrot.x, this._lrot.y, this._lrot.z, this._lrot.w) : qs.copy(new qs, this._lrot);
                }, i.setScale = function(t1, i, n) {
                    var _$s = this._lscale;
                    void 0 === i ? Ss.copy(_$s, t1) : (void 0 === n && (n = _$s.z), Ss.set(_$s, t1, i, n)), this.invalidateChildren(4), 1 & this._eventMask && this.emit(IE, 4);
                }, i.getScale = function(t1) {
                    return t1 ? Ss.set(t1, this._lscale.x, this._lscale.y, this._lscale.z) : Ss.copy(new Ss, this._lscale);
                }, i.inverseTransformPoint = function(t1, i) {
                    Ss.copy(t1, i);
                    for(var _$n = this, _$s = 0; _$n._parent;)jE[_$s++] = _$n, _$n = _$n._parent;
                    for(; _$s >= 0;)Ss.transformInverseRTS(t1, t1, _$n._lrot, _$n._lpos, _$n._lscale), _$n = jE[--_$s];
                    return t1;
                }, i.setWorldPosition = function(t1, i, n) {
                    var _$s = this._pos;
                    void 0 === i ? Ss.copy(_$s, t1) : Ss.set(_$s, t1, i, n);
                    var _$r = this._parent, _$h = this._lpos;
                    _$r ? (_$r.updateWorldTransform(), Ss.transformMat4(_$h, _$s, cr.invert(UE, _$r._mat))) : Ss.copy(_$h, _$s), this.invalidateChildren(1), 1 & this._eventMask && this.emit(IE, 1);
                }, i.getWorldPosition = function(t1) {
                    return this.updateWorldTransform(), t1 ? Ss.copy(t1, this._pos) : Ss.copy(new Ss, this._pos);
                }, i.setWorldRotation = function(t1, i, n, s) {
                    var _$r = this._rot;
                    void 0 === i ? qs.copy(_$r, t1) : qs.set(_$r, t1, i, n, s), this._parent ? (this._parent.updateWorldTransform(), qs.multiply(this._lrot, qs.conjugate(this._lrot, this._parent._rot), _$r)) : qs.copy(this._lrot, _$r), this._eulerDirty = !0, this.invalidateChildren(2), 1 & this._eventMask && this.emit(IE, 2);
                }, i.setWorldRotationFromEuler = function(t1, i, n) {
                    qs.fromEuler(DE, t1, i, n), this.setWorldRotation(DE);
                }, i.getWorldRotation = function(t1) {
                    return this.updateWorldTransform(), t1 ? qs.copy(t1, this._rot) : qs.copy(new qs, this._rot);
                }, i.setWorldScale = function(t1, i, n) {
                    var _$r = this._parent;
                    _$r && this.updateWorldTransform();
                    var _$h = this._scale;
                    void 0 === i ? Ss.copy(_$h, t1) : Ss.set(_$h, t1, i, n);
                    var e = 0;
                    if (_$r) {
                        var u = this._mat;
                        this._uiProps.pu && (cr.fromSRT(UE, this._lrot, this._lpos, this._lscale), cr.multiply(u, _$r._mat, UE));
                        var o = Ss.set(PE, u.m00, u.m01, u.m02).length(), f = Ss.set(PE, u.m04, u.m05, u.m06).length(), _$c = Ss.set(PE, u.m08, u.m09, u.m10).length();
                        0 === o ? (NE.x = _$h.x, u.m00 = 1, e = 2) : NE.x = _$h.x / o, 0 === f ? (NE.y = _$h.y, u.m05 = 1, e = 2) : NE.y = _$h.y / f, 0 === _$c ? (NE.z = _$h.z, u.m10 = 1, e = 2) : NE.z = _$h.z / _$c, cr.scale(UE, u, NE), cr.multiply(xE, cr.invert(xE, _$r._mat), UE), Ps.fromQuat(FE, qs.conjugate(BE, this._lrot)), Ps.multiplyMat4(FE, FE, xE);
                        var a = this._lscale;
                        a.x = Ss.set(NE, FE.m00, FE.m01, FE.m02).length(), a.y = Ss.set(NE, FE.m03, FE.m04, FE.m05).length(), a.z = Ss.set(NE, FE.m06, FE.m07, FE.m08).length(), 0 !== a.x && 0 !== a.y && 0 !== a.z || (e = 2);
                    } else Ss.copy(this._lscale, _$h);
                    this.invalidateChildren(4 | e), 1 & this._eventMask && this.emit(IE, 4 | e);
                }, i.getWorldScale = function(t1) {
                    return this.updateWorldTransform(), t1 ? Ss.copy(t1, this._scale) : Ss.copy(new Ss, this._scale);
                }, i.getWorldMatrix = function(t1) {
                    this.updateWorldTransform();
                    var i = t1 || new cr;
                    return cr.copy(i, this._mat);
                }, i.getWorldRS = function(t1) {
                    this.updateWorldTransform();
                    var i = t1 || new cr;
                    return cr.copy(i, this._mat), i.m12 = 0, i.m13 = 0, i.m14 = 0, i;
                }, i.getWorldRT = function(t1) {
                    this.updateWorldTransform();
                    var i = t1 || new cr;
                    return cr.fromRT(i, this._rot, this._pos);
                }, i.setRTS = function(t1, i, n) {
                    var _$s = 0;
                    t1 && (_$s |= 2, void 0 !== t1.w ? (qs.copy(this._lrot, t1), this._eulerDirty = !0) : (Ss.copy(this._euler, t1), qs.fromEuler(this._lrot, t1.x, t1.y, t1.z), this._eulerDirty = !1)), i && (Ss.copy(this._lpos, i), _$s |= 1), n && (Ss.copy(this._lscale, n), _$s |= 4), _$s && (this.invalidateChildren(_$s), 1 & this._eventMask && this.emit(IE, _$s));
                }, i.isTransformDirty = function() {
                    return 0 !== this._transformFlags;
                }, i.pauseSystemEvents = function(t1) {
                    this._eventProcessor.setEnabled(!1, t1);
                }, i.resumeSystemEvents = function(t1) {
                    this._eventProcessor.setEnabled(!0, t1);
                }, n.resetHasChangedFlags = function() {
                    HE += 1;
                }, n.clearNodeArray = function() {
                    n.yo < n._o ? n.yo++ : (n.yo = 0, jE.length = 0);
                }, i.getPathInHierarchy = function() {
                    for(var _$t = this.name, i = this.parent; i && !_instanceof(i, A.Scene);)_$t = i.name + "/" + _$t, i = i.parent;
                    return _$t;
                }, i.io = function() {
                    return this._uiProps.uiTransformComp;
                }, s(n, [
                    {
                        key: "components",
                        get: function get() {
                            return this._components;
                        }
                    },
                    {
                        key: "_persistNode",
                        get: function get() {
                            return (64 & this._objFlags) > 0;
                        },
                        set: function set(t1) {
                            t1 ? this._objFlags |= 64 : this._objFlags &= -65;
                        }
                    },
                    {
                        key: "name",
                        get: function get() {
                            return this._name;
                        },
                        set: function set(t1) {
                            this._name = t1;
                        }
                    },
                    {
                        key: "uuid",
                        get: function get() {
                            return this._id;
                        }
                    },
                    {
                        key: "children",
                        get: function get() {
                            return this._children;
                        }
                    },
                    {
                        key: "active",
                        get: function get() {
                            return this._active;
                        },
                        set: function set(t1) {
                            if (t1 = !!t1, this._active !== t1) {
                                this._active = t1;
                                var i = this._parent;
                                i && i._activeInHierarchy && A.director._nodeActivator.activateNode(this, t1);
                            }
                        }
                    },
                    {
                        key: "activeInHierarchy",
                        get: function get() {
                            return this._activeInHierarchy;
                        }
                    },
                    {
                        key: "parent",
                        get: function get() {
                            return this._parent;
                        },
                        set: function set(t1) {
                            this.setParent(t1);
                        }
                    },
                    {
                        key: "scene",
                        get: function get() {
                            return this._scene;
                        }
                    },
                    {
                        key: "eventProcessor",
                        get: function get() {
                            return this._eventProcessor;
                        }
                    },
                    {
                        key: "prefab",
                        get: function get() {
                            return this._prefab;
                        }
                    },
                    {
                        key: "id",
                        set: function set(t1) {
                            this._id = t1;
                        }
                    },
                    {
                        key: "siblingIndex",
                        get: function get() {
                            return this._siblingIndex;
                        },
                        set: function set(t1) {
                            this._siblingIndex = t1;
                        }
                    },
                    {
                        key: "position",
                        get: function get() {
                            return this._lpos;
                        },
                        set: function set(t1) {
                            this.setPosition(t1);
                        }
                    },
                    {
                        key: "x",
                        get: function get() {
                            return this._lpos.x;
                        },
                        set: function set(t1) {
                            this.setPosition(t1, this._lpos.y, this._lpos.z);
                        }
                    },
                    {
                        key: "y",
                        get: function get() {
                            return this._lpos.y;
                        },
                        set: function set(t1) {
                            this.setPosition(this._lpos.x, t1, this._lpos.z);
                        }
                    },
                    {
                        key: "z",
                        get: function get() {
                            return this._lpos.z;
                        },
                        set: function set(t1) {
                            this.setPosition(this._lpos.x, this._lpos.y, t1);
                        }
                    },
                    {
                        key: "worldPosition",
                        get: function get() {
                            return this.updateWorldTransform(), this._pos;
                        },
                        set: function set(t1) {
                            this.setWorldPosition(t1);
                        }
                    },
                    {
                        key: "worldPositionX",
                        get: function get() {
                            return this.updateWorldTransform(), this._pos.x;
                        },
                        set: function set(t1) {
                            this.setWorldPosition(t1, this._pos.y, this._pos.z);
                        }
                    },
                    {
                        key: "worldPositionY",
                        get: function get() {
                            return this.updateWorldTransform(), this._pos.y;
                        },
                        set: function set(t1) {
                            this.setWorldPosition(this._pos.x, t1, this._pos.z);
                        }
                    },
                    {
                        key: "worldPositionZ",
                        get: function get() {
                            return this.updateWorldTransform(), this._pos.z;
                        },
                        set: function set(t1) {
                            this.setWorldPosition(this._pos.x, this._pos.y, t1);
                        }
                    },
                    {
                        key: "rotation",
                        get: function get() {
                            return this._lrot;
                        },
                        set: function set(t1) {
                            this.setRotation(t1);
                        }
                    },
                    {
                        key: "eulerAngles",
                        get: function get() {
                            return this._eulerDirty && (qs.toEuler(this._euler, this._lrot), this._eulerDirty = !1), this._euler;
                        },
                        set: function set(t1) {
                            this.setRotationFromEuler(t1.x, t1.y, t1.z);
                        }
                    },
                    {
                        key: "angle",
                        get: function get() {
                            return this.eulerAngles.z;
                        },
                        set: function set(t1) {
                            Ss.set(this._euler, 0, 0, t1), qs.fromAngleZ(this._lrot, t1), this._eulerDirty = !1, this.invalidateChildren(2), 1 & this._eventMask && this.emit(IE, 2);
                        }
                    },
                    {
                        key: "worldRotation",
                        get: function get() {
                            return this.updateWorldTransform(), this._rot;
                        },
                        set: function set(t1) {
                            this.setWorldRotation(t1);
                        }
                    },
                    {
                        key: "scale",
                        get: function get() {
                            return this._lscale;
                        },
                        set: function set(t1) {
                            this.setScale(t1);
                        }
                    },
                    {
                        key: "worldScale",
                        get: function get() {
                            return this.updateWorldTransform(), this._scale;
                        },
                        set: function set(t1) {
                            this.setWorldScale(t1);
                        }
                    },
                    {
                        key: "matrix",
                        set: function set(t1) {
                            cr.toSRT(t1, this._lrot, this._lpos, this._lscale), this.invalidateChildren(7), this._eulerDirty = !0, 1 & this._eventMask && this.emit(IE, 7);
                        }
                    },
                    {
                        key: "worldMatrix",
                        get: function get() {
                            return this.updateWorldTransform(), this._mat;
                        }
                    },
                    {
                        key: "forward",
                        get: function get() {
                            return Ss.transformQuat(new Ss, Ss.FORWARD, this.worldRotation);
                        },
                        set: function set(t1) {
                            var i = t1.length();
                            Ss.multiplyScalar(NE, t1, -1 / i), qs.fromViewUp(DE, NE), this.setWorldRotation(DE);
                        }
                    },
                    {
                        key: "up",
                        get: function get() {
                            return Ss.transformQuat(new Ss, Ss.UP, this.worldRotation);
                        }
                    },
                    {
                        key: "right",
                        get: function get() {
                            return Ss.transformQuat(new Ss, Ss.RIGHT, this.worldRotation);
                        }
                    },
                    {
                        key: "mobility",
                        get: function get() {
                            return this._mobility;
                        },
                        set: function set(t1) {
                            this._mobility !== t1 && (this._mobility = t1, this.emit("mobility-changed"));
                        }
                    },
                    {
                        key: "layer",
                        get: function get() {
                            return this._layer;
                        },
                        set: function set(t1) {
                            if (this._layer !== t1) {
                                this._layer = t1;
                                var _$n = this._uiProps && this._uiProps.uiComp;
                                _$n && (_$n.setNodeDirty(), _$n.po()), this.emit("layer-changed", this._layer);
                            }
                        }
                    },
                    {
                        key: "flagChangedVersion",
                        get: function get() {
                            return this._flagChangeVersion;
                        }
                    },
                    {
                        key: "hasChangedFlags",
                        get: function get() {
                            return this._flagChangeVersion === HE ? this._hasChangedFlags : 0;
                        },
                        set: function set(t1) {
                            this._flagChangeVersion = HE, this._hasChangedFlags = t1;
                        }
                    },
                    {
                        key: "isSkipTransformUpdate",
                        get: function get() {
                            return !!(16777216 & this._objFlags);
                        },
                        set: function set(t1) {
                            t1 ? this._objFlags |= 16777216 : this._objFlags &= -16777217;
                        }
                    }
                ]), n;
            }(Wh)).mo = ME, _E.do = [
                []
            ], _E.wo = 0, _E.EventType = VA, _E.NodeSpace = jA, _E.TransformDirtyBit = GA, _E.TransformBit = GA, _E.reserveContentsForAllSyncablePrefabTag = GE, _E.yo = 0, _E._o = 1e3, y(_E.prototype, "_persistNode", [
                mo
            ], Object.getOwnPropertyDescriptor(_E.prototype, "_persistNode"), _E.prototype), oE = ho(_E.prototype, "_parent", [
                Ro
            ], function() {
                return null;
            }), fE = ho(_E.prototype, "_children", [
                Ro
            ], function() {
                return [];
            }), cE = ho(_E.prototype, "_active", [
                Ro
            ], function() {
                return !0;
            }), aE = ho(_E.prototype, "_components", [
                Ro
            ], function() {
                return [];
            }), vE = ho(_E.prototype, "_prefab", [
                Ro
            ], function() {
                return null;
            }), lE = ho(_E.prototype, "_lpos", [
                Ro
            ], function() {
                return new Ss;
            }), dE = ho(_E.prototype, "_lrot", [
                Ro
            ], function() {
                return new qs;
            }), wE = ho(_E.prototype, "_lscale", [
                Ro
            ], function() {
                return new Ss(1, 1, 1);
            }), gE = ho(_E.prototype, "_mobility", [
                Ro
            ], function() {
                return HA.Static;
            }), pE = ho(_E.prototype, "_layer", [
                Ro
            ], function() {
                return My.Enum.DEFAULT;
            }), yE = ho(_E.prototype, "_euler", [
                Ro
            ], function() {
                return new Ss;
            }), y(_E.prototype, "eulerAngles", [
                rE
            ], Object.getOwnPropertyDescriptor(_E.prototype, "eulerAngles"), _E.prototype), y(_E.prototype, "mobility", [
                hE
            ], Object.getOwnPropertyDescriptor(_E.prototype, "mobility"), _E.prototype), _E)) || _E));
            A.Node = VE;
            var WE, zE, $E, XE, qE, KE, JE, QE, ZE, tT, iT, nT, sT, rT, hT, eT, uT, oT, fT, cT, aT, vT, lT, dT, wT, gT, pT, _T, mT, bT, kT, AT, ET, TT, ST, OT, IT, RT, MT, CT, NT, PT, DT, LT, BT, FT, UT, GT, HT, VT, WT, zT, $T, XT, qT, YT, KT, JT, QT, ZT, tS, iS, nS, sS, hS, eS, uS, oS, fS, cS, aS, vS, lS, dS, wS, pS, yS, _S, mS, bS, kS, AS, ES, SS, OS, IS, RS, MS, CS, PS, DS, LS, BS, FS, US, xS, jS, HS, VS, WS, zS, $S, XS, qS, YS, KS, JS, QS, ZS, iO, nO, sO, rO, hO, eO, uO, oO, fO, cO, aO, vO = gi({
                DEFAULT: 0,
                LINEAR: 1
            }), lO = function() {
                function t1() {
                    this._toneMappingType = vO.DEFAULT, this._activated = !1;
                }
                var i = t1.prototype;
                return i.initialize = function(t1) {
                    this._toneMappingType = t1.toneMappingType;
                }, i.activate = function() {
                    this._updatePipeline(), this._activated = !0;
                }, i._updatePipeline = function() {
                    var _$t = A.director.root;
                    _$t.pipeline.macros.CC_TONE_MAPPING_TYPE = this._toneMappingType, this._activated && _$t.onGlobalPipelineStateChanged();
                }, s(t1, [
                    {
                        key: "toneMappingType",
                        get: function get() {
                            return this._toneMappingType;
                        },
                        set: function set(t1) {
                            this._toneMappingType = t1, this._updatePipeline();
                        }
                    }
                ]), t1;
            }(), dO = new Ss(0, 1, 0), wO = new Ss, gO = new Hr, pO = new Yr, yO = new qs, _O = function _O(t1) {
                var i = 1 / Math.max(Math.max(Math.max(t1.x, t1.y), t1.z), 1e-4);
                i < 1 && (t1.x *= i, t1.y *= i, t1.z *= i);
            }, mO = t1("d7", (WE = go("cc.AmbientInfo"), zE = Zo(Yi), $E = Mo("_skyColor"), XE = Mo("_skyIllum"), qE = Mo("_groundAlbedo"), WE((y((KE = function() {
                function t1() {
                    this._skyColorHDR = JE && JE(), this._skyIllumHDR = QE && QE(), this._groundAlbedoHDR = ZE && ZE(), this._skyColorLDR = tT && tT(), this._skyIllumLDR = iT && iT(), this._groundAlbedoLDR = nT && nT(), this._resource = null;
                }
                return t1.prototype.activate = function(t1) {
                    this._resource = t1, t1.initialize(this);
                }, s(t1, [
                    {
                        key: "skyColorHDR",
                        get: function get() {
                            return this._skyColorHDR;
                        }
                    },
                    {
                        key: "groundAlbedoHDR",
                        get: function get() {
                            return this._groundAlbedoHDR;
                        }
                    },
                    {
                        key: "skyIllumHDR",
                        get: function get() {
                            return this._skyIllumHDR;
                        }
                    },
                    {
                        key: "skyColorLDR",
                        get: function get() {
                            return this._skyColorLDR;
                        }
                    },
                    {
                        key: "groundAlbedoLDR",
                        get: function get() {
                            return this._groundAlbedoLDR;
                        }
                    },
                    {
                        key: "skyIllumLDR",
                        get: function get() {
                            return this._skyIllumLDR;
                        }
                    },
                    {
                        key: "skyLightingColor",
                        get: function get() {
                            var _$t = cA().isHDR;
                            return gO.set(_$t ? this._skyColorHDR : this._skyColorLDR), _O(gO), pO.set(255 * gO.x, 255 * gO.y, 255 * gO.z, 255);
                        },
                        set: function set(t1) {
                            gO.set(t1.x, t1.y, t1.z, t1.w), cA().isHDR ? this._skyColorHDR.set(gO) : this._skyColorLDR.set(gO), this._resource && this._resource.skyColor.set(gO);
                        }
                    },
                    {
                        key: "skyColor",
                        set: function set(t1) {
                            cA().isHDR ? this._skyColorHDR.set(t1) : this._skyColorLDR.set(t1), this._resource && this._resource.skyColor.set(t1);
                        }
                    },
                    {
                        key: "skyIllum",
                        get: function get() {
                            return cA().isHDR ? this._skyIllumHDR : this._skyIllumLDR;
                        },
                        set: function set(t1) {
                            cA().isHDR ? this._skyIllumHDR = t1 : this._skyIllumLDR = t1, this._resource && (this._resource.skyIllum = t1);
                        }
                    },
                    {
                        key: "groundLightingColor",
                        get: function get() {
                            var _$t = cA().isHDR;
                            return gO.set(_$t ? this._groundAlbedoHDR : this._groundAlbedoLDR), _O(gO), pO.set(255 * gO.x, 255 * gO.y, 255 * gO.z, 255);
                        },
                        set: function set(t1) {
                            gO.set(t1.x, t1.y, t1.z, t1.w), cA().isHDR ? this._groundAlbedoHDR.set(gO) : this._groundAlbedoLDR.set(gO), this._resource && this._resource.groundAlbedo.set(gO);
                        }
                    },
                    {
                        key: "groundAlbedo",
                        set: function set(t1) {
                            cA().isHDR ? this._groundAlbedoHDR.set(t1) : this._groundAlbedoLDR.set(t1), this._resource && this._resource.groundAlbedo.set(t1);
                        }
                    }
                ]), t1;
            }()).prototype, "skyIllum", [
                zE
            ], Object.getOwnPropertyDescriptor(KE.prototype, "skyIllum"), KE.prototype), JE = ho(KE.prototype, "_skyColorHDR", [
                Ro,
                $E
            ], function() {
                return new Hr(.2, .5, .8, 1);
            }), QE = ho(KE.prototype, "_skyIllumHDR", [
                Ro,
                XE
            ], function() {
                return aA.SKY_ILLUM;
            }), ZE = ho(KE.prototype, "_groundAlbedoHDR", [
                Ro,
                qE
            ], function() {
                return new Hr(.2, .2, .2, 1);
            }), tT = ho(KE.prototype, "_skyColorLDR", [
                Ro
            ], function() {
                return new Hr(.2, .5, .8, 1);
            }), iT = ho(KE.prototype, "_skyIllumLDR", [
                Ro
            ], function() {
                return aA.SKY_ILLUM;
            }), nT = ho(KE.prototype, "_groundAlbedoLDR", [
                Ro
            ], function() {
                return new Hr(.2, .2, .2, 1);
            }), KE)) || KE));
            A.AmbientInfo = mO;
            var bO = t1("d8", (sT = go("cc.SkyboxInfo"), rT = Zo(gA), hT = Zo(Qm), eT = Zo(Yi), uT = Zo(Qm), oT = Zo(Qm), fT = Zo(rA), cT = Zo(Qm), aT = Mo("_envmap"), vT = Zo(Qm), lT = Zo(Qm), dT = Zo(Qm), wT = Zo(rA), gT = Zo(Qm), pT = Zo(Qm), sT((y((_T = function() {
                function t1() {
                    this._envLightingType = mT && mT(), this._envmapHDR = bT && bT(), this._envmapLDR = kT && kT(), this._diffuseMapHDR = AT && AT(), this._diffuseMapLDR = ET && ET(), this._enabled = TT && TT(), this._useHDR = ST && ST(), this._editableMaterial = OT && OT(), this._reflectionHDR = IT && IT(), this._reflectionLDR = RT && RT(), this._rotationAngle = MT && MT(), this._resource = null;
                }
                var i = t1.prototype;
                return i.activate = function(t1) {
                    this.envLightingType = this._envLightingType, this._resource = t1, t1.initialize(this), t1.setEnvMaps(this._envmapHDR, this._envmapLDR), t1.setDiffuseMaps(this._diffuseMapHDR, this._diffuseMapLDR), t1.setSkyboxMaterial(this._editableMaterial), t1.setReflectionMaps(this._reflectionHDR, this._reflectionLDR), t1.setRotationAngle(this._rotationAngle), t1.activate();
                }, i.updateEnvMap = function(t1) {
                    t1 || (this.applyDiffuseMap = !1, this.useIBL = !1, this.envLightingType = 0, nt(15001));
                    var i = this._resource;
                    i && (i.setEnvMaps(this._envmapHDR, this._envmapLDR), i.setDiffuseMaps(this._diffuseMapHDR, this._diffuseMapLDR), i.setReflectionMaps(this._reflectionHDR, this._reflectionLDR), i.useDiffuseMap = this.applyDiffuseMap, i.envmap = t1);
                }, i.setMaterialProperty = function(t1, i, n) {
                    var _$s = this._resource;
                    if (_$s) {
                        var _$r = _$s.editableMaterial;
                        _$s.enabled && _$r && (_$r.setProperty(t1, i, n), _$r.passes.forEach(function(t1) {
                            t1.update();
                        }));
                    }
                }, s(t1, [
                    {
                        key: "applyDiffuseMap",
                        get: function get() {
                            return 2 === this._envLightingType;
                        },
                        set: function set(t1) {
                            this._resource && (this._resource.useDiffuseMap = t1);
                        }
                    },
                    {
                        key: "enabled",
                        get: function get() {
                            return this._enabled;
                        },
                        set: function set(t1) {
                            this._enabled !== t1 && (this._enabled = t1, this._resource && (this._resource.enabled = this._enabled));
                        }
                    },
                    {
                        key: "envLightingType",
                        get: function get() {
                            return this._envLightingType;
                        },
                        set: function set(t1) {
                            this.envmap || 0 === t1 ? (0 === t1 ? (this.useIBL = !1, this.applyDiffuseMap = !1) : 1 === t1 ? (this.useIBL = !0, this.applyDiffuseMap = !1) : 2 === t1 && (this.useIBL = !0, this.applyDiffuseMap = !0), this._envLightingType = t1) : (this.useIBL = !1, this.applyDiffuseMap = !1, this._envLightingType = 0, nt(15001));
                        }
                    },
                    {
                        key: "useIBL",
                        get: function get() {
                            return 0 !== this._envLightingType;
                        },
                        set: function set(t1) {
                            this._resource && (this._resource.useIBL = t1);
                        }
                    },
                    {
                        key: "useHDR",
                        get: function get() {
                            return cA().isHDR = this._useHDR, this._useHDR;
                        },
                        set: function set(t1) {
                            cA().isHDR = t1, this._useHDR = t1;
                            var i = this._resource;
                            i && 2 === this.envLightingType && (null === this.diffuseMap ? (this.envLightingType = 1, nt(15e3)) : this.diffuseMap.isDefault && nt(15002)), i && (i.useHDR = this._useHDR, i.updateMaterialRenderInfo());
                        }
                    },
                    {
                        key: "envmap",
                        get: function get() {
                            return cA().isHDR ? this._envmapHDR : this._envmapLDR;
                        },
                        set: function set(t1) {
                            var i = cA().isHDR;
                            i ? (this._envmapHDR = t1, this._reflectionHDR = null) : (this._envmapLDR = t1, this._reflectionLDR = null), t1 || (i ? this._diffuseMapHDR = null : this._diffuseMapLDR = null, this.applyDiffuseMap = !1, this.useIBL = !1, this.envLightingType = 0, nt(15001));
                            var n = this._resource;
                            n && (n.setEnvMaps(this._envmapHDR, this._envmapLDR), n.setDiffuseMaps(this._diffuseMapHDR, this._diffuseMapLDR), n.setReflectionMaps(this._reflectionHDR, this._reflectionLDR), n.useDiffuseMap = this.applyDiffuseMap, n.envmap = t1);
                        }
                    },
                    {
                        key: "rotationAngle",
                        get: function get() {
                            return this._rotationAngle;
                        },
                        set: function set(t1) {
                            this._rotationAngle = t1, this._resource && this._resource.setRotationAngle(this._rotationAngle);
                        }
                    },
                    {
                        key: "diffuseMap",
                        get: function get() {
                            return cA().isHDR ? this._diffuseMapHDR : this._diffuseMapLDR;
                        },
                        set: function set(t1) {
                            cA().isHDR ? this._diffuseMapHDR = t1 : this._diffuseMapLDR = t1, this._resource && this._resource.setDiffuseMaps(this._diffuseMapHDR, this._diffuseMapLDR);
                        }
                    },
                    {
                        key: "reflectionMap",
                        get: function get() {
                            return cA().isHDR ? this._reflectionHDR : this._reflectionLDR;
                        },
                        set: function set(t1) {
                            cA().isHDR ? this._reflectionHDR = t1 : this._reflectionLDR = t1, this._resource && this._resource.setReflectionMaps(this._reflectionHDR, this._reflectionLDR);
                        }
                    },
                    {
                        key: "skyboxMaterial",
                        get: function get() {
                            return this._editableMaterial;
                        },
                        set: function set(t1) {
                            this._editableMaterial = t1, this._resource && this._resource.setSkyboxMaterial(this._editableMaterial);
                        }
                    }
                ]), t1;
            }()).prototype, "envLightingType", [
                rT
            ], Object.getOwnPropertyDescriptor(_T.prototype, "envLightingType"), _T.prototype), y(_T.prototype, "envmap", [
                hT
            ], Object.getOwnPropertyDescriptor(_T.prototype, "envmap"), _T.prototype), y(_T.prototype, "rotationAngle", [
                eT
            ], Object.getOwnPropertyDescriptor(_T.prototype, "rotationAngle"), _T.prototype), y(_T.prototype, "diffuseMap", [
                uT
            ], Object.getOwnPropertyDescriptor(_T.prototype, "diffuseMap"), _T.prototype), y(_T.prototype, "reflectionMap", [
                oT
            ], Object.getOwnPropertyDescriptor(_T.prototype, "reflectionMap"), _T.prototype), y(_T.prototype, "skyboxMaterial", [
                fT
            ], Object.getOwnPropertyDescriptor(_T.prototype, "skyboxMaterial"), _T.prototype), mT = ho(_T.prototype, "_envLightingType", [
                Ro
            ], function() {
                return 0;
            }), bT = ho(_T.prototype, "_envmapHDR", [
                Ro,
                cT,
                aT
            ], function() {
                return null;
            }), kT = ho(_T.prototype, "_envmapLDR", [
                Ro,
                vT
            ], function() {
                return null;
            }), AT = ho(_T.prototype, "_diffuseMapHDR", [
                Ro,
                lT
            ], function() {
                return null;
            }), ET = ho(_T.prototype, "_diffuseMapLDR", [
                Ro,
                dT
            ], function() {
                return null;
            }), TT = ho(_T.prototype, "_enabled", [
                Ro
            ], function() {
                return !1;
            }), ST = ho(_T.prototype, "_useHDR", [
                Ro
            ], function() {
                return !0;
            }), OT = ho(_T.prototype, "_editableMaterial", [
                Ro,
                wT
            ], function() {
                return null;
            }), IT = ho(_T.prototype, "_reflectionHDR", [
                Ro,
                gT
            ], function() {
                return null;
            }), RT = ho(_T.prototype, "_reflectionLDR", [
                Ro,
                pT
            ], function() {
                return null;
            }), MT = ho(_T.prototype, "_rotationAngle", [
                Ro
            ], function() {
                return 0;
            }), _T)) || _T));
            A.SkyboxInfo = bO;
            var kO = t1("d9", (CT = go("cc.FogInfo"), NT = Zo(uA), PT = Zo(Yi), DT = Zo(Yi), LT = Zo(Yi), BT = Zo(Yi), FT = Zo(Yi), UT = Zo(Yi), CT(((JT = function() {
                function t1() {
                    this._type = GT && GT(), this._fogColor = HT && HT(), this._enabled = VT && VT(), this._fogDensity = WT && WT(), this._fogStart = zT && zT(), this._fogEnd = $T && $T(), this._fogAtten = XT && XT(), this._fogTop = qT && qT(), this._fogRange = YT && YT(), this._accurate = KT && KT(), this._resource = null;
                }
                return t1.prototype.activate = function(t1) {
                    this._resource = t1, t1.initialize(this), t1.activate();
                }, s(t1, [
                    {
                        key: "enabled",
                        get: function get() {
                            return this._enabled;
                        },
                        set: function set(t1) {
                            if (this._enabled !== t1) {
                                this._enabled = t1;
                                var i = this._resource;
                                i && (i.enabled = t1, t1 && (i.type = this._type));
                            }
                        }
                    },
                    {
                        key: "accurate",
                        get: function get() {
                            return this._accurate;
                        },
                        set: function set(t1) {
                            if (this._accurate !== t1) {
                                this._accurate = t1;
                                var i = this._resource;
                                i && (i.accurate = t1, t1 && (i.type = this._type));
                            }
                        }
                    },
                    {
                        key: "fogColor",
                        get: function get() {
                            return this._fogColor;
                        },
                        set: function set(t1) {
                            this._fogColor.set(t1), this._resource && (this._resource.fogColor = this._fogColor);
                        }
                    },
                    {
                        key: "type",
                        get: function get() {
                            return this._type;
                        },
                        set: function set(t1) {
                            this._type = t1, this._resource && (this._resource.type = t1);
                        }
                    },
                    {
                        key: "fogDensity",
                        get: function get() {
                            return this._fogDensity;
                        },
                        set: function set(t1) {
                            this._fogDensity = t1, this._resource && (this._resource.fogDensity = t1);
                        }
                    },
                    {
                        key: "fogStart",
                        get: function get() {
                            return this._fogStart;
                        },
                        set: function set(t1) {
                            this._fogStart = t1, this._resource && (this._resource.fogStart = t1);
                        }
                    },
                    {
                        key: "fogEnd",
                        get: function get() {
                            return this._fogEnd;
                        },
                        set: function set(t1) {
                            this._fogEnd = t1, this._resource && (this._resource.fogEnd = t1);
                        }
                    },
                    {
                        key: "fogAtten",
                        get: function get() {
                            return this._fogAtten;
                        },
                        set: function set(t1) {
                            this._fogAtten = t1, this._resource && (this._resource.fogAtten = t1);
                        }
                    },
                    {
                        key: "fogTop",
                        get: function get() {
                            return this._fogTop;
                        },
                        set: function set(t1) {
                            this._fogTop = t1, this._resource && (this._resource.fogTop = t1);
                        }
                    },
                    {
                        key: "fogRange",
                        get: function get() {
                            return this._fogRange;
                        },
                        set: function set(t1) {
                            this._fogRange = t1, this._resource && (this._resource.fogRange = t1);
                        }
                    }
                ]), t1;
            }()).FogType = uA, y(JT.prototype, "type", [
                NT
            ], Object.getOwnPropertyDescriptor(JT.prototype, "type"), JT.prototype), y(JT.prototype, "fogDensity", [
                PT
            ], Object.getOwnPropertyDescriptor(JT.prototype, "fogDensity"), JT.prototype), y(JT.prototype, "fogStart", [
                DT
            ], Object.getOwnPropertyDescriptor(JT.prototype, "fogStart"), JT.prototype), y(JT.prototype, "fogEnd", [
                LT
            ], Object.getOwnPropertyDescriptor(JT.prototype, "fogEnd"), JT.prototype), y(JT.prototype, "fogAtten", [
                BT
            ], Object.getOwnPropertyDescriptor(JT.prototype, "fogAtten"), JT.prototype), y(JT.prototype, "fogTop", [
                FT
            ], Object.getOwnPropertyDescriptor(JT.prototype, "fogTop"), JT.prototype), y(JT.prototype, "fogRange", [
                UT
            ], Object.getOwnPropertyDescriptor(JT.prototype, "fogRange"), JT.prototype), GT = ho(JT.prototype, "_type", [
                Ro
            ], function() {
                return uA.LINEAR;
            }), HT = ho(JT.prototype, "_fogColor", [
                Ro
            ], function() {
                return new Yr("#C8C8C8");
            }), VT = ho(JT.prototype, "_enabled", [
                Ro
            ], function() {
                return !1;
            }), WT = ho(JT.prototype, "_fogDensity", [
                Ro
            ], function() {
                return .3;
            }), zT = ho(JT.prototype, "_fogStart", [
                Ro
            ], function() {
                return .5;
            }), $T = ho(JT.prototype, "_fogEnd", [
                Ro
            ], function() {
                return 300;
            }), XT = ho(JT.prototype, "_fogAtten", [
                Ro
            ], function() {
                return 5;
            }), qT = ho(JT.prototype, "_fogTop", [
                Ro
            ], function() {
                return 1.5;
            }), YT = ho(JT.prototype, "_fogRange", [
                Ro
            ], function() {
                return 1.2;
            }), KT = ho(JT.prototype, "_accurate", [
                Ro
            ], function() {
                return !1;
            }), JT)) || JT)), AO = t1("da", (QT = go("cc.ShadowsInfo"), ZT = Zo(_A), tS = Zo(Yi), iS = Zo(Yi), nS = Zo(qi), sS = Zo(yA), QT((y((hS = function() {
                function t1() {
                    this._enabled = eS && eS(), this._type = uS && uS(), this._normal = oS && oS(), this._distance = fS && fS(), this._planeBias = cS && cS(), this._shadowColor = aS && aS(), this._maxReceived = vS && vS(), this._size = lS && lS(), this._resource = null;
                }
                var i = t1.prototype;
                return i.setPlaneFromNode = function(t1) {
                    t1.getWorldRotation(yO), this.planeDirection = Ss.transformQuat(wO, dO, yO), t1.getWorldPosition(wO), this.planeHeight = Ss.dot(this._normal, wO);
                }, i.activate = function(t1) {
                    this._resource = t1, t1.initialize(this), t1.activate();
                }, s(t1, [
                    {
                        key: "enabled",
                        get: function get() {
                            return this._enabled;
                        },
                        set: function set(t1) {
                            if (this._enabled !== t1) {
                                this._enabled = t1;
                                var i = this._resource;
                                i && (i.enabled = t1, t1 && (i.type = this._type));
                            }
                        }
                    },
                    {
                        key: "type",
                        get: function get() {
                            return this._type;
                        },
                        set: function set(t1) {
                            this._type = t1, this._resource && (this._resource.type = t1);
                        }
                    },
                    {
                        key: "shadowColor",
                        get: function get() {
                            return this._shadowColor;
                        },
                        set: function set(t1) {
                            this._shadowColor.set(t1), this._resource && (this._resource.shadowColor = t1);
                        }
                    },
                    {
                        key: "planeDirection",
                        get: function get() {
                            return this._normal;
                        },
                        set: function set(t1) {
                            Ss.copy(this._normal, t1), this._resource && (this._resource.normal = t1);
                        }
                    },
                    {
                        key: "planeHeight",
                        get: function get() {
                            return this._distance;
                        },
                        set: function set(t1) {
                            this._distance = t1, this._resource && (this._resource.distance = t1);
                        }
                    },
                    {
                        key: "planeBias",
                        get: function get() {
                            return this._planeBias;
                        },
                        set: function set(t1) {
                            this._planeBias = t1, this._resource && (this._resource.planeBias = t1);
                        }
                    },
                    {
                        key: "maxReceived",
                        get: function get() {
                            return this._maxReceived;
                        },
                        set: function set(t1) {
                            this._maxReceived = t1, this._resource && (this._resource.maxReceived = t1);
                        }
                    },
                    {
                        key: "shadowMapSize",
                        get: function get() {
                            return this._size.x;
                        },
                        set: function set(t1) {
                            var i = this._resource;
                            this._size.set(t1, t1), i && (i.size.set(t1, t1), i.shadowMapDirty = !0);
                        }
                    }
                ]), t1;
            }()).prototype, "type", [
                ZT
            ], Object.getOwnPropertyDescriptor(hS.prototype, "type"), hS.prototype), y(hS.prototype, "planeHeight", [
                tS
            ], Object.getOwnPropertyDescriptor(hS.prototype, "planeHeight"), hS.prototype), y(hS.prototype, "planeBias", [
                iS
            ], Object.getOwnPropertyDescriptor(hS.prototype, "planeBias"), hS.prototype), y(hS.prototype, "maxReceived", [
                nS
            ], Object.getOwnPropertyDescriptor(hS.prototype, "maxReceived"), hS.prototype), y(hS.prototype, "shadowMapSize", [
                sS
            ], Object.getOwnPropertyDescriptor(hS.prototype, "shadowMapSize"), hS.prototype), eS = ho(hS.prototype, "_enabled", [
                Ro
            ], function() {
                return !1;
            }), uS = ho(hS.prototype, "_type", [
                Ro
            ], function() {
                return _A.Planar;
            }), oS = ho(hS.prototype, "_normal", [
                Ro
            ], function() {
                return new Ss(0, 1, 0);
            }), fS = ho(hS.prototype, "_distance", [
                Ro
            ], function() {
                return 0;
            }), cS = ho(hS.prototype, "_planeBias", [
                Ro
            ], function() {
                return 1;
            }), aS = ho(hS.prototype, "_shadowColor", [
                Ro
            ], function() {
                return new Yr(0, 0, 0, 76);
            }), vS = ho(hS.prototype, "_maxReceived", [
                Ro
            ], function() {
                return 4;
            }), lS = ho(hS.prototype, "_size", [
                Ro
            ], function() {
                return new Or(1024, 1024);
            }), hS)) || hS));
            A.ShadowsInfo = AO;
            var EO = t1("db", new Ss(-1024, -1024, -1024)), TO = t1("dc", new Ss(1024, 1024, 1024)), SO = t1("dd", 8), OO = t1("de", (dS = go("cc.OctreeInfo"), wS = Zo(qi), dS((y((pS = function() {
                function t1() {
                    this._enabled = yS && yS(), this._minPos = _S && _S(), this._maxPos = mS && mS(), this._depth = bS && bS(), this._resource = null;
                }
                return t1.prototype.activate = function(t1) {
                    this._resource = t1, t1.initialize(this);
                }, s(t1, [
                    {
                        key: "enabled",
                        get: function get() {
                            return this._enabled;
                        },
                        set: function set(t1) {
                            this._enabled !== t1 && (this._enabled = t1, this._resource && (this._resource.enabled = t1));
                        }
                    },
                    {
                        key: "minPos",
                        get: function get() {
                            return this._minPos;
                        },
                        set: function set(t1) {
                            this._minPos = t1, this._resource && (this._resource.minPos = t1);
                        }
                    },
                    {
                        key: "maxPos",
                        get: function get() {
                            return this._maxPos;
                        },
                        set: function set(t1) {
                            this._maxPos = t1, this._resource && (this._resource.maxPos = t1);
                        }
                    },
                    {
                        key: "depth",
                        get: function get() {
                            return this._depth;
                        },
                        set: function set(t1) {
                            this._depth = t1, this._resource && (this._resource.depth = t1);
                        }
                    }
                ]), t1;
            }()).prototype, "depth", [
                wS
            ], Object.getOwnPropertyDescriptor(pS.prototype, "depth"), pS.prototype), yS = ho(pS.prototype, "_enabled", [
                Ro
            ], function() {
                return !1;
            }), _S = ho(pS.prototype, "_minPos", [
                Ro
            ], function() {
                return new Ss(EO);
            }), mS = ho(pS.prototype, "_maxPos", [
                Ro
            ], function() {
                return new Ss(TO);
            }), bS = ho(pS.prototype, "_depth", [
                Ro
            ], function() {
                return SO;
            }), pS)) || pS));
            A.OctreeInfo = OO;
            var IO = t1("df", (kS = go("cc.SkinInfo"), AS = Zo(Yi), ES = Zo(Yi), kS((y((SS = function() {
                function t1() {
                    this._enabled = OS && OS(), this._blurRadius = IS && IS(), this._sssIntensity = RS && RS(), this._resource = null;
                }
                return t1.prototype.activate = function(t1) {
                    this._resource = t1, t1.initialize(this);
                }, s(t1, [
                    {
                        key: "enabled",
                        get: function get() {
                            return this._enabled;
                        },
                        set: function set(t1) {
                            this._enabled !== t1 && (this._enabled = t1, this._resource && (this._resource.enabled = t1));
                        }
                    },
                    {
                        key: "blurRadius",
                        get: function get() {
                            return this._blurRadius;
                        },
                        set: function set(t1) {
                            this._blurRadius = t1, this._resource && (this._resource.blurRadius = t1);
                        }
                    },
                    {
                        key: "sssIntensity",
                        get: function get() {
                            return this._sssIntensity;
                        },
                        set: function set(t1) {
                            this._sssIntensity = t1, this._resource && (this._resource.sssIntensity = t1);
                        }
                    }
                ]), t1;
            }()).prototype, "blurRadius", [
                AS
            ], Object.getOwnPropertyDescriptor(SS.prototype, "blurRadius"), SS.prototype), y(SS.prototype, "sssIntensity", [
                ES
            ], Object.getOwnPropertyDescriptor(SS.prototype, "sssIntensity"), SS.prototype), OS = ho(SS.prototype, "_enabled", [
                Ro
            ], function() {
                return !0;
            }), IS = ho(SS.prototype, "_blurRadius", [
                Ro
            ], function() {
                return .01;
            }), RS = ho(SS.prototype, "_sssIntensity", [
                Ro
            ], function() {
                return 3;
            }), SS)) || SS));
            A.SkinInfo = IO;
            var RO = t1("dg", (MS = go("cc.PostSettingsInfo"), CS = Zo(vO), MS((y((PS = function() {
                function t1() {
                    this._toneMappingType = DS && DS(), this._resource = null;
                }
                return t1.prototype.activate = function(t1) {
                    this._resource = t1, t1.initialize(this), t1.activate();
                }, s(t1, [
                    {
                        key: "toneMappingType",
                        get: function get() {
                            return this._toneMappingType;
                        },
                        set: function set(t1) {
                            this._toneMappingType = t1, this._resource && (this._resource.toneMappingType = t1);
                        }
                    }
                ]), t1;
            }()).prototype, "toneMappingType", [
                CS
            ], Object.getOwnPropertyDescriptor(PS.prototype, "toneMappingType"), PS.prototype), DS = ho(PS.prototype, "_toneMappingType", [
                Ro
            ], function() {
                return vO.DEFAULT;
            }), PS)) || PS));
            A.PostSettingsInfo = RO;
            var MO, CO, PO, DO, LO, BO, FO, UO, xO, jO, HO, VO, WO, zO, $O, XO, YO, KO, JO, QO, ZO, iI, nI, sI, rI, hI, eI, uI, fI, cI, aI, vI, lI, dI, gI, pI, yI, _I, mI, bI, kI, AI, EI, SI, OI, II, RI, MI, CI, NI, PI, DI, LI, BI, UI, xI, jI, GI, HI, VI, WI, zI = t1("dh", (LS = go("cc.LightProbeInfo"), BS = Zo(Yi), FS = Zo(qi), US = Zo(qi), xS = Zo(Yi), jS = Zo(Yi), LS((y((HS = function() {
                function t1() {
                    this._giScale = VS && VS(), this._giSamples = WS && WS(), this._bounces = zS && zS(), this._reduceRinging = $S && $S(), this._showProbe = XS && XS(), this._showWireframe = qS && qS(), this._showConvex = YS && YS(), this._data = KS && KS(), this._lightProbeSphereVolume = JS && JS(), this._nodes = [], this._scene = null, this._resource = null;
                }
                var i = t1.prototype;
                return i.activate = function(t1, i) {
                    this._scene = t1, this._resource = i, i.initialize(this);
                }, i.onProbeBakeFinished = function() {
                    this.ko(this._scene);
                }, i.onProbeBakeCleared = function() {
                    this.clearSHCoefficients(), this.ko(this._scene);
                }, i.ko = function(t1) {
                    var i = this;
                    t1 && (t1.emit("light-probe-baking-changed"), t1.children.forEach(function(t1) {
                        i.ko(t1);
                    }));
                }, i.clearSHCoefficients = function() {
                    this._data && (this._data.probes.forEach(function(t1) {
                        t1.coefficients.length = 0;
                    }), this.Ao());
                }, i.isUniqueNode = function() {
                    return 1 === this._nodes.length;
                }, i.addNode = function(t1) {
                    if (!t1) return !1;
                    for(var i = 0; i < this._nodes.length; i++)if (this._nodes[i].node === t1) return !1;
                    return this._nodes.push({
                        node: t1,
                        probes: null
                    }), !0;
                }, i.removeNode = function(t1) {
                    if (!t1) return !1;
                    var i = this._nodes.findIndex(function(i) {
                        return i.node === t1;
                    });
                    return -1 !== i && (this._nodes.splice(i, 1), !0);
                }, i.syncData = function(t1, i) {
                    for(var n = 0; n < this._nodes.length; n++)if (this._nodes[n].node === t1) return void (this._nodes[n].probes = i);
                }, i.update = function(t1) {
                    if (void 0 === t1 && (t1 = !0), A.internal.LightProbesData) {
                        this._data || (this._data = new A.internal.LightProbesData, this._resource && (this._resource.data = this._data));
                        for(var i = [], n = 0; n < this._nodes.length; n++){
                            var _$s = this._nodes[n], _$r = _$s.node, h = _$s.probes, e = _$r.worldPosition;
                            if (h) for(var u = 0; u < h.length; u++){
                                var o = Os();
                                Ss.add(o, h[u], e), i.push(o);
                            }
                        }
                        if (i.length < 4) return this.Eo(), void this._data.reset();
                        this._data.updateProbes(i), t1 && (this.Eo(), this._data.updateTetrahedrons());
                    }
                }, i.Ao = function() {
                    if (this._scene) {
                        var _$t = this._scene.renderScene;
                        _$t && _$t.models.forEach(function(t1) {
                            t1.clearSHUBOs();
                        });
                    }
                }, i.Eo = function() {
                    if (this._scene) {
                        var _$t = this._scene.renderScene;
                        _$t && _$t.models.forEach(function(t1) {
                            t1.tetrahedronIndex = -1;
                        });
                    }
                }, s(t1, [
                    {
                        key: "giScale",
                        get: function get() {
                            return this._giScale;
                        },
                        set: function set(t1) {
                            this._giScale !== t1 && (this._giScale = t1, this._resource && (this._resource.giScale = t1));
                        }
                    },
                    {
                        key: "giSamples",
                        get: function get() {
                            return this._giSamples;
                        },
                        set: function set(t1) {
                            this._giSamples !== t1 && (this._giSamples = t1, this._resource && (this._resource.giSamples = t1));
                        }
                    },
                    {
                        key: "bounces",
                        get: function get() {
                            return this._bounces;
                        },
                        set: function set(t1) {
                            this._bounces !== t1 && (this._bounces = t1, this._resource && (this._resource.bounces = t1));
                        }
                    },
                    {
                        key: "reduceRinging",
                        get: function get() {
                            return this._reduceRinging;
                        },
                        set: function set(t1) {
                            this._reduceRinging !== t1 && (this._reduceRinging = t1, this._resource && (this._resource.reduceRinging = t1));
                        }
                    },
                    {
                        key: "showProbe",
                        get: function get() {
                            return this._showProbe;
                        },
                        set: function set(t1) {
                            this._showProbe !== t1 && (this._showProbe = t1, this._resource && (this._resource.showProbe = t1));
                        }
                    },
                    {
                        key: "showWireframe",
                        get: function get() {
                            return this._showWireframe;
                        },
                        set: function set(t1) {
                            this._showWireframe !== t1 && (this._showWireframe = t1, this._resource && (this._resource.showWireframe = t1));
                        }
                    },
                    {
                        key: "showConvex",
                        get: function get() {
                            return this._showConvex;
                        },
                        set: function set(t1) {
                            this._showConvex !== t1 && (this._showConvex = t1, this._resource && (this._resource.showConvex = t1));
                        }
                    },
                    {
                        key: "data",
                        get: function get() {
                            return this._data;
                        },
                        set: function set(t1) {
                            this._data !== t1 && (this._data = t1, this._resource && (this._resource.data = t1));
                        }
                    },
                    {
                        key: "lightProbeSphereVolume",
                        get: function get() {
                            return this._lightProbeSphereVolume;
                        },
                        set: function set(t1) {
                            this._lightProbeSphereVolume !== t1 && (this._lightProbeSphereVolume = t1, this._resource && (this._resource.lightProbeSphereVolume = t1));
                        }
                    }
                ]), t1;
            }()).prototype, "giScale", [
                BS
            ], Object.getOwnPropertyDescriptor(HS.prototype, "giScale"), HS.prototype), y(HS.prototype, "giSamples", [
                FS
            ], Object.getOwnPropertyDescriptor(HS.prototype, "giSamples"), HS.prototype), y(HS.prototype, "bounces", [
                US
            ], Object.getOwnPropertyDescriptor(HS.prototype, "bounces"), HS.prototype), y(HS.prototype, "reduceRinging", [
                xS
            ], Object.getOwnPropertyDescriptor(HS.prototype, "reduceRinging"), HS.prototype), y(HS.prototype, "lightProbeSphereVolume", [
                jS
            ], Object.getOwnPropertyDescriptor(HS.prototype, "lightProbeSphereVolume"), HS.prototype), VS = ho(HS.prototype, "_giScale", [
                Ro
            ], function() {
                return 1;
            }), WS = ho(HS.prototype, "_giSamples", [
                Ro
            ], function() {
                return 1024;
            }), zS = ho(HS.prototype, "_bounces", [
                Ro
            ], function() {
                return 2;
            }), $S = ho(HS.prototype, "_reduceRinging", [
                Ro
            ], function() {
                return 0;
            }), XS = ho(HS.prototype, "_showProbe", [
                Ro
            ], function() {
                return !0;
            }), qS = ho(HS.prototype, "_showWireframe", [
                Ro
            ], function() {
                return !0;
            }), YS = ho(HS.prototype, "_showConvex", [
                Ro
            ], function() {
                return !1;
            }), KS = ho(HS.prototype, "_data", [
                Ro
            ], function() {
                return null;
            }), JS = ho(HS.prototype, "_lightProbeSphereVolume", [
                Ro
            ], function() {
                return 1;
            }), HS)) || HS)), $I = t1("di", (QS = go("cc.SceneGlobals"), ZS = Zo(bO), QS((nO = ho((iO = function() {
                function t1() {
                    this.ambient = nO && nO(), this.shadows = sO && sO(), this._skybox = rO && rO(), this.fog = hO && hO(), this.octree = eO && eO(), this.skin = uO && uO(), this.lightProbeInfo = oO && oO(), this.postSettings = fO && fO(), this.bakedWithStationaryMainLight = cO && cO(), this.bakedWithHighpLightmap = aO && aO(), this.disableLightmap = !1;
                }
                return t1.prototype.activate = function(t1) {
                    var i = A.director.root.pipeline.pipelineSceneData;
                    this.skybox.activate(i.skybox), this.ambient.activate(i.ambient), this.shadows.activate(i.shadows), this.fog.activate(i.fog), this.octree.activate(i.octree), this.skin.activate(i.skin), this.postSettings.activate(i.postSettings), this.lightProbeInfo && i.lightProbes && this.lightProbeInfo.activate(t1, i.lightProbes), A.director.root.onGlobalPipelineStateChanged();
                }, s(t1, [
                    {
                        key: "skybox",
                        get: function get() {
                            return this._skybox;
                        },
                        set: function set(t1) {
                            this._skybox = t1;
                        }
                    }
                ]), t1;
            }()).prototype, "ambient", [
                Ro
            ], function() {
                return new mO;
            }), sO = ho(iO.prototype, "shadows", [
                Ro
            ], function() {
                return new AO;
            }), rO = ho(iO.prototype, "_skybox", [
                Ro
            ], function() {
                return new bO;
            }), hO = ho(iO.prototype, "fog", [
                Ro
            ], function() {
                return new kO;
            }), y(iO.prototype, "skybox", [
                ZS
            ], Object.getOwnPropertyDescriptor(iO.prototype, "skybox"), iO.prototype), eO = ho(iO.prototype, "octree", [
                Ro
            ], function() {
                return new OO;
            }), uO = ho(iO.prototype, "skin", [
                Ro
            ], function() {
                return new IO;
            }), oO = ho(iO.prototype, "lightProbeInfo", [
                Ro
            ], function() {
                return new zI;
            }), fO = ho(iO.prototype, "postSettings", [
                Ro
            ], function() {
                return new RO;
            }), cO = ho(iO.prototype, "bakedWithStationaryMainLight", [
                Ro
            ], function() {
                return !1;
            }), aO = ho(iO.prototype, "bakedWithHighpLightmap", [
                Ro
            ], function() {
                return !1;
            }), iO)) || iO));
            A.SceneGlobals = $I;
            var XI = (MO = go("cc.TargetInfo"), CO = Zo([
                Ji
            ]), MO((DO = ho((PO = function PO() {
                this.localID = DO && DO();
            }).prototype, "localID", [
                Ro,
                CO
            ], function() {
                return [];
            }), PO)) || PO), qI = (LO = go("cc.TargetOverrideInfo"), BO = Zo(Wh), FO = Zo(XI), UO = Zo([
                Ji
            ]), xO = Zo(VE), jO = Zo(XI), LO((VO = ho((HO = function HO() {
                this.source = VO && VO(), this.sourceInfo = WO && WO(), this.propertyPath = zO && zO(), this.target = $O && $O(), this.targetInfo = XO && XO();
            }).prototype, "source", [
                Ro,
                BO
            ], function() {
                return null;
            }), WO = ho(HO.prototype, "sourceInfo", [
                Ro,
                FO
            ], function() {
                return null;
            }), zO = ho(HO.prototype, "propertyPath", [
                Ro,
                UO
            ], function() {
                return [];
            }), $O = ho(HO.prototype, "target", [
                Ro,
                xO
            ], function() {
                return null;
            }), XO = ho(HO.prototype, "targetInfo", [
                Ro,
                jO
            ], function() {
                return null;
            }), HO)) || HO), YI = go("cc.CompPrefabInfo")((KO = ho((YO = function YO() {
                this.fileId = KO && KO();
            }).prototype, "fileId", [
                Ro
            ], function() {
                return "";
            }), YO)) || YO, KI = (JO = go("CCPropertyOverrideInfo"), QO = Zo(XI), ZO = Zo([
                Ji
            ]), JO((nI = ho((iI = function() {
                function t1() {
                    this.targetInfo = nI && nI(), this.propertyPath = sI && sI(), this.value = rI && rI();
                }
                return t1.prototype.isTarget = function() {}, t1;
            }()).prototype, "targetInfo", [
                Ro,
                QO
            ], function() {
                return null;
            }), sI = ho(iI.prototype, "propertyPath", [
                Ro,
                ZO
            ], function() {
                return [];
            }), rI = ho(iI.prototype, "value", [
                Ro
            ], null), iI)) || iI), JI = (hI = go("cc.MountedChildrenInfo"), eI = Zo(XI), uI = Zo([
                VE
            ]), hI((cI = ho((fI = function() {
                function t1() {
                    this.targetInfo = cI && cI(), this.nodes = aI && aI();
                }
                return t1.prototype.isTarget = function() {}, t1;
            }()).prototype, "targetInfo", [
                Ro,
                eI
            ], function() {
                return null;
            }), aI = ho(fI.prototype, "nodes", [
                Ro,
                uI
            ], function() {
                return [];
            }), fI)) || fI), QI = (vI = go("cc.MountedComponentsInfo"), lI = Zo(XI), dI = Zo([
                Yg
            ]), vI((pI = ho((gI = function() {
                function t1() {
                    this.targetInfo = pI && pI(), this.components = yI && yI();
                }
                return t1.prototype.isTarget = function() {}, t1;
            }()).prototype, "targetInfo", [
                Ro,
                lI
            ], function() {
                return null;
            }), yI = ho(gI.prototype, "components", [
                Ro,
                dI
            ], function() {
                return [];
            }), gI)) || gI), ZI = (_I = go("cc.PrefabInstance"), mI = Zo(VE), bI = Zo([
                JI
            ]), kI = Zo([
                QI
            ]), AI = Zo([
                KI
            ]), EI = Zo([
                XI
            ]), _I((OI = ho((SI = function() {
                function t1() {
                    this.fileId = OI && OI(), this.prefabRootNode = II && II(), this.mountedChildren = RI && RI(), this.mountedComponents = MI && MI(), this.propertyOverrides = CI && CI(), this.removedComponents = NI && NI(), this.targetMap = {}, this.expanded = !1;
                }
                var i = t1.prototype;
                return i.findPropertyOverride = function() {}, i.removePropertyOverride = function() {}, t1;
            }()).prototype, "fileId", [
                Ro
            ], function() {
                return "";
            }), II = ho(SI.prototype, "prefabRootNode", [
                Ro,
                mI
            ], null), RI = ho(SI.prototype, "mountedChildren", [
                Ro,
                bI
            ], function() {
                return [];
            }), MI = ho(SI.prototype, "mountedComponents", [
                Ro,
                kI
            ], function() {
                return [];
            }), CI = ho(SI.prototype, "propertyOverrides", [
                Ro,
                AI
            ], function() {
                return [];
            }), NI = ho(SI.prototype, "removedComponents", [
                Ro,
                EI
            ], function() {
                return [];
            }), SI)) || SI), tR = (PI = go("cc.PrefabInfo"), DI = Zo(VE), LI = Zo(ZI), BI = Zo([
                qI
            ]), PI((xI = ho((UI = function UI() {
                this.root = xI && xI(), this.asset = jI && jI(), this.fileId = GI && GI(), this.instance = HI && HI(), this.targetOverrides = VI && VI(), this.nestedPrefabInstanceRoots = WI && WI();
            }).prototype, "root", [
                Ro,
                DI
            ], null), jI = ho(UI.prototype, "asset", [
                Ro
            ], null), GI = ho(UI.prototype, "fileId", [
                Ro
            ], function() {
                return "";
            }), HI = ho(UI.prototype, "instance", [
                Ro,
                LI
            ], null), VI = ho(UI.prototype, "targetOverrides", [
                Ro,
                BI
            ], null), WI = ho(UI.prototype, "nestedPrefabInstanceRoots", [
                Ro
            ], null), UI)) || UI);
            function iR(t1) {
                var i = null == t1 ? void 0 : t1.prefab;
                if (i && i.instance) {
                    if (!i.asset) return rt(3701, t1.name), void (i.instance = void 0);
                    var n = t1._objFlags, s = t1.getParent(), _$r = t1.uuid;
                    t1[jh], A.game._isCloning = !0, i.asset._doInstantiate(t1), A.game._isCloning = !1, t1._objFlags = n, t1.lo(s), t1.id = _$r, t1.prefab && (t1.prefab.instance = i.instance);
                }
            }
            function nR(t1, i, n) {
                var s;
                if (i && t1) {
                    var _$r = i, h = null == (s = t1.prefab) ? void 0 : s.instance;
                    !n && h && (i[h.fileId] = {}, _$r = i[h.fileId]);
                    var e = t1.prefab;
                    e && (_$r[e.fileId] = t1), t1.components.forEach(function(t1) {
                        t1.__prefab && (_$r[t1.__prefab.fileId] = t1);
                    }), t1.children.forEach(function(t1) {
                        nR(t1, _$r, !1);
                    });
                }
            }
            function sR(t1, i) {
                if (!t1) return null;
                for(var n = i, s = 0; s < t1.length; s++){
                    if (!n) return null;
                    n = n[t1[s]];
                }
                return n;
            }
            function rR(t1, i, n) {
                if (i) for(var s = 0; s < i.length; s++){
                    var _$r = i[s];
                    if (_$r && _$r.targetInfo) {
                        var h = sR(_$r.targetInfo.localID, n);
                        if (!h) continue;
                        var e = n, u = _$r.targetInfo.localID;
                        if (u.length > 0) for(var o = 0; o < u.length - 1; o++)e = e[u[o]];
                        if (_$r.nodes) for(var f = 0; f < _$r.nodes.length; f++){
                            var _$c = _$r.nodes[f];
                            _$c && !h.children.includes(_$c) && (h.children.push(_$c), _$c.lo(h), nR(_$c, e, !1), _$c.siblingIndex = h.children.length - 1, fR(_$c, !0));
                        }
                    }
                }
            }
            function hR(t1, i, n) {
                if (i) for(var s = 0; s < i.length; s++){
                    var _$r = i[s];
                    if (_$r && _$r.targetInfo) {
                        var h = sR(_$r.targetInfo.localID, n);
                        if (!h) continue;
                        if (_$r.components) for(var e = 0; e < _$r.components.length; e++){
                            var u = _$r.components[e];
                            u && (u.node = h, h.vo().push(u));
                        }
                    }
                }
            }
            function eR(t1, i, n) {
                if (i) for(var s = 0; s < i.length; s++){
                    var _$r = i[s];
                    if (_$r) {
                        var h = sR(_$r.localID, n);
                        if (!h || !h.node) continue;
                        var e = h.node.components.indexOf(h);
                        e >= 0 && h.node.vo().splice(e, 1);
                    }
                }
            }
            function uR(t1, i, n) {
                if (!(i.length <= 0)) for(var s = null, _$r = 0; _$r < i.length; _$r++){
                    var h = i[_$r];
                    if (h && h.targetInfo) {
                        if (!(s = sR(h.targetInfo.localID, n))) continue;
                        var e = s, u = h.propertyPath.slice();
                        if (u.length > 0) {
                            var o = u.pop();
                            if (!o) continue;
                            for(var f = 0; f < u.length && (e = e[u[f]]); f++);
                            if (!e) continue;
                            if (Array.isArray(e)) if ("length" === o) e[o] = h.value;
                            else {
                                var _$c = Number.parseInt(o);
                                Number.isInteger(_$c) && _$c < e.length && (e[o] = h.value);
                            }
                            else _instanceof(e[o], mi) ? e[o].set(h.value) : e[o] = h.value;
                        }
                    }
                }
            }
            function oR(t1) {
                var i, n = null == (i = t1.prefab) ? void 0 : i.targetOverrides;
                if (n) for(var s = 0; s < n.length; s++){
                    var _$r, h = n[s], e = h.source, u = h.sourceInfo;
                    if (u) {
                        var o, f = h.source, _$c = null == f || null == (o = f.prefab) ? void 0 : o.instance;
                        _$c && _$c.targetMap && (e = sR(u.localID, _$c.targetMap));
                    }
                    if (e) {
                        var a, v = h.targetInfo;
                        if (v) {
                            var l = h.target, _$d = null == l || null == (_$r = l.prefab) ? void 0 : _$r.instance;
                            if (_$d && _$d.targetMap && (a = sR(v.localID, _$d.targetMap))) {
                                var w = h.propertyPath.slice(), g = e;
                                if (w.length > 0) {
                                    var p = w.pop();
                                    if (!p) return;
                                    for(var _$y = 0; _$y < w.length && (g = g[w[_$y]]); _$y++);
                                    if (!g) continue;
                                    g[p] = a;
                                }
                            }
                        }
                    }
                }
            }
            function fR(t1, i) {
                void 0 === i && (i = !1);
                var n, s = null == t1 || null == (n = t1.prefab) ? void 0 : n.instance;
                if (s && !s.expanded) {
                    iR(t1), i && t1 && t1.children && t1.children.forEach(function(t1) {
                        fR(t1, !0);
                    });
                    var _$r = {};
                    s.targetMap = _$r, nR(t1, _$r, !0), rR(0, s.mountedChildren, _$r), eR(0, s.removedComponents, _$r), hR(0, s.mountedComponents, _$r), uR(0, s.propertyOverrides, _$r), s.expanded = !0;
                } else i && t1 && t1.children && t1.children.forEach(function(t1) {
                    fR(t1, !0);
                });
            }
            function cR(t1) {
                var i = t1.prefab;
                i && i.nestedPrefabInstanceRoots && i.nestedPrefabInstanceRoots.forEach(function(t1) {
                    fR(t1);
                });
            }
            A._PrefabInfo = tR;
            var vR, lR, dR, gR, pR, yR = Object.freeze({
                __proto__: null,
                CompPrefabInfo: YI,
                MountedChildrenInfo: JI,
                MountedComponentsInfo: QI,
                PrefabInfo: tR,
                PrefabInstance: ZI,
                PropertyOverrideInfo: KI,
                TargetInfo: XI,
                TargetOverrideInfo: qI,
                applyMountedChildren: rR,
                applyMountedComponents: hR,
                applyNodeAndComponentId: function t1(i, n) {
                    for(var s = i.components, _$r = i.children, h = 0; h < s.length; h++){
                        var e, u, o = s[h], f = null != (e = null == (u = o.__prefab) ? void 0 : u.fileId) ? e : "";
                        o._id = "" + n + f;
                    }
                    for(var _$c = 0; _$c < _$r.length; _$c++){
                        var a = _$r[_$c], v = a.prefab, l = null != v && v.instance ? v.instance.fileId : null == v ? void 0 : v.fileId;
                        l && (a.id = "" + n + l, null != v && v.instance || t1(a, n));
                    }
                },
                applyPropertyOverrides: uR,
                applyRemovedComponents: eR,
                applyTargetOverrides: oR,
                createNodeWithPrefab: iR,
                expandNestedPrefabInstanceNode: cR,
                expandPrefabInstanceNode: fR,
                generateTargetMap: nR,
                getTarget: sR
            }), _R = t1("cY", go("cc.Scene")((lR = ho((vR = function(t1) {
                h(n, t1);
                var i = n.prototype;
                function n(i) {
                    var _$n;
                    return (_$n = t1.call(this, i) || this).autoReleaseAssets = lR && lR(), _$n._globals = dR && dR(), _$n.dependAssets = null, _$n._renderScene = null, _$n._prefabSyncedInLiveReload = !1, _$n._activeInHierarchy = !1, A.director && A.director.root && (_$n._renderScene = A.director.root.createScene({})), _$n._inited = !A.game || !A.game._isCloning, _$n;
                }
                return i._updateScene = function() {
                    this._scene = this;
                }, i.destroy = function() {
                    var _$t = Wh.prototype.destroy.call(this);
                    if (_$t) for(var i = this._children, _$n = 0; _$n < i.length; ++_$n)i[_$n].active = !1;
                    return this._renderScene && A.director.root.destroyScene(this._renderScene), this._active = !1, this._activeInHierarchy = !1, _$t;
                }, i.addComponent = function() {
                    throw Error(ot(3822));
                }, i._onHierarchyChanged = function() {}, i._onPostActivated = function() {}, i._onBatchCreated = function(t1) {
                    for(var i = this._children.length, _$n = 0; _$n < i; ++_$n)this._children[_$n]._siblingIndex = _$n, this._children[_$n]._onBatchCreated(t1);
                }, i.updateWorldTransform = function() {}, i._instantiate = function() {
                    return null;
                }, i.To = function() {
                    this._inited || (cR(this), oR(this), this._onBatchCreated(!1), this._inited = !0), this.walk(VE.oo);
                }, i.So = function(t1) {
                    void 0 === t1 && (t1 = !0), A.director._nodeActivator.activateNode(this, t1), this._globals.activate(this);
                }, s(n, [
                    {
                        key: "renderScene",
                        get: function get() {
                            return this._renderScene;
                        }
                    },
                    {
                        key: "globals",
                        get: function get() {
                            return this._globals;
                        }
                    }
                ]), n;
            }(VE)).prototype, "autoReleaseAssets", [
                Ro
            ], function() {
                return !1;
            }), dR = ho(vR.prototype, "_globals", [
                Ro
            ], function() {
                return new $I;
            }), vR)) || vR);
            A.Scene = _R;
            var mR = t1("dA", go("cc.SceneAsset")((pR = ho((gR = function(t1) {
                function i(i) {
                    var n;
                    return (n = t1.call(this, i) || this).scene = pR && pR(), n;
                }
                h(i, t1);
                var n = i.prototype;
                return n.initDefault = function(i) {
                    t1.prototype.initDefault.call(this, i), this.scene = new _R("New Scene");
                }, n.validate = function() {
                    return !!this.scene;
                }, i;
            }(sg)).prototype, "scene", [
                Ro
            ], function() {
                return null;
            }), gR)) || gR);
            A.SceneAsset = mR;
            var bR = new cr, kR = new cr, AR = new cr, ER = new cr, TR = new cr, SR = new cr, OR = new cr, IR = new Ss(0, 0, 0), RR = new Ss, MR = new Or, CR = new Ss, NR = new Ss, PR = new Ss(1e7, 1e7, 1e7), DR = new Ss(-10000000, -10000000, -10000000), LR = new Ss, BR = 0, FR = 0, UR = function() {
                function t1(t1) {
                    this._shadowObjects = [], this._shadowCameraFar = 0, this._matShadowView = new cr, this._matShadowProj = new cr, this._matShadowViewProj = new cr, this._validFrustum = new He, this._splitFrustum = new He, this._lightViewFrustum = new He, this._castLightViewBoundingBox = new Ie, this._level = t1, this._validFrustum.accurate = !0, this._splitFrustum.accurate = !0, this._lightViewFrustum.accurate = !0;
                }
                var i = t1.prototype;
                return i.copyToValidFrustum = function(t1) {
                    He.copy(this._validFrustum, t1);
                }, i.calculateValidFrustumOrtho = function(t1, i, n, s, r) {
                    He.createOrtho(this._validFrustum, t1, i, n, s, r);
                }, i.calculateSplitFrustum = function(t1, i, n, s) {
                    this._splitFrustum.split(n, s, t1.aspect, t1.fov, i);
                }, i.destroy = function() {
                    this._shadowObjects.length = 0;
                }, i.createMatrix = function(t1, i, n) {
                    var _$s = A.director.root.device, _$r = t1.shadowInvisibleOcclusionRange;
                    He.copy(this._lightViewFrustum, this._splitFrustum), cr.fromRT(kR, t1.node.rotation, IR), cr.invert(AR, kR);
                    var h, e, u = AR.clone();
                    this._lightViewFrustum.transform(AR), Ie.fromPoints(this._castLightViewBoundingBox, PR, DR), this._castLightViewBoundingBox.mergeFrustum(this._lightViewFrustum), t1.csmOptimizationMode === kA.DisableRotationFix ? (h = 2 * this._castLightViewBoundingBox.halfExtents.x, e = 2 * this._castLightViewBoundingBox.halfExtents.y) : h = e = Ss.distance(this._lightViewFrustum.vertices[0], this._lightViewFrustum.vertices[6]);
                    var o = A.director.root.pipeline.pipelineSceneData.csmSupported ? t1.csmLevel : 1;
                    if (o > 1 && t1.csmOptimizationMode === kA.RemoveDuplicates) if (this._level >= o - 1) FR = this._castLightViewBoundingBox.halfExtents.z, BR = this._castLightViewBoundingBox.center.z;
                    else {
                        var f = Math.abs(this._castLightViewBoundingBox.center.z - BR) + FR;
                        this._castLightViewBoundingBox.halfExtents.z = Math.max(this._castLightViewBoundingBox.center.z, f);
                    }
                    var _$c = this._castLightViewBoundingBox.halfExtents.z;
                    this._shadowCameraFar = 2 * _$c + _$r;
                    var a = this._castLightViewBoundingBox.center;
                    if (LR.set(a.x, a.y, a.z + _$c + _$r), Ss.transformMat4(LR, LR, kR), cr.fromRT(kR, t1.node.rotation, LR), cr.invert(AR, kR), !n) {
                        var v = .5 * h, l = .5 * e;
                        cr.ortho(ER, -v, v, -l, l, .1, this._shadowCameraFar, _$s.capabilities.clipSpaceMinZ, _$s.capabilities.clipSpaceSignY), cr.multiply(SR, ER, u), Ss.transformMat4(RR, LR, SR);
                        var _$d = 2 / i;
                        MR.set(_$d, _$d);
                        var w = RR.x % MR.x, g = RR.y % MR.y;
                        CR.set(RR.x - w, RR.y - g, RR.z), cr.invert(OR, SR), Ss.transformMat4(NR, CR, OR), cr.fromRT(kR, t1.node.rotation, NR), cr.invert(AR, kR), cr.multiply(TR, ER, AR), cr.copy(this._matShadowView, AR), cr.copy(this._matShadowProj, ER), cr.copy(this._matShadowViewProj, TR);
                    }
                    He.createOrtho(this._validFrustum, h, e, .1, this._shadowCameraFar, kR);
                }, s(t1, [
                    {
                        key: "level",
                        get: function get() {
                            return this._level;
                        }
                    },
                    {
                        key: "shadowObjects",
                        get: function get() {
                            return this._shadowObjects;
                        }
                    },
                    {
                        key: "shadowCameraFar",
                        get: function get() {
                            return this._shadowCameraFar;
                        },
                        set: function set(t1) {
                            this._shadowCameraFar = t1;
                        }
                    },
                    {
                        key: "matShadowView",
                        get: function get() {
                            return this._matShadowView;
                        },
                        set: function set(t1) {
                            this._matShadowView = t1;
                        }
                    },
                    {
                        key: "matShadowProj",
                        get: function get() {
                            return this._matShadowProj;
                        },
                        set: function set(t1) {
                            this._matShadowProj = t1;
                        }
                    },
                    {
                        key: "matShadowViewProj",
                        get: function get() {
                            return this._matShadowViewProj;
                        },
                        set: function set(t1) {
                            this._matShadowViewProj = t1;
                        }
                    },
                    {
                        key: "validFrustum",
                        get: function get() {
                            return this._validFrustum;
                        }
                    },
                    {
                        key: "splitFrustum",
                        get: function get() {
                            return this._splitFrustum;
                        }
                    },
                    {
                        key: "lightViewFrustum",
                        get: function get() {
                            return this._lightViewFrustum;
                        }
                    },
                    {
                        key: "castLightViewBoundingBox",
                        get: function get() {
                            return this._castLightViewBoundingBox;
                        }
                    }
                ]), t1;
            }(), xR = function(t1) {
                function i(i) {
                    var n;
                    return (n = t1.call(this, i) || this)._splitCameraNear = 0, n._splitCameraFar = 0, n._csmAtlas = new Hr, n.Oo(i), n;
                }
                h(i, t1);
                var n = i.prototype;
                return n.destroy = function() {
                    t1.prototype.destroy.call(this);
                }, n.Oo = function(t1) {
                    var _$s = (.5 - Math.floor(t1 / 2)) * A.director.root.device.capabilities.clipSpaceSignY;
                    this._csmAtlas.set(.5, .5, t1 % 2 - .5, _$s);
                }, s(i, [
                    {
                        key: "splitCameraNear",
                        get: function get() {
                            return this._splitCameraNear;
                        },
                        set: function set(t1) {
                            this._splitCameraNear = t1;
                        }
                    },
                    {
                        key: "splitCameraFar",
                        get: function get() {
                            return this._splitCameraFar;
                        },
                        set: function set(t1) {
                            this._splitCameraFar = t1;
                        }
                    },
                    {
                        key: "csmAtlas",
                        get: function get() {
                            return this._csmAtlas;
                        },
                        set: function set(t1) {
                            this._csmAtlas = t1;
                        }
                    }
                ]), i;
            }(UR), jR = function() {
                function t1() {
                    this._castShadowObjects = [], this._layerObjects = new xh(64), this._layers = [], this._levelCount = 0, this._specialLayer = new UR(1), this._shadowDistance = 0;
                    for(var _$t = 0; _$t < bA.LEVEL_4; _$t++)this._layers[_$t] = new xR(_$t);
                }
                var i = t1.prototype;
                return i.update = function(t1, i) {
                    var n = i.scene.mainLight;
                    if (null !== n) {
                        var _$s = t1.shadows, _$r = A.director.root.pipeline.pipelineSceneData.csmSupported ? n.csmLevel : 1, h = n.shadowDistance;
                        _$s.enabled && n.shadowEnabled && (n.shadowFixedArea ? this.Io(n) : ((n.csmNeedUpdate || this._levelCount !== _$r || this._shadowDistance !== h) && (this.Ro(n), this._levelCount = _$r, this._shadowDistance = h), this.Mo(i, n, _$s)));
                    }
                }, i.destroy = function() {
                    this._castShadowObjects.length = 0;
                    for(var _$t = 0; _$t < this._layers.length; _$t++)this._layers[_$t].destroy();
                    this._layers.length = 0;
                }, i.Io = function(t1) {
                    var i = A.director.root.device, n = t1.shadowOrthoSize, _$s = t1.shadowOrthoSize, _$r = t1.shadowNear, h = t1.shadowFar;
                    cr.fromRT(kR, t1.node.worldRotation, t1.node.worldPosition), cr.invert(AR, kR), cr.ortho(ER, -n, n, -_$s, _$s, _$r, h, i.capabilities.clipSpaceMinZ, i.capabilities.clipSpaceSignY), cr.multiply(TR, ER, AR), this._specialLayer.matShadowView = AR, this._specialLayer.matShadowProj = ER, this._specialLayer.matShadowViewProj = TR, this._specialLayer.calculateValidFrustumOrtho(2 * n, 2 * _$s, _$r, h, kR);
                }, i.Ro = function(t1) {
                    var n = t1.shadowDistance, _$s = n / .1, _$r = A.director.root.pipeline.pipelineSceneData.csmSupported ? t1.csmLevel : 1, h = t1.csmLayerLambda;
                    this._layers[0].splitCameraNear = .1;
                    for(var e = 1; e < _$r; e++){
                        var u = e / _$r, o = .1 * h * Math.pow(_$s, u) + (1 - h) * (.1 + (n - .1) * u), f = 1.005 * o;
                        this._layers[e].splitCameraNear = o, this._layers[e - 1].splitCameraFar = f;
                    }
                    this._layers[_$r - 1].splitCameraFar = n, t1.csmNeedUpdate = !1;
                }, i.Mo = function(t1, i, n) {
                    var _$s = A.director.root.pipeline.pipelineSceneData.csmSupported ? i.csmLevel : 1, _$r = _$s > 1 ? .5 * n.size.x : n.size.x;
                    if (!(_$r < 0)) {
                        this.Co(bR, t1);
                        for(var h = _$s - 1; h >= 0; h--){
                            var e = this._layers[h], u = e.splitCameraNear, o = e.splitCameraFar;
                            e.calculateSplitFrustum(t1, bR, u, o), e.createMatrix(i, _$r, !1);
                        }
                        _$s === bA.LEVEL_1 ? (this._specialLayer.shadowCameraFar = this._layers[0].shadowCameraFar, cr.copy(this._specialLayer.matShadowView, this._layers[0].matShadowView), cr.copy(this._specialLayer.matShadowProj, this._layers[0].matShadowProj), cr.copy(this._specialLayer.matShadowViewProj, this._layers[0].matShadowViewProj), this._specialLayer.copyToValidFrustum(this._layers[0].validFrustum)) : (this._specialLayer.calculateSplitFrustum(t1, bR, .1, i.shadowDistance), this._specialLayer.createMatrix(i, _$r, !0));
                    }
                }, i.Co = function(t1, i) {
                    if (i.node) {
                        var n = i.node, _$s = n.worldPosition, _$r = n.worldRotation;
                        cr.fromRT(t1, _$r, _$s);
                    }
                }, s(t1, [
                    {
                        key: "castShadowObjects",
                        get: function get() {
                            return this._castShadowObjects;
                        }
                    },
                    {
                        key: "layerObjects",
                        get: function get() {
                            return this._layerObjects;
                        }
                    },
                    {
                        key: "layers",
                        get: function get() {
                            return this._layers;
                        }
                    },
                    {
                        key: "specialLayer",
                        get: function get() {
                            return this._specialLayer;
                        }
                    }
                ]), t1;
            }(), GR = function() {
                function t1() {
                    this._enabled = !0, this._blurRadius = .01, this._sssIntensity = 3;
                }
                return t1.prototype.initialize = function(t1) {
                    this._enabled = t1.enabled, this._blurRadius = t1.blurRadius, this._sssIntensity = t1.sssIntensity;
                }, s(t1, [
                    {
                        key: "enabled",
                        get: function get() {
                            return this._enabled;
                        },
                        set: function set(t1) {
                            this._enabled = t1;
                        }
                    },
                    {
                        key: "blurRadius",
                        get: function get() {
                            return this._blurRadius;
                        },
                        set: function set(t1) {
                            this._blurRadius = t1;
                        }
                    },
                    {
                        key: "sssIntensity",
                        get: function get() {
                            return this._sssIntensity;
                        },
                        set: function set(t1) {
                            this._sssIntensity = t1;
                        }
                    }
                ]), t1;
            }(), HR = t1("cP", function() {
                function t1() {
                    this.fog = new fA, this.ambient = new aA, this.skybox = new pA, this.shadows = new EA, this.csmLayers = new jR, this.octree = new SA, this.skin = new GR, this.postSettings = new lO, this.lightProbes = A.internal.LightProbes ? new A.internal.LightProbes : null, this.validPunctualLights = [], this.renderObjects = [], this.shadowFrameBufferMap = new Map, this._geometryRendererMaterials = [], this._geometryRendererPasses = [], this._geometryRendererShaders = [], this._occlusionQueryVertexBuffer = null, this._occlusionQueryIndicesBuffer = null, this._occlusionQueryInputAssembler = null, this._occlusionQueryMaterial = null, this._occlusionQueryShader = null, this._isHDR = !0, this._shadingScale = 1, this._csmSupported = !0, this.No = null, this.Po = null, this.Do = null, this._shadingScale = 1;
                }
                var i = t1.prototype;
                return i.activate = function(t1) {
                    return this._device = t1, this.initGeometryRendererMaterials(), this.initOcclusionQuery(), !0;
                }, i.initGeometryRendererMaterials = function() {
                    for(var _$t = 0, i = this._geometryRendererMaterials, n = 0; n < 6; n++){
                        i[n] = new rA, i[n]._uuid = "geometry-renderer-material-" + n, i[n].initialize({
                            effectName: "internal/builtin-geometry-renderer",
                            technique: n
                        });
                        for(var _$s = i[n].passes, _$r = 0; _$r < _$s.length; ++_$r)this._geometryRendererPasses[_$t] = _$s[_$r], this._geometryRendererShaders[_$t] = _$s[_$r].getShaderVariant(), _$t++;
                    }
                }, i.initOcclusionQuery = function() {
                    if (this._occlusionQueryInputAssembler || (this._occlusionQueryInputAssembler = this.Lo()), !this._occlusionQueryMaterial) {
                        var _$t = new rA;
                        _$t._uuid = "default-occlusion-query-material", _$t.initialize({
                            effectName: "internal/builtin-occlusion-query"
                        }), this._occlusionQueryMaterial = _$t, _$t.passes.length > 0 && (this._occlusionQueryShader = _$t.passes[0].getShaderVariant());
                    }
                }, i.getOcclusionQueryPass = function() {
                    return this._occlusionQueryMaterial && this._occlusionQueryMaterial.passes.length > 0 ? this._occlusionQueryMaterial.passes[0] : null;
                }, i.updatePipelineSceneData = function() {}, i.destroy = function() {
                    var _$t, i, n;
                    this.shadows.destroy(), this.csmLayers.destroy(), this.validPunctualLights.length = 0, null == (_$t = this._occlusionQueryInputAssembler) || _$t.destroy(), this._occlusionQueryInputAssembler = null, null == (i = this._occlusionQueryVertexBuffer) || i.destroy(), this._occlusionQueryVertexBuffer = null, null == (n = this._occlusionQueryIndicesBuffer) || n.destroy(), this._occlusionQueryIndicesBuffer = null, this.No = null, this.Po = null, this.Do = null;
                }, i.Lo = function() {
                    var _$t = this._device, i = new Float32Array([
                        -1,
                        -1,
                        -1,
                        1,
                        -1,
                        -1,
                        -1,
                        1,
                        -1,
                        1,
                        1,
                        -1,
                        -1,
                        -1,
                        1,
                        1,
                        -1,
                        1,
                        -1,
                        1,
                        1,
                        1,
                        1,
                        1
                    ]);
                    this._occlusionQueryVertexBuffer = _$t.createBuffer(new Wl(10, 1, 96, 12)), this._occlusionQueryVertexBuffer.update(i);
                    var n = new Uint16Array([
                        0,
                        2,
                        1,
                        1,
                        2,
                        3,
                        4,
                        5,
                        6,
                        5,
                        7,
                        6,
                        1,
                        3,
                        7,
                        1,
                        7,
                        5,
                        0,
                        4,
                        6,
                        0,
                        6,
                        2,
                        0,
                        1,
                        5,
                        0,
                        5,
                        4,
                        2,
                        6,
                        7,
                        2,
                        7,
                        3
                    ]);
                    this._occlusionQueryIndicesBuffer = _$t.createBuffer(new Wl(6, 1, 72, 2)), this._occlusionQueryIndicesBuffer.update(n);
                    var _$r = new fd([
                        new ud("a_position", 32)
                    ], [
                        this._occlusionQueryVertexBuffer
                    ], this._occlusionQueryIndicesBuffer);
                    return _$t.createInputAssembler(_$r);
                }, s(t1, [
                    {
                        key: "isHDR",
                        get: function get() {
                            return this._isHDR;
                        },
                        set: function set(t1) {
                            this._isHDR = t1;
                        }
                    },
                    {
                        key: "shadingScale",
                        get: function get() {
                            return this._shadingScale;
                        },
                        set: function set(t1) {
                            this._shadingScale = t1;
                        }
                    },
                    {
                        key: "csmSupported",
                        get: function get() {
                            return this._csmSupported;
                        },
                        set: function set(t1) {
                            this._csmSupported = t1;
                        }
                    },
                    {
                        key: "standardSkinModel",
                        get: function get() {
                            return this.Po;
                        },
                        set: function set(t1) {
                            this.Po = t1;
                        }
                    },
                    {
                        key: "standardSkinMeshRenderer",
                        get: function get() {
                            return this.No;
                        },
                        set: function set(t1) {
                            this.No && this.No !== t1 && this.No.Bo(), this.No = t1, this.standardSkinModel = t1 ? t1.model : null;
                        }
                    },
                    {
                        key: "skinMaterialModel",
                        get: function get() {
                            return this.Do;
                        },
                        set: function set(t1) {
                            this.Do = t1;
                        }
                    },
                    {
                        key: "geometryRendererPasses",
                        get: function get() {
                            return this._geometryRendererPasses;
                        }
                    },
                    {
                        key: "geometryRendererShaders",
                        get: function get() {
                            return this._geometryRendererShaders;
                        }
                    }
                ]), t1;
            }()), VR = (t1("cT", {
                RENDER_FRAME_BEGIN: "render-frame-begin",
                RENDER_FRAME_END: "render-frame-end",
                RENDER_CAMERA_BEGIN: "render-camera-begin",
                RENDER_CAMERA_END: "render-camera-end",
                ATTACHMENT_SCALE_CAHNGED: "attachment-scale-changed"
            }), t1("cS", function(t1) {
                function i() {
                    var _$i;
                    return (_$i = t1.call(this) || this).eventTargetOn = t1.prototype.on, _$i.eventTargetOnce = t1.prototype.once, _$i;
                }
                h(i, t1);
                var n = i.prototype;
                return n.on = function(t1, i, n, s) {
                    return this.eventTargetOn(t1, i, n, s);
                }, n.once = function(t1, i, n) {
                    return this.eventTargetOnce(t1, i, n);
                }, i;
            }(se))), WR = t1("cU", function() {
                function t1() {
                    this._singleMode = 0, this._compositeModeValue = 0, this._lightingWithAlbedo = !0, this._csmLayerColoration = !1, this._activate();
                }
                var i = t1.prototype;
                return i.isCompositeModeEnabled = function(t1) {
                    return !!(this._compositeModeValue & 1 << t1);
                }, i.enableCompositeMode = function(t1, i) {
                    this.Fo(t1, i), this._updatePipeline();
                }, i.enableAllCompositeMode = function(t1) {
                    this.Uo(t1), this._updatePipeline();
                }, i.isEnabled = function() {
                    return 0 !== this.xo();
                }, i.reset = function() {
                    this._activate(), this._updatePipeline();
                }, i._activate = function() {
                    this._singleMode = 0, this.Uo(!0), this._lightingWithAlbedo = !0, this._csmLayerColoration = !1;
                }, i._updatePipeline = function() {
                    var _$t = A.director.root, i = _$t.pipeline, n = this.xo();
                    i.macros.CC_USE_DEBUG_VIEW !== n && (i.macros.CC_USE_DEBUG_VIEW = n, _$t.onGlobalPipelineStateChanged());
                }, i.Fo = function(t1, i) {
                    i ? this._compositeModeValue |= 1 << t1 : this._compositeModeValue &= ~(1 << t1);
                }, i.Uo = function(t1) {
                    for(var i = 0; i < 17; i++)t1 ? this._compositeModeValue |= 1 << i : this._compositeModeValue &= ~(1 << i);
                }, i.xo = function() {
                    if (0 !== this._singleMode) return 1;
                    if (!0 !== this._lightingWithAlbedo || !1 !== this._csmLayerColoration) return 2;
                    for(var _$t = 0; _$t < 17; _$t++)if (!this.isCompositeModeEnabled(_$t)) return 2;
                    return 0;
                }, s(t1, [
                    {
                        key: "singleMode",
                        get: function get() {
                            return this._singleMode;
                        },
                        set: function set(t1) {
                            this._singleMode = t1, this._updatePipeline();
                        }
                    },
                    {
                        key: "lightingWithAlbedo",
                        get: function get() {
                            return this._lightingWithAlbedo;
                        },
                        set: function set(t1) {
                            this._lightingWithAlbedo = t1, this._updatePipeline();
                        }
                    },
                    {
                        key: "csmLayerColoration",
                        get: function get() {
                            return this._csmLayerColoration;
                        },
                        set: function set(t1) {
                            this._csmLayerColoration = t1, this._updatePipeline();
                        }
                    },
                    {
                        key: "debugViewType",
                        get: function get() {
                            return this.xo();
                        }
                    }
                ]), t1;
            }()), zR = function() {
                function t1() {
                    this.jo = 200, this.Go = 0, this.Ne = new se, this.Ho = window.DeviceMotionEvent || window.DeviceOrientationEvent, le.browserType === re.MOBILE_QQ && (this.Ho = window.DeviceOrientationEvent), this.Vo = this.Ho === window.DeviceMotionEvent ? "devicemotion" : "deviceorientation", this.Wo = this.zo.bind(this);
                }
                var i = t1.prototype;
                return i.bt = function() {
                    this.Go = performance.now(), window.addEventListener(this.Vo, this.Wo, !1);
                }, i.$o = function() {
                    this.Go = 0, window.removeEventListener(this.Vo, this.Wo, !1);
                }, i.zo = function(t1) {
                    var i = performance.now();
                    if (!(i - this.Go < this.jo)) {
                        this.Go = i;
                        var n = 0, s = 0, _$r = 0;
                        if (this.Ho === window.DeviceMotionEvent) {
                            var h = t1.accelerationIncludingGravity;
                            n = .1 * ((null == h ? void 0 : h.x) || 0), s = .1 * ((null == h ? void 0 : h.y) || 0), _$r = .1 * ((null == h ? void 0 : h.z) || 0);
                        } else n = (t1.gamma || 0) / 90 * .981, s = -(t1.beta || 0) / 90 * .981, _$r = (t1.alpha || 0) / 90 * .981;
                        if (ge.isFrameRotated) {
                            var u = n;
                            n = -s, s = u;
                        }
                        var o = n;
                        90 === window.orientation ? (n = -s, s = o) : -90 === window.orientation ? (n = s, s = -o) : 180 === window.orientation && (n = -n, s = -s), le.os === ue.ANDROID && le.browserType !== re.MOBILE_QQ && (n = -n, s = -s);
                        var a = new zA(new ZA(n, s, _$r, performance.now()));
                        this.Ne.emit("devicemotion", a);
                    }
                }, i.start = function() {
                    var _$t = this;
                    window.DeviceMotionEvent && "function" == typeof DeviceMotionEvent.requestPermission ? DeviceMotionEvent.requestPermission().then(function(i) {
                        "granted" === i && _$t.bt();
                    }).catch(function(t1) {
                        W(t1);
                    }) : this.bt();
                }, i.stop = function() {
                    this.$o();
                }, i.setInterval = function(t1) {
                    this.jo = t1;
                }, i.on = function(t1, i, n) {
                    this.Ne.on(t1, i, n);
                }, t1;
            }(), $R = function $R() {}, XR = function(t1) {
                function i() {
                    return t1.apply(this, arguments) || this;
                }
                return h(i, t1), i.prototype.getValue = function() {
                    throw Error("Method not implemented.");
                }, i;
            }($R), qR = function(t1) {
                function i() {
                    return t1.apply(this, arguments) || this;
                }
                return h(i, t1), i.prototype.getValue = function() {
                    throw Error("Method not implemented.");
                }, i;
            }($R), YR = function(t1) {
                function i() {
                    return t1.apply(this, arguments) || this;
                }
                return h(i, t1), i.prototype.getValue = function() {
                    throw Error("Method not implemented.");
                }, i;
            }($R), KR = function(t1) {
                function i() {
                    return t1.apply(this, arguments) || this;
                }
                return h(i, t1), i.prototype.getValue = function() {
                    throw Error("Method not implemented.");
                }, i;
            }($R), JR = function(t1) {
                function i(i) {
                    var n;
                    return (n = t1.call(this) || this).positive = i.positive, n.negative = i.negative, n;
                }
                return h(i, t1), i.prototype.getValue = function() {
                    var _$t = this.positive.getValue(), _$i = this.negative.getValue();
                    return Math.abs(_$t) > Math.abs(_$i) ? _$t : -_$i;
                }, i;
            }(XR), QR = function(t1) {
                function i(i) {
                    var n;
                    return (n = t1.call(this) || this).up = i.up, n.down = i.down, n.left = i.left, n.right = i.right, n.xAxis = new JR({
                        positive: n.right,
                        negative: n.left
                    }), n.yAxis = new JR({
                        positive: n.up,
                        negative: n.down
                    }), n;
                }
                return h(i, t1), i.prototype.getValue = function() {
                    return new Or(this.xAxis.getValue(), this.yAxis.getValue());
                }, i;
            }(qR);
            function i9(i) {
                var n;
                return (n = YR.call(this) || this).up = i.up, n.down = i.down, n.left = i.left, n.right = i.right, n.forward = i.forward, n.backward = i.backward, n.xAxis = new JR({
                    positive: n.right,
                    negative: n.left
                }), n.yAxis = new JR({
                    positive: n.up,
                    negative: n.down
                }), n.zAxis = new JR({
                    positive: n.forward,
                    negative: n.backward
                }), n;
            }
            h(i9, YR), i9.prototype.getValue = function() {
                return new Ss(this.xAxis.getValue(), this.yAxis.getValue(), this.zAxis.getValue());
            };
            var ZR, tM = function(t1) {
                function i() {
                    return t1.apply(this, arguments) || this;
                }
                return h(i, t1), i.prototype.getValue = function() {
                    return t1.prototype.getValue.call(this);
                }, i;
            }(XR), iM = function(t1) {
                function i() {
                    return t1.apply(this, arguments) || this;
                }
                return h(i, t1), i;
            }(QR), nM = function(t1) {
                function i() {
                    return t1.apply(this, arguments) || this;
                }
                return h(i, t1), i;
            }(QR), sM = function(t1) {
                function i() {
                    return t1.apply(this, arguments) || this;
                }
                return h(i, t1), i.prototype.getValue = function() {
                    return t1.prototype.getValue.call(this);
                }, i;
            }(KR), rM = function(t1) {
                function i() {
                    return t1.apply(this, arguments) || this;
                }
                return h(i, t1), i.prototype.getValue = function() {
                    return t1.prototype.getValue.call(this);
                }, i;
            }(YR), hM = function(t1) {
                function i() {
                    return t1.apply(this, arguments) || this;
                }
                return h(i, t1), i.prototype.getValue = function() {
                    return t1.prototype.getValue.call(this);
                }, i;
            }(XR), eM = "left", uM = "right", oM = [];
            (t19 = ZR || (ZR = {}))[t19.HAND_LEFT = 1] = "HAND_LEFT", t19[t19.HAND_RIGHT = 4] = "HAND_RIGHT", t19[t19.AIM_LEFT = 2] = "AIM_LEFT", t19[t19.AIM_RIGHT = 5] = "AIM_RIGHT";
            var t19, fM, cM, aM, vM, lM, dM = function() {
                function t1(t1) {
                    var i;
                    this.Xo = -1, this.qo = !1, this.Yo = ((i = {})[ZR.HAND_LEFT] = {
                        position: Ss.ZERO,
                        orientation: qs.IDENTITY
                    }, i[ZR.HAND_RIGHT] = {
                        position: Ss.ZERO,
                        orientation: qs.IDENTITY
                    }, i[ZR.AIM_LEFT] = {
                        position: Ss.ZERO,
                        orientation: qs.IDENTITY
                    }, i[ZR.AIM_RIGHT] = {
                        position: Ss.ZERO,
                        orientation: qs.IDENTITY
                    }, i), this.Xo = t1, this.Ko();
                }
                t1._init = function() {
                    le.hasFeature(fe.EVENT_GAMEPAD) && t1.bt();
                }, t1._on = function(i, n, s) {
                    t1.Ne.on(i, n, s);
                }, t1.Jo = function(i) {
                    var n = t1.all.findIndex(function(t1) {
                        return t1.deviceId === i;
                    });
                    -1 !== n && ri(t1.all, n);
                }, t1.Qo = function(i, n) {
                    var _$s = t1.all.find(function(t1) {
                        return t1.deviceId === i;
                    });
                    return _$s || (_$s = new t1(i), t1.all.push(_$s)), _$s.qo = n, _$s;
                }, t1.Zo = function(i) {
                    t1.tf = setInterval(function() {
                        A.director && A.Director && (clearInterval(t1.tf), t1.tf = -1, i());
                    }, 50);
                }, t1.if = function() {
                    for(var i = 0, n = 0, _$s = t1.nf.length; n < _$s; n++)t1.nf[n] && i++;
                    t1.sf = i;
                }, t1.bt = function() {
                    t1.Zo(function() {
                        t1.nf = t1.rf(), t1.if(), A.director.on(A.Director.EVENT_BEGIN_FRAME, t1.hf);
                    }), window.addEventListener("gamepadconnected", function(i) {
                        t1.nf[i.gamepad.index] = i.gamepad, t1.if();
                        var n = t1.Qo(i.gamepad.index, !0);
                        t1.Ne.emit("gamepad-change", new KA("gamepad-change", n));
                    }), window.addEventListener("gamepaddisconnected", function(i) {
                        t1.nf[i.gamepad.index] = null, t1.if();
                        var n = t1.Qo(i.gamepad.index, !1);
                        t1.Jo(i.gamepad.index), t1.Ne.emit("gamepad-change", new KA("gamepad-change", n));
                    });
                }, t1.ef = function(i) {
                    if (0 !== t1.sf) {
                        var n = t1.rf();
                        if (n) {
                            for(var _$s = 0; _$s < n.length; ++_$s){
                                var _$r = n[_$s];
                                if (_$r) {
                                    var h = t1.nf[_$r.index];
                                    if (h) {
                                        for(var e = void 0, u = h.buttons, o = 0; o < u.length; ++o){
                                            var f = u[o], _$c = _$r.buttons[o];
                                            if (Math.abs(f.value - _$c.value) > .01) {
                                                e = t1.Qo(_$r.index, !0);
                                                break;
                                            }
                                        }
                                        if (e) {
                                            i.push(e);
                                            continue;
                                        }
                                        for(var a = h.axes, v = 0; v < a.length; ++v)if (Math.abs(a[v] - _$r.axes[v]) > .01) {
                                            e = t1.Qo(_$r.index, !0);
                                            break;
                                        }
                                        if (e) {
                                            i.push(e);
                                            continue;
                                        }
                                    }
                                }
                            }
                            t1.nf = n;
                        }
                    }
                }, t1.hf = function() {
                    oM.length = 0, t1.ef(oM), t1.uf(oM);
                    for(var i = 0; i < oM.length; ++i){
                        var n = oM[i];
                        t1.Ne.emit("gamepad-input", new KA("gamepad-input", n));
                    }
                    t1.ff();
                }, t1.uf = function() {}, t1.af = function(t1, i) {
                    if (!t1 && !i) return !1;
                    if (!t1 || !i) return !0;
                    for(var n = i.buttons, _$s = 0; _$s < n.length; ++_$s){
                        var _$r = n[_$s];
                        if (0 !== t1.buttons[_$s].value || 0 !== _$r) return !0;
                    }
                    for(var h = i.axes, e = 0; e < h.length; ++e){
                        var u = h[e];
                        if (0 !== t1.axes[e] || 0 !== u) return !0;
                    }
                    return !1;
                }, t1.vf = function(t1) {
                    if (t1) {
                        for(var i = {
                            buttons: Array(t1.buttons.length),
                            axes: Array(t1.axes.length)
                        }, n = 0; n < t1.buttons.length; ++n)i.buttons[n] = t1.buttons[n].value;
                        for(var _$s = 0; _$s < t1.axes.length; ++_$s)i.axes[_$s] = t1.axes[_$s];
                        return i;
                    }
                }, t1.ff = function() {}, t1.lf = function() {
                    var _$t;
                    return null == (_$t = globalThis.__globalXR) ? void 0 : _$t.webxrGamepadMap;
                }, t1.rf = function() {
                    return "function" == typeof navigator.getGamepads ? navigator.getGamepads() : "function" == typeof navigator.webkitGetGamepads ? navigator.webkitGetGamepads() : [];
                }, t1.df = function(i) {
                    for(var n = t1.rf(), _$s = 0; _$s < n.length; ++_$s){
                        var _$r = n[_$s];
                        if (_$r && _$r.index === i) return _$r;
                    }
                };
                var i = t1.prototype;
                return i.wf = function(t1) {
                    var i = Math.abs(t1);
                    return t1 > 0 ? {
                        negative: 0,
                        positive: i
                    } : t1 < 0 ? {
                        negative: i,
                        positive: 0
                    } : {
                        negative: 0,
                        positive: 0
                    };
                }, i.gf = function(t1) {
                    t1.code !== ZR.HAND_LEFT && t1.code !== ZR.AIM_LEFT && t1.code !== ZR.HAND_RIGHT && t1.code !== ZR.AIM_RIGHT || (this.Yo[t1.code] = {
                        position: new Ss(t1.position.x, t1.position.y, t1.position.z),
                        orientation: new qs(t1.orientation.x, t1.orientation.y, t1.orientation.z, t1.orientation.w)
                    });
                }, i.Ko = function() {
                    var i = this;
                    this.pf = new tM, this.pf.getValue = function() {
                        if (-1 === i.deviceId) {
                            var n, _$s = null == (n = t1.lf()) ? void 0 : n.get(eM);
                            return _$s && _$s.buttons.length > 5 ? _$s.buttons[5].value : 0;
                        }
                        var _$r = t1.df(i.deviceId);
                        return _$r ? _$r.buttons[3].value : 0;
                    }, this.yf = new tM, this.yf.getValue = function() {
                        if (-1 === i.deviceId) {
                            var n, _$s = null == (n = t1.lf()) ? void 0 : n.get(uM);
                            return _$s && _$s.buttons.length > 5 ? _$s.buttons[5].value : 0;
                        }
                        var _$r = t1.df(i.deviceId);
                        return _$r ? _$r.buttons[1].value : 0;
                    }, this._f = new tM, this._f.getValue = function() {
                        if (-1 === i.deviceId) {
                            var n, _$s = null == (n = t1.lf()) ? void 0 : n.get(eM);
                            return _$s && _$s.buttons.length > 4 ? _$s.buttons[4].value : 0;
                        }
                        var _$r = t1.df(i.deviceId);
                        return _$r ? _$r.buttons[2].value : 0;
                    }, this.mf = new tM, this.mf.getValue = function() {
                        if (-1 === i.deviceId) {
                            var n, _$s = null == (n = t1.lf()) ? void 0 : n.get(uM);
                            return _$s && _$s.buttons.length > 4 ? _$s.buttons[4].value : 0;
                        }
                        var _$r = t1.df(i.deviceId);
                        return _$r ? _$r.buttons[0].value : 0;
                    }, this.bf = new tM, this.bf.getValue = function() {
                        var n = t1.df(i.deviceId);
                        return n ? n.buttons[4].value : 0;
                    }, this.kf = new tM, this.kf.getValue = function() {
                        if (-1 === i.deviceId) {
                            var n, _$s = null == (n = t1.lf()) ? void 0 : n.get(eM);
                            return _$s && _$s.buttons.length > 0 ? _$s.buttons[0].value : 0;
                        }
                        var _$r = t1.df(i.deviceId);
                        return _$r ? _$r.buttons[6].value : 0;
                    }, this.Af = new tM, this.Af.getValue = function() {
                        if (-1 === i.deviceId) {
                            var n, _$s = null == (n = t1.lf()) ? void 0 : n.get(eM);
                            if (_$s) {
                                if (_$s.buttons.length > 3 && 0 !== _$s.buttons[3].value) return _$s.buttons[3].value;
                                if (_$s.buttons.length > 2 && 0 !== _$s.buttons[2].value) return _$s.buttons[2].value;
                            }
                            return 0;
                        }
                        var _$r = t1.df(i.deviceId);
                        return _$r ? _$r.buttons[10].value : 0;
                    }, this.Ef = new tM, this.Ef.getValue = function() {
                        var n = t1.df(i.deviceId);
                        return n ? n.buttons[5].value : 0;
                    }, this.Tf = new tM, this.Tf.getValue = function() {
                        if (-1 === i.deviceId) {
                            var n, _$s = null == (n = t1.lf()) ? void 0 : n.get(uM);
                            return _$s && _$s.buttons.length > 0 ? _$s.buttons[0].value : 0;
                        }
                        var _$r = t1.df(i.deviceId);
                        return _$r ? _$r.buttons[7].value : 0;
                    }, this.Sf = new tM, this.Sf.getValue = function() {
                        if (-1 === i.deviceId) {
                            var n, _$s = null == (n = t1.lf()) ? void 0 : n.get(uM);
                            if (_$s) {
                                if (_$s.buttons.length > 3 && 0 !== _$s.buttons[3].value) return _$s.buttons[3].value;
                                if (_$s.buttons.length > 2 && 0 !== _$s.buttons[2].value) return _$s.buttons[2].value;
                            }
                            return 0;
                        }
                        var _$r = t1.df(i.deviceId);
                        return _$r ? _$r.buttons[11].value : 0;
                    }, this.Of = new tM, this.Of.getValue = function() {
                        var n = t1.df(i.deviceId);
                        return n ? n.buttons[8].value : 0;
                    }, this.If = new tM, this.If.getValue = function() {
                        var n = t1.df(i.deviceId);
                        return n ? n.buttons[9].value : 0;
                    };
                    var n = new tM;
                    n.getValue = function() {
                        var n = t1.df(i.deviceId);
                        return n ? n.buttons[12].value : 0;
                    };
                    var _$s = new tM;
                    _$s.getValue = function() {
                        var n = t1.df(i.deviceId);
                        return n ? n.buttons[13].value : 0;
                    };
                    var _$r = new tM;
                    _$r.getValue = function() {
                        var n = t1.df(i.deviceId);
                        return n ? n.buttons[14].value : 0;
                    };
                    var h = new tM;
                    h.getValue = function() {
                        var n = t1.df(i.deviceId);
                        return n ? n.buttons[15].value : 0;
                    }, this.Rf = new iM({
                        up: n,
                        down: _$s,
                        left: _$r,
                        right: h
                    });
                    var e = new tM;
                    e.getValue = function() {
                        if (-1 === i.deviceId) return 0;
                        var n = t1.df(i.deviceId);
                        return n ? i.wf(n.axes[1]).negative : 0;
                    };
                    var u = new tM;
                    u.getValue = function() {
                        if (-1 === i.deviceId) return 0;
                        var n = t1.df(i.deviceId);
                        return n ? i.wf(n.axes[1]).positive : 0;
                    };
                    var o = new tM;
                    o.getValue = function() {
                        if (-1 === i.deviceId) return 0;
                        var n = t1.df(i.deviceId);
                        return n ? i.wf(n.axes[0]).negative : 0;
                    };
                    var f = new tM;
                    f.getValue = function() {
                        if (-1 === i.deviceId) return 0;
                        var n = t1.df(i.deviceId);
                        return n ? i.wf(n.axes[0]).positive : 0;
                    }, this.Mf = new nM({
                        up: e,
                        down: u,
                        left: o,
                        right: f
                    });
                    var _$c = new tM;
                    _$c.getValue = function() {
                        if (-1 === i.deviceId) return 0;
                        var n = t1.df(i.deviceId);
                        return n ? i.wf(n.axes[3]).negative : 0;
                    };
                    var a = new tM;
                    a.getValue = function() {
                        if (-1 === i.deviceId) return 0;
                        var n = t1.df(i.deviceId);
                        return n ? i.wf(n.axes[3]).positive : 0;
                    };
                    var v = new tM;
                    v.getValue = function() {
                        if (-1 === i.deviceId) return 0;
                        var n = t1.df(i.deviceId);
                        return n ? i.wf(n.axes[2]).negative : 0;
                    };
                    var l = new tM;
                    l.getValue = function() {
                        if (-1 === i.deviceId) return 0;
                        var n = t1.df(i.deviceId);
                        return n ? i.wf(n.axes[2]).positive : 0;
                    }, this.Cf = new nM({
                        up: _$c,
                        down: a,
                        left: v,
                        right: l
                    }), this.Nf = new tM, this.Nf.getValue = function() {
                        return 0;
                    }, this.Pf = new tM, this.Pf.getValue = function() {
                        return i.deviceId, 0;
                    }, this.Df = new tM, this.Df.getValue = function() {
                        if (-1 === i.deviceId) {
                            var n, _$s = null == (n = t1.lf()) ? void 0 : n.get(uM);
                            if (_$s && _$s.buttons.length > 1) return _$s.buttons[1].value;
                        }
                        return 0;
                    }, this.Lf = new rM, this.Lf.getValue = function() {
                        return i.Yo[ZR.HAND_LEFT].position;
                    }, this.Bf = new sM, this.Bf.getValue = function() {
                        return i.Yo[ZR.HAND_LEFT].orientation;
                    }, this.Ff = new rM, this.Ff.getValue = function() {
                        return i.Yo[ZR.HAND_RIGHT].position;
                    }, this.Uf = new sM, this.Uf.getValue = function() {
                        return i.Yo[ZR.HAND_RIGHT].orientation;
                    }, this.xf = new rM, this.xf.getValue = function() {
                        return i.Yo[ZR.AIM_LEFT].position;
                    }, this.jf = new sM, this.jf.getValue = function() {
                        return i.Yo[ZR.AIM_LEFT].orientation;
                    }, this.Gf = new rM, this.Gf.getValue = function() {
                        return i.Yo[ZR.AIM_RIGHT].position;
                    }, this.Hf = new sM, this.Hf.getValue = function() {
                        return i.Yo[ZR.AIM_RIGHT].orientation;
                    };
                }, s(t1, [
                    {
                        key: "buttonNorth",
                        get: function get() {
                            return this.pf;
                        }
                    },
                    {
                        key: "buttonEast",
                        get: function get() {
                            return this.yf;
                        }
                    },
                    {
                        key: "buttonWest",
                        get: function get() {
                            return this._f;
                        }
                    },
                    {
                        key: "buttonSouth",
                        get: function get() {
                            return this.mf;
                        }
                    },
                    {
                        key: "buttonL1",
                        get: function get() {
                            return this.bf;
                        }
                    },
                    {
                        key: "buttonL2",
                        get: function get() {
                            return this.kf;
                        }
                    },
                    {
                        key: "buttonL3",
                        get: function get() {
                            return this.Af;
                        }
                    },
                    {
                        key: "buttonR1",
                        get: function get() {
                            return this.Ef;
                        }
                    },
                    {
                        key: "buttonR2",
                        get: function get() {
                            return this.Tf;
                        }
                    },
                    {
                        key: "buttonR3",
                        get: function get() {
                            return this.Sf;
                        }
                    },
                    {
                        key: "buttonShare",
                        get: function get() {
                            return this.Of;
                        }
                    },
                    {
                        key: "buttonOptions",
                        get: function get() {
                            return this.If;
                        }
                    },
                    {
                        key: "dpad",
                        get: function get() {
                            return this.Rf;
                        }
                    },
                    {
                        key: "leftStick",
                        get: function get() {
                            return this.Mf;
                        }
                    },
                    {
                        key: "rightStick",
                        get: function get() {
                            return this.Cf;
                        }
                    },
                    {
                        key: "buttonStart",
                        get: function get() {
                            return this.Nf;
                        }
                    },
                    {
                        key: "gripLeft",
                        get: function get() {
                            return this.Pf;
                        }
                    },
                    {
                        key: "gripRight",
                        get: function get() {
                            return this.Df;
                        }
                    },
                    {
                        key: "handLeftPosition",
                        get: function get() {
                            return this.Lf;
                        }
                    },
                    {
                        key: "handLeftOrientation",
                        get: function get() {
                            return this.Bf;
                        }
                    },
                    {
                        key: "handRightPosition",
                        get: function get() {
                            return this.Ff;
                        }
                    },
                    {
                        key: "handRightOrientation",
                        get: function get() {
                            return this.Uf;
                        }
                    },
                    {
                        key: "aimLeftPosition",
                        get: function get() {
                            return this.xf;
                        }
                    },
                    {
                        key: "aimLeftOrientation",
                        get: function get() {
                            return this.jf;
                        }
                    },
                    {
                        key: "aimRightPosition",
                        get: function get() {
                            return this.Gf;
                        }
                    },
                    {
                        key: "aimRightOrientation",
                        get: function get() {
                            return this.Hf;
                        }
                    },
                    {
                        key: "deviceId",
                        get: function get() {
                            return this.Xo;
                        }
                    },
                    {
                        key: "connected",
                        get: function get() {
                            return this.qo;
                        }
                    }
                ]), t1;
            }();
            dM.all = [], dM.xr = null, dM.Ne = new se, dM.nf = [], dM.Vf = null, dM.tf = -1, dM.sf = 0, (t110 = fM || (fM = {}))[t110.BUTTON_EAST = 0] = "BUTTON_EAST", t110[t110.BUTTON_SOUTH = 1] = "BUTTON_SOUTH", t110[t110.BUTTON_WEST = 2] = "BUTTON_WEST", t110[t110.BUTTON_NORTH = 3] = "BUTTON_NORTH", t110[t110.BUTTON_TRIGGER_LEFT = 4] = "BUTTON_TRIGGER_LEFT", t110[t110.BUTTON_TRIGGER_RIGHT = 5] = "BUTTON_TRIGGER_RIGHT", t110[t110.TRIGGER_LEFT = 6] = "TRIGGER_LEFT", t110[t110.TRIGGER_RIGHT = 7] = "TRIGGER_RIGHT", t110[t110.GRIP_LEFT = 8] = "GRIP_LEFT", t110[t110.GRIP_RIGHT = 9] = "GRIP_RIGHT", t110[t110.BUTTON_LEFT_STICK = 10] = "BUTTON_LEFT_STICK", t110[t110.LEFT_STICK_UP = 11] = "LEFT_STICK_UP", t110[t110.LEFT_STICK_DOWN = 12] = "LEFT_STICK_DOWN", t110[t110.LEFT_STICK_LEFT = 13] = "LEFT_STICK_LEFT", t110[t110.LEFT_STICK_RIGHT = 14] = "LEFT_STICK_RIGHT", t110[t110.BUTTON_RIGHT_STICK = 15] = "BUTTON_RIGHT_STICK", t110[t110.RIGHT_STICK_UP = 16] = "RIGHT_STICK_UP", t110[t110.RIGHT_STICK_DOWN = 17] = "RIGHT_STICK_DOWN", t110[t110.RIGHT_STICK_LEFT = 18] = "RIGHT_STICK_LEFT", t110[t110.RIGHT_STICK_RIGHT = 19] = "RIGHT_STICK_RIGHT", t110[t110.ROKID_MENU = 20] = "ROKID_MENU", t110[t110.ROKID_START = 21] = "ROKID_START", (t111 = cM || (cM = {}))[t111.KET_CLICK = 0] = "KET_CLICK", t111[t111.KET_STICK = 1] = "KET_STICK", t111[t111.KET_GRAB = 2] = "KET_GRAB", t111[t111.KET_TOUCH = 3] = "KET_TOUCH", (t112 = aM || (aM = {}))[t112.UNDEFINE = 0] = "UNDEFINE", t112[t112.A = 1] = "A", t112[t112.B = 2] = "B", t112[t112.X = 3] = "X", t112[t112.Y = 4] = "Y", t112[t112.L1 = 5] = "L1", t112[t112.R1 = 6] = "R1", t112[t112.MINUS = 7] = "MINUS", t112[t112.PLUS = 8] = "PLUS", t112[t112.L3 = 9] = "L3", t112[t112.R3 = 10] = "R3", t112[t112.MENU = 11] = "MENU", t112[t112.START = 12] = "START", t112[t112.TRIGGER_LEFT = 13] = "TRIGGER_LEFT", t112[t112.TRIGGER_RIGHT = 14] = "TRIGGER_RIGHT", (t113 = vM || (vM = {}))[t113.UNDEFINE = 0] = "UNDEFINE", t113[t113.X = 1] = "X", t113[t113.Y = 2] = "Y", t113[t113.LEFT_STICK_X = 3] = "LEFT_STICK_X", t113[t113.LEFT_STICK_Y = 4] = "LEFT_STICK_Y", t113[t113.RIGHT_STICK_X = 5] = "RIGHT_STICK_X", t113[t113.RIGHT_STICK_Y = 6] = "RIGHT_STICK_Y", t113[t113.L2 = 7] = "L2", t113[t113.R2 = 8] = "R2", t113[t113.LEFT_GRIP = 9] = "LEFT_GRIP", t113[t113.RIGHT_GRIP = 10] = "RIGHT_GRIP", (t114 = lM || (lM = {}))[t114.UNDEFINE = 0] = "UNDEFINE", t114[t114.A = 1] = "A", t114[t114.B = 2] = "B", t114[t114.X = 3] = "X", t114[t114.Y = 4] = "Y", t114[t114.LEFT_TRIGGER = 5] = "LEFT_TRIGGER", t114[t114.RIGHT_TRIGGER = 6] = "RIGHT_TRIGGER", t114[t114.LEFT_THUMBSTICK = 7] = "LEFT_THUMBSTICK", t114[t114.RIGHT_THUMBSTICK = 8] = "RIGHT_THUMBSTICK";
            var t110, t111, t112, t113, t114, wM, gM = {
                1: fM.BUTTON_EAST,
                2: fM.BUTTON_SOUTH,
                3: fM.BUTTON_NORTH,
                4: fM.BUTTON_WEST,
                9: fM.BUTTON_LEFT_STICK,
                10: fM.BUTTON_RIGHT_STICK,
                11: fM.ROKID_MENU,
                12: fM.ROKID_START,
                13: fM.BUTTON_TRIGGER_LEFT,
                14: fM.BUTTON_TRIGGER_RIGHT
            }, pM = function() {
                function t1() {
                    var _$t, i, n = this;
                    this.Ne = new se, this.Wf = ((_$t = {})[fM.BUTTON_SOUTH] = 0, _$t[fM.BUTTON_EAST] = 0, _$t[fM.BUTTON_WEST] = 0, _$t[fM.BUTTON_NORTH] = 0, _$t[fM.BUTTON_TRIGGER_LEFT] = 0, _$t[fM.BUTTON_TRIGGER_RIGHT] = 0, _$t[fM.TRIGGER_LEFT] = 0, _$t[fM.TRIGGER_RIGHT] = 0, _$t[fM.GRIP_LEFT] = 0, _$t[fM.GRIP_RIGHT] = 0, _$t[fM.LEFT_STICK_UP] = 0, _$t[fM.LEFT_STICK_DOWN] = 0, _$t[fM.LEFT_STICK_LEFT] = 0, _$t[fM.LEFT_STICK_RIGHT] = 0, _$t[fM.RIGHT_STICK_UP] = 0, _$t[fM.RIGHT_STICK_DOWN] = 0, _$t[fM.RIGHT_STICK_LEFT] = 0, _$t[fM.RIGHT_STICK_RIGHT] = 0, _$t[fM.BUTTON_LEFT_STICK] = 0, _$t[fM.BUTTON_RIGHT_STICK] = 0, _$t[fM.ROKID_MENU] = 0, _$t[fM.ROKID_START] = 0, _$t), this.zf = ((i = {})[lM.UNDEFINE] = 0, i[lM.A] = 0, i[lM.B] = 0, i[lM.X] = 0, i[lM.Y] = 0, i[lM.LEFT_TRIGGER] = 0, i[lM.RIGHT_TRIGGER] = 0, i[lM.LEFT_THUMBSTICK] = 0, i[lM.RIGHT_THUMBSTICK] = 0, i), this.Ko(), window.addEventListener("xr-remote-input", function(t1) {
                        var a, v, l, _$s = t1.detail.keyEventType, _$r = t1.detail.stickAxisCode, h = t1.detail.stickAxisValue, e = t1.detail.stickKeyCode, u = t1.detail.isButtonPressed, o = t1.detail.touchCode, f = t1.detail.touchValue;
                        if (_$s === cM.KET_CLICK) {
                            var _$c = gM[e];
                            n.Wf[_$c] = +!!u;
                        } else if (_$s === cM.KET_STICK || _$s === cM.KET_GRAB) {
                            switch(_$r){
                                case vM.LEFT_STICK_X:
                                    a = fM.LEFT_STICK_LEFT, v = fM.LEFT_STICK_RIGHT, l = n.wf(h);
                                    break;
                                case vM.LEFT_STICK_Y:
                                    a = fM.LEFT_STICK_DOWN, v = fM.LEFT_STICK_UP, l = n.wf(h);
                                    break;
                                case vM.RIGHT_STICK_X:
                                    a = fM.RIGHT_STICK_LEFT, v = fM.RIGHT_STICK_RIGHT, l = n.wf(h);
                                    break;
                                case vM.RIGHT_STICK_Y:
                                    a = fM.RIGHT_STICK_DOWN, v = fM.RIGHT_STICK_UP, l = n.wf(h);
                                    break;
                                case vM.L2:
                                    n.Wf[fM.TRIGGER_LEFT] = h;
                                    break;
                                case vM.R2:
                                    n.Wf[fM.TRIGGER_RIGHT] = h;
                                    break;
                                case vM.LEFT_GRIP:
                                    n.Wf[fM.GRIP_LEFT] = h;
                                    break;
                                case vM.RIGHT_GRIP:
                                    n.Wf[fM.GRIP_RIGHT] = h;
                            }
                            a && v && l && (n.Wf[a] = l.negative, n.Wf[v] = l.positive);
                        } else if (_$s === cM.KET_TOUCH) switch(o){
                            case lM.A:
                            case lM.B:
                            case lM.X:
                            case lM.Y:
                            case lM.LEFT_TRIGGER:
                            case lM.RIGHT_TRIGGER:
                            case lM.LEFT_THUMBSTICK:
                            case lM.RIGHT_THUMBSTICK:
                                n.zf[o] = f;
                        }
                        n.Ne.emit("handle-input", new JA("handle-input", n));
                    });
                }
                var i = t1.prototype;
                return i.wf = function(t1) {
                    var i = Math.abs(t1);
                    return t1 > 0 ? {
                        negative: 0,
                        positive: i
                    } : t1 < 0 ? {
                        negative: i,
                        positive: 0
                    } : {
                        negative: 0,
                        positive: 0
                    };
                }, i._on = function(t1, i, n) {
                    this.Ne.on(t1, i, n);
                }, i.Ko = function() {
                    var _$t = this;
                    this.pf = new tM, this.pf.getValue = function() {
                        return _$t.Wf[fM.BUTTON_NORTH];
                    }, this.yf = new tM, this.yf.getValue = function() {
                        return _$t.Wf[fM.BUTTON_EAST];
                    }, this._f = new tM, this._f.getValue = function() {
                        return _$t.Wf[fM.BUTTON_WEST];
                    }, this.mf = new tM, this.mf.getValue = function() {
                        return _$t.Wf[fM.BUTTON_SOUTH];
                    }, this.$f = new tM, this.$f.getValue = function() {
                        return _$t.Wf[fM.BUTTON_TRIGGER_LEFT];
                    }, this.Xf = new tM, this.Xf.getValue = function() {
                        return _$t.Wf[fM.BUTTON_TRIGGER_RIGHT];
                    }, this.qf = new tM, this.qf.getValue = function() {
                        return _$t.Wf[fM.TRIGGER_LEFT];
                    }, this.Yf = new tM, this.Yf.getValue = function() {
                        return _$t.Wf[fM.TRIGGER_RIGHT];
                    }, this.Pf = new tM, this.Pf.getValue = function() {
                        return _$t.Wf[fM.GRIP_LEFT];
                    }, this.Df = new tM, this.Df.getValue = function() {
                        return _$t.Wf[fM.GRIP_RIGHT];
                    }, this.Kf = new tM, this.Kf.getValue = function() {
                        return _$t.Wf[fM.BUTTON_LEFT_STICK];
                    };
                    var i = new tM;
                    i.getValue = function() {
                        return _$t.Wf[fM.LEFT_STICK_UP];
                    };
                    var n = new tM;
                    n.getValue = function() {
                        return _$t.Wf[fM.LEFT_STICK_DOWN];
                    };
                    var _$s = new tM;
                    _$s.getValue = function() {
                        return _$t.Wf[fM.LEFT_STICK_LEFT];
                    };
                    var _$r = new tM;
                    _$r.getValue = function() {
                        return _$t.Wf[fM.LEFT_STICK_RIGHT];
                    }, this.Mf = new nM({
                        up: i,
                        down: n,
                        left: _$s,
                        right: _$r
                    }), this.Jf = new tM, this.Jf.getValue = function() {
                        return _$t.Wf[fM.BUTTON_RIGHT_STICK];
                    };
                    var h = new tM;
                    h.getValue = function() {
                        return _$t.Wf[fM.RIGHT_STICK_UP];
                    };
                    var e = new tM;
                    e.getValue = function() {
                        return _$t.Wf[fM.RIGHT_STICK_DOWN];
                    };
                    var u = new tM;
                    u.getValue = function() {
                        return _$t.Wf[fM.RIGHT_STICK_LEFT];
                    };
                    var o = new tM;
                    o.getValue = function() {
                        return _$t.Wf[fM.RIGHT_STICK_RIGHT];
                    }, this.Cf = new nM({
                        up: h,
                        down: e,
                        left: u,
                        right: o
                    }), this.If = new tM, this.If.getValue = function() {
                        return _$t.Wf[fM.ROKID_MENU];
                    }, this.Nf = new tM, this.Nf.getValue = function() {
                        return _$t.Wf[fM.ROKID_START];
                    }, this.Lf = new rM, this.Lf.getValue = function() {
                        return Ss.ZERO;
                    }, this.Bf = new sM, this.Bf.getValue = function() {
                        return qs.IDENTITY;
                    }, this.Ff = new rM, this.Ff.getValue = function() {
                        return Ss.ZERO;
                    }, this.Uf = new sM, this.Uf.getValue = function() {
                        return qs.IDENTITY;
                    }, this.xf = new rM, this.xf.getValue = function() {
                        return Ss.ZERO;
                    }, this.jf = new sM, this.jf.getValue = function() {
                        return qs.IDENTITY;
                    }, this.Gf = new rM, this.Gf.getValue = function() {
                        return Ss.ZERO;
                    }, this.Hf = new sM, this.Hf.getValue = function() {
                        return qs.IDENTITY;
                    }, this.Qf = new hM, this.Qf.getValue = function() {
                        return _$t.zf[lM.A];
                    }, this.Zf = new hM, this.Zf.getValue = function() {
                        return _$t.zf[lM.B];
                    }, this.tc = new hM, this.tc.getValue = function() {
                        return _$t.zf[lM.X];
                    }, this.nc = new hM, this.nc.getValue = function() {
                        return _$t.zf[lM.Y];
                    }, this.sc = new hM, this.sc.getValue = function() {
                        return _$t.zf[lM.LEFT_TRIGGER];
                    }, this.rc = new hM, this.rc.getValue = function() {
                        return _$t.zf[lM.RIGHT_TRIGGER];
                    }, this.hc = new hM, this.hc.getValue = function() {
                        return _$t.zf[lM.LEFT_THUMBSTICK];
                    }, this.ec = new hM, this.ec.getValue = function() {
                        return _$t.zf[lM.RIGHT_THUMBSTICK];
                    };
                }, s(t1, [
                    {
                        key: "buttonNorth",
                        get: function get() {
                            return this.pf;
                        }
                    },
                    {
                        key: "buttonEast",
                        get: function get() {
                            return this.yf;
                        }
                    },
                    {
                        key: "buttonWest",
                        get: function get() {
                            return this._f;
                        }
                    },
                    {
                        key: "buttonSouth",
                        get: function get() {
                            return this.mf;
                        }
                    },
                    {
                        key: "buttonTriggerLeft",
                        get: function get() {
                            return this.$f;
                        }
                    },
                    {
                        key: "buttonTriggerRight",
                        get: function get() {
                            return this.Xf;
                        }
                    },
                    {
                        key: "triggerLeft",
                        get: function get() {
                            return this.qf;
                        }
                    },
                    {
                        key: "triggerRight",
                        get: function get() {
                            return this.Yf;
                        }
                    },
                    {
                        key: "gripLeft",
                        get: function get() {
                            return this.Pf;
                        }
                    },
                    {
                        key: "gripRight",
                        get: function get() {
                            return this.Df;
                        }
                    },
                    {
                        key: "leftStick",
                        get: function get() {
                            return this.Mf;
                        }
                    },
                    {
                        key: "rightStick",
                        get: function get() {
                            return this.Cf;
                        }
                    },
                    {
                        key: "buttonLeftStick",
                        get: function get() {
                            return this.Kf;
                        }
                    },
                    {
                        key: "buttonRightStick",
                        get: function get() {
                            return this.Jf;
                        }
                    },
                    {
                        key: "buttonOptions",
                        get: function get() {
                            return this.If;
                        }
                    },
                    {
                        key: "buttonStart",
                        get: function get() {
                            return this.Nf;
                        }
                    },
                    {
                        key: "handLeftPosition",
                        get: function get() {
                            return this.Lf;
                        }
                    },
                    {
                        key: "handLeftOrientation",
                        get: function get() {
                            return this.Bf;
                        }
                    },
                    {
                        key: "handRightPosition",
                        get: function get() {
                            return this.Ff;
                        }
                    },
                    {
                        key: "handRightOrientation",
                        get: function get() {
                            return this.Uf;
                        }
                    },
                    {
                        key: "aimLeftPosition",
                        get: function get() {
                            return this.xf;
                        }
                    },
                    {
                        key: "aimLeftOrientation",
                        get: function get() {
                            return this.jf;
                        }
                    },
                    {
                        key: "aimRightPosition",
                        get: function get() {
                            return this.Gf;
                        }
                    },
                    {
                        key: "aimRightOrientation",
                        get: function get() {
                            return this.Hf;
                        }
                    },
                    {
                        key: "touchButtonA",
                        get: function get() {
                            return this.Qf;
                        }
                    },
                    {
                        key: "touchButtonB",
                        get: function get() {
                            return this.Zf;
                        }
                    },
                    {
                        key: "touchButtonX",
                        get: function get() {
                            return this.tc;
                        }
                    },
                    {
                        key: "touchButtonY",
                        get: function get() {
                            return this.nc;
                        }
                    },
                    {
                        key: "touchButtonTriggerLeft",
                        get: function get() {
                            return this.sc;
                        }
                    },
                    {
                        key: "touchButtonTriggerRight",
                        get: function get() {
                            return this.rc;
                        }
                    },
                    {
                        key: "touchButtonThumbStickLeft",
                        get: function get() {
                            return this.hc;
                        }
                    },
                    {
                        key: "touchButtonThumbStickRight",
                        get: function get() {
                            return this.ec;
                        }
                    }
                ]), t1;
            }();
            (t115 = wM || (wM = {}))[t115.VIEW_LEFT = 0] = "VIEW_LEFT", t115[t115.VIEW_RIGHT = 3] = "VIEW_RIGHT", t115[t115.HEAD_MIDDLE = 6] = "HEAD_MIDDLE";
            var t115, yM, _M = function() {
                function t1() {
                    var _$t;
                    this.Ne = new se, this.tf = -1, this.Yo = ((_$t = {})[wM.VIEW_LEFT] = {
                        position: Ss.ZERO,
                        orientation: qs.IDENTITY
                    }, _$t[wM.VIEW_RIGHT] = {
                        position: Ss.ZERO,
                        orientation: qs.IDENTITY
                    }, _$t[wM.HEAD_MIDDLE] = {
                        position: Ss.ZERO,
                        orientation: qs.IDENTITY
                    }, _$t), this.Ko(), this.bt();
                }
                var i = t1.prototype;
                return i.Zo = function() {
                    var _$t = this;
                    return new Promise(function(i) {
                        _$t.tf = setInterval(function() {
                            A.director && A.Director && (clearInterval(_$t.tf), _$t.tf = -1, i());
                        }, 50);
                    });
                }, i.bt = function() {
                    var _$t = this;
                    this.Zo().then(function() {
                        A.director.on(A.Director.EVENT_BEGIN_FRAME, _$t.uc, _$t);
                    }).catch(function() {});
                }, i.uc = function() {
                    var _$t, i = null == (_$t = globalThis.__globalXR) ? void 0 : _$t.webxrHmdPoseInfos;
                    if (i) {
                        for(var n = 0; n < i.length; ++n){
                            var _$s = i[n];
                            this.gf(_$s);
                        }
                        this.Ne.emit("hmd-pose-input", new QA("hmd-pose-input", this));
                    }
                }, i._on = function(t1, i, n) {
                    this.Ne.on(t1, i, n);
                }, i.gf = function(t1) {
                    t1.code !== wM.VIEW_LEFT && t1.code !== wM.VIEW_RIGHT && t1.code !== wM.HEAD_MIDDLE || (this.Yo[t1.code] = {
                        position: new Ss(t1.position.x, t1.position.y, t1.position.z),
                        orientation: new qs(t1.orientation.x, t1.orientation.y, t1.orientation.z, t1.orientation.w)
                    });
                }, i.Ko = function() {
                    var _$t = this;
                    this.oc = new rM, this.oc.getValue = function() {
                        return _$t.Yo[wM.VIEW_LEFT].position;
                    }, this.fc = new sM, this.fc.getValue = function() {
                        return _$t.Yo[wM.VIEW_LEFT].orientation;
                    }, this.ac = new rM, this.ac.getValue = function() {
                        return _$t.Yo[wM.VIEW_RIGHT].position;
                    }, this.vc = new sM, this.vc.getValue = function() {
                        return _$t.Yo[wM.VIEW_RIGHT].orientation;
                    }, this.lc = new rM, this.lc.getValue = function() {
                        return _$t.Yo[wM.HEAD_MIDDLE].position;
                    }, this.dc = new sM, this.dc.getValue = function() {
                        return _$t.Yo[wM.HEAD_MIDDLE].orientation;
                    };
                }, s(t1, [
                    {
                        key: "viewLeftPosition",
                        get: function get() {
                            return this.oc;
                        }
                    },
                    {
                        key: "viewLeftOrientation",
                        get: function get() {
                            return this.fc;
                        }
                    },
                    {
                        key: "viewRightPosition",
                        get: function get() {
                            return this.ac;
                        }
                    },
                    {
                        key: "viewRightOrientation",
                        get: function get() {
                            return this.vc;
                        }
                    },
                    {
                        key: "headMiddlePosition",
                        get: function get() {
                            return this.lc;
                        }
                    },
                    {
                        key: "headMiddleOrientation",
                        get: function get() {
                            return this.dc;
                        }
                    }
                ]), t1;
            }(), mM = function() {
                function t1() {
                    this.Ne = new se, this.Ko();
                }
                var i = t1.prototype;
                return i._on = function(t1, i, n) {
                    this.Ne.on(t1, i, n);
                }, i.Ko = function() {
                    this.wc = new rM, this.wc.getValue = function() {
                        return Ss.ZERO;
                    }, this.gc = new sM, this.gc.getValue = function() {
                        return qs.IDENTITY;
                    };
                }, s(t1, [
                    {
                        key: "handheldPosition",
                        get: function get() {
                            return this.wc;
                        }
                    },
                    {
                        key: "handheldOrientation",
                        get: function get() {
                            return this.gc;
                        }
                    }
                ]), t1;
            }(), bM = {
                Backspace: 8,
                Tab: 9,
                Enter: 13,
                ShiftLeft: 16,
                ControlLeft: 17,
                AltLeft: 18,
                ShiftRight: 2e3,
                ControlRight: 2001,
                AltRight: 2002,
                Pause: 19,
                CapsLock: 20,
                Escape: 27,
                Space: 32,
                PageUp: 33,
                PageDown: 34,
                End: 35,
                Home: 36,
                ArrowLeft: 37,
                ArrowUp: 38,
                ArrowRight: 39,
                ArrowDown: 40,
                Insert: 45,
                Delete: 46,
                Digit0: 48,
                Digit1: 49,
                Digit2: 50,
                Digit3: 51,
                Digit4: 52,
                Digit5: 53,
                Digit6: 54,
                Digit7: 55,
                Digit8: 56,
                Digit9: 57,
                KeyA: 65,
                KeyB: 66,
                KeyC: 67,
                KeyD: 68,
                KeyE: 69,
                KeyF: 70,
                KeyG: 71,
                KeyH: 72,
                KeyI: 73,
                KeyJ: 74,
                KeyK: 75,
                KeyL: 76,
                KeyM: 77,
                KeyN: 78,
                KeyO: 79,
                KeyP: 80,
                KeyQ: 81,
                KeyR: 82,
                KeyS: 83,
                KeyT: 84,
                KeyU: 85,
                KeyV: 86,
                KeyW: 87,
                KeyX: 88,
                KeyY: 89,
                KeyZ: 90,
                Numpad0: 96,
                Numpad1: 97,
                Numpad2: 98,
                Numpad3: 99,
                Numpad4: 100,
                Numpad5: 101,
                Numpad6: 102,
                Numpad7: 103,
                Numpad8: 104,
                Numpad9: 105,
                NumpadMultiply: 106,
                NumpadAdd: 107,
                NumpadSubtract: 109,
                NumpadDecimal: 110,
                NumpadDivide: 111,
                NumpadEnter: 2003,
                F1: 112,
                F2: 113,
                F3: 114,
                F4: 115,
                F5: 116,
                F6: 117,
                F7: 118,
                F8: 119,
                F9: 120,
                F10: 121,
                F11: 122,
                F12: 123,
                NumLock: 144,
                ScrollLock: 145,
                Semicolon: 186,
                Equal: 187,
                Comma: 188,
                Minus: 189,
                Period: 190,
                Slash: 191,
                Backquote: 192,
                BracketLeft: 219,
                Backslash: 220,
                BracketRight: 221,
                Quote: 222
            }, kM = function() {
                function t1() {
                    this.Ne = new se, this.bt();
                }
                var i = t1.prototype;
                return i.dispatchKeyboardDownEvent = function(t1) {
                    this.yc(t1);
                }, i.dispatchKeyboardUpEvent = function(t1) {
                    this._c(t1);
                }, i.on = function(t1, i, n) {
                    this.Ne.on(t1, i, n);
                }, i.bt = function() {
                    var _$t = document.getElementById("GameCanvas");
                    null == _$t || _$t.addEventListener("keydown", this.yc.bind(this)), null == _$t || _$t.addEventListener("keyup", this._c.bind(this));
                }, i.mc = function(t1, i) {
                    return new $A(bM[t1.code] || 0, i);
                }, i.yc = function(t1) {
                    if (t1.stopPropagation(), t1.preventDefault(), t1.repeat) {
                        var i = this.mc(t1, "key-pressing");
                        this.Ne.emit("key-pressing", i);
                    } else {
                        var n = this.mc(t1, "keydown");
                        this.Ne.emit("keydown", n);
                    }
                }, i._c = function(t1) {
                    var i = this.mc(t1, "keyup");
                    t1.stopPropagation(), t1.preventDefault(), this.Ne.emit("keyup", i);
                }, t1;
            }(), AM = function() {
                function t1() {
                    this.Hs = void 0, this.Ne = new se, this.bc = !1, this.mu = !1, this.Ac = new Or, this.qu = void 0, this.Yu = void 0, this.Ku = void 0, le.hasFeature(fe.EVENT_MOUSE) && (this.Hs = document.getElementById("GameCanvas"), this.Hs || W("failed to access canvas"), this.qu = this.Ec("mouse-down"), this.Yu = this.Ec("mouse-move"), this.Ku = this.Ec("mouse-up"), this.bt());
                }
                var i = t1.prototype;
                return i.dispatchMouseDownEvent = function(t1) {
                    this.qu(t1);
                }, i.dispatchMouseMoveEvent = function(t1) {
                    this.Yu(t1);
                }, i.dispatchMouseUpEvent = function(t1) {
                    this.Ku(t1);
                }, i.dispatchScrollEvent = function(t1) {
                    this.Ju(t1);
                }, i.on = function(t1, i, n) {
                    this.Ne.on(t1, i, n);
                }, i.Tc = function() {
                    var _$t = this.Hs, i = null == _$t ? void 0 : _$t.getBoundingClientRect();
                    return i ? new sh(i.x, i.y, i.width, i.height) : new sh(0, 0, 0, 0);
                }, i.Sc = function(t1) {
                    var i = this.Tc(), n = ge.devicePixelRatio, s = this.bc ? this.Ac.x / n + t1.movementX : t1.clientX - i.x, _$r = this.bc ? this.Ac.y / n - t1.movementY : i.y + i.height - t1.clientY;
                    return new Or(s *= n, _$r *= n);
                }, i.bt = function() {
                    var _$t, i, n, s, _$r, h, e = this;
                    window.addEventListener("mousedown", function() {
                        e.mu = !0;
                    }), null == (_$t = this.Hs) || _$t.addEventListener("mousedown", this.qu), null == (i = this.Hs) || i.addEventListener("mousemove", this.Yu), window.addEventListener("mouseup", this.Ku), null == (n = this.Hs) || n.addEventListener("mouseup", this.Ku), null == (s = this.Hs) || s.addEventListener("wheel", this.Ju.bind(this)), this.Oc(), null == (_$r = this.Hs) || _$r.addEventListener("mouseleave", this.Qu.bind(this)), null == (h = this.Hs) || h.addEventListener("mouseenter", this.Zu.bind(this));
                }, i.Oc = function() {
                    var _$t = this, i = function i() {
                        var i = _$t.Hs;
                        document.pointerLockElement === i || document.mozPointerLockElement === i ? _$t.bc = !0 : _$t.bc = !1;
                    };
                    "onpointerlockchange" in document ? document.addEventListener("pointerlockchange", i, !1) : "onmozpointerlockchange" in document && document.addEventListener("mozpointerlockchange", i, !1);
                }, i.Ec = function(t1) {
                    var i = this;
                    return function(n) {
                        var s, _$r = i.Sc(n), h = n.button, e = n.buttons, u = h;
                        switch(t1){
                            case "mouse-down":
                                null == (s = i.Hs) || s.focus(), i.mu = !0;
                                break;
                            case "mouse-up":
                                i.mu = !1;
                                break;
                            case "mouse-move":
                                u = 1 & e ? XA.BUTTON_LEFT : 2 & e ? XA.BUTTON_RIGHT : 4 & e ? XA.BUTTON_MIDDLE : XA.BUTTON_MISSING;
                        }
                        var o = new XA(t1, !1, i.Ac);
                        o.setLocation(_$r.x, _$r.y), o.setButton(u), o.movementX = n.movementX, o.movementY = n.movementY, i.Ac.set(_$r.x, _$r.y), n.stopPropagation(), n.target === i.Hs && n.preventDefault(), i.Ne.emit(t1, o);
                    };
                }, i.Ju = function(t1) {
                    var i = "mouse-wheel", n = this.Sc(t1), s = t1.button, _$r = new XA(i, !1, this.Ac);
                    _$r.setLocation(n.x, n.y), _$r.setButton(s), _$r.movementX = t1.movementX, _$r.movementY = t1.movementY, _$r.setScrollData(5 * t1.deltaX, -(5 * t1.deltaY)), this.Ac.set(n.x, n.y), t1.stopPropagation(), t1.target === this.Hs && t1.preventDefault(), this.Ne.emit(i, _$r);
                }, i.Qu = function() {
                    var _$t = "mouse-leave-window", i = new XA(_$t, !1);
                    this.Ne.emit(_$t, i);
                }, i.Zu = function() {
                    var _$t = "mouse-enter-window", i = new XA(_$t, !1);
                    this.Ne.emit(_$t, i);
                }, i.dispatchEventsInCache = function() {}, t1;
            }(), EM = new Or, TM = new (function() {
                function t1() {
                    this.Ic = new Map, this.Rc = 8;
                }
                var i = t1.prototype;
                return i.Mc = function(t1, i, n) {
                    if (this.Ic.has(t1)) Q(2301);
                    else {
                        if (!this.Cc(t1)) {
                            var s = new nE(i, n, t1);
                            return this.Ic.set(t1, s), this.Nc(s, i, n), s;
                        }
                        Q(2300);
                    }
                }, i.releaseTouch = function(t1) {
                    this.Ic.has(t1) && this.Ic.delete(t1);
                }, i.getTouch = function(t1) {
                    return this.Ic.get(t1);
                }, i.getOrCreateTouch = function(t1, i, n) {
                    var s = this.getTouch(t1);
                    return s ? this.Nc(s, i, n) : s = this.Mc(t1, i, n), s;
                }, i.getAllTouches = function() {
                    var _$t = [];
                    return this.Ic.forEach(function(i) {
                        i && _$t.push(i);
                    }), _$t;
                }, i.getTouchCount = function() {
                    return this.Ic.size;
                }, i.Nc = function(t1, i, n) {
                    t1.getLocation(EM), t1.setPrevPoint(EM), t1.setPoint(i, n);
                }, i.Cc = function(t1) {
                    var i = this;
                    if (this.Ic.has(t1)) return !1;
                    var n = Ti.ENABLE_MULTI_TOUCH ? this.Rc : 1;
                    if (this.Ic.size < n) return !1;
                    var s = performance.now();
                    return this.Ic.forEach(function(t1) {
                        s - t1.lastModified > Ti.TOUCH_TIMEOUT && (Q(2302, t1.getID()), i.releaseTouch(t1.getID()));
                    }), n >= this.Ic.size;
                }, t1;
            }()), SM = function() {
                function t1() {
                    this.Hs = void 0, this.Ne = new se, le.hasFeature(fe.INPUT_TOUCH) && (this.Hs = document.getElementById("GameCanvas"), this.Hs || W("failed to access canvas"), this.bt());
                }
                var i = t1.prototype;
                return i.bt = function() {
                    var _$t, i, n, s;
                    null == (_$t = this.Hs) || _$t.addEventListener("touchstart", this.Ec("touch-start")), null == (i = this.Hs) || i.addEventListener("touchmove", this.Ec("touch-move")), null == (n = this.Hs) || n.addEventListener("touchend", this.Ec("touch-end")), null == (s = this.Hs) || s.addEventListener("touchcancel", this.Ec("touch-cancel"));
                }, i.Ec = function(t1) {
                    var i = this;
                    return function(n) {
                        for(var s, _$r = i.Tc(), h = [], e = n.changedTouches.length, u = 0; u < e; ++u){
                            var o = n.changedTouches[u], f = o.identifier;
                            if (null !== f) {
                                var _$c = i.Sc(o, _$r), a = TM.getOrCreateTouch(f, _$c.x, _$c.y);
                                a && ("touch-end" !== t1 && "touch-cancel" !== t1 || TM.releaseTouch(f), h.push(a));
                            }
                        }
                        if (n.stopPropagation(), n.target === i.Hs && n.preventDefault(), "touch-start" === t1 && (null == (s = i.Hs) || s.focus()), h.length > 0) {
                            var v = new YA(h, !1, t1, TM.getAllTouches());
                            i.Ne.emit(t1, v);
                        }
                    };
                }, i.Tc = function() {
                    var _$t = this.Hs, i = null == _$t ? void 0 : _$t.getBoundingClientRect();
                    return i ? new sh(i.x, i.y, i.width, i.height) : new sh(0, 0, 0, 0);
                }, i.Sc = function(t1, i) {
                    var n = t1.clientX - i.x, s = i.y + i.height - t1.clientY;
                    if (ge.isFrameRotated) {
                        var _$r = n;
                        n = i.height - s, s = _$r;
                    }
                    var h = ge.devicePixelRatio;
                    return new Or(n *= h, s *= h);
                }, i.on = function(t1, i, n) {
                    this.Ne.on(t1, i, n);
                }, i.dispatchEventsInCache = function() {}, t1;
            }(), OM = function() {
                function t1(t1) {
                    this.priority = 0, this.Pc = t1;
                }
                var i = t1.prototype;
                return i.onThrowException = function() {}, i.dispatchEvent = function(t1) {
                    return this.Pc.emit(t1.type, t1), !0;
                }, t1;
            }(), IM = ((yM = {})["mouse-down"] = "touch-start", yM["mouse-move"] = "touch-move", yM["mouse-up"] = "touch-end", yM), RM = t1("e4", function() {
                function t1() {
                    this.Ne = new se, this.Dc = new SM, this.Lc = new AM, this.Bc = new kM, this.Fc = new zR, this.Uc = [], this.xc = [], this.jc = [], this.Gc = [], this.Hc = [], this.Vc = [], this.Wc = !1, this.zc = [], this.$c = new pM, this.Xc = new _M, this.qc = new mM, this.bt(), this.Yc = new OM(this.Ne), this._registerEventDispatcher(this.Yc), dM._init();
                }
                var i = t1.prototype;
                return i.Kc = function(t1) {
                    var i, n;
                    null == (i = (n = this.Lc).dispatchMouseDownEvent) || i.call(n, t1);
                }, i.Jc = function(t1) {
                    var i, n;
                    null == (i = (n = this.Lc).dispatchMouseMoveEvent) || i.call(n, t1);
                }, i.Qc = function(t1) {
                    var i, n;
                    null == (i = (n = this.Lc).dispatchMouseUpEvent) || i.call(n, t1);
                }, i.Zc = function(t1) {
                    var i, n;
                    null == (i = (n = this.Lc).dispatchScrollEvent) || i.call(n, t1);
                }, i.ta = function(t1) {
                    var i, n;
                    null == (i = (n = this.Bc).dispatchKeyboardDownEvent) || i.call(n, t1);
                }, i.na = function(t1) {
                    var i, n;
                    null == (i = (n = this.Bc).dispatchKeyboardUpEvent) || i.call(n, t1);
                }, i.on = function(t1, i, n) {
                    return this.Ne.on(t1, i, n), i;
                }, i.once = function(t1, i, n) {
                    return this.Ne.once(t1, i, n), i;
                }, i.off = function(t1, i, n) {
                    this.Ne.off(t1, i, n);
                }, i.getTouch = function(t1) {
                    return TM.getTouch(t1);
                }, i.getAllTouches = function() {
                    return TM.getAllTouches();
                }, i.getTouchCount = function() {
                    return TM.getTouchCount();
                }, i.setAccelerometerEnabled = function(t1) {
                    t1 ? this.Fc.start() : this.Fc.stop();
                }, i.setAccelerometerInterval = function(t1) {
                    this.Fc.setInterval(t1);
                }, i.sa = function(t1) {
                    var i = IM[t1.type], n = TM.getOrCreateTouch(0, t1.getLocationX(), t1.getLocationY());
                    if (n) {
                        var s = [
                            n
                        ], _$r = new YA(s, !1, i, "touch-end" === i ? [] : s);
                        _$r.windowId = t1.windowId, "touch-end" === i && TM.releaseTouch(0), this.ra(_$r);
                    }
                }, i._registerEventDispatcher = function(t1) {
                    this.zc.push(t1), this.zc.sort(function(t1, i) {
                        return i.priority - t1.priority;
                    });
                }, i.ha = function(t1) {
                    for(var i = this.zc.length, n = 0; n < i; ++n){
                        var s = this.zc[n];
                        try {
                            if (!s.dispatchEvent(t1)) break;
                        } catch (t1) {
                            throw this._clearEvents(), s.onThrowException(), t1;
                        }
                    }
                }, i.bt = function() {
                    var _$t = this, i = _$t.Dc, n = _$t.Lc, s = _$t.Bc, _$r = _$t.$c;
                    if (_e.hasFeature(_e.Feature.INPUT_TOUCH) && (i.on("touch-start", function(i) {
                        _$t.ra(i);
                    }), i.on("touch-move", function(i) {
                        _$t.ra(i);
                    }), i.on("touch-end", function(i) {
                        _$t.ra(i);
                    }), i.on("touch-cancel", function(i) {
                        _$t.ra(i);
                    })), _e.hasFeature(_e.Feature.EVENT_MOUSE) && (n.on("mouse-down", function(i) {
                        _$t.Wc = !0, _$t.sa(i), _$t.ea(i);
                    }), n.on("mouse-move", function(i) {
                        _$t.Wc && _$t.sa(i), _$t.ea(i);
                    }), n.on("mouse-up", function(i) {
                        _$t.Wc = !1, _$t.sa(i), _$t.ea(i);
                    }), n.on("mouse-wheel", function(i) {
                        _$t.ea(i);
                    }), n.on("mouse-leave-window", function(i) {
                        _$t.ea(i);
                    }), n.on("mouse-enter-window", function(i) {
                        _$t.ea(i);
                    })), _e.hasFeature(_e.Feature.EVENT_KEYBOARD)) {
                        var h = _$t.Uc;
                        s.on("keydown", function(i) {
                            _$t.ua(i, h);
                        }), s.on("key-pressing", function(i) {
                            _$t.ua(i, h);
                        }), s.on("keyup", function(i) {
                            _$t.ua(i, h);
                        });
                    }
                    if (_e.hasFeature(_e.Feature.EVENT_ACCELEROMETER)) {
                        var e = _$t.xc;
                        _$t.Fc.on("devicemotion", function(i) {
                            _$t.ua(i, e);
                        });
                    }
                    if (_e.hasFeature(_e.Feature.EVENT_GAMEPAD)) {
                        var u = _$t.jc;
                        dM._on("gamepad-change", function(i) {
                            _$t.ua(i, u);
                        }), dM._on("gamepad-input", function(i) {
                            _$t.ua(i, u);
                        }), dM._on("handle-pose-input", function(i) {
                            _$t.ua(i, u);
                        });
                    }
                    if (_e.hasFeature(_e.Feature.EVENT_HANDLE)) {
                        var o = _$t.Gc;
                        _$r._on("handle-input", function(i) {
                            _$t.ua(i, o);
                        }), _$r._on("handle-pose-input", function(i) {
                            _$t.ua(i, o);
                        });
                    }
                    if (_e.hasFeature(_e.Feature.EVENT_HMD)) {
                        var f = _$t.Hc;
                        _$t.Xc._on("hmd-pose-input", function(i) {
                            _$t.ua(i, f);
                        });
                    }
                    if (_e.hasFeature(_e.Feature.EVENT_HANDHELD)) {
                        var _$c = _$t.Vc;
                        _$t.qc._on("handheld-pose-input", function(i) {
                            _$t.ua(i, _$c);
                        });
                    }
                }, i._clearEvents = function() {
                    this.Uc.length = 0, this.xc.length = 0, this.jc.length = 0, this.Gc.length = 0, this.Hc.length = 0;
                }, i.ua = function(t1) {
                    this.ha(t1);
                }, i.ea = function(t1) {
                    this.ha(t1);
                }, i.ra = function(t1) {
                    for(var i = t1.getTouches(), n = i.length, s = 0; s < n; ++s)t1.touch = i[s], t1.propagationStopped = t1.propagationImmediateStopped = !1, this.ha(t1);
                }, i._frameDispatchEvents = function() {}, t1;
            }());
            RM.EventType = {
                TOUCH_START: "touch-start",
                TOUCH_MOVE: "touch-move",
                TOUCH_END: "touch-end",
                TOUCH_CANCEL: "touch-cancel",
                MOUSE_DOWN: "mouse-down",
                MOUSE_MOVE: "mouse-move",
                MOUSE_UP: "mouse-up",
                MOUSE_LEAVE: "mouse-leave-window",
                MOUSE_ENTER: "mouse-enter-window",
                MOUSE_WHEEL: "mouse-wheel",
                KEY_DOWN: "keydown",
                KEY_PRESSING: "key-pressing",
                KEY_UP: "keyup",
                DEVICEMOTION: "devicemotion",
                GAMEPAD_INPUT: "gamepad-input",
                GAMEPAD_CHANGE: "gamepad-change",
                HANDLE_INPUT: "handle-input",
                HANDLE_POSE_INPUT: "handle-pose-input",
                HMD_POSE_INPUT: "hmd-pose-input",
                HANDHELD_POSE_INPUT: "handheld-pose-input"
            };
            var MM = t1("e3", new RM), CM = t1("e6", function(t1) {
                function i() {
                    var _$i;
                    return _$i = t1.call(this) || this, MM.on("mouse-down", function(t1) {
                        _$i.emit("mouse-down", t1);
                    }), MM.on("mouse-move", function(t1) {
                        _$i.emit("mouse-move", t1);
                    }), MM.on("mouse-up", function(t1) {
                        _$i.emit("mouse-up", t1);
                    }), MM.on("mouse-wheel", function(t1) {
                        _$i.emit("mouse-wheel", t1);
                    }), MM.on("touch-start", function(t1) {
                        _$i.emit("touch-start", t1.touch, t1);
                    }), MM.on("touch-move", function(t1) {
                        _$i.emit("touch-move", t1.touch, t1);
                    }), MM.on("touch-end", function(t1) {
                        _$i.emit("touch-end", t1.touch, t1);
                    }), MM.on("touch-cancel", function(t1) {
                        _$i.emit("touch-cancel", t1.touch, t1);
                    }), MM.on("keydown", function(t1) {
                        _$i.emit("keydown", t1);
                    }), MM.on("key-pressing", function(t1) {
                        _$i.emit("keydown", t1);
                    }), MM.on("keyup", function(t1) {
                        _$i.emit("keyup", t1);
                    }), MM.on("devicemotion", function(t1) {
                        _$i.emit("devicemotion", t1);
                    }), _$i;
                }
                h(i, t1);
                var n = i.prototype;
                return n.setAccelerometerEnabled = function(t1) {
                    MM.setAccelerometerEnabled(t1);
                }, n.setAccelerometerInterval = function(t1) {
                    MM.setAccelerometerInterval(t1);
                }, n.on = function(i, n, s, r) {
                    return t1.prototype.on.call(this, i, n, s, r), n;
                }, n.off = function(i, n, s) {
                    t1.prototype.off.call(this, i, n, s);
                }, i;
            }(se));
            CM.EventType = tE, A.SystemEvent = CM, A.systemEvent = t1("e5", new CM);
            var PM = {
                VERTICAL: 0,
                HORIZONTAL: 1
            }, DM = {
                ORTHO: 0,
                PERSPECTIVE: 1
            }, LM = {
                F1_8: 0,
                F2_0: 1,
                F2_2: 2,
                F2_5: 3,
                F2_8: 4,
                F3_2: 5,
                F3_5: 6,
                F4_0: 7,
                F4_5: 8,
                F5_0: 9,
                F5_6: 10,
                F6_3: 11,
                F7_1: 12,
                F8_0: 13,
                F9_0: 14,
                F10_0: 15,
                F11_0: 16,
                F13_0: 17,
                F14_0: 18,
                F16_0: 19,
                F18_0: 20,
                F20_0: 21,
                F22_0: 22
            }, BM = {
                ISO100: 0,
                ISO200: 1,
                ISO400: 2,
                ISO800: 3
            }, FM = {
                D1: 0,
                D2: 1,
                D4: 2,
                D8: 3,
                D15: 4,
                D30: 5,
                D60: 6,
                D125: 7,
                D250: 8,
                D500: 9,
                D1000: 10,
                D2000: 11,
                D4000: 12
            }, UM = [
                1.8,
                2,
                2.2,
                2.5,
                2.8,
                3.2,
                3.5,
                4,
                4.5,
                5,
                5.6,
                6.3,
                7.1,
                8,
                9,
                10,
                11,
                13,
                14,
                16,
                18,
                20,
                22
            ], xM = [
                1,
                .5,
                1 / 4,
                1 / 8,
                1 / 15,
                1 / 30,
                1 / 60,
                .008,
                .004,
                .002,
                .001,
                5e-4,
                1 / 4e3
            ], jM = [
                100,
                200,
                400,
                800
            ], GM = Os(), HM = Os(), VM = lr(), WM = [], zM = 0, $M = function() {
                function t1(t1) {
                    if (this.isWindowSize = !0, this.screenScale = 1, this.postProcess = null, this.usePostProcess = !1, this.pipeline = "", this.pipelineSettings = null, this.oa = null, this.yu = null, this.Ps = null, this.fa = !1, this.ca = -1, this.va = 1, this.la = 10, this.da = 0, this.wa = Gn(45), this.ga = 1, this.ya = 1e3, this._a = new xl(.2, .2, .2, 1), this.ma = rh(0, 0, 1, 1), this.Aa = rh(0, 0, 1, 1), this.Ea = 0, this.Ta = !0, this.Sa = lr(), this.Oa = lr(), this.Ia = lr(), this.Ra = lr(), this.Ma = lr(), this.Ca = new He, this.Na = Os(), this.Pa = Os(), this.Da = 0, this.La = 19, this.Ba = 7, this.Fa = 0, this.Ua = 0, this.xa = 0, this.iu = null, this.Qn = 1, this.Zn = 1, this.ja = 0, this.Ga = 1, this.Ha = q_, this.Va = 0, this.Wa = 0, this.za = null, this.$a = 0, this.Xa = -1, this.qa = 0, this.pn = 100, this.Ya = zM++, this.Pe = t1, this.Ka = UM[this.La], this.Fa = xM[this.Ba], this.xa = jM[this.Ua], this.Ca.accurate = !0, !WM.length) {
                        var i = t1.capabilities.clipSpaceSignY;
                        WM[0] = new cr(1, 0, 0, 0, 0, i), WM[1] = new cr(0, 1, 0, 0, -i, 0), WM[2] = new cr(-1, 0, 0, 0, 0, -i), WM[3] = new cr(0, -1, 0, 0, i, 0);
                    }
                }
                var i = t1.prototype;
                return i.Ja = function(t1) {
                    if (void 0 === t1 && (t1 = !0), this.va = this.window.width * this.ma.width / (this.window.height * this.ma.height), t1) {
                        var i = this.window.swapchain;
                        (i && i.surfaceTransform || 0) % 2 && (this.va = 1 / this.va);
                    }
                    this.Ta = !0;
                }, i.initialize = function(t1) {
                    void 0 !== t1.usage ? this.pn = t1.usage : this.Qa(), void 0 !== t1.trackingType && (this.qa = t1.trackingType), void 0 !== t1.cameraType && (this.Xa = t1.cameraType), this.node = t1.node, this.Qn = 1, this.Zn = 1, this.clearFlag = 0, this.clearDepth = 1, this.visibility = q_, this.Ps = t1.name, this.ca = t1.projection, this.Da = t1.priority || 0, this.va = this.screenScale = 1, this.Za(), this.changeTargetWindow(t1.window);
                }, i.destroy = function() {
                    var _$t;
                    this.yu = null, this.detachFromScene(), this.iu && (this.iu.detachCamera(this), this.window = null), this.Ps = null, null == (_$t = this.za) || _$t.destroy();
                }, i.attachToScene = function(t1) {
                    this.fa = !0, this.oa = t1;
                }, i.detachFromScene = function() {
                    this.fa = !1, this.oa = null;
                }, i.resize = function(t1, i) {
                    this.iu && (this.Qn = t1, this.Zn = i, this.va = t1 * this.ma.width / (i * this.ma.height), this.Ta = !0);
                }, i.setFixedSize = function(t1, i) {
                    this.Qn = t1, this.Zn = i, this.Ja(), this.isWindowSize = !1;
                }, i.syncCameraEditor = function() {}, i.update = function(t1) {
                    var i;
                    if (void 0 === t1 && (t1 = !1), this.yu) {
                        var n = !1, _$s = this.Na, _$r = this.Sa, h = this.Oa;
                        (this.yu.hasChangedFlags || t1) && (cr.invert(_$r, this.yu.worldMatrix), _$s.x = -_$r.m02, _$s.y = -_$r.m06, _$s.z = -_$r.m10, cr.multiply(_$r, (new cr).scale(this.yu.worldScale), _$r), this.yu.getWorldPosition(this.Pa), n = !0);
                        var e = null == (i = this.window) ? void 0 : i.swapchain, u = e && e.surfaceTransform || 0;
                        if (this.Ta || this.Ea !== u) {
                            this.Ea = u;
                            var o = this.Pe.capabilities.clipSpaceSignY;
                            if (1 === this.ca) cr.perspective(h, this.wa, this.va, this.ga, this.ya, 0 === this.da, this.Pe.capabilities.clipSpaceMinZ, o, u);
                            else {
                                var f = this.la * this.va, _$c = this.la;
                                cr.ortho(h, -f, f, -_$c, _$c, this.ga, this.ya, this.Pe.capabilities.clipSpaceMinZ, o, u);
                            }
                            cr.invert(this.Ia, h), n = !0, this.Ta = !1;
                        }
                        n && (cr.multiply(this.Ra, h, _$r), cr.invert(this.Ma, this.Ra), this.Ca.update(this.Ra, this.Ma));
                    }
                }, i.setViewportInOrientedSpace = function(t1) {
                    var i, n = t1.x, _$s = t1.width, _$r = t1.height, h = this.Pe.capabilities.screenSpaceSignY < 0 ? 1 - t1.y - _$r : t1.y, e = null == (i = this.window) ? void 0 : i.swapchain;
                    switch(e && e.surfaceTransform || 0){
                        case 1:
                            this.ma.x = 1 - h - _$r, this.ma.y = n, this.ma.width = _$r, this.ma.height = _$s;
                            break;
                        case 2:
                            this.ma.x = 1 - n - _$s, this.ma.y = 1 - h - _$r, this.ma.width = _$s, this.ma.height = _$r;
                            break;
                        case 3:
                            this.ma.x = h, this.ma.y = 1 - n - _$s, this.ma.width = _$r, this.ma.height = _$s;
                            break;
                        case 0:
                            this.ma.x = n, this.ma.y = h, this.ma.width = _$s, this.ma.height = _$r;
                    }
                    this.Aa.x = n, this.Aa.y = h, this.Aa.width = _$s, this.Aa.height = _$r, this.resize(this.width, this.height);
                }, i.initGeometryRenderer = function() {
                    if (!this.za) {
                        var _$t, i = A.internal.GeometryRenderer;
                        this.za = i ? new i : null, null == (_$t = this.za) || _$t.activate(this.Pe);
                    }
                }, i.changeTargetWindow = function(t1) {
                    void 0 === t1 && (t1 = null), this.iu && this.iu.detachCamera(this);
                    var i = t1 || A.director.root.mainWindow;
                    if (i) {
                        i.attachCamera(this), this.window = i;
                        var n = i.swapchain;
                        (n && n.surfaceTransform || 0) % 2 ? this.resize(i.height, i.width) : this.resize(i.width, i.height);
                    }
                }, i.detachCamera = function() {
                    this.iu && this.iu.detachCamera(this);
                }, i.screenPointToRay = function(t1, i, n) {
                    if (!this.yu) return null;
                    var _$s = this.width, _$r = this.height, h = this.Aa.x * _$s, e = this.Aa.y * _$r, u = this.Aa.width * _$s, o = this.Aa.height * _$r, f = 1 === this.ca, _$c = this.Pe.capabilities.clipSpaceSignY, a = sr[this.Ea];
                    Ss.set(GM, (i - h) / u * 2 - 1, (n - e) / o * 2 - 1, f ? 1 : -1);
                    var v = GM.x, l = GM.y;
                    return GM.x = v * a[0] + l * a[2] * _$c, GM.y = v * a[1] + l * a[3] * _$c, Ss.transformMat4(f ? GM : t1.o, GM, this.Ma), f ? (this.yu.getWorldPosition(HM), Sh.fromPoints(t1, HM, GM)) : Ss.transformQuat(t1.d, Ss.FORWARD, this.yu.worldRotation), t1;
                }, i.screenToWorld = function(t1, i) {
                    var n = this.width, _$s = this.height, _$r = this.Aa.x * n, h = this.Aa.y * _$s, e = this.Aa.width * n, u = this.Aa.height * _$s, o = this.Pe.capabilities.clipSpaceSignY, f = sr[this.Ea];
                    if (1 === this.ca) {
                        Ss.set(t1, (i.x - _$r) / e * 2 - 1, (i.y - h) / u * 2 - 1, 1);
                        var _$c = t1.x, a = t1.y;
                        t1.x = _$c * f[0] + a * f[2] * o, t1.y = _$c * f[1] + a * f[3] * o, Ss.transformMat4(t1, t1, this.Ma), this.yu && this.yu.getWorldPosition(GM), Ss.lerp(t1, GM, t1, jn(this.ga / this.ya, 1, i.z));
                    } else {
                        Ss.set(t1, (i.x - _$r) / e * 2 - 1, (i.y - h) / u * 2 - 1, 2 * i.z - 1);
                        var v = t1.x, l = t1.y;
                        t1.x = v * f[0] + l * f[2] * o, t1.y = v * f[1] + l * f[3] * o, Ss.transformMat4(t1, t1, this.Ma);
                    }
                    return t1;
                }, i.worldToScreen = function(t1, i) {
                    var n = this.Pe.capabilities.clipSpaceSignY, _$s = sr[this.Ea];
                    Ss.transformMat4(t1, i, this.Ra);
                    var _$r = t1.x, h = t1.y;
                    t1.x = _$r * _$s[0] + h * _$s[2] * n, t1.y = _$r * _$s[1] + h * _$s[3] * n;
                    var e = this.width, u = this.height, o = this.Aa.x * e, f = this.Aa.y * u, _$c = this.Aa.width * e, a = this.Aa.height * u;
                    return t1.x = o + .5 * (t1.x + 1) * _$c, t1.y = f + .5 * (t1.y + 1) * a, t1.z = .5 * t1.z + .5, t1;
                }, i.worldMatrixToScreen = function(t1, i, n, s) {
                    cr.multiply(t1, this.Ra, i), cr.multiply(t1, WM[this.Ea], t1);
                    var _$r = n / 2, h = s / 2;
                    return cr.identity(VM), cr.transform(VM, VM, Ss.set(GM, _$r, h, 0)), cr.scale(VM, VM, Ss.set(GM, _$r, h, 1)), cr.multiply(t1, VM, t1), t1;
                }, i.calculateObliqueMat = function(t1) {
                    var i = new Hr(Math.sign(t1.x), Math.sign(t1.y), 1, 1).transformMat4(this.Ia), n = new Hr(this.Oa.m03, this.Oa.m07, this.Oa.m11, this.Oa.m15), _$s = 2 / Hr.dot(t1, i), _$r = t1.multiplyScalar(_$s).subtract(n);
                    this.Oa.m02 = _$r.x, this.Oa.m06 = _$r.y, this.Oa.m10 = _$r.z, this.Oa.m14 = _$r.w;
                }, i.getClipSpaceMinz = function() {
                    return this.Pe.capabilities.clipSpaceMinZ;
                }, i.setExposure = function(t1) {
                    this.Va = .833333 / Math.pow(2, t1);
                }, i.Za = function() {
                    var _$t = Math.log2(this.Ka * this.Ka / this.Fa * 100 / this.xa);
                    this.setExposure(_$t);
                }, i.Qa = function() {
                    this.pn = 100;
                }, s(t1, [
                    {
                        key: "name",
                        get: function get() {
                            return this.Ps;
                        }
                    },
                    {
                        key: "scene",
                        get: function get() {
                            return this.oa;
                        }
                    },
                    {
                        key: "node",
                        get: function get() {
                            return this.yu;
                        },
                        set: function set(t1) {
                            this.yu = t1;
                        }
                    },
                    {
                        key: "systemWindowId",
                        get: function get() {
                            return this.$a;
                        }
                    },
                    {
                        key: "window",
                        get: function get() {
                            return this.iu;
                        },
                        set: function set(t1) {
                            this.iu = t1;
                        }
                    },
                    {
                        key: "enabled",
                        get: function get() {
                            return this.fa;
                        },
                        set: function set(t1) {
                            this.fa = t1;
                        }
                    },
                    {
                        key: "visibility",
                        get: function get() {
                            return this.Ha;
                        },
                        set: function set(t1) {
                            this.Ha = t1;
                        }
                    },
                    {
                        key: "priority",
                        get: function get() {
                            return this.Da;
                        },
                        set: function set(t1) {
                            this.Da = t1;
                        }
                    },
                    {
                        key: "width",
                        get: function get() {
                            return this.Qn;
                        }
                    },
                    {
                        key: "height",
                        get: function get() {
                            return this.Zn;
                        }
                    },
                    {
                        key: "position",
                        get: function get() {
                            return this.Pa;
                        },
                        set: function set(t1) {
                            this.Pa = t1;
                        }
                    },
                    {
                        key: "forward",
                        get: function get() {
                            return this.Na;
                        },
                        set: function set(t1) {
                            this.Na = t1;
                        }
                    },
                    {
                        key: "aperture",
                        get: function get() {
                            return this.La;
                        },
                        set: function set(t1) {
                            this.La = t1, this.Ka = UM[this.La], this.Za();
                        }
                    },
                    {
                        key: "apertureValue",
                        get: function get() {
                            return this.Ka;
                        }
                    },
                    {
                        key: "shutter",
                        get: function get() {
                            return this.Ba;
                        },
                        set: function set(t1) {
                            this.Ba = t1, this.Fa = xM[this.Ba], this.Za();
                        }
                    },
                    {
                        key: "shutterValue",
                        get: function get() {
                            return this.Fa;
                        }
                    },
                    {
                        key: "iso",
                        get: function get() {
                            return this.Ua;
                        },
                        set: function set(t1) {
                            this.Ua = t1, this.xa = jM[this.Ua], this.Za();
                        }
                    },
                    {
                        key: "isoValue",
                        get: function get() {
                            return this.xa;
                        }
                    },
                    {
                        key: "exposure",
                        get: function get() {
                            return this.Va;
                        }
                    },
                    {
                        key: "clearFlag",
                        get: function get() {
                            return this.ja;
                        },
                        set: function set(t1) {
                            this.ja = t1;
                        }
                    },
                    {
                        key: "clearColor",
                        get: function get() {
                            return this._a;
                        },
                        set: function set(t1) {
                            this._a.x = t1.x, this._a.y = t1.y, this._a.z = t1.z, this._a.w = t1.w;
                        }
                    },
                    {
                        key: "clearDepth",
                        get: function get() {
                            return this.Ga;
                        },
                        set: function set(t1) {
                            this.Ga = t1;
                        }
                    },
                    {
                        key: "clearStencil",
                        get: function get() {
                            return this.Wa;
                        },
                        set: function set(t1) {
                            this.Wa = t1;
                        }
                    },
                    {
                        key: "projectionType",
                        get: function get() {
                            return this.ca;
                        },
                        set: function set(t1) {
                            this.ca = t1, this.Ta = !0;
                        }
                    },
                    {
                        key: "aspect",
                        get: function get() {
                            return this.va;
                        }
                    },
                    {
                        key: "orthoHeight",
                        get: function get() {
                            return this.la;
                        },
                        set: function set(t1) {
                            this.la = t1, this.Ta = !0;
                        }
                    },
                    {
                        key: "fovAxis",
                        get: function get() {
                            return this.da;
                        },
                        set: function set(t1) {
                            this.da = t1, this.Ta = !0;
                        }
                    },
                    {
                        key: "fov",
                        get: function get() {
                            return this.wa;
                        },
                        set: function set(t1) {
                            this.wa = t1, this.Ta = !0;
                        }
                    },
                    {
                        key: "nearClip",
                        get: function get() {
                            return this.ga;
                        },
                        set: function set(t1) {
                            this.ga = t1, this.Ta = !0;
                        }
                    },
                    {
                        key: "farClip",
                        get: function get() {
                            return this.ya;
                        },
                        set: function set(t1) {
                            this.ya = t1, this.Ta = !0;
                        }
                    },
                    {
                        key: "viewport",
                        get: function get() {
                            return this.ma;
                        },
                        set: function set(t1) {
                            nt(8302), this.setViewportInOrientedSpace(t1);
                        }
                    },
                    {
                        key: "frustum",
                        get: function get() {
                            return this.Ca;
                        },
                        set: function set(t1) {
                            this.Ca = t1;
                        }
                    },
                    {
                        key: "matView",
                        get: function get() {
                            return this.Sa;
                        }
                    },
                    {
                        key: "matProj",
                        get: function get() {
                            return this.Oa;
                        }
                    },
                    {
                        key: "matProjInv",
                        get: function get() {
                            return this.Ia;
                        }
                    },
                    {
                        key: "matViewProj",
                        get: function get() {
                            return this.Ra;
                        }
                    },
                    {
                        key: "matViewProjInv",
                        get: function get() {
                            return this.Ma;
                        }
                    },
                    {
                        key: "cameraId",
                        get: function get() {
                            return this.Ya;
                        }
                    },
                    {
                        key: "surfaceTransform",
                        get: function get() {
                            return this.Ea;
                        }
                    },
                    {
                        key: "geometryRenderer",
                        get: function get() {
                            return this.za;
                        }
                    },
                    {
                        key: "cameraType",
                        get: function get() {
                            return this.Xa;
                        },
                        set: function set(t1) {
                            this.Xa = t1;
                        }
                    },
                    {
                        key: "trackingType",
                        get: function get() {
                            return this.qa;
                        },
                        set: function set(t1) {
                            this.qa = t1;
                        }
                    },
                    {
                        key: "cameraUsage",
                        get: function get() {
                            return this.pn;
                        },
                        set: function set(t1) {
                            this.pn = t1;
                        }
                    }
                ], [
                    {
                        key: "standardExposureValue",
                        get: function get() {
                            return 1 / 38400;
                        }
                    },
                    {
                        key: "standardLightMeterScale",
                        get: function get() {
                            return 1e4;
                        }
                    }
                ]), t1;
            }(), XM = new kd(null), qM = function() {
                function t1() {
                    this._device = null, this._passes = null, this._shaders = null, this._subMesh = null, this._patches = null, this._priority = 128, this._inputAssembler = null, this._descriptorSet = null, this._worldBoundDescriptorSet = null, this._instancedAttributeBlock = {
                        buffer: null,
                        views: [],
                        attributes: []
                    }, this._instancedWorldMatrixIndex = -1, this._instancedSHIndex = -1, this._useReflectionProbeType = 0;
                }
                var i = t1.prototype;
                return i.initialize = function(t1, i, n) {
                    void 0 === n && (n = null), A.director.root, this._device = kw.gfxDevice, XM.layout = i[0].localSetLayout, this._inputAssembler = this._device.createInputAssembler(t1.iaInfo), this._descriptorSet = this._device.createDescriptorSet(XM);
                    var _$s = A.director.root.pipeline.pipelineSceneData.getOcclusionQueryPass();
                    if (_$s) {
                        var _$r = new kd(null);
                        _$r.layout = _$s.localSetLayout, this._worldBoundDescriptorSet = this._device.createDescriptorSet(_$r);
                    }
                    this._subMesh = t1, this._patches = n ? n.sort() : null, this._passes = i, this._flushPassInfo(), this.priority = 128;
                }, i.destroy = function() {
                    this._descriptorSet.destroy(), this._descriptorSet = null, this._inputAssembler.destroy(), this._inputAssembler = null, this._worldBoundDescriptorSet && this._worldBoundDescriptorSet.destroy(), this._worldBoundDescriptorSet = null, this.priority = 128, this._patches = null, this._subMesh = null, this._passes = null, this._shaders = null;
                }, i.update = function() {
                    for(var _$t = 0; _$t < this._passes.length; ++_$t)this._passes[_$t].update();
                    this._descriptorSet.update(), this._worldBoundDescriptorSet && this._worldBoundDescriptorSet.update();
                }, i.tv = function() {
                    var _$t = this._passes;
                    _$t && (_$t.forEach(function(t1) {
                        t1.beginChangeStatesSilently(), t1.tryCompile(), t1.endChangeStatesSilently();
                    }), this._flushPassInfo());
                }, i.onPipelineStateChanged = function() {
                    this.tv();
                }, i.onMacroPatchesStateChanged = function(t1) {
                    (t1 || this._patches) && (t1 && (t1 = t1.sort(), this._patches && t1.length === this._patches.length && JSON.stringify(t1) === JSON.stringify(this._patches)) || (this._patches = t1, this.tv()));
                }, i.onGeometryChanged = function() {
                    if (this._subMesh) {
                        var _$t = this._subMesh.drawInfo;
                        if (this._inputAssembler && _$t) {
                            var i = this._inputAssembler.drawInfo;
                            Object.keys(_$t).forEach(function(n) {
                                i[n] = _$t[n];
                            }), this._inputAssembler.drawInfo = i;
                        }
                    }
                }, i.getInstancedAttributeIndex = function(t1) {
                    for(var i = this.instancedAttributeBlock.attributes, n = 0; n < i.length; n++)if (i[n].name === t1) return n;
                    return -1;
                }, i.updateInstancedWorldMatrix = function(t1, i) {
                    var n = this.instancedAttributeBlock.views, _$s = n[i], _$r = n[i + 1], h = n[i + 2];
                    _$s[0] = t1.m00, _$s[1] = t1.m01, _$s[2] = t1.m02, _$s[3] = t1.m12, _$r[0] = t1.m04, _$r[1] = t1.m05, _$r[2] = t1.m06, _$r[3] = t1.m13, h[0] = t1.m08, h[1] = t1.m09, h[2] = t1.m10, h[3] = t1.m14;
                }, i.updateInstancedSH = function(t1, i) {
                    for(var n = this.instancedAttributeBlock.views, _$s = 0, _$r = i; _$r < i + 3; _$r++)for(var h = 0; h < 4; h++)n[_$r][h] = t1[_$s++];
                }, i.UpdateInstancedAttributes = function(t1) {
                    this.instancedWorldMatrixIndex = -1, this.instancedSHIndex = -1;
                    var i = this.passes[0];
                    if (i.device.hasFeature(1)) {
                        for(var n = 0, _$s = 0; _$s < t1.length; _$s++){
                            var _$r = t1[_$s];
                            _$r.isInstanced && (n += Fd[_$r.format].size);
                        }
                        var h = this.instancedAttributeBlock;
                        h.buffer = new Uint8Array(n), h.views.length = h.attributes.length = 0;
                        for(var e = 0, u = 0; u < t1.length; u++){
                            var o = t1[u];
                            if (o.isInstanced) {
                                var f = new ud;
                                f.format = o.format, f.name = o.name, f.isNormalized = o.isNormalized, f.location = o.location, h.attributes.push(f);
                                var _$c = Fd[o.format], a = new ($d(_$c))(h.buffer.buffer, e, _$c.count);
                                h.views.push(a), e += _$c.size;
                            }
                        }
                        1 === i.batchingScheme && i.getInstancedBuffer().destroy(), this.instancedWorldMatrixIndex = this.getInstancedAttributeIndex(Zy), this.instancedSHIndex = this.getInstancedAttributeIndex(t_);
                    }
                }, i._flushPassInfo = function() {
                    var _$t = this._passes;
                    if (_$t) {
                        this._shaders || (this._shaders = []), this._shaders.length = _$t.length;
                        for(var i = 0, n = _$t.length; i < n; i++)this._shaders[i] = _$t[i].getShaderVariant(this.patches);
                    }
                }, s(t1, [
                    {
                        key: "passes",
                        get: function get() {
                            return this._passes;
                        },
                        set: function set(t1) {
                            t1.length > 8 ? rt(12004, 8) : (this._passes = t1, this._flushPassInfo(), this._descriptorSet && (this._descriptorSet.destroy(), XM.layout = t1[0].localSetLayout, this._descriptorSet = this._device.createDescriptorSet(XM)));
                        }
                    },
                    {
                        key: "shaders",
                        get: function get() {
                            return this._shaders;
                        }
                    },
                    {
                        key: "subMesh",
                        get: function get() {
                            return this._subMesh;
                        },
                        set: function set(t1) {
                            this._inputAssembler.destroy(), this._inputAssembler = this._device.createInputAssembler(t1.iaInfo), this._subMesh = t1;
                        }
                    },
                    {
                        key: "priority",
                        get: function get() {
                            return this._priority;
                        },
                        set: function set(t1) {
                            this._priority = t1;
                        }
                    },
                    {
                        key: "inputAssembler",
                        get: function get() {
                            return this._inputAssembler;
                        }
                    },
                    {
                        key: "descriptorSet",
                        get: function get() {
                            return this._descriptorSet;
                        }
                    },
                    {
                        key: "worldBoundDescriptorSet",
                        get: function get() {
                            return this._worldBoundDescriptorSet;
                        }
                    },
                    {
                        key: "patches",
                        get: function get() {
                            return this._patches;
                        }
                    },
                    {
                        key: "instancedAttributeBlock",
                        get: function get() {
                            return this._instancedAttributeBlock;
                        }
                    },
                    {
                        key: "instancedWorldMatrixIndex",
                        get: function get() {
                            return this._instancedWorldMatrixIndex;
                        },
                        set: function set(t1) {
                            this._instancedWorldMatrixIndex = t1;
                        }
                    },
                    {
                        key: "instancedSHIndex",
                        get: function get() {
                            return this._instancedSHIndex;
                        },
                        set: function set(t1) {
                            this._instancedSHIndex = t1;
                        }
                    },
                    {
                        key: "useReflectionProbeType",
                        get: function get() {
                            return this._useReflectionProbeType;
                        },
                        set: function set(t1) {
                            this._useReflectionProbeType = t1;
                        }
                    }
                ]), t1;
            }(), YM = new cr, KM = [
                {
                    name: "CC_RECEIVE_SHADOW",
                    value: !0
                }
            ], JM = [
                {
                    name: "CC_USE_LIGHTMAP",
                    value: 1
                }
            ], QM = [
                {
                    name: "CC_USE_LIGHTMAP",
                    value: 2
                }
            ], ZM = [
                {
                    name: "CC_LIGHT_MAP_VERSION",
                    value: 2
                }
            ], tC = [
                {
                    name: "CC_USE_LIGHT_PROBE",
                    value: !0
                }
            ], iC = new Jl(2, 2, 0, 2, 2, 2), nC = new Jl(2, 2, 2, 2, 2, 2), sC = function() {
                function t1() {
                    this.type = 0, this.scene = null, this.isDynamicBatching = !1, this._worldBounds = null, this._modelBounds = null, this._subModels = [], this._node = null, this._transform = null, this._inited = !1, this._descriptorSetCount = 1, this._updateStamp = -1, this._localDataUpdated = !0, this._localData = new Float32Array(56), this._localBuffer = null, this._localSHData = null, this._localSHBuffer = null, this.iv = null, this.sv = Vr(), this.rv = -1, this.hv = Os(1 / 0, 1 / 0, 1 / 0), this.ev = !1, this._worldBoundBuffer = null, this._receiveShadow = !1, this._castShadow = !1, this._receiveDirLight = !0, this._shadowBias = 0, this._shadowNormalBias = 0, this._reflectionProbeId = -1, this._reflectionProbeBlendId = -1, this._reflectionProbeBlendWeight = 0, this._enabled = !0, this._visFlags = My.Enum.NONE, this._priority = 0, this._bakeToReflectionProbe = !0, this._reflectionProbeType = 0, this._device = kw.gfxDevice;
                }
                var i = t1.prototype;
                return i.initialize = function() {
                    this._inited || (this._receiveShadow = !0, this.castShadow = !1, this.enabled = !0, this.visFlags = My.Enum.NONE, this._inited = !0, this._bakeToReflectionProbe = !0, this._reflectionProbeType = 0);
                }, i.destroy = function() {
                    for(var _$t = this._subModels, i = 0; i < _$t.length; i++)this._subModels[i].destroy();
                    this._localBuffer && (this._localBuffer.destroy(), this._localBuffer = null), this._localSHBuffer && (this._localSHBuffer.destroy(), this._localSHBuffer = null), this._worldBoundBuffer && (this._worldBoundBuffer.destroy(), this._worldBoundBuffer = null), this._worldBounds = null, this._modelBounds = null, this._subModels.length = 0, this._inited = !1, this._localDataUpdated = !0, this._transform = null, this._node = null, this.isDynamicBatching = !1;
                }, i.attachToScene = function(t1) {
                    this.scene = t1, this._localDataUpdated = !0;
                }, i.detachFromScene = function() {
                    this.scene = null;
                }, i.updateTransform = function() {
                    var _$t = this.transform;
                    if (_$t.hasChangedFlags || _$t.isTransformDirty()) {
                        _$t.updateWorldTransform(), this._localDataUpdated = !0;
                        var i = this._worldBounds;
                        this._modelBounds && i && this._modelBounds.transform(_$t._mat, _$t._pos, _$t._rot, _$t._scale, i);
                    }
                }, i.updateWorldBound = function() {
                    var _$t = this.transform;
                    if (null !== _$t) {
                        _$t.updateWorldTransform(), this._localDataUpdated = !0;
                        var i = this._worldBounds;
                        this._modelBounds && i && this._modelBounds.transform(_$t._mat, _$t._pos, _$t._rot, _$t._scale, i);
                    }
                }, i.updateUBOs = function(t1) {
                    for(var i = this._subModels, n = 0; n < i.length; n++)i[n].update();
                    this._updateStamp = t1, this.updateSHUBOs();
                    var _$s = this.node.scene.globals.shadows, _$r = _$s.enabled && _$s.type === _A.Planar;
                    if (this._localDataUpdated) {
                        this._localDataUpdated = !1;
                        for(var h = this.transform._mat, e = !1, u = 0; u < i.length; u++){
                            var o = i[u], f = o.instancedWorldMatrixIndex;
                            f >= 0 ? o.updateInstancedWorldMatrix(h, f) : e = !0;
                        }
                        (e || _$r) && this._localBuffer && (cr.toArray(this._localData, h, 0), cr.invert(YM, h), cr.transpose(YM, YM), cr.toArray(this._localData, YM, 16), this._localBuffer.update(this._localData));
                    }
                }, i.ov = function() {
                    this._localDataUpdated = !0;
                }, i.showTetrahedron = function() {
                    return this.fv();
                }, i.fv = function() {
                    if (!this.ev) return !1;
                    var _$t = cA().lightProbes;
                    return !(!_$t || _$t.empty() || !this._worldBounds);
                }, i.cv = function() {
                    if (this._localSHData) {
                        for(var _$t = this._subModels, i = !1, n = 0; n < _$t.length; n++){
                            var _$s = _$t[n], _$r = _$s.instancedSHIndex;
                            _$r >= 0 ? _$s.updateInstancedSH(this._localSHData, _$r) : i = !0;
                        }
                        i && this._localSHBuffer && this._localSHBuffer.update(this._localSHData);
                    }
                }, i.clearSHUBOs = function() {
                    if (this._localSHData) {
                        for(var _$t = 0; _$t < 28; _$t++)this._localSHData[_$t] = 0;
                        this.cv();
                    }
                }, i.updateSHUBOs = function() {
                    if (this.fv()) {
                        var _$t = this._worldBounds.center;
                        if (!_$t.equals(this.hv, Ln)) {
                            var i = [], n = new Hr, _$s = A.director.root.pipeline.pipelineSceneData.lightProbes;
                            if (this.hv.set(_$t), this.rv = _$s.data.getInterpolationWeights(_$t, this.rv, n), _$s.data.getInterpolationSHCoefficients(this.rv, n, i) && this._localSHData) {
                                var _$r = A.internal.SH;
                                _$r.reduceRinging(i, _$s.reduceRinging), _$r.updateUBOData(this._localSHData, 0, i), this.cv();
                            }
                        }
                    }
                }, i.createBoundingShape = function(t1, i) {
                    t1 && i && (this._modelBounds || (this._modelBounds = Ie.create()), this._worldBounds || (this._worldBounds = Ie.create()), Ie.fromPoints(this._modelBounds, t1, i), this._worldBounds.copy(this._modelBounds));
                }, i.vv = function() {
                    return new qM;
                }, i.initSubModel = function(t1, i, n) {
                    this.initialize(), null == this._subModels[t1] ? this._subModels[t1] = this.vv() : this._subModels[t1].destroy(), this._subModels[t1].initialize(i, n.passes, this.getMacroPatches(t1)), this._updateAttributesAndBinding(t1);
                }, i.setSubModelMesh = function(t1, i) {
                    this._subModels[t1] && (this._subModels[t1].subMesh = i);
                }, i.setSubModelMaterial = function(t1, i) {
                    this._subModels[t1] && (this._subModels[t1].passes = i.passes, this._updateAttributesAndBinding(t1));
                }, i.onGlobalPipelineStateChanged = function() {
                    for(var _$t = this._subModels, i = 0; i < _$t.length; i++)_$t[i].onPipelineStateChanged();
                }, i.onMacroPatchesStateChanged = function() {
                    for(var _$t = this._subModels, i = 0; i < _$t.length; i++)_$t[i].onMacroPatchesStateChanged(this.getMacroPatches(i));
                }, i.onGeometryChanged = function() {
                    for(var _$t = this._subModels, i = 0; i < _$t.length; i++)_$t[i].onGeometryChanged();
                }, i.initLightingmap = function(t1, i) {
                    this.iv = t1, this.sv = i;
                }, i.updateLightingmap = function(t1, i) {
                    Hr.toArray(this._localData, i, 32), this._localDataUpdated = !0, this.iv = t1, this.sv = i, this.onMacroPatchesStateChanged(), t1 || (t1 = Lk.get("empty-texture"));
                    var n = t1.getGFXTexture();
                    if (n) for(var _$s = this._device.getSampler(t1.mipmaps.length > 1 ? nC : iC), _$r = this._subModels, h = 0; h < _$r.length; h++){
                        var e = _$r[h].descriptorSet;
                        e.bindTexture(11, n), e.bindSampler(11, _$s), e.update();
                    }
                }, i.updateReflectionProbeCubemap = function(t1) {
                    this._localDataUpdated = !0, this.onMacroPatchesStateChanged(), t1 || (t1 = Lk.get("default-cube-texture"));
                    var i = t1.getGFXTexture();
                    if (i) for(var n = this._device.getSampler(t1.getSamplerInfo()), _$s = this._subModels, _$r = 0; _$r < _$s.length; _$r++){
                        var h = _$s[_$r].descriptorSet;
                        h && (h.bindSampler(13, n), h.bindTexture(13, i), h.update());
                    }
                }, i.updateReflectionProbeBlendCubemap = function() {}, i.updateReflectionProbePlanarMap = function(t1) {
                    this._localDataUpdated = !0, this.onMacroPatchesStateChanged();
                    var i = this._device.getSampler(new Jl(2, 2, 0, 2, 2, 2));
                    if (t1 || (t1 = Lk.get("empty-texture").getGFXTexture()), t1) for(var n = this._subModels, _$s = 0; _$s < n.length; _$s++){
                        var _$r = n[_$s].descriptorSet;
                        _$r && (_$r.bindTexture(14, t1), _$r.bindSampler(14, i), _$r.update());
                    }
                }, i.updateReflectionProbeDataMap = function(t1) {
                    this._localDataUpdated = !0, this.onMacroPatchesStateChanged(), t1 || (t1 = Lk.get("empty-texture"));
                    var i = t1.getGFXTexture();
                    if (i) for(var n = this._subModels, _$s = 0; _$s < n.length; _$s++){
                        var _$r = n[_$s].descriptorSet;
                        _$r && (_$r.bindTexture(15, i), _$r.bindSampler(15, t1.getGFXSampler()), _$r.update());
                    }
                }, i.updateLocalShadowBias = function() {
                    var _$t = this._localData;
                    _$t[36] = this._shadowBias, _$t[37] = this._shadowNormalBias, this._localDataUpdated = !0;
                }, i.updateReflectionProbeId = function() {
                    var _$t = this._localData;
                    _$t[38] = this._reflectionProbeId, _$t[39] = this._reflectionProbeBlendId;
                    var i = null, n = null;
                    if (A.internal.reflectionProbeManager && (i = A.internal.reflectionProbeManager.getProbeById(this._reflectionProbeId), n = A.internal.reflectionProbeManager.getProbeById(this._reflectionProbeBlendId)), i) {
                        if (1 === i.probeType) _$t[40] = i.node.up.x, _$t[41] = i.node.up.y, _$t[42] = i.node.up.z, _$t[43] = 1, _$t[44] = 1, _$t[45] = 0, _$t[46] = 0, _$t[47] = 1;
                        else {
                            _$t[40] = i.node.worldPosition.x, _$t[41] = i.node.worldPosition.y, _$t[42] = i.node.worldPosition.z, _$t[43] = 0, _$t[44] = i.size.x, _$t[45] = i.size.y, _$t[46] = i.size.z;
                            var _$s = 1e3 * !!i.isRGBE();
                            _$t[47] = i.cubemap ? i.cubemap.mipmapLevel + _$s : 1 + _$s;
                        }
                        if (3 === this._reflectionProbeType || 4 === this._reflectionProbeType) if (n) {
                            _$t[48] = n.node.worldPosition.x, _$t[49] = n.node.worldPosition.y, _$t[50] = n.node.worldPosition.z, _$t[51] = this.reflectionProbeBlendWeight, _$t[52] = n.size.x, _$t[53] = n.size.y, _$t[54] = n.size.z;
                            var _$r = 1e3 * !!n.isRGBE();
                            _$t[55] = n.cubemap ? n.cubemap.mipmapLevel + _$r : 1 + _$r;
                        } else 4 === this._reflectionProbeType && (_$t[51] = this.reflectionProbeBlendWeight);
                    }
                    this._localDataUpdated = !0;
                }, i.getMacroPatches = function() {
                    var _$t = this.receiveShadow ? KM : null;
                    if (null != this.iv && this.node && this.node.scene) {
                        var i = this.node.scene.globals;
                        if (!i.disableLightmap) {
                            var n = i.bakedWithStationaryMainLight ? QM : JM;
                            _$t = _$t ? _$t.concat(n) : n, i.bakedWithHighpLightmap && (_$t = _$t.concat(ZM));
                        }
                    }
                    this.ev && (_$t = _$t ? _$t.concat(tC) : tC);
                    var _$s = [
                        {
                            name: "CC_USE_REFLECTION_PROBE",
                            value: this._reflectionProbeType
                        }
                    ];
                    _$t = _$t ? _$t.concat(_$s) : _$s;
                    var _$r = [
                        {
                            name: "CC_DISABLE_DIRECTIONAL_LIGHT",
                            value: !this._receiveDirLight
                        }
                    ];
                    return _$t ? _$t.concat(_$r) : _$r;
                }, i._updateAttributesAndBinding = function(t1) {
                    var i = this._subModels[t1];
                    if (i) {
                        this._initLocalDescriptors(t1), this._updateLocalDescriptors(t1, i.descriptorSet), this._initLocalSHDescriptors(t1), this._updateLocalSHDescriptors(t1, i.descriptorSet), this._initWorldBoundDescriptors(t1), i.worldBoundDescriptorSet && this._updateWorldBoundDescriptors(t1, i.worldBoundDescriptorSet);
                        var n = [], _$s = new Set;
                        i.passes.forEach(function(t1) {
                            t1.getShaderVariant(i.patches).attributes.forEach(function(t1) {
                                _$s.has(t1.name) || (n.push(t1), _$s.add(t1.name));
                            });
                        }), this._updateInstancedAttributes(n, i);
                    }
                }, i._updateInstancedAttributes = function(t1, i) {
                    i.UpdateInstancedAttributes(t1), this._localDataUpdated = !0;
                }, i._initLocalDescriptors = function() {
                    this._localBuffer || (this._localBuffer = this._device.createBuffer(new Wl(18, 1, 224, 224)));
                }, i._initLocalSHDescriptors = function() {
                    this.ev && (this._localSHData || (this._localSHData = new Float32Array(28)), this._localSHBuffer || (this._localSHBuffer = this._device.createBuffer(new Wl(18, 1, 112, 112))));
                }, i._initWorldBoundDescriptors = function() {
                    this._worldBoundBuffer || (this._worldBoundBuffer = this._device.createBuffer(new Wl(18, 1, Qy.SIZE, Qy.SIZE)));
                }, i._updateLocalDescriptors = function(t1, i) {
                    this._localBuffer && i.bindBuffer(0, this._localBuffer);
                }, i._updateLocalSHDescriptors = function(t1, i) {
                    this._localSHBuffer && i.bindBuffer(6, this._localSHBuffer);
                }, i._updateWorldBoundDescriptors = function(t1, i) {
                    this._worldBoundBuffer && i.bindBuffer(Qy.BINDING, this._worldBoundBuffer);
                }, s(t1, [
                    {
                        key: "subModels",
                        get: function get() {
                            return this._subModels;
                        }
                    },
                    {
                        key: "inited",
                        get: function get() {
                            return this._inited;
                        }
                    },
                    {
                        key: "worldBounds",
                        get: function get() {
                            return this._worldBounds;
                        }
                    },
                    {
                        key: "modelBounds",
                        get: function get() {
                            return this._modelBounds;
                        }
                    },
                    {
                        key: "localBuffer",
                        get: function get() {
                            return this._localBuffer;
                        }
                    },
                    {
                        key: "localSHBuffer",
                        get: function get() {
                            return this._localSHBuffer;
                        }
                    },
                    {
                        key: "worldBoundBuffer",
                        get: function get() {
                            return this._worldBoundBuffer;
                        }
                    },
                    {
                        key: "updateStamp",
                        get: function get() {
                            return this._updateStamp;
                        }
                    },
                    {
                        key: "useLightProbe",
                        get: function get() {
                            return this.ev;
                        },
                        set: function set(t1) {
                            this.ev = t1, this.onMacroPatchesStateChanged();
                        }
                    },
                    {
                        key: "tetrahedronIndex",
                        get: function get() {
                            return this.rv;
                        },
                        set: function set(t1) {
                            this.rv = t1;
                        }
                    },
                    {
                        key: "shadowBias",
                        get: function get() {
                            return this._shadowBias;
                        },
                        set: function set(t1) {
                            this._shadowBias = t1;
                        }
                    },
                    {
                        key: "shadowNormalBias",
                        get: function get() {
                            return this._shadowNormalBias;
                        },
                        set: function set(t1) {
                            this._shadowNormalBias = t1;
                        }
                    },
                    {
                        key: "receiveShadow",
                        get: function get() {
                            return this._receiveShadow;
                        },
                        set: function set(t1) {
                            this._receiveShadow = t1, this.onMacroPatchesStateChanged();
                        }
                    },
                    {
                        key: "castShadow",
                        get: function get() {
                            return this._castShadow;
                        },
                        set: function set(t1) {
                            this._castShadow = t1;
                        }
                    },
                    {
                        key: "receiveDirLight",
                        get: function get() {
                            return this._receiveDirLight;
                        },
                        set: function set(t1) {
                            this._receiveDirLight = t1, this.onMacroPatchesStateChanged();
                        }
                    },
                    {
                        key: "node",
                        get: function get() {
                            return this._node;
                        },
                        set: function set(t1) {
                            this._node = t1;
                        }
                    },
                    {
                        key: "transform",
                        get: function get() {
                            return this._transform;
                        },
                        set: function set(t1) {
                            this._transform = t1;
                        }
                    },
                    {
                        key: "visFlags",
                        get: function get() {
                            return this._visFlags;
                        },
                        set: function set(t1) {
                            this._visFlags = t1;
                        }
                    },
                    {
                        key: "enabled",
                        get: function get() {
                            return this._enabled;
                        },
                        set: function set(t1) {
                            this._enabled = t1;
                        }
                    },
                    {
                        key: "priority",
                        get: function get() {
                            return this._priority;
                        },
                        set: function set(t1) {
                            this._priority = t1;
                        }
                    },
                    {
                        key: "bakeToReflectionProbe",
                        get: function get() {
                            return this._bakeToReflectionProbe;
                        },
                        set: function set(t1) {
                            this._bakeToReflectionProbe = t1;
                        }
                    },
                    {
                        key: "reflectionProbeType",
                        get: function get() {
                            return this._reflectionProbeType;
                        },
                        set: function set(t1) {
                            this._reflectionProbeType = t1;
                            for(var i = this._subModels, n = 0; n < i.length; n++)i[n].useReflectionProbeType = t1;
                            this.onMacroPatchesStateChanged();
                        }
                    },
                    {
                        key: "reflectionProbeId",
                        get: function get() {
                            return this._reflectionProbeId;
                        },
                        set: function set(t1) {
                            this._reflectionProbeId = t1;
                        }
                    },
                    {
                        key: "reflectionProbeBlendId",
                        get: function get() {
                            return this._reflectionProbeBlendId;
                        },
                        set: function set(t1) {
                            this._reflectionProbeBlendId = t1;
                        }
                    },
                    {
                        key: "reflectionProbeBlendWeight",
                        get: function get() {
                            return this._reflectionProbeBlendWeight;
                        },
                        set: function set(t1) {
                            this._reflectionProbeBlendWeight = t1;
                        }
                    }
                ]), t1;
            }();
            function rC(t1, i) {
                i < 1e3 ? i = 1e3 : i > 15e3 && (i = 15e3);
                var n = i * i, s = (.860117757 + .000154118254 * i + 1.28641212e-7 * n) / (1 + .000842420235 * i + 7.08145163e-7 * n), _$r = (.317398726 + 422806245e-13 * i + 4.20481691e-8 * n) / (1 - 289741816e-13 * i + 1.61456053e-7 * n), h = 2 * s - 8 * _$r + 4, e = 3 * s / h, u = 2 * _$r / h, o = 1 / u * e, f = 1 / u * (1 - e - u);
                t1.x = 3.2404542 * o - 1.5371385 + -0.4985314 * f, t1.y = -0.969266 * o + 1.8760108 + .041556 * f, t1.z = .0556434 * o - .2040259 + 1.0572252 * f;
            }
            var hC, eC = function eC(t1) {
                return 4 * Math.PI * Math.PI * t1 * t1;
            }, uC = function() {
                function t1() {
                    this._baked = !1, this._color = Os(1, 1, 1), this._colorTemp = 6550, this._colorTempRGB = Os(1, 1, 1), this.lv = Os(1, 1, 1), this._scene = null, this._node = null, this._name = null, this._useColorTemperature = !1, this._type = 5, this._visibility = q_;
                }
                var i = t1.prototype;
                return i.initialize = function() {
                    this.color = Os(1, 1, 1), this.colorTemperature = 6550;
                }, i.attachToScene = function(t1) {
                    this._scene = t1;
                }, i.detachFromScene = function() {
                    this._scene = null;
                }, i.destroy = function() {
                    this._name = null, this._node = null;
                }, i.update = function() {}, s(t1, [
                    {
                        key: "baked",
                        get: function get() {
                            return this._baked;
                        },
                        set: function set(t1) {
                            this._baked = t1;
                        }
                    },
                    {
                        key: "color",
                        get: function get() {
                            return this._color;
                        },
                        set: function set(t1) {
                            this._color.set(t1), this._useColorTemperature && Ss.multiply(this.lv, this._color, this._colorTempRGB);
                        }
                    },
                    {
                        key: "useColorTemperature",
                        get: function get() {
                            return this._useColorTemperature;
                        },
                        set: function set(t1) {
                            this._useColorTemperature = t1, t1 && Ss.multiply(this.lv, this._color, this._colorTempRGB);
                        }
                    },
                    {
                        key: "colorTemperature",
                        get: function get() {
                            return this._colorTemp;
                        },
                        set: function set(t1) {
                            this._colorTemp = t1, rC(this._colorTempRGB, this._colorTemp), this._useColorTemperature && Ss.multiply(this.lv, this._color, this._colorTempRGB);
                        }
                    },
                    {
                        key: "colorTemperatureRGB",
                        get: function get() {
                            return this._colorTempRGB;
                        }
                    },
                    {
                        key: "finalColor",
                        get: function get() {
                            return this.lv;
                        }
                    },
                    {
                        key: "visibility",
                        get: function get() {
                            return this._visibility;
                        },
                        set: function set(t1) {
                            this._visibility = t1;
                        }
                    },
                    {
                        key: "node",
                        get: function get() {
                            return this._node;
                        },
                        set: function set(t1) {
                            this._node = t1, this._node && (this._node.hasChangedFlags |= 2);
                        }
                    },
                    {
                        key: "type",
                        get: function get() {
                            return this._type;
                        }
                    },
                    {
                        key: "name",
                        get: function get() {
                            return this._name;
                        },
                        set: function set(t1) {
                            this._name = t1;
                        }
                    },
                    {
                        key: "scene",
                        get: function get() {
                            return this._scene;
                        }
                    }
                ]), t1;
            }(), oC = new Ss(0, 0, -1), fC = new Ss, cC = function(t1) {
                function i() {
                    var _$i;
                    return (_$i = t1.call(this) || this)._dir = new Ss(1, -1, -1), _$i._illuminanceHDR = aA.SUN_ILLUM, _$i._illuminanceLDR = 1, _$i._shadowEnabled = !1, _$i._shadowPcf = mA.HARD, _$i._shadowBias = 1e-5, _$i._shadowNormalBias = 0, _$i._shadowSaturation = 1, _$i._shadowDistance = 50, _$i._shadowInvisibleOcclusionRange = 200, _$i._csmLevel = bA.LEVEL_4, _$i._csmNeedUpdate = !1, _$i._csmLayerLambda = .75, _$i._csmOptimizationMode = kA.DisableRotationFix, _$i._csmLayersTransition = !1, _$i._csmTransitionRange = .05, _$i._shadowFixedArea = !1, _$i._shadowNear = .1, _$i._shadowFar = 10, _$i._shadowOrthoSize = 5, _$i._type = 0, _$i;
                }
                h(i, t1);
                var n = i.prototype;
                return n.initialize = function() {
                    t1.prototype.initialize.call(this), this.illuminance = aA.SUN_ILLUM, this.direction = new Ss(1, -1, -1);
                }, n.update = function() {
                    this._node && this._node.hasChangedFlags && (this.direction = Ss.transformQuat(fC, oC, this._node.worldRotation));
                }, n.dv = function() {
                    var _$t = A.director.root, _$i = _$t.pipeline;
                    this._shadowEnabled ? (this._shadowFixedArea || !_$i.pipelineSceneData.csmSupported ? _$i.macros.CC_DIR_LIGHT_SHADOW_TYPE = 1 : this.csmLevel > 1 && _$i.pipelineSceneData.csmSupported ? (_$i.macros.CC_DIR_LIGHT_SHADOW_TYPE = 2, _$i.macros.CC_CASCADED_LAYERS_TRANSITION = this._csmLayersTransition) : _$i.macros.CC_DIR_LIGHT_SHADOW_TYPE = 1, _$i.macros.CC_DIR_SHADOW_PCF_TYPE = this._shadowPcf) : _$i.macros.CC_DIR_LIGHT_SHADOW_TYPE = 0, _$t.onGlobalPipelineStateChanged();
                }, s(i, [
                    {
                        key: "direction",
                        get: function get() {
                            return this._dir;
                        },
                        set: function set(t1) {
                            Ss.normalize(this._dir, t1);
                        }
                    },
                    {
                        key: "illuminance",
                        get: function get() {
                            return cA().isHDR ? this._illuminanceHDR : this._illuminanceLDR;
                        },
                        set: function set(t1) {
                            cA().isHDR ? this.illuminanceHDR = t1 : this.illuminanceLDR = t1;
                        }
                    },
                    {
                        key: "illuminanceHDR",
                        get: function get() {
                            return this._illuminanceHDR;
                        },
                        set: function set(t1) {
                            this._illuminanceHDR = t1;
                        }
                    },
                    {
                        key: "illuminanceLDR",
                        get: function get() {
                            return this._illuminanceLDR;
                        },
                        set: function set(t1) {
                            this._illuminanceLDR = t1;
                        }
                    },
                    {
                        key: "shadowEnabled",
                        get: function get() {
                            return this._shadowEnabled;
                        },
                        set: function set(t1) {
                            this._shadowEnabled = t1, this.dv();
                        }
                    },
                    {
                        key: "shadowPcf",
                        get: function get() {
                            return this._shadowPcf;
                        },
                        set: function set(t1) {
                            this._shadowPcf = t1, this.dv();
                        }
                    },
                    {
                        key: "shadowBias",
                        get: function get() {
                            return this._shadowBias;
                        },
                        set: function set(t1) {
                            this._shadowBias = t1;
                        }
                    },
                    {
                        key: "shadowNormalBias",
                        get: function get() {
                            return this._shadowNormalBias;
                        },
                        set: function set(t1) {
                            this._shadowNormalBias = t1;
                        }
                    },
                    {
                        key: "shadowSaturation",
                        get: function get() {
                            return this._shadowSaturation;
                        },
                        set: function set(t1) {
                            this._shadowSaturation = t1;
                        }
                    },
                    {
                        key: "shadowDistance",
                        get: function get() {
                            return this._shadowDistance;
                        },
                        set: function set(t1) {
                            this._shadowDistance = Math.min(t1, EA.MAX_FAR);
                        }
                    },
                    {
                        key: "shadowInvisibleOcclusionRange",
                        get: function get() {
                            return this._shadowInvisibleOcclusionRange;
                        },
                        set: function set(t1) {
                            this._shadowInvisibleOcclusionRange = Math.min(t1, EA.MAX_FAR);
                        }
                    },
                    {
                        key: "csmLevel",
                        get: function get() {
                            return this._csmLevel;
                        },
                        set: function set(t1) {
                            this._csmLevel = t1, this.dv();
                        }
                    },
                    {
                        key: "csmNeedUpdate",
                        get: function get() {
                            return this._csmNeedUpdate;
                        },
                        set: function set(t1) {
                            this._csmNeedUpdate = t1;
                        }
                    },
                    {
                        key: "csmLayerLambda",
                        get: function get() {
                            return this._csmLayerLambda;
                        },
                        set: function set(t1) {
                            this._csmLayerLambda = t1;
                        }
                    },
                    {
                        key: "csmOptimizationMode",
                        get: function get() {
                            return this._csmOptimizationMode;
                        },
                        set: function set(t1) {
                            this._csmOptimizationMode = t1;
                        }
                    },
                    {
                        key: "shadowFixedArea",
                        get: function get() {
                            return this._shadowFixedArea;
                        },
                        set: function set(t1) {
                            this._shadowFixedArea = t1, this.dv();
                        }
                    },
                    {
                        key: "shadowNear",
                        get: function get() {
                            return this._shadowNear;
                        },
                        set: function set(t1) {
                            this._shadowNear = t1;
                        }
                    },
                    {
                        key: "shadowFar",
                        get: function get() {
                            return this._shadowFar;
                        },
                        set: function set(t1) {
                            this._shadowFar = Math.min(t1, EA.MAX_FAR);
                        }
                    },
                    {
                        key: "shadowOrthoSize",
                        get: function get() {
                            return this._shadowOrthoSize;
                        },
                        set: function set(t1) {
                            this._shadowOrthoSize = t1;
                        }
                    },
                    {
                        key: "csmLayersTransition",
                        get: function get() {
                            return this._csmLayersTransition;
                        },
                        set: function set(t1) {
                            this._csmLayersTransition = t1, this.dv();
                        }
                    },
                    {
                        key: "csmTransitionRange",
                        get: function get() {
                            return this._csmTransitionRange;
                        },
                        set: function set(t1) {
                            this._csmTransitionRange = t1;
                        }
                    }
                ]), i;
            }(uC), aC = function(t1) {
                function i() {
                    var _$i;
                    return (_$i = t1.call(this) || this)._needUpdate = !1, _$i._size = .15, _$i._range = 1, _$i._luminanceHDR = 0, _$i._luminanceLDR = 0, _$i._pos = new Ss, _$i._aabb = Ie.create(), _$i._type = 1, _$i;
                }
                h(i, t1);
                var n = i.prototype;
                return n.initialize = function() {
                    t1.prototype.initialize.call(this), this.size = .15, this.range = 1, this.luminanceHDR = 1700 / eC(.15), this.luminanceLDR = 1;
                }, n.update = function() {
                    if (this._node && (this._node.hasChangedFlags || this._needUpdate)) {
                        this._node.getWorldPosition(this._pos);
                        var _$t = this._range;
                        Ie.set(this._aabb, this._pos.x, this._pos.y, this._pos.z, _$t, _$t, _$t), this._needUpdate = !1;
                    }
                }, s(i, [
                    {
                        key: "position",
                        get: function get() {
                            return this._pos;
                        }
                    },
                    {
                        key: "size",
                        get: function get() {
                            return this._size;
                        },
                        set: function set(t1) {
                            this._size = t1;
                        }
                    },
                    {
                        key: "range",
                        get: function get() {
                            return this._range;
                        },
                        set: function set(t1) {
                            this._range = t1, this._needUpdate = !0;
                        }
                    },
                    {
                        key: "luminance",
                        get: function get() {
                            return cA().isHDR ? this._luminanceHDR : this._luminanceLDR;
                        },
                        set: function set(t1) {
                            cA().isHDR ? this.luminanceHDR = t1 : this.luminanceLDR = t1;
                        }
                    },
                    {
                        key: "luminanceHDR",
                        get: function get() {
                            return this._luminanceHDR;
                        },
                        set: function set(t1) {
                            this._luminanceHDR = t1;
                        }
                    },
                    {
                        key: "luminanceLDR",
                        set: function set(t1) {
                            this._luminanceLDR = t1;
                        }
                    },
                    {
                        key: "aabb",
                        get: function get() {
                            return this._aabb;
                        }
                    }
                ]), i;
            }(uC), vC = new Ss(0, 0, -1), lC = new qs, dC = new cr, wC = new cr, gC = new cr, pC = new cr, yC = function(t1) {
                function i() {
                    var _$i;
                    return (_$i = t1.call(this) || this)._dir = new Ss(1, -1, -1), _$i._range = 5, _$i._spotAngle = Math.cos(Math.PI / 6), _$i._angleAttenuationStrength = 0, _$i._pos = new Ss, _$i._aabb = Ie.create(), _$i._frustum = He.create(), _$i._angle = 0, _$i._needUpdate = !1, _$i._size = .15, _$i._luminanceHDR = 0, _$i._luminanceLDR = 0, _$i._shadowEnabled = !1, _$i._shadowPcf = mA.HARD, _$i._shadowBias = 1e-5, _$i._shadowNormalBias = 0, _$i._type = 2, _$i;
                }
                h(i, t1);
                var n = i.prototype;
                return n.initialize = function() {
                    t1.prototype.initialize.call(this), this.size = .15, this.luminanceHDR = 1700 / eC(.15), this.luminanceLDR = 1, this.range = Math.cos(Math.PI / 6), this._dir.set(new Ss(1, -1, -1));
                }, n.update = function() {
                    this._node && (this._node.hasChangedFlags || this._needUpdate) && (this._node.getWorldPosition(this._pos), Ss.transformQuat(this._dir, vC, this._node.getWorldRotation(lC)), Ss.normalize(this._dir, this._dir), Ie.set(this._aabb, this._pos.x, this._pos.y, this._pos.z, this._range, this._range, this._range), this._node.getWorldRT(dC), cr.invert(dC, dC), cr.perspective(wC, this._angle, 1, .001, this._range), cr.multiply(gC, wC, dC), this._frustum.update(gC, pC), this._needUpdate = !1);
                }, s(i, [
                    {
                        key: "position",
                        get: function get() {
                            return this._pos;
                        }
                    },
                    {
                        key: "size",
                        get: function get() {
                            return this._size;
                        },
                        set: function set(t1) {
                            this._size = t1;
                        }
                    },
                    {
                        key: "range",
                        get: function get() {
                            return this._range;
                        },
                        set: function set(t1) {
                            this._range = t1, this._needUpdate = !0;
                        }
                    },
                    {
                        key: "luminance",
                        get: function get() {
                            return cA().isHDR ? this._luminanceHDR : this._luminanceLDR;
                        },
                        set: function set(t1) {
                            cA().isHDR ? this.luminanceHDR = t1 : this.luminanceLDR = t1;
                        }
                    },
                    {
                        key: "luminanceHDR",
                        get: function get() {
                            return this._luminanceHDR;
                        },
                        set: function set(t1) {
                            this._luminanceHDR = t1;
                        }
                    },
                    {
                        key: "luminanceLDR",
                        get: function get() {
                            return this._luminanceLDR;
                        },
                        set: function set(t1) {
                            this._luminanceLDR = t1;
                        }
                    },
                    {
                        key: "direction",
                        get: function get() {
                            return this._dir;
                        }
                    },
                    {
                        key: "spotAngle",
                        get: function get() {
                            return this._spotAngle;
                        },
                        set: function set(t1) {
                            this._angle = t1, this._spotAngle = Math.cos(.5 * t1), this._needUpdate = !0;
                        }
                    },
                    {
                        key: "angleAttenuationStrength",
                        get: function get() {
                            return this._angleAttenuationStrength;
                        },
                        set: function set(t1) {
                            this._angleAttenuationStrength = t1, this._needUpdate = !0;
                        }
                    },
                    {
                        key: "angle",
                        get: function get() {
                            return this._angle;
                        }
                    },
                    {
                        key: "aabb",
                        get: function get() {
                            return this._aabb;
                        }
                    },
                    {
                        key: "frustum",
                        get: function get() {
                            return this._frustum;
                        }
                    },
                    {
                        key: "shadowEnabled",
                        get: function get() {
                            return this._shadowEnabled;
                        },
                        set: function set(t1) {
                            this._shadowEnabled = t1;
                        }
                    },
                    {
                        key: "shadowPcf",
                        get: function get() {
                            return this._shadowPcf;
                        },
                        set: function set(t1) {
                            this._shadowPcf = t1;
                        }
                    },
                    {
                        key: "shadowBias",
                        get: function get() {
                            return this._shadowBias;
                        },
                        set: function set(t1) {
                            this._shadowBias = t1;
                        }
                    },
                    {
                        key: "shadowNormalBias",
                        get: function get() {
                            return this._shadowNormalBias;
                        },
                        set: function set(t1) {
                            this._shadowNormalBias = t1;
                        }
                    }
                ]), i;
            }(uC), _C = function(t1) {
                function i() {
                    var _$i;
                    return (_$i = t1.call(this) || this).wv = !1, _$i.gv = 1, _$i.pv = 0, _$i.yv = 0, _$i._v = Os(), _$i.mv = Ie.create(), _$i._type = 3, _$i;
                }
                h(i, t1);
                var n = i.prototype;
                return n.initialize = function() {
                    t1.prototype.initialize.call(this), this.range = 1, this.luminanceHDR = 1700 / eC(1), this.luminanceLDR = 1;
                }, n.update = function() {
                    if (this._node && (this._node.hasChangedFlags || this.wv)) {
                        this._node.getWorldPosition(this._v);
                        var _$t = this.gv;
                        Ie.set(this.mv, this._v.x, this._v.y, this._v.z, _$t, _$t, _$t), this.wv = !1;
                    }
                }, s(i, [
                    {
                        key: "position",
                        get: function get() {
                            return this._v;
                        }
                    },
                    {
                        key: "range",
                        get: function get() {
                            return this.gv;
                        },
                        set: function set(t1) {
                            this.gv = t1, this.wv = !0;
                        }
                    },
                    {
                        key: "luminance",
                        get: function get() {
                            return cA().isHDR ? this.pv : this.yv;
                        },
                        set: function set(t1) {
                            cA().isHDR ? this.luminanceHDR = t1 : this.luminanceLDR = t1;
                        }
                    },
                    {
                        key: "luminanceHDR",
                        get: function get() {
                            return this.pv;
                        },
                        set: function set(t1) {
                            this.pv = t1;
                        }
                    },
                    {
                        key: "luminanceLDR",
                        set: function set(t1) {
                            this.yv = t1;
                        }
                    },
                    {
                        key: "aabb",
                        get: function get() {
                            return this.mv;
                        }
                    }
                ]), i;
            }(uC), mC = new Ss(0, 0, -1), bC = function(t1) {
                function i() {
                    var _$i;
                    return (_$i = t1.call(this) || this).bv = new Ss(0, 0, -1), _$i._v = new Ss(0, 0, 0), _$i.kv = new Ss(1, 1, 1), _$i.Av = new Ss(1, 0, 0), _$i.Ev = aA.SUN_ILLUM, _$i.Tv = 1, _$i._type = 4, _$i;
                }
                h(i, t1);
                var n = i.prototype;
                return n.initialize = function() {
                    t1.prototype.initialize.call(this), this.illuminance = aA.SUN_ILLUM;
                }, n.update = function() {
                    this._node && this._node.hasChangedFlags && (this._node.getWorldPosition(this._v), this._node.getWorldScale(this.kv), Ss.transformQuat(this.bv, mC, this._node.worldRotation), Ss.transformQuat(this.Av, Ss.RIGHT, this._node.worldRotation));
                }, s(i, [
                    {
                        key: "direction",
                        get: function get() {
                            return this.bv;
                        }
                    },
                    {
                        key: "right",
                        get: function get() {
                            return this.Av;
                        }
                    },
                    {
                        key: "position",
                        get: function get() {
                            return this._v;
                        }
                    },
                    {
                        key: "scale",
                        get: function get() {
                            return this.kv;
                        }
                    },
                    {
                        key: "illuminance",
                        get: function get() {
                            return cA().isHDR ? this.Ev : this.Tv;
                        },
                        set: function set(t1) {
                            cA().isHDR ? this.illuminanceHDR = t1 : this.illuminanceLDR = t1;
                        }
                    },
                    {
                        key: "illuminanceHDR",
                        get: function get() {
                            return this.Ev;
                        },
                        set: function set(t1) {
                            this.Ev = t1;
                        }
                    },
                    {
                        key: "illuminanceLDR",
                        get: function get() {
                            return this.Tv;
                        },
                        set: function set(t1) {
                            this.Tv = t1;
                        }
                    }
                ]), i;
            }(uC), kC = [
                Os(0, -90, 0),
                Os(0, 90, 0),
                Os(90, 0, 0),
                Os(-90, 0, 0),
                Os(0, 0, 0),
                Os(0, 180, 0)
            ], AC = Os(), EC = function() {
                function t1(t1) {
                    this.bakedCubeTextures = [], this.realtimePlanarTexture = null, this._resolution = 256, this._clearFlag = 14, this._backgroundColor = new Yr(0, 0, 0, 255), this._visibility = q_, this._probeType = 0, this._cubemap = null, this._size = Os(1, 1, 1), this.Sv = null, this.Ov = 0, this.Iv = !1, this.Rv = !1, this.yu = null, this.Mv = null, this.Cv = null, this.Nv = Os(), this.Pv = ir(), this.Na = Os(), this.Dv = Os(), this._previewSphere = null, this._previewPlane = null, this.Ov = t1;
                }
                var i = t1.prototype;
                return i.initialize = function(t1, i) {
                    this.yu = t1, this.Mv = i, this.node.getWorldPosition(AC);
                    var n = this._size;
                    this.Cv = Ie.create(AC.x, AC.y, AC.z, n.x, n.y, n.z), this.Lv(i);
                }, i.initBakedTextures = function() {
                    if (0 === this.bakedCubeTextures.length) for(var _$t = 0; _$t < 6; _$t++){
                        var i = this.Bv(this._resolution, this._resolution);
                        this.bakedCubeTextures.push(i);
                    }
                }, i.captureCubemap = function() {
                    this.initBakedTextures(), this.Fv(), this.Rv = !0;
                }, i.renderPlanarReflection = function(t1) {
                    if (t1) {
                        if (!this.realtimePlanarTexture) {
                            var i = A.view.getDesignResolutionSize();
                            this.realtimePlanarTexture = this.Bv(i.width, i.height), A.internal.reflectionProbeManager.updatePlanarMap(this, this.realtimePlanarTexture.getGFXTexture());
                        }
                        this.Uv(t1), this.xv(t1), this.Rv = !0;
                    }
                }, i.switchProbeType = function(t1, i) {
                    0 === t1 ? this.Rv = !1 : null !== i && this.renderPlanarReflection(i);
                }, i.getProbeId = function() {
                    return this.Ov;
                }, i.updateProbeId = function(t1) {
                    this.Ov = t1;
                }, i.renderArea = function() {
                    return 1 === this._probeType ? new Or(this.realtimePlanarTexture.width, this.realtimePlanarTexture.height) : new Or(this.resolution, this.resolution);
                }, i.isFinishedRendering = function() {
                    return !0;
                }, i.validate = function() {
                    return null !== this.cubemap;
                }, i.destroy = function() {
                    this.Sv && (this.Sv.destroy(), this.Sv = null);
                    for(var _$t = 0; _$t < this.bakedCubeTextures.length; _$t++)this.bakedCubeTextures[_$t].destroy();
                    this.bakedCubeTextures = [], this.realtimePlanarTexture && (this.realtimePlanarTexture.destroy(), this.realtimePlanarTexture = null);
                }, i.enable = function() {}, i.disable = function() {}, i.updateCameraDir = function(t1) {
                    this.cameraNode.setRotationFromEuler(kC[t1]), this.camera.update(!0);
                }, i.updateBoundingBox = function() {
                    if (this.node) {
                        this.node.getWorldPosition(AC);
                        var _$t = this._size;
                        Ie.set(this.Cv, AC.x, AC.y, AC.z, _$t.x, _$t.y, _$t.z);
                    }
                }, i.hasFrameBuffer = function(t1) {
                    if (1 === this.probeType) {
                        var i;
                        if (!this.realtimePlanarTexture) return !1;
                        if ((null == (i = this.realtimePlanarTexture.window) ? void 0 : i.framebuffer) === t1) return !0;
                    } else {
                        if (0 === this.bakedCubeTextures.length) return !1;
                        for(var _$s, n = 0; n < this.bakedCubeTextures.length; n++)if ((null == (_$s = this.bakedCubeTextures[n].window) ? void 0 : _$s.framebuffer) === t1) return !0;
                    }
                    return !1;
                }, i.isRGBE = function() {
                    return !0;
                }, i.Uv = function(t1) {
                    this.camera.projectionType = t1.projectionType, this.camera.orthoHeight = t1.orthoHeight, this.camera.nearClip = t1.nearClip, this.camera.farClip = t1.farClip, this.camera.fov = t1.fov, this.camera.clearFlag = t1.clearFlag, this.camera.clearColor = t1.clearColor, this.camera.priority = t1.priority - 1, this.camera.resize(t1.width, t1.height);
                }, i.Lv = function(t1) {
                    var i = A.director.root;
                    if (!this.Sv) {
                        if (this.Sv = i.createCamera(), !this.Sv) return null;
                        this.Sv.initialize({
                            name: t1.name,
                            node: t1,
                            projection: 1,
                            window: i && i.tempWindow,
                            priority: 0,
                            cameraType: -1,
                            trackingType: 0
                        });
                    }
                    return this.Sv.setViewportInOrientedSpace(new sh(0, 0, 1, 1)), this.Sv.fovAxis = 0, this.Sv.fov = Gn(90), this.Sv.orthoHeight = 10, this.Sv.nearClip = 1, this.Sv.farClip = 1e3, this.Sv.clearColor = this._backgroundColor, this.Sv.clearDepth = 1, this.Sv.clearStencil = 0, this.Sv.clearFlag = this._clearFlag, this.Sv.visibility = this._visibility, this.Sv.aperture = 19, this.Sv.shutter = 7, this.Sv.iso = 0, this.Sv;
                }, i.Fv = function() {
                    this.camera.projectionType = 1, this.camera.orthoHeight = 10, this.camera.nearClip = 1, this.camera.farClip = 1e3, this.camera.fov = Gn(90), this.camera.priority = 0, this.camera.resize(this.resolution, this.resolution), this.camera.visibility = this._visibility, this.camera.clearFlag = this._clearFlag, this.camera.clearColor = this._backgroundColor, this.cameraNode.worldPosition = this.node.worldPosition, this.cameraNode.worldRotation = this.node.worldRotation, this.camera.update(!0);
                }, i.Bv = function(t1, i) {
                    var n = new NA;
                    return n.reset({
                        width: t1,
                        height: i
                    }), n;
                }, i.xv = function(t1) {
                    var i = Ss.dot(this.node.worldPosition, this.node.up);
                    this.jv(this.Nv, t1.node.worldPosition, this.node.up, i), this.cameraNode.worldPosition = this.Nv, Ss.transformQuat(this.Na, Ss.FORWARD, t1.node.worldRotation), this.jv(this.Na, this.Na, this.node.up, 0), this.Na.normalize(), this.Na.negative(), Ss.transformQuat(this.Dv, Ss.UP, t1.node.worldRotation), this.jv(this.Dv, this.Dv, this.node.up, 0), this.Dv.normalize(), qs.fromViewUp(this.Pv, this.Na, this.Dv), this.cameraNode.worldRotation = this.Pv, this.camera.update(!0);
                    var n = new Hr(this.node.up.x, this.node.up.y, this.node.up.z, -Ss.dot(this.node.up, this.node.worldPosition));
                    n.transformMat4(this.camera.matView.clone().invert().transpose()), this.camera.calculateObliqueMat(n);
                }, i.jv = function(t1, i, n, s) {
                    var _$r = Ss.clone(n);
                    _$r.normalize();
                    var h = Ss.dot(_$r, i) - s;
                    return _$r.multiplyScalar(2 * h), Ss.subtract(t1, i, _$r), t1;
                }, s(t1, [
                    {
                        key: "probeType",
                        get: function get() {
                            return this._probeType;
                        },
                        set: function set(t1) {
                            this._probeType = t1;
                        }
                    },
                    {
                        key: "resolution",
                        get: function get() {
                            return this._resolution;
                        },
                        set: function set(t1) {
                            t1 !== this._resolution && this.bakedCubeTextures.forEach(function(i) {
                                i.resize(t1, t1);
                            }), this._resolution = t1;
                        }
                    },
                    {
                        key: "clearFlag",
                        get: function get() {
                            return this._clearFlag;
                        },
                        set: function set(t1) {
                            this._clearFlag = t1, this.camera.clearFlag = this._clearFlag;
                        }
                    },
                    {
                        key: "backgroundColor",
                        get: function get() {
                            return this._backgroundColor;
                        },
                        set: function set(t1) {
                            this._backgroundColor = t1, this.camera.clearColor = this._backgroundColor;
                        }
                    },
                    {
                        key: "visibility",
                        get: function get() {
                            return this._visibility;
                        },
                        set: function set(t1) {
                            this._visibility = t1, this.Sv.visibility = this._visibility;
                        }
                    },
                    {
                        key: "size",
                        get: function get() {
                            return this._size;
                        },
                        set: function set(t1) {
                            this._size.set(t1), this.node.getWorldPosition(AC), Ie.set(this.Cv, AC.x, AC.y, AC.z, t1.x, t1.y, t1.z);
                        }
                    },
                    {
                        key: "cubemap",
                        get: function get() {
                            return this._cubemap;
                        },
                        set: function set(t1) {
                            this._cubemap = t1;
                        }
                    },
                    {
                        key: "node",
                        get: function get() {
                            return this.yu;
                        }
                    },
                    {
                        key: "camera",
                        get: function get() {
                            return this.Sv;
                        }
                    },
                    {
                        key: "needRefresh",
                        get: function get() {
                            return this.Iv;
                        },
                        set: function set(t1) {
                            this.Iv = t1;
                        }
                    },
                    {
                        key: "needRender",
                        get: function get() {
                            return this.Rv;
                        },
                        set: function set(t1) {
                            this.Rv = t1;
                        }
                    },
                    {
                        key: "boundingBox",
                        get: function get() {
                            return this.Cv;
                        }
                    },
                    {
                        key: "cameraNode",
                        get: function get() {
                            return this.Mv;
                        },
                        set: function set(t1) {
                            this.Mv = t1;
                        }
                    },
                    {
                        key: "previewSphere",
                        get: function get() {
                            return this._previewSphere;
                        },
                        set: function set(t1) {
                            this._previewSphere = t1;
                        }
                    },
                    {
                        key: "previewPlane",
                        get: function get() {
                            return this._previewPlane;
                        },
                        set: function set(t1) {
                            this._previewPlane = t1;
                        }
                    }
                ]), t1;
            }(), OC = Object.freeze({
                __proto__: null,
                Ambient: aA,
                CSMLevel: bA,
                CSMOptimizationMode: kA,
                Camera: $M,
                CameraAperture: LM,
                CameraFOVAxis: PM,
                CameraISO: BM,
                CameraProjection: DM,
                CameraShutter: FM,
                CameraType: {
                    DEFAULT: -1,
                    LEFT_EYE: 0,
                    RIGHT_EYE: 1,
                    MAIN: 2
                },
                CameraUsage: {
                    EDITOR: 0,
                    GAME_VIEW: 1,
                    SCENE_VIEW: 2,
                    PREVIEW: 3,
                    GAME: 100
                },
                ColorTemperatureToRGB: rC,
                DirectionalLight: cC,
                EnvironmentLightingType: gA,
                FOG_TYPE_NONE: oA,
                Fog: fA,
                FogType: uA,
                LODData: function() {
                    function t1() {
                        this.Gv = 1, this.Hv = [];
                    }
                    var i = t1.prototype;
                    return i.Vv = function(t1) {
                        this.Hv.splice(0, 0, t1);
                    }, i.Wv = function(t1) {
                        var i = this.Hv.indexOf(t1);
                        i >= 0 && this.Hv.splice(i, 1);
                    }, i.zv = function() {
                        this.Hv.length = 0;
                    }, s(t1, [
                        {
                            key: "models",
                            get: function get() {
                                return this.Hv;
                            }
                        }
                    ]), t1;
                }(),
                LODGroup: function() {
                    function t1() {
                        this.$v = void 0, this.Xv = null, this.qv = !0, this.Yv = Os(0, 0, 0), this.Kv = 1, this.Jv = [], this.Qv = [], this.Zv = !1, this.Pe = kw.gfxDevice;
                    }
                    var i = t1.prototype;
                    return i.tl = function(t1) {
                        this.$v = t1;
                    }, i.il = function() {
                        this.$v = null;
                    }, i.nl = function(t1) {
                        if (t1.length !== this.Qv.length) this.Zv = !0;
                        else for(var i = t1.length, n = 0; n < i; n++)if (t1[n] !== this.Qv[n]) {
                            this.Zv = !0;
                            break;
                        }
                        this.Qv = t1.slice();
                    }, i.sl = function() {
                        return this.Zv;
                    }, i.rl = function() {
                        this.Zv = !1;
                    }, i.hl = function() {
                        return this.Qv;
                    }, i.el = function() {
                        this.Jv.length = 0;
                    }, i.ul = function(t1, i) {
                        this.Jv.splice(t1, 0, i);
                    }, i.ol = function(t1, i) {
                        this.Jv[t1] = i;
                    }, i.fl = function(t1) {
                        this.Jv.splice(t1, 1);
                    }, i.cl = function(t1) {
                        for(var i = this.al(t1), n = -1, _$s = 0; _$s < this.lodCount; ++_$s)if (i >= this.lodDataArray[_$s].Gv) {
                            n = _$s;
                            break;
                        }
                        return n;
                    }, i.al = function(t1) {
                        var i;
                        return this.Xv ? (1 === t1.projectionType && (i = Ss.len(this.localBoundaryCenter.transformMat4(this.Xv.worldMatrix).subtract(t1.node.worldPosition))), this.vl(t1, i, this.ll())) : 0;
                    }, i.vl = function(t1, i, n) {
                        return 1 === t1.projectionType ? n * t1.matProj.m05 / (2 * i) : n * t1.matProj.m05 * .5;
                    }, i.ll = function() {
                        var _$t = this.Xv.scale;
                        return Math.max(Math.abs(_$t.x), Math.abs(_$t.y), Math.abs(_$t.z)) * this.objectSize;
                    }, s(t1, [
                        {
                            key: "localBoundaryCenter",
                            get: function get() {
                                return this.Yv.clone();
                            },
                            set: function set(t1) {
                                this.Yv.set(t1);
                            }
                        },
                        {
                            key: "lodCount",
                            get: function get() {
                                return this.Jv.length;
                            }
                        },
                        {
                            key: "objectSize",
                            get: function get() {
                                return this.Kv;
                            },
                            set: function set(t1) {
                                this.Kv = t1;
                            }
                        },
                        {
                            key: "lodDataArray",
                            get: function get() {
                                return this.Jv;
                            }
                        }
                    ]), t1;
                }(),
                Light: uC,
                LightType: {
                    DIRECTIONAL: 0,
                    SPHERE: 1,
                    SPOT: 2,
                    POINT: 3,
                    RANGED_DIRECTIONAL: 4,
                    UNKNOWN: 5
                },
                Model: sC,
                ModelType: {
                    DEFAULT: 0,
                    SKINNING: 1,
                    BAKED_SKINNING: 2,
                    BATCH_2D: 3,
                    PARTICLE_BATCH: 4,
                    LINE: 5
                },
                Octree: SA,
                PCFType: mA,
                PointLight: _C,
                PostSettings: lO,
                ProbeClearFlag: {
                    SKYBOX: 14,
                    SOLID_COLOR: 7
                },
                ProbeType: {
                    CUBE: 0,
                    PLANAR: 1
                },
                RangedDirectionalLight: bC,
                ReflectionProbe: EC,
                SKYBOX_FLAG: 8,
                ShadowSize: yA,
                ShadowType: _A,
                Shadows: EA,
                Skin: GR,
                SkyBoxFlagValue: {
                    VALUE: 8
                },
                Skybox: pA,
                SphereLight: aC,
                SpotLight: yC,
                SubModel: qM,
                ToneMappingType: vO,
                TrackingType: {
                    NO_TRACKING: 0,
                    POSITION_AND_ROTATION: 1,
                    POSITION: 2,
                    ROTATION: 3
                },
                nt2lm: eC
            }), IC = function() {
                function t1(t1) {
                    this.Ps = "", this.dl = [], this.Hv = [], this.wl = [], this.pl = [], this.yl = [], this._l = [], this.ml = [], this.kl = [], this.Al = [], this.El = null, this.Tl = 0, this.Sl = null, this.Ol = t1;
                }
                t1.registerCreateFunc = function(i) {
                    i._createSceneFun = function(i) {
                        return new t1(i);
                    };
                };
                var i = t1.prototype;
                return i.initialize = function(t1) {
                    return this.Ps = t1.name, this.Sl = new MC(this), !0;
                }, i.update = function(t1) {
                    var i = this.El;
                    i && i.update();
                    for(var n = this._l, _$s = 0; _$s < n.length; _$s++)n[_$s].update();
                    for(var _$r = this.ml, h = 0; h < _$r.length; h++)_$r[h].update();
                    for(var e = this.kl, u = 0; u < e.length; u++)e[u].update();
                    for(var o = this.Al, f = 0; f < o.length; f++)o[f].update();
                    for(var _$c = this.Hv, a = 0; a < _$c.length; a++){
                        var v = _$c[a];
                        v.enabled && (v.updateTransform(t1), v.updateUBOs(t1));
                    }
                    this.Sl.updateLodState();
                }, i.destroy = function() {
                    this.removeCameras(), this.removeSphereLights(), this.removeSpotLights(), this.removeRangedDirLights(), this.removeModels(), this.Il(), this.Sl.clearCache();
                }, i.isCulledByLod = function(t1, i) {
                    return this.Sl.isLodModelCulled(t1, i);
                }, i.addCamera = function(t1) {
                    t1.attachToScene(this), this.dl.push(t1), this.Sl.addCamera(t1);
                }, i.removeCamera = function(t1) {
                    for(var i = 0; i < this.dl.length; ++i)if (this.dl[i] === t1) return this.dl.splice(i, 1), t1.detachFromScene(), void this.Sl.removeCamera(t1);
                }, i.removeCameras = function() {
                    var _$t = this;
                    this.dl.forEach(function(i) {
                        i.detachFromScene(), _$t.Sl.removeCamera(i);
                    }), this.dl.length = 0;
                }, i.setMainLight = function(t1) {
                    this.El = t1, this.El && this.El.dv();
                }, i.unsetMainLight = function(t1) {
                    if (this.El === t1) {
                        var i = this.yl;
                        if (i.length) return this.setMainLight(i[i.length - 1]), void (this.El.node && (this.El.node.hasChangedFlags |= 2));
                        this.setMainLight(null);
                    }
                }, i.addDirectionalLight = function(t1) {
                    t1.attachToScene(this), this.yl.push(t1);
                }, i.removeDirectionalLight = function(t1) {
                    for(var i = 0; i < this.yl.length; ++i)if (this.yl[i] === t1) return t1.detachFromScene(), void this.yl.splice(i, 1);
                }, i.addSphereLight = function(t1) {
                    t1.attachToScene(this), this._l.push(t1);
                }, i.removeSphereLight = function(t1) {
                    for(var i = 0; i < this._l.length; ++i)if (this._l[i] === t1) return t1.detachFromScene(), void this._l.splice(i, 1);
                }, i.addSpotLight = function(t1) {
                    t1.attachToScene(this), this.ml.push(t1);
                }, i.removeSpotLight = function(t1) {
                    for(var i = 0; i < this.ml.length; ++i)if (this.ml[i] === t1) return t1.detachFromScene(), void this.ml.splice(i, 1);
                }, i.removeSphereLights = function() {
                    for(var _$t = 0; _$t < this._l.length; ++_$t)this._l[_$t].detachFromScene();
                    this._l.length = 0;
                }, i.removeSpotLights = function() {
                    for(var _$t = 0; _$t < this.ml.length; ++_$t)this.ml[_$t].detachFromScene();
                    this.ml.length = 0;
                }, i.addPointLight = function(t1) {
                    t1.attachToScene(this), this.kl.push(t1);
                }, i.removePointLight = function(t1) {
                    for(var i = 0; i < this.kl.length; ++i)if (this.kl[i] === t1) return t1.detachFromScene(), void this.kl.splice(i, 1);
                }, i.removePointLights = function() {
                    for(var _$t = 0; _$t < this.kl.length; ++_$t)this.kl[_$t].detachFromScene();
                    this.kl.length = 0;
                }, i.addRangedDirLight = function(t1) {
                    t1.attachToScene(this), this.Al.push(t1);
                }, i.removeRangedDirLight = function(t1) {
                    for(var i = 0; i < this.Al.length; ++i)if (this.Al[i] === t1) return t1.detachFromScene(), void this.Al.splice(i, 1);
                }, i.removeRangedDirLights = function() {
                    for(var _$t = 0; _$t < this.Al.length; ++_$t)this.Al[_$t].detachFromScene();
                    this.Al.length = 0;
                }, i.addModel = function(t1) {
                    t1.attachToScene(this), this.Hv.push(t1);
                }, i.removeModel = function(t1) {
                    for(var i = 0; i < this.Hv.length; ++i)if (this.Hv[i] === t1) return this.Sl.removeModel(t1), t1.detachFromScene(), void this.Hv.splice(i, 1);
                }, i.removeModels = function() {
                    var _$t = this;
                    this.Hv.forEach(function(i) {
                        _$t.Sl.removeModel(i), i.detachFromScene(), i.destroy();
                    }), this.Hv.length = 0;
                }, i.addBatch = function(t1) {
                    this.pl.push(t1);
                }, i.removeBatch = function(t1) {
                    for(var i = 0; i < this.pl.length; ++i)if (this.pl[i] === t1) return void this.pl.splice(i, 1);
                }, i.removeBatches = function() {
                    this.pl.length = 0;
                }, i.addLODGroup = function(t1) {
                    this.wl.push(t1), t1.tl(this), this.Sl.addLodGroup(t1);
                }, i.Rl = function(t1) {
                    var i = this.wl.indexOf(t1);
                    i >= 0 && (this.wl.splice(i, 1), t1.il(), this.Sl.removeLodGroup(t1));
                }, i.Il = function() {
                    var _$t = this;
                    this.wl.forEach(function(i) {
                        _$t.Sl.removeLodGroup(i);
                    }), this.wl.length = 0;
                }, i.onGlobalPipelineStateChanged = function() {
                    this.Hv.forEach(function(t1) {
                        t1.onGlobalPipelineStateChanged();
                    });
                }, i.generateModelId = function() {
                    return this.Tl++;
                }, s(t1, [
                    {
                        key: "root",
                        get: function get() {
                            return this.Ol;
                        }
                    },
                    {
                        key: "name",
                        get: function get() {
                            return this.Ps;
                        }
                    },
                    {
                        key: "cameras",
                        get: function get() {
                            return this.dl;
                        }
                    },
                    {
                        key: "mainLight",
                        get: function get() {
                            return this.El;
                        }
                    },
                    {
                        key: "sphereLights",
                        get: function get() {
                            return this._l;
                        }
                    },
                    {
                        key: "spotLights",
                        get: function get() {
                            return this.ml;
                        }
                    },
                    {
                        key: "pointLights",
                        get: function get() {
                            return this.kl;
                        }
                    },
                    {
                        key: "rangedDirLights",
                        get: function get() {
                            return this.Al;
                        }
                    },
                    {
                        key: "models",
                        get: function get() {
                            return this.Hv;
                        }
                    },
                    {
                        key: "batches",
                        get: function get() {
                            return this.pl;
                        }
                    },
                    {
                        key: "lodGroups",
                        get: function get() {
                            return this.wl;
                        }
                    }
                ]), t1;
            }(), RC = function RC() {
                this.usedLevel = -1, this.lastUsedLevel = -1, this.transformDirty = !0;
            }, MC = function() {
                function t1(t1) {
                    this.Ml = null, this.Cl = new Map, this.Nl = new Map, this.Pl = [], this.Dl = new Map, this.Ml = t1;
                }
                var i = t1.prototype;
                return i.addCamera = function(t1) {
                    for(var i = this.Ml.lodGroups, n = 0; n < i.length; n++){
                        var s = i[n].Xv.layer;
                        if ((t1.visibility & s) === s) {
                            this.Nl.has(t1) || this.Nl.set(t1, new Map);
                            break;
                        }
                    }
                }, i.removeCamera = function(t1) {
                    this.Nl.has(t1) && this.Nl.delete(t1);
                }, i.addLodGroup = function(t1) {
                    this.Pl.push(t1);
                    for(var i = this.Ml.cameras, n = 0; n < i.length; n++){
                        var s = i[n];
                        if (!this.Nl.has(s)) {
                            var _$r = t1.Xv.layer;
                            (s.visibility & _$r) === _$r && this.Nl.set(s, new Map);
                        }
                    }
                }, i.removeLodGroup = function(t1) {
                    for(var i = this, n = 0; n < t1.lodCount; n++)t1.lodDataArray[n].models.forEach(function(t1) {
                        i.Cl.delete(t1);
                    });
                    for(var s, _$r = d(this.Nl); !(s = _$r()).done;)s.value[1].delete(t1);
                    this.Dl.delete(t1);
                }, i.removeModel = function(t1) {
                    this.Cl.has(t1) && this.Cl.delete(t1);
                }, i.updateLodState = function() {
                    var _$t = this;
                    this.Pl.forEach(function(i) {
                        var n = _$t.Dl.get(i);
                        n || (n = new Map, _$t.Dl.set(i, n));
                        for(var s = 0; s < i.lodCount; s++){
                            var _$r = n.get(s);
                            _$r || (_$r = []);
                            for(var h = i.lodDataArray[s].models, e = 0; e < h.length; e++){
                                var u = h[e], o = _$t.Cl.get(u);
                                o || (o = new Map), _$t.Cl.set(u, o), _$r.push(u);
                            }
                            n.set(s, _$r);
                        }
                    }), this.Pl.length = 0;
                    for(var i = this.Ml.lodGroups, s = 0; s < i.length; s++)!function n() {
                        var n = i[s];
                        if (n.qv) {
                            var _$r = n.hl();
                            if (_$r.length > 0) {
                                if (n.Xv.hasChangedFlags > 0) for(var h, e = d(_$t.Nl); !(h = e()).done;){
                                    var u = h.value, o = u[1].get(n);
                                    o || (o = new RC, u[1].set(n, o)), o.transformDirty = !0;
                                }
                                if (n.sl()) {
                                    n.rl();
                                    var f = _$t.Dl.get(n);
                                    f && (f.forEach(function(i) {
                                        i.forEach(function(i) {
                                            var n = _$t.Cl.get(i);
                                            n && n.clear();
                                        });
                                    }), _$r.forEach(function(i) {
                                        var n = f.get(i);
                                        n && n.forEach(function(i) {
                                            var n = _$t.Cl.get(i);
                                            if (n && i.node && i.node.active) for(var s, _$r = d(_$t.Nl); !(s = _$r()).done;){
                                                var h = s.value;
                                                n.set(h[0], !0);
                                            }
                                        });
                                    }));
                                }
                                return;
                            }
                            for(var _$c, a = !1, v = d(_$t.Nl); !(_$c = v()).done;){
                                var l = _$c.value, w = l[1].get(n);
                                w || (w = new RC, l[1].set(n, w));
                                var g = l[0].node.hasChangedFlags, p = n.Xv.hasChangedFlags;
                                if (g > 0 || p > 0 || w.transformDirty) {
                                    w.transformDirty && (w.transformDirty = !1);
                                    var _$y = n.cl(l[0]);
                                    _$y !== w.usedLevel && (w.lastUsedLevel = w.usedLevel, w.usedLevel = _$y, a = !0);
                                }
                            }
                            var _$_ = _$t.Dl.get(n);
                            if (!_$_) return;
                            n.sl() ? (n.rl(), _$_.forEach(function(i) {
                                i.forEach(function(i) {
                                    var n = _$t.Cl.get(i);
                                    n && n.clear();
                                });
                            }), a = !0) : a && _$t.Nl.forEach(function(i) {
                                var s = i.get(n);
                                if (s && s.usedLevel !== s.lastUsedLevel) {
                                    var _$r = _$_.get(s.lastUsedLevel);
                                    _$r && _$r.forEach(function(i) {
                                        var n = _$t.Cl.get(i);
                                        n && n.clear();
                                    });
                                }
                            }), a && _$t.Nl.forEach(function(i, s) {
                                var _$r = i.get(n);
                                if (_$r) {
                                    var h = _$r.usedLevel, e = _$_.get(h);
                                    e && e.forEach(function(i) {
                                        var n = _$t.Cl.get(i);
                                        n && i.node && i.node.active && n.set(s, !0);
                                    });
                                }
                            });
                        }
                    }();
                }, i.isLodModelCulled = function(t1, i) {
                    var n = this.Cl.get(i);
                    return !!n && !n.has(t1);
                }, i.clearCache = function() {
                    this.Dl.clear(), this.Cl.clear(), this.Nl.clear(), this.Pl.length = 0;
                }, i.Ll = function(t1, i) {
                    var n = t1.Xv.layer;
                    return (i.visibility & n) === n;
                }, t1;
            }(), CC = ((hC = {})[Ai.PORTRAIT] = 0, hC[Ai.LANDSCAPE_RIGHT] = 1, hC[Ai.PORTRAIT_UPSIDE_DOWN] = 2, hC[Ai.LANDSCAPE_LEFT] = 3, hC), NC = 0, PC = function() {
                var _$t = i.prototype;
                function i() {
                    this._title = "", this._width = 1, this._height = 1, this._swapchain = null, this._renderPass = null, this._colorTextures = [], this._depthStencilTexture = null, this._cameras = [], this._hasOnScreenAttachments = !1, this._hasOffScreenAttachments = !1, this._framebuffer = null, this._device = null, this._renderWindowId = NC++, this._isResized = !0, this._colorName = "Color" + this._renderWindowId, this._depthStencilName = "DepthStencil" + this._renderWindowId;
                }
                return _$t.isRenderWindowResized = function() {
                    return this._isResized;
                }, _$t.setRenderWindowResizeHandled = function() {
                    this._isResized = !1;
                }, i.registerCreateFunc = function(t1) {
                    t1._createWindowFun = function() {
                        return new i;
                    };
                }, _$t.initialize = function(t1, i) {
                    if (void 0 !== i.title && (this._title = i.title), void 0 !== i.swapchain && (this._swapchain = i.swapchain), this._width = i.width, this._height = i.height, this._device = t1, this._renderPass = t1.createRenderPass(i.renderPassInfo), i.swapchain) this._swapchain = i.swapchain, this._colorTextures.push(i.swapchain.colorTexture), this._depthStencilTexture = i.swapchain.depthStencilTexture;
                    else {
                        for(var n = 0; n < i.renderPassInfo.colorAttachments.length; n++){
                            var _$s = new Yl(1, 21, i.renderPassInfo.colorAttachments[n].format, this._width, this._height);
                            i.externalFlag && (8 & i.externalFlag || 4 & i.externalFlag) && (_$s.flags |= i.externalFlag, _$s.externalRes = i.externalResLow ? i.externalResLow : 0), this._colorTextures.push(t1.createTexture(_$s));
                        }
                        i.renderPassInfo.depthStencilAttachment && 0 !== i.renderPassInfo.depthStencilAttachment.format && (this._depthStencilTexture = t1.createTexture(new Yl(1, 36, i.renderPassInfo.depthStencilAttachment.format, this._width, this._height)), this._hasOffScreenAttachments = !0);
                    }
                    return this._framebuffer = t1.createFramebuffer(new _d(this._renderPass, this._colorTextures, this._depthStencilTexture)), !0;
                }, _$t.destroy = function() {
                    this.clearCameras(), this._framebuffer && (this._framebuffer.destroy(), this._framebuffer = null), this._depthStencilTexture && (this._depthStencilTexture.destroy(), this._depthStencilTexture = null);
                    for(var _$t = 0; _$t < this._colorTextures.length; _$t++){
                        var _$i = this._colorTextures[_$t];
                        _$i && _$i.destroy();
                    }
                    this._colorTextures.length = 0, this._device = null;
                }, _$t.resize = function(t1, i) {
                    if (this._swapchain) this._swapchain.resize(t1, i, CC[ge.orientation]), this._width = this._swapchain.width, this._height = this._swapchain.height;
                    else {
                        for(var n = 0; n < this._colorTextures.length; n++)this._colorTextures[n].resize(t1, i);
                        this._depthStencilTexture && this._depthStencilTexture.resize(t1, i), this._width = t1, this._height = i;
                    }
                    this.framebuffer && (this.framebuffer.destroy(), this._framebuffer = this._device.createFramebuffer(new _d(this._renderPass, this._colorTextures, this._depthStencilTexture))), this._cameras.forEach(function(n) {
                        n.resize(t1, i);
                    }), this._isResized = !0;
                }, _$t.extractRenderCameras = function(t1) {
                    for(var _$i = 0; _$i < this._cameras.length; _$i++){
                        var n = this._cameras[_$i];
                        n.enabled && (n.update(), t1.push(n));
                    }
                }, _$t.attachCamera = function(t1) {
                    for(var _$i = 0; _$i < this._cameras.length; _$i++)if (this._cameras[_$i] === t1) return;
                    this._cameras.push(t1), this.sortCameras(), this._isResized = !0;
                }, _$t.detachCamera = function(t1) {
                    for(var _$i = 0; _$i < this._cameras.length; ++_$i)if (this._cameras[_$i] === t1) return void this._cameras.splice(_$i, 1);
                }, _$t.clearCameras = function() {
                    this._cameras.length = 0;
                }, _$t.sortCameras = function() {
                    this._cameras.sort(function(t1, i) {
                        return t1.priority - i.priority;
                    });
                }, s(i, [
                    {
                        key: "width",
                        get: function get() {
                            return this._width;
                        }
                    },
                    {
                        key: "height",
                        get: function get() {
                            return this._height;
                        }
                    },
                    {
                        key: "swapchain",
                        get: function get() {
                            return this._swapchain;
                        }
                    },
                    {
                        key: "framebuffer",
                        get: function get() {
                            return this._framebuffer;
                        }
                    },
                    {
                        key: "cameras",
                        get: function get() {
                            return this._cameras;
                        }
                    },
                    {
                        key: "renderWindowId",
                        get: function get() {
                            return this._renderWindowId;
                        }
                    },
                    {
                        key: "colorName",
                        get: function get() {
                            return this._colorName;
                        }
                    },
                    {
                        key: "depthStencilName",
                        get: function get() {
                            return this._depthStencilName;
                        }
                    }
                ]), i;
            }(), DC = t1("ah", function() {
                function t1(t1) {
                    var i = this;
                    this._createSceneFun = null, this._createWindowFun = null, this.Bl = [], this.Fl = null, this.Ul = null, this.xl = null, this.jl = !0, this.Gl = null, this.Hl = new VR, this.Vl = null, this.Wl = null, this.zl = null, this.$l = [], this.Xl = new Map, this.ql = null, this.Yl = new Map, this.Kl = new WR, this.Jl = 0, this.Ql = 0, this.Zl = 0, this.td = 0, this.nd = !1, this.sd = 0, this.rd = 0, this.hd = [], this.Pe = t1, this.ed = A.internal.DataPoolManager && new A.internal.DataPoolManager(t1), IC.registerCreateFunc(this), PC.registerCreateFunc(this), this.ql = new Fh(function() {
                        return new $M(i.Pe);
                    }, 4, function(t1) {
                        return t1.destroy();
                    });
                }
                var i = t1.prototype;
                return i.initialize = function() {
                    var _$t, i = kw.swapchain, n = new cd;
                    n.format = i.colorTexture.format;
                    var _$s = new ad;
                    _$s.format = i.depthStencilTexture.format, _$s.depthStoreOp = 1, _$s.stencilStoreOp = 1;
                    var _$r = new dd([
                        n
                    ], _$s);
                    this.Fl = this.createWindow({
                        title: "rootMainWindow",
                        width: i.width,
                        height: i.height,
                        renderPassInfo: _$r,
                        swapchain: i
                    }), this.Ul = this.Fl;
                    var h = Ei.querySettings("animation", "customJointTextureLayouts") || [];
                    null == (_$t = this.ed) || _$t.jointTexturePool.registerCustomTextureLayouts(h), this.ud();
                }, i.destroy = function() {
                    this.destroyScenes(), this.Gl && (this.Gl.destroy(), this.Gl = null, this.Hl = null), this.zl && (this.zl.destroy(), this.zl = null), this.Ul = null, this.Fl = null, this.dataPoolManager.clear(), A.rendering && A.rendering.destroy();
                }, i.resize = function(t1, i) {
                    this.Bl.forEach(function(n) {
                        n.swapchain && n.resize(t1, i);
                    });
                }, i.setRenderPipeline = function(t1) {
                    var i = A.internal, n = A.director, _$s = A.rendering, _$r = A.legacy_rendering;
                    if (void 0 === _$s && void 0 === _$r) return rt(1223), !1;
                    var h = !1;
                    if (t1) this.Wl = _$s.createCustomPipeline(), h = !0, this.Gl = this.Wl, V("Using custom pipeline: " + Ti.CUSTOM_PIPELINE_NAME);
                    else {
                        var e = _$r.createDefaultPipeline();
                        h = !0, V("Using legacy pipeline"), this.Vl = e, this.Gl = this.Vl, this.Hl = this.Vl, this.jl = !1;
                    }
                    if ((3 !== Ei.querySettings("rendering", "renderMode") || this.Vl) && !this.Gl.activate(this.Fl.swapchain)) return h && this.Gl.destroy(), this.Vl = null, this.Wl = null, this.Gl = null, this.Hl = null, !1;
                    var u = n.getScene();
                    return u && u.globals.activate(), this.onGlobalPipelineStateChanged(), !(!this.zl && i.Batcher2D && (this.zl = new i.Batcher2D(this), !this.zl.initialize()) && (this.destroy(), 1));
                }, i.onGlobalPipelineStateChanged = function() {
                    for(var _$t = 0; _$t < this.$l.length; _$t++)this.$l[_$t].onGlobalPipelineStateChanged();
                    cA().skybox.enabled && cA().skybox.model.onGlobalPipelineStateChanged(), this.Gl.onGlobalPipelineStateChanged();
                }, i.activeWindow = function(t1) {
                    this.Ul = t1;
                }, i.resetCumulativeTime = function() {
                    this.sd = 0;
                }, i.frameMove = function(t1) {
                    this.rd = t1, ++this.Ql, this.sd += t1, this.Jl += t1, this.Jl > 1 && (this.Zl = this.Ql, this.Ql = 0, this.Jl = 0), this.fd(), this.ad(), this.vd();
                }, i.createWindow = function(t1) {
                    var i = this._createWindowFun(this);
                    return i.initialize(this.device, t1), this.Bl.push(i), i;
                }, i.destroyWindow = function(t1) {
                    for(var i = 0; i < this.Bl.length; ++i)if (this.Bl[i] === t1) return t1.destroy(), void this.Bl.splice(i, 1);
                }, i.destroyWindows = function() {
                    this.Bl.forEach(function(t1) {
                        t1.destroy();
                    }), this.Bl.length = 0;
                }, i.createScene = function(t1) {
                    var i = this._createSceneFun(this);
                    return i.initialize(t1), this.$l.push(i), i;
                }, i.destroyScene = function(t1) {
                    for(var i = 0; i < this.$l.length; ++i)if (this.$l[i] === t1) return t1.destroy(), void this.$l.splice(i, 1);
                }, i.destroyScenes = function() {
                    this.$l.forEach(function(t1) {
                        t1.destroy();
                    }), this.$l.length = 0;
                }, i.createModel = function(t1) {
                    var i = this.Xl.get(t1);
                    i || (this.Xl.set(t1, new Fh(function() {
                        return new t1;
                    }, 10, function(t1) {
                        return t1.destroy();
                    })), i = this.Xl.get(t1));
                    var n = i.alloc();
                    return n.initialize(), n;
                }, i.destroyModel = function(t1) {
                    var i = this.Xl.get(t1.constructor);
                    i ? (i.free(t1), t1.scene && t1.scene.removeModel(t1)) : nt(1300, t1.constructor.name), t1.destroy();
                }, i.createCamera = function() {
                    return this.ql.alloc();
                }, i.createLight = function(t1) {
                    var i = this.Yl.get(t1);
                    i || (this.Yl.set(t1, new Fh(function() {
                        return new t1;
                    }, 4, function(t1) {
                        return t1.destroy();
                    })), i = this.Yl.get(t1));
                    var n = i.alloc();
                    return n.initialize(), n;
                }, i.destroyLight = function(t1) {
                    if (t1.scene) switch(t1.type){
                        case 0:
                            t1.scene.removeDirectionalLight(t1);
                            break;
                        case 1:
                            t1.scene.removeSphereLight(t1);
                            break;
                        case 2:
                            t1.scene.removeSpotLight(t1);
                            break;
                        case 3:
                            t1.scene.removePointLight(t1);
                            break;
                        case 4:
                            t1.scene.removeRangedDirLight(t1);
                    }
                    t1.destroy();
                }, i.recycleLight = function(t1) {
                    var i = this.Yl.get(t1.constructor);
                    if (i && (i.free(t1), t1.scene)) switch(t1.type){
                        case 0:
                            t1.scene.removeDirectionalLight(t1);
                            break;
                        case 1:
                            t1.scene.removeSphereLight(t1);
                            break;
                        case 2:
                            t1.scene.removeSpotLight(t1);
                            break;
                        case 3:
                            t1.scene.removePointLight(t1);
                            break;
                        case 4:
                            t1.scene.removeRangedDirLight(t1);
                    }
                }, i.ld = function() {}, i.fd = function() {
                    for(var _$t = 0; _$t < this.$l.length; ++_$t)this.$l[_$t].removeBatches();
                    this.hd.length = 0;
                }, i.ad = function() {
                    for(var _$t = A.director, i = this.Bl, n = this.hd, _$s = 0; _$s < i.length; _$s++)i[_$s].extractRenderCameras(n);
                    if (this.Gl && n.length > 0) {
                        this.Pe.acquire([
                            kw.swapchain
                        ]);
                        var _$r = this.$l, h = _$t.getTotalFrames();
                        this.zl && (this.zl.update(), this.zl.uploadBuffers());
                        for(var e = 0; e < _$r.length; e++)_$r[e].update(h);
                    }
                }, i.vd = function() {
                    var _$t = A.director, i = A.Director, n = this.hd;
                    if (this.Gl && n.length > 0) {
                        _$t.emit(i.EVENT_BEFORE_COMMIT), n.sort(function(t1, i) {
                            return t1.priority - i.priority;
                        });
                        for(var _$r, _$s = 0; _$s < n.length; ++_$s)null == (_$r = n[_$s].geometryRenderer) || _$r.update();
                        _$t.emit(i.EVENT_BEFORE_RENDER), this.Gl.render(n), _$t.emit(i.EVENT_AFTER_RENDER), this.Pe.present();
                    }
                    this.zl && this.zl.reset();
                }, i.ud = function() {
                    var _$t = Math.max((288 + Qy.COUNT) / 4, 100), i = Math.floor((kw.gfxDevice.capabilities.maxVertexUniformVectors - _$t) / 3);
                    u_(i = i < 256 ? i : 256);
                }, s(t1, [
                    {
                        key: "device",
                        get: function get() {
                            return this.Pe;
                        }
                    },
                    {
                        key: "mainWindow",
                        get: function get() {
                            return this.Fl;
                        }
                    },
                    {
                        key: "curWindow",
                        get: function get() {
                            return this.Ul;
                        },
                        set: function set(t1) {
                            this.Ul = t1;
                        }
                    },
                    {
                        key: "tempWindow",
                        get: function get() {
                            return this.xl;
                        },
                        set: function set(t1) {
                            this.xl = t1;
                        }
                    },
                    {
                        key: "windows",
                        get: function get() {
                            return this.Bl;
                        }
                    },
                    {
                        key: "usesCustomPipeline",
                        get: function get() {
                            return this.jl;
                        }
                    },
                    {
                        key: "pipeline",
                        get: function get() {
                            return this.Gl;
                        }
                    },
                    {
                        key: "customPipeline",
                        get: function get() {
                            return this.Wl;
                        }
                    },
                    {
                        key: "pipelineEvent",
                        get: function get() {
                            return this.Hl;
                        }
                    },
                    {
                        key: "batcher2D",
                        get: function get() {
                            return this.zl;
                        }
                    },
                    {
                        key: "scenes",
                        get: function get() {
                            return this.$l;
                        }
                    },
                    {
                        key: "debugView",
                        get: function get() {
                            return this.Kl;
                        }
                    },
                    {
                        key: "cumulativeTime",
                        get: function get() {
                            return this.sd;
                        }
                    },
                    {
                        key: "frameTime",
                        get: function get() {
                            return this.rd;
                        }
                    },
                    {
                        key: "frameCount",
                        get: function get() {
                            return this.Ql;
                        }
                    },
                    {
                        key: "fps",
                        get: function get() {
                            return this.Zl;
                        }
                    },
                    {
                        key: "fixedFPS",
                        get: function get() {
                            return this.td;
                        },
                        set: function set(t1) {
                            t1 > 0 && (this.td = t1);
                        }
                    },
                    {
                        key: "dataPoolManager",
                        get: function get() {
                            return this.ed;
                        }
                    },
                    {
                        key: "useDeferredPipeline",
                        get: function get() {
                            return this.nd;
                        }
                    },
                    {
                        key: "cameraList",
                        get: function get() {
                            return this.hd;
                        }
                    }
                ]), t1;
            }());
            function LC(t1, i) {
                if (!i) {
                    var n = A.director.getScene();
                    if (!n) return null;
                    i = n;
                }
                return i.getChildByPath(t1);
            }
            A.Root = DC, An.Attr.setClassAttr(Xg, "target", "type", "Object"), An.Attr.setClassAttr(Xg, "target", "ctor", VE), A.find = LC;
            var BC = ri;
            function xC(t1, i) {
                for(var n = i.constructor._executionOrder, s = i._id, _$r = 0, h = t1.length - 1, e = h >>> 1; _$r <= h; e = _$r + h >>> 1){
                    var u = t1[e], o = u.constructor._executionOrder;
                    if (o > n) h = e - 1;
                    else if (o < n) _$r = e + 1;
                    else {
                        var f = u._id;
                        if (f > s) h = e - 1;
                        else {
                            if (!(f < s)) return e;
                            _$r = e + 1;
                        }
                    }
                }
                return ~_$r;
            }
            function jC(t1, i) {
                for(var n = t1.array, s = t1.i + 1; s < n.length;){
                    var _$r = n[s];
                    _$r.node._activeInHierarchy ? ++s : (t1.removeAt(s), i && (_$r._objFlags &= ~i));
                }
            }
            var GC = function() {
                function t1(t1) {
                    this._zero = new ni([]), this._neg = new ni([]), this._pos = new ni([]), this._invoke = t1;
                }
                return s(t1, [
                    {
                        key: "zero",
                        get: function get() {
                            return this._zero;
                        }
                    },
                    {
                        key: "neg",
                        get: function get() {
                            return this._neg;
                        }
                    },
                    {
                        key: "pos",
                        get: function get() {
                            return this._pos;
                        }
                    }
                ]), t1;
            }();
            function HC(t1, i) {
                return t1.constructor._executionOrder - i.constructor._executionOrder;
            }
            GC.stableRemoveInactive = jC;
            var VC = function(t1) {
                function i() {
                    return t1.apply(this, arguments) || this;
                }
                h(i, t1);
                var n = i.prototype;
                return n.add = function(t1) {
                    var _$i = t1.constructor._executionOrder;
                    (0 === _$i ? this._zero : _$i < 0 ? this._neg : this._pos).array.push(t1);
                }, n.remove = function(t1) {
                    var _$i = t1.constructor._executionOrder;
                    (0 === _$i ? this._zero : _$i < 0 ? this._neg : this._pos).fastRemove(t1);
                }, n.cancelInactive = function(t1) {
                    jC(this._zero, t1), jC(this._neg, t1), jC(this._pos, t1);
                }, n.invoke = function() {
                    var _$t = this._neg;
                    _$t.array.length > 0 && (_$t.array.sort(HC), this._invoke(_$t), _$t.array.length = 0), this._invoke(this._zero), this._zero.array.length = 0;
                    var _$i = this._pos;
                    _$i.array.length > 0 && (_$i.array.sort(HC), this._invoke(_$i), _$i.array.length = 0);
                }, i;
            }(GC), WC = function(t1) {
                function i(i) {
                    return t1.call(this, i) || this;
                }
                h(i, t1);
                var n = i.prototype;
                return n.add = function(t1) {
                    var _$i = t1.constructor._executionOrder;
                    if (0 === _$i) this._zero.array.push(t1);
                    else {
                        var n = _$i < 0 ? this._neg.array : this._pos.array, s = xC(n, t1);
                        s < 0 && n.splice(~s, 0, t1);
                    }
                }, n.remove = function(t1) {
                    var _$i = t1.constructor._executionOrder;
                    if (0 === _$i) this._zero.fastRemove(t1);
                    else {
                        var n = _$i < 0 ? this._neg : this._pos, s = xC(n.array, t1);
                        s >= 0 && n.removeAt(s);
                    }
                }, n.invoke = function(t1) {
                    this._neg.array.length > 0 && this._invoke(this._neg, t1), this._invoke(this._zero, t1), this._pos.array.length > 0 && this._invoke(this._pos, t1);
                }, i;
            }(GC);
            function zC(t1, i, n) {
                var s = "var a=it.array;for(it.i=0;it.i<a.length;++it.i){var c=a[it.i];" + t1 + "}", _$r = i ? Function("it", "dt", s) : Function("it", s);
                return $C(Function("c", "dt", t1), _$r, n);
            }
            function $C(t1, i, n) {
                return function(s, r) {
                    try {
                        i(s, r);
                    } catch (i) {
                        A._throw(i);
                        var h = s.array;
                        for(n && (h[s.i]._objFlags |= n), ++s.i; s.i < h.length; ++s.i)try {
                            t1(h[s.i], r);
                        } catch (t1) {
                            A._throw(t1), n && (h[s.i]._objFlags |= n);
                        }
                    }
                };
            }
            var XC = zC("c.start();c._objFlags|=65536", !1, 65536), qC = zC("c.update(dt)", !0), YC = zC("c.lateUpdate(dt)", !0), KC = function KC(t1) {
                var i = A.director._compScheduler, n = t1.array;
                for(t1.i = 0; t1.i < n.length; ++t1.i){
                    var s = n[t1.i];
                    s._enabled && (s.onEnable(), s.node._activeInHierarchy && i._onEnabled(s));
                }
            }, JC = function() {
                function t1() {
                    this.dd = [], this.unscheduleAll();
                }
                var i = t1.prototype;
                return i.unscheduleAll = function() {
                    this.startInvoker = new VC(XC), this.updateInvoker = new WC(qC), this.lateUpdateInvoker = new WC(YC), this.wd = !1;
                }, i._onEnabled = function(t1) {
                    A.director.getScheduler().resumeTarget(t1), t1._objFlags |= 2048, this.wd ? this.dd.push(t1) : this.gd(t1);
                }, i._onDisabled = function(t1) {
                    A.director.getScheduler().pauseTarget(t1), t1._objFlags &= -2049;
                    var i = this.dd.indexOf(t1);
                    i >= 0 ? BC(this.dd, i) : (!t1.internalStart || 65536 & t1._objFlags || this.startInvoker.remove(t1), t1.internalUpdate && this.updateInvoker.remove(t1), t1.internalLateUpdate && this.lateUpdateInvoker.remove(t1));
                }, i.enableComp = function(t1, i) {
                    if (!(2048 & t1._objFlags)) {
                        if (t1.internalOnEnable) {
                            if (i) return void i.add(t1);
                            if (t1.internalOnEnable(), !t1.node.activeInHierarchy) return;
                        }
                        this._onEnabled(t1);
                    }
                }, i.disableComp = function(t1) {
                    2048 & t1._objFlags && (t1.internalOnDisable && t1.internalOnDisable(), this._onDisabled(t1));
                }, i.startPhase = function() {
                    this.wd = !0, this.startInvoker.invoke(), this.pd();
                }, i.updatePhase = function(t1) {
                    this.updateInvoker.invoke(t1);
                }, i.lateUpdatePhase = function(t1) {
                    this.lateUpdateInvoker.invoke(t1), this.wd = !1, this.pd();
                }, i.pd = function() {
                    this.dd.length > 0 && (this.yd(), this.startInvoker.invoke());
                }, i.gd = function(t1) {
                    "function" != typeof t1.internalStart || 65536 & t1._objFlags || this.startInvoker.add(t1), "function" == typeof t1.internalUpdate && this.updateInvoker.add(t1), "function" == typeof t1.internalLateUpdate && this.lateUpdateInvoker.add(t1);
                }, i.yd = function() {
                    for(var _$t = this.dd, i = 0, n = _$t.length; i < n; i++)this.gd(_$t[i]);
                    _$t.length = 0;
                }, t1;
            }(), iN = function(t1) {
                function i(i) {
                    return t1.call(this, i) || this;
                }
                h(i, t1);
                var n = i.prototype;
                return n.add = function(t1) {
                    this._zero.array.push(t1);
                }, n.remove = function(t1) {
                    this._zero.fastRemove(t1);
                }, n.cancelInactive = function(t1) {
                    GC.stableRemoveInactive(this._zero, t1);
                }, n.invoke = function() {
                    this._invoke(this._zero), this._zero.array.length = 0;
                }, i;
            }(GC), nN = zC("c.__preload();"), sN = zC("c.onLoad();c._objFlags|=16384", !1, 16384), rN = new ii(4);
            function hN(t1, i, n) {
                rt(3817, t1.name, n), V("Corrupted component value:", i), i ? t1._removeComponent(i) : si(t1.vo(), n);
            }
            rN.get = function() {
                var _$t = this._get() || {
                    preload: new iN(nN),
                    onLoad: new VC(sN),
                    onEnable: new VC(KC)
                };
                _$t.preload.zero.i = -1;
                var i = _$t.onLoad;
                return i.zero.i = -1, i.neg.i = -1, i.pos.i = -1, (i = _$t.onEnable).zero.i = -1, i.neg.i = -1, i.pos.i = -1, _$t;
            };
            var eN = t1("d1", function() {
                function t1() {
                    this.reset();
                }
                var i = t1.prototype;
                return i.reset = function() {
                    this._activatingStack = [];
                }, i.activateNode = function(t1, i) {
                    if (i) {
                        var n = rN.get();
                        n && (this._activatingStack.push(n), this._activateNodeRecursively(t1, n.preload, n.onLoad, n.onEnable), n.preload.invoke(), n.onLoad.invoke(), n.onEnable.invoke(), this._activatingStack.pop(), rN.put(n));
                    } else {
                        this._deactivateNodeRecursively(t1);
                        for(var s, _$r = d(this._activatingStack); !(s = _$r()).done;){
                            var h = s.value;
                            h.preload.cancelInactive(8192), h.onLoad.cancelInactive(32768), h.onEnable.cancelInactive(2048);
                        }
                    }
                    t1.emit("active-in-hierarchy-changed", t1);
                }, i.activateComp = function(t1, i, n, s) {
                    qh(t1, !0) && (8192 & t1._objFlags || (t1._objFlags |= 8192, t1.internalPreload && (i ? i.add(t1) : t1.internalPreload())), 32768 & t1._objFlags || (t1._objFlags |= 32768, t1.internalOnLoad ? n ? n.add(t1) : (t1.internalOnLoad(), t1._objFlags |= 16384) : t1._objFlags |= 16384), t1._enabled) && t1.node.activeInHierarchy && A.director._compScheduler.enableComp(t1, s);
                }, i.destroyComp = function(t1) {
                    A.director._compScheduler.disableComp(t1), t1.internalOnDestroy && 16384 & t1._objFlags && t1.internalOnDestroy();
                }, i._activateNodeRecursively = function(t1, i, n, s) {
                    if (256 & t1._objFlags) rt(3816, t1.name);
                    else {
                        t1.uo(!0);
                        for(var _$r = t1.components.length, h = 0; h < _$r; ++h){
                            var e = t1.components[h];
                            _instanceof(e, A.Component) ? this.activateComp(e, i, n, s) : (hN(t1, e, h), --h, --_$r);
                        }
                        for(var u = 0, o = t1.children.length; u < o; ++u){
                            var f = t1.children[u];
                            f.active && this._activateNodeRecursively(f, i, n, s);
                        }
                        t1._onPostActivated(!0);
                    }
                }, i._deactivateNodeRecursively = function(t1) {
                    t1._objFlags |= 256, t1.uo(!1);
                    for(var i = t1.components.length, n = 0; n < i; ++n){
                        var s = t1.components[n];
                        if (s._enabled && (A.director._compScheduler.disableComp(s), t1.activeInHierarchy)) return void (t1._objFlags &= -257);
                    }
                    for(var _$r = 0, h = t1.children.length; _$r < h; ++_$r){
                        var e = t1.children[_$r];
                        if (e.activeInHierarchy && (this._deactivateNodeRecursively(e), t1.activeInHierarchy)) return void (t1._objFlags &= -257);
                    }
                    t1._onPostActivated(!1), t1._objFlags &= -257;
                }, t1;
            }()), uN = An.Attr.DELIMETER + "default", oN = An.IDENTIFIER_RE, fN = "var ", aN = {
                "cc.ClickEvent": !1,
                "cc.PrefabInfo": !1
            }, vN = An.escapeForJS, lN = function() {
                function t1(t1, i) {
                    this.varName = t1, this.expression = i;
                }
                return t1.prototype.toString = function() {
                    return fN + this.varName + "=" + this.expression + ";";
                }, t1;
            }();
            function dN(t1, i) {
                return _instanceof(i, lN) ? new lN(i.varName, t1 + i.expression) : t1 + i;
            }
            function wN(t1, i, n) {
                Array.isArray(n) ? (n[0] = dN(i, n[0]), t1.push(n)) : t1.push(dN(i, n) + ";");
            }
            var gN = function() {
                function t1(t1) {
                    this._d = [], this.md = t1;
                }
                var i = t1.prototype;
                return i.setTargetExp = function(t1) {
                    this.md = t1;
                }, i.append = function(t1, i) {
                    this._d.push([
                        t1,
                        i
                    ]);
                }, i.writeCode = function(t1) {
                    var i;
                    if (this._d.length > 1) t1.push("t=" + this.md + ";"), i = "t";
                    else {
                        if (1 !== this._d.length) return;
                        i = this.md;
                    }
                    for(var n = 0; n < this._d.length; n++){
                        var s = this._d[n];
                        wN(t1, i + pN(s[0]) + "=", s[1]);
                    }
                }, t1;
            }();
            function pN(t1) {
                return oN.test(t1) ? "." + t1 : "[" + vN(t1) + "]";
            }
            gN.pool = new ii(function(t1) {
                t1._d.length = 0, t1.md = null;
            }, 1), gN.pool.get = function(t1) {
                var i = this._get() || new gN;
                return i.setTargetExp(t1), i;
            };
            var mN, bN, kN, AN, EN = function() {
                function t1(t1, i) {
                    this.objsToClear_iN$t = [], this.codeArray = [], this.objs = [], this.funcs = [], this.globalVariables = [], this.globalVariableId = 0, this.localVariableId = 0, this.parent = i, this.funcModuleCache = St(), Ft(this.funcModuleCache, aN), this.codeArray.push(fN + "o,t;", "if(R){", "o=R;", "}else{", "o=R=new " + this.getFuncModule(t1.constructor, !0) + "();", "}"), t1._iN$t = {
                        globalVar: "R"
                    }, this.objsToClear_iN$t.push(t1), this.enumerateObject(this.codeArray, t1), this.globalVariables.length > 0 && (n = fN + this.globalVariables.join(",") + ";");
                    var n, s = Pv([
                        "return (function(R){",
                        n || [],
                        this.codeArray,
                        "return o;",
                        "})"
                    ]);
                    this.result = Function("O", "F", s)(this.objs, this.funcs);
                    for(var _$r = 0, h = this.objsToClear_iN$t.length; _$r < h; ++_$r)this.objsToClear_iN$t[_$r]._iN$t = null;
                    this.objsToClear_iN$t.length = 0;
                }
                var i = t1.prototype;
                return i.getFuncModule = function(t1, i) {
                    var n = Ot(t1);
                    if (n) {
                        var s = this.funcModuleCache[n];
                        if (s) return s;
                        if (void 0 === s) {
                            var _$r = -1 !== n.indexOf(".");
                            if (_$r) try {
                                if (_$r = t1 === Function("return " + n)()) return this.funcModuleCache[n] = n, n;
                            } catch (t1) {}
                        }
                    }
                    var h = this.funcs.indexOf(t1);
                    h < 0 && (h = this.funcs.length, this.funcs.push(t1));
                    var e = "F[" + h + "]";
                    return i && (e = "(" + e + ")"), this.funcModuleCache[n] = e, e;
                }, i.getObjRef = function(t1) {
                    var i = this.objs.indexOf(t1);
                    return i < 0 && (i = this.objs.length, this.objs.push(t1)), "O[" + i + "]";
                }, i.setValueType = function(t1, i, n, s) {
                    var _$r = gN.pool.get(s), h = i.constructor.__props__;
                    h || (h = Object.keys(i));
                    for(var e = 0; e < h.length; e++){
                        var u = h[e], o = n[u];
                        if (i[u] !== o) {
                            var f = this.enumerateField(n, u, o);
                            _$r.append(u, f);
                        }
                    }
                    _$r.writeCode(t1), gN.pool.put(_$r);
                }, i.enumerateCCClass = function(t1, i, n) {
                    for(var s = n.__values__, _$r = An.Attr.getClassAttrs(n), h = 0; h < s.length; h++){
                        var e = s[h], u = i[e], o = _$r[e + uN];
                        if (!TN(o, u)) if ("object" == (void 0 === u ? "undefined" : _type_of(u)) && _instanceof(u, A.ValueType) && (o = An.getDefault(o)) && o.constructor === u.constructor) {
                            var f = "o" + pN(e);
                            this.setValueType(t1, o, u, f);
                        } else this.setObjProp(t1, i, e, u);
                    }
                }, i.instantiateArray = function(t1) {
                    if (0 === t1.length) return "[]";
                    var i = "a" + ++this.localVariableId, n = [
                        new lN(i, "new Array(" + t1.length + ")")
                    ];
                    t1._iN$t = {
                        globalVar: "",
                        source: n
                    }, this.objsToClear_iN$t.push(t1);
                    for(var s = 0; s < t1.length; ++s)wN(n, i + "[" + s + "]=", this.enumerateField(t1, s, t1[s]));
                    return n;
                }, i.instantiateTypedArray = function(t1) {
                    var i = t1.constructor.name;
                    if (0 === t1.length) return "new " + i;
                    var n = "a" + ++this.localVariableId, s = [
                        new lN(n, "new " + i + "(" + t1.length + ")")
                    ];
                    t1._iN$t = {
                        globalVar: "",
                        source: s
                    }, this.objsToClear_iN$t.push(t1);
                    for(var _$r = 0; _$r < t1.length; ++_$r)0 !== t1[_$r] && wN(s, n + "[" + _$r + "]=", t1[_$r]);
                    return s;
                }, i.enumerateField = function(t1, i, n) {
                    if ("object" == (void 0 === n ? "undefined" : _type_of(n)) && n) {
                        var s = n._iN$t;
                        if (s) {
                            var _$r = s.globalVar;
                            if (!_$r) {
                                _$r = s.globalVar = "v" + ++this.globalVariableId, this.globalVariables.push(_$r);
                                var h = s.source[0];
                                s.source[0] = dN(_$r + "=", h);
                            }
                            return _$r;
                        }
                        return ArrayBuffer.isView(n) ? this.instantiateTypedArray(n) : Array.isArray(n) ? this.instantiateArray(n) : this.instantiateObj(n);
                    }
                    return "function" == typeof n ? this.getFuncModule(n) : "string" == typeof n ? vN(n) : ("_objFlags" === i && Xh(t1) && (n &= -4192741), n);
                }, i.setObjProp = function(t1, i, n, s) {
                    wN(t1, "o" + pN(n) + "=", this.enumerateField(i, n, s));
                }, i.enumerateObject = function(t1, i) {
                    var n = i.constructor;
                    if (En(n)) this.enumerateCCClass(t1, i, n);
                    else for(var s in i)if (Object.prototype.hasOwnProperty.call(i, s) && (95 !== s.charCodeAt(0) || 95 !== s.charCodeAt(1) || "__type__" === s)) {
                        var _$r = i[s];
                        "object" == (void 0 === _$r ? "undefined" : _type_of(_$r)) && _$r && _$r === i._iN$t || this.setObjProp(t1, i, s, _$r);
                    }
                }, i.instantiateObj = function(t1) {
                    if (_instanceof(t1, A.ValueType)) return An.getNewValueTypeCode(t1);
                    if (_instanceof(t1, A.Asset)) return this.getObjRef(t1);
                    if (1 & t1._objFlags) return null;
                    var s, i, n = t1.constructor;
                    if (En(n)) {
                        if (this.parent) {
                            if (_instanceof(this.parent, A.Component)) {
                                if (_instanceof(t1, A.Node) || _instanceof(t1, A.Component)) return this.getObjRef(t1);
                            } else if (_instanceof(this.parent, A.Node)) {
                                if (_instanceof(t1, A.Node)) {
                                    if (!t1.isChildOf(this.parent)) return this.getObjRef(t1);
                                } else if (_instanceof(t1, A.Component) && (null == (s = t1.node) || !s.isChildOf(this.parent))) return this.getObjRef(t1);
                            }
                        }
                        i = new lN("o", "new " + this.getFuncModule(n, !0) + "()");
                    } else if (n === Object) i = new lN("o", "{}");
                    else {
                        if (n) return this.getObjRef(t1);
                        i = new lN("o", "Object.create(null)");
                    }
                    var _$r = [
                        i
                    ];
                    return t1._iN$t = {
                        globalVar: "",
                        source: _$r
                    }, this.objsToClear_iN$t.push(t1), this.enumerateObject(_$r, t1), [
                        "(function(){",
                        _$r,
                        "return o;})();"
                    ];
                }, t1;
            }();
            function TN(t1, i) {
                if ("function" == typeof t1) try {
                    t1 = t1();
                } catch (t1) {
                    return !1;
                }
                if (t1 === i) return !0;
                if (t1 && i && "object" == (void 0 === t1 ? "undefined" : _type_of(t1)) && "object" == (void 0 === i ? "undefined" : _type_of(i)) && t1.constructor === i.constructor) if (_instanceof(t1, A.ValueType)) {
                    if (t1.equals(i)) return !0;
                } else {
                    if (Array.isArray(t1)) return 0 === t1.length && 0 === i.length;
                    if (t1.constructor === Object) return mt(t1) && mt(i);
                }
                return !1;
            }
            var SN = gi({
                AUTO: 0,
                SINGLE_INSTANCE: 1,
                MULTI_INSTANCE: 2
            }), ON = t1("d2", go("cc.Prefab")(((AN = function(t1) {
                function i() {
                    var _$i;
                    return (_$i = t1.call(this) || this).data = mN && mN(), _$i.optimizationPolicy = bN && bN(), _$i.persistent = kN && kN(), _$i.bd = null, _$i.kd = 0, _$i;
                }
                h(i, t1);
                var n = i.prototype;
                return n.createNode = function(t1) {
                    var _$i = A.instantiate(this);
                    _$i.name = this.name, t1(null, _$i);
                }, n.compileCreateFunction = function() {
                    var _$t, _$i;
                    this.bd = (_$i = _instanceof(_$t = this.data, A.Node) && _$t, new EN(_$t, _$i).result);
                }, n._doInstantiate = function(t1) {
                    return this.data._prefab || nt(3700), this.bd || this.compileCreateFunction(), this.bd(t1);
                }, n._instantiate = function() {
                    var _$t;
                    return this.optimizationPolicy !== SN.SINGLE_INSTANCE && (this.optimizationPolicy === SN.MULTI_INSTANCE || this.kd + 1 >= i.OptimizationPolicyThreshold) ? (_$t = this._doInstantiate(), this.data._instantiate(_$t)) : _$t = this.data._instantiate(), ++this.kd, _$t;
                }, n.initDefault = function(i) {
                    t1.prototype.initDefault.call(this, i), this.data = new VE, this.data.name = "(Missing Node)";
                    var n = new A._PrefabInfo;
                    n.asset = this, n.root = this.data, this.data._prefab = n;
                }, n.validate = function() {
                    return !!this.data;
                }, n.onLoaded = function() {
                    var _$t = this.data;
                    cR(_$t), oR(_$t);
                }, i;
            }(sg)).OptimizationPolicy = SN, AN.OptimizationPolicyThreshold = 3, mN = ho(AN.prototype, "data", [
                Ro
            ], function() {
                return null;
            }), bN = ho(AN.prototype, "optimizationPolicy", [
                Ro
            ], function() {
                return SN.AUTO;
            }), kN = ho(AN.prototype, "persistent", [
                Ro
            ], function() {
                return !1;
            }), AN)) || AN);
            kt(ON, "_utils", yR), A.Prefab = ON, It(A, "cc._Prefab", "Prefab");
            var RN = new (function() {
                function t1() {
                    this.Ad = [], this.Ed = [], this.Td = 0;
                }
                var i = t1.prototype;
                return i.Sd = function(t1) {
                    -1 === t1._internalId && (t1._internalId = this.Ad.length, this.Ad.push(t1));
                }, i.Od = function(t1) {
                    if (-1 !== t1._internalId) {
                        var i = t1._internalId;
                        this.Ad[this.Ad.length - 1]._internalId = i, ri(this.Ad, i), t1._internalId = -1, t1._dirtyVersion === this.Td && (ei(this.Ed, t1), t1._dirtyVersion = -1);
                    }
                }, i.Id = function(t1) {
                    t1._dirtyVersion !== this.Td && -1 !== t1._internalId && (this.Ed.push(t1), t1._dirtyVersion = this.Td);
                }, i.Rd = function() {
                    for(var _$t = this.Ed, i = 0; i < this.Ed.length; i++)_$t[i].updateRenderer();
                    this.Ed.length = 0, this.Td++;
                }, t1;
            }()), MN = t1("dp", {
                INIT: "director_init",
                RESET: "director_reset",
                BEFORE_SCENE_LOADING: "director_before_scene_loading",
                BEFORE_SCENE_LAUNCH: "director_before_scene_launch",
                AFTER_SCENE_LAUNCH: "director_after_scene_launch",
                BEFORE_UPDATE: "director_before_update",
                AFTER_UPDATE: "director_after_update",
                BEFORE_DRAW: "director_before_draw",
                AFTER_DRAW: "director_after_draw",
                BEFORE_COMMIT: "director_before_commit",
                BEFORE_RENDER: "director_before_render",
                AFTER_RENDER: "director_after_render",
                BEFORE_PHYSICS: "director_before_physics",
                AFTER_PHYSICS: "director_after_physics",
                BEGIN_FRAME: "director_begin_frame",
                END_FRAME: "director_end_frame"
            }), CN = t1("dq", function(t1) {
                function i() {
                    var _$i;
                    return (_$i = t1.call(this) || this)._compScheduler = new JC, _$i._nodeActivator = new eN, _$i.Md = !1, _$i.Cd = !1, _$i.Ol = null, _$i.Nd = "", _$i.oa = null, _$i.Pd = 0, _$i.Ii = new Tv, _$i.Dd = [], _$i.Ld = {}, _$i;
                }
                h(i, t1);
                var n = i.prototype;
                return n.end = function() {
                    var _$t = this;
                    this.once("director_end_frame", function() {
                        _$t.purgeDirector();
                    });
                }, n.pause = function() {
                    this.Cd = !0;
                }, n.purgeDirector = function() {
                    this.Ii.unscheduleAll(), this._compScheduler.unscheduleAll(), this._nodeActivator.reset(), qh(this.oa) && this.oa.destroy(), this.oa = null, this.stopAnimation(), Ck.releaseAll();
                }, n.reset = function() {
                    for(var _$t in this.purgeDirector(), this.Ld)this.removePersistRootNode(this.Ld[_$t]);
                    var _$i = this.getScene();
                    _$i && _$i.destroy(), this.emit("director_reset"), this.startAnimation();
                }, n.runSceneImmediate = function(t1, i, n) {
                    var _$s = this;
                    _instanceof(t1, mR) && (t1 = t1.scene), et(_instanceof(t1, _R), 1216), t1.To();
                    for(var _$r = Object.keys(this.Ld).map(function(t1) {
                        return _$s.Ld[t1];
                    }), _$h = 0; _$h < _$r.length; _$h++){
                        var e = _$r[_$h];
                        e.emit("scene-changed-for-persists", t1.renderScene);
                        var u = t1.uuid === e._originalSceneId && t1.getChildByUuid(e.uuid);
                        if (u) {
                            var o = u.siblingIndex;
                            e.hideFlags &= -9, e.hideFlags |= 8 & u.hideFlags, u._destroyImmediate(), t1.insertChild(e, o);
                        } else e.hideFlags |= 8, e.parent = t1;
                    }
                    var f = this.oa;
                    qh(f) && f.destroy(), cb._autoRelease(f, t1, this.Ld), this.oa = null, Wh._deferredDestroy(), i && i(), this.emit("director_before_scene_launch", t1), this.oa = t1, t1.So(), this.Ol && this.Ol.resetCumulativeTime(), this.startAnimation(), n && n(null, t1), this.emit("director_after_scene_launch", t1);
                }, n.runScene = function(t1, i, n) {
                    var _$s = this;
                    _instanceof(t1, mR) && (t1 = t1.scene), et(!!t1, 1205), et(_instanceof(t1, _R), 1216), this.once("director_end_frame", function() {
                        _$s.runSceneImmediate(t1, i, n);
                    });
                }, n.loadScene = function(t1, i, n) {
                    var _$s = this;
                    if (this.Nd) return nt(1208, t1, this.Nd), !1;
                    var _$r = Ck.bundles.find(function(i) {
                        return !!i.getSceneInfo(t1);
                    });
                    return _$r ? (this.emit("director_before_scene_loading", t1), this.Nd = t1, console.time("LoadScene " + t1), _$r.loadScene(t1, function(r, h) {
                        console.timeEnd("LoadScene " + t1), _$s.Nd = "", r ? (z(r), i && i(r)) : _$s.runSceneImmediate(h, n, i);
                    }), !0) : (rt(1209, t1), !1);
                }, n.preloadScene = function(t1, i, n) {
                    var _$s = Ck.bundles.find(function(i) {
                        return !!i.getSceneInfo(t1);
                    });
                    if (_$s) _$s.preloadScene(t1, null, i, n);
                    else {
                        var _$r = 'Can not preload the scene "' + t1 + '" because it is not in the build settings.';
                        n && n(Error(_$r)), z("preloadScene: " + _$r);
                    }
                }, n.resume = function() {
                    this.Cd = !1;
                }, n.getScene = function() {
                    return this.oa;
                }, n.getDeltaTime = function() {
                    return A.game.deltaTime;
                }, n.getTotalTime = function() {
                    return A.game.totalTime;
                }, n.getCurrentTime = function() {
                    return A.game.frameStartTime;
                }, n.getTotalFrames = function() {
                    return this.Pd;
                }, n.isPaused = function() {
                    return this.Cd;
                }, n.getScheduler = function() {
                    return this.Ii;
                }, n.setScheduler = function(t1) {
                    this.Ii !== t1 && (this.unregisterSystem(this.Ii), this.Ii = t1, this.registerSystem(Tv.ID, t1, 200));
                }, n.registerSystem = function(t1, i, n) {
                    i.id = t1, i.priority = n, this.Dd.push(i), this.Dd.sort(_v.sortByPriority);
                }, n.unregisterSystem = function(t1) {
                    ei(this.Dd, t1), this.Dd.sort(_v.sortByPriority);
                }, n.getSystem = function(t1) {
                    return this.Dd.find(function(i) {
                        return i.id === t1;
                    });
                }, n.getAnimationManager = function() {
                    return this.getSystem(A.AnimationManager.ID);
                }, n.startAnimation = function() {
                    this.Md = !1;
                }, n.stopAnimation = function() {
                    this.Md = !0;
                }, n.mainLoop = function() {
                    var _$t;
                    _$t = A.game._calculateDT(!1), this.tick(_$t);
                }, n.tick = function(t1) {
                    if (!this.Md) {
                        if (this.emit("director_begin_frame"), MM._frameDispatchEvents(), !this.Cd) {
                            this.emit("director_before_update"), this._compScheduler.startPhase(), this._compScheduler.updatePhase(t1);
                            for(var _$i = 0; _$i < this.Dd.length; ++_$i)this.Dd[_$i].update(t1);
                            this._compScheduler.lateUpdatePhase(t1), this.emit("director_after_update"), Wh._deferredDestroy();
                            for(var n = 0; n < this.Dd.length; ++n)this.Dd[n].postUpdate(t1);
                        }
                        this.emit("director_before_draw"), RN.Rd(), this.Ol.frameMove(t1), this.emit("director_after_draw"), VE.resetHasChangedFlags(), VE.clearNodeArray(), Bh.update(t1), this.emit("director_end_frame"), this.Pd++;
                    }
                }, n.buildRenderPipeline = function() {
                    if (this.Ol) {
                        var _$t = this.Ol.customPipeline, _$i = this.Ol.cameraList;
                        _$t.beginSetup();
                        var n = A.rendering.getCustomPipeline(Ti.CUSTOM_PIPELINE_NAME);
                        A.rendering.dispatchResizeEvents(_$i, n, _$t), n.setup(_$i, _$t), _$t.endSetup();
                    }
                }, n.Bd = function() {
                    "" !== Ti.CUSTOM_PIPELINE_NAME && A.rendering && this.Ol && this.Ol.usesCustomPipeline && this.on("director_before_scene_launch", A.rendering.forceResizeAllWindows, A.rendering);
                }, n.init = function() {
                    this.Pd = 0, this.Cd = !1, this.registerSystem(Tv.ID, this.Ii, 200), this.Ol = new DC(kw.gfxDevice), this.Ol.initialize({}), this.Bd();
                    for(var _$t = 0; _$t < this.Dd.length; _$t++)this.Dd[_$t].init();
                    this.emit("director_init");
                }, n.addPersistRootNode = function(t1) {
                    if (VE.isNode(t1) && t1.uuid) {
                        var _$i = t1.uuid;
                        if (!this.Ld[_$i]) {
                            var n = this.oa;
                            if (qh(n)) if (t1.parent) {
                                if (!_instanceof(t1.parent, _R)) return void nt(3801);
                                if (t1.parent !== n) return void nt(3802);
                                t1._originalSceneId = n.uuid;
                            } else t1.parent = n, t1._originalSceneId = n.uuid;
                            this.Ld[_$i] = t1, t1._persistNode = !0, cb._addPersistNodeRef(t1);
                        }
                    } else nt(3800);
                }, n.removePersistRootNode = function(t1) {
                    var _$i = t1.uuid || "";
                    t1 === this.Ld[_$i] && (delete this.Ld[_$i], t1._persistNode = !1, t1._originalSceneId = "", cb._removePersistNodeRef(t1));
                }, n.isPersistRootNode = function(t1) {
                    return !!t1._persistNode;
                }, s(i, [
                    {
                        key: "root",
                        get: function get() {
                            return this.Ol;
                        }
                    }
                ]), i;
            }(se));
            CN.EVENT_INIT = "director_init", CN.EVENT_RESET = "director_reset", CN.EVENT_BEFORE_SCENE_LOADING = "director_before_scene_loading", CN.EVENT_BEFORE_SCENE_LAUNCH = "director_before_scene_launch", CN.EVENT_AFTER_SCENE_LAUNCH = "director_after_scene_launch", CN.EVENT_BEFORE_UPDATE = "director_before_update", CN.EVENT_AFTER_UPDATE = "director_after_update", CN.EVENT_BEFORE_DRAW = "director_before_draw", CN.EVENT_AFTER_DRAW = "director_after_draw", CN.EVENT_BEFORE_COMMIT = "director_before_commit", CN.EVENT_BEFORE_RENDER = "director_before_render", CN.EVENT_AFTER_RENDER = "director_after_render", CN.EVENT_BEFORE_PHYSICS = "director_before_physics", CN.EVENT_AFTER_PHYSICS = "director_after_physics", CN.EVENT_BEGIN_FRAME = "director_begin_frame", CN.EVENT_END_FRAME = "director_end_frame", CN.instance = void 0, A.Director = CN, A.DirectorEvent = MN;
            var NN, PN = t1("dr", CN.instance = A.director = new CN), DN = th(), LN = ((NN = {})[Ti.ORIENTATION_AUTO] = Ai.AUTO, NN[Ti.ORIENTATION_LANDSCAPE] = Ai.LANDSCAPE, NN[Ti.ORIENTATION_PORTRAIT] = Ai.PORTRAIT, NN), BN = t1("f9", function(t1) {
                function i() {
                    var _$i;
                    return (_$i = t1.call(this) || this)._designResolutionSize = th(0, 0), _$i.Fd = 1, _$i.Ud = 1, _$i.xd = rh(), _$i.jd = rh(), _$i.Gd = !1, _$i.Hd = !1, _$i.Vd = null, _$i.Wd = new $N(FN.EQUAL_TO_FRAME, UN.EXACT_FIT), _$i.zd = new $N(FN.EQUAL_TO_FRAME, UN.SHOW_ALL), _$i.$d = new $N(FN.EQUAL_TO_FRAME, UN.NO_BORDER), _$i.Xd = new $N(FN.EQUAL_TO_FRAME, UN.FIXED_HEIGHT), _$i.qd = new $N(FN.EQUAL_TO_FRAME, UN.FIXED_WIDTH), _$i.Yd = _$i.zd, _$i;
                }
                h(i, t1);
                var n = i.prototype;
                return n.init = function() {
                    var _$t = ye.windowSize, _$i = _$t.width, n = _$t.height;
                    this._designResolutionSize.width = _$i, this._designResolutionSize.height = n, this.xd.width = _$i, this.xd.height = n, this.jd.width = _$i, this.jd.height = n, DN.width = this.jd.width, DN.height = this.jd.height, me.init(this.jd), this.resizeWithBrowserSize(!0);
                    var s = Ei.querySettings("screen", "designResolution");
                    s && this.setDesignResolutionSize(Number(s.width), Number(s.height), s.policy || $N.FIXED_HEIGHT), ye.on("window-resize", this.Kd, this), ye.on("fullscreen-change", this.Kd, this);
                }, n.resizeWithBrowserSize = function(t1) {
                    ge.handleResizeEvent = t1;
                }, n.setResizeCallback = function(t1) {
                    "function" != typeof t1 && null != t1 || (this.Vd = t1);
                }, n.setOrientation = function(t1) {
                    ge.orientation = LN[t1];
                }, n.adjustViewportMeta = function() {}, n.enableRetina = function(t1) {
                    this.Hd = !!t1;
                }, n.isRetinaEnabled = function() {
                    return this.Hd;
                }, n.enableAutoFullScreen = function(t1) {
                    t1 !== this.Gd && (this.Gd = t1, t1 && ye.requestFullScreen().catch(function() {}));
                }, n.isAutoFullScreenEnabled = function() {
                    return this.Gd;
                }, n.setCanvasSize = function(t1, i) {
                    ge.resolutionScale = 1;
                    var n = ge.devicePixelRatio;
                    ye.windowSize = new Zr(t1 * n, i * n);
                }, n.getCanvasSize = function() {
                    return ye.windowSize;
                }, n.getFrameSize = function() {
                    var _$t = ge.devicePixelRatio, _$i = ye.windowSize;
                    return _$i.width /= _$t, _$i.height /= _$t, _$i;
                }, n.setFrameSize = function(t1, i) {
                    var n = ge.devicePixelRatio;
                    ye.windowSize = new Zr(t1 * n, i * n);
                }, n.getVisibleSize = function() {
                    return new Zr(this.jd.width, this.jd.height);
                }, n.getVisibleSizeInPixel = function() {
                    return new Zr(this.jd.width * this.Fd, this.jd.height * this.Ud);
                }, n.getVisibleOrigin = function() {
                    return new Or(this.jd.x, this.jd.y);
                }, n.getVisibleOriginInPixel = function() {
                    return new Or(this.jd.x * this.Fd, this.jd.y * this.Ud);
                }, n.getResolutionPolicy = function() {
                    return this.Yd;
                }, n.Jd = function(t1) {
                    _instanceof(t1, $N) ? this.Yd = t1 : (t1 === $N.EXACT_FIT && (this.Yd = this.Wd), t1 === $N.SHOW_ALL && (this.Yd = this.zd), t1 === $N.NO_BORDER && (this.Yd = this.$d), t1 === $N.FIXED_HEIGHT && (this.Yd = this.Xd), t1 === $N.FIXED_WIDTH && (this.Yd = this.qd));
                }, n.setResolutionPolicy = function(t1) {
                    this.Jd(t1);
                    var _$i = XN.getDesignResolutionSize();
                    XN.setDesignResolutionSize(_$i.width, _$i.height, t1);
                }, n.setDesignResolutionSize = function(t1, i, n) {
                    if (t1 > 0 && i > 0) {
                        this.Jd(n);
                        var s = this.Yd;
                        s && s.preApply(this), this._designResolutionSize.width = t1, this._designResolutionSize.height = i;
                        var _$r = s.apply(this, this._designResolutionSize);
                        if (_$r.scale && 2 === _$r.scale.length && (this.Fd = _$r.scale[0], this.Ud = _$r.scale[1]), _$r.viewport) {
                            var _$h = this.xd, e = this.jd, u = _$r.viewport;
                            _$h.x = u.x, _$h.y = u.y, _$h.width = u.width, _$h.height = u.height, e.x = 0, e.y = 0, e.width = u.width / this.Fd, e.height = u.height / this.Ud;
                        }
                        s.postApply(this), DN.width = this.jd.width, DN.height = this.jd.height, me.init(this.jd), this.emit("design-resolution-changed");
                    } else rt(2200);
                }, n.getDesignResolutionSize = function() {
                    return new Zr(this._designResolutionSize.width, this._designResolutionSize.height);
                }, n.setRealPixelResolution = function(t1, i, n) {
                    document.documentElement.style.width = t1 + "px", document.body.style.width = t1 + "px", document.body.style.left = "0px", document.body.style.top = "0px", this.setDesignResolutionSize(t1, i, n);
                }, n.getViewportRect = function() {
                    return this.xd;
                }, n.getScaleX = function() {
                    return this.Fd;
                }, n.getScaleY = function() {
                    return this.Ud;
                }, n.getDevicePixelRatio = function() {
                    return ge.devicePixelRatio;
                }, n.convertToLocationInView = function(t1, i, n, s) {
                    void 0 === s && (s = new Or);
                    var _$r = ge.devicePixelRatio * (t1 - n.left), _$h = ge.devicePixelRatio * (n.top + n.height - i);
                    return ge.isFrameRotated ? (s.x = ye.windowSize.width - _$h, s.y = _$r) : (s.x = _$r, s.y = _$h), s;
                }, n.Kt = function(t1) {
                    var _$i = this.xd;
                    t1.x = (t1.x - _$i.x) / this.Fd, t1.y = (t1.y - _$i.y) / this.Ud;
                }, n.Kd = function(t1, i, n) {
                    A.director.root.resize(t1, i, void 0 === n || 0 === n ? 1 : n);
                    var s = this._designResolutionSize, _$r = s.width, _$h = s.height;
                    t1 > 0 && i > 0 ? this.setDesignResolutionSize(_$r, _$h, this.Yd) : $(!1, "_updateAdaptResult Invalid size."), this.emit("canvas-resize"), this.Vd && this.Vd();
                }, i;
            }(ne(_v)));
            BN.instance = void 0;
            var FN = function() {
                function t1() {
                    this.name = "ContainerStrategy";
                }
                var i = t1.prototype;
                return i.preApply = function() {}, i.apply = function() {}, i.postApply = function() {}, i._setupCanvas = function() {
                    var _$t = A.game.canvas;
                    if (_$t) {
                        var i = ye.windowSize;
                        _$t.width !== i.width && (_$t.width = i.width), _$t.height !== i.height && (_$t.height = i.height);
                    }
                }, t1;
            }();
            FN.EQUAL_TO_FRAME = void 0, FN.PROPORTION_TO_FRAME = void 0;
            var UN = function() {
                function t1() {
                    this.name = "ContentStrategy", this.Qd = {
                        scale: [
                            1,
                            1
                        ],
                        viewport: null
                    }, this._strategy = $N.UNKNOWN;
                }
                var i = t1.prototype;
                return i.preApply = function() {}, i.apply = function() {
                    return {
                        scale: [
                            1,
                            1
                        ]
                    };
                }, i.postApply = function() {}, i._buildResult = function(t1, i, n, s, r, h) {
                    2 > Math.abs(t1 - n) && (n = t1), 2 > Math.abs(i - s) && (s = i);
                    var e = new sh(Math.round((t1 - n) / 2), Math.round((i - s) / 2), n, s), u = this.Qd;
                    return u.scale = [
                        r,
                        h
                    ], u.viewport = e, u;
                }, s(t1, [
                    {
                        key: "strategy",
                        get: function get() {
                            return this._strategy;
                        }
                    }
                ]), t1;
            }(), xN = function(t1) {
                function i() {
                    var _$i;
                    return (_$i = t1.call(this) || this).name = "EqualToFrame", _$i;
                }
                return h(i, t1), i.prototype.apply = function() {
                    ge.isProportionalToFrame = !1, this._setupCanvas();
                }, i;
            }(FN), jN = function(t1) {
                function i() {
                    var _$i;
                    return (_$i = t1.call(this) || this).name = "ProportionalToFrame", _$i;
                }
                return h(i, t1), i.prototype.apply = function() {
                    ge.isProportionalToFrame = !0, this._setupCanvas();
                }, i;
            }(FN);
            FN.EQUAL_TO_FRAME = new xN, FN.PROPORTION_TO_FRAME = new jN;
            var GN = function(t1) {
                function i() {
                    var _$i;
                    return (_$i = t1.call(this) || this).name = "ExactFit", _$i._strategy = $N.EXACT_FIT, _$i;
                }
                return h(i, t1), i.prototype.apply = function(t1, i) {
                    var n = ye.windowSize, s = n.width, _$r = n.height, _$h = s / i.width, e = _$r / i.height;
                    return this._buildResult(s, _$r, s, _$r, _$h, e);
                }, i;
            }(UN), HN = function(t1) {
                function i() {
                    var _$i;
                    return (_$i = t1.call(this) || this).name = "ShowAll", _$i._strategy = $N.SHOW_ALL, _$i;
                }
                return h(i, t1), i.prototype.apply = function(t1, i) {
                    var n, s, _$r = ye.windowSize, _$h = _$r.width, e = _$r.height, u = i.width, o = i.height, f = _$h / u, _$c = e / o, a = 0;
                    return f < _$c ? (n = _$h, s = o * (a = f)) : (n = u * (a = _$c), s = e), this._buildResult(_$h, e, n, s, a, a);
                }, i;
            }(UN), VN = function(t1) {
                function i() {
                    var _$i;
                    return (_$i = t1.call(this) || this).name = "NoBorder", _$i._strategy = $N.NO_BORDER, _$i;
                }
                return h(i, t1), i.prototype.apply = function(t1, i) {
                    var n, s, _$r, _$h = ye.windowSize, e = _$h.width, u = _$h.height, o = i.width, f = i.height, _$c = e / o, a = u / f;
                    return _$c < a ? (s = o * (n = a), _$r = u) : (s = e, _$r = f * (n = _$c)), this._buildResult(e, u, s, _$r, n, n);
                }, i;
            }(UN), WN = function(t1) {
                function i() {
                    var _$i;
                    return (_$i = t1.call(this) || this).name = "FixedHeight", _$i._strategy = $N.FIXED_HEIGHT, _$i;
                }
                return h(i, t1), i.prototype.apply = function(t1, i) {
                    var n = ye.windowSize, s = n.width, _$r = n.height, _$h = _$r / i.height;
                    return this._buildResult(s, _$r, s, _$r, _$h, _$h);
                }, i;
            }(UN), zN = function(t1) {
                function i() {
                    var _$i;
                    return (_$i = t1.call(this) || this).name = "FixedWidth", _$i._strategy = $N.FIXED_WIDTH, _$i;
                }
                return h(i, t1), i.prototype.apply = function(t1, i) {
                    var n = ye.windowSize, s = n.width, _$r = n.height, _$h = s / i.width;
                    return this._buildResult(s, _$r, s, _$r, _$h, _$h);
                }, i;
            }(UN), $N = t1("fa", function() {
                function t1(t1, i) {
                    this.name = "ResolutionPolicy", this._containerStrategy = t1, this.Zd = i;
                }
                var i = t1.prototype;
                return i.preApply = function(t1) {
                    this.Zd.preApply(t1);
                }, i.apply = function(t1, i) {
                    return this._containerStrategy.apply(t1, i), this.Zd.apply(t1, i);
                }, i.postApply = function(t1) {
                    this.Zd.postApply(t1);
                }, i.setContainerStrategy = function(t1) {
                    this._containerStrategy = t1;
                }, i.setContentStrategy = function(t1) {
                    this.Zd = t1;
                }, i.getContentStrategy = function() {
                    return this.Zd;
                }, s(t1, [
                    {
                        key: "canvasSize",
                        get: function get() {
                            return ye.windowSize;
                        }
                    }
                ]), t1;
            }());
            $N.EXACT_FIT = 0, $N.NO_BORDER = 1, $N.SHOW_ALL = 2, $N.FIXED_HEIGHT = 3, $N.FIXED_WIDTH = 4, $N.UNKNOWN = 5, $N.ContainerStrategy = FN, $N.ContentStrategy = UN, A.ResolutionPolicy = $N, UN.EXACT_FIT = new GN, UN.SHOW_ALL = new HN, UN.NO_BORDER = new VN, UN.FIXED_HEIGHT = new WN, UN.FIXED_WIDTH = new zN;
            var XN = t1("fb", BN.instance = A.view = new BN);
            PN.registerSystem("view", XN, 0), A.winSize = DN;
            var qN = new Or;
            function YN(t1, i, n, s) {
                t1.setProperty(i, n, s);
            }
            var KN = function() {
                var _$t = i.prototype;
                function i() {
                    this.tw = void 0, this.iw = 0, this.nw = void 0, this.sw = void 0, this.rw = void 0, this.hw = void 0, this.ew = void 0, this.uw = void 0, this.ow = void 0, this.fw = void 0, this.cw = void 0, this.aw = void 0, this.lw = void 0, this.ww = !1, this.gw = void 0, this.pw = void 0, this.yw = void 0, this._w = void 0, this.mw = void 0, this.bw = void 0, this.kw = void 0, this.Aw = void 0, this.Ew = 1920, this.Tw = 1080, this.Sw = 140, this.Ow = 200, this.Iw = 0, this.Rw = 0, this.Mw = .5, this.Cw = 1 / 6 + 2.5 / 6, this.Nw = 24, this.Pw = 24, this.Dw = .5, this.Lw = 32, this.Bw = 4, this.Fw = 1;
                }
                return _$t.init = function() {
                    var _$t, _$i, n, _$s, _$r, h, e, u = this, o = $N.SHOW_ALL, f = Ei.querySettings("screen", "designResolution");
                    if (null !== f && (o = f.policy), this.tw = {
                        Uw: null != (_$t = o) ? _$t : $N.SHOW_ALL,
                        xw: null != (_$i = Ei.querySettings("splashScreen", "displayRatio")) ? _$i : .4,
                        jw: null != (n = Ei.querySettings("splashScreen", "totalTime")) ? n : 3e3,
                        Gw: null != (_$s = Ei.querySettings("splashScreen", "watermarkLocation")) ? _$s : "default",
                        Hw: null == (_$r = Ei.querySettings("splashScreen", "autoFit")) || _$r,
                        Vw: null != (h = Ei.querySettings("splashScreen", "logo")) ? h : void 0,
                        Ww: null != (e = Ei.querySettings("splashScreen", "background")) ? e : void 0
                    }, this.iw = 0, !(this.tw.jw <= 0 || void 0 === this.tw.Vw || void 0 === this.tw.Ww)) {
                        this.nw = A.director.root.device, this.sw = A.director.root.mainWindow.swapchain, this.zw(), this.$w(), "default" === this.tw.Vw.type && this.Xw();
                        var _$c = Promise.resolve(), a = Promise.resolve();
                        return "custom" === this.tw.Ww.type && (_$c = new Promise(function(t1, i) {
                            u.pw = new S.Image, u.pw.onload = function() {
                                u.qw(), t1();
                            }, u.pw.onerror = function() {
                                i();
                            }, u.pw.src = u.tw.Ww.base64;
                        })), "none" !== this.tw.Vw.type && (a = new Promise(function(t1, i) {
                            u.mw = new S.Image, u.mw.onload = function() {
                                u.Yw(), t1();
                            }, u.mw.onerror = function() {
                                i();
                            }, u.mw.src = u.tw.Vw.base64;
                        })), Promise.all([
                            _$c,
                            a
                        ]);
                    }
                    return this.tw.jw = 0, Promise.resolve([]);
                }, _$t.zw = function() {
                    var _$t, _$i = null == (_$t = this.tw.Ww) ? void 0 : _$t.color;
                    this.aw = _$i ? [
                        new xl(_$i.x, _$i.y, _$i.z, _$i.w)
                    ] : [
                        new xl(0, 0, 0, 1)
                    ];
                    var n = this.nw, _$s = this.sw, _$r = n.capabilities;
                    this.cw = new Cl(0, 0, _$s.width, _$s.height), this.ew = n.commandBuffer;
                    var h = new Float32Array([
                        .5,
                        .5,
                        1,
                        0,
                        -0.5,
                        .5,
                        0,
                        0,
                        .5,
                        -0.5,
                        1,
                        1,
                        -0.5,
                        -0.5,
                        0,
                        1
                    ]);
                    this.ow = n.createBuffer(new Wl(10, 1, 64, 16)), this.ow.update(h);
                    var e = new Uint16Array([
                        0,
                        1,
                        2,
                        1,
                        3,
                        2
                    ]);
                    this.fw = n.createBuffer(new Wl(6, 1, 12, 2)), this.fw.update(e);
                    var o = new fd([
                        new ud("a_position", 21),
                        new ud("a_texCoord", 21)
                    ], [
                        this.ow
                    ], this.fw);
                    this.uw = n.createInputAssembler(o), this.lw = new cr, cr.ortho(this.lw, -1, 1, -1, 1, -1, 1, _$r.clipSpaceMinZ, _$r.clipSpaceSignY, _$s.surfaceTransform), this.ww = _e.isMobile;
                }, _$t.$w = function() {
                    this.ww ? (this.Ew = 812, this.Tw = 375, this.Sw = 70, this.Ow = 100, this.Nw = 12, this.Pw = this.Nw + this.Bw, this.Dw = .5, this.Lw = 16) : (this.Ew = 1920, this.Tw = 1080, this.Sw = 140, this.Ow = 200, this.Nw = 24, this.Pw = this.Nw + this.Bw, this.Dw = .5, this.Lw = 32), this.Mw = .5, this.Cw = 1 / 6 + 2.5 / 6, this.Kw();
                }, _$t.Kw = function() {
                    var _$t = this.sw.width, _$i = this.sw.height, n = this.ww ? 375 : 1080, _$s = this.ww ? 812 : 1920;
                    if (_$t > _$i) {
                        var _$r = _$s;
                        _$s = n, n = _$r;
                    }
                    this.Fw = _$t / _$i > 16 / 9 ? _$i / _$s : _$t / n;
                }, _$t.update = function(t1) {
                    var _$i = this.tw, n = this.nw, _$s = this.sw, _$r = n.capabilities;
                    cr.ortho(this.lw, -1, 1, -1, 1, -1, 1, _$r.clipSpaceMinZ, _$r.clipSpaceSignY, _$s.surfaceTransform);
                    var h = _$s.width, e = _$s.height;
                    this.Kw(), this.iw += 1e3 * t1;
                    var u = Ef(xn(this.iw / _$i.jw)), o = 1, f = 1, _$c = this.pw;
                    if ("custom" === _$i.Ww.type) {
                        _$i.Uw === $N.FIXED_WIDTH ? (o = h, f = h / _$c.width * _$c.height) : _$i.Uw === $N.FIXED_HEIGHT ? (o = e / _$c.height * _$c.width, f = e) : _$i.Uw === $N.SHOW_ALL ? _$c.width / this.Tw > h / e ? (o = h, f = h / _$c.width * _$c.height) : (o = e / _$c.height * _$c.width, f = e) : _$i.Uw === $N.NO_BORDER ? _$c.width / _$c.height > h / e ? (o = e / _$c.height * _$c.width, f = e) : (o = h, f = h / _$c.width * _$c.height) : (o = h, f = e);
                        var a = this.gw;
                        YN(a, "resolution", qN.set(h, e), 0), YN(a, "scale", qN.set(o, f), 0), YN(a, "translate", qN.set(.5 * h, .5 * e), 0), YN(a, "percent", 1), YN(a, "u_projection", this.lw), a.passes[0].update();
                    }
                    var v = e * this.Cw;
                    if ("none" !== this.tw.Vw.type) {
                        f = .185 * e * _$i.xw, o = this.Iw * (.185 * e / this.Rw) * _$i.xw;
                        var l = this._w;
                        YN(l, "resolution", qN.set(h, e), 0), YN(l, "scale", qN.set(o, f), 0), YN(l, "translate", qN.set(h * this.Mw, v), 0), YN(l, "percent", u), YN(l, "u_projection", this.lw), l.passes[0].update();
                    }
                    if ("default" === this.tw.Vw.type && this.kw) {
                        var _$d = this.Aw.width, w = this.Aw.height;
                        o = _$d, f = w;
                        var g = v - (.5 * this.Rw * _$i.xw + this.Lw) * this.Fw - .5 * w, p = this.kw;
                        YN(p, "resolution", qN.set(h, e), 0), YN(p, "scale", qN.set(o, f), 0), YN(p, "translate", qN.set(h * this.Dw, g), 0), YN(p, "percent", u), YN(p, "u_projection", this.lw), p.passes[0].update();
                    }
                    this.Jw();
                }, _$t.qw = function() {
                    var _$t = this.nw;
                    this.gw = new rA, this.gw.initialize({
                        effectName: "util/splash-screen"
                    });
                    var _$i = new Jl;
                    _$i.addressU = 2, _$i.addressV = 2, _$i.addressW = 2, this.hw = _$t.getSampler(_$i), this.yw = _$t.createTexture(new Yl(1, 6, 35, this.pw.width, this.pw.height));
                    var n = this.gw.passes[0], _$s = n.getBinding("mainTexture");
                    n.bindTexture(_$s, this.yw), this.rw = n.getShaderVariant();
                    var _$r = n.descriptorSet;
                    _$r.bindSampler(_$s, this.hw), _$r.update();
                    var h = new Fl, e = h.texExtent;
                    e.width = this.pw.width, e.height = this.pw.height, e.depth = 1, _$t.copyTexImagesToTexture([
                        this.pw
                    ], this.yw, [
                        h
                    ]);
                }, _$t.Yw = function() {
                    var _$t = this.nw;
                    this._w = new rA, this._w.initialize({
                        effectName: "util/splash-screen"
                    });
                    var _$i = new Jl;
                    _$i.addressU = 2, _$i.addressV = 2, _$i.addressW = 2, this.hw = _$t.getSampler(_$i), this.bw = _$t.createTexture(new Yl(1, 6, 35, this.mw.width, this.mw.height));
                    var n = this._w.passes[0], _$s = n.getBinding("mainTexture");
                    n.bindTexture(_$s, this.bw), this.rw = n.getShaderVariant();
                    var _$r = n.descriptorSet;
                    _$r.bindSampler(_$s, this.hw), _$r.update();
                    var h = new Fl, e = h.texExtent;
                    e.width = this.mw.width, e.height = this.mw.height, e.depth = 1, _$t.copyTexImagesToTexture([
                        this.mw
                    ], this.bw, [
                        h
                    ]);
                    var u = this.mw.width / this.mw.height;
                    u < 1 ? (this.Iw = this.Sw, this.Rw = this.Sw / u) : (this.Iw = this.Ow * u, this.Rw = this.Ow);
                }, _$t.Xw = function() {
                    var _$t = S.document.createElement("canvas");
                    _$t.height = this.Pw * this.Fw, _$t.style.width = "" + _$t.width, _$t.style.height = "" + _$t.height;
                    var _$i = "Created with Cocos", n = _$t.getContext("2d");
                    n.font = this.Nw * this.Fw + "px Arial", n.textBaseline = "top", n.textAlign = "center", n.fillStyle = "#707070", _$t.width = n.measureText(_$i).width + 10, n.font = this.Nw * this.Fw + "px Arial", n.textBaseline = "top", n.textAlign = "center", n.fillStyle = "#707070", n.fillText(_$i, _$t.width / 2, 0);
                    var _$r = new Fl, h = _$r.texExtent;
                    h.width = _$t.width, h.height = _$t.height, h.depth = 1, this.Aw = this.nw.createTexture(new Yl(1, 6, 35, _$t.width, _$t.height)), this.nw.copyTexImagesToTexture([
                        _$t
                    ], this.Aw, [
                        _$r
                    ]), this.kw = new rA, this.kw.initialize({
                        effectName: "util/splash-screen"
                    });
                    var e = this.kw.passes[0], u = e.getBinding("mainTexture");
                    e.bindTexture(u, this.Aw), e.descriptorSet.update();
                }, _$t.Jw = function() {
                    var _$t = this.nw, _$i = this.sw;
                    this.lw;
                    var n = this.gw, _$s = this._w, _$r = this.kw, h = this.tw, e = this.uw;
                    if (_$t.capabilities, !_e.isXR || xr.entry.isRenderAllowable()) for(var u = _e.isXR ? 2 : 1, o = 0; o < u; o++){
                        _$t.enableAutoBarrier(!0), _$t.acquire([
                            _$i
                        ]);
                        var f = this.ew, _$c = A.director.root.mainWindow.framebuffer, a = this.cw;
                        if (a.width = _$i.width, a.height = _$i.height, f.begin(), f.beginRenderPass(_$c.renderPass, _$c, a, this.aw, 1, 0), A.director.root.pipeline, "custom" === h.Ww.type) {
                            var v = n.passes[0], l = tA.getOrCreatePipelineState(_$t, v, this.rw, _$c.renderPass, e);
                            f.bindPipelineState(l), f.bindDescriptorSet(1, v.descriptorSet), f.bindInputAssembler(e), f.draw(e);
                        }
                        if ("none" !== h.Vw.type) {
                            var _$d = _$s.passes[0], w = tA.getOrCreatePipelineState(_$t, _$d, this.rw, _$c.renderPass, e);
                            f.bindPipelineState(w), f.bindDescriptorSet(1, _$d.descriptorSet), f.bindInputAssembler(e), f.draw(e);
                        }
                        if ("default" === h.Vw.type && _$r) {
                            var g = this.kw.passes[0], p = tA.getOrCreatePipelineState(_$t, g, this.rw, _$c.renderPass, e);
                            f.bindPipelineState(p), f.bindDescriptorSet(1, g.descriptorSet), f.bindInputAssembler(e), f.draw(e);
                        }
                        f.endRenderPass(), f.end(), _$t.flushCommands([
                            f
                        ]), _$t.queue.submit([
                            f
                        ]), _$t.present(), _$t.enableAutoBarrier(!A.rendering);
                    }
                }, _$t.Qw = function() {
                    this.nw = null, this.sw = null, this.aw = null, this.pw && (this.pw.destroy && this.pw.destroy(), this.pw = null), this.gw && (this.gw.destroy(), this.gw = null), this.yw && (this.yw.destroy(), this.yw = null), this.mw && (this.mw.destroy && this.mw.destroy(), this.mw = null), this._w && (this._w.destroy(), this._w = null), this.bw && (this.bw.destroy(), this.bw = null), this.cw = null, this.ew = null, this.rw = null, this.uw && (this.uw.destroy(), this.uw = null), this.ow && (this.ow.destroy(), this.ow = null), this.fw && (this.fw.destroy(), this.fw = null), this.hw = null, this.kw && (this.kw.destroy(), this.kw = null), this.Aw && (this.Aw.destroy(), this.Aw = null), this.tw = null;
                }, i.createInstance = function() {
                    return i.Zw = new i, i.Zw;
                }, i.releaseInstance = function() {
                    i.Zw && (i.Zw.Qw(), i.Zw = null);
                }, s(i, [
                    {
                        key: "isFinished",
                        get: function get() {
                            return this.iw >= this.tw.jw;
                        }
                    },
                    {
                        key: "curTime",
                        get: function get() {
                            return this.iw;
                        },
                        set: function set(t1) {
                            this.iw = t1;
                        }
                    }
                ], [
                    {
                        key: "instance",
                        get: function get() {
                            return i.Zw;
                        }
                    }
                ]), i;
            }();
            KN.Zw = null, A.internal.SplashScreen = KN;
            var JN = function() {
                function t1() {
                    var _$t = this;
                    this.tg = 0, this.ig = null, this.ng = 60, this.rd = 0, this.sg = 0, this.hg = !1, this.Ql = 0, this.Fi = null, this.eg = void 0, this.ug = void 0, this._handleRAF = function() {
                        var i = performance.now(), _$s = Math.floor((i - _$t.sg) / _$t.rd);
                        _$s < 0 && (_$t.sg = i, _$t.Ql = 0), _$s < _$t.Ql ? _$t.tg = _$t.eg.call(window, _$t._handleRAF) : (_$t.Ql = _$s + 1, _$t.Fi && _$t.Fi());
                    }, this.rd = 1e3 / this.ng, this.eg = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame, this.ug = window.cancelAnimationFrame || window.cancelRequestAnimationFrame || window.msCancelRequestAnimationFrame || window.mozCancelRequestAnimationFrame || window.oCancelRequestAnimationFrame || window.webkitCancelRequestAnimationFrame || window.msCancelAnimationFrame || window.mozCancelAnimationFrame || window.webkitCancelAnimationFrame || window.ocancelAnimationFrame;
                }
                var i = t1.prototype;
                return i.start = function() {
                    var _$t = this;
                    if (!this.hg) {
                        var i = void 0 === this.eg;
                        this.sg = performance.now(), this.tg = this.og(function n() {
                            i && (_$t.sg = performance.now()), _$t.hg && (_$t.tg = _$t.og(n)), _$t.ig && _$t.ig();
                        }), this.hg = !0, this.Ql = 0;
                    }
                }, i.stop = function() {
                    this.hg && (this.fg(this.tg), this.tg = 0, this.hg = !1, this.Ql = 0);
                }, i.og = function(t1) {
                    if (void 0 === this.eg) {
                        var n = Math.max(0, performance.now() - this.sg);
                        return setTimeout(t1, Math.max(0, this.rd - n));
                    }
                    return this.Fi = t1, this.eg.call(window, this._handleRAF);
                }, i.fg = function(t1) {
                    void 0 === this.ug ? clearTimeout(t1) : t1 && this.ug.call(window, t1);
                }, s(t1, [
                    {
                        key: "targetFrameRate",
                        get: function get() {
                            return this.ng;
                        },
                        set: function set(t1) {
                            this.ng !== t1 && (this.ng = t1, this.rd = 1e3 / this.ng, this.hg && (this.stop(), this.start()));
                        }
                    },
                    {
                        key: "onTick",
                        get: function get() {
                            return this.ig;
                        },
                        set: function set(t1) {
                            this.ig = t1;
                        }
                    }
                ]), t1;
            }(), QN = new (function() {
                function t1() {
                    this.L = null;
                }
                return t1.prototype.init = function(t1) {
                    var i = this;
                    return void 0 === t1 && (t1 = ""), A.rendering && A.rendering.enableEffectImport && t1 ? new Promise(function(n, s) {
                        var _$r = new XMLHttpRequest;
                        _$r.open("GET", t1), _$r.responseType = "arraybuffer", _$r.onload = function() {
                            i.L = _$r.response, n();
                        }, _$r.onerror = function() {
                            s(Error("request effect settings failed!"));
                        }, _$r.send(null);
                    }) : Promise.resolve();
                }, s(t1, [
                    {
                        key: "data",
                        get: function get() {
                            return this.L;
                        }
                    }
                ]), t1;
            }());
            A.effectSettings = QN;
            var ZN = Ei.querySettings.bind(Ei), tP = t1("ds", function(t1) {
                function n() {
                    var i;
                    return (i = t1.call(this) || this).frame = null, i.container = null, i.canvas = null, i.renderType = -1, i.eventTargetOn = t1.prototype.on, i.eventTargetOnce = t1.prototype.once, i.config = {}, i.onStart = null, i.frameTime = 1e3 / 60, i._isCloning = !1, i.ag = !1, i.vg = !1, i.lg = !1, i.Cd = !0, i.dg = !1, i.wg = 60, i.gg = null, i.pg = 0, i.sg = 0, i.yg = 0, i._g = !1, i.mg = !0, i.onPreBaseInitDelegate = new ce, i.onPostBaseInitDelegate = new ce, i.onPreInfrastructureInitDelegate = new ce, i.onPostInfrastructureInitDelegate = new ce, i.onPreSubsystemInitDelegate = new ce, i.onPostSubsystemInitDelegate = new ce, i.onPreProjectInitDelegate = new ce, i.onPostProjectInitDelegate = new ce, i;
                }
                h(n, t1);
                var _$r = n.prototype;
                return _$r.setFrameRate = function(t1) {
                    this.frameRate = t1;
                }, _$r.getFrameRate = function() {
                    return this.frameRate;
                }, _$r.step = function() {
                    PN.tick(this._calculateDT(!0));
                }, _$r.kg = function() {
                    this.Cd || (this.dg = !0, this.pause());
                }, _$r.Ag = function() {
                    this.dg && (this.resume(), this.dg = !1);
                }, _$r.pause = function() {
                    var _$t;
                    this.Cd || (this.Cd = !0, null == (_$t = this.gg) || _$t.stop(), this.emit(n.EVENT_PAUSE));
                }, _$r.resume = function() {
                    var _$t;
                    this.Cd && (MM._clearEvents(), this.Cd = !1, null == (_$t = this.gg) || _$t.start(), this.emit(n.EVENT_RESUME));
                }, _$r.isPaused = function() {
                    return this.Cd;
                }, _$r.restart = function() {
                    var _$t = this;
                    return new Promise(function(t1) {
                        PN.once("director_end_frame", function() {
                            return t1();
                        });
                    }).then(function() {
                        PN.reset(), A.Object._deferredDestroy(), _$t.pause(), _$t.resume(), _$t.mg = !0;
                    }).then(function() {
                        return KN.createInstance().init();
                    }).then(function() {
                        _$t.Eg(n.EVENT_RESTART);
                    });
                }, _$r.end = function() {
                    le.close();
                }, _$r.on = function(t1, i, n, s) {
                    return this.Tg(t1) && i.call(n), this.eventTargetOn(t1, i, n, s);
                }, _$r.once = function(t1, i, n) {
                    return this.Tg(t1) ? i.call(n) : this.eventTargetOnce(t1, i, n);
                }, _$r.Tg = function(t1) {
                    return this.vg && t1 === n.EVENT_ENGINE_INITED || this.ag && t1 === n.EVENT_GAME_INITED || this.lg && t1 === n.EVENT_RENDERER_INITED;
                }, _$r.init = function(t1) {
                    var _$s = this;
                    return this.Sg(t1), Promise.resolve().then(function() {
                        return _$s.emit(n.EVENT_PRE_BASE_INIT), _$s.onPreBaseInitDelegate.dispatch();
                    }).then(function() {
                        q(t1.debugMode || 0);
                    }).then(function() {
                        return _e.init();
                    }).then(function() {
                        _$s.Og();
                    }).then(function() {
                        return Ei.init(t1.settingsPath, t1.overrideSettings);
                    }).then(function() {
                        return _$s.emit(n.EVENT_POST_BASE_INIT), _$s.onPostBaseInitDelegate.dispatch();
                    }).then(function() {
                        return _$s.emit(n.EVENT_PRE_INFRASTRUCTURE_INIT), _$s.onPreInfrastructureInitDelegate.dispatch();
                    }).then(function() {
                        Ti.init(), _$s.Ig();
                        var _$t = {
                            frame: document.querySelector("#GameDiv"),
                            container: document.querySelector("#Cocos3dGameContainer"),
                            canvas: document.querySelector("#GameCanvas")
                        };
                        return _$s.canvas = _$t.canvas, _$s.frame = _$t.frame, _$s.container = _$t.container, ye.init(), Mv.init(), kw.init(_$s.canvas, Dy);
                    }).then(function() {
                        if (ZN("rendering", "customPipeline")) {
                            if (!A.rendering) return void rt(12109);
                            Ti.CUSTOM_PIPELINE_NAME || (Ti.CUSTOM_PIPELINE_NAME = "Builtin");
                        } else A.rendering = void 0;
                        Ck.init(), Lk.init(), My.init(), _$s.Rg();
                    }).then(function() {
                        return _$s.emit(n.EVENT_POST_INFRASTRUCTURE_INIT), _$s.onPostInfrastructureInitDelegate.dispatch();
                    }).then(function() {
                        return _$s.emit(n.EVENT_PRE_SUBSYSTEM_INIT), _$s.onPreSubsystemInitDelegate.dispatch();
                    }).then(function() {
                        return QN.init(ZN("rendering", "effectSettingsPath"));
                    }).then(function() {
                        if (A.rendering && A.rendering.enableEffectImport) if (3 !== ZN("rendering", "renderMode")) {
                            var _$t = QN.data;
                            null !== _$t ? A.rendering.init(kw.gfxDevice, _$t) : rt(1102);
                        } else A.rendering.init(kw.gfxDevice, null);
                    }).then(function() {
                        var _$t = ZN("scripting", "scriptPackages");
                        return _$t ? Promise.all(_$t.map(function(t1) {
                            return i.import(t1);
                        })) : Promise.resolve([]);
                    }).then(function() {
                        return PN.init(), Lk.loadBuiltinAssets();
                    }).then(function() {
                        return _$s.emit(n.EVENT_POST_SUBSYSTEM_INIT), _$s.onPostSubsystemInitDelegate.dispatch();
                    }).then(function() {
                        V("Cocos Creator v" + T), _$s.emit(n.EVENT_ENGINE_INITED), _$s.vg = !0;
                    }).then(function() {
                        return _$s.emit(n.EVENT_PRE_PROJECT_INIT), _$s.onPreProjectInitDelegate.dispatch();
                    }).then(function() {
                        var _$t = ZN("plugins", "jsList"), i = Promise.resolve();
                        return _$t && _$t.forEach(function(t1) {
                            i = i.then(function() {
                                var i;
                                return i = "src/" + t1, new Promise(function(t1, n) {
                                    function r(t1) {
                                        t1.filename === i && (_$s = t1.error);
                                    }
                                    window.addEventListener("error", r);
                                    var _$s, _$h = document.createElement("script");
                                    _$h.charset = "utf-8", _$h.async = !0, _$h.crossOrigin = "anonymous", _$h.addEventListener("error", function() {
                                        window.removeEventListener("error", r), n(Error("Error loading " + i));
                                    }), _$h.addEventListener("load", function() {
                                        window.removeEventListener("error", r), document.head.removeChild(_$h), _$s ? n(_$s) : t1();
                                    }), _$h.src = i.replace("#", "%23"), document.head.appendChild(_$h);
                                });
                            });
                        }), i;
                    }).then(function() {
                        return _$s._loadProjectBundles();
                    }).then(function() {
                        return _$s.Mg();
                    }).then(function() {
                        return _$s.Cg();
                    }).then(function() {
                        return _$s.Ng();
                    }).then(function() {
                        return Lk.compileBuiltinMaterial(), KN.createInstance().init();
                    }).then(function() {
                        return _$s.emit(n.EVENT_POST_PROJECT_INIT), _$s.onPostProjectInitDelegate.dispatch();
                    }).then(function() {
                        _$s.ag = !0, _$s.Eg(n.EVENT_GAME_INITED);
                    });
                }, _$r.Ig = function() {}, _$r.Sg = function(t1) {
                    var i = t1.overrideSettings = t1.overrideSettings || {};
                    "showFPS" in t1 && (i.profiling = i.profiling || {}, i.profiling.showFPS = t1.showFPS), "frameRate" in t1 && (i.screen = i.screen || {}, i.screen.frameRate = t1.frameRate), "renderMode" in t1 && (i.rendering = i.rendering || {}, i.rendering.renderMode = t1.renderMode), "renderPipeline" in t1 && (i.rendering = i.rendering || {}, i.rendering.renderPipeline = t1.renderPipeline), "assetOptions" in t1 && (i.assets = i.assets || {}, Object.assign(i.assets, t1.assetOptions)), "customJointTextureLayouts" in t1 && (i.animation = i.animation || {}, i.animation.customJointTextureLayouts = t1.customJointTextureLayouts), "physics" in t1 && (i.physics = i.physics || {}, Object.assign(i.physics, t1.physics)), "orientation" in t1 && (i.screen = i.screen || {}, i.screen.orientation = t1.orientation), "exactFitScreen" in t1 && (i.screen = i.screen || {}, i.screen.exactFitScreen = t1.exactFitScreen);
                }, _$r.Ng = function() {
                    var _$t = ZN("assets", "preloadAssets");
                    return _$t ? Promise.all(_$t.map(function(t1) {
                        return new Promise(function(i, n) {
                            Ck.loadAny(t1, function(t1) {
                                t1 ? n(t1) : i();
                            });
                        });
                    })) : Promise.resolve([]);
                }, _$r.Mg = function() {
                    return new Promise(function(t1) {
                        t1();
                    });
                }, _$r._loadProjectBundles = function() {
                    var _$t = ZN("assets", "preloadBundles");
                    return _$t ? Promise.all(_$t.map(function(t1) {
                        var i = t1.bundle, _$n = t1.version;
                        return new Promise(function(t1, s) {
                            var _$r = {};
                            _$n && (_$r.version = _$n), Ck.loadBundle(i, _$r, function(i) {
                                i ? s(i) : t1();
                            });
                        });
                    })) : Promise.resolve([]);
                }, _$r.run = function(t1) {
                    t1 && (this.onStart = t1), this.ag && this.resume();
                }, _$r._calculateDT = function(t1) {
                    if (this._g = t1, t1) return this.sg = performance.now(), this.frameTime / 1e3;
                    var i = performance.now();
                    return this.yg = i > this.sg ? (i - this.sg) / 1e3 : 0, this.yg > n.DEBUG_DT_THRESHOLD && (this.yg = this.frameTime / 1e3), this.sg = i, this.yg;
                }, _$r.Pg = function() {
                    var _$t = this;
                    if (this.ag) if (KN.instance && !KN.instance.isFinished) KN.instance.update(this._calculateDT(!1));
                    else if (this.mg) {
                        KN.releaseInstance(), this.mg = !1;
                        var i, _$n = ZN("launch", "launchScene");
                        _$n ? PN.loadScene(_$n, function() {
                            Q(1103, _$n), _$t.pg = performance.now(), PN.startAnimation(), null == _$t.onStart || _$t.onStart();
                        }) : (this.pg = performance.now(), PN.startAnimation(), null == (i = this.onStart) || i.call(this));
                    } else PN.tick(this._calculateDT(!1));
                }, _$r.Rg = function() {
                    var _$t, i = null != (_$t = ZN("screen", "frameRate")) ? _$t : 60;
                    $("number" == typeof i), this.gg = new JN, this.gg.onTick = this.Pg.bind(this), this.frameRate = i;
                }, _$r.Og = function() {
                    le.on("show", this.Dg, this), le.on("hide", this.Lg, this), le.on("close", this.Bg, this);
                }, _$r.Lg = function() {
                    this.emit(n.EVENT_HIDE), this.kg();
                }, _$r.Dg = function() {
                    this.emit(n.EVENT_SHOW), this.Ag();
                }, _$r.Bg = function() {
                    this.emit(n.EVENT_CLOSE), le.exit();
                }, _$r.addPersistRootNode = function(t1) {
                    PN.addPersistRootNode(t1);
                }, _$r.removePersistRootNode = function(t1) {
                    PN.removePersistRootNode(t1);
                }, _$r.isPersistRootNode = function(t1) {
                    return PN.isPersistRootNode(t1);
                }, _$r.Cg = function() {
                    var _$t = ZN("rendering", "customPipeline");
                    return this.Fg(!!_$t);
                }, _$r.Fg = function(t1) {
                    PN.root.setRenderPipeline(t1) ? (this.lg = !0, this.Eg(n.EVENT_RENDERER_INITED)) : rt(1222);
                }, _$r.Eg = function(t1) {
                    this.emit(t1);
                }, s(n, [
                    {
                        key: "inited",
                        get: function get() {
                            return this.ag;
                        }
                    },
                    {
                        key: "frameRate",
                        get: function get() {
                            return this.wg;
                        },
                        set: function set(t1) {
                            "number" != typeof t1 && Number.isNaN(t1 = parseInt(t1, 10)) && (t1 = 60), this.wg = t1, this.frameTime = 1e3 / t1, this.gg && (this.gg.targetFrameRate = this.wg);
                        }
                    },
                    {
                        key: "deltaTime",
                        get: function get() {
                            return this._g ? this.frameTime / 1e3 : this.yg;
                        }
                    },
                    {
                        key: "totalTime",
                        get: function get() {
                            return performance.now() - this.pg;
                        }
                    },
                    {
                        key: "frameStartTime",
                        get: function get() {
                            return this.sg;
                        }
                    }
                ]), n;
            }(se));
            tP.EVENT_HIDE = "game_on_hide", tP.EVENT_SHOW = "game_on_show", tP.EVENT_LOW_MEMORY = "game_on_low_memory", tP.EVENT_GAME_INITED = "game_inited", tP.EVENT_ENGINE_INITED = "engine_inited", tP.EVENT_RENDERER_INITED = "renderer_inited", tP.EVENT_PRE_BASE_INIT = "pre_base_init", tP.EVENT_POST_BASE_INIT = "post_base_init", tP.EVENT_PRE_INFRASTRUCTURE_INIT = "pre_infrastructure_init", tP.EVENT_POST_INFRASTRUCTURE_INIT = "post_infrastructure_init", tP.EVENT_PRE_SUBSYSTEM_INIT = "pre_subsystem_init", tP.EVENT_POST_SUBSYSTEM_INIT = "post_subsystem_init", tP.EVENT_PRE_PROJECT_INIT = "pre_project_init", tP.EVENT_POST_PROJECT_INIT = "post_project_init", tP.EVENT_RESTART = "game_on_restart", tP.EVENT_PAUSE = "game_on_pause", tP.EVENT_RESUME = "game_on_resume", tP.EVENT_CLOSE = "game_on_close", tP.RENDER_TYPE_CANVAS = 0, tP.RENDER_TYPE_WEBGL = 1, tP.RENDER_TYPE_OPENGL = 2, tP.RENDER_TYPE_HEADLESS = 3, tP.DEBUG_DT_THRESHOLD = 1, A.Game = tP;
            var iP = t1("dt", A.game = new tP), nP = t1("X", function(t1) {
                function i() {
                    var _$i;
                    return (_$i = t1.call(this) || this)._atlases = [], _$i._atlasIndex = -1, _$i.Ug = 5, _$i.xg = 2048, _$i.jg = 512, _$i.Gg = !0, _$i.fa = !1, _$i;
                }
                h(i, t1);
                var n = i.prototype;
                return n.newAtlas = function() {
                    var _$t = this._atlases[++this._atlasIndex];
                    return !_$t && this._atlasIndex < this.maxAtlasCount && (_$t = new Oy(this.xg, this.xg), this._atlases.push(_$t)), _$t;
                }, n.Hg = function() {
                    this.reset();
                }, n.init = function() {
                    this.enabled = !Ti.CLEANUP_IMAGE_CACHE;
                }, n.insertSpriteFrame = function(t1) {
                    if (!this.fa || this._atlasIndex >= this.Ug || !t1 || t1.original || !t1.packable) return null;
                    var _$i = t1.texture.getSamplerInfo();
                    if (2 !== _$i.minFilter || 2 !== _$i.magFilter || 0 !== _$i.mipFilter) return null;
                    var n = this._atlases[this._atlasIndex];
                    n || (n = this.newAtlas());
                    var _$s = n ? n.insertSpriteFrame(t1) : null;
                    return !_$s && this._atlasIndex < this.Ug ? (n = this.newAtlas()) ? n.insertSpriteFrame(t1) : null : _$s;
                }, n.reset = function() {
                    for(var _$t = 0, _$i = this._atlases.length; _$t < _$i; _$t++)this._atlases[_$t].destroy();
                    this._atlases.length = 0, this._atlasIndex = -1;
                }, n.deleteAtlasSpriteFrame = function(t1) {
                    if (t1.original) {
                        for(var _$i = this._atlases.length - 1; _$i >= 0; _$i--)this._atlases[_$i].removeSpriteFrame(t1);
                        var n = t1.original._texture;
                        this.deleteAtlasTexture(n);
                    }
                }, n.deleteAtlasTexture = function(t1) {
                    if (t1) for(var _$i = this._atlases.length - 1; _$i >= 0; _$i--)this._atlases[_$i].deleteInnerTexture(t1), this._atlases[_$i].isEmpty() && (this._atlases[_$i].destroy(), this._atlases.splice(_$i, 1), this._atlasIndex--);
                }, n.packToDynamicAtlas = function(t1, i) {
                    if (this.fa && i && !i.original && i.packable && i.texture && i.texture.width > 0 && i.texture.height > 0) {
                        var n = this.insertSpriteFrame(i);
                        n && i._setDynamicAtlasFrame(n);
                    }
                }, s(i, [
                    {
                        key: "enabled",
                        get: function get() {
                            return this.fa;
                        },
                        set: function set(t1) {
                            this.fa !== t1 && (t1 ? (this.reset(), PN.on("director_before_scene_launch", this.Hg, this)) : (this.reset(), PN.off("director_before_scene_launch", this.Hg, this)), this.fa = t1);
                        }
                    },
                    {
                        key: "maxAtlasCount",
                        get: function get() {
                            return this.Ug;
                        },
                        set: function set(t1) {
                            this.Ug = t1;
                        }
                    },
                    {
                        key: "atlasCount",
                        get: function get() {
                            return this._atlases.length;
                        }
                    },
                    {
                        key: "textureBleeding",
                        get: function get() {
                            return this.Gg;
                        },
                        set: function set(t1) {
                            this.Gg = t1;
                        }
                    },
                    {
                        key: "textureSize",
                        get: function get() {
                            return this.xg;
                        },
                        set: function set(t1) {
                            this.xg = t1;
                        }
                    },
                    {
                        key: "maxFrameSize",
                        get: function get() {
                            return this.jg;
                        },
                        set: function set(t1) {
                            this.jg = t1;
                        }
                    }
                ]), i;
            }(_v));
            nP.instance = void 0;
            var sP = t1("Y", nP.instance = new nP);
            PN.registerSystem("dynamicAtlasManager", sP, 0), A.internal.dynamicAtlasManager = sP;
            var rP = function() {
                function t1() {
                    this.Vg = [], this.Ur = 0;
                }
                var i = t1.prototype;
                return i.Wg = function(t1) {
                    if (0 !== t1) {
                        var i = this.Ur % t1;
                        if (0 !== i) {
                            var n = t1 - i;
                            this.Vg.push(n), this.Ur += n;
                        }
                    }
                }, i.zg = function(t1) {
                    var i = this.Ur;
                    return this.Vg.push(t1), this.Ur += t1.byteLength, i;
                }, i.$g = function() {
                    return this.Ur;
                }, i.Xg = function() {
                    var _$t = new Uint8Array(this.Ur), i = 0;
                    return this.Vg.forEach(function(n) {
                        "number" == typeof n ? i += n : (_$t.set(new Uint8Array(n), i), i += n.byteLength);
                    }), _$t.buffer;
                }, t1;
            }();
            function hP(t1, i) {
                return new eP(t1, i);
            }
            var eP = function() {
                function t1(t1, i) {
                    if (this.qg = [], this.Yg = t1, this.Yg.struct.morph) {
                        var n = this.Yg.struct.primitives.length;
                        this.qg = Array(n).fill(null);
                        for(var s = 0; s < n; ++s){
                            var _$r = this.Yg.struct.morph.subMeshMorphs[s];
                            _$r && (_$r.targets.length > 60 ? this.qg[s] = new oP(this.Yg, s, this.Yg.struct.morph, i) : this.qg[s] = new uP(this.Yg, s, this.Yg.struct.morph, i));
                        }
                    }
                }
                return t1.prototype.createInstance = function() {
                    for(var _$r, h, _$t = this, i = this.Yg.struct.primitives.length, n = Array(i), s = 0; s < i; ++s)n[s] = null != (_$r = null == (h = this.qg[s]) ? void 0 : h.createInstance()) ? _$r : null;
                    return {
                        setWeights: function setWeights(t1, i) {
                            var s;
                            null == (s = n[t1]) || s.setWeights(i);
                        },
                        requiredPatches: function requiredPatches(i) {
                            _$t.Yg.struct.morph;
                            var s = _$t.Yg.struct.morph.subMeshMorphs[i], _$r = n[i];
                            if (null === _$r) return null;
                            var h = [
                                {
                                    name: "CC_USE_MORPH",
                                    value: !0
                                },
                                {
                                    name: "CC_MORPH_TARGET_COUNT",
                                    value: s.targets.length
                                }
                            ];
                            return s.attributes.includes("a_position") && h.push({
                                name: "CC_MORPH_TARGET_HAS_POSITION",
                                value: !0
                            }), s.attributes.includes("a_normal") && h.push({
                                name: "CC_MORPH_TARGET_HAS_NORMAL",
                                value: !0
                            }), s.attributes.includes("a_tangent") && h.push({
                                name: "CC_MORPH_TARGET_HAS_TANGENT",
                                value: !0
                            }), h.push.apply(h, _$r.requiredPatches()), h;
                        },
                        adaptPipelineState: function adaptPipelineState(t1, i) {
                            var s;
                            null == (s = n[t1]) || s.adaptPipelineState(i);
                        },
                        destroy: function destroy() {
                            n.forEach(function(t1) {
                                t1 && t1.destroy();
                            });
                        }
                    };
                }, t1;
            }(), uP = function() {
                function t1(t1, i, n, s) {
                    this.Gs = s;
                    var _$r = n.subMeshMorphs[i];
                    this.Kg = _$r, vP(t1, i, s);
                    var h = t1.struct.vertexBundles[t1.struct.primitives[i].vertexBundelIndices[0]].view.count;
                    this.Jg = h;
                    var u = aP(s, h * _$r.targets.length);
                    this.Qg = {
                        width: u.width,
                        height: u.height
                    }, this.ts = _$r.attributes.map(function(i, n) {
                        var _$s = u.create(), e = _$s.valueView;
                        return _$r.targets.forEach(function(i, s) {
                            for(var _$r = i.displacements[n], u = new Float32Array(t1.data.buffer, t1.data.byteOffset + _$r.offset, _$r.count), o = h * s * 4, f = 0; f < h; ++f)e[o + 4 * f + 0] = u[3 * f + 0], e[o + 4 * f + 1] = u[3 * f + 1], e[o + 4 * f + 2] = u[3 * f + 2];
                        }), _$s.updatePixels(), {
                            name: i,
                            morphTexture: _$s
                        };
                    });
                }
                var i = t1.prototype;
                return i.destroy = function() {
                    this.ts.forEach(function(t1) {
                        t1.morphTexture.destroy();
                    });
                }, i.createInstance = function() {
                    var _$t = this, i = new cP(this.Gs, this.Kg.targets.length);
                    return i.setMorphTextureInfo(this.Qg.width, this.Qg.height), i.setVerticesCount(this.Jg), i.commit(), {
                        setWeights: function setWeights(t1) {
                            i.setWeights(t1), i.commit();
                        },
                        requiredPatches: function requiredPatches() {
                            return [
                                {
                                    name: "CC_MORPH_TARGET_USE_TEXTURE",
                                    value: !0
                                }
                            ];
                        },
                        adaptPipelineState: function adaptPipelineState(n) {
                            for(var s = 0; s < _$t.ts.length; ++s){
                                var _$r = _$t.ts[s], h = void 0;
                                switch(_$r.name){
                                    case "a_position":
                                        h = 8;
                                        break;
                                    case "a_normal":
                                        h = 9;
                                        break;
                                    case "a_tangent":
                                        h = 10;
                                        break;
                                    default:
                                        nt(16374);
                                }
                                void 0 !== h && (n.bindSampler(h, _$r.morphTexture.sampler), n.bindTexture(h, _$r.morphTexture.texture));
                            }
                            n.bindBuffer(o_.BINDING, i.buffer), n.update();
                        },
                        destroy: function destroy() {}
                    };
                }, t1;
            }(), oP = function() {
                function t1(t1, i, n, s) {
                    this.ts = [], this.Gs = s;
                    var _$r = n.subMeshMorphs[i];
                    vP(t1, i, s), this.ts = _$r.attributes.map(function(i, n) {
                        return {
                            name: i,
                            targets: _$r.targets.map(function(i) {
                                return {
                                    displacements: new Float32Array(t1.data.buffer, t1.data.byteOffset + i.displacements[n].offset, i.displacements[n].count)
                                };
                            })
                        };
                    });
                }
                return t1.prototype.createInstance = function() {
                    return new fP(this, this.ts[0].targets[0].displacements.length / 3, this.Gs);
                }, s(t1, [
                    {
                        key: "data",
                        get: function get() {
                            return this.ts;
                        }
                    }
                ]), t1;
            }(), fP = function() {
                function t1(t1, i, n) {
                    this.Qe = t1, this.Zg = new cP(n, 0);
                    var s = aP(n, i);
                    this.Zg.setMorphTextureInfo(s.width, s.height), this.Zg.commit(), this.ts = this.Qe.data.map(function(t1) {
                        var _$i = s.create();
                        return {
                            attributeName: t1.name,
                            morphTexture: _$i
                        };
                    });
                }
                var i = t1.prototype;
                return i.setWeights = function(t1) {
                    for(var i = 0; i < this.ts.length; ++i){
                        var n = this.ts[i], s = n.morphTexture.valueView, _$r = this.Qe.data[i];
                        t1.length, _$r.targets.length;
                        for(var h = 0; h < _$r.targets.length; ++h){
                            var e = _$r.targets[h].displacements, u = t1[h], o = e.length / 3;
                            if (0 === h) for(var f = 0; f < o; ++f)s[4 * f + 0] = e[3 * f + 0] * u, s[4 * f + 1] = e[3 * f + 1] * u, s[4 * f + 2] = e[3 * f + 2] * u;
                            else if (0 !== u) for(var _$c = 0; _$c < o; ++_$c)s[4 * _$c + 0] += e[3 * _$c + 0] * u, s[4 * _$c + 1] += e[3 * _$c + 1] * u, s[4 * _$c + 2] += e[3 * _$c + 2] * u;
                        }
                        n.morphTexture.updatePixels();
                    }
                }, i.requiredPatches = function() {
                    return [
                        {
                            name: "CC_MORPH_TARGET_USE_TEXTURE",
                            value: !0
                        },
                        {
                            name: "CC_MORPH_PRECOMPUTED",
                            value: !0
                        }
                    ];
                }, i.adaptPipelineState = function(t1) {
                    for(var i = 0; i < this.ts.length; ++i){
                        var n = this.ts[i], s = void 0;
                        switch(n.attributeName){
                            case "a_position":
                                s = 8;
                                break;
                            case "a_normal":
                                s = 9;
                                break;
                            case "a_tangent":
                                s = 10;
                                break;
                            default:
                                nt(16374);
                        }
                        void 0 !== s && (t1.bindSampler(s, n.morphTexture.sampler), t1.bindTexture(s, n.morphTexture.texture));
                    }
                    t1.bindBuffer(o_.BINDING, this.Zg.buffer), t1.update();
                }, i.destroy = function() {
                    this.Zg.destroy();
                    for(var _$t = 0; _$t < this.ts.length; ++_$t)this.ts[_$t].morphTexture.destroy();
                }, t1;
            }(), cP = function() {
                function t1(t1, i) {
                    this.tp = i, this.ip = new DataView(new ArrayBuffer(256)), this.np = t1.createBuffer(new Wl(18, 3, 256, 256));
                }
                var i = t1.prototype;
                return i.destroy = function() {
                    this.np.destroy();
                }, i.setWeights = function(t1) {
                    t1.length, this.tp;
                    for(var i = A.sys.isLittleEndian, n = 0; n < t1.length; ++n)this.ip.setFloat32(0 + 4 * n, t1[n], i);
                }, i.setMorphTextureInfo = function(t1, i) {
                    var n = A.sys.isLittleEndian;
                    this.ip.setFloat32(240, t1, n), this.ip.setFloat32(244, i, n);
                }, i.setVerticesCount = function(t1) {
                    var i = A.sys.isLittleEndian;
                    this.ip.setFloat32(248, t1, i);
                }, i.commit = function() {
                    this.np.update(this.ip.buffer);
                }, s(t1, [
                    {
                        key: "buffer",
                        get: function get() {
                            return this.np;
                        }
                    }
                ]), t1;
            }();
            function aP(t1, i) {
                2 & t1.getFormatFeatures(44) ? (n = i, _$r = 16, s = 44, h = Float32Array) : (n = 4 * i, _$r = 4, s = 35, h = Uint8Array);
                var n, s, _$r, h, e = lP(n), u = e.width, o = e.height;
                return {
                    width: u,
                    height: o,
                    create: function create() {
                        var _$i = new ArrayBuffer(u * o * _$r), n = new Float32Array(_$i), e = h === Float32Array ? n : new h(_$i), f = new mg({
                            width: u,
                            height: o,
                            _data: e,
                            _compressed: !1,
                            format: s
                        }), _$c = new ay;
                        _$c.setFilters(1, 1), _$c.setMipFilter(0), _$c.setWrapMode(2, 2, 2), _$c.image = f, _$c.getGFXTexture() || nt(16375);
                        var a = t1.getSampler(_$c.getSamplerInfo());
                        return {
                            get texture () {
                                return _$c.getGFXTexture();
                            },
                            get sampler () {
                                return a;
                            },
                            get valueView () {
                                return n;
                            },
                            destroy: function destroy() {
                                _$c.destroy();
                            },
                            updatePixels: function updatePixels() {
                                _$c.uploadData(e);
                            }
                        };
                    }
                };
            }
            function vP(t1, i, n) {
                t1.renderingSubMeshes[i].enableVertexIdChannel(n);
            }
            function lP(t1) {
                t1 < 5 && (t1 = 5);
                var i = I(Kn(t1)), n = i >> 1;
                return {
                    width: 1 << (1 & i ? n + 1 : n),
                    height: 1 << n
                };
            }
            function dP(t1, n) {
                var s;
                return (s = t1, new Promise(function(t1, n) {
                    try {
                        s = new URL(s, i.meta.url).href, fetch(s).then(function(i) {
                            return i.arrayBuffer().then(t1);
                        }).catch(function() {});
                    } catch (t1) {
                        n(t1);
                    }
                })).then(function(t1) {
                    return WebAssembly.instantiate(t1, n);
                });
            }
            var wP = {}, gP = {};
            (function() {
                function t1(t1) {
                    throw t1;
                }
                var i = void 0, n = this;
                function s(t1, s) {
                    var _$r, _$h = t1.split("."), _$e = n;
                    for((_$h[0] in _$e) || !_$e.execScript || _$e.execScript("var " + _$h[0]); _$h.length && (_$r = _$h.shift());)_$h.length || s === i ? _$e = _$e[_$r] ? _$e[_$r] : _$e[_$r] = {} : _$e[_$r] = s;
                }
                var _$r = "u" > typeof Uint8Array && "u" > typeof Uint16Array && "u" > typeof Uint32Array && "u" > typeof DataView;
                function h(t1) {
                    var i, n, _$s, _$h, _$e, u, o, f, _$c, a, v = t1.length, l = 0, _$d = 1 / 0;
                    for(f = 0; f < v; ++f)t1[f] > l && (l = t1[f]), t1[f] < _$d && (_$d = t1[f]);
                    for(n = new (_$r ? Uint32Array : Array)(i = 1 << l), _$s = 1, _$h = 0, _$e = 2; _$s <= l;){
                        for(f = 0; f < v; ++f)if (t1[f] === _$s) {
                            for(u = 0, o = _$h, _$c = 0; _$c < _$s; ++_$c)u = u << 1 | 1 & o, o >>= 1;
                            for(a = _$s << 16 | f, _$c = u; _$c < i; _$c += _$e)n[_$c] = a;
                            ++_$h;
                        }
                        ++_$s, _$h <<= 1, _$e <<= 1;
                    }
                    return [
                        n,
                        l,
                        _$d
                    ];
                }
                function e(i, n) {
                    switch(this.g = [], this.h = 32768, this.d = this.f = this.a = this.j = 0, this.input = _$r ? new Uint8Array(i) : i, this.k = !1, this.e = o, this.o = !1, !n && (n = {}) || (n.index && (this.a = n.index), n.bufferSize && (this.h = n.bufferSize), n.bufferType && (this.e = n.bufferType), n.resize && (this.o = n.resize)), this.e){
                        case u:
                            this.b = 32768, this.c = new (_$r ? Uint8Array : Array)(32768 + this.h + 258);
                            break;
                        case o:
                            this.b = 0, this.c = new (_$r ? Uint8Array : Array)(this.h);
                            break;
                        default:
                            t1(Error("invalid inflate mode"));
                    }
                }
                var u = 0, o = 1;
                e.prototype.i = function() {
                    for(; !this.k;){
                        var n = I(this, 3);
                        switch(1 & n && (this.k = !0), n >>>= 1){
                            case 0:
                                var _$s = this.input, _$e = this.a, f = this.c, _$c = this.b, a = _$s.length, v = i, _$d = f.length, w = i;
                                switch(this.d = this.f = 0, _$e + 1 >= a && t1(Error("invalid uncompressed block header: LEN")), v = _$s[_$e++] | _$s[_$e++] << 8, _$e + 1 >= a && t1(Error("invalid uncompressed block header: NLEN")), v === ~(_$s[_$e++] | _$s[_$e++] << 8) && t1(Error("invalid uncompressed block header: length verify")), _$e + v > _$s.length && t1(Error("input buffer is broken")), this.e){
                                    case u:
                                        for(; _$c + v > f.length;){
                                            if (v -= w = _$d - _$c, _$r) f.set(_$s.subarray(_$e, _$e + w), _$c), _$c += w, _$e += w;
                                            else for(; w--;)f[_$c++] = _$s[_$e++];
                                            this.b = _$c, f = N(this), _$c = this.b;
                                        }
                                        break;
                                    case o:
                                        for(; _$c + v > f.length;)f = P(this, {
                                            m: 2
                                        });
                                        break;
                                    default:
                                        t1(Error("invalid inflate mode"));
                                }
                                if (_$r) f.set(_$s.subarray(_$e, _$e + v), _$c), _$c += v, _$e += v;
                                else for(; v--;)f[_$c++] = _$s[_$e++];
                                this.a = _$e, this.b = _$c, this.c = f;
                                break;
                            case 1:
                                switch(this.e){
                                    case o:
                                        C(this, T, _$O);
                                        break;
                                    case u:
                                        M(this, T, _$O);
                                        break;
                                    default:
                                        t1(Error("invalid inflate mode"));
                                }
                                break;
                            case 2:
                                var g, p, _$y, _$_, m = I(this, 5) + 257, b = I(this, 5) + 1, k = I(this, 4) + 4, A = new (_$r ? Uint8Array : Array)(l.length), E = i, S = i, _$D = i, L = i, B = i;
                                for(B = 0; B < k; ++B)A[l[B]] = I(this, 3);
                                if (!_$r) for(B = k, k = A.length; B < k; ++B)A[l[B]] = 0;
                                for(g = h(A), E = new (_$r ? Uint8Array : Array)(m + b), B = 0, _$_ = m + b; B < _$_;)switch(S = R(this, g)){
                                    case 16:
                                        for(L = 3 + I(this, 2); L--;)E[B++] = _$D;
                                        break;
                                    case 17:
                                        for(L = 3 + I(this, 3); L--;)E[B++] = 0;
                                        _$D = 0;
                                        break;
                                    case 18:
                                        for(L = 11 + I(this, 7); L--;)E[B++] = 0;
                                        _$D = 0;
                                        break;
                                    default:
                                        _$D = E[B++] = S;
                                }
                                switch(p = h(_$r ? E.subarray(0, m) : E.slice(0, m)), _$y = h(_$r ? E.subarray(m) : E.slice(m)), this.e){
                                    case o:
                                        C(this, p, _$y);
                                        break;
                                    case u:
                                        M(this, p, _$y);
                                        break;
                                    default:
                                        t1(Error("invalid inflate mode"));
                                }
                                break;
                            default:
                                t1(Error("unknown BTYPE: " + n));
                        }
                    }
                    switch(this.e){
                        case u:
                            var F, U, x, j, G, H, _$V = 0, _$W = this.c, _$z = this.g, _$$ = new (_$r ? Uint8Array : Array)(this.j + (this.b - 32768));
                            if (0 === _$z.length) F = _$r ? this.c.subarray(32768, this.b) : this.c.slice(32768, this.b);
                            else {
                                for(x = 0, j = _$z.length; x < j; ++x)for(G = 0, H = (U = _$z[x]).length; G < H; ++G)_$$[_$V++] = U[G];
                                for(x = 32768, j = this.b; x < j; ++x)_$$[_$V++] = _$W[x];
                                this.g = [], F = this.buffer = _$$;
                            }
                            return F;
                        case o:
                            var _$X, _$q = this.b;
                            return _$r ? this.o ? (_$X = new Uint8Array(_$q)).set(this.c.subarray(0, _$q)) : _$X = this.c.subarray(0, _$q) : (this.c.length > _$q && (this.c.length = _$q), _$X = this.c), this.buffer = _$X;
                        default:
                            t1(Error("invalid inflate mode"));
                    }
                };
                var _$c, a, v = [
                    16,
                    17,
                    18,
                    0,
                    8,
                    7,
                    9,
                    6,
                    10,
                    5,
                    11,
                    4,
                    12,
                    3,
                    13,
                    2,
                    14,
                    1,
                    15
                ], l = _$r ? new Uint16Array(v) : v, _$d = [
                    3,
                    4,
                    5,
                    6,
                    7,
                    8,
                    9,
                    10,
                    11,
                    13,
                    15,
                    17,
                    19,
                    23,
                    27,
                    31,
                    35,
                    43,
                    51,
                    59,
                    67,
                    83,
                    99,
                    115,
                    131,
                    163,
                    195,
                    227,
                    258,
                    258,
                    258
                ], w = _$r ? new Uint16Array(_$d) : _$d, g = [
                    0,
                    0,
                    0,
                    0,
                    0,
                    0,
                    0,
                    0,
                    1,
                    1,
                    1,
                    1,
                    2,
                    2,
                    2,
                    2,
                    3,
                    3,
                    3,
                    3,
                    4,
                    4,
                    4,
                    4,
                    5,
                    5,
                    5,
                    5,
                    0,
                    0,
                    0
                ], p = _$r ? new Uint8Array(g) : g, _$y = [
                    1,
                    2,
                    3,
                    4,
                    5,
                    7,
                    9,
                    13,
                    17,
                    25,
                    33,
                    49,
                    65,
                    97,
                    129,
                    193,
                    257,
                    385,
                    513,
                    769,
                    1025,
                    1537,
                    2049,
                    3073,
                    4097,
                    6145,
                    8193,
                    12289,
                    16385,
                    24577
                ], _$_ = _$r ? new Uint16Array(_$y) : _$y, m = [
                    0,
                    0,
                    0,
                    0,
                    1,
                    1,
                    2,
                    2,
                    3,
                    3,
                    4,
                    4,
                    5,
                    5,
                    6,
                    6,
                    7,
                    7,
                    8,
                    8,
                    9,
                    9,
                    10,
                    10,
                    11,
                    11,
                    12,
                    12,
                    13,
                    13
                ], b = _$r ? new Uint8Array(m) : m, k = new (_$r ? Uint8Array : Array)(288);
                for(_$c = 0, a = k.length; _$c < a; ++_$c)k[_$c] = 143 >= _$c ? 8 : 255 >= _$c ? 9 : 279 >= _$c ? 7 : 8;
                var A, E, T = h(k), S = new (_$r ? Uint8Array : Array)(30);
                for(A = 0, E = S.length; A < E; ++A)S[A] = 5;
                var _$O = h(S);
                function I(i, n) {
                    var _$s, _$r = i.f, _$h = i.d, _$e = i.input, u = i.a;
                    for(u + (n - _$h + 7 >> 3) >= _$e.length && t1(Error("input buffer is broken")); _$h < n;)_$r |= _$e[u++] << _$h, _$h += 8;
                    return _$s = _$r & (1 << n) - 1, i.f = _$r >>> n, i.d = _$h - n, i.a = u, _$s;
                }
                function R(i, n) {
                    for(var _$s, _$r, _$h = i.f, _$e = i.d, u = i.input, o = i.a, f = u.length, _$c = n[0], a = n[1]; _$e < a && !(o >= f);)_$h |= u[o++] << _$e, _$e += 8;
                    return (_$r = (_$s = _$c[_$h & (1 << a) - 1]) >>> 16) > _$e && t1(Error("invalid code length: " + _$r)), i.f = _$h >> _$r, i.d = _$e - _$r, i.a = o, 65535 & _$s;
                }
                function M(t1, i, n) {
                    var _$s = t1.c, _$r = t1.b;
                    t1.l = i;
                    for(var _$h, _$e, u, o, f = _$s.length - 258; 256 !== (_$h = R(t1, i));)if (256 > _$h) _$r >= f && (t1.b = _$r, _$s = N(t1), _$r = t1.b), _$s[_$r++] = _$h;
                    else for(o = w[_$e = _$h - 257], 0 < p[_$e] && (o += I(t1, p[_$e])), u = _$_[_$h = R(t1, n)], 0 < b[_$h] && (u += I(t1, b[_$h])), _$r >= f && (t1.b = _$r, _$s = N(t1), _$r = t1.b); o--;)_$s[_$r] = _$s[_$r++ - u];
                    for(; 8 <= t1.d;)t1.d -= 8, t1.a--;
                    t1.b = _$r;
                }
                function C(t1, i, n) {
                    var _$s = t1.c, _$r = t1.b;
                    t1.l = i;
                    for(var _$h, _$e, u, o, f = _$s.length; 256 !== (_$h = R(t1, i));)if (256 > _$h) _$r >= f && (f = (_$s = P(t1)).length), _$s[_$r++] = _$h;
                    else for(o = w[_$e = _$h - 257], 0 < p[_$e] && (o += I(t1, p[_$e])), u = _$_[_$h = R(t1, n)], 0 < b[_$h] && (u += I(t1, b[_$h])), _$r + o > f && (f = (_$s = P(t1)).length); o--;)_$s[_$r] = _$s[_$r++ - u];
                    for(; 8 <= t1.d;)t1.d -= 8, t1.a--;
                    t1.b = _$r;
                }
                function N(t1) {
                    var i, n, _$s = new (_$r ? Uint8Array : Array)(t1.b - 32768), _$h = t1.b - 32768, _$e = t1.c;
                    if (_$r) _$s.set(_$e.subarray(32768, _$s.length));
                    else for(i = 0, n = _$s.length; i < n; ++i)_$s[i] = _$e[i + 32768];
                    if (t1.g.push(_$s), t1.j += _$s.length, _$r) _$e.set(_$e.subarray(_$h, _$h + 32768));
                    else for(i = 0; 32768 > i; ++i)_$e[i] = _$e[_$h + i];
                    return t1.b = 32768, _$e;
                }
                function P(t1, i) {
                    var n, _$s, _$h, _$e = t1.input.length / t1.a + 1 | 0, u = t1.input, o = t1.c;
                    return i && ("number" == typeof i.m && (_$e = i.m), "number" == typeof i.r && (_$e += i.r)), _$s = 2 > _$e ? (_$h = (u.length - t1.a) / t1.l[2] / 2 * 258 | 0) < o.length ? o.length + _$h : o.length << 1 : o.length * _$e, _$r ? (n = new Uint8Array(_$s)).set(o) : n = o, t1.c = n, t1.c;
                }
                function D(i, n) {
                    var _$s, _$r;
                    this.input = i, this.a = 0, !n && (n = {}) || (n.index && (this.a = n.index), n.verify && (this.s = n.verify)), _$s = i[this.a++], _$r = i[this.a++], (15 & _$s) === L ? this.method = L : t1(Error("unsupported compression method")), 0 != ((_$s << 8) + _$r) % 31 && t1(Error("invalid fcheck flag:" + ((_$s << 8) + _$r) % 31)), 32 & _$r && t1(Error("fdict flag is not supported")), this.n = new e(i, {
                        index: this.a,
                        bufferSize: n.bufferSize,
                        bufferType: n.bufferType,
                        resize: n.resize
                    });
                }
                D.prototype.i = function() {
                    var i, n, _$s = this.input;
                    if (i = this.n.i(), this.a = this.n.a, this.s) {
                        n = (_$s[this.a++] << 24 | _$s[this.a++] << 16 | _$s[this.a++] << 8 | _$s[this.a++]) >>> 0;
                        var _$r = i;
                        if ("string" == typeof _$r) {
                            var _$h, _$e, u = _$r.split("");
                            for(_$h = 0, _$e = u.length; _$h < _$e; _$h++)u[_$h] = (255 & u[_$h].charCodeAt(0)) >>> 0;
                            _$r = u;
                        }
                        for(var o, f = 1, _$c = 0, a = _$r.length, v = 0; 0 < a;){
                            a -= o = 1024 < a ? 1024 : a;
                            do _$c += f += _$r[v++];
                            while (--o);
                            f %= 65521, _$c %= 65521;
                        }
                        n !== (_$c << 16 | f) >>> 0 && t1(Error("invalid adler-32 checksum"));
                    }
                    return i;
                };
                var L = 8;
                s("Zlib.Inflate", D), s("Zlib.Inflate.prototype.decompress", D.prototype.i);
                var B, F, U, x, j = {
                    ADAPTIVE: 1,
                    BLOCK: 0
                };
                if (Object.keys) B = Object.keys(j);
                else for(F in B = [], U = 0, j)B[U++] = F;
                for(U = 0, x = B.length; U < x; ++U)s("Zlib.Inflate.BufferType." + (F = B[U]), j[F]);
            }).call(gP);
            var yP, _P, mP, bP, kP = gP.Zlib;
            kP.Inflate = kP.Inflate, kP.Inflate.BufferType = kP.Inflate.BufferType, kP.Inflate.prototype.decompress = kP.Inflate.prototype.decompress;
            var AP = Ss.add, EP = Ss.multiplyScalar, TP = Ss.subtract, SP = Ie.transform, OP = Ie.fromPoints, IP = Ss.max, RP = Ss.min, MP = Ss.transformQuat, CP = Ss.transformMat4;
            function NP(t1) {
                switch(t1){
                    case 1:
                    default:
                        return Uint8Array;
                    case 2:
                        return Uint16Array;
                    case 4:
                        return Uint32Array;
                }
            }
            var PP = new Ss, DP = new Ss, LP = new Uint8Array, BP = go("cc.Mesh")((_P = ho((yP = function(t1) {
                function i(i) {
                    var n;
                    return (n = t1.call(this, i) || this).morphRendering = null, n._struct = _P && _P(), n._hash = mP && mP(), n.L = LP, n.sp = !1, n._allowDataAccess = bP && bP(), n.rp = !1, n.hp = null, n.ep = new Map, n.fp = null, n;
                }
                h(i, t1);
                var n = i.prototype;
                return n.onLoaded = function() {
                    this.initialize();
                }, n.initialize = function() {
                    if (!this.sp) {
                        this.sp = !0;
                        var H, _$V, _$t = {
                            struct: this.struct,
                            data: this.data
                        };
                        if (_$t.struct.compressed && (H = _$t, _$V = new kP.Inflate(H.data).decompress(), H.data = _$V, H.struct.compressed = !1, _$t = H), this.struct.encoded && (_$t = HP(_$t)), !this.struct.quantized || 16 & kw.gfxDevice.getFormatFeatures(29) || (_$t = VP(_$t)), this._struct = _$t.struct, this.L = _$t.data, this._struct.dynamic) {
                            for(var _$i = kw.gfxDevice, n = [], _$s = [], _$r = 0; _$r < this._struct.vertexBundles.length; _$r++){
                                var _$h = this._struct.vertexBundles[_$r], e = _$i.createBuffer(new Wl(10, 1, _$h.view.length, _$h.view.stride));
                                n.push(e);
                            }
                            for(var u = 0; u < this._struct.primitives.length; u++){
                                var o = this._struct.primitives[u], f = o.indexView, _$c = null;
                                f && (_$c = _$i.createBuffer(new Wl(6, 1, f.length, f.stride)));
                                for(var a = [], v = 0; v < o.vertexBundelIndices.length; v++){
                                    var l = o.vertexBundelIndices[v];
                                    a.push(n[l]);
                                }
                                for(var _$d = [], w = 0; w < o.vertexBundelIndices.length; w++)for(var g = o.vertexBundelIndices[w], p = this._struct.vertexBundles[g].attributes, _$y = 0; _$y < p.length; _$y++){
                                    var _$_ = p[_$y], m = new ud;
                                    m.copy(_$_), _$d.push(m);
                                }
                                var b = new UA(a, _$d, o.primitiveMode, _$c);
                                b.drawInfo = new $l, b.mesh = this, b.subMeshIdx = u, _$s.push(b);
                            }
                            this.hp = _$s;
                        } else {
                            for(var k = this.L.buffer, A = kw.gfxDevice, E = this.cp(A, k), T = [], S = [], _$O = 0; _$O < this._struct.primitives.length; _$O++){
                                var _$I = this._struct.primitives[_$O];
                                if (0 !== _$I.vertexBundelIndices.length) {
                                    var _$R = null, _$M = void 0;
                                    if (_$I.indexView) {
                                        var _$C = _$I.indexView, N = _$C.stride, P = _$C.length;
                                        if (4 === N && !A.hasFeature(0)) {
                                            var D = this._struct.vertexBundles[_$I.vertexBundelIndices[0]].view.count;
                                            if (D >= 65536) {
                                                nt(10001, D, 65536);
                                                continue;
                                            }
                                            N >>= 1, P >>= 1;
                                        }
                                        _$R = A.createBuffer(new Wl(4, 1, P, N)), T.push(_$R), _$M = new (NP(_$C.stride))(k, _$C.offset, _$C.count), _$C.stride !== N && (_$M = NP(N).from(_$M)), _$R.update(_$M);
                                    }
                                    var L = _$I.vertexBundelIndices.map(function(t1) {
                                        return E[t1];
                                    }), B = [];
                                    if (_$I.vertexBundelIndices.length > 0) for(var F = _$I.vertexBundelIndices[0], U = this._struct.vertexBundles[F].attributes, x = 0; x < U.length; ++x){
                                        var j = U[x];
                                        B[x] = new ud(j.name, j.format, j.isNormalized, j.stream, j.isInstanced, j.location);
                                    }
                                    var G = new UA(L, B, _$I.primitiveMode, _$R);
                                    G.mesh = this, G.subMeshIdx = _$O, S.push(G);
                                }
                            }
                            this.hp = S, this._struct.morph && (this.morphRendering = hP(this, A)), this.rp = !0, this._allowDataAccess || this.vp();
                        }
                    }
                }, n.updateSubMesh = function(t1, i) {
                    if (this._struct.dynamic) if (t1 >= this._struct.primitives.length) nt(14201);
                    else {
                        var n = [];
                        if (i.positions.length > 0 && n.push(i.positions), i.normals && i.normals.length > 0 && n.push(i.normals), i.uvs && i.uvs.length > 0 && n.push(i.uvs), i.tangents && i.tangents.length > 0 && n.push(i.tangents), i.colors && i.colors.length > 0 && n.push(i.colors), i.customAttributes) for(var _$s = 0; _$s < i.customAttributes.length; _$s++)n.push(i.customAttributes[_$s].values);
                        for(var _$r = this._struct.dynamic, _$h = _$r.info, e = this._struct.primitives[t1], u = this.hp[t1], o = u.drawInfo, f = 0; f < n.length; f++){
                            var _$c = n[f], a = this._struct.vertexBundles[e.vertexBundelIndices[f]], v = a.view.stride, l = _$c.byteLength / v, _$d = _$c.byteLength, w = new Uint8Array(this.L.buffer, a.view.offset, _$d), g = new Uint8Array(_$c.buffer, _$c.byteOffset, _$d), p = u.vertexBuffers[f];
                            _$h.maxSubMeshVertices, _$d > 0 && (w.set(g), p.update(g, _$d)), a.view.count = l, o.vertexCount = l;
                        }
                        if (e.indexView) {
                            var _$y = e.indexView, _$_ = _$y.stride, m = 2 === _$_ ? i.indices16.length : i.indices32.length, b = m * _$_, k = new Uint8Array(this.L.buffer, _$y.offset, b), A = 2 === _$_ ? new Uint8Array(i.indices16.buffer, i.indices16.byteOffset, b) : new Uint8Array(i.indices32.buffer, i.indices32.byteOffset, b), E = u.indexBuffer;
                            _$h.maxSubMeshIndices, b > 0 && (k.set(A), E.update(A, b)), _$y.count = m, o.indexCount = m;
                        }
                        if (i.minPos && i.maxPos) {
                            var T = Os(i.minPos.x, i.minPos.y, i.minPos.z), S = Os(i.maxPos.x, i.maxPos.y, i.maxPos.z);
                            _$r.bounds[t1] || (_$r.bounds[t1] = new Ie), OP(_$r.bounds[t1], T, S);
                            var _$O = Os(), _$I = Os();
                            _$r.bounds.forEach(function(t1) {
                                t1 && (t1.getBoundary(_$O, _$I), RP(T, _$O, T), IP(S, _$I, S));
                            }), this._struct.minPosition = Os(T.x, T.y, T.z), this._struct.maxPosition = Os(S.x, S.y, S.z);
                        }
                        u.invalidateGeometricInfo();
                    }
                    else nt(14200);
                }, n.destroy = function() {
                    return this.destroyRenderingMesh(), t1.prototype.destroy.call(this);
                }, n.destroyRenderingMesh = function() {
                    if (this.hp) {
                        for(var _$t = 0; _$t < this.hp.length; _$t++)this.hp[_$t].destroy();
                        this.hp = null, this.sp = !1, this.rp = !1;
                    }
                }, n.assign = function(t1, i) {
                    this.reset({
                        struct: t1,
                        data: i
                    });
                }, n.reset = function(t1) {
                    this.destroyRenderingMesh(), this._struct = t1.struct, this.L = t1.data, this._hash = 0;
                }, n.getBoneSpaceBounds = function(t1) {
                    if (this.ep.has(t1.hash)) return this.ep.get(t1.hash);
                    var _$i = [];
                    this.ep.set(t1.hash, _$i);
                    for(var n = [], _$s = t1.bindposes, _$r = 0; _$r < _$s.length; _$r++)_$i.push(new Ie(1 / 0, 1 / 0, 1 / 0, -1 / 0, -1 / 0, -1 / 0)), n.push(!1);
                    for(var _$h = this._struct.primitives, e = 0; e < _$h.length; e++){
                        var u = this.readAttribute(e, "a_joints"), o = this.readAttribute(e, "a_weights"), f = this.readAttribute(e, "a_position");
                        if (u && o && f) for(var _$c = Math.min(u.length / 4, o.length / 4, f.length / 3), a = 0; a < _$c; a++){
                            Ss.set(PP, f[3 * a + 0], f[3 * a + 1], f[3 * a + 2]);
                            for(var v = 0; v < 4; ++v){
                                var l = 4 * a + v, _$d = u[l];
                                if (!(0 === o[l] || _$d >= _$s.length)) {
                                    CP(DP, PP, _$s[_$d]), n[_$d] = !0;
                                    var w = _$i[_$d];
                                    RP(w.center, w.center, DP), IP(w.halfExtents, w.halfExtents, DP);
                                }
                            }
                        }
                    }
                    for(var g = 0; g < _$s.length; g++){
                        var p = _$i[g];
                        n[g] ? OP(p, p.center, p.halfExtents) : _$i[g] = null;
                    }
                    return _$i;
                }, n.merge = function(t1, i, n) {
                    if (n && !this.validateMergingMesh(t1)) return !1;
                    var _$s = new Ss, _$r = i && new qs, _$h = i && new Ie;
                    if (_$r && i.getRotation(_$r), !this.sp) {
                        var e = JSON.parse(JSON.stringify(t1._struct)), u = t1.L.slice();
                        if (i) {
                            e.maxPosition && e.minPosition && (AP(_$h.center, e.maxPosition, e.minPosition), EP(_$h.center, _$h.center, .5), TP(_$h.halfExtents, e.maxPosition, e.minPosition), EP(_$h.halfExtents, _$h.halfExtents, .5), SP(_$h, _$h, i), AP(e.maxPosition, _$h.center, _$h.halfExtents), TP(e.minPosition, _$h.center, _$h.halfExtents));
                            for(var o = 0; o < e.vertexBundles.length; o++)for(var f = e.vertexBundles[o], _$c = 0; _$c < f.attributes.length; _$c++)if ("a_position" === f.attributes[_$c].name || "a_normal" === f.attributes[_$c].name) {
                                var a = f.attributes[_$c].format, v = new DataView(u.buffer, f.view.offset + FP(f.attributes, _$c)), l = jP(v, a), w = GP(v, a);
                                if (!l || !w) continue;
                                for(var g = f.view.count, p = f.view.stride, _$y = xP(a), _$_ = 0; _$_ < g; _$_++){
                                    var m = _$_ * p, b = m + _$y, k = b + _$y;
                                    switch(_$s.set(l(m), l(b), l(k)), f.attributes[_$c].name){
                                        case "a_position":
                                            _$s.transformMat4(i);
                                            break;
                                        case "a_normal":
                                            MP(_$s, _$s, _$r);
                                    }
                                    w(m, _$s.x), w(b, _$s.y), w(k, _$s.z);
                                }
                            }
                        }
                        return this.reset({
                            struct: e,
                            data: u
                        }), this.initialize(), !0;
                    }
                    for(var A, E, T, S, _$O, _$I = new rP, _$R = 0, _$M = 0, _$C = 0, N = 0, P = 0, D = 0, L = 0, B = 0, F = !1, U = Array(this._struct.vertexBundles.length), x = 0; x < this._struct.vertexBundles.length; ++x){
                        var j = this._struct.vertexBundles[x], G = t1._struct.vertexBundles[x];
                        _$C = j.view.offset, N = G.view.offset, _$M = j.view.stride, E = new Uint8Array(A = new ArrayBuffer((_$R = j.view.count + G.view.count) * _$M)), _$C += (T = this.L.subarray(_$C, _$C + j.view.length)).length, N += (S = t1.L.subarray(N, N + G.view.length)).length, E.set(T), P = 0;
                        for(var H, _$V = d(j.attributes); !(H = _$V()).done;){
                            var _$W = H.value;
                            L = 0, F = !1;
                            for(var _$z, _$$ = d(G.attributes); !(_$z = _$$()).done;){
                                var _$X = _$z.value;
                                if (_$W.name === _$X.name && _$W.format === _$X.format) {
                                    F = !0;
                                    break;
                                }
                                L += Fd[_$X.format].size;
                            }
                            if (F) {
                                B = Fd[_$W.format].size, D = j.view.length + P;
                                for(var _$q = 0; _$q < G.view.count; ++_$q){
                                    if (_$O = S.subarray(L, L + B), E.set(_$O, D), ("a_position" === _$W.name || "a_normal" === _$W.name) && i) {
                                        var _$Y = new Float32Array(E.buffer, D, 3);
                                        switch(_$s.set(_$Y[0], _$Y[1], _$Y[2]), _$W.name){
                                            case "a_position":
                                                _$s.transformMat4(i);
                                                break;
                                            case "a_normal":
                                                MP(_$s, _$s, _$r);
                                        }
                                        _$Y[0] = _$s.x, _$Y[1] = _$s.y, _$Y[2] = _$s.z;
                                    }
                                    D += j.view.stride, L += G.view.stride;
                                }
                            }
                            P += Fd[_$W.format].size;
                        }
                        U[x] = {
                            attributes: j.attributes,
                            view: {
                                offset: _$I.$g(),
                                length: A.byteLength,
                                count: _$R,
                                stride: _$M
                            }
                        }, _$I.zg(A);
                    }
                    for(var _$K, J, _$Q, Z = 0, _$tt = 2, it = Array(this._struct.primitives.length), _$nt = 0; _$nt < this._struct.primitives.length; ++_$nt){
                        var st = this._struct.primitives[_$nt], _$rt = t1._struct.primitives[_$nt];
                        it[_$nt] = {
                            primitiveMode: st.primitiveMode,
                            vertexBundelIndices: st.vertexBundelIndices
                        };
                        for(var ht, _$et = 0, ut = d(st.vertexBundelIndices); !(ht = ut()).done;){
                            var _$ot = ht.value;
                            _$et = Math.max(_$et, this._struct.vertexBundles[_$ot].view.count);
                        }
                        if (st.indexView && _$rt.indexView) {
                            Z = st.indexView.count + _$rt.indexView.count, _$C = st.indexView.offset, N = _$rt.indexView.offset, _$tt = Z < 256 ? 1 : Z < 65536 ? 2 : 4;
                            var _$ft = new ArrayBuffer(Z * _$tt);
                            if (_$K = 2 === _$tt ? new Uint16Array(_$ft) : 1 === _$tt ? new Uint8Array(_$ft) : new Uint32Array(_$ft), J = 2 === st.indexView.stride ? new Uint16Array(this.L.buffer, _$C, st.indexView.count) : 1 === st.indexView.stride ? new Uint8Array(this.L.buffer, _$C, st.indexView.count) : new Uint32Array(this.L.buffer, _$C, st.indexView.count), _$tt === st.indexView.stride) _$K.set(J);
                            else for(var _$ct = 0; _$ct < st.indexView.count; ++_$ct)_$K[_$ct] = J[_$ct];
                            _$C += st.indexView.length, _$Q = 2 === _$rt.indexView.stride ? new Uint16Array(t1.L.buffer, N, _$rt.indexView.count) : 1 === _$rt.indexView.stride ? new Uint8Array(t1.L.buffer, N, _$rt.indexView.count) : new Uint32Array(t1.L.buffer, N, _$rt.indexView.count);
                            for(var at = 0; at < _$rt.indexView.count; ++at)_$K[st.indexView.count + at] = _$et + _$Q[at];
                            N += _$rt.indexView.length, it[_$nt].indexView = {
                                offset: _$I.$g(),
                                length: _$ft.byteLength,
                                count: Z,
                                stride: _$tt
                            }, _$I.Wg(_$tt), _$I.zg(_$ft);
                        }
                    }
                    var vt = {
                        vertexBundles: U,
                        primitives: it,
                        minPosition: this._struct.minPosition,
                        maxPosition: this._struct.maxPosition
                    };
                    return vt.minPosition && t1._struct.minPosition && vt.maxPosition && t1._struct.maxPosition && (i ? (AP(_$h.center, t1._struct.maxPosition, t1._struct.minPosition), EP(_$h.center, _$h.center, .5), TP(_$h.halfExtents, t1._struct.maxPosition, t1._struct.minPosition), EP(_$h.halfExtents, _$h.halfExtents, .5), SP(_$h, _$h, i), AP(_$s, _$h.center, _$h.halfExtents), IP(vt.maxPosition, vt.maxPosition, _$s), TP(_$s, _$h.center, _$h.halfExtents), RP(vt.minPosition, vt.minPosition, _$s)) : (RP(vt.minPosition, vt.minPosition, t1._struct.minPosition), IP(vt.maxPosition, vt.maxPosition, t1._struct.maxPosition))), this.reset({
                        struct: vt,
                        data: new Uint8Array(_$I.Xg())
                    }), this.initialize(), !0;
                }, n.validateMergingMesh = function(t1) {
                    if (this._struct.dynamic || t1._struct.dynamic || this._struct.vertexBundles.length !== t1._struct.vertexBundles.length) return !1;
                    for(var _$i = 0; _$i < this._struct.vertexBundles.length; ++_$i){
                        var n = this._struct.vertexBundles[_$i], _$s = t1._struct.vertexBundles[_$i];
                        if (n.attributes.length !== _$s.attributes.length) return !1;
                        for(var _$r = 0; _$r < n.attributes.length; ++_$r)if (n.attributes[_$r].format !== _$s.attributes[_$r].format) return !1;
                    }
                    if (this._struct.primitives.length !== t1._struct.primitives.length) return !1;
                    for(var _$h = 0; _$h < this._struct.primitives.length; ++_$h){
                        var e = this._struct.primitives[_$h], u = t1._struct.primitives[_$h];
                        if (e.vertexBundelIndices.length !== u.vertexBundelIndices.length) return !1;
                        for(var o = 0; o < e.vertexBundelIndices.length; ++o)if (e.vertexBundelIndices[o] !== u.vertexBundelIndices[o]) return !1;
                        if (e.primitiveMode !== u.primitiveMode) return !1;
                        if (e.indexView) {
                            if (void 0 === u.indexView) return !1;
                        } else if (u.indexView) return !1;
                    }
                    return !0;
                }, n.readAttribute = function(t1, i) {
                    var n = this, _$s = null;
                    return this.lp(t1, i, function(t1, i) {
                        var _$r = t1.view.count, _$h = t1.attributes[i].format, e = $d(Fd[_$h]);
                        if (0 !== _$r) {
                            var u = new DataView(n.L.buffer, t1.view.offset + FP(t1.attributes, i)), o = Fd[_$h], f = jP(u, _$h);
                            if (e && f) {
                                for(var _$c = o.count, a = new e(_$r * _$c), v = t1.view.stride, l = 0; l < _$r; ++l)for(var _$d = 0; _$d < _$c; ++_$d)a[_$c * l + _$d] = f(v * l + a.BYTES_PER_ELEMENT * _$d);
                                _$s = a;
                            }
                        }
                    }), _$s;
                }, n.copyAttribute = function(t1, i, n, s, r) {
                    var _$h = this, e = !1;
                    return this.lp(t1, i, function(t1, i) {
                        var u = t1.view.count;
                        if (0 !== u) {
                            var o = t1.attributes[i].format, f = new DataView(_$h.L.buffer, t1.view.offset + FP(t1.attributes, i)), _$c = new DataView(n, r), a = Fd[o], v = jP(f, o), l = GP(_$c, o);
                            if (v && l) {
                                for(var _$d = a.count, w = t1.view.stride, g = xP(o), _$_ = 0; _$_ < u; ++_$_)for(var m = 0; m < _$d; ++m)l(s * _$_ + g * m, v(w * _$_ + g * m));
                                e = !0;
                            }
                        } else e = !0;
                    }), e;
                }, n.readIndices = function(t1) {
                    if (t1 >= this._struct.primitives.length) return null;
                    var _$i = this._struct.primitives[t1];
                    if (!_$i.indexView) return null;
                    var n = _$i.indexView.stride;
                    return new (1 === n ? Uint8Array : 2 === n ? Uint16Array : Uint32Array)(this.L.buffer, _$i.indexView.offset, _$i.indexView.count);
                }, n.copyIndices = function(t1, i) {
                    if (t1 >= this._struct.primitives.length) return !1;
                    var n = this._struct.primitives[t1];
                    if (!n.indexView) return !1;
                    for(var _$s = n.indexView.count, _$r = 1 === n.indexView.stride ? 6 : 2 === n.indexView.stride ? 9 : 12, _$h = jP(new DataView(this.L.buffer), _$r), e = 0; e < _$s; ++e)i[e] = _$h(n.indexView.offset + Fd[_$r].size * e);
                    return !0;
                }, n.readAttributeFormat = function(t1, i) {
                    var n = null;
                    return this.lp(t1, i, function(t1, i) {
                        n = Fd[t1.attributes[i].format];
                    }), n;
                }, n.lp = function(t1, i, n) {
                    if (!(t1 >= this._struct.primitives.length)) for(var _$s = this._struct.primitives[t1].vertexBundelIndices, _$r = 0; _$r < _$s.length; _$r++){
                        var _$h = _$s[_$r], e = this._struct.vertexBundles[_$h], u = e.attributes.findIndex(function(t1) {
                            return t1.name === i;
                        });
                        if (!(u < 0)) {
                            n(e, u);
                            break;
                        }
                    }
                }, n.cp = function(t1, i) {
                    return this._struct.vertexBundles.map(function(n) {
                        var _$s = t1.createBuffer(new Wl(8, 1, n.view.length, n.view.stride)), _$r = new Uint8Array(i, n.view.offset, n.view.length);
                        return _$s.update(_$r), _$s;
                    });
                }, n.initDefault = function(i) {
                    t1.prototype.initDefault.call(this, i), this.reset({
                        struct: {
                            vertexBundles: [],
                            primitives: []
                        },
                        data: LP
                    });
                }, n.vp = function() {
                    this.L = LP;
                }, s(i, [
                    {
                        key: "_nativeAsset",
                        get: function get() {
                            return this.L.buffer;
                        },
                        set: function set(t1) {
                            this.L = new Uint8Array(t1);
                        }
                    },
                    {
                        key: "subMeshCount",
                        get: function get() {
                            var _$t = this.renderingSubMeshes;
                            return _$t ? _$t.length : 0;
                        }
                    },
                    {
                        key: "minPosition",
                        get: function get() {
                            return this.struct.minPosition;
                        }
                    },
                    {
                        key: "maxPosition",
                        get: function get() {
                            return this.struct.maxPosition;
                        }
                    },
                    {
                        key: "struct",
                        get: function get() {
                            return this._struct;
                        }
                    },
                    {
                        key: "data",
                        get: function get() {
                            return this.L;
                        }
                    },
                    {
                        key: "hash",
                        get: function get() {
                            return this._hash || (this._hash = Iv(this.L, 666)), this._hash;
                        }
                    },
                    {
                        key: "jointBufferIndices",
                        get: function get() {
                            return this.fp ? this.fp : this.fp = this._struct.primitives.map(function(t1) {
                                return t1.jointMapIndex || 0;
                            });
                        }
                    },
                    {
                        key: "renderingSubMeshes",
                        get: function get() {
                            return this.initialize(), this.hp;
                        }
                    },
                    {
                        key: "allowDataAccess",
                        get: function get() {
                            return this._allowDataAccess;
                        },
                        set: function set(t1) {
                            this._allowDataAccess = t1, this.rp && !this._allowDataAccess && this.vp();
                        }
                    }
                ]), i;
            }(sg)).prototype, "_struct", [
                Ro
            ], function() {
                return {
                    vertexBundles: [],
                    primitives: []
                };
            }), mP = ho(yP.prototype, "_hash", [
                Ro
            ], function() {
                return 0;
            }), bP = ho(yP.prototype, "_allowDataAccess", [
                Ro
            ], function() {
                return !0;
            }), yP)) || yP;
            function FP(t1, i) {
                for(var n = 0, s = 0; s < i; ++s)n += Fd[t1[s].format].size;
                return n;
            }
            A.Mesh = BP;
            var UP = _e.isLittleEndian;
            function xP(t1) {
                var i = Fd[t1];
                return i.size / i.count;
            }
            function jP(t1, i) {
                var n = Fd[i], s = n.size / n.count;
                switch(n.type){
                    case 1:
                    case 3:
                        switch(s){
                            case 1:
                                return function(i) {
                                    return t1.getUint8(i);
                                };
                            case 2:
                                return function(i) {
                                    return t1.getUint16(i, UP);
                                };
                            case 4:
                                return function(i) {
                                    return t1.getUint32(i, UP);
                                };
                        }
                        break;
                    case 2:
                    case 4:
                        switch(s){
                            case 1:
                                return function(i) {
                                    return t1.getInt8(i);
                                };
                            case 2:
                                return function(i) {
                                    return t1.getInt16(i, UP);
                                };
                            case 4:
                                return function(i) {
                                    return t1.getInt32(i, UP);
                                };
                        }
                        break;
                    case 6:
                        switch(s){
                            case 2:
                                return function(i) {
                                    return t1.getUint16(i, UP);
                                };
                            case 4:
                                return function(i) {
                                    return t1.getFloat32(i, UP);
                                };
                        }
                }
                return null;
            }
            function GP(t1, i) {
                var n = Fd[i], s = n.size / n.count;
                switch(n.type){
                    case 1:
                    case 3:
                        switch(s){
                            case 1:
                                return function(i, n) {
                                    return t1.setUint8(i, n);
                                };
                            case 2:
                                return function(i, n) {
                                    return t1.setUint16(i, n, UP);
                                };
                            case 4:
                                return function(i, n) {
                                    return t1.setUint32(i, n, UP);
                                };
                        }
                        break;
                    case 2:
                    case 4:
                        switch(s){
                            case 1:
                                return function(i, n) {
                                    return t1.setInt8(i, n);
                                };
                            case 2:
                                return function(i, n) {
                                    return t1.setInt16(i, n, UP);
                                };
                            case 4:
                                return function(i, n) {
                                    return t1.setInt32(i, n, UP);
                                };
                        }
                        break;
                    case 6:
                        switch(s){
                            case 2:
                                return function(i, n) {
                                    return t1.setUint16(i, n, UP);
                                };
                            case 4:
                                return function(i, n) {
                                    return t1.setFloat32(i, n, UP);
                                };
                        }
                }
                return null;
            }
            function HP(t1) {
                if (!t1.struct.encoded) return t1;
                var i = function i(t1) {
                    t1 < 0 && rt(14204, t1);
                }, n = JSON.parse(JSON.stringify(t1.struct)), s = new rP;
                s.Wg(0);
                for(var _$r, h = d(n.vertexBundles); !(_$r = h()).done;){
                    var e = _$r.value, u = e.view, f = new Uint8Array(u.count * u.stride), _$c = new Uint8Array(t1.data.buffer, u.offset, u.length);
                    i(wP.dp(f, u.count, u.stride, _$c)), s.Wg(u.stride), e.view = {
                        offset: s.$g(),
                        length: f.byteLength,
                        count: u.count,
                        stride: u.stride
                    }, s.zg(f);
                }
                for(var v, l = d(n.primitives); !(v = l()).done;){
                    var w = v.value;
                    if (void 0 !== w.indexView) {
                        var g = w.indexView, _$y = new Uint8Array(g.count * g.stride), _$_ = new Uint8Array(t1.data.buffer, g.offset, g.length);
                        i(wP.wp(_$y, g.count, g.stride, _$_)), s.Wg(g.stride), w.indexView = {
                            offset: s.$g(),
                            length: _$y.byteLength,
                            count: g.count,
                            stride: g.stride
                        }, s.zg(_$y);
                    }
                }
                return {
                    struct: n,
                    data: new Uint8Array(s.Xg())
                };
            }
            function VP(t1) {
                var i = JSON.parse(JSON.stringify(t1.struct)), n = new rP;
                function s(t1, i, n, s, r, h, e) {
                    for(var u = 0; u < n; u++)for(var o = 0; o < s; o++)i(e * u + r * o, t1(h * u + r * o));
                }
                function r(t1, i, n, s, r, h) {
                    for(var e = 0; e < n; e++)for(var u = 0; u < s; u++)i(h * e + 4 * u, fs(t1(r * e + 2 * u)));
                }
                n.Wg(0);
                for(var h = 0; h < i.vertexBundles.length; ++h){
                    for(var e = i.vertexBundles[h], u = e.view, o = e.attributes, f = t1.struct.vertexBundles[h].attributes, _$c = [], a = [], v = [], l = 0; l < o.length; ++l){
                        var w = o[l], g = jP(new DataView(t1.data.buffer, u.offset + FP(f, l)), w.format), p = !0;
                        switch(w.format){
                            case 8:
                                w.format = 11;
                                break;
                            case 18:
                                w.format = 21;
                                break;
                            case 29:
                                w.format = 32;
                                break;
                            case 41:
                                w.format = 44;
                                break;
                            default:
                                p = !1;
                        }
                        _$c.push(Fd[w.format].size), a.push(p), v.push(g);
                    }
                    for(var _$y = _$c.reduce(function(t1, i) {
                        return t1 + i;
                    }, 0), _$_ = new Uint8Array(_$y * u.count), m = 0; m < o.length; ++m){
                        var b = o[m], k = v[m], A = GP(new DataView(_$_.buffer, FP(o, m)), b.format), E = a[m], T = Fd[b.format];
                        E ? r(k, A, u.count, T.count, u.stride, _$y) : s(k, A, u.count, T.count, T.size / T.count, u.stride, _$y);
                    }
                    n.Wg(_$y), e.view = {
                        offset: n.$g(),
                        length: _$_.byteLength,
                        count: u.count,
                        stride: _$y
                    }, n.zg(_$_);
                }
                for(var _$O, _$I = d(i.primitives); !(_$O = _$I()).done;){
                    var _$R = _$O.value;
                    if (void 0 !== _$R.indexView) {
                        var _$M = _$R.indexView, _$C = new Uint8Array(t1.data.buffer, _$M.offset, _$M.length);
                        n.Wg(_$M.stride), _$R.indexView = {
                            offset: n.$g(),
                            length: _$C.byteLength,
                            count: _$M.count,
                            stride: _$M.stride
                        }, n.zg(_$C);
                    }
                }
                var P = new Uint8Array(n.Xg());
                return i.quantized = !1, {
                    struct: i,
                    data: P
                };
            }
            var zP, $P = [
                new ud("a_position", 32),
                new ud("a_normal", 32),
                new ud("a_texCoord", 21),
                new ud("a_tangent", 44),
                new ud("a_color", 44)
            ], XP = new Ss;
            function qP(t1, i, n) {
                n = n || {};
                var s, _$r = [], h = 0, e = [], u = 0, o = t1.positions.slice();
                if (o.length > 0) {
                    s = null, t1.attributes && (s = t1.attributes.find(function(t1) {
                        return "a_position" === t1.name;
                    }) || null), s || (s = $P[0]), _$r.push(s);
                    var f = Fd[s.format];
                    u = Math.max(u, Math.floor(o.length / f.count)), e.push({
                        offset: h,
                        data: o,
                        attribute: s
                    }), h += f.size;
                }
                if (t1.normals && t1.normals.length > 0) {
                    s = null, t1.attributes && (s = t1.attributes.find(function(t1) {
                        return "a_normal" === t1.name;
                    }) || null), s || (s = $P[1]);
                    var _$c = Fd[s.format];
                    _$r.push(s), u = Math.max(u, Math.floor(t1.normals.length / _$c.count)), e.push({
                        offset: h,
                        data: t1.normals,
                        attribute: s
                    }), h += _$c.size;
                }
                if (t1.uvs && t1.uvs.length > 0) {
                    s = null, t1.attributes && (s = t1.attributes.find(function(t1) {
                        return "a_texCoord" === t1.name;
                    }) || null), s || (s = $P[2]);
                    var a = Fd[s.format];
                    _$r.push(s), u = Math.max(u, Math.floor(t1.uvs.length / a.count)), e.push({
                        offset: h,
                        data: t1.uvs,
                        attribute: s
                    }), h += a.size;
                }
                if (t1.tangents && t1.tangents.length > 0) {
                    s = null, t1.attributes && (s = t1.attributes.find(function(t1) {
                        return "a_tangent" === t1.name;
                    }) || null), s || (s = $P[3]);
                    var v = Fd[s.format];
                    _$r.push(s), u = Math.max(u, Math.floor(t1.tangents.length / v.count)), e.push({
                        offset: h,
                        data: t1.tangents,
                        attribute: s
                    }), h += v.size;
                }
                if (t1.colors && t1.colors.length > 0) {
                    s = null, t1.attributes && (s = t1.attributes.find(function(t1) {
                        return "a_color" === t1.name;
                    }) || null), s || (s = $P[4]);
                    var l = Fd[s.format];
                    _$r.push(s), u = Math.max(u, Math.floor(t1.colors.length / l.count)), e.push({
                        offset: h,
                        data: t1.colors,
                        attribute: s
                    }), h += l.size;
                }
                if (t1.customAttributes) for(var _$d = 0; _$d < t1.customAttributes.length; _$d++){
                    var w = t1.customAttributes[_$d], g = Fd[w.attr.format];
                    _$r.push(w.attr), u = Math.max(u, Math.floor(w.values.length / g.count)), e.push({
                        offset: h,
                        data: w.values,
                        attribute: w.attr
                    }), h += g.size;
                }
                var p = new rP, _$y = new ArrayBuffer(u * h), _$_ = new DataView(_$y);
                e.forEach(function(t1) {
                    LA(_$_, t1.data, t1.attribute.format, t1.offset, h);
                }), p.Wg(0);
                var m = {
                    attributes: _$r,
                    view: {
                        offset: p.$g(),
                        length: _$y.byteLength,
                        count: u,
                        stride: h
                    }
                };
                p.zg(_$y);
                var b = null, k = 0;
                if (t1.indices) {
                    var A = t1.indices;
                    LA(new DataView(b = new ArrayBuffer(2 * (k = A.length))), A, 9);
                }
                var E = {
                    primitiveMode: t1.primitiveMode || 7,
                    vertexBundelIndices: [
                        0
                    ]
                };
                b && (p.Wg(2), E.indexView = {
                    offset: p.$g(),
                    length: b.byteLength,
                    count: k,
                    stride: 2
                }, p.zg(b));
                var T = t1.minPos;
                if (!T && n.calculateBounds) {
                    T = Ss.set(new Ss, 1 / 0, 1 / 0, 1 / 0);
                    for(var S = 0; S < u; ++S)Ss.set(XP, o[3 * S + 0], o[3 * S + 1], o[3 * S + 2]), Ss.min(T, T, XP);
                }
                var _$O = t1.maxPos;
                if (!_$O && n.calculateBounds) {
                    _$O = Ss.set(new Ss, -1 / 0, -1 / 0, -1 / 0);
                    for(var _$I = 0; _$I < u; ++_$I)Ss.set(XP, o[3 * _$I + 0], o[3 * _$I + 1], o[3 * _$I + 2]), Ss.max(_$O, _$O, XP);
                }
                var _$R = {
                    vertexBundles: [
                        m
                    ],
                    primitives: [
                        E
                    ]
                };
                return T && (_$R.minPosition = new Ss(T.x, T.y, T.z)), _$O && (_$R.maxPosition = new Ss(_$O.x, _$O.y, _$O.z)), i || (i = new BP), i.reset({
                    struct: _$R,
                    data: new Uint8Array(p.Xg())
                }), i;
            }
            var KP, JP, QP = Os(), ZP = lr(), tD = Ss.transformMat4, iD = Ss.toArray, nD = [
                {
                    u: 0,
                    v: 0
                },
                {
                    u: 0,
                    v: 0
                },
                {
                    u: 0,
                    v: 0
                },
                {
                    u: 0,
                    v: 0
                }
            ], sD = (t1("b", {
                UV_UPDATED: "uv_updated"
            }), t1("c", go("cc.SpriteFrame")(((zP = function(t1) {
                function i(i) {
                    var n;
                    return (n = t1.call(this, i) || this).vertices = null, n.uv = [], n.unbiasUV = [], n.uvSliced = [], n._rect = rh(), n._trimmedBorder = Vr(), n._offset = Ir(), n._originalSize = th(), n._rotated = !1, n._capInsets = [
                        0,
                        0,
                        0,
                        0
                    ], n._atlasUuid = "", n._texture = void 0, n._isFlipUVY = !1, n._isFlipUVX = !1, n._original = null, n._packable = !0, n._pixelsToUnit = 100, n._pivot = Ir(.5, .5), n._meshType = 0, n._extrude = 0, n._customOutLine = [], n._mesh = null, n._minPos = Os(), n._maxPos = Os(), n;
                }
                h(i, t1), i.createWithImage = function(t1) {
                    var n = _instanceof(t1, mg) ? t1 : new mg(t1), _$s = new ay;
                    _$s.image = n;
                    var _$r = new i;
                    return _$r.texture = _$s, _$r;
                };
                var n = i.prototype;
                return n.textureLoaded = function() {
                    return !!this.texture;
                }, n.isRotated = function() {
                    return this._rotated;
                }, n.setRotated = function(t1) {
                    this.rotated = t1;
                }, n.getRect = function(t1) {
                    return t1 ? (t1.set(this._rect), t1) : this._rect.clone();
                }, n.setRect = function(t1) {
                    this.rect = t1;
                }, n.getOriginalSize = function(t1) {
                    return t1 ? (t1.set(this._originalSize), t1) : this._originalSize.clone();
                }, n.setOriginalSize = function(t1) {
                    this.originalSize = t1;
                }, n.getOffset = function(t1) {
                    return t1 ? (t1.set(this._offset), t1) : this._offset.clone();
                }, n.setOffset = function(t1) {
                    this.offset = t1;
                }, n.getGFXTexture = function() {
                    return this._texture.getGFXTexture();
                }, n.getGFXSampler = function() {
                    return this._texture.getGFXSampler();
                }, n.getHash = function() {
                    return this._texture.getHash();
                }, n.getSamplerInfo = function() {
                    return this._texture.getSamplerInfo();
                }, n.reset = function(t1, i) {
                    void 0 === i && (i = !1);
                    var _$s = !1;
                    if (i && (this._originalSize.set(0, 0), this._rect.set(0, 0, 0, 0), this._offset.set(0, 0), this._capInsets = [
                        0,
                        0,
                        0,
                        0
                    ], this._rotated = !1, _$s = !0), t1) {
                        t1.texture && (this._rect.set(0, 0, t1.texture.width, t1.texture.height), this._refreshTexture(t1.texture), this.checkRect(this._texture)), t1.originalSize && this._originalSize.set(t1.originalSize), t1.rect && this._rect.set(t1.rect), t1.offset && this._offset.set(t1.offset);
                        var _$r = this._capInsets;
                        void 0 !== t1.borderTop && (_$r[1] = t1.borderTop), void 0 !== t1.borderBottom && (_$r[3] = t1.borderBottom), void 0 !== t1.borderLeft && (_$r[0] = t1.borderLeft), void 0 !== t1.borderRight && (_$r[2] = t1.borderRight), void 0 !== t1.isRotate && (this._rotated = !!t1.isRotate), void 0 !== t1.isFlipUv && (this._isFlipUVY = !!t1.isFlipUv), _$s = !0;
                    }
                    _$s && this.texture && this.gp(), this.pp();
                }, n.checkRect = function(t1) {
                    var _$i = this._rect, n = _$i.x, _$s = _$i.y;
                    return this._rotated ? (n += _$i.height, _$s += _$i.width) : (n += _$i.width, _$s += _$i.height), n > t1.width ? (rt(3300, this.name + "/" + t1.name, n, t1.width), !1) : !(_$s > t1.height && (rt(3301, this.name + "/" + t1.name, _$s, t1.height), 1));
                }, n.pp = function() {
                    var _$i = this._originalSize.width, n = this._originalSize.height, _$s = .5 * (_$i - this._rect.width), _$r = .5 * (n - this._rect.height), _$h = this._offset, e = this._trimmedBorder;
                    e.x = _$h.x + _$s, e.y = _$h.x - _$s, e.z = _$h.y + _$r, e.w = _$h.y - _$r;
                }, n.ensureMeshData = function() {
                    this._mesh || (this._initVertices(), this._createMesh());
                }, n.destroy = function() {
                    return this._packable && sP && sP.deleteAtlasSpriteFrame(this), t1.prototype.destroy.call(this);
                }, n._calculateSlicedUV = function() {
                    var _$i = this._rect, n = this.texture, _$s = this._capInsets, _$r = n.width, _$h = n.height, e = _$s[0], u = _$s[2], o = _$i.width - e - u, f = _$s[1], _$c = _$s[3], a = _$i.height - f - _$c, v = this.uvSliced;
                    if (v.length = 0, this._rotated) {
                        nD[0].u = _$i.x / _$r, nD[1].u = (_$i.x + _$c) / _$r, nD[2].u = (_$i.x + _$c + a) / _$r, nD[3].u = (_$i.x + _$i.height) / _$r, nD[3].v = _$i.y / _$h, nD[2].v = (_$i.y + e) / _$h, nD[1].v = (_$i.y + e + o) / _$h, nD[0].v = (_$i.y + _$i.width) / _$h;
                        for(var l = 0; l < 4; ++l)for(var _$d = nD[l], w = 0; w < 4; ++w){
                            var g = nD[3 - w];
                            v.push({
                                u: _$d.u,
                                v: g.v
                            });
                        }
                    } else {
                        nD[0].u = _$i.x / _$r, nD[1].u = (_$i.x + e) / _$r, nD[2].u = (_$i.x + e + o) / _$r, nD[3].u = (_$i.x + _$i.width) / _$r, nD[3].v = _$i.y / _$h, nD[2].v = (_$i.y + f) / _$h, nD[1].v = (_$i.y + f + a) / _$h, nD[0].v = (_$i.y + _$i.height) / _$h;
                        for(var p = 0; p < 4; ++p)for(var _$y = nD[p], _$_ = 0; _$_ < 4; ++_$_){
                            var m = nD[_$_];
                            v.push({
                                u: m.u,
                                v: _$y.v
                            });
                        }
                    }
                    this.emit("uv_updated", this);
                }, n.gp = function() {
                    var _$t = fi, n = this._rect, _$s = this.uv, _$r = this.unbiasUV, _$h = this.texture, e = _$h.width, u = _$h.height;
                    if (this._rotated) {
                        var o = 0 === e ? 0 : n.x / e, f = 0 === e ? 1 : (n.x + n.height) / e, _$c = 0 === u ? 0 : n.y / u, a = 0 === u ? 1 : (n.y + n.width) / u;
                        this._isFlipUVX && this._isFlipUVY ? _$t(_$s, f, a, f, _$c, o, a, o, _$c) : this._isFlipUVX ? _$t(_$s, f, _$c, f, a, o, _$c, o, a) : this._isFlipUVY ? _$t(_$s, o, a, o, _$c, f, a, f, _$c) : _$t(_$s, o, _$c, o, a, f, _$c, f, a);
                        var v = 0 === e ? 0 : n.x / e, l = 0 === e ? 1 : (n.x + n.height) / e, _$d = 0 === u ? 0 : n.y / u, w = 0 === u ? 1 : (n.y + n.width) / u;
                        this._isFlipUVX && this._isFlipUVY ? _$t(_$r, l, w, l, _$d, v, w, v, _$d) : this._isFlipUVX ? _$t(_$r, l, _$d, l, w, v, _$d, v, w) : this._isFlipUVY ? _$t(_$r, v, w, v, _$d, l, w, l, _$d) : _$t(_$r, v, _$d, v, w, l, _$d, l, w);
                    } else {
                        var g = 0 === e ? 0 : n.x / e, p = 0 === e ? 1 : (n.x + n.width) / e, _$y = 0 === u ? 1 : (n.y + n.height) / u, _$_ = 0 === u ? 0 : n.y / u;
                        this._isFlipUVX && this._isFlipUVY ? _$t(_$s, p, _$_, g, _$_, p, _$y, g, _$y) : this._isFlipUVX ? _$t(_$s, p, _$y, g, _$y, p, _$_, g, _$_) : this._isFlipUVY ? _$t(_$s, g, _$_, p, _$_, g, _$y, p, _$y) : _$t(_$s, g, _$y, p, _$y, g, _$_, p, _$_);
                        var m = 0 === e ? 0 : n.x / e, b = 0 === e ? 1 : (n.x + n.width) / e, k = 0 === u ? 1 : (n.y + n.height) / u, A = 0 === u ? 0 : n.y / u;
                        this._isFlipUVX && this._isFlipUVY ? _$t(_$r, b, A, m, A, b, k, m, k) : this._isFlipUVX ? _$t(_$r, b, k, m, k, b, A, m, A) : this._isFlipUVY ? _$t(_$r, m, A, b, A, m, k, b, k) : _$t(_$r, m, k, b, k, m, A, b, A);
                    }
                    this._calculateSlicedUV();
                }, n._setDynamicAtlasFrame = function(t1) {
                    t1 && (this._original = {
                        _texture: this._texture,
                        _x: this._rect.x,
                        _y: this._rect.y
                    }, this._texture = t1.texture, this._rect.x = t1.x, this._rect.y = t1.y, this.gp());
                }, n._resetDynamicAtlasFrame = function() {
                    this._original && (this._rect.x = this._original._x, this._rect.y = this._original._y, this._texture = this._original._texture, this._original = null, this.gp());
                }, n.yp = function() {
                    if (sP) {
                        var _$i = this._texture;
                        if (_instanceof(_$i, ay) && !_$i.isCompressed) {
                            var n = this.width, _$s = this.height;
                            if (!_$i.image || n > sP.maxFrameSize || _$s > sP.maxFrameSize) this._packable = !1;
                            else {
                                var _$r = S.HTMLCanvasElement;
                                _$i.image && _instanceof(_$i.image, _$r) && (this._packable = !0);
                            }
                        } else this._packable = !1;
                    }
                }, n._serialize = function() {
                    return null;
                }, n._deserialize = function(t1) {
                    var _$s = t1.rect;
                    _$s && (this._rect = new sh(_$s.x, _$s.y, _$s.width, _$s.height));
                    var _$r = t1.offset;
                    t1.offset && (this._offset = Ir(_$r.x, _$r.y));
                    var _$h = t1.originalSize;
                    t1.originalSize && (this._originalSize = th(_$h.width, _$h.height)), this._rotated = !!t1.rotated, this._name = t1.name, this._packable = !!t1.packable, this._pixelsToUnit = t1.pixelsToUnit;
                    var e = t1.pivot;
                    e && (this._pivot = Ir(e.x, e.y)), this._meshType = t1.meshType;
                    var u = t1.capInsets;
                    if (u) {
                        var o = this._capInsets;
                        o[0] = u[0], o[1] = u[1], o[2] = u[2], o[3] = u[3];
                    }
                    var f = t1.vertices;
                    if (f) {
                        this.vertices || (this.vertices = {
                            rawPosition: [],
                            positions: [],
                            indexes: f.indexes,
                            uv: f.uv,
                            nuv: f.nuv,
                            minPos: Os(f.minPos.x, f.minPos.y, f.minPos.z),
                            maxPos: Os(f.maxPos.x, f.maxPos.y, f.maxPos.z)
                        }), this.vertices.rawPosition.length = 0;
                        for(var _$c = f.rawPosition, a = 0; a < _$c.length; a += 3)this.vertices.rawPosition.push(Os(_$c[a], _$c[a + 1], _$c[a + 2]));
                        this._updateMeshVertices();
                    }
                }, n.clone = function() {
                    var _$t, n, _$s, _$r, _$h, u = new i, o = this.vertices;
                    return u.vertices = o ? {
                        rawPosition: o.rawPosition.slice(0),
                        positions: o.positions.slice(0),
                        indexes: o.indexes.slice(0),
                        uv: o.uv.slice(0),
                        nuv: o.nuv.slice(0),
                        minPos: o.minPos.clone(),
                        maxPos: o.maxPos.clone()
                    } : null, (_$t = u.uv).splice.apply(_$t, [
                        0,
                        u.uv.length
                    ].concat(this.uv)), (n = u.unbiasUV).splice.apply(n, [
                        0,
                        u.unbiasUV.length
                    ].concat(this.unbiasUV)), (_$s = u.uvSliced).splice.apply(_$s, [
                        0,
                        u.uvSliced.length
                    ].concat(this.uvSliced)), u._rect.set(this._rect), u._trimmedBorder.set(this._trimmedBorder), u._offset.set(this._offset), u._originalSize.set(this._originalSize), u._rotated = this._rotated, (_$r = u._capInsets).splice.apply(_$r, [
                        0,
                        u._capInsets.length
                    ].concat(this._capInsets)), u._atlasUuid = this._atlasUuid, u._texture = this._texture, u._isFlipUVX = this._isFlipUVX, u._isFlipUVY = this._isFlipUVY, this._original ? u._original = {
                        _texture: this._original._texture,
                        _x: this._original._x,
                        _y: this._original._y
                    } : u._original = null, u._packable = this._packable, u._pixelsToUnit = this._pixelsToUnit, u._pivot.set(this._pivot), u._meshType = this._meshType, u._extrude = this._extrude, (_$h = u._customOutLine).splice.apply(_$h, [
                        0,
                        u._customOutLine.length
                    ].concat(this._customOutLine)), u._minPos = this._minPos, u._maxPos = this._maxPos, this._mesh && u._createMesh(), u;
                }, n._refreshTexture = function(t1) {
                    this._texture = t1;
                    var n = this._texture, _$s = {}, _$r = !1;
                    0 !== this._rect.width && 0 !== this._rect.height && this.checkRect(n) || (_$s.rect = rh(0, 0, n.width, n.height), _$r = !0), (0 === this._originalSize.width || 0 === this._originalSize.height || _$r) && (_$s.originalSize = th(n.width, n.height), _$r = !0), _$r && this.reset(_$s), this.yp(), this._mesh && this._updateMesh();
                }, n.onLoaded = function() {
                    this.pp();
                }, n.initDefault = function(i) {
                    t1.prototype.initDefault.call(this, i);
                    var n = new ay;
                    n.initDefault(), this._refreshTexture(n), this.gp();
                }, n.validate = function() {
                    return this._texture && this._rect && 0 !== this._rect.width && 0 !== this._rect.height;
                }, n._initVertices = function() {
                    if (this.vertices) {
                        var _$i = this.vertices;
                        _$i.rawPosition.length = 0, _$i.positions.length = 0, _$i.indexes.length = 0, _$i.uv.length = 0, _$i.nuv.length = 0, _$i.minPos.set(0, 0, 0), _$i.maxPos.set(0, 0, 0);
                    } else this.vertices = {
                        rawPosition: [],
                        positions: [],
                        indexes: [],
                        uv: [],
                        nuv: [],
                        minPos: Os(),
                        maxPos: Os()
                    };
                    var n = this.vertices;
                    if (1 === this._meshType) ;
                    else {
                        var _$s = this.texture, _$r = _$s.width, _$h = _$s.height, e = this.rect, u = e.width, o = e.height, f = e.x, _$c = _$h - e.y - o, a = u / 2, v = o / 2, l = 0 === _$r ? 0 : f / _$r, _$d = 0 === _$r ? 1 : (f + u) / _$r, w = 0 === _$h ? 1 : (_$c + o) / _$h, g = 0 === _$h ? 0 : _$c / _$h, p = n.uv, _$y = n.nuv, _$_ = n.rawPosition, m = n.indexes;
                        QP.set(-a, -v, 0), _$_.push(QP.clone()), p.push(f, _$c + o), _$y.push(l, g), n.minPos.set(QP), QP.set(a, -v, 0), _$_.push(QP.clone()), p.push(f + u, _$c + o), _$y.push(_$d, g), QP.set(-a, v, 0), _$_.push(QP.clone()), p.push(f, _$c), _$y.push(l, w), QP.set(a, v, 0), _$_.push(QP.clone()), p.push(f + u, _$c), _$y.push(_$d, w), n.maxPos.set(QP), m.push(0, 1, 2, 2, 1, 3);
                    }
                    this._updateMeshVertices();
                }, n._updateMeshVertices = function() {
                    ZP.identity();
                    var _$t = 1 / this._pixelsToUnit, _$i = Os(-(this._pivot.x - .5) * this.rect.width * _$t, -(this._pivot.y - .5) * this.rect.height * _$t, 0);
                    ZP.transform(_$i), _$i.set(_$t, _$t, 1), ZP.scale(_$i);
                    for(var n = this.vertices, _$s = 0; _$s < n.rawPosition.length; _$s++)tD(_$i, n.rawPosition[_$s], ZP), iD(n.positions, _$i, 3 * _$s);
                    tD(this._minPos, n.minPos, ZP), tD(this._maxPos, n.maxPos, ZP);
                }, n._createMesh = function() {
                    this._mesh = qP({
                        primitiveMode: 7,
                        positions: this.vertices.positions,
                        uvs: this.vertices.nuv,
                        indices: this.vertices.indexes,
                        minPos: this._minPos,
                        maxPos: this._maxPos,
                        attributes: [
                            new ud("a_position", 32),
                            new ud("a_texCoord", 21)
                        ]
                    });
                }, n._updateMesh = function() {
                    this._mesh && this._mesh.destroy(), this._initVertices(), this._createMesh();
                }, s(i, [
                    {
                        key: "insetTop",
                        get: function get() {
                            return this._capInsets[1];
                        },
                        set: function set(t1) {
                            this._capInsets[1] !== t1 && (this._capInsets[1] = t1, this._texture && this._calculateSlicedUV());
                        }
                    },
                    {
                        key: "insetBottom",
                        get: function get() {
                            return this._capInsets[3];
                        },
                        set: function set(t1) {
                            this._capInsets[3] !== t1 && (this._capInsets[3] = t1, this._texture && this._calculateSlicedUV());
                        }
                    },
                    {
                        key: "insetLeft",
                        get: function get() {
                            return this._capInsets[0];
                        },
                        set: function set(t1) {
                            this._capInsets[0] !== t1 && (this._capInsets[0] = t1, this._texture && this._calculateSlicedUV());
                        }
                    },
                    {
                        key: "insetRight",
                        get: function get() {
                            return this._capInsets[2];
                        },
                        set: function set(t1) {
                            this._capInsets[2] !== t1 && (this._capInsets[2] = t1, this._texture && this._calculateSlicedUV());
                        }
                    },
                    {
                        key: "rect",
                        get: function get() {
                            return this._rect;
                        },
                        set: function set(t1) {
                            this._rect.equals(t1) || (this._rect.set(t1), this._texture && this.gp(), this.pp());
                        }
                    },
                    {
                        key: "originalSize",
                        get: function get() {
                            return this._originalSize;
                        },
                        set: function set(t1) {
                            this._originalSize.equals(t1) || (this._originalSize.set(t1), this._texture && this.gp(), this.pp());
                        }
                    },
                    {
                        key: "offset",
                        get: function get() {
                            return this._offset;
                        },
                        set: function set(t1) {
                            this._offset.set(t1), this.pp();
                        }
                    },
                    {
                        key: "rotated",
                        get: function get() {
                            return this._rotated;
                        },
                        set: function set(t1) {
                            this._rotated !== t1 && (this._rotated = t1, this._texture && this.gp());
                        }
                    },
                    {
                        key: "texture",
                        get: function get() {
                            return this._texture;
                        },
                        set: function set(t1) {
                            t1 ? t1 !== this._texture && this.reset({
                                texture: t1
                            }, !0) : nt(3122, this.name);
                        }
                    },
                    {
                        key: "atlasUuid",
                        get: function get() {
                            return this._atlasUuid;
                        },
                        set: function set(t1) {
                            this._atlasUuid = t1;
                        }
                    },
                    {
                        key: "width",
                        get: function get() {
                            return this._texture.width;
                        }
                    },
                    {
                        key: "height",
                        get: function get() {
                            return this._texture.height;
                        }
                    },
                    {
                        key: "_textureSource",
                        set: function set(t1) {
                            globalThis.Build ? this._texture = t1 : t1 && (this._refreshTexture(t1), this.gp());
                        }
                    },
                    {
                        key: "flipUVX",
                        get: function get() {
                            return this._isFlipUVX;
                        },
                        set: function set(t1) {
                            this._isFlipUVX = t1, this.gp();
                        }
                    },
                    {
                        key: "flipUVY",
                        get: function get() {
                            return this._isFlipUVY;
                        },
                        set: function set(t1) {
                            this._isFlipUVY = t1, this.gp();
                        }
                    },
                    {
                        key: "packable",
                        get: function get() {
                            return this._packable;
                        },
                        set: function set(t1) {
                            this._packable = t1;
                        }
                    },
                    {
                        key: "original",
                        get: function get() {
                            return this._original;
                        }
                    },
                    {
                        key: "pixelsToUnit",
                        get: function get() {
                            return this._pixelsToUnit;
                        }
                    },
                    {
                        key: "pivot",
                        get: function get() {
                            return this._pivot;
                        }
                    },
                    {
                        key: "mesh",
                        get: function get() {
                            return this._mesh;
                        }
                    },
                    {
                        key: "trimmedBorder",
                        get: function get() {
                            return this._trimmedBorder;
                        }
                    }
                ]), i;
            }(sg)).EVENT_UV_UPDATED = "uv_updated", zP.MeshType = {
                RECT: 0,
                POLYGON: 1
            }, zP)) || zP));
            A.SpriteFrame = sD;
            var rD, hD = t1("a", go("cc.SpriteAtlas")((JP = ho((KP = function(t1) {
                function i(i) {
                    var n;
                    return (n = t1.call(this, i) || this).spriteFrames = JP && JP(), n;
                }
                h(i, t1);
                var n = i.prototype;
                return n.getTexture = function() {
                    var _$t = Object.keys(this.spriteFrames);
                    if (_$t.length > 0) {
                        var _$i = this.spriteFrames[_$t[0]];
                        return _$i && _$i.texture;
                    }
                    return null;
                }, n.getSpriteFrame = function(t1) {
                    var _$i = this.spriteFrames[t1];
                    return _$i ? (_$i.name || (_$i.name = t1), _$i) : null;
                }, n.getSpriteFrames = function() {
                    var _$t = [], _$i = this.spriteFrames;
                    for(var n in _$i)_$t.push(_$i[n]);
                    return _$t;
                }, n._serialize = function() {
                    return null;
                }, n._deserialize = function(t1, i) {
                    this._name = t1.name;
                    var s = t1.spriteFrames;
                    this.spriteFrames = St();
                    for(var _$r = 0; _$r < s.length; _$r += 2)i.result.push(this.spriteFrames, s[_$r], s[_$r + 1], ti(sD));
                }, i;
            }(sg)).prototype, "spriteFrames", [
                Ro
            ], function() {
                return St();
            }), KP)) || KP);
            A.SpriteAtlas = hD;
            var uD, oD, fD = t1("F", go("cc.Font")(rD = function(t1) {
                function i(i) {
                    return t1.call(this, i) || this;
                }
                return h(i, t1), i;
            }(sg)) || rD);
            A.Font = fD;
            var cD = t1("T", go("cc.TTFFont")((oD = ho((uD = function(t1) {
                function i() {
                    var _$i;
                    return (_$i = t1.call(this) || this)._fontFamily = oD && oD(), _$i;
                }
                return h(i, t1), i.prototype.initDefault = function(i) {
                    this._fontFamily = "Arial", t1.prototype.initDefault.call(this, i);
                }, s(i, [
                    {
                        key: "_nativeAsset",
                        get: function get() {
                            return this._fontFamily;
                        },
                        set: function set(t1) {
                            this._fontFamily = t1 || "Arial";
                        }
                    },
                    {
                        key: "_nativeDep",
                        get: function get() {
                            return {
                                uuid: this._uuid,
                                __nativeName__: this._native,
                                ext: Ya(this._native),
                                __isNative__: !0
                            };
                        }
                    }
                ]), i;
            }(fD)).prototype, "_fontFamily", [
                Ro
            ], function() {
                return null;
            }), y(uD.prototype, "_nativeAsset", [
                ff,
                Qo
            ], Object.getOwnPropertyDescriptor(uD.prototype, "_nativeAsset"), uD.prototype), y(uD.prototype, "_nativeDep", [
                ff
            ], Object.getOwnPropertyDescriptor(uD.prototype, "_nativeDep"), uD.prototype), uD)) || uD);
            A.TTFFont = cD;
            var aD = {}, vD = t1("u", .26), dD = t1("v", (vD + 1) / 2 - vD);
            function wD() {
                return 0;
            }
            var gD = new ii(2);
            gD.get = function() {
                return this._get() || {
                    key: "",
                    value: 0,
                    prev: null,
                    next: null
                };
            };
            var yD = new (t1("x", function() {
                function t1(t1) {
                    this._p = 0, this.mp = 0, this.bp = {}, this.kp = null, this.Ap = null, this.mp = t1;
                }
                var i = t1.prototype;
                return i.moveToHead = function(t1) {
                    t1.next = this.kp, t1.prev = null, this.kp && (this.kp.prev = t1), this.kp = t1, this.Ap || (this.Ap = t1), this._p++, this.bp[t1.key] = t1;
                }, i.put = function(t1, i) {
                    var n = gD.get();
                    if (n.key = t1, n.value = i, this._p >= this.mp) {
                        var s = this.Ap;
                        delete this.bp[s.key], this._p--, this.Ap = s.prev, this.Ap.next = null, s.prev = null, s.next = null, gD.put(s);
                    }
                    this.moveToHead(n);
                }, i.remove = function(t1) {
                    t1.prev ? t1.prev.next = t1.next : this.kp = t1.next, t1.next ? t1.next.prev = t1.prev : this.Ap = t1.prev, delete this.bp[t1.key], this._p--;
                }, i.get = function(t1) {
                    var i = this.bp[t1];
                    return i ? (this.remove(i), this.moveToHead(i), i.value) : null;
                }, i.clear = function() {
                    this._p = 0, this.bp = {}, this.kp = null, this.Ap = null;
                }, i.has = function(t1) {
                    return !!this.bp[t1];
                }, i.delete = function(t1) {
                    var i = this.bp[t1];
                    this.remove(i);
                }, t1;
            }()))(100), _D = /([a-zA-Z0-9--]+|\S)/, mD = /^[!,.:;'}\]%\?>]/, bD = "[a-zA-Z0-9--iI]", kD = RegExp("(" + bD + "+|\\S)$"), AD = RegExp(bD + "+$"), ED = RegExp("^" + bD);
            function TD(t1) {
                return /^[\u4E00-\u9FFF\u3400-\u4DFF]+$/.test(t1) || /[\u3000-\u303F]|[\u3040-\u309F]|[\u30A0-\u30FF]|[\uFF00-\uFFEF]|[\u4E00-\u9FAF]|[\u2605-\u2606]|[\u2190-\u2195]|\u203B/g.test(t1) || /^[\u1100-\u11FF]|[\u3130-\u318F]|[\uA960-\uA97F]|[\uAC00-\uD7AF]|[\uD7B0-\uD7FF]+$/.test(t1);
            }
            function SD(t1) {
                var i = t1.charCodeAt(0);
                return i >= 9 && i <= 13 || 32 === i || 133 === i || 160 === i || 5760 === i || i >= 8192 && i <= 8202 || 8232 === i || 8233 === i || 8239 === i || 8287 === i || 12288 === i;
            }
            function OD(t1, i, n) {
                var s = (n || t1.font) + "" + i, _$r = yD.get(s);
                if (null !== _$r) return _$r;
                var h = t1.measureText(i), e = h && h.width || 0;
                return yD.put(s, e), e;
            }
            function ID(t1) {
                for(var i = t1.length, n = 0, s = 0, _$r = 0; _$r < i; _$r++)8205 !== (s = t1.charCodeAt(_$r)) && (s >= 55296 && s <= 56319 && (s = t1.charCodeAt(_$r + 1)) >= 56320 && s <= 57343 ? ((_$r + 2 >= i || 8205 !== t1.charCodeAt(_$r + 2)) && n++, _$r++) : n++);
                return n;
            }
            function RD(t1, i) {
                for(var n = t1.length, s = 0, _$r = 0, h = 0, e = 0, u = 0; u < n; u++)if (8205 !== (e = t1.charCodeAt(u))) if (e >= 55296 && e <= 56319 && (s++, (e = t1.charCodeAt(u + 1)) >= 56320 && e <= 57343)) {
                    if (s++, u + 2 >= n || 8205 !== t1.charCodeAt(u + 2)) {
                        if (i === _$r) return t1.slice(h, h + s);
                        h += s, _$r++, s = 0;
                    }
                    u++;
                } else {
                    if (i === _$r) return t1.charAt(u);
                    h = u + 1, _$r++, s = 0;
                }
                else s++;
                return "";
            }
            function MD(t1, i) {
                var n = RD(t1, i);
                if (1 === n.length) return "" + n.charCodeAt(0);
                for(var s = "", _$r = 0; _$r < n.length; _$r++)s += "" + n.charCodeAt(_$r);
                return "" + s;
            }
            function CD(t1, i) {
                if (i >= t1.length) return t1.length;
                for(var n = i, s = t1[n]; n >= 0 && ("" === s && (s = t1[--n]), s >= "\udc00" && s <= "\udfff" && n - 1 >= 0 && (s = t1[--n]), s >= "\ud800" && s <= "\udbff") && n - 1 >= 0 && "" === t1[n - 1];)s = t1[--n];
                return n;
            }
            function ND(t1, i) {
                for(var n = i, s = i, _$r = t1[s]; s < t1.length;)if ("" === _$r && (n++, (_$r = t1[++s]) >= "\ud800" && _$r <= "\udbff" && (n++, _$r = t1[++s])), _$r >= "\ud800" && _$r <= "\udbff") n++, _$r = t1[++s];
                else {
                    if (!(_$r >= "\udc00" && _$r <= "\udfff") || (_$r = t1[++s], !(s < t1.length && "" === t1[s]))) break;
                    n++, _$r = t1[s];
                }
                return n;
            }
            function PD(t1, i, n) {
                var s = CD(t1, i);
                s < i && (s = ND(t1, i) + 1);
                var _$r = n;
                if (void 0 !== n) {
                    _$r = ND(t1, n = Math.max(0, n - 1));
                    var h = CD(t1, n);
                    h < s || h === s && i > s ? _$r = s : _$r += 1;
                }
                return t1.substring(s, _$r);
            }
            function DD(t1, i, n, s) {
                var _$r = [];
                if (0 === t1.length || n < 0) return _$r.push(""), _$r;
                for(var h = t1; i > n && h.length > 1;){
                    for(var e = h.length * (n / i) | 0, u = PD(h, e), o = i - s(u), f = u, _$c = 0, a = 0; o > n && a++ < 100;)e *= n / o, o = i - s(u = PD(h, e |= 0));
                    for(a = 0; u && o <= n && a++ < 100;){
                        var v = _D.exec(u);
                        f = u, o = i - s(u = PD(h, e += _$c = v ? v[0].length : 1));
                    }
                    0 == (e -= _$c) ? (e = 1, f = PD(h, 1)) : 1 === e && h[0] >= "\ud800" && h[0] <= "\udbff" && (e = 2, f = PD(h, 2));
                    var l = PD(h, 0, e), _$d = void 0;
                    mD.test(f || u) && (0 == (e -= (_$d = kD.exec(l)) ? _$d[0].length : 0) && (e = 1), f = PD(h, e), l = PD(h, 0, e)), ED.test(f) && (_$d = AD.exec(l)) && l !== _$d[0] && (f = PD(h, e -= _$d[0].length), l = PD(h, 0, e)), (0 === _$r.length || (l = l.trim()).length > 0) && _$r.push(l), i = s(h = f || u);
                }
                return (0 === _$r.length || (h = h.trim()).length > 0) && _$r.push(h), _$r;
            }
            var LD, BD = S.document, FD = null, UD = -1, xD = "BES bswy:->@123", jD = Object.create(null), GD = [], VD = function VD() {
                if (void 0 === LD) if ("FontFace" in S) {
                    var _$t = /Gecko.*Firefox\/(\d+)/.exec(S.navigator.userAgent), i = /OS X.*Version\/10\..*Safari/.exec(S.navigator.userAgent) && /Apple/.exec(S.navigator.vendor);
                    LD = _$t ? parseInt(_$t[1], 10) > 42 : !i;
                } else LD = !1;
                return LD;
            };
            function WD() {
                for(var _$t = !0, i = Date.now(), n = GD.length - 1; n >= 0; n--){
                    var s = GD[n], _$r = s.fontFamilyName;
                    if (i - s.startTime > 3e3) nt(4933, _$r), s.onComplete(null, _$r), GD.splice(n, 1);
                    else {
                        var h = s.refWidth, e = "40px " + _$r;
                        FD.font = e, h !== OD(FD, xD, e) ? (GD.splice(n, 1), s.onComplete(null, _$r)) : _$t = !1;
                    }
                }
                _$t && (clearInterval(UD), UD = -1);
            }
            function zD(t1, i, n) {
                var s = $D(t1);
                if (jD[s]) n(null, s);
                else {
                    if (!FD) {
                        var _$r = BD.createElement("canvas");
                        _$r.width = 100, _$r.height = 100, FD = _$r.getContext("2d");
                    }
                    var h = "40px " + s, e = BD.createElement("style");
                    e.type = "text/css";
                    var u = "";
                    Number.isNaN(s) ? u += "@font-face { font-family:" + s + "; src:" : u += '@font-face { font-family:"' + s + '"; src:', e.textContent = (u += 'url("' + t1 + '");') + "}", BD.body.appendChild(e);
                    var o, a, v, _$d = BD.createElement("div"), w = _$d.style;
                    if (w.fontFamily = s, _$d.innerHTML = ".", w.position = "absolute", w.left = "-100px", w.top = "-100px", BD.body.appendChild(_$d), VD()) o = Date.now(), a = new Promise(function(t1, i) {
                        !function n() {
                            Date.now() - o >= 3e3 ? i() : BD.fonts.load("40px " + s).then(function(i) {
                                i.length >= 1 ? t1() : setTimeout(n, 100);
                            }, function() {
                                i();
                            });
                        }();
                    }), v = null, Promise.race([
                        new Promise(function(t1, i) {
                            v = setTimeout(i, 3e3);
                        }),
                        a
                    ]).then(function() {
                        v && (clearTimeout(v), v = null), n(null, s);
                    }, function() {
                        nt(4933, s), n(null, s);
                    });
                    else {
                        var g = {
                            fontFamilyName: s,
                            refWidth: OD(FD, xD, h),
                            onComplete: n,
                            startTime: Date.now()
                        };
                        GD.push(g), -1 === UD && (UD = setInterval(WD, 100));
                    }
                    jD[s] = e;
                }
            }
            function $D(t1) {
                var i = t1.lastIndexOf(".ttf");
                if (-1 === i) return t1;
                var n, s = t1.lastIndexOf("/");
                return -1 !== (n = -1 === s ? t1.substring(0, i) + "_LABEL" : t1.substring(s + 1, i) + "_LABEL").indexOf(" ") && (n = '"' + n + '"'), n;
            }
            function XD(t1, i, n, s) {
                var _$r = new cD;
                _$r._nativeUrl = t1, _$r._nativeAsset = i, s(null, _$r);
            }
            $b.register({
                ".font": zD,
                ".eot": zD,
                ".ttf": zD,
                ".woff": zD,
                ".svg": zD,
                ".ttc": zD
            }), hk.register({
                ".font": XD,
                ".eot": XD,
                ".ttf": XD,
                ".woff": XD,
                ".svg": XD,
                ".ttc": XD
            });
            var qD, YD, JD, QD, ZD, tL, iL, nL, sL = /^(click)(\s)*=|(param)(\s)*=/, rL = /(\s)*src(\s)*=|(\s)*height(\s)*=|(\s)*width(\s)*=|(\s)*align(\s)*=|(\s)*offset(\s)*=|(\s)*click(\s)*=|(\s)*param(\s)*=/, hL = (t1("t", function() {
                function t1() {
                    this.Ep = [], this.Tp = [], this.Sp = [], this.Ep.push([
                        /&lt;/g,
                        "<"
                    ]), this.Ep.push([
                        /&gt;/g,
                        ">"
                    ]), this.Ep.push([
                        /&amp;/g,
                        "&"
                    ]), this.Ep.push([
                        /&quot;/g,
                        '"'
                    ]), this.Ep.push([
                        /&apos;/g,
                        "'"
                    ]);
                }
                var i = t1.prototype;
                return i.parse = function(t1) {
                    this.Sp.length = 0, this.Tp.length = 0;
                    for(var i = 0, n = t1.length; i < n;){
                        var s = t1.indexOf(">", i), _$r = -1;
                        if (s >= 0 && (_$r = t1.lastIndexOf("<", s)) < i - 1 && (_$r = t1.indexOf("<", s + 1), s = t1.indexOf(">", _$r + 1)), _$r < 0) this.Tp.pop(), this.Op(t1.substring(i)), i = n;
                        else {
                            var h = t1.substring(i, _$r), e = t1.substring(_$r + 1, s);
                            "" === e && (h = t1.substring(i, s + 1)), this.Op(h), -1 === s ? s = _$r : "/" === t1.charAt(_$r + 1) ? this.Tp.pop() : this.Ip(e), i = s + 1;
                        }
                    }
                    return this.Sp;
                }, i.Rp = function(t1) {
                    t1 = t1.trim();
                    var i = {}, n = /^(color|size)(\s)*=/.exec(t1), s = "", _$r = 0, h = "";
                    if (n) {
                        if (s = n[0], "" === (t1 = t1.substring(s.length).trim())) return i;
                        switch(_$r = t1.indexOf(" "), s[0]){
                            case "c":
                                i.color = _$r > -1 ? t1.substring(0, _$r).trim() : t1;
                                break;
                            case "s":
                                i.size = parseInt(t1);
                        }
                        return _$r > -1 && (h = t1.substring(_$r + 1).trim(), i.event = this.Mp(h)), i;
                    }
                    if ((n = /^(br(\s)*\/)/.exec(t1)) && n[0].length > 0 && (s = n[0].trim()).startsWith("br") && "/" === s[s.length - 1]) return i.isNewLine = !0, this.Sp.push({
                        text: "",
                        style: {
                            isNewLine: !0
                        }
                    }), i;
                    var e = "", u = -1;
                    if ((n = /^(img(\s)*src(\s)*=[^>]+\/)/.exec(t1)) && n[0].length > 0 && (s = n[0].trim()).startsWith("img") && "/" === s[s.length - 1]) {
                        n = rL.exec(t1);
                        for(var f = !1; n;){
                            var _$c = (s = (t1 = t1.substring(t1.indexOf(n[0]))).substring(0, n[0].length)).length;
                            if (s = (s = s.replace(/[^a-zA-Z]/g, "").trim()).toLowerCase(), e = t1.substring(_$c).trim(), u = "src" === s ? this.Cp(e) : -1, o = (_$r = e.indexOf(" ", u + 1 >= e.length ? -1 : u + 1)) > -1 ? e.substring(0, _$r) : e, t1 = e.substring(_$r).trim(), o.endsWith("/") && (o = o.slice(0, -1)), "src" === s) {
                                switch(o.charCodeAt(0)){
                                    case 34:
                                    case 39:
                                        f = !0, o = o.slice(1, -1);
                                }
                                i.isImage = !0, i.src = o;
                            } else if ("height" === s) i.imageHeight = parseInt(o);
                            else if ("width" === s) i.imageWidth = parseInt(o);
                            else if ("align" === s) {
                                switch(o.charCodeAt(0)){
                                    case 34:
                                    case 39:
                                        o = o.slice(1, -1);
                                }
                                i.imageAlign = o.toLowerCase();
                            } else "offset" === s ? i.imageOffset = o : "click" === s && (i.event = this.Mp(s + "=" + o));
                            i.event && "param" === s && (i.event[s] = o.replace(/^"|"$/g, "")), n = rL.exec(t1);
                        }
                        return f && i.isImage && this.Sp.push({
                            text: "",
                            style: i
                        }), {};
                    }
                    if (n = /^(outline(\s)*[^>]*)/.exec(t1)) {
                        var a = {
                            color: "#ffffff",
                            width: 1
                        };
                        if (t1 = n[0].substring(7).trim()) {
                            var o, v, l = /(\s)*color(\s)*=|(\s)*width(\s)*=|(\s)*click(\s)*=|(\s)*param(\s)*=/;
                            for(n = l.exec(t1); n;)s = (t1 = t1.substring(t1.indexOf(n[0]))).substring(0, n[0].length), v = (_$r = (e = t1.substring(s.length).trim()).indexOf(" ")) > -1 ? e.substring(0, _$r) : e, s = (s = s.replace(/[^a-zA-Z]/g, "").trim()).toLowerCase(), t1 = e.substring(_$r).trim(), "click" === s ? i.event = this.Mp(s + "=" + v) : "color" === s ? a.color = v : "width" === s && (a.width = parseInt(v)), i.event && "param" === s && (i.event[s] = v.replace(/^"|"$/g, "")), n = l.exec(t1);
                        }
                        i.outline = a;
                    }
                    if ((n = /^(on|u|b|i)(\s)*/.exec(t1)) && n[0].length > 0) {
                        switch(s = n[0], t1 = t1.substring(s.length).trim(), s[0]){
                            case "u":
                                i.underline = !0;
                                break;
                            case "i":
                                i.italic = !0;
                                break;
                            case "b":
                                i.bold = !0;
                        }
                        if ("" === t1) return i;
                        i.event = this.Mp(t1);
                    }
                    return i;
                }, i.Cp = function(t1) {
                    var i = -1, n = -1, s = t1.indexOf("'"), _$r = t1.indexOf('"');
                    return s > -1 && (s < _$r || -1 === _$r) ? (i = s, n = t1.indexOf("'", i + 1 >= t1.length ? -1 : i + 1)) : _$r > -1 && (_$r < s || -1 === s) && (i = _$r, n = t1.indexOf('"', i + 1 >= t1.length ? -1 : i + 1)), n;
                }, i.Mp = function(t1) {
                    for(var i = {}, n = 0, s = !1, _$r = sL.exec(t1); _$r;){
                        var h = _$r[0], e = "";
                        if (s = !1, '"' === (t1 = t1.substring(h.length).trim()).charAt(0)) (n = t1.indexOf('"', 1)) > -1 && (e = t1.substring(1, n).trim(), s = !0), n++;
                        else if ("'" === t1.charAt(0)) (n = t1.indexOf("'", 1)) > -1 && (e = t1.substring(1, n).trim(), s = !0), n++;
                        else {
                            var u = /(\S)+/.exec(t1);
                            n = (e = u ? u[0] : "").length;
                        }
                        s && (i[h = h.substring(0, h.length - 1).trim()] = e), t1 = t1.substring(n).trim(), _$r = sL.exec(t1);
                    }
                    return i;
                }, i.Ip = function(t1) {
                    var i = this.Rp(t1);
                    if (0 === this.Tp.length) this.Tp.push(i);
                    else {
                        if (i.isNewLine || i.isImage) return;
                        var n = this.Tp[this.Tp.length - 1];
                        for(var s in n)i[s] || (i[s] = n[s]);
                        this.Tp.push(i);
                    }
                }, i.Op = function(t1) {
                    0 !== t1.length && (t1 = this.Np(t1), this.Tp.length > 0 ? this.Sp.push({
                        text: t1,
                        style: this.Tp[this.Tp.length - 1]
                    }) : this.Sp.push({
                        text: t1
                    }));
                }, i.Np = function(t1) {
                    for(var i, n = d(this.Ep); !(i = n()).done;){
                        var s = i.value, _$r = s[0], h = s[1];
                        t1 = t1.replace(_$r, h);
                    }
                    return t1;
                }, t1;
            }()), function hL() {
                this.u = 0, this.v = 0, this.w = 0, this.h = 0, this.offsetX = 0, this.offsetY = 0, this.valid = !1, this.xAdvance = 0;
            }), eL = function() {
                function t1(t1) {
                    this.letterDefinitions = {}, this._texture = null, this.texture = t1;
                }
                var i = t1.prototype;
                return i.addLetterDefinitions = function(t1, i) {
                    this.letterDefinitions[t1] = i;
                }, i.cloneLetterDefinition = function() {
                    var _$t = {};
                    for(var i in this.letterDefinitions){
                        var n = new hL;
                        Ft(n, this.letterDefinitions[i]), _$t[i] = n;
                    }
                    return _$t;
                }, i.getTexture = function() {
                    return this._texture;
                }, i.getLetter = function(t1) {
                    return this.letterDefinitions[t1];
                }, i.getLetterDefinitionForChar = function(t1) {
                    var i = MD(t1, 0), n = null;
                    return Object.prototype.hasOwnProperty.call(this.letterDefinitions, i) && (n = this.letterDefinitions[i]), n;
                }, i.clear = function() {
                    this.letterDefinitions = {};
                }, s(t1, [
                    {
                        key: "texture",
                        get: function get() {
                            return this._texture;
                        },
                        set: function set(t1) {
                            var i = this._texture;
                            i !== t1 && (i && (i.decRef(!1), i.refCount <= 0 && i.destroy()), t1 && t1.addRef(), this._texture = t1);
                        }
                    }
                ]), t1;
            }(), uL = t1("B", (qD = go("cc.BitmapFont"), YD = Zo(sD), qD((QD = ho((JD = function(t1) {
                function i() {
                    var _$i;
                    return (_$i = t1.call(this) || this).fntDataStr = QD && QD(), _$i.spriteFrame = ZD && ZD(), _$i.fontSize = tL && tL(), _$i.fntConfig = iL && iL(), _$i;
                }
                return h(i, t1), i.prototype.onLoaded = function() {
                    var _$t = this.spriteFrame;
                    !this.fontDefDictionary && _$t && (this.fontDefDictionary = new eL(_$t.texture));
                    var _$i = this.fntConfig;
                    if (_$i) {
                        var n = _$i.fontDefDictionary;
                        for(var s in n){
                            var _$r = n[s], _$h = new hL, e = _$r.rect;
                            _$h.offsetX = _$r.xOffset, _$h.offsetY = _$r.yOffset, _$h.w = e.width, _$h.h = e.height, _$h.u = e.x, _$h.v = e.y, _$h.valid = !0, _$h.xAdvance = _$r.xAdvance, this.fontDefDictionary.addLetterDefinitions(s, _$h);
                        }
                    } else nt(16376);
                }, i;
            }(fD)).prototype, "fntDataStr", [
                Ro
            ], function() {
                return "";
            }), ZD = ho(JD.prototype, "spriteFrame", [
                YD
            ], function() {
                return null;
            }), tL = ho(JD.prototype, "fontSize", [
                Ro
            ], function() {
                return -1;
            }), iL = ho(JD.prototype, "fntConfig", [
                Ro
            ], function() {
                return null;
            }), JD)) || JD));
            A.BitmapFont = uL, A.LabelAtlas = t1("L", go("cc.LabelAtlas")(nL = function(t1) {
                function i() {
                    return t1.apply(this, arguments) || this;
                }
                return h(i, t1), i;
            }(uL)) || nL);
            var cL = function() {
                function t1() {
                    this.Pp = [];
                }
                t1.Dp = function() {
                    return oL || (oL = new t1), oL;
                };
                var i = t1.prototype;
                return i.wi = function() {
                    var _$t = this.Pp.pop();
                    if (!_$t) {
                        var i = S.document.createElement("canvas"), n = i.getContext("2d");
                        _$t = {
                            canvas: i,
                            context: n
                        };
                    }
                    return _$t;
                }, i.pi = function(t1) {
                    this.Pp.length >= Ti.MAX_LABEL_CANVAS_POOL_SIZE || this.Pp.push(t1);
                }, t1;
            }(), aL = Yr.WHITE.clone(), vL = "rgba(255, 255, 255, " + (1 / 255).toFixed(3) + ")", lL = wD(), dL = function() {
                function t1(t1, i) {
                    this.image = null, this.data = null, this.canvas = null, this.context = null, this.width = 0, this.height = 0, this.offsetY = 0, this.char = t1, this.labelInfo = i, this.hash = "" + MD(t1, 0) + i.hash;
                }
                var i = t1.prototype;
                return i.updateRenderData = function() {
                    this.Lp(), this.Bp();
                }, i.destroy = function() {
                    this.image = null, cL.Dp().pi(this.data), this.data = null;
                }, i.Lp = function() {
                    if (this.data = cL.Dp().wi(), this.canvas = this.data.canvas, this.context = this.data.context, this.context) {
                        var _$t = this.labelInfo.fontScale;
                        this.context.font = this.labelInfo.fontDesc;
                        var i = OD(this.context, this.char, this.labelInfo.fontDesc), n = 2 * this.labelInfo.margin + 2;
                        this.width = parseFloat(i.toFixed(2)) * _$t + n, this.height = (1 + vD) * this.labelInfo.fontSize * _$t + n, this.offsetY = -this.labelInfo.fontSize * vD * _$t / 2;
                    }
                    this.canvas.width !== this.width && (this.canvas.width = this.width), this.canvas.height !== this.height && (this.canvas.height = this.height), this.image || (this.image = new mg), this.image.reset(this.canvas);
                }, i.Bp = function() {
                    if (this.context && this.canvas) {
                        var _$t = this.context, i = this.labelInfo, n = this.canvas.width, s = this.canvas.height, _$r = i.fontScale;
                        _$t.textAlign = "center", _$t.textBaseline = "alphabetic", _$t.clearRect(0, 0, n, s), _$t.fillStyle = vL, _$t.fillRect(0, 0, n, s), _$t.font = i.fontDesc.replace(/(\d+)(\.\d+)?(px|em|rem|pt)/g, function(t1, i, n, s) {
                            return (i * _$r + (+n || 0) * _$r).toString() + s;
                        });
                        var h = i.fontSize * _$r, e = n / 2, u = s / 2 + h * dD + h * lL, o = i.color;
                        if (_$t.lineJoin = "round", _$t.fillStyle = "rgba(" + o.r + ", " + o.g + ", " + o.b + ", 1)", i.isOutlined) {
                            var f = i.out || aL;
                            _$t.strokeStyle = "rgba(" + f.r + ", " + f.g + ", " + f.b + ", " + f.a / 255 + ")", _$t.lineWidth = 2 * i.margin * _$r, _$t.strokeText(this.char, e, u);
                        }
                        _$t.fillText(this.char, e, u);
                    }
                }, t1;
            }(), wL = function(t1) {
                function i() {
                    return t1.apply(this, arguments) || this;
                }
                h(i, t1);
                var n = i.prototype;
                return n.initWithSize = function(t1, i, n) {
                    void 0 === n && (n = 35), this.reset({
                        width: t1,
                        height: i,
                        format: n
                    });
                }, n.drawTextureAt = function(t1, i, n) {
                    var s = this.getGFXTexture();
                    if (t1 && s) {
                        var _$r = this._getGFXDevice();
                        if (_$r) {
                            var _$h = new Fl;
                            _$h.texOffset.x = i, _$h.texOffset.y = n, _$h.texExtent.width = t1.width, _$h.texExtent.height = t1.height, _$r.copyTexImagesToTexture([
                                t1.data
                            ], s, [
                                _$h
                            ]);
                        } else nt(16363);
                    }
                }, i;
            }(ay), gL = function() {
                function t1(t1, i) {
                    this.Ph = 0, this.Dh = 0, this.Lh = 0, this.Qn = 0, this.Zn = 0, this.Fp = 0, this.Up = !1;
                    var n = new wL;
                    n.initWithSize(t1, i), this.fontDefDictionary = new eL(n), this.Fp = 1, this.Qn = t1, this.Zn = i, PN.on("director_before_scene_launch", this.beforeSceneLoad, this);
                }
                var i = t1.prototype;
                return i.insertLetterTexture = function(t1) {
                    var i = t1.image, n = PN.root.device;
                    if (!i || !this.fontDefDictionary || !n) return null;
                    var _$s = i.width, _$r = i.height;
                    if (this.Ph + _$s + 0 > this.Qn && (this.Ph = 0, this.Dh = this.Lh), this.Dh + _$r > this.Lh && (this.Lh = this.Dh + _$r + 0), this.Lh > this.Zn) return nt(12100), null;
                    if (!this.fontDefDictionary.texture) return null;
                    this.fontDefDictionary.texture.drawTextureAt(i, this.Ph, this.Dh), this.Up = !0;
                    var h = new hL;
                    return h.u = this.Ph + this.Fp, h.v = this.Dh + this.Fp, h.valid = !0, h.w = t1.width - 2, h.h = t1.height - 2, h.xAdvance = h.w, h.offsetY = t1.offsetY, this.Ph += _$s + 0, this.fontDefDictionary.addLetterDefinitions(t1.hash, h), h;
                }, i.update = function() {
                    this.Up && (this.Up = !1);
                }, i.reset = function() {
                    this.Ph = 0, this.Dh = 0, this.Lh = 0, this.fontDefDictionary.clear();
                }, i.destroy = function() {
                    this.reset();
                    var _$t = this.fontDefDictionary;
                    _$t && _$t.texture && (_$t.texture = null);
                }, i.getTexture = function() {
                    return this.fontDefDictionary.getTexture();
                }, i.beforeSceneLoad = function() {
                    this.clearAllCache();
                }, i.clearAllCache = function() {
                    this.destroy();
                    var _$t = new wL;
                    _$t.initWithSize(this.Qn, this.Zn), this.fontDefDictionary.texture = _$t;
                }, i.getLetter = function(t1) {
                    return this.fontDefDictionary.letterDefinitions[t1];
                }, i.getLetterDefinitionForChar = function(t1, i) {
                    var n = MD(t1, 0) + i.hash, _$s = this.fontDefDictionary.letterDefinitions[n];
                    if (!_$s) {
                        var _$r = new dL(t1, i);
                        _$r.updateRenderData(), _$s = this.insertLetterTexture(_$r), _$r.destroy();
                    }
                    return _$s;
                }, s(t1, [
                    {
                        key: "width",
                        get: function get() {
                            return this.Qn;
                        }
                    },
                    {
                        key: "height",
                        get: function get() {
                            return this.Zn;
                        }
                    }
                ]), t1;
            }(), pL = {
                fontAtlas: null,
                fontSize: 0,
                lineHeight: 0,
                hAlign: 0,
                vAlign: 0,
                hash: "",
                fontFamily: "",
                fontDesc: "Arial",
                color: Yr.WHITE.clone(),
                isOutlined: !1,
                out: Yr.WHITE.clone(),
                margin: 0,
                fontScale: 1
            };
            function yL(t1) {
                var i = t1.color.toHEX(), n = "";
                return t1.isOutlined && t1.margin > 0 && (n = n + t1.margin + t1.out.toHEX()), "" + t1.fontSize + t1.fontFamily + i + n;
            }
            var _L = "a_position", mL = "a_color", bL = "a_texCoord", kL = "a_color2", AL = [
                new ud(_L, 32)
            ], EL = [
                new ud(_L, 32),
                new ud(mL, 44)
            ], TL = [
                new ud(_L, 32),
                new ud(bL, 21),
                new ud(mL, 44)
            ], SL = [
                new ud(_L, 32),
                new ud(bL, 21),
                new ud(mL, 35, !0)
            ], OL = [
                new ud(_L, 32),
                new ud(bL, 21),
                new ud(mL, 44),
                new ud(kL, 44)
            ], IL = [
                new ud(_L, 32),
                new ud(bL, 21),
                new ud(mL, 35, !0),
                new ud(kL, 35, !0)
            ];
            function RL(t1) {
                for(var i = 0, n = 0; n < t1.length; n++)i += Fd[t1[n].format].count;
                return i;
            }
            function ML(t1) {
                for(var i = 0, n = 0; n < t1.length; n++)i += Fd[t1[n].format].size;
                return i;
            }
            A.internal.vfmtPosUvColor = TL, A.internal.vfmtPosUvTwoColor = OL, A.internal.vfmtPosUvColor4B = SL, A.internal.vfmtPosUvTwoColor4B = IL;
            var CL = t1("M", function() {
                var _$t = i.prototype;
                function i() {
                    this._byteOffset = 0, this._vertexOffset = 0, this._indexOffset = 0, this._dirty = !1, this._floatsPerVertex = 0, this._vData = null, this._iData = null, this.xp = 0, this.jp = 0, this.Gp = 0, this.ts = null, this.Hp = [], this.fu = null, this.Vp = 0;
                }
                return _$t.initSharedBuffer = function() {}, _$t.syncSharedBufferToNative = function() {}, _$t.initialize = function(t1, i, n, s) {
                    this.jp = n, this.Gp = s, this.ts = i, this.floatsPerVertex = ML(i) >> 2, this.jp, this._floatsPerVertex, ot(9005), this.vData && this.iData || (this.vData = new Float32Array(this.jp), this.iData = new Uint16Array(this.Gp)), this.Hp.push(this.Wp(t1));
                }, _$t.reset = function() {
                    this.Vp = 0, this.dirty = !1;
                }, _$t.destroy = function() {
                    this.reset(), this.ts = null, this.fu = null, this.vData = null, this.iData = null;
                    for(var _$t = 0; _$t < this.Hp.length; ++_$t){
                        var _$i = this.Hp[_$t], n = _$i.vertexBuffers[0];
                        n && n.destroy();
                        var _$s = _$i.indexBuffer;
                        _$s && _$s.destroy(), _$i.ia.destroy();
                    }
                    this.Hp.length = 0;
                }, _$t.setDirty = function() {
                    this.dirty = !0;
                }, _$t.request = function() {
                    return nt(9002), !1;
                }, _$t.requireFreeIA = function(t1) {
                    return this.Hp.length <= this.Vp && this.Hp.push(this.Wp(t1)), this.Hp[this.Vp++].ia;
                }, _$t.recycleIA = function(t1) {
                    for(var _$i = this.Hp, n = 0; n < this.Vp; ++n)if (t1 === _$i[n].ia) {
                        var _$s = _$i[n];
                        return _$i[n] = _$i[--this.Vp], void (_$i[this.Vp] = _$s);
                    }
                }, _$t.checkCapacity = function(t1, i) {
                    var n = (this.vertexOffset + t1) * this._floatsPerVertex, _$s = this.indexOffset + i;
                    return !(n > this.jp || _$s > this.Gp);
                }, _$t.uploadBuffers = function() {
                    if (0 !== this.byteOffset && this._dirty) {
                        var _$t = _e.Yt, _$i = _$t ? this.Vp : 1;
                        if (_$t && _$i / this.Hp.length < .5) {
                            for(var n = _$i / .5, _$s = this.Hp.length - 1; _$s >= n; _$s--){
                                var _$r = this.Hp[_$s];
                                _$r.vertexBuffers[0] && _$r.vertexBuffers[0].destroy(), _$r.indexBuffer && _$r.indexBuffer.destroy(), _$r.ia.destroy();
                            }
                            this.Hp.length = n;
                        }
                        for(var h = this.byteOffset, e = this.indexOffset, u = 0; u < _$i; ++u){
                            var o = this.Hp[u], f = new Float32Array(this.vData.buffer, 0, h >> 2), _$c = new Uint16Array(this.iData.buffer, 0, e), a = o.vertexBuffers[0];
                            h > a.size && a.resize(h), a.update(f), 2 * e > o.indexBuffer.size && o.indexBuffer.resize(2 * e), o.indexBuffer.update(_$c);
                        }
                        this.dirty = !1;
                    }
                }, _$t.Wp = function(t1) {
                    var _$i, n, _$s;
                    if (_e.Yt || !this.Hp[0]) {
                        var _$r = this.xp = 4 * this._floatsPerVertex, h = t1.createBuffer(new Wl(10, 3, _$r, _$r));
                        _$s = t1.createBuffer(new Wl(6, 3, 2, 2)), n = [
                            h
                        ], this.fu = new fd(this.ts, n, _$s), _$i = t1.createInputAssembler(this.fu);
                    } else _$i = t1.createInputAssembler(this.fu), n = this.fu.vertexBuffers, _$s = this.fu.indexBuffer;
                    return {
                        ia: _$i,
                        vertexBuffers: n,
                        indexBuffer: _$s
                    };
                }, s(i, [
                    {
                        key: "attributes",
                        get: function get() {
                            return this.ts;
                        }
                    },
                    {
                        key: "vertexFormatBytes",
                        get: function get() {
                            return this.xp;
                        }
                    },
                    {
                        key: "byteOffset",
                        get: function get() {
                            return this._byteOffset;
                        },
                        set: function set(t1) {
                            this._byteOffset = t1;
                        }
                    },
                    {
                        key: "vertexOffset",
                        get: function get() {
                            return this._vertexOffset;
                        },
                        set: function set(t1) {
                            this._vertexOffset = t1;
                        }
                    },
                    {
                        key: "indexOffset",
                        get: function get() {
                            return this._indexOffset;
                        },
                        set: function set(t1) {
                            this._indexOffset = t1;
                        }
                    },
                    {
                        key: "dirty",
                        get: function get() {
                            return this._dirty;
                        },
                        set: function set(t1) {
                            this._dirty = t1;
                        }
                    },
                    {
                        key: "floatsPerVertex",
                        get: function get() {
                            return this._floatsPerVertex;
                        },
                        set: function set(t1) {
                            this._floatsPerVertex = t1;
                        }
                    },
                    {
                        key: "vData",
                        get: function get() {
                            return this._vData;
                        },
                        set: function set(t1) {
                            this._vData = t1;
                        }
                    },
                    {
                        key: "iData",
                        get: function get() {
                            return this._iData;
                        },
                        set: function set(t1) {
                            this._iData = t1;
                        }
                    },
                    {
                        key: "nativeObj",
                        get: function get() {
                            return this._nativeObj;
                        }
                    },
                    {
                        key: "sharedBuffer",
                        get: function get() {
                            return this._sharedBuffer;
                        }
                    }
                ]), i;
            }()), NL = function() {
                function t1(t1, i) {
                    this._buffers = [], this._device = t1, this._attributes = i, this._floatsPerVertex = ML(i) >> 2, this._vertexFormatBytes = 4 * this._floatsPerVertex;
                }
                var i = t1.prototype;
                return i.initialize = function() {}, i.reset = function() {}, i.request = function() {}, i.appendBuffers = function() {}, i.uploadBuffers = function() {}, i.destroy = function() {
                    this._attributes.length = 0;
                }, s(t1, [
                    {
                        key: "attributes",
                        get: function get() {
                            return this._attributes;
                        }
                    },
                    {
                        key: "vertexFormatBytes",
                        get: function get() {
                            return this._vertexFormatBytes;
                        }
                    },
                    {
                        key: "floatsPerVertex",
                        get: function get() {
                            return this._floatsPerVertex;
                        }
                    }
                ]), t1;
            }(), PL = new Fh(function() {
                return {
                    offset: 0,
                    length: 0
                };
            }, 32), DL = function() {
                function t1(t1, i, n, s, r, h) {
                    this.vertexAccessor = t1, this.bufferId = i, this.meshBuffer = n, this.vertexOffset = s, this.vb = r, this.indexCount = h, t1.getMeshBuffer(i);
                }
                return t1.prototype.setIndexBuffer = function() {}, s(t1, [
                    {
                        key: "ib",
                        get: function get() {
                            return this.zp;
                        }
                    }
                ]), t1;
            }(), LL = function(t1) {
                function i(n, s, r, h) {
                    var e;
                    return (e = t1.call(this, n, s) || this).$p = [], e.Xp = 0, e.qp = 0, e.Ar = 0, e.Xp = r || Math.floor(1024 * Ti.BATCHER2D_MEM_INCREMENT / e._vertexFormatBytes), e.qp = h || e.Xp * i.IB_SCALE, e.Ar = i.generateID(), e.Yp(), e;
                }
                h(i, t1);
                var n = i.prototype;
                return n.destroy = function() {
                    for(var _$i = 0; _$i < this._buffers.length; ++_$i){
                        this._buffers[_$i].destroy();
                        for(var n = this.$p[_$i], _$s = 0; _$s < n.length; ++_$s)PL.free(n[_$s]);
                    }
                    this._buffers.length = 0, this.$p.length = 0, t1.prototype.destroy.call(this);
                }, n.reset = function() {
                    for(var _$t = 0; _$t < this._buffers.length; ++_$t){
                        var _$i = this._buffers[_$t];
                        _$i.indexOffset = 0, _$i.reset();
                    }
                }, n.getVertexBuffer = function(t1) {
                    return this._buffers[t1].vData;
                }, n.getIndexBuffer = function(t1) {
                    return this._buffers[t1].iData;
                }, n.getMeshBuffer = function(t1) {
                    return this._buffers[t1];
                }, n.uploadBuffers = function() {
                    for(var _$t = 0; _$t < this._buffers.length; ++_$t){
                        var _$i = this.$p[_$t][0], n = this._buffers[_$t];
                        (!_$i || _$i.length < n.vData.byteLength) && n.uploadBuffers();
                    }
                }, n.appendIndices = function(t1, i) {
                    var n = this._buffers[t1];
                    if (i.length) {
                        var _$s = n.indexOffset + i.length;
                        if (n.iData.length < _$s) {
                            var _$h = new Uint16Array(Math.floor(1.25 * _$s));
                            _$h.set(n.iData), n.iData = _$h;
                        }
                        n.iData.set(i, n.indexOffset), n.indexOffset += i.length;
                    }
                }, n.allocateChunk = function(t1, i) {
                    var n = t1 * this.vertexFormatBytes;
                    if (t1 > this.Xp || i > this.qp) return rt(9004, n), null;
                    for(var _$s, _$r = null, _$h = 0, e = -1, u = null, o = 0; o < this._buffers.length; ++o){
                        _$r = this._buffers[o], _$s = this.$p[o];
                        for(var f = 0; f < _$s.length; ++f)if (_$s[f].length >= n) {
                            u = _$s[f], _$h = o, e = f;
                            break;
                        }
                        if (u) break;
                    }
                    if (u || (_$h = this.Yp(), (_$r = this._buffers[_$h]) && (e = 0, u = this.$p[_$h][e])), u) {
                        var _$c = u.offset / this.vertexFormatBytes, a = new Float32Array(_$r.vData.buffer, u.offset, n >> 2).fill(0);
                        return this.Kp(_$h, e, u, n), new DL(this, _$h, _$r, _$c, a, i);
                    }
                    return null;
                }, n.recycleChunk = function(t1) {
                    var _$i = this.$p[t1.bufferId], n = this._buffers[t1.bufferId], _$s = t1.vertexOffset * this.vertexFormatBytes, _$r = t1.vb.byteLength;
                    if (0 !== _$r) {
                        for(var _$h = !1, e = 0, u = null, o = _$i[e]; o && o.offset < _$s;)u = o, o = _$i[++e];
                        if (u && 0 == _$s - (u.offset + u.length) && (u.length += _$r, _$s = u.offset, _$r = u.length, o && o.offset - (_$s + _$r) == 0 && (u.length += o.length, _$i.splice(e, 1), PL.free(o), o = null), _$h = !0), !_$h && o) {
                            if (0 == o.offset - (_$s + _$r)) o.offset = _$s, o.length += _$r;
                            else {
                                var f = PL.alloc();
                                f.offset = _$s, f.length = _$r, _$i.splice(e, 0, f);
                            }
                            _$h = !0;
                        }
                        if (_$h) _$s + _$r === n.byteOffset && (n.byteOffset = _$s);
                        else {
                            var _$c = PL.alloc();
                            _$c.offset = _$s, _$c.length = _$r, _$i.push(_$c);
                        }
                    }
                }, n.Kp = function(t1, i, n, s) {
                    var _$r = n.length - s, _$h = n.offset + s, e = this._buffers[t1];
                    e.byteOffset < _$h && (e.byteOffset = _$h), et(_$r >= 0, 9004, t1, n.offset, n.length), 0 === _$r ? (this.$p[t1].splice(i, 1), PL.free(n)) : (n.offset += s, n.length = _$r);
                }, n.Yp = function() {
                    et(this._buffers.length === this.$p.length, 9003);
                    var _$t = new CL, _$i = this.Xp * this._floatsPerVertex;
                    _$t.initialize(this._device, this._attributes, _$i, this.qp), this._buffers.push(_$t);
                    var n = PL.alloc();
                    n.offset = 0, n.length = _$t.vData.byteLength;
                    var _$s = [
                        n
                    ];
                    return this.$p.push(_$s), PN.root.batcher2D.syncMeshBuffersToNative(this.id, this._buffers), this._buffers.length - 1;
                }, i.generateID = function() {
                    return i.ID_COUNT++;
                }, s(i, [
                    {
                        key: "id",
                        get: function get() {
                            return this.Ar;
                        }
                    }
                ]), i;
            }(NL);
            LL.IB_SCALE = 4, LL.ID_COUNT = 0, function() {
                function t1() {
                    this.Jp = -1, this.Qp = -1, this.Zp = 0, this.ty = 0, this.iy = null, this.zp = null, this.ny = null, this.sy = null, this.hy = !1, this.uy = 0, this.oy = 0, this.vy = 0, this.ly = !1, this.wy = null, this.gy = null, this.py = null, this.mn = 0, this.yy = !1, this.my = null, this.ky = 0, this.Ay = null, this.Ey = null;
                }
                var i = t1.prototype;
                i.Se = function() {}, i.Ty = function() {}, i.Sy = function(t1) {
                    this.Jp = t1;
                }, i.Oy = function(t1) {
                    this.Qp = t1;
                }, i.Iy = function(t1, i) {
                    this.Qp = i, this.Jp = t1;
                }, i.Ry = function(t1) {
                    this.Zp = t1;
                }, i.My = function(t1) {
                    this.ty = t1;
                }, i.Cy = function() {}, i.Ny = function() {}, i.Py = function() {}, i.Dy = function() {}, i.Ly = function(t1) {
                    this.uy = t1;
                }, i.By = function() {}, i.Fy = function(t1) {
                    this.hy = t1;
                }, i.Uy = function(t1) {
                    this.vy = t1;
                }, i.xy = function(t1) {
                    this.ly = t1;
                }, i.jy = function() {}, i.Gy = function(t1) {
                    this.wy = t1;
                }, i.Hy = function(t1) {
                    this.gy = t1;
                }, i.Vy = function(t1) {
                    this.py = t1;
                }, i.Wy = function() {}, i.zy = function(t1) {
                    this.ky = t1;
                }, i.$y = function(t1) {
                    this.Ay = t1;
                }, i.Xy = function(t1) {
                    this.mn = t1;
                }, i.qy = function() {}, i.Yy = function() {}, s(t1, [
                    {
                        key: "nativeObj",
                        get: function get() {
                            return this.Ky;
                        }
                    },
                    {
                        key: "render2dBuffer",
                        get: function get() {
                            return this.Ey;
                        }
                    }
                ]);
            }();
            var oL, BL, UL, xL, jL, GL, HL, VL, WL, zL, $L, XL = ML(TL) >> 2, qL = t1("p", function() {
                function t1(t1) {
                    void 0 === t1 && (t1 = TL), this.chunk = null, this._renderDrawInfo = null, this._material = null, this._dataHash = 0, this._isMeshBuffer = !1, this._vc = 0, this._ic = 0, this._floatStride = 0, this._vertexFormat = TL, this._drawInfoType = 0, this._multiOwner = !1, this._batcher = null, this._floatStride = t1 === TL ? XL : ML(t1) >> 2, this._vertexFormat = t1;
                }
                var i = t1.prototype;
                return i.isValid = function() {
                    return this._ic > 0 && this.chunk.vertexAccessor;
                }, i.initRenderDrawInfo = function() {}, i.removeRenderDrawInfo = function() {}, i.Jy = function() {}, s(t1, [
                    {
                        key: "vertexCount",
                        get: function get() {
                            return this._vc;
                        }
                    },
                    {
                        key: "indexCount",
                        get: function get() {
                            return this._ic;
                        }
                    },
                    {
                        key: "stride",
                        get: function get() {
                            return this._floatStride << 2;
                        }
                    },
                    {
                        key: "floatStride",
                        get: function get() {
                            return this._floatStride;
                        }
                    },
                    {
                        key: "vertexFormat",
                        get: function get() {
                            return this._vertexFormat;
                        }
                    },
                    {
                        key: "drawInfoType",
                        get: function get() {
                            return this._drawInfoType;
                        },
                        set: function set(t1) {
                            this._drawInfoType = t1;
                        }
                    },
                    {
                        key: "renderDrawInfo",
                        get: function get() {
                            return this._renderDrawInfo;
                        }
                    },
                    {
                        key: "material",
                        get: function get() {
                            return this._material;
                        },
                        set: function set(t1) {
                            this._material = t1;
                        }
                    },
                    {
                        key: "dataHash",
                        get: function get() {
                            return this._dataHash;
                        },
                        set: function set(t1) {
                            this._dataHash = t1;
                        }
                    },
                    {
                        key: "multiOwner",
                        get: function get() {
                            return this._multiOwner;
                        },
                        set: function set(t1) {
                            this._multiOwner = t1;
                        }
                    },
                    {
                        key: "batcher",
                        get: function get() {
                            return this._batcher || (this._batcher = PN.root.batcher2D), this._batcher;
                        }
                    }
                ]), t1;
            }()), YL = t1("q", function(t1) {
                function i(i, n) {
                    var _$s;
                    return void 0 === i && (i = TL), void 0 === n && (n = null), (_$s = t1.call(this, i) || this)._vertDirty = !0, _$s._textureHash = 0, _$s.indices = null, _$s.layer = 0, _$s.nodeDirty = !0, _$s.passDirty = !0, _$s.textureDirty = !0, _$s.hashDirty = !0, _$s.L = [], _$s.Qy = null, _$s._accessor = null, _$s.vertexRow = 1, _$s.vertexCol = 1, n || (n = _$s.batcher.switchBufferAccessor(_$s._vertexFormat)), _$s._accessor = n, _$s;
                }
                h(i, t1), i.add = function(t1, n) {
                    void 0 === t1 && (t1 = TL), void 0 === n && (n = null);
                    var _$s = new i(t1, n);
                    return n || (n = PN.root.batcher2D.switchBufferAccessor(_$s._vertexFormat)), _$s._accessor = n, _$s;
                }, i.remove = function(t1) {
                    t1.clear(), t1._accessor = null;
                };
                var n = i.prototype;
                return n.resize = function(t1, i) {
                    t1 === this._vc && i === this._ic && this.chunk || (this._vc = t1, this._ic = i, this.chunk && (this._accessor.recycleChunk(this.chunk), this.chunk = null), this.chunk = this._accessor.allocateChunk(t1, i), this.updateHash());
                }, n.Jy = function() {}, n.Zy = function() {}, n.t_ = function() {}, n.resizeAndCopy = function(t1, i) {
                    if (t1 !== this._vc || i !== this._ic || !this.chunk) {
                        this._vc = t1, this._ic = i;
                        var n = this.chunk;
                        this.chunk = this._accessor.allocateChunk(t1, i), n && (this.chunk.vb.set(n.vb), this._accessor.recycleChunk(n)), this.updateHash();
                    }
                }, n.getMeshBuffer = function() {
                    return this.chunk && this._accessor ? this._accessor.getMeshBuffer(this.chunk.bufferId) : null;
                }, n.updateNode = function(t1) {
                    this.layer = t1.node.layer, this.nodeDirty = !1, this.hashDirty = !0;
                }, n.updatePass = function(t1) {
                    this.material = t1.getRenderMaterial(0), this.passDirty = !1, this.hashDirty = !0;
                }, n.updateTexture = function(t1) {
                    this.frame = t1, this.textureHash = t1.getHash(), this.textureDirty = !1, this.hashDirty = !0;
                }, n.updateHash = function() {
                    var _$t = "" + (this.chunk ? this.chunk.bufferId : -1) + this.layer + " " + this.textureHash;
                    this.dataHash = Iv(_$t, 666), this.hashDirty = !1;
                }, n.updateRenderData = function(t1, i) {
                    if (this.passDirty && (this.material = t1.getRenderMaterial(0), this.passDirty = !1, this.hashDirty = !0), this.nodeDirty) {
                        var n = t1.node.scene ? t1._getRenderScene() : null;
                        this.layer = t1.node.layer, null !== n && (this.nodeDirty = !1), this.hashDirty = !0;
                    }
                    this.textureDirty && (this.frame = i, this.textureHash = i.getHash(), this.textureDirty = !1, this.hashDirty = !0), this.hashDirty && this.updateHash();
                }, n.clear = function() {
                    this.resize(0, 0), this.L.length = 0, this.indices = null, this.vertDirty = !0, this.material = null, this.nodeDirty = !0, this.passDirty = !0, this.textureDirty = !0, this.hashDirty = !0, this.layer = 0, this.frame = null, this.textureHash = 0, this.dataHash = 0;
                }, i.createStaticVBAccessor = function(t1, i, n) {
                    return new LL(PN.root.device, t1, i, n);
                }, s(i, [
                    {
                        key: "dataLength",
                        get: function get() {
                            return this.L.length;
                        },
                        set: function set(t1) {
                            var _$i = this.L;
                            if (_$i.length !== t1) {
                                for(var n = _$i.length; n < t1; n++)_$i.push({
                                    x: 0,
                                    y: 0,
                                    z: 0,
                                    u: 0,
                                    v: 0,
                                    color: Yr.WHITE.clone()
                                });
                                _$i.length = t1;
                            }
                            this.t_();
                        }
                    },
                    {
                        key: "data",
                        get: function get() {
                            return this.L;
                        }
                    },
                    {
                        key: "vertDirty",
                        get: function get() {
                            return this._vertDirty;
                        },
                        set: function set(t1) {
                            this._vertDirty = t1;
                        }
                    },
                    {
                        key: "textureHash",
                        get: function get() {
                            return this._textureHash;
                        },
                        set: function set(t1) {
                            this._textureHash = t1;
                        }
                    },
                    {
                        key: "frame",
                        get: function get() {
                            return this.Qy;
                        },
                        set: function set(t1) {
                            this.Qy = t1;
                        }
                    },
                    {
                        key: "accessor",
                        get: function get() {
                            return this._accessor;
                        }
                    }
                ]), i;
            }(qL)), KL = t1("r", function(t1) {
                function i(i) {
                    var n;
                    return void 0 === i && (i = TL), (n = t1.call(this, i) || this)._isMeshBuffer = !0, n.vertexStart = 0, n.vertexRange = 0, n.indexStart = 0, n.indexRange = 0, n.lastFilledIndex = 0, n.lastFilledVertex = 0, n.frame = null, n.i_ = 0, n.ss = [], n.rs = null, n.Hp = null, n.fu = null, n.vData = new Float32Array(256 * n.stride), n.iData = new Uint16Array(1536), n;
                }
                h(i, t1), i.add = function(t1) {
                    void 0 === t1 && (t1 = TL);
                    var n = new i;
                    return n._floatStride = t1 === TL ? XL : ML(t1) >> 2, n._vertexFormat = t1, n;
                }, i.remove = function(t1) {
                    t1.clear();
                };
                var n = i.prototype;
                return n.request = function(t1, i) {
                    var n = this.i_ + t1 * this.stride;
                    return !!this.reserve(t1, i) && (this._vc += t1, this._ic += i, this.i_ = n, this.vertexRange = this._vc, this.indexRange = this._ic, !0);
                }, n.reserve = function(t1, i) {
                    var n = this.i_ + t1 * this.stride, _$s = this.indexCount + i;
                    if (t1 + this.vertexCount > 65535) return !1;
                    var _$r = this.vData.byteLength, _$h = this.iData.length, e = this.vData.length, u = this.iData.length;
                    if (n > _$r || _$s > _$h) {
                        for(; _$r < n || _$h < _$s;)_$r = 4 * (e *= 2), _$h = u *= 2;
                        this._reallocBuffer(e, u);
                    }
                    return !0;
                }, n.resize = function(t1, i) {
                    var n = t1 * this.stride;
                    t1 >= 0 && i >= 0 && n <= this.vData.byteLength && this.iData.length, this._vc = t1, this._ic = i, this.i_ = n, this.updateRange(0, t1, 0, i);
                }, n.updateRange = function(t1, i, n, s) {
                    i >= 0 && s >= 0 && i <= this._vc && this._ic, this.vertexStart = t1, this.indexStart = n, this.vertexRange = i, this.indexRange = s;
                }, n.requestIA = function(t1) {
                    this._initIAInfo(t1);
                    var _$i = this.Hp.add();
                    return _$i.firstIndex = this.indexStart, _$i.indexCount = this.indexRange, _$i;
                }, n.uploadBuffers = function() {
                    if (0 !== this.i_ && this.ss[0] && this.rs) {
                        var _$t = this._ic, _$i = new Float32Array(this.vData.buffer, 0, this.i_ >> 2), n = new Uint16Array(this.iData.buffer, 0, _$t), _$s = this.ss[0];
                        this.i_ > _$s.size && _$s.resize(this.i_), _$s.update(_$i);
                        var _$r = _$t << 1;
                        _$r > this.rs.size && this.rs.resize(_$r), this.rs.update(n);
                    }
                }, n.freeIAPool = function() {
                    this.Hp && this.Hp.reset();
                }, n.reset = function() {
                    this._vc = 0, this._ic = 0, this.i_ = 0, this.vertexStart = 0, this.vertexRange = 0, this.indexStart = 0, this.indexRange = 0, this.lastFilledIndex = 0, this.lastFilledVertex = 0, this.material = null, this.freeIAPool();
                }, n.clear = function() {
                    this.reset(), this.Hp && this.Hp.destroy(), this.ss[0] && (this.ss[0].destroy(), this.ss = []), this.fu = null, this.vData = new Float32Array(256 * this.stride), this.iData = new Uint16Array(1536);
                }, n._initIAInfo = function(t1) {
                    var _$i = this;
                    if (!this.fu) {
                        var n = this.stride, _$s = this.ss;
                        _$s.length || _$s.push(t1.createBuffer(new Wl(10, 1, n, n))), this.rs || (this.rs = t1.createBuffer(new Wl(6, 1, 2, 2))), this.fu = new fd(this._vertexFormat, _$s, this.rs), this.Hp = new Uh(function() {
                            return t1.createInputAssembler(_$i.fu);
                        }, 1, function(t1) {
                            t1.destroy();
                        });
                    }
                }, n._reallocBuffer = function(t1, i) {
                    var n = this.vData;
                    this.vData = new Float32Array(t1), n && this.vData.set(n, 0);
                    var _$s = this.iData;
                    this.iData = new Uint16Array(i), _$s && this.iData.set(_$s, 0);
                }, n.Jy = function() {}, n.n_ = function() {}, s(i, [
                    {
                        key: "formatByte",
                        get: function get() {
                            return this.stride;
                        },
                        set: function set() {}
                    },
                    {
                        key: "floatStride",
                        get: function get() {
                            return this._floatStride;
                        }
                    },
                    {
                        key: "vDataOffset",
                        get: function get() {
                            return this.i_ >>> 2;
                        }
                    }
                ]), i;
            }(qL)), JL = new Or, QL = new Or, ZL = new Ss, tB = new cr, iB = new cr, nB = new cr, sB = new cr(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0), rB = new sh, hB = t1("e", go("cc.UITransform")(BL = yo(110)(BL = oo(((jL = function(t1) {
                function i() {
                    var _$i;
                    return (_$i = t1.call(this) || this)._priority = 0, _$i._contentSize = UL && UL(), _$i._anchorPoint = xL && xL(), _$i;
                }
                h(i, t1);
                var n = i.prototype;
                return n.__preload = function() {
                    this.node._uiProps.uiTransformComp = this;
                }, n.onLoad = function() {
                    this.node.parent && i.s_(this.node.parent);
                }, n.onEnable = function() {
                    this.node.on("parent-changed", this._parentChanged, this), this.r_();
                }, n.onDisable = function() {
                    this.node.off("parent-changed", this._parentChanged, this);
                }, n.onDestroy = function() {
                    this.node._uiProps.uiTransformComp = null;
                }, n.setContentSize = function(t1, i) {
                    var n, _$s, _$r = this._contentSize;
                    if (void 0 === i) {
                        if (Fn(t1.width, _$r.width, Ln) && Fn(t1.height, _$r.height, Ln)) return;
                        n = t1.width, _$s = t1.height;
                    } else {
                        if (Fn(t1, _$r.width, Ln) && Fn(i, _$r.height, Ln)) return;
                        n = t1, _$s = i;
                    }
                    _$r.width = n, _$r.height = _$s, this.node.emit("size-changed"), this.r_();
                }, n.setAnchorPoint = function(t1, i) {
                    var n = this._anchorPoint;
                    if (void 0 === i) {
                        if (t1.x === n.x && t1.y === n.y) return;
                        n.x = t1.x, n.y = t1.y;
                    } else {
                        if (t1 === n.x && i === n.y) return;
                        n.x = t1, n.y = i;
                    }
                    this.node.emit("anchor-changed", this._anchorPoint), this.r_();
                }, n.isHit = function(t1) {
                    for(var _$i = this._contentSize.width, n = this._contentSize.height, _$h = this._getRenderScene().cameras, e = 0; e < _$h.length; e++){
                        var u = _$h[e];
                        if (u.visibility & this.node.layer) {
                            u.node.getWorldRT(tB);
                            var o = tB.m12, f = tB.m13, _$c = me.center;
                            if (tB.m12 = _$c.x - (tB.m00 * o + tB.m04 * f), tB.m13 = _$c.y - (tB.m01 * o + tB.m05 * f), cr.invert(tB, tB), Or.transformMat4(JL, t1, tB), this.node.getWorldMatrix(nB), cr.invert(tB, nB), !cr.strictEquals(tB, sB)) {
                                Or.transformMat4(QL, JL, tB), QL.x += this._anchorPoint.x * _$i, QL.y += this._anchorPoint.y * n;
                                var a = !1;
                                if (QL.x >= 0 && QL.y >= 0 && QL.x <= _$i && QL.y <= n && (a = this.h_(JL)), a) return !0;
                            }
                        }
                    }
                    return !1;
                }, n.hitTest = function(t1, i) {
                    void 0 === i && (i = 0);
                    for(var n = this._contentSize.width, _$s = this._contentSize.height, u = this._getRenderScene().cameras, o = 0; o < u.length; o++){
                        var f = u[o];
                        if (f.visibility & this.node.layer && (!f.window || f.window.swapchain) && f.systemWindowId === i && (Ss.set(ZL, t1.x, t1.y, 0), f.screenToWorld(ZL, ZL), Or.set(JL, ZL.x, ZL.y), this.node.getWorldMatrix(nB), cr.invert(tB, nB), !cr.strictEquals(tB, sB))) {
                            Or.transformMat4(QL, JL, tB), QL.x += this._anchorPoint.x * n, QL.y += this._anchorPoint.y * _$s;
                            var _$c = !1;
                            if (QL.x >= 0 && QL.y >= 0 && QL.x <= n && QL.y <= _$s && (_$c = this.h_(JL)), _$c) return !0;
                        }
                    }
                    return !1;
                }, n.h_ = function(t1) {
                    var _$i, n, _$s = null == (_$i = this.node) || null == (n = _$i.eventProcessor) ? void 0 : n.maskList;
                    if (_$s) for(var _$r = this.node, _$h = _$s.length, e = 0, u = 0; _$r && u < _$h; ++e, _$r = _$r.parent){
                        var o = _$s[u];
                        if (e === o.index) {
                            if (_$r !== o.comp.node) {
                                _$s.length = u;
                                break;
                            }
                            var f = o.comp;
                            if (f && f._enabled && !f.isHit(t1)) return !1;
                            u++;
                        } else if (e > o.index) {
                            _$s.length = u;
                            break;
                        }
                    }
                    return !0;
                }, n.convertToNodeSpaceAR = function(t1, i) {
                    return this.node.getWorldMatrix(nB), cr.invert(tB, nB), i || (i = new Ss), Ss.transformMat4(i, t1, tB);
                }, n.convertToWorldSpaceAR = function(t1, i) {
                    return this.node.getWorldMatrix(nB), i || (i = new Ss), Ss.transformMat4(i, t1, nB);
                }, n.getBoundingBox = function() {
                    var _$t = new sh;
                    return this._selfBoundingBox(_$t), cr.fromSRT(iB, this.node.rotation, this.node.position, this.node.scale), _$t.transformMat4(iB), _$t;
                }, n.getBoundingBoxToWorld = function() {
                    for(var _$t = new sh, n = this.node.children, _$s = 0; _$s < n.length; ++_$s){
                        var _$r = n[_$s];
                        if (_$r && _$r.active) {
                            var _$h = _$r.getComponent(i);
                            _$h && _$h.contentSize.width && _$h.contentSize.height && (_$h._selfBoundingBox(rB), rB.transformMat4(_$r.worldMatrix), 0 === _$t.width ? _$t.set(rB) : sh.union(_$t, _$t, rB));
                        }
                    }
                    return this._contentSize.width && this._contentSize.height && (this._selfBoundingBox(rB), rB.transformMat4(this.node.worldMatrix), 0 === _$t.width ? _$t.set(rB) : sh.union(_$t, _$t, rB)), _$t;
                }, n.getBoundingBoxTo = function(t1) {
                    var n = new sh, _$s = this.node.children;
                    cr.invert(tB, t1);
                    for(var _$r = 0; _$r < _$s.length; ++_$r){
                        var _$h = _$s[_$r];
                        if (_$h && _$h.active) {
                            var e = _$h.getComponent(i);
                            e && e.contentSize.width && e.contentSize.height && (e._selfBoundingBox(rB), cr.multiply(iB, _$h.worldMatrix, tB), rB.transformMat4(iB), 0 === n.width ? n.set(rB) : sh.union(n, n, rB));
                        }
                    }
                    return this._contentSize.width && this._contentSize.height && (this._selfBoundingBox(rB), cr.multiply(iB, this.node.worldMatrix, tB), rB.transformMat4(iB), 0 === n.width ? n.set(rB) : sh.union(n, n, rB)), n;
                }, n.getComputeAABB = function(t1) {
                    var _$i = this._contentSize.width, n = this._contentSize.height;
                    rB.set(-this._anchorPoint.x * _$i, -this._anchorPoint.y * n, _$i, n), rB.transformMat4(this.node.worldMatrix);
                    var _$s = rB.x + .5 * rB.width, _$r = rB.y + .5 * rB.height, _$h = this.node.worldPosition.z, e = rB.width / 2, u = rB.height / 2;
                    return null != t1 ? (Ie.set(t1, _$s, _$r, _$h, e, u, .001), t1) : new Ie(_$s, _$r, _$h, e, u, .001);
                }, n._selfBoundingBox = function(t1) {
                    var _$i = this._contentSize.width, n = this._contentSize.height;
                    return t1.set(-this._anchorPoint.x * _$i, -this._anchorPoint.y * n, _$i, n), t1;
                }, n._parentChanged = function() {
                    this.node.getComponent("cc.RenderRoot2D") || this.node.parent && i.s_(this.node.parent);
                }, n.r_ = function() {
                    var _$t = this.node._uiProps.uiComp;
                    _$t && _$t.po();
                }, i.s_ = function(t1) {
                    var n = t1.uuid;
                    i.e_.has(n) || i.e_.set(n, t1);
                }, i.u_ = function(t1) {
                    var _$i = t1.children;
                    _$i && _$i.sort(function(t1, i) {
                        var n = t1.io(), _$s = i.io(), _$r = (n ? n._priority : 0) - (_$s ? _$s._priority : 0);
                        return 0 === _$r ? t1.siblingIndex - i.siblingIndex : _$r;
                    });
                }, i.o_ = function() {
                    i.e_.forEach(function(t1) {
                        i.u_(t1), t1._updateSiblingIndex(), t1.emit("childrenSiblingOrderChanged");
                    }), i.e_.clear();
                }, i.f_ = function() {
                    i.e_.clear();
                }, s(i, [
                    {
                        key: "contentSize",
                        get: function get() {
                            return this._contentSize;
                        },
                        set: function set(t1) {
                            this._contentSize.equals(t1) || (this._contentSize.set(t1), this.node.emit("size-changed"), this.r_());
                        }
                    },
                    {
                        key: "width",
                        get: function get() {
                            return this._contentSize.width;
                        },
                        set: function set(t1) {
                            this._contentSize.width !== t1 && (this._contentSize.width = t1, this.node.emit("size-changed"), this.r_());
                        }
                    },
                    {
                        key: "height",
                        get: function get() {
                            return this._contentSize.height;
                        },
                        set: function set(t1) {
                            this.contentSize.height !== t1 && (this._contentSize.height = t1, this.node.emit("size-changed"), this.r_());
                        }
                    },
                    {
                        key: "anchorPoint",
                        get: function get() {
                            return this._anchorPoint;
                        },
                        set: function set(t1) {
                            this._anchorPoint.equals(t1) || (this._anchorPoint.set(t1), this.node.emit("anchor-changed", this._anchorPoint), this.r_());
                        }
                    },
                    {
                        key: "anchorX",
                        get: function get() {
                            return this._anchorPoint.x;
                        },
                        set: function set(t1) {
                            this._anchorPoint.x !== t1 && (this._anchorPoint.x = t1, this.node.emit("anchor-changed", this._anchorPoint), this.r_());
                        }
                    },
                    {
                        key: "anchorY",
                        get: function get() {
                            return this._anchorPoint.y;
                        },
                        set: function set(t1) {
                            this._anchorPoint.y !== t1 && (this._anchorPoint.y = t1, this.node.emit("anchor-changed", this._anchorPoint), this.r_());
                        }
                    },
                    {
                        key: "priority",
                        get: function get() {
                            return this._priority;
                        },
                        set: function set(t1) {
                            this._priority !== t1 && (this.node.getComponent("cc.RenderRoot2D") ? nt(6706) : (this._priority = t1, this.node.parent && i.s_(this.node.parent)));
                        }
                    },
                    {
                        key: "visibility",
                        get: function get() {
                            var _$t = PN.root.batcher2D.getFirstRenderCamera(this.node);
                            return _$t ? _$t.visibility : 0;
                        }
                    },
                    {
                        key: "cameraPriority",
                        get: function get() {
                            var _$t = PN.root.batcher2D.getFirstRenderCamera(this.node);
                            return _$t ? _$t.priority : 0;
                        }
                    }
                ]), i;
            }(Yg)).EventType = VA, jL.e_ = new Map, UL = ho(jL.prototype, "_contentSize", [
                Ro
            ], function() {
                return new Zr(100, 100);
            }), xL = ho(jL.prototype, "_anchorPoint", [
                Ro
            ], function() {
                return new Or(.5, .5);
            }), BL = jL)) || BL) || BL) || BL);
            PN.on("director_after_update", hB.o_), PN.on("director_before_scene_launch", hB.f_);
            var eB = {
                parent: null,
                owner: null,
                subModelIdx: 0
            }, oB = Zo, fB = t1("dl", (GL = go("cc.Renderer"), HL = oB(rA), VL = oB([
                rA
            ]), GL(WL = oo((y((zL = function(t1) {
                function i() {
                    var _$i;
                    return (_$i = t1.call(this) || this)._materials = $L && $L(), _$i._materialInstances = [], _$i;
                }
                h(i, t1);
                var n = i.prototype;
                return n.getMaterial = function(t1) {
                    return this.getSharedMaterial(t1);
                }, n.setMaterial = function(t1, i) {
                    this.setSharedMaterial(t1, i);
                }, n.getSharedMaterial = function(t1) {
                    return t1 < 0 || t1 >= this._materials.length ? null : this._materials[t1];
                }, n.setSharedMaterial = function(t1, i, n) {
                    if (void 0 === n && (n = !1), t1 && _instanceof(t1, lA) && rt(12012), n || this._materials[i] !== t1) {
                        this._materials[i] = t1;
                        var _$s = this._materialInstances[i];
                        _$s && (_$s.destroy(), this._materialInstances[i] = null), this._onMaterialModified(i, this._materials[i]);
                    }
                }, n.getMaterialInstance = function(t1) {
                    if (!this._materials[t1]) return null;
                    if (!this._materialInstances[t1]) {
                        eB.parent = this._materials[t1], eB.owner = this, eB.subModelIdx = t1;
                        var _$i = new lA(eB);
                        eB.parent = null, eB.owner = null, eB.subModelIdx = 0, this.setMaterialInstance(_$i, t1);
                    }
                    return this._materialInstances[t1];
                }, n.setMaterialInstance = function(t1, i) {
                    if ("number" == typeof t1) {
                        nt(12007);
                        var n = t1;
                        t1 = i, i = n;
                    }
                    var _$s = this._materialInstances[i];
                    t1 && t1.parent ? t1 !== _$s && (this._materialInstances[i] = t1, this._onMaterialModified(i, t1)) : (t1 !== this._materials[i] || _$s) && this.setSharedMaterial(t1, i);
                }, n.getRenderMaterial = function(t1) {
                    return this._materialInstances[t1] || this._materials[t1];
                }, n._onMaterialModified = function() {}, n.tu = function() {}, n._clearMaterials = function() {}, s(i, [
                    {
                        key: "sharedMaterial",
                        get: function get() {
                            return this.getSharedMaterial(0);
                        }
                    },
                    {
                        key: "sharedMaterials",
                        get: function get() {
                            return this._materials;
                        },
                        set: function set(t1) {
                            for(var _$i = 0; _$i < t1.length; _$i++)t1[_$i] !== this._materials[_$i] && this.setSharedMaterial(t1[_$i], _$i);
                            if (t1.length < this._materials.length) {
                                for(var n = t1.length; n < this._materials.length; n++)this.setSharedMaterial(null, n);
                                this._materials.splice(t1.length);
                            }
                        }
                    },
                    {
                        key: "material",
                        get: function get() {
                            return this.getMaterialInstance(0);
                        },
                        set: function set(t1) {
                            (1 !== this._materials.length || this._materialInstances[0] || this._materials[0] !== t1) && this.setMaterialInstance(t1, 0);
                        }
                    },
                    {
                        key: "materials",
                        get: function get() {
                            for(var _$t = 0; _$t < this._materials.length; _$t++)this._materialInstances[_$t] = this.getMaterialInstance(_$t);
                            return this._materialInstances;
                        },
                        set: function set(t1) {
                            for(var _$i = t1.length, n = this._materials.length, _$s = _$i; _$s < n; _$s++)this.setMaterialInstance(null, _$s);
                            this._materials.length = _$i, this._materialInstances.length = _$i;
                            for(var _$r = 0; _$r < _$i; _$r++)this._materialInstances[_$r] != t1[_$r] && this.setMaterialInstance(t1[_$r], _$r);
                        }
                    }
                ]), i;
            }(Yg)).prototype, "sharedMaterials", [
                HL
            ], Object.getOwnPropertyDescriptor(zL.prototype, "sharedMaterials"), zL.prototype), $L = ho(zL.prototype, "_materials", [
                VL
            ], function() {
                return [];
            }), WL = zL)) || WL) || WL)), cB = function() {
                var _$t = i.prototype;
                function i() {
                    this.v_ = 0, this.l_ = [], this.yu = null, this.d_ = null, this.w_ = 0, this.g_ = !0, this.fa = !1, this.yy = !1, this.p_ = 0, this.y_ = Yr.WHITE.clone();
                }
                return _$t.Ge = function() {}, _$t.__ = function(t1) {
                    this.yy = t1;
                }, _$t.m_ = function() {}, _$t.b_ = function() {}, _$t.k_ = function() {}, _$t.A_ = function() {}, _$t.E_ = function() {}, _$t.T_ = function() {}, _$t.S_ = function(t1) {
                    this.p_ = t1;
                }, _$t.O_ = function() {}, _$t.I_ = function() {
                    return null;
                }, _$t.R_ = function(t1) {
                    this.yu = t1;
                }, _$t.M_ = function(t1) {
                    this.d_ = t1;
                }, _$t.C_ = function(t1) {
                    this.w_ = t1;
                }, _$t.N_ = function() {}, s(i, [
                    {
                        key: "nativeObj",
                        get: function get() {
                            return this.Ky;
                        }
                    },
                    {
                        key: "renderDrawInfoArr",
                        get: function get() {
                            return this.l_;
                        }
                    },
                    {
                        key: "renderEntityType",
                        get: function get() {
                            return this.v_;
                        }
                    },
                    {
                        key: "color",
                        get: function get() {
                            return this.y_;
                        },
                        set: function set(t1) {
                            this.y_ = t1;
                        }
                    },
                    {
                        key: "colorDirty",
                        get: function get() {
                            return this.g_;
                        },
                        set: function set(t1) {
                            this.g_ = t1;
                        }
                    },
                    {
                        key: "enabled",
                        get: function get() {
                            return this.fa;
                        },
                        set: function set(t1) {
                            this.fa = t1;
                        }
                    }
                ]), i;
            }(), aB = {
                default: 0
            };
            iP.on(tP.EVENT_POST_SUBSYSTEM_INIT, function() {
                EB.init();
            });
            var vB, lB, dB, wB, gB, yB, _B, mB, bB, kB, AB, EB = t1("Z", function() {
                function t1() {}
                return t1.getSortingPriority = function(t1, i) {
                    return void 0 === t1 && (t1 = 0), void 0 === i && (i = 0), (t1 + 32768 << 16 | i + 32768) >>> 0;
                }, t1.getDefaultPriority = function() {
                    return this.getSortingPriority(aB.default, 0);
                }, t1.getLayerIndex = function(t1) {
                    void 0 === t1 && (t1 = 0);
                    var i = 0;
                    return this.P_.has(t1) ? i = this.P_.get(t1) : rt(2105), i;
                }, t1.getLayerIndexByName = function(t1) {
                    var i = this.getLayerByName(t1);
                    return this.getLayerIndex(i);
                }, t1.getLayerName = function(t1) {
                    void 0 === t1 && (t1 = 0);
                    var i = "";
                    return this.D_.has(t1) ? i = this.D_.get(t1) : rt(2105), i;
                }, t1.getLayerByName = function(t1) {
                    for(var i = this.D_.size, n = this.D_.keys(), s = 0, _$r = 0; _$r < i; _$r++)if (s = n.next().value, this.D_.get(s) === t1) return s;
                    return rt(2106), 0;
                }, t1.isLayerValid = function(t1) {
                    return !!this.P_.has(t1) || (rt(2105), !1);
                }, t1.getBuiltinLayers = function() {
                    return [
                        {
                            id: 0,
                            name: "default",
                            value: 0
                        }
                    ];
                }, t1.init = function() {
                    var i = Ei.querySettings("engine", "sortingLayers");
                    i && 0 !== i.length || (i = this.getBuiltinLayers()), t1.L_();
                    for(var n = 0; n < i.length; n++){
                        var s = i[n];
                        t1.setLayer(s.id, s.name, s.value), t1.Enum[s.name] = s.id;
                    }
                    gi.update(t1.Enum), gi.sortList(t1.Enum, function(i, n) {
                        return t1.getLayerIndex(i.value) - t1.getLayerIndex(n.value);
                    });
                }, t1.setLayer = function(t1, i, n) {
                    this.D_.set(t1, i), this.P_.set(t1, n);
                }, t1.L_ = function() {
                    for(var i = Object.keys(t1.Enum), n = 0; n < i.length; n++)delete t1.Enum[t1.Enum[i[n]]], delete t1.Enum[i[n]];
                    t1.P_.clear(), t1.D_.clear();
                }, t1;
            }());
            EB.D_ = new Map, EB.P_ = new Map, EB.Enum = gi(aB), _i(hl), _i(el), _i(ul), t1("I", {
                ADD_COLOR: 0,
                ADD_COLOR_AND_TEXTURE: 1,
                GRAYSCALE: 2,
                USE_ALPHA_SEPARATED: 3,
                USE_ALPHA_SEPARATED_AND_GRAY: 4
            });
            var TB = t1("d", (vB = go("cc.UIRenderer"), lB = po(hB), dB = Zo(rA), wB = Zo(rA), vB(gB = lB(((AB = function(t1) {
                function i() {
                    var _$i;
                    return (_$i = t1.call(this) || this)._renderData = null, _$i._materials = yB && yB(), _$i._customMaterial = _B && _B(), _$i._srcBlendFactor = mB && mB(), _$i._dstBlendFactor = bB && bB(), _$i._color = kB && kB(), _$i._stencilStage = 0, _$i._assembler = null, _$i._postAssembler = null, _$i._renderFlag = !0, _$i._instanceMaterialType = -1, _$i._srcBlendFactorCache = 2, _$i._dstBlendFactorCache = 4, _$i._dirtyVersion = -1, _$i._internalId = -1, _$i.B_ = -1, _$i.Da = 0, _$i.F_ = 0, _$i._lastParent = null, _$i._renderEntity = _$i.createRenderEntity(), _$i;
                }
                h(i, t1);
                var n = i.prototype;
                return n.U_ = function(t1) {
                    this._renderData = t1;
                }, n.getFillColorType = function() {
                    return this.F_;
                }, n.setFillColorType = function(t1) {
                    this.F_ = t1;
                }, n.onLoad = function() {
                    this._renderEntity.R_(this.node);
                }, n.__preload = function() {
                    this.node._uiProps.uiComp = this, this._flushAssembler && this._flushAssembler();
                }, n.onEnable = function() {
                    this.node.on("anchor-changed", this._nodeStateChange, this), this.node.on("size-changed", this._nodeStateChange, this), this.node.on("parent-changed", this._colorDirty, this), !this._renderData && this._flushAssembler && this._flushAssembler(), this.updateMaterial(), this._colorDirty(), RN.Sd(this), this.po();
                }, n.onRestore = function() {
                    this.updateMaterial(), this.po();
                }, n.x_ = function() {
                    if (this.destroyRenderData(), this._materials) for(var _$t = 0; _$t < this._materials.length; _$t++)this.setSharedMaterial(null, _$t, !0);
                }, n.onDisable = function() {
                    this.node.off("anchor-changed", this._nodeStateChange, this), this.node.off("size-changed", this._nodeStateChange, this), this.node.off("parent-changed", this._colorDirty, this), this.x_(), RN.Od(this), this._renderFlag = !1, this._renderEntity.enabled = !1;
                }, n.onDestroy = function() {
                    this._renderEntity.R_(null), this.node._uiProps.uiComp === this && (this.node._uiProps.uiComp = null), this.x_();
                }, n.markForUpdateRenderData = function(t1) {
                    void 0 === t1 && (t1 = !0), this.po(t1);
                }, n.po = function(t1) {
                    if (void 0 === t1 && (t1 = !0), t1) {
                        var _$i = this._renderData;
                        _$i && (_$i.vertDirty = !0), RN.Id(this);
                    }
                }, n.requestRenderData = function(t1) {
                    void 0 === t1 && (t1 = 0);
                    var _$i = YL.add();
                    return _$i.initRenderDrawInfo(this, t1), this._renderData = _$i, _$i;
                }, n.destroyRenderData = function() {
                    this.renderEntity.E_(), this._renderData && (YL.remove(this._renderData), this._renderData = null);
                }, n.updateRenderer = function() {
                    var _$t = this._assembler;
                    _$t && _$t.updateRenderData && _$t.updateRenderData(this), this._renderFlag = this._canRender(), this._renderEntity.enabled = this._renderFlag;
                }, n.fillBuffers = function(t1) {
                    this._renderFlag && this._render(t1);
                }, n.postUpdateAssembler = function(t1) {
                    this._postAssembler && this._renderFlag && this._postRender(t1);
                }, n._render = function() {}, n._postRender = function() {}, n._canRender = function() {
                    return null !== this.getSharedMaterial(0) && this._enabled && this._color.a > 0;
                }, n._postCanRender = function() {}, n.updateMaterial = function() {
                    if (this._customMaterial) this.getSharedMaterial(0) !== this._customMaterial && this.setSharedMaterial(this._customMaterial, 0);
                    else {
                        var _$t = this._updateBuiltinMaterial();
                        this.setSharedMaterial(_$t, 0), 2 !== this.stencilStage && 6 !== this.stencilStage || this.getMaterialInstance(0).recompileShaders({
                            USE_ALPHA_TEST: !0
                        }), this._updateBlendFunc();
                    }
                }, n._updateColor = function() {
                    this.node._uiProps.colorDirty = !0, this.j_(!0), this.setEntityColor(this._color);
                    var _$t = this._assembler;
                    if (_$t) {
                        _$t.updateColor && _$t.updateColor(this);
                        var _$i = this._renderFlag;
                        if (this._renderFlag = this._canRender(), this.setEntityEnabled(this._renderFlag), _$i !== this._renderFlag) {
                            var n = this.renderData;
                            n && (n.vertDirty = !0);
                        }
                    }
                }, n.j_ = function() {}, n.setEntityColor = function() {}, n.setEntityOpacity = function() {}, n.setEntityEnabled = function() {}, n._updateBlendFunc = function() {
                    var _$t = this.getRenderMaterial(0).passes[0].blendState.targets[0];
                    if (this._dstBlendFactorCache = _$t.blendDst, this._srcBlendFactorCache = _$t.blendSrc, this._dstBlendFactorCache !== this._dstBlendFactor || this._srcBlendFactorCache !== this._srcBlendFactor) {
                        (_$t = this.getMaterialInstance(0).passes[0].blendState.targets[0]).blend = !0, _$t.blendDstAlpha = 4, _$t.blendDst = this._dstBlendFactor, _$t.blendSrc = this._srcBlendFactor;
                        var _$i = this.getMaterialInstance(0).passes[0];
                        _$i.blendState.setTarget(0, _$t), _$i.xe(), this._dstBlendFactorCache = this._dstBlendFactor, this._srcBlendFactorCache = this._srcBlendFactor;
                    }
                }, n._nodeStateChange = function() {
                    this._renderData && this.po();
                    for(var _$t = 0; _$t < this.node.children.length; ++_$t){
                        var n = this.node.children[_$t].getComponent(i);
                        n && n.po();
                    }
                }, n._colorDirty = function() {
                    this.node._uiProps.colorDirty = !0, this.j_(!0);
                }, n._onMaterialModified = function(i, n) {
                    this._renderData && (this.po(), this._renderData.passDirty = !0), t1.prototype._onMaterialModified.call(this, i, n);
                }, n._updateBuiltinMaterial = function() {
                    var _$t;
                    switch(this._instanceMaterialType){
                        case 0:
                            _$t = Lk.get("ui-base-material");
                            break;
                        case 2:
                            _$t = Lk.get("ui-sprite-gray-material");
                            break;
                        case 3:
                            _$t = Lk.get("ui-sprite-alpha-sep-material");
                            break;
                        case 4:
                            _$t = Lk.get("ui-sprite-gray-alpha-sep-material");
                            break;
                        default:
                            _$t = Lk.get("ui-sprite-material");
                    }
                    return _$t;
                }, n.setNodeDirty = function() {
                    this._renderData && (this._renderData.nodeDirty = !0);
                }, n.setTextureDirty = function() {
                    this._renderData && (this._renderData.textureDirty = !0);
                }, n.createRenderEntity = function() {
                    return new cB(0);
                }, s(i, [
                    {
                        key: "sharedMaterials",
                        get: function get() {
                            return this._materials;
                        },
                        set: function set(t1) {
                            for(var _$i = 0; _$i < t1.length; _$i++)t1[_$i] !== this._materials[_$i] && this.setSharedMaterial(t1[_$i], _$i);
                            if (t1.length < this._materials.length) {
                                for(var n = t1.length; n < this._materials.length; n++)this.setSharedMaterial(null, n);
                                this._materials.splice(t1.length);
                            }
                        }
                    },
                    {
                        key: "customMaterial",
                        get: function get() {
                            return this._customMaterial;
                        },
                        set: function set(t1) {
                            this._customMaterial = t1, this.updateMaterial();
                        }
                    },
                    {
                        key: "color",
                        get: function get() {
                            return this._color;
                        },
                        set: function set(t1) {
                            this._color.equals(t1) || (this._color.set(t1), this._updateColor());
                        }
                    },
                    {
                        key: "renderData",
                        get: function get() {
                            return this._renderData;
                        }
                    },
                    {
                        key: "stencilStage",
                        get: function get() {
                            return this._stencilStage;
                        },
                        set: function set(t1) {
                            this._stencilStage = t1, this._renderEntity.C_(t1);
                        }
                    },
                    {
                        key: "srcBlendFactor",
                        get: function get() {
                            return this._srcBlendFactor;
                        },
                        set: function set(t1) {
                            this._srcBlendFactor = t1;
                        }
                    },
                    {
                        key: "priority",
                        get: function get() {
                            return this.Da;
                        },
                        set: function set(t1) {
                            this.Da = t1;
                        }
                    },
                    {
                        key: "batcher",
                        get: function get() {
                            return PN.root.batcher2D;
                        }
                    },
                    {
                        key: "renderEntity",
                        get: function get() {
                            return this._renderEntity;
                        }
                    },
                    {
                        key: "_useVertexOpacity",
                        get: function get() {
                            return 1 === this.F_;
                        },
                        set: function set() {
                            this.setFillColorType(1);
                        }
                    },
                    {
                        key: "useVertexOpacity",
                        get: function get() {
                            return 1 === this.F_;
                        }
                    }
                ]), i;
            }(fB)).BlendState = hl, AB.Assembler = null, AB.PostAssembler = null, y(AB.prototype, "sharedMaterials", [
                ff
            ], Object.getOwnPropertyDescriptor(AB.prototype, "sharedMaterials"), AB.prototype), y(AB.prototype, "customMaterial", [
                dB
            ], Object.getOwnPropertyDescriptor(AB.prototype, "customMaterial"), AB.prototype), yB = ho(AB.prototype, "_materials", [
                ff
            ], function() {
                return [];
            }), _B = ho(AB.prototype, "_customMaterial", [
                wB
            ], function() {
                return null;
            }), mB = ho(AB.prototype, "_srcBlendFactor", [
                Ro
            ], function() {
                return 2;
            }), bB = ho(AB.prototype, "_dstBlendFactor", [
                Ro
            ], function() {
                return 4;
            }), kB = ho(AB.prototype, "_color", [
                Ro
            ], function() {
                return Yr.WHITE.clone();
            }), gB = AB)) || gB) || gB));
            A.internal.UIRenderer = TB;
            var SB, OB, IB, RB, MB, CB, NB, PB, LB, BB, FB, UB, xB, jB, GB, HB, VB, WB, zB, $B, XB, qB, YB, KB, JB, QB, ZB, tF, iF, nF, sF, rF, hF, eF = function() {
                function t1() {
                    this.isBold = !1, this.isItalic = !1, this.isUnderline = !1, this.underlineHeight = 1, this.isOutlined = !1, this.outlineColor = Yr.WHITE.clone(), this.outlineWidth = 1, this.hasShadow = !1, this.shadowColor = Yr.BLACK.clone(), this.shadowBlur = 2, this.shadowOffsetX = 0, this.shadowOffsetY = 0, this.color = Yr.WHITE.clone(), this.fontSize = 40, this.actualFontSize = 0, this.isSystemFontUsed = !1, this.originFontSize = 0, this.bmfontScale = 1, this.fontFamily = "Arial", this.fontDesc = "", this.fntConfig = null, this.spriteFrame = null, this.fontScale = 1;
                }
                return t1.prototype.reset = function() {
                    this.isBold = !1, this.isItalic = !1, this.isUnderline = !1, this.underlineHeight = 1, this.isOutlined = !1, this.outlineColor.set(), this.outlineWidth = 1, this.hasShadow = !1, this.shadowColor.set(), this.shadowBlur = 2, this.shadowOffsetX = 0, this.shadowOffsetY = 0;
                }, t1;
            }(), uF = function() {
                function t1() {
                    this.horizontalAlign = 0, this.verticalAlign = 0, this.wrapping = !0, this.overFlow = 0, this.lineHeight = 10, this.maxLineWidth = 0, this.spacingX = 0, this.textWidthTemp = 0, this.textHeightTemp = 0, this.textDimensions = new Zr, this.horizontalKerning = [], this.numberOfLines = 1, this.linesOffsetX = [], this.letterOffsetY = 0, this.tailoredTopY = 0, this.tailoredBottomY = 0, this.textDesiredHeight = 0, this.linesWidth = [];
                }
                return t1.prototype.reset = function() {
                    this.horizontalAlign = 0, this.verticalAlign = 0, this.wrapping = !0, this.overFlow = 0, this.lineHeight = 10, this.maxLineWidth = 0, this.spacingX = 0, this.textWidthTemp = 0, this.textHeightTemp = 0, this.textDimensions.set(), this.horizontalKerning.length = 0, this.numberOfLines = 1, this.linesOffsetX.length = 0, this.letterOffsetY = 0, this.tailoredTopY = 0, this.tailoredBottomY = 0, this.textDesiredHeight = 0, this.linesWidth.length = 0;
                }, t1;
            }(), oF = function() {
                function t1() {
                    this.parsedString = [], this.nodeContentSize = Zr.ZERO.clone(), this.canvasSize = new Zr, this.canvasPadding = new sh, this.contentSizeExtend = Zr.ZERO.clone(), this.startPosition = Or.ZERO.clone();
                }
                return t1.prototype.reset = function() {
                    this.parsedString.length = 0, this.nodeContentSize.set(0, 0), this.canvasSize.set(), this.canvasPadding.set(), this.contentSizeExtend.set(), this.startPosition.set();
                }, t1;
            }(), fF = function() {
                function t1() {
                    this.quadCount = 0, this.vertexBuffer = [], this.texture = null, this.uiTransAnchorX = .5, this.uiTransAnchorY = .5;
                }
                return t1.prototype.reset = function() {
                    this.quadCount = 0, this.vertexBuffer.length = 0, this.texture = null, this.uiTransAnchorX = .5, this.uiTransAnchorY = .5;
                }, t1;
            }();
            Yr.WHITE.clone();
            var cF = t1("H", {
                LEFT: 0,
                CENTER: 1,
                RIGHT: 2
            });
            _i(cF);
            var aF = t1("V", {
                TOP: 0,
                CENTER: 1,
                BOTTOM: 2
            });
            _i(aF);
            var vF = t1("O", {
                NONE: 0,
                CLAMP: 1,
                SHRINK: 2,
                RESIZE_HEIGHT: 3
            });
            _i(vF);
            var lF = t1("n", {
                NONE: 0,
                BITMAP: 1,
                CHAR: 2
            });
            _i(lF);
            var dF, wF, gF, pF, yF, _F, mF, bF, AF, EF, TF, SF, OF, IF, RF, MF, CF, NF, PF, DF = t1("o", (SB = go("cc.Label"), OB = yo(110), IB = Zo(cF), RB = Zo(aF), MB = Zo(vF), CB = Zo(fD), NB = Zo(lF), SB(PB = OB(((hF = function(t1) {
                function i() {
                    var _$i;
                    return (_$i = t1.call(this) || this)._string = LB && LB(), _$i._horizontalAlign = BB && BB(), _$i._verticalAlign = FB && FB(), _$i._actualFontSize = UB && UB(), _$i._fontSize = xB && xB(), _$i._fontFamily = jB && jB(), _$i._lineHeight = GB && GB(), _$i._overflow = HB && HB(), _$i._enableWrapText = VB && VB(), _$i._font = WB && WB(), _$i._isSystemFontUsed = zB && zB(), _$i._spacingX = $B && $B(), _$i._isItalic = XB && XB(), _$i._isBold = qB && qB(), _$i._isUnderline = YB && YB(), _$i._underlineHeight = KB && KB(), _$i._cacheMode = JB && JB(), _$i._enableOutline = QB && QB(), _$i._outlineColor = ZB && ZB(), _$i._outlineWidth = tF && tF(), _$i._enableShadow = iF && iF(), _$i._shadowColor = nF && nF(), _$i._shadowOffset = sF && sF(), _$i._shadowBlur = rF && rF(), _$i._N$file = null, _$i._texture = null, _$i._ttfSpriteFrame = null, _$i._userDefinedFont = null, _$i._assemblerData = null, _$i._fontAtlas = null, _$i._letterTexture = null, _$i._contentWidth = 0, _$i._textStyle = null, _$i._textLayout = null, _$i._textRenderData = null, _$i._textLayoutData = null, _$i._ttfSpriteFrame = null, _$i._textStyle = new eF, _$i._textLayout = new uF, _$i._textLayoutData = new oF, _$i._textRenderData = new fF, _$i;
                }
                h(i, t1);
                var n = i.prototype;
                return n.onEnable = function() {
                    t1.prototype.onEnable.call(this), this._font || this._isSystemFontUsed || (this.useSystemFont = !0), this._isSystemFontUsed && !this._fontFamily && (this.fontFamily = "Arial"), this._applyFontTexture();
                }, n.G_ = function() {
                    if (this._ttfSpriteFrame) {
                        this._ttfSpriteFrame._resetDynamicAtlasFrame();
                        var _$t = this._ttfSpriteFrame.texture;
                        this._ttfSpriteFrame.destroy(), _$t && (_$t.image && _$t.image.destroy(), _$t.destroy()), this._ttfSpriteFrame = null;
                    }
                }, n._onPreDestroy = function() {
                    t1.prototype._onPreDestroy.call(this), this._isOnLoadCalled || this.G_();
                }, n.onDestroy = function() {
                    this._assembler && this._assembler.resetAssemblerData && this._assembler.resetAssemblerData(this._assemblerData), this._assemblerData = null, this.G_(), this.H_(), t1.prototype.onDestroy.call(this);
                }, n.H_ = function() {
                    var _$t = this._letterTexture;
                    _$t && (_$t.decRef(!1), _$t.refCount <= 0 && _$t.destroy()), this._letterTexture = null;
                }, n.updateRenderData = function(t1) {
                    void 0 === t1 && (t1 = !1), t1 && (this._flushAssembler(), this.renderData && (this.renderData.vertDirty = !0), this._applyFontTexture()), this._assembler && this._assembler.updateRenderData(this);
                }, n._render = function(t1) {
                    t1.commitComp(this, this.renderData, this._texture, this._assembler, null);
                }, n._updateColor = function() {
                    t1.prototype._updateColor.call(this), this.po();
                }, n.setEntityColor = function() {}, n._canRender = function() {
                    if (!t1.prototype._canRender.call(this) || !this._string) return !1;
                    var _$i = this._font;
                    if (_$i && _instanceof(_$i, uL)) {
                        var n = _$i.spriteFrame;
                        if (!n || !n.texture) return !1;
                    }
                    return !0;
                }, n._flushAssembler = function() {
                    var _$t = i.Assembler.getAssembler(this);
                    this._assembler !== _$t && (this.destroyRenderData(), this._assembler = _$t, this.textStyle.reset(), this.textLayout.reset(), this.textLayoutData.reset(), this.textRenderData.reset()), this.renderData || this._assembler && this._assembler.createData && (this._renderData = this._assembler.createData(this), this.renderData.material = this.material, this._updateColor());
                }, n._applyFontTexture = function() {
                    this.po();
                    var _$t = this._font;
                    if (_instanceof(_$t, uL)) {
                        var _$i = _$t.spriteFrame;
                        _$i && _$i.texture && (this._texture = _$i, this.renderData && (this.renderData.textureDirty = !0), this.changeMaterialForDefine(), this._assembler && this._assembler.updateRenderData(this));
                    } else {
                        if (2 === this.cacheMode) {
                            var n = this._letterTexture, _$s = this._assembler.getAssemblerData();
                            _$s !== n && (this.H_(), _$s && _$s.addRef()), this._texture = this._letterTexture = _$s;
                        } else if (!this._ttfSpriteFrame) {
                            this._ttfSpriteFrame = new sD, this._assemblerData = this._assembler.getAssemblerData();
                            var _$r = new mg(this._assemblerData.canvas), _$h = new ay;
                            _$h.image = _$r, this._ttfSpriteFrame.texture = _$h;
                        }
                        2 !== this.cacheMode && (this._texture = this._ttfSpriteFrame), this.changeMaterialForDefine();
                    }
                }, n.changeMaterialForDefine = function() {
                    if (this._texture) {
                        var _$t = !1;
                        if (2 !== this.cacheMode) {
                            var _$i = this._texture.texture;
                            if (_instanceof(_$i, Tg)) {
                                var n = _$i.getPixelFormat();
                                _$t = 1026 === n || 1025 === n || 1024 === n;
                            }
                        }
                        this._instanceMaterialType = _$t ? 3 : 1, this.updateMaterial();
                    }
                }, n._updateBlendFunc = function() {
                    t1.prototype._updateBlendFunc.call(this);
                }, s(i, [
                    {
                        key: "string",
                        get: function get() {
                            return this._string;
                        },
                        set: function set(t1) {
                            t1 = null == t1 ? "" : t1.toString(), this._string !== t1 && (this._string = t1, this.po());
                        }
                    },
                    {
                        key: "horizontalAlign",
                        get: function get() {
                            return this._horizontalAlign;
                        },
                        set: function set(t1) {
                            this._horizontalAlign !== t1 && (this._horizontalAlign = t1, this.po());
                        }
                    },
                    {
                        key: "verticalAlign",
                        get: function get() {
                            return this._verticalAlign;
                        },
                        set: function set(t1) {
                            this._verticalAlign !== t1 && (this._verticalAlign = t1, this.po());
                        }
                    },
                    {
                        key: "actualFontSize",
                        get: function get() {
                            return this._actualFontSize;
                        },
                        set: function set(t1) {
                            this._actualFontSize = t1;
                        }
                    },
                    {
                        key: "fontSize",
                        get: function get() {
                            return this._fontSize;
                        },
                        set: function set(t1) {
                            this._fontSize !== t1 && (this._fontSize = t1, this.po());
                        }
                    },
                    {
                        key: "lineHeight",
                        get: function get() {
                            return this._lineHeight;
                        },
                        set: function set(t1) {
                            this._lineHeight !== t1 && (this._lineHeight = t1, this.po());
                        }
                    },
                    {
                        key: "spacingX",
                        get: function get() {
                            return this._spacingX;
                        },
                        set: function set(t1) {
                            this._spacingX !== t1 && (this._spacingX = t1, this.po());
                        }
                    },
                    {
                        key: "overflow",
                        get: function get() {
                            return this._overflow;
                        },
                        set: function set(t1) {
                            this._overflow !== t1 && (this._overflow = t1, this.po());
                        }
                    },
                    {
                        key: "enableWrapText",
                        get: function get() {
                            return this._enableWrapText;
                        },
                        set: function set(t1) {
                            this._enableWrapText !== t1 && (this._enableWrapText = t1, this.po());
                        }
                    },
                    {
                        key: "useSystemFont",
                        get: function get() {
                            return this._isSystemFontUsed;
                        },
                        set: function set(t1) {
                            this._isSystemFontUsed !== t1 && (this.destroyRenderData(), this._isSystemFontUsed = !!t1, t1 && (this.font = null), this._flushAssembler(), this.po());
                        }
                    },
                    {
                        key: "fontFamily",
                        get: function get() {
                            return this._fontFamily;
                        },
                        set: function set(t1) {
                            this._fontFamily !== t1 && (this._fontFamily = t1, this.po());
                        }
                    },
                    {
                        key: "font",
                        get: function get() {
                            return this._font;
                        },
                        set: function set(t1) {
                            this._font !== t1 && (this._isSystemFontUsed = !t1, this._font = t1, this.destroyRenderData(), this._fontAtlas = null, this.updateRenderData(!0));
                        }
                    },
                    {
                        key: "cacheMode",
                        get: function get() {
                            return this._cacheMode;
                        },
                        set: function set(t1) {
                            var _$i = this._cacheMode;
                            _$i !== t1 && (1 !== _$i || _instanceof(this._font, uL) || !this._ttfSpriteFrame || this._ttfSpriteFrame._resetDynamicAtlasFrame(), 2 === _$i && (this._ttfSpriteFrame = null, this.H_()), this._cacheMode = t1, this.updateRenderData(!0));
                        }
                    },
                    {
                        key: "isBold",
                        get: function get() {
                            return this._isBold;
                        },
                        set: function set(t1) {
                            this._isBold !== t1 && (this._isBold = t1, this.po());
                        }
                    },
                    {
                        key: "isItalic",
                        get: function get() {
                            return this._isItalic;
                        },
                        set: function set(t1) {
                            this._isItalic !== t1 && (this._isItalic = t1, this.po());
                        }
                    },
                    {
                        key: "isUnderline",
                        get: function get() {
                            return this._isUnderline;
                        },
                        set: function set(t1) {
                            this._isUnderline !== t1 && (this._isUnderline = t1, this.po());
                        }
                    },
                    {
                        key: "underlineHeight",
                        get: function get() {
                            return this._underlineHeight;
                        },
                        set: function set(t1) {
                            this._underlineHeight !== t1 && (this._underlineHeight = t1, this.po());
                        }
                    },
                    {
                        key: "enableOutline",
                        get: function get() {
                            return this._enableOutline;
                        },
                        set: function set(t1) {
                            this._enableOutline !== t1 && (this._enableOutline = t1, this.po());
                        }
                    },
                    {
                        key: "outlineColor",
                        get: function get() {
                            return this._outlineColor;
                        },
                        set: function set(t1) {
                            this._outlineColor !== t1 && (this._outlineColor.set(t1), this.po());
                        }
                    },
                    {
                        key: "outlineWidth",
                        get: function get() {
                            return this._outlineWidth;
                        },
                        set: function set(t1) {
                            this._outlineWidth !== t1 && (this._outlineWidth = t1, this.po());
                        }
                    },
                    {
                        key: "enableShadow",
                        get: function get() {
                            return this._enableShadow;
                        },
                        set: function set(t1) {
                            this._enableShadow !== t1 && (this._enableShadow = t1, this.po());
                        }
                    },
                    {
                        key: "shadowColor",
                        get: function get() {
                            return this._shadowColor;
                        },
                        set: function set(t1) {
                            this._shadowColor !== t1 && (this._shadowColor.set(t1), this.po());
                        }
                    },
                    {
                        key: "shadowOffset",
                        get: function get() {
                            return this._shadowOffset;
                        },
                        set: function set(t1) {
                            this._shadowOffset !== t1 && (this._shadowOffset.set(t1), this.po());
                        }
                    },
                    {
                        key: "shadowBlur",
                        get: function get() {
                            return this._shadowBlur;
                        },
                        set: function set(t1) {
                            this._shadowBlur !== t1 && (this._shadowBlur = t1, this.po());
                        }
                    },
                    {
                        key: "spriteFrame",
                        get: function get() {
                            return this._texture;
                        }
                    },
                    {
                        key: "ttfSpriteFrame",
                        get: function get() {
                            return this._ttfSpriteFrame;
                        }
                    },
                    {
                        key: "assemblerData",
                        get: function get() {
                            return this._assemblerData;
                        }
                    },
                    {
                        key: "fontAtlas",
                        get: function get() {
                            return this._fontAtlas;
                        },
                        set: function set(t1) {
                            this._fontAtlas = t1;
                        }
                    },
                    {
                        key: "_bmFontOriginalSize",
                        get: function get() {
                            return _instanceof(this._font, uL) ? this._font.fontSize : -1;
                        }
                    },
                    {
                        key: "textStyle",
                        get: function get() {
                            return this._textStyle;
                        }
                    },
                    {
                        key: "textLayout",
                        get: function get() {
                            return this._textLayout;
                        }
                    },
                    {
                        key: "textRenderData",
                        get: function get() {
                            return this._textRenderData;
                        }
                    },
                    {
                        key: "textLayoutData",
                        get: function get() {
                            return this._textLayoutData;
                        }
                    },
                    {
                        key: "contentWidth",
                        get: function get() {
                            return this._contentWidth;
                        },
                        set: function set(t1) {
                            this._contentWidth = t1;
                        }
                    }
                ]), i;
            }(TB)).HorizontalAlign = cF, hF.VerticalAlign = aF, hF.Overflow = vF, hF.CacheMode = lF, hF._canvasPool = cL.Dp(), y(hF.prototype, "horizontalAlign", [
                IB
            ], Object.getOwnPropertyDescriptor(hF.prototype, "horizontalAlign"), hF.prototype), y(hF.prototype, "verticalAlign", [
                RB
            ], Object.getOwnPropertyDescriptor(hF.prototype, "verticalAlign"), hF.prototype), y(hF.prototype, "overflow", [
                MB
            ], Object.getOwnPropertyDescriptor(hF.prototype, "overflow"), hF.prototype), y(hF.prototype, "font", [
                CB
            ], Object.getOwnPropertyDescriptor(hF.prototype, "font"), hF.prototype), y(hF.prototype, "cacheMode", [
                NB
            ], Object.getOwnPropertyDescriptor(hF.prototype, "cacheMode"), hF.prototype), LB = ho(hF.prototype, "_string", [
                Ro
            ], function() {
                return "label";
            }), BB = ho(hF.prototype, "_horizontalAlign", [
                Ro
            ], function() {
                return 1;
            }), FB = ho(hF.prototype, "_verticalAlign", [
                Ro
            ], function() {
                return 1;
            }), UB = ho(hF.prototype, "_actualFontSize", [
                Ro
            ], function() {
                return 0;
            }), xB = ho(hF.prototype, "_fontSize", [
                Ro
            ], function() {
                return 40;
            }), jB = ho(hF.prototype, "_fontFamily", [
                Ro
            ], function() {
                return "Arial";
            }), GB = ho(hF.prototype, "_lineHeight", [
                Ro
            ], function() {
                return 40;
            }), HB = ho(hF.prototype, "_overflow", [
                Ro
            ], function() {
                return 0;
            }), VB = ho(hF.prototype, "_enableWrapText", [
                Ro
            ], function() {
                return !0;
            }), WB = ho(hF.prototype, "_font", [
                Ro
            ], function() {
                return null;
            }), zB = ho(hF.prototype, "_isSystemFontUsed", [
                Ro
            ], function() {
                return !0;
            }), $B = ho(hF.prototype, "_spacingX", [
                Ro
            ], function() {
                return 0;
            }), XB = ho(hF.prototype, "_isItalic", [
                Ro
            ], function() {
                return !1;
            }), qB = ho(hF.prototype, "_isBold", [
                Ro
            ], function() {
                return !1;
            }), YB = ho(hF.prototype, "_isUnderline", [
                Ro
            ], function() {
                return !1;
            }), KB = ho(hF.prototype, "_underlineHeight", [
                Ro
            ], function() {
                return 2;
            }), JB = ho(hF.prototype, "_cacheMode", [
                Ro
            ], function() {
                return 0;
            }), QB = ho(hF.prototype, "_enableOutline", [
                Ro
            ], function() {
                return !1;
            }), ZB = ho(hF.prototype, "_outlineColor", [
                Ro
            ], function() {
                return new Yr(0, 0, 0, 255);
            }), tF = ho(hF.prototype, "_outlineWidth", [
                Ro
            ], function() {
                return 2;
            }), iF = ho(hF.prototype, "_enableShadow", [
                Ro
            ], function() {
                return !1;
            }), nF = ho(hF.prototype, "_shadowColor", [
                Ro
            ], function() {
                return new Yr(0, 0, 0, 255);
            }), sF = ho(hF.prototype, "_shadowOffset", [
                Ro
            ], function() {
                return new Or(2, 2);
            }), rF = ho(hF.prototype, "_shadowBlur", [
                Ro
            ], function() {
                return 2;
            }), PB = hF)) || PB) || PB));
            A.Label = DF;
            var LF = {
                SIMPLE: 0,
                SLICED: 1,
                TILED: 2,
                FILLED: 3
            };
            _i(LF);
            var BF = {
                HORIZONTAL: 0,
                VERTICAL: 1,
                RADIAL: 2
            };
            _i(BF);
            var FF = {
                CUSTOM: 0,
                TRIMMED: 1,
                RAW: 2
            };
            _i(FF);
            var UF, xF = t1("g", (dF = go("cc.Sprite"), wF = yo(110), gF = Zo(hD), pF = Zo(sD), yF = Zo(LF), _F = Zo(BF), mF = Zo(FF), dF(bF = wF(((PF = function(t1) {
                function i() {
                    var _$i;
                    return (_$i = t1.call(this) || this)._spriteFrame = AF && AF(), _$i._type = EF && EF(), _$i._fillType = TF && TF(), _$i._sizeMode = SF && SF(), _$i._fillCenter = OF && OF(), _$i._fillStart = IF && IF(), _$i._fillRange = RF && RF(), _$i._isTrimmedMode = MF && MF(), _$i._useGrayscale = CF && CF(), _$i._atlas = NF && NF(), _$i;
                }
                h(i, t1);
                var n = i.prototype;
                return n.__preload = function() {
                    this.changeMaterialForDefine(), t1.prototype.__preload.call(this);
                }, n.onEnable = function() {
                    t1.prototype.onEnable.call(this), this.V_();
                    var _$i = this._spriteFrame;
                    _$i && (this.W_(), 1 === this._type && _$i.on("uv_updated", this.W_, this));
                }, n.onDisable = function() {
                    t1.prototype.onDisable.call(this), this._spriteFrame && 1 === this._type && this._spriteFrame.off("uv_updated", this.W_, this);
                }, n.onDestroy = function() {
                    t1.prototype.onDestroy.call(this);
                }, n.changeSpriteFrameFromAtlas = function(t1) {
                    if (this._atlas) {
                        var _$i = this._atlas.getSpriteFrame(t1);
                        this.spriteFrame = _$i;
                    } else nt(16377);
                }, n.changeMaterialForDefine = function() {
                    var _$t, _$i = this._instanceMaterialType;
                    this._spriteFrame && (_$t = this._spriteFrame.texture);
                    var n = !1;
                    if (_instanceof(_$t, Tg)) {
                        var _$s = _$t.getPixelFormat();
                        n = 1026 === _$s || 1025 === _$s || 1024 === _$s;
                    }
                    n && this.grayscale ? this._instanceMaterialType = 4 : n ? this._instanceMaterialType = 3 : this.grayscale ? this._instanceMaterialType = 2 : this._instanceMaterialType = 1, _$i !== this._instanceMaterialType && this.updateMaterial();
                }, n._updateBuiltinMaterial = function() {
                    var _$i = t1.prototype._updateBuiltinMaterial.call(this);
                    if (this.spriteFrame && _instanceof(this.spriteFrame.texture, NA)) {
                        var n = "rt-" + _$i.name, _$s = Lk.get(n);
                        _$s || ((_$s = new rA(n)).copy(_$i, {
                            defines: {
                                SAMPLE_FROM_RT: !0
                            }
                        }), Lk.addAsset(n, _$s)), _$i = _$s;
                    }
                    return _$i;
                }, n._render = function(t1) {
                    t1.commitComp(this, this.renderData, this._spriteFrame, this._assembler, null);
                }, n._canRender = function() {
                    if (!t1.prototype._canRender.call(this)) return !1;
                    var _$i = this._spriteFrame;
                    return !(!_$i || !_$i.texture);
                }, n._flushAssembler = function() {
                    var n = i.Assembler.getAssembler(this);
                    this._assembler !== n && (this.destroyRenderData(), this._assembler = n), this._renderData || n && n.createData && ((this._renderData = n.createData(this)).material = this.getRenderMaterial(0), this.po(), this.spriteFrame && n.updateUVs(this), this._updateColor());
                    var _$s = this._spriteFrame;
                    _$s && (1 === this._type ? _$s.on("uv_updated", this.W_, this) : _$s.off("uv_updated", this.W_, this));
                }, n.z_ = function() {
                    var _$i = this._spriteFrame;
                    if (_$i) {
                        var n = this.node._uiProps;
                        if (2 === this._sizeMode) {
                            var _$s = _$i.originalSize;
                            n.uiTransformComp.setContentSize(_$s);
                        } else if (1 === this._sizeMode) {
                            var _$r = _$i.rect;
                            n.uiTransformComp.setContentSize(_$r.width, _$r.height);
                        }
                    }
                }, n.X_ = function() {}, n.V_ = function() {
                    var _$t = this._spriteFrame, _$i = this.getRenderMaterial(0);
                    _$t && _$i && this.po(), this.renderData && (this.renderData.material = _$i);
                }, n.W_ = function() {
                    this._assembler && this._assembler.updateUVs(this);
                }, n._applySpriteFrame = function(t1) {
                    var n = this._spriteFrame;
                    t1 && 1 === this._type && t1.off("uv_updated", this.W_, this);
                    var _$s = !1;
                    n && (t1 && t1.texture === n.texture || (_$s = !0), _$s && (this.renderData && (this.renderData.textureDirty = !0), (!!t1 && _instanceof(t1.texture, NA)) != _instanceof(n.texture, NA) && (this._instanceMaterialType = -1), this.changeMaterialForDefine()), this.z_(), 1 === this._type && n.on("uv_updated", this.W_, this));
                }, s(i, [
                    {
                        key: "spriteAtlas",
                        get: function get() {
                            return this._atlas;
                        },
                        set: function set(t1) {
                            this._atlas !== t1 && (this._atlas = t1);
                        }
                    },
                    {
                        key: "spriteFrame",
                        get: function get() {
                            return this._spriteFrame;
                        },
                        set: function set(t1) {
                            if (this._spriteFrame !== t1) {
                                var _$i = this._spriteFrame;
                                this._spriteFrame = t1, this.po(), this._applySpriteFrame(_$i);
                            }
                        }
                    },
                    {
                        key: "type",
                        get: function get() {
                            return this._type;
                        },
                        set: function set(t1) {
                            this._type !== t1 && (this._type = t1, this._flushAssembler());
                        }
                    },
                    {
                        key: "fillType",
                        get: function get() {
                            return this._fillType;
                        },
                        set: function set(t1) {
                            this._fillType !== t1 && (2 === t1 || 2 === this._fillType ? this.destroyRenderData() : this.renderData && this.po(!0)), this._fillType = t1, this._flushAssembler();
                        }
                    },
                    {
                        key: "fillCenter",
                        get: function get() {
                            return this._fillCenter;
                        },
                        set: function set(t1) {
                            this._fillCenter.x = t1.x, this._fillCenter.y = t1.y, 3 === this._type && this.renderData && this.po();
                        }
                    },
                    {
                        key: "fillStart",
                        get: function get() {
                            return this._fillStart;
                        },
                        set: function set(t1) {
                            this._fillStart = Un(t1, 0, 1), 3 === this._type && this.renderData && (this.po(), this.W_());
                        }
                    },
                    {
                        key: "fillRange",
                        get: function get() {
                            return this._fillRange;
                        },
                        set: function set(t1) {
                            this._fillRange = Un(t1, -1, 1), 3 === this._type && this.renderData && (this.po(), this.W_());
                        }
                    },
                    {
                        key: "trim",
                        get: function get() {
                            return this._isTrimmedMode;
                        },
                        set: function set(t1) {
                            this._isTrimmedMode !== t1 && (this._isTrimmedMode = t1, 0 === this._type && this.renderData && this.po(!0));
                        }
                    },
                    {
                        key: "grayscale",
                        get: function get() {
                            return this._useGrayscale;
                        },
                        set: function set(t1) {
                            this._useGrayscale !== t1 && (this._useGrayscale = t1, this.changeMaterialForDefine(), this.updateMaterial());
                        }
                    },
                    {
                        key: "sizeMode",
                        get: function get() {
                            return this._sizeMode;
                        },
                        set: function set(t1) {
                            this._sizeMode !== t1 && (this._sizeMode = t1, 0 !== t1 && this.z_());
                        }
                    }
                ]), i;
            }(TB)).FillType = BF, PF.Type = LF, PF.SizeMode = FF, PF.EventType = {
                SPRITE_FRAME_CHANGED: "spriteframe-changed"
            }, y(PF.prototype, "spriteAtlas", [
                gF
            ], Object.getOwnPropertyDescriptor(PF.prototype, "spriteAtlas"), PF.prototype), y(PF.prototype, "spriteFrame", [
                pF
            ], Object.getOwnPropertyDescriptor(PF.prototype, "spriteFrame"), PF.prototype), y(PF.prototype, "type", [
                yF
            ], Object.getOwnPropertyDescriptor(PF.prototype, "type"), PF.prototype), y(PF.prototype, "fillType", [
                _F
            ], Object.getOwnPropertyDescriptor(PF.prototype, "fillType"), PF.prototype), y(PF.prototype, "sizeMode", [
                mF
            ], Object.getOwnPropertyDescriptor(PF.prototype, "sizeMode"), PF.prototype), AF = ho(PF.prototype, "_spriteFrame", [
                Ro
            ], function() {
                return null;
            }), EF = ho(PF.prototype, "_type", [
                Ro
            ], function() {
                return 0;
            }), TF = ho(PF.prototype, "_fillType", [
                Ro
            ], function() {
                return 0;
            }), SF = ho(PF.prototype, "_sizeMode", [
                Ro
            ], function() {
                return 1;
            }), OF = ho(PF.prototype, "_fillCenter", [
                Ro
            ], function() {
                return new Or(0, 0);
            }), IF = ho(PF.prototype, "_fillStart", [
                Ro
            ], function() {
                return 0;
            }), RF = ho(PF.prototype, "_fillRange", [
                Ro
            ], function() {
                return 0;
            }), MF = ho(PF.prototype, "_isTrimmedMode", [
                Ro
            ], function() {
                return !0;
            }), CF = ho(PF.prototype, "_useGrayscale", [
                Ro
            ], function() {
                return !1;
            }), NF = ho(PF.prototype, "_atlas", [
                Ro
            ], function() {
                return null;
            }), bF = PF)) || bF) || bF));
            A.Sprite = xF, A.UIMeshRenderer = t1("h", go("cc.UIMeshRenderer")(UF = yo(110)(UF = function(t1) {
                function i() {
                    var _$i;
                    return (_$i = t1.call(this) || this).q_ = null, _$i._dirtyVersion = -1, _$i._internalId = -1, _$i.stencilStage = 0, _$i._renderData = null, _$i._renderEntity = new cB(1), _$i;
                }
                h(i, t1);
                var n = i.prototype;
                return n.__preload = function() {
                    this.node._uiProps.uiComp = this;
                }, n.onEnable = function() {
                    RN.Sd(this), this.po();
                }, n.onDisable = function() {
                    RN.Od(this), this.renderEntity.enabled = this._canRender();
                }, n.onLoad = function() {
                    this.node.io() || this.node.addComponent("cc.UITransform"), this.q_ = this.getComponent("cc.ModelRenderer"), this.q_ ? this.renderEntity.R_(this.node) : nt(16378, this.node ? this.node.name : "");
                }, n.onDestroy = function() {
                    this.renderEntity.R_(null), this.node._uiProps.uiComp === this && (this.node._uiProps.uiComp = null), this.q_ = this.getComponent("cc.ModelRenderer"), this.q_ && (this.q_._sceneGetter = null);
                }, n._render = function(t1) {
                    if (this.q_) {
                        var _$i = this.q_._collectModels();
                        this.q_._detachFromScene();
                        for(var n = 0; n < _$i.length; n++)_$i[n].enabled && t1.commitModel(this, _$i[n], this.q_.material);
                        return !0;
                    }
                    return !1;
                }, n.fillBuffers = function(t1) {
                    this.enabled && this._render(t1);
                }, n.updateRenderer = function() {}, n.Y_ = function() {}, n.postUpdateAssembler = function() {}, n.update = function() {
                    this.K_();
                }, n.K_ = function() {
                    if (this.q_) for(var _$t = this.q_.sharedMaterials.length, _$i = 0; _$i < _$t; _$i++){
                        var n = this.q_.getMaterialInstance(_$i);
                        if (null != n) for(var _$s = n.passes, _$r = _$s.length, _$h = 0; _$h < _$r; _$h++)_$s[_$h].Ge(244), n.recompileShaders({
                            CC_FORCE_FORWARD_SHADING: !0
                        }, _$h);
                    }
                }, n.markForUpdateRenderData = function(t1) {
                    void 0 === t1 && (t1 = !0), this.po(t1);
                }, n.po = function() {
                    RN.Id(this);
                }, n.setNodeDirty = function() {}, n.setTextureDirty = function() {}, n._canRender = function() {
                    return this.enabled && null !== this.q_;
                }, s(i, [
                    {
                        key: "modelComponent",
                        get: function get() {
                            return this.q_;
                        }
                    },
                    {
                        key: "renderEntity",
                        get: function get() {
                            return this._renderEntity;
                        }
                    },
                    {
                        key: "renderData",
                        get: function get() {
                            return this._renderData;
                        }
                    }
                ]), i;
            }(Yg)) || UF) || UF), A.LabelOutline = t1("i", go("cc.LabelOutline")(jF = yo(110)(jF = po(DF)(jF = function(t1) {
                function i() {
                    return t1.apply(this, arguments) || this;
                }
                h(i, t1);
                var n = i.prototype;
                return n.onEnable = function() {
                    this.node.getComponent(DF).enableOutline = !0;
                }, n.onDisable = function() {
                    this.node.getComponent(DF).enableOutline = !1;
                }, s(i, [
                    {
                        key: "color",
                        get: function get() {
                            return this.node.getComponent(DF).outlineColor;
                        },
                        set: function set(t1) {
                            this.node.getComponent(DF).outlineColor = t1;
                        }
                    },
                    {
                        key: "width",
                        get: function get() {
                            return this.node.getComponent(DF).outlineWidth;
                        },
                        set: function set(t1) {
                            this.node.getComponent(DF).outlineWidth = t1;
                        }
                    }
                ]), i;
            }(Yg)) || jF) || jF) || jF);
            var jF, VF, WF, zF, $F, XF, qF, YF = My.Enum.NONE | My.Enum.UI_3D, KF = function() {
                function t1() {
                    this.J_ = null, this.Q_ = null, this.hw = null, this.Z_ = null, this.tm = !1, this.im = 0, this.nm = 0, this.sm = [], this.rm = [], this.hm = YF, this.um = null, this.om = null;
                }
                var i = t1.prototype;
                return i.Qw = function() {
                    this.sm = [];
                }, i.Ty = function() {
                    this.um = null, this.om = null, this.Q_ = null, this.hw = null, this.im = 0, this.nm = 0, this.J_ = null, this.tm = !1, this.Z_ = null, this.hm = YF;
                }, i.fm = function(t1, i, n, s) {
                    if (t1) {
                        var _$r = t1.passes;
                        if (_$r) {
                            this.rm.length = _$r.length;
                            for(var h = 0; h < _$r.length; h++){
                                this.sm[h] || (this.sm[h] = new Hk(A.director.root));
                                var e = _$r[h], u = this.sm[h];
                                e.update(), i || (i = e.depthStencilState, n = 0), u.Ue(e, i, n), this.rm[h] = u.getShaderVariant(s);
                            }
                        }
                    }
                }, s(t1, [
                    {
                        key: "passes",
                        get: function get() {
                            return this.sm;
                        }
                    },
                    {
                        key: "shaders",
                        get: function get() {
                            return this.rm;
                        }
                    }
                ]), t1;
            }(), JF = (t1("j", go("cc.UIStaticBatch")(VF = yo(110)((y((WF = function(t1) {
                function i() {
                    var _$i;
                    return (_$i = t1.call(this) || this)._init = !1, _$i._bufferAccessor = null, _$i._dirty = !0, _$i.am = [], _$i;
                }
                h(i, t1);
                var n = i.prototype;
                return n.postUpdateAssembler = function() {}, n.markAsDirty = function() {}, n._requireDrawBatch = function() {
                    var _$t = new KF;
                    return _$t.tm = !0, this.am.push(_$t), _$t;
                }, n._clearData = function() {
                    if (this._bufferAccessor) {
                        this._bufferAccessor.reset();
                        for(var _$t = this._getBatcher(), _$i = 0; _$i < this.am.length; _$i++)this.am[_$i].Qw(_$t);
                    }
                    this.am.length = 0, this._init = !1;
                }, n._getBatcher = function() {
                    return PN.root && PN.root.batcher2D ? PN.root.batcher2D : (nt(9301), null);
                }, s(i, [
                    {
                        key: "color",
                        get: function get() {
                            return this._color;
                        },
                        set: function set(t1) {
                            this._color !== t1 && this._color.set(t1);
                        }
                    },
                    {
                        key: "drawBatchList",
                        get: function get() {
                            return this.am;
                        }
                    }
                ]), i;
            }(TB)).prototype, "color", [
                ff
            ], Object.getOwnPropertyDescriptor(WF.prototype, "color"), WF.prototype), VF = WF)) || VF) || VF), t1("k", go("cc.LabelShadow")(zF = yo(110)(zF = po(DF)(zF = function(t1) {
                function i() {
                    return t1.apply(this, arguments) || this;
                }
                h(i, t1);
                var n = i.prototype;
                return n.onEnable = function() {
                    this.node.getComponent(DF).enableShadow = !0;
                }, n.onDisable = function() {
                    this.node.getComponent(DF).enableShadow = !1;
                }, s(i, [
                    {
                        key: "color",
                        get: function get() {
                            return this.node.getComponent(DF).shadowColor;
                        },
                        set: function set(t1) {
                            this.node.getComponent(DF).shadowColor = t1;
                        }
                    },
                    {
                        key: "offset",
                        get: function get() {
                            return this.node.getComponent(DF).shadowOffset;
                        },
                        set: function set(t1) {
                            this.node.getComponent(DF).shadowOffset = t1;
                        }
                    },
                    {
                        key: "blur",
                        get: function get() {
                            return this.node.getComponent(DF).shadowBlur;
                        },
                        set: function set(t1) {
                            this.node.getComponent(DF).shadowBlur = t1;
                        }
                    }
                ]), i;
            }(Yg)) || zF) || zF) || zF), t1("m", go("cc.UIOpacity")($F = yo(110)($F = oo((qF = ho((XF = function(t1) {
                function i() {
                    var _$i;
                    return (_$i = t1.call(this) || this)._opacity = qF && qF(), _$i;
                }
                h(i, t1);
                var n = i.prototype;
                return n.onEnable = function() {
                    this.vm(this._opacity / 255);
                }, n.onDisable = function() {
                    this.vm(1);
                }, n.vm = function(t1) {
                    this.node._uiProps.localOpacity = t1;
                }, s(i, [
                    {
                        key: "opacity",
                        get: function get() {
                            return this._opacity;
                        },
                        set: function set(t1) {
                            this._opacity !== t1 && (t1 = Un(t1, 0, 255), this._opacity = t1, this.vm(t1 / 255));
                        }
                    }
                ]), i;
            }(Yg)).prototype, "_opacity", [
                Ro
            ], function() {
                return 255;
            }), $F = XF)) || $F) || $F) || $F), [
                "left",
                "center",
                "right"
            ]), ZF = wD(), tU = (1 / 255).toFixed(3), iU = function iU() {
                this.char = "", this.valid = !0, this.x = 0, this.y = 0, this.line = 0, this.hash = "";
            }, nU = function() {
                function t1() {
                    this.zr = null, this.Hs = null, this.lm = null, this.dm = [], this.wm = new sh, this.gm = 100, this.pm = 1;
                    var _$t = this.lm = cL.Dp().wi();
                    this.Hs = _$t.canvas, this.zr = _$t.context;
                }
                var i = t1.prototype;
                return i.destroy = function() {
                    cL.Dp().pi(this.lm), this.lm = null, this.Hs = null, this.zr = null, this.dm.length = 0;
                }, i.processingString = function(t1, i, n, s, r, h) {
                    if (t1) i.fntConfig ? this.pm = 1 : this.pm = this.ym(i.originFontSize, i.fontScale), pL.fontScale = this.pm, this._m(n, s), this.km(i), this.Am(i, n, r), this.Em(i, n, s, r);
                    else {
                        var e = 0;
                        for(this.pm = this.ym(i.fontSize, i.fontScale), this.Tm(i, s), this.Sm(i, n, s, r); (s.canvasSize.width > 2048 || s.canvasSize.height > 2048) && e <= 3;){
                            if (++e > 3) this.pm = 1;
                            else {
                                var o = 2048 / Math.max(s.canvasSize.width, s.canvasSize.height);
                                this.pm *= o, this.pm = Math.max(1, this.pm);
                            }
                            this.Tm(i, s), this.Sm(i, n, s, r);
                        }
                    }
                    h && (h = s.parsedString);
                }, i.generateRenderInfo = function(t1, i, n, s, r, h, e) {
                    t1 ? this.Om(i, n, s) : (this.Rm(i, n, s), this.Bp(i, n, s, r)), this.Im(t1, i, n, s, r, h, e);
                }, i.setCanvasUsed = function(t1, i) {
                    this.Hs = t1, this.zr = i;
                }, i.ym = function(t1, i) {
                    var n = i, s = this.gm;
                    return n * t1 > s && t1 < s && (n = s / t1), n < 1 && (n = 1), n;
                }, i.Sm = function(t1, i, n, s) {
                    if (this.zr) {
                        t1.actualFontSize = t1.fontSize * this.pm;
                        var _$r = s.split("\n"), h = n.parsedString = _$r, e = this.Mm(t1.actualFontSize, t1.fontFamily, t1.isBold, t1.isItalic);
                        this.zr.font = t1.fontDesc = e;
                        var u = n.canvasSize, o = n.nodeContentSize, f = n.canvasPadding, _$c = n.contentSizeExtend, a = this.pm;
                        switch(i.overFlow){
                            case 0:
                                for(var v = 0, l = 0; l < _$r.length; ++l){
                                    var _$d = OD(this.zr, _$r[l], e);
                                    v = v > _$d ? v : _$d;
                                }
                                var w = v, g = (h.length + vD) * this.Cm(i.lineHeight, t1.actualFontSize, t1.fontSize);
                                u.width = w + f.width * a, u.height = g + f.height * a, o.width = (w + _$c.width * a) / a, o.height = (g + _$c.height * a) / a;
                                break;
                            case 2:
                                this.Nm(_$r, t1, i, n), this.Pm(_$r, t1, i, n), u.width = o.width * a, u.height = o.height * a;
                                break;
                            case 1:
                                this.Pm(_$r, t1, i, n), u.width = o.width * a, u.height = o.height * a;
                                break;
                            case 3:
                                this.Pm(_$r, t1, i, n);
                                var p = (n.parsedString.length + vD) * this.Cm(i.lineHeight, t1.actualFontSize, t1.fontSize);
                                u.width = o.width * a, u.height = p + f.height * a, o.height = (p + _$c.height * a) / a;
                        }
                    }
                }, i.Mm = function(t1, i, n, s) {
                    var _$r = t1.toString() + "px ";
                    return _$r += i, n && (_$r = "bold " + _$r), s && (_$r = "italic " + _$r), _$r;
                }, i.Cm = function(t1, i, n) {
                    return 0 === t1 ? i : t1 * i / n;
                }, i.Nm = function(t1, i, n, s) {
                    if (this.zr) {
                        var _$r = this.Mm(i.actualFontSize, i.fontFamily, i.isBold, i.isItalic);
                        this.zr.font = _$r;
                        var h = this.Dm(t1, this.zr, _$r), e = 0, u = 0, o = 0, f = i.actualFontSize, _$c = s.canvasSize, a = s.nodeContentSize, v = s.canvasPadding, l = this.pm;
                        if (n.wrapping) {
                            var _$d = a.width * l, w = a.height * l;
                            if (_$d < 0 || w < 0) return;
                            u = w + 1;
                            for(var g = 0, p = 0 | i.actualFontSize + 1, _$y = 0; g < p;){
                                if ((_$y = g + p + 1 >> 1) <= 0) {
                                    Q(4003);
                                    break;
                                }
                                f = _$y, _$r = this.Mm(f, i.fontFamily, i.isBold, i.isItalic), this.zr.font = _$r;
                                var _$_ = this.Cm(n.lineHeight, f, i.fontSize);
                                for(u = 0, e = 0; e < t1.length; ++e){
                                    var m = OD(this.zr, t1[e], _$r);
                                    u += DD(t1[e], m, _$d, this.Lm(this.zr, _$r)).length * _$_;
                                }
                                u > w ? p = _$y - 1 : g = _$y;
                            }
                            0 === g ? Q(4003) : (f = g, _$r = this.Mm(f, i.fontFamily, i.isBold, i.isItalic), this.zr.font = _$r);
                        } else {
                            for(u = t1.length * this.Cm(n.lineHeight, f, i.fontSize), e = 0; e < t1.length; ++e)o < h[e] && (o = h[e]);
                            var b = (_$c.width - v.width) * l / o, k = _$c.height * l / u;
                            f = i.actualFontSize * Math.min(1, b, k) | 0, _$r = this.Mm(f, i.fontFamily, i.isBold, i.isItalic), this.zr.font = _$r;
                        }
                        i.actualFontSize = f, i.fontDesc = _$r;
                    }
                }, i.Pm = function(t1, i, n, s) {
                    if (n.wrapping && this.zr) {
                        var _$r = [], h = s.nodeContentSize.width * this.pm, e = this.Mm(i.actualFontSize, i.fontFamily, i.isBold, i.isItalic);
                        this.zr.font = e;
                        for(var u = 0; u < t1.length; ++u){
                            var o = OD(this.zr, t1[u], e), f = DD(t1[u], o, h, this.Lm(this.zr, e));
                            _$r = _$r.concat(f);
                        }
                        s.parsedString = _$r, i.fontDesc = e;
                    }
                }, i.Lm = function(t1, i) {
                    return function(n) {
                        return OD(t1, n, i);
                    };
                }, i.Dm = function(t1, i, n) {
                    return t1.map(function(t1) {
                        return OD(i, t1, n);
                    });
                }, i.Tm = function(t1, i) {
                    var n = 0, s = 0, _$r = 0, h = 0, e = 0, u = i.contentSizeExtend, o = i.canvasPadding;
                    if (u.width = u.height = 0, t1.isOutlined && (n = s = _$r = h = e = t1.outlineWidth, u.width = u.height = 2 * e), t1.hasShadow) {
                        var f = t1.shadowBlur + e, _$c = t1.shadowOffsetX, a = t1.shadowOffsetY;
                        _$r = Math.max(_$r, -_$c + f), h = Math.max(h, _$c + f), n = Math.max(n, a + f), s = Math.max(s, -a + f);
                    }
                    if (t1.isItalic) {
                        var v = t1.fontSize * Math.tan(.20943951);
                        h += v, u.width += v;
                    }
                    o.x = _$r, o.y = n, o.width = _$r + h, o.height = n + s;
                }, i.Rm = function(t1, i, n) {
                    var s = n.canvasSize;
                    s.width = Math.min(s.width, 2048), s.height = Math.min(s.height, 2048);
                    var _$r = this.Hs, h = this.zr;
                    _$r.width = s.width, _$r.height = s.height, h.font = t1.fontDesc, h.textAlign = JF[i.horizontalAlign], h.textBaseline = "alphabetic";
                }, i.Bm = function(t1, i, n) {
                    var s = 0, _$r = n.canvasSize, h = n.canvasPadding;
                    2 === i.horizontalAlign ? s = _$r.width - h.width : 1 === i.horizontalAlign && (s = (_$r.width - h.width) / 2);
                    var e = this.Cm(i.lineHeight, t1.actualFontSize, t1.fontSize) * (n.parsedString.length - 1), u = t1.actualFontSize * (1 - vD / 2);
                    if (0 !== i.verticalAlign) {
                        var o = e + h.height + t1.actualFontSize - _$r.height;
                        2 === i.verticalAlign ? u -= o += vD / 2 * t1.actualFontSize : u -= o / 2;
                    }
                    u += ZF * t1.actualFontSize, n.startPosition.set(s + h.x, u + h.y);
                }, i.Bp = function(t1, i, n, s) {
                    var _$r = this.zr, h = this.Hs;
                    if (_$r && h) {
                        _$r.clearRect(0, 0, h.width, h.height), _$r.font = t1.fontDesc, this.Bm(t1, i, n);
                        var e = this.Cm(i.lineHeight, t1.actualFontSize, t1.fontSize);
                        _$r.lineJoin = "round", t1.isOutlined ? _$r.fillStyle = "rgba(" + t1.outlineColor.r + ", " + t1.outlineColor.g + ", " + t1.outlineColor.b + ", " + tU + ")" : _$r.fillStyle = "rgba(" + t1.color.r + ", " + t1.color.g + ", " + t1.color.b + ", " + tU + ")", _$r.fillRect(0, 0, h.width, h.height), _$r.fillStyle = "rgb(" + t1.color.r + ", " + t1.color.g + ", " + t1.color.b + ")";
                        var u = n.startPosition, o = new Or(u.x, u.y), f = o.x, _$c = 0;
                        this.Fm(o, e, t1, i, n);
                        for(var a = n.parsedString, v = 0; v < a.length; ++v)_$c = o.y + v * e, t1.hasShadow && (this.Um(t1), _$r.fillText(a[v], f, _$c)), t1.isOutlined && (this.xm(t1), _$r.strokeText(a[v], f, _$c)), t1.hasShadow && !t1.isOutlined || _$r.fillText(a[v], f, _$c);
                        t1.hasShadow && (_$r.shadowColor = "transparent"), this.jm(s);
                    }
                }, i.jm = function(t1) {
                    var i, n = this.Hs;
                    t1.texture && n && (i = _instanceof(t1.texture, sD) ? t1.texture.texture : t1.texture, 0 !== n.width && 0 !== n.height && (i.getGFXTexture(), i.getGFXSampler(), i.reset({
                        width: n.width,
                        height: n.height,
                        mipmapLevel: 1
                    }), i.uploadData(n), i.setWrapMode(2, 2), _instanceof(t1.texture, sD) && (t1.texture.rect = new sh(0, 0, n.width, n.height), t1.texture.gp()), A.director.root && A.director.root.batcher2D && A.director.root.batcher2D.Er(i.getHash())));
                }, i.Fm = function(t1, i, n, s, r) {
                    if (n.hasShadow || n.isOutlined || n.isUnderline) {
                        for(var h = this.zr, e = r.parsedString, u = e.length > 1 && n.hasShadow, o = this.Lm(this.zr, n.fontDesc), f = 0, _$c = 0, a = 0; a < e.length; ++a)if (f = t1.x, _$c = t1.y + a * i, u && (n.hasShadow && (this.Um(n), h.fillText(e[a], f, _$c)), n.isOutlined && (this.xm(n), h.strokeText(e[a], f, _$c)), n.hasShadow && !n.isOutlined || h.fillText(e[a], f, _$c)), n.isUnderline) {
                            var v = o(e[a]), l = new Or;
                            2 === s.horizontalAlign ? l.x = t1.x - v : 1 === s.horizontalAlign ? l.x = t1.x - v / 2 : l.x = t1.x, l.y = _$c + n.actualFontSize / 8, h.fillRect(l.x, l.y, v, n.underlineHeight * this.pm);
                        }
                        u && (h.shadowColor = "transparent");
                    }
                }, i.xm = function(t1) {
                    var i = this.zr;
                    i.shadowBlur = 0, i.shadowOffsetX = 0, i.shadowOffsetY = 0, i.strokeStyle = "rgba(" + t1.outlineColor.r + ", " + t1.outlineColor.g + ", " + t1.outlineColor.b + ", " + t1.outlineColor.a / 255 + ")", i.lineWidth = 2 * t1.outlineWidth * this.pm;
                }, i.Um = function(t1) {
                    var i = this.zr, n = this.pm;
                    i.shadowColor = "rgba(" + t1.shadowColor.r + ", " + t1.shadowColor.g + ", " + t1.shadowColor.b + ", " + t1.shadowColor.a / 255 + ")", i.shadowBlur = t1.shadowBlur * n, i.shadowOffsetX = t1.shadowOffsetX * n, i.shadowOffsetY = -t1.shadowOffsetY * n;
                }, i.Im = function(t1, i, n, s, r, h, e) {
                    t1 ? this.Gm(i, n, s, r, h, e) : (this.Hm(r), e(i, s, r));
                }, i.Hm = function(t1) {
                    var i = t1.vertexBuffer, n = t1.quadCount;
                    if (i.length !== n) {
                        for(var s = i.length; s < n; s++)i.push({
                            x: 0,
                            y: 0,
                            z: 0,
                            u: 0,
                            v: 0,
                            color: Yr.WHITE.clone()
                        });
                        i.length = n;
                    }
                }, i._m = function(t1, i) {
                    var n = i.nodeContentSize, s = n.width, _$r = n.height;
                    3 === t1.overFlow && (_$r = 0), 0 === t1.overFlow && (s = 0, _$r = 0), t1.textWidthTemp = s, t1.textHeightTemp = _$r, t1.textDimensions.width = s, t1.textDimensions.height = _$r, t1.maxLineWidth = s;
                }, i.km = function(t1) {
                    t1.bmfontScale = t1.actualFontSize / (t1.originFontSize * this.pm);
                }, i.Am = function(t1, i, n) {
                    var _$r = n.length;
                    if (t1.fntConfig) {
                        var h = t1.fntConfig.kerningDict, e = i.horizontalKerning;
                        if (h && 0 !== h.length) for(var u = -1, o = 0; o < _$r; ++o){
                            var f = n.charCodeAt(o), _$c = h[u << 16 | 65535 & f] || 0;
                            e[o] = o < _$r - 1 ? _$c : 0, u = f;
                        }
                    }
                }, i.Em = function(t1, i, n, s) {
                    this.Vm(t1, i, n, s, this.Wm), 2 === i.overFlow && (t1.fontSize > 0 && this.zm(t1, i, n, s, this) && this.$m(t1, i, n, s, this.zm), t1.fontSize > 0 && this.Xm(i, n) && this.$m(t1, i, n, s, this.qm)), this.Ym(n, s);
                }, i.Ym = function(t1, i) {
                    for(var n = [], s = "", _$r = 0, h = 0, e = ID(i); _$r < e; ++_$r){
                        var u = this.dm[_$r];
                        u.valid && (h === u.line ? s += u.char : (n = n.concat(s), h = u.line, s = ""));
                    }
                    t1.parsedString = n.concat(s);
                }, i.Vm = function(t1, i, n, s, r) {
                    i.linesWidth.length = 0;
                    for(var e = s.length, u = 0, o = 0, f = 0, _$c = 0, a = 0, v = 0, l = 0, _$d = null, w = 0; w < e;){
                        var g = RD(s, w);
                        if ("\n" !== g) {
                            for(var p = r(t1, i, s, w, e), _$y = v, _$_ = l, m = a, b = o, k = !1, A = new Or, E = 0; E < p; ++E){
                                var T = w + E;
                                if ("\r" !== (g = RD(s, T))) if (_$d = pL.fontAtlas.getLetterDefinitionForChar(g, pL)) {
                                    var S = b + _$d.offsetX * t1.bmfontScale - pL.margin;
                                    if (i.wrapping && i.maxLineWidth > 0 && o > 0 && S + _$d.w * t1.bmfontScale > i.maxLineWidth && !SD(g)) {
                                        i.linesWidth.push(a), a = 0, u++, o = 0, f -= i.lineHeight * this.Km(t1, i) + 0, k = !0;
                                        break;
                                    }
                                    A.x = S, A.y = f - _$d.offsetY * t1.bmfontScale, this.Jm(A, g, T, u), T + 1 < i.horizontalKerning.length && T < e - 1 && (b += i.horizontalKerning[T + 1] * t1.bmfontScale), b += _$d.xAdvance * t1.bmfontScale + i.spacingX, m = A.x + _$d.w * t1.bmfontScale, _$y < A.y && (_$y = A.y), _$_ > A.y - _$d.h * t1.bmfontScale && (_$_ = A.y - _$d.h * t1.bmfontScale);
                                } else this.Qm(T, g), null != t1.fntConfig ? Q(16354, t1.fntConfig.atlasName, g) : Q(16355, t1.fontFamily, g);
                                else this.Qm(T, g);
                            }
                            k || (o = b, v < _$y && (v = _$y), l > _$_ && (l = _$_), _$c < (a = m) && (_$c = a), w += p);
                        } else i.linesWidth.push(a), a = 0, u++, o = 0, f -= i.lineHeight * this.Km(t1, i) + 0, this.Qm(w, g), w++;
                    }
                    i.linesWidth.push(a), i.numberOfLines = u + 1, i.textDesiredHeight = i.numberOfLines * i.lineHeight * this.Km(t1, i), i.numberOfLines > 1 && (i.textDesiredHeight += 0 * (i.numberOfLines - 1));
                    var _$O = n.nodeContentSize;
                    return _$O.width = i.textWidthTemp, _$O.height = i.textHeightTemp, i.textWidthTemp <= 0 && (_$O.width = parseFloat(_$c.toFixed(2)) + 2 * pL.margin), i.textHeightTemp <= 0 && (_$O.height = parseFloat(i.textDesiredHeight.toFixed(2)) + 2 * pL.margin), i.tailoredTopY = _$O.height, i.tailoredBottomY = 0, v > 0 && (i.tailoredTopY = _$O.height + v), l < -i.textDesiredHeight && (i.tailoredBottomY = i.textDesiredHeight + l), !0;
                }, i.Qm = function(t1, i) {
                    var n = this.dm;
                    if (t1 >= n.length) {
                        var s = new iU;
                        n.push(s);
                    }
                    n[t1].char = i, n[t1].hash = "" + MD(i, 0) + pL.hash, n[t1].valid = !1;
                }, i.Jm = function(t1, i, n, s) {
                    var _$r = this.dm;
                    if (n >= _$r.length) {
                        var h = new iU;
                        _$r.push(h);
                    }
                    var e = "" + MD(i, 0) + pL.hash;
                    _$r[n].line = s, _$r[n].char = i, _$r[n].hash = e, _$r[n].valid = pL.fontAtlas.getLetter(e).valid, _$r[n].x = t1.x, _$r[n].y = t1.y;
                }, i.Wm = function(t1, i, n, s, r) {
                    var h = RD(n, s);
                    if (TD(h) || "\n" === h || SD(h)) return 1;
                    var e = pL.fontAtlas, u = 1, o = e.getLetterDefinitionForChar(h, pL);
                    if (!o) return u;
                    for(var f = o.xAdvance * t1.bmfontScale + i.spacingX, _$c = s + 1; _$c < r && (h = RD(n, _$c), o = e.getLetterDefinitionForChar(h, pL)) && !(f + o.offsetX * t1.bmfontScale + o.w * t1.bmfontScale > i.maxLineWidth && !SD(h) && i.maxLineWidth > 0 || (f += o.xAdvance * t1.bmfontScale + i.spacingX, "\n" === h || SD(h) || TD(h))); ++_$c)u++;
                    return u;
                }, i.Om = function(t1, i, n) {
                    var s = n.nodeContentSize;
                    switch(i.linesOffsetX.length = 0, i.letterOffsetY = 0, i.horizontalAlign){
                        case 0:
                            for(var _$r = 0; _$r < i.numberOfLines; ++_$r)i.linesOffsetX.push(0);
                            break;
                        case 1:
                            for(var h = 0, e = i.linesWidth.length; h < e; h++)i.linesOffsetX.push((s.width - i.linesWidth[h]) / 2);
                            break;
                        case 2:
                            for(var u = 0, o = i.linesWidth.length; u < o; u++)i.linesOffsetX.push(s.width - i.linesWidth[u]);
                    }
                    if (i.letterOffsetY = s.height, 0 !== i.verticalAlign) {
                        var f = s.height - i.textDesiredHeight + i.lineHeight * this.Km(t1, i) - t1.originFontSize * this.pm * t1.bmfontScale;
                        2 === i.verticalAlign ? i.letterOffsetY -= f : i.letterOffsetY -= f / 2;
                    }
                }, i.Km = function(t1, i) {
                    return 2 === i.overFlow ? t1.bmfontScale : 1;
                }, i.zm = function(t1, i, n) {
                    return i.textDesiredHeight > n.nodeContentSize.height;
                }, i.qm = function(t1, i, n, s, r) {
                    for(var h = !1, e = 0, u = ID(s); e < u; ++e){
                        var o = r.dm[e];
                        if (o.valid) {
                            var f = pL.fontAtlas.getLetterDefinitionForChar(o.char, pL);
                            if (!f) continue;
                            var _$c = o.x + f.w * t1.bmfontScale, a = o.line;
                            if (i.textWidthTemp > 0) {
                                var v = n.nodeContentSize;
                                if (i.wrapping) {
                                    if (i.linesWidth[a] > v.width && (_$c > v.width || _$c < 0)) {
                                        h = !0;
                                        break;
                                    }
                                } else if (_$c > v.width) {
                                    h = !0;
                                    break;
                                }
                            }
                        }
                    }
                    return h;
                }, i.Xm = function(t1, i) {
                    for(var n = 0, s = t1.linesWidth.length; n < s; ++n)if (t1.linesWidth[n] > i.nodeContentSize.width) return !0;
                    return !1;
                }, i.$m = function(t1, i, n, s, r) {
                    for(var h = 0, e = 0 | t1.actualFontSize, u = 0; h < e;){
                        var o = u = h + e + 1 >> 1;
                        if (o <= 0) break;
                        t1.bmfontScale = o / (t1.originFontSize * this.pm), this.Vm(t1, i, n, s, this.Wm), this.Om(t1, i, n), r(t1, i, n, s, this) ? e = u - 1 : h = u;
                    }
                    h >= 0 && this.Zm(t1, i, n, s, h);
                }, i.Zm = function(t1, i, n, s, r) {
                    var h = !0;
                    r || (r = .1, h = !1), t1.actualFontSize = r, h && (this.km(t1), this.Vm(t1, i, n, s, this.Wm));
                }, i.Gm = function(t1, i, n, s, r, h) {
                    for(var e = pL.fontAtlas, u = t1.spriteFrame ? t1.spriteFrame.texture : e.getTexture(), o = n.nodeContentSize, f = s.uiTransAnchorX * o.width, _$c = s.uiTransAnchorY * o.height, a = 0, v = ID(r); a < v; ++a){
                        var l = this.dm[a];
                        if (l.valid) {
                            var _$d = e.getLetter(l.hash);
                            if (_$d) {
                                var w = this.wm;
                                w.height = _$d.h, w.width = _$d.w, w.x = _$d.u, w.y = _$d.v;
                                var g = l.y + i.letterOffsetY;
                                if (i.textHeightTemp > 0) {
                                    if (g > i.tailoredTopY) {
                                        var p = g - i.tailoredTopY;
                                        w.y += p, w.height -= p, g -= p;
                                    }
                                    g - w.height * t1.bmfontScale < i.tailoredBottomY && 1 === i.overFlow && (w.height = g < i.tailoredBottomY ? 0 : (g - i.tailoredBottomY) / t1.bmfontScale);
                                }
                                var _$y = l.line, _$_ = l.x + _$d.w / 2 * t1.bmfontScale + i.linesOffsetX[_$y];
                                if (i.textWidthTemp > 0 && this.tb(i, n, _$_, _$y) && 1 === i.overFlow && (w.width = 0), w.height > 0 && w.width > 0) {
                                    var m = this.ib(t1), b = l.x + i.linesOffsetX[l.line], k = s.quadCount;
                                    s.quadCount += 4, this.Hm(s), h(t1, n, s, k, u, w, m, b - f, g - _$c);
                                }
                            } else nt(16353);
                        }
                    }
                    return !0;
                }, i.tb = function(t1, i, n, s) {
                    var _$r = i.nodeContentSize, h = t1.linesWidth[s], e = n > _$r.width || n < 0;
                    return t1.wrapping ? h > _$r.width && e : e;
                }, i.ib = function(t1) {
                    var i = t1.spriteFrame;
                    if (!i) return !1;
                    var n = i.isRotated(), s = i.getOriginalSize(), _$r = i.getRect(), h = i.getOffset(), e = h.x + (s.width - _$r.width) / 2, u = h.y - (s.height - _$r.height) / 2, o = this.wm;
                    if (n) {
                        var f = o.x;
                        o.x = _$r.x + _$r.height - o.y - o.height - u, o.y = f + _$r.y - e, o.y < 0 && (o.height += u);
                    } else o.x += _$r.x - e, o.y += _$r.y + u;
                    return n;
                }, t1;
            }();
            nU.instance = void 0, nU.instance = new nU;
            var sU = new gL(64, 64), rU = new eL(null), hU = null, eU = null, uU = null, oU = null, fU = null, cU = function() {
                function t1() {}
                var i = t1.prototype;
                return i.updateProcessingData = function(t1, i, n, s, r, h) {
                    t1.fontSize = r.fontSize, t1.actualFontSize = r.fontSize, t1.originFontSize = uU ? uU.fontSize : r.fontSize, i.horizontalAlign = r.horizontalAlign, i.verticalAlign = r.verticalAlign, i.spacingX = r.spacingX;
                    var e = r.overflow;
                    i.overFlow = e, i.lineHeight = r.lineHeight;
                    var u = n.nodeContentSize;
                    u.width = h.width, u.height = h.height, 0 === e ? (i.wrapping = !1, u.width += 2 * pL.margin, u.height += 2 * pL.margin) : 3 === e ? (i.wrapping = !0, u.height += 2 * pL.margin) : i.wrapping = r.enableWrapText, s.uiTransAnchorX = h.anchorX, s.uiTransAnchorY = h.anchorY, pL.lineHeight = r.lineHeight, pL.fontSize = r.fontSize, t1.spriteFrame = oU, t1.fntConfig = uU, t1.fontFamily = pL.fontFamily, t1.color.set(r.color);
                }, i.updateRenderData = function(t1) {
                    if (t1.renderData && hU !== t1) {
                        if (t1.renderData.vertDirty) {
                            eU = (hU = t1).node.io();
                            var i = t1.renderData, n = nU.instance, s = t1.textStyle, _$r = t1.textLayout, h = t1.textLayoutData, e = t1.textRenderData;
                            s.fontScale = XN.getScaleX(), this._updateFontFamily(t1), this.updateProcessingData(s, _$r, h, e, t1, eU), this._updateLabelInfo(t1), s.fontDesc = pL.fontDesc, n.processingString(!0, s, _$r, h, t1.string), e.quadCount = 0, n.generateRenderInfo(!0, s, _$r, h, e, t1.string, this.generateVertexData), i.dataLength !== e.quadCount && (this.resetRenderData(t1), i.dataLength = e.quadCount, i.resize(i.dataLength, i.dataLength / 2 * 3));
                            for(var u = i.data, o = 0, f = e.quadCount; o < f; o++)u[o] = e.vertexBuffer[o];
                            var _$c = i.indexCount;
                            this.createQuadIndices(_$c), i.chunk.setIndexBuffer(fU), hU.actualFontSize = s.actualFontSize, eU.setContentSize(h.nodeContentSize), this.updateUVs(t1), i.vertDirty = !1, hU = null, this._resetProperties();
                        }
                        t1.spriteFrame && t1.renderData.updateRenderData(t1, t1.spriteFrame);
                    }
                }, i.updateUVs = function(t1) {
                    var i = t1.renderData;
                    if (i) for(var n = i.chunk.vb, s = i.vertexCount, _$r = i.floatStride, h = i.data, e = 3, u = 0; u < s; u++){
                        var o = h[u];
                        n[e] = o.u, n[e + 1] = o.v, e += _$r;
                    }
                }, i.updateColor = function(t1) {
                    t1.renderData;
                }, i.resetRenderData = function(t1) {
                    var i = t1.renderData;
                    i && (i.dataLength = 0, i.resize(0, 0));
                }, i.generateVertexData = function(t1, i, n, s, r, h, e, u, o) {
                    var _$c = t1.bmfontScale, a = n.vertexBuffer, v = r.width, l = r.height, _$d = h.width, w = h.height, g = 0, p = 0, _$y = 0, _$_ = 0;
                    e ? (g = h.x / v, _$_ = (h.x + w) / v, p = (h.y + _$d) / l, _$y = h.y / l, a[s].u = g, a[s].v = _$y, a[s + 1].u = g, a[s + 1].v = p, a[s + 2].u = _$_, a[s + 2].v = _$y, a[s + 3].u = _$_, a[s + 3].v = p) : (g = h.x / v, _$_ = (h.x + _$d) / v, p = (h.y + w) / l, _$y = h.y / l, a[s].u = g, a[s].v = p, a[s + 1].u = _$_, a[s + 1].v = p, a[s + 2].u = g, a[s + 2].v = _$y, a[s + 3].u = _$_, a[s + 3].v = _$y), a[s].x = u, a[s].y = o - w * _$c, a[s + 1].x = u + _$d * _$c, a[s + 1].y = o - w * _$c, a[s + 2].x = u, a[s + 2].y = o, a[s + 3].x = u + _$d * _$c, a[s + 3].y = o;
                }, i._updateFontFamily = function(t1) {
                    var i = t1.font;
                    oU = i.spriteFrame, uU = i.fntConfig, pL.fontAtlas = i.fontDefDictionary, pL.fontAtlas || (2 === t1.cacheMode ? pL.fontAtlas = sU : pL.fontAtlas = rU), sP.packToDynamicAtlas(t1, oU);
                }, i._updateLabelInfo = function() {
                    pL.hash = "", pL.margin = 0;
                }, i._resetProperties = function() {
                    uU = null, oU = null, pL.hash = "", pL.margin = 0;
                }, i.createQuadIndices = function(t1) {
                    if (t1 % 6 == 0) {
                        var i = t1 / 6;
                        fU = new Uint16Array(t1);
                        for(var n = 0, s = 0; s < i; s++)fU[n++] = 0 + 4 * s, fU[n++] = 1 + 4 * s, fU[n++] = 2 + 4 * s, fU[n++] = 1 + 4 * s, fU[n++] = 3 + 4 * s, fU[n++] = 2 + 4 * s;
                    } else rt(16308);
                }, t1;
            }(), aU = new Yr(255, 255, 255, 255), lU = new (function(t1) {
                function i() {
                    return t1.apply(this, arguments) || this;
                }
                h(i, t1);
                var n = i.prototype;
                return n.createData = function(t1) {
                    var _$i = t1.requestRenderData();
                    return _$i.resize(0, 0), _$i;
                }, n.fillBuffers = function(t1) {
                    var _$i = t1.node;
                    aU.set(t1.color), aU.a = 255 * _$i._uiProps.opacity, Ew(_$i, 0, t1.renderData, aU);
                }, i;
            }(cU)), dU = null, wU = function(t1) {
                function i() {
                    return t1.apply(this, arguments) || this;
                }
                h(i, t1);
                var n = i.prototype;
                return n.getAssemblerData = function() {
                    return dU || (dU = new gL(1024, 1024)), dU.getTexture();
                }, n._updateFontFamily = function(t1) {
                    pL.fontAtlas = dU, pL.fontFamily = this._getFontFamily(t1), t1.enableOutline && t1.outlineWidth > 0 ? (pL.isOutlined = !0, pL.margin = t1.outlineWidth, pL.out = t1.outlineColor.clone(), pL.out.a = t1.outlineColor.a * t1.color.a / 255) : (pL.isOutlined = !1, pL.margin = 0);
                }, n._getFontFamily = function(t1) {
                    var _$i = "Arial";
                    return t1.useSystemFont ? _$i = t1.fontFamily || "Arial" : t1.font && (_$i = t1.font._nativeAsset || "Arial"), _$i;
                }, n._updateLabelInfo = function(t1) {
                    pL.fontDesc = this._getFontDesc(), pL.color.set(t1.color), pL.hash = yL(pL);
                }, n._getFontDesc = function() {
                    return pL.fontSize.toString() + "px " + pL.fontFamily;
                }, i;
            }(cU), gU = new Yr(255, 255, 255, 255), yU = new (function(t1) {
                function i() {
                    return t1.apply(this, arguments) || this;
                }
                h(i, t1);
                var n = i.prototype;
                return n.createData = function(t1) {
                    var _$i = t1.requestRenderData();
                    return _$i.resize(0, 0), _$i;
                }, n.fillBuffers = function(t1) {
                    if (t1.renderData) {
                        var _$i = t1.node;
                        gU.a = 255 * _$i._uiProps.opacity, Ew(_$i, 0, t1.renderData, gU);
                    }
                }, n.updateColor = function(t1) {
                    t1.renderData;
                }, i;
            }(wU));
            DF.Overflow;
            var _U = function() {
                function t1() {}
                var i = t1.prototype;
                return i.updateProcessingData = function(t1, i, n, s, r, h) {
                    t1.isSystemFontUsed = r.useSystemFont, t1.fontSize = r.fontSize, n.nodeContentSize.width = n.canvasSize.width = h.width, n.nodeContentSize.height = n.canvasSize.height = h.height, i.lineHeight = r.lineHeight, i.overFlow = r.overflow, 0 === r.overflow ? i.wrapping = !1 : 3 === r.overflow ? i.wrapping = !0 : i.wrapping = r.enableWrapText, t1.isBold = r.isBold, t1.isItalic = r.isItalic, t1.isUnderline = r.isUnderline, t1.underlineHeight = r.underlineHeight, r.enableOutline && r.outlineWidth > 0 ? (t1.isOutlined = !0, t1.outlineColor.set(r.outlineColor), t1.outlineWidth = r.outlineWidth) : t1.isOutlined = !1, r.enableShadow && (r.shadowBlur > 0 || !Fn(r.shadowOffset.x, 0) || !Fn(r.shadowOffset.y, 0)) ? (t1.hasShadow = !0, t1.shadowColor.set(r.shadowColor), t1.shadowBlur = r.shadowBlur, t1.shadowOffsetX = r.shadowOffset.x, t1.shadowOffsetY = r.shadowOffset.y) : t1.hasShadow = !1, t1.color.set(r.color), s.texture = r.spriteFrame, s.uiTransAnchorX = h.anchorX, s.uiTransAnchorY = h.anchorY, i.horizontalAlign = r.horizontalAlign, i.verticalAlign = r.verticalAlign;
                }, i.getAssemblerData = function() {
                    var _$t = DF._canvasPool.wi();
                    return _$t.canvas.width = _$t.canvas.height = 1, _$t;
                }, i.resetAssemblerData = function(t1) {
                    t1 && DF._canvasPool.pi(t1);
                }, i.updateRenderData = function(t1) {
                    var i = t1.renderData;
                    if (i) {
                        if (i.vertDirty) {
                            var n = t1.node.io(), s = nU.instance, _$r = t1.textStyle, h = t1.textLayout, e = t1.textLayoutData, u = t1.textRenderData;
                            _$r.fontScale = XN.getScaleX(), this.updateProcessingData(_$r, h, e, u, t1, n), s.setCanvasUsed(t1.assemblerData.canvas, t1.assemblerData.context), _$r.fontFamily = this._updateFontFamily(t1), this._resetDynamicAtlas(t1), s.processingString(!1, _$r, h, e, t1.string), s.generateRenderInfo(!1, _$r, h, e, u, t1.string, this.generateVertexData), i.textureDirty = !0, this._calDynamicAtlas(t1, e), t1.actualFontSize = _$r.actualFontSize, n.setContentSize(e.nodeContentSize);
                            var o = i.data, f = u.vertexBuffer;
                            o[0] = f[0], o[1] = f[1], o[2] = f[2], o[3] = f[3], this.updateUVs(t1), i.vertDirty = !1, t1.contentWidth = e.nodeContentSize.width;
                        }
                        t1.spriteFrame && t1.renderData.updateRenderData(t1, t1.spriteFrame);
                    }
                }, i.generateVertexData = function(t1, i, n) {
                    var s = n.vertexBuffer, _$r = i.nodeContentSize, h = _$r.width, e = _$r.height, u = n.uiTransAnchorX * h, o = n.uiTransAnchorY * e;
                    s[0].x = -u, s[0].y = -o, s[1].x = h - u, s[1].y = -o, s[2].x = -u, s[2].y = e - o, s[3].x = h - u, s[3].y = e - o;
                }, i.updateVertexData = function() {}, i.updateUVs = function() {}, i._updateFontFamily = function(t1) {
                    return t1.useSystemFont ? t1.fontFamily || "Arial" : t1.font && t1.font._nativeAsset || "Arial";
                }, i._calDynamicAtlas = function(t1, i) {
                    if (!(1 !== t1.cacheMode || i.canvasSize.width <= 0 || i.canvasSize.height <= 0)) {
                        var n = t1.ttfSpriteFrame;
                        sP.packToDynamicAtlas(t1, n);
                    }
                }, i._resetDynamicAtlas = function(t1) {
                    if (1 === t1.cacheMode) {
                        var i = t1.ttfSpriteFrame;
                        sP.deleteAtlasSpriteFrame(i), i._resetDynamicAtlasFrame();
                    }
                }, t1;
            }(), mU = Yr.WHITE.clone(), bU = Uint16Array.from([
                0,
                1,
                2,
                1,
                3,
                2
            ]), AU = new (function(t1) {
                function i() {
                    return t1.apply(this, arguments) || this;
                }
                h(i, t1);
                var n = i.prototype;
                return n.createData = function(t1) {
                    var _$i = t1.requestRenderData();
                    _$i.dataLength = 4, _$i.resize(4, 6), t1.textRenderData.quadCount = 4;
                    for(var n = _$i.chunk.vb, s = _$i.floatStride, _$r = [
                        {
                            u: 0,
                            v: 1
                        },
                        {
                            u: 1,
                            v: 1
                        },
                        {
                            u: 0,
                            v: 0
                        },
                        {
                            u: 1,
                            v: 0
                        }
                    ], _$h = 3, e = 0, u = _$i.dataLength; e < u; ++e)n[_$h] = _$r[e].u, n[_$h + 1] = _$r[e].v, _$h += s;
                    for(var o = 5, f = 0; f < _$i.dataLength; f++)Yr.toArray(n, mU, o), o += s;
                    return _$i.chunk.setIndexBuffer(bU), _$i;
                }, n.fillBuffers = function(t1) {
                    var _$i = t1.renderData;
                    if (_$i) {
                        for(var n = _$i.chunk, s = _$i.data, _$r = t1.node, _$h = n.vb, e = _$r.worldMatrix, u = _$i.floatStride, o = 0, f = s.length, _$c = 0; _$c < f; _$c++){
                            var a = s[_$c], v = a.x, l = a.y, _$d = e.m03 * v + e.m07 * l + e.m15;
                            _$d = _$d ? 1 / _$d : 1, _$h[0 + (o = _$c * u)] = (e.m00 * v + e.m04 * l + e.m12) * _$d, _$h[o + 1] = (e.m01 * v + e.m05 * l + e.m13) * _$d, _$h[o + 2] = (e.m02 * v + e.m06 * l + e.m14) * _$d;
                        }
                        var w = n.vertexOffset, g = n.meshBuffer, p = n.meshBuffer.iData, _$y = g.indexOffset;
                        p[_$y++] = w, p[_$y++] = w + 1, p[_$y++] = w + 2, p[_$y++] = w + 2, p[_$y++] = w + 1, p[_$y++] = w + 3, g.indexOffset += 6;
                    }
                }, n.updateVertexData = function(t1) {
                    var _$i = t1.renderData;
                    if (_$i) {
                        var n = t1.node.io(), s = n.width, _$r = n.height, _$h = n.anchorX * s, e = n.anchorY * _$r, u = _$i.data;
                        u[0].x = -_$h, u[0].y = -e, u[1].x = s - _$h, u[1].y = -e, u[2].x = -_$h, u[2].y = _$r - e, u[3].x = s - _$h, u[3].y = _$r - e;
                    }
                }, n.updateUVs = function(t1) {
                    var _$i = t1.renderData;
                    if (_$i && t1.ttfSpriteFrame) for(var n = _$i.chunk.vb, s = t1.ttfSpriteFrame.uv, _$r = _$i.floatStride, _$h = 3, e = 0; e < _$i.dataLength; ++e){
                        var u = 2 * e;
                        n[_$h] = s[u], n[_$h + 1] = s[u + 1], _$h += _$r;
                    }
                }, n.updateColor = function() {}, i;
            }(_U)), EU = t1("l", {
                getAssembler: function getAssembler(t1) {
                    var i = AU;
                    return _instanceof(t1.font, uL) ? i = lU : 2 === t1.cacheMode && (i = yU), i;
                }
            });
            DF.Assembler = EU, xF.FillType;
            var TU = new cr, SU = Uint16Array.from([
                0,
                1,
                2,
                1,
                3,
                2
            ]), IU = new (function() {
                function t1() {}
                var i = t1.prototype;
                return i.updateRenderData = function(t1) {
                    var i = t1.spriteFrame;
                    sP.packToDynamicAtlas(t1, i);
                    var n = t1.renderData;
                    if (n && i) {
                        if (!n.vertDirty) return;
                        var s = t1.fillStart, _$r = t1.fillRange;
                        _$r < 0 && (s += _$r, _$r = -_$r), _$r = (_$r = (_$r = s + _$r) > 1 ? 1 : _$r) < 0 ? 0 : _$r;
                        var h = (s = (s = s > 1 ? 1 : s) < 0 ? 0 : s) + (_$r = (_$r -= s) < 0 ? 0 : _$r);
                        h = h > 1 ? 1 : h, this.updateUVs(t1, s, h), this.nb(t1, s, h), n.updateRenderData(t1, i);
                    }
                }, i.updateUVs = function(t1, i, n) {
                    var s = t1.spriteFrame, _$r = t1.renderData;
                    if (_$r) {
                        var h = _$r.chunk.vb, e = s.width, u = s.height, o = s.rect, f = 0, _$c = 0, a = 0, v = 0, l = 0, _$d = 0, w = 0, g = 0, p = 0, _$y = 0;
                        s.isRotated() ? (f = o.x / e, _$c = (o.y + o.width) / u, a = l = f, w = p = (o.x + o.height) / e, _$d = _$y = _$c, v = g = o.y / u) : (f = o.x / e, _$c = (o.y + o.height) / u, a = w = f, l = p = (o.x + o.width) / e, v = _$d = _$c, g = _$y = o.y / u);
                        var _$_ = _$r.floatStride, m = 3;
                        switch(t1.fillType){
                            case 0:
                                h[m] = a + (l - a) * i, h[m + 1] = v + (_$d - v) * i, h[m += _$_] = a + (l - a) * n, h[m + 1] = v + (_$d - v) * n, h[m += _$_] = w + (p - w) * i, h[m + 1] = g + (_$y - g) * i, h[m += _$_] = w + (p - w) * n, h[m + 1] = g + (_$y - g) * n;
                                break;
                            case 1:
                                h[m] = a + (w - a) * i, h[m + 1] = v + (g - v) * i, h[m += _$_] = l + (p - l) * i, h[m + 1] = _$d + (_$y - _$d) * i, h[m += _$_] = a + (w - a) * n, h[m + 1] = v + (g - v) * n, h[m += _$_] = l + (p - l) * n, h[m + 1] = _$d + (_$y - _$d) * n;
                                break;
                            default:
                                rt(2626);
                        }
                    }
                }, i.nb = function(t1, i, n) {
                    var s = t1.renderData;
                    if (s) {
                        var _$r = s.data, h = t1.node.io(), e = h.width, u = h.height, o = h.anchorX * e, f = h.anchorY * u, _$c = -o, a = -f, v = e - o, l = u - f, _$d = 0;
                        switch(t1.fillType){
                            case 0:
                                _$d = _$c + (v - _$c) * n, _$c += (v - _$c) * i, v = _$d;
                                break;
                            case 1:
                                _$d = a + (l - a) * n, a += (l - a) * i, l = _$d;
                                break;
                            default:
                                rt(2626);
                        }
                        _$r[0].x = _$c, _$r[0].y = a, _$r[1].x = v, _$r[1].y = a, _$r[2].x = _$c, _$r[2].y = l, _$r[3].x = v, _$r[3].y = l;
                    }
                }, i.createData = function(t1) {
                    var i = t1.requestRenderData();
                    return i.dataLength = 4, i.resize(4, 6), i.chunk.setIndexBuffer(SU), i.data.forEach(function(t1) {
                        t1.z = 0;
                    }), i;
                }, i.sb = function(t1, i) {
                    t1.node.getWorldMatrix(TU);
                    var n = t1.renderData;
                    if (n) for(var s = n.floatStride, _$r = t1.renderData.data, h = i.vb, e = 0, u = 0; u < 4; u++){
                        var o = _$r[u], f = o.x, _$c = o.y, a = TU.m03 * f + TU.m07 * _$c + TU.m15;
                        a = a ? 1 / a : 1, h[e = u * s] = (TU.m00 * f + TU.m04 * _$c + TU.m12) * a, h[e + 1] = (TU.m01 * f + TU.m05 * _$c + TU.m13) * a, h[e + 2] = (TU.m02 * f + TU.m06 * _$c + TU.m14) * a;
                    }
                }, i.fillBuffers = function(t1) {
                    var i = t1.renderData;
                    if (i) {
                        var n = i.chunk;
                        (t1.B_ !== t1.node.flagChangedVersion || i.vertDirty) && (this.sb(t1, n), i.vertDirty = !1, t1.B_ = t1.node.flagChangedVersion), n.bufferId;
                        var s = n.vertexOffset, _$r = n.meshBuffer, h = n.meshBuffer.iData, e = _$r.indexOffset;
                        h[e++] = s, h[e++] = s + 1, h[e++] = s + 2, h[e++] = s + 2, h[e++] = s + 1, h[e++] = s + 3, _$r.indexOffset += 6;
                    }
                }, i.updateColor = function(t1) {
                    var i = t1.renderData;
                    if (i) for(var n = i.chunk.vb, s = i.floatStride, _$r = 5, h = t1.color, e = h.r / 255, u = h.g / 255, o = h.b / 255, f = t1.node._uiProps.opacity, _$c = 0; _$c < 4; _$c++)n[_$r] = e, n[_$r + 1] = u, n[_$r + 2] = o, n[_$r + 3] = f, _$r += s;
                }, t1;
            }()), RU = 2 * Math.PI, CU = new cr, NU = [
                new Or,
                new Or,
                new Or,
                new Or
            ], PU = [
                ,
                ,
                ,
                , 
            ], DU = Array(8), LU = [
                new Or,
                new Or,
                new Or,
                new Or
            ], BU = [
                new Or,
                new Or,
                new Or,
                new Or
            ], FU = new Or, UU = [
                new Or,
                new Or,
                new Or,
                new Or
            ];
            function xU(t1, i, n, s, r, h, e) {
                var u = Math.sin(h);
                u = Math.abs(u) > 1e-6 ? u : 0;
                var o = Math.cos(h), f = 0, _$c = 0;
                if (0 !== (o = Math.abs(o) > 1e-6 ? o : 0)) {
                    if (f = u / o, (t1 - r.x) * o > 0) {
                        var a = r.y + f * (t1 - r.x);
                        e[0].x = t1, e[0].y = a;
                    }
                    if ((i - r.x) * o > 0) {
                        var v = r.y + f * (i - r.x);
                        e[2].x = i, e[2].y = v;
                    }
                }
                if (0 !== u) {
                    if (_$c = o / u, (s - r.y) * u > 0) {
                        var l = r.x + _$c * (s - r.y);
                        e[3].x = l, e[3].y = s;
                    }
                    if ((n - r.y) * u > 0) {
                        var _$d = r.x + _$c * (n - r.y);
                        e[1].x = _$d, e[1].y = n;
                    }
                }
            }
            function jU(t1) {
                var i = t1.node.io(), n = i.width, s = i.height, _$r = i.anchorX * n, h = i.anchorY * s, e = -_$r, u = -h, o = n - _$r, f = s - h;
                PU[0] = e, PU[1] = u, PU[2] = o, PU[3] = f;
                var a = t1.fillCenter, v = FU.x = Math.min(Math.max(0, a.x), 1) * (o - e) + e, l = FU.y = Math.min(Math.max(0, a.y), 1) * (f - u) + u;
                NU[0].x = NU[3].x = e, NU[1].x = NU[2].x = o, NU[0].y = NU[1].y = u, NU[2].y = NU[3].y = f, UU.forEach(function(t1) {
                    Or.set(t1, 0, 0);
                }), v !== PU[0] && Or.set(UU[0], 3, 0), v !== PU[2] && Or.set(UU[2], 1, 2), l !== PU[1] && Or.set(UU[1], 0, 1), l !== PU[3] && Or.set(UU[3], 2, 3);
            }
            function GU(t1) {
                var i = t1.width, n = t1.height, s = t1.getRect(), _$r = 0, h = 0, e = 0, u = 0;
                t1.isRotated() ? (_$r = s.x / i, h = (s.x + s.height) / i, e = s.y / n, u = (s.y + s.width) / n, DU[0] = DU[2] = _$r, DU[4] = DU[6] = h, DU[3] = DU[7] = u, DU[1] = DU[5] = e) : (_$r = s.x / i, h = (s.x + s.width) / i, e = s.y / n, u = (s.y + s.height) / n, DU[0] = DU[4] = _$r, DU[2] = DU[6] = h, DU[1] = DU[3] = u, DU[5] = DU[7] = e);
            }
            function HU(t1, i) {
                var n = i.x - t1.x, s = i.y - t1.y;
                if (0 === n && 0 === s) return 0;
                if (0 === n) return s > 0 ? .5 * Math.PI : 1.5 * Math.PI;
                var _$r = Math.atan(s / n);
                return n < 0 && (_$r += Math.PI), _$r;
            }
            function VU(t1, i, n, s, r) {
                var e = PU[0], u = PU[1], o = PU[2], f = PU[3];
                t1[i].x = n.x, t1[i].y = n.y, t1[i + 1].x = s.x, t1[i + 1].y = s.y, t1[i + 2].x = r.x, t1[i + 2].y = r.y, WU((n.x - e) / (o - e), (n.y - u) / (f - u), t1, i), WU((s.x - e) / (o - e), (s.y - u) / (f - u), t1, i + 1), WU((r.x - e) / (o - e), (r.y - u) / (f - u), t1, i + 2);
            }
            function WU(t1, i, n, s) {
                var h = DU[0] + (DU[2] - DU[0]) * t1, e = DU[4] + (DU[6] - DU[4]) * t1, u = DU[1] + (DU[3] - DU[1]) * t1, o = DU[5] + (DU[7] - DU[5]) * t1, f = n[s];
                f.u = h + (e - h) * i, f.v = u + (o - u) * i;
            }
            for(var zU = function() {
                function t1() {}
                var i = t1.prototype;
                return i.createData = function(t1) {
                    return t1.requestRenderData();
                }, i.updateRenderData = function(t1) {
                    var i = t1.spriteFrame;
                    sP.packToDynamicAtlas(t1, i), this.updateUVs(t1);
                    var n = t1.renderData;
                    if (n && i) {
                        if (!n.vertDirty) return;
                        var s = n.data, _$r = t1.fillStart, h = t1.fillRange;
                        for(h < 0 && (_$r += h, h = -h); _$r >= 1;)_$r -= 1;
                        for(; _$r < 0;)_$r += 1;
                        var e = (_$r *= RU) + (h *= RU);
                        jU(t1), GU(i), xU(PU[0], PU[2], PU[1], PU[3], FU, _$r, LU), xU(PU[0], PU[2], PU[1], PU[3], FU, _$r + h, BU);
                        for(var u = 0, o = 0; o < 4; ++o){
                            var f = UU[o];
                            if (f) if (h >= RU) n.dataLength = u + 3, VU(s, u, FU, NU[f.x], NU[f.y]), u += 3;
                            else {
                                var _$c = HU(FU, NU[f.x]), a = HU(FU, NU[f.y]);
                                a < _$c && (a += RU), _$c -= RU, a -= RU;
                                for(var v = 0; v < 3; ++v)_$c >= e || (_$c >= _$r ? (n.dataLength = u + 3, VU(s, u, FU, NU[f.x], a >= e ? BU[o] : NU[f.y]), u += 3) : a > _$r && (a <= e ? (n.dataLength = u + 3, VU(s, u, FU, LU[o], NU[f.y])) : (n.dataLength = u + 3, VU(s, u, FU, LU[o], BU[o])), u += 3)), _$c += RU, a += RU;
                            }
                        }
                        0 === u && (n.dataLength = 0), n.resize(u, u), n.updateRenderData(t1, i);
                    }
                }, i.rb = function() {}, i.fillBuffers = function(t1) {
                    var i = t1.node, n = t1.renderData;
                    if (n) {
                        var s = n.chunk;
                        (t1.B_ !== i.flagChangedVersion || n.vertDirty) && (this.hb(t1, s), n.vertDirty = !1, t1.B_ = i.flagChangedVersion), this.eb(t1), s.bufferId;
                        for(var _$r = s.vertexOffset, h = s.meshBuffer, e = s.meshBuffer.iData, u = h.indexOffset, o = 0; o < n.indexCount; o++)e[u + o] = _$r + o;
                        h.indexOffset += n.indexCount, h.setDirty();
                    }
                }, i.ub = function() {}, i.hb = function(t1, i) {
                    t1.node.getWorldMatrix(CU);
                    var n = t1.renderData;
                    if (n) for(var s = n.floatStride, _$r = t1.renderData.data, h = i.vb, e = n.vertexCount, u = 0, o = 0; o < e; o++){
                        var f = _$r[o], _$c = f.x, a = f.y, v = CU.m03 * _$c + CU.m07 * a + CU.m15;
                        v = v ? 1 / v : 1, h[u + 0] = (CU.m00 * _$c + CU.m04 * a + CU.m12) * v, h[u + 1] = (CU.m01 * _$c + CU.m05 * a + CU.m13) * v, h[u + 2] = (CU.m02 * _$c + CU.m06 * a + CU.m14) * v, h[u + 3] = f.u, h[u + 4] = f.v, u += s;
                    }
                }, i.updateUVs = function(t1) {
                    var i = t1.renderData;
                    i && (i.vertDirty = !0, t1.po());
                }, i.eb = function(t1) {
                    var i = t1.renderData;
                    if (i) for(var n = i.chunk.vb, s = i.floatStride, _$r = i.vertexCount, h = 5, e = t1.color, u = e.r / 255, o = e.g / 255, f = e.b / 255, _$c = t1.node._uiProps.opacity, a = 0; a < _$r; a++)n[h] = u, n[h + 1] = o, n[h + 2] = f, n[h + 3] = _$c, h += s;
                }, i.updateColor = function() {}, t1;
            }(), $U = new zU, XU = Uint16Array.from([
                0,
                1,
                2,
                1,
                3,
                2
            ]), qU = function() {
                function t1() {}
                var i = t1.prototype;
                return i.createData = function(t1) {
                    var i = t1.requestRenderData();
                    return i.dataLength = 4, i.resize(4, 6), i.chunk.setIndexBuffer(XU), i;
                }, i.updateRenderData = function(t1) {
                    var i = t1.spriteFrame;
                    sP.packToDynamicAtlas(t1, i), this.updateUVs(t1);
                    var n = t1.renderData;
                    n && i && (n.vertDirty && this.nb(t1), n.updateRenderData(t1, i));
                }, i.ob = function(t1, i) {
                    var n = t1.renderData;
                    if (n) for(var s = i.vb, _$r = n.data, h = t1.node.worldMatrix, e = h.m00, u = h.m01, o = h.m02, f = h.m03, _$c = h.m04, a = h.m05, v = h.m06, l = h.m07, _$d = h.m12, w = h.m13, g = h.m14, p = h.m15, _$y = n.floatStride, _$_ = 0, m = _$r.length, b = 0; b < m; ++b){
                        var k = _$r[b], A = k.x, E = k.y, T = f * A + l * E + p;
                        T = T ? 1 / T : 1, s[0 + (_$_ = b * _$y)] = (e * A + _$c * E + _$d) * T, s[_$_ + 1] = (u * A + a * E + w) * T, s[_$_ + 2] = (o * A + v * E + g) * T;
                    }
                }, i.fillBuffers = function(t1) {
                    if (null !== t1) {
                        var i = t1.renderData;
                        if (i) {
                            var n = i.chunk;
                            (t1.B_ !== t1.node.flagChangedVersion || i.vertDirty) && (this.ob(t1, n), i.vertDirty = !1, t1.B_ = t1.node.flagChangedVersion);
                            var s = n.vertexOffset, _$r = n.meshBuffer, h = n.meshBuffer.iData, e = _$r.indexOffset;
                            h[e++] = s, h[e++] = s + 1, h[e++] = s + 2, h[e++] = s + 1, h[e++] = s + 3, h[e++] = s + 2, _$r.indexOffset += 6;
                        }
                    }
                }, i.nb = function(t1) {
                    var i = t1.renderData;
                    if (i) {
                        var n = t1.node.io(), s = i.data, _$r = n.width, h = n.height, e = n.anchorX * _$r, u = n.anchorY * h, o = 0, f = 0, _$c = 0, a = 0;
                        if (t1.trim) o = -e, f = -u, _$c = _$r - e, a = h - u;
                        else {
                            var v = t1.spriteFrame, l = v.originalSize, _$d = _$r / l.width, w = h / l.height, g = v.trimmedBorder;
                            o = g.x * _$d - e, f = g.z * w - u, _$c = _$r + g.y * _$d - e, a = h + g.w * w - u;
                        }
                        s[0].x = o, s[0].y = f, s[1].x = _$c, s[1].y = f, s[2].x = o, s[2].y = a, s[3].x = _$c, s[3].y = a, i.vertDirty = !0;
                    }
                }, i.updateUVs = function(t1) {
                    var i = t1.renderData;
                    if (t1.spriteFrame && i) for(var n = i.chunk.vb, s = t1.spriteFrame.uv, _$r = i.floatStride, h = 3, e = 0; e < i.dataLength; ++e){
                        var u = 2 * e;
                        n[h] = s[u], n[h + 1] = s[u + 1], h += _$r;
                    }
                }, i.updateColor = function(t1) {
                    var i = t1.renderData;
                    if (i) for(var n = i.chunk.vb, s = 5, _$r = t1.color, h = _$r.r / 255, e = _$r.g / 255, u = _$r.b / 255, o = _$r.a / 255, f = 0; f < 4; f++, s += i.floatStride)n[s] = h, n[s + 1] = e, n[s + 2] = u, n[s + 3] = o;
                }, t1;
            }(), YU = new qU, KU = [], JU = 0; JU < 4; JU++)KU.push({
                x: 0,
                y: 0,
                z: 0,
                u: 0,
                v: 0,
                color: new Yr
            });
            var QU, ZU, tx, ix, nx, sx, rx, ex = new (function() {
                function t1() {
                    this.fb = void 0;
                }
                var i = t1.prototype;
                return i.createData = function(t1) {
                    var i = t1.requestRenderData();
                    i.dataLength = 16, i.resize(16, 54);
                    var n = this.fb = new Uint16Array(54);
                    return this.rb(4, 4), i.chunk.setIndexBuffer(n), i;
                }, i.rb = function(t1, i) {
                    for(var n = 0, s = this.fb, _$r = 0; _$r < t1 - 1; _$r++)for(var h = 0; h < i - 1; h++){
                        var e = _$r * i + h;
                        s[n++] = e, s[n++] = e + 1, s[n++] = e + i, s[n++] = e + 1, s[n++] = e + 1 + i, s[n++] = e + i;
                    }
                }, i.updateRenderData = function(t1) {
                    var i = t1.spriteFrame;
                    sP.packToDynamicAtlas(t1, i), this.updateUVs(t1);
                    var n = t1.renderData;
                    n && i && (n.vertDirty && this.nb(t1), n.updateRenderData(t1, i));
                }, i.nb = function(t1) {
                    var i = t1.renderData;
                    if (i) {
                        var n = i.data, s = t1.node.io(), _$r = s.width, h = s.height, e = s.anchorX * _$r, u = s.anchorY * h, o = t1.spriteFrame, f = o.insetLeft, _$c = o.insetRight, a = o.insetTop, v = o.insetBottom, l = _$r - f - _$c, _$d = h - a - v, w = _$r / (f + _$c), g = h / (a + v);
                        w = Number.isNaN(w) || w > 1 ? 1 : w, g = Number.isNaN(g) || g > 1 ? 1 : g, l = l < 0 ? 0 : l, _$d = _$d < 0 ? 0 : _$d, KU[0].x = -e, KU[0].y = -u, KU[1].x = f * w - e, KU[1].y = v * g - u, KU[2].x = KU[1].x + l, KU[2].y = KU[1].y + _$d, KU[3].x = _$r - e, KU[3].y = h - u;
                        for(var p = 0; p < 4; p++)for(var _$y = 0; _$y < 4; _$y++){
                            var _$_ = 4 * p + _$y;
                            _$_ < i.dataLength && p < KU.length && _$y < KU.length && (n[_$_].x = KU[_$y].x, n[_$_].y = KU[p].y);
                        }
                    }
                }, i.fillBuffers = function(t1) {
                    var i = t1.renderData;
                    if (i) {
                        var n = i.chunk;
                        (t1.B_ !== t1.node.flagChangedVersion || i.vertDirty) && (this.sb(t1, n), i.vertDirty = !1, t1.B_ = t1.node.flagChangedVersion), n.bufferId;
                        for(var s = n.vertexOffset, _$r = n.meshBuffer, h = n.meshBuffer.iData, e = _$r.indexOffset, u = 0; u < 3; ++u)for(var o = 0; o < 3; ++o){
                            var f = s + 4 * u + o;
                            h[e++] = f, h[e++] = f + 1, h[e++] = f + 4, h[e++] = f + 1, h[e++] = f + 5, h[e++] = f + 4;
                        }
                        _$r.indexOffset = e;
                    }
                }, i.sb = function(t1, i) {
                    var n = t1.renderData;
                    if (n) for(var s = n.floatStride, _$r = n.data, h = i.vb, e = t1.node.worldMatrix, u = e.m00, o = e.m01, f = e.m02, _$c = e.m03, a = e.m04, v = e.m05, l = e.m06, _$d = e.m07, w = e.m12, g = e.m13, p = e.m14, _$y = e.m15, _$_ = 0, m = 0; m < 4; ++m)for(var b = _$r[4 * m], k = 0; k < 4; ++k){
                        var A = _$r[k].x, E = b.y, T = _$c * A + _$d * E + _$y;
                        T = T ? 1 / T : 1, h[0 + (_$_ = (4 * m + k) * s)] = (u * A + a * E + w) * T, h[_$_ + 1] = (o * A + v * E + g) * T, h[_$_ + 2] = (f * A + l * E + p) * T;
                    }
                }, i.updateUVs = function(t1) {
                    var i = t1.renderData;
                    if (t1.spriteFrame && i) for(var n = i.chunk.vb, s = i.floatStride, _$r = t1.spriteFrame.uvSliced, h = 3, e = 0; e < 16; e++)n[h] = _$r[e].u, n[h + 1] = _$r[e].v, h += s;
                }, i.updateColor = function(t1) {
                    var i = t1.renderData;
                    if (i) for(var n = i.chunk.vb, s = i.floatStride, _$r = 5, h = t1.color, e = h.r / 255, u = h.g / 255, o = h.b / 255, f = t1.node._uiProps.opacity, _$c = 0; _$c < 16; _$c++)n[_$r] = e, n[_$r + 1] = u, n[_$r + 2] = o, n[_$r + 3] = f, _$r += s;
                }, t1;
            }()), ux = new cr, ox = 0, fx = [];
            function cx(t1) {
                return t1 && (t1.insetTop > 0 || t1.insetBottom > 0 || t1.insetLeft > 0 || t1.insetRight > 0) ? 2 : 0;
            }
            var vx = new (function() {
                function t1() {}
                var i = t1.prototype;
                return i.createData = function(t1) {
                    return t1.requestRenderData();
                }, i.updateRenderData = function(t1) {
                    var i = t1.renderData;
                    if (i) {
                        var n = t1.spriteFrame;
                        if (n && i && (sP.packToDynamicAtlas(t1, n), i.vertDirty)) {
                            var s = t1.node.io(), _$r = Math.abs(s.width), h = Math.abs(s.height), e = n.getRect(), u = n.insetLeft, o = n.insetRight, f = e.width - u - o, _$c = n.insetTop, a = n.insetBottom, v = e.height - _$c - a, l = _$r - u - o, _$d = h - _$c - a;
                            l = l > 0 ? l : 0, _$d = _$d > 0 ? _$d : 0;
                            var w = 0 === f ? l : l / f, g = 0 === v ? _$d : _$d / v, p = cx(n), _$y = Math.ceil(g + p), _$_ = Math.ceil(w + p);
                            i.dataLength = 4 * _$y * _$_, this.cb(t1, l, _$d, _$y, _$_), i.resize(_$y * _$_ * 4, _$y * _$_ * 6), i.updateRenderData(t1, n);
                        }
                    }
                }, i.rb = function() {}, i.updateUVs = function(t1) {
                    var i = t1.renderData;
                    i && (i.vertDirty = !0, t1.po());
                }, i.fillBuffers = function(t1) {
                    var i = t1.node, n = t1.renderData;
                    if (n) {
                        var s = n.chunk;
                        if (null !== s) {
                            (t1.B_ !== i.flagChangedVersion || n.vertDirty) && (this.hb(t1, s), n.vertDirty = !1, t1.B_ = i.flagChangedVersion), this.eb(t1), s.bufferId;
                            for(var _$r = s.vertexOffset, h = s.meshBuffer, e = s.meshBuffer.iData, u = h.indexOffset, o = 0; o < n.indexCount; o += 6)e[u++] = _$r, e[u++] = _$r + 1, e[u++] = _$r + 2, e[u++] = _$r + 1, e[u++] = _$r + 3, e[u++] = _$r + 2, _$r += 4, h.indexOffset += 6;
                            h.setDirty();
                        }
                    }
                }, i.ub = function(t1) {
                    var i = t1.renderData;
                    if (i) for(var n = i.floatStride, s = i.data, _$r = i.chunk.vb, h = 0; h < s.length; h++){
                        var e = h * n;
                        _$r[e + 3] = s[h].u, _$r[e + 4] = s[h].v;
                    }
                }, i.hb = function(t1, i) {
                    var n = t1.renderData;
                    if (n) {
                        t1.node.getWorldMatrix(ux);
                        for(var s = n.floatStride, _$r = n.data, h = i.vb, e = _$r.length, u = 0; u < e; u++){
                            var o = _$r[u].x, f = _$r[u].y, _$c = _$r[u].z, a = ux.m03 * o + ux.m07 * f + ux.m11 * _$c + ux.m15;
                            a = a ? 1 / a : 1;
                            var v = u * s;
                            h[v] = (ux.m00 * o + ux.m04 * f + ux.m08 * _$c + ux.m12) * a, h[v + 1] = (ux.m01 * o + ux.m05 * f + ux.m09 * _$c + ux.m13) * a, h[v + 2] = (ux.m02 * o + ux.m06 * f + ux.m10 * _$c + ux.m14) * a;
                        }
                        this.ub(t1);
                    }
                }, i.cb = function(t1, i, n, s, r) {
                    var h = t1.node.io(), e = t1.renderData;
                    if (e) {
                        var u, o, f = e.data, _$c = t1.spriteFrame, a = _$c.rect, v = Math.abs(h.width), l = Math.abs(h.height), _$d = h.anchorX * v, w = h.anchorY * l, g = _$c.insetLeft, p = _$c.insetRight, _$y = a.width - g - p, _$_ = _$c.insetTop, m = _$c.insetBottom, b = a.height - _$_ - m, k = h.width / (g + p) > 1 ? 1 : h.width / (g + p), A = h.height / (_$_ + m) > 1 ? 1 : h.height / (_$_ + m);
                        u = _$y > 0 ? Math.floor(1e3 * i) / 1e3 % _$y == 0 ? _$y : i % _$y : i, o = b > 0 ? Math.floor(1e3 * n) / 1e3 % b == 0 ? b : n % b : n, fx.length = 0, ox = Math.max(s + 1, r + 1);
                        for(var E = 0; E < ox; E++)fx.push({
                            x: 0,
                            y: 0,
                            z: 0,
                            u: 0,
                            v: 0,
                            color: new Yr
                        });
                        var T = cx(_$c);
                        if (0 === T) for(var S = 0; S < ox; S++)fx[S].x = S >= r ? v - _$d : S * _$y - _$d, fx[S].y = S >= s ? l - w : S * b - w;
                        else for(var _$O = 0; _$O < ox; _$O++)0 === _$O ? fx[_$O].x = -_$d : 1 === _$O ? fx[_$O].x = g * k - _$d : _$O > 1 && _$O < r - 1 ? fx[_$O].x = _$y > 0 ? g * k - _$d + _$y * (_$O - 1) : g + i - _$d : _$O === r - 1 ? fx[_$O].x = g * k - _$d + u + _$y * (_$O - 2) : _$O >= r && (fx[_$O].x = Math.min(g + i + p, v) - _$d), 0 === _$O ? fx[_$O].y = -w : 1 === _$O ? fx[_$O].y = m * A - w : _$O > 1 && _$O < s - 1 ? fx[_$O].y = b > 0 ? m * A - w + b * (_$O - 1) : m + n - w : _$O === s - 1 ? fx[_$O].y = m * A - w + o + b * (_$O - 2) : _$O >= s && (fx[_$O].y = Math.min(m + n + _$_, l) - w);
                        for(var _$I = 0, _$R = 0, _$M = 0, _$C = 0, N = 0; N < s; ++N){
                            _$M = fx[N].y, _$C = fx[N + 1].y;
                            for(var P = 0; P < r; ++P){
                                _$I = fx[P].x, _$R = fx[P + 1].x;
                                var D = 4 * (N * r + P);
                                f[D].x = _$I, f[D].y = _$M, f[D + 1].x = _$R, f[D + 1].y = _$M, f[D + 2].x = _$I, f[D + 2].y = _$C, f[D + 3].x = _$R, f[D + 3].y = _$C;
                            }
                        }
                        var L = _$c.rotated;
                        _$c.uv;
                        var B = _$c.uvSliced;
                        QU = B[0], ZU = B[1], tx = B[2], ix = B[3], nx = B[4], sx = B[8], rx = B[12];
                        for(var F = 0, U = 0, x = 0 === _$y ? i : i / _$y, j = 0 === b ? n : n / b, G = [], H = [], _$V = 0; _$V < s; ++_$V){
                            U = n > b ? n >= (T > 0 ? _$V : _$V + 1) * b ? 1 : j % 1 : j;
                            for(var _$W = 0; _$W < r; ++_$W){
                                F = i > _$y ? i >= (T > 0 ? _$W : _$W + 1) * _$y ? 1 : x % 1 : x, L ? (0 === T ? (G[0] = nx.u, G[1] = nx.u, G[2] = nx.u + (sx.u - nx.u) * U, H[0] = ZU.v, H[1] = ZU.v + (tx.v - ZU.v) * F, H[2] = ZU.v) : (0 === _$V ? (G[0] = QU.u, G[1] = QU.u, G[2] = nx.u) : _$V < s - 1 ? (G[0] = nx.u, G[1] = nx.u, G[2] = nx.u + (sx.u - nx.u) * U) : _$V === s - 1 && (G[0] = sx.u, G[1] = sx.u, G[2] = rx.u), 0 === _$W ? (H[0] = QU.v, H[1] = ZU.v, H[2] = QU.v) : _$W < r - 1 ? (H[0] = ZU.v, H[1] = ZU.v + (tx.v - ZU.v) * F, H[2] = ZU.v) : _$W === r - 1 && (H[0] = tx.v, H[1] = ix.v, H[2] = tx.v)), G[3] = G[2], H[3] = H[1]) : (0 === T ? (G[0] = ZU.u, G[1] = ZU.u + (tx.u - ZU.u) * F, G[2] = ZU.u, H[0] = nx.v, H[1] = nx.v, H[2] = nx.v + (sx.v - nx.v) * U) : (0 === _$W ? (G[0] = QU.u, G[1] = ZU.u, G[2] = QU.u) : _$W < r - 1 ? (G[0] = ZU.u, G[1] = ZU.u + (tx.u - ZU.u) * F, G[2] = ZU.u) : _$W === r - 1 && (G[0] = tx.u, G[1] = ix.u, G[2] = tx.u), 0 === _$V ? (H[0] = QU.v, H[1] = QU.v, H[2] = nx.v) : _$V < s - 1 ? (H[0] = nx.v, H[1] = nx.v, H[2] = nx.v + (sx.v - nx.v) * U) : _$V === s - 1 && (H[0] = sx.v, H[1] = sx.v, H[2] = rx.v)), G[3] = G[1], H[3] = H[2]);
                                var _$z = 4 * (_$V * r + _$W);
                                f[_$z].u = G[0], f[_$z].v = H[0], f[_$z + 1].u = G[1], f[_$z + 1].v = H[1], f[_$z + 2].u = G[2], f[_$z + 2].v = H[2], f[_$z + 3].u = G[3], f[_$z + 3].v = H[3];
                            }
                        }
                    }
                }, i.eb = function(t1) {
                    var i = t1.renderData;
                    if (i) for(var n = i.chunk.vb, s = i.floatStride, _$r = i.vertexCount, h = 5, e = t1.color, u = e.r / 255, o = e.g / 255, f = e.b / 255, _$c = t1.node._uiProps.opacity, a = 0; a < _$r; a++)n[h] = u, n[h + 1] = o, n[h + 2] = f, n[h + 3] = _$c, h += s;
                }, i.updateColor = function() {}, t1;
            }());
            xF.Type, xF.FillType;
            var lx = t1("s", {
                getAssembler: function getAssembler(t1) {
                    var i = YU;
                    switch(t1.type){
                        case 1:
                            i = ex;
                            break;
                        case 2:
                            i = vx;
                            break;
                        case 3:
                            i = 2 === t1.fillType ? $U : IU;
                    }
                    return i;
                }
            });
            xF.Assembler = lx;
            var dx = t1("S", function() {
                function t1() {
                    this.lb = [], this.wb = {
                        stencilTest: !0,
                        func: 7,
                        stencilMask: 65535,
                        writeMask: 65535,
                        failOp: 1,
                        zFailOp: 1,
                        passOp: 1,
                        ref: 1
                    }, this.gb = 0, this.yb = new Map, this._b = new Map;
                }
                var i = t1.prototype;
                return i.pushMask = function(t1) {
                    this.lb.push(t1);
                }, i.clear = function(t1) {
                    return 2 !== t1.stencilStage ? 5 : 1;
                }, i.enableMask = function() {
                    this.stage = 3;
                }, i.exitMask = function() {
                    0 !== this.lb.length && (this.lb.pop(), 0 === this.lb.length ? this.stage = 0 : this.stage = 3);
                }, i.getWriteMask = function() {
                    return 1 << this.lb.length - 1;
                }, i.getExitWriteMask = function() {
                    return 1 << this.lb.length;
                }, i.mb = function() {
                    for(var _$t = 0, i = 0; i < this.lb.length; ++i)_$t += 1 << i;
                    return _$t;
                }, i.getMaskStackSize = function() {
                    return this.lb.length;
                }, i.reset = function() {
                    this.lb.length = 0, this.stage = 0;
                }, i.destroy = function() {
                    this.yb.forEach(function(t1) {
                        t1.destroy();
                    }), this.yb.clear();
                }, i.getStencilStage = function(t1, i) {
                    var n = 0, _$s = !1, _$r = !1, h = 1, e = this.yb;
                    if (i && i.passes[0]) {
                        var u = i.passes[0].depthStencilState, o = 0, f = 0;
                        u.depthTest && (o = 1), u.depthWrite && (f = 1), n = o | f << 1 | u.depthFunc << 2 | t1 << 6 | this.lb.length << 9, _$s = u.depthTest, _$r = u.depthWrite, h = u.depthFunc, e = this._b;
                    } else n = t1 << 16 | this.lb.length;
                    if (e && e.has(n)) return e.get(n);
                    this.Ab(t1);
                    var _$c = this.wb, a = new uw(_$s, _$r, h, _$c.Eb, _$c.Tb, _$c.Sb, _$c.Ob, _$c.Ib, _$c.Rb, _$c.Mb, _$c.Cb, _$c.Eb, _$c.Tb, _$c.Sb, _$c.Ob, _$c.Ib, _$c.Rb, _$c.Mb, _$c.Cb);
                    return e.set(n, a), a;
                }, i.getStencilHash = function(t1) {
                    return t1 << 8 | this.lb.length;
                }, i.Ab = function(t1) {
                    var i = this.wb;
                    0 === t1 ? (i.Eb = !1, i.Tb = 7, i.Ib = 1, i.Sb = i.Ob = 65535, i.Cb = 1) : (i.Eb = !0, 3 === t1 ? (i.Tb = 2, i.Ib = 1, i.Sb = i.Cb = this.mb(), i.Ob = this.getWriteMask()) : 1 === t1 ? (i.Tb = 0, i.Ib = 0, i.Ob = i.Sb = i.Cb = this.getWriteMask()) : 5 === t1 || 2 === t1 ? (i.Tb = 0, i.Ib = 2, i.Ob = i.Sb = i.Cb = this.getWriteMask()) : 6 === t1 && (i.Tb = 0, i.Ib = 0, i.Ob = i.Sb = i.Cb = this.getWriteMask()));
                }, s(t1, [
                    {
                        key: "stage",
                        get: function get() {
                            return this.gb;
                        },
                        set: function set(t1) {
                            this.gb = t1;
                        }
                    },
                    {
                        key: "pattern",
                        get: function get() {
                            return this.wb;
                        }
                    }
                ]), t1;
            }());
            dx.sharedManager = null, dx.sharedManager = new dx;
            var wx = [
                "mouse-down",
                "mouse-move",
                "mouse-up",
                "mouse-wheel",
                "mouse-leave-window",
                "mouse-enter-window"
            ], gx = [
                "touch-start",
                "touch-move",
                "touch-end",
                "touch-cancel"
            ], px = function px(t1) {
                return !!(128 & t1._objFlags || 1 & t1._objFlags);
            };
            function _x(t1) {
                return --t1, t1 |= t1 >> 16, t1 |= t1 >> 8, t1 |= t1 >> 4, t1 |= t1 >> 2, t1 |= t1 >> 1, ++t1;
            }
            function mx(t1, i) {
                return Math.ceil(t1 / i) * i;
            }
            new (function() {
                function t1() {
                    this.priority = 1, this.Nb = !1, this.Pb = 0, this.Db = [], this.Lb = [], this.Bb = [], MM._registerEventDispatcher(this);
                    var _$t = SE.callbacksInvoker;
                    _$t.on(0, this.Fb, this), _$t.on(1, this.Ub, this), _$t.on(2, this.xb, this);
                }
                var i = t1.prototype;
                return i.onThrowException = function() {
                    this.Pb = 0;
                }, i.dispatchEvent = function(t1) {
                    var i = t1.type;
                    return gx.includes(i) ? this.jb(t1) : !wx.includes(i) || this.Gb(t1);
                }, i.Fb = function(t1) {
                    0 === this.Pb ? this.Db.includes(t1) || (this.Db.push(t1), this.Nb = !0) : this.Lb.includes(t1) || this.Lb.push(t1), hi(this.Bb, t1);
                }, i.Ub = function(t1) {
                    0 === this.Pb ? (hi(this.Db, t1), this.Nb = !0) : this.Bb.includes(t1) || this.Bb.push(t1), hi(this.Lb, t1);
                }, i.Gb = function(t1) {
                    this.Pb++, this.Hb();
                    for(var i = this.Db, n = i.length, s = !0, _$r = 0; _$r < n; ++_$r){
                        var h = i[_$r];
                        if (h.isEnabled && h.shouldHandleEventMouse && h.Xu(t1)) {
                            if (s = !1, !t1.preventSwallow) break;
                            t1.preventSwallow = !1;
                        }
                    }
                    return --this.Pb <= 0 && this.Vb(), s;
                }, i.jb = function(t1) {
                    this.Pb++, this.Hb();
                    for(var i = this.Db, n = i.length, s = t1.touch, _$r = !0, h = 0; h < n; ++h){
                        var e = i[h];
                        if (e.isEnabled && e.shouldHandleEventTouch) {
                            if ("touch-start" === t1.type) {
                                if (e.no(t1)) {
                                    if (e.isEnabled) e.claimedTouchIdList.push(s.getID());
                                    else {
                                        var u = new YA([
                                            t1.touch
                                        ], !0, "touch-cancel");
                                        u.touch = t1.touch, e.dispatchEvent(u), e.claimedTouchIdList.length = 0;
                                    }
                                    if (_$r = !1, !t1.preventSwallow) break;
                                    t1.preventSwallow = !1;
                                }
                            } else if (e.claimedTouchIdList.length > 0) {
                                var o = e.claimedTouchIdList.indexOf(s.getID());
                                if (-1 !== o) {
                                    if (e.no(t1), "touch-end" !== t1.type && "touch-cancel" !== t1.type || (si(e.claimedTouchIdList, o), t1.preventSwallow || this.Wb(h + 1, s.getID())), _$r = !1, !t1.preventSwallow) break;
                                    t1.preventSwallow = !1;
                                }
                            }
                        }
                    }
                    return --this.Pb <= 0 && this.Vb(), _$r;
                }, i.Wb = function(t1, i) {
                    for(var n = this.Db, s = n.length, _$r = t1; _$r < s; ++_$r){
                        var h = n[_$r], e = h.claimedTouchIdList.indexOf(i);
                        -1 !== e && si(h.claimedTouchIdList, e);
                    }
                }, i.Vb = function() {
                    for(var _$t = this.Lb, i = _$t.length, n = 0; n < i; ++n)this.Fb(_$t[n]);
                    _$t.length = 0;
                    for(var s = this.Bb, _$r = s.length, h = 0; h < _$r; ++h)this.Ub(s[h]);
                    s.length = 0;
                }, i.Hb = function() {
                    if (this.Nb) {
                        for(var _$t = this.Db, i = _$t.length, n = 0; n < i; ++n){
                            var s = _$t[n], _$r = s.node;
                            _$r._uiProps && (s.cachedCameraPriority = _$r.io().cameraPriority);
                        }
                        _$t.sort(this.zb), this.Nb = !1;
                    }
                }, i.zb = function(t1, i) {
                    var u, o, f, _$c, a, v, n = t1.node, s = i.node;
                    if (!(i && s && !px(s) && s.activeInHierarchy && s.io())) return -1;
                    if (!t1 || !n || px(n) || !n.activeInHierarchy || !n.io()) return 1;
                    if (t1.cachedCameraPriority !== i.cachedCameraPriority) return i.cachedCameraPriority - t1.cachedCameraPriority;
                    for(var _$r = n, h = s, e = !1; (null == (u = _$r.parent) ? void 0 : u.uuid) !== (null == (o = h.parent) ? void 0 : o.uuid);)_$r = null === (null == (f = _$r) || null == (_$c = f.parent) ? void 0 : _$c.parent) ? (e = !0, s) : _$r && _$r.parent, h = null === (null == (a = h) || null == (v = a.parent) ? void 0 : v.parent) ? (e = !0, n) : h && h.parent;
                    if (_$r.uuid === h.uuid) {
                        if (_$r.uuid === s.uuid) return -1;
                        if (_$r.uuid === n.uuid) return 1;
                    }
                    var l = _$r ? _$r.siblingIndex : 0, _$d = h ? h.siblingIndex : 0;
                    return e ? l - _$d : _$d - l;
                }, i.xb = function() {
                    this.Nb = !0;
                }, t1;
            }());
            var kx = Object.freeze({
                __proto__: null,
                BatchingSchemes: {
                    NONE: 0,
                    INSTANCING: 1
                },
                MaterialInstance: lA,
                Pass: Hk,
                PassInstance: vA,
                PassStage: {
                    DEFAULT: 1,
                    FORWARD: 2,
                    SHADOWCAST: 4
                },
                RenderQueue: {
                    OPAQUE: 0,
                    TRANSPARENT: 1,
                    OVERLAY: 2
                },
                RenderScene: IC,
                RenderWindow: PC,
                TextureBufferPool: function() {
                    function t1(t1) {
                        this.dr = 0, this.$b = 0, this.Br = [], this.Xb = 0, this.qb = [], this.Yb = new Fl, this.Kb = new Fl, this.Jb = new Fl, this.Qb = null, this.Zb = Uint8Array, this.tk = 4, this.ik = 1, this.Pe = t1;
                    }
                    var i = t1.prototype;
                    return i.initialize = function(t1) {
                        var i = Fd[t1.format];
                        this.dr = t1.format, this.$b = i.size, this.tk = i.count, this.Zb = $d(i), this.Qb = t1.roundUpFn || null, this.ik = t1.alignment || 1, t1.inOrderFree && (this.alloc = this.nk);
                    }, i.destroy = function() {
                        for(var _$t = 0; _$t < this.Xb; ++_$t)this.Br[_$t].texture.destroy();
                        this.Br.length = 0, this.qb.length = 0;
                    }, i.alloc = function(t1, i) {
                        t1 = mx(t1, this.ik);
                        var n = -1, s = -1;
                        if (void 0 !== i && (n = i, s = this.sk(t1, n)), s < 0) for(var _$r = 0; _$r < this.Xb && (n = _$r, !((s = this.sk(t1, n)) >= 0)); ++_$r);
                        if (s >= 0) {
                            var h = this.Br[n];
                            h.start += t1;
                            var e = {
                                chunkIdx: n,
                                start: s,
                                end: s + t1,
                                texture: h.texture
                            };
                            return this.qb.push(e), e;
                        }
                        var u = Math.sqrt(t1 / this.$b), o = this.Qb && this.Qb(u, this.$b) || Math.max(1024, _x(u)), f = this.Br[this.createChunk(o)];
                        f.start += t1;
                        var _$c = {
                            chunkIdx: this.Xb - 1,
                            start: 0,
                            end: t1,
                            texture: f.texture
                        };
                        return this.qb.push(_$c), _$c;
                    }, i.free = function(t1) {
                        for(var i = 0; i < this.qb.length; ++i)if (this.qb[i] === t1) return this.Br[t1.chunkIdx].end = t1.end, void this.qb.splice(i, 1);
                    }, i.createChunk = function(t1) {
                        var i = t1 * t1 * this.$b;
                        X("TextureBufferPool: Allocate chunk " + this.Xb + ", size: " + i + ", format: " + this.dr);
                        var n = {
                            texture: this.Pe.createTexture(new Yl(1, 6, this.dr, t1, t1)),
                            size: i,
                            start: 0,
                            end: i
                        };
                        return this.Br[this.Xb] = n, this.Xb++;
                    }, i.update = function(t1, i) {
                        var n = [], s = [], _$r = t1.start / this.$b, h = i.byteLength / this.$b, e = _$r % t1.texture.width, u = Math.floor(_$r / t1.texture.width), o = Math.min(t1.texture.width - e, h), f = 0;
                        e > 0 && (this.Yb.texOffset.x = e, this.Yb.texOffset.y = u, this.Yb.texExtent.width = o, this.Yb.texExtent.height = 1, n.push(new this.Zb(i, f * this.$b, o * this.tk)), s.push(this.Yb), e = 0, u += 1, h -= o, f += o), h > 0 && (this.Kb.texOffset.x = e, this.Kb.texOffset.y = u, h > t1.texture.width ? (this.Kb.texExtent.width = t1.texture.width, this.Kb.texExtent.height = Math.floor(h / t1.texture.width), o = this.Kb.texExtent.width * this.Kb.texExtent.height) : (o = h, this.Kb.texExtent.width = o, this.Kb.texExtent.height = 1), n.push(new this.Zb(i, f * this.$b, o * this.tk)), s.push(this.Kb), e = 0, u += this.Kb.texExtent.height, h -= o, f += o), h > 0 && (this.Jb.texOffset.x = e, this.Jb.texOffset.y = u, this.Jb.texExtent.width = h, this.Jb.texExtent.height = 1, n.push(new this.Zb(i, f * this.$b, h * this.tk)), s.push(this.Jb)), this.Pe.copyBuffersToTexture(n, t1.texture, s);
                    }, i.sk = function(t1, i) {
                        var n = this.Br[i], s = !1, _$r = n.start;
                        if (_$r + t1 <= n.size) s = !0;
                        else {
                            _$r = 0;
                            for(var h = this.qb.filter(function(t1) {
                                return t1.chunkIdx === i;
                            }).sort(function(t1, i) {
                                return t1.start - i.start;
                            }), e = 0; e < h.length; e++){
                                var u = h[e];
                                if (_$r + t1 <= u.start) {
                                    s = !0;
                                    break;
                                }
                                _$r = u.end;
                            }
                            !s && _$r + t1 <= n.size && (s = !0);
                        }
                        return s ? _$r : -1;
                    }, i.nk = function(t1) {
                        t1 = mx(t1, this.ik);
                        for(var i = 0; i < this.Xb; ++i){
                            var n = this.Br[i], s = !1, _$r = n.start;
                            if (_$r + t1 <= n.end ? s = !0 : _$r > n.end ? _$r + t1 <= n.size ? s = !0 : t1 <= n.end && (n.start = _$r = 0, s = !0) : _$r === n.end && (n.start = _$r = 0, n.end = n.size, t1 <= n.end && (s = !0)), s) {
                                n.start += t1;
                                var h = {
                                    chunkIdx: i,
                                    start: _$r,
                                    end: _$r + t1,
                                    texture: n.texture
                                };
                                return this.qb.push(h), h;
                            }
                        }
                        var e = Math.sqrt(t1 / this.$b), u = this.Qb && this.Qb(e, this.$b) || Math.max(1024, _x(e)), o = this.Br[this.createChunk(u)];
                        o.start += t1;
                        var f = {
                            chunkIdx: this.Xb,
                            start: 0,
                            end: t1,
                            texture: o.texture
                        };
                        return this.qb.push(f), f;
                    }, t1;
                }(),
                createIA: function createIA(t1, i) {
                    if (!i.positions) return rt(16306), null;
                    for(var n = [], s = i.positions.length / 3, _$r = 0; _$r < s; ++_$r)n.push(i.positions[3 * _$r], i.positions[3 * _$r + 1], i.positions[3 * _$r + 2]), i.normals && n.push(i.normals[3 * _$r], i.normals[3 * _$r + 1], i.normals[3 * _$r + 2]), i.uvs && n.push(i.uvs[2 * _$r], i.uvs[2 * _$r + 1]), i.colors && n.push(i.colors[3 * _$r], i.colors[3 * _$r + 1], i.colors[3 * _$r + 2]);
                    var h = [];
                    h.push(new ud("a_position", 32)), i.normals && h.push(new ud("a_normal", 32)), i.uvs && h.push(new ud("a_texCoord", 21)), i.colors && h.push(new ud("a_color", 32));
                    var e = t1.createBuffer(new Wl(10, 1, 4 * n.length, 4 * n.length / s));
                    e.update(new Float32Array(n));
                    var u = null;
                    return i.indices && (u = t1.createBuffer(new Wl(6, 1, 2 * i.indices.length, 2))).update(new Uint16Array(i.indices)), t1.createInputAssembler(new fd(h, [
                        e
                    ], u));
                },
                customizeType: fm,
                genHandle: rm,
                getBindingFromHandle: em,
                getCountFromHandle: um,
                getDefaultFromType: dm,
                getDeviceShaderVersion: Dm,
                getOffsetFromHandle: om,
                getStringFromType: wm,
                getTypeFromHandle: hm,
                nearestPOT: _x,
                overrideMacros: gm,
                programLib: Hm,
                scene: OC,
                type2reader: cm,
                type2validator: vm,
                type2writer: am
            });
            t1("ag", kx);
            var Ax = new kd(null), Ex = new cr;
            new Uh(function() {
                return {
                    uiRenderer: null,
                    finalOpacity: 0,
                    opacityDirty: !1
                };
            }, 128);
            var Tx, Ox, Ix, Rx, Mx, Cx = function() {
                function t1(t1) {
                    var i = this;
                    this.rk = [], this.hk = null, this.ek = new Map, this.uk = -1, this.fk = 0, this.ck = new rA, this.ak = null, this.vk = this.ck, this.lk = null, this.dk = null, this.wk = null, this.gk = null, this.pk = null, this.yk = 0, this._k = 0, this.mk = 0, this.kk = null, this.Ak = 0, this.Ek = !1, this.Tk = !1, this.Sk = null, this.Ok = 0, this.Ik = 0, this.Rk = 1, this.Mk = 0, this.Ck = new Px, this.Nk = [], this.Pk = null, this.Dk = null, this.Lk = null, this.Bk = [], this.Ol = t1, this.device = t1.device, this.pl = new xh(64), this.Fk = new Fh(function() {
                        return new KF;
                    }, 128, function(t1) {
                        return t1.Qw(i);
                    });
                }
                var i = t1.prototype;
                return i.Uk = function() {
                    return this.Bk;
                }, i.initialize = function() {
                    return !0;
                }, i.destroy = function() {
                    this.Bk.length = 0;
                    for(var _$t = 0; _$t < this.pl.length; _$t++)this.pl.array[_$t] && this.pl.array[_$t].Qw(this);
                    this.pl.destroy();
                    for(var i, n = d(this.ek.values()); !(i = n()).done;)i.value.destroy();
                    this.ek.clear(), this.Fk && this.Fk.destroy(), this.Ck.Qw(), dx.sharedManager.destroy(), this.Pk && this.Lk && (A.director.root.destroyModel(this.Pk), this.Lk.destroy()), this.Dk && this.Dk.destroy();
                }, i.xk = function() {}, i.addScreen = function(t1) {
                    this.rk.push(t1), this.rk.sort(this.jk);
                }, i.removeScreen = function(t1) {
                    var i = this.rk.indexOf(t1);
                    -1 !== i && this.rk.splice(i, 1);
                }, i.sortScreens = function() {
                    this.rk.sort(this.jk);
                }, i.getFirstRenderCamera = function(t1) {
                    if (t1.scene && t1.scene.renderScene) for(var i = t1.scene.renderScene.cameras, n = 0; n < i.length; n++){
                        var _$s = i[n];
                        if (_$s.visibility & t1.layer) return _$s;
                    }
                    return null;
                }, i.update = function() {
                    for(var _$t = this.rk, i = 0, n = 0; n < _$t.length; ++n){
                        var _$s = _$t[n], _$r = _$s._getRenderScene();
                        if (_$s.enabledInHierarchy && _$r) {
                            this.Mk = 0, this.Rk = 1, this.walk(_$s.node), this.autoMergeBatches(this.gk), this.resetRenderStates();
                            var h = 0;
                            if (this.pl.length > i) for(; i < this.pl.length; ++i){
                                var e = this.pl.array[i];
                                if (e.J_) for(var u = e.J_.subModels, o = 0; o < u.length; o++)u[o].priority = h++;
                                else e.om = this.Ck.Gk(e);
                                _$r.addBatch(e);
                            }
                        }
                    }
                }, i.uploadBuffers = function() {
                    if (this.pl.length > 0) {
                        for(var _$t = this.Nk.length, i = 0; i < _$t; i++)this.Nk[i].uploadBuffers();
                        for(var n, _$s = d(this.ek.values()); !(n = _$s()).done;){
                            var _$r = n.value;
                            _$r.uploadBuffers(), _$r.reset();
                        }
                        this.Ck.Hi();
                    }
                }, i.reset = function() {
                    for(var _$t = 0; _$t < this.pl.length; ++_$t){
                        var i = this.pl.array[_$t];
                        i.tm || (i.Ty(), this.Fk.free(i));
                    }
                    for(var n, _$s = d(this.ek.values()); !(n = _$s()).done;)n.value.reset();
                    for(var _$r = this.Nk.length, h = 0; h < _$r; h++)this.Nk[h].freeIAPool();
                    this.Nk.length = 0, this.hk = null, this.uk = -1, this.fk = 0, this.Ak = 0, this.mk = 0, this.ak = null, this.vk = this.ck, this.lk = null, this.dk = null, this.gk = null, this.pk = null, this.pl.clear(), dx.sharedManager.reset();
                }, i.switchBufferAccessor = function(t1) {
                    void 0 === t1 && (t1 = TL);
                    var i = t1 === TL ? 36 : ML(t1);
                    if (!this.hk || this.hk.vertexFormatBytes !== i) {
                        var n = this.ek.get(i);
                        n || (n = new LL(this.device, t1), this.ek.set(i, n)), this.hk = n, this.uk = -1;
                    }
                    return this.hk;
                }, i.registerBufferAccessor = function(t1, i) {
                    this.ek.set(t1, i);
                }, i.updateBuffer = function(t1, i) {
                    var n = this.switchBufferAccessor(t1);
                    this.uk !== i && (this.uk = i, this.fk = n.getMeshBuffer(i).indexOffset);
                }, i.commitComp = function(t1, i, n, s, r) {
                    var h, e = 0, u = -1;
                    if (i && i.chunk) {
                        if (!i.isValid()) return;
                        e = i.dataHash, h = i.material, u = i.chunk.bufferId;
                    }
                    2 === t1.stencilStage || 6 === t1.stencilStage ? this.Hk(t1) : t1.stencilStage = dx.sharedManager.stage;
                    var o = t1.stencilStage;
                    this.Ak === e && 0 !== e && this.vk === h && this.kk === o || (this.autoMergeBatches(this.gk), i && !i._isMeshBuffer && this.updateBuffer(i.vertexFormat, u), this.ak = i, this.Ak = i ? i.dataHash : 0, this.gk = t1, this.pk = r, this.vk = t1.getRenderMaterial(0), this.kk = o, this.mk = t1.node.layer, n ? (this.lk = n.getGFXTexture(), this.dk = n.getGFXSampler(), this.yk = n.getHash(), this._k = this.dk.hash) : (this.lk = null, this.dk = null, this.yk = 0, this._k = 0)), s.fillBuffers && s.fillBuffers(t1, this);
                }, i.commitIA = function(t1, i, n, s, r) {
                    this.vk !== this.ck && (this.autoMergeBatches(this.gk), this.resetRenderStates());
                    var h = null, e = 0;
                    t1 && (t1.stencilStage = dx.sharedManager.stage, h = null !== t1.customMaterial ? dx.sharedManager.getStencilStage(t1.stencilStage, s) : dx.sharedManager.getStencilStage(t1.stencilStage), e = dx.sharedManager.getStencilHash(t1.stencilStage));
                    var u = this.wk ? this.wk._requireDrawBatch() : this.Fk.alloc();
                    u.hm = t1.node.layer, u.um = i, u.Z_ = r || null, n && (u.Q_ = n.getGFXTexture(), u.hw = n.getGFXSampler(), u.im = n.getHash(), u.nm = u.hw.hash), u.fm(s || null, h, e, null), this.pl.push(u);
                }, i.commitMiddleware = function(t1, i, n, s, r, h, e) {
                    var u = r.getGFXTexture();
                    e && this.Tk && this.Sk === i && this.lk === u && this.vk.hash === h.hash && this.Ok + this.Ik === n && this.mk === t1.node.layer ? this.Ik += s : (this.autoMergeBatches(this.gk), this.resetRenderStates(), this.gk = t1, this.lk = u, this.dk = r.getGFXSampler(), this.yk = r.getHash(), this.mk = t1.node.layer, this._k = this.dk.hash, this.Ak = 0, this.pk = e ? null : t1.node, this.Tk = e, this.Sk = i, this.vk = h, this.Ok = n, this.Ik = s), this.Ek = !0;
                }, i.commitModel = function(t1, i, n) {
                    this.vk !== this.ck && (this.autoMergeBatches(this.gk), this.resetRenderStates());
                    var _$s = null, _$r = 0;
                    n && (2 === t1.stencilStage || 6 === t1.stencilStage ? this.Hk(t1) : t1.stencilStage = dx.sharedManager.stage, _$s = dx.sharedManager.getStencilStage(t1.stencilStage, n), _$r = dx.sharedManager.getStencilHash(t1.stencilStage));
                    var h = A.director.getTotalFrames();
                    i && (i.updateTransform(h), i.updateUBOs(h));
                    for(var e = 0; e < i.subModels.length; e++){
                        var u = this.Fk.alloc(), o = i.subModels[e];
                        u.hm = t1.node.layer, u.J_ = i, u.Q_ = null, u.hw = null, u.Z_ = null, _$s || (_$s = null), u.fm(n, _$s, _$r, o.patches), u.um = o.inputAssembler, u.J_.visFlags = u.hm, u.om = o.descriptorSet, this.pl.push(u);
                    }
                }, i.setupStaticBatch = function(t1, i) {
                    this.finishMergeBatches(), this.hk = i, this.currStaticRoot = t1;
                }, i.endStaticBatch = function() {
                    this.finishMergeBatches(), this.currStaticRoot = null, this.hk = null, this.switchBufferAccessor();
                }, i.commitStaticBatch = function(t1) {
                    this.pl.concat(t1.drawBatchList), this.finishMergeBatches();
                }, i.autoMergeBatches = function(t1) {
                    if (this.Ek) this.Vk(t1);
                    else {
                        var i = this.vk;
                        if (i) {
                            var n, _$s = this.ak, _$r = this.hk;
                            if (_$s && _$s._isMeshBuffer) n = _$s.requestIA(this.device), -1 === this.Nk.indexOf(_$s) && this.Nk.push(_$s);
                            else if (_$r) {
                                var h = this.uk, e = _$r.getMeshBuffer(h);
                                if (!e) return;
                                var u = e.indexOffset - this.fk;
                                if (u <= 0) return;
                                this.fk, e.indexOffset, e.setDirty(), (n = e.requireFreeIA(this.device)).firstIndex = this.fk, n.indexCount = u, this.fk = e.indexOffset;
                            }
                            if (this.uk = -1, n && this.lk) {
                                var o = null, f = 0;
                                t1 && (o = null !== t1.customMaterial ? dx.sharedManager.getStencilStage(t1.stencilStage, i) : dx.sharedManager.getStencilStage(t1.stencilStage), f = dx.sharedManager.getStencilHash(t1.stencilStage));
                                var _$c = this.wk ? this.wk._requireDrawBatch() : this.Fk.alloc();
                                _$c.hm = this.mk, _$c.Q_ = this.lk, _$c.hw = this.dk, _$c.um = n, _$c.Z_ = this.pk, _$c.im = this.yk, _$c.nm = this._k, _$c.fm(i, o, f, null), this.pl.push(_$c);
                            }
                        }
                    }
                }, i.Vk = function(t1) {
                    t1.stencilStage = dx.sharedManager.stage, n = null !== t1.customMaterial ? dx.sharedManager.getStencilStage(t1.stencilStage, this.vk) : dx.sharedManager.getStencilStage(t1.stencilStage), i = dx.sharedManager.getStencilHash(t1.stencilStage);
                    var i, n, _$s = this.wk ? this.wk._requireDrawBatch() : this.Fk.alloc();
                    _$s.hm = t1.node.layer;
                    var _$r = this.Sk.requireFreeIA(this.device);
                    _$r.firstIndex = this.Ok, _$r.indexCount = this.Ik, _$s.um = _$r, _$s.Z_ = this.pk, _$s.Q_ = this.lk, _$s.hw = this.dk, _$s.im = this.yk, _$s.nm = this._k, _$s.fm(this.vk || null, n, i, null), this.pl.push(_$s), this.Ek = !1, this.Sk = null;
                }, i.forceMergeBatches = function(t1, i, n) {
                    this.vk = t1, i ? (this.lk = i.getGFXTexture(), this.dk = i.getGFXSampler(), this.yk = i.getHash(), this._k = this.dk.hash) : (this.lk = this.dk = null, this.yk = this._k = 0), this.mk = n.node.layer, this.autoMergeBatches(n);
                }, i.resetRenderStates = function() {
                    this.vk = this.ck, this.ak = null, this.lk = null, this.gk = null, this.pk = null, this.yk = 0, this._k = 0, this.mk = 0;
                }, i.finishMergeBatches = function() {
                    this.autoMergeBatches(), this.resetRenderStates();
                }, i.flushMaterial = function(t1) {
                    this.vk = t1;
                }, i.Wk = function(t1, i, n) {
                    var _$s = t1 ? t1.renderData : null, _$r = _$s ? _$s.vertexCount : 0;
                    if (t1 && t1.enabledInHierarchy && t1.fillBuffers(this), n && _$r > 0) {
                        0 === t1.getFillColorType() && Tw(_$s, i);
                        var h = _$s.getMeshBuffer();
                        h && h.setDirty();
                    }
                }, i.zk = function() {
                    return null;
                }, i.$k = function() {}, i.walk = function(t1, i) {
                    if (void 0 === i && (i = 0), t1.activeInHierarchy) {
                        var n = t1.children, _$s = t1._uiProps, _$r = _$s.uiComp, h = this.Rk, e = h, u = _$r && _$r.color ? _$r.color.a / 255 : 1;
                        this.Rk = e *= u * _$s.localOpacity, _$s._u(e);
                        var o = !Fn(e, 0, Ln);
                        if (o) {
                            if (_$s.colorDirty && this.Mk++, _$r && this.Wk(_$r, e, !!this.Mk), n.length > 0 && !t1._static) for(var f = 0; f < n.length; ++f){
                                var _$c = n[f];
                                this.walk(_$c, i);
                            }
                            _$s.colorDirty && (this.Mk--, _$s.colorDirty = !1);
                        }
                        this.Rk = h, _$r && _$r.enabledInHierarchy && (_$r.postUpdateAssembler(this), !o || 2 !== _$r.stencilStage && 6 !== _$r.stencilStage || dx.sharedManager.getMaskStackSize() > 0 && (this.autoMergeBatches(this.gk), this.resetRenderStates(), dx.sharedManager.exitMask())), i += 1;
                    }
                }, i.jk = function(t1, i) {
                    return t1.node.siblingIndex - i.node.siblingIndex;
                }, i.Er = function(t1) {
                    this.Ck.Xk(t1);
                }, i.qk = function() {
                    if (!this.Pk) {
                        this.Dk = Lk.get("default-clear-stencil"), this.Pk = A.director.root.createModel(sC);
                        var _$t = ML(AL), i = kw.gfxDevice, n = i.createBuffer(new Wl(10, 1, 4 * _$t, _$t)), _$s = new Float32Array([
                            -1,
                            -1,
                            0,
                            1,
                            -1,
                            0,
                            -1,
                            1,
                            0,
                            1,
                            1,
                            0
                        ]);
                        n.update(_$s);
                        var _$r = i.createBuffer(new Wl(6, 1, 12, 2)), h = new Uint16Array([
                            0,
                            1,
                            2,
                            2,
                            1,
                            3
                        ]);
                        _$r.update(h), this.Lk = new UA([
                            n
                        ], AL, 7, _$r), this.Lk.subMeshIdx = 0, this.Pk.initSubModel(0, this.Lk, this.Dk);
                    }
                }, i.Hk = function(t1) {
                    this.autoMergeBatches(this.gk), this.resetRenderStates(), this.qk(), this.Pk.node = this.Pk.transform = t1.node;
                    var i = dx.sharedManager;
                    i.pushMask(1);
                    var n = i.clear(t1), _$s = null, _$r = 0, h = this.Dk;
                    h && (_$s = i.getStencilStage(n, h), _$r = i.getStencilHash(n));
                    var e = this.Pk, u = A.director.getTotalFrames();
                    e && (e.updateTransform(u), e.updateUBOs(u));
                    for(var o = 0; o < e.subModels.length; o++){
                        var f = this.Fk.alloc(), _$c = e.subModels[o];
                        f.hm = t1.node.layer, f.J_ = e, f.Q_ = null, f.hw = null, f.Z_ = null, _$s || (_$s = null), f.fm(h, _$s, _$r, _$c.patches), f.um = _$c.inputAssembler, f.J_.visFlags = f.hm, f.om = _$c.descriptorSet, this.pl.push(f);
                    }
                    i.enableMask();
                }, i.syncMeshBuffersToNative = function() {}, s(t1, [
                    {
                        key: "nativeObj",
                        get: function get() {
                            return this._nativeObj;
                        }
                    },
                    {
                        key: "currBufferAccessor",
                        get: function get() {
                            return this.hk || (this.hk = this.switchBufferAccessor()), this.hk;
                        }
                    },
                    {
                        key: "batches",
                        get: function get() {
                            return this.pl;
                        }
                    },
                    {
                        key: "currStaticRoot",
                        set: function set(t1) {
                            this.wk = t1;
                        }
                    },
                    {
                        key: "currIsStatic",
                        set: function set() {}
                    }
                ]), t1;
            }(), Nx = function() {
                var _$t = i.prototype;
                function i() {
                    this.Yk = null, this.Xn = null, this.kr = 0, this.Kk = 0, this.ip = null, this.Jk = !0;
                    var _$t = kw.gfxDevice;
                    this.Qk = new Float32Array(56), this.ip = _$t.createBuffer(new Wl(18, 3, 224, 224));
                }
                return _$t.Gk = function() {
                    return this.Yk;
                }, _$t.Ch = function(t1) {
                    var _$i = kw.gfxDevice;
                    this.Xn = t1.Z_, this.kr = t1.im, this.Kk = t1.nm, Ax.layout = t1.passes[0].localSetLayout, this.Yk = _$i.createDescriptorSet(Ax), this.Yk.bindBuffer(0, this.ip), this.Yk.bindTexture(12, t1.Q_), this.Yk.bindSampler(12, t1.hw), this.Yk.update(), this.Jk = !0;
                }, _$t.Zk = function(t1) {
                    t1 !== this.Xn && (this.Xn = t1, this.Jk = !0, this.tA());
                }, _$t.iA = function(t1, i, n) {
                    return this.Xn === t1 && this.kr === i && this.Kk === n;
                }, _$t.nA = function() {
                    this.Xn = null, this.kr = 0, this.Kk = 0;
                }, _$t.Qw = function() {
                    this.ip && (this.ip.destroy(), this.ip = null), this.Yk && (this.Yk.destroy(), this.Yk = null), this.Qk = null;
                }, _$t.sA = function() {
                    return this.Xn && this.Xn.isValid;
                }, _$t.tA = function() {
                    var _$t = this.Xn;
                    if ((_$t.hasChangedFlags || _$t.isTransformDirty()) && (_$t.updateWorldTransform(), this.Jk = !0), this.Jk) {
                        var _$i = _$t.worldMatrix;
                        cr.toArray(this.Qk, _$i, 0), cr.invert(Ex, _$i), cr.transpose(Ex, Ex);
                        var s = 1 / Math.sqrt(cr.determinant(Ex));
                        cr.multiplyScalar(Ex, Ex, s), cr.toArray(this.Qk, Ex, 16), this.ip.update(this.Qk), this.Jk = !1;
                    }
                }, i;
            }(), Px = function() {
                function t1() {
                    this.Ck = new Map, this.hA = new Map, this.eA = [], this.uA = new Fh(function() {
                        return new Nx;
                    }, 16, function(t1) {
                        return t1.Qw();
                    });
                }
                var i = t1.prototype;
                return i.Gk = function(t1) {
                    if (t1.Z_) {
                        for(var i = this.eA, n = 0, s = i.length; n < s; n++){
                            var _$r = i[n];
                            if (_$r.iA(t1.Z_, t1.im, t1.nm)) return _$r.Gk();
                        }
                        var h = this.uA.alloc();
                        return h.Ch(t1), this.eA.push(h), h.Gk();
                    }
                    var e = t1.im ^ t1.nm;
                    if (this.Ck.has(e)) return this.Ck.get(e);
                    Ax.layout = t1.passes[0].localSetLayout;
                    var u = kw.gfxDevice.createDescriptorSet(Ax);
                    return u.bindTexture(12, t1.Q_), u.bindSampler(12, t1.hw), u.update(), this.Ck.set(e, u), this.hA.set(t1.im, e), u;
                }, i.Hi = function() {
                    var _$t = this.eA, i = _$t.length;
                    if (0 !== i) {
                        for(var n = [], s = 0; s < i; s++){
                            var _$r = _$t[s];
                            if (_$r.sA()) _$r.tA();
                            else {
                                _$r.nA();
                                var h = _$t.indexOf(_$r);
                                n.push(h);
                            }
                        }
                        for(var e = n.length - 1; e >= 0; e--){
                            var u = n[e], o = _$t[u];
                            _$t.splice(u, 1), this.uA.free(o);
                        }
                    }
                }, i.nA = function() {
                    for(var _$t = this.eA, i = _$t.length, n = 0; n < i; n++){
                        var s = _$t[n];
                        this.uA.free(s);
                    }
                    this.eA.length = 0;
                }, i.Xk = function(t1) {
                    var i = this.hA.get(t1);
                    i && this.Ck.has(i) && (this.Ck.get(i).destroy(), this.Ck.delete(i), this.hA.delete(t1));
                }, i.Qw = function() {
                    for(var _$t, i = d(this.Ck.values()); !(_$t = i()).done;)_$t.value.destroy();
                    this.Ck.clear(), this.hA.clear(), this.eA.length = 0, this.uA.destroy();
                }, t1;
            }();
            A.internal.Batcher2D = Cx;
            var Dx, Lx, Bx, Fx, Ux, xx, jx, Gx, Hx, Vx, $x, Xx, qx, Yx, Kx, Jx, Qx, Zx, tj, ij, nj, sj, rj, hj, ej, uj, oj, fj, cj, aj, vj, lj, dj, wj, gj = go("cc.PostProcess")(Tx = oo(((Mx = function(t1) {
                function i() {
                    var _$i;
                    return (_$i = t1.call(this) || this).global = Ox && Ox(), _$i._shadingScale = Ix && Ix(), _$i.enableShadingScaleInEditor = Rx && Rx(), _$i.settings = new Map, _$i;
                }
                h(i, t1);
                var n = i.prototype;
                return n.addSetting = function(t1) {
                    this.settings.set(t1.constructor, t1);
                }, n.removeSetting = function(t1) {
                    this.settings.delete(t1.constructor);
                }, n.getSetting = function(t1) {
                    return this.settings.get(t1);
                }, n.onEnable = function() {
                    i.all.push(this);
                }, n.onDisable = function() {
                    var _$t = i.all.indexOf(this);
                    -1 !== _$t && i.all.splice(_$t, 1);
                }, s(i, [
                    {
                        key: "shadingScale",
                        get: function get() {
                            return this._shadingScale;
                        },
                        set: function set(t1) {
                            this._shadingScale = t1;
                        }
                    }
                ]), i;
            }(Yg)).all = [], Ox = ho(Mx.prototype, "global", [
                mo,
                Ro
            ], function() {
                return !0;
            }), Ix = ho(Mx.prototype, "_shadingScale", [
                Ro
            ], function() {
                return 1;
            }), y(Mx.prototype, "shadingScale", [
                mo
            ], Object.getOwnPropertyDescriptor(Mx.prototype, "shadingScale"), Mx.prototype), Rx = ho(Mx.prototype, "enableShadingScaleInEditor", [
                mo,
                Ro
            ], function() {
                return !1;
            }), Tx = Mx)) || Tx) || Tx, pj = new Ss, yj = gi(DM), _j = gi(PM), mj = gi(LM), bj = gi(FM), kj = gi(BM), Aj = gi({
                SKYBOX: 14,
                SOLID_COLOR: 7,
                DEPTH_ONLY: 6,
                DONT_CLEAR: 0
            }), Ej = t1("dj", (Dx = go("cc.Camera"), Lx = Zo(My.BitMask), Bx = Zo(Aj), Fx = Zo(yj), Ux = Zo(_j), xx = Zo(mj), jx = Zo(bj), Gx = Zo(kj), Hx = Zo(NA), Vx = Zo(gj), Dx(((dj = function(t1) {
                function i() {
                    var _$i;
                    return (_$i = t1.call(this) || this)._projection = $x && $x(), _$i._priority = Xx && Xx(), _$i._fov = qx && qx(), _$i._fovAxis = Yx && Yx(), _$i._orthoHeight = Kx && Kx(), _$i._near = Jx && Jx(), _$i._far = Qx && Qx(), _$i._color = Zx && Zx(), _$i._depth = tj && tj(), _$i._stencil = ij && ij(), _$i._clearFlags = nj && nj(), _$i._rect = sj && sj(), _$i._aperture = rj && rj(), _$i._shutter = hj && hj(), _$i._iso = ej && ej(), _$i._screenScale = uj && uj(), _$i._visibility = oj && oj(), _$i._targetTexture = fj && fj(), _$i._postProcess = cj && cj(), _$i._usePostProcess = aj && aj(), _$i._camera = null, _$i._inEditorMode = !1, _$i._flows = void 0, _$i._cameraType = vj && vj(), _$i._trackingType = lj && lj(), _$i;
                }
                h(i, t1);
                var n = i.prototype;
                return n.onLoad = function() {
                    this._createCamera();
                }, n.onEnable = function() {
                    this.node.hasChangedFlags |= 1, this._camera && this._attachToScene();
                }, n.onDisable = function() {
                    this._camera && this._detachFromScene();
                }, n.onDestroy = function() {
                    this._camera && (this._camera.destroy(), this._camera = null), this._targetTexture && this._targetTexture.off("resize");
                }, n.screenPointToRay = function(t1, i, n) {
                    return n || (n = Sh.create()), this._camera && this._camera.screenPointToRay(n, t1, i), n;
                }, n.worldToScreen = function(t1, i) {
                    return i || (i = new Ss), this._camera && this._camera.worldToScreen(i, t1), i;
                }, n.screenToWorld = function(t1, i) {
                    return i || (i = this.node.getWorldPosition()), this._camera && this._camera.screenToWorld(i, t1), i;
                }, n.convertToUINode = function(t1, i, n) {
                    if (n || (n = new Ss), !this._camera) return n;
                    this.worldToScreen(t1, pj);
                    var _$s = i.getComponent("cc.UITransform"), _$r = A.view, _$h = _$r.getVisibleSize(), e = pj.x - .5 * this._camera.width, u = pj.y - .5 * this._camera.height;
                    return pj.x = e / _$r.getScaleX() + .5 * _$h.width, pj.y = u / _$r.getScaleY() + .5 * _$h.height, _$s && _$s.convertToNodeSpaceAR(pj, n), n;
                }, n._createCamera = function() {
                    this._camera || (this._camera = A.director.root.createCamera(), this._camera.initialize({
                        name: this.node.name,
                        node: this.node,
                        projection: this._projection,
                        window: this._inEditorMode ? A.director.root && A.director.root.mainWindow : A.director.root && A.director.root.tempWindow,
                        priority: this._priority,
                        cameraType: this.cameraType,
                        trackingType: this.trackingType
                    }), this._camera.setViewportInOrientedSpace(this._rect), this._camera.fovAxis = this._fovAxis, this._camera.fov = Gn(this._fov), this._camera.orthoHeight = this._orthoHeight, this._camera.nearClip = this._near, this._camera.farClip = this._far, this._camera.clearColor = this._color, this._camera.clearDepth = this._depth, this._camera.clearStencil = this._stencil, this._camera.clearFlag = this._clearFlags, this._camera.visibility = this._visibility, this._camera.aperture = this._aperture, this._camera.shutter = this._shutter, this._camera.iso = this._iso, this._camera.postProcess = this._postProcess, this._camera.usePostProcess = this._usePostProcess, this._camera.update()), this._updateTargetTexture();
                }, n._attachToScene = function() {
                    this.node.scene && this._camera && (this._camera && this._camera.scene && this._camera.scene.removeCamera(this._camera), this._getRenderScene().addCamera(this._camera));
                }, n._detachFromScene = function() {
                    this._camera && this._camera.scene && this._camera.scene.removeCamera(this._camera);
                }, n._checkTargetTextureEvent = function(t1) {
                    var _$i = this;
                    t1 && t1.off("resize"), this._targetTexture && this._targetTexture.on("resize", function(t1) {
                        _$i._camera && _$i._camera.setFixedSize(t1.width, t1.height);
                    }, this);
                }, n._updateTargetTexture = function() {
                    if (this._camera && this._targetTexture) {
                        var _$t = this._targetTexture.window;
                        this._camera.changeTargetWindow(_$t), this._camera.setFixedSize(_$t.width, _$t.height);
                    }
                }, s(i, [
                    {
                        key: "camera",
                        get: function get() {
                            return this._camera;
                        }
                    },
                    {
                        key: "priority",
                        get: function get() {
                            return this._priority;
                        },
                        set: function set(t1) {
                            this._priority = t1, this._camera && (this._camera.priority = t1);
                        }
                    },
                    {
                        key: "visibility",
                        get: function get() {
                            return this._visibility;
                        },
                        set: function set(t1) {
                            this._visibility = t1, this._camera && (this._camera.visibility = t1);
                        }
                    },
                    {
                        key: "clearFlags",
                        get: function get() {
                            return this._clearFlags;
                        },
                        set: function set(t1) {
                            this._clearFlags = t1, this._camera && (this._camera.clearFlag = t1);
                        }
                    },
                    {
                        key: "clearColor",
                        get: function get() {
                            return this._color;
                        },
                        set: function set(t1) {
                            this._color.set(t1), this._camera && (this._camera.clearColor = this._color);
                        }
                    },
                    {
                        key: "clearDepth",
                        get: function get() {
                            return this._depth;
                        },
                        set: function set(t1) {
                            this._depth = t1, this._camera && (this._camera.clearDepth = t1);
                        }
                    },
                    {
                        key: "clearStencil",
                        get: function get() {
                            return this._stencil;
                        },
                        set: function set(t1) {
                            this._stencil = t1, this._camera && (this._camera.clearStencil = t1);
                        }
                    },
                    {
                        key: "projection",
                        get: function get() {
                            return this._projection;
                        },
                        set: function set(t1) {
                            this._projection = t1, this._camera && (this._camera.projectionType = t1);
                        }
                    },
                    {
                        key: "fovAxis",
                        get: function get() {
                            return this._fovAxis;
                        },
                        set: function set(t1) {
                            t1 !== this._fovAxis && (this._fovAxis = t1, this._camera && (this._camera.fovAxis = t1, this.fov = 0 === t1 ? this._fov * this._camera.aspect : this._fov / this._camera.aspect));
                        }
                    },
                    {
                        key: "fov",
                        get: function get() {
                            return this._fov;
                        },
                        set: function set(t1) {
                            this._fov = t1, this._camera && (this._camera.fov = Gn(t1));
                        }
                    },
                    {
                        key: "orthoHeight",
                        get: function get() {
                            return this._orthoHeight;
                        },
                        set: function set(t1) {
                            this._orthoHeight = t1, this._camera && (this._camera.orthoHeight = t1);
                        }
                    },
                    {
                        key: "near",
                        get: function get() {
                            return this._near;
                        },
                        set: function set(t1) {
                            this._near = t1, this._camera && (this._camera.nearClip = t1);
                        }
                    },
                    {
                        key: "far",
                        get: function get() {
                            return this._far;
                        },
                        set: function set(t1) {
                            this._far = t1, this._camera && (this._camera.farClip = t1);
                        }
                    },
                    {
                        key: "aperture",
                        get: function get() {
                            return this._aperture;
                        },
                        set: function set(t1) {
                            this._aperture = t1, this._camera && (this._camera.aperture = t1);
                        }
                    },
                    {
                        key: "shutter",
                        get: function get() {
                            return this._shutter;
                        },
                        set: function set(t1) {
                            this._shutter = t1, this._camera && (this._camera.shutter = t1);
                        }
                    },
                    {
                        key: "iso",
                        get: function get() {
                            return this._iso;
                        },
                        set: function set(t1) {
                            this._iso = t1, this._camera && (this._camera.iso = t1);
                        }
                    },
                    {
                        key: "rect",
                        get: function get() {
                            return this._rect;
                        },
                        set: function set(t1) {
                            this._rect = t1, this._camera && this._camera.setViewportInOrientedSpace(t1);
                        }
                    },
                    {
                        key: "targetTexture",
                        get: function get() {
                            return this._targetTexture;
                        },
                        set: function set(t1) {
                            if (this._targetTexture !== t1) {
                                var _$i = this._targetTexture;
                                this._targetTexture = t1, this._checkTargetTextureEvent(_$i), this._updateTargetTexture(), !t1 && this._camera && (this._camera.changeTargetWindow(null), this._camera.isWindowSize = !0), this.node.emit("tex-change", this);
                            }
                        }
                    },
                    {
                        key: "usePostProcess",
                        get: function get() {
                            return this._usePostProcess;
                        },
                        set: function set(t1) {
                            this._usePostProcess = t1, this._camera && (this._camera.usePostProcess = t1);
                        }
                    },
                    {
                        key: "postProcess",
                        get: function get() {
                            return this._postProcess;
                        },
                        set: function set(t1) {
                            this._postProcess = t1, this._camera && (this._camera.postProcess = t1);
                        }
                    },
                    {
                        key: "screenScale",
                        get: function get() {
                            return this._screenScale;
                        },
                        set: function set(t1) {
                            this._screenScale = t1, this._camera && (this._camera.screenScale = t1);
                        }
                    },
                    {
                        key: "inEditorMode",
                        get: function get() {
                            return this._inEditorMode;
                        },
                        set: function set(t1) {
                            if (this._inEditorMode = t1, this._camera) {
                                var _$i = A.director.root;
                                this._camera.changeTargetWindow(t1 ? _$i && _$i.mainWindow : _$i && _$i.tempWindow);
                            }
                        }
                    },
                    {
                        key: "cameraType",
                        get: function get() {
                            return this._cameraType;
                        },
                        set: function set(t1) {
                            this._cameraType !== t1 && (this._cameraType = t1, this.camera && (this.camera.cameraType = t1));
                        }
                    },
                    {
                        key: "trackingType",
                        get: function get() {
                            return this._trackingType;
                        },
                        set: function set(t1) {
                            this._trackingType !== t1 && (this._trackingType = t1, this.camera && (this.camera.trackingType = t1));
                        }
                    }
                ]), i;
            }(Yg)).ProjectionType = yj, dj.FOVAxis = _j, dj.ClearFlag = Aj, dj.Aperture = mj, dj.Shutter = bj, dj.ISO = kj, dj.TARGET_TEXTURE_CHANGE = "tex-change", $x = ho(dj.prototype, "_projection", [
                Ro
            ], function() {
                return yj.PERSPECTIVE;
            }), Xx = ho(dj.prototype, "_priority", [
                Ro
            ], function() {
                return 0;
            }), qx = ho(dj.prototype, "_fov", [
                Ro
            ], function() {
                return 45;
            }), Yx = ho(dj.prototype, "_fovAxis", [
                Ro
            ], function() {
                return _j.VERTICAL;
            }), Kx = ho(dj.prototype, "_orthoHeight", [
                Ro
            ], function() {
                return 10;
            }), Jx = ho(dj.prototype, "_near", [
                Ro
            ], function() {
                return 1;
            }), Qx = ho(dj.prototype, "_far", [
                Ro
            ], function() {
                return 1e3;
            }), Zx = ho(dj.prototype, "_color", [
                Ro
            ], function() {
                return new Yr("#333333");
            }), tj = ho(dj.prototype, "_depth", [
                Ro
            ], function() {
                return 1;
            }), ij = ho(dj.prototype, "_stencil", [
                Ro
            ], function() {
                return 0;
            }), nj = ho(dj.prototype, "_clearFlags", [
                Ro
            ], function() {
                return Aj.SOLID_COLOR;
            }), sj = ho(dj.prototype, "_rect", [
                Ro
            ], function() {
                return new sh(0, 0, 1, 1);
            }), rj = ho(dj.prototype, "_aperture", [
                Ro
            ], function() {
                return mj.F16_0;
            }), hj = ho(dj.prototype, "_shutter", [
                Ro
            ], function() {
                return bj.D125;
            }), ej = ho(dj.prototype, "_iso", [
                Ro
            ], function() {
                return kj.ISO100;
            }), uj = ho(dj.prototype, "_screenScale", [
                Ro
            ], function() {
                return 1;
            }), oj = ho(dj.prototype, "_visibility", [
                Ro
            ], function() {
                return q_;
            }), fj = ho(dj.prototype, "_targetTexture", [
                Ro
            ], function() {
                return null;
            }), cj = ho(dj.prototype, "_postProcess", [
                Ro
            ], function() {
                return null;
            }), aj = ho(dj.prototype, "_usePostProcess", [
                Ro
            ], function() {
                return !1;
            }), vj = ho(dj.prototype, "_cameraType", [
                Ro
            ], function() {
                return -1;
            }), lj = ho(dj.prototype, "_trackingType", [
                Ro
            ], function() {
                return 0;
            }), y(dj.prototype, "visibility", [
                Lx
            ], Object.getOwnPropertyDescriptor(dj.prototype, "visibility"), dj.prototype), y(dj.prototype, "clearFlags", [
                Bx
            ], Object.getOwnPropertyDescriptor(dj.prototype, "clearFlags"), dj.prototype), y(dj.prototype, "projection", [
                Fx
            ], Object.getOwnPropertyDescriptor(dj.prototype, "projection"), dj.prototype), y(dj.prototype, "fovAxis", [
                Ux
            ], Object.getOwnPropertyDescriptor(dj.prototype, "fovAxis"), dj.prototype), y(dj.prototype, "aperture", [
                xx
            ], Object.getOwnPropertyDescriptor(dj.prototype, "aperture"), dj.prototype), y(dj.prototype, "shutter", [
                jx
            ], Object.getOwnPropertyDescriptor(dj.prototype, "shutter"), dj.prototype), y(dj.prototype, "iso", [
                Gx
            ], Object.getOwnPropertyDescriptor(dj.prototype, "iso"), dj.prototype), y(dj.prototype, "targetTexture", [
                Hx
            ], Object.getOwnPropertyDescriptor(dj.prototype, "targetTexture"), dj.prototype), y(dj.prototype, "usePostProcess", [
                mo
            ], Object.getOwnPropertyDescriptor(dj.prototype, "usePostProcess"), dj.prototype), y(dj.prototype, "postProcess", [
                Vx
            ], Object.getOwnPropertyDescriptor(dj.prototype, "postProcess"), dj.prototype), dj)) || dj));
            A.Camera = Ej;
            var Tj, Sj, Oj, Ij, Rj, Mj, Cj, Nj, Pj, Dj = t1("R", go("cc.RenderRoot2D")(wj = yo(100)(wj = po(hB)(wj = oo(wj = function(t1) {
                function i() {
                    return t1.apply(this, arguments) || this;
                }
                h(i, t1);
                var n = i.prototype;
                return n.onEnable = function() {
                    A.director.root.batcher2D.addScreen(this);
                }, n.onDisable = function() {
                    A.director.root.batcher2D.removeScreen(this);
                }, n.onDestroy = function() {
                    A.director.root.batcher2D.removeScreen(this);
                }, i;
            }(Yg)) || wj) || wj) || wj) || wj), Lj = new Ss;
            function Fj(t1, i, n) {
                var s = t1.o, _$r = t1.d, h = 1 / _$r.x, e = 1 / _$r.y, u = 1 / _$r.z, o = (i.x - s.x) * h, f = (n.x - s.x) * h, _$c = (i.y - s.y) * e, a = (n.y - s.y) * e, v = (i.z - s.z) * u, l = (n.z - s.z) * u, _$d = Math.max(Math.max(Math.min(o, f), Math.min(_$c, a)), Math.min(v, l)), w = Math.min(Math.min(Math.max(o, f), Math.max(_$c, a)), Math.max(v, l));
                return w < 0 || _$d > w ? 0 : _$d > 0 ? _$d : w;
            }
            A.Canvas = t1("C", (Tj = go("cc.Canvas"), Sj = yo(100), Oj = Zo(Ej), Ij = Zo(Ej), Tj(Rj = Sj(Rj = oo((y((Mj = function(t1) {
                function i() {
                    var _$i;
                    return (_$i = t1.call(this) || this)._cameraComponent = Cj && Cj(), _$i._alignCanvasWithScreen = Nj && Nj(), _$i._v = new Ss, _$i.oA = 0, _$i._thisOnCameraResized = _$i._onResizeCamera.bind(a(_$i)), _$i;
                }
                h(i, t1);
                var n = i.prototype;
                return n.__preload = function() {
                    var _$t = this.getComponent("cc.Widget");
                    _$t && _$t.updateAlignment(), this._cameraComponent && (this._cameraComponent._createCamera(), this._cameraComponent.node.on("tex-change", this._thisOnCameraResized)), this._onResizeCamera(), XN.on("canvas-resize", this._thisOnCameraResized, this), XN.on("design-resolution-changed", this._thisOnCameraResized, this);
                }, n.onEnable = function() {
                    t1.prototype.onEnable.call(this), this._cameraComponent && this._cameraComponent.node.on("tex-change", this._thisOnCameraResized);
                }, n.onDisable = function() {
                    t1.prototype.onDisable.call(this), this._cameraComponent && this._cameraComponent.node.off("tex-change", this._thisOnCameraResized);
                }, n.onDestroy = function() {
                    t1.prototype.onDestroy.call(this), XN.off("canvas-resize", this._thisOnCameraResized, this), XN.off("design-resolution-changed", this._thisOnCameraResized, this);
                }, n._onResizeCamera = function() {
                    if (this._cameraComponent && this._alignCanvasWithScreen) {
                        if (this._cameraComponent.targetTexture) this._cameraComponent.orthoHeight = me.height / 2;
                        else {
                            var _$t = ye.windowSize;
                            this._cameraComponent.orthoHeight = _$t.height / XN.getScaleY() / 2;
                        }
                        this.node.getWorldPosition(Lj), this._cameraComponent.node.setWorldPosition(Lj.x, Lj.y, 1e3);
                    }
                }, n.fA = function() {
                    if (this._cameraComponent) {
                        var _$t, _$i = null == (_$t = this.cameraComponent) ? void 0 : _$t.priority;
                        return 0 === this.oA ? 1073741824 | _$i : -1073741825 & _$i;
                    }
                    return 0;
                }, s(i, [
                    {
                        key: "renderMode",
                        get: function get() {
                            return this.oA;
                        },
                        set: function set(t1) {
                            this.oA = t1, this._cameraComponent && (this._cameraComponent.priority = this.fA());
                        }
                    },
                    {
                        key: "cameraComponent",
                        get: function get() {
                            return this._cameraComponent;
                        },
                        set: function set(t1) {
                            this._cameraComponent !== t1 && (this._cameraComponent = t1, this._onResizeCamera());
                        }
                    },
                    {
                        key: "alignCanvasWithScreen",
                        get: function get() {
                            return this._alignCanvasWithScreen;
                        },
                        set: function set(t1) {
                            this._alignCanvasWithScreen = t1, this._onResizeCamera();
                        }
                    }
                ]), i;
            }(Dj)).prototype, "cameraComponent", [
                Oj
            ], Object.getOwnPropertyDescriptor(Mj.prototype, "cameraComponent"), Mj.prototype), Cj = ho(Mj.prototype, "_cameraComponent", [
                Ij
            ], function() {
                return null;
            }), Nj = ho(Mj.prototype, "_alignCanvasWithScreen", [
                Ro
            ], function() {
                return !0;
            }), Rj = Mj)) || Rj) || Rj) || Rj)), t1("U", go("cc.UIComponent")(Pj = po(hB)(Pj = yo(110)(Pj = oo(Pj = function(t1) {
                function i() {
                    var _$i;
                    return (_$i = t1.call(this) || this)._lastParent = null, _$i.stencilStage = 0, _$i;
                }
                h(i, t1);
                var n = i.prototype;
                return n.__preload = function() {
                    this.node._uiProps.uiComp = this;
                }, n.onEnable = function() {}, n.onDisable = function() {}, n.onDestroy = function() {
                    var _$t = this.node._uiProps;
                    _$t.uiComp === this && (_$t.uiComp = null);
                }, n.postUpdateAssembler = function() {}, n.markForUpdateRenderData = function() {}, n.setNodeDirty = function() {}, n.setTextureDirty = function() {}, i;
            }(Yg)) || Pj) || Pj) || Pj) || Pj);
            var _$t14, i10, _$t15, i11, n6, s6, Uj, xj, jj, Gj, Hj, Wj, zj, $j = (Uj = Oh.create(), xj = {
                distance: 1 / 0,
                doubleSided: !1,
                mode: 2
            }, jj = 0, Gj = function Gj(t1, i, n, s, r, h) {
                1 === t1 ? (jj > i || 0 === jj) && (jj = i, h && (0 === h.length ? h.push({
                    distance: i,
                    vertexIndex0: n / 3,
                    vertexIndex1: s / 3,
                    vertexIndex2: r / 3
                }) : (h[0].distance = i, h[0].vertexIndex0 = n / 3, h[0].vertexIndex1 = s / 3, h[0].vertexIndex2 = r / 3))) : (jj = i, h && h.push({
                    distance: i,
                    vertexIndex0: n / 3,
                    vertexIndex1: s / 3,
                    vertexIndex2: r / 3
                }));
            }, Hj = function Hj(t1, i, n, s, r) {
                if (7 === n) for(var h = i.length, e = 0; e < h; e += 3){
                    var u = 3 * i[e], o = 3 * i[e + 1], f = 3 * i[e + 2];
                    Ss.set(Uj.a, t1[u], t1[u + 1], t1[u + 2]), Ss.set(Uj.b, t1[o], t1[o + 1], t1[o + 2]), Ss.set(Uj.c, t1[f], t1[f + 1], t1[f + 2]);
                    var _$c = zu.rayTriangle(s, Uj, r.doubleSided);
                    if (!(0 === _$c || _$c > r.distance) && (Gj(r.mode, _$c, u, o, f, r.result), 2 === r.mode)) return _$c;
                }
                else if (8 === n) for(var a = i.length - 2, v = 0, l = 0; l < a; l += 1){
                    var _$d = 3 * i[l - v], w = 3 * i[l + v + 1], g = 3 * i[l + 2];
                    Ss.set(Uj.a, t1[_$d], t1[_$d + 1], t1[_$d + 2]), Ss.set(Uj.b, t1[w], t1[w + 1], t1[w + 2]), Ss.set(Uj.c, t1[g], t1[g + 1], t1[g + 2]), v = ~v;
                    var p = zu.rayTriangle(s, Uj, r.doubleSided);
                    if (!(0 === p || p > r.distance) && (Gj(r.mode, p, _$d, w, g, r.result), 2 === r.mode)) return p;
                }
                else if (9 === n) {
                    var _$y = i.length - 1, _$_ = 3 * i[0];
                    Ss.set(Uj.a, t1[_$_], t1[_$_ + 1], t1[_$_ + 2]);
                    for(var m = 1; m < _$y; m += 1){
                        var b = 3 * i[m], k = 3 * i[m + 1];
                        Ss.set(Uj.b, t1[b], t1[b + 1], t1[b + 2]), Ss.set(Uj.c, t1[k], t1[k + 1], t1[k + 2]);
                        var A = zu.rayTriangle(s, Uj, r.doubleSided);
                        if (!(0 === A || A > r.distance) && (Gj(r.mode, A, _$_, b, k, r.result), 2 === r.mode)) return A;
                    }
                }
                return jj;
            }, function $j(t1, i, n) {
                if (jj = 0, 0 === i.geometricInfo.positions.length) return jj;
                if (Fj(t1, i.geometricInfo.boundingBox.min, i.geometricInfo.boundingBox.max)) {
                    var _$r = i.primitiveMode, h = i.geometricInfo;
                    Hj(h.positions, h.indices, _$r, t1, void 0 === n ? xj : n);
                }
                return jj;
            }), Xj = (_$t14 = 0, i10 = {
                distance: 1 / 0,
                doubleSided: !1,
                mode: 2
            }, function(n, s, r) {
                _$t14 = 0;
                var h = void 0 === r ? i10 : r, e = s.renderingSubMeshes.length, u = s.struct.minPosition, o = s.struct.maxPosition;
                if (u && o && !Fj(n, u, o)) return _$t14;
                for(var f = 0; f < e; f++){
                    var a = $j(n, s.renderingSubMeshes[f], h);
                    if (a) {
                        if (1 === h.mode) (0 === _$t14 || _$t14 > a) && (_$t14 = a, h.subIndices && (h.subIndices[0] = f));
                        else if (_$t14 = a, h.subIndices && h.subIndices.push(f), 2 === h.mode) return a;
                    }
                }
                return _$t14 && 1 === h.mode && (h.result && (h.result[0].distance = _$t14, h.result.length = 1), h.subIndices && (h.subIndices.length = 1)), _$t14;
            }), qj = (_$t15 = 0, i11 = {
                distance: 1 / 0,
                doubleSided: !1,
                mode: 2
            }, n6 = new Sh, s6 = new cr, function(r, h, e) {
                _$t15 = 0;
                var u = void 0 === e ? i11 : e, o = h.worldBounds;
                if (o && !zu.rayAABB(r, o)) return _$t15;
                Sh.copy(n6, r), h.node && (cr.invert(s6, h.node.getWorldMatrix(s6)), Ss.transformMat4(n6.o, r.o, s6), Ss.transformMat4Normal(n6.d, r.d, s6));
                for(var f = h.subModels, _$c = 0; _$c < f.length; _$c++){
                    var v = $j(n6, f[_$c].subMesh, u);
                    if (v) {
                        if (1 === u.mode) (0 === _$t15 || _$t15 > v) && (_$t15 = v, u.subIndices && (u.subIndices[0] = _$c));
                        else if (_$t15 = v, u.subIndices && u.subIndices.push(_$c), 2 === u.mode) return v;
                    }
                }
                return _$t15 && 1 === u.mode && (u.result && (u.result[0].distance = _$t15, u.result.length = 1), u.subIndices && (u.subIndices.length = 1)), _$t15;
            });
            zu.rayModel = qj, zu.raySubMesh = $j, zu.rayMesh = Xj, Bk("specular-pass");
            var Yj, Kj, Qj, Zj, tG, iG, nG, sG, rG, hG, eG, uG, oG, fG, cG, aG, vG, lG, dG, wG, gG, pG = t1("dk", go("cc.ModelRenderer")((zj = ho((Wj = function(t1) {
                function i() {
                    var _$i;
                    return (_$i = t1.call(this) || this)._visFlags = zj && zj(), _$i._models = [], _$i._priority = 0, _$i;
                }
                h(i, t1);
                var n = i.prototype;
                return n._collectModels = function() {
                    return this._models;
                }, n.onEnable = function() {
                    this._updatePriority();
                }, n._attachToScene = function() {}, n._detachFromScene = function() {}, n._onVisibilityChange = function() {}, n._updatePriority = function() {
                    if (this._models.length > 0) for(var _$t = 0; _$t < this._models.length; _$t++)this._models[_$t].priority = this._priority;
                }, s(i, [
                    {
                        key: "visibility",
                        get: function get() {
                            return this._visFlags;
                        },
                        set: function set(t1) {
                            this._visFlags = t1, this._onVisibilityChange(t1);
                        }
                    },
                    {
                        key: "priority",
                        get: function get() {
                            return this._priority;
                        },
                        set: function set(t1) {
                            t1 !== this._priority && (this._priority = t1, this._updatePriority());
                        }
                    }
                ]), i;
            }(fB)).prototype, "_visFlags", [
                Ro
            ], function() {
                return My.Enum.NONE;
            }), Wj)) || Wj), _G = Zo;
            t1("dn", (Yj = go("cc.PrefabLink"), Kj = _G(ON), Yj((Zj = ho((Qj = function(t1) {
                function i() {
                    var _$i;
                    return (_$i = t1.call(this) || this).prefab = Zj && Zj(), _$i;
                }
                return h(i, t1), i;
            }(Yg)).prototype, "prefab", [
                Kj,
                Ro
            ], function() {
                return null;
            }), Qj)) || Qj)), t1("f", (tG = go("cc.SpriteRenderer"), iG = yo(100), nG = Zo(sD), tG(sG = iG((y((rG = function(t1) {
                function i() {
                    var _$i;
                    return (_$i = t1.call(this) || this)._spriteFrame = hG && hG(), _$i._mode = eG && eG(), _$i._color = uG && uG(), _$i._flipX = oG && oG(), _$i._flipY = fG && fG(), _$i._size = cG && cG(), _$i.my = null, _$i;
                }
                h(i, t1);
                var n = i.prototype;
                return n.onLoad = function() {
                    this._spriteFrame && (this._spriteFrame.mesh || this._spriteFrame.ensureMeshData(), this._spriteFrame.mesh.initialize()), this._updateModels();
                }, n.onRestore = function() {
                    this._updateModels(), this.enabledInHierarchy && this._attachToScene();
                }, n.onEnable = function() {
                    t1.prototype.onEnable.call(this), this.my || this._updateModels(), this._attachToScene();
                }, n.onDisable = function() {
                    this.my && this._detachFromScene();
                }, n.onDestroy = function() {
                    this.my && (A.director.root.destroyModel(this.my), this.my = null, this._models.length = 0);
                }, n._updateModels = function() {
                    if (this._spriteFrame) {
                        var _$t = this.my;
                        if (_$t ? (_$t.destroy(), _$t.initialize(), _$t.node = _$t.transform = this.node) : this._createModel(), this.my) {
                            var _$i = this._spriteFrame.mesh;
                            this.my.createBoundingShape(_$i.struct.minPosition, _$i.struct.maxPosition), this._updateModelParams(), this._onUpdateLocalDescriptorSet();
                        }
                    }
                }, n._createModel = function() {
                    var _$t = this.my = A.director.root.createModel(sC);
                    _$t.visFlags = this.visibility, _$t.node = _$t.transform = this.node, this._models.length = 0, this._models.push(this.my);
                }, n._updateModelParams = function() {
                    if (this._spriteFrame && this.my) {
                        this._spriteFrame.ensureMeshData();
                        var _$t = this._spriteFrame.mesh;
                        this.node.hasChangedFlags |= 1, this.my.transform.hasChangedFlags |= 1;
                        var _$i = _$t ? _$t.renderingSubMeshes : null;
                        if (_$i) for(var n = _$i.length, _$s = 0; _$s < n; ++_$s){
                            var _$r = this.getRenderMaterial(_$s);
                            _$r && !_$r.isValid && (_$r = null);
                            var _$h = _$i[_$s];
                            _$h && this.my.initSubModel(_$s, _$h, _$r || this._getBuiltinMaterial());
                        }
                        this.my.enabled = !0;
                    }
                }, n._getBuiltinMaterial = function() {
                    return Lk.get("missing-material");
                }, n._onMaterialModified = function(i, n) {
                    t1.prototype._onMaterialModified.call(this, i, n), this._spriteFrame && this.my && this.my.inited && this.tu(i, n || this._getBuiltinMaterial());
                }, n.tu = function(t1, i) {
                    this.my && this.my.inited && (this.my.setSubModelMaterial(t1, i), this._onUpdateLocalDescriptorSet());
                }, n._onUpdateLocalDescriptorSet = function() {
                    if (this._spriteFrame && this.my && this.my.inited) for(var _$t = this._spriteFrame.getGFXTexture(), _$i = this._spriteFrame.getGFXSampler(), n = this.my.subModels, _$s = 0; _$s < n.length; _$s++){
                        var _$r = n[_$s].descriptorSet;
                        _$r.bindTexture(12, _$t), _$r.bindSampler(12, _$i), _$r.update();
                    }
                }, n._attachToScene = function() {
                    if (this.node.scene && this.my) {
                        var _$t = this._getRenderScene();
                        null !== this.my.scene && this._detachFromScene(), _$t.addModel(this.my);
                    }
                }, n._detachFromScene = function() {
                    this.my && this.my.scene && this.my.scene.removeModel(this.my);
                }, s(i, [
                    {
                        key: "spriteFrame",
                        get: function get() {
                            return this._spriteFrame;
                        },
                        set: function set(t1) {
                            this._spriteFrame !== t1 && (this._spriteFrame, this._spriteFrame = t1, this._spriteFrame && (this._spriteFrame.ensureMeshData(), this._spriteFrame.mesh.initialize()), this._updateModels(), this.enabledInHierarchy && this._attachToScene());
                        }
                    },
                    {
                        key: "model",
                        get: function get() {
                            return this.my;
                        }
                    }
                ]), i;
            }(pG)).prototype, "spriteFrame", [
                nG
            ], Object.getOwnPropertyDescriptor(rG.prototype, "spriteFrame"), rG.prototype), hG = ho(rG.prototype, "_spriteFrame", [
                Ro
            ], function() {
                return null;
            }), eG = ho(rG.prototype, "_mode", [
                Ro
            ], function() {
                return 0;
            }), uG = ho(rG.prototype, "_color", [
                Ro
            ], function() {
                return Yr.WHITE.clone();
            }), oG = ho(rG.prototype, "_flipX", [
                Ro
            ], function() {
                return !1;
            }), fG = ho(rG.prototype, "_flipY", [
                Ro
            ], function() {
                return !1;
            }), cG = ho(rG.prototype, "_size", [
                Ro
            ], function() {
                return new Or;
            }), sG = rG)) || sG) || sG)), A.UI = {
                MeshBuffer: CL,
                spriteAssembler: lx,
                labelAssembler: EU,
                RenderData: YL,
                MeshRenderData: KL
            }, t1("$", (aG = go("cc.Sorting"), vG = Zo(EB.Enum), aG(lG = oo((y((dG = function(t1) {
                function i() {
                    var _$i;
                    return (_$i = t1.call(this) || this)._sortingLayer = wG && wG(), _$i._sortingOrder = gG && gG(), _$i.cA = null, _$i;
                }
                h(i, t1);
                var n = i.prototype;
                return n.__preload = function() {
                    this.cA = this.getComponent("cc.ModelRenderer"), this.cA || nt(16301, this.node.name), this._updateSortingPriority();
                }, n._updateSortingPriority = function() {
                    var _$t = EB.getLayerIndex(this._sortingLayer), _$i = EB.getSortingPriority(_$t, this._sortingOrder);
                    this.cA && this.cA.isValid && (this.cA.priority = _$i);
                }, s(i, [
                    {
                        key: "sortingLayer",
                        get: function get() {
                            return this._sortingLayer;
                        },
                        set: function set(t1) {
                            t1 !== this._sortingLayer && EB.isLayerValid(t1) && (this._sortingLayer = t1, this._updateSortingPriority());
                        }
                    },
                    {
                        key: "sortingOrder",
                        get: function get() {
                            return this._sortingOrder;
                        },
                        set: function set(t1) {
                            t1 !== this._sortingOrder && (this._sortingOrder = Un(t1, -32768, 32767), this._updateSortingPriority());
                        }
                    }
                ]), i;
            }(Yg)).prototype, "sortingLayer", [
                vG
            ], Object.getOwnPropertyDescriptor(dG.prototype, "sortingLayer"), dG.prototype), wG = ho(dG.prototype, "_sortingLayer", [
                Ro
            ], function() {
                return EB.Enum.default;
            }), gG = ho(dG.prototype, "_sortingOrder", [
                Ro
            ], function() {
                return 0;
            }), lG = dG)) || lG) || lG));
            var mG, bG, kG, AG, EG, TG = "cc.animation.", SG = Symbol("CreateEval");
            go(TG + "EmbeddedPlayer")((bG = ho((mG = function(t1) {
                function i() {
                    for(var _$i, n = arguments.length, s = Array(n), _$r = 0; _$r < n; _$r++)s[_$r] = arguments[_$r];
                    return (_$i = t1.call.apply(t1, [
                        this
                    ].concat(s)) || this).begin = bG && bG(), _$i.end = kG && kG(), _$i.reconciledSpeed = AG && AG(), _$i.playable = EG && EG(), _$i;
                }
                return h(i, t1), i;
            }(cf)).prototype, "begin", [
                Ro
            ], function() {
                return 0;
            }), kG = ho(mG.prototype, "end", [
                Ro
            ], function() {
                return 0;
            }), AG = ho(mG.prototype, "reconciledSpeed", [
                Ro
            ], function() {
                return !1;
            }), EG = ho(mG.prototype, "playable", [
                Ro
            ], function() {
                return null;
            }), mG));
            var OG = function OG() {}, IG = function() {
                function t1(t1) {
                    this.vA = t1;
                }
                return t1.prototype.setTime = function() {}, s(t1, [
                    {
                        key: "randomAccess",
                        get: function get() {
                            return this.vA;
                        }
                    }
                ]), t1;
            }(), RG = function() {
                function t1() {
                    this.hg = !1, this.lA = !1, this.dA = !1;
                }
                var i = t1.prototype;
                return i.play = function() {
                    this.hg ? this.lA ? (this.lA = !1, this.onResume()) : this.onError(ot(3912)) : (this.hg = !0, this.onPlay());
                }, i.stop = function() {
                    this.hg && (this.hg = !1, this.onStop(), this.lA = !1);
                }, i.pause = function() {
                    this.hg && !this.lA && (this.lA = !0, this.onPause());
                }, i.resume = function() {
                    this.hg && this.lA && (this.lA = !1, this.onResume());
                }, i.step = function() {
                    this.pause(), this.dA = !0, this.hg || this.play();
                }, i.update = function() {}, i.onPlay = function() {}, i.onPause = function() {}, i.onResume = function() {}, i.onStop = function() {}, i.onError = function() {}, s(t1, [
                    {
                        key: "isPlaying",
                        get: function get() {
                            return this.hg;
                        }
                    },
                    {
                        key: "isPaused",
                        get: function get() {
                            return this.lA;
                        }
                    },
                    {
                        key: "isMotionless",
                        get: function get() {
                            return !this.isPlaying || this.isPaused;
                        }
                    }
                ]), t1;
            }(), MG = {
                Default: 0,
                Normal: 1,
                Reverse: 36,
                Loop: 2,
                LoopReverse: 38,
                PingPong: 22,
                PingPongReverse: 54
            };
            _i(MG);
            var CG = function() {
                function t1(t1) {
                    this.ratio = 0, this.time = 0, this.direction = 1, this.stopped = !0, this.iterations = 0, this.frameIndex = void 0, t1 && this.set(t1);
                }
                return t1.prototype.set = function(t1) {
                    this.ratio = t1.ratio, this.time = t1.time, this.direction = t1.direction, this.stopped = t1.stopped, this.iterations = t1.iterations, this.frameIndex = t1.frameIndex;
                }, t1;
            }(), NG = function() {
                function t1(t1) {
                    this.weight = 0, this.gA = void 0, this.pA = [], this.gA = t1;
                }
                var i = t1.prototype;
                return i.destroy = function() {
                    for(var _$t = 0; _$t < this.pA.length; ++_$t)this.gA.destroyWriter(this.pA[_$t]);
                    this.pA.length = 0;
                }, i.createPoseWriter = function(t1, i, n) {
                    var s = this.gA.createWriter(t1, i, this, n);
                    return this.pA.push(s), s;
                }, t1;
            }();
            function PG() {
                return A.director.getAnimationManager();
            }
            var DG = {
                PLAY: "play",
                STOP: "stop",
                PAUSE: "pause",
                RESUME: "resume",
                LASTFRAME: "lastframe",
                FINISHED: "finished"
            };
            _i(DG);
            var LG, BG, FG, UG = t1("a2", function(t1) {
                function i(i, n) {
                    var _$s;
                    return void 0 === n && (n = ""), (_$s = t1.call(this) || this).duration = 1, _$s.time = 0, _$s.frameRate = 0, _$s._targetNode = null, _$s._curveLoaded = !1, _$s.yA = void 0, _$s._A = 1, _$s.mA = !1, _$s.Bi = null, _$s.bA = 1, _$s.kA = 1, _$s.Di = 0, _$s.AA = 0, _$s.EA = !1, _$s.Ps = void 0, _$s.TA = NaN, _$s.SA = null, _$s.OA = new CG, _$s.IA = !1, _$s.RA = {
                        weight: 0
                    }, _$s.MA = 0, _$s.CA = 1, _$s.NA = null, _$s.PA = 1, _$s.DA = void 0, _$s.LA = void 0, _$s.BA = void 0, _$s._doNotCreateEval = !1, _$s.yA = i, _$s.Ps = n || i && i.name, _$s.FA = {
                        min: 0,
                        max: i.duration
                    }, _$s.MA = i.duration, i.duration || X("Clip " + i.name + " has zero duration."), _$s;
                }
                h(i, t1);
                var n = i.prototype;
                return n.initialize = function(t1, i, n) {
                    if (!this._curveLoaded) {
                        this._curveLoaded = !0, this.NA && (this.NA.destroy(), this.NA = null), this.DA && (this.DA = void 0), this.LA && (this.LA = void 0), this.BA && (this.BA.destroy(), this.BA = void 0), this._targetNode = t1;
                        var _$s = this.yA;
                        if (this.duration = _$s.duration, this.CA = 1 / this.duration, this._A = _$s.speed, this.wrapMode = _$s.wrapMode, this.frameRate = _$s.sample, this.FA.min = 0, this.FA.max = _$s.duration, this.MA = _$s.duration, 2 & ~this.wrapMode ? this.repeatCount = 1 : this.repeatCount = 1 / 0, !this._doNotCreateEval) {
                            var _$r, _$h, e, u = null != (_$r = null != i ? i : null == (_$h = PG()) ? void 0 : _$h.blendState) ? _$r : null;
                            u && (this.NA = new NG(u)), this.DA = _$s.createEvaluator({
                                target: t1,
                                pose: null != (e = this.NA) ? e : void 0,
                                mask: n
                            });
                        }
                        _$s.containsAnyEvent() && (this.LA = _$s.createEventEvaluator(this._targetNode)), _$s.containsAnyEmbeddedPlayer() && (this.BA = _$s.createEmbeddedPlayerEvaluator(this._targetNode), this.BA.notifyHostSpeedChanged(this._A));
                    }
                }, n.destroy = function() {
                    this.isMotionless || PG().removeAnimation(this), this.NA && (this.NA.destroy(), this.NA = null), this.DA = void 0;
                }, n.emit = function() {
                    for(var _$t = arguments.length, _$i = Array(_$t), n = 0; n < _$t; n++)_$i[n] = arguments[n];
                    PG().pushDelayEvent(this.UA, this, _$i);
                }, n.on = function(t1, i, n) {
                    return this.Bi && this.Bi.isValid ? this.Bi.on(t1, i, n) : null;
                }, n.once = function(t1, i, n) {
                    return this.Bi && this.Bi.isValid ? this.Bi.once(t1, i, n) : null;
                }, n.off = function(t1, i, n) {
                    this.Bi && this.Bi.isValid && this.Bi.off(t1, i, n);
                }, n.allowLastFrameEvent = function(t1) {
                    this.IA = t1;
                }, n._setEventTarget = function(t1) {
                    this.Bi = t1;
                }, n.setTime = function(t1) {
                    this.EA = !1, this.time = t1 || 0;
                    var _$i, n = this.xA(t1, this.OA);
                    null == (_$i = this.LA) || _$i.ignore(n.ratio, n.direction);
                }, n.update = function(t1) {
                    this.AA > 0 && (this.AA -= t1, this.AA > 0) || (this.EA ? this.time += t1 * this._A : this.EA = !0, this.jA());
                }, n.sample = function() {
                    var _$t = this.xA(this.time, this.OA);
                    return this._sampleCurves(_$t.time), this.GA(_$t), this.HA(_$t), _$t;
                }, n.onPlay = function() {
                    var _$t;
                    this.setTime(this.VA()), this.AA = this.Di, this.WA(), this.emit("play", this), null == (_$t = this.BA) || _$t.notifyHostPlay(this.current);
                }, n.onStop = function() {
                    var _$t;
                    this.isPaused || this.zA(), this.emit("stop", this), null == (_$t = this.BA) || _$t.notifyHostStop();
                }, n.onResume = function() {
                    var _$t;
                    this.WA(), this.emit("resume", this), null == (_$t = this.BA) || _$t.notifyHostPlay(this.current);
                }, n.onPause = function() {
                    var _$t;
                    this.zA(), this.emit("pause", this), null == (_$t = this.BA) || _$t.notifyHostPause(this.current);
                }, n._sampleCurves = function(t1) {
                    var _$i = this.NA, n = this.DA;
                    _$i && (_$i.weight = this.weight), n && n.evaluate(t1);
                }, n.jA = function() {
                    this.mA ? this.$A() : this.XA();
                }, n.XA = function() {
                    var _$t, _$i = this.sample();
                    this.IA && (_$t = this.SA ? this.SA : this.SA = new CG(_$i), this.repeatCount > 1 && (0 | _$i.iterations) > (0 | _$t.iterations) && this.emit("lastframe", this), _$t.set(_$i)), _$i.stopped && (this.stop(), this.emit("finished", this));
                }, n.$A = function() {
                    var _$t = this.FA.min, _$i = this.MA, n = 0, _$s = 0;
                    if (0 !== _$i && ((n = this.time % _$i) < 0 && (n += _$i), _$s = (_$t + n) * this.CA), this._sampleCurves(_$t + n), this.LA || this.BA) {
                        var _$r = this.xA(this.time, this.OA);
                        this.GA(_$r), this.HA(_$r);
                    }
                    this.IA && (Number.isNaN(this.TA) && (this.TA = _$s), (this.time > 0 && this.TA > _$s || this.time < 0 && this.TA < _$s) && this.emit("lastframe", this), this.TA = _$s);
                }, n.qA = function(t1) {
                    var _$i = this.wrapMode, n = !1;
                    return 22 & ~_$i || (t1 - (0 | t1) == 0 && t1 > 0 && (t1 -= 1), 1 & t1 && (n = !n)), 36 & ~_$i || (n = !n), n;
                }, n.xA = function(t1, i) {
                    i = i || new CG;
                    var n = this.FA.min, _$s = this.MA, _$r = this.repeatCount;
                    if (0 === _$s) return i.time = 0, i.ratio = 0, i.direction = 1, i.stopped = !!Number.isFinite(_$r), i.iterations = 0, i;
                    var _$h = !1, e = (t1 -= n) > 0 ? t1 / _$s : -t1 / _$s;
                    if (e >= _$r) {
                        e = _$r, _$h = !0;
                        var u = _$r - (0 | _$r);
                        0 === u && (u = 1), t1 = u * _$s * (t1 > 0 ? 1 : -1);
                    }
                    if (t1 > _$s) {
                        var o = t1 % _$s;
                        t1 = 0 === o ? _$s : o;
                    } else t1 < 0 && 0 != (t1 %= _$s) && (t1 += _$s);
                    var f = !1, _$c = 4 & this.bA;
                    _$c && (f = this.qA(e));
                    var a = f ? -1 : 1;
                    return this.speed < 0 && (a *= -1), _$c && f && (t1 = _$s - t1), i.time = n + t1, i.ratio = i.time / this.duration, i.direction = a, i.stopped = _$h, i.iterations = e, i;
                }, n.VA = function() {
                    return this.FA.min;
                }, n.GA = function(t1) {
                    var _$i;
                    null == (_$i = this.LA) || _$i.sample(t1.ratio, t1.direction, t1.iterations);
                }, n.HA = function(t1) {
                    var _$i;
                    null == (_$i = this.BA) || _$i.evaluate(t1.time, Math.trunc(t1.iterations));
                }, n.UA = function(t1, i) {
                    this.Bi && this.Bi.isValid && this.Bi.emit(t1, t1, i);
                }, n.WA = function() {
                    PG().addAnimation(this);
                }, n.zA = function() {
                    PG().removeAnimation(this);
                }, s(i, [
                    {
                        key: "clip",
                        get: function get() {
                            return this.yA;
                        }
                    },
                    {
                        key: "name",
                        get: function get() {
                            return this.Ps;
                        }
                    },
                    {
                        key: "length",
                        get: function get() {
                            return this.duration;
                        }
                    },
                    {
                        key: "wrapMode",
                        get: function get() {
                            return this.bA;
                        },
                        set: function set(t1) {
                            var _$i;
                            this.bA = t1, this.time = 0, this.repeatCount = 2 & t1 ? 1 / 0 : 1, null == (_$i = this.LA) || _$i.setWrapMode(t1);
                        }
                    },
                    {
                        key: "repeatCount",
                        get: function get() {
                            return this.kA;
                        },
                        set: function set(t1) {
                            this.kA = t1;
                            var _$i = 4 & this.bA, n = !(36 & ~this.wrapMode);
                            this.mA = t1 === 1 / 0 && !_$i && !n;
                        }
                    },
                    {
                        key: "delay",
                        get: function get() {
                            return this.Di;
                        },
                        set: function set(t1) {
                            this.AA = this.Di = t1;
                        }
                    },
                    {
                        key: "playbackRange",
                        get: function get() {
                            return this.FA;
                        },
                        set: function set(t1) {
                            t1.max, t1.min, this.FA.min = Math.max(t1.min, 0), this.FA.max = Math.min(t1.max, this.duration), this.MA = this.FA.max - this.FA.min, this.setTime(0);
                        }
                    },
                    {
                        key: "speed",
                        get: function get() {
                            return this._A;
                        },
                        set: function set(t1) {
                            var _$i;
                            this._A = t1, null == (_$i = this.BA) || _$i.notifyHostSpeedChanged(t1);
                        }
                    },
                    {
                        key: "current",
                        get: function get() {
                            return this.xA(this.time).time;
                        }
                    },
                    {
                        key: "ratio",
                        get: function get() {
                            return 0 === this.duration ? 0 : this.current / this.duration;
                        }
                    },
                    {
                        key: "weight",
                        get: function get() {
                            return this.PA;
                        },
                        set: function set(t1) {
                            this.PA = t1, this.NA && (this.NA.weight = t1);
                        }
                    },
                    {
                        key: "curveLoaded",
                        get: function get() {
                            return this._curveLoaded;
                        }
                    }
                ]), i;
            }(RG));
            A.AnimationState = UG, go(TG + "EmbeddedAnimationClipPlayable")((BG = ho((LG = function(t1) {
                function i() {
                    for(var _$i, n = arguments.length, s = Array(n), _$r = 0; _$r < n; _$r++)s[_$r] = arguments[_$r];
                    return (_$i = t1.call.apply(t1, [
                        this
                    ].concat(s)) || this).path = BG && BG(), _$i.clip = FG && FG(), _$i;
                }
                return h(i, t1), i.prototype.instantiate = function(t1) {
                    var _$i = this.clip, n = this.path;
                    if (!_$i) return null;
                    var s = t1.getChildByPath(n);
                    if (!s) return rt(3938, n, t1.getPathInHierarchy(), _$i.name), null;
                    var _$r = new UG(_$i);
                    return _$r.initialize(s), new GG(_$r);
                }, i;
            }(OG)).prototype, "path", [
                Ro
            ], function() {
                return "";
            }), FG = ho(LG.prototype, "clip", [
                Ro
            ], function() {
                return null;
            }), LG));
            var xG, jG, GG = function(t1) {
                function i(i) {
                    var n;
                    return (n = t1.call(this, !0) || this).YA = void 0, n.YA = i, n;
                }
                h(i, t1);
                var n = i.prototype;
                return n.destroy = function() {
                    this.YA.destroy();
                }, n.play = function() {
                    this.YA.play();
                }, n.pause = function() {
                    this.YA.pause();
                }, n.stop = function() {
                    this.YA.stop();
                }, n.setSpeed = function(t1) {
                    this.YA.speed = t1;
                }, n.setTime = function(t1) {
                    this.YA.time = t1;
                }, i;
            }(IG);
            go(TG + "EmbeddedParticleSystemPlayable")((jG = ho((xG = function(t1) {
                function i() {
                    for(var _$i, n = arguments.length, s = Array(n), _$r = 0; _$r < n; _$r++)s[_$r] = arguments[_$r];
                    return (_$i = t1.call.apply(t1, [
                        this
                    ].concat(s)) || this).path = jG && jG(), _$i;
                }
                return h(i, t1), i.prototype.instantiate = function(t1) {
                    var _$i = t1.getChildByPath(this.path);
                    if (!_$i) return W("Hierarchy path " + this.path + " does not exists."), null;
                    var n = Qt("cc.ParticleSystem");
                    if (!n) return W("Particle system is required for embedded particle system player."), null;
                    var s = _$i.getComponent(n);
                    return s ? new qG(s) : (W(this.path + " does not includes a particle system component."), null);
                }, i;
            }(OG)).prototype, "path", [
                Ro
            ], function() {
                return "";
            }), xG));
            var VG, WG, $G, XG, qG = function(t1) {
                function i(i) {
                    var n;
                    return (n = t1.call(this, !1) || this).KA = void 0, n.KA = i, n;
                }
                h(i, t1);
                var n = i.prototype;
                return n.destroy = function() {}, n.play = function() {
                    this.KA.play();
                }, n.pause = function() {
                    this.KA.stopEmitting();
                }, n.stop = function() {
                    this.KA.stopEmitting();
                }, n.setSpeed = function(t1) {
                    this.KA.simulationSpeed = t1;
                }, i;
            }(IG);
            function YG(t1) {
                return "string" == typeof t1 || "number" == typeof t1;
            }
            var JG, QG, ZG, iH, nH, sH, hH, eH, oH, fH, aH, vH, lH, dH, wH = go("cc.animation.HierarchyPath")((WG = ho((VG = function() {
                function t1(t1) {
                    this.path = WG && WG(), this.path = t1 || "";
                }
                return t1.prototype.get = function(t1) {
                    return _instanceof(t1, VE) ? t1.getChildByPath(this.path) || (nt(3926, t1.name, this.path), null) : (nt(3925), null);
                }, t1;
            }()).prototype, "path", [
                Ro
            ], function() {
                return "";
            }), VG)) || VG, gH = go("cc.animation.ComponentPath")((XG = ho(($G = function() {
                function t1(t1) {
                    this.component = XG && XG(), this.component = t1 || "";
                }
                return t1.prototype.get = function(t1) {
                    return _instanceof(t1, VE) ? t1.getComponent(this.component) || (nt(3928, t1.name, this.component), null) : (nt(3927), null);
                }, t1;
            }()).prototype, "component", [
                Ro
            ], function() {
                return "";
            }), $G)) || $G, pH = Symbol("NormalizedFollow"), yH = Symbol("ConvertAsTrsPath"), _H = Symbol("TrackBinding"), mH = go(TG + "TrackPath")((QG = ho((JG = function() {
                function t1() {
                    this._paths = QG && QG();
                }
                var i = t1.prototype;
                return i.toProperty = function(t1) {
                    return this._paths.push(t1), this;
                }, i.toElement = function(t1) {
                    return this._paths.push(t1), this;
                }, i.toHierarchy = function(t1) {
                    return this._paths.push(new wH(t1)), this;
                }, i.toComponent = function(t1) {
                    var i = new gH("string" == typeof t1 ? t1 : Ot(t1));
                    return this._paths.push(i), this;
                }, i.toCustomized = function(t1) {
                    return this._paths.push(t1), this;
                }, i.append = function() {
                    for(var _$t, i = arguments.length, n = Array(i), _$s = 0; _$s < i; _$s++)n[_$s] = arguments[_$s];
                    var _$r = (_$t = this._paths).concat.apply(_$t, n.map(function(t1) {
                        return t1._paths;
                    }));
                    return this._paths = _$r, this;
                }, i.isPropertyAt = function(t1) {
                    return "string" == typeof this._paths[t1];
                }, i.parsePropertyAt = function(t1) {
                    return this._paths[t1];
                }, i.isElementAt = function(t1) {
                    return "number" == typeof this._paths[t1];
                }, i.parseElementAt = function(t1) {
                    return this._paths[t1];
                }, i.isHierarchyAt = function(t1) {
                    return _instanceof(this._paths[t1], wH);
                }, i.parseHierarchyAt = function(t1) {
                    return this.isHierarchyAt(t1), this._paths[t1].path;
                }, i.isComponentAt = function(t1) {
                    return _instanceof(this._paths[t1], gH);
                }, i.parseComponentAt = function(t1) {
                    return this.isComponentAt(t1), this._paths[t1].component;
                }, i.slice = function(i, n) {
                    var _$s = new t1;
                    return _$s._paths = this._paths.slice(i, n), _$s;
                }, i.trace = function(t1, i, n) {
                    return null != i || (i = 0), null != n || (n = this._paths.length), this[pH](t1, i, n);
                }, i[yH] = function() {
                    for(var _$t, i = this._paths, n = i.length, _$s = 0, _$r = ""; _$s < n; ++_$s){
                        var h = i[_$s];
                        if (!_instanceof(h, wH)) break;
                        h.path && (_$r ? _$r += "/" + h.path : _$r = h.path);
                    }
                    if (_$s === n || _$s !== n - 1) return null;
                    switch(i[_$s]){
                        case "position":
                        case "scale":
                        case "rotation":
                        case "eulerAngles":
                            _$t = i[_$s];
                            break;
                        default:
                            return null;
                    }
                    return {
                        node: _$r,
                        property: _$t
                    };
                }, i[pH] = function(t1, i, n) {
                    for(var _$s = this._paths, _$r = t1, h = i; h < n; ++h){
                        var e = _$s[h];
                        if (YG(e)) {
                            if (!(e in _$r)) return nt(3929, e), null;
                            _$r = _$r[e];
                        } else _$r = e.get(_$r);
                        if (null === _$r) break;
                    }
                    return _$r;
                }, s(t1, [
                    {
                        key: "length",
                        get: function get() {
                            return this._paths.length;
                        }
                    }
                ]), t1;
            }()).prototype, "_paths", [
                Ro
            ], function() {
                return [];
            }), JG)) || JG, bH = go(TG + "TrackBinding")(ZG = eo(((sH = function() {
                function t1() {
                    this.path = iH && iH(), this.proxy = nH && nH();
                }
                var i = t1.prototype;
                return i.parseTrsPath = function() {
                    return this.proxy ? null : this.path[yH]();
                }, i.createRuntimeBinding = function(i, n, s) {
                    var _$r = this.path, h = this.proxy, e = _$r.length, u = e - 1;
                    if (0 === e || !_$r.isPropertyAt(u) && !_$r.isElementAt(u) || h) {
                        if (h) {
                            var o = _$r[pH](i, 0, e);
                            if (null === o) return null;
                            var f = h.forTarget(o);
                            if (!f) return null;
                            var _$c = {
                                setValue: function setValue(t1) {
                                    f.set(t1);
                                }
                            }, a = f.get;
                            return a && (_$c.getValue = function() {
                                return a.call(f);
                            }), _$c;
                        }
                        return rt(3921), null;
                    }
                    var v = _$r.isPropertyAt(u) ? _$r.parsePropertyAt(u) : _$r.parseElementAt(u), l = _$r[pH](i, 0, e - 1);
                    if (null === l) return null;
                    if (n && _instanceof(l, VE) && ("position" === v || "rotation" === v || "scale" === v || "eulerAngles" === v)) return n.createPoseWriter(l, v, s);
                    var _$d = t1.JA.get(l.constructor);
                    _$d || (_$d = new Map, t1.JA.set(l.constructor, _$d));
                    var g = _$d.get(v);
                    return g || (g = {
                        setValue: Function("value", "this.target." + v + " = value;"),
                        getValue: Function("return this.target." + v + ";")
                    }, _$d.set(v, g)), {
                        target: l,
                        setValue: g.setValue,
                        getValue: g.getValue
                    };
                }, i.isMaskedOff = function(t1) {
                    var i = this.parseTrsPath();
                    if (!i) return !1;
                    for(var n = t1.joints[Symbol.iterator](), s = n.next(); !s.done; s = n.next()){
                        var _$r = s.value;
                        if (_$r.path === i.node) return !_$r.enabled;
                    }
                    return !1;
                }, t1;
            }()).JA = new WeakMap, iH = ho(sH.prototype, "path", [
                Ro
            ], function() {
                return new mH;
            }), nH = ho(sH.prototype, "proxy", [
                Ro
            ], null), ZG = sH)) || ZG) || ZG, kH = go(TG + "Track")((eH = ho((hH = function() {
                function t1() {
                    this._binding = eH && eH();
                }
                var i = t1.prototype;
                return i.channels = function() {
                    return [];
                }, i.range = function() {
                    for(var _$t, i = {
                        min: 1 / 0,
                        max: -1 / 0
                    }, n = d(this.channels()); !(_$t = n()).done;){
                        var _$s = _$t.value;
                        i.min = Math.min(i.min, _$s.curve.rangeMin), i.max = Math.max(i.max, _$s.curve.rangeMax);
                    }
                    return i;
                }, s(t1, [
                    {
                        key: "path",
                        get: function get() {
                            return this._binding.path;
                        },
                        set: function set(t1) {
                            this._binding.path = t1;
                        }
                    },
                    {
                        key: "proxy",
                        get: function get() {
                            return this._binding.proxy;
                        },
                        set: function set(t1) {
                            this._binding.proxy = t1;
                        }
                    },
                    {
                        key: _H,
                        get: function get() {
                            return this._binding;
                        }
                    }
                ]), t1;
            }()).prototype, "_binding", [
                Ro
            ], function() {
                return new bH;
            }), hH)) || hH, AH = go(TG + "Channel")((fH = ho((oH = function() {
                function t1(t1) {
                    this.name = "", this._curve = fH && fH(), this._curve = t1;
                }
                return s(t1, [
                    {
                        key: "curve",
                        get: function get() {
                            return this._curve;
                        }
                    }
                ]), t1;
            }()).prototype, "_curve", [
                Ro
            ], null), oH)) || oH, EH = go(TG + "SingleChannelTrack")((vH = ho((aH = function(t1) {
                function i() {
                    var _$i;
                    return (_$i = t1.call(this) || this)._channel = vH && vH(), _$i._channel = new AH(_$i.createCurve()), _$i;
                }
                h(i, t1);
                var n = i.prototype;
                return n.channels = function() {
                    return [
                        this._channel
                    ];
                }, n.createCurve = function() {
                    throw Error("Not impl");
                }, n[SG] = function() {
                    return new TH(this._channel.curve);
                }, s(i, [
                    {
                        key: "channel",
                        get: function get() {
                            return this._channel;
                        }
                    }
                ]), i;
            }(kH)).prototype, "_channel", [
                Ro
            ], null), aH)) || aH, TH = function() {
                function t1(t1) {
                    this.QA = t1;
                }
                return t1.prototype.evaluate = function(t1) {
                    return this.QA.evaluate(t1);
                }, s(t1, [
                    {
                        key: "requiresDefault",
                        get: function get() {
                            return !1;
                        }
                    }
                ]), t1;
            }();
            go(TG + "RealArrayTrack")((dH = ho((lH = function(t1) {
                function i() {
                    for(var _$i, n = arguments.length, _$s = Array(n), _$r = 0; _$r < n; _$r++)_$s[_$r] = arguments[_$r];
                    return (_$i = t1.call.apply(t1, [
                        this
                    ].concat(_$s)) || this)._channels = dH && dH(), _$i;
                }
                h(i, t1);
                var n = i.prototype;
                return n.channels = function() {
                    return this._channels;
                }, n[SG] = function() {
                    return new jH(this._channels.map(function(t1) {
                        return t1.curve;
                    }));
                }, s(i, [
                    {
                        key: "elementCount",
                        get: function get() {
                            return this._channels.length;
                        },
                        set: function set(t1) {
                            var n, _$i = this._channels.length;
                            t1 < _$i ? this._channels.splice(t1) : t1 > _$i && (n = this._channels).push.apply(n, Array.from({
                                length: t1 - _$i
                            }, function() {
                                return new AH(new _c);
                            }));
                        }
                    }
                ]), i;
            }(kH)).prototype, "_channels", [
                Ro
            ], function() {
                return [];
            }), lH));
            var IH, RH, MH, CH, PH, DH, LH, FH, UH, xH, jH = function() {
                function t1(t1) {
                    this.ZA = t1, this.Qd = Array(t1.length).fill(0);
                }
                return t1.prototype.evaluate = function(t1) {
                    for(var i = this.Qd, n = i.length, _$s = 0; _$s < n; ++_$s)i[_$s] = this.ZA[_$s].evaluate(t1);
                    return this.Qd;
                }, s(t1, [
                    {
                        key: "requiresDefault",
                        get: function get() {
                            return !1;
                        }
                    }
                ]), t1;
            }(), GH = go("cc.animation.UniformProxyFactory")((RH = ho((IH = function() {
                function t1(t1, i) {
                    this.passIndex = RH && RH(), this.uniformName = MH && MH(), p(this, "channelIndex", CH, this), this.passIndex = i || 0, this.uniformName = t1 || "";
                }
                return t1.prototype.forTarget = function(t1) {
                    if (_instanceof(t1, rA)) {
                        var i = this.passIndex, n = this.uniformName, s = this.channelIndex;
                        if (i < 0 || i >= t1.passes.length) nt(3941, t1.name, i);
                        else {
                            var _$r = t1.passes[i], h = _$r.getHandle(n);
                            if (h) {
                                if (26 > hm(h)) {
                                    var e = void 0 === s ? h : _$r.getHandle(n, s, 13);
                                    return e ? HH(_$r, n) ? {
                                        set: function set(t1) {
                                            _$r.setUniformArray(e, t1);
                                        }
                                    } : {
                                        set: function set(t1) {
                                            _$r.setUniform(e, t1);
                                        }
                                    } : void nt(3943, t1.name, i, n, s);
                                }
                                var u = em(h), o = _$r.properties[n], f = o && o.value ? "" + o.value + wm(o.type) : dm(o.type), _$c = Lk.get(f);
                                return _$c || (W("Illegal texture default value: " + f + "."), _$c = Lk.get("default-texture")), {
                                    set: function set(t1) {
                                        t1 || (t1 = _$c);
                                        var i = t1.getGFXTexture();
                                        i && i.width && i.height && (_$r.bindTexture(u, i), _instanceof(t1, Tg) && _$r.bindSampler(u, kw.gfxDevice.getSampler(t1.getSamplerInfo())));
                                    }
                                };
                            }
                            nt(3942, t1.name, i, n);
                        }
                    } else nt(3940, t1);
                }, t1;
            }()).prototype, "passIndex", [
                Ro
            ], function() {
                return 0;
            }), MH = ho(IH.prototype, "uniformName", [
                Ro
            ], function() {
                return "";
            }), CH = y(IH.prototype, "channelIndex", [
                Ko
            ], {
                configurable: !0,
                enumerable: !0,
                writable: !0,
                initializer: function initializer() {}
            }), IH)) || IH;
            function HH(t1, i) {
                for(var n, s = d(t1.shaderInfo.blocks); !(n = s()).done;)for(var _$r, h = d(n.value.members); !(_$r = h()).done;){
                    var e = _$r.value;
                    if (e.name === i) return e.count > 1;
                }
                return !1;
            }
            var WH, zH, $H, XH, qH = go("cc.animation.MorphWeightValueProxy")((DH = ho((PH = function() {
                function t1() {
                    this.subMeshIndex = DH && DH(), this.shapeIndex = LH && LH();
                }
                return t1.prototype.forTarget = function(t1) {
                    var i = this;
                    return {
                        set: function set(n) {
                            t1.setWeight(n, i.subMeshIndex, i.shapeIndex);
                        }
                    };
                }, t1;
            }()).prototype, "subMeshIndex", [
                Ro
            ], function() {
                return 0;
            }), LH = ho(PH.prototype, "shapeIndex", [
                Ro
            ], function() {
                return 0;
            }), PH)) || PH, YH = go("cc.animation.MorphWeightsValueProxy")((UH = ho((FH = function() {
                function t1() {
                    this.subMeshIndex = UH && UH();
                }
                return t1.prototype.forTarget = function(t1) {
                    var i = this;
                    return {
                        set: function set(n) {
                            t1.setWeights(n, i.subMeshIndex);
                        }
                    };
                }, t1;
            }()).prototype, "subMeshIndex", [
                Ro
            ], function() {
                return 0;
            }), FH)) || FH, KH = go("cc.animation.MorphWeightsAllValueProxy")(xH = function() {
                function t1() {}
                return t1.prototype.forTarget = function(t1) {
                    return {
                        set: function set(i) {
                            for(var n, s, _$r = null != (n = null == (s = t1.mesh) ? void 0 : s.struct.primitives.length) ? n : 0, h = 0; h < _$r; ++h)t1.setWeights(i, h);
                        }
                    };
                }, t1;
            }()) || xH;
            function JH(t1, i, n, s) {
                var h, e, u, o, f = new i, _$c = new i, a = new i, v = go(t1)((e = ho((h = function() {
                    function t1(t1, n, s) {
                        this.dataPoint = e && e(), this.inTangent = u && u(), this.outTangent = o && o(), this.dataPoint = t1 || new i, this.inTangent = n || new i, this.outTangent = s || new i;
                    }
                    var _$r = t1.prototype;
                    return _$r.lerp = function(t1, i, r) {
                        var h = this.dataPoint, e = t1.dataPoint;
                        _$c = n(_$c, this.inTangent, r), a = n(a, t1.outTangent, r);
                        var u = i * i * i, o = i * i;
                        return f = s(f = n(f, h, 2 * u - 3 * o + 1), f, _$c, u - 2 * o + i), f = s(f, f, e, -2 * u + 3 * o), f = s(f, f, a, u - o);
                    }, _$r.getNoLerp = function() {
                        return this.dataPoint;
                    }, t1;
                }()).prototype, "dataPoint", [
                    Ro
                ], function() {
                    return new i;
                }), u = ho(h.prototype, "inTangent", [
                    Ro
                ], function() {
                    return new i;
                }), o = ho(h.prototype, "outTangent", [
                    Ro
                ], function() {
                    return new i;
                }), h)) || h;
                if (i === qs) {
                    var l = v.prototype.lerp;
                    v.prototype.lerp = function(t1, i, n) {
                        var s = l.call(this, t1, i, n);
                        return qs.normalize(s, s), s;
                    };
                }
                return v;
            }
            var QH, tV, iV, nV, sV = JH("cc.CubicSplineVec2Value", Or, Or.multiplyScalar, Or.scaleAndAdd), rV = JH("cc.CubicSplineVec3Value", Ss, Ss.multiplyScalar, Ss.scaleAndAdd), hV = JH("cc.CubicSplineVec4Value", Hr, Hr.multiplyScalar, Hr.scaleAndAdd), eV = JH("cc.CubicSplineQuatValue", qs, qs.multiplyScalar, qs.scaleAndAdd), uV = go("cc.CubicSplineNumberValue")((zH = ho((WH = function() {
                function t1(t1, i, n) {
                    this.dataPoint = zH && zH(), this.inTangent = $H && $H(), this.outTangent = XH && XH(), this.dataPoint = t1, this.inTangent = i, this.outTangent = n;
                }
                var i = t1.prototype;
                return i.lerp = function(t1, i, n) {
                    var s = this.dataPoint, _$r = t1.dataPoint, h = i * i * i, e = i * i;
                    return s * (2 * h - 3 * e + 1) + this.outTangent * n * (h - 2 * e + i) + _$r * (-2 * h + 3 * e) + t1.inTangent * n * (h - e);
                }, i.getNoLerp = function() {
                    return this.dataPoint;
                }, t1;
            }()).prototype, "dataPoint", [
                Ro
            ], function() {
                return 0;
            }), $H = ho(WH.prototype, "inTangent", [
                Ro
            ], function() {
                return 0;
            }), XH = ho(WH.prototype, "outTangent", [
                Ro
            ], function() {
                return 0;
            }), WH)) || WH, oV = go(TG + "RealTrack")(QH = function(t1) {
                function i() {
                    return t1.apply(this, arguments) || this;
                }
                return h(i, t1), i.prototype.createCurve = function() {
                    return new _c;
                }, i;
            }(EH)) || QH;
            function fV(t1) {
                return 0 === t1.keyFramesCount ? void 0 : t1;
            }
            var cV, vV, lV, wV, gV, pV, yV = [
                "X",
                "Y",
                "Z",
                "W"
            ], _V = go(TG + "VectorTrack")((iV = ho((tV = function(t1) {
                function i() {
                    var _$i;
                    (_$i = t1.call(this) || this)._channels = iV && iV(), _$i._nComponents = nV && nV(), _$i._channels = [
                        ,
                        ,
                        ,
                        , 
                    ];
                    for(var n = 0; n < _$i._channels.length; ++n){
                        var _$s = new AH(new _c);
                        _$s.name = yV[n], _$i._channels[n] = _$s;
                    }
                    return _$i;
                }
                h(i, t1);
                var n = i.prototype;
                return n.channels = function() {
                    return this._channels;
                }, n[SG] = function() {
                    switch(this._nComponents){
                        default:
                        case 2:
                            return new mV(fV(this._channels[0].curve), fV(this._channels[1].curve));
                        case 3:
                            return new bV(fV(this._channels[0].curve), fV(this._channels[1].curve), fV(this._channels[2].curve));
                        case 4:
                            return new kV(fV(this._channels[0].curve), fV(this._channels[1].curve), fV(this._channels[2].curve), fV(this._channels[3].curve));
                    }
                }, s(i, [
                    {
                        key: "componentsCount",
                        get: function get() {
                            return this._nComponents;
                        },
                        set: function set(t1) {
                            this._nComponents = t1;
                        }
                    }
                ]), i;
            }(kH)).prototype, "_channels", [
                Ro
            ], null), nV = ho(tV.prototype, "_nComponents", [
                Ro
            ], function() {
                return 4;
            }), tV)) || tV, mV = function() {
                function t1(t1, i) {
                    this.Qd = new Or, this.Ph = t1, this.Dh = i;
                }
                return t1.prototype.evaluate = function(t1, i) {
                    return i && Or.copy(this.Qd, i), this.Ph && (this.Qd.x = this.Ph.evaluate(t1)), this.Dh && (this.Qd.y = this.Dh.evaluate(t1)), this.Qd;
                }, s(t1, [
                    {
                        key: "requiresDefault",
                        get: function get() {
                            return !this.Ph || !this.Dh;
                        }
                    }
                ]), t1;
            }(), bV = function() {
                function t1(t1, i, n) {
                    this.Qd = new Ss, this.Ph = t1, this.Dh = i, this.tE = n;
                }
                return t1.prototype.evaluate = function(t1, i) {
                    var n = this.Ph, _$s = this.Dh, _$r = this.tE, h = this.Qd;
                    return i && Ss.copy(h, i), n && (h.x = n.evaluate(t1)), _$s && (h.y = _$s.evaluate(t1)), _$r && (h.z = _$r.evaluate(t1)), h;
                }, s(t1, [
                    {
                        key: "requiresDefault",
                        get: function get() {
                            return !this.Ph || !this.Dh || !this.tE;
                        }
                    }
                ]), t1;
            }(), kV = function() {
                function t1(t1, i, n, s) {
                    this.Qd = new Hr, this.Ph = t1, this.Dh = i, this.tE = n, this.iE = s;
                }
                return t1.prototype.evaluate = function(t1, i) {
                    return i && Hr.copy(this.Qd, i), this.Ph && (this.Qd.x = this.Ph.evaluate(t1)), this.Dh && (this.Qd.y = this.Dh.evaluate(t1)), this.tE && (this.Qd.z = this.tE.evaluate(t1)), this.iE && (this.Qd.w = this.iE.evaluate(t1)), this.Qd;
                }, s(t1, [
                    {
                        key: "requiresDefault",
                        get: function get() {
                            return !(this.Ph && this.Dh && this.tE && this.iE);
                        }
                    }
                ]), t1;
            }(), AV = go(TG + "QuatTrack")(cV = function(t1) {
                function i() {
                    return t1.apply(this, arguments) || this;
                }
                h(i, t1);
                var n = i.prototype;
                return n.createCurve = function() {
                    return new ga;
                }, n[SG] = function() {
                    return new EV(this.channels()[0].curve);
                }, i;
            }(EH)) || cV, EV = function() {
                function t1(t1) {
                    this.Qd = new qs, this.QA = t1;
                }
                return t1.prototype.evaluate = function(t1) {
                    return this.QA.evaluate(t1, this.Qd), this.Qd;
                }, s(t1, [
                    {
                        key: "requiresDefault",
                        get: function get() {
                            return !1;
                        }
                    }
                ]), t1;
            }(), TV = [
                "Red",
                "Green",
                "Blue",
                "Alpha"
            ], SV = go(TG + "ColorTrack")((lV = ho((vV = function(t1) {
                function i() {
                    var _$i;
                    (_$i = t1.call(this) || this)._channels = lV && lV(), _$i._channels = [
                        ,
                        ,
                        ,
                        , 
                    ];
                    for(var n = 0; n < _$i._channels.length; ++n){
                        var s = new AH(new _c);
                        s.name = TV[n], _$i._channels[n] = s;
                    }
                    return _$i;
                }
                h(i, t1);
                var n = i.prototype;
                return n.channels = function() {
                    return this._channels;
                }, n[SG] = function() {
                    return new OV(fV(this._channels[0].curve), fV(this._channels[1].curve), fV(this._channels[2].curve), fV(this._channels[3].curve));
                }, i;
            }(kH)).prototype, "_channels", [
                Ro
            ], null), vV)) || vV, OV = function() {
                function t1(t1, i, n, s) {
                    this.Qd = new Yr, this.Ph = t1, this.Dh = i, this.tE = n, this.iE = s;
                }
                return t1.prototype.evaluate = function(t1, i) {
                    return i && Yr.copy(this.Qd, i), this.Ph && (this.Qd.r = this.Ph.evaluate(t1)), this.Dh && (this.Qd.g = this.Dh.evaluate(t1)), this.tE && (this.Qd.b = this.tE.evaluate(t1)), this.iE && (this.Qd.a = this.iE.evaluate(t1)), this.Qd;
                }, s(t1, [
                    {
                        key: "requiresDefault",
                        get: function get() {
                            return !(this.Ph && this.Dh && this.tE && this.iE);
                        }
                    }
                ]), t1;
            }(), IV = [
                "Width",
                "Height"
            ], RV = go(TG + "SizeTrack")((gV = ho((wV = function(t1) {
                function i() {
                    var _$i;
                    (_$i = t1.call(this) || this)._channels = gV && gV(), _$i._channels = [
                        ,
                        , 
                    ];
                    for(var n = 0; n < _$i._channels.length; ++n){
                        var s = new AH(new _c);
                        s.name = IV[n], _$i._channels[n] = s;
                    }
                    return _$i;
                }
                h(i, t1);
                var n = i.prototype;
                return n.channels = function() {
                    return this._channels;
                }, n[SG] = function() {
                    return new MV(fV(this._channels[0].curve), fV(this._channels[1].curve));
                }, i;
            }(kH)).prototype, "_channels", [
                Ro
            ], null), wV)) || wV, MV = function() {
                function t1(t1, i) {
                    this.Qd = new Zr, this.Qn = t1, this.Zn = i;
                }
                return t1.prototype.evaluate = function(t1, i) {
                    return i && (this.Qd.x = i.x, this.Qd.y = i.y), this.Qn && (this.Qd.width = this.Qn.evaluate(t1)), this.Zn && (this.Qd.height = this.Zn.evaluate(t1)), this.Qd;
                }, s(t1, [
                    {
                        key: "requiresDefault",
                        get: function get() {
                            return !this.Qn || !this.Zn;
                        }
                    }
                ]), t1;
            }(), CV = go(TG + "ObjectTrack")(pV = function(t1) {
                function i() {
                    return t1.apply(this, arguments) || this;
                }
                return h(i, t1), i.prototype.createCurve = function() {
                    return new Ta;
                }, i;
            }(EH)) || pV;
            t1("a0", Object.freeze({
                __proto__: null,
                ColorTrack: SV,
                ComponentPath: gH,
                CubicSplineNumberValue: uV,
                CubicSplineQuatValue: eV,
                CubicSplineVec2Value: sV,
                CubicSplineVec3Value: rV,
                CubicSplineVec4Value: hV,
                HierarchyPath: wH,
                MorphWeightValueProxy: qH,
                MorphWeightsAllValueProxy: KH,
                MorphWeightsValueProxy: YH,
                ObjectTrack: CV,
                QuatTrack: AV,
                RealTrack: oV,
                SizeTrack: RV,
                Track: kH,
                TrackPath: mH,
                UniformProxyFactory: GH,
                VectorTrack: _V,
                isCustomPath: function isCustomPath(t1, i) {
                    return _instanceof(t1, i);
                },
                isPropertyPath: YG
            }));
            var PV = t1("a4", function() {
                function t1(t1) {
                    var i, n;
                    this.ratios = void 0, this.nE = void 0, this.ratios = t1;
                    for(var s = !0, _$r = 1, h = t1.length; _$r < h; _$r++)if (i = t1[_$r] - t1[_$r - 1], 1 === _$r) n = i;
                    else if (Math.abs(i - n) > 1e-6) {
                        s = !1;
                        break;
                    }
                    this.nE = s ? FV : Zu;
                }
                return t1.prototype.sample = function(t1) {
                    return this.nE(this.ratios, t1);
                }, t1;
            }());
            A.RatioSampler = PV;
            var DV = t1("a5", function() {
                function t1(i, n) {
                    this.types = void 0, this.type = null, this.sE = [], this.rE = void 0, this.hE = void 0, this.Cr = void 0, this.hE = n, this.sE = i.values;
                    var s = function s(i) {
                        return "string" == typeof i ? i : Array.isArray(i) ? i[0] === i[1] && i[2] === i[3] ? t1.Linear : t1.Bezier(i) : t1.Linear;
                    };
                    if (void 0 !== i.easingMethod) this.type = s(i.easingMethod);
                    else if (Array.isArray(i.easingMethods)) this.types = i.easingMethods.map(s);
                    else if (void 0 !== i.easingMethods) {
                        this.types = Array(this.sE.length).fill(null);
                        for(var _$r = 0, h = Object.keys(i.easingMethods); _$r < h.length; _$r++){
                            var e = h[_$r];
                            this.types[e] = s(i.easingMethods[e]);
                        }
                    } else this.type = null;
                    var u = i.values[0];
                    (void 0 === i.interpolate || i.interpolate) && (this.rE = WV(u)), void 0 !== i._arrayLength && (this.Cr = Array(i._arrayLength));
                }
                t1.Bezier = function(t1) {
                    return t1;
                };
                var i = t1.prototype;
                return i.hasLerp = function() {
                    return !!this.rE;
                }, i.valueAt = function(t1) {
                    if (void 0 === this.Cr) {
                        var i = this.sE[t1];
                        return i && i.getNoLerp ? i.getNoLerp() : i;
                    }
                    for(var n = 0; n < this.Cr.length; ++n)this.Cr[n] = this.sE[this.Cr.length * t1 + n];
                    return this.Cr;
                }, i.valueBetween = function(t1, i, n, s, r) {
                    if (this.rE) {
                        var h = this.types ? this.types[i] : this.type, e = r - n, u = (t1 - n) / e;
                        if (h && (u = BV(u, h)), void 0 === this.Cr) {
                            var o = this.sE[i], f = this.sE[s];
                            return this.rE(o, f, u, e * this.hE);
                        }
                        for(var _$c = 0; _$c < this.Cr.length; ++_$c){
                            var a = this.sE[this.Cr.length * i + _$c], v = this.sE[this.Cr.length * s + _$c];
                            this.Cr[_$c] = this.rE(a, v, u, e * this.hE);
                        }
                        return this.Cr;
                    }
                    if (void 0 === this.Cr) return this.valueAt(i);
                    for(var l = 0; l < this.Cr.length; ++l)this.Cr[l] = this.sE[this.Cr.length * i + l];
                    return this.Cr;
                }, i.empty = function() {
                    return 0 === this.sE.length;
                }, i.constant = function() {
                    return 1 === this.sE.length;
                }, t1;
            }());
            function LV(t1, i, n) {
                var s = i.sample(n);
                if (s < 0) if ((s = ~s) <= 0) s = 0;
                else {
                    if (!(s >= i.ratios.length)) return t1.valueBetween(n, s - 1, i.ratios[s - 1], s, i.ratios[s]);
                    s = i.ratios.length - 1;
                }
                return t1.valueAt(s);
            }
            function BV(t1, i) {
                if ("string" == typeof i) {
                    var n = cc[i];
                    n ? t1 = n(t1) : rt(3906, i);
                } else Array.isArray(i) && (t1 = va(i, t1));
                return t1;
            }
            function FV(t1, i) {
                var n = t1.length - 1;
                if (0 === n) return 0;
                var s = t1[0];
                if (i < s) return 0;
                var _$r = t1[n];
                if (i > _$r) return n;
                var h = (i = (i - s) / (_$r - s)) / (1 / n), e = 0 | h;
                return h - e < 1e-6 ? e : e + 1 - h < 1e-6 ? e + 1 : ~(e + 1);
            }
            DV.Linear = null, A.AnimCurve = DV, t1("a6", function() {
                function t1() {
                    this.events = [];
                }
                return t1.prototype.add = function(t1, i) {
                    this.events.push({
                        func: t1 || "",
                        params: i || []
                    });
                }, t1;
            }()), A.sampleAnimationCurve = LV;
            var xV, jV, HV, VV, WV = function() {
                function t1(t1) {
                    var i = new t1;
                    return function(n, s, r) {
                        return t1.lerp(i, n, s, r), i;
                    };
                }
                function i(t1, i, n, s) {
                    return t1.lerp(i, n, s);
                }
                return function(n) {
                    if (null !== n) {
                        var s;
                        if ("number" == typeof n) return jn;
                        if ("object" == (void 0 === n ? "undefined" : _type_of(n)) && n.constructor) {
                            if (_instanceof(n, qs)) return s = new qs, function(t1, i, n) {
                                return qs.slerp(s, t1, i, n);
                            };
                            if (_instanceof(n, mi)) return t1(n.constructor);
                            if (n.constructor === Number) return jn;
                            if ("function" == typeof n.lerp) return i;
                        }
                    }
                };
            }(), zV = Symbol("BakeNodeCurves"), $V = function() {
                function t1() {}
                return t1.getOrExtract = function(i) {
                    var n = t1.Pp.get(i);
                    if (!n || n.samples !== i.sample) {
                        n && A.director.root.dataPoolManager.releaseAnimationClip(i);
                        var s = Math.ceil(i.sample * i.duration) + 1, _$r = i.sample;
                        n = i[zV](0, _$r, s), t1.Pp.set(i, n);
                    }
                    return n;
                }, t1.destroy = function(i) {
                    t1.Pp.delete(i);
                }, t1;
            }();
            $V.Pp = new Map;
            var XV = go(TG + "UntypedTrackChannel")((jV = ho((xV = function(t1) {
                function i() {
                    var _$i;
                    return (_$i = t1.call(this, new _c) || this).property = jV && jV(), _$i;
                }
                return h(i, t1), i;
            }(AH)).prototype, "property", [
                Ro
            ], function() {
                return "";
            }), xV)) || xV, qV = go(TG + "UntypedTrack")((VV = ho((HV = function(t1) {
                function i() {
                    for(var _$i, n = arguments.length, s = Array(n), _$r = 0; _$r < n; _$r++)s[_$r] = arguments[_$r];
                    return (_$i = t1.call.apply(t1, [
                        this
                    ].concat(s)) || this)._channels = VV && VV(), _$i;
                }
                h(i, t1);
                var n = i.prototype;
                return n.channels = function() {
                    return this._channels;
                }, n[SG] = function() {
                    throw Error("UntypedTrack should be handled specially. Please file an issue.");
                }, n.createLegacyEval = function(t1) {
                    var _$i = this, n = function n(t1) {
                        var n;
                        return null == (n = _$i._channels.find(function(i) {
                            return i.property === t1;
                        })) ? void 0 : n.curve;
                    };
                    switch(!0){
                        default:
                            throw Error(ot(3931));
                        case _instanceof(t1, Or):
                            return new mV(n("x"), n("y"));
                        case _instanceof(t1, Ss):
                            return new bV(n("x"), n("y"), n("z"));
                        case _instanceof(t1, Hr):
                            return new kV(n("x"), n("y"), n("z"), n("w"));
                        case _instanceof(t1, Yr):
                            return new OV(n("r"), n("g"), n("b"), n("a"));
                        case _instanceof(t1, Zr):
                            return new MV(n("width"), n("height"));
                    }
                }, n.addChannel = function(t1) {
                    var _$i = new XV;
                    return _$i.property = t1, this._channels.push(_$i), _$i;
                }, n.upgrade = function(t1) {
                    var _$i = this, n = function n(t1, n) {
                        var s = _$i.channels().find(function(i) {
                            return i.property === t1;
                        });
                        s && (n.name = s.name, n.curve.assignSorted(Array.from(s.curve.times()), Array.from(s.curve.values())));
                    }, s = t1(this.path, this.proxy);
                    switch(s){
                        default:
                        case "size":
                            break;
                        case "vec2":
                        case "vec3":
                        case "vec4":
                            var _$r = new _V;
                            _$r.path = this.path, _$r.proxy = this.proxy, _$r.componentsCount = "vec2" === s ? 2 : "vec3" === s ? 3 : 4;
                            var _$h = _$r.channels(), e = _$h[0], u = _$h[1], o = _$h[2], f = _$h[3];
                            switch(s){
                                case "vec4":
                                    n("w", f);
                                case "vec3":
                                    n("z", o);
                                default:
                                    n("x", e), n("y", u);
                            }
                            return _$r;
                        case "color":
                            var _$c = new SV, a = _$c.channels(), v = a[0], l = a[1], _$d = a[2], w = a[3];
                            return n("r", v), n("g", l), n("b", _$d), n("a", w), n("x", v), n("y", l), n("z", _$d), n("w", w), _$c;
                    }
                    return null;
                }, i;
            }(kH)).prototype, "_channels", [
                Ro
            ], function() {
                return [];
            }), HV)) || HV, YV = function() {
                function t1(t1) {
                    this.eE = [], this.ZA = [], this.uE = [], this.oE = [], this.fE = void 0, this.L = null, this.hE = void 0, this.hE = t1;
                }
                var i = t1.prototype;
                return i.getPropertyCurves = function() {
                    return this.fE || this._createPropertyCurves(), this.fE;
                }, i.toTracks = function() {
                    for(var _$t, i = [], n = this.keys, _$s = this.curves, _$r = this.commonTargets, h = function h(t1, i, n) {
                        for(var _$s, _$r = new mH, h = d(i); !(_$s = h()).done;){
                            var e = _$s.value;
                            "string" == typeof e ? _$r.toProperty(e) : "number" == typeof e ? _$r.toElement(e) : _instanceof(e, wH) ? _$r.toHierarchy(e.path) : _instanceof(e, gH) ? _$r.toComponent(e.component) : _$r.toCustomized(e);
                        }
                        t1.path = _$r, t1.proxy = n;
                    }, e = _$r.map(function(t1) {
                        var n = new qV;
                        return h(n, t1.modifiers, t1.valueAdapter), i.push(n), n;
                    }), o = d(_$s); !(_$t = o()).done;)!function u() {
                        var _$s, _$r = _$t.value, u = _$r.data, o = u.values;
                        if (0 !== o.length) {
                            var f = u.keys < 0 ? [
                                0
                            ] : n[u.keys], _$c = o[0], a = null == (_$s = u.interpolate) || _$s;
                            u._arrayLength;
                            var v, l = new JV(u, f.length), _$d = function d(t1) {
                                h(t1, _$r.modifiers, _$r.valueAdapter);
                            };
                            if ("number" == typeof _$r.commonTarget) {
                                if (!o.every(function(t1) {
                                    return "number" == typeof t1;
                                })) return nt(3932);
                                if (_$r.valueAdapter || 1 !== _$r.modifiers.length || "string" != typeof _$r.modifiers[0]) return nt(3933);
                                var w = _$r.modifiers[0];
                                v = e[_$r.commonTarget].addChannel(w).curve;
                            }
                            !function() {
                                if ("number" == typeof _$c) {
                                    if (!o.every(function(t1) {
                                        return "number" == typeof t1;
                                    })) return nt(3934);
                                    if (v) _$t = v;
                                    else {
                                        var _$t, n = new oV;
                                        _$d(n), i.push(n), _$t = n.channel.curve;
                                    }
                                    var _$s = +!a;
                                    return _$t.assignSorted(f, o.map(function(t1) {
                                        return {
                                            value: t1,
                                            interpolationMode: _$s
                                        };
                                    })), l.convert(_$t);
                                }
                                if ("object" == (void 0 === _$c ? "undefined" : _type_of(_$c))) switch(!0){
                                    default:
                                        break;
                                    case KV(o, Or):
                                    case KV(o, Ss):
                                    case KV(o, Hr):
                                        var _$r = _instanceof(_$c, Or) ? 2 : _instanceof(_$c, Ss) ? 3 : 4, h = new _V;
                                        _$d(h), h.componentsCount = _$r;
                                        var e = h.channels(), u = e[0].curve, w = e[1].curve, g = e[2].curve, p = e[3].curve, _$y = +!a, _$_ = function _(t1) {
                                            return {
                                                value: t1,
                                                interpolationMode: _$y
                                            };
                                        };
                                        switch(_$r){
                                            case 4:
                                                p.assignSorted(f, o.map(function(t1) {
                                                    return _$_(t1.w);
                                                })), l.convert(p);
                                            case 3:
                                                g.assignSorted(f, o.map(function(t1) {
                                                    return _$_(t1.z);
                                                })), l.convert(g);
                                            default:
                                                u.assignSorted(f, o.map(function(t1) {
                                                    return _$_(t1.x);
                                                })), l.convert(u), w.assignSorted(f, o.map(function(t1) {
                                                    return _$_(t1.y);
                                                })), l.convert(w);
                                        }
                                        return i.push(h);
                                    case KV(o, qs):
                                        var m = new AV;
                                        _$d(m);
                                        var b = +!a;
                                        return m.channel.curve.assignSorted(f, o.map(function(t1) {
                                            return {
                                                value: qs.clone(t1),
                                                interpolationMode: b
                                            };
                                        })), l.convertQuatCurve(m.channel.curve), i.push(m);
                                    case KV(o, Yr):
                                        var k = new SV;
                                        _$d(k);
                                        var A = k.channels(), E = A[0].curve, T = A[1].curve, S = A[2].curve, _$O = A[3].curve, _$I = +!a, _$R = function R(t1) {
                                            return {
                                                value: t1,
                                                interpolationMode: _$I
                                            };
                                        };
                                        return E.assignSorted(f, o.map(function(t1) {
                                            return _$R(t1.r);
                                        })), l.convert(E), T.assignSorted(f, o.map(function(t1) {
                                            return _$R(t1.g);
                                        })), l.convert(T), S.assignSorted(f, o.map(function(t1) {
                                            return _$R(t1.b);
                                        })), l.convert(S), _$O.assignSorted(f, o.map(function(t1) {
                                            return _$R(t1.a);
                                        })), l.convert(_$O), i.push(k);
                                    case KV(o, Zr):
                                        var _$M = new RV;
                                        _$d(_$M);
                                        var _$C = _$M.channels(), N = _$C[0].curve, P = _$C[1].curve, D = +!a, L = function L(t1) {
                                            return {
                                                value: t1,
                                                interpolationMode: D
                                            };
                                        };
                                        return N.assignSorted(f, o.map(function(t1) {
                                            return L(t1.width);
                                        })), l.convert(N), P.assignSorted(f, o.map(function(t1) {
                                            return L(t1.height);
                                        })), l.convert(P), i.push(_$M);
                                    case KV(o, uV):
                                        l.nil;
                                        var B = new oV;
                                        _$d(B);
                                        var F = a ? 2 : 1;
                                        return B.channel.curve.assignSorted(f, o.map(function(t1) {
                                            return {
                                                value: t1.dataPoint,
                                                leftTangent: t1.inTangent,
                                                rightTangent: t1.outTangent,
                                                interpolationMode: F
                                            };
                                        })), i.push(B);
                                    case KV(o, sV):
                                    case KV(o, rV):
                                    case KV(o, hV):
                                        l.nil;
                                        var U = _instanceof(_$c, sV) ? 2 : _instanceof(_$c, rV) ? 3 : 4, x = new _V;
                                        _$d(x), x.componentsCount = U;
                                        var j = x.channels(), G = j[0], H = j[1], _$V = j[2], _$W = j[3], _$z = +!a, _$$ = function $(t1, i, n) {
                                            return {
                                                value: t1,
                                                leftTangent: i,
                                                rightTangent: n,
                                                interpolationMode: _$z
                                            };
                                        };
                                        switch(U){
                                            case 4:
                                                _$W.curve.assignSorted(f, o.map(function(t1) {
                                                    return _$$(t1.dataPoint.w, t1.inTangent.w, t1.outTangent.w);
                                                }));
                                            case 3:
                                                _$V.curve.assignSorted(f, o.map(function(t1) {
                                                    return _$$(t1.dataPoint.z, t1.inTangent.z, t1.outTangent.z);
                                                }));
                                            default:
                                                G.curve.assignSorted(f, o.map(function(t1) {
                                                    return _$$(t1.dataPoint.y, t1.inTangent.y, t1.outTangent.y);
                                                })), H.curve.assignSorted(f, o.map(function(t1) {
                                                    return _$$(t1.dataPoint.x, t1.inTangent.x, t1.outTangent.x);
                                                }));
                                        }
                                        return i.push(x);
                                    case o.every(function(t1) {
                                        return _instanceof(t1, eV);
                                    }):
                                        nt(3935);
                                }
                                var _$X = new CV;
                                _$d(_$X), _$X.channel.curve.assignSorted(f, o), i.push(_$X);
                            }();
                        }
                    }();
                    return i;
                }, i._createPropertyCurves = function() {
                    var _$t = this;
                    this.oE = this.eE.map(function(i) {
                        return new PV(i.map(function(i) {
                            return i / _$t.hE;
                        }));
                    }), this.fE = this.ZA.map(function(i) {
                        return {
                            curve: new DV(i.data, _$t.hE),
                            modifiers: i.modifiers,
                            valueAdapter: i.valueAdapter,
                            sampler: _$t.oE[i.data.keys],
                            commonTarget: i.commonTarget
                        };
                    });
                }, s(t1, [
                    {
                        key: "keys",
                        get: function get() {
                            return this.eE;
                        },
                        set: function set(t1) {
                            this.eE = t1;
                        }
                    },
                    {
                        key: "curves",
                        get: function get() {
                            return this.ZA;
                        },
                        set: function set(t1) {
                            this.ZA = t1, delete this.fE;
                        }
                    },
                    {
                        key: "commonTargets",
                        get: function get() {
                            return this.uE;
                        },
                        set: function set(t1) {
                            this.uE = t1;
                        }
                    },
                    {
                        key: "data",
                        get: function get() {
                            return this.L;
                        }
                    }
                ]), t1;
            }();
            function KV(t1, i) {
                return t1.every(function(t1) {
                    return _instanceof(t1, i);
                });
            }
            var JV = function() {
                function t1(t1, i) {
                    this.cE = void 0;
                    var n = t1.easingMethods;
                    Array.isArray(n) ? 0 === n.length && 0 !== i ? this.cE = Array(i).fill(null) : this.cE = n : this.cE = void 0 === n ? Array(i).fill(t1.easingMethod) : Array.from({
                        length: i
                    }, function(t1, i) {
                        var _$s;
                        return null != (_$s = n[i]) ? _$s : null;
                    });
                }
                var i = t1.prototype;
                return i.convert = function(t1) {
                    var i, _$s, _$r, h, e, u, o, f, _$c, a, v, l, _$d, w, g, p, _$y, _$_, m, b, k, A = this.cE;
                    if (A) {
                        var E = t1.keyFramesCount;
                        if (!(t1.keyFramesCount < 2)) {
                            Array.isArray(A) && A.length;
                            for(var T = E - 1, S = 0; S < T; ++S){
                                var _$O = A[S];
                                _$O && (Array.isArray(_$O) ? (_$s = t1.getKeyframeTime(S), _$r = t1.getKeyframeValue(S), h = t1.getKeyframeTime(S + 1), e = t1.getKeyframeValue(S + 1), u = void 0, o = void 0, f = void 0, _$c = void 0, a = void 0, v = void 0, l = void 0, _$d = void 0, w = void 0, g = void 0, p = void 0, _$y = void 0, _$_ = void 0, m = void 0, b = void 0, k = void 0, u = _$O[0], o = _$O[1], f = _$O[2], _$c = _$O[3], a = _$r.value, v = 3 * (h - _$s), l = 3 * (e.value - a), g = (1 - f) * v, p = (1 - _$c) * l, _$y = 1 / 3, _$_ = (w = o * l) / (_$d = u * v), m = Math.sqrt(_$d * _$d + w * w) * _$y, b = p / g, k = Math.sqrt(g * g + p * p) * _$y, _$r.interpolationMode = 2, _$r.tangentWeightMode = 0 === (i = _$r.tangentWeightMode) ? 2 : 1 === i ? 3 : i, _$r.rightTangent = _$_, _$r.rightTangentWeight = m, e.tangentWeightMode = TW(e.tangentWeightMode), e.leftTangent = b, e.leftTangentWeight = k) : QV(_$O, t1, S));
                            }
                        }
                    }
                }, i.convertQuatCurve = function(t1) {
                    var i = this.cE;
                    if (i) {
                        var n = t1.keyFramesCount;
                        if (!(t1.keyFramesCount < 2)) {
                            Array.isArray(i) && i.length;
                            for(var _$s = n - 1, _$r = 0; _$r < _$s; ++_$r){
                                var h = i[_$r];
                                h && (Array.isArray(h) ? t1.getKeyframeValue(_$r).easingMethod = h.slice() : ZV(h, t1, _$r));
                            }
                        }
                    }
                }, s(t1, [
                    {
                        key: "nil",
                        get: function get() {
                            return !this.cE || this.cE.every(function(t1) {
                                return null == t1;
                            });
                        }
                    }
                ]), t1;
            }();
            function QV(t1, i, n) {
                i.keyFramesCount;
                var s = i.getKeyframeValue(n), _$r = EW[t1];
                1 === _$r ? s.interpolationMode = 1 : (s.interpolationMode = 0, s.easingMethod = _$r);
            }
            function ZV(t1, i, n) {
                i.keyFramesCount, i.getKeyframeValue(n).easingMethod = EW[t1];
            }
            var tW, iW, sW, rW, hW, eW, uW, fW, cW, aW, vW, lW, wW, gW, pW, _W, mW, bW, kW, AW, EW = {
                constant: 1,
                linear: 0,
                quadIn: 2,
                quadOut: 3,
                quadInOut: 4,
                quadOutIn: 5,
                cubicIn: 6,
                cubicOut: 7,
                cubicInOut: 8,
                cubicOutIn: 9,
                quartIn: 10,
                quartOut: 11,
                quartInOut: 12,
                quartOutIn: 13,
                quintIn: 14,
                quintOut: 15,
                quintInOut: 16,
                quintOutIn: 17,
                sineIn: 18,
                sineOut: 19,
                sineInOut: 20,
                sineOutIn: 21,
                expoIn: 22,
                expoOut: 23,
                expoInOut: 24,
                expoOutIn: 25,
                circIn: 26,
                circOut: 27,
                circInOut: 28,
                circOutIn: 29,
                elasticIn: 30,
                elasticOut: 31,
                elasticInOut: 32,
                elasticOutIn: 33,
                backIn: 34,
                backOut: 35,
                backInOut: 36,
                backOutIn: 37,
                bounceIn: 38,
                bounceOut: 39,
                bounceInOut: 40,
                bounceOutIn: 41,
                smooth: 42,
                fade: 43
            };
            function TW(t1) {
                return 0 === t1 ? 1 : 2 === t1 ? 3 : t1;
            }
            function IW() {
                throw Error("split() only valid in Editor.");
            }
            go(TG + "ExoticAnimation")((iW = ho((tW = function() {
                function t1() {
                    this._nodeAnimations = iW && iW();
                }
                var i = t1.prototype;
                return i.createEvaluator = function(t1) {
                    return new FW(this._nodeAnimations, t1);
                }, i.createEvaluatorForAnimationGraph = function(t1) {
                    return new jW(this._nodeAnimations, t1);
                }, i.addNodeAnimation = function(t1) {
                    var i = new RW(t1);
                    return this._nodeAnimations.push(i), i;
                }, i.collectAnimatedJoints = function() {
                    return Array.from(new Set(this._nodeAnimations.map(function(t1) {
                        return t1.path;
                    })));
                }, i.split = function() {
                    return IW();
                }, i.toHashString = function() {
                    return this._nodeAnimations.map(function(t1) {
                        return t1.toHashString();
                    }).join("\n");
                }, t1;
            }()).prototype, "_nodeAnimations", [
                Ro
            ], function() {
                return [];
            }), tW));
            var RW = go(TG + "ExoticNodeAnimation")((rW = ho((sW = function() {
                function t1(t1) {
                    this._path = rW && rW(), this._position = hW && hW(), this._rotation = eW && eW(), this._scale = uW && uW(), this._path = t1;
                }
                var i = t1.prototype;
                return i.createPosition = function(t1, i) {
                    this._position = new LW(t1, new PW(i));
                }, i.createRotation = function(t1, i) {
                    this._rotation = new LW(t1, new DW(i));
                }, i.createScale = function(t1, i) {
                    this._scale = new LW(t1, new PW(i));
                }, i.createEvaluator = function(t1) {
                    return new UW(this._path, this._position, this._rotation, this._scale, t1);
                }, i.createEvaluatorForAnimationGraph = function(t1) {
                    var i = t1.bindTransform(this._path);
                    return i ? new GW(i, this._position, this._rotation, this._scale) : null;
                }, i.split = function() {
                    return IW();
                }, i.toHashString = function() {
                    var _$t, i, n, _$s, _$r, h;
                    return this._path + "\n" + (null != (_$t = null == (i = this._position) ? void 0 : i.toHashString()) ? _$t : "") + (null != (n = null == (_$s = this._scale) ? void 0 : _$s.toHashString()) ? n : "") + (null != (_$r = null == (h = this._rotation) ? void 0 : h.toHashString()) ? _$r : "");
                }, s(t1, [
                    {
                        key: "path",
                        get: function get() {
                            return this._path;
                        }
                    }
                ]), t1;
            }()).prototype, "_path", [
                Ro
            ], function() {
                return "";
            }), hW = ho(sW.prototype, "_position", [
                Ro
            ], function() {
                return null;
            }), eW = ho(sW.prototype, "_rotation", [
                Ro
            ], function() {
                return null;
            }), uW = ho(sW.prototype, "_scale", [
                Ro
            ], function() {
                return null;
            }), sW)) || sW;
            function MW(t1) {
                return t1.toPrecision(2);
            }
            function CW(t1) {
                return t1.map(function(t1) {
                    return Number.parseFloat(MW(t1));
                }).join(" ");
            }
            var NW = go(TG + "ExoticVectorLikeTrackValues")((cW = ho((fW = function() {
                function t1(t1) {
                    this._values = cW && cW(), this._isQuantized = aW && aW(), this._values = t1;
                }
                var i = t1.prototype;
                return i.quantize = function(t1) {
                    this._isQuantized, this._values = KW(this._values, t1), this._isQuantized = !0;
                }, i.toHashString = function() {
                    var _$t = this._isQuantized, i = this._values;
                    return _$t + " " + (_$t ? i.toHashString() : CW(i));
                }, s(t1, [
                    {
                        key: "precision",
                        get: function get() {
                            return this._isQuantized ? this._values.originalPrecision : WW(this._values);
                        }
                    }
                ]), t1;
            }()).prototype, "_values", [
                Ro
            ], null), aW = ho(fW.prototype, "_isQuantized", [
                Ro
            ], function() {
                return !1;
            }), fW)) || fW, PW = go(TG + "ExoticVec3TrackValues")(vW = function(t1) {
                function i() {
                    return t1.apply(this, arguments) || this;
                }
                h(i, t1), i.imitate = function(t1, n) {
                    var s = new i(t1);
                    return n._isQuantized && s.quantize(n._values.quantizationType), s;
                };
                var n = i.prototype;
                return n.get = function(t1, i) {
                    var n = this._values;
                    this._isQuantized ? ZW(n, t1, i) : Ss.fromArray(i, n, 3 * t1);
                }, n.lerp = function(t1, i, n, s, r, h) {
                    var e = this._values;
                    this._isQuantized ? (ZW(e, t1, s), ZW(e, i, r)) : (Ss.fromArray(s, e, 3 * t1), Ss.fromArray(r, e, 3 * i)), Ss.lerp(h, s, r, n);
                }, i;
            }(NW)) || vW, DW = go(TG + "ExoticQuatTrackValues")(lW = function(t1) {
                function i() {
                    return t1.apply(this, arguments) || this;
                }
                h(i, t1), i.imitate = function(t1, n) {
                    var s = new i(t1);
                    return n._isQuantized && s.quantize(n._values.quantizationType), s;
                };
                var n = i.prototype;
                return n.get = function(t1, i) {
                    var n = this._values;
                    this._isQuantized ? tz(n, t1, i) : qs.fromArray(i, n, 4 * t1);
                }, n.lerp = function(t1, i, n, s, r, h) {
                    var e = this._values;
                    this._isQuantized ? (tz(e, t1, s), tz(e, i, r)) : (qs.fromArray(s, e, 4 * t1), qs.fromArray(r, e, 4 * i)), qs.slerp(h, s, r, n);
                }, i;
            }(NW)) || lW, LW = go(TG + "ExoticTrack")((gW = ho((wW = function() {
                function t1(t1, i) {
                    this.times = gW && gW(), this.values = pW && pW(), this.times = t1, this.values = i;
                }
                return t1.prototype.toHashString = function() {
                    var _$t = this.times, i = this.values;
                    return "times: " + CW(_$t) + "; values: " + i.toHashString();
                }, t1;
            }()).prototype, "times", [
                Ro
            ], null), pW = ho(wW.prototype, "values", [
                Ro
            ], null), wW)) || wW;
            function BW(t1, i) {
                t1.length, t1.length;
                var n = 0, s = 0, _$r = Zu(t1, i);
                if (_$r >= 0) n = _$r;
                else {
                    var h = ~_$r, e = h - 1;
                    n = e;
                    var u = t1[h], o = t1[e];
                    s = (i - o) / (u - o);
                }
                return {
                    index: n,
                    ratio: s
                };
            }
            function t116() {
                this.vE();
            }
            var i12 = t116.prototype;
            i12.calculate = function(t1, i, n) {
                if (this.vE(), !(i > n)) {
                    var _$s = t1.length;
                    if (_$s) {
                        var _$r = t1[0], h = t1[_$s - 1], e = 0, u = 0;
                        if (i < _$r) ;
                        else if (i >= h) e = _$s - 1, u = 0;
                        else {
                            var o = BW(t1, i);
                            e = o.index, u = o.ratio;
                        }
                        var f = 0, _$c = 0;
                        if (n < _$r) ;
                        else if (n >= h) f = _$s - 1, _$c = 0;
                        else {
                            var a = BW(t1, n);
                            f = a.index, _$c = a.ratio;
                        }
                        var v = !u, l = !_$c;
                        e !== f || u !== _$c ? (v || (this.preLerpIndex = e, this.preLerpRatio = u), this.directKeyframesBegin = v ? e : e + 1, this.directKeyframesEnd = f + 1, l || (this.postLerpIndex = f, this.postLerpRatio = _$c)) : v ? (this.directKeyframesBegin = e, this.directKeyframesEnd = e + 1) : (this.preLerpIndex = e, this.preLerpRatio = u);
                    }
                }
            }, i12.vE = function() {
                this.preLerpIndex = -1, this.preLerpRatio = 0, this.directKeyframesBegin = 0, this.directKeyframesEnd = 0, this.postLerpIndex = -1, this.postLerpRatio = 0;
            }, s(t116, [
                {
                    key: "keyframesCount",
                    get: function get() {
                        var _$t = this.preLerpIndex, i = this.directKeyframesBegin;
                        return 0 + (_$t < 0 ? 0 : 1) + (this.directKeyframesEnd - i) + (this.postLerpIndex < 0 ? 0 : 1);
                    }
                }
            ]);
            var FW = function() {
                function t1(t1, i) {
                    this.lE = void 0, this.lE = t1.map(function(t1) {
                        return t1.createEvaluator(i);
                    });
                }
                return t1.prototype.evaluate = function(t1) {
                    this.lE.forEach(function(i) {
                        i.evaluate(t1);
                    });
                }, t1;
            }(), UW = function() {
                function t1(t1, i, n, s, r) {
                    this.Pa = null, this.dE = null, this.kv = null, i && (this.Pa = QW(i.times, i.values, Ss, t1, "position", r)), n && (this.dE = QW(n.times, n.values, qs, t1, "rotation", r)), s && (this.kv = QW(s.times, s.values, Ss, t1, "scale", r));
                }
                return t1.prototype.evaluate = function(t1) {
                    if (this.Pa) {
                        var i = this.Pa.evaluator.evaluate(t1);
                        this.Pa.runtimeBinding.setValue(i);
                    }
                    if (this.dE) {
                        var n = this.dE.evaluator.evaluate(t1);
                        this.dE.runtimeBinding.setValue(n);
                    }
                    if (this.kv) {
                        var s = this.kv.evaluator.evaluate(t1);
                        this.kv.runtimeBinding.setValue(s);
                    }
                }, t1;
            }(), xW = function() {
                function t1(t1, i, n) {
                    this.wE = void 0, this.gE = {
                        just: !1,
                        index: -1,
                        nextIndex: -1,
                        ratio: 0
                    }, this.sE = void 0, this.pE = void 0, this.yE = void 0, this._E = void 0, this.wE = t1, this.sE = i, this.pE = new n, this.yE = new n, this._E = new n;
                }
                return t1.prototype.evaluate = function(t1) {
                    var i = this.wE, n = this.sE, s = this._E;
                    if (0 === i.length) return s;
                    var _$r = HW(i, t1, this.gE);
                    return _$r.just ? n.get(_$r.index, s) : n.lerp(_$r.index, _$r.nextIndex, _$r.ratio, this.pE, this.yE, s), s;
                }, t1;
            }(), jW = function() {
                function t1(t1, i) {
                    this.lE = void 0, this.lE = t1.map(function(t1) {
                        return t1.createEvaluatorForAnimationGraph(i);
                    }).filter(function(t1) {
                        return !!t1;
                    });
                }
                var i = t1.prototype;
                return i.destroy = function() {
                    for(var _$t = this.lE, i = _$t.length, n = 0; n < i; ++n)_$t[n].destroy();
                }, i.evaluate = function(t1, i) {
                    for(var n = this.lE, s = n.length, _$r = 0; _$r < s; ++_$r)n[_$r].evaluate(t1, i);
                }, t1;
            }(), GW = function() {
                function t1(t1, i, n, s) {
                    this.Pa = null, this.dE = null, this.kv = null, this.mE = void 0, this.mE = t1, i && (this.Pa = new xW(i.times, i.values, Ss)), n && (this.dE = new xW(n.times, n.values, qs)), s && (this.kv = new xW(s.times, s.values, Ss));
                }
                var i = t1.prototype;
                return i.destroy = function() {
                    this.mE.destroy();
                }, i.evaluate = function(t1, i) {
                    var n = this.mE.index, s = this.Pa, _$r = this.dE, h = this.kv, e = i.transforms;
                    if (s) {
                        var u = s.evaluate(t1);
                        e.setPosition(n, u);
                    }
                    if (_$r) {
                        var o = _$r.evaluate(t1);
                        e.setRotation(n, o);
                    }
                    if (h) {
                        var f = h.evaluate(t1);
                        e.setScale(n, f);
                    }
                }, t1;
            }();
            function HW(t1, i, n) {
                var s = t1.length, _$r = t1[0], h = t1[s - 1];
                if (i < _$r) n.just = !0, n.index = 0;
                else if (i > h) n.just = !0, n.index = s - 1;
                else {
                    var e = Zu(t1, i);
                    if (e >= 0) n.just = !0, n.index = e;
                    else {
                        var u = ~e, o = u - 1, f = t1[o], _$c = t1[u], a = (i - t1[o]) / (_$c - f);
                        n.just = !1, n.index = o, n.nextIndex = u, n.ratio = a;
                    }
                }
                return n;
            }
            var VW = {
                uint8: Uint8Array,
                uint16: Uint16Array
            };
            function WW(t1) {
                switch(t1.BYTES_PER_ELEMENT){
                    default:
                    case 4:
                        return 0;
                    case 8:
                        return 1;
                }
            }
            var $W, XW, qW, YW = go(TG + "QuantizedFloatArray")((mW = ho((_W = function() {
                function t1(t1, i, n, s) {
                    void 0 === s && (s = 0), this.originalPrecision = mW && mW(), this.min = bW && bW(), this.extent = kW && kW(), this.values = AW && AW(), this.originalPrecision = t1, this.values = i, this.extent = n, this.min = s;
                }
                return t1.prototype.toHashString = function() {
                    var _$t = this.originalPrecision, i = this.min, n = this.extent, _$s = this.values;
                    return _$t + " " + MW(i) + " " + MW(n) + " " + _$s.join(" ");
                }, s(t1, [
                    {
                        key: "quantizationType",
                        get: function get() {
                            switch(this.values.BYTES_PER_ELEMENT){
                                default:
                                case 1:
                                    return "uint8";
                                case 2:
                                    return "uint16";
                            }
                        }
                    }
                ]), t1;
            }()).prototype, "originalPrecision", [
                Ro
            ], null), bW = ho(_W.prototype, "min", [
                Ro
            ], null), kW = ho(_W.prototype, "extent", [
                Ro
            ], null), AW = ho(_W.prototype, "values", [
                Ro
            ], null), _W)) || _W;
            function KW(t1, i) {
                var n = VW[i], s = 1 << n.BYTES_PER_ELEMENT, _$r = 1 / 0, h = -1 / 0;
                t1.forEach(function(t1) {
                    _$r = Math.min(t1, _$r), h = Math.max(t1, h);
                });
                var e = h - _$r, u = n.from(t1, function(t1) {
                    return (t1 - _$r) / e * s;
                });
                return new YW(WW(t1), u, e, _$r);
            }
            function JW(t1, i) {
                return t1.values[i] / (1 << t1.values.BYTES_PER_ELEMENT) * t1.extent + t1.min;
            }
            function QW(t1, i, n, s, r, h) {
                var e = new bH;
                e.path = (new mH).toHierarchy(s).toProperty(r);
                var u = h(e);
                return u ? {
                    runtimeBinding: u,
                    evaluator: new xW(t1, i, n)
                } : null;
            }
            function ZW(t1, i, n) {
                Ss.set(n, JW(t1, 3 * i + 0), JW(t1, 3 * i + 1), JW(t1, 3 * i + 2));
            }
            function tz(t1, i, n) {
                qs.set(n, JW(t1, 4 * i + 0), JW(t1, 4 * i + 1), JW(t1, 4 * i + 2), JW(t1, 4 * i + 3));
            }
            var sz, rz, hz, ez, uz, oz, fz, cz, az, vz, lz, dz, wz, pz, yz, _z, mz = go(TG + "AuxiliaryCurveEntry")((XW = ho(($W = function $W() {
                this.name = XW && XW(), this.curve = qW && qW();
            }).prototype, "name", [
                Ro
            ], function() {
                return "";
            }), qW = ho($W.prototype, "curve", [
                Ro
            ], function() {
                return new _c;
            }), $W)) || $W;
            function bz(t1, i, n) {
                for(var s = t1.components, _$r = s.length, h = 0; h < _$r; ++h){
                    var e = s[h], u = e[i];
                    "function" == typeof u && u.apply(e, n);
                }
            }
            var kz = Symbol("SearchForRootBonePath"), Az = Symbol("ExoticAnimation"), Ez = Symbol("[[EmbeddedPlayerCount]]"), Tz = Symbol("[[GetEmbeddedPlayers]]"), Sz = Symbol("[[AddEmbeddedPlayer]]"), Oz = Symbol("[[RemoveEmbeddedPlayer]]"), Iz = Symbol("[[ClearEmbeddedPlayers]]"), Rz = Symbol("[[Additive Settings]]"), Mz = t1("a1", go("cc.AnimationClip")(((wz = function(t1) {
                function i(i) {
                    var n;
                    return (n = t1.call(this, i) || this).sample = sz && sz(), n.speed = rz && rz(), n.wrapMode = hz && hz(), n.enableTrsBlending = ez && ez(), n._duration = uz && uz(), n._hash = oz && oz(), n.bE = 0, n._tracks = fz && fz(), n._exoticAnimation = cz && cz(), n.kE = void 0, n.AE = !1, n._events = az && az(), n._embeddedPlayers = vz && vz(), n._additiveSettings = lz && lz(), n._auxiliaryCurveEntries = dz && dz(), n.EE = {
                        ratios: [],
                        eventGroups: []
                    }, n;
                }
                h(i, t1), i.createWithSpriteFrames = function(t1, n) {
                    var _$s = new i;
                    _$s.sample = n || _$s.sample, _$s.duration = t1.length / _$s.sample;
                    var _$r = 1 / _$s.sample, _$h = new CV;
                    return _$h.path = (new mH).toComponent("cc.Sprite").toProperty("spriteFrame"), _$h.channels()[0].curve.assignSorted(t1.map(function(t1, i) {
                        return [
                            _$r * i,
                            t1
                        ];
                    })), _$s.addTrack(_$h), _$s;
                };
                var n = i.prototype;
                return n.onLoaded = function() {
                    this.bE = this.sample, this.events = this._events;
                }, n.range = function() {
                    for(var _$t = {
                        min: 1 / 0,
                        max: -1 / 0
                    }, _$i = this._tracks, n = _$i.length, _$s = 0; _$s < n; ++_$s){
                        var _$r = _$i[_$s].range();
                        _$t.min = Math.min(_$t.min, _$r.min), _$t.max = Math.max(_$t.max, _$r.max);
                    }
                    return _$t;
                }, n.getTrack = function(t1) {
                    return this._tracks[t1];
                }, n.addTrack = function(t1) {
                    var _$i = this._tracks.length;
                    return this._tracks.push(t1), _$i;
                }, n.removeTrack = function(t1) {
                    this._tracks.splice(t1, 1);
                }, n.clearTracks = function() {
                    this._tracks.length = 0;
                }, n.containsAnyEvent = function() {
                    return 0 !== this._events.length;
                }, n.createEventEvaluator = function(t1) {
                    return new Gz(t1, this.EE.ratios, this.EE.eventGroups, this.wrapMode);
                }, n.containsAnyEmbeddedPlayer = function() {
                    return 0 !== this._embeddedPlayers.length;
                }, n.createEmbeddedPlayerEvaluator = function(t1) {
                    return new Pz(this._embeddedPlayers, t1);
                }, n.createEvaluator = function(t1) {
                    var _$i = this, n = t1.target;
                    return this.TE(n, function(s) {
                        if (!t1.mask || !s.isMaskedOff(t1.mask)) {
                            var _$r = s.createRuntimeBinding(n, _$i.enableTrsBlending ? t1.pose : void 0, !1);
                            return null != _$r ? _$r : void 0;
                        }
                    }, t1.rootMotion);
                }, n.destroy = function() {
                    var _$i, n = null == (_$i = A.director.root) ? void 0 : _$i.dataPoolManager;
                    return n && n.releaseAnimationClip(this), $V.destroy(this), t1.prototype.destroy.call(this);
                }, n[zV] = function(t1, i, n) {
                    for(var _$s = 1 / i, _$r = this.SE(), _$h = _$r.length, e = {}, u = 0; u < _$h; ++u)e[_$r[u]] = {
                        transforms: Array.from({
                            length: n
                        }, function() {
                            return new cr;
                        })
                    };
                    var o = _$r.reduce(function(t1, i) {
                        return t1[i] = new Bz, t1;
                    }, {});
                    for(var f in o){
                        var _$c = o[f], a = f.lastIndexOf("/");
                        if (a >= 0) {
                            var l = o[f.substring(0, a)];
                            l && (_$c.parent = l);
                        }
                    }
                    for(var _$d = this.TE(void 0, function(t1) {
                        var _$i = t1.parseTrsPath();
                        if (_$i) {
                            var _$n = o[_$i.node];
                            if (_$n) return jz(_$n, _$i.property);
                        }
                    }, void 0), w = 0; w < n; ++w){
                        var g = t1 + _$s * w;
                        _$d.evaluate(g);
                        for(var p = 0; p < _$h; ++p){
                            var _$y = _$r[p];
                            cr.copy(e[_$y].transforms[w], o[_$y].globalTransform);
                        }
                        for(var _$_ = 0; _$_ < _$h; ++_$_)o[_$r[_$_]].invalidate();
                    }
                    return {
                        samples: i,
                        frames: n,
                        joints: e
                    };
                }, n.upgradeUntypedTracks = function(t1) {
                    for(var _$i = [], n = [], _$s = this._tracks, _$r = _$s.length, _$h = 0; _$h < _$r; ++_$h){
                        var e = _$s[_$h];
                        if (_instanceof(e, qV)) {
                            var u = e.upgrade(t1);
                            u && (_$i.push(u), n.push(e));
                        }
                    }
                    for(var o = n.length, f = 0; f < o; ++f)hi(_$s, n[f]);
                    _$s.push.apply(_$s, _$i);
                }, n[kz] = function() {
                    return this.OE();
                }, n.getPropertyCurves = function() {
                    return this.RE().getPropertyCurves();
                }, n.updateEventDatas = function() {
                    this.events = this._events;
                }, n.hasEvents = function() {
                    return 0 !== this.events.length;
                }, n.syncLegacyData = function() {
                    this.kE && (this.ME(this.kE), this.kE = void 0);
                }, n[Tz] = function() {
                    return this._embeddedPlayers;
                }, n[Sz] = function(t1) {
                    this._embeddedPlayers.push(t1);
                }, n[Oz] = function(t1) {
                    var _$i = this._embeddedPlayers.indexOf(t1);
                    _$i >= 0 && this._embeddedPlayers.splice(_$i, 1);
                }, n[Iz] = function() {
                    this._embeddedPlayers.length = 0;
                }, n.getAuxiliaryCurveNames_experimental = function() {
                    return this._auxiliaryCurveEntries.map(function(t1) {
                        return t1.name;
                    });
                }, n.hasAuxiliaryCurve_experimental = function(t1) {
                    return !!this.CE(t1);
                }, n.addAuxiliaryCurve_experimental = function(t1) {
                    var _$i = this.CE(t1);
                    return _$i || ((_$i = new mz).name = t1, this._auxiliaryCurveEntries.push(_$i)), _$i.curve;
                }, n.getAuxiliaryCurve_experimental = function(t1) {
                    return this.CE(t1).curve;
                }, n.renameAuxiliaryCurve_experimental = function(t1, i) {
                    var n = this.CE(t1);
                    n && (n.name = i);
                }, n.removeAuxiliaryCurve_experimental = function(t1) {
                    ui(this._auxiliaryCurveEntries, function(i) {
                        return i.name === t1;
                    });
                }, n._trySyncLegacyData = function() {
                    this.AE && (this.AE = !1, this.syncLegacyData());
                }, n.TE = function(t1, i, n) {
                    this.AE && (this.AE = !1, this.syncLegacyData());
                    var _$s, _$r = [];
                    n && (_$s = this.NE(t1, n, _$r));
                    for(var _$h, e = [], u = this._tracks, o = u.length, f = 0; f < o; ++f){
                        var _$c = u[f];
                        if (!_$r.includes(_$c) && !Array.from(_$c.channels()).every(function(t1) {
                            return 0 === t1.curve.keyFramesCount;
                        })) {
                            var a = i(_$c[_H]);
                            if (a) {
                                var v = void 0;
                                if (_instanceof(_$c, qV)) {
                                    if (!a.getValue) {
                                        rt(3930);
                                        continue;
                                    }
                                    var l = a.getValue();
                                    v = _$c.createLegacyEval(l);
                                } else v = _$c[SG]();
                                e.push(new Nz(a, v));
                            }
                        }
                    }
                    return this._exoticAnimation && (_$h = this._exoticAnimation.createEvaluator(i)), new Dz(e, _$h, _$s);
                }, n.NE = function(t1, i, n) {
                    if (_instanceof(t1, VE)) {
                        var _$s = this.OE();
                        if (_$s) {
                            var _$r = t1.getChildByPath(_$s);
                            if (_$r) {
                                for(var _$h = new Lz, e = [], u = this._tracks, o = u.length, f = 0; f < o; ++f){
                                    var _$c = u[f], a = _$c[_H].parseTrsPath();
                                    if (a && a.node === _$s) {
                                        n.push(_$c);
                                        var v = jz(_$h, a.property);
                                        if (v) {
                                            var l = _$c[SG]();
                                            e.push(new Nz(v, l));
                                        }
                                    }
                                }
                                return new Uz(_$r, this._duration, _$h, e);
                            }
                            nt(3924);
                        } else nt(3923);
                    } else rt(3920);
                }, n.OE = function() {
                    var _$t = this._tracks.map(function(t1) {
                        var _$i = t1[_H].parseTrsPath();
                        if (_$i) {
                            var n = _$i.node;
                            return {
                                path: n,
                                rank: n.split("/").length
                            };
                        }
                        return {
                            path: "",
                            rank: 0
                        };
                    });
                    _$t.sort(function(t1, i) {
                        return t1.rank - i.rank;
                    });
                    var _$i = _$t.findIndex(function(t1) {
                        return 0 !== t1.rank;
                    });
                    if (_$i < 0) return "";
                    for(var n = _$t.length, _$s = _$t[_$i], _$r = !0, _$h = _$i + 1; _$h < n; ++_$h){
                        var e = _$t[_$h];
                        if (e.rank !== _$s.rank) break;
                        if (e.path !== _$s.path) {
                            _$r = !1;
                            break;
                        }
                    }
                    return _$r ? _$s.path : "";
                }, n.RE = function() {
                    return this.kE || (this.kE = this.PE()), this.kE;
                }, n.PE = function() {
                    var _$t = new YV(this._duration);
                    return _$t.keys = [], _$t.curves = [], _$t.commonTargets = [], _$t;
                }, n.ME = function(t1) {
                    for(var _$i = t1.toTracks(), n = _$i.length, _$s = 0; _$s < n; ++_$s)this.addTrack(_$i[_$s]);
                }, n.SE = function() {
                    for(var _$t = new Set, _$i = this._tracks, n = _$i.length, _$s = 0; _$s < n; ++_$s){
                        var _$r = _$i[_$s][_H].parseTrsPath();
                        _$r && _$t.add(_$r.node);
                    }
                    if (this._exoticAnimation) for(var _$h = this._exoticAnimation.collectAnimatedJoints(), e = _$h.length, u = 0; u < e; ++u)_$t.add(_$h[u]);
                    return Array.from(_$t);
                }, n.CE = function(t1) {
                    return this._auxiliaryCurveEntries.find(function(i) {
                        return i.name === t1;
                    });
                }, s(i, [
                    {
                        key: "duration",
                        get: function get() {
                            return this._duration;
                        },
                        set: function set(t1) {
                            this._duration = t1;
                        }
                    },
                    {
                        key: "tracksCount",
                        get: function get() {
                            return this._tracks.length;
                        }
                    },
                    {
                        key: "tracks",
                        get: function get() {
                            return this._tracks;
                        }
                    },
                    {
                        key: "hash",
                        get: function get() {
                            if (this._hash) return this._hash;
                            var _$t, _$i, n = "Exotic:" + (null != (_$t = null == (_$i = this._exoticAnimation) ? void 0 : _$i.toHashString()) ? _$t : "");
                            return this._hash = Iv(n, 666);
                        }
                    },
                    {
                        key: "events",
                        get: function get() {
                            return this._events;
                        },
                        set: function set(t1) {
                            var _$i = this;
                            this._events = t1;
                            for(var n = [], _$s = [], _$r = this.events.sort(function(t1, i) {
                                return t1.frame - i.frame;
                            }), _$h = _$r.length, u = 0; u < _$h; ++u)!function e() {
                                var _$t = _$r[u], _$h = _$t.frame / _$i._duration, e = n.findIndex(function(t1) {
                                    return t1 === _$h;
                                });
                                e < 0 && (e = n.length, n.push(_$h), _$s.push({
                                    events: []
                                })), _$s[e].events.push({
                                    functionName: _$t.func,
                                    parameters: _$t.params
                                });
                            }();
                            this.EE = {
                                ratios: n,
                                eventGroups: _$s
                            };
                        }
                    },
                    {
                        key: Az,
                        get: function get() {
                            return this._exoticAnimation;
                        }
                    },
                    {
                        key: Az,
                        set: function set(t1) {
                            this._exoticAnimation = t1;
                        }
                    },
                    {
                        key: "isAdditive_experimental",
                        get: function get() {
                            return this._additiveSettings.enabled;
                        }
                    },
                    {
                        key: Rz,
                        get: function get() {
                            return this._additiveSettings;
                        }
                    },
                    {
                        key: "keys",
                        get: function get() {
                            return this.RE().keys;
                        }
                    },
                    {
                        key: "keys",
                        set: function set(t1) {
                            this.AE = !0, this.RE().keys = t1;
                        }
                    },
                    {
                        key: "curves",
                        get: function get() {
                            return this.AE = !0, this.RE().curves;
                        }
                    },
                    {
                        key: "curves",
                        set: function set(t1) {
                            this.RE().curves = t1;
                        }
                    },
                    {
                        key: "commonTargets",
                        get: function get() {
                            return this.RE().commonTargets;
                        }
                    },
                    {
                        key: "commonTargets",
                        set: function set(t1) {
                            this.AE = !0, this.RE().commonTargets = t1;
                        }
                    },
                    {
                        key: "data",
                        get: function get() {
                            return this.RE().data;
                        }
                    },
                    {
                        key: "eventGroups",
                        get: function get() {
                            return this.EE.eventGroups;
                        }
                    },
                    {
                        key: Ez,
                        get: function get() {
                            return this._embeddedPlayers.length;
                        }
                    },
                    {
                        key: "auxiliaryCurveCount_experimental",
                        get: function get() {
                            return this._auxiliaryCurveEntries.length;
                        }
                    }
                ]), i;
            }(sg)).WrapMode = MG, sz = ho(wz.prototype, "sample", [
                Ro
            ], function() {
                return 60;
            }), rz = ho(wz.prototype, "speed", [
                Ro
            ], function() {
                return 1;
            }), hz = ho(wz.prototype, "wrapMode", [
                Ro
            ], function() {
                return MG.Normal;
            }), ez = ho(wz.prototype, "enableTrsBlending", [
                Ro
            ], function() {
                return !1;
            }), uz = ho(wz.prototype, "_duration", [
                Ro
            ], function() {
                return 0;
            }), oz = ho(wz.prototype, "_hash", [
                Ro
            ], function() {
                return 0;
            }), fz = ho(wz.prototype, "_tracks", [
                Ro
            ], function() {
                return [];
            }), cz = ho(wz.prototype, "_exoticAnimation", [
                Ro
            ], function() {
                return null;
            }), az = ho(wz.prototype, "_events", [
                Ro
            ], function() {
                return [];
            }), vz = ho(wz.prototype, "_embeddedPlayers", [
                Ro
            ], function() {
                return [];
            }), lz = ho(wz.prototype, "_additiveSettings", [
                Ro
            ], function() {
                return new Cz;
            }), dz = ho(wz.prototype, "_auxiliaryCurveEntries", [
                Ro
            ], function() {
                return [];
            }), wz)) || wz), Cz = go("cc.AnimationClipAdditiveSettings")((yz = ho((pz = function pz() {
                this.enabled = yz && yz(), this.refClip = _z && _z();
            }).prototype, "enabled", [
                Ro
            ], function() {
                return !1;
            }), _z = ho(pz.prototype, "refClip", [
                Ro
            ], function() {
                return null;
            }), pz)) || pz;
            A.AnimationClip = Mz;
            var Nz = function() {
                function t1(t1, i) {
                    this.DE = void 0, this.LE = void 0, this.BE = !0, this.DE = t1, this.LE = i, this.BE = !!t1.getValue && i.requiresDefault;
                }
                return t1.prototype.evaluate = function(t1) {
                    var i = this.DE, n = this.LE, s = this.BE ? i.getValue() : void 0, _$r = n.evaluate(t1, s);
                    i.setValue(_$r);
                }, t1;
            }(), Pz = function() {
                function t1(t1, i) {
                    this.FE = t1, this.UE = t1.map(function(t1) {
                        var n = t1.playable;
                        if (!n) return null;
                        var s = n.instantiate(i);
                        return s ? {
                            instantiatedPlayer: s,
                            entered: !1,
                            hostPauseTime: 0,
                            lastIterations: 0
                        } : null;
                    });
                }
                var i = t1.prototype;
                return i.destroy = function() {
                    for(var s, _$t = this.UE, i = _$t.length, n = 0; n < i; ++n)null == (s = _$t[n]) || s.instantiatedPlayer.destroy();
                    this.UE.length = 0;
                }, i.evaluate = function(t1, i) {
                    for(var n = this.FE, s = this.UE, _$r = n.length, h = 0; h < _$r; ++h){
                        var e = s[h];
                        if (e) {
                            var u = e.entered, o = e.instantiatedPlayer, f = e.lastIterations, _$c = n[h], a = _$c.begin, v = _$c.end;
                            if (t1 >= a && t1 <= v ? u ? i !== f && (o.stop(), o.play(), e.entered = !0) : (o.play(), e.entered = !0) : u && (o.stop(), e.entered = !1), e.lastIterations = i, e.entered) {
                                var l = t1 - a;
                                e.instantiatedPlayer.setTime(l);
                            }
                        }
                    }
                }, i.notifyHostSpeedChanged = function(t1) {
                    for(var i = this.FE, n = this.UE, s = i.length, _$r = 0; _$r < s; ++_$r){
                        var h = n[_$r];
                        if (h) {
                            var e = h.instantiatedPlayer;
                            i[_$r].reconciledSpeed && e.setSpeed(t1);
                        }
                    }
                }, i.notifyHostPlay = function(t1) {
                    for(var i = this.FE, n = this.UE, s = i.length, _$r = 0; _$r < s; ++_$r){
                        var h = n[_$r];
                        if (h) {
                            var e = i[_$r], u = e.begin, o = e.end, f = h.instantiatedPlayer;
                            if (h.entered) {
                                var _$c = h.hostPauseTime;
                                if (f.randomAccess || Fn(_$c, t1, 1e-5)) {
                                    var a = Un(t1, u, o);
                                    f.play(), f.setTime(a - u);
                                } else f.stop();
                            }
                        }
                    }
                }, i.notifyHostPause = function(t1) {
                    for(var i = this.FE, n = this.UE, s = i.length, _$r = 0; _$r < s; ++_$r){
                        var h = n[_$r];
                        if (h) {
                            var e = h.instantiatedPlayer;
                            h.entered && (e.pause(), h.hostPauseTime = t1);
                        }
                    }
                }, i.notifyHostStop = function() {
                    for(var _$t = this.FE, i = this.UE, n = _$t.length, s = 0; s < n; ++s){
                        var _$r = i[s];
                        if (_$r) {
                            var h = _$r.instantiatedPlayer;
                            _$r.entered && (_$r.entered = !1, h.stop());
                        }
                    }
                }, t1;
            }(), Dz = function() {
                function t1(t1, i, n) {
                    this.xE = void 0, this.jE = [], this.GE = void 0, this.jE = t1, this.xE = i, this.GE = n;
                }
                var i = t1.prototype;
                return i.evaluate = function(t1) {
                    for(var i = this.jE, n = this.xE, s = i.length, _$r = 0; _$r < s; ++_$r)i[_$r].evaluate(t1);
                    n && n.evaluate(t1);
                }, i.evaluateRootMotion = function(t1, i) {
                    var n = this.GE;
                    n && n.evaluate(t1, i);
                }, t1;
            }(), Lz = function() {
                function t1() {
                    this.position = new Ss, this.scale = new Ss(1, 1, 1), this.rotation = new qs, this.eulerAngles = new Ss;
                }
                return t1.prototype.getTransform = function(t1) {
                    cr.fromRTS(t1, this.rotation, this.position, this.scale);
                }, t1;
            }(), Bz = function(t1) {
                function i() {
                    for(var _$i, n = arguments.length, _$s = Array(n), _$r = 0; _$r < n; _$r++)_$s[_$r] = arguments[_$r];
                    return (_$i = t1.call.apply(t1, [
                        this
                    ].concat(_$s)) || this).parent = null, _$i.Up = !0, _$i.Xn = new cr, _$i;
                }
                return h(i, t1), i.prototype.invalidate = function() {
                    this.Up = !0;
                }, s(i, [
                    {
                        key: "globalTransform",
                        get: function get() {
                            var _$t = this.Xn;
                            return this.Up && (this.Up = !1, cr.fromRTS(_$t, this.rotation, this.position, this.scale), this.parent && cr.multiply(_$t, this.parent.globalTransform, _$t)), this.Xn;
                        }
                    }
                ]), i;
            }(Lz), Fz = new cr, Uz = function() {
                function t1(t1, i, n, s) {
                    this.HE = new cr, this.VE = new cr, this.WE = new cr, this.zE = new cr, this.$E = new cr, this.XE = new Ss, this.qE = new qs, this.YE = new Ss, this.KE = t1, this.hE = i, this.JE = n, this.QE = s;
                }
                var i = t1.prototype;
                return i.evaluate = function(t1, i) {
                    var n = this.ZE(t1, i, this.$E), s = this.XE, _$r = this.qE, h = this.YE, e = this.KE;
                    cr.toSRT(n, _$r, s, h), Ss.add(s, s, e.position), e.setPosition(s), qs.multiply(_$r, _$r, e.rotation), e.setRotation(_$r), Ss.multiply(h, h, e.scale), e.setScale(h);
                }, i.ZE = function(t1, i, n) {
                    var s = this.hE, _$r = s - t1, h = this.tT(t1, this.WE);
                    if (i < _$r) xz(n, h, this.tT(t1 + i, this.zE));
                    else {
                        cr.identity(n);
                        var u = function u(t1, i) {
                            xz(Fz, t1, i), cr.multiply(n, n, Fz);
                        }, o = i - _$r, f = Math.floor(o / s), _$c = o - f * s, a = this.tT(0, this.HE), v = this.tT(s, this.VE), l = this.tT(_$c, this.zE);
                        u(h, v), xz(Fz, a, v);
                        for(var _$d = 0; _$d < f; ++_$d)cr.multiply(n, n, Fz);
                        u(a, l);
                    }
                    return n;
                }, i.tT = function(t1, i) {
                    for(var n = this.QE, s = n.length, _$r = 0; _$r < s; ++_$r)n[_$r].evaluate(t1);
                    return this.JE.getTransform(i), i;
                }, t1;
            }();
            function xz(t1, i, n) {
                cr.invert(t1, i), cr.multiply(t1, n, t1);
            }
            function jz(t1, i) {
                switch(i){
                    default:
                        return;
                    case "position":
                        return {
                            setValue: function setValue(i) {
                                Ss.copy(t1.position, i);
                            }
                        };
                    case "rotation":
                        return {
                            setValue: function setValue(i) {
                                qs.copy(t1.rotation, i);
                            }
                        };
                    case "scale":
                        return {
                            setValue: function setValue(i) {
                                Ss.copy(t1.scale, i);
                            }
                        };
                    case "eulerAngles":
                        return {
                            setValue: function setValue(i) {
                                Ss.copy(t1.eulerAngles, i);
                            }
                        };
                }
            }
            var Gz = function() {
                function t1(t1, i, n, s) {
                    this.iT = -1, this.TA = 0, this.nT = 0, this.sT = -1, this.rT = !1, this.hT = t1, this.eT = i, this.uT = n, this.bA = s;
                }
                var i = t1.prototype;
                return i.setWrapMode = function(t1) {
                    this.bA = t1;
                }, i.ignore = function(t1, i) {
                    this.sT = -1, this.rT = !1;
                    var t11, n = (t11 = t1, Zu(this.eT, t11));
                    n < 0 && (n = ~n - 1, i < 0 && (n += 1), this.sT = n);
                }, i.reset = function() {
                    this.iT = -1, this.TA = 0, this.nT = 0, this.sT = -1, this.rT = !1;
                }, i.sample = function(t1, i, n) {
                    if (0 !== this.uT.length) {
                        var t11, s = this.uT.length, _$r = (t11 = t1, Zu(this.eT, t11));
                        if (_$r < 0 && (_$r = ~_$r - 1, i < 0 && (_$r += 1)), this.sT !== _$r && (this.sT = -1), !this.rT) return this.rT = !0, this.oT(_$r, !1), this.iT = _$r, this.TA = n, void (this.nT = i);
                        var h = this.bA, e = Hz(n), u = Hz(this.TA), o = this.iT, f = this.nT, _$c = -1 !== u && e !== u;
                        if (o === _$r && _$c && 1 === s) this.oT(0, !1);
                        else if (o !== _$r || _$c) {
                            i = f;
                            do {
                                if (o !== _$r && (-1 === i && 0 === o && _$r > 0 ? (22 & ~h ? o = s : i *= -1, u++) : 1 === i && o === s - 1 && _$r < s - 1 && (22 & ~h ? o = -1 : i *= -1, u++), o === _$r || u > e)) break;
                                o += i, this.oT(o, !0);
                            }while (o !== _$r && o > -1 && o < s);
                        }
                        this.iT = _$r, this.TA = n, this.nT = i;
                    }
                }, i.oT = function(t1, i) {
                    i ? PG().pushDelayEvent(this.fT, this, [
                        t1
                    ]) : this.fT(t1);
                }, i.fT = function(t1) {
                    if (this.hT && this.hT.isValid) {
                        var i = this.uT;
                        if (!(t1 < 0 || t1 >= i.length || this.sT === t1)) for(var n = i[t1], s = n.events.length, _$r = 0; _$r < s; ++_$r){
                            var h = n.events[_$r];
                            bz(this.hT, h.functionName, h.parameters);
                        }
                    }
                }, t1;
            }();
            function Hz(t1) {
                return t1 - (0 | t1) == 0 && (t1 -= 1), 0 | t1;
            }
            var Wz = function() {
                function t1() {
                    this._nodeBlendStates = new Map;
                }
                var i = t1.prototype;
                return i.createWriter = function(t1, i, n, s) {
                    var _$r = this.ref(t1, i);
                    return new zz(t1, i, _$r, n, s);
                }, i.destroyWriter = function(t1) {
                    this.deRef(t1.node, t1.property);
                }, i.ref = function(t1, i) {
                    var n = this._nodeBlendStates.get(t1);
                    return n || (n = this.createNodeBlendState(), this._nodeBlendStates.set(t1, n)), n.refProperty(t1, i);
                }, i.deRef = function(t1, i) {
                    var n = this._nodeBlendStates.get(t1);
                    n && (n.deRefProperty(i), n.empty && this._nodeBlendStates.delete(t1));
                }, i.apply = function() {
                    this._nodeBlendStates.forEach(function(t1, i) {
                        t1.apply(i);
                    });
                }, t1;
            }(), zz = function() {
                function t1(t1, i, n, s, r) {
                    this._node = t1, this._property = i, this._propertyBlendState = n, this._host = s, this._constants = r;
                }
                var i = t1.prototype;
                return i.getValue = function() {
                    return this._node[this._property];
                }, i.setValue = function(t1) {
                    var i = this._propertyBlendState, n = this._host.weight;
                    i.blend(t1, n);
                }, s(t1, [
                    {
                        key: "node",
                        get: function get() {
                            return this._node;
                        }
                    },
                    {
                        key: "property",
                        get: function get() {
                            return this._property;
                        }
                    }
                ]), t1;
            }(), $z = function() {
                function t1() {
                    this.refCount = 0, this.accumulatedWeight = 0, this.result = new Ss;
                }
                var i = t1.prototype;
                return i.blend = function(t1, i) {
                    this.accumulatedWeight = Jz(this.result, this.result, this.accumulatedWeight, t1, i);
                }, i.reset = function() {
                    this.accumulatedWeight = 0, Ss.zero(this.result);
                }, t1;
            }(), Xz = function() {
                function t1() {
                    this.refCount = 0, this.accumulatedWeight = 0, this.result = new qs;
                }
                var i = t1.prototype;
                return i.blend = function(t1, i) {
                    this.accumulatedWeight = Qz(this.result, this.result, this.accumulatedWeight, t1, i);
                }, i.reset = function() {
                    this.accumulatedWeight = 0, qs.identity(this.result);
                }, t1;
            }(), Yz = function(t1) {
                function i() {
                    return t1.apply(this, arguments) || this;
                }
                h(i, t1);
                var n = i.prototype;
                return n.apply = function(i) {
                    var n = this._properties, s = n.position, _$r = n.scale, _$h = n.rotation, e = n.eulerAngles;
                    s && s.accumulatedWeight && (this._transformApplyFlags |= 1, s.accumulatedWeight < 1 && s.blend(i.position, 1 - s.accumulatedWeight)), _$r && _$r.accumulatedWeight && (this._transformApplyFlags |= 4, _$r.accumulatedWeight < 1 && _$r.blend(i.scale, 1 - _$r.accumulatedWeight)), e && e.accumulatedWeight && (this._transformApplyFlags |= 8, e.accumulatedWeight < 1 && e.blend(i.eulerAngles, 1 - e.accumulatedWeight)), _$h && _$h.accumulatedWeight && (this._transformApplyFlags |= 2, _$h.accumulatedWeight < 1 && _$h.blend(i.rotation, 1 - _$h.accumulatedWeight)), t1.prototype.apply.call(this, i), null == s || s.reset(), null == _$r || _$r.reset(), null == _$h || _$h.reset(), null == e || e.reset();
                }, n._createVec3BlendState = function() {
                    return new $z;
                }, n._createQuatBlendState = function() {
                    return new Xz;
                }, i;
            }(function() {
                function t1() {
                    this._transformApplyFlags = 0, this._properties = {};
                }
                var i = t1.prototype;
                return i.refProperty = function(t1, i) {
                    var n, _$s, _$r, h = this._properties;
                    switch(i){
                        default:
                        case "position":
                        case "scale":
                        case "eulerAngles":
                            _$r = null != (n = h[i]) ? n : h[i] = this._createVec3BlendState(t1[i]);
                            break;
                        case "rotation":
                            _$r = null != (_$s = h[i]) ? _$s : h[i] = this._createQuatBlendState(t1.rotation);
                    }
                    return ++_$r.refCount, _$r;
                }, i.deRefProperty = function(t1) {
                    var i = this._properties, n = i[t1];
                    n && (--n.refCount, n.refCount > 0 || delete i[t1]);
                }, i.apply = function(t1) {
                    var i, n, _$s, _$r = this._transformApplyFlags, h = this._properties, e = h.position, u = h.scale, o = h.rotation, f = h.eulerAngles;
                    _$r && (e && 1 & _$r && (i = e.result), u && 4 & _$r && (n = u.result), f && 8 & _$r && (_$s = f.result), o && 2 & _$r && (_$s = o.result), (_$s || i || n) && t1.setRTS(_$s, i, n), this._transformApplyFlags = 0);
                }, s(t1, [
                    {
                        key: "empty",
                        get: function get() {
                            var _$t = this._properties;
                            return !(_$t.position || _$t.rotation || _$t.eulerAngles || _$t.scale);
                        }
                    }
                ]), t1;
            }()), Kz = function(t1) {
                function i() {
                    return t1.apply(this, arguments) || this;
                }
                return h(i, t1), i.prototype.createNodeBlendState = function() {
                    return new Yz;
                }, i;
            }(Wz);
            function Jz(t1, i, n, s, r) {
                var h = n + r;
                return 1 !== r || n ? h && Ss.lerp(t1, t1, s, r / h) : Ss.copy(t1, s), h;
            }
            function Qz(t1, i, n, s, r) {
                var h = n + r;
                return 1 !== r || n ? h && qs.slerp(t1, i, s, r / h) : qs.copy(t1, s), h;
            }
            var t$, i$ = [], n$ = new Map;
            function s$(t1, i) {
                for(var n = 0, s = cr.IDENTITY; t1;){
                    if (t1.stamp === i || t1.stamp + 1 === i && !t1.node.hasChangedFlags) {
                        s = t1.world, t1.stamp = i;
                        break;
                    }
                    t1.stamp = i, i$[n++] = t1, t1 = t1.parent;
                }
                for(; n > 0;){
                    t1 = i$[--n], i$[n] = null;
                    var _$r = t1.node;
                    cr.fromRTS(t1.local, _$r.rotation, _$r.position, _$r.scale), s = cr.multiply(t1.world, s, t1.local);
                }
                return s;
            }
            function r$(t1, i) {
                for(var n, s = null, _$r = 0; t1 !== i;){
                    var h = t1.uuid;
                    if (n$.has(h)) {
                        s = n$.get(h);
                        break;
                    }
                    s = {
                        node: t1,
                        local: new cr,
                        world: new cr,
                        stamp: -1,
                        parent: null
                    }, n$.set(h, s), i$[_$r++] = s, t1 = t1.parent, s = null;
                }
                for(; _$r > 0;)n = i$[--_$r], i$[_$r] = null, n.parent = s, s = n;
                return s;
            }
            function h$(t1) {
                for(var i = n$.get(t1.uuid) || null; i;)n$.delete(i.node.uuid), i = i.parent;
            }
            var e$ = t1("a9", go(((t$ = function(t1) {
                function i() {
                    for(var _$i, n = arguments.length, _$s = Array(n), _$r = 0; _$r < n; _$r++)_$s[_$r] = arguments[_$r];
                    return (_$i = t1.call.apply(t1, [
                        this
                    ].concat(_$s)) || this).cT = new ni([]), _$i.vT = new ni([]), _$i.lT = [], _$i.dT = new Kz, _$i.wT = [], _$i;
                }
                h(i, t1);
                var n = i.prototype;
                return n.addCrossFade = function(t1) {
                    -1 === this.vT.array.indexOf(t1) && this.vT.push(t1);
                }, n.removeCrossFade = function(t1) {
                    var _$i = this.vT.array.indexOf(t1);
                    _$i >= 0 ? this.vT.fastRemoveAt(_$i) : rt(3907);
                }, n.update = function(t1) {
                    var _$i = this.lT, n = this.vT, _$s = this.wT, _$r = n.array;
                    for(n.i = 0; n.i < _$r.length; ++n.i)_$r[n.i].update(t1);
                    var _$h = this.cT, e = _$h.array;
                    for(_$h.i = 0; _$h.i < e.length; ++_$h.i){
                        var u = e[_$h.i];
                        u.isMotionless || u.update(t1);
                    }
                    this.dT.apply();
                    for(var o = PN.getTotalFrames(), f = 0, _$c = _$s.length; f < _$c; f++){
                        var a = _$s[f];
                        a.target.matrix = s$(a.transform, o);
                    }
                    for(var _$d = 0, w = _$i.length; _$d < w; _$d++){
                        var g = _$i[_$d];
                        g.fn.apply(g.thisArg, g.args);
                    }
                    _$i.length = 0;
                }, n.destruct = function() {}, n.addAnimation = function(t1) {
                    -1 === this.cT.array.indexOf(t1) && this.cT.push(t1);
                }, n.removeAnimation = function(t1) {
                    var _$i = this.cT.array.indexOf(t1);
                    _$i >= 0 ? this.cT.fastRemoveAt(_$i) : rt(3907);
                }, n.pushDelayEvent = function(t1, i, n) {
                    this.lT.push({
                        fn: t1,
                        thisArg: i,
                        args: n
                    });
                }, n.addSockets = function(t1, i) {
                    for(var n = this, _$r = 0; _$r < i.length; ++_$r)!function s() {
                        var _$s = i[_$r];
                        if (!n.wT.find(function(t1) {
                            return t1.target === _$s.target;
                        })) {
                            var _$h = t1.getChildByPath(_$s.path), e = _$s.target && _$h && r$(_$h, t1);
                            e && n.wT.push({
                                target: _$s.target,
                                transform: e
                            });
                        }
                    }();
                }, n.removeSockets = function(t1, i) {
                    for(var n = 0; n < i.length; ++n)for(var _$s = i[n], _$r = 0; _$r < this.wT.length; ++_$r){
                        var _$h = this.wT[_$r];
                        if (_$h.target === _$s.target) {
                            h$(_$h.transform.node), this.wT[_$r] = this.wT[this.wT.length - 1], this.wT.length--;
                            break;
                        }
                    }
                }, s(i, [
                    {
                        key: "blendState",
                        get: function get() {
                            return this.dT;
                        }
                    },
                    {
                        key: "animationStates",
                        get: function get() {
                            return this.cT.array;
                        }
                    }
                ]), i;
            }(_v)).ID = "animation", t$)) || t$);
            PN.on("director_init", function() {
                var _$t = new e$;
                PN.registerSystem(e$.ID, _$t, 200);
            }), A.AnimationManager = e$;
            var u$, o$, f$, c$, a$, v$, d$, w$, g$, p$, y$ = function(t1) {
                function i(i) {
                    var n;
                    return (n = t1.call(this) || this).gT = [], n.pT = [], n.yT = !1, n.Ii = null != i ? i : PG(), n;
                }
                h(i, t1);
                var n = i.prototype;
                return n.update = function(t1) {
                    if (!this.isMotionless) {
                        var _$i = this.gT, n = this.pT;
                        if (1 === _$i.length && 1 === n.length) {
                            var s = _$i[0].state;
                            s && (s.weight = 1);
                        } else this._T(t1);
                        1 === _$i.length && 1 === n.length && this.mT();
                    }
                }, n.crossFade = function(t1, i) {
                    0 === this.gT.length && (i = 0), 0 === i && this.clear();
                    var n, s = this.gT.find(function(i) {
                        return i.state === t1;
                    });
                    s ? null != (n = s.state) && n.isMotionless && s.state.play() : (s = {
                        state: t1,
                        reference: 0
                    }, t1 && t1.play(), this.gT.push(s)), ++s.reference, this.pT.unshift({
                        easeDuration: i,
                        easeTime: 0,
                        target: s
                    }), this.isMotionless || this.kT();
                }, n.clear = function() {
                    for(var _$t = 0; _$t < this.gT.length; ++_$t){
                        var _$i = this.gT[_$t].state;
                        _$i && _$i.stop();
                    }
                    this.gT.length = 0, this.pT.length = 0;
                }, n.onPlay = function() {
                    t1.prototype.onPlay.call(this), this.kT();
                }, n.onPause = function() {
                    t1.prototype.onPause.call(this);
                    for(var _$i = 0; _$i < this.gT.length; ++_$i){
                        var n = this.gT[_$i].state;
                        n && n.pause();
                    }
                    this.mT();
                }, n.onResume = function() {
                    t1.prototype.onResume.call(this);
                    for(var _$i = 0; _$i < this.gT.length; ++_$i){
                        var n = this.gT[_$i].state;
                        n && n.resume();
                    }
                    this.kT();
                }, n.onStop = function() {
                    t1.prototype.onStop.call(this), this.clear();
                }, n._T = function(t1) {
                    for(var _$i = this.gT, n = this.pT, s = 0; s < _$i.length; ++s){
                        var _$r = _$i[s].state;
                        _$r && (_$r.weight = 0);
                    }
                    for(var _$h = 1, e = n.length, u = 0; u < n.length; ++u){
                        var o = n[u];
                        o.easeTime += t1;
                        var f = 0 === o.easeDuration ? 1 : xn(o.easeTime / o.easeDuration), _$c = f * _$h;
                        if (_$h *= 1 - f, o.target.state && (o.target.state.weight += _$c), o.easeTime >= o.easeDuration) {
                            e = u + 1, o.easeTime = o.easeDuration;
                            break;
                        }
                    }
                    if (e !== n.length) {
                        for(var a = e; a < n.length; ++a){
                            var v = n[a];
                            --v.target.reference, v.target.reference <= 0 && (v.target.state && v.target.state.stop(), hi(this.gT, v.target));
                        }
                        n.splice(e);
                    }
                }, n.kT = function() {
                    this.yT || (this.Ii.addCrossFade(this), this.yT = !0);
                }, n.mT = function() {
                    this.yT && (this.Ii.removeCrossFade(this), this.yT = !1);
                }, i;
            }(RG), _$ = t1("a3", (u$ = go("cc.Animation"), o$ = yo(99), f$ = Zo([
                Mz
            ]), c$ = Zo(Mz), a$ = Zo([
                Mz
            ]), u$(v$ = o$(((p$ = function(t1) {
                function i() {
                    for(var _$i, n = arguments.length, _$s = Array(n), _$r = 0; _$r < n; _$r++)_$s[_$r] = arguments[_$r];
                    return (_$i = t1.call.apply(t1, [
                        this
                    ].concat(_$s)) || this).playOnLoad = d$ && d$(), _$i._crossFade = new y$, _$i._nameToState = St(!0), _$i._clips = w$ && w$(), _$i._defaultClip = g$ && g$(), _$i.AT = !1, _$i;
                }
                h(i, t1);
                var n = i.prototype;
                return n.onLoad = function() {
                    for(var _$t in this.clips = this._clips, this._nameToState)this._nameToState[_$t].initialize(this.node);
                }, n.start = function() {
                    this.playOnLoad && !this.AT && this._defaultClip && this.crossFade(this._defaultClip.name, 0);
                }, n.onEnable = function() {
                    this._crossFade.resume();
                }, n.onDisable = function() {
                    this._crossFade.pause();
                }, n.onDestroy = function() {
                    for(var _$t in this._crossFade.stop(), this._nameToState)this._nameToState[_$t].destroy();
                    this._nameToState = St(!0);
                }, n.play = function(t1) {
                    if (this.AT = !0, !t1) {
                        if (!this._defaultClip) return;
                        t1 = this._defaultClip.name;
                    }
                    this.crossFade(t1, 0);
                }, n.crossFade = function(t1, i) {
                    void 0 === i && (i = .3), this.AT = !0;
                    var n = this._nameToState[t1];
                    n && this.doPlayOrCrossFade(n, i);
                }, n.pause = function() {
                    this._crossFade.pause();
                }, n.resume = function() {
                    this._crossFade.resume();
                }, n.stop = function() {
                    this._crossFade.stop();
                }, n.getState = function(t1) {
                    var _$i = this._nameToState[t1];
                    return _$i && !_$i.curveLoaded && _$i.initialize(this.node), _$i || null;
                }, n.createState = function(t1, i) {
                    return i = i || t1.name, this.removeState(i), this._doCreateState(t1, i);
                }, n.removeState = function(t1) {
                    var _$i = this._nameToState[t1];
                    _$i && (_$i.allowLastFrameEvent(!1), _$i.stop(), delete this._nameToState[t1]);
                }, n.addClip = function(t1, i) {
                    return oi(this._clips, t1) || this._clips.push(t1), this.createState(t1, i);
                }, n.removeClip = function(t1, i) {
                    var n;
                    for(var _$s in this._nameToState){
                        var _$r = this._nameToState[_$s];
                        if (_$r.clip === t1) {
                            n = _$r;
                            break;
                        }
                    }
                    if (t1 === this._defaultClip) {
                        if (!i) return void nt(3902);
                        this._defaultClip = null;
                    }
                    if (n && n.isPlaying) {
                        if (!i) return void nt(3903);
                        n.stop();
                    }
                    this._clips = this._clips.filter(function(i) {
                        return i !== t1;
                    }), n && delete this._nameToState[n.name];
                }, n.on = function(i, n, s, r) {
                    var _$h = t1.prototype.on.call(this, i, n, s, r);
                    return "lastframe" === i && this.ET(), _$h;
                }, n.once = function(i, n, s) {
                    var _$r = t1.prototype.once.call(this, i, n, s);
                    return "lastframe" === i && this.ET(), _$r;
                }, n.off = function(i, n, s) {
                    t1.prototype.off.call(this, i, n, s), "lastframe" === i && this.TT();
                }, n._createState = function(t1, i) {
                    return new UG(t1, i);
                }, n._doCreateState = function(t1, i) {
                    var n = this._createState(t1, i);
                    return n._setEventTarget(this), n.allowLastFrameEvent(this.hasEventListener("lastframe")), this.node && n.initialize(this.node), this._nameToState[n.name] = n, n;
                }, n.doPlayOrCrossFade = function(t1, i) {
                    this._crossFade.play(), this._crossFade.crossFade(t1, i);
                }, n.ST = function(t1) {
                    for(var _$i in this._nameToState){
                        var n = this._nameToState[_$i];
                        m$(t1, n.clip) && (n.stop(), delete this._nameToState[_$i]);
                    }
                }, n.ET = function() {
                    if (this.hasEventListener("lastframe")) for(var _$t in this._nameToState)this._nameToState[_$t].allowLastFrameEvent(!0);
                }, n.TT = function() {
                    if (!this.hasEventListener("lastframe")) for(var _$t in this._nameToState)this._nameToState[_$t].allowLastFrameEvent(!1);
                }, s(i, [
                    {
                        key: "clips",
                        get: function get() {
                            return this._clips;
                        },
                        set: function set(t1) {
                            var _$i = this;
                            this._crossFade && this._crossFade.clear(), this._clips.forEach(function(t1) {
                                t1 && _$i.ST(t1);
                            }), t1.forEach(function(t1) {
                                t1 && _$i.createState(t1);
                            });
                            var n = t1.find(function(t1) {
                                return m$(t1, _$i._defaultClip);
                            });
                            this._defaultClip = n || null, this._clips = t1;
                        }
                    },
                    {
                        key: "defaultClip",
                        get: function get() {
                            return this._defaultClip;
                        },
                        set: function set(t1) {
                            this._defaultClip = t1, t1 && (this._clips.findIndex(function(i) {
                                return m$(i, t1);
                            }) >= 0 || (this._clips.push(t1), this.createState(t1)));
                        }
                    }
                ]), i;
            }(ne(Yg))).EventType = DG, y(p$.prototype, "clips", [
                f$
            ], Object.getOwnPropertyDescriptor(p$.prototype, "clips"), p$.prototype), y(p$.prototype, "defaultClip", [
                c$
            ], Object.getOwnPropertyDescriptor(p$.prototype, "defaultClip"), p$.prototype), d$ = ho(p$.prototype, "playOnLoad", [
                Ro
            ], function() {
                return !1;
            }), w$ = ho(p$.prototype, "_clips", [
                a$
            ], function() {
                return [];
            }), g$ = ho(p$.prototype, "_defaultClip", [
                Ro
            ], function() {
                return null;
            }), v$ = p$)) || v$) || v$));
            function m$(t1, i) {
                return t1 === i || !!t1 && !!i && t1._uuid === i._uuid && t1._uuid;
            }
            A.Animation = _$, A.AnimationComponent = _$, qt(_$, "cc.AnimationComponent");
            var b$, k$, A$, E$ = new cr;
            (t117 = b$ || (b$ = {})).PLAYED = "play", t117.PAUSED = "pause", t117.STOPPED = "stop", t117.SEEKED = "seeked", t117.ENDED = "ended", t117.INTERRUPTION_BEGIN = "interruptionBegin", t117.INTERRUPTION_END = "interruptionEnd", t117.USER_GESTURE = "on_gesture", (t118 = k$ || (k$ = {}))[t118.DOM_AUDIO = 0] = "DOM_AUDIO", t118[t118.WEB_AUDIO = 1] = "WEB_AUDIO", t118[t118.MINIGAME_AUDIO = 2] = "MINIGAME_AUDIO", t118[t118.NATIVE_AUDIO = 3] = "NATIVE_AUDIO", t118[t118.UNKNOWN_AUDIO = 4] = "UNKNOWN_AUDIO", (t119 = A$ || (A$ = {}))[t119.INIT = 0] = "INIT", t119[t119.PLAYING = 1] = "PLAYING", t119[t119.PAUSED = 2] = "PAUSED", t119[t119.STOPPED = 3] = "STOPPED", t119[t119.INTERRUPTED = 4] = "INTERRUPTED";
            var T$ = t1("ae", function() {
                function t1() {
                    this.OT = void 0, this.IT = 1;
                    for(var _$t = arguments.length, i = Array(_$t), n = 0; n < _$t; n++)i[n] = arguments[n];
                    if (2 === i.length) this.OT = i[0], this.IT = i[1];
                    else {
                        var _$s = i[0], _$r = i[1], h = i[2];
                        this.OT = new _$r(_$s), this.IT = h;
                    }
                }
                return t1.prototype.getData = function(t1) {
                    return this.OT[t1] * this.IT;
                }, s(t1, [
                    {
                        key: "length",
                        get: function get() {
                            return this.OT.length;
                        }
                    }
                ]), t1;
            }());
            function S$(t1) {
                for(var i = t1.RT.length, n = t1.RT.slice(), s = [], _$r = !1, h = i - 1; h >= 0; h--){
                    var e = n[h];
                    if ("stop" === e.op) {
                        s.push(e);
                        break;
                    }
                    if ("seek" === e.op) _$r || (s.push(e), _$r = !0);
                    else {
                        if (_$r) {
                            s.push(e);
                            break;
                        }
                        0 === s.length && s.push(e);
                    }
                }
                t1.RT = s.reverse();
            }
            var t117, t118, t119, O$, I$ = 0;
            function R$(t1, i) {
                var n;
                i.invoking || (i.invoking = !0, (n = i.func).call.apply(n, [
                    t1
                ].concat(i.args)).then(function() {
                    i.invoking = !1, t1.RT.shift(), t1.Ne.emit(i.id.toString()), t1.Ne.off(i.id.toString()), S$(t1);
                    var n = t1.RT[0];
                    n && R$(t1, n);
                }).catch(function() {}));
            }
            function M$(t1, i, n) {
                var s = n.value;
                n.value = function() {
                    for(var _$t = this, _$n = arguments.length, _$r = Array(_$n), h = 0; h < _$n; h++)_$r[h] = arguments[h];
                    return new Promise(function(n) {
                        var h = I$++;
                        _$t.RT.push({
                            op: i,
                            id: h,
                            func: s,
                            args: _$r,
                            invoking: !1
                        }), _$t.Ne.once(h.toString(), n), R$(_$t, _$t.RT[0]);
                    });
                };
            }
            function C$(t1) {
                return new Promise(function(i) {
                    var n = t1.play();
                    return void 0 === n ? i() : (n.then(i).catch(function() {
                        var n = function n() {
                            t1.play().then(function() {
                                null == s || s.removeEventListener("touchend", n, {
                                    capture: !0
                                }), null == s || s.removeEventListener("mouseup", n, {
                                    capture: !0
                                });
                            }).catch(function() {}), i();
                        }, s = document.getElementById("GameCanvas");
                        null == s || s.addEventListener("touchend", n, {
                            capture: !0
                        }), null == s || s.addEventListener("mouseup", n, {
                            capture: !0
                        });
                    }), null);
                });
            }
            var N$, P$, D$ = function() {
                function t1(t1, i) {
                    this.MT = void 0, this.CT = void 0, this.NT = void 0, this.MT = t1, t1.volume = i;
                }
                var i = t1.prototype;
                return i.play = function() {
                    var _$t = this;
                    C$(this.MT).then(function() {
                        null == _$t.onPlay || _$t.onPlay();
                    }).catch(function() {});
                }, i.stop = function() {
                    this.MT.pause();
                }, s(t1, [
                    {
                        key: "onPlay",
                        get: function get() {
                            return this.CT;
                        },
                        set: function set(t1) {
                            this.CT = t1;
                        }
                    },
                    {
                        key: "onEnd",
                        get: function get() {
                            return this.NT;
                        },
                        set: function set(t1) {
                            this.NT && this.MT.removeEventListener("ended", this.NT), this.NT = t1, t1 && this.MT.addEventListener("ended", t1);
                        }
                    }
                ]), t1;
            }(), L$ = (y((O$ = function() {
                function t1(t1) {
                    var i = this;
                    this.MT = void 0, this.PT = A$.INIT, this.DT = void 0, this.Ne = new se, this.RT = [], this.MT = t1, iP.on(tP.EVENT_PAUSE, this.LT, this), iP.on(tP.EVENT_RESUME, this.BT, this), this.DT = function() {
                        i.seek(0).catch(function() {}), i.PT = A$.INIT, i.Ne.emit(b$.ENDED);
                    }, this.MT.addEventListener("ended", this.DT);
                }
                var i = t1.prototype;
                return i.destroy = function() {
                    iP.off(tP.EVENT_PAUSE, this.LT, this), iP.off(tP.EVENT_RESUME, this.BT, this), this.MT.removeEventListener("ended", this.DT), this.MT = null;
                }, t1.load = function(i) {
                    return new Promise(function(n, s) {
                        t1.loadNative(i).then(function(i) {
                            n(new t1(i));
                        }).catch(s);
                    });
                }, t1.loadNative = function(t1) {
                    return new Promise(function(i, n) {
                        var _$s = document.createElement("audio"), _$r = "canplaythrough";
                        le.os === ue.IOS ? _$r = "loadedmetadata" : le.browserType === re.FIREFOX && (_$r = "canplay");
                        var h = setTimeout(function() {
                            0 === _$s.readyState ? o() : u();
                        }, 8e3), e = function e() {
                            clearTimeout(h), _$s.removeEventListener(_$r, u, !1), _$s.removeEventListener("error", o, !1);
                        }, u = function u() {
                            e(), i(_$s);
                        }, o = function o() {
                            e(), n(Error("load audio failure - " + t1));
                        };
                        _$s.addEventListener(_$r, u, !1), _$s.addEventListener("error", o, !1), _$s.src = t1;
                    });
                }, t1.loadOneShotAudio = function(i, n) {
                    return new Promise(function(s, r) {
                        t1.loadNative(i).then(function(t1) {
                            s(new D$(t1, n));
                        }).catch(r);
                    });
                }, i.LT = function() {
                    var _$t = this;
                    this.PT === A$.PLAYING && this.pause().then(function() {
                        _$t.PT = A$.INTERRUPTED, _$t.Ne.emit(b$.INTERRUPTION_BEGIN);
                    }).catch(function() {});
                }, i.BT = function() {
                    var _$t = this;
                    this.PT === A$.INTERRUPTED && this.play().then(function() {
                        _$t.Ne.emit(b$.INTERRUPTION_END);
                    }).catch(function() {});
                }, i.getPCMData = function() {}, i.seek = function(t1) {
                    return t1 = Un(t1, 0, this.duration), this.MT.currentTime = t1, Promise.resolve();
                }, i.play = function() {
                    var _$t = this;
                    return new Promise(function(i) {
                        C$(_$t.MT).then(function() {
                            _$t.PT = A$.PLAYING, i();
                        }).catch(function() {});
                    });
                }, i.pause = function() {
                    return this.MT.pause(), this.PT = A$.PAUSED, Promise.resolve();
                }, i.stop = function() {
                    var _$t = this;
                    return new Promise(function(i) {
                        _$t.MT.pause(), _$t.MT.currentTime = 0, _$t.PT = A$.STOPPED, i();
                    });
                }, i.onInterruptionBegin = function(t1) {
                    this.Ne.on(b$.INTERRUPTION_BEGIN, t1);
                }, i.offInterruptionBegin = function(t1) {
                    this.Ne.off(b$.INTERRUPTION_BEGIN, t1);
                }, i.onInterruptionEnd = function(t1) {
                    this.Ne.on(b$.INTERRUPTION_END, t1);
                }, i.offInterruptionEnd = function(t1) {
                    this.Ne.off(b$.INTERRUPTION_END, t1);
                }, i.onEnded = function(t1) {
                    this.Ne.on(b$.ENDED, t1);
                }, i.offEnded = function(t1) {
                    this.Ne.off(b$.ENDED, t1);
                }, s(t1, [
                    {
                        key: "src",
                        get: function get() {
                            return this.MT ? this.MT.src : "";
                        }
                    },
                    {
                        key: "type",
                        get: function get() {
                            return k$.DOM_AUDIO;
                        }
                    },
                    {
                        key: "state",
                        get: function get() {
                            return this.PT;
                        }
                    },
                    {
                        key: "loop",
                        get: function get() {
                            return this.MT.loop;
                        },
                        set: function set(t1) {
                            this.MT.loop = t1;
                        }
                    },
                    {
                        key: "volume",
                        get: function get() {
                            return this.MT.volume;
                        },
                        set: function set(t1) {
                            t1 = xn(t1), this.MT.volume = t1;
                        }
                    },
                    {
                        key: "duration",
                        get: function get() {
                            return this.MT.duration;
                        }
                    },
                    {
                        key: "currentTime",
                        get: function get() {
                            return this.MT.currentTime;
                        }
                    },
                    {
                        key: "sampleRate",
                        get: function get() {
                            return 0;
                        }
                    }
                ]), t1;
            }()).prototype, "seek", [
                M$
            ], Object.getOwnPropertyDescriptor(O$.prototype, "seek"), O$.prototype), y(O$.prototype, "play", [
                M$
            ], Object.getOwnPropertyDescriptor(O$.prototype, "play"), O$.prototype), y(O$.prototype, "pause", [
                M$
            ], Object.getOwnPropertyDescriptor(O$.prototype, "pause"), O$.prototype), y(O$.prototype, "stop", [
                M$
            ], Object.getOwnPropertyDescriptor(O$.prototype, "stop"), O$.prototype), O$), B$ = function() {
                function t1(t1) {
                    this.FT = void 0, this.sg = 0, this.UT = 0, this.lA = !0, this.FT = t1;
                }
                var i = t1.prototype;
                return i.destroy = function() {
                    this.FT = void 0;
                }, i.xT = function() {
                    return performance.now() / 1e3;
                }, i.jT = function() {
                    var _$t = this.xT() - this.sg, i = this.UT + _$t;
                    return i >= this.duration && (this.sg = this.xT(), this.UT = 0), i % this.duration;
                }, i.start = function() {
                    this.lA = !1, this.sg = this.xT();
                }, i.pause = function() {
                    this.lA || (this.lA = !0, this.UT = this.jT());
                }, i.stop = function() {
                    this.lA = !0, this.UT = 0;
                }, i.seek = function(t1) {
                    this.sg = this.xT(), this.UT = Un(t1, 0, this.duration);
                }, s(t1, [
                    {
                        key: "duration",
                        get: function get() {
                            return this.FT.duration;
                        }
                    },
                    {
                        key: "currentTime",
                        get: function get() {
                            return this.lA ? this.UT : this.jT();
                        }
                    }
                ]), t1;
            }(), F$ = new (function() {
                function t1() {
                    this.GT = {};
                }
                var i = t1.prototype;
                return i.HT = function(t1, i) {
                    this.GT[t1] ? nt(5204, t1) : this.GT[t1] = {
                        VT: 1,
                        WT: i
                    };
                }, i.zT = function(t1) {
                    var i = this.GT[t1];
                    i ? i.VT++ : nt(5203, t1);
                }, i.$T = function(t1) {
                    var i = this.GT[t1];
                    return null == i ? void 0 : i.WT;
                }, i.XT = function(t1) {
                    var i = this.GT[t1];
                    i ? --i.VT <= 0 && delete this.GT[t1] : nt(5203, t1);
                }, t1;
            }()), U$ = window.AudioContext || window.webkitAudioContext || window.mozAudioContext, x$ = "on-context-running", j$ = function() {
                function t1() {
                    var _$t = this;
                    this.Ne = void 0, this.zr = void 0, this.qT = !1, this.zr = new (window.AudioContext || window.webkitAudioContext || window.mozAudioContext), this.Ne = new se, this.zr.onstatechange = function() {
                        "running" === _$t.zr.state ? (_$t.qT = !0, _$t.Ne.emit(x$)) : _$t.qT = !1;
                    };
                }
                var i = t1.prototype;
                return i.onceRunning = function(t1, i) {
                    this.Ne.once(x$, t1, i);
                }, i.offRunning = function(t1, i) {
                    this.Ne.off(x$, t1, i);
                }, i.decodeAudioData = function(t1) {
                    var i = this;
                    return new Promise(function(n, s) {
                        var _$r = i.zr.decodeAudioData(t1, function(t1) {
                            n(t1);
                        }, function(t1) {
                            console.error("failed to load Web Audio", t1);
                        });
                        null == _$r || _$r.catch(s);
                    });
                }, i.runContext = function() {
                    var _$t = this;
                    return new Promise(function(i) {
                        if (_$t.isRunning) i();
                        else {
                            var n = _$t.zr;
                            if (n.resume) {
                                if ("suspended" === n.state) n.resume().catch(function(t1) {
                                    W("runContext error", t1);
                                });
                                else if ("running" === n.state) return void i();
                                var _$s = document.getElementById("GameCanvas"), _$r = function t1() {
                                    n.resume().then(function() {
                                        null == _$s || _$s.removeEventListener("touchend", t1, {
                                            capture: !0
                                        }), null == _$s || _$s.removeEventListener("mouseup", t1, {
                                            capture: !0
                                        }), i();
                                    }).catch(function(t1) {
                                        W("onGesture resume error", t1);
                                    });
                                };
                                null == _$s || _$s.addEventListener("touchend", _$r, {
                                    capture: !0
                                }), null == _$s || _$s.addEventListener("mouseup", _$r, {
                                    capture: !0
                                });
                            } else i();
                        }
                    });
                }, i.createBufferSource = function(t1, i) {
                    var n = this.zr.createBufferSource();
                    return void 0 !== t1 && (n.buffer = t1), void 0 !== i && (n.loop = i), n;
                }, i.createGain = function(t1) {
                    void 0 === t1 && (t1 = 1);
                    var i = this.zr.createGain();
                    return this.setGainValue(i, t1), i;
                }, i.setGainValue = function(t1, i) {
                    if (t1.gain.setTargetAtTime) try {
                        t1.gain.setTargetAtTime(i, this.zr.currentTime, 0);
                    } catch (n) {
                        t1.gain.setTargetAtTime(i, this.zr.currentTime, .01);
                    }
                    else t1.gain.value = i;
                }, i.connectContext = function(t1) {
                    this.zr && t1.connect(this.zr.destination);
                }, s(t1, [
                    {
                        key: "isRunning",
                        get: function get() {
                            return this.qT;
                        }
                    },
                    {
                        key: "currentTime",
                        get: function get() {
                            return this.zr.currentTime;
                        }
                    }
                ]), t1;
            }();
            j$.support = !!U$, j$.support && (P$ = new j$);
            var V$, W$, z$ = function() {
                function t1(t1, i, n) {
                    this.hE = void 0, this.YT = void 0, this.CT = void 0, this.KT = 0, this.JT = void 0, this.NT = void 0, this.hE = t1.duration, this.JT = n, this.YT = P$.createBufferSource(t1, !1);
                    var _$s = P$.createGain(i);
                    this.YT.connect(_$s), P$.connectContext(_$s);
                }
                var i = t1.prototype;
                return i.play = function() {
                    var _$t = this;
                    this.YT.start(), P$.runContext().then(function() {
                        null == _$t.onPlay || _$t.onPlay(), _$t.KT = window.setTimeout(function() {
                            F$.XT(_$t.JT), null == _$t.onEnd || _$t.onEnd();
                        }, 1e3 * _$t.hE);
                    }).catch(function(t1) {
                        W("play error", t1);
                    });
                }, i.stop = function() {
                    clearTimeout(this.KT), F$.XT(this.JT), this.YT.stop(), this.YT.disconnect(), this.YT.buffer = null;
                }, s(t1, [
                    {
                        key: "onPlay",
                        get: function get() {
                            return this.CT;
                        },
                        set: function set(t1) {
                            this.CT = t1;
                        }
                    },
                    {
                        key: "onEnd",
                        get: function get() {
                            return this.NT;
                        },
                        set: function set(t1) {
                            this.NT = t1;
                        }
                    }
                ]), t1;
            }(), $$ = (y((N$ = function() {
                function t1(t1, i) {
                    this.QT = void 0, this.ZT = void 0, this.tS = void 0, this.iS = void 0, this.KT = 0, this.nS = 1, this.sS = !1, this.PT = A$.INIT, this.rS = void 0, this.hS = void 0, this.Ne = new se, this.RT = [], this.ZT = t1, this.rS = new B$(t1), this.iS = P$.createGain(), P$.connectContext(this.iS), this.QT = i, iP.on(tP.EVENT_PAUSE, this.LT, this), iP.on(tP.EVENT_RESUME, this.BT, this);
                }
                var i = t1.prototype;
                return i.destroy = function() {
                    window.clearTimeout(this.KT), this.rS.destroy(), this.ZT && (this.ZT = null), F$.XT(this.QT), iP.off(tP.EVENT_PAUSE, this.LT, this), iP.off(tP.EVENT_RESUME, this.BT, this), this.uS();
                }, t1.load = function(i) {
                    return new Promise(function(n, s) {
                        t1.loadNative(i).then(function(s) {
                            n(new t1(s, i));
                        }).catch(s);
                    });
                }, t1.loadNative = function(t1) {
                    return new Promise(function(i, n) {
                        var _$s = F$.$T(t1);
                        if (_$s) return F$.zT(t1), void i(_$s);
                        var _$r = new XMLHttpRequest, h = "load audio failed: " + t1 + ", status: ";
                        _$r.open("GET", t1, !0), _$r.responseType = "arraybuffer", _$r.onload = function() {
                            200 === _$r.status || 0 === _$r.status ? P$.decodeAudioData(_$r.response).then(function(n) {
                                F$.HT(t1, n), i(n);
                            }).catch(function(i) {
                                W("loadNative error", t1, i);
                            }) : n(Error("" + h + _$r.status + "(no response)"));
                        }, _$r.onerror = function() {
                            n(Error("" + h + _$r.status + "(error)"));
                        }, _$r.ontimeout = function() {
                            n(Error("" + h + _$r.status + "(time out)"));
                        }, _$r.onabort = function() {
                            n(Error("" + h + _$r.status + "(abort)"));
                        }, _$r.send(null);
                    });
                }, t1.loadOneShotAudio = function(i, n) {
                    return new Promise(function(s, r) {
                        t1.loadNative(i).then(function(t1) {
                            s(new z$(t1, n, i));
                        }).catch(r);
                    });
                }, i.getPCMData = function(t1) {
                    return new T$(this.ZT.getChannelData(t1), 1);
                }, i.LT = function() {
                    var _$t = this;
                    this.PT === A$.PLAYING && this.pause().then(function() {
                        _$t.PT = A$.INTERRUPTED, _$t.Ne.emit(b$.INTERRUPTION_BEGIN);
                    }).catch(function(t1) {
                        W("_onInterruptedBegin error", t1);
                    });
                }, i.BT = function() {
                    var _$t = this;
                    this.PT === A$.INTERRUPTED && this.play().then(function() {
                        _$t.Ne.emit(b$.INTERRUPTION_END);
                    }).catch(function(t1) {
                        W("_onInterruptedEnd error", t1);
                    });
                }, i.uS = function() {
                    this.hS && (P$.offRunning(this.hS), this.hS = void 0);
                }, i.seek = function(t1) {
                    var i = this;
                    return new Promise(function(n) {
                        i.uS(), i.rS.seek(t1), i.PT === A$.PLAYING ? i.oS().then(n).catch(function(t1) {
                            W("seek error", t1);
                        }) : n();
                    });
                }, i.play = function() {
                    return this.uS(), this.oS();
                }, i.oS = function() {
                    var _$t = this;
                    return new Promise(function(i) {
                        P$.isRunning ? (_$t.fS(), i()) : (_$t.uS(), _$t.hS = function() {
                            _$t.fS(), i();
                        }, P$.onceRunning(_$t.hS), P$.runContext().catch(function(t1) {
                            W("doPlay error", t1);
                        }));
                    });
                }, i.fS = function() {
                    var _$t = this;
                    this.cS(), this.tS = P$.createBufferSource(this.ZT, this.loop), this.tS.connect(this.iS), this.tS.loop = this.sS, this.tS.start(0, this.rS.currentTime), this.PT = A$.PLAYING, this.rS.start(), window.clearTimeout(this.KT), this.KT = window.setTimeout(function i() {
                        _$t.loop ? _$t.KT = window.setTimeout(i, 1e3 * _$t.ZT.duration) : (_$t.rS.stop(), _$t.Ne.emit(b$.ENDED), _$t.PT = A$.INIT);
                    }, 1e3 * (this.ZT.duration - this.rS.currentTime));
                }, i.cS = function() {
                    try {
                        this.tS && (this.tS.stop(), this.tS.disconnect(), this.tS.buffer = null, this.tS = void 0);
                    } catch (t1) {}
                }, i.pause = function() {
                    return this.uS(), this.PT === A$.PLAYING && this.tS && (this.rS.pause(), this.PT = A$.PAUSED, window.clearTimeout(this.KT), this.cS()), Promise.resolve();
                }, i.stop = function() {
                    return this.uS(), this.tS ? (this.rS.stop(), this.PT = A$.STOPPED, window.clearTimeout(this.KT), this.cS()) : (this.rS.stop(), this.PT = A$.STOPPED), Promise.resolve();
                }, i.onInterruptionBegin = function(t1) {
                    this.Ne.on(b$.INTERRUPTION_BEGIN, t1);
                }, i.offInterruptionBegin = function(t1) {
                    this.Ne.off(b$.INTERRUPTION_BEGIN, t1);
                }, i.onInterruptionEnd = function(t1) {
                    this.Ne.on(b$.INTERRUPTION_END, t1);
                }, i.offInterruptionEnd = function(t1) {
                    this.Ne.off(b$.INTERRUPTION_END, t1);
                }, i.onEnded = function(t1) {
                    this.Ne.on(b$.ENDED, t1);
                }, i.offEnded = function(t1) {
                    this.Ne.off(b$.ENDED, t1);
                }, s(t1, [
                    {
                        key: "sampleRate",
                        get: function get() {
                            return this.ZT.sampleRate;
                        }
                    },
                    {
                        key: "src",
                        get: function get() {
                            return this.QT;
                        }
                    },
                    {
                        key: "type",
                        get: function get() {
                            return k$.WEB_AUDIO;
                        }
                    },
                    {
                        key: "state",
                        get: function get() {
                            return this.PT;
                        }
                    },
                    {
                        key: "loop",
                        get: function get() {
                            return this.sS;
                        },
                        set: function set(t1) {
                            this.sS = t1, this.tS && (this.tS.loop = t1);
                        }
                    },
                    {
                        key: "volume",
                        get: function get() {
                            return this.nS;
                        },
                        set: function set(t1) {
                            t1 = xn(t1), this.nS = t1, P$.setGainValue(this.iS, t1);
                        }
                    },
                    {
                        key: "duration",
                        get: function get() {
                            return this.ZT.duration;
                        }
                    },
                    {
                        key: "currentTime",
                        get: function get() {
                            return this.rS.currentTime;
                        }
                    }
                ]), t1;
            }()).prototype, "seek", [
                M$
            ], Object.getOwnPropertyDescriptor(N$.prototype, "seek"), N$.prototype), y(N$.prototype, "play", [
                M$
            ], Object.getOwnPropertyDescriptor(N$.prototype, "play"), N$.prototype), y(N$.prototype, "pause", [
                M$
            ], Object.getOwnPropertyDescriptor(N$.prototype, "pause"), N$.prototype), y(N$.prototype, "stop", [
                M$
            ], Object.getOwnPropertyDescriptor(N$.prototype, "stop"), N$.prototype), N$), X$ = function() {
                function t1(t1) {
                    this.vS = void 0, this.vS = t1;
                }
                var i = t1.prototype;
                return i.play = function() {
                    this.vS.play();
                }, i.stop = function() {
                    this.vS.stop();
                }, s(t1, [
                    {
                        key: "onPlay",
                        get: function get() {
                            return this.vS.onPlay;
                        },
                        set: function set(t1) {
                            this.vS.onPlay = t1;
                        }
                    },
                    {
                        key: "onEnd",
                        get: function get() {
                            return this.vS.onEnd;
                        },
                        set: function set(t1) {
                            this.vS.onEnd = t1;
                        }
                    }
                ]), t1;
            }(), q$ = function() {
                function t1(t1) {
                    this.lS = void 0, this.lS = t1;
                }
                t1.load = function(i, n) {
                    return new Promise(function(s, r) {
                        (null == n ? void 0 : n.audioLoadMode) !== k$.DOM_AUDIO && j$.support ? $$.load(i).then(function(i) {
                            s(new t1(i));
                        }).catch(r) : (j$.support || nt(5201), L$.load(i).then(function(i) {
                            s(new t1(i));
                        }).catch(r));
                    });
                };
                var i = t1.prototype;
                return i.destroy = function() {
                    this.lS.destroy();
                }, t1.loadNative = function(t1, i) {
                    return (null == i ? void 0 : i.audioLoadMode) !== k$.DOM_AUDIO && j$.support ? $$.loadNative(t1) : (j$.support || nt(5201), L$.loadNative(t1));
                }, t1.loadOneShotAudio = function(t1, i, n) {
                    return new Promise(function(s, r) {
                        (null == n ? void 0 : n.audioLoadMode) !== k$.DOM_AUDIO && j$.support ? $$.loadOneShotAudio(t1, i).then(function(t1) {
                            s(new X$(t1));
                        }).catch(r) : (j$.support || nt(5201), L$.loadOneShotAudio(t1, i).then(function(t1) {
                            s(new X$(t1));
                        }).catch(r));
                    });
                }, i.getPCMData = function(t1) {
                    return this.lS.getPCMData(t1);
                }, i.seek = function(t1) {
                    return this.lS.seek(t1);
                }, i.play = function() {
                    return this.lS.play();
                }, i.pause = function() {
                    return this.lS.pause();
                }, i.stop = function() {
                    return this.lS.stop();
                }, i.onInterruptionBegin = function(t1) {
                    this.lS.onInterruptionBegin(t1);
                }, i.offInterruptionBegin = function(t1) {
                    this.lS.offInterruptionBegin(t1);
                }, i.onInterruptionEnd = function(t1) {
                    this.lS.onInterruptionEnd(t1);
                }, i.offInterruptionEnd = function(t1) {
                    this.lS.offInterruptionEnd(t1);
                }, i.onEnded = function(t1) {
                    this.lS.onEnded(t1);
                }, i.offEnded = function(t1) {
                    this.lS.offEnded(t1);
                }, s(t1, [
                    {
                        key: "src",
                        get: function get() {
                            return this.lS.src;
                        }
                    },
                    {
                        key: "type",
                        get: function get() {
                            return this.lS.type;
                        }
                    },
                    {
                        key: "state",
                        get: function get() {
                            return this.lS.state;
                        }
                    },
                    {
                        key: "loop",
                        get: function get() {
                            return this.lS.loop;
                        },
                        set: function set(t1) {
                            this.lS.loop = t1;
                        }
                    },
                    {
                        key: "volume",
                        get: function get() {
                            return this.lS.volume;
                        },
                        set: function set(t1) {
                            this.lS.volume = t1;
                        }
                    },
                    {
                        key: "duration",
                        get: function get() {
                            return this.lS.duration;
                        }
                    },
                    {
                        key: "currentTime",
                        get: function get() {
                            return this.lS.currentTime;
                        }
                    },
                    {
                        key: "sampleRate",
                        get: function get() {
                            return this.lS.sampleRate;
                        }
                    }
                ]), t1;
            }();
            q$.maxAudioChannel = 24;
            var Y$ = t1("ad", go("cc.AudioClip")(((W$ = function(t1) {
                function i(i) {
                    var n;
                    return (n = t1.call(this, i) || this)._duration = V$ && V$(), n._loadMode = k$.UNKNOWN_AUDIO, n._meta = null, n.lS = null, n;
                }
                h(i, t1);
                var n = i.prototype;
                return n.destroy = function() {
                    var _$i, n = t1.prototype.destroy.call(this);
                    return null == (_$i = this.lS) || _$i.destroy(), this.lS = null, this._meta && (this._meta.player = null), n;
                }, n.validate = function() {
                    return !!this._meta;
                }, n.getDuration = function() {
                    return this._duration ? this._duration : this._meta ? this._meta.duration : 0;
                }, n.getCurrentTime = function() {
                    return this.lS ? this.lS.currentTime : 0;
                }, n.getVolume = function() {
                    return this.lS ? this.lS.volume : 0;
                }, n.getLoop = function() {
                    return !!this.lS && this.lS.loop;
                }, n.setCurrentTime = function(t1) {
                    var _$i;
                    null == (_$i = this.lS) || _$i.seek(t1).catch(function() {});
                }, n.setVolume = function(t1) {
                    this.lS && (this.lS.volume = t1);
                }, n.setLoop = function(t1) {
                    this.lS && (this.lS.loop = t1);
                }, n.play = function() {
                    var _$t;
                    null == (_$t = this.lS) || _$t.play().catch(function() {});
                }, n.pause = function() {
                    var _$t;
                    null == (_$t = this.lS) || _$t.pause().catch(function() {});
                }, n.stop = function() {
                    var _$t;
                    null == (_$t = this.lS) || _$t.stop().catch(function() {});
                }, n.playOneShot = function(t1) {
                    void 0 === t1 && (t1 = 1), this._nativeAsset && q$.loadOneShotAudio(this._nativeAsset.url, t1).then(function(t1) {
                        t1.play();
                    }).catch(function() {});
                }, s(i, [
                    {
                        key: "duration",
                        set: function set(t1) {
                            this._duration = t1;
                        }
                    },
                    {
                        key: "_nativeAsset",
                        get: function get() {
                            return this._meta;
                        },
                        set: function set(t1) {
                            this._meta = t1, t1 ? (this._loadMode = t1.type, this.lS = t1.player) : (this._meta = null, this._loadMode = k$.UNKNOWN_AUDIO, this._duration = 0);
                        }
                    },
                    {
                        key: "_nativeDep",
                        get: function get() {
                            return {
                                uuid: this._uuid,
                                audioLoadMode: this.loadMode,
                                ext: this._native,
                                __isNative__: !0
                            };
                        }
                    },
                    {
                        key: "loadMode",
                        get: function get() {
                            return this._loadMode;
                        }
                    },
                    {
                        key: "state",
                        get: function get() {
                            return this.lS ? this.lS.state : A$.INIT;
                        }
                    }
                ]), i;
            }(sg)).AudioType = k$, V$ = ho(W$.prototype, "_duration", [
                Ro
            ], function() {
                return 0;
            }), y(W$.prototype, "_nativeDep", [
                ff
            ], Object.getOwnPropertyDescriptor(W$.prototype, "_nativeDep"), W$.prototype), W$)) || W$);
            function K$(t1, i, n) {
                q$.load(t1, {
                    audioLoadMode: i.audioLoadMode
                }).then(function(i) {
                    n(null, {
                        player: i,
                        url: t1,
                        duration: i.duration,
                        type: i.type
                    });
                }).catch(function(t1) {
                    n(t1);
                });
            }
            function J$(t1, i, n, s) {
                var _$r = new Y$;
                _$r._nativeUrl = t1, _$r._nativeAsset = i, _$r.duration = i.duration, s(null, _$r);
            }
            A.AudioClip = Y$, $b.register({
                ".mp3": K$,
                ".ogg": K$,
                ".wav": K$,
                ".m4a": K$
            }), hk.register({
                ".mp3": J$,
                ".ogg": J$,
                ".wav": J$,
                ".m4a": J$
            });
            var Q$, Z$, tX, sX, rX, hX, eX, uX, oX = new (function() {
                function t1() {
                    this.dS = [], this.wS = [];
                }
                var i = t1.prototype;
                return i.gS = function(t1, i) {
                    return t1.findIndex(function(t1) {
                        return t1.pS === i;
                    });
                }, i.yS = function(t1, i) {
                    var n = this.gS(t1, i);
                    if (n > -1) return t1[n]._S = performance.now(), !1;
                    var s = {
                        pS: i,
                        _S: performance.now()
                    };
                    return t1.push(s), !0;
                }, i.mS = function(t1) {
                    _instanceof(t1, q$) ? this.yS(this.wS, t1) : this.yS(this.dS, t1);
                }, i.kS = function(t1, i) {
                    var n = this.gS(t1, i);
                    return -1 !== n && (ri(t1, n), !0);
                }, i.AS = function(t1) {
                    _instanceof(t1, q$) ? this.kS(this.wS, t1) : this.kS(this.dS, t1);
                }, i.ES = function() {
                    var _$t;
                    this.wS.length + this.dS.length < q$.maxAudioChannel || (this.dS.length > 0 ? this.dS.forEach(function(i) {
                        (!_$t || i._S < _$t._S) && (_$t = i);
                    }) : this.wS.forEach(function(i) {
                        (!_$t || i._S < _$t._S) && (_$t = i);
                    }), _$t && (_$t.pS.stop(), this.AS(_$t.pS)));
                }, i.TS = function() {
                    this.dS.forEach(function(t1) {
                        t1.pS.stop();
                    }), this.wS.forEach(function(t1) {
                        t1.pS.pause().catch(function() {});
                    });
                }, i.SS = function() {
                    this.wS.forEach(function(t1) {
                        t1.pS.play().catch(function() {});
                    });
                }, t1;
            }()), fX = "audiosource-loaded", cX = t1("ac", (Q$ = go("cc.AudioSource"), Z$ = Zo(Y$), tX = Zo(Y$), Q$(((uX = function(t1) {
                function i() {
                    var _$i;
                    return (_$i = t1.call(this) || this)._clip = sX && sX(), _$i._player = null, _$i.IS = !1, _$i._loop = rX && rX(), _$i._playOnAwake = hX && hX(), _$i._volume = eX && eX(), _$i.MS = -1, _$i.CS = [], _$i.NS = !1, _$i.PS = null, _$i;
                }
                h(i, t1);
                var n = i.prototype;
                return n.DS = function() {
                    this._player && (oX.AS(this._player), this.LS(), this._player.destroy(), this._player = null);
                }, n.BS = function() {
                    var _$t = this, _$i = this._clip;
                    if (this.PS !== _$i) return _$i ? void (_$i._nativeAsset ? (this.NS = !1, this.PS = _$i, this.CS.length = 0, q$.load(_$i._nativeAsset.url, {
                        audioLoadMode: _$i.loadMode
                    }).then(function(n) {
                        var _$s;
                        _$t.PS === _$i ? (_$t.NS = !0, _$t.DS(), _$t._player = n, _$t._syncStates(), null == (_$s = _$t.node) || _$s.emit(fX)) : n.destroy();
                    }).catch(function() {})) : console.error("Invalid audio clip")) : (this.PS = null, void this.DS());
                }, n.FS = function() {
                    var _$t = this;
                    if (!this.IS && this._player) {
                        var _$i = this._player;
                        _$i.onEnded(function() {
                            var n;
                            oX.AS(_$i), null == (n = _$t.node) || n.emit("ended", _$t);
                        }), _$i.onInterruptionBegin(function() {
                            oX.AS(_$i);
                        }), _$i.onInterruptionEnd(function() {
                            _$t._player === _$i && oX.mS(_$i);
                        }), this.IS = !0;
                    }
                }, n.LS = function() {
                    this._player && this.IS && (this._player.offEnded(), this._player.offInterruptionBegin(), this._player.offInterruptionEnd(), this.IS = !1);
                }, n.onLoad = function() {
                    this.BS();
                }, n.onEnable = function() {
                    this._playOnAwake && !this.playing && this.play();
                }, n.onDisable = function() {
                    var _$t = this.US();
                    null != _$t && _$t._persistNode || this.pause();
                }, n.onDestroy = function() {
                    this.stop(), this.clip = null;
                }, n.getPCMData = function(t1) {
                    var _$i = this;
                    return new Promise(function(n) {
                        var _$s;
                        0 !== t1 && 1 !== t1 ? (W("Only support channel index 0 or 1 to get buffer"), n(void 0)) : _$i._player ? n(_$i._player.getPCMData(t1)) : null == (_$s = _$i.node) || _$s.once(fX, function() {
                            var _$s;
                            n(null == (_$s = _$i._player) ? void 0 : _$s.getPCMData(t1));
                        });
                    });
                }, n.getSampleRate = function() {
                    var _$t = this;
                    return new Promise(function(i) {
                        var n;
                        _$t._player ? i(_$t._player.sampleRate) : null == (n = _$t.node) || n.once(fX, function() {
                            i(_$t._player.sampleRate);
                        });
                    });
                }, n.US = function() {
                    for(var _$r, _$h, e, _$t, _$i, n = this.node, _$s = null == (_$t = n) || null == (_$i = _$t.parent) ? void 0 : _$i.parent; _$s;)_$s = null == (_$h = n = null == (_$r = n) ? void 0 : _$r.parent) || null == (e = _$h.parent) ? void 0 : e.parent;
                    return n;
                }, n.play = function() {
                    var _$t = this;
                    if (this.NS || !this.clip) {
                        this.FS(), oX.ES(), this.state === A$.PLAYING && (null == (_$i = this._player) || _$i.stop().catch(function() {}));
                        var _$i, n = this._player;
                        n && (n.play().then(function() {
                            var _$i;
                            null == (_$i = _$t.node) || _$i.emit("started", _$t);
                        }).catch(function() {
                            oX.AS(n);
                        }), oX.mS(n));
                    } else this.CS.push({
                        op: "play",
                        params: null
                    });
                }, n.pause = function() {
                    var _$t;
                    this.NS || !this.clip ? null == (_$t = this._player) || _$t.pause().catch(function() {}) : this.CS.push({
                        op: "pause",
                        params: null
                    });
                }, n.stop = function() {
                    this.NS || !this.clip ? this._player && (this._player.stop().catch(function() {}), oX.AS(this._player)) : this.CS.push({
                        op: "stop",
                        params: null
                    });
                }, n.playOneShot = function(t1, i) {
                    var n;
                    void 0 === i && (i = 1), t1._nativeAsset ? q$.loadOneShotAudio(t1._nativeAsset.url, this._volume * i, {
                        audioLoadMode: t1.loadMode
                    }).then(function(t1) {
                        n = t1, oX.ES(), t1.onEnd = function() {
                            oX.AS(t1);
                        }, t1.play(), oX.mS(t1);
                    }).catch(function() {
                        n && oX.AS(n);
                    }) : console.error("Invalid audio clip");
                }, n._syncStates = function() {
                    var _$t = this;
                    this._player && (this._player.loop = this._loop, this._player.volume = this._volume, this.CS.forEach(function(i) {
                        var n;
                        "seek" === i.op ? (_$t.MS = i.params && i.params[0], _$t._player && _$t._player.seek(_$t.MS).catch(function() {})) : null == (n = _$t[i.op]) || n.call(_$t);
                    }), this.CS.length = 0);
                }, s(i, [
                    {
                        key: "clip",
                        get: function get() {
                            return this._clip;
                        },
                        set: function set(t1) {
                            t1 !== this._clip && (this._clip = t1, this.BS());
                        }
                    },
                    {
                        key: "loop",
                        get: function get() {
                            return this._loop;
                        },
                        set: function set(t1) {
                            this._loop = t1, this._player && (this._player.loop = t1);
                        }
                    },
                    {
                        key: "playOnAwake",
                        get: function get() {
                            return this._playOnAwake;
                        },
                        set: function set(t1) {
                            this._playOnAwake = t1;
                        }
                    },
                    {
                        key: "volume",
                        get: function get() {
                            return this._volume;
                        },
                        set: function set(t1) {
                            Number.isNaN(t1) ? W("illegal audio volume!") : (t1 = Un(t1, 0, 1), this._player ? (this._player.volume = t1, this._volume = this._player.volume) : this._volume = t1);
                        }
                    },
                    {
                        key: "currentTime",
                        get: function get() {
                            return this._player ? this._player.currentTime : this.MS < 0 ? 0 : this.MS;
                        },
                        set: function set(t1) {
                            var _$i;
                            Number.isNaN(t1) ? W("illegal audio time!") : (t1 = Un(t1, 0, this.duration), this.NS || !this.clip ? (this.MS = t1, null == (_$i = this._player) || _$i.seek(this.MS).catch(function() {})) : this.CS.push({
                                op: "seek",
                                params: [
                                    t1
                                ]
                            }));
                        }
                    },
                    {
                        key: "duration",
                        get: function get() {
                            var _$t, _$i;
                            return null != (_$t = null == (_$i = this._clip) ? void 0 : _$i.getDuration()) ? _$t : this._player ? this._player.duration : 0;
                        }
                    },
                    {
                        key: "state",
                        get: function get() {
                            return this._player ? this._player.state : A$.INIT;
                        }
                    },
                    {
                        key: "playing",
                        get: function get() {
                            return this.state === i.AudioState.PLAYING;
                        }
                    }
                ], [
                    {
                        key: "maxAudioChannel",
                        get: function get() {
                            return q$.maxAudioChannel;
                        }
                    }
                ]), i;
            }(Yg)).AudioState = A$, uX.EventType = {
                STARTED: "started",
                ENDED: "ended"
            }, sX = ho(uX.prototype, "_clip", [
                Z$
            ], function() {
                return null;
            }), rX = ho(uX.prototype, "_loop", [
                Ro
            ], function() {
                return !1;
            }), hX = ho(uX.prototype, "_playOnAwake", [
                Ro
            ], function() {
                return !0;
            }), eX = ho(uX.prototype, "_volume", [
                Ro
            ], function() {
                return 1;
            }), y(uX.prototype, "clip", [
                tX
            ], Object.getOwnPropertyDescriptor(uX.prototype, "clip"), uX.prototype), uX)) || uX));
            A.AudioSourceComponent = cX, qt(cX, "cc.AudioSourceComponent"), A.log = V, A.warn = W, A.error = z, A.assert = $, A._throw = Y, A.logID = Q, A.warnID = nt, A.errorID = rt, A.assertID = et, A.debug = vt, A.path = {
                join: qa,
                extname: Ya,
                mainFileName: Ka,
                basename: Ja,
                dirname: Qa,
                changeExtname: Za,
                changeBasename: tv,
                _normalize: iv,
                stripSep: nv,
                get sep () {
                    return sv();
                }
            };
            var lX = [];
            function dX(t1) {
                return "function" == typeof t1._instantiate;
            }
            function wX(t1) {
                var i;
                if (Xh(t1)) {
                    if (dX(t1)) return A.game._isCloning = !0, i = t1._instantiate(null, !0), A.game._isCloning = !1, i;
                    if (_instanceof(t1, A.Asset)) throw TypeError(ot(6903));
                }
                return A.game._isCloning = !0, i = gX(t1), A.game._isCloning = !1, i;
            }
            function gX(t1, i) {
                var n;
                yX(t1, n = t1._iN$t ? t1._iN$t : t1.constructor ? new (0, t1.constructor) : Object.create(null), i);
                for(var s = 0, _$r = lX.length; s < _$r; ++s)lX[s]._iN$t = null;
                return lX.length = 0, n;
            }
            function pX(t1, i, n, s) {
                for(var _$r = t1.__values__, h = 0; h < _$r.length; h++){
                    var e = _$r[h], u = i[e];
                    if ("object" == (void 0 === u ? "undefined" : _type_of(u)) && u) {
                        var o = n[e];
                        _instanceof(o, mi) && o.constructor === u.constructor ? o.set(u) : n[e] = u._iN$t || _X(u, s);
                    } else n[e] = u;
                }
            }
            function yX(t1, i, n) {
                kt(t1, "_iN$t", i, !0), lX.push(t1);
                var s = t1.constructor;
                if (En(s)) pX(s, t1, i, n);
                else for(var _$r in t1)if (t1.hasOwnProperty(_$r) && (95 !== _$r.charCodeAt(0) || 95 !== _$r.charCodeAt(1) || "__type__" === _$r || "__prefab" === _$r)) {
                    var h = t1[_$r];
                    if ("object" == (void 0 === h ? "undefined" : _type_of(h)) && h) {
                        if (h === i) continue;
                        i[_$r] = h._iN$t || _X(h, n);
                    } else i[_$r] = h;
                }
                Xh(t1) && (i._objFlags &= -4192741);
            }
            function _X(t1, i) {
                if (_instanceof(t1, mi)) return t1.clone();
                if (_instanceof(t1, A.Asset)) return t1;
                if (ArrayBuffer.isView(t1)) {
                    var s = t1.length;
                    n = new t1.constructor(s), t1._iN$t = n, lX.push(t1);
                    for(var _$r = 0; _$r < s; ++_$r)n[_$r] = t1[_$r];
                    return n;
                }
                if (Array.isArray(t1)) {
                    var h = t1.length;
                    t1._iN$t = n = Array(h), lX.push(t1);
                    for(var e = 0; e < h; ++e){
                        var u = t1[e];
                        n[e] = "object" == (void 0 === u ? "undefined" : _type_of(u)) && u ? u._iN$t || _X(u, i) : u;
                    }
                    return n;
                }
                if (1 & t1._objFlags) return null;
                var n, o, f = t1.constructor;
                if (En(f)) {
                    if (i) {
                        if (_instanceof(i, Yg)) {
                            if (_instanceof(t1, VE) || _instanceof(t1, Yg)) return t1;
                        } else if (_instanceof(i, VE)) {
                            if (_instanceof(t1, VE)) {
                                if (!(t1.isChildOf(i) || "object" == _type_of(o = t1[jh]) && o.mountedRoot)) return t1;
                            } else if (_instanceof(t1, Yg) && t1.node && !t1.node.isChildOf(i)) return t1;
                        }
                    }
                    n = new f;
                } else if (f === Object) n = {};
                else {
                    if (f) return t1;
                    n = Object.create(null);
                }
                return yX(t1, n, i), n;
            }
            wX._clone = gX, A.instantiate = wX, A.NodePool = t1("dR", function() {
                function t1(t1) {
                    this.S = [], this.poolHandlerComp = t1;
                }
                var i = t1.prototype;
                return i.size = function() {
                    return this.S.length;
                }, i.clear = function() {
                    for(var _$t = this.S.length, i = 0; i < _$t; ++i)this.S[i].destroy();
                    this.S.length = 0;
                }, i.put = function(t1) {
                    if (t1 && -1 === this.S.indexOf(t1)) {
                        t1.removeFromParent();
                        var i = this.poolHandlerComp ? t1.getComponent(this.poolHandlerComp) : null;
                        i && i.unuse && i.unuse(), this.S.push(t1);
                    }
                }, i.get = function() {
                    for(var _$t = arguments.length, i = Array(_$t), n = 0; n < _$t; n++)i[n] = arguments[n];
                    var s = this.S.length - 1;
                    if (s < 0) return null;
                    var _$r = this.S[s];
                    this.S.length = s;
                    var h = this.poolHandlerComp ? _$r.getComponent(this.poolHandlerComp) : null;
                    return h && h.reuse && h.reuse(arguments), _$r;
                }, t1;
            }());
            var AX = null != (mX = globalThis.jsb) ? mX : {};
            t1("e7", {
                DownloaderHints: AX.DownloaderHints,
                Downloader: AX.Downloader,
                zipUtils: AX.zipUtils,
                fileUtils: AX.fileUtils,
                DebugRenderer: AX.DebugRenderer,
                copyTextToClipboard: null == (bX = AX.copyTextToClipboard) ? void 0 : bX.bind(AX),
                garbageCollect: AX.garbageCollect,
                reflection: AX.reflection,
                bridge: AX.bridge,
                jsbBridgeWrapper: AX.jsbBridgeWrapper,
                AssetsManager: AX.AssetsManager,
                EventAssetsManager: AX.EventAssetsManager,
                Manifest: AX.Manifest,
                saveImageData: AX.saveImageData,
                process: AX.process,
                adpf: AX.adpf
            }), A.renderer = kx;
            var EX = function() {
                function t1(t1, i, n, s) {
                    void 0 === t1 && (t1 = null), void 0 === i && (i = 0), void 0 === n && (n = !1), void 0 === s && (s = null), this.light = t1, this.probe = s, this.level = i, this.culledByLight = n;
                }
                return t1.prototype.reset = function(t1, i, n, s) {
                    this.light = t1, this.probe = s, this.level = i, this.culledByLight = n;
                }, t1;
            }(), TX = function() {
                function t1(t1, i, n, s, r) {
                    void 0 === t1 && (t1 = ""), void 0 === i && (i = ""), void 0 === n && (n = 0), void 0 === s && (s = 1), void 0 === r && (r = 1), this.source = t1, this.target = i, this.resolveFlags = n, this.mode = s, this.mode1 = r;
                }
                return t1.prototype.reset = function(t1, i, n, s, r) {
                    this.source = t1, this.target = i, this.resolveFlags = n, this.mode = s, this.mode1 = r;
                }, t1;
            }(), SX = function() {
                function t1(t1, i, n, s, r, h, e, u, o, f) {
                    void 0 === t1 && (t1 = ""), void 0 === i && (i = ""), void 0 === n && (n = 4294967295), void 0 === s && (s = 4294967295), void 0 === r && (r = 0), void 0 === h && (h = 0), void 0 === e && (e = 0), void 0 === u && (u = 0), void 0 === o && (o = 0), void 0 === f && (f = 0), this.source = t1, this.target = i, this.mipLevels = n, this.numSlices = s, this.sourceMostDetailedMip = r, this.sourceFirstSlice = h, this.sourcePlaneSlice = e, this.targetMostDetailedMip = u, this.targetFirstSlice = o, this.targetPlaneSlice = f;
                }
                return t1.prototype.reset = function(t1, i, n, s, r, h, e, u, o, f) {
                    this.source = t1, this.target = i, this.mipLevels = n, this.numSlices = s, this.sourceMostDetailedMip = r, this.sourceFirstSlice = h, this.sourcePlaneSlice = e, this.targetMostDetailedMip = u, this.targetFirstSlice = o, this.targetPlaneSlice = f;
                }, t1;
            }(), OX = function() {
                function t1(t1, i, n, s, r, h, e) {
                    void 0 === t1 && (t1 = new Uint8Array(0)), void 0 === i && (i = ""), void 0 === n && (n = 4294967295), void 0 === s && (s = 4294967295), void 0 === r && (r = 0), void 0 === h && (h = 0), void 0 === e && (e = 0), this.source = t1, this.target = i, this.mipLevels = n, this.numSlices = s, this.targetMostDetailedMip = r, this.targetFirstSlice = h, this.targetPlaneSlice = e;
                }
                return t1.prototype.reset = function(t1, i, n, s, r, h) {
                    this.target = t1, this.mipLevels = i, this.numSlices = n, this.targetMostDetailedMip = s, this.targetFirstSlice = r, this.targetPlaneSlice = h;
                }, t1;
            }(), IX = function() {
                function t1(t1, i, n, s, r, h, e) {
                    void 0 === t1 && (t1 = ""), void 0 === i && (i = ""), void 0 === n && (n = 4294967295), void 0 === s && (s = 4294967295), void 0 === r && (r = 0), void 0 === h && (h = 0), void 0 === e && (e = 0), this.source = t1, this.target = i, this.mipLevels = n, this.numSlices = s, this.targetMostDetailedMip = r, this.targetFirstSlice = h, this.targetPlaneSlice = e;
                }
                return t1.prototype.reset = function(t1, i, n, s, r, h, e) {
                    this.source = t1, this.target = i, this.mipLevels = n, this.numSlices = s, this.targetMostDetailedMip = r, this.targetFirstSlice = h, this.targetPlaneSlice = e;
                }, t1;
            }(), RX = function() {
                function t1() {
                    this.numRenderPasses = 0, this.numManagedTextures = 0, this.totalManagedTextures = 0, this.numUploadBuffers = 0, this.numUploadBufferViews = 0, this.numFreeUploadBuffers = 0, this.numFreeUploadBufferViews = 0, this.numDescriptorSets = 0, this.numFreeDescriptorSets = 0, this.numInstancingBuffers = 0, this.numInstancingUniformBlocks = 0;
                }
                return t1.prototype.reset = function() {
                    this.numRenderPasses = 0, this.numManagedTextures = 0, this.totalManagedTextures = 0, this.numUploadBuffers = 0, this.numUploadBufferViews = 0, this.numFreeUploadBuffers = 0, this.numFreeUploadBufferViews = 0, this.numDescriptorSets = 0, this.numFreeDescriptorSets = 0, this.numInstancingBuffers = 0, this.numInstancingUniformBlocks = 0;
                }, t1;
            }();
            function MX(t1) {
                return new Uh(function() {
                    return new t1;
                }, 16);
            }
            var mX, bX, CX, NX, PX, DX = function() {
                function t1() {
                    this.xS = MX(EX), this.jS = MX(TX), this.GS = MX(SX), this.HS = MX(OX), this.VS = MX(IX), this.WS = MX(RX);
                }
                var i = t1.prototype;
                return i.reset = function() {
                    this.xS.reset(), this.jS.reset(), this.GS.reset(), this.HS.reset(), this.VS.reset(), this.WS.reset();
                }, i.createLightInfo = function(t1, i, n, s) {
                    void 0 === t1 && (t1 = null), void 0 === i && (i = 0), void 0 === n && (n = !1), void 0 === s && (s = null);
                    var _$r = this.xS.add();
                    return _$r.reset(t1, i, n, s), _$r;
                }, i.createResolvePair = function(t1, i, n, s, r) {
                    void 0 === t1 && (t1 = ""), void 0 === i && (i = ""), void 0 === n && (n = 0), void 0 === s && (s = 1), void 0 === r && (r = 1);
                    var h = this.jS.add();
                    return h.reset(t1, i, n, s, r), h;
                }, i.createCopyPair = function(t1, i, n, s, r, h, e, u, o, f) {
                    void 0 === t1 && (t1 = ""), void 0 === i && (i = ""), void 0 === n && (n = 4294967295), void 0 === s && (s = 4294967295), void 0 === r && (r = 0), void 0 === h && (h = 0), void 0 === e && (e = 0), void 0 === u && (u = 0), void 0 === o && (o = 0), void 0 === f && (f = 0);
                    var _$c = this.GS.add();
                    return _$c.reset(t1, i, n, s, r, h, e, u, o, f), _$c;
                }, i.createUploadPair = function(t1, i, n, s, r, h) {
                    void 0 === t1 && (t1 = ""), void 0 === i && (i = 4294967295), void 0 === n && (n = 4294967295), void 0 === s && (s = 0), void 0 === r && (r = 0), void 0 === h && (h = 0);
                    var e = this.HS.add();
                    return e.reset(t1, i, n, s, r, h), e;
                }, i.createMovePair = function(t1, i, n, s, r, h, e) {
                    void 0 === t1 && (t1 = ""), void 0 === i && (i = ""), void 0 === n && (n = 4294967295), void 0 === s && (s = 4294967295), void 0 === r && (r = 0), void 0 === h && (h = 0), void 0 === e && (e = 0);
                    var u = this.VS.add();
                    return u.reset(t1, i, n, s, r, h, e), u;
                }, i.createPipelineStatistics = function() {
                    var _$t = this.WS.add();
                    return _$t.reset(), _$t;
                }, t1;
            }(), LX = function() {
                function t1(t1, i) {
                    this.source = void 0, this.target = void 0, this.source = t1, this.target = i;
                }
                return t1.prototype.equals = function(t1) {
                    return this.source === t1.source && this.target === t1.target;
                }, t1;
            }(), BX = function() {
                function t1(t1) {
                    this.target = void 0, this.target = t1;
                }
                return t1.prototype.equals = function(t1) {
                    return this.target === t1.target;
                }, t1;
            }();
            CX = Symbol.iterator;
            var FX = function() {
                function t1(t1, i) {
                    this.iterator = void 0, this.source = void 0, this.iterator = t1, this.source = i;
                }
                var i = t1.prototype;
                return i[CX] = function() {
                    return this;
                }, i.next = function() {
                    var _$t = this.iterator.next();
                    return _$t.done ? {
                        value: void 0,
                        done: !0
                    } : {
                        value: new LX(this.source, _$t.value.target),
                        done: !1
                    };
                }, t1;
            }();
            NX = Symbol.iterator;
            var UX = function() {
                function t1(t1, i) {
                    this.iterator = void 0, this.source = void 0, this.iterator = t1, this.source = i;
                }
                var i = t1.prototype;
                return i[NX] = function() {
                    return this;
                }, i.next = function() {
                    var _$t = this.iterator.next();
                    return _$t.done ? {
                        value: void 0,
                        done: !0
                    } : {
                        value: new LX(_$t.value.target, this.source),
                        done: !1
                    };
                }, t1;
            }();
            PX = Symbol.iterator;
            var xX = function() {
                function t1(t1, i) {
                    this.graph = void 0, this.iterator = void 0, this.graph = t1, this.iterator = i;
                }
                var i = t1.prototype;
                return i[PX] = function() {
                    return this;
                }, i.next = function() {
                    var _$t = this.iterator.next();
                    return _$t.done ? {
                        value: void 0,
                        done: !0
                    } : {
                        value: this.graph.target(_$t.value),
                        done: !1
                    };
                }, t1;
            }();
            function jX(t1, i) {
                if (i === t1.N) return "";
                for(var n = []; i !== t1.N; i = t1.getParent(i))n.push(t1.vertexName(i));
                for(var s = "", _$r = n.length; _$r-- > 0;)s += "/", s += n[_$r];
                return s;
            }
            function GX(t1, i, n) {
                var s = t1.N, _$r = n.split("/");
                if (0 === _$r.length) return i;
                var h = i, e = 0;
                "" === _$r[0] && (h = s, ++e);
                for(var u = e; u !== _$r.length; ++u){
                    var o = _$r[u];
                    if ("" !== o && "." !== o) if (".." !== o) {
                        if ((h = t1.locateChild(h, o)) === s) return s;
                    } else {
                        if (h === s) return s;
                        h = t1.getParent(h);
                    }
                }
                return h;
            }
            var HX = function() {
                function t1() {}
                return t1.prototype.terminate = function() {
                    return !1;
                }, t1;
            }();
            function VX(t1) {
                var i = t1.v().next();
                return i.done ? t1.N : i.value;
            }
            var WX = function WX(t1, i, n) {
                this.v = void 0, this.e = void 0, this.iter = void 0, this.v = t1, this.e = i, this.iter = n;
            };
            function zX(t1, i, n, s, r) {
                var h = null, e = null, u = [];
                for(s.put(i, 1), n.discoverVertex(i, t1), e = t1.oe(i), r.terminate(i, t1) ? u.push(new WX(i, null, null)) : u.push(new WX(i, null, e)); u.length;){
                    var o = u.pop();
                    if (i = o.v, h = o.e, e = o.iter, null !== h && n.finishEdge(h, t1), e) for(var f = e.next(); !f.done; f = e.next()){
                        var _$c = f.value, a = _$c.target;
                        n.examineEdge(_$c, t1);
                        var v = s.get(a);
                        if (0 === v) {
                            if (n.treeEdge(_$c, t1), h = _$c, u.push(new WX(i, h, e)), i = a, s.put(i, 1), n.discoverVertex(i, t1), e = t1.oe(i), r.terminate(i, t1)) break;
                        } else 1 === v ? n.backEdge(_$c, t1) : n.forwardOrCrossEdge(_$c, t1), n.finishEdge(_$c, t1);
                    }
                    s.put(i, 4), n.finishVertex(i, t1);
                }
            }
            function $X(t1, i, n, s) {
                if (void 0 === s && (s = null), null !== (s = s || VX(t1)) && 0 !== t1.nv()) {
                    for(var _$r, h = d(t1.v()); !(_$r = h()).done;){
                        var e = _$r.value;
                        n.put(e, 0), i.initializeVertex(e, t1);
                    }
                    var u = new HX;
                    s !== VX(t1) && (i.startVertex(s, t1), zX(t1, s, i, n, u));
                    for(var o, f = d(t1.v()); !(o = f()).done;){
                        var _$c = o.value;
                        0 === n.get(_$c) && (i.startVertex(_$c, t1), zX(t1, _$c, i, n, u));
                    }
                }
            }
            var XX = function() {
                function t1() {}
                var i = t1.prototype;
                return i.initializeVertex = function() {}, i.startVertex = function() {}, i.discoverVertex = function() {}, i.examineEdge = function() {}, i.treeEdge = function() {}, i.backEdge = function() {}, i.forwardOrCrossEdge = function() {}, i.finishEdge = function() {}, i.finishVertex = function() {}, t1;
            }(), qX = function() {
                function t1(t1) {
                    this.g = void 0, this.g = t1, this.N = t1.N;
                }
                var i = t1.prototype;
                return i.edge = function(t1, i) {
                    return this.g.reference(t1, i);
                }, i.source = function(t1) {
                    return this.g.parent(t1);
                }, i.target = function(t1) {
                    return this.g.child(t1);
                }, i.oe = function(t1) {
                    return this.g.children(t1);
                }, i.od = function(t1) {
                    return this.g.numChildren(t1);
                }, i.v = function() {
                    return this.g.v();
                }, i.nv = function() {
                    return this.g.nv();
                }, t1;
            }();
            function YX(t1) {
                t1.x = 0, t1.y = 0, t1.z = 0, t1.w = 0;
            }
            function KX(t1) {
                t1.left = 0, t1.top = 0, t1.width = 0, t1.height = 0, t1.minDepth = 0, t1.maxDepth = 1;
            }
            var JX = function() {
                function t1(t1, i, n, s) {
                    void 0 === t1 && (t1 = 0), void 0 === i && (i = 0), void 0 === n && (n = 0), void 0 === s && (s = 0), this.x = t1, this.y = i, this.z = n, this.w = s;
                }
                return t1.prototype.reset = function(t1, i, n, s) {
                    this.x = t1, this.y = i, this.z = n, this.w = s;
                }, t1;
            }(), QX = function() {
                function t1(t1, i, n, s, r, h, e, u) {
                    void 0 === t1 && (t1 = ""), void 0 === i && (i = 2), void 0 === n && (n = 0), void 0 === s && (s = 0), void 0 === r && (r = 0), void 0 === h && (h = 7), void 0 === e && (e = new xl), void 0 === u && (u = 0), this.slotName1 = "", this.slotID = 0, this.slotName = t1, this.accessType = i, this.attachmentType = n, this.loadOp = s, this.storeOp = r, this.clearFlags = h, this.clearColor = e, this.shaderStageFlags = u;
                }
                return t1.prototype.reset = function(t1, i, n, s, r, h, e) {
                    this.slotName = t1, this.slotName1 = "", this.accessType = i, this.attachmentType = n, this.loadOp = s, this.storeOp = r, this.clearFlags = h, YX(this.clearColor), this.slotID = 0, this.shaderStageFlags = e;
                }, t1;
            }(), ZX = function() {
                function t1(t1, i, n, s, r, h) {
                    void 0 === t1 && (t1 = ""), void 0 === i && (i = 0), void 0 === n && (n = 0), void 0 === s && (s = 0), void 0 === r && (r = new JX), void 0 === h && (h = 0), this.plane = 0, this.name = t1, this.accessType = i, this.clearFlags = n, this.clearValueType = s, this.clearValue = r, this.shaderStageFlags = h;
                }
                return t1.prototype.reset = function(t1, i, n, s, r) {
                    this.name = t1, this.accessType = i, this.plane = 0, this.clearFlags = n, this.clearValueType = s, this.clearValue.reset(0, 0, 0, 0), this.shaderStageFlags = r;
                }, t1;
            }(), tq = function() {
                function t1() {
                    this.dimension = 0, this.alignment = 0, this.width = 0, this.height = 0, this.depthOrArraySize = 0, this.mipLevels = 0, this.format = 0, this.sampleCount = 1, this.textureFlags = 0, this.flags = 0, this.viewType = 1;
                }
                return t1.prototype.reset = function() {
                    this.dimension = 0, this.alignment = 0, this.width = 0, this.height = 0, this.depthOrArraySize = 0, this.mipLevels = 0, this.format = 0, this.sampleCount = 1, this.textureFlags = 0, this.flags = 0, this.viewType = 1;
                }, t1;
            }(), iq = function() {
                function t1(t1) {
                    void 0 === t1 && (t1 = 0), this.residency = t1;
                }
                return t1.prototype.reset = function(t1) {
                    this.residency = t1;
                }, t1;
            }(), nq = function() {
                function t1(t1, i) {
                    void 0 === t1 && (t1 = null), void 0 === i && (i = !1), this.renderWindow = null, this.currentID = 0, this.numBackBuffers = 0, this.generation = 4294967295, this.swapchain = t1, this.isDepthStencil = i;
                }
                return t1.prototype.reset = function(t1, i) {
                    this.swapchain = t1, this.renderWindow = null, this.currentID = 0, this.numBackBuffers = 0, this.generation = 4294967295, this.isDepthStencil = i;
                }, t1;
            }(), sq = function() {
                function t1() {
                    this.states = 0;
                }
                return t1.prototype.reset = function() {
                    this.states = 0;
                }, t1;
            }(), rq = function() {
                function t1(t1) {
                    void 0 === t1 && (t1 = null), this.fenceValue = 0, this.buffer = t1;
                }
                return t1.prototype.reset = function(t1) {
                    this.buffer = t1, this.fenceValue = 0;
                }, t1;
            }(), hq = function() {
                function t1(t1) {
                    void 0 === t1 && (t1 = null), this.fenceValue = 0, this.buffer = t1;
                }
                return t1.prototype.reset = function(t1) {
                    this.buffer = t1, this.fenceValue = 0;
                }, t1;
            }(), eq = function() {
                function t1(t1) {
                    void 0 === t1 && (t1 = null), this.fenceValue = 0, this.texture = t1;
                }
                return t1.prototype.reset = function(t1) {
                    this.texture = t1, this.fenceValue = 0;
                }, t1;
            }(), uq = function() {
                function t1(t1) {
                    void 0 === t1 && (t1 = null), this.fenceValue = 0, this.texture = t1;
                }
                return t1.prototype.reset = function(t1) {
                    this.texture = t1, this.fenceValue = 0;
                }, t1;
            }(), oq = function() {
                function t1() {
                    this.unused = 0;
                }
                return t1.prototype.reset = function() {
                    this.unused = 0;
                }, t1;
            }(), fq = function() {
                function t1() {
                    this.rasterViews = new Map, this.computeViews = new Map, this.resolvePairs = [];
                }
                return t1.prototype.reset = function() {
                    this.rasterViews.clear(), this.computeViews.clear(), this.resolvePairs.length = 0;
                }, t1;
            }(), cq = function cq() {
                this.o = [], this.i = [];
            }, aq = function() {
                function t1() {
                    this.N = 4294967295, this.x = [], this._names = [], this._subpasses = [];
                }
                var i = t1.prototype;
                return i.edge = function(t1, i) {
                    for(var n, s = d(this.x[t1].o); !(n = s()).done;)if (i === n.value.target) return !0;
                    return !1;
                }, i.source = function(t1) {
                    return t1.source;
                }, i.target = function(t1) {
                    return t1.target;
                }, i.oe = function(t1) {
                    return new FX(this.x[t1].o.values(), t1);
                }, i.od = function(t1) {
                    return this.x[t1].o.length;
                }, i.ie = function(t1) {
                    return new UX(this.x[t1].i.values(), t1);
                }, i.id = function(t1) {
                    return this.x[t1].i.length;
                }, i.d = function(t1) {
                    return this.od(t1) + this.id(t1);
                }, i.adj = function(t1) {
                    return new xX(this, this.oe(t1));
                }, i.v = function() {
                    return this.x.keys();
                }, i.nv = function() {
                    return this.x.length;
                }, i.ne = function() {
                    for(var _$t, i = 0, n = d(this.v()); !(_$t = n()).done;){
                        var s = _$t.value;
                        i += this.od(s);
                    }
                    return i;
                }, i.clear = function() {
                    this._names.length = 0, this._subpasses.length = 0, this.x.length = 0;
                }, i.addVertex = function(t1, i) {
                    var n = new cq, s = this.x.length;
                    return this.x.push(n), this._names.push(t1), this._subpasses.push(i), s;
                }, i.addEdge = function(t1, i) {
                    return this.x[t1].o.push(new BX(i)), this.x[i].i.push(new BX(t1)), new LX(t1, i);
                }, i.vertexName = function(t1) {
                    return this._names[t1];
                }, i.getName = function(t1) {
                    return this._names[t1];
                }, i.setName = function(t1, i) {
                    this._names[t1] = i;
                }, i.getSubpass = function(t1) {
                    return this._subpasses[t1];
                }, t1;
            }(), vq = function() {
                function t1(t1, i, n) {
                    void 0 === t1 && (t1 = 4294967295), void 0 === i && (i = 1), void 0 === n && (n = 0), this.rasterViews = new Map, this.computeViews = new Map, this.resolvePairs = [], this.viewport = new Ul, this.showStatistics = !1, this.subpassID = t1, this.count = i, this.quality = n;
                }
                return t1.prototype.reset = function(t1, i, n) {
                    this.rasterViews.clear(), this.computeViews.clear(), this.resolvePairs.length = 0, KX(this.viewport), this.subpassID = t1, this.count = i, this.quality = n, this.showStatistics = !1;
                }, t1;
            }(), lq = function() {
                function t1(t1) {
                    void 0 === t1 && (t1 = 4294967295), this.rasterViews = new Map, this.computeViews = new Map, this.subpassID = t1;
                }
                return t1.prototype.reset = function(t1) {
                    this.rasterViews.clear(), this.computeViews.clear(), this.subpassID = t1;
                }, t1;
            }(), dq = function() {
                function t1() {
                    this.rasterViews = new Map, this.computeViews = new Map, this.attachmentIndexMap = new Map, this.textures = new Map, this.subpassGraph = new aq, this.width = 0, this.height = 0, this.count = 1, this.quality = 0, this.viewport = new Ul, this.versionName = "", this.version = 0, this.hashValue = 0, this.showStatistics = !1;
                }
                return t1.prototype.reset = function() {
                    this.rasterViews.clear(), this.computeViews.clear(), this.attachmentIndexMap.clear(), this.textures.clear(), this.subpassGraph.clear(), this.width = 0, this.height = 0, this.count = 1, this.quality = 0, KX(this.viewport), this.versionName = "", this.version = 0, this.hashValue = 0, this.showStatistics = !1;
                }, t1;
            }(), wq = function() {
                function t1(t1, i) {
                    void 0 === t1 && (t1 = null), void 0 === i && (i = null), this.clearColors = [], this.clearDepth = 0, this.clearStencil = 0, this.renderPass = t1, this.framebuffer = i;
                }
                return t1.prototype.reset = function(t1, i) {
                    this.renderPass = t1, this.framebuffer = i, this.clearColors.length = 0, this.clearDepth = 0, this.clearStencil = 0;
                }, t1;
            }(), gq = function() {
                function t1() {
                    this.format = 0;
                }
                return t1.prototype.reset = function() {
                    this.format = 0;
                }, t1;
            }(), pq = function() {
                function t1() {
                    this.textureView = null, this.format = 0, this.indexOrFirstMipLevel = 0, this.numMipLevels = 0, this.firstArraySlice = 0, this.numArraySlices = 0, this.firstPlane = 0, this.numPlanes = 0;
                }
                return t1.prototype.reset = function() {
                    this.textureView = null, this.format = 0, this.indexOrFirstMipLevel = 0, this.numMipLevels = 0, this.firstArraySlice = 0, this.numArraySlices = 0, this.firstPlane = 0, this.numPlanes = 0;
                }, t1;
            }(), yq = function yq(t1, i) {
                this.o = [], this.i = [], this.t = void 0, this.j = void 0, this.id = t1, this.object = i, this.t = t1, this.j = i;
            }, _q = function() {
                function t1() {
                    this.N = 4294967295, this.x = [], this._names = [], this._descs = [], this._traits = [], this._states = [], this._samplerInfo = [], this._valueIndex = new Map, this.renderPasses = new Map, this.nextFenceValue = 0, this.version = 0;
                }
                var i = t1.prototype;
                return i.edge = function(t1, i) {
                    for(var n, s = d(this.x[t1].o); !(n = s()).done;)if (i === n.value.target) return !0;
                    return !1;
                }, i.source = function(t1) {
                    return t1.source;
                }, i.target = function(t1) {
                    return t1.target;
                }, i.oe = function(t1) {
                    return new FX(this.x[t1].o.values(), t1);
                }, i.od = function(t1) {
                    return this.x[t1].o.length;
                }, i.ie = function(t1) {
                    return new UX(this.x[t1].i.values(), t1);
                }, i.id = function(t1) {
                    return this.x[t1].i.length;
                }, i.d = function(t1) {
                    return this.od(t1) + this.id(t1);
                }, i.adj = function(t1) {
                    return new xX(this, this.oe(t1));
                }, i.v = function() {
                    return this.x.keys();
                }, i.nv = function() {
                    return this.x.length;
                }, i.ne = function() {
                    for(var _$t, i = 0, n = d(this.v()); !(_$t = n()).done;){
                        var s = _$t.value;
                        i += this.od(s);
                    }
                    return i;
                }, i.clear = function() {
                    this.renderPasses.clear(), this.nextFenceValue = 0, this.version = 0, this._valueIndex.clear(), this._names.length = 0, this._descs.length = 0, this._traits.length = 0, this._states.length = 0, this._samplerInfo.length = 0, this.x.length = 0;
                }, i.addVertex = function(t1, i, n, s, r, h, e, u) {
                    void 0 === u && (u = 4294967295);
                    var o = new yq(t1, i), f = this.x.length;
                    return this.x.push(o), this._names.push(n), this._descs.push(s), this._traits.push(r), this._states.push(h), this._samplerInfo.push(e), this._valueIndex.set(n, f), 4294967295 !== u && this.addEdge(u, f), f;
                }, i.addEdge = function(t1, i) {
                    return this.x[t1].o.push(new BX(i)), this.x[i].i.push(new BX(t1)), new LX(t1, i);
                }, i.vertexName = function(t1) {
                    return this._names[t1];
                }, i.getName = function(t1) {
                    return this._names[t1];
                }, i.setName = function(t1, i) {
                    this._names[t1] = i;
                }, i.getDesc = function(t1) {
                    return this._descs[t1];
                }, i.getTraits = function(t1) {
                    return this._traits[t1];
                }, i.getStates = function(t1) {
                    return this._states[t1];
                }, i.getSampler = function(t1) {
                    return this._samplerInfo[t1];
                }, i.h = function(t1, i) {
                    return this.x[i].t === t1;
                }, i.w = function(t1) {
                    return this.x[t1].t;
                }, i.object = function(t1) {
                    return this.x[t1].j;
                }, i.value = function(t1, i) {
                    if (this.x[i].t === t1) return this.x[i].j;
                    throw Error("value id not match");
                }, i.visitVertex = function(t1, i) {
                    var n = this.x[i];
                    switch(n.t){
                        case 0:
                            return t1.managed(n.j);
                        case 1:
                            return t1.managedBuffer(n.j);
                        case 2:
                            return t1.managedTexture(n.j);
                        case 3:
                            return t1.persistentBuffer(n.j);
                        case 4:
                            return t1.persistentTexture(n.j);
                        case 5:
                            return t1.framebuffer(n.j);
                        case 6:
                            return t1.swapchain(n.j);
                        case 7:
                            return t1.formatView(n.j);
                        case 8:
                            return t1.subresourceView(n.j);
                        default:
                            throw Error("polymorphic type not found");
                    }
                }, i.j = function(t1) {
                    return this.x[t1].j;
                }, i.reference = function(t1, i) {
                    for(var n, s = d(this.x[t1].o); !(n = s()).done;)if (i === n.value.target) return !0;
                    return !1;
                }, i.parent = function(t1) {
                    return t1.source;
                }, i.child = function(t1) {
                    return t1.target;
                }, i.children = function(t1) {
                    return new FX(this.x[t1].o.values(), t1);
                }, i.numChildren = function(t1) {
                    return this.x[t1].o.length;
                }, i.getParent = function(t1) {
                    if (4294967295 === t1) return 4294967295;
                    var i = this.x[t1].i;
                    return 0 === i.length ? 4294967295 : i[0].target;
                }, i.addReference = function(t1, i) {
                    return this.addEdge(t1, i);
                }, i.contains = function(t1) {
                    return this._valueIndex.has(t1);
                }, i.vertex = function(t1) {
                    return this._valueIndex.get(t1);
                }, i.find = function(t1) {
                    var i = this._valueIndex.get(t1);
                    return void 0 === i ? 4294967295 : i;
                }, t1;
            }(), mq = function() {
                function t1() {
                    this.computeViews = new Map, this.textures = new Map;
                }
                return t1.prototype.reset = function() {
                    this.computeViews.clear(), this.textures.clear();
                }, t1;
            }(), bq = function() {
                function t1() {
                    this.resolvePairs = [];
                }
                return t1.prototype.reset = function() {
                    this.resolvePairs.length = 0;
                }, t1;
            }(), kq = function() {
                function t1() {
                    this.copyPairs = [], this.uploadPairs = [];
                }
                return t1.prototype.reset = function() {
                    this.copyPairs.length = 0, this.uploadPairs.length = 0;
                }, t1;
            }(), Aq = function() {
                function t1() {
                    this.movePairs = [];
                }
                return t1.prototype.reset = function() {
                    this.movePairs.length = 0;
                }, t1;
            }(), Eq = function() {
                function t1() {
                    this.computeViews = new Map;
                }
                return t1.prototype.reset = function() {
                    this.computeViews.clear();
                }, t1;
            }(), Tq = function() {
                function t1(t1, i, n) {
                    void 0 === t1 && (t1 = ""), void 0 === i && (i = 7), void 0 === n && (n = new xl), this.slotName = t1, this.clearFlags = i, this.clearColor = n;
                }
                return t1.prototype.reset = function(t1, i) {
                    this.slotName = t1, this.clearFlags = i, YX(this.clearColor);
                }, t1;
            }(), Sq = function() {
                function t1(t1, i, n) {
                    void 0 === t1 && (t1 = 1), void 0 === i && (i = 4294967295), void 0 === n && (n = 4294967295), this.viewport = null, this.hint = t1, this.phaseID = i, this.passLayoutID = n;
                }
                return t1.prototype.reset = function(t1, i, n) {
                    this.hint = t1, this.phaseID = i, this.passLayoutID = n, this.viewport = null;
                }, t1;
            }(), Oq = function() {
                function t1(t1, i, n, s, r, h) {
                    void 0 === t1 && (t1 = null), void 0 === i && (i = null), void 0 === n && (n = 0), void 0 === s && (s = new EX), void 0 === r && (r = 1), void 0 === h && (h = null), this.scene = t1, this.camera = i, this.light = s, this.flags = n, this.cullingFlags = r, this.shadingLight = h;
                }
                return t1.prototype.reset = function(t1, i, n, s, r) {
                    this.scene = t1, this.camera = i, this.light.reset(null, 0, !1, null), this.flags = n, this.cullingFlags = s, this.shadingLight = r;
                }, t1;
            }(), Iq = function() {
                function t1(t1, i, n, s, r) {
                    void 0 === t1 && (t1 = null), void 0 === i && (i = 0), void 0 === n && (n = 0), void 0 === s && (s = 0), void 0 === r && (r = 0), this.material = t1, this.passID = i, this.threadGroupCountX = n, this.threadGroupCountY = s, this.threadGroupCountZ = r;
                }
                return t1.prototype.reset = function(t1, i, n, s, r) {
                    this.material = t1, this.passID = i, this.threadGroupCountX = n, this.threadGroupCountY = s, this.threadGroupCountZ = r;
                }, t1;
            }(), Rq = function() {
                function t1(t1, i, n, s, r) {
                    void 0 === t1 && (t1 = null), void 0 === i && (i = 0), void 0 === n && (n = 0), void 0 === s && (s = null), void 0 === r && (r = 0), this.models = [], this.material = t1, this.passID = i, this.sceneFlags = n, this.camera = s, this.blitType = r;
                }
                return t1.prototype.reset = function(t1, i, n, s, r) {
                    this.material = t1, this.passID = i, this.sceneFlags = n, this.camera = s, this.blitType = r, this.models.length = 0;
                }, t1;
            }(), Mq = function() {
                function t1() {
                    this.constants = new Map, this.buffers = new Map, this.textures = new Map, this.samplers = new Map, this.custom = "";
                }
                return t1.prototype.reset = function() {
                    this.constants.clear(), this.buffers.clear(), this.textures.clear(), this.samplers.clear(), this.custom = "";
                }, t1;
            }(), Cq = function Cq(t1, i) {
                this.o = [], this.i = [], this.c = [], this.p = [], this.t = void 0, this.j = void 0, this.id = t1, this.object = i, this.t = t1, this.j = i;
            }, Nq = function() {
                function t1() {
                    this.N = 4294967295, this.x = [], this._names = [], this._layoutNodes = [], this._data = [], this._valid = [], this.index = new Map, this.sortedVertices = [], this.globalRenderData = new Mq;
                }
                var i = t1.prototype;
                return i.edge = function(t1, i) {
                    for(var n, s = d(this.x[t1].o); !(n = s()).done;)if (i === n.value.target) return !0;
                    return !1;
                }, i.source = function(t1) {
                    return t1.source;
                }, i.target = function(t1) {
                    return t1.target;
                }, i.oe = function(t1) {
                    return new FX(this.x[t1].o.values(), t1);
                }, i.od = function(t1) {
                    return this.x[t1].o.length;
                }, i.ie = function(t1) {
                    return new UX(this.x[t1].i.values(), t1);
                }, i.id = function(t1) {
                    return this.x[t1].i.length;
                }, i.d = function(t1) {
                    return this.od(t1) + this.id(t1);
                }, i.adj = function(t1) {
                    return new xX(this, this.oe(t1));
                }, i.v = function() {
                    return this.x.keys();
                }, i.nv = function() {
                    return this.x.length;
                }, i.ne = function() {
                    for(var _$t, i = 0, n = d(this.v()); !(_$t = n()).done;){
                        var s = _$t.value;
                        i += this.od(s);
                    }
                    return i;
                }, i.clear = function() {
                    this.index.clear(), this.sortedVertices.length = 0, this.globalRenderData.reset(), this._names.length = 0, this._layoutNodes.length = 0, this._data.length = 0, this._valid.length = 0, this.x.length = 0;
                }, i.addVertex = function(t1, i, n, s, r, h, e) {
                    void 0 === e && (e = 4294967295);
                    var u = new Cq(t1, i), o = this.x.length;
                    return this.x.push(u), this._names.push(n), this._layoutNodes.push(s), this._data.push(r), this._valid.push(h), 4294967295 !== e && (this.x[e].c.push(new BX(o)), u.p.push(new BX(e))), o;
                }, i.addEdge = function(t1, i) {
                    return this.x[t1].o.push(new BX(i)), this.x[i].i.push(new BX(t1)), new LX(t1, i);
                }, i.vertexName = function(t1) {
                    return this._names[t1];
                }, i.getName = function(t1) {
                    return this._names[t1];
                }, i.setName = function(t1, i) {
                    this._names[t1] = i;
                }, i.getLayout = function(t1) {
                    return this._layoutNodes[t1];
                }, i.setLayout = function(t1, i) {
                    this._layoutNodes[t1] = i;
                }, i.getData = function(t1) {
                    return this._data[t1];
                }, i.getValid = function(t1) {
                    return this._valid[t1];
                }, i.setValid = function(t1, i) {
                    this._valid[t1] = i;
                }, i.h = function(t1, i) {
                    return this.x[i].t === t1;
                }, i.w = function(t1) {
                    return this.x[t1].t;
                }, i.object = function(t1) {
                    return this.x[t1].j;
                }, i.value = function(t1, i) {
                    if (this.x[i].t === t1) return this.x[i].j;
                    throw Error("value id not match");
                }, i.visitVertex = function(t1, i) {
                    var n = this.x[i];
                    switch(n.t){
                        case 0:
                            return t1.rasterPass(n.j);
                        case 1:
                            return t1.rasterSubpass(n.j);
                        case 2:
                            return t1.computeSubpass(n.j);
                        case 3:
                            return t1.compute(n.j);
                        case 4:
                            return t1.resolve(n.j);
                        case 5:
                            return t1.copy(n.j);
                        case 6:
                            return t1.move(n.j);
                        case 7:
                            return t1.raytrace(n.j);
                        case 8:
                            return t1.queue(n.j);
                        case 9:
                            return t1.scene(n.j);
                        case 10:
                            return t1.blit(n.j);
                        case 11:
                            return t1.dispatch(n.j);
                        case 12:
                            return t1.clear(n.j);
                        case 13:
                            return t1.viewport(n.j);
                        default:
                            throw Error("polymorphic type not found");
                    }
                }, i.j = function(t1) {
                    return this.x[t1].j;
                }, i.reference = function(t1, i) {
                    for(var n, s = d(this.x[t1].c); !(n = s()).done;)if (i === n.value.target) return !0;
                    return !1;
                }, i.parent = function(t1) {
                    return t1.source;
                }, i.child = function(t1) {
                    return t1.target;
                }, i.children = function(t1) {
                    return new FX(this.x[t1].c.values(), t1);
                }, i.numChildren = function(t1) {
                    return this.x[t1].c.length;
                }, i.getParent = function(t1) {
                    if (4294967295 === t1) return 4294967295;
                    var i = this.x[t1].p;
                    return 0 === i.length ? 4294967295 : i[0].target;
                }, i.addReference = function(t1, i) {
                    return this.x[t1].c.push(new BX(i)), this.x[i].p.push(new BX(t1)), new LX(t1, i);
                }, t1;
            }();
            function Pq(t1) {
                return new Uh(function() {
                    return new t1;
                }, 16);
            }
            var Dq = function() {
                function t1(t1) {
                    this.renderCommon = void 0, this.zS = Pq(JX), this.$S = Pq(QX), this.XS = Pq(ZX), this.qS = Pq(tq), this.YS = Pq(iq), this.KS = Pq(nq), this.JS = Pq(sq), this.QS = Pq(rq), this.ZS = Pq(hq), this.tO = Pq(eq), this.iO = Pq(uq), this.nO = Pq(oq), this.sO = Pq(fq), this.rO = Pq(aq), this.hO = Pq(vq), this.eO = Pq(lq), this.jS = Pq(dq), this.uO = Pq(wq), this.oO = Pq(gq), this.fO = Pq(pq), this.cO = Pq(_q), this.GS = Pq(mq), this.vO = Pq(bq), this.lO = Pq(kq), this.VS = Pq(Aq), this.dO = Pq(Eq), this.wO = Pq(Tq), this.gO = Pq(Sq), this.pO = Pq(Oq), this.yO = Pq(Iq), this._O = Pq(Rq), this.mO = Pq(Mq), this.kO = Pq(Nq), this.renderCommon = t1;
                }
                var i = t1.prototype;
                return i.reset = function() {
                    this.zS.reset(), this.$S.reset(), this.XS.reset(), this.qS.reset(), this.YS.reset(), this.KS.reset(), this.JS.reset(), this.QS.reset(), this.ZS.reset(), this.tO.reset(), this.iO.reset(), this.nO.reset(), this.sO.reset(), this.rO.reset(), this.hO.reset(), this.eO.reset(), this.jS.reset(), this.uO.reset(), this.oO.reset(), this.fO.reset(), this.cO.reset(), this.GS.reset(), this.vO.reset(), this.lO.reset(), this.VS.reset(), this.dO.reset(), this.wO.reset(), this.gO.reset(), this.pO.reset(), this.yO.reset(), this._O.reset(), this.mO.reset(), this.kO.reset();
                }, i.createClearValue = function(t1, i, n, s) {
                    void 0 === t1 && (t1 = 0), void 0 === i && (i = 0), void 0 === n && (n = 0), void 0 === s && (s = 0);
                    var _$r = this.zS.add();
                    return _$r.reset(t1, i, n, s), _$r;
                }, i.createRasterView = function(t1, i, n, s, r, h, e) {
                    void 0 === t1 && (t1 = ""), void 0 === i && (i = 2), void 0 === n && (n = 0), void 0 === s && (s = 0), void 0 === r && (r = 0), void 0 === h && (h = 7), void 0 === e && (e = 0);
                    var u = this.$S.add();
                    return u.reset(t1, i, n, s, r, h, e), u;
                }, i.createComputeView = function(t1, i, n, s, r) {
                    void 0 === t1 && (t1 = ""), void 0 === i && (i = 0), void 0 === n && (n = 0), void 0 === s && (s = 0), void 0 === r && (r = 0);
                    var h = this.XS.add();
                    return h.reset(t1, i, n, s, r), h;
                }, i.createResourceDesc = function() {
                    var _$t = this.qS.add();
                    return _$t.reset(), _$t;
                }, i.createResourceTraits = function(t1) {
                    void 0 === t1 && (t1 = 0);
                    var i = this.YS.add();
                    return i.reset(t1), i;
                }, i.createRenderSwapchain = function(t1, i) {
                    void 0 === t1 && (t1 = null), void 0 === i && (i = !1);
                    var n = this.KS.add();
                    return n.reset(t1, i), n;
                }, i.createResourceStates = function() {
                    var _$t = this.JS.add();
                    return _$t.reset(), _$t;
                }, i.createManagedBuffer = function(t1) {
                    void 0 === t1 && (t1 = null);
                    var i = this.QS.add();
                    return i.reset(t1), i;
                }, i.createPersistentBuffer = function(t1) {
                    void 0 === t1 && (t1 = null);
                    var i = this.ZS.add();
                    return i.reset(t1), i;
                }, i.createManagedTexture = function(t1) {
                    void 0 === t1 && (t1 = null);
                    var i = this.tO.add();
                    return i.reset(t1), i;
                }, i.createPersistentTexture = function(t1) {
                    void 0 === t1 && (t1 = null);
                    var i = this.iO.add();
                    return i.reset(t1), i;
                }, i.createManagedResource = function() {
                    var _$t = this.nO.add();
                    return _$t.reset(), _$t;
                }, i.createSubpass = function() {
                    var _$t = this.sO.add();
                    return _$t.reset(), _$t;
                }, i.createSubpassGraph = function() {
                    var _$t = this.rO.add();
                    return _$t.clear(), _$t;
                }, i.createRasterSubpass = function(t1, i, n) {
                    void 0 === t1 && (t1 = 4294967295), void 0 === i && (i = 1), void 0 === n && (n = 0);
                    var s = this.hO.add();
                    return s.reset(t1, i, n), s;
                }, i.createComputeSubpass = function(t1) {
                    void 0 === t1 && (t1 = 4294967295);
                    var i = this.eO.add();
                    return i.reset(t1), i;
                }, i.createRasterPass = function() {
                    var _$t = this.jS.add();
                    return _$t.reset(), _$t;
                }, i.createPersistentRenderPassAndFramebuffer = function(t1, i) {
                    void 0 === t1 && (t1 = null), void 0 === i && (i = null);
                    var n = this.uO.add();
                    return n.reset(t1, i), n;
                }, i.createFormatView = function() {
                    var _$t = this.oO.add();
                    return _$t.reset(), _$t;
                }, i.createSubresourceView = function() {
                    var _$t = this.fO.add();
                    return _$t.reset(), _$t;
                }, i.createResourceGraph = function() {
                    var _$t = this.cO.add();
                    return _$t.clear(), _$t;
                }, i.createComputePass = function() {
                    var _$t = this.GS.add();
                    return _$t.reset(), _$t;
                }, i.createResolvePass = function() {
                    var _$t = this.vO.add();
                    return _$t.reset(), _$t;
                }, i.createCopyPass = function() {
                    var _$t = this.lO.add();
                    return _$t.reset(), _$t;
                }, i.createMovePass = function() {
                    var _$t = this.VS.add();
                    return _$t.reset(), _$t;
                }, i.createRaytracePass = function() {
                    var _$t = this.dO.add();
                    return _$t.reset(), _$t;
                }, i.createClearView = function(t1, i) {
                    void 0 === t1 && (t1 = ""), void 0 === i && (i = 7);
                    var n = this.wO.add();
                    return n.reset(t1, i), n;
                }, i.createRenderQueue = function(t1, i, n) {
                    void 0 === t1 && (t1 = 1), void 0 === i && (i = 4294967295), void 0 === n && (n = 4294967295);
                    var s = this.gO.add();
                    return s.reset(t1, i, n), s;
                }, i.createSceneData = function(t1, i, n, s, r) {
                    void 0 === t1 && (t1 = null), void 0 === i && (i = null), void 0 === n && (n = 0), void 0 === s && (s = 1), void 0 === r && (r = null);
                    var h = this.pO.add();
                    return h.reset(t1, i, n, s, r), h;
                }, i.createDispatch = function(t1, i, n, s, r) {
                    void 0 === t1 && (t1 = null), void 0 === i && (i = 0), void 0 === n && (n = 0), void 0 === s && (s = 0), void 0 === r && (r = 0);
                    var h = this.yO.add();
                    return h.reset(t1, i, n, s, r), h;
                }, i.createBlit = function(t1, i, n, s, r) {
                    void 0 === t1 && (t1 = null), void 0 === i && (i = 0), void 0 === n && (n = 0), void 0 === s && (s = null), void 0 === r && (r = 0);
                    var h = this._O.add();
                    return h.reset(t1, i, n, s, r), h;
                }, i.createRenderData = function() {
                    var _$t = this.mO.add();
                    return _$t.reset(), _$t;
                }, i.createRenderGraph = function() {
                    var _$t = this.kO.add();
                    return _$t.clear(), _$t;
                }, t1;
            }(), Lq = function Lq() {
                this.subpass = 0;
            };
            function Bq(t1, i) {
                i.name = t1.s(), i.type = t1.n(), i.count = t1.n();
            }
            function Fq(t1, i) {
                var n;
                i.set = t1.n(), i.binding = t1.n(), i.name = t1.s(), n = t1.n(), i.members.length = n;
                for(var s = 0; s !== n; ++s){
                    var _$r = new Ql;
                    Bq(t1, _$r), i.members[s] = _$r;
                }
                i.count = t1.n();
            }
            function Uq(t1, i) {
                i.binding = t1.n(), i.descriptorType = t1.n(), i.count = t1.n(), i.stageFlags = t1.n();
            }
            function xq(t1, i) {
                var n = t1.n();
                i.bindings.length = n;
                for(var s = 0; s !== n; ++s){
                    var _$r = new md;
                    Uq(t1, _$r), i.bindings[s] = _$r;
                }
            }
            var jq = function jq() {};
            jq.type = 0, jq.isWebGPU = !1;
            var Gq = function() {
                function t1(t1, i, n) {
                    void 0 === t1 && (t1 = 0), void 0 === i && (i = 0), void 0 === n && (n = 1), this.descriptorID = t1, this.type = i, this.count = n;
                }
                return t1.prototype.reset = function(t1, i, n) {
                    this.descriptorID = t1, this.type = i, this.count = n;
                }, t1;
            }(), Hq = function() {
                function t1(t1, i, n, s, r, h, e) {
                    void 0 === t1 && (t1 = 0), void 0 === i && (i = 0), void 0 === n && (n = 0), void 0 === s && (s = 1), void 0 === r && (r = 0), void 0 === h && (h = 0), void 0 === e && (e = 0), this.offset = 0, this.descriptors = [], this.type = t1, this.visibility = i, this.capacity = n, this.accessType = s, this.viewDimension = r, this.sampleType = h, this.format = e;
                }
                return t1.prototype.reset = function(t1, i, n, s, r, h, e) {
                    this.type = t1, this.visibility = i, this.offset = 0, this.capacity = n, this.accessType = s, this.viewDimension = r, this.sampleType = h, this.format = e, this.descriptors.length = 0;
                }, t1;
            }(), Vq = function() {
                function t1(t1, i, n, s, r) {
                    void 0 === t1 && (t1 = 4294967295), void 0 === i && (i = 0), void 0 === n && (n = []), void 0 === s && (s = new Map), void 0 === r && (r = new Map), this.uniformBlockCapacity = 0, this.samplerTextureCapacity = 0, this.slot = t1, this.capacity = i, this.descriptorBlocks = n, this.uniformBlocks = s, this.bindingMap = r;
                }
                return t1.prototype.reset = function(t1, i) {
                    this.slot = t1, this.capacity = i, this.uniformBlockCapacity = 0, this.samplerTextureCapacity = 0, this.descriptorBlocks.length = 0, this.uniformBlocks.clear(), this.bindingMap.clear();
                }, t1;
            }(), Wq = function() {
                function t1(t1, i, n) {
                    void 0 === t1 && (t1 = new Vq), void 0 === i && (i = null), void 0 === n && (n = null), this.descriptorSetLayoutInfo = new bd, this.descriptorSetLayoutData = t1, this.descriptorSetLayout = i, this.descriptorSet = n;
                }
                return t1.prototype.reset = function(t1, i) {
                    this.descriptorSetLayoutData.reset(4294967295, 0), this.descriptorSetLayoutInfo.bindings.length = 0, this.descriptorSetLayout = t1, this.descriptorSet = i;
                }, t1;
            }(), zq = function() {
                function t1() {
                    this.descriptorSets = new Map, this.descriptorGroups = new Map;
                }
                var i = t1.prototype;
                return i.reset = function() {
                    this.descriptorSets.clear(), this.descriptorGroups.clear();
                }, i.getSets = function() {
                    return jq.isWebGPU ? this.descriptorGroups : this.descriptorSets;
                }, i.getSet = function(t1) {
                    return jq.isWebGPU ? this.descriptorGroups.get(t1) : this.descriptorSets.get(t1);
                }, t1;
            }(), $q = function() {
                function t1() {
                    this.descriptorBindings = new Map;
                }
                return t1.prototype.reset = function() {
                    this.descriptorBindings.clear();
                }, t1;
            }(), Xq = function() {
                function t1() {
                    this.layoutData = new Map, this.bindingData = new Map;
                }
                return t1.prototype.reset = function() {
                    this.layoutData.clear(), this.bindingData.clear();
                }, t1;
            }(), qq = function() {
                function t1() {
                    this.passes = [];
                }
                return t1.prototype.reset = function() {
                    this.passes.length = 0;
                }, t1;
            }(), Yq = function() {
                function t1() {
                    this.techniques = new Map;
                }
                return t1.prototype.reset = function() {
                    this.techniques.clear();
                }, t1;
            }(), Kq = function() {
                function t1() {
                    this.layout = new zq, this.pipelineLayout = null;
                }
                return t1.prototype.reset = function() {
                    this.layout.reset(), this.pipelineLayout = null;
                }, t1;
            }(), Jq = function() {
                function t1() {
                    this.descriptorVisibility = new Map;
                }
                return t1.prototype.reset = function() {
                    this.descriptorVisibility.clear();
                }, t1;
            }(), Qq = function() {
                function t1() {
                    this.rootSignature = "", this.shaderPrograms = [], this.shaderIndex = new Map, this.pipelineLayout = null;
                }
                return t1.prototype.reset = function() {
                    this.rootSignature = "", this.shaderPrograms.length = 0, this.shaderIndex.clear(), this.pipelineLayout = null;
                }, t1;
            }(), Zq = function Zq(t1, i) {
                this.o = [], this.i = [], this.t = void 0, this.j = void 0, this.id = t1, this.object = i, this.t = t1, this.j = i;
            }, tY = function() {
                function t1() {
                    this.N = 4294967295, this.x = [], this._names = [], this._updateFrequencies = [], this._layouts = [], this.valueNames = [], this.attributeIndex = new Map, this.constantIndex = new Map, this.shaderLayoutIndex = new Map, this.effects = new Map, this.constantMacros = "";
                }
                var i = t1.prototype;
                return i.edge = function(t1, i) {
                    for(var n, s = d(this.x[t1].o); !(n = s()).done;)if (i === n.value.target) return !0;
                    return !1;
                }, i.source = function(t1) {
                    return t1.source;
                }, i.target = function(t1) {
                    return t1.target;
                }, i.oe = function(t1) {
                    return new FX(this.x[t1].o.values(), t1);
                }, i.od = function(t1) {
                    return this.x[t1].o.length;
                }, i.ie = function(t1) {
                    return new UX(this.x[t1].i.values(), t1);
                }, i.id = function(t1) {
                    return this.x[t1].i.length;
                }, i.d = function(t1) {
                    return this.od(t1) + this.id(t1);
                }, i.adj = function(t1) {
                    return new xX(this, this.oe(t1));
                }, i.v = function() {
                    return this.x.keys();
                }, i.nv = function() {
                    return this.x.length;
                }, i.ne = function() {
                    for(var _$t, i = 0, n = d(this.v()); !(_$t = n()).done;){
                        var s = _$t.value;
                        i += this.od(s);
                    }
                    return i;
                }, i.clear = function() {
                    this.valueNames.length = 0, this.attributeIndex.clear(), this.constantIndex.clear(), this.shaderLayoutIndex.clear(), this.effects.clear(), this.constantMacros = "", this._names.length = 0, this._updateFrequencies.length = 0, this._layouts.length = 0, this.x.length = 0;
                }, i.addVertex = function(t1, i, n, s, r, h) {
                    void 0 === h && (h = 4294967295);
                    var e = new Zq(t1, i), u = this.x.length;
                    return this.x.push(e), this._names.push(n), this._updateFrequencies.push(s), this._layouts.push(r), 4294967295 !== h && this.addEdge(h, u), u;
                }, i.addEdge = function(t1, i) {
                    return this.x[t1].o.push(new BX(i)), this.x[i].i.push(new BX(t1)), new LX(t1, i);
                }, i.vertexName = function(t1) {
                    return this._names[t1];
                }, i.getName = function(t1) {
                    return this._names[t1];
                }, i.getUpdate = function(t1) {
                    return this._updateFrequencies[t1];
                }, i.setUpdate = function(t1, i) {
                    this._updateFrequencies[t1] = i;
                }, i.getLayout = function(t1) {
                    return this._layouts[t1];
                }, i.h = function(t1, i) {
                    return this.x[i].t === t1;
                }, i.w = function(t1) {
                    return this.x[t1].t;
                }, i.object = function(t1) {
                    return this.x[t1].j;
                }, i.value = function(t1, i) {
                    if (this.x[i].t === t1) return this.x[i].j;
                    throw Error("value id not match");
                }, i.visitVertex = function(t1, i) {
                    var n = this.x[i];
                    switch(n.t){
                        case 0:
                            return t1.renderStage(n.j);
                        case 1:
                            return t1.renderPhase(n.j);
                        default:
                            throw Error("polymorphic type not found");
                    }
                }, i.j = function(t1) {
                    return this.x[t1].j;
                }, i.reference = function(t1, i) {
                    for(var n, s = d(this.x[t1].o); !(n = s()).done;)if (i === n.value.target) return !0;
                    return !1;
                }, i.parent = function(t1) {
                    return t1.source;
                }, i.child = function(t1) {
                    return t1.target;
                }, i.children = function(t1) {
                    return new FX(this.x[t1].o.values(), t1);
                }, i.numChildren = function(t1) {
                    return this.x[t1].o.length;
                }, i.getParent = function(t1) {
                    if (4294967295 === t1) return 4294967295;
                    var i = this.x[t1].i;
                    return 0 === i.length ? 4294967295 : i[0].target;
                }, i.addReference = function(t1, i) {
                    return this.addEdge(t1, i);
                }, i.locateChild = function(t1, i) {
                    if (4294967295 === t1) {
                        for(var n, s = d(this.x.keys()); !(n = s()).done;){
                            var _$r = n.value;
                            if (0 === this.x[_$r].i.length && this._names[_$r] === i) return _$r;
                        }
                        return 4294967295;
                    }
                    for(var h, e = d(this.x[t1].o); !(h = e()).done;){
                        var u = h.value.target;
                        if (i === this._names[u]) return u;
                    }
                    return 4294967295;
                }, i.locate = function(t1) {
                    return GX(this, 4294967295, t1);
                }, i.locateRelative = function(t1, i) {
                    return void 0 === i && (i = 4294967295), GX(this, i, t1);
                }, i.path = function(t1) {
                    return jX(this, t1);
                }, t1;
            }();
            function iY(t1, i) {
                i.descriptorID = t1.n(), i.type = t1.n(), i.count = t1.n();
            }
            function nY(t1, i) {
                var n;
                i.type = t1.n(), i.visibility = t1.n(), i.offset = t1.n(), i.capacity = t1.n(), i.accessType = t1.n(), i.viewDimension = t1.n(), i.sampleType = t1.n(), i.format = t1.n(), n = t1.n(), i.descriptors.length = n;
                for(var s = 0; s !== n; ++s){
                    var _$r = new Gq;
                    iY(t1, _$r), i.descriptors[s] = _$r;
                }
            }
            function sY(t1, i) {
                i.slot = t1.n(), i.capacity = t1.n(), i.uniformBlockCapacity = t1.n(), i.samplerTextureCapacity = t1.n();
                var n = 0;
                n = t1.n(), i.descriptorBlocks.length = n;
                for(var s = 0; s !== n; ++s){
                    var _$r = new Hq;
                    nY(t1, _$r), i.descriptorBlocks[s] = _$r;
                }
                n = t1.n();
                for(var h = 0; h !== n; ++h){
                    var e = t1.n(), u = new Zl;
                    Fq(t1, u), i.uniformBlocks.set(e, u);
                }
                n = t1.n();
                for(var o = 0; o !== n; ++o){
                    var f = t1.n(), _$c = t1.n();
                    i.bindingMap.set(f, _$c);
                }
            }
            function rY(t1, i) {
                sY(t1, i.descriptorSetLayoutData), xq(t1, i.descriptorSetLayoutInfo);
            }
            function hY(t1, i) {
                var n = 0;
                n = t1.n();
                for(var s = 0; s !== n; ++s){
                    var _$r = t1.n(), h = new Wq;
                    rY(t1, h), i.descriptorSets.set(_$r, h);
                }
                n = t1.n();
                for(var e = 0; e !== n; ++e){
                    var u = t1.n(), o = new Wq;
                    rY(t1, o), i.descriptorGroups.set(u, o);
                }
            }
            function eY(t1, i) {
                var n;
                n = t1.n();
                for(var s = 0; s !== n; ++s){
                    var _$r = t1.n(), h = t1.n();
                    i.descriptorBindings.set(_$r, h);
                }
            }
            function uY(t1, i) {
                var n = 0;
                n = t1.n();
                for(var s = 0; s !== n; ++s){
                    var _$r = t1.n(), h = new Vq;
                    sY(t1, h), i.layoutData.set(_$r, h);
                }
                n = t1.n();
                for(var e = 0; e !== n; ++e){
                    var u = t1.n(), o = new $q;
                    eY(t1, o), i.bindingData.set(u, o);
                }
            }
            function oY(t1, i) {
                var n;
                n = t1.n(), i.passes.length = n;
                for(var s = 0; s !== n; ++s){
                    var _$r = new Xq;
                    uY(t1, _$r), i.passes[s] = _$r;
                }
            }
            function fY(t1, i) {
                var n;
                n = t1.n();
                for(var s = 0; s !== n; ++s){
                    var _$r = t1.s(), h = new qq;
                    oY(t1, h), i.techniques.set(_$r, h);
                }
            }
            function cY(t1, i) {
                hY(t1, i.layout);
            }
            function aY(t1, i) {
                var n;
                n = t1.n();
                for(var s = 0; s !== n; ++s){
                    var _$r = t1.n(), h = t1.n();
                    i.descriptorVisibility.set(_$r, h);
                }
            }
            function vY(t1, i) {
                i.rootSignature = t1.s();
                var n = 0;
                n = t1.n(), i.shaderPrograms.length = n;
                for(var s = 0; s !== n; ++s){
                    var _$r = new Kq;
                    cY(t1, _$r), i.shaderPrograms[s] = _$r;
                }
                n = t1.n();
                for(var h = 0; h !== n; ++h){
                    var e = t1.s(), u = t1.n();
                    i.shaderIndex.set(e, u);
                }
            }
            function lY(t1, i) {
                var n = t1.n();
                t1.n(), t1.n(), t1.n();
                for(var s = 0; s !== n; ++s){
                    var _$r = t1.n(), h = t1.n(), e = t1.s(), u = t1.n(), o = new zq;
                    switch(hY(t1, o), _$r){
                        case 0:
                            var f = new Jq;
                            aY(t1, f), i.addVertex(0, f, e, u, o, h);
                            break;
                        case 1:
                            var _$c = new Qq;
                            vY(t1, _$c), i.addVertex(1, _$c, e, u, o, h);
                    }
                }
                var a = 0;
                a = t1.n(), i.valueNames.length = a;
                for(var v = 0; v !== a; ++v)i.valueNames[v] = t1.s();
                a = t1.n();
                for(var l = 0; l !== a; ++l){
                    var _$d = t1.s(), w = t1.n();
                    i.attributeIndex.set(_$d, w);
                }
                a = t1.n();
                for(var g = 0; g !== a; ++g){
                    var p = t1.s(), _$y = t1.n();
                    i.constantIndex.set(p, _$y);
                }
                a = t1.n();
                for(var _$_ = 0; _$_ !== a; ++_$_){
                    var m = t1.s(), b = t1.n();
                    i.shaderLayoutIndex.set(m, b);
                }
                a = t1.n();
                for(var k = 0; k !== a; ++k){
                    var A = t1.s(), E = new Yq;
                    fY(t1, E), i.effects.set(A, E);
                }
            }
            var dY = function() {
                function t1(t1) {
                    this.colors = void 0, this.colors = Array(t1);
                }
                var i = t1.prototype;
                return i.get = function(t1) {
                    return this.colors[t1];
                }, i.put = function(t1, i) {
                    this.colors[t1] = i;
                }, t1;
            }();
            function wY(t1) {
                switch(t1){
                    case 1:
                    case 5:
                    case 9:
                    case 13:
                        return 1;
                    case 6:
                    case 14:
                    case 10:
                    case 2:
                        return 2;
                    case 15:
                    case 3:
                    case 11:
                    case 7:
                        return 3;
                    case 4:
                    case 16:
                    case 12:
                    case 8:
                    case 17:
                        return 4;
                    case 18:
                    case 20:
                        return 6;
                    case 19:
                    case 23:
                        return 8;
                    case 21:
                        return 9;
                    case 22:
                    case 24:
                        return 12;
                    case 25:
                        return 16;
                    default:
                        return 0;
                }
            }
            function gY(t1, i) {
                var n = 1;
                return 1 & t1 || 0 !== i || (n = 8 & t1 ? 1 : 0), 6 & ~t1 && 1 === i && (2 & t1 || (n = 0), 4 & t1 || (n = 0)), n;
            }
            function pY(t1, i, n, s, r, h) {
                void 0 === s && (s = null), void 0 === r && (r = 0), void 0 === h && (h = void 0), h = h || new Cl;
                var e = t1 ? t1.viewport : new Cl(0, 0, 1, 1);
                if (h.x = e.x * i, h.y = e.y * n, h.width = e.width * i, h.height = e.height * n, s) switch(s.type){
                    case 0:
                        var f = s;
                        if (f.shadowFixedArea || f.csmLevel === bA.LEVEL_1) h.x = 0, h.y = 0, h.width = i, h.height = n;
                        else {
                            var _$c = A.director.root.device.capabilities.screenSpaceSignY;
                            h.x = r % 2 * .5 * i, h.y = _$c > 0 ? .5 * (1 - Math.floor(r / 2)) * n : .5 * Math.floor(r / 2) * n, h.width = .5 * i, h.height = .5 * n;
                        }
                        break;
                    case 2:
                        h.x = 0, h.y = 0, h.width = i, h.height = n;
                }
                return h;
            }
            function yY(t1, i, n, s, r) {
                var h = "Camera" + r, e = n.renderArea(), u = e.x, o = e.y, f = n.camera, _$c = "reflectionProbePassColor" + h, a = "reflectionProbePassDS" + h;
                i.containsResource(_$c) || (i.addRenderWindow(_$c, 35, u, o, s), i.addDepthStencil(a, 55, u, o, 3)), i.updateRenderWindow(_$c, s), i.updateDepthStencil(a, u, o);
                var v = i.addRenderPass(u, o, "default");
                v.name = "ReflectionProbePass" + r, v.setViewport(new Ul(0, 0, u, o)), v.addRenderTarget(_$c, gY(f.clearFlag, 0), 0, new xl(f.clearColor.x, f.clearColor.y, f.clearColor.z, f.clearColor.w)), v.addDepthStencil(a, gY(f.clearFlag, 1), 0, f.clearDepth, f.clearStencil, f.clearFlag);
                var l = v.addQueue(1, "reflect-map"), _$d = new EX;
                _$d.probe = n, l.addSceneOfCamera(t1, _$d, 8193), _Y(l, f, i);
            }
            function _Y(t1, i, n) {
                var s = A.director.root.pipeline, _$r = n.pipelineSceneData, h = _$r.skybox;
                t1.setMat4("cc_matView", i.matView), t1.setMat4("cc_matViewInv", i.node.worldMatrix), t1.setMat4("cc_matProj", i.matProj), t1.setMat4("cc_matProjInv", i.matProjInv), t1.setMat4("cc_matViewProj", i.matViewProj), t1.setMat4("cc_matViewProjInv", i.matViewProjInv), t1.setVec4("cc_cameraPos", new Hr(i.position.x, i.position.y, i.position.z, s.getCombineSignY())), t1.setVec4("cc_surfaceTransform", new Hr(i.surfaceTransform, 0, Math.cos(Gn(h.getRotationAngle())), Math.sin(Gn(h.getRotationAngle())))), t1.setVec4("cc_screenScale", new Hr(_$r.shadingScale, _$r.shadingScale, 1 / _$r.shadingScale, 1 / _$r.shadingScale)), t1.setVec4("cc_exposure", new Hr(i.exposure, 1 / i.exposure, +!!_$r.isHDR, 1 / $M.standardExposureValue));
            }
            function mY(t1, i, n) {
                _instanceof(n, Kd) ? t1.bindBuffer(i, n) : _instanceof(n, gw) ? t1.bindTexture(i, n) : _instanceof(n, dw) && t1.bindSampler(i, n);
            }
            function kY(t1, i) {
                for(var n, s = d(i.descriptorSetLayoutData.descriptorBlocks); !(n = s()).done;)for(var _$r = n.value, h = 0; h !== _$r.descriptors.length; ++h)if (t1 === _$r.descriptors[h].descriptorID) return _$r.offset + h;
                return -1;
            }
            new Ie(0, 0, 0, .5, .5, .5), new Ie;
            var AY = function() {
                function t1(t1, i) {
                    void 0 === i && (i = 2), this.AO = [], this.EO = 0, this.nw = void 0, this.currUniform = void 0, this.Ol = void 0;
                    var n = (this.Ol = A.director.root).device;
                    this.nw = n, this.currUniform = new Float32Array(t1 / 4);
                    for(var s = 0; s < i; s++){
                        var _$r = new Wl(18, 3, t1, t1);
                        this.AO.push(this.nw.createBuffer(_$r));
                    }
                }
                var i = t1.prototype;
                return i.getCurrentBuffer = function() {
                    var _$t = A.director;
                    return this.EO = _$t.getTotalFrames() % this.AO.length, this.AO[this.EO];
                }, i.updateData = function(t1) {
                    this.currUniform.set(t1);
                }, i.updateBuffer = function(t1, i) {
                    var n = i.descriptorSet, s = this.getCurrentBuffer();
                    s.update(this.currUniform), mY(n, t1, s);
                }, t1;
            }(), EY = new Map, TY = new Map, SY = new Map;
            function OY(t1) {
                var i = SY.get(t1);
                if (i) return i;
                var n = A.director.root.pipeline, s = n.layoutGraph.locateChild(n.layoutGraph.N, t1), _$r = n.layoutGraph.getLayout(s).getSet(3);
                return SY.set(t1, _$r), _$r;
            }
            function IY(t1, i, n, s) {
                void 0 === s && (s = "default"), xY(s, i, n, t1);
            }
            function RY(t1, i) {
                var n = A.director.root.pipeline.layoutGraph, s = n.locateChild(4294967295, i), _$r = n.getLayout(s).getSet(3).descriptorSetLayoutData, h = n.attributeIndex.get(t1);
                return _$r.uniformBlocks.get(h);
            }
            function MY(t1, i, n) {
                var s = RY(i, n);
                if (!s) return -1;
                for(var _$r, h = 0, e = d(s.members); !(_$r = e()).done;){
                    var u = _$r.value, o = wY(u.type);
                    if (u.name === t1) return h;
                    h += o * u.count;
                }
                return -1;
            }
            var CY = new Map, NY = function NY() {
                this.offset = -1, this.buffer = [], this.blockId = -1;
            }, PY = new Map;
            function DY(t1, i, n) {
                var s = !1;
                if (n < 0 || n > t1.length) return s;
                for(var _$r = Math.min(i.length, t1.length - n), h = 0; h < _$r; h++)t1[n + h] !== i[h] && (t1[n + h] = i[h], s = !0);
                return s;
            }
            function LY(t1, i) {
                var n = CY.get(t1);
                if (n) return n;
                n = [], A.director.root.pipeline.layoutGraph;
                var s = 0, _$r = RY(t1, i);
                if (!_$r) return null;
                for(var h, e = d(_$r.members); !(h = e()).done;){
                    var u = h.value;
                    s += wY(u.type) * u.count;
                }
                return n.length = s, n.fill(0), CY.set(t1, n), n;
            }
            function BY(t1, i) {
                var n = EY.get(t1);
                n || (EY.set(t1, new AY(4 * i.length, 2)), n = EY.get(t1)), n.updateData(i);
            }
            function FY(t1, i, n, s, r) {
                var h = t1.blockId, e = t1.buffer, u = DY(e, i, t1.offset), o = kY(h, n), f = n.descriptorSet;
                if (u || !f.getBuffer(o) && -1 !== o) {
                    var _$c = "" + h + o + r + s;
                    TY.set(_$c, o), BY(_$c, e);
                }
            }
            function UY(t1, i, n, s, r) {
                var h = kY(t1, r);
                if (-1 !== h) {
                    var e = "" + t1 + h + n + i;
                    TY.set(e, h), BY(e, s);
                }
            }
            function xY(t1, i, n, s) {
                var _$r = s.constants, h = s.samplers, e = s.textures, u = s.buffers, o = A.director.root.pipeline.layoutGraph, f = OY(t1);
                TY.clear();
                for(var _$c, v = d(_$r); !(_$c = v()).done;)!function a() {
                    var _$s = _$c.value, _$r = _$s[0], h = _$s[1], e = PY.get(_$r);
                    if (e) FY(e, h, f, i, n);
                    else for(var u, a = Array.from(o.constantIndex).find(function(t1) {
                        return t1[0], t1[1] === _$r;
                    })[0], v = d(o.attributeIndex); !(u = v()).done;){
                        var l = u.value, w = l[0], g = l[1], p = LY(w, t1);
                        if (p) {
                            var _$y = MY(a, w, t1);
                            -1 !== _$y ? (PY.set(_$r, new NY), (e = PY.get(_$r)).buffer = p, e.blockId = g, e.offset = _$y, FY(e, h, f, i, n)) : UY(g, i, n, p, f);
                        }
                    }
                }();
                for(var l, w = f.descriptorSet, g = d(e); !(l = g()).done;){
                    var p = l.value, _$y = p[0], _$_ = p[1], m = kY(_$y, f);
                    if (-1 !== m) {
                        var b = w.getTexture(m);
                        _$_ === b && (b.gpuTexture || b.gpuTextureView && b.gpuTextureView.gpuTexture) || mY(w, m, _$_);
                    }
                }
                for(var k, E = d(h); !(k = E()).done;){
                    var T = k.value, S = T[0], _$O = T[1], _$I = kY(S, f);
                    -1 !== _$I && w.getSampler(_$I) !== _$O && mY(w, _$I, _$O);
                }
                for(var _$R, _$M = d(TY); !(_$R = _$M()).done;){
                    var _$C = _$R.value, N = _$C[0], P = _$C[1];
                    EY.get(N).updateBuffer(P, f);
                }
                for(var D, L = d(u); !(D = L()).done;){
                    var B = D.value, F = B[0], U = B[1], x = kY(F, f);
                    -1 !== x && (w.getBuffer(x) || mY(w, x, U));
                }
            }
            function jY(t1) {
                return t1 + "-";
            }
            function GY(t1) {
                for(var i = 0, n = 0; n < t1.length; n++)i = (i << 5) - i + t1.charCodeAt(n) | 0;
                return i;
            }
            function VY(t1, i) {
                return t1 + (i - 1) & ~(i - 1);
            }
            function WY(t1, i, n, s, r, h) {
                var e = new Float32Array(4), u = 0, o = 0, f = 0, _$c = 0;
                t1 && 1 === t1.type ? (e[0] = t1.position.x, e[1] = t1.position.y, e[2] = t1.position.z, e[3] = 1, u = t1.size, o = t1.range, f = t1.luminanceHDR, _$c = t1.luminanceLDR) : t1 && 2 === t1.type ? (e[0] = t1.position.x, e[1] = t1.position.y, e[2] = t1.position.z, e[3] = 2, u = t1.size, o = t1.range, f = t1.luminanceHDR, _$c = t1.luminanceLDR) : t1 && 3 === t1.type ? (e[0] = t1.position.x, e[1] = t1.position.y, e[2] = t1.position.z, e[3] = 3, u = 0, o = t1.range, f = t1.luminanceHDR, _$c = t1.luminanceLDR) : t1 && 4 === t1.type && (e[0] = t1.position.x, e[1] = t1.position.y, e[2] = t1.position.z, e[3] = 4, u = 0, o = 0, f = t1.illuminanceHDR, _$c = t1.illuminanceLDR);
                var w = h + 0;
                r.set(e, w), w = h + 8, e.set([
                    u,
                    o,
                    0,
                    0
                ]), r.set(e, w), w = h + 4;
                var g = t1 ? t1.color : new xl;
                if (t1 && t1.useColorTemperature) {
                    var p = t1.colorTemperatureRGB;
                    r[w++] = g.x * p.x, r[w++] = g.y * p.y, r[w++] = g.z * p.z;
                } else r[w++] = g.x, r[w++] = g.y, r[w++] = g.z;
                switch(r[w] = i ? f * n * 1e4 : _$c, t1 ? t1.type : 5){
                    case 1:
                    case 3:
                        r[h + 8 + 2] = 0, r[h + 8 + 3] = 0;
                        break;
                    case 2:
                        r[h + 8 + 2] = t1.spotAngle, r[h + 8 + 3] = s && s.enabled && t1.shadowEnabled && s.type === _A.ShadowMap ? 1 : 0, w = h + 12;
                        var _$_ = t1.direction;
                        r[w++] = _$_.x, r[w++] = _$_.y, r[w] = _$_.z, r[h + 16 + 0] = 0, r[h + 16 + 1] = 0, r[h + 16 + 2] = 0, r[h + 16 + 3] = t1.angleAttenuationStrength;
                        break;
                    case 4:
                        var b = t1.right;
                        r[h + 8 + 0] = b.x, r[h + 8 + 1] = b.y, r[h + 8 + 2] = b.z, r[h + 8 + 3] = 0;
                        var k = t1.direction;
                        r[h + 12 + 0] = k.x, r[h + 12 + 1] = k.y, r[h + 12 + 2] = k.z, r[h + 12 + 3] = 0;
                        var A = t1.scale;
                        r[h + 16 + 0] = .5 * A.x, r[h + 16 + 1] = .5 * A.y, r[h + 16 + 2] = .5 * A.z, r[h + 16 + 3] = 0;
                }
            }
            function zY(t1) {
                for(var i, n = "", s = d(t1.rasterViews); !(i = s()).done;){
                    var _$r = i.value, h = _$r[0], e = _$r[1];
                    n += jY(h), n += jY(e.slotName), n += jY(e.accessType), n += jY(e.attachmentType), n += jY(e.loadOp), n += jY(e.storeOp), n += jY(e.clearFlags), n += jY(e.clearColor.x), n += jY(e.clearColor.y), n += jY(e.clearColor.z), n += jY(e.clearColor.w), n += jY(e.slotID), n += jY(e.shaderStageFlags);
                }
                for(var u, o = d(t1.computeViews); !(u = o()).done;){
                    var f = u.value, _$c = f[0], a = f[1];
                    n += jY(_$c);
                    for(var v, l = d(a); !(v = l()).done;){
                        var w = v.value;
                        n += jY(w.name), n += jY(w.accessType), n += jY(w.clearFlags), n += jY(w.clearValueType), n += jY(w.clearValue.x), n += jY(w.clearValue.y), n += jY(w.clearValue.z), n += jY(w.clearValue.w), n += jY(w.shaderStageFlags);
                    }
                }
                n += jY(+!!t1.showStatistics), t1.hashValue = GY(n);
            }
            var $Y = new Hr, XY = new Ss, qY = new xl, YY = new cr, KY = new cr;
            function JY(t1, i) {
                var n = i.skybox, s = A.director.root, _$r = s.pipeline;
                if (n.reflectionMap) {
                    var h = n.reflectionMap.getGFXTexture(), e = s.device.getSampler(n.reflectionMap.getSamplerInfo());
                    t1.setTexture("cc_environment", h), t1.setSampler("cc_environment", e);
                } else {
                    var u = n.envmap ? n.envmap : Lk.get("default-cube-texture");
                    if (u) {
                        var o = u.getGFXTexture(), f = s.device.getSampler(u.getSamplerInfo());
                        t1.setTexture("cc_environment", o), t1.setSampler("cc_environment", f);
                    }
                }
                var _$c = n.diffuseMap ? n.diffuseMap : Lk.get("default-cube-texture");
                if (_$c) {
                    var a = _$c.getGFXTexture(), v = s.device.getSampler(_$c.getSamplerInfo());
                    t1.setTexture("cc_diffuseMap", a), t1.setSampler("cc_diffuseMap", v);
                }
                t1.hasSampler("cc_shadowMap") || t1.setSampler("cc_shadowMap", _$r.defaultSampler), t1.hasTexture("cc_shadowMap") || t1.setTexture("cc_shadowMap", _$r.defaultShadowTexture), t1.hasSampler("cc_spotShadowMap") || t1.setSampler("cc_spotShadowMap", _$r.defaultSampler), t1.hasTexture("cc_spotShadowMap") || t1.setTexture("cc_spotShadowMap", _$r.defaultShadowTexture);
            }
            function QY(t1, i, n, s) {
                var _$r, h = A.director.root.pipeline, e = n.shadows, u = n.skybox, o = n.shadingScale;
                i && (t1.setMat4("cc_matView", i.matView), t1.setMat4("cc_matViewInv", i.node.worldMatrix), t1.setMat4("cc_matProj", i.matProj), t1.setMat4("cc_matProjInv", i.matProjInv), t1.setMat4("cc_matViewProj", i.matViewProj), t1.setMat4("cc_matViewProjInv", i.matViewProjInv), $Y.set(i.surfaceTransform, i.cameraUsage, Math.cos(Gn(u.getRotationAngle())), Math.sin(Gn(u.getRotationAngle()))), t1.setVec4("cc_surfaceTransform", $Y), $Y.set(i.exposure, 1 / i.exposure, +!!n.isHDR, 1 / $M.standardExposureValue), t1.setVec4("cc_exposure", $Y)), i ? $Y.set(i.position.x, i.position.y, i.position.z, h.getCombineSignY()) : $Y.set(0, 0, 0, h.getCombineSignY()), t1.setVec4("cc_cameraPos", $Y), $Y.set(n.shadingScale, n.shadingScale, 1 / n.shadingScale, 1 / n.shadingScale), t1.setVec4("cc_screenScale", $Y);
                var f = s && s.mainLight;
                if (f) {
                    var _$c = f.shadowEnabled && e.type === _A.ShadowMap ? 1 : 0;
                    $Y.set(f.direction.x, f.direction.y, f.direction.z, _$c), t1.setVec4("cc_mainLitDir", $Y);
                    var a = f.color.x, v = f.color.y, l = f.color.z;
                    f.useColorTemperature && (a *= f.colorTemperatureRGB.x, v *= f.colorTemperatureRGB.y, l *= f.colorTemperatureRGB.z);
                    var _$d = f.illuminance;
                    n.isHDR && i && (_$d *= i.exposure), $Y.set(a, v, l, _$d), t1.setVec4("cc_mainLitColor", $Y);
                } else $Y.set(0, 0, 1, 0), t1.setVec4("cc_mainLitDir", $Y), $Y.set(0, 0, 0, 0), t1.setVec4("cc_mainLitColor", $Y);
                var w = n.ambient, g = w.skyColor;
                n.isHDR ? g.w = w.skyIllum * (i ? i.exposure : 1) : g.w = w.skyIllum, $Y.set(g.x, g.y, g.z, g.w), t1.setVec4("cc_ambientSky", $Y), $Y.set(w.groundAlbedo.x, w.groundAlbedo.y, w.groundAlbedo.z, u.envmap ? null == (_$r = u.envmap) ? void 0 : _$r.mipmapLevel : 1), t1.setVec4("cc_ambientGround", $Y);
                var p = n.fog, _$y = p.colorArray;
                $Y.set(_$y.x, _$y.y, _$y.z, _$y.z), t1.setVec4("cc_fogColor", $Y), $Y.set(p.fogStart, p.fogEnd, p.fogDensity, 0), t1.setVec4("cc_fogBase", $Y), $Y.set(p.fogTop, p.fogRange, p.fogAtten, 0), t1.setVec4("cc_fogAdd", $Y), i && ($Y.set(i.nearClip, i.farClip, i.getClipSpaceMinz(), 0), t1.setVec4("cc_nearFar", $Y), $Y.set(i.viewport.x, i.viewport.y, o * i.window.width * i.viewport.z, o * i.window.height * i.viewport.w), t1.setVec4("cc_viewPort", $Y));
            }
            var ZY = function() {
                function t1(t1, i, n, s, r, h) {
                    void 0 === t1 && (t1 = null), void 0 === i && (i = 0), void 0 === n && (n = 0), void 0 === s && (s = 0), void 0 === r && (r = 0), void 0 === h && (h = 0), this.subModel = void 0, this.priority = void 0, this.hash = void 0, this.depth = void 0, this.shaderID = void 0, this.passIndex = void 0, this.subModel = t1, this.priority = i, this.hash = n, this.depth = s, this.shaderID = r, this.passIndex = h;
                }
                return t1.prototype.update = function(t1, i, n, s, r, h) {
                    void 0 === t1 && (t1 = null), void 0 === i && (i = 0), void 0 === n && (n = 0), void 0 === s && (s = 0), void 0 === r && (r = 0), void 0 === h && (h = 0), this.subModel = t1, this.priority = i, this.hash = n, this.depth = s, this.shaderID = r, this.passIndex = h;
                }, t1;
            }(), tK = new Uh(function() {
                return new ZY;
            }, 8), iK = "CC_USE_RGBE_OUTPUT";
            function nK(t1, i) {
                for(var n = t1.passes, s = 0; s < n.length; s++)if (n[s].phaseID === i) return s;
                return -1;
            }
            var sK = function() {
                function t1() {
                    var _$t;
                    this.probeMap = [], this.defaultId = (_$t = A.rendering).getPhaseID(_$t.getPassID("default"), "default");
                }
                var i = t1.prototype;
                return i.clear = function() {
                    this.probeMap.length = 0;
                }, i.applyMacro = function() {
                    for(var _$t, i = d(this.probeMap); !(_$t = i()).done;){
                        var n = _$t.value, s = [
                            {
                                name: iK,
                                value: !0
                            }
                        ];
                        n.patches && (s = s.concat(n.patches)), n.onMacroPatchesStateChanged(s);
                    }
                }, i.removeMacro = function() {
                    for(var _$t, i = d(this.probeMap); !(_$t = i()).done;){
                        var n = _$t.value;
                        if (n.patches) {
                            var s = n.patches.filter(function(t1) {
                                return t1.name !== iK;
                            });
                            0 === s.length ? n.onMacroPatchesStateChanged(null) : n.onMacroPatchesStateChanged(s);
                        }
                    }
                }, i.addToProbeQueue = function(t1, i) {
                    for(var n = t1.subModels, s = 0; s < n.length; s++){
                        var _$r = n[s];
                        if (!_$r.passes[0].blendState.targets[0].blend) {
                            var h = nK(_$r, i), e = !0;
                            h < 0 && (h = nK(_$r, i = this.defaultId), e = !1), h < 0 || e || this.probeMap.push(_$r);
                        }
                    }
                }, t1;
            }();
            function rK(t1, i, n, s) {
                var _$r = A.director.root.pipeline, h = _$r.device, e = _$r.pipelineSceneData, u = e.shadows;
                if (u.type !== _A.Planar) {
                    var o = e.csmLayers, f = +!Q_(h), _$c = _$r.device.capabilities;
                    switch(u.enabled && u.type === _A.ShadowMap && n && n.node && 0 === n.type && o.update(e, i), n.type){
                        case 0:
                            if (u.enabled && n && n.shadowEnabled && u.type === _A.ShadowMap) {
                                var v, l, _$d, w = .1, g = 0, p = 0;
                                if (n.shadowFixedArea || n.csmLevel === bA.LEVEL_1) v = o.specialLayer.matShadowView, l = o.specialLayer.matShadowProj, _$d = o.specialLayer.matShadowViewProj, n.shadowFixedArea ? (w = n.shadowNear, g = n.shadowFar, p = 0) : (w = .1, g = o.specialLayer.shadowCameraFar, p = 1), $Y.set(0, f, n.shadowNormalBias, 0), t1.setVec4("cc_shadowLPNNInfo", $Y);
                                else {
                                    var _$y = o.layers[s];
                                    v = _$y.matShadowView, l = _$y.matShadowProj, _$d = _$y.matShadowViewProj, w = _$y.splitCameraNear, g = _$y.splitCameraFar, p = n.csmLevel;
                                }
                                t1.setMat4("cc_matLightView", v), $Y.set(l.m10, l.m14, l.m11, l.m15), t1.setVec4("cc_shadowProjDepthInfo", $Y), $Y.set(l.m00, l.m05, 1 / l.m00, 1 / l.m05), t1.setVec4("cc_shadowProjInfo", $Y), t1.setMat4("cc_matLightViewProj", _$d), $Y.set(w, g, 0, 1 - n.shadowSaturation), t1.setVec4("cc_shadowNFLSInfo", $Y), $Y.set(0, f, n.shadowNormalBias, p), t1.setVec4("cc_shadowLPNNInfo", $Y), $Y.set(u.size.x, u.size.y, n.shadowPcf, n.shadowBias), t1.setVec4("cc_shadowWHPBInfo", $Y);
                            }
                            break;
                        case 2:
                            if (u.enabled && n && n.shadowEnabled) {
                                cr.invert(YY, n.node.getWorldMatrix()), t1.setMat4("cc_matLightView", YY), cr.perspective(KY, n.angle, 1, .001, n.range, !0, _$c.clipSpaceMinZ, _$c.clipSpaceSignY, 0);
                                var m = KY.clone().invert(), b = KY.clone();
                                cr.multiply(YY, KY, YY), t1.setMat4("cc_matLightViewProj", YY), $Y.set(.01, n.range, 0, 0), t1.setVec4("cc_shadowNFLSInfo", $Y), $Y.set(u.size.x, u.size.y, n.shadowPcf, n.shadowBias), t1.setVec4("cc_shadowWHPBInfo", $Y), $Y.set(2, f, n.shadowNormalBias, 0), t1.setVec4("cc_shadowLPNNInfo", $Y), $Y.set(b.m10, b.m14, b.m11, b.m15), t1.setVec4("cc_shadowProjDepthInfo", $Y), $Y.set(m.m10, m.m14, m.m11, m.m15), t1.setVec4("cc_shadowInvProjDepthInfo", $Y), $Y.set(b.m00, b.m05, 1 / b.m00, 1 / b.m05), t1.setVec4("cc_shadowProjInfo", $Y);
                            }
                            break;
                        case 1:
                            $Y.set(u.size.x, u.size.y, 1, 0), t1.setVec4("cc_shadowWHPBInfo", $Y), $Y.set(1, f, 0, 0), t1.setVec4("cc_shadowLPNNInfo", $Y);
                            break;
                        case 3:
                            $Y.set(u.size.x, u.size.y, 1, 0), t1.setVec4("cc_shadowWHPBInfo", $Y), $Y.set(3, f, 0, 0), t1.setVec4("cc_shadowLPNNInfo", $Y);
                    }
                    qY.set(u.shadowColor.x, u.shadowColor.y, u.shadowColor.z, u.shadowColor.w), t1.setColor("cc_shadowColor", qY);
                }
            }
            function hK(t1, i) {
                var n = t1.size.x;
                switch(i.shadowPcf){
                    case mA.HARD:
                        break;
                    case mA.SOFT:
                        return 1 / (.5 * n);
                    case mA.SOFT_2X:
                        return 2 / (.5 * n);
                    case mA.SOFT_4X:
                        return 3 / (.5 * n);
                }
                return 0;
            }
            function eK(t1, i) {
                var n = A.director, s = n.root.pipeline, _$r = s.device, h = n.getScene(), e = i && i.scene ? i.scene.mainLight : h ? h.renderScene.mainLight : null, u = s.pipelineSceneData, o = u.shadows, f = u.csmLayers, _$c = u.csmSupported, a = +!Q_(_$r);
                if (e && o.enabled) {
                    if (o.type === _A.ShadowMap) {
                        if (e.shadowEnabled) {
                            if (e.shadowFixedArea || e.csmLevel === bA.LEVEL_1 || !_$c) {
                                var v = f.specialLayer.matShadowView, l = f.specialLayer.matShadowProj, _$d = f.specialLayer.matShadowViewProj, w = e.shadowNear, g = e.shadowFar;
                                t1.setMat4("cc_matLightView", v), $Y.set(l.m10, l.m14, l.m11, l.m15), t1.setVec4("cc_shadowProjDepthInfo", $Y), $Y.set(l.m00, l.m05, 1 / l.m00, 1 / l.m05), t1.setVec4("cc_shadowProjInfo", $Y), t1.setMat4("cc_matLightViewProj", _$d), $Y.set(w, g, 0, 1 - e.shadowSaturation), t1.setVec4("cc_shadowNFLSInfo", $Y), $Y.set(0, a, e.shadowNormalBias, 0), t1.setVec4("cc_shadowLPNNInfo", $Y);
                            } else {
                                for(var p = hK(o, e), _$y = 0; _$y < e.csmLevel; _$y++){
                                    var _$_ = f.layers[_$y], m = _$_.matShadowView;
                                    $Y.set(m.m00, m.m04, m.m08, p), t1.setVec4("cc_csmViewDir0", $Y, _$y), $Y.set(m.m01, m.m05, m.m09, _$_.splitCameraNear), t1.setVec4("cc_csmViewDir1", $Y, _$y), $Y.set(m.m02, m.m06, m.m10, _$_.splitCameraFar), t1.setVec4("cc_csmViewDir2", $Y, _$y);
                                    var b = _$_.csmAtlas;
                                    t1.setVec4("cc_csmAtlas", b, _$y);
                                    var k = _$_.matShadowViewProj;
                                    t1.setMat4("cc_matCSMViewProj", k, _$y);
                                    var E = _$_.matShadowProj;
                                    $Y.set(E.m10, E.m14, E.m11, E.m15), t1.setVec4("cc_csmProjDepthInfo", $Y, _$y), $Y.set(E.m00, E.m05, 1 / E.m00, 1 / E.m05), t1.setVec4("cc_csmProjInfo", $Y, _$y);
                                }
                                $Y.set(e.csmTransitionRange, 0, 0, 0), t1.setVec4("cc_csmSplitsInfo", $Y), $Y.set(.1, e.shadowDistance, 0, 1 - e.shadowSaturation), t1.setVec4("cc_shadowNFLSInfo", $Y), $Y.set(0, a, e.shadowNormalBias, e.csmLevel), t1.setVec4("cc_shadowLPNNInfo", $Y);
                            }
                            $Y.set(o.size.x, o.size.y, e.shadowPcf, e.shadowBias), t1.setVec4("cc_shadowWHPBInfo", $Y);
                        }
                    } else Ss.normalize(XY, o.normal), $Y.set(XY.x, XY.y, XY.z, -o.distance), t1.setVec4("cc_planarNDInfo", $Y), $Y.set(0, 0, 0, o.planeBias), t1.setVec4("cc_shadowWHPBInfo", $Y);
                    t1.setMathColor("cc_shadowColor", o.shadowColor);
                }
            }
            var uK = function() {
                function t1(t1, i) {
                    this._data = void 0, this._lg = void 0, this._vertID = -1, this._currBlock = void 0, this._currStage = "", this._currFrequency = 3, this._currCount = void 0, this._currConstant = [], this._data = t1, this._lg = i;
                }
                var i = t1.prototype;
                return i.setMat4 = function(i, n, s) {
                    void 0 === s && (s = 0), t1.setMat4(this._lg, this._data, i, n, s);
                }, t1.setMat4 = function(i, n, s, r, h) {
                    void 0 === h && (h = 0);
                    var e = t1.getConstantInfo(i, n, s);
                    cr.toArray(e.dataArr, r, 16 * h), n.constants.set(e.constantID, e.dataArr);
                }, i.setQuaternion = function(i, n, s) {
                    void 0 === s && (s = 0), t1.setQuaternion(this._lg, this._data, i, n, s);
                }, t1.setQuaternion = function(i, n, s, r, h) {
                    void 0 === h && (h = 0);
                    var e = t1.getConstantInfo(i, n, s);
                    qs.toArray(e.dataArr, r, 4 * h), n.constants.set(e.constantID, e.dataArr);
                }, i.setColor = function(i, n, s) {
                    void 0 === s && (s = 0), t1.setColor(this._lg, this._data, i, n, s);
                }, t1.setColor = function(i, n, s, r, h) {
                    void 0 === h && (h = 0);
                    var e = t1.getConstantInfo(i, n, s), u = 4 * h;
                    e.dataArr[0 + u] = r.x, e.dataArr[1 + u] = r.y, e.dataArr[2 + u] = r.z, e.dataArr[3 + u] = r.w, n.constants.set(e.constantID, e.dataArr);
                }, i.setMathColor = function(i, n, s) {
                    void 0 === s && (s = 0), t1.setMathColor(this._lg, this._data, i, n, s);
                }, t1.setMathColor = function(i, n, s, r, h) {
                    void 0 === h && (h = 0);
                    var e = t1.getConstantInfo(i, n, s);
                    Yr.toArray(e.dataArr, r, 4 * h), n.constants.set(e.constantID, e.dataArr);
                }, t1.getConstantInfo = function(t1, i, n) {
                    var _$s = t1.constantIndex.get(n);
                    if (void 0 === _$s) throw Error("Constant with name " + n + " not found.");
                    return {
                        constantID: _$s,
                        dataArr: i.constants.get(_$s) || []
                    };
                }, i.setVec4 = function(i, n, s) {
                    void 0 === s && (s = 0), t1.setVec4(this._lg, this._data, i, n, s);
                }, t1.setVec4 = function(i, n, s, r, h) {
                    void 0 === h && (h = 0);
                    var e = t1.getConstantInfo(i, n, s);
                    Hr.toArray(e.dataArr, r, 4 * h), n.constants.set(e.constantID, e.dataArr);
                }, i.setVec2 = function(i, n, s) {
                    void 0 === s && (s = 0), t1.setVec2(this._lg, this._data, i, n, s);
                }, t1.setVec2 = function(i, n, s, r, h) {
                    void 0 === h && (h = 0);
                    var e = t1.getConstantInfo(i, n, s);
                    Or.toArray(e.dataArr, r, 2 * h), n.constants.set(e.constantID, e.dataArr);
                }, i.setFloat = function(i, n, s) {
                    void 0 === s && (s = 0), t1.setFloat(this._lg, this._data, i, n, s);
                }, t1.setFloat = function(i, n, s, r, h) {
                    void 0 === h && (h = 0);
                    var e = t1.getConstantInfo(i, n, s);
                    e.dataArr[0 + h] = r, n.constants.set(e.constantID, e.dataArr);
                }, i.setArrayBuffer = function(i, n) {
                    t1.setArrayBuffer(this._lg, this._data, i, n);
                }, t1.setArrayBuffer = function() {
                    throw Error("Method not implemented.");
                }, i.setBuffer = function(i, n) {
                    t1.setBuffer(this._lg, this._data, i, n);
                }, t1.setBuffer = function(t1, i, n, s) {
                    var _$r = t1.attributeIndex.get(n);
                    i.buffers.set(_$r, s);
                }, i.setTexture = function(i, n) {
                    t1.setTexture(this._lg, this._data, i, n);
                }, t1.setTexture = function(t1, i, n, s) {
                    var _$r = t1.attributeIndex.get(n);
                    i.textures.set(_$r, s);
                }, i.setReadWriteBuffer = function(i, n) {
                    t1.setReadWriteBuffer(this._lg, this._data, i, n);
                }, t1.setReadWriteBuffer = function(t1, i, n, s) {
                    var _$r = t1.attributeIndex.get(n);
                    i.buffers.set(_$r, s);
                }, i.setReadWriteTexture = function(i, n) {
                    t1.setReadWriteTexture(this._lg, this._data, i, n);
                }, t1.setReadWriteTexture = function(t1, i, n, s) {
                    var _$r = t1.attributeIndex.get(n);
                    i.textures.set(_$r, s);
                }, i.setSampler = function(i, n) {
                    t1.setSampler(this._lg, this._data, i, n);
                }, t1.setSampler = function(t1, i, n, s) {
                    var _$r = t1.attributeIndex.get(n);
                    i.samplers.set(_$r, s);
                }, i.getParentLayout = function() {
                    var _$t = A.director.root.pipeline, i = _$t.renderGraph.getParent(this._vertID);
                    return _$t.renderGraph.getLayout(i);
                }, i.getCurrentLayout = function() {
                    return A.director.root.pipeline.renderGraph.getLayout(this._vertID);
                }, i.setBuiltinCameraConstants = function(t1) {
                    var i = A.director.root.pipeline;
                    this.getParentLayout(), QY(this, t1, i.pipelineSceneData, t1.scene);
                }, i.setBuiltinDirectionalLightFrustumConstants = function(t1, i, n) {
                    void 0 === n && (n = 0), rK(this, t1, i, n);
                }, i.setBuiltinSpotLightFrustumConstants = function(t1) {
                    rK(this, null, t1, 0);
                }, i.setBuiltinDirectionalLightConstants = function() {
                    eK(this, null, this.getParentLayout());
                }, i.setBuiltinSphereLightConstants = function(t1, i) {
                    var n = A.director.root.pipeline.pipelineSceneData;
                    $Y.set(t1.position.x, t1.position.y, t1.position.z, 1), this.setVec4("cc_lightPos", $Y), $Y.set(t1.size, t1.range, 0, 0), this.setVec4("cc_lightSizeRangeAngle", $Y);
                    var _$s = n.isHDR;
                    if ($Y.set(t1.color.x, t1.color.y, t1.color.z, 0), t1.useColorTemperature) {
                        var _$r = t1.finalColor;
                        $Y.x = _$r.x, $Y.y = _$r.y, $Y.z = _$r.z;
                    }
                    $Y.w = _$s ? t1.luminance * i.exposure * 1e4 : t1.luminance, this.setVec4("cc_lightColor", $Y);
                }, i.setBuiltinSpotLightConstants = function(t1, i) {
                    var n = A.director.root.pipeline.pipelineSceneData, _$s = n.shadows;
                    $Y.set(t1.position.x, t1.position.y, t1.position.z, 2), this.setVec4("cc_lightPos", $Y), $Y.set(t1.size, t1.range, t1.spotAngle, _$s.enabled && t1.shadowEnabled && _$s.type === _A.ShadowMap ? 1 : 0), this.setVec4("cc_lightSizeRangeAngle", $Y), $Y.set(t1.direction.x, t1.direction.y, t1.direction.z, 0), this.setVec4("cc_lightDir", $Y);
                    var _$r = n.isHDR;
                    if ($Y.set(t1.color.x, t1.color.y, t1.color.z, 0), t1.useColorTemperature) {
                        var h = t1.finalColor;
                        $Y.x = h.x, $Y.y = h.y, $Y.z = h.z;
                    }
                    $Y.w = _$r ? t1.luminance * i.exposure * 1e4 : t1.luminance, this.setVec4("cc_lightColor", $Y), $Y.set(0, 0, 0, t1.angleAttenuationStrength), this.setVec4("cc_lightBoundingSizeVS", $Y);
                }, i.setBuiltinPointLightConstants = function(t1, i) {
                    var n = A.director.root.pipeline.pipelineSceneData;
                    $Y.set(t1.position.x, t1.position.y, t1.position.z, 3), this.setVec4("cc_lightPos", $Y), $Y.set(0, t1.range, 0, 0), this.setVec4("cc_lightSizeRangeAngle", $Y);
                    var _$s = n.isHDR;
                    if (t1.useColorTemperature) {
                        var _$r = t1.finalColor;
                        $Y.x = _$r.x, $Y.y = _$r.y, $Y.z = _$r.z;
                    }
                    $Y.w = _$s ? t1.luminance * i.exposure * 1e4 : t1.luminance, $Y.set(t1.color.x, t1.color.y, t1.color.z, 0), this.setVec4("cc_lightColor", $Y);
                }, i.setBuiltinRangedDirectionalLightConstants = function(t1, i) {
                    var n = A.director.root.pipeline.pipelineSceneData;
                    $Y.set(t1.position.x, t1.position.y, t1.position.z, 4), this.setVec4("cc_lightPos", $Y), $Y.set(t1.right.x, t1.right.y, t1.right.z, 0), this.setVec4("cc_lightSizeRangeAngle", $Y), $Y.set(t1.direction.x, t1.direction.y, t1.direction.z, 0), this.setVec4("cc_lightDir", $Y);
                    var _$s = t1.scale;
                    $Y.set(.5 * _$s.x, .5 * _$s.y, .5 * _$s.z, 0), this.setVec4("cc_lightBoundingSizeVS", $Y);
                    var _$r = n.isHDR;
                    if ($Y.set(t1.color.x, t1.color.y, t1.color.z, 0), t1.useColorTemperature) {
                        var h = t1.finalColor;
                        $Y.x = h.x, $Y.y = h.y, $Y.z = h.z;
                    }
                    $Y.w = _$r ? t1.illuminance * i.exposure : t1.illuminance, this.setVec4("cc_lightColor", $Y);
                }, i.hasSampler = function(t1) {
                    var i = this._lg.constantIndex.get(t1);
                    return void 0 !== i && this._data.samplers.has(i);
                }, i.hasTexture = function(t1) {
                    var i = this._lg.constantIndex.get(t1);
                    return void 0 !== i && this._data.textures.has(i);
                }, i.setCustomBehavior = function() {
                    throw Error("Method not implemented.");
                }, s(t1, [
                    {
                        key: "name",
                        get: function get() {
                            return "";
                        },
                        set: function set() {}
                    }
                ]), t1;
            }(), oK = function() {
                function t1() {
                    this.instances = [];
                }
                var i = t1.prototype;
                return i.empty = function() {
                    return 0 === this.instances.length;
                }, i.clear = function() {
                    this.instances.length = 0;
                }, i.add = function(t1, i, n, s) {
                    var _$r = t1.subModels[n], h = _$r.passes[s].priority, e = _$r.priority, u = _$r.shaders[s].typedID, f = t1.priority, _$c = tK.add();
                    _$c.update(_$r, f, h << 16 | e << 8 | s, i, u, s), this.instances.push(_$c);
                }, i.sortOpaqueOrCutout = function() {
                    this.instances.sort(function(t1, i) {
                        return t1.hash !== i.hash ? t1.hash - i.hash : t1.depth !== i.depth ? t1.depth - i.depth : t1.shaderID - i.shaderID;
                    });
                }, i.sortTransparent = function() {
                    this.instances.sort(function(t1, i) {
                        return t1.priority !== i.priority ? t1.priority - i.priority : t1.hash !== i.hash ? t1.hash - i.hash : t1.depth !== i.depth ? i.depth - t1.depth : t1.shaderID - i.shaderID;
                    });
                }, i.recordCommandBuffer = function(t1, i, n, s, r, h) {
                    void 0 === s && (s = null), void 0 === r && (r = 0), void 0 === h && (h = null);
                    for(var e, u = d(this.instances); !(e = u()).done;){
                        var o = e.value, f = o.subModel, _$c = o.passIndex, a = f.inputAssembler, v = f.passes[_$c], l = f.shaders[_$c], w = tA.getOrCreatePipelineState(t1, v, l, i, a);
                        n.bindPipelineState(w), n.bindDescriptorSet(1, v.descriptorSet), s && n.bindDescriptorSet(0, s, [
                            r
                        ]), h ? n.bindDescriptorSet(2, f.descriptorSet, h) : n.bindDescriptorSet(2, f.descriptorSet), n.bindInputAssembler(a), n.draw(a);
                    }
                }, t1;
            }(), fK = function() {
                function t1() {
                    this.passInstances = new Map, this.instanceBuffers = [];
                }
                var i = t1.prototype;
                return i.empty = function() {
                    return 0 === this.passInstances.size;
                }, i.add = function(t1, i, n) {
                    if (void 0 === this.passInstances.get(t1)) {
                        var s = this.passInstances.size;
                        s >= this.instanceBuffers.length && this.instanceBuffers.push(new Uk(t1)), this.passInstances.set(t1, s);
                        var _$r = this.instanceBuffers[s];
                        _$r.pass = t1, _$r.instances;
                    }
                    this.instanceBuffers[this.passInstances.get(t1)].merge(i, n);
                }, i.clear = function() {
                    this.passInstances.clear(), this.instanceBuffers.forEach(function(t1) {
                        t1.clear();
                    });
                }, i.sort = function() {
                    this.instanceBuffers = this.instanceBuffers.sort(Fk);
                }, i.uploadBuffers = function(t1) {
                    for(var i, n = d(this.passInstances.entries()); !(i = n()).done;){
                        var s = i.value;
                        s[0];
                        var _$r = s[1], h = this.instanceBuffers[_$r];
                        h.hasPendingModels && h.uploadBuffers(t1);
                    }
                }, i.recordCommandBuffer = function(t1, i, n, s, r) {
                    void 0 === n && (n = null), void 0 === s && (s = 0), void 0 === r && (r = null);
                    for(var h, e = d(this.instanceBuffers); !(h = e()).done;){
                        var u = h.value;
                        if (u.hasPendingModels) {
                            var o = u.instances, f = u.pass;
                            i.bindDescriptorSet(1, f.descriptorSet);
                            for(var _$c, a = null, v = d(o); !(_$c = v()).done;){
                                var l = _$c.value;
                                if (l.count) {
                                    var w = tA.getOrCreatePipelineState(kw.gfxDevice, f, l.shader, t1, l.ia);
                                    a !== w && (i.bindPipelineState(w), a = w), n && i.bindDescriptorSet(0, n, [
                                        s
                                    ]), r ? i.bindDescriptorSet(2, l.descriptorSet, r) : i.bindDescriptorSet(2, l.descriptorSet, u.dynamicOffsets), i.bindInputAssembler(l.ia), i.draw(l.ia);
                                }
                            }
                        }
                    }
                }, t1;
            }(), cK = function() {
                function t1(t1, i, n) {
                    void 0 === t1 && (t1 = 4294967295), void 0 === i && (i = 4294967295), void 0 === n && (n = 4294967295), this.frustumCulledResultID = void 0, this.lightBoundsCulledResultID = void 0, this.renderQueueTarget = void 0, this.frustumCulledResultID = t1, this.lightBoundsCulledResultID = i, this.renderQueueTarget = n;
                }
                return t1.prototype.update = function(t1, i, n) {
                    void 0 === t1 && (t1 = 4294967295), void 0 === i && (i = 4294967295), void 0 === n && (n = 4294967295), this.frustumCulledResultID = t1, this.lightBoundsCulledResultID = i, this.renderQueueTarget = n;
                }, t1;
            }();
            function aK(t1, i, n, s, r, h) {
                var e;
                r && h && (e = tA.getOrCreatePipelineState(kw.gfxDevice, n, r, i, h)), e && (t1.bindPipelineState(e), t1.bindDescriptorSet(1, n.descriptorSet), t1.bindDescriptorSet(2, s), t1.bindInputAssembler(h), t1.draw(h));
            }
            var vK = function() {
                function t1() {
                    this.probeQueue = new sK, this.opaqueQueue = new oK, this.transparentQueue = new oK, this.opaqueInstancingQueue = new fK, this.transparentInstancingQueue = new fK, this.camera = null, this.sceneFlags = 0, this.lightByteOffset = 4294967295;
                }
                var i = t1.prototype;
                return i.sort = function() {
                    this.opaqueQueue.sortOpaqueOrCutout(), this.transparentQueue.sortTransparent(), this.opaqueInstancingQueue.sort(), this.transparentInstancingQueue.sort();
                }, i.update = function() {
                    this.probeQueue.clear(), this.opaqueQueue.clear(), this.transparentQueue.clear(), this.opaqueInstancingQueue.clear(), this.transparentInstancingQueue.clear(), this.camera = null, this.sceneFlags = 0, this.lightByteOffset = 4294967295;
                }, i.empty = function() {
                    return this.opaqueQueue.empty() && this.transparentQueue.empty() && this.opaqueInstancingQueue.empty() && this.transparentInstancingQueue.empty();
                }, i.recordCommands = function(t1, i, n) {
                    var s = 4294967295 === this.lightByteOffset ? null : [
                        this.lightByteOffset
                    ];
                    3 & n && (this.opaqueQueue.recordCommandBuffer(kw.gfxDevice, i, t1, null, 0, s), this.opaqueInstancingQueue.recordCommandBuffer(i, t1, null, 0, s)), 4 & n && (this.transparentInstancingQueue.recordCommandBuffer(i, t1, null, 0, s), this.transparentQueue.recordCommandBuffer(kw.gfxDevice, i, t1, null, 0, s));
                }, t1;
            }();
            function dK(t1) {
                switch(t1){
                    case 0:
                        return 1;
                    case 1:
                        return 2;
                    case 2:
                        return 16;
                    case 3:
                        return 32;
                    case 4:
                        return 64;
                    case 5:
                        return 4;
                    case 6:
                        return 8;
                    case 7:
                        return 128;
                    case 8:
                        return 256;
                    default:
                        return z("DescriptorType not found"), 256;
                }
            }
            function wK(t1) {
                switch(t1){
                    case 1:
                        return 0;
                    case 2:
                        return 1;
                    case 16:
                        return 2;
                    case 32:
                        return 3;
                    case 64:
                        return 4;
                    case 4:
                        return 5;
                    case 8:
                        return 6;
                    case 128:
                        return 7;
                    case 256:
                        return 8;
                    default:
                        return z("DescriptorTypeOrder not found"), 8;
                }
            }
            function gK(t1, i) {
                return t1.locateChild(t1.N, i || "default");
            }
            function pK(t1, i, n) {
                return t1.locateChild(i, n);
            }
            function yK(t1, i, n) {
                return void 0 === n ? t1.locateChild(i, "default") : "number" == typeof n ? t1.locateChild(i, n.toString()) : t1.locateChild(i, n);
            }
            var _K, mK, bK = new Map([
                [
                    "cc_lightPos",
                    1
                ],
                [
                    "cc_lightColor",
                    1
                ],
                [
                    "cc_lightSizeRangeAngle",
                    1
                ],
                [
                    "cc_lightDir",
                    1
                ],
                [
                    "cc_lightBoundingSizeVS",
                    1
                ]
            ]);
            function kK(t1) {
                for(var i, n = 0, s = d(t1); !(i = s()).done;){
                    var _$r = i.value;
                    if (_$r.count) n += zd(_$r.type) * _$r.count;
                    else {
                        var h = bK.get(_$r.name);
                        if (void 0 === h) if ("cc_joints" !== _$r.name) z("Invalid uniform count: " + _$r.name);
                        else {
                            var e = zd(_$r.type) * e_.LAYOUT.members[0].count;
                            $(e !== e_.SIZE), n += e;
                        }
                        else n += zd(_$r.type) * h;
                    }
                }
                return $(!!n), n;
            }
            function AK(t1, i) {
                var n = JSON.parse(t1[0]), s = JSON.parse(i[0]);
                return 1e4 * n.updateFrequency + 1e3 * n.parameterType + 100 * n.descriptorType + n.visibility - (1e4 * s.updateFrequency + 1e3 * s.parameterType + 100 * s.descriptorType + s.visibility);
            }
            function EK(t1, i) {
                var n = JSON.parse(t1[0]), s = JSON.parse(i[0]);
                return 1e9 * n.updateFrequency + 1e8 * n.parameterType + 1e7 * n.descriptorType + 1e6 * n.visibility + 1e5 * n.accessType + 1e4 * n.viewDimension + 1e3 * n.sampleType + n.format - (1e9 * s.updateFrequency + 1e8 * s.parameterType + 1e7 * s.descriptorType + 1e6 * s.visibility + 1e5 * s.accessType + 1e4 * s.viewDimension + 1e3 * s.sampleType + s.format);
            }
            function TK(t1, i) {
                var n = t1.attributeIndex.get(i);
                if (void 0 === n) {
                    var s = t1.valueNames.length;
                    return t1.attributeIndex.set(i, s), t1.valueNames.push(i), s;
                }
                return n;
            }
            function SK(t1, i) {
                i.bindings.length = 0;
                for(var n = 0; n < t1.descriptorBlocks.length; ++n)for(var s = t1.descriptorBlocks[n], _$r = s.offset, h = 0; h < s.descriptors.length; ++h){
                    var e = s.descriptors[h], u = new md;
                    u.binding = _$r, u.descriptorType = dK(s.type), u.count = e.count, u.stageFlags = s.visibility, u.access = s.accessType, u.viewDimension = s.viewDimension, u.sampleType = s.sampleType, u.format = s.format, u.immutableSamplers = [], i.bindings.push(u), _$r += e.count;
                }
            }
            function OK(t1, i) {
                var n = new bd;
                return SK(i, n), t1 ? t1.createDescriptorSetLayout(n) : null;
            }
            function IK(t1, i) {
                for(var n = 0; n < i._layouts.length; ++n)i.getLayout(n).getSets().forEach(function(i) {
                    var s = i.descriptorSetLayoutData;
                    if (t1) {
                        var _$r = OK(t1, s);
                        _$r && (i.descriptorSetLayout = _$r, i.descriptorSet = t1.createDescriptorSet(new kd(_$r)));
                    } else SK(s, i.descriptorSetLayoutInfo);
                });
            }
            function RK(t1, i) {
                var n = JSON.stringify(i), s = t1.get(n);
                if (s) return s;
                var _$r = new Hq(i.descriptorType, i.visibility, 0);
                return t1.set(n, _$r), _$r;
            }
            function MK(t1, i) {
                var n = JSON.stringify(i), s = t1.get(n);
                if (s) return s;
                var _$r = new Hq(i.descriptorType, i.visibility, 0, i.accessType, i.viewDimension, i.sampleType, i.format);
                return t1.set(n, _$r), _$r;
            }
            function CK(t1) {
                switch(t1){
                    case 26:
                    case 33:
                    case 39:
                        return 2;
                    case 28:
                    case 35:
                    case 41:
                        return 4;
                    case 29:
                    case 36:
                    case 42:
                        return 5;
                    case 31:
                    case 38:
                    case 44:
                        return 9;
                    case 30:
                    case 37:
                    case 43:
                        return 8;
                    default:
                        return 0;
                }
            }
            function NK(t1, i, n, s) {
                for(var _$r = new Map, h = new Map, e = 0; e < s.blocks.length; e++){
                    var u = s.blocks[e], o = jq.isWebGPU ? MK(_$r, {
                        updateFrequency: i,
                        parameterType: 4,
                        descriptorType: 0,
                        visibility: u.stageFlags,
                        accessType: 1,
                        viewDimension: 1,
                        sampleType: 0,
                        format: 0
                    }) : RK(_$r, {
                        updateFrequency: i,
                        parameterType: 4,
                        descriptorType: 0,
                        visibility: u.stageFlags
                    }), f = TK(t1, u.name);
                    o.descriptors.push(new Gq(f, 0, 1)), h.set(f, new Zl(n, 4294967295, u.name, u.members, 1));
                }
                for(var _$c = 0; _$c < s.samplerTextures.length; _$c++){
                    var a = s.samplerTextures[_$c], v = jq.isWebGPU ? MK(_$r, {
                        updateFrequency: i,
                        parameterType: 4,
                        descriptorType: 2,
                        visibility: a.stageFlags,
                        accessType: 1,
                        viewDimension: CK(a.type),
                        sampleType: a.sampleType,
                        format: 0
                    }) : RK(_$r, {
                        updateFrequency: i,
                        parameterType: 4,
                        descriptorType: 2,
                        visibility: a.stageFlags
                    }), l = TK(t1, a.name);
                    v.descriptors.push(new Gq(l, a.type, a.count));
                }
                for(var w = 0; w < s.samplers.length; w++){
                    var g = s.samplers[w], p = jq.isWebGPU ? MK(_$r, {
                        updateFrequency: i,
                        parameterType: 4,
                        descriptorType: 3,
                        visibility: g.stageFlags,
                        accessType: 1,
                        viewDimension: 0,
                        sampleType: 0,
                        format: 0
                    }) : RK(_$r, {
                        updateFrequency: i,
                        parameterType: 4,
                        descriptorType: 3,
                        visibility: g.stageFlags
                    }), _$y = TK(t1, g.name);
                    p.descriptors.push(new Gq(_$y, 32, g.count));
                }
                for(var _$_ = 0; _$_ < s.textures.length; _$_++){
                    var m = s.textures[_$_], b = jq.isWebGPU ? MK(_$r, {
                        updateFrequency: i,
                        parameterType: 4,
                        descriptorType: 4,
                        visibility: m.stageFlags,
                        accessType: 1,
                        viewDimension: CK(m.type),
                        sampleType: m.sampleType,
                        format: 0
                    }) : RK(_$r, {
                        updateFrequency: i,
                        parameterType: 4,
                        descriptorType: 4,
                        visibility: m.stageFlags
                    }), k = TK(t1, m.name);
                    b.descriptors.push(new Gq(k, m.type, m.count));
                }
                for(var A = 0; A < s.buffers.length; A++){
                    var E = s.buffers[A], T = jq.isWebGPU ? MK(_$r, {
                        updateFrequency: i,
                        parameterType: 4,
                        descriptorType: 5,
                        visibility: E.stageFlags,
                        accessType: 1,
                        viewDimension: 1,
                        sampleType: 0,
                        format: 0
                    }) : RK(_$r, {
                        updateFrequency: i,
                        parameterType: 4,
                        descriptorType: 5,
                        visibility: E.stageFlags
                    }), S = TK(t1, E.name);
                    T.descriptors.push(new Gq(S, 0, 1));
                }
                for(var _$O = 0; _$O < s.images.length; _$O++){
                    var _$I = s.images[_$O], _$R = jq.isWebGPU ? MK(_$r, {
                        updateFrequency: i,
                        parameterType: 4,
                        descriptorType: 7,
                        visibility: _$I.stageFlags,
                        accessType: 1,
                        viewDimension: CK(_$I.type),
                        sampleType: 0,
                        format: 0
                    }) : RK(_$r, {
                        updateFrequency: i,
                        parameterType: 4,
                        descriptorType: 7,
                        visibility: _$I.stageFlags
                    }), _$M = TK(t1, _$I.name);
                    _$R.descriptors.push(new Gq(_$M, _$I.type, _$I.count));
                }
                for(var _$C = 0; _$C < s.subpassInputs.length; _$C++){
                    var N = s.subpassInputs[_$C], P = jq.isWebGPU ? MK(_$r, {
                        updateFrequency: i,
                        parameterType: 4,
                        descriptorType: 8,
                        visibility: N.stageFlags,
                        accessType: 1,
                        viewDimension: 4,
                        sampleType: 0,
                        format: 0
                    }) : RK(_$r, {
                        updateFrequency: i,
                        parameterType: 4,
                        descriptorType: 8,
                        visibility: N.stageFlags
                    }), D = TK(t1, N.name);
                    P.descriptors.push(new Gq(D, 0, N.count));
                }
                for(var L, B = jq.isWebGPU ? Array.from(_$r).sort(EK) : Array.from(_$r).sort(AK), F = new Vq(n, 0), U = 0, x = d(B); !(L = x()).done;){
                    var j = L.value, G = j[0], H = j[1], _$V = JSON.parse(G);
                    H.offset = U;
                    for(var _$W, _$X = d(H.descriptors); !(_$W = _$X()).done;){
                        var _$q = _$W.value;
                        if (0 === _$V.descriptorType) {
                            var _$Y = h.get(_$q.descriptorID);
                            if (!_$Y) {
                                z("Uniform block not found for " + _$q.descriptorID);
                                continue;
                            }
                            $(4294967295 === _$Y.binding), _$Y.binding = H.capacity, F.uniformBlocks.set(_$q.descriptorID, _$Y);
                        }
                        void 0 !== F.bindingMap.get(_$q.descriptorID) && z("Duplicated descriptor " + _$q.descriptorID), F.bindingMap.set(_$q.descriptorID, H.offset + H.capacity), H.capacity += _$q.count;
                    }
                    U += H.capacity, F.capacity += H.capacity, 0 === _$V.descriptorType || 1 === _$V.descriptorType ? F.uniformBlockCapacity += H.capacity : 2 === _$V.descriptorType && (F.samplerTextureCapacity += H.capacity), F.descriptorBlocks.push(H);
                }
                return F;
            }
            function PK(t1, i) {
                i.bindings.length = 0;
                for(var n = 0; n < t1.descriptorBlocks.length; ++n)for(var s = t1.descriptorBlocks[n], _$r = s.offset, h = 0; h < s.descriptors.length; ++h){
                    var e = s.descriptors[h], u = new md;
                    u.binding = _$r, u.descriptorType = dK(s.type), u.count = e.count, u.stageFlags = s.visibility, u.access = s.accessType, u.viewDimension = s.viewDimension, u.sampleType = s.sampleType, u.format = s.format, u.immutableSamplers = [], i.bindings.push(u), _$r += e.count;
                }
            }
            function DK(t1, i, n) {
                var s = t1.getSet(i);
                s && s.descriptorSetLayout ? n.setLayouts.push(s.descriptorSetLayout) : n.setLayouts.push(_K);
            }
            function LK(t1, i) {
                jq.type = +(8 === t1.gfxAPI), jq.isWebGPU = 8 === t1.gfxAPI, _K = t1.createDescriptorSetLayout(new bd), mK = t1.createPipelineLayout(new Ad);
                for(var n, s = d(i.v()); !(n = s()).done;)for(var _$r, h = n.value, e = d(i.getLayout(h).getSets()); !(_$r = e()).done;){
                    var u = _$r.value;
                    u[0];
                    var o = u[1];
                    null !== o.descriptorSetLayout && W("descriptor set layout already initialized. It will be overwritten"), PK(o.descriptorSetLayoutData, o.descriptorSetLayoutInfo), o.descriptorSetLayout = t1.createDescriptorSetLayout(o.descriptorSetLayoutInfo);
                }
                for(var f, _$c = d(i.v()); !(f = _$c()).done;){
                    var a = f.value;
                    if (i.h(1, a)) {
                        var v = i.getParent(a), w = i.getLayout(v), g = i.getLayout(a), p = new Ad;
                        DK(w, 3, p), DK(g, 2, p), DK(g, 1, p), DK(g, 0, p), i.j(a).pipelineLayout = t1.createPipelineLayout(p);
                    }
                }
            }
            function BK(t1) {
                for(var i, n = d(t1.v()); !(i = n()).done;)for(var s, _$r = i.value, h = d(t1.getLayout(_$r).getSets()); !(s = h()).done;){
                    var e = s.value;
                    e[0];
                    var u = e[1];
                    null !== u.descriptorSetLayout && u.descriptorSetLayout.destroy();
                }
                mK.destroy(), _K.destroy();
            }
            function xK(t1, i, n, s) {
                if (s < 3) {
                    var _$r = t1.getLayout(n).getSet(s);
                    return _$r ? _$r.descriptorSetLayout ? _$r.descriptorSetLayout : (z("descriptor set layout not initialized"), _K) : _K;
                }
                $(3 === s), $(i === t1.getParent(n));
                var h = t1.getLayout(i).getSet(s);
                return h ? h.descriptorSetLayout ? h.descriptorSetLayout : (z("descriptor set layout not initialized"), _K) : _K;
            }
            function jK(t1, i, n, s) {
                if (s < 3) {
                    var _$r = t1.getLayout(n).getSet(s);
                    return _$r ? _$r.descriptorSetLayout ? _$r.descriptorSetLayout : (z("descriptor set layout not initialized"), null) : null;
                }
                $(3 === s), $(i === t1.getParent(n));
                var h = t1.getLayout(i).getSet(s);
                return h ? h.descriptorSetLayout ? h.descriptorSetLayout : (z("descriptor set layout not initialized"), null) : null;
            }
            function GK(t1, i, n) {
                $(i !== t1.N);
                var s = t1.j(i).shaderIndex.get(n);
                return void 0 === s ? 4294967295 : s;
            }
            function HK(t1, i) {
                var n = t1.attributeIndex.get(i);
                return void 0 === n ? 4294967295 : n;
            }
            function VK(t1, i) {
                return i >= t1.valueNames.length ? "" : t1.valueNames[i];
            }
            var WK = function WK() {
                this.frustumCullingKeyRecycle = new Uh(function() {
                    return new QK;
                }, 8), this.frustumCullingsRecycle = new Uh(function() {
                    return new rJ;
                }, 8), this.lightBoundsCullingRecycle = new Uh(function() {
                    return new tJ;
                }, 8), this.lightBoundsCullingResultRecycle = new Uh(function() {
                    return new iJ;
                }, 8), this.lightBoundsCullingKeyRecycle = new Uh(function() {
                    return new ZK;
                }, 8), this.renderQueueRecycle = new Uh(function() {
                    return new vK;
                }, 8), this.renderQueueQueryRecycle = new Uh(function() {
                    return new cK;
                }, 8);
            }, zK = My.makeMaskExclude([
                My.BitMask.UI_2D,
                My.BitMask.UI_3D,
                My.BitMask.GIZMOS,
                My.BitMask.EDITOR,
                My.BitMask.SCENE_GIZMO,
                My.BitMask.PROFILER
            ]), $K = new WeakMap, XK = "", qK = 0;
            function YK(t1) {
                return $K.has(t1) || $K.set(t1, ++qK), $K.get(t1);
            }
            function KK(t1, i, n) {
                void 0 === n && (n = -1), XK = "";
                var s = t1.camera, _$r = t1.light.light, h = t1.light.level, e = t1.light.probe, u = t1.shadingLight;
                return XK += jY(s ? YK(s) : 0), XK += jY(e ? YK(e) : 0), XK += jY(-1 === n && _$r ? YK(_$r) : 0), XK += jY(-1 !== n && u ? YK(u) : 0), XK += jY(-1 === n ? h : 0), XK += jY(+!!i), XK += jY(n);
            }
            var JK, QK = function() {
                function t1(t1, i) {
                    void 0 === t1 && (t1 = null), void 0 === i && (i = !1), this.sceneData = null, this.castShadows = !1, this.sceneData = t1, this.castShadows = i;
                }
                return t1.prototype.update = function(t1, i) {
                    this.sceneData = t1, this.castShadows = i;
                }, t1;
            }(), ZK = function() {
                function t1(t1, i) {
                    void 0 === t1 && (t1 = null), void 0 === i && (i = -1), this.sceneData = null, this.frustumCullingID = -1, this.sceneData = t1, this.frustumCullingID = i;
                }
                return t1.prototype.update = function(t1, i) {
                    void 0 === t1 && (t1 = null), void 0 === i && (i = -1), this.sceneData = t1, this.frustumCullingID = i;
                }, t1;
            }(), tJ = function() {
                function t1() {
                    this.resultKeyIndex = new Map, this.resultIndex = new Map;
                }
                return t1.prototype.update = function() {
                    this.resultIndex.clear(), this.resultKeyIndex.clear();
                }, t1;
            }(), iJ = function() {
                function t1() {
                    this.instances = [], this.lightByteOffset = 4294967295;
                }
                return t1.prototype.update = function() {
                    return this.instances.length = 0, this.lightByteOffset = 4294967295, this;
                }, t1;
            }();
            function nJ(t1, i, n) {
                return t1 + "-" + i + "-" + n;
            }
            function sJ(t1) {
                var i = t1.split("-");
                return [
                    parseInt(i[0]),
                    parseInt(i[1]),
                    parseInt(i[2])
                ];
            }
            var rJ = function() {
                function t1() {
                    this.resultIndex = new Map, this.resultKeyIndex = new Map;
                }
                return t1.prototype.update = function() {
                    this.resultIndex.clear(), this.resultKeyIndex.clear();
                }, t1;
            }();
            function hJ(t1, i) {
                return t1 && (i & t1.layer) === t1.layer;
            }
            function eJ(t1, i) {
                return !!(i & t1.visFlags);
            }
            function uJ(t1, i) {
                return hJ(t1.node, i) || eJ(t1, i);
            }
            function oJ(t1) {
                return !!((t1.node.layer & zK) === t1.node.layer || zK & t1.visFlags);
            }
            var fJ = new Ie;
            function cJ(t1, i, n) {
                var s = t1.worldBounds, _$r = JK.shadows;
                return n && _$r.type === _A.Planar ? (Ie.transform(fJ, s, _$r.matLight), !zu.aabbFrustum(fJ, i)) : !zu.aabbFrustum(s, i);
            }
            function aJ(t1, i, n, s, r, h) {
                var u, o = JK.skybox, f = o.model, _$c = i.visibility, a = 8 & i.clearFlag;
                !s && o && o.enabled && f && a && h.push(f);
                for(var v, l = d(t1.models); !(v = l()).done;){
                    var w = v.value;
                    if (w.enabled && w.node && (!s || w.castShadow) && !t1.isCulledByLod(i, w)) {
                        var g = w.worldBounds;
                        if (r) if (0 === r.probeType) {
                            if (!uJ(w, _$c) || g && (u = r.boundingBox, !zu.aabbWithAABB(g, u))) continue;
                            h.push(w);
                        } else oJ(w) && h.push(w);
                        else {
                            if (!uJ(w, _$c) || g && cJ(w, n, s)) continue;
                            h.push(w);
                        }
                    }
                }
            }
            var vJ = new Ss;
            function lJ(t1, i) {
                var n = 0;
                return i.node && (Ss.subtract(vJ, i.worldBounds ? i.worldBounds.center : i.node.worldPosition, t1.position), n = Ss.dot(vJ, t1.forward)), n;
            }
            function dJ(t1, i, n, s, r, h, e) {
                var u = e.probeQueue;
                s && u.addToProbeQueue(h, t1);
                for(var o = h.subModels, f = o.length, _$c = JK.skybox.model, a = lJ(r, h), v = 0; v < f; ++v){
                    var l = o[v], _$d = l.passes, w = _$d.length;
                    u.probeMap.includes(l) && (t1 = u.defaultId);
                    for(var g = 0; g < w; ++g)if (h !== _$c || v || g || !i) {
                        var p = _$d[g];
                        if (t1 === p.phaseID) {
                            var _$y = p.blendState.targets[0].blend;
                            (n || !_$y) && (i || _$y) && (1 === p.batchingScheme ? _$y ? e.transparentInstancingQueue.add(p, l, g) : e.opaqueInstancingQueue.add(p, l, g) : _$y ? e.transparentQueue.add(h, a, v, g) : e.opaqueQueue.add(h, a, v, g));
                        }
                    } else e.opaqueQueue.add(h, a, v, g);
                }
            }
            var wJ, gJ = new Ie(0, 0, 0, .5, .5, .5), pJ = new Ie, yJ = function() {
                function t1() {
                    this.frustumCullings = new Map, this.frustumCullingResults = [], this.lightBoundsCullings = new Map, this.lightBoundsCullingResults = [], this.renderQueueIndex = new Map, this.renderQueues = [], this.renderQueueQueryIndex = new Map, this.cullingPools = new WK, this.numFrustumCulling = 0, this.numLightBoundsCulling = 0, this.numRenderQueues = 0, this.layoutGraph = void 0, this.renderGraph = void 0, this.enableLightCulling = !0, this.kFilterMask = 8200, this.kDrawMask = 7, this.kAllMask = this.kFilterMask | this.kDrawMask;
                }
                var i = t1.prototype;
                return i.resetPool = function() {
                    var _$t = this.cullingPools;
                    _$t.frustumCullingKeyRecycle.reset(), _$t.frustumCullingsRecycle.reset(), _$t.lightBoundsCullingRecycle.reset(), _$t.lightBoundsCullingResultRecycle.reset(), _$t.lightBoundsCullingKeyRecycle.reset(), _$t.renderQueueRecycle.reset(), _$t.renderQueueQueryRecycle.reset(), tK.reset();
                }, i.clear = function() {
                    this.resetPool(), this.frustumCullings.clear(), this.frustumCullingResults.length = 0, this.lightBoundsCullings.clear(), this.lightBoundsCullingResults.length = 0, this.renderQueueIndex.clear(), this.renderQueues.length = 0, this.renderQueueQueryIndex.clear(), this.numLightBoundsCulling = 0, this.numFrustumCulling = 0, this.numRenderQueues = 0;
                }, i.buildRenderQueues = function(t1, i, n) {
                    this.layoutGraph = i, this.renderGraph = t1, JK = n, this.TO(t1), this.SO(n), this.OO(), this.IO();
                }, i.RO = function(t1, i) {
                    if (!(4 & t1.cullingFlags) || 0 === (null == (n = t1.shadingLight) ? void 0 : n.type) || !this.enableLightCulling) return 4294967295;
                    var n, s = t1.scene, _$r = this.lightBoundsCullings.get(s);
                    if (!_$r) {
                        var h = this.cullingPools.lightBoundsCullingRecycle.add();
                        h.update(), this.lightBoundsCullings.set(s, h), _$r = this.lightBoundsCullings.get(s);
                    }
                    var e = KK(t1, !1, i), u = _$r.resultIndex.get(e);
                    if (void 0 !== u) return u;
                    var o = this.numLightBoundsCulling++;
                    this.numLightBoundsCulling > this.lightBoundsCullingResults.length && this.lightBoundsCullingResults.push(this.cullingPools.lightBoundsCullingResultRecycle.add().update()), _$r.resultIndex.set(e, o);
                    var f = this.cullingPools.lightBoundsCullingKeyRecycle.add();
                    return f.update(t1, i), _$r.resultKeyIndex.set(e, f), o;
                }, i.MO = function(t1) {
                    var i = this.renderGraph.j(t1), n = i.scene, s = this.frustumCullings.get(n);
                    if (!s) {
                        var _$r = this.cullingPools.frustumCullingsRecycle.add();
                        _$r.update(), this.frustumCullings.set(n, _$r), s = this.frustumCullings.get(n);
                    }
                    var h = !!(8 & i.flags), e = KK(i, h), u = s.resultIndex.get(e);
                    if (void 0 !== u) return u;
                    var o = this.numFrustumCulling++;
                    this.numFrustumCulling > this.frustumCullingResults.length && this.frustumCullingResults.push([]), s.resultIndex.set(e, o);
                    var f = this.cullingPools.frustumCullingKeyRecycle.add();
                    return f.update(i, h), s.resultKeyIndex.set(e, f), o;
                }, i.CO = function(t1, i, n) {
                    var s = this.renderQueueIndex.get(t1);
                    if (void 0 !== s) return this.renderQueues[s].sceneFlags |= i & this.kDrawMask, s;
                    var _$r = this.numRenderQueues++;
                    if (this.numRenderQueues > this.renderQueues.length) {
                        var h = this.cullingPools.renderQueueRecycle.add();
                        h.update(), this.renderQueues.push(h);
                    }
                    var e = this.renderQueues[_$r];
                    return this.renderQueueIndex.set(t1, _$r), e.camera = n, e.sceneFlags = i & this.kAllMask, _$r;
                }, i.TO = function(t1) {
                    for(var i, n = d(t1.v()); !(i = n()).done;){
                        var s = i.value;
                        if (t1.h(9, s) && t1.getValid(s)) {
                            var _$r = t1.j(s);
                            if (_$r.scene) {
                                var h = this.MO(s), e = this.RO(_$r, h), u = t1.getParent(s), o = nJ(h, e, t1.j(u).phaseID), f = this.CO(o, _$r.flags, _$r.camera), _$c = this.cullingPools.renderQueueQueryRecycle.add();
                                _$c.update(h, e, f), this.renderQueueQueryIndex.set(s, _$c);
                            }
                        }
                    }
                }, i.uploadInstancing = function(t1) {
                    for(var i = 0; i !== this.numRenderQueues; ++i){
                        var n = this.renderQueues[i];
                        n.opaqueInstancingQueue.uploadBuffers(t1), n.transparentInstancingQueue.uploadBuffers(t1);
                    }
                }, i.NO = function(t1) {
                    var i = this.renderGraph, n = i.getParent(t1);
                    return i.j(n).phaseID;
                }, i.PO = function(t1, i, n, s) {
                    var _$r = t1.csmLayers, h = n.csmLevel, e = t1.shadows;
                    return e.type === _A.Planar ? i.frustum : (e.enabled && e.type === _A.ShadowMap && n && n.node && _$r.update(t1, i), n.shadowFixedArea || h === bA.LEVEL_1 ? _$r.specialLayer.validFrustum : _$r.layers[s].validFrustum);
                }, i.SO = function(t1) {
                    for(var i, n = d(this.frustumCullings); !(i = n()).done;)for(var s, _$r = i.value, h = _$r[0], e = _$r[1], u = d(e.resultIndex); !(s = u()).done;){
                        var o = s.value, f = o[0], _$c = o[1], a = e.resultKeyIndex.get(f), v = a.sceneData, l = v.light.light, w = v.light.level, g = a.castShadows, p = v.light.probe, _$y = p ? p.camera : v.camera, _$_ = this.frustumCullingResults[_$c];
                        if (p) aJ(h, _$y, _$y.frustum, g, p, _$_);
                        else if (l) switch(l.type){
                            case 2:
                                aJ(h, _$y, l.frustum, g, null, _$_);
                                break;
                            case 0:
                                aJ(h, _$y, this.PO(t1, _$y, l, w), g, null, _$_);
                        }
                        else aJ(h, _$y, _$y.frustum, g, null, _$_);
                    }
                }, i.DO = function(t1, i, n) {
                    for(var s, _$r = t1.aabb, h = d(i); !(s = h()).done;){
                        var e = s.value, u = e.worldBounds;
                        u && !zu.aabbWithAABB(u, _$r) || n.push(e);
                    }
                }, i.LO = function(t1, i, n) {
                    for(var s, _$r = t1.aabb, h = t1.frustum, e = d(i); !(s = e()).done;){
                        var u = s.value, o = u.worldBounds;
                        (!o || zu.aabbWithAABB(_$r, o) && zu.aabbFrustum(o, h)) && n.push(u);
                    }
                }, i.BO = function(t1, i, n) {
                    for(var s, _$r = t1.aabb, h = d(i); !(s = h()).done;){
                        var e = s.value, u = e.worldBounds;
                        u && !zu.aabbWithAABB(_$r, u) || n.push(e);
                    }
                }, i.FO = function(t1, i, n) {
                    gJ.transform(t1.node.worldMatrix, null, null, null, pJ);
                    for(var s, _$r = d(i); !(s = _$r()).done;){
                        var h = s.value, e = h.worldBounds;
                        e && !zu.aabbWithAABB(pJ, e) || n.push(h);
                    }
                }, i.OO = function() {
                    for(var _$t, i = d(this.lightBoundsCullings); !(_$t = i()).done;){
                        var n = _$t.value;
                        n[0];
                        for(var s, _$r = n[1], h = d(_$r.resultIndex); !(s = h()).done;){
                            var e = s.value, u = e[0], o = e[1], f = _$r.resultKeyIndex.get(u), _$c = f.sceneData, a = f.frustumCullingID, v = this.frustumCullingResults[a], l = this.lightBoundsCullingResults[o];
                            switch(_$c.shadingLight.type){
                                case 1:
                                    var w = _$c.shadingLight;
                                    this.DO(w, v, l.instances);
                                    break;
                                case 2:
                                    var g = _$c.shadingLight;
                                    this.LO(g, v, l.instances);
                                    break;
                                case 3:
                                    var p = _$c.shadingLight;
                                    this.BO(p, v, l.instances);
                                    break;
                                case 4:
                                    var _$y = _$c.shadingLight;
                                    this.FO(_$y, v, l.instances);
                            }
                        }
                    }
                }, i.UO = function(t1, i) {
                    return 4294967295 !== t1 ? t1 < this.lightBoundsCullingResults.length ? this.lightBoundsCullingResults[t1].instances : [] : i < this.frustumCullingResults.length ? this.frustumCullingResults[i] : [];
                }, i.IO = function() {
                    for(var _$t, i = d(this.renderQueueIndex); !(_$t = i()).done;){
                        var n = _$t.value, s = n[0], _$r = n[1], h = this.renderQueues[_$r], e = sJ(s), u = e[0], o = e[1], f = e[2], _$c = !!(4 & h.sceneFlags), a = !!(3 & h.sceneFlags), v = !!(8 & h.sceneFlags), l = !!(8192 & h.sceneFlags);
                        if (v || _$c || a || l) {
                            for(var w, g = this.UO(o, u), p = h.camera, _$y = d(g); !(w = _$y()).done;)dJ(f, a, _$c, l, p, w.value, h);
                            h.sort();
                        }
                    }
                }, t1;
            }(), _J = function() {
                function t1() {
                    this.xO = void 0, this.jO = void 0, this.nw = null, this.HO = 0, this.VO = 16, this.WO = 4294967295, this.zO = !1, this.$O = void 0, this.XO = null, this.qO = [], this.YO = new Map;
                }
                var i = t1.prototype;
                return i.init = function(t1, i, n) {
                    this.nw = i, this.jO = t1;
                    var s = this.jO.localLayoutData, _$r = t1.layoutGraph.attributeIndex.get("CCForwardLight"), h = s.uniformBlocks.get(_$r);
                    this.HO = VY(kK(h.members), this.nw.capabilities.uboOffsetAlignment), this.VO = n, this.WO = t1.localLayoutData.bindingMap.get(_$r);
                    var e = this.HO * this.VO;
                    this.$O = this.nw.createBuffer(new Wl(18, 3, e, this.HO)), this.XO = this.nw.createBuffer(new zl(this.$O, 0, this.HO)), this.xO = new Float32Array(e / 4), this.zO = !0;
                }, i.buildLights = function(t1, i, n) {
                    for(var s, _$r = d(t1.lightBoundsCullings); !(s = _$r()).done;){
                        var h = s.value;
                        h[0];
                        for(var e, u = h[1], o = d(u.resultIndex); !(e = o()).done;){
                            var f = e.value, _$c = f[0], a = f[1], v = u.resultKeyIndex.get(_$c).sceneData, l = 1;
                            if (v.camera) l = v.camera.exposure;
                            else {
                                if (!v.light.probe || !v.light.probe.camera) throw Error("Unexpected situation: No camera or probe found.");
                                l = v.light.probe.camera.exposure;
                            }
                            var w = this.addLight(v.shadingLight, i, l, n);
                            t1.lightBoundsCullingResults[a].lightByteOffset = w;
                        }
                    }
                    for(var g, p = d(t1.renderQueueQueryIndex); !(g = p()).done;){
                        var _$y = g.value;
                        _$y[0];
                        var _$_ = _$y[1];
                        if (4294967295 !== _$_.lightBoundsCulledResultID) {
                            var m = t1.lightBoundsCullingResults[_$_.lightBoundsCulledResultID].lightByteOffset;
                            t1.renderQueues[_$_.renderQueueTarget].lightByteOffset = m;
                        }
                    }
                }, i.tryUpdateRenderSceneLocalDescriptorSet = function(t1) {
                    if (t1.lightBoundsCullings.size) {
                        for(var i, n = d(t1.frustumCullings); !(i = n()).done;){
                            var s = i.value, _$r = s[0];
                            s[1];
                            for(var h, e = d(_$r.models); !(h = e()).done;){
                                var u = h.value;
                                if (!u) throw Error("Unexpected null model.");
                                for(var o, f = d(u.subModels); !(o = f()).done;){
                                    var _$c = o.value.descriptorSet, a = _$c.getBuffer(this.WO);
                                    (this.zO || a !== this.XO) && (_$c.bindBuffer(this.WO, this.XO), _$c.update());
                                }
                            }
                        }
                        this.zO = !1;
                    }
                }, i.clear = function() {
                    this.xO.fill(0), this.qO.length = 0, this.YO.clear();
                }, i.addLight = function(t1, i, n, s) {
                    var _$r = this.YO.get(t1);
                    if (void 0 !== _$r) return _$r;
                    if (this.qO.length === this.VO) {
                        this.zO = !0, this.VO *= 2;
                        var h = this.HO * this.VO;
                        this.$O.resize(h), this.XO = this.nw.createBuffer(new zl(this.$O, 0, this.HO));
                        var e = this.xO;
                        this.xO = new Float32Array(h / 4), this.xO.set(e);
                    }
                    var u = this.qO.length;
                    this.qO[u] = t1, this.YO.set(t1, u);
                    var o = this.HO / 4 * u;
                    return WY(t1, i, n, s, this.xO, o, this.HO), u * this.HO;
                }, i.buildLightBuffer = function(t1) {
                    t1.updateBuffer(this.$O, this.xO, this.qO.length * this.HO / 4);
                }, t1;
            }(), mJ = function() {
                function t1(t1) {
                    void 0 === t1 && (t1 = ""), this.name = void 0, this.name = t1, wJ && wJ.pipeline.resourceUses.push(t1);
                }
                var i = t1.prototype;
                return i.checkTexture = function(t1) {
                    var i = wJ.deviceTextures.get(t1);
                    if (!i) return !1;
                    var n = wJ.resourceGraph.getDesc(wJ.resourceGraph.vertex(t1)), _$s = n.width, _$r = n.height, h = function h(t1, i) {
                        return t1 === _$s && i === _$r;
                    };
                    return i.texture ? h(i.texture.width, i.texture.height) : !!i.swapchain && h(i.swapchain.width, i.swapchain.height);
                }, i.createDeviceTex = function(t1) {
                    var i, n = wJ.deviceTextures.get(this.name);
                    n && this.checkTexture(this.name) || (null != (i = n) && i.texture && n.texture.destroy(), n = new kJ(this.name, t1), wJ.deviceTextures.set(this.name, n));
                }, i.checkBuffer = function(t1) {
                    var i = wJ.deviceBuffers.get(t1), n = wJ.resourceGraph.vertex(this.name), _$s = wJ.resourceGraph.getDesc(n);
                    return i.buffer.size >= _$s.width;
                }, i.createDeviceBuf = function(t1) {
                    var i, n = wJ.deviceBuffers.get(this.name);
                    n && this.checkBuffer(this.name) || (null != (i = n) && i.buffer && n.buffer.destroy(), n = new EJ(this.name, t1), wJ.deviceBuffers.set(this.name, n));
                }, i.managed = function(t1) {
                    this.createDeviceTex(t1);
                }, i.managedBuffer = function(t1) {
                    this.createDeviceBuf(t1);
                }, i.managedTexture = function() {}, i.persistentBuffer = function(t1) {
                    this.createDeviceBuf(t1);
                }, i.persistentTexture = function(t1) {
                    this.createDeviceTex(t1);
                }, i.framebuffer = function(t1) {
                    this.createDeviceTex(t1);
                }, i.swapchain = function(t1) {
                    this.createDeviceTex(t1);
                }, i.formatView = function() {}, i.subresourceView = function() {}, s(t1, [
                    {
                        key: "resName",
                        set: function set(t1) {
                            this.name = t1;
                        }
                    }
                ]), t1;
            }(), bJ = function() {
                function t1(t1) {
                    this._name = void 0, this._name = t1;
                }
                return s(t1, [
                    {
                        key: "name",
                        get: function get() {
                            return this._name;
                        }
                    }
                ]), t1;
            }(), kJ = function(t1) {
                function i(i, n) {
                    (_$s = t1.call(this, i) || this)._texture = null, _$s._swapchain = null, _$s._framebuffer = null, _$s._desc = null, _$s._trait = null;
                    var _$s, _$r = wJ.resourceGraph, _$h = _$r.vertex(i);
                    return _$s._desc = _$r.getDesc(_$h), _$s._trait = _$r.getTraits(_$h), _instanceof(n, gw) ? _$s._texture = n : _instanceof(n, iw) ? _$s._framebuffer = n : _instanceof(n, nq) ? _$s._swapchain = n.swapchain : _$s.KO(_$s._desc), _$s;
                }
                h(i, t1);
                var n = i.prototype;
                return n.KO = function(t1) {
                    var _$i = 1;
                    switch(t1.dimension){
                        case 1:
                            _$i = 0;
                            break;
                        case 3:
                            _$i = 2;
                    }
                    var n = [
                        [
                            16,
                            16
                        ],
                        [
                            32,
                            32
                        ],
                        [
                            64,
                            64
                        ],
                        [
                            8,
                            4
                        ],
                        [
                            4,
                            8
                        ],
                        [
                            256,
                            1
                        ],
                        [
                            512,
                            2
                        ]
                    ].reduce(function(i, n) {
                        var _$s = n[0], _$r = n[1];
                        return t1.flags & _$s ? i | _$r : i;
                    }, 0);
                    this._texture = wJ.device.createTexture(new Yl(_$i, n, t1.format, t1.width, t1.height));
                }, n.release = function() {
                    var _$t, _$i;
                    null == (_$t = this.framebuffer) || _$t.destroy(), this._framebuffer = null, null == (_$i = this.texture) || _$i.destroy(), this._texture = null;
                }, s(i, [
                    {
                        key: "texture",
                        get: function get() {
                            return this._texture;
                        }
                    },
                    {
                        key: "framebuffer",
                        get: function get() {
                            return this._framebuffer;
                        },
                        set: function set(t1) {
                            this._framebuffer = t1;
                        }
                    },
                    {
                        key: "description",
                        get: function get() {
                            return this._desc;
                        }
                    },
                    {
                        key: "trait",
                        get: function get() {
                            return this._trait;
                        }
                    },
                    {
                        key: "swapchain",
                        get: function get() {
                            return this._swapchain;
                        }
                    }
                ]), i;
            }(bJ);
            function AJ(t1) {
                var i = A.director.root.pipeline.pipelineSceneData;
                return !!(i.shadows.enabled && i.shadows.type === _A.ShadowMap && t1 && 8 & t1.flags);
            }
            var EJ = function(t1) {
                function i(i) {
                    (n = t1.call(this, i) || this).Rr = null;
                    var n, _$s = wJ.resourceGraph, _$r = _$s.vertex(i), _$h = _$s.getDesc(_$r), e = new Wl(n.JO(_$h.flags), 1, _$h.width);
                    return n.Rr = wJ.device.createBuffer(e), n;
                }
                h(i, t1);
                var n = i.prototype;
                return n.JO = function(t1) {
                    return [
                        [
                            2,
                            64
                        ],
                        [
                            1,
                            16
                        ],
                        [
                            4,
                            32
                        ],
                        [
                            256,
                            1
                        ],
                        [
                            512,
                            2
                        ]
                    ].reduce(function(i, n) {
                        var _$s = n[0], _$r = n[1];
                        return t1 & _$s ? i | _$r : i;
                    }, 0);
                }, n.release = function() {
                    var _$t;
                    null == (_$t = this.Rr) || _$t.destroy(), this.Rr = null;
                }, s(i, [
                    {
                        key: "buffer",
                        get: function get() {
                            return this.Rr;
                        }
                    }
                ]), i;
            }(bJ), TJ = new Float32Array(4), SJ = function() {
                function t1(t1) {
                    this.QO = !1, this.ZO = !1, this.tI = void 0, this.iI = null, this.nI = void 0, this.sI = null, this.rI = 1e4, this.hI = void 0, this.tI = t1;
                }
                var i = t1.prototype;
                return i._createQuadInputAssembler = function() {
                    return wJ.blit.pipelineIAData;
                }, i.createScreenQuad = function() {
                    this.iI || (this.iI = this._createQuadInputAssembler());
                }, i.eI = function(t1) {
                    var i = this;
                    if (t1.scene) {
                        for(var n, _$s = wJ.pipeline, _$r = wJ.commandBuffer, h = t1.scene.sphereLights, e = t1.scene.spotLights, u = t1.exposure, o = s_.LIGHTS_PER_PASS, f = Hr.length, _$c = f * o, a = Ph.create(0, 0, 0, 1), v = 0, l = function l(n, r) {
                            if (!(v >= o) && (Ph.set(a, n.position.x, n.position.y, n.position.z, n.range), zu.sphereFrustum(a, t1.frustum))) {
                                if (Ss.toArray(TJ, n.position), TJ[3] = +!!r, i.hI.set(TJ, v * f + 0 * _$c), Ss.toArray(TJ, n.color), n.useColorTemperature) {
                                    var h = n.colorTemperatureRGB;
                                    TJ[0] *= h.x, TJ[1] *= h.y, TJ[2] *= h.z;
                                }
                                TJ[3] = _$s.pipelineSceneData.isHDR ? n.luminance * u * i.rI : n.luminance, i.hI.set(TJ, v * f + +_$c), TJ[0] = n.size, TJ[1] = n.range, TJ[2] = r ? n.spotAngle : 0, i.hI.set(TJ, v * f + 2 * _$c), r && (Ss.toArray(TJ, n.direction), i.hI.set(TJ, v * f + 3 * _$c)), v++;
                            }
                        }, w = d(h); !(n = w()).done;)l(n.value, !1);
                        for(var g, p = d(e); !(g = p()).done;)l(g.value, !0);
                        this.hI.set([
                            v
                        ], 3 * _$c + 3), _$r.updateBuffer(this.sI, this.hI);
                    }
                }, i.update = function() {
                    64 & this.blit.sceneFlags && this.blit.camera && !this.ZO && (this.eI(this.blit.camera), this.ZO = !0, this.QO = !1), this.QO || (this.nI.update(), this.QO = !0);
                }, i.reset = function() {
                    this.QO = !1, this.ZO = !1;
                }, i.createStageDescriptor = function() {
                    var _$t = this.blit, i = _$t.material.passes[_$t.passID], n = wJ.device;
                    if (this.nI = wJ.blit.stageDescs.get(i) || n.createDescriptorSet(new kd(i.localSetLayout)), wJ.blit.stageDescs.set(i, this.nI), 64 & this.blit.sceneFlags) {
                        this.sI = wJ.blit.lightVolumeBuffer;
                        var _$s = wJ.blit.deferredLitsBufView;
                        this.hI = wJ.blit.lightBufferData, this.hI.fill(0), this.nI.bindBuffer(n_.BINDING, _$s);
                    }
                    this.nI.bindBuffer(Jy.BINDING, wJ.blit.emptyLocalUBO);
                }, s(t1, [
                    {
                        key: "screenQuad",
                        get: function get() {
                            return this.iI;
                        }
                    },
                    {
                        key: "blit",
                        get: function get() {
                            return this.tI;
                        },
                        set: function set(t1) {
                            this.tI = t1;
                        }
                    },
                    {
                        key: "stageDesc",
                        get: function get() {
                            return this.nI;
                        }
                    }
                ]), t1;
            }(), OJ = function() {
                function t1() {
                    this.uI = void 0, this.oI = 0, this.fI = Bk("default"), this.aI = null, this.vI = null, this.lI = -1, this.dI = !1, this.wI = !1, this.gI = !1, this.pI = -1;
                }
                var i = t1.prototype;
                return i.preRecord = function() {}, i.postRecord = function() {}, i.init = function(t1, i, n) {
                    this.reset(), this.queueHint = i.hint, this.queueId = n, this.uI = t1, this.fI = A.rendering.getPhaseID(t1.passID, wJ.renderGraph.getLayout(n));
                }, i.reset = function() {
                    this.dI = !1, this.wI = !1, this.gI = !1;
                }, i.record = function() {
                    this.vI && this.vI.descriptorSet && wJ.commandBuffer.bindDescriptorSet(3, this.vI.descriptorSet);
                }, s(t1, [
                    {
                        key: "phaseID",
                        get: function get() {
                            return this.fI;
                        }
                    },
                    {
                        key: "layoutID",
                        get: function get() {
                            return this.lI;
                        },
                        set: function set(t1) {
                            this.lI = t1;
                            var i = wJ.layoutGraph;
                            this.aI = i.h(1, t1) ? i.j(t1) : null;
                            var n = i.getLayout(t1);
                            this.vI = n.getSet(2);
                        }
                    },
                    {
                        key: "descSetData",
                        get: function get() {
                            return this.vI;
                        }
                    },
                    {
                        key: "renderPhase",
                        get: function get() {
                            return this.aI;
                        }
                    },
                    {
                        key: "queueId",
                        get: function get() {
                            return this.pI;
                        },
                        set: function set(t1) {
                            this.pI = t1;
                        }
                    },
                    {
                        key: "isUpdateUBO",
                        get: function get() {
                            return this.dI;
                        },
                        set: function set(t1) {
                            this.dI = t1;
                        }
                    },
                    {
                        key: "isUploadInstance",
                        get: function get() {
                            return this.wI;
                        },
                        set: function set(t1) {
                            this.wI = t1;
                        }
                    },
                    {
                        key: "isUploadBatched",
                        get: function get() {
                            return this.gI;
                        },
                        set: function set(t1) {
                            this.gI = t1;
                        }
                    },
                    {
                        key: "queueHint",
                        get: function get() {
                            return this.oI;
                        },
                        set: function set(t1) {
                            this.oI = t1;
                        }
                    },
                    {
                        key: "devicePass",
                        get: function get() {
                            return this.uI;
                        }
                    }
                ]), t1;
            }(), IJ = function() {
                function t1() {
                    this.yI = [], this.uI = void 0, this.oI = 0, this._I = void 0, this.fI = Bk("default"), this.aI = null, this.vI = null, this.ma = null, this.mI = null, this.lI = -1, this.dI = !1, this.wI = !1, this.gI = !1, this.kI = null, this.pI = -1;
                }
                var i = t1.prototype;
                return i.init = function(t1, i, n) {
                    this.reset(), this._I = i, this.queueHint = i.hint;
                    var _$s = this.ma = i.viewport;
                    _$s && (this.mI = new Cl(_$s.left, _$s.top, _$s.width, _$s.height)), this.queueId = n, this.uI = t1, this.fI = A.rendering.getPhaseID(t1.passID, wJ.renderGraph.getLayout(n));
                }, i.createBlitDesc = function(t1) {
                    this.kI || (this.kI = new SJ(t1)), this.kI.createScreenQuad(), this.kI.createStageDescriptor();
                }, i.setScene = function(t1, i, n) {
                    var _$s = wJ.pools.addDeviceScene();
                    return _$s.init(this, t1, i, n), this.yI.push(_$s), _$s;
                }, i.reset = function() {
                    var _$t;
                    this.yI.length = 0, this.dI = !1, this.wI = !1, this.gI = !1, null == (_$t = this.kI) || _$t.reset();
                }, i.preRecord = function() {}, i.record = function() {
                    this.vI && this.vI.descriptorSet && wJ.commandBuffer.bindDescriptorSet(3, this.vI.descriptorSet), this.yI.forEach(function(t1) {
                        t1.record();
                    });
                }, i.postRecord = function() {}, s(t1, [
                    {
                        key: "phaseID",
                        get: function get() {
                            return this.fI;
                        }
                    },
                    {
                        key: "layoutID",
                        get: function get() {
                            return this.lI;
                        },
                        set: function set(t1) {
                            this.lI = t1;
                            var i = wJ.layoutGraph;
                            this.aI = i.h(1, t1) ? i.j(t1) : null;
                            var n = i.getLayout(t1);
                            this.vI = n.getSet(2);
                        }
                    },
                    {
                        key: "descSetData",
                        get: function get() {
                            return this.vI;
                        }
                    },
                    {
                        key: "renderPhase",
                        get: function get() {
                            return this.aI;
                        }
                    },
                    {
                        key: "viewport",
                        get: function get() {
                            return this.ma;
                        }
                    },
                    {
                        key: "scissor",
                        get: function get() {
                            return this.mI;
                        }
                    },
                    {
                        key: "queueId",
                        get: function get() {
                            return this.pI;
                        },
                        set: function set(t1) {
                            this.pI = t1;
                        }
                    },
                    {
                        key: "isUpdateUBO",
                        get: function get() {
                            return this.dI;
                        },
                        set: function set(t1) {
                            this.dI = t1;
                        }
                    },
                    {
                        key: "isUploadInstance",
                        get: function get() {
                            return this.wI;
                        },
                        set: function set(t1) {
                            this.wI = t1;
                        }
                    },
                    {
                        key: "isUploadBatched",
                        get: function get() {
                            return this.gI;
                        },
                        set: function set(t1) {
                            this.gI = t1;
                        }
                    },
                    {
                        key: "graphQueue",
                        get: function get() {
                            return this._I;
                        }
                    },
                    {
                        key: "blitDesc",
                        get: function get() {
                            return this.kI;
                        }
                    },
                    {
                        key: "renderScenes",
                        get: function get() {
                            return this.yI;
                        }
                    },
                    {
                        key: "queueHint",
                        get: function get() {
                            return this.oI;
                        },
                        set: function set(t1) {
                            this.oI = t1;
                        }
                    },
                    {
                        key: "devicePass",
                        get: function get() {
                            return this.uI;
                        }
                    }
                ]), t1;
            }(), RJ = function() {
                function t1(t1, i, n) {
                    this._layoutID = 0, this._vertID = -1, this.AI = -1, this._stage = null, this._layout = void 0, this._inputName = void 0, this._descriptorSet = null, this._inputName = n[0], this._layoutID = t1, this._vertID = i;
                    var _$s = wJ.layoutGraph;
                    this._stage = _$s.j(t1), this._layout = _$s.getLayout(t1);
                    var _$r = this._layout.getSet(3);
                    if (_$r) {
                        var h = _$r.descriptorSet, e = wJ.deviceTextures.get(this._inputName), u = null == e ? void 0 : e.texture, o = wJ.deviceBuffers.get(this._inputName), f = null == o ? void 0 : o.buffer;
                        if (!u && !f) throw Error("Could not find texture with resource name " + this._inputName);
                        this.AI = wJ.resourceGraph.vertex(this._inputName);
                        for(var _$c, a = wJ.resourceGraph.getSampler(this.AI), v = d(n[1]); !(_$c = v()).done;){
                            var l = _$c.value.name, w = _$s.attributeIndex.get(l);
                            void 0 !== w && this.EI(h, w, u, f, a, n[1][0].accessType);
                        }
                    }
                }
                return t1.prototype.EI = function(t1, i, n, s, r, h) {
                    for(var e, u = this._layout.getSet(3), o = wJ.resourceGraph.getDesc(this.AI), f = d(u.descriptorSetLayoutData.descriptorBlocks); !(e = f()).done;)for(var _$c = e.value, a = 0; a < _$c.descriptors.length; ++a)if (i === _$c.descriptors[a].descriptorID) {
                        var v = _$c.offset;
                        if (n) {
                            t1.bindTexture(v + a, n);
                            var l = wJ.renderGraph.getData(this._vertID).samplers.get(i) || wJ.device.getSampler(r);
                            t1.bindSampler(v + a, l);
                        } else if (4 & o.flags) {
                            var w = 0 !== h ? 8388608 : 32768;
                            t1.bindBuffer(_$c.offset + a, s, 0, w);
                        } else t1.bindBuffer(v + a, s);
                        this._descriptorSet || (this._descriptorSet = t1);
                        break;
                    }
                }, s(t1, [
                    {
                        key: "descriptorSet",
                        get: function get() {
                            return this._descriptorSet;
                        }
                    },
                    {
                        key: "layoutID",
                        get: function get() {
                            return this._layoutID;
                        }
                    },
                    {
                        key: "vertID",
                        get: function get() {
                            return this._vertID;
                        }
                    },
                    {
                        key: "stage",
                        get: function get() {
                            return this._stage;
                        }
                    },
                    {
                        key: "layout",
                        get: function get() {
                            return this._layout;
                        }
                    }
                ]), t1;
            }(), MJ = new Ul, CJ = new Cl, NJ = new mJ, PJ = function() {
                function t1(t1, i) {
                    this._renderPass = void 0, this._framebuffer = void 0, this._clearColor = [], this._deviceQueues = new Map, this._clearDepth = 1, this._clearStencil = 0, this._passID = void 0, this._rasterID = void 0, this._rasterPass = void 0, this._layoutName = void 0, this._viewport = null, this.us = null, this.TI = 0, this._rasterID = t1, this._rasterPass = i;
                    var n = wJ.device;
                    this._layoutName = wJ.renderGraph.getLayout(t1), this._passID = A.rendering.getPassID(this._layoutName);
                    var _$s = new ad;
                    _$s.format = 55;
                    for(var _$r, h = [], e = [], u = null, o = null, f = null, _$c = d(i.rasterViews); !(_$r = _$c()).done;){
                        var a = _$r.value, v = a[0], l = a[1], w = wJ.deviceTextures.get(v);
                        if (w) {
                            var g = wJ.resourceGraph, p = g.vertex(v), _$y = g.object(p);
                            if (w.framebuffer && _instanceof(_$y, iw) && w.framebuffer !== _$y) w.framebuffer = _$y;
                            else if (w.texture) {
                                var _$_ = g.getDesc(p);
                                w.texture.width === _$_.width && w.texture.height === _$_.height || w.texture.resize(_$_.width, _$_.height);
                            }
                        } else this.visitResource(v), w = wJ.deviceTextures.get(v);
                        if (o || (o = w.swapchain), f || (f = w.framebuffer), 0 === l.attachmentType) {
                            w.swapchain || w.framebuffer || e.push(w.texture);
                            var m = new cd;
                            m.format = w.description.format, m.sampleCount = w.description.sampleCount, m.loadOp = l.loadOp, m.storeOp = l.storeOp, m.barrier = n.getGeneralBarrier(new gd(2097152 * (0 === l.loadOp), 2097152 * (0 === l.storeOp)));
                            var b = new xl;
                            b.copy(l.clearColor), this._clearColor.push(b), h.push(m);
                        } else 1 === l.attachmentType && (_$s.depthStoreOp = l.storeOp, _$s.stencilStoreOp = l.storeOp, _$s.depthLoadOp = l.loadOp, _$s.stencilLoadOp = l.loadOp, _$s.barrier = n.getGeneralBarrier(new gd(4194304 * (0 === l.loadOp), 4194304 * (0 === l.storeOp))), w.swapchain || w.framebuffer ? w.swapchain && (u = w.swapchain.depthStencilTexture) : u = w.texture, this._clearDepth = l.clearColor.x, this._clearStencil = l.clearColor.y);
                    }
                    if (0 === h.length) {
                        var k = new cd;
                        h.push(k);
                    }
                    if (0 === e.length && !o && !f) {
                        var E = n.createTexture(new Yl);
                        e.push(E);
                    }
                    var T = new dd;
                    T.colorAttachments = h, (o ? o.depthStencilTexture : u) && (T.depthStencilAttachment = _$s), this._renderPass = n.createRenderPass(T), this.SI(f, o ? [
                        o.colorTexture
                    ] : e, o ? o.depthStencilTexture : u);
                }
                var i = t1.prototype;
                return i.addIdxOfRD = function() {
                    this.TI++;
                }, i.visitResource = function(t1) {
                    var i = wJ.resourceGraph, n = i.vertex(t1);
                    NJ.resName = t1, i.visitVertex(NJ, n);
                }, i.addQueue = function(t1) {
                    this._deviceQueues.set(t1.queueId, t1);
                }, i.preRecord = function() {
                    wJ.passDescriptorSet = OY(this.layoutName).descriptorSet;
                }, i._applyRenderLayout = function(t1) {
                    var i = wJ.renderGraph.getLayout(this._rasterID);
                    if (i) {
                        var n = wJ.layoutGraph, _$s = n.locateChild(n.N, i);
                        4294967295 !== _$s && (this.us = new RJ(_$s, this._rasterID, t1));
                    }
                }, i.getGlobalDescData = function() {
                    var _$t = wJ.layoutGraph.locateChild(wJ.layoutGraph.N, "default");
                    return wJ.layoutGraph.getLayout(_$t).getSet(3);
                }, i._applyViewport = function() {
                    this._viewport = null;
                    var _$t = this._rasterPass.viewport;
                    0 === _$t.left && 0 === _$t.top && 0 === _$t.width && 0 === _$t.height || (this._viewport = _$t);
                }, i.beginPass = function() {
                    var _$t = this.framebuffer.colorTextures[0];
                    this._applyViewport(_$t);
                    var i = wJ.commandBuffer;
                    this._viewport ? (CJ.x = this._viewport.left, CJ.y = this._viewport.top, CJ.width = this._viewport.width, CJ.height = this._viewport.height) : (CJ.y = CJ.x = 0, CJ.width = _$t.width, CJ.height = _$t.height), i.beginRenderPass(this.renderPass, this.framebuffer, CJ, this.clearColor, this.clearDepth, this.clearStencil), wJ.passDescriptorSet && i.bindDescriptorSet(0, wJ.passDescriptorSet);
                }, i.endPass = function() {
                    wJ.commandBuffer.endRenderPass();
                }, i.record = function() {
                    this.beginPass();
                    for(var _$t, i = d(this._deviceQueues.values()); !(_$t = i()).done;)_$t.value.record();
                    this.endPass();
                }, i.postRecord = function() {}, i.OI = function(t1) {
                    for(var i, n = d(t1.computeViews); !(i = n()).done;){
                        var _$s = i.value;
                        this._applyRenderLayout(_$s);
                    }
                    this.renderLayout && this.renderLayout.descriptorSet && this.renderLayout.descriptorSet.update();
                }, i.processRenderLayout = function() {
                    this.OI(this._rasterPass);
                }, i.SI = function(t1, i, n) {
                    (t1 || i.length) && (this._framebuffer && t1 !== this._framebuffer && this._framebuffer.destroy(), this._framebuffer = t1 || wJ.device.createFramebuffer(new _d(this._renderPass, i, n)));
                }, i.resetResource = function(t1, i) {
                    var n, _$s, _$r, h;
                    this._rasterID = t1, this._rasterPass = i, this._layoutName = wJ.renderGraph.getLayout(t1), this._passID = A.rendering.getPassID(this._layoutName), this._deviceQueues.clear(), this.TI = 0;
                    for(var e, u = null, o = [], f = this._framebuffer, _$c = null != (n = null == f ? void 0 : f.depthStencilTexture) ? n : null, a = f ? _$c : null, v = null != (_$s = null == f ? void 0 : f.width) ? _$s : 0, l = null != (_$r = null == f ? void 0 : f.height) ? _$r : 0, w = 0, g = 0, p = d(i.rasterViews); !(e = p()).done;){
                        var _$y = e.value, _$_ = _$y[0];
                        if (2 !== _$y[1].attachmentType) {
                            var m = wJ.resourceGraph.getDesc(wJ.resourceGraph.vertex(_$_));
                            w = m.width, g = m.height;
                            break;
                        }
                    }
                    for(var b, k = (null == f ? void 0 : f.colorTextures.some(function(t1) {
                        return !t1 || 0 === t1.getTextureHandle();
                    })) || _$c && 0 === _$c.getTextureHandle(), E = w !== v || g !== l || null != (h = null == f ? void 0 : f.needRebuild) && h || k, T = d(i.rasterViews); !(b = T()).done;){
                        var S = b.value, _$O = S[0], _$I = S[1], _$R = wJ.deviceTextures.get(_$O);
                        _$R || (this.visitResource(_$O), _$R = wJ.deviceTextures.get(_$O));
                        var _$M = wJ.resourceGraph, _$C = _$M.vertex(_$O), N = _$M.object(_$C), P = _$M.getDesc(_$C);
                        if (_$R.framebuffer && _instanceof(N, iw) && (_$R.framebuffer !== N || N !== this._framebuffer)) u = this._framebuffer = _$R.framebuffer = N;
                        else if (_$R.texture && E) {
                            var D = _$R.texture;
                            D.resize(P.width, P.height), 0 === _$I.attachmentType ? o.push(D) : 1 === _$I.attachmentType && (a = D);
                        }
                    }
                    this.SI(u, o, a);
                }, s(t1, [
                    {
                        key: "indexOfRD",
                        get: function get() {
                            return this.TI;
                        }
                    },
                    {
                        key: "rasterID",
                        get: function get() {
                            return this._rasterID;
                        }
                    },
                    {
                        key: "layoutName",
                        get: function get() {
                            return this._layoutName;
                        }
                    },
                    {
                        key: "passID",
                        get: function get() {
                            return this._passID;
                        }
                    },
                    {
                        key: "renderLayout",
                        get: function get() {
                            return this.us;
                        }
                    },
                    {
                        key: "renderPass",
                        get: function get() {
                            return this._renderPass;
                        }
                    },
                    {
                        key: "framebuffer",
                        get: function get() {
                            return this._framebuffer;
                        }
                    },
                    {
                        key: "clearColor",
                        get: function get() {
                            return this._clearColor;
                        }
                    },
                    {
                        key: "clearDepth",
                        get: function get() {
                            return this._clearDepth;
                        }
                    },
                    {
                        key: "clearStencil",
                        get: function get() {
                            return this._clearStencil;
                        }
                    },
                    {
                        key: "deviceQueues",
                        get: function get() {
                            return this._deviceQueues;
                        }
                    },
                    {
                        key: "viewport",
                        get: function get() {
                            return this._viewport;
                        }
                    }
                ]), t1;
            }(), DJ = function() {
                function t1() {
                    this._id = void 0, this._pass = void 0;
                }
                return t1.prototype.applyInfo = function(t1, i) {
                    this._id = t1, this._pass = i;
                }, s(t1, [
                    {
                        key: "id",
                        get: function get() {
                            return this._id;
                        }
                    },
                    {
                        key: "pass",
                        get: function get() {
                            return this._pass;
                        }
                    }
                ]), t1;
            }(), LJ = function() {
                function t1(t1) {
                    this._deviceQueues = [], this._passID = void 0, this._layoutName = void 0, this._viewport = null, this.II = void 0, this.us = null, this.II = t1, this._layoutName = wJ.renderGraph.getLayout(t1.id), this._passID = A.rendering.getPassID(this._layoutName);
                    for(var i, n = d(t1.pass.computeViews); !(i = n()).done;){
                        var _$s = i.value, _$r = wJ.deviceTextures.get(_$s[0]);
                        _$r || (this.visitResource(_$s[0]), _$r = wJ.deviceTextures.get(_$s[0])), this._applyRenderLayout(_$s);
                    }
                    this.renderLayout && this.renderLayout.descriptorSet && this.renderLayout.descriptorSet.update();
                }
                var i = t1.prototype;
                return i.preRecord = function() {
                    wJ.passDescriptorSet = OY(this.layoutName).descriptorSet;
                }, i.postRecord = function() {}, i.visitResource = function(t1) {
                    var i = wJ.resourceGraph, n = i.vertex(t1);
                    NJ.resName = t1, i.visitVertex(NJ, n);
                }, i.addQueue = function(t1) {
                    this._deviceQueues.push(t1);
                }, i._applyRenderLayout = function(t1) {
                    var i = wJ.renderGraph.getLayout(this.II.id);
                    if (i) {
                        var n = wJ.layoutGraph, _$s = n.locateChild(n.N, i);
                        4294967295 !== _$s && (this.us = new RJ(_$s, this.II.id, t1));
                    }
                }, i.getGlobalDescData = function() {
                    var _$t = wJ.layoutGraph.locateChild(wJ.layoutGraph.N, "default");
                    return wJ.layoutGraph.getLayout(_$t).getSet(3);
                }, i.record = function() {
                    var _$t = wJ.commandBuffer;
                    wJ.passDescriptorSet && _$t.bindDescriptorSet(0, wJ.passDescriptorSet);
                    for(var i, n = d(this._deviceQueues); !(i = n()).done;)i.value.record();
                    IY(wJ.renderGraph.getData(this.II.id), -1, 0, wJ.renderGraph.getLayout(this.II.id));
                }, i.resetResource = function(t1, i) {
                    this.II.applyInfo(t1, i), this._layoutName = wJ.renderGraph.getLayout(t1), this._passID = A.rendering.getPassID(this._layoutName), this._deviceQueues.length = 0;
                    for(var n, _$s = d(this.II.pass.computeViews); !(n = _$s()).done;){
                        var _$r = n.value;
                        this._applyRenderLayout(_$r);
                    }
                    this.renderLayout && this.renderLayout.descriptorSet && this.renderLayout.descriptorSet.update();
                }, s(t1, [
                    {
                        key: "layoutName",
                        get: function get() {
                            return this._layoutName;
                        }
                    },
                    {
                        key: "passID",
                        get: function get() {
                            return this._passID;
                        }
                    },
                    {
                        key: "renderLayout",
                        get: function get() {
                            return this.us;
                        }
                    },
                    {
                        key: "deviceQueues",
                        get: function get() {
                            return this._deviceQueues;
                        }
                    },
                    {
                        key: "computePassInfo",
                        get: function get() {
                            return this.II;
                        }
                    }
                ]), t1;
            }(), BJ = new Ul, FJ = function() {
                function t1() {
                    this._currentQueue = void 0, this._renderPass = void 0, this._scene = null, this._camera = null, this._sceneData = void 0, this._blit = void 0, this._sceneID = -1;
                }
                var i = t1.prototype;
                return i.preRecord = function() {
                    this._blit && 0 === this._blit.blitType && (this._currentQueue.createBlitDesc(this._blit), this._currentQueue.blitDesc.update()), wJ.lightResource.buildLightBuffer(wJ.commandBuffer), wJ.lightResource.tryUpdateRenderSceneLocalDescriptorSet(wJ.culling);
                }, i.postRecord = function() {}, i.init = function(t1, i, n, s) {
                    this._currentQueue = t1, this._sceneData = n, this._blit = s, this._sceneID = i, this._renderPass = t1.devicePass.renderPass;
                    var _$r = n && n.camera ? n.camera : s && s.camera ? s.camera : null;
                    _$r && (this._scene = _$r.scene, this._camera = _$r);
                }, i._record3D = function() {
                    for(var _$t, i = this._blit, n = wJ.device, _$s = wJ.commandBuffer, _$r = d(i.models); !(_$t = _$r()).done;)for(var h, e = d(_$t.value.subModels); !(h = e()).done;)for(var u = h.value, o = u.inputAssembler, f = u.passes.length, _$c = 0; _$c < f; ++_$c){
                        var a = u.passes[_$c], v = u.shaders[_$c], l = tA.getOrCreatePipelineState(n, a, v, this._renderPass, o);
                        _$s.bindPipelineState(l), _$s.bindDescriptorSet(1, a.descriptorSet), _$s.bindDescriptorSet(2, u.descriptorSet), _$s.bindInputAssembler(o), _$s.draw(o);
                    }
                }, i._recordUI = function() {
                    for(var _$t = this.camera.scene.batches, i = 0; i < _$t.length; i++){
                        var n = _$t[i], _$s = !1;
                        if (this.camera.visibility & n.hm && (_$s = !0), _$s) for(var _$r = n.shaders.length, h = 0; h < _$r; h++){
                            var e = n.passes[h];
                            if (e.phaseID === this._currentQueue.phaseID) {
                                var u = n.shaders[h], o = n.um, f = n.om;
                                aK(wJ.commandBuffer, this._renderPass, e, f, u, o);
                            }
                        }
                    }
                }, i._showProfiler = function() {
                    var i = wJ.pipeline.profiler;
                    if (i && i.enabled && wJ.passShowStatistics) {
                        var n = wJ.profilerDescriptorSet, _$s = this._renderPass, _$r = wJ.commandBuffer, h = i.subModels[0], e = h.passes[0], u = h.inputAssembler;
                        MJ.width = CJ.width, MJ.height = CJ.height, _$r.setViewport(MJ), _$r.setScissor(CJ), _$r.bindDescriptorSet(0, n), aK(_$r, _$s, e, h.descriptorSet, h.shaders[0], u);
                    }
                }, i.RI = function() {
                    if (this.blit) {
                        var _$t = this.blit, i = _$t.material.passes[_$t.passID];
                        i.update();
                        var n = i.getShaderVariant(), _$s = this._currentQueue.blitDesc, _$r = _$s.screenQuad.quadIA;
                        aK(wJ.commandBuffer, this._renderPass, i, _$s.stageDesc, n, _$r);
                    }
                }, i._updateGlobal = function(t1, i) {
                    var n = this._currentQueue.devicePass;
                    n.addIdxOfRD(), IY(t1, i, n.indexOfRD, wJ.renderGraph.getLayout(n.rasterID));
                }, i._updateRenderData = function() {
                    var _$t;
                    if (!this._currentQueue.isUpdateUBO) {
                        var i = this._currentQueue.devicePass, n = i.rasterID, _$s = wJ.renderGraph.getData(n), _$r = this.sceneID;
                        this._updateGlobal(wJ.renderGraph.globalRenderData, _$r), this._updateGlobal(_$s, _$r);
                        var h = this._currentQueue.queueId, e = wJ.renderGraph.getData(h);
                        this._updateGlobal(e, _$r);
                        var u = wJ.renderGraph.getData(_$r);
                        u && this._updateGlobal(u, _$r), i.processRenderLayout(), null == (_$t = wJ.passDescriptorSet) || _$t.update(), this._currentQueue.isUpdateUBO = !0;
                    }
                }, i.MI = function() {
                    var _$t = this._currentQueue.viewport;
                    if (_$t) wJ.commandBuffer.setViewport(_$t), wJ.commandBuffer.setScissor(this._currentQueue.scissor);
                    else if (!this._currentQueue.devicePass.viewport) {
                        var i = this._currentQueue.devicePass.framebuffer.colorTextures[0], n = this.sceneData ? this.sceneData.light : null, _$s = AJ(this.sceneData) && this.sceneData && n.light ? pY(this.camera, i.width, i.height, n.light, n.level) : pY(this.camera, i.width, i.height);
                        BJ.left = _$s.x, BJ.top = _$s.y, BJ.width = _$s.width, BJ.height = _$s.height, wJ.commandBuffer.setViewport(BJ), wJ.commandBuffer.setScissor(_$s);
                    }
                }, i.record = function() {
                    var _$t = this._currentQueue.devicePass, i = wJ.culling;
                    if (this._updateRenderData(), this.MI(), this.blit) switch(this.blit.blitType){
                        case 0:
                            this.RI();
                            break;
                        case 1:
                            this._recordUI();
                            break;
                        case 2:
                            this._showProfiler();
                            break;
                        case 3:
                            this._record3D();
                    }
                    else {
                        var n, _$s = i.renderQueueQueryIndex.get(this.sceneID), _$r = i.renderQueues[_$s.renderQueueTarget], h = this.sceneData, e = !!(8192 & h.flags);
                        e && _$r.probeQueue.applyMacro(), _$r.recordCommands(wJ.commandBuffer, this._renderPass, h.flags), e && _$r.probeQueue.removeMacro(), 512 & h.flags && (null == (n = this.camera.geometryRenderer) || n.render(_$t.renderPass, wJ.commandBuffer, wJ.pipeline.pipelineSceneData));
                    }
                }, s(t1, [
                    {
                        key: "blit",
                        get: function get() {
                            return this._blit;
                        }
                    },
                    {
                        key: "sceneData",
                        get: function get() {
                            return this._sceneData;
                        }
                    },
                    {
                        key: "sceneID",
                        get: function get() {
                            return this._sceneID;
                        }
                    },
                    {
                        key: "camera",
                        get: function get() {
                            return this._camera;
                        }
                    }
                ]), t1;
            }(), UJ = function() {
                function t1() {
                    this.deviceQueuePool = void 0, this.computeQueuePool = void 0, this.passPool = void 0, this.deviceScenePool = void 0, this.deviceQueuePool = new Uh(function() {
                        return new IJ;
                    }, 16), this.deviceScenePool = new Uh(function() {
                        return new FJ;
                    }, 16), this.computeQueuePool = new Uh(function() {
                        return new OJ;
                    }, 16), this.passPool = new Uh(function() {
                        return {
                            priority: 0,
                            hash: 0,
                            depth: 0,
                            shaderId: 0,
                            subModel: null,
                            passIdx: 0
                        };
                    }, 64);
                }
                var i = t1.prototype;
                return i.addDeviceQueue = function() {
                    return this.deviceQueuePool.add();
                }, i.addComputeQueue = function() {
                    return this.computeQueuePool.add();
                }, i.addDeviceScene = function() {
                    return this.deviceScenePool.add();
                }, i.reset = function() {
                    this.deviceQueuePool.reset(), this.computeQueuePool.reset(), this.deviceScenePool.reset();
                }, t1;
            }(), xJ = new Cl, jJ = function() {
                function t1(t1) {
                    this.CI = void 0, this.zr = void 0, this.Qn = void 0, this.Zn = void 0, this.sI = void 0, this.hI = void 0, this.NI = void 0, this.DI = void 0, this.LI = new Map, this.zr = t1, this.Qn = t1.width, this.Zn = t1.height, this.CI = this.BI();
                    var i = this.FI(0, new Cl(0, 0, t1.width, t1.height));
                    this.CI.quadVB.update(i), this.xI(), this.DI = t1.device.createBuffer(new Wl(18, 1, 224, 224));
                }
                var i = t1.prototype;
                return i.resize = function(t1, i) {
                    if (t1 !== this.Qn || i !== this.Zn) {
                        xJ.y = xJ.x = 0, xJ.width = t1, xJ.height = i;
                        var n = this.FI(0, xJ);
                        this.CI.quadVB.update(n);
                    }
                }, i.xI = function() {
                    var _$t = this.zr.root.device, i = 80 * s_.LIGHTS_PER_PASS;
                    i = Math.ceil(i / _$t.capabilities.uboOffsetAlignment) * _$t.capabilities.uboOffsetAlignment, this.sI = _$t.createBuffer(new Wl(18, 3, i, _$t.capabilities.uboOffsetAlignment)), this.NI = _$t.createBuffer(new zl(this.sI, 0, i)), this.hI = new Float32Array(i / 4);
                }, i.FI = function(t1, i) {
                    var n = i.x / this.zr.width, _$s = (i.x + i.width) / this.zr.width, _$r = i.y / this.zr.height, h = (i.y + i.height) / this.zr.height;
                    if (this.zr.root.device.capabilities.screenSpaceSignY > 0) {
                        var e = [
                            h,
                            _$r
                        ];
                        _$r = e[0], h = e[1];
                    }
                    var u = new Float32Array(16), o = function o(t1, i, n, s, r, h, e, o, f, c, a, v, l, d, w, g) {
                        u.set([
                            t1,
                            i,
                            n,
                            s,
                            r,
                            h,
                            e,
                            o,
                            f,
                            c,
                            a,
                            v,
                            l,
                            d,
                            w,
                            g
                        ]);
                    };
                    switch(t1){
                        case 0:
                            o(-1, -1, n, h, 1, -1, _$s, h, -1, 1, n, _$r, 1, 1, _$s, _$r);
                            break;
                        case 1:
                            o(-1, -1, _$s, h, 1, -1, _$s, _$r, -1, 1, n, h, 1, 1, n, _$r);
                            break;
                        case 2:
                            o(-1, -1, n, _$r, 1, -1, _$s, _$r, -1, 1, n, h, 1, 1, _$s, h);
                            break;
                        case 3:
                            o(-1, -1, n, _$r, 1, -1, n, h, -1, 1, _$s, _$r, 1, 1, _$s, h);
                    }
                    return u;
                }, i.BI = function() {
                    var _$t = new hA, i = A.director.root.device, n = i.createBuffer(new Wl(10, 3, 64, 16));
                    if (!n) return _$t;
                    var _$s = i.createBuffer(new Wl(6, 1, 12, 2));
                    if (!_$s) return _$t;
                    var _$r = new Uint16Array(6);
                    _$r[0] = 0, _$r[1] = 1, _$r[2] = 2, _$r[3] = 1, _$r[4] = 3, _$r[5] = 2, _$s.update(_$r.buffer);
                    var h = [
                        ,
                        , 
                    ];
                    h[0] = new ud("a_position", 21), h[1] = new ud("a_texCoord", 21);
                    var e = i.createInputAssembler(new fd(h, [
                        n
                    ], _$s));
                    return _$t.quadIB = _$s, _$t.quadVB = n, _$t.quadIA = e, _$t;
                }, s(t1, [
                    {
                        key: "pipelineIAData",
                        get: function get() {
                            return this.CI;
                        }
                    },
                    {
                        key: "deferredLitsBufView",
                        get: function get() {
                            return this.NI;
                        }
                    },
                    {
                        key: "lightVolumeBuffer",
                        get: function get() {
                            return this.sI;
                        }
                    },
                    {
                        key: "lightBufferData",
                        get: function get() {
                            return this.hI;
                        }
                    },
                    {
                        key: "stageDescs",
                        get: function get() {
                            return this.LI;
                        }
                    },
                    {
                        key: "emptyLocalUBO",
                        get: function get() {
                            return this.DI;
                        }
                    }
                ]), t1;
            }(), GJ = function() {
                function t1(t1, i, n, s, r, h, e, u) {
                    void 0 === u && (u = null), this.device = void 0, this.pipeline = void 0, this.commandBuffer = void 0, this.pipelineSceneData = void 0, this.resourceGraph = void 0, this.devicePasses = new Map, this.deviceTextures = new Map, this.deviceBuffers = new Map, this.layoutGraph = void 0, this.root = void 0, this.pools = void 0, this.blit = void 0, this.culling = void 0, this.lightResource = new _J, this.renderGraph = void 0, this.width = void 0, this.height = void 0, this.cullCamera = void 0, this.passDescriptorSet = void 0, this.profilerDescriptorSet = void 0, this.passShowStatistics = !1, this.pipeline = t1, this.device = i, this.commandBuffer = i.commandBuffer, this.pipelineSceneData = t1.pipelineSceneData, this.resourceGraph = n, this.renderGraph = s, this.root = A.director.root, this.layoutGraph = r, this.width = h, this.height = e, this.pools = new UJ, this.blit = new jJ(this), this.culling = new yJ, this.passDescriptorSet = u, this.profilerDescriptorSet = OY("default").descriptorSet;
                }
                var i = t1.prototype;
                return i.reset = function() {
                    this.culling.clear(), this.pools.reset(), this.cullCamera = null, this.lightResource.clear(), this.passShowStatistics = !1;
                }, i.resize = function(t1, i) {
                    this.width = t1, this.height = i, this.blit.resize(t1, i);
                }, t1;
            }(), HJ = function() {
                function t1(t1, i, n, s, r, h) {
                    this._context = void 0, this.jI = void 0, wJ = this._context = new GJ(t1, i, n, new Nq, s, r, h);
                    var e = A.rendering.programLib;
                    wJ.lightResource.init(e, i, 16);
                }
                var i = t1.prototype;
                return i.resize = function(t1, i) {
                    wJ.resize(t1, i);
                }, i.GI = function() {
                    for(var _$t, i = wJ.pipeline.resourceUses, n = [], s = wJ.deviceTextures, _$r = d(s); !(_$t = _$r()).done;){
                        var h = _$t.value, e = h[0];
                        h[1];
                        var u = wJ.resourceGraph.vertex(e), o = wJ.resourceGraph.getTraits(u);
                        i.includes(e) || 0 !== o.residency || n.push(e);
                    }
                    for(var f = 0; f < n.length; f++){
                        var a = n[f];
                        s.get(a).release(), s.delete(a);
                    }
                    for(var v, l = [], w = wJ.deviceBuffers, g = d(w); !(v = g()).done;){
                        var p = v.value, _$y = p[0];
                        p[1];
                        var _$_ = wJ.resourceGraph.vertex(_$y), m = wJ.resourceGraph.getTraits(_$_);
                        i.includes(_$y) || 0 !== m.residency || l.push(_$y);
                    }
                    for(var b = 0; b < l.length; b++){
                        var A = l[b];
                        w.get(A).release(), w.delete(A);
                    }
                    i.length = 0;
                }, i.execute = function(t1) {
                    wJ.renderGraph = t1, wJ.reset();
                    var i = wJ.commandBuffer, n = wJ.culling;
                    n.buildRenderQueues(t1, wJ.layoutGraph, wJ.pipelineSceneData), wJ.lightResource.buildLights(n, wJ.pipelineSceneData.isHDR, wJ.pipelineSceneData.shadows), this.GI(), i.begin(), n.uploadInstancing(i), this.jI || (this.jI = new $J), $X(this.jI.graphView, this.jI, this.jI.colorMap), i.end(), wJ.device.queue.submit([
                        i
                    ]);
                }, i.release = function() {
                    wJ.devicePasses.clear();
                    for(var _$t, i = d(wJ.deviceTextures); !(_$t = i()).done;){
                        var n = _$t.value;
                        n[0], n[1].release();
                    }
                    wJ.deviceTextures.clear();
                    for(var s, _$r = d(wJ.deviceBuffers); !(s = _$r()).done;){
                        var h = s.value;
                        h[0], h[1].release();
                    }
                    wJ.deviceBuffers.clear();
                }, t1;
            }(), VJ = function() {
                function t1() {
                    this.queueID = 4294967295, this.sceneID = 4294967295, this.passID = 4294967295, this.dispatchID = 4294967295, this.currPass = void 0, this.currQueue = void 0, this.rg = void 0, this.rg = wJ.renderGraph;
                }
                var i = t1.prototype;
                return i._isRasterPass = function(t1) {
                    return wJ.renderGraph.h(0, t1);
                }, i.isComputePass = function(t1) {
                    return wJ.renderGraph.h(3, t1);
                }, i.isDispatch = function(t1) {
                    return wJ.renderGraph.h(11, t1);
                }, i._isQueue = function(t1) {
                    return wJ.renderGraph.h(8, t1);
                }, i._isScene = function(t1) {
                    return wJ.renderGraph.h(9, t1);
                }, i._isBlit = function(t1) {
                    return wJ.renderGraph.h(10, t1);
                }, i.applyID = function(t1) {
                    this._isRasterPass(t1) ? this.passID = t1 : this._isQueue(t1) ? this.queueID = t1 : this._isScene(t1) || this._isBlit(t1) ? this.sceneID = t1 : this.isComputePass(t1) ? this.passID = t1 : this.isDispatch(t1) && (this.dispatchID = t1);
                }, t1;
            }(), WJ = function(t1) {
                function i() {
                    return t1.call(this) || this;
                }
                h(i, t1);
                var n = i.prototype;
                return n.clear = function() {}, n.viewport = function() {}, n.rasterPass = function(t1) {
                    if (this.rg.getValid(this.passID)) {
                        var _$i = wJ.devicePasses, n = t1.hashValue;
                        this.currPass = _$i.get(n), this.currPass ? this.currPass.resetResource(this.passID, t1) : (this.currPass = new PJ(this.passID, t1), _$i.set(n, this.currPass)), this.currPass.preRecord();
                    }
                }, n.rasterSubpass = function() {}, n.computeSubpass = function() {}, n.resolve = function() {}, n.move = function() {}, n.raytrace = function() {}, n.compute = function(t1) {
                    if (this.rg.getValid(this.passID)) {
                        wJ.devicePasses;
                        var _$i = new DJ;
                        _$i.applyInfo(this.passID, t1), this.currPass = new LJ(_$i), this.currPass.preRecord(), this.currPass.record();
                    }
                }, n.copy = function(t1) {
                    if (t1.uploadPairs.length) for(var _$i, n = d(t1.uploadPairs); !(_$i = n()).done;){
                        var s = _$i.value, _$r = wJ.deviceBuffers, _$h = wJ.resourceGraph, e = _$h.vertex(s.target);
                        NJ.resName = s.target, _$h.visitVertex(NJ, e);
                        var u = _$r.get(s.target);
                        wJ.device.commandBuffer.updateBuffer(u.buffer, s.source, s.source.byteLength);
                    }
                }, n.queue = function(t1) {
                    if (this.rg.getValid(this.queueID)) {
                        _instanceof(this.currPass, PJ) ? (_$i = wJ.pools.addDeviceQueue()).init(this.currPass, t1, this.queueID) : (_$i = wJ.pools.addComputeQueue()).init(this.currPass, t1, this.queueID), this.currQueue = _$i, this.currPass.addQueue(_$i);
                        var _$i, n = this.rg.getLayout(this.queueID);
                        if (n) {
                            var s = wJ.layoutGraph;
                            if (this.currPass.renderLayout) {
                                var _$r = s.locateChild(this.currPass.renderLayout.layoutID, n);
                                this.currQueue.layoutID = _$r;
                            }
                        }
                        this.currQueue.preRecord();
                    }
                }, n.scene = function(t1) {
                    this.rg.getValid(this.sceneID) && this.currQueue.setScene(this.sceneID, t1).preRecord();
                }, n.blit = function(t1) {
                    this.rg.getValid(this.sceneID) && this.currQueue.setScene(this.sceneID, void 0, t1).preRecord();
                }, n.dispatch = function(t1) {
                    var _$i, n = null, s = this.currPass, _$r = null == (_$i = t1.material) ? void 0 : _$i.passes[t1.passID];
                    null == _$r || _$r.update();
                    var _$h = null == _$r ? void 0 : _$r.getShaderVariant();
                    if (null !== _$r && null !== _$h) {
                        var e = new cw(_$h, null == _$r ? void 0 : _$r.pipelineLayout);
                        e.bindPoint = 1, n = kw.gfxDevice.createPipelineState(e);
                    }
                    var u = wJ.commandBuffer;
                    if (n) {
                        u.bindPipelineState(n);
                        var o = s.renderLayout.descriptorSet;
                        u.bindDescriptorSet(0, o);
                    }
                    var f = t1.threadGroupCountX, _$c = t1.threadGroupCountY, a = t1.threadGroupCountZ;
                    u.dispatch(new Xl(f, _$c, a));
                }, i;
            }(VJ), zJ = function(t1) {
                function i() {
                    return t1.call(this) || this;
                }
                h(i, t1);
                var n = i.prototype;
                return n.clear = function() {}, n.viewport = function() {}, n.rasterPass = function(t1) {
                    var _$i = wJ.devicePasses, n = t1.hashValue, s = _$i.get(n);
                    s && (this.currPass = s, wJ.passShowStatistics = t1.showStatistics, this.currPass.record());
                }, n.rasterSubpass = function() {}, n.computeSubpass = function() {}, n.resolve = function() {}, n.compute = function() {}, n.copy = function() {}, n.move = function() {}, n.raytrace = function() {}, n.queue = function() {}, n.scene = function() {}, n.blit = function() {}, n.dispatch = function() {}, i;
            }(VJ), $J = function(t1) {
                function i() {
                    var _$i;
                    return (_$i = t1.call(this) || this).HI = void 0, _$i.VI = void 0, _$i.WI = void 0, _$i.zI = void 0, _$i.HI = new WJ, _$i.VI = new zJ, _$i.WI = new qX(wJ.renderGraph), _$i.zI = new dY(wJ.renderGraph.nv()), _$i;
                }
                h(i, t1);
                var n = i.prototype;
                return n.discoverVertex = function(t1, i) {
                    var n = i.g;
                    this.HI.applyID(t1), n.visitVertex(this.HI, t1);
                }, n.finishVertex = function(t1, i) {
                    i.g.visitVertex(this.VI, t1);
                }, s(i, [
                    {
                        key: "graphView",
                        get: function get() {
                            return this.WI;
                        }
                    },
                    {
                        key: "colorMap",
                        get: function get() {
                            return this.zI;
                        }
                    }
                ]), i;
            }(XX), XJ = new Map, qJ = function() {
                function t1(t1) {
                    this.queueID = 4294967295, this.sceneID = 4294967295, this.passID = 4294967295, this.dispatchID = 4294967295, this.resID = 4294967295, this.context = void 0, this.$I = null, this.XI = void 0, this.context = t1, this.XI = new KJ(this.context);
                }
                var i = t1.prototype;
                return i._isRasterPass = function(t1) {
                    return this.context.renderGraph.h(0, t1);
                }, i._isCopyPass = function(t1) {
                    return this.context.renderGraph.h(5, t1);
                }, i._isCompute = function(t1) {
                    return this.context.renderGraph.h(3, t1);
                }, i._isDispatch = function(t1) {
                    return this.context.renderGraph.h(11, t1);
                }, i._isQueue = function(t1) {
                    return this.context.renderGraph.h(8, t1);
                }, i._isShadowMap = function(t1) {
                    var i = this._getSceneData(t1);
                    return !!i && i.light && !!i.light.light && !!(8 & i.flags);
                }, i._getSceneData = function(t1) {
                    return this.context.renderGraph.h(9, t1) ? this.context.renderGraph.j(t1) : null;
                }, i._isScene = function(t1) {
                    return this.context.renderGraph.h(9, t1);
                }, i._isBlit = function(t1) {
                    return this.context.renderGraph.h(10, t1);
                }, i.qI = function(t1, i) {
                    var n = this.context.resourceContext, s = n.get(t1), _$r = this.context.resourceGraph;
                    if (s) {
                        var h = s.rasters;
                        if (h.get(this.passID) === i) return;
                        for(var e, u = s.computes, o = d(h); !(e = o()).done;){
                            var f = e.value;
                            f[0], f[1], this.passID;
                        }
                        for(var _$c, a = d(u); !(_$c = a()).done && !(_$c.value[0] > this.passID););
                        h.set(this.passID, i);
                    } else {
                        var v = _$r.vertex(t1);
                        _$r.getTraits(v).residency;
                        var l = new JJ;
                        n.set(t1, l), l.rasters.set(this.passID, i);
                    }
                }, i.YI = function() {
                    var _$t = this.context.renderGraph, i = this.context.resourceContext, n = this.resID, s = this.context.resourceGraph.vertexName(n);
                    XJ.clear();
                    for(var _$r, h = this.$I, e = _$t.getValid(this.passID), u = d(h.rasterViews); !(_$r = u()).done;){
                        var o = _$r.value, f = o[0], _$c = o[1];
                        f !== s || 0 === _$c.accessType ? 2 !== _$c.accessType && XJ.set(f, _$c) : (this.qI(f, _$c), _$t.setValid(this.passID, !0), _$t.setValid(this.queueID, !0), _$t.setValid(this.sceneID, !0));
                    }
                    if (!e && _$t.getValid(this.sceneID)) {
                        for(var a, v = d(h.rasterViews); !(a = v()).done;){
                            var l = a.value, w = l[0];
                            l[1], ZJ.pipeline.resourceUses.push(w);
                        }
                        for(var g, p, _$y, _$_ = d(XJ); !(_$y = _$_()).done;){
                            var m = _$y.value, b = m[0];
                            m[1], 4294967295 !== (p = (g = this.context.resourceGraph).find(b)) && (this.XI.resID = p, g.visitVertex(this.XI, p));
                        }
                        for(var k, A = d(h.computeViews); !(k = A()).done;){
                            var E = k.value, T = E[0], S = E[1], _$O = i.get(T);
                            _$O || (_$O = new JJ, i.set(T, _$O));
                            var _$I = _$O.computes, _$R = _$I.get(this.passID);
                            _$R ? _$R.push(S) : _$I.set(this.passID, [
                                S
                            ]), 4294967295 !== (p = (g = this.context.resourceGraph).find(T)) && (this.XI.resID = p, g.visitVertex(this.XI, p));
                        }
                        zY(h);
                    }
                }, i.applyID = function(t1, i) {
                    this.resID = i, this._isRasterPass(t1) || this._isCopyPass(t1) || this._isCompute(t1) ? this.passID = t1 : this._isQueue(t1) ? this.queueID = t1 : this._isScene(t1) || this._isBlit(t1) ? this.sceneID = t1 : this._isDispatch(t1) && (this.dispatchID = t1);
                }, i.rasterPass = function(t1) {
                    this.$I = t1;
                }, i.rasterSubpass = function() {}, i.computeSubpass = function() {}, i.compute = function(t1) {
                    this.$I = t1, ZJ.renderGraph.setValid(this.passID, !0);
                }, i.resolve = function() {}, i.copy = function(t1) {
                    var i = ZJ.renderGraph;
                    if (!i.getValid(this.passID)) {
                        var n = this.context.resourceGraph;
                        this.$I = t1;
                        for(var s, _$r, h = this.resID, e = n.vertexName(h), u = d(t1.copyPairs); !(_$r = u()).done;){
                            var o = _$r.value;
                            o.target === e && (i.setValid(this.passID, !0), 4294967295 !== (s = n.find(o.source)) && (this.XI.resID = s, n.visitVertex(this.XI, s)));
                        }
                    }
                }, i.move = function() {}, i.raytrace = function() {}, i.queue = function() {}, i.scene = function() {
                    this.YI();
                }, i.blit = function() {
                    this.YI();
                }, i.dispatch = function() {
                    var _$t = this.context.renderGraph;
                    _$t.setValid(this.queueID, !0), _$t.setValid(this.dispatchID, !0);
                }, i.clear = function() {}, i.viewport = function() {}, t1;
            }(), YJ = function(t1) {
                function i(i, n) {
                    var _$s;
                    return (_$s = t1.call(this) || this).zI = void 0, _$s.WI = void 0, _$s.KI = void 0, _$s.JI = 4294967295, _$s.JI = n, _$s.KI = new qJ(i), _$s.WI = new qX(i.renderGraph), _$s.zI = new dY(i.renderGraph.nv()), _$s;
                }
                return h(i, t1), i.prototype.discoverVertex = function(t1, i) {
                    var n = i.g;
                    this.KI.applyID(t1, this.resId), n.visitVertex(this.KI, t1);
                }, s(i, [
                    {
                        key: "resId",
                        get: function get() {
                            return this.JI;
                        },
                        set: function set(t1) {
                            this.JI = t1, this.zI.colors.length = ZJ.renderGraph.nv();
                        }
                    },
                    {
                        key: "graphView",
                        get: function get() {
                            return this.WI;
                        }
                    },
                    {
                        key: "colorMap",
                        get: function get() {
                            return this.zI;
                        }
                    }
                ]), i;
            }(XX), KJ = function() {
                function t1(t1) {
                    this.zr = void 0, this.resID = 4294967295, this.QI = void 0, this.zr = t1;
                }
                var i = t1.prototype;
                return i.managedBuffer = function() {}, i.managedTexture = function() {}, i.managed = function() {
                    this.dependency();
                }, i.persistentBuffer = function() {}, i.dependency = function() {
                    this.QI ? this.QI.resId = this.resID : this.QI = new YJ(this.zr, this.resID), $X(this.QI.graphView, this.QI, this.QI.colorMap);
                }, i.persistentTexture = function() {
                    this.dependency();
                }, i.framebuffer = function() {
                    this.dependency();
                }, i.swapchain = function() {
                    this.dependency();
                }, i.formatView = function() {}, i.subresourceView = function() {}, t1;
            }(), JJ = function JJ() {
                this.rasters = new Map, this.computes = new Map;
            }, ZJ = new (function() {
                function t1() {
                    this.resourceGraph = void 0, this.pipeline = void 0, this.renderGraph = void 0, this.layoutGraph = void 0, this.resourceContext = void 0;
                }
                return t1.prototype.set = function(t1, i, n, s) {
                    this.pipeline = t1, this.resourceGraph = i, this.renderGraph = n, this.layoutGraph = s, this.resourceContext || (this.resourceContext = new Map), this.resourceContext.clear();
                }, t1;
            }());
            function i13(i) {
                var n;
                return (n = XX.call(this) || this).zI = void 0, n.ZI = void 0, n.XI = void 0, n.zI = new dY(i.resourceGraph.nv()), n.ZI = i.resourceGraph, n.XI = new KJ(i), n;
            }
            h(i13, XX), i13.prototype.discoverVertex = function(t1) {
                var _$i = this.ZI.getTraits(t1);
                0 !== _$i.residency && 1 !== _$i.residency && (this.XI.resID = t1, this.ZI.visitVertex(this.XI, t1));
            }, s(i13, [
                {
                    key: "colorMap",
                    get: function get() {
                        return this.zI;
                    }
                }
            ]);
            var tQ, iQ, nQ = new Hr, sQ = new Jl(1, 1, 0, 2, 2, 2), rQ = function() {
                function t1() {
                    var _$t = this;
                    this.renderData = new Mq, this.layoutGraph = new tY, this.rg = new Nq, this.vertId = -1, this.sceneData = new Oq, this.resourceGraph = new _q, this.computePass = new mq, this.rasterPass = new dq, this.rasterSubpass = new vq, this.renderQueue = new Sq, this.sceneBuilder = new Uh(function() {
                        return new fQ(_$t.renderData, _$t.layoutGraph, _$t.rg, _$t.vertId, _$t.sceneData);
                    }, 16), this.renderPassBuilder = new Uh(function() {
                        return new vQ(_$t.renderData, _$t.rg, _$t.layoutGraph, _$t.resourceGraph, _$t.vertId, _$t.rasterPass, _$t.getPipelineSceneData());
                    }, 16), this.computeQueueBuilder = new Uh(function() {
                        return new lQ(_$t.renderData, _$t.rg, _$t.layoutGraph, _$t.vertId, _$t.renderQueue, _$t.getPipelineSceneData());
                    }, 16), this.renderQueueBuilder = new Uh(function() {
                        return new cQ(_$t.renderData, _$t.rg, _$t.layoutGraph, _$t.vertId, _$t.renderQueue, _$t.getPipelineSceneData());
                    }, 16), this.renderSubpassBuilder = new Uh(function() {
                        return new aQ(_$t.renderData, _$t.rg, _$t.layoutGraph, _$t.vertId, _$t.rasterSubpass, _$t.getPipelineSceneData());
                    }, 16), this.computePassBuilder = new Uh(function() {
                        return new dQ(_$t.renderData, _$t.rg, _$t.layoutGraph, _$t.resourceGraph, _$t.vertId, _$t.computePass, _$t.getPipelineSceneData());
                    }, 16), this.samplerInfo = new Uh(function() {
                        return new Jl;
                    }, 16), this.color = new Uh(function() {
                        return new xl;
                    }, 16), this.renderCommonObjectPool = new DX, this.renderGraphPool = new Dq(this.renderCommonObjectPool), this.viewport = new Uh(function() {
                        return new Ul;
                    }, 16);
                }
                var i = t1.prototype;
                return i.getPipelineSceneData = function() {
                    return A.director.root.pipeline.pipelineSceneData;
                }, i.createColor = function(t1, i, n, s) {
                    void 0 === t1 && (t1 = 0), void 0 === i && (i = 0), void 0 === n && (n = 0), void 0 === s && (s = 0);
                    var _$r = this.color.add();
                    return _$r.set(t1, i, n, s), _$r;
                }, i.createSamplerInfo = function(t1, i, n, s, r, h, e, u) {
                    void 0 === t1 && (t1 = 2), void 0 === i && (i = 2), void 0 === n && (n = 0), void 0 === s && (s = 0), void 0 === r && (r = 0), void 0 === h && (h = 0), void 0 === e && (e = 0), void 0 === u && (u = 7);
                    var o = this.samplerInfo.add();
                    return o.minFilter = t1, o.magFilter = i, o.mipFilter = n, o.addressU = s, o.addressV = r, o.addressW = h, o.maxAnisotropy = e, o.cmpFunc = u, o;
                }, i.reset = function() {
                    this.sceneBuilder.reset(), this.renderPassBuilder.reset(), this.computePassBuilder.reset(), this.computeQueueBuilder.reset(), this.renderCommonObjectPool.reset(), this.renderGraphPool.reset(), this.viewport.reset(), this.samplerInfo.reset(), this.color.reset(), this.renderQueueBuilder.reset(), this.renderSubpassBuilder.reset();
                }, t1;
            }();
            function hQ(t1, i) {
                switch(t1){
                    case 1:
                        return 4 * (i > 1);
                    case 2:
                        return i > 1 ? 5 : 1;
                    case 3:
                        return 2;
                }
                return 1;
            }
            function eQ(t1) {
                switch(t1){
                    case 0:
                    case 4:
                        return 1;
                    case 1:
                    case 5:
                    case 3:
                        break;
                    case 2:
                        return 3;
                }
                return 2;
            }
            var uQ = new rA, oQ = new Mq, fQ = function(t1) {
                function i(i, n, s, r, h) {
                    var e;
                    return (e = t1.call(this, i, n) || this).tR = void 0, e.oa = void 0, e.tR = s, e.oa = h, e._vertID = r, e;
                }
                h(i, t1);
                var n = i.prototype;
                return n.update = function(t1, i, n, s, r) {
                    this._data = t1, this._lg = i, this.tR = n, this.oa = r, this._vertID = s;
                }, n.useLightFrustum = function(t1, i, n) {
                    if (void 0 === i && (i = 0), void 0 === n && (n = void 0), this.oa.light.light = t1, this.oa.light.level = i, this.oa.light.culledByLight = !0, n && (this.oa.camera = n), !(32768 & this.oa.flags)) {
                        var s = this.tR.getParent(this._vertID), _$r = this.tR.getParent(s);
                        this.tR.getLayout(_$r), rK(this, this.oa.camera, t1, i);
                    }
                }, i;
            }(uK), cQ = function(t1) {
                function i(i, n, s, r, h, e) {
                    var u;
                    return (u = t1.call(this, i, s) || this).tR = void 0, u.An = void 0, u.Gl = void 0, u.tR = n, u._vertID = r, u.An = h, u.Gl = e, u;
                }
                h(i, t1);
                var n = i.prototype;
                return n.update = function(t1, i, n, s, r, h) {
                    this._data = t1, this._lg = n, this.tR = i, this._vertID = s, this.An = r, this.Gl = h;
                }, n.setArrayBuffer = function() {
                    throw Error("Method not implemented.");
                }, n.addSceneOfCamera = function(t1, i, n) {
                    void 0 === n && (n = 0);
                    var _$s = i.light;
                    this.addScene(t1, n, _$s);
                }, n.addScene = function(t1, i, n, s) {
                    void 0 === i && (i = 0), void 0 === n && (n = null), void 0 === s && (s = void 0);
                    var _$r = iQ.createSceneData(s || t1.scene, t1, i, !n || 8 & i ? 1 : 5, n), _$h = iQ.createRenderData(), e = this.tR.addVertex(9, _$r, "Scene", "", _$h, !0, this._vertID);
                    32768 & i || (this.getParentLayout(), QY(this, t1, this.Gl, s || t1.scene), n && 0 !== n.type ? rK(this, t1, n, 0) : 8 & i || eK(this, t1));
                    var u = this.tR.getParent(this._vertID);
                    if (16 & i) {
                        var o = this.tR.addVertex(8, this.An, "UI Queue", "default", this._data, !0, u);
                        this.tR.addVertex(10, iQ.createBlit(uQ, this.tR.N, 0, t1, 1), "UI", "", oQ, !0, o);
                    }
                    1024 & i && this.addProfiler(t1);
                    var f = tQ.sceneBuilder.add();
                    return f.update(_$h, this._lg, this.tR, e, _$r), f;
                }, n.addFullscreenQuad = function(t1, i, n, s) {
                    void 0 === n && (n = 0), void 0 === s && (s = "Quad"), this.tR.addVertex(10, iQ.createBlit(t1, i, n, null), s, "", iQ.createRenderData(), !0, this._vertID), this.getParentLayout();
                    var _$r = A.director.getScene();
                    QY(this, null, this.Gl, _$r ? _$r.renderScene : null), 8 & n || eK(this, null);
                }, n.addCameraQuad = function(t1, i, n, s) {
                    void 0 === s && (s = 0), this.tR.addVertex(10, iQ.createBlit(i, n, s, t1), "CameraQuad", "", iQ.createRenderData(), !0, this._vertID), this.getParentLayout();
                    var _$r = A.director.getScene();
                    QY(this, t1, this.Gl, t1.scene || (_$r ? _$r.renderScene : null)), 8 & s || eK(this, t1);
                }, n.addDraw3D = function(t1, i, n) {
                    void 0 === n && (n = 32768);
                    for(var _$s, _$r = iQ.createBlit(uQ, this.tR.N, 0, t1, 3), _$h = d(i); !(_$s = _$h()).done;){
                        var e = _$s.value;
                        _$r.models.push(e);
                    }
                    this.tR.addVertex(10, _$r, "Draw3D", "", iQ.createRenderData(), !0, this._vertID), 32768 & n || (this.getParentLayout(), QY(this, t1, this.Gl, t1.scene), 8 & n || eK(this, t1));
                }, n.addDraw2D = function(t1) {
                    this.getParentLayout(), QY(this, t1, this.Gl, t1.scene), this.tR.addVertex(10, iQ.createBlit(uQ, this.tR.N, 0, t1, 1), "Draw2D", "", oQ, !0, this._vertID);
                }, n.addProfiler = function(t1) {
                    var _$i = this.tR.getParent(this._vertID), n = this.tR.addVertex(8, this.An, "UI Queue", "default", this._data, !0, _$i), _$s = this.tR.addVertex(10, iQ.createBlit(uQ, this.tR.N, 0, t1, 2), "Profiler", "", oQ, !0, n), _$r = this.tR.getData(_$s);
                    uK.setMat4(this._lg, _$r, "cc_matProj", t1.matProj);
                }, n.clearRenderTarget = function(t1, i) {
                    void 0 === i && (i = new xl);
                    var n = iQ.createClearView(t1, 1);
                    n.clearColor.copy(i), this.tR.addVertex(12, [
                        n
                    ], "ClearRenderTarget", "", iQ.createRenderData(), !0, this._vertID);
                }, n.setViewport = function(t1) {
                    var _$i = tQ.viewport.add();
                    this.An.viewport = _$i.copy(t1);
                }, n.addCustomCommand = function() {
                    throw Error("Method not implemented.");
                }, s(i, [
                    {
                        key: "name",
                        get: function get() {
                            return this.tR.getName(this._vertID);
                        },
                        set: function set(t1) {
                            this.tR.setName(this._vertID, t1);
                        }
                    }
                ]), i;
            }(uK), aQ = function(t1) {
                function i(i, n, s, r, h, e) {
                    (u = t1.call(this, i, s) || this).tR = void 0, u.lI = void 0, u.iR = void 0, u.Gl = void 0, u.tR = n, u._vertID = r, u.iR = h, u.Gl = e;
                    var u, o = u.tR.getLayout(u._vertID);
                    return u.lI = s.locateChild(s.N, o), u;
                }
                h(i, t1);
                var n = i.prototype;
                return n.update = function(t1, i, n, s, r, h) {
                    this._data = t1, this._lg = n, this.tR = i, this._vertID = s, this.iR = r, this.Gl = h;
                    var e = this.tR.getLayout(this._vertID);
                    this.lI = n.locateChild(n.N, e);
                }, n.addRenderTarget = function() {
                    throw Error("Method not implemented.");
                }, n.setCustomShaderStages = function() {
                    throw Error("Method not implemented.");
                }, n.setArrayBuffer = function() {
                    throw Error("Method not implemented.");
                }, n.addDepthStencil = function() {
                    throw Error("Method not implemented.");
                }, n.addTexture = function() {
                    throw Error("Method not implemented.");
                }, n.addStorageBuffer = function() {
                    throw Error("Method not implemented.");
                }, n.addStorageImage = function() {
                    throw Error("Method not implemented.");
                }, n.setViewport = function() {
                    throw Error("Method not implemented.");
                }, n.addQueue = function(t1, i) {
                    void 0 === t1 && (t1 = 1), void 0 === i && (i = "default");
                    var n = this._lg.locateChild(this.lI, i), _$s = iQ.createRenderQueue(t1, n), _$r = iQ.createRenderData(), _$h = this.tR.addVertex(8, _$s, "", i, _$r, !0, this._vertID), e = tQ.renderQueueBuilder.add();
                    return e.update(_$r, this.tR, this._lg, _$h, _$s, this.Gl), e;
                }, s(i, [
                    {
                        key: "name",
                        get: function get() {
                            return this.tR.getName(this._vertID);
                        },
                        set: function set(t1) {
                            this.tR.setName(this._vertID, t1);
                        }
                    },
                    {
                        key: "showStatistics",
                        get: function get() {
                            return this.iR.showStatistics;
                        },
                        set: function set(t1) {
                            this.iR.showStatistics = t1;
                        }
                    }
                ]), i;
            }(uK), vQ = function(t1) {
                function i(i, n, s, r, h, e, u) {
                    (o = t1.call(this, i, s) || this).tR = void 0, o.lI = void 0, o.nR = void 0, o.Gl = void 0, o.ZI = void 0, o.tR = n, o.ZI = r, o._vertID = h, o.nR = e, o.Gl = u;
                    var o, f = o.tR.getLayout(o._vertID);
                    return o.lI = s.locateChild(s.N, f), o;
                }
                h(i, t1);
                var n = i.prototype;
                return n.update = function(t1, i, n, s, r, h, e) {
                    this.tR = i, this._lg = n, this.ZI = s, this._vertID = r, this.nR = h, this.Gl = e, this._data = t1;
                    var u = this.tR.getLayout(this._vertID);
                    this.lI = n.locateChild(n.N, u);
                }, n.setCustomShaderStages = function() {
                    throw Error("Method not implemented.");
                }, n.setArrayBuffer = function() {
                    throw Error("Method not implemented.");
                }, n.setVersion = function(t1, i) {
                    this.nR.versionName = t1, this.nR.version = i;
                }, n.addRenderTarget = function(t1, i, n, s) {
                    void 0 === i && (i = 1), void 0 === n && (n = 0), void 0 === s && (s = new xl);
                    var _$r = 1;
                    0 === i && (_$r = 0);
                    var _$h = iQ.createRasterView("", 2, 0, i, n, _$r);
                    _$h.clearColor.copy(s), this.nR.rasterViews.set(t1, _$h);
                }, n.addDepthStencil = function(t1, i, n, s, r, h) {
                    void 0 === i && (i = 1), void 0 === n && (n = 0), void 0 === s && (s = 1), void 0 === r && (r = 0), void 0 === h && (h = 6);
                    var e = iQ.createRasterView("", 2, 1, i, n, h);
                    e.clearColor.set(s, r, 0, 0), this.nR.rasterViews.set(t1, e);
                }, n.resolveRenderTarget = function() {}, n.resolveDepthStencil = function() {}, n.sR = function(t1, i, n) {
                    var _$s, _$r = iQ.createComputeView(n);
                    _$r.accessType = i, this.nR.computeViews.has(t1) ? null == (_$s = this.nR.computeViews.get(t1)) || _$s.push(_$r) : this.nR.computeViews.set(t1, [
                        _$r
                    ]);
                }, n.addTexture = function(t1, i, n) {
                    if (void 0 === n && (n = null), this.sR(t1, 0, i), n) {
                        var _$s = this._lg.attributeIndex.get(i);
                        this._data.samplers.set(_$s, n);
                    }
                }, n.addStorageBuffer = function(t1, i, n) {
                    this.sR(t1, i, n);
                }, n.addStorageImage = function(t1, i, n) {
                    this.sR(t1, i, n);
                }, n.addRenderSubpass = function(t1) {
                    void 0 === t1 && (t1 = "");
                    var _$i = "Raster", n = this.nR.subpassGraph.nv();
                    this.nR.subpassGraph.addVertex(_$i, iQ.createSubpass());
                    var _$s = iQ.createRasterSubpass(n, 1, 0), _$r = iQ.createRenderData(), _$h = this.tR.addVertex(1, _$s, _$i, t1, _$r, !0), e = tQ.renderSubpassBuilder.add();
                    return e.update(_$r, this.tR, this._lg, _$h, _$s, this.Gl), e;
                }, n.addQueue = function(t1, i) {
                    void 0 === t1 && (t1 = 1), void 0 === i && (i = "default");
                    var n = this._lg.locateChild(this.lI, i), _$s = iQ.createRenderQueue(t1, n), _$r = iQ.createRenderData(), _$h = this.tR.addVertex(8, _$s, "", i, _$r, !0, this._vertID), e = tQ.renderQueueBuilder.add();
                    return e.update(_$r, this.tR, this._lg, _$h, _$s, this.Gl), e;
                }, n.addFullscreenQuad = function(t1, i, n, s) {
                    void 0 === n && (n = 0), void 0 === s && (s = "FullscreenQuad");
                    var _$r = iQ.createRenderQueue(3), _$h = this.tR.addVertex(8, _$r, "Queue", "", iQ.createRenderData(), !0, this._vertID);
                    this.tR.addVertex(10, iQ.createBlit(t1, i, n, null), s, "", iQ.createRenderData(), !0, _$h);
                }, n.addCameraQuad = function(t1, i, n, s, r) {
                    void 0 === r && (r = "CameraQuad");
                    var _$h = iQ.createRenderQueue(3), e = this.tR.addVertex(8, _$h, "Queue", "", iQ.createRenderData(), !0, this._vertID);
                    this.tR.addVertex(10, iQ.createBlit(i, n, s, t1), r, "", iQ.createRenderData(), !0, e);
                }, n.setViewport = function(t1) {
                    this.nR.viewport.copy(t1);
                }, s(i, [
                    {
                        key: "name",
                        get: function get() {
                            return this.tR.getName(this._vertID);
                        },
                        set: function set(t1) {
                            this.tR.setName(this._vertID, t1);
                        }
                    },
                    {
                        key: "showStatistics",
                        get: function get() {
                            return this.nR.showStatistics;
                        },
                        set: function set(t1) {
                            this.nR.showStatistics = t1;
                        }
                    }
                ]), i;
            }(uK), lQ = function(t1) {
                function i(i, n, s, r, h, e) {
                    var u;
                    return (u = t1.call(this, i, s) || this).tR = void 0, u.An = void 0, u.Gl = void 0, u.tR = n, u._vertID = r, u.An = h, u.Gl = e, u;
                }
                h(i, t1);
                var n = i.prototype;
                return n.update = function(t1, i, n, s, r, h) {
                    this._data = t1, this._lg = n, this.tR = i, this._vertID = s, this.An = r, this.Gl = h;
                }, n.setArrayBuffer = function() {
                    throw Error("Method not implemented.");
                }, n.addDispatch = function(t1, i, n, s, r, h) {
                    void 0 === s && (s = null), void 0 === r && (r = 0), void 0 === h && (h = "Dispatch"), this.tR.addVertex(11, iQ.createDispatch(s, r, t1, i, n), h, "", iQ.createRenderData(), !0, this._vertID);
                }, s(i, [
                    {
                        key: "name",
                        get: function get() {
                            return this.tR.getName(this._vertID);
                        },
                        set: function set(t1) {
                            this.tR.setName(this._vertID, t1);
                        }
                    }
                ]), i;
            }(uK), dQ = function(t1) {
                function i(i, n, s, r, h, e, u) {
                    (o = t1.call(this, i, s) || this).tR = void 0, o.ZI = void 0, o.lI = void 0, o.nR = void 0, o.Gl = void 0, o.tR = n, o.ZI = r, o._vertID = h, o.nR = e, o.Gl = u;
                    var o, f = o.tR.getLayout(o._vertID);
                    return o.lI = s.locateChild(s.N, f), o;
                }
                h(i, t1);
                var n = i.prototype;
                return n.update = function(t1, i, n, s, r, h, e) {
                    this._data = t1, this.tR = i, this._lg = n, this.ZI = s, this._vertID = r, this.nR = h, this.Gl = e;
                    var u = this.tR.getLayout(this._vertID);
                    this.lI = n.locateChild(n.N, u);
                }, n.setCustomShaderStages = function() {
                    throw Error("Method not implemented.");
                }, n.setArrayBuffer = function() {
                    throw Error("Method not implemented.");
                }, n.addTexture = function() {
                    throw Error("Method not implemented.");
                }, n.addStorageBuffer = function(t1, i, n) {
                    this.sR(t1, i, n);
                }, n.addStorageImage = function(t1, i, n) {
                    this.sR(t1, i, n);
                }, n.addMaterialTexture = function() {
                    throw Error("Method not implemented.");
                }, n.addQueue = function(t1) {
                    void 0 === t1 && (t1 = "default");
                    var _$i = this._lg.locateChild(this.lI, t1), n = iQ.createRenderQueue(1, _$i), _$s = iQ.createRenderData(), _$r = this.tR.addVertex(8, n, "", t1, _$s, !0, this._vertID), _$h = tQ.computeQueueBuilder.add();
                    return _$h.update(_$s, this.tR, this._lg, _$r, n, this.Gl), _$h;
                }, n.sR = function(t1, i, n) {
                    var _$s, _$r = iQ.createComputeView(n);
                    _$r.accessType = i, this.nR.computeViews.has(t1) ? null == (_$s = this.nR.computeViews.get(t1)) || _$s.push(_$r) : this.nR.computeViews.set(t1, [
                        _$r
                    ]);
                }, s(i, [
                    {
                        key: "name",
                        get: function get() {
                            return this.tR.getName(this._vertID);
                        },
                        set: function set(t1) {
                            this.tR.setName(this._vertID, t1);
                        }
                    }
                ]), i;
            }(uK);
            !function() {
                function t1(t1, i, n) {
                    this.tR = void 0, this.rR = void 0, this.nR = void 0, this.tR = t1, this.rR = i, this.nR = n;
                }
                var i = t1.prototype;
                i.setCustomBehavior = function() {
                    throw Error("Method not implemented.");
                }, i.addPair = function(t1) {
                    this.nR.movePairs.push(t1);
                }, s(t1, [
                    {
                        key: "name",
                        get: function get() {
                            return this.tR.getName(this.rR);
                        },
                        set: function set(t1) {
                            this.tR.setName(this.rR, t1);
                        }
                    }
                ]);
            }(), function() {
                function t1(t1, i, n) {
                    this.tR = void 0, this.rR = void 0, this.nR = void 0, this.tR = t1, this.rR = i, this.nR = n;
                }
                var i = t1.prototype;
                i.addPair = function() {
                    throw Error("Method not implemented.");
                }, i.setCustomBehavior = function() {
                    throw Error("Method not implemented.");
                }, s(t1, [
                    {
                        key: "name",
                        get: function get() {
                            return this.tR.getName(this.rR);
                        },
                        set: function set(t1) {
                            this.tR.setName(this.rR, t1);
                        }
                    }
                ]);
            }();
            var wQ = function(t1) {
                function i(i) {
                    var n;
                    return (n = t1.call(this, new Mq, i) || this).globalDSManager = void 0, n.descriptorSetLayout = void 0, n.descriptorSet = void 0, n.Qn = 0, n.Zn = 0, n.hR = !1, n.uR = new rA, n.Pe = void 0, n.oR = void 0, n.fR = null, n.cR = {}, n.vR = new HR, n.lR = "", n.dR = 1, n.wR = null, n.dl = [], n.gR = [], n.ZI = new _q, n.tR = null, n.pR = null, n.yR = null, n._R = "", n.mR = void 0, n.kR = 0, n.tR = new Nq, n._data = n.tR.globalRenderData, n;
                }
                h(i, t1);
                var n = i.prototype;
                return n.addCustomBuffer = function() {
                    throw Error("Method not implemented.");
                }, n.addCustomTexture = function() {
                    throw Error("Method not implemented.");
                }, n.tryAddRenderWindowDepthStencil = function(t1, i, n, s) {
                    n && (s ? this.addDepthStencilImpl(n, s.depthStencilTexture.format, t1, i, 4, s) : this.addDepthStencilImpl(n, 55, t1, i, 0));
                }, n.addRenderWindow = function(t1, i, n, s, r, h) {
                    var e = this.ZI.find(t1);
                    if (4294967295 !== e) return this.updateRenderWindow(t1, r, h), e;
                    this.tryAddRenderWindowDepthStencil(n, s, h, r.swapchain);
                    var u = new tq;
                    return u.dimension = 2, u.width = n, u.height = s, u.depthOrArraySize = 1, u.mipLevels = 1, u.format = r.framebuffer.colorTextures[0].format, u.flags = 16, r.swapchain ? this.ZI.addVertex(6, new nq(r.swapchain), t1, u, new iq(4), new sq, new Jl) : (u.sampleCount = r.framebuffer.colorTextures[0].info.samples, this.ZI.addVertex(5, r.framebuffer, t1, u, new iq(3), new sq, new Jl));
                }, n.updateRenderWindow = function(t1, i, n) {
                    var _$s = this.resourceGraph.vertex(t1), _$r = this.resourceGraph.getDesc(_$s);
                    _$r.width = i.width, _$r.height = i.height, this.resourceGraph.object(_$s) !== i.framebuffer && (this.resourceGraph.x[_$s].j = i.framebuffer), this.tryAddRenderWindowDepthStencil(i.width, i.height, n, i.swapchain);
                }, n.updateStorageBuffer = function(t1, i, n) {
                    void 0 === n && (n = 0);
                    var _$s = this.resourceGraph.vertex(t1), _$r = this.resourceGraph.getDesc(_$s);
                    _$r.width = i, 0 !== n && (_$r.format = n);
                }, n.updateRenderTarget = function(t1, i, n, s) {
                    void 0 === s && (s = 0);
                    var _$r = this.resourceGraph.vertex(t1), _$h = this.resourceGraph.getDesc(_$r);
                    _$h.width = i, _$h.height = n, 0 !== s && (_$h.format = s);
                }, n.updateDepthStencil = function(t1, i, n, s) {
                    void 0 === s && (s = 0);
                    var _$r = this.resourceGraph.find(t1);
                    4294967295 !== _$r && this.updateDepthStencilImpl(_$r, i, n, s);
                }, n.updateStorageTexture = function(t1, i, n, s) {
                    void 0 === s && (s = 0);
                    var _$r = this.resourceGraph.vertex(t1), _$h = this.resourceGraph.getDesc(_$r);
                    _$h.width = i, _$h.height = n, 0 !== s && (_$h.format = s);
                }, n.updateShadingRateTexture = function(t1, i, n) {
                    var _$s = this.resourceGraph.vertex(t1), _$r = this.resourceGraph.getDesc(_$s);
                    _$r.width = i, _$r.height = n;
                }, n.addBuffer = function(t1, i, n, s) {
                    var _$r = this.ZI.find(t1);
                    if (4294967295 !== _$r) return this.updateBuffer(t1, i), _$r;
                    var _$h = new tq;
                    return _$h.dimension = 0, _$h.width = i, _$h.flags = n, this.ZI.addVertex(0, new oq, t1, _$h, new iq(s), new sq, new Jl(2, 2, 0, 2, 2, 2));
                }, n.updateBuffer = function(t1, i) {
                    this.updateResource(t1, 0, i, 0, 0, 0, 0, 1);
                }, n.addExternalTexture = function() {
                    throw Error("Method not implemented.");
                }, n.updateExternalTexture = function() {
                    throw Error("Method not implemented.");
                }, n.addTexture = function(t1, i, n, s, r, h, e, u, o, f, c) {
                    var a = this.ZI.find(t1);
                    if (4294967295 !== a) return this.updateTexture(t1, n, s, r, h, e, u, o), a;
                    var v = new tq;
                    return v.dimension = eQ(i), v.width = s, v.height = r, v.depthOrArraySize = 3 === v.dimension ? h : e, v.mipLevels = u, v.format = n, v.sampleCount = o, v.flags = f, v.viewType = i, this.ZI.addVertex(0, new oq, t1, v, new iq(c), new sq, new Jl(2, 2, 0, 2, 2, 2));
                }, n.updateTexture = function(t1, i, n, s, r, h, e, u) {
                    this.updateResource(t1, i, n, s, r, h, e, u);
                }, n.addResource = function(t1, i, n, s, r, h, e, u, o, f, c) {
                    var a = this.ZI.find(t1);
                    return 4294967295 !== a ? (this.updateResource(t1, n, s, r, h, e, u, o), a) : 0 === i ? this.addBuffer(t1, s, f, c) : this.addTexture(t1, hQ(i, e), n, s, r, h, e, u, o, f, c);
                }, n.updateResource = function(t1, i, n, s, r, h, e, u) {
                    var o = this.resourceGraph.vertex(t1), f = this.resourceGraph.getDesc(o);
                    f.width = n, f.height = s, f.depthOrArraySize = 3 === f.dimension ? r : h, f.mipLevels = e, 0 !== i && (f.format = i), f.sampleCount = u;
                }, n.containsResource = function(t1) {
                    return this.ZI.contains(t1);
                }, n.addResolvePass = function() {
                    throw Error("Method not implemented.");
                }, n.addComputePass = function(t1) {
                    var _$i = iQ.createComputePass(), n = iQ.createRenderData(), _$s = this.tR.addVertex(3, _$i, "Compute", t1, n, !0), _$r = tQ.computePassBuilder.add();
                    return _$r.update(n, this.tR, this._lg, this.ZI, _$s, _$i, this.vR), A.director.root.pipeline, _$r;
                }, n.addUploadPass = function(t1) {
                    for(var _$i, n = iQ.createCopyPass(), _$s = d(t1); !(_$i = _$s()).done;){
                        var _$r = _$i.value;
                        n.uploadPairs.push(_$r);
                    }
                    this.tR.addVertex(5, n, "UploadPass", "", iQ.createRenderData(), !0);
                }, n.addCopyPass = function(t1) {
                    for(var _$i, n = d(t1); !(_$i = n()).done;){
                        var _$s = _$i.value, _$r = _$s.target, _$h = this.resourceGraph.find(_$r), e = this.resourceGraph.getDesc(_$h), u = this.addRenderPass(e.width, e.height, "copy-pass");
                        u.addRenderTarget(_$r, 1, 0, tQ.createColor()), u.setFloat("flip", this.getCombineSignY()), u.addTexture(_$s.source, "outputResultMap"), u.addQueue(0).addFullscreenQuad(this.uR, 0, 0);
                    }
                }, n._generateConstantMacros = function() {
                    var _$t = "";
                    _$t += "#define CC_DEVICE_SUPPORT_FLOAT_TEXTURE " + (3 & this.Pe.getFormatFeatures(44) ? 1 : 0) + "\n" + ("#define CC_DEVICE_MAX_VERTEX_UNIFORM_VECTORS " + this.Pe.capabilities.maxVertexUniformVectors) + "\n" + ("#define CC_DEVICE_MAX_FRAGMENT_UNIFORM_VECTORS " + this.Pe.capabilities.maxFragmentUniformVectors) + "\n" + ("#define CC_DEVICE_CAN_BENEFIT_FROM_INPUT_ATTACHMENT " + +!!this.Pe.hasFeature(5)) + "\n" + ("#define CC_PLATFORM_ANDROID_AND_WEBGL " + (le.os === ue.ANDROID && le.isBrowser ? 1 : 0)) + "\n" + ("#define CC_ENABLE_WEBGL_HIGHP_STRUCT_VALUES " + +!!Ti.ENABLE_WEBGL_HIGHP_STRUCT_VALUES) + "\n" + ("#define CC_JOINT_UNIFORM_CAPACITY " + e_.JOINT_UNIFORM_CAPACITY) + "\n", this.lR = _$t, this._lg.constantMacros = this.lR;
                }, n.setCustomPipelineName = function(t1) {
                    this._R = t1, "Deferred" === this._R && (this.hR = !0);
                }, n.getGlobalDescriptorSetData = function() {
                    var _$t = this.layoutGraph.locateChild(this.layoutGraph.N, "default");
                    return this.layoutGraph.getLayout(_$t).getSet(3);
                }, n.AR = function() {
                    var _$t = this.Pe;
                    this.kR = .5 * _$t.capabilities.screenSpaceSignY + .5 << 1 | .5 * _$t.capabilities.clipSpaceSignY + .5;
                }, n.getCombineSignY = function() {
                    return this.kR;
                }, n.ER = function() {
                    this.uR.initialize({
                        effectName: "pipeline/copy-pass"
                    });
                    for(var _$t = 0; _$t < this.uR.passes.length; ++_$t)this.uR.passes[_$t].tryCompile();
                }, n.activate = function() {
                    this.Pe = kw.gfxDevice, iQ = (tQ = new rQ).renderGraphPool, IK(this.Pe, this._lg), this.ER(), this.setMacroBool("CC_USE_HDR", this.vR.isHDR), this.setMacroBool("CC_USE_FLOAT_OUTPUT", Ti.ENABLE_FLOAT_OUTPUT && Z_(this.Pe)), this._generateConstantMacros(!1), this.vR.activate(this.Pe), this.AR();
                    var _$t = +!Q_(this.Pe);
                    this.setMacroInt("CC_SHADOWMAP_FORMAT", _$t);
                    var n = +(6 === this.Pe.gfxAPI);
                    this.setMacroInt("CC_SHADOWMAP_USE_LINEAR_DEPTH", n);
                    var _$s = A.director.root;
                    return this.oR = _$s.device.getSampler(sQ), this.pipelineSceneData.csmSupported = this.device.capabilities.maxFragmentUniformVectors >= i.CSM_UNIFORM_VECTORS + i.GLOBAL_UNIFORM_VECTORS, this.setMacroBool("CC_SUPPORT_CASCADED_SHADOW_MAP", this.pipelineSceneData.csmSupported), this.setMacroInt("CC_SHADOW_TYPE", 0), this.setMacroInt("CC_DIR_SHADOW_PCF_TYPE", mA.HARD), this.setMacroInt("CC_DIR_LIGHT_SHADOW_TYPE", 0), this.setMacroBool("CC_CASCADED_LAYERS_TRANSITION", !1), this.usesDeferredPipeline && this.setMacroInt("CC_PIPELINE_TYPE", 1), !0;
                }, n.destroy = function() {
                    var _$t;
                    return null == (_$t = this.vR) || _$t.destroy(), !0;
                }, n.getMacroString = function(t1) {
                    var _$i = this.cR[t1];
                    return void 0 === _$i ? "" : _$i;
                }, n.getMacroInt = function(t1) {
                    var _$i = this.cR[t1];
                    return void 0 === _$i ? 0 : _$i;
                }, n.getMacroBool = function(t1) {
                    var _$i = this.cR[t1];
                    return void 0 !== _$i && _$i;
                }, n.getSamplerInfo = function(t1) {
                    if (this.containsResource(t1)) {
                        var _$i = this.ZI.vertex(t1);
                        return this.ZI.getSampler(_$i);
                    }
                    return null;
                }, n.setMacroString = function(t1, i) {
                    this.cR[t1] = i;
                }, n.setMacroInt = function(t1, i) {
                    this.cR[t1] = i;
                }, n.setMacroBool = function(t1, i) {
                    this.cR[t1] = i;
                }, n.onGlobalPipelineStateChanged = function() {
                    var _$t = A.rendering.getCustomPipeline(Ti.CUSTOM_PIPELINE_NAME);
                    _$t && ("function" == typeof _$t.onGlobalPipelineStateChanged && _$t.onGlobalPipelineStateChanged(), A.rendering.forceResizeAllWindows());
                }, n.beginSetup = function() {
                    this.tR || (this.tR = new Nq, this._data = this.tR.globalRenderData), tQ.reset();
                }, n.endSetup = function() {
                    this.compile();
                }, n.addStorageBuffer = function(t1, i, n, s) {
                    void 0 === s && (s = 0);
                    var _$r = this.ZI.find(t1);
                    if (4294967295 !== _$r) return this.updateStorageBuffer(t1, n, i), _$r;
                    var _$h = new tq;
                    return _$h.dimension = 0, _$h.width = n, _$h.height = 1, _$h.depthOrArraySize = 1, _$h.mipLevels = 1, _$h.format = i, _$h.flags = 4, 2 === s ? this.ZI.addVertex(3, new hq, t1, _$h, new iq(2), new sq, new Jl) : this.ZI.addVertex(1, new rq, t1, _$h, new iq(s), new sq, new Jl);
                }, n.addRenderTarget = function(t1, i, n, s, r) {
                    void 0 === r && (r = 0);
                    var _$h = this.ZI.find(t1);
                    if (4294967295 !== _$h) return this.updateRenderTarget(t1, n, s, i), _$h;
                    var e = new tq;
                    return e.dimension = 2, e.width = n, e.height = s, e.depthOrArraySize = 1, e.mipLevels = 1, e.format = i, e.sampleCount = 1, e.flags = 24, this.ZI.addVertex(0, new oq, t1, e, new iq(r), new sq, new Jl(2, 2, 0, 2, 2, 2));
                }, n.updateDepthStencilImpl = function(t1, i, n, s, r) {
                    var _$h = this.resourceGraph.getDesc(t1);
                    if (_$h.width = i, _$h.height = n, r) {
                        var e = this.resourceGraph.j(t1);
                        e.swapchain = r, _$h.format = e.swapchain.depthStencilTexture.format;
                    } else 0 !== s && (_$h.format = s);
                }, n.addDepthStencilImpl = function(t1, i, n, s, r, h) {
                    var e = this.ZI.find(t1);
                    if (4294967295 !== e) return this.updateDepthStencilImpl(e, n, s, i, h), e;
                    var u = new tq;
                    return u.dimension = 2, u.width = n, u.height = s, u.depthOrArraySize = 1, u.mipLevels = 1, u.format = i, u.sampleCount = 1, u.flags = 40, h ? this.ZI.addVertex(6, new nq(h, !0), t1, u, new iq(r), new sq, new Jl(1, 1, 0)) : this.ZI.addVertex(0, new oq, t1, u, new iq(r), new sq, new Jl(1, 1, 0));
                }, n.addDepthStencil = function(t1, i, n, s, r) {
                    return void 0 === r && (r = 0), this.addDepthStencilImpl(t1, i, n, s, r);
                }, n.addStorageTexture = function(t1, i, n, s, r) {
                    void 0 === r && (r = 0);
                    var _$h = this.ZI.find(t1);
                    if (4294967295 !== _$h) return this.updateStorageTexture(t1, n, s, i), _$h;
                    var e = new tq;
                    return e.dimension = 2, e.width = n, e.height = s, e.depthOrArraySize = 1, e.mipLevels = 1, e.format = i, e.flags = 12, this.ZI.addVertex(0, new oq, t1, e, new iq(r), new sq, new Jl(1, 1, 0));
                }, n.addShadingRateTexture = function(t1, i, n, s) {
                    void 0 === s && (s = 0);
                    var _$r = this.ZI.find(t1);
                    if (4294967295 !== _$r) return this.addShadingRateTexture(t1, i, n), _$r;
                    var _$h = new tq;
                    return _$h.dimension = 2, _$h.width = i, _$h.height = n, _$h.depthOrArraySize = 1, _$h.mipLevels = 1, _$h.format = 6, _$h.flags = 140, this.ZI.addVertex(0, new oq, t1, _$h, new iq(s), new sq, new Jl(2, 2, 0, 2, 2, 2));
                }, n.beginFrame = function() {
                    A.director.buildRenderPipeline();
                }, n.update = function() {}, n.endFrame = function() {
                    var _$t;
                    null == (_$t = this.renderGraph) || _$t.clear();
                }, n.compile = function() {
                    if (!this.tR) throw Error("RenderGraph cannot be built without being created");
                    this.tR.x.forEach(function(t1) {
                        0 === t1.t && zY(t1.j);
                    });
                }, n.execute = function() {
                    if (!this.tR) throw Error("Cannot run without creating rendergraph");
                    this.yR || (this.yR = new HJ(this, this.Pe, this.ZI, this.layoutGraph, this.width, this.height)), this.yR.resize(this.width, this.height), this.yR.execute(this.tR);
                }, n._applySize = function(t1) {
                    var _$i = this, n = this.Qn, _$s = this.Zn;
                    t1.forEach(function(t1) {
                        var _$r = t1.window;
                        n = Math.max(_$r.width, n), _$s = Math.max(_$r.height, _$s), _$i.dl.includes(t1) || _$i.dl.push(t1);
                    }), n === this.Qn && _$s === this.Zn || (this.Qn = n, this.Zn = _$s);
                }, n.render = function(t1) {
                    0 !== t1.length && (this._applySize(t1), nA(t1), this.beginFrame(), this.execute(), this.endFrame());
                }, n.addBuiltinReflectionProbePass = function(t1) {
                    var _$i = A.internal.reflectionProbeManager;
                    if (_$i) {
                        var n = _$i.getProbes();
                        if (0 !== n.length) for(var _$s = 0; _$s < n.length; _$s++){
                            var _$r = n[_$s];
                            _$r.needRender && 1 === n[_$s].probeType && yY(t1, this, _$r, _$r.realtimePlanarTexture.window, 0);
                        }
                    }
                }, n.addRenderPassImpl = function(t1, i, n, s, r) {
                    void 0 === s && (s = 1), void 0 === r && (r = 0);
                    var _$h = iQ.createRasterPass();
                    _$h.viewport.width = t1, _$h.viewport.height = i, _$h.count = s, _$h.quality = r;
                    var e = iQ.createRenderData(), u = this.tR.addVertex(0, _$h, "Raster", n, e, !0), o = tQ.renderPassBuilder.add();
                    return o.update(e, this.tR, this._lg, this.ZI, u, _$h, this.vR), this._updateRasterPassConstants(o, t1, i, n), JY(o, this.vR), o;
                }, n.addRenderPass = function(t1, i, n) {
                    return void 0 === n && (n = "default"), this.addRenderPassImpl(t1, i, n);
                }, n.addMultisampleRenderPass = function(t1, i, n, s, r) {
                    return void 0 === r && (r = "default"), this.addRenderPassImpl(t1, i, r, n, s);
                }, n.getDescriptorSetLayout = function(t1, i) {
                    var n = this._lg, _$s = n.shaderLayoutIndex.get(t1);
                    return n.getLayout(_$s).getSet(i).descriptorSetLayout;
                }, n._updateRasterPassConstants = function(t1, i, n) {
                    var _$s = A.director, _$r = _$s.root;
                    _$r.pipeline.layoutGraph, nQ.set(_$r.cumulativeTime, _$r.frameTime, _$s.getTotalFrames()), t1.setVec4("cc_time", nQ), nQ.set(i, n, 1 / i, 1 / n), t1.setVec4("cc_screenSize", nQ), nQ.set(i, n, 1 / i, 1 / n), t1.setVec4("cc_nativeSize", nQ);
                    var u = _$r.debugView;
                    if (nQ.set(0, 0, 0, 0), u) {
                        for(var o = [
                            u.singleMode,
                            0,
                            0,
                            0
                        ], f = 0; f < 17; f++){
                            var _$c = f % 8;
                            o[1 + (f >> 3)] += !!u.isCompositeModeEnabled(f) * Math.pow(10, _$c);
                        }
                        o[3] += 1000000 * !!u.lightingWithAlbedo, o[3] += 10000000 * !!u.csmLayerColoration, nQ.set(o[0], o[1], o[2], o[3]);
                    }
                    t1.setVec4("cc_debug_view_mode", nQ);
                }, s(i, [
                    {
                        key: "type",
                        get: function get() {
                            return 0;
                        }
                    },
                    {
                        key: "capabilities",
                        get: function get() {
                            return new Lq;
                        }
                    },
                    {
                        key: "enableCpuLightCulling",
                        get: function get() {
                            return !this.yR || this.yR._context.culling.enableLightCulling;
                        },
                        set: function set(t1) {
                            this.yR && (this.yR._context.culling.enableLightCulling = t1);
                        }
                    },
                    {
                        key: "name",
                        get: function get() {
                            return "WebPipeline";
                        }
                    },
                    {
                        key: "globalDescriptorSetData",
                        get: function get() {
                            return this.mR;
                        }
                    },
                    {
                        key: "defaultSampler",
                        get: function get() {
                            return this.oR;
                        }
                    },
                    {
                        key: "defaultShadowTexture",
                        get: function get() {
                            return J_(this.device);
                        }
                    },
                    {
                        key: "device",
                        get: function get() {
                            return this.Pe;
                        }
                    },
                    {
                        key: "lightingMode",
                        get: function get() {
                            return this.dR;
                        },
                        set: function set(t1) {
                            this.dR = t1;
                        }
                    },
                    {
                        key: "usesDeferredPipeline",
                        get: function get() {
                            return this.hR;
                        }
                    },
                    {
                        key: "macros",
                        get: function get() {
                            return this.cR;
                        }
                    },
                    {
                        key: "profilerDescriptorSet",
                        get: function get() {
                            return this.fR;
                        }
                    },
                    {
                        key: "commandBuffers",
                        get: function get() {
                            return [
                                this.Pe.commandBuffer
                            ];
                        }
                    },
                    {
                        key: "pipelineSceneData",
                        get: function get() {
                            return this.vR;
                        }
                    },
                    {
                        key: "constantMacros",
                        get: function get() {
                            return this.lR;
                        }
                    },
                    {
                        key: "profiler",
                        get: function get() {
                            return this.wR;
                        },
                        set: function set(t1) {
                            this.wR = t1;
                        }
                    },
                    {
                        key: "geometryRenderer",
                        get: function get() {
                            throw Error("Method not implemented.");
                        }
                    },
                    {
                        key: "shadingScale",
                        get: function get() {
                            return this.vR.shadingScale;
                        },
                        set: function set(t1) {
                            this.vR.shadingScale = t1;
                        }
                    },
                    {
                        key: "width",
                        get: function get() {
                            return this.Qn;
                        }
                    },
                    {
                        key: "height",
                        get: function get() {
                            return this.Zn;
                        }
                    },
                    {
                        key: "renderGraph",
                        get: function get() {
                            return this.tR;
                        }
                    },
                    {
                        key: "resourceGraph",
                        get: function get() {
                            return this.ZI;
                        }
                    },
                    {
                        key: "layoutGraph",
                        get: function get() {
                            return this._lg;
                        }
                    },
                    {
                        key: "resourceUses",
                        get: function get() {
                            return this.gR;
                        }
                    }
                ]), i;
            }(uK);
            wQ.MAX_BLOOM_FILTER_PASS_NUM = 6, wQ.CSM_UNIFORM_VECTORS = 61, wQ.GLOBAL_UNIFORM_VECTORS = 64, function() {
                function t1() {
                    this.capacity = 0, this.size = 0, this.buffer = void 0, this.dataView = void 0, this.capacity = 4096, this.buffer = new Uint8Array(this.capacity), this.dataView = new DataView(this.buffer.buffer);
                }
                var i = t1.prototype;
                i.b = function(t1) {
                    var i = this.size + 1;
                    i > this.capacity && this.reserve(i), this.dataView.setUint8(this.size, +!!t1), this.size = i;
                }, i.n = function(t1) {
                    var i = this.size + 8;
                    i > this.capacity && this.reserve(i), this.dataView.setFloat64(this.size, t1, !0), this.size = i;
                }, i.s = function(t1) {
                    this.n(t1.length);
                    var i = this.size + t1.length;
                    i > this.capacity && this.reserve(i);
                    for(var n = 0; n < t1.length; n++)this.dataView.setUint8(this.size + n, t1.charCodeAt(n));
                    this.size = i;
                }, i.reserve = function(t1) {
                    var i = Math.max(t1, 2 * this.capacity), n = this.buffer;
                    this.buffer = new Uint8Array(i), this.buffer.set(n), this.dataView = new DataView(this.buffer.buffer), this.capacity = i;
                }, s(t1, [
                    {
                        key: "data",
                        get: function get() {
                            return this.buffer.buffer.slice(0, this.size);
                        }
                    }
                ]);
            }();
            var gQ = function() {
                function t1(t1, i) {
                    this.offset = 0, this.dataView = void 0, this.dataView = new DataView(t1, i);
                }
                var i = t1.prototype;
                return i.b = function() {
                    return 0 !== this.dataView.getUint8(this.offset++);
                }, i.n = function() {
                    var _$t = this.dataView.getFloat64(this.offset, !0);
                    return this.offset += 8, _$t;
                }, i.s = function() {
                    var _$t = this.n(), i = String.fromCharCode.apply(null, Array.from(new Uint8Array(this.dataView.buffer, this.offset, _$t)));
                    return this.offset += _$t, i;
                }, t1;
            }(), pQ = function pQ(t1, i, n, s, r) {
                this.programInfo = t1, this.shaderInfo = i, this.attributes = n, this.blockSizes = s, this.handleMap = r;
            }, yQ = function yQ() {
                this.programInfos = new Map, this.programProxies = new Map;
            };
            function mQ(t1, i) {
                var n = r({}, i);
                return n.effectName = t1, Im(n), n;
            }
            function bQ(t1, i) {
                for(var n, s = d(t1.blocks); !(n = s()).done;){
                    var _$r = n.value;
                    if (_$r.name === i) return {
                        set: _$r.set,
                        binding: _$r.binding
                    };
                }
                for(var h, e = d(t1.buffers); !(h = e()).done;){
                    var u = h.value;
                    if (u.name === i) return {
                        set: u.set,
                        binding: u.binding
                    };
                }
                for(var o, f = d(t1.samplerTextures); !(o = f()).done;){
                    var _$c = o.value;
                    if (_$c.name === i) return {
                        set: _$c.set,
                        binding: _$c.binding
                    };
                }
                for(var a, v = d(t1.samplers); !(a = v()).done;){
                    var l = a.value;
                    if (l.name === i) return {
                        set: l.set,
                        binding: l.binding
                    };
                }
                for(var w, g = d(t1.textures); !(w = g()).done;){
                    var p = w.value;
                    if (p.name === i) return {
                        set: p.set,
                        binding: p.binding
                    };
                }
                for(var _$y, _$_ = d(t1.images); !(_$y = _$_()).done;){
                    var m = _$y.value;
                    if (m.name === i) return {
                        set: m.set,
                        binding: m.binding
                    };
                }
                for(var b, k = d(t1.subpassInputs); !(b = k()).done;){
                    var A = b.value;
                    if (A.name === i) return {
                        set: A.set,
                        binding: A.binding
                    };
                }
                throw z("binding not found in shaderInfo!");
            }
            function kQ(t1, i) {
                for(var n = i, s = /layout\s*\(([^)])+\)\s+uniform\s+(\b\w+\b\s+)?sampler(\w+)\s+(\b\w+\b)/g, _$r = s.exec(n); _$r;){
                    var h = bQ(t1, _$r[4]), e = "layout(set = " + h.set + ", binding = " + h.binding + ") uniform " + (_$r[2] ? _$r[2] : "") + " sampler" + _$r[3] + " " + _$r[4];
                    n = n.replace(_$r[0], e), _$r = s.exec(n);
                }
                for(var u = /layout\s*\(([^)]+)\)\s*(readonly|writeonly)?\s*\b((uniform\s*|buffer\s*|image2D\s*){1,2})\b\s*(\b\w+\b)\s*[{;]/g, o = u.exec(n); o;){
                    var f = bQ(t1, o[5]), _$c = f.set, a = f.binding, v = o[2] ? o[2] : "", l = " {";
                    o[3].includes("image") && (l = ";");
                    var _$d = o[1], w = "layout(" + (_$d = (_$d = _$d.replace(/set\s*=\s*\d+/g, "set = " + _$c)).replace(/binding\s*=\s*\d+/g, "binding = " + a)) + ") " + v + " " + o[3] + " " + o[5] + l;
                    n = n.replace(o[0], w), o = u.exec(n);
                }
                return n;
            }
            function AQ(t1, i) {
                "glsl4" === Dm(kw.gfxDevice) && (i.glsl4.vert && (i.glsl4.vert = kQ(t1, i.glsl4.vert)), i.glsl4.frag && (i.glsl4.frag = kQ(t1, i.glsl4.frag)), i.glsl4.compute && (i.glsl4.compute = kQ(t1, i.glsl4.compute)));
            }
            function EQ(t1, i) {
                AQ(t1, i);
                for(var n, _$r = d(i.blocks); !(n = _$r()).done;){
                    for(var h, e = n.value, u = !1, o = d(t1.blocks); !(h = o()).done;){
                        var f = h.value;
                        if (1 === f.set && f.name === e.name) {
                            e.binding = f.binding, u = !0;
                            break;
                        }
                    }
                    u || z("Block " + e.name + " not found in shader " + t1.name);
                }
            }
            function TQ(t1, i, n, s, r) {
                for(var h, e = d(t1.descriptorBlocks); !(h = e()).done;){
                    var u = h.value, o = u.visibility, f = u.offset;
                    switch(u.type){
                        case 0:
                            for(var _$c, a = d(i.blocks); !(_$c = a()).done;){
                                var v = _$c.value;
                                v.stageFlags === o && (r.push(Tm(v.members)), s.blocks.push(new Zl(n, f, v.name, v.members.map(function(t1) {
                                    return new Ql(t1.name, t1.type, t1.count);
                                }), 1)), ++f);
                            }
                            break;
                        case 1:
                        case 6:
                            break;
                        case 2:
                            for(var l, w = d(i.samplerTextures); !(l = w()).done;){
                                var g = l.value;
                                g.stageFlags === o && (s.samplerTextures.push(new td(n, f, g.name, g.type, g.count)), ++f);
                            }
                            break;
                        case 3:
                            for(var p, _$y = d(i.samplers); !(p = _$y()).done;){
                                var _$_ = p.value;
                                _$_.stageFlags === o && (s.samplers.push(new id(n, f, _$_.name, _$_.count)), ++f);
                            }
                            break;
                        case 4:
                            for(var m, b = d(i.textures); !(m = b()).done;){
                                var k = m.value;
                                k.stageFlags === o && (s.textures.push(new nd(n, f, k.name, k.type, k.count)), ++f);
                            }
                            break;
                        case 5:
                            for(var A, E = d(i.buffers); !(A = E()).done;){
                                var T = A.value;
                                T.stageFlags === o && (s.buffers.push(new rd(n, f, T.name, 1, T.memoryAccess)), ++f);
                            }
                            break;
                        case 7:
                            for(var S, _$O = d(i.images); !(S = _$O()).done;){
                                var _$I = S.value;
                                _$I.stageFlags === o && (s.images.push(new sd(n, f, _$I.name, _$I.type, _$I.count, _$I.memoryAccess)), ++f);
                            }
                            break;
                        case 8:
                            for(var _$R, _$M = d(i.subpassInputs); !(_$R = _$M()).done;){
                                var _$C = _$R.value;
                                _$C.stageFlags === o && (s.subpassInputs.push(new hd(n, _$C.binding, _$C.name, _$C.count)), ++f);
                            }
                    }
                }
            }
            function SQ(t1, i, n, s, r) {
                for(var h, e = d(i.descriptorBlocks); !(h = e()).done;){
                    var u = h.value, o = u.offset;
                    switch(u.type){
                        case 0:
                            for(var f, _$c = d(u.descriptors); !(f = _$c()).done;){
                                var a = f.value, v = i.uniformBlocks.get(a.descriptorID);
                                void 0 !== v ? (r.push(Tm(v.members)), s.blocks.push(new Zl(n, o, t1[a.descriptorID], v.members.map(function(t1) {
                                    return new Ql(t1.name, t1.type, t1.count);
                                }), 1)), ++o) : z("Failed to find uniform block " + a.descriptorID + " in layout");
                            }
                            o !== u.offset + u.capacity && z("Uniform buffer binding mismatch for set " + n);
                            break;
                        case 1:
                        case 6:
                            break;
                        case 2:
                            for(var l, w = d(u.descriptors); !(l = w()).done;){
                                var g = l.value;
                                s.samplerTextures.push(new td(n, o, t1[g.descriptorID], g.type, g.count)), ++o;
                            }
                            break;
                        case 3:
                            for(var p, _$y = d(u.descriptors); !(p = _$y()).done;){
                                var _$_ = p.value;
                                s.samplers.push(new id(n, o, t1[_$_.descriptorID], _$_.count)), ++o;
                            }
                            break;
                        case 4:
                            for(var m, b = d(u.descriptors); !(m = b()).done;){
                                var k = m.value;
                                s.textures.push(new nd(n, o, t1[k.descriptorID], k.type, k.count)), ++o;
                            }
                            break;
                        case 5:
                            for(var A, E = d(u.descriptors); !(A = E()).done;){
                                var T = A.value;
                                s.buffers.push(new rd(n, o, t1[T.descriptorID], 1, 3)), ++o;
                            }
                            break;
                        case 7:
                            for(var S, _$O = d(u.descriptors); !(S = _$O()).done;){
                                var _$I = S.value;
                                s.images.push(new sd(n, o, t1[_$I.descriptorID], _$I.type, _$I.count, 3)), ++o;
                            }
                            break;
                        case 8:
                            for(var _$R, _$M = d(u.descriptors); !(_$R = _$M()).done;){
                                var _$C = _$R.value;
                                s.subpassInputs.push(new hd(n, o, t1[_$C.descriptorID], _$C.count)), ++o;
                            }
                    }
                }
            }
            function OQ(t1, i, n, s) {
                for(var e = 0; e < t1.blocks.length; e++)!function h() {
                    var h = t1.blocks[e], u = i.layouts[h.name], o = u && i.bindings.find(function(t1) {
                        return t1.binding === u.binding;
                    });
                    if (!(u && o && 15 & o.descriptorType)) return console.warn("builtin UBO '" + h.name + "' not available!");
                    s.push(Tm(h.members)), n.blocks.push(new Zl(2, o.binding, h.name, h.members.map(function(t1) {
                        return new Ql(t1.name, t1.type, t1.count);
                    }), 1));
                }();
                for(var o = 0; o < t1.samplerTextures.length; o++)!function u() {
                    var s = t1.samplerTextures[o], h = i.layouts[s.name], e = h && i.bindings.find(function(t1) {
                        return t1.binding === h.binding;
                    });
                    if (!(h && e && 496 & e.descriptorType)) return console.warn("builtin samplerTexture '" + s.name + "' not available!");
                    n.samplerTextures.push(new td(2, e.binding, s.name, s.type, s.count));
                }();
            }
            function IQ(t1) {
                for(var i, n = 0, s = d(t1.bindings); !(i = s()).done;){
                    var _$r = i.value;
                    1 !== _$r.descriptorType && 2 !== _$r.descriptorType || (n += _$r.count);
                }
                return n;
            }
            function RQ(t1) {
                for(var i, n = 0, s = d(t1.bindings); !(i = s()).done;){
                    var _$r = i.value;
                    1 !== _$r.descriptorType && 2 !== _$r.descriptorType && (n += _$r.count);
                }
                return n;
            }
            function MQ(t1, i) {
                for(var n, s = d(i); !(n = s()).done;){
                    var _$r = n.value;
                    _$r.flattened = t1[_$r.set] + _$r.binding;
                }
            }
            function CQ(t1, i, n) {
                for(var s, _$r = d(n); !(s = _$r()).done;){
                    var h = s.value;
                    h.flattened = t1[h.set] + h.binding - i[h.set];
                }
            }
            function NQ(t1, i, n) {
                var s, _$r, h, e, u = [
                    ,
                    ,
                    ,
                    , 
                ], o = (null == (s = t1[3]) ? void 0 : s.uniformBlockCapacity) || 0, f = (null == (_$r = t1[2]) ? void 0 : _$r.uniformBlockCapacity) || 0, _$c = (null == (h = t1[1]) ? void 0 : h.uniformBlockCapacity) || 0, a = i ? IQ(i) : (null == (e = t1[0]) ? void 0 : e.uniformBlockCapacity) || 0;
                u[0] = o, u[3] = f, u[1] = _$c, u[2] = a;
                var v = 0 + o, l = v + f, w = [
                    ,
                    ,
                    ,
                    , 
                ];
                w[0] = 0, w[3] = v, w[1] = l + a, w[2] = l, MQ(w, n.blocks);
                var g, p, _$y, _$_ = 0 + ((null == (g = t1[3]) ? void 0 : g.samplerTextureCapacity) || 0), m = _$_ + ((null == (p = t1[2]) ? void 0 : p.samplerTextureCapacity) || 0), b = m + (i ? RQ(i) : (null == (_$y = t1[0]) ? void 0 : _$y.samplerTextureCapacity) || 0), k = [
                    ,
                    ,
                    ,
                    , 
                ];
                k[0] = 0, k[3] = _$_, k[1] = b, k[2] = m, CQ(k, u, n.samplerTextures);
            }
            function PQ(t1, i, n, s, r, h) {
                var e = [
                    null,
                    null,
                    null,
                    null
                ], u = null, o = new od, f = [], _$c = i.getSet(3);
                _$c && (e[3] = _$c.descriptorSetLayoutData, SQ(t1.valueNames, _$c.descriptorSetLayoutData, 0, o, f));
                var a = n.getSet(2);
                a && (e[2] = a.descriptorSetLayoutData, SQ(t1.valueNames, a.descriptorSetLayoutData, 3, o, f));
                var v = s.descriptors[1];
                if (r) {
                    var l = r.layout.getSet(1);
                    l && (e[1] = l.descriptorSetLayoutData, SQ(t1.valueNames, l.descriptorSetLayoutData, 1, o, f));
                } else {
                    var _$d = n.getSet(1);
                    _$d && (e[1] = _$d.descriptorSetLayoutData, TQ(_$d.descriptorSetLayoutData, v, 1, o, f));
                }
                var w = s.descriptors[0];
                if (r) if (h) u = Py, OQ(w, Py, o, f);
                else {
                    var g = r.layout.getSet(0);
                    g && (e[0] = g.descriptorSetLayoutData, SQ(t1.valueNames, g.descriptorSetLayoutData, 2, o, f));
                }
                else {
                    var p = n.getSet(0);
                    p && (e[0] = p.descriptorSetLayoutData, TQ(p.descriptorSetLayoutData, w, 2, o, f));
                }
                return NQ(e, u, o), o.stages.push(new ed(1, "")), o.stages.push(new ed(16, "")), [
                    o,
                    f
                ];
            }
            var DQ = function() {
                function t1(t1, i) {
                    void 0 === i && (i = null), this.shader = void 0, this.pipelineState = null, this.shader = t1, this.pipelineState = i;
                }
                return s(t1, [
                    {
                        key: "name",
                        get: function get() {
                            return this.shader.name;
                        }
                    }
                ]), t1;
            }();
            function LQ(t1, i) {
                for(var n in t1.layouts){
                    var s = t1.layouts[n];
                    if (s.binding === i) {
                        $(s.name === n);
                        var _$r = 0;
                        return (_instanceof(s, td) || _instanceof(s, sd)) && (_$r = s.type), [
                            s.name,
                            _$r
                        ];
                    }
                }
                return z("descriptor not found"), [
                    "",
                    0
                ];
            }
            function BQ(t1, i) {
                for(var n, s = new Vq, _$r = d(i.bindings); !(n = _$r()).done;){
                    var h = n.value, e = LQ(i, h.binding), u = e[0], o = e[1], f = TK(t1, u), a = new Hq(wK(h.descriptorType), h.stageFlags, h.count, h.access, h.viewDimension, h.sampleType, h.format);
                    a.offset = h.binding, a.descriptors.push(new Gq(f, o, h.count)), s.descriptorBlocks.push(a), void 0 !== s.bindingMap.get(f) && z("duplicate descriptor name '" + u + "'"), s.bindingMap.set(f, h.binding);
                    var v = i.layouts[u];
                    _instanceof(v, Zl) && s.uniformBlocks.set(f, v);
                }
                return s;
            }
            function FQ(t1, i, n, s, r, h) {
                var e = r.layout.getSets(), o = new Wq(NK(n, 1, 1, i.descriptors[1]));
                if (PK(o.descriptorSetLayoutData, o.descriptorSetLayoutInfo), e.set(1, o), h) {
                    var _$c = new Wq(BQ(n, Py));
                    if (PK(_$c.descriptorSetLayoutData, _$c.descriptorSetLayoutInfo), Py.bindings.length !== _$c.descriptorSetLayoutInfo.bindings.length) z("local descriptor set layout inconsistent");
                    else for(var a = 0; a !== Py.bindings.length; ++a){
                        var v = Py.bindings[a], l = _$c.descriptorSetLayoutInfo.bindings[a];
                        v.binding === l.binding && v.descriptorType === l.descriptorType && v.count === l.count && v.stageFlags === l.stageFlags || z("local descriptor set layout inconsistent");
                    }
                    e.set(0, _$c);
                } else {
                    var w = new Wq(NK(n, 0, 2, i.descriptors[0]));
                    PK(w.descriptorSetLayoutData, w.descriptorSetLayoutInfo), e.set(0, w);
                }
                var g = s.shaderPrograms.length;
                s.shaderIndex.set(t1, g), s.shaderPrograms.push(r);
            }
            function UQ(t1, i, n, s, r) {
                $(r < 2);
                var h = i.j(n), e = h.shaderIndex.get(s);
                if (void 0 === e) return _K;
                var u = h.shaderPrograms[e].layout.getSet(r);
                return void 0 === u ? _K : (u.descriptorSetLayout || (u.descriptorSetLayout = t1.createDescriptorSetLayout(u.descriptorSetLayoutInfo)), u.descriptorSetLayout);
            }
            function xQ(t1, i, n, s, r) {
                $(r < 2);
                var h = i.j(n), e = h.shaderIndex.get(s);
                if (void 0 === e) return null;
                var u = h.shaderPrograms[e].layout.getSet(r);
                return void 0 === u ? null : (u.descriptorSetLayout || (u.descriptorSetLayout = t1.createDescriptorSetLayout(u.descriptorSetLayoutInfo)), u.descriptorSetLayout);
            }
            function jQ(t1, i, n) {
                var s = n.program, _$r = gK(t1, n.pass);
                if (4294967295 === _$r) return z("Invalid render pass, program: " + s), [
                    4294967295,
                    4294967295,
                    4294967295,
                    null,
                    4294967295
                ];
                var h = n.subpass && "" !== n.subpass && !0, e = h ? pK(t1, _$r, n.subpass) : 4294967295;
                if (h && 4294967295 === e) return z("Invalid render subpass, program: " + s), [
                    4294967295,
                    4294967295,
                    4294967295,
                    null,
                    4294967295
                ];
                var u = yK(t1, 4294967295 === e ? _$r : e, n.phase);
                if (4294967295 === u) return z("Invalid render phase, program: " + s), [
                    4294967295,
                    4294967295,
                    4294967295,
                    null,
                    4294967295
                ];
                for(var o = null, f = 4294967295, _$c = 0; _$c < i.shaders.length; ++_$c){
                    var a = i.shaders[_$c];
                    if (a.name === s) {
                        o = a, f = _$c;
                        break;
                    }
                }
                return [
                    _$r,
                    e,
                    u,
                    o,
                    f
                ];
            }
            function GQ(t1) {
                return void 0 === t1.descriptors ? (z("No descriptors in shader: " + t1.name + ", please reimport ALL effects"), 1) : 0;
            }
            var HQ = function() {
                function t1(t1) {
                    this.layoutGraph = void 0, this.phases = new Map, this.mergeHighFrequency = !1, this.fixedLocal = !0, this.localLayoutData = new Vq, this.localDescriptorSetLayout = null, this.pipeline = null, this.device = null, this.layoutGraph = t1;
                    for(var i, n = d(t1.v()); !(i = n()).done;){
                        var s = i.value;
                        t1.h(1, s) && this.phases.set(s, new yQ);
                    }
                }
                var i = t1.prototype;
                return i.init = function(t1) {
                    if (this.device !== t1) {
                        this.device = t1;
                        var i = Math.floor((this.device.capabilities.maxVertexUniformVectors - 38) / 3);
                        i = i < 256 ? i : 256, e_.initLayout(i);
                        for(var n, s = this.layoutGraph, _$r = d(s.v()); !(n = _$r()).done;)for(var h, e = n.value, u = d(s.getLayout(e).getSets()); !(h = u()).done;){
                            var o = h.value;
                            o[0];
                            var f = o[1];
                            PK(f.descriptorSetLayoutData, f.descriptorSetLayoutInfo), f.descriptorSetLayout = this.device.createDescriptorSetLayout(f.descriptorSetLayoutInfo), $(!!f.descriptorSetLayout), f.descriptorSet = this.device.createDescriptorSet(new kd(f.descriptorSetLayout)), $(!!f.descriptorSet);
                        }
                        for(var _$c, a = d(s.v()); !(_$c = a()).done;){
                            var v = _$c.value;
                            if (s.h(1, v)) {
                                var w = s.getParent(v), g = s.getLayout(w), p = s.getLayout(v), _$y = new Ad;
                                DK(g, 3, _$y), DK(p, 2, _$y), DK(p, 1, _$y), DK(p, 0, _$y), s.j(v).pipelineLayout = this.device.createPipelineLayout(_$y);
                            }
                        }
                        this.localLayoutData = BQ(s, Py);
                        var m, b = new bd;
                        PK(this.localLayoutData, b), this.localDescriptorSetLayout = this.device.createDescriptorSetLayout(b), $(!!this.localDescriptorSetLayout);
                        for(var k, A = 0, E = d(this.localLayoutData.descriptorBlocks); !(k = E()).done;){
                            var T = k.value;
                            if (0 === T.type || 1 === T.type) for(var S, _$O = d(T.descriptors); !(S = _$O()).done;)A += S.value.count;
                        }
                        $(7 === A), m = this.device, this.layoutGraph.constantMacros, m.getFormatFeatures(44), m.capabilities.maxVertexUniformVectors, m.capabilities.maxFragmentUniformVectors, m.hasFeature(5), e_.JOINT_UNIFORM_CAPACITY;
                    }
                }, i.addEffect = function(t1) {
                    for(var i, n = this, s = this.layoutGraph, _$r = d(t1.techniques); !(i = _$r()).done;)for(var h, u = d(i.value.passes); !(h = u()).done;)!function e() {
                        var i = h.value, _$r = i.program, e = jQ(s, t1, i), u = e[0], o = e[1], f = e[2], _$c = e[3];
                        if (null === _$c || GQ(_$c)) return z("program: " + _$r + " not found");
                        $(4294967295 !== u && 4294967295 !== f);
                        var a = 4294967295 === o ? u : o, v = s.getLayout(a), l = s.getLayout(f), _$d = n.phases.get(f);
                        void 0 === _$d && (_$d = new yQ, n.phases.set(f, _$d));
                        var w = _$d.programInfos, g = mQ(t1.name, _$c), p = null;
                        if (!n.mergeHighFrequency) {
                            var _$y = s.j(f);
                            FQ(_$r, _$c, s, _$y, p = new Kq, n.fixedLocal);
                        }
                        var _$_ = PQ(s, v, l, _$c, p, n.fixedLocal), m = _$_[0], b = _$_[1];
                        EQ(m, g);
                        var k = Sm(m), A = [];
                        g.attributes.forEach(function(t1) {
                            A.push(new ud(t1.name, t1.format, t1.isNormalized, 0, t1.isInstanced, t1.location));
                        });
                        var E = new pQ(g, m, A, b, k);
                        w.set(_$c.name, E);
                    }();
                }, i.precompileEffect = function(t1, i) {
                    for(var n, s = this, _$r = this.layoutGraph, h = d(i.techniques); !(n = h()).done;)for(var e, o = d(n.value.passes); !(e = o()).done;)!function u() {
                        var n = e.value, h = n.program, u = jQ(_$r, i, n), o = u[0];
                        u[1];
                        var f = u[2], _$c = u[3], a = u[4];
                        if (null === _$c || GQ(_$c)) return z("program: " + h + " not valid");
                        $(4294967295 !== o && 4294967295 !== f && 4294967295 !== a);
                        var v = i.combinations[a];
                        v && Rm(v).forEach(function(i) {
                            return s.getProgramVariant(t1, f, h, i);
                        });
                    }();
                }, i.getProgramInfo = function(t1, i) {
                    return $(4294967295 !== t1), this.phases.get(t1).programInfos.get(i).programInfo;
                }, i.getShaderInfo = function(t1, i) {
                    return $(4294967295 !== t1), this.phases.get(t1).programInfos.get(i).shaderInfo;
                }, i.getKey = function(t1, i, n) {
                    $(4294967295 !== t1);
                    var s = this.phases.get(t1);
                    if (void 0 === s) return z("Invalid render phase, program: " + i), "";
                    var _$r = s.programInfos.get(i);
                    return void 0 === _$r ? (z("Invalid program, program: " + i), "") : km(_$r.programInfo, n);
                }, i.getProgramVariant = function(t1, i, n, s, r) {
                    void 0 === r && (r = null), Object.assign(s, null == (h = this.pipeline) ? void 0 : h.macros), $(4294967295 !== i);
                    var h, e = this.phases.get(i);
                    if (void 0 === e) return z("Invalid render phase, program: " + n), null;
                    var u = e.programInfos.get(n);
                    if (void 0 === u) return z("Invalid program, program: " + n), null;
                    var o = u.programInfo;
                    null === r && (r = km(o, s));
                    var f = e.programProxies, _$c = f.get(r);
                    if (void 0 !== _$c) return _$c;
                    var a = ym(s, o.defines), v = this.layoutGraph.constantMacros + o.constantMacros + a.reduce(function(t1, i) {
                        return t1 + "#define " + i.name + " " + i.value + "\n";
                    }, ""), l = o.glsl3, _$d = Dm(t1);
                    _$d ? l = o[_$d] : rt(16346);
                    var w = u.shaderInfo;
                    l.compute ? (w.stages[0].source = v + l.compute, w.stages[0].stage = 32, w.stages.length = 1) : (w.stages[0].source = v + l.vert, w.stages[1].source = v + l.frag), w.attributes = bm(o, u.attributes, s), w.name = _m(n, a);
                    var p = new DQ(t1.createShader(w));
                    return f.set(r, p), p;
                }, i.getMaterialDescriptorSetLayout = function(t1, i, n) {
                    if (this.mergeHighFrequency) {
                        $(4294967295 !== i);
                        var s = this.layoutGraph.getParent(i);
                        return xK(this.layoutGraph, s, i, 1);
                    }
                    return UQ(t1, this.layoutGraph, i, n, 1);
                }, i.getLocalDescriptorSetLayout = function(t1, i, n) {
                    if (this.mergeHighFrequency) {
                        $(4294967295 !== i);
                        var s = this.layoutGraph.getParent(i);
                        return xK(this.layoutGraph, s, i, 0);
                    }
                    return UQ(t1, this.layoutGraph, i, n, 0);
                }, i.getBlockSizes = function(t1, i) {
                    $(4294967295 !== t1);
                    var n = this.phases.get(t1);
                    if (!n) return z("Invalid render phase, program: " + i), [];
                    var s = n.programInfos.get(i);
                    return s ? s.blockSizes : (z("Invalid program, program: " + i), []);
                }, i.getHandleMap = function(t1, i) {
                    $(4294967295 !== t1);
                    var n = this.phases.get(t1);
                    if (!n) return z("Invalid render phase, program: " + i), {};
                    var s = n.programInfos.get(i);
                    return s ? s.handleMap : (z("Invalid program, program: " + i), {});
                }, i.getPipelineLayout = function(t1, i, n) {
                    if (this.mergeHighFrequency) return $(4294967295 !== i), this.layoutGraph.j(i).pipelineLayout;
                    var s = this.layoutGraph, _$r = s.j(i), h = _$r.shaderIndex.get(n);
                    if (void 0 === h) return mK;
                    var e = _$r.shaderPrograms[h];
                    if (e.pipelineLayout) return e.pipelineLayout;
                    var u = s.getParent(i);
                    if (4294967295 === u) return mK;
                    var o = new Ad, f = jK(this.layoutGraph, u, i, 3);
                    f && o.setLayouts.push(f);
                    var _$c = jK(this.layoutGraph, u, i, 2);
                    _$c && o.setLayouts.push(_$c);
                    var a = xQ(t1, s, i, n, 1);
                    a && o.setLayouts.push(a);
                    var v = xQ(t1, s, i, n, 0);
                    return v && o.setLayouts.push(v), e.pipelineLayout = t1.createPipelineLayout(o), e.pipelineLayout;
                }, i.getProgramID = function(t1, i) {
                    return GK(this.layoutGraph, t1, i);
                }, i.getDescriptorNameID = function(t1) {
                    return HK(this.layoutGraph, t1);
                }, i.getDescriptorName = function(t1) {
                    return VK(this.layoutGraph, t1);
                }, t1;
            }(), VQ = null, WQ = !1;
            function zQ() {
                WQ = !0;
            }
            var $Q = [], qQ = new tY, YQ = new HQ(qQ), KQ = new Map, JQ = Object.freeze({
                __proto__: null,
                AccessType: {
                    READ: 0,
                    READ_WRITE: 1,
                    WRITE: 2
                },
                AttachmentType: {
                    RENDER_TARGET: 0,
                    DEPTH_STENCIL: 1,
                    SHADING_RATE: 2
                },
                ClearValueType: {
                    NONE: 0,
                    FLOAT_TYPE: 1,
                    INT_TYPE: 2
                },
                CopyPair: SX,
                INVALID_ID: 4294967295,
                LightInfo: EX,
                LightingMode: {
                    NONE: 0,
                    DEFAULT: 1,
                    CLUSTERED: 2
                },
                MovePair: IX,
                ParameterType: {
                    CONSTANTS: 0,
                    CBV: 1,
                    UAV: 2,
                    SRV: 3,
                    TABLE: 4,
                    SSV: 5
                },
                PipelineCapabilities: Lq,
                PipelineStatistics: RX,
                PipelineType: {
                    BASIC: 0,
                    STANDARD: 1
                },
                QueueHint: {
                    NONE: 0,
                    OPAQUE: 1,
                    MASK: 2,
                    BLEND: 3,
                    RENDER_OPAQUE: 1,
                    RENDER_CUTOUT: 2,
                    RENDER_TRANSPARENT: 3
                },
                RenderCommonObjectPool: DX,
                ResolveFlags: {
                    NONE: 0,
                    COLOR: 1,
                    DEPTH: 2,
                    STENCIL: 4
                },
                ResolvePair: TX,
                ResourceDimension: {
                    BUFFER: 0,
                    TEXTURE1D: 1,
                    TEXTURE2D: 2,
                    TEXTURE3D: 3
                },
                ResourceFlags: {
                    NONE: 0,
                    UNIFORM: 1,
                    INDIRECT: 2,
                    STORAGE: 4,
                    SAMPLED: 8,
                    COLOR_ATTACHMENT: 16,
                    DEPTH_STENCIL_ATTACHMENT: 32,
                    INPUT_ATTACHMENT: 64,
                    SHADING_RATE: 128,
                    TRANSFER_SRC: 256,
                    TRANSFER_DST: 512
                },
                ResourceResidency: {
                    MANAGED: 0,
                    MEMORYLESS: 1,
                    PERSISTENT: 2,
                    EXTERNAL: 3,
                    BACKBUFFER: 4
                },
                SceneFlags: {
                    NONE: 0,
                    OPAQUE: 1,
                    MASK: 2,
                    BLEND: 4,
                    OPAQUE_OBJECT: 1,
                    CUTOUT_OBJECT: 2,
                    TRANSPARENT_OBJECT: 4,
                    SHADOW_CASTER: 8,
                    UI: 16,
                    DEFAULT_LIGHTING: 32,
                    VOLUMETRIC_LIGHTING: 64,
                    CLUSTERED_LIGHTING: 128,
                    PLANAR_SHADOW: 256,
                    GEOMETRY: 512,
                    PROFILER: 1024,
                    DRAW_INSTANCING: 2048,
                    DRAW_NON_INSTANCING: 4096,
                    REFLECTION_PROBE: 8192,
                    GPU_DRIVEN: 16384,
                    NON_BUILTIN: 32768,
                    ALL: 4294967295
                },
                SubpassCapabilities: {
                    NONE: 0,
                    INPUT_DEPTH_STENCIL: 1,
                    INPUT_COLOR: 2,
                    INPUT_COLOR_MRT: 4,
                    HETEROGENEOUS_SAMPLE_COUNT: 8
                },
                TaskType: {
                    SYNC: 0,
                    ASYNC: 1
                },
                UpdateFrequency: {
                    PER_INSTANCE: 0,
                    PER_BATCH: 1,
                    PER_PHASE: 2,
                    PER_PASS: 3,
                    COUNT: 4
                },
                UploadPair: OX,
                completePhaseName: function completePhaseName(t1) {
                    return "number" == typeof t1 ? t1.toString() : "string" == typeof t1 ? t1 : "default";
                },
                createCustomPipeline: function createCustomPipeline() {
                    var _$t = new wQ(qQ), i = Ti.CUSTOM_PIPELINE_NAME;
                    return _$t.setCustomPipelineName(i), YQ.pipeline = _$t, _$t;
                },
                customPipelineBuilderMap: KQ,
                defaultWindowResize: function defaultWindowResize(t1, i, n, s) {
                    t1.addRenderWindow(i.colorName, 36, n, s, i), t1.addDepthStencil(i.depthStencilName, 55, n, s);
                    var _$r = i.renderWindowId, h = Q_(t1.device) ? 11 : 35, e = t1.pipelineSceneData.shadows.size;
                    t1.addRenderTarget("ShadowMap" + _$r, h, e.x, e.y), t1.addDepthStencil("ShadowDepth" + _$r, 55, e.x, e.y);
                },
                destroy: function destroy() {
                    BK(qQ);
                },
                dispatchResizeEvents: function dispatchResizeEvents(t1, i, n) {
                    if (i.windowResize) {
                        for(var s, _$r = d(t1); !(s = _$r()).done;){
                            var h = s.value;
                            if (h.window.isRenderWindowResized() || WQ) {
                                var e = Math.max(Math.floor(h.window.width), 1), u = Math.max(Math.floor(h.window.height), 1);
                                i.windowResize(n, h.window, h, e, u), $Q.push(h.window);
                            }
                        }
                        for(var o, f = d($Q); !(o = f()).done;)o.value.setRenderWindowResizeHandled();
                        $Q.length = 0, WQ = !1;
                    }
                },
                enableEffectImport: !0,
                forceResizeAllWindows: zQ,
                getCustomPipeline: function getCustomPipeline(t1) {
                    var i = KQ.get(t1);
                    return i || (i = KQ.get("Forward")), i;
                },
                getEditorPipelineSettings: function getEditorPipelineSettings() {
                    return VQ;
                },
                getPassID: function getPassID(t1) {
                    return gK(qQ, t1);
                },
                getPhaseID: function getPhaseID(t1, i) {
                    return yK(qQ, t1, i);
                },
                getSubpassID: function getSubpassID(t1, i) {
                    return pK(qQ, t1, i);
                },
                init: function init(t1, i) {
                    if (i && i.byteLength >= 8) {
                        var n = new Uint8Array(i);
                        if (4294967295 === new DataView(n.buffer, n.byteOffset, 8).getUint32(0)) {
                            var s = new kP.Inflate(new Uint8Array(n.buffer, n.byteOffset + 8)).decompress();
                            lY(new gQ(s.buffer, s.byteOffset), qQ);
                        } else lY(new gQ(n.buffer, n.byteOffset), qQ);
                    }
                    LK(t1, qQ);
                },
                loadCopyPair: function loadCopyPair(t1, i) {
                    i.source = t1.s(), i.target = t1.s(), i.mipLevels = t1.n(), i.numSlices = t1.n(), i.sourceMostDetailedMip = t1.n(), i.sourceFirstSlice = t1.n(), i.sourcePlaneSlice = t1.n(), i.targetMostDetailedMip = t1.n(), i.targetFirstSlice = t1.n(), i.targetPlaneSlice = t1.n();
                },
                loadLightInfo: function loadLightInfo(t1, i) {
                    i.level = t1.n(), i.culledByLight = t1.b();
                },
                loadMovePair: function loadMovePair(t1, i) {
                    i.source = t1.s(), i.target = t1.s(), i.mipLevels = t1.n(), i.numSlices = t1.n(), i.targetMostDetailedMip = t1.n(), i.targetFirstSlice = t1.n(), i.targetPlaneSlice = t1.n();
                },
                loadPipelineStatistics: function loadPipelineStatistics(t1, i) {
                    i.numRenderPasses = t1.n(), i.numManagedTextures = t1.n(), i.totalManagedTextures = t1.n(), i.numUploadBuffers = t1.n(), i.numUploadBufferViews = t1.n(), i.numFreeUploadBuffers = t1.n(), i.numFreeUploadBufferViews = t1.n(), i.numDescriptorSets = t1.n(), i.numFreeDescriptorSets = t1.n(), i.numInstancingBuffers = t1.n(), i.numInstancingUniformBlocks = t1.n();
                },
                loadResolvePair: function loadResolvePair(t1, i) {
                    i.source = t1.s(), i.target = t1.s(), i.resolveFlags = t1.n(), i.mode = t1.n(), i.mode1 = t1.n();
                },
                packRGBE: function packRGBE(t1) {
                    var i = Math.max(Math.max(t1.x, t1.y), t1.z), n = 128;
                    i > 1e-4 && (n = Un((n = Math.ceil(n = Math.log(i) / Math.log(1.1))) + 128, 0, 255));
                    var s = 1 / Math.pow(1.1, n - 128), _$r = Jr(t1.multiplyScalar(s), new Ss(0, 0, 0), new Ss(1, 1, 1));
                    _$r.multiplyScalar(255);
                    var h, e, u = Qr(_$r).add((h = _$r.subtract(Qr(_$r))) < (e = new Ss(.5, .5, .5)) ? e : h);
                    return new Hr(u.x / 255, u.y / 255, u.z / 255, n / 255);
                },
                programLib: YQ,
                saveCopyPair: function saveCopyPair(t1, i) {
                    t1.s(i.source), t1.s(i.target), t1.n(i.mipLevels), t1.n(i.numSlices), t1.n(i.sourceMostDetailedMip), t1.n(i.sourceFirstSlice), t1.n(i.sourcePlaneSlice), t1.n(i.targetMostDetailedMip), t1.n(i.targetFirstSlice), t1.n(i.targetPlaneSlice);
                },
                saveLightInfo: function saveLightInfo(t1, i) {
                    t1.n(i.level), t1.b(i.culledByLight);
                },
                saveMovePair: function saveMovePair(t1, i) {
                    t1.s(i.source), t1.s(i.target), t1.n(i.mipLevels), t1.n(i.numSlices), t1.n(i.targetMostDetailedMip), t1.n(i.targetFirstSlice), t1.n(i.targetPlaneSlice);
                },
                savePipelineStatistics: function savePipelineStatistics(t1, i) {
                    t1.n(i.numRenderPasses), t1.n(i.numManagedTextures), t1.n(i.totalManagedTextures), t1.n(i.numUploadBuffers), t1.n(i.numUploadBufferViews), t1.n(i.numFreeUploadBuffers), t1.n(i.numFreeUploadBufferViews), t1.n(i.numDescriptorSets), t1.n(i.numFreeDescriptorSets), t1.n(i.numInstancingBuffers), t1.n(i.numInstancingUniformBlocks);
                },
                saveResolvePair: function saveResolvePair(t1, i) {
                    t1.s(i.source), t1.s(i.target), t1.n(i.resolveFlags), t1.n(i.mode), t1.n(i.mode1);
                },
                setCustomPipeline: function setCustomPipeline(t1, i) {
                    KQ.set(t1, i), zQ();
                },
                setEditorPipelineSettings: function setEditorPipelineSettings(t1) {
                    VQ = t1, WQ = !0;
                }
            });
            t1("e8", JQ), A.rendering = JQ;
            var QQ = function(t1) {
                function i() {
                    var _$i;
                    return (_$i = t1.call(this) || this).TR = null, _$i;
                }
                h(i, t1);
                var n = i.prototype;
                return n.initialize = function(t1) {
                    this.us = t1.layout;
                    var _$i = t1.layout.gpuDescriptorSetLayout, n = _$i.SR, _$s = _$i.OR, _$r = _$i.IR;
                    this.fs = Array(_$r).fill(null), this.vs = Array(_$r).fill(null), this.Bn = Array(_$r).fill(null);
                    var _$h = [];
                    this.TR = {
                        RR: _$h,
                        OR: _$s
                    };
                    for(var e = 0; e < n.length; ++e)for(var u = n[e], o = 0; o < u.count; o++){
                        var f = {
                            MR: u.descriptorType,
                            CR: null,
                            NR: null,
                            PR: null
                        };
                        _$h.push(f);
                    }
                }, n.destroy = function() {
                    this.us = null, this.TR = null;
                }, n.update = function() {
                    if (this.ls && this.TR) {
                        for(var _$t = this.TR.RR, _$i = 0; _$i < _$t.length; ++_$i)if (15 & _$t[_$i].MR) {
                            var n = this.fs[_$i];
                            n && (_$t[_$i].CR = n.gpuBuffer || n.gpuBufferView);
                        } else 496 & _$t[_$i].MR && (this.vs[_$i] && (_$t[_$i].NR = this.vs[_$i].gpuTexture), this.Bn[_$i] && (_$t[_$i].PR = this.Bn[_$i].gpuSampler));
                        this.ls = !1;
                    }
                }, s(i, [
                    {
                        key: "gpuDescriptorSet",
                        get: function get() {
                            return this.TR;
                        }
                    }
                ]), i;
            }(sw), ZQ = Math.max, tZ = Math.min;
            function iZ(t1) {
                switch(t1){
                    case 4:
                    case 6:
                    case 14:
                    case 16:
                    case 24:
                    case 25:
                    case 27:
                    case 36:
                    case 35:
                    case 37:
                    case 39:
                    case 51:
                    case 53:
                    case 56:
                    case 58:
                    case 60:
                    case 61:
                    case 62:
                    case 63:
                    case 64:
                    case 66:
                    case 70:
                    case 71:
                    case 72:
                    case 73:
                    case 74:
                    case 75:
                    case 76:
                    case 79:
                    case 81:
                    case 83:
                    case 84:
                    case 85:
                    case 86:
                    case 87:
                    case 88:
                    case 89:
                    case 90:
                    case 91:
                    case 92:
                    case 93:
                    case 94:
                    case 95:
                    case 96:
                    case 97:
                    case 98:
                    case 99:
                    case 100:
                    case 101:
                    case 102:
                    case 103:
                    case 104:
                    case 105:
                    case 106:
                    case 107:
                    case 108:
                    case 109:
                    case 110:
                    case 111:
                    case 112:
                    case 113:
                    case 114:
                    case 115:
                    case 116:
                    default:
                        return 5121;
                    case 5:
                    case 7:
                    case 15:
                    case 17:
                    case 26:
                    case 28:
                    case 38:
                    case 40:
                    case 65:
                    case 67:
                    case 80:
                    case 82:
                        return 5120;
                    case 8:
                    case 18:
                    case 29:
                    case 41:
                        return 36193;
                    case 9:
                    case 19:
                    case 30:
                    case 42:
                        return 5123;
                    case 10:
                    case 20:
                    case 31:
                    case 43:
                        return 5122;
                    case 11:
                    case 21:
                    case 32:
                    case 44:
                    case 48:
                    case 69:
                    case 68:
                        return 5126;
                    case 12:
                    case 22:
                    case 33:
                    case 45:
                    case 52:
                    case 54:
                        return 5125;
                    case 13:
                    case 23:
                    case 34:
                    case 46:
                        return 5124;
                    case 47:
                        return 33635;
                    case 49:
                        return 32820;
                    case 50:
                        return 32819;
                    case 55:
                        return 34042;
                }
            }
            function nZ(t1) {
                switch(t1){
                    case 47:
                        return 36194;
                    case 49:
                        return 32855;
                    case 50:
                        return 32854;
                    case 41:
                        return 34842;
                    case 44:
                        return 34836;
                    case 37:
                        return 35907;
                    case 54:
                        return 33189;
                    case 55:
                        return 34041;
                    default:
                        return rt(16309), 6408;
                }
            }
            function sZ(t1) {
                switch(t1){
                    case 1:
                        return 6406;
                    case 2:
                        return 6409;
                    case 3:
                        return 6410;
                    case 24:
                    case 29:
                    case 32:
                    case 47:
                        return 6407;
                    case 36:
                    case 35:
                    case 37:
                    case 41:
                    case 44:
                    case 49:
                    case 50:
                        return 6408;
                    case 54:
                        return 6402;
                    case 55:
                        return 34041;
                    case 56:
                        return 33776;
                    case 57:
                        return 33777;
                    case 58:
                        return 35916;
                    case 59:
                        return 35917;
                    case 60:
                        return 33778;
                    case 61:
                        return 35918;
                    case 62:
                        return 33779;
                    case 63:
                        return 35919;
                    case 72:
                        return 36196;
                    case 73:
                        return 37492;
                    case 74:
                        return 37493;
                    case 75:
                        return 37494;
                    case 76:
                        return 37495;
                    case 77:
                        return 37496;
                    case 78:
                        return 37497;
                    case 79:
                        return 37488;
                    case 80:
                        return 37489;
                    case 81:
                        return 37490;
                    case 82:
                        return 37491;
                    case 83:
                        return 35841;
                    case 84:
                        return 35843;
                    case 85:
                        return 35840;
                    case 86:
                        return 35842;
                    case 89:
                        return 37808;
                    case 90:
                        return 37809;
                    case 91:
                        return 37810;
                    case 92:
                        return 37811;
                    case 93:
                        return 37812;
                    case 94:
                        return 37813;
                    case 95:
                        return 37814;
                    case 96:
                        return 37815;
                    case 97:
                        return 37816;
                    case 98:
                        return 37817;
                    case 99:
                        return 37818;
                    case 100:
                        return 37819;
                    case 101:
                        return 37820;
                    case 102:
                        return 37821;
                    case 103:
                        return 37840;
                    case 104:
                        return 37841;
                    case 105:
                        return 37842;
                    case 106:
                        return 37843;
                    case 107:
                        return 37844;
                    case 108:
                        return 37845;
                    case 109:
                        return 37846;
                    case 110:
                        return 37847;
                    case 111:
                        return 37848;
                    case 112:
                        return 37849;
                    case 113:
                        return 37850;
                    case 114:
                        return 37851;
                    case 115:
                        return 37852;
                    case 116:
                        return 37853;
                    default:
                        return rt(16310), 6408;
                }
            }
            function rZ(t1) {
                switch(t1){
                    case 1:
                        return 35670;
                    case 2:
                        return 35671;
                    case 3:
                        return 35672;
                    case 4:
                        return 35673;
                    case 5:
                        return 5124;
                    case 6:
                        return 35667;
                    case 7:
                        return 35668;
                    case 8:
                        return 35669;
                    case 9:
                        return 5125;
                    case 13:
                        return 5126;
                    case 14:
                        return 35664;
                    case 15:
                        return 35665;
                    case 16:
                        return 35666;
                    case 17:
                        return 35674;
                    case 21:
                        return 35675;
                    case 25:
                        return 35676;
                    case 28:
                        return 35678;
                    case 31:
                        return 35680;
                    default:
                        return rt(16311), 0;
                }
            }
            function hZ(t1) {
                switch(t1){
                    case 1:
                    case 2:
                    case 3:
                    case 4:
                    case 5:
                    case 6:
                    case 7:
                    case 8:
                    case 9:
                        return Int32Array;
                    case 13:
                    case 14:
                    case 15:
                    case 16:
                    case 17:
                    case 21:
                    case 25:
                        return Float32Array;
                    default:
                        return rt(16312), Float32Array;
                }
            }
            function eZ(t1) {
                switch(t1){
                    case 35670:
                        return 1;
                    case 35671:
                        return 2;
                    case 35672:
                        return 3;
                    case 35673:
                        return 4;
                    case 5124:
                        return 5;
                    case 35667:
                        return 6;
                    case 35668:
                        return 7;
                    case 35669:
                        return 8;
                    case 5125:
                        return 9;
                    case 5126:
                        return 13;
                    case 35664:
                        return 14;
                    case 35665:
                        return 15;
                    case 35666:
                        return 16;
                    case 35674:
                        return 17;
                    case 35675:
                        return 21;
                    case 35676:
                        return 25;
                    case 35678:
                        return 28;
                    case 35680:
                        return 31;
                    default:
                        return rt(16313), 0;
                }
            }
            function uZ(t1) {
                switch(t1){
                    case 35670:
                    case 5124:
                    case 5125:
                    case 5126:
                    case 35678:
                    case 35680:
                        return 4;
                    case 35671:
                    case 35667:
                    case 35664:
                        return 8;
                    case 35672:
                    case 35668:
                    case 35665:
                        return 12;
                    case 35673:
                    case 35669:
                    case 35666:
                    case 35674:
                        return 16;
                    case 35675:
                        return 36;
                    case 35676:
                        return 64;
                    default:
                        return rt(16314), 0;
                }
            }
            function oZ(t1) {
                switch(t1){
                    case 35674:
                        return 2;
                    case 35675:
                        return 3;
                    case 35676:
                        return 4;
                    default:
                        return 1;
                }
            }
            var fZ = [
                512,
                513,
                514,
                515,
                516,
                517,
                518,
                519
            ], cZ = [
                0,
                7680,
                7681,
                7682,
                7683,
                5386,
                34055,
                34056
            ], aZ = [
                32774,
                32778,
                32779,
                32775,
                32776
            ], vZ = [
                0,
                1,
                770,
                772,
                771,
                773,
                768,
                774,
                769,
                775,
                776,
                32769,
                32770,
                32771,
                32772
            ];
            function lZ(t1, i) {
                var n = t1.gl, s = t1.stateCache, _$r = 2 & i.DR ? 35048 : 35044;
                if (8 & i.LR) {
                    i.BR = 34962;
                    var h = n.createBuffer();
                    h && (i.FR = h, i.UR > 0 && (t1.extensions.xR && s.jR && (t1.extensions.GR.bindVertexArrayOES(null), s.jR = null), EZ.gpuInputAssembler = null, s.HR !== i.FR && (n.bindBuffer(34962, i.FR), s.HR = i.FR), n.bufferData(34962, i.UR, _$r), n.bindBuffer(34962, null), s.HR = null));
                } else if (4 & i.LR) {
                    i.BR = 34963;
                    var e = n.createBuffer();
                    e && (i.FR = e, i.UR > 0 && (t1.extensions.xR && s.jR && (t1.extensions.GR.bindVertexArrayOES(null), s.jR = null), EZ.gpuInputAssembler = null, s.VR !== i.FR && (n.bindBuffer(34963, i.FR), s.VR = i.FR), n.bufferData(34963, i.UR, _$r), n.bindBuffer(34963, null), s.VR = null));
                } else 16 & i.LR ? (i.BR = 0, i.WR && (i.vf32 = new Float32Array(i.WR.buffer))) : (64 & i.LR || 2 & i.LR || 1 & i.LR || rt(16315), i.BR = 0);
            }
            function dZ(t1, i) {
                var n = t1.gl, s = t1.stateCache;
                if (i.FR) {
                    switch(i.BR){
                        case 34962:
                            t1.extensions.xR && s.jR && (t1.extensions.GR.bindVertexArrayOES(null), s.jR = null), EZ.gpuInputAssembler = null, n.bindBuffer(34962, null), s.HR = null;
                            break;
                        case 34963:
                            t1.extensions.xR && s.jR && (t1.extensions.GR.bindVertexArrayOES(null), s.jR = null), EZ.gpuInputAssembler = null, n.bindBuffer(34963, null), s.VR = null;
                    }
                    n.deleteBuffer(i.FR), i.FR = null;
                }
            }
            function wZ(t1, i, n, s, r) {
                if (16 & i.LR) ArrayBuffer.isView(n) ? i.vf32.set(n, s / 4) : i.vf32.set(new Float32Array(n), s / 4);
                else if (64 & i.LR) {
                    i.$R.zR();
                    for(var h = n.drawInfos, e = 0; e < h.length; ++e)i.$R.qR(s + e, h[e]);
                } else {
                    var o = t1.gl, f = t1.stateCache;
                    switch(i.BR){
                        case 34962:
                            t1.extensions.xR && f.jR && (t1.extensions.GR.bindVertexArrayOES(null), f.jR = null), EZ.gpuInputAssembler = null, f.HR !== i.FR && (o.bindBuffer(34962, i.FR), f.HR = i.FR);
                            break;
                        case 34963:
                            t1.extensions.xR && f.jR && (t1.extensions.GR.bindVertexArrayOES(null), f.jR = null), EZ.gpuInputAssembler = null, f.VR !== i.FR && (o.bindBuffer(34963, i.FR), f.VR = i.FR);
                            break;
                        default:
                            return void rt(16316);
                    }
                    le.os === ue.IOS && 2 & i.DR && 0 === s && r === n.byteLength ? o.bufferData(i.BR, n, o.DYNAMIC_DRAW) : r === n.byteLength ? o.bufferSubData(i.BR, s, n) : o.bufferSubData(i.BR, s, n.slice(0, r));
                }
            }
            function gZ(t1, i) {
                var n = t1.gl, s = t1.stateCache;
                i.YR = i.KR = sZ(i.JR), i.QR = iZ(i.JR);
                var _$r = i.ZR, h = i.tM;
                switch(i.MR){
                    case 1:
                        i.BR = 3553;
                        var e = ZQ(_$r, h);
                        if (e > t1.capabilities.maxTextureSize && rt(9100, e, t1.capabilities.maxTextureSize), t1.textureExclusive[i.JR] || t1.extensions.iM || !Fd[i.JR].hasDepth) {
                            if (i.nM = n.createTexture(), i.UR > 0) {
                                var u = s.sM[s.rM];
                                if (u.nM !== i.nM && (n.bindTexture(3553, i.nM), u.nM = i.nM), Fd[i.JR].isCompressed) for(var o = 0; o < i.hM; ++o){
                                    var _$c = new Uint8Array(Hd(i.JR, _$r, h, 1));
                                    n.compressedTexImage2D(3553, o, i.KR, _$r, h, 0, _$c), _$r = ZQ(1, _$r >> 1), h = ZQ(1, h >> 1);
                                }
                                else for(var a = 0; a < i.hM; ++a)n.texImage2D(3553, a, i.KR, _$r, h, 0, i.YR, i.QR, null), _$r = ZQ(1, _$r >> 1), h = ZQ(1, h >> 1);
                                i.uM ? (i.oM = 10497, i.fM = 10497) : (i.oM = 33071, i.fM = 33071), i.vM = 9729, i.lM = 9729, n.texParameteri(i.BR, 10242, i.oM), n.texParameteri(i.BR, 10243, i.fM), n.texParameteri(i.BR, 10241, i.vM), n.texParameteri(i.BR, 10240, i.lM);
                            }
                        } else i.KR = nZ(i.JR), i.dM = n.createRenderbuffer(), i.UR > 0 && (s.dM !== i.dM && (n.bindRenderbuffer(36161, i.dM), s.dM = i.dM), n.renderbufferStorage(36161, i.KR, _$r, h));
                        break;
                    case 3:
                        i.BR = 34067;
                        var v = ZQ(_$r, h);
                        if (v > t1.capabilities.maxCubeMapTextureSize && rt(9100, v, t1.capabilities.maxTextureSize), i.nM = n.createTexture(), i.UR > 0) {
                            var l = s.sM[s.rM];
                            if (l.nM !== i.nM && (n.bindTexture(34067, i.nM), l.nM = i.nM), Fd[i.JR].isCompressed) for(var _$d = 0; _$d < 6; ++_$d){
                                _$r = i.ZR, h = i.tM;
                                for(var w = 0; w < i.hM; ++w){
                                    var p = new Uint8Array(Hd(i.JR, _$r, h, 1));
                                    n.compressedTexImage2D(34069 + _$d, w, i.KR, _$r, h, 0, p), _$r = ZQ(1, _$r >> 1), h = ZQ(1, h >> 1);
                                }
                            }
                            else for(var _$y = 0; _$y < 6; ++_$y){
                                _$r = i.ZR, h = i.tM;
                                for(var _$_ = 0; _$_ < i.hM; ++_$_)n.texImage2D(34069 + _$y, _$_, i.KR, _$r, h, 0, i.YR, i.QR, null), _$r = ZQ(1, _$r >> 1), h = ZQ(1, h >> 1);
                            }
                            i.uM ? (i.oM = 10497, i.fM = 10497) : (i.oM = 33071, i.fM = 33071), i.vM = 9729, i.lM = 9729, n.texParameteri(i.BR, 10242, i.oM), n.texParameteri(i.BR, 10243, i.fM), n.texParameteri(i.BR, 10241, i.vM), n.texParameteri(i.BR, 10240, i.lM);
                        }
                        break;
                    default:
                        rt(16317), i.MR = 1, i.BR = 3553;
                }
            }
            function pZ(t1, i) {
                var n = t1.gl, s = t1.stateCache;
                if (i.nM) {
                    var _$r = s.sM, h = s.rM;
                    n.deleteTexture(i.nM);
                    for(var e = 0; e < _$r.length; e++)_$r[e].nM === i.nM && (n.activeTexture(33984 + e), h = e, n.bindTexture(i.BR, null), _$r[e].nM = null);
                    s.rM = h, i.nM = null;
                }
                if (i.dM) {
                    var u = s.dM;
                    n.deleteRenderbuffer(i.dM), u === i.dM && (n.bindRenderbuffer(36161, null), s.dM = null), i.dM = null;
                }
            }
            function yZ(t1, i) {
                if (i.UR) {
                    var n = t1.gl, s = t1.stateCache, _$r = i.ZR, h = i.tM;
                    switch(i.MR){
                        case 1:
                            i.BR = 3553;
                            var e = ZQ(_$r, h);
                            if (e > t1.capabilities.maxTextureSize && rt(9100, e, t1.capabilities.maxTextureSize), i.dM) s.dM !== i.dM && (n.bindRenderbuffer(36161, i.dM), s.dM = i.dM), n.renderbufferStorage(36161, i.KR, _$r, h);
                            else if (i.nM) {
                                var u = s.sM[s.rM];
                                if (u.nM !== i.nM && (n.bindTexture(3553, i.nM), u.nM = i.nM), Fd[i.JR].isCompressed) for(var o = 0; o < i.hM; ++o){
                                    var _$c = new Uint8Array(Hd(i.JR, _$r, h, 1));
                                    n.compressedTexImage2D(3553, o, i.KR, _$r, h, 0, _$c), _$r = ZQ(1, _$r >> 1), h = ZQ(1, h >> 1);
                                }
                                else for(var a = 0; a < i.hM; ++a)n.texImage2D(3553, a, i.KR, _$r, h, 0, i.YR, i.QR, null), _$r = ZQ(1, _$r >> 1), h = ZQ(1, h >> 1);
                            }
                            break;
                        case 3:
                            i.BR = 34067;
                            var v = ZQ(_$r, h);
                            v > t1.capabilities.maxCubeMapTextureSize && rt(9100, v, t1.capabilities.maxTextureSize);
                            var l = s.sM[s.rM];
                            if (l.nM !== i.nM && (n.bindTexture(34067, i.nM), l.nM = i.nM), Fd[i.JR].isCompressed) for(var _$d = 0; _$d < 6; ++_$d){
                                _$r = i.ZR, h = i.tM;
                                for(var w = 0; w < i.hM; ++w){
                                    var p = new Uint8Array(Hd(i.JR, _$r, h, 1));
                                    n.compressedTexImage2D(34069 + _$d, w, i.KR, _$r, h, 0, p), _$r = ZQ(1, _$r >> 1), h = ZQ(1, h >> 1);
                                }
                            }
                            else for(var _$y = 0; _$y < 6; ++_$y){
                                _$r = i.ZR, h = i.tM;
                                for(var _$_ = 0; _$_ < i.hM; ++_$_)n.texImage2D(34069 + _$y, _$_, i.KR, _$r, h, 0, i.YR, i.QR, null), _$r = ZQ(1, _$r >> 1), h = ZQ(1, h >> 1);
                            }
                            break;
                        default:
                            rt(16317), i.MR = 1, i.BR = 3553;
                    }
                }
            }
            function _Z(t1, i) {
                for(var n = 0; n < i.wM.length; ++n)if (i.wM[n].gM) return void (i.pM = !1);
                var s = t1.gl, _$r = t1.stateCache, h = [], e = s.createFramebuffer();
                if (e) {
                    i.yM = e, _$r.yM !== i.yM && s.bindFramebuffer(36160, i.yM);
                    for(var u = 0; u < i.wM.length; ++u){
                        var o = i.wM[u];
                        o && (o.nM ? s.framebufferTexture2D(36160, 36064 + u, o.BR, o.nM, 0) : s.framebufferRenderbuffer(36160, 36064 + u, 36161, o.dM), h.push(36064 + u), i.ZR = tZ(i.ZR, o.ZR), i.tM = tZ(i.tM, o.tM));
                    }
                    var f = i._M;
                    if (f) {
                        var _$c = Fd[f.JR].hasStencil ? 33306 : 36096;
                        f.nM ? s.framebufferTexture2D(36160, _$c, f.BR, f.nM, 0) : s.framebufferRenderbuffer(36160, _$c, 36161, f.dM), i.ZR = tZ(i.ZR, f.ZR), i.tM = tZ(i.tM, f.tM);
                    }
                    t1.extensions.mM && t1.extensions.mM.drawBuffersWEBGL(h);
                    var a = s.checkFramebufferStatus(36160);
                    if (36053 !== a) switch(a){
                        case 36054:
                            rt(16318);
                            break;
                        case 36055:
                            rt(16319);
                            break;
                        case 36057:
                            rt(16320);
                            break;
                        case 36061:
                            rt(16321);
                    }
                    _$r.yM !== i.yM && s.bindFramebuffer(36160, _$r.yM);
                }
            }
            function mZ(t1, i) {
                for(var n, s = t1.gl, _$r = t1.stateCache, e = 0; e < i.kM.length; e++)if (n = function h() {
                    var _$t = i.kM[e], n = 0, _$r = "", h = 1;
                    switch(_$t.MR){
                        case 1:
                            _$r = "VertexShader", n = 35633;
                            break;
                        case 16:
                            _$r = "FragmentShader", n = 35632;
                            break;
                        default:
                            return rt(16322), {
                                v: void 0
                            };
                    }
                    var u = s.createShader(n);
                    if (u && (_$t.AM = u, s.shaderSource(_$t.AM, _$t.EM), s.compileShader(_$t.AM), !s.getShaderParameter(_$t.AM, 35713))) {
                        rt(16323, _$r, i.TM), rt(16324, _$t.EM.replace(/^|\n/g, function() {
                            return "\n" + h++ + " ";
                        })), z(s.getShaderInfoLog(_$t.AM));
                        for(var o = 0; o < i.kM.length; o++){
                            var f = i.kM[e];
                            f.AM && (s.deleteShader(f.AM), f.AM = null);
                        }
                        return {
                            v: void 0
                        };
                    }
                }()) return n.v;
                var u = s.createProgram();
                if (u) {
                    i.SM = u;
                    for(var o = 0; o < i.kM.length; o++){
                        var f = i.kM[o];
                        s.attachShader(i.SM, f.AM);
                    }
                    if (s.linkProgram(i.SM), t1.extensions.OM) for(var _$c = 0; _$c < i.kM.length; _$c++){
                        var a = i.kM[_$c];
                        a.AM && (s.detachShader(i.SM, a.AM), s.deleteShader(a.AM), a.AM = null);
                    }
                    if (!s.getProgramParameter(i.SM, 35714)) return rt(16326, i.TM), void z(s.getProgramInfoLog(i.SM));
                    tt(16325, i.TM);
                    var v = s.getProgramParameter(i.SM, 35721);
                    i.IM = Array(v);
                    for(var l = 0; l < v; ++l){
                        var _$d = s.getActiveAttrib(i.SM, l);
                        if (_$d) {
                            var w, g = _$d.type, p = _$d.name, _$y = _$d.size, _$_ = p.indexOf("[");
                            w = -1 !== _$_ ? p.substring(0, _$_) : p;
                            var m = s.getAttribLocation(i.SM, w), b = eZ(g), k = uZ(g);
                            i.IM[l] = {
                                WO: m,
                                TM: w,
                                MR: b,
                                RM: k,
                                _p: _$y,
                                UR: k * _$y,
                                QR: g,
                                MM: m
                            };
                        }
                    }
                    if (i.CM.length > 0) {
                        i.NM = Array(i.CM.length);
                        for(var E = 0; E < i.CM.length; ++E){
                            var T = i.CM[E], S = {
                                PM: T.set,
                                WO: T.binding,
                                TM: T.name,
                                UR: 0,
                                DM: Array(T.members.length),
                                LM: []
                            };
                            i.NM[E] = S;
                            for(var _$O = 0; _$O < T.members.length; ++_$O){
                                var _$I = T.members[_$O], _$R = rZ(_$I.type), _$M = uZ(_$R), _$C = _$M * _$I.count;
                                S.DM[_$O] = {
                                    WO: -1,
                                    TM: _$I.name,
                                    MR: _$I.type,
                                    RM: _$M,
                                    _p: _$I.count,
                                    UR: _$C,
                                    BM: 0,
                                    QR: _$R,
                                    MM: null,
                                    FM: null
                                };
                            }
                        }
                    }
                    for(var N = 0; N < i.UM.length; ++N){
                        var P = i.UM[N];
                        i.xM.push(new td(P.set, P.binding, P.name, 28, P.count));
                    }
                    if (i.xM.length > 0) {
                        i.jM = Array(i.xM.length);
                        for(var D = 0; D < i.xM.length; ++D){
                            var L = i.xM[D];
                            i.jM[D] = {
                                PM: L.set,
                                WO: L.binding,
                                TM: L.name,
                                MR: L.type,
                                _p: L.count,
                                GM: [],
                                HM: null,
                                QR: rZ(L.type),
                                MM: null
                            };
                        }
                    }
                    for(var B = s.getProgramParameter(i.SM, 35718), F = 0; F < B; ++F){
                        var U = s.getActiveUniform(i.SM, F);
                        if (U && 35678 !== U.type && 35680 !== U.type) {
                            var x = s.getUniformLocation(i.SM, U.name);
                            if (t1.extensions.VM(x)) {
                                var j, G = U.name.indexOf("[");
                                j = -1 !== G ? U.name.substring(0, G) : U.name;
                                for(var H = 0; H < i.NM.length; H++)for(var _$V = i.NM[H], _$W = 0; _$W < _$V.DM.length; _$W++){
                                    var _$$ = _$V.DM[_$W];
                                    if (_$$.TM === j) {
                                        _$$.MM = x, _$$._p = U.size, _$$.UR = _$$.RM * _$$._p, _$$.FM = new (hZ(_$$.MR))(_$$.UR / 4), _$V.LM.push(_$$);
                                        break;
                                    }
                                }
                            }
                        }
                    }
                    for(var _$X = 0; _$X < i.NM.length; _$X++)for(var _$q = i.NM[_$X], _$Y = 0; _$Y < _$q.DM.length; _$Y++){
                        var _$K = _$q.DM[_$Y];
                        _$K.BM = _$q.UR / 4, _$q.UR += _$K.UR;
                    }
                    var J = [], _$Q = [], Z = t1.bindingMappings, it = t1.capabilities, _$nt = t1.stateCache.WM, st = it.maxTextureUnits;
                    if (A.rendering && A.rendering.enableEffectImport) for(var ht = 0; ht < i.xM.length; ++ht){
                        var _$et = i.xM[ht], ut = s.getUniformLocation(i.SM, _$et.name);
                        t1.extensions.VM(ut) && (J.push(i.jM[ht]), _$Q.push(ut)), void 0 === _$nt[_$et.name] && (_$nt[_$et.name] = _$et.flattened % st);
                    }
                    else {
                        for(var _$ot = 0, _$ft = 0; _$ft < i.CM.length; ++_$ft)i.CM[_$ft].set === Z.zM && _$ot++;
                        for(var _$ct = 0, at = 0; at < i.xM.length; ++at){
                            var vt = i.xM[at], lt = s.getUniformLocation(i.SM, vt.name);
                            if (t1.extensions.VM(lt) && (J.push(i.jM[at]), _$Q.push(lt)), void 0 === _$nt[vt.name]) {
                                var dt = vt.binding + Z.$M[vt.set] + _$ct;
                                vt.set === Z.zM && (dt -= _$ot), _$nt[vt.name] = dt % st, _$ct += vt.count - 1;
                            }
                        }
                    }
                    if (J.length) {
                        for(var wt = [], gt = 0; gt < J.length; ++gt){
                            var pt = J[gt], _$yt = _$nt[pt.TM];
                            if (void 0 !== _$yt) {
                                pt.MM = _$Q[gt];
                                for(var _$_t = 0; _$_t < pt._p; ++_$_t){
                                    for(; wt[_$yt];)_$yt = (_$yt + 1) % st;
                                    pt.GM.push(_$yt), wt[_$yt] = !0;
                                }
                            }
                        }
                        for(var _$mt = 0, bt = 0; bt < J.length; ++bt){
                            var kt = J[bt];
                            if (!t1.extensions.VM(kt.MM)) {
                                kt.MM = _$Q[bt];
                                for(var At = 0; At < kt._p; ++At){
                                    for(; wt[_$mt];)_$mt = (_$mt + 1) % st;
                                    void 0 === _$nt[kt.TM] && (_$nt[kt.TM] = _$mt), kt.GM.push(_$mt), wt[_$mt] = !0;
                                }
                            }
                        }
                        _$r.SM !== i.SM && s.useProgram(i.SM);
                        for(var Et = 0; Et < J.length; Et++){
                            var Tt = J[Et];
                            Tt.HM = new Int32Array(Tt.GM), s.uniform1iv(Tt.MM, Tt.HM);
                        }
                        _$r.SM !== i.SM && s.useProgram(_$r.SM);
                    }
                    for(var _$St = 0; _$St < i.NM.length;)i.NM[_$St].LM.length ? _$St++ : (i.NM[_$St] = i.NM[i.NM.length - 1], i.NM.length--);
                    i.jM = J;
                }
            }
            function bZ(t1, i) {
                if (i.SM) {
                    var n = t1.gl, s = t1.stateCache;
                    if (!t1.extensions.OM) for(var _$r = 0; _$r < i.kM.length; _$r++){
                        var h = i.kM[_$r];
                        h.AM && (n.detachShader(i.SM, h.AM), n.deleteShader(h.AM), h.AM = null);
                    }
                    n.deleteProgram(i.SM), s.SM === i.SM && (n.useProgram(null), s.SM = null), i.SM = null;
                }
            }
            function kZ(t1, i) {
                t1.gl, i.XM = Array(i.qM.length);
                for(var n = [
                    0,
                    0,
                    0,
                    0,
                    0,
                    0,
                    0,
                    0
                ], s = 0; s < i.qM.length; ++s){
                    var _$r = i.qM[s], h = _$r.format, e = _$r.isNormalized, u = _$r.isInstanced, o = void 0 !== _$r.stream ? _$r.stream : 0, f = i.YM[o], _$c = iZ(h), a = Fd[h].size;
                    i.XM[s] = {
                        TM: _$r.name,
                        FR: f.FR,
                        QR: _$c,
                        UR: a,
                        _p: Fd[h].count,
                        RM: f.RM,
                        KM: oZ(_$c),
                        JM: void 0 !== e && e,
                        QM: void 0 !== u && u,
                        BM: n[o]
                    }, n[o] += a;
                }
            }
            function AZ(t1, i) {
                for(var n = t1.stateCache, s = i.ZM.values(), _$r = s.next(), h = t1.extensions.GR, e = n.jR; !_$r.done;)h.deleteVertexArrayOES(_$r.value), e === _$r.value && (h.bindVertexArrayOES(null), e = null), _$r = s.next();
                n.jR = e, i.ZM.clear();
            }
            var EZ = {
                gpuPipelineState: null,
                gpuInputAssembler: null,
                glPrimitive: 0
            }, TZ = new Cl;
            function SZ(t1, i, n, s, r, h, e) {
                var u = t1.gl, o = t1.stateCache, f = 0;
                if (n) {
                    var _$c = n.tC;
                    TZ.x = s.x << _$c, TZ.y = s.y << _$c, TZ.width = s.width << _$c, TZ.height = s.height << _$c;
                }
                if (n && i) {
                    var a = n.yM, v = TZ.x, l = TZ.y, _$d = TZ.width, w = TZ.height;
                    o.yM !== a && (u.bindFramebuffer(36160, a), o.yM = a);
                    var g = o.iC;
                    g.left === v && g.top === l && g.width === _$d && g.height === w || (u.viewport(v, l, _$d, w), g.left = v, g.top = l, g.width = _$d, g.height = w);
                    var p = o.nC;
                    p.x === v && p.y === l && p.width === _$d && p.height === w || (u.scissor(v, l, _$d, w), p.x = v, p.y = l, p.width = _$d, p.height = w);
                    var _$y = r.length;
                    t1.extensions.mM || (_$y = 1);
                    for(var _$_ = o.sC, m = 0; m < _$y; ++m){
                        var b = i.rC[m];
                        if (0 !== b.format) switch(b.loadOp){
                            case 0:
                                break;
                            case 1:
                                15 !== o.hC.targets[0].blendColorMask && u.colorMask(!0, !0, !0, !0);
                                var k = r[0];
                                u.clearColor(k.x, k.y, k.z, k.w), f |= 16384;
                        }
                    }
                    if (i.eC && 0 !== i.eC.format) {
                        switch(i.eC.depthLoadOp){
                            case 0:
                                break;
                            case 1:
                                _$_.depthWrite || u.depthMask(!0), u.clearDepth(h), f |= 256;
                        }
                        if (Fd[i.eC.format].hasStencil) switch(i.eC.stencilLoadOp){
                            case 0:
                                break;
                            case 1:
                                _$_.stencilWriteMaskFront || u.stencilMaskSeparate(1028, 65535), _$_.stencilWriteMaskBack || u.stencilMaskSeparate(1029, 65535), u.clearStencil(e), f |= 1024;
                        }
                    }
                    if (f && u.clear(f), 16384 & f) {
                        var A = o.hC.targets[0].blendColorMask;
                        15 !== A && u.colorMask(!!(1 & A), !!(2 & A), !!(4 & A), !!(8 & A));
                    }
                    256 & f && !_$_.depthWrite && u.depthMask(!1), 1024 & f && (_$_.stencilWriteMaskFront || u.stencilMaskSeparate(1028, 0), _$_.stencilWriteMaskBack || u.stencilMaskSeparate(1029, 0));
                }
            }
            function OZ(t1, i, n, s, r, h) {
                var e, u, o, f = t1.gl, _$c = t1.stateCache, a = _$c.sC, v = _$c.hC, l = i && i.uC, _$d = !1;
                if (i && EZ.gpuPipelineState !== i) {
                    if (EZ.gpuPipelineState = i, EZ.glPrimitive = i.oC, i.uC) {
                        var w = i.uC.SM;
                        _$c.SM !== w && (f.useProgram(w), _$c.SM = w, _$d = !0);
                    }
                    var g = i.KS, p = _$c.KS;
                    if (g) {
                        if (p.cullMode !== g.cullMode) {
                            switch(g.cullMode){
                                case 0:
                                    f.disable(2884);
                                    break;
                                case 1:
                                    f.enable(2884), f.cullFace(1028);
                                    break;
                                case 2:
                                    f.enable(2884), f.cullFace(1029);
                            }
                            p.cullMode = g.cullMode;
                        }
                        var _$y = g.isFrontFaceCCW;
                        p.isFrontFaceCCW !== _$y && (f.frontFace(_$y ? 2305 : 2304), p.isFrontFaceCCW = _$y), p.depthBias === g.depthBias && p.depthBiasSlop === g.depthBiasSlop || (f.polygonOffset(g.depthBias, g.depthBiasSlop), p.depthBias = g.depthBias, p.depthBiasSlop = g.depthBiasSlop), p.lineWidth !== g.lineWidth && (f.lineWidth(g.lineWidth), p.lineWidth = g.lineWidth);
                    }
                    var _$_ = i.sC;
                    _$_ && (a.depthTest !== _$_.depthTest && (_$_.depthTest ? f.enable(2929) : f.disable(2929), a.depthTest = _$_.depthTest), a.depthWrite !== _$_.depthWrite && (f.depthMask(_$_.depthWrite), a.depthWrite = _$_.depthWrite), a.depthFunc !== _$_.depthFunc && (f.depthFunc(fZ[_$_.depthFunc]), a.depthFunc = _$_.depthFunc), a.stencilTestFront === _$_.stencilTestFront && a.stencilTestBack === _$_.stencilTestBack || (_$_.stencilTestFront || _$_.stencilTestBack ? f.enable(2960) : f.disable(2960), a.stencilTestFront = _$_.stencilTestFront, a.stencilTestBack = _$_.stencilTestBack), a.stencilFuncFront === _$_.stencilFuncFront && a.stencilRefFront === _$_.stencilRefFront && a.stencilReadMaskFront === _$_.stencilReadMaskFront || (f.stencilFuncSeparate(1028, fZ[_$_.stencilFuncFront], _$_.stencilRefFront, _$_.stencilReadMaskFront), a.stencilFuncFront = _$_.stencilFuncFront, a.stencilRefFront = _$_.stencilRefFront, a.stencilReadMaskFront = _$_.stencilReadMaskFront), a.stencilFailOpFront === _$_.stencilFailOpFront && a.stencilZFailOpFront === _$_.stencilZFailOpFront && a.stencilPassOpFront === _$_.stencilPassOpFront || (f.stencilOpSeparate(1028, cZ[_$_.stencilFailOpFront], cZ[_$_.stencilZFailOpFront], cZ[_$_.stencilPassOpFront]), a.stencilFailOpFront = _$_.stencilFailOpFront, a.stencilZFailOpFront = _$_.stencilZFailOpFront, a.stencilPassOpFront = _$_.stencilPassOpFront), a.stencilWriteMaskFront !== _$_.stencilWriteMaskFront && (f.stencilMaskSeparate(1028, _$_.stencilWriteMaskFront), a.stencilWriteMaskFront = _$_.stencilWriteMaskFront), a.stencilFuncBack === _$_.stencilFuncBack && a.stencilRefBack === _$_.stencilRefBack && a.stencilReadMaskBack === _$_.stencilReadMaskBack || (f.stencilFuncSeparate(1029, fZ[_$_.stencilFuncBack], _$_.stencilRefBack, _$_.stencilReadMaskBack), a.stencilFuncBack = _$_.stencilFuncBack, a.stencilRefBack = _$_.stencilRefBack, a.stencilReadMaskBack = _$_.stencilReadMaskBack), a.stencilFailOpBack === _$_.stencilFailOpBack && a.stencilZFailOpBack === _$_.stencilZFailOpBack && a.stencilPassOpBack === _$_.stencilPassOpBack || (f.stencilOpSeparate(1029, cZ[_$_.stencilFailOpBack], cZ[_$_.stencilZFailOpBack], cZ[_$_.stencilPassOpBack]), a.stencilFailOpBack = _$_.stencilFailOpBack, a.stencilZFailOpBack = _$_.stencilZFailOpBack, a.stencilPassOpBack = _$_.stencilPassOpBack), a.stencilWriteMaskBack !== _$_.stencilWriteMaskBack && (f.stencilMaskSeparate(1029, _$_.stencilWriteMaskBack), a.stencilWriteMaskBack = _$_.stencilWriteMaskBack));
                    var m = i.hC;
                    if (m) {
                        v.isA2C !== m.isA2C && (m.isA2C ? f.enable(32926) : f.disable(32926), v.isA2C = m.isA2C), v.blendColor.x === m.blendColor.x && v.blendColor.y === m.blendColor.y && v.blendColor.z === m.blendColor.z && v.blendColor.w === m.blendColor.w || (f.blendColor(m.blendColor.x, m.blendColor.y, m.blendColor.z, m.blendColor.w), v.blendColor.x = m.blendColor.x, v.blendColor.y = m.blendColor.y, v.blendColor.z = m.blendColor.z, v.blendColor.w = m.blendColor.w);
                        var b = m.targets[0], k = v.targets[0];
                        k.blend !== b.blend && (b.blend ? f.enable(3042) : f.disable(3042), k.blend = b.blend), k.blendEq === b.blendEq && k.blendAlphaEq === b.blendAlphaEq || (f.blendEquationSeparate(aZ[b.blendEq], aZ[b.blendAlphaEq]), k.blendEq = b.blendEq, k.blendAlphaEq = b.blendAlphaEq), k.blendSrc === b.blendSrc && k.blendDst === b.blendDst && k.blendSrcAlpha === b.blendSrcAlpha && k.blendDstAlpha === b.blendDstAlpha || (f.blendFuncSeparate(vZ[b.blendSrc], vZ[b.blendDst], vZ[b.blendSrcAlpha], vZ[b.blendDstAlpha]), k.blendSrc = b.blendSrc, k.blendDst = b.blendDst, k.blendSrcAlpha = b.blendSrcAlpha, k.blendDstAlpha = b.blendDstAlpha), k.blendColorMask !== b.blendColorMask && (f.colorMask(!!(1 & b.blendColorMask), !!(2 & b.blendColorMask), !!(4 & b.blendColorMask), !!(8 & b.blendColorMask)), k.blendColorMask = b.blendColorMask);
                    }
                }
                if (i && i.fC && l) {
                    for(var A = l.NM.length, E = i.fC.vC, T = 0; T < A; T++){
                        var S = l.NM[T], _$O = s[S.PM], _$I = _$O && _$O.OR[S.WO], _$R = _$I >= 0 && _$O.RR[_$I], _$M = null, _$C = 0;
                        if (_$R && _$R.CR) {
                            var N = _$R.CR, P = E[S.PM], D = P && P[S.WO];
                            D >= 0 && (_$C = r[D]), "vf32" in N ? _$M = N.vf32 : (_$C += N.BM, _$M = N.CR.vf32), _$C >>= 2;
                        }
                        if (_$M) for(var L = S.LM.length, B = 0; B < L; B++){
                            var F = S.LM[B];
                            switch(F.QR){
                                case 35670:
                                case 5124:
                                    for(var U = 0; U < F.FM.length; ++U){
                                        var x = F.BM + _$C + U;
                                        if (_$M[x] !== F.FM[U]) {
                                            for(var j = U, G = x; j < F.FM.length; ++j, ++G)F.FM[j] = _$M[G];
                                            f.uniform1iv(F.MM, F.FM);
                                            break;
                                        }
                                    }
                                    break;
                                case 35671:
                                case 35667:
                                    for(var H = 0; H < F.FM.length; ++H){
                                        var _$V = F.BM + _$C + H;
                                        if (_$M[_$V] !== F.FM[H]) {
                                            for(var _$W = H, _$z = _$V; _$W < F.FM.length; ++_$W, ++_$z)F.FM[_$W] = _$M[_$z];
                                            f.uniform2iv(F.MM, F.FM);
                                            break;
                                        }
                                    }
                                    break;
                                case 35672:
                                case 35668:
                                    for(var _$$ = 0; _$$ < F.FM.length; ++_$$){
                                        var _$X = F.BM + _$C + _$$;
                                        if (_$M[_$X] !== F.FM[_$$]) {
                                            for(var _$q = _$$, _$Y = _$X; _$q < F.FM.length; ++_$q, ++_$Y)F.FM[_$q] = _$M[_$Y];
                                            f.uniform3iv(F.MM, F.FM);
                                            break;
                                        }
                                    }
                                    break;
                                case 35673:
                                case 35669:
                                    for(var _$K = 0; _$K < F.FM.length; ++_$K){
                                        var J = F.BM + _$C + _$K;
                                        if (_$M[J] !== F.FM[_$K]) {
                                            for(var _$Q = _$K, Z = J; _$Q < F.FM.length; ++_$Q, ++Z)F.FM[_$Q] = _$M[Z];
                                            f.uniform4iv(F.MM, F.FM);
                                            break;
                                        }
                                    }
                                    break;
                                case 5126:
                                    for(var _$tt = 0; _$tt < F.FM.length; ++_$tt){
                                        var it = F.BM + _$C + _$tt;
                                        if (_$M[it] !== F.FM[_$tt]) {
                                            for(var _$nt = _$tt, st = it; _$nt < F.FM.length; ++_$nt, ++st)F.FM[_$nt] = _$M[st];
                                            f.uniform1fv(F.MM, F.FM);
                                            break;
                                        }
                                    }
                                    break;
                                case 35664:
                                    for(var _$rt = 0; _$rt < F.FM.length; ++_$rt){
                                        var ht = F.BM + _$C + _$rt;
                                        if (_$M[ht] !== F.FM[_$rt]) {
                                            for(var _$et = _$rt, ut = ht; _$et < F.FM.length; ++_$et, ++ut)F.FM[_$et] = _$M[ut];
                                            f.uniform2fv(F.MM, F.FM);
                                            break;
                                        }
                                    }
                                    break;
                                case 35665:
                                    for(var _$ot = 0; _$ot < F.FM.length; ++_$ot){
                                        var _$ft = F.BM + _$C + _$ot;
                                        if (_$M[_$ft] !== F.FM[_$ot]) {
                                            for(var _$ct = _$ot, at = _$ft; _$ct < F.FM.length; ++_$ct, ++at)F.FM[_$ct] = _$M[at];
                                            f.uniform3fv(F.MM, F.FM);
                                            break;
                                        }
                                    }
                                    break;
                                case 35666:
                                    for(var vt = 0; vt < F.FM.length; ++vt){
                                        var lt = F.BM + _$C + vt;
                                        if (_$M[lt] !== F.FM[vt]) {
                                            for(var dt = vt, wt = lt; dt < F.FM.length; ++dt, ++wt)F.FM[dt] = _$M[wt];
                                            f.uniform4fv(F.MM, F.FM);
                                            break;
                                        }
                                    }
                                    break;
                                case 35674:
                                    for(var gt = 0; gt < F.FM.length; ++gt){
                                        var pt = F.BM + _$C + gt;
                                        if (_$M[pt] !== F.FM[gt]) {
                                            for(var _$yt = gt, _$_t = pt; _$yt < F.FM.length; ++_$yt, ++_$_t)F.FM[_$yt] = _$M[_$_t];
                                            f.uniformMatrix2fv(F.MM, !1, F.FM);
                                            break;
                                        }
                                    }
                                    break;
                                case 35675:
                                    for(var _$mt = 0; _$mt < F.FM.length; ++_$mt){
                                        var bt = F.BM + _$C + _$mt;
                                        if (_$M[bt] !== F.FM[_$mt]) {
                                            for(var kt = _$mt, At = bt; kt < F.FM.length; ++kt, ++At)F.FM[kt] = _$M[At];
                                            f.uniformMatrix3fv(F.MM, !1, F.FM);
                                            break;
                                        }
                                    }
                                    break;
                                case 35676:
                                    for(var Et = 0; Et < F.FM.length; ++Et){
                                        var Tt = F.BM + _$C + Et;
                                        if (_$M[Tt] !== F.FM[Et]) {
                                            for(var _$St = Et, _$Ot = Tt; _$St < F.FM.length; ++_$St, ++_$Ot)F.FM[_$St] = _$M[_$Ot];
                                            f.uniformMatrix4fv(F.MM, !1, F.FM);
                                            break;
                                        }
                                    }
                            }
                        }
                    }
                    for(var _$It = l.jM.length, _$Rt = 0; _$Rt < _$It; _$Rt++)for(var Mt = l.jM[_$Rt], Ct = s[Mt.PM], _$Nt = Ct && Ct.OR[Mt.WO], _$Pt = _$Nt >= 0 && Ct.RR[_$Nt], _$Dt = Mt.GM.length, Lt = 0; Lt < _$Dt; Lt++){
                        var _$Bt = Mt.GM[Lt];
                        if (_$Pt && _$Pt.PR) {
                            if (_$Pt.NR && _$Pt.NR.UR > 0) {
                                var _$Ft = _$Pt.NR, _$Ut = _$c.sM[_$Bt];
                                _$Ut.nM !== _$Ft.nM && (_$c.rM !== _$Bt && (f.activeTexture(33984 + _$Bt), _$c.rM = _$Bt), _$Ft.nM ? f.bindTexture(_$Ft.BR, _$Ft.nM) : f.bindTexture(_$Ft.BR, t1.nullTex2D.gpuTexture.nM), _$Ut.nM = _$Ft.nM);
                                var _$xt = _$Pt.PR;
                                _$Ft.uM ? (e = _$xt.oM, u = _$xt.fM) : (e = 33071, u = 33071), o = _$Ft.uM ? _$Ft.hM <= 1 && (9985 === _$xt.vM || 9987 === _$xt.vM) ? 9729 : _$xt.vM : 9729 === _$xt.vM || 9985 === _$xt.vM || 9987 === _$xt.vM ? 9729 : 9728, _$Ft.oM !== e && (_$c.rM !== _$Bt && (f.activeTexture(33984 + _$Bt), _$c.rM = _$Bt), f.texParameteri(_$Ft.BR, 10242, e), _$Ft.oM = e), _$Ft.fM !== u && (_$c.rM !== _$Bt && (f.activeTexture(33984 + _$Bt), _$c.rM = _$Bt), f.texParameteri(_$Ft.BR, 10243, u), _$Ft.fM = u), _$Ft.vM !== o && (_$c.rM !== _$Bt && (f.activeTexture(33984 + _$Bt), _$c.rM = _$Bt), f.texParameteri(_$Ft.BR, 10241, o), _$Ft.vM = o), _$Ft.lM !== _$xt.lM && (_$c.rM !== _$Bt && (f.activeTexture(33984 + _$Bt), _$c.rM = _$Bt), f.texParameteri(_$Ft.BR, 10240, _$xt.lM), _$Ft.lM = _$xt.lM);
                            }
                            _$Pt = Ct.RR[++_$Nt];
                        }
                    }
                }
                if (n && l && (_$d || EZ.gpuInputAssembler !== n)) {
                    EZ.gpuInputAssembler = n;
                    var _$jt = t1.extensions.lC;
                    if (t1.extensions.xR) {
                        var _$Gt = t1.extensions.GR, Ht = n.ZM.get(l.SM);
                        if (!Ht) {
                            Ht = _$Gt.createVertexArrayOES(), n.ZM.set(l.SM, Ht), _$Gt.bindVertexArrayOES(Ht), f.bindBuffer(34962, null), f.bindBuffer(34963, null), _$c.HR = null, _$c.VR = null;
                            for(var Vt, _$Wt = l.IM.length, zt = 0; zt < _$Wt; zt++){
                                var $t = l.IM[zt];
                                Vt = null;
                                for(var _$Xt = n.XM.length, _$qt = 0; _$qt < _$Xt; _$qt++){
                                    var _$Yt = n.XM[_$qt];
                                    if (_$Yt.TM === $t.TM) {
                                        Vt = _$Yt;
                                        break;
                                    }
                                }
                                if (Vt) {
                                    _$c.HR !== Vt.FR && (f.bindBuffer(34962, Vt.FR), _$c.HR = Vt.FR);
                                    for(var _$Kt = 0; _$Kt < Vt.KM; ++_$Kt){
                                        var _$Jt = $t.MM + _$Kt, _$Qt = Vt.BM + Vt.UR * _$Kt;
                                        f.enableVertexAttribArray(_$Jt), _$c.dC[_$Jt] = !0, f.vertexAttribPointer(_$Jt, Vt._p, Vt.QR, Vt.JM, Vt.RM, _$Qt), _$jt && _$jt.vertexAttribDivisorANGLE(_$Jt, +!!Vt.QM);
                                    }
                                }
                            }
                            var _$Zt = n.wC;
                            _$Zt && f.bindBuffer(34963, _$Zt.FR), _$Gt.bindVertexArrayOES(null), f.bindBuffer(34962, null), f.bindBuffer(34963, null), _$c.HR = null, _$c.VR = null;
                        }
                        _$c.jR !== Ht && (_$Gt.bindVertexArrayOES(Ht), _$c.jR = Ht);
                    } else {
                        for(var _$ti = 0; _$ti < t1.capabilities.maxVertexAttributes; ++_$ti)_$c.dC[_$ti] = !1;
                        for(var ii = l.IM.length, ni = 0; ni < ii; ni++){
                            for(var _$si = l.IM[ni], _$ri = null, _$hi = n.XM.length, _$ei = 0; _$ei < _$hi; _$ei++){
                                var _$ui = n.XM[_$ei];
                                if (_$ui.TM === _$si.TM) {
                                    _$ri = _$ui;
                                    break;
                                }
                            }
                            if (_$ri) {
                                _$c.HR !== _$ri.FR && (f.bindBuffer(34962, _$ri.FR), _$c.HR = _$ri.FR);
                                for(var _$oi = 0; _$oi < _$ri.KM; ++_$oi){
                                    var _$fi = _$si.MM + _$oi, ci = _$ri.BM + _$ri.UR * _$oi;
                                    !_$c.gC[_$fi] && _$fi >= 0 && (f.enableVertexAttribArray(_$fi), _$c.gC[_$fi] = !0), _$c.dC[_$fi] = !0, f.vertexAttribPointer(_$fi, _$ri._p, _$ri.QR, _$ri.JM, _$ri.RM, ci), _$jt && _$jt.vertexAttribDivisorANGLE(_$fi, +!!_$ri.QM);
                                }
                            }
                        }
                        var ai = n.wC;
                        ai && _$c.VR !== ai.FR && (f.bindBuffer(34963, ai.FR), _$c.VR = ai.FR);
                        for(var vi = 0; vi < t1.capabilities.maxVertexAttributes; ++vi)_$c.gC[vi] !== _$c.dC[vi] && (f.disableVertexAttribArray(vi), _$c.gC[vi] = !1);
                    }
                }
                if (i && i.pC.length) for(var _$li = i.pC.length, _$di = 0; _$di < _$li; _$di++)switch(i.pC[_$di]){
                    case 1:
                        _$c.KS.lineWidth !== h.lineWidth && (f.lineWidth(h.lineWidth), _$c.KS.lineWidth = h.lineWidth);
                        break;
                    case 2:
                        _$c.KS.depthBias === h.depthBiasConstant && _$c.KS.depthBiasSlop === h.depthBiasSlope || (f.polygonOffset(h.depthBiasConstant, h.depthBiasSlope), _$c.KS.depthBias = h.depthBiasConstant, _$c.KS.depthBiasSlop = h.depthBiasSlope);
                        break;
                    case 4:
                        var wi = h.blendConstant;
                        v.blendColor.x === wi.x && v.blendColor.y === wi.y && v.blendColor.z === wi.z && v.blendColor.w === wi.w || (f.blendColor(wi.x, wi.y, wi.z, wi.w), v.blendColor.copy(wi));
                        break;
                    case 16:
                        var _$gi = h.stencilStatesFront, pi = h.stencilStatesBack;
                        a.stencilWriteMaskFront !== _$gi.writeMask && (f.stencilMaskSeparate(1028, _$gi.writeMask), a.stencilWriteMaskFront = _$gi.writeMask), a.stencilWriteMaskBack !== pi.writeMask && (f.stencilMaskSeparate(1029, pi.writeMask), a.stencilWriteMaskBack = pi.writeMask);
                        break;
                    case 32:
                        var yi = h.stencilStatesFront, _$_i = h.stencilStatesBack;
                        a.stencilRefFront === yi.reference && a.stencilReadMaskFront === yi.compareMask || (f.stencilFuncSeparate(1028, fZ[a.stencilFuncFront], yi.reference, yi.compareMask), a.stencilRefFront = yi.reference, a.stencilReadMaskFront = yi.compareMask), a.stencilRefBack === _$_i.reference && a.stencilReadMaskBack === _$_i.compareMask || (f.stencilFuncSeparate(1029, fZ[a.stencilFuncBack], _$_i.reference, _$_i.compareMask), a.stencilRefBack = _$_i.reference, a.stencilReadMaskBack = _$_i.compareMask);
                }
            }
            function IZ(t1, i) {
                var n = t1.gl, s = t1.extensions, _$r = s.lC, h = s.yC, e = EZ.gpuInputAssembler, u = EZ.glPrimitive;
                if (e) {
                    var o = e.wC;
                    if (e._C) {
                        var f = e._C.$R;
                        if (f.mC) {
                            for(var _$c = 0; _$c < f.bC; _$c++)f.kC[_$c] = f.AC[_$c] * o.RM;
                            if (h) f.EC ? h.multiDrawElementsInstancedWEBGL(u, f.TC, 0, e.SC, f.kC, 0, f.OC, 0, f.bC) : h.multiDrawElementsWEBGL(u, f.TC, 0, e.SC, f.kC, 0, f.bC);
                            else for(var a = 0; a < f.bC; a++)f.OC[a] && _$r ? _$r.drawElementsInstancedANGLE(u, f.TC[a], e.SC, f.kC[a], f.OC[a]) : n.drawElements(u, f.TC[a], e.SC, f.kC[a]);
                        } else if (h) f.EC ? h.multiDrawArraysInstancedWEBGL(u, f.AC, 0, f.TC, 0, f.OC, 0, f.bC) : h.multiDrawArraysWEBGL(u, f.AC, 0, f.TC, 0, f.bC);
                        else for(var v = 0; v < f.bC; v++)f.OC[v] && _$r ? _$r.drawArraysInstancedANGLE(u, f.AC[v], f.TC[v], f.OC[v]) : n.drawArrays(u, f.AC[v], f.TC[v]);
                    } else if (i.instanceCount && _$r) if (o) {
                        if (i.indexCount > 0) {
                            var l = i.firstIndex * o.RM;
                            _$r.drawElementsInstancedANGLE(u, i.indexCount, e.SC, l, i.instanceCount);
                        }
                    } else i.vertexCount > 0 && _$r.drawArraysInstancedANGLE(u, i.firstVertex, i.vertexCount, i.instanceCount);
                    else if (o) {
                        if (i.indexCount > 0) {
                            var _$d = i.firstIndex * o.RM;
                            n.drawElements(u, i.indexCount, e.SC, _$d);
                        }
                    } else i.vertexCount > 0 && n.drawArrays(u, i.firstVertex, i.vertexCount);
                }
            }
            function RZ(t1, i, n, s) {
                var _$r = t1.gl, h = t1.stateCache, e = h.sM[h.rM];
                e.nM !== n.nM && (_$r.bindTexture(n.BR, n.nM), e.nM = n.nM);
                var u = 0, o = 0;
                switch(n.BR){
                    case 3553:
                        for(var f = 0; f < s.length; f++){
                            var _$c = s[f];
                            _$r.texSubImage2D(3553, _$c.texSubres.mipLevel, _$c.texOffset.x, _$c.texOffset.y, n.YR, n.QR, i[u++]);
                        }
                        break;
                    case 34067:
                        for(var a = 0; a < s.length; a++){
                            var v = s[a], l = v.texOffset, _$d = v.texSubres, w = _$d.baseArrayLayer + _$d.layerCount;
                            for(o = _$d.baseArrayLayer; o < w; ++o)_$r.texSubImage2D(34069 + o, _$d.mipLevel, l.x, l.y, n.YR, n.QR, i[u++]);
                        }
                        break;
                    default:
                        rt(16327);
                }
                1 & n.IC && n.uM && _$r.generateMipmap(n.BR);
            }
            var MZ = new Uint8Array(1);
            function CZ(t1, i, n, s, r) {
                var h = Xd(i).height, e = Hd(i, r.width, r.height, r.depth), u = Hd(i, s.width, 1, 1), o = Hd(i, s.width, s.height, 1), f = Hd(i, r.width, 1, 1), _$c = $d(Fd[i]);
                MZ.byteLength < e && (MZ = new Uint8Array(e));
                for(var a = 0, v = n, l = 0; l < r.depth; l++){
                    v = n + o * l;
                    for(var _$d = 0; _$d < r.height; _$d += h)MZ.subarray(a, a + f).set(new Uint8Array(t1.buffer, t1.byteOffset + v, f)), a += f, v += u;
                }
                var w = e / _$c.BYTES_PER_ELEMENT;
                return et(Number.isInteger(w), 9101), new _$c(MZ.buffer, 0, w);
            }
            function NZ(t1, i, n, s) {
                var _$r = t1.gl, h = t1.stateCache, e = h.sM[h.rM];
                e.nM !== n.nM && (_$r.bindTexture(n.BR, n.nM), e.nM = n.nM);
                var u = 0, o = 0, f = Fd[n.JR], _$c = $d(f), a = f.isCompressed, v = Xd(n.JR), l = new Nl, _$d = new Ml, w = new Nl;
                switch(n.BR){
                    case 3553:
                        for(var g = 0; g < s.length; g++){
                            var p = s[g], _$y = p.texSubres.mipLevel, _$_ = p.texOffset, m = p.texExtent, b = m.width, k = m.height, A = v.width, E = v.height, T = p.buffStride;
                            _$d.x = 0 === _$_.x ? 0 : qd(_$_.x, A), _$d.y = 0 === _$_.y ? 0 : qd(_$_.y, E), l.width = b < A ? b : qd(b, A), l.height = k < E ? b : qd(k, E), w.width = T > 0 ? T : l.width, w.height = p.buffTexHeight > 0 ? p.buffTexHeight : l.height;
                            var S = b + _$d.x === n.ZR >> _$y ? b : l.width, _$O = k + _$d.y === n.tM >> _$y ? k : l.height, _$I = void 0, _$R = i[u++];
                            if (w.width === l.width && w.height === l.height) {
                                var _$M = Hd(n.JR, S, _$O, 1) / _$c.BYTES_PER_ELEMENT;
                                et(Number.isInteger(_$M), 9101), _$I = new _$c(_$R.buffer, _$R.byteOffset + p.buffOffset, _$M);
                            } else _$I = CZ(_$R, n.JR, p.buffOffset, w, l);
                            a ? 36196 === n.KR || t1.extensions.RC ? _$r.compressedTexImage2D(3553, _$y, n.KR, S, _$O, 0, _$I) : _$r.compressedTexSubImage2D(3553, _$y, _$d.x, _$d.y, S, _$O, n.YR, _$I) : _$r.texSubImage2D(3553, _$y, _$d.x, _$d.y, S, _$O, n.YR, n.QR, _$I);
                        }
                        break;
                    case 34067:
                        for(var _$C = 0; _$C < s.length; _$C++){
                            var N = s[_$C], P = N.texSubres.mipLevel, D = N.texOffset, L = N.texExtent, B = N.texSubres, F = L.width, U = L.height, x = v.width, j = v.height;
                            _$d.x = 0 === D.x ? 0 : qd(D.x, x), _$d.y = 0 === D.y ? 0 : qd(D.y, j), l.width = F < x ? F : qd(F, x), l.height = U < j ? F : qd(U, j), w.width = N.buffStride > 0 ? N.buffStride : l.width, w.height = N.buffTexHeight > 0 ? N.buffTexHeight : l.height;
                            var G = F + _$d.x === n.ZR >> P ? F : l.width, H = U + _$d.y === n.tM >> P ? U : l.height, _$V = B.baseArrayLayer + B.layerCount;
                            for(o = B.baseArrayLayer; o < _$V; ++o){
                                var _$W = void 0, _$z = i[u++];
                                if (w.width === l.width && w.height === l.height) {
                                    var _$$ = Hd(n.JR, G, H, 1) / _$c.BYTES_PER_ELEMENT;
                                    et(Number.isInteger(_$$), 9101), _$W = new _$c(_$z.buffer, _$z.byteOffset + N.buffOffset, _$$);
                                } else _$W = CZ(_$z, n.JR, N.buffOffset, w, l);
                                a ? 36196 === n.KR || t1.extensions.RC ? _$r.compressedTexImage2D(34069 + o, P, n.KR, G, H, 0, _$W) : _$r.compressedTexSubImage2D(34069 + o, P, _$d.x, _$d.y, G, H, n.YR, _$W) : _$r.texSubImage2D(34069 + o, P, _$d.x, _$d.y, G, H, n.YR, n.QR, _$W);
                            }
                        }
                        break;
                    default:
                        rt(16327);
                }
                1 & n.IC && _$r.generateMipmap(n.BR);
            }
            function PZ(t1, i, n, s) {
                var _$r = t1.gl, h = t1.stateCache, e = _$r.createFramebuffer();
                _$r.bindFramebuffer(36160, e);
                var u = 0, o = 0, f = 1, _$c = 1;
                if (3553 === i.BR) for(var a = 0; a < s.length; a++){
                    var v = s[a];
                    _$r.framebufferTexture2D(36160, 36064, i.BR, i.nM, v.texSubres.mipLevel), u = v.texOffset.x, o = v.texOffset.y, f = v.texExtent.width, _$c = v.texExtent.height, _$r.readPixels(u, o, f, _$c, i.YR, i.QR, n[a]);
                }
                else rt(16399);
                _$r.bindFramebuffer(36160, null), h.yM = null, _$r.deleteFramebuffer(e);
            }
            function DZ(t1, i, n, s, r) {
                t1.blitManager.MC(i, n, s, r);
            }
            var LZ = function() {
                function t1() {}
                return t1.CC = function(i) {
                    t1.eh = i;
                }, s(t1, null, [
                    {
                        key: "instance",
                        get: function get() {
                            return t1.eh;
                        }
                    }
                ]), t1;
            }();
            function BZ(t1) {
                return new Int32Array(t1);
            }
            LZ.eh = null;
            var FZ = function() {
                function t1() {
                    this.bC = 0, this.mC = !1, this.EC = !1, this.NC = 4, this.TC = BZ(this.NC), this.AC = BZ(this.NC), this.OC = BZ(this.NC), this.kC = BZ(this.NC);
                }
                var i = t1.prototype;
                return i.zR = function() {
                    this.bC = 0, this.mC = !1, this.EC = !1;
                }, i.qR = function(t1, i) {
                    this.PC(t1), this.mC = i.indexCount > 0, this.EC = !!i.instanceCount, this.bC = Math.max(t1 + 1, this.bC), this.mC ? (this.TC[t1] = i.indexCount, this.AC[t1] = i.firstIndex) : (this.TC[t1] = i.vertexCount, this.AC[t1] = i.firstVertex), this.OC[t1] = Math.max(1, i.instanceCount);
                }, i.PC = function(t1) {
                    if (!(this.NC > t1)) {
                        this.NC = C(t1);
                        var i = BZ(this.NC), n = BZ(this.NC), s = BZ(this.NC);
                        this.kC = BZ(this.NC), i.set(this.TC), n.set(this.AC), s.set(this.OC), this.TC = i, this.AC = n, this.OC = s;
                    }
                }, t1;
            }(), UZ = function() {
                function t1() {
                    this.DC = null, this.LC = null, this.BC = null, this.FC = null, this.xC = null, this.jC = null, this.GC = null, this.HC = null, this.TR = null, this.VC = null, this.es = null, this.WC = null, this.zC = null;
                    var _$t = LZ.instance.bindingMappingInfo.maxBlockCounts[0];
                    this.DC = {
                        TM: "Blit Pass",
                        CM: [
                            new Zl(0, 0, "BlitParams", [
                                new Ql("tilingOffsetSrc", 16, 1),
                                new Ql("tilingOffsetDst", 16, 1)
                            ], 1)
                        ],
                        xM: [
                            new td(0, _$t, "textureSrc", 28, 1)
                        ],
                        UM: [],
                        kM: [
                            {
                                MR: 1,
                                EM: "\nprecision mediump float;\nattribute vec2 a_position;\nattribute vec2 a_texCoord;\nuniform vec4 tilingOffsetSrc;\nuniform vec4 tilingOffsetDst;\nvarying vec2 v_texCoord;\nvoid main() {\n    v_texCoord = a_texCoord * tilingOffsetSrc.xy + tilingOffsetSrc.zw;\n    gl_Position = vec4((a_position + 1.0) * tilingOffsetDst.xy - 1.0 + tilingOffsetDst.zw * 2.0, 0, 1);\n}",
                                AM: null
                            },
                            {
                                MR: 16,
                                EM: "\nprecision mediump float;\nuniform sampler2D textureSrc;\nvarying vec2 v_texCoord;\nvoid main() {\n    gl_FragColor = texture2D(textureSrc, v_texCoord);\n}",
                                AM: null
                            }
                        ],
                        SM: null,
                        IM: [],
                        DM: [],
                        NM: [],
                        jM: []
                    }, mZ(LZ.instance, this.DC), this.LC = {
                        SR: [
                            new md(0, 1, 1, 1),
                            new md(_$t, 16, 1, 16)
                        ],
                        $C: [],
                        OR: [],
                        IR: _$t + 1
                    };
                    for(var i = 0; i < _$t; i++)this.LC.OR[i] = 0;
                    this.LC.OR.push(1), this.BC = {
                        XC: [
                            this.LC
                        ],
                        qC: 0,
                        YC: [
                            0
                        ],
                        vC: [
                            []
                        ]
                    }, this.FC = {
                        oC: 5,
                        uC: this.DC,
                        fC: this.BC,
                        KS: null,
                        sC: new uw(!1, !1),
                        hC: null,
                        pC: [],
                        KC: null
                    }, this.xC = {
                        LR: 8,
                        DR: 1,
                        UR: 64,
                        RM: 16,
                        WR: null,
                        vf32: null,
                        $R: new FZ,
                        BR: 0,
                        FR: null
                    }, lZ(LZ.instance, this.xC), LZ.instance.memoryStatus.bufferSize += this.xC.UR;
                    var n = new Float32Array([
                        -1,
                        -1,
                        0,
                        0,
                        1,
                        -1,
                        1,
                        0,
                        -1,
                        1,
                        0,
                        1,
                        1,
                        1,
                        1,
                        1
                    ]);
                    wZ(LZ.instance, this.xC, n, 0, n.length), this.jC = {
                        qM: [
                            new ud("a_position", 21),
                            new ud("a_texCoord", 21)
                        ],
                        YM: [
                            this.xC
                        ],
                        wC: null,
                        _C: null,
                        XM: [],
                        SC: 0,
                        ZM: new Map
                    }, kZ(LZ.instance, this.jC), this.GC = {
                        vM: 9728,
                        lM: 9728,
                        oM: 10497,
                        fM: 10497,
                        JC: 10497
                    }, this.HC = {
                        vM: 9729,
                        lM: 9729,
                        oM: 10497,
                        fM: 10497,
                        JC: 10497
                    }, this.zC = new Float32Array(8), this.VC = {
                        LR: 16,
                        DR: 1,
                        UR: 32,
                        RM: 32,
                        WR: this.zC,
                        vf32: null,
                        $R: new FZ,
                        BR: 0,
                        FR: null
                    }, lZ(LZ.instance, this.VC), LZ.instance.memoryStatus.bufferSize += this.VC.UR, this.TR = {
                        RR: [
                            {
                                MR: 1,
                                CR: this.VC,
                                NR: null,
                                PR: null
                            },
                            {
                                MR: 16,
                                CR: null,
                                NR: null,
                                PR: null
                            }
                        ],
                        OR: this.LC.OR
                    }, this.es = new $l(4, 0, 0, 0, 0, 0, 0), this.WC = LZ.instance.gl.createFramebuffer();
                }
                var i = t1.prototype;
                return i.Qw = function() {
                    this.WC && (LZ.instance.gl.deleteFramebuffer(this.WC), this.WC = null), this.xC && (LZ.instance.memoryStatus.bufferSize -= this.xC.UR, dZ(LZ.instance, this.xC)), this.VC && (LZ.instance.memoryStatus.bufferSize -= this.VC.UR, dZ(LZ.instance, this.VC)), this.DC && bZ(LZ.instance, this.DC), this.jC && AZ(LZ.instance, this.jC);
                }, i.MC = function(t1, i, n, s) {
                    var _$r = LZ.instance, h = _$r.gl, e = _$r.stateCache, u = e.yM;
                    if (h.viewport(0, 0, i.ZR, i.tM), h.scissor(0, 0, i.ZR, i.tM), this.zC && this.VC && this.FC && this.jC && this.TR && this.es) {
                        var o = this.TR.RR[1];
                        o.NR = t1, o.PR = 1 === s ? this.GC : this.HC;
                        var f = Fd[i.JR], _$c = 36064;
                        f.hasStencil ? _$c = 33306 : f.hasDepth && (_$c = 36096);
                        var a = n.map(function(t1, i) {
                            return i;
                        });
                        a.sort(function(t1, i) {
                            return n[t1].srcSubres.mipLevel - n[i].srcSubres.mipLevel;
                        }), e.yM !== this.WC && (h.bindFramebuffer(36160, this.WC), e.yM = this.WC);
                        var v = n[0].dstSubres.mipLevel;
                        i.nM ? h.framebufferTexture2D(36160, _$c, i.BR, i.nM, v) : h.framebufferRenderbuffer(36160, _$c, 36161, i.dM);
                        for(var l = 0; l < a.length; ++l){
                            var _$d = n[a[l]];
                            t1.nM && v !== _$d.srcSubres.mipLevel && (v = _$d.srcSubres.mipLevel, h.framebufferTexture2D(36160, _$c, i.BR, i.nM, v));
                            var w = t1.ZR, g = t1.tM, p = i.ZR, _$y = i.tM;
                            this.zC[0] = _$d.srcExtent.width / w, this.zC[1] = _$d.srcExtent.height / g, this.zC[2] = _$d.srcOffset.x / w, this.zC[3] = _$d.srcOffset.y / g, this.zC[4] = _$d.dstExtent.width / p, this.zC[5] = _$d.dstExtent.height / _$y, this.zC[6] = _$d.dstOffset.x / p, this.zC[7] = _$d.dstOffset.y / _$y, wZ(_$r, this.VC, this.zC, 0, 4 * this.zC.length), OZ(_$r, this.FC, this.jC, [
                                this.TR
                            ], [], null), IZ(_$r, this.es);
                        }
                        e.yM !== u && (h.bindFramebuffer(36160, u), e.yM = u);
                        var _$_ = e.iC;
                        h.viewport(_$_.left, _$_.top, _$_.width, _$_.height);
                        var m = e.nC;
                        h.scissor(m.x, m.y, m.width, m.height);
                    }
                }, t1;
            }(), xZ = function(t1) {
                function i() {
                    var _$i;
                    return (_$i = t1.call(this) || this).QC = null, _$i.ZC = null, _$i.zC = null, _$i;
                }
                h(i, t1);
                var n = i.prototype;
                return n.initialize = function(t1) {
                    if ("buffer" in t1) {
                        this.kn = !0;
                        var _$i = t1.buffer;
                        this.pn = _$i.usage, this.yn = _$i.memUsage, this._n = this.mn = t1.range, this.et = 1, this.Qt = _$i.flags, this.ZC = {
                            CR: _$i.gpuBuffer,
                            BM: t1.offset,
                            tN: t1.range
                        };
                    } else this.pn = t1.usage, this.yn = t1.memUsage, this._n = t1.size, this.mn = Math.max(t1.stride || this._n, 1), this.et = this._n / this.mn, this.Qt = t1.flags, 16 & this.pn && this._n > 0 && (this.zC = new Uint8Array(this._n)), this.QC = {
                        LR: this.pn,
                        DR: this.yn,
                        UR: this._n,
                        RM: this.mn,
                        WR: null,
                        vf32: null,
                        $R: new FZ,
                        BR: 0,
                        FR: null
                    }, 16 & this.pn && (this.QC.WR = this.zC), lZ(LZ.instance, this.QC), LZ.instance.memoryStatus.bufferSize += this._n;
                }, n.destroy = function() {
                    this.QC && (dZ(LZ.instance, this.QC), LZ.instance.memoryStatus.bufferSize -= this._n, this.QC = null), this.ZC && (this.ZC = null);
                }, n.resize = function(t1) {
                    if (this.kn) nt(16379);
                    else {
                        var _$i, n, _$s, _$r, _$h, e = this._n;
                        e !== t1 && (this._n = t1, this.et = this._n / this.mn, this.zC && (this.zC = new Uint8Array(t1)), this.QC && (this.zC && (this.QC.WR = this.zC), this.QC.UR = t1, t1 > 0 && (_$i = LZ.instance, n = this.QC, _$s = _$i.gl, _$r = _$i.stateCache, _$h = 2 & n.DR ? 35048 : 35044, 8 & n.LR ? (_$i.extensions.xR && _$r.jR && (_$i.extensions.GR.bindVertexArrayOES(null), _$r.jR = null), EZ.gpuInputAssembler = null, _$r.HR !== n.FR && _$s.bindBuffer(34962, n.FR), n.WR ? _$s.bufferData(34962, n.WR, _$h) : _$s.bufferData(34962, n.UR, _$h), _$s.bindBuffer(34962, null), _$r.HR = null) : 4 & n.LR ? (_$i.extensions.xR && _$r.jR && (_$i.extensions.GR.bindVertexArrayOES(null), _$r.jR = null), EZ.gpuInputAssembler = null, _$r.VR !== n.FR && _$s.bindBuffer(34963, n.FR), n.WR ? _$s.bufferData(34963, n.WR, _$h) : _$s.bufferData(34963, n.UR, _$h), _$s.bindBuffer(34963, null), _$r.VR = null) : 16 & n.LR ? n.WR && (n.vf32 = new Float32Array(n.WR.buffer)) : (64 & n.LR || 2 & n.LR || 1 & n.LR || rt(16315), n.BR = 0), LZ.instance.memoryStatus.bufferSize -= e, LZ.instance.memoryStatus.bufferSize += t1)));
                    }
                }, n.update = function(t1, i) {
                    var n;
                    this.kn ? nt(16380) : (n = void 0 !== i ? i : 64 & this.pn ? 0 : t1.byteLength, wZ(LZ.instance, this.QC, t1, 0, n));
                }, s(i, [
                    {
                        key: "gpuBuffer",
                        get: function get() {
                            return this.QC;
                        }
                    },
                    {
                        key: "gpuBufferView",
                        get: function get() {
                            return this.ZC;
                        }
                    }
                ]), i;
            }(Kd), jZ = function(t1) {
                function i() {
                    var _$i;
                    return (_$i = t1.call(this) || this).iN = !1, _$i.nN = null, _$i.sN = null, _$i.rN = [], _$i.hN = Array(8).fill(0), _$i.eN = new Cd, _$i.uN = !1, _$i;
                }
                h(i, t1);
                var n = i.prototype;
                return n.initialize = function(t1) {
                    this.U = t1.type, this.An = t1.queue;
                    for(var _$i = LZ.instance.bindingMappings.oN.length, n = 0; n < _$i; n++)this.rN.push(null);
                }, n.destroy = function() {}, n.begin = function() {
                    this.nN = null, this.sN = null, this.rN.length = 0, this.En = 0, this.Tn = 0, this.Sn = 0;
                }, n.end = function() {
                    this.uN && this.fN(), this.iN = !1;
                }, n.beginRenderPass = function() {
                    rt(16401), this.iN = !0;
                }, n.endRenderPass = function() {
                    this.iN = !1;
                }, n.bindPipelineState = function(t1) {
                    var _$i = t1.gpuPipelineState;
                    _$i !== this.nN && (this.nN = _$i, this.uN = !0);
                }, n.bindDescriptorSet = function(t1, i, n) {
                    var s = i.gpuDescriptorSet;
                    if (s !== this.rN[t1] && (this.rN[t1] = s, this.uN = !0), n) {
                        var _$r, _$h = null == (_$r = this.nN) ? void 0 : _$r.fC;
                        if (_$h) {
                            for(var e = this.hN, u = _$h.YC[t1], o = 0; o < n.length; o++)e[u + o] = n[o];
                            this.uN = !0;
                        }
                    }
                }, n.bindInputAssembler = function(t1) {
                    var _$i = t1.vN();
                    this.sN = _$i, this.uN = !0;
                }, n.setViewport = function(t1) {
                    var _$i = this.eN.viewport;
                    _$i.left === t1.left && _$i.top === t1.top && _$i.width === t1.width && _$i.height === t1.height && _$i.minDepth === t1.minDepth && _$i.maxDepth === t1.maxDepth || (_$i.left = t1.left, _$i.top = t1.top, _$i.width = t1.width, _$i.height = t1.height, _$i.minDepth = t1.minDepth, _$i.maxDepth = t1.maxDepth, this.uN = !0);
                }, n.setScissor = function(t1) {
                    var _$i = this.eN.scissor;
                    _$i.x === t1.x && _$i.y === t1.y && _$i.width === t1.width && _$i.height === t1.height || (_$i.x = t1.x, _$i.y = t1.y, _$i.width = t1.width, _$i.height = t1.height, this.uN = !0);
                }, n.setLineWidth = function(t1) {
                    this.eN.lineWidth !== t1 && (this.eN.lineWidth = t1, this.uN = !0);
                }, n.setDepthBias = function(t1, i, n) {
                    var s = this.eN;
                    s.depthBiasConstant === t1 && s.depthBiasClamp === i && s.depthBiasSlope === n || (s.depthBiasConstant = t1, s.depthBiasClamp = i, s.depthBiasSlope = n, this.uN = !0);
                }, n.setBlendConstants = function(t1) {
                    var _$i = this.eN.blendConstant;
                    _$i.x === t1.x && _$i.y === t1.y && _$i.z === t1.z && _$i.w === t1.w || (_$i.copy(t1), this.uN = !0);
                }, n.setDepthBound = function(t1, i) {
                    var n = this.eN;
                    n.depthMinBounds === t1 && n.depthMaxBounds === i || (n.depthMinBounds = t1, n.depthMaxBounds = i, this.uN = !0);
                }, n.setStencilWriteMask = function(t1, i) {
                    var n = this.eN.stencilStatesFront, s = this.eN.stencilStatesBack;
                    1 & t1 && n.writeMask !== i && (n.writeMask = i, this.uN = !0), 2 & t1 && s.writeMask !== i && (s.writeMask = i, this.uN = !0);
                }, n.setStencilCompareMask = function(t1, i, n) {
                    var s = this.eN.stencilStatesFront, _$r = this.eN.stencilStatesBack;
                    1 & t1 && (s.compareMask === n && s.reference === i || (s.reference = i, s.compareMask = n, this.uN = !0)), 2 & t1 && (_$r.compareMask === n && _$r.reference === i || (_$r.reference = i, _$r.compareMask = n, this.uN = !0));
                }, n.draw = function() {
                    rt(16328);
                }, n.updateBuffer = function() {
                    rt(16329);
                }, n.copyBuffersToTexture = function() {
                    rt(16330);
                }, n.execute = function() {
                    rt(16402);
                }, n.pipelineBarrier = function() {}, n.fN = function() {
                    rt(16401);
                }, n.blitTexture = function() {
                    rt(16401);
                }, i;
            }(Jd), GZ = function(t1) {
                h(n, t1);
                var i = n.prototype;
                function n() {
                    var i;
                    return (i = t1.call(this) || this).lN = null, i.dN = [], i.wN = void 0, i;
                }
                return i.gN = function() {
                    return this.lN;
                }, i.initialize = function(t1) {
                    var i, _$n = this;
                    this.Kn = t1.renderPass, this.Jn = t1.colorTextures || [];
                    for(var _$s = this.Yn = t1.depthStencilTexture || null, _$r = 0, _$h = [], e = 0; e < t1.colorTextures.length; ++e){
                        var u = t1.colorTextures[e];
                        u && (_$h.push(u.gpuTexture), _$r = u.lodLevel);
                    }
                    var o = null;
                    _$s && (o = _$s.gpuTexture, _$r = _$s.lodLevel);
                    var f = Number.MAX_SAFE_INTEGER, _$c = Number.MAX_SAFE_INTEGER;
                    this.lN = {
                        KC: t1.renderPass.gpuRenderPass,
                        wM: _$h,
                        _M: o,
                        yM: null,
                        pM: !0,
                        get width () {
                            return this.wM.length > 0 ? this.wM[0].ZR : this._M ? this._M.ZR : f;
                        },
                        set width (t){
                            f = t;
                        },
                        get height () {
                            return this.wM.length > 0 ? this.wM[0].tM : this._M ? this._M.tM : _$c;
                        },
                        set height (t){
                            _$c = t;
                        },
                        tC: _$r
                    }, _Z(LZ.instance, this.lN), this.lN.wM.forEach(function(t1) {
                        return _$n.dN.push(t1.nM);
                    }), this.wN = null == (i = this.lN._M) ? void 0 : i.nM, this.Qn = this.lN.ZR, this.Zn = this.lN.tM;
                }, i.destroy = function() {
                    var _$t, i, _$n, _$s;
                    this.lN && (_$t = LZ.instance, i = this.lN, _$n = _$t.gl, _$s = _$t.stateCache, i.yM && (_$n.deleteFramebuffer(i.yM), _$s.yM === i.yM && (_$n.bindFramebuffer(36160, null), _$s.yM = null), i.yM = null), this.lN = null, this.dN.length = 0, this.wN = null);
                }, s(n, [
                    {
                        key: "needRebuild",
                        get: function get() {
                            var _$t = this.lN;
                            if (_$t) {
                                for(var i, _$n = 0; _$n < _$t.wM.length; _$n++)if (_$t.wM[_$n].nM !== this.dN[_$n]) return !0;
                                if ((null == (i = _$t._M) ? void 0 : i.nM) !== this.wN) return !0;
                            }
                            return !1;
                        }
                    }
                ]), n;
            }(iw), HZ = function(t1) {
                h(n, t1);
                var i = n.prototype;
                function n() {
                    var i;
                    return (i = t1.call(this) || this).jC = null, i;
                }
                return i.vN = function() {
                    return this.jC;
                }, i.initialize = function(t1) {
                    if (0 !== t1.vertexBuffers.length) {
                        if (this.ts = t1.attributes, this.ns = this.computeAttributesHash(), this.ss = t1.vertexBuffers, t1.indexBuffer) this.rs = t1.indexBuffer, this.es.indexCount = this.rs.size / this.rs.stride, this.es.firstIndex = 0;
                        else {
                            var i = this.ss[0];
                            this.es.vertexCount = i.size / i.stride, this.es.firstVertex = 0, this.es.vertexOffset = 0;
                        }
                        this.es.instanceCount = 0, this.es.firstInstance = 0, this.hs = t1.indirectBuffer || null;
                        for(var _$n = Array(t1.vertexBuffers.length), s = 0; s < t1.vertexBuffers.length; ++s){
                            var _$r = t1.vertexBuffers[s];
                            _$r.gpuBuffer && (_$n[s] = _$r.gpuBuffer);
                        }
                        var _$h = null, e = 0;
                        if (t1.indexBuffer && (_$h = t1.indexBuffer.gpuBuffer)) switch(_$h.RM){
                            case 1:
                                e = 5121;
                                break;
                            case 2:
                                e = 5123;
                                break;
                            case 4:
                                e = 5125;
                                break;
                            default:
                                rt(16332);
                        }
                        var u = null;
                        t1.indirectBuffer && (u = t1.indirectBuffer.gpuBuffer), this.jC = {
                            qM: t1.attributes,
                            YM: _$n,
                            wC: _$h,
                            _C: u,
                            XM: [],
                            SC: e,
                            ZM: new Map
                        }, kZ(LZ.instance, this.jC);
                    } else rt(16331);
                }, i.destroy = function() {
                    var _$t = LZ.instance;
                    this.jC && _$t.extensions.xR && AZ(_$t, this.jC), this.jC = null;
                }, n;
            }(nw), VZ = function(t1) {
                function i() {
                    var _$i;
                    return (_$i = t1.call(this) || this).LC = null, _$i;
                }
                h(i, t1);
                var n = i.prototype;
                return n.initialize = function(t1) {
                    Array.prototype.push.apply(this.ds, t1.bindings);
                    for(var _$i = 0, n = -1, _$s = [], _$r = 0; _$r < this.ds.length; _$r++){
                        var _$h = this.ds[_$r];
                        _$s.push(_$i), _$i += _$h.count, _$h.binding > n && (n = _$h.binding);
                    }
                    this.ws = Array(n + 1).fill(-1);
                    for(var e = this.gs = Array(n + 1).fill(-1), u = 0; u < this.ds.length; u++){
                        var o = this.ds[u];
                        this.ws[o.binding] = u, e[o.binding] = _$s[u];
                    }
                    for(var f = [], _$c = 0; _$c < this.ds.length; _$c++){
                        var a = this.ds[_$c];
                        if (10 & a.descriptorType) for(var v = 0; v < a.count; v++)f.push(a.binding);
                    }
                    this.LC = {
                        SR: this.ds,
                        $C: f,
                        OR: e,
                        IR: _$i
                    };
                }, n.destroy = function() {
                    this.ds.length = 0;
                }, s(i, [
                    {
                        key: "gpuDescriptorSetLayout",
                        get: function get() {
                            return this.LC;
                        }
                    }
                ]), i;
            }(rw), WZ = function(t1) {
                function i() {
                    var _$i;
                    return (_$i = t1.call(this) || this).BC = null, _$i;
                }
                h(i, t1);
                var n = i.prototype;
                return n.initialize = function(t1) {
                    Array.prototype.push.apply(this.ps, t1.setLayouts);
                    for(var _$i = [], n = [], _$s = 0, _$r = [], _$h = 0; _$h < this.ps.length; _$h++){
                        for(var e = this.ps[_$h], u = e.gpuDescriptorSetLayout.$C, o = Array(e.bindingIndices.length).fill(-1), f = 0; f < u.length; f++){
                            var _$c = u[f];
                            o[_$c] < 0 && (o[_$c] = _$s + f);
                        }
                        n.push(e.gpuDescriptorSetLayout), _$i.push(o), _$r.push(_$s), _$s += u.length;
                    }
                    this.BC = {
                        XC: n,
                        vC: _$i,
                        qC: _$s,
                        YC: _$r
                    };
                }, n.destroy = function() {
                    this.ps.length = 0;
                }, s(i, [
                    {
                        key: "gpuPipelineLayout",
                        get: function get() {
                            return this.BC;
                        }
                    }
                ]), i;
            }(hw), zZ = [
                0,
                1,
                3,
                2,
                0,
                0,
                0,
                4,
                5,
                6,
                0,
                0,
                0,
                0
            ], $Z = function(t1) {
                function i() {
                    var _$i;
                    return (_$i = t1.call(this) || this).FC = null, _$i;
                }
                h(i, t1);
                var n = i.prototype;
                return n.initialize = function(t1) {
                    this.ks = t1.primitive, this.ys = t1.shader, this._s = t1.pipelineLayout;
                    var _$i = this.Ss;
                    if (t1.blendState) {
                        var n = t1.blendState, _$s = n.targets;
                        _$s && _$s.forEach(function(t1, n) {
                            _$i.setTarget(n, t1);
                        }), void 0 !== n.isA2C && (_$i.isA2C = n.isA2C), void 0 !== n.isIndepend && (_$i.isIndepend = n.isIndepend), void 0 !== n.blendColor && (_$i.blendColor = n.blendColor);
                    }
                    Object.assign(this.Es, t1.rasterizerState), Object.assign(this.Ts, t1.depthStencilState), this.As = t1.inputState, this.Kn = t1.renderPass, this.Os = t1.dynamicStates;
                    for(var _$r = [], _$h = 0; _$h < 31; _$h++)this.Os & 1 << _$h && _$r.push(1 << _$h);
                    this.FC = {
                        oC: zZ[t1.primitive],
                        uC: t1.shader.gpuShader,
                        fC: t1.pipelineLayout.gpuPipelineLayout,
                        KS: t1.rasterizerState,
                        sC: t1.depthStencilState,
                        hC: t1.blendState,
                        KC: t1.renderPass.gpuRenderPass,
                        pC: _$r
                    };
                }, n.destroy = function() {
                    this.FC = null;
                }, s(i, [
                    {
                        key: "gpuPipelineState",
                        get: function get() {
                            return this.FC;
                        }
                    }
                ]), i;
            }(aw), XZ = function(t1) {
                function i() {
                    return t1.apply(this, arguments) || this;
                }
                h(i, t1);
                var n = i.prototype;
                return n.beginRenderPass = function(t1, i, n, s, r, h) {
                    SZ(LZ.instance, t1.gpuRenderPass, i.gN(), n, s, r, h), this.iN = !0;
                }, n.draw = function(t1) {
                    if (this.iN) {
                        this.uN && this.fN();
                        var _$i = "drawInfo" in t1 ? t1.drawInfo : t1;
                        IZ(LZ.instance, _$i), ++this.En, this.Tn += _$i.instanceCount;
                        var n = _$i.indexCount || _$i.vertexCount;
                        if (this.nN) switch(this.nN.oC){
                            case 4:
                                this.Sn += n / 3 * Math.max(_$i.instanceCount, 1);
                                break;
                            case 5:
                            case 6:
                                this.Sn += (n - 2) * Math.max(_$i.instanceCount, 1);
                        }
                    } else rt(16328);
                }, n.setViewport = function(t1) {
                    var _$i = LZ.instance, n = _$i.stateCache, s = _$i.gl;
                    n.iC.left === t1.left && n.iC.top === t1.top && n.iC.width === t1.width && n.iC.height === t1.height || (s.viewport(t1.left, t1.top, t1.width, t1.height), n.iC.left = t1.left, n.iC.top = t1.top, n.iC.width = t1.width, n.iC.height = t1.height);
                }, n.setScissor = function(t1) {
                    var _$i = LZ.instance, n = _$i.stateCache, s = _$i.gl;
                    n.nC.x === t1.x && n.nC.y === t1.y && n.nC.width === t1.width && n.nC.height === t1.height || (s.scissor(t1.x, t1.y, t1.width, t1.height), n.nC.x = t1.x, n.nC.y = t1.y, n.nC.width = t1.width, n.nC.height = t1.height);
                }, n.updateBuffer = function(t1, i, n) {
                    if (this.iN) rt(16329);
                    else {
                        var s, _$r = t1.gpuBuffer;
                        _$r && (s = void 0 !== n ? n : 64 & t1.usage ? 0 : i.byteLength, wZ(LZ.instance, _$r, i, 0, s));
                    }
                }, n.copyBuffersToTexture = function(t1, i, n) {
                    if (this.iN) rt(16330);
                    else {
                        var s = i.gpuTexture;
                        s && NZ(LZ.instance, t1, s, n);
                    }
                }, n.execute = function() {
                    rt(16402);
                }, n.fN = function() {
                    OZ(LZ.instance, this.nN, this.sN, this.rN, this.hN, this.eN), this.uN = !1;
                }, n.blitTexture = function(t1, i, n, s) {
                    var _$r = t1.gpuTexture, _$h = i.gpuTexture;
                    DZ(LZ.instance, _$r, _$h, n, s);
                }, i;
            }(jZ), qZ = function(t1) {
                function i() {
                    var _$i;
                    return (_$i = t1.call(this) || this).pN = 0, _$i.yN = 0, _$i._N = 0, _$i;
                }
                h(i, t1);
                var n = i.prototype;
                return n.initialize = function(t1) {
                    this.U = t1.type;
                }, n.destroy = function() {}, n.submit = function(t1) {
                    for(var _$i = t1.length, n = 0; n < _$i; n++){
                        var s = t1[n];
                        this.pN += s.numDrawCalls, this.yN += s.numInstances, this._N += s.numTris;
                    }
                }, n.Ty = function() {
                    this.pN = 0, this.yN = 0, this._N = 0;
                }, i;
            }(vw), YZ = function(t1) {
                function i() {
                    var _$i;
                    return (_$i = t1.call(this) || this).mN = null, _$i;
                }
                h(i, t1);
                var n = i.prototype;
                return n.initialize = function(t1) {
                    this.Is = t1.colorAttachments, this.Rs = t1.depthStencilAttachment, this.Ms = t1.subpasses, this.mN = {
                        rC: this.Is,
                        eC: this.Rs
                    }, this.Cs = this.computeHash();
                }, n.destroy = function() {
                    this.mN = null;
                }, s(i, [
                    {
                        key: "gpuRenderPass",
                        get: function get() {
                            return this.mN;
                        }
                    }
                ]), i;
            }(lw), KZ = [
                10497,
                33648,
                33071,
                33071
            ], JZ = function(t1) {
                function i(i, n) {
                    (_$s = t1.call(this, i, n) || this).kN = null;
                    var _$s, e = _$s.Ns.minFilter, u = _$s.Ns.magFilter, o = _$s.Ns.mipFilter, f = KZ[_$s.Ns.addressU], _$c = KZ[_$s.Ns.addressV], a = KZ[_$s.Ns.addressW];
                    return _$s.kN = {
                        vM: 2 === e || 3 === e ? 2 === o || 3 === o ? 9987 : 1 === o ? 9985 : 9729 : 2 === o || 3 === o ? 9986 : 1 === o ? 9984 : 9728,
                        lM: 2 === u || 3 === u ? 9729 : 9728,
                        oM: f,
                        fM: _$c,
                        JC: a
                    }, _$s;
                }
                return h(i, t1), s(i, [
                    {
                        key: "gpuSampler",
                        get: function get() {
                            return this.kN;
                        }
                    }
                ]), i;
            }(dw), QZ = function(t1) {
                function i() {
                    var _$i;
                    return (_$i = t1.call(this) || this).DC = null, _$i;
                }
                h(i, t1);
                var n = i.prototype;
                return n.initialize = function(t1) {
                    this.Ps = t1.name, this.Ds = t1.stages, this.ts = t1.attributes, this.Ls = t1.blocks, this.Bn = t1.samplers, this.DC = {
                        TM: t1.name,
                        CM: t1.blocks.slice(),
                        xM: t1.samplerTextures.slice(),
                        UM: t1.subpassInputs.slice(),
                        kM: Array(t1.stages.length),
                        SM: null,
                        IM: [],
                        DM: [],
                        NM: [],
                        jM: []
                    };
                    for(var _$i = 0; _$i < t1.stages.length; ++_$i){
                        var n = t1.stages[_$i];
                        this.DC.kM[_$i] = {
                            MR: n.stage,
                            EM: n.source,
                            AM: null
                        };
                    }
                }, n.destroy = function() {
                    this.DC && (bZ(LZ.instance, this.DC), this.DC = null);
                }, s(i, [
                    {
                        key: "gpuShader",
                        get: function get() {
                            return null === this.DC.SM && mZ(LZ.instance, this.DC), this.DC;
                        }
                    }
                ]), i;
            }(ww), ZZ = function() {
                function t1() {
                    this.HR = null, this.VR = null, this.jR = null, this.rM = 0, this.sM = [], this.dM = null, this.yM = null, this.iC = new Ul, this.nC = new Cl(0, 0, 0, 0), this.KS = new ew, this.sC = new uw, this.hC = new fw, this.SM = null, this.gC = [], this.dC = [], this.WM = {};
                }
                return t1.prototype.Ch = function(t1, i) {
                    for(var n = 0; n < t1; ++n)this.sM.push({
                        nM: null
                    });
                    this.gC.length = i, this.gC.fill(!1), this.dC.length = i, this.dC.fill(!1);
                }, t1;
            }(), t0 = function(t1) {
                function i() {
                    var _$i;
                    return (_$i = t1.call(this) || this).AN = null, _$i.EN = 0, _$i;
                }
                h(i, t1);
                var n = i.prototype;
                return n.initialize = function(t1, i) {
                    var _$s = LZ.instance, _$r = t1;
                    "texture" in t1 && (_$r = t1.texture.info, this.Us = !0);
                    var e = this.Ns;
                    e.copy(_$r);
                    var u = this.Bs;
                    this.Fs = jd(e.width) && jd(e.height), this._n = Vd(e.format, this.width, this.height, this.depth, e.levelCount) * e.layerCount, this.Us ? (u.copy(t1), this.EN = t1.baseLevel, this.AN = t1.texture.AN) : (this.AN = {
                        MR: _$r.type,
                        JR: _$r.format,
                        LR: _$r.usage,
                        ZR: _$r.width,
                        tM: _$r.height,
                        TN: _$r.depth,
                        UR: this._n,
                        SN: _$r.layerCount,
                        hM: _$r.levelCount,
                        IN: _$r.samples,
                        IC: _$r.flags,
                        uM: this.Fs,
                        BR: 0,
                        KR: 0,
                        YR: 0,
                        QR: 0,
                        RN: 0,
                        nM: null,
                        dM: null,
                        oM: 0,
                        fM: 0,
                        vM: 0,
                        lM: 0,
                        gM: i || !1
                    }, this.AN.gM || (gZ(_$s, this.AN), _$s.memoryStatus.textureSize += this._n), u.texture = this, u.type = t1.type, u.format = t1.format, u.baseLevel = 0, u.levelCount = t1.levelCount, u.baseLayer = 0, u.layerCount = t1.layerCount);
                }, n.destroy = function() {
                    var _$i = LZ.instance;
                    !this.Us && this.AN && (pZ(_$i, this.AN), _$i.memoryStatus.textureSize -= this._n, this.AN = null);
                }, n.getTextureHandle = function() {
                    var _$t = this.AN;
                    return _$t ? _$t.nM ? _$t.nM : _$t.dM ? _$t.dM : 0 : 0;
                }, n.resize = function(t1, n) {
                    var _$r = LZ.instance, _$h = this.Ns;
                    if (_$h.width !== t1 || _$h.height !== n) {
                        _$h.levelCount === i.getLevelCount(_$h.width, _$h.height) ? _$h.levelCount = i.getLevelCount(t1, n) : _$h.levelCount > 1 && (_$h.levelCount = Math.min(_$h.levelCount, i.getLevelCount(t1, n)));
                        var e = this._n;
                        _$h.width = t1, _$h.height = n, this._n = Vd(_$h.format, this.width, this.height, this.depth, _$h.levelCount) * _$h.layerCount;
                        var u = this.AN;
                        !this.Us && u && (u.ZR = t1, u.tM = n, u.UR = this._n, u.gM || (yZ(_$r, u), _$r.memoryStatus.textureSize -= e, _$r.memoryStatus.textureSize += this._n));
                    }
                }, n.initAsSwapchainTexture = function(t1) {
                    var _$i = new Yl;
                    _$i.format = t1.format, _$i.usage = Fd[t1.format].hasDepth ? 32 : 16, _$i.width = t1.width, _$i.height = t1.height, this.initialize(_$i, !0);
                }, s(i, [
                    {
                        key: "gpuTexture",
                        get: function get() {
                            return this.AN;
                        }
                    },
                    {
                        key: "lodLevel",
                        get: function get() {
                            return this.EN;
                        }
                    }
                ]), i;
            }(gw), i0 = "webglcontextlost";
            function n0(t1) {
                t1.activeTexture(33984), t1.pixelStorei(3333, 1), t1.pixelStorei(3317, 1), t1.pixelStorei(37440, !1), t1.bindFramebuffer(36160, null), t1.enable(3089), t1.enable(2884), t1.cullFace(1029), t1.frontFace(2305), t1.disable(32823), t1.polygonOffset(0, 0), t1.enable(2929), t1.depthMask(!0), t1.depthFunc(513), t1.depthRange(0, 1), t1.stencilFuncSeparate(1028, 519, 1, 65535), t1.stencilOpSeparate(1028, 7680, 7680, 7680), t1.stencilMaskSeparate(1028, 65535), t1.stencilFuncSeparate(1029, 519, 1, 65535), t1.stencilOpSeparate(1029, 7680, 7680, 7680), t1.stencilMaskSeparate(1029, 65535), t1.disable(2960), t1.disable(32926), t1.disable(3042), t1.blendEquationSeparate(32774, 32774), t1.blendFuncSeparate(1, 0, 1, 0), t1.colorMask(!0, !0, !0, !0), t1.blendColor(0, 0, 0, 0);
            }
            function s0(t1, i) {
                for(var n = [
                    "",
                    "WEBKIT_",
                    "MOZ_"
                ], s = 0; s < n.length; ++s){
                    var _$r = t1.getExtension(n[s] + i);
                    if (_$r) return _$r;
                }
                return null;
            }
            function r0(t1) {
                var i = {
                    MN: s0(t1, "EXT_texture_filter_anisotropic"),
                    CN: s0(t1, "EXT_blend_minmax"),
                    NN: s0(t1, "EXT_frag_depth"),
                    PN: s0(t1, "EXT_shader_texture_lod"),
                    DN: s0(t1, "EXT_sRGB"),
                    GR: s0(t1, "OES_vertex_array_object"),
                    LN: s0(t1, "EXT_color_buffer_half_float"),
                    BN: s0(t1, "WEBGL_color_buffer_float"),
                    FN: s0(t1, "WEBGL_compressed_texture_etc1"),
                    UN: s0(t1, "WEBGL_compressed_texture_etc"),
                    xN: s0(t1, "WEBGL_compressed_texture_pvrtc"),
                    jN: s0(t1, "WEBGL_compressed_texture_s3tc"),
                    GN: s0(t1, "WEBGL_compressed_texture_s3tc_srgb"),
                    HN: s0(t1, "WEBGL_debug_shaders"),
                    mM: s0(t1, "WEBGL_draw_buffers"),
                    VN: s0(t1, "WEBGL_lose_context"),
                    iM: s0(t1, "WEBGL_depth_texture"),
                    WN: s0(t1, "OES_texture_half_float"),
                    zN: s0(t1, "OES_texture_half_float_linear"),
                    $N: s0(t1, "OES_texture_float"),
                    XN: s0(t1, "OES_texture_float_linear"),
                    qN: s0(t1, "OES_standard_derivatives"),
                    YN: s0(t1, "OES_element_index_uint"),
                    lC: s0(t1, "ANGLE_instanced_arrays"),
                    KN: s0(t1, "WEBGL_debug_renderer_info"),
                    yC: null,
                    JN: null,
                    OM: !0,
                    RC: !1,
                    VM: function VM(t1) {
                        return !!t1;
                    },
                    xR: !1
                };
                return le.os === ue.IOS && 14 === le.osMainVersion && le.isBrowser || (i.JN = s0(t1, "WEBGL_compressed_texture_astc")), le.os !== ue.ANDROID && le.os !== ue.IOS && (i.yC = s0(t1, "WEBGL_multi_draw")), le.browserType === re.UC && (i.lC = null), le.os === ue.IOS && le.osMainVersion <= 10 && (i.OM = !1), i.GR && (i.xR = !0), i;
            }
            function h0(t1) {
                var i = null;
                try {
                    var n = {
                        alpha: Ti.ENABLE_TRANSPARENT_CANVAS,
                        antialias: Ti.ENABLE_WEBGL_ANTIALIAS,
                        depth: !0,
                        stencil: !0,
                        premultipliedAlpha: !1,
                        preserveDrawingBuffer: !1,
                        powerPreference: "default",
                        failIfMajorPerformanceCaveat: !1
                    };
                    i = t1.getContext("webgl", n);
                } catch (t1) {
                    return null;
                }
                return i;
            }
            var e0 = function(t1) {
                function i() {
                    var _$i;
                    return (_$i = t1.call(this) || this).QN = new ZZ, _$i.ZN = null, _$i.tP = null, _$i.Hs = null, _$i.iP = null, _$i.nP = null, _$i.sP = null, _$i;
                }
                h(i, t1);
                var n = i.prototype;
                return n.initialize = function(t1) {
                    this.Hs = t1.windowHandle, this.iP = this.rP.bind(this), this.Hs.addEventListener(i0, this.iP);
                    var n = LZ.instance, _$s = n.gl, _$r = n.capabilities;
                    this.QN.Ch(_$r.maxTextureUnits, _$r.maxVertexAttributes), this.nP = r0(_$s), n0(_$s);
                    var _$h = 55, e = _$s.getParameter(3414), u = _$s.getParameter(3415);
                    e && u ? _$h = 55 : e && (_$h = 54), this.qn = new t0, this.qn.initAsSwapchainTexture({
                        swapchain: this,
                        format: 35,
                        width: t1.width,
                        height: t1.height
                    }), this.Yn = new t0, this.Yn.initAsSwapchainTexture({
                        swapchain: this,
                        format: _$h,
                        width: t1.width,
                        height: t1.height
                    }), this.ZN = n.createTexture(new Yl(1, 4, 35, 2, 2, 1)), this.tP = n.createTexture(new Yl(3, 4, 35, 2, 2, 1, 6));
                    var o = new Fl;
                    o.texExtent.width = 2, o.texExtent.height = 2;
                    var f = new Uint8Array(this.ZN.size);
                    f.fill(0), n.copyBuffersToTexture([
                        f
                    ], this.ZN, [
                        o
                    ]), o.texSubres.layerCount = 6, n.copyBuffersToTexture([
                        f,
                        f,
                        f,
                        f,
                        f,
                        f
                    ], this.tP, [
                        o
                    ]), this.sP = new UZ;
                }, n.destroy = function() {
                    this.Hs && this.iP && (this.Hs.removeEventListener(i0, this.iP), this.iP = null), this.ZN && (this.ZN.destroy(), this.ZN = null), this.tP && (this.tP.destroy(), this.tP = null), this.sP && (this.sP.Qw(), this.sP = null), this.nP = null, this.Hs = null;
                }, n.resize = function(t1, i) {
                    this.qn.width === t1 && this.qn.height === i || (X("Resizing swapchain: " + t1 + "x" + i), this.Hs.width = t1, this.Hs.height = i, this.qn.resize(t1, i), this.Yn.resize(t1, i));
                }, n.rP = function(t1) {
                    nt(11e3), W(t1);
                }, s(i, [
                    {
                        key: "extensions",
                        get: function get() {
                            return this.nP;
                        }
                    },
                    {
                        key: "blitManager",
                        get: function get() {
                            return this.sP;
                        }
                    }
                ]), i;
            }(tw);
            function u0(t1, i, n) {
                for(var s = 0; s < i.length; ++s)t1[i[s]] = n;
            }
            function o0(t1, i, n) {
                for(var s = 0; s < i.length; ++s)t1[i[s]] |= n;
            }
            function f0(t1, i, n) {
                for(var s = 0; s < i.length; ++s)t1[i[s]] = n;
            }
            A.WebGLDevice = t1("e9", function(t1) {
                function i() {
                    var _$i;
                    return (_$i = t1.call(this) || this).Vs = null, _$i.zr = null, _$i.hP = null, _$i.eP = Array(117), _$i;
                }
                h(i, t1);
                var n = i.prototype;
                return n.initialize = function(t1) {
                    LZ.CC(this), this.On = 6;
                    var _$i = this.Ln = t1.bindingMappingInfo, n = [], _$s = [], _$r = _$i.setIndices[0];
                    n[_$r] = 0, _$s[_$r] = 0;
                    for(var _$h = 1; _$h < _$i.setIndices.length; ++_$h){
                        var e = _$i.setIndices[_$h], u = _$i.setIndices[_$h - 1];
                        n[e] = _$i.maxBlockCounts[u] + n[u], _$s[e] = _$i.maxSamplerTextureCounts[u] + _$s[u];
                    }
                    for(var o = 0; o < _$i.setIndices.length; ++o){
                        var f = _$i.setIndices[o];
                        _$s[f] -= _$i.maxBlockCounts[f];
                    }
                    this.hP = {
                        oN: n,
                        $M: _$s,
                        zM: _$i.setIndices[_$i.setIndices.length - 1]
                    };
                    var _$c = this.zr = h0(Qd.Gn);
                    if (!_$c) return rt(16333), !1;
                    this.An = this.createQueue(new Sd(0)), this.Nn = this.createCommandBuffer(new Td(this.An));
                    var a = _$c.getParameter.bind(_$c), v = this.Dn;
                    v.maxVertexAttributes = a(34921), v.maxVertexUniformVectors = a(36347), v.maxFragmentUniformVectors = a(36349), v.maxTextureUnits = a(34930), v.maxVertexTextureUnits = a(35660), v.maxTextureSize = a(3379), v.maxCubeMapTextureSize = a(34076), v.maxArrayTextureLayers = 0, v.max3DTextureSize = 0, v.maxUniformBufferBindings = 16;
                    var l = _$c.getSupportedExtensions(), _$d = "";
                    l && l.forEach(function(t1) {
                        _$d += t1 + " ";
                    });
                    var w = r0(_$c);
                    w.KN ? (this.In = a(w.KN.UNMASKED_RENDERER_WEBGL), this.Rn = a(w.KN.UNMASKED_VENDOR_WEBGL)) : (this.In = a(7937), this.Rn = a(7936));
                    var g = a(7938), p = this.Mn;
                    p.fill(!1), this.uP(w), w.CN && (p[3] = !0), w.YN && (p[0] = !0), w.lC && (p[1] = !0), w.mM && (p[2] = !0);
                    var _$y = "";
                    return this.getFormatFeatures(72) && (_$y += "etc1 "), this.getFormatFeatures(73) && (_$y += "etc2 "), this.getFormatFeatures(56) && (_$y += "dxt "), this.getFormatFeatures(83) && (_$y += "pvrtc "), this.getFormatFeatures(89) && (_$y += "astc "), X("WebGL device initialized."), X("RENDERER: " + this.In), X("VENDOR: " + this.Rn), X("VERSION: " + g), X("COMPRESSED_FORMAT: " + _$y), X("EXTENSIONS: " + _$d), !0;
                }, n.destroy = function() {
                    this.An && (this.An.destroy(), this.An = null), this.Nn && (this.Nn.destroy(), this.Nn = null), this.Vs = null;
                }, n.flushCommands = function() {}, n.acquire = function() {}, n.present = function() {
                    var _$t = this.An;
                    this.En = _$t.pN, this.Tn = _$t.yN, this.Sn = _$t._N, _$t.Ty();
                }, n.uP = function(t1) {
                    var _$i = this.Cn;
                    _$i.fill(0);
                    var n = this.eP;
                    n.fill(!0), u0(_$i, [
                        24,
                        47,
                        35,
                        50,
                        49
                    ], 7), u0(_$i, [
                        54,
                        55
                    ], 1), f0(n, [
                        47,
                        50,
                        49,
                        54,
                        55
                    ], !1), o0(_$i, [
                        7,
                        17,
                        28,
                        40,
                        6,
                        16,
                        27,
                        39,
                        7,
                        17,
                        28,
                        40,
                        6,
                        16,
                        27,
                        39,
                        11,
                        21,
                        32,
                        44
                    ], 16), t1.DN && (_$i[25] = 7, _$i[37] = 7, n[37] = !1), t1.iM && (_$i[54] |= 7, _$i[55] |= 7), t1.BN && (_$i[32] |= 1, _$i[44] |= 1, n[32] = !1, n[44] = !1), t1.LN && (_$i[29] |= 1, _$i[41] |= 1, n[29] = !1, n[41] = !1), t1.$N && (_$i[32] |= 3, _$i[44] |= 3), t1.WN && (_$i[29] |= 3, _$i[41] |= 3), t1.XN && (_$i[32] |= 4, _$i[44] |= 4), t1.zN && (_$i[29] |= 4, _$i[41] |= 4), t1.FN && (_$i[72] = 6), t1.UN && u0(_$i, [
                        73,
                        77,
                        74,
                        78,
                        75,
                        76
                    ], 6), t1.jN && u0(_$i, [
                        56,
                        57,
                        58,
                        59,
                        60,
                        61,
                        62,
                        63
                    ], 6), t1.xN && o0(_$i, [
                        83,
                        84,
                        85,
                        86
                    ], 6), t1.JN && o0(_$i, [
                        89,
                        90,
                        91,
                        92,
                        93,
                        94,
                        95,
                        96,
                        97,
                        98,
                        99,
                        100,
                        101,
                        102,
                        103,
                        104,
                        105,
                        106,
                        107,
                        108,
                        109,
                        110,
                        111,
                        112,
                        113,
                        114,
                        115,
                        116
                    ], 6);
                }, n.createCommandBuffer = function(t1) {
                    var _$i = new (0 === t1.type ? XZ : jZ);
                    return _$i.initialize(t1), _$i;
                }, n.createSwapchain = function(t1) {
                    var _$i = new e0;
                    return this.Vs = _$i, _$i.initialize(t1), _$i;
                }, n.createBuffer = function(t1) {
                    var _$i = new xZ;
                    return _$i.initialize(t1), _$i;
                }, n.createTexture = function(t1) {
                    var _$i = new t0;
                    return _$i.initialize(t1), _$i;
                }, n.createDescriptorSet = function(t1) {
                    var _$i = new QQ;
                    return _$i.initialize(t1), _$i;
                }, n.createShader = function(t1) {
                    var _$i = new QZ;
                    return _$i.initialize(t1), _$i;
                }, n.createInputAssembler = function(t1) {
                    var _$i = new HZ;
                    return _$i.initialize(t1), _$i;
                }, n.createRenderPass = function(t1) {
                    var _$i = new YZ;
                    return _$i.initialize(t1), _$i;
                }, n.createFramebuffer = function(t1) {
                    var _$i = new GZ;
                    return _$i.initialize(t1), _$i;
                }, n.createDescriptorSetLayout = function(t1) {
                    var _$i = new VZ;
                    return _$i.initialize(t1), _$i;
                }, n.createPipelineLayout = function(t1) {
                    var _$i = new WZ;
                    return _$i.initialize(t1), _$i;
                }, n.createPipelineState = function(t1) {
                    var _$i = new $Z;
                    return _$i.initialize(t1), _$i;
                }, n.createQueue = function(t1) {
                    var _$i = new qZ;
                    return _$i.initialize(t1), _$i;
                }, n.getSampler = function(t1) {
                    var _$i = dw.computeHash(t1);
                    return this.Bn.has(_$i) || this.Bn.set(_$i, new JZ(t1, _$i)), this.Bn.get(_$i);
                }, n.getSwapchains = function() {
                    return [
                        this.Vs
                    ];
                }, n.getGeneralBarrier = function(t1) {
                    var _$i = pw.computeHash(t1);
                    return this.Fn.has(_$i) || this.Fn.set(_$i, new pw(t1, _$i)), this.Fn.get(_$i);
                }, n.getTextureBarrier = function(t1) {
                    var _$i = yw.computeHash(t1);
                    return this.Un.has(_$i) || this.Un.set(_$i, new yw(t1, _$i)), this.Un.get(_$i);
                }, n.getBufferBarrier = function(t1) {
                    var _$i = _w.computeHash(t1);
                    return this.xn.has(_$i) || this.xn.set(_$i, new _w(t1, _$i)), this.xn.get(_$i);
                }, n.copyBuffersToTexture = function(t1, i, n) {
                    NZ(this, t1, i.gpuTexture, n);
                }, n.copyTextureToBuffers = function(t1, i, n) {
                    PZ(this, t1.gpuTexture, i, n);
                }, n.copyTexImagesToTexture = function(t1, i, n) {
                    RZ(this, t1, i.gpuTexture, n);
                }, s(i, [
                    {
                        key: "gl",
                        get: function get() {
                            return this.zr;
                        }
                    },
                    {
                        key: "extensions",
                        get: function get() {
                            return this.Vs.extensions;
                        }
                    },
                    {
                        key: "stateCache",
                        get: function get() {
                            return this.Vs.QN;
                        }
                    },
                    {
                        key: "nullTex2D",
                        get: function get() {
                            return this.Vs.ZN;
                        }
                    },
                    {
                        key: "nullTexCube",
                        get: function get() {
                            return this.Vs.tP;
                        }
                    },
                    {
                        key: "textureExclusive",
                        get: function get() {
                            return this.eP;
                        }
                    },
                    {
                        key: "bindingMappings",
                        get: function get() {
                            return this.hP;
                        }
                    },
                    {
                        key: "blitManager",
                        get: function get() {
                            return this.Vs.blitManager;
                        }
                    }
                ]), i;
            }(Qd));
            var a0 = {
                BUTT: 0,
                ROUND: 1,
                SQUARE: 2
            };
            _i(a0);
            var v0 = {
                BEVEL: 0,
                ROUND: 1,
                MITER: 2
            };
            _i(v0), _i({
                PT_CORNER: 1,
                PT_LEFT: 2,
                PT_BEVEL: 4,
                PT_INNERBEVEL: 8
            });
            var l0 = Math.PI, d0 = Math.min, w0 = Math.max, g0 = Math.cos, p0 = Math.sin, y0 = Math.abs, _0 = Math.sign;
            function b0(t1, i, n, s, r, h, e) {
                var u, o, f = 0, _$c = 0, a = 0, v = 0, l = 0, _$d = 0, w = 0, g = 0, p = 0, _$y = 0, _$_ = 0, m = 0, b = 0, k = 0;
                if (_$c = h - r, e = e || !1) if (y0(_$c) >= 2 * l0) _$c = 2 * l0;
                else for(; _$c < 0;)_$c += 2 * l0;
                else if (y0(_$c) >= 2 * l0) _$c = -(2 * l0);
                else for(; _$c > 0;)_$c -= 2 * l0;
                for(o = 0 | w0(1, d0(y0(_$c) / (.5 * l0) + .5, 5)), a = y0(4 / 3 * (1 - g0(u = _$c / o / 2)) / p0(u)), e || (a = -a), k = 0; k <= o; k++)_$d = i + (v = g0(f = r + k / o * _$c)) * s, w = n + (l = p0(f)) * s, g = -l * s * a, p = v * s * a, 0 === k ? t1.oP(_$d, w) : t1.fP(_$y + m, _$_ + b, _$d - g, w - p, _$d, w), _$y = _$d, _$_ = w, m = g, b = p;
            }
            function k0(t1, i, n, s, r) {
                t1.oP(i - s, n), t1.fP(i - s, n + .5522847493 * r, i - .5522847493 * s, n + r, i, n + r), t1.fP(i + .5522847493 * s, n + r, i + s, n + .5522847493 * r, i + s, n), t1.fP(i + s, n - .5522847493 * r, i + .5522847493 * s, n - r, i, n - r), t1.fP(i - .5522847493 * s, n - r, i - s, n - .5522847493 * r, i - s, n), t1.cP();
            }
            function A0(t1, i, n, s, r, h) {
                if (h < .1) t1.vP(i, n, s, r);
                else {
                    var e = d0(h, .5 * y0(s)) * _0(s), u = d0(h, .5 * y0(r)) * _0(r);
                    t1.oP(i, n + u), t1.lP(i, n + r - u), t1.fP(i, n + r - 0.44771525069999996 * u, i + 0.44771525069999996 * e, n + r, i + e, n + r), t1.lP(i + s - e, n + r), t1.fP(i + s - 0.44771525069999996 * e, n + r, i + s, n + r - 0.44771525069999996 * u, i + s, n + r - u), t1.lP(i + s, n + u), t1.fP(i + s, n + 0.44771525069999996 * u, i + s - 0.44771525069999996 * e, n, i + s - e, n), t1.lP(i + e, n), t1.fP(i + 0.44771525069999996 * e, n, i, n + 0.44771525069999996 * u, i, n + u), t1.cP();
                }
            }
            function E0(t1, i, n, s, r, h, e, u, o, f, c) {
                var a, v, l, _$d, w, g, p, _$y, _$_, m, b, k, A, E, T, S;
                f > 10 || (w = .5 * (h + u), g = .5 * (e + o), p = .5 * ((a = .5 * (i + s)) + (l = .5 * (s + h))), _$y = .5 * ((v = .5 * (n + r)) + (_$d = .5 * (r + e))), ((T = y0((s - u) * (E = o - n) - (r - o) * (A = u - i))) + (S = y0((h - u) * E - (e - o) * A))) * (T + S) < t1.dP * (A * A + E * E) ? t1.wP(u, o, 0 === c ? 4 | c : c) : (E0(t1, i, n, a, v, p, _$y, b = .5 * (p + (_$_ = .5 * (l + w))), k = .5 * (_$y + (m = .5 * (_$d + g))), f + 1, 0), E0(t1, b, k, _$_, m, w, g, u, o, f + 1, c)));
            }
            var T0, S0, O0, I0, R0, C0, N0, P0, D0, L0, B0, F0, U0 = function(t1) {
                function i(i, n) {
                    var s;
                    return (s = t1.call(this, i, n) || this).dx = 0, s.dy = 0, s.dmx = 0, s.dmy = 0, s.flags = 0, s.len = 0, s;
                }
                return h(i, t1), i.prototype.reset = function() {
                    this.dx = 0, this.dy = 0, this.dmx = 0, this.dmy = 0, this.flags = 0, this.len = 0;
                }, i;
            }(Or), x0 = function() {
                function t1() {
                    this.closed = !1, this.bevel = 0, this.complex = !0, this.points = [];
                }
                return t1.prototype.reset = function() {
                    this.closed = !1, this.bevel = 0, this.complex = !0, this.points.length = 0;
                }, t1;
            }(), j0 = function() {
                function t1(t1) {
                    this.gP = 0, this.pP = !1, this.yP = 0, this._P = 0, this.mP = [], this.dP = .25, this.kP = .01, this.AP = Yr.WHITE.clone(), this.EP = 0, this.TP = Yr.BLACK.clone(), this.SP = 2, this.OP = 0, this.IP = 0, this.RP = 0, this.MP = 0, this.CP = [], this.NP = [], this.PP = null, this.DP = t1;
                }
                var i = t1.prototype;
                return i.oP = function(t1, i) {
                    this.pP && (this._P = this.yP, this.pP = !1), this.LP(), this.wP(t1, i, 1), this.RP = t1, this.MP = i;
                }, i.lP = function(t1, i) {
                    this.wP(t1, i, 1), this.RP = t1, this.MP = i;
                }, i.fP = function(t1, i, n, s, r, h) {
                    var e = this.PP, u = e.points[e.points.length - 1];
                    u && (u.x !== t1 || u.y !== i || n !== r || s !== h ? (E0(this, u.x, u.y, t1, i, n, s, r, h, 0, 1), this.RP = r, this.MP = h) : this.lP(r, h));
                }, i.BP = function(t1, i, n, s) {
                    var _$r = this.RP, h = this.MP;
                    this.fP(_$r + 2 / 3 * (t1 - _$r), h + 2 / 3 * (i - h), n + 2 / 3 * (t1 - n), s + 2 / 3 * (i - s), n, s);
                }, i.FP = function(t1, i, n, s, r, h) {
                    b0(this, t1, i, n, s, r, h);
                }, i.xP = function(t1, i, n, s) {
                    k0(this, t1, i, n, s), this.PP.complex = !1;
                }, i.jP = function(t1, i, n) {
                    k0(this, t1, i, n, n), this.PP.complex = !1;
                }, i.vP = function(t1, i, n, s) {
                    this.oP(t1, i), this.lP(t1 + n, i), this.lP(t1 + n, i + s), this.lP(t1, i + s), this.cP(), this.PP.complex = !1;
                }, i.GP = function(t1, i, n, s, r) {
                    A0(this, t1, i, n, s, r), this.PP.complex = !1;
                }, i.Ty = function() {
                    this.yP = 0, this._P = 0, this.IP = 0, this.gP = 0, this.PP = null, this.mP.length = 0, this.CP.length = 0;
                    for(var _$t = this.NP, i = 0, n = _$t.length; i < n; i++){
                        var s = _$t[i];
                        s && KL.remove(s);
                    }
                    this.NP.length = 0;
                }, i.cP = function() {
                    this.PP.closed = !0;
                }, i.HP = function() {
                    var _$t = KL.add();
                    return this.NP.push(_$t), _$t;
                }, i.VP = function() {
                    return 0 === this.NP.length && this.HP(), this.NP;
                }, i.wP = function(t1, i, n) {
                    var s = this.PP;
                    if (s) {
                        var _$r = this.CP, h = s.points, e = _$r[this.IP++];
                        e ? (e.x = t1, e.y = i) : (e = new U0(t1, i), _$r.push(e)), e.flags = n, h.push(e);
                    }
                }, i.LP = function() {
                    var _$t = this.yP, i = this.mP[_$t];
                    return i ? i.reset() : (i = new x0, this.mP.push(i)), this.yP++, this.PP = i, i;
                }, t1;
            }(), G0 = EL.concat([
                new ud("a_dist", 11)
            ]), H0 = RL(G0), V0 = ML(G0), W0 = t1("eb", (T0 = go("cc.Graphics"), S0 = yo(110), O0 = Zo(v0), I0 = Zo(a0), T0(R0 = S0(((F0 = function(t1) {
                function i() {
                    var _$i;
                    return (_$i = t1.call(this) || this).impl = null, _$i.model = null, _$i._lineWidth = C0 && C0(), _$i._strokeColor = N0 && N0(), _$i._lineJoin = P0 && P0(), _$i._lineCap = D0 && D0(), _$i._fillColor = L0 && L0(), _$i._miterLimit = B0 && B0(), _$i._isDrawing = !1, _$i._isNeedUploadData = !0, _$i.WP = [], _$i._instanceMaterialType = 0, _$i.impl = new j0(a(_$i)), _$i;
                }
                h(i, t1);
                var n = i.prototype;
                return n.onRestore = function() {
                    this.impl || this._flushAssembler();
                }, n.onLoad = function() {
                    t1.prototype.onLoad.call(this), this.model = PN.root.createModel(sC), this.model.node = this.model.transform = this.node, this._flushAssembler();
                }, n.onEnable = function() {
                    t1.prototype.onEnable.call(this), this.zP();
                }, n.onDestroy = function() {
                    this._sceneGetter = null, this.model && (PN.root.destroyModel(this.model), this.model = null);
                    var _$i = this.WP.length;
                    if (_$i > 0) {
                        for(var n = 0; n < _$i; ++n)this.WP[n].destroy();
                        this.WP.length = 0;
                    }
                    this.impl && (this._isDrawing = !1, this.impl.Ty(), this.impl = null), t1.prototype.onDestroy.call(this);
                }, n.moveTo = function(t1, i) {
                    this.impl && this.impl.oP(t1, i);
                }, n.lineTo = function(t1, i) {
                    this.impl && this.impl.lP(t1, i);
                }, n.bezierCurveTo = function(t1, i, n, s, r, h) {
                    this.impl && this.impl.fP(t1, i, n, s, r, h);
                }, n.quadraticCurveTo = function(t1, i, n, s) {
                    this.impl && this.impl.BP(t1, i, n, s);
                }, n.arc = function(t1, i, n, s, r, h) {
                    this.impl && this.impl.FP(t1, i, n, s, r, h);
                }, n.ellipse = function(t1, i, n, s) {
                    this.impl && this.impl.xP(t1, i, n, s);
                }, n.circle = function(t1, i, n) {
                    this.impl && this.impl.jP(t1, i, n);
                }, n.rect = function(t1, i, n, s) {
                    this.impl && this.impl.vP(t1, i, n, s);
                }, n.roundRect = function(t1, i, n, s, r) {
                    this.impl && this.impl.GP(t1, i, n, s, r);
                }, n.fillRect = function(t1, i, n, s) {
                    this.rect(t1, i, n, s), this.fill();
                }, n.clear = function() {
                    if (this.impl) {
                        if (this.impl.Ty(), this._isDrawing = !1, this.model) for(var _$t = 0; _$t < this.model.subModels.length; _$t++){
                            var _$i = this.model.subModels[_$t].inputAssembler;
                            _$i.indexCount = 0, _$i.vertexCount = 0;
                        }
                        this.po();
                    }
                }, n.close = function() {
                    this.impl && this.impl.cP();
                }, n.stroke = function() {
                    this._assembler || this._flushAssembler(), this._isDrawing = !0, this._isNeedUploadData = !0, this._assembler.stroke(this);
                }, n.fill = function() {
                    this._assembler || this._flushAssembler(), this._isDrawing = !0, this._isNeedUploadData = !0, this._assembler.fill(this);
                }, n.zP = function() {
                    var _$t;
                    this._customMaterial ? _$t = this.getMaterialInstance(0) : (_$t = Lk.get("ui-graphics-material"), this.setSharedMaterial(_$t, 0), (_$t = this.getMaterialInstance(0)).recompileShaders({
                        USE_LOCAL: !0
                    }));
                }, n.activeSubModel = function(t1) {
                    if (this.model) {
                        if (this.model.subModels.length <= t1) {
                            var _$i = kw.gfxDevice, _$r = new UA([
                                _$i.createBuffer(new Wl(10, 1, 65535 * V0, V0))
                            ], G0, 7, _$i.createBuffer(new Wl(6, 1, 262140, 2)));
                            _$r.subMeshIdx = 0, this.model.initSubModel(t1, _$r, this.getMaterialInstance(0)), this.WP.push(_$r);
                        }
                    } else nt(4500, this.node.name);
                }, n._uploadData = function() {
                    var _$t = this.impl;
                    if (_$t) {
                        var _$i = _$t && _$t.VP();
                        if (!(_$i.length <= 0) && this.model) {
                            for(var n = this.model.subModels, _$s = 0; _$s < _$i.length; _$s++){
                                var _$r = _$i[_$s], _$h = n[_$s].inputAssembler;
                                if (_$r.lastFilledVertex !== _$r.vertexStart) {
                                    var e = new Float32Array(_$r.vData.buffer, 0, _$r.vertexStart * H0);
                                    _$h.vertexBuffers[0].update(e), _$h.vertexCount = _$r.vertexStart;
                                    var u = new Uint16Array(_$r.iData.buffer, 0, _$r.indexStart);
                                    _$h.indexBuffer.update(u), _$h.indexCount = _$r.indexStart, _$r.lastFilledVertex = _$r.vertexStart, _$r.lastFilledIndex = _$r.indexStart;
                                }
                            }
                            this._isNeedUploadData = !1;
                        }
                    }
                }, n._render = function(t1) {
                    if (this._isNeedUploadData) {
                        if (this.impl) {
                            var _$i = this.impl.VP(), n = this.model.subModels.length;
                            if (_$i.length > n) for(var _$s = n; _$s < _$i.length; _$s++)this.activeSubModel(_$s);
                        }
                        this._uploadData();
                    }
                    t1.commitModel(this, this.model, this.getMaterialInstance(0));
                }, n._flushAssembler = function() {
                    var _$t = i.Assembler.getAssembler(this);
                    this._assembler !== _$t && (this._assembler = _$t);
                }, n._canRender = function() {
                    return !!t1.prototype._canRender.call(this) && !!this.model && this._isDrawing;
                }, n.updateRenderer = function() {
                    t1.prototype.updateRenderer.call(this);
                }, n.createRenderEntity = function() {
                    return new cB(1);
                }, s(i, [
                    {
                        key: "lineWidth",
                        get: function get() {
                            return this._lineWidth;
                        },
                        set: function set(t1) {
                            this._lineWidth = t1, this.impl && (this.impl.OP = t1);
                        }
                    },
                    {
                        key: "lineJoin",
                        get: function get() {
                            return this._lineJoin;
                        },
                        set: function set(t1) {
                            this._lineJoin = t1, this.impl && (this.impl.SP = t1);
                        }
                    },
                    {
                        key: "lineCap",
                        get: function get() {
                            return this._lineCap;
                        },
                        set: function set(t1) {
                            this._lineCap = t1, this.impl && (this.impl.EP = t1);
                        }
                    },
                    {
                        key: "strokeColor",
                        get: function get() {
                            return this._strokeColor;
                        },
                        set: function set(t1) {
                            this.impl && (this._strokeColor.set(t1), this.impl.TP = this._strokeColor);
                        }
                    },
                    {
                        key: "fillColor",
                        get: function get() {
                            return this._fillColor;
                        },
                        set: function set(t1) {
                            this.impl && (this._fillColor.set(t1), this.impl.AP = this._fillColor);
                        }
                    },
                    {
                        key: "miterLimit",
                        get: function get() {
                            return this._miterLimit;
                        },
                        set: function set(t1) {
                            this._miterLimit = t1;
                        }
                    },
                    {
                        key: "color",
                        get: function get() {
                            return this._color;
                        },
                        set: function set(t1) {
                            this._color !== t1 && this._color.set(t1);
                        }
                    },
                    {
                        key: "graphicsNativeProxy",
                        get: function get() {
                            return this._graphicsNativeProxy;
                        }
                    }
                ]), i;
            }(TB)).LineJoin = v0, F0.LineCap = a0, y(F0.prototype, "lineJoin", [
                O0
            ], Object.getOwnPropertyDescriptor(F0.prototype, "lineJoin"), F0.prototype), y(F0.prototype, "lineCap", [
                I0
            ], Object.getOwnPropertyDescriptor(F0.prototype, "lineCap"), F0.prototype), y(F0.prototype, "color", [
                ff
            ], Object.getOwnPropertyDescriptor(F0.prototype, "color"), F0.prototype), C0 = ho(F0.prototype, "_lineWidth", [
                Ro
            ], function() {
                return 1;
            }), N0 = ho(F0.prototype, "_strokeColor", [
                Ro
            ], function() {
                return Yr.BLACK.clone();
            }), P0 = ho(F0.prototype, "_lineJoin", [
                Ro
            ], function() {
                return 2;
            }), D0 = ho(F0.prototype, "_lineCap", [
                Ro
            ], function() {
                return 0;
            }), L0 = ho(F0.prototype, "_fillColor", [
                Ro
            ], function() {
                return Yr.WHITE.clone();
            }), B0 = ho(F0.prototype, "_miterLimit", [
                Ro
            ], function() {
                return 10;
            }), R0 = F0)) || R0) || R0));
            A.Graphics = W0;
            var z0 = function z0(t1, i, n) {
                this.$P = null, this.XP = null, this.qP = null, this.YP = null, this.KP = null, this.JP = !1, this.QP = t1, this.ZP = i, this.tD = n;
            };
            function $0(t1, i, n, s, r) {
                var h = 0, e = null;
                if (r === l1(t1, i, n, s) > 0) for(h = i; h < n; h += s)e = a1(h, t1[h], t1[h + 1], e);
                else for(h = n - s; h >= i; h -= s)e = a1(h, t1[h], t1[h + 1], e);
                return e && h11(e, e.XP) && (v1(e), e = e.XP), e;
            }
            function X0(t1, i) {
                if (void 0 === i && (i = null), !t1) return t1;
                i || (i = t1);
                var n = t1, s = !1;
                do if (s = !1, n.JP || !h11(n, n.XP) && 0 !== r1(n.$P, n, n.XP)) n = n.XP;
                else {
                    if (v1(n), (n = i = n.$P) === n.XP) return null;
                    s = !0;
                }
                while (s || n !== i);
                return i;
            }
            function q0(t1, i, n, s, r, h, e) {
                if (void 0 === e && (e = 0), t1) {
                    !e && h && Z0(t1, s, r, h);
                    for(var u = t1, o = null, f = null; t1.$P !== t1.XP;)if (o = t1.$P, f = t1.XP, h ? K0(t1, s, r, h) : Y0(t1)) i.push(o.QP / n), i.push(t1.QP / n), i.push(f.QP / n), v1(t1), t1 = f.XP, u = f.XP;
                    else if ((t1 = f) === u) {
                        e ? 1 === e ? q0(t1 = J0(t1, i, n), i, n, s, r, h, 2) : 2 === e && Q0(t1, i, n, s, r, h) : q0(X0(t1), i, n, s, r, h, 1);
                        break;
                    }
                }
            }
            function Y0(t1) {
                var i = t1.$P, s = t1.XP;
                if (r1(i, t1, s) >= 0) return !1;
                for(var _$r = t1.XP.XP; _$r !== t1.$P;){
                    if (n11(i.ZP, i.tD, t1.ZP, t1.tD, s.ZP, s.tD, _$r.ZP, _$r.tD) && r1(_$r.$P, _$r, _$r.XP) >= 0) return !1;
                    _$r = _$r.XP;
                }
                return !0;
            }
            function K0(t1, i, n, s) {
                var _$r = t1.$P, e = t1.XP;
                if (r1(_$r, t1, e) >= 0) return !1;
                for(var u = _$r.ZP < t1.ZP ? _$r.ZP < e.ZP ? _$r.ZP : e.ZP : t1.ZP < e.ZP ? t1.ZP : e.ZP, o = _$r.tD < t1.tD ? _$r.tD < e.tD ? _$r.tD : e.tD : t1.tD < e.tD ? t1.tD : e.tD, f = _$r.ZP > t1.ZP ? _$r.ZP > e.ZP ? _$r.ZP : e.ZP : t1.ZP > e.ZP ? t1.ZP : e.ZP, _$c = _$r.tD > t1.tD ? _$r.tD > e.tD ? _$r.tD : e.tD : t1.tD > e.tD ? t1.tD : e.tD, a = i14(u, o, i, n, s), v = i14(f, _$c, i, n, s), l = t1.KP; l && l.qP <= v;){
                    if (l !== t1.$P && l !== t1.XP && n11(_$r.ZP, _$r.tD, t1.ZP, t1.tD, e.ZP, e.tD, l.ZP, l.tD) && r1(l.$P, l, l.XP) >= 0) return !1;
                    l = l.KP;
                }
                for(l = t1.YP; l && l.qP >= a;){
                    if (l !== t1.$P && l !== t1.XP && n11(_$r.ZP, _$r.tD, t1.ZP, t1.tD, e.ZP, e.tD, l.ZP, l.tD) && r1(l.$P, l, l.XP) >= 0) return !1;
                    l = l.YP;
                }
                return !0;
            }
            function J0(t1, i, n) {
                var s = t1;
                do {
                    var _$r = s.$P, h = s.XP.XP;
                    !h11(_$r, h) && e11(_$r, s, s.XP, h) && o11(_$r, h) && o11(h, _$r) && (i.push(_$r.QP / n), i.push(s.QP / n), i.push(h.QP / n), v1(s), v1(s.XP), s = t1 = h), s = s.XP;
                }while (s !== t1);
                return s;
            }
            function Q0(t1, i, n, s, r, h) {
                var e = t1;
                do {
                    for(var u = e.XP.XP; u !== e.$P;){
                        if (e.QP !== u.QP && s11(e, u)) {
                            var o = c1(e, u);
                            return e = X0(e, e.XP), o = X0(o, o.XP), q0(e, i, n, s, r, h), void q0(o, i, n, s, r, h);
                        }
                        u = u.XP;
                    }
                    e = e.XP;
                }while (e !== t1);
            }
            function Z0(t1, i, n, s) {
                var _$r = t1;
                do null === _$r.qP && (_$r.qP = i14(_$r.ZP, _$r.tD, i, n, s)), _$r.YP = _$r.$P, _$r.KP = _$r.XP, _$r = _$r.XP;
                while (_$r !== t1);
                _$r.YP.KP = null, _$r.YP = null, t1110(_$r);
            }
            function t1110(t1) {
                var i = 0, n = null, s = null, _$r = null, h = null, e = 0, u = 0, o = 0, f = 1;
                do {
                    for(n = t1, t1 = null, h = null, e = 0; n;){
                        for(e++, s = n, u = 0, i = 0; i < f && (u++, s = s.KP); i++);
                        for(o = f; u > 0 || o > 0 && s;)0 === u ? (_$r = s, s = s.KP, o--) : 0 !== o && s ? n.qP <= s.qP ? (_$r = n, n = n.KP, u--) : (_$r = s, s = s.KP, o--) : (_$r = n, n = n.KP, u--), h ? h.KP = _$r : t1 = _$r, _$r.YP = h, h = _$r;
                        n = s;
                    }
                    h.KP = null, f *= 2;
                }while (e > 1);
                return t1;
            }
            function i14(t1, i, n, s, r) {
                return (t1 = 1431655765 & ((t1 = 858993459 & ((t1 = 252645135 & ((t1 = 16711935 & ((t1 = 32767 * (t1 - n) / r) | t1 << 8)) | t1 << 4)) | t1 << 2)) | t1 << 1)) | (i = 1431655765 & ((i = 858993459 & ((i = 252645135 & ((i = 16711935 & ((i = 32767 * (i - s) / r) | i << 8)) | i << 4)) | i << 2)) | i << 1)) << 1;
            }
            function n11(t1, i, n, s, r, h, e, u) {
                return (r - e) * (i - u) - (t1 - e) * (h - u) >= 0 && (t1 - e) * (s - u) - (n - e) * (i - u) >= 0 && (n - e) * (h - u) - (r - e) * (s - u) >= 0;
            }
            function s11(t1, i) {
                return t1.XP.QP !== i.QP && t1.$P.QP !== i.QP && !u11(t1, i) && o11(t1, i) && o11(i, t1) && f11(t1, i);
            }
            function r1(t1, i, n) {
                return (i.tD - t1.tD) * (n.ZP - i.ZP) - (i.ZP - t1.ZP) * (n.tD - i.tD);
            }
            function h11(t1, i) {
                return t1.ZP === i.ZP && t1.tD === i.tD;
            }
            function e11(t1, i, n, s) {
                return !!(h11(t1, i) && h11(n, s) || h11(t1, s) && h11(n, i)) || r1(t1, i, n) > 0 != r1(t1, i, s) > 0 && r1(n, s, t1) > 0 != r1(n, s, i) > 0;
            }
            function u11(t1, i) {
                var n = t1;
                do {
                    if (n.QP !== t1.QP && n.XP.QP !== t1.QP && n.QP !== i.QP && n.XP.QP !== i.QP && e11(n, n.XP, t1, i)) return !0;
                    n = n.XP;
                }while (n !== t1);
                return !1;
            }
            function o11(t1, i) {
                return 0 > r1(t1.$P, t1, t1.XP) ? r1(t1, i, t1.XP) >= 0 && r1(t1, t1.$P, i) >= 0 : 0 > r1(t1, i, t1.$P) || 0 > r1(t1, t1.XP, i);
            }
            function f11(t1, i) {
                var n = t1, s = !1, _$r = (t1.ZP + i.ZP) / 2, h = (t1.tD + i.tD) / 2;
                do n.tD > h != n.XP.tD > h && _$r < (n.XP.ZP - n.ZP) * (h - n.tD) / (n.XP.tD - n.tD) + n.ZP && (s = !s), n = n.XP;
                while (n !== t1);
                return s;
            }
            function c1(t1, i) {
                var n = new z0(t1.QP, t1.ZP, t1.tD), s = new z0(i.QP, i.ZP, i.tD), _$r = t1.XP, h = i.$P;
                return t1.XP = i, i.$P = t1, n.XP = _$r, _$r.$P = n, s.XP = n, n.$P = s, h.XP = s, s.$P = h, s;
            }
            function a1(t1, i, n, s) {
                var _$r = new z0(t1, i, n);
                return s ? (_$r.XP = s.XP, _$r.$P = s, s.XP.$P = _$r, s.XP = _$r) : (_$r.$P = _$r, _$r.XP = _$r), _$r;
            }
            function v1(t1) {
                t1.XP.$P = t1.$P, t1.$P.XP = t1.XP, t1.YP && (t1.YP.KP = t1.KP), t1.KP && (t1.KP.YP = t1.YP);
            }
            function l1(t1, i, n, s) {
                for(var _$r = 0, h = i, e = n - s; h < n; h += s)_$r += (t1[e] - t1[h]) * (t1[h + 1] + t1[e + 1]), e = h;
                return _$r;
            }
            function d1(t1, i, n) {
                n = n || 3;
                var s = t1.length, _$r = $0(t1, 0, s, n, !0), h = [];
                if (!_$r) return h;
                var e = 0, u = 0, o = 0, f = 0, _$c = 0, a = 0, v = 0;
                if (t1.length > 80 * n) {
                    e = o = t1[0], u = f = t1[1];
                    for(var l = n; l < s; l += n)(_$c = t1[l]) < e && (e = _$c), (a = t1[l + 1]) < u && (u = a), _$c > o && (o = _$c), a > f && (f = a);
                    v = Math.max(o - e, f - u);
                }
                return q0(_$r, h, n, e, u, v), h;
            }
            for(var w1 = Math.PI, g1 = Math.min, p1 = Math.max, y1 = Math.ceil, _1 = Math.acos, m1 = Math.cos, b1 = Math.sin, k1 = Math.atan2, A1 = null, E1 = null, T1 = new Yr, S1 = [], O1 = 0; O1 < 4; O1++)S1.push(new Ss);
            function I1(t1, i, n) {
                return p1(2, y1(i / (2 * _1(t1 / (t1 + n)))));
            }
            var C1 = new (function() {
                function t1() {}
                var i = t1.prototype;
                return i.updateRenderData = function() {}, i.iD = function(t1, i) {
                    if (!E1) return null;
                    var n = E1.VP(), s = n[E1.gP];
                    if (!s) return null;
                    var _$r = s, h = _$r ? _$r.vertexStart + i : 0;
                    return (h > 65535 || 3 * h > 131070) && (++E1.gP, E1.gP < n.length ? s = n[E1.gP] : (s = E1.HP(), n[E1.gP] = s), _$r = s), _$r && _$r.vertexCount < h && _$r.request(i, 3 * i), s;
                }, i.stroke = function(t1) {
                    Yr.copy(T1, t1.strokeColor), t1.impl && (this.nD(t1.impl), this.sD(t1), t1.impl.pP = !0, this.end(t1));
                }, i.fill = function(t1) {
                    Yr.copy(T1, t1.fillColor), this.rD(t1), t1.impl && (t1.impl.pP = !0), this.end(t1);
                }, i.end = function(t1) {
                    t1.po();
                }, i.sD = function(t1) {
                    var i = .5 * t1.lineWidth, n = t1.lineCap, s = t1.lineJoin, _$r = t1.miterLimit;
                    if (E1 = t1.impl) {
                        var h = I1(i, w1, E1.dP);
                        this.hD(E1, i, s, _$r);
                        for(var e = E1.mP, u = 0, o = E1._P, f = E1.yP; o < f; o++){
                            var _$c = e[o], a = _$c.points.length;
                            u += 1 === s ? 2 * (a + _$c.bevel * (h + 2) + 1) : 2 * (a + 5 * _$c.bevel + 1), _$c.closed || (u += 1 === n ? 2 * (2 * h + 2) : 12);
                        }
                        var v = A1 = this.iD(t1, u);
                        if (v) {
                            for(var l = v.vData, _$d = v.iData, w = E1._P, g = E1.yP; w < g; w++){
                                var p = e[w], _$y = p.points, _$_ = _$y.length, m = v.vertexStart, b = void 0, k = void 0, A = 0, E = 0, T = p.closed;
                                if (T ? (b = _$y[_$_ - 1], k = _$y[0], A = 0, E = _$_) : (b = _$y[0], k = _$y[1], A = 1, E = _$_ - 1), k = k || b, !T) {
                                    var S = new U0(k.x, k.y);
                                    S.subtract(b), S.normalize();
                                    var _$O = S.x, _$I = S.y;
                                    0 === n ? this.eD(b, _$O, _$I, i, 0) : 2 === n ? this.eD(b, _$O, _$I, i, i) : 1 === n && this.uD(b, _$O, _$I, i, h);
                                }
                                for(var _$R = A; _$R < E; ++_$R)1 === s ? this.oD(b, k, i, i, h) : 12 & k.flags ? this.fD(b, k, i, i) : (this.cD(k.x + k.dmx * i, k.y + k.dmy * i, 1), this.cD(k.x - k.dmx * i, k.y - k.dmy * i, -1)), b = k, k = _$y[_$R + 1];
                                if (T) {
                                    var _$M = 8 * m;
                                    this.cD(l[_$M], l[_$M + 1], 1), this.cD(l[_$M + 8], l[_$M + 8 + 1], -1);
                                } else {
                                    var _$C = new U0(k.x, k.y);
                                    _$C.subtract(b), _$C.normalize();
                                    var N = _$C.x, P = _$C.y;
                                    0 === n ? this.aD(k, N, P, i, 0) : 2 === n ? this.aD(k, N, P, i, i) : 1 === n && this.vD(k, N, P, i, h);
                                }
                                for(var D = v.indexStart, L = m + 2, B = v.vertexStart; L < B; L++)_$d[D++] = L - 2, _$d[D++] = L - 1, _$d[D++] = L;
                                v.indexStart = D;
                            }
                            A1 = null, E1 = null;
                        }
                    }
                }, i.rD = function(t1) {
                    if (E1 = t1.impl) {
                        for(var i = E1.mP, n = 0, s = E1._P, _$r = E1.yP; s < _$r; s++)n += i[s].points.length;
                        var h = A1 = this.iD(t1, n);
                        if (h) {
                            for(var u = h.vData, o = h.iData, f = E1._P, _$c = E1.yP; f < _$c; f++){
                                var a = i[f], v = a.points, l = v.length;
                                if (0 !== l) {
                                    for(var _$d = h.vertexStart, w = 0; w < l; ++w)this.cD(v[w].x, v[w].y);
                                    var g = h.indexStart;
                                    if (a.complex) {
                                        for(var p = [], _$y = _$d, _$_ = h.vertexStart; _$y < _$_; _$y++){
                                            var m = 8 * _$y;
                                            p.push(u[m++]), p.push(u[m++]), p.push(u[m++]);
                                        }
                                        var b = d1(p, 0, 3);
                                        if (!b || 0 === b.length) continue;
                                        for(var k = 0, A = b.length; k < A; k++)o[g++] = b[k] + _$d;
                                    } else for(var T = _$d + 2, S = h.vertexStart; T < S; T++)o[g++] = _$d, o[g++] = T - 1, o[g++] = T;
                                    h.indexStart = g;
                                }
                            }
                            A1 = null, E1 = null;
                        }
                    }
                }, i.hD = function(t1, i, n, s) {
                    var _$r = 0;
                    i > 0 && (_$r = 1 / i);
                    for(var h = t1.mP, e = t1._P, u = t1.yP; e < u; e++){
                        var o = h[e], f = o.points, _$c = f.length, a = f[_$c - 1], v = f[0];
                        o.bevel = 0;
                        for(var l = 0; l < _$c; l++){
                            var _$d, w, g = a.dy, p = -a.dx, _$y = v.dy, _$_ = -v.dx;
                            if (v.dmx = .5 * (g + _$y), v.dmy = .5 * (p + _$_), (_$d = v.dmx * v.dmx + v.dmy * v.dmy) > 1e-6) {
                                var m = 1 / _$d;
                                m > 600 && (m = 600), v.dmx *= m, v.dmy *= m;
                            }
                            v.dx * a.dy - a.dx * v.dy > 0 && (v.flags |= 2), _$d * (w = p1(11, g1(a.len, v.len) * _$r)) * w < 1 && (v.flags |= 8), 1 & v.flags && (_$d * s * s < 1 || 0 === n || 1 === n) && (v.flags |= 4), 12 & v.flags && o.bevel++, a = v, v = f[l + 1];
                        }
                    }
                }, i.nD = function(t1) {
                    for(var i = t1.mP, n = t1._P, s = t1.yP; n < s; n++){
                        var _$r = i[n], h = _$r.points, e = h[h.length - 1], u = h[0];
                        h.length > 2 && e.equals(u) && (_$r.closed = !0, h.pop(), e = h[h.length - 1]);
                        for(var o = 0, f = h.length; o < f; o++){
                            var _$c = new U0(u.x, u.y);
                            _$c.subtract(e), e.len = _$c.length(), (_$c.x || _$c.y) && _$c.normalize(), e.dx = _$c.x, e.dy = _$c.y, e = u, u = h[o + 1];
                        }
                    }
                }, i.lD = function(t1, i, n, s) {
                    var _$r = n.x, h = n.y, e = 0, u = 0, o = 0, f = 0;
                    return 0 !== t1 ? (e = _$r + i.dy * s, u = h - i.dx * s, o = _$r + n.dy * s, f = h - n.dx * s) : (e = o = _$r + n.dmx * s, u = f = h + n.dmy * s), [
                        e,
                        u,
                        o,
                        f
                    ];
                }, i.eD = function(t1, i, n, s, r) {
                    var h = t1.x - i * r, e = t1.y - n * r, o = -i;
                    this.cD(h + n * s, e + o * s, 1), this.cD(h - n * s, e - o * s, -1);
                }, i.aD = function(t1, i, n, s, r) {
                    var h = t1.x + i * r, e = t1.y + n * r, o = -i;
                    this.cD(h + n * s, e + o * s, 1), this.cD(h - n * s, e - o * s, -1);
                }, i.uD = function(t1, i, n, s, r) {
                    for(var h = t1.x, e = t1.y, o = -i, f = 0; f < r; f++){
                        var _$c = f / (r - 1) * w1, a = m1(_$c) * s, v = b1(_$c) * s;
                        this.cD(h - n * a - i * v, e - o * a - n * v, 1), this.cD(h, e, 0);
                    }
                    this.cD(h + n * s, e + o * s, 1), this.cD(h - n * s, e - o * s, -1);
                }, i.vD = function(t1, i, n, s, r) {
                    var h = t1.x, e = t1.y, o = -i;
                    this.cD(h + n * s, e + o * s, 1), this.cD(h - n * s, e - o * s, -1);
                    for(var f = 0; f < r; f++){
                        var _$c = f / (r - 1) * w1, a = m1(_$c) * s, v = b1(_$c) * s;
                        this.cD(h, e, 0), this.cD(h - n * a + i * v, e - o * a + n * v, 1);
                    }
                }, i.oD = function(t1, i, n, s, r) {
                    var h = t1.dy, e = -t1.dx, u = i.dy, o = -i.dx, f = i.x, _$c = i.y;
                    if (2 & i.flags) {
                        var t11, a = this.lD(8 & i.flags, t1, i, n), v = a[0], l = a[1], _$d = a[2], w = a[3], g = k1(-e, -h), p = k1(-o, -u);
                        p > g && (p -= 2 * w1), this.cD(v, l, 1), this.cD(f - h * s, i.y - e * s, -1);
                        for(var _$y = (t11 = y1((g - p) / w1) * r, t11 < 2 ? 2 : t11 > r ? r : t11), _$_ = 0; _$_ < _$y; _$_++){
                            var m = g + _$_ / (_$y - 1) * (p - g), b = f + m1(m) * s, k = _$c + b1(m) * s;
                            this.cD(f, _$c, 0), this.cD(b, k, -1);
                        }
                        this.cD(_$d, w, 1), this.cD(f - u * s, _$c - o * s, -1);
                    } else {
                        var t12, A = this.lD(8 & i.flags, t1, i, -s), E = A[0], T = A[1], S = A[2], _$O = A[3], _$I = k1(e, h), _$R = k1(o, u);
                        _$R < _$I && (_$R += 2 * w1), this.cD(f + h * s, _$c + e * s, 1), this.cD(E, T, -1);
                        for(var _$M = (t12 = y1((_$R - _$I) / w1) * r, t12 < 2 ? 2 : t12 > r ? r : t12), _$C = 0; _$C < _$M; _$C++){
                            var N = _$I + _$C / (_$M - 1) * (_$R - _$I), P = f + m1(N) * n, D = _$c + b1(N) * n;
                            this.cD(P, D, 1), this.cD(f, _$c, 0);
                        }
                        this.cD(f + u * s, _$c + o * s, 1), this.cD(S, _$O, -1);
                    }
                }, i.fD = function(t1, i, n, s) {
                    var _$r = 0, h = 0, e = 0, u = 0, o = 0, f = 0, _$c = 0, a = 0, v = t1.dy, l = -t1.dx, _$d = i.dy, w = -i.dx;
                    if (2 & i.flags) {
                        var g = this.lD(8 & i.flags, t1, i, n);
                        o = g[0], f = g[1], _$c = g[2], a = g[3], this.cD(o, f, 1), this.cD(i.x - v * s, i.y - l * s, -1), this.cD(_$c, a, 1), this.cD(i.x - _$d * s, i.y - w * s, -1);
                    } else {
                        var p = this.lD(8 & i.flags, t1, i, -s);
                        _$r = p[0], h = p[1], e = p[2], u = p[3], this.cD(i.x + v * n, i.y + l * n, 1), this.cD(_$r, h, -1), this.cD(i.x + _$d * n, i.y + w * n, 1), this.cD(e, u, -1);
                    }
                }, i.cD = function(t1, i, n) {
                    if (void 0 === n && (n = 0), A1) {
                        var s = A1, _$r = 8 * s.vertexStart, h = s.vData;
                        h[_$r++] = t1, h[_$r++] = i, h[_$r++] = 0, Yr.toArray(h, T1, _$r), _$r += 4, h[_$r++] = n, s.vertexStart++;
                    }
                }, t1;
            }()), N1 = t1("ea", {
                getAssembler: function getAssembler() {
                    return C1;
                }
            });
            function P1(t1, i, n, s) {
                var _$r = (s.x - n.x) * (t1.y - n.y) - (s.y - n.y) * (t1.x - n.x), h = (i.x - t1.x) * (t1.y - n.y) - (i.y - t1.y) * (t1.x - n.x), e = (s.y - n.y) * (i.x - t1.x) - (s.x - n.x) * (i.y - t1.y);
                if (0 !== e) {
                    var u = _$r / e, o = h / e;
                    if (u >= 0 && u <= 1 && o >= 0 && o <= 1) return !0;
                }
                return !1;
            }
            W0.Assembler = N1, A.UI.graphicsAssembler = N1;
            var D1 = new Or, L1 = new Or, B1 = new Or, F1 = new Or;
            function U1(t1, i, n) {
                for(var s = n.length, _$r = 0; _$r < s; ++_$r)if (P1(t1, i, n[_$r], n[(_$r + 1) % s])) return !0;
                return !1;
            }
            function x1(t1, i) {
                for(var n = !1, s = t1.x, _$r = t1.y, h = i.length, e = 0, u = h - 1; e < h; u = e++){
                    var o = i[e].x, f = i[e].y, _$c = i[u].x, a = i[u].y;
                    f > _$r != a > _$r && s < (_$c - o) * (_$r - f) / (a - f) + o && (n = !n);
                }
                return n;
            }
            function j1(t1, i, n, s) {
                var _$r, h = n.x - i.x, e = n.y - i.y, u = h * h + e * e, o = ((t1.x - i.x) * h + (t1.y - i.y) * e) / u;
                return _$r = s ? u ? o < 0 ? i : o > 1 ? n : D1.set(i.x + o * h, i.y + o * e) : i : D1.set(i.x + o * h, i.y + o * e), Math.sqrt((h = t1.x - _$r.x) * h + (e = t1.y - _$r.y) * e);
            }
            var G1, H1, V1, W1, $1, X1, q1, Y1, K1, J1 = t1("ec", function() {});
            J1.lineLine = P1, J1.lineRect = function(t1, i, n) {
                var s = D1.set(n.x, n.y), _$r = L1.set(n.x, n.yMax), h = B1.set(n.xMax, n.yMax), e = F1.set(n.xMax, n.y);
                return !!(P1(t1, i, s, _$r) || P1(t1, i, _$r, h) || P1(t1, i, h, e) || P1(t1, i, e, s));
            }, J1.linePolygon = U1, J1.rectRect = function(t1, i) {
                var n = t1.x, s = t1.y, _$r = t1.x + t1.width, h = t1.y + t1.height, e = i.x, u = i.y, o = i.x + i.width, f = i.y + i.height;
                return n <= o && _$r >= e && s <= f && h >= u;
            }, J1.rectPolygon = function(t1, i) {
                var n = D1.set(t1.x, t1.y), s = L1.set(t1.x, t1.yMax), _$r = B1.set(t1.xMax, t1.yMax), h = F1.set(t1.xMax, t1.y);
                if (U1(n, s, i) || U1(s, _$r, i) || U1(_$r, h, i) || U1(h, n, i)) return !0;
                for(var e = 0, u = i.length; e < u; ++e)if (t1.contains(i[e])) return !0;
                return !!(x1(n, i) || x1(s, i) || x1(_$r, i) || x1(h, i));
            }, J1.rectCircle = function(t1, i, n) {
                var s = i.x, _$r = i.y, h = t1.x, e = t1.y, u = t1.width, o = t1.height, f = s, _$c = _$r;
                s < h ? f = h : s > h + u && (f = h + u), _$r < e ? _$c = e : _$r > e + o && (_$c = e + o);
                var a = s - f, v = _$r - _$c;
                return Math.sqrt(a * a + v * v) <= n;
            }, J1.polygonPolygon = function(t1, i) {
                var n, s;
                for(n = 0, s = t1.length; n < s; ++n)if (U1(t1[n], t1[(n + 1) % s], i)) return !0;
                for(n = 0, s = i.length; n < s; ++n)if (x1(i[n], t1)) return !0;
                for(n = 0, s = t1.length; n < s; ++n)if (x1(t1[n], i)) return !0;
                return !1;
            }, J1.circleCircle = function(t1, i, n, s) {
                return Or.distance(t1, n) < i + s;
            }, J1.polygonCircle = function(t1, i, n) {
                if (x1(i, t1)) return !0;
                for(var _$r = 0, h = t1.length; _$r < h; _$r++)if (j1(i, 0 === _$r ? t1[t1.length - 1] : t1[_$r - 1], t1[_$r], !0) < n) return !0;
                return !1;
            }, J1.pointInPolygon = x1, J1.pointLineDistance = j1;
            var Q1 = new cr, Z1 = new Or, t2 = new cr, i21 = [];
            function n21(t1, i, n) {
                i21.length = 0;
                for(var s = 2 * Math.PI / n, _$r = 0; _$r < n; ++_$r)i21.push(new Ss(i.x * Math.cos(s * _$r) + t1.x, i.y * Math.sin(s * _$r) + t1.y, 0));
                return i21;
            }
            var s21 = t1("ed", {
                GRAPHICS_RECT: 0,
                GRAPHICS_ELLIPSE: 1,
                GRAPHICS_STENCIL: 2,
                SPRITE_STENCIL: 3
            });
            _i(s21);
            var r2 = t1("ee", (G1 = go("cc.Mask"), H1 = yo(110), V1 = Zo(s21), G1(W1 = H1(((K1 = function(t1) {
                function i() {
                    var _$i;
                    return (_$i = t1.call(this) || this)._type = $1 && $1(), _$i._inverted = X1 && X1(), _$i._segments = q1 && q1(), _$i._alphaThreshold = Y1 && Y1(), _$i._sprite = null, _$i._graphics = null, _$i._stencilStage = 0, _$i;
                }
                h(i, t1);
                var n = i.prototype;
                return n.onLoad = function() {
                    this.dD();
                }, n.onEnable = function() {
                    this.dD(), this._updateGraphics(), this._enableRender(), this.node.on("anchor-changed", this._nodeStateChange, this), this.node.on("size-changed", this._nodeStateChange, this);
                }, n.onRestore = function() {
                    this.dD(), this._updateGraphics();
                }, n.onDisable = function() {
                    this._disableRender(), this.node.off("anchor-changed", this._nodeStateChange, this), this.node.off("size-changed", this._nodeStateChange, this);
                }, n.onDestroy = function() {
                    this._removeMaskNode();
                }, n.isHit = function(t1) {
                    var _$i = this.node.io(), n = _$i.contentSize, _$s = n.width, _$r = n.height;
                    this.node.getWorldMatrix(Q1), cr.invert(t2, Q1), Or.transformMat4(Z1, t1, t2);
                    var e = _$i.anchorPoint;
                    Z1.x += e.x * _$s, Z1.y += e.y * _$r;
                    var u = !1;
                    if (0 === this.type || 2 === this.type || 3 === this.type) u = Z1.x >= 0 && Z1.y >= 0 && Z1.x <= _$s && Z1.y <= _$r;
                    else if (1 === this.type) {
                        var o = _$s / 2, f = _$r / 2, _$c = Z1.x - .5 * _$s, a = Z1.y - .5 * _$r;
                        u = _$c * _$c / (o * o) + a * a / (f * f) < 1;
                    }
                    return this._inverted && (u = !u), u;
                }, n._nodeStateChange = function() {
                    this._updateGraphics();
                }, n.dD = function() {
                    3 !== this._type ? this._createGraphics() : this._createSprite();
                }, n._createSprite = function() {
                    if (!this._sprite) {
                        var _$t = this._sprite = this.node.getComponent(xF);
                        if (!_$t) {
                            var _$i = this.node;
                            _$t = this._sprite = _$i.addComponent(xF);
                        }
                    }
                    this._sprite.stencilStage = this.inverted ? 6 : 2, this._sprite.updateMaterial();
                }, n._createGraphics = function() {
                    if (!this._graphics) {
                        var _$t = this._graphics = this.node.getComponent(W0);
                        if (!_$t) {
                            var _$i = this.node;
                            _$t = this._graphics = _$i.addComponent(W0);
                        }
                        _$t.lineWidth = 1;
                        var n = Yr.WHITE.clone();
                        n.a = 0, _$t.fillColor = n;
                    }
                    this._graphics.stencilStage = this.inverted ? 6 : 2;
                }, n._updateGraphics = function() {
                    if (this._graphics && (0 === this._type || 1 === this._type)) {
                        var _$t = this.node.io(), _$i = this._graphics;
                        _$i.clear();
                        var n = _$t.contentSize, _$s = n.width, _$r = n.height, _$h = _$t.anchorPoint, e = -_$s * _$h.x, u = -_$r * _$h.y;
                        if (0 === this._type) _$i.rect(e, u, _$s, _$r);
                        else if (1 === this._type) {
                            for(var o = n21(new Ss(e + _$s / 2, u + _$r / 2, 0), new Ss(_$s / 2, _$r / 2, 0), this._segments), f = 0; f < o.length; ++f){
                                var _$c = o[f];
                                0 === f ? _$i.moveTo(_$c.x, _$c.y) : _$i.lineTo(_$c.x, _$c.y);
                            }
                            _$i.close();
                        }
                        _$i.fill();
                    }
                }, n._enableRender = function() {
                    this.subComp && (this.subComp.enabled = !0);
                }, n._disableRender = function() {
                    this.subComp && (this.subComp.stencilStage = 0, this.subComp.updateMaterial(), this.node.activeInHierarchy && (this.subComp.enabled = !1));
                }, n._removeMaskNode = function() {
                    this._sprite && (this._sprite = null), this._graphics && (this._graphics = null);
                }, n.markForUpdateRenderData = function(t1) {
                    void 0 === t1 && (t1 = !0), nt(9007), this.subComp && this.subComp.po(t1);
                }, n.requestRenderData = function() {
                    nt(9007);
                }, n.destroyRenderData = function() {
                    nt(9007);
                }, n.updateRenderer = function() {
                    nt(9007), this.subComp && this.subComp.updateRenderer();
                }, n.fillBuffers = function() {
                    nt(9007);
                }, n.postUpdateAssembler = function() {
                    nt(9007);
                }, n.setNodeDirty = function() {
                    nt(9007), this.subComp && this.subComp.setNodeDirty();
                }, n.setTextureDirty = function() {
                    nt(9007), this.subComp && this.subComp.setTextureDirty();
                }, n.getMaterial = function(t1) {
                    return nt(9007), this.subComp ? this.subComp.getSharedMaterial(t1) : null;
                }, n.setMaterial = function(t1, i) {
                    nt(9007), this.subComp && this.subComp.setMaterial(t1, i);
                }, n.getMaterialInstance = function(t1) {
                    return nt(9007), this.subComp ? this.subComp.getMaterialInstance(t1) : null;
                }, n.setMaterialInstance = function(t1, i) {
                    nt(9007), this.subComp && this.subComp.setMaterialInstance(t1, i);
                }, n.getRenderMaterial = function(t1) {
                    return nt(9007), this.subComp ? this.subComp.getRenderMaterial(t1) : null;
                }, s(i, [
                    {
                        key: "type",
                        get: function get() {
                            return this._type;
                        },
                        set: function set(t1) {
                            this._type !== t1 && (this._type = t1, 3 !== this._type ? (this._sprite && (this.node.removeComponent(xF), this._sprite._destroyImmediate(), this._sprite = null), this.dD(), this._updateGraphics()) : (this._graphics && (this._graphics.clear(), this.node.removeComponent(W0), this._graphics._destroyImmediate(), this._graphics = null), this.dD()));
                        }
                    },
                    {
                        key: "inverted",
                        get: function get() {
                            return this._inverted;
                        },
                        set: function set(t1) {
                            this._inverted = t1, this.subComp.stencilStage = this.inverted ? 6 : 2;
                        }
                    },
                    {
                        key: "segments",
                        get: function get() {
                            return this._segments;
                        },
                        set: function set(t1) {
                            this._segments !== t1 && (this._segments = Un(t1, 3, 1e4), this._updateGraphics());
                        }
                    },
                    {
                        key: "spriteFrame",
                        get: function get() {
                            return this._sprite ? this._sprite.spriteFrame : null;
                        },
                        set: function set(t1) {
                            this._sprite ? this._sprite.spriteFrame = t1 : rt(16307);
                        }
                    },
                    {
                        key: "alphaThreshold",
                        get: function get() {
                            return this._alphaThreshold;
                        },
                        set: function set(t1) {
                            this._alphaThreshold !== t1 && (this._alphaThreshold = t1, 3 === this.type && this._sprite && this._sprite.getMaterialInstance(0).setProperty("alphaThreshold", this._alphaThreshold));
                        }
                    },
                    {
                        key: "subComp",
                        get: function get() {
                            return this._graphics || this._sprite;
                        }
                    },
                    {
                        key: "customMaterial",
                        get: function get() {
                            return nt(9007), this.subComp ? this.subComp.customMaterial : null;
                        },
                        set: function set(t1) {
                            nt(9007), this.subComp && (this.subComp.customMaterial = t1);
                        }
                    },
                    {
                        key: "color",
                        get: function get() {
                            return nt(9007), this.subComp ? this.subComp.color : null;
                        },
                        set: function set(t1) {
                            nt(9007), this.subComp && t1 && (this.subComp.color = t1);
                        }
                    },
                    {
                        key: "sharedMaterial",
                        get: function get() {
                            return nt(9007), this.subComp ? this.subComp.sharedMaterial : null;
                        }
                    },
                    {
                        key: "sharedMaterials",
                        get: function get() {
                            return nt(9007), this.subComp ? this.subComp.sharedMaterials : null;
                        },
                        set: function set(t1) {
                            nt(9007), this.subComp && t1 && (this.subComp.sharedMaterials = t1);
                        }
                    },
                    {
                        key: "material",
                        get: function get() {
                            return nt(9007), this.subComp ? this.subComp.material : null;
                        },
                        set: function set(t1) {
                            nt(9007), this.subComp && (this.subComp.material = t1);
                        }
                    },
                    {
                        key: "materials",
                        get: function get() {
                            return nt(9007), this.subComp ? this.subComp.materials : [
                                null
                            ];
                        },
                        set: function set(t1) {
                            nt(9007), this.subComp && (this.subComp.materials = t1);
                        }
                    }
                ]), i;
            }(Yg)).Type = s21, y(K1.prototype, "type", [
                V1
            ], Object.getOwnPropertyDescriptor(K1.prototype, "type"), K1.prototype), $1 = ho(K1.prototype, "_type", [
                Ro
            ], function() {
                return 0;
            }), X1 = ho(K1.prototype, "_inverted", [
                Ro
            ], function() {
                return !1;
            }), q1 = ho(K1.prototype, "_segments", [
                Ro
            ], function() {
                return 64;
            }), Y1 = ho(K1.prototype, "_alphaThreshold", [
                Ro
            ], function() {
                return .1;
            }), W1 = K1)) || W1) || W1));
            SE._maskComp = r2, A.Mask = r2;
            var h21 = gi({
                GRAVITY: 0,
                RADIUS: 1
            }), e21 = gi({
                FREE: 0,
                RELATIVE: 1,
                GROUPED: 2
            }), u21 = new Or, o2 = new Or, f2 = new Or, c2 = new Or, a2 = new Hr, v2 = RL(TL);
            function l2(t1) {
                for(var i = 0, n = t1; n;)i += n.eulerAngles.z, n = n.parent;
                return i;
            }
            var w2, g2, p2 = function p2() {
                this.pos = new Or(0, 0), this.startPos = new Or(0, 0), this.color = new Yr(0, 0, 0, 255), this.deltaColor = {
                    r: 0,
                    g: 0,
                    b: 0,
                    a: 255
                }, this.size = 0, this.deltaSize = 0, this.rotation = 0, this.deltaRotation = 0, this.timeToLive = 0, this.drawPos = new Or(0, 0), this.aspectRatio = 1, this.dir = new Or(0, 0), this.radialAccel = 0, this.tangentialAccel = 0, this.angle = 0, this.degreesPerSecond = 0, this.radius = 0, this.deltaRadius = 0;
            }, _2 = new (function(t1) {
                function i() {
                    return t1.apply(this, arguments) || this;
                }
                return h(i, t1), i.prototype.get = function() {
                    return this._get() || new p2;
                }, i;
            }(ii))(function(t1) {
                t1.pos.set(Or.ZERO), t1.startPos.set(Or.ZERO), t1.color.set(0, 0, 0, 255), t1.deltaColor.r = t1.deltaColor.g = t1.deltaColor.b = 0, t1.deltaColor.a = 255, t1.size = 0, t1.deltaSize = 0, t1.rotation = 0, t1.deltaRotation = 0, t1.timeToLive = 0, t1.drawPos.set(Or.ZERO), t1.aspectRatio = 1, t1.dir.set(Or.ZERO), t1.radialAccel = 0, t1.tangentialAccel = 0, t1.angle = 0, t1.degreesPerSecond = 0, t1.radius = 0, t1.deltaRadius = 0;
            }, 1024), m2 = function() {
                function t1(t1) {
                    this.particles = [], this.active = !1, this.uvFilled = 0, this.finished = !1, this.renderData = null, this.wD = !0, this.gD = 0, this.pD = 0, this.yD = 0, this._D = t1, this.particles = [], this.active = !1, this.wD = !0, this.finished = !1, this.gD = 0, this.pD = 0, this.uvFilled = 0, this.yD = 0;
                }
                var i = t1.prototype;
                return i.stop = function() {
                    this.active = !1, this.wD = !1, this.gD = this._D.duration, this.pD = 0;
                }, i.reset = function() {
                    this.active = !0, this.wD = !0, this.gD = 0, this.pD = 0, this.finished = !1;
                    for(var _$t = this.particles, i = 0; i < _$t.length; ++i)_2.put(_$t[i]);
                    _$t.length = 0, this.renderData && this.renderData.resize(0, 0);
                }, i.emitParticle = function(t1) {
                    var i = this._D, n = _2.get();
                    this.particles.push(n), n.timeToLive = i.life + i.lifeVar * (Vn() - .5) * 2;
                    var s = n.timeToLive = Math.max(0, n.timeToLive);
                    n.pos.x = i.sourcePos.x + i.posVar.x * (Vn() - .5) * 2, n.pos.y = i.sourcePos.y + i.posVar.y * (Vn() - .5) * 2;
                    var _$r, h, e, u, o = i.startColor, f = i.startColorVar, _$c = i.endColor, a = i.endColorVar;
                    n.color.r = _$r = Un(o.r + f.r * (Vn() - .5) * 2, 0, 255), n.color.g = h = Un(o.g + f.g * (Vn() - .5) * 2, 0, 255), n.color.b = e = Un(o.b + f.b * (Vn() - .5) * 2, 0, 255), n.color.a = u = Un(o.a + f.a * (Vn() - .5) * 2, 0, 255), n.deltaColor.r = (Un(_$c.r + a.r * (Vn() - .5) * 2, 0, 255) - _$r) / s, n.deltaColor.g = (Un(_$c.g + a.g * (Vn() - .5) * 2, 0, 255) - h) / s, n.deltaColor.b = (Un(_$c.b + a.b * (Vn() - .5) * 2, 0, 255) - e) / s, n.deltaColor.a = (Un(_$c.a + a.a * (Vn() - .5) * 2, 0, 255) - u) / s;
                    var v = i.startSize + i.startSizeVar * (Vn() - .5) * 2;
                    if (n.size = v = Math.max(0, v), -1 === i.endSize) n.deltaSize = 0;
                    else {
                        var l = i.endSize + i.endSizeVar * (Vn() - .5) * 2;
                        n.deltaSize = ((l = Math.max(0, l)) - v) / s;
                    }
                    var _$d = i.startSpin + i.startSpinVar * (Vn() - .5) * 2, w = i.endSpin + i.endSpinVar * (Vn() - .5) * 2;
                    n.rotation = _$d, n.deltaRotation = (w - _$d) / s, n.startPos.x = t1.x, n.startPos.y = t1.y, n.aspectRatio = i.aspectRatio || 1;
                    var g = Gn(i.angle + this.yD + i.angleVar * (Vn() - .5) * 2);
                    if (i.emitterMode === h21.GRAVITY) {
                        var p = i.speed + i.speedVar * (Vn() - .5) * 2;
                        n.dir.x = Math.cos(g), n.dir.y = Math.sin(g), n.dir.multiplyScalar(p), n.radialAccel = i.radialAccel + i.radialAccelVar * (Vn() - .5) * 2, n.tangentialAccel = i.tangentialAccel + i.tangentialAccelVar * (Vn() - .5) * 2, i.rotationIsDir && (n.rotation = -Hn(Math.atan2(n.dir.y, n.dir.x)));
                    } else {
                        var _$y = i.startRadius + i.startRadiusVar * (Vn() - .5) * 2, _$_ = i.endRadius + i.endRadiusVar * (Vn() - .5) * 2;
                        n.radius = _$y, n.deltaRadius = -1 === i.endRadius ? 0 : (_$_ - _$y) / s, n.angle = g, n.degreesPerSecond = Gn(i.rotatePerS + i.rotatePerSVar * (Vn() - .5) * 2);
                    }
                }, i.updateUVs = function(t1) {
                    var i = this.renderData;
                    if (i && this._D._renderSpriteFrame) {
                        for(var n = i.vData, s = this._D._renderSpriteFrame.uv, _$r = t1 ? 0 : this.uvFilled, h = this.particles.length, e = _$r; e < h; e++){
                            var u = e * v2 * 4;
                            n[u + 3] = s[0], n[u + 4] = s[1], n[u + 12] = s[2], n[u + 13] = s[3], n[u + 21] = s[4], n[u + 22] = s[5], n[u + 30] = s[6], n[u + 31] = s[7];
                        }
                        this.uvFilled = h;
                    }
                }, i.updateParticleBuffer = function(t1, i, n, s) {
                    var _$r = n.vData, h = i.x, e = i.y, u = t1.size, o = u, f = t1.aspectRatio;
                    f > 1 ? o = u / f : u = o * f;
                    var _$c = u / 2, a = o / 2;
                    if (t1.rotation) {
                        var v = -_$c, l = -a, g = -Gn(t1.rotation), p = Math.cos(g), _$y = Math.sin(g);
                        _$r[s] = v * p - l * _$y + h, _$r[s + 1] = v * _$y + l * p + e, _$r[s + 2] = 0, _$r[s + 9] = _$c * p - l * _$y + h, _$r[s + 10] = _$c * _$y + l * p + e, _$r[s + 11] = 0, _$r[s + 18] = v * p - a * _$y + h, _$r[s + 19] = v * _$y + a * p + e, _$r[s + 20] = 0, _$r[s + 27] = _$c * p - a * _$y + h, _$r[s + 28] = _$c * _$y + a * p + e, _$r[s + 29] = 0;
                    } else _$r[s] = h - _$c, _$r[s + 1] = e - a, _$r[s + 2] = 0, _$r[s + 9] = h + _$c, _$r[s + 10] = e - a, _$r[s + 11] = 0, _$r[s + 18] = h - _$c, _$r[s + 19] = e + a, _$r[s + 20] = 0, _$r[s + 27] = h + _$c, _$r[s + 28] = e + a, _$r[s + 29] = 0;
                    var _$_ = t1.color;
                    a2.x = _$_.r / 255, a2.y = _$_.g / 255, a2.z = _$_.b / 255, a2.w = _$_.a / 255, Hr.toArray(_$r, a2, s + 5), Hr.toArray(_$r, a2, s + 14), Hr.toArray(_$r, a2, s + 23), Hr.toArray(_$r, a2, s + 32);
                }, i.step = function(t1) {
                    var i = this._D.assembler, n = this._D, s = n.node, _$r = this.particles;
                    if (t1 = t1 > i.maxParticleDeltaTime ? i.maxParticleDeltaTime : t1, s.updateWorldTransform(), n.positionType === e21.FREE) {
                        this.yD = l2(s);
                        var h = s.worldMatrix;
                        u21.x = h.m12, u21.y = h.m13;
                    } else n.positionType === e21.RELATIVE ? (this.yD = s.eulerAngles.z, u21.x = s.position.x, u21.y = s.position.y) : this.yD = 0;
                    if (this.active && n.emissionRate) {
                        var e = 1 / n.emissionRate;
                        for(_$r.length < n.totalParticles && (this.pD += t1); _$r.length < n.totalParticles && this.pD > e;)this.emitParticle(u21), this.pD -= e;
                        this.gD += t1, -1 !== n.duration && n.duration < this.gD && n.stopSystem();
                    }
                    var u = this.renderData;
                    if (u) {
                        var o = _$r.length;
                        u.reset(), this.requestData(4 * o, 6 * o), o > this.uvFilled && this.updateUVs();
                        for(var f = 0; f < _$r.length;){
                            o2.x = o2.y = f2.x = f2.y = c2.x = c2.y = 0;
                            var _$c = _$r[f];
                            if (_$c.timeToLive -= t1, _$c.timeToLive > 0) {
                                if (n.emitterMode === h21.GRAVITY) {
                                    (_$c.pos.x || _$c.pos.y) && (o2.set(_$c.pos), o2.normalize()), f2.set(o2), o2.multiplyScalar(_$c.radialAccel);
                                    var _$d = f2.x;
                                    f2.x = -f2.y, f2.y = _$d, f2.multiplyScalar(_$c.tangentialAccel), c2.set(o2), c2.add(f2), c2.add(n.gravity), c2.multiplyScalar(t1), _$c.dir.add(c2), c2.set(_$c.dir), c2.multiplyScalar(t1), _$c.pos.add(c2);
                                } else _$c.angle += _$c.degreesPerSecond * t1, _$c.radius += _$c.deltaRadius * t1, _$c.pos.x = -Math.cos(_$c.angle) * _$c.radius, _$c.pos.y = -Math.sin(_$c.angle) * _$c.radius;
                                _$c.color.r += _$c.deltaColor.r * t1, _$c.color.g += _$c.deltaColor.g * t1, _$c.color.b += _$c.deltaColor.b * t1, _$c.color.a += _$c.deltaColor.a * t1, _$c.size += _$c.deltaSize * t1, _$c.size < 0 && (_$c.size = 0), _$c.rotation += _$c.deltaRotation * t1, o2.set(_$c.pos), n.positionType !== e21.GROUPED && o2.add(_$c.startPos);
                                var g = v2 * f * 4;
                                this.updateParticleBuffer(_$c, o2, u, g), ++f;
                            } else {
                                var p = _$r[f];
                                f !== _$r.length - 1 && (_$r[f] = _$r[_$r.length - 1]), _2.put(p), _$r.length--, u.resize(u.vertexCount - 4, u.indexCount - 6);
                            }
                        }
                        u.material = this._D.getRenderMaterial(0), u.frame = this._D._renderSpriteFrame, u.Jy(), 0 !== _$r.length || this.active || this.wD || (this.finished = !0, n._finishedSimulation());
                    }
                }, i.requestData = function(t1, i) {
                    if (this.renderData) {
                        var n = this.renderData.indexCount;
                        this.renderData.request(t1, i);
                        for(var s = this.renderData.indexCount / 6, _$r = this.renderData.iData, h = n; h < s; h++){
                            var e = 4 * h;
                            _$r[n++] = e, _$r[n++] = e + 1, _$r[n++] = e + 2, _$r[n++] = e + 1, _$r[n++] = e + 3, _$r[n++] = e + 2;
                        }
                    }
                }, i.initDrawInfo = function() {
                    var _$t;
                    null == (_$t = this.renderData) || _$t.Jy();
                }, t1;
            }(), k2 = t1("ej", go("cc.ParticleAsset")((g2 = ho((w2 = function(t1) {
                function i() {
                    for(var _$i, n = arguments.length, s = Array(n), _$r = 0; _$r < n; _$r++)s[_$r] = arguments[_$r];
                    return (_$i = t1.call.apply(t1, [
                        this
                    ].concat(s)) || this).spriteFrame = g2 && g2(), _$i;
                }
                return h(i, t1), i;
            }(sg)).prototype, "spriteFrame", [
                Ro
            ], function() {
                return null;
            }), w2)) || w2);
            A.ParticleAsset = k2;
            for(var A2 = function() {
                function t1(t1) {
                    var i = this;
                    this.mD = 8, this.kD = [], this.AD = [], this.ED = {
                        indexed: [],
                        rgb: [],
                        grayscale: 0
                    }, this.TD = {}, this.ZR = 0, this.tM = 0, this.SD = 0, this.OD = 0, this.RD = 0, this.MD = 0, this.CD = 0, this.ND = 0, this.PD = !1, this.DD = 0, this.LD = null;
                    for(var n, s = this.BD = t1, _$r = 0;;){
                        _$r = this.FD();
                        var h = (function() {
                            for(var _$t = [], n = 0; n < 4; ++n)_$t.push(String.fromCharCode(s[i.mD++]));
                            return _$t;
                        }).call(this).join("");
                        switch(h){
                            case "IHDR":
                                this.ZR = this.FD(), this.tM = this.FD(), this.SD = s[this.mD++], this.OD = s[this.mD++], this.RD = s[this.mD++], this.MD = s[this.mD++], this.CD = s[this.mD++];
                                break;
                            case "acTL":
                                this.UD = {
                                    numFrames: this.FD(),
                                    numPlays: this.FD() || 1 / 0,
                                    frames: []
                                };
                                break;
                            case "PLTE":
                                this.kD = this.xD(_$r);
                                break;
                            case "fcTL":
                                n && this.UD.frames.push(n), this.mD += 4, n = {
                                    width: this.FD(),
                                    height: this.FD(),
                                    xOffset: this.FD(),
                                    yOffset: this.FD(),
                                    delay: 0,
                                    disposeOp: 0,
                                    blendOp: 0,
                                    data: []
                                };
                                var e = this.jD(), u = this.jD() || 100;
                                n.delay = 1e3 * e / u, n.disposeOp = s[this.mD++], n.blendOp = s[this.mD++];
                                break;
                            case "IDAT":
                            case "fdAT":
                                "fdAT" === h && (this.mD += 4, _$r -= 4), t1 = (null != n ? n.data : void 0) || this.AD;
                                for(var o = 0; _$r >= 0 ? o < _$r : o > _$r; _$r >= 0 ? ++o : --o)t1.push(s[this.mD++]);
                                break;
                            case "tRNS":
                                switch(this.ED = {}, this.OD){
                                    case 3:
                                        this.ED.indexed = this.xD(_$r);
                                        var f = 255 - this.ED.indexed.length;
                                        if (f > 0) for(var _$c = 0; f >= 0 ? _$c < f : _$c > f; f >= 0 ? ++_$c : --_$c)this.ED.indexed.push(255);
                                        break;
                                    case 0:
                                        this.ED.grayscale = this.xD(_$r)[0];
                                        break;
                                    case 2:
                                        this.ED.rgb = this.xD(_$r);
                                }
                                break;
                            case "tEXt":
                                var a = this.xD(_$r), v = a.indexOf(0), l = String.fromCharCode.apply(String, a.slice(0, v));
                                this.TD[l] = String.fromCharCode.apply(String, a.slice(v + 1));
                                break;
                            case "IEND":
                                n && this.UD.frames.push(n), this.ND = (function() {
                                    switch(i.OD){
                                        case 0:
                                        case 3:
                                        case 4:
                                            return 1;
                                        case 2:
                                        case 6:
                                            return 3;
                                        default:
                                            return;
                                    }
                                }).call(this);
                                var _$d = this.OD;
                                this.PD = 4 === _$d || 6 === _$d;
                                var w = this.ND + +!!this.PD;
                                return this.DD = this.SD * w, this.GD = (function() {
                                    switch(i.ND){
                                        case 1:
                                            return "DeviceGray";
                                        case 3:
                                            return "DeviceRGB";
                                        default:
                                            return;
                                    }
                                }).call(this), void (_instanceof(this.AD, Uint8Array) || (this.AD = new Uint8Array(this.AD)));
                            default:
                                this.mD += _$r;
                        }
                        if (this.mD += 4, this.mD > s.length) throw Error(ot(6017));
                    }
                }
                var i = t1.prototype;
                return i.xD = function(t1) {
                    var i = 0, n = [];
                    for(i = 0; t1 >= 0 ? i < t1 : i > t1; t1 >= 0 ? ++i : --i)n.push(this.BD[this.mD++]);
                    return n;
                }, i.FD = function() {
                    var _$t = this.BD;
                    return _$t[this.mD++] << 24 | _$t[this.mD++] << 16 | _$t[this.mD++] << 8 | _$t[this.mD++];
                }, i.jD = function() {
                    return this.BD[this.mD++] << 8 | this.BD[this.mD++];
                }, i.HD = function(t1) {
                    if (null == t1 && (t1 = this.AD), 0 === t1.length) return new Uint8Array(0);
                    t1 = new kP.Inflate(t1, {
                        index: 0,
                        verify: !1
                    }).decompress();
                    for(var i = this.DD / 8, n = i * this.ZR, s = new Uint8Array(n * this.tM), _$r = t1.length, h = 0, e = 0, u = 0, o = 0, f = 0, _$c = 0, a = 0, v = 0, l = 0, _$d = 0, w = 0, g = 0, p = 0, _$y = 0, _$_ = 0, m = 0, b = 0, k = 0, A = 0; e < _$r;){
                        switch(t1[e++]){
                            case 0:
                                for(_$c = a = 0; a < n; _$c = a += 1)s[u++] = t1[e++];
                                break;
                            case 1:
                                for(_$c = v = 0; v < n; _$c = v += 1)o = t1[e++], g = _$c < i ? 0 : s[u - i], s[u++] = (o + g) % 256;
                                break;
                            case 2:
                                for(_$c = l = 0; l < n; _$c = l += 1)o = t1[e++], f = (_$c - _$c % i) / i, k = h && s[(h - 1) * n + f * i + _$c % i], s[u++] = (k + o) % 256;
                                break;
                            case 3:
                                for(_$c = _$d = 0; _$d < n; _$c = _$d += 1)o = t1[e++], f = (_$c - _$c % i) / i, g = _$c < i ? 0 : s[u - i], k = h && s[(h - 1) * n + f * i + _$c % i], s[u++] = (o + Math.floor((g + k) / 2)) % 256;
                                break;
                            case 4:
                                for(_$c = w = 0; w < n; _$c = w += 1)o = t1[e++], f = (_$c - _$c % i) / i, g = _$c < i ? 0 : s[u - i], 0 === h ? k = A = 0 : (k = s[(h - 1) * n + f * i + _$c % i], A = f && s[(h - 1) * n + (f - 1) * i + _$c % i]), _$y = Math.abs((p = g + k - A) - g), m = Math.abs(p - k), b = Math.abs(p - A), _$_ = _$y <= m && _$y <= b ? g : m <= b ? k : A, s[u++] = (o + _$_) % 256;
                                break;
                            default:
                                throw Error(ot(6018, t1[e - 1]));
                        }
                        h++;
                    }
                    return s;
                }, i.VD = function(t1, i) {
                    var n, s = this.PD, _$r = this.ND;
                    this.kD.length && (n = null != this.LD ? this.LD : this.LD = this.WD(), _$r = 4, s = !0);
                    var h = t1.data || t1, e = h.length, u = n || i, o = 0, f = 0, _$c = 0, a = 0;
                    if (1 === _$r) for(; o < e;)_$c = n ? 4 * i[o / 4] : f, a = u[_$c++], h[o++] = a, h[o++] = a, h[o++] = a, h[o++] = s ? u[_$c++] : 255, f = _$c;
                    else for(; o < e;)_$c = n ? 4 * i[o / 4] : f, h[o++] = u[_$c++], h[o++] = u[_$c++], h[o++] = u[_$c++], h[o++] = s ? u[_$c++] : 255, f = _$c;
                }, i.WD = function() {
                    for(var _$t = this.kD, i = this.ED.indexed || [], n = new Uint8Array((i.length || 0) + _$t.length), s = 0, _$r = 0, h = 0, e = 0, u = 0, o = _$t.length; u < o; e = u += 3)n[s++] = _$t[e], n[s++] = _$t[e + 1], n[s++] = _$t[e + 2], h = i[_$r++], n[s++] = null != h ? h : 255;
                    return n;
                }, i.zD = function(t1) {
                    t1.width = this.ZR, t1.height = this.tM;
                    var i = t1.getContext("2d");
                    if (i) {
                        var n = i.createImageData(this.ZR, this.tM);
                        this.VD(n, this.HD(null)), i.putImageData(n, 0, 0);
                    }
                }, t1;
            }(), E2 = function() {
                function t1() {
                    this.$D = !1, this.XD = [], this.qD = [], this.Hs = null;
                }
                var i = t1.prototype;
                return i.YD = function(t1) {
                    return this.XD[t1];
                }, i.KD = function(t1) {
                    return this.$D ? this.XD[t1 + 1] << 8 | this.XD[t1] : this.XD[t1] << 8 | this.XD[t1 + 1];
                }, i.JD = function(t1) {
                    var i = this.XD;
                    return this.$D ? i[t1 + 3] << 24 | i[t1 + 2] << 16 | i[t1 + 1] << 8 | i[t1] : i[t1] << 24 | i[t1 + 1] << 16 | i[t1 + 2] << 8 | i[t1 + 3];
                }, i.QD = function() {
                    var _$t = this.KD(0);
                    if (18761 === _$t) this.$D = !0;
                    else {
                        if (19789 !== _$t) throw console.log(_$t), TypeError(ot(6019));
                        this.$D = !1;
                    }
                    return this.$D;
                }, i.ZD = function() {
                    if (42 !== this.KD(2)) throw RangeError(ot(6020));
                    return !0;
                }, i.tL = function(t1) {
                    return t1 in S2 ? S2[t1] : null;
                }, i.iL = function(t1) {
                    return t1 in T2 ? T2[t1] : (Q(6021, t1), "Tag" + t1);
                }, i.nL = function(t1) {
                    return -1 !== [
                        "BYTE",
                        "ASCII",
                        "SBYTE",
                        "UNDEFINED"
                    ].indexOf(t1) ? 1 : -1 !== [
                        "SHORT",
                        "SSHORT"
                    ].indexOf(t1) ? 2 : -1 !== [
                        "LONG",
                        "SLONG",
                        "FLOAT"
                    ].indexOf(t1) ? 4 : 8 * (-1 !== [
                        "RATIONAL",
                        "SRATIONAL",
                        "DOUBLE"
                    ].indexOf(t1));
                }, i.sL = function(t1, i, n, s) {
                    var _$r = [], h = this.nL(i);
                    if (h * n <= 4) !1 === this.$D ? _$r.push(s >>> 8 * (4 - h)) : _$r.push(s);
                    else for(var e = 0; e < n; e++){
                        var u = h * e;
                        h >= 8 ? -1 !== [
                            "RATIONAL",
                            "SRATIONAL"
                        ].indexOf(i) ? (_$r.push(this.JD(s + u)), _$r.push(this.JD(s + u + 4))) : Q(8e3) : _$r.push(this.rL(h, s + u));
                    }
                    return "ASCII" === i && _$r.forEach(function(t1, i, n) {
                        n[i] = String.fromCharCode(t1);
                    }), _$r;
                }, i.rL = function(t1, i) {
                    if (t1 <= 0) Q(8001);
                    else {
                        if (t1 <= 1) return this.YD(i);
                        if (t1 <= 2) return this.KD(i);
                        if (t1 <= 3) return this.JD(i) >>> 8;
                        if (t1 <= 4) return this.JD(i);
                        Q(8002);
                    }
                    return 0;
                }, i.hL = function(t1, i, n) {
                    var s = i + Math.floor((n = n || 0) / 8), _$r = n + t1, e = 0, u = 0;
                    return _$r <= 0 ? Q(6023) : _$r <= 8 ? (e = 24 + n, u = this.YD(s)) : _$r <= 16 ? (e = 16 + n, u = this.KD(s)) : _$r <= 32 ? (e = n, u = this.JD(s)) : Q(6022), {
                        bits: u << e >>> 32 - t1,
                        byteOffset: s + Math.floor(_$r / 8),
                        bitOffset: _$r % 8
                    };
                }, i.eL = function(t1) {
                    var i = this.KD(t1), n = {}, s = 0, _$r = 0;
                    for(s = t1 + 2, _$r = 0; _$r < i; s += 12, _$r++){
                        var h = this.KD(s), e = this.KD(s + 2), u = this.JD(s + 4), o = this.JD(s + 8), f = this.iL(h), _$c = this.tL(e), a = this.sL(f, _$c, u, o);
                        n[f] = {
                            type: _$c,
                            values: a
                        };
                    }
                    this.qD.push(n);
                    var v = this.JD(s);
                    0 !== v && this.eL(v);
                }, i.uL = function(t1, i) {
                    var n = Math.pow(2, 8 - i);
                    return Math.floor(t1 * n + (n - 1));
                }, i.nA = function() {
                    this.$D = !1, this.XD = [], this.qD = [], this.Hs = null;
                }, i.oL = function(t1, i) {
                    var n = this;
                    if (i = i || S.document.createElement("canvas"), this.XD = t1, this.Hs = i, this.QD(), this.ZD()) {
                        var s = this.JD(4);
                        this.qD.length = 0, this.eL(s);
                        var _$r = this.qD[0], h = _$r.ImageWidth.values[0], e = _$r.ImageLength.values[0];
                        this.Hs.width = h, this.Hs.height = e;
                        var u = [], o = _$r.Compression ? _$r.Compression.values[0] : 1, f = _$r.SamplesPerPixel.values[0], _$c = [], a = 0, v = !1;
                        _$r.BitsPerSample.values.forEach(function(t1, i) {
                            _$c[i] = {
                                bitsPerSample: t1,
                                hasBytesPerSample: !1,
                                bytesPerSample: void 0
                            }, t1 % 8 == 0 && (_$c[i].hasBytesPerSample = !0, _$c[i].bytesPerSample = t1 / 8), a += t1;
                        }, this);
                        var l = 0;
                        a % 8 == 0 && (v = !0, l = a / 8);
                        var _$d, w = _$r.StripOffsets.values, g = w.length;
                        if (_$r.StripByteCounts) _$d = _$r.StripByteCounts.values;
                        else {
                            if (Q(8003), 1 !== g) throw Error(ot(6024));
                            _$d = [
                                Math.ceil(h * e * a / 8)
                            ];
                        }
                        for(var p = 1, _$y = 1, _$_ = 0; _$_ < g; _$_++){
                            var m = w[_$_];
                            u[_$_] = [];
                            for(var b = _$d[_$_], k = 0, A = 0, E = 1, T = !0, _$O = [], _$I = 0, _$R = 0, _$M = 0; k < b; k += E)switch(o){
                                case 1:
                                    _$O = [];
                                    for(var _$C = 0; _$C < f; _$C++){
                                        var N = _$c[_$C];
                                        if (!N.hasBytesPerSample) {
                                            var P = this.hL(N.bitsPerSample, m + k, A);
                                            throw _$O.push(P.bits), k = P.byteOffset - m, A = P.bitOffset, RangeError(ot(6025));
                                        }
                                        var D = N.bytesPerSample * _$C;
                                        _$O.push(this.rL(N.bytesPerSample, m + k + D));
                                    }
                                    if (u[_$_].push(_$O), !v) throw E = 0, RangeError(ot(6026));
                                    E = l;
                                    break;
                                case 2:
                                case 3:
                                case 4:
                                case 5:
                                case 6:
                                case 7:
                                    break;
                                case 32773:
                                    if (T) {
                                        T = !1;
                                        var L = this.YD(m + k);
                                        L >= 0 && L <= 127 ? p = L + 1 : L >= -127 && L <= -1 ? _$y = 1 - L : T = !0;
                                    } else {
                                        for(var B = this.YD(m + k), F = 0; F < _$y; F++){
                                            var U = _$c[_$R];
                                            if (!U.hasBytesPerSample) throw RangeError(ot(6025));
                                            _$M = _$M << 8 * _$I | B, ++_$I === U.bytesPerSample && (_$O.push(_$M), _$M = _$I = 0, _$R++), _$R === f && (u[_$_].push(_$O), _$O = [], _$R = 0);
                                        }
                                        0 == --p && (T = !0);
                                    }
                                    E = 1;
                            }
                        }
                        var x = this.Hs.getContext("2d");
                        if (x) {
                            x.fillStyle = "rgba(255, 255, 255, 0)";
                            var j = _$r.RowsPerStrip ? _$r.RowsPerStrip.values[0] : e, G = u.length, H = e % j, _$V = 0 === H ? j : H, _$W = j, _$z = 0, _$$ = _$r.PhotometricInterpretation.values[0], _$X = [], _$q = 0;
                            _$r.ExtraSamples && (_$q = (_$X = _$r.ExtraSamples.values).length);
                            var _$Y = [], _$K = 0;
                            _$r.ColorMap && (_$Y = _$r.ColorMap.values, _$K = Math.pow(2, _$c[0].bitsPerSample));
                            for(var J = 0; J < G; J++){
                                J + 1 === G && (_$W = _$V);
                                for(var Z = u[J].length, _$tt = _$z * J, it = 0, _$nt = 0; it < _$W && _$nt < Z; it++)for(var _$rt = 0; _$rt < h; _$rt++, _$nt++)!function st() {
                                    var _$t = u[J][_$nt], _$i = 0, s = 0, _$r = 0, h = 1;
                                    if (_$q > 0) {
                                        for(var e = 0; e < _$q; e++)if (1 === _$X[e] || 2 === _$X[e]) {
                                            h = _$t[3 + e] / 256;
                                            break;
                                        }
                                    }
                                    switch(_$$){
                                        case 0:
                                            var o = 0;
                                            _$c[0].hasBytesPerSample && (o = Math.pow(16, 2 * _$c[0].bytesPerSample)), _$t.forEach(function(t1, i, n) {
                                                n[i] = o - t1;
                                            });
                                        case 1:
                                            _$i = s = _$r = n.uL(_$t[0], _$c[0].bitsPerSample);
                                            break;
                                        case 2:
                                            _$i = n.uL(_$t[0], _$c[0].bitsPerSample), s = n.uL(_$t[1], _$c[1].bitsPerSample), _$r = n.uL(_$t[2], _$c[2].bitsPerSample);
                                            break;
                                        case 3:
                                            if (void 0 === _$Y) throw Error(ot(6027));
                                            var f = _$t[0];
                                            _$i = n.uL(_$Y[f], 16), s = n.uL(_$Y[_$K + f], 16), _$r = n.uL(_$Y[2 * _$K + f], 16);
                                            break;
                                        default:
                                            throw RangeError(ot(6028, _$$));
                                    }
                                    x.fillStyle = "rgba(" + _$i + ", " + s + ", " + _$r + ", " + h + ")", x.fillRect(_$rt, _$tt + it, 1, 1);
                                }();
                                _$z = _$W;
                            }
                        }
                    }
                }, t1;
            }(), T2 = {
                315: "Artist",
                258: "BitsPerSample",
                265: "CellLength",
                264: "CellWidth",
                320: "ColorMap",
                259: "Compression",
                33432: "Copyright",
                306: "DateTime",
                338: "ExtraSamples",
                266: "FillOrder",
                289: "FreeByteCounts",
                288: "FreeOffsets",
                291: "GrayResponseCurve",
                290: "GrayResponseUnit",
                316: "HostComputer",
                270: "ImageDescription",
                257: "ImageLength",
                256: "ImageWidth",
                271: "Make",
                281: "MaxSampleValue",
                280: "MinSampleValue",
                272: "Model",
                254: "NewSubfileType",
                274: "Orientation",
                262: "PhotometricInterpretation",
                284: "PlanarConfiguration",
                296: "ResolutionUnit",
                278: "RowsPerStrip",
                277: "SamplesPerPixel",
                305: "Software",
                279: "StripByteCounts",
                273: "StripOffsets",
                255: "SubfileType",
                263: "Threshholding",
                282: "XResolution",
                283: "YResolution",
                326: "BadFaxLines",
                327: "CleanFaxData",
                343: "ClipPath",
                328: "ConsecutiveBadFaxLines",
                433: "Decode",
                434: "DefaultImageColor",
                269: "DocumentName",
                336: "DotRange",
                321: "HalftoneHints",
                346: "Indexed",
                347: "JPEGTables",
                285: "PageName",
                297: "PageNumber",
                317: "Predictor",
                319: "PrimaryChromaticities",
                532: "ReferenceBlackWhite",
                339: "SampleFormat",
                559: "StripRowCounts",
                330: "SubIFDs",
                292: "T4Options",
                293: "T6Options",
                325: "TileByteCounts",
                323: "TileLength",
                324: "TileOffsets",
                322: "TileWidth",
                301: "TransferFunction",
                318: "WhitePoint",
                344: "XClipPathUnits",
                286: "XPosition",
                529: "YCbCrCoefficients",
                531: "YCbCrPositioning",
                530: "YCbCrSubSampling",
                345: "YClipPathUnits",
                287: "YPosition",
                37378: "ApertureValue",
                40961: "ColorSpace",
                36868: "DateTimeDigitized",
                36867: "DateTimeOriginal",
                34665: "Exif IFD",
                36864: "ExifVersion",
                33434: "ExposureTime",
                41728: "FileSource",
                37385: "Flash",
                40960: "FlashpixVersion",
                33437: "FNumber",
                42016: "ImageUniqueID",
                37384: "LightSource",
                37500: "MakerNote",
                37377: "ShutterSpeedValue",
                37510: "UserComment",
                33723: "IPTC",
                34675: "ICC Profile",
                700: "XMP",
                42112: "GDAL_METADATA",
                42113: "GDAL_NODATA",
                34377: "Photoshop"
            }, S2 = {
                1: "BYTE",
                2: "ASCII",
                3: "SHORT",
                4: "LONG",
                5: "RATIONAL",
                6: "SBYTE",
                7: "UNDEFINED",
                8: "SSHORT",
                9: "SLONG",
                10: "SRATIONAL",
                11: "FLOAT",
                12: "DOUBLE"
            }, O2 = new E2, I2 = Array(123), R2 = 0; R2 < 123; ++R2)I2[R2] = 64;
            for(var M2 = 0; M2 < 64; ++M2)I2["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charCodeAt(M2)] = M2;
            var N2 = function N21(t1) {
                this.data = t1, this.debug = !1, this.gpflags = void 0, this.files = 0, this.unzipped = [], this.buf32k = Array(32768), this.bIdx = 0, this.modeZIP = !1, this.bytepos = 0, this.bb = 1, this.bits = 0, this.nameBuf = [], this.fileout = void 0, this.literalTree = Array(N2.LITERALS), this.distanceTree = Array(32), this.treepos = 0, this.Places = null, this.len = 0, this.fpos = Array(17), this.fpos[0] = 0, this.flens = void 0, this.fmax = void 0;
            };
            N2.gunzip = function(t1) {
                return t1.constructor === Array || t1.constructor, new N2(t1).gunzip()[0][0];
            }, N2.HufNode = function() {
                this.b0 = 0, this.b1 = 0, this.jump = null, this.jumppos = -1;
            }, N2.LITERALS = 288, N2.NAMEMAX = 256, N2.bitReverse = [
                0,
                128,
                64,
                192,
                32,
                160,
                96,
                224,
                16,
                144,
                80,
                208,
                48,
                176,
                112,
                240,
                8,
                136,
                72,
                200,
                40,
                168,
                104,
                232,
                24,
                152,
                88,
                216,
                56,
                184,
                120,
                248,
                4,
                132,
                68,
                196,
                36,
                164,
                100,
                228,
                20,
                148,
                84,
                212,
                52,
                180,
                116,
                244,
                12,
                140,
                76,
                204,
                44,
                172,
                108,
                236,
                28,
                156,
                92,
                220,
                60,
                188,
                124,
                252,
                2,
                130,
                66,
                194,
                34,
                162,
                98,
                226,
                18,
                146,
                82,
                210,
                50,
                178,
                114,
                242,
                10,
                138,
                74,
                202,
                42,
                170,
                106,
                234,
                26,
                154,
                90,
                218,
                58,
                186,
                122,
                250,
                6,
                134,
                70,
                198,
                38,
                166,
                102,
                230,
                22,
                150,
                86,
                214,
                54,
                182,
                118,
                246,
                14,
                142,
                78,
                206,
                46,
                174,
                110,
                238,
                30,
                158,
                94,
                222,
                62,
                190,
                126,
                254,
                1,
                129,
                65,
                193,
                33,
                161,
                97,
                225,
                17,
                145,
                81,
                209,
                49,
                177,
                113,
                241,
                9,
                137,
                73,
                201,
                41,
                169,
                105,
                233,
                25,
                153,
                89,
                217,
                57,
                185,
                121,
                249,
                5,
                133,
                69,
                197,
                37,
                165,
                101,
                229,
                21,
                149,
                85,
                213,
                53,
                181,
                117,
                245,
                13,
                141,
                77,
                205,
                45,
                173,
                109,
                237,
                29,
                157,
                93,
                221,
                61,
                189,
                125,
                253,
                3,
                131,
                67,
                195,
                35,
                163,
                99,
                227,
                19,
                147,
                83,
                211,
                51,
                179,
                115,
                243,
                11,
                139,
                75,
                203,
                43,
                171,
                107,
                235,
                27,
                155,
                91,
                219,
                59,
                187,
                123,
                251,
                7,
                135,
                71,
                199,
                39,
                167,
                103,
                231,
                23,
                151,
                87,
                215,
                55,
                183,
                119,
                247,
                15,
                143,
                79,
                207,
                47,
                175,
                111,
                239,
                31,
                159,
                95,
                223,
                63,
                191,
                127,
                255
            ], N2.cplens = [
                3,
                4,
                5,
                6,
                7,
                8,
                9,
                10,
                11,
                13,
                15,
                17,
                19,
                23,
                27,
                31,
                35,
                43,
                51,
                59,
                67,
                83,
                99,
                115,
                131,
                163,
                195,
                227,
                258,
                0,
                0
            ], N2.cplext = [
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                1,
                1,
                1,
                1,
                2,
                2,
                2,
                2,
                3,
                3,
                3,
                3,
                4,
                4,
                4,
                4,
                5,
                5,
                5,
                5,
                0,
                99,
                99
            ], N2.cpdist = [
                1,
                2,
                3,
                4,
                5,
                7,
                9,
                13,
                17,
                25,
                33,
                49,
                65,
                97,
                129,
                193,
                257,
                385,
                513,
                769,
                1025,
                1537,
                2049,
                3073,
                4097,
                6145,
                8193,
                12289,
                16385,
                24577
            ], N2.cpdext = [
                0,
                0,
                0,
                0,
                1,
                1,
                2,
                2,
                3,
                3,
                4,
                4,
                5,
                5,
                6,
                6,
                7,
                7,
                8,
                8,
                9,
                9,
                10,
                10,
                11,
                11,
                12,
                12,
                13,
                13
            ], N2.border = [
                16,
                17,
                18,
                0,
                8,
                7,
                9,
                6,
                10,
                5,
                11,
                4,
                12,
                3,
                13,
                2,
                14,
                1,
                15
            ], N2.prototype.gunzip = function() {
                return this.outputArr = [], this.nextFile(), this.unzipped;
            }, N2.prototype.readByte = function() {
                return this.bits += 8, this.bytepos < this.data.length ? this.data.charCodeAt(this.bytepos++) : -1;
            }, N2.prototype.byteAlign = function() {
                this.bb = 1;
            }, N2.prototype.readBit = function() {
                var _$t;
                return this.bits++, _$t = 1 & this.bb, this.bb >>= 1, 0 === this.bb && (this.bb = this.readByte(), _$t = 1 & this.bb, this.bb = this.bb >> 1 | 128), _$t;
            }, N2.prototype.readBits = function(t1) {
                for(var i = 0, n = t1; n--;)i = i << 1 | this.readBit();
                return t1 && (i = N2.bitReverse[i] >> 8 - t1), i;
            }, N2.prototype.flushBuffer = function() {
                this.bIdx = 0;
            }, N2.prototype.addBuffer = function(t1) {
                this.buf32k[this.bIdx++] = t1, this.outputArr.push(String.fromCharCode(t1)), 32768 === this.bIdx && (this.bIdx = 0);
            }, N2.prototype.IsPat = function() {
                for(;;){
                    if (this.fpos[this.len] >= this.fmax) return -1;
                    if (this.flens[this.fpos[this.len]] === this.len) return this.fpos[this.len]++;
                    this.fpos[this.len]++;
                }
            }, N2.prototype.Rec = function() {
                var _$t, i = this.Places[this.treepos];
                if (17 === this.len) return -1;
                if (this.treepos++, this.len++, (_$t = this.IsPat()) >= 0) i.b0 = _$t;
                else if (i.b0 = 32768, this.Rec()) return -1;
                if ((_$t = this.IsPat()) >= 0) i.b1 = _$t, i.jump = null;
                else if (i.b1 = 32768, i.jump = this.Places[this.treepos], i.jumppos = this.treepos, this.Rec()) return -1;
                return this.len--, 0;
            }, N2.prototype.CreateTree = function(t1, i, n) {
                var s;
                for(this.Places = t1, this.treepos = 0, this.flens = n, this.fmax = i, s = 0; s < 17; s++)this.fpos[s] = 0;
                return this.len = 0, this.Rec() ? -1 : 0;
            }, N2.prototype.DecodeValue = function(t1) {
                for(var i, n, s = 0, _$r = t1[s];;)if (this.readBit()) {
                    if (!(32768 & _$r.b1)) return _$r.b1;
                    for(_$r = _$r.jump, i = t1.length, n = 0; n < i; n++)if (t1[n] === _$r) {
                        s = n;
                        break;
                    }
                } else {
                    if (!(32768 & _$r.b0)) return _$r.b0;
                    _$r = t1[++s];
                }
                return -1;
            }, N2.prototype.DeflateLoop = function() {
                do if (_$t = this.readBit(), 0 === (i = this.readBits(2))) for(this.byteAlign(), 65535 & ((s = this.readByte() | this.readByte() << 8) ^ ~(this.readByte() | this.readByte() << 8)) && document.write("BlockLen checksum mismatch\n"); s--;)h = this.readByte(), this.addBuffer(h);
                else if (1 === i) for(;;)if ((e = N2.bitReverse[this.readBits(7)] >> 1) > 23 ? (e = e << 1 | this.readBit()) > 199 ? e = (e -= 128) << 1 | this.readBit() : (e -= 48) > 143 && (e += 136) : e += 256, e < 256) this.addBuffer(e);
                else {
                    if (256 === e) break;
                    for(e -= 257, _$d = this.readBits(N2.cplext[e]) + N2.cplens[e], e = N2.bitReverse[this.readBits(5)] >> 3, w = (N2.cpdext[e] > 8 ? this.readBits(8) | this.readBits(N2.cpdext[e] - 8) << 8 : this.readBits(N2.cpdext[e])) + N2.cpdist[e], e = 0; e < _$d; e++){
                        var h = this.buf32k[this.bIdx - w & 32767];
                        this.addBuffer(h);
                    }
                }
                else if (2 === i) {
                    var _$t, i, n, s, v, _$d, w, e, u, o, f, _$c, a = Array(320);
                    for(o = 257 + this.readBits(5), f = 1 + this.readBits(5), _$c = 4 + this.readBits(4), e = 0; e < 19; e++)a[e] = 0;
                    for(e = 0; e < _$c; e++)a[N2.border[e]] = this.readBits(3);
                    for(_$d = this.distanceTree.length, n = 0; n < _$d; n++)this.distanceTree[n] = new N2.HufNode;
                    if (this.CreateTree(this.distanceTree, 19, a, 0)) return this.flushBuffer(), 1;
                    for(u = o + f, n = 0; n < u;)if ((e = this.DecodeValue(this.distanceTree)) < 16) a[n++] = e;
                    else if (16 === e) {
                        if (n + (e = 3 + this.readBits(2)) > u) return this.flushBuffer(), 1;
                        for(v = n ? a[n - 1] : 0; e--;)a[n++] = v;
                    } else {
                        if (n + (e = 17 === e ? 3 + this.readBits(3) : 11 + this.readBits(7)) > u) return this.flushBuffer(), 1;
                        for(; e--;)a[n++] = 0;
                    }
                    for(_$d = this.literalTree.length, n = 0; n < _$d; n++)this.literalTree[n] = new N2.HufNode;
                    if (this.CreateTree(this.literalTree, o, a, 0)) return this.flushBuffer(), 1;
                    for(_$d = this.literalTree.length, n = 0; n < _$d; n++)this.distanceTree[n] = new N2.HufNode;
                    var l = [];
                    for(n = o; n < a.length; n++)l[n - o] = a[n];
                    if (this.CreateTree(this.distanceTree, f, l, 0)) return this.flushBuffer(), 1;
                    for(;;)if ((e = this.DecodeValue(this.literalTree)) >= 256) {
                        if (0 == (e -= 256)) break;
                        for(e--, _$d = this.readBits(N2.cplext[e]) + N2.cplens[e], e = this.DecodeValue(this.distanceTree), w = (N2.cpdext[e] > 8 ? this.readBits(8) | this.readBits(N2.cpdext[e] - 8) << 8 : this.readBits(N2.cpdext[e])) + N2.cpdist[e]; _$d--;)h = this.buf32k[this.bIdx - w & 32767], this.addBuffer(h);
                    } else this.addBuffer(e);
                }
                while (!_$t);
                return this.flushBuffer(), this.byteAlign(), 0;
            }, N2.prototype.unzipFile = function(t1) {
                var i;
                for(this.gunzip(), i = 0; i < this.unzipped.length; i++)if (this.unzipped[i][1] === t1) return this.unzipped[i][0];
            }, N2.prototype.nextFile = function() {
                this.outputArr = [], this.modeZIP = !1;
                var _$t = [];
                if (_$t[0] = this.readByte(), _$t[1] = this.readByte(), 120 === _$t[0] && 218 === _$t[1] && (this.DeflateLoop(), this.unzipped[this.files] = [
                    this.outputArr.join(""),
                    "geonext.gxt"
                ], this.files++), 31 === _$t[0] && 139 === _$t[1] && (this.skipdir(), this.unzipped[this.files] = [
                    this.outputArr.join(""),
                    "file"
                ], this.files++), 80 === _$t[0] && 75 === _$t[1] && (this.modeZIP = !0, _$t[2] = this.readByte(), _$t[3] = this.readByte(), 3 === _$t[2] && 4 === _$t[3])) {
                    _$t[0] = this.readByte(), _$t[1] = this.readByte(), this.gpflags = this.readByte(), this.gpflags |= this.readByte() << 8;
                    var i = this.readByte();
                    i |= this.readByte() << 8, this.readByte(), this.readByte(), this.readByte(), this.readByte(), this.readByte(), this.readByte(), this.readByte(), this.readByte(), this.readByte(), this.readByte(), this.readByte(), this.readByte();
                    var n = this.readByte();
                    n |= this.readByte() << 8;
                    var s = this.readByte();
                    for(s |= this.readByte() << 8, h = 0, this.nameBuf = []; n--;){
                        var _$r = this.readByte();
                        "/" === _$r | ":" === _$r ? h = 0 : h < N2.NAMEMAX - 1 && (this.nameBuf[h++] = String.fromCharCode(_$r));
                    }
                    this.fileout || (this.fileout = this.nameBuf);
                    for(var h = 0; h < s;)_$r = this.readByte(), h++;
                    8 === i && (this.DeflateLoop(), this.unzipped[this.files] = [
                        this.outputArr.join(""),
                        this.nameBuf.join("")
                    ], this.files++), this.skipdir();
                }
            }, N2.prototype.skipdir = function() {
                var _$t, i, n = [];
                if (8 & this.gpflags && (n[0] = this.readByte(), n[1] = this.readByte(), n[2] = this.readByte(), n[3] = this.readByte(), this.readByte(), this.readByte(), this.readByte(), this.readByte(), this.readByte(), this.readByte(), this.readByte(), this.readByte()), this.modeZIP && this.nextFile(), n[0] = this.readByte(), 8 !== n[0]) return 0;
                if (this.gpflags = this.readByte(), this.readByte(), this.readByte(), this.readByte(), this.readByte(), this.readByte(), this.readByte(), 4 & this.gpflags) for(n[0] = this.readByte(), n[2] = this.readByte(), this.len = n[0] + 256 * n[1], _$t = 0; _$t < this.len; _$t++)this.readByte();
                if (8 & this.gpflags) for(_$t = 0, this.nameBuf = []; i = this.readByte();)"7" !== i && ":" !== i || (_$t = 0), _$t < N2.NAMEMAX - 1 && (this.nameBuf[_$t++] = i);
                if (16 & this.gpflags) for(; i = this.readByte(););
                2 & this.gpflags && (this.readByte(), this.readByte()), this.DeflateLoop(), this.readByte(), this.readByte(), this.readByte(), this.readByte(), this.modeZIP && this.nextFile();
            };
            var P2, D2, L2, B2, F2, U2, G2, H2, V2, W2, z2, $2, X2, q2, Y2, K2, J2, Q2, Z2, t3, i31, n31, s31, r3, h31, e3, u3, o3, f3, c3, a3, v3, l3, d3, w3, g3, p3, y3, _3, m3, b3, k3, A3, E3, T3, S3, O3, I3, R3, M3, C3 = {
                name: "Jacob__Codec"
            };
            function N3(t1) {
                var i = t1.parent, n = t1.getComponent($3);
                return i && n ? N3(i) : t1.getComponentsInChildren($3);
            }
            C3.Base64 = {
                name: "Jacob__Codec__Base64",
                decode: function decode(t1) {
                    var i, n, s, _$r, h, e, u = [], o = 0;
                    for(t1 = t1.replace(/[^A-Za-z0-9\+\/\=]/g, ""); o < t1.length;)i = I2[t1.charCodeAt(o++)] << 2 | (_$r = I2[t1.charCodeAt(o++)]) >> 4, n = (15 & _$r) << 4 | (h = I2[t1.charCodeAt(o++)]) >> 2, s = (3 & h) << 6 | (e = I2[t1.charCodeAt(o++)]), u.push(String.fromCharCode(i)), 64 !== h && u.push(String.fromCharCode(n)), 64 !== e && u.push(String.fromCharCode(s));
                    return u.join("");
                },
                decodeAsArray: function decodeAsArray(t1, i) {
                    var n, s, _$r, h = this.decode(t1), e = [];
                    for(n = 0, _$r = h.length / i; n < _$r; n++)for(e[n] = 0, s = i - 1; s >= 0; --s)e[n] += h.charCodeAt(n * i + s) << 8 * s;
                    return e;
                }
            }, C3.GZip = N2, C3.unzip = function() {
                return C3.GZip.gunzip.apply(C3.GZip, arguments);
            }, C3.unzipBase64 = function() {
                var _$t = C3.Base64.decode.apply(C3.Base64, arguments);
                try {
                    return C3.GZip.gunzip.call(C3.GZip, _$t);
                } catch (i) {
                    return _$t.slice(7);
                }
            }, C3.unzipBase64AsArray = function(t1, i) {
                i = i || 1;
                var n, s, _$r, h = this.unzipBase64(t1), e = [];
                for(n = 0, _$r = h.length / i; n < _$r; n++)for(e[n] = 0, s = i - 1; s >= 0; --s)e[n] += h.charCodeAt(n * i + s) << 8 * s;
                return e;
            }, C3.unzipAsArray = function(t1, i) {
                i = i || 1;
                var n, s, _$r, h = this.unzip(t1), e = [];
                for(n = 0, _$r = h.length / i; n < _$r; n++)for(e[n] = 0, s = i - 1; s >= 0; --s)e[n] += h.charCodeAt(n * i + s) << 8 * s;
                return e;
            };
            var P3, D3, F3, U3, x3, j3, G3, H3, V3, W3 = parseInt, z3 = parseFloat, $3 = t1("ef", (P2 = go("cc.ParticleSystem2D"), D2 = Zo(k2), L2 = Zo(sD), B2 = Zo(e21), F2 = Zo(h21), U2 = Mo("preview"), P2(((M3 = function(t1) {
                function i() {
                    var _$i;
                    return (_$i = t1.call(this) || this).duration = G2 && G2(), _$i.emissionRate = H2 && H2(), _$i.life = V2 && V2(), _$i.lifeVar = W2 && W2(), _$i.angle = z2 && z2(), _$i.angleVar = $2 && $2(), _$i.startSize = X2 && X2(), _$i.startSizeVar = q2 && q2(), _$i.endSize = Y2 && Y2(), _$i.endSizeVar = K2 && K2(), _$i.startSpin = J2 && J2(), _$i.startSpinVar = Q2 && Q2(), _$i.endSpin = Z2 && Z2(), _$i.endSpinVar = t3 && t3(), _$i.sourcePos = i31 && i31(), _$i.posVar = n31 && n31(), _$i.emitterMode = s31 && s31(), _$i.gravity = r3 && r3(), _$i.speed = h31 && h31(), _$i.speedVar = e3 && e3(), _$i.tangentialAccel = u3 && u3(), _$i.tangentialAccelVar = o3 && o3(), _$i.radialAccel = f3 && f3(), _$i.radialAccelVar = c3 && c3(), _$i.rotationIsDir = a3 && a3(), _$i.startRadius = v3 && v3(), _$i.startRadiusVar = l3 && l3(), _$i.endRadius = d3 && d3(), _$i.endRadiusVar = w3 && w3(), _$i.rotatePerS = g3 && g3(), _$i.rotatePerSVar = p3 && p3(), _$i.aspectRatio = 1, _$i.playOnLoad = y3 && y3(), _$i.autoRemoveOnFinish = _3 && _3(), _$i._preview = m3 && m3(), _$i._custom = b3 && b3(), _$i._file = k3 && k3(), _$i._spriteFrame = A3 && A3(), _$i._totalParticles = E3 && E3(), _$i._startColor = T3 && T3(), _$i._startColorVar = S3 && S3(), _$i._endColor = O3 && O3(), _$i._endColorVar = I3 && I3(), _$i._positionType = R3 && R3(), _$i.fL = !0, _$i.vL = void 0, _$i.lL(), _$i.vL = !1, _$i;
                }
                h(i, t1);
                var n = i.prototype;
                return n.onEnable = function() {
                    t1.prototype.onEnable.call(this), this._updateMaterial(), this._updatePositionType();
                }, n.onDestroy = function() {
                    t1.prototype.onDestroy.call(this), this.autoRemoveOnFinish && (this.autoRemoveOnFinish = !1), this._simulator.uvFilled = 0, this.destroyRenderData();
                }, n.lL = function() {
                    this.dL = null, this.wL = !1, this.aspectRatio = 1, this._simulator = new m2(this);
                }, n.onFocusInEditor = function() {
                    this.wL = !0;
                    for(var _$t = N3(this.node), _$i = 0; _$i < _$t.length; ++_$i)_$t[_$i].gL();
                }, n.onLostFocusInEditor = function() {
                    this.wL = !1;
                    for(var _$t = N3(this.node), _$i = 0; _$i < _$t.length; ++_$i)_$t[_$i].pL();
                }, n.gL = function() {
                    this._preview && this.resetSystem();
                }, n.pL = function() {
                    this._preview && (this.resetSystem(), this.stopSystem()), this.dL && clearInterval(this.dL);
                }, n.__preload = function() {
                    t1.prototype.__preload.call(this), this._custom && this.spriteFrame && !this._renderSpriteFrame ? this._applySpriteFrame() : this._file && (this._custom && this._getTexture() || this._applyFile()), this.playOnLoad && this.resetSystem();
                }, n.destroyRenderData = function() {
                    if (this._simulator.renderData) {
                        var _$i = this._assembler;
                        _$i && _$i.removeData && _$i.removeData(this._simulator.renderData), this._simulator.renderData = null;
                    }
                    t1.prototype.destroyRenderData.call(this);
                }, n._flushAssembler = function() {
                    var _$t = i.Assembler.getAssembler(this);
                    if (this._assembler !== _$t && (this._assembler = _$t), this._assembler && this._assembler.createData) {
                        var n = this._simulator, _$s = n.renderData;
                        _$s || (_$s = n.renderData = this._assembler.createData(this), n.uvFilled = 0, _$s.n_(this.renderEntity), n.initDrawInfo());
                    }
                }, n.lateUpdate = function(t1) {
                    this._simulator.finished || this._simulator.step(t1);
                }, n.addParticle = function() {}, n.stopSystem = function() {
                    this.fL = !0, this._simulator.stop();
                }, n.resetSystem = function() {
                    this.fL = !1, this._simulator.reset(), this.po();
                }, n.isFull = function() {
                    return this.particleCount >= this.totalParticles;
                }, n._applyFile = function() {
                    var _$t = this._file;
                    if (_$t) {
                        if (!_$t) return void rt(6029);
                        if (!this.isValid) return;
                        this.yL = _$t.nativeUrl, this._custom || (this._spriteFrame !== _$t.spriteFrame && (this.spriteFrame = _$t.spriteFrame), this._initWithDictionary(_$t._nativeAsset)), this._spriteFrame ? !this._renderSpriteFrame && this._spriteFrame && this._applySpriteFrame() : _$t.spriteFrame ? this.spriteFrame = _$t.spriteFrame : this._custom && this._initTextureWithDictionary(_$t._nativeAsset);
                    }
                }, n._initTextureWithDictionary = function(t1) {
                    var n = this;
                    if (t1.spriteFrameUuid) {
                        var _$s = t1.spriteFrameUuid;
                        Ck.loadAny(_$s, function(i, s) {
                            n.isValid && (i ? (t1.spriteFrameUuid = void 0, n._initTextureWithDictionary(t1), z(i)) : n.spriteFrame = s);
                        });
                    } else {
                        var _$r = tv(this.yL, t1.textureFileName || "");
                        if (t1.textureFileName) Ck.loadRemote(_$r, function(i, s) {
                            n.isValid && (i ? (t1.textureFileName = void 0, n._initTextureWithDictionary(t1), z(i)) : n.spriteFrame = s ? sD.createWithImage(s) : sD.createWithImage(Lk.get("white-texture")));
                        });
                        else if (t1.textureImageData) {
                            var _$h = t1.textureImageData;
                            if (!(_$h && _$h.length > 0)) return !1;
                            var e = _$r;
                            this.file && (e += "-" + this.file.uuid);
                            var u = Ck.assets.get(e);
                            if (!u) {
                                var o = C3.unzipBase64AsArray(_$h, 1);
                                if (!o) return nt(6030, this._file.name), !1;
                                var f = o.length > 8 && 137 === o[0] && 80 === o[1] && 78 === o[2] && 71 === o[3] && 13 === o[4] && 10 === o[5] && 26 === o[6] && 10 === o[7] ? 1 : o.length > 2 && (73 === o[0] && 73 === o[1] || 77 === o[0] && 77 === o[1] || 255 === o[0] && 216 === o[1]) ? 2 : 10;
                                if (2 !== f && 1 !== f) return nt(6031, this._file.name), !1;
                                var _$c = S.document.createElement("canvas");
                                1 === f ? new A2(o).zD(_$c) : (O2.oL(o, _$c), O2.nA()), u = new mg(_$c), Ck.assets.add(e, u);
                            }
                            u || nt(6032, this._file.name), this.spriteFrame = u ? sD.createWithImage(u) : sD.createWithImage(Lk.get("white-texture"));
                        }
                    }
                    return !0;
                }, n._initWithDictionary = function(t1) {
                    this.vL = !0, this.totalParticles = W3(t1.maxParticles || 0), this.life = z3(t1.particleLifespan || 0), this.lifeVar = z3(t1.particleLifespanVariance || 0);
                    var _$i = t1.emissionRate;
                    this.emissionRate = _$i || Math.min(this.totalParticles / this.life, Number.MAX_VALUE), this.duration = z3(t1.duration || 0), this._srcBlendFactor = W3(t1.blendFuncSource || 2), this._dstBlendFactor = W3(t1.blendFuncDestination || 4);
                    var n = this._startColor;
                    n.r = 255 * z3(t1.startColorRed || 0), n.g = 255 * z3(t1.startColorGreen || 0), n.b = 255 * z3(t1.startColorBlue || 0), n.a = 255 * z3(t1.startColorAlpha || 0);
                    var _$s = this._startColorVar;
                    _$s.r = 255 * z3(t1.startColorVarianceRed || 0), _$s.g = 255 * z3(t1.startColorVarianceGreen || 0), _$s.b = 255 * z3(t1.startColorVarianceBlue || 0), _$s.a = 255 * z3(t1.startColorVarianceAlpha || 0);
                    var _$r = this._endColor;
                    _$r.r = 255 * z3(t1.finishColorRed || 0), _$r.g = 255 * z3(t1.finishColorGreen || 0), _$r.b = 255 * z3(t1.finishColorBlue || 0), _$r.a = 255 * z3(t1.finishColorAlpha || 0);
                    var _$h = this._endColorVar;
                    if (_$h.r = 255 * z3(t1.finishColorVarianceRed || 0), _$h.g = 255 * z3(t1.finishColorVarianceGreen || 0), _$h.b = 255 * z3(t1.finishColorVarianceBlue || 0), _$h.a = 255 * z3(t1.finishColorVarianceAlpha || 0), this.startSize = z3(t1.startParticleSize || 0), this.startSizeVar = z3(t1.startParticleSizeVariance || 0), this.endSize = z3(t1.finishParticleSize || 0), this.endSizeVar = z3(t1.finishParticleSizeVariance || 0), this.positionType = z3(void 0 !== t1.positionType ? t1.positionType : e21.FREE), this.sourcePos.set(0, 0), this.posVar.set(z3(t1.sourcePositionVariancex || 0), z3(t1.sourcePositionVariancey || 0)), this.angle = z3(t1.angle || 0), this.angleVar = z3(t1.angleVariance || 0), this.startSpin = z3(t1.rotationStart || 0), this.startSpinVar = z3(t1.rotationStartVariance || 0), this.endSpin = z3(t1.rotationEnd || 0), this.endSpinVar = z3(t1.rotationEndVariance || 0), this.emitterMode = W3(t1.emitterType || h21.GRAVITY), this.emitterMode === h21.GRAVITY) {
                        this.gravity.set(z3(t1.gravityx || 0), z3(t1.gravityy || 0)), this.speed = z3(t1.speed || 0), this.speedVar = z3(t1.speedVariance || 0), this.radialAccel = z3(t1.radialAcceleration || 0), this.radialAccelVar = z3(t1.radialAccelVariance || 0), this.tangentialAccel = z3(t1.tangentialAcceleration || 0), this.tangentialAccelVar = z3(t1.tangentialAccelVariance || 0);
                        var e = t1.rotationIsDir || "";
                        null !== e ? (e = e.toString().toLowerCase(), this.rotationIsDir = "true" === e || "1" === e) : this.rotationIsDir = !1;
                    } else {
                        if (this.emitterMode !== h21.RADIUS) return nt(6009), !1;
                        this.startRadius = z3(t1.maxRadius || 0), this.startRadiusVar = z3(t1.maxRadiusVariance || 0), this.endRadius = z3(t1.minRadius || 0), this.endRadiusVar = z3(t1.minRadiusVariance || 0), this.rotatePerS = z3(t1.rotatePerSecond || 0), this.rotatePerSVar = z3(t1.rotatePerSecondVariance || 0);
                    }
                    return this._initTextureWithDictionary(t1), !0;
                }, n._syncAspect = function() {
                    if (this._renderSpriteFrame) {
                        var _$t = this._renderSpriteFrame.rect;
                        this.aspectRatio = _$t.width / _$t.height;
                    }
                }, n._applySpriteFrame = function() {
                    this._renderSpriteFrame = this._renderSpriteFrame || this._spriteFrame, this._renderSpriteFrame ? this._renderSpriteFrame.texture && (this._simulator && this._simulator.updateUVs(!0), this._syncAspect(), this._updateMaterial(), this.fL = !1, this.po()) : this.resetSystem();
                }, n._getTexture = function() {
                    return this._renderSpriteFrame && this._renderSpriteFrame.texture;
                }, n._updateMaterial = function() {
                    if (this._customMaterial) {
                        this.setSharedMaterial(this._customMaterial, 0);
                        var _$t = this.getRenderMaterial(0).passes[0].blendState.targets[0];
                        this._dstBlendFactor = _$t.blendDst, this._srcBlendFactor = _$t.blendSrc;
                    }
                    var _$i = this.getMaterialInstance(0);
                    _$i && _$i.recompileShaders({
                        USE_LOCAL: this._positionType !== e21.FREE
                    }), _$i && _$i.passes.length > 0 && this._updateBlendFunc();
                }, n._finishedSimulation = function() {
                    this.resetSystem(), this.stopSystem(), this.po(), this.autoRemoveOnFinish && this.fL && this.node.destroy();
                }, n._canRender = function() {
                    return t1.prototype._canRender.call(this) && !this.fL && null !== this._renderSpriteFrame && void 0 !== this._renderSpriteFrame;
                }, n._render = function(t1) {
                    this._positionType === e21.RELATIVE ? t1.commitComp(this, this._simulator.renderData, this._renderSpriteFrame, this._assembler, this.node.parent) : this.positionType === e21.GROUPED ? t1.commitComp(this, this._simulator.renderData, this._renderSpriteFrame, this._assembler, this.node) : t1.commitComp(this, this._simulator.renderData, this._renderSpriteFrame, this._assembler, null);
                }, n._updatePositionType = function() {
                    this._positionType === e21.RELATIVE ? (this._renderEntity.M_(this.node.parent), this._renderEntity.__(!0)) : this.positionType === e21.GROUPED ? (this._renderEntity.M_(this.node), this._renderEntity.__(!0)) : (this._renderEntity.M_(null), this._renderEntity.__(!1));
                }, s(i, [
                    {
                        key: "custom",
                        get: function get() {
                            return this._custom;
                        },
                        set: function set(t1) {
                            this._custom !== t1 && (this._custom = t1, this._applyFile(), this._updateMaterial());
                        }
                    },
                    {
                        key: "file",
                        get: function get() {
                            return this._file;
                        },
                        set: function set(t1) {
                            this._file !== t1 && (this._file = t1, t1 ? this._applyFile() : this.custom = !0);
                        }
                    },
                    {
                        key: "spriteFrame",
                        get: function get() {
                            return this._spriteFrame;
                        },
                        set: function set(t1) {
                            this._renderSpriteFrame !== t1 && (this._renderSpriteFrame = t1, t1 && !t1._uuid || (this._spriteFrame = t1), this._applySpriteFrame());
                        }
                    },
                    {
                        key: "particleCount",
                        get: function get() {
                            return this._simulator.particles.length;
                        }
                    },
                    {
                        key: "totalParticles",
                        get: function get() {
                            return this._totalParticles;
                        },
                        set: function set(t1) {
                            this._totalParticles !== t1 && (this._totalParticles = t1);
                        }
                    },
                    {
                        key: "startColor",
                        get: function get() {
                            return this._startColor;
                        },
                        set: function set(t1) {
                            this._startColor.r = t1.r, this._startColor.g = t1.g, this._startColor.b = t1.b, this._startColor.a = t1.a;
                        }
                    },
                    {
                        key: "startColorVar",
                        get: function get() {
                            return this._startColorVar;
                        },
                        set: function set(t1) {
                            this._startColorVar.r = t1.r, this._startColorVar.g = t1.g, this._startColorVar.b = t1.b, this._startColorVar.a = t1.a;
                        }
                    },
                    {
                        key: "color",
                        get: function get() {
                            return this._color;
                        },
                        set: function set() {}
                    },
                    {
                        key: "endColor",
                        get: function get() {
                            return this._endColor;
                        },
                        set: function set(t1) {
                            this._endColor.r = t1.r, this._endColor.g = t1.g, this._endColor.b = t1.b, this._endColor.a = t1.a;
                        }
                    },
                    {
                        key: "endColorVar",
                        get: function get() {
                            return this._endColorVar;
                        },
                        set: function set(t1) {
                            this._endColorVar.r = t1.r, this._endColorVar.g = t1.g, this._endColorVar.b = t1.b, this._endColorVar.a = t1.a;
                        }
                    },
                    {
                        key: "positionType",
                        get: function get() {
                            return this._positionType;
                        },
                        set: function set(t1) {
                            this._positionType = t1, this._updateMaterial(), this._updatePositionType();
                        }
                    },
                    {
                        key: "preview",
                        get: function get() {
                            return this._preview;
                        },
                        set: function set(t1) {
                            t1 ? this.gL() : this.pL(), this._preview = t1;
                        }
                    },
                    {
                        key: "stopped",
                        get: function get() {
                            return this.fL;
                        }
                    },
                    {
                        key: "active",
                        get: function get() {
                            return this._simulator.active;
                        }
                    },
                    {
                        key: "assembler",
                        get: function get() {
                            return this._assembler;
                        }
                    }
                ]), i;
            }(TB)).EmitterMode = h21, M3.PositionType = e21, M3.DURATION_INFINITY = -1, M3.START_SIZE_EQUAL_TO_END_SIZE = -1, M3.START_RADIUS_EQUAL_TO_END_RADIUS = -1, y(M3.prototype, "file", [
                D2
            ], Object.getOwnPropertyDescriptor(M3.prototype, "file"), M3.prototype), y(M3.prototype, "spriteFrame", [
                L2
            ], Object.getOwnPropertyDescriptor(M3.prototype, "spriteFrame"), M3.prototype), G2 = ho(M3.prototype, "duration", [
                Ro
            ], function() {
                return -1;
            }), H2 = ho(M3.prototype, "emissionRate", [
                Ro
            ], function() {
                return 10;
            }), V2 = ho(M3.prototype, "life", [
                Ro
            ], function() {
                return 1;
            }), W2 = ho(M3.prototype, "lifeVar", [
                Ro
            ], function() {
                return 0;
            }), y(M3.prototype, "color", [
                ff
            ], Object.getOwnPropertyDescriptor(M3.prototype, "color"), M3.prototype), z2 = ho(M3.prototype, "angle", [
                Ro
            ], function() {
                return 90;
            }), $2 = ho(M3.prototype, "angleVar", [
                Ro
            ], function() {
                return 20;
            }), X2 = ho(M3.prototype, "startSize", [
                Ro
            ], function() {
                return 50;
            }), q2 = ho(M3.prototype, "startSizeVar", [
                Ro
            ], function() {
                return 0;
            }), Y2 = ho(M3.prototype, "endSize", [
                Ro
            ], function() {
                return 0;
            }), K2 = ho(M3.prototype, "endSizeVar", [
                Ro
            ], function() {
                return 0;
            }), J2 = ho(M3.prototype, "startSpin", [
                Ro
            ], function() {
                return 0;
            }), Q2 = ho(M3.prototype, "startSpinVar", [
                Ro
            ], function() {
                return 0;
            }), Z2 = ho(M3.prototype, "endSpin", [
                Ro
            ], function() {
                return 0;
            }), t3 = ho(M3.prototype, "endSpinVar", [
                Ro
            ], function() {
                return 0;
            }), i31 = ho(M3.prototype, "sourcePos", [
                Ro
            ], function() {
                return Or.ZERO.clone();
            }), n31 = ho(M3.prototype, "posVar", [
                Ro
            ], function() {
                return Or.ZERO.clone();
            }), y(M3.prototype, "positionType", [
                B2
            ], Object.getOwnPropertyDescriptor(M3.prototype, "positionType"), M3.prototype), s31 = ho(M3.prototype, "emitterMode", [
                Ro,
                F2
            ], function() {
                return h21.GRAVITY;
            }), r3 = ho(M3.prototype, "gravity", [
                Ro
            ], function() {
                return Or.ZERO.clone();
            }), h31 = ho(M3.prototype, "speed", [
                Ro
            ], function() {
                return 180;
            }), e3 = ho(M3.prototype, "speedVar", [
                Ro
            ], function() {
                return 50;
            }), u3 = ho(M3.prototype, "tangentialAccel", [
                Ro
            ], function() {
                return 80;
            }), o3 = ho(M3.prototype, "tangentialAccelVar", [
                Ro
            ], function() {
                return 0;
            }), f3 = ho(M3.prototype, "radialAccel", [
                Ro
            ], function() {
                return 0;
            }), c3 = ho(M3.prototype, "radialAccelVar", [
                Ro
            ], function() {
                return 0;
            }), a3 = ho(M3.prototype, "rotationIsDir", [
                Ro
            ], function() {
                return !1;
            }), v3 = ho(M3.prototype, "startRadius", [
                Ro
            ], function() {
                return 0;
            }), l3 = ho(M3.prototype, "startRadiusVar", [
                Ro
            ], function() {
                return 0;
            }), d3 = ho(M3.prototype, "endRadius", [
                Ro
            ], function() {
                return 0;
            }), w3 = ho(M3.prototype, "endRadiusVar", [
                Ro
            ], function() {
                return 0;
            }), g3 = ho(M3.prototype, "rotatePerS", [
                Ro
            ], function() {
                return 0;
            }), p3 = ho(M3.prototype, "rotatePerSVar", [
                Ro
            ], function() {
                return 0;
            }), y3 = ho(M3.prototype, "playOnLoad", [
                Ro
            ], function() {
                return !0;
            }), _3 = ho(M3.prototype, "autoRemoveOnFinish", [
                Ro
            ], function() {
                return !1;
            }), m3 = ho(M3.prototype, "_preview", [
                U2
            ], function() {
                return !0;
            }), b3 = ho(M3.prototype, "_custom", [
                Ro
            ], function() {
                return !1;
            }), k3 = ho(M3.prototype, "_file", [
                Ro
            ], function() {
                return null;
            }), A3 = ho(M3.prototype, "_spriteFrame", [
                Ro
            ], function() {
                return null;
            }), E3 = ho(M3.prototype, "_totalParticles", [
                Ro
            ], function() {
                return 150;
            }), T3 = ho(M3.prototype, "_startColor", [
                Ro
            ], function() {
                return new Yr(255, 255, 255, 255);
            }), S3 = ho(M3.prototype, "_startColorVar", [
                Ro
            ], function() {
                return new Yr(0, 0, 0, 0);
            }), O3 = ho(M3.prototype, "_endColor", [
                Ro
            ], function() {
                return new Yr(255, 255, 255, 0);
            }), I3 = ho(M3.prototype, "_endColorVar", [
                Ro
            ], function() {
                return new Yr(0, 0, 0, 0);
            }), R3 = ho(M3.prototype, "_positionType", [
                Ro
            ], function() {
                return e21.FREE;
            }), M3)) || M3)), X3 = function() {
                function t1(t1, i) {
                    this.point = new Or, this.dir = new Or, this.distance = 0, this.time = 0, t1 && this.point.set(t1), i && this.dir.set(i);
                }
                var i = t1.prototype;
                return i.setPoint = function(t1, i) {
                    this.point.x = t1, this.point.y = i;
                }, i.setDir = function(t1, i) {
                    this.dir.x = t1, this.dir.y = i;
                }, t1;
            }(), q3 = t1("eg", (P3 = go("cc.MotionStreak"), D3 = Zo(ay), P3(((V3 = function(t1) {
                function i() {
                    var _$i;
                    return (_$i = t1.call(this) || this)._preview = F3 && F3(), _$i._fadeTime = U3 && U3(), _$i._minSeg = x3 && x3(), _$i._stroke = j3 && j3(), _$i._texture = G3 && G3(), _$i._fastMode = H3 && H3(), _$i.CP = [], _$i.setFillColorType(1), _$i;
                }
                h(i, t1);
                var n = i.prototype;
                return n.onEnable = function() {
                    t1.prototype.onEnable.call(this), this.reset();
                }, n._flushAssembler = function() {
                    var _$t = i.Assembler.getAssembler(this);
                    this._assembler !== _$t && (this._assembler = _$t), this._renderData || this._assembler && this._assembler.createData && (this._renderData = this._assembler.createData(this), this._renderData.material = this.material, this._updateColor());
                }, n.onFocusInEditor = function() {
                    this._preview && this.reset();
                }, n.onLostFocusInEditor = function() {
                    this._preview && this.reset();
                }, n.reset = function() {
                    this.CP.length = 0, this._renderData && this._renderData.clear();
                }, n.lateUpdate = function(t1) {
                    this._assembler && this._assembler.update && this._assembler.update(this, t1);
                }, n._render = function(t1) {
                    t1.commitComp(this, this._renderData, this._texture, this._assembler, null);
                }, s(i, [
                    {
                        key: "preview",
                        get: function get() {
                            return this._preview;
                        },
                        set: function set(t1) {
                            this._preview = t1, this.reset();
                        }
                    },
                    {
                        key: "fadeTime",
                        get: function get() {
                            return this._fadeTime;
                        },
                        set: function set(t1) {
                            this._fadeTime = t1, this.reset();
                        }
                    },
                    {
                        key: "minSeg",
                        get: function get() {
                            return this._minSeg;
                        },
                        set: function set(t1) {
                            this._minSeg = t1;
                        }
                    },
                    {
                        key: "stroke",
                        get: function get() {
                            return this._stroke;
                        },
                        set: function set(t1) {
                            this._stroke = t1;
                        }
                    },
                    {
                        key: "texture",
                        get: function get() {
                            return this._texture;
                        },
                        set: function set(t1) {
                            this._texture !== t1 && (this._texture = t1);
                        }
                    },
                    {
                        key: "fastMode",
                        get: function get() {
                            return this._fastMode;
                        },
                        set: function set(t1) {
                            this._fastMode = t1;
                        }
                    },
                    {
                        key: "points",
                        get: function get() {
                            return this.CP;
                        }
                    }
                ]), i;
            }(TB)).Point = X3, y(V3.prototype, "texture", [
                D3
            ], Object.getOwnPropertyDescriptor(V3.prototype, "texture"), V3.prototype), F3 = ho(V3.prototype, "_preview", [
                Ro
            ], function() {
                return !1;
            }), U3 = ho(V3.prototype, "_fadeTime", [
                Ro
            ], function() {
                return 1;
            }), x3 = ho(V3.prototype, "_minSeg", [
                Ro
            ], function() {
                return 1;
            }), j3 = ho(V3.prototype, "_stroke", [
                Ro
            ], function() {
                return 64;
            }), G3 = ho(V3.prototype, "_texture", [
                Ro
            ], function() {
                return null;
            }), H3 = ho(V3.prototype, "_fastMode", [
                Ro
            ], function() {
                return !1;
            }), V3)) || V3)), Y3 = new Or, K3 = new Or;
            function J3(t1, i) {
                return t1.x = -i.y, t1.y = i.x, t1;
            }
            var Z3 = new (function() {
                function t1() {}
                var i = t1.prototype;
                return i.createData = function(t1) {
                    var i = t1.requestRenderData();
                    return i.dataLength = 4, i.resize(16, 42), i;
                }, i.update = function(t1, i) {
                    var n, s = t1.stroke / 2, _$r = t1.node, h = _$r.worldMatrix, e = h.m12, u = h.m13, o = t1.points;
                    if (o.length > 1) {
                        var f = o[0], _$c = f.point.x - e, a = f.point.y - u;
                        _$c * _$c + a * a < t1.minSeg && (n = f);
                    }
                    n || (n = new X3, o.unshift(n)), n.setPoint(e, u), n.time = t1.fadeTime + i;
                    var v, l = 0, _$d = t1.renderData;
                    if (!(o.length < 2) && _$d) {
                        this._L(t1, _$d);
                        var w = t1.color, g = w.r, p = w.g, _$y = w.b, _$_ = _$r._uiProps.opacity * w.a, m = o[1];
                        m.distance = Or.subtract(K3, n.point, m.point).length(), K3.normalize(), m.setDir(K3.x, K3.y), n.setDir(K3.x, K3.y), _$d.dataLength = 2 * o.length;
                        for(var b = _$d.data, k = t1.fadeTime, A = !1, E = o.length - 1; E >= 0; E--){
                            var T = o[E], S = T.point, _$O = T.dir;
                            if (T.time -= i, T.time < 0) o.splice(E, 1);
                            else {
                                var _$I = T.time / k, _$R = o[E - 1];
                                if (!A) {
                                    if (!_$R) {
                                        o.splice(E, 1);
                                        continue;
                                    }
                                    S.x = _$R.point.x - _$O.x * _$I, S.y = _$R.point.y - _$O.y * _$I;
                                }
                                A = !0, J3(Y3, _$O);
                                var _$M = _$I * _$_, _$C = l;
                                b[_$C].x = S.x + Y3.x * s, b[_$C].y = S.y + Y3.y * s, b[_$C].u = 1, b[_$C].v = _$I, b[_$C].color.set(g, p, _$y, _$M), b[_$C += 1].x = S.x - Y3.x * s, b[_$C].y = S.y - Y3.y * s, b[_$C].u = 0, b[_$C].v = _$I, b[_$C].color.set(g, p, _$y, _$M), l += 2;
                            }
                        }
                        v = l <= 2 ? 0 : 3 * (l - 2), _$d.resize(l, v);
                    }
                }, i.mL = function() {}, i.rb = function() {}, i._L = function(t1, i) {
                    i.passDirty && i.updatePass(t1), i.nodeDirty && i.updateNode(t1), i.textureDirty && t1.texture && (i.updateTexture(t1.texture), i.material = t1.getRenderMaterial(0)), i.hashDirty && i.updateHash();
                }, i.fillBuffers = function(t1) {
                    var i = t1.renderData;
                    if (i) {
                        for(var n = i.chunk, s = i.data, _$r = i.vertexCount, h = i.indexCount, e = n.vb, u = 0, o = 0; o < _$r; o++){
                            var f = s[o];
                            e[u++] = f.x, e[u++] = f.y, e[u++] = f.z, e[u++] = f.u, e[u++] = f.v, Yr.toArray(e, f.color, u), u += 4;
                        }
                        n.bufferId;
                        for(var _$c = n.vertexOffset, a = n.meshBuffer, v = n.meshBuffer.iData, l = a.indexOffset, _$d = 0; _$d < h; _$d += 2){
                            var g = _$c + _$d;
                            v[l++] = g, v[l++] = g + 2, v[l++] = g + 1, v[l++] = g + 1, v[l++] = g + 2, v[l++] = g + 3;
                        }
                        a.indexOffset += i.indexCount, a.setDirty();
                    }
                }, t1;
            }());
            q3.Assembler = t1("eh", {
                getAssembler: function getAssembler() {
                    return Z3;
                }
            });
            var i51 = new (function() {
                function t1() {
                    this.maxParticleDeltaTime = 0;
                }
                var i = t1.prototype;
                return i.createData = function() {
                    return KL.add();
                }, i.removeData = function(t1) {
                    KL.remove(t1);
                }, t1;
            }());
            $3.Assembler = t1("ei", {
                getAssembler: function getAssembler() {
                    return i51.maxParticleDeltaTime || (i51.maxParticleDeltaTime = A.game.frameTime / 1e3 * 2), i51;
                }
            });
            var s51 = t1("el", {
                id: "",
                switchTo: function switchTo(t1) {
                    s51.physicsWorld && t1 !== s51.id && null != s51.backend[t1] ? (V("[PHYSICS2D]: switch from " + s51.id + " to " + t1 + "."), s51.id = t1, s51.wrapper = s51.backend[t1]) : V("[PHYSICS2D]: using " + s51.id + "."), s51.physicsWorld = h5();
                },
                register: function register(t1, i) {
                    V("[PHYSICS2D]: register " + t1 + "."), s51.backend[t1] = i, s51.physicsWorld && s51.id !== t1 || (s51.id = t1, s51.wrapper = i);
                },
                wrapper: {},
                backend: {},
                physicsWorld: null,
                runInEditor: !0
            }), r5 = function r5() {
                return 0;
            };
            function h5() {
                return new s51.wrapper.PhysicsWorld;
            }
            var e5 = {
                impl: null,
                rigidBody: null,
                isAwake: !1,
                isSleeping: !1,
                initialize: r5,
                setType: r5,
                setLinearDamping: r5,
                setAngularDamping: r5,
                setGravityScale: r5,
                setFixedRotation: r5,
                setAllowSleep: r5,
                isActive: r5,
                setActive: r5,
                wakeUp: r5,
                sleep: r5,
                getMass: r5,
                getInertia: r5,
                getLinearVelocity: r5,
                setLinearVelocity: r5,
                getLinearVelocityFromWorldPoint: r5,
                getAngularVelocity: r5,
                setAngularVelocity: r5,
                getLocalVector: r5,
                getWorldVector: r5,
                getLocalPoint: r5,
                getWorldPoint: r5,
                getLocalCenter: r5,
                getWorldCenter: r5,
                applyForce: r5,
                applyForceToCenter: r5,
                applyTorque: r5,
                applyLinearImpulse: r5,
                applyLinearImpulseToCenter: r5,
                applyAngularImpulse: r5,
                onEnable: r5,
                onDisable: r5,
                onDestroy: r5
            }, u5 = {
                INITED: !1
            };
            function o5(t1) {
                return u5.INITED || (u5.INITED = !0, u5[1] = function() {
                    return new s51.wrapper.BoxShape;
                }, u5[2] = function() {
                    return new s51.wrapper.CircleShape;
                }, u5[3] = function() {
                    return new s51.wrapper.PolygonShape;
                }), u5[t1]();
            }
            var f5 = {
                INITED: !1
            }, c5 = {
                impl: null,
                initialize: r5,
                apply: r5,
                setDampingRatio: r5,
                setFrequency: r5,
                setMaxForce: r5,
                setTarget: r5,
                setDistance: r5,
                setAngularOffset: r5,
                setCorrectionFactor: r5,
                setLinearOffset: r5,
                setMaxLength: r5,
                setMaxTorque: r5,
                setLowerLimit: r5,
                setUpperLimit: r5,
                setMaxMotorForce: r5,
                setMaxMotorTorque: r5,
                setMotorSpeed: r5,
                enableLimit: r5,
                enableMotor: r5,
                setLowerAngle: r5,
                setUpperAngle: r5
            };
            function a5(t1) {
                return v5(), f5[t1]();
            }
            function v5() {
                if (!f5.INITED) {
                    f5.INITED = !0;
                    var _$t = "builtin" === s51.id;
                    f5[2] = function() {
                        return _$t ? c5 : new s51.wrapper.SpringJoint;
                    }, f5[1] = function() {
                        return _$t ? c5 : new s51.wrapper.DistanceJoint;
                    }, f5[5] = function() {
                        return _$t ? c5 : new s51.wrapper.FixedJoint;
                    }, f5[4] = function() {
                        return _$t ? c5 : new s51.wrapper.MouseJoint;
                    }, f5[7] = function() {
                        return _$t ? c5 : new s51.wrapper.RelativeJoint;
                    }, f5[6] = function() {
                        return _$t ? c5 : new s51.wrapper.SliderJoint;
                    }, f5[3] = function() {
                        return _$t ? c5 : new s51.wrapper.WheelJoint;
                    }, f5[8] = function() {
                        return _$t ? c5 : new s51.wrapper.HingeJoint;
                    };
                }
            }
            function l5(t1) {
                return t1 && t1.__esModule && Object.prototype.hasOwnProperty.call(t1, "default") ? t1.default : t1;
            }
            "u" > typeof globalThis || ("u" > typeof window ? window : "u" > typeof global ? global : "u" > typeof self && self);
            var d5 = {};
            !function(t1) {
                function i(t1, i) {
                    return void 0 !== t1 ? t1 : i;
                }
                var e = 1e-5 * 1e-5, a = 2 / 180 * 3.14159265359, w = 8 / 180 * 3.14159265359, E = function() {
                    function t1(t1, i, n) {
                        void 0 === t1 && (t1 = 0), void 0 === i && (i = 0), void 0 === n && (n = 0), this.major = 0, this.minor = 0, this.revision = 0, this.major = t1, this.minor = i, this.revision = n;
                    }
                    return t1.prototype.toString = function() {
                        return this.major + "." + this.minor + "." + this.revision;
                    }, t1;
                }(), T = new E(2, 3, 2);
                function S(t1, i) {
                    for(var n = Array(t1), s = 0; s < t1; ++s)n[s] = i(s);
                    return n;
                }
                function O(t1, i) {
                    void 0 === i && (i = 0);
                    for(var n = Array(t1), s = 0; s < t1; ++s)n[s] = i;
                    return n;
                }
                var _$I = 3.14159265359 / 180, _$C = Math.abs;
                function N(t1, i) {
                    return t1 < i ? t1 : i;
                }
                function P(t1, i) {
                    return t1 > i ? t1 : i;
                }
                function D(t1, i, n) {
                    return t1 < i ? i : t1 > n ? n : t1;
                }
                var L = isFinite;
                function B(t1) {
                    return t1 * t1;
                }
                function F(t1) {
                    return 1 / Math.sqrt(t1);
                }
                var U = Math.sqrt, x = Math.pow, j = Math.cos, G = Math.sin, H = Math.acos, _$V = Math.asin, _$W = Math.atan2, _$z = function() {
                    function t1() {
                        for(var _$t = arguments.length, _$i = Array(_$t), n = 0; n < _$t; n++)_$i[n] = arguments[n];
                        if (_instanceof(_$i[0], Float32Array)) {
                            if (2 !== _$i[0].length) throw Error();
                            this.data = _$i[0];
                        } else {
                            var _$s = "number" == typeof _$i[0] ? _$i[0] : 0, _$r = "number" == typeof _$i[1] ? _$i[1] : 0;
                            this.data = new Float32Array([
                                _$s,
                                _$r
                            ]);
                        }
                    }
                    var _$i = t1.prototype;
                    return _$i.Clone = function() {
                        return new t1(this.x, this.y);
                    }, _$i.SetZero = function() {
                        return this.x = 0, this.y = 0, this;
                    }, _$i.Set = function(t1, i) {
                        return this.x = t1, this.y = i, this;
                    }, _$i.Copy = function(t1) {
                        return this.x = t1.x, this.y = t1.y, this;
                    }, _$i.SelfAdd = function(t1) {
                        return this.x += t1.x, this.y += t1.y, this;
                    }, _$i.SelfAddXY = function(t1, i) {
                        return this.x += t1, this.y += i, this;
                    }, _$i.SelfSub = function(t1) {
                        return this.x -= t1.x, this.y -= t1.y, this;
                    }, _$i.SelfSubXY = function(t1, i) {
                        return this.x -= t1, this.y -= i, this;
                    }, _$i.SelfMul = function(t1) {
                        return this.x *= t1, this.y *= t1, this;
                    }, _$i.SelfMulAdd = function(t1, i) {
                        return this.x += t1 * i.x, this.y += t1 * i.y, this;
                    }, _$i.SelfMulSub = function(t1, i) {
                        return this.x -= t1 * i.x, this.y -= t1 * i.y, this;
                    }, _$i.Dot = function(t1) {
                        return this.x * t1.x + this.y * t1.y;
                    }, _$i.Cross = function(t1) {
                        return this.x * t1.y - this.y * t1.x;
                    }, _$i.Length = function() {
                        var _$t = this.x, _$i = this.y;
                        return Math.sqrt(_$t * _$t + _$i * _$i);
                    }, _$i.LengthSquared = function() {
                        var _$t = this.x, _$i = this.y;
                        return _$t * _$t + _$i * _$i;
                    }, _$i.Normalize = function() {
                        var _$t = this.Length();
                        if (_$t >= 1e-5) {
                            var _$i = 1 / _$t;
                            this.x *= _$i, this.y *= _$i;
                        }
                        return _$t;
                    }, _$i.SelfNormalize = function() {
                        var _$t = this.Length();
                        if (_$t >= 1e-5) {
                            var _$i = 1 / _$t;
                            this.x *= _$i, this.y *= _$i;
                        }
                        return this;
                    }, _$i.SelfRotate = function(t1) {
                        var _$i = Math.cos(t1), n = Math.sin(t1), _$s = this.x;
                        return this.x = _$i * _$s - n * this.y, this.y = n * _$s + _$i * this.y, this;
                    }, _$i.SelfRotateCosSin = function(t1, i) {
                        var n = this.x;
                        return this.x = t1 * n - i * this.y, this.y = i * n + t1 * this.y, this;
                    }, _$i.IsValid = function() {
                        return isFinite(this.x) && isFinite(this.y);
                    }, _$i.SelfCrossVS = function(t1) {
                        var _$i = this.x;
                        return this.x = t1 * this.y, this.y = -t1 * _$i, this;
                    }, _$i.SelfCrossSV = function(t1) {
                        var _$i = this.x;
                        return this.x = -t1 * this.y, this.y = t1 * _$i, this;
                    }, _$i.SelfMinV = function(t1) {
                        return this.x = N(this.x, t1.x), this.y = N(this.y, t1.y), this;
                    }, _$i.SelfMaxV = function(t1) {
                        return this.x = P(this.x, t1.x), this.y = P(this.y, t1.y), this;
                    }, _$i.SelfAbs = function() {
                        return this.x = _$C(this.x), this.y = _$C(this.y), this;
                    }, _$i.SelfNeg = function() {
                        return this.x = -this.x, this.y = -this.y, this;
                    }, _$i.SelfSkew = function() {
                        var _$t = this.x;
                        return this.x = -this.y, this.y = _$t, this;
                    }, t1.MakeArray = function(i) {
                        return S(i, function() {
                            return new t1;
                        });
                    }, t1.AbsV = function(t1, i) {
                        return i.x = _$C(t1.x), i.y = _$C(t1.y), i;
                    }, t1.MinV = function(t1, i, n) {
                        return n.x = N(t1.x, i.x), n.y = N(t1.y, i.y), n;
                    }, t1.MaxV = function(t1, i, n) {
                        return n.x = P(t1.x, i.x), n.y = P(t1.y, i.y), n;
                    }, t1.ClampV = function(t1, i, n, s) {
                        return s.x = D(t1.x, i.x, n.x), s.y = D(t1.y, i.y, n.y), s;
                    }, t1.RotateV = function(t1, i, n) {
                        var _$s = t1.x, _$r = t1.y, h = Math.cos(i), e = Math.sin(i);
                        return n.x = h * _$s - e * _$r, n.y = e * _$s + h * _$r, n;
                    }, t1.DotVV = function(t1, i) {
                        return t1.x * i.x + t1.y * i.y;
                    }, t1.CrossVV = function(t1, i) {
                        return t1.x * i.y - t1.y * i.x;
                    }, t1.CrossVS = function(t1, i, n) {
                        var _$s = t1.x;
                        return n.x = i * t1.y, n.y = -i * _$s, n;
                    }, t1.CrossVOne = function(t1, i) {
                        var n = t1.x;
                        return i.x = t1.y, i.y = -n, i;
                    }, t1.CrossSV = function(t1, i, n) {
                        var _$s = i.x;
                        return n.x = -t1 * i.y, n.y = t1 * _$s, n;
                    }, t1.CrossOneV = function(t1, i) {
                        var n = t1.x;
                        return i.x = -t1.y, i.y = n, i;
                    }, t1.AddVV = function(t1, i, n) {
                        return n.x = t1.x + i.x, n.y = t1.y + i.y, n;
                    }, t1.SubVV = function(t1, i, n) {
                        return n.x = t1.x - i.x, n.y = t1.y - i.y, n;
                    }, t1.MulSV = function(t1, i, n) {
                        return n.x = i.x * t1, n.y = i.y * t1, n;
                    }, t1.MulVS = function(t1, i, n) {
                        return n.x = t1.x * i, n.y = t1.y * i, n;
                    }, t1.AddVMulSV = function(t1, i, n, s) {
                        return s.x = t1.x + i * n.x, s.y = t1.y + i * n.y, s;
                    }, t1.SubVMulSV = function(t1, i, n, s) {
                        return s.x = t1.x - i * n.x, s.y = t1.y - i * n.y, s;
                    }, t1.AddVCrossSV = function(t1, i, n, s) {
                        var _$r = n.x;
                        return s.x = t1.x - i * n.y, s.y = t1.y + i * _$r, s;
                    }, t1.MidVV = function(t1, i, n) {
                        return n.x = .5 * (t1.x + i.x), n.y = .5 * (t1.y + i.y), n;
                    }, t1.ExtVV = function(t1, i, n) {
                        return n.x = .5 * (i.x - t1.x), n.y = .5 * (i.y - t1.y), n;
                    }, t1.IsEqualToV = function(t1, i) {
                        return t1.x === i.x && t1.y === i.y;
                    }, t1.DistanceVV = function(t1, i) {
                        var n = t1.x - i.x, _$s = t1.y - i.y;
                        return Math.sqrt(n * n + _$s * _$s);
                    }, t1.DistanceSquaredVV = function(t1, i) {
                        var n = t1.x - i.x, _$s = t1.y - i.y;
                        return n * n + _$s * _$s;
                    }, t1.NegV = function(t1, i) {
                        return i.x = -t1.x, i.y = -t1.y, i;
                    }, s(t1, [
                        {
                            key: "x",
                            get: function get() {
                                return this.data[0];
                            },
                            set: function set(t1) {
                                this.data[0] = t1;
                            }
                        },
                        {
                            key: "y",
                            get: function get() {
                                return this.data[1];
                            },
                            set: function set(t1) {
                                this.data[1] = t1;
                            }
                        }
                    ]), t1;
                }();
                _$z.ZERO = new _$z(0, 0), _$z.UNITX = new _$z(1, 0), _$z.UNITY = new _$z(0, 1), _$z.s_t0 = new _$z, _$z.s_t1 = new _$z, _$z.s_t2 = new _$z, _$z.s_t3 = new _$z;
                var _$$ = new _$z(0, 0), _$X = function() {
                    function t1() {
                        for(var _$t = arguments.length, _$i = Array(_$t), n = 0; n < _$t; n++)_$i[n] = arguments[n];
                        if (_instanceof(_$i[0], Float32Array)) {
                            if (3 !== _$i[0].length) throw Error();
                            this.data = _$i[0];
                        } else {
                            var _$s = "number" == typeof _$i[0] ? _$i[0] : 0, _$r = "number" == typeof _$i[1] ? _$i[1] : 0, h = "number" == typeof _$i[2] ? _$i[2] : 0;
                            this.data = new Float32Array([
                                _$s,
                                _$r,
                                h
                            ]);
                        }
                    }
                    var _$i = t1.prototype;
                    return _$i.Clone = function() {
                        return new t1(this.x, this.y, this.z);
                    }, _$i.SetZero = function() {
                        return this.x = 0, this.y = 0, this.z = 0, this;
                    }, _$i.SetXYZ = function(t1, i, n) {
                        return this.x = t1, this.y = i, this.z = n, this;
                    }, _$i.Copy = function(t1) {
                        return this.x = t1.x, this.y = t1.y, this.z = t1.z, this;
                    }, _$i.SelfNeg = function() {
                        return this.x = -this.x, this.y = -this.y, this.z = -this.z, this;
                    }, _$i.SelfAdd = function(t1) {
                        return this.x += t1.x, this.y += t1.y, this.z += t1.z, this;
                    }, _$i.SelfAddXYZ = function(t1, i, n) {
                        return this.x += t1, this.y += i, this.z += n, this;
                    }, _$i.SelfSub = function(t1) {
                        return this.x -= t1.x, this.y -= t1.y, this.z -= t1.z, this;
                    }, _$i.SelfSubXYZ = function(t1, i, n) {
                        return this.x -= t1, this.y -= i, this.z -= n, this;
                    }, _$i.SelfMul = function(t1) {
                        return this.x *= t1, this.y *= t1, this.z *= t1, this;
                    }, t1.DotV3V3 = function(t1, i) {
                        return t1.x * i.x + t1.y * i.y + t1.z * i.z;
                    }, t1.CrossV3V3 = function(t1, i, n) {
                        var _$s = t1.x, _$r = t1.y, h = t1.z, e = i.x, u = i.y, o = i.z;
                        return n.x = _$r * o - h * u, n.y = h * e - _$s * o, n.z = _$s * u - _$r * e, n;
                    }, s(t1, [
                        {
                            key: "x",
                            get: function get() {
                                return this.data[0];
                            },
                            set: function set(t1) {
                                this.data[0] = t1;
                            }
                        },
                        {
                            key: "y",
                            get: function get() {
                                return this.data[1];
                            },
                            set: function set(t1) {
                                this.data[1] = t1;
                            }
                        },
                        {
                            key: "z",
                            get: function get() {
                                return this.data[2];
                            },
                            set: function set(t1) {
                                this.data[2] = t1;
                            }
                        }
                    ]), t1;
                }();
                _$X.ZERO = new _$X(0, 0, 0), _$X.s_t0 = new _$X;
                var _$q = function() {
                    function t1() {
                        this.data = new Float32Array([
                            1,
                            0,
                            0,
                            1
                        ]), this.ex = new _$z(this.data.subarray(0, 2)), this.ey = new _$z(this.data.subarray(2, 4));
                    }
                    var _$i = t1.prototype;
                    return _$i.Clone = function() {
                        return (new t1).Copy(this);
                    }, t1.FromVV = function(i, n) {
                        return (new t1).SetVV(i, n);
                    }, t1.FromSSSS = function(i, n, s, r) {
                        return (new t1).SetSSSS(i, n, s, r);
                    }, t1.FromAngle = function(i) {
                        return (new t1).SetAngle(i);
                    }, _$i.SetSSSS = function(t1, i, n, s) {
                        return this.ex.Set(t1, n), this.ey.Set(i, s), this;
                    }, _$i.SetVV = function(t1, i) {
                        return this.ex.Copy(t1), this.ey.Copy(i), this;
                    }, _$i.SetAngle = function(t1) {
                        var _$i = Math.cos(t1), n = Math.sin(t1);
                        return this.ex.Set(_$i, n), this.ey.Set(-n, _$i), this;
                    }, _$i.Copy = function(t1) {
                        return this.ex.Copy(t1.ex), this.ey.Copy(t1.ey), this;
                    }, _$i.SetIdentity = function() {
                        return this.ex.Set(1, 0), this.ey.Set(0, 1), this;
                    }, _$i.SetZero = function() {
                        return this.ex.SetZero(), this.ey.SetZero(), this;
                    }, _$i.GetAngle = function() {
                        return Math.atan2(this.ex.y, this.ex.x);
                    }, _$i.GetInverse = function(t1) {
                        var _$i = this.ex.x, n = this.ey.x, s = this.ex.y, _$r = this.ey.y, h = _$i * _$r - n * s;
                        return 0 !== h && (h = 1 / h), t1.ex.x = h * _$r, t1.ey.x = -h * n, t1.ex.y = -h * s, t1.ey.y = h * _$i, t1;
                    }, _$i.Solve = function(t1, i, n) {
                        var s = this.ex.x, _$r = this.ey.x, h = this.ex.y, e = this.ey.y, u = s * e - _$r * h;
                        return 0 !== u && (u = 1 / u), n.x = u * (e * t1 - _$r * i), n.y = u * (s * i - h * t1), n;
                    }, _$i.SelfAbs = function() {
                        return this.ex.SelfAbs(), this.ey.SelfAbs(), this;
                    }, _$i.SelfInv = function() {
                        return this.GetInverse(this), this;
                    }, _$i.SelfAddM = function(t1) {
                        return this.ex.SelfAdd(t1.ex), this.ey.SelfAdd(t1.ey), this;
                    }, _$i.SelfSubM = function(t1) {
                        return this.ex.SelfSub(t1.ex), this.ey.SelfSub(t1.ey), this;
                    }, t1.AbsM = function(t1, i) {
                        var n = t1.ex, s = t1.ey;
                        return i.ex.x = _$C(n.x), i.ex.y = _$C(n.y), i.ey.x = _$C(s.x), i.ey.y = _$C(s.y), i;
                    }, t1.MulMV = function(t1, i, n) {
                        var s = t1.ex, _$r = t1.ey, h = i.x, e = i.y;
                        return n.x = s.x * h + _$r.x * e, n.y = s.y * h + _$r.y * e, n;
                    }, t1.MulTMV = function(t1, i, n) {
                        var s = t1.ex, _$r = t1.ey, h = i.x, e = i.y;
                        return n.x = s.x * h + s.y * e, n.y = _$r.x * h + _$r.y * e, n;
                    }, t1.AddMM = function(t1, i, n) {
                        var s = t1.ex, _$r = t1.ey, h = i.ex, e = i.ey;
                        return n.ex.x = s.x + h.x, n.ex.y = s.y + h.y, n.ey.x = _$r.x + e.x, n.ey.y = _$r.y + e.y, n;
                    }, t1.MulMM = function(t1, i, n) {
                        var s = t1.ex.x, _$r = t1.ex.y, h = t1.ey.x, e = t1.ey.y, u = i.ex.x, o = i.ex.y, f = i.ey.x, _$c = i.ey.y;
                        return n.ex.x = s * u + h * o, n.ex.y = _$r * u + e * o, n.ey.x = s * f + h * _$c, n.ey.y = _$r * f + e * _$c, n;
                    }, t1.MulTMM = function(t1, i, n) {
                        var s = t1.ex.x, _$r = t1.ex.y, h = t1.ey.x, e = t1.ey.y, u = i.ex.x, o = i.ex.y, f = i.ey.x, _$c = i.ey.y;
                        return n.ex.x = s * u + _$r * o, n.ex.y = h * u + e * o, n.ey.x = s * f + _$r * _$c, n.ey.y = h * f + e * _$c, n;
                    }, t1;
                }();
                _$q.IDENTITY = new _$q;
                var _$Y = function() {
                    function t1() {
                        this.data = new Float32Array([
                            1,
                            0,
                            0,
                            0,
                            1,
                            0,
                            0,
                            0,
                            1
                        ]), this.ex = new _$X(this.data.subarray(0, 3)), this.ey = new _$X(this.data.subarray(3, 6)), this.ez = new _$X(this.data.subarray(6, 9));
                    }
                    var _$i = t1.prototype;
                    return _$i.Clone = function() {
                        return (new t1).Copy(this);
                    }, _$i.SetVVV = function(t1, i, n) {
                        return this.ex.Copy(t1), this.ey.Copy(i), this.ez.Copy(n), this;
                    }, _$i.Copy = function(t1) {
                        return this.ex.Copy(t1.ex), this.ey.Copy(t1.ey), this.ez.Copy(t1.ez), this;
                    }, _$i.SetIdentity = function() {
                        return this.ex.SetXYZ(1, 0, 0), this.ey.SetXYZ(0, 1, 0), this.ez.SetXYZ(0, 0, 1), this;
                    }, _$i.SetZero = function() {
                        return this.ex.SetZero(), this.ey.SetZero(), this.ez.SetZero(), this;
                    }, _$i.SelfAddM = function(t1) {
                        return this.ex.SelfAdd(t1.ex), this.ey.SelfAdd(t1.ey), this.ez.SelfAdd(t1.ez), this;
                    }, _$i.Solve33 = function(t1, i, n, s) {
                        var _$r = this.ex.x, h = this.ex.y, e = this.ex.z, u = this.ey.x, o = this.ey.y, f = this.ey.z, _$c = this.ez.x, a = this.ez.y, v = this.ez.z, l = _$r * (o * v - f * a) + h * (f * _$c - u * v) + e * (u * a - o * _$c);
                        return 0 !== l && (l = 1 / l), s.x = l * (t1 * (o * v - f * a) + i * (f * _$c - u * v) + n * (u * a - o * _$c)), s.y = l * (_$r * (i * v - n * a) + h * (n * _$c - t1 * v) + e * (t1 * a - i * _$c)), s.z = l * (_$r * (o * n - f * i) + h * (f * t1 - u * n) + e * (u * i - o * t1)), s;
                    }, _$i.Solve22 = function(t1, i, n) {
                        var s = this.ex.x, _$r = this.ey.x, h = this.ex.y, e = this.ey.y, u = s * e - _$r * h;
                        return 0 !== u && (u = 1 / u), n.x = u * (e * t1 - _$r * i), n.y = u * (s * i - h * t1), n;
                    }, _$i.GetInverse22 = function(t1) {
                        var _$i = this.ex.x, n = this.ey.x, s = this.ex.y, _$r = this.ey.y, h = _$i * _$r - n * s;
                        0 !== h && (h = 1 / h), t1.ex.x = h * _$r, t1.ey.x = -h * n, t1.ex.z = 0, t1.ex.y = -h * s, t1.ey.y = h * _$i, t1.ey.z = 0, t1.ez.x = 0, t1.ez.y = 0, t1.ez.z = 0;
                    }, _$i.GetSymInverse33 = function(t1) {
                        var _$i = _$X.DotV3V3(this.ex, _$X.CrossV3V3(this.ey, this.ez, _$X.s_t0));
                        0 !== _$i && (_$i = 1 / _$i);
                        var n = this.ex.x, s = this.ey.x, _$r = this.ez.x, h = this.ey.y, e = this.ez.y, u = this.ez.z;
                        t1.ex.x = _$i * (h * u - e * e), t1.ex.y = _$i * (_$r * e - s * u), t1.ex.z = _$i * (s * e - _$r * h), t1.ey.x = t1.ex.y, t1.ey.y = _$i * (n * u - _$r * _$r), t1.ey.z = _$i * (_$r * s - n * e), t1.ez.x = t1.ex.z, t1.ez.y = t1.ey.z, t1.ez.z = _$i * (n * h - s * s);
                    }, t1.MulM33V3 = function(t1, i, n) {
                        var s = i.x, _$r = i.y, h = i.z;
                        return n.x = t1.ex.x * s + t1.ey.x * _$r + t1.ez.x * h, n.y = t1.ex.y * s + t1.ey.y * _$r + t1.ez.y * h, n.z = t1.ex.z * s + t1.ey.z * _$r + t1.ez.z * h, n;
                    }, t1.MulM33XYZ = function(t1, i, n, s, r) {
                        return r.x = t1.ex.x * i + t1.ey.x * n + t1.ez.x * s, r.y = t1.ex.y * i + t1.ey.y * n + t1.ez.y * s, r.z = t1.ex.z * i + t1.ey.z * n + t1.ez.z * s, r;
                    }, t1.MulM33V2 = function(t1, i, n) {
                        var s = i.x, _$r = i.y;
                        return n.x = t1.ex.x * s + t1.ey.x * _$r, n.y = t1.ex.y * s + t1.ey.y * _$r, n;
                    }, t1.MulM33XY = function(t1, i, n, s) {
                        return s.x = t1.ex.x * i + t1.ey.x * n, s.y = t1.ex.y * i + t1.ey.y * n, s;
                    }, t1;
                }();
                _$Y.IDENTITY = new _$Y;
                var _$K = function() {
                    function t1(t1) {
                        void 0 === t1 && (t1 = 0), this.s = 0, this.c = 1, t1 && (this.s = Math.sin(t1), this.c = Math.cos(t1));
                    }
                    var _$i = t1.prototype;
                    return _$i.Clone = function() {
                        return (new t1).Copy(this);
                    }, _$i.Copy = function(t1) {
                        return this.s = t1.s, this.c = t1.c, this;
                    }, _$i.SetAngle = function(t1) {
                        return this.s = Math.sin(t1), this.c = Math.cos(t1), this;
                    }, _$i.SetIdentity = function() {
                        return this.s = 0, this.c = 1, this;
                    }, _$i.GetAngle = function() {
                        return Math.atan2(this.s, this.c);
                    }, _$i.GetXAxis = function(t1) {
                        return t1.x = this.c, t1.y = this.s, t1;
                    }, _$i.GetYAxis = function(t1) {
                        return t1.x = -this.s, t1.y = this.c, t1;
                    }, t1.MulRR = function(t1, i, n) {
                        var s = t1.c, _$r = t1.s, h = i.c, e = i.s;
                        return n.s = _$r * h + s * e, n.c = s * h - _$r * e, n;
                    }, t1.MulTRR = function(t1, i, n) {
                        var s = t1.c, _$r = t1.s, h = i.c, e = i.s;
                        return n.s = s * e - _$r * h, n.c = s * h + _$r * e, n;
                    }, t1.MulRV = function(t1, i, n) {
                        var s = t1.c, _$r = t1.s, h = i.x, e = i.y;
                        return n.x = s * h - _$r * e, n.y = _$r * h + s * e, n;
                    }, t1.MulTRV = function(t1, i, n) {
                        var s = t1.c, _$r = t1.s, h = i.x, e = i.y;
                        return n.x = s * h + _$r * e, n.y = -_$r * h + s * e, n;
                    }, t1;
                }();
                _$K.IDENTITY = new _$K;
                var J = function() {
                    function t1() {
                        this.p = new _$z, this.q = new _$K;
                    }
                    var _$i = t1.prototype;
                    return _$i.Clone = function() {
                        return (new t1).Copy(this);
                    }, _$i.Copy = function(t1) {
                        return this.p.Copy(t1.p), this.q.Copy(t1.q), this;
                    }, _$i.SetIdentity = function() {
                        return this.p.SetZero(), this.q.SetIdentity(), this;
                    }, _$i.SetPositionRotation = function(t1, i) {
                        return this.p.Copy(t1), this.q.Copy(i), this;
                    }, _$i.SetPositionAngle = function(t1, i) {
                        return this.p.Copy(t1), this.q.SetAngle(i), this;
                    }, _$i.SetPosition = function(t1) {
                        return this.p.Copy(t1), this;
                    }, _$i.SetPositionXY = function(t1, i) {
                        return this.p.Set(t1, i), this;
                    }, _$i.SetRotation = function(t1) {
                        return this.q.Copy(t1), this;
                    }, _$i.SetRotationAngle = function(t1) {
                        return this.q.SetAngle(t1), this;
                    }, _$i.GetPosition = function() {
                        return this.p;
                    }, _$i.GetRotation = function() {
                        return this.q;
                    }, _$i.GetRotationAngle = function() {
                        return this.q.GetAngle();
                    }, _$i.GetAngle = function() {
                        return this.q.GetAngle();
                    }, t1.MulXV = function(t1, i, n) {
                        var s = t1.q.c, _$r = t1.q.s, h = i.x, e = i.y;
                        return n.x = s * h - _$r * e + t1.p.x, n.y = _$r * h + s * e + t1.p.y, n;
                    }, t1.MulTXV = function(t1, i, n) {
                        var s = t1.q.c, _$r = t1.q.s, h = i.x - t1.p.x, e = i.y - t1.p.y;
                        return n.x = s * h + _$r * e, n.y = -_$r * h + s * e, n;
                    }, t1.MulXX = function(t1, i, n) {
                        return _$K.MulRR(t1.q, i.q, n.q), _$z.AddVV(_$K.MulRV(t1.q, i.p, n.p), t1.p, n.p), n;
                    }, t1.MulTXX = function(t1, i, n) {
                        return _$K.MulTRR(t1.q, i.q, n.q), _$K.MulTRV(t1.q, _$z.SubVV(i.p, t1.p, n.p), n.p), n;
                    }, t1;
                }();
                J.IDENTITY = new J;
                var _$Q, Z = function() {
                    function t1() {
                        this.localCenter = new _$z, this.c0 = new _$z, this.c = new _$z, this.a0 = 0, this.a = 0, this.alpha0 = 0;
                    }
                    var _$i = t1.prototype;
                    return _$i.Clone = function() {
                        return (new t1).Copy(this);
                    }, _$i.Copy = function(t1) {
                        return this.localCenter.Copy(t1.localCenter), this.c0.Copy(t1.c0), this.c.Copy(t1.c), this.a0 = t1.a0, this.a = t1.a, this.alpha0 = t1.alpha0, this;
                    }, _$i.GetTransform = function(t1, i) {
                        var n = 1 - i;
                        t1.p.x = n * this.c0.x + i * this.c.x, t1.p.y = n * this.c0.y + i * this.c.y;
                        var s = n * this.a0 + i * this.a;
                        return t1.q.SetAngle(s), t1.p.SelfSub(_$K.MulRV(t1.q, this.localCenter, _$z.s_t0)), t1;
                    }, _$i.Advance = function(t1) {
                        var _$i = (t1 - this.alpha0) / (1 - this.alpha0), n = 1 - _$i;
                        this.c0.x = n * this.c0.x + _$i * this.c.x, this.c0.y = n * this.c0.y + _$i * this.c.y, this.a0 = n * this.a0 + _$i * this.a, this.alpha0 = t1;
                    }, _$i.Normalize = function() {
                        var _$t = 6.28318530718 * Math.floor(this.a0 / 6.28318530718);
                        this.a0 -= _$t, this.a -= _$t;
                    }, t1;
                }(), _$tt = function() {
                    function t1() {
                        for(var _$t = arguments.length, _$i = Array(_$t), n = 0; n < _$t; n++)_$i[n] = arguments[n];
                        if (_instanceof(_$i[0], Float32Array)) {
                            if (4 !== _$i[0].length) throw Error();
                            this.data = _$i[0];
                        } else {
                            var _$s = "number" == typeof _$i[0] ? _$i[0] : .5, _$r = "number" == typeof _$i[1] ? _$i[1] : .5, h = "number" == typeof _$i[2] ? _$i[2] : .5, e = "number" == typeof _$i[3] ? _$i[3] : 1;
                            this.data = new Float32Array([
                                _$s,
                                _$r,
                                h,
                                e
                            ]);
                        }
                    }
                    var _$i = t1.prototype;
                    return _$i.Clone = function() {
                        return (new t1).Copy(this);
                    }, _$i.Copy = function(t1) {
                        return this.r = t1.r, this.g = t1.g, this.b = t1.b, this.a = t1.a, this;
                    }, _$i.IsEqual = function(t1) {
                        return this.r === t1.r && this.g === t1.g && this.b === t1.b && this.a === t1.a;
                    }, _$i.IsZero = function() {
                        return 0 === this.r && 0 === this.g && 0 === this.b && 0 === this.a;
                    }, _$i.Set = function(t1, i, n, s) {
                        void 0 === s && (s = this.a), this.SetRGBA(t1, i, n, s);
                    }, _$i.SetByteRGB = function(t1, i, n) {
                        return this.r = t1 / 255, this.g = i / 255, this.b = n / 255, this;
                    }, _$i.SetByteRGBA = function(t1, i, n, s) {
                        return this.r = t1 / 255, this.g = i / 255, this.b = n / 255, this.a = s / 255, this;
                    }, _$i.SetRGB = function(t1, i, n) {
                        return this.r = t1, this.g = i, this.b = n, this;
                    }, _$i.SetRGBA = function(t1, i, n, s) {
                        return this.r = t1, this.g = i, this.b = n, this.a = s, this;
                    }, _$i.SelfAdd = function(t1) {
                        return this.r += t1.r, this.g += t1.g, this.b += t1.b, this.a += t1.a, this;
                    }, _$i.Add = function(t1, i) {
                        return i.r = this.r + t1.r, i.g = this.g + t1.g, i.b = this.b + t1.b, i.a = this.a + t1.a, i;
                    }, _$i.SelfSub = function(t1) {
                        return this.r -= t1.r, this.g -= t1.g, this.b -= t1.b, this.a -= t1.a, this;
                    }, _$i.Sub = function(t1, i) {
                        return i.r = this.r - t1.r, i.g = this.g - t1.g, i.b = this.b - t1.b, i.a = this.a - t1.a, i;
                    }, _$i.SelfMul = function(t1) {
                        return this.r *= t1, this.g *= t1, this.b *= t1, this.a *= t1, this;
                    }, _$i.Mul = function(t1, i) {
                        return i.r = this.r * t1, i.g = this.g * t1, i.b = this.b * t1, i.a = this.a * t1, i;
                    }, _$i.Mix = function(i, n) {
                        t1.MixColors(this, i, n);
                    }, t1.MixColors = function(t1, i, n) {
                        var _$s = n * (i.r - t1.r), _$r = n * (i.g - t1.g), h = n * (i.b - t1.b), e = n * (i.a - t1.a);
                        t1.r += _$s, t1.g += _$r, t1.b += h, t1.a += e, i.r -= _$s, i.g -= _$r, i.b -= h, i.a -= e;
                    }, _$i.MakeStyleString = function(i) {
                        return void 0 === i && (i = this.a), t1.MakeStyleString(this.r, this.g, this.b, i);
                    }, t1.MakeStyleString = function(t1, i, n, s) {
                        return void 0 === s && (s = 1), t1 *= 255, i *= 255, n *= 255, s < 1 ? "rgba(" + t1 + "," + i + "," + n + "," + s + ")" : "rgb(" + t1 + "," + i + "," + n + ")";
                    }, s(t1, [
                        {
                            key: "r",
                            get: function get() {
                                return this.data[0];
                            },
                            set: function set(t1) {
                                this.data[0] = t1;
                            }
                        },
                        {
                            key: "g",
                            get: function get() {
                                return this.data[1];
                            },
                            set: function set(t1) {
                                this.data[1] = t1;
                            }
                        },
                        {
                            key: "b",
                            get: function get() {
                                return this.data[2];
                            },
                            set: function set(t1) {
                                this.data[2] = t1;
                            }
                        },
                        {
                            key: "a",
                            get: function get() {
                                return this.data[3];
                            },
                            set: function set(t1) {
                                this.data[3] = t1;
                            }
                        }
                    ]), t1;
                }();
                _$tt.ZERO = new _$tt(0, 0, 0, 0), _$tt.RED = new _$tt(1, 0, 0), _$tt.GREEN = new _$tt(0, 1, 0), _$tt.BLUE = new _$tt(0, 0, 1), (_$Q = t1.b2DrawFlags || (t1.b2DrawFlags = {}))[_$Q.e_none = 0] = "e_none", _$Q[_$Q.e_shapeBit = 1] = "e_shapeBit", _$Q[_$Q.e_jointBit = 2] = "e_jointBit", _$Q[_$Q.e_aabbBit = 4] = "e_aabbBit", _$Q[_$Q.e_pairBit = 8] = "e_pairBit", _$Q[_$Q.e_centerOfMassBit = 16] = "e_centerOfMassBit", _$Q[_$Q.e_particleBit = 32] = "e_particleBit", _$Q[_$Q.e_controllerBit = 64] = "e_controllerBit", _$Q[_$Q.e_all = 63] = "e_all";
                var it = function() {
                    function t1() {
                        this.m_drawFlags = 0;
                    }
                    var _$i = t1.prototype;
                    return _$i.SetFlags = function(t1) {
                        this.m_drawFlags = t1;
                    }, _$i.GetFlags = function() {
                        return this.m_drawFlags;
                    }, _$i.AppendFlags = function(t1) {
                        this.m_drawFlags |= t1;
                    }, _$i.ClearFlags = function(t1) {
                        this.m_drawFlags &= ~t1;
                    }, t1;
                }(), _$nt = function() {
                    function t1() {
                        this.m_start = Date.now();
                    }
                    var _$i = t1.prototype;
                    return _$i.Reset = function() {
                        return this.m_start = Date.now(), this;
                    }, _$i.GetMilliseconds = function() {
                        return Date.now() - this.m_start;
                    }, t1;
                }(), st = function() {
                    function t1() {
                        this.m_count = 0, this.m_min_count = 0, this.m_max_count = 0;
                    }
                    var _$i = t1.prototype;
                    return _$i.GetCount = function() {
                        return this.m_count;
                    }, _$i.GetMinCount = function() {
                        return this.m_min_count;
                    }, _$i.GetMaxCount = function() {
                        return this.m_max_count;
                    }, _$i.ResetCount = function() {
                        var _$t = this.m_count;
                        return this.m_count = 0, _$t;
                    }, _$i.ResetMinCount = function() {
                        this.m_min_count = 0;
                    }, _$i.ResetMaxCount = function() {
                        this.m_max_count = 0;
                    }, _$i.Increment = function() {
                        this.m_count++, this.m_max_count < this.m_count && (this.m_max_count = this.m_count);
                    }, _$i.Decrement = function() {
                        this.m_count--, this.m_min_count > this.m_count && (this.m_min_count = this.m_count);
                    }, t1;
                }(), _$rt = function() {
                    function t1(t1) {
                        this.m_stack = [], this.m_count = 0, this.m_stack = S(t1, function() {
                            return null;
                        }), this.m_count = 0;
                    }
                    var _$i = t1.prototype;
                    return _$i.Reset = function() {
                        return this.m_count = 0, this;
                    }, _$i.Push = function(t1) {
                        this.m_stack[this.m_count] = t1, this.m_count++;
                    }, _$i.Pop = function() {
                        this.m_count--;
                        var _$t = this.m_stack[this.m_count];
                        if (this.m_stack[this.m_count] = null, null === _$t) throw Error();
                        return _$t;
                    }, _$i.GetCount = function() {
                        return this.m_count;
                    }, t1;
                }(), ht = function() {
                    function t1() {
                        this.m_buffer = _$z.MakeArray(2), this.m_vertices = this.m_buffer, this.m_count = 0, this.m_radius = 0;
                    }
                    var _$i = t1.prototype;
                    return _$i.Copy = function(t1) {
                        return t1.m_vertices === t1.m_buffer ? (this.m_vertices = this.m_buffer, this.m_buffer[0].Copy(t1.m_buffer[0]), this.m_buffer[1].Copy(t1.m_buffer[1])) : this.m_vertices = t1.m_vertices, this.m_count = t1.m_count, this.m_radius = t1.m_radius, this;
                    }, _$i.Reset = function() {
                        return this.m_vertices = this.m_buffer, this.m_count = 0, this.m_radius = 0, this;
                    }, _$i.SetShape = function(t1, i) {
                        t1.SetupDistanceProxy(this, i);
                    }, _$i.SetVerticesRadius = function(t1, i, n) {
                        this.m_vertices = t1, this.m_count = i, this.m_radius = n;
                    }, _$i.GetSupport = function(t1) {
                        for(var _$i = 0, n = _$z.DotVV(this.m_vertices[0], t1), s = 1; s < this.m_count; ++s){
                            var _$r = _$z.DotVV(this.m_vertices[s], t1);
                            _$r > n && (_$i = s, n = _$r);
                        }
                        return _$i;
                    }, _$i.GetSupportVertex = function(t1) {
                        for(var _$i = 0, n = _$z.DotVV(this.m_vertices[0], t1), s = 1; s < this.m_count; ++s){
                            var _$r = _$z.DotVV(this.m_vertices[s], t1);
                            _$r > n && (_$i = s, n = _$r);
                        }
                        return this.m_vertices[_$i];
                    }, _$i.GetVertexCount = function() {
                        return this.m_count;
                    }, _$i.GetVertex = function(t1) {
                        return this.m_vertices[t1];
                    }, t1;
                }(), _$et = function() {
                    function t1() {
                        this.metric = 0, this.count = 0, this.indexA = [
                            0,
                            0,
                            0
                        ], this.indexB = [
                            0,
                            0,
                            0
                        ];
                    }
                    return t1.prototype.Reset = function() {
                        return this.metric = 0, this.count = 0, this;
                    }, t1;
                }(), ut = function() {
                    function t1() {
                        this.proxyA = new ht, this.proxyB = new ht, this.transformA = new J, this.transformB = new J, this.useRadii = !1;
                    }
                    return t1.prototype.Reset = function() {
                        return this.proxyA.Reset(), this.proxyB.Reset(), this.transformA.SetIdentity(), this.transformB.SetIdentity(), this.useRadii = !1, this;
                    }, t1;
                }(), _$ot = function() {
                    function t1() {
                        this.pointA = new _$z, this.pointB = new _$z, this.distance = 0, this.iterations = 0;
                    }
                    return t1.prototype.Reset = function() {
                        return this.pointA.SetZero(), this.pointB.SetZero(), this.distance = 0, this.iterations = 0, this;
                    }, t1;
                }();
                t1.b2_gjkCalls = 0, t1.b2_gjkIters = 0, t1.b2_gjkMaxIters = 0;
                var _$ft = function() {
                    function t1() {
                        this.wA = new _$z, this.wB = new _$z, this.w = new _$z, this.a = 0, this.indexA = 0, this.indexB = 0;
                    }
                    return t1.prototype.Copy = function(t1) {
                        return this.wA.Copy(t1.wA), this.wB.Copy(t1.wB), this.w.Copy(t1.w), this.a = t1.a, this.indexA = t1.indexA, this.indexB = t1.indexB, this;
                    }, t1;
                }(), _$ct = function() {
                    function t1() {
                        this.m_v1 = new _$ft, this.m_v2 = new _$ft, this.m_v3 = new _$ft, this.m_vertices = [], this.m_count = 0, this.m_vertices[0] = this.m_v1, this.m_vertices[1] = this.m_v2, this.m_vertices[2] = this.m_v3;
                    }
                    var _$i = t1.prototype;
                    return _$i.ReadCache = function(t1, i, n, s, h) {
                        this.m_count = t1.count;
                        for(var e = this.m_vertices, u = 0; u < this.m_count; ++u){
                            var o = e[u];
                            o.indexA = t1.indexA[u], o.indexB = t1.indexB[u];
                            var f = i.GetVertex(o.indexA), _$c = s.GetVertex(o.indexB);
                            J.MulXV(n, f, o.wA), J.MulXV(h, _$c, o.wB), _$z.SubVV(o.wB, o.wA, o.w), o.a = 0;
                        }
                        if (this.m_count > 1) {
                            var a = t1.metric, v = this.GetMetric();
                            (v < .5 * a || 2 * a < v || v < 1e-5) && (this.m_count = 0);
                        }
                        if (0 === this.m_count) {
                            var l = e[0];
                            l.indexA = 0, l.indexB = 0;
                            var _$d = i.GetVertex(0), w = s.GetVertex(0);
                            J.MulXV(n, _$d, l.wA), J.MulXV(h, w, l.wB), _$z.SubVV(l.wB, l.wA, l.w), l.a = 1, this.m_count = 1;
                        }
                    }, _$i.WriteCache = function(t1) {
                        t1.metric = this.GetMetric(), t1.count = this.m_count;
                        for(var _$i = this.m_vertices, n = 0; n < this.m_count; ++n)t1.indexA[n] = _$i[n].indexA, t1.indexB[n] = _$i[n].indexB;
                    }, _$i.GetSearchDirection = function(t1) {
                        switch(this.m_count){
                            case 1:
                                return _$z.NegV(this.m_v1.w, t1);
                            case 2:
                                var _$i = _$z.SubVV(this.m_v2.w, this.m_v1.w, t1);
                                return _$z.CrossVV(_$i, _$z.NegV(this.m_v1.w, _$z.s_t0)) > 0 ? _$z.CrossOneV(_$i, t1) : _$z.CrossVOne(_$i, t1);
                            default:
                                return t1.SetZero();
                        }
                    }, _$i.GetClosestPoint = function(t1) {
                        switch(this.m_count){
                            case 0:
                            case 3:
                            default:
                                return t1.SetZero();
                            case 1:
                                return t1.Copy(this.m_v1.w);
                            case 2:
                                return t1.Set(this.m_v1.a * this.m_v1.w.x + this.m_v2.a * this.m_v2.w.x, this.m_v1.a * this.m_v1.w.y + this.m_v2.a * this.m_v2.w.y);
                        }
                    }, _$i.GetWitnessPoints = function(t1, i) {
                        switch(this.m_count){
                            case 0:
                                break;
                            case 1:
                                t1.Copy(this.m_v1.wA), i.Copy(this.m_v1.wB);
                                break;
                            case 2:
                                t1.x = this.m_v1.a * this.m_v1.wA.x + this.m_v2.a * this.m_v2.wA.x, t1.y = this.m_v1.a * this.m_v1.wA.y + this.m_v2.a * this.m_v2.wA.y, i.x = this.m_v1.a * this.m_v1.wB.x + this.m_v2.a * this.m_v2.wB.x, i.y = this.m_v1.a * this.m_v1.wB.y + this.m_v2.a * this.m_v2.wB.y;
                                break;
                            case 3:
                                i.x = t1.x = this.m_v1.a * this.m_v1.wA.x + this.m_v2.a * this.m_v2.wA.x + this.m_v3.a * this.m_v3.wA.x, i.y = t1.y = this.m_v1.a * this.m_v1.wA.y + this.m_v2.a * this.m_v2.wA.y + this.m_v3.a * this.m_v3.wA.y;
                        }
                    }, _$i.GetMetric = function() {
                        switch(this.m_count){
                            case 0:
                            case 1:
                            default:
                                return 0;
                            case 2:
                                return _$z.DistanceVV(this.m_v1.w, this.m_v2.w);
                            case 3:
                                return _$z.CrossVV(_$z.SubVV(this.m_v2.w, this.m_v1.w, _$z.s_t0), _$z.SubVV(this.m_v3.w, this.m_v1.w, _$z.s_t1));
                        }
                    }, _$i.Solve2 = function() {
                        var _$i = this.m_v1.w, n = this.m_v2.w, s = _$z.SubVV(n, _$i, t1.s_e12), _$r = -_$z.DotVV(_$i, s);
                        if (_$r <= 0) return this.m_v1.a = 1, void (this.m_count = 1);
                        var h = _$z.DotVV(n, s);
                        if (h <= 0) return this.m_v2.a = 1, this.m_count = 1, void this.m_v1.Copy(this.m_v2);
                        var e = 1 / (h + _$r);
                        this.m_v1.a = h * e, this.m_v2.a = _$r * e, this.m_count = 2;
                    }, _$i.Solve3 = function() {
                        var _$i = this.m_v1.w, n = this.m_v2.w, s = this.m_v3.w, _$r = _$z.SubVV(n, _$i, t1.s_e12), h = _$z.DotVV(_$i, _$r), e = _$z.DotVV(n, _$r), u = -h, o = _$z.SubVV(s, _$i, t1.s_e13), f = _$z.DotVV(_$i, o), _$c = _$z.DotVV(s, o), a = -f, v = _$z.SubVV(s, n, t1.s_e23), l = _$z.DotVV(n, v), _$d = _$z.DotVV(s, v), w = -l, g = _$z.CrossVV(_$r, o), p = g * _$z.CrossVV(n, s), _$y = g * _$z.CrossVV(s, _$i), _$_ = g * _$z.CrossVV(_$i, n);
                        if (u <= 0 && a <= 0) return this.m_v1.a = 1, void (this.m_count = 1);
                        if (e > 0 && u > 0 && _$_ <= 0) {
                            var m = 1 / (e + u);
                            return this.m_v1.a = e * m, this.m_v2.a = u * m, void (this.m_count = 2);
                        }
                        if (_$c > 0 && a > 0 && _$y <= 0) {
                            var b = 1 / (_$c + a);
                            return this.m_v1.a = _$c * b, this.m_v3.a = a * b, this.m_count = 2, void this.m_v2.Copy(this.m_v3);
                        }
                        if (e <= 0 && w <= 0) return this.m_v2.a = 1, this.m_count = 1, void this.m_v1.Copy(this.m_v2);
                        if (_$c <= 0 && _$d <= 0) return this.m_v3.a = 1, this.m_count = 1, void this.m_v1.Copy(this.m_v3);
                        if (_$d > 0 && w > 0 && p <= 0) {
                            var k = 1 / (_$d + w);
                            return this.m_v2.a = _$d * k, this.m_v3.a = w * k, this.m_count = 2, void this.m_v1.Copy(this.m_v3);
                        }
                        var A = 1 / (p + _$y + _$_);
                        this.m_v1.a = p * A, this.m_v2.a = _$y * A, this.m_v3.a = _$_ * A, this.m_count = 3;
                    }, t1;
                }();
                _$ct.s_e12 = new _$z, _$ct.s_e13 = new _$z, _$ct.s_e23 = new _$z;
                var at = new _$ct, vt = [
                    0,
                    0,
                    0
                ], lt = [
                    0,
                    0,
                    0
                ], dt = new _$z, wt = new _$z, gt = new _$z, pt = new _$z, _$yt = new _$z;
                function _t(i, n, s) {
                    ++t1.b2_gjkCalls;
                    var h = s.proxyA, u = s.proxyB, o = s.transformA, f = s.transformB;
                    at.ReadCache(n, h, o, u, f);
                    for(var a = at.m_vertices, _$d = 0, w = 0; w < 20;){
                        _$d = at.m_count;
                        for(var g = 0; g < _$d; ++g)vt[g] = a[g].indexA, lt[g] = a[g].indexB;
                        switch(at.m_count){
                            case 1:
                                break;
                            case 2:
                                at.Solve2();
                                break;
                            case 3:
                                at.Solve3();
                        }
                        if (3 === at.m_count) break;
                        var p = at.GetSearchDirection(wt);
                        if (p.LengthSquared() < e) break;
                        var _$y = a[at.m_count];
                        _$y.indexA = h.GetSupport(_$K.MulTRV(o.q, _$z.NegV(p, _$z.s_t0), pt)), J.MulXV(o, h.GetVertex(_$y.indexA), _$y.wA), _$y.indexB = u.GetSupport(_$K.MulTRV(f.q, p, _$yt)), J.MulXV(f, u.GetVertex(_$y.indexB), _$y.wB), _$z.SubVV(_$y.wB, _$y.wA, _$y.w), ++w, ++t1.b2_gjkIters;
                        for(var _$_ = !1, m = 0; m < _$d; ++m)if (_$y.indexA === vt[m] && _$y.indexB === lt[m]) {
                            _$_ = !0;
                            break;
                        }
                        if (_$_) break;
                        ++at.m_count;
                    }
                    if (t1.b2_gjkMaxIters = P(t1.b2_gjkMaxIters, w), at.GetWitnessPoints(i.pointA, i.pointB), i.distance = _$z.DistanceVV(i.pointA, i.pointB), i.iterations = w, at.WriteCache(n), s.useRadii) {
                        var b = h.m_radius, k = u.m_radius;
                        if (i.distance > b + k && i.distance > 1e-5) {
                            i.distance -= b + k;
                            var A = _$z.SubVV(i.pointB, i.pointA, gt);
                            A.Normalize(), i.pointA.SelfMulAdd(b, A), i.pointB.SelfMulSub(k, A);
                        } else {
                            var E = _$z.MidVV(i.pointA, i.pointB, dt);
                            i.pointA.Copy(E), i.pointB.Copy(E), i.distance = 0;
                        }
                    }
                }
                var _$mt, bt = new _$z, kt = new _$ct, At = new _$z, Et = new _$z, Tt = new _$z, _$St = new _$z, _$Ot = new _$z, _$It = new _$z;
                (_$mt = t1.b2ContactFeatureType || (t1.b2ContactFeatureType = {}))[_$mt.e_vertex = 0] = "e_vertex", _$mt[_$mt.e_face = 1] = "e_face";
                var _$Rt, Mt = function() {
                    function t1() {
                        this._key = 0, this._key_invalid = !1, this._indexA = 0, this._indexB = 0, this._typeA = 0, this._typeB = 0;
                    }
                    return s(t1, [
                        {
                            key: "key",
                            get: function get() {
                                return this._key_invalid && (this._key_invalid = !1, this._key = this._indexA | this._indexB << 8 | this._typeA << 16 | this._typeB << 24), this._key;
                            },
                            set: function set(t1) {
                                this._key = t1, this._key_invalid = !1, this._indexA = 255 & this._key, this._indexB = this._key >> 8 & 255, this._typeA = this._key >> 16 & 255, this._typeB = this._key >> 24 & 255;
                            }
                        },
                        {
                            key: "indexA",
                            get: function get() {
                                return this._indexA;
                            },
                            set: function set(t1) {
                                this._indexA = t1, this._key_invalid = !0;
                            }
                        },
                        {
                            key: "indexB",
                            get: function get() {
                                return this._indexB;
                            },
                            set: function set(t1) {
                                this._indexB = t1, this._key_invalid = !0;
                            }
                        },
                        {
                            key: "typeA",
                            get: function get() {
                                return this._typeA;
                            },
                            set: function set(t1) {
                                this._typeA = t1, this._key_invalid = !0;
                            }
                        },
                        {
                            key: "typeB",
                            get: function get() {
                                return this._typeB;
                            },
                            set: function set(t1) {
                                this._typeB = t1, this._key_invalid = !0;
                            }
                        }
                    ]), t1;
                }(), Ct = function() {
                    function t1() {
                        this.cf = new Mt;
                    }
                    var _$i = t1.prototype;
                    return _$i.Copy = function(t1) {
                        return this.key = t1.key, this;
                    }, _$i.Clone = function() {
                        return (new t1).Copy(this);
                    }, s(t1, [
                        {
                            key: "key",
                            get: function get() {
                                return this.cf.key;
                            },
                            set: function set(t1) {
                                this.cf.key = t1;
                            }
                        }
                    ]), t1;
                }(), _$Nt = function() {
                    function t1() {
                        this.localPoint = new _$z, this.normalImpulse = 0, this.tangentImpulse = 0, this.id = new Ct;
                    }
                    t1.MakeArray = function(i) {
                        return S(i, function() {
                            return new t1;
                        });
                    };
                    var _$i = t1.prototype;
                    return _$i.Reset = function() {
                        this.localPoint.SetZero(), this.normalImpulse = 0, this.tangentImpulse = 0, this.id.key = 0;
                    }, _$i.Copy = function(t1) {
                        return this.localPoint.Copy(t1.localPoint), this.normalImpulse = t1.normalImpulse, this.tangentImpulse = t1.tangentImpulse, this.id.Copy(t1.id), this;
                    }, t1;
                }();
                (_$Rt = t1.b2ManifoldType || (t1.b2ManifoldType = {}))[_$Rt.e_unknown = -1] = "e_unknown", _$Rt[_$Rt.e_circles = 0] = "e_circles", _$Rt[_$Rt.e_faceA = 1] = "e_faceA", _$Rt[_$Rt.e_faceB = 2] = "e_faceB";
                var _$Pt, _$Dt = function() {
                    function i() {
                        this.points = _$Nt.MakeArray(2), this.localNormal = new _$z, this.localPoint = new _$z, this.type = t1.b2ManifoldType.e_unknown, this.pointCount = 0;
                    }
                    var n = i.prototype;
                    return n.Reset = function() {
                        for(var _$i = 0; _$i < 2; ++_$i)this.points[_$i].Reset();
                        this.localNormal.SetZero(), this.localPoint.SetZero(), this.type = t1.b2ManifoldType.e_unknown, this.pointCount = 0;
                    }, n.Copy = function(t1) {
                        this.pointCount = t1.pointCount;
                        for(var _$i = 0; _$i < 2; ++_$i)this.points[_$i].Copy(t1.points[_$i]);
                        return this.localNormal.Copy(t1.localNormal), this.localPoint.Copy(t1.localPoint), this.type = t1.type, this;
                    }, n.Clone = function() {
                        return (new i).Copy(this);
                    }, i;
                }(), Lt = function() {
                    function i() {
                        this.normal = new _$z, this.points = _$z.MakeArray(2), this.separations = O(2);
                    }
                    return i.prototype.Initialize = function(n, s, r, h, u) {
                        if (0 !== n.pointCount) switch(n.type){
                            case t1.b2ManifoldType.e_circles:
                                this.normal.Set(1, 0);
                                var o = J.MulXV(s, n.localPoint, i.Initialize_s_pointA), f = J.MulXV(h, n.points[0].localPoint, i.Initialize_s_pointB);
                                _$z.DistanceSquaredVV(o, f) > e && _$z.SubVV(f, o, this.normal).SelfNormalize();
                                var _$c = _$z.AddVMulSV(o, r, this.normal, i.Initialize_s_cA), a = _$z.SubVMulSV(f, u, this.normal, i.Initialize_s_cB);
                                _$z.MidVV(_$c, a, this.points[0]), this.separations[0] = _$z.DotVV(_$z.SubVV(a, _$c, _$z.s_t0), this.normal);
                                break;
                            case t1.b2ManifoldType.e_faceA:
                                _$K.MulRV(s.q, n.localNormal, this.normal);
                                for(var v = J.MulXV(s, n.localPoint, i.Initialize_s_planePoint), l = 0; l < n.pointCount; ++l){
                                    var _$d = J.MulXV(h, n.points[l].localPoint, i.Initialize_s_clipPoint), w = r - _$z.DotVV(_$z.SubVV(_$d, v, _$z.s_t0), this.normal), g = _$z.AddVMulSV(_$d, w, this.normal, i.Initialize_s_cA), p = _$z.SubVMulSV(_$d, u, this.normal, i.Initialize_s_cB);
                                    _$z.MidVV(g, p, this.points[l]), this.separations[l] = _$z.DotVV(_$z.SubVV(p, g, _$z.s_t0), this.normal);
                                }
                                break;
                            case t1.b2ManifoldType.e_faceB:
                                _$K.MulRV(h.q, n.localNormal, this.normal);
                                for(var _$y = J.MulXV(h, n.localPoint, i.Initialize_s_planePoint), _$_ = 0; _$_ < n.pointCount; ++_$_){
                                    var m = J.MulXV(s, n.points[_$_].localPoint, i.Initialize_s_clipPoint), b = u - _$z.DotVV(_$z.SubVV(m, _$y, _$z.s_t0), this.normal), k = _$z.AddVMulSV(m, b, this.normal, i.Initialize_s_cB), A = _$z.SubVMulSV(m, r, this.normal, i.Initialize_s_cA);
                                    _$z.MidVV(A, k, this.points[_$_]), this.separations[_$_] = _$z.DotVV(_$z.SubVV(A, k, _$z.s_t0), this.normal);
                                }
                                this.normal.SelfNeg();
                        }
                    }, i;
                }();
                Lt.Initialize_s_pointA = new _$z, Lt.Initialize_s_pointB = new _$z, Lt.Initialize_s_cA = new _$z, Lt.Initialize_s_cB = new _$z, Lt.Initialize_s_planePoint = new _$z, Lt.Initialize_s_clipPoint = new _$z, (_$Pt = t1.b2PointState || (t1.b2PointState = {}))[_$Pt.b2_nullState = 0] = "b2_nullState", _$Pt[_$Pt.b2_addState = 1] = "b2_addState", _$Pt[_$Pt.b2_persistState = 2] = "b2_persistState", _$Pt[_$Pt.b2_removeState = 3] = "b2_removeState";
                var _$Bt = function() {
                    function t1() {
                        this.v = new _$z, this.id = new Ct;
                    }
                    return t1.MakeArray = function(i) {
                        return S(i, function() {
                            return new t1;
                        });
                    }, t1.prototype.Copy = function(t1) {
                        return this.v.Copy(t1.v), this.id.Copy(t1.id), this;
                    }, t1;
                }(), _$Ft = function() {
                    function t1() {
                        this.p1 = new _$z, this.p2 = new _$z, this.maxFraction = 1;
                    }
                    return t1.prototype.Copy = function(t1) {
                        return this.p1.Copy(t1.p1), this.p2.Copy(t1.p2), this.maxFraction = t1.maxFraction, this;
                    }, t1;
                }(), _$Ut = function() {
                    function t1() {
                        this.normal = new _$z, this.fraction = 0;
                    }
                    return t1.prototype.Copy = function(t1) {
                        return this.normal.Copy(t1.normal), this.fraction = t1.fraction, this;
                    }, t1;
                }(), _$xt = function() {
                    function t1() {
                        this.lowerBound = new _$z, this.upperBound = new _$z, this.m_cache_center = new _$z, this.m_cache_extent = new _$z;
                    }
                    var _$i = t1.prototype;
                    return _$i.Copy = function(t1) {
                        return this.lowerBound.Copy(t1.lowerBound), this.upperBound.Copy(t1.upperBound), this;
                    }, _$i.IsValid = function() {
                        return !(!this.lowerBound.IsValid() || !this.upperBound.IsValid() || this.upperBound.x < this.lowerBound.x || this.upperBound.y < this.lowerBound.y);
                    }, _$i.GetCenter = function() {
                        return _$z.MidVV(this.lowerBound, this.upperBound, this.m_cache_center);
                    }, _$i.GetExtents = function() {
                        return _$z.ExtVV(this.lowerBound, this.upperBound, this.m_cache_extent);
                    }, _$i.GetPerimeter = function() {
                        return 2 * (this.upperBound.x - this.lowerBound.x + (this.upperBound.y - this.lowerBound.y));
                    }, _$i.Combine1 = function(t1) {
                        return this.lowerBound.x = N(this.lowerBound.x, t1.lowerBound.x), this.lowerBound.y = N(this.lowerBound.y, t1.lowerBound.y), this.upperBound.x = P(this.upperBound.x, t1.upperBound.x), this.upperBound.y = P(this.upperBound.y, t1.upperBound.y), this;
                    }, _$i.Combine2 = function(t1, i) {
                        return this.lowerBound.x = N(t1.lowerBound.x, i.lowerBound.x), this.lowerBound.y = N(t1.lowerBound.y, i.lowerBound.y), this.upperBound.x = P(t1.upperBound.x, i.upperBound.x), this.upperBound.y = P(t1.upperBound.y, i.upperBound.y), this;
                    }, t1.Combine = function(t1, i, n) {
                        return n.Combine2(t1, i), n;
                    }, _$i.Contains = function(t1) {
                        return !(this.lowerBound.x <= t1.lowerBound.x || this.lowerBound.y <= t1.lowerBound.y || t1.upperBound.x <= this.upperBound.x || t1.upperBound.y <= this.upperBound.y);
                    }, _$i.RayCast = function(t1, i) {
                        var s = -1e+37, h = 1e37, e = i.p1.x, u = i.p1.y, o = i.p2.x - i.p1.x, f = i.p2.y - i.p1.y, _$c = _$C(o), a = _$C(f), v = t1.normal;
                        if (_$c < 1e-5) {
                            if (e < this.lowerBound.x || this.upperBound.x < e) return !1;
                        } else {
                            var l = 1 / o, _$d = (this.lowerBound.x - e) * l, w = (this.upperBound.x - e) * l, g = -1;
                            if (_$d > w) {
                                var p = _$d;
                                _$d = w, w = p, g = 1;
                            }
                            if (_$d > s && (v.x = g, v.y = 0, s = _$d), s > (h = N(h, w))) return !1;
                        }
                        if (a < 1e-5) {
                            if (u < this.lowerBound.y || this.upperBound.y < u) return !1;
                        } else {
                            var _$y = 1 / f, _$_ = (this.lowerBound.y - u) * _$y, m = (this.upperBound.y - u) * _$y, b = -1;
                            if (_$_ > m) {
                                var k = _$_;
                                _$_ = m, m = k, b = 1;
                            }
                            if (_$_ > s && (v.x = 0, v.y = b, s = _$_), s > (h = N(h, m))) return !1;
                        }
                        return !(s < 0 || i.maxFraction < s || (t1.fraction = s, 0));
                    }, _$i.TestContain = function(t1) {
                        return !(t1.x < this.lowerBound.x || this.upperBound.x < t1.x || t1.y < this.lowerBound.y || this.upperBound.y < t1.y);
                    }, _$i.TestOverlap = function(t1) {
                        return !(this.upperBound.x < t1.lowerBound.x || this.upperBound.y < t1.lowerBound.y || t1.upperBound.x < this.lowerBound.x || t1.upperBound.y < this.lowerBound.y);
                    }, t1;
                }();
                function jt(t1, i) {
                    return !(t1.upperBound.x < i.lowerBound.x || t1.upperBound.y < i.lowerBound.y || i.upperBound.x < t1.lowerBound.x || i.upperBound.y < t1.lowerBound.y);
                }
                function Gt(i, n, s, r, h) {
                    var e = 0, u = n[0], o = n[1], f = _$z.DotVV(s, u.v) - r, _$c = _$z.DotVV(s, o.v) - r;
                    if (f <= 0 && i[e++].Copy(u), _$c <= 0 && i[e++].Copy(o), f * _$c < 0) {
                        var a = f / (f - _$c), v = i[e].v;
                        v.x = u.v.x + a * (o.v.x - u.v.x), v.y = u.v.y + a * (o.v.y - u.v.y);
                        var l = i[e].id;
                        l.cf.indexA = h, l.cf.indexB = u.id.cf.indexB, l.cf.typeA = t1.b2ContactFeatureType.e_vertex, l.cf.typeB = t1.b2ContactFeatureType.e_face, ++e;
                    }
                    return e;
                }
                var Ht = new ut, Vt = new _$et, _$Wt = new _$ot;
                function zt(t1, i, n, s, r, h) {
                    var e = Ht.Reset();
                    e.proxyA.SetShape(t1, i), e.proxyB.SetShape(n, s), e.transformA.Copy(r), e.transformB.Copy(h), e.useRadii = !0;
                    var u = Vt.Reset();
                    u.count = 0;
                    var o = _$Wt.Reset();
                    return _t(o, u, e), o.distance < 1e-4;
                }
                function $t(t1) {
                    if (null === t1) throw Error();
                    return t1;
                }
                var _$Xt = function() {
                    function t1(t1) {
                        void 0 === t1 && (t1 = 0), this.m_id = 0, this.aabb = new _$xt, this._userData = null, this.parent = null, this.child1 = null, this.child2 = null, this.height = 0, this.m_id = t1;
                    }
                    var _$i = t1.prototype;
                    return _$i.Reset = function() {
                        this._userData = null;
                    }, _$i.IsLeaf = function() {
                        return null === this.child1;
                    }, s(t1, [
                        {
                            key: "userData",
                            get: function get() {
                                if (null === this._userData) throw Error();
                                return this._userData;
                            },
                            set: function set(t1) {
                                if (null !== this._userData) throw Error();
                                this._userData = t1;
                            }
                        }
                    ]), t1;
                }(), _$qt = function() {
                    function t1() {
                        this.m_root = null, this.m_freeList = null, this.m_path = 0, this.m_insertionCount = 0, this.m_stack = new _$rt(256);
                    }
                    var _$i = t1.prototype;
                    return _$i.Query = function(t1, i) {
                        var n = this.m_stack.Reset();
                        for(n.Push(this.m_root); n.GetCount() > 0;){
                            var s = n.Pop();
                            if (null !== s && s.aabb.TestOverlap(t1)) if (s.IsLeaf()) {
                                if (!i(s)) return;
                            } else n.Push(s.child1), n.Push(s.child2);
                        }
                    }, _$i.QueryPoint = function(t1, i) {
                        var n = this.m_stack.Reset();
                        for(n.Push(this.m_root); n.GetCount() > 0;){
                            var s = n.Pop();
                            if (null !== s && s.aabb.TestContain(t1)) if (s.IsLeaf()) {
                                if (!i(s)) return;
                            } else n.Push(s.child1), n.Push(s.child2);
                        }
                    }, _$i.RayCast = function(i, n) {
                        var s = i.p1, _$r = i.p2, h = _$z.SubVV(_$r, s, t1.s_r);
                        h.Normalize();
                        var e = _$z.CrossOneV(h, t1.s_v), u = _$z.AbsV(e, t1.s_abs_v), o = i.maxFraction, f = t1.s_segmentAABB, _$c = s.x + o * (_$r.x - s.x), a = s.y + o * (_$r.y - s.y);
                        f.lowerBound.x = N(s.x, _$c), f.lowerBound.y = N(s.y, a), f.upperBound.x = P(s.x, _$c), f.upperBound.y = P(s.y, a);
                        var v = this.m_stack.Reset();
                        for(v.Push(this.m_root); v.GetCount() > 0;){
                            var l = v.Pop();
                            if (null !== l && jt(l.aabb, f)) {
                                var _$d = l.aabb.GetCenter(), w = l.aabb.GetExtents();
                                if (!(_$C(_$z.DotVV(e, _$z.SubVV(s, _$d, _$z.s_t0))) - _$z.DotVV(u, w) > 0)) if (l.IsLeaf()) {
                                    var g = t1.s_subInput;
                                    g.p1.Copy(i.p1), g.p2.Copy(i.p2), g.maxFraction = o;
                                    var p = n(g, l);
                                    if (0 === p) return;
                                    p > 0 && (o = p, _$c = s.x + o * (_$r.x - s.x), a = s.y + o * (_$r.y - s.y), f.lowerBound.x = N(s.x, _$c), f.lowerBound.y = N(s.y, a), f.upperBound.x = P(s.x, _$c), f.upperBound.y = P(s.y, a));
                                } else v.Push(l.child1), v.Push(l.child2);
                            }
                        }
                    }, _$i.AllocateNode = function() {
                        if (null !== this.m_freeList) {
                            var _$i = this.m_freeList;
                            return this.m_freeList = _$i.parent, _$i.parent = null, _$i.child1 = null, _$i.child2 = null, _$i.height = 0, _$i;
                        }
                        return new _$Xt(t1.s_node_id++);
                    }, _$i.FreeNode = function(t1) {
                        t1.parent = this.m_freeList, t1.child1 = null, t1.child2 = null, t1.height = -1, t1.Reset(), this.m_freeList = t1;
                    }, _$i.CreateProxy = function(t1, i) {
                        var n = this.AllocateNode();
                        return n.aabb.lowerBound.x = t1.lowerBound.x - .1, n.aabb.lowerBound.y = t1.lowerBound.y - .1, n.aabb.upperBound.x = t1.upperBound.x + .1, n.aabb.upperBound.y = t1.upperBound.y + .1, n.userData = i, n.height = 0, this.InsertLeaf(n), n;
                    }, _$i.DestroyProxy = function(t1) {
                        this.RemoveLeaf(t1), this.FreeNode(t1);
                    }, _$i.MoveProxy = function(t1, i, n) {
                        if (t1.aabb.Contains(i)) return !1;
                        this.RemoveLeaf(t1), t1.aabb.lowerBound.x = i.lowerBound.x - .1, t1.aabb.lowerBound.y = i.lowerBound.y - .1, t1.aabb.upperBound.x = i.upperBound.x + .1, t1.aabb.upperBound.y = i.upperBound.y + .1;
                        var s = 2 * n.x, _$r = 2 * n.y;
                        return s < 0 ? t1.aabb.lowerBound.x += s : t1.aabb.upperBound.x += s, _$r < 0 ? t1.aabb.lowerBound.y += _$r : t1.aabb.upperBound.y += _$r, this.InsertLeaf(t1), !0;
                    }, _$i.InsertLeaf = function(i) {
                        if (++this.m_insertionCount, null === this.m_root) return this.m_root = i, void (this.m_root.parent = null);
                        for(var n = i.aabb, s = this.m_root; !s.IsLeaf();){
                            var _$r = $t(s.child1), h = $t(s.child2), e = s.aabb.GetPerimeter(), u = t1.s_combinedAABB;
                            u.Combine2(s.aabb, n);
                            var o = u.GetPerimeter(), f = 2 * o, _$c = 2 * (o - e), a = void 0, v = t1.s_aabb, l = void 0;
                            _$r.IsLeaf() ? (v.Combine2(n, _$r.aabb), a = v.GetPerimeter() + _$c) : (v.Combine2(n, _$r.aabb), l = _$r.aabb.GetPerimeter(), a = v.GetPerimeter() - l + _$c);
                            var _$d = void 0;
                            if (h.IsLeaf() ? (v.Combine2(n, h.aabb), _$d = v.GetPerimeter() + _$c) : (v.Combine2(n, h.aabb), l = h.aabb.GetPerimeter(), _$d = v.GetPerimeter() - l + _$c), f < a && f < _$d) break;
                            s = a < _$d ? _$r : h;
                        }
                        var w = s.parent, g = this.AllocateNode();
                        g.parent = w, g.aabb.Combine2(n, s.aabb), g.height = s.height + 1, null !== w ? (w.child1 === s ? w.child1 = g : w.child2 = g, g.child1 = s, g.child2 = i, s.parent = g, i.parent = g) : (g.child1 = s, g.child2 = i, s.parent = g, i.parent = g, this.m_root = g);
                        for(var p = i.parent; null !== p;){
                            var _$y = $t((p = this.Balance(p)).child1), _$_ = $t(p.child2);
                            p.height = 1 + P(_$y.height, _$_.height), p.aabb.Combine2(_$y.aabb, _$_.aabb), p = p.parent;
                        }
                    }, _$i.RemoveLeaf = function(t1) {
                        if (t1 !== this.m_root) {
                            var _$i = $t(t1.parent), n = _$i && _$i.parent, s = $t(_$i.child1 === t1 ? _$i.child2 : _$i.child1);
                            if (null !== n) {
                                n.child1 === _$i ? n.child1 = s : n.child2 = s, s.parent = n, this.FreeNode(_$i);
                                for(var _$r = n; null !== _$r;){
                                    var h = $t((_$r = this.Balance(_$r)).child1), e = $t(_$r.child2);
                                    _$r.aabb.Combine2(h.aabb, e.aabb), _$r.height = 1 + P(h.height, e.height), _$r = _$r.parent;
                                }
                            } else this.m_root = s, s.parent = null, this.FreeNode(_$i);
                        } else this.m_root = null;
                    }, _$i.Balance = function(t1) {
                        if (t1.IsLeaf() || t1.height < 2) return t1;
                        var _$i = $t(t1.child1), n = $t(t1.child2), s = n.height - _$i.height;
                        if (s > 1) {
                            var _$r = $t(n.child1), h = $t(n.child2);
                            return n.child1 = t1, n.parent = t1.parent, t1.parent = n, null !== n.parent ? n.parent.child1 === t1 ? n.parent.child1 = n : n.parent.child2 = n : this.m_root = n, _$r.height > h.height ? (n.child2 = _$r, t1.child2 = h, h.parent = t1, t1.aabb.Combine2(_$i.aabb, h.aabb), n.aabb.Combine2(t1.aabb, _$r.aabb), t1.height = 1 + P(_$i.height, h.height), n.height = 1 + P(t1.height, _$r.height)) : (n.child2 = h, t1.child2 = _$r, _$r.parent = t1, t1.aabb.Combine2(_$i.aabb, _$r.aabb), n.aabb.Combine2(t1.aabb, h.aabb), t1.height = 1 + P(_$i.height, _$r.height), n.height = 1 + P(t1.height, h.height)), n;
                        }
                        if (s < -1) {
                            var e = $t(_$i.child1), u = $t(_$i.child2);
                            return _$i.child1 = t1, _$i.parent = t1.parent, t1.parent = _$i, null !== _$i.parent ? _$i.parent.child1 === t1 ? _$i.parent.child1 = _$i : _$i.parent.child2 = _$i : this.m_root = _$i, e.height > u.height ? (_$i.child2 = e, t1.child1 = u, u.parent = t1, t1.aabb.Combine2(n.aabb, u.aabb), _$i.aabb.Combine2(t1.aabb, e.aabb), t1.height = 1 + P(n.height, u.height), _$i.height = 1 + P(t1.height, e.height)) : (_$i.child2 = u, t1.child1 = e, e.parent = t1, t1.aabb.Combine2(n.aabb, e.aabb), _$i.aabb.Combine2(t1.aabb, u.aabb), t1.height = 1 + P(n.height, e.height), _$i.height = 1 + P(t1.height, u.height)), _$i;
                        }
                        return t1;
                    }, _$i.GetHeight = function() {
                        return null === this.m_root ? 0 : this.m_root.height;
                    }, t1.GetAreaNode = function(i) {
                        if (null === i || i.IsLeaf()) return 0;
                        var n = i.aabb.GetPerimeter();
                        return (n += t1.GetAreaNode(i.child1)) + t1.GetAreaNode(i.child2);
                    }, _$i.GetAreaRatio = function() {
                        if (null === this.m_root) return 0;
                        var _$i = this.m_root.aabb.GetPerimeter();
                        return t1.GetAreaNode(this.m_root) / _$i;
                    }, t1.ComputeHeightNode = function(i) {
                        return null === i || i.IsLeaf() ? 0 : 1 + P(t1.ComputeHeightNode(i.child1), t1.ComputeHeightNode(i.child2));
                    }, _$i.ComputeHeight = function() {
                        return t1.ComputeHeightNode(this.m_root);
                    }, _$i.ValidateStructure = function(t1) {
                        if (null !== t1 && (this.m_root, !t1.IsLeaf())) {
                            var _$i = $t(t1.child1), n = $t(t1.child2);
                            this.ValidateStructure(_$i), this.ValidateStructure(n);
                        }
                    }, _$i.ValidateMetrics = function(i) {
                        if (null !== i && !i.IsLeaf()) {
                            var n = $t(i.child1), s = $t(i.child2);
                            t1.s_aabb.Combine2(n.aabb, s.aabb), this.ValidateMetrics(n), this.ValidateMetrics(s);
                        }
                    }, _$i.Validate = function() {}, t1.GetMaxBalanceNode = function(t1, i) {
                        if (null === t1 || t1.height <= 1) return i;
                        var n = $t(t1.child1);
                        return P(i, _$C($t(t1.child2).height - n.height));
                    }, _$i.GetMaxBalance = function() {
                        return t1.GetMaxBalanceNode(this.m_root, 0);
                    }, _$i.RebuildBottomUp = function() {
                        this.Validate();
                    }, t1.ShiftOriginNode = function(i, n) {
                        if (null !== i && !(i.height <= 1)) {
                            var s = i.child1, _$r = i.child2;
                            t1.ShiftOriginNode(s, n), t1.ShiftOriginNode(_$r, n), i.aabb.lowerBound.SelfSub(n), i.aabb.upperBound.SelfSub(n);
                        }
                    }, _$i.ShiftOrigin = function(i) {
                        t1.ShiftOriginNode(this.m_root, i);
                    }, t1;
                }();
                function Yt(t1, i, n) {
                    var s = t1[i];
                    t1[i] = t1[n], t1[n] = s;
                }
                function Kt(t1, i) {
                    return t1 < i;
                }
                function Jt(t1, i, n, s) {
                    void 0 === n && (n = t1.length - i), void 0 === s && (s = Kt);
                    for(var _$r = i, h = [], e = 0;;){
                        for(; _$r + 1 < n; n++){
                            var u = t1[_$r + Math.floor(Math.random() * (n - _$r))];
                            h[e++] = n;
                            for(var o = _$r - 1;;){
                                for(; s(t1[++o], u););
                                for(; s(u, t1[--n]););
                                if (o >= n) break;
                                Yt(t1, o, n);
                            }
                        }
                        if (0 === e) break;
                        _$r = n, n = h[--e];
                    }
                    return t1;
                }
                _$qt.s_r = new _$z, _$qt.s_v = new _$z, _$qt.s_abs_v = new _$z, _$qt.s_segmentAABB = new _$xt, _$qt.s_subInput = new _$Ft, _$qt.s_combinedAABB = new _$xt, _$qt.s_aabb = new _$xt, _$qt.s_node_id = 0;
                var _$Qt = function Qt(t1, i) {
                    this.proxyA = t1, this.proxyB = i;
                }, _$Zt = function() {
                    function t1() {
                        this.m_tree = new _$qt, this.m_proxyCount = 0, this.m_moveCount = 0, this.m_moveBuffer = [], this.m_pairCount = 0, this.m_pairBuffer = [];
                    }
                    var _$i = t1.prototype;
                    return _$i.CreateProxy = function(t1, i) {
                        var n = this.m_tree.CreateProxy(t1, i);
                        return ++this.m_proxyCount, this.BufferMove(n), n;
                    }, _$i.DestroyProxy = function(t1) {
                        this.UnBufferMove(t1), --this.m_proxyCount, this.m_tree.DestroyProxy(t1);
                    }, _$i.MoveProxy = function(t1, i, n) {
                        this.m_tree.MoveProxy(t1, i, n) && this.BufferMove(t1);
                    }, _$i.TouchProxy = function(t1) {
                        this.BufferMove(t1);
                    }, _$i.GetProxyCount = function() {
                        return this.m_proxyCount;
                    }, _$i.UpdatePairs = function(t1) {
                        var _$i = this;
                        this.m_pairCount = 0;
                        for(var s = 0; s < this.m_moveCount; ++s)!function n() {
                            var _$t = _$i.m_moveBuffer[s];
                            if (null !== _$t) {
                                var n = _$t.aabb;
                                _$i.m_tree.Query(n, function(n) {
                                    if (n.m_id === _$t.m_id) return !0;
                                    if (n.m_id < _$t.m_id ? (s = n, _$r = _$t) : (s = _$t, _$r = n), _$i.m_pairCount === _$i.m_pairBuffer.length) _$i.m_pairBuffer[_$i.m_pairCount] = new _$Qt(s, _$r);
                                    else {
                                        var s, _$r, h = _$i.m_pairBuffer[_$i.m_pairCount];
                                        h.proxyA = s, h.proxyB = _$r;
                                    }
                                    return ++_$i.m_pairCount, !0;
                                });
                            }
                        }();
                        this.m_moveCount = 0, Jt(this.m_pairBuffer, 0, this.m_pairCount, ti);
                        for(var _$r = 0; _$r < this.m_pairCount;){
                            var h = this.m_pairBuffer[_$r];
                            for(t1(h.proxyA.userData, h.proxyB.userData), ++_$r; _$r < this.m_pairCount;){
                                var e = this.m_pairBuffer[_$r];
                                if (e.proxyA.m_id !== h.proxyA.m_id || e.proxyB.m_id !== h.proxyB.m_id) break;
                                ++_$r;
                            }
                        }
                    }, _$i.Query = function(t1, i) {
                        this.m_tree.Query(t1, i);
                    }, _$i.QueryPoint = function(t1, i) {
                        this.m_tree.QueryPoint(t1, i);
                    }, _$i.RayCast = function(t1, i) {
                        this.m_tree.RayCast(t1, i);
                    }, _$i.GetTreeHeight = function() {
                        return this.m_tree.GetHeight();
                    }, _$i.GetTreeBalance = function() {
                        return this.m_tree.GetMaxBalance();
                    }, _$i.GetTreeQuality = function() {
                        return this.m_tree.GetAreaRatio();
                    }, _$i.ShiftOrigin = function(t1) {
                        this.m_tree.ShiftOrigin(t1);
                    }, _$i.BufferMove = function(t1) {
                        this.m_moveBuffer[this.m_moveCount] = t1, ++this.m_moveCount;
                    }, _$i.UnBufferMove = function(t1) {
                        var _$i = this.m_moveBuffer.indexOf(t1);
                        this.m_moveBuffer[_$i] = null;
                    }, t1;
                }();
                function ti(t1, i) {
                    return t1.proxyA.m_id < i.proxyA.m_id || t1.proxyA.m_id === i.proxyA.m_id && t1.proxyB.m_id < i.proxyB.m_id;
                }
                t1.b2_toiTime = 0, t1.b2_toiMaxTime = 0, t1.b2_toiCalls = 0, t1.b2_toiIters = 0, t1.b2_toiMaxIters = 0, t1.b2_toiRootIters = 0, t1.b2_toiMaxRootIters = 0;
                var ii, ni = new J, _$si = new J, _$ri = new _$z, _$hi = new _$z, _$ei = new _$z, _$ui = new _$z, _$oi = new _$z, _$fi = function fi() {
                    this.proxyA = new ht, this.proxyB = new ht, this.sweepA = new Z, this.sweepB = new Z, this.tMax = 0;
                };
                (ii = t1.b2TOIOutputState || (t1.b2TOIOutputState = {}))[ii.e_unknown = 0] = "e_unknown", ii[ii.e_failed = 1] = "e_failed", ii[ii.e_overlapped = 2] = "e_overlapped", ii[ii.e_touching = 3] = "e_touching", ii[ii.e_separated = 4] = "e_separated";
                var ci, ai = function ai() {
                    this.state = t1.b2TOIOutputState.e_unknown, this.t = 0;
                };
                (ci = t1.b2SeparationFunctionType || (t1.b2SeparationFunctionType = {}))[ci.e_unknown = -1] = "e_unknown", ci[ci.e_points = 0] = "e_points", ci[ci.e_faceA = 1] = "e_faceA", ci[ci.e_faceB = 2] = "e_faceB";
                var vi = function() {
                    function i() {
                        this.m_sweepA = new Z, this.m_sweepB = new Z, this.m_type = t1.b2SeparationFunctionType.e_unknown, this.m_localPoint = new _$z, this.m_axis = new _$z;
                    }
                    var n = i.prototype;
                    return n.Initialize = function(i, n, s, r, h, e) {
                        this.m_proxyA = n, this.m_proxyB = r;
                        var u = i.count;
                        if (this.m_sweepA.Copy(s), this.m_sweepB.Copy(h), this.m_sweepA.GetTransform(ni, e), this.m_sweepB.GetTransform(_$si, e), 1 === u) {
                            this.m_type = t1.b2SeparationFunctionType.e_points;
                            var _$c = this.m_proxyA.GetVertex(i.indexA[0]), a = this.m_proxyB.GetVertex(i.indexB[0]), v = J.MulXV(ni, _$c, _$ri), l = J.MulXV(_$si, a, _$hi);
                            _$z.SubVV(l, v, this.m_axis);
                            var _$d = this.m_axis.Normalize();
                            return this.m_localPoint.SetZero(), _$d;
                        }
                        if (i.indexA[0] === i.indexA[1]) {
                            this.m_type = t1.b2SeparationFunctionType.e_faceB;
                            var w = this.m_proxyB.GetVertex(i.indexB[0]), g = this.m_proxyB.GetVertex(i.indexB[1]);
                            _$z.CrossVOne(_$z.SubVV(g, w, _$z.s_t0), this.m_axis).SelfNormalize();
                            var p = _$K.MulRV(_$si.q, this.m_axis, _$ei);
                            _$z.MidVV(w, g, this.m_localPoint);
                            var _$y = J.MulXV(_$si, this.m_localPoint, _$hi), _$_ = this.m_proxyA.GetVertex(i.indexA[0]), m = J.MulXV(ni, _$_, _$ri), b = _$z.DotVV(_$z.SubVV(m, _$y, _$z.s_t0), p);
                            return b < 0 && (this.m_axis.SelfNeg(), b = -b), b;
                        }
                        this.m_type = t1.b2SeparationFunctionType.e_faceA;
                        var k = this.m_proxyA.GetVertex(i.indexA[0]), A = this.m_proxyA.GetVertex(i.indexA[1]);
                        _$z.CrossVOne(_$z.SubVV(A, k, _$z.s_t0), this.m_axis).SelfNormalize();
                        var E = _$K.MulRV(ni.q, this.m_axis, _$ei);
                        _$z.MidVV(k, A, this.m_localPoint);
                        var T = J.MulXV(ni, this.m_localPoint, _$ri), _$S = this.m_proxyB.GetVertex(i.indexB[0]), _$O = J.MulXV(_$si, _$S, _$hi), _$I = _$z.DotVV(_$z.SubVV(_$O, T, _$z.s_t0), E);
                        return _$I < 0 && (this.m_axis.SelfNeg(), _$I = -_$I), _$I;
                    }, n.FindMinSeparation = function(i, n, s) {
                        switch(this.m_sweepA.GetTransform(ni, s), this.m_sweepB.GetTransform(_$si, s), this.m_type){
                            case t1.b2SeparationFunctionType.e_points:
                                var e = _$K.MulTRV(ni.q, this.m_axis, _$ui), u = _$K.MulTRV(_$si.q, _$z.NegV(this.m_axis, _$z.s_t0), _$oi);
                                i[0] = this.m_proxyA.GetSupport(e), n[0] = this.m_proxyB.GetSupport(u);
                                var o = this.m_proxyA.GetVertex(i[0]), f = this.m_proxyB.GetVertex(n[0]), _$c = J.MulXV(ni, o, _$ri), a = J.MulXV(_$si, f, _$hi);
                                return _$z.DotVV(_$z.SubVV(a, _$c, _$z.s_t0), this.m_axis);
                            case t1.b2SeparationFunctionType.e_faceA:
                                var v = _$K.MulRV(ni.q, this.m_axis, _$ei), l = J.MulXV(ni, this.m_localPoint, _$ri), _$d = _$K.MulTRV(_$si.q, _$z.NegV(v, _$z.s_t0), _$oi);
                                i[0] = -1, n[0] = this.m_proxyB.GetSupport(_$d);
                                var w = this.m_proxyB.GetVertex(n[0]), g = J.MulXV(_$si, w, _$hi);
                                return _$z.DotVV(_$z.SubVV(g, l, _$z.s_t0), v);
                            case t1.b2SeparationFunctionType.e_faceB:
                                var p = _$K.MulRV(_$si.q, this.m_axis, _$ei), _$y = J.MulXV(_$si, this.m_localPoint, _$hi), _$_ = _$K.MulTRV(ni.q, _$z.NegV(p, _$z.s_t0), _$ui);
                                n[0] = -1, i[0] = this.m_proxyA.GetSupport(_$_);
                                var m = this.m_proxyA.GetVertex(i[0]), b = J.MulXV(ni, m, _$ri);
                                return _$z.DotVV(_$z.SubVV(b, _$y, _$z.s_t0), p);
                            default:
                                return i[0] = -1, n[0] = -1, 0;
                        }
                    }, n.Evaluate = function(i, n, s) {
                        switch(this.m_sweepA.GetTransform(ni, s), this.m_sweepB.GetTransform(_$si, s), this.m_type){
                            case t1.b2SeparationFunctionType.e_points:
                                var e = this.m_proxyA.GetVertex(i), u = this.m_proxyB.GetVertex(n), o = J.MulXV(ni, e, _$ri), f = J.MulXV(_$si, u, _$hi);
                                return _$z.DotVV(_$z.SubVV(f, o, _$z.s_t0), this.m_axis);
                            case t1.b2SeparationFunctionType.e_faceA:
                                var _$c = _$K.MulRV(ni.q, this.m_axis, _$ei), a = J.MulXV(ni, this.m_localPoint, _$ri), v = this.m_proxyB.GetVertex(n), l = J.MulXV(_$si, v, _$hi);
                                return _$z.DotVV(_$z.SubVV(l, a, _$z.s_t0), _$c);
                            case t1.b2SeparationFunctionType.e_faceB:
                                var _$d = _$K.MulRV(_$si.q, this.m_axis, _$ei), w = J.MulXV(_$si, this.m_localPoint, _$hi), g = this.m_proxyA.GetVertex(i), p = J.MulXV(ni, g, _$ri);
                                return _$z.DotVV(_$z.SubVV(p, w, _$z.s_t0), _$d);
                            default:
                                return 0;
                        }
                    }, i;
                }(), _$li = new _$nt, _$di = new _$et, wi = new ut, _$gi = new _$ot, pi = new vi, yi = [
                    0
                ], _$_i = [
                    0
                ], mi = new Z, bi = new Z;
                function ki(i, n) {
                    var s = _$li.Reset();
                    ++t1.b2_toiCalls, i.state = t1.b2TOIOutputState.e_unknown, i.t = n.tMax;
                    var _$r = n.proxyA, h = n.proxyB, e = P(8, P(_$r.m_count, h.m_count)), u = mi.Copy(n.sweepA), o = bi.Copy(n.sweepB);
                    u.Normalize(), o.Normalize();
                    var f = n.tMax, v = P(.008, _$r.m_radius + h.m_radius - .024), _$d = 0, w = 0;
                    for(_$di.count = 0, wi.proxyA.Copy(n.proxyA), wi.proxyB.Copy(n.proxyB), wi.useRadii = !1;;){
                        if (u.GetTransform(ni, _$d), o.GetTransform(_$si, _$d), wi.transformA.Copy(ni), wi.transformB.Copy(_$si), _t(_$gi, _$di, wi), _$gi.distance <= 0) {
                            i.state = t1.b2TOIOutputState.e_overlapped, i.t = 0;
                            break;
                        }
                        if (_$gi.distance < v + .002) {
                            i.state = t1.b2TOIOutputState.e_touching, i.t = _$d;
                            break;
                        }
                        pi.Initialize(_$di, _$r, u, h, o, _$d);
                        for(var k = !1, A = f, E = 0;;){
                            var _$O = pi.FindMinSeparation(yi, _$_i, A);
                            if (_$O > v + .002) {
                                i.state = t1.b2TOIOutputState.e_separated, i.t = f, k = !0;
                                break;
                            }
                            if (_$O > v - .002) {
                                _$d = A;
                                break;
                            }
                            var _$I = pi.Evaluate(yi[0], _$_i[0], _$d);
                            if (_$I < v - .002) {
                                i.state = t1.b2TOIOutputState.e_failed, i.t = _$d, k = !0;
                                break;
                            }
                            if (_$I <= v + .002) {
                                i.state = t1.b2TOIOutputState.e_touching, i.t = _$d, k = !0;
                                break;
                            }
                            for(var _$R = 0, _$M = _$d, _$N = A;;){
                                _$D = 1 & _$R ? _$M + (v - _$I) * (_$N - _$M) / (_$O - _$I) : .5 * (_$M + _$N), ++_$R, ++t1.b2_toiRootIters;
                                var _$D, L = pi.Evaluate(yi[0], _$_i[0], _$D);
                                if (.002 > _$C(L - v)) {
                                    A = _$D;
                                    break;
                                }
                                if (L > v ? (_$M = _$D, _$I = L) : (_$N = _$D, _$O = L), 50 === _$R) break;
                            }
                            if (t1.b2_toiMaxRootIters = P(t1.b2_toiMaxRootIters, _$R), ++E === e) break;
                        }
                        if (++w, ++t1.b2_toiIters, k) break;
                        if (20 === w) {
                            i.state = t1.b2TOIOutputState.e_failed, i.t = _$d;
                            break;
                        }
                    }
                    t1.b2_toiMaxIters = P(t1.b2_toiMaxIters, w);
                    var _$B = s.GetMilliseconds();
                    t1.b2_toiMaxTime = P(t1.b2_toiMaxTime, _$B), t1.b2_toiTime += _$B;
                }
                var Ai = new _$z, Ei = new _$z;
                function Ti(i, n, s, r, h) {
                    i.pointCount = 0;
                    var e = J.MulXV(s, n.m_p, Ai), u = J.MulXV(h, r.m_p, Ei), o = _$z.DistanceSquaredVV(e, u), f = n.m_radius + r.m_radius;
                    o > f * f || (i.type = t1.b2ManifoldType.e_circles, i.localPoint.Copy(n.m_p), i.localNormal.SetZero(), i.pointCount = 1, i.points[0].localPoint.Copy(r.m_p), i.points[0].id.key = 0);
                }
                var Si = new _$z, Oi = new _$z, Ii = new _$z;
                function Ri(i, n, s, h, e) {
                    i.pointCount = 0;
                    for(var u = J.MulXV(e, h.m_p, Si), o = J.MulTXV(s, u, Oi), f = 0, _$c = -1e+37, a = n.m_radius + h.m_radius, v = n.m_count, l = n.m_vertices, _$d = n.m_normals, w = 0; w < v; ++w){
                        var g = _$z.DotVV(_$d[w], _$z.SubVV(o, l[w], _$z.s_t0));
                        if (g > a) return;
                        g > _$c && (_$c = g, f = w);
                    }
                    var p = f, _$_ = l[p], m = l[(p + 1) % v];
                    if (_$c < 1e-5) return i.pointCount = 1, i.type = t1.b2ManifoldType.e_faceA, i.localNormal.Copy(_$d[f]), _$z.MidVV(_$_, m, i.localPoint), i.points[0].localPoint.Copy(h.m_p), void (i.points[0].id.key = 0);
                    var b = _$z.DotVV(_$z.SubVV(o, _$_, _$z.s_t0), _$z.SubVV(m, _$_, _$z.s_t1)), k = _$z.DotVV(_$z.SubVV(o, m, _$z.s_t0), _$z.SubVV(_$_, m, _$z.s_t1));
                    if (b <= 0) {
                        if (_$z.DistanceSquaredVV(o, _$_) > a * a) return;
                        i.pointCount = 1, i.type = t1.b2ManifoldType.e_faceA, _$z.SubVV(o, _$_, i.localNormal).SelfNormalize(), i.localPoint.Copy(_$_), i.points[0].localPoint.Copy(h.m_p), i.points[0].id.key = 0;
                    } else if (k <= 0) {
                        if (_$z.DistanceSquaredVV(o, m) > a * a) return;
                        i.pointCount = 1, i.type = t1.b2ManifoldType.e_faceA, _$z.SubVV(o, m, i.localNormal).SelfNormalize(), i.localPoint.Copy(m), i.points[0].localPoint.Copy(h.m_p), i.points[0].id.key = 0;
                    } else {
                        var A = _$z.MidVV(_$_, m, Ii);
                        if (_$z.DotVV(_$z.SubVV(o, A, _$z.s_t1), _$d[p]) > a) return;
                        i.pointCount = 1, i.type = t1.b2ManifoldType.e_faceA, i.localNormal.Copy(_$d[p]).SelfNormalize(), i.localPoint.Copy(A), i.points[0].localPoint.Copy(h.m_p), i.points[0].id.key = 0;
                    }
                }
                var Mi = new _$z, Ci = new _$z, _$Ni = new _$z, _$Pi = new _$z;
                function Di(t1, i, s, r, h) {
                    for(var e = t1.m_vertices, u = t1.m_normals, o = r.m_count, f = r.m_vertices, _$c = _$K.MulRV(i.q, u[s], Mi), a = _$K.MulTRV(h.q, _$c, Ci), v = 0, l = 1e37, _$d = 0; _$d < o; ++_$d){
                        var w = _$z.DotVV(f[_$d], a);
                        w < l && (l = w, v = _$d);
                    }
                    var g = J.MulXV(i, e[s], _$Ni), p = J.MulXV(h, f[v], _$Pi);
                    return _$z.DotVV(_$z.SubVV(p, g, _$z.s_t0), _$c);
                }
                var _$Li = new _$z, _$Bi = new _$z;
                function Fi(t1, i, n, s, r) {
                    for(var h = i.m_count, e = i.m_normals, u = _$z.SubVV(J.MulXV(r, s.m_centroid, _$z.s_t0), J.MulXV(n, i.m_centroid, _$z.s_t1), _$Li), o = _$K.MulTRV(n.q, u, _$Bi), f = 0, _$c = -1e+37, a = 0; a < h; ++a){
                        var v = _$z.DotVV(e[a], o);
                        v > _$c && (_$c = v, f = a);
                    }
                    var l = Di(i, n, f, s, r), _$d = (f + h - 1) % h, w = Di(i, n, _$d, s, r), g = (f + 1) % h, p = Di(i, n, g, s, r), _$y = 0, _$_ = 0, m = 0;
                    if (w > l && w > p) m = -1, _$y = _$d, _$_ = w;
                    else {
                        if (!(p > l)) return t1[0] = f, l;
                        m = 1, _$y = g, _$_ = p;
                    }
                    for(; (l = Di(i, n, f = -1 === m ? (_$y + h - 1) % h : (_$y + 1) % h, s, r)) > _$_;)_$y = f, _$_ = l;
                    return t1[0] = _$y, _$_;
                }
                var _$Ui = new _$z;
                function xi(i, s, r, h, e, u) {
                    for(var o = s.m_normals, f = e.m_count, _$c = e.m_vertices, a = e.m_normals, v = _$K.MulTRV(u.q, _$K.MulRV(r.q, o[h], _$z.s_t0), _$Ui), l = 0, _$d = 1e37, w = 0; w < f; ++w){
                        var g = _$z.DotVV(v, a[w]);
                        g < _$d && (_$d = g, l = w);
                    }
                    var p = l, _$y = (p + 1) % f, _$_ = i[0];
                    J.MulXV(u, _$c[p], _$_.v);
                    var m = _$_.id.cf;
                    m.indexA = h, m.indexB = p, m.typeA = t1.b2ContactFeatureType.e_face, m.typeB = t1.b2ContactFeatureType.e_vertex;
                    var b = i[1];
                    J.MulXV(u, _$c[_$y], b.v);
                    var k = b.id.cf;
                    k.indexA = h, k.indexB = _$y, k.typeA = t1.b2ContactFeatureType.e_face, k.typeB = t1.b2ContactFeatureType.e_vertex;
                }
                var _$ji = _$Bt.MakeArray(2), Gi = _$Bt.MakeArray(2), _$Hi = _$Bt.MakeArray(2), _$Vi = [
                    0
                ], _$Wi = [
                    0
                ], _$zi = new _$z, _$$i = new _$z, Xi = new _$z, qi = new _$z, Yi = new _$z, Ki = new _$z, Ji = new _$z, _$Qi = new _$z;
                function Zi(i, n, s, r, h) {
                    i.pointCount = 0;
                    var e = n.m_radius + r.m_radius;
                    _$Vi[0] = 0;
                    var o = Fi(_$Vi, n, s, r, h);
                    if (!(o > e)) {
                        _$Wi[0] = 0;
                        var _$c = Fi(_$Wi, r, h, n, s);
                        if (!(_$c > e)) {
                            var a, v, l, _$d, w = 0, g = 0;
                            _$c > .98 * o + .001 ? (a = r, v = n, l = h, _$d = s, w = _$Wi[0], i.type = t1.b2ManifoldType.e_faceB, g = 1) : (a = n, v = r, l = s, _$d = h, w = _$Vi[0], i.type = t1.b2ManifoldType.e_faceA, g = 0), xi(_$ji, a, l, w, v, _$d);
                            var _$y = a.m_count, _$_ = a.m_vertices, m = w, b = (w + 1) % _$y, k = _$_[m], A = _$_[b], E = _$z.SubVV(A, k, _$zi);
                            E.Normalize();
                            var T = _$z.CrossVOne(E, _$$i), _$S = _$z.MidVV(k, A, Xi), _$O = _$K.MulRV(l.q, E, Yi), _$I = _$z.CrossVOne(_$O, qi), _$R = J.MulXV(l, k, Ji), _$M = J.MulXV(l, A, _$Qi), _$C = _$z.DotVV(_$I, _$R), _$N = -_$z.DotVV(_$O, _$R) + e, _$P = _$z.DotVV(_$O, _$M) + e;
                            if (!(2 > Gt(Gi, _$ji, _$z.NegV(_$O, Ki), _$N, m) || 2 > Gt(_$Hi, Gi, _$O, _$P, b))) {
                                i.localNormal.Copy(T), i.localPoint.Copy(_$S);
                                for(var _$B = 0, _$F = 0; _$F < 2; ++_$F){
                                    var U = _$Hi[_$F];
                                    if (_$z.DotVV(_$I, U.v) - _$C <= e) {
                                        var x = i.points[_$B];
                                        if (J.MulTXV(_$d, U.v, x.localPoint), x.id.Copy(U.id), g) {
                                            var j = x.id.cf;
                                            x.id.cf.indexA = j.indexB, x.id.cf.indexB = j.indexA, x.id.cf.typeA = j.typeB, x.id.cf.typeB = j.typeA;
                                        }
                                        ++_$B;
                                    }
                                }
                                i.pointCount = _$B;
                            }
                        }
                    }
                }
                var tn, nn = new _$z, sn = new _$z, rn = new _$z, hn = new _$z, en = new _$z, un = new _$z, _$on = new _$z, _$fn = new Ct;
                function cn(i, n, s, r, h) {
                    i.pointCount = 0;
                    var e = J.MulTXV(s, J.MulXV(h, r.m_p, _$z.s_t0), nn), u = n.m_vertex1, o = n.m_vertex2, f = _$z.SubVV(o, u, sn), _$c = _$z.DotVV(f, _$z.SubVV(o, e, _$z.s_t0)), a = _$z.DotVV(f, _$z.SubVV(e, u, _$z.s_t0)), v = n.m_radius + r.m_radius;
                    if (_$fn.cf.indexB = 0, _$fn.cf.typeB = t1.b2ContactFeatureType.e_vertex, a <= 0) {
                        var w = _$z.SubVV(e, u, rn);
                        if (_$z.DotVV(w, w) > v * v) return;
                        if (n.m_hasVertex0) {
                            var g = n.m_vertex0, _$y = _$z.SubVV(u, g, hn);
                            if (_$z.DotVV(_$y, _$z.SubVV(u, e, _$z.s_t0)) > 0) return;
                        }
                        return _$fn.cf.indexA = 0, _$fn.cf.typeA = t1.b2ContactFeatureType.e_vertex, i.pointCount = 1, i.type = t1.b2ManifoldType.e_circles, i.localNormal.SetZero(), i.localPoint.Copy(u), i.points[0].id.Copy(_$fn), void i.points[0].localPoint.Copy(r.m_p);
                    }
                    if (_$c <= 0) {
                        var m = _$z.SubVV(e, o, rn);
                        if (_$z.DotVV(m, m) > v * v) return;
                        if (n.m_hasVertex3) {
                            var b = n.m_vertex3, A = _$z.SubVV(b, o, en);
                            if (_$z.DotVV(A, _$z.SubVV(e, o, _$z.s_t0)) > 0) return;
                        }
                        return _$fn.cf.indexA = 1, _$fn.cf.typeA = t1.b2ContactFeatureType.e_vertex, i.pointCount = 1, i.type = t1.b2ManifoldType.e_circles, i.localNormal.SetZero(), i.localPoint.Copy(o), i.points[0].id.Copy(_$fn), void i.points[0].localPoint.Copy(r.m_p);
                    }
                    var E = _$z.DotVV(f, f);
                    un.x = 1 / E * (_$c * u.x + a * o.x), un.y = 1 / E * (_$c * u.y + a * o.y);
                    var _$S = _$z.SubVV(e, un, rn);
                    if (!(_$z.DotVV(_$S, _$S) > v * v)) {
                        var _$O = _$on.Set(-f.y, f.x);
                        0 > _$z.DotVV(_$O, _$z.SubVV(e, u, _$z.s_t0)) && _$O.Set(-_$O.x, -_$O.y), _$O.Normalize(), _$fn.cf.indexA = 0, _$fn.cf.typeA = t1.b2ContactFeatureType.e_face, i.pointCount = 1, i.type = t1.b2ManifoldType.e_faceA, i.localNormal.Copy(_$O), i.localPoint.Copy(u), i.points[0].id.Copy(_$fn), i.points[0].localPoint.Copy(r.m_p);
                    }
                }
                (t11 = tn || (tn = {}))[t11.e_unknown = 0] = "e_unknown", t11[t11.e_edgeA = 1] = "e_edgeA", t11[t11.e_edgeB = 2] = "e_edgeB";
                var t11, an, vn = function vn() {
                    this.type = tn.e_unknown, this.index = 0, this.separation = 0;
                }, ln = function ln() {
                    this.vertices = [], this.normals = [], this.count = 0;
                };
                (t12 = an || (an = {}))[t12.e_isolated = 0] = "e_isolated", t12[t12.e_concave = 1] = "e_concave", t12[t12.e_convex = 2] = "e_convex";
                var dn = function() {
                    function i() {
                        this.m_polygonB = new ln, this.m_xf = new J, this.m_centroidB = new _$z, this.m_v0 = new _$z, this.m_v1 = new _$z, this.m_v2 = new _$z, this.m_v3 = new _$z, this.m_normal0 = new _$z, this.m_normal1 = new _$z, this.m_normal2 = new _$z, this.m_normal = new _$z, this.m_type1 = an.e_isolated, this.m_type2 = an.e_isolated, this.m_lowerLimit = new _$z, this.m_upperLimit = new _$z, this.m_radius = 0, this.m_front = !1;
                    }
                    var s = i.prototype;
                    return s.Collide = function(n, s, r, h, e) {
                        J.MulTXX(r, e, this.m_xf), J.MulXV(this.m_xf, h.m_centroid, this.m_centroidB), this.m_v0.Copy(s.m_vertex0), this.m_v1.Copy(s.m_vertex1), this.m_v2.Copy(s.m_vertex2), this.m_v3.Copy(s.m_vertex3);
                        var u = s.m_hasVertex0, o = s.m_hasVertex3, f = _$z.SubVV(this.m_v2, this.m_v1, i.s_edge1);
                        f.Normalize(), this.m_normal1.Set(f.y, -f.x);
                        var _$c = _$z.DotVV(this.m_normal1, _$z.SubVV(this.m_centroidB, this.m_v1, _$z.s_t0)), a = 0, v = 0, l = !1, _$d = !1;
                        if (u) {
                            var w = _$z.SubVV(this.m_v1, this.m_v0, i.s_edge0);
                            w.Normalize(), this.m_normal0.Set(w.y, -w.x), l = _$z.CrossVV(w, f) >= 0, a = _$z.DotVV(this.m_normal0, _$z.SubVV(this.m_centroidB, this.m_v0, _$z.s_t0));
                        }
                        if (o) {
                            var g = _$z.SubVV(this.m_v3, this.m_v2, i.s_edge2);
                            g.Normalize(), this.m_normal2.Set(g.y, -g.x), _$d = _$z.CrossVV(f, g) > 0, v = _$z.DotVV(this.m_normal2, _$z.SubVV(this.m_centroidB, this.m_v2, _$z.s_t0));
                        }
                        u && o ? l && _$d ? (this.m_front = a >= 0 || _$c >= 0 || v >= 0, this.m_front ? (this.m_normal.Copy(this.m_normal1), this.m_lowerLimit.Copy(this.m_normal0), this.m_upperLimit.Copy(this.m_normal2)) : (this.m_normal.Copy(this.m_normal1).SelfNeg(), this.m_lowerLimit.Copy(this.m_normal1).SelfNeg(), this.m_upperLimit.Copy(this.m_normal1).SelfNeg())) : l ? (this.m_front = a >= 0 || _$c >= 0 && v >= 0, this.m_front ? (this.m_normal.Copy(this.m_normal1), this.m_lowerLimit.Copy(this.m_normal0), this.m_upperLimit.Copy(this.m_normal1)) : (this.m_normal.Copy(this.m_normal1).SelfNeg(), this.m_lowerLimit.Copy(this.m_normal2).SelfNeg(), this.m_upperLimit.Copy(this.m_normal1).SelfNeg())) : _$d ? (this.m_front = v >= 0 || a >= 0 && _$c >= 0, this.m_front ? (this.m_normal.Copy(this.m_normal1), this.m_lowerLimit.Copy(this.m_normal1), this.m_upperLimit.Copy(this.m_normal2)) : (this.m_normal.Copy(this.m_normal1).SelfNeg(), this.m_lowerLimit.Copy(this.m_normal1).SelfNeg(), this.m_upperLimit.Copy(this.m_normal0).SelfNeg())) : (this.m_front = a >= 0 && _$c >= 0 && v >= 0, this.m_front ? (this.m_normal.Copy(this.m_normal1), this.m_lowerLimit.Copy(this.m_normal1), this.m_upperLimit.Copy(this.m_normal1)) : (this.m_normal.Copy(this.m_normal1).SelfNeg(), this.m_lowerLimit.Copy(this.m_normal2).SelfNeg(), this.m_upperLimit.Copy(this.m_normal0).SelfNeg())) : u ? l ? (this.m_front = a >= 0 || _$c >= 0, this.m_front ? (this.m_normal.Copy(this.m_normal1), this.m_lowerLimit.Copy(this.m_normal0)) : (this.m_normal.Copy(this.m_normal1).SelfNeg(), this.m_lowerLimit.Copy(this.m_normal1)), this.m_upperLimit.Copy(this.m_normal1).SelfNeg()) : (this.m_front = a >= 0 && _$c >= 0, this.m_front ? (this.m_normal.Copy(this.m_normal1), this.m_lowerLimit.Copy(this.m_normal1), this.m_upperLimit.Copy(this.m_normal1).SelfNeg()) : (this.m_normal.Copy(this.m_normal1).SelfNeg(), this.m_lowerLimit.Copy(this.m_normal1), this.m_upperLimit.Copy(this.m_normal0).SelfNeg())) : o ? _$d ? (this.m_front = _$c >= 0 || v >= 0, this.m_front ? (this.m_normal.Copy(this.m_normal1), this.m_lowerLimit.Copy(this.m_normal1).SelfNeg(), this.m_upperLimit.Copy(this.m_normal2)) : (this.m_normal.Copy(this.m_normal1).SelfNeg(), this.m_lowerLimit.Copy(this.m_normal1).SelfNeg(), this.m_upperLimit.Copy(this.m_normal1))) : (this.m_front = _$c >= 0 && v >= 0, this.m_front ? (this.m_normal.Copy(this.m_normal1), this.m_lowerLimit.Copy(this.m_normal1).SelfNeg()) : (this.m_normal.Copy(this.m_normal1).SelfNeg(), this.m_lowerLimit.Copy(this.m_normal2).SelfNeg()), this.m_upperLimit.Copy(this.m_normal1)) : (this.m_front = _$c >= 0, this.m_front ? (this.m_normal.Copy(this.m_normal1), this.m_lowerLimit.Copy(this.m_normal1).SelfNeg(), this.m_upperLimit.Copy(this.m_normal1).SelfNeg()) : (this.m_normal.Copy(this.m_normal1).SelfNeg(), this.m_lowerLimit.Copy(this.m_normal1), this.m_upperLimit.Copy(this.m_normal1))), this.m_polygonB.count = h.m_count;
                        for(var p = 0; p < h.m_count; ++p)this.m_polygonB.vertices.length <= p && this.m_polygonB.vertices.push(new _$z), this.m_polygonB.normals.length <= p && this.m_polygonB.normals.push(new _$z), J.MulXV(this.m_xf, h.m_vertices[p], this.m_polygonB.vertices[p]), _$K.MulRV(this.m_xf.q, h.m_normals[p], this.m_polygonB.normals[p]);
                        this.m_radius = h.m_radius + s.m_radius, n.pointCount = 0;
                        var _$y = this.ComputeEdgeSeparation(i.s_edgeAxis);
                        if (_$y.type !== tn.e_unknown && !(_$y.separation > this.m_radius)) {
                            var _$_ = this.ComputePolygonSeparation(i.s_polygonAxis);
                            if (!(_$_.type !== tn.e_unknown && _$_.separation > this.m_radius)) {
                                var m = _$_.type === tn.e_unknown ? _$y : _$_.separation > .98 * _$y.separation + .001 ? _$_ : _$y, b = i.s_ie, k = i.s_rf;
                                if (m.type === tn.e_edgeA) {
                                    n.type = t1.b2ManifoldType.e_faceA;
                                    for(var A = 0, E = _$z.DotVV(this.m_normal, this.m_polygonB.normals[0]), T = 1; T < this.m_polygonB.count; ++T){
                                        var _$S = _$z.DotVV(this.m_normal, this.m_polygonB.normals[T]);
                                        _$S < E && (E = _$S, A = T);
                                    }
                                    var _$O = A, _$I = (_$O + 1) % this.m_polygonB.count, _$R = b[0];
                                    _$R.v.Copy(this.m_polygonB.vertices[_$O]), _$R.id.cf.indexA = 0, _$R.id.cf.indexB = _$O, _$R.id.cf.typeA = t1.b2ContactFeatureType.e_face, _$R.id.cf.typeB = t1.b2ContactFeatureType.e_vertex;
                                    var _$M = b[1];
                                    _$M.v.Copy(this.m_polygonB.vertices[_$I]), _$M.id.cf.indexA = 0, _$M.id.cf.indexB = _$I, _$M.id.cf.typeA = t1.b2ContactFeatureType.e_face, _$M.id.cf.typeB = t1.b2ContactFeatureType.e_vertex, this.m_front ? (k.i1 = 0, k.i2 = 1, k.v1.Copy(this.m_v1), k.v2.Copy(this.m_v2), k.normal.Copy(this.m_normal1)) : (k.i1 = 1, k.i2 = 0, k.v1.Copy(this.m_v2), k.v2.Copy(this.m_v1), k.normal.Copy(this.m_normal1).SelfNeg());
                                } else {
                                    n.type = t1.b2ManifoldType.e_faceB;
                                    var _$C = b[0];
                                    _$C.v.Copy(this.m_v1), _$C.id.cf.indexA = 0, _$C.id.cf.indexB = m.index, _$C.id.cf.typeA = t1.b2ContactFeatureType.e_vertex, _$C.id.cf.typeB = t1.b2ContactFeatureType.e_face;
                                    var _$N = b[1];
                                    _$N.v.Copy(this.m_v2), _$N.id.cf.indexA = 0, _$N.id.cf.indexB = m.index, _$N.id.cf.typeA = t1.b2ContactFeatureType.e_vertex, _$N.id.cf.typeB = t1.b2ContactFeatureType.e_face, k.i1 = m.index, k.i2 = (k.i1 + 1) % this.m_polygonB.count, k.v1.Copy(this.m_polygonB.vertices[k.i1]), k.v2.Copy(this.m_polygonB.vertices[k.i2]), k.normal.Copy(this.m_polygonB.normals[k.i1]);
                                }
                                k.sideNormal1.Set(k.normal.y, -k.normal.x), k.sideNormal2.Copy(k.sideNormal1).SelfNeg(), k.sideOffset1 = _$z.DotVV(k.sideNormal1, k.v1), k.sideOffset2 = _$z.DotVV(k.sideNormal2, k.v2);
                                var _$P = i.s_clipPoints1, _$D = i.s_clipPoints2;
                                if (!(2 > Gt(_$P, b, k.sideNormal1, k.sideOffset1, k.i1) || 2 > Gt(_$D, _$P, k.sideNormal2, k.sideOffset2, k.i2))) {
                                    m.type === tn.e_edgeA ? (n.localNormal.Copy(k.normal), n.localPoint.Copy(k.v1)) : (n.localNormal.Copy(h.m_normals[k.i1]), n.localPoint.Copy(h.m_vertices[k.i1]));
                                    for(var L = 0, _$B = 0; _$B < 2; ++_$B)if (_$z.DotVV(k.normal, _$z.SubVV(_$D[_$B].v, k.v1, _$z.s_t0)) <= this.m_radius) {
                                        var _$F = n.points[L];
                                        m.type === tn.e_edgeA ? (J.MulTXV(this.m_xf, _$D[_$B].v, _$F.localPoint), _$F.id.Copy(_$D[_$B].id)) : (_$F.localPoint.Copy(_$D[_$B].v), _$F.id.cf.typeA = _$D[_$B].id.cf.typeB, _$F.id.cf.typeB = _$D[_$B].id.cf.typeA, _$F.id.cf.indexA = _$D[_$B].id.cf.indexB, _$F.id.cf.indexB = _$D[_$B].id.cf.indexA), ++L;
                                    }
                                    n.pointCount = L;
                                }
                            }
                        }
                    }, s.ComputeEdgeSeparation = function(t1) {
                        t1.type = tn.e_edgeA, t1.index = +!this.m_front, t1.separation = 1e37;
                        for(var s = 0; s < this.m_polygonB.count; ++s){
                            var _$r = _$z.DotVV(this.m_normal, _$z.SubVV(this.m_polygonB.vertices[s], this.m_v1, _$z.s_t0));
                            _$r < t1.separation && (t1.separation = _$r);
                        }
                        return t1;
                    }, s.ComputePolygonSeparation = function(t1) {
                        t1.type = tn.e_unknown, t1.index = -1, t1.separation = -1e+37;
                        for(var s = i.s_perp.Set(-this.m_normal.y, this.m_normal.x), _$r = 0; _$r < this.m_polygonB.count; ++_$r){
                            var h = _$z.NegV(this.m_polygonB.normals[_$r], i.s_n), e = N(_$z.DotVV(h, _$z.SubVV(this.m_polygonB.vertices[_$r], this.m_v1, _$z.s_t0)), _$z.DotVV(h, _$z.SubVV(this.m_polygonB.vertices[_$r], this.m_v2, _$z.s_t0)));
                            if (e > this.m_radius) return t1.type = tn.e_edgeB, t1.index = _$r, t1.separation = e, t1;
                            if (_$z.DotVV(h, s) >= 0) {
                                if (-0.03490658503988889 > _$z.DotVV(_$z.SubVV(h, this.m_upperLimit, _$z.s_t0), this.m_normal)) continue;
                            } else if (-0.03490658503988889 > _$z.DotVV(_$z.SubVV(h, this.m_lowerLimit, _$z.s_t0), this.m_normal)) continue;
                            e > t1.separation && (t1.type = tn.e_edgeB, t1.index = _$r, t1.separation = e);
                        }
                        return t1;
                    }, i;
                }();
                dn.s_edge1 = new _$z, dn.s_edge0 = new _$z, dn.s_edge2 = new _$z, dn.s_ie = _$Bt.MakeArray(2), dn.s_rf = new function() {
                    this.i1 = 0, this.i2 = 0, this.v1 = new _$z, this.v2 = new _$z, this.normal = new _$z, this.sideNormal1 = new _$z, this.sideOffset1 = 0, this.sideNormal2 = new _$z, this.sideOffset2 = 0;
                }, dn.s_clipPoints1 = _$Bt.MakeArray(2), dn.s_clipPoints2 = _$Bt.MakeArray(2), dn.s_edgeAxis = new vn, dn.s_polygonAxis = new vn, dn.s_n = new _$z, dn.s_perp = new _$z;
                var wn = new dn;
                function gn(t1, i, n, s, r) {
                    wn.Collide(t1, i, n, s, r);
                }
                var t12, pn, yn = function yn() {
                    this.mass = 0, this.center = new _$z(0, 0), this.I = 0;
                };
                (pn = t1.b2ShapeType || (t1.b2ShapeType = {}))[pn.e_unknown = -1] = "e_unknown", pn[pn.e_circleShape = 0] = "e_circleShape", pn[pn.e_edgeShape = 1] = "e_edgeShape", pn[pn.e_polygonShape = 2] = "e_polygonShape", pn[pn.e_chainShape = 3] = "e_chainShape", pn[pn.e_shapeTypeCount = 4] = "e_shapeTypeCount";
                var _$_n = function() {
                    function i(i, n) {
                        this.m_type = t1.b2ShapeType.e_unknown, this.m_radius = 0, this.m_type = i, this.m_radius = n;
                    }
                    var n = i.prototype;
                    return n.Copy = function(t1) {
                        return this.m_radius = t1.m_radius, this;
                    }, n.GetType = function() {
                        return this.m_type;
                    }, i;
                }(), mn = function(i) {
                    function n(n) {
                        var s;
                        return void 0 === n && (n = 0), (s = i.call(this, t1.b2ShapeType.e_circleShape, n) || this).m_p = new _$z, s;
                    }
                    h(n, i);
                    var s = n.prototype;
                    return s.Set = function(t1, i) {
                        return void 0 === i && (i = this.m_radius), this.m_p.Copy(t1), this.m_radius = i, this;
                    }, s.Clone = function() {
                        return (new n).Copy(this);
                    }, s.Copy = function(t1) {
                        return i.prototype.Copy.call(this, t1), this.m_p.Copy(t1.m_p), this;
                    }, s.GetChildCount = function() {
                        return 1;
                    }, s.TestPoint = function(t1, i) {
                        var t11, s = J.MulXV(t1, this.m_p, n.TestPoint_s_center), _$r = _$z.SubVV(i, s, n.TestPoint_s_d);
                        return _$z.DotVV(_$r, _$r) <= (t11 = this.m_radius) * t11;
                    }, s.ComputeDistance = function(t1, i, s) {
                        var _$r = J.MulXV(t1, this.m_p, n.ComputeDistance_s_center);
                        return _$z.SubVV(i, _$r, s), s.Normalize() - this.m_radius;
                    }, s.RayCast = function(t1, i, s) {
                        var t11, _$h = J.MulXV(s, this.m_p, n.RayCast_s_position), e = _$z.SubVV(i.p1, _$h, n.RayCast_s_s), u = _$z.DotVV(e, e) - (t11 = this.m_radius) * t11, o = _$z.SubVV(i.p2, i.p1, n.RayCast_s_r), f = _$z.DotVV(e, o), _$c = _$z.DotVV(o, o), a = f * f - _$c * u;
                        if (a < 0 || _$c < 1e-5) return !1;
                        var v = -(f + U(a));
                        return 0 <= v && v <= i.maxFraction * _$c && (t1.fraction = v /= _$c, _$z.AddVMulSV(e, v, o, t1.normal).SelfNormalize(), !0);
                    }, s.ComputeAABB = function(t1, i) {
                        var s = J.MulXV(i, this.m_p, n.ComputeAABB_s_p);
                        t1.lowerBound.Set(s.x - this.m_radius, s.y - this.m_radius), t1.upperBound.Set(s.x + this.m_radius, s.y + this.m_radius);
                    }, s.ComputeMass = function(t1, i) {
                        var t11, _$n = (t11 = this.m_radius) * t11;
                        t1.mass = 3.14159265359 * i * _$n, t1.center.Copy(this.m_p), t1.I = t1.mass * (.5 * _$n + _$z.DotVV(this.m_p, this.m_p));
                    }, s.SetupDistanceProxy = function(t1) {
                        t1.m_vertices = t1.m_buffer, t1.m_vertices[0].Copy(this.m_p), t1.m_count = 1, t1.m_radius = this.m_radius;
                    }, s.ComputeSubmergedArea = function(t1, i, n, s) {
                        var _$h = J.MulXV(n, this.m_p, new _$z), e = -(_$z.DotVV(t1, _$h) - i);
                        if (e < -this.m_radius + 1e-5) return 0;
                        if (e > this.m_radius) return s.Copy(_$h), 3.14159265359 * this.m_radius * this.m_radius;
                        var o = this.m_radius * this.m_radius, f = e * e, _$c = o * (_$V(e / this.m_radius) + 1.570796326795) + e * U(o - f), a = -2 / 3 * x(o - f, 1.5) / _$c;
                        return s.x = _$h.x + t1.x * a, s.y = _$h.y + t1.y * a, _$c;
                    }, s.Dump = function(t1) {
                        t1("    const shape: b2CircleShape = new b2CircleShape();\n"), t1("    shape.m_radius = %.15f;\n", this.m_radius), t1("    shape.m_p.Set(%.15f, %.15f);\n", this.m_p.x, this.m_p.y);
                    }, n;
                }(_$_n);
                mn.TestPoint_s_center = new _$z, mn.TestPoint_s_d = new _$z, mn.ComputeDistance_s_center = new _$z, mn.RayCast_s_position = new _$z, mn.RayCast_s_s = new _$z, mn.RayCast_s_r = new _$z, mn.ComputeAABB_s_p = new _$z;
                var bn = function(i) {
                    function n() {
                        var _$n;
                        return (_$n = i.call(this, t1.b2ShapeType.e_polygonShape, .016) || this).m_centroid = new _$z(0, 0), _$n.m_vertices = [], _$n.m_normals = [], _$n.m_count = 0, _$n;
                    }
                    h(n, i);
                    var s = n.prototype;
                    return s.Clone = function() {
                        return (new n).Copy(this);
                    }, s.Copy = function(t1) {
                        i.prototype.Copy.call(this, t1), this.m_centroid.Copy(t1.m_centroid), this.m_count = t1.m_count, this.m_vertices = _$z.MakeArray(this.m_count), this.m_normals = _$z.MakeArray(this.m_count);
                        for(var _$n = 0; _$n < this.m_count; ++_$n)this.m_vertices[_$n].Copy(t1.m_vertices[_$n]), this.m_normals[_$n].Copy(t1.m_normals[_$n]);
                        return this;
                    }, s.GetChildCount = function() {
                        return 1;
                    }, s.Set = function() {
                        for(var _$t = arguments.length, _$i = Array(_$t), _$n = 0; _$n < _$t; _$n++)_$i[_$n] = arguments[_$n];
                        if ("number" == typeof _$i[0][0]) {
                            var s = _$i[0];
                            if (s.length % 2 != 0) throw Error();
                            return this._Set(function(t1) {
                                return {
                                    x: s[2 * t1],
                                    y: s[2 * t1 + 1]
                                };
                            }, s.length / 2);
                        }
                        var _$r = _$i[0], _$h = _$i[1] || _$r.length;
                        return this._Set(function(t1) {
                            return _$r[t1];
                        }, _$h);
                    }, s._Set = function(t1, i) {
                        if (i < 3) return this.SetAsBox(1, 1);
                        for(var s = i, _$r = [], _$h = 0; _$h < s; ++_$h){
                            for(var e = t1(_$h), u = !0, o = 0; o < _$r.length; ++o)if (16e-6 > _$z.DistanceSquaredVV(e, _$r[o])) {
                                u = !1;
                                break;
                            }
                            u && _$r.push(e);
                        }
                        if ((s = _$r.length) < 3) return this.SetAsBox(1, 1);
                        for(var f = 0, _$c = _$r[0].x, a = 1; a < s; ++a){
                            var v = _$r[a].x;
                            (v > _$c || v === _$c && _$r[a].y < _$r[f].y) && (f = a, _$c = v);
                        }
                        for(var l = [], _$d = 0, w = f;;){
                            l[_$d] = w;
                            for(var g = 0, p = 1; p < s; ++p)if (g !== w) {
                                var _$y = _$z.SubVV(_$r[g], _$r[l[_$d]], n.Set_s_r), _$_ = _$z.SubVV(_$r[p], _$r[l[_$d]], n.Set_s_v), m = _$z.CrossVV(_$y, _$_);
                                m < 0 && (g = p), 0 === m && _$_.LengthSquared() > _$y.LengthSquared() && (g = p);
                            } else g = p;
                            if (++_$d, w = g, g === f) break;
                        }
                        this.m_count = _$d, this.m_vertices = _$z.MakeArray(this.m_count), this.m_normals = _$z.MakeArray(this.m_count);
                        for(var b = 0; b < _$d; ++b)this.m_vertices[b].Copy(_$r[l[b]]);
                        for(var k = 0; k < _$d; ++k){
                            var A = this.m_vertices[k], E = this.m_vertices[(k + 1) % _$d], T = _$z.SubVV(E, A, _$z.s_t0);
                            _$z.CrossVOne(T, this.m_normals[k]).SelfNormalize();
                        }
                        return n.ComputeCentroid(this.m_vertices, _$d, this.m_centroid), this;
                    }, s.SetAsBox = function(t1, i, n, s) {
                        if (void 0 === s && (s = 0), this.m_count = 4, this.m_vertices = _$z.MakeArray(this.m_count), this.m_normals = _$z.MakeArray(this.m_count), this.m_vertices[0].Set(-t1, -i), this.m_vertices[1].Set(t1, -i), this.m_vertices[2].Set(t1, i), this.m_vertices[3].Set(-t1, i), this.m_normals[0].Set(0, -1), this.m_normals[1].Set(1, 0), this.m_normals[2].Set(0, 1), this.m_normals[3].Set(-1, 0), this.m_centroid.SetZero(), n) {
                            this.m_centroid.Copy(n);
                            var _$r = new J;
                            _$r.SetPosition(n), _$r.SetRotationAngle(s);
                            for(var _$h = 0; _$h < this.m_count; ++_$h)J.MulXV(_$r, this.m_vertices[_$h], this.m_vertices[_$h]), _$K.MulRV(_$r.q, this.m_normals[_$h], this.m_normals[_$h]);
                        }
                        return this;
                    }, s.TestPoint = function(t1, i) {
                        for(var s = J.MulTXV(t1, i, n.TestPoint_s_pLocal), _$r = 0; _$r < this.m_count; ++_$r)if (_$z.DotVV(this.m_normals[_$r], _$z.SubVV(s, this.m_vertices[_$r], _$z.s_t0)) > 0) return !1;
                        return !0;
                    }, s.ComputeDistance = function(t1, i, s) {
                        for(var _$r = J.MulTXV(t1, i, n.ComputeDistance_s_pLocal), _$h = -1e+37, e = n.ComputeDistance_s_normalForMaxDistance.Copy(_$r), u = 0; u < this.m_count; ++u){
                            var o = _$z.DotVV(this.m_normals[u], _$z.SubVV(_$r, this.m_vertices[u], _$z.s_t0));
                            o > _$h && (_$h = o, e.Copy(this.m_normals[u]));
                        }
                        if (_$h > 0) {
                            for(var f = n.ComputeDistance_s_minDistance.Copy(e), _$c = _$h * _$h, a = 0; a < this.m_count; ++a){
                                var v = _$z.SubVV(_$r, this.m_vertices[a], n.ComputeDistance_s_distance), l = v.LengthSquared();
                                _$c > l && (f.Copy(v), _$c = l);
                            }
                            return _$K.MulRV(t1.q, f, s), s.Normalize(), Math.sqrt(_$c);
                        }
                        return _$K.MulRV(t1.q, e, s), _$h;
                    }, s.RayCast = function(t1, i, s) {
                        for(var _$r = J.MulTXV(s, i.p1, n.RayCast_s_p1), _$h = J.MulTXV(s, i.p2, n.RayCast_s_p2), e = _$z.SubVV(_$h, _$r, n.RayCast_s_d), u = 0, o = i.maxFraction, f = -1, _$c = 0; _$c < this.m_count; ++_$c){
                            var a = _$z.DotVV(this.m_normals[_$c], _$z.SubVV(this.m_vertices[_$c], _$r, _$z.s_t0)), v = _$z.DotVV(this.m_normals[_$c], e);
                            if (0 === v) {
                                if (a < 0) return !1;
                            } else v < 0 && a < u * v ? (u = a / v, f = _$c) : v > 0 && a < o * v && (o = a / v);
                            if (o < u) return !1;
                        }
                        return f >= 0 && (t1.fraction = u, _$K.MulRV(s.q, this.m_normals[f], t1.normal), !0);
                    }, s.ComputeAABB = function(t1, i) {
                        for(var s = J.MulXV(i, this.m_vertices[0], t1.lowerBound), _$r = t1.upperBound.Copy(s), _$h = 0; _$h < this.m_count; ++_$h){
                            var e = J.MulXV(i, this.m_vertices[_$h], n.ComputeAABB_s_v);
                            _$z.MinV(e, s, s), _$z.MaxV(e, _$r, _$r);
                        }
                        var u = this.m_radius;
                        s.SelfSubXY(u, u), _$r.SelfAddXY(u, u);
                    }, s.ComputeMass = function(t1, i) {
                        for(var s = n.ComputeMass_s_center.SetZero(), _$r = 0, _$h = 0, e = n.ComputeMass_s_s.SetZero(), u = 0; u < this.m_count; ++u)e.SelfAdd(this.m_vertices[u]);
                        e.SelfMul(1 / this.m_count);
                        for(var o = 1 / 3, f = 0; f < this.m_count; ++f){
                            var _$c = _$z.SubVV(this.m_vertices[f], e, n.ComputeMass_s_e1), a = _$z.SubVV(this.m_vertices[(f + 1) % this.m_count], e, n.ComputeMass_s_e2), v = _$z.CrossVV(_$c, a), l = .5 * v;
                            _$r += l, s.SelfAdd(_$z.MulSV(l * o, _$z.AddVV(_$c, a, _$z.s_t0), _$z.s_t1));
                            var _$d = _$c.x, w = _$c.y, g = a.x, p = a.y;
                            _$h += .25 * o * v * (_$d * _$d + g * _$d + g * g + w * w + p * w + p * p);
                        }
                        t1.mass = i * _$r, s.SelfMul(1 / _$r), _$z.AddVV(s, e, t1.center), t1.I = i * _$h, t1.I += t1.mass * (_$z.DotVV(t1.center, t1.center) - _$z.DotVV(s, s));
                    }, s.Validate = function() {
                        for(var _$t = 0; _$t < this.m_count; ++_$t)for(var _$i = _$t, s = (_$t + 1) % this.m_count, _$r = this.m_vertices[_$i], _$h = _$z.SubVV(this.m_vertices[s], _$r, n.Validate_s_e), e = 0; e < this.m_count; ++e)if (e !== _$i && e !== s) {
                            var u = _$z.SubVV(this.m_vertices[e], _$r, n.Validate_s_v);
                            if (0 > _$z.CrossVV(_$h, u)) return !1;
                        }
                        return !0;
                    }, s.SetupDistanceProxy = function(t1) {
                        t1.m_vertices = this.m_vertices, t1.m_count = this.m_count, t1.m_radius = this.m_radius;
                    }, s.ComputeSubmergedArea = function(t1, i, s, r) {
                        for(var _$h = _$K.MulTRV(s.q, t1, n.ComputeSubmergedArea_s_normalL), e = i - _$z.DotVV(t1, s.p), u = [], o = 0, f = -1, _$c = -1, a = !1, v = 0; v < this.m_count; ++v){
                            u[v] = _$z.DotVV(_$h, this.m_vertices[v]) - e;
                            var l = u[v] < -0.00001;
                            v > 0 && (l ? a || (f = v - 1, o++) : a && (_$c = v - 1, o++)), a = l;
                        }
                        switch(o){
                            case 0:
                                if (a) {
                                    var _$d = n.ComputeSubmergedArea_s_md;
                                    return this.ComputeMass(_$d, 1), J.MulXV(s, _$d.center, r), _$d.mass;
                                }
                                return 0;
                            case 1:
                                -1 === f ? f = this.m_count - 1 : _$c = this.m_count - 1;
                        }
                        for(var w, g = (f + 1) % this.m_count, p = (_$c + 1) % this.m_count, _$y = (0 - u[f]) / (u[g] - u[f]), _$_ = (0 - u[_$c]) / (u[p] - u[_$c]), m = n.ComputeSubmergedArea_s_intoVec.Set(this.m_vertices[f].x * (1 - _$y) + this.m_vertices[g].x * _$y, this.m_vertices[f].y * (1 - _$y) + this.m_vertices[g].y * _$y), b = n.ComputeSubmergedArea_s_outoVec.Set(this.m_vertices[_$c].x * (1 - _$_) + this.m_vertices[p].x * _$_, this.m_vertices[_$c].y * (1 - _$_) + this.m_vertices[p].y * _$_), k = 0, A = n.ComputeSubmergedArea_s_center.SetZero(), E = this.m_vertices[g], T = g; T !== p;){
                            w = (T = (T + 1) % this.m_count) === p ? b : this.m_vertices[T];
                            var _$S = .5 * ((E.x - m.x) * (w.y - m.y) - (E.y - m.y) * (w.x - m.x));
                            k += _$S, A.x += _$S * (m.x + E.x + w.x) / 3, A.y += _$S * (m.y + E.y + w.y) / 3, E = w;
                        }
                        return A.SelfMul(1 / k), J.MulXV(s, A, r), k;
                    }, s.Dump = function(t1) {
                        t1("    const shape: b2PolygonShape = new b2PolygonShape();\n"), t1("    const vs: b2Vec2[] = [];\n");
                        for(var _$i = 0; _$i < this.m_count; ++_$i)t1("    vs[%d] = new b2Vec2(%.15f, %.15f);\n", _$i, this.m_vertices[_$i].x, this.m_vertices[_$i].y);
                        t1("    shape.Set(vs, %d);\n", this.m_count);
                    }, n.ComputeCentroid = function(t1, i, s) {
                        s.SetZero();
                        for(var _$h = 0, e = n.ComputeCentroid_s_pRef.SetZero(), u = 1 / 3, o = 0; o < i; ++o){
                            var _$c = t1[o], a = t1[(o + 1) % i], v = _$z.SubVV(_$c, e, n.ComputeCentroid_s_e1), l = _$z.SubVV(a, e, n.ComputeCentroid_s_e2), _$d = .5 * _$z.CrossVV(v, l);
                            _$h += _$d, s.x += _$d * u * (e.x + _$c.x + a.x), s.y += _$d * u * (e.y + _$c.y + a.y);
                        }
                        return s.SelfMul(1 / _$h), s;
                    }, n;
                }(_$_n);
                bn.Set_s_r = new _$z, bn.Set_s_v = new _$z, bn.TestPoint_s_pLocal = new _$z, bn.ComputeDistance_s_pLocal = new _$z, bn.ComputeDistance_s_normalForMaxDistance = new _$z, bn.ComputeDistance_s_minDistance = new _$z, bn.ComputeDistance_s_distance = new _$z, bn.RayCast_s_p1 = new _$z, bn.RayCast_s_p2 = new _$z, bn.RayCast_s_d = new _$z, bn.ComputeAABB_s_v = new _$z, bn.ComputeMass_s_center = new _$z, bn.ComputeMass_s_s = new _$z, bn.ComputeMass_s_e1 = new _$z, bn.ComputeMass_s_e2 = new _$z, bn.Validate_s_e = new _$z, bn.Validate_s_v = new _$z, bn.ComputeSubmergedArea_s_normalL = new _$z, bn.ComputeSubmergedArea_s_md = new yn, bn.ComputeSubmergedArea_s_intoVec = new _$z, bn.ComputeSubmergedArea_s_outoVec = new _$z, bn.ComputeSubmergedArea_s_center = new _$z, bn.ComputeCentroid_s_pRef = new _$z, bn.ComputeCentroid_s_e1 = new _$z, bn.ComputeCentroid_s_e2 = new _$z;
                var kn = function(i) {
                    function n() {
                        var _$n;
                        return (_$n = i.call(this, t1.b2ShapeType.e_edgeShape, .016) || this).m_vertex1 = new _$z, _$n.m_vertex2 = new _$z, _$n.m_vertex0 = new _$z, _$n.m_vertex3 = new _$z, _$n.m_hasVertex0 = !1, _$n.m_hasVertex3 = !1, _$n;
                    }
                    h(n, i);
                    var s = n.prototype;
                    return s.Set = function(t1, i) {
                        return this.m_vertex1.Copy(t1), this.m_vertex2.Copy(i), this.m_hasVertex0 = !1, this.m_hasVertex3 = !1, this;
                    }, s.Clone = function() {
                        return (new n).Copy(this);
                    }, s.Copy = function(t1) {
                        return i.prototype.Copy.call(this, t1), this.m_vertex1.Copy(t1.m_vertex1), this.m_vertex2.Copy(t1.m_vertex2), this.m_vertex0.Copy(t1.m_vertex0), this.m_vertex3.Copy(t1.m_vertex3), this.m_hasVertex0 = t1.m_hasVertex0, this.m_hasVertex3 = t1.m_hasVertex3, this;
                    }, s.GetChildCount = function() {
                        return 1;
                    }, s.TestPoint = function() {
                        return !1;
                    }, s.ComputeDistance = function(t1, i, s) {
                        var _$r = J.MulXV(t1, this.m_vertex1, n.ComputeDistance_s_v1), _$h = J.MulXV(t1, this.m_vertex2, n.ComputeDistance_s_v2), e = _$z.SubVV(i, _$r, n.ComputeDistance_s_d), u = _$z.SubVV(_$h, _$r, n.ComputeDistance_s_s), o = _$z.DotVV(e, u);
                        if (o > 0) {
                            var f = _$z.DotVV(u, u);
                            o > f ? _$z.SubVV(i, _$h, e) : e.SelfMulSub(o / f, u);
                        }
                        return s.Copy(e), s.Normalize();
                    }, s.RayCast = function(t1, i, s) {
                        var _$r = J.MulTXV(s, i.p1, n.RayCast_s_p1), _$h = J.MulTXV(s, i.p2, n.RayCast_s_p2), e = _$z.SubVV(_$h, _$r, n.RayCast_s_d), u = this.m_vertex1, o = this.m_vertex2, f = _$z.SubVV(o, u, n.RayCast_s_e), _$c = t1.normal.Set(f.y, -f.x).SelfNormalize(), a = _$z.DotVV(_$c, _$z.SubVV(u, _$r, _$z.s_t0)), v = _$z.DotVV(_$c, e);
                        if (0 === v) return !1;
                        var l = a / v;
                        if (l < 0 || i.maxFraction < l) return !1;
                        var _$d = _$z.AddVMulSV(_$r, l, e, n.RayCast_s_q), w = _$z.SubVV(o, u, n.RayCast_s_r), g = _$z.DotVV(w, w);
                        if (0 === g) return !1;
                        var p = _$z.DotVV(_$z.SubVV(_$d, u, _$z.s_t0), w) / g;
                        return !(p < 0 || 1 < p || (t1.fraction = l, _$K.MulRV(s.q, t1.normal, t1.normal), a > 0 && t1.normal.SelfNeg(), 0));
                    }, s.ComputeAABB = function(t1, i) {
                        var s = J.MulXV(i, this.m_vertex1, n.ComputeAABB_s_v1), _$r = J.MulXV(i, this.m_vertex2, n.ComputeAABB_s_v2);
                        _$z.MinV(s, _$r, t1.lowerBound), _$z.MaxV(s, _$r, t1.upperBound);
                        var _$h = this.m_radius;
                        t1.lowerBound.SelfSubXY(_$h, _$h), t1.upperBound.SelfAddXY(_$h, _$h);
                    }, s.ComputeMass = function(t1) {
                        t1.mass = 0, _$z.MidVV(this.m_vertex1, this.m_vertex2, t1.center), t1.I = 0;
                    }, s.SetupDistanceProxy = function(t1) {
                        t1.m_vertices = t1.m_buffer, t1.m_vertices[0].Copy(this.m_vertex1), t1.m_vertices[1].Copy(this.m_vertex2), t1.m_count = 2, t1.m_radius = this.m_radius;
                    }, s.ComputeSubmergedArea = function(t1, i, n, s) {
                        return s.SetZero(), 0;
                    }, s.Dump = function(t1) {
                        t1("    const shape: b2EdgeShape = new b2EdgeShape();\n"), t1("    shape.m_radius = %.15f;\n", this.m_radius), t1("    shape.m_vertex0.Set(%.15f, %.15f);\n", this.m_vertex0.x, this.m_vertex0.y), t1("    shape.m_vertex1.Set(%.15f, %.15f);\n", this.m_vertex1.x, this.m_vertex1.y), t1("    shape.m_vertex2.Set(%.15f, %.15f);\n", this.m_vertex2.x, this.m_vertex2.y), t1("    shape.m_vertex3.Set(%.15f, %.15f);\n", this.m_vertex3.x, this.m_vertex3.y), t1("    shape.m_hasVertex0 = %s;\n", this.m_hasVertex0), t1("    shape.m_hasVertex3 = %s;\n", this.m_hasVertex3);
                    }, n;
                }(_$_n);
                kn.ComputeDistance_s_v1 = new _$z, kn.ComputeDistance_s_v2 = new _$z, kn.ComputeDistance_s_d = new _$z, kn.ComputeDistance_s_s = new _$z, kn.RayCast_s_p1 = new _$z, kn.RayCast_s_p2 = new _$z, kn.RayCast_s_d = new _$z, kn.RayCast_s_e = new _$z, kn.RayCast_s_q = new _$z, kn.RayCast_s_r = new _$z, kn.ComputeAABB_s_v1 = new _$z, kn.ComputeAABB_s_v2 = new _$z;
                var _$An = function(i) {
                    function n() {
                        var _$n;
                        return (_$n = i.call(this, t1.b2ShapeType.e_chainShape, .016) || this).m_vertices = [], _$n.m_count = 0, _$n.m_prevVertex = new _$z, _$n.m_nextVertex = new _$z, _$n.m_hasPrevVertex = !1, _$n.m_hasNextVertex = !1, _$n;
                    }
                    h(n, i);
                    var s = n.prototype;
                    return s.CreateLoop = function() {
                        for(var _$t = arguments.length, _$i = Array(_$t), _$n = 0; _$n < _$t; _$n++)_$i[_$n] = arguments[_$n];
                        if ("number" == typeof _$i[0][0]) {
                            var s = _$i[0];
                            if (s.length % 2 != 0) throw Error();
                            return this._CreateLoop(function(t1) {
                                return {
                                    x: s[2 * t1],
                                    y: s[2 * t1 + 1]
                                };
                            }, s.length / 2);
                        }
                        var _$r = _$i[0], _$h = _$i[1] || _$r.length;
                        return this._CreateLoop(function(t1) {
                            return _$r[t1];
                        }, _$h);
                    }, s._CreateLoop = function(t1, i) {
                        if (i < 3) return this;
                        this.m_count = i + 1, this.m_vertices = _$z.MakeArray(this.m_count);
                        for(var _$n = 0; _$n < i; ++_$n)this.m_vertices[_$n].Copy(t1(_$n));
                        return this.m_vertices[i].Copy(this.m_vertices[0]), this.m_prevVertex.Copy(this.m_vertices[this.m_count - 2]), this.m_nextVertex.Copy(this.m_vertices[1]), this.m_hasPrevVertex = !0, this.m_hasNextVertex = !0, this;
                    }, s.CreateChain = function() {
                        for(var _$t = arguments.length, _$i = Array(_$t), _$n = 0; _$n < _$t; _$n++)_$i[_$n] = arguments[_$n];
                        if ("number" == typeof _$i[0][0]) {
                            var s = _$i[0];
                            if (s.length % 2 != 0) throw Error();
                            return this._CreateChain(function(t1) {
                                return {
                                    x: s[2 * t1],
                                    y: s[2 * t1 + 1]
                                };
                            }, s.length / 2);
                        }
                        var _$r = _$i[0], _$h = _$i[1] || _$r.length;
                        return this._CreateChain(function(t1) {
                            return _$r[t1];
                        }, _$h);
                    }, s._CreateChain = function(t1, i) {
                        this.m_count = i, this.m_vertices = _$z.MakeArray(i);
                        for(var _$n = 0; _$n < i; ++_$n)this.m_vertices[_$n].Copy(t1(_$n));
                        return this.m_hasPrevVertex = !1, this.m_hasNextVertex = !1, this.m_prevVertex.SetZero(), this.m_nextVertex.SetZero(), this;
                    }, s.SetPrevVertex = function(t1) {
                        return this.m_prevVertex.Copy(t1), this.m_hasPrevVertex = !0, this;
                    }, s.SetNextVertex = function(t1) {
                        return this.m_nextVertex.Copy(t1), this.m_hasNextVertex = !0, this;
                    }, s.Clone = function() {
                        return (new n).Copy(this);
                    }, s.Copy = function(t1) {
                        return i.prototype.Copy.call(this, t1), this._CreateChain(function(i) {
                            return t1.m_vertices[i];
                        }, t1.m_count), this.m_prevVertex.Copy(t1.m_prevVertex), this.m_nextVertex.Copy(t1.m_nextVertex), this.m_hasPrevVertex = t1.m_hasPrevVertex, this.m_hasNextVertex = t1.m_hasNextVertex, this;
                    }, s.GetChildCount = function() {
                        return this.m_count - 1;
                    }, s.GetChildEdge = function(t1, i) {
                        t1.m_radius = this.m_radius, t1.m_vertex1.Copy(this.m_vertices[i]), t1.m_vertex2.Copy(this.m_vertices[i + 1]), i > 0 ? (t1.m_vertex0.Copy(this.m_vertices[i - 1]), t1.m_hasVertex0 = !0) : (t1.m_vertex0.Copy(this.m_prevVertex), t1.m_hasVertex0 = this.m_hasPrevVertex), i < this.m_count - 2 ? (t1.m_vertex3.Copy(this.m_vertices[i + 2]), t1.m_hasVertex3 = !0) : (t1.m_vertex3.Copy(this.m_nextVertex), t1.m_hasVertex3 = this.m_hasNextVertex);
                    }, s.TestPoint = function() {
                        return !1;
                    }, s.ComputeDistance = function(t1, i, s, r) {
                        var _$h = n.ComputeDistance_s_edgeShape;
                        return this.GetChildEdge(_$h, r), _$h.ComputeDistance(t1, i, s, 0);
                    }, s.RayCast = function(t1, i, s, r) {
                        var _$h = n.RayCast_s_edgeShape;
                        return _$h.m_vertex1.Copy(this.m_vertices[r]), _$h.m_vertex2.Copy(this.m_vertices[(r + 1) % this.m_count]), _$h.RayCast(t1, i, s, 0);
                    }, s.ComputeAABB = function(t1, i, s) {
                        var _$r = this.m_vertices[s], _$h = this.m_vertices[(s + 1) % this.m_count], e = J.MulXV(i, _$r, n.ComputeAABB_s_v1), u = J.MulXV(i, _$h, n.ComputeAABB_s_v2);
                        _$z.MinV(e, u, t1.lowerBound), _$z.MaxV(e, u, t1.upperBound);
                    }, s.ComputeMass = function(t1) {
                        t1.mass = 0, t1.center.SetZero(), t1.I = 0;
                    }, s.SetupDistanceProxy = function(t1, i) {
                        t1.m_vertices = t1.m_buffer, t1.m_vertices[0].Copy(this.m_vertices[i]), i + 1 < this.m_count ? t1.m_vertices[1].Copy(this.m_vertices[i + 1]) : t1.m_vertices[1].Copy(this.m_vertices[0]), t1.m_count = 2, t1.m_radius = this.m_radius;
                    }, s.ComputeSubmergedArea = function(t1, i, n, s) {
                        return s.SetZero(), 0;
                    }, s.Dump = function(t1) {
                        t1("    const shape: b2ChainShape = new b2ChainShape();\n"), t1("    const vs: b2Vec2[] = [];\n");
                        for(var _$i = 0; _$i < this.m_count; ++_$i)t1("    vs[%d] = new bVec2(%.15f, %.15f);\n", _$i, this.m_vertices[_$i].x, this.m_vertices[_$i].y);
                        t1("    shape.CreateChain(vs, %d);\n", this.m_count), t1("    shape.m_prevVertex.Set(%.15f, %.15f);\n", this.m_prevVertex.x, this.m_prevVertex.y), t1("    shape.m_nextVertex.Set(%.15f, %.15f);\n", this.m_nextVertex.x, this.m_nextVertex.y), t1("    shape.m_hasPrevVertex = %s;\n", this.m_hasPrevVertex ? "true" : "false"), t1("    shape.m_hasNextVertex = %s;\n", this.m_hasNextVertex ? "true" : "false");
                    }, n;
                }(_$_n);
                _$An.ComputeDistance_s_edgeShape = new kn, _$An.RayCast_s_edgeShape = new kn, _$An.ComputeAABB_s_v1 = new _$z, _$An.ComputeAABB_s_v2 = new _$z;
                var _$En = function() {
                    function t1() {
                        this.categoryBits = 1, this.maskBits = 65535, this.groupIndex = 0;
                    }
                    var _$i = t1.prototype;
                    return _$i.Clone = function() {
                        return (new t1).Copy(this);
                    }, _$i.Copy = function(t1) {
                        return this.categoryBits = t1.categoryBits, this.maskBits = t1.maskBits, this.groupIndex = t1.groupIndex || 0, this;
                    }, t1;
                }();
                _$En.DEFAULT = new _$En;
                var Tn = function Tn() {
                    this.userData = null, this.friction = .2, this.restitution = 0, this.density = 0, this.isSensor = !1, this.filter = new _$En;
                }, Sn = function() {
                    function t1(t1, i) {
                        this.aabb = new _$xt, this.childIndex = 0, this.fixture = t1, this.childIndex = i, this.fixture.m_shape.ComputeAABB(this.aabb, this.fixture.m_body.GetTransform(), i), this.treeNode = this.fixture.m_body.m_world.m_contactManager.m_broadPhase.CreateProxy(this.aabb, this);
                    }
                    var _$i = t1.prototype;
                    return _$i.Reset = function() {
                        this.fixture.m_body.m_world.m_contactManager.m_broadPhase.DestroyProxy(this.treeNode);
                    }, _$i.Touch = function() {
                        this.fixture.m_body.m_world.m_contactManager.m_broadPhase.TouchProxy(this.treeNode);
                    }, _$i.Synchronize = function(i, n, s) {
                        if (i === n) this.fixture.m_shape.ComputeAABB(this.aabb, i, this.childIndex), this.fixture.m_body.m_world.m_contactManager.m_broadPhase.MoveProxy(this.treeNode, this.aabb, s);
                        else {
                            var _$r = t1.Synchronize_s_aabb1, h = t1.Synchronize_s_aabb2;
                            this.fixture.m_shape.ComputeAABB(_$r, i, this.childIndex), this.fixture.m_shape.ComputeAABB(h, n, this.childIndex), this.aabb.Combine2(_$r, h), this.fixture.m_body.m_world.m_contactManager.m_broadPhase.MoveProxy(this.treeNode, this.aabb, s);
                        }
                    }, t1;
                }();
                Sn.Synchronize_s_aabb1 = new _$xt, Sn.Synchronize_s_aabb2 = new _$xt;
                var On, In = function() {
                    function t1(t1, n) {
                        this.m_density = 0, this.m_next = null, this.m_friction = 0, this.m_restitution = 0, this.m_proxies = [], this.m_filter = new _$En, this.m_isSensor = !1, this.m_userData = null, this.m_body = t1, this.m_shape = n.shape.Clone(), this.m_userData = i(n.userData, null), this.m_friction = i(n.friction, .2), this.m_restitution = i(n.restitution, 0), this.m_filter.Copy(i(n.filter, _$En.DEFAULT)), this.m_isSensor = i(n.isSensor, !1), this.m_density = i(n.density, 0);
                    }
                    var n = t1.prototype;
                    return n.Reset = function() {}, n.GetType = function() {
                        return this.m_shape.GetType();
                    }, n.GetShape = function() {
                        return this.m_shape;
                    }, n.SetSensor = function(t1) {
                        t1 !== this.m_isSensor && (this.m_body.SetAwake(!0), this.m_isSensor = t1);
                    }, n.IsSensor = function() {
                        return this.m_isSensor;
                    }, n.SetFilterData = function(t1) {
                        this.m_filter.Copy(t1), this.Refilter();
                    }, n.GetFilterData = function() {
                        return this.m_filter;
                    }, n.Refilter = function() {
                        for(var _$t = this.m_body.GetContactList(); _$t;){
                            var _$i = _$t.contact, n = _$i.GetFixtureA(), _$s = _$i.GetFixtureB();
                            n !== this && _$s !== this || _$i.FlagForFiltering(), _$t = _$t.next;
                        }
                        this.TouchProxies();
                    }, n.GetBody = function() {
                        return this.m_body;
                    }, n.GetNext = function() {
                        return this.m_next;
                    }, n.GetUserData = function() {
                        return this.m_userData;
                    }, n.SetUserData = function(t1) {
                        this.m_userData = t1;
                    }, n.TestPoint = function(t1) {
                        return this.m_shape.TestPoint(this.m_body.GetTransform(), t1);
                    }, n.ComputeDistance = function(t1, i, n) {
                        return this.m_shape.ComputeDistance(this.m_body.GetTransform(), t1, i, n);
                    }, n.RayCast = function(t1, i, n) {
                        return this.m_shape.RayCast(t1, i, this.m_body.GetTransform(), n);
                    }, n.GetMassData = function(t1) {
                        return void 0 === t1 && (t1 = new yn), this.m_shape.ComputeMass(t1, this.m_density), t1;
                    }, n.SetDensity = function(t1) {
                        this.m_density = t1;
                    }, n.GetDensity = function() {
                        return this.m_density;
                    }, n.GetFriction = function() {
                        return this.m_friction;
                    }, n.SetFriction = function(t1) {
                        this.m_friction = t1;
                    }, n.GetRestitution = function() {
                        return this.m_restitution;
                    }, n.SetRestitution = function(t1) {
                        this.m_restitution = t1;
                    }, n.GetAABB = function(t1) {
                        return this.m_proxies[t1].aabb;
                    }, n.Dump = function(t1, i) {
                        t1("    const fd: b2FixtureDef = new b2FixtureDef();\n"), t1("    fd.friction = %.15f;\n", this.m_friction), t1("    fd.restitution = %.15f;\n", this.m_restitution), t1("    fd.density = %.15f;\n", this.m_density), t1("    fd.isSensor = %s;\n", this.m_isSensor ? "true" : "false"), t1("    fd.filter.categoryBits = %d;\n", this.m_filter.categoryBits), t1("    fd.filter.maskBits = %d;\n", this.m_filter.maskBits), t1("    fd.filter.groupIndex = %d;\n", this.m_filter.groupIndex), this.m_shape.Dump(t1), t1("\n"), t1("    fd.shape = shape;\n"), t1("\n"), t1("    bodies[%d].CreateFixture(fd);\n", i);
                    }, n.CreateProxies = function() {
                        if (0 !== this.m_proxies.length) throw Error();
                        for(var _$t = 0; _$t < this.m_shape.GetChildCount(); ++_$t)this.m_proxies[_$t] = new Sn(this, _$t);
                    }, n.DestroyProxies = function() {
                        for(var _$t, _$i = d(this.m_proxies); !(_$t = _$i()).done;)_$t.value.Reset();
                        this.m_proxies.length = 0;
                    }, n.TouchProxies = function() {
                        for(var _$t, _$i = d(this.m_proxies); !(_$t = _$i()).done;)_$t.value.Touch();
                    }, n.SynchronizeProxies = function(t1, i, n) {
                        for(var _$s, _$r = d(this.m_proxies); !(_$s = _$r()).done;)_$s.value.Synchronize(t1, i, n);
                    }, s(t1, [
                        {
                            key: "m_proxyCount",
                            get: function get() {
                                return this.m_proxies.length;
                            }
                        }
                    ]), t1;
                }();
                (On = t1.b2BodyType || (t1.b2BodyType = {}))[On.b2_unknown = -1] = "b2_unknown", On[On.b2_staticBody = 0] = "b2_staticBody", On[On.b2_kinematicBody = 1] = "b2_kinematicBody", On[On.b2_dynamicBody = 2] = "b2_dynamicBody";
                var Rn, Mn, Cn = function() {
                    function n(n, s) {
                        this.m_type = t1.b2BodyType.b2_staticBody, this.m_islandFlag = !1, this.m_awakeFlag = !1, this.m_autoSleepFlag = !1, this.m_bulletFlag = !1, this.m_fixedRotationFlag = !1, this.m_activeFlag = !1, this.m_toiFlag = !1, this.m_islandIndex = 0, this.m_xf = new J, this.m_xf0 = new J, this.m_sweep = new Z, this.m_linearVelocity = new _$z, this.m_angularVelocity = 0, this.m_force = new _$z, this.m_torque = 0, this.m_prev = null, this.m_next = null, this.m_fixtureList = null, this.m_fixtureCount = 0, this.m_jointList = null, this.m_contactList = null, this.m_mass = 1, this.m_invMass = 1, this.m_I = 0, this.m_invI = 0, this.m_linearDamping = 0, this.m_angularDamping = 0, this.m_gravityScale = 1, this.m_sleepTime = 0, this.m_userData = null, this.m_controllerList = null, this.m_controllerCount = 0, this.m_bulletFlag = i(n.bullet, !1), this.m_fixedRotationFlag = i(n.fixedRotation, !1), this.m_autoSleepFlag = i(n.allowSleep, !0), this.m_awakeFlag = i(n.awake, !0), this.m_activeFlag = i(n.active, !0), this.m_world = s, this.m_xf.p.Copy(i(n.position, _$z.ZERO)), this.m_xf.q.SetAngle(i(n.angle, 0)), this.m_xf0.Copy(this.m_xf), this.m_sweep.localCenter.SetZero(), this.m_sweep.c0.Copy(this.m_xf.p), this.m_sweep.c.Copy(this.m_xf.p), this.m_sweep.a0 = this.m_sweep.a = this.m_xf.q.GetAngle(), this.m_sweep.alpha0 = 0, this.m_linearVelocity.Copy(i(n.linearVelocity, _$z.ZERO)), this.m_angularVelocity = i(n.angularVelocity, 0), this.m_linearDamping = i(n.linearDamping, 0), this.m_angularDamping = i(n.angularDamping, 0), this.m_gravityScale = i(n.gravityScale, 1), this.m_force.SetZero(), this.m_torque = 0, this.m_sleepTime = 0, this.m_type = i(n.type, t1.b2BodyType.b2_staticBody), n.type === t1.b2BodyType.b2_dynamicBody ? (this.m_mass = 1, this.m_invMass = 1) : (this.m_mass = 0, this.m_invMass = 0), this.m_I = 0, this.m_invI = 0, this.m_userData = n.userData, this.m_fixtureList = null, this.m_fixtureCount = 0, this.m_controllerList = null, this.m_controllerCount = 0;
                    }
                    var s = n.prototype;
                    return s.CreateFixture = function(t1, i) {
                        return void 0 === i && (i = 0), _instanceof(t1, _$_n) ? this.CreateFixtureShapeDensity(t1, i) : this.CreateFixtureDef(t1);
                    }, s.CreateFixtureDef = function(t1) {
                        if (this.m_world.IsLocked()) throw Error();
                        var _$i = new In(this, t1);
                        return this.m_activeFlag && _$i.CreateProxies(), _$i.m_next = this.m_fixtureList, this.m_fixtureList = _$i, ++this.m_fixtureCount, _$i.m_density > 0 && this.ResetMassData(), this.m_world.m_newFixture = !0, _$i;
                    }, s.CreateFixtureShapeDensity = function(t1, i) {
                        void 0 === i && (i = 0);
                        var s = n.CreateFixtureShapeDensity_s_def;
                        return s.shape = t1, s.density = i, this.CreateFixtureDef(s);
                    }, s.DestroyFixture = function(t1) {
                        if (this.m_world.IsLocked()) throw Error();
                        for(var _$i = this.m_fixtureList, _$n = null; null !== _$i;){
                            if (_$i === t1) {
                                _$n ? _$n.m_next = t1.m_next : this.m_fixtureList = t1.m_next;
                                break;
                            }
                            _$n = _$i, _$i = _$i.m_next;
                        }
                        for(var s = this.m_contactList; s;){
                            var _$r = s.contact;
                            s = s.next;
                            var h = _$r.GetFixtureA(), e = _$r.GetFixtureB();
                            t1 !== h && t1 !== e || this.m_world.m_contactManager.Destroy(_$r);
                        }
                        this.m_activeFlag && t1.DestroyProxies(), t1.m_next = null, t1.Reset(), --this.m_fixtureCount, this.ResetMassData();
                    }, s.SetTransformVec = function(t1, i) {
                        this.SetTransformXY(t1.x, t1.y, i);
                    }, s.SetTransformXY = function(t1, i, n) {
                        if (this.m_world.IsLocked()) throw Error();
                        this.m_xf.q.SetAngle(n), this.m_xf.p.Set(t1, i), this.m_xf0.Copy(this.m_xf), J.MulXV(this.m_xf, this.m_sweep.localCenter, this.m_sweep.c), this.m_sweep.a = n, this.m_sweep.c0.Copy(this.m_sweep.c), this.m_sweep.a0 = n;
                        for(var s = this.m_fixtureList; s; s = s.m_next)s.SynchronizeProxies(this.m_xf, this.m_xf, _$z.ZERO);
                        this.m_world.m_contactManager.FindNewContacts();
                    }, s.SetTransform = function(t1) {
                        this.SetTransformVec(t1.p, t1.GetAngle());
                    }, s.GetTransform = function() {
                        return this.m_xf;
                    }, s.GetPosition = function() {
                        return this.m_xf.p;
                    }, s.SetPosition = function(t1) {
                        this.SetTransformVec(t1, this.GetAngle());
                    }, s.SetPositionXY = function(t1, i) {
                        this.SetTransformXY(t1, i, this.GetAngle());
                    }, s.GetAngle = function() {
                        return this.m_sweep.a;
                    }, s.SetAngle = function(t1) {
                        this.SetTransformVec(this.GetPosition(), t1);
                    }, s.GetWorldCenter = function() {
                        return this.m_sweep.c;
                    }, s.GetLocalCenter = function() {
                        return this.m_sweep.localCenter;
                    }, s.SetLinearVelocity = function(i) {
                        this.m_type !== t1.b2BodyType.b2_staticBody && (_$z.DotVV(i, i) > 0 && this.SetAwake(!0), this.m_linearVelocity.Copy(i));
                    }, s.GetLinearVelocity = function() {
                        return this.m_linearVelocity;
                    }, s.SetAngularVelocity = function(i) {
                        this.m_type !== t1.b2BodyType.b2_staticBody && (i * i > 0 && this.SetAwake(!0), this.m_angularVelocity = i);
                    }, s.GetAngularVelocity = function() {
                        return this.m_angularVelocity;
                    }, s.GetDefinition = function(t1) {
                        return t1.type = this.GetType(), t1.allowSleep = this.m_autoSleepFlag, t1.angle = this.GetAngle(), t1.angularDamping = this.m_angularDamping, t1.gravityScale = this.m_gravityScale, t1.angularVelocity = this.m_angularVelocity, t1.fixedRotation = this.m_fixedRotationFlag, t1.bullet = this.m_bulletFlag, t1.awake = this.m_awakeFlag, t1.linearDamping = this.m_linearDamping, t1.linearVelocity.Copy(this.GetLinearVelocity()), t1.position.Copy(this.GetPosition()), t1.userData = this.GetUserData(), t1;
                    }, s.ApplyForce = function(i, n, s) {
                        void 0 === s && (s = !0), this.m_type === t1.b2BodyType.b2_dynamicBody && (s && !this.m_awakeFlag && this.SetAwake(!0), this.m_awakeFlag && (this.m_force.x += i.x, this.m_force.y += i.y, this.m_torque += (n.x - this.m_sweep.c.x) * i.y - (n.y - this.m_sweep.c.y) * i.x));
                    }, s.ApplyForceToCenter = function(i, n) {
                        void 0 === n && (n = !0), this.m_type === t1.b2BodyType.b2_dynamicBody && (n && !this.m_awakeFlag && this.SetAwake(!0), this.m_awakeFlag && (this.m_force.x += i.x, this.m_force.y += i.y));
                    }, s.ApplyTorque = function(i, n) {
                        void 0 === n && (n = !0), this.m_type === t1.b2BodyType.b2_dynamicBody && (n && !this.m_awakeFlag && this.SetAwake(!0), this.m_awakeFlag && (this.m_torque += i));
                    }, s.ApplyLinearImpulse = function(i, n, s) {
                        void 0 === s && (s = !0), this.m_type === t1.b2BodyType.b2_dynamicBody && (s && !this.m_awakeFlag && this.SetAwake(!0), this.m_awakeFlag && (this.m_linearVelocity.x += this.m_invMass * i.x, this.m_linearVelocity.y += this.m_invMass * i.y, this.m_angularVelocity += this.m_invI * ((n.x - this.m_sweep.c.x) * i.y - (n.y - this.m_sweep.c.y) * i.x)));
                    }, s.ApplyLinearImpulseToCenter = function(i, n) {
                        void 0 === n && (n = !0), this.m_type === t1.b2BodyType.b2_dynamicBody && (n && !this.m_awakeFlag && this.SetAwake(!0), this.m_awakeFlag && (this.m_linearVelocity.x += this.m_invMass * i.x, this.m_linearVelocity.y += this.m_invMass * i.y));
                    }, s.ApplyAngularImpulse = function(i, n) {
                        void 0 === n && (n = !0), this.m_type === t1.b2BodyType.b2_dynamicBody && (n && !this.m_awakeFlag && this.SetAwake(!0), this.m_awakeFlag && (this.m_angularVelocity += this.m_invI * i));
                    }, s.GetMass = function() {
                        return this.m_mass;
                    }, s.GetInertia = function() {
                        return this.m_I + this.m_mass * _$z.DotVV(this.m_sweep.localCenter, this.m_sweep.localCenter);
                    }, s.GetMassData = function(t1) {
                        return t1.mass = this.m_mass, t1.I = this.m_I + this.m_mass * _$z.DotVV(this.m_sweep.localCenter, this.m_sweep.localCenter), t1.center.Copy(this.m_sweep.localCenter), t1;
                    }, s.SetMassData = function(i) {
                        if (this.m_world.IsLocked()) throw Error();
                        if (this.m_type === t1.b2BodyType.b2_dynamicBody) {
                            this.m_invMass = 0, this.m_I = 0, this.m_invI = 0, this.m_mass = i.mass, this.m_mass <= 0 && (this.m_mass = 1), this.m_invMass = 1 / this.m_mass, i.I > 0 && !this.m_fixedRotationFlag && (this.m_I = i.I - this.m_mass * _$z.DotVV(i.center, i.center), this.m_invI = 1 / this.m_I);
                            var s = n.SetMassData_s_oldCenter.Copy(this.m_sweep.c);
                            this.m_sweep.localCenter.Copy(i.center), J.MulXV(this.m_xf, this.m_sweep.localCenter, this.m_sweep.c), this.m_sweep.c0.Copy(this.m_sweep.c), _$z.AddVCrossSV(this.m_linearVelocity, this.m_angularVelocity, _$z.SubVV(this.m_sweep.c, s, _$z.s_t0), this.m_linearVelocity);
                        }
                    }, s.ResetMassData = function() {
                        if (this.m_mass = 0, this.m_invMass = 0, this.m_I = 0, this.m_invI = 0, this.m_sweep.localCenter.SetZero(), this.m_type === t1.b2BodyType.b2_staticBody || this.m_type === t1.b2BodyType.b2_kinematicBody) return this.m_sweep.c0.Copy(this.m_xf.p), this.m_sweep.c.Copy(this.m_xf.p), void (this.m_sweep.a0 = this.m_sweep.a);
                        for(var _$i = n.ResetMassData_s_localCenter.SetZero(), s = this.m_fixtureList; s; s = s.m_next)if (0 !== s.m_density) {
                            var _$r = s.GetMassData(n.ResetMassData_s_massData);
                            this.m_mass += _$r.mass, _$i.x += _$r.center.x * _$r.mass, _$i.y += _$r.center.y * _$r.mass, this.m_I += _$r.I;
                        }
                        this.m_mass > 0 ? (this.m_invMass = 1 / this.m_mass, _$i.x *= this.m_invMass, _$i.y *= this.m_invMass) : (this.m_mass = 1, this.m_invMass = 1), this.m_I > 0 && !this.m_fixedRotationFlag ? (this.m_I -= this.m_mass * _$z.DotVV(_$i, _$i), this.m_invI = 1 / this.m_I) : (this.m_I = 0, this.m_invI = 0);
                        var h = n.ResetMassData_s_oldCenter.Copy(this.m_sweep.c);
                        this.m_sweep.localCenter.Copy(_$i), J.MulXV(this.m_xf, this.m_sweep.localCenter, this.m_sweep.c), this.m_sweep.c0.Copy(this.m_sweep.c), _$z.AddVCrossSV(this.m_linearVelocity, this.m_angularVelocity, _$z.SubVV(this.m_sweep.c, h, _$z.s_t0), this.m_linearVelocity);
                    }, s.GetWorldPoint = function(t1, i) {
                        return J.MulXV(this.m_xf, t1, i);
                    }, s.GetWorldVector = function(t1, i) {
                        return _$K.MulRV(this.m_xf.q, t1, i);
                    }, s.GetLocalPoint = function(t1, i) {
                        return J.MulTXV(this.m_xf, t1, i);
                    }, s.GetLocalVector = function(t1, i) {
                        return _$K.MulTRV(this.m_xf.q, t1, i);
                    }, s.GetLinearVelocityFromWorldPoint = function(t1, i) {
                        return _$z.AddVCrossSV(this.m_linearVelocity, this.m_angularVelocity, _$z.SubVV(t1, this.m_sweep.c, _$z.s_t0), i);
                    }, s.GetLinearVelocityFromLocalPoint = function(t1, i) {
                        return this.GetLinearVelocityFromWorldPoint(this.GetWorldPoint(t1, i), i);
                    }, s.GetLinearDamping = function() {
                        return this.m_linearDamping;
                    }, s.SetLinearDamping = function(t1) {
                        this.m_linearDamping = t1;
                    }, s.GetAngularDamping = function() {
                        return this.m_angularDamping;
                    }, s.SetAngularDamping = function(t1) {
                        this.m_angularDamping = t1;
                    }, s.GetGravityScale = function() {
                        return this.m_gravityScale;
                    }, s.SetGravityScale = function(t1) {
                        this.m_gravityScale = t1;
                    }, s.SetType = function(i) {
                        if (this.m_world.IsLocked()) throw Error();
                        if (this.m_type !== i) {
                            this.m_type = i, this.ResetMassData(), this.m_type === t1.b2BodyType.b2_staticBody && (this.m_linearVelocity.SetZero(), this.m_angularVelocity = 0, this.m_sweep.a0 = this.m_sweep.a, this.m_sweep.c0.Copy(this.m_sweep.c), this.SynchronizeFixtures()), this.SetAwake(!0), this.m_force.SetZero(), this.m_torque = 0;
                            for(var _$n = this.m_contactList; _$n;){
                                var s = _$n;
                                _$n = _$n.next, this.m_world.m_contactManager.Destroy(s.contact);
                            }
                            this.m_contactList = null;
                            for(var _$r = this.m_fixtureList; _$r; _$r = _$r.m_next)_$r.TouchProxies();
                        }
                    }, s.GetType = function() {
                        return this.m_type;
                    }, s.SetBullet = function(t1) {
                        this.m_bulletFlag = t1;
                    }, s.IsBullet = function() {
                        return this.m_bulletFlag;
                    }, s.SetSleepingAllowed = function(t1) {
                        this.m_autoSleepFlag = t1, t1 || this.SetAwake(!0);
                    }, s.IsSleepingAllowed = function() {
                        return this.m_autoSleepFlag;
                    }, s.SetAwake = function(t1) {
                        t1 ? (this.m_awakeFlag = !0, this.m_sleepTime = 0) : (this.m_awakeFlag = !1, this.m_sleepTime = 0, this.m_linearVelocity.SetZero(), this.m_angularVelocity = 0, this.m_force.SetZero(), this.m_torque = 0);
                    }, s.IsAwake = function() {
                        return this.m_awakeFlag;
                    }, s.SetActive = function(t1) {
                        if (this.m_world.IsLocked()) throw Error();
                        if (t1 !== this.IsActive()) if (this.m_activeFlag = t1, t1) for(var _$i = this.m_fixtureList; _$i; _$i = _$i.m_next)_$i.CreateProxies();
                        else {
                            for(var _$n = this.m_fixtureList; _$n; _$n = _$n.m_next)_$n.DestroyProxies();
                            for(var s = this.m_contactList; s;){
                                var _$r = s;
                                s = s.next, this.m_world.m_contactManager.Destroy(_$r.contact);
                            }
                            this.m_contactList = null;
                        }
                    }, s.IsActive = function() {
                        return this.m_activeFlag;
                    }, s.SetFixedRotation = function(t1) {
                        this.m_fixedRotationFlag !== t1 && (this.m_fixedRotationFlag = t1, this.m_angularVelocity = 0, this.ResetMassData());
                    }, s.IsFixedRotation = function() {
                        return this.m_fixedRotationFlag;
                    }, s.GetFixtureList = function() {
                        return this.m_fixtureList;
                    }, s.GetJointList = function() {
                        return this.m_jointList;
                    }, s.GetContactList = function() {
                        return this.m_contactList;
                    }, s.GetNext = function() {
                        return this.m_next;
                    }, s.GetUserData = function() {
                        return this.m_userData;
                    }, s.SetUserData = function(t1) {
                        this.m_userData = t1;
                    }, s.GetWorld = function() {
                        return this.m_world;
                    }, s.Dump = function(i) {
                        var _$n = this.m_islandIndex;
                        i("{\n"), i("  const bd: b2BodyDef = new b2BodyDef();\n");
                        var s = "";
                        switch(this.m_type){
                            case t1.b2BodyType.b2_staticBody:
                                s = "b2BodyType.b2_staticBody";
                                break;
                            case t1.b2BodyType.b2_kinematicBody:
                                s = "b2BodyType.b2_kinematicBody";
                                break;
                            case t1.b2BodyType.b2_dynamicBody:
                                s = "b2BodyType.b2_dynamicBody";
                        }
                        i("  bd.type = %s;\n", s), i("  bd.position.Set(%.15f, %.15f);\n", this.m_xf.p.x, this.m_xf.p.y), i("  bd.angle = %.15f;\n", this.m_sweep.a), i("  bd.linearVelocity.Set(%.15f, %.15f);\n", this.m_linearVelocity.x, this.m_linearVelocity.y), i("  bd.angularVelocity = %.15f;\n", this.m_angularVelocity), i("  bd.linearDamping = %.15f;\n", this.m_linearDamping), i("  bd.angularDamping = %.15f;\n", this.m_angularDamping), i("  bd.allowSleep = %s;\n", this.m_autoSleepFlag ? "true" : "false"), i("  bd.awake = %s;\n", this.m_awakeFlag ? "true" : "false"), i("  bd.fixedRotation = %s;\n", this.m_fixedRotationFlag ? "true" : "false"), i("  bd.bullet = %s;\n", this.m_bulletFlag ? "true" : "false"), i("  bd.active = %s;\n", this.m_activeFlag ? "true" : "false"), i("  bd.gravityScale = %.15f;\n", this.m_gravityScale), i("\n"), i("  bodies[%d] = this.m_world.CreateBody(bd);\n", this.m_islandIndex), i("\n");
                        for(var _$r = this.m_fixtureList; _$r; _$r = _$r.m_next)i("  {\n"), _$r.Dump(i, _$n), i("  }\n");
                        i("}\n");
                    }, s.SynchronizeFixtures = function() {
                        var _$t = n.SynchronizeFixtures_s_xf1;
                        _$t.q.SetAngle(this.m_sweep.a0), _$K.MulRV(_$t.q, this.m_sweep.localCenter, _$t.p), _$z.SubVV(this.m_sweep.c0, _$t.p, _$t.p);
                        for(var _$i = _$z.SubVV(this.m_sweep.c, this.m_sweep.c0, n.SynchronizeFixtures_s_displacement), s = this.m_fixtureList; s; s = s.m_next)s.SynchronizeProxies(_$t, this.m_xf, _$i);
                    }, s.SynchronizeTransform = function() {
                        this.m_xf.q.SetAngle(this.m_sweep.a), _$K.MulRV(this.m_xf.q, this.m_sweep.localCenter, this.m_xf.p), _$z.SubVV(this.m_sweep.c, this.m_xf.p, this.m_xf.p);
                    }, s.ShouldCollide = function(i) {
                        return (this.m_type !== t1.b2BodyType.b2_staticBody || i.m_type !== t1.b2BodyType.b2_staticBody) && this.ShouldCollideConnected(i);
                    }, s.ShouldCollideConnected = function(t1) {
                        for(var _$i = this.m_jointList; _$i; _$i = _$i.next)if (_$i.other === t1 && !_$i.joint.m_collideConnected) return !1;
                        return !0;
                    }, s.Advance = function(t1) {
                        this.m_sweep.Advance(t1), this.m_sweep.c.Copy(this.m_sweep.c0), this.m_sweep.a = this.m_sweep.a0, this.m_xf.q.SetAngle(this.m_sweep.a), _$K.MulRV(this.m_xf.q, this.m_sweep.localCenter, this.m_xf.p), _$z.SubVV(this.m_sweep.c, this.m_xf.p, this.m_xf.p);
                    }, s.GetControllerList = function() {
                        return this.m_controllerList;
                    }, s.GetControllerCount = function() {
                        return this.m_controllerCount;
                    }, n;
                }();
                Cn.CreateFixtureShapeDensity_s_def = new Tn, Cn.SetMassData_s_oldCenter = new _$z, Cn.ResetMassData_s_localCenter = new _$z, Cn.ResetMassData_s_oldCenter = new _$z, Cn.ResetMassData_s_massData = new yn, Cn.SynchronizeFixtures_s_xf1 = new J, Cn.SynchronizeFixtures_s_displacement = new _$z, (Mn = t1.b2JointType || (t1.b2JointType = {}))[Mn.e_unknownJoint = 0] = "e_unknownJoint", Mn[Mn.e_revoluteJoint = 1] = "e_revoluteJoint", Mn[Mn.e_prismaticJoint = 2] = "e_prismaticJoint", Mn[Mn.e_distanceJoint = 3] = "e_distanceJoint", Mn[Mn.e_pulleyJoint = 4] = "e_pulleyJoint", Mn[Mn.e_mouseJoint = 5] = "e_mouseJoint", Mn[Mn.e_gearJoint = 6] = "e_gearJoint", Mn[Mn.e_wheelJoint = 7] = "e_wheelJoint", Mn[Mn.e_weldJoint = 8] = "e_weldJoint", Mn[Mn.e_frictionJoint = 9] = "e_frictionJoint", Mn[Mn.e_ropeJoint = 10] = "e_ropeJoint", Mn[Mn.e_motorJoint = 11] = "e_motorJoint", Mn[Mn.e_areaJoint = 12] = "e_areaJoint", (Rn = t1.b2LimitState || (t1.b2LimitState = {}))[Rn.e_inactiveLimit = 0] = "e_inactiveLimit", Rn[Rn.e_atLowerLimit = 1] = "e_atLowerLimit", Rn[Rn.e_atUpperLimit = 2] = "e_atUpperLimit", Rn[Rn.e_equalLimits = 3] = "e_equalLimits";
                var Nn = function() {
                    function t1() {
                        this.linear = new _$z, this.angularA = 0, this.angularB = 0;
                    }
                    var _$i = t1.prototype;
                    return _$i.SetZero = function() {
                        return this.linear.SetZero(), this.angularA = 0, this.angularB = 0, this;
                    }, _$i.Set = function(t1, i, n) {
                        return this.linear.Copy(t1), this.angularA = i, this.angularB = n, this;
                    }, t1;
                }(), Pn = function() {
                    function t1(t1) {
                        this._other = null, this.prev = null, this.next = null, this.joint = t1;
                    }
                    return t1.prototype.Reset = function() {
                        this._other = null, this.prev = null, this.next = null;
                    }, s(t1, [
                        {
                            key: "other",
                            get: function get() {
                                if (null === this._other) throw Error();
                                return this._other;
                            },
                            set: function set(t1) {
                                if (null !== this._other) throw Error();
                                this._other = t1;
                            }
                        }
                    ]), t1;
                }(), Dn = function Dn(i) {
                    this.type = t1.b2JointType.e_unknownJoint, this.userData = null, this.collideConnected = !1, this.type = i;
                }, Ln = function() {
                    function n(n) {
                        this.m_type = t1.b2JointType.e_unknownJoint, this.m_prev = null, this.m_next = null, this.m_edgeA = new Pn(this), this.m_edgeB = new Pn(this), this.m_index = 0, this.m_islandFlag = !1, this.m_collideConnected = !1, this.m_userData = null, this.m_type = n.type, this.m_edgeA.other = n.bodyB, this.m_edgeB.other = n.bodyA, this.m_bodyA = n.bodyA, this.m_bodyB = n.bodyB, this.m_collideConnected = i(n.collideConnected, !1), this.m_userData = i(n.userData, null);
                    }
                    var s = n.prototype;
                    return s.GetType = function() {
                        return this.m_type;
                    }, s.GetBodyA = function() {
                        return this.m_bodyA;
                    }, s.GetBodyB = function() {
                        return this.m_bodyB;
                    }, s.GetNext = function() {
                        return this.m_next;
                    }, s.GetUserData = function() {
                        return this.m_userData;
                    }, s.SetUserData = function(t1) {
                        this.m_userData = t1;
                    }, s.IsActive = function() {
                        return this.m_bodyA.IsActive() && this.m_bodyB.IsActive();
                    }, s.GetCollideConnected = function() {
                        return this.m_collideConnected;
                    }, s.Dump = function(t1) {
                        t1("// Dump is not supported for this joint type.\n");
                    }, s.ShiftOrigin = function() {}, n;
                }(), _$Bn = function(i) {
                    function n() {
                        var _$n;
                        return (_$n = i.call(this, t1.b2JointType.e_distanceJoint) || this).localAnchorA = new _$z, _$n.localAnchorB = new _$z, _$n.length = 1, _$n.frequencyHz = 0, _$n.dampingRatio = 0, _$n;
                    }
                    return h(n, i), n.prototype.Initialize = function(t1, i, n, s) {
                        this.bodyA = t1, this.bodyB = i, this.bodyA.GetLocalPoint(n, this.localAnchorA), this.bodyB.GetLocalPoint(s, this.localAnchorB), this.length = _$z.DistanceVV(n, s), this.frequencyHz = 0, this.dampingRatio = 0;
                    }, n;
                }(Dn), _$Fn = function(t1) {
                    function n(n) {
                        var s;
                        return (s = t1.call(this, n) || this).m_frequencyHz = 0, s.m_dampingRatio = 0, s.m_bias = 0, s.m_localAnchorA = new _$z, s.m_localAnchorB = new _$z, s.m_gamma = 0, s.m_impulse = 0, s.m_length = 0, s.m_indexA = 0, s.m_indexB = 0, s.m_u = new _$z, s.m_rA = new _$z, s.m_rB = new _$z, s.m_localCenterA = new _$z, s.m_localCenterB = new _$z, s.m_invMassA = 0, s.m_invMassB = 0, s.m_invIA = 0, s.m_invIB = 0, s.m_mass = 0, s.m_qA = new _$K, s.m_qB = new _$K, s.m_lalcA = new _$z, s.m_lalcB = new _$z, s.m_frequencyHz = i(n.frequencyHz, 0), s.m_dampingRatio = i(n.dampingRatio, 0), s.m_localAnchorA.Copy(n.localAnchorA), s.m_localAnchorB.Copy(n.localAnchorB), s.m_length = n.length, s;
                    }
                    h(n, t1);
                    var s = n.prototype;
                    return s.GetAnchorA = function(t1) {
                        return this.m_bodyA.GetWorldPoint(this.m_localAnchorA, t1);
                    }, s.GetAnchorB = function(t1) {
                        return this.m_bodyB.GetWorldPoint(this.m_localAnchorB, t1);
                    }, s.GetReactionForce = function(t1, i) {
                        return i.x = t1 * this.m_impulse * this.m_u.x, i.y = t1 * this.m_impulse * this.m_u.y, i;
                    }, s.GetReactionTorque = function() {
                        return 0;
                    }, s.GetLocalAnchorA = function() {
                        return this.m_localAnchorA;
                    }, s.GetLocalAnchorB = function() {
                        return this.m_localAnchorB;
                    }, s.SetLength = function(t1) {
                        this.m_length = t1;
                    }, s.Length = function() {
                        return this.m_length;
                    }, s.SetFrequency = function(t1) {
                        this.m_frequencyHz = t1;
                    }, s.GetFrequency = function() {
                        return this.m_frequencyHz;
                    }, s.SetDampingRatio = function(t1) {
                        this.m_dampingRatio = t1;
                    }, s.GetDampingRatio = function() {
                        return this.m_dampingRatio;
                    }, s.Dump = function(t1) {
                        var _$i = this.m_bodyA.m_islandIndex, _$n = this.m_bodyB.m_islandIndex;
                        t1("  const jd: b2DistanceJointDef = new b2DistanceJointDef();\n"), t1("  jd.bodyA = bodies[%d];\n", _$i), t1("  jd.bodyB = bodies[%d];\n", _$n), t1("  jd.collideConnected = %s;\n", this.m_collideConnected ? "true" : "false"), t1("  jd.localAnchorA.Set(%.15f, %.15f);\n", this.m_localAnchorA.x, this.m_localAnchorA.y), t1("  jd.localAnchorB.Set(%.15f, %.15f);\n", this.m_localAnchorB.x, this.m_localAnchorB.y), t1("  jd.length = %.15f;\n", this.m_length), t1("  jd.frequencyHz = %.15f;\n", this.m_frequencyHz), t1("  jd.dampingRatio = %.15f;\n", this.m_dampingRatio), t1("  joints[%d] = this.m_world.CreateJoint(jd);\n", this.m_index);
                    }, s.InitVelocityConstraints = function(t1) {
                        this.m_indexA = this.m_bodyA.m_islandIndex, this.m_indexB = this.m_bodyB.m_islandIndex, this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter), this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter), this.m_invMassA = this.m_bodyA.m_invMass, this.m_invMassB = this.m_bodyB.m_invMass, this.m_invIA = this.m_bodyA.m_invI, this.m_invIB = this.m_bodyB.m_invI;
                        var _$i = t1.positions[this.m_indexA].c, s = t1.positions[this.m_indexA].a, _$r = t1.velocities[this.m_indexA].v, _$h = t1.velocities[this.m_indexA].w, e = t1.positions[this.m_indexB].c, o = t1.positions[this.m_indexB].a, f = t1.velocities[this.m_indexB].v, a = t1.velocities[this.m_indexB].w, v = this.m_qA.SetAngle(s), l = this.m_qB.SetAngle(o);
                        _$z.SubVV(this.m_localAnchorA, this.m_localCenterA, this.m_lalcA), _$K.MulRV(v, this.m_lalcA, this.m_rA), _$z.SubVV(this.m_localAnchorB, this.m_localCenterB, this.m_lalcB), _$K.MulRV(l, this.m_lalcB, this.m_rB), this.m_u.x = e.x + this.m_rB.x - _$i.x - this.m_rA.x, this.m_u.y = e.y + this.m_rB.y - _$i.y - this.m_rA.y;
                        var _$d = this.m_u.Length();
                        _$d > .008 ? this.m_u.SelfMul(1 / _$d) : this.m_u.SetZero();
                        var w = _$z.CrossVV(this.m_rA, this.m_u), g = _$z.CrossVV(this.m_rB, this.m_u), p = this.m_invMassA + this.m_invIA * w * w + this.m_invMassB + this.m_invIB * g * g;
                        if (this.m_mass = 0 !== p ? 1 / p : 0, this.m_frequencyHz > 0) {
                            var _$y = _$d - this.m_length, _$_ = 6.28318530718 * this.m_frequencyHz, m = 2 * this.m_mass * this.m_dampingRatio * _$_, b = this.m_mass * _$_ * _$_, k = t1.step.dt;
                            this.m_gamma = k * (m + k * b), this.m_gamma = 0 !== this.m_gamma ? 1 / this.m_gamma : 0, this.m_bias = _$y * k * b * this.m_gamma, p += this.m_gamma, this.m_mass = 0 !== p ? 1 / p : 0;
                        } else this.m_gamma = 0, this.m_bias = 0;
                        if (t1.step.warmStarting) {
                            this.m_impulse *= t1.step.dtRatio;
                            var A = _$z.MulSV(this.m_impulse, this.m_u, n.InitVelocityConstraints_s_P);
                            _$r.SelfMulSub(this.m_invMassA, A), _$h -= this.m_invIA * _$z.CrossVV(this.m_rA, A), f.SelfMulAdd(this.m_invMassB, A), a += this.m_invIB * _$z.CrossVV(this.m_rB, A);
                        } else this.m_impulse = 0;
                        t1.velocities[this.m_indexA].w = _$h, t1.velocities[this.m_indexB].w = a;
                    }, s.SolveVelocityConstraints = function(t1) {
                        var _$i = t1.velocities[this.m_indexA].v, s = t1.velocities[this.m_indexA].w, _$r = t1.velocities[this.m_indexB].v, _$h = t1.velocities[this.m_indexB].w, e = _$z.AddVCrossSV(_$i, s, this.m_rA, n.SolveVelocityConstraints_s_vpA), u = _$z.AddVCrossSV(_$r, _$h, this.m_rB, n.SolveVelocityConstraints_s_vpB), o = _$z.DotVV(this.m_u, _$z.SubVV(u, e, _$z.s_t0)), f = -this.m_mass * (o + this.m_bias + this.m_gamma * this.m_impulse);
                        this.m_impulse += f;
                        var _$c = _$z.MulSV(f, this.m_u, n.SolveVelocityConstraints_s_P);
                        _$i.SelfMulSub(this.m_invMassA, _$c), s -= this.m_invIA * _$z.CrossVV(this.m_rA, _$c), _$r.SelfMulAdd(this.m_invMassB, _$c), _$h += this.m_invIB * _$z.CrossVV(this.m_rB, _$c), t1.velocities[this.m_indexA].w = s, t1.velocities[this.m_indexB].w = _$h;
                    }, s.SolvePositionConstraints = function(t1) {
                        if (this.m_frequencyHz > 0) return !0;
                        var _$i = t1.positions[this.m_indexA].c, s = t1.positions[this.m_indexA].a, _$r = t1.positions[this.m_indexB].c, _$h = t1.positions[this.m_indexB].a, e = this.m_qA.SetAngle(s), u = this.m_qB.SetAngle(_$h), o = _$K.MulRV(e, this.m_lalcA, this.m_rA), f = _$K.MulRV(u, this.m_lalcB, this.m_rB), a = this.m_u;
                        a.x = _$r.x + f.x - _$i.x - o.x, a.y = _$r.y + f.y - _$i.y - o.y;
                        var v = this.m_u.Normalize() - this.m_length;
                        v = D(v, -0.2, .2);
                        var _$d = -this.m_mass * v, w = _$z.MulSV(_$d, a, n.SolvePositionConstraints_s_P);
                        return _$i.SelfMulSub(this.m_invMassA, w), s -= this.m_invIA * _$z.CrossVV(o, w), _$r.SelfMulAdd(this.m_invMassB, w), _$h += this.m_invIB * _$z.CrossVV(f, w), t1.positions[this.m_indexA].a = s, t1.positions[this.m_indexB].a = _$h, .008 > _$C(v);
                    }, n;
                }(Ln);
                _$Fn.InitVelocityConstraints_s_P = new _$z, _$Fn.SolveVelocityConstraints_s_vpA = new _$z, _$Fn.SolveVelocityConstraints_s_vpB = new _$z, _$Fn.SolveVelocityConstraints_s_P = new _$z, _$Fn.SolvePositionConstraints_s_P = new _$z;
                var _$Un = function(i) {
                    function n() {
                        var _$n;
                        return (_$n = i.call(this, t1.b2JointType.e_areaJoint) || this).bodies = [], _$n.frequencyHz = 0, _$n.dampingRatio = 0, _$n;
                    }
                    return h(n, i), n.prototype.AddBody = function(t1) {
                        this.bodies.push(t1), 1 === this.bodies.length ? this.bodyA = t1 : 2 === this.bodies.length && (this.bodyB = t1);
                    }, n;
                }(Dn), _$xn = function(t1) {
                    function n(n) {
                        (s = t1.call(this, n) || this).m_frequencyHz = 0, s.m_dampingRatio = 0, s.m_impulse = 0, s.m_targetArea = 0, s.m_delta = new _$z, s.m_bodies = n.bodies, s.m_frequencyHz = i(n.frequencyHz, 0), s.m_dampingRatio = i(n.dampingRatio, 0), s.m_targetLengths = O(n.bodies.length), s.m_normals = _$z.MakeArray(n.bodies.length), s.m_joints = [], s.m_deltas = _$z.MakeArray(n.bodies.length);
                        var s, _$r = new _$Bn;
                        _$r.frequencyHz = s.m_frequencyHz, _$r.dampingRatio = s.m_dampingRatio, s.m_targetArea = 0;
                        for(var _$h = 0; _$h < s.m_bodies.length; ++_$h){
                            var e = s.m_bodies[_$h], u = s.m_bodies[(_$h + 1) % s.m_bodies.length], o = e.GetWorldCenter(), f = u.GetWorldCenter();
                            s.m_targetLengths[_$h] = _$z.DistanceVV(o, f), s.m_targetArea += _$z.CrossVV(o, f), _$r.Initialize(e, u, o, f), s.m_joints[_$h] = e.GetWorld().CreateJoint(_$r);
                        }
                        return s.m_targetArea *= .5, s;
                    }
                    h(n, t1);
                    var s = n.prototype;
                    return s.GetAnchorA = function(t1) {
                        return t1;
                    }, s.GetAnchorB = function(t1) {
                        return t1;
                    }, s.GetReactionForce = function(t1, i) {
                        return i;
                    }, s.GetReactionTorque = function() {
                        return 0;
                    }, s.SetFrequency = function(t1) {
                        this.m_frequencyHz = t1;
                        for(var _$i = 0; _$i < this.m_joints.length; ++_$i)this.m_joints[_$i].SetFrequency(t1);
                    }, s.GetFrequency = function() {
                        return this.m_frequencyHz;
                    }, s.SetDampingRatio = function(t1) {
                        this.m_dampingRatio = t1;
                        for(var _$i = 0; _$i < this.m_joints.length; ++_$i)this.m_joints[_$i].SetDampingRatio(t1);
                    }, s.GetDampingRatio = function() {
                        return this.m_dampingRatio;
                    }, s.Dump = function(t1) {
                        t1("Area joint dumping is not supported.\n");
                    }, s.InitVelocityConstraints = function(t1) {
                        for(var _$i = 0; _$i < this.m_bodies.length; ++_$i){
                            var _$n = this.m_bodies[(_$i + this.m_bodies.length - 1) % this.m_bodies.length], s = this.m_bodies[(_$i + 1) % this.m_bodies.length], _$r = t1.positions[_$n.m_islandIndex].c, _$h = t1.positions[s.m_islandIndex].c, e = this.m_deltas[_$i];
                            _$z.SubVV(_$h, _$r, e);
                        }
                        if (t1.step.warmStarting) {
                            this.m_impulse *= t1.step.dtRatio;
                            for(var u = 0; u < this.m_bodies.length; ++u){
                                var o = this.m_bodies[u], f = t1.velocities[o.m_islandIndex].v, _$c = this.m_deltas[u];
                                f.x += o.m_invMass * _$c.y * .5 * this.m_impulse, f.y += -(.5 * (o.m_invMass * _$c.x)) * this.m_impulse;
                            }
                        } else this.m_impulse = 0;
                    }, s.SolveVelocityConstraints = function(t1) {
                        for(var _$i = 0, _$n = 0, s = 0; s < this.m_bodies.length; ++s){
                            var _$r = this.m_bodies[s], _$h = t1.velocities[_$r.m_islandIndex].v, e = this.m_deltas[s];
                            _$i += e.LengthSquared() / _$r.GetMass(), _$n += _$z.CrossVV(_$h, e);
                        }
                        var u = -2 * _$n / _$i;
                        this.m_impulse += u;
                        for(var o = 0; o < this.m_bodies.length; ++o){
                            var f = this.m_bodies[o], _$c = t1.velocities[f.m_islandIndex].v, a = this.m_deltas[o];
                            _$c.x += f.m_invMass * a.y * .5 * u, _$c.y += -(.5 * (f.m_invMass * a.x)) * u;
                        }
                    }, s.SolvePositionConstraints = function(t1) {
                        for(var _$i = 0, _$n = 0, s = 0; s < this.m_bodies.length; ++s){
                            var _$h = this.m_bodies[s], e = this.m_bodies[(s + 1) % this.m_bodies.length], u = t1.positions[_$h.m_islandIndex].c, o = t1.positions[e.m_islandIndex].c, f = _$z.SubVV(o, u, this.m_delta), a = f.Length();
                            a < 1e-5 && (a = 1), this.m_normals[s].x = f.y / a, this.m_normals[s].y = -f.x / a, _$i += a, _$n += _$z.CrossVV(u, o);
                        }
                        _$n *= .5;
                        for(var v = .5 * (this.m_targetArea - _$n) / _$i, _$d = !0, w = 0; w < this.m_bodies.length; ++w){
                            var g = this.m_bodies[w], p = t1.positions[g.m_islandIndex].c, _$y = (w + 1) % this.m_bodies.length, _$_ = _$z.AddVV(this.m_normals[w], this.m_normals[_$y], this.m_delta);
                            _$_.SelfMul(v);
                            var m = _$_.LengthSquared();
                            m > .2 * .2 && _$_.SelfMul(.2 / U(m)), m > 0.000064 && (_$d = !1), p.x += _$_.x, p.y += _$_.y;
                        }
                        return _$d;
                    }, n;
                }(Ln), _$jn = function(i) {
                    function n() {
                        var _$n;
                        return (_$n = i.call(this, t1.b2JointType.e_frictionJoint) || this).localAnchorA = new _$z, _$n.localAnchorB = new _$z, _$n.maxForce = 0, _$n.maxTorque = 0, _$n;
                    }
                    return h(n, i), n.prototype.Initialize = function(t1, i, n) {
                        this.bodyA = t1, this.bodyB = i, this.bodyA.GetLocalPoint(n, this.localAnchorA), this.bodyB.GetLocalPoint(n, this.localAnchorB);
                    }, n;
                }(Dn), _$Gn = function(t1) {
                    function n(n) {
                        var s;
                        return (s = t1.call(this, n) || this).m_localAnchorA = new _$z, s.m_localAnchorB = new _$z, s.m_linearImpulse = new _$z, s.m_angularImpulse = 0, s.m_maxForce = 0, s.m_maxTorque = 0, s.m_indexA = 0, s.m_indexB = 0, s.m_rA = new _$z, s.m_rB = new _$z, s.m_localCenterA = new _$z, s.m_localCenterB = new _$z, s.m_invMassA = 0, s.m_invMassB = 0, s.m_invIA = 0, s.m_invIB = 0, s.m_linearMass = new _$q, s.m_angularMass = 0, s.m_qA = new _$K, s.m_qB = new _$K, s.m_lalcA = new _$z, s.m_lalcB = new _$z, s.m_K = new _$q, s.m_localAnchorA.Copy(n.localAnchorA), s.m_localAnchorB.Copy(n.localAnchorB), s.m_linearImpulse.SetZero(), s.m_maxForce = i(n.maxForce, 0), s.m_maxTorque = i(n.maxTorque, 0), s.m_linearMass.SetZero(), s;
                    }
                    h(n, t1);
                    var s = n.prototype;
                    return s.InitVelocityConstraints = function(t1) {
                        this.m_indexA = this.m_bodyA.m_islandIndex, this.m_indexB = this.m_bodyB.m_islandIndex, this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter), this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter), this.m_invMassA = this.m_bodyA.m_invMass, this.m_invMassB = this.m_bodyB.m_invMass, this.m_invIA = this.m_bodyA.m_invI, this.m_invIB = this.m_bodyB.m_invI;
                        var _$i = t1.positions[this.m_indexA].a, _$n = t1.velocities[this.m_indexA].v, s = t1.velocities[this.m_indexA].w, _$r = t1.positions[this.m_indexB].a, _$h = t1.velocities[this.m_indexB].v, e = t1.velocities[this.m_indexB].w, u = this.m_qA.SetAngle(_$i), o = this.m_qB.SetAngle(_$r);
                        _$z.SubVV(this.m_localAnchorA, this.m_localCenterA, this.m_lalcA);
                        var f = _$K.MulRV(u, this.m_lalcA, this.m_rA);
                        _$z.SubVV(this.m_localAnchorB, this.m_localCenterB, this.m_lalcB);
                        var _$c = _$K.MulRV(o, this.m_lalcB, this.m_rB), a = this.m_invMassA, v = this.m_invMassB, l = this.m_invIA, _$d = this.m_invIB, w = this.m_K;
                        if (w.ex.x = a + v + l * f.y * f.y + _$d * _$c.y * _$c.y, w.ex.y = -l * f.x * f.y - _$d * _$c.x * _$c.y, w.ey.x = w.ex.y, w.ey.y = a + v + l * f.x * f.x + _$d * _$c.x * _$c.x, w.GetInverse(this.m_linearMass), this.m_angularMass = l + _$d, this.m_angularMass > 0 && (this.m_angularMass = 1 / this.m_angularMass), t1.step.warmStarting) {
                            this.m_linearImpulse.SelfMul(t1.step.dtRatio), this.m_angularImpulse *= t1.step.dtRatio;
                            var g = this.m_linearImpulse;
                            _$n.SelfMulSub(a, g), s -= l * (_$z.CrossVV(this.m_rA, g) + this.m_angularImpulse), _$h.SelfMulAdd(v, g), e += _$d * (_$z.CrossVV(this.m_rB, g) + this.m_angularImpulse);
                        } else this.m_linearImpulse.SetZero(), this.m_angularImpulse = 0;
                        t1.velocities[this.m_indexA].w = s, t1.velocities[this.m_indexB].w = e;
                    }, s.SolveVelocityConstraints = function(t1) {
                        var _$i = t1.velocities[this.m_indexA].v, s = t1.velocities[this.m_indexA].w, _$r = t1.velocities[this.m_indexB].v, _$h = t1.velocities[this.m_indexB].w, e = this.m_invMassA, u = this.m_invMassB, o = this.m_invIA, f = this.m_invIB, _$c = t1.step.dt, a = _$h - s, v = -this.m_angularMass * a, l = this.m_angularImpulse, _$d = _$c * this.m_maxTorque;
                        this.m_angularImpulse = D(this.m_angularImpulse + v, -_$d, _$d), s -= o * (v = this.m_angularImpulse - l), _$h += f * v;
                        var w = _$z.SubVV(_$z.AddVCrossSV(_$r, _$h, this.m_rB, _$z.s_t0), _$z.AddVCrossSV(_$i, s, this.m_rA, _$z.s_t1), n.SolveVelocityConstraints_s_Cdot_v2), g = _$q.MulMV(this.m_linearMass, w, n.SolveVelocityConstraints_s_impulseV).SelfNeg(), p = n.SolveVelocityConstraints_s_oldImpulseV.Copy(this.m_linearImpulse);
                        this.m_linearImpulse.SelfAdd(g);
                        var _$y = _$c * this.m_maxForce;
                        this.m_linearImpulse.LengthSquared() > _$y * _$y && (this.m_linearImpulse.Normalize(), this.m_linearImpulse.SelfMul(_$y)), _$z.SubVV(this.m_linearImpulse, p, g), _$i.SelfMulSub(e, g), s -= o * _$z.CrossVV(this.m_rA, g), _$r.SelfMulAdd(u, g), _$h += f * _$z.CrossVV(this.m_rB, g), t1.velocities[this.m_indexA].w = s, t1.velocities[this.m_indexB].w = _$h;
                    }, s.SolvePositionConstraints = function() {
                        return !0;
                    }, s.GetAnchorA = function(t1) {
                        return this.m_bodyA.GetWorldPoint(this.m_localAnchorA, t1);
                    }, s.GetAnchorB = function(t1) {
                        return this.m_bodyB.GetWorldPoint(this.m_localAnchorB, t1);
                    }, s.GetReactionForce = function(t1, i) {
                        return i.x = t1 * this.m_linearImpulse.x, i.y = t1 * this.m_linearImpulse.y, i;
                    }, s.GetReactionTorque = function(t1) {
                        return t1 * this.m_angularImpulse;
                    }, s.GetLocalAnchorA = function() {
                        return this.m_localAnchorA;
                    }, s.GetLocalAnchorB = function() {
                        return this.m_localAnchorB;
                    }, s.SetMaxForce = function(t1) {
                        this.m_maxForce = t1;
                    }, s.GetMaxForce = function() {
                        return this.m_maxForce;
                    }, s.SetMaxTorque = function(t1) {
                        this.m_maxTorque = t1;
                    }, s.GetMaxTorque = function() {
                        return this.m_maxTorque;
                    }, s.Dump = function(t1) {
                        var _$i = this.m_bodyA.m_islandIndex, _$n = this.m_bodyB.m_islandIndex;
                        t1("  const jd: b2FrictionJointDef = new b2FrictionJointDef();\n"), t1("  jd.bodyA = bodies[%d];\n", _$i), t1("  jd.bodyB = bodies[%d];\n", _$n), t1("  jd.collideConnected = %s;\n", this.m_collideConnected ? "true" : "false"), t1("  jd.localAnchorA.Set(%.15f, %.15f);\n", this.m_localAnchorA.x, this.m_localAnchorA.y), t1("  jd.localAnchorB.Set(%.15f, %.15f);\n", this.m_localAnchorB.x, this.m_localAnchorB.y), t1("  jd.maxForce = %.15f;\n", this.m_maxForce), t1("  jd.maxTorque = %.15f;\n", this.m_maxTorque), t1("  joints[%d] = this.m_world.CreateJoint(jd);\n", this.m_index);
                    }, n;
                }(Ln);
                _$Gn.SolveVelocityConstraints_s_Cdot_v2 = new _$z, _$Gn.SolveVelocityConstraints_s_impulseV = new _$z, _$Gn.SolveVelocityConstraints_s_oldImpulseV = new _$z;
                var _$Hn = function(i) {
                    function n() {
                        var _$n;
                        return (_$n = i.call(this, t1.b2JointType.e_gearJoint) || this).ratio = 1, _$n;
                    }
                    return h(n, i), n;
                }(Dn), _$Vn = function(n) {
                    function s(s) {
                        (_$r = n.call(this, s) || this).m_typeA = t1.b2JointType.e_unknownJoint, _$r.m_typeB = t1.b2JointType.e_unknownJoint, _$r.m_localAnchorA = new _$z, _$r.m_localAnchorB = new _$z, _$r.m_localAnchorC = new _$z, _$r.m_localAnchorD = new _$z, _$r.m_localAxisC = new _$z, _$r.m_localAxisD = new _$z, _$r.m_referenceAngleA = 0, _$r.m_referenceAngleB = 0, _$r.m_constant = 0, _$r.m_ratio = 0, _$r.m_impulse = 0, _$r.m_indexA = 0, _$r.m_indexB = 0, _$r.m_indexC = 0, _$r.m_indexD = 0, _$r.m_lcA = new _$z, _$r.m_lcB = new _$z, _$r.m_lcC = new _$z, _$r.m_lcD = new _$z, _$r.m_mA = 0, _$r.m_mB = 0, _$r.m_mC = 0, _$r.m_mD = 0, _$r.m_iA = 0, _$r.m_iB = 0, _$r.m_iC = 0, _$r.m_iD = 0, _$r.m_JvAC = new _$z, _$r.m_JvBD = new _$z, _$r.m_JwA = 0, _$r.m_JwB = 0, _$r.m_JwC = 0, _$r.m_JwD = 0, _$r.m_mass = 0, _$r.m_qA = new _$K, _$r.m_qB = new _$K, _$r.m_qC = new _$K, _$r.m_qD = new _$K, _$r.m_lalcA = new _$z, _$r.m_lalcB = new _$z, _$r.m_lalcC = new _$z, _$r.m_lalcD = new _$z, _$r.m_joint1 = s.joint1, _$r.m_joint2 = s.joint2, _$r.m_typeA = _$r.m_joint1.GetType(), _$r.m_typeB = _$r.m_joint2.GetType(), _$r.m_bodyC = _$r.m_joint1.GetBodyA(), _$r.m_bodyA = _$r.m_joint1.GetBodyB();
                        var _$r, _$h, e, u = _$r.m_bodyA.m_xf, o = _$r.m_bodyA.m_sweep.a, f = _$r.m_bodyC.m_xf, _$c = _$r.m_bodyC.m_sweep.a;
                        if (_$r.m_typeA === t1.b2JointType.e_revoluteJoint) {
                            var a = s.joint1;
                            _$r.m_localAnchorC.Copy(a.m_localAnchorA), _$r.m_localAnchorA.Copy(a.m_localAnchorB), _$r.m_referenceAngleA = a.m_referenceAngle, _$r.m_localAxisC.SetZero(), _$h = o - _$c - _$r.m_referenceAngleA;
                        } else {
                            var v = s.joint1;
                            _$r.m_localAnchorC.Copy(v.m_localAnchorA), _$r.m_localAnchorA.Copy(v.m_localAnchorB), _$r.m_referenceAngleA = v.m_referenceAngle, _$r.m_localAxisC.Copy(v.m_localXAxisA);
                            var l = _$r.m_localAnchorC, _$d = _$K.MulTRV(f.q, _$z.AddVV(_$K.MulRV(u.q, _$r.m_localAnchorA, _$z.s_t0), _$z.SubVV(u.p, f.p, _$z.s_t1), _$z.s_t0), _$z.s_t0);
                            _$h = _$z.DotVV(_$z.SubVV(_$d, l, _$z.s_t0), _$r.m_localAxisC);
                        }
                        _$r.m_bodyD = _$r.m_joint2.GetBodyA(), _$r.m_bodyB = _$r.m_joint2.GetBodyB();
                        var w = _$r.m_bodyB.m_xf, g = _$r.m_bodyB.m_sweep.a, p = _$r.m_bodyD.m_xf, _$y = _$r.m_bodyD.m_sweep.a;
                        if (_$r.m_typeB === t1.b2JointType.e_revoluteJoint) {
                            var _$_ = s.joint2;
                            _$r.m_localAnchorD.Copy(_$_.m_localAnchorA), _$r.m_localAnchorB.Copy(_$_.m_localAnchorB), _$r.m_referenceAngleB = _$_.m_referenceAngle, _$r.m_localAxisD.SetZero(), e = g - _$y - _$r.m_referenceAngleB;
                        } else {
                            var m = s.joint2;
                            _$r.m_localAnchorD.Copy(m.m_localAnchorA), _$r.m_localAnchorB.Copy(m.m_localAnchorB), _$r.m_referenceAngleB = m.m_referenceAngle, _$r.m_localAxisD.Copy(m.m_localXAxisA);
                            var b = _$r.m_localAnchorD, k = _$K.MulTRV(p.q, _$z.AddVV(_$K.MulRV(w.q, _$r.m_localAnchorB, _$z.s_t0), _$z.SubVV(w.p, p.p, _$z.s_t1), _$z.s_t0), _$z.s_t0);
                            e = _$z.DotVV(_$z.SubVV(k, b, _$z.s_t0), _$r.m_localAxisD);
                        }
                        return _$r.m_ratio = i(s.ratio, 1), _$r.m_constant = _$h + _$r.m_ratio * e, _$r.m_impulse = 0, _$r;
                    }
                    h(s, n);
                    var _$r = s.prototype;
                    return _$r.InitVelocityConstraints = function(i) {
                        this.m_indexA = this.m_bodyA.m_islandIndex, this.m_indexB = this.m_bodyB.m_islandIndex, this.m_indexC = this.m_bodyC.m_islandIndex, this.m_indexD = this.m_bodyD.m_islandIndex, this.m_lcA.Copy(this.m_bodyA.m_sweep.localCenter), this.m_lcB.Copy(this.m_bodyB.m_sweep.localCenter), this.m_lcC.Copy(this.m_bodyC.m_sweep.localCenter), this.m_lcD.Copy(this.m_bodyD.m_sweep.localCenter), this.m_mA = this.m_bodyA.m_invMass, this.m_mB = this.m_bodyB.m_invMass, this.m_mC = this.m_bodyC.m_invMass, this.m_mD = this.m_bodyD.m_invMass, this.m_iA = this.m_bodyA.m_invI, this.m_iB = this.m_bodyB.m_invI, this.m_iC = this.m_bodyC.m_invI, this.m_iD = this.m_bodyD.m_invI;
                        var _$n = i.positions[this.m_indexA].a, _$r = i.velocities[this.m_indexA].v, _$h = i.velocities[this.m_indexA].w, e = i.positions[this.m_indexB].a, u = i.velocities[this.m_indexB].v, o = i.velocities[this.m_indexB].w, f = i.positions[this.m_indexC].a, _$c = i.velocities[this.m_indexC].v, a = i.velocities[this.m_indexC].w, v = i.positions[this.m_indexD].a, l = i.velocities[this.m_indexD].v, _$d = i.velocities[this.m_indexD].w, w = this.m_qA.SetAngle(_$n), g = this.m_qB.SetAngle(e), p = this.m_qC.SetAngle(f), _$y = this.m_qD.SetAngle(v);
                        if (this.m_mass = 0, this.m_typeA === t1.b2JointType.e_revoluteJoint) this.m_JvAC.SetZero(), this.m_JwA = 1, this.m_JwC = 1, this.m_mass += this.m_iA + this.m_iC;
                        else {
                            var _$_ = _$K.MulRV(p, this.m_localAxisC, s.InitVelocityConstraints_s_u);
                            _$z.SubVV(this.m_localAnchorC, this.m_lcC, this.m_lalcC);
                            var m = _$K.MulRV(p, this.m_lalcC, s.InitVelocityConstraints_s_rC);
                            _$z.SubVV(this.m_localAnchorA, this.m_lcA, this.m_lalcA);
                            var b = _$K.MulRV(w, this.m_lalcA, s.InitVelocityConstraints_s_rA);
                            this.m_JvAC.Copy(_$_), this.m_JwC = _$z.CrossVV(m, _$_), this.m_JwA = _$z.CrossVV(b, _$_), this.m_mass += this.m_mC + this.m_mA + this.m_iC * this.m_JwC * this.m_JwC + this.m_iA * this.m_JwA * this.m_JwA;
                        }
                        if (this.m_typeB === t1.b2JointType.e_revoluteJoint) this.m_JvBD.SetZero(), this.m_JwB = this.m_ratio, this.m_JwD = this.m_ratio, this.m_mass += this.m_ratio * this.m_ratio * (this.m_iB + this.m_iD);
                        else {
                            var k = _$K.MulRV(_$y, this.m_localAxisD, s.InitVelocityConstraints_s_u);
                            _$z.SubVV(this.m_localAnchorD, this.m_lcD, this.m_lalcD);
                            var A = _$K.MulRV(_$y, this.m_lalcD, s.InitVelocityConstraints_s_rD);
                            _$z.SubVV(this.m_localAnchorB, this.m_lcB, this.m_lalcB);
                            var E = _$K.MulRV(g, this.m_lalcB, s.InitVelocityConstraints_s_rB);
                            _$z.MulSV(this.m_ratio, k, this.m_JvBD), this.m_JwD = this.m_ratio * _$z.CrossVV(A, k), this.m_JwB = this.m_ratio * _$z.CrossVV(E, k), this.m_mass += this.m_ratio * this.m_ratio * (this.m_mD + this.m_mB) + this.m_iD * this.m_JwD * this.m_JwD + this.m_iB * this.m_JwB * this.m_JwB;
                        }
                        this.m_mass = this.m_mass > 0 ? 1 / this.m_mass : 0, i.step.warmStarting ? (_$r.SelfMulAdd(this.m_mA * this.m_impulse, this.m_JvAC), _$h += this.m_iA * this.m_impulse * this.m_JwA, u.SelfMulAdd(this.m_mB * this.m_impulse, this.m_JvBD), o += this.m_iB * this.m_impulse * this.m_JwB, _$c.SelfMulSub(this.m_mC * this.m_impulse, this.m_JvAC), a -= this.m_iC * this.m_impulse * this.m_JwC, l.SelfMulSub(this.m_mD * this.m_impulse, this.m_JvBD), _$d -= this.m_iD * this.m_impulse * this.m_JwD) : this.m_impulse = 0, i.velocities[this.m_indexA].w = _$h, i.velocities[this.m_indexB].w = o, i.velocities[this.m_indexC].w = a, i.velocities[this.m_indexD].w = _$d;
                    }, _$r.SolveVelocityConstraints = function(t1) {
                        var _$i = t1.velocities[this.m_indexA].v, _$n = t1.velocities[this.m_indexA].w, _$s = t1.velocities[this.m_indexB].v, _$r = t1.velocities[this.m_indexB].w, _$h = t1.velocities[this.m_indexC].v, e = t1.velocities[this.m_indexC].w, u = t1.velocities[this.m_indexD].v, o = t1.velocities[this.m_indexD].w, f = _$z.DotVV(this.m_JvAC, _$z.SubVV(_$i, _$h, _$z.s_t0)) + _$z.DotVV(this.m_JvBD, _$z.SubVV(_$s, u, _$z.s_t0));
                        f += this.m_JwA * _$n - this.m_JwC * e + (this.m_JwB * _$r - this.m_JwD * o);
                        var _$c = -this.m_mass * f;
                        this.m_impulse += _$c, _$i.SelfMulAdd(this.m_mA * _$c, this.m_JvAC), _$n += this.m_iA * _$c * this.m_JwA, _$s.SelfMulAdd(this.m_mB * _$c, this.m_JvBD), _$r += this.m_iB * _$c * this.m_JwB, _$h.SelfMulSub(this.m_mC * _$c, this.m_JvAC), e -= this.m_iC * _$c * this.m_JwC, u.SelfMulSub(this.m_mD * _$c, this.m_JvBD), o -= this.m_iD * _$c * this.m_JwD, t1.velocities[this.m_indexA].w = _$n, t1.velocities[this.m_indexB].w = _$r, t1.velocities[this.m_indexC].w = e, t1.velocities[this.m_indexD].w = o;
                    }, _$r.SolvePositionConstraints = function(i) {
                        var _$n, _$r, _$h, e, u, o, f = i.positions[this.m_indexA].c, _$c = i.positions[this.m_indexA].a, a = i.positions[this.m_indexB].c, v = i.positions[this.m_indexB].a, l = i.positions[this.m_indexC].c, _$d = i.positions[this.m_indexC].a, w = i.positions[this.m_indexD].c, g = i.positions[this.m_indexD].a, p = this.m_qA.SetAngle(_$c), _$y = this.m_qB.SetAngle(v), _$_ = this.m_qC.SetAngle(_$d), m = this.m_qD.SetAngle(g), b = this.m_JvAC, k = this.m_JvBD, A = 0;
                        if (this.m_typeA === t1.b2JointType.e_revoluteJoint) b.SetZero(), _$h = 1, u = 1, A += this.m_iA + this.m_iC, _$n = _$c - _$d - this.m_referenceAngleA;
                        else {
                            var E = _$K.MulRV(_$_, this.m_localAxisC, s.SolvePositionConstraints_s_u), T = _$K.MulRV(_$_, this.m_lalcC, s.SolvePositionConstraints_s_rC), _$S = _$K.MulRV(p, this.m_lalcA, s.SolvePositionConstraints_s_rA);
                            b.Copy(E), u = _$z.CrossVV(T, E), _$h = _$z.CrossVV(_$S, E), A += this.m_mC + this.m_mA + this.m_iC * u * u + this.m_iA * _$h * _$h;
                            var _$O = this.m_lalcC, _$I = _$K.MulTRV(_$_, _$z.AddVV(_$S, _$z.SubVV(f, l, _$z.s_t0), _$z.s_t0), _$z.s_t0);
                            _$n = _$z.DotVV(_$z.SubVV(_$I, _$O, _$z.s_t0), this.m_localAxisC);
                        }
                        if (this.m_typeB === t1.b2JointType.e_revoluteJoint) k.SetZero(), e = this.m_ratio, o = this.m_ratio, A += this.m_ratio * this.m_ratio * (this.m_iB + this.m_iD), _$r = v - g - this.m_referenceAngleB;
                        else {
                            var _$R = _$K.MulRV(m, this.m_localAxisD, s.SolvePositionConstraints_s_u), _$M = _$K.MulRV(m, this.m_lalcD, s.SolvePositionConstraints_s_rD), _$C = _$K.MulRV(_$y, this.m_lalcB, s.SolvePositionConstraints_s_rB);
                            _$z.MulSV(this.m_ratio, _$R, k), o = this.m_ratio * _$z.CrossVV(_$M, _$R), e = this.m_ratio * _$z.CrossVV(_$C, _$R), A += this.m_ratio * this.m_ratio * (this.m_mD + this.m_mB) + this.m_iD * o * o + this.m_iB * e * e;
                            var _$N = this.m_lalcD, _$P = _$K.MulTRV(m, _$z.AddVV(_$C, _$z.SubVV(a, w, _$z.s_t0), _$z.s_t0), _$z.s_t0);
                            _$r = _$z.DotVV(_$z.SubVV(_$P, _$N, _$z.s_t0), this.m_localAxisD);
                        }
                        var _$D = _$n + this.m_ratio * _$r - this.m_constant, L = 0;
                        return A > 0 && (L = -_$D / A), f.SelfMulAdd(this.m_mA * L, b), _$c += this.m_iA * L * _$h, a.SelfMulAdd(this.m_mB * L, k), v += this.m_iB * L * e, l.SelfMulSub(this.m_mC * L, b), _$d -= this.m_iC * L * u, w.SelfMulSub(this.m_mD * L, k), g -= this.m_iD * L * o, i.positions[this.m_indexA].a = _$c, i.positions[this.m_indexB].a = v, i.positions[this.m_indexC].a = _$d, i.positions[this.m_indexD].a = g, !0;
                    }, _$r.GetAnchorA = function(t1) {
                        return this.m_bodyA.GetWorldPoint(this.m_localAnchorA, t1);
                    }, _$r.GetAnchorB = function(t1) {
                        return this.m_bodyB.GetWorldPoint(this.m_localAnchorB, t1);
                    }, _$r.GetReactionForce = function(t1, i) {
                        return _$z.MulSV(t1 * this.m_impulse, this.m_JvAC, i);
                    }, _$r.GetReactionTorque = function(t1) {
                        return t1 * this.m_impulse * this.m_JwA;
                    }, _$r.GetJoint1 = function() {
                        return this.m_joint1;
                    }, _$r.GetJoint2 = function() {
                        return this.m_joint2;
                    }, _$r.GetRatio = function() {
                        return this.m_ratio;
                    }, _$r.SetRatio = function(t1) {
                        this.m_ratio = t1;
                    }, _$r.Dump = function(t1) {
                        var _$i = this.m_bodyA.m_islandIndex, _$n = this.m_bodyB.m_islandIndex, _$s = this.m_joint1.m_index, _$r = this.m_joint2.m_index;
                        t1("  const jd: b2GearJointDef = new b2GearJointDef();\n"), t1("  jd.bodyA = bodies[%d];\n", _$i), t1("  jd.bodyB = bodies[%d];\n", _$n), t1("  jd.collideConnected = %s;\n", this.m_collideConnected ? "true" : "false"), t1("  jd.joint1 = joints[%d];\n", _$s), t1("  jd.joint2 = joints[%d];\n", _$r), t1("  jd.ratio = %.15f;\n", this.m_ratio), t1("  joints[%d] = this.m_world.CreateJoint(jd);\n", this.m_index);
                    }, s;
                }(Ln);
                _$Vn.InitVelocityConstraints_s_u = new _$z, _$Vn.InitVelocityConstraints_s_rA = new _$z, _$Vn.InitVelocityConstraints_s_rB = new _$z, _$Vn.InitVelocityConstraints_s_rC = new _$z, _$Vn.InitVelocityConstraints_s_rD = new _$z, _$Vn.SolvePositionConstraints_s_u = new _$z, _$Vn.SolvePositionConstraints_s_rA = new _$z, _$Vn.SolvePositionConstraints_s_rB = new _$z, _$Vn.SolvePositionConstraints_s_rC = new _$z, _$Vn.SolvePositionConstraints_s_rD = new _$z;
                var _$Wn = function(i) {
                    function n() {
                        var _$n;
                        return (_$n = i.call(this, t1.b2JointType.e_motorJoint) || this).linearOffset = new _$z(0, 0), _$n.angularOffset = 0, _$n.maxForce = 1, _$n.maxTorque = 1, _$n.correctionFactor = .3, _$n;
                    }
                    return h(n, i), n.prototype.Initialize = function(t1, i) {
                        this.bodyA = t1, this.bodyB = i, this.bodyA.GetLocalPoint(this.bodyB.GetPosition(), this.linearOffset);
                        var _$n = this.bodyA.GetAngle(), s = this.bodyB.GetAngle();
                        this.angularOffset = s - _$n;
                    }, n;
                }(Dn), _$zn = function(t1) {
                    function n(n) {
                        var s;
                        return (s = t1.call(this, n) || this).m_linearOffset = new _$z, s.m_angularOffset = 0, s.m_linearImpulse = new _$z, s.m_angularImpulse = 0, s.m_maxForce = 0, s.m_maxTorque = 0, s.m_correctionFactor = .3, s.m_indexA = 0, s.m_indexB = 0, s.m_rA = new _$z, s.m_rB = new _$z, s.m_localCenterA = new _$z, s.m_localCenterB = new _$z, s.m_linearError = new _$z, s.m_angularError = 0, s.m_invMassA = 0, s.m_invMassB = 0, s.m_invIA = 0, s.m_invIB = 0, s.m_linearMass = new _$q, s.m_angularMass = 0, s.m_qA = new _$K, s.m_qB = new _$K, s.m_K = new _$q, s.m_linearOffset.Copy(i(n.linearOffset, _$z.ZERO)), s.m_linearImpulse.SetZero(), s.m_maxForce = i(n.maxForce, 0), s.m_maxTorque = i(n.maxTorque, 0), s.m_correctionFactor = i(n.correctionFactor, .3), s;
                    }
                    h(n, t1);
                    var s = n.prototype;
                    return s.GetAnchorA = function(t1) {
                        var _$i = this.m_bodyA.GetPosition();
                        return t1.x = _$i.x, t1.y = _$i.y, t1;
                    }, s.GetAnchorB = function(t1) {
                        var _$i = this.m_bodyB.GetPosition();
                        return t1.x = _$i.x, t1.y = _$i.y, t1;
                    }, s.GetReactionForce = function(t1, i) {
                        return _$z.MulSV(t1, this.m_linearImpulse, i);
                    }, s.GetReactionTorque = function(t1) {
                        return t1 * this.m_angularImpulse;
                    }, s.SetLinearOffset = function(t1) {
                        _$z.IsEqualToV(t1, this.m_linearOffset) || (this.m_bodyA.SetAwake(!0), this.m_bodyB.SetAwake(!0), this.m_linearOffset.Copy(t1));
                    }, s.GetLinearOffset = function() {
                        return this.m_linearOffset;
                    }, s.SetAngularOffset = function(t1) {
                        t1 !== this.m_angularOffset && (this.m_bodyA.SetAwake(!0), this.m_bodyB.SetAwake(!0), this.m_angularOffset = t1);
                    }, s.GetAngularOffset = function() {
                        return this.m_angularOffset;
                    }, s.SetMaxForce = function(t1) {
                        this.m_maxForce = t1;
                    }, s.GetMaxForce = function() {
                        return this.m_maxForce;
                    }, s.SetMaxTorque = function(t1) {
                        this.m_maxTorque = t1;
                    }, s.GetMaxTorque = function() {
                        return this.m_maxTorque;
                    }, s.InitVelocityConstraints = function(t1) {
                        this.m_indexA = this.m_bodyA.m_islandIndex, this.m_indexB = this.m_bodyB.m_islandIndex, this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter), this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter), this.m_invMassA = this.m_bodyA.m_invMass, this.m_invMassB = this.m_bodyB.m_invMass, this.m_invIA = this.m_bodyA.m_invI, this.m_invIB = this.m_bodyB.m_invI;
                        var _$i = t1.positions[this.m_indexA].c, _$n = t1.positions[this.m_indexA].a, s = t1.velocities[this.m_indexA].v, _$r = t1.velocities[this.m_indexA].w, _$h = t1.positions[this.m_indexB].c, e = t1.positions[this.m_indexB].a, u = t1.velocities[this.m_indexB].v, o = t1.velocities[this.m_indexB].w, f = this.m_qA.SetAngle(_$n), _$c = this.m_qB.SetAngle(e), a = _$K.MulRV(f, _$z.SubVV(this.m_linearOffset, this.m_localCenterA, _$z.s_t0), this.m_rA), v = _$K.MulRV(_$c, _$z.NegV(this.m_localCenterB, _$z.s_t0), this.m_rB), l = this.m_invMassA, _$d = this.m_invMassB, w = this.m_invIA, g = this.m_invIB, p = this.m_K;
                        if (p.ex.x = l + _$d + w * a.y * a.y + g * v.y * v.y, p.ex.y = -w * a.x * a.y - g * v.x * v.y, p.ey.x = p.ex.y, p.ey.y = l + _$d + w * a.x * a.x + g * v.x * v.x, p.GetInverse(this.m_linearMass), this.m_angularMass = w + g, this.m_angularMass > 0 && (this.m_angularMass = 1 / this.m_angularMass), _$z.SubVV(_$z.AddVV(_$h, v, _$z.s_t0), _$z.AddVV(_$i, a, _$z.s_t1), this.m_linearError), this.m_angularError = e - _$n - this.m_angularOffset, t1.step.warmStarting) {
                            this.m_linearImpulse.SelfMul(t1.step.dtRatio), this.m_angularImpulse *= t1.step.dtRatio;
                            var _$y = this.m_linearImpulse;
                            s.SelfMulSub(l, _$y), _$r -= w * (_$z.CrossVV(a, _$y) + this.m_angularImpulse), u.SelfMulAdd(_$d, _$y), o += g * (_$z.CrossVV(v, _$y) + this.m_angularImpulse);
                        } else this.m_linearImpulse.SetZero(), this.m_angularImpulse = 0;
                        t1.velocities[this.m_indexA].w = _$r, t1.velocities[this.m_indexB].w = o;
                    }, s.SolveVelocityConstraints = function(t1) {
                        var _$i = t1.velocities[this.m_indexA].v, s = t1.velocities[this.m_indexA].w, _$r = t1.velocities[this.m_indexB].v, _$h = t1.velocities[this.m_indexB].w, e = this.m_invMassA, u = this.m_invMassB, o = this.m_invIA, f = this.m_invIB, _$c = t1.step.dt, a = t1.step.inv_dt, v = _$h - s + a * this.m_correctionFactor * this.m_angularError, l = -this.m_angularMass * v, _$d = this.m_angularImpulse, w = _$c * this.m_maxTorque;
                        this.m_angularImpulse = D(this.m_angularImpulse + l, -w, w), s -= o * (l = this.m_angularImpulse - _$d), _$h += f * l;
                        var g = this.m_rA, p = this.m_rB, _$y = _$z.AddVV(_$z.SubVV(_$z.AddVV(_$r, _$z.CrossSV(_$h, p, _$z.s_t0), _$z.s_t0), _$z.AddVV(_$i, _$z.CrossSV(s, g, _$z.s_t1), _$z.s_t1), _$z.s_t2), _$z.MulSV(a * this.m_correctionFactor, this.m_linearError, _$z.s_t3), n.SolveVelocityConstraints_s_Cdot_v2), _$_ = _$q.MulMV(this.m_linearMass, _$y, n.SolveVelocityConstraints_s_impulse_v2).SelfNeg(), m = n.SolveVelocityConstraints_s_oldImpulse_v2.Copy(this.m_linearImpulse);
                        this.m_linearImpulse.SelfAdd(_$_);
                        var b = _$c * this.m_maxForce;
                        this.m_linearImpulse.LengthSquared() > b * b && (this.m_linearImpulse.Normalize(), this.m_linearImpulse.SelfMul(b)), _$z.SubVV(this.m_linearImpulse, m, _$_), _$i.SelfMulSub(e, _$_), s -= o * _$z.CrossVV(g, _$_), _$r.SelfMulAdd(u, _$_), _$h += f * _$z.CrossVV(p, _$_), t1.velocities[this.m_indexA].w = s, t1.velocities[this.m_indexB].w = _$h;
                    }, s.SolvePositionConstraints = function() {
                        return !0;
                    }, s.Dump = function(t1) {
                        var _$i = this.m_bodyA.m_islandIndex, _$n = this.m_bodyB.m_islandIndex;
                        t1("  const jd: b2MotorJointDef = new b2MotorJointDef();\n"), t1("  jd.bodyA = bodies[%d];\n", _$i), t1("  jd.bodyB = bodies[%d];\n", _$n), t1("  jd.collideConnected = %s;\n", this.m_collideConnected ? "true" : "false"), t1("  jd.linearOffset.Set(%.15f, %.15f);\n", this.m_linearOffset.x, this.m_linearOffset.y), t1("  jd.angularOffset = %.15f;\n", this.m_angularOffset), t1("  jd.maxForce = %.15f;\n", this.m_maxForce), t1("  jd.maxTorque = %.15f;\n", this.m_maxTorque), t1("  jd.correctionFactor = %.15f;\n", this.m_correctionFactor), t1("  joints[%d] = this.m_world.CreateJoint(jd);\n", this.m_index);
                    }, n;
                }(Ln);
                _$zn.SolveVelocityConstraints_s_Cdot_v2 = new _$z, _$zn.SolveVelocityConstraints_s_impulse_v2 = new _$z, _$zn.SolveVelocityConstraints_s_oldImpulse_v2 = new _$z;
                var _$$n = function(i) {
                    function n() {
                        var _$n;
                        return (_$n = i.call(this, t1.b2JointType.e_mouseJoint) || this).target = new _$z, _$n.maxForce = 0, _$n.frequencyHz = 5, _$n.dampingRatio = .7, _$n;
                    }
                    return h(n, i), n;
                }(Dn), _$Xn = function(t1) {
                    function n(n) {
                        var s;
                        return (s = t1.call(this, n) || this).m_localAnchorB = new _$z, s.m_targetA = new _$z, s.m_frequencyHz = 0, s.m_dampingRatio = 0, s.m_beta = 0, s.m_impulse = new _$z, s.m_maxForce = 0, s.m_gamma = 0, s.m_indexA = 0, s.m_indexB = 0, s.m_rB = new _$z, s.m_localCenterB = new _$z, s.m_invMassB = 0, s.m_invIB = 0, s.m_mass = new _$q, s.m_C = new _$z, s.m_qB = new _$K, s.m_lalcB = new _$z, s.m_K = new _$q, s.m_targetA.Copy(i(n.target, _$z.ZERO)), J.MulTXV(s.m_bodyB.GetTransform(), s.m_targetA, s.m_localAnchorB), s.m_maxForce = i(n.maxForce, 0), s.m_impulse.SetZero(), s.m_frequencyHz = i(n.frequencyHz, 0), s.m_dampingRatio = i(n.dampingRatio, 0), s.m_beta = 0, s.m_gamma = 0, s;
                    }
                    h(n, t1);
                    var s = n.prototype;
                    return s.SetTarget = function(t1) {
                        this.m_bodyB.IsAwake() || this.m_bodyB.SetAwake(!0), this.m_targetA.Copy(t1);
                    }, s.GetTarget = function() {
                        return this.m_targetA;
                    }, s.SetMaxForce = function(t1) {
                        this.m_maxForce = t1;
                    }, s.GetMaxForce = function() {
                        return this.m_maxForce;
                    }, s.SetFrequency = function(t1) {
                        this.m_frequencyHz = t1;
                    }, s.GetFrequency = function() {
                        return this.m_frequencyHz;
                    }, s.SetDampingRatio = function(t1) {
                        this.m_dampingRatio = t1;
                    }, s.GetDampingRatio = function() {
                        return this.m_dampingRatio;
                    }, s.InitVelocityConstraints = function(t1) {
                        this.m_indexB = this.m_bodyB.m_islandIndex, this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter), this.m_invMassB = this.m_bodyB.m_invMass, this.m_invIB = this.m_bodyB.m_invI;
                        var _$i = t1.positions[this.m_indexB].c, _$n = t1.positions[this.m_indexB].a, s = t1.velocities[this.m_indexB].v, _$r = t1.velocities[this.m_indexB].w, _$h = this.m_qB.SetAngle(_$n), e = this.m_bodyB.GetMass(), o = 6.28318530718 * this.m_frequencyHz, f = 2 * e * this.m_dampingRatio * o, _$c = e * o * o, a = t1.step.dt;
                        this.m_gamma = a * (f + a * _$c), 0 !== this.m_gamma && (this.m_gamma = 1 / this.m_gamma), this.m_beta = a * _$c * this.m_gamma, _$z.SubVV(this.m_localAnchorB, this.m_localCenterB, this.m_lalcB), _$K.MulRV(_$h, this.m_lalcB, this.m_rB);
                        var v = this.m_K;
                        v.ex.x = this.m_invMassB + this.m_invIB * this.m_rB.y * this.m_rB.y + this.m_gamma, v.ex.y = -this.m_invIB * this.m_rB.x * this.m_rB.y, v.ey.x = v.ex.y, v.ey.y = this.m_invMassB + this.m_invIB * this.m_rB.x * this.m_rB.x + this.m_gamma, v.GetInverse(this.m_mass), this.m_C.x = _$i.x + this.m_rB.x - this.m_targetA.x, this.m_C.y = _$i.y + this.m_rB.y - this.m_targetA.y, this.m_C.SelfMul(this.m_beta), _$r *= .98, t1.step.warmStarting ? (this.m_impulse.SelfMul(t1.step.dtRatio), s.x += this.m_invMassB * this.m_impulse.x, s.y += this.m_invMassB * this.m_impulse.y, _$r += this.m_invIB * _$z.CrossVV(this.m_rB, this.m_impulse)) : this.m_impulse.SetZero(), t1.velocities[this.m_indexB].w = _$r;
                    }, s.SolveVelocityConstraints = function(t1) {
                        var _$i = t1.velocities[this.m_indexB].v, s = t1.velocities[this.m_indexB].w, _$r = _$z.AddVCrossSV(_$i, s, this.m_rB, n.SolveVelocityConstraints_s_Cdot), _$h = _$q.MulMV(this.m_mass, _$z.AddVV(_$r, _$z.AddVV(this.m_C, _$z.MulSV(this.m_gamma, this.m_impulse, _$z.s_t0), _$z.s_t0), _$z.s_t0).SelfNeg(), n.SolveVelocityConstraints_s_impulse), e = n.SolveVelocityConstraints_s_oldImpulse.Copy(this.m_impulse);
                        this.m_impulse.SelfAdd(_$h);
                        var u = t1.step.dt * this.m_maxForce;
                        this.m_impulse.LengthSquared() > u * u && this.m_impulse.SelfMul(u / this.m_impulse.Length()), _$z.SubVV(this.m_impulse, e, _$h), _$i.SelfMulAdd(this.m_invMassB, _$h), s += this.m_invIB * _$z.CrossVV(this.m_rB, _$h), t1.velocities[this.m_indexB].w = s;
                    }, s.SolvePositionConstraints = function() {
                        return !0;
                    }, s.GetAnchorA = function(t1) {
                        return t1.x = this.m_targetA.x, t1.y = this.m_targetA.y, t1;
                    }, s.GetAnchorB = function(t1) {
                        return this.m_bodyB.GetWorldPoint(this.m_localAnchorB, t1);
                    }, s.GetReactionForce = function(t1, i) {
                        return _$z.MulSV(t1, this.m_impulse, i);
                    }, s.GetReactionTorque = function() {
                        return 0;
                    }, s.Dump = function(t1) {
                        t1("Mouse joint dumping is not supported.\n");
                    }, s.ShiftOrigin = function(t1) {
                        this.m_targetA.SelfSub(t1);
                    }, n;
                }(Ln);
                _$Xn.SolveVelocityConstraints_s_Cdot = new _$z, _$Xn.SolveVelocityConstraints_s_impulse = new _$z, _$Xn.SolveVelocityConstraints_s_oldImpulse = new _$z;
                var _$qn = function(i) {
                    function n() {
                        var _$n;
                        return (_$n = i.call(this, t1.b2JointType.e_prismaticJoint) || this).localAnchorA = new _$z, _$n.localAnchorB = new _$z, _$n.localAxisA = new _$z(1, 0), _$n.referenceAngle = 0, _$n.enableLimit = !1, _$n.lowerTranslation = 0, _$n.upperTranslation = 0, _$n.enableMotor = !1, _$n.maxMotorForce = 0, _$n.motorSpeed = 0, _$n;
                    }
                    return h(n, i), n.prototype.Initialize = function(t1, i, n, s) {
                        this.bodyA = t1, this.bodyB = i, this.bodyA.GetLocalPoint(n, this.localAnchorA), this.bodyB.GetLocalPoint(n, this.localAnchorB), this.bodyA.GetLocalVector(s, this.localAxisA), this.referenceAngle = this.bodyB.GetAngle() - this.bodyA.GetAngle();
                    }, n;
                }(Dn), _$Yn = function(n) {
                    function s(s) {
                        var _$r;
                        return (_$r = n.call(this, s) || this).m_localAnchorA = new _$z, _$r.m_localAnchorB = new _$z, _$r.m_localXAxisA = new _$z, _$r.m_localYAxisA = new _$z, _$r.m_referenceAngle = 0, _$r.m_impulse = new _$X(0, 0, 0), _$r.m_motorImpulse = 0, _$r.m_lowerTranslation = 0, _$r.m_upperTranslation = 0, _$r.m_maxMotorForce = 0, _$r.m_motorSpeed = 0, _$r.m_enableLimit = !1, _$r.m_enableMotor = !1, _$r.m_limitState = t1.b2LimitState.e_inactiveLimit, _$r.m_indexA = 0, _$r.m_indexB = 0, _$r.m_localCenterA = new _$z, _$r.m_localCenterB = new _$z, _$r.m_invMassA = 0, _$r.m_invMassB = 0, _$r.m_invIA = 0, _$r.m_invIB = 0, _$r.m_axis = new _$z(0, 0), _$r.m_perp = new _$z(0, 0), _$r.m_s1 = 0, _$r.m_s2 = 0, _$r.m_a1 = 0, _$r.m_a2 = 0, _$r.m_K = new _$Y, _$r.m_K3 = new _$Y, _$r.m_K2 = new _$q, _$r.m_motorMass = 0, _$r.m_qA = new _$K, _$r.m_qB = new _$K, _$r.m_lalcA = new _$z, _$r.m_lalcB = new _$z, _$r.m_rA = new _$z, _$r.m_rB = new _$z, _$r.m_localAnchorA.Copy(i(s.localAnchorA, _$z.ZERO)), _$r.m_localAnchorB.Copy(i(s.localAnchorB, _$z.ZERO)), _$r.m_localXAxisA.Copy(i(s.localAxisA, new _$z(1, 0))).SelfNormalize(), _$z.CrossOneV(_$r.m_localXAxisA, _$r.m_localYAxisA), _$r.m_referenceAngle = i(s.referenceAngle, 0), _$r.m_lowerTranslation = i(s.lowerTranslation, 0), _$r.m_upperTranslation = i(s.upperTranslation, 0), _$r.m_maxMotorForce = i(s.maxMotorForce, 0), _$r.m_motorSpeed = i(s.motorSpeed, 0), _$r.m_enableLimit = i(s.enableLimit, !1), _$r.m_enableMotor = i(s.enableMotor, !1), _$r;
                    }
                    h(s, n);
                    var _$r = s.prototype;
                    return _$r.InitVelocityConstraints = function(i) {
                        this.m_indexA = this.m_bodyA.m_islandIndex, this.m_indexB = this.m_bodyB.m_islandIndex, this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter), this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter), this.m_invMassA = this.m_bodyA.m_invMass, this.m_invMassB = this.m_bodyB.m_invMass, this.m_invIA = this.m_bodyA.m_invI, this.m_invIB = this.m_bodyB.m_invI;
                        var _$n = i.positions[this.m_indexA].c, _$r = i.positions[this.m_indexA].a, _$h = i.velocities[this.m_indexA].v, e = i.velocities[this.m_indexA].w, u = i.positions[this.m_indexB].c, o = i.positions[this.m_indexB].a, f = i.velocities[this.m_indexB].v, _$c = i.velocities[this.m_indexB].w, a = this.m_qA.SetAngle(_$r), v = this.m_qB.SetAngle(o);
                        _$z.SubVV(this.m_localAnchorA, this.m_localCenterA, this.m_lalcA);
                        var l = _$K.MulRV(a, this.m_lalcA, this.m_rA);
                        _$z.SubVV(this.m_localAnchorB, this.m_localCenterB, this.m_lalcB);
                        var _$d = _$K.MulRV(v, this.m_lalcB, this.m_rB), w = _$z.AddVV(_$z.SubVV(u, _$n, _$z.s_t0), _$z.SubVV(_$d, l, _$z.s_t1), s.InitVelocityConstraints_s_d), g = this.m_invMassA, p = this.m_invMassB, _$y = this.m_invIA, _$_ = this.m_invIB;
                        if (_$K.MulRV(a, this.m_localXAxisA, this.m_axis), this.m_a1 = _$z.CrossVV(_$z.AddVV(w, l, _$z.s_t0), this.m_axis), this.m_a2 = _$z.CrossVV(_$d, this.m_axis), this.m_motorMass = g + p + _$y * this.m_a1 * this.m_a1 + _$_ * this.m_a2 * this.m_a2, this.m_motorMass > 0 && (this.m_motorMass = 1 / this.m_motorMass), _$K.MulRV(a, this.m_localYAxisA, this.m_perp), this.m_s1 = _$z.CrossVV(_$z.AddVV(w, l, _$z.s_t0), this.m_perp), this.m_s2 = _$z.CrossVV(_$d, this.m_perp), this.m_K.ex.x = g + p + _$y * this.m_s1 * this.m_s1 + _$_ * this.m_s2 * this.m_s2, this.m_K.ex.y = _$y * this.m_s1 + _$_ * this.m_s2, this.m_K.ex.z = _$y * this.m_s1 * this.m_a1 + _$_ * this.m_s2 * this.m_a2, this.m_K.ey.x = this.m_K.ex.y, this.m_K.ey.y = _$y + _$_, 0 === this.m_K.ey.y && (this.m_K.ey.y = 1), this.m_K.ey.z = _$y * this.m_a1 + _$_ * this.m_a2, this.m_K.ez.x = this.m_K.ex.z, this.m_K.ez.y = this.m_K.ey.z, this.m_K.ez.z = g + p + _$y * this.m_a1 * this.m_a1 + _$_ * this.m_a2 * this.m_a2, this.m_enableLimit) {
                            var m = _$z.DotVV(this.m_axis, w);
                            .016 > _$C(this.m_upperTranslation - this.m_lowerTranslation) ? this.m_limitState = t1.b2LimitState.e_equalLimits : m <= this.m_lowerTranslation ? this.m_limitState !== t1.b2LimitState.e_atLowerLimit && (this.m_limitState = t1.b2LimitState.e_atLowerLimit, this.m_impulse.z = 0) : m >= this.m_upperTranslation ? this.m_limitState !== t1.b2LimitState.e_atUpperLimit && (this.m_limitState = t1.b2LimitState.e_atUpperLimit, this.m_impulse.z = 0) : (this.m_limitState = t1.b2LimitState.e_inactiveLimit, this.m_impulse.z = 0);
                        } else this.m_limitState = t1.b2LimitState.e_inactiveLimit, this.m_impulse.z = 0;
                        if (this.m_enableMotor || (this.m_motorImpulse = 0), i.step.warmStarting) {
                            this.m_impulse.SelfMul(i.step.dtRatio), this.m_motorImpulse *= i.step.dtRatio;
                            var b = _$z.AddVV(_$z.MulSV(this.m_impulse.x, this.m_perp, _$z.s_t0), _$z.MulSV(this.m_motorImpulse + this.m_impulse.z, this.m_axis, _$z.s_t1), s.InitVelocityConstraints_s_P), k = this.m_impulse.x * this.m_s1 + this.m_impulse.y + (this.m_motorImpulse + this.m_impulse.z) * this.m_a1, A = this.m_impulse.x * this.m_s2 + this.m_impulse.y + (this.m_motorImpulse + this.m_impulse.z) * this.m_a2;
                            _$h.SelfMulSub(g, b), e -= _$y * k, f.SelfMulAdd(p, b), _$c += _$_ * A;
                        } else this.m_impulse.SetZero(), this.m_motorImpulse = 0;
                        i.velocities[this.m_indexA].w = e, i.velocities[this.m_indexB].w = _$c;
                    }, _$r.SolveVelocityConstraints = function(i) {
                        var _$n = i.velocities[this.m_indexA].v, _$r = i.velocities[this.m_indexA].w, _$h = i.velocities[this.m_indexB].v, e = i.velocities[this.m_indexB].w, u = this.m_invMassA, o = this.m_invMassB, f = this.m_invIA, _$c = this.m_invIB;
                        if (this.m_enableMotor && this.m_limitState !== t1.b2LimitState.e_equalLimits) {
                            var a = _$z.DotVV(this.m_axis, _$z.SubVV(_$h, _$n, _$z.s_t0)) + this.m_a2 * e - this.m_a1 * _$r, v = this.m_motorMass * (this.m_motorSpeed - a), l = this.m_motorImpulse, _$d = i.step.dt * this.m_maxMotorForce;
                            this.m_motorImpulse = D(this.m_motorImpulse + v, -_$d, _$d), v = this.m_motorImpulse - l;
                            var w = _$z.MulSV(v, this.m_axis, s.SolveVelocityConstraints_s_P), g = v * this.m_a1, p = v * this.m_a2;
                            _$n.SelfMulSub(u, w), _$r -= f * g, _$h.SelfMulAdd(o, w), e += _$c * p;
                        }
                        var _$y = _$z.DotVV(this.m_perp, _$z.SubVV(_$h, _$n, _$z.s_t0)) + this.m_s2 * e - this.m_s1 * _$r, _$_ = e - _$r;
                        if (this.m_enableLimit && this.m_limitState !== t1.b2LimitState.e_inactiveLimit) {
                            var m = _$z.DotVV(this.m_axis, _$z.SubVV(_$h, _$n, _$z.s_t0)) + this.m_a2 * e - this.m_a1 * _$r, b = s.SolveVelocityConstraints_s_f1.Copy(this.m_impulse), k = this.m_K.Solve33(-_$y, -_$_, -m, s.SolveVelocityConstraints_s_df3);
                            this.m_impulse.SelfAdd(k), this.m_limitState === t1.b2LimitState.e_atLowerLimit ? this.m_impulse.z = P(this.m_impulse.z, 0) : this.m_limitState === t1.b2LimitState.e_atUpperLimit && (this.m_impulse.z = N(this.m_impulse.z, 0));
                            var A = -_$y - (this.m_impulse.z - b.z) * this.m_K.ez.x, E = -_$_ - (this.m_impulse.z - b.z) * this.m_K.ez.y, T = this.m_K.Solve22(A, E, s.SolveVelocityConstraints_s_f2r);
                            T.x += b.x, T.y += b.y, this.m_impulse.x = T.x, this.m_impulse.y = T.y, k.x = this.m_impulse.x - b.x, k.y = this.m_impulse.y - b.y, k.z = this.m_impulse.z - b.z;
                            var _$S = _$z.AddVV(_$z.MulSV(k.x, this.m_perp, _$z.s_t0), _$z.MulSV(k.z, this.m_axis, _$z.s_t1), s.SolveVelocityConstraints_s_P), _$O = k.x * this.m_s1 + k.y + k.z * this.m_a1, _$I = k.x * this.m_s2 + k.y + k.z * this.m_a2;
                            _$n.SelfMulSub(u, _$S), _$r -= f * _$O, _$h.SelfMulAdd(o, _$S), e += _$c * _$I;
                        } else {
                            var _$R = this.m_K.Solve22(-_$y, -_$_, s.SolveVelocityConstraints_s_df2);
                            this.m_impulse.x += _$R.x, this.m_impulse.y += _$R.y;
                            var _$M = _$z.MulSV(_$R.x, this.m_perp, s.SolveVelocityConstraints_s_P), _$C = _$R.x * this.m_s1 + _$R.y, L = _$R.x * this.m_s2 + _$R.y;
                            _$n.SelfMulSub(u, _$M), _$r -= f * _$C, _$h.SelfMulAdd(o, _$M), e += _$c * L;
                        }
                        i.velocities[this.m_indexA].w = _$r, i.velocities[this.m_indexB].w = e;
                    }, _$r.SolvePositionConstraints = function(t1) {
                        var _$i = t1.positions[this.m_indexA].c, _$n = t1.positions[this.m_indexA].a, _$r = t1.positions[this.m_indexB].c, _$h = t1.positions[this.m_indexB].a, e = this.m_qA.SetAngle(_$n), u = this.m_qB.SetAngle(_$h), o = this.m_invMassA, f = this.m_invMassB, v = this.m_invIA, _$d = this.m_invIB, w = _$K.MulRV(e, this.m_lalcA, this.m_rA), g = _$K.MulRV(u, this.m_lalcB, this.m_rB), p = _$z.SubVV(_$z.AddVV(_$r, g, _$z.s_t0), _$z.AddVV(_$i, w, _$z.s_t1), s.SolvePositionConstraints_s_d), _$y = _$K.MulRV(e, this.m_localXAxisA, this.m_axis), _$_ = _$z.CrossVV(_$z.AddVV(p, w, _$z.s_t0), _$y), m = _$z.CrossVV(g, _$y), b = _$K.MulRV(e, this.m_localYAxisA, this.m_perp), k = _$z.CrossVV(_$z.AddVV(p, w, _$z.s_t0), b), A = _$z.CrossVV(g, b), E = s.SolvePositionConstraints_s_impulse, T = _$z.DotVV(b, p), _$S = _$h - _$n - this.m_referenceAngle, _$O = _$C(T), _$I = _$C(_$S), _$R = !1, _$M = 0;
                        if (this.m_enableLimit) {
                            var _$N = _$z.DotVV(_$y, p);
                            .016 > _$C(this.m_upperTranslation - this.m_lowerTranslation) ? (_$M = D(_$N, -0.2, .2), _$O = P(_$O, _$C(_$N)), _$R = !0) : _$N <= this.m_lowerTranslation ? (_$M = D(_$N - this.m_lowerTranslation + .008, -0.2, 0), _$O = P(_$O, this.m_lowerTranslation - _$N), _$R = !0) : _$N >= this.m_upperTranslation && (_$M = D(_$N - this.m_upperTranslation - .008, 0, .2), _$O = P(_$O, _$N - this.m_upperTranslation), _$R = !0);
                        }
                        if (_$R) {
                            var _$B = v * k + _$d * A, _$F = v * k * _$_ + _$d * A * m, U = v + _$d;
                            0 === U && (U = 1);
                            var x = v * _$_ + _$d * m, G = this.m_K3;
                            G.ex.SetXYZ(o + f + v * k * k + _$d * A * A, _$B, _$F), G.ey.SetXYZ(_$B, U, x), G.ez.SetXYZ(_$F, x, o + f + v * _$_ * _$_ + _$d * m * m), E = G.Solve33(-T, -_$S, -_$M, E);
                        } else {
                            var _$V = v * k + _$d * A, _$W = v + _$d;
                            0 === _$W && (_$W = 1);
                            var _$$ = this.m_K2;
                            _$$.ex.Set(o + f + v * k * k + _$d * A * A, _$V), _$$.ey.Set(_$V, _$W);
                            var _$X = _$$.Solve(-T, -_$S, s.SolvePositionConstraints_s_impulse1);
                            E.x = _$X.x, E.y = _$X.y, E.z = 0;
                        }
                        var _$q = _$z.AddVV(_$z.MulSV(E.x, b, _$z.s_t0), _$z.MulSV(E.z, _$y, _$z.s_t1), s.SolvePositionConstraints_s_P), _$Y = E.x * k + E.y + E.z * _$_, J = E.x * A + E.y + E.z * m;
                        return _$i.SelfMulSub(o, _$q), _$n -= v * _$Y, _$r.SelfMulAdd(f, _$q), _$h += _$d * J, t1.positions[this.m_indexA].a = _$n, t1.positions[this.m_indexB].a = _$h, _$O <= .008 && _$I <= a;
                    }, _$r.GetAnchorA = function(t1) {
                        return this.m_bodyA.GetWorldPoint(this.m_localAnchorA, t1);
                    }, _$r.GetAnchorB = function(t1) {
                        return this.m_bodyB.GetWorldPoint(this.m_localAnchorB, t1);
                    }, _$r.GetReactionForce = function(t1, i) {
                        return i.x = t1 * (this.m_impulse.x * this.m_perp.x + (this.m_motorImpulse + this.m_impulse.z) * this.m_axis.x), i.y = t1 * (this.m_impulse.x * this.m_perp.y + (this.m_motorImpulse + this.m_impulse.z) * this.m_axis.y), i;
                    }, _$r.GetReactionTorque = function(t1) {
                        return t1 * this.m_impulse.y;
                    }, _$r.GetLocalAnchorA = function() {
                        return this.m_localAnchorA;
                    }, _$r.GetLocalAnchorB = function() {
                        return this.m_localAnchorB;
                    }, _$r.GetLocalAxisA = function() {
                        return this.m_localXAxisA;
                    }, _$r.GetReferenceAngle = function() {
                        return this.m_referenceAngle;
                    }, _$r.GetJointTranslation = function() {
                        var _$t = this.m_bodyA.GetWorldPoint(this.m_localAnchorA, s.GetJointTranslation_s_pA), _$i = this.m_bodyB.GetWorldPoint(this.m_localAnchorB, s.GetJointTranslation_s_pB), _$n = _$z.SubVV(_$i, _$t, s.GetJointTranslation_s_d), _$r = this.m_bodyA.GetWorldVector(this.m_localXAxisA, s.GetJointTranslation_s_axis);
                        return _$z.DotVV(_$n, _$r);
                    }, _$r.GetJointSpeed = function() {
                        var _$t = this.m_bodyA, _$i = this.m_bodyB;
                        _$z.SubVV(this.m_localAnchorA, _$t.m_sweep.localCenter, this.m_lalcA);
                        var _$n = _$K.MulRV(_$t.m_xf.q, this.m_lalcA, this.m_rA);
                        _$z.SubVV(this.m_localAnchorB, _$i.m_sweep.localCenter, this.m_lalcB);
                        var _$s = _$K.MulRV(_$i.m_xf.q, this.m_lalcB, this.m_rB), _$r = _$z.AddVV(_$t.m_sweep.c, _$n, _$z.s_t0), _$h = _$z.AddVV(_$i.m_sweep.c, _$s, _$z.s_t1), e = _$z.SubVV(_$h, _$r, _$z.s_t2), u = _$t.GetWorldVector(this.m_localXAxisA, this.m_axis), o = _$t.m_linearVelocity, f = _$i.m_linearVelocity, _$c = _$t.m_angularVelocity, a = _$i.m_angularVelocity;
                        return _$z.DotVV(e, _$z.CrossSV(_$c, u, _$z.s_t0)) + _$z.DotVV(u, _$z.SubVV(_$z.AddVCrossSV(f, a, _$s, _$z.s_t0), _$z.AddVCrossSV(o, _$c, _$n, _$z.s_t1), _$z.s_t0));
                    }, _$r.IsLimitEnabled = function() {
                        return this.m_enableLimit;
                    }, _$r.EnableLimit = function(t1) {
                        t1 !== this.m_enableLimit && (this.m_bodyA.SetAwake(!0), this.m_bodyB.SetAwake(!0), this.m_enableLimit = t1, this.m_impulse.z = 0);
                    }, _$r.GetLowerLimit = function() {
                        return this.m_lowerTranslation;
                    }, _$r.GetUpperLimit = function() {
                        return this.m_upperTranslation;
                    }, _$r.SetLimits = function(t1, i) {
                        t1 === this.m_lowerTranslation && i === this.m_upperTranslation || (this.m_bodyA.SetAwake(!0), this.m_bodyB.SetAwake(!0), this.m_lowerTranslation = t1, this.m_upperTranslation = i, this.m_impulse.z = 0);
                    }, _$r.IsMotorEnabled = function() {
                        return this.m_enableMotor;
                    }, _$r.EnableMotor = function(t1) {
                        t1 !== this.m_enableMotor && (this.m_bodyA.SetAwake(!0), this.m_bodyB.SetAwake(!0), this.m_enableMotor = t1);
                    }, _$r.SetMotorSpeed = function(t1) {
                        t1 !== this.m_motorSpeed && (this.m_bodyA.SetAwake(!0), this.m_bodyB.SetAwake(!0), this.m_motorSpeed = t1);
                    }, _$r.GetMotorSpeed = function() {
                        return this.m_motorSpeed;
                    }, _$r.SetMaxMotorForce = function(t1) {
                        t1 !== this.m_maxMotorForce && (this.m_bodyA.SetAwake(!0), this.m_bodyB.SetAwake(!0), this.m_maxMotorForce = t1);
                    }, _$r.GetMaxMotorForce = function() {
                        return this.m_maxMotorForce;
                    }, _$r.GetMotorForce = function(t1) {
                        return t1 * this.m_motorImpulse;
                    }, _$r.Dump = function(t1) {
                        var _$i = this.m_bodyA.m_islandIndex, _$n = this.m_bodyB.m_islandIndex;
                        t1("  const jd: b2PrismaticJointDef = new b2PrismaticJointDef();\n"), t1("  jd.bodyA = bodies[%d];\n", _$i), t1("  jd.bodyB = bodies[%d];\n", _$n), t1("  jd.collideConnected = %s;\n", this.m_collideConnected ? "true" : "false"), t1("  jd.localAnchorA.Set(%.15f, %.15f);\n", this.m_localAnchorA.x, this.m_localAnchorA.y), t1("  jd.localAnchorB.Set(%.15f, %.15f);\n", this.m_localAnchorB.x, this.m_localAnchorB.y), t1("  jd.localAxisA.Set(%.15f, %.15f);\n", this.m_localXAxisA.x, this.m_localXAxisA.y), t1("  jd.referenceAngle = %.15f;\n", this.m_referenceAngle), t1("  jd.enableLimit = %s;\n", this.m_enableLimit ? "true" : "false"), t1("  jd.lowerTranslation = %.15f;\n", this.m_lowerTranslation), t1("  jd.upperTranslation = %.15f;\n", this.m_upperTranslation), t1("  jd.enableMotor = %s;\n", this.m_enableMotor ? "true" : "false"), t1("  jd.motorSpeed = %.15f;\n", this.m_motorSpeed), t1("  jd.maxMotorForce = %.15f;\n", this.m_maxMotorForce), t1("  joints[%d] = this.m_world.CreateJoint(jd);\n", this.m_index);
                    }, s;
                }(Ln);
                _$Yn.InitVelocityConstraints_s_d = new _$z, _$Yn.InitVelocityConstraints_s_P = new _$z, _$Yn.SolveVelocityConstraints_s_P = new _$z, _$Yn.SolveVelocityConstraints_s_f2r = new _$z, _$Yn.SolveVelocityConstraints_s_f1 = new _$X, _$Yn.SolveVelocityConstraints_s_df3 = new _$X, _$Yn.SolveVelocityConstraints_s_df2 = new _$z, _$Yn.SolvePositionConstraints_s_d = new _$z, _$Yn.SolvePositionConstraints_s_impulse = new _$X, _$Yn.SolvePositionConstraints_s_impulse1 = new _$z, _$Yn.SolvePositionConstraints_s_P = new _$z, _$Yn.GetJointTranslation_s_pA = new _$z, _$Yn.GetJointTranslation_s_pB = new _$z, _$Yn.GetJointTranslation_s_d = new _$z, _$Yn.GetJointTranslation_s_axis = new _$z;
                var _$Kn = function(i) {
                    function n() {
                        var _$n;
                        return (_$n = i.call(this, t1.b2JointType.e_pulleyJoint) || this).groundAnchorA = new _$z(-1, 1), _$n.groundAnchorB = new _$z(1, 1), _$n.localAnchorA = new _$z(-1, 0), _$n.localAnchorB = new _$z(1, 0), _$n.lengthA = 0, _$n.lengthB = 0, _$n.ratio = 1, _$n.collideConnected = !0, _$n;
                    }
                    return h(n, i), n.prototype.Initialize = function(t1, i, n, s, r, h, e) {
                        this.bodyA = t1, this.bodyB = i, this.groundAnchorA.Copy(n), this.groundAnchorB.Copy(s), this.bodyA.GetLocalPoint(r, this.localAnchorA), this.bodyB.GetLocalPoint(h, this.localAnchorB), this.lengthA = _$z.DistanceVV(r, n), this.lengthB = _$z.DistanceVV(h, s), this.ratio = e;
                    }, n;
                }(Dn), _$Jn = function(t1) {
                    function n(n) {
                        var s;
                        return (s = t1.call(this, n) || this).m_groundAnchorA = new _$z, s.m_groundAnchorB = new _$z, s.m_lengthA = 0, s.m_lengthB = 0, s.m_localAnchorA = new _$z, s.m_localAnchorB = new _$z, s.m_constant = 0, s.m_ratio = 0, s.m_impulse = 0, s.m_indexA = 0, s.m_indexB = 0, s.m_uA = new _$z, s.m_uB = new _$z, s.m_rA = new _$z, s.m_rB = new _$z, s.m_localCenterA = new _$z, s.m_localCenterB = new _$z, s.m_invMassA = 0, s.m_invMassB = 0, s.m_invIA = 0, s.m_invIB = 0, s.m_mass = 0, s.m_qA = new _$K, s.m_qB = new _$K, s.m_lalcA = new _$z, s.m_lalcB = new _$z, s.m_groundAnchorA.Copy(i(n.groundAnchorA, new _$z(-1, 1))), s.m_groundAnchorB.Copy(i(n.groundAnchorB, new _$z(1, 0))), s.m_localAnchorA.Copy(i(n.localAnchorA, new _$z(-1, 0))), s.m_localAnchorB.Copy(i(n.localAnchorB, new _$z(1, 0))), s.m_lengthA = i(n.lengthA, 0), s.m_lengthB = i(n.lengthB, 0), s.m_ratio = i(n.ratio, 1), s.m_constant = i(n.lengthA, 0) + s.m_ratio * i(n.lengthB, 0), s.m_impulse = 0, s;
                    }
                    h(n, t1);
                    var s = n.prototype;
                    return s.InitVelocityConstraints = function(t1) {
                        this.m_indexA = this.m_bodyA.m_islandIndex, this.m_indexB = this.m_bodyB.m_islandIndex, this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter), this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter), this.m_invMassA = this.m_bodyA.m_invMass, this.m_invMassB = this.m_bodyB.m_invMass, this.m_invIA = this.m_bodyA.m_invI, this.m_invIB = this.m_bodyB.m_invI;
                        var _$i = t1.positions[this.m_indexA].c, s = t1.positions[this.m_indexA].a, _$r = t1.velocities[this.m_indexA].v, _$h = t1.velocities[this.m_indexA].w, e = t1.positions[this.m_indexB].c, u = t1.positions[this.m_indexB].a, o = t1.velocities[this.m_indexB].v, f = t1.velocities[this.m_indexB].w, _$c = this.m_qA.SetAngle(s), a = this.m_qB.SetAngle(u);
                        _$z.SubVV(this.m_localAnchorA, this.m_localCenterA, this.m_lalcA), _$K.MulRV(_$c, this.m_lalcA, this.m_rA), _$z.SubVV(this.m_localAnchorB, this.m_localCenterB, this.m_lalcB), _$K.MulRV(a, this.m_lalcB, this.m_rB), this.m_uA.Copy(_$i).SelfAdd(this.m_rA).SelfSub(this.m_groundAnchorA), this.m_uB.Copy(e).SelfAdd(this.m_rB).SelfSub(this.m_groundAnchorB);
                        var v = this.m_uA.Length(), l = this.m_uB.Length();
                        v > .08 ? this.m_uA.SelfMul(1 / v) : this.m_uA.SetZero(), l > .08 ? this.m_uB.SelfMul(1 / l) : this.m_uB.SetZero();
                        var _$d = _$z.CrossVV(this.m_rA, this.m_uA), w = _$z.CrossVV(this.m_rB, this.m_uB), g = this.m_invMassA + this.m_invIA * _$d * _$d, p = this.m_invMassB + this.m_invIB * w * w;
                        if (this.m_mass = g + this.m_ratio * this.m_ratio * p, this.m_mass > 0 && (this.m_mass = 1 / this.m_mass), t1.step.warmStarting) {
                            this.m_impulse *= t1.step.dtRatio;
                            var _$y = _$z.MulSV(-this.m_impulse, this.m_uA, n.InitVelocityConstraints_s_PA), _$_ = _$z.MulSV(-this.m_ratio * this.m_impulse, this.m_uB, n.InitVelocityConstraints_s_PB);
                            _$r.SelfMulAdd(this.m_invMassA, _$y), _$h += this.m_invIA * _$z.CrossVV(this.m_rA, _$y), o.SelfMulAdd(this.m_invMassB, _$_), f += this.m_invIB * _$z.CrossVV(this.m_rB, _$_);
                        } else this.m_impulse = 0;
                        t1.velocities[this.m_indexA].w = _$h, t1.velocities[this.m_indexB].w = f;
                    }, s.SolveVelocityConstraints = function(t1) {
                        var _$i = t1.velocities[this.m_indexA].v, s = t1.velocities[this.m_indexA].w, _$r = t1.velocities[this.m_indexB].v, _$h = t1.velocities[this.m_indexB].w, e = _$z.AddVCrossSV(_$i, s, this.m_rA, n.SolveVelocityConstraints_s_vpA), u = _$z.AddVCrossSV(_$r, _$h, this.m_rB, n.SolveVelocityConstraints_s_vpB), o = -_$z.DotVV(this.m_uA, e) - this.m_ratio * _$z.DotVV(this.m_uB, u), f = -this.m_mass * o;
                        this.m_impulse += f;
                        var _$c = _$z.MulSV(-f, this.m_uA, n.SolveVelocityConstraints_s_PA), a = _$z.MulSV(-this.m_ratio * f, this.m_uB, n.SolveVelocityConstraints_s_PB);
                        _$i.SelfMulAdd(this.m_invMassA, _$c), s += this.m_invIA * _$z.CrossVV(this.m_rA, _$c), _$r.SelfMulAdd(this.m_invMassB, a), _$h += this.m_invIB * _$z.CrossVV(this.m_rB, a), t1.velocities[this.m_indexA].w = s, t1.velocities[this.m_indexB].w = _$h;
                    }, s.SolvePositionConstraints = function(t1) {
                        var _$i = t1.positions[this.m_indexA].c, s = t1.positions[this.m_indexA].a, _$r = t1.positions[this.m_indexB].c, _$h = t1.positions[this.m_indexB].a, e = this.m_qA.SetAngle(s), u = this.m_qB.SetAngle(_$h);
                        _$z.SubVV(this.m_localAnchorA, this.m_localCenterA, this.m_lalcA);
                        var o = _$K.MulRV(e, this.m_lalcA, this.m_rA);
                        _$z.SubVV(this.m_localAnchorB, this.m_localCenterB, this.m_lalcB);
                        var f = _$K.MulRV(u, this.m_lalcB, this.m_rB), a = this.m_uA.Copy(_$i).SelfAdd(o).SelfSub(this.m_groundAnchorA), v = this.m_uB.Copy(_$r).SelfAdd(f).SelfSub(this.m_groundAnchorB), l = a.Length(), _$d = v.Length();
                        l > .08 ? a.SelfMul(1 / l) : a.SetZero(), _$d > .08 ? v.SelfMul(1 / _$d) : v.SetZero();
                        var w = _$z.CrossVV(o, a), g = _$z.CrossVV(f, v), p = this.m_invMassA + this.m_invIA * w * w, _$y = this.m_invMassB + this.m_invIB * g * g, _$_ = p + this.m_ratio * this.m_ratio * _$y;
                        _$_ > 0 && (_$_ = 1 / _$_);
                        var m = this.m_constant - l - this.m_ratio * _$d, b = _$C(m), k = -_$_ * m, A = _$z.MulSV(-k, a, n.SolvePositionConstraints_s_PA), E = _$z.MulSV(-this.m_ratio * k, v, n.SolvePositionConstraints_s_PB);
                        return _$i.SelfMulAdd(this.m_invMassA, A), s += this.m_invIA * _$z.CrossVV(o, A), _$r.SelfMulAdd(this.m_invMassB, E), _$h += this.m_invIB * _$z.CrossVV(f, E), t1.positions[this.m_indexA].a = s, t1.positions[this.m_indexB].a = _$h, b < .008;
                    }, s.GetAnchorA = function(t1) {
                        return this.m_bodyA.GetWorldPoint(this.m_localAnchorA, t1);
                    }, s.GetAnchorB = function(t1) {
                        return this.m_bodyB.GetWorldPoint(this.m_localAnchorB, t1);
                    }, s.GetReactionForce = function(t1, i) {
                        return i.x = t1 * this.m_impulse * this.m_uB.x, i.y = t1 * this.m_impulse * this.m_uB.y, i;
                    }, s.GetReactionTorque = function() {
                        return 0;
                    }, s.GetGroundAnchorA = function() {
                        return this.m_groundAnchorA;
                    }, s.GetGroundAnchorB = function() {
                        return this.m_groundAnchorB;
                    }, s.GetLengthA = function() {
                        return this.m_lengthA;
                    }, s.GetLengthB = function() {
                        return this.m_lengthB;
                    }, s.GetRatio = function() {
                        return this.m_ratio;
                    }, s.GetCurrentLengthA = function() {
                        var _$t = this.m_bodyA.GetWorldPoint(this.m_localAnchorA, n.GetCurrentLengthA_s_p), _$i = this.m_groundAnchorA;
                        return _$z.DistanceVV(_$t, _$i);
                    }, s.GetCurrentLengthB = function() {
                        var _$t = this.m_bodyB.GetWorldPoint(this.m_localAnchorB, n.GetCurrentLengthB_s_p), _$i = this.m_groundAnchorB;
                        return _$z.DistanceVV(_$t, _$i);
                    }, s.Dump = function(t1) {
                        var _$i = this.m_bodyA.m_islandIndex, _$n = this.m_bodyB.m_islandIndex;
                        t1("  const jd: b2PulleyJointDef = new b2PulleyJointDef();\n"), t1("  jd.bodyA = bodies[%d];\n", _$i), t1("  jd.bodyB = bodies[%d];\n", _$n), t1("  jd.collideConnected = %s;\n", this.m_collideConnected ? "true" : "false"), t1("  jd.groundAnchorA.Set(%.15f, %.15f);\n", this.m_groundAnchorA.x, this.m_groundAnchorA.y), t1("  jd.groundAnchorB.Set(%.15f, %.15f);\n", this.m_groundAnchorB.x, this.m_groundAnchorB.y), t1("  jd.localAnchorA.Set(%.15f, %.15f);\n", this.m_localAnchorA.x, this.m_localAnchorA.y), t1("  jd.localAnchorB.Set(%.15f, %.15f);\n", this.m_localAnchorB.x, this.m_localAnchorB.y), t1("  jd.lengthA = %.15f;\n", this.m_lengthA), t1("  jd.lengthB = %.15f;\n", this.m_lengthB), t1("  jd.ratio = %.15f;\n", this.m_ratio), t1("  joints[%d] = this.m_world.CreateJoint(jd);\n", this.m_index);
                    }, s.ShiftOrigin = function(t1) {
                        this.m_groundAnchorA.SelfSub(t1), this.m_groundAnchorB.SelfSub(t1);
                    }, n;
                }(Ln);
                _$Jn.InitVelocityConstraints_s_PA = new _$z, _$Jn.InitVelocityConstraints_s_PB = new _$z, _$Jn.SolveVelocityConstraints_s_vpA = new _$z, _$Jn.SolveVelocityConstraints_s_vpB = new _$z, _$Jn.SolveVelocityConstraints_s_PA = new _$z, _$Jn.SolveVelocityConstraints_s_PB = new _$z, _$Jn.SolvePositionConstraints_s_PA = new _$z, _$Jn.SolvePositionConstraints_s_PB = new _$z, _$Jn.GetCurrentLengthA_s_p = new _$z, _$Jn.GetCurrentLengthB_s_p = new _$z;
                var _$Qn = function(i) {
                    function n() {
                        var _$n;
                        return (_$n = i.call(this, t1.b2JointType.e_revoluteJoint) || this).localAnchorA = new _$z(0, 0), _$n.localAnchorB = new _$z(0, 0), _$n.referenceAngle = 0, _$n.enableLimit = !1, _$n.lowerAngle = 0, _$n.upperAngle = 0, _$n.enableMotor = !1, _$n.motorSpeed = 0, _$n.maxMotorTorque = 0, _$n;
                    }
                    return h(n, i), n.prototype.Initialize = function(t1, i, n) {
                        this.bodyA = t1, this.bodyB = i, this.bodyA.GetLocalPoint(n, this.localAnchorA), this.bodyB.GetLocalPoint(n, this.localAnchorB), this.referenceAngle = this.bodyB.GetAngle() - this.bodyA.GetAngle();
                    }, n;
                }(Dn), _$Zn = function(n) {
                    function s(s) {
                        var _$r;
                        return (_$r = n.call(this, s) || this).m_localAnchorA = new _$z, _$r.m_localAnchorB = new _$z, _$r.m_impulse = new _$X, _$r.m_motorImpulse = 0, _$r.m_enableMotor = !1, _$r.m_maxMotorTorque = 0, _$r.m_motorSpeed = 0, _$r.m_enableLimit = !1, _$r.m_referenceAngle = 0, _$r.m_lowerAngle = 0, _$r.m_upperAngle = 0, _$r.m_indexA = 0, _$r.m_indexB = 0, _$r.m_rA = new _$z, _$r.m_rB = new _$z, _$r.m_localCenterA = new _$z, _$r.m_localCenterB = new _$z, _$r.m_invMassA = 0, _$r.m_invMassB = 0, _$r.m_invIA = 0, _$r.m_invIB = 0, _$r.m_mass = new _$Y, _$r.m_motorMass = 0, _$r.m_limitState = t1.b2LimitState.e_inactiveLimit, _$r.m_qA = new _$K, _$r.m_qB = new _$K, _$r.m_lalcA = new _$z, _$r.m_lalcB = new _$z, _$r.m_K = new _$q, _$r.m_localAnchorA.Copy(i(s.localAnchorA, _$z.ZERO)), _$r.m_localAnchorB.Copy(i(s.localAnchorB, _$z.ZERO)), _$r.m_referenceAngle = i(s.referenceAngle, 0), _$r.m_impulse.SetZero(), _$r.m_motorImpulse = 0, _$r.m_lowerAngle = i(s.lowerAngle, 0), _$r.m_upperAngle = i(s.upperAngle, 0), _$r.m_maxMotorTorque = i(s.maxMotorTorque, 0), _$r.m_motorSpeed = i(s.motorSpeed, 0), _$r.m_enableLimit = i(s.enableLimit, !1), _$r.m_enableMotor = i(s.enableMotor, !1), _$r.m_limitState = t1.b2LimitState.e_inactiveLimit, _$r;
                    }
                    h(s, n);
                    var _$r = s.prototype;
                    return _$r.InitVelocityConstraints = function(i) {
                        this.m_indexA = this.m_bodyA.m_islandIndex, this.m_indexB = this.m_bodyB.m_islandIndex, this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter), this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter), this.m_invMassA = this.m_bodyA.m_invMass, this.m_invMassB = this.m_bodyB.m_invMass, this.m_invIA = this.m_bodyA.m_invI, this.m_invIB = this.m_bodyB.m_invI;
                        var _$n = i.positions[this.m_indexA].a, _$r = i.velocities[this.m_indexA].v, _$h = i.velocities[this.m_indexA].w, e = i.positions[this.m_indexB].a, u = i.velocities[this.m_indexB].v, o = i.velocities[this.m_indexB].w, f = this.m_qA.SetAngle(_$n), _$c = this.m_qB.SetAngle(e);
                        _$z.SubVV(this.m_localAnchorA, this.m_localCenterA, this.m_lalcA), _$K.MulRV(f, this.m_lalcA, this.m_rA), _$z.SubVV(this.m_localAnchorB, this.m_localCenterB, this.m_lalcB), _$K.MulRV(_$c, this.m_lalcB, this.m_rB);
                        var v = this.m_invMassA, l = this.m_invMassB, _$d = this.m_invIA, w = this.m_invIB, g = _$d + w === 0;
                        if (this.m_mass.ex.x = v + l + this.m_rA.y * this.m_rA.y * _$d + this.m_rB.y * this.m_rB.y * w, this.m_mass.ey.x = -this.m_rA.y * this.m_rA.x * _$d - this.m_rB.y * this.m_rB.x * w, this.m_mass.ez.x = -this.m_rA.y * _$d - this.m_rB.y * w, this.m_mass.ex.y = this.m_mass.ey.x, this.m_mass.ey.y = v + l + this.m_rA.x * this.m_rA.x * _$d + this.m_rB.x * this.m_rB.x * w, this.m_mass.ez.y = this.m_rA.x * _$d + this.m_rB.x * w, this.m_mass.ex.z = this.m_mass.ez.x, this.m_mass.ey.z = this.m_mass.ez.y, this.m_mass.ez.z = _$d + w, this.m_motorMass = _$d + w, this.m_motorMass > 0 && (this.m_motorMass = 1 / this.m_motorMass), this.m_enableMotor && !g || (this.m_motorImpulse = 0), this.m_enableLimit && !g) {
                            var p = e - _$n - this.m_referenceAngle;
                            _$C(this.m_upperAngle - this.m_lowerAngle) < 2 * a ? this.m_limitState = t1.b2LimitState.e_equalLimits : p <= this.m_lowerAngle ? (this.m_limitState !== t1.b2LimitState.e_atLowerLimit && (this.m_impulse.z = 0), this.m_limitState = t1.b2LimitState.e_atLowerLimit) : p >= this.m_upperAngle ? (this.m_limitState !== t1.b2LimitState.e_atUpperLimit && (this.m_impulse.z = 0), this.m_limitState = t1.b2LimitState.e_atUpperLimit) : (this.m_limitState = t1.b2LimitState.e_inactiveLimit, this.m_impulse.z = 0);
                        } else this.m_limitState = t1.b2LimitState.e_inactiveLimit;
                        if (i.step.warmStarting) {
                            this.m_impulse.SelfMul(i.step.dtRatio), this.m_motorImpulse *= i.step.dtRatio;
                            var _$y = s.InitVelocityConstraints_s_P.Set(this.m_impulse.x, this.m_impulse.y);
                            _$r.SelfMulSub(v, _$y), _$h -= _$d * (_$z.CrossVV(this.m_rA, _$y) + this.m_motorImpulse + this.m_impulse.z), u.SelfMulAdd(l, _$y), o += w * (_$z.CrossVV(this.m_rB, _$y) + this.m_motorImpulse + this.m_impulse.z);
                        } else this.m_impulse.SetZero(), this.m_motorImpulse = 0;
                        i.velocities[this.m_indexA].w = _$h, i.velocities[this.m_indexB].w = o;
                    }, _$r.SolveVelocityConstraints = function(i) {
                        var _$n = i.velocities[this.m_indexA].v, _$r = i.velocities[this.m_indexA].w, _$h = i.velocities[this.m_indexB].v, e = i.velocities[this.m_indexB].w, u = this.m_invMassA, o = this.m_invMassB, f = this.m_invIA, _$c = this.m_invIB, a = f + _$c === 0;
                        if (this.m_enableMotor && this.m_limitState !== t1.b2LimitState.e_equalLimits && !a) {
                            var v = e - _$r - this.m_motorSpeed, l = -this.m_motorMass * v, _$d = this.m_motorImpulse, w = i.step.dt * this.m_maxMotorTorque;
                            this.m_motorImpulse = D(this.m_motorImpulse + l, -w, w), _$r -= f * (l = this.m_motorImpulse - _$d), e += _$c * l;
                        }
                        if (this.m_enableLimit && this.m_limitState !== t1.b2LimitState.e_inactiveLimit && !a) {
                            var g = _$z.SubVV(_$z.AddVCrossSV(_$h, e, this.m_rB, _$z.s_t0), _$z.AddVCrossSV(_$n, _$r, this.m_rA, _$z.s_t1), s.SolveVelocityConstraints_s_Cdot1), p = e - _$r, _$y = this.m_mass.Solve33(g.x, g.y, p, s.SolveVelocityConstraints_s_impulse_v3).SelfNeg();
                            if (this.m_limitState === t1.b2LimitState.e_equalLimits) this.m_impulse.SelfAdd(_$y);
                            else if (this.m_limitState === t1.b2LimitState.e_atLowerLimit) if (this.m_impulse.z + _$y.z < 0) {
                                var _$_ = -g.x + this.m_impulse.z * this.m_mass.ez.x, m = -g.y + this.m_impulse.z * this.m_mass.ez.y, b = this.m_mass.Solve22(_$_, m, s.SolveVelocityConstraints_s_reduced_v2);
                                _$y.x = b.x, _$y.y = b.y, _$y.z = -this.m_impulse.z, this.m_impulse.x += b.x, this.m_impulse.y += b.y, this.m_impulse.z = 0;
                            } else this.m_impulse.SelfAdd(_$y);
                            else if (this.m_limitState === t1.b2LimitState.e_atUpperLimit) if (this.m_impulse.z + _$y.z > 0) {
                                var k = -g.x + this.m_impulse.z * this.m_mass.ez.x, A = -g.y + this.m_impulse.z * this.m_mass.ez.y, E = this.m_mass.Solve22(k, A, s.SolveVelocityConstraints_s_reduced_v2);
                                _$y.x = E.x, _$y.y = E.y, _$y.z = -this.m_impulse.z, this.m_impulse.x += E.x, this.m_impulse.y += E.y, this.m_impulse.z = 0;
                            } else this.m_impulse.SelfAdd(_$y);
                            var T = s.SolveVelocityConstraints_s_P.Set(_$y.x, _$y.y);
                            _$n.SelfMulSub(u, T), _$r -= f * (_$z.CrossVV(this.m_rA, T) + _$y.z), _$h.SelfMulAdd(o, T), e += _$c * (_$z.CrossVV(this.m_rB, T) + _$y.z);
                        } else {
                            var _$S = _$z.SubVV(_$z.AddVCrossSV(_$h, e, this.m_rB, _$z.s_t0), _$z.AddVCrossSV(_$n, _$r, this.m_rA, _$z.s_t1), s.SolveVelocityConstraints_s_Cdot_v2), _$O = this.m_mass.Solve22(-_$S.x, -_$S.y, s.SolveVelocityConstraints_s_impulse_v2);
                            this.m_impulse.x += _$O.x, this.m_impulse.y += _$O.y, _$n.SelfMulSub(u, _$O), _$r -= f * _$z.CrossVV(this.m_rA, _$O), _$h.SelfMulAdd(o, _$O), e += _$c * _$z.CrossVV(this.m_rB, _$O);
                        }
                        i.velocities[this.m_indexA].w = _$r, i.velocities[this.m_indexB].w = e;
                    }, _$r.SolvePositionConstraints = function(i) {
                        var _$n, _$r = i.positions[this.m_indexA].c, _$h = i.positions[this.m_indexA].a, e = i.positions[this.m_indexB].c, u = i.positions[this.m_indexB].a, o = this.m_qA.SetAngle(_$h), f = this.m_qB.SetAngle(u), v = 0, l = this.m_invIA + this.m_invIB === 0;
                        if (this.m_enableLimit && this.m_limitState !== t1.b2LimitState.e_inactiveLimit && !l) {
                            var _$d = u - _$h - this.m_referenceAngle, g = 0;
                            if (this.m_limitState === t1.b2LimitState.e_equalLimits) {
                                var p = D(_$d - this.m_lowerAngle, -0.13962634015955555, w);
                                g = -this.m_motorMass * p, v = _$C(p);
                            } else if (this.m_limitState === t1.b2LimitState.e_atLowerLimit) {
                                var _$y = _$d - this.m_lowerAngle;
                                v = -_$y, _$y = D(_$y + a, -0.13962634015955555, 0), g = -this.m_motorMass * _$y;
                            } else if (this.m_limitState === t1.b2LimitState.e_atUpperLimit) {
                                var _$_ = _$d - this.m_upperAngle;
                                v = _$_, _$_ = D(_$_ - a, 0, w), g = -this.m_motorMass * _$_;
                            }
                            _$h -= this.m_invIA * g, u += this.m_invIB * g;
                        }
                        o.SetAngle(_$h), f.SetAngle(u), _$z.SubVV(this.m_localAnchorA, this.m_localCenterA, this.m_lalcA);
                        var m = _$K.MulRV(o, this.m_lalcA, this.m_rA);
                        _$z.SubVV(this.m_localAnchorB, this.m_localCenterB, this.m_lalcB);
                        var b = _$K.MulRV(f, this.m_lalcB, this.m_rB), k = _$z.SubVV(_$z.AddVV(e, b, _$z.s_t0), _$z.AddVV(_$r, m, _$z.s_t1), s.SolvePositionConstraints_s_C_v2);
                        _$n = k.Length();
                        var A = this.m_invMassA, E = this.m_invMassB, T = this.m_invIA, _$S = this.m_invIB, _$O = this.m_K;
                        _$O.ex.x = A + E + T * m.y * m.y + _$S * b.y * b.y, _$O.ex.y = -T * m.x * m.y - _$S * b.x * b.y, _$O.ey.x = _$O.ex.y, _$O.ey.y = A + E + T * m.x * m.x + _$S * b.x * b.x;
                        var _$I = _$O.Solve(k.x, k.y, s.SolvePositionConstraints_s_impulse).SelfNeg();
                        return _$r.SelfMulSub(A, _$I), _$h -= T * _$z.CrossVV(m, _$I), e.SelfMulAdd(E, _$I), u += _$S * _$z.CrossVV(b, _$I), i.positions[this.m_indexA].a = _$h, i.positions[this.m_indexB].a = u, _$n <= .008 && v <= a;
                    }, _$r.GetAnchorA = function(t1) {
                        return this.m_bodyA.GetWorldPoint(this.m_localAnchorA, t1);
                    }, _$r.GetAnchorB = function(t1) {
                        return this.m_bodyB.GetWorldPoint(this.m_localAnchorB, t1);
                    }, _$r.GetReactionForce = function(t1, i) {
                        return i.x = t1 * this.m_impulse.x, i.y = t1 * this.m_impulse.y, i;
                    }, _$r.GetReactionTorque = function(t1) {
                        return t1 * this.m_impulse.z;
                    }, _$r.GetLocalAnchorA = function() {
                        return this.m_localAnchorA;
                    }, _$r.GetLocalAnchorB = function() {
                        return this.m_localAnchorB;
                    }, _$r.GetReferenceAngle = function() {
                        return this.m_referenceAngle;
                    }, _$r.GetJointAngle = function() {
                        return this.m_bodyB.m_sweep.a - this.m_bodyA.m_sweep.a - this.m_referenceAngle;
                    }, _$r.GetJointSpeed = function() {
                        return this.m_bodyB.m_angularVelocity - this.m_bodyA.m_angularVelocity;
                    }, _$r.IsMotorEnabled = function() {
                        return this.m_enableMotor;
                    }, _$r.EnableMotor = function(t1) {
                        t1 !== this.m_enableMotor && (this.m_bodyA.SetAwake(!0), this.m_bodyB.SetAwake(!0), this.m_enableMotor = t1);
                    }, _$r.GetMotorTorque = function(t1) {
                        return t1 * this.m_motorImpulse;
                    }, _$r.GetMotorSpeed = function() {
                        return this.m_motorSpeed;
                    }, _$r.SetMaxMotorTorque = function(t1) {
                        t1 !== this.m_maxMotorTorque && (this.m_bodyA.SetAwake(!0), this.m_bodyB.SetAwake(!0), this.m_maxMotorTorque = t1);
                    }, _$r.GetMaxMotorTorque = function() {
                        return this.m_maxMotorTorque;
                    }, _$r.IsLimitEnabled = function() {
                        return this.m_enableLimit;
                    }, _$r.EnableLimit = function(t1) {
                        t1 !== this.m_enableLimit && (this.m_bodyA.SetAwake(!0), this.m_bodyB.SetAwake(!0), this.m_enableLimit = t1, this.m_impulse.z = 0);
                    }, _$r.GetLowerLimit = function() {
                        return this.m_lowerAngle;
                    }, _$r.GetUpperLimit = function() {
                        return this.m_upperAngle;
                    }, _$r.SetLimits = function(t1, i) {
                        t1 === this.m_lowerAngle && i === this.m_upperAngle || (this.m_bodyA.SetAwake(!0), this.m_bodyB.SetAwake(!0), this.m_impulse.z = 0, this.m_lowerAngle = t1, this.m_upperAngle = i);
                    }, _$r.SetMotorSpeed = function(t1) {
                        t1 !== this.m_motorSpeed && (this.m_bodyA.SetAwake(!0), this.m_bodyB.SetAwake(!0), this.m_motorSpeed = t1);
                    }, _$r.Dump = function(t1) {
                        var _$i = this.m_bodyA.m_islandIndex, _$n = this.m_bodyB.m_islandIndex;
                        t1("  const jd: b2RevoluteJointDef = new b2RevoluteJointDef();\n"), t1("  jd.bodyA = bodies[%d];\n", _$i), t1("  jd.bodyB = bodies[%d];\n", _$n), t1("  jd.collideConnected = %s;\n", this.m_collideConnected ? "true" : "false"), t1("  jd.localAnchorA.Set(%.15f, %.15f);\n", this.m_localAnchorA.x, this.m_localAnchorA.y), t1("  jd.localAnchorB.Set(%.15f, %.15f);\n", this.m_localAnchorB.x, this.m_localAnchorB.y), t1("  jd.referenceAngle = %.15f;\n", this.m_referenceAngle), t1("  jd.enableLimit = %s;\n", this.m_enableLimit ? "true" : "false"), t1("  jd.lowerAngle = %.15f;\n", this.m_lowerAngle), t1("  jd.upperAngle = %.15f;\n", this.m_upperAngle), t1("  jd.enableMotor = %s;\n", this.m_enableMotor ? "true" : "false"), t1("  jd.motorSpeed = %.15f;\n", this.m_motorSpeed), t1("  jd.maxMotorTorque = %.15f;\n", this.m_maxMotorTorque), t1("  joints[%d] = this.m_world.CreateJoint(jd);\n", this.m_index);
                    }, s;
                }(Ln);
                _$Zn.InitVelocityConstraints_s_P = new _$z, _$Zn.SolveVelocityConstraints_s_P = new _$z, _$Zn.SolveVelocityConstraints_s_Cdot_v2 = new _$z, _$Zn.SolveVelocityConstraints_s_Cdot1 = new _$z, _$Zn.SolveVelocityConstraints_s_impulse_v3 = new _$X, _$Zn.SolveVelocityConstraints_s_reduced_v2 = new _$z, _$Zn.SolveVelocityConstraints_s_impulse_v2 = new _$z, _$Zn.SolvePositionConstraints_s_C_v2 = new _$z, _$Zn.SolvePositionConstraints_s_impulse = new _$z;
                var _$ts = function(i) {
                    function n() {
                        var _$n;
                        return (_$n = i.call(this, t1.b2JointType.e_ropeJoint) || this).localAnchorA = new _$z(-1, 0), _$n.localAnchorB = new _$z(1, 0), _$n.maxLength = 0, _$n;
                    }
                    return h(n, i), n;
                }(Dn), _$is = function(n) {
                    function s(s) {
                        var _$r;
                        return (_$r = n.call(this, s) || this).m_localAnchorA = new _$z, _$r.m_localAnchorB = new _$z, _$r.m_maxLength = 0, _$r.m_length = 0, _$r.m_impulse = 0, _$r.m_indexA = 0, _$r.m_indexB = 0, _$r.m_u = new _$z, _$r.m_rA = new _$z, _$r.m_rB = new _$z, _$r.m_localCenterA = new _$z, _$r.m_localCenterB = new _$z, _$r.m_invMassA = 0, _$r.m_invMassB = 0, _$r.m_invIA = 0, _$r.m_invIB = 0, _$r.m_mass = 0, _$r.m_state = t1.b2LimitState.e_inactiveLimit, _$r.m_qA = new _$K, _$r.m_qB = new _$K, _$r.m_lalcA = new _$z, _$r.m_lalcB = new _$z, _$r.m_localAnchorA.Copy(i(s.localAnchorA, new _$z(-1, 0))), _$r.m_localAnchorB.Copy(i(s.localAnchorB, new _$z(1, 0))), _$r.m_maxLength = i(s.maxLength, 0), _$r;
                    }
                    h(s, n);
                    var _$r = s.prototype;
                    return _$r.InitVelocityConstraints = function(i) {
                        this.m_indexA = this.m_bodyA.m_islandIndex, this.m_indexB = this.m_bodyB.m_islandIndex, this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter), this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter), this.m_invMassA = this.m_bodyA.m_invMass, this.m_invMassB = this.m_bodyB.m_invMass, this.m_invIA = this.m_bodyA.m_invI, this.m_invIB = this.m_bodyB.m_invI;
                        var _$n = i.positions[this.m_indexA].c, _$r = i.positions[this.m_indexA].a, _$h = i.velocities[this.m_indexA].v, e = i.velocities[this.m_indexA].w, u = i.positions[this.m_indexB].c, o = i.positions[this.m_indexB].a, f = i.velocities[this.m_indexB].v, a = i.velocities[this.m_indexB].w, v = this.m_qA.SetAngle(_$r), l = this.m_qB.SetAngle(o);
                        _$z.SubVV(this.m_localAnchorA, this.m_localCenterA, this.m_lalcA), _$K.MulRV(v, this.m_lalcA, this.m_rA), _$z.SubVV(this.m_localAnchorB, this.m_localCenterB, this.m_lalcB), _$K.MulRV(l, this.m_lalcB, this.m_rB), this.m_u.Copy(u).SelfAdd(this.m_rB).SelfSub(_$n).SelfSub(this.m_rA), this.m_length = this.m_u.Length();
                        var _$d = this.m_length - this.m_maxLength;
                        if (this.m_state = _$d > 0 ? t1.b2LimitState.e_atUpperLimit : t1.b2LimitState.e_inactiveLimit, !(this.m_length > .008)) return this.m_u.SetZero(), this.m_mass = 0, void (this.m_impulse = 0);
                        this.m_u.SelfMul(1 / this.m_length);
                        var w = _$z.CrossVV(this.m_rA, this.m_u), g = _$z.CrossVV(this.m_rB, this.m_u), p = this.m_invMassA + this.m_invIA * w * w + this.m_invMassB + this.m_invIB * g * g;
                        if (this.m_mass = 0 !== p ? 1 / p : 0, i.step.warmStarting) {
                            this.m_impulse *= i.step.dtRatio;
                            var _$y = _$z.MulSV(this.m_impulse, this.m_u, s.InitVelocityConstraints_s_P);
                            _$h.SelfMulSub(this.m_invMassA, _$y), e -= this.m_invIA * _$z.CrossVV(this.m_rA, _$y), f.SelfMulAdd(this.m_invMassB, _$y), a += this.m_invIB * _$z.CrossVV(this.m_rB, _$y);
                        } else this.m_impulse = 0;
                        i.velocities[this.m_indexA].w = e, i.velocities[this.m_indexB].w = a;
                    }, _$r.SolveVelocityConstraints = function(t1) {
                        var _$i = t1.velocities[this.m_indexA].v, _$n = t1.velocities[this.m_indexA].w, _$r = t1.velocities[this.m_indexB].v, _$h = t1.velocities[this.m_indexB].w, e = _$z.AddVCrossSV(_$i, _$n, this.m_rA, s.SolveVelocityConstraints_s_vpA), u = _$z.AddVCrossSV(_$r, _$h, this.m_rB, s.SolveVelocityConstraints_s_vpB), o = this.m_length - this.m_maxLength, f = _$z.DotVV(this.m_u, _$z.SubVV(u, e, _$z.s_t0));
                        o < 0 && (f += t1.step.inv_dt * o);
                        var _$c = -this.m_mass * f, a = this.m_impulse;
                        this.m_impulse = N(0, this.m_impulse + _$c), _$c = this.m_impulse - a;
                        var v = _$z.MulSV(_$c, this.m_u, s.SolveVelocityConstraints_s_P);
                        _$i.SelfMulSub(this.m_invMassA, v), _$n -= this.m_invIA * _$z.CrossVV(this.m_rA, v), _$r.SelfMulAdd(this.m_invMassB, v), _$h += this.m_invIB * _$z.CrossVV(this.m_rB, v), t1.velocities[this.m_indexA].w = _$n, t1.velocities[this.m_indexB].w = _$h;
                    }, _$r.SolvePositionConstraints = function(t1) {
                        var _$i = t1.positions[this.m_indexA].c, _$n = t1.positions[this.m_indexA].a, _$r = t1.positions[this.m_indexB].c, _$h = t1.positions[this.m_indexB].a, e = this.m_qA.SetAngle(_$n), u = this.m_qB.SetAngle(_$h);
                        _$z.SubVV(this.m_localAnchorA, this.m_localCenterA, this.m_lalcA);
                        var o = _$K.MulRV(e, this.m_lalcA, this.m_rA);
                        _$z.SubVV(this.m_localAnchorB, this.m_localCenterB, this.m_lalcB);
                        var f = _$K.MulRV(u, this.m_lalcB, this.m_rB), a = this.m_u.Copy(_$r).SelfAdd(f).SelfSub(_$i).SelfSub(o), v = a.Normalize(), _$d = v - this.m_maxLength;
                        _$d = D(_$d, 0, .2);
                        var w = -this.m_mass * _$d, g = _$z.MulSV(w, a, s.SolvePositionConstraints_s_P);
                        return _$i.SelfMulSub(this.m_invMassA, g), _$n -= this.m_invIA * _$z.CrossVV(o, g), _$r.SelfMulAdd(this.m_invMassB, g), _$h += this.m_invIB * _$z.CrossVV(f, g), t1.positions[this.m_indexA].a = _$n, t1.positions[this.m_indexB].a = _$h, v - this.m_maxLength < .008;
                    }, _$r.GetAnchorA = function(t1) {
                        return this.m_bodyA.GetWorldPoint(this.m_localAnchorA, t1);
                    }, _$r.GetAnchorB = function(t1) {
                        return this.m_bodyB.GetWorldPoint(this.m_localAnchorB, t1);
                    }, _$r.GetReactionForce = function(t1, i) {
                        return _$z.MulSV(t1 * this.m_impulse, this.m_u, i);
                    }, _$r.GetReactionTorque = function() {
                        return 0;
                    }, _$r.GetLocalAnchorA = function() {
                        return this.m_localAnchorA;
                    }, _$r.GetLocalAnchorB = function() {
                        return this.m_localAnchorB;
                    }, _$r.SetMaxLength = function(t1) {
                        this.m_maxLength = t1;
                    }, _$r.GetMaxLength = function() {
                        return this.m_maxLength;
                    }, _$r.GetLimitState = function() {
                        return this.m_state;
                    }, _$r.Dump = function(t1) {
                        var _$i = this.m_bodyA.m_islandIndex, _$n = this.m_bodyB.m_islandIndex;
                        t1("  const jd: b2RopeJointDef = new b2RopeJointDef();\n"), t1("  jd.bodyA = bodies[%d];\n", _$i), t1("  jd.bodyB = bodies[%d];\n", _$n), t1("  jd.collideConnected = %s;\n", this.m_collideConnected ? "true" : "false"), t1("  jd.localAnchorA.Set(%.15f, %.15f);\n", this.m_localAnchorA.x, this.m_localAnchorA.y), t1("  jd.localAnchorB.Set(%.15f, %.15f);\n", this.m_localAnchorB.x, this.m_localAnchorB.y), t1("  jd.maxLength = %.15f;\n", this.m_maxLength), t1("  joints[%d] = this.m_world.CreateJoint(jd);\n", this.m_index);
                    }, s;
                }(Ln);
                _$is.InitVelocityConstraints_s_P = new _$z, _$is.SolveVelocityConstraints_s_vpA = new _$z, _$is.SolveVelocityConstraints_s_vpB = new _$z, _$is.SolveVelocityConstraints_s_P = new _$z, _$is.SolvePositionConstraints_s_P = new _$z;
                var _$ns = function(i) {
                    function n() {
                        var _$n;
                        return (_$n = i.call(this, t1.b2JointType.e_weldJoint) || this).localAnchorA = new _$z, _$n.localAnchorB = new _$z, _$n.referenceAngle = 0, _$n.frequencyHz = 0, _$n.dampingRatio = 0, _$n;
                    }
                    return h(n, i), n.prototype.Initialize = function(t1, i, n) {
                        this.bodyA = t1, this.bodyB = i, this.bodyA.GetLocalPoint(n, this.localAnchorA), this.bodyB.GetLocalPoint(n, this.localAnchorB), this.referenceAngle = this.bodyB.GetAngle() - this.bodyA.GetAngle();
                    }, n;
                }(Dn), ss = function(t1) {
                    function n(n) {
                        var s;
                        return (s = t1.call(this, n) || this).m_frequencyHz = 0, s.m_dampingRatio = 0, s.m_bias = 0, s.m_localAnchorA = new _$z, s.m_localAnchorB = new _$z, s.m_referenceAngle = 0, s.m_gamma = 0, s.m_impulse = new _$X(0, 0, 0), s.m_indexA = 0, s.m_indexB = 0, s.m_rA = new _$z, s.m_rB = new _$z, s.m_localCenterA = new _$z, s.m_localCenterB = new _$z, s.m_invMassA = 0, s.m_invMassB = 0, s.m_invIA = 0, s.m_invIB = 0, s.m_mass = new _$Y, s.m_qA = new _$K, s.m_qB = new _$K, s.m_lalcA = new _$z, s.m_lalcB = new _$z, s.m_K = new _$Y, s.m_frequencyHz = i(n.frequencyHz, 0), s.m_dampingRatio = i(n.dampingRatio, 0), s.m_localAnchorA.Copy(i(n.localAnchorA, _$z.ZERO)), s.m_localAnchorB.Copy(i(n.localAnchorB, _$z.ZERO)), s.m_referenceAngle = i(n.referenceAngle, 0), s.m_impulse.SetZero(), s;
                    }
                    h(n, t1);
                    var s = n.prototype;
                    return s.InitVelocityConstraints = function(t1) {
                        this.m_indexA = this.m_bodyA.m_islandIndex, this.m_indexB = this.m_bodyB.m_islandIndex, this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter), this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter), this.m_invMassA = this.m_bodyA.m_invMass, this.m_invMassB = this.m_bodyB.m_invMass, this.m_invIA = this.m_bodyA.m_invI, this.m_invIB = this.m_bodyB.m_invI;
                        var _$i = t1.positions[this.m_indexA].a, s = t1.velocities[this.m_indexA].v, _$r = t1.velocities[this.m_indexA].w, _$h = t1.positions[this.m_indexB].a, e = t1.velocities[this.m_indexB].v, o = t1.velocities[this.m_indexB].w, f = this.m_qA.SetAngle(_$i), _$c = this.m_qB.SetAngle(_$h);
                        _$z.SubVV(this.m_localAnchorA, this.m_localCenterA, this.m_lalcA), _$K.MulRV(f, this.m_lalcA, this.m_rA), _$z.SubVV(this.m_localAnchorB, this.m_localCenterB, this.m_lalcB), _$K.MulRV(_$c, this.m_lalcB, this.m_rB);
                        var a = this.m_invMassA, v = this.m_invMassB, l = this.m_invIA, _$d = this.m_invIB, w = this.m_K;
                        if (w.ex.x = a + v + this.m_rA.y * this.m_rA.y * l + this.m_rB.y * this.m_rB.y * _$d, w.ey.x = -this.m_rA.y * this.m_rA.x * l - this.m_rB.y * this.m_rB.x * _$d, w.ez.x = -this.m_rA.y * l - this.m_rB.y * _$d, w.ex.y = w.ey.x, w.ey.y = a + v + this.m_rA.x * this.m_rA.x * l + this.m_rB.x * this.m_rB.x * _$d, w.ez.y = this.m_rA.x * l + this.m_rB.x * _$d, w.ex.z = w.ez.x, w.ey.z = w.ez.y, w.ez.z = l + _$d, this.m_frequencyHz > 0) {
                            w.GetInverse22(this.m_mass);
                            var g = l + _$d, p = g > 0 ? 1 / g : 0, _$y = _$h - _$i - this.m_referenceAngle, _$_ = 6.28318530718 * this.m_frequencyHz, m = 2 * p * this.m_dampingRatio * _$_, b = p * _$_ * _$_, k = t1.step.dt;
                            this.m_gamma = k * (m + k * b), this.m_gamma = 0 !== this.m_gamma ? 1 / this.m_gamma : 0, this.m_bias = _$y * k * b * this.m_gamma, g += this.m_gamma, this.m_mass.ez.z = 0 !== g ? 1 / g : 0;
                        } else w.GetSymInverse33(this.m_mass), this.m_gamma = 0, this.m_bias = 0;
                        if (t1.step.warmStarting) {
                            this.m_impulse.SelfMul(t1.step.dtRatio);
                            var A = n.InitVelocityConstraints_s_P.Set(this.m_impulse.x, this.m_impulse.y);
                            s.SelfMulSub(a, A), _$r -= l * (_$z.CrossVV(this.m_rA, A) + this.m_impulse.z), e.SelfMulAdd(v, A), o += _$d * (_$z.CrossVV(this.m_rB, A) + this.m_impulse.z);
                        } else this.m_impulse.SetZero();
                        t1.velocities[this.m_indexA].w = _$r, t1.velocities[this.m_indexB].w = o;
                    }, s.SolveVelocityConstraints = function(t1) {
                        var _$i = t1.velocities[this.m_indexA].v, s = t1.velocities[this.m_indexA].w, _$r = t1.velocities[this.m_indexB].v, _$h = t1.velocities[this.m_indexB].w, e = this.m_invMassA, u = this.m_invMassB, o = this.m_invIA, f = this.m_invIB;
                        if (this.m_frequencyHz > 0) {
                            var _$c = _$h - s, a = -this.m_mass.ez.z * (_$c + this.m_bias + this.m_gamma * this.m_impulse.z);
                            this.m_impulse.z += a, s -= o * a, _$h += f * a;
                            var v = _$z.SubVV(_$z.AddVCrossSV(_$r, _$h, this.m_rB, _$z.s_t0), _$z.AddVCrossSV(_$i, s, this.m_rA, _$z.s_t1), n.SolveVelocityConstraints_s_Cdot1), l = _$Y.MulM33XY(this.m_mass, v.x, v.y, n.SolveVelocityConstraints_s_impulse1).SelfNeg();
                            this.m_impulse.x += l.x, this.m_impulse.y += l.y, _$i.SelfMulSub(e, l), s -= o * _$z.CrossVV(this.m_rA, l), _$r.SelfMulAdd(u, l), _$h += f * _$z.CrossVV(this.m_rB, l);
                        } else {
                            var w = _$z.SubVV(_$z.AddVCrossSV(_$r, _$h, this.m_rB, _$z.s_t0), _$z.AddVCrossSV(_$i, s, this.m_rA, _$z.s_t1), n.SolveVelocityConstraints_s_Cdot1), g = _$h - s, p = _$Y.MulM33XYZ(this.m_mass, w.x, w.y, g, n.SolveVelocityConstraints_s_impulse).SelfNeg();
                            this.m_impulse.SelfAdd(p);
                            var _$y = n.SolveVelocityConstraints_s_P.Set(p.x, p.y);
                            _$i.SelfMulSub(e, _$y), s -= o * (_$z.CrossVV(this.m_rA, _$y) + p.z), _$r.SelfMulAdd(u, _$y), _$h += f * (_$z.CrossVV(this.m_rB, _$y) + p.z);
                        }
                        t1.velocities[this.m_indexA].w = s, t1.velocities[this.m_indexB].w = _$h;
                    }, s.SolvePositionConstraints = function(t1) {
                        var _$i = t1.positions[this.m_indexA].c, s = t1.positions[this.m_indexA].a, _$r = t1.positions[this.m_indexB].c, _$h = t1.positions[this.m_indexB].a, e = this.m_qA.SetAngle(s), u = this.m_qB.SetAngle(_$h), o = this.m_invMassA, f = this.m_invMassB, v = this.m_invIA, l = this.m_invIB;
                        _$z.SubVV(this.m_localAnchorA, this.m_localCenterA, this.m_lalcA);
                        var _$d = _$K.MulRV(e, this.m_lalcA, this.m_rA);
                        _$z.SubVV(this.m_localAnchorB, this.m_localCenterB, this.m_lalcB);
                        var w, g, p = _$K.MulRV(u, this.m_lalcB, this.m_rB), _$y = this.m_K;
                        if (_$y.ex.x = o + f + _$d.y * _$d.y * v + p.y * p.y * l, _$y.ey.x = -_$d.y * _$d.x * v - p.y * p.x * l, _$y.ez.x = -_$d.y * v - p.y * l, _$y.ex.y = _$y.ey.x, _$y.ey.y = o + f + _$d.x * _$d.x * v + p.x * p.x * l, _$y.ez.y = _$d.x * v + p.x * l, _$y.ex.z = _$y.ez.x, _$y.ey.z = _$y.ez.y, _$y.ez.z = v + l, this.m_frequencyHz > 0) {
                            var _$_ = _$z.SubVV(_$z.AddVV(_$r, p, _$z.s_t0), _$z.AddVV(_$i, _$d, _$z.s_t1), n.SolvePositionConstraints_s_C1);
                            w = _$_.Length(), g = 0;
                            var m = _$y.Solve22(_$_.x, _$_.y, n.SolvePositionConstraints_s_P).SelfNeg();
                            _$i.SelfMulSub(o, m), s -= v * _$z.CrossVV(_$d, m), _$r.SelfMulAdd(f, m), _$h += l * _$z.CrossVV(p, m);
                        } else {
                            var b = _$z.SubVV(_$z.AddVV(_$r, p, _$z.s_t0), _$z.AddVV(_$i, _$d, _$z.s_t1), n.SolvePositionConstraints_s_C1), k = _$h - s - this.m_referenceAngle;
                            w = b.Length(), g = _$C(k);
                            var A = _$y.Solve33(b.x, b.y, k, n.SolvePositionConstraints_s_impulse).SelfNeg(), E = n.SolvePositionConstraints_s_P.Set(A.x, A.y);
                            _$i.SelfMulSub(o, E), s -= v * (_$z.CrossVV(this.m_rA, E) + A.z), _$r.SelfMulAdd(f, E), _$h += l * (_$z.CrossVV(this.m_rB, E) + A.z);
                        }
                        return t1.positions[this.m_indexA].a = s, t1.positions[this.m_indexB].a = _$h, w <= .008 && g <= a;
                    }, s.GetAnchorA = function(t1) {
                        return this.m_bodyA.GetWorldPoint(this.m_localAnchorA, t1);
                    }, s.GetAnchorB = function(t1) {
                        return this.m_bodyB.GetWorldPoint(this.m_localAnchorB, t1);
                    }, s.GetReactionForce = function(t1, i) {
                        return i.x = t1 * this.m_impulse.x, i.y = t1 * this.m_impulse.y, i;
                    }, s.GetReactionTorque = function(t1) {
                        return t1 * this.m_impulse.z;
                    }, s.GetLocalAnchorA = function() {
                        return this.m_localAnchorA;
                    }, s.GetLocalAnchorB = function() {
                        return this.m_localAnchorB;
                    }, s.GetReferenceAngle = function() {
                        return this.m_referenceAngle;
                    }, s.SetFrequency = function(t1) {
                        this.m_frequencyHz = t1;
                    }, s.GetFrequency = function() {
                        return this.m_frequencyHz;
                    }, s.SetDampingRatio = function(t1) {
                        this.m_dampingRatio = t1;
                    }, s.GetDampingRatio = function() {
                        return this.m_dampingRatio;
                    }, s.Dump = function(t1) {
                        var _$i = this.m_bodyA.m_islandIndex, _$n = this.m_bodyB.m_islandIndex;
                        t1("  const jd: b2WeldJointDef = new b2WeldJointDef();\n"), t1("  jd.bodyA = bodies[%d];\n", _$i), t1("  jd.bodyB = bodies[%d];\n", _$n), t1("  jd.collideConnected = %s;\n", this.m_collideConnected ? "true" : "false"), t1("  jd.localAnchorA.Set(%.15f, %.15f);\n", this.m_localAnchorA.x, this.m_localAnchorA.y), t1("  jd.localAnchorB.Set(%.15f, %.15f);\n", this.m_localAnchorB.x, this.m_localAnchorB.y), t1("  jd.referenceAngle = %.15f;\n", this.m_referenceAngle), t1("  jd.frequencyHz = %.15f;\n", this.m_frequencyHz), t1("  jd.dampingRatio = %.15f;\n", this.m_dampingRatio), t1("  joints[%d] = this.m_world.CreateJoint(jd);\n", this.m_index);
                    }, n;
                }(Ln);
                ss.InitVelocityConstraints_s_P = new _$z, ss.SolveVelocityConstraints_s_Cdot1 = new _$z, ss.SolveVelocityConstraints_s_impulse1 = new _$z, ss.SolveVelocityConstraints_s_impulse = new _$X, ss.SolveVelocityConstraints_s_P = new _$z, ss.SolvePositionConstraints_s_C1 = new _$z, ss.SolvePositionConstraints_s_P = new _$z, ss.SolvePositionConstraints_s_impulse = new _$X;
                var rs = function(i) {
                    function n() {
                        var _$n;
                        return (_$n = i.call(this, t1.b2JointType.e_wheelJoint) || this).localAnchorA = new _$z(0, 0), _$n.localAnchorB = new _$z(0, 0), _$n.localAxisA = new _$z(1, 0), _$n.enableMotor = !1, _$n.maxMotorTorque = 0, _$n.motorSpeed = 0, _$n.frequencyHz = 2, _$n.dampingRatio = .7, _$n;
                    }
                    return h(n, i), n.prototype.Initialize = function(t1, i, n, s) {
                        this.bodyA = t1, this.bodyB = i, this.bodyA.GetLocalPoint(n, this.localAnchorA), this.bodyB.GetLocalPoint(n, this.localAnchorB), this.bodyA.GetLocalVector(s, this.localAxisA);
                    }, n;
                }(Dn), hs = function(t1) {
                    function n(n) {
                        var s;
                        return (s = t1.call(this, n) || this).m_frequencyHz = 0, s.m_dampingRatio = 0, s.m_localAnchorA = new _$z, s.m_localAnchorB = new _$z, s.m_localXAxisA = new _$z, s.m_localYAxisA = new _$z, s.m_impulse = 0, s.m_motorImpulse = 0, s.m_springImpulse = 0, s.m_maxMotorTorque = 0, s.m_motorSpeed = 0, s.m_enableMotor = !1, s.m_indexA = 0, s.m_indexB = 0, s.m_localCenterA = new _$z, s.m_localCenterB = new _$z, s.m_invMassA = 0, s.m_invMassB = 0, s.m_invIA = 0, s.m_invIB = 0, s.m_ax = new _$z, s.m_ay = new _$z, s.m_sAx = 0, s.m_sBx = 0, s.m_sAy = 0, s.m_sBy = 0, s.m_mass = 0, s.m_motorMass = 0, s.m_springMass = 0, s.m_bias = 0, s.m_gamma = 0, s.m_qA = new _$K, s.m_qB = new _$K, s.m_lalcA = new _$z, s.m_lalcB = new _$z, s.m_rA = new _$z, s.m_rB = new _$z, s.m_frequencyHz = i(n.frequencyHz, 2), s.m_dampingRatio = i(n.dampingRatio, .7), s.m_localAnchorA.Copy(i(n.localAnchorA, _$z.ZERO)), s.m_localAnchorB.Copy(i(n.localAnchorB, _$z.ZERO)), s.m_localXAxisA.Copy(i(n.localAxisA, _$z.UNITX)), _$z.CrossOneV(s.m_localXAxisA, s.m_localYAxisA), s.m_maxMotorTorque = i(n.maxMotorTorque, 0), s.m_motorSpeed = i(n.motorSpeed, 0), s.m_enableMotor = i(n.enableMotor, !1), s.m_ax.SetZero(), s.m_ay.SetZero(), s;
                    }
                    h(n, t1);
                    var s = n.prototype;
                    return s.GetMotorSpeed = function() {
                        return this.m_motorSpeed;
                    }, s.GetMaxMotorTorque = function() {
                        return this.m_maxMotorTorque;
                    }, s.SetSpringFrequencyHz = function(t1) {
                        this.m_frequencyHz = t1;
                    }, s.GetSpringFrequencyHz = function() {
                        return this.m_frequencyHz;
                    }, s.SetSpringDampingRatio = function(t1) {
                        this.m_dampingRatio = t1;
                    }, s.GetSpringDampingRatio = function() {
                        return this.m_dampingRatio;
                    }, s.InitVelocityConstraints = function(t1) {
                        this.m_indexA = this.m_bodyA.m_islandIndex, this.m_indexB = this.m_bodyB.m_islandIndex, this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter), this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter), this.m_invMassA = this.m_bodyA.m_invMass, this.m_invMassB = this.m_bodyB.m_invMass, this.m_invIA = this.m_bodyA.m_invI, this.m_invIB = this.m_bodyB.m_invI;
                        var _$i = this.m_invMassA, s = this.m_invMassB, _$r = this.m_invIA, _$h = this.m_invIB, e = t1.positions[this.m_indexA].c, o = t1.positions[this.m_indexA].a, f = t1.velocities[this.m_indexA].v, _$c = t1.velocities[this.m_indexA].w, a = t1.positions[this.m_indexB].c, v = t1.positions[this.m_indexB].a, l = t1.velocities[this.m_indexB].v, _$d = t1.velocities[this.m_indexB].w, w = this.m_qA.SetAngle(o), g = this.m_qB.SetAngle(v);
                        _$z.SubVV(this.m_localAnchorA, this.m_localCenterA, this.m_lalcA);
                        var p = _$K.MulRV(w, this.m_lalcA, this.m_rA);
                        _$z.SubVV(this.m_localAnchorB, this.m_localCenterB, this.m_lalcB);
                        var _$y = _$K.MulRV(g, this.m_lalcB, this.m_rB), _$_ = _$z.SubVV(_$z.AddVV(a, _$y, _$z.s_t0), _$z.AddVV(e, p, _$z.s_t1), n.InitVelocityConstraints_s_d);
                        if (_$K.MulRV(w, this.m_localYAxisA, this.m_ay), this.m_sAy = _$z.CrossVV(_$z.AddVV(_$_, p, _$z.s_t0), this.m_ay), this.m_sBy = _$z.CrossVV(_$y, this.m_ay), this.m_mass = _$i + s + _$r * this.m_sAy * this.m_sAy + _$h * this.m_sBy * this.m_sBy, this.m_mass > 0 && (this.m_mass = 1 / this.m_mass), this.m_springMass = 0, this.m_bias = 0, this.m_gamma = 0, this.m_frequencyHz > 0) {
                            _$K.MulRV(w, this.m_localXAxisA, this.m_ax), this.m_sAx = _$z.CrossVV(_$z.AddVV(_$_, p, _$z.s_t0), this.m_ax), this.m_sBx = _$z.CrossVV(_$y, this.m_ax);
                            var m = _$i + s + _$r * this.m_sAx * this.m_sAx + _$h * this.m_sBx * this.m_sBx;
                            if (m > 0) {
                                this.m_springMass = 1 / m;
                                var b = _$z.DotVV(_$_, this.m_ax), k = 6.28318530718 * this.m_frequencyHz, A = 2 * this.m_springMass * this.m_dampingRatio * k, E = this.m_springMass * k * k, T = t1.step.dt;
                                this.m_gamma = T * (A + T * E), this.m_gamma > 0 && (this.m_gamma = 1 / this.m_gamma), this.m_bias = b * T * E * this.m_gamma, this.m_springMass = m + this.m_gamma, this.m_springMass > 0 && (this.m_springMass = 1 / this.m_springMass);
                            }
                        } else this.m_springImpulse = 0;
                        if (this.m_enableMotor ? (this.m_motorMass = _$r + _$h, this.m_motorMass > 0 && (this.m_motorMass = 1 / this.m_motorMass)) : (this.m_motorMass = 0, this.m_motorImpulse = 0), t1.step.warmStarting) {
                            this.m_impulse *= t1.step.dtRatio, this.m_springImpulse *= t1.step.dtRatio, this.m_motorImpulse *= t1.step.dtRatio;
                            var _$S = _$z.AddVV(_$z.MulSV(this.m_impulse, this.m_ay, _$z.s_t0), _$z.MulSV(this.m_springImpulse, this.m_ax, _$z.s_t1), n.InitVelocityConstraints_s_P), _$O = this.m_impulse * this.m_sAy + this.m_springImpulse * this.m_sAx + this.m_motorImpulse, _$I = this.m_impulse * this.m_sBy + this.m_springImpulse * this.m_sBx + this.m_motorImpulse;
                            f.SelfMulSub(this.m_invMassA, _$S), _$c -= this.m_invIA * _$O, l.SelfMulAdd(this.m_invMassB, _$S), _$d += this.m_invIB * _$I;
                        } else this.m_impulse = 0, this.m_springImpulse = 0, this.m_motorImpulse = 0;
                        t1.velocities[this.m_indexA].w = _$c, t1.velocities[this.m_indexB].w = _$d;
                    }, s.SolveVelocityConstraints = function(t1) {
                        var _$i = this.m_invMassA, s = this.m_invMassB, _$r = this.m_invIA, _$h = this.m_invIB, e = t1.velocities[this.m_indexA].v, u = t1.velocities[this.m_indexA].w, o = t1.velocities[this.m_indexB].v, f = t1.velocities[this.m_indexB].w, _$c = _$z.DotVV(this.m_ax, _$z.SubVV(o, e, _$z.s_t0)) + this.m_sBx * f - this.m_sAx * u, a = -this.m_springMass * (_$c + this.m_bias + this.m_gamma * this.m_springImpulse);
                        this.m_springImpulse += a;
                        var v = _$z.MulSV(a, this.m_ax, n.SolveVelocityConstraints_s_P), l = a * this.m_sAx, _$d = a * this.m_sBx;
                        e.SelfMulSub(_$i, v), u -= _$r * l, o.SelfMulAdd(s, v);
                        var w = (f += _$h * _$d) - u - this.m_motorSpeed, g = -this.m_motorMass * w, p = this.m_motorImpulse, _$y = t1.step.dt * this.m_maxMotorTorque;
                        this.m_motorImpulse = D(this.m_motorImpulse + g, -_$y, _$y), u -= _$r * (g = this.m_motorImpulse - p), f += _$h * g;
                        var _$_ = _$z.DotVV(this.m_ay, _$z.SubVV(o, e, _$z.s_t0)) + this.m_sBy * f - this.m_sAy * u, m = -this.m_mass * _$_;
                        this.m_impulse += m;
                        var b = _$z.MulSV(m, this.m_ay, n.SolveVelocityConstraints_s_P), k = m * this.m_sAy, A = m * this.m_sBy;
                        e.SelfMulSub(_$i, b), u -= _$r * k, o.SelfMulAdd(s, b), f += _$h * A, t1.velocities[this.m_indexA].w = u, t1.velocities[this.m_indexB].w = f;
                    }, s.SolvePositionConstraints = function(t1) {
                        var _$i = t1.positions[this.m_indexA].c, s = t1.positions[this.m_indexA].a, _$r = t1.positions[this.m_indexB].c, _$h = t1.positions[this.m_indexB].a, e = this.m_qA.SetAngle(s), u = this.m_qB.SetAngle(_$h);
                        _$z.SubVV(this.m_localAnchorA, this.m_localCenterA, this.m_lalcA);
                        var o = _$K.MulRV(e, this.m_lalcA, this.m_rA);
                        _$z.SubVV(this.m_localAnchorB, this.m_localCenterB, this.m_lalcB);
                        var f, a = _$K.MulRV(u, this.m_lalcB, this.m_rB), v = _$z.AddVV(_$z.SubVV(_$r, _$i, _$z.s_t0), _$z.SubVV(a, o, _$z.s_t1), n.SolvePositionConstraints_s_d), l = _$K.MulRV(e, this.m_localYAxisA, this.m_ay), _$d = _$z.CrossVV(_$z.AddVV(v, o, _$z.s_t0), l), w = _$z.CrossVV(a, l), g = _$z.DotVV(v, this.m_ay), p = this.m_invMassA + this.m_invMassB + this.m_invIA * this.m_sAy * this.m_sAy + this.m_invIB * this.m_sBy * this.m_sBy;
                        f = 0 !== p ? -g / p : 0;
                        var _$y = _$z.MulSV(f, l, n.SolvePositionConstraints_s_P), _$_ = f * _$d, m = f * w;
                        return _$i.SelfMulSub(this.m_invMassA, _$y), s -= this.m_invIA * _$_, _$r.SelfMulAdd(this.m_invMassB, _$y), _$h += this.m_invIB * m, t1.positions[this.m_indexA].a = s, t1.positions[this.m_indexB].a = _$h, .008 >= _$C(g);
                    }, s.GetDefinition = function(t1) {
                        return t1;
                    }, s.GetAnchorA = function(t1) {
                        return this.m_bodyA.GetWorldPoint(this.m_localAnchorA, t1);
                    }, s.GetAnchorB = function(t1) {
                        return this.m_bodyB.GetWorldPoint(this.m_localAnchorB, t1);
                    }, s.GetReactionForce = function(t1, i) {
                        return i.x = t1 * (this.m_impulse * this.m_ay.x + this.m_springImpulse * this.m_ax.x), i.y = t1 * (this.m_impulse * this.m_ay.y + this.m_springImpulse * this.m_ax.y), i;
                    }, s.GetReactionTorque = function(t1) {
                        return t1 * this.m_motorImpulse;
                    }, s.GetLocalAnchorA = function() {
                        return this.m_localAnchorA;
                    }, s.GetLocalAnchorB = function() {
                        return this.m_localAnchorB;
                    }, s.GetLocalAxisA = function() {
                        return this.m_localXAxisA;
                    }, s.GetJointTranslation = function() {
                        return this.GetPrismaticJointTranslation();
                    }, s.GetJointLinearSpeed = function() {
                        return this.GetPrismaticJointSpeed();
                    }, s.GetJointAngle = function() {
                        return this.GetRevoluteJointAngle();
                    }, s.GetJointAngularSpeed = function() {
                        return this.GetRevoluteJointSpeed();
                    }, s.GetPrismaticJointTranslation = function() {
                        var _$t = this.m_bodyA, _$i = this.m_bodyB, _$n = _$t.GetWorldPoint(this.m_localAnchorA, new _$z), s = _$i.GetWorldPoint(this.m_localAnchorB, new _$z), _$r = _$z.SubVV(s, _$n, new _$z), _$h = _$t.GetWorldVector(this.m_localXAxisA, new _$z);
                        return _$z.DotVV(_$r, _$h);
                    }, s.GetPrismaticJointSpeed = function() {
                        var _$t = this.m_bodyA, _$i = this.m_bodyB;
                        _$z.SubVV(this.m_localAnchorA, _$t.m_sweep.localCenter, this.m_lalcA);
                        var _$n = _$K.MulRV(_$t.m_xf.q, this.m_lalcA, this.m_rA);
                        _$z.SubVV(this.m_localAnchorB, _$i.m_sweep.localCenter, this.m_lalcB);
                        var s = _$K.MulRV(_$i.m_xf.q, this.m_lalcB, this.m_rB), _$r = _$z.AddVV(_$t.m_sweep.c, _$n, _$z.s_t0), _$h = _$z.AddVV(_$i.m_sweep.c, s, _$z.s_t1), e = _$z.SubVV(_$h, _$r, _$z.s_t2), u = _$t.GetWorldVector(this.m_localXAxisA, new _$z), o = _$t.m_linearVelocity, f = _$i.m_linearVelocity, _$c = _$t.m_angularVelocity, a = _$i.m_angularVelocity;
                        return _$z.DotVV(e, _$z.CrossSV(_$c, u, _$z.s_t0)) + _$z.DotVV(u, _$z.SubVV(_$z.AddVCrossSV(f, a, s, _$z.s_t0), _$z.AddVCrossSV(o, _$c, _$n, _$z.s_t1), _$z.s_t0));
                    }, s.GetRevoluteJointAngle = function() {
                        return this.m_bodyB.m_sweep.a - this.m_bodyA.m_sweep.a;
                    }, s.GetRevoluteJointSpeed = function() {
                        var _$t = this.m_bodyA.m_angularVelocity;
                        return this.m_bodyB.m_angularVelocity - _$t;
                    }, s.IsMotorEnabled = function() {
                        return this.m_enableMotor;
                    }, s.EnableMotor = function(t1) {
                        t1 !== this.m_enableMotor && (this.m_bodyA.SetAwake(!0), this.m_bodyB.SetAwake(!0), this.m_enableMotor = t1);
                    }, s.SetMotorSpeed = function(t1) {
                        t1 !== this.m_motorSpeed && (this.m_bodyA.SetAwake(!0), this.m_bodyB.SetAwake(!0), this.m_motorSpeed = t1);
                    }, s.SetMaxMotorTorque = function(t1) {
                        t1 !== this.m_maxMotorTorque && (this.m_bodyA.SetAwake(!0), this.m_bodyB.SetAwake(!0), this.m_maxMotorTorque = t1);
                    }, s.GetMotorTorque = function(t1) {
                        return t1 * this.m_motorImpulse;
                    }, s.Dump = function(t1) {
                        var _$i = this.m_bodyA.m_islandIndex, _$n = this.m_bodyB.m_islandIndex;
                        t1("  const jd: b2WheelJointDef = new b2WheelJointDef();\n"), t1("  jd.bodyA = bodies[%d];\n", _$i), t1("  jd.bodyB = bodies[%d];\n", _$n), t1("  jd.collideConnected = %s;\n", this.m_collideConnected ? "true" : "false"), t1("  jd.localAnchorA.Set(%.15f, %.15f);\n", this.m_localAnchorA.x, this.m_localAnchorA.y), t1("  jd.localAnchorB.Set(%.15f, %.15f);\n", this.m_localAnchorB.x, this.m_localAnchorB.y), t1("  jd.localAxisA.Set(%.15f, %.15f);\n", this.m_localXAxisA.x, this.m_localXAxisA.y), t1("  jd.enableMotor = %s;\n", this.m_enableMotor ? "true" : "false"), t1("  jd.motorSpeed = %.15f;\n", this.m_motorSpeed), t1("  jd.maxMotorTorque = %.15f;\n", this.m_maxMotorTorque), t1("  jd.frequencyHz = %.15f;\n", this.m_frequencyHz), t1("  jd.dampingRatio = %.15f;\n", this.m_dampingRatio), t1("  joints[%d] = this.m_world.CreateJoint(jd);\n", this.m_index);
                    }, n;
                }(Ln);
                function es(t1, i) {
                    return U(t1 * i);
                }
                function us(t1, i) {
                    return t1 > i ? t1 : i;
                }
                hs.InitVelocityConstraints_s_d = new _$z, hs.InitVelocityConstraints_s_P = new _$z, hs.SolveVelocityConstraints_s_P = new _$z, hs.SolvePositionConstraints_s_d = new _$z, hs.SolvePositionConstraints_s_P = new _$z;
                var _$os = function() {
                    function t1(t1) {
                        this._other = null, this.prev = null, this.next = null, this.contact = t1;
                    }
                    return t1.prototype.Reset = function() {
                        this._other = null, this.prev = null, this.next = null;
                    }, s(t1, [
                        {
                            key: "other",
                            get: function get() {
                                if (null === this._other) throw Error();
                                return this._other;
                            },
                            set: function set(t1) {
                                if (null !== this._other) throw Error();
                                this._other = t1;
                            }
                        }
                    ]), t1;
                }(), _$fs = function() {
                    function t1() {
                        this.m_islandFlag = !1, this.m_touchingFlag = !1, this.m_enabledFlag = !1, this.m_filterFlag = !1, this.m_bulletHitFlag = !1, this.m_toiFlag = !1, this.m_prev = null, this.m_next = null, this.m_nodeA = new _$os(this), this.m_nodeB = new _$os(this), this.m_indexA = 0, this.m_indexB = 0, this.m_manifold = new _$Dt, this.m_toiCount = 0, this.m_toi = 0, this.m_friction = 0, this.m_restitution = 0, this.m_tangentSpeed = 0, this.m_oldManifold = new _$Dt;
                    }
                    var _$i = t1.prototype;
                    return _$i.GetManifold = function() {
                        return this.m_manifold;
                    }, _$i.GetWorldManifold = function(t1) {
                        var _$i = this.m_fixtureA.GetBody(), n = this.m_fixtureB.GetBody(), s = this.GetShapeA(), _$r = this.GetShapeB();
                        t1.Initialize(this.m_manifold, _$i.GetTransform(), s.m_radius, n.GetTransform(), _$r.m_radius);
                    }, _$i.IsTouching = function() {
                        return this.m_touchingFlag;
                    }, _$i.SetEnabled = function(t1) {
                        this.m_enabledFlag = t1;
                    }, _$i.IsEnabled = function() {
                        return this.m_enabledFlag;
                    }, _$i.GetNext = function() {
                        return this.m_next;
                    }, _$i.GetFixtureA = function() {
                        return this.m_fixtureA;
                    }, _$i.GetChildIndexA = function() {
                        return this.m_indexA;
                    }, _$i.GetShapeA = function() {
                        return this.m_fixtureA.GetShape();
                    }, _$i.GetFixtureB = function() {
                        return this.m_fixtureB;
                    }, _$i.GetChildIndexB = function() {
                        return this.m_indexB;
                    }, _$i.GetShapeB = function() {
                        return this.m_fixtureB.GetShape();
                    }, _$i.FlagForFiltering = function() {
                        this.m_filterFlag = !0;
                    }, _$i.SetFriction = function(t1) {
                        this.m_friction = t1;
                    }, _$i.GetFriction = function() {
                        return this.m_friction;
                    }, _$i.ResetFriction = function() {
                        this.m_friction = U(this.m_fixtureA.m_friction * this.m_fixtureB.m_friction);
                    }, _$i.SetRestitution = function(t1) {
                        this.m_restitution = t1;
                    }, _$i.GetRestitution = function() {
                        return this.m_restitution;
                    }, _$i.ResetRestitution = function() {
                        this.m_restitution = us(this.m_fixtureA.m_restitution, this.m_fixtureB.m_restitution);
                    }, _$i.SetTangentSpeed = function(t1) {
                        this.m_tangentSpeed = t1;
                    }, _$i.GetTangentSpeed = function() {
                        return this.m_tangentSpeed;
                    }, _$i.Reset = function(t1, i, n, s) {
                        this.m_islandFlag = !1, this.m_touchingFlag = !1, this.m_enabledFlag = !0, this.m_filterFlag = !1, this.m_bulletHitFlag = !1, this.m_toiFlag = !1, this.m_fixtureA = t1, this.m_fixtureB = n, this.m_indexA = i, this.m_indexB = s, this.m_manifold.pointCount = 0, this.m_prev = null, this.m_next = null, this.m_nodeA.Reset(), this.m_nodeB.Reset(), this.m_toiCount = 0, this.m_friction = U(this.m_fixtureA.m_friction * this.m_fixtureB.m_friction), this.m_restitution = us(this.m_fixtureA.m_restitution, this.m_fixtureB.m_restitution);
                    }, _$i.Update = function(t1) {
                        var _$i = this.m_oldManifold;
                        this.m_oldManifold = this.m_manifold, this.m_manifold = _$i, this.m_enabledFlag = !0;
                        var n = !1, s = this.m_touchingFlag, _$r = this.m_fixtureA.IsSensor(), h = this.m_fixtureB.IsSensor(), e = _$r || h, u = this.m_fixtureA.GetBody(), o = this.m_fixtureB.GetBody(), f = u.GetTransform(), _$c = o.GetTransform();
                        if (e) {
                            var a = this.GetShapeA(), v = this.GetShapeB();
                            n = zt(a, this.m_indexA, v, this.m_indexB, f, _$c), this.m_manifold.pointCount = 0;
                        } else {
                            this.Evaluate(this.m_manifold, f, _$c), n = this.m_manifold.pointCount > 0;
                            for(var l = 0; l < this.m_manifold.pointCount; ++l){
                                var _$d = this.m_manifold.points[l];
                                _$d.normalImpulse = 0, _$d.tangentImpulse = 0;
                                for(var w = _$d.id, g = 0; g < this.m_oldManifold.pointCount; ++g){
                                    var p = this.m_oldManifold.points[g];
                                    if (p.id.key === w.key) {
                                        _$d.normalImpulse = p.normalImpulse, _$d.tangentImpulse = p.tangentImpulse;
                                        break;
                                    }
                                }
                            }
                            n !== s && (u.SetAwake(!0), o.SetAwake(!0));
                        }
                        this.m_touchingFlag = n, !s && n && t1 && t1.BeginContact(this), s && !n && t1 && t1.EndContact(this), !e && n && t1 && t1.PreSolve(this, this.m_oldManifold);
                    }, _$i.ComputeTOI = function(i, n) {
                        var s = t1.ComputeTOI_s_input;
                        s.proxyA.SetShape(this.GetShapeA(), this.m_indexA), s.proxyB.SetShape(this.GetShapeB(), this.m_indexB), s.sweepA.Copy(i), s.sweepB.Copy(n), s.tMax = .008;
                        var _$r = t1.ComputeTOI_s_output;
                        return ki(_$r, s), _$r.t;
                    }, t1;
                }();
                _$fs.ComputeTOI_s_input = new _$fi, _$fs.ComputeTOI_s_output = new ai;
                var cs = function(t1) {
                    function i() {
                        return t1.apply(this, arguments) || this;
                    }
                    return h(i, t1), i.Create = function() {
                        return new i;
                    }, i.Destroy = function() {}, i.prototype.Evaluate = function(t1, i, n) {
                        Ti(t1, this.GetShapeA(), i, this.GetShapeB(), n);
                    }, i;
                }(_$fs), as = function(t1) {
                    function i() {
                        return t1.apply(this, arguments) || this;
                    }
                    return h(i, t1), i.Create = function() {
                        return new i;
                    }, i.Destroy = function() {}, i.prototype.Evaluate = function(t1, i, n) {
                        Zi(t1, this.GetShapeA(), i, this.GetShapeB(), n);
                    }, i;
                }(_$fs), vs = function(t1) {
                    function i() {
                        return t1.apply(this, arguments) || this;
                    }
                    return h(i, t1), i.Create = function() {
                        return new i;
                    }, i.Destroy = function() {}, i.prototype.Evaluate = function(t1, i, n) {
                        Ri(t1, this.GetShapeA(), i, this.GetShapeB(), n);
                    }, i;
                }(_$fs), ls = function(t1) {
                    function i() {
                        return t1.apply(this, arguments) || this;
                    }
                    return h(i, t1), i.Create = function() {
                        return new i;
                    }, i.Destroy = function() {}, i.prototype.Evaluate = function(t1, i, n) {
                        cn(t1, this.GetShapeA(), i, this.GetShapeB(), n);
                    }, i;
                }(_$fs), ds = function(t1) {
                    function i() {
                        return t1.apply(this, arguments) || this;
                    }
                    return h(i, t1), i.Create = function() {
                        return new i;
                    }, i.Destroy = function() {}, i.prototype.Evaluate = function(t1, i, n) {
                        gn(t1, this.GetShapeA(), i, this.GetShapeB(), n);
                    }, i;
                }(_$fs), ws = function(t1) {
                    function i() {
                        return t1.apply(this, arguments) || this;
                    }
                    return h(i, t1), i.Create = function() {
                        return new i;
                    }, i.Destroy = function() {}, i.prototype.Evaluate = function(t1, n, s) {
                        var _$r = i.Evaluate_s_edge;
                        this.GetShapeA().GetChildEdge(_$r, this.m_indexA), cn(t1, _$r, n, this.GetShapeB(), s);
                    }, i;
                }(_$fs);
                ws.Evaluate_s_edge = new kn;
                var gs = function(t1) {
                    function i() {
                        return t1.apply(this, arguments) || this;
                    }
                    return h(i, t1), i.Create = function() {
                        return new i;
                    }, i.Destroy = function() {}, i.prototype.Evaluate = function(t1, n, s) {
                        var _$r = i.Evaluate_s_edge;
                        this.GetShapeA().GetChildEdge(_$r, this.m_indexA), gn(t1, _$r, n, this.GetShapeB(), s);
                    }, i;
                }(_$fs);
                gs.Evaluate_s_edge = new kn;
                var ps = function ps() {
                    this.pool = [], this.createFcn = null, this.destroyFcn = null, this.primary = !1;
                }, ys = function() {
                    function i() {
                        this.m_registers = [], this.InitializeRegisters();
                    }
                    var n = i.prototype;
                    return n.AddType = function(t1, i, n, s) {
                        var _$r = [];
                        function h() {
                            return _$r.pop() || t1();
                        }
                        function e(t1) {
                            _$r.push(t1);
                        }
                        this.m_registers[n][s].pool = _$r, this.m_registers[n][s].createFcn = h, this.m_registers[n][s].destroyFcn = e, this.m_registers[n][s].primary = !0, n !== s && (this.m_registers[s][n].pool = _$r, this.m_registers[s][n].createFcn = h, this.m_registers[s][n].destroyFcn = e, this.m_registers[s][n].primary = !1);
                    }, n.InitializeRegisters = function() {
                        for(var _$i = 0; _$i < t1.b2ShapeType.e_shapeTypeCount; _$i++){
                            this.m_registers[_$i] = [];
                            for(var n = 0; n < t1.b2ShapeType.e_shapeTypeCount; n++)this.m_registers[_$i][n] = new ps;
                        }
                        this.AddType(cs.Create, cs.Destroy, t1.b2ShapeType.e_circleShape, t1.b2ShapeType.e_circleShape), this.AddType(vs.Create, vs.Destroy, t1.b2ShapeType.e_polygonShape, t1.b2ShapeType.e_circleShape), this.AddType(as.Create, as.Destroy, t1.b2ShapeType.e_polygonShape, t1.b2ShapeType.e_polygonShape), this.AddType(ls.Create, ls.Destroy, t1.b2ShapeType.e_edgeShape, t1.b2ShapeType.e_circleShape), this.AddType(ds.Create, ds.Destroy, t1.b2ShapeType.e_edgeShape, t1.b2ShapeType.e_polygonShape), this.AddType(ws.Create, ws.Destroy, t1.b2ShapeType.e_chainShape, t1.b2ShapeType.e_circleShape), this.AddType(gs.Create, gs.Destroy, t1.b2ShapeType.e_chainShape, t1.b2ShapeType.e_polygonShape);
                    }, n.Create = function(t1, i, n, s) {
                        var _$r = t1.GetType(), h = n.GetType(), e = this.m_registers[_$r][h];
                        if (e.createFcn) {
                            var u = e.createFcn();
                            return e.primary ? u.Reset(t1, i, n, s) : u.Reset(n, s, t1, i), u;
                        }
                        return null;
                    }, n.Destroy = function(t1) {
                        var _$i = t1.m_fixtureA.GetType(), n = t1.m_fixtureB.GetType(), s = this.m_registers[_$i][n];
                        s.destroyFcn && s.destroyFcn(t1);
                    }, i;
                }(), _s = function() {
                    function t1() {}
                    var _$i = t1.prototype;
                    return _$i.SayGoodbyeJoint = function() {}, _$i.SayGoodbyeFixture = function() {}, _$i.SayGoodbyeParticleGroup = function() {}, _$i.SayGoodbyeParticle = function() {}, t1;
                }(), ms = function() {
                    function i() {}
                    var n = i.prototype;
                    return n.ShouldCollide = function(i, n) {
                        var s = i.GetBody(), _$r = n.GetBody();
                        if (_$r.GetType() === t1.b2BodyType.b2_staticBody && s.GetType() === t1.b2BodyType.b2_staticBody || !_$r.ShouldCollideConnected(s)) return !1;
                        var h = i.GetFilterData(), e = n.GetFilterData();
                        return h.groupIndex === e.groupIndex && 0 !== h.groupIndex ? h.groupIndex > 0 : !!(h.maskBits & e.categoryBits) && !!(h.categoryBits & e.maskBits);
                    }, n.ShouldCollideFixtureParticle = function() {
                        return !0;
                    }, n.ShouldCollideParticleParticle = function() {
                        return !0;
                    }, i;
                }();
                ms.b2_defaultFilter = new ms;
                var _$bs = function bs() {
                    this.normalImpulses = O(2), this.tangentImpulses = O(2), this.count = 0;
                }, ks = function() {
                    function t1() {}
                    var _$i = t1.prototype;
                    return _$i.BeginContact = function() {}, _$i.EndContact = function() {}, _$i.BeginContactFixtureParticle = function() {}, _$i.EndContactFixtureParticle = function() {}, _$i.BeginContactParticleParticle = function() {}, _$i.EndContactParticleParticle = function() {}, _$i.PreSolve = function() {}, _$i.PostSolve = function() {}, t1;
                }();
                ks.b2_defaultListener = new ks;
                var As = function() {
                    function t1() {}
                    var _$i = t1.prototype;
                    return _$i.ReportFixture = function() {
                        return !0;
                    }, _$i.ReportParticle = function() {
                        return !1;
                    }, _$i.ShouldQueryParticleSystem = function() {
                        return !0;
                    }, t1;
                }(), Es = function() {
                    function t1() {}
                    var _$i = t1.prototype;
                    return _$i.ReportFixture = function(t1, i, n, s) {
                        return s;
                    }, _$i.ReportParticle = function() {
                        return 0;
                    }, _$i.ShouldQueryParticleSystem = function() {
                        return !0;
                    }, t1;
                }(), Ts = function() {
                    function i() {
                        this.m_broadPhase = new _$Zt, this.m_contactList = null, this.m_contactCount = 0, this.m_contactFilter = ms.b2_defaultFilter, this.m_contactListener = ks.b2_defaultListener, this.m_contactFactory = new ys;
                    }
                    var n = i.prototype;
                    return n.AddPair = function(t1, i) {
                        var n = t1.fixture, s = i.fixture, _$r = t1.childIndex, h = i.childIndex, e = n.GetBody(), u = s.GetBody();
                        if (e !== u) {
                            for(var o = u.GetContactList(); o;){
                                if (o.other === e) {
                                    var f = o.contact.GetFixtureA(), _$c = o.contact.GetFixtureB(), a = o.contact.GetChildIndexA(), v = o.contact.GetChildIndexB();
                                    if (f === n && _$c === s && a === _$r && v === h || f === s && _$c === n && a === h && v === _$r) return;
                                }
                                o = o.next;
                            }
                            if (!this.m_contactFilter || this.m_contactFilter.ShouldCollide(n, s)) {
                                var l = this.m_contactFactory.Create(n, _$r, s, h);
                                null !== l && (n = l.GetFixtureA(), s = l.GetFixtureB(), _$r = l.GetChildIndexA(), h = l.GetChildIndexB(), e = n.m_body, u = s.m_body, l.m_prev = null, l.m_next = this.m_contactList, null !== this.m_contactList && (this.m_contactList.m_prev = l), this.m_contactList = l, l.m_nodeA.other = u, l.m_nodeA.prev = null, l.m_nodeA.next = e.m_contactList, null !== e.m_contactList && (e.m_contactList.prev = l.m_nodeA), e.m_contactList = l.m_nodeA, l.m_nodeB.other = e, l.m_nodeB.prev = null, l.m_nodeB.next = u.m_contactList, null !== u.m_contactList && (u.m_contactList.prev = l.m_nodeB), u.m_contactList = l.m_nodeB, n.IsSensor() || s.IsSensor() || (e.SetAwake(!0), u.SetAwake(!0)), ++this.m_contactCount);
                            }
                        }
                    }, n.FindNewContacts = function() {
                        var _$t = this;
                        this.m_broadPhase.UpdatePairs(function(i, n) {
                            _$t.AddPair(i, n);
                        });
                    }, n.Destroy = function(t1) {
                        var _$i = t1.GetFixtureA(), n = t1.GetFixtureB(), s = _$i.GetBody(), _$r = n.GetBody();
                        this.m_contactListener && t1.IsTouching() && this.m_contactListener.EndContact(t1), t1.m_prev && (t1.m_prev.m_next = t1.m_next), t1.m_next && (t1.m_next.m_prev = t1.m_prev), t1 === this.m_contactList && (this.m_contactList = t1.m_next), t1.m_nodeA.prev && (t1.m_nodeA.prev.next = t1.m_nodeA.next), t1.m_nodeA.next && (t1.m_nodeA.next.prev = t1.m_nodeA.prev), t1.m_nodeA === s.m_contactList && (s.m_contactList = t1.m_nodeA.next), t1.m_nodeB.prev && (t1.m_nodeB.prev.next = t1.m_nodeB.next), t1.m_nodeB.next && (t1.m_nodeB.next.prev = t1.m_nodeB.prev), t1.m_nodeB === _$r.m_contactList && (_$r.m_contactList = t1.m_nodeB.next), !(t1.m_manifold.pointCount > 0) || _$i.IsSensor() || n.IsSensor() || (_$i.GetBody().SetAwake(!0), n.GetBody().SetAwake(!0)), this.m_contactFactory.Destroy(t1), --this.m_contactCount;
                    }, n.Collide = function() {
                        for(var _$i = this.m_contactList; _$i;){
                            var n = _$i.GetFixtureA(), s = _$i.GetFixtureB(), _$r = _$i.GetChildIndexA(), h = _$i.GetChildIndexB(), e = n.GetBody(), u = s.GetBody();
                            if (_$i.m_filterFlag) {
                                if (this.m_contactFilter && !this.m_contactFilter.ShouldCollide(n, s)) {
                                    var o = _$i;
                                    _$i = o.m_next, this.Destroy(o);
                                    continue;
                                }
                                _$i.m_filterFlag = !1;
                            }
                            var f = e.IsAwake() && e.m_type !== t1.b2BodyType.b2_staticBody, _$c = u.IsAwake() && u.m_type !== t1.b2BodyType.b2_staticBody;
                            if (f || _$c) {
                                var a = n.m_proxies[_$r].treeNode, v = s.m_proxies[h].treeNode;
                                if (jt(a.aabb, v.aabb)) _$i.Update(this.m_contactListener), _$i = _$i.m_next;
                                else {
                                    var l = _$i;
                                    _$i = l.m_next, this.Destroy(l);
                                }
                            } else _$i = _$i.m_next;
                        }
                    }, i;
                }(), Ss = function() {
                    function t1() {
                        this.step = 0, this.collide = 0, this.solve = 0, this.solveInit = 0, this.solveVelocity = 0, this.solvePosition = 0, this.broadphase = 0, this.solveTOI = 0;
                    }
                    return t1.prototype.Reset = function() {
                        return this.step = 0, this.collide = 0, this.solve = 0, this.solveInit = 0, this.solveVelocity = 0, this.solvePosition = 0, this.broadphase = 0, this.solveTOI = 0, this;
                    }, t1;
                }(), _$Os = function() {
                    function t1() {
                        this.dt = 0, this.inv_dt = 0, this.dtRatio = 0, this.velocityIterations = 0, this.positionIterations = 0, this.particleIterations = 0, this.warmStarting = !1;
                    }
                    return t1.prototype.Copy = function(t1) {
                        return this.dt = t1.dt, this.inv_dt = t1.inv_dt, this.dtRatio = t1.dtRatio, this.positionIterations = t1.positionIterations, this.velocityIterations = t1.velocityIterations, this.particleIterations = t1.particleIterations, this.warmStarting = t1.warmStarting, this;
                    }, t1;
                }(), Is = function() {
                    function t1() {
                        this.c = new _$z, this.a = 0;
                    }
                    return t1.MakeArray = function(i) {
                        return S(i, function() {
                            return new t1;
                        });
                    }, t1;
                }(), Rs = function() {
                    function t1() {
                        this.v = new _$z, this.w = 0;
                    }
                    return t1.MakeArray = function(i) {
                        return S(i, function() {
                            return new t1;
                        });
                    }, t1;
                }(), Ms = function Ms() {
                    this.step = new _$Os;
                }, Ns = function() {
                    function t1() {
                        this.rA = new _$z, this.rB = new _$z, this.normalImpulse = 0, this.tangentImpulse = 0, this.normalMass = 0, this.tangentMass = 0, this.velocityBias = 0;
                    }
                    return t1.MakeArray = function(i) {
                        return S(i, function() {
                            return new t1;
                        });
                    }, t1;
                }(), Ps = function() {
                    function t1() {
                        this.points = Ns.MakeArray(2), this.normal = new _$z, this.tangent = new _$z, this.normalMass = new _$q, this.K = new _$q, this.indexA = 0, this.indexB = 0, this.invMassA = 0, this.invMassB = 0, this.invIA = 0, this.invIB = 0, this.friction = 0, this.restitution = 0, this.tangentSpeed = 0, this.pointCount = 0, this.contactIndex = 0;
                    }
                    return t1.MakeArray = function(i) {
                        return S(i, function() {
                            return new t1;
                        });
                    }, t1;
                }(), Ds = function() {
                    function i() {
                        this.localPoints = _$z.MakeArray(2), this.localNormal = new _$z, this.localPoint = new _$z, this.indexA = 0, this.indexB = 0, this.invMassA = 0, this.invMassB = 0, this.localCenterA = new _$z, this.localCenterB = new _$z, this.invIA = 0, this.invIB = 0, this.type = t1.b2ManifoldType.e_unknown, this.radiusA = 0, this.radiusB = 0, this.pointCount = 0;
                    }
                    return i.MakeArray = function(t1) {
                        return S(t1, function() {
                            return new i;
                        });
                    }, i;
                }(), Ls = function Ls() {
                    this.step = new _$Os, this.count = 0;
                }, Bs = function() {
                    function i() {
                        this.normal = new _$z, this.point = new _$z, this.separation = 0;
                    }
                    return i.prototype.Initialize = function(n, s, r, h) {
                        var e = i.Initialize_s_pointA, u = i.Initialize_s_pointB, o = i.Initialize_s_planePoint, f = i.Initialize_s_clipPoint;
                        switch(n.type){
                            case t1.b2ManifoldType.e_circles:
                                J.MulXV(s, n.localPoint, e), J.MulXV(r, n.localPoints[0], u), _$z.SubVV(u, e, this.normal).SelfNormalize(), _$z.MidVV(e, u, this.point), this.separation = _$z.DotVV(_$z.SubVV(u, e, _$z.s_t0), this.normal) - n.radiusA - n.radiusB;
                                break;
                            case t1.b2ManifoldType.e_faceA:
                                _$K.MulRV(s.q, n.localNormal, this.normal), J.MulXV(s, n.localPoint, o), J.MulXV(r, n.localPoints[h], f), this.separation = _$z.DotVV(_$z.SubVV(f, o, _$z.s_t0), this.normal) - n.radiusA - n.radiusB, this.point.Copy(f);
                                break;
                            case t1.b2ManifoldType.e_faceB:
                                _$K.MulRV(r.q, n.localNormal, this.normal), J.MulXV(r, n.localPoint, o), J.MulXV(s, n.localPoints[h], f), this.separation = _$z.DotVV(_$z.SubVV(f, o, _$z.s_t0), this.normal) - n.radiusA - n.radiusB, this.point.Copy(f), this.normal.SelfNeg();
                        }
                    }, i;
                }();
                Bs.Initialize_s_pointA = new _$z, Bs.Initialize_s_pointB = new _$z, Bs.Initialize_s_planePoint = new _$z, Bs.Initialize_s_clipPoint = new _$z;
                var Fs = function() {
                    function t1() {
                        this.m_step = new _$Os, this.m_positionConstraints = Ds.MakeArray(1024), this.m_velocityConstraints = Ps.MakeArray(1024), this.m_count = 0;
                    }
                    var _$i = t1.prototype;
                    return _$i.Initialize = function(t1) {
                        if (this.m_step.Copy(t1.step), this.m_count = t1.count, this.m_positionConstraints.length < this.m_count) for(var _$i = P(2 * this.m_positionConstraints.length, this.m_count); this.m_positionConstraints.length < _$i;)this.m_positionConstraints[this.m_positionConstraints.length] = new Ds;
                        if (this.m_velocityConstraints.length < this.m_count) for(var n = P(2 * this.m_velocityConstraints.length, this.m_count); this.m_velocityConstraints.length < n;)this.m_velocityConstraints[this.m_velocityConstraints.length] = new Ps;
                        this.m_positions = t1.positions, this.m_velocities = t1.velocities, this.m_contacts = t1.contacts;
                        for(var s = 0; s < this.m_count; ++s){
                            var _$r = this.m_contacts[s], h = _$r.m_fixtureA, e = _$r.m_fixtureB, u = h.GetShape(), o = e.GetShape(), f = u.m_radius, _$c = o.m_radius, a = h.GetBody(), v = e.GetBody(), l = _$r.GetManifold(), _$d = l.pointCount, w = this.m_velocityConstraints[s];
                            w.friction = _$r.m_friction, w.restitution = _$r.m_restitution, w.tangentSpeed = _$r.m_tangentSpeed, w.indexA = a.m_islandIndex, w.indexB = v.m_islandIndex, w.invMassA = a.m_invMass, w.invMassB = v.m_invMass, w.invIA = a.m_invI, w.invIB = v.m_invI, w.contactIndex = s, w.pointCount = _$d, w.K.SetZero(), w.normalMass.SetZero();
                            var g = this.m_positionConstraints[s];
                            g.indexA = a.m_islandIndex, g.indexB = v.m_islandIndex, g.invMassA = a.m_invMass, g.invMassB = v.m_invMass, g.localCenterA.Copy(a.m_sweep.localCenter), g.localCenterB.Copy(v.m_sweep.localCenter), g.invIA = a.m_invI, g.invIB = v.m_invI, g.localNormal.Copy(l.localNormal), g.localPoint.Copy(l.localPoint), g.pointCount = _$d, g.radiusA = f, g.radiusB = _$c, g.type = l.type;
                            for(var p = 0; p < _$d; ++p){
                                var _$y = l.points[p], _$_ = w.points[p];
                                this.m_step.warmStarting ? (_$_.normalImpulse = this.m_step.dtRatio * _$y.normalImpulse, _$_.tangentImpulse = this.m_step.dtRatio * _$y.tangentImpulse) : (_$_.normalImpulse = 0, _$_.tangentImpulse = 0), _$_.rA.SetZero(), _$_.rB.SetZero(), _$_.normalMass = 0, _$_.tangentMass = 0, _$_.velocityBias = 0, g.localPoints[p].Copy(_$y.localPoint);
                            }
                        }
                        return this;
                    }, _$i.InitializeVelocityConstraints = function() {
                        for(var _$i = t1.InitializeVelocityConstraints_s_xfA, n = t1.InitializeVelocityConstraints_s_xfB, s = t1.InitializeVelocityConstraints_s_worldManifold, _$r = 0; _$r < this.m_count; ++_$r){
                            var h = this.m_velocityConstraints[_$r], e = this.m_positionConstraints[_$r], u = e.radiusA, o = e.radiusB, f = this.m_contacts[h.contactIndex].GetManifold(), _$c = h.indexA, a = h.indexB, v = h.invMassA, l = h.invMassB, _$d = h.invIA, w = h.invIB, g = e.localCenterA, p = e.localCenterB, _$y = this.m_positions[_$c].c, _$_ = this.m_positions[_$c].a, m = this.m_velocities[_$c].v, b = this.m_velocities[_$c].w, k = this.m_positions[a].c, A = this.m_positions[a].a, E = this.m_velocities[a].v, T = this.m_velocities[a].w;
                            _$i.q.SetAngle(_$_), n.q.SetAngle(A), _$z.SubVV(_$y, _$K.MulRV(_$i.q, g, _$z.s_t0), _$i.p), _$z.SubVV(k, _$K.MulRV(n.q, p, _$z.s_t0), n.p), s.Initialize(f, _$i, u, n, o), h.normal.Copy(s.normal), _$z.CrossVOne(h.normal, h.tangent);
                            for(var _$S = h.pointCount, _$O = 0; _$O < _$S; ++_$O){
                                var _$I = h.points[_$O];
                                _$z.SubVV(s.points[_$O], _$y, _$I.rA), _$z.SubVV(s.points[_$O], k, _$I.rB);
                                var _$R = _$z.CrossVV(_$I.rA, h.normal), _$M = _$z.CrossVV(_$I.rB, h.normal), _$C = v + l + _$d * _$R * _$R + w * _$M * _$M;
                                _$I.normalMass = _$C > 0 ? 1 / _$C : 0;
                                var _$N = h.tangent, _$P = _$z.CrossVV(_$I.rA, _$N), _$D = _$z.CrossVV(_$I.rB, _$N), L = v + l + _$d * _$P * _$P + w * _$D * _$D;
                                _$I.tangentMass = L > 0 ? 1 / L : 0, _$I.velocityBias = 0;
                                var _$B = _$z.DotVV(h.normal, _$z.SubVV(_$z.AddVCrossSV(E, T, _$I.rB, _$z.s_t0), _$z.AddVCrossSV(m, b, _$I.rA, _$z.s_t1), _$z.s_t0));
                                _$B < -1 && (_$I.velocityBias += -h.restitution * _$B);
                            }
                            h.pointCount;
                        }
                    }, _$i.WarmStart = function() {
                        for(var _$i = t1.WarmStart_s_P, n = 0; n < this.m_count; ++n){
                            for(var s = this.m_velocityConstraints[n], _$r = s.indexA, h = s.indexB, e = s.invMassA, u = s.invIA, o = s.invMassB, f = s.invIB, _$c = s.pointCount, a = this.m_velocities[_$r].v, v = this.m_velocities[_$r].w, l = this.m_velocities[h].v, _$d = this.m_velocities[h].w, w = s.normal, g = s.tangent, p = 0; p < _$c; ++p){
                                var _$y = s.points[p];
                                _$z.AddVV(_$z.MulSV(_$y.normalImpulse, w, _$z.s_t0), _$z.MulSV(_$y.tangentImpulse, g, _$z.s_t1), _$i), v -= u * _$z.CrossVV(_$y.rA, _$i), a.SelfMulSub(e, _$i), _$d += f * _$z.CrossVV(_$y.rB, _$i), l.SelfMulAdd(o, _$i);
                            }
                            this.m_velocities[_$r].w = v, this.m_velocities[h].w = _$d;
                        }
                    }, _$i.SolveVelocityConstraints = function() {
                        var _$i = t1.SolveVelocityConstraints_s_dv;
                        t1.SolveVelocityConstraints_s_dv1, t1.SolveVelocityConstraints_s_dv2;
                        var n = t1.SolveVelocityConstraints_s_P;
                        t1.SolveVelocityConstraints_s_a, t1.SolveVelocityConstraints_s_b, t1.SolveVelocityConstraints_s_x, t1.SolveVelocityConstraints_s_d, t1.SolveVelocityConstraints_s_P1, t1.SolveVelocityConstraints_s_P2, t1.SolveVelocityConstraints_s_P1P2;
                        for(var s = 0; s < this.m_count; ++s){
                            for(var _$r = this.m_velocityConstraints[s], h = _$r.indexA, e = _$r.indexB, u = _$r.invMassA, o = _$r.invIA, f = _$r.invMassB, _$c = _$r.invIB, a = _$r.pointCount, v = this.m_velocities[h].v, l = this.m_velocities[h].w, _$d = this.m_velocities[e].v, w = this.m_velocities[e].w, g = _$r.normal, p = _$r.tangent, _$y = _$r.friction, _$_ = 0; _$_ < a; ++_$_){
                                var m = _$r.points[_$_];
                                _$z.SubVV(_$z.AddVCrossSV(_$d, w, m.rB, _$z.s_t0), _$z.AddVCrossSV(v, l, m.rA, _$z.s_t1), _$i);
                                var b = _$z.DotVV(_$i, p) - _$r.tangentSpeed, k = -(m.tangentMass * b), A = _$y * m.normalImpulse, E = D(m.tangentImpulse + k, -A, A);
                                k = E - m.tangentImpulse, m.tangentImpulse = E, _$z.MulSV(k, p, n), v.SelfMulSub(u, n), l -= o * _$z.CrossVV(m.rA, n), _$d.SelfMulAdd(f, n), w += _$c * _$z.CrossVV(m.rB, n);
                            }
                            _$r.pointCount;
                            for(var T = 0; T < a; ++T){
                                var _$S = _$r.points[T];
                                _$z.SubVV(_$z.AddVCrossSV(_$d, w, _$S.rB, _$z.s_t0), _$z.AddVCrossSV(v, l, _$S.rA, _$z.s_t1), _$i);
                                var _$O = _$z.DotVV(_$i, g), _$I = -_$S.normalMass * (_$O - _$S.velocityBias), _$R = P(_$S.normalImpulse + _$I, 0);
                                _$I = _$R - _$S.normalImpulse, _$S.normalImpulse = _$R, _$z.MulSV(_$I, g, n), v.SelfMulSub(u, n), l -= o * _$z.CrossVV(_$S.rA, n), _$d.SelfMulAdd(f, n), w += _$c * _$z.CrossVV(_$S.rB, n);
                            }
                            this.m_velocities[h].w = l, this.m_velocities[e].w = w;
                        }
                    }, _$i.StoreImpulses = function() {
                        for(var _$t = 0; _$t < this.m_count; ++_$t)for(var _$i = this.m_velocityConstraints[_$t], n = this.m_contacts[_$i.contactIndex].GetManifold(), s = 0; s < _$i.pointCount; ++s)n.points[s].normalImpulse = _$i.points[s].normalImpulse, n.points[s].tangentImpulse = _$i.points[s].tangentImpulse;
                    }, _$i.SolvePositionConstraints = function() {
                        for(var _$i = t1.SolvePositionConstraints_s_xfA, n = t1.SolvePositionConstraints_s_xfB, s = t1.SolvePositionConstraints_s_psm, _$r = t1.SolvePositionConstraints_s_rA, h = t1.SolvePositionConstraints_s_rB, e = t1.SolvePositionConstraints_s_P, u = 0, o = 0; o < this.m_count; ++o){
                            for(var f = this.m_positionConstraints[o], a = f.indexA, v = f.indexB, l = f.localCenterA, _$d = f.invMassA, w = f.invIA, g = f.localCenterB, p = f.invMassB, _$y = f.invIB, _$_ = f.pointCount, m = this.m_positions[a].c, b = this.m_positions[a].a, k = this.m_positions[v].c, A = this.m_positions[v].a, E = 0; E < _$_; ++E){
                                _$i.q.SetAngle(b), n.q.SetAngle(A), _$z.SubVV(m, _$K.MulRV(_$i.q, l, _$z.s_t0), _$i.p), _$z.SubVV(k, _$K.MulRV(n.q, g, _$z.s_t0), n.p), s.Initialize(f, _$i, n, E);
                                var T = s.normal, _$S = s.point, _$O = s.separation;
                                _$z.SubVV(_$S, m, _$r), _$z.SubVV(_$S, k, h), u = N(u, _$O);
                                var _$I = D(.2 * (_$O + .008), -0.2, 0), _$R = _$z.CrossVV(_$r, T), _$M = _$z.CrossVV(h, T), _$C = _$d + p + w * _$R * _$R + _$y * _$M * _$M, _$P = _$C > 0 ? -_$I / _$C : 0;
                                _$z.MulSV(_$P, T, e), m.SelfMulSub(_$d, e), b -= w * _$z.CrossVV(_$r, e), k.SelfMulAdd(p, e), A += _$y * _$z.CrossVV(h, e);
                            }
                            this.m_positions[a].a = b, this.m_positions[v].a = A;
                        }
                        return u > -0.024;
                    }, _$i.SolveTOIPositionConstraints = function(i, n) {
                        for(var s = t1.SolveTOIPositionConstraints_s_xfA, _$r = t1.SolveTOIPositionConstraints_s_xfB, h = t1.SolveTOIPositionConstraints_s_psm, e = t1.SolveTOIPositionConstraints_s_rA, u = t1.SolveTOIPositionConstraints_s_rB, o = t1.SolveTOIPositionConstraints_s_P, f = 0, a = 0; a < this.m_count; ++a){
                            var v = this.m_positionConstraints[a], l = v.indexA, _$d = v.indexB, w = v.localCenterA, g = v.localCenterB, p = v.pointCount, _$y = 0, _$_ = 0;
                            l !== i && l !== n || (_$y = v.invMassA, _$_ = v.invIA);
                            var m = 0, b = 0;
                            _$d !== i && _$d !== n || (m = v.invMassB, b = v.invIB);
                            for(var k = this.m_positions[l].c, A = this.m_positions[l].a, E = this.m_positions[_$d].c, T = this.m_positions[_$d].a, _$S = 0; _$S < p; ++_$S){
                                s.q.SetAngle(A), _$r.q.SetAngle(T), _$z.SubVV(k, _$K.MulRV(s.q, w, _$z.s_t0), s.p), _$z.SubVV(E, _$K.MulRV(_$r.q, g, _$z.s_t0), _$r.p), h.Initialize(v, s, _$r, _$S);
                                var _$O = h.normal, _$I = h.point, _$R = h.separation;
                                _$z.SubVV(_$I, k, e), _$z.SubVV(_$I, E, u), f = N(f, _$R);
                                var _$M = D(.75 * (_$R + .008), -0.2, 0), _$C = _$z.CrossVV(e, _$O), _$P = _$z.CrossVV(u, _$O), L = _$y + m + _$_ * _$C * _$C + b * _$P * _$P, _$B = L > 0 ? -_$M / L : 0;
                                _$z.MulSV(_$B, _$O, o), k.SelfMulSub(_$y, o), A -= _$_ * _$z.CrossVV(e, o), E.SelfMulAdd(m, o), T += b * _$z.CrossVV(u, o);
                            }
                            this.m_positions[l].a = A, this.m_positions[_$d].a = T;
                        }
                        return f >= -0.012;
                    }, t1;
                }();
                Fs.InitializeVelocityConstraints_s_xfA = new J, Fs.InitializeVelocityConstraints_s_xfB = new J, Fs.InitializeVelocityConstraints_s_worldManifold = new Lt, Fs.WarmStart_s_P = new _$z, Fs.SolveVelocityConstraints_s_dv = new _$z, Fs.SolveVelocityConstraints_s_dv1 = new _$z, Fs.SolveVelocityConstraints_s_dv2 = new _$z, Fs.SolveVelocityConstraints_s_P = new _$z, Fs.SolveVelocityConstraints_s_a = new _$z, Fs.SolveVelocityConstraints_s_b = new _$z, Fs.SolveVelocityConstraints_s_x = new _$z, Fs.SolveVelocityConstraints_s_d = new _$z, Fs.SolveVelocityConstraints_s_P1 = new _$z, Fs.SolveVelocityConstraints_s_P2 = new _$z, Fs.SolveVelocityConstraints_s_P1P2 = new _$z, Fs.SolvePositionConstraints_s_xfA = new J, Fs.SolvePositionConstraints_s_xfB = new J, Fs.SolvePositionConstraints_s_psm = new Bs, Fs.SolvePositionConstraints_s_rA = new _$z, Fs.SolvePositionConstraints_s_rB = new _$z, Fs.SolvePositionConstraints_s_P = new _$z, Fs.SolveTOIPositionConstraints_s_xfA = new J, Fs.SolveTOIPositionConstraints_s_xfB = new J, Fs.SolveTOIPositionConstraints_s_psm = new Bs, Fs.SolveTOIPositionConstraints_s_rA = new _$z, Fs.SolveTOIPositionConstraints_s_rB = new _$z, Fs.SolveTOIPositionConstraints_s_P = new _$z;
                var Us, xs = function() {
                    function i() {
                        this.m_bodies = [], this.m_contacts = [], this.m_joints = [], this.m_positions = Is.MakeArray(1024), this.m_velocities = Rs.MakeArray(1024), this.m_bodyCount = 0, this.m_jointCount = 0, this.m_contactCount = 0, this.m_bodyCapacity = 0, this.m_contactCapacity = 0, this.m_jointCapacity = 0;
                    }
                    var s = i.prototype;
                    return s.Initialize = function(t1, i, n, s) {
                        if (this.m_bodyCapacity = t1, this.m_contactCapacity = i, this.m_jointCapacity = n, this.m_bodyCount = 0, this.m_contactCount = 0, this.m_jointCount = 0, this.m_listener = s, this.m_positions.length < t1) for(var _$r = P(2 * this.m_positions.length, t1); this.m_positions.length < _$r;)this.m_positions[this.m_positions.length] = new Is;
                        if (this.m_velocities.length < t1) for(var h = P(2 * this.m_velocities.length, t1); this.m_velocities.length < h;)this.m_velocities[this.m_velocities.length] = new Rs;
                    }, s.Clear = function() {
                        this.m_bodyCount = 0, this.m_contactCount = 0, this.m_jointCount = 0;
                    }, s.AddBody = function(t1) {
                        t1.m_islandIndex = this.m_bodyCount, this.m_bodies[this.m_bodyCount++] = t1;
                    }, s.AddContact = function(t1) {
                        this.m_contacts[this.m_contactCount++] = t1;
                    }, s.AddJoint = function(t1) {
                        this.m_joints[this.m_jointCount++] = t1;
                    }, s.Solve = function(s, r, h, e) {
                        for(var u = i.s_timer.Reset(), o = r.dt, f = 0; f < this.m_bodyCount; ++f){
                            var _$c = this.m_bodies[f];
                            this.m_positions[f].c.Copy(_$c.m_sweep.c);
                            var a = _$c.m_sweep.a, v = this.m_velocities[f].v.Copy(_$c.m_linearVelocity), l = _$c.m_angularVelocity;
                            _$c.m_sweep.c0.Copy(_$c.m_sweep.c), _$c.m_sweep.a0 = _$c.m_sweep.a, _$c.m_type === t1.b2BodyType.b2_dynamicBody && (v.x += o * (_$c.m_gravityScale * h.x + _$c.m_invMass * _$c.m_force.x), v.y += o * (_$c.m_gravityScale * h.y + _$c.m_invMass * _$c.m_force.y), l += o * _$c.m_invI * _$c.m_torque, v.SelfMul(1 / (1 + o * _$c.m_linearDamping)), l *= 1 / (1 + o * _$c.m_angularDamping)), this.m_positions[f].a = a, this.m_velocities[f].w = l;
                        }
                        u.Reset();
                        var _$d = i.s_solverData;
                        _$d.step.Copy(r), _$d.positions = this.m_positions, _$d.velocities = this.m_velocities;
                        var w = i.s_contactSolverDef;
                        w.step.Copy(r), w.contacts = this.m_contacts, w.count = this.m_contactCount, w.positions = this.m_positions, w.velocities = this.m_velocities;
                        var _$y = i.s_contactSolver.Initialize(w);
                        _$y.InitializeVelocityConstraints(), r.warmStarting && _$y.WarmStart();
                        for(var _$_ = 0; _$_ < this.m_jointCount; ++_$_)this.m_joints[_$_].InitVelocityConstraints(_$d);
                        s.solveInit = u.GetMilliseconds(), u.Reset();
                        for(var m = 0; m < r.velocityIterations; ++m){
                            for(var b = 0; b < this.m_jointCount; ++b)this.m_joints[b].SolveVelocityConstraints(_$d);
                            _$y.SolveVelocityConstraints();
                        }
                        _$y.StoreImpulses(), s.solveVelocity = u.GetMilliseconds();
                        for(var k = 0; k < this.m_bodyCount; ++k){
                            var A = this.m_positions[k].c, E = this.m_positions[k].a, T = this.m_velocities[k].v, _$S = this.m_velocities[k].w, _$O = _$z.MulSV(o, T, i.s_translation);
                            if (_$z.DotVV(_$O, _$O) > 4) {
                                var _$I = 2 / _$O.Length();
                                T.SelfMul(_$I);
                            }
                            var _$R = o * _$S;
                            _$R * _$R > 2.4674011002726646 && (_$S *= 1.570796326795 / _$C(_$R)), A.x += o * T.x, A.y += o * T.y, E += o * _$S, this.m_positions[k].a = E, this.m_velocities[k].w = _$S;
                        }
                        u.Reset();
                        for(var _$M = !1, _$P = 0; _$P < r.positionIterations; ++_$P){
                            for(var _$D = _$y.SolvePositionConstraints(), L = !0, _$B = 0; _$B < this.m_jointCount; ++_$B){
                                var _$F = this.m_joints[_$B].SolvePositionConstraints(_$d);
                                L = L && _$F;
                            }
                            if (_$D && L) {
                                _$M = !0;
                                break;
                            }
                        }
                        for(var U = 0; U < this.m_bodyCount; ++U){
                            var x = this.m_bodies[U];
                            x.m_sweep.c.Copy(this.m_positions[U].c), x.m_sweep.a = this.m_positions[U].a, x.m_linearVelocity.Copy(this.m_velocities[U].v), x.m_angularVelocity = this.m_velocities[U].w, x.SynchronizeTransform();
                        }
                        if (s.solvePosition = u.GetMilliseconds(), this.Report(_$y.m_velocityConstraints), e) {
                            for(var j = 1e37, G = 0; G < this.m_bodyCount; ++G){
                                var H = this.m_bodies[G];
                                H.GetType() !== t1.b2BodyType.b2_staticBody && (!H.m_autoSleepFlag || H.m_angularVelocity * H.m_angularVelocity > .0012184696791469947 || _$z.DotVV(H.m_linearVelocity, H.m_linearVelocity) > 1e-4 ? (H.m_sleepTime = 0, j = 0) : (H.m_sleepTime += o, j = N(j, H.m_sleepTime)));
                            }
                            if (j >= .5 && _$M) for(var _$V = 0; _$V < this.m_bodyCount; ++_$V)this.m_bodies[_$V].SetAwake(!1);
                        }
                    }, s.SolveTOI = function(t1, n, s) {
                        for(var _$r = 0; _$r < this.m_bodyCount; ++_$r){
                            var h = this.m_bodies[_$r];
                            this.m_positions[_$r].c.Copy(h.m_sweep.c), this.m_positions[_$r].a = h.m_sweep.a, this.m_velocities[_$r].v.Copy(h.m_linearVelocity), this.m_velocities[_$r].w = h.m_angularVelocity;
                        }
                        var e = i.s_contactSolverDef;
                        e.contacts = this.m_contacts, e.count = this.m_contactCount, e.step.Copy(t1), e.positions = this.m_positions, e.velocities = this.m_velocities;
                        for(var u = i.s_contactSolver.Initialize(e), o = 0; o < t1.positionIterations && !u.SolveTOIPositionConstraints(n, s); ++o);
                        this.m_bodies[n].m_sweep.c0.Copy(this.m_positions[n].c), this.m_bodies[n].m_sweep.a0 = this.m_positions[n].a, this.m_bodies[s].m_sweep.c0.Copy(this.m_positions[s].c), this.m_bodies[s].m_sweep.a0 = this.m_positions[s].a, u.InitializeVelocityConstraints();
                        for(var f = 0; f < t1.velocityIterations; ++f)u.SolveVelocityConstraints();
                        for(var _$c = t1.dt, a = 0; a < this.m_bodyCount; ++a){
                            var v = this.m_positions[a].c, l = this.m_positions[a].a, _$d = this.m_velocities[a].v, w = this.m_velocities[a].w, _$y = _$z.MulSV(_$c, _$d, i.s_translation);
                            if (_$z.DotVV(_$y, _$y) > 4) {
                                var _$_ = 2 / _$y.Length();
                                _$d.SelfMul(_$_);
                            }
                            var m = _$c * w;
                            m * m > 2.4674011002726646 && (w *= 1.570796326795 / _$C(m)), v.SelfMulAdd(_$c, _$d), l += _$c * w, this.m_positions[a].a = l, this.m_velocities[a].w = w;
                            var b = this.m_bodies[a];
                            b.m_sweep.c.Copy(v), b.m_sweep.a = l, b.m_linearVelocity.Copy(_$d), b.m_angularVelocity = w, b.SynchronizeTransform();
                        }
                        this.Report(u.m_velocityConstraints);
                    }, s.Report = function(t1) {
                        if (null !== this.m_listener) for(var n = 0; n < this.m_contactCount; ++n){
                            var s = this.m_contacts[n];
                            if (s) {
                                var _$r = t1[n], h = i.s_impulse;
                                h.count = _$r.pointCount;
                                for(var e = 0; e < _$r.pointCount; ++e)h.normalImpulses[e] = _$r.points[e].normalImpulse, h.tangentImpulses[e] = _$r.points[e].tangentImpulse;
                                this.m_listener.PostSolve(s, h);
                            }
                        }
                    }, i;
                }();
                xs.s_timer = new _$nt, xs.s_solverData = new Ms, xs.s_contactSolverDef = new Ls, xs.s_contactSolver = new Fs, xs.s_translation = new _$z, xs.s_impulse = new _$bs, (Us = t1.b2ParticleFlag || (t1.b2ParticleFlag = {}))[Us.b2_waterParticle = 0] = "b2_waterParticle", Us[Us.b2_zombieParticle = 2] = "b2_zombieParticle", Us[Us.b2_wallParticle = 4] = "b2_wallParticle", Us[Us.b2_springParticle = 8] = "b2_springParticle", Us[Us.b2_elasticParticle = 16] = "b2_elasticParticle", Us[Us.b2_viscousParticle = 32] = "b2_viscousParticle", Us[Us.b2_powderParticle = 64] = "b2_powderParticle", Us[Us.b2_tensileParticle = 128] = "b2_tensileParticle", Us[Us.b2_colorMixingParticle = 256] = "b2_colorMixingParticle", Us[Us.b2_destructionListenerParticle = 512] = "b2_destructionListenerParticle", Us[Us.b2_barrierParticle = 1024] = "b2_barrierParticle", Us[Us.b2_staticPressureParticle = 2048] = "b2_staticPressureParticle", Us[Us.b2_reactiveParticle = 4096] = "b2_reactiveParticle", Us[Us.b2_repulsiveParticle = 8192] = "b2_repulsiveParticle", Us[Us.b2_fixtureContactListenerParticle = 16384] = "b2_fixtureContactListenerParticle", Us[Us.b2_particleContactListenerParticle = 32768] = "b2_particleContactListenerParticle", Us[Us.b2_fixtureContactFilterParticle = 65536] = "b2_fixtureContactFilterParticle", Us[Us.b2_particleContactFilterParticle = 131072] = "b2_particleContactFilterParticle";
                var js = function js() {
                    this.flags = 0, this.position = new _$z, this.velocity = new _$z, this.color = new _$tt(0, 0, 0, 0), this.lifetime = 0, this.userData = null, this.group = null;
                };
                function Gs(t1, i, n) {
                    return D(Math.ceil(Math.sqrt(t1 / (.01 * i)) * n), 1, 8);
                }
                var Hs, Vs = function() {
                    function t1() {
                        this.m_index = -1;
                    }
                    var _$i = t1.prototype;
                    return _$i.GetIndex = function() {
                        return this.m_index;
                    }, _$i.SetIndex = function(t1) {
                        this.m_index = t1;
                    }, t1;
                }();
                (Hs = t1.b2ParticleGroupFlag || (t1.b2ParticleGroupFlag = {}))[Hs.b2_solidParticleGroup = 1] = "b2_solidParticleGroup", Hs[Hs.b2_rigidParticleGroup = 2] = "b2_rigidParticleGroup", Hs[Hs.b2_particleGroupCanBeEmpty = 4] = "b2_particleGroupCanBeEmpty", Hs[Hs.b2_particleGroupWillBeDestroyed = 8] = "b2_particleGroupWillBeDestroyed", Hs[Hs.b2_particleGroupNeedsUpdateDepth = 16] = "b2_particleGroupNeedsUpdateDepth", Hs[Hs.b2_particleGroupInternalMask = 24] = "b2_particleGroupInternalMask";
                var Ws = function Ws() {
                    this.flags = 0, this.groupFlags = 0, this.position = new _$z, this.angle = 0, this.linearVelocity = new _$z, this.angularVelocity = 0, this.color = new _$tt, this.strength = 1, this.shapeCount = 0, this.stride = 0, this.particleCount = 0, this.lifetime = 0, this.userData = null, this.group = null;
                }, zs = function() {
                    function i(t1) {
                        this.m_firstIndex = 0, this.m_lastIndex = 0, this.m_groupFlags = 0, this.m_strength = 1, this.m_prev = null, this.m_next = null, this.m_timestamp = -1, this.m_mass = 0, this.m_inertia = 0, this.m_center = new _$z, this.m_linearVelocity = new _$z, this.m_angularVelocity = 0, this.m_transform = new J, this.m_userData = null, this.m_system = t1;
                    }
                    var n = i.prototype;
                    return n.GetNext = function() {
                        return this.m_next;
                    }, n.GetParticleSystem = function() {
                        return this.m_system;
                    }, n.GetParticleCount = function() {
                        return this.m_lastIndex - this.m_firstIndex;
                    }, n.GetBufferIndex = function() {
                        return this.m_firstIndex;
                    }, n.ContainsParticle = function(t1) {
                        return this.m_firstIndex <= t1 && t1 < this.m_lastIndex;
                    }, n.GetAllParticleFlags = function() {
                        if (!this.m_system.m_flagsBuffer.data) throw Error();
                        for(var _$t = 0, _$i = this.m_firstIndex; _$i < this.m_lastIndex; _$i++)_$t |= this.m_system.m_flagsBuffer.data[_$i];
                        return _$t;
                    }, n.GetGroupFlags = function() {
                        return this.m_groupFlags;
                    }, n.SetGroupFlags = function(i) {
                        i |= this.m_groupFlags & t1.b2ParticleGroupFlag.b2_particleGroupInternalMask, this.m_system.SetGroupFlags(this, i);
                    }, n.GetMass = function() {
                        return this.UpdateStatistics(), this.m_mass;
                    }, n.GetInertia = function() {
                        return this.UpdateStatistics(), this.m_inertia;
                    }, n.GetCenter = function() {
                        return this.UpdateStatistics(), this.m_center;
                    }, n.GetLinearVelocity = function() {
                        return this.UpdateStatistics(), this.m_linearVelocity;
                    }, n.GetAngularVelocity = function() {
                        return this.UpdateStatistics(), this.m_angularVelocity;
                    }, n.GetTransform = function() {
                        return this.m_transform;
                    }, n.GetPosition = function() {
                        return this.m_transform.p;
                    }, n.GetAngle = function() {
                        return this.m_transform.q.GetAngle();
                    }, n.GetLinearVelocityFromWorldPoint = function(t1, n) {
                        var s = i.GetLinearVelocityFromWorldPoint_s_t0;
                        return this.UpdateStatistics(), _$z.AddVCrossSV(this.m_linearVelocity, this.m_angularVelocity, _$z.SubVV(t1, this.m_center, s), n);
                    }, n.GetUserData = function() {
                        return this.m_userData;
                    }, n.SetUserData = function(t1) {
                        this.m_userData = t1;
                    }, n.ApplyForce = function(t1) {
                        this.m_system.ApplyForce(this.m_firstIndex, this.m_lastIndex, t1);
                    }, n.ApplyLinearImpulse = function(t1) {
                        this.m_system.ApplyLinearImpulse(this.m_firstIndex, this.m_lastIndex, t1);
                    }, n.DestroyParticles = function(t1) {
                        if (this.m_system.m_world.IsLocked()) throw Error();
                        for(var _$i = this.m_firstIndex; _$i < this.m_lastIndex; _$i++)this.m_system.DestroyParticle(_$i, t1);
                    }, n.UpdateStatistics = function() {
                        if (!this.m_system.m_positionBuffer.data || !this.m_system.m_velocityBuffer.data) throw Error();
                        var _$t = new _$z, _$i = new _$z;
                        if (this.m_timestamp !== this.m_system.m_timestamp) {
                            var n = this.m_system.GetParticleMass();
                            this.m_mass = n * (this.m_lastIndex - this.m_firstIndex), this.m_center.SetZero(), this.m_linearVelocity.SetZero();
                            for(var s = this.m_firstIndex; s < this.m_lastIndex; s++)this.m_center.SelfMulAdd(n, this.m_system.m_positionBuffer.data[s]), this.m_linearVelocity.SelfMulAdd(n, this.m_system.m_velocityBuffer.data[s]);
                            if (this.m_mass > 0) {
                                var _$r = 1 / this.m_mass;
                                this.m_center.SelfMul(_$r), this.m_linearVelocity.SelfMul(_$r);
                            }
                            this.m_inertia = 0, this.m_angularVelocity = 0;
                            for(var h = this.m_firstIndex; h < this.m_lastIndex; h++)_$z.SubVV(this.m_system.m_positionBuffer.data[h], this.m_center, _$t), _$z.SubVV(this.m_system.m_velocityBuffer.data[h], this.m_linearVelocity, _$i), this.m_inertia += n * _$z.DotVV(_$t, _$t), this.m_angularVelocity += n * _$z.CrossVV(_$t, _$i);
                            this.m_inertia > 0 && (this.m_angularVelocity *= 1 / this.m_inertia), this.m_timestamp = this.m_system.m_timestamp;
                        }
                    }, i;
                }();
                zs.GetLinearVelocityFromWorldPoint_s_t0 = new _$z;
                var $s = function() {
                    function t1(t1) {
                        this.m_buffer = [], this.m_front = 0, this.m_back = 0, this.m_buffer.fill(null, 0, t1);
                    }
                    var _$i = t1.prototype;
                    return _$i.Push = function(t1) {
                        if (this.m_back >= this.m_capacity) {
                            for(var _$i = this.m_front; _$i < this.m_back; _$i++)this.m_buffer[_$i - this.m_front] = this.m_buffer[_$i];
                            this.m_back -= this.m_front, this.m_front = 0;
                        }
                        this.m_buffer[this.m_back] = t1, this.m_back++;
                    }, _$i.Pop = function() {
                        this.m_buffer[this.m_front] = null, this.m_front++;
                    }, _$i.Empty = function() {
                        return this.m_front === this.m_back;
                    }, _$i.Front = function() {
                        var _$t = this.m_buffer[this.m_front];
                        if (!_$t) throw Error();
                        return _$t;
                    }, s(t1, [
                        {
                            key: "m_capacity",
                            get: function get() {
                                return this.m_buffer.length;
                            }
                        }
                    ]), t1;
                }(), Xs = function() {
                    function t1(t1) {
                        this.m_generatorCapacity = 0, this.m_generatorCount = 0, this.m_countX = 0, this.m_countY = 0, this.m_diagram = [], this.m_generatorBuffer = S(t1, function() {
                            return new qs;
                        }), this.m_generatorCapacity = t1;
                    }
                    var _$i = t1.prototype;
                    return _$i.AddGenerator = function(t1, i, n) {
                        var s = this.m_generatorBuffer[this.m_generatorCount++];
                        s.center.Copy(t1), s.tag = i, s.necessary = n;
                    }, _$i.Generate = function(t1, i) {
                        for(var n = 1 / t1, s = new _$z(1e37, 1e37), _$r = new _$z(-1e+37, -1e+37), h = 0, e = 0; e < this.m_generatorCount; e++){
                            var u = this.m_generatorBuffer[e];
                            u.necessary && (_$z.MinV(s, u.center, s), _$z.MaxV(_$r, u.center, _$r), ++h);
                        }
                        if (0 === h) return this.m_countX = 0, void (this.m_countY = 0);
                        s.x -= i, s.y -= i, _$r.x += i, _$r.y += i, this.m_countX = 1 + Math.floor(n * (_$r.x - s.x)), this.m_countY = 1 + Math.floor(n * (_$r.y - s.y)), this.m_diagram = [];
                        for(var o = new $s(4 * this.m_countX * this.m_countY), f = 0; f < this.m_generatorCount; f++){
                            var _$c = this.m_generatorBuffer[f];
                            _$c.center.SelfSub(s).SelfMul(n);
                            var a = Math.floor(_$c.center.x), v = Math.floor(_$c.center.y);
                            a >= 0 && v >= 0 && a < this.m_countX && v < this.m_countY && o.Push(new Ys(a, v, a + v * this.m_countX, _$c));
                        }
                        for(; !o.Empty();){
                            var l = o.Front(), _$d = l.m_x, w = l.m_y, g = l.m_i, p = l.m_generator;
                            o.Pop(), this.m_diagram[g] || (this.m_diagram[g] = p, _$d > 0 && o.Push(new Ys(_$d - 1, w, g - 1, p)), w > 0 && o.Push(new Ys(_$d, w - 1, g - this.m_countX, p)), _$d < this.m_countX - 1 && o.Push(new Ys(_$d + 1, w, g + 1, p)), w < this.m_countY - 1 && o.Push(new Ys(_$d, w + 1, g + this.m_countX, p)));
                        }
                        for(var _$y = 0; _$y < this.m_countY; _$y++)for(var _$_ = 0; _$_ < this.m_countX - 1; _$_++){
                            var m = _$_ + _$y * this.m_countX, b = this.m_diagram[m], k = this.m_diagram[m + 1];
                            b !== k && (o.Push(new Ys(_$_, _$y, m, k)), o.Push(new Ys(_$_ + 1, _$y, m + 1, b)));
                        }
                        for(var A = 0; A < this.m_countY - 1; A++)for(var E = 0; E < this.m_countX; E++){
                            var T = E + A * this.m_countX, _$S = this.m_diagram[T], _$O = this.m_diagram[T + this.m_countX];
                            _$S !== _$O && (o.Push(new Ys(E, A, T, _$O)), o.Push(new Ys(E, A + 1, T + this.m_countX, _$S)));
                        }
                        for(; !o.Empty();){
                            var _$I = o.Front(), _$R = _$I.m_x, _$M = _$I.m_y, _$C = _$I.m_i, _$N = _$I.m_generator;
                            o.Pop();
                            var _$P = this.m_diagram[_$C];
                            if (_$P !== _$N) {
                                var L = _$P.center.x - _$R, _$B = _$P.center.y - _$M, _$F = _$N.center.x - _$R, U = _$N.center.y - _$M;
                                L * L + _$B * _$B > _$F * _$F + U * U && (this.m_diagram[_$C] = _$N, _$R > 0 && o.Push(new Ys(_$R - 1, _$M, _$C - 1, _$N)), _$M > 0 && o.Push(new Ys(_$R, _$M - 1, _$C - this.m_countX, _$N)), _$R < this.m_countX - 1 && o.Push(new Ys(_$R + 1, _$M, _$C + 1, _$N)), _$M < this.m_countY - 1 && o.Push(new Ys(_$R, _$M + 1, _$C + this.m_countX, _$N)));
                            }
                        }
                    }, _$i.GetNodes = function(t1) {
                        for(var _$i = 0; _$i < this.m_countY - 1; _$i++)for(var n = 0; n < this.m_countX - 1; n++){
                            var s = n + _$i * this.m_countX, _$r = this.m_diagram[s], h = this.m_diagram[s + 1], e = this.m_diagram[s + this.m_countX], u = this.m_diagram[s + 1 + this.m_countX];
                            h !== e && (_$r !== h && _$r !== e && (_$r.necessary || h.necessary || e.necessary) && t1(_$r.tag, h.tag, e.tag), u !== h && u !== e && (_$r.necessary || h.necessary || e.necessary) && t1(h.tag, u.tag, e.tag));
                        }
                    }, t1;
                }(), qs = function qs() {
                    this.center = new _$z, this.tag = 0, this.necessary = !1;
                }, Ys = function Ys(t1, i, n, s) {
                    this.m_x = t1, this.m_y = i, this.m_i = n, this.m_generator = s;
                };
                function Ks(t1, i, n) {
                    var s = t1[i];
                    t1[i] = t1[n], t1[n] = s;
                }
                function Js(t1, i) {
                    return t1 < i;
                }
                function Qs(t1, i, n, s) {
                    void 0 === n && (n = t1.length - i), void 0 === s && (s = Js);
                    for(var _$r = i, h = [], e = 0;;){
                        for(; _$r + 1 < n; n++){
                            var u = t1[_$r + Math.floor(Math.random() * (n - _$r))];
                            h[e++] = n;
                            for(var o = _$r - 1;;){
                                for(; s(t1[++o], u););
                                for(; s(u, t1[--n]););
                                if (o >= n) break;
                                Ks(t1, o, n);
                            }
                        }
                        if (0 === e) break;
                        _$r = n, n = h[--e];
                    }
                    return t1;
                }
                function Zs(t1, i, n, s) {
                    return void 0 === n && (n = t1.length - i), void 0 === s && (s = Js), Qs(t1, i, n, s);
                }
                function tr(t1, i, n) {
                    void 0 === n && (n = t1.length);
                    for(var s = 0, _$r = 0; _$r < n; ++_$r)i(t1[_$r]) || (_$r !== s ? Ks(t1, s++, _$r) : ++s);
                    return s;
                }
                function ir(t1, i, n, s, r) {
                    for(var h = n - i; h > 0;){
                        var e = Math.floor(h / 2), u = i + e;
                        r(t1[u], s) ? (i = ++u, h -= e + 1) : h = e;
                    }
                    return i;
                }
                function nr(t1, i, n, s, r) {
                    for(var h = n - i; h > 0;){
                        var e = Math.floor(h / 2), u = i + e;
                        r(s, t1[u]) ? h = e : (i = ++u, h -= e + 1);
                    }
                    return i;
                }
                function sr(t1, i, n, s) {
                    for(var _$r = n; i !== _$r;)Ks(t1, i++, _$r++), _$r === s ? _$r = n : i === n && (n = _$r);
                }
                function rr(t1, i, n, s) {
                    if (i === n) return n;
                    for(var _$r = i; ++i !== n;)s(t1[_$r], t1[i]) || Ks(t1, ++_$r, i);
                    return ++_$r;
                }
                var hr = function() {
                    function t1(t1) {
                        this.data = [], this.count = 0, this.capacity = 0, this.allocator = t1;
                    }
                    var _$i = t1.prototype;
                    return _$i.Append = function() {
                        return this.count >= this.capacity && this.Grow(), this.count++;
                    }, _$i.Reserve = function(t1) {
                        if (!(this.capacity >= t1)) {
                            for(var _$i = this.capacity; _$i < t1; ++_$i)this.data[_$i] = this.allocator();
                            this.capacity = t1;
                        }
                    }, _$i.Grow = function() {
                        var _$t = this.capacity ? 2 * this.capacity : 256;
                        this.Reserve(_$t);
                    }, _$i.Free = function() {
                        0 !== this.data.length && (this.data = [], this.capacity = 0, this.count = 0);
                    }, _$i.Shorten = function() {}, _$i.Data = function() {
                        return this.data;
                    }, _$i.GetCount = function() {
                        return this.count;
                    }, _$i.SetCount = function(t1) {
                        this.count = t1;
                    }, _$i.GetCapacity = function() {
                        return this.capacity;
                    }, _$i.RemoveIf = function(t1) {
                        this.count = tr(this.data, t1, this.count);
                    }, _$i.Unique = function(t1) {
                        this.count = rr(this.data, 0, this.count, t1);
                    }, t1;
                }(), er = function(t1) {
                    function i(i) {
                        var n;
                        return (n = t1.call(this) || this).m_system = i, n;
                    }
                    h(i, t1);
                    var n = i.prototype;
                    return n.ShouldQueryParticleSystem = function() {
                        return !1;
                    }, n.ReportFixture = function(t1) {
                        if (t1.IsSensor()) return !0;
                        for(var _$i = t1.GetShape().GetChildCount(), n = 0; n < _$i; n++)for(var s = t1.GetAABB(n), _$r = this.m_system.GetInsideBoundsEnumerator(s), _$h = void 0; (_$h = _$r.GetNext()) >= 0;)this.ReportFixtureAndParticle(t1, n, _$h);
                        return !0;
                    }, n.ReportParticle = function() {
                        return !1;
                    }, n.ReportFixtureAndParticle = function() {}, i;
                }(As), ur = function() {
                    function t1() {
                        this.indexA = 0, this.indexB = 0, this.weight = 0, this.normal = new _$z, this.flags = 0;
                    }
                    var _$i = t1.prototype;
                    return _$i.SetIndices = function(t1, i) {
                        this.indexA = t1, this.indexB = i;
                    }, _$i.SetWeight = function(t1) {
                        this.weight = t1;
                    }, _$i.SetNormal = function(t1) {
                        this.normal.Copy(t1);
                    }, _$i.SetFlags = function(t1) {
                        this.flags = t1;
                    }, _$i.GetIndexA = function() {
                        return this.indexA;
                    }, _$i.GetIndexB = function() {
                        return this.indexB;
                    }, _$i.GetWeight = function() {
                        return this.weight;
                    }, _$i.GetNormal = function() {
                        return this.normal;
                    }, _$i.GetFlags = function() {
                        return this.flags;
                    }, _$i.IsEqual = function(t1) {
                        return this.indexA === t1.indexA && this.indexB === t1.indexB && this.flags === t1.flags && this.weight === t1.weight && this.normal.x === t1.normal.x && this.normal.y === t1.normal.y;
                    }, _$i.IsNotEqual = function(t1) {
                        return !this.IsEqual(t1);
                    }, _$i.ApproximatelyEqual = function(t1) {
                        return this.indexA === t1.indexA && this.indexB === t1.indexB && this.flags === t1.flags && .01 > _$C(this.weight - t1.weight) && 1e-4 > _$z.DistanceSquaredVV(this.normal, t1.normal);
                    }, t1;
                }(), or = function or() {
                    this.index = 0, this.weight = 0, this.normal = new _$z, this.mass = 0;
                }, fr = function fr() {
                    this.indexA = 0, this.indexB = 0, this.flags = 0, this.strength = 0, this.distance = 0;
                }, cr = function cr() {
                    this.indexA = 0, this.indexB = 0, this.indexC = 0, this.flags = 0, this.strength = 0, this.pa = new _$z(0, 0), this.pb = new _$z(0, 0), this.pc = new _$z(0, 0), this.ka = 0, this.kb = 0, this.kc = 0, this.s = 0;
                }, ar = function() {
                    function t1() {
                        this.strictContactCheck = !1, this.density = 1, this.gravityScale = 1, this.radius = 1, this.maxCount = 0, this.pressureStrength = .005, this.dampingStrength = 1, this.elasticStrength = .25, this.springStrength = .25, this.viscousStrength = .25, this.surfaceTensionPressureStrength = .2, this.surfaceTensionNormalStrength = .2, this.repulsiveStrength = 1, this.powderStrength = .5, this.ejectionStrength = .5, this.staticPressureStrength = .2, this.staticPressureRelaxation = .2, this.staticPressureIterations = 8, this.colorMixingStrength = .5, this.destroyByAge = !0, this.lifetimeGranularity = 1 / 60;
                    }
                    var _$i = t1.prototype;
                    return _$i.Copy = function(t1) {
                        return this.strictContactCheck = t1.strictContactCheck, this.density = t1.density, this.gravityScale = t1.gravityScale, this.radius = t1.radius, this.maxCount = t1.maxCount, this.pressureStrength = t1.pressureStrength, this.dampingStrength = t1.dampingStrength, this.elasticStrength = t1.elasticStrength, this.springStrength = t1.springStrength, this.viscousStrength = t1.viscousStrength, this.surfaceTensionPressureStrength = t1.surfaceTensionPressureStrength, this.surfaceTensionNormalStrength = t1.surfaceTensionNormalStrength, this.repulsiveStrength = t1.repulsiveStrength, this.powderStrength = t1.powderStrength, this.ejectionStrength = t1.ejectionStrength, this.staticPressureStrength = t1.staticPressureStrength, this.staticPressureRelaxation = t1.staticPressureRelaxation, this.staticPressureIterations = t1.staticPressureIterations, this.colorMixingStrength = t1.colorMixingStrength, this.destroyByAge = t1.destroyByAge, this.lifetimeGranularity = t1.lifetimeGranularity, this;
                    }, _$i.Clone = function() {
                        return (new t1).Copy(this);
                    }, t1;
                }(), vr = function() {
                    function s(t1, i) {
                        this.m_paused = !1, this.m_timestamp = 0, this.m_allParticleFlags = 0, this.m_needsUpdateAllParticleFlags = !1, this.m_allGroupFlags = 0, this.m_needsUpdateAllGroupFlags = !1, this.m_hasForce = !1, this.m_iterationIndex = 0, this.m_inverseDensity = 0, this.m_particleDiameter = 0, this.m_inverseDiameter = 0, this.m_squaredDiameter = 0, this.m_count = 0, this.m_internalAllocatedCapacity = 0, this.m_handleIndexBuffer = new _$lr, this.m_flagsBuffer = new _$lr, this.m_positionBuffer = new _$lr, this.m_velocityBuffer = new _$lr, this.m_forceBuffer = [], this.m_weightBuffer = [], this.m_staticPressureBuffer = [], this.m_accumulationBuffer = [], this.m_accumulation2Buffer = [], this.m_depthBuffer = [], this.m_colorBuffer = new _$lr, this.m_groupBuffer = [], this.m_userDataBuffer = new _$lr, this.m_stuckThreshold = 0, this.m_lastBodyContactStepBuffer = new _$lr, this.m_bodyContactCountBuffer = new _$lr, this.m_consecutiveContactStepsBuffer = new _$lr, this.m_stuckParticleBuffer = new hr(function() {
                            return 0;
                        }), this.m_proxyBuffer = new hr(function() {
                            return new dr;
                        }), this.m_contactBuffer = new hr(function() {
                            return new ur;
                        }), this.m_bodyContactBuffer = new hr(function() {
                            return new or;
                        }), this.m_pairBuffer = new hr(function() {
                            return new fr;
                        }), this.m_triadBuffer = new hr(function() {
                            return new cr;
                        }), this.m_expirationTimeBuffer = new _$lr, this.m_indexByExpirationTimeBuffer = new _$lr, this.m_timeElapsed = 0, this.m_expirationTimeBufferRequiresSorting = !1, this.m_groupCount = 0, this.m_groupList = null, this.m_def = new ar, this.m_prev = null, this.m_next = null, this.UpdateBodyContacts_callback = null, this.SolveCollision_callback = null, this.SetStrictContactCheck(t1.strictContactCheck), this.SetDensity(t1.density), this.SetGravityScale(t1.gravityScale), this.SetRadius(t1.radius), this.SetMaxParticleCount(t1.maxCount), this.m_def = t1.Clone(), this.m_world = i, this.SetDestructionByAge(this.m_def.destroyByAge);
                    }
                    s.computeTag = function(t1, i) {
                        return (i + s.yOffset >>> 0 << s.yShift) + (s.xScale * t1 + s.xOffset >>> 0) >>> 0;
                    }, s.computeRelativeTag = function(t1, i, n) {
                        return t1 + (n << s.yShift) + (i << s.xShift) >>> 0;
                    };
                    var _$r = s.prototype;
                    return _$r.Drop = function() {
                        for(; this.m_groupList;)this.DestroyParticleGroup(this.m_groupList);
                        this.FreeUserOverridableBuffer(this.m_handleIndexBuffer), this.FreeUserOverridableBuffer(this.m_flagsBuffer), this.FreeUserOverridableBuffer(this.m_lastBodyContactStepBuffer), this.FreeUserOverridableBuffer(this.m_bodyContactCountBuffer), this.FreeUserOverridableBuffer(this.m_consecutiveContactStepsBuffer), this.FreeUserOverridableBuffer(this.m_positionBuffer), this.FreeUserOverridableBuffer(this.m_velocityBuffer), this.FreeUserOverridableBuffer(this.m_colorBuffer), this.FreeUserOverridableBuffer(this.m_userDataBuffer), this.FreeUserOverridableBuffer(this.m_expirationTimeBuffer), this.FreeUserOverridableBuffer(this.m_indexByExpirationTimeBuffer), this.FreeBuffer(this.m_forceBuffer, this.m_internalAllocatedCapacity), this.FreeBuffer(this.m_weightBuffer, this.m_internalAllocatedCapacity), this.FreeBuffer(this.m_staticPressureBuffer, this.m_internalAllocatedCapacity), this.FreeBuffer(this.m_accumulationBuffer, this.m_internalAllocatedCapacity), this.FreeBuffer(this.m_accumulation2Buffer, this.m_internalAllocatedCapacity), this.FreeBuffer(this.m_depthBuffer, this.m_internalAllocatedCapacity), this.FreeBuffer(this.m_groupBuffer, this.m_internalAllocatedCapacity);
                    }, _$r.CreateParticle = function(t1) {
                        if (this.m_world.IsLocked()) throw Error();
                        if (this.m_count >= this.m_internalAllocatedCapacity) {
                            var n = this.m_count ? 2 * this.m_count : 256;
                            this.ReallocateInternalAllocatedBuffers(n);
                        }
                        if (this.m_count >= this.m_internalAllocatedCapacity) {
                            if (!this.m_def.destroyByAge) return -1;
                            this.DestroyOldestParticle(0, !1), this.SolveZombie();
                        }
                        var _$s = this.m_count++;
                        this.m_flagsBuffer.data[_$s] = 0, this.m_lastBodyContactStepBuffer.data && (this.m_lastBodyContactStepBuffer.data[_$s] = 0), this.m_bodyContactCountBuffer.data && (this.m_bodyContactCountBuffer.data[_$s] = 0), this.m_consecutiveContactStepsBuffer.data && (this.m_consecutiveContactStepsBuffer.data[_$s] = 0), this.m_positionBuffer.data[_$s] = (this.m_positionBuffer.data[_$s] || new _$z).Copy(i(t1.position, _$z.ZERO)), this.m_velocityBuffer.data[_$s] = (this.m_velocityBuffer.data[_$s] || new _$z).Copy(i(t1.velocity, _$z.ZERO)), this.m_weightBuffer[_$s] = 0, this.m_forceBuffer[_$s] = (this.m_forceBuffer[_$s] || new _$z).SetZero(), this.m_staticPressureBuffer && (this.m_staticPressureBuffer[_$s] = 0), this.m_depthBuffer && (this.m_depthBuffer[_$s] = 0);
                        var _$r = (new _$tt).Copy(i(t1.color, _$tt.ZERO));
                        !this.m_colorBuffer.data && _$r.IsZero() || (this.m_colorBuffer.data = this.RequestBuffer(this.m_colorBuffer.data), this.m_colorBuffer.data[_$s] = (this.m_colorBuffer.data[_$s] || new _$tt).Copy(_$r)), (this.m_userDataBuffer.data || t1.userData) && (this.m_userDataBuffer.data = this.RequestBuffer(this.m_userDataBuffer.data), this.m_userDataBuffer.data[_$s] = t1.userData), this.m_handleIndexBuffer.data && (this.m_handleIndexBuffer.data[_$s] = null);
                        var h = this.m_proxyBuffer.data[this.m_proxyBuffer.Append()], e = i(t1.lifetime, 0), u = e > 0;
                        (this.m_expirationTimeBuffer.data || u) && (this.SetParticleLifetime(_$s, u ? e : this.ExpirationTimeToLifetime(-this.GetQuantizedTimeElapsed())), this.m_indexByExpirationTimeBuffer.data[_$s] = _$s), h.index = _$s;
                        var o = i(t1.group, null);
                        return this.m_groupBuffer[_$s] = o, o && (o.m_firstIndex < o.m_lastIndex ? this.RotateBuffer(o.m_firstIndex, o.m_lastIndex, _$s) : o.m_firstIndex = _$s, o.m_lastIndex = _$s + 1), this.SetParticleFlags(_$s, i(t1.flags, 0)), _$s;
                    }, _$r.GetParticleHandleFromIndex = function(t1) {
                        this.m_handleIndexBuffer.data = this.RequestBuffer(this.m_handleIndexBuffer.data);
                        var _$i = this.m_handleIndexBuffer.data[t1];
                        return _$i || ((_$i = new Vs).SetIndex(t1), this.m_handleIndexBuffer.data[t1] = _$i, _$i);
                    }, _$r.DestroyParticle = function(i, n) {
                        void 0 === n && (n = !1);
                        var _$s = t1.b2ParticleFlag.b2_zombieParticle;
                        n && (_$s |= t1.b2ParticleFlag.b2_destructionListenerParticle), this.SetParticleFlags(i, this.m_flagsBuffer.data[i] | _$s);
                    }, _$r.DestroyOldestParticle = function(t1, i) {
                        void 0 === i && (i = !1);
                        var n = this.GetParticleCount(), _$s = this.m_indexByExpirationTimeBuffer.data[n - (t1 + 1)], _$r = this.m_indexByExpirationTimeBuffer.data[t1];
                        this.DestroyParticle(this.m_expirationTimeBuffer.data[_$s] > 0 ? _$s : _$r, i);
                    }, _$r.DestroyParticlesInShape = function(t1, i, n) {
                        void 0 === n && (n = !1);
                        var _$r = s.DestroyParticlesInShape_s_aabb;
                        if (this.m_world.IsLocked()) throw Error();
                        var h = new br(this, t1, i, n);
                        return t1.ComputeAABB(_$r, i, 0), this.m_world.QueryAABB(h, _$r), h.Destroyed();
                    }, _$r.CreateParticleGroup = function(t1) {
                        var n = s.CreateParticleGroup_s_transform;
                        if (this.m_world.IsLocked()) throw Error();
                        n.SetPositionAngle(i(t1.position, _$z.ZERO), i(t1.angle, 0));
                        var h = this.m_count;
                        if (t1.shape && this.CreateParticlesWithShapeForGroup(t1.shape, t1, n), t1.shapes && this.CreateParticlesWithShapesForGroup(t1.shapes, i(t1.shapeCount, t1.shapes.length), t1, n), t1.positionData) for(var e = i(t1.particleCount, t1.positionData.length), u = 0; u < e; u++){
                            var o = t1.positionData[u];
                            this.CreateParticleForGroup(t1, n, o);
                        }
                        var f = this.m_count, _$c = new zs(this);
                        _$c.m_firstIndex = h, _$c.m_lastIndex = f, _$c.m_strength = i(t1.strength, 1), _$c.m_userData = t1.userData, _$c.m_transform.Copy(n), _$c.m_prev = null, _$c.m_next = this.m_groupList, this.m_groupList && (this.m_groupList.m_prev = _$c), this.m_groupList = _$c, ++this.m_groupCount;
                        for(var a = h; a < f; a++)this.m_groupBuffer[a] = _$c;
                        this.SetGroupFlags(_$c, i(t1.groupFlags, 0));
                        var v = new mr;
                        return this.UpdateContacts(!0), this.UpdatePairsAndTriads(h, f, v), t1.group && (this.JoinParticleGroups(t1.group, _$c), _$c = t1.group), _$c;
                    }, _$r.JoinParticleGroups = function(t1, i) {
                        if (this.m_world.IsLocked()) throw Error();
                        this.RotateBuffer(i.m_firstIndex, i.m_lastIndex, this.m_count), this.RotateBuffer(t1.m_firstIndex, t1.m_lastIndex, i.m_firstIndex);
                        var n = new kr(i.m_firstIndex);
                        this.UpdateContacts(!0), this.UpdatePairsAndTriads(t1.m_firstIndex, i.m_lastIndex, n);
                        for(var _$s = i.m_firstIndex; _$s < i.m_lastIndex; _$s++)this.m_groupBuffer[_$s] = t1;
                        var _$r = t1.m_groupFlags | i.m_groupFlags;
                        this.SetGroupFlags(t1, _$r), t1.m_lastIndex = i.m_lastIndex, i.m_firstIndex = i.m_lastIndex, this.DestroyParticleGroup(i);
                    }, _$r.SplitParticleGroup = function(t1) {
                        this.UpdateContacts(!0);
                        var _$i = S(t1.GetParticleCount(), function() {
                            return new gr;
                        });
                        s.InitializeParticleLists(t1, _$i), this.MergeParticleListsInContact(t1, _$i);
                        var n = s.FindLongestParticleList(t1, _$i);
                        this.MergeZombieParticleListNodes(t1, _$i, n), this.CreateParticleGroupsFromParticleList(t1, _$i, n), this.UpdatePairsAndTriadsWithParticleList(t1, _$i);
                    }, _$r.GetParticleGroupList = function() {
                        return this.m_groupList;
                    }, _$r.GetParticleGroupCount = function() {
                        return this.m_groupCount;
                    }, _$r.GetParticleCount = function() {
                        return this.m_count;
                    }, _$r.GetMaxParticleCount = function() {
                        return this.m_def.maxCount;
                    }, _$r.SetMaxParticleCount = function(t1) {
                        this.m_def.maxCount = t1;
                    }, _$r.GetAllParticleFlags = function() {
                        return this.m_allParticleFlags;
                    }, _$r.GetAllGroupFlags = function() {
                        return this.m_allGroupFlags;
                    }, _$r.SetPaused = function(t1) {
                        this.m_paused = t1;
                    }, _$r.GetPaused = function() {
                        return this.m_paused;
                    }, _$r.SetDensity = function(t1) {
                        this.m_def.density = t1, this.m_inverseDensity = 1 / this.m_def.density;
                    }, _$r.GetDensity = function() {
                        return this.m_def.density;
                    }, _$r.SetGravityScale = function(t1) {
                        this.m_def.gravityScale = t1;
                    }, _$r.GetGravityScale = function() {
                        return this.m_def.gravityScale;
                    }, _$r.SetDamping = function(t1) {
                        this.m_def.dampingStrength = t1;
                    }, _$r.GetDamping = function() {
                        return this.m_def.dampingStrength;
                    }, _$r.SetStaticPressureIterations = function(t1) {
                        this.m_def.staticPressureIterations = t1;
                    }, _$r.GetStaticPressureIterations = function() {
                        return this.m_def.staticPressureIterations;
                    }, _$r.SetRadius = function(t1) {
                        this.m_particleDiameter = 2 * t1, this.m_squaredDiameter = this.m_particleDiameter * this.m_particleDiameter, this.m_inverseDiameter = 1 / this.m_particleDiameter;
                    }, _$r.GetRadius = function() {
                        return this.m_particleDiameter / 2;
                    }, _$r.GetPositionBuffer = function() {
                        return this.m_positionBuffer.data;
                    }, _$r.GetVelocityBuffer = function() {
                        return this.m_velocityBuffer.data;
                    }, _$r.GetColorBuffer = function() {
                        return this.m_colorBuffer.data = this.RequestBuffer(this.m_colorBuffer.data), this.m_colorBuffer.data;
                    }, _$r.GetGroupBuffer = function() {
                        return this.m_groupBuffer;
                    }, _$r.GetWeightBuffer = function() {
                        return this.m_weightBuffer;
                    }, _$r.GetUserDataBuffer = function() {
                        return this.m_userDataBuffer.data = this.RequestBuffer(this.m_userDataBuffer.data), this.m_userDataBuffer.data;
                    }, _$r.GetFlagsBuffer = function() {
                        return this.m_flagsBuffer.data;
                    }, _$r.SetParticleFlags = function(i, n) {
                        this.m_flagsBuffer.data[i] & ~n && (this.m_needsUpdateAllParticleFlags = !0), ~this.m_allParticleFlags & n && (n & t1.b2ParticleFlag.b2_tensileParticle && (this.m_accumulation2Buffer = this.RequestBuffer(this.m_accumulation2Buffer)), n & t1.b2ParticleFlag.b2_colorMixingParticle && (this.m_colorBuffer.data = this.RequestBuffer(this.m_colorBuffer.data)), this.m_allParticleFlags |= n), this.m_flagsBuffer.data[i] = n;
                    }, _$r.GetParticleFlags = function(t1) {
                        return this.m_flagsBuffer.data[t1];
                    }, _$r.SetFlagsBuffer = function(t1) {
                        this.SetUserOverridableBuffer(this.m_flagsBuffer, t1);
                    }, _$r.SetPositionBuffer = function(t1) {
                        if (_instanceof(t1, Float32Array)) {
                            if (t1.length % 2 != 0) throw Error();
                            for(var _$i = t1.length / 2, n = Array(_$i), _$s = 0; _$s < _$i; ++_$s)n[_$s] = new _$z(t1.subarray(2 * _$s, 2 * _$s + 2));
                            t1 = n;
                        }
                        this.SetUserOverridableBuffer(this.m_positionBuffer, t1);
                    }, _$r.SetVelocityBuffer = function(t1) {
                        if (_instanceof(t1, Float32Array)) {
                            if (t1.length % 2 != 0) throw Error();
                            for(var _$i = t1.length / 2, n = Array(_$i), _$s = 0; _$s < _$i; ++_$s)n[_$s] = new _$z(t1.subarray(2 * _$s, 2 * _$s + 2));
                            t1 = n;
                        }
                        this.SetUserOverridableBuffer(this.m_velocityBuffer, t1);
                    }, _$r.SetColorBuffer = function(t1) {
                        if (_instanceof(t1, Float32Array)) {
                            if (t1.length % 4 != 0) throw Error();
                            for(var _$i = t1.length / 4, n = Array(_$i), _$s = 0; _$s < _$i; ++_$s)n[_$s] = new _$tt(t1.subarray(4 * _$s, 4 * _$s + 4));
                            t1 = n;
                        }
                        this.SetUserOverridableBuffer(this.m_colorBuffer, t1);
                    }, _$r.SetUserDataBuffer = function(t1) {
                        this.SetUserOverridableBuffer(this.m_userDataBuffer, t1);
                    }, _$r.GetContacts = function() {
                        return this.m_contactBuffer.data;
                    }, _$r.GetContactCount = function() {
                        return this.m_contactBuffer.count;
                    }, _$r.GetBodyContacts = function() {
                        return this.m_bodyContactBuffer.data;
                    }, _$r.GetBodyContactCount = function() {
                        return this.m_bodyContactBuffer.count;
                    }, _$r.GetPairs = function() {
                        return this.m_pairBuffer.data;
                    }, _$r.GetPairCount = function() {
                        return this.m_pairBuffer.count;
                    }, _$r.GetTriads = function() {
                        return this.m_triadBuffer.data;
                    }, _$r.GetTriadCount = function() {
                        return this.m_triadBuffer.count;
                    }, _$r.SetStuckThreshold = function(t1) {
                        this.m_stuckThreshold = t1, t1 > 0 && (this.m_lastBodyContactStepBuffer.data = this.RequestBuffer(this.m_lastBodyContactStepBuffer.data), this.m_bodyContactCountBuffer.data = this.RequestBuffer(this.m_bodyContactCountBuffer.data), this.m_consecutiveContactStepsBuffer.data = this.RequestBuffer(this.m_consecutiveContactStepsBuffer.data));
                    }, _$r.GetStuckCandidates = function() {
                        return this.m_stuckParticleBuffer.Data();
                    }, _$r.GetStuckCandidateCount = function() {
                        return this.m_stuckParticleBuffer.GetCount();
                    }, _$r.ComputeCollisionEnergy = function() {
                        for(var _$t = s.ComputeCollisionEnergy_s_v, _$i = this.m_velocityBuffer.data, n = 0, _$r = 0; _$r < this.m_contactBuffer.count; _$r++){
                            var h = this.m_contactBuffer.data[_$r], e = h.indexA, u = h.indexB, o = h.normal, f = _$z.SubVV(_$i[u], _$i[e], _$t), _$c = _$z.DotVV(f, o);
                            _$c < 0 && (n += _$c * _$c);
                        }
                        return .5 * this.GetParticleMass() * n;
                    }, _$r.SetStrictContactCheck = function(t1) {
                        this.m_def.strictContactCheck = t1;
                    }, _$r.GetStrictContactCheck = function() {
                        return this.m_def.strictContactCheck;
                    }, _$r.SetParticleLifetime = function(t1, i) {
                        var n = null === this.m_indexByExpirationTimeBuffer.data;
                        if (this.m_expirationTimeBuffer.data = this.RequestBuffer(this.m_expirationTimeBuffer.data), this.m_indexByExpirationTimeBuffer.data = this.RequestBuffer(this.m_indexByExpirationTimeBuffer.data), n) for(var _$s = this.GetParticleCount(), _$r = 0; _$r < _$s; ++_$r)this.m_indexByExpirationTimeBuffer.data[_$r] = _$r;
                        var h = i / this.m_def.lifetimeGranularity, e = h > 0 ? this.GetQuantizedTimeElapsed() + h : h;
                        e !== this.m_expirationTimeBuffer.data[t1] && (this.m_expirationTimeBuffer.data[t1] = e, this.m_expirationTimeBufferRequiresSorting = !0);
                    }, _$r.GetParticleLifetime = function(t1) {
                        return this.ExpirationTimeToLifetime(this.GetExpirationTimeBuffer()[t1]);
                    }, _$r.SetDestructionByAge = function(t1) {
                        t1 && this.GetExpirationTimeBuffer(), this.m_def.destroyByAge = t1;
                    }, _$r.GetDestructionByAge = function() {
                        return this.m_def.destroyByAge;
                    }, _$r.GetExpirationTimeBuffer = function() {
                        return this.m_expirationTimeBuffer.data = this.RequestBuffer(this.m_expirationTimeBuffer.data), this.m_expirationTimeBuffer.data;
                    }, _$r.ExpirationTimeToLifetime = function(t1) {
                        return (t1 > 0 ? t1 - this.GetQuantizedTimeElapsed() : t1) * this.m_def.lifetimeGranularity;
                    }, _$r.GetIndexByExpirationTimeBuffer = function() {
                        return this.GetParticleCount() ? this.SetParticleLifetime(0, this.GetParticleLifetime(0)) : this.m_indexByExpirationTimeBuffer.data = this.RequestBuffer(this.m_indexByExpirationTimeBuffer.data), this.m_indexByExpirationTimeBuffer.data;
                    }, _$r.ParticleApplyLinearImpulse = function(t1, i) {
                        this.ApplyLinearImpulse(t1, t1 + 1, i);
                    }, _$r.ApplyLinearImpulse = function(t1, i, n) {
                        for(var _$s = this.m_velocityBuffer.data, _$r = (i - t1) * this.GetParticleMass(), h = (new _$z).Copy(n).SelfMul(1 / _$r), e = t1; e < i; e++)_$s[e].SelfAdd(h);
                    }, s.IsSignificantForce = function(t1) {
                        return 0 !== t1.x || 0 !== t1.y;
                    }, _$r.ParticleApplyForce = function(t1, i) {
                        s.IsSignificantForce(i) && this.ForceCanBeApplied(this.m_flagsBuffer.data[t1]) && (this.PrepareForceBuffer(), this.m_forceBuffer[t1].SelfAdd(i));
                    }, _$r.ApplyForce = function(t1, i, n) {
                        var _$r = (new _$z).Copy(n).SelfMul(1 / (i - t1));
                        if (s.IsSignificantForce(_$r)) {
                            this.PrepareForceBuffer();
                            for(var h = t1; h < i; h++)this.m_forceBuffer[h].SelfAdd(_$r);
                        }
                    }, _$r.GetNext = function() {
                        return this.m_next;
                    }, _$r.QueryAABB = function(t1, i) {
                        if (0 !== this.m_proxyBuffer.count) for(var n = this.m_proxyBuffer.count, _$r = ir(this.m_proxyBuffer.data, 0, n, s.computeTag(this.m_inverseDiameter * i.lowerBound.x, this.m_inverseDiameter * i.lowerBound.y), dr.CompareProxyTag), h = nr(this.m_proxyBuffer.data, _$r, n, s.computeTag(this.m_inverseDiameter * i.upperBound.x, this.m_inverseDiameter * i.upperBound.y), dr.CompareTagProxy), e = this.m_positionBuffer.data, u = _$r; u < h; ++u){
                            var o = this.m_proxyBuffer.data[u].index, f = e[o];
                            if (i.lowerBound.x < f.x && f.x < i.upperBound.x && i.lowerBound.y < f.y && f.y < i.upperBound.y && !t1.ReportParticle(this, o)) break;
                        }
                    }, _$r.QueryShapeAABB = function(t1, i, n, r) {
                        void 0 === r && (r = 0);
                        var h = s.QueryShapeAABB_s_aabb;
                        i.ComputeAABB(h, n, r), this.QueryAABB(t1, h);
                    }, _$r.QueryPointAABB = function(t1, i, n) {
                        void 0 === n && (n = .008);
                        var _$r = s.QueryPointAABB_s_aabb;
                        _$r.lowerBound.Set(i.x - n, i.y - n), _$r.upperBound.Set(i.x + n, i.y + n), this.QueryAABB(t1, _$r);
                    }, _$r.RayCast = function(t1, i, n) {
                        var _$r = s.RayCast_s_aabb, h = s.RayCast_s_p, e = s.RayCast_s_v, u = s.RayCast_s_n, o = s.RayCast_s_point;
                        if (0 !== this.m_proxyBuffer.count) {
                            var f = this.m_positionBuffer.data;
                            _$z.MinV(i, n, _$r.lowerBound), _$z.MaxV(i, n, _$r.upperBound);
                            for(var a, v = 1, l = _$z.SubVV(n, i, e), _$d = _$z.DotVV(l, l), w = this.GetInsideBoundsEnumerator(_$r); (a = w.GetNext()) >= 0;){
                                var g = _$z.SubVV(i, f[a], h), p = _$z.DotVV(g, l), _$y = p * p - _$d * (_$z.DotVV(g, g) - this.m_squaredDiameter);
                                if (_$y >= 0) {
                                    var _$_ = U(_$y), m = (-p - _$_) / _$d;
                                    if (m > v || m < 0 && ((m = (-p + _$_) / _$d) < 0 || m > v)) continue;
                                    var b = _$z.AddVMulSV(g, m, l, u);
                                    if (b.Normalize(), (v = N(v, t1.ReportParticle(this, a, _$z.AddVMulSV(i, m, l, o), b, m))) <= 0) break;
                                }
                            }
                        }
                    }, _$r.ComputeAABB = function(t1) {
                        var _$i = this.GetParticleCount();
                        t1.lowerBound.x = 1e37, t1.lowerBound.y = 1e37, t1.upperBound.x = -1e+37, t1.upperBound.y = -1e+37;
                        for(var n = this.m_positionBuffer.data, _$s = 0; _$s < _$i; _$s++){
                            var _$r = n[_$s];
                            _$z.MinV(t1.lowerBound, _$r, t1.lowerBound), _$z.MaxV(t1.upperBound, _$r, t1.upperBound);
                        }
                        t1.lowerBound.x -= this.m_particleDiameter, t1.lowerBound.y -= this.m_particleDiameter, t1.upperBound.x += this.m_particleDiameter, t1.upperBound.y += this.m_particleDiameter;
                    }, _$r.FreeBuffer = function(t1) {
                        null !== t1 && (t1.length = 0);
                    }, _$r.FreeUserOverridableBuffer = function(t1) {
                        0 === t1.userSuppliedCapacity && this.FreeBuffer(t1.data, this.m_internalAllocatedCapacity);
                    }, _$r.ReallocateBuffer3 = function(t1, i, n) {
                        if (n <= i) throw Error();
                        var _$s = t1 ? t1.slice() : [];
                        return _$s.length = n, _$s;
                    }, _$r.ReallocateBuffer5 = function(t1, i, n, s, r) {
                        if (s <= n || i && !(s <= i)) throw Error();
                        return r && !t1 || i || (t1 = this.ReallocateBuffer3(t1, n, s)), t1;
                    }, _$r.ReallocateBuffer4 = function(t1, i, n, s) {
                        return this.ReallocateBuffer5(t1.data, t1.userSuppliedCapacity, i, n, s);
                    }, _$r.RequestBuffer = function(t1) {
                        return t1 || (0 === this.m_internalAllocatedCapacity && this.ReallocateInternalAllocatedBuffers(256), (t1 = []).length = this.m_internalAllocatedCapacity), t1;
                    }, _$r.ReallocateHandleBuffers = function(t1) {
                        this.m_handleIndexBuffer.data = this.ReallocateBuffer4(this.m_handleIndexBuffer, this.m_internalAllocatedCapacity, t1, !0);
                    }, _$r.ReallocateInternalAllocatedBuffers = function(t1) {
                        function i(t1, i) {
                            return i && t1 > i ? i : t1;
                        }
                        if (t1 = i(t1, this.m_def.maxCount), t1 = i(t1, this.m_flagsBuffer.userSuppliedCapacity), t1 = i(t1, this.m_positionBuffer.userSuppliedCapacity), t1 = i(t1, this.m_velocityBuffer.userSuppliedCapacity), t1 = i(t1, this.m_colorBuffer.userSuppliedCapacity), t1 = i(t1, this.m_userDataBuffer.userSuppliedCapacity), this.m_internalAllocatedCapacity < t1) {
                            this.ReallocateHandleBuffers(t1), this.m_flagsBuffer.data = this.ReallocateBuffer4(this.m_flagsBuffer, this.m_internalAllocatedCapacity, t1, !1);
                            var n = this.m_stuckThreshold > 0;
                            this.m_lastBodyContactStepBuffer.data = this.ReallocateBuffer4(this.m_lastBodyContactStepBuffer, this.m_internalAllocatedCapacity, t1, n), this.m_bodyContactCountBuffer.data = this.ReallocateBuffer4(this.m_bodyContactCountBuffer, this.m_internalAllocatedCapacity, t1, n), this.m_consecutiveContactStepsBuffer.data = this.ReallocateBuffer4(this.m_consecutiveContactStepsBuffer, this.m_internalAllocatedCapacity, t1, n), this.m_positionBuffer.data = this.ReallocateBuffer4(this.m_positionBuffer, this.m_internalAllocatedCapacity, t1, !1), this.m_velocityBuffer.data = this.ReallocateBuffer4(this.m_velocityBuffer, this.m_internalAllocatedCapacity, t1, !1), this.m_forceBuffer = this.ReallocateBuffer5(this.m_forceBuffer, 0, this.m_internalAllocatedCapacity, t1, !1), this.m_weightBuffer = this.ReallocateBuffer5(this.m_weightBuffer, 0, this.m_internalAllocatedCapacity, t1, !1), this.m_staticPressureBuffer = this.ReallocateBuffer5(this.m_staticPressureBuffer, 0, this.m_internalAllocatedCapacity, t1, !0), this.m_accumulationBuffer = this.ReallocateBuffer5(this.m_accumulationBuffer, 0, this.m_internalAllocatedCapacity, t1, !1), this.m_accumulation2Buffer = this.ReallocateBuffer5(this.m_accumulation2Buffer, 0, this.m_internalAllocatedCapacity, t1, !0), this.m_depthBuffer = this.ReallocateBuffer5(this.m_depthBuffer, 0, this.m_internalAllocatedCapacity, t1, !0), this.m_colorBuffer.data = this.ReallocateBuffer4(this.m_colorBuffer, this.m_internalAllocatedCapacity, t1, !0), this.m_groupBuffer = this.ReallocateBuffer5(this.m_groupBuffer, 0, this.m_internalAllocatedCapacity, t1, !1), this.m_userDataBuffer.data = this.ReallocateBuffer4(this.m_userDataBuffer, this.m_internalAllocatedCapacity, t1, !0), this.m_expirationTimeBuffer.data = this.ReallocateBuffer4(this.m_expirationTimeBuffer, this.m_internalAllocatedCapacity, t1, !0), this.m_indexByExpirationTimeBuffer.data = this.ReallocateBuffer4(this.m_indexByExpirationTimeBuffer, this.m_internalAllocatedCapacity, t1, !1), this.m_internalAllocatedCapacity = t1;
                        }
                    }, _$r.CreateParticleForGroup = function(t1, n, s) {
                        var _$r = new js;
                        _$r.flags = i(t1.flags, 0), J.MulXV(n, s, _$r.position), _$z.AddVV(i(t1.linearVelocity, _$z.ZERO), _$z.CrossSV(i(t1.angularVelocity, 0), _$z.SubVV(_$r.position, i(t1.position, _$z.ZERO), _$z.s_t0), _$z.s_t0), _$r.velocity), _$r.color.Copy(i(t1.color, _$tt.ZERO)), _$r.lifetime = i(t1.lifetime, 0), _$r.userData = t1.userData, this.CreateParticle(_$r);
                    }, _$r.CreateParticlesStrokeShapeForGroup = function(n, r, h) {
                        var e = s.CreateParticlesStrokeShapeForGroup_s_edge, u = s.CreateParticlesStrokeShapeForGroup_s_d, o = s.CreateParticlesStrokeShapeForGroup_s_p, f = i(r.stride, 0);
                        0 === f && (f = this.GetParticleStride());
                        for(var _$c = 0, a = n.GetChildCount(), v = 0; v < a; v++){
                            var l = null;
                            n.GetType() === t1.b2ShapeType.e_edgeShape ? l = n : (l = e, n.GetChildEdge(l, v));
                            for(var _$d = _$z.SubVV(l.m_vertex2, l.m_vertex1, u), w = _$d.Length(); _$c < w;){
                                var g = _$z.AddVMulSV(l.m_vertex1, _$c / w, _$d, o);
                                this.CreateParticleForGroup(r, h, g), _$c += f;
                            }
                            _$c -= w;
                        }
                    }, _$r.CreateParticlesFillShapeForGroup = function(t1, n, r) {
                        var h = s.CreateParticlesFillShapeForGroup_s_aabb, e = s.CreateParticlesFillShapeForGroup_s_p, u = i(n.stride, 0);
                        0 === u && (u = this.GetParticleStride());
                        var o = J.IDENTITY;
                        t1.ComputeAABB(h, o, 0);
                        for(var _$c = Math.floor(h.lowerBound.y / u) * u; _$c < h.upperBound.y; _$c += u)for(var a = Math.floor(h.lowerBound.x / u) * u; a < h.upperBound.x; a += u){
                            var v = e.Set(a, _$c);
                            t1.TestPoint(o, v) && this.CreateParticleForGroup(n, r, v);
                        }
                    }, _$r.CreateParticlesWithShapeForGroup = function(i, n, s) {
                        switch(i.GetType()){
                            case t1.b2ShapeType.e_edgeShape:
                            case t1.b2ShapeType.e_chainShape:
                                this.CreateParticlesStrokeShapeForGroup(i, n, s);
                                break;
                            case t1.b2ShapeType.e_polygonShape:
                            case t1.b2ShapeType.e_circleShape:
                                this.CreateParticlesFillShapeForGroup(i, n, s);
                        }
                    }, _$r.CreateParticlesWithShapesForGroup = function(t1, i, n, s) {
                        var _$r = new Ar(t1, i);
                        this.CreateParticlesFillShapeForGroup(_$r, n, s);
                    }, _$r.CloneParticle = function(t1, i) {
                        var n = new js;
                        n.flags = this.m_flagsBuffer.data[t1], n.position.Copy(this.m_positionBuffer.data[t1]), n.velocity.Copy(this.m_velocityBuffer.data[t1]), this.m_colorBuffer.data && n.color.Copy(this.m_colorBuffer.data[t1]), this.m_userDataBuffer.data && (n.userData = this.m_userDataBuffer.data[t1]), n.group = i;
                        var _$s = this.CreateParticle(n);
                        if (this.m_handleIndexBuffer.data) {
                            var _$r = this.m_handleIndexBuffer.data[t1];
                            _$r && _$r.SetIndex(_$s), this.m_handleIndexBuffer.data[_$s] = _$r, this.m_handleIndexBuffer.data[t1] = null;
                        }
                        return this.m_lastBodyContactStepBuffer.data && (this.m_lastBodyContactStepBuffer.data[_$s] = this.m_lastBodyContactStepBuffer.data[t1]), this.m_bodyContactCountBuffer.data && (this.m_bodyContactCountBuffer.data[_$s] = this.m_bodyContactCountBuffer.data[t1]), this.m_consecutiveContactStepsBuffer.data && (this.m_consecutiveContactStepsBuffer.data[_$s] = this.m_consecutiveContactStepsBuffer.data[t1]), this.m_hasForce && this.m_forceBuffer[_$s].Copy(this.m_forceBuffer[t1]), this.m_staticPressureBuffer && (this.m_staticPressureBuffer[_$s] = this.m_staticPressureBuffer[t1]), this.m_depthBuffer && (this.m_depthBuffer[_$s] = this.m_depthBuffer[t1]), this.m_expirationTimeBuffer.data && (this.m_expirationTimeBuffer.data[_$s] = this.m_expirationTimeBuffer.data[t1]), _$s;
                    }, _$r.DestroyParticlesInGroup = function(t1, i) {
                        void 0 === i && (i = !1);
                        for(var n = t1.m_firstIndex; n < t1.m_lastIndex; n++)this.DestroyParticle(n, i);
                    }, _$r.DestroyParticleGroup = function(t1) {
                        this.m_world.m_destructionListener && this.m_world.m_destructionListener.SayGoodbyeParticleGroup(t1), this.SetGroupFlags(t1, 0);
                        for(var _$i = t1.m_firstIndex; _$i < t1.m_lastIndex; _$i++)this.m_groupBuffer[_$i] = null;
                        t1.m_prev && (t1.m_prev.m_next = t1.m_next), t1.m_next && (t1.m_next.m_prev = t1.m_prev), t1 === this.m_groupList && (this.m_groupList = t1.m_next), --this.m_groupCount;
                    }, s.ParticleCanBeConnected = function(i, n) {
                        return !!(i & (t1.b2ParticleFlag.b2_wallParticle | t1.b2ParticleFlag.b2_springParticle | t1.b2ParticleFlag.b2_elasticParticle)) || null !== n && !!(n.GetGroupFlags() & t1.b2ParticleGroupFlag.b2_rigidParticleGroup);
                    }, _$r.UpdatePairsAndTriads = function(i, n, r) {
                        for(var h = s.UpdatePairsAndTriads_s_dab, e = s.UpdatePairsAndTriads_s_dbc, u = s.UpdatePairsAndTriads_s_dca, o = this.m_positionBuffer.data, f = 0, _$c = i; _$c < n; _$c++)f |= this.m_flagsBuffer.data[_$c];
                        if (f & s.k_pairFlags) for(var a = 0; a < this.m_contactBuffer.count; a++){
                            var v = this.m_contactBuffer.data[a], l = v.indexA, _$d = v.indexB, w = this.m_flagsBuffer.data[l], g = this.m_flagsBuffer.data[_$d], p = this.m_groupBuffer[l], _$y = this.m_groupBuffer[_$d];
                            if (l >= i && l < n && _$d >= i && _$d < n && !((w | g) & t1.b2ParticleFlag.b2_zombieParticle) && (w | g) & s.k_pairFlags && (r.IsNecessary(l) || r.IsNecessary(_$d)) && s.ParticleCanBeConnected(w, p) && s.ParticleCanBeConnected(g, _$y) && r.ShouldCreatePair(l, _$d)) {
                                var _$_ = this.m_pairBuffer.data[this.m_pairBuffer.Append()];
                                _$_.indexA = l, _$_.indexB = _$d, _$_.flags = v.flags, _$_.strength = N(p ? p.m_strength : 1, _$y ? _$y.m_strength : 1), _$_.distance = _$z.DistanceVV(o[l], o[_$d]);
                            }
                            Zs(this.m_pairBuffer.data, 0, this.m_pairBuffer.count, s.ComparePairIndices), this.m_pairBuffer.Unique(s.MatchPairIndices);
                        }
                        if (f & s.k_triadFlags) {
                            for(var m = new Xs(n - i), b = i; b < n; b++){
                                var k = this.m_flagsBuffer.data[b], A = this.m_groupBuffer[b];
                                k & t1.b2ParticleFlag.b2_zombieParticle || !s.ParticleCanBeConnected(k, A) || m.AddGenerator(o[b], b, r.IsNecessary(b));
                            }
                            var E = this.GetParticleStride();
                            m.Generate(E / 2, 2 * E);
                            var T = this;
                            m.GetNodes(function(t1, i, n) {
                                var f = T.m_flagsBuffer.data[t1], _$c = T.m_flagsBuffer.data[i], a = T.m_flagsBuffer.data[n];
                                if ((f | _$c | a) & s.k_triadFlags && r.ShouldCreateTriad(t1, i, n)) {
                                    var v = o[t1], l = o[i], _$d = o[n], w = _$z.SubVV(v, l, h), g = _$z.SubVV(l, _$d, e), p = _$z.SubVV(_$d, v, u), _$y = 4 * T.m_squaredDiameter;
                                    if (_$z.DotVV(w, w) > _$y || _$z.DotVV(g, g) > _$y || _$z.DotVV(p, p) > _$y) return;
                                    var _$_ = T.m_groupBuffer[t1], m = T.m_groupBuffer[i], b = T.m_groupBuffer[n], k = T.m_triadBuffer.data[T.m_triadBuffer.Append()];
                                    k.indexA = t1, k.indexB = i, k.indexC = n, k.flags = f | _$c | a, k.strength = N(N(_$_ ? _$_.m_strength : 1, m ? m.m_strength : 1), b ? b.m_strength : 1);
                                    var A = (v.x + l.x + _$d.x) / 3, E = (v.y + l.y + _$d.y) / 3;
                                    k.pa.x = v.x - A, k.pa.y = v.y - E, k.pb.x = l.x - A, k.pb.y = l.y - E, k.pc.x = _$d.x - A, k.pc.y = _$d.y - E, k.ka = -_$z.DotVV(p, w), k.kb = -_$z.DotVV(w, g), k.kc = -_$z.DotVV(g, p), k.s = _$z.CrossVV(v, l) + _$z.CrossVV(l, _$d) + _$z.CrossVV(_$d, v);
                                }
                            }), Zs(this.m_triadBuffer.data, 0, this.m_triadBuffer.count, s.CompareTriadIndices), this.m_triadBuffer.Unique(s.MatchTriadIndices);
                        }
                    }, _$r.UpdatePairsAndTriadsWithReactiveParticles = function() {
                        var _$i = new Er(this.m_flagsBuffer);
                        this.UpdatePairsAndTriads(0, this.m_count, _$i);
                        for(var n = 0; n < this.m_count; n++)this.m_flagsBuffer.data[n] &= ~t1.b2ParticleFlag.b2_reactiveParticle;
                        this.m_allParticleFlags &= ~t1.b2ParticleFlag.b2_reactiveParticle;
                    }, s.ComparePairIndices = function(t1, i) {
                        var n = t1.indexA - i.indexA;
                        return 0 !== n ? n < 0 : t1.indexB < i.indexB;
                    }, s.MatchPairIndices = function(t1, i) {
                        return t1.indexA === i.indexA && t1.indexB === i.indexB;
                    }, s.CompareTriadIndices = function(t1, i) {
                        var n = t1.indexA - i.indexA;
                        if (0 !== n) return n < 0;
                        var _$s = t1.indexB - i.indexB;
                        return 0 !== _$s ? _$s < 0 : t1.indexC < i.indexC;
                    }, s.MatchTriadIndices = function(t1, i) {
                        return t1.indexA === i.indexA && t1.indexB === i.indexB && t1.indexC === i.indexC;
                    }, s.InitializeParticleLists = function(t1, i) {
                        for(var n = t1.GetBufferIndex(), _$s = t1.GetParticleCount(), _$r = 0; _$r < _$s; _$r++){
                            var h = i[_$r];
                            h.list = h, h.next = null, h.count = 1, h.index = _$r + n;
                        }
                    }, _$r.MergeParticleListsInContact = function(t1, i) {
                        for(var n = t1.GetBufferIndex(), _$r = 0; _$r < this.m_contactBuffer.count; _$r++){
                            var h = this.m_contactBuffer.data[_$r], e = h.indexA, u = h.indexB;
                            if (t1.ContainsParticle(e) && t1.ContainsParticle(u)) {
                                var o = i[e - n].list, f = i[u - n].list;
                                if (o !== f) {
                                    if (o.count < f.count) {
                                        var _$c = o;
                                        o = f, f = _$c;
                                    }
                                    s.MergeParticleLists(o, f);
                                }
                            }
                        }
                    }, s.MergeParticleLists = function(t1, i) {
                        for(var n = i;;){
                            n.list = t1;
                            var _$s = n.next;
                            if (!_$s) {
                                n.next = t1.next;
                                break;
                            }
                            n = _$s;
                        }
                        t1.next = i, t1.count += i.count, i.count = 0;
                    }, s.FindLongestParticleList = function(t1, i) {
                        for(var n = t1.GetParticleCount(), _$s = i[0], _$r = 0; _$r < n; _$r++){
                            var h = i[_$r];
                            _$s.count < h.count && (_$s = h);
                        }
                        return _$s;
                    }, _$r.MergeZombieParticleListNodes = function(i, n, r) {
                        for(var h = i.GetParticleCount(), e = 0; e < h; e++){
                            var u = n[e];
                            u !== r && this.m_flagsBuffer.data[u.index] & t1.b2ParticleFlag.b2_zombieParticle && s.MergeParticleListAndNode(r, u);
                        }
                    }, s.MergeParticleListAndNode = function(t1, i) {
                        i.list = t1, i.next = t1.next, t1.next = i, t1.count++, i.count = 0;
                    }, _$r.CreateParticleGroupsFromParticleList = function(i, n, s) {
                        var _$r = i.GetParticleCount(), h = new Ws;
                        h.groupFlags = i.GetGroupFlags(), h.userData = i.GetUserData();
                        for(var e = 0; e < _$r; e++){
                            var u = n[e];
                            if (u.count && u !== s) for(var o = this.CreateParticleGroup(h), f = u; f; f = f.next){
                                var _$c = f.index, a = this.CloneParticle(_$c, o);
                                this.m_flagsBuffer.data[_$c] |= t1.b2ParticleFlag.b2_zombieParticle, f.index = a;
                            }
                        }
                    }, _$r.UpdatePairsAndTriadsWithParticleList = function(t1, i) {
                        for(var n = t1.GetBufferIndex(), _$s = 0; _$s < this.m_pairBuffer.count; _$s++){
                            var _$r = this.m_pairBuffer.data[_$s], h = _$r.indexA, e = _$r.indexB;
                            t1.ContainsParticle(h) && (_$r.indexA = i[h - n].index), t1.ContainsParticle(e) && (_$r.indexB = i[e - n].index);
                        }
                        for(var u = 0; u < this.m_triadBuffer.count; u++){
                            var o = this.m_triadBuffer.data[u], f = o.indexA, _$c = o.indexB, a = o.indexC;
                            t1.ContainsParticle(f) && (o.indexA = i[f - n].index), t1.ContainsParticle(_$c) && (o.indexB = i[_$c - n].index), t1.ContainsParticle(a) && (o.indexC = i[a - n].index);
                        }
                    }, _$r.ComputeDepth = function() {
                        for(var _$i = [], _$s = 0, _$r = 0; _$r < this.m_contactBuffer.count; _$r++){
                            var h = this.m_contactBuffer.data[_$r], e = h.indexA, u = h.indexB, o = this.m_groupBuffer[e], f = this.m_groupBuffer[u];
                            o && o === f && o.m_groupFlags & t1.b2ParticleGroupFlag.b2_particleGroupNeedsUpdateDepth && (_$i[_$s++] = h);
                        }
                        for(var _$c = [], a = 0, v = this.m_groupList; v; v = v.GetNext())if (v.m_groupFlags & t1.b2ParticleGroupFlag.b2_particleGroupNeedsUpdateDepth) {
                            _$c[a++] = v, this.SetGroupFlags(v, v.m_groupFlags & ~t1.b2ParticleGroupFlag.b2_particleGroupNeedsUpdateDepth);
                            for(var l = v.m_firstIndex; l < v.m_lastIndex; l++)this.m_accumulationBuffer[l] = 0;
                        }
                        for(var _$d = 0; _$d < _$s; _$d++){
                            var w = _$i[_$d], g = w.indexA, p = w.indexB, _$y = w.weight;
                            this.m_accumulationBuffer[g] += _$y, this.m_accumulationBuffer[p] += _$y;
                        }
                        for(var _$_ = 0; _$_ < a; _$_++)for(var m = _$c[_$_], b = m.m_firstIndex; b < m.m_lastIndex; b++){
                            var k = this.m_accumulationBuffer[b];
                            this.m_depthBuffer[b] = k < .8 ? 0 : 1e37;
                        }
                        for(var A = 0 | U(this.m_count), E = 0; E < A; E++){
                            for(var T = !1, _$S = 0; _$S < _$s; _$S++){
                                var _$O = _$i[_$S], _$I = _$O.indexA, _$R = _$O.indexB, _$M = 1 - _$O.weight, _$C = this.m_depthBuffer[_$I], _$N = this.m_depthBuffer[_$R], _$P = _$N + _$M, _$D = _$C + _$M;
                                _$C > _$P && (this.m_depthBuffer[_$I] = _$P, T = !0), _$N > _$D && (this.m_depthBuffer[_$R] = _$D, T = !0);
                            }
                            if (!T) break;
                        }
                        for(var L = 0; L < a; L++)for(var _$B = _$c[L], _$F = _$B.m_firstIndex; _$F < _$B.m_lastIndex; _$F++)this.m_depthBuffer[_$F] < 1e37 ? this.m_depthBuffer[_$F] *= this.m_particleDiameter : this.m_depthBuffer[_$F] = 0;
                    }, _$r.GetInsideBoundsEnumerator = function(t1) {
                        var _$i = s.computeTag(this.m_inverseDiameter * t1.lowerBound.x - 1, this.m_inverseDiameter * t1.lowerBound.y - 1), n = s.computeTag(this.m_inverseDiameter * t1.upperBound.x + 1, this.m_inverseDiameter * t1.upperBound.y + 1), _$r = this.m_proxyBuffer.count, h = ir(this.m_proxyBuffer.data, 0, _$r, _$i, dr.CompareProxyTag), e = nr(this.m_proxyBuffer.data, 0, _$r, n, dr.CompareTagProxy);
                        return new wr(this, _$i, n, h, e);
                    }, _$r.UpdateAllParticleFlags = function() {
                        this.m_allParticleFlags = 0;
                        for(var _$t = 0; _$t < this.m_count; _$t++)this.m_allParticleFlags |= this.m_flagsBuffer.data[_$t];
                        this.m_needsUpdateAllParticleFlags = !1;
                    }, _$r.UpdateAllGroupFlags = function() {
                        this.m_allGroupFlags = 0;
                        for(var _$t = this.m_groupList; _$t; _$t = _$t.GetNext())this.m_allGroupFlags |= _$t.m_groupFlags;
                        this.m_needsUpdateAllGroupFlags = !1;
                    }, _$r.AddContact = function(t1, i) {
                        var n = this.m_flagsBuffer.data, _$r = this.m_positionBuffer.data, h = _$z.SubVV(_$r[i], _$r[t1], s.AddContact_s_d), e = _$z.DotVV(h, h);
                        if (0 < e && e < this.m_squaredDiameter) {
                            var u = F(e), o = this.m_contactBuffer.data[this.m_contactBuffer.Append()];
                            o.indexA = t1, o.indexB = i, o.flags = n[t1] | n[i], o.weight = 1 - e * u * this.m_inverseDiameter, o.normal.x = u * h.x, o.normal.y = u * h.y;
                        }
                    }, _$r.FindContacts_Reference = function() {
                        var _$t = this.m_proxyBuffer.count;
                        this.m_contactBuffer.count = 0;
                        for(var _$i = 0, n = 0; _$i < _$t; _$i++){
                            for(var _$r = s.computeRelativeTag(this.m_proxyBuffer.data[_$i].tag, 1, 0), h = _$i + 1; h < _$t && !(_$r < this.m_proxyBuffer.data[h].tag); h++)this.AddContact(this.m_proxyBuffer.data[_$i].index, this.m_proxyBuffer.data[h].index, this.m_contactBuffer);
                            for(var e = s.computeRelativeTag(this.m_proxyBuffer.data[_$i].tag, -1, 1); n < _$t && !(e <= this.m_proxyBuffer.data[n].tag); n++);
                            for(var u = s.computeRelativeTag(this.m_proxyBuffer.data[_$i].tag, 1, 1), o = n; o < _$t && !(u < this.m_proxyBuffer.data[o].tag); o++)this.AddContact(this.m_proxyBuffer.data[_$i].index, this.m_proxyBuffer.data[o].index, this.m_contactBuffer);
                        }
                    }, _$r.FindContacts = function(t1) {
                        this.FindContacts_Reference(t1);
                    }, _$r.UpdateProxies_Reference = function() {
                        for(var _$t = this.m_positionBuffer.data, _$i = this.m_inverseDiameter, n = 0; n < this.m_proxyBuffer.count; ++n){
                            var _$r = this.m_proxyBuffer.data[n], h = _$t[_$r.index];
                            _$r.tag = s.computeTag(_$i * h.x, _$i * h.y);
                        }
                    }, _$r.UpdateProxies = function(t1) {
                        this.UpdateProxies_Reference(t1);
                    }, _$r.SortProxies = function() {
                        Qs(this.m_proxyBuffer.data, 0, this.m_proxyBuffer.count, dr.CompareProxyProxy);
                    }, _$r.FilterContacts = function() {
                        var _$i = this.GetParticleContactFilter();
                        if (null !== _$i) {
                            var n = this;
                            this.m_contactBuffer.RemoveIf(function(s) {
                                return !!(s.flags & t1.b2ParticleFlag.b2_particleContactFilterParticle) && !_$i.ShouldCollideParticleParticle(n, s.indexA, s.indexB);
                            });
                        }
                    }, _$r.NotifyContactListenerPreContact = function(t1) {
                        if (null !== this.GetParticleContactListener()) throw t1.Initialize(this.m_contactBuffer, this.m_flagsBuffer), Error();
                    }, _$r.NotifyContactListenerPostContact = function() {
                        var _$t = this.GetParticleContactListener();
                        if (null !== _$t) {
                            for(var _$i = 0; _$i < this.m_contactBuffer.count; ++_$i){
                                var n = this.m_contactBuffer.data[_$i];
                                _$t.BeginContactParticleParticle(this, n);
                            }
                            throw Error();
                        }
                    }, s.b2ParticleContactIsZombie = function(i) {
                        return (i.flags & t1.b2ParticleFlag.b2_zombieParticle) === t1.b2ParticleFlag.b2_zombieParticle;
                    }, _$r.UpdateContacts = function(t1) {
                        this.UpdateProxies(this.m_proxyBuffer), this.SortProxies(this.m_proxyBuffer);
                        var _$i = new _r;
                        this.NotifyContactListenerPreContact(_$i), this.FindContacts(this.m_contactBuffer), this.FilterContacts(this.m_contactBuffer), this.NotifyContactListenerPostContact(_$i), t1 && this.m_contactBuffer.RemoveIf(s.b2ParticleContactIsZombie);
                    }, _$r.NotifyBodyContactListenerPreContact = function(t1) {
                        if (null !== this.GetFixtureContactListener()) throw t1.Initialize(this.m_bodyContactBuffer, this.m_flagsBuffer), Error();
                    }, _$r.NotifyBodyContactListenerPostContact = function() {
                        var _$t = this.GetFixtureContactListener();
                        if (null !== _$t) {
                            for(var _$i = 0; _$i < this.m_bodyContactBuffer.count; _$i++){
                                var n = this.m_bodyContactBuffer.data[_$i];
                                _$t.BeginContactFixtureParticle(this, n);
                            }
                            throw Error();
                        }
                    }, _$r.UpdateBodyContacts = function() {
                        var _$t = s.UpdateBodyContacts_s_aabb, _$i = new yr;
                        if (this.NotifyBodyContactListenerPreContact(_$i), this.m_stuckThreshold > 0) for(var n = this.GetParticleCount(), _$r = 0; _$r < n; _$r++)this.m_bodyContactCountBuffer.data[_$r] = 0, this.m_timestamp > this.m_lastBodyContactStepBuffer.data[_$r] + 1 && (this.m_consecutiveContactStepsBuffer.data[_$r] = 0);
                        this.m_bodyContactBuffer.SetCount(0), this.m_stuckParticleBuffer.SetCount(0), this.ComputeAABB(_$t), null === this.UpdateBodyContacts_callback && (this.UpdateBodyContacts_callback = new Tr(this));
                        var e = this.UpdateBodyContacts_callback;
                        e.m_contactFilter = this.GetFixtureContactFilter(), this.m_world.QueryAABB(e, _$t), this.m_def.strictContactCheck && this.RemoveSpuriousBodyContacts(), this.NotifyBodyContactListenerPostContact(_$i);
                    }, _$r.Solve = function(i) {
                        var n = s.Solve_s_subStep;
                        if (0 !== this.m_count && (this.m_expirationTimeBuffer.data && this.SolveLifetimes(i), this.m_allParticleFlags & t1.b2ParticleFlag.b2_zombieParticle && this.SolveZombie(), this.m_needsUpdateAllParticleFlags && this.UpdateAllParticleFlags(), this.m_needsUpdateAllGroupFlags && this.UpdateAllGroupFlags(), !this.m_paused)) for(this.m_iterationIndex = 0; this.m_iterationIndex < i.particleIterations; this.m_iterationIndex++){
                            ++this.m_timestamp;
                            var _$r = n.Copy(i);
                            _$r.dt /= i.particleIterations, _$r.inv_dt *= i.particleIterations, this.UpdateContacts(!1), this.UpdateBodyContacts(), this.ComputeWeight(), this.m_allGroupFlags & t1.b2ParticleGroupFlag.b2_particleGroupNeedsUpdateDepth && this.ComputeDepth(), this.m_allParticleFlags & t1.b2ParticleFlag.b2_reactiveParticle && this.UpdatePairsAndTriadsWithReactiveParticles(), this.m_hasForce && this.SolveForce(_$r), this.m_allParticleFlags & t1.b2ParticleFlag.b2_viscousParticle && this.SolveViscous(), this.m_allParticleFlags & t1.b2ParticleFlag.b2_repulsiveParticle && this.SolveRepulsive(_$r), this.m_allParticleFlags & t1.b2ParticleFlag.b2_powderParticle && this.SolvePowder(_$r), this.m_allParticleFlags & t1.b2ParticleFlag.b2_tensileParticle && this.SolveTensile(_$r), this.m_allGroupFlags & t1.b2ParticleGroupFlag.b2_solidParticleGroup && this.SolveSolid(_$r), this.m_allParticleFlags & t1.b2ParticleFlag.b2_colorMixingParticle && this.SolveColorMixing(), this.SolveGravity(_$r), this.m_allParticleFlags & t1.b2ParticleFlag.b2_staticPressureParticle && this.SolveStaticPressure(_$r), this.SolvePressure(_$r), this.SolveDamping(_$r), this.m_allParticleFlags & s.k_extraDampingFlags && this.SolveExtraDamping(), this.m_allParticleFlags & t1.b2ParticleFlag.b2_elasticParticle && this.SolveElastic(_$r), this.m_allParticleFlags & t1.b2ParticleFlag.b2_springParticle && this.SolveSpring(_$r), this.LimitVelocity(_$r), this.m_allGroupFlags & t1.b2ParticleGroupFlag.b2_rigidParticleGroup && this.SolveRigidDamping(), this.m_allParticleFlags & t1.b2ParticleFlag.b2_barrierParticle && this.SolveBarrier(_$r), this.SolveCollision(_$r), this.m_allGroupFlags & t1.b2ParticleGroupFlag.b2_rigidParticleGroup && this.SolveRigid(_$r), this.m_allParticleFlags & t1.b2ParticleFlag.b2_wallParticle && this.SolveWall();
                            for(var h = 0; h < this.m_count; h++)this.m_positionBuffer.data[h].SelfMulAdd(_$r.dt, this.m_velocityBuffer.data[h]);
                        }
                    }, _$r.SolveCollision = function(t1) {
                        var _$i = s.SolveCollision_s_aabb, n = this.m_positionBuffer.data, _$r = this.m_velocityBuffer.data;
                        _$i.lowerBound.x = 1e37, _$i.lowerBound.y = 1e37, _$i.upperBound.x = -1e+37, _$i.upperBound.y = -1e+37;
                        for(var e = 0; e < this.m_count; e++){
                            var u = _$r[e], o = n[e], f = o.x + t1.dt * u.x, _$c = o.y + t1.dt * u.y;
                            _$i.lowerBound.x = N(_$i.lowerBound.x, N(o.x, f)), _$i.lowerBound.y = N(_$i.lowerBound.y, N(o.y, _$c)), _$i.upperBound.x = P(_$i.upperBound.x, P(o.x, f)), _$i.upperBound.y = P(_$i.upperBound.y, P(o.y, _$c));
                        }
                        null === this.SolveCollision_callback && (this.SolveCollision_callback = new _$Sr(this, t1));
                        var a = this.SolveCollision_callback;
                        a.m_step = t1, this.m_world.QueryAABB(a, _$i);
                    }, _$r.LimitVelocity = function(t1) {
                        for(var _$i = this.m_velocityBuffer.data, n = this.GetCriticalVelocitySquared(t1), _$s = 0; _$s < this.m_count; _$s++){
                            var _$r = _$i[_$s], h = _$z.DotVV(_$r, _$r);
                            h > n && _$r.SelfMul(U(n / h));
                        }
                    }, _$r.SolveGravity = function(t1) {
                        for(var _$i = s.SolveGravity_s_gravity, n = this.m_velocityBuffer.data, _$r = _$z.MulSV(t1.dt * this.m_def.gravityScale, this.m_world.GetGravity(), _$i), h = 0; h < this.m_count; h++)n[h].SelfAdd(_$r);
                    }, _$r.SolveBarrier = function(i) {
                        for(var n = s.SolveBarrier_s_aabb, _$r = s.SolveBarrier_s_va, h = s.SolveBarrier_s_vb, e = s.SolveBarrier_s_pba, u = s.SolveBarrier_s_vba, o = s.SolveBarrier_s_vc, f = s.SolveBarrier_s_pca, _$c = s.SolveBarrier_s_vca, a = s.SolveBarrier_s_qba, v = s.SolveBarrier_s_qca, l = s.SolveBarrier_s_dv, _$d = s.SolveBarrier_s_f, w = this.m_positionBuffer.data, g = this.m_velocityBuffer.data, p = 0; p < this.m_count; p++)this.m_flagsBuffer.data[p] & s.k_barrierWallFlags && g[p].SetZero();
                        for(var _$y = 2.5 * i.dt, _$_ = this.GetParticleMass(), m = 0; m < this.m_pairBuffer.count; m++){
                            var b = this.m_pairBuffer.data[m];
                            if (b.flags & t1.b2ParticleFlag.b2_barrierParticle) {
                                var k = b.indexA, A = b.indexB, E = w[k], T = w[A];
                                _$z.MinV(E, T, n.lowerBound), _$z.MaxV(E, T, n.upperBound);
                                for(var _$O = this.m_groupBuffer[k], _$I = this.m_groupBuffer[A], _$R = this.GetLinearVelocity(_$O, k, E, _$r), _$M = this.GetLinearVelocity(_$I, A, T, h), _$C = _$z.SubVV(T, E, e), _$N = _$z.SubVV(_$M, _$R, u), _$P = this.GetInsideBoundsEnumerator(n), _$D = void 0; (_$D = _$P.GetNext()) >= 0;){
                                    var L = w[_$D], _$B = this.m_groupBuffer[_$D];
                                    if (_$O !== _$B && _$I !== _$B) {
                                        var _$F = this.GetLinearVelocity(_$B, _$D, L, o), x = _$z.SubVV(L, E, f), j = _$z.SubVV(_$F, _$R, _$c), G = _$z.CrossVV(_$N, j), H = _$z.CrossVV(_$C, j) - _$z.CrossVV(x, _$N), _$V = _$z.CrossVV(_$C, x), _$W = void 0, _$$ = void 0;
                                        if (0 === G) {
                                            if (0 === H || !((_$$ = -_$V / H) >= 0 && _$$ < _$y) || (_$z.AddVMulSV(_$C, _$$, _$N, a), _$z.AddVMulSV(x, _$$, j, v), !((_$W = _$z.DotVV(a, v) / _$z.DotVV(a, a)) >= 0 && _$W <= 1))) continue;
                                        } else {
                                            var _$Y = H * H - 4 * _$V * G;
                                            if (_$Y < 0) continue;
                                            var _$K = U(_$Y), J = (-H - _$K) / (2 * G), _$Q = (-H + _$K) / (2 * G);
                                            if (J > _$Q) {
                                                var Z = J;
                                                J = _$Q, _$Q = Z;
                                            }
                                            if (_$$ = J, _$z.AddVMulSV(_$C, _$$, _$N, a), _$z.AddVMulSV(x, _$$, j, v), _$W = _$z.DotVV(a, v) / _$z.DotVV(a, a), !(_$$ >= 0 && _$$ < _$y && _$W >= 0 && _$W <= 1) && (!((_$$ = _$Q) >= 0 && _$$ < _$y) || (_$z.AddVMulSV(_$C, _$$, _$N, a), _$z.AddVMulSV(x, _$$, j, v), !((_$W = _$z.DotVV(a, v) / _$z.DotVV(a, a)) >= 0 && _$W <= 1)))) continue;
                                        }
                                        l.x = _$R.x + _$W * _$N.x - _$F.x, l.y = _$R.y + _$W * _$N.y - _$F.y;
                                        var it = _$z.MulSV(_$_, l, _$d);
                                        if (_$B && this.IsRigidGroup(_$B)) {
                                            var _$nt = _$B.GetMass(), st = _$B.GetInertia();
                                            _$nt > 0 && _$B.m_linearVelocity.SelfMulAdd(1 / _$nt, it), st > 0 && (_$B.m_angularVelocity += _$z.CrossVV(_$z.SubVV(L, _$B.GetCenter(), _$z.s_t0), it) / st);
                                        } else g[_$D].SelfAdd(l);
                                        this.ParticleApplyForce(_$D, it.SelfMul(-i.inv_dt));
                                    }
                                }
                            }
                        }
                    }, _$r.SolveStaticPressure = function(i) {
                        this.m_staticPressureBuffer = this.RequestBuffer(this.m_staticPressureBuffer);
                        for(var n = this.GetCriticalPressure(i), _$s = this.m_def.staticPressureStrength * n, _$r = .25 * n, h = this.m_def.staticPressureRelaxation, e = 0; e < this.m_def.staticPressureIterations; e++){
                            for(var u = 0; u < this.m_count; u++)this.m_accumulationBuffer[u] = 0;
                            for(var o = 0; o < this.m_contactBuffer.count; o++){
                                var f = this.m_contactBuffer.data[o];
                                if (f.flags & t1.b2ParticleFlag.b2_staticPressureParticle) {
                                    var _$c = f.indexA, a = f.indexB, v = f.weight;
                                    this.m_accumulationBuffer[_$c] += v * this.m_staticPressureBuffer[a], this.m_accumulationBuffer[a] += v * this.m_staticPressureBuffer[_$c];
                                }
                            }
                            for(var l = 0; l < this.m_count; l++){
                                var _$d = this.m_weightBuffer[l];
                                if (this.m_flagsBuffer.data[l] & t1.b2ParticleFlag.b2_staticPressureParticle) {
                                    var w = (this.m_accumulationBuffer[l] + _$s * (_$d - 1)) / (_$d + h);
                                    this.m_staticPressureBuffer[l] = D(w, 0, _$r);
                                } else this.m_staticPressureBuffer[l] = 0;
                            }
                        }
                    }, _$r.ComputeWeight = function() {
                        for(var _$t = 0; _$t < this.m_count; _$t++)this.m_weightBuffer[_$t] = 0;
                        for(var _$i = 0; _$i < this.m_bodyContactBuffer.count; _$i++){
                            var n = this.m_bodyContactBuffer.data[_$i], _$s = n.index, _$r = n.weight;
                            this.m_weightBuffer[_$s] += _$r;
                        }
                        for(var h = 0; h < this.m_contactBuffer.count; h++){
                            var e = this.m_contactBuffer.data[h], u = e.indexA, o = e.indexB, f = e.weight;
                            this.m_weightBuffer[u] += f, this.m_weightBuffer[o] += f;
                        }
                    }, _$r.SolvePressure = function(i) {
                        for(var n = s.SolvePressure_s_f, _$r = this.m_positionBuffer.data, h = this.m_velocityBuffer.data, e = this.GetCriticalPressure(i), u = this.m_def.pressureStrength * e, o = .25 * e, f = 0; f < this.m_count; f++){
                            var _$c = u * P(0, this.m_weightBuffer[f] - 1);
                            this.m_accumulationBuffer[f] = N(_$c, o);
                        }
                        if (this.m_allParticleFlags & s.k_noPressureFlags) for(var a = 0; a < this.m_count; a++)this.m_flagsBuffer.data[a] & s.k_noPressureFlags && (this.m_accumulationBuffer[a] = 0);
                        if (this.m_allParticleFlags & t1.b2ParticleFlag.b2_staticPressureParticle) for(var v = 0; v < this.m_count; v++)this.m_flagsBuffer.data[v] & t1.b2ParticleFlag.b2_staticPressureParticle && (this.m_accumulationBuffer[v] += this.m_staticPressureBuffer[v]);
                        for(var l = i.dt / (this.m_def.density * this.m_particleDiameter), _$d = this.GetParticleInvMass(), w = 0; w < this.m_bodyContactBuffer.count; w++){
                            var g = this.m_bodyContactBuffer.data[w], p = g.index, _$y = g.body, _$_ = g.weight, b = g.mass, k = g.normal, A = _$r[p], E = this.m_accumulationBuffer[p] + u * _$_, T = _$z.MulSV(l * _$_ * b * E, k, n);
                            h[p].SelfMulSub(_$d, T), _$y.ApplyLinearImpulse(T, A, !0);
                        }
                        for(var _$S = 0; _$S < this.m_contactBuffer.count; _$S++){
                            var _$O = this.m_contactBuffer.data[_$S], _$I = _$O.indexA, _$R = _$O.indexB, _$M = _$O.weight, _$C = _$O.normal, _$D = this.m_accumulationBuffer[_$I] + this.m_accumulationBuffer[_$R], L = _$z.MulSV(l * _$M * _$D, _$C, n);
                            h[_$I].SelfSub(L), h[_$R].SelfAdd(L);
                        }
                    }, _$r.SolveDamping = function(t1) {
                        for(var _$i = s.SolveDamping_s_v, n = s.SolveDamping_s_f, _$r = this.m_positionBuffer.data, h = this.m_velocityBuffer.data, e = this.m_def.dampingStrength, u = 1 / this.GetCriticalVelocity(t1), o = this.GetParticleInvMass(), f = 0; f < this.m_bodyContactBuffer.count; f++){
                            var _$c = this.m_bodyContactBuffer.data[f], a = _$c.index, v = _$c.body, l = _$c.weight, _$d = _$c.mass, w = _$c.normal, g = _$r[a], p = _$z.SubVV(v.GetLinearVelocityFromWorldPoint(g, _$z.s_t0), h[a], _$i), _$y = _$z.DotVV(p, w);
                            if (_$y < 0) {
                                var _$_ = P(e * l, N(-u * _$y, .5)), m = _$z.MulSV(_$_ * _$d * _$y, w, n);
                                h[a].SelfMulAdd(o, m), v.ApplyLinearImpulse(m.SelfNeg(), g, !0);
                            }
                        }
                        for(var b = 0; b < this.m_contactBuffer.count; b++){
                            var k = this.m_contactBuffer.data[b], A = k.indexA, E = k.indexB, T = k.weight, _$S = k.normal, _$O = _$z.SubVV(h[E], h[A], _$i), _$I = _$z.DotVV(_$O, _$S);
                            if (_$I < 0) {
                                var _$R = P(e * T, N(-u * _$I, .5)), _$M = _$z.MulSV(_$R * _$I, _$S, n);
                                h[A].SelfAdd(_$M), h[E].SelfSub(_$M);
                            }
                        }
                    }, _$r.SolveRigidDamping = function() {
                        for(var _$t = s.SolveRigidDamping_s_t0, _$i = s.SolveRigidDamping_s_t1, n = s.SolveRigidDamping_s_p, _$r = s.SolveRigidDamping_s_v, h = [
                            0
                        ], e = [
                            0
                        ], u = [
                            0
                        ], o = [
                            0
                        ], f = [
                            0
                        ], _$c = [
                            0
                        ], a = this.m_positionBuffer.data, v = this.m_def.dampingStrength, l = 0; l < this.m_bodyContactBuffer.count; l++){
                            var _$d = this.m_bodyContactBuffer.data[l], w = _$d.index, g = this.m_groupBuffer[w];
                            if (g && this.IsRigidGroup(g)) {
                                var p = _$d.body, _$y = _$d.normal, _$_ = _$d.weight, m = a[w], b = _$z.SubVV(p.GetLinearVelocityFromWorldPoint(m, _$t), g.GetLinearVelocityFromWorldPoint(m, _$i), _$r), k = _$z.DotVV(b, _$y);
                                if (k < 0) {
                                    this.InitDampingParameterWithRigidGroupOrParticle(h, e, u, !0, g, w, m, _$y), this.InitDampingParameter(o, f, _$c, p.GetMass(), p.GetInertia() - p.GetMass() * p.GetLocalCenter().LengthSquared(), p.GetWorldCenter(), m, _$y);
                                    var A = v * N(_$_, 1) * this.ComputeDampingImpulse(h[0], e[0], u[0], o[0], f[0], _$c[0], k);
                                    this.ApplyDamping(h[0], e[0], u[0], !0, g, w, A, _$y), p.ApplyLinearImpulse(_$z.MulSV(-A, _$y, _$z.s_t0), m, !0);
                                }
                            }
                        }
                        for(var E = 0; E < this.m_contactBuffer.count; E++){
                            var T = this.m_contactBuffer.data[E], _$S = T.indexA, _$O = T.indexB, _$I = T.normal, _$R = T.weight, _$M = this.m_groupBuffer[_$S], _$C = this.m_groupBuffer[_$O], _$P = this.IsRigidGroup(_$M), _$D = this.IsRigidGroup(_$C);
                            if (_$M !== _$C && (_$P || _$D)) {
                                var L = _$z.MidVV(a[_$S], a[_$O], n), _$B = _$z.SubVV(this.GetLinearVelocity(_$C, _$O, L, _$t), this.GetLinearVelocity(_$M, _$S, L, _$i), _$r), _$F = _$z.DotVV(_$B, _$I);
                                if (_$F < 0) {
                                    this.InitDampingParameterWithRigidGroupOrParticle(h, e, u, _$P, _$M, _$S, L, _$I), this.InitDampingParameterWithRigidGroupOrParticle(o, f, _$c, _$D, _$C, _$O, L, _$I);
                                    var U = v * _$R * this.ComputeDampingImpulse(h[0], e[0], u[0], o[0], f[0], _$c[0], _$F);
                                    this.ApplyDamping(h[0], e[0], u[0], _$P, _$M, _$S, U, _$I), this.ApplyDamping(o[0], f[0], _$c[0], _$D, _$C, _$O, -U, _$I);
                                }
                            }
                        }
                    }, _$r.SolveExtraDamping = function() {
                        for(var _$t = s.SolveExtraDamping_s_v, _$i = s.SolveExtraDamping_s_f, n = this.m_velocityBuffer.data, _$r = this.m_positionBuffer.data, h = this.GetParticleInvMass(), e = 0; e < this.m_bodyContactBuffer.count; e++){
                            var u = this.m_bodyContactBuffer.data[e], o = u.index;
                            if (this.m_flagsBuffer.data[o] & s.k_extraDampingFlags) {
                                var f = u.body, _$c = u.mass, a = u.normal, v = _$r[o], l = _$z.SubVV(f.GetLinearVelocityFromWorldPoint(v, _$z.s_t0), n[o], _$t), _$d = _$z.DotVV(l, a);
                                if (_$d < 0) {
                                    var w = _$z.MulSV(.5 * _$c * _$d, a, _$i);
                                    n[o].SelfMulAdd(h, w), f.ApplyLinearImpulse(w.SelfNeg(), v, !0);
                                }
                            }
                        }
                    }, _$r.SolveWall = function() {
                        for(var _$i = this.m_velocityBuffer.data, n = 0; n < this.m_count; n++)this.m_flagsBuffer.data[n] & t1.b2ParticleFlag.b2_wallParticle && _$i[n].SetZero();
                    }, _$r.SolveRigid = function(i) {
                        for(var n = s.SolveRigid_s_position, _$r = s.SolveRigid_s_rotation, h = s.SolveRigid_s_transform, e = s.SolveRigid_s_velocityTransform, u = this.m_positionBuffer.data, o = this.m_velocityBuffer.data, f = this.m_groupList; f; f = f.GetNext())if (f.m_groupFlags & t1.b2ParticleGroupFlag.b2_rigidParticleGroup) {
                            f.UpdateStatistics(), _$r.SetAngle(i.dt * f.m_angularVelocity);
                            var a = _$z.AddVV(f.m_center, _$z.SubVV(_$z.MulSV(i.dt, f.m_linearVelocity, _$z.s_t0), _$K.MulRV(_$r, f.m_center, _$z.s_t1), _$z.s_t0), n);
                            h.SetPositionRotation(a, _$r), J.MulXX(h, f.m_transform, f.m_transform), e.p.x = i.inv_dt * h.p.x, e.p.y = i.inv_dt * h.p.y, e.q.s = i.inv_dt * h.q.s, e.q.c = i.inv_dt * (h.q.c - 1);
                            for(var _$d = f.m_firstIndex; _$d < f.m_lastIndex; _$d++)J.MulXV(e, u[_$d], o[_$d]);
                        }
                    }, _$r.SolveElastic = function(i) {
                        for(var n = s.SolveElastic_s_pa, _$r = s.SolveElastic_s_pb, h = s.SolveElastic_s_pc, e = s.SolveElastic_s_r, u = s.SolveElastic_s_t0, o = this.m_positionBuffer.data, f = this.m_velocityBuffer.data, _$c = i.inv_dt * this.m_def.elasticStrength, a = 0; a < this.m_triadBuffer.count; a++){
                            var v = this.m_triadBuffer.data[a];
                            if (v.flags & t1.b2ParticleFlag.b2_elasticParticle) {
                                var l = v.indexA, _$d = v.indexB, w = v.indexC, g = v.pa, p = v.pb, _$y = v.pc, _$_ = n.Copy(o[l]), m = _$r.Copy(o[_$d]), b = h.Copy(o[w]), k = f[l], A = f[_$d], E = f[w];
                                _$_.SelfMulAdd(i.dt, k), m.SelfMulAdd(i.dt, A), b.SelfMulAdd(i.dt, E);
                                var T = (_$_.x + m.x + b.x) / 3, _$S = (_$_.y + m.y + b.y) / 3;
                                _$_.x -= T, _$_.y -= _$S, m.x -= T, m.y -= _$S, b.x -= T, b.y -= _$S, e.s = _$z.CrossVV(g, _$_) + _$z.CrossVV(p, m) + _$z.CrossVV(_$y, b), e.c = _$z.DotVV(g, _$_) + _$z.DotVV(p, m) + _$z.DotVV(_$y, b);
                                var _$I = F(e.s * e.s + e.c * e.c);
                                isFinite(_$I) || (_$I = 198177537e11), e.s *= _$I, e.c *= _$I;
                                var _$R = _$c * v.strength;
                                _$K.MulRV(e, g, u), _$z.SubVV(u, _$_, u), _$z.MulSV(_$R, u, u), k.SelfAdd(u), _$K.MulRV(e, p, u), _$z.SubVV(u, m, u), _$z.MulSV(_$R, u, u), A.SelfAdd(u), _$K.MulRV(e, _$y, u), _$z.SubVV(u, b, u), _$z.MulSV(_$R, u, u), E.SelfAdd(u);
                            }
                        }
                    }, _$r.SolveSpring = function(i) {
                        for(var n = s.SolveSpring_s_pa, _$r = s.SolveSpring_s_pb, h = s.SolveSpring_s_d, e = s.SolveSpring_s_f, u = this.m_positionBuffer.data, o = this.m_velocityBuffer.data, f = i.inv_dt * this.m_def.springStrength, _$c = 0; _$c < this.m_pairBuffer.count; _$c++){
                            var a = this.m_pairBuffer.data[_$c];
                            if (a.flags & t1.b2ParticleFlag.b2_springParticle) {
                                var v = a.indexA, l = a.indexB, _$d = n.Copy(u[v]), w = _$r.Copy(u[l]), g = o[v], p = o[l];
                                _$d.SelfMulAdd(i.dt, g), w.SelfMulAdd(i.dt, p);
                                var _$y = _$z.SubVV(w, _$d, h), _$_ = a.distance, m = _$y.Length(), b = f * a.strength, k = _$z.MulSV(b * (_$_ - m) / m, _$y, e);
                                g.SelfSub(k), p.SelfAdd(k);
                            }
                        }
                    }, _$r.SolveTensile = function(i) {
                        for(var n = s.SolveTensile_s_weightedNormal, _$r = s.SolveTensile_s_s, h = s.SolveTensile_s_f, e = this.m_velocityBuffer.data, u = 0; u < this.m_count; u++)this.m_accumulation2Buffer[u] = new _$z, this.m_accumulation2Buffer[u].SetZero();
                        for(var o = 0; o < this.m_contactBuffer.count; o++){
                            var f = this.m_contactBuffer.data[o];
                            if (f.flags & t1.b2ParticleFlag.b2_tensileParticle) {
                                var _$c = f.indexA, a = f.indexB, v = f.weight, l = f.normal, _$d = _$z.MulSV((1 - v) * v, l, n);
                                this.m_accumulation2Buffer[_$c].SelfSub(_$d), this.m_accumulation2Buffer[a].SelfAdd(_$d);
                            }
                        }
                        for(var w = this.GetCriticalVelocity(i), g = this.m_def.surfaceTensionPressureStrength * w, p = this.m_def.surfaceTensionNormalStrength * w, _$y = .5 * w, _$_ = 0; _$_ < this.m_contactBuffer.count; _$_++){
                            var m = this.m_contactBuffer.data[_$_];
                            if (m.flags & t1.b2ParticleFlag.b2_tensileParticle) {
                                var b = m.indexA, k = m.indexB, A = m.weight, E = m.normal, T = this.m_weightBuffer[b] + this.m_weightBuffer[k], _$S = _$z.SubVV(this.m_accumulation2Buffer[k], this.m_accumulation2Buffer[b], _$r), _$O = N(g * (T - 2) + p * _$z.DotVV(_$S, E), _$y) * A, _$I = _$z.MulSV(_$O, E, h);
                                e[b].SelfSub(_$I), e[k].SelfAdd(_$I);
                            }
                        }
                    }, _$r.SolveViscous = function() {
                        for(var _$i = s.SolveViscous_s_v, n = s.SolveViscous_s_f, _$r = this.m_positionBuffer.data, h = this.m_velocityBuffer.data, e = this.m_def.viscousStrength, u = this.GetParticleInvMass(), o = 0; o < this.m_bodyContactBuffer.count; o++){
                            var f = this.m_bodyContactBuffer.data[o], _$c = f.index;
                            if (this.m_flagsBuffer.data[_$c] & t1.b2ParticleFlag.b2_viscousParticle) {
                                var a = f.body, v = f.weight, l = f.mass, _$d = _$r[_$c], w = _$z.SubVV(a.GetLinearVelocityFromWorldPoint(_$d, _$z.s_t0), h[_$c], _$i), g = _$z.MulSV(e * l * v, w, n);
                                h[_$c].SelfMulAdd(u, g), a.ApplyLinearImpulse(g.SelfNeg(), _$d, !0);
                            }
                        }
                        for(var p = 0; p < this.m_contactBuffer.count; p++){
                            var _$y = this.m_contactBuffer.data[p];
                            if (_$y.flags & t1.b2ParticleFlag.b2_viscousParticle) {
                                var _$_ = _$y.indexA, m = _$y.indexB, b = _$y.weight, k = _$z.SubVV(h[m], h[_$_], _$i), A = _$z.MulSV(e * b, k, n);
                                h[_$_].SelfAdd(A), h[m].SelfSub(A);
                            }
                        }
                    }, _$r.SolveRepulsive = function(i) {
                        for(var n = s.SolveRepulsive_s_f, _$r = this.m_velocityBuffer.data, h = this.m_def.repulsiveStrength * this.GetCriticalVelocity(i), e = 0; e < this.m_contactBuffer.count; e++){
                            var u = this.m_contactBuffer.data[e];
                            if (u.flags & t1.b2ParticleFlag.b2_repulsiveParticle) {
                                var o = u.indexA, f = u.indexB;
                                if (this.m_groupBuffer[o] !== this.m_groupBuffer[f]) {
                                    var _$c = u.weight, a = u.normal, v = _$z.MulSV(h * _$c, a, n);
                                    _$r[o].SelfSub(v), _$r[f].SelfAdd(v);
                                }
                            }
                        }
                    }, _$r.SolvePowder = function(i) {
                        for(var n = s.SolvePowder_s_f, _$r = this.m_positionBuffer.data, h = this.m_velocityBuffer.data, e = this.m_def.powderStrength * this.GetCriticalVelocity(i), o = this.GetParticleInvMass(), f = 0; f < this.m_bodyContactBuffer.count; f++){
                            var _$c = this.m_bodyContactBuffer.data[f], a = _$c.index;
                            if (this.m_flagsBuffer.data[a] & t1.b2ParticleFlag.b2_powderParticle) {
                                var v = _$c.weight;
                                if (v > .25) {
                                    var l = _$c.body, _$d = _$c.mass, w = _$r[a], g = _$c.normal, p = _$z.MulSV(e * _$d * (v - .25), g, n);
                                    h[a].SelfMulSub(o, p), l.ApplyLinearImpulse(p, w, !0);
                                }
                            }
                        }
                        for(var _$y = 0; _$y < this.m_contactBuffer.count; _$y++){
                            var _$_ = this.m_contactBuffer.data[_$y];
                            if (_$_.flags & t1.b2ParticleFlag.b2_powderParticle) {
                                var m = _$_.weight;
                                if (m > .25) {
                                    var b = _$_.indexA, k = _$_.indexB, A = _$_.normal, E = _$z.MulSV(e * (m - .25), A, n);
                                    h[b].SelfSub(E), h[k].SelfAdd(E);
                                }
                            }
                        }
                    }, _$r.SolveSolid = function(t1) {
                        var _$i = s.SolveSolid_s_f, n = this.m_velocityBuffer.data;
                        this.m_depthBuffer = this.RequestBuffer(this.m_depthBuffer);
                        for(var _$r = t1.inv_dt * this.m_def.ejectionStrength, h = 0; h < this.m_contactBuffer.count; h++){
                            var e = this.m_contactBuffer.data[h], u = e.indexA, o = e.indexB;
                            if (this.m_groupBuffer[u] !== this.m_groupBuffer[o]) {
                                var f = e.weight, _$c = e.normal, a = this.m_depthBuffer[u] + this.m_depthBuffer[o], v = _$z.MulSV(_$r * a * f, _$c, _$i);
                                n[u].SelfSub(v), n[o].SelfAdd(v);
                            }
                        }
                    }, _$r.SolveForce = function(t1) {
                        for(var _$i = this.m_velocityBuffer.data, n = t1.dt * this.GetParticleInvMass(), _$s = 0; _$s < this.m_count; _$s++)_$i[_$s].SelfMulAdd(n, this.m_forceBuffer[_$s]);
                        this.m_hasForce = !1;
                    }, _$r.SolveColorMixing = function() {
                        var _$i = .5 * this.m_def.colorMixingStrength;
                        if (_$i) for(var n = 0; n < this.m_contactBuffer.count; n++){
                            var _$s = this.m_contactBuffer.data[n], _$r = _$s.indexA, h = _$s.indexB;
                            if (this.m_flagsBuffer.data[_$r] & this.m_flagsBuffer.data[h] & t1.b2ParticleFlag.b2_colorMixingParticle) {
                                var e = this.m_colorBuffer.data[_$r], u = this.m_colorBuffer.data[h];
                                _$tt.MixColors(e, u, _$i);
                            }
                        }
                    }, _$r.SolveZombie = function() {
                        for(var _$i = 0, n = [], _$s = 0; _$s < this.m_count; _$s++)n[_$s] = -1;
                        for(var _$r = 0, h = 0; h < this.m_count; h++){
                            var e = this.m_flagsBuffer.data[h];
                            if (e & t1.b2ParticleFlag.b2_zombieParticle) {
                                var u = this.m_world.m_destructionListener;
                                if (e & t1.b2ParticleFlag.b2_destructionListenerParticle && u && u.SayGoodbyeParticle(this, h), this.m_handleIndexBuffer.data) {
                                    var o = this.m_handleIndexBuffer.data[h];
                                    o && (o.SetIndex(-1), this.m_handleIndexBuffer.data[h] = null);
                                }
                                n[h] = -1;
                            } else {
                                if (n[h] = _$i, h !== _$i) {
                                    if (this.m_handleIndexBuffer.data) {
                                        var f = this.m_handleIndexBuffer.data[h];
                                        f && f.SetIndex(_$i), this.m_handleIndexBuffer.data[_$i] = f;
                                    }
                                    this.m_flagsBuffer.data[_$i] = this.m_flagsBuffer.data[h], this.m_lastBodyContactStepBuffer.data && (this.m_lastBodyContactStepBuffer.data[_$i] = this.m_lastBodyContactStepBuffer.data[h]), this.m_bodyContactCountBuffer.data && (this.m_bodyContactCountBuffer.data[_$i] = this.m_bodyContactCountBuffer.data[h]), this.m_consecutiveContactStepsBuffer.data && (this.m_consecutiveContactStepsBuffer.data[_$i] = this.m_consecutiveContactStepsBuffer.data[h]), this.m_positionBuffer.data[_$i].Copy(this.m_positionBuffer.data[h]), this.m_velocityBuffer.data[_$i].Copy(this.m_velocityBuffer.data[h]), this.m_groupBuffer[_$i] = this.m_groupBuffer[h], this.m_hasForce && this.m_forceBuffer[_$i].Copy(this.m_forceBuffer[h]), this.m_staticPressureBuffer && (this.m_staticPressureBuffer[_$i] = this.m_staticPressureBuffer[h]), this.m_depthBuffer && (this.m_depthBuffer[_$i] = this.m_depthBuffer[h]), this.m_colorBuffer.data && this.m_colorBuffer.data[_$i].Copy(this.m_colorBuffer.data[h]), this.m_userDataBuffer.data && (this.m_userDataBuffer.data[_$i] = this.m_userDataBuffer.data[h]), this.m_expirationTimeBuffer.data && (this.m_expirationTimeBuffer.data[_$i] = this.m_expirationTimeBuffer.data[h]);
                                }
                                _$i++, _$r |= e;
                            }
                        }
                        for(var a = 0; a < this.m_proxyBuffer.count; a++){
                            var v = this.m_proxyBuffer.data[a];
                            v.index = n[v.index];
                        }
                        this.m_proxyBuffer.RemoveIf(function IsProxyInvalid(t1) {
                            return t1.index < 0;
                        });
                        for(var l = 0; l < this.m_contactBuffer.count; l++){
                            var _$d = this.m_contactBuffer.data[l];
                            _$d.indexA = n[_$d.indexA], _$d.indexB = n[_$d.indexB];
                        }
                        this.m_contactBuffer.RemoveIf(function IsContactInvalid(t1) {
                            return t1.indexA < 0 || t1.indexB < 0;
                        });
                        for(var w = 0; w < this.m_bodyContactBuffer.count; w++){
                            var g = this.m_bodyContactBuffer.data[w];
                            g.index = n[g.index];
                        }
                        this.m_bodyContactBuffer.RemoveIf(function IsBodyContactInvalid(t1) {
                            return t1.index < 0;
                        });
                        for(var p = 0; p < this.m_pairBuffer.count; p++){
                            var _$_ = this.m_pairBuffer.data[p];
                            _$_.indexA = n[_$_.indexA], _$_.indexB = n[_$_.indexB];
                        }
                        this.m_pairBuffer.RemoveIf(function IsPairInvalid(t1) {
                            return t1.indexA < 0 || t1.indexB < 0;
                        });
                        for(var m = 0; m < this.m_triadBuffer.count; m++){
                            var b = this.m_triadBuffer.data[m];
                            b.indexA = n[b.indexA], b.indexB = n[b.indexB], b.indexC = n[b.indexC];
                        }
                        if (this.m_triadBuffer.RemoveIf(function IsTriadInvalid(t1) {
                            return t1.indexA < 0 || t1.indexB < 0 || t1.indexC < 0;
                        }), this.m_indexByExpirationTimeBuffer.data) for(var k = 0, A = 0; A < this.m_count; A++){
                            var E = n[this.m_indexByExpirationTimeBuffer.data[A]];
                            -1 !== E && (this.m_indexByExpirationTimeBuffer.data[k++] = E);
                        }
                        for(var T = this.m_groupList; T; T = T.GetNext()){
                            for(var _$S = _$i, _$O = 0, _$I = !1, _$R = T.m_firstIndex; _$R < T.m_lastIndex; _$R++){
                                var _$M = n[_$R];
                                _$M >= 0 ? (_$S = N(_$S, _$M), _$O = P(_$O, _$M + 1)) : _$I = !0;
                            }
                            _$S < _$O ? (T.m_firstIndex = _$S, T.m_lastIndex = _$O, _$I && T.m_groupFlags & t1.b2ParticleGroupFlag.b2_solidParticleGroup && this.SetGroupFlags(T, T.m_groupFlags | t1.b2ParticleGroupFlag.b2_particleGroupNeedsUpdateDepth)) : (T.m_firstIndex = 0, T.m_lastIndex = 0, T.m_groupFlags & t1.b2ParticleGroupFlag.b2_particleGroupCanBeEmpty || this.SetGroupFlags(T, T.m_groupFlags | t1.b2ParticleGroupFlag.b2_particleGroupWillBeDestroyed));
                        }
                        this.m_count = _$i, this.m_allParticleFlags = _$r, this.m_needsUpdateAllParticleFlags = !1;
                        for(var _$C = this.m_groupList; _$C;){
                            var _$D = _$C.GetNext();
                            _$C.m_groupFlags & t1.b2ParticleGroupFlag.b2_particleGroupWillBeDestroyed && this.DestroyParticleGroup(_$C), _$C = _$D;
                        }
                    }, _$r.SolveLifetimes = function(t1) {
                        this.m_timeElapsed = this.LifetimeToExpirationTime(t1.dt);
                        var _$i = this.GetQuantizedTimeElapsed(), n = this.m_expirationTimeBuffer.data, _$s = this.m_indexByExpirationTimeBuffer.data, _$r = this.GetParticleCount();
                        this.m_expirationTimeBufferRequiresSorting && (Qs(_$s, 0, _$r, function(t1, i) {
                            var _$s = n[t1], _$r = n[i], h = _$s <= 0;
                            return h === _$r <= 0 ? _$s > _$r : h;
                        }), this.m_expirationTimeBufferRequiresSorting = !1);
                        for(var h = _$r - 1; h >= 0; --h){
                            var e = _$s[h], u = n[e];
                            if (_$i < u || u <= 0) break;
                            this.DestroyParticle(e);
                        }
                    }, _$r.RotateBuffer = function(t1, i, n) {
                        if (t1 !== i && i !== n) {
                            if (sr(this.m_flagsBuffer.data, t1, i, n), this.m_lastBodyContactStepBuffer.data && sr(this.m_lastBodyContactStepBuffer.data, t1, i, n), this.m_bodyContactCountBuffer.data && sr(this.m_bodyContactCountBuffer.data, t1, i, n), this.m_consecutiveContactStepsBuffer.data && sr(this.m_consecutiveContactStepsBuffer.data, t1, i, n), sr(this.m_positionBuffer.data, t1, i, n), sr(this.m_velocityBuffer.data, t1, i, n), sr(this.m_groupBuffer, t1, i, n), this.m_hasForce && sr(this.m_forceBuffer, t1, i, n), this.m_staticPressureBuffer && sr(this.m_staticPressureBuffer, t1, i, n), this.m_depthBuffer && sr(this.m_depthBuffer, t1, i, n), this.m_colorBuffer.data && sr(this.m_colorBuffer.data, t1, i, n), this.m_userDataBuffer.data && sr(this.m_userDataBuffer.data, t1, i, n), this.m_handleIndexBuffer.data) {
                                sr(this.m_handleIndexBuffer.data, t1, i, n);
                                for(var _$s = t1; _$s < n; ++_$s){
                                    var _$r = this.m_handleIndexBuffer.data[_$s];
                                    _$r && _$r.SetIndex(_(_$r.GetIndex()));
                                }
                            }
                            if (this.m_expirationTimeBuffer.data) {
                                sr(this.m_expirationTimeBuffer.data, t1, i, n);
                                for(var h = this.GetParticleCount(), e = this.m_indexByExpirationTimeBuffer.data, u = 0; u < h; ++u)e[u] = _(e[u]);
                            }
                            for(var o = 0; o < this.m_proxyBuffer.count; o++){
                                var f = this.m_proxyBuffer.data[o];
                                f.index = _(f.index);
                            }
                            for(var _$c = 0; _$c < this.m_contactBuffer.count; _$c++){
                                var a = this.m_contactBuffer.data[_$c];
                                a.indexA = _(a.indexA), a.indexB = _(a.indexB);
                            }
                            for(var v = 0; v < this.m_bodyContactBuffer.count; v++){
                                var l = this.m_bodyContactBuffer.data[v];
                                l.index = _(l.index);
                            }
                            for(var _$d = 0; _$d < this.m_pairBuffer.count; _$d++){
                                var w = this.m_pairBuffer.data[_$d];
                                w.indexA = _(w.indexA), w.indexB = _(w.indexB);
                            }
                            for(var g = 0; g < this.m_triadBuffer.count; g++){
                                var p = this.m_triadBuffer.data[g];
                                p.indexA = _(p.indexA), p.indexB = _(p.indexB), p.indexC = _(p.indexC);
                            }
                            for(var _$y = this.m_groupList; _$y; _$y = _$y.GetNext())_$y.m_firstIndex = _(_$y.m_firstIndex), _$y.m_lastIndex = _(_$y.m_lastIndex - 1) + 1;
                        }
                        function _(s) {
                            return s < t1 ? s : s < i ? s + n - i : s < n ? s + t1 - i : s;
                        }
                    }, _$r.GetCriticalVelocity = function(t1) {
                        return this.m_particleDiameter * t1.inv_dt;
                    }, _$r.GetCriticalVelocitySquared = function(t1) {
                        var _$i = this.GetCriticalVelocity(t1);
                        return _$i * _$i;
                    }, _$r.GetCriticalPressure = function(t1) {
                        return this.m_def.density * this.GetCriticalVelocitySquared(t1);
                    }, _$r.GetParticleStride = function() {
                        return .75 * this.m_particleDiameter;
                    }, _$r.GetParticleMass = function() {
                        var _$t = this.GetParticleStride();
                        return this.m_def.density * _$t * _$t;
                    }, _$r.GetParticleInvMass = function() {
                        var _$t = 1.3333333333333333 * this.m_inverseDiameter;
                        return this.m_inverseDensity * _$t * _$t;
                    }, _$r.GetFixtureContactFilter = function() {
                        return this.m_allParticleFlags & t1.b2ParticleFlag.b2_fixtureContactFilterParticle ? this.m_world.m_contactManager.m_contactFilter : null;
                    }, _$r.GetParticleContactFilter = function() {
                        return this.m_allParticleFlags & t1.b2ParticleFlag.b2_particleContactFilterParticle ? this.m_world.m_contactManager.m_contactFilter : null;
                    }, _$r.GetFixtureContactListener = function() {
                        return this.m_allParticleFlags & t1.b2ParticleFlag.b2_fixtureContactListenerParticle ? this.m_world.m_contactManager.m_contactListener : null;
                    }, _$r.GetParticleContactListener = function() {
                        return this.m_allParticleFlags & t1.b2ParticleFlag.b2_particleContactListenerParticle ? this.m_world.m_contactManager.m_contactListener : null;
                    }, _$r.SetUserOverridableBuffer = function(t1, i) {
                        t1.data = i, t1.userSuppliedCapacity = i.length;
                    }, _$r.SetGroupFlags = function(i, n) {
                        var _$s = i.m_groupFlags;
                        (_$s ^ n) & t1.b2ParticleGroupFlag.b2_solidParticleGroup && (n |= t1.b2ParticleGroupFlag.b2_particleGroupNeedsUpdateDepth), _$s & ~n && (this.m_needsUpdateAllGroupFlags = !0), ~this.m_allGroupFlags & n && (n & t1.b2ParticleGroupFlag.b2_solidParticleGroup && (this.m_depthBuffer = this.RequestBuffer(this.m_depthBuffer)), this.m_allGroupFlags |= n), i.m_groupFlags = n;
                    }, s.BodyContactCompare = function(t1, i) {
                        return t1.index === i.index ? t1.weight > i.weight : t1.index < i.index;
                    }, _$r.RemoveSpuriousBodyContacts = function() {
                        Qs(this.m_bodyContactBuffer.data, 0, this.m_bodyContactBuffer.count, s.BodyContactCompare);
                        var _$t = s.RemoveSpuriousBodyContacts_s_n, _$i = s.RemoveSpuriousBodyContacts_s_pos, n = s.RemoveSpuriousBodyContacts_s_normal, _$r = this, h = -1, e = 0;
                        this.m_bodyContactBuffer.count = tr(this.m_bodyContactBuffer.data, function(s) {
                            if (s.index !== h && (e = 0, h = s.index), e++ > 3) return !0;
                            var u = _$t.Copy(s.normal);
                            u.SelfMul(_$r.m_particleDiameter * (1 - s.weight));
                            var o = _$z.AddVV(_$r.m_positionBuffer.data[s.index], u, _$i);
                            if (!s.fixture.TestPoint(o)) {
                                for(var f = s.fixture.GetShape().GetChildCount(), a = 0; a < f; a++)if (.008 > s.fixture.ComputeDistance(o, n, a)) return !1;
                                return !0;
                            }
                            return !1;
                        }, this.m_bodyContactBuffer.count);
                    }, _$r.DetectStuckParticle = function(t1) {
                        this.m_stuckThreshold <= 0 || (++this.m_bodyContactCountBuffer.data[t1], 2 === this.m_bodyContactCountBuffer.data[t1] && (++this.m_consecutiveContactStepsBuffer.data[t1], this.m_consecutiveContactStepsBuffer.data[t1] > this.m_stuckThreshold && (this.m_stuckParticleBuffer.data[this.m_stuckParticleBuffer.Append()] = t1)), this.m_lastBodyContactStepBuffer.data[t1] = this.m_timestamp);
                    }, _$r.ValidateParticleIndex = function(t1) {
                        return t1 >= 0 && t1 < this.GetParticleCount() && -1 !== t1;
                    }, _$r.GetQuantizedTimeElapsed = function() {
                        return Math.floor(this.m_timeElapsed / 4294967296);
                    }, _$r.LifetimeToExpirationTime = function(t1) {
                        return this.m_timeElapsed + Math.floor(t1 / this.m_def.lifetimeGranularity * 4294967296);
                    }, _$r.ForceCanBeApplied = function(i) {
                        return !(i & t1.b2ParticleFlag.b2_wallParticle);
                    }, _$r.PrepareForceBuffer = function() {
                        if (!this.m_hasForce) {
                            for(var _$t = 0; _$t < this.m_count; _$t++)this.m_forceBuffer[_$t].SetZero();
                            this.m_hasForce = !0;
                        }
                    }, _$r.IsRigidGroup = function(i) {
                        return null !== i && !!(i.m_groupFlags & t1.b2ParticleGroupFlag.b2_rigidParticleGroup);
                    }, _$r.GetLinearVelocity = function(t1, i, n, s) {
                        return t1 && this.IsRigidGroup(t1) ? t1.GetLinearVelocityFromWorldPoint(n, s) : s.Copy(this.m_velocityBuffer.data[i]);
                    }, _$r.InitDampingParameter = function(t1, i, n, s, r, h, e, u) {
                        t1[0] = s > 0 ? 1 / s : 0, i[0] = r > 0 ? 1 / r : 0, n[0] = _$z.CrossVV(_$z.SubVV(e, h, _$z.s_t0), u);
                    }, _$r.InitDampingParameterWithRigidGroupOrParticle = function(i, n, s, r, h, e, u, o) {
                        if (h && r) this.InitDampingParameter(i, n, s, h.GetMass(), h.GetInertia(), h.GetCenter(), u, o);
                        else {
                            var f = this.m_flagsBuffer.data[e];
                            this.InitDampingParameter(i, n, s, f & t1.b2ParticleFlag.b2_wallParticle ? 0 : this.GetParticleMass(), 0, u, u, o);
                        }
                    }, _$r.ComputeDampingImpulse = function(t1, i, n, s, r, h, e) {
                        var u = t1 + i * n * n + s + r * h * h;
                        return u > 0 ? e / u : 0;
                    }, _$r.ApplyDamping = function(t1, i, n, s, r, h, e, u) {
                        r && s ? (r.m_linearVelocity.SelfMulAdd(e * t1, u), r.m_angularVelocity += e * n * i) : this.m_velocityBuffer.data[h].SelfMulAdd(e * t1, u);
                    }, s;
                }();
                vr.xTruncBits = 12, vr.yTruncBits = 12, vr.tagBits = 32, vr.yOffset = 1 << vr.yTruncBits - 1, vr.yShift = vr.tagBits - vr.yTruncBits, vr.xShift = vr.tagBits - vr.yTruncBits - vr.xTruncBits, vr.xScale = 1 << vr.xShift, vr.xOffset = vr.xScale * (1 << vr.xTruncBits - 1), vr.yMask = (1 << vr.yTruncBits) - 1 << vr.yShift, vr.xMask = ~vr.yMask, vr.DestroyParticlesInShape_s_aabb = new _$xt, vr.CreateParticleGroup_s_transform = new J, vr.ComputeCollisionEnergy_s_v = new _$z, vr.QueryShapeAABB_s_aabb = new _$xt, vr.QueryPointAABB_s_aabb = new _$xt, vr.RayCast_s_aabb = new _$xt, vr.RayCast_s_p = new _$z, vr.RayCast_s_v = new _$z, vr.RayCast_s_n = new _$z, vr.RayCast_s_point = new _$z, vr.k_pairFlags = t1.b2ParticleFlag.b2_springParticle, vr.k_triadFlags = t1.b2ParticleFlag.b2_elasticParticle, vr.k_noPressureFlags = t1.b2ParticleFlag.b2_powderParticle | t1.b2ParticleFlag.b2_tensileParticle, vr.k_extraDampingFlags = t1.b2ParticleFlag.b2_staticPressureParticle, vr.k_barrierWallFlags = t1.b2ParticleFlag.b2_barrierParticle | t1.b2ParticleFlag.b2_wallParticle, vr.CreateParticlesStrokeShapeForGroup_s_edge = new kn, vr.CreateParticlesStrokeShapeForGroup_s_d = new _$z, vr.CreateParticlesStrokeShapeForGroup_s_p = new _$z, vr.CreateParticlesFillShapeForGroup_s_aabb = new _$xt, vr.CreateParticlesFillShapeForGroup_s_p = new _$z, vr.UpdatePairsAndTriads_s_dab = new _$z, vr.UpdatePairsAndTriads_s_dbc = new _$z, vr.UpdatePairsAndTriads_s_dca = new _$z, vr.AddContact_s_d = new _$z, vr.UpdateBodyContacts_s_aabb = new _$xt, vr.Solve_s_subStep = new _$Os, vr.SolveCollision_s_aabb = new _$xt, vr.SolveGravity_s_gravity = new _$z, vr.SolveBarrier_s_aabb = new _$xt, vr.SolveBarrier_s_va = new _$z, vr.SolveBarrier_s_vb = new _$z, vr.SolveBarrier_s_pba = new _$z, vr.SolveBarrier_s_vba = new _$z, vr.SolveBarrier_s_vc = new _$z, vr.SolveBarrier_s_pca = new _$z, vr.SolveBarrier_s_vca = new _$z, vr.SolveBarrier_s_qba = new _$z, vr.SolveBarrier_s_qca = new _$z, vr.SolveBarrier_s_dv = new _$z, vr.SolveBarrier_s_f = new _$z, vr.SolvePressure_s_f = new _$z, vr.SolveDamping_s_v = new _$z, vr.SolveDamping_s_f = new _$z, vr.SolveRigidDamping_s_t0 = new _$z, vr.SolveRigidDamping_s_t1 = new _$z, vr.SolveRigidDamping_s_p = new _$z, vr.SolveRigidDamping_s_v = new _$z, vr.SolveExtraDamping_s_v = new _$z, vr.SolveExtraDamping_s_f = new _$z, vr.SolveRigid_s_position = new _$z, vr.SolveRigid_s_rotation = new _$K, vr.SolveRigid_s_transform = new J, vr.SolveRigid_s_velocityTransform = new J, vr.SolveElastic_s_pa = new _$z, vr.SolveElastic_s_pb = new _$z, vr.SolveElastic_s_pc = new _$z, vr.SolveElastic_s_r = new _$K, vr.SolveElastic_s_t0 = new _$z, vr.SolveSpring_s_pa = new _$z, vr.SolveSpring_s_pb = new _$z, vr.SolveSpring_s_d = new _$z, vr.SolveSpring_s_f = new _$z, vr.SolveTensile_s_weightedNormal = new _$z, vr.SolveTensile_s_s = new _$z, vr.SolveTensile_s_f = new _$z, vr.SolveViscous_s_v = new _$z, vr.SolveViscous_s_f = new _$z, vr.SolveRepulsive_s_f = new _$z, vr.SolvePowder_s_f = new _$z, vr.SolveSolid_s_f = new _$z, vr.RemoveSpuriousBodyContacts_s_n = new _$z, vr.RemoveSpuriousBodyContacts_s_pos = new _$z, vr.RemoveSpuriousBodyContacts_s_normal = new _$z;
                var _$lr = function() {
                    function t1() {
                        this._data = null, this.userSuppliedCapacity = 0;
                    }
                    return s(t1, [
                        {
                            key: "data",
                            get: function get() {
                                return this._data;
                            },
                            set: function set(t1) {
                                this._data = t1;
                            }
                        }
                    ]), t1;
                }(), dr = function() {
                    function t1() {
                        this.index = -1, this.tag = 0;
                    }
                    return t1.CompareProxyProxy = function(t1, i) {
                        return t1.tag < i.tag;
                    }, t1.CompareTagProxy = function(t1, i) {
                        return t1 < i.tag;
                    }, t1.CompareProxyTag = function(t1, i) {
                        return t1.tag < i;
                    }, t1;
                }(), wr = function() {
                    function t1(t1, i, n, s, r) {
                        this.m_system = t1, this.m_xLower = (i & vr.xMask) >>> 0, this.m_xUpper = (n & vr.xMask) >>> 0, this.m_yLower = (i & vr.yMask) >>> 0, this.m_yUpper = (n & vr.yMask) >>> 0, this.m_first = s, this.m_last = r;
                    }
                    return t1.prototype.GetNext = function() {
                        for(; this.m_first < this.m_last;){
                            var _$t = (this.m_system.m_proxyBuffer.data[this.m_first].tag & vr.xMask) >>> 0;
                            if (_$t >= this.m_xLower && _$t <= this.m_xUpper) return this.m_system.m_proxyBuffer.data[this.m_first++].index;
                            this.m_first++;
                        }
                        return -1;
                    }, t1;
                }(), gr = function gr() {
                    this.next = null, this.count = 0, this.index = 0;
                }, pr = function() {
                    function t1() {}
                    var _$i = t1.prototype;
                    return _$i.Allocate = function(t1, i) {
                        return i;
                    }, _$i.Clear = function() {}, _$i.GetCount = function() {
                        return 0;
                    }, _$i.Invalidate = function() {}, _$i.GetValidBuffer = function() {
                        return [];
                    }, _$i.GetBuffer = function() {
                        return [];
                    }, _$i.SetCount = function() {}, t1;
                }(), yr = function(t1) {
                    function i() {
                        return t1.apply(this, arguments) || this;
                    }
                    h(i, t1);
                    var n = i.prototype;
                    return n.Initialize = function() {}, n.Find = function() {
                        return -1;
                    }, i;
                }(pr), _r = function(t1) {
                    function i() {
                        return t1.apply(this, arguments) || this;
                    }
                    h(i, t1);
                    var n = i.prototype;
                    return n.Initialize = function() {}, n.Find = function() {
                        return -1;
                    }, i;
                }(pr), mr = function() {
                    function t1() {}
                    var _$i = t1.prototype;
                    return _$i.IsNecessary = function() {
                        return !0;
                    }, _$i.ShouldCreatePair = function() {
                        return !0;
                    }, _$i.ShouldCreateTriad = function() {
                        return !0;
                    }, t1;
                }(), br = function(t1) {
                    function i(i, n, s, r) {
                        var _$h;
                        return (_$h = t1.call(this) || this).m_callDestructionListener = !1, _$h.m_destroyed = 0, _$h.m_system = i, _$h.m_shape = n, _$h.m_xf = s, _$h.m_callDestructionListener = r, _$h.m_destroyed = 0, _$h;
                    }
                    h(i, t1);
                    var n = i.prototype;
                    return n.ReportFixture = function() {
                        return !1;
                    }, n.ReportParticle = function(t1, i) {
                        return t1 === this.m_system && (this.m_shape.TestPoint(this.m_xf, this.m_system.m_positionBuffer.data[i]) && (this.m_system.DestroyParticle(i, this.m_callDestructionListener), this.m_destroyed++), !0);
                    }, n.Destroyed = function() {
                        return this.m_destroyed;
                    }, i;
                }(As), kr = function(t1) {
                    function i(i) {
                        var n;
                        return (n = t1.call(this) || this).m_threshold = 0, n.m_threshold = i, n;
                    }
                    h(i, t1);
                    var n = i.prototype;
                    return n.ShouldCreatePair = function(t1, i) {
                        return t1 < this.m_threshold && this.m_threshold <= i || i < this.m_threshold && this.m_threshold <= t1;
                    }, n.ShouldCreateTriad = function(t1, i, n) {
                        return (t1 < this.m_threshold || i < this.m_threshold || n < this.m_threshold) && (this.m_threshold <= t1 || this.m_threshold <= i || this.m_threshold <= n);
                    }, i;
                }(mr), Ar = function(i) {
                    function n(n, s) {
                        var _$r;
                        return void 0 === s && (s = n.length), (_$r = i.call(this, t1.b2ShapeType.e_unknown, 0) || this).m_shapeCount = 0, _$r.m_shapes = n, _$r.m_shapeCount = s, _$r;
                    }
                    h(n, i);
                    var s = n.prototype;
                    return s.Clone = function() {
                        throw Error();
                    }, s.GetChildCount = function() {
                        return 1;
                    }, s.TestPoint = function(t1, i) {
                        for(var _$n = 0; _$n < this.m_shapeCount; _$n++)if (this.m_shapes[_$n].TestPoint(t1, i)) return !0;
                        return !1;
                    }, s.ComputeDistance = function() {
                        return 0;
                    }, s.RayCast = function() {
                        return !1;
                    }, s.ComputeAABB = function(t1, i) {
                        var _$n = new _$xt;
                        t1.lowerBound.x = 1e37, t1.lowerBound.y = 1e37, t1.upperBound.x = -1e+37, t1.upperBound.y = -1e+37;
                        for(var s = 0; s < this.m_shapeCount; s++)for(var _$r = this.m_shapes[s].GetChildCount(), _$h = 0; _$h < _$r; _$h++)this.m_shapes[s].ComputeAABB(_$n, i, _$h), t1.Combine1(_$n);
                    }, s.ComputeMass = function() {}, s.SetupDistanceProxy = function() {}, s.ComputeSubmergedArea = function() {
                        return 0;
                    }, s.Dump = function() {}, n;
                }(_$_n), Er = function(i) {
                    function n(t1) {
                        var _$n;
                        return (_$n = i.call(this) || this).m_flagsBuffer = t1, _$n;
                    }
                    return h(n, i), n.prototype.IsNecessary = function(i) {
                        return !!(this.m_flagsBuffer.data[i] & t1.b2ParticleFlag.b2_reactiveParticle);
                    }, n;
                }(mr), Tr = function(i) {
                    function n(t1, n) {
                        var s;
                        return void 0 === n && (n = null), (s = i.call(this, t1) || this).m_contactFilter = null, s.m_contactFilter = n, s;
                    }
                    h(n, i);
                    var s = n.prototype;
                    return s.ShouldCollideFixtureParticle = function(i, n, s) {
                        return !(this.m_contactFilter && this.m_system.GetFlagsBuffer()[s] & t1.b2ParticleFlag.b2_fixtureContactFilterParticle) || this.m_contactFilter.ShouldCollideFixtureParticle(i, this.m_system, s);
                    }, s.ReportFixtureAndParticle = function(i, s, r) {
                        var _$h = n.ReportFixtureAndParticle_s_n, e = n.ReportFixtureAndParticle_s_rp, u = this.m_system.m_positionBuffer.data[r], f = i.ComputeDistance(u, _$h, s);
                        if (f < this.m_system.m_particleDiameter && this.ShouldCollideFixtureParticle(i, this.m_system, r)) {
                            var _$c = i.GetBody(), a = _$c.GetWorldCenter(), v = _$c.GetMass(), l = _$c.GetInertia() - v * _$c.GetLocalCenter().LengthSquared(), g = this.m_system.m_flagsBuffer.data[r] & t1.b2ParticleFlag.b2_wallParticle ? 0 : this.m_system.GetParticleInvMass(), p = _$z.SubVV(u, a, e), _$y = _$z.CrossVV(p, _$h), _$_ = g + (v > 0 ? 1 / v : 0) + (l > 0 ? 1 / l : 0) * _$y * _$y, m = this.m_system.m_bodyContactBuffer.data[this.m_system.m_bodyContactBuffer.Append()];
                            m.index = r, m.body = _$c, m.fixture = i, m.weight = 1 - f * this.m_system.m_inverseDiameter, m.normal.Copy(_$h.SelfNeg()), m.mass = _$_ > 0 ? 1 / _$_ : 0, this.m_system.DetectStuckParticle(r);
                        }
                    }, n;
                }(er);
                Tr.ReportFixtureAndParticle_s_n = new _$z, Tr.ReportFixtureAndParticle_s_rp = new _$z;
                var _$Sr = function(i) {
                    function n(t1, n) {
                        var s;
                        return (s = i.call(this, t1) || this).m_step = n, s;
                    }
                    h(n, i);
                    var s = n.prototype;
                    return s.ReportFixtureAndParticle = function(i, s, r) {
                        var _$h = n.ReportFixtureAndParticle_s_p1, e = n.ReportFixtureAndParticle_s_output, u = n.ReportFixtureAndParticle_s_input, o = n.ReportFixtureAndParticle_s_p, f = n.ReportFixtureAndParticle_s_v, a = n.ReportFixtureAndParticle_s_f, v = i.GetBody(), l = this.m_system.m_positionBuffer.data[r], _$d = this.m_system.m_velocityBuffer.data[r];
                        if (0 === this.m_system.m_iterationIndex) {
                            var p = J.MulTXV(v.m_xf0, l, _$h);
                            i.GetShape().GetType() === t1.b2ShapeType.e_circleShape && (p.SelfSub(v.GetLocalCenter()), _$K.MulRV(v.m_xf0.q, p, p), _$K.MulTRV(v.m_xf.q, p, p), p.SelfAdd(v.GetLocalCenter())), J.MulXV(v.m_xf, p, u.p1);
                        } else u.p1.Copy(l);
                        if (_$z.AddVMulSV(l, this.m_step.dt, _$d, u.p2), u.maxFraction = 1, i.RayCast(e, u, s)) {
                            var _$y = e.normal;
                            o.x = (1 - e.fraction) * u.p1.x + e.fraction * u.p2.x + .008 * _$y.x, o.y = (1 - e.fraction) * u.p1.y + e.fraction * u.p2.y + .008 * _$y.y, f.x = this.m_step.inv_dt * (o.x - l.x), f.y = this.m_step.inv_dt * (o.y - l.y), this.m_system.m_velocityBuffer.data[r].Copy(f), a.x = this.m_step.inv_dt * this.m_system.GetParticleMass() * (_$d.x - f.x), a.y = this.m_step.inv_dt * this.m_system.GetParticleMass() * (_$d.y - f.y), this.m_system.ParticleApplyForce(r, a);
                        }
                    }, s.ReportParticle = function() {
                        return !1;
                    }, n;
                }(er);
                _$Sr.ReportFixtureAndParticle_s_p1 = new _$z, _$Sr.ReportFixtureAndParticle_s_output = new _$Ut, _$Sr.ReportFixtureAndParticle_s_input = new _$Ft, _$Sr.ReportFixtureAndParticle_s_p = new _$z, _$Sr.ReportFixtureAndParticle_s_v = new _$z, _$Sr.ReportFixtureAndParticle_s_f = new _$z;
                var Or = function() {
                    function i(t1) {
                        this.m_newFixture = !1, this.m_locked = !1, this.m_clearForces = !0, this.m_contactManager = new Ts, this.m_bodyList = null, this.m_jointList = null, this.m_particleSystemList = null, this.m_bodyCount = 0, this.m_jointCount = 0, this.m_gravity = new _$z, this.m_allowSleep = !0, this.m_destructionListener = null, this.m_debugDraw = null, this.m_inv_dt0 = 0, this.m_warmStarting = !0, this.m_continuousPhysics = !0, this.m_subStepping = !1, this.m_stepComplete = !0, this.m_profile = new Ss, this.m_island = new xs, this.s_stack = [], this.m_controllerList = null, this.m_controllerCount = 0, this.m_gravity.Copy(t1);
                    }
                    var s = i.prototype;
                    return s.SetDestructionListener = function(t1) {
                        this.m_destructionListener = t1;
                    }, s.SetContactFilter = function(t1) {
                        this.m_contactManager.m_contactFilter = t1;
                    }, s.SetContactListener = function(t1) {
                        this.m_contactManager.m_contactListener = t1;
                    }, s.SetDebugDraw = function(t1) {
                        this.m_debugDraw = t1;
                    }, s.CreateBody = function(t1) {
                        if (void 0 === t1 && (t1 = {}), this.IsLocked()) throw Error();
                        var _$i = new Cn(t1, this);
                        return _$i.m_prev = null, _$i.m_next = this.m_bodyList, this.m_bodyList && (this.m_bodyList.m_prev = _$i), this.m_bodyList = _$i, ++this.m_bodyCount, _$i;
                    }, s.DestroyBody = function(t1) {
                        if (this.IsLocked()) throw Error();
                        for(var _$i = t1.m_jointList; _$i;){
                            var n = _$i;
                            _$i = _$i.next, this.m_destructionListener && this.m_destructionListener.SayGoodbyeJoint(n.joint), this.DestroyJoint(n.joint), t1.m_jointList = _$i;
                        }
                        t1.m_jointList = null;
                        for(var s = t1.m_controllerList; s;){
                            var _$r = s;
                            s = s.nextController, _$r.controller.RemoveBody(t1);
                        }
                        for(var h = t1.m_contactList; h;){
                            var e = h;
                            h = h.next, this.m_contactManager.Destroy(e.contact);
                        }
                        t1.m_contactList = null;
                        for(var u = t1.m_fixtureList; u;){
                            var o = u;
                            u = u.m_next, this.m_destructionListener && this.m_destructionListener.SayGoodbyeFixture(o), o.DestroyProxies(), o.Reset(), t1.m_fixtureList = u, t1.m_fixtureCount -= 1;
                        }
                        t1.m_fixtureList = null, t1.m_fixtureCount = 0, t1.m_prev && (t1.m_prev.m_next = t1.m_next), t1.m_next && (t1.m_next.m_prev = t1.m_prev), t1 === this.m_bodyList && (this.m_bodyList = t1.m_next), --this.m_bodyCount;
                    }, i._Joint_Create = function(i) {
                        switch(i.type){
                            case t1.b2JointType.e_distanceJoint:
                                return new _$Fn(i);
                            case t1.b2JointType.e_mouseJoint:
                                return new _$Xn(i);
                            case t1.b2JointType.e_prismaticJoint:
                                return new _$Yn(i);
                            case t1.b2JointType.e_revoluteJoint:
                                return new _$Zn(i);
                            case t1.b2JointType.e_pulleyJoint:
                                return new _$Jn(i);
                            case t1.b2JointType.e_gearJoint:
                                return new _$Vn(i);
                            case t1.b2JointType.e_wheelJoint:
                                return new hs(i);
                            case t1.b2JointType.e_weldJoint:
                                return new ss(i);
                            case t1.b2JointType.e_frictionJoint:
                                return new _$Gn(i);
                            case t1.b2JointType.e_ropeJoint:
                                return new _$is(i);
                            case t1.b2JointType.e_motorJoint:
                                return new _$zn(i);
                            case t1.b2JointType.e_areaJoint:
                                return new _$xn(i);
                        }
                        throw Error();
                    }, i._Joint_Destroy = function() {}, s.CreateJoint = function(t1) {
                        if (this.IsLocked()) throw Error();
                        var n = i._Joint_Create(t1);
                        n.m_prev = null, n.m_next = this.m_jointList, this.m_jointList && (this.m_jointList.m_prev = n), this.m_jointList = n, ++this.m_jointCount, n.m_edgeA.prev = null, n.m_edgeA.next = n.m_bodyA.m_jointList, n.m_bodyA.m_jointList && (n.m_bodyA.m_jointList.prev = n.m_edgeA), n.m_bodyA.m_jointList = n.m_edgeA, n.m_edgeB.prev = null, n.m_edgeB.next = n.m_bodyB.m_jointList, n.m_bodyB.m_jointList && (n.m_bodyB.m_jointList.prev = n.m_edgeB), n.m_bodyB.m_jointList = n.m_edgeB;
                        var s = n.m_bodyA, _$r = n.m_bodyB;
                        if (!n.m_collideConnected) for(var h = _$r.GetContactList(); h;)h.other === s && h.contact.FlagForFiltering(), h = h.next;
                        return n;
                    }, s.DestroyJoint = function(t1) {
                        if (this.IsLocked()) throw Error();
                        t1.m_prev && (t1.m_prev.m_next = t1.m_next), t1.m_next && (t1.m_next.m_prev = t1.m_prev), t1 === this.m_jointList && (this.m_jointList = t1.m_next);
                        var n = t1.m_bodyA, s = t1.m_bodyB, _$r = t1.m_collideConnected;
                        if (n.SetAwake(!0), s.SetAwake(!0), t1.m_edgeA.prev && (t1.m_edgeA.prev.next = t1.m_edgeA.next), t1.m_edgeA.next && (t1.m_edgeA.next.prev = t1.m_edgeA.prev), t1.m_edgeA === n.m_jointList && (n.m_jointList = t1.m_edgeA.next), t1.m_edgeA.Reset(), t1.m_edgeB.prev && (t1.m_edgeB.prev.next = t1.m_edgeB.next), t1.m_edgeB.next && (t1.m_edgeB.next.prev = t1.m_edgeB.prev), t1.m_edgeB === s.m_jointList && (s.m_jointList = t1.m_edgeB.next), t1.m_edgeB.Reset(), i._Joint_Destroy(t1), --this.m_jointCount, !_$r) for(var h = s.GetContactList(); h;)h.other === n && h.contact.FlagForFiltering(), h = h.next;
                    }, s.CreateParticleSystem = function(t1) {
                        if (this.IsLocked()) throw Error();
                        var _$i = new vr(t1, this);
                        return _$i.m_prev = null, _$i.m_next = this.m_particleSystemList, this.m_particleSystemList && (this.m_particleSystemList.m_prev = _$i), this.m_particleSystemList = _$i, _$i;
                    }, s.DestroyParticleSystem = function(t1) {
                        if (this.IsLocked()) throw Error();
                        t1.m_prev && (t1.m_prev.m_next = t1.m_next), t1.m_next && (t1.m_next.m_prev = t1.m_prev), t1 === this.m_particleSystemList && (this.m_particleSystemList = t1.m_next);
                    }, s.CalculateReasonableParticleIterations = function(t1) {
                        return null === this.m_particleSystemList ? 1 : Gs(this.m_gravity.Length(), function(t1) {
                            for(var _$i = 1e37, s = t1.GetParticleSystemList(); null !== s; s = s.m_next)_$i = N(_$i, s.GetRadius());
                            return _$i;
                        }(this), t1);
                    }, s.Step = function(t1, n, s, r) {
                        void 0 === r && (r = this.CalculateReasonableParticleIterations(t1));
                        var h = i.Step_s_stepTimer.Reset();
                        this.m_newFixture && (this.m_contactManager.FindNewContacts(), this.m_newFixture = !1), this.m_locked = !0;
                        var e = i.Step_s_step;
                        e.dt = t1, e.velocityIterations = n, e.positionIterations = s, e.particleIterations = r, e.inv_dt = t1 > 0 ? 1 / t1 : 0, e.dtRatio = this.m_inv_dt0 * t1, e.warmStarting = this.m_warmStarting;
                        var u = i.Step_s_timer.Reset();
                        if (this.m_contactManager.Collide(), this.m_profile.collide = u.GetMilliseconds(), this.m_stepComplete && e.dt > 0) {
                            for(var o = i.Step_s_timer.Reset(), f = this.m_particleSystemList; f; f = f.m_next)f.Solve(e);
                            this.Solve(e), this.m_profile.solve = o.GetMilliseconds();
                        }
                        if (this.m_continuousPhysics && e.dt > 0) {
                            var _$c = i.Step_s_timer.Reset();
                            this.SolveTOI(e), this.m_profile.solveTOI = _$c.GetMilliseconds();
                        }
                        e.dt > 0 && (this.m_inv_dt0 = e.inv_dt), this.m_clearForces && this.ClearForces(), this.m_locked = !1, this.m_profile.step = h.GetMilliseconds();
                    }, s.ClearForces = function() {
                        for(var _$t = this.m_bodyList; _$t; _$t = _$t.m_next)_$t.m_force.SetZero(), _$t.m_torque = 0;
                    }, s.DrawParticleSystem = function(t1) {
                        if (null !== this.m_debugDraw) {
                            var _$i = t1.GetParticleCount();
                            if (_$i) {
                                var n = t1.GetRadius(), s = t1.GetPositionBuffer();
                                if (t1.m_colorBuffer.data) {
                                    var _$r = t1.GetColorBuffer();
                                    this.m_debugDraw.DrawParticles(s, n, _$r, _$i);
                                } else this.m_debugDraw.DrawParticles(s, n, null, _$i);
                            }
                        }
                    }, s.DrawDebugData = function() {
                        if (null !== this.m_debugDraw) {
                            var n = this.m_debugDraw.GetFlags(), s = i.DrawDebugData_s_color.SetRGB(0, 0, 0);
                            if (n & t1.b2DrawFlags.e_shapeBit) for(var _$r = this.m_bodyList; _$r; _$r = _$r.m_next){
                                var h = _$r.m_xf;
                                this.m_debugDraw.PushTransform(h);
                                for(var e = _$r.GetFixtureList(); e; e = e.m_next)_$r.IsActive() ? _$r.GetType() === t1.b2BodyType.b2_staticBody ? s.SetRGB(.5, .9, .5) : _$r.GetType() === t1.b2BodyType.b2_kinematicBody ? s.SetRGB(.5, .5, .9) : _$r.IsAwake() ? s.SetRGB(.9, .7, .7) : s.SetRGB(.6, .6, .6) : s.SetRGB(.5, .5, .3), this.DrawShape(e, s);
                                this.m_debugDraw.PopTransform(h);
                            }
                            if (n & t1.b2DrawFlags.e_particleBit) for(var u = this.m_particleSystemList; u; u = u.m_next)this.DrawParticleSystem(u);
                            if (n & t1.b2DrawFlags.e_jointBit) for(var o = this.m_jointList; o; o = o.m_next)this.DrawJoint(o);
                            if (n & t1.b2DrawFlags.e_aabbBit) {
                                s.SetRGB(.9, .3, .9);
                                for(var f = i.DrawDebugData_s_vs, _$c = this.m_bodyList; _$c; _$c = _$c.m_next)if (_$c.IsActive()) for(var a = _$c.GetFixtureList(); a; a = a.m_next)for(var v = 0; v < a.m_proxyCount; ++v){
                                    var l = a.m_proxies[v].treeNode.aabb;
                                    f[0].Set(l.lowerBound.x, l.lowerBound.y), f[1].Set(l.upperBound.x, l.lowerBound.y), f[2].Set(l.upperBound.x, l.upperBound.y), f[3].Set(l.lowerBound.x, l.upperBound.y), this.m_debugDraw.DrawPolygon(f, 4, s);
                                }
                            }
                            if (n & t1.b2DrawFlags.e_centerOfMassBit) for(var _$d = this.m_bodyList; _$d; _$d = _$d.m_next){
                                var w = i.DrawDebugData_s_xf;
                                w.q.Copy(_$d.m_xf.q), w.p.Copy(_$d.GetWorldCenter()), this.m_debugDraw.DrawTransform(w);
                            }
                            if (n & t1.b2DrawFlags.e_controllerBit) for(var g = this.m_controllerList; g; g = g.m_next)g.Draw(this.m_debugDraw);
                        }
                    }, s.QueryAABB = function() {
                        _instanceof(arguments.length <= 0 ? void 0 : arguments[0], As) ? this._QueryAABB(arguments.length <= 0 ? void 0 : arguments[0], arguments.length <= 1 ? void 0 : arguments[1]) : this._QueryAABB(null, arguments.length <= 0 ? void 0 : arguments[0], arguments.length <= 1 ? void 0 : arguments[1]);
                    }, s._QueryAABB = function(t1, i, n) {
                        if (this.m_contactManager.m_broadPhase.Query(i, function(i) {
                            var s = i.userData.fixture;
                            return t1 ? t1.ReportFixture(s) : !n || n(s);
                        }), _instanceof(t1, As)) for(var s = this.m_particleSystemList; s; s = s.m_next)t1.ShouldQueryParticleSystem(s) && s.QueryAABB(t1, i);
                    }, s.QueryAllAABB = function(t1, i) {
                        return void 0 === i && (i = []), this.QueryAABB(t1, function(t1) {
                            return i.push(t1), !0;
                        }), i;
                    }, s.QueryPointAABB = function() {
                        _instanceof(arguments.length <= 0 ? void 0 : arguments[0], As) ? this._QueryPointAABB(arguments.length <= 0 ? void 0 : arguments[0], arguments.length <= 1 ? void 0 : arguments[1]) : this._QueryPointAABB(null, arguments.length <= 0 ? void 0 : arguments[0], arguments.length <= 1 ? void 0 : arguments[1]);
                    }, s._QueryPointAABB = function(t1, i, n) {
                        if (this.m_contactManager.m_broadPhase.QueryPoint(i, function(i) {
                            var s = i.userData.fixture;
                            return t1 ? t1.ReportFixture(s) : !n || n(s);
                        }), _instanceof(t1, As)) for(var s = this.m_particleSystemList; s; s = s.m_next)t1.ShouldQueryParticleSystem(s) && s.QueryPointAABB(t1, i);
                    }, s.QueryAllPointAABB = function(t1, i) {
                        return void 0 === i && (i = []), this.QueryPointAABB(t1, function(t1) {
                            return i.push(t1), !0;
                        }), i;
                    }, s.QueryFixtureShape = function() {
                        _instanceof(arguments.length <= 0 ? void 0 : arguments[0], As) ? this._QueryFixtureShape(arguments.length <= 0 ? void 0 : arguments[0], arguments.length <= 1 ? void 0 : arguments[1], arguments.length <= 2 ? void 0 : arguments[2], arguments.length <= 3 ? void 0 : arguments[3]) : this._QueryFixtureShape(null, arguments.length <= 0 ? void 0 : arguments[0], arguments.length <= 1 ? void 0 : arguments[1], arguments.length <= 2 ? void 0 : arguments[2], arguments.length <= 3 ? void 0 : arguments[3]);
                    }, s._QueryFixtureShape = function(t1, n, s, r, h) {
                        var e = i.QueryFixtureShape_s_aabb;
                        if (n.ComputeAABB(e, r, s), this.m_contactManager.m_broadPhase.Query(e, function(i) {
                            var e = i.userData, u = e.fixture;
                            if (zt(n, s, u.GetShape(), e.childIndex, r, u.GetBody().GetTransform())) {
                                if (t1) return t1.ReportFixture(u);
                                if (h) return h(u);
                            }
                            return !0;
                        }), _instanceof(t1, As)) for(var u = this.m_particleSystemList; u; u = u.m_next)t1.ShouldQueryParticleSystem(u) && u.QueryAABB(t1, e);
                    }, s.QueryAllFixtureShape = function(t1, i, n, s) {
                        return void 0 === s && (s = []), this.QueryFixtureShape(t1, i, n, function(t1) {
                            return s.push(t1), !0;
                        }), s;
                    }, s.QueryFixturePoint = function() {
                        _instanceof(arguments.length <= 0 ? void 0 : arguments[0], As) ? this._QueryFixturePoint(arguments.length <= 0 ? void 0 : arguments[0], arguments.length <= 1 ? void 0 : arguments[1]) : this._QueryFixturePoint(null, arguments.length <= 0 ? void 0 : arguments[0], arguments.length <= 1 ? void 0 : arguments[1]);
                    }, s._QueryFixturePoint = function(t1, i, n) {
                        if (this.m_contactManager.m_broadPhase.QueryPoint(i, function(s) {
                            var _$r = s.userData.fixture;
                            if (_$r.TestPoint(i)) {
                                if (t1) return t1.ReportFixture(_$r);
                                if (n) return n(_$r);
                            }
                            return !0;
                        }), t1) for(var s = this.m_particleSystemList; s; s = s.m_next)t1.ShouldQueryParticleSystem(s) && s.QueryPointAABB(t1, i);
                    }, s.QueryAllFixturePoint = function(t1, i) {
                        return void 0 === i && (i = []), this.QueryFixturePoint(t1, function(t1) {
                            return i.push(t1), !0;
                        }), i;
                    }, s.RayCast = function() {
                        _instanceof(arguments.length <= 0 ? void 0 : arguments[0], Es) ? this._RayCast(arguments.length <= 0 ? void 0 : arguments[0], arguments.length <= 1 ? void 0 : arguments[1], arguments.length <= 2 ? void 0 : arguments[2]) : this._RayCast(null, arguments.length <= 0 ? void 0 : arguments[0], arguments.length <= 1 ? void 0 : arguments[1], arguments.length <= 2 ? void 0 : arguments[2]);
                    }, s._RayCast = function(t1, n, s, r) {
                        var h = i.RayCast_s_input;
                        if (h.maxFraction = 1, h.p1.Copy(n), h.p2.Copy(s), this.m_contactManager.m_broadPhase.RayCast(h, function(h, e) {
                            var u = e.userData, o = u.fixture, f = u.childIndex, _$c = i.RayCast_s_output;
                            if (o.RayCast(_$c, h, f)) {
                                var a = _$c.fraction, v = i.RayCast_s_point;
                                if (v.Set((1 - a) * n.x + a * s.x, (1 - a) * n.y + a * s.y), t1) return t1.ReportFixture(o, v, _$c.normal, a);
                                if (r) return r(o, v, _$c.normal, a);
                            }
                            return h.maxFraction;
                        }), t1) for(var e = this.m_particleSystemList; e; e = e.m_next)t1.ShouldQueryParticleSystem(e) && e.RayCast(t1, n, s);
                    }, s.RayCastOne = function(t1, i) {
                        var n = null, s = 1;
                        return this.RayCast(t1, i, function(t1, i, r, h) {
                            return h < s && (s = h, n = t1), s;
                        }), n;
                    }, s.RayCastAll = function(t1, i, n) {
                        return void 0 === n && (n = []), this.RayCast(t1, i, function(t1) {
                            return n.push(t1), 1;
                        }), n;
                    }, s.GetBodyList = function() {
                        return this.m_bodyList;
                    }, s.GetJointList = function() {
                        return this.m_jointList;
                    }, s.GetParticleSystemList = function() {
                        return this.m_particleSystemList;
                    }, s.GetContactList = function() {
                        return this.m_contactManager.m_contactList;
                    }, s.SetAllowSleeping = function(t1) {
                        if (t1 !== this.m_allowSleep && (this.m_allowSleep = t1, !this.m_allowSleep)) for(var _$i = this.m_bodyList; _$i; _$i = _$i.m_next)_$i.SetAwake(!0);
                    }, s.GetAllowSleeping = function() {
                        return this.m_allowSleep;
                    }, s.SetWarmStarting = function(t1) {
                        this.m_warmStarting = t1;
                    }, s.GetWarmStarting = function() {
                        return this.m_warmStarting;
                    }, s.SetContinuousPhysics = function(t1) {
                        this.m_continuousPhysics = t1;
                    }, s.GetContinuousPhysics = function() {
                        return this.m_continuousPhysics;
                    }, s.SetSubStepping = function(t1) {
                        this.m_subStepping = t1;
                    }, s.GetSubStepping = function() {
                        return this.m_subStepping;
                    }, s.GetProxyCount = function() {
                        return this.m_contactManager.m_broadPhase.GetProxyCount();
                    }, s.GetBodyCount = function() {
                        return this.m_bodyCount;
                    }, s.GetJointCount = function() {
                        return this.m_jointCount;
                    }, s.GetContactCount = function() {
                        return this.m_contactManager.m_contactCount;
                    }, s.GetTreeHeight = function() {
                        return this.m_contactManager.m_broadPhase.GetTreeHeight();
                    }, s.GetTreeBalance = function() {
                        return this.m_contactManager.m_broadPhase.GetTreeBalance();
                    }, s.GetTreeQuality = function() {
                        return this.m_contactManager.m_broadPhase.GetTreeQuality();
                    }, s.SetGravity = function(t1, i) {
                        if (void 0 === i && (i = !0), !_$z.IsEqualToV(this.m_gravity, t1) && (this.m_gravity.Copy(t1), i)) for(var n = this.m_bodyList; n; n = n.m_next)n.SetAwake(!0);
                    }, s.GetGravity = function() {
                        return this.m_gravity;
                    }, s.IsLocked = function() {
                        return this.m_locked;
                    }, s.SetAutoClearForces = function(t1) {
                        this.m_clearForces = t1;
                    }, s.GetAutoClearForces = function() {
                        return this.m_clearForces;
                    }, s.ShiftOrigin = function(t1) {
                        if (this.IsLocked()) throw Error();
                        for(var _$i = this.m_bodyList; _$i; _$i = _$i.m_next)_$i.m_xf.p.SelfSub(t1), _$i.m_sweep.c0.SelfSub(t1), _$i.m_sweep.c.SelfSub(t1);
                        for(var n = this.m_jointList; n; n = n.m_next)n.ShiftOrigin(t1);
                        this.m_contactManager.m_broadPhase.ShiftOrigin(t1);
                    }, s.GetContactManager = function() {
                        return this.m_contactManager;
                    }, s.GetProfile = function() {
                        return this.m_profile;
                    }, s.Dump = function(i) {
                        if (!this.m_locked) {
                            i("const g: b2Vec2 = new b2Vec2(%.15f, %.15f);\n", this.m_gravity.x, this.m_gravity.y), i("this.m_world.SetGravity(g);\n"), i("const bodies: b2Body[] = [];\n"), i("const joints: b2Joint[] = [];\n");
                            for(var n = 0, s = this.m_bodyList; s; s = s.m_next)s.m_islandIndex = n, s.Dump(i), ++n;
                            n = 0;
                            for(var _$r = this.m_jointList; _$r; _$r = _$r.m_next)_$r.m_index = n, ++n;
                            for(var h = this.m_jointList; h; h = h.m_next)h.m_type !== t1.b2JointType.e_gearJoint && (i("{\n"), h.Dump(i), i("}\n"));
                            for(var e = this.m_jointList; e; e = e.m_next)e.m_type === t1.b2JointType.e_gearJoint && (i("{\n"), e.Dump(i), i("}\n"));
                        }
                    }, s.DrawJoint = function(n) {
                        if (null !== this.m_debugDraw) {
                            var s = n.GetBodyA(), _$r = n.GetBodyB(), h = s.m_xf, e = _$r.m_xf, u = h.p, o = e.p, f = n.GetAnchorA(i.DrawJoint_s_p1), _$c = n.GetAnchorB(i.DrawJoint_s_p2), a = i.DrawJoint_s_color.SetRGB(.5, .8, .8);
                            switch(n.m_type){
                                case t1.b2JointType.e_distanceJoint:
                                    this.m_debugDraw.DrawSegment(f, _$c, a);
                                    break;
                                case t1.b2JointType.e_pulleyJoint:
                                    var l = n.GetGroundAnchorA(), _$d = n.GetGroundAnchorB();
                                    this.m_debugDraw.DrawSegment(l, f, a), this.m_debugDraw.DrawSegment(_$d, _$c, a), this.m_debugDraw.DrawSegment(l, _$d, a);
                                    break;
                                case t1.b2JointType.e_mouseJoint:
                                    var w = i.DrawJoint_s_c;
                                    w.Set(0, 1, 0), this.m_debugDraw.DrawPoint(f, 4, w), this.m_debugDraw.DrawPoint(_$c, 4, w), w.Set(.8, .8, .8), this.m_debugDraw.DrawSegment(f, _$c, w);
                                    break;
                                default:
                                    this.m_debugDraw.DrawSegment(u, f, a), this.m_debugDraw.DrawSegment(f, _$c, a), this.m_debugDraw.DrawSegment(o, _$c, a);
                            }
                        }
                    }, s.DrawShape = function(n, s) {
                        if (null !== this.m_debugDraw) {
                            var _$r = n.GetShape();
                            switch(_$r.m_type){
                                case t1.b2ShapeType.e_circleShape:
                                    var e = _$r.m_p, u = _$r.m_radius, o = _$z.UNITX;
                                    this.m_debugDraw.DrawSolidCircle(e, u, o, s);
                                    break;
                                case t1.b2ShapeType.e_edgeShape:
                                    var _$c = _$r.m_vertex1, a = _$r.m_vertex2;
                                    this.m_debugDraw.DrawSegment(_$c, a, s);
                                    break;
                                case t1.b2ShapeType.e_chainShape:
                                    var l = _$r.m_count, _$d = _$r.m_vertices, w = i.DrawShape_s_ghostColor.SetRGBA(.75 * s.r, .75 * s.g, .75 * s.b, s.a), g = _$d[0];
                                    if (this.m_debugDraw.DrawPoint(g, 4, s), _$r.m_hasPrevVertex) {
                                        var p = _$r.m_prevVertex;
                                        this.m_debugDraw.DrawSegment(p, g, w), this.m_debugDraw.DrawCircle(p, .1, w);
                                    }
                                    for(var _$y = 1; _$y < l; ++_$y){
                                        var _$_ = _$d[_$y];
                                        this.m_debugDraw.DrawSegment(g, _$_, s), this.m_debugDraw.DrawPoint(_$_, 4, s), g = _$_;
                                    }
                                    if (_$r.m_hasNextVertex) {
                                        var m = _$r.m_nextVertex;
                                        this.m_debugDraw.DrawSegment(m, g, w), this.m_debugDraw.DrawCircle(m, .1, w);
                                    }
                                    break;
                                case t1.b2ShapeType.e_polygonShape:
                                    var k = _$r.m_count, A = _$r.m_vertices;
                                    this.m_debugDraw.DrawSolidPolygon(A, k, s);
                            }
                        }
                    }, s.Solve = function(i) {
                        for(var n = this.m_bodyList; n; n = n.m_next)n.m_xf0.Copy(n.m_xf);
                        for(var s = this.m_controllerList; s; s = s.m_next)s.Step(i);
                        this.m_profile.solveInit = 0, this.m_profile.solveVelocity = 0, this.m_profile.solvePosition = 0;
                        var _$r = this.m_island;
                        _$r.Initialize(this.m_bodyCount, this.m_contactManager.m_contactCount, this.m_jointCount, this.m_contactManager.m_contactListener);
                        for(var h = this.m_bodyList; h; h = h.m_next)h.m_islandFlag = !1;
                        for(var e = this.m_contactManager.m_contactList; e; e = e.m_next)e.m_islandFlag = !1;
                        for(var u = this.m_jointList; u; u = u.m_next)u.m_islandFlag = !1;
                        for(var o = this.s_stack, f = this.m_bodyList; f; f = f.m_next)if (!f.m_islandFlag && f.IsAwake() && f.IsActive() && f.GetType() !== t1.b2BodyType.b2_staticBody) {
                            _$r.Clear();
                            var _$c = 0;
                            for(o[_$c++] = f, f.m_islandFlag = !0; _$c > 0;){
                                var a = o[--_$c];
                                if (!a) throw Error();
                                if (_$r.AddBody(a), a.m_awakeFlag = !0, a.GetType() !== t1.b2BodyType.b2_staticBody) {
                                    for(var v = a.m_contactList; v; v = v.next){
                                        var l = v.contact;
                                        if (!l.m_islandFlag && l.IsEnabled() && l.IsTouching()) {
                                            var _$d = l.m_fixtureA.m_isSensor, w = l.m_fixtureB.m_isSensor;
                                            if (!_$d && !w) {
                                                _$r.AddContact(l), l.m_islandFlag = !0;
                                                var g = v.other;
                                                g.m_islandFlag || (o[_$c++] = g, g.m_islandFlag = !0);
                                            }
                                        }
                                    }
                                    for(var p = a.m_jointList; p; p = p.next)if (!p.joint.m_islandFlag) {
                                        var _$y = p.other;
                                        _$y.IsActive() && (_$r.AddJoint(p.joint), p.joint.m_islandFlag = !0, _$y.m_islandFlag || (o[_$c++] = _$y, _$y.m_islandFlag = !0));
                                    }
                                }
                            }
                            var _$_ = new Ss;
                            _$r.Solve(_$_, i, this.m_gravity, this.m_allowSleep), this.m_profile.solveInit += _$_.solveInit, this.m_profile.solveVelocity += _$_.solveVelocity, this.m_profile.solvePosition += _$_.solvePosition;
                            for(var m = 0; m < _$r.m_bodyCount; ++m){
                                var b = _$r.m_bodies[m];
                                b.GetType() === t1.b2BodyType.b2_staticBody && (b.m_islandFlag = !1);
                            }
                        }
                        for(var k = 0; k < o.length && o[k]; ++k)o[k] = null;
                        for(var A = new _$nt, E = this.m_bodyList; E; E = E.m_next)E.m_islandFlag && E.GetType() !== t1.b2BodyType.b2_staticBody && E.SynchronizeFixtures();
                        this.m_contactManager.FindNewContacts(), this.m_profile.broadphase = A.GetMilliseconds();
                    }, s.SolveTOI = function(n) {
                        var s = this.m_island;
                        if (s.Initialize(64, 32, 0, this.m_contactManager.m_contactListener), this.m_stepComplete) {
                            for(var _$r = this.m_bodyList; _$r; _$r = _$r.m_next)_$r.m_islandFlag = !1, _$r.m_sweep.alpha0 = 0;
                            for(var h = this.m_contactManager.m_contactList; h; h = h.m_next)h.m_toiFlag = !1, h.m_islandFlag = !1, h.m_toiCount = 0, h.m_toi = 1;
                        }
                        for(;;){
                            for(var e = null, u = 1, o = this.m_contactManager.m_contactList; o; o = o.m_next)if (o.IsEnabled() && !(o.m_toiCount > 8)) {
                                var f = 1;
                                if (o.m_toiFlag) f = o.m_toi;
                                else {
                                    var _$c = o.GetFixtureA(), a = o.GetFixtureB();
                                    if (_$c.IsSensor() || a.IsSensor()) continue;
                                    var v = _$c.GetBody(), l = a.GetBody(), _$d = v.m_type, w = l.m_type, g = v.IsAwake() && _$d !== t1.b2BodyType.b2_staticBody, p = l.IsAwake() && w !== t1.b2BodyType.b2_staticBody;
                                    if (!g && !p) continue;
                                    var _$y = v.IsBullet() || _$d !== t1.b2BodyType.b2_dynamicBody, _$_ = l.IsBullet() || w !== t1.b2BodyType.b2_dynamicBody;
                                    if (!_$y && !_$_) continue;
                                    var m = v.m_sweep.alpha0;
                                    v.m_sweep.alpha0 < l.m_sweep.alpha0 ? (m = l.m_sweep.alpha0, v.m_sweep.Advance(m)) : l.m_sweep.alpha0 < v.m_sweep.alpha0 && (m = v.m_sweep.alpha0, l.m_sweep.Advance(m));
                                    var b = o.GetChildIndexA(), k = o.GetChildIndexB(), A = i.SolveTOI_s_toi_input;
                                    A.proxyA.SetShape(_$c.GetShape(), b), A.proxyB.SetShape(a.GetShape(), k), A.sweepA.Copy(v.m_sweep), A.sweepB.Copy(l.m_sweep), A.tMax = 1;
                                    var E = i.SolveTOI_s_toi_output;
                                    ki(E, A);
                                    var T = E.t;
                                    f = E.state === t1.b2TOIOutputState.e_touching ? N(m + (1 - m) * T, 1) : 1, o.m_toi = f, o.m_toiFlag = !0;
                                }
                                f < u && (e = o, u = f);
                            }
                            if (null === e || .9999 < u) {
                                this.m_stepComplete = !0;
                                break;
                            }
                            var _$S = e.GetFixtureA(), _$O = e.GetFixtureB(), _$I = _$S.GetBody(), _$R = _$O.GetBody(), _$M = i.SolveTOI_s_backup1.Copy(_$I.m_sweep), _$C = i.SolveTOI_s_backup2.Copy(_$R.m_sweep);
                            if (_$I.Advance(u), _$R.Advance(u), e.Update(this.m_contactManager.m_contactListener), e.m_toiFlag = !1, ++e.m_toiCount, e.IsEnabled() && e.IsTouching()) {
                                _$I.SetAwake(!0), _$R.SetAwake(!0), s.Clear(), s.AddBody(_$I), s.AddBody(_$R), s.AddContact(e), _$I.m_islandFlag = !0, _$R.m_islandFlag = !0, e.m_islandFlag = !0;
                                for(var _$P = 0; _$P < 2; ++_$P){
                                    var _$D = 0 === _$P ? _$I : _$R;
                                    if (_$D.m_type === t1.b2BodyType.b2_dynamicBody) for(var L = _$D.m_contactList; L && s.m_bodyCount !== s.m_bodyCapacity && s.m_contactCount !== s.m_contactCapacity; L = L.next){
                                        var _$B = L.contact;
                                        if (!_$B.m_islandFlag) {
                                            var _$F = L.other;
                                            if (_$F.m_type !== t1.b2BodyType.b2_dynamicBody || _$D.IsBullet() || _$F.IsBullet()) {
                                                var U = _$B.m_fixtureA.m_isSensor, x = _$B.m_fixtureB.m_isSensor;
                                                if (!U && !x) {
                                                    var j = i.SolveTOI_s_backup.Copy(_$F.m_sweep);
                                                    _$F.m_islandFlag || _$F.Advance(u), _$B.Update(this.m_contactManager.m_contactListener), _$B.IsEnabled() && _$B.IsTouching() ? (_$B.m_islandFlag = !0, s.AddContact(_$B), _$F.m_islandFlag || (_$F.m_islandFlag = !0, _$F.m_type !== t1.b2BodyType.b2_staticBody && _$F.SetAwake(!0), s.AddBody(_$F))) : (_$F.m_sweep.Copy(j), _$F.SynchronizeTransform());
                                                }
                                            }
                                        }
                                    }
                                }
                                var G = i.SolveTOI_s_subStep;
                                G.dt = (1 - u) * n.dt, G.inv_dt = 1 / G.dt, G.dtRatio = 1, G.positionIterations = 20, G.velocityIterations = n.velocityIterations, G.particleIterations = n.particleIterations, G.warmStarting = !1, s.SolveTOI(G, _$I.m_islandIndex, _$R.m_islandIndex);
                                for(var H = 0; H < s.m_bodyCount; ++H){
                                    var _$V = s.m_bodies[H];
                                    if (_$V.m_islandFlag = !1, _$V.m_type === t1.b2BodyType.b2_dynamicBody) {
                                        _$V.SynchronizeFixtures();
                                        for(var _$W = _$V.m_contactList; _$W; _$W = _$W.next)_$W.contact.m_toiFlag = !1, _$W.contact.m_islandFlag = !1;
                                    }
                                }
                                if (this.m_contactManager.FindNewContacts(), this.m_subStepping) {
                                    this.m_stepComplete = !1;
                                    break;
                                }
                            } else e.SetEnabled(!1), _$I.m_sweep.Copy(_$M), _$R.m_sweep.Copy(_$C), _$I.SynchronizeTransform(), _$R.SynchronizeTransform();
                        }
                    }, s.AddController = function(t1) {
                        return t1.m_next = this.m_controllerList, t1.m_prev = null, this.m_controllerList && (this.m_controllerList.m_prev = t1), this.m_controllerList = t1, ++this.m_controllerCount, t1;
                    }, s.RemoveController = function(t1) {
                        return t1.m_prev && (t1.m_prev.m_next = t1.m_next), t1.m_next && (t1.m_next.m_prev = t1.m_prev), this.m_controllerList === t1 && (this.m_controllerList = t1.m_next), --this.m_controllerCount, t1.m_prev = null, t1.m_next = null, t1;
                    }, i;
                }();
                Or.Step_s_step = new _$Os, Or.Step_s_stepTimer = new _$nt, Or.Step_s_timer = new _$nt, Or.DrawDebugData_s_color = new _$tt(0, 0, 0), Or.DrawDebugData_s_vs = _$z.MakeArray(4), Or.DrawDebugData_s_xf = new J, Or.QueryFixtureShape_s_aabb = new _$xt, Or.RayCast_s_input = new _$Ft, Or.RayCast_s_output = new _$Ut, Or.RayCast_s_point = new _$z, Or.DrawJoint_s_p1 = new _$z, Or.DrawJoint_s_p2 = new _$z, Or.DrawJoint_s_color = new _$tt(.5, .8, .8), Or.DrawJoint_s_c = new _$tt, Or.DrawShape_s_ghostColor = new _$tt, Or.SolveTOI_s_subStep = new _$Os, Or.SolveTOI_s_backup = new Z, Or.SolveTOI_s_backup1 = new Z, Or.SolveTOI_s_backup2 = new Z, Or.SolveTOI_s_toi_input = new _$fi, Or.SolveTOI_s_toi_output = new ai;
                var _$Ir = function Ir(t1, i) {
                    this.prevBody = null, this.nextBody = null, this.prevController = null, this.nextController = null, this.controller = t1, this.body = i;
                }, Rr = function() {
                    function t1() {
                        this.m_bodyList = null, this.m_bodyCount = 0, this.m_prev = null, this.m_next = null;
                    }
                    var _$i = t1.prototype;
                    return _$i.GetNext = function() {
                        return this.m_next;
                    }, _$i.GetPrev = function() {
                        return this.m_prev;
                    }, _$i.GetBodyList = function() {
                        return this.m_bodyList;
                    }, _$i.AddBody = function(t1) {
                        var _$i = new _$Ir(this, t1);
                        _$i.nextBody = this.m_bodyList, _$i.prevBody = null, this.m_bodyList && (this.m_bodyList.prevBody = _$i), this.m_bodyList = _$i, ++this.m_bodyCount, _$i.nextController = t1.m_controllerList, _$i.prevController = null, t1.m_controllerList && (t1.m_controllerList.prevController = _$i), t1.m_controllerList = _$i, ++t1.m_controllerCount;
                    }, _$i.RemoveBody = function(t1) {
                        if (this.m_bodyCount <= 0) throw Error();
                        for(var _$i = this.m_bodyList; _$i && _$i.body !== t1;)_$i = _$i.nextBody;
                        if (null === _$i) throw Error();
                        _$i.prevBody && (_$i.prevBody.nextBody = _$i.nextBody), _$i.nextBody && (_$i.nextBody.prevBody = _$i.prevBody), this.m_bodyList === _$i && (this.m_bodyList = _$i.nextBody), --this.m_bodyCount, _$i.nextController && (_$i.nextController.prevController = _$i.prevController), _$i.prevController && (_$i.prevController.nextController = _$i.nextController), t1.m_controllerList === _$i && (t1.m_controllerList = _$i.nextController), --t1.m_controllerCount;
                    }, _$i.Clear = function() {
                        for(; this.m_bodyList;)this.RemoveBody(this.m_bodyList.body);
                        this.m_bodyCount = 0;
                    }, t1;
                }(), Mr = function(t1) {
                    function i() {
                        var _$i;
                        return (_$i = t1.apply(this, arguments) || this).normal = new _$z(0, 1), _$i.offset = 0, _$i.density = 0, _$i.velocity = new _$z(0, 0), _$i.linearDrag = 0, _$i.angularDrag = 0, _$i.useDensity = !1, _$i.useWorldGravity = !0, _$i.gravity = new _$z(0, 0), _$i;
                    }
                    h(i, t1);
                    var n = i.prototype;
                    return n.Step = function() {
                        if (this.m_bodyList) {
                            this.useWorldGravity && this.gravity.Copy(this.m_bodyList.body.GetWorld().GetGravity());
                            for(var _$t = this.m_bodyList; _$t; _$t = _$t.nextBody){
                                var _$i = _$t.body;
                                if (_$i.IsAwake()) {
                                    for(var n = new _$z, s = new _$z, _$h = 0, e = 0, u = _$i.GetFixtureList(); u; u = u.m_next){
                                        var _$c, o = new _$z, f = u.GetShape().ComputeSubmergedArea(this.normal, this.offset, _$i.GetTransform(), o);
                                        _$h += f, n.x += f * o.x, n.y += f * o.y, e += f * (_$c = this.useDensity ? u.GetDensity() : 1), s.x += f * o.x * _$c, s.y += f * o.y * _$c;
                                    }
                                    if (n.x /= _$h, n.y /= _$h, s.x /= e, s.y /= e, !(_$h < 1e-5)) {
                                        var a = this.gravity.Clone().SelfNeg();
                                        a.SelfMul(this.density * _$h), _$i.ApplyForce(a, s);
                                        var v = _$i.GetLinearVelocityFromWorldPoint(n, new _$z);
                                        v.SelfSub(this.velocity), v.SelfMul(-this.linearDrag * _$h), _$i.ApplyForce(v, n), _$i.ApplyTorque(-_$i.GetInertia() / _$i.GetMass() * _$h * _$i.GetAngularVelocity() * this.angularDrag);
                                    }
                                }
                            }
                        }
                    }, n.Draw = function(t1) {
                        var n = new _$z, s = new _$z;
                        n.x = this.normal.x * this.offset + 100 * this.normal.y, n.y = this.normal.y * this.offset - 100 * this.normal.x, s.x = this.normal.x * this.offset - 100 * this.normal.y, s.y = this.normal.y * this.offset + 100 * this.normal.x;
                        var _$r = new _$tt(0, 0, .8);
                        t1.DrawSegment(n, s, _$r);
                    }, i;
                }(Rr), Cr = function(t1) {
                    function i() {
                        var _$i;
                        return (_$i = t1.apply(this, arguments) || this).A = new _$z(0, 0), _$i;
                    }
                    h(i, t1);
                    var n = i.prototype;
                    return n.Step = function(t1) {
                        for(var n = _$z.MulSV(t1.dt, this.A, i.Step_s_dtA), s = this.m_bodyList; s; s = s.nextBody){
                            var _$r = s.body;
                            _$r.IsAwake() && _$r.SetLinearVelocity(_$z.AddVV(_$r.GetLinearVelocity(), n, _$z.s_t0));
                        }
                    }, n.Draw = function() {}, i;
                }(Rr);
                Cr.Step_s_dtA = new _$z;
                var Nr = function(t1) {
                    function i() {
                        var _$i;
                        return (_$i = t1.apply(this, arguments) || this).F = new _$z(0, 0), _$i;
                    }
                    h(i, t1);
                    var n = i.prototype;
                    return n.Step = function() {
                        for(var _$t = this.m_bodyList; _$t; _$t = _$t.nextBody){
                            var _$i = _$t.body;
                            _$i.IsAwake() && _$i.ApplyForce(this.F, _$i.GetWorldCenter());
                        }
                    }, n.Draw = function() {}, i;
                }(Rr), Pr = function(t1) {
                    function i() {
                        var _$i;
                        return (_$i = t1.apply(this, arguments) || this).G = 1, _$i.invSqr = !0, _$i;
                    }
                    h(i, t1);
                    var n = i.prototype;
                    return n.Step = function() {
                        if (this.invSqr) for(var _$t = this.m_bodyList; _$t; _$t = _$t.nextBody)for(var n = _$t.body, s = n.GetWorldCenter(), _$h = n.GetMass(), e = this.m_bodyList; e && e !== _$t; e = e.nextBody){
                            var u = e.body, o = u.GetWorldCenter(), f = u.GetMass(), _$c = o.x - s.x, a = o.y - s.y, v = _$c * _$c + a * a;
                            if (!(v < 1e-5)) {
                                var l = i.Step_s_f.Set(_$c, a);
                                l.SelfMul(this.G / v / U(v) * _$h * f), n.IsAwake() && n.ApplyForce(l, s), u.IsAwake() && u.ApplyForce(l.SelfMul(-1), o);
                            }
                        }
                        else for(var _$d = this.m_bodyList; _$d; _$d = _$d.nextBody)for(var w = _$d.body, g = w.GetWorldCenter(), p = w.GetMass(), _$y = this.m_bodyList; _$y && _$y !== _$d; _$y = _$y.nextBody){
                            var _$_ = _$y.body, m = _$_.GetWorldCenter(), b = _$_.GetMass(), k = m.x - g.x, A = m.y - g.y, E = k * k + A * A;
                            if (!(E < 1e-5)) {
                                var T = i.Step_s_f.Set(k, A);
                                T.SelfMul(this.G / E * p * b), w.IsAwake() && w.ApplyForce(T, g), _$_.IsAwake() && _$_.ApplyForce(T.SelfMul(-1), m);
                            }
                        }
                    }, n.Draw = function() {}, i;
                }(Rr);
                Pr.Step_s_f = new _$z;
                var Dr = function(t1) {
                    function i() {
                        var _$i;
                        return (_$i = t1.apply(this, arguments) || this).T = new _$q, _$i.maxTimestep = 0, _$i;
                    }
                    h(i, t1);
                    var n = i.prototype;
                    return n.Step = function(t1) {
                        var n = t1.dt;
                        if (!(n <= 1e-5)) {
                            n > this.maxTimestep && this.maxTimestep > 0 && (n = this.maxTimestep);
                            for(var s = this.m_bodyList; s; s = s.nextBody){
                                var _$h = s.body;
                                if (_$h.IsAwake()) {
                                    var e = _$h.GetWorldVector(_$q.MulMV(this.T, _$h.GetLocalVector(_$h.GetLinearVelocity(), _$z.s_t0), _$z.s_t1), i.Step_s_damping);
                                    _$h.SetLinearVelocity(_$z.AddVV(_$h.GetLinearVelocity(), _$z.MulSV(n, e, _$z.s_t0), _$z.s_t1));
                                }
                            }
                        }
                    }, n.Draw = function() {}, n.SetAxisAligned = function(t1, i) {
                        this.T.ex.x = -t1, this.T.ex.y = 0, this.T.ey.x = 0, this.T.ey.y = -i, this.maxTimestep = t1 > 0 || i > 0 ? 1 / P(t1, i) : 0;
                    }, i;
                }(Rr);
                Dr.Step_s_damping = new _$z;
                var Lr = function() {
                    function t1() {
                        this.m_count = 0, this.m_ps = [], this.m_p0s = [], this.m_vs = [], this.m_ims = [], this.m_Ls = [], this.m_as = [], this.m_gravity = new _$z, this.m_damping = 0, this.m_k2 = 1, this.m_k3 = .1;
                    }
                    var _$i = t1.prototype;
                    return _$i.GetVertexCount = function() {
                        return this.m_count;
                    }, _$i.GetVertices = function() {
                        return this.m_ps;
                    }, _$i.Initialize = function(t1) {
                        this.m_count = t1.count, this.m_ps = _$z.MakeArray(this.m_count), this.m_p0s = _$z.MakeArray(this.m_count), this.m_vs = _$z.MakeArray(this.m_count), this.m_ims = O(this.m_count);
                        for(var _$i = 0; _$i < this.m_count; ++_$i){
                            this.m_ps[_$i].Copy(t1.vertices[_$i]), this.m_p0s[_$i].Copy(t1.vertices[_$i]), this.m_vs[_$i].SetZero();
                            var n = t1.masses[_$i];
                            this.m_ims[_$i] = n > 0 ? 1 / n : 0;
                        }
                        var s = this.m_count - 1, _$r = this.m_count - 2;
                        this.m_Ls = O(s), this.m_as = O(_$r);
                        for(var h = 0; h < s; ++h){
                            var e = this.m_ps[h], u = this.m_ps[h + 1];
                            this.m_Ls[h] = _$z.DistanceVV(e, u);
                        }
                        for(var o = 0; o < _$r; ++o){
                            var f = this.m_ps[o], _$c = this.m_ps[o + 1], a = this.m_ps[o + 2], v = _$z.SubVV(_$c, f, _$z.s_t0), l = _$z.SubVV(a, _$c, _$z.s_t1), _$d = _$z.CrossVV(v, l), w = _$z.DotVV(v, l);
                            this.m_as[o] = _$W(_$d, w);
                        }
                        this.m_gravity.Copy(t1.gravity), this.m_damping = t1.damping, this.m_k2 = t1.k2, this.m_k3 = t1.k3;
                    }, _$i.Step = function(t1, i) {
                        if (0 !== t1) {
                            for(var n = Math.exp(-t1 * this.m_damping), s = 0; s < this.m_count; ++s)this.m_p0s[s].Copy(this.m_ps[s]), this.m_ims[s] > 0 && this.m_vs[s].SelfMulAdd(t1, this.m_gravity), this.m_vs[s].SelfMul(n), this.m_ps[s].SelfMulAdd(t1, this.m_vs[s]);
                            for(var _$r = 0; _$r < i; ++_$r)this.SolveC2(), this.SolveC3(), this.SolveC2();
                            for(var h = 1 / t1, e = 0; e < this.m_count; ++e)_$z.MulSV(h, _$z.SubVV(this.m_ps[e], this.m_p0s[e], _$z.s_t0), this.m_vs[e]);
                        }
                    }, _$i.SolveC2 = function() {
                        for(var _$i = this.m_count - 1, n = 0; n < _$i; ++n){
                            var s = this.m_ps[n], _$r = this.m_ps[n + 1], h = _$z.SubVV(_$r, s, t1.s_d), e = h.Normalize(), u = this.m_ims[n], o = this.m_ims[n + 1];
                            if (u + o !== 0) {
                                var f = u / (u + o), _$c = o / (u + o);
                                s.SelfMulSub(this.m_k2 * f * (this.m_Ls[n] - e), h), _$r.SelfMulAdd(this.m_k2 * _$c * (this.m_Ls[n] - e), h);
                            }
                        }
                    }, _$i.SetAngle = function(t1) {
                        for(var _$i = this.m_count - 2, n = 0; n < _$i; ++n)this.m_as[n] = t1;
                    }, _$i.SolveC3 = function() {
                        for(var _$i = this.m_count - 2, n = 0; n < _$i; ++n){
                            var s = this.m_ps[n], _$r = this.m_ps[n + 1], h = this.m_ps[n + 2], e = this.m_ims[n], o = this.m_ims[n + 1], f = this.m_ims[n + 2], _$c = _$z.SubVV(_$r, s, t1.s_d1), a = _$z.SubVV(h, _$r, t1.s_d2), v = _$c.LengthSquared(), l = a.LengthSquared();
                            if (v * l != 0) {
                                var g = _$W(_$z.CrossVV(_$c, a), _$z.DotVV(_$c, a)), p = _$z.MulSV(-1 / v, _$c.SelfSkew(), t1.s_Jd1), _$y = _$z.MulSV(1 / l, a.SelfSkew(), t1.s_Jd2), _$_ = _$z.NegV(p, t1.s_J1), m = _$z.SubVV(p, _$y, t1.s_J2), k = e * _$z.DotVV(_$_, _$_) + o * _$z.DotVV(m, m) + f * _$z.DotVV(_$y, _$y);
                                if (0 !== k) {
                                    k = 1 / k;
                                    for(var A = g - this.m_as[n]; A > 3.14159265359;)A = (g -= 6.28318530718) - this.m_as[n];
                                    for(; A < -3.14159265359;)A = (g += 6.28318530718) - this.m_as[n];
                                    var E = -this.m_k3 * k * A;
                                    s.SelfMulAdd(e * E, _$_), _$r.SelfMulAdd(o * E, m), h.SelfMulAdd(f * E, _$y);
                                }
                            }
                        }
                    }, _$i.Draw = function(t1) {
                        for(var _$i = new _$tt(.4, .5, .7), n = 0; n < this.m_count - 1; ++n)t1.DrawSegment(this.m_ps[n], this.m_ps[n + 1], _$i);
                    }, t1;
                }();
                Lr.s_d = new _$z, Lr.s_d1 = new _$z, Lr.s_d2 = new _$z, Lr.s_Jd1 = new _$z, Lr.s_Jd2 = new _$z, Lr.s_J1 = new _$z, Lr.s_J2 = new _$z, t1.b2AABB = _$xt, t1.b2Abs = _$C, t1.b2Acos = H, t1.b2Alloc = function() {
                    return null;
                }, t1.b2AreaJoint = _$xn, t1.b2AreaJointDef = _$Un, t1.b2Asin = _$V, t1.b2Assert = function(t1) {
                    if (!t1) {
                        for(var _$i = arguments.length, n = Array(_$i > 1 ? _$i - 1 : 0), s = 1; s < _$i; s++)n[s - 1] = arguments[s];
                        throw f(Error, n);
                    }
                }, t1.b2Atan2 = _$W, t1.b2BlockAllocator = function() {}, t1.b2Body = Cn, t1.b2BodyDef = function() {
                    this.type = t1.b2BodyType.b2_staticBody, this.position = new _$z(0, 0), this.angle = 0, this.linearVelocity = new _$z(0, 0), this.angularVelocity = 0, this.linearDamping = 0, this.angularDamping = 0, this.allowSleep = !0, this.awake = !0, this.fixedRotation = !1, this.bullet = !1, this.active = !0, this.userData = null, this.gravityScale = 1;
                }, t1.b2BroadPhase = _$Zt, t1.b2BuoyancyController = Mr, t1.b2CalculateParticleIterations = Gs, t1.b2ChainAndCircleContact = ws, t1.b2ChainAndPolygonContact = gs, t1.b2ChainShape = _$An, t1.b2CircleContact = cs, t1.b2CircleShape = mn, t1.b2Clamp = D, t1.b2ClipSegmentToLine = Gt, t1.b2ClipVertex = _$Bt, t1.b2CollideCircles = Ti, t1.b2CollideEdgeAndCircle = cn, t1.b2CollideEdgeAndPolygon = gn, t1.b2CollidePolygonAndCircle = Ri, t1.b2CollidePolygons = Zi, t1.b2Color = _$tt, t1.b2ConstantAccelController = Cr, t1.b2ConstantForceController = Nr, t1.b2Contact = _$fs, t1.b2ContactEdge = _$os, t1.b2ContactFactory = ys, t1.b2ContactFeature = Mt, t1.b2ContactFilter = ms, t1.b2ContactID = Ct, t1.b2ContactImpulse = _$bs, t1.b2ContactListener = ks, t1.b2ContactManager = Ts, t1.b2ContactPositionConstraint = Ds, t1.b2ContactRegister = ps, t1.b2ContactSolver = Fs, t1.b2ContactSolverDef = Ls, t1.b2ContactVelocityConstraint = Ps, t1.b2Controller = Rr, t1.b2ControllerEdge = _$Ir, t1.b2Cos = j, t1.b2Counter = st, t1.b2DegToRad = function(t1) {
                    return t1 * _$I;
                }, t1.b2DestructionListener = _s, t1.b2Distance = _t, t1.b2DistanceInput = ut, t1.b2DistanceJoint = _$Fn, t1.b2DistanceJointDef = _$Bn, t1.b2DistanceOutput = _$ot, t1.b2DistanceProxy = ht, t1.b2Draw = it, t1.b2DynamicTree = _$qt, t1.b2EdgeAndCircleContact = ls, t1.b2EdgeAndPolygonContact = ds, t1.b2EdgeShape = kn, t1.b2Filter = _$En, t1.b2Fixture = In, t1.b2FixtureDef = Tn, t1.b2FixtureParticleQueryCallback = er, t1.b2FixtureProxy = Sn, t1.b2Free = function() {}, t1.b2FrictionJoint = _$Gn, t1.b2FrictionJointDef = _$jn, t1.b2GearJoint = _$Vn, t1.b2GearJointDef = _$Hn, t1.b2GetPointStates = function(i, n, s, r) {
                    var h;
                    for(h = 0; h < s.pointCount; ++h){
                        var e = s.points[h].id.key;
                        i[h] = t1.b2PointState.b2_removeState;
                        for(var u = 0, o = r.pointCount; u < o; ++u)if (r.points[u].id.key === e) {
                            i[h] = t1.b2PointState.b2_persistState;
                            break;
                        }
                    }
                    for(; h < 2; ++h)i[h] = t1.b2PointState.b2_nullState;
                    for(h = 0; h < r.pointCount; ++h){
                        var f = r.points[h].id.key;
                        n[h] = t1.b2PointState.b2_addState;
                        for(var _$c = 0, a = s.pointCount; _$c < a; ++_$c)if (s.points[_$c].id.key === f) {
                            n[h] = t1.b2PointState.b2_persistState;
                            break;
                        }
                    }
                    for(; h < 2; ++h)n[h] = t1.b2PointState.b2_nullState;
                }, t1.b2GravityController = Pr, t1.b2GrowableBuffer = hr, t1.b2GrowableStack = _$rt, t1.b2InvSqrt = F, t1.b2IsPowerOfTwo = function(t1) {
                    return t1 > 0 && !(t1 & t1 - 1);
                }, t1.b2IsValid = L, t1.b2Island = xs, t1.b2Jacobian = Nn, t1.b2Joint = Ln, t1.b2JointDef = Dn, t1.b2JointEdge = Pn, t1.b2Log = function() {}, t1.b2MakeArray = S, t1.b2MakeNullArray = function(t1) {
                    for(var _$i = Array(t1), n = 0; n < t1; ++n)_$i[n] = null;
                    return _$i;
                }, t1.b2MakeNumberArray = O, t1.b2Manifold = _$Dt, t1.b2ManifoldPoint = _$Nt, t1.b2MassData = yn, t1.b2Mat22 = _$q, t1.b2Mat33 = _$Y, t1.b2Max = P, t1.b2Maybe = i, t1.b2Min = N, t1.b2MixFriction = es, t1.b2MixRestitution = us, t1.b2MotorJoint = _$zn, t1.b2MotorJointDef = _$Wn, t1.b2MouseJoint = _$Xn, t1.b2MouseJointDef = _$$n, t1.b2NextPowerOfTwo = function(t1) {
                    return t1 |= t1 >> 1 & 2147483647, t1 |= t1 >> 2 & 1073741823, t1 |= t1 >> 4 & 268435455, 1 + ((t1 |= t1 >> 8 & 16777215) | t1 >> 16 & 65535);
                }, t1.b2Pair = _$Qt, t1.b2PairLessThan = ti, t1.b2ParseInt = function(t1) {
                    return parseInt(t1, 10);
                }, t1.b2ParseUInt = function(t1) {
                    return Math.abs(parseInt(t1, 10));
                }, t1.b2ParticleBodyContact = or, t1.b2ParticleContact = ur, t1.b2ParticleDef = js, t1.b2ParticleGroup = zs, t1.b2ParticleGroupDef = Ws, t1.b2ParticleHandle = Vs, t1.b2ParticlePair = fr, t1.b2ParticlePairSet = _r, t1.b2ParticleSystem = vr, t1.b2ParticleSystemDef = ar, t1.b2ParticleSystem_CompositeShape = Ar, t1.b2ParticleSystem_ConnectionFilter = mr, t1.b2ParticleSystem_DestroyParticlesInShapeCallback = br, t1.b2ParticleSystem_FixedSetAllocator = pr, t1.b2ParticleSystem_FixtureParticle = function(t1, i) {
                    this.second = -1, this.first = t1, this.second = i;
                }, t1.b2ParticleSystem_FixtureParticleSet = yr, t1.b2ParticleSystem_InsideBoundsEnumerator = wr, t1.b2ParticleSystem_JoinParticleGroupsFilter = kr, t1.b2ParticleSystem_ParticleListNode = gr, t1.b2ParticleSystem_ParticlePair = function(t1, i) {
                    this.first = -1, this.second = -1, this.first = t1, this.second = i;
                }, t1.b2ParticleSystem_Proxy = dr, t1.b2ParticleSystem_ReactiveFilter = Er, t1.b2ParticleSystem_SolveCollisionCallback = _$Sr, t1.b2ParticleSystem_UpdateBodyContactsCallback = Tr, t1.b2ParticleSystem_UserOverridableBuffer = _$lr, t1.b2ParticleTriad = cr, t1.b2PolygonAndCircleContact = vs, t1.b2PolygonContact = as, t1.b2PolygonShape = bn, t1.b2Position = Is, t1.b2PositionSolverManifold = Bs, t1.b2Pow = x, t1.b2PrismaticJoint = _$Yn, t1.b2PrismaticJointDef = _$qn, t1.b2Profile = Ss, t1.b2PulleyJoint = _$Jn, t1.b2PulleyJointDef = _$Kn, t1.b2QueryCallback = As, t1.b2RadToDeg = function(t1) {
                    return 57.29577951307855 * t1;
                }, t1.b2Random = function() {
                    return 2 * Math.random() - 1;
                }, t1.b2RandomRange = function(t1, i) {
                    return (i - t1) * Math.random() + t1;
                }, t1.b2RayCastCallback = Es, t1.b2RayCastInput = _$Ft, t1.b2RayCastOutput = _$Ut, t1.b2RevoluteJoint = _$Zn, t1.b2RevoluteJointDef = _$Qn, t1.b2Rope = Lr, t1.b2RopeDef = function() {
                    this.vertices = [], this.count = 0, this.masses = [], this.gravity = new _$z(0, 0), this.damping = .1, this.k2 = .9, this.k3 = .1;
                }, t1.b2RopeJoint = _$is, t1.b2RopeJointDef = _$ts, t1.b2Rot = _$K, t1.b2SeparationFunction = vi, t1.b2Shape = _$_n, t1.b2ShapeCast = function(t1, i) {
                    t1.iterations = 0, t1.lambda = 1, t1.normal.SetZero(), t1.point.SetZero();
                    var n = i.proxyA, s = i.proxyB, _$r = P(n.m_radius, .016) + P(s.m_radius, .016), h = i.transformA, e = i.transformB, u = i.translationB, o = bt.Set(0, 0), f = 0;
                    kt.m_count = 0;
                    for(var a = kt.m_vertices, l = n.GetSupport(_$K.MulTRV(h.q, _$z.NegV(u, _$z.s_t1), _$z.s_t0)), _$d = J.MulXV(h, n.GetVertex(l), At), w = s.GetSupport(_$K.MulTRV(e.q, u, _$z.s_t0)), g = J.MulXV(e, s.GetVertex(w), Et), p = _$z.SubVV(_$d, g, Tt), _$y = P(.016, _$r - .016), _$_ = 0; _$_ < 20 && _$C(p.Length() - _$y) > .004;){
                        t1.iterations += 1, l = n.GetSupport(_$K.MulTRV(h.q, _$z.NegV(p, _$z.s_t1), _$z.s_t0)), _$d = J.MulXV(h, n.GetVertex(l), At), w = s.GetSupport(_$K.MulTRV(e.q, p, _$z.s_t0)), g = J.MulXV(e, s.GetVertex(w), Et);
                        var m = _$z.SubVV(_$d, g, _$St);
                        p.Normalize();
                        var b = _$z.DotVV(p, m), k = _$z.DotVV(p, u);
                        if (b - _$y > f * k) {
                            if (k <= 0 || (f = (b - _$y) / k) > 1) return !1;
                            o.Copy(p).SelfNeg(), kt.m_count = 0;
                        }
                        var A = a[kt.m_count];
                        switch(A.indexA = w, A.wA.Copy(g).SelfMulAdd(f, u), A.indexB = l, A.wB.Copy(_$d), A.w.Copy(A.wB).SelfSub(A.wA), A.a = 1, kt.m_count += 1, kt.m_count){
                            case 1:
                                break;
                            case 2:
                                kt.Solve2();
                                break;
                            case 3:
                                kt.Solve3();
                        }
                        if (3 === kt.m_count) return !1;
                        kt.GetClosestPoint(p), ++_$_;
                    }
                    return kt.GetWitnessPoints(_$Ot, _$It), p.LengthSquared() > 0 && (o.Copy(p).SelfNeg(), o.Normalize()), t1.normal.Copy(o), t1.lambda = f, t1.iterations = _$_, !0;
                }, t1.b2ShapeCastInput = function() {
                    this.proxyA = new ht, this.proxyB = new ht, this.transformA = new J, this.transformB = new J, this.translationB = new _$z;
                }, t1.b2ShapeCastOutput = function() {
                    this.point = new _$z, this.normal = new _$z, this.lambda = 0, this.iterations = 0;
                }, t1.b2Simplex = _$ct, t1.b2SimplexCache = _$et, t1.b2SimplexVertex = _$ft, t1.b2Sin = G, t1.b2SolverData = Ms, t1.b2Sq = B, t1.b2Sqrt = U, t1.b2StackAllocator = function() {}, t1.b2Swap = function(t1, i) {
                    var n = t1[0];
                    t1[0] = i[0], i[0] = n;
                }, t1.b2Sweep = Z, t1.b2TOIInput = _$fi, t1.b2TOIOutput = ai, t1.b2TensorDampingController = Dr, t1.b2TestOverlapAABB = jt, t1.b2TestOverlapShape = zt, t1.b2TimeOfImpact = ki, t1.b2TimeStep = _$Os, t1.b2Timer = _$nt, t1.b2Transform = J, t1.b2TreeNode = _$Xt, t1.b2Vec2 = _$z, t1.b2Vec2_zero = _$$, t1.b2Vec3 = _$X, t1.b2Velocity = Rs, t1.b2VelocityConstraintPoint = Ns, t1.b2Version = E, t1.b2WeldJoint = ss, t1.b2WeldJointDef = _$ns, t1.b2WheelJoint = hs, t1.b2WheelJointDef = rs, t1.b2World = Or, t1.b2WorldManifold = Lt, t1.b2_180_over_pi = 57.29577951307855, t1.b2_aabbExtension = .1, t1.b2_aabbMultiplier = 2, t1.b2_angularSleepTolerance = 2 / 180 * 3.14159265359, t1.b2_angularSlop = a, t1.b2_barrierCollisionTime = 2.5, t1.b2_baumgarte = .2, t1.b2_branch = "master", t1.b2_commit = "fbf51801d80fc389d43dc46524520e89043b6faf", t1.b2_epsilon = 1e-5, t1.b2_epsilon_sq = e, t1.b2_gjk_reset = function() {
                    t1.b2_gjkCalls = 0, t1.b2_gjkIters = 0, t1.b2_gjkMaxIters = 0;
                }, t1.b2_invalidParticleIndex = -1, t1.b2_linearSleepTolerance = .01, t1.b2_linearSlop = .008, t1.b2_maxAngularCorrection = w, t1.b2_maxFloat = 1e37, t1.b2_maxLinearCorrection = .2, t1.b2_maxManifoldPoints = 2, t1.b2_maxParticleForce = .5, t1.b2_maxParticleIndex = 2147483647, t1.b2_maxParticlePressure = .25, t1.b2_maxPolygonVertices = 8, t1.b2_maxRotation = 1.570796326795, t1.b2_maxRotationSquared = 2.4674011002726646, t1.b2_maxSubSteps = 8, t1.b2_maxTOIContacts = 32, t1.b2_maxTranslation = 2, t1.b2_maxTranslationSquared = 4, t1.b2_maxTriadDistance = 2, t1.b2_maxTriadDistanceSquared = 4, t1.b2_minParticleSystemBufferCapacity = 256, t1.b2_minParticleWeight = 1, t1.b2_minPulleyLength = 2, t1.b2_particleStride = .75, t1.b2_pi = 3.14159265359, t1.b2_pi_over_180 = _$I, t1.b2_polygonRadius = .016, t1.b2_timeToSleep = .5, t1.b2_toiBaumgarte = .75, t1.b2_toi_reset = function() {
                    t1.b2_toiTime = 0, t1.b2_toiMaxTime = 0, t1.b2_toiCalls = 0, t1.b2_toiIters = 0, t1.b2_toiMaxIters = 0, t1.b2_toiRootIters = 0, t1.b2_toiMaxRootIters = 0;
                }, t1.b2_two_pi = 6.28318530718, t1.b2_velocityThreshold = 1, t1.b2_version = T, t1.g_blockSolve = !1, Object.defineProperty(t1, "__esModule", {
                    value: !0
                });
            }(d5), l5(d5);
            var p5 = {}, y5 = [
                "b2_maxPolygonVertices",
                "b2_maxAngularCorrection"
            ];
            for(var _5 in d5)-1 === y5.indexOf(_5) ? -1 === _5.indexOf("b2_") && (p5[_5.replace("b2", "")] = d5[_5]) : p5[_5.slice(3)] = d5[_5];
            var m5 = l5(p5), b5 = t1("em", {
                Static: 0,
                Kinematic: 1,
                Dynamic: 2,
                Animated: 3
            });
            gi(b5), gi(t1("en", {
                None: 0,
                BOX: 1,
                CIRCLE: 2,
                POLYGON: 3
            })), gi(t1("eo", {
                None: 0,
                DISTANCE: 1,
                SPRING: 2,
                WHEEL: 3,
                MOUSE: 4,
                FIXED: 5,
                SLIDER: 6,
                RELATIVE: 7,
                HINGE: 8
            }));
            var k5 = t1("ep", {
                DEFAULT: 1
            });
            gi(k5), t1("eq", k5), t1("er", {
                Closest: 0,
                Any: 1,
                AllClosest: 2,
                All: 3
            });
            var A5 = t1("es", {
                None: "none-contact",
                BEGIN_CONTACT: "begin-contact",
                END_CONTACT: "end-contact",
                PRE_SOLVE: "pre-solve",
                POST_SOLVE: "post-solve"
            }), E5 = (t1("et", {
                None: 0,
                Shape: 1,
                Joint: 2,
                Aabb: 4,
                Pair: 8,
                CenterOfMass: 16,
                Particle: 32,
                Controller: 64,
                All: 63
            }), t1("eu", 32)), T5 = function(t1) {
                function i() {
                    for(var _$i, n = arguments.length, s = Array(n), _$r = 0; _$r < n; _$r++)s[_$r] = arguments[_$r];
                    return (_$i = t1.call.apply(t1, [
                        this
                    ].concat(s)) || this).kL = [], _$i.AL = null, _$i.EL = null, _$i.TL = null, _$i.SL = null, _$i;
                }
                h(i, t1);
                var n = i.prototype;
                return n.OL = function(t1) {
                    this.AL = t1;
                }, n.IL = function(t1) {
                    this.EL = t1;
                }, n.RL = function(t1) {
                    this.TL = t1;
                }, n.ML = function(t1) {
                    this.SL = t1;
                }, n.BeginContact = function(t1) {
                    if (this.AL) {
                        var _$i = t1.GetFixtureA(), n = t1.GetFixtureB(), s = this.kL;
                        t1._shouldReport = !1, -1 === s.indexOf(_$i) && -1 === s.indexOf(n) || (t1._shouldReport = !0, this.AL(t1));
                    }
                }, n.EndContact = function(t1) {
                    this.EL && t1._shouldReport && (t1._shouldReport = !1, this.EL(t1));
                }, n.PreSolve = function(t1, i) {
                    this.TL && t1._shouldReport && this.TL(t1, i);
                }, n.PostSolve = function(t1, i) {
                    this.SL && t1._shouldReport && this.SL(t1, i);
                }, n.CL = function(t1) {
                    this.kL.push(t1);
                }, n.NL = function(t1) {
                    hi(this.kL, t1);
                }, i;
            }(m5.ContactListener), S5 = function(t1) {
                function i() {
                    for(var _$i, n = arguments.length, s = Array(n), _$r = 0; _$r < n; _$r++)s[_$r] = arguments[_$r];
                    return (_$i = t1.call.apply(t1, [
                        this
                    ].concat(s)) || this).Mu = new m5.Vec2, _$i.PL = !1, _$i.DL = [], _$i;
                }
                h(i, t1);
                var n = i.prototype;
                return n.Se = function(t1) {
                    t1 ? (this.PL = !0, this.Mu.x = t1.x, this.Mu.y = t1.y) : this.PL = !1, this.DL.length = 0;
                }, n.ReportFixture = function(t1) {
                    return this.PL ? t1.TestPoint(this.Mu) && this.DL.push(t1) : this.DL.push(t1), !0;
                }, n.LL = function() {
                    return this.DL[0];
                }, n.BL = function() {
                    return this.DL;
                }, i;
            }(m5.QueryCallback), O5 = function(t1) {
                function i() {
                    for(var _$i, n = arguments.length, s = Array(n), _$r = 0; _$r < n; _$r++)s[_$r] = arguments[_$r];
                    return (_$i = t1.call.apply(t1, [
                        this
                    ].concat(s)) || this).U = 0, _$i.DL = [], _$i.CP = [], _$i.FL = [], _$i.UL = [], _$i.xL = 4294967295, _$i;
                }
                h(i, t1);
                var n = i.prototype;
                return n.Se = function(t1, i) {
                    this.U = t1, this.xL = i, this.DL.length = 0, this.CP.length = 0, this.FL.length = 0, this.UL.length = 0;
                }, n.ReportFixture = function(t1, i, n, s) {
                    return t1.GetFilterData().categoryBits & this.xL ? 0 === this.U ? (this.DL[0] = t1, this.CP[0] = i, this.FL[0] = n, this.UL[0] = s, s) : (this.DL.push(t1), this.CP.push(new Or(i.x, i.y)), this.FL.push(new Or(n.x, n.y)), this.UL.push(s), 1 === this.U ? 0 : this.U >= 3 ? 1 : s) : -1;
                }, n.BL = function() {
                    return this.DL;
                }, n.jL = function() {
                    return this.CP;
                }, n.GL = function() {
                    return this.FL;
                }, n.HL = function() {
                    return this.UL;
                }, i;
            }(m5.RayCastCallback);
            function I5(t1, i) {
                var n = i.length;
                return i[t1 < 0 ? n - -t1 % n : t1 % n];
            }
            function R5(t1, i, n) {
                for(var s = []; i < t1;)i += n.length;
                for(; t1 <= i; ++t1)s.push(I5(t1, n));
                return s;
            }
            function M5(t1, i, n) {
                if (N5(t1, n)) {
                    if (D5(I5(t1, n), I5(t1 - 1, n), I5(i, n)) && L5(I5(t1, n), I5(t1 + 1, n), I5(i, n))) return !1;
                } else if (L5(I5(t1, n), I5(t1 + 1, n), I5(i, n)) || D5(I5(t1, n), I5(t1 - 1, n), I5(i, n))) return !1;
                if (N5(i, n)) {
                    if (D5(I5(i, n), I5(i - 1, n), I5(t1, n)) && L5(I5(i, n), I5(i + 1, n), I5(t1, n))) return !1;
                } else if (L5(I5(i, n), I5(i + 1, n), I5(t1, n)) || D5(I5(i, n), I5(i - 1, n), I5(t1, n))) return !1;
                for(var s = 0; s < n.length; ++s)if ((s + 1) % n.length != t1 && s != t1 && (s + 1) % n.length != i && s != i) {
                    var _$r = new Or;
                    if (G5(I5(t1, n), I5(i, n), I5(s, n), I5(s + 1, n), _$r)) return !1;
                }
                return !0;
            }
            function N5(t1, i, n) {
                if (void 0 === n) {
                    var s = t1, _$r = i;
                    t1 = I5(s - 1, _$r), i = I5(s, _$r), void 0 === t1 && (t1 = i), void 0 === (n = I5(s + 1, _$r)) && (n = i);
                }
                return 0 > H5(t1, i, n);
            }
            function D5(t1, i, n) {
                return H5(t1, i, n) >= 0;
            }
            function L5(t1, i, n) {
                return 0 >= H5(t1, i, n);
            }
            function B5(t1, i) {
                var n = i.x - t1.x, s = i.y - t1.y;
                return n * n + s * s;
            }
            function F5(t1) {
                U5(t1) || t1.reverse();
            }
            function U5(t1) {
                return t1.length < 3 || x5(t1) > 0;
            }
            function x5(t1) {
                var i, n = 0;
                for(i = 0; i < t1.length; i++){
                    var s = (i + 1) % t1.length;
                    n += t1[i].x * t1[s].y, n -= t1[i].y * t1[s].x;
                }
                return n / 2;
            }
            function j5(t1, i, n, s) {
                var h = new Or, e = i.y - t1.y, u = t1.x - i.x, o = e * t1.x + u * t1.y, f = s.y - n.y, _$c = n.x - s.x, a = f * n.x + _$c * n.y, v = e * _$c - f * u;
                return 1e-6 >= Math.abs(v - 0) || (h.x = (_$c * o - u * a) / v, h.y = (e * a - f * o) / v), h;
            }
            function G5(t1, i, n, s, r) {
                if (t1 == n || t1 == s || i == n || i == s) return !1;
                var h = t1.x, e = t1.y, u = i.x, o = i.y, f = n.x, _$c = n.y, a = s.x, v = s.y;
                if (Math.max(h, u) < Math.min(f, a) || Math.max(f, a) < Math.min(h, u) || Math.max(e, o) < Math.min(_$c, v) || Math.max(_$c, v) < Math.min(e, o)) return !1;
                var l = (a - f) * (e - _$c) - (v - _$c) * (h - f), _$d = (u - h) * (e - _$c) - (o - e) * (h - f), w = (v - _$c) * (u - h) - (a - f) * (o - e);
                return !(1e-6 > Math.abs(w)) && (_$d /= w, (l /= w) > 0 && l < 1 && _$d > 0 && _$d < 1 && (r.x = h + l * (u - h), r.y = e + l * (o - e), !0));
            }
            function H5(t1, i, n) {
                return t1.x * (i.y - n.y) + i.x * (n.y - t1.y) + n.x * (t1.y - i.y);
            }
            var V5 = Object.freeze({
                __proto__: null,
                ConvexPartition: function t1(i) {
                    F5(i);
                    for(var n, s, _$r, h = [], e = 0, u = 0, o = 0, f = new Or, _$c = new Or, a = 0, v = 0, l = 0; l < i.length; ++l)if (N5(l, i)) {
                        u = o = 1e8;
                        for(var t11, t12, t13, _$d = 0; _$d < i.length; ++_$d)t11 = I5(l - 1, i), H5(t11, I5(l, i), I5(_$d, i)) > 0 && L5(I5(l - 1, i), I5(l, i), I5(_$d - 1, i)) && (n = j5(I5(l - 1, i), I5(l, i), I5(_$d, i), I5(_$d - 1, i)), N5(I5(l + 1, i), I5(l, i), n) && (e = B5(I5(l, i), n)) < u && (u = e, f = n, a = _$d)), t12 = I5(l + 1, i), H5(t12, I5(l, i), I5(_$d + 1, i)) > 0 && L5(I5(l + 1, i), I5(l, i), I5(_$d, i)) && (n = j5(I5(l + 1, i), I5(l, i), I5(_$d, i), I5(_$d + 1, i)), t13 = I5(l - 1, i), H5(t13, I5(l, i), n) > 0 && (e = B5(I5(l, i), n)) < o && (o = e, v = _$d, _$c = n));
                        if (a == (v + 1) % i.length) {
                            var w = f.add(_$c).multiplyScalar(.5);
                            (s = R5(l, v, i)).push(w), (_$r = R5(a, l, i)).push(w);
                        } else {
                            for(var g = 0, p = a; v < a;)v += i.length;
                            for(var _$y = a; _$y <= v; ++_$y)if (M5(l, _$y, i)) {
                                var _$_ = 1 / (B5(I5(l, i), I5(_$y, i)) + 1);
                                N5(_$y, i) ? L5(I5(_$y - 1, i), I5(_$y, i), I5(l, i)) && D5(I5(_$y + 1, i), I5(_$y, i), I5(l, i)) ? _$_ += 3 : _$_ += 2 : _$_ += 1, _$_ > g && (p = _$y, g = _$_);
                            }
                            s = R5(l, p, i), _$r = R5(p, l, i);
                        }
                        return (h = h.concat(t1(s))).concat(t1(_$r));
                    }
                    h.push(i);
                    for(var m = h.length - 1; m >= 0; m--)0 == h[m].length && h.splice(m, 0);
                    return h;
                },
                ForceCounterClockWise: F5,
                IsCounterClockWise: U5
            });
            function W5(t1) {
                K5(t1);
                for(var t11, i, i1 = !0, n = 0, s = t1.length; n < s; ++n){
                    if (t11 = t1[(n + s - 1) % s], i = t1[n], !(0 > $5(t11, i, t1[(n + 1) % s]))) {
                        i1 = !1;
                        break;
                    }
                }
                if (i1) return [
                    t1
                ];
                var _$r = [], h = Z5(t1);
                if (!h) return null;
                for(; h.length;){
                    for(var e = h.splice(0, 1)[0], u = 0, o = e.length; u < o; ++u){
                        for(var f = e[u], _$c = e[(u + 1) % o], a = null, v = 0; v < h.length; ++v){
                            for(var l = h[v], _$d = 0; _$d < 3; ++_$d){
                                var w = l[_$d];
                                if (q5(f, l[(_$d + 1) % 3]) && q5(_$c, w)) {
                                    a = l[(_$d + 2) % 3];
                                    break;
                                }
                            }
                            if (a) break;
                        }
                        if (a && !($5(e[(u + o - 1) % o], f, a) > 0 || $5(a, _$c, e[(u + 2) % o]) > 0)) {
                            for(var g = [], p = (u + 1) % o; p !== u; p = (p + 1) % o)g.push(e[p]);
                            g.push(f, a), e = g, o = g.length, u = -1, h.splice(v, 1);
                        }
                    }
                    _$r.push(e);
                }
                return _$r;
            }
            var z5 = function z5() {
                this.isActive = !1, this.isConvex = !1, this.isEar = !1, this.point = null, this.angleCos = 0, this.shouldUpdate = !1, this.index = 0, this.prev = null, this.next = null;
            };
            function $5(t1, i, n) {
                return (i.y - t1.y) * (n.x - i.x) - (i.x - t1.x) * (n.y - i.y);
            }
            function q5(t1, i) {
                return t1.x === i.x && t1.y === i.y;
            }
            function Y5(t1) {
                for(var i = 0, n = 0, s = t1.length; n < s; ++n){
                    var _$r = t1[n], h = t1[(n + 1) % s];
                    i += (h.x - _$r.x) * (h.y + _$r.y);
                }
                return i > 0;
            }
            function K5(t1) {
                Y5(t1) && t1.reverse();
            }
            function J5(t1, i) {
                if (t1.shouldUpdate) {
                    t1.shouldUpdate = !1;
                    var n = t1.prev.point, s = t1.point, _$r = t1.next.point;
                    t1.isConvex = 0 > $5(n, s, _$r);
                    var h = n.x - s.x, e = n.y - s.y, u = Math.sqrt(h * h + e * e);
                    h /= u, e /= u;
                    var o = _$r.x - s.x, f = _$r.y - s.y, _$c = Math.sqrt(o * o + f * f);
                    if (t1.angleCos = h * (o /= _$c) + e * (f /= _$c), t1.isConvex) {
                        t1.isEar = !0;
                        for(var a = 0, v = i.length; a < v; ++a){
                            var l = i[a];
                            if (l.isActive && l !== t1) {
                                var _$d = l.point;
                                if (!(q5(n, _$d) || q5(s, _$d) || q5(_$r, _$d))) {
                                    var w = $5(n, _$d, s), g = $5(s, _$d, _$r), p = $5(_$r, _$d, n);
                                    if (w > 0 && g > 0 && p > 0 || 0 === w && g >= 0 && p >= 0 && ($5(n, l.prev.point, s) > 0 || $5(n, l.next.point, s) > 0) || 0 === g && w >= 0 && p >= 0 && ($5(s, l.prev.point, _$r) > 0 || $5(s, l.next.point, _$r) > 0) || 0 === p && w >= 0 && g >= 0 && ($5(_$r, l.prev.point, n) > 0 || $5(_$r, l.next.point, n) > 0)) {
                                        t1.isEar = !1;
                                        break;
                                    }
                                }
                            }
                        }
                    } else t1.isEar = !1;
                }
            }
            function Q5(t1) {
                for(var i = t1, n = t1;;)if (q5(i.point, i.next.point) || 0 === $5(i.prev.point, i.point, i.next.point)) {
                    if (i.prev.next = i.next, i.next.prev = i.prev, i.prev.shouldUpdate = !0, i.next.shouldUpdate = !0, i === i.next) break;
                    n = i.prev, i = i.next;
                } else if ((i = i.next) === n) break;
            }
            function Z5(t1) {
                if (K5(t1), t1.length < 4) return [
                    t1
                ];
                for(var i = t1.length, n = [], s = [], _$r = 0; _$r < i; ++_$r){
                    var h = new z5;
                    h.isActive = !0, h.isConvex = !1, h.isEar = !1, h.point = t1[_$r], h.angleCos = 0, h.shouldUpdate = !0, h.index = _$r, n.push(h);
                }
                for(var e = 0; e < i; ++e){
                    var u = n[e];
                    u.prev = n[(e + i - 1) % i], u.next = n[(e + 1) % i];
                }
                n.forEach(function(t1) {
                    return J5(t1, n);
                });
                for(var o = 0; o < i - 3; ++o){
                    for(var f = void 0, _$c = 0; _$c < i; ++_$c){
                        var a = n[_$c];
                        a.isActive && a.isEar && (f ? a.angleCos > f.angleCos && (f = a) : f = a);
                    }
                    if (!f) {
                        for(var v = 0; v < i; ++v){
                            var l = n[v];
                            if (l.isActive && Math.abs($5(l.prev.point, l.point, l.next.point)) > 1e-5) return Q(9644), null;
                        }
                        break;
                    }
                    if (s.push([
                        f.prev.point,
                        f.point,
                        f.next.point
                    ]), f.isActive = !1, f.prev.next = f.next, f.next.prev = f.prev, f.prev.shouldUpdate = !0, f.next.shouldUpdate = !0, Q5(f.next), o === i - 4) break;
                    for(var p = 0; p < i; ++p)J5(n[p], n);
                }
                for(var _$y = 0; _$y < i; ++_$y){
                    var _$_ = n[_$y];
                    if (_$_.isActive) {
                        _$_.prev.isActive = !1, _$_.next.isActive = !1;
                        var m = _$_.prev.point, b = _$_.point, k = _$_.next.point;
                        Math.abs($5(m, b, k)) > 1e-5 && s.push([
                            m,
                            b,
                            k
                        ]);
                    }
                }
                return s;
            }
            var t4 = Object.freeze({
                __proto__: null,
                ConvexPartition: W5
            }), i41 = function i4(t1) {
                if (1 === t1) {
                    for(var i = this, n = function n(t1) {
                        var n = "_" + (1 << t1);
                        i[n] = 0, i.updateArray = [], Object.defineProperty(i, 1 << t1, {
                            get: function get() {
                                return this[n];
                            },
                            set: function set(i) {
                                this[n] !== i && (this[n] = i, 0 > this.updateArray.indexOf(t1) && this.updateArray.push(t1));
                            }
                        });
                    }, s = 0; s < 32; s++)n(s);
                    this._1 = 1;
                } else {
                    for(var _$r = 0; _$r < 32; _$r++)this["" + (1 << _$r)] = 0;
                    this[1] = 1;
                }
            }, n41 = null;
            A.internal.PhysicsGroup2D = k5;
            var s41 = t1("ev", function(t1) {
                function i() {
                    (_$h = t1.call(this) || this).velocityIterations = 10, _$h.positionIterations = 10, _$h.collisionMatrix = new i41, _$h.VL = !0, _$h.WL = !0, _$h.zL = 1, _$h.$L = 1 / 60, _$h.XL = !0, _$h.qL = 0, _$h.YL = !1, _$h.KL = new Or(0, -10 * E5), _$h.lT = [];
                    var _$i, n, _$s, _$r, _$h, e = Ei.querySettings("physics", "gravity");
                    e && (Or.copy(_$h.KL, e), _$h.KL.multiplyScalar(E5)), _$h.WL = null != (_$i = Ei.querySettings("physics", "allowSleep")) ? _$i : _$h.WL, _$h.$L = null != (n = Ei.querySettings("physics", "fixedTimeStep")) ? n : _$h.$L, _$h.zL = null != (_$s = Ei.querySettings("physics", "maxSubSteps")) ? _$s : _$h.zL, _$h.XL = null != (_$r = Ei.querySettings("physics", "autoSimulation")) ? _$r : _$h.XL;
                    var u = Ei.querySettings("physics", "collisionMatrix");
                    if (u) for(var o in u){
                        var f = parseInt(o), _$c = 1 << parseInt(o);
                        _$h.collisionMatrix["" + _$c] = u[f];
                    }
                    var a = Ei.querySettings("physics", "collisionGroups");
                    return a && _instanceof(a, Array) && (a.forEach(function(t1) {
                        k5[t1.name] = 1 << t1.index;
                    }), gi.update(k5)), s51.physicsWorld = h5(), _$h.gravity = _$h.KL, _$h.allowSleep = _$h.WL, _$h;
                }
                h(i, t1);
                var n = i.prototype;
                return n.postUpdate = function(t1) {
                    if (this.VL && this.XL) {
                        PN.emit("director_before_physics"), this.physicsWorld.syncSceneToPhysics(), this.YL = !0;
                        var _$i = this.$L, n = this.velocityIterations, _$s = this.positionIterations;
                        this.qL += t1;
                        for(var _$r = 0; _$r++ < this.zL && this.qL > _$i;)this.physicsWorld.step(_$i, n, _$s), this.qL -= _$i;
                        for(var _$h = this.lT, e = 0, u = _$h.length; e < u; e++){
                            var o = _$h[e];
                            o.func.call(o.target);
                        }
                        _$h.length = 0, this.physicsWorld.syncPhysicsToScene(), this.debugDrawFlags && this.physicsWorld.drawDebug(), this.YL = !1, PN.emit("director_after_physics");
                    }
                }, n._callAfterStep = function(t1, i) {
                    this.YL ? this.lT.push({
                        target: t1,
                        func: i
                    }) : i.call(t1);
                }, n.resetAccumulator = function(t1) {
                    void 0 === t1 && (t1 = 0), this.qL = t1;
                }, n.step = function(t1) {
                    this.physicsWorld.step(t1, this.velocityIterations, this.positionIterations);
                }, n.raycast = function(t1, i, n, s) {
                    return void 0 === n && (n = 0), void 0 === s && (s = 4294967295), this.physicsWorld.raycast(t1, i, n, s);
                }, n.testPoint = function(t1) {
                    return this.physicsWorld.testPoint(t1);
                }, n.testAABB = function(t1) {
                    return this.physicsWorld.testAABB(t1);
                }, i.constructAndRegister = function() {
                    PN.registerSystem(i.ID, i.instance, 0);
                }, s(i, [
                    {
                        key: "enable",
                        get: function get() {
                            return this.VL;
                        },
                        set: function set(t1) {
                            this.VL = t1;
                        }
                    },
                    {
                        key: "allowSleep",
                        get: function get() {
                            return this.WL;
                        },
                        set: function set(t1) {
                            this.WL = t1, this.physicsWorld.setAllowSleep(t1);
                        }
                    },
                    {
                        key: "gravity",
                        get: function get() {
                            return this.KL;
                        },
                        set: function set(t1) {
                            this.KL.set(t1), this.physicsWorld.setGravity(new Or(t1.x / E5, t1.y / E5));
                        }
                    },
                    {
                        key: "maxSubSteps",
                        get: function get() {
                            return this.zL;
                        },
                        set: function set(t1) {
                            this.zL = t1;
                        }
                    },
                    {
                        key: "fixedTimeStep",
                        get: function get() {
                            return this.$L;
                        },
                        set: function set(t1) {
                            this.$L = t1;
                        }
                    },
                    {
                        key: "autoSimulation",
                        get: function get() {
                            return this.XL;
                        },
                        set: function set(t1) {
                            this.XL = t1;
                        }
                    },
                    {
                        key: "debugDrawFlags",
                        get: function get() {
                            return this.physicsWorld.debugDrawFlags;
                        },
                        set: function set(t1) {
                            this.physicsWorld.debugDrawFlags = t1;
                        }
                    },
                    {
                        key: "physicsWorld",
                        get: function get() {
                            return s51.physicsWorld;
                        }
                    },
                    {
                        key: "stepping",
                        get: function get() {
                            return this.YL;
                        }
                    }
                ], [
                    {
                        key: "PHYSICS_NONE",
                        get: function get() {
                            return !s51.id;
                        }
                    },
                    {
                        key: "PHYSICS_BUILTIN",
                        get: function get() {
                            return "builtin" === s51.id;
                        }
                    },
                    {
                        key: "PHYSICS_BOX2D",
                        get: function get() {
                            return "box2d" === s51.id;
                        }
                    },
                    {
                        key: "PHYSICS_BOX2D_WASM",
                        get: function get() {
                            return "box2d-wasm" === s51.id;
                        }
                    },
                    {
                        key: "PhysicsGroup",
                        get: function get() {
                            return k5;
                        }
                    },
                    {
                        key: "instance",
                        get: function get() {
                            return n41 || (n41 = new i), n41;
                        }
                    }
                ]), i;
            }(ne(_v)));
            s41.ID = "PHYSICS_2D", PN.once("director_init", function() {
                s41.constructAndRegister();
            }), t1("ew", {
                Circles: 0,
                FaceA: 1,
                FaceB: 2
            }), gi({
                DYNAMIC: 1,
                STATIC: 2,
                KINEMATIC: 4
            }), gi({
                X_AXIS: 0,
                Y_AXIS: 1,
                Z_AXIS: 2
            }), gi({
                X: 0,
                Y: 1,
                Z: 2,
                SWING1: 3,
                SWING2: 4,
                TWIST: 5
            }), gi({
                VERTEX: 1,
                LINE: 2,
                TRIANGLE: 3,
                TETRAHEDRON: 4
            }), gi({
                BOX: 0,
                SPHERE: 1,
                CAPSULE: 2,
                CYLINDER: 3,
                CONE: 4,
                MESH: 5,
                PLANE: 6,
                SIMPLEX: 7,
                TERRAIN: 8
            }), gi({
                POINT_TO_POINT: 0,
                HINGE: 1,
                FIXED: 2,
                CONFIGURABLE: 3
            }), gi({
                FREE: 0,
                LIMITED: 1,
                LOCKED: 2
            }), gi({
                DISABLED: 0,
                SERVO: 1,
                INDUCTION: 2
            }), gi({
                BOX: 0,
                CAPSULE: 1
            });
            var r4, h41, e4, u4, o4, f4, c4, a4, v4, l4, w4, g4, p4, y4, _4, m4, b4, k4, A4, E4, T4, S4, O4, I4 = {
                DEFAULT: 1
            };
            gi(I4), gi({
                NONE: 0,
                WIRE_FRAME: 1,
                CONSTRAINT: 2,
                AABB: 4
            });
            var R4, M4, C4, N4, P4, D4, L4, B4, U4, x4, j4, G4, H4, V4, W4, z4, $4, X4, Y4, K4, J4, Q4, t6, i61, n61, s61, r6, e6, u6, o6, f6, c6, v6, l6, d6, w6, g6, p6, y6, _6, b6, k6, A6, E6, T6, S6, O6, I6, M6, C6, N6, P6, D6, L6, B6, F6, U6, j6, G6, H6, V6, W6, z6, $6, X6, q6, Y6, K6, Q6, Z6, t8, i81, n8, s8, r8, h8, e8, u8, o8, f8, c8, a8, v8, l8, w8, g8, p8, y8, _8, m8, b8, k8, A8, E8, T8, S8, I8, R8, M8, C8, N8, P8, D8, L8, B8, F8, x8, j8, G8, H8, V8, W8, z8, $8, X8, q8, Y8, K8, J8, Q8, t9, i91, n9, s9, r9, h9, e9, u9 = Zo, o9 = t1("ex", (r4 = go("cc.RigidBody2D"), h41 = u9(I4), e4 = u9(b5), u4 = u9(Ki), o4 = u9(Yi), f4 = u9(Yi), c4 = u9(Yi), a4 = u9(Or), v4 = u9(Yi), l4 = u9(Ki), r4((y((w4 = function(t1) {
                function i() {
                    for(var _$i, n = arguments.length, _$s = Array(n), _$r = 0; _$r < n; _$r++)_$s[_$r] = arguments[_$r];
                    return (_$i = t1.call.apply(t1, [
                        this
                    ].concat(_$s)) || this).enabledContactListener = g4 && g4(), _$i.bullet = p4 && p4(), _$i.awakeOnLoad = y4 && y4(), _$i.JL = null, _$i._group = _4 && _4(), _$i._type = m4 && m4(), _$i._allowSleep = b4 && b4(), _$i._gravityScale = k4 && k4(), _$i._linearDamping = A4 && A4(), _$i._angularDamping = E4 && E4(), _$i._linearVelocity = T4 && T4(), _$i._angularVelocity = S4 && S4(), _$i._fixedRotation = O4 && O4(), _$i;
                }
                h(i, t1);
                var n = i.prototype;
                return n.isAwake = function() {
                    return !!this.JL && this.JL.isAwake;
                }, n.wakeUp = function() {
                    this.JL && this.JL.wakeUp();
                }, n.sleep = function() {
                    this.JL && this.JL.sleep();
                }, n.getMass = function() {
                    return this.JL ? this.JL.getMass() : 0;
                }, n.applyForce = function(t1, i, n) {
                    this.JL && this.JL.applyForce(t1, i, n);
                }, n.applyForceToCenter = function(t1, i) {
                    this.JL && this.JL.applyForceToCenter(t1, i);
                }, n.applyTorque = function(t1, i) {
                    this.JL && this.JL.applyTorque(t1, i);
                }, n.applyLinearImpulse = function(t1, i, n) {
                    this.JL && this.JL.applyLinearImpulse(t1, i, n);
                }, n.applyLinearImpulseToCenter = function(t1, i) {
                    this.JL && this.JL.applyLinearImpulseToCenter(t1, i);
                }, n.applyAngularImpulse = function(t1, i) {
                    this.JL && this.JL.applyAngularImpulse(t1, i);
                }, n.getLinearVelocityFromWorldPoint = function(t1, i) {
                    return this.JL ? this.JL.getLinearVelocityFromWorldPoint(t1, i) : i;
                }, n.getLocalVector = function(t1, i) {
                    return this.JL ? this.JL.getLocalVector(t1, i) : i;
                }, n.getWorldVector = function(t1, i) {
                    return this.JL ? this.JL.getWorldVector(t1, i) : i;
                }, n.getLocalPoint = function(t1, i) {
                    return this.JL ? this.JL.getLocalPoint(t1, i) : i;
                }, n.getWorldPoint = function(t1, i) {
                    return this.JL ? this.JL.getWorldPoint(t1, i) : i;
                }, n.getLocalCenter = function(t1) {
                    return this.JL ? this.JL.getLocalCenter(t1) : t1;
                }, n.getWorldCenter = function(t1) {
                    return this.JL ? this.JL.getWorldCenter(t1) : t1;
                }, n.getInertia = function() {
                    return this.JL ? this.JL.getInertia() : 0;
                }, n.onLoad = function() {
                    this.JL = "builtin" === s51.id ? e5 : new s51.wrapper.RigidBody, this.JL.initialize(this);
                }, n.onEnable = function() {
                    this.JL && this.JL.onEnable();
                }, n.onDisable = function() {
                    this.JL && this.JL.onDisable();
                }, n.onDestroy = function() {
                    this.JL && this.JL.onDestroy();
                }, s(i, [
                    {
                        key: "group",
                        get: function get() {
                            return this._group;
                        },
                        set: function set(t1) {
                            this._group = t1;
                        }
                    },
                    {
                        key: "type",
                        get: function get() {
                            return this._type;
                        },
                        set: function set(t1) {
                            this._type = t1, this.JL && (3 === t1 ? this.JL.setType(1) : this.JL.setType(t1));
                        }
                    },
                    {
                        key: "allowSleep",
                        get: function get() {
                            return this._allowSleep;
                        },
                        set: function set(t1) {
                            this._allowSleep = t1, this.JL && this.JL.setAllowSleep(t1);
                        }
                    },
                    {
                        key: "gravityScale",
                        get: function get() {
                            return this._gravityScale;
                        },
                        set: function set(t1) {
                            this._gravityScale = t1, this.JL && this.JL.setGravityScale(t1);
                        }
                    },
                    {
                        key: "linearDamping",
                        get: function get() {
                            return this._linearDamping;
                        },
                        set: function set(t1) {
                            this._linearDamping = t1, this.JL && this.JL.setLinearDamping(t1);
                        }
                    },
                    {
                        key: "angularDamping",
                        get: function get() {
                            return this._angularDamping;
                        },
                        set: function set(t1) {
                            this._angularDamping = t1, this.JL && this.JL.setAngularDamping(t1);
                        }
                    },
                    {
                        key: "linearVelocity",
                        get: function get() {
                            return this.JL && this.JL.getLinearVelocity(this._linearVelocity), this._linearVelocity;
                        },
                        set: function set(t1) {
                            this._linearVelocity = t1, this.JL && this.JL.setLinearVelocity(t1);
                        }
                    },
                    {
                        key: "angularVelocity",
                        get: function get() {
                            return this.JL && (this._angularVelocity = this.JL.getAngularVelocity()), this._angularVelocity;
                        },
                        set: function set(t1) {
                            this._angularVelocity = t1, this.JL && this.JL.setAngularVelocity(t1);
                        }
                    },
                    {
                        key: "fixedRotation",
                        get: function get() {
                            return this._fixedRotation;
                        },
                        set: function set(t1) {
                            this._fixedRotation = t1, this.JL && this.JL.setFixedRotation(t1);
                        }
                    },
                    {
                        key: "impl",
                        get: function get() {
                            return this.JL;
                        }
                    }
                ]), i;
            }(Yg)).prototype, "group", [
                h41
            ], Object.getOwnPropertyDescriptor(w4.prototype, "group"), w4.prototype), g4 = ho(w4.prototype, "enabledContactListener", [
                Ro
            ], function() {
                return !1;
            }), p4 = ho(w4.prototype, "bullet", [
                Ro
            ], function() {
                return !1;
            }), y(w4.prototype, "type", [
                e4
            ], Object.getOwnPropertyDescriptor(w4.prototype, "type"), w4.prototype), y(w4.prototype, "allowSleep", [
                u4
            ], Object.getOwnPropertyDescriptor(w4.prototype, "allowSleep"), w4.prototype), y(w4.prototype, "gravityScale", [
                o4
            ], Object.getOwnPropertyDescriptor(w4.prototype, "gravityScale"), w4.prototype), y(w4.prototype, "linearDamping", [
                f4
            ], Object.getOwnPropertyDescriptor(w4.prototype, "linearDamping"), w4.prototype), y(w4.prototype, "angularDamping", [
                c4
            ], Object.getOwnPropertyDescriptor(w4.prototype, "angularDamping"), w4.prototype), y(w4.prototype, "linearVelocity", [
                a4
            ], Object.getOwnPropertyDescriptor(w4.prototype, "linearVelocity"), w4.prototype), y(w4.prototype, "angularVelocity", [
                v4
            ], Object.getOwnPropertyDescriptor(w4.prototype, "angularVelocity"), w4.prototype), y(w4.prototype, "fixedRotation", [
                l4
            ], Object.getOwnPropertyDescriptor(w4.prototype, "fixedRotation"), w4.prototype), y4 = ho(w4.prototype, "awakeOnLoad", [
                Ro
            ], function() {
                return !0;
            }), _4 = ho(w4.prototype, "_group", [
                Ro
            ], function() {
                return 1;
            }), m4 = ho(w4.prototype, "_type", [
                Ro
            ], function() {
                return 2;
            }), b4 = ho(w4.prototype, "_allowSleep", [
                Ro
            ], function() {
                return !0;
            }), k4 = ho(w4.prototype, "_gravityScale", [
                Ro
            ], function() {
                return 1;
            }), A4 = ho(w4.prototype, "_linearDamping", [
                Ro
            ], function() {
                return 0;
            }), E4 = ho(w4.prototype, "_angularDamping", [
                Ro
            ], function() {
                return 0;
            }), T4 = ho(w4.prototype, "_linearVelocity", [
                Ro
            ], function() {
                return new Or;
            }), S4 = ho(w4.prototype, "_angularVelocity", [
                Ro
            ], function() {
                return 0;
            }), O4 = ho(w4.prototype, "_fixedRotation", [
                Ro
            ], function() {
                return !1;
            }), w4)) || w4)), f9 = Zo, c9 = t1("ey", (R4 = go("cc.Collider2D"), M4 = f9(Yi), C4 = f9(I4), N4 = f9(Yi), P4 = f9(Ki), D4 = f9(Yi), L4 = f9(Yi), B4 = f9(Or), R4((x4 = ho((U4 = function(t1) {
                function i() {
                    for(var _$i, n = arguments.length, _$s = Array(n), _$r = 0; _$r < n; _$r++)_$s[_$r] = arguments[_$r];
                    return (_$i = t1.call.apply(t1, [
                        this
                    ].concat(_$s)) || this).editing = !1, _$i.tag = x4 && x4(), _$i.TYPE = 0, _$i._shape = null, _$i._body = null, _$i._group = j4 && j4(), _$i._density = G4 && G4(), _$i._sensor = H4 && H4(), _$i._friction = V4 && V4(), _$i._restitution = W4 && W4(), _$i._offset = z4 && z4(), _$i;
                }
                h(i, t1);
                var n = i.prototype;
                return n.onLoad = function() {
                    this._shape = o5(this.TYPE), this._shape.initialize(this), this._shape.onLoad && this._shape.onLoad(), this._body = this.getComponent(o9);
                }, n.onEnable = function() {
                    this._shape && this._shape.onEnable();
                }, n.onDisable = function() {
                    this._shape && this._shape.onDisable && this._shape.onDisable();
                }, n.onDestroy = function() {
                    this._shape && this._shape.onDestroy && this._shape.onDestroy();
                }, n.apply = function() {
                    this._shape && this._shape.apply && this._shape.apply();
                }, s(i, [
                    {
                        key: "group",
                        get: function get() {
                            return this._group;
                        },
                        set: function set(t1) {
                            this._group = t1, this._shape && this._shape.onGroupChanged && this._shape.onGroupChanged();
                        }
                    },
                    {
                        key: "density",
                        get: function get() {
                            return this._density;
                        },
                        set: function set(t1) {
                            this._density = t1;
                        }
                    },
                    {
                        key: "sensor",
                        get: function get() {
                            return this._sensor;
                        },
                        set: function set(t1) {
                            this._sensor = t1;
                        }
                    },
                    {
                        key: "friction",
                        get: function get() {
                            return this._friction;
                        },
                        set: function set(t1) {
                            this._friction = t1;
                        }
                    },
                    {
                        key: "restitution",
                        get: function get() {
                            return this._restitution;
                        },
                        set: function set(t1) {
                            this._restitution = t1;
                        }
                    },
                    {
                        key: "offset",
                        get: function get() {
                            return this._offset;
                        },
                        set: function set(t1) {
                            this._offset = t1;
                        }
                    },
                    {
                        key: "body",
                        get: function get() {
                            return this._body;
                        }
                    },
                    {
                        key: "impl",
                        get: function get() {
                            return this._shape;
                        }
                    },
                    {
                        key: "worldAABB",
                        get: function get() {
                            return this._shape ? this._shape.worldAABB : new sh;
                        }
                    }
                ]), i;
            }(ne(Yg))).prototype, "tag", [
                M4,
                Ro
            ], function() {
                return 0;
            }), y(U4.prototype, "group", [
                C4
            ], Object.getOwnPropertyDescriptor(U4.prototype, "group"), U4.prototype), y(U4.prototype, "density", [
                N4
            ], Object.getOwnPropertyDescriptor(U4.prototype, "density"), U4.prototype), y(U4.prototype, "sensor", [
                P4
            ], Object.getOwnPropertyDescriptor(U4.prototype, "sensor"), U4.prototype), y(U4.prototype, "friction", [
                D4
            ], Object.getOwnPropertyDescriptor(U4.prototype, "friction"), U4.prototype), y(U4.prototype, "restitution", [
                L4
            ], Object.getOwnPropertyDescriptor(U4.prototype, "restitution"), U4.prototype), y(U4.prototype, "offset", [
                B4
            ], Object.getOwnPropertyDescriptor(U4.prototype, "offset"), U4.prototype), j4 = ho(U4.prototype, "_group", [
                Ro
            ], function() {
                return 1;
            }), G4 = ho(U4.prototype, "_density", [
                Ro
            ], function() {
                return 1;
            }), H4 = ho(U4.prototype, "_sensor", [
                Ro
            ], function() {
                return !1;
            }), V4 = ho(U4.prototype, "_friction", [
                Ro
            ], function() {
                return .2;
            }), W4 = ho(U4.prototype, "_restitution", [
                Ro
            ], function() {
                return 0;
            }), z4 = ho(U4.prototype, "_offset", [
                Ro
            ], function() {
                return new Or;
            }), U4)) || U4)), a9 = (t1("ez", ($4 = go("cc.BoxCollider2D"), X4 = Zo(Zr), $4((K4 = ho((Y4 = function(t1) {
                function i() {
                    for(var _$i, n = arguments.length, _$s = Array(n), _$r = 0; _$r < n; _$r++)_$s[_$r] = arguments[_$r];
                    return (_$i = t1.call.apply(t1, [
                        this
                    ].concat(_$s)) || this)._size = K4 && K4(), _$i.TYPE = 1, _$i;
                }
                return h(i, t1), s(i, [
                    {
                        key: "size",
                        get: function get() {
                            return this._size;
                        },
                        set: function set(t1) {
                            this._size = t1;
                        }
                    },
                    {
                        key: "worldPoints",
                        get: function get() {
                            return this._shape ? this._shape.worldPoints : [];
                        }
                    }
                ]), i;
            }(c9)).prototype, "_size", [
                Ro
            ], function() {
                return new Zr(1, 1);
            }), y(Y4.prototype, "size", [
                X4
            ], Object.getOwnPropertyDescriptor(Y4.prototype, "size"), Y4.prototype), Y4)) || Y4)), t1("eA", (J4 = go("cc.CircleCollider2D"), Q4 = Zo(Yi), J4((i61 = ho((t6 = function(t1) {
                function i() {
                    for(var _$i, n = arguments.length, _$s = Array(n), _$r = 0; _$r < n; _$r++)_$s[_$r] = arguments[_$r];
                    return (_$i = t1.call.apply(t1, [
                        this
                    ].concat(_$s)) || this)._radius = i61 && i61(), _$i.TYPE = 2, _$i;
                }
                return h(i, t1), s(i, [
                    {
                        key: "radius",
                        get: function get() {
                            return this._radius;
                        },
                        set: function set(t1) {
                            this._radius = t1 < 0 ? 0 : t1;
                        }
                    },
                    {
                        key: "worldPosition",
                        get: function get() {
                            return this._shape ? this._shape.worldPosition : new Or;
                        }
                    },
                    {
                        key: "worldRadius",
                        get: function get() {
                            return this._shape ? this._shape.worldRadius : 0;
                        }
                    }
                ]), i;
            }(c9)).prototype, "_radius", [
                Ro
            ], function() {
                return 1;
            }), y(t6.prototype, "radius", [
                Q4
            ], Object.getOwnPropertyDescriptor(t6.prototype, "radius"), t6.prototype), t6)) || t6)), t1("eB", (n61 = go("cc.PolygonCollider2D"), s61 = Zo(Yi), r6 = Zo([
                Or
            ]), n61((u6 = ho((e6 = function(t1) {
                function i() {
                    for(var _$i, n = arguments.length, _$s = Array(n), _$r = 0; _$r < n; _$r++)_$s[_$r] = arguments[_$r];
                    return (_$i = t1.call.apply(t1, [
                        this
                    ].concat(_$s)) || this).threshold = u6 && u6(), _$i._points = o6 && o6(), _$i.TYPE = 3, _$i;
                }
                return h(i, t1), s(i, [
                    {
                        key: "points",
                        get: function get() {
                            return this._points;
                        },
                        set: function set(t1) {
                            this._points = t1;
                        }
                    },
                    {
                        key: "worldPoints",
                        get: function get() {
                            return this._shape ? this._shape.worldPoints : [];
                        }
                    }
                ]), i;
            }(c9)).prototype, "threshold", [
                s61
            ], function() {
                return 1;
            }), o6 = ho(e6.prototype, "_points", [
                Ro
            ], function() {
                return [
                    new Or(-1, -1),
                    new Or(1, -1),
                    new Or(1, 1),
                    new Or(-1, 1)
                ];
            }), y(e6.prototype, "points", [
                r6
            ], Object.getOwnPropertyDescriptor(e6.prototype, "points"), e6.prototype), e6)) || e6)), Zo), v9 = t1("eC", (f6 = go("cc.Joint2D"), c6 = a9(o9), f6((l6 = ho((v6 = function(t1) {
                function i() {
                    for(var _$i, n = arguments.length, _$s = Array(n), _$r = 0; _$r < n; _$r++)_$s[_$r] = arguments[_$r];
                    return (_$i = t1.call.apply(t1, [
                        this
                    ].concat(_$s)) || this).anchor = l6 && l6(), _$i.connectedAnchor = d6 && d6(), _$i.collideConnected = w6 && w6(), _$i.connectedBody = g6 && g6(), _$i._body = null, _$i._joint = null, _$i.TYPE = 0, _$i;
                }
                h(i, t1);
                var n = i.prototype;
                return n.onLoad = function() {
                    this._joint = a5(this.TYPE), this._joint.initialize(this), this._body = this.getComponent(o9);
                }, n.onEnable = function() {
                    this._joint && this._joint.onEnable && this._joint.onEnable();
                }, n.onDisable = function() {
                    this._joint && this._joint.onDisable && this._joint.onDisable();
                }, n.start = function() {
                    this._joint && this._joint.start && this._joint.start();
                }, n.onDestroy = function() {
                    this._joint && this._joint.onDestroy && this._joint.onDestroy();
                }, n.apply = function() {
                    this._joint && this._joint.apply && this._joint.apply();
                }, s(i, [
                    {
                        key: "body",
                        get: function get() {
                            return this._body;
                        }
                    },
                    {
                        key: "impl",
                        get: function get() {
                            return this._joint;
                        }
                    }
                ]), i;
            }(Yg)).prototype, "anchor", [
                Ro
            ], function() {
                return new Or;
            }), d6 = ho(v6.prototype, "connectedAnchor", [
                Ro
            ], function() {
                return new Or;
            }), w6 = ho(v6.prototype, "collideConnected", [
                Ro
            ], function() {
                return !1;
            }), g6 = ho(v6.prototype, "connectedBody", [
                c6,
                Ro
            ], function() {
                return null;
            }), v6)) || v6)), l9 = (t1("eD", (p6 = go("cc.DistanceJoint2D"), y6 = Zo(Yi), _6 = Zo(Ki), p6((y((b6 = function(t1) {
                function i() {
                    for(var _$i, n = arguments.length, _$s = Array(n), _$r = 0; _$r < n; _$r++)_$s[_$r] = arguments[_$r];
                    return (_$i = t1.call.apply(t1, [
                        this
                    ].concat(_$s)) || this).TYPE = 1, _$i._maxLength = k6 && k6(), _$i._autoCalcDistance = A6 && A6(), _$i;
                }
                return h(i, t1), s(i, [
                    {
                        key: "maxLength",
                        get: function get() {
                            return this._autoCalcDistance ? this.connectedBody ? Ss.distance(this.node.worldPosition, this.connectedBody.node.worldPosition) : Ss.len(this.node.worldPosition) : this._maxLength;
                        },
                        set: function set(t1) {
                            this._maxLength = t1, this._joint && this._joint.setMaxLength(t1);
                        }
                    },
                    {
                        key: "autoCalcDistance",
                        get: function get() {
                            return this._autoCalcDistance;
                        },
                        set: function set(t1) {
                            this._autoCalcDistance = t1;
                        }
                    }
                ]), i;
            }(v9)).prototype, "maxLength", [
                y6
            ], Object.getOwnPropertyDescriptor(b6.prototype, "maxLength"), b6.prototype), y(b6.prototype, "autoCalcDistance", [
                _6
            ], Object.getOwnPropertyDescriptor(b6.prototype, "autoCalcDistance"), b6.prototype), k6 = ho(b6.prototype, "_maxLength", [
                Ro
            ], function() {
                return 5;
            }), A6 = ho(b6.prototype, "_autoCalcDistance", [
                Ro
            ], function() {
                return !0;
            }), b6)) || b6)), t1("eE", (E6 = go("cc.SpringJoint2D"), T6 = Zo(Yi), S6 = Zo(Yi), O6 = Zo(Yi), I6 = Zo(Ki), E6((y((M6 = function(t1) {
                function i() {
                    for(var _$i, n = arguments.length, _$s = Array(n), _$r = 0; _$r < n; _$r++)_$s[_$r] = arguments[_$r];
                    return (_$i = t1.call.apply(t1, [
                        this
                    ].concat(_$s)) || this).TYPE = 2, _$i._frequency = C6 && C6(), _$i._dampingRatio = N6 && N6(), _$i._distance = P6 && P6(), _$i._autoCalcDistance = D6 && D6(), _$i;
                }
                return h(i, t1), s(i, [
                    {
                        key: "frequency",
                        get: function get() {
                            return this._frequency;
                        },
                        set: function set(t1) {
                            this._frequency = t1, this._joint && this._joint.setFrequency(t1);
                        }
                    },
                    {
                        key: "dampingRatio",
                        get: function get() {
                            return this._dampingRatio;
                        },
                        set: function set(t1) {
                            this._dampingRatio = t1, this._joint && this._joint.setDampingRatio(t1);
                        }
                    },
                    {
                        key: "distance",
                        get: function get() {
                            return this._autoCalcDistance ? this.connectedBody ? Ss.distance(this.node.worldPosition, this.connectedBody.node.worldPosition) : Ss.len(this.node.worldPosition) : this._distance;
                        },
                        set: function set(t1) {
                            this._distance = t1, this._joint && this._joint.setDistance(t1);
                        }
                    },
                    {
                        key: "autoCalcDistance",
                        get: function get() {
                            return this._autoCalcDistance;
                        },
                        set: function set(t1) {
                            this._autoCalcDistance = t1;
                        }
                    }
                ]), i;
            }(v9)).prototype, "frequency", [
                T6
            ], Object.getOwnPropertyDescriptor(M6.prototype, "frequency"), M6.prototype), y(M6.prototype, "dampingRatio", [
                S6
            ], Object.getOwnPropertyDescriptor(M6.prototype, "dampingRatio"), M6.prototype), y(M6.prototype, "distance", [
                O6
            ], Object.getOwnPropertyDescriptor(M6.prototype, "distance"), M6.prototype), y(M6.prototype, "autoCalcDistance", [
                I6
            ], Object.getOwnPropertyDescriptor(M6.prototype, "autoCalcDistance"), M6.prototype), C6 = ho(M6.prototype, "_frequency", [
                Ro
            ], function() {
                return 5;
            }), N6 = ho(M6.prototype, "_dampingRatio", [
                Ro
            ], function() {
                return .7;
            }), P6 = ho(M6.prototype, "_distance", [
                Ro
            ], function() {
                return 10;
            }), D6 = ho(M6.prototype, "_autoCalcDistance", [
                Ro
            ], function() {
                return !0;
            }), M6)) || M6)), t1("eF", (L6 = go("cc.MouseJoint2D"), B6 = Zo(Yi), F6 = Zo(Yi), U6 = Zo(Yi), L6((y((j6 = function(t1) {
                function i() {
                    for(var _$i, n = arguments.length, _$s = Array(n), _$r = 0; _$r < n; _$r++)_$s[_$r] = arguments[_$r];
                    return (_$i = t1.call.apply(t1, [
                        this
                    ].concat(_$s)) || this).TYPE = 4, _$i._maxForce = G6 && G6(), _$i._dampingRatio = H6 && H6(), _$i._frequency = V6 && V6(), _$i.Bi = new Or, _$i;
                }
                return h(i, t1), i.prototype.update = function(t1) {
                    this._joint.update(t1);
                }, s(i, [
                    {
                        key: "target",
                        get: function get() {
                            return this.Bi;
                        },
                        set: function set(t1) {
                            this.Bi = t1, this._joint && this._joint.setTarget(t1);
                        }
                    },
                    {
                        key: "frequency",
                        get: function get() {
                            return this._frequency;
                        },
                        set: function set(t1) {
                            this._frequency = t1, this._joint && this._joint.setFrequency(t1);
                        }
                    },
                    {
                        key: "dampingRatio",
                        get: function get() {
                            return this._dampingRatio;
                        },
                        set: function set(t1) {
                            this._dampingRatio = t1, this._joint && this._joint.setDampingRatio(t1);
                        }
                    },
                    {
                        key: "maxForce",
                        get: function get() {
                            return this._maxForce;
                        },
                        set: function set(t1) {
                            this._maxForce = t1, this._joint && this._joint.setMaxForce(t1);
                        }
                    }
                ]), i;
            }(v9)).prototype, "frequency", [
                B6
            ], Object.getOwnPropertyDescriptor(j6.prototype, "frequency"), j6.prototype), y(j6.prototype, "dampingRatio", [
                F6
            ], Object.getOwnPropertyDescriptor(j6.prototype, "dampingRatio"), j6.prototype), y(j6.prototype, "maxForce", [
                U6
            ], Object.getOwnPropertyDescriptor(j6.prototype, "maxForce"), j6.prototype), G6 = ho(j6.prototype, "_maxForce", [
                Ro
            ], function() {
                return 1e3;
            }), H6 = ho(j6.prototype, "_dampingRatio", [
                Ro
            ], function() {
                return .7;
            }), V6 = ho(j6.prototype, "_frequency", [
                Ro
            ], function() {
                return 5;
            }), j6)) || j6)), new Ss), d9 = new Ss, w9 = (t1("eG", (W6 = go("cc.RelativeJoint2D"), z6 = Zo(Yi), $6 = Zo(Yi), X6 = Zo(Yi), q6 = Zo(Or), Y6 = Zo(Yi), K6 = Zo(Ki), W6((y((Q6 = function(t1) {
                function i() {
                    for(var _$i, n = arguments.length, _$s = Array(n), _$r = 0; _$r < n; _$r++)_$s[_$r] = arguments[_$r];
                    return (_$i = t1.call.apply(t1, [
                        this
                    ].concat(_$s)) || this).TYPE = 7, _$i._maxForce = Z6 && Z6(), _$i._maxTorque = t8 && t8(), _$i._correctionFactor = i81 && i81(), _$i._angularOffset = n8 && n8(), _$i._linearOffset = s8 && s8(), _$i._autoCalcOffset = r8 && r8(), _$i;
                }
                return h(i, t1), s(i, [
                    {
                        key: "maxForce",
                        get: function get() {
                            return this._maxForce;
                        },
                        set: function set(t1) {
                            this._maxForce = t1, this._joint && this._joint.setMaxForce(t1);
                        }
                    },
                    {
                        key: "maxTorque",
                        get: function get() {
                            return this._maxTorque;
                        },
                        set: function set(t1) {
                            this._maxTorque = t1, this._joint && this._joint.setMaxTorque(t1);
                        }
                    },
                    {
                        key: "correctionFactor",
                        get: function get() {
                            return this._correctionFactor;
                        },
                        set: function set(t1) {
                            this._correctionFactor = t1, this._joint && this._joint.setCorrectionFactor(t1);
                        }
                    },
                    {
                        key: "linearOffset",
                        get: function get() {
                            return this._autoCalcOffset ? this.connectedBody ? Or.subtract(this._linearOffset, this.connectedBody.node.worldPosition, this.node.worldPosition) : Or.subtract(this._linearOffset, new Or(0, 0), this.node.worldPosition) : this._linearOffset;
                        },
                        set: function set(t1) {
                            this._linearOffset.set(t1), this._joint && this._joint.setLinearOffset(t1);
                        }
                    },
                    {
                        key: "angularOffset",
                        get: function get() {
                            return this._autoCalcOffset && (qs.toEuler(l9, this.node.worldRotation), this.connectedBody ? qs.toEuler(d9, this.connectedBody.node.worldRotation) : qs.toEuler(d9, new qs), this._angularOffset = d9.z - l9.z), this._angularOffset;
                        },
                        set: function set(t1) {
                            this._angularOffset = t1, this._joint && this._joint.setAngularOffset(t1);
                        }
                    },
                    {
                        key: "autoCalcOffset",
                        get: function get() {
                            return this._autoCalcOffset;
                        },
                        set: function set(t1) {
                            this._autoCalcOffset = t1;
                        }
                    }
                ]), i;
            }(v9)).prototype, "maxForce", [
                z6
            ], Object.getOwnPropertyDescriptor(Q6.prototype, "maxForce"), Q6.prototype), y(Q6.prototype, "maxTorque", [
                $6
            ], Object.getOwnPropertyDescriptor(Q6.prototype, "maxTorque"), Q6.prototype), y(Q6.prototype, "correctionFactor", [
                X6
            ], Object.getOwnPropertyDescriptor(Q6.prototype, "correctionFactor"), Q6.prototype), y(Q6.prototype, "linearOffset", [
                q6
            ], Object.getOwnPropertyDescriptor(Q6.prototype, "linearOffset"), Q6.prototype), y(Q6.prototype, "angularOffset", [
                Y6
            ], Object.getOwnPropertyDescriptor(Q6.prototype, "angularOffset"), Q6.prototype), y(Q6.prototype, "autoCalcOffset", [
                K6
            ], Object.getOwnPropertyDescriptor(Q6.prototype, "autoCalcOffset"), Q6.prototype), Z6 = ho(Q6.prototype, "_maxForce", [
                Ro
            ], function() {
                return 5;
            }), t8 = ho(Q6.prototype, "_maxTorque", [
                Ro
            ], function() {
                return .7;
            }), i81 = ho(Q6.prototype, "_correctionFactor", [
                Ro
            ], function() {
                return .3;
            }), n8 = ho(Q6.prototype, "_angularOffset", [
                Ro
            ], function() {
                return 0;
            }), s8 = ho(Q6.prototype, "_linearOffset", [
                Ro
            ], function() {
                return new Or;
            }), r8 = ho(Q6.prototype, "_autoCalcOffset", [
                Ro
            ], function() {
                return !0;
            }), Q6)) || Q6)), new Or);
            t1("eH", (h8 = go("cc.SliderJoint2D"), e8 = Zo(Yi), u8 = Zo(Ki), o8 = Zo(Ki), f8 = Zo(Yi), c8 = Zo(Yi), a8 = Zo(Ki), v8 = Zo(Yi), l8 = Zo(Yi), h8((y((w8 = function(t1) {
                function i() {
                    for(var _$i, n = arguments.length, _$s = Array(n), _$r = 0; _$r < n; _$r++)_$s[_$r] = arguments[_$r];
                    return (_$i = t1.call.apply(t1, [
                        this
                    ].concat(_$s)) || this).TYPE = 6, _$i._angle = g8 && g8(), _$i._autoCalcAngle = p8 && p8(), _$i._enableMotor = y8 && y8(), _$i._maxMotorForce = _8 && _8(), _$i._motorSpeed = m8 && m8(), _$i._enableLimit = b8 && b8(), _$i._lowerLimit = k8 && k8(), _$i._upperLimit = A8 && A8(), _$i;
                }
                return h(i, t1), s(i, [
                    {
                        key: "angle",
                        get: function get() {
                            return this._autoCalcAngle && (this.connectedBody ? Or.subtract(w9, this.connectedBody.node.worldPosition, this.node.worldPosition) : Or.subtract(w9, new Or(0, 0), this.node.worldPosition), this._angle = Hn(Math.atan2(w9.y, w9.x))), this._angle;
                        },
                        set: function set(t1) {
                            this._angle = t1;
                        }
                    },
                    {
                        key: "autoCalcAngle",
                        get: function get() {
                            return this._autoCalcAngle;
                        },
                        set: function set(t1) {
                            this._autoCalcAngle = t1;
                        }
                    },
                    {
                        key: "enableMotor",
                        get: function get() {
                            return this._enableMotor;
                        },
                        set: function set(t1) {
                            this._enableMotor = t1;
                        }
                    },
                    {
                        key: "maxMotorForce",
                        get: function get() {
                            return this._maxMotorForce;
                        },
                        set: function set(t1) {
                            this._maxMotorForce = t1, this._joint && this._joint.setMaxMotorForce(t1);
                        }
                    },
                    {
                        key: "motorSpeed",
                        get: function get() {
                            return this._motorSpeed;
                        },
                        set: function set(t1) {
                            this._motorSpeed = t1, this._joint && this._joint.setMotorSpeed(t1);
                        }
                    },
                    {
                        key: "enableLimit",
                        get: function get() {
                            return this._enableLimit;
                        },
                        set: function set(t1) {
                            this._enableLimit = t1;
                        }
                    },
                    {
                        key: "lowerLimit",
                        get: function get() {
                            return this._lowerLimit;
                        },
                        set: function set(t1) {
                            this._lowerLimit = t1, this._joint && this._joint.setLowerLimit(t1);
                        }
                    },
                    {
                        key: "upperLimit",
                        get: function get() {
                            return this._upperLimit;
                        },
                        set: function set(t1) {
                            this._upperLimit = t1, this._joint && this._joint.setUpperLimit(t1);
                        }
                    }
                ]), i;
            }(v9)).prototype, "angle", [
                e8
            ], Object.getOwnPropertyDescriptor(w8.prototype, "angle"), w8.prototype), y(w8.prototype, "autoCalcAngle", [
                u8
            ], Object.getOwnPropertyDescriptor(w8.prototype, "autoCalcAngle"), w8.prototype), y(w8.prototype, "enableMotor", [
                o8
            ], Object.getOwnPropertyDescriptor(w8.prototype, "enableMotor"), w8.prototype), y(w8.prototype, "maxMotorForce", [
                f8
            ], Object.getOwnPropertyDescriptor(w8.prototype, "maxMotorForce"), w8.prototype), y(w8.prototype, "motorSpeed", [
                c8
            ], Object.getOwnPropertyDescriptor(w8.prototype, "motorSpeed"), w8.prototype), y(w8.prototype, "enableLimit", [
                a8
            ], Object.getOwnPropertyDescriptor(w8.prototype, "enableLimit"), w8.prototype), y(w8.prototype, "lowerLimit", [
                v8
            ], Object.getOwnPropertyDescriptor(w8.prototype, "lowerLimit"), w8.prototype), y(w8.prototype, "upperLimit", [
                l8
            ], Object.getOwnPropertyDescriptor(w8.prototype, "upperLimit"), w8.prototype), g8 = ho(w8.prototype, "_angle", [
                Ro
            ], function() {
                return 0;
            }), p8 = ho(w8.prototype, "_autoCalcAngle", [
                Ro
            ], function() {
                return !0;
            }), y8 = ho(w8.prototype, "_enableMotor", [
                Ro
            ], function() {
                return !1;
            }), _8 = ho(w8.prototype, "_maxMotorForce", [
                Ro
            ], function() {
                return 1e3;
            }), m8 = ho(w8.prototype, "_motorSpeed", [
                Ro
            ], function() {
                return 1e3;
            }), b8 = ho(w8.prototype, "_enableLimit", [
                Ro
            ], function() {
                return !1;
            }), k8 = ho(w8.prototype, "_lowerLimit", [
                Ro
            ], function() {
                return 0;
            }), A8 = ho(w8.prototype, "_upperLimit", [
                Ro
            ], function() {
                return 0;
            }), w8)) || w8)), t1("eI", (E8 = go("cc.FixedJoint2D"), T8 = Zo(Yi), S8 = Zo(Yi), E8((y((I8 = function(t1) {
                function i() {
                    for(var _$i, n = arguments.length, _$s = Array(n), _$r = 0; _$r < n; _$r++)_$s[_$r] = arguments[_$r];
                    return (_$i = t1.call.apply(t1, [
                        this
                    ].concat(_$s)) || this).TYPE = 5, _$i._frequency = R8 && R8(), _$i._dampingRatio = M8 && M8(), _$i;
                }
                return h(i, t1), s(i, [
                    {
                        key: "frequency",
                        get: function get() {
                            return this._frequency;
                        },
                        set: function set(t1) {
                            this._frequency = t1, this._joint && this._joint.setFrequency(t1);
                        }
                    },
                    {
                        key: "dampingRatio",
                        get: function get() {
                            return this._dampingRatio;
                        },
                        set: function set(t1) {
                            this._dampingRatio = t1, this._joint && this._joint.setDampingRatio(t1);
                        }
                    }
                ]), i;
            }(v9)).prototype, "frequency", [
                T8
            ], Object.getOwnPropertyDescriptor(I8.prototype, "frequency"), I8.prototype), y(I8.prototype, "dampingRatio", [
                S8
            ], Object.getOwnPropertyDescriptor(I8.prototype, "dampingRatio"), I8.prototype), R8 = ho(I8.prototype, "_frequency", [
                Ro
            ], function() {
                return .7;
            }), M8 = ho(I8.prototype, "_dampingRatio", [
                Ro
            ], function() {
                return .5;
            }), I8)) || I8)), t1("eJ", (C8 = go("cc.WheelJoint2D"), N8 = Zo(Yi), P8 = Zo(Ki), D8 = Zo(Yi), L8 = Zo(Yi), B8 = Zo(Yi), F8 = Zo(Yi), C8((y((x8 = function(t1) {
                function i() {
                    for(var _$i, n = arguments.length, _$s = Array(n), _$r = 0; _$r < n; _$r++)_$s[_$r] = arguments[_$r];
                    return (_$i = t1.call.apply(t1, [
                        this
                    ].concat(_$s)) || this).TYPE = 3, _$i._angle = j8 && j8(), _$i._enableMotor = G8 && G8(), _$i._maxMotorTorque = H8 && H8(), _$i._motorSpeed = V8 && V8(), _$i._frequency = W8 && W8(), _$i._dampingRatio = z8 && z8(), _$i;
                }
                return h(i, t1), s(i, [
                    {
                        key: "angle",
                        get: function get() {
                            return this._angle;
                        },
                        set: function set(t1) {
                            this._angle = t1;
                        }
                    },
                    {
                        key: "enableMotor",
                        get: function get() {
                            return this._enableMotor;
                        },
                        set: function set(t1) {
                            this._enableMotor = t1, this._joint && this._joint.enableMotor(t1);
                        }
                    },
                    {
                        key: "maxMotorTorque",
                        get: function get() {
                            return this._maxMotorTorque;
                        },
                        set: function set(t1) {
                            this._maxMotorTorque = t1, this._joint && this._joint.setMaxMotorTorque(t1);
                        }
                    },
                    {
                        key: "motorSpeed",
                        get: function get() {
                            return this._motorSpeed;
                        },
                        set: function set(t1) {
                            this._motorSpeed = t1, this._joint && this._joint.setMotorSpeed(t1);
                        }
                    },
                    {
                        key: "frequency",
                        get: function get() {
                            return this._frequency;
                        },
                        set: function set(t1) {
                            this._frequency = t1, this._joint && this._joint.setFrequency(t1);
                        }
                    },
                    {
                        key: "dampingRatio",
                        get: function get() {
                            return this._dampingRatio;
                        },
                        set: function set(t1) {
                            this._dampingRatio = t1, this._joint && this._joint.setDampingRatio(t1);
                        }
                    }
                ]), i;
            }(v9)).prototype, "angle", [
                N8
            ], Object.getOwnPropertyDescriptor(x8.prototype, "angle"), x8.prototype), y(x8.prototype, "enableMotor", [
                P8
            ], Object.getOwnPropertyDescriptor(x8.prototype, "enableMotor"), x8.prototype), y(x8.prototype, "maxMotorTorque", [
                D8
            ], Object.getOwnPropertyDescriptor(x8.prototype, "maxMotorTorque"), x8.prototype), y(x8.prototype, "motorSpeed", [
                L8
            ], Object.getOwnPropertyDescriptor(x8.prototype, "motorSpeed"), x8.prototype), y(x8.prototype, "frequency", [
                B8
            ], Object.getOwnPropertyDescriptor(x8.prototype, "frequency"), x8.prototype), y(x8.prototype, "dampingRatio", [
                F8
            ], Object.getOwnPropertyDescriptor(x8.prototype, "dampingRatio"), x8.prototype), j8 = ho(x8.prototype, "_angle", [
                Ro
            ], function() {
                return 90;
            }), G8 = ho(x8.prototype, "_enableMotor", [
                Ro
            ], function() {
                return !1;
            }), H8 = ho(x8.prototype, "_maxMotorTorque", [
                Ro
            ], function() {
                return 1e3;
            }), V8 = ho(x8.prototype, "_motorSpeed", [
                Ro
            ], function() {
                return 0;
            }), W8 = ho(x8.prototype, "_frequency", [
                Ro
            ], function() {
                return 5;
            }), z8 = ho(x8.prototype, "_dampingRatio", [
                Ro
            ], function() {
                return .7;
            }), x8)) || x8)), t1("eK", ($8 = go("cc.HingeJoint2D"), X8 = Zo(Ki), q8 = Zo(Yi), Y8 = Zo(Yi), K8 = Zo(Ki), J8 = Zo(Yi), Q8 = Zo(Yi), $8((y((t9 = function(t1) {
                function i() {
                    for(var _$i, n = arguments.length, _$s = Array(n), _$r = 0; _$r < n; _$r++)_$s[_$r] = arguments[_$r];
                    return (_$i = t1.call.apply(t1, [
                        this
                    ].concat(_$s)) || this).TYPE = 8, _$i._enableLimit = i91 && i91(), _$i._lowerAngle = n9 && n9(), _$i._upperAngle = s9 && s9(), _$i._enableMotor = r9 && r9(), _$i._maxMotorTorque = h9 && h9(), _$i._motorSpeed = e9 && e9(), _$i;
                }
                return h(i, t1), s(i, [
                    {
                        key: "enableLimit",
                        get: function get() {
                            return this._enableLimit;
                        },
                        set: function set(t1) {
                            this._enableLimit = t1;
                        }
                    },
                    {
                        key: "lowerAngle",
                        get: function get() {
                            return this._lowerAngle;
                        },
                        set: function set(t1) {
                            this._lowerAngle = t1, this._joint && this._joint.setLowerAngle(t1);
                        }
                    },
                    {
                        key: "upperAngle",
                        get: function get() {
                            return this._upperAngle;
                        },
                        set: function set(t1) {
                            this._upperAngle = t1, this._joint && this._joint.setUpperAngle(t1);
                        }
                    },
                    {
                        key: "enableMotor",
                        get: function get() {
                            return this._enableMotor;
                        },
                        set: function set(t1) {
                            this._enableMotor = t1, this._joint && this._joint.enableMotor(t1);
                        }
                    },
                    {
                        key: "maxMotorTorque",
                        get: function get() {
                            return this._maxMotorTorque;
                        },
                        set: function set(t1) {
                            this._maxMotorTorque = t1, this._joint && this._joint.setMaxMotorTorque(t1);
                        }
                    },
                    {
                        key: "motorSpeed",
                        get: function get() {
                            return this._motorSpeed;
                        },
                        set: function set(t1) {
                            this._motorSpeed = t1, this._joint && this._joint.setMotorSpeed(t1);
                        }
                    }
                ]), i;
            }(v9)).prototype, "enableLimit", [
                X8
            ], Object.getOwnPropertyDescriptor(t9.prototype, "enableLimit"), t9.prototype), y(t9.prototype, "lowerAngle", [
                q8
            ], Object.getOwnPropertyDescriptor(t9.prototype, "lowerAngle"), t9.prototype), y(t9.prototype, "upperAngle", [
                Y8
            ], Object.getOwnPropertyDescriptor(t9.prototype, "upperAngle"), t9.prototype), y(t9.prototype, "enableMotor", [
                K8
            ], Object.getOwnPropertyDescriptor(t9.prototype, "enableMotor"), t9.prototype), y(t9.prototype, "maxMotorTorque", [
                J8
            ], Object.getOwnPropertyDescriptor(t9.prototype, "maxMotorTorque"), t9.prototype), y(t9.prototype, "motorSpeed", [
                Q8
            ], Object.getOwnPropertyDescriptor(t9.prototype, "motorSpeed"), t9.prototype), i91 = ho(t9.prototype, "_enableLimit", [
                Ro
            ], function() {
                return !1;
            }), n9 = ho(t9.prototype, "_lowerAngle", [
                Ro
            ], function() {
                return 0;
            }), s9 = ho(t9.prototype, "_upperAngle", [
                Ro
            ], function() {
                return 0;
            }), r9 = ho(t9.prototype, "_enableMotor", [
                Ro
            ], function() {
                return !1;
            }), h9 = ho(t9.prototype, "_maxMotorTorque", [
                Ro
            ], function() {
                return 1e3;
            }), e9 = ho(t9.prototype, "_motorSpeed", [
                Ro
            ], function() {
                return 0;
            }), t9)) || t9)), t1("ek", {
                PolygonSeparator: V5,
                PolygonPartition: t4
            }), A.internal.physics2d = {
                selector: s51
            };
            var g9 = [], p9 = [
                new Or,
                new Or
            ], y9 = new m5.WorldManifold, _9 = {
                points: [],
                separations: [],
                normal: new Or
            }, m9 = function m9() {
                this.localPoint = new Or, this.normalImpulse = 0, this.tangentImpulse = 0;
            }, b9 = [
                new m9,
                new m9
            ], k9 = {
                type: 0,
                localPoint: new Or,
                localNormal: new Or,
                points: []
            }, A9 = {
                normalImpulses: [],
                tangentImpulses: []
            }, E9 = function() {
                function t1() {
                    this.colliderA = null, this.colliderB = null, this.disabled = !1, this.disabledOnce = !1, this.QL = null, this.ZL = !1, this.tB = null;
                }
                t1.wi = function(i) {
                    var n = g9.pop();
                    return n || (n = new t1), n.Se(i), n;
                }, t1.pi = function(t1) {
                    var i = t1.m_userData;
                    i && (g9.push(i), i.nA());
                };
                var i = t1.prototype;
                return i.iB = function(t1) {
                    this.QL = t1;
                }, i.Se = function(t1) {
                    this.colliderA = t1.m_fixtureA.m_userData.collider, this.colliderB = t1.m_fixtureB.m_userData.collider, this.disabled = !1, this.disabledOnce = !1, this.QL = null, this.ZL = !1, this.tB = t1, t1.m_userData = this;
                }, i.nA = function() {
                    this.setTangentSpeed(0), this.nB(), this.sB(), this.colliderA = null, this.colliderB = null, this.disabled = !1, this.QL = null, this.tB.m_userData = null, this.tB = null;
                }, i.getWorldManifold = function() {
                    var _$t = _9.points, i = _9.separations, n = _9.normal;
                    this.tB.GetWorldManifold(y9);
                    var s = y9.points, _$r = y9.separations, h = this.tB.GetManifold().pointCount;
                    _$t.length = i.length = h;
                    for(var e = 0; e < h; e++){
                        var u = p9[e];
                        u.x = s[e].x * E5, u.y = s[e].y * E5, _$t[e] = u, i[e] = _$r[e] * E5;
                    }
                    return n.x = y9.normal.x, n.y = y9.normal.y, this.ZL && (n.x *= -1, n.y *= -1), _9;
                }, i.getManifold = function() {
                    for(var _$t = k9.points, i = k9.localNormal, n = k9.localPoint, s = this.tB.GetManifold(), _$r = s.points, h = _$t.length = s.pointCount, e = 0; e < h; e++){
                        var u = b9[e], o = _$r[e];
                        u.localPoint.x = o.localPoint.x * E5, u.localPoint.y = o.localPoint.y * E5, u.normalImpulse = o.normalImpulse * E5, u.tangentImpulse = o.tangentImpulse, _$t[e] = u;
                    }
                    return n.x = s.localPoint.x * E5, n.y = s.localPoint.y * E5, i.x = s.localNormal.x, i.y = s.localNormal.y, k9.type = s.type, this.ZL && (i.x *= -1, i.y *= -1), k9;
                }, i.getImpulse = function() {
                    var _$t = this.QL;
                    if (!_$t) return null;
                    for(var i = A9.normalImpulses, n = A9.tangentImpulses, s = _$t.count, _$r = 0; _$r < s; _$r++)i[_$r] = _$t.normalImpulses[_$r] * E5, n[_$r] = _$t.tangentImpulses[_$r];
                    return n.length = i.length = s, A9;
                }, i.hB = function(t1) {
                    var i, n, s = this.colliderA, _$r = this.colliderB, h = null == s || null == (i = s.body) ? void 0 : i.enabledContactListener, e = null == _$r || null == (n = _$r.body) ? void 0 : n.enabledContactListener;
                    h && s.emit(t1, s, _$r, this), e && _$r.emit(t1, _$r, s, this), (h || e) && s41.instance.emit(t1, s, _$r, this), (this.disabled || this.disabledOnce) && (this.eB(!1), this.disabledOnce = !1);
                }, i.eB = function(t1) {
                    this.tB.SetEnabled(t1);
                }, i.isTouching = function() {
                    return this.tB.IsTouching();
                }, i.setTangentSpeed = function(t1) {
                    this.tB.SetTangentSpeed(t1);
                }, i.getTangentSpeed = function() {
                    return this.tB.GetTangentSpeed();
                }, i.setFriction = function(t1) {
                    this.tB.SetFriction(t1);
                }, i.getFriction = function() {
                    return this.tB.GetFriction();
                }, i.nB = function() {
                    return this.tB.ResetFriction();
                }, i.setRestitution = function(t1) {
                    this.tB.SetRestitution(t1);
                }, i.getRestitution = function() {
                    return this.tB.GetRestitution();
                }, i.sB = function() {
                    return this.tB.ResetRestitution();
                }, t1;
            }(), T9 = new m5.Vec2, S9 = new Yr, O9 = Yr.GREEN, I9 = Yr.RED, R9 = function(t1) {
                function i(i) {
                    var n;
                    return (n = t1.call(this) || this).uB = null, n.oB = new m5.Transform, n.fB = new m5.Transform, n.uB = i, n;
                }
                h(i, t1);
                var n = i.prototype;
                return n.aB = function(t1, i) {
                    for(var n = this.uB, s = 0; s < i; s++){
                        m5.Transform.MulXV(this.oB, t1[s], T9);
                        var _$r = T9.x * E5, _$h = T9.y * E5;
                        0 === s ? n.moveTo(_$r, _$h) : n.lineTo(_$r, _$h);
                    }
                    n.close();
                }, n.DrawPolygon = function(t1, i, n) {
                    this.vB(n), this.aB(t1, i), this.uB.stroke();
                }, n.DrawSolidPolygon = function(t1, i, n) {
                    this.lB(n), this.aB(t1, i), this.uB.fill(), this.uB.stroke();
                }, n.dB = function(t1, i) {
                    m5.Transform.MulXV(this.oB, t1, T9), this.uB.circle(T9.x * E5, T9.y * E5, i * E5);
                }, n.DrawCircle = function(t1, i, n) {
                    this.vB(n), this.dB(t1, i), this.uB.stroke();
                }, n.DrawSolidCircle = function(t1, i, n, s) {
                    this.lB(s), this.dB(t1, i), this.uB.fill();
                }, n.DrawSegment = function(t1, i, n) {
                    var s = this.uB;
                    t1.x === i.x && t1.y === i.y ? (this.lB(n), this.dB(t1, 2 / E5), s.fill()) : (this.vB(n), m5.Transform.MulXV(this.oB, t1, T9), s.moveTo(T9.x * E5, T9.y * E5), m5.Transform.MulXV(this.oB, i, T9), s.lineTo(T9.x * E5, T9.y * E5), s.stroke());
                }, n.DrawTransform = function(t1) {
                    var _$i = this.uB;
                    _$i.strokeColor = I9, T9.x = T9.y = 0, m5.Transform.MulXV(t1, T9, T9), _$i.moveTo(T9.x * E5, T9.y * E5), T9.x = 1, T9.y = 0, m5.Transform.MulXV(t1, T9, T9), _$i.lineTo(T9.x * E5, T9.y * E5), _$i.stroke(), _$i.strokeColor = O9, T9.x = T9.y = 0, m5.Transform.MulXV(t1, T9, T9), _$i.moveTo(T9.x * E5, T9.y * E5), T9.x = 0, T9.y = 1, m5.Transform.MulXV(t1, T9, T9), _$i.lineTo(T9.x * E5, T9.y * E5), _$i.stroke();
                }, n.DrawPoint = function() {}, n.DrawParticles = function() {}, n.vB = function(t1) {
                    this.uB.strokeColor = S9.set(255 * t1.r, 255 * t1.g, 255 * t1.b, 150);
                }, n.lB = function(t1) {
                    this.uB.fillColor = S9.set(255 * t1.r, 255 * t1.g, 255 * t1.b, 150);
                }, n.PushTransform = function(t1) {
                    this.oB = t1;
                }, n.PopTransform = function() {
                    this.oB = this.fB;
                }, i;
            }(m5.Draw), M9 = new Ss, C9 = new Or, N9 = new Or, P9 = new m5.BodyDef, D9 = new m5.AABB, L9 = [], B9 = function() {
                function t1() {
                    this.gB = void 0, this.pB = [], this.yB = [], this._B = new Ss, this.mB = void 0, this.bB = void 0, this.kB = void 0, this.AB = void 0, this.EB = null, this.TB = null, this.SB = 0, this.gB = new m5.World(new m5.Vec2(0, -10));
                    var _$t = new m5.BodyDef;
                    this.mB = this.gB.CreateBody(_$t);
                    var i = new T5;
                    i.OL(this.OB), i.IL(this.IB), i.RL(this.RB), i.ML(this.MB), this.gB.SetContactListener(i), this.bB = i, this.kB = new S5, this.AB = new O5;
                }
                var i = t1.prototype;
                return i.CB = function() {
                    if (!this.EB || !this.EB.isValid) {
                        var _$t = LC("Canvas");
                        if (!_$t) {
                            var i = PN.getScene();
                            if (!i) return;
                            (_$t = new VE("Canvas")).addComponent("cc.Canvas"), _$t.parent = i;
                        }
                        var n = new VE("PHYSICS_2D_DEBUG_DRAW");
                        n.hideFlags |= 8, n.parent = _$t, n.worldPosition = Ss.ZERO, n.layer = My.Enum.UI_2D;
                        try {
                            this.EB = n.addComponent("cc.Graphics"), this.EB.lineWidth = 3;
                            var _$s = new R9(this.EB);
                            this.TB = _$s, this.gB.SetDebugDraw(_$s);
                        } catch (t1) {
                            rt(4501, t1.message), n.destroy(), n = null;
                        }
                    }
                    if (this.EB) {
                        var _$r = this.EB.node.parent;
                        this.EB.node.setSiblingIndex(_$r.children.length - 1);
                    }
                    this.TB && this.TB.SetFlags(this.debugDrawFlags);
                }, i.setGravity = function(t1) {
                    this.gB.SetGravity(t1);
                }, i.setAllowSleep = function() {
                    this.gB.SetAllowSleeping(!0);
                }, i.step = function(t1, i, n) {
                    void 0 === i && (i = 10), void 0 === n && (n = 10);
                    for(var _$s = this.yB, _$r = 0, h = _$s.length; _$r < h; _$r++)_$s[_$r].NB(t1);
                    this.gB.Step(t1, i, n);
                }, i.raycast = function(t1, i, n, s) {
                    if (t1.equals(i)) return [];
                    n = n || 0, C9.x = t1.x / E5, C9.y = t1.y / E5, N9.x = i.x / E5, N9.y = i.y / E5;
                    var _$r = this.AB;
                    _$r.Se(n, s), this.gB.RayCast(_$r, C9, N9);
                    var h = _$r.BL();
                    if (h.length > 0) {
                        for(var e = _$r.jL(), u = _$r.GL(), o = _$r.HL(), f = [], _$c = 0, a = h.length; _$c < a; _$c++){
                            var v = h[_$c], l = v.m_userData, _$d = l.collider;
                            if (2 === n) {
                                for(var w = void 0, g = 0; g < f.length; g++)f[g].collider === _$d && (w = f[g]);
                                if (w) {
                                    o[_$c] < w.fraction && (w.fixtureIndex = l.PB(v), w.point.x = e[_$c].x * E5, w.point.y = e[_$c].y * E5, w.normal.x = u[_$c].x, w.normal.y = u[_$c].y, w.fraction = o[_$c]);
                                    continue;
                                }
                            }
                            f.push({
                                collider: _$d,
                                fixtureIndex: l.PB(v),
                                point: new Or(e[_$c].x * E5, e[_$c].y * E5),
                                normal: new Or(u[_$c].x, u[_$c].y),
                                fraction: o[_$c]
                            });
                        }
                        return f;
                    }
                    return [];
                }, i.syncPhysicsToScene = function() {
                    for(var _$t = this.pB, i = 0, n = _$t.length; i < n; i++){
                        var _$s = _$t[i], _$r = _$s.rigidBody;
                        if (3 !== _$r.type) {
                            var h = _$r.node, e = _$s.impl, u = e.GetPosition();
                            M9.x = u.x * E5, M9.y = u.y * E5, M9.z = 0, h.worldPosition = M9;
                            var o = Hn(e.GetAngle());
                            h.setWorldRotationFromEuler(0, 0, o);
                        } else _$s.DB();
                    }
                }, i.syncSceneToPhysics = function() {
                    for(var _$t = this.pB, i = 0; i < _$t.length; i++)_$t[i].LB();
                }, i.BB = function(t1) {
                    if (!this.pB.includes(t1)) {
                        var n = t1.rigidBody;
                        P9.allowSleep = n.allowSleep, P9.gravityScale = n.gravityScale, P9.linearDamping = n.linearDamping, P9.angularDamping = n.angularDamping, P9.fixedRotation = n.fixedRotation, P9.bullet = n.bullet;
                        var _$s = n.node, _$r = _$s.worldPosition;
                        P9.position.Set(_$r.x / E5, _$r.y / E5), M9.z = qs.getAxisAngle(this._B, _$s.worldRotation), this._B.z < 0 && (M9.z = 2 * Math.PI - M9.z), P9.angle = M9.z, P9.awake = n.awakeOnLoad, 3 === n.type ? (P9.type = 1, this.yB.push(t1), t1.FB.set(P9.position.x, P9.position.y), t1.UB = P9.angle) : P9.type = n.type;
                        var e = n._linearVelocity;
                        P9.linearVelocity.Set(e.x, e.y), P9.angularVelocity = n._angularVelocity;
                        var u = this.gB.CreateBody(P9);
                        u.m_userData = t1, t1._imp = u, this.pB.push(t1);
                    }
                }, i.xB = function(t1) {
                    this.pB.includes(t1) && (t1.impl && (t1.impl.m_userData = null, this.gB.DestroyBody(t1.impl), t1._imp = null), hi(this.pB, t1), 3 === t1.rigidBody.type && hi(this.yB, t1));
                }, i.jB = function(t1) {
                    var i = this.yB;
                    if (3 !== t1.rigidBody.type) hi(i, t1);
                    else {
                        if (i.includes(t1)) return;
                        i.push(t1);
                    }
                }, i.CL = function(t1) {
                    this.bB.CL(t1);
                }, i.NL = function(t1) {
                    this.bB.NL(t1);
                }, i.testPoint = function(t1) {
                    var i = C9.x = t1.x / E5, n = C9.y = t1.y / E5, _$s = .2 / E5;
                    D9.lowerBound.x = i - _$s, D9.lowerBound.y = n - _$s, D9.upperBound.x = i + _$s, D9.upperBound.y = n + _$s;
                    var _$r = this.kB;
                    _$r.Se(C9), this.gB.QueryAABB(_$r, D9);
                    var h = _$r.BL();
                    L9.length = 0;
                    for(var e = 0; e < h.length; e++){
                        var u = h[e].m_userData.collider;
                        L9.includes(u) || L9.push(u);
                    }
                    return L9;
                }, i.testAABB = function(t1) {
                    D9.lowerBound.x = t1.xMin / E5, D9.lowerBound.y = t1.yMin / E5, D9.upperBound.x = t1.xMax / E5, D9.upperBound.y = t1.yMax / E5;
                    var i = this.kB;
                    i.Se(), this.gB.QueryAABB(i, D9);
                    var n = i.BL();
                    L9.length = 0;
                    for(var _$s = 0; _$s < n.length; _$s++){
                        var _$r = n[_$s].m_userData.collider;
                        L9.includes(_$r) || L9.push(_$r);
                    }
                    return L9;
                }, i.drawDebug = function() {
                    this.CB(), this.EB && (this.EB.clear(), this.gB.DrawDebugData());
                }, i.OB = function(t1) {
                    E9.wi(t1).hB(A5.BEGIN_CONTACT);
                }, i.IB = function(t1) {
                    var i = t1.m_userData;
                    i && (i.hB(A5.END_CONTACT), E9.pi(t1));
                }, i.RB = function(t1) {
                    var i = t1.m_userData;
                    i && i.hB(A5.PRE_SOLVE);
                }, i.MB = function(t1, i) {
                    var n = t1.m_userData;
                    n && (n.iB(i), n.hB(A5.POST_SOLVE), n.iB(null));
                }, s(t1, [
                    {
                        key: "impl",
                        get: function get() {
                            return this.gB;
                        }
                    },
                    {
                        key: "groundBodyImpl",
                        get: function get() {
                            return this.mB;
                        }
                    },
                    {
                        key: "debugDrawFlags",
                        get: function get() {
                            return this.SB;
                        },
                        set: function set(t1) {
                            t1 || this.EB && (this.EB.node.parent = null), this.SB = t1;
                        }
                    }
                ]), t1;
            }(), F9 = new Ss, U9 = new m5.Vec2, x9 = function() {
                function t1() {
                    this.FB = new Or, this.UB = 0, this.JL = null, this.GB = void 0, this.ag = !1;
                }
                var i = t1.prototype;
                return i.initialize = function(t1) {
                    this.GB = t1, s41.instance._callAfterStep(this, this.HB);
                }, i.onDestroy = function() {
                    s41.instance._callAfterStep(this, this.VB);
                }, i.onEnable = function() {
                    this.setActive(!0);
                }, i.onDisable = function() {
                    this.setActive(!1);
                }, i.WB = function(t1) {
                    if (!s41.instance.stepping) {
                        if (4 & t1) for(var i = this.rigidBody.getComponents(c9), n = 0; n < i.length; n++)i[n].apply();
                        1 & t1 && this.zB(!0), 2 & t1 && this.$B(!0);
                    }
                }, i.HB = function() {
                    this.ag || (s41.instance.physicsWorld.BB(this), this.setActive(!1), this.ag = !0);
                }, i.VB = function() {
                    this.ag && (s41.instance.physicsWorld.xB(this), this.ag = !1);
                }, i.NB = function(t1) {
                    var i = this.JL;
                    if (i) {
                        var n = i.GetPosition();
                        i.SetAwake(!0);
                        var _$s = 1 / t1;
                        U9.x = (this.FB.x - n.x) * _$s, U9.y = (this.FB.y - n.y) * _$s, i.SetLinearVelocity(U9);
                        var _$r = i.GetAngle() % Dn;
                        _$r > Math.PI && (_$r -= Dn);
                        var h = (this.UB - _$r) * _$s;
                        this.UB < -Pn && _$r > Pn && (h = (this.UB + Dn - _$r) * _$s), this.UB > Pn && _$r < -Pn && (h = (this.UB - Dn - _$r) * _$s), i.SetAngularVelocity(h);
                    }
                }, i.LB = function() {
                    var _$t = this.GB.node.hasChangedFlags;
                    _$t && this.WB(_$t);
                }, i.zB = function(t1) {
                    void 0 === t1 && (t1 = !1);
                    var i = this.JL;
                    if (i) {
                        var n, _$s = this.GB.node.worldPosition, _$r = this.GB.type;
                        (n = 3 === _$r ? i.GetLinearVelocity() : i.GetPosition()).x = _$s.x / E5, n.y = _$s.y / E5, 3 === _$r && t1 ? this.FB.set(n.x, n.y) : i.SetTransformVec(n, i.GetAngle());
                    }
                }, i.$B = function(t1) {
                    void 0 === t1 && (t1 = !1);
                    var i = this.JL;
                    if (i) {
                        var n = this.GB.node.worldRotation;
                        qs.toEulerInYXZOrder(F9, n);
                        var _$r = Gn(F9.z);
                        3 === this.GB.type && t1 ? this.UB = _$r : i.SetTransformVec(i.GetPosition(), _$r);
                    }
                }, i.DB = function() {
                    var _$t = this.JL;
                    if (_$t) {
                        var i = _$t.m_linearVelocity;
                        i.Set(0, 0), _$t.SetLinearVelocity(i), _$t.SetAngularVelocity(0);
                    }
                }, i.setType = function(t1) {
                    s41.instance.physicsWorld.jB(this), this.JL.SetType(t1);
                }, i.setLinearDamping = function(t1) {
                    this.JL.SetLinearDamping(t1);
                }, i.setAngularDamping = function(t1) {
                    this.JL.SetAngularDamping(t1);
                }, i.setGravityScale = function(t1) {
                    this.JL.SetGravityScale(t1);
                }, i.setFixedRotation = function(t1) {
                    this.JL.SetFixedRotation(t1);
                }, i.setAllowSleep = function(t1) {
                    this.JL.SetSleepingAllowed(t1);
                }, i.isActive = function() {
                    return this.JL.IsActive();
                }, i.setActive = function(t1) {
                    this.JL.m_world.IsLocked() || this.JL.SetActive(t1);
                }, i.wakeUp = function() {
                    this.JL.SetAwake(!0);
                }, i.sleep = function() {
                    this.JL.SetAwake(!1);
                }, i.getMass = function() {
                    return this.JL.GetMass();
                }, i.setLinearVelocity = function(t1) {
                    this.JL.SetLinearVelocity(t1);
                }, i.getLinearVelocity = function(t1) {
                    var i = this.JL.GetLinearVelocity();
                    return t1.x = i.x, t1.y = i.y, t1;
                }, i.getLinearVelocityFromWorldPoint = function(t1, i) {
                    return U9.Set(t1.x / E5, t1.y / E5), this.JL.GetLinearVelocityFromWorldPoint(U9, i), i.x *= E5, i.y *= E5, i;
                }, i.setAngularVelocity = function(t1) {
                    this.JL.SetAngularVelocity(t1);
                }, i.getAngularVelocity = function() {
                    return this.JL.GetAngularVelocity();
                }, i.getLocalVector = function(t1, i) {
                    return i = i || new Or, U9.Set(t1.x / E5, t1.y / E5), this.JL.GetLocalVector(U9, i), i.x *= E5, i.y *= E5, i;
                }, i.getWorldVector = function(t1, i) {
                    return U9.Set(t1.x / E5, t1.y / E5), this.JL.GetWorldVector(U9, i), i.x *= E5, i.y *= E5, i;
                }, i.getLocalPoint = function(t1, i) {
                    return i = i || new Or, U9.Set(t1.x / E5, t1.y / E5), this.JL.GetLocalPoint(U9, i), i.x *= E5, i.y *= E5, i;
                }, i.getWorldPoint = function(t1, i) {
                    return i = i || new Or, U9.Set(t1.x / E5, t1.y / E5), this.JL.GetWorldPoint(U9, i), i.x *= E5, i.y *= E5, i;
                }, i.getLocalCenter = function(t1) {
                    t1 = t1 || new Or;
                    var i = this.JL.GetLocalCenter();
                    return t1.x = i.x * E5, t1.y = i.y * E5, t1;
                }, i.getWorldCenter = function(t1) {
                    t1 = t1 || new Or;
                    var i = this.JL.GetWorldCenter();
                    return t1.x = i.x * E5, t1.y = i.y * E5, t1;
                }, i.getInertia = function() {
                    return this.JL.GetInertia();
                }, i.applyForce = function(t1, i, n) {
                    this.JL && (U9.Set(i.x / E5, i.y / E5), this.JL.ApplyForce(t1, U9, n));
                }, i.applyForceToCenter = function(t1, i) {
                    this.JL && this.JL.ApplyForceToCenter(t1, i);
                }, i.applyTorque = function(t1, i) {
                    this.JL && this.JL.ApplyTorque(t1, i);
                }, i.applyLinearImpulse = function(t1, i, n) {
                    this.JL && (U9.Set(i.x / E5, i.y / E5), this.JL.ApplyLinearImpulse(t1, U9, n));
                }, i.applyLinearImpulseToCenter = function(t1, i) {
                    this.JL && this.JL.ApplyLinearImpulse(t1, this.JL.GetPosition(), i);
                }, i.applyAngularImpulse = function(t1, i) {
                    this.JL && this.JL.ApplyAngularImpulse(t1, i);
                }, s(t1, [
                    {
                        key: "impl",
                        get: function get() {
                            return this.JL;
                        }
                    },
                    {
                        key: "_imp",
                        set: function set(t1) {
                            this.JL = t1;
                        }
                    },
                    {
                        key: "rigidBody",
                        get: function get() {
                            return this.GB;
                        }
                    },
                    {
                        key: "isAwake",
                        get: function get() {
                            return this.JL.IsAwake();
                        }
                    },
                    {
                        key: "isSleeping",
                        get: function get() {
                            return !this.JL.IsAwake();
                        }
                    }
                ]), t1;
            }(), j9 = new m5.Filter, G9 = new m5.Vec2, H9 = new m5.Vec2;
            function V9(t1) {
                var i = t1.collider;
                return i.body ? j9.categoryBits = 1 === i.group ? i.body.group : i.group : j9.categoryBits = i.group, j9.maskBits = s41.instance.collisionMatrix[j9.categoryBits], j9;
            }
            var W9, z9 = function() {
                function t1() {
                    this.XB = [], this.DL = [], this.qB = null, this.JL = null, this.ag = !1, this.YB = new sh;
                }
                var i = t1.prototype;
                return i.initialize = function(t1) {
                    this.qB = t1;
                }, i.onLoad = function() {}, i.onEnable = function() {
                    s41.instance._callAfterStep(this, this.HB);
                }, i.onDisable = function() {
                    s41.instance._callAfterStep(this, this.VB);
                }, i.start = function() {}, i.onGroupChanged = function() {
                    var _$t = V9(this);
                    this.DL.forEach(function(i) {
                        i.SetFilterData(_$t);
                    });
                }, i.apply = function() {
                    this.VB(), this.collider.enabledInHierarchy && this.HB();
                }, i.PB = function(t1) {
                    return this.DL.indexOf(t1);
                }, i.KB = function() {
                    return [];
                }, i.HB = function() {
                    if (!this.ag) {
                        var _$t = this.collider, i = _$t.node.worldScale, n = Ss.ZERO, _$s = _$t.getComponent(o9);
                        _$s && _$s.impl && _$s.impl.impl ? this.JL = _$s.impl.impl : (this.JL = s41.instance.physicsWorld.groundBodyImpl, n = _$t.node.worldPosition);
                        for(var _$r = 0 === i.x && 0 === i.y ? [] : this.KB(i.x, i.y, n.x, n.y), h = V9(this), e = 0; e < _$r.length; e++){
                            var u = _$r[e], o = {
                                density: _$t.density,
                                isSensor: _$t.sensor,
                                friction: _$t.friction,
                                restitution: _$t.restitution,
                                shape: u,
                                filter: h
                            }, f = this.JL.CreateFixture(o);
                            f.m_userData = this, null != _$s && _$s.enabledContactListener && s41.instance.physicsWorld.CL(f), this.XB.push(u), this.DL.push(f);
                        }
                        this.ag = !0;
                    }
                }, i.VB = function() {
                    if (this.ag) {
                        for(var _$t = this.DL, i = this.JL, n = _$t.length - 1; n >= 0; n--){
                            var _$s = _$t[n];
                            _$s.m_userData = null, s41.instance.physicsWorld.NL(_$s), i && i.DestroyFixture(_$s);
                        }
                        this.JL = null, this.DL.length = 0, this.XB.length = 0, this.ag = !1;
                    }
                }, s(t1, [
                    {
                        key: "impl",
                        get: function get() {
                            return this.XB;
                        }
                    },
                    {
                        key: "collider",
                        get: function get() {
                            return this.qB;
                        }
                    },
                    {
                        key: "worldAABB",
                        get: function get() {
                            for(var i = 1e7, n = 1e7, _$s = -10000000, _$r = -10000000, h = this.DL, e = 0; e < h.length; e++)for(var u = h[e], o = u.GetShape().GetChildCount(), f = 0; f < o; f++){
                                if (G9.Copy(u.GetAABB(f).lowerBound), H9.Copy(u.GetAABB(f).upperBound), 2 === u.GetShape().m_type) {
                                    var _$c = u.GetShape().m_radius;
                                    G9.SelfAddXY(_$c, _$c), H9.SelfSubXY(_$c, _$c);
                                }
                                G9.x < i && (i = G9.x), G9.y < n && (n = G9.y), H9.x > _$s && (_$s = H9.x), H9.y > _$r && (_$r = H9.y);
                            }
                            i *= E5, n *= E5, _$s *= E5, _$r *= E5;
                            var a = this.YB;
                            return a.x = i, a.y = n, a.width = _$s - i, a.height = _$r - n, a;
                        }
                    }
                ]), t1;
            }(), $9 = new sh, X9 = function(t1) {
                function i() {
                    for(var _$i, n = arguments.length, _$s = Array(n), _$r = 0; _$r < n; _$r++)_$s[_$r] = arguments[_$r];
                    return (_$i = t1.call.apply(t1, [
                        this
                    ].concat(_$s)) || this).JB = [
                        new Or,
                        new Or,
                        new Or,
                        new Or
                    ], _$i;
                }
                return h(i, t1), i.prototype.KB = function(t1, i, n, s) {
                    t1 = Math.abs(t1), i = Math.abs(i);
                    var _$r = this.collider, _$h = _$r.size.width / 2 / E5 * t1, e = _$r.size.height / 2 / E5 * i, u = (n + _$r.offset.x * t1) / E5, o = (s + _$r.offset.y * i) / E5, f = new m5.PolygonShape;
                    return f.SetAsBox(_$h, e, new m5.Vec2(u, o), 0), [
                        f
                    ];
                }, s(i, [
                    {
                        key: "worldPoints",
                        get: function get() {
                            var _$i = this.collider, n = _$i.size, _$s = _$i.offset;
                            $9.x = _$s.x - n.width / 2, $9.y = _$s.y - n.height / 2, $9.width = n.width, $9.height = n.height;
                            var _$r = this.JB, _$h = _$r[0], e = _$r[1], u = _$r[2], o = _$r[3];
                            return $9.transformMat4ToPoints(_$i.node.worldMatrix, _$h, e, u, o), _$r;
                        }
                    }
                ]), i;
            }(z9), q9 = function(t1) {
                function i() {
                    for(var _$i, n = arguments.length, _$s = Array(n), _$r = 0; _$r < n; _$r++)_$s[_$r] = arguments[_$r];
                    return (_$i = t1.call.apply(t1, [
                        this
                    ].concat(_$s)) || this).QB = new Or, _$i;
                }
                return h(i, t1), i.prototype.KB = function(t1, i, n, s) {
                    t1 = Math.abs(t1), i = Math.abs(i);
                    var _$r = this.collider, _$h = (n + _$r.offset.x * t1) / E5, e = (s + _$r.offset.y * i) / E5, u = new m5.CircleShape;
                    return u.m_radius = _$r.radius / E5 * t1, u.m_p.Set(_$h, e), [
                        u
                    ];
                }, s(i, [
                    {
                        key: "worldRadius",
                        get: function get() {
                            return this.XB[0].m_radius * E5;
                        }
                    },
                    {
                        key: "worldPosition",
                        get: function get() {
                            var _$t = this.XB[0].m_p;
                            return this.QB.set(_$t.x * E5, _$t.y * E5);
                        }
                    }
                ]), i;
            }(z9), Y9 = function(t1) {
                function i() {
                    for(var _$i, n = arguments.length, _$s = Array(n), _$r = 0; _$r < n; _$r++)_$s[_$r] = arguments[_$r];
                    return (_$i = t1.call.apply(t1, [
                        this
                    ].concat(_$s)) || this).JB = [], _$i;
                }
                return h(i, t1), i.prototype.KB = function(t1, i, n, s) {
                    var _$r = [], _$h = this.collider, e = _$h.points;
                    e.length > 0 && e[0].equals(e[e.length - 1]) && (e.length -= 1);
                    var u = W5(e);
                    if (!u) return Q(16408, _$h.node.name), _$r;
                    for(var o = _$h.offset, f = 0; f < u.length; f++){
                        for(var _$c = u[f], a = null, v = [], l = null, _$d = 0, w = _$c.length; _$d < w; _$d++){
                            a || (a = new m5.PolygonShape);
                            var g = _$c[_$d], p = (n + (g.x + o.x) * t1) / E5, _$y = (s + (g.y + o.y) * i) / E5, _$_ = new m5.Vec2(p, _$y);
                            v.push(_$_), l || (l = _$_), v.length === m5.maxPolygonVertices && (a.Set(v, v.length), _$r.push(a), a = null, _$d < w - 1 && (v = [
                                l,
                                v[v.length - 1]
                            ]));
                        }
                        a && (a.Set(v, v.length), _$r.push(a));
                    }
                    return _$r;
                }, s(i, [
                    {
                        key: "worldPoints",
                        get: function get() {
                            for(var _$t = this.collider, _$i = _$t.points, n = this.JB, _$s = _$t.node.worldMatrix, _$r = 0; _$r < _$i.length; _$r++)n[_$r] || (n[_$r] = new Or), Or.transformMat4(n[_$r], _$i[_$r], _$s);
                            return n.length = _$i.length, this.JB;
                        }
                    }
                ]), i;
            }(z9), K9 = function() {
                function t1() {
                    this.ZB = null, this.tF = null, this.JL = null, this.ag = !1;
                }
                var i = t1.prototype;
                return i.initialize = function(t1) {
                    this.tF = t1;
                }, i.onEnable = function() {
                    s41.instance._callAfterStep(this, this.HB);
                }, i.onDisable = function() {
                    s41.instance._callAfterStep(this, this.VB);
                }, i.start = function() {
                    s41.instance._callAfterStep(this, this.HB);
                }, i.apply = function() {
                    s41.instance._callAfterStep(this, this.VB), this.comp.enabledInHierarchy && s41.instance._callAfterStep(this, this.HB);
                }, i.HB = function() {
                    if (!this.ag) {
                        var _$t = this.tF;
                        if (_$t.isValid) {
                            this.JL = _$t.getComponent(o9);
                            var i = this.iF();
                            if (i) {
                                i.bodyA = this.JL.impl.impl;
                                var n = _$t.connectedBody;
                                n && !n.enabledInHierarchy || (i.bodyB = n ? n.impl.impl : s41.instance.physicsWorld.groundBodyImpl, i.collideConnected = _$t.collideConnected, this.ZB = s41.instance.physicsWorld.impl.CreateJoint(i), this.ag = !0);
                            }
                        }
                    }
                }, i.VB = function() {
                    this.ag && (s41.instance.physicsWorld.impl.DestroyJoint(this.ZB), this.ZB = null, this.ag = !1);
                }, i.iF = function() {
                    return null;
                }, i.sA = function() {
                    return this.ZB && this.JL && this.JL.impl && this.tF;
                }, s(t1, [
                    {
                        key: "impl",
                        get: function get() {
                            return this.ZB;
                        }
                    },
                    {
                        key: "comp",
                        get: function get() {
                            return this.tF;
                        }
                    },
                    {
                        key: "body",
                        get: function get() {
                            return this.JL;
                        }
                    }
                ]), t1;
            }(), J9 = new m5.Vec2, Q9 = function(t1) {
                function i() {
                    for(var _$i, n = arguments.length, s = Array(n), _$r = 0; _$r < n; _$r++)s[_$r] = arguments[_$r];
                    return (_$i = t1.call.apply(t1, [
                        this
                    ].concat(s)) || this).nF = new Or, _$i.sF = !1, _$i;
                }
                h(i, t1);
                var n = i.prototype;
                return n.setTarget = function(t1) {
                    this.ZB && (J9.x = t1.x / E5, J9.y = t1.y / E5, this.ZB.SetTarget(J9));
                }, n.setDampingRatio = function(t1) {
                    this.ZB && this.ZB.SetDampingRatio(t1);
                }, n.setFrequency = function(t1) {
                    this.ZB && this.ZB.SetFrequency(t1);
                }, n.setMaxForce = function(t1) {
                    this.ZB && this.ZB.SetMaxForce(t1);
                }, n.iF = function() {
                    var _$t = new m5.MouseJointDef, _$i = this.tF;
                    return _$t.target.Set(this.nF.x / E5, this.nF.y / E5), _$t.maxForce = _$i.maxForce, _$t.dampingRatio = _$i.dampingRatio, _$t.frequencyHz = _$i.frequency, _$t;
                }, n.start = function() {}, n.onEnable = function() {
                    this.rF(!0);
                }, n.onDisable = function() {
                    t1.prototype.onDisable.call(this), this.rF(!1);
                }, n.rF = function(t1) {
                    var _$i = LC("Canvas");
                    if (_$i) {
                        var n = t1 ? _$i.on : _$i.off;
                        n.call(_$i, "touch-start", this.hF, this), n.call(_$i, "touch-move", this.eF, this), n.call(_$i, "touch-end", this.uF, this), n.call(_$i, "touch-cancel", this.uF, this);
                    }
                }, n.hF = function(t1) {
                    this.sF = !0;
                    var _$i = this.nF.set(t1.getUILocation()), n = s41.instance.physicsWorld.testPoint(_$i);
                    if (!(n.length <= 0)) {
                        var s = n[0].body;
                        s.wakeUp();
                        var _$r = this.tF;
                        _$r.connectedBody = s, this.HB(), this.setMaxForce(_$r.maxForce * s.getMass()), this.setTarget(_$i);
                    }
                }, n.eF = function(t1) {
                    this.nF = t1.getUILocation();
                }, n.uF = function() {
                    this.VB(), this.sF = !1;
                }, n.update = function() {
                    this.sF && this.sA() && this.setTarget(this.nF);
                }, i;
            }(K9), Z9 = function(t1) {
                function i() {
                    return t1.apply(this, arguments) || this;
                }
                h(i, t1);
                var n = i.prototype;
                return n.setMaxLength = function(t1) {
                    this.ZB && this.ZB.SetMaxLength(t1);
                }, n.iF = function() {
                    var _$t = this.tF, _$i = new m5.RopeJointDef;
                    return _$i.localAnchorA.Set(_$t.anchor.x / E5, _$t.anchor.y / E5), _$i.localAnchorB.Set(_$t.connectedAnchor.x / E5, _$t.connectedAnchor.y / E5), _$i.maxLength = _$t.maxLength / E5, _$i;
                }, i;
            }(K9), t7 = function(t1) {
                function i() {
                    return t1.apply(this, arguments) || this;
                }
                h(i, t1);
                var n = i.prototype;
                return n.setDampingRatio = function(t1) {
                    this.ZB && this.ZB.SetDampingRatio(t1);
                }, n.setFrequency = function(t1) {
                    this.ZB && this.ZB.SetFrequency(t1);
                }, n.setDistance = function(t1) {
                    this.ZB && this.ZB.SetLength(t1);
                }, n.iF = function() {
                    var _$t = this.tF, _$i = new m5.DistanceJointDef;
                    return _$i.localAnchorA.Set(_$t.anchor.x / E5, _$t.anchor.y / E5), _$i.localAnchorB.Set(_$t.connectedAnchor.x / E5, _$t.connectedAnchor.y / E5), _$i.length = _$t.distance / E5, _$i.dampingRatio = _$t.dampingRatio, _$i.frequencyHz = _$t.frequency, _$i;
                }, i;
            }(K9), i71 = function(t1) {
                function i() {
                    return t1.apply(this, arguments) || this;
                }
                h(i, t1);
                var n = i.prototype;
                return n.setMaxForce = function(t1) {
                    this.ZB && this.ZB.SetMaxForce(t1);
                }, n.setAngularOffset = function(t1) {
                    this.ZB && this.ZB.SetAngularOffset(Gn(t1));
                }, n.setLinearOffset = function(t1) {
                    this.ZB && this.ZB.SetLinearOffset(new m5.Vec2(t1.x / E5, t1.y / E5));
                }, n.setCorrectionFactor = function(t1) {
                    this.ZB && (this.ZB.m_correctionFactor = t1);
                }, n.setMaxTorque = function(t1) {
                    this.ZB && this.ZB.SetMaxTorque(t1);
                }, n.iF = function() {
                    var _$t = this.tF, _$i = new m5.MotorJointDef;
                    return _$i.linearOffset.Set(_$t.linearOffset.x / E5, _$t.linearOffset.y / E5), _$i.angularOffset = Gn(_$t.angularOffset), _$i.maxForce = _$t.maxForce, _$i.maxTorque = _$t.maxTorque, _$i.correctionFactor = _$t.correctionFactor, _$i;
                }, i;
            }(K9), n7 = function(t1) {
                function i() {
                    return t1.apply(this, arguments) || this;
                }
                h(i, t1);
                var n = i.prototype;
                return n.enableLimit = function(t1) {
                    this.ZB && this.ZB.EnableLimit(t1);
                }, n.setLowerLimit = function() {
                    this.oF();
                }, n.setUpperLimit = function() {
                    this.oF();
                }, n.oF = function() {
                    if (this.ZB) {
                        var _$t = this.tF;
                        this.ZB.SetLimits(_$t.lowerLimit / E5, _$t.upperLimit / E5);
                    }
                }, n.enableMotor = function(t1) {
                    this.ZB && this.ZB.EnableMotor(t1);
                }, n.setMaxMotorForce = function(t1) {
                    this.ZB && this.ZB.SetMaxMotorForce(t1);
                }, n.setMotorSpeed = function(t1) {
                    this.ZB && this.ZB.SetMotorSpeed(t1);
                }, n.iF = function() {
                    var _$t = this.tF, _$i = new m5.PrismaticJointDef;
                    _$i.localAnchorA.Set(_$t.anchor.x / E5, _$t.anchor.y / E5), _$i.localAnchorB.Set(_$t.connectedAnchor.x / E5, _$t.connectedAnchor.y / E5);
                    var n = Gn(_$t.angle);
                    return _$i.localAxisA.Set(Math.cos(n), Math.sin(n)), _$i.referenceAngle = 0, _$i.enableLimit = _$t.enableLimit, _$i.lowerTranslation = _$t.lowerLimit / E5, _$i.upperTranslation = _$t.upperLimit / E5, _$i.enableMotor = _$t.enableMotor, _$i.maxMotorForce = _$t.maxMotorForce, _$i.motorSpeed = _$t.motorSpeed, _$i;
                }, i;
            }(K9), s7 = function(t1) {
                function i() {
                    return t1.apply(this, arguments) || this;
                }
                h(i, t1);
                var n = i.prototype;
                return n.setFrequency = function(t1) {
                    this.ZB && this.ZB.SetFrequency(t1);
                }, n.setDampingRatio = function(t1) {
                    this.ZB && this.ZB.SetDampingRatio(t1);
                }, n.iF = function() {
                    var _$t = this.tF, _$i = new m5.WeldJointDef;
                    return _$i.localAnchorA.Set(_$t.anchor.x / E5, _$t.anchor.y / E5), _$i.localAnchorB.Set(_$t.connectedAnchor.x / E5, _$t.connectedAnchor.y / E5), _$i.referenceAngle = 0, _$i.frequencyHz = _$t.frequency, _$i.dampingRatio = _$t.dampingRatio, _$i;
                }, i;
            }(K9), r7 = function(t1) {
                function i() {
                    return t1.apply(this, arguments) || this;
                }
                h(i, t1);
                var n = i.prototype;
                return n.setDampingRatio = function(t1) {
                    this.ZB && this.ZB.SetSpringDampingRatio(t1);
                }, n.setFrequency = function(t1) {
                    this.ZB && this.ZB.SetSpringFrequencyHz(t1);
                }, n.enableMotor = function(t1) {
                    this.ZB && this.ZB.EnableMotor(t1);
                }, n.setMaxMotorTorque = function(t1) {
                    this.ZB && this.ZB.SetMaxMotorTorque(t1);
                }, n.setMotorSpeed = function(t1) {
                    this.ZB && this.ZB.SetMotorSpeed(t1);
                }, n.iF = function() {
                    var _$t = this.tF, _$i = new m5.WheelJointDef;
                    _$i.localAnchorA.Set(_$t.anchor.x / E5, _$t.anchor.y / E5), _$i.localAnchorB.Set(_$t.connectedAnchor.x / E5, _$t.connectedAnchor.y / E5);
                    var n = Gn(_$t.angle);
                    return _$i.localAxisA.Set(Math.cos(n), Math.sin(n)), _$i.maxMotorTorque = _$t.maxMotorTorque, _$i.motorSpeed = Gn(_$t.motorSpeed), _$i.enableMotor = _$t.enableMotor, _$i.dampingRatio = _$t.dampingRatio, _$i.frequencyHz = _$t.frequency, _$i;
                }, i;
            }(K9), h7 = function(t1) {
                function i() {
                    return t1.apply(this, arguments) || this;
                }
                h(i, t1);
                var n = i.prototype;
                return n.enableLimit = function(t1) {
                    this.ZB && this.ZB.EnableLimit(t1);
                }, n.setLowerAngle = function() {
                    this.oF();
                }, n.setUpperAngle = function() {
                    this.oF();
                }, n.oF = function() {
                    if (this.ZB) {
                        var _$t = this.tF;
                        this.ZB.SetLimits(Gn(_$t.lowerAngle), Gn(_$t.upperAngle));
                    }
                }, n.enableMotor = function(t1) {
                    this.ZB && this.ZB.EnableMotor(t1);
                }, n.setMaxMotorTorque = function(t1) {
                    this.ZB && this.ZB.SetMaxMotorTorque(t1);
                }, n.setMotorSpeed = function(t1) {
                    this.ZB && this.ZB.SetMotorSpeed(t1);
                }, n.iF = function() {
                    var _$t = this.tF, _$i = new m5.RevoluteJointDef;
                    return _$i.localAnchorA.Set(_$t.anchor.x / E5, _$t.anchor.y / E5), _$i.localAnchorB.Set(_$t.connectedAnchor.x / E5, _$t.connectedAnchor.y / E5), _$i.enableMotor = _$t.enableMotor, _$i.maxMotorTorque = _$t.maxMotorTorque, _$i.motorSpeed = Gn(_$t.motorSpeed), _$i.enableLimit = _$t.enableLimit, _$i.lowerAngle = Gn(_$t.lowerAngle), _$i.upperAngle = Gn(_$t.upperAngle), _$i;
                }, i;
            }(K9);
            iP.once(tP.EVENT_PRE_SUBSYSTEM_INIT, function() {
                s51.register("box2d", {
                    PhysicsWorld: B9,
                    RigidBody: x9,
                    BoxShape: X9,
                    CircleShape: q9,
                    PolygonShape: Y9,
                    MouseJoint: Q9,
                    DistanceJoint: Z9,
                    SpringJoint: t7,
                    RelativeJoint: i71,
                    SliderJoint: n7,
                    FixedJoint: s7,
                    WheelJoint: r7,
                    HingeJoint: h7
                });
            }), function(t1, i) {
                function n(t1) {
                    for(var _$i in t1)t1[t1[_$i]] = _$i;
                }
                var s = t1.MixBlend = {
                    setup: 0,
                    first: 1,
                    replace: 2,
                    add: 3
                };
                n(s), n(s = t1.MixDirection = {
                    mixIn: 0,
                    mixOut: 1
                }), n(s = t1.TimelineType = {
                    rotate: 0,
                    translate: 1,
                    scale: 2,
                    shear: 3,
                    attachment: 4,
                    color: 5,
                    deform: 6,
                    event: 7,
                    drawOrder: 8,
                    ikConstraint: 9,
                    transformConstraint: 10,
                    pathConstraintPosition: 11,
                    pathConstraintSpacing: 12,
                    pathConstraintMix: 13,
                    twoColor: 14
                }), n(s = t1.EventType = {
                    start: 0,
                    interrupt: 1,
                    end: 2,
                    complete: 3,
                    dispose: 4,
                    event: 5
                }), n(s = t1.BlendMode = {
                    Normal: 0,
                    Additive: 1,
                    Multiply: 2,
                    Screen: 3
                }), n(s = t1.TransformMode = {
                    Normal: 0,
                    OnlyTranslation: 1,
                    NoRotationOrReflection: 2,
                    NoScale: 3,
                    NoScaleOrReflection: 4
                }), n(s = t1.PositionMode = {
                    Fixed: 0,
                    Percent: 1
                }), n(s = t1.SpacingMode = {
                    Length: 0,
                    Fixed: 1,
                    Percent: 2
                }), n(s = t1.RotateMode = {
                    Tangent: 0,
                    Chain: 1,
                    ChainScale: 2
                }), n(s = t1.TextureFilter = {
                    Nearest: 9728,
                    Linear: 9729,
                    MipMap: 9987,
                    MipMapNearestNearest: 9984,
                    MipMapLinearNearest: 9985,
                    MipMapNearestLinear: 9986,
                    MipMapLinearLinear: 9987
                }), n(s = t1.TextureWrap = {
                    MirroredRepeat: 33648,
                    ClampToEdge: 33071,
                    Repeat: 10497
                }), n(s = t1.AttachmentType = {
                    Region: 0,
                    BoundingBox: 1,
                    Mesh: 2,
                    LinkedMesh: 3,
                    Path: 4,
                    Point: 5,
                    Clipping: 6
                }), s = null;
                var o = 3.1415927 / 180;
                (i = function() {
                    function t1() {}
                    return t1.clamp = function(t1, i, n) {
                        return t1 < i ? i : t1 > n ? n : t1;
                    }, t1.cosDeg = function(t1) {
                        return Math.cos(t1 * o);
                    }, t1.sinDeg = function(t1) {
                        return Math.sin(t1 * o);
                    }, t1.signum = function(t1) {
                        return t1 > 0 ? 1 : t1 < 0 ? -1 : 0;
                    }, t1.toInt = function(t1) {
                        return t1 > 0 ? Math.floor(t1) : Math.ceil(t1);
                    }, t1.cbrt = function(t1) {
                        var _$i = Math.pow(Math.abs(t1), 1 / 3);
                        return t1 < 0 ? -_$i : _$i;
                    }, t1.randomTriangular = function(i, n) {
                        return t1.randomTriangularWith(i, n, .5 * (i + n));
                    }, t1.randomTriangularWith = function(t1, i, n) {
                        var s = Math.random(), _$r = i - t1;
                        return s <= (n - t1) / _$r ? t1 + Math.sqrt(s * _$r * (n - t1)) : i - Math.sqrt((1 - s) * _$r * (i - n));
                    }, t1;
                }()).PI = 3.1415927, i.PI2 = 6.2831854, i.radiansToDegrees = 57.29577866666166, i.radDeg = 57.29577866666166, i.degreesToRadians = o, i.degRad = o, t1.MathUtils = i;
            }(W9 || (W9 = {}));
            var e7 = W9;
            function u7(t1, i) {
                return t1 ? i === t1.length ? t1 : i < t1.length ? t1.slice(0, i) : Array(i) : Array(i);
            }
            function o7(t1, i, n) {
                var s = "_" + n;
                Object.defineProperty(t1, n, {
                    get: function get() {
                        var _$t = i.call(this), _$n = _$t.size(), _$r = this[s];
                        _$r = u7(_$r, _$n);
                        for(var h = 0; h < _$n; h++)_$r[h] = _$t.get(h);
                        return this[s] = _$r, _$r;
                    }
                });
            }
            function f7(t1, i, n) {
                var s = "_" + n;
                Object.defineProperty(t1, n, {
                    get: function get() {
                        var _$t = i.call(this), _$n = _$t.size(), _$r = this[s];
                        _$r = u7(_$r, _$n);
                        for(var h = 0; h < _$n; h++){
                            var e = _$t.get(h), u = e.size(), o = _$r[h];
                            o = u7(o, u);
                            for(var f = 0; f < u; f++)o[f] = e.get(f);
                            _$r[h] = o;
                        }
                        return this[s] = _$r, _$r;
                    }
                });
            }
            function c7(t1, i, n) {
                var s = "_" + n;
                Object.defineProperty(t1, n, {
                    value: function value() {
                        var _$t = i.call(this), _$n = _$t.size(), _$r = this[s];
                        _$r = u7(_$r, _$n);
                        for(var h = 0; h < _$n; h++)_$r[h] = _$t.get(h);
                        return this[s] = _$r, _$r;
                    }
                });
            }
            function a7(t1) {
                for(var i in e7.wasmUtil = t1.SpineWasmUtil, e7.wasmUtil.wasm = t1, e7.wasmUtil.spineWasmInit(), t1){
                    var n = t1[i];
                    e7[i] || (e7[i] = n);
                }
            }
            function v7() {
                var _$t = e7.PathConstraintData.prototype;
                o7(_$t, _$t.getBones, "bones");
            }
            function l7() {
                var _$t = e7.VertexAttachment.prototype;
                o7(_$t, _$t.getBones, "bones"), o7(_$t, _$t.getVertices, "vertices");
                var i = _$t.computeWorldVertices, n = new e7.SPVectorFloat;
                Object.defineProperty(_$t, "computeWorldVertices", {
                    value: function value(t1, s, r, h, e, u) {
                        var o = h.length;
                        n.resize(o, 0);
                        for(var f = 0; f < o; f++)n.set(f, h[f]);
                        i.call(this, t1, s, r, n, e, u);
                        for(var _$c = 0; _$c < o; _$c++)h[_$c] = n.get(_$c);
                    }
                });
            }
            function d7() {
                var _$t = e7.MeshAttachment.prototype;
                o7(_$t, _$t.getRegionUVs, "regionUVs"), o7(_$t, _$t.getUVs, "uvs"), o7(_$t, _$t.getTriangles, "triangles"), o7(_$t, _$t.getEdges, "edges");
            }
            function w7() {
                var _$t = e7.PathAttachment.prototype;
                o7(_$t, _$t.getLengths, "lengths");
            }
            function g7() {
                var _$t = e7.RegionAttachment.prototype;
                o7(_$t, _$t.getOffset, "offset");
                var i = _$t.getUVs, n = _$t.setUVs, s = "_uvs";
                Object.defineProperty(_$t, "uvs", {
                    get: function get() {
                        var n = i.call(this), _$r = n.size(), h = _$t[s];
                        h = u7(h, _$r);
                        for(var e = 0; e < _$r; e++)h[e] = n.get(e);
                        return _$t[s] = h, h;
                    },
                    set: function set(t1) {
                        n.call(this, t1[0], t1[1], t1[2], t1[3], 1 === t1[4]);
                    }
                });
                var _$r = _$t.computeWorldVertices, h = new e7.SPVectorFloat;
                Object.defineProperty(_$t, "computeWorldVertices", {
                    value: function value(t1, i, n, s) {
                        var e = i.length;
                        h.resize(e, 0);
                        for(var u = 0; u < e; u++)h.set(u, i[u]);
                        _$r.call(this, t1, h, n, s);
                        for(var o = 0; o < e; o++)i[o] = h.get(o);
                    }
                });
            }
            function p7() {
                var _$t = e7.IkConstraint.prototype;
                o7(_$t, _$t.getBones, "bones");
            }
            function y7() {
                var _$t = e7.PathConstraint.prototype;
                o7(_$t, _$t.getBones, "bones");
            }
            function _7() {
                var _$t = e7.TransformConstraintData.prototype;
                o7(_$t, _$t.getBones, "bones");
            }
            function m7() {
                var _$t = e7.TransformConstraint.prototype;
                o7(_$t, _$t.getBones, "bones");
            }
            function b7() {
                var _$t = e7.Bone.prototype;
                o7(_$t, _$t.getChildren, "children");
            }
            function k7() {
                var _$t = e7.Slot.prototype;
                o7(_$t, _$t.getDeform, "deform");
            }
            function A7() {
                var _$t = e7.Skin.prototype;
                o7(_$t, _$t.getBones, "bones"), o7(_$t, _$t.getAttachments, "attachments"), o7(_$t, _$t.getConstraints, "constraints"), c7(_$t, _$t.getAttachments, "getAttachments");
                var i = _$t.getAttachmentsForSlot;
                Object.defineProperty(_$t, "getAttachmentsForSlot", {
                    value: function value(t1, n) {
                        var s = i.call(this, t1), _$r = s.size();
                        n.length = _$r;
                        for(var h = 0; h < _$r; h++)n[h] = s.get(h);
                        s.delete();
                    }
                });
                var n = _$t.findNamesForSlot;
                Object.defineProperty(_$t, "findNamesForSlot", {
                    value: function value(t1, i) {
                        var s = n.call(this, t1), _$r = s.size();
                        i.length = _$r;
                        for(var h = 0; h < _$r; h++)i[h] = s.get(h);
                        s.delete();
                    }
                });
            }
            function E7() {
                var _$t = e7.SkinEntry.prototype;
                [
                    [
                        "name",
                        _$t.getName
                    ],
                    [
                        "attachment",
                        _$t.getAttachment
                    ]
                ].forEach(function(i) {
                    At(_$t, i[0], i[1]);
                });
            }
            function T7() {
                var _$t = e7.SkeletonData.prototype;
                o7(_$t, _$t.getBones, "bones"), o7(_$t, _$t.getSlots, "slots"), o7(_$t, _$t.getSkins, "skins"), o7(_$t, _$t.getAnimations, "animations"), o7(_$t, _$t.getEvents, "events"), o7(_$t, _$t.getIkConstraints, "ikConstraints"), o7(_$t, _$t.getTransformConstraints, "transformConstraints"), o7(_$t, _$t.getPathConstraints, "pathConstraints");
            }
            function S7() {
                var _$t = e7.RotateTimeline.prototype;
                o7(_$t, _$t.getFrames, "frames");
            }
            function O7() {
                var _$t = e7.ColorTimeline.prototype;
                o7(_$t, _$t.getFrames, "frames");
            }
            function I7() {
                var _$t = e7.AttachmentTimeline.prototype;
                o7(_$t, _$t.getFrames, "frames"), o7(_$t, _$t.getAttachmentNames, "attachmentNames");
            }
            function R7() {
                var _$t = e7.DeformTimeline.prototype;
                o7(_$t, _$t.getFrames, "frames"), f7(_$t, _$t.getFrameVertices, "frameVertices");
            }
            function M7() {
                var _$t = e7.EventTimeline.prototype;
                o7(_$t, _$t.getFrames, "frames"), o7(_$t, _$t.getEvents, "events");
            }
            function C7() {
                var _$t = e7.DrawOrderTimeline.prototype;
                o7(_$t, _$t.getFrames, "frames");
            }
            function N7() {
                var _$t = e7.AnimationState.prototype;
                o7(_$t, _$t.getTracks, "tracks");
            }
            function P7() {
                var _$t = e7.Animation.prototype;
                o7(_$t, _$t.getTimelines, "timelines");
            }
            function D7() {
                var _$t = e7.Skeleton.prototype;
                o7(_$t, _$t.getBones, "bones"), o7(_$t, _$t.getSlots, "slots"), o7(_$t, _$t.getDrawOrder, "drawOrder"), o7(_$t, _$t.getIkConstraints, "ikConstraints"), o7(_$t, _$t.getTransformConstraints, "transformConstraints"), o7(_$t, _$t.getPathConstraints, "pathConstraints"), o7(_$t, _$t.getUpdateCacheList, "_updateCache");
            }
            var L7 = null, B7 = [];
            B7.push(function(t1) {
                var i;
                a7(t1), o7(i = e7.IkConstraintData.prototype, i.getBones, "bones"), v7(), d7(), w7(), g7(), l7(), p7(), y7(), _7(), m7(), b7(), k7(), A7(), E7(), T7(), S7(), O7(), I7(), R7(), M7(), C7(), N7(), P7(), D7();
            }), iP.onPostInfrastructureInitDelegate.add(function() {
                return Promise.resolve().then(function() {
                    return Promise.all([
                        i.import("./spine.wasm-CajjW7-q.js"),
                        i.import("./spine-BGFFnNyc.js")
                    ]).then(function(t1) {
                        var _$i, n;
                        return _$i = t1[0].default, n = t1[1].default, new Promise(function(t1, s) {
                            var _$r = function r(t1) {
                                return "[Spine]: Spine wasm load failed: " + t1;
                            };
                            _$i({
                                instantiateWasm: function instantiateWasm(t1, i) {
                                    dP(n, t1).then(function(t1) {
                                        i(t1.instance, t1.module);
                                    }).catch(function(t1) {
                                        return s(_$r(t1));
                                    });
                                }
                            }).then(function(t1) {
                                L7 = t1, B7.forEach(function(t1) {
                                    t1(L7);
                                });
                            }).then(t1).catch(function(t1) {
                                return s(_$r(t1));
                            });
                        });
                    });
                }).catch(function(t1) {
                    z(t1);
                });
            });
            var U7 = 0, x7 = 0, j7 = function() {
                function t1() {
                    this.start = void 0, this.interrupt = void 0, this.end = void 0, this.dispose = void 0, this.complete = void 0, this.event = void 0;
                }
                return t1.getListeners = function(i, n) {
                    if (!i.listener) {
                        i.listener = new t1;
                        var s = ++x7;
                        n.setTrackEntryListener(s, i), t1.fF.set(s, i);
                    }
                    return i.listener;
                }, t1.emitListener = function(i, n, s, r) {
                    var h = t1.aF.get(i);
                    if (h) switch(r){
                        case e7.EventType.event:
                            h.event && h.event(n, s);
                            break;
                        case e7.EventType.start:
                            h.start && h.start(n);
                            break;
                        case e7.EventType.interrupt:
                            h.interrupt && h.interrupt(n);
                            break;
                        case e7.EventType.end:
                            h.end && h.end(n);
                            break;
                        case e7.EventType.dispose:
                            h.dispose && h.dispose(n);
                            break;
                        case e7.EventType.complete:
                            h.complete && h.complete(n);
                            break;
                        default:
                            W("emitListener doesn't handled", r);
                    }
                }, t1.emitTrackEntryListener = function(t1, i, n, s) {
                    var _$r = this.fF.get(t1);
                    if (_$r) switch(s){
                        case e7.EventType.start:
                            _$r.listener.start && _$r.listener.start(i);
                            break;
                        case e7.EventType.interrupt:
                            _$r.listener.interrupt && _$r.listener.interrupt(i);
                            break;
                        case e7.EventType.end:
                            _$r.listener.end && _$r.listener.end(i);
                            break;
                        case e7.EventType.dispose:
                            _$r.listener.dispose && _$r.listener.dispose(i), this.fF.delete(t1), _$r.listener = null;
                            break;
                        case e7.EventType.complete:
                            _$r.listener.complete && _$r.listener.complete(i);
                            break;
                        case e7.EventType.event:
                            _$r.listener.event && _$r.listener.event(i, n);
                            break;
                        default:
                            W("TrackEntry doesn't handled", s);
                    }
                }, t1.addListener = function(i) {
                    var n = ++U7;
                    return t1.aF.set(n, i), n;
                }, t1.removeListener = function(i) {
                    t1.aF.delete(i);
                }, t1;
            }();
            j7.aF = new Map, j7.fF = new Map, globalThis.TrackEntryListeners = j7;
            var G7 = 1 / 60;
            ML(SL);
            var H7, V7, W7, $7, X7, q7, Y7, K7, J7, Q7 = ML(IL), Z7 = function Z7() {
                this.a = 0, this.b = 0, this.c = 0, this.d = 0, this.worldX = 0, this.worldY = 0;
            }, ttt = function ttt() {
                this.vCount = 0, this.iCount = 0, this.vData = null, this.iData = null, this.meshes = [];
            }, itt = function itt() {
                this.iCount = 0, this.blendMode = 0, this.textureID = 0;
            }, ntt = function() {
                function t1(t1) {
                    this._instance = null, this._state = null, this._skeletonData = null, this._skeleton = null, this._privateMode = !1, this._curIndex = -1, this._isCompleted = !1, this._maxFrameIdex = 0, this._frameIdx = -1, this._inited = !1, this._invalid = !0, this._enableCacheAttachedInfo = !1, this._skeletonInfo = null, this._animationName = null, this.isCompleted = !1, this.totalTime = 0, this.frames = [], this._privateMode = !1, this._inited = !1, this._invalid = !0, this._instance = new e7.SkeletonInstance, this._instance.isCache = !0, this._skeletonData = t1, this._skeleton = this._instance.initSkeleton(t1), this._instance.setUseTint(!0);
                }
                var i = t1.prototype;
                return i.init = function(t1, i) {
                    this._inited = !0, this._animationName = i, this._skeletonInfo = t1;
                }, i.setSkin = function(t1) {
                    this._skeleton && this._skeleton.setSkinByName(t1), this._instance.setSkin(t1);
                }, i.setAnimation = function(t1) {
                    var i = this._skeletonData.animations, n = null;
                    i.forEach(function(i) {
                        i.name === t1 && (n = i);
                    }), n ? (this._maxFrameIdex = Math.floor(n.duration / G7), this._maxFrameIdex <= 0 && (this._maxFrameIdex = 1), this._instance.setAnimation(0, t1, !1)) : W("find no animation named " + t1 + " !!!");
                }, i.updateToFrame = function(t1) {
                    if (this._inited && (this.begin(), this.needToUpdate(t1))) do {
                        this._frameIdx++, this.totalTime += G7, this._instance.updateAnimation(G7);
                        var i = this._instance.updateRenderData();
                        this.vF(this._frameIdx, i), this._frameIdx >= this._maxFrameIdex && (this.isCompleted = !0);
                    }while (this.needToUpdate(t1));
                }, i.getFrame = function(t1) {
                    var i = t1 % this._maxFrameIdex;
                    return this.frames[i];
                }, i.invalidAnimationFrames = function() {
                    this._curIndex = -1, this._isCompleted = !1, this.frames.length = 0;
                }, i.vF = function(t1, i) {
                    var n = i.vCount, _$s = i.iCount, _$r = Q7 / 4, h = new Uint8Array(4 * _$r * n), e = new Uint16Array(_$s), u = e7.wasmUtil.wasm.HEAPU8, o = i.vPtr, f = 4 * n * _$r;
                    h.set(u.subarray(o, o + f));
                    var _$c = i.iPtr, a = 2 * _$s;
                    new Uint8Array(e.buffer).set(u.subarray(_$c, _$c + a));
                    var v = new ttt;
                    v.vCount = n, v.iCount = _$s, v.vData = h, v.iData = e;
                    for(var l = i.getData(), _$d = i.getTextures(), w = l.size(), g = 0; g < w; g += 5){
                        var p = new itt;
                        p.iCount = l.get(g + 3), p.blendMode = l.get(g + 4), p.textureID = _$d.get(g / 5), v.meshes.push(p);
                    }
                    var _$y = this._skeleton.bones, _$_ = [];
                    _$y.forEach(function(t1) {
                        var _$i = new Z7;
                        _$i.a = t1.a, _$i.b = t1.b, _$i.c = t1.c, _$i.d = t1.d, _$i.worldX = t1.worldX, _$i.worldY = t1.worldY, _$_.push(_$i);
                    }), this.frames[t1] = {
                        model: v,
                        boneInfos: _$_
                    };
                }, i.begin = function() {
                    if (this._invalid) {
                        var _$t = this._skeletonInfo, i = null == _$t ? void 0 : _$t.curAnimationCache;
                        i && i !== this && (this._privateMode ? i.invalidAllFrame() : i.updateToFrame(0));
                        var n = null == _$t ? void 0 : _$t.listener;
                        this._instance.setAnimation(0, this._animationName, !1), this.bind(n), _$t.curAnimationCache = this, this._frameIdx = -1, this.isCompleted = !1, this.totalTime = 0, this._invalid = !1;
                    }
                }, i.end = function() {
                    this.needToUpdate() || (this._skeletonInfo.curAnimationCache = null, this.frames.length = this._frameIdx + 1, this.isCompleted = !0, this.unbind(this._skeletonInfo.listener));
                }, i.bind = function(t1) {
                    var i = this;
                    t1.complete = function(t1) {
                        t1 && t1.animation.name === i._animationName && (i.isCompleted = !0);
                    };
                }, i.unbind = function(t1) {
                    t1.complete = null;
                }, i.needToUpdate = function(t1) {
                    return !this.isCompleted && this.totalTime < 30 && (void 0 === t1 || this._frameIdx < t1);
                }, i.isInited = function() {
                    return this._inited;
                }, i.isInvalid = function() {
                    return this._invalid;
                }, i.invalidAllFrame = function() {
                    this.isCompleted = !1, this._invalid = !0;
                }, i.enableCacheAttachedInfo = function() {
                    this._enableCacheAttachedInfo || (this._enableCacheAttachedInfo = !0, this.invalidAllFrame());
                }, i.clear = function() {
                    this._inited = !1, this.invalidAllFrame();
                }, i.destroy = function() {
                    this._instance && (this._instance.destroy(), this._instance = null);
                }, s(t1, [
                    {
                        key: "skeleton",
                        get: function get() {
                            return this._skeleton;
                        }
                    }
                ]), t1;
            }(), stt = function() {
                function t1() {
                    this._privateMode = void 0, this._skeletonCache = void 0, this._animationPool = void 0, this.lF = new Map, this._privateMode = !1, this._animationPool = {}, this._skeletonCache = {};
                }
                var i = t1.prototype;
                return i.enablePrivateMode = function() {
                    this._privateMode = !0;
                }, i.clear = function() {
                    this._animationPool = {}, this._skeletonCache = {};
                }, i.invalidAnimationCache = function(t1) {
                    var i = this._skeletonCache[t1];
                    if (i && i.skeleton) {
                        var n = i.animationsCache;
                        for(var s in n)n[s].invalidAllFrame();
                    }
                }, i.destroySkeleton = function(t1) {
                    var i = this;
                    if (!this._privateMode) {
                        var n = this.lF.get(t1);
                        if (n) {
                            if ((n -= 1) > 0) return void this.lF.set(t1, n);
                            this.lF.delete(t1);
                        }
                    }
                    var s = this._skeletonCache[t1];
                    if (s) {
                        var _$r = this._privateMode ? function r(t1, i) {
                            i.destroy();
                        } : function(n, s) {
                            i._animationPool[t1 + "#" + n] = s, s.clear();
                        }, h = s.animationsCache;
                        for(var e in h){
                            var u = h[e];
                            u && _$r(e, u);
                        }
                        s.skeleton && e7.wasmUtil.destroySpineSkeleton(s.skeleton), delete this._skeletonCache[t1];
                    }
                }, i.createSkeletonInfo = function(t1) {
                    var i = t1.uuid, n = t1.getRuntimeData();
                    if (!this._privateMode) {
                        var s = this.lF.get(i);
                        s ? s += 1 : s = 1, this.lF.set(i, s);
                    }
                    if (this._skeletonCache[i]) return this._skeletonCache[i];
                    var _$r = new e7.Skeleton(n), h = new j7;
                    return this._skeletonCache[i] = {
                        skeleton: _$r,
                        clipper: null,
                        state: null,
                        listener: h,
                        animationsCache: {},
                        curAnimationCache: null,
                        assetUUID: i
                    };
                }, i.getSkeletonInfo = function(t1) {
                    var i = t1.uuid;
                    return this._skeletonCache[i];
                }, i.getAnimationCache = function(t1, i) {
                    var n = this._skeletonCache[t1];
                    return n ? n.animationsCache[i] : null;
                }, i.initAnimationCache = function(t1, i, n) {
                    var s = i.getRuntimeData();
                    if (!s) return null;
                    var _$r = this._skeletonCache[t1];
                    if (!_$r || !_$r.skeleton) return null;
                    var h = _$r.animationsCache, e = h[n];
                    if (!e) {
                        var u = t1 + "#" + n;
                        (e = this._animationPool[u]) ? delete this._animationPool[u] : (e = new ntt(s))._privateMode = this._privateMode, e.init(_$r, n), h[n] = e;
                    }
                    return e.init(_$r, n), e.setAnimation(n), e;
                }, i.destroyCachedAnimations = function(t1) {
                    if (t1) {
                        var i = this._animationPool;
                        for(var n in i)n.includes(t1) && (i[n].destroy(), delete i[n]);
                        var s = this._skeletonCache[t1], _$r = s && s.skeleton;
                        _$r && e7.wasmUtil.destroySpineSkeleton(_$r), s && delete this._skeletonCache[t1];
                    } else {
                        var h = this._animationPool;
                        for(var e in h)h[e].destroy(), delete h[e];
                    }
                }, t1;
            }();
            stt.FrameTime = G7, stt.sharedCache = new stt;
            var rtt = (H7 = go("sp.SkeletonData"), V7 = Zo([
                ay
            ]), W7 = Zo([
                Ji
            ]), H7((X7 = ho(($7 = function(t1) {
                function i() {
                    var _$i;
                    return (_$i = t1.call(this) || this)._skeletonJson = X7 && X7(), _$i.textures = q7 && q7(), _$i.textureNames = Y7 && Y7(), _$i.scale = K7 && K7(), _$i._atlasText = J7 && J7(), _$i.Rr = void 0, _$i.dF = null, _$i.wF = null, _$i.gF = null, _$i.reset(), _$i;
                }
                h(i, t1);
                var n = i.prototype;
                return n.createNode = function(t1) {
                    var _$i = new VE(this.name);
                    return _$i.addComponent("cc.Skeleton").skeletonData = this, t1(null, _$i);
                }, n.reset = function() {
                    this.dF = null;
                }, n.resetEnums = function() {}, n.getRuntimeData = function(t1) {
                    if (this.dF) return this.dF;
                    if (!(this.textures && this.textures.length > 0) && this.textureNames && this.textureNames.length > 0) return t1 || z(this.name + " no textures found!"), null;
                    var _$i = this.pF(), n = e7.wasmUtil.querySpineSkeletonDataByUUID(_$i);
                    if (n) this.dF = n;
                    else {
                        for(var _$s = this.textures.length, _$r = [], _$h = 0; _$h < _$s; ++_$h){
                            var e = this.textures[_$h];
                            _$r.push(e.uuid || e.getId());
                        }
                        if (this._skeletonJson) this.dF = e7.wasmUtil.createSpineSkeletonDataWithJson(this.skeletonJsonStr, this._atlasText, this.textureNames, _$r), e7.wasmUtil.registerSpineSkeletonDataWithUUID(this.dF, _$i);
                        else {
                            var u = new Uint8Array(this._nativeAsset), o = u.length, f = e7.wasmUtil.createStoreMemory(o);
                            e7.wasmUtil.wasm.HEAPU8.subarray(f, f + o).set(u), this.dF = e7.wasmUtil.createSpineSkeletonDataWithBinary(o, this._atlasText, this.textureNames, _$r), e7.wasmUtil.registerSpineSkeletonDataWithUUID(this.dF, _$i), e7.wasmUtil.freeStoreMemory();
                        }
                    }
                    return this.dF;
                }, n.getSkinsEnum = function() {
                    if (this.wF) return this.wF;
                    var _$t = this.getRuntimeData(!0);
                    if (_$t) {
                        for(var _$i = _$t.skins, n = {}, _$s = 0; _$s < _$i.length; _$s++)n[_$i[_$s].name] = _$s;
                        return this.wF = gi(n);
                    }
                    return null;
                }, n.getAnimsEnum = function() {
                    if (this.gF && Object.keys(this.gF).length > 1) return this.gF;
                    var _$t = this.getRuntimeData(!0);
                    if (_$t) {
                        for(var _$i = {
                            "<None>": 0
                        }, n = _$t.animations, _$s = 0; _$s < n.length; _$s++)_$i[n[_$s].name] = _$s + 1;
                        return this.gF = gi(_$i);
                    }
                    return null;
                }, n.pF = function() {
                    var _$t = [
                        this._atlasText
                    ].concat(this.textures.map(function(t1) {
                        return t1.getId();
                    })).join("");
                    return "" + this._uuid + Iv(_$t, 668);
                }, n.destroy = function() {
                    return stt.sharedCache.destroyCachedAnimations(this._uuid), e7.wasmUtil.destroySpineSkeletonDataWithUUID(this.pF()), t1.prototype.destroy.call(this);
                }, n.yF = function() {
                    return 0 === this._atlasText.length && !this._skeletonJson && !this._nativeAsset;
                }, s(i, [
                    {
                        key: "skeletonJsonStr",
                        get: function get() {
                            return this._skeletonJson ? JSON.stringify(this._skeletonJson) : "";
                        }
                    },
                    {
                        key: "skeletonJson",
                        get: function get() {
                            return this._skeletonJson;
                        },
                        set: function set(t1) {
                            this.reset(), this._skeletonJson = "string" == typeof t1 ? JSON.parse(t1) : t1, !this._uuid && t1.skeleton && (this._uuid = t1.skeleton.hash);
                        }
                    },
                    {
                        key: "atlasText",
                        get: function get() {
                            return this._atlasText;
                        },
                        set: function set(t1) {
                            this._atlasText = t1, this.reset();
                        }
                    },
                    {
                        key: "_nativeAsset",
                        get: function get() {
                            return this.Rr;
                        },
                        set: function set(t1) {
                            this.Rr = t1, this.reset();
                        }
                    }
                ]), i;
            }(sg)).prototype, "_skeletonJson", [
                Ro
            ], function() {
                return null;
            }), q7 = ho($7.prototype, "textures", [
                Ro,
                V7
            ], function() {
                return [];
            }), Y7 = ho($7.prototype, "textureNames", [
                Ro,
                W7
            ], function() {
                return [];
            }), K7 = ho($7.prototype, "scale", [
                Ro
            ], function() {
                return 1;
            }), J7 = ho($7.prototype, "_atlasText", [
                Ro
            ], function() {
                return "";
            }), $7)) || $7);
            A.internal.SpineSkeletonData = rtt;
            var htt = function(t1) {
                function i() {
                    var _$i;
                    return (_$i = t1.call(this) || this)._F = new Set, _$i;
                }
                h(i, t1), i.getInstance = function() {
                    return i.eh || (i.eh = new i, PN.registerSystem(i.ID, i.eh, 200)), i.eh;
                };
                var n = i.prototype;
                return n.add = function(t1) {
                    t1 && (this._F.has(t1) || this._F.add(t1));
                }, n.remove = function(t1) {
                    t1 && this._F.has(t1) && this._F.delete(t1);
                }, n.postUpdate = function(t1) {
                    this._F && this._F.forEach(function(i) {
                        i.updateAnimation(t1);
                    });
                }, n.prepareRenderData = function() {
                    this._F && this._F.forEach(function(t1) {
                        t1.po();
                    });
                }, i;
            }(_v);
            htt.ID = "SKELETON", htt.eh = void 0, A.internal.SpineSkeletonSystem = htt;
            var ett, utt, ftt, ctt, att, vtt, ltt, dtt, wtt, gtt, ptt, ytt, btt, ktt, Att, Ett, Ttt, Stt, Ott, Itt, Rtt, Mtt, Ctt, Ntt, Ptt, Dtt, Ltt, Btt = new cr, Ftt = function() {
                function t1() {
                    this._isInitialized = !1, this._skeletonBones = null, this._socketNodes = null, this.mF = [], this._isInitialized = !1;
                }
                var i = t1.prototype;
                return i.init = function(t1) {
                    var i;
                    this._isInitialized = !1, t1 && 0 !== (null == (i = t1.socketNodes) ? void 0 : i.size) && (this._skeletonBones = t1._skeleton.bones, !this._skeletonBones || this._skeletonBones.length < 1 || (this._socketNodes = t1.socketNodes, !this._socketNodes || this._socketNodes.size <= 0 || (this._isInitialized = !0, this._syncAttachedNode())));
                }, i.updateSkeletonBones = function(t1) {
                    this._skeletonBones = t1;
                }, i.reset = function() {
                    this._isInitialized = !1, this._skeletonBones = null, this._socketNodes = null, this.mF.length = 0;
                }, i._syncAttachedNode = function() {
                    if (this._isInitialized) {
                        for(var _$t, i = this._socketNodes, n = d(i); !(_$t = n()).done;){
                            var s = _$t.value, _$r = s[0], h = s[1];
                            if (h && h.isValid) {
                                var e = this._skeletonBones[_$r];
                                e && this.matrixHandle(h, e);
                            } else this.mF.push(_$r);
                        }
                        if (!(this.mF.length <= 0)) {
                            for(var u, o = d(this.mF); !(u = o()).done;){
                                var f = u.value;
                                i.delete(f);
                            }
                            this.mF.length = 0;
                        }
                    }
                }, i.matrixHandle = function(t1, i) {
                    Btt.m00 = i.a, Btt.m01 = i.c, Btt.m04 = i.b, Btt.m05 = i.d, Btt.m12 = i.worldX, Btt.m13 = i.worldY, t1.matrix = Btt;
                }, t1;
            }();
            function Utt(t1) {
                return !!t1 && !t1.yF();
            }
            var xtt = {
                UNSET: -1,
                REALTIME: 0,
                SHARED_CACHE: 1,
                PRIVATE_CACHE: 2
            };
            _i(xtt);
            var Gtt = {
                default: 0
            };
            _i(Gtt);
            var Htt = {
                "<None>": 0
            };
            _i(Htt);
            var Wtt = (ett = go("sp.Skeleton.SpineSocket"), utt = Zo(VE), ett((ctt = ho((ftt = function ftt(t1, i) {
                void 0 === t1 && (t1 = ""), void 0 === i && (i = null), this.path = ctt && ctt(), this.target = att && att(), this.path = t1, this.target = i;
            }).prototype, "path", [
                Ro
            ], function() {
                return "";
            }), att = ho(ftt.prototype, "target", [
                utt,
                Ro
            ], function() {
                return null;
            }), ftt)) || ftt);
            qt(Wtt, "sp.Skeleton.SpineSocket");
            var ztt = (vtt = go("sp.Skeleton"), ltt = Zo(rtt), dtt = Zo(Gtt), wtt = Zo(Htt), gtt = Zo(xtt), ptt = Zo([
                Wtt
            ]), ytt = Zo(rA), vtt(((Ltt = function(t1) {
                function i() {
                    var _$i;
                    return (_$i = t1.call(this) || this)._skeletonData = btt && btt(), _$i.defaultSkin = ktt && ktt(), _$i.defaultAnimation = Att && Att(), _$i._premultipliedAlpha = Ett && Ett(), _$i._timeScale = Ttt && Ttt(), _$i._preCacheMode = Stt && Stt(), _$i._cacheMode = Ott && Ott(), _$i._sockets = Itt && Itt(), _$i._useTint = Rtt && Rtt(), _$i._debugMesh = Mtt && Mtt(), _$i._debugBones = Ctt && Ctt(), _$i._debugSlots = Ntt && Ntt(), _$i._enableBatch = Ptt && Ptt(), _$i._runtimeData = null, _$i._skeleton = null, _$i._instance = null, _$i._state = null, _$i._textures = [], _$i.bF = null, _$i._animationName = "", _$i._skinName = "", _$i._drawList = new Uh(function() {
                        return {
                            material: null,
                            texture: null,
                            indexOffset: 0,
                            indexCount: 0
                        };
                    }, 1), _$i._materialCache = {}, _$i.paused = !1, _$i._enumSkins = gi({}), _$i._enumAnimations = gi({}), _$i.attachUtil = void 0, _$i._socketNodes = new Map, _$i._cachedSockets = new Map, _$i._startEntry = void 0, _$i._endEntry = void 0, _$i._paused = !1, _$i._accTime = 0, _$i._playCount = 0, _$i._skeletonCache = null, _$i._animCache = null, _$i._animationQueue = [], _$i._headAniInfo = null, _$i._isAniComplete = !0, _$i._playTimes = 0, _$i._curFrame = null, _$i._listener = null, _$i.kF = null, _$i.AF = void 0, _$i.EF = void 0, _$i.TF = null, _$i._vLength = 0, _$i._vBuffer = null, _$i._iLength = 0, _$i._iBuffer = null, _$i._model = void 0, _$i._tempColor = {
                        r: 0,
                        g: 0,
                        b: 0,
                        a: 0
                    }, _$i.SF = -1, _$i.OF = null, _$i.IF = !1, _$i.loop = Dtt && Dtt(), _$i._useVertexOpacity = !0, _$i._startEntry = {
                        animation: {
                            name: ""
                        },
                        trackIndex: 0
                    }, _$i._endEntry = {
                        animation: {
                            name: ""
                        },
                        trackIndex: 0
                    }, _$i.AF = -1, _$i.EF = -1, _$i._instance = new e7.SkeletonInstance, _$i._instance.dtRate = +_$i._timeScale, _$i._instance.isCache = _$i.isAnimationCached(), _$i.attachUtil = new Ftt, _$i;
                }
                h(i, t1);
                var n = i.prototype;
                return n.__preload = function() {
                    t1.prototype.__preload.call(this), this._updateSkeletonData(), this._updateDebugDraw();
                }, n.onRestore = function() {
                    this.updateMaterial(), this.po();
                }, n.getState = function() {
                    return this._state;
                }, n.onEnable = function() {
                    t1.prototype.onEnable.call(this), this._flushAssembler(), htt.getInstance().add(this), this.IF = !0;
                }, n.onDisable = function() {
                    t1.prototype.onDisable.call(this), htt.getInstance().remove(this), this.IF = !1;
                }, n.onDestroy = function() {
                    var _$i;
                    this.SF > 0 && (j7.removeListener(this.SF), this.SF = -1), this._drawList.destroy(), this.destroyRenderData(), this.RF(), this._vBuffer = null, this._iBuffer = null, this.attachUtil.reset(), null == (_$i = this.OF) || _$i.clear(), this.OF = null, this._cachedSockets.clear(), this._socketNodes.clear(), this._animCache = null, htt.getInstance().remove(this), this._instance && (this._instance.destroy(), this._instance = null), this.MF(this._skeletonCache), this._skeletonCache = null, t1.prototype.onDestroy.call(this);
                }, n.clearAnimation = function(t1) {
                    this.isAnimationCached() || (this.clearTrack(t1 || 0), this.setToSetupPose());
                }, n.clearAnimations = function() {
                    this.isAnimationCached() || (this.clearTracks(), this.setToSetupPose());
                }, n._updateSkeletonData = function() {
                    var _$t = this._skeletonData;
                    Utt(this._skeletonData) ? (this._instance && (this._instance.dtRate = +this._timeScale), this._runtimeData = _$t.getRuntimeData(), this._runtimeData && (this.setSkeletonData(this._runtimeData), this._textures = _$t.textures, this._refreshInspector(), this.defaultSkin && "" !== this.defaultSkin ? this.setSkin(this.defaultSkin) : this._skinName && "" !== this._skinName && this.setSkin(this._skinName), this.defaultAnimation ? this.animation = this.defaultAnimation.toString() : this._animationName ? this.animation = this._animationName : this.animation = "", this._updateUseTint(), this._indexBoneSockets(), this._updateSocketBindings(), this.attachUtil.init(this), this._preCacheMode = this._cacheMode)) : (this._runtimeData = null, this._state = null, this._skeleton = null, this._textures = [], this._refreshInspector(), this.IF && htt.getInstance().remove(this));
                }, n.setSkeletonData = function(t1) {
                    var _$i = this._skeletonCache;
                    if (1 === this._cacheMode ? this._skeletonCache = stt.sharedCache : 2 === this._cacheMode ? (this._skeletonCache = new stt, this._skeletonCache.enablePrivateMode()) : this._skeletonCache = null, _$i !== this._skeletonCache && this.MF(_$i), this.isAnimationCached()) {
                        (this.debugBones || this.debugSlots) && nt(16410);
                        var n = this._skeletonCache.getSkeletonInfo(this._skeletonData);
                        this.bF !== n && (this.MF(this._skeletonCache), n || 2 !== this._cacheMode || (this._animCache = this._skeletonCache.initAnimationCache(this.skeletonData.uuid, this._skeletonData, this._animationName)), this.bF = this._skeletonCache.createSkeletonInfo(this._skeletonData)), this.bF && (this._skeleton = this.bF.skeleton);
                    } else this._skeleton = this._instance.initSkeleton(t1), this._state = this._instance.getAnimationState(), this._instance.setPremultipliedAlpha(this._premultipliedAlpha);
                    this.IF && htt.getInstance().add(this), this._flushAssembler();
                }, n.setSlotsRange = function(t1, i) {
                    this.isAnimationCached() ? nt(16411) : (this.AF = t1, this.EF = i);
                }, n.getAttachment = function(t1, i) {
                    return this._skeleton ? this._skeleton.getAttachmentByName(t1, i) : null;
                }, n.setAttachment = function(t1, i) {
                    this._skeleton && this._skeleton.setAttachment(t1, i), this.invalidAnimationCache();
                }, n.getTextureAtlas = function(t1) {
                    return t1.region;
                }, n.setAnimation = function(t1, i, n) {
                    if ("string" != typeof i) return Q(7511), null;
                    var _$s = this._skeleton;
                    if (!_$s || !_$s.data.findAnimation(i)) return Q(7509, i), null;
                    var _$r = null;
                    if (void 0 === n && (n = !0), this._playTimes = +!n, this.isAnimationCached()) {
                        if (0 !== t1 && nt(16412), !this._skeletonCache) return null;
                        var _$h = this._skeletonCache.getAnimationCache(this._skeletonData.uuid, i);
                        _$h || (_$h = this._skeletonCache.initAnimationCache(this.skeletonData.uuid, this._skeletonData, i)) && this._skinName && _$h.setSkin(this._skinName), _$h && (this._animationName = i, this._isAniComplete = !1, this._accTime = 0, this._playCount = 0, this._animCache = _$h, this._socketNodes.size > 0 && this._animCache.enableCacheAttachedInfo(), this._animCache.updateToFrame(0), this._curFrame = this._animCache.frames[0]);
                    } else this._animationName = i, _$r = this._instance.setAnimation(t1, i, n);
                    return this.po(), _$r;
                }, n.addAnimation = function(t1, i, n, s) {
                    if (s = s || 0, this.isAnimationCached()) return 0 !== t1 && nt(16413), this._animationQueue.push({
                        animationName: i,
                        loop: n,
                        delay: s
                    }), null;
                    if (this._skeleton) {
                        var _$r, _$h = this._skeleton.data.findAnimation(i);
                        return _$h ? null == (_$r = this._state) ? void 0 : _$r.addAnimationWith(t1, _$h, n, s) : (Q(7510, i), null);
                    }
                    return null;
                }, n.findAnimation = function(t1) {
                    return this._skeleton ? this._skeleton.data.findAnimation(t1) : null;
                }, n.getCurrent = function(t1) {
                    if (this.isAnimationCached()) nt(16414);
                    else if (this._state) return this._state.getCurrent(t1);
                    return null;
                }, n.setSkin = function(t1) {
                    t1 && (this._skeleton && this._skeleton.setSkinByName(t1), this._instance.setSkin(t1), this.isAnimationCached() && this._animCache && this._animCache.setSkin(t1), this._skinName = t1, this.invalidAnimationCache());
                }, n.updateAnimation = function(t1) {
                    if (this.po(), !this.paused) if (this.isAnimationCached()) {
                        if (t1 *= this._timeScale, this._isAniComplete) {
                            var _$i;
                            if (0 === this._animationQueue.length && !this._headAniInfo) {
                                var n = this._animCache;
                                if (n && n.isInvalid()) {
                                    n.updateToFrame(0);
                                    var _$s = n.frames;
                                    this._curFrame = _$s[_$s.length - 1];
                                }
                                return;
                            }
                            if (this._headAniInfo || (this._headAniInfo = this._animationQueue.shift()), this._accTime += t1, this._accTime > (null == (_$i = this._headAniInfo) ? void 0 : _$i.delay)) {
                                var _$r = this._headAniInfo;
                                this._headAniInfo = null, this.setAnimation(0, null == _$r ? void 0 : _$r.animationName, null == _$r ? void 0 : _$r.loop);
                            }
                            return;
                        }
                        this._updateCache(t1);
                    } else this._instance.updateAnimation(t1);
                }, n._updateCache = function(t1) {
                    var _$i = this._animCache;
                    if (_$i.isInited()) {
                        var n = _$i.frames, _$s = stt.FrameTime;
                        0 === this._accTime && 0 === this._playCount && (this._startEntry.animation.name = this._animationName, this._listener && this._listener.start && this._listener.start(this._startEntry)), this._accTime += t1;
                        var _$r = Math.floor(this._accTime / _$s);
                        if (_$i.isCompleted || _$i.updateToFrame(_$r), this._curFrame = n[_$r], void 0 !== this._curFrame && this.attachUtil.updateSkeletonBones(this._curFrame.boneInfos), _$i.isCompleted && _$r >= n.length) {
                            if (this._playCount++, this._playTimes > 0 && this._playCount >= this._playTimes) return this._curFrame = n[n.length - 1], this._accTime = 0, this._playCount = 0, this._isAniComplete = !0, void this._emitCacheCompleteEvent();
                            this._accTime = 0, _$r = 0, this._curFrame = n[_$r], this._emitCacheCompleteEvent();
                        }
                    }
                }, n._emitCacheCompleteEvent = function() {
                    this._listener && (this._endEntry.animation.name = this._animationName, this._listener.complete && this._listener.complete(this._endEntry), this._listener.end && this._listener.end(this._endEntry));
                }, n.updateRenderData = function() {
                    return this.isAnimationCached() ? this._curFrame ? this._curFrame.model : null : this._instance.updateRenderData();
                }, n._flushAssembler = function() {
                    var _$t = i.Assembler.getAssembler(this);
                    this._assembler !== _$t && (this._assembler = _$t), this._skeleton && this._assembler && this._assembler.createData && (this._renderData = this._assembler.createData(this), this.po(), this._updateColor());
                }, n._render = function(t1) {
                    var _$i = 0;
                    if (this.renderData && this._drawList.length > 0) {
                        for(var n = this.renderData, _$s = n.chunk, _$r = _$s.vertexAccessor, _$h = n.getMeshBuffer(), e = _$h.indexOffset, u = 0; u < this._drawList.length; u++){
                            var o = this._drawList.data[u];
                            o.texture && t1.commitMiddleware(this, _$h, e + o.indexOffset, o.indexCount, o.texture, o.material, this._enableBatch), _$i += o.indexCount;
                        }
                        var f = n.indices.subarray(0, _$i);
                        _$r.appendIndices(_$s.bufferId, f), _$r.getMeshBuffer(_$s.bufferId).setDirty();
                    }
                }, n.requestDrawData = function(t1, i, n, s) {
                    var _$r = this._drawList.add();
                    _$r.material = t1;
                    var _$h, e, u = Ck.assets.get(i);
                    return u || (u = null == (_$h = this.skeletonData) ? void 0 : _$h.textures.find(function(t1) {
                        return t1.uuid === i || t1.getId() === i;
                    })) || (u = null == (e = this.OF) ? void 0 : e.get(i)), _$r.texture = u, _$r.indexOffset = n, _$r.indexCount = s, _$r;
                }, n._updateBuiltinMaterial = function() {
                    return Lk.get("default-spine-material");
                }, n.updateMaterial = function() {
                    var _$t;
                    _$t = this._customMaterial ? this._customMaterial : this._updateBuiltinMaterial(), this.setSharedMaterial(_$t, 0), this.RF();
                }, n.CF = function() {
                    return null !== this.customMaterial ? this.customMaterial : (this.material || this.updateMaterial(), this.material);
                }, n.RF = function() {
                    for(var _$t in this._materialCache)this._materialCache[_$t].destroy();
                    this._materialCache = {};
                }, n.getMaterialForBlendAndTint = function(t1, i, n) {
                    var _$s = n + "/" + t1 + "/" + i, _$r = this._materialCache[_$s];
                    if (_$r) return _$r;
                    _$r = this.TF ? this.TF : new lA({
                        parent: this.CF(),
                        subModelIdx: 0,
                        owner: this
                    }), this._materialCache[_$s] = _$r, _$r.overridePipelineStates({
                        blendState: {
                            blendColor: Yr.WHITE,
                            targets: [
                                {
                                    blendEq: 0,
                                    blendAlphaEq: 0,
                                    blendSrc: t1,
                                    blendDst: i,
                                    blendSrcAlpha: t1,
                                    blendDstAlpha: i
                                }
                            ]
                        }
                    });
                    var e = !1;
                    1 === n && (e = !0);
                    var u = !this._enableBatch;
                    return _$r.recompileShaders({
                        TWO_COLORED: e,
                        USE_LOCAL: u
                    }), _$r;
                }, n._updateAnimEnum = function() {
                    var _$t;
                    _$t = Utt(this.skeletonData) ? this.skeletonData.getAnimsEnum() : Htt, this._enumAnimations = gi({}), Object.assign(this._enumAnimations, _$t), gi.update(this._enumAnimations), fn(this, "_animationIndex", this._enumAnimations);
                }, n._updateSkinEnum = function() {
                    var _$t;
                    _$t = Utt(this.skeletonData) ? this.skeletonData.getSkinsEnum() : Gtt, this._enumSkins = gi({}), Object.assign(this._enumSkins, _$t), gi.update(this._enumSkins), fn(this, "_defaultSkinIndex", this._enumSkins);
                }, n._refreshInspector = function() {}, n.destroyRenderData = function() {
                    this._drawList.reset(), t1.prototype.destroyRenderData.call(this);
                }, n.createRenderEntity = function() {
                    var _$t = new cB(1);
                    return _$t.__(!0), _$t;
                }, n.markForUpdateRenderData = function(i) {
                    void 0 === i && (i = !0), t1.prototype.po.call(this, i), this.kF && this.kF.po(i);
                }, n.syncAttachedNode = function() {
                    this.attachUtil._syncAttachedNode();
                }, n.isAnimationCached = function() {
                    return 0 !== this._cacheMode;
                }, n.setAnimationCacheMode = function(t1) {
                    this._preCacheMode !== t1 && (this._cacheMode = t1, this._preCacheMode = t1, this._instance && (this._instance.isCache = this.isAnimationCached()), this._updateSkeletonData(), this.po());
                }, n.setToSetupPose = function() {
                    this._skeleton && this._skeleton.setToSetupPose();
                }, n.setBonesToSetupPose = function() {
                    this._skeleton && this._skeleton.setBonesToSetupPose();
                }, n.setSlotsToSetupPose = function() {
                    this._skeleton && this._skeleton.setSlotsToSetupPose();
                }, n.invalidAnimationCache = function() {
                    this.isAnimationCached() && this._skeletonCache && this._skeletonCache.invalidAnimationCache(this._skeletonData.uuid);
                }, n.findBone = function(t1) {
                    return this._skeleton ? this._skeleton.findBone(t1) : null;
                }, n.findSlot = function(t1) {
                    return this._skeleton ? this._skeleton.findSlot(t1) : null;
                }, n.setMix = function(t1, i, n) {
                    this.isAnimationCached() ? nt(16415) : this._state && this._instance.setMix(t1, i, n);
                }, n.clearTracks = function() {
                    this.isAnimationCached() ? nt(16416) : this._state && (this._state.clearTracks(), this.setToSetupPose());
                }, n.clearTrack = function(t1) {
                    this.isAnimationCached() ? nt(16417) : this._state && this._state.clearTrack(t1);
                }, n.updateWorldTransform = function() {
                    this.isAnimationCached() && this._skeleton && this._skeleton.updateWorldTransform();
                }, n.NF = function(t1) {
                    for(var _$i = 0, n = t1.length; _$i < n; _$i++){
                        var _$s = t1[_$i].target;
                        !_$s || _$s.parent && _$s.parent === this.node || z("Target node " + _$s.name + " is expected to be a direct child of " + this.node.name);
                    }
                    var _$r = new Map;
                    t1.forEach(function(t1) {
                        t1.target && (_$r.get(t1.target) ? z("Target node " + t1.target.name + " has existed.") : _$r.set(t1.target, !0));
                    });
                }, n._updateSocketBindings = function() {
                    if (this._skeleton) {
                        this._socketNodes.clear();
                        for(var _$t = 0, _$i = this._sockets.length; _$t < _$i; _$t++){
                            var n = this._sockets[_$t];
                            if (n.path && n.target) {
                                var _$s = this._cachedSockets.get(n.path);
                                if (!_$s) {
                                    z("Skeleton data does not contain path " + n.path);
                                    continue;
                                }
                                this._socketNodes.set(_$s, n.target);
                            }
                        }
                    }
                }, n._indexBoneSockets = function() {
                    if (this._skeleton) {
                        this._cachedSockets.clear();
                        for(var _$t = this._skeleton.bones, n = 0, _$s = _$t.length; n < _$s; n++){
                            var _$r = _$t[n].data, _$h = function i(n) {
                                return null == n.parent ? n.data.name || "<Unamed>" : i(_$t[n.parent.data.index]) + "/" + n.data.name;
                            }(_$t[n]);
                            this._cachedSockets.set(_$h, _$r.index);
                        }
                    }
                }, n.querySockets = function() {
                    return this._skeleton ? (0 === this._cachedSockets.size && this._indexBoneSockets(), this._cachedSockets.size > 0 ? Array.from(this._cachedSockets.keys()).sort() : []) : [];
                }, n._updateUseTint = function() {
                    this.RF(), this.destroyRenderData(), this.isAnimationCached() || this._instance.setUseTint(this._useTint);
                    var _$t = this._assembler;
                    _$t && _$t.createData && this._skeleton && (this._renderData = _$t.createData(this), this.po());
                }, n._updateBatch = function() {
                    this.RF(), this.po();
                }, n._updateDebugDraw = function() {
                    if (this.debugBones || this.debugSlots || this.debugMesh) {
                        if (!this.kF) {
                            var _$t = new VE("DEBUG_DRAW_NODE");
                            _$t.layer = this.node.layer, _$t.hideFlags |= 1032;
                            var _$i = null;
                            try {
                                (_$i = _$t.addComponent("cc.Graphics")).lineWidth = 5, _$i.strokeColor = new Yr(255, 0, 0, 255), this.kF = _$i, _$t.parent = this.node, this.node.on("layer-changed", this._applyLayer, this);
                            } catch (i) {
                                rt(4501, i.message), _$t.destroy(), _$t = null;
                            }
                        }
                        this.isAnimationCached() ? nt(16418) : this._instance.setDebugMode(!0);
                    } else this.kF && (this.node.off("layer-changed", this._applyLayer, this), this.kF.node.destroy(), this.kF = null, this.isAnimationCached() || this._instance && this._instance.setDebugMode(!1));
                }, n.PF = function() {
                    var _$t = this.node.io(), _$i = this._runtimeData;
                    if (!_$i) return _$t.setContentSize(100, 100), _$t.anchorX = .5, void (_$t.anchorX = .5);
                    var n = _$i.width, _$s = _$i.height;
                    n && _$s && (_$t.setContentSize(n, _$s), 0 !== n && (_$t.anchorX = Math.abs(_$i.x) / n), 0 !== _$s && (_$t.anchorY = Math.abs(_$i.y) / _$s));
                }, n._updateColor = function() {
                    var _$i = this.node._uiProps, n = this._tempColor, _$s = this._color, _$r = this.node.parent ? this.node.parent._uiProps.opacity : 1, _$h = _$i.localOpacity * _$r * _$s.a / 255;
                    if (n.r !== _$s.r || n.g !== _$s.g || n.b !== _$s.b || n.a !== _$h) {
                        _$i.colorDirty = !0, n.r = _$s.r, n.g = _$s.g, n.b = _$s.b, n.a = _$h;
                        var e = _$s.r / 255, u = _$s.g / 255, o = _$s.b / 255;
                        this._instance.setColor(e, u, o, _$h);
                    }
                }, n.setVertexEffectDelegate = function(t1) {
                    if (this._instance) if (t1) {
                        var _$i = null == t1 ? void 0 : t1.getEffectType();
                        if ("jitter" === _$i) {
                            var n = null == t1 ? void 0 : t1.getJitterVertexEffect();
                            this._instance.setJitterEffect(n);
                        } else if ("swirl" === _$i) {
                            var _$s = null == t1 ? void 0 : t1.getJitterVertexEffect();
                            this._instance.setSwirlEffect(_$s);
                        }
                    } else this._instance.clearEffect();
                }, n._ensureListener = function() {
                    this._listener || (this._listener = new j7, this.SF = j7.addListener(this._listener), this._instance.setListener(this.SF));
                }, n.setStartListener = function(t1) {
                    this._ensureListener(), this._listener.start = t1;
                }, n.setInterruptListener = function(t1) {
                    this._ensureListener(), this._listener.interrupt = t1;
                }, n.setEndListener = function(t1) {
                    this._ensureListener(), this._listener.end = t1;
                }, n.setDisposeListener = function(t1) {
                    this._ensureListener(), this._listener.dispose = t1;
                }, n.setCompleteListener = function(t1) {
                    this._ensureListener(), this._listener.complete = t1;
                }, n.setEventListener = function(t1) {
                    this._ensureListener(), this._listener.event = t1;
                }, n.setTrackStartListener = function(t1, i) {
                    j7.getListeners(t1, this._instance).start = i;
                }, n.setTrackInterruptListener = function(t1, i) {
                    j7.getListeners(t1, this._instance).interrupt = i;
                }, n.setTrackEndListener = function(t1, i) {
                    j7.getListeners(t1, this._instance).end = i;
                }, n.setTrackDisposeListener = function(t1, i) {
                    j7.getListeners(t1, this._instance).dispose = i;
                }, n.setTrackCompleteListener = function(t1, i) {
                    j7.getListeners(t1, this._instance).complete = function(t1) {
                        var n = Math.floor(t1.trackTime / t1.animationEnd);
                        i(t1, n);
                    };
                }, n.setTrackEventListener = function(t1, i) {
                    j7.getListeners(t1, this._instance).event = i;
                }, n.getDebugShapes = function() {
                    return this._instance.getDebugShapes();
                }, n.setSlotTexture = function(t1, i, n) {
                    if (this.isAnimationCached()) z("Cached mode can't change texture of slot");
                    else if (this.findSlot(t1)) {
                        var _$s = i.width, _$r = i.height;
                        this._instance.resizeSlotRegion(t1, _$s, _$r, n || !1);
                        var e = i.uuid;
                        e || (e = i.getId()), this._instance.setSlotTexture(t1, e), this.OF || (this.OF = new Map), this.OF.set(e, i);
                    } else z("No slot named:" + t1);
                }, n.MF = function(t1) {
                    t1 && this.bF && (t1.destroySkeleton(this.bF.assetUUID), this.bF = null);
                }, n._applyLayer = function() {
                    this.kF && (this.kF.node.layer = this.node.layer);
                }, s(i, [
                    {
                        key: "drawList",
                        get: function get() {
                            return this._drawList;
                        }
                    },
                    {
                        key: "skeletonData",
                        get: function get() {
                            return this._skeletonData;
                        },
                        set: function set(t1) {
                            t1 && t1.resetEnums(), this._skeletonData !== t1 && (this.destroyRenderData(), this._skeletonData = t1, this.defaultSkin = "", this.defaultAnimation = "", this._animationName = "", this._skinName = "", this._updateSkeletonData(), this.PF());
                        }
                    },
                    {
                        key: "_defaultSkinIndex",
                        get: function get() {
                            if (Utt(this.skeletonData)) {
                                var _$t = this.skeletonData.getSkinsEnum();
                                if (_$t) if ("" === this.defaultSkin) {
                                    if (_$t.hasOwnProperty(0)) return this._defaultSkinIndex = 0, 0;
                                } else {
                                    var _$i = _$t[this.defaultSkin];
                                    if (void 0 !== _$i) return _$i;
                                }
                            }
                            return 0;
                        },
                        set: function set(t1) {
                            var _$i;
                            if (Utt(this.skeletonData) && (_$i = this.skeletonData.getSkinsEnum()), _$i) {
                                var n = _$i[t1];
                                void 0 !== n ? (this.defaultSkin = String(n), this.setSkin(this.defaultSkin), this._refreshInspector(), this.po()) : z(this.name + " skin enums are invalid");
                            } else z(this.name + " skin enums are invalid");
                        }
                    },
                    {
                        key: "_animationIndex",
                        get: function get() {
                            var _$t = this.animation;
                            if (Utt(this.skeletonData)) if (_$t) {
                                var _$i = this.skeletonData.getAnimsEnum();
                                if (_$i) {
                                    var n = _$i[_$t];
                                    if (void 0 !== n) return n;
                                }
                            } else this._refreshInspector();
                            return 0;
                        },
                        set: function set(t1) {
                            var _$i;
                            if (Utt(this.skeletonData) && (_$i = this.skeletonData.getAnimsEnum()), _$i) {
                                var n = String(_$i[t1]);
                                void 0 !== n ? (this.animation = n, this.animation = n) : z(this.name + " animation enums are invalid");
                            } else z(this.name + " animation enums are invalid");
                        }
                    },
                    {
                        key: "defaultCacheMode",
                        get: function get() {
                            return this._cacheMode;
                        },
                        set: function set(t1) {
                            this._cacheMode = t1, this.setAnimationCacheMode(this._cacheMode);
                        }
                    },
                    {
                        key: "premultipliedAlpha",
                        get: function get() {
                            return this._premultipliedAlpha;
                        },
                        set: function set(t1) {
                            t1 !== this._premultipliedAlpha && (this._premultipliedAlpha = t1, this._instance.setPremultipliedAlpha(t1), this.po());
                        }
                    },
                    {
                        key: "timeScale",
                        get: function get() {
                            return this._timeScale;
                        },
                        set: function set(t1) {
                            t1 !== this._timeScale && (this._timeScale = t1, this._instance && (this._instance.dtRate = +this._timeScale));
                        }
                    },
                    {
                        key: "useTint",
                        get: function get() {
                            return this._useTint;
                        },
                        set: function set(t1) {
                            t1 !== this._useTint && (this._useTint = t1, this._updateUseTint());
                        }
                    },
                    {
                        key: "enableBatch",
                        get: function get() {
                            return this._enableBatch;
                        },
                        set: function set(t1) {
                            t1 !== this._enableBatch && (this._enableBatch = t1, this._updateBatch());
                        }
                    },
                    {
                        key: "sockets",
                        get: function get() {
                            return this._sockets;
                        },
                        set: function set(t1) {
                            this._sockets = t1, this._updateSocketBindings(), this.attachUtil.init(this);
                        }
                    },
                    {
                        key: "debugSlots",
                        get: function get() {
                            return this._debugSlots;
                        },
                        set: function set(t1) {
                            t1 !== this._debugSlots && (this._debugSlots = t1, this._updateDebugDraw(), this.po());
                        }
                    },
                    {
                        key: "debugBones",
                        get: function get() {
                            return this._debugBones;
                        },
                        set: function set(t1) {
                            t1 !== this._debugBones && (this._debugBones = t1, this._updateDebugDraw(), this.po());
                        }
                    },
                    {
                        key: "debugMesh",
                        get: function get() {
                            return this._debugMesh;
                        },
                        set: function set(t1) {
                            t1 !== this._debugMesh && (this._debugMesh = t1, this._updateDebugDraw(), this.po());
                        }
                    },
                    {
                        key: "socketNodes",
                        get: function get() {
                            return this._socketNodes;
                        }
                    },
                    {
                        key: "animation",
                        get: function get() {
                            return this._animationName;
                        },
                        set: function set(t1) {
                            t1 ? this.setAnimation(0, t1, this.loop) : this.clearAnimation(0);
                        }
                    },
                    {
                        key: "customMaterial",
                        get: function get() {
                            return this._customMaterial;
                        },
                        set: function set(t1) {
                            this._customMaterial = t1, this.updateMaterial(), this.po();
                        }
                    },
                    {
                        key: "customMaterialInstance",
                        get: function get() {
                            if (!this._customMaterial) return null;
                            if (!this.TF) {
                                var _$t = {
                                    parent: this._customMaterial,
                                    subModelIdx: 0,
                                    owner: this
                                };
                                this.TF = new lA(_$t);
                            }
                            return this.TF;
                        }
                    }
                ]), i;
            }(TB)).SpineSocket = Wtt, Ltt.AnimationCacheMode = xtt, btt = ho(Ltt.prototype, "_skeletonData", [
                Ro
            ], function() {
                return null;
            }), ktt = ho(Ltt.prototype, "defaultSkin", [
                Ro
            ], function() {
                return "";
            }), Att = ho(Ltt.prototype, "defaultAnimation", [
                Ro
            ], function() {
                return "";
            }), Ett = ho(Ltt.prototype, "_premultipliedAlpha", [
                Ro
            ], function() {
                return !0;
            }), Ttt = ho(Ltt.prototype, "_timeScale", [
                Ro
            ], function() {
                return 1;
            }), Stt = ho(Ltt.prototype, "_preCacheMode", [
                Ro
            ], function() {
                return -1;
            }), Ott = ho(Ltt.prototype, "_cacheMode", [
                Ro
            ], function() {
                return 0;
            }), Itt = ho(Ltt.prototype, "_sockets", [
                Ro
            ], function() {
                return [];
            }), Rtt = ho(Ltt.prototype, "_useTint", [
                Ro
            ], function() {
                return !1;
            }), Mtt = ho(Ltt.prototype, "_debugMesh", [
                Ro
            ], function() {
                return !1;
            }), Ctt = ho(Ltt.prototype, "_debugBones", [
                Ro
            ], function() {
                return !1;
            }), Ntt = ho(Ltt.prototype, "_debugSlots", [
                Ro
            ], function() {
                return !1;
            }), Ptt = ho(Ltt.prototype, "_enableBatch", [
                Ro
            ], function() {
                return !1;
            }), y(Ltt.prototype, "skeletonData", [
                ltt
            ], Object.getOwnPropertyDescriptor(Ltt.prototype, "skeletonData"), Ltt.prototype), y(Ltt.prototype, "_defaultSkinIndex", [
                dtt
            ], Object.getOwnPropertyDescriptor(Ltt.prototype, "_defaultSkinIndex"), Ltt.prototype), y(Ltt.prototype, "_animationIndex", [
                wtt
            ], Object.getOwnPropertyDescriptor(Ltt.prototype, "_animationIndex"), Ltt.prototype), y(Ltt.prototype, "defaultCacheMode", [
                gtt
            ], Object.getOwnPropertyDescriptor(Ltt.prototype, "defaultCacheMode"), Ltt.prototype), Dtt = ho(Ltt.prototype, "loop", [
                Ro
            ], function() {
                return !0;
            }), y(Ltt.prototype, "sockets", [
                ptt
            ], Object.getOwnPropertyDescriptor(Ltt.prototype, "sockets"), Ltt.prototype), y(Ltt.prototype, "customMaterial", [
                ff,
                ytt
            ], Object.getOwnPropertyDescriptor(Ltt.prototype, "customMaterial"), Ltt.prototype), Ltt)) || Ltt);
            A.internal.SpineSkeleton = ztt;
            var $tt, Xtt, qtt, Ytt, Ktt = function() {
                function t1() {
                    this.name = "sp.VertexEffectDelegate", this._vertexEffect = void 0, this.DF = void 0, this.LF = void 0, this._vertexEffect = null, this.DF = null, this.LF = "none";
                }
                var i = t1.prototype;
                return i.clear = function() {
                    this._vertexEffect = null, this.DF = null, this.LF = "none";
                }, i.initJitter = function(t1, i) {
                    return this.LF = "jitter", this._vertexEffect = new e7.JitterEffect(t1, i), this._vertexEffect;
                }, i.initSwirlWithPow = function(t1, i) {
                    return this.LF = "swirl", this.DF = new e7.Pow(i), this._vertexEffect = new e7.SwirlEffect(t1, this.DF), this._vertexEffect;
                }, i.initSwirlWithPowOut = function(t1, i) {
                    return this.LF = "swirl", this.DF = new e7.PowOut(i), this._vertexEffect = new e7.SwirlEffect(t1, this.DF), this._vertexEffect;
                }, i.getJitterVertexEffect = function() {
                    return this._vertexEffect;
                }, i.getSwirlVertexEffect = function() {
                    return this._vertexEffect;
                }, i.getVertexEffect = function() {
                    return this._vertexEffect;
                }, i.getEffectType = function() {
                    return this.LF;
                }, t1;
            }(), Qtt = new Yr(0, 0, 255, 255), Ztt = new Yr(255, 0, 0, 255), tit = new Yr(0, 255, 0, 255), iit = new Yr(255, 255, 0, 255), nit = null, sit = null, rit = !1, hit = !1, eit = ML(SL), uit = ML(IL), oit = new Ss(0, 0, 0);
            function fit(t1, i) {
                var n, s;
                switch(t1){
                    case 1:
                        n = rit ? 1 : 2, s = 1;
                        break;
                    case 2:
                        n = 7, s = 4;
                        break;
                    case 3:
                        n = rit ? 1 : 2, s = 8;
                        break;
                    default:
                        n = rit ? 1 : 2, s = 4;
                }
                return i.getMaterialForBlendAndTint(n, s, +!!hit);
            }
            var ait = new (function() {
                function t1() {
                    this.vCount = 32767;
                }
                var i = t1.prototype;
                return i.BF = function(t1) {
                    var i = t1 ? sit : nit;
                    if (!i) {
                        var n = PN.root.device, s = PN.root.batcher2D, _$r = t1 ? IL : SL;
                        t1 ? (i = sit = new LL(n, _$r, this.vCount), s.registerBufferAccessor(Number.parseInt("SPINETINT", 36), sit)) : (i = nit = new LL(n, _$r, this.vCount), s.registerBufferAccessor(Number.parseInt("SPINE", 36), nit));
                    }
                    return i;
                }, i.createData = function(t1) {
                    var i = t1.renderData;
                    if (!i) {
                        var n = t1.useTint || t1.isAnimationCached(), s = this.BF(n);
                        i = YL.add(n ? IL : SL, s);
                    }
                    return i;
                }, i.updateRenderData = function(t1) {
                    var i;
                    t1._skeleton && t1.node.active && null != (i = t1.skeletonData) && i.isValid && vit(t1);
                }, t1;
            }());
            function vit(t1) {
                t1.drawList.reset();
                var i = t1.renderData;
                if (0 !== t1.color.a && i) {
                    t1._updateColor(), rit = t1.premultipliedAlpha, hit = t1.useTint || t1.isAnimationCached(), t1.isAnimationCached() ? dit(t1) : lit(t1);
                    var n = hit ? sit : nit;
                    t1.syncAttachedNode(), (i.vertexCount > 0 || i.indexCount > 0) && n.getMeshBuffer(i.chunk.bufferId).setDirty();
                }
            }
            function lit(t1) {
                var i, n, s = (t1.useTint ? uit : eit) / 4, _$r = t1.updateRenderData(), h = _$r.vCount, e = _$r.iCount, u = t1.renderData;
                if (!(!u || h < 1 || e < 1)) {
                    u.vertexCount === h && u.indexCount === e || ((u.vertexCount < h || u.indexCount < e) && u.resize(Math.ceil(1.1 * h), Math.ceil(1.1 * e)), u.indices = new Uint16Array(e), t1._vLength = 4 * h * s, t1._vBuffer = new Uint8Array(u.chunk.vb.buffer, u.chunk.vb.byteOffset, t1._vLength), t1._iLength = 2 * e, t1._iBuffer = new Uint8Array(u.indices.buffer));
                    var o = u.chunk.vb, f = _$r.vPtr, _$c = _$r.iPtr, a = u.indices, v = e7.wasmUtil.wasm.HEAPU8;
                    null == (i = t1._vBuffer) || i.set(v.subarray(f, f + t1._vLength), 0), null == (n = t1._iBuffer) || n.set(v.subarray(_$c, _$c + t1._iLength), 0);
                    for(var l = u.chunk.vertexOffset, _$d = 0; _$d < e; _$d++)a[_$d] += l;
                    for(var w = _$r.getData(), g = _$r.getTextures(), p = w.size(), _$y = 0, _$_ = 0, m = 0; m < p; m += 5){
                        _$_ = w.get(m + 3);
                        var b = fit(w.get(m + 4), t1);
                        t1.requestDrawData(b, g.get(m / 5), _$y, _$_), _$y += _$_;
                    }
                    if (t1.enableBatch) for(var k = t1.node.worldMatrix, A = 0, E = 0; E < h; E++)oit.x = o[A = E * s], oit.y = o[A + 1], oit.z = 0, oit.transformMat4(k), o[A] = oit.x, o[A + 1] = oit.y, o[A + 2] = oit.z;
                    var T = t1.kF, S = t1._skeleton;
                    if (T && (t1.debugBones || t1.debugSlots || t1.debugMesh)) {
                        T.clear();
                        for(var _$O = t1.getDebugShapes(), _$I = _$O.size(), _$R = 0; _$R < _$I; _$R++){
                            var _$M = _$O.get(_$R);
                            if (0 === _$M.type && t1.debugSlots) {
                                T.strokeColor = Qtt;
                                var _$C = _$M.vOffset * s, N = _$M.vCount * s;
                                T.moveTo(o[_$C], o[_$C + 1]);
                                for(var P = _$C + s, D = _$C + N; P < D; P += s)T.lineTo(o[P], o[P + 1]);
                                T.close(), T.stroke();
                            } else if (1 === _$M.type && t1.debugMesh) {
                                T.strokeColor = iit;
                                for(var L = _$M.iCount, B = _$M.iOffset, F = B, U = B + L; F < U; F += 3){
                                    var x = a[F] * s, j = a[F + 1] * s, G = a[F + 2] * s;
                                    T.moveTo(o[x], o[x + 1]), T.lineTo(o[j], o[j + 1]), T.lineTo(o[G], o[G + 1]), T.close(), T.stroke();
                                }
                            }
                        }
                        if (t1.debugBones) {
                            T.strokeColor = Ztt, T.fillColor = Qtt;
                            for(var H = 0, _$V = S.bones.length; H < _$V; H++){
                                var _$W = S.bones[H], _$z = _$W.data.length * _$W.a + _$W.worldX, _$$ = _$W.data.length * _$W.c + _$W.worldY;
                                T.moveTo(_$W.worldX, _$W.worldY), T.lineTo(_$z, _$$), T.stroke(), T.circle(_$W.worldX, _$W.worldY, 1.5 * Math.PI), T.fill(), 0 === H && (T.fillColor = tit);
                            }
                        }
                    }
                }
            }
            function dit(t1) {
                var i = t1.updateRenderData();
                if (i) {
                    var n = i.vCount, s = i.iCount, _$r = t1.renderData;
                    if (!(!_$r || n < 1 || s < 1)) {
                        _$r.vertexCount === n && _$r.indexCount === s || ((_$r.vertexCount < n || _$r.indexCount < s) && _$r.resize(Math.ceil(1.1 * n), Math.ceil(1.1 * s)), _$r.indices = new Uint16Array(s));
                        var h = _$r.chunk.vb, e = new Uint8Array(h.buffer, h.byteOffset, 4 * h.length);
                        e.set(i.vData);
                        var u = t1.color, o = t1.node._uiProps.opacity;
                        if (1 - o > Ln || 4294967295 !== Yr.toUint32(u) || rit) {
                            $tt = u.r / 255, Xtt = u.g / 255, qtt = u.b / 255, Ytt = o;
                            for(var f = 0; f < n; f++){
                                var _$c = f * uit + 20, a = e[_$c], v = e[_$c + 1], l = e[_$c + 2], _$d = e[_$c + 3] * Ytt, w = rit ? _$d / 255 : 1;
                                e[_$c] = Math.floor(w * a * $tt), e[_$c + 1] = Math.floor(w * v * Xtt), e[_$c + 2] = Math.floor(w * l * qtt), e[_$c + 3] = Math.floor(_$d), e[_$c + 4] = Math.floor(e[_$c + 4] * $tt), e[_$c + 5] = Math.floor(e[_$c + 5] * Xtt), e[_$c + 6] = Math.floor(e[_$c + 6] * qtt), e[_$c + 7] = 255 * !!rit;
                            }
                        }
                        var g = _$r.indices;
                        g.set(i.iData);
                        for(var p = _$r.chunk.vertexOffset, _$y = 0; _$y < s; _$y++)g[_$y] += p;
                        for(var _$_ = i.meshes, m = _$_.length, b = 0, k = 0, A = 0; A < m; A++){
                            var E = _$_[A], T = fit(E.blendMode, t1), S = E.textureID;
                            k = E.iCount, t1.requestDrawData(T, S, b, k), b += k;
                        }
                        var _$O = uit / 4;
                        if (t1.enableBatch) for(var _$I = t1.node.worldMatrix, _$R = 0, _$M = 0; _$M < n; _$M++)oit.x = h[_$R = _$M * _$O], oit.y = h[_$R + 1], oit.z = 0, oit.transformMat4(_$I), h[_$R] = oit.x, h[_$R + 1] = oit.y, h[_$R + 2] = oit.z;
                    }
                }
            }
            A.internal.SpineAssembler = ait;
            var wit = {
                getAssembler: function getAssembler() {
                    return ait;
                }
            };
            ztt.Assembler = wit;
            var git = {
                REGION: 0,
                BOUNDING_BOX: 1,
                MESH: 2,
                SKINNED_MESH: 3
            };
            _i(git);
            var pit = {
                START: 0,
                INTERRUPT: 1,
                END: 2,
                COMPLETE: 3,
                DISPOSE: 4,
                EVENT: 5
            };
            function yit() {
                return Promise.resolve();
            }
            _i(pit), t1("eL", Object.freeze({
                __proto__: null,
                ATTACHMENT_TYPE: git,
                AnimationCacheMode: xtt,
                AnimationEventType: pit,
                DefaultAnimsEnum: Htt,
                DefaultSkinsEnum: Gtt,
                SPINE_VERSION: "3.8",
                Skeleton: ztt,
                SkeletonData: rtt,
                SpineAnimationCacheMode: xtt,
                SpineDefaultAnimsEnum: Htt,
                SpineMaterialType: {
                    COLORED_TEXTURED: 0,
                    TWO_COLORED: 1
                },
                SpineSocket: Wtt,
                VertexEffectDelegate: Ktt,
                isBinaryCompatible: function isBinaryCompatible() {
                    return !1;
                },
                isJsonCompatible: function isJsonCompatible() {
                    return !1;
                },
                loadWasmModuleSpine: yit,
                simpleSpineAssembler: wit,
                spine: e7,
                timeScale: 1
            }));
            var _it = new Ss, mit = new Ss;
            function bit(t1, i) {
                var n = null;
                return {
                    value: i.length > 0 ? i[i.length - 1] : Ss.ZERO,
                    progress: function progress(t1, i, s, r) {
                        return n.getPoint(r);
                    },
                    clone: function clone(t1) {
                        return Ss.clone(t1);
                    },
                    add: function add(t1, i) {
                        return t1.clone().add(i);
                    },
                    sub: function sub(t1, i) {
                        return t1.clone().subtract(i);
                    },
                    onStart: function onStart(s) {
                        var _$r = s.start, h = s.end, e = s.relative, u = s.reversed;
                        (n = Va.create(t1)).addKnot(_$r);
                        var o = null;
                        e && u && (o = mit, Ss.subtract(o, _$r, i[i.length - 1]));
                        for(var f = 0, _$c = i.length; f < _$c; ++f){
                            var a = u ? i[_$c - 1 - f] : i[f];
                            e ? u ? f > 0 && n.addKnot(Ss.copy(_it, o).add(a)) : n.addKnot(Ss.copy(_it, _$r).add(a)) : n.addKnot(a);
                        }
                        e && u && n.addKnot(h);
                    },
                    onComplete: function onComplete() {
                        n = null;
                    },
                    onStop: function onStop() {
                        n = null;
                    },
                    legacyProgress: !1
                };
            }
            t1("eN", Object.freeze({
                __proto__: null,
                bezier: function bezier() {
                    for(var _$t = arguments.length, i = Array(_$t), n = 0; n < _$t; n++)i[n] = arguments[n];
                    return bit(1, i);
                },
                catmullRom: function catmullRom() {
                    for(var _$t = arguments.length, i = Array(_$t), n = 0; n < _$t; n++)i[n] = arguments[n];
                    return bit(2, i);
                }
            }));
            var Ait = function Ait() {
                this.actions = [], this.target = null, this.actionIndex = 0, this.currentAction = null, this.paused = !1, this.lock = !1;
            }, Eit = function() {
                function t1() {
                    this.FF = new Map, this.UF = [], this.Zi = void 0, this.xF = [];
                }
                var i = t1.prototype;
                return i.jF = function(t1, i) {
                    var n = this.xF.pop();
                    return n || (n = new Ait), n.target = t1, n.paused = !!i, n;
                }, i.GF = function(t1) {
                    t1.actions.length = 0, t1.actionIndex = 0, t1.currentAction = null, t1.paused = !1, t1.target = null, t1.lock = !1, this.xF.push(t1);
                }, i.HF = function(t1, i) {
                    i ? this.resumeTarget(t1) : this.pauseTarget(t1);
                }, i.VF = function(t1) {
                    this.WF(t1, !1);
                }, i.zF = function(t1) {
                    t1.isValid && (t1.on("active-changed", this.HF, this), t1.on("node-destroyed", this.VF, this));
                }, i.$F = function(t1) {
                    t1.isValid && (t1.off("active-changed", this.HF, this), t1.off("node-destroyed", this.VF, this));
                }, i.addAction = function(t1, i, n, s) {
                    if (void 0 === s && (s = !0), t1 && i) {
                        var _$r = this.FF.get(i);
                        _$r ? _$r.actions || (_$r.actions = []) : (_$r = this.jF(i, n), this.FF.set(i, _$r), this.UF.push(_$r)), s && 0 === _$r.actions.length && _instanceof(i, VE) && (this.zF(i), i.active || (_$r.paused = !0)), _$r.target = i, _$r.actions.push(t1), t1.startWithTarget(i);
                    } else rt(1e3);
                }, i.removeAllActions = function() {
                    for(var _$t = this.UF, i = 0; i < _$t.length; i++){
                        var n = _$t[i];
                        n && (_instanceof(n.target, VE) && this.$F(n.target), this.GF(n));
                    }
                    this.UF.length = 0, this.FF = new Map;
                }, i.removeAllActionsFromTarget = function(t1) {
                    this.WF(t1, !0);
                }, i.WF = function(t1, i) {
                    if (null != t1) {
                        var n = this.FF.get(t1);
                        n && (i && _instanceof(t1, VE) && this.$F(t1), n.actions.length = 0, this.XF(n));
                    }
                }, i.removeAction = function(t1) {
                    if (null != t1) {
                        var i = t1.getOriginalTarget(), n = this.FF.get(i);
                        if (n) {
                            for(var s = 0; s < n.actions.length; s++)if (n.actions[s] === t1) {
                                n.actions.splice(s, 1), n.actionIndex >= s && n.actionIndex--;
                                break;
                            }
                        }
                    }
                }, i._removeActionByTag = function(t1, i, n) {
                    for(var s = 0, _$r = i.actions.length; s < _$r; ++s){
                        var h = i.actions[s];
                        if (h && h.getTag() === t1) {
                            if (n && h.getOriginalTarget() !== n) continue;
                            this.qF(s, i);
                            break;
                        }
                    }
                }, i._removeAllActionsByTag = function(t1, i, n) {
                    for(var s = i.actions.length - 1; s >= 0; --s){
                        var _$r = i.actions[s];
                        if (_$r && _$r.getTag() === t1) {
                            if (n && _$r.getOriginalTarget() !== n) continue;
                            this.qF(s, i);
                        }
                    }
                }, i.removeActionByTag = function(t1, i) {
                    var n = this;
                    -1 === t1 && Q(1002);
                    var s = this.FF;
                    if (i) {
                        var _$r = s.get(i);
                        _$r && this._removeActionByTag(t1, _$r, i);
                    } else s.forEach(function(i) {
                        n._removeActionByTag(t1, i);
                    });
                }, i.removeAllActionsByTag = function(t1, i) {
                    var n = this;
                    -1 === t1 && Q(1002);
                    var s = this.FF;
                    if (i) {
                        var _$r = s.get(i);
                        _$r && this._removeAllActionsByTag(t1, _$r, i);
                    } else s.forEach(function(i) {
                        n._removeAllActionsByTag(t1, i);
                    });
                }, i.getActionByTag = function(t1, i) {
                    -1 === t1 && Q(1004);
                    var n = this.FF.get(i);
                    if (n) {
                        if (null != n.actions) for(var s = 0; s < n.actions.length; ++s){
                            var _$r = n.actions[s];
                            if (_$r && _$r.getTag() === t1) return _$r;
                        }
                        Q(1005, t1);
                    }
                    return null;
                }, i.getNumberOfRunningActionsInTarget = function(t1) {
                    var i = this.FF.get(t1);
                    return i && i.actions ? i.actions.length : 0;
                }, i.pauseTarget = function(t1) {
                    var i = this.FF.get(t1);
                    i && (i.paused = !0);
                }, i.resumeTarget = function(t1) {
                    var i = this.FF.get(t1);
                    i && (i.paused = !1);
                }, i.pauseAllRunningActions = function() {
                    for(var _$t = [], i = this.UF, n = 0; n < i.length; n++){
                        var s = i[n];
                        s && !s.paused && (s.paused = !0, s.target && _$t.push(s.target));
                    }
                    return _$t;
                }, i.resumeTargets = function(t1) {
                    if (t1) for(var i = 0; i < t1.length; i++)t1[i] && this.resumeTarget(t1[i]);
                }, i.pauseTargets = function(t1) {
                    if (t1) for(var i = 0; i < t1.length; i++)t1[i] && this.pauseTarget(t1[i]);
                }, i.isActionRunning = function(t1) {
                    var i = this.FF.get(t1.getOriginalTarget()), n = -1;
                    return i && (n = i.actions.indexOf(t1)), -1 !== n;
                }, i.qF = function(t1, i) {
                    i.actions.splice(t1, 1), i.actionIndex >= t1 && i.actionIndex--, 0 === i.actions.length && (_instanceof(i.target, VE) && this.$F(i.target), this.XF(i));
                }, i.XF = function(t1) {
                    var i = !1;
                    if (t1 && !t1.lock && this.FF.get(t1.target)) {
                        this.FF.delete(t1.target);
                        for(var n = this.UF, s = 0, _$r = n.length; s < _$r; s++)if (n[s] === t1) {
                            n.splice(s, 1);
                            break;
                        }
                        this.GF(t1), i = !0;
                    }
                    return i;
                }, i.update = function(t1) {
                    for(var i, n = this.UF, s = 0; s < n.length; s++){
                        this.Zi = n[s];
                        var _$r = (i = this.Zi).target;
                        if (!Xh(_$r) || _$r.isValid) {
                            if (!i.paused && i.actions) {
                                for(i.lock = !0, i.actionIndex = 0; i.actionIndex < i.actions.length; i.actionIndex++)if (i.currentAction = i.actions[i.actionIndex], i.currentAction) {
                                    if (i.currentAction.step(t1), i.currentAction && i.currentAction.isDone()) {
                                        i.currentAction.stop();
                                        var h = i.currentAction;
                                        i.currentAction = null, this.removeAction(h);
                                    }
                                    i.currentAction = null;
                                }
                                i.lock = !1;
                            }
                            0 === i.actions.length && (_instanceof(_$r, VE) && this.$F(_$r), this.XF(i) && s--);
                        } else this.removeAllActionsFromTarget(_$r), s--;
                    }
                }, t1;
            }(), Tit = t1("eO", function(t1) {
                function i() {
                    var _$i;
                    return (_$i = t1.call(this) || this).YF = new Eit, _$i;
                }
                return h(i, t1), i.prototype.update = function(t1) {
                    this.YF.update(t1);
                }, s(i, [
                    {
                        key: "ActionManager",
                        get: function get() {
                            return this.YF;
                        }
                    }
                ]), i;
            }(_v));
            Tit.ID = "TWEEN", Tit.instance = void 0, PN.on("director_init", function() {
                var _$t = new Tit;
                Tit.instance = _$t, PN.registerSystem(Tit.ID, _$t, 100);
            });
            var Sit = function(t1) {
                function i() {
                    var _$i;
                    return (_$i = t1.call(this) || this)._duration = 0, _$i;
                }
                h(i, t1);
                var n = i.prototype;
                return n.getDurationScaled = function() {
                    return this._duration;
                }, n.getDuration = function() {
                    return this._duration;
                }, n.setDuration = function(t1) {
                    this._duration = t1;
                }, i;
            }(function() {
                function t1() {
                    this.originalTarget = null, this.target = null, this.Qe = null, this.tag = -1, this._id = void 0, this._paused = !1;
                }
                var i = t1.prototype;
                return i.isDone = function() {
                    return !0;
                }, i.startWithTarget = function(t1) {
                    this.originalTarget = t1, this.target = t1;
                }, i.stop = function() {
                    this.target = null;
                }, i.getTarget = function() {
                    return this.target;
                }, i.setTarget = function(t1) {
                    this.target = t1;
                }, i.getOriginalTarget = function() {
                    return this.originalTarget;
                }, i.setOriginalTarget = function(t1) {
                    this.originalTarget = t1;
                }, i.KF = function() {
                    var _$t, i = null == (_$t = this.Qe) ? void 0 : _$t.getTarget();
                    return null != i ? i : this.target;
                }, i.getTag = function() {
                    return this.tag;
                }, i.setTag = function(t1) {
                    this.tag = t1;
                }, i.setId = function(t1) {
                    this._id = t1;
                }, i.getId = function() {
                    return this._id;
                }, i.setPaused = function(t1) {
                    this._paused = t1;
                }, t1;
            }()), Oit = function(t1) {
                function i() {
                    return t1.apply(this, arguments) || this;
                }
                h(i, t1);
                var n = i.prototype;
                return n.isDone = function() {
                    return !0;
                }, n.step = function() {
                    this.update(1);
                }, n.update = function() {}, n.reverse = function() {
                    return this.clone();
                }, n.isUnknownDuration = function() {
                    return !1;
                }, i;
            }(Sit), Iit = function(t1) {
                function i() {
                    return t1.apply(this, arguments) || this;
                }
                h(i, t1);
                var n = i.prototype;
                return n.update = function() {
                    var _$t = this.KF();
                    if (_$t) for(var _$i = _$t.getComponentsInChildren(fB), n = 0; n < _$i.length; ++n)_$i[n].enabled = !0;
                }, n.reverse = function() {
                    return new Rit;
                }, n.clone = function() {
                    var _$t = new i;
                    return _$t._id = this._id, _$t;
                }, n.toString = function() {
                    return "<Show>";
                }, i;
            }(Oit), Rit = function(t1) {
                function i() {
                    return t1.apply(this, arguments) || this;
                }
                h(i, t1);
                var n = i.prototype;
                return n.update = function() {
                    var _$t = this.KF();
                    if (_$t) for(var _$i = _$t.getComponentsInChildren(fB), n = 0; n < _$i.length; ++n)_$i[n].enabled = !1;
                }, n.reverse = function() {
                    return new Iit;
                }, n.clone = function() {
                    var _$t = new i;
                    return _$t._id = this._id, _$t;
                }, n.toString = function() {
                    return "<Hide>";
                }, i;
            }(Oit);
            function i15() {
                return Oit.apply(this, arguments) || this;
            }
            h(i15, Oit);
            var n10 = i15.prototype;
            n10.update = function() {
                var _$t = this.KF();
                if (_$t) for(var _$i = _$t.getComponentsInChildren(fB), n = 0; n < _$i.length; ++n){
                    var s = _$i[n];
                    s.enabled = !s.enabled;
                }
            }, n10.reverse = function() {
                return new i15;
            }, n10.clone = function() {
                var _$t = new i15;
                return _$t._id = this._id, _$t;
            }, n10.toString = function() {
                return "<ToggleVisibility>";
            };
            var Mit = function(t1) {
                function i(i) {
                    var n;
                    return (n = t1.call(this) || this)._isNeedCleanUp = !0, void 0 !== i && n.init(i), n;
                }
                h(i, t1);
                var n = i.prototype;
                return n.update = function() {
                    var _$t = this.KF();
                    _$t && (_$t.removeFromParent(), this._isNeedCleanUp && _$t.destroy());
                }, n.init = function(t1) {
                    return this._isNeedCleanUp = t1, !0;
                }, n.reverse = function() {
                    return new i(this._isNeedCleanUp);
                }, n.clone = function() {
                    var _$t = new i(this._isNeedCleanUp);
                    return _$t._id = this._id, _$t;
                }, n.toString = function() {
                    return "<RemoveSelf>";
                }, i;
            }(Oit), Nit = function(t1) {
                function i(i, n, s) {
                    var _$r;
                    return (_$r = t1.call(this) || this).JF = void 0, _$r.Fi = void 0, _$r.L = void 0, _$r.initWithFunction(i, n, s), _$r;
                }
                h(i, t1);
                var n = i.prototype;
                return n.initWithFunction = function(t1, i, n) {
                    return t1 && (this.Fi = t1), i && (this.JF = i), void 0 !== n && (this.L = n), !0;
                }, n.execute = function() {
                    if (this.Fi) {
                        var _$t = this.KF();
                        this.Fi.call(this.JF, _$t, this.L);
                    }
                }, n.update = function() {
                    this.execute();
                }, n.getTargetCallback = function() {
                    return this.JF;
                }, n.setTargetCallback = function(t1) {
                    t1 !== this.JF && (this.JF = t1);
                }, n.clone = function() {
                    var _$t = new i;
                    return _$t._id = this._id, this.Fi && _$t.initWithFunction(this.Fi, this.JF, this.L), _$t;
                }, n.toString = function() {
                    return "<CallFunc>";
                }, i;
            }(Oit);
            function Pit(t1, i, n) {
                return new Nit(t1, i, n);
            }
            var Dit = function(t1) {
                function i() {
                    return t1.apply(this, arguments) || this;
                }
                h(i, t1);
                var n = i.prototype;
                return n.clone = function() {
                    return new i;
                }, n.reverse = function() {
                    return this.clone();
                }, n.update = function() {}, n.step = function() {}, n.isUnknownDuration = function() {
                    return !1;
                }, n.toString = function() {
                    return "DummyAction";
                }, i;
            }(Sit), Lit = function(t1) {
                function i(i) {
                    var n;
                    return (n = t1.call(this) || this).MAX_VALUE = 2, n._elapsed = 0, n._startTime = 0, n._firstTick = !1, n._speed = 1, void 0 === i || Number.isNaN(i) || n.initWithDuration(i), n;
                }
                h(i, t1);
                var n = i.prototype;
                return n.setStartTime = function(t1) {
                    t1 = t1 < 0 ? 0 : t1 > this._duration ? this._duration : t1, this._startTime = t1;
                }, n.getElapsed = function() {
                    return this._elapsed;
                }, n.initWithDuration = function(t1) {
                    return this._duration = 0 === t1 ? Ti.FLT_EPSILON : t1, this._elapsed = 0, this._firstTick = !0, !0;
                }, n.isDone = function() {
                    return this._elapsed >= this._duration && !this.isUnknownDuration();
                }, n.QF = function(t1) {
                    t1._speed = this._speed;
                }, n.step = function(t1) {
                    if (!this._paused && 0 !== this._speed) {
                        t1 *= this._speed, this._firstTick ? this._elapsed = this._startTime : this._elapsed += t1;
                        var _$i = this._elapsed / (this._duration > 1.192092896e-7 ? this._duration : 1.192092896e-7);
                        _$i = _$i < 1 ? _$i : 1, this.update(_$i > 0 ? _$i : 0), this.isUnknownDuration() && !this._firstTick && (_$i < 1 ? this._elapsed -= t1 : this._elapsed = this._startTime + this._duration), this._firstTick && (this._firstTick = !1, this._startTime > 0 && (this._startTime = 0));
                    }
                }, n.startWithTarget = function(i) {
                    t1.prototype.startWithTarget.call(this, i), this._elapsed = 0, this._firstTick = !0;
                }, n.getSpeed = function() {
                    return this._speed;
                }, n.setSpeed = function(t1) {
                    this._speed = t1;
                }, n.getDurationScaled = function() {
                    return this._duration / this._speed;
                }, i;
            }(Sit);
            function Bit(t1, i) {
                var n = new Fit;
                return n.initWithTwoActions(t1, i), n;
            }
            var Fit = function(t1) {
                function i(i) {
                    if ((n = t1.call(this) || this).ZF = [], n.tU = 0, n.iU = 0, n.nU = !1, !i || 0 === i.length) return a(n);
                    1 === i.length && i.push(new Dit);
                    var n, s = i.length - 1;
                    if (s >= 0 && null == i[s] && Q(1015), s >= 0) {
                        for(var _$r = i[0], _$h = 1; _$h < s; _$h++)i[_$h] && (_$r = Bit(_$r, i[_$h]));
                        n.initWithTwoActions(_$r, i[s]);
                    }
                    return n;
                }
                h(i, t1);
                var n = i.prototype;
                return n.initWithTwoActions = function(t1, i) {
                    if (!t1 || !i) return rt(1025), !1;
                    var n = t1.getDurationScaled() + i.getDurationScaled();
                    return this.initWithDuration(n), this.ZF[0] = t1, this.ZF[1] = i, !0;
                }, n.clone = function() {
                    var _$t = new i;
                    return _$t._id = this._id, _$t._speed = this._speed, this.QF(_$t), _$t.initWithTwoActions(this.ZF[0].clone(), this.ZF[1].clone()), _$t;
                }, n.startWithTarget = function(i) {
                    t1.prototype.startWithTarget.call(this, i), 0 !== this.ZF.length && (this.tU = this.ZF[0].getDurationScaled() / this._duration, this.iU = -1);
                }, n.stop = function() {
                    0 !== this.ZF.length && (-1 !== this.iU && this.ZF[this.iU].stop(), t1.prototype.stop.call(this));
                }, n.update = function(t1) {
                    var _$i = this.ZF;
                    if (0 !== _$i.length) {
                        var n = 0, s = 0, _$r = this.tU, _$h = this.iU;
                        if (t1 < _$r) {
                            if (n = 0 !== _$r ? t1 / _$r : 1, 0 === s && 1 === _$h && this.nU) {
                                var e = _$i[1];
                                if (e.update(0), e.isUnknownDuration()) return;
                                e.stop();
                            }
                        } else {
                            var u = _$i[0];
                            if (s = 1, n = 1 === _$r ? 1 : (t1 - _$r) / (1 - _$r), -1 === _$h) {
                                if (u.startWithTarget(this.target), u.update(1), u.isUnknownDuration()) return;
                                u.stop();
                            }
                            if (0 === _$h) {
                                if (u.update(1), u.isUnknownDuration()) return;
                                u.stop();
                            }
                        }
                        var o = _$i[s];
                        _$h === s && o.isDone() || (_$h !== s && o.startWithTarget(this.target), o.update(n > 1 ? n % 1 : n), this.iU = s);
                    }
                }, n.reverse = function() {
                    var _$t = Bit(this.ZF[1].reverse(), this.ZF[0].reverse());
                    return this.QF(_$t), _$t.nU = !0, _$t;
                }, n.sU = function(t1) {
                    if (!(this.ZF.length < 2)) {
                        var n = this.ZF[0], s = this.ZF[1];
                        s.Qe || (s.Qe = t1), _instanceof(n, i) || _instanceof(n, Wit) ? n.sU(t1) : n.Qe || (n.Qe = t1);
                    }
                }, n.rU = function(t1) {
                    for(var n = 0, s = this.ZF.length; n < s; ++n){
                        var _$r = this.ZF[n];
                        if (_$r.getId() === t1 || (_instanceof(_$r, i) || _instanceof(_$r, Wit)) && (_$r = _$r.rU(t1)) && _$r.getId() === t1) return _$r;
                    }
                    return null;
                }, n.isUnknownDuration = function() {
                    if (0 === this.ZF.length) return !1;
                    var _$t = this.ZF[0], _$i = this.ZF[1];
                    return this.iU < 1 ? _$t.isUnknownDuration() : _$i.isUnknownDuration();
                }, n.toString = function() {
                    return "<Sequence>";
                }, i;
            }(Lit);
            function Uit(t1) {
                return new Fit(t1);
            }
            var xit = function(t1) {
                function i(i, n) {
                    var s;
                    return (s = t1.call(this) || this).wE = 0, s.hU = 0, s.eU = 0, s.uU = !1, s.oU = null, s.initWithAction(i, n), s;
                }
                h(i, t1);
                var n = i.prototype;
                return n.initWithAction = function(t1, i) {
                    if (!t1 || void 0 === i) return !1;
                    var n = t1.getDurationScaled() * i;
                    return !!this.initWithDuration(n) && (this.wE = i, this.oU = t1, _instanceof(t1, Oit) && (this.uU = !0, this.wE -= 1), this.hU = 0, !0);
                }, n.clone = function() {
                    var _$t = new i;
                    return _$t._id = this._id, _$t._speed = this._speed, this.QF(_$t), this.oU && _$t.initWithAction(this.oU.clone(), this.wE), _$t;
                }, n.startWithTarget = function(i) {
                    this.hU = 0, this.eU = (this.oU ? this.oU.getDurationScaled() : 0) / this._duration, t1.prototype.startWithTarget.call(this, i), this.oU && this.oU.startWithTarget(i);
                }, n.stop = function() {
                    this.oU && this.oU.stop(), t1.prototype.stop.call(this);
                }, n.update = function(t1) {
                    var _$i = this.oU, n = this._duration, s = this.wE, _$r = this.eU;
                    if (_$i) if (t1 >= _$r) {
                        for(; t1 > _$r && this.hU < s;){
                            if (_$i.update(1), _$i.isUnknownDuration()) return;
                            this.hU++, _$i.stop(), _$i.startWithTarget(this.target), _$r += _$i.getDurationScaled() / n, this.eU = _$r > 1 ? 1 : _$r;
                        }
                        if (t1 >= 1 && this.hU < s) {
                            if (_$i.update(1), _$i.isUnknownDuration()) return;
                            this.hU++;
                        }
                        this.uU || (this.hU === s ? _$i.stop() : _$i.update(t1 - (_$r - _$i.getDurationScaled() / n)));
                    } else _$i.update(t1 * s % 1);
                }, n.isDone = function() {
                    return this.hU === this.wE;
                }, n.reverse = function() {
                    var _$t = new i(this.oU ? this.oU.reverse() : void 0, this.wE);
                    return this.QF(_$t), _$t;
                }, n.setInnerAction = function(t1) {
                    this.oU !== t1 && (this.oU = t1);
                }, n.getInnerAction = function() {
                    return this.oU;
                }, n.isUnknownDuration = function() {
                    return !!this.oU && this.oU.isUnknownDuration();
                }, n.toString = function() {
                    return "<Repeat>";
                }, i;
            }(Lit), Git = function(t1) {
                function i(i) {
                    var n;
                    return (n = t1.call(this) || this).oU = null, i && n.initWithAction(i), n;
                }
                h(i, t1);
                var n = i.prototype;
                return n.initWithAction = function(t1) {
                    return t1 ? (this.oU = t1, this._duration = 1 / 0, !0) : (rt(1026), !1);
                }, n.clone = function() {
                    var _$t = new i;
                    return _$t._id = this._id, _$t._speed = this._speed, this.QF(_$t), this.oU && _$t.initWithAction(this.oU.clone()), _$t;
                }, n.startWithTarget = function(i) {
                    t1.prototype.startWithTarget.call(this, i), this.oU && this.oU.startWithTarget(i);
                }, n.stop = function() {
                    this.oU && this.oU.stop(), t1.prototype.stop.call(this);
                }, n.step = function(t1) {
                    if (!this._paused && 0 !== this._speed) {
                        var _$i = this.oU;
                        _$i && (t1 *= this._speed, _$i.step(t1), _$i.isDone() && (_$i.startWithTarget(this.target), _$i.step(_$i.getElapsed() - _$i.getDurationScaled())));
                    }
                }, n.update = function() {
                    Q(1007);
                }, n.isDone = function() {
                    return !1;
                }, n.reverse = function() {
                    if (this.oU) {
                        var _$t = new i(this.oU.reverse());
                        return this.QF(_$t), _$t;
                    }
                    return this;
                }, n.setInnerAction = function(t1) {
                    this.oU !== t1 && (this.oU = t1);
                }, n.getInnerAction = function() {
                    return this.oU;
                }, n.isUnknownDuration = function() {
                    return !!this.oU && this.oU.isUnknownDuration();
                }, n.toString = function() {
                    return "<RepeatForever>";
                }, i;
            }(Lit);
            function Hit(t1) {
                return new Git(t1);
            }
            function Vit(t1, i) {
                var n = new Wit;
                return n.initWithTwoActions(t1, i), n;
            }
            var Wit = function(t1) {
                function i(i) {
                    if ((n = t1.call(this) || this).fU = null, n.cU = null, n.vU = !1, !i || 0 === i.length) return a(n);
                    1 === i.length && i.push(new Dit);
                    var n, s = i.length - 1;
                    if (s >= 0 && null == i[s] && Q(1015), s >= 0) {
                        for(var _$r = i[0], _$h = 1; _$h < s; _$h++)i[_$h] && (_$r = Vit(_$r, i[_$h]));
                        n.initWithTwoActions(_$r, i[s]);
                    }
                    return n;
                }
                h(i, t1);
                var n = i.prototype;
                return n.initWithTwoActions = function(t1, i) {
                    if (!t1 || !i) return rt(1027), !1;
                    var n = !1, s = t1.getDurationScaled(), _$r = i.getDurationScaled();
                    return this.initWithDuration(Math.max(s, _$r)) && (this.fU = t1, this.cU = i, s > _$r ? this.cU = Bit(i, new zit(s - _$r)) : s < _$r && (this.fU = Bit(t1, new zit(_$r - s))), n = !0), n;
                }, n.clone = function() {
                    var _$t = new i;
                    return _$t._id = this._id, _$t._speed = this._speed, this.QF(_$t), this.fU && this.cU && _$t.initWithTwoActions(this.fU.clone(), this.cU.clone()), _$t;
                }, n.startWithTarget = function(i) {
                    t1.prototype.startWithTarget.call(this, i), this.fU && this.fU.startWithTarget(i), this.cU && this.cU.startWithTarget(i);
                }, n.stop = function() {
                    this.fU && this.fU.stop(), this.cU && this.cU.stop(), t1.prototype.stop.call(this);
                }, n.update = function(t1) {
                    this.fU && (this.vU && !this.fU.isUnknownDuration() || this.fU.update(t1)), this.cU && (this.vU && !this.cU.isUnknownDuration() || this.cU.update(t1)), this.vU = 1 === t1;
                }, n.reverse = function() {
                    if (this.fU && this.cU) {
                        var _$t = Vit(this.fU.reverse(), this.cU.reverse());
                        return this.QF(_$t), _$t;
                    }
                    return this;
                }, n.sU = function(t1) {
                    if (this.fU && this.cU) {
                        this.cU.Qe || (this.cU.Qe = t1);
                        var n = this.fU;
                        _instanceof(n, i) || _instanceof(n, Fit) ? n.sU(t1) : n.Qe || (n.Qe = t1);
                    }
                }, n.rU = function(t1) {
                    var n = this.fU, s = this.cU, _$r = null, _$h = function h(n) {
                        if (n.getId() === t1) return n;
                        if (_instanceof(n, Fit) || _instanceof(n, i)) {
                            var s = n.rU(t1);
                            if (s) return s;
                        }
                        return null;
                    };
                    return n && (_$r = _$h(n)) || s && (_$r = _$h(s)) ? _$r : null;
                }, n.isUnknownDuration = function() {
                    var _$t = this.fU, _$i = this.cU;
                    if (null == _$t || null == _$i) return !1;
                    var n = _$t.isUnknownDuration(), s = _$i.isUnknownDuration();
                    return (!!n || !!s) && (!!n && !!s || !!this.vU) || !1;
                }, n.toString = function() {
                    return "<Spawn>";
                }, i;
            }(Lit), zit = function(t1) {
                function i() {
                    return t1.apply(this, arguments) || this;
                }
                h(i, t1);
                var n = i.prototype;
                return n.update = function() {}, n.reverse = function() {
                    var _$t = new i(this._duration);
                    return this.QF(_$t), _$t;
                }, n.clone = function() {
                    var _$t = new i;
                    return _$t._id = this._id, _$t._speed = this._speed, this.QF(_$t), _$t.initWithDuration(this._duration), _$t;
                }, n.isUnknownDuration = function() {
                    return !1;
                }, n.toString = function() {
                    return "<DelayTime>";
                }, i;
            }(Lit), Xit = function(t1) {
                function i(i) {
                    var n;
                    return (n = t1.call(this) || this).lU = null, i && n.initWithAction(i), n;
                }
                h(i, t1);
                var n = i.prototype;
                return n.initWithAction = function(i) {
                    return i ? i === this.lU ? (rt(1029), !1) : !!t1.prototype.initWithDuration.call(this, i.getDurationScaled()) && (this.lU = i, !0) : (rt(1028), !1);
                }, n.clone = function() {
                    var _$t = new i;
                    return _$t._id = this._id, _$t._speed = this._speed, this.QF(_$t), this.lU && _$t.initWithAction(this.lU.clone()), _$t;
                }, n.startWithTarget = function(i) {
                    t1.prototype.startWithTarget.call(this, i), this.lU && this.lU.startWithTarget(i);
                }, n.update = function(t1) {
                    this.lU && this.lU.update(1 - t1);
                }, n.reverse = function() {
                    return this.lU ? this.lU.clone() : this;
                }, n.stop = function() {
                    this.lU && this.lU.stop(), t1.prototype.stop.call(this);
                }, n.isUnknownDuration = function() {
                    return !1;
                }, n.toString = function() {
                    return "<ReverseTime>";
                }, i;
            }(Lit);
            function qit(t1) {
                return new Xit(t1);
            }
            var Yit = function(t1) {
                function i(i, n, s) {
                    var _$r;
                    return (_$r = t1.call(this, i) || this).dU = n, _$r.wU = s, _$r;
                }
                h(i, t1);
                var n = i.prototype;
                return n.clone = function() {
                    return new i(this._duration, this.dU, this.wU);
                }, n.update = function(t1) {
                    this.dU.apply(this, [
                        this.target,
                        t1
                    ].concat(this.wU));
                }, n.reverse = function() {
                    return this.clone();
                }, n.isUnknownDuration = function() {
                    return !1;
                }, n.toString = function() {
                    return "<ActionCustomUpdate>";
                }, i;
            }(Lit), Kit = function(t1) {
                function i(i, n) {
                    var s;
                    return (s = t1.call(this) || this).vU = !1, s.dU = i, s.wU = n, s;
                }
                h(i, t1);
                var n = i.prototype;
                return n.clone = function() {
                    return new i(this.dU, this.wU);
                }, n.reverse = function() {
                    return this.clone();
                }, n.step = function() {
                    throw Error("should never go here");
                }, n.update = function() {
                    var _$t = A.game.deltaTime;
                    this.vU = this.dU.apply(this, [
                        this.target,
                        _$t
                    ].concat(this.wU));
                }, n.isDone = function() {
                    return this.vU;
                }, n.isUnknownDuration = function() {
                    return !this.isDone();
                }, n.toString = function() {
                    return "<ActionUnknownDuration>";
                }, i;
            }(Sit);
            function Jit(t1) {
                var i = t1.charAt(0);
                if (/[A-Z]/.test(i)) {
                    var n = (t1 = t1.replace(i, i.toLowerCase())).split("-");
                    if (2 === n.length) {
                        var s = n[0];
                        if ("linear" === s) t1 = "linear";
                        else {
                            var _$r = n[1];
                            switch(s){
                                case "quadratic":
                                    t1 = "quad" + _$r;
                                    break;
                                case "quartic":
                                    t1 = "quart" + _$r;
                                    break;
                                case "quintic":
                                    t1 = "quint" + _$r;
                                    break;
                                case "sinusoidal":
                                    t1 = "sine" + _$r;
                                    break;
                                case "exponential":
                                    t1 = "expo" + _$r;
                                    break;
                                case "circular":
                                    t1 = "circ" + _$r;
                                    break;
                                default:
                                    t1 = s + _$r;
                            }
                        }
                    }
                }
                return t1;
            }
            function Qit(t1) {
                var i = " [Tween:] ", n = " option is not support in v + " + T;
                t1.delay && W(i + "delay" + n), t1.repeat && W(i + "repeat" + n), t1.repeatDelay && W(i + "repeatDelay" + n), t1.interpolation && W(i + "interpolation" + n), t1.onStop && W(i + "onStop" + n);
            }
            var Zit = t1("eP", function(t1) {
                function i(i, n, s) {
                    if ((_$r = t1.call(this) || this).nU = !1, null == s) s = Object.create(null);
                    else if (Qit(s), s.easing && "string" == typeof s.easing && (s.easing = Jit(s.easing)), s.progress || (s.progress = _$r.progress), s.easing && "string" == typeof s.easing) {
                        var _$r, u, _$h = s.easing;
                        s.easing = cc[_$h], s.easing || nt(1031, _$h);
                    }
                    for(var e in _$r.gU = s, _$r.pU = Object.create(null), n)if (n.hasOwnProperty(e)) {
                        var o = n[e];
                        if ("function" == typeof o) o = o();
                        else if (null == o) continue;
                        var f = void 0, _$c = void 0, a = void 0;
                        void 0 !== o.value ? ("function" == typeof (a = o.value) && (a = a()), void 0 !== o.easing && ("string" == typeof o.easing ? (f = cc[o.easing]) || nt(1031, o.easing) : f = o.easing), void 0 !== o.progress && (_$c = o.progress)) : a = o;
                        var v = Object.create(null);
                        v.start = v.current = v.end = null, v.keys = null, v.value = a, v.easing = f, v.progress = _$c, v.convert = o.convert, v.clone = o.clone, v.add = o.add, v.sub = o.sub, v.legacyProgress = null == (u = o.legacyProgress) || u, v.toFixed = o.toFixed, v.onStart = o.onStart, v.onStop = o.onStop, v.onComplete = o.onComplete, v.valid = !0, _$r.pU[e] = v;
                    }
                    return _$r.yU = n, _$r.initWithDuration(i), _$r;
                }
                h(i, t1);
                var n = i.prototype;
                return n.clone = function() {
                    var _$t = new i(this._duration, this.yU, this.gU);
                    return _$t.nU = this.nU, _$t.Qe = this.Qe, _$t._id = this._id, this.QF(_$t), _$t;
                }, n.reverse = function() {
                    if (!this.gU.relative) return nt(16382), new i(0, {});
                    var _$t = new i(this._duration, this.yU, this.gU);
                    return this.QF(_$t), _$t.nU = !this.nU, _$t.Qe = this.Qe, _$t;
                }, n.startWithTarget = function(i) {
                    t1.prototype.startWithTarget.call(this, i);
                    var n = this.KF();
                    if (n) {
                        var _$s = !!this.gU.relative, _$r = this.pU, _$h = this.nU;
                        for(var u in _$r)!function e() {
                            var _$t = n[u];
                            if (void 0 !== _$t) {
                                var _$i = _$r[u], e = _$i.value;
                                if ("number" == typeof _$t) _$i.start = _$t, _$i.current = _$t, _$i.end = _$s ? _$h ? _$t - e : _$t + e : e;
                                else if ("object" == (void 0 === _$t ? "undefined" : _type_of(_$t))) if (_$i.legacyProgress) {
                                    if (null == _$i.start) {
                                        var f, o = _$t.constructor;
                                        _$i.start = new o, _$i.current = new o, _$i.end = new o;
                                    }
                                    _$i.keys = f = e.getModifiableProperties ? e.getModifiableProperties() : Object.keys(e);
                                    for(var _$c = 0, a = f.length; _$c < a; ++_$c){
                                        var v = f[_$c];
                                        isNaN(_$t[v]) || (_$i.start[v] = _$t[v], _$i.current[v] = _$t[v], _$i.end[v] = _$s ? _$h ? _$t[v] - e[v] : _$t[v] + e[v] : e[v]);
                                    }
                                } else {
                                    var l = _$i.clone;
                                    if (!l) return nt(16383, u), _$i.valid = !1;
                                    var _$d = _$i.add, w = _$i.sub;
                                    if (_$s && (_$d || (nt(16384, u), _$i.valid = !1), _$h && !w && (nt(16385, u), _$i.valid = !1), !_$i.valid)) return;
                                    _$i.start = l(_$t), _$i.current = l(_$t), _$i.end = _$s ? _$h ? w(_$t, e) : _$d(_$t, e) : l(e);
                                }
                                else if ("string" == typeof _$t) {
                                    var g = _$i.convert, p = function p(t1) {
                                        if ("number" == typeof t1) return t1;
                                        var _$i = t1;
                                        return g && (_$i = g(t1)), "number" != typeof _$i && Number.isNaN(_$i = Number(_$i)) ? (nt(16386, "" + t1), null) : _$i;
                                    }, _$y = p(e), _$_ = p(_$t);
                                    if (null == _$y || null == _$_) return _$i.valid = !1;
                                    _$i.start = _$_, _$i.current = _$t, _$i.end = _$s ? _$h ? _$_ - _$y : _$_ + _$y : _$y;
                                }
                                _$i.onStart && _$i.onStart({
                                    relative: _$s,
                                    reversed: _$h,
                                    start: _$i.start,
                                    end: _$i.end
                                });
                            }
                        }();
                        this.gU.onStart && this.gU.onStart(n);
                    }
                }, n.stop = function() {
                    var _$i = this.pU;
                    for(var n in _$i){
                        var _$s = _$i[n];
                        _$s.valid && _$s.onStop && _$s.onStop();
                    }
                    t1.prototype.stop.call(this);
                }, n.update = function(t1) {
                    var _$i = this.KF();
                    if (_$i && this.gU) {
                        var n = this.pU, _$s = this.gU, _$r = t1;
                        "function" == typeof _$s.easing && (_$r = _$s.easing(t1));
                        var _$h = _$s.progress;
                        for(var e in n){
                            var u = n[e];
                            if (u.valid) {
                                var o = u.easing ? u.easing(t1) : _$r, f = u.progress ? u.progress : _$h, _$c = u.start, a = u.end, v = u.current;
                                if ("number" == typeof v) u.current = f(_$c, a, u.current, o);
                                else if ("object" == (void 0 === _$c ? "undefined" : _type_of(_$c))) if (u.legacyProgress) for(var l = u.keys, _$d = 0, w = l.length; _$d < w; ++_$d){
                                    var g = l[_$d];
                                    u.current[g] = f(_$c[g], a[g], u.current[g], o);
                                }
                                else u.current = f(_$c, a, u.current, o);
                                else if ("string" == typeof v) {
                                    var p, _$y = f(_$c, a, u.current, o);
                                    if ("number" == typeof _$y) _$y = _$y.toFixed(null != (p = u.toFixed) ? p : 0);
                                    else if ("string" != typeof _$y) {
                                        nt(16387);
                                        continue;
                                    }
                                    u.current = _$y;
                                }
                                _$i[e] = u.current, 1 === t1 && u.onComplete && u.onComplete();
                            }
                        }
                        _$s.onUpdate && _$s.onUpdate(_$i, t1), 1 === t1 && _$s.onComplete && _$s.onComplete(_$i);
                    }
                }, n.progress = function(t1, i, n, s) {
                    return t1 + (i - t1) * s;
                }, n.isUnknownDuration = function() {
                    return !1;
                }, s(i, [
                    {
                        key: "relative",
                        get: function get() {
                            return !!this.gU.relative;
                        }
                    }
                ]), i;
            }(Lit)), tnt = function(t1) {
                function i(i) {
                    var n;
                    return (n = t1.call(this) || this).pU = void 0, n.pU = {}, i && n.init(i), n;
                }
                h(i, t1);
                var n = i.prototype;
                return n.init = function(t1) {
                    for(var _$i in t1)this.pU[_$i] = t1[_$i];
                    return !0;
                }, n.update = function() {
                    var _$t = this.pU, _$i = this.KF();
                    for(var n in _$t)_$i[n] = _$t[n];
                }, n.clone = function() {
                    var _$t = new i;
                    return _$t._id = this._id, _$t.init(this.pU), _$t;
                }, n.isUnknownDuration = function() {
                    return !1;
                }, i;
            }(Oit);
            function int() {
                return Tit.instance.ActionManager;
            }
            var nnt, snt, rnt, hnt, ent, unt, ont, fnt, cnt, ant, vnt, dnt, wnt, gnt, pnt, ynt, _nt, mnt, bnt, knt, Ant, Ent, Tnt, Snt, Ont, Int, Rnt = t1("eQ", function() {
                function t1(t1) {
                    this.ZF = [], this._U = null, this.Bi = null, this.mU = -1, this.Xi = 1, this.kU = !0, this.Bi = void 0 === t1 ? null : t1;
                }
                var i = t1.prototype;
                return i.bindNodeState = function(t1) {
                    return this.kU = t1, this;
                }, i.tag = function(t1) {
                    return this.mU = t1, this;
                }, i.id = function(t1) {
                    function i(i) {
                        return t1.apply(this, arguments);
                    }
                    return i.toString = function() {
                        return t1.toString();
                    }, i;
                }(function(t1) {
                    return this.ZF.length > 0 && this.ZF[this.ZF.length - 1].setId(t1), this;
                }), i.then = function(t1) {
                    var i = t1.AU(!0);
                    return i && (i.setSpeed(t1.Xi), this.ZF.push(i)), this;
                }, i.reverse = function(i, n) {
                    if (null == i && null == n) return this.EU();
                    if (_instanceof(i, t1) ? (_$s = i, void 0 !== n && (_$r = n)) : "number" == typeof i && (_$s = this, _$r = i), _$s) {
                        var _$s, _$r, h = t1.TU(_$s, _$r);
                        h && this.ZF.push(h);
                    }
                    return this;
                }, i.EU = function() {
                    if (0 === this.ZF.length) return nt(16388), this.clone(this.Bi);
                    var _$t = this.AU(!1), i = Mnt(this.Bi);
                    return i.Xi = this.Xi, _$t && i.SU(_$t.reverse()), i;
                }, t1.TU = function(t1, i) {
                    var n = t1.ZF;
                    if (0 === n.length) return null;
                    var _$s = null, _$r = null;
                    return "number" == typeof i ? _$s = t1.rU(i, n) : t1 && (_$s = t1.AU(!1)), _$s ? (_$r = _$s.reverse()).Qe = t1 : nt(16391, "" + i), _$r;
                }, i.rU = function(t1, i) {
                    for(var n = null, _$s = 0, _$r = i.length; _$s < _$r; ++_$s)if ((n = i[_$s]).getId() === t1 || (_instanceof(n, Fit) || _instanceof(n, Wit)) && (n = n.rU(t1))) return n;
                    return null;
                }, i.SU = function(t1) {
                    var i = t1.clone();
                    return this.OU(i), this.ZF.push(i), this;
                }, i.OU = function(t1) {
                    t1 && (_instanceof(t1, Fit) || _instanceof(t1, Wit) ? t1.sU(this) : t1.Qe || (t1.Qe = this));
                }, i.target = function(t1) {
                    function i(i) {
                        return t1.apply(this, arguments);
                    }
                    return i.toString = function() {
                        return t1.toString();
                    }, i;
                }(function(t1) {
                    return this.Bi = t1, this;
                }), i.getTarget = function() {
                    return this.Bi;
                }, i.start = function(t1) {
                    if (void 0 === t1 && (t1 = 0), !this.Bi) return nt(16392), this;
                    this._U && int().removeAction(this._U);
                    var i = this.IU();
                    return this._U = i, i ? (i.setTag(this.mU), i.setSpeed(this.Xi), i.setStartTime(t1), i.setPaused(!1), int().addAction(i, this.Bi, !1, this.kU)) : nt(16393), this;
                }, i.stop = function() {
                    return this._U && (this._U.stop(), int().removeAction(this._U), this._U = null), this;
                }, i.pause = function() {
                    return this._U ? this._U.setPaused(!0) : nt(16389), this;
                }, i.resume = function() {
                    return this._U ? this._U.setPaused(!1) : nt(16390), this;
                }, i.clone = function(t1) {
                    var i = this.AU(!1), n = Mnt(null != t1 ? t1 : this.Bi);
                    return n.Xi = this.Xi, i ? n.SU(i) : n;
                }, i.union = function(t1) {
                    if (void 0 === t1) return i = this.AU(!1), this.ZF.length = 0, i && this.ZF.push(i), this;
                    var i, _$s = this.ZF, _$r = _$s.findIndex(function(i) {
                        return i.getId() === t1;
                    });
                    if (_$s.length > 1) {
                        var h = _$s.splice(_$r);
                        1 === h.length ? _$s.push(h[0]) : _$s.push(Uit(h));
                    }
                    return this;
                }, i.to = function(t1, i, n) {
                    var _$s = n || Object.create(null);
                    _$s.relative = !1;
                    var _$r = new Zit(t1, i, _$s);
                    return this.ZF.push(_$r), this;
                }, i.by = function(t1, i, n) {
                    var _$s = n || Object.create(null);
                    _$s.relative = !0;
                    var _$r = new Zit(t1, i, _$s);
                    return this.ZF.push(_$r), this;
                }, i.update = function(t1, i) {
                    for(var n = arguments.length, _$s = Array(n > 2 ? n - 2 : 0), _$r = 2; _$r < n; _$r++)_$s[_$r - 2] = arguments[_$r];
                    var h = new Yit(t1, i, _$s);
                    return this.ZF.push(h), this;
                }, i.updateUntil = function(t1) {
                    for(var i = arguments.length, n = Array(i > 1 ? i - 1 : 0), _$s = 1; _$s < i; _$s++)n[_$s - 1] = arguments[_$s];
                    var _$r = new Kit(t1, n);
                    return this.ZF.push(_$r), this;
                }, i.set = function(t1) {
                    var i = new tnt(t1);
                    return this.ZF.push(i), this;
                }, i.delay = function(t1) {
                    var i = new zit(t1);
                    return this.ZF.push(i), this;
                }, i.call = function(t1, i, n) {
                    var _$s = Pit(t1, i, n);
                    return this.ZF.push(_$s), this;
                }, i.sequence = function() {
                    for(var i = arguments.length, n = Array(i), _$s = 0; _$s < i; _$s++)n[_$s] = arguments[_$s];
                    var _$r = t1.RU(n);
                    return _$r && this.ZF.push(_$r), this;
                }, i.parallel = function() {
                    for(var i = arguments.length, n = Array(i), _$s = 0; _$s < i; _$s++)n[_$s] = arguments[_$s];
                    var _$r = t1.MU(n);
                    return _$r && this.ZF.push(_$r), this;
                }, i.timeScale = function(t1) {
                    return this.Xi = t1, this._U && this._U.setSpeed(t1), this;
                }, i.getTimeScale = function() {
                    return this.Xi;
                }, i.repeat = function(i, n) {
                    if (i === 1 / 0) return this.repeatForever(n);
                    var _$s, _$r = this.ZF;
                    return (_$s = _instanceof(n, t1) ? n.AU(!1) : _$r.pop()) && _$r.push(new xit(_$s, i)), this;
                }, i.repeatForever = function(i) {
                    var n, _$s = this.ZF;
                    return (n = _instanceof(i, t1) ? i.AU(!1) : _$s.pop()) && 0 !== _$s.length ? _$s.push(new xit(n, Number.MAX_SAFE_INTEGER)) : _instanceof(n, Lit) ? _$s.push(Hit(n)) : nt(16394), this;
                }, i.reverseTime = function(i) {
                    var n, _$s = this.ZF;
                    return _instanceof(n = _instanceof(i, t1) ? i.AU(!1) : _$s.pop(), Lit) ? _$s.push(qit(n)) : nt(16395), this;
                }, i.hide = function() {
                    if (_instanceof(this.Bi, VE)) {
                        var _$t = new Rit;
                        this.ZF.push(_$t);
                    }
                    return this;
                }, i.show = function() {
                    if (_instanceof(this.Bi, VE)) {
                        var _$t = new Iit;
                        this.ZF.push(_$t);
                    }
                    return this;
                }, i.removeSelf = function() {
                    if (_instanceof(this.Bi, VE)) {
                        var _$t = new Mit(!1);
                        this.ZF.push(_$t);
                    }
                    return this;
                }, i.destroySelf = function() {
                    if (_instanceof(this.Bi, VE)) {
                        var _$t = new Mit(!0);
                        this.ZF.push(_$t);
                    }
                    return this;
                }, t1.getRunningCount = function(t1) {
                    return int().getNumberOfRunningActionsInTarget(t1);
                }, t1.stopAll = function() {
                    int().removeAllActions();
                }, t1.stopAllByTag = function(t1, i) {
                    int().removeAllActionsByTag(t1, i);
                }, t1.stopAllByTarget = function(t1) {
                    int().removeAllActionsFromTarget(t1);
                }, t1.pauseAllByTarget = function(t1) {
                    int().pauseTarget(t1);
                }, t1.resumeAllByTarget = function(t1) {
                    int().resumeTarget(t1);
                }, i.AU = function(t1) {
                    var i = this.ZF;
                    if (0 === i.length) return null;
                    var n = Uit(i);
                    return t1 && this.OU(n), n;
                }, i.IU = function() {
                    var _$t = this.ZF;
                    return 0 === _$t.length ? null : 1 === _$t.length && _instanceof(_$t[0], Git) ? _$t[0] : Uit(_$t);
                }, t1.CU = function(i) {
                    var n = t1.NU;
                    n.length = 0;
                    for(var _$s = i.length, _$r = 0; _$r < _$s; _$r++){
                        var h = i[_$r], e = h.AU(!0);
                        e && (e.setSpeed(h.Xi), n.push(e));
                    }
                }, t1.RU = function(i) {
                    t1.CU(i);
                    var n = Uit(t1.NU);
                    return this.NU.length = 0, n;
                }, t1.MU = function(i) {
                    t1.CU(i);
                    var _$s = new Wit(t1.NU);
                    return this.NU.length = 0, _$s;
                }, s(t1, [
                    {
                        key: "running",
                        get: function get() {
                            return !!this._U && int().isActionRunning(this._U);
                        }
                    },
                    {
                        key: "duration",
                        get: function get() {
                            return this._U ? this._U.getDuration() : 0;
                        }
                    }
                ]), t1;
            }());
            function Mnt(t1) {
                return new Rnt(t1);
            }
            function Cnt(t1) {
                return nt(16396), new Rnt(t1);
            }
            Rnt.NU = [], A.Tween = Rnt, A.tween = Mnt, A.tweenUtil = Cnt;
            var Nnt = new Yr, Pnt = {
                NONE: 0,
                COLOR: 1,
                SPRITE: 2,
                SCALE: 3
            };
            _i(Pnt);
            var Dnt = {
                CLICK: "click"
            }, Lnt = t1("eT", (nnt = go("cc.Button"), snt = yo(110), rnt = po(hB), hnt = Zo(VE), ent = Zo(Pnt), unt = Zo(sD), ont = Zo(sD), fnt = Zo(sD), cnt = Zo(sD), ant = Zo([
                Xg
            ]), nnt(vnt = snt(vnt = rnt(((Int = function(t1) {
                function i() {
                    var _$i;
                    return (_$i = t1.call(this) || this).clickEvents = dnt && dnt(), _$i._interactable = wnt && wnt(), _$i._transition = gnt && gnt(), _$i._normalColor = pnt && pnt(), _$i._hoverColor = ynt && ynt(), _$i._pressedColor = _nt && _nt(), _$i._disabledColor = mnt && mnt(), _$i._normalSprite = bnt && bnt(), _$i._hoverSprite = knt && knt(), _$i._pressedSprite = Ant && Ant(), _$i._disabledSprite = Ent && Ent(), _$i._duration = Tnt && Tnt(), _$i._zoomScale = Snt && Snt(), _$i._target = Ont && Ont(), _$i._pressed = !1, _$i.PU = !1, _$i.DU = new Yr, _$i.LU = new Yr, _$i.BU = 0, _$i.FU = !0, _$i.UU = Os(), _$i.xU = Os(), _$i.jU = null, _$i.GU = null, _$i.HU = Os(), _$i;
                }
                h(i, t1);
                var n = i.prototype;
                return n.__preload = function() {
                    this.target || (this.target = this.node), this._applyTarget(), this._resetState();
                }, n.onEnable = function() {
                    this._registerNodeEvent();
                }, n.onDisable = function() {
                    this._resetState(), this._unregisterNodeEvent();
                }, n.onDestroy = function() {
                    this.target.isValid && this._unregisterTargetEvent(this.target);
                }, n.update = function(t1) {
                    var _$i = this.target;
                    if (!this.FU && _$i && (1 === this._transition || 3 === this._transition)) {
                        this.BU += t1;
                        var n = 1;
                        if (this._duration > 0 && (n = this.BU / this._duration), n >= 1 && (n = 1), 1 === this._transition) {
                            var _$s = _$i._uiProps.uiComp;
                            Yr.lerp(Nnt, this.DU, this.LU, n), _$s && (_$s.color = Nnt);
                        } else 3 === this.transition && (_$i.getScale(this.HU), this.HU.x = jn(this.UU.x, this.xU.x, n), this.HU.y = jn(this.UU.y, this.xU.y, n), _$i.setScale(this.HU));
                        1 === n && (this.FU = !0);
                    }
                }, n._resizeNodeToTargetNode = function() {
                    this.target && this.target.io();
                }, n._resetState = function() {
                    this._pressed = !1, this.PU = !1;
                    var _$t = this.target;
                    if (_$t) {
                        var _$i = this._transition;
                        if (1 === _$i && this._interactable) {
                            var n = _$t.getComponent(TB);
                            n && (n.color = this._normalColor);
                        } else 3 === _$i && this.jU && _$t.setScale(this.jU);
                        this.FU = !0;
                    }
                }, n._registerNodeEvent = function() {
                    var _$i = this.node;
                    _$i.on("touch-start", this._onTouchBegan, this), _$i.on("touch-move", this._onTouchMove, this), _$i.on("touch-end", this._onTouchEnded, this), _$i.on("touch-cancel", this._onTouchCancel, this), _$i.on("mouse-enter", this._onMouseMoveIn, this), _$i.on("mouse-leave", this._onMouseMoveOut, this);
                }, n._registerTargetEvent = function(t1) {
                    t1.on("transform-changed", this.VU, this);
                }, n._unregisterNodeEvent = function() {
                    var _$i = this.node;
                    _$i.off("touch-start", this._onTouchBegan, this), _$i.off("touch-move", this._onTouchMove, this), _$i.off("touch-end", this._onTouchEnded, this), _$i.off("touch-cancel", this._onTouchCancel, this), _$i.off("mouse-enter", this._onMouseMoveIn, this), _$i.off("mouse-leave", this._onMouseMoveOut, this);
                }, n._unregisterTargetEvent = function(t1) {
                    t1.off("transform-changed");
                }, n._getTargetSprite = function(t1) {
                    var _$i = null;
                    return t1 && (_$i = t1.getComponent(xF)), _$i;
                }, n._applyTarget = function() {
                    this.target && (this.GU = this._getTargetSprite(this.target), this.jU || (this.jU = new Ss), Ss.copy(this.jU, this.target.scale), this._registerTargetEvent(this.target));
                }, n.WU = function(t1) {
                    2 === this._transition && this.zU(t1.spriteFrame);
                }, n.zU = function(t1) {
                    if (t1) switch(this._getButtonState()){
                        case 0:
                            this._normalSprite = t1;
                            break;
                        case 1:
                            this._hoverSprite = t1;
                            break;
                        case 2:
                            this._pressedSprite = t1;
                            break;
                        case 3:
                            this._disabledSprite = t1;
                    }
                }, n.$U = function(t1) {
                    1 === this._transition && this.XU(t1);
                }, n.XU = function(t1) {
                    switch(this._getButtonState()){
                        case 0:
                            this._normalColor = t1;
                            break;
                        case 1:
                            this._hoverColor = t1;
                            break;
                        case 2:
                            this._pressedColor = t1;
                            break;
                        case 3:
                            this._disabledColor = t1;
                    }
                }, n.VU = function(t1) {
                    4 & t1 && this.jU && 3 === this._transition && this.FU && Ss.copy(this.jU, this.target.scale);
                }, n._onTouchBegan = function(t1) {
                    this._interactable && this.enabledInHierarchy && (this._pressed = !0, this._updateState(), t1 && (t1.propagationStopped = !0));
                }, n._onTouchMove = function(t1) {
                    if (this._interactable && this.enabledInHierarchy && this._pressed && t1) {
                        var _$i = t1.touch;
                        if (_$i) {
                            var _$s = this.node.io().hitTest(_$i.getLocation(), t1.windowId);
                            3 === this._transition && this.target && this.jU ? _$s ? (Ss.copy(this.UU, this.jU), Ss.multiplyScalar(this.xU, this.jU, this._zoomScale), this.FU = !1) : (this.BU = 0, this.FU = !0, this.target.setScale(this.jU)) : this._applyTransition(2 * !!_$s), t1 && (t1.propagationStopped = !0);
                        }
                    }
                }, n._onTouchEnded = function(t1) {
                    this._interactable && this.enabledInHierarchy && (this._pressed && (Xg.emitEvents(this.clickEvents, t1), this.node.emit("click", this)), this._pressed = !1, this._updateState(), t1 && (t1.propagationStopped = !0));
                }, n._onTouchCancel = function() {
                    this._interactable && this.enabledInHierarchy && (this._pressed = !1, this._updateState());
                }, n._onMouseMoveIn = function() {
                    !this._pressed && this.interactable && this.enabledInHierarchy && (2 !== this._transition || this._hoverSprite) && (this.PU || (this.PU = !0, this._updateState()));
                }, n._onMouseMoveOut = function() {
                    this.PU && (this.PU = !1, this._updateState());
                }, n._updateState = function() {
                    var _$t = this._getButtonState();
                    this._applyTransition(_$t);
                }, n._getButtonState = function() {
                    var _$t = 0;
                    return this._interactable ? this._pressed ? _$t = 2 : this.PU && (_$t = 1) : _$t = 3, _$t;
                }, n._updateColorTransition = function(t1) {
                    var _$i, n = this.qU(t1), _$s = null == (_$i = this.target) ? void 0 : _$i.getComponent(TB);
                    _$s && (3 === t1 ? (_$s.color = n, this.FU = !0) : (this.DU = _$s.color.clone(), this.LU = n, this.BU = 0, this.FU = !1));
                }, n._updateSpriteTransition = function(t1) {
                    var _$i = this.YU(t1);
                    this.GU && _$i && (this.GU.spriteFrame = _$i);
                }, n._updateScaleTransition = function(t1) {
                    this._interactable && (2 === t1 ? this._zoomUp() : this._zoomBack());
                }, n._zoomUp = function() {
                    this.jU && (Ss.copy(this.UU, this.jU), Ss.multiplyScalar(this.xU, this.jU, this._zoomScale), this.BU = 0, this.FU = !1);
                }, n._zoomBack = function() {
                    this.target && this.jU && (Ss.copy(this.UU, this.target.scale), Ss.copy(this.xU, this.jU), this.BU = 0, this.FU = !1);
                }, n._applyTransition = function(t1) {
                    var _$i = this._transition;
                    1 === _$i ? this._updateColorTransition(t1) : 2 === _$i ? this._updateSpriteTransition(t1) : 3 === _$i && this._updateScaleTransition(t1);
                }, n.YU = function(t1) {
                    switch(t1){
                        case 0:
                            return this._normalSprite;
                        case 3:
                            return this._disabledSprite;
                        case 1:
                            return this.hoverSprite;
                        case 2:
                            return this._pressedSprite;
                        default:
                            return null;
                    }
                }, n.qU = function(t1) {
                    switch(t1){
                        case 0:
                            return this._normalColor;
                        case 3:
                            return this._disabledColor;
                        case 1:
                            return this._hoverColor;
                        case 2:
                            return this._pressedColor;
                        default:
                            return new Yr;
                    }
                }, n.KU = function() {}, n.JU = function() {}, n.QU = function() {}, n.ZU = function() {}, s(i, [
                    {
                        key: "target",
                        get: function get() {
                            return this._target || this.node;
                        },
                        set: function set(t1) {
                            this._target !== t1 && (this._target && this._unregisterTargetEvent(this._target), this._target = t1, this._applyTarget());
                        }
                    },
                    {
                        key: "interactable",
                        get: function get() {
                            return this._interactable;
                        },
                        set: function set(t1) {
                            this._interactable !== t1 && (this._interactable = t1, this._updateState(), this._interactable || this._resetState());
                        }
                    },
                    {
                        key: "_resizeToTarget",
                        set: function set(t1) {
                            t1 && this._resizeNodeToTargetNode();
                        }
                    },
                    {
                        key: "transition",
                        get: function get() {
                            return this._transition;
                        },
                        set: function set(t1) {
                            this._transition !== t1 && (1 === this._transition ? this._updateColorTransition(0) : 2 === this._transition && this._updateSpriteTransition(0), this._transition = t1, this._updateState());
                        }
                    },
                    {
                        key: "normalColor",
                        get: function get() {
                            return this._normalColor;
                        },
                        set: function set(t1) {
                            this._normalColor !== t1 && (this._normalColor.set(t1), this._updateState());
                        }
                    },
                    {
                        key: "pressedColor",
                        get: function get() {
                            return this._pressedColor;
                        },
                        set: function set(t1) {
                            this._pressedColor !== t1 && this._pressedColor.set(t1);
                        }
                    },
                    {
                        key: "hoverColor",
                        get: function get() {
                            return this._hoverColor;
                        },
                        set: function set(t1) {
                            this._hoverColor !== t1 && this._hoverColor.set(t1);
                        }
                    },
                    {
                        key: "disabledColor",
                        get: function get() {
                            return this._disabledColor;
                        },
                        set: function set(t1) {
                            this._disabledColor !== t1 && (this._disabledColor.set(t1), this._updateState());
                        }
                    },
                    {
                        key: "duration",
                        get: function get() {
                            return this._duration;
                        },
                        set: function set(t1) {
                            this._duration !== t1 && (this._duration = t1);
                        }
                    },
                    {
                        key: "zoomScale",
                        get: function get() {
                            return this._zoomScale;
                        },
                        set: function set(t1) {
                            this._zoomScale !== t1 && (this._zoomScale = t1);
                        }
                    },
                    {
                        key: "normalSprite",
                        get: function get() {
                            return this._normalSprite;
                        },
                        set: function set(t1) {
                            if (this._normalSprite !== t1) {
                                this._normalSprite = t1;
                                var _$i = this.node.getComponent(xF);
                                _$i && (_$i.spriteFrame = t1), this._updateState();
                            }
                        }
                    },
                    {
                        key: "pressedSprite",
                        get: function get() {
                            return this._pressedSprite;
                        },
                        set: function set(t1) {
                            this._pressedSprite !== t1 && (this._pressedSprite = t1, this._updateState());
                        }
                    },
                    {
                        key: "hoverSprite",
                        get: function get() {
                            return this._hoverSprite;
                        },
                        set: function set(t1) {
                            this._hoverSprite !== t1 && (this._hoverSprite = t1, this._updateState());
                        }
                    },
                    {
                        key: "disabledSprite",
                        get: function get() {
                            return this._disabledSprite;
                        },
                        set: function set(t1) {
                            this._disabledSprite !== t1 && (this._disabledSprite = t1, this._updateState());
                        }
                    }
                ]), i;
            }(Yg)).Transition = Pnt, Int.EventType = Dnt, y(Int.prototype, "target", [
                hnt
            ], Object.getOwnPropertyDescriptor(Int.prototype, "target"), Int.prototype), y(Int.prototype, "transition", [
                ent
            ], Object.getOwnPropertyDescriptor(Int.prototype, "transition"), Int.prototype), y(Int.prototype, "normalSprite", [
                unt
            ], Object.getOwnPropertyDescriptor(Int.prototype, "normalSprite"), Int.prototype), y(Int.prototype, "pressedSprite", [
                ont
            ], Object.getOwnPropertyDescriptor(Int.prototype, "pressedSprite"), Int.prototype), y(Int.prototype, "hoverSprite", [
                fnt
            ], Object.getOwnPropertyDescriptor(Int.prototype, "hoverSprite"), Int.prototype), y(Int.prototype, "disabledSprite", [
                cnt
            ], Object.getOwnPropertyDescriptor(Int.prototype, "disabledSprite"), Int.prototype), dnt = ho(Int.prototype, "clickEvents", [
                ant,
                Ro
            ], function() {
                return [];
            }), wnt = ho(Int.prototype, "_interactable", [
                Ro
            ], function() {
                return !0;
            }), gnt = ho(Int.prototype, "_transition", [
                Ro
            ], function() {
                return 0;
            }), pnt = ho(Int.prototype, "_normalColor", [
                Ro
            ], function() {
                return Yr.WHITE.clone();
            }), ynt = ho(Int.prototype, "_hoverColor", [
                Ro
            ], function() {
                return new Yr(211, 211, 211, 255);
            }), _nt = ho(Int.prototype, "_pressedColor", [
                Ro
            ], function() {
                return Yr.WHITE.clone();
            }), mnt = ho(Int.prototype, "_disabledColor", [
                Ro
            ], function() {
                return new Yr(124, 124, 124, 255);
            }), bnt = ho(Int.prototype, "_normalSprite", [
                Ro
            ], function() {
                return null;
            }), knt = ho(Int.prototype, "_hoverSprite", [
                Ro
            ], function() {
                return null;
            }), Ant = ho(Int.prototype, "_pressedSprite", [
                Ro
            ], function() {
                return null;
            }), Ent = ho(Int.prototype, "_disabledSprite", [
                Ro
            ], function() {
                return null;
            }), Tnt = ho(Int.prototype, "_duration", [
                Ro
            ], function() {
                return .1;
            }), Snt = ho(Int.prototype, "_zoomScale", [
                Ro
            ], function() {
                return 1.2;
            }), Ont = ho(Int.prototype, "_target", [
                Ro
            ], function() {
                return null;
            }), vnt = Int)) || vnt) || vnt) || vnt));
            A.Button = Lnt;
            var Bnt = function() {
                function t1() {}
                return t1.add = function(t1) {
                    var i = this._tabIndexList;
                    -1 === i.indexOf(t1) && i.push(t1);
                }, t1.remove = function(t1) {
                    var i = this._tabIndexList, n = i.indexOf(t1);
                    -1 !== n && i.splice(n, 1);
                }, t1.resort = function() {
                    this._tabIndexList.sort(function(t1, i) {
                        return t1._delegate.tabIndex - i._delegate.tabIndex;
                    });
                }, t1.next = function(t1) {
                    var i = this._tabIndexList, n = i.indexOf(t1);
                    if (t1.setFocus(!1), -1 !== n) {
                        var s = i[n + 1];
                        s && s._delegate.tabIndex >= 0 && s.setFocus(!0);
                    }
                }, t1;
            }();
            Bnt._tabIndexList = [];
            var Fnt = function() {
                function t1() {
                    this._editing = !1, this._delegate = null;
                }
                var i = t1.prototype;
                return i.init = function() {}, i.onEnable = function() {}, i.beforeDraw = function() {}, i.onDisable = function() {
                    this._editing && this.endEditing();
                }, i.clear = function() {
                    this._delegate = null;
                }, i.setTabIndex = function() {}, i.setSize = function() {}, i.setFocus = function(t1) {
                    t1 ? this.beginEditing() : this.endEditing();
                }, i.isFocused = function() {
                    return this._editing;
                }, i.beginEditing = function() {}, i.endEditing = function() {}, t1;
            }(), Unt = S.document, xnt = new cr, jnt = new cr, Gnt = new Ss, Hnt = null, Vnt = 0, Wnt = function(t1) {
                function i() {
                    var _$i;
                    return (_$i = t1.call(this) || this)._delegate = null, _$i._inputMode = -1, _$i._inputFlag = -1, _$i._returnType = -1, _$i.__eventListeners = {}, _$i.__autoResize = !1, _$i.__orientationChanged = void 0, _$i._edTxt = null, _$i.tx = !1, _$i.ix = null, _$i.nx = null, _$i.sx = null, _$i.hx = null, _$i.ux = null, _$i.ox = null, _$i.vx = null, _$i.lx = null, _$i.wx = null, _$i.gx = null, _$i.yx = "EditBoxId_" + ++Vnt, _$i.mx = !1, _$i;
                }
                h(i, t1);
                var n = i.prototype;
                return n.init = function(t1) {
                    t1 && (this._delegate = t1, 0 === t1.inputMode ? this.bx() : this.kx(), Bnt.add(this), this.setTabIndex(t1.tabIndex), this.Ax(), this.Ex(), this.Tx(), BN.instance.on("canvas-resize", this.Sx, this), ge.on("window-resize", this.Sx, this));
                }, n.clear = function() {
                    BN.instance.off("canvas-resize", this.Sx, this), ge.off("window-resize", this.Sx, this), this.Ox(), this.Ix(), Bnt.remove(this), Hnt === this && (Hnt = null), this._delegate = null;
                }, n.Sx = function() {
                    this.mx = !0;
                }, n.beforeDraw = function() {
                    (this._delegate.node.hasChangedFlags || this.mx) && (this.mx = !1, this.Rx());
                }, n.setTabIndex = function(t1) {
                    this._edTxt.tabIndex = t1, Bnt.resort();
                }, n.setSize = function(t1, i) {
                    var n = this._edTxt;
                    n && (n.style.width = t1 + "px", n.style.height = i + "px");
                }, n.beginEditing = function() {
                    Hnt && Hnt !== this && Hnt.setFocus(!1), this._editing = !0, Hnt = this, this._delegate._editBoxEditingDidBegan(), this.Mx(), this._edTxt.focus();
                }, n.endEditing = function() {
                    this._edTxt.blur();
                }, n.kx = function() {
                    this.tx = !1, this._edTxt = Unt.createElement("input");
                }, n.bx = function() {
                    this.tx = !0, this._edTxt = Unt.createElement("textarea");
                }, n.Tx = function() {
                    iP.container && this._edTxt && (iP.container.appendChild(this._edTxt), Unt.head.appendChild(this.gx));
                }, n.Ix = function() {
                    Di(iP.container, this._edTxt) && this._edTxt && iP.container.removeChild(this._edTxt), Di(Unt.head, this.gx) && Unt.head.removeChild(this.gx), this._edTxt = null, this.gx = null;
                }, n.Mx = function() {
                    this.Cx(), this.Nx(), this.Px(), this._edTxt && this._delegate && (this._edTxt.style.display = "", this._delegate._hideLabels()), _e.isMobile && this.Dx();
                }, n.Lx = function() {
                    var _$t = this._edTxt;
                    _$t && this._delegate && (_$t.style.display = "none", this._delegate._showLabels()), _e.isMobile && this.Bx();
                }, n.Dx = function() {
                    _e.os !== ue.ANDROID && _e.os !== ue.OHOS || (ge.handleResizeEvent = !1, this.Fx());
                }, n.Bx = function() {
                    _e.os !== ue.ANDROID && _e.os !== ue.OHOS || (ge.handleResizeEvent = !0), this.Ux();
                }, n.xx = function() {
                    if (this._edTxt) {
                        var _$t = this._edTxt.getBoundingClientRect();
                        return _$t.top >= 0 && _$t.left >= 0 && _$t.bottom <= (S.innerHeight || Unt.documentElement.clientHeight) && _$t.right <= (S.innerWidth || Unt.documentElement.clientWidth);
                    }
                    return !1;
                }, n.Fx = function() {
                    var _$t = this;
                    setTimeout(function() {
                        S.scrollY < 40 && !_$t.xx() && _$t._edTxt.scrollIntoView({
                            block: "start",
                            inline: "nearest",
                            behavior: "smooth"
                        });
                    }, 400);
                }, n.Ux = function() {
                    setTimeout(function() {
                        _e.browserType !== re.WECHAT || _e.os !== ue.IOS ? S.scrollTo(0, 0) : S.top && S.top.scrollTo(0, 0);
                    }, 400);
                }, n.Rx = function() {
                    if (this._edTxt) {
                        var _$t = this._delegate.node, _$i = XN.getScaleX(), n = XN.getScaleY(), s = XN.getViewportRect(), _$r = ge.devicePixelRatio;
                        _$t.getWorldMatrix(xnt);
                        var _$h = _$t.io();
                        if (_$h && (Ss.set(Gnt, -_$h.anchorX * _$h.width, -_$h.anchorY * _$h.height, Gnt.z), cr.transform(xnt, xnt, Gnt)), _$t.io()) {
                            var e = PN.root.batcher2D.getFirstRenderCamera(_$t);
                            if (e) {
                                e.node.getWorldRT(jnt);
                                var u = jnt.m12, o = jnt.m13, f = me.center;
                                jnt.m12 = f.x - (jnt.m00 * u + jnt.m04 * o), jnt.m13 = f.y - (jnt.m01 * u + jnt.m05 * o), _$i /= _$r, n /= _$r, Ss.set(Gnt, _$i, n, 1), cr.scale(jnt, jnt, Gnt);
                                var _$c = iP.container, a = parseInt(_$c && _$c.style.paddingLeft || "0");
                                a += s.x / _$r;
                                var v = parseInt(_$c && _$c.style.paddingBottom || "0");
                                v += s.y / _$r, jnt.m12 += a, jnt.m13 += v, cr.multiply(jnt, jnt, xnt);
                                var l = "matrix(" + jnt.m00 + "," + -jnt.m01 + "," + -jnt.m04 + "," + jnt.m05 + "," + jnt.m12 + "," + -jnt.m13 + ")";
                                this._edTxt.style.transform = l, this._edTxt.style["-webkit-transform"] = l, this._edTxt.style["transform-origin"] = "0px 100% 0px", this._edTxt.style["-webkit-transform-origin"] = "0px 100% 0px";
                            }
                        }
                    }
                }, n.Nx = function() {
                    var _$t = this._delegate, _$i = _$t.inputMode, n = _$t.inputFlag, s = _$t.returnType, _$r = this._edTxt;
                    if (this._inputMode !== _$i || this._inputFlag !== n || this._returnType !== s) {
                        if (this._inputMode = _$i, this._inputFlag = n, this._returnType = s, this.tx) {
                            var _$h = "none";
                            return 4 === n ? _$h = "uppercase" : 2 === n && (_$h = "capitalize"), void (_$r.style.textTransform = _$h);
                        }
                        if (0 === n) return _$r.type = "password", void (_$r.style.textTransform = "none");
                        var e = _$r.type;
                        1 === _$i ? e = "email" : 2 === _$i ? e = "number" : 5 === _$i ? e = "digit" : 3 === _$i ? (e = "tel", _$r.addEventListener("wheel", function() {
                            return !1;
                        })) : 4 === _$i ? e = "url" : (e = "text", 3 === s && (e = "search")), _$r.type = e;
                        var u = "none";
                        4 === n ? u = "uppercase" : 2 === n && (u = "capitalize"), _$r.style.textTransform = u;
                    }
                }, n.Cx = function() {
                    var _$t = this._delegate.maxLength;
                    _$t < 0 && (_$t = 65535), this._edTxt.maxLength = _$t;
                }, n.Ax = function() {
                    if (this._edTxt) {
                        var _$t = this._edTxt;
                        _$t.style.color = "#000000", _$t.style.border = "0px", _$t.style.background = "transparent", _$t.style.width = "100%", _$t.style.height = "100%", _$t.style.outline = "medium", _$t.style.padding = "0", _$t.style.textTransform = "none", _$t.style.display = "none", _$t.style.position = "absolute", _$t.style.bottom = "0px", _$t.style.left = "2px", _$t.className = "cocosEditBox", _$t.style.fontFamily = "Arial", _$t.id = this.yx, this.tx ? (_$t.style.resize = "none", _$t.style.overflowY = "scroll") : (_$t.type = "text", _$t.style["-moz-appearance"] = "textfield"), this.gx = Unt.createElement("style");
                    }
                }, n.Px = function() {
                    var _$t = this._delegate, _$i = this._edTxt;
                    _$i && _$t && (_$i.value = _$t.string, this.jx(_$t.textLabel));
                }, n.jx = function(t1) {
                    if (t1) {
                        var _$i = t1.font;
                        _$i = !_$i || _instanceof(_$i, uL) ? t1.fontFamily : _$i._fontFamily;
                        var n = t1.fontSize * t1.node.scale.y;
                        if ((this.ix !== _$i || this.nx !== n || this.sx !== t1.fontColor || this.hx !== t1.horizontalAlign) && (this.ix = _$i, this.nx = n, this.sx = t1.fontColor, this.hx = t1.horizontalAlign, this._edTxt)) {
                            var s = this._edTxt;
                            switch(s.style.fontSize = n + "px", s.style.color = t1.color.toCSS(), s.style.fontFamily = _$i, t1.horizontalAlign){
                                case DF.HorizontalAlign.LEFT:
                                    s.style.textAlign = "left";
                                    break;
                                case DF.HorizontalAlign.CENTER:
                                    s.style.textAlign = "center";
                                    break;
                                case DF.HorizontalAlign.RIGHT:
                                    s.style.textAlign = "right";
                            }
                        }
                    }
                }, n.Gx = function(t1) {
                    if (t1) {
                        var _$i = t1.font;
                        _$i = !_$i || _instanceof(_$i, uL) ? t1.fontFamily : t1.font._fontFamily;
                        var n = t1.fontSize * t1.node.scale.y;
                        if (this.ux !== _$i || this.ox !== n || this.vx !== t1.fontColor || this.lx !== t1.horizontalAlign || this.wx !== t1.fontSize) {
                            this.ux = _$i, this.ox = n, this.vx = t1.fontColor, this.lx = t1.horizontalAlign, this.wx = t1.fontSize;
                            var s = this.gx, _$r = t1.color.toCSS(), _$h = t1.fontSize, e = "";
                            switch(t1.horizontalAlign){
                                case DF.HorizontalAlign.LEFT:
                                    e = "left";
                                    break;
                                case DF.HorizontalAlign.CENTER:
                                    e = "center";
                                    break;
                                case DF.HorizontalAlign.RIGHT:
                                    e = "right";
                            }
                            s.innerHTML = "#" + this.yx + "::-webkit-input-placeholder{text-transform: initial;-family: " + _$i + ";font-size: " + n + "px;color: " + _$r + ";line-height: " + _$h + "px;text-align: " + e + ";}#" + this.yx + "::-moz-placeholder{text-transform: initial;-family: " + _$i + ";font-size: " + n + "px;color: " + _$r + ";line-height: " + _$h + "px;text-align: " + e + ";}#" + this.yx + "::-ms-input-placeholder{text-transform: initial;-family: " + _$i + ";font-size: " + n + "px;color: " + _$r + ";line-height: " + _$h + "px;text-align: " + e + ";}", _e.browserType === re.EDGE && (s.innerHTML += "#" + this.yx + "::-ms-clear{display: none;}");
                        }
                    }
                }, n.Ex = function() {
                    var _$t = this;
                    if (this._edTxt) {
                        var _$i = this._edTxt, n = !1, s = this.__eventListeners;
                        s.compositionStart = function() {
                            n = !0;
                        }, s.compositionEnd = function() {
                            n = !1, _$t._delegate._editBoxTextChanged(_$i.value);
                        }, s.onInput = function() {
                            if (!n) {
                                var s = _$t._delegate, _$r = s.maxLength;
                                _$r >= 0 && "number" !== _$i.type && (_$i.value = _$i.value.slice(0, _$r)), s._editBoxTextChanged(_$i.value);
                            }
                        }, s.onClick = function() {
                            _$t._editing && _e.isMobile && _$t.Fx();
                        }, s.onKeydown = function(n) {
                            13 === n.keyCode ? (n.propagationStopped = !0, _$t._delegate._editBoxEditingReturn(), _$t.tx || _$i.blur()) : 9 === n.keyCode && (n.propagationStopped = !0, n.preventDefault(), Bnt.next(_$t));
                        }, s.onBlur = function() {
                            _e.isMobile && n && s.compositionEnd(), _$t._editing = !1, Hnt = null, _$t.Lx(), _$t._delegate._editBoxEditingDidEnded();
                        }, _$i.addEventListener("compositionstart", s.compositionStart), _$i.addEventListener("compositionend", s.compositionEnd), _$i.addEventListener("input", s.onInput), _$i.addEventListener("keydown", s.onKeydown), _$i.addEventListener("blur", s.onBlur), _$i.addEventListener("touchstart", s.onClick);
                    }
                }, n.Ox = function() {
                    if (this._edTxt) {
                        var _$t = this._edTxt, _$i = this.__eventListeners;
                        _$t.removeEventListener("compositionstart", _$i.compositionStart), _$t.removeEventListener("compositionend", _$i.compositionEnd), _$t.removeEventListener("input", _$i.onInput), _$t.removeEventListener("keydown", _$i.onKeydown), _$t.removeEventListener("blur", _$i.onBlur), _$t.removeEventListener("touchstart", _$i.onClick), _$i.compositionStart = null, _$i.compositionEnd = null, _$i.onInput = null, _$i.onKeydown = null, _$i.onBlur = null, _$i.onClick = null;
                    }
                }, i;
            }(Fnt), znt = {
                DEFAULT: 0,
                DONE: 1,
                SEND: 2,
                SEARCH: 3,
                GO: 4,
                NEXT: 5
            };
            gi(znt);
            var $nt = {
                ANY: 0,
                EMAIL_ADDR: 1,
                NUMERIC: 2,
                PHONE_NUMBER: 3,
                URL: 4,
                DECIMAL: 5,
                SINGLE_LINE: 6
            };
            gi($nt);
            var Xnt, qnt, Ynt, Knt, Jnt, Qnt, Znt, tst, ist, nst, sst, rst, hst, est, ost, fst, cst, ast, vst, lst, dst, wst, gst, pst, yst, _st, mst, bst, kst = {
                PASSWORD: 0,
                SENSITIVE: 1,
                INITIAL_CAPS_WORD: 2,
                INITIAL_CAPS_SENTENCE: 3,
                INITIAL_CAPS_ALL_CHARACTERS: 4,
                DEFAULT: 5
            };
            gi(kst);
            var Ast, Est, Tst, Sst, Ost, Ist, Rst, Mst, Cst, Nst, Dst, Lst, Bst, Fst, Ust, xst, jst, Gst, Hst, Vst, Wst, zst, $st, Xst, qst, Yst, Kst, Jst = t1("eU", (Xnt = go("cc.EditBox"), qnt = yo(110), Ynt = po(hB), Knt = Zo(DF), Jnt = Zo(DF), Qnt = Zo(sD), Znt = Zo(kst), tst = Zo($nt), ist = Zo(znt), nst = Zo([
                Xg
            ]), sst = Zo([
                Xg
            ]), rst = Zo([
                Xg
            ]), hst = Zo([
                Xg
            ]), Xnt(est = qnt(est = Ynt(((bst = function(t1) {
                function i() {
                    var _$i;
                    return (_$i = t1.call(this) || this).editingDidBegan = ost && ost(), _$i.textChanged = fst && fst(), _$i.editingDidEnded = cst && cst(), _$i.editingReturn = ast && ast(), _$i._impl = null, _$i._background = null, _$i._textLabel = vst && vst(), _$i._placeholderLabel = lst && lst(), _$i._returnType = dst && dst(), _$i._string = wst && wst(), _$i._tabIndex = gst && gst(), _$i._backgroundImage = pst && pst(), _$i._inputFlag = yst && yst(), _$i._inputMode = _st && _st(), _$i._maxLength = mst && mst(), _$i.Hx = !1, _$i;
                }
                h(i, t1);
                var n = i.prototype;
                return n.__preload = function() {
                    this._init();
                }, n.onEnable = function() {
                    this._registerEvent(), this._ensureBackgroundSprite(), this._impl && this._impl.onEnable();
                }, n.Vx = function() {
                    this._impl && this._impl.beforeDraw();
                }, n.onDisable = function() {
                    this._unregisterEvent(), this.Wx(), this._impl && this._impl.onDisable();
                }, n.onDestroy = function() {
                    PN.off("director_before_draw", this.Vx, this), this._impl && this._impl.clear();
                }, n.setFocus = function() {
                    this._impl && this._impl.setFocus(!0);
                }, n.focus = function() {
                    this._impl && this._impl.setFocus(!0);
                }, n.blur = function() {
                    this._impl && this._impl.setFocus(!1);
                }, n.isFocused = function() {
                    return !!this._impl && this._impl.isFocused();
                }, n._editBoxEditingDidBegan = function() {
                    Xg.emitEvents(this.editingDidBegan, this), this.node.emit("editing-did-began", this);
                }, n._editBoxEditingDidEnded = function(t1) {
                    Xg.emitEvents(this.editingDidEnded, this), this.node.emit("editing-did-ended", this, t1);
                }, n._editBoxTextChanged = function(t1) {
                    t1 = this._updateLabelStringStyle(t1, !0), this.string = t1, Xg.emitEvents(this.textChanged, t1, this), this.node.emit("text-changed", this);
                }, n._editBoxEditingReturn = function(t1) {
                    Xg.emitEvents(this.editingReturn, this), this.node.emit("editing-return", this, t1);
                }, n._showLabels = function() {
                    this.Hx = !0, this._updateLabels();
                }, n._hideLabels = function() {
                    this.Hx = !1, this._textLabel && (this._textLabel.node.active = !1), this._placeholderLabel && (this._placeholderLabel.node.active = !1);
                }, n._onTouchBegan = function(t1) {
                    t1.propagationStopped = !0;
                }, n._onTouchCancel = function(t1) {
                    t1.propagationStopped = !0;
                }, n._onTouchEnded = function(t1) {
                    this._impl && this._impl.beginEditing(), t1.propagationStopped = !0;
                }, n._init = function() {
                    this._updatePlaceholderLabel(), this._updateTextLabel(), this.Hx = !0, this.node.on("size-changed", this._resizeChildNodes, this), PN.on("director_before_draw", this.Vx, this), (this._impl = new i._EditBoxImpl).init(this), this._updateString(this._string), this._syncSize();
                }, n._ensureBackgroundSprite = function() {
                    if (!this._background) {
                        var _$t = this.node.getComponent(xF);
                        _$t || (_$t = this.node.addComponent(xF)), _$t !== this._background && (_$t.type = xF.Type.SLICED, _$t.spriteFrame = this._backgroundImage, this._background = _$t, this.zx());
                    }
                }, n._updateTextLabel = function() {
                    var _$t = this._textLabel;
                    if (!_$t) {
                        var _$i = this.node.getChildByName("TEXT_LABEL");
                        _$i || ((_$i = new VE("TEXT_LABEL")).layer = this.node.layer), (_$t = _$i.getComponent(DF)) || (_$t = _$i.addComponent(DF)), _$i.parent = this.node, this._textLabel = _$t;
                    }
                    0 === this._inputMode ? (_$t.verticalAlign = 0, _$t.enableWrapText = !0) : _$t.enableWrapText = !1, _$t.string = this._updateLabelStringStyle(this._string);
                }, n._updatePlaceholderLabel = function() {
                    var _$t = this._placeholderLabel;
                    if (!_$t) {
                        var _$i = this.node.getChildByName("PLACEHOLDER_LABEL");
                        _$i || ((_$i = new VE("PLACEHOLDER_LABEL")).layer = this.node.layer), (_$t = _$i.getComponent(DF)) || (_$t = _$i.addComponent(DF)), _$i.parent = this.node, this._placeholderLabel = _$t;
                    }
                    0 === this._inputMode ? _$t.enableWrapText = !0 : _$t.enableWrapText = !1, _$t.string = this.placeholder;
                }, n._syncSize = function() {
                    var _$t = this.node.io(), _$i = _$t.contentSize;
                    if (this._background) {
                        var n = this._background.node.io();
                        n.anchorPoint = _$t.anchorPoint, n.setContentSize(_$i);
                    }
                    this._updateLabelPosition(_$i), this._impl && this._impl.setSize(_$i.width, _$i.height);
                }, n._updateLabels = function() {
                    if (this.Hx) {
                        var _$t = this._string;
                        this._textLabel && (this._textLabel.node.active = "" !== _$t), this._placeholderLabel && (this._placeholderLabel.node.active = "" === _$t);
                    }
                }, n._updateString = function(t1) {
                    var _$i = this._textLabel;
                    if (_$i) {
                        var n = t1;
                        n && (n = this._updateLabelStringStyle(n)), _$i.string = n, this._updateLabels();
                    }
                }, n._updateLabelStringStyle = function(t1, i) {
                    void 0 === i && (i = !1);
                    var n, _$s = this._inputFlag;
                    if (i || 0 !== _$s) 4 === _$s ? t1 = t1.toUpperCase() : 2 === _$s ? t1 = t1.replace(/(?:^|\s)\S/g, function(t1) {
                        return t1.toUpperCase();
                    }) : 3 === _$s && (t1 = (n = t1).charAt(0).toUpperCase() + n.slice(1));
                    else {
                        for(var _$r = "", _$h = t1.length, e = 0; e < _$h; ++e)_$r += "";
                        t1 = _$r;
                    }
                    return t1;
                }, n._registerEvent = function() {
                    var _$i = this.node;
                    _$i.on("touch-start", this._onTouchBegan, this), _$i.on("touch-end", this._onTouchEnded, this);
                }, n._unregisterEvent = function() {
                    var _$i = this.node;
                    _$i.off("touch-start", this._onTouchBegan, this), _$i.off("touch-end", this._onTouchEnded, this);
                }, n.$x = function() {
                    this._background && (this.backgroundImage = this._background.spriteFrame);
                }, n.zx = function() {
                    var _$t = this._background && this._background.node;
                    null == _$t || _$t.on("spriteframe-changed", this.$x, this);
                }, n.Wx = function() {
                    var _$t = this._background && this._background.node;
                    null == _$t || _$t.off("spriteframe-changed", this.$x, this);
                }, n._updateLabelPosition = function(t1) {
                    var _$i = this.node.io(), n = -_$i.anchorX * _$i.width, _$s = -_$i.anchorY * _$i.height, _$r = this._placeholderLabel, _$h = this._textLabel;
                    _$h && (_$h.node.io().setContentSize(t1.width - 2, t1.height), _$h.node.setPosition(n + 2, _$s + t1.height, _$h.node.position.z), 0 === this._inputMode && (_$h.verticalAlign = 0), _$h.enableWrapText = 0 === this._inputMode), _$r && (_$r.node.io().setContentSize(t1.width - 2, t1.height), _$r.node.setPosition(n + 2, _$s + t1.height, _$r.node.position.z), _$r.enableWrapText = 0 === this._inputMode);
                }, n._resizeChildNodes = function() {
                    var _$t = this.node.io(), _$i = this._textLabel && this._textLabel.node;
                    _$i && (_$i.setPosition(-_$t.width / 2, _$t.height / 2, _$i.position.z), _$i.io().setContentSize(_$t.contentSize));
                    var n = this._placeholderLabel && this._placeholderLabel.node;
                    n && (n.setPosition(-_$t.width / 2, _$t.height / 2, n.position.z), n.io().setContentSize(_$t.contentSize));
                    var _$s = this._background && this._background.node;
                    _$s && _$s.io().setContentSize(_$t.contentSize), this._syncSize();
                }, n._xrUnClick = function() {}, n._xrKeyBoardInput = function() {}, s(i, [
                    {
                        key: "string",
                        get: function get() {
                            return this._string;
                        },
                        set: function set(t1) {
                            this._maxLength >= 0 && t1.length >= this._maxLength && (t1 = t1.slice(0, this._maxLength)), this._string !== t1 && (this._string = t1, this._updateString(t1));
                        }
                    },
                    {
                        key: "placeholder",
                        get: function get() {
                            return this._placeholderLabel ? this._placeholderLabel.string : "";
                        },
                        set: function set(t1) {
                            this._placeholderLabel && (this._placeholderLabel.string = t1);
                        }
                    },
                    {
                        key: "textLabel",
                        get: function get() {
                            return this._textLabel;
                        },
                        set: function set(t1) {
                            this._textLabel !== t1 && (this._textLabel = t1, this._textLabel && (this._updateTextLabel(), this._updateLabels()));
                        }
                    },
                    {
                        key: "placeholderLabel",
                        get: function get() {
                            return this._placeholderLabel;
                        },
                        set: function set(t1) {
                            this._placeholderLabel !== t1 && (this._placeholderLabel = t1, this._placeholderLabel && (this._updatePlaceholderLabel(), this._updateLabels()));
                        }
                    },
                    {
                        key: "backgroundImage",
                        get: function get() {
                            return this._backgroundImage;
                        },
                        set: function set(t1) {
                            this._backgroundImage !== t1 && (this._backgroundImage = t1, this._ensureBackgroundSprite(), this._background.spriteFrame = t1);
                        }
                    },
                    {
                        key: "inputFlag",
                        get: function get() {
                            return this._inputFlag;
                        },
                        set: function set(t1) {
                            this._inputFlag !== t1 && (this._inputFlag = t1, this._updateString(this._string));
                        }
                    },
                    {
                        key: "inputMode",
                        get: function get() {
                            return this._inputMode;
                        },
                        set: function set(t1) {
                            this._inputMode !== t1 && (this._inputMode = t1, this._updateTextLabel(), this._updatePlaceholderLabel());
                        }
                    },
                    {
                        key: "returnType",
                        get: function get() {
                            return this._returnType;
                        },
                        set: function set(t1) {
                            this._returnType = t1;
                        }
                    },
                    {
                        key: "maxLength",
                        get: function get() {
                            return this._maxLength;
                        },
                        set: function set(t1) {
                            this._maxLength = t1;
                        }
                    },
                    {
                        key: "tabIndex",
                        get: function get() {
                            return this._tabIndex;
                        },
                        set: function set(t1) {
                            this._tabIndex !== t1 && (this._tabIndex = t1, this._impl && this._impl.setTabIndex(t1));
                        }
                    }
                ]), i;
            }(Yg))._EditBoxImpl = Fnt, bst.KeyboardReturnType = znt, bst.InputFlag = kst, bst.InputMode = $nt, bst.EventType = {
                EDITING_DID_BEGAN: "editing-did-began",
                EDITING_DID_ENDED: "editing-did-ended",
                TEXT_CHANGED: "text-changed",
                EDITING_RETURN: "editing-return",
                XR_EDITING_DID_BEGAN: "xr-editing-did-began",
                XR_EDITING_DID_ENDED: "xr-editing-did-ended"
            }, y(bst.prototype, "textLabel", [
                Knt
            ], Object.getOwnPropertyDescriptor(bst.prototype, "textLabel"), bst.prototype), y(bst.prototype, "placeholderLabel", [
                Jnt
            ], Object.getOwnPropertyDescriptor(bst.prototype, "placeholderLabel"), bst.prototype), y(bst.prototype, "backgroundImage", [
                Qnt
            ], Object.getOwnPropertyDescriptor(bst.prototype, "backgroundImage"), bst.prototype), y(bst.prototype, "inputFlag", [
                Znt
            ], Object.getOwnPropertyDescriptor(bst.prototype, "inputFlag"), bst.prototype), y(bst.prototype, "inputMode", [
                tst
            ], Object.getOwnPropertyDescriptor(bst.prototype, "inputMode"), bst.prototype), y(bst.prototype, "returnType", [
                ist
            ], Object.getOwnPropertyDescriptor(bst.prototype, "returnType"), bst.prototype), ost = ho(bst.prototype, "editingDidBegan", [
                nst,
                Ro
            ], function() {
                return [];
            }), fst = ho(bst.prototype, "textChanged", [
                sst,
                Ro
            ], function() {
                return [];
            }), cst = ho(bst.prototype, "editingDidEnded", [
                rst,
                Ro
            ], function() {
                return [];
            }), ast = ho(bst.prototype, "editingReturn", [
                hst,
                Ro
            ], function() {
                return [];
            }), vst = ho(bst.prototype, "_textLabel", [
                Ro
            ], function() {
                return null;
            }), lst = ho(bst.prototype, "_placeholderLabel", [
                Ro
            ], function() {
                return null;
            }), dst = ho(bst.prototype, "_returnType", [
                Ro
            ], function() {
                return 0;
            }), wst = ho(bst.prototype, "_string", [
                Ro
            ], function() {
                return "";
            }), gst = ho(bst.prototype, "_tabIndex", [
                Ro
            ], function() {
                return 0;
            }), pst = ho(bst.prototype, "_backgroundImage", [
                Ro
            ], function() {
                return null;
            }), yst = ho(bst.prototype, "_inputFlag", [
                Ro
            ], function() {
                return 5;
            }), _st = ho(bst.prototype, "_inputMode", [
                Ro
            ], function() {
                return 0;
            }), mst = ho(bst.prototype, "_maxLength", [
                Ro
            ], function() {
                return 20;
            }), est = bst)) || est) || est) || est));
            "object" == ("u" < typeof window ? "undefined" : _type_of(window)) && "object" == ("u" < typeof document ? "undefined" : _type_of(document)) && (Jst._EditBoxImpl = Wnt), A.internal.EditBox = Jst;
            var Qst = {
                NONE: 0,
                HORIZONTAL: 1,
                VERTICAL: 2,
                GRID: 3
            };
            _i(Qst);
            var Zst = {
                NONE: 0,
                CONTAINER: 1,
                CHILDREN: 2
            };
            _i(Zst);
            var trt = {
                HORIZONTAL: 0,
                VERTICAL: 1
            };
            _i(trt);
            var irt = {
                BOTTOM_TO_TOP: 0,
                TOP_TO_BOTTOM: 1
            };
            _i(irt);
            var nrt = {
                LEFT_TO_RIGHT: 0,
                RIGHT_TO_LEFT: 1
            };
            _i(nrt);
            var srt = {
                NONE: 0,
                FIXED_ROW: 1,
                FIXED_COL: 2
            };
            _i(srt);
            var rrt, hrt, ert, urt, ort, frt, art, vrt, lrt, drt, wrt, grt, prt = new Ss, yrt = t1("eV", (Ast = go("cc.Layout"), Est = yo(110), Tst = po(hB), Sst = Zo(Qst), Ost = Zo(Zst), Ist = Zo(trt), Rst = Zo(irt), Mst = Zo(nrt), Cst = Zo(srt), Ast(Nst = Est(Nst = Tst(((Kst = function(t1) {
                function i() {
                    var _$i;
                    return (_$i = t1.call(this) || this)._resizeMode = Dst && Dst(), _$i._layoutType = Lst && Lst(), _$i._cellSize = Bst && Bst(), _$i._startAxis = Fst && Fst(), _$i._paddingLeft = Ust && Ust(), _$i._paddingRight = xst && xst(), _$i._paddingTop = jst && jst(), _$i._paddingBottom = Gst && Gst(), _$i._spacingX = Hst && Hst(), _$i._spacingY = Vst && Vst(), _$i._verticalDirection = Wst && Wst(), _$i._horizontalDirection = zst && zst(), _$i._constraint = $st && $st(), _$i._constraintNum = Xst && Xst(), _$i._affectedByScale = qst && qst(), _$i._isAlign = Yst && Yst(), _$i._layoutSize = new Zr(300, 200), _$i._layoutDirty = !0, _$i._childrenDirty = !1, _$i._usefulLayoutObj = [], _$i._init = !1, _$i;
                }
                h(i, t1);
                var n = i.prototype;
                return n.updateLayout = function(t1) {
                    void 0 === t1 && (t1 = !1), (this._layoutDirty || t1) && (this._doLayout(), this._layoutDirty = !1);
                }, n.onEnable = function() {
                    this._addEventListeners();
                    var _$t = this.node.io();
                    _$t.contentSize.equals(Zr.ZERO) && _$t.setContentSize(this._layoutSize), this._childrenChanged();
                }, n.onDisable = function() {
                    this._usefulLayoutObj.length = 0, this._removeEventListeners();
                }, n._checkUsefulObj = function() {
                    this._usefulLayoutObj.length = 0;
                    for(var _$t = this.node.children, _$i = 0; _$i < _$t.length; ++_$i){
                        var n = _$t[_$i], _$s = n.io();
                        n.activeInHierarchy && _$s && this._usefulLayoutObj.push(_$s);
                    }
                }, n._addEventListeners = function() {
                    PN.on("director_after_update", this.updateLayout, this), this.node.on("size-changed", this._resized, this), this.node.on("anchor-changed", this._doLayoutDirty, this), this.node.on("child-added", this._childAdded, this), this.node.on("child-removed", this._childRemoved, this), this.node.on("sibling-order-changed", this._childrenChanged, this), this.node.on("childrenSiblingOrderChanged", this.updateLayout, this), this._addChildrenEventListeners();
                }, n._removeEventListeners = function() {
                    PN.off("director_after_update", this.updateLayout, this), this.node.off("size-changed", this._resized, this), this.node.off("anchor-changed", this._doLayoutDirty, this), this.node.off("child-added", this._childAdded, this), this.node.off("child-removed", this._childRemoved, this), this.node.off("sibling-order-changed", this._childrenChanged, this), this.node.off("childrenSiblingOrderChanged", this.updateLayout, this), this._removeChildrenEventListeners();
                }, n._addChildrenEventListeners = function() {
                    for(var _$t = this.node.children, _$i = 0; _$i < _$t.length; ++_$i){
                        var n = _$t[_$i];
                        n.on("size-changed", this._doLayoutDirty, this), n.on("transform-changed", this._transformDirty, this), n.on("anchor-changed", this._doLayoutDirty, this), n.on("active-in-hierarchy-changed", this._childrenChanged, this);
                    }
                }, n._removeChildrenEventListeners = function() {
                    for(var _$t = this.node.children, _$i = 0; _$i < _$t.length; ++_$i){
                        var n = _$t[_$i];
                        n.off("size-changed", this._doLayoutDirty, this), n.off("transform-changed", this._transformDirty, this), n.off("anchor-changed", this._doLayoutDirty, this), n.off("active-in-hierarchy-changed", this._childrenChanged, this);
                    }
                }, n._childAdded = function(t1) {
                    t1.on("size-changed", this._doLayoutDirty, this), t1.on("transform-changed", this._transformDirty, this), t1.on("anchor-changed", this._doLayoutDirty, this), t1.on("active-in-hierarchy-changed", this._childrenChanged, this), this._childrenChanged();
                }, n._childRemoved = function(t1) {
                    t1.off("size-changed", this._doLayoutDirty, this), t1.off("transform-changed", this._transformDirty, this), t1.off("anchor-changed", this._doLayoutDirty, this), t1.off("active-in-hierarchy-changed", this._childrenChanged, this), this._childrenChanged();
                }, n._resized = function() {
                    this._layoutSize.set(this.node.io().contentSize), this._doLayoutDirty();
                }, n._doLayoutHorizontally = function(t1, i, n, s) {
                    var _$r = this.node.io().anchorPoint, _$h = this._getFixedBreakingNum(), e = 1, u = this._paddingLeft;
                    1 === this._horizontalDirection && (e = -1, u = this._paddingRight);
                    var o = (this._horizontalDirection - _$r.x) * t1 + e * u, f = o - e * this._spacingX, _$c = 0, a = 0, v = 0, l = 0, _$d = !1, w = this._usefulLayoutObj.length, g = this._cellSize.width, p = this._getPaddingH();
                    3 !== this._layoutType && 2 === this._resizeMode && (g = (t1 - p - (w - 1) * this._spacingX) / w);
                    for(var _$y = this._usefulLayoutObj, _$_ = 0; _$_ < _$y.length; ++_$_){
                        var m = _$y[_$_], b = m.node, k = b.scale, A = this._getUsedScaleValue(k.x), E = this._getUsedScaleValue(k.y);
                        2 === this._resizeMode && (m.width = g / A, 3 === this._layoutType && (m.height = this._cellSize.height / E));
                        var T = Math.abs(this._horizontalDirection - m.anchorX), S = m.width * A, _$O = m.height * E;
                        _$O > v && (l = Math.max(v, l), a = v || _$O, v = _$O), f += e * (T * S + this._spacingX);
                        var _$I = e * (1 - T) * S;
                        if (i) {
                            if (_$h > 0) (_$d = _$_ / _$h > 0 && _$_ % _$h == 0) && (a = v > _$O ? v : a);
                            else if (S > t1 - p) f > o + e * T * S && (_$d = !0);
                            else {
                                var _$R = (1 - this._horizontalDirection - _$r.x) * t1;
                                _$d = Math.abs(f + _$I + e * (e > 0 ? this._paddingRight : this._paddingLeft)) > Math.abs(_$R);
                            }
                            _$d && (f = o + e * T * S, _$O !== v && (a = v), _$c += a + this._spacingY, a = v = _$O);
                        }
                        var _$C = n(b, m, _$c);
                        s && b.setPosition(f, _$C), f += _$I;
                    }
                    return Math.max(l, _$c + (a = Math.max(a, v))) + this._getPaddingV();
                }, n._doLayoutVertically = function(t1, i, n, s) {
                    var _$r = this.node.io().anchorPoint, _$h = this._getFixedBreakingNum(), e = 1, u = this._paddingBottom;
                    1 === this._verticalDirection && (e = -1, u = this._paddingTop);
                    var o = (this._verticalDirection - _$r.y) * t1 + e * u, f = o - e * this._spacingY, _$c = 0, a = 0, v = 0, l = 0, _$d = !1, w = this._usefulLayoutObj.length, g = this._cellSize.height, p = this._getPaddingV();
                    3 !== this._layoutType && 2 === this._resizeMode && (g = (t1 - p - (w - 1) * this._spacingY) / w);
                    for(var _$y = this._usefulLayoutObj, _$_ = 0; _$_ < _$y.length; ++_$_){
                        var m = _$y[_$_], b = m.node, k = b.scale, A = this._getUsedScaleValue(k.x), E = this._getUsedScaleValue(k.y);
                        2 === this._resizeMode && (m.height = g / E, 3 === this._layoutType && (m.width = this._cellSize.width / A));
                        var T = Math.abs(this._verticalDirection - m.anchorY), S = m.width * A, _$O = m.height * E;
                        S > _$c && (a = Math.max(_$c, a), v = _$c || S, _$c = S), f += e * (T * _$O + this._spacingY);
                        var _$I = e * (1 - T) * _$O;
                        if (i) {
                            if (_$h > 0) (_$d = _$_ / _$h > 0 && _$_ % _$h == 0) && (v = _$c > _$O ? _$c : v);
                            else if (_$O > t1 - p) f > o + e * T * _$O && (_$d = !0);
                            else {
                                var _$R = (1 - this._verticalDirection - _$r.y) * t1;
                                _$d = Math.abs(f + _$I + e * (e > 0 ? this._paddingTop : this._paddingBottom)) > Math.abs(_$R);
                            }
                            _$d && (f = o + e * T * _$O, S !== _$c && (v = _$c), l += v + this._spacingX, v = _$c = S);
                        }
                        var _$C = n(b, m, l);
                        s && (b.getPosition(prt), b.setPosition(_$C, f, prt.z)), f += _$I;
                    }
                    return Math.max(a, l + (v = Math.max(v, _$c))) + this._getPaddingH();
                }, n._doLayoutGridAxisHorizontal = function(t1, i) {
                    var n = this, _$s = i.width, _$r = 1, _$h = -t1.y * i.height, e = this._paddingBottom;
                    1 === this._verticalDirection && (_$r = -1, _$h = (1 - t1.y) * i.height, e = this._paddingTop);
                    var u = function u(t1, i, s) {
                        return _$h + _$r * (s + (1 - i.anchorY) * i.height * n._getUsedScaleValue(t1.scale.y) + e);
                    }, o = 0;
                    1 === this._resizeMode && (o = this._doLayoutHorizontally(_$s, !0, u, !1), _$h = -t1.y * o, 1 === this._verticalDirection && (_$r = -1, _$h = (1 - t1.y) * o)), this._doLayoutHorizontally(_$s, !0, u, !0), 1 === this._resizeMode && this.node.io().setContentSize(_$s, o);
                }, n._doLayoutGridAxisVertical = function(t1, i) {
                    var n = this, _$s = i.height, _$r = 1, _$h = -t1.x * i.width, e = this._paddingLeft;
                    1 === this._horizontalDirection && (_$r = -1, _$h = (1 - t1.x) * i.width, e = this._paddingRight);
                    var u = function u(t1, i, s) {
                        return _$h + _$r * (s + (1 - i.anchorX) * i.width * n._getUsedScaleValue(t1.scale.x) + e);
                    }, o = 0;
                    1 === this._resizeMode && (o = this._doLayoutVertically(_$s, !0, u, !1), _$h = -t1.x * o, 1 === this._horizontalDirection && (_$r = -1, _$h = (1 - t1.x) * o)), this._doLayoutVertically(_$s, !0, u, !0), 1 === this._resizeMode && this.node.io().setContentSize(o, _$s);
                }, n._doLayoutGrid = function() {
                    var _$t = this.node.io(), _$i = _$t.anchorPoint, n = _$t.contentSize;
                    0 === this.startAxis ? this._doLayoutGridAxisHorizontal(_$i, n) : 1 === this.startAxis && this._doLayoutGridAxisVertical(_$i, n);
                }, n._getHorizontalBaseWidth = function() {
                    var _$t = this._usefulLayoutObj, _$i = 0, n = _$t.length;
                    if (1 === this._resizeMode) {
                        for(var _$s = 0; _$s < _$t.length; ++_$s){
                            var _$r = _$t[_$s], _$h = _$r.node.scale;
                            _$i += _$r.width * this._getUsedScaleValue(_$h.x);
                        }
                        _$i += (n - 1) * this._spacingX + this._getPaddingH();
                    } else _$i = this.node.io().width;
                    return _$i;
                }, n._getVerticalBaseHeight = function() {
                    var _$t = this._usefulLayoutObj, _$i = 0, n = _$t.length;
                    if (1 === this._resizeMode) {
                        for(var _$s = 0; _$s < _$t.length; ++_$s){
                            var _$r = _$t[_$s], _$h = _$r.node.scale;
                            _$i += _$r.height * this._getUsedScaleValue(_$h.y);
                        }
                        _$i += (n - 1) * this._spacingY + this._getPaddingV();
                    } else _$i = this.node.io().height;
                    return _$i;
                }, n._doLayout = function() {
                    var _$t = this;
                    if (this._init && !this._childrenDirty || (this._checkUsefulObj(), this._init = !0, this._childrenDirty = !1), 1 === this._layoutType) {
                        var _$i = this._getHorizontalBaseWidth();
                        this._doLayoutHorizontally(_$i, !1, function(i) {
                            return (_$t._isAlign ? Ss.ZERO : i.position).y;
                        }, !0), this.node.io().width = _$i;
                    } else if (2 === this._layoutType) {
                        var n = this._getVerticalBaseHeight();
                        this._doLayoutVertically(n, !1, function(i) {
                            return (_$t._isAlign ? Ss.ZERO : i.position).x;
                        }, !0), this.node.io().height = n;
                    } else 3 === this._layoutType && this._doLayoutGrid();
                }, n._getUsedScaleValue = function(t1) {
                    return this._affectedByScale ? Math.abs(t1) : 1;
                }, n._transformDirty = function(t1) {
                    4 & t1 && 1 & t1 && this._affectedByScale && this._doLayoutDirty();
                }, n._doLayoutDirty = function() {
                    this._layoutDirty = !0;
                }, n._childrenChanged = function() {
                    this._childrenDirty = !0, this._doLayoutDirty();
                }, n._getPaddingH = function() {
                    return this._paddingLeft + this._paddingRight;
                }, n._getPaddingV = function() {
                    return this._paddingTop + this._paddingBottom;
                }, n._getFixedBreakingNum = function() {
                    if (3 !== this._layoutType || 0 === this._constraint || this._constraintNum <= 0) return 0;
                    var _$t = 1 === this._constraint ? Math.ceil(this._usefulLayoutObj.length / this._constraintNum) : this._constraintNum;
                    return 1 === this._startAxis && (_$t = 2 === this._constraint ? Math.ceil(this._usefulLayoutObj.length / this._constraintNum) : this._constraintNum), _$t;
                }, s(i, [
                    {
                        key: "alignHorizontal",
                        get: function get() {
                            return this._isAlign;
                        },
                        set: function set(t1) {
                            1 === this._layoutType && (this._isAlign = t1, this._doLayoutDirty());
                        }
                    },
                    {
                        key: "alignVertical",
                        get: function get() {
                            return this._isAlign;
                        },
                        set: function set(t1) {
                            2 === this._layoutType && (this._isAlign = t1, this._doLayoutDirty());
                        }
                    },
                    {
                        key: "type",
                        get: function get() {
                            return this._layoutType;
                        },
                        set: function set(t1) {
                            this._layoutType = t1, this._doLayoutDirty();
                        }
                    },
                    {
                        key: "resizeMode",
                        get: function get() {
                            return this._resizeMode;
                        },
                        set: function set(t1) {
                            0 !== this._layoutType && (this._resizeMode = t1, this._doLayoutDirty());
                        }
                    },
                    {
                        key: "cellSize",
                        get: function get() {
                            return this._cellSize;
                        },
                        set: function set(t1) {
                            this._cellSize !== t1 && (this._cellSize.set(t1), this._doLayoutDirty());
                        }
                    },
                    {
                        key: "startAxis",
                        get: function get() {
                            return this._startAxis;
                        },
                        set: function set(t1) {
                            this._startAxis !== t1 && (this._startAxis = t1, this._doLayoutDirty());
                        }
                    },
                    {
                        key: "paddingLeft",
                        get: function get() {
                            return this._paddingLeft;
                        },
                        set: function set(t1) {
                            this._paddingLeft !== t1 && (this._paddingLeft = t1, this._doLayoutDirty());
                        }
                    },
                    {
                        key: "paddingRight",
                        get: function get() {
                            return this._paddingRight;
                        },
                        set: function set(t1) {
                            this._paddingRight !== t1 && (this._paddingRight = t1, this._doLayoutDirty());
                        }
                    },
                    {
                        key: "paddingTop",
                        get: function get() {
                            return this._paddingTop;
                        },
                        set: function set(t1) {
                            this._paddingTop !== t1 && (this._paddingTop = t1, this._doLayoutDirty());
                        }
                    },
                    {
                        key: "paddingBottom",
                        get: function get() {
                            return this._paddingBottom;
                        },
                        set: function set(t1) {
                            this._paddingBottom !== t1 && (this._paddingBottom = t1, this._doLayoutDirty());
                        }
                    },
                    {
                        key: "spacingX",
                        get: function get() {
                            return this._spacingX;
                        },
                        set: function set(t1) {
                            this._spacingX !== t1 && (this._spacingX = t1, this._doLayoutDirty());
                        }
                    },
                    {
                        key: "spacingY",
                        get: function get() {
                            return this._spacingY;
                        },
                        set: function set(t1) {
                            this._spacingY !== t1 && (this._spacingY = t1, this._doLayoutDirty());
                        }
                    },
                    {
                        key: "verticalDirection",
                        get: function get() {
                            return this._verticalDirection;
                        },
                        set: function set(t1) {
                            this._verticalDirection !== t1 && (this._verticalDirection = t1, this._doLayoutDirty());
                        }
                    },
                    {
                        key: "horizontalDirection",
                        get: function get() {
                            return this._horizontalDirection;
                        },
                        set: function set(t1) {
                            this._horizontalDirection !== t1 && (this._horizontalDirection = t1, this._doLayoutDirty());
                        }
                    },
                    {
                        key: "padding",
                        get: function get() {
                            return this._paddingLeft;
                        },
                        set: function set(t1) {
                            this.paddingLeft === t1 && this._paddingRight === t1 && this._paddingTop === t1 && this._paddingBottom === t1 || (this._paddingLeft = this._paddingRight = this._paddingTop = this._paddingBottom = t1, this._doLayoutDirty());
                        }
                    },
                    {
                        key: "constraint",
                        get: function get() {
                            return this._constraint;
                        },
                        set: function set(t1) {
                            0 !== this._layoutType && this._constraint !== t1 && (this._constraint = t1, this._doLayoutDirty());
                        }
                    },
                    {
                        key: "constraintNum",
                        get: function get() {
                            return this._constraintNum;
                        },
                        set: function set(t1) {
                            0 !== this._constraint && this._constraintNum !== t1 && (t1 <= 0 && nt(16400), this._constraintNum = t1, this._doLayoutDirty());
                        }
                    },
                    {
                        key: "affectedByScale",
                        get: function get() {
                            return this._affectedByScale;
                        },
                        set: function set(t1) {
                            this._affectedByScale = t1, this._doLayoutDirty();
                        }
                    }
                ]), i;
            }(Yg)).Type = Qst, Kst.VerticalDirection = irt, Kst.HorizontalDirection = nrt, Kst.ResizeMode = Zst, Kst.AxisDirection = trt, Kst.Constraint = srt, y(Kst.prototype, "type", [
                Sst
            ], Object.getOwnPropertyDescriptor(Kst.prototype, "type"), Kst.prototype), y(Kst.prototype, "resizeMode", [
                Ost
            ], Object.getOwnPropertyDescriptor(Kst.prototype, "resizeMode"), Kst.prototype), y(Kst.prototype, "startAxis", [
                Ist
            ], Object.getOwnPropertyDescriptor(Kst.prototype, "startAxis"), Kst.prototype), y(Kst.prototype, "verticalDirection", [
                Rst
            ], Object.getOwnPropertyDescriptor(Kst.prototype, "verticalDirection"), Kst.prototype), y(Kst.prototype, "horizontalDirection", [
                Mst
            ], Object.getOwnPropertyDescriptor(Kst.prototype, "horizontalDirection"), Kst.prototype), y(Kst.prototype, "constraint", [
                Cst
            ], Object.getOwnPropertyDescriptor(Kst.prototype, "constraint"), Kst.prototype), Dst = ho(Kst.prototype, "_resizeMode", [
                Ro
            ], function() {
                return 0;
            }), Lst = ho(Kst.prototype, "_layoutType", [
                Ro
            ], function() {
                return 0;
            }), Bst = ho(Kst.prototype, "_cellSize", [
                Ro
            ], function() {
                return new Zr(40, 40);
            }), Fst = ho(Kst.prototype, "_startAxis", [
                Ro
            ], function() {
                return 0;
            }), Ust = ho(Kst.prototype, "_paddingLeft", [
                Ro
            ], function() {
                return 0;
            }), xst = ho(Kst.prototype, "_paddingRight", [
                Ro
            ], function() {
                return 0;
            }), jst = ho(Kst.prototype, "_paddingTop", [
                Ro
            ], function() {
                return 0;
            }), Gst = ho(Kst.prototype, "_paddingBottom", [
                Ro
            ], function() {
                return 0;
            }), Hst = ho(Kst.prototype, "_spacingX", [
                Ro
            ], function() {
                return 0;
            }), Vst = ho(Kst.prototype, "_spacingY", [
                Ro
            ], function() {
                return 0;
            }), Wst = ho(Kst.prototype, "_verticalDirection", [
                Ro
            ], function() {
                return 1;
            }), zst = ho(Kst.prototype, "_horizontalDirection", [
                Ro
            ], function() {
                return 0;
            }), $st = ho(Kst.prototype, "_constraint", [
                Ro
            ], function() {
                return 0;
            }), Xst = ho(Kst.prototype, "_constraintNum", [
                Ro
            ], function() {
                return 2;
            }), qst = ho(Kst.prototype, "_affectedByScale", [
                Ro
            ], function() {
                return !1;
            }), Yst = ho(Kst.prototype, "_isAlign", [
                Ro
            ], function() {
                return !1;
            }), Nst = Kst)) || Nst) || Nst) || Nst));
            A.Layout = yrt;
            var _rt = {
                HORIZONTAL: 0,
                VERTICAL: 1,
                FILLED: 2
            };
            gi(_rt), A.ProgressBar = t1("eW", (rrt = go("cc.ProgressBar"), hrt = yo(110), ert = po(hB), urt = Zo(xF), ort = Zo(_rt), rrt(frt = hrt(frt = ert(((grt = function(t1) {
                function i() {
                    var _$i;
                    return (_$i = t1.call(this) || this)._barSprite = art && art(), _$i._mode = vrt && vrt(), _$i._totalLength = lrt && lrt(), _$i._progress = drt && drt(), _$i._reverse = wrt && wrt(), _$i;
                }
                h(i, t1);
                var n = i.prototype;
                return n.onLoad = function() {
                    this._updateBarStatus();
                }, n._initBarSprite = function() {
                    if (this._barSprite) {
                        var _$t = this._barSprite.node;
                        if (_$t) {
                            var _$i = this.node.io(), n = _$i.contentSize, _$s = _$i.anchorPoint, _$r = _$t.io().contentSize;
                            if (2 === this._barSprite.fillType && (this._mode = 2), 0 === this._mode ? this.totalLength = _$r.width : 1 === this._mode ? this.totalLength = _$r.height : this.totalLength = this._barSprite.fillRange, _$t.parent === this.node) {
                                var _$h = -n.width * _$s.x;
                                _$t.setPosition(_$h, 0, 0);
                            }
                        }
                    }
                }, n._updateBarStatus = function() {
                    if (this._barSprite) {
                        var _$t = this._barSprite.node;
                        if (_$t) {
                            var _$i = _$t.io(), n = _$i.anchorPoint, _$s = _$i.contentSize, _$r = new Or(0, .5), _$h = xn(this._progress), e = this._totalLength * _$h, u = _$s, o = 0, f = 0;
                            switch(this._mode){
                                case 0:
                                    this._reverse && (_$r = new Or(1, .5)), u = new Zr(e, _$s.height), o = this._totalLength, f = _$s.height;
                                    break;
                                case 1:
                                    _$r = this._reverse ? new Or(.5, 1) : new Or(.5, 0), u = new Zr(_$s.width, e), o = _$s.width, f = this._totalLength;
                            }
                            if (2 === this._mode) this._barSprite.type !== xF.Type.FILLED ? nt(16397) : (this._reverse && (e *= -1), this._barSprite.fillRange = e);
                            else if (this._barSprite.type !== xF.Type.FILLED) {
                                var _$c = _$r.x - n.x, a = _$r.y - n.y, v = new Ss(_$t.position);
                                v.add3f(o * _$c, f * a, 0), _$t.setPosition(v), _$i.setAnchorPoint(_$r), _$i.setContentSize(u);
                            } else nt(16398);
                        }
                    }
                }, s(i, [
                    {
                        key: "barSprite",
                        get: function get() {
                            return this._barSprite;
                        },
                        set: function set(t1) {
                            this._barSprite !== t1 && (this._barSprite = t1, this._initBarSprite());
                        }
                    },
                    {
                        key: "mode",
                        get: function get() {
                            return this._mode;
                        },
                        set: function set(t1) {
                            if (this._mode !== t1 && (this._mode = t1, this._barSprite)) {
                                var _$i = this._barSprite.node;
                                if (_$i) {
                                    var n = _$i.io().contentSize;
                                    0 === this._mode ? this.totalLength = n.width : 1 === this._mode ? this.totalLength = n.height : 2 === this._mode && (this.totalLength = this._barSprite.fillRange);
                                }
                            }
                        }
                    },
                    {
                        key: "totalLength",
                        get: function get() {
                            return this._totalLength;
                        },
                        set: function set(t1) {
                            2 === this._mode && (t1 = xn(t1)), this._totalLength !== t1 && (this._totalLength = t1, this._updateBarStatus());
                        }
                    },
                    {
                        key: "progress",
                        get: function get() {
                            return this._progress;
                        },
                        set: function set(t1) {
                            this._progress !== t1 && (this._progress = t1, this._updateBarStatus());
                        }
                    },
                    {
                        key: "reverse",
                        get: function get() {
                            return this._reverse;
                        },
                        set: function set(t1) {
                            this._reverse !== t1 && (this._reverse = t1, this._barSprite && (this._barSprite.fillStart = 1 - this._barSprite.fillStart), this._updateBarStatus());
                        }
                    }
                ]), i;
            }(Yg)).Mode = _rt, y(grt.prototype, "barSprite", [
                urt
            ], Object.getOwnPropertyDescriptor(grt.prototype, "barSprite"), grt.prototype), y(grt.prototype, "mode", [
                ort
            ], Object.getOwnPropertyDescriptor(grt.prototype, "mode"), grt.prototype), art = ho(grt.prototype, "_barSprite", [
                Ro
            ], function() {
                return null;
            }), vrt = ho(grt.prototype, "_mode", [
                Ro
            ], function() {
                return 0;
            }), lrt = ho(grt.prototype, "_totalLength", [
                Ro
            ], function() {
                return 1;
            }), drt = ho(grt.prototype, "_progress", [
                Ro
            ], function() {
                return .1;
            }), wrt = ho(grt.prototype, "_reverse", [
                Ro
            ], function() {
                return !1;
            }), frt = grt)) || frt) || frt) || frt));
            var Drt = new Ss, Lrt = new Ss, Brt = new Ss, Frt = new Or, Urt = new Yr, xrt = new Or, jrt = {
                HORIZONTAL: 0,
                VERTICAL: 1
            };
            _i(jrt);
            var mrt, brt, krt, Art, Ert, Trt, Ort, Irt, Rrt, Mrt, Crt, Nrt, Grt, Hrt = t1("eX", (mrt = go("cc.ScrollBar"), brt = yo(110), krt = po(hB), Art = Zo(xF), Ert = Zo(jrt), mrt(Trt = brt(Trt = krt(((Nrt = function(t1) {
                function i() {
                    var _$i;
                    return (_$i = t1.call(this) || this)._scrollView = Ort && Ort(), _$i._handle = Irt && Irt(), _$i._direction = Rrt && Rrt(), _$i._enableAutoHide = Mrt && Mrt(), _$i._autoHideTime = Crt && Crt(), _$i._touching = !1, _$i._opacity = 255, _$i._autoHideRemainingTime = 0, _$i;
                }
                h(i, t1);
                var n = i.prototype;
                return n.hide = function() {
                    this._autoHideRemainingTime = 0, this._setOpacity(0);
                }, n.show = function() {
                    this._autoHideRemainingTime = this._autoHideTime, this._opacity = 255, this._setOpacity(this._opacity);
                }, n.onScroll = function(t1) {
                    if (this._scrollView) {
                        var _$i = this._scrollView.content;
                        if (_$i) {
                            var n = _$i.io().contentSize, _$s = this._scrollView.node.io().contentSize, _$r = this.node.io().contentSize;
                            if (!this._conditionalDisableScrollBar(n, _$s)) {
                                this._enableAutoHide && (this._autoHideRemainingTime = this._autoHideTime, this._setOpacity(this._opacity));
                                var _$h = 0, e = 0, u = 0, o = 0, f = 0;
                                xrt.set(0, 0), 0 === this._direction ? (_$h = n.width, e = _$s.width, f = _$r.width, u = t1.x, this._convertToScrollViewSpace(xrt, _$i), o = -xrt.x) : 1 === this._direction && (_$h = n.height, e = _$s.height, f = _$r.height, u = t1.y, this._convertToScrollViewSpace(xrt, _$i), o = -xrt.y);
                                var a = this._calculateLength(_$h, e, f, u);
                                this._calculatePosition(xrt, _$h, e, f, o, u, a), this._updateLength(a), this._updateHandlerPosition(xrt);
                            }
                        }
                    }
                }, n.setScrollView = function(t1) {
                    this._scrollView = t1;
                }, n.onTouchBegan = function() {
                    this._enableAutoHide && (this._touching = !0);
                }, n.onTouchEnded = function() {
                    if (this._enableAutoHide && (this._touching = !1, !(this._autoHideTime <= 0))) {
                        if (this._scrollView) {
                            var _$t = this._scrollView.content;
                            if (_$t) {
                                var _$i = _$t.io().contentSize, n = this._scrollView.node.io().contentSize;
                                if (this._conditionalDisableScrollBar(_$i, n)) return;
                            }
                        }
                        this._autoHideRemainingTime = this._autoHideTime;
                    }
                }, n.onEnable = function() {
                    var _$t = this.node.getComponent(xF);
                    _$t && (this._opacity = _$t.color.a);
                }, n.start = function() {
                    this._enableAutoHide && this._setOpacity(0);
                }, n.update = function(t1) {
                    this._processAutoHide(t1);
                }, n._convertToScrollViewSpace = function(t1, i) {
                    var n = this._scrollView && this._scrollView.node.io(), _$s = i.io();
                    if (n && _$s) {
                        Drt.set(-_$s.anchorX * _$s.width, -_$s.anchorY * _$s.height, 0), _$s.convertToWorldSpaceAR(Drt, Lrt);
                        var _$r = n.convertToNodeSpaceAR(Lrt);
                        _$r.x += n.anchorX * n.width, _$r.y += n.anchorY * n.height, t1.set(_$r.x, _$r.y);
                    } else t1.set(Or.ZERO);
                }, n._setOpacity = function(t1) {
                    if (this._handle) {
                        var _$i = this.node.getComponent(xF);
                        _$i && (Urt.set(_$i.color), Urt.a = t1, _$i.color = Urt), (_$i = this._handle.getComponent(xF)) && (Urt.set(_$i.color), Urt.a = t1, _$i.color = Urt);
                    }
                }, n._updateHandlerPosition = function(t1) {
                    this._handle && (this._fixupHandlerPosition(Brt), this._handle.node.setPosition(t1.x + Brt.x, t1.y + Brt.y, Brt.z));
                }, n._fixupHandlerPosition = function(t1) {
                    var _$i = this.node.io(), n = _$i.contentSize, _$s = _$i.anchorPoint, _$r = this.handle.node.io().contentSize, _$h = this.handle.node.parent;
                    Ss.set(Drt, -n.width * _$s.x, -n.height * _$s.y, 0);
                    var e = this.node.io().convertToWorldSpaceAR(Drt, Lrt);
                    t1.set(0, 0, 0), _$h.io().convertToNodeSpaceAR(e, t1), 0 === this.direction ? t1.set(t1.x, t1.y + (n.height - _$r.height) / 2, t1.z) : 1 === this.direction && t1.set(t1.x + (n.width - _$r.width) / 2, t1.y, t1.z), this.handle.node.setPosition(t1);
                }, n._conditionalDisableScrollBar = function(t1, i) {
                    return t1.width <= i.width && 0 === this._direction || t1.height <= i.height && 1 === this._direction;
                }, n._calculateLength = function(t1, i, n, s) {
                    var _$r = t1;
                    return s && (_$r += 20 * (s > 0 ? s : -s)), i / _$r * n;
                }, n._calculatePosition = function(t1, i, n, s, r, h, e) {
                    var u = i - n;
                    h && (u += Math.abs(h));
                    var o = 0;
                    u && (o = xn(o = r / u));
                    var f = (s - e) * o;
                    1 === this._direction ? t1.set(0, f) : t1.set(f, 0);
                }, n._updateLength = function(t1) {
                    if (this._handle) {
                        var _$i = this._handle.node.io(), n = _$i.contentSize, _$s = _$i.anchorPoint;
                        _$s.x === Frt.x && _$s.y === Frt.y || _$i.setAnchorPoint(Frt), 0 === this._direction ? _$i.setContentSize(t1, n.height) : _$i.setContentSize(n.width, t1);
                    }
                }, n._processAutoHide = function(t1) {
                    if (this._enableAutoHide && !(this._autoHideRemainingTime <= 0) && !this._touching && (this._autoHideRemainingTime -= t1, this._autoHideRemainingTime <= this._autoHideTime)) {
                        this._autoHideRemainingTime = Math.max(0, this._autoHideRemainingTime);
                        var _$i = this._opacity * (this._autoHideRemainingTime / this._autoHideTime);
                        this._setOpacity(_$i);
                    }
                }, s(i, [
                    {
                        key: "handle",
                        get: function get() {
                            return this._handle;
                        },
                        set: function set(t1) {
                            this._handle !== t1 && (this._handle = t1, this.onScroll(Or.ZERO));
                        }
                    },
                    {
                        key: "direction",
                        get: function get() {
                            return this._direction;
                        },
                        set: function set(t1) {
                            this._direction !== t1 && (this._direction = t1, this.onScroll(Or.ZERO));
                        }
                    },
                    {
                        key: "enableAutoHide",
                        get: function get() {
                            return this._enableAutoHide;
                        },
                        set: function set(t1) {
                            this._enableAutoHide !== t1 && (this._enableAutoHide = t1, this._enableAutoHide && this._setOpacity(0));
                        }
                    },
                    {
                        key: "autoHideTime",
                        get: function get() {
                            return this._autoHideTime;
                        },
                        set: function set(t1) {
                            this._autoHideTime !== t1 && (this._autoHideTime = t1);
                        }
                    }
                ]), i;
            }(Yg)).Direction = jrt, y(Nrt.prototype, "handle", [
                Art
            ], Object.getOwnPropertyDescriptor(Nrt.prototype, "handle"), Nrt.prototype), y(Nrt.prototype, "direction", [
                Ert
            ], Object.getOwnPropertyDescriptor(Nrt.prototype, "direction"), Nrt.prototype), Ort = ho(Nrt.prototype, "_scrollView", [
                Ro
            ], function() {
                return null;
            }), Irt = ho(Nrt.prototype, "_handle", [
                Ro
            ], function() {
                return null;
            }), Rrt = ho(Nrt.prototype, "_direction", [
                Ro
            ], function() {
                return 0;
            }), Mrt = ho(Nrt.prototype, "_enableAutoHide", [
                Ro
            ], function() {
                return !1;
            }), Crt = ho(Nrt.prototype, "_autoHideTime", [
                Ro
            ], function() {
                return 1;
            }), Trt = Nrt)) || Trt) || Trt) || Trt));
            A.ScrollBar = Hrt;
            var Vrt, Wrt, zrt, $rt, Xrt, qrt, Yrt, Krt, Qrt, Zrt, tht, iht, nht, sht, rht, hht, eht, uht, oht, fht, cht = t1("f0", go("cc.ViewGroup")(Grt = yo(110)(Grt = function(t1) {
                function i() {
                    return t1.apply(this, arguments) || this;
                }
                return h(i, t1), i;
            }(Yg)) || Grt) || Grt);
            A.ViewGroup = cht;
            var aht, vht, lht, dht, wht, ght, pht, _ht, mht, bht, kht, Aht, Tht = Os(), Sht = Os(), Oht = Ir(), Iht = Ir(), Rht = function Rht() {
                return (new Date).getMilliseconds();
            }, Mht = {
                "scroll-to-top": 0,
                "scroll-to-bottom": 1,
                "scroll-to-left": 2,
                "scroll-to-right": 3,
                scrolling: 4,
                "bounce-bottom": 6,
                "bounce-left": 7,
                "bounce-right": 8,
                "bounce-top": 5,
                "scroll-ended": 9,
                "touch-up": 10,
                "scroll-ended-with-threshold": 11,
                "scroll-began": 12
            }, Cht = {
                anchor: Ir(),
                applyToHorizontal: !1,
                applyToVertical: !1
            }, Nht = function Nht(t1, i, n, s) {
                Cht.anchor.set(t1, i), Cht.applyToHorizontal = n, Cht.applyToVertical = s;
            }, Pht = {
                NONE: "",
                SCROLL_TO_TOP: "scroll-to-top",
                SCROLL_TO_BOTTOM: "scroll-to-bottom",
                SCROLL_TO_LEFT: "scroll-to-left",
                SCROLL_TO_RIGHT: "scroll-to-right",
                SCROLL_BEGAN: "scroll-began",
                SCROLL_ENDED: "scroll-ended",
                BOUNCE_TOP: "bounce-top",
                BOUNCE_BOTTOM: "bounce-bottom",
                BOUNCE_LEFT: "bounce-left",
                BOUNCE_RIGHT: "bounce-right",
                SCROLLING: "scrolling",
                SCROLL_ENG_WITH_THRESHOLD: "scroll-ended-with-threshold",
                TOUCH_UP: "touch-up"
            }, Dht = t1("eY", (Vrt = go("cc.ScrollView"), Wrt = yo(110), zrt = po(hB), $rt = Zo(VE), Xrt = Zo(Hrt), qrt = Zo(Hrt), Yrt = Zo([
                Xg
            ]), Vrt(Krt = Wrt(Krt = zrt(((fht = function(t1) {
                function i() {
                    var _$i;
                    return (_$i = t1.call(this) || this).bounceDuration = Qrt && Qrt(), _$i.brake = Zrt && Zrt(), _$i.elastic = tht && tht(), _$i.inertia = iht && iht(), _$i.horizontal = nht && nht(), _$i.vertical = sht && sht(), _$i.cancelInnerEvents = rht && rht(), _$i.scrollEvents = hht && hht(), _$i._autoScrolling = !1, _$i._scrolling = !1, _$i._content = eht && eht(), _$i._horizontalScrollBar = uht && uht(), _$i._verticalScrollBar = oht && oht(), _$i._topBoundary = 0, _$i._bottomBoundary = 0, _$i._leftBoundary = 0, _$i._rightBoundary = 0, _$i._touchMoveDisplacements = [], _$i._touchMoveTimeDeltas = [], _$i._touchMovePreviousTimestamp = 0, _$i._touchMoved = !1, _$i._autoScrollAttenuate = !1, _$i._autoScrollStartPosition = new Ss, _$i._autoScrollTargetDelta = new Ss, _$i._autoScrollTotalTime = 0, _$i._autoScrollAccumulatedTime = 0, _$i._autoScrollCurrentlyOutOfBoundary = !1, _$i._autoScrollBraking = !1, _$i._autoScrollBrakingStartPosition = new Ss, _$i._outOfBoundaryAmount = new Ss, _$i._outOfBoundaryAmountDirty = !0, _$i._stopMouseWheel = !1, _$i._mouseWheelEventElapsedTime = 0, _$i._isScrollEndedWithThresholdEventFired = !1, _$i._scrollEventEmitMask = 0, _$i._isBouncing = !1, _$i._contentPos = new Ss, _$i._deltaPos = new Ss, _$i._deltaAmount = new Ss, _$i._hoverIn = 0, _$i;
                }
                h(i, t1);
                var n = i.prototype;
                return n.scrollToBottom = function(t1, i) {
                    void 0 === i && (i = !0), this.Xx(0, 0, !1, !0, t1, i);
                }, n.scrollToTop = function(t1, i) {
                    void 0 === i && (i = !0), this.Xx(0, 1, !1, !0, t1, i);
                }, n.scrollToLeft = function(t1, i) {
                    void 0 === i && (i = !0), this.Xx(0, 0, !0, !1, t1, i);
                }, n.scrollToRight = function(t1, i) {
                    void 0 === i && (i = !0), this.Xx(1, 0, !0, !1, t1, i);
                }, n.scrollToTopLeft = function(t1, i) {
                    void 0 === i && (i = !0), this.Xx(0, 1, !0, !0, t1, i);
                }, n.scrollToTopRight = function(t1, i) {
                    void 0 === i && (i = !0), this.Xx(1, 1, !0, !0, t1, i);
                }, n.scrollToBottomLeft = function(t1, i) {
                    void 0 === i && (i = !0), this.Xx(0, 0, !0, !0, t1, i);
                }, n.scrollToBottomRight = function(t1, i) {
                    void 0 === i && (i = !0), this.Xx(1, 0, !0, !0, t1, i);
                }, n.scrollToOffset = function(t1, i, n) {
                    void 0 === n && (n = !0);
                    var _$s = this.getMaxScrollOffset(), _$r = Ir();
                    0 === _$s.x ? _$r.x = 0 : _$r.x = t1.x / _$s.x, 0 === _$s.y ? _$r.y = 1 : _$r.y = (_$s.y - t1.y) / _$s.y, this.scrollTo(_$r, i, n);
                }, n.getScrollOffset = function() {
                    var _$t = this._getContentTopBoundary() - this._topBoundary;
                    return new Or(this._getContentLeftBoundary() - this._leftBoundary, _$t);
                }, n.getMaxScrollOffset = function() {
                    if (!this._content || !this.view) return Or.ZERO;
                    var _$t = this._content.io().contentSize, _$i = _$t.width - this.view.width, n = _$t.height - this.view.height;
                    return new Or(_$i = _$i >= 0 ? _$i : 0, n = n >= 0 ? n : 0);
                }, n.scrollToPercentHorizontal = function(t1, i, n) {
                    this.Xx(t1, 0, !0, !1, i, n);
                }, n.scrollTo = function(t1, i, n) {
                    this.Xx(t1.x, t1.y, !0, !0, i, n);
                }, n.scrollToPercentVertical = function(t1, i, n) {
                    this.Xx(0, t1, !1, !0, i, n);
                }, n.Xx = function(t1, i, n, s, r, h) {
                    void 0 === h && (h = !0), Nht(t1, i, n, s);
                    var e = this._calculateMovePercentDelta(Cht);
                    r ? this._startAutoScroll(e, r, h) : this._moveContent(e);
                }, n.stopAutoScroll = function() {
                    this._autoScrolling = !1, this._autoScrollAccumulatedTime = this._autoScrollTotalTime;
                }, n.setContentPosition = function(t1) {
                    this.qx(t1);
                }, n.qx = function(t1) {
                    if (this._content) {
                        var _$i = this.Yx();
                        1e-4 > Math.abs(t1.x - _$i.x) && 1e-4 > Math.abs(t1.y - _$i.y) || (this._content.setPosition(t1), this._outOfBoundaryAmountDirty = !0);
                    }
                }, n.getContentPosition = function() {
                    return this.Yx();
                }, n.Yx = function() {
                    return this._content ? (this._contentPos.set(this._content.position), this._contentPos) : Ss.ZERO.clone();
                }, n.isScrolling = function() {
                    return this._scrolling;
                }, n.isAutoScrolling = function() {
                    return this._autoScrolling;
                }, n.getScrollEndedEventTiming = function() {
                    return 1e-4;
                }, n.start = function() {
                    this._calculateBoundary(), this._content && PN.once("director_before_draw", this._adjustContentOutOfBoundary, this);
                }, n.onEnable = function() {
                    this._registerEvent();
                    var _$i = this._content;
                    if (_$i) {
                        _$i.on("size-changed", this._calculateBoundary, this), _$i.on("transform-changed", this._scaleChanged, this);
                        var n = this.view;
                        n && (n.node.on("transform-changed", this._scaleChanged, this), n.node.on("size-changed", this._calculateBoundary, this));
                    }
                    this._calculateBoundary(), this._updateScrollBarState();
                }, n.update = function(t1) {
                    var _$i = this._deltaAmount;
                    this._autoScrolling ? (this._processAutoScrolling(t1), _$i.x = 0, _$i.y = 0) : 0 === _$i.x && 0 === _$i.y || (this._processDeltaMove(_$i), _$i.x = 0, _$i.y = 0);
                }, n.onDisable = function() {
                    this._unregisterEvent();
                    var _$i = this.content;
                    if (_$i) {
                        _$i.off("size-changed", this._calculateBoundary, this), _$i.off("transform-changed", this._scaleChanged, this);
                        var n = this.view;
                        n && (n.node.off("transform-changed", this._scaleChanged, this), n.node.off("size-changed", this._calculateBoundary, this));
                    }
                    this._deltaAmount.set(0, 0), this._hideScrollBar(), this.stopAutoScroll();
                }, n._registerEvent = function() {
                    var _$i = this.node;
                    _$i.on("touch-start", this._onTouchBegan, this, !0), _$i.on("touch-move", this._onTouchMoved, this, !0), _$i.on("touch-end", this._onTouchEnded, this, !0), _$i.on("touch-cancel", this._onTouchCancelled, this, !0), _$i.on("mouse-wheel", this._onMouseWheel, this, !0), MM.on("handle-input", this.Kx, this), MM.on("gamepad-input", this.Kx, this);
                }, n._unregisterEvent = function() {
                    var _$i = this.node;
                    _$i.off("touch-start", this._onTouchBegan, this, !0), _$i.off("touch-move", this._onTouchMoved, this, !0), _$i.off("touch-end", this._onTouchEnded, this, !0), _$i.off("touch-cancel", this._onTouchCancelled, this, !0), _$i.off("mouse-wheel", this._onMouseWheel, this, !0), MM.off("handle-input", this.Kx, this), MM.off("gamepad-input", this.Kx, this);
                }, n._onMouseWheel = function(t1, i) {
                    if (this.enabledInHierarchy && !this._hasNestedViewGroup(t1, i)) {
                        var _$s = t1.getScrollY();
                        this.vertical ? Tht.set(0, -0.1 * _$s, 0) : this.horizontal && Tht.set(-0.1 * _$s, 0, 0), this._mouseWheelEventElapsedTime = 0, this._deltaAmount.add(Tht), this._stopMouseWheel || (this._handlePressLogic(), this.schedule(this._checkMouseWheel, 1 / 60), this._stopMouseWheel = !0), this._stopPropagationIfTargetIsMe(t1);
                    }
                }, n._onTouchBegan = function(t1, i) {
                    this.enabledInHierarchy && this._content && (this._hasNestedViewGroup(t1, i) || (this._handlePressLogic(), this._touchMoved = !1, this._stopPropagationIfTargetIsMe(t1)));
                }, n._onTouchMoved = function(t1, i) {
                    if (this.enabledInHierarchy && this._content && !this._hasNestedViewGroup(t1, i)) {
                        var _$s = t1.touch;
                        if (this._handleMoveLogic(_$s), this.cancelInnerEvents) {
                            var _$r = _$s.getUILocation(Oht);
                            if (_$r.subtract(_$s.getUIStartLocation(Iht)), _$r.length() > 7 && !this._touchMoved && t1.target !== this.node) {
                                var _$h = new YA(t1.getTouches(), t1.bubbles, "touch-cancel");
                                _$h.touch = t1.touch, _$h.simulate = !0, t1.target.dispatchEvent(_$h), this._touchMoved = !0;
                            }
                            this._stopPropagationIfTargetIsMe(t1);
                        }
                    }
                }, n._onTouchEnded = function(t1, i) {
                    if (this.enabledInHierarchy && this._content && t1 && !this._hasNestedViewGroup(t1, i)) {
                        this._dispatchEvent("touch-up");
                        var _$s = t1.touch;
                        this._handleReleaseLogic(_$s), this._touchMoved ? t1.propagationStopped = !0 : this._stopPropagationIfTargetIsMe(t1);
                    }
                }, n._onTouchCancelled = function(t1, i) {
                    this.enabledInHierarchy && this._content && (this._hasNestedViewGroup(t1, i) || (t1 && !t1.simulate && this._handleReleaseLogic(t1.touch), this._stopPropagationIfTargetIsMe(t1)));
                }, n._calculateBoundary = function() {
                    if (this._content && this.view) {
                        var _$i = this._content.getComponent(yrt);
                        _$i && _$i.enabledInHierarchy && _$i.updateLayout();
                        var n = this.view, _$s = n.width * n.anchorX, _$r = n.height * n.anchorY;
                        this._leftBoundary = -_$s, this._bottomBoundary = -_$r, this._rightBoundary = this._leftBoundary + n.width, this._topBoundary = this._bottomBoundary + n.height, this._moveContentToTopLeft(n.contentSize);
                    }
                }, n._hasNestedViewGroup = function(t1, i) {
                    if (!t1 || t1.eventPhase !== WA.CAPTURING_PHASE) return !1;
                    if (i) for(var n = 0; n < i.length; n++){
                        var _$s = i[n];
                        if (this.node === _$s) return !(!t1.target || !t1.target.getComponent(cht));
                        if (_$s.getComponent(cht)) return !0;
                    }
                    return !1;
                }, n._startInertiaScroll = function(t1) {
                    Tht.set(t1), Tht.multiplyScalar(.7), this._startAttenuatingAutoScroll(Tht, t1);
                }, n._calculateAttenuatedFactor = function(t1) {
                    return this.brake <= 0 ? 1 - this.brake : (1 - this.brake) * (1 / (1 + 14e-6 * t1 + t1 * t1 * 8e-9));
                }, n._startAttenuatingAutoScroll = function(t1, i) {
                    var n = t1.clone();
                    if (n.normalize(), this._content && this.view) {
                        var _$s = this._content.io().contentSize, _$r = this.view.contentSize, _$h = _$s.width - _$r.width, e = _$s.height - _$r.height, u = this._calculateAttenuatedFactor(_$h), o = this._calculateAttenuatedFactor(e);
                        n.x = n.x * _$h * (1 - this.brake) * u, n.y = n.y * e * o * (1 - this.brake), n.z = 0;
                    }
                    var f = t1.length(), _$c = n.length() / f;
                    this.brake > 0 && _$c > 7 ? (_$c = Math.sqrt(_$c), n.set(t1), n.multiplyScalar(_$c + 1)) : n.add(t1);
                    var a = this._calculateAutoScrollTimeByInitialSpeed(i.length());
                    this.brake > 0 && _$c > 3 && (a *= _$c = 3), 0 === this.brake && _$c > 1 && (a *= _$c), this._startAutoScroll(n, a, !0);
                }, n._calculateAutoScrollTimeByInitialSpeed = function(t1) {
                    return Math.sqrt(Math.sqrt(t1 / 5));
                }, n._startAutoScroll = function(t1, i, n) {
                    void 0 === n && (n = !1);
                    var _$r = this._flattenVectorByDirection(t1);
                    this._autoScrolling = !0, this._autoScrollTargetDelta = _$r, this._autoScrollAttenuate = n, Ss.copy(this._autoScrollStartPosition, this.Yx()), this._autoScrollTotalTime = i, this._autoScrollAccumulatedTime = 0, this._autoScrollBraking = !1, this._isScrollEndedWithThresholdEventFired = !1, this._autoScrollBrakingStartPosition.set(0, 0, 0), this._getHowMuchOutOfBoundary().equals(Ss.ZERO, 1e-4) || (this._autoScrollCurrentlyOutOfBoundary = !0);
                }, n._calculateTouchMoveVelocity = function() {
                    var _$t = new Ss, _$i = 0;
                    if ((_$i = this._touchMoveTimeDeltas.reduce(function(t1, i) {
                        return t1 + i;
                    }, _$i)) <= 0 || _$i >= .5) _$t.set(Ss.ZERO);
                    else {
                        var n = Tht;
                        n.set(0, 0, 0), n = this._touchMoveDisplacements.reduce(function(t1, i) {
                            return t1.add(i), t1;
                        }, n), _$t.set(n.x * (1 - this.brake) / _$i, n.y * (1 - this.brake) / _$i, n.z);
                    }
                    return _$t;
                }, n._flattenVectorByDirection = function(t1) {
                    return this.horizontal || (t1.x = 0), this.vertical || (t1.y = 0), t1;
                }, n._moveContent = function(t1, i) {
                    var n = this._flattenVectorByDirection(t1);
                    Tht.set(this.Yx()), Tht.add(n), Tht.set(1e-4 * Math.round(1e4 * Tht.x), 1e-4 * Math.round(1e4 * Tht.y), Tht.z), this.qx(Tht);
                    var _$s = this._getHowMuchOutOfBoundary();
                    Oht.set(_$s.x, _$s.y), this._updateScrollBar(Oht), this.elastic && i && this._startBounceBackIfNeeded();
                }, n._getContentLeftBoundary = function() {
                    if (!this._content) return -1;
                    var _$t = this.Yx(), _$i = this._content.io();
                    return _$t.x - _$i.anchorX * _$i.width;
                }, n._getContentRightBoundary = function() {
                    if (!this._content) return -1;
                    var _$t = this._content.io();
                    return this._getContentLeftBoundary() + _$t.width;
                }, n._getContentTopBoundary = function() {
                    if (!this._content) return -1;
                    var _$t = this._content.io();
                    return this._getContentBottomBoundary() + _$t.height;
                }, n._getContentBottomBoundary = function() {
                    if (!this._content) return -1;
                    var _$t = this.Yx(), _$i = this._content.io();
                    return _$t.y - _$i.anchorY * _$i.height;
                }, n._getHowMuchOutOfBoundary = function(t1) {
                    if (t1 || (t1 = Ss.ZERO), t1.equals(Ss.ZERO, 1e-4) && !this._outOfBoundaryAmountDirty) return this._outOfBoundaryAmount;
                    var _$i = new Ss, n = this._getContentLeftBoundary(), _$s = this._getContentRightBoundary();
                    n + t1.x > this._leftBoundary ? _$i.x = this._leftBoundary - (n + t1.x) : _$s + t1.x < this._rightBoundary && (_$i.x = this._rightBoundary - (_$s + t1.x));
                    var _$r = this._getContentTopBoundary(), _$h = this._getContentBottomBoundary();
                    return _$r + t1.y < this._topBoundary ? _$i.y = this._topBoundary - (_$r + t1.y) : _$h + t1.y > this._bottomBoundary && (_$i.y = this._bottomBoundary - (_$h + t1.y)), t1.equals(Ss.ZERO, 1e-4) && (this._outOfBoundaryAmount = _$i, this._outOfBoundaryAmountDirty = !1), this._clampDelta(_$i), _$i;
                }, n._updateScrollBar = function(t1) {
                    this._horizontalScrollBar && this._horizontalScrollBar.isValid && this._horizontalScrollBar.onScroll(t1), this._verticalScrollBar && this._verticalScrollBar.isValid && this._verticalScrollBar.onScroll(t1);
                }, n._onScrollBarTouchBegan = function() {
                    this._horizontalScrollBar && this._horizontalScrollBar.isValid && this._horizontalScrollBar.onTouchBegan(), this._verticalScrollBar && this._verticalScrollBar.isValid && this._verticalScrollBar.onTouchBegan();
                }, n._onScrollBarTouchEnded = function() {
                    this._horizontalScrollBar && this._horizontalScrollBar.isValid && this._horizontalScrollBar.onTouchEnded(), this._verticalScrollBar && this._verticalScrollBar.isValid && this._verticalScrollBar.onTouchEnded();
                }, n._dispatchEvent = function(t1) {
                    if ("scroll-ended" === t1) this._scrollEventEmitMask = 0;
                    else if ("scroll-to-top" === t1 || "scroll-to-bottom" === t1 || "scroll-to-left" === t1 || "scroll-to-right" === t1) {
                        var _$i = 1 << Mht[t1];
                        if (this._scrollEventEmitMask & _$i) return;
                        this._scrollEventEmitMask |= _$i;
                    }
                    Xg.emitEvents(this.scrollEvents, this, Mht[t1]), this.node.emit(t1, this);
                }, n._adjustContentOutOfBoundary = function() {
                    if (this._content) {
                        this._outOfBoundaryAmountDirty = !0;
                        var _$t = this._getHowMuchOutOfBoundary();
                        _$t.equals(Ss.ZERO, 1e-4) || (Tht.set(this.Yx()), Tht.add(_$t), this.qx(Tht), this._updateScrollBar(Or.ZERO));
                    }
                }, n._hideScrollBar = function() {
                    this._horizontalScrollBar && this._horizontalScrollBar.isValid && this._horizontalScrollBar.hide(), this._verticalScrollBar && this._verticalScrollBar.isValid && this._verticalScrollBar.hide();
                }, n._updateScrollBarState = function() {
                    if (this._content && this.view) {
                        var _$i = this.view, n = this._content.io(), _$s = this._verticalScrollBar;
                        _$s && _$s.isValid && (n.height < _$i.height || Fn(n.height, _$i.height) ? _$s.hide() : _$s.show());
                        var _$r = this._horizontalScrollBar;
                        _$r && _$r.isValid && (n.width < _$i.width || Fn(n.width, _$i.width) ? _$r.hide() : _$r.show());
                    }
                }, n._stopPropagationIfTargetIsMe = function(t1) {
                    t1.eventPhase === WA.AT_TARGET && t1.target === this.node && (t1.propagationStopped = !0);
                }, n._processDeltaMove = function(t1) {
                    this._scrollChildren(t1), this._gatherTouchMove(t1);
                }, n._handleMoveLogic = function(t1) {
                    this._getLocalAxisAlignDelta(this._deltaPos, t1), this._deltaAmount.add(this._deltaPos);
                }, n._handleReleaseLogic = function(t1) {
                    this._getLocalAxisAlignDelta(this._deltaPos, t1), this._gatherTouchMove(this._deltaPos), this._processInertiaScroll(), this._scrolling && (this._scrolling = !1, this._autoScrolling || this._dispatchEvent("scroll-ended"));
                }, n._getLocalAxisAlignDelta = function(t1, i) {
                    var n = this.node.io();
                    n && (i.getUILocation(Oht), i.getUIPreviousLocation(Iht), Tht.set(Oht.x, Oht.y, 0), Sht.set(Iht.x, Iht.y, 0), n.convertToNodeSpaceAR(Tht, Tht), n.convertToNodeSpaceAR(Sht, Sht), Ss.subtract(t1, Tht, Sht));
                }, n._scrollChildren = function(t1) {
                    this._clampDelta(t1), this.elastic && (n = this._getHowMuchOutOfBoundary(), t1.x *= 0 === n.x ? 1 : .5, t1.y *= 0 === n.y ? 1 : .5), this.elastic || (n = this._getHowMuchOutOfBoundary(t1), t1.add(n));
                    var n, _$r = "", _$h = "";
                    if (this._content) {
                        var e = this._content.io(), u = e.anchorX, o = e.anchorY, f = e.width, _$c = e.height, a = this._content.position || Ss.ZERO;
                        this.vertical && (t1.y > 0 ? a.y - o * _$c + t1.y >= this._bottomBoundary && (_$r = "scroll-to-bottom") : t1.y < 0 && a.y - o * _$c + _$c + t1.y <= this._topBoundary && (_$r = "scroll-to-top")), this.horizontal && (t1.x < 0 ? a.x - u * f + f + t1.x <= this._rightBoundary && (_$h = "scroll-to-right") : t1.x > 0 && a.x - u * f + t1.x >= this._leftBoundary && (_$h = "scroll-to-left"));
                    }
                    this._moveContent(t1, !1), (this.horizontal && 0 !== t1.x || this.vertical && 0 !== t1.y) && (this._scrolling || (this._scrolling = !0, this._dispatchEvent("scroll-began")), this._dispatchEvent("scrolling")), "" !== _$r && this._dispatchEvent(_$r), "" !== _$h && this._dispatchEvent(_$h);
                }, n._handlePressLogic = function() {
                    this._autoScrolling && this._dispatchEvent("scroll-ended"), this._autoScrolling = !1, this._isBouncing = !1, this._touchMovePreviousTimestamp = Rht(), this._touchMoveDisplacements.length = 0, this._touchMoveTimeDeltas.length = 0, this._onScrollBarTouchBegan();
                }, n._clampDelta = function(t1) {
                    if (this._content && this.view) {
                        var _$i = this.view.contentSize, n = this._content.io();
                        n.width < _$i.width && (t1.x = 0), n.height < _$i.height && (t1.y = 0);
                    }
                }, n._gatherTouchMove = function(t1) {
                    var n = t1.clone();
                    for(this._clampDelta(n); this._touchMoveDisplacements.length >= 5;)this._touchMoveDisplacements.shift(), this._touchMoveTimeDeltas.shift();
                    this._touchMoveDisplacements.push(n);
                    var _$s = Rht();
                    this._touchMoveTimeDeltas.push((_$s - this._touchMovePreviousTimestamp) / 1e3), this._touchMovePreviousTimestamp = _$s;
                }, n._startBounceBackIfNeeded = function() {
                    if (!this.elastic) return !1;
                    var _$i = this._getHowMuchOutOfBoundary();
                    if (this._clampDelta(_$i), _$i.equals(Ss.ZERO, 1e-4)) return !1;
                    var n = Math.max(this.bounceDuration, 0);
                    return this._startAutoScroll(_$i, n, !0), this._isBouncing || (_$i.y > 0 && this._dispatchEvent("bounce-top"), _$i.y < 0 && this._dispatchEvent("bounce-bottom"), _$i.x > 0 && this._dispatchEvent("bounce-right"), _$i.x < 0 && this._dispatchEvent("bounce-left"), this._isBouncing = !0), !0;
                }, n._processInertiaScroll = function() {
                    if (!this._startBounceBackIfNeeded() && this.inertia) {
                        var _$t = this._calculateTouchMoveVelocity();
                        !_$t.equals(Ss.ZERO, 1e-4) && this.brake < 1 && this._startInertiaScroll(_$t);
                    }
                    this._onScrollBarTouchEnded();
                }, n._isOutOfBoundary = function() {
                    return !this._getHowMuchOutOfBoundary().equals(Ss.ZERO, 1e-4);
                }, n._isNecessaryAutoScrollBrake = function() {
                    if (this._autoScrollBraking) return !0;
                    if (this._isOutOfBoundary()) {
                        if (!this._autoScrollCurrentlyOutOfBoundary) return this._autoScrollCurrentlyOutOfBoundary = !0, this._autoScrollBraking = !0, Ss.copy(this._autoScrollBrakingStartPosition, this.Yx()), !0;
                    } else this._autoScrollCurrentlyOutOfBoundary = !1;
                    return !1;
                }, n._processAutoScrolling = function(t1) {
                    var n = this._isNecessaryAutoScrollBrake(), _$s = n ? .05 : 1;
                    this._autoScrollAccumulatedTime += 1 / _$s * t1;
                    var _$r, _$h = Math.min(1, this._autoScrollAccumulatedTime / this._autoScrollTotalTime);
                    this._autoScrollAttenuate && (_$h = (_$r = _$h - 1) * _$r * _$r * _$r * _$r + 1);
                    var e = this._autoScrollTargetDelta.clone();
                    e.multiplyScalar(_$h);
                    var u = this._autoScrollStartPosition.clone();
                    u.add(e);
                    var o = 1e-4 >= Math.abs(_$h - 1);
                    if (Math.abs(_$h - 1) <= this.getScrollEndedEventTiming() && !this._isScrollEndedWithThresholdEventFired && (this._dispatchEvent("scroll-ended-with-threshold"), this._isScrollEndedWithThresholdEventFired = !0), this.elastic) {
                        var f = u.clone();
                        f.subtract(this._autoScrollBrakingStartPosition), n && f.multiplyScalar(_$s), u.set(this._autoScrollBrakingStartPosition), u.add(f);
                    } else {
                        var _$c = u.clone();
                        _$c.subtract(this.getContentPosition());
                        var a = this._getHowMuchOutOfBoundary(_$c);
                        a.equals(Ss.ZERO, 1e-4) || (u.add(a), o = !0);
                    }
                    o && (this._autoScrolling = !1);
                    var v = u.clone();
                    v.subtract(this.Yx()), this._clampDelta(v), this._moveContent(v, o), this._dispatchEvent("scrolling"), this._autoScrolling || (this._isBouncing = !1, this._scrolling = !1, this._dispatchEvent("scroll-ended"));
                }, n._checkMouseWheel = function(t1) {
                    this._getHowMuchOutOfBoundary().equals(Ss.ZERO, 1e-4) ? (this._mouseWheelEventElapsedTime += t1, this._mouseWheelEventElapsedTime > .1 && (this._onScrollBarTouchEnded(), this._scrolling && (this._scrolling = !1, this._autoScrolling || this._dispatchEvent("scroll-ended")), this.unschedule(this._checkMouseWheel), this._stopMouseWheel = !1)) : (this._processInertiaScroll(), this._scrolling && (this._scrolling = !1, this._autoScrolling || this._dispatchEvent("scroll-ended")), this.unschedule(this._checkMouseWheel), this._stopMouseWheel = !1);
                }, n._calculateMovePercentDelta = function(t1) {
                    var _$i = t1.anchor, n = t1.applyToHorizontal, _$s = t1.applyToVertical;
                    this._calculateBoundary(), _$i.clampf(Or.ZERO, Or.ONE);
                    var _$h = this._getContentBottomBoundary() - this._bottomBoundary;
                    _$h = -_$h;
                    var e = this._getContentLeftBoundary() - this._leftBoundary;
                    e = -e;
                    var u = new Ss;
                    if (this._content && this.view) {
                        var f = this._content.io().contentSize, _$c = this.view.contentSize;
                        n && (u.x = e - (f.width - _$c.width) * _$i.x), _$s && (u.y = _$h - (f.height - _$c.height) * _$i.y);
                    }
                    return u;
                }, n._moveContentToTopLeft = function(t1) {
                    var n = this._getContentBottomBoundary() - this._bottomBoundary;
                    n = -n;
                    var _$s = new Ss, _$h = this._getContentLeftBoundary() - this._leftBoundary;
                    if (_$h = -_$h, this._content) {
                        var e = this._content.io().contentSize;
                        e.height < t1.height && (_$s.y = n - (e.height - t1.height)), e.width < t1.width && (e.width, t1.width, _$s.x = _$h);
                    }
                    this._updateScrollBarState(), this._moveContent(_$s), this._adjustContentOutOfBoundary();
                }, n._scaleChanged = function(t1) {
                    4 === t1 && this._calculateBoundary();
                }, n._xrHoverEnter = function() {}, n._xrHoverExit = function() {}, n.Kx = function(t1) {
                    _instanceof(t1, KA) ? t1.gamepad : _instanceof(t1, JA) && t1.handleInputDevice, this.enabledInHierarchy;
                }, n._xrThumbStickMove = function(t1) {
                    if (this.enabledInHierarchy) {
                        var n = t1.y;
                        this.vertical ? Tht.set(0, -62.5 * n, 0) : this.horizontal && Tht.set(-62.5 * n, 0, 0), this._mouseWheelEventElapsedTime = 0, this._deltaAmount.add(Tht), this._stopMouseWheel || (this._handlePressLogic(), this.schedule(this._checkMouseWheel, 1 / 60, NaN, 0), this._stopMouseWheel = !0);
                    }
                }, s(i, [
                    {
                        key: "content",
                        get: function get() {
                            return this._content;
                        },
                        set: function set(t1) {
                            if (this._content !== t1) {
                                var _$i = t1 && t1.parent && t1.parent.io();
                                !t1 || t1 && _$i ? (this._content = t1, this._calculateBoundary()) : Q(4302);
                            }
                        }
                    },
                    {
                        key: "horizontalScrollBar",
                        get: function get() {
                            var _$t = this._horizontalScrollBar;
                            return _$t && !_$t.isValid && rt(4303, "horizontal", this.node.name), _$t;
                        },
                        set: function set(t1) {
                            this._horizontalScrollBar !== t1 && (this._horizontalScrollBar = t1, this._horizontalScrollBar && (this._horizontalScrollBar.setScrollView(this), this._updateScrollBar(Or.ZERO)));
                        }
                    },
                    {
                        key: "verticalScrollBar",
                        get: function get() {
                            var _$t = this._verticalScrollBar;
                            return _$t && !_$t.isValid && rt(4303, "vertical", this.node.name), _$t;
                        },
                        set: function set(t1) {
                            this._verticalScrollBar !== t1 && (this._verticalScrollBar = t1, this._verticalScrollBar && (this._verticalScrollBar.setScrollView(this), this._updateScrollBar(Or.ZERO)));
                        }
                    },
                    {
                        key: "view",
                        get: function get() {
                            var _$t = this._content && this._content.parent;
                            return _$t ? _$t.io() : null;
                        }
                    }
                ]), i;
            }(cht)).EventType = Pht, Qrt = ho(fht.prototype, "bounceDuration", [
                Ro
            ], function() {
                return 1;
            }), Zrt = ho(fht.prototype, "brake", [
                Ro
            ], function() {
                return .5;
            }), tht = ho(fht.prototype, "elastic", [
                Ro
            ], function() {
                return !0;
            }), iht = ho(fht.prototype, "inertia", [
                Ro
            ], function() {
                return !0;
            }), y(fht.prototype, "content", [
                $rt
            ], Object.getOwnPropertyDescriptor(fht.prototype, "content"), fht.prototype), nht = ho(fht.prototype, "horizontal", [
                Ro
            ], function() {
                return !0;
            }), y(fht.prototype, "horizontalScrollBar", [
                Xrt
            ], Object.getOwnPropertyDescriptor(fht.prototype, "horizontalScrollBar"), fht.prototype), sht = ho(fht.prototype, "vertical", [
                Ro
            ], function() {
                return !0;
            }), y(fht.prototype, "verticalScrollBar", [
                qrt
            ], Object.getOwnPropertyDescriptor(fht.prototype, "verticalScrollBar"), fht.prototype), rht = ho(fht.prototype, "cancelInnerEvents", [
                Ro
            ], function() {
                return !0;
            }), hht = ho(fht.prototype, "scrollEvents", [
                Yrt,
                Ro
            ], function() {
                return [];
            }), eht = ho(fht.prototype, "_content", [
                Ro
            ], function() {
                return null;
            }), uht = ho(fht.prototype, "_horizontalScrollBar", [
                Ro
            ], function() {
                return null;
            }), oht = ho(fht.prototype, "_verticalScrollBar", [
                Ro
            ], function() {
                return null;
            }), Krt = fht)) || Krt) || Krt) || Krt));
            A.ScrollView = Dht;
            var Lht = new Ss, Bht = {
                Horizontal: 0,
                Vertical: 1
            };
            function Yht() {
                for(var _$t = arguments.length, i = Array(_$t), n = 0; n < _$t; n++)i[n] = arguments[n];
                return Object.assign.apply(Object, [
                    {}
                ].concat(i));
            }
            _i(Bht), A.Slider = t1("eZ", (aht = go("cc.Slider"), vht = yo(110), lht = po(hB), dht = Zo(xF), wht = Zo(Bht), ght = Zo([
                Xg
            ]), aht(pht = vht(pht = lht(((Aht = function(t1) {
                function i() {
                    var _$i;
                    return (_$i = t1.call(this) || this).slideEvents = _ht && _ht(), _$i._handle = mht && mht(), _$i._direction = bht && bht(), _$i._progress = kht && kht(), _$i.Ir = new Ss, _$i.Jx = !1, _$i.Qx = !1, _$i.Zx = new Ss, _$i.tj = new Ss, _$i;
                }
                h(i, t1);
                var n = i.prototype;
                return n.__preload = function() {
                    this._updateHandlePosition();
                }, n.onEnable = function() {
                    var _$i = this.node, n = this._handle;
                    if (this._updateHandlePosition(), _$i.on("touch-start", this._onTouchBegan, this), _$i.on("touch-move", this._onTouchMoved, this), _$i.on("touch-end", this._onTouchEnded, this), _$i.on("touch-cancel", this._onTouchCancelled, this), n && n.isValid) {
                        var _$s = n.node;
                        _$s.on("touch-start", this._onHandleDragStart, this), _$s.on("touch-move", this._onTouchMoved, this), _$s.on("touch-end", this._onTouchEnded, this);
                    }
                }, n.onDisable = function() {
                    var _$i = this.node, n = this._handle;
                    if (_$i.off("touch-start", this._onTouchBegan, this), _$i.off("touch-move", this._onTouchMoved, this), _$i.off("touch-end", this._onTouchEnded, this), _$i.off("touch-cancel", this._onTouchCancelled, this), n && n.isValid) {
                        var _$s = n.node;
                        _$s.off("touch-start", this._onHandleDragStart, this), _$s.off("touch-move", this._onTouchMoved, this), _$s.off("touch-end", this._onTouchEnded, this);
                    }
                }, n._onHandleDragStart = function(t1) {
                    if (t1 && this._handle && this._handle.node.io()) {
                        this.Jx = !0, this.Qx = !0;
                        var _$i = t1.touch.getUILocation();
                        Ss.set(this.tj, _$i.x, _$i.y, 0), this._handle.node.io().convertToNodeSpaceAR(this.tj, this.Ir), t1.propagationStopped = !0;
                    }
                }, n._onTouchBegan = function(t1) {
                    this._handle && t1 && (this.Jx = !0, this.Qx || this._handleSliderLogic(t1.touch), t1.propagationStopped = !0);
                }, n._onTouchMoved = function(t1) {
                    this.Jx && t1 && (this._handleSliderLogic(t1.touch), t1.propagationStopped = !0);
                }, n._onTouchEnded = function(t1) {
                    this.Jx = !1, this.Qx = !1, this.Ir = new Ss, t1 && (t1.propagationStopped = !0);
                }, n._onTouchCancelled = function(t1) {
                    this.Jx = !1, t1 && (t1.propagationStopped = !0);
                }, n._handleSliderLogic = function(t1) {
                    this._updateProgress(t1), this._emitSlideEvent();
                }, n._emitSlideEvent = function() {
                    Xg.emitEvents(this.slideEvents, this), this.node.emit("slide", this);
                }, n._updateProgress = function(t1) {
                    if (this._handle && t1) {
                        var _$i = t1.getUILocation();
                        Ss.set(this.tj, _$i.x, _$i.y, 0);
                        var n = this.node.io(), _$s = n.convertToNodeSpaceAR(this.tj, Lht);
                        0 === this.direction ? this.progress = xn(.5 + (_$s.x - this.Ir.x) / n.width) : this.progress = xn(.5 + (_$s.y - this.Ir.y) / n.height);
                    }
                }, n._updateHandlePosition = function() {
                    if (this._handle) {
                        this.Zx.set(this._handle.node.position);
                        var _$t = this.node.io();
                        0 === this._direction ? this.Zx.x = -_$t.width * _$t.anchorX + this.progress * _$t.width : this.Zx.y = -_$t.height * _$t.anchorY + this.progress * _$t.height, this._handle.node.setPosition(this.Zx);
                    }
                }, n.ij = function() {
                    var _$t = this.node.io(), _$i = _$t.contentSize;
                    if (_$t.setContentSize(_$i.height, _$i.width), this._handle) {
                        var n = this._handle.node.position;
                        0 === this._direction ? this._handle.node.setPosition(n.x, 0, n.z) : this._handle.node.setPosition(0, n.y, n.z), this._updateHandlePosition();
                    }
                }, n._xrHandleProgress = function() {}, n._xrClick = function() {}, n._xrUnClick = function() {}, n._xrHoverStay = function() {}, s(i, [
                    {
                        key: "handle",
                        get: function get() {
                            return this._handle;
                        },
                        set: function set(t1) {
                            this._handle !== t1 && (this._handle = t1);
                        }
                    },
                    {
                        key: "direction",
                        get: function get() {
                            return this._direction;
                        },
                        set: function set(t1) {
                            this._direction !== t1 && (this._direction = t1, this.ij());
                        }
                    },
                    {
                        key: "progress",
                        get: function get() {
                            return this._progress;
                        },
                        set: function set(t1) {
                            this._progress !== t1 && (this._progress = t1, this._updateHandlePosition());
                        }
                    }
                ]), i;
            }(Yg)).Direction = Bht, y(Aht.prototype, "handle", [
                dht
            ], Object.getOwnPropertyDescriptor(Aht.prototype, "handle"), Aht.prototype), y(Aht.prototype, "direction", [
                wht
            ], Object.getOwnPropertyDescriptor(Aht.prototype, "direction"), Aht.prototype), _ht = ho(Aht.prototype, "slideEvents", [
                ght,
                Ro
            ], function() {
                return [];
            }), mht = ho(Aht.prototype, "_handle", [
                Ro
            ], function() {
                return null;
            }), bht = ho(Aht.prototype, "_direction", [
                Ro
            ], function() {
                return 0;
            }), kht = ho(Aht.prototype, "_progress", [
                Ro
            ], function() {
                return .1;
            }), pht = Aht)) || pht) || pht) || pht));
            var Fht, Uht, xht, jht, Ght, Hht, Wht, zht, $ht, Xht, Kht, Jht, Qht, Zht, tet, iet, net, set = t1("e_", (Fht = go("cc.Toggle"), Uht = yo(110), xht = po(hB), jht = Zo(xF), Ght = Zo([
                Xg
            ]), Fht(Hht = Uht(Hht = xht(((Xht = function(t1) {
                function i() {
                    var _$i;
                    return (_$i = t1.call(this) || this).checkEvents = Wht && Wht(), _$i._isChecked = zht && zht(), _$i._checkMark = $ht && $ht(), _$i;
                }
                h(i, t1);
                var n = i.prototype;
                return n._internalToggle = function() {
                    this.isChecked = !this.isChecked;
                }, n._set = function(t1, i) {
                    if (void 0 === i && (i = !0), this._isChecked != t1) {
                        this._isChecked = t1;
                        var n = this._toggleContainer;
                        n && n.enabled && this.enabled && (t1 || !n.anyTogglesChecked() && !n.allowSwitchOff) && (this._isChecked = !0, n.notifyToggleCheck(this, i)), this.playEffect(), i && this._emitToggleEvents();
                    }
                }, n.playEffect = function() {
                    this._checkMark && (this._checkMark.node.active = this._isChecked);
                }, n.setIsCheckedWithoutNotify = function(t1) {
                    this._set(t1, !1);
                }, n.onEnable = function() {
                    t1.prototype.onEnable.call(this), this.playEffect(), this.node.on(i.EventType.CLICK, this._internalToggle, this);
                }, n.onDisable = function() {
                    t1.prototype.onDisable.call(this), this.node.off(i.EventType.CLICK, this._internalToggle, this);
                }, n._emitToggleEvents = function() {
                    this.node.emit(i.EventType.TOGGLE, this), this.checkEvents && Xg.emitEvents(this.checkEvents, this);
                }, s(i, [
                    {
                        key: "isChecked",
                        get: function get() {
                            return this._isChecked;
                        },
                        set: function set(t1) {
                            this._set(t1);
                        }
                    },
                    {
                        key: "checkMark",
                        get: function get() {
                            return this._checkMark;
                        },
                        set: function set(t1) {
                            this._checkMark !== t1 && (this._checkMark = t1);
                        }
                    },
                    {
                        key: "_resizeToTarget",
                        set: function set(t1) {
                            t1 && this._resizeNodeToTargetNode();
                        }
                    },
                    {
                        key: "_toggleContainer",
                        get: function get() {
                            var _$t = this.node.parent;
                            return A.Node.isNode(_$t) ? _$t.getComponent("cc.ToggleContainer") : null;
                        }
                    }
                ]), i;
            }(Lnt)).EventType = Yht({
                TOGGLE: "toggle"
            }, Dnt), y(Xht.prototype, "checkMark", [
                jht
            ], Object.getOwnPropertyDescriptor(Xht.prototype, "checkMark"), Xht.prototype), Wht = ho(Xht.prototype, "checkEvents", [
                Ght,
                Ro
            ], function() {
                return [];
            }), zht = ho(Xht.prototype, "_isChecked", [
                Ro
            ], function() {
                return !0;
            }), $ht = ho(Xht.prototype, "_checkMark", [
                Ro
            ], function() {
                return null;
            }), Hht = Xht)) || Hht) || Hht) || Hht));
            A.Toggle = set;
            var ret, het, eet, uet, oet, fet, aet, vet, det, wet, get, pet, yet, _et, met, bet, ket, Aet, Eet, Tet, Oet, Iet, Ret, Met, Cet, Net = t1("e$", (Kht = go("cc.ToggleContainer"), Jht = yo(110), Qht = Zo([
                Xg
            ]), Kht(Zht = Jht((iet = ho((tet = function(t1) {
                function i() {
                    var _$i;
                    return (_$i = t1.call(this) || this)._allowSwitchOff = iet && iet(), _$i.checkEvents = net && net(), _$i;
                }
                h(i, t1);
                var n = i.prototype;
                return n.onEnable = function() {
                    this.ensureValidState(), this.node.on("child-added", this.ensureValidState, this), this.node.on("child-removed", this.ensureValidState, this);
                }, n.onDisable = function() {
                    this.node.off("child-added", this.ensureValidState, this), this.node.off("child-removed", this.ensureValidState, this);
                }, n.activeToggles = function() {
                    return this.toggleItems.filter(function(t1) {
                        return t1.isChecked;
                    });
                }, n.anyTogglesChecked = function() {
                    return !!this.toggleItems.find(function(t1) {
                        return t1.isChecked;
                    });
                }, n.notifyToggleCheck = function(t1, i) {
                    if (void 0 === i && (i = !0), this.enabledInHierarchy) {
                        for(var n = 0; n < this.toggleItems.length; n++){
                            var _$s = this.toggleItems[n];
                            _$s !== t1 && (i ? _$s.isChecked = !1 : _$s.setIsCheckedWithoutNotify(!1));
                        }
                        this.checkEvents && A.Component.EventHandler.emitEvents(this.checkEvents, t1);
                    }
                }, n.ensureValidState = function() {
                    var _$t = this.toggleItems;
                    if (!this._allowSwitchOff && !this.anyTogglesChecked() && 0 !== _$t.length) {
                        var _$i = _$t[0];
                        _$i.isChecked = !0, this.notifyToggleCheck(_$i);
                    }
                    var n = this.activeToggles();
                    if (n.length > 1) for(var _$s = n[0], _$r = 0; _$r < n.length; ++_$r){
                        var _$h = n[_$r];
                        _$h !== _$s && (_$h.isChecked = !1);
                    }
                }, s(i, [
                    {
                        key: "allowSwitchOff",
                        get: function get() {
                            return this._allowSwitchOff;
                        },
                        set: function set(t1) {
                            this._allowSwitchOff = t1;
                        }
                    },
                    {
                        key: "toggleItems",
                        get: function get() {
                            return this.node.children.map(function(t1) {
                                var _$i = t1.getComponent("cc.Toggle");
                                return _$i && _$i.enabled ? _$i : null;
                            }).filter(Boolean);
                        }
                    }
                ]), i;
            }(Yg)).prototype, "_allowSwitchOff", [
                Ro
            ], function() {
                return !1;
            }), net = ho(tet.prototype, "checkEvents", [
                Qht,
                Ro
            ], function() {
                return [];
            }), Zht = tet)) || Zht) || Zht));
            A.ToggleContainer = Net;
            var Pet = new Or;
            function Det(t1) {
                var i = t1.io();
                return _instanceof(t1, _R) ? me : i ? i.contentSize : Zr.ZERO;
            }
            function Let(t1, i, n, s) {
                t1.parent ? Pet.set(t1.parent.scale.x, t1.parent.scale.y) : Pet.set(0, 0);
                for(var _$r = Pet.x, h = Pet.y, e = 0, u = 0, o = t1.parent;;){
                    if (!o) return n.x = n.y = 0, void (s.x = s.y = 1);
                    var f = o.position;
                    if (e += f.x, u += f.y, (o = o.parent) === i) break;
                    o ? Pet.set(o.scale.x, o.scale.y) : Pet.set(0, 0);
                    var _$c = Pet.x, a = Pet.y;
                    e *= _$c, u *= a, _$r *= _$c, h *= a;
                }
                s.x = 0 !== _$r ? 1 / _$r : 1, s.y = 0 !== h ? 1 / h : 1, n.x = -e, n.y = -u;
            }
            var Bet = {
                ONCE: 0,
                ALWAYS: 1,
                ON_WINDOW_RESIZE: 2
            };
            _i(Bet);
            var Fet, Uet, xet, jet, Get, Het, Wet, zet, $et, Xet, qet, Yet = {
                TOP: 1,
                MID: 2,
                BOT: 4,
                LEFT: 8,
                CENTER: 16,
                RIGHT: 32,
                HORIZONTAL: 56,
                VERTICAL: 7
            }, Ket = t1("f1", (ret = go("cc.Widget"), het = yo(110), eet = po(hB), uet = Zo(VE), oet = Zo(Bet), ret(fet = het(fet = eet(((Cet = function(t1) {
                function i() {
                    var _$i;
                    return (_$i = t1.call(this) || this)._lastPos = new Ss, _$i._lastSize = new Zr, _$i._dirty = !0, _$i._hadAlignOnce = !1, _$i._alignFlags = aet && aet(), _$i._target = vet && vet(), _$i._left = det && det(), _$i._right = wet && wet(), _$i._top = get && get(), _$i._bottom = pet && pet(), _$i._horizontalCenter = yet && yet(), _$i._verticalCenter = _et && _et(), _$i._isAbsLeft = met && met(), _$i._isAbsRight = bet && bet(), _$i._isAbsTop = ket && ket(), _$i._isAbsBottom = Aet && Aet(), _$i._isAbsHorizontalCenter = Eet && Eet(), _$i._isAbsVerticalCenter = Tet && Tet(), _$i._originalWidth = Oet && Oet(), _$i._originalHeight = Iet && Iet(), _$i._alignMode = Ret && Ret(), _$i._lockFlags = Met && Met(), _$i;
                }
                h(i, t1);
                var n = i.prototype;
                return n.updateAlignment = function() {
                    A._widgetManager.updateAlignment(this.node);
                }, n._validateTargetInDEV = function() {}, n.setDirty = function() {
                    this.nj();
                }, n.onEnable = function() {
                    this.node.getPosition(this._lastPos), this._lastSize.set(this.node.io().contentSize), A._widgetManager.add(this), this._hadAlignOnce = !1, this._registerEvent(), this._registerTargetEvents();
                }, n.onDisable = function() {
                    A._widgetManager.remove(this), this._unregisterEvent(), this._unregisterTargetEvents();
                }, n.onDestroy = function() {
                    this._removeParentEvent();
                }, n._adjustWidgetToAllowMovingInEditor = function() {}, n._adjustWidgetToAllowResizingInEditor = function() {}, n._adjustWidgetToAnchorChanged = function() {
                    this.setDirty();
                }, n._adjustTargetToParentChanged = function(t1) {
                    t1 && this._unregisterOldParentEvents(t1), this.node.getParent() && this._registerTargetEvents(), this._setDirtyByMode();
                }, n._registerEvent = function() {
                    this.node.on("transform-changed", this._setDirtyByMode, this), this.node.on("size-changed", this._setDirtyByMode, this), this.node.on("anchor-changed", this._adjustWidgetToAnchorChanged, this), this.node.on("parent-changed", this._adjustTargetToParentChanged, this);
                }, n._unregisterEvent = function() {
                    this.node.off("transform-changed", this._setDirtyByMode, this), this.node.off("size-changed", this._setDirtyByMode, this), this.node.off("anchor-changed", this._adjustWidgetToAnchorChanged, this);
                }, n._removeParentEvent = function() {
                    this.node.off("parent-changed", this._adjustTargetToParentChanged, this);
                }, n._autoChangedValue = function(t1, i) {
                    if ((this._alignFlags & t1) > 0) {
                        var n = this.node.parent && this.node.parent._uiProps, _$s = n && n.uiTransformComp, _$r = _$s ? _$s.contentSize : me;
                        this.isAlignLeft && 8 === t1 ? this._left = i ? this._left * _$r.width : this._left / _$r.width : this.isAlignRight && 32 === t1 ? this._right = i ? this._right * _$r.width : this._right / _$r.width : this.isAlignHorizontalCenter && 16 === t1 ? this._horizontalCenter = i ? this._horizontalCenter * _$r.width : this._horizontalCenter / _$r.width : this.isAlignTop && 1 === t1 ? this._top = i ? this._top * _$r.height : this._top / _$r.height : this.isAlignBottom && 4 === t1 ? this._bottom = i ? this._bottom * _$r.height : this._bottom / _$r.height : this.isAbsoluteVerticalCenter && 2 === t1 && (this._verticalCenter = this._verticalCenter / _$r.height), this.nj();
                    }
                }, n._registerTargetEvents = function() {
                    var _$t = this._target || this.node.parent;
                    _$t && _$t.getComponent(hB) && (_$t.on("transform-changed", this._setDirtyByMode, this), _$t.on("size-changed", this._setDirtyByMode, this), _$t.on("anchor-changed", this._setDirtyByMode, this));
                }, n._unregisterTargetEvents = function() {
                    var _$t = this._target || this.node.parent;
                    _$t && (_$t.off("transform-changed", this._setDirtyByMode, this), _$t.off("size-changed", this._setDirtyByMode, this), _$t.off("anchor-changed", this._setDirtyByMode, this));
                }, n._unregisterOldParentEvents = function(t1) {
                    var _$i = this._target || t1;
                    _$i && (_$i.off("transform-changed", this._setDirtyByMode, this), _$i.off("size-changed", this._setDirtyByMode, this), _$i.off("anchor-changed", this._setDirtyByMode, this));
                }, n._setDirtyByMode = function() {
                    1 === this.alignMode && this.nj();
                }, n.sj = function(t1, i) {
                    if (i !== (this._alignFlags & t1) > 0) {
                        var n = (40 & t1) > 0, _$s = this.node.io();
                        i ? (this._alignFlags |= t1, n ? (this.isAlignHorizontalCenter = !1, this.isStretchWidth && (this._originalWidth = _$s.width)) : (this.isAlignVerticalCenter = !1, this.isStretchHeight && (this._originalHeight = _$s.height))) : (n ? this.isStretchWidth && (_$s.width = this._originalWidth) : this.isStretchHeight && (_$s.height = this._originalHeight), this._alignFlags &= ~t1);
                    }
                }, n.nj = function() {
                    this._dirty || (this._dirty = !0);
                }, s(i, [
                    {
                        key: "target",
                        get: function get() {
                            return this._target;
                        },
                        set: function set(t1) {
                            this._target !== t1 && (this._unregisterTargetEvents(), this._target = t1, this._registerTargetEvents(), this._validateTargetInDEV(), this.nj());
                        }
                    },
                    {
                        key: "isAlignTop",
                        get: function get() {
                            return (1 & this._alignFlags) > 0;
                        },
                        set: function set(t1) {
                            this.sj(1, t1), this.nj();
                        }
                    },
                    {
                        key: "isAlignBottom",
                        get: function get() {
                            return (4 & this._alignFlags) > 0;
                        },
                        set: function set(t1) {
                            this.sj(4, t1), this.nj();
                        }
                    },
                    {
                        key: "isAlignLeft",
                        get: function get() {
                            return (8 & this._alignFlags) > 0;
                        },
                        set: function set(t1) {
                            this.sj(8, t1), this.nj();
                        }
                    },
                    {
                        key: "isAlignRight",
                        get: function get() {
                            return (32 & this._alignFlags) > 0;
                        },
                        set: function set(t1) {
                            this.sj(32, t1), this.nj();
                        }
                    },
                    {
                        key: "isAlignVerticalCenter",
                        get: function get() {
                            return (2 & this._alignFlags) > 0;
                        },
                        set: function set(t1) {
                            t1 ? (this.isAlignTop = !1, this.isAlignBottom = !1, this._alignFlags |= 2) : this._alignFlags &= -3, this.nj();
                        }
                    },
                    {
                        key: "isAlignHorizontalCenter",
                        get: function get() {
                            return (16 & this._alignFlags) > 0;
                        },
                        set: function set(t1) {
                            t1 ? (this.isAlignLeft = !1, this.isAlignRight = !1, this._alignFlags |= 16) : this._alignFlags &= -17, this.nj();
                        }
                    },
                    {
                        key: "isStretchWidth",
                        get: function get() {
                            return !(40 & ~this._alignFlags);
                        }
                    },
                    {
                        key: "isStretchHeight",
                        get: function get() {
                            return !(5 & ~this._alignFlags);
                        }
                    },
                    {
                        key: "top",
                        get: function get() {
                            return this._top;
                        },
                        set: function set(t1) {
                            this._top = t1, this.nj();
                        }
                    },
                    {
                        key: "editorTop",
                        get: function get() {
                            return this._isAbsTop ? this._top : 100 * this._top;
                        },
                        set: function set(t1) {
                            this._top = this._isAbsTop ? t1 : t1 / 100, this.nj();
                        }
                    },
                    {
                        key: "bottom",
                        get: function get() {
                            return this._bottom;
                        },
                        set: function set(t1) {
                            this._bottom = t1, this.nj();
                        }
                    },
                    {
                        key: "editorBottom",
                        get: function get() {
                            return this._isAbsBottom ? this._bottom : 100 * this._bottom;
                        },
                        set: function set(t1) {
                            this._bottom = this._isAbsBottom ? t1 : t1 / 100, this.nj();
                        }
                    },
                    {
                        key: "left",
                        get: function get() {
                            return this._left;
                        },
                        set: function set(t1) {
                            this._left = t1, this.nj();
                        }
                    },
                    {
                        key: "editorLeft",
                        get: function get() {
                            return this._isAbsLeft ? this._left : 100 * this._left;
                        },
                        set: function set(t1) {
                            this._left = this._isAbsLeft ? t1 : t1 / 100, this.nj();
                        }
                    },
                    {
                        key: "right",
                        get: function get() {
                            return this._right;
                        },
                        set: function set(t1) {
                            this._right = t1, this.nj();
                        }
                    },
                    {
                        key: "editorRight",
                        get: function get() {
                            return this._isAbsRight ? this._right : 100 * this._right;
                        },
                        set: function set(t1) {
                            this._right = this._isAbsRight ? t1 : t1 / 100, this.nj();
                        }
                    },
                    {
                        key: "horizontalCenter",
                        get: function get() {
                            return this._horizontalCenter;
                        },
                        set: function set(t1) {
                            this._horizontalCenter = t1, this.nj();
                        }
                    },
                    {
                        key: "editorHorizontalCenter",
                        get: function get() {
                            return this._isAbsHorizontalCenter ? this._horizontalCenter : 100 * this._horizontalCenter;
                        },
                        set: function set(t1) {
                            this._horizontalCenter = this._isAbsHorizontalCenter ? t1 : t1 / 100, this.nj();
                        }
                    },
                    {
                        key: "verticalCenter",
                        get: function get() {
                            return this._verticalCenter;
                        },
                        set: function set(t1) {
                            this._verticalCenter = t1, this.nj();
                        }
                    },
                    {
                        key: "editorVerticalCenter",
                        get: function get() {
                            return this._isAbsVerticalCenter ? this._verticalCenter : 100 * this._verticalCenter;
                        },
                        set: function set(t1) {
                            this._verticalCenter = this._isAbsVerticalCenter ? t1 : t1 / 100, this.nj();
                        }
                    },
                    {
                        key: "isAbsoluteTop",
                        get: function get() {
                            return this._isAbsTop;
                        },
                        set: function set(t1) {
                            this._isAbsTop !== t1 && (this._isAbsTop = t1, this._autoChangedValue(1, this._isAbsTop));
                        }
                    },
                    {
                        key: "isAbsoluteBottom",
                        get: function get() {
                            return this._isAbsBottom;
                        },
                        set: function set(t1) {
                            this._isAbsBottom !== t1 && (this._isAbsBottom = t1, this._autoChangedValue(4, this._isAbsBottom));
                        }
                    },
                    {
                        key: "isAbsoluteLeft",
                        get: function get() {
                            return this._isAbsLeft;
                        },
                        set: function set(t1) {
                            this._isAbsLeft !== t1 && (this._isAbsLeft = t1, this._autoChangedValue(8, this._isAbsLeft));
                        }
                    },
                    {
                        key: "isAbsoluteRight",
                        get: function get() {
                            return this._isAbsRight;
                        },
                        set: function set(t1) {
                            this._isAbsRight !== t1 && (this._isAbsRight = t1, this._autoChangedValue(32, this._isAbsRight));
                        }
                    },
                    {
                        key: "isAbsoluteHorizontalCenter",
                        get: function get() {
                            return this._isAbsHorizontalCenter;
                        },
                        set: function set(t1) {
                            this._isAbsHorizontalCenter !== t1 && (this._isAbsHorizontalCenter = t1, this._autoChangedValue(16, this._isAbsHorizontalCenter));
                        }
                    },
                    {
                        key: "isAbsoluteVerticalCenter",
                        get: function get() {
                            return this._isAbsVerticalCenter;
                        },
                        set: function set(t1) {
                            this._isAbsVerticalCenter !== t1 && (this._isAbsVerticalCenter = t1, this._autoChangedValue(2, this._isAbsVerticalCenter));
                        }
                    },
                    {
                        key: "alignMode",
                        get: function get() {
                            return this._alignMode;
                        },
                        set: function set(t1) {
                            this._alignMode = t1, this.nj();
                        }
                    },
                    {
                        key: "alignFlags",
                        get: function get() {
                            return this._alignFlags;
                        },
                        set: function set(t1) {
                            this._alignFlags !== t1 && (this._alignFlags = t1, this.nj());
                        }
                    }
                ]), i;
            }(Yg)).AlignMode = Bet, y(Cet.prototype, "target", [
                uet
            ], Object.getOwnPropertyDescriptor(Cet.prototype, "target"), Cet.prototype), y(Cet.prototype, "alignMode", [
                oet
            ], Object.getOwnPropertyDescriptor(Cet.prototype, "alignMode"), Cet.prototype), aet = ho(Cet.prototype, "_alignFlags", [
                Ro
            ], function() {
                return 0;
            }), vet = ho(Cet.prototype, "_target", [
                Ro
            ], function() {
                return null;
            }), det = ho(Cet.prototype, "_left", [
                Ro
            ], function() {
                return 0;
            }), wet = ho(Cet.prototype, "_right", [
                Ro
            ], function() {
                return 0;
            }), get = ho(Cet.prototype, "_top", [
                Ro
            ], function() {
                return 0;
            }), pet = ho(Cet.prototype, "_bottom", [
                Ro
            ], function() {
                return 0;
            }), yet = ho(Cet.prototype, "_horizontalCenter", [
                Ro
            ], function() {
                return 0;
            }), _et = ho(Cet.prototype, "_verticalCenter", [
                Ro
            ], function() {
                return 0;
            }), met = ho(Cet.prototype, "_isAbsLeft", [
                Ro
            ], function() {
                return !0;
            }), bet = ho(Cet.prototype, "_isAbsRight", [
                Ro
            ], function() {
                return !0;
            }), ket = ho(Cet.prototype, "_isAbsTop", [
                Ro
            ], function() {
                return !0;
            }), Aet = ho(Cet.prototype, "_isAbsBottom", [
                Ro
            ], function() {
                return !0;
            }), Eet = ho(Cet.prototype, "_isAbsHorizontalCenter", [
                Ro
            ], function() {
                return !0;
            }), Tet = ho(Cet.prototype, "_isAbsVerticalCenter", [
                Ro
            ], function() {
                return !0;
            }), Oet = ho(Cet.prototype, "_originalWidth", [
                Ro
            ], function() {
                return 0;
            }), Iet = ho(Cet.prototype, "_originalHeight", [
                Ro
            ], function() {
                return 0;
            }), Ret = ho(Cet.prototype, "_alignMode", [
                Ro
            ], function() {
                return 2;
            }), Met = ho(Cet.prototype, "_lockFlags", [
                Ro,
                Co
            ], function() {
                return 0;
            }), fet = Cet)) || fet) || fet) || fet));
            A.internal.computeInverseTransForTarget = Let, A.internal.getReadonlyNodeSize = Det, A.Widget = Ket;
            var Jet = new Yr, Qet = {
                HORIZONTAL: 0,
                VERTICAL: 1
            };
            _i(Qet);
            var Zet, tut, iut, nut, sut, rut, hut, eut, uut, out, cut, aut, vut, lut, dut, wut, gut, put, yut, _ut, mut, but, kut, Aut = t1("f3", (Fet = go("cc.PageViewIndicator"), Uet = yo(110), xet = Zo(sD), jet = Zo(Qet), Get = Zo(Zr), Fet(Het = Uet(((qet = function(t1) {
                function i() {
                    var _$i;
                    return (_$i = t1.call(this) || this).spacing = Wet && Wet(), _$i._spriteFrame = zet && zet(), _$i._direction = $et && $et(), _$i._cellSize = Xet && Xet(), _$i._layout = null, _$i._pageView = null, _$i._indicators = [], _$i;
                }
                h(i, t1);
                var n = i.prototype;
                return n.onLoad = function() {
                    this._updateLayout();
                }, n.setPageView = function(t1) {
                    this._pageView = t1, this._refresh();
                }, n._updateLayout = function() {
                    this._layout = this.getComponent(yrt), this._layout || (this._layout = this.addComponent(yrt));
                    var _$t = this._layout;
                    0 === this.direction ? (_$t.type = 1, _$t.spacingX = this.spacing) : 1 === this.direction && (_$t.type = 2, _$t.spacingY = this.spacing), _$t.resizeMode = 1;
                }, n._createIndicator = function() {
                    var _$t = new VE;
                    _$t.layer = this.node.layer;
                    var _$i = _$t.addComponent(xF);
                    return _$i.spriteFrame = this.spriteFrame, _$i.sizeMode = 0, _$t.parent = this.node, _$t.io().setContentSize(this._cellSize), _$t;
                }, n._changedState = function() {
                    var _$t = this._indicators;
                    if (0 !== _$t.length && this._pageView) {
                        var _$i = this._pageView.curPageIdx;
                        if (!(_$i >= _$t.length)) {
                            for(var n = 0; n < _$t.length; ++n){
                                var _$s = _$t[n];
                                if (_$s._uiProps.uiComp) {
                                    var _$r = _$s._uiProps.uiComp;
                                    Jet.set(_$r.color), Jet.a = 127.5, _$r.color = Jet;
                                }
                            }
                            if (_$t[_$i]._uiProps.uiComp) {
                                var _$h = _$t[_$i]._uiProps.uiComp;
                                Jet.set(_$h.color), Jet.a = 255, _$h.color = Jet;
                            }
                        }
                    }
                }, n._refresh = function() {
                    if (this._pageView) {
                        var _$t = this._indicators, _$i = this._pageView.getPages();
                        if (_$i.length !== _$t.length) {
                            var n = 0;
                            if (_$i.length > _$t.length) for(n = 0; n < _$i.length; ++n)_$t[n] || (_$t[n] = this._createIndicator());
                            else for(n = _$t.length - _$i.length; n > 0; --n){
                                var _$s = _$t[n - 1];
                                this.node.removeChild(_$s), _$t.splice(n - 1, 1);
                            }
                            this._layout && this._layout.enabledInHierarchy && this._layout.updateLayout(), this._changedState();
                        }
                    }
                }, s(i, [
                    {
                        key: "spriteFrame",
                        get: function get() {
                            return this._spriteFrame;
                        },
                        set: function set(t1) {
                            this._spriteFrame !== t1 && (this._spriteFrame = t1);
                        }
                    },
                    {
                        key: "direction",
                        get: function get() {
                            return this._direction;
                        },
                        set: function set(t1) {
                            this._direction !== t1 && (this._direction = t1);
                        }
                    },
                    {
                        key: "cellSize",
                        get: function get() {
                            return this._cellSize;
                        },
                        set: function set(t1) {
                            this._cellSize !== t1 && (this._cellSize = t1);
                        }
                    }
                ]), i;
            }(Yg)).Direction = Qet, y(qet.prototype, "spriteFrame", [
                xet
            ], Object.getOwnPropertyDescriptor(qet.prototype, "spriteFrame"), qet.prototype), y(qet.prototype, "direction", [
                jet
            ], Object.getOwnPropertyDescriptor(qet.prototype, "direction"), qet.prototype), y(qet.prototype, "cellSize", [
                Get
            ], Object.getOwnPropertyDescriptor(qet.prototype, "cellSize"), qet.prototype), Wet = ho(qet.prototype, "spacing", [
                Ro
            ], function() {
                return 0;
            }), zet = ho(qet.prototype, "_spriteFrame", [
                Ro
            ], function() {
                return null;
            }), $et = ho(qet.prototype, "_direction", [
                Ro
            ], function() {
                return 0;
            }), Xet = ho(qet.prototype, "_cellSize", [
                Ro
            ], function() {
                return new Zr(20, 20);
            }), Het = qet)) || Het) || Het));
            A.PageViewIndicator = Aut;
            var Eut = new Or, Tut = {
                Unified: 0,
                Free: 1
            };
            _i(Tut);
            var Sut = {
                HORIZONTAL: 0,
                VERTICAL: 1
            };
            _i(Sut), A.PageView = t1("f2", (Zet = go("cc.PageView"), tut = yo(110), iut = Zo(Tut), nut = Zo(Sut), sut = Zo(Aut), rut = Zo(Hrt), hut = Zo(Hrt), eut = Zo([
                Xg
            ]), uut = Zo([
                Xg
            ]), Zet(out = tut(((kut = function(t1) {
                function i() {
                    var _$i;
                    return (_$i = t1.call(this) || this).autoPageTurningThreshold = cut && cut(), _$i.horizontal = aut && aut(), _$i.vertical = vut && vut(), _$i.cancelInnerEvents = lut && lut(), _$i.scrollEvents = dut && dut(), _$i.pageTurningSpeed = wut && wut(), _$i.pageEvents = gut && gut(), _$i._sizeMode = put && put(), _$i._direction = yut && yut(), _$i._scrollThreshold = _ut && _ut(), _$i._pageTurningEventTiming = mut && mut(), _$i._indicator = but && but(), _$i._curPageIdx = 0, _$i._lastPageIdx = 0, _$i._pages = [], _$i._initContentPos = Os(), _$i._scrollCenterOffsetX = [], _$i._scrollCenterOffsetY = [], _$i._touchBeganPosition = Ir(), _$i._touchEndPosition = Ir(), _$i;
                }
                h(i, t1);
                var n = i.prototype;
                return n.onEnable = function() {
                    t1.prototype.onEnable.call(this), this.node.on("size-changed", this._updateAllPagesSize, this), this.node.on(i.EventType.SCROLL_ENG_WITH_THRESHOLD, this._dispatchPageTurningEvent, this);
                }, n.onDisable = function() {
                    t1.prototype.onDisable.call(this), this.node.off("size-changed", this._updateAllPagesSize, this), this.node.off(i.EventType.SCROLL_ENG_WITH_THRESHOLD, this._dispatchPageTurningEvent, this);
                }, n.onLoad = function() {
                    this._initPages(), this.indicator && this.indicator.setPageView(this);
                }, n.getCurrentPageIndex = function() {
                    return this._curPageIdx;
                }, n.setCurrentPageIndex = function(t1) {
                    this.scrollToPage(t1, 1);
                }, n.getPages = function() {
                    return this._pages;
                }, n.addPage = function(t1) {
                    t1 && -1 === this._pages.indexOf(t1) && this.content && (t1.io() ? (this.content.addChild(t1), this._pages.push(t1), this._updatePageView()) : Q(4301));
                }, n.insertPage = function(t1, i) {
                    if (!(i < 0) && t1 && -1 === this._pages.indexOf(t1) && this.content) if (i >= this._pages.length) this.addPage(t1);
                    else {
                        if (!t1.io()) return void Q(4301);
                        this._pages.splice(i, 0, t1), this.content.insertChild(t1, i), this._updatePageView();
                    }
                }, n.removePage = function(t1) {
                    if (t1 && this.content) {
                        var _$i = this._pages.indexOf(t1);
                        -1 !== _$i ? this.removePageAtIndex(_$i) : nt(4300, t1.name);
                    }
                }, n.removePageAtIndex = function(t1) {
                    var _$i = this._pages;
                    if (!(t1 < 0 || t1 >= _$i.length)) {
                        var n = _$i[t1];
                        n && this.content && (this.content.removeChild(n), _$i.splice(t1, 1), this._updatePageView());
                    }
                }, n.removeAllPages = function() {
                    if (this.content) {
                        for(var _$t = this._pages, _$i = 0, n = _$t.length; _$i < n; _$i++)this.content.removeChild(_$t[_$i]);
                        this._pages.length = 0, this._updatePageView();
                    }
                }, n.scrollToPage = function(t1, i) {
                    void 0 === i && (i = .3), t1 < 0 || t1 >= this._pages.length || (this._curPageIdx = t1, this.scrollToOffset(this._moveOffsetValue(t1), i, !0), this.indicator && this.indicator._changedState());
                }, n.getScrollEndedEventTiming = function() {
                    return this.pageTurningEventTiming;
                }, n._updatePageView = function() {
                    if (this.content) {
                        var _$t = this.content.getComponent(yrt);
                        _$t && _$t.enabled && _$t.updateLayout();
                        var _$i = this._pages.length;
                        this._curPageIdx >= _$i && (this._curPageIdx = 0 === _$i ? 0 : _$i - 1, this._lastPageIdx = this._curPageIdx);
                        for(var n = this._initContentPos, _$s = 0; _$s < _$i; ++_$s){
                            var _$r = this._pages[_$s].position;
                            0 === this.direction ? this._scrollCenterOffsetX[_$s] = Math.abs(n.x + _$r.x) : this._scrollCenterOffsetY[_$s] = Math.abs(n.y + _$r.y);
                        }
                        this.indicator && this.indicator._refresh();
                    }
                }, n._updateAllPagesSize = function() {
                    var _$t = this.view;
                    if (this.content && _$t && 0 === this._sizeMode) for(var _$i = this._pages, n = _$t.contentSize, _$s = 0, _$r = _$i.length; _$s < _$r; _$s++)_$i[_$s].io().setContentSize(n);
                }, n._handleReleaseLogic = function() {
                    this._autoScrollToPage(), this._scrolling && (this._scrolling = !1, this._autoScrolling || this._dispatchEvent(i.EventType.SCROLL_ENDED));
                }, n._onTouchBegan = function(i, n) {
                    i.touch.getUILocation(Eut), Or.set(this._touchBeganPosition, Eut.x, Eut.y), t1.prototype._onTouchBegan.call(this, i, n);
                }, n._onTouchMoved = function(i, n) {
                    t1.prototype._onTouchMoved.call(this, i, n);
                }, n._onTouchEnded = function(i, n) {
                    i.touch.getUILocation(Eut), Or.set(this._touchEndPosition, Eut.x, Eut.y), t1.prototype._onTouchEnded.call(this, i, n);
                }, n._onTouchCancelled = function(i, n) {
                    i.touch.getUILocation(Eut), Or.set(this._touchEndPosition, Eut.x, Eut.y), t1.prototype._onTouchCancelled.call(this, i, n);
                }, n._onMouseWheel = function() {}, n._syncScrollDirection = function() {
                    this.horizontal = 0 === this.direction, this.vertical = 1 === this.direction;
                }, n._syncSizeMode = function() {
                    var _$t = this.view;
                    if (this.content && _$t) {
                        var _$i = this.content.getComponent(yrt);
                        if (_$i) {
                            if (1 === this._sizeMode && this._pages.length > 0) {
                                var n = this._pages[0].io(), _$s = this._pages[this._pages.length - 1].io();
                                0 === this.direction ? (_$i.paddingLeft = (_$t.width - n.width) / 2, _$i.paddingRight = (_$t.width - _$s.width) / 2) : 1 === this.direction && (_$i.paddingTop = (_$t.height - n.height) / 2, _$i.paddingBottom = (_$t.height - _$s.height) / 2);
                            }
                            _$i.updateLayout();
                        }
                    }
                }, n._initPages = function() {
                    if (this.content) {
                        this._initContentPos = this.content.position;
                        for(var _$t = this.content.children, _$i = 0; _$i < _$t.length; ++_$i){
                            var n = _$t[_$i];
                            this._pages.indexOf(n) >= 0 || this._pages.push(n);
                        }
                        this._syncScrollDirection(), this._syncSizeMode(), this._updatePageView();
                    }
                }, n._dispatchPageTurningEvent = function() {
                    this._lastPageIdx !== this._curPageIdx && (this._lastPageIdx = this._curPageIdx, Xg.emitEvents(this.pageEvents, this, "page-turning"), this.node.emit("page-turning", this));
                }, n._isQuicklyScrollable = function(t1) {
                    if (0 === this.direction) {
                        if (Math.abs(t1.x) > this.autoPageTurningThreshold) return !0;
                    } else if (1 === this.direction && Math.abs(t1.y) > this.autoPageTurningThreshold) return !0;
                    return !1;
                }, n._moveOffsetValue = function(t1) {
                    var _$i = new Or;
                    if (1 === this._sizeMode) 0 === this.direction ? _$i.x = this._scrollCenterOffsetX[t1] : 1 === this.direction && (_$i.y = this._scrollCenterOffsetY[t1]);
                    else {
                        var n = this.view;
                        if (!n) return _$i;
                        0 === this.direction ? _$i.x = t1 * n.width : 1 === this.direction && (_$i.y = t1 * n.height);
                    }
                    return _$i;
                }, n._getDragDirection = function(t1) {
                    return 0 === this._direction ? 0 === t1.x ? 0 : t1.x > 0 ? 1 : -1 : 0 === t1.y ? 0 : t1.y < 0 ? 1 : -1;
                }, n._isScrollable = function(t1, i, n) {
                    if (1 === this._sizeMode) {
                        var _$s = 0, _$r = 0;
                        if (0 === this.direction) return _$s = this._scrollCenterOffsetX[i], _$r = this._scrollCenterOffsetX[n], Math.abs(t1.x) >= Math.abs(_$s - _$r) * this.scrollThreshold;
                        if (1 === this.direction) return _$s = this._scrollCenterOffsetY[i], _$r = this._scrollCenterOffsetY[n], Math.abs(t1.y) >= Math.abs(_$s - _$r) * this.scrollThreshold;
                    } else {
                        var _$h = this.view;
                        if (!_$h) return !1;
                        if (0 === this.direction) return Math.abs(t1.x) >= _$h.width * this.scrollThreshold;
                        if (1 === this.direction) return Math.abs(t1.y) >= _$h.height * this.scrollThreshold;
                    }
                    return !1;
                }, n._autoScrollToPage = function() {
                    if (this._startBounceBackIfNeeded()) {
                        var _$t = this._getHowMuchOutOfBoundary();
                        this._clampDelta(_$t), (_$t.x > 0 || _$t.y < 0) && (this._curPageIdx = 0 === this._pages.length ? 0 : this._pages.length - 1), (_$t.x < 0 || _$t.y > 0) && (this._curPageIdx = 0), this.indicator && this.indicator._changedState();
                    } else {
                        var _$i = new Or;
                        Or.subtract(_$i, this._touchBeganPosition, this._touchEndPosition);
                        var n = this._curPageIdx, _$s = n + this._getDragDirection(_$i), _$r = this.pageTurningSpeed * Math.abs(n - _$s);
                        if (_$s < this._pages.length) {
                            if (this._isScrollable(_$i, n, _$s)) return void this.scrollToPage(_$s, _$r);
                            var _$h = this._calculateTouchMoveVelocity();
                            if (this._isQuicklyScrollable(_$h)) return void this.scrollToPage(_$s, _$r);
                        }
                        this.scrollToPage(n, _$r);
                    }
                }, s(i, [
                    {
                        key: "sizeMode",
                        get: function get() {
                            return this._sizeMode;
                        },
                        set: function set(t1) {
                            this._sizeMode !== t1 && (this._sizeMode = t1, this._syncSizeMode());
                        }
                    },
                    {
                        key: "direction",
                        get: function get() {
                            return this._direction;
                        },
                        set: function set(t1) {
                            this._direction !== t1 && (this._direction = t1, this._syncScrollDirection());
                        }
                    },
                    {
                        key: "scrollThreshold",
                        get: function get() {
                            return this._scrollThreshold;
                        },
                        set: function set(t1) {
                            this._scrollThreshold !== t1 && (this._scrollThreshold = t1);
                        }
                    },
                    {
                        key: "pageTurningEventTiming",
                        get: function get() {
                            return this._pageTurningEventTiming;
                        },
                        set: function set(t1) {
                            this._pageTurningEventTiming !== t1 && (this._pageTurningEventTiming = t1);
                        }
                    },
                    {
                        key: "indicator",
                        get: function get() {
                            return this._indicator;
                        },
                        set: function set(t1) {
                            this._indicator !== t1 && (this._indicator = t1, this.indicator && this.indicator.setPageView(this));
                        }
                    },
                    {
                        key: "curPageIdx",
                        get: function get() {
                            return this._curPageIdx;
                        }
                    },
                    {
                        key: "verticalScrollBar",
                        get: function get() {
                            return t1.prototype.verticalScrollBar;
                        },
                        set: function set(t1) {
                            this.verticalScrollBar = t1;
                        }
                    },
                    {
                        key: "horizontalScrollBar",
                        get: function get() {
                            return t1.prototype.horizontalScrollBar;
                        },
                        set: function set(t1) {
                            this.horizontalScrollBar = t1;
                        }
                    }
                ]), i;
            }(Dht)).SizeMode = Tut, kut.Direction = Sut, kut.EventType = Yht({
                PAGE_TURNING: "page-turning"
            }, Pht), y(kut.prototype, "sizeMode", [
                iut
            ], Object.getOwnPropertyDescriptor(kut.prototype, "sizeMode"), kut.prototype), y(kut.prototype, "direction", [
                nut
            ], Object.getOwnPropertyDescriptor(kut.prototype, "direction"), kut.prototype), y(kut.prototype, "indicator", [
                sut
            ], Object.getOwnPropertyDescriptor(kut.prototype, "indicator"), kut.prototype), cut = ho(kut.prototype, "autoPageTurningThreshold", [
                Ro
            ], function() {
                return 100;
            }), y(kut.prototype, "verticalScrollBar", [
                rut,
                ff
            ], Object.getOwnPropertyDescriptor(kut.prototype, "verticalScrollBar"), kut.prototype), y(kut.prototype, "horizontalScrollBar", [
                hut,
                ff
            ], Object.getOwnPropertyDescriptor(kut.prototype, "horizontalScrollBar"), kut.prototype), aut = ho(kut.prototype, "horizontal", [
                ff,
                Ro
            ], function() {
                return !0;
            }), vut = ho(kut.prototype, "vertical", [
                ff,
                Ro
            ], function() {
                return !0;
            }), lut = ho(kut.prototype, "cancelInnerEvents", [
                ff,
                Ro
            ], function() {
                return !0;
            }), dut = ho(kut.prototype, "scrollEvents", [
                eut,
                Ro,
                ff
            ], function() {
                return [];
            }), wut = ho(kut.prototype, "pageTurningSpeed", [
                Ro
            ], function() {
                return .3;
            }), gut = ho(kut.prototype, "pageEvents", [
                uut,
                Ro
            ], function() {
                return [];
            }), put = ho(kut.prototype, "_sizeMode", [
                Ro
            ], function() {
                return 0;
            }), yut = ho(kut.prototype, "_direction", [
                Ro
            ], function() {
                return 0;
            }), _ut = ho(kut.prototype, "_scrollThreshold", [
                Ro
            ], function() {
                return .5;
            }), mut = ho(kut.prototype, "_pageTurningEventTiming", [
                Ro
            ], function() {
                return .1;
            }), but = ho(kut.prototype, "_indicator", [
                Ro
            ], function() {
                return null;
            }), out = kut)) || out) || out));
            var Iut = new Ss, Rut = new Or, Mut = new Or, Cut = new Or(1, 1), Nut = new Or, Put = new Or;
            function Dut(t1, i) {
                if (!i._hadAlignOnce) {
                    0 === i.alignMode && (i._hadAlignOnce = !0);
                    var n, s = i.target;
                    s ? Let(t1, n = s, Mut, Cut) : n = t1.parent;
                    var e = Det(n), u = _instanceof(n, _R) || !n.getComponent(hB), o = u ? Rut : n.getComponent(hB).anchorPoint;
                    t1.getPosition(Iut);
                    var _$c = t1.io(), a = Iut.x, v = Iut.y, l = _$c.anchorPoint, _$d = t1.scale;
                    if (56 & i.alignFlags) {
                        var w = 0, g = 0, p = e.width;
                        u ? (w = me.left.x, g = me.right.x) : g = (w = -o.x * p) + p, w += i.isAbsoluteLeft ? i.left : i.left * p, g -= i.isAbsoluteRight ? i.right : i.right * p, s && (w += Mut.x, w *= Cut.x, g += Mut.x, g *= Cut.x);
                        var _$y = 0, _$_ = l.x, m = _$d.x;
                        if (m < 0 && (_$_ = 1 - _$_, m = -m), i.isStretchWidth) _$y = g - w, 0 !== m && (_$c.width = _$y / m), a = w + _$_ * _$y;
                        else {
                            if (_$y = _$c.width * m, i.isAlignHorizontalCenter) {
                                var b = i.isAbsoluteHorizontalCenter ? i.horizontalCenter : i.horizontalCenter * p, k = (.5 - o.x) * e.width;
                                s && (b *= Cut.x, k += Mut.x, k *= Cut.x), a = k + (_$_ - .5) * _$y + b;
                            } else a = i.isAlignLeft ? w + _$_ * _$y : g + (_$_ - 1) * _$y;
                            Fn(m, 0, Ln) ? _$y = _$c.width : _$y /= m;
                        }
                        i._lastSize.width = _$y;
                    }
                    if (7 & i.alignFlags) {
                        var A = 0, E = 0, T = e.height;
                        u ? (E = me.bottom.y, A = me.top.y) : A = (E = -o.y * T) + T, E += i.isAbsoluteBottom ? i.bottom : i.bottom * T, A -= i.isAbsoluteTop ? i.top : i.top * T, s && (E += Mut.y, E *= Cut.y, A += Mut.y, A *= Cut.y);
                        var S = 0, _$O = l.y, _$I = _$d.y;
                        if (_$I < 0 && (_$O = 1 - _$O, _$I = -_$I), i.isStretchHeight) S = A - E, 0 !== _$I && (_$c.height = S / _$I), v = E + _$O * S;
                        else {
                            if (S = _$c.height * _$I, i.isAlignVerticalCenter) {
                                var _$R = i.isAbsoluteVerticalCenter ? i.verticalCenter : i.verticalCenter * T, _$M = (.5 - o.y) * e.height;
                                s && (_$R *= Cut.y, _$M += Mut.y, _$M *= Cut.y), v = _$M + (_$O - .5) * S + _$R;
                            } else v = i.isAlignBottom ? E + _$O * S : A + (_$O - 1) * S;
                            Fn(_$I, 0, Ln) ? S = _$c.height : S /= _$I;
                        }
                        i._lastSize.height = S;
                    }
                    t1.setPosition(a, v, Iut.z), Ss.set(i._lastPos, a, v, Iut.z);
                }
            }
            function Lut(t1) {
                var i = t1.getComponent(Ket);
                if (i && i.enabled) {
                    if (!A.isValid(t1, !0)) return;
                    jut.push(i);
                }
                for(var n, s = d(t1.children); !(n = s()).done;){
                    var _$r = n.value;
                    _$r.active && Lut(_$r);
                }
            }
            function But() {
                var _$t = PN.getScene();
                if (_$t) {
                    Gut.isAligning = !0, Gut._nodesOrderDirty && (jut.length = 0, Lut(_$t), Gut._nodesOrderDirty = !1);
                    var i = null, n = Gut._activeWidgetsIterator;
                    for(n.i = 0; n.i < jut.length; ++n.i)(i = jut[n.i])._dirty && (Dut(i.node, i), i._dirty = !1);
                    Gut.isAligning = !1;
                }
            }
            var Fut, Uut, xut, jut = [], Gut = t1("f8", A._widgetManager = {
                isAligning: !1,
                _nodesOrderDirty: !1,
                _activeWidgetsIterator: new ni(jut),
                animationState: null,
                init: function init() {
                    PN.on("director_after_scene_launch", But), PN.on("director_after_update", But), BN.instance.on("design-resolution-changed", this.onResized, this);
                    var _$t = this.onResized.bind(this);
                    BN.instance.on("canvas-resize", _$t), ge.on("window-resize", _$t);
                },
                add: function add() {
                    this._nodesOrderDirty = !0;
                },
                remove: function remove(t1) {
                    this._activeWidgetsIterator.remove(t1);
                },
                onResized: function onResized() {
                    var _$t = PN.getScene();
                    _$t && this.refreshWidgetOnResized(_$t);
                },
                refreshWidgetOnResized: function refreshWidgetOnResized(t1) {
                    var i = VE.isNode(t1) && t1.getComponent(Ket);
                    i && i.enabled && (2 === i.alignMode || 1 === i.alignMode) && i.setDirty();
                    for(var n, s = d(t1.children); !(n = s()).done;){
                        var _$r = n.value;
                        this.refreshWidgetOnResized(_$r);
                    }
                },
                updateOffsetsToStayPut: function updateOffsetsToStayPut(t1, i) {
                    function n(t1, i) {
                        return Math.abs(t1 - i) > 1e-10 ? i : t1;
                    }
                    var s = t1.node, _$r = s.parent;
                    if (_$r) {
                        if (Nut.set(0, 0), Put.set(1, 1), t1.target && Let(s, _$r = t1.target, Nut, Put), !i) return;
                        var u = _$r._uiProps && _$r.io(), o = u ? u.anchorPoint : Rut, f = s.io(), _$c = Det(_$r), a = f.anchorPoint, v = s.position, _$d = s.scale, w = 0;
                        if (i & Yet.LEFT) {
                            var g = -o.x * _$c.width;
                            g += Nut.x, g *= Put.x, w = v.x - a.x * f.width * Math.abs(_$d.x) - g, t1.isAbsoluteLeft || (w /= _$c.width), w /= Put.x, t1.left = n(t1.left, w);
                        }
                        if (i & Yet.RIGHT) {
                            var p = (1 - o.x) * _$c.width;
                            p += Nut.x, w = (p *= Put.x) - (v.x + (1 - a.x) * f.width * Math.abs(_$d.x)), t1.isAbsoluteRight || (w /= _$c.width), w /= Put.x, t1.right = n(t1.right, w);
                        }
                        if (i & Yet.TOP) {
                            var _$y = (1 - o.y) * _$c.height;
                            _$y += Nut.y, w = (_$y *= Put.y) - (v.y + (1 - a.y) * f.height * Math.abs(_$d.y)), t1.isAbsoluteTop || (w /= _$c.height), w /= Put.y, t1.top = n(t1.top, w);
                        }
                        if (i & Yet.BOT) {
                            var _$_ = -o.y * _$c.height;
                            _$_ += Nut.y, _$_ *= Put.y, w = v.y - a.y * f.height * Math.abs(_$d.y) - _$_, t1.isAbsoluteBottom || (w /= _$c.height), w /= Put.y, t1.bottom = n(t1.bottom, w);
                        }
                    }
                },
                updateAlignment: function t1(i) {
                    var n = i.parent;
                    n && VE.isNode(n) && t1(n);
                    var s = i.getComponent(Ket);
                    s && n && Dut(i, s);
                },
                AlignMode: Bet,
                AlignFlags: Yet
            });
            PN.on("director_init", function() {
                Gut.init();
            }), A.SafeArea = t1("f4", go("cc.SafeArea")(Fut = yo(110)(Fut = po(Ket)((xut = ho((Uut = function(t1) {
                function i() {
                    var _$i;
                    return (_$i = t1.call(this) || this)._symmetric = xut && xut(), _$i;
                }
                h(i, t1);
                var n = i.prototype;
                return n.onEnable = function() {
                    this.updateArea(), ge.on("window-resize", this.updateArea, this), ge.on("orientation-change", this.updateArea, this);
                }, n.onDisable = function() {
                    ge.off("window-resize", this.updateArea, this), ge.off("orientation-change", this.updateArea, this);
                }, n.updateArea = function() {
                    var _$t = this.node.getComponent(Ket), _$i = this.node.getComponent(hB);
                    if (_$t && _$i) {
                        _$t.updateAlignment();
                        var n = this.node.position.clone(), _$s = _$i.anchorPoint.clone();
                        _$t.isAlignTop = _$t.isAlignBottom = _$t.isAlignLeft = _$t.isAlignRight = !0;
                        var _$r = XN.getVisibleSize(), _$h = _$r.width, e = _$r.height, u = _e.getSafeAreaRect(this._symmetric);
                        _$t.top = e - u.y - u.height, _$t.bottom = u.y, _$t.left = u.x, _$t.right = _$h - u.x - u.width, _$t.updateAlignment();
                        var o = this.node.position.clone(), f = _$s.x - (o.x - n.x) / _$i.width, _$c = _$s.y - (o.y - n.y) / _$i.height;
                        _$i.setAnchorPoint(f, _$c), Gut.add(_$t);
                    }
                }, s(i, [
                    {
                        key: "symmetric",
                        get: function get() {
                            return this._symmetric;
                        },
                        set: function set(t1) {
                            this._symmetric = t1;
                        }
                    }
                ]), i;
            }(Yg)).prototype, "_symmetric", [
                Ro
            ], function() {
                return !0;
            }), Fut = Uut)) || Fut) || Fut) || Fut), t1("f5", (Hut = go("cc.UICoordinateTracker"), Vut = yo(110), Wut = Zo(VE), zut = Zo(Ej), $ut = Zo([
                Xg
            ]), Hut(Xut = Vut((y((qut = function(t1) {
                function i() {
                    var _$i;
                    return (_$i = t1.call(this) || this).syncEvents = Yut && Yut(), _$i._target = Kut && Kut(), _$i._camera = Jut && Jut(), _$i._useScale = Qut && Qut(), _$i._distance = Zut && Zut(), _$i._transformPos = Os(), _$i._viewPos = Os(), _$i._canMove = !0, _$i._lastWPos = Os(), _$i._lastCameraPos = Os(), _$i;
                }
                h(i, t1);
                var n = i.prototype;
                return n.onEnable = function() {
                    this._checkCanMove();
                }, n.update = function() {
                    var _$t = this.node.worldPosition, _$i = this._camera;
                    if (this._canMove && _$i && _$i.camera && (!this._lastWPos.equals(_$t) || !this._lastCameraPos.equals(_$i.node.worldPosition)) && (this._lastWPos.set(_$t), this._lastCameraPos.set(_$i.node.worldPosition), _$i.camera.update(), _$i.convertToUINode(_$t, this._target, this._transformPos), this._useScale && Ss.transformMat4(this._viewPos, this.node.worldPosition, _$i.camera.matView), this.syncEvents.length > 0)) {
                        var n = this._distance / Math.abs(this._viewPos.z);
                        Xg.emitEvents(this.syncEvents, this._transformPos, n);
                    }
                }, n._checkCanMove = function() {
                    this._canMove = !(!this._camera || !this._target);
                }, s(i, [
                    {
                        key: "target",
                        get: function get() {
                            return this._target;
                        },
                        set: function set(t1) {
                            this._target !== t1 && (this._target = t1, this._checkCanMove());
                        }
                    },
                    {
                        key: "camera",
                        get: function get() {
                            return this._camera;
                        },
                        set: function set(t1) {
                            this._camera !== t1 && (this._camera = t1, this._checkCanMove());
                        }
                    },
                    {
                        key: "useScale",
                        get: function get() {
                            return this._useScale;
                        },
                        set: function set(t1) {
                            this._useScale !== t1 && (this._useScale = t1);
                        }
                    },
                    {
                        key: "distance",
                        get: function get() {
                            return this._distance;
                        },
                        set: function set(t1) {
                            this._distance !== t1 && (this._distance = t1);
                        }
                    }
                ]), i;
            }(Yg)).prototype, "target", [
                Wut
            ], Object.getOwnPropertyDescriptor(qut.prototype, "target"), qut.prototype), y(qut.prototype, "camera", [
                zut
            ], Object.getOwnPropertyDescriptor(qut.prototype, "camera"), qut.prototype), Yut = ho(qut.prototype, "syncEvents", [
                $ut,
                Ro
            ], function() {
                return [];
            }), Kut = ho(qut.prototype, "_target", [
                Ro
            ], function() {
                return null;
            }), Jut = ho(qut.prototype, "_camera", [
                Ro
            ], function() {
                return null;
            }), Qut = ho(qut.prototype, "_useScale", [
                Ro
            ], function() {
                return !0;
            }), Zut = ho(qut.prototype, "_distance", [
                Ro
            ], function() {
                return 1;
            }), Xut = qut)) || Xut) || Xut));
            var Hut, Vut, Wut, zut, $ut, Xut, qut, Yut, Kut, Jut, Qut, Zut, iot, not = [
                "touch-start",
                "touch-end",
                "touch-move",
                "mouse-down",
                "mouse-move",
                "mouse-up",
                "mouse-enter",
                "mouse-leave",
                "mouse-wheel"
            ];
            function sot(t1) {
                t1.propagationStopped = !0;
            }
            t1("f6", go("cc.BlockInputEvents")(iot = function(t1) {
                function i() {
                    return t1.apply(this, arguments) || this;
                }
                h(i, t1);
                var n = i.prototype;
                return n.onEnable = function() {
                    for(var _$t = 0; _$t < not.length; _$t++)this.node.on(not[_$t], sot, this);
                }, n.onDisable = function() {
                    for(var _$t = 0; _$t < not.length; _$t++)this.node.off(not[_$t], sot, this);
                }, i;
            }(Yg)) || iot), A.SubContextView = t1("f7", go("cc.SubContextView")(rot = yo(110)(rot = po(hB)((eot = ho((hot = function(t1) {
                function i() {
                    var _$i;
                    return (_$i = t1.call(this) || this)._fps = eot && eot(), _$i.GU = null, _$i.rj = new mg, _$i.gy = new ay, _$i.hj = 0, _$i.ej = 0, _$i.uj = null, _$i.oj = new VE("content"), _$i._designResolutionSize = uot && uot(), _$i.oj.hideFlags |= 1032, _$i.hj = performance.now(), _$i;
                }
                h(i, t1);
                var n = i.prototype;
                return n.onLoad = function() {
                    aD.getOpenDataContext ? (this.ej = 1e3 / this._fps, this.uj = aD.getOpenDataContext(), this.fj(), this.cj(), this.aj(), this.vj()) : this.enabled = !1;
                }, n.onEnable = function() {
                    this.zF();
                }, n.onDisable = function() {
                    this.$F();
                }, n.fj = function() {
                    if (this.uj) {
                        var _$t = this.uj.canvas, _$i = this._designResolutionSize.width, n = this._designResolutionSize.height;
                        _$t.width = _$i, _$t.height = n;
                    }
                }, n.cj = function() {
                    if (this.uj) {
                        var _$t = this.uj.canvas, _$i = this.rj;
                        if (_$i.reset(_$t), this.gy.image = _$i, this.gy.create(_$t.width, _$t.height), this.GU = this.oj.getComponent(xF), this.GU || (this.GU = this.oj.addComponent(xF)), this.GU.spriteFrame) this.GU.spriteFrame.texture = this.gy;
                        else {
                            var n = new sD;
                            n.texture = this.gy, this.GU.spriteFrame = n;
                        }
                        this.oj.parent = this.node;
                    }
                }, n.aj = function() {
                    if (this.uj) {
                        var _$t = this.node.getComponent(hB), _$i = this.oj.getComponent(hB), n = _$t.width / _$i.width, _$s = _$t.height / _$i.height, _$r = n > _$s ? _$s : n;
                        _$i.width *= _$r, _$i.height *= _$r;
                        var _$h = XN.getViewportRect(), e = _$i.getBoundingBoxToWorld(), u = XN.getVisibleSize(), o = ge.devicePixelRatio, f = (_$h.width * (e.x / u.width) + _$h.x) / o, _$c = (_$h.height * (e.y / u.height) + _$h.y) / o, a = _$h.width * (e.width / u.width) / o, v = _$h.height * (e.height / u.height) / o;
                        this.uj.postMessage({
                            fromEngine: !0,
                            type: "engine",
                            event: "viewport",
                            x: f,
                            y: _$c,
                            width: a,
                            height: v
                        });
                    }
                }, n.lj = function() {
                    var _$t = this.rj;
                    if (_$t && this.uj && !(_$t.width <= 0 || _$t.height <= 0)) {
                        var _$i = this.uj.canvas;
                        _$t.reset(_$i), (_$i.width > _$t.width || _$i.height > _$t.height) && this.gy.create(_$i.width, _$i.height), this.gy.uploadData(_$i);
                    }
                }, n.zF = function() {
                    this.node.on("transform-changed", this.aj, this), this.node.on("size-changed", this.aj, this), this.node.on("layer-changed", this.vj, this);
                }, n.$F = function() {
                    this.node.off("transform-changed", this.aj, this), this.node.off("size-changed", this.aj, this), this.node.off("layer-changed", this.vj, this);
                }, n.vj = function() {
                    this.oj.layer = this.node.layer;
                }, n.update = function(t1) {
                    void 0 === t1 ? this.lj() : performance.now() - this.hj >= this.ej && (this.hj += this.ej, this.lj());
                }, n.onDestroy = function() {
                    this.oj.destroy(), this.gy.destroy(), this.GU && this.GU.destroy(), this.rj.destroy(), this.uj = null;
                }, s(i, [
                    {
                        key: "designResolutionSize",
                        get: function get() {
                            return this._designResolutionSize;
                        },
                        set: function set() {}
                    },
                    {
                        key: "fps",
                        get: function get() {
                            return this._fps;
                        },
                        set: function set(t1) {
                            this._fps !== t1 && (this._fps = t1, this.ej = 1e3 / t1);
                        }
                    }
                ]), i;
            }(Yg)).prototype, "_fps", [
                Ro
            ], function() {
                return 60;
            }), uot = ho(hot.prototype, "_designResolutionSize", [
                Ro
            ], function() {
                return new Zr(640, 960);
            }), rot = hot)) || rot) || rot) || rot);
        }
    };
});
