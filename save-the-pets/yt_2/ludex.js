"use strict";function _array_like_to_array(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _array_with_holes(arr){if(Array.isArray(arr))return arr}function _array_without_holes(arr){if(Array.isArray(arr))return _array_like_to_array(arr)}function _assert_this_initialized(self1){if(void 0===self1)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return self1}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){reject(error);return}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _async_to_generator(fn){return function(){var self1=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self1,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)})}}function _call_super(_this,derived,args){return derived=_get_prototype_of(derived),_possible_constructor_return(_this,_is_native_reflect_construct()?Reflect.construct(derived,args||[],_get_prototype_of(_this).constructor):derived.apply(_this,args))}function _class_call_check(instance,Constructor){if(!(instance instanceof Constructor))throw TypeError("Cannot call a class as a function")}function _construct(Parent,args,Class){return(_construct=_is_native_reflect_construct()?Reflect.construct:function construct(Parent,args,Class){var a=[null];a.push.apply(a,args);var instance=new(Function.bind.apply(Parent,a));return Class&&_set_prototype_of(instance,Class.prototype),instance}).apply(null,arguments)}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _create_class(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}function _define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _get(target,property,receiver){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function get(target,property,receiver){var base=_super_prop_base(target,property);if(base){var desc=Object.getOwnPropertyDescriptor(base,property);return desc.get?desc.get.call(receiver||target):desc.value}})(target,property,receiver||target)}function _get_prototype_of(o){return(_get_prototype_of=Object.setPrototypeOf?Object.getPrototypeOf:function getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_set_prototype_of(subClass,superClass)}function _instanceof(left,right){return null!=right&&"undefined"!=typeof Symbol&&right[Symbol.hasInstance]?!!right[Symbol.hasInstance](left):left instanceof right}function _is_native_function(fn){return -1!==Function.toString.call(fn).indexOf("[native code]")}function _iterable_to_array(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}function _iterable_to_array_limit(arr,i){var _s,_e,_i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}function _non_iterable_rest(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _non_iterable_spread(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _possible_constructor_return(self1,call){return call&&("object"===_type_of(call)||"function"==typeof call)?call:_assert_this_initialized(self1)}function set(target,property,value,receiver){return(set="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function set1(target,property,value,receiver){var desc,base=_super_prop_base(target,property);if(base){if((desc=Object.getOwnPropertyDescriptor(base,property)).set)return desc.set.call(receiver,value),!0;if(!desc.writable)return!1}if(desc=Object.getOwnPropertyDescriptor(receiver,property)){if(!desc.writable)return!1;desc.value=value,Object.defineProperty(receiver,property,desc)}else _define_property(receiver,property,value);return!0})(target,property,value,receiver)}function _set(target,property,value,receiver,isStrict){if(!set(target,property,value,receiver||target)&&isStrict)throw Error("failed to set property");return value}function _set_prototype_of(o,p){return(_set_prototype_of=Object.setPrototypeOf||function setPrototypeOf(o,p){return o.__proto__=p,o})(o,p)}function _sliced_to_array(arr,i){return _array_with_holes(arr)||_iterable_to_array_limit(arr,i)||_unsupported_iterable_to_array(arr,i)||_non_iterable_rest()}function _super_prop_base(object,property){for(;!Object.prototype.hasOwnProperty.call(object,property)&&null!==(object=_get_prototype_of(object)););return object}function _to_consumable_array(arr){return _array_without_holes(arr)||_iterable_to_array(arr)||_unsupported_iterable_to_array(arr)||_non_iterable_spread()}function _type_of(obj){return obj&&"undefined"!=typeof Symbol&&obj.constructor===Symbol?"symbol":typeof obj}function _unsupported_iterable_to_array(o,minLen){if(o){if("string"==typeof o)return _array_like_to_array(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if("Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _array_like_to_array(o,minLen)}}function _wrap_native_super(Class){var _cache="function"==typeof Map?new Map:void 0;return(_wrap_native_super=function wrapNativeSuper(Class){if(null===Class||!_is_native_function(Class))return Class;if("function"!=typeof Class)throw TypeError("Super expression must either be null or a function");if(void 0!==_cache){if(_cache.has(Class))return _cache.get(Class);_cache.set(Class,Wrapper)}function Wrapper(){return _construct(Class,arguments,_get_prototype_of(this).constructor)}return Wrapper.prototype=Object.create(Class.prototype,{constructor:{value:Wrapper,enumerable:!1,writable:!0,configurable:!0}}),_set_prototype_of(Wrapper,Class)})(Class)}function _is_native_reflect_construct(){try{var result=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(_){}return(_is_native_reflect_construct=function(){return!!result})()}function _ts_generator(thisArg,body){var f,y,t,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]},g=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return g.next=verb(0),g.throw=verb(1),g.return=verb(2),"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw TypeError("Generator is already executing.");for(;g&&(g=0,op[0]&&(_=0)),_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}}!function(){var v,A,Ie,dr,gt,kg,Gg,Ne,Fg,Vg,ur,pr,Bd,Kg,Pt,Hg,jg,kn,mr,Wg,Gn,Fd,zg,qg,Yg,Jg,Qg,Ud,Xg,Zg,Fn,Bn,eP,tP,rP,nP,oP,sP,iP,Vd,Kn,Un,Hn,Vn,Bg=function Bg(){var n=["error","unhandledrejection"],e=null!=(_Ne___listeners=Ne.__listeners)?_Ne___listeners:[],_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _e_t,_Ne___listeners,_step,_iterator=n[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var t=_step.value;(null==(_e_t=e[t])?void 0:_e_t[0])&&Ne.removeEventListener(t,Ne.__listeners[t].shift())}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}},Gd=function Gd(n){Ne.__errorQueue&&(Ne.__errorQueue.length>=Fg&&(Ne.__errorQueue.length=0),Ne.__errorQueue.push("string"==typeof n?Error(n):n))},Ug=function Ug(){Ne.addEventListener("error",function(n){Gd(n.error)}),Ne.addEventListener("unhandledrejection",function(n){Gd(n.reason)})},cP=function cP(){var n=arguments;"event"===n[0]&&("object"!=_type_of(n[2])&&(n[2]={}),n[2].build=2,n[2].send_to="GA",n[2].extend_session=1),window.dataLayer.push(n)},lP=function lP(){try{return}catch(e){}},AP=function AP(n){for(var e=0,t=0;t<n.length;t++)e=(e<<5)-e+n.charCodeAt(t)|0;return e},bP=function bP(){var n,e=window,t="GameSDK";return"FBInstant"in e?(t="FBInstant",n=new O(window.FBInstant)):"YaGames"in e?(t="Yandex",n=new O(window.YaGames)):"funmax"in e?(t="Xiaomi",n=new O(window.funmax)):"$msstart"in e?(t="MsGames",n=new O(window.$msstart)):"gdsdk"in e?(t="GameDistribution",n=new O(window.gdsdk)):"h5sdk"in e?(t="TranssionH5",n=new O(window.h5sdk)):"CrazyGames"in e?(t="CrazyGames",n=new O(window.CrazyGames.SDK)):"GlanceGamingAdInterface"in e?(t="Glance",n=new O(window.GlanceGamingAdInterface)):"mraid"in e?(t="Playable",n=new O(window.mraid)):"MetaHorizon"in e?(t="Horizon",n=new O(window.MetaHorizon)):"ytgame"in e?(t="YoutubePlayables",n=new cu(window.ytgame)):n=new xr,n},r$=function r$(n){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,t=[],r=n.split(" "),o=r.length,w=o;w>=1;w--)for(var I=0;I<=o-w;I++){var D=r.slice(I,I+w).join(" ");n.split(D).length-1>=e&&0>t.indexOf(D)&&D.length>1&&t.push(D)}return t.sort(function(w,I){return w.length-I.length})},Nm=function Nm(n){var e=g$(n),t=e%Mm.length,r=(e>>8)%Om.length,o=(e>>16)%1e4;return"".concat(Mm[t]).concat(Om[r]).concat(o)},Vh=function Vh(n){codex.event.emit($A.REQUEST_LANGUAGE,{locale:n})},Ss=function Ss(n){return WA.isEmpty(n)?null:n},Ig=Object.create,ft=Object.defineProperty,Eg=Object.defineProperties,Rd=Object.getOwnPropertyDescriptor,Lg=Object.getOwnPropertyDescriptors,Cg=Object.getOwnPropertyNames,lr=Object.getOwnPropertySymbols,Tg=Object.getPrototypeOf,Rn=Object.prototype.hasOwnProperty,_d=Object.prototype.propertyIsEnumerable,yt=Math.pow,Nn=function(n,e,t){return e in n?ft(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t},N=function(n,e){for(var t in e||(e={}))Rn.call(e,t)&&Nn(n,t,e[t]);var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;if(lr)try{for(var _step,_iterator=lr(e)[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var t=_step.value;_d.call(e,t)&&Nn(n,t,e[t])}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return n},be=function(n,e){return Eg(n,Lg(e))},a=function(n,e){return ft(n,"name",{value:e,configurable:!0})},_n=function(n,e){var t={};for(var r in n)Rn.call(n,r)&&0>e.indexOf(r)&&(t[r]=n[r]);var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;if(null!=n&&lr)try{for(var _step,_iterator=lr(n)[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var r=_step.value;0>e.indexOf(r)&&_d.call(n,r)&&(t[r]=n[r])}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return t},W=function(n,e){return function(){return n&&(e=n(n=0)),e}},Mg=function(n,e){return function(){return e||n((e={exports:{}}).exports,e),e.exports}},kd=function(n,e){for(var t in e)ft(n,t,{get:e[t],enumerable:!0})},Og=function(n,e,t,r){var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;if(e&&(void 0===e?"undefined":_type_of(e))=="object"||"function"==typeof e)try{for(var _step,_loop=function(){var o=_step.value;Rn.call(n,o)||o===t||ft(n,o,{get:function(){return e[o]},enumerable:!(r=Rd(e,o))||r.enumerable})},_iterator=Cg(e)[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0)_loop()}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return n},Ng=function(n,e,t){return t=null!=n?Ig(Tg(n)):{},Og(!e&&n&&n.__esModule?t:ft(t,"default",{value:n,enumerable:!0}),n)},pe=function(n,e,t,r){for(var I,o=r>1?void 0:r?Rd(e,t):e,w=n.length-1;w>=0;w--)(I=n[w])&&(o=(r?I(e,t,o):I(o))||o);return r&&o&&ft(e,t,o),o},Ge=function(n,e,t){return Nn(n,(void 0===e?"undefined":_type_of(e))!="symbol"?e+"":e,t)},s=W(function(){v={AppId:"save-the-pets",AppDescription:"",ApiHost:"https://igs-singleplay.suncs.app",OtherHost:"https://igs-leaderboard.suncs.app",Ads:{Enabled:!0,PreloadAds:!1,NotifyPlayerBeforeShow:!1,ShowAdOnLoad:{Enabled:!1,DelaySeconds:0,PlacementId:"ad_demo_01"},DegradationTracking:{ResetTimeMinutes:5,MaxFailedAttempts:8},AdServiceConfigs:{AdSense:{Enabled:!1,UsePreload:!1,DataAdClient:"ca-pub-1234567890",DataAdChannel:"1234567890",DataAdBreakTest:!1,DataAdFrequencyHint:30},Savana:{Enabled:!1,UsePreload:!1,DataAdClient:"ca-pub-1234567890",DataAdChannel:"1234567890",DataAdBreakTest:!1,DataAdFrequencyHint:45,BannerAdSlotId:"1234567890"},AppLovin:{Enabled:!1,UsePreload:!1}},InterstitialAdOptions:[{DeviceOS:"default",PlacementId:"interstitial_01",SecondsFirstTime:45,SecondsBetweenAds:60}],RewardedVideoAdOptions:[{DeviceOS:"default",PlacementId:"rewarded_video_01",SecondsFirstTime:0,SecondsBetweenAds:0}],RewardedInterstitialAdOptions:[],BannerDisplayAdOptions:[]},Languages:{Enabled:!0,DetectPlayerLocale:!0},GameSDKOptions:{AllowWithoutSDK:!1,UseNameGenerator:!0,MSGames:{LoginOnStart:!1,MaxLoginAttemptsPerDay:1},Yandex:{LoginOnStart:!1,MaxLoginAttemptsPerDay:1},Playable:{AppleAppStoreUrl:"",GooglePlayStoreUrl:""},TranssionH5:{GaId:"G-XXXXXXXXXX"}},Core:{InitAsync:!0,AverageLoadTime:5,StartSDKAfterLoadGame:!1,FastCheckTournamentContext:!0},GameEngine:{ForceDesktopDPR:2,AutoResizeCanvas:!0,PreferredFPS:{Mobile:60,Desktop:60},DynamicAtlas:{IOS:{Enabled:!0,MaxAtlasSize:8192,MaxFrameSize:2048,MaxAtlasCount:1},Android:{Enabled:!0,MaxAtlasSize:4096,MaxFrameSize:2048,MaxAtlasCount:1},Desktop:{Enabled:!0,MaxAtlasSize:8192,MaxFrameSize:2048,MaxAtlasCount:1},OptimizeAtlas:{Enabled:!0,AtlasDebug:!1,AutoAtlasSize:!0,UsePowerOfTwo:!1,TextureBleeding:!0,AllowNonePackable:!1,OnlyOptimizeWhenRenderTooLong:!0}},DynamicAssets:{Enabled:!1,Resolution:{Source:2,Available:[1,2]},Compression:{Debug:!1,Enabled:!1,PNG:{colors:256,quality:80,dither:.6,palette:!0,compressionLevel:6},JPEG:{quality:80,mozjpeg:!0},WEBP:{quality:80,lossless:!1,alphaQuality:60,smartSubsample:!0,preset:"drawing"}},IgnoreFiles:[]},HybridFileCache:{Enabled:!0,BuildMode:{Enabled:!0,InvalidateMode:"both",SupportedExtensions:[".json"]},PreviewMode:{Enabled:!1,CacheScene:!1,CachePrefab:!1,CacheUuidExtension:!1,InvalidateMode:"commitId",SupportedExtensions:[".json"]}}},Gameplay:{StartAdAtLevel:1,MaxRescueCount:1,Tutorial:{Enabled:!0,ForceUseTutorial:!1}},Firebase:{Enabled:!1,Options:{AppId:"",ApiKey:"",ProjectId:"",AuthDomain:"",StorageBucket:"",MeasurementId:"",MessagingSenderId:""},Services:{Analytics:{Enabled:!1},Performance:{Enabled:!1},RemoteConfig:{Enabled:!1}}},Analytics:{Enabled:!0,GoogleAnalytics:{Enabled:!0,ConsoleLog:!1},ClarityAnalytics:{Enabled:!1,ConsoleLog:!1,ScreenshotCanvas:{Interval:1500,ByEvent:["APP_READY","PAGE_VIEW","BUTTON_CLICK","AD_SHOWING","LEVEL_START","LEVEL_END"]}},FirebaseAnalytics:{Enabled:!1,ConsoleLog:!1},FacebookAnalytics:{Prefix:"fba",Enabled:!1,ConsoleLog:!1}},PerformanceMonitor:{CoreFlows:!1,EngineFlows:!1,GameSDKFlows:!1,LoadResources:!1,FpsTracking:{Enabled:!1,TrackingDuration:60,TrackingInterval:10}},RemoteConfig:{Enabled:!1,Options:{ForceReloadGame:!1,FetchIntervalInSeconds:300},ServiceType:"mockup",DefaultConfigId:"default",SupportedDataTypes:["Ludex","Gameplay"],MockupConfig:{Enabled:!0},SelfHostedConfig:{Enabled:!1,AppId:"",ApiKey:"",ApiUrl:""}},Network:{MaximumRequest:6,Timeout:15e3,Retries:3},Leaderboards:{Enabled:!0,LeaderboardList:[{Name:"Daily",Id:"5fed5ccff033f2477a624a66",Mode:"single",Limit:50},{Name:"Weekly",Id:"5fed5ccff033f2477a624a65",Mode:"single",Limit:50}]},Notification:{Enabled:!1,ApiUrl:"https://notifications.sunstudio.io"},DailyRewards:{Enabled:!1,MaxDays:7,MockTime:0,CheckInterrupt:!1},Mockup:{Ads:{Enabled:!1,ErrorRate:5,GiphyApiKey:"VmjHIRsfrwCAssDS4mDo9DoImxJm1lLM",SafeAreaBottom:0},Match:{Enabled:!1,ErrorRate:5,PlayerInfo:{Id:"player-mock",Name:"Player Mock",Photo:"",Signature:""},OpponentInfo:{Id:"opponent-mock",Name:"Opponent Mock",Photo:"",Signature:""}},GameSDK:{SlowAPI:{Enabled:!1,ErrorRate:5,StartDelay:1e3,InitialDelay:1e3,PlayerDataDelay:1e3},Context:{Enabled:!1},Player:{SubscribeBot:{Enabled:!1,CanSubscribeBot:!0},ConnectedPlayers:{Enabled:!1,ErrorRate:5,RandomDelayMs:1e3,NumOfPlayers:3}},AddShortcut:{Enabled:!1,CanCreateShortcut:!0},Tournament:{Enabled:!1,ErrorRates:5,RandomDelayMs:1e3,NumOfTournament:{Normal:10,HostPage:2}},Payments:{Enabled:!1,ErrorRates:5,RandomDelayMs:1e3,Products:[]}},Profile:{Enabled:!1,ErrorRate:5,RandomDelayMs:1e3,AvatarUrl:"https://picsum.photos/seed/%1/300/300",RandomNameApiKey:"a1f7164dc9d2468b953aef67b0a19355"},Leaderboards:{Enabled:!1,MinScore:10,MaxScore:100,ErrorRate:5,NumOfLeaders:{Min:10,Max:50},DefaultLimit:60,RandomDelayMs:1e3}},Debugger:{Console:{Enabled:!1,UseGroup:!0,UseInGameConsole:!1},Profiler:{Enabled:!1},EventLogging:{Enabled:!1},CanvasRecorder:{Enabled:!1,OnlyCore:!1,PanelExpanded:!1,Options:{Type:"png",Quality:.85,RecordFps:60,SyncFps:!0}},MonitorError:{Enabled:!1,ApiKey:"",Service:"BugSnag",TrackUser:!1,TrackPerformance:!1,FilterErrors:{Codes:{Accepted:[],Ignored:["USER_INPUT","NETWORK_FAILURE"]},Messages:{Accepted:[],Ignored:["Load image failed"]}},Feedback:!1},ListPlayerDevIds:[],InputRecorder:{Enabled:!1,Logging:!0,PlaybackDelay:0,TimeScale:1,UseVisualizer:!0,SkipInactivity:{Enabled:!0,MinTime:3e3},MouseEvents:{mousedown:!0,mouseup:!0,mousemove:!0,mouseenter:!0,mouseleave:!0,mouseout:!0,mouseover:!0}}},AdaptivePerformance:{Enabled:!1,Quality:{Min:1,Max:2,AdjustStep:.1},Options:{FpsThreshold:48,CheckInterval:2e3,AutoUpgradeQuality:!0,OnlyUpdateWhenSwitchScene:!1},TrackingSceneNames:["GameScene"]},FrameCapture:{Enabled:!0,Options:{Quality:.85,RenderType:"jpeg",UseBlobIfPossible:!0,FallbackWithWideframe:"Default"}},Auth:{Enabled:!0},Audio:{Enabled:!0},Match:{Enabled:!0},Player:{Enabled:!0},Profile:{Enabled:!0},Context:{Enabled:!0},Missions:{Enabled:!1},Visibility:{Enabled:!1}}}),i=W(function(){A={AllowWithoutSDK:!1,UseNameGenerator:!0}}),c=W(function(){(Ie=window.console).debug=function(){},Ie.info=Ie.log=Ie.dir=Ie.warn=Ie.error=Ie.debug=Ie.table=Ie.trace=Ie.group=Ie.groupEnd=Ie.groupCollapsed=function(){}}),l=W(function(){gt={},(dr=window).__listeners=gt,kg=dr.addEventListener.bind(dr),Gg=100,dr.addEventListener=function(n,e,t){gt[n]||(gt[n]=[]),gt[n].length>=Gg&&(gt[n].length=0),gt[n].push(e),kg(n,e,t)}}),d=W(function(){(Ne=window).__errorQueue=[],Fg=100,a(Bg,"disableSimpleTrackErrors"),a(Gd,"errorHandler"),a(Ug,"init"),Ne.addEventListener("load",function(){Bg(),Ug()})}),u=W(function(){Vg=a(function(n){return Math.max(0,Math.min(100,~~n))},"clamp"),ur=null,window.__sdkLoad={percent:0,ensure:function ensure(n){if(!(this.percent>n)){var e=Vg(n);e<=this.percent||(this.percent=e,ur||(ur=GameSDK),ur&&ur.setLoadingProgress(e))}}}}),p=W(function(){var _window___errorQueue;window.__errorQueue=null!=(_window___errorQueue=window.__errorQueue)?_window___errorQueue:[],pr=null,Bd=a(function(){pr&&clearInterval(pr),pr=null},"stopProgressTimer"),Kg=a(function(n){var t=n-window.__sdkLoad.percent;if(!(t<=0)){var r=5e3/t,o=Math.max(r,50);pr=setInterval(function(){var I=window.__sdkLoad.percent+1;I>n?Bd():window.__sdkLoad.ensure(I)},o)}},"startProgressTimer"),Pt=a(function(n){var _Ludex,_window___errorQueue,_codex_monitorError,_codex,e=null==(_Ludex=Ludex)?void 0:_Ludex.Utils.Function.toError(n);(null==e?void 0:e.message)&&(kn("app_crash_handle",{error:e.message}),null==(_window___errorQueue=window.__errorQueue)||_window___errorQueue.push(e),null==(_codex=codex)||null==(_codex_monitorError=_codex.monitorError)||_codex_monitorError.sendException(e))},"logError"),Hg="GameSDK Initialize",jg=a(function(){var n=console.time,e=console.timeEnd,t=console.timeLog,r=a(function(o){return o[0]===Hg},"skipMark");console.time=function(){for(var _n,_len=arguments.length,o=Array(_len),_key=0;_key<_len;_key++)o[_key]=arguments[_key];r(o)||(_n=n).call.apply(_n,[console].concat(_to_consumable_array(o)))},console.timeEnd=function(){for(var _e,_len=arguments.length,o=Array(_len),_key=0;_key<_len;_key++)o[_key]=arguments[_key];r(o)||(_e=e).call.apply(_e,[console].concat(_to_consumable_array(o)))},console.timeLog=function(){for(var _t,_len=arguments.length,o=Array(_len),_key=0;_key<_len;_key++)o[_key]=arguments[_key];r(o)||(_t=t).call.apply(_t,[console].concat(_to_consumable_array(o)))}},"monitorGameSDKFlows"),kn=a(function(n,e){var _codex_analytics,_codex;n&&(null==(_codex=codex)||null==(_codex_analytics=_codex.analytics)||_codex_analytics.event(n,e))},"logAnalyticsEvent"),mr=null,Wg=a(function(){Gn(),mr=setTimeout(function(){var _GameSDK_extra_displayWarnLoading,_GameSDK_extra,_GameSDK;window.__sdkLoad.percent<=5&&(null==(_GameSDK=GameSDK)||null==(_GameSDK_extra=_GameSDK.extra)||null==(_GameSDK_extra_displayWarnLoading=_GameSDK_extra.displayWarnLoading)||_GameSDK_extra_displayWarnLoading.call(_GameSDK_extra,!0))},8e3)},"startSlowLoadingCheck"),Gn=a(function(){var _GameSDK_extra_displayWarnLoading,_GameSDK_extra,_GameSDK;null!==mr&&(clearTimeout(mr),mr=null),null==(_GameSDK=GameSDK)||null==(_GameSDK_extra=_GameSDK.extra)||null==(_GameSDK_extra_displayWarnLoading=_GameSDK_extra.displayWarnLoading)||_GameSDK_extra_displayWarnLoading.call(_GameSDK_extra,!1)},"clearSlowLoadingCheck"),Fd=!1,zg=a(function(n){return _async_to_generator(function(){var e;return _ts_generator(this,function(_state){return Fd?[2]:(Fd=!0,[2,((e=document.createElement("script")).src="https://www.googletagmanager.com/gtag/js?id=".concat(n),e.async=!0,new Promise(function(t,r){var o=!1,w=null,I=null,D=null,S=a(function(){null!==w&&clearTimeout(w),I&&e.removeEventListener("load",I),D&&e.removeEventListener("error",D)},"cleanup");w=setTimeout(function(){o||(o=!0,S(),r(Error("Timeout loading GA script after ".concat(10,"s"))))},1e4),I=a(function(){o||(o=!0,S(),t())},"loadHandler"),D=a(function(){o||(o=!0,S(),r(Error("Failed to load GA script")))},"errorHandler"),e.addEventListener("load",I),e.addEventListener("error",D),document.head.appendChild(e)}))])})})()},"loadGAScript"),qg=a(function(n,e,t){try{if("function"!=typeof window.gtag)return;var _$r=(null==(_GameSDK=GameSDK)?void 0:_GameSDK.getEntryPointData())||{},o=_$r.fbig_ad_id,w=_$r.fbig_adset_id,I=_$r.fbig_campaign_id,D=_$r.fb_instant_game_adset_id,S=_$r.fb_instant_game_ad_id,E=_$r.fb_instant_game_campaign_id,b=null!=(_ref=null!=o?o:S)?_ref:void 0,L=null!=(_ref1=null!=w?w:D)?_ref1:void 0,C=null!=(_ref2=null!=I?I:E)?_ref2:void 0;window.dataLayer=window.dataLayer||[],window.gtag("js",new Date),window.gtag("set",{client_id:"100.".concat(n),user_id:n,send_page_view:!1});var R=2,_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _GameSDK,_Ludex_Utils_Browser,_Ludex_Utils,_Ludex,_ref,_ref1,_ref2,_step,_iterator=t[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var k=_step.value;window.gtag("config",k,{cookie_flags:"SameSite=None;Secure",build:R,medium:e,campaign:C,groups:"GA"})}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}var $=((null==(_Ludex=Ludex)||null==(_Ludex_Utils=_Ludex.Utils)||null==(_Ludex_Utils_Browser=_Ludex_Utils.Browser)?void 0:_Ludex_Utils_Browser.getQueryParams())||{}).entry_point||e,z={user_id:n,player_id:n,app_version:R,traffic_source:e,traffic_source_detail:$,ad_id:b,adset_id:L,campaign_id:C,new_user:void 0,coins:void 0,score:void 0};window.gtag("set","user_properties",z)}catch(r){Pt(r)}},"initGoogleAnalytics"),Yg=a(function(){return _async_to_generator(function(){var n;return _ts_generator(this,function(_state){n=[];try{return[2]}catch(t){Pt(t)}finally{Qg()}return[2]})})()},"processGoogleAnalytics"),Jg=a(function(){try{if(!(null==(_codex=codex)?void 0:_codex.player)||"function"!=typeof window.gtag)return;var _codex,_codex_player_getGameData,_GameSDK,_codex_player_getBestScore,_codex_player_getGameData_coins,_codex_player_isFirstSession,_$n=null!=(_codex_player_getBestScore=codex.player.getBestScore())?_codex_player_getBestScore:0,e=null!=(_codex_player_getGameData_coins=null==(_codex_player_getGameData=codex.player.getGameData())?void 0:_codex_player_getGameData.coins)?_codex_player_getGameData_coins:0,t=null!=(_codex_player_isFirstSession=codex.player.isFirstSession())?_codex_player_isFirstSession:void 0,r=(null==(_GameSDK=GameSDK)?void 0:_GameSDK.getEntryPointData())||{},o=r.content,w=r.notif_id,I={new_user:t,coins:e,score:_$n};(o||w)&&(I.traffic_source_detail=null!=o?o:"notif_".concat(w));var D=Object.entries(I).filter(function(param){var _param=_sliced_to_array(param,2),E=(_param[0],_param[1]);return void 0!==E}).reduce(function(S,param){var _param=_sliced_to_array(param,2),E=_param[0],b=_param[1];return S[E]=b,S},{});Object.keys(D).length>0&&window.gtag("set","user_properties",D)}catch(n){Pt(n)}},"updateUserProperties"),Qg=a(function(){var n=Ludex.Events,tmp=Ludex.Plugins.Analytics,e=(void 0===tmp?{}:tmp).Events;if(e)try{kn(e.APP_LAUNCH),codex.event.catchUp(n.GAME_SDK_READY,function(){kn(e.APP_INITIALIZED)}),codex.event.catchUp(n.PLAYER_INFO_LOADED,Jg)}catch(t){Pt(t)}finally{codex.event.emit(n.ANALYTICS_READY)}},"finalizeAnalyticsInitialization"),Ud=a(function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return _async_to_generator(function(){var _$e,e;return _ts_generator(this,function(_state){switch(_state.label){case 0:return _state.trys.push([0,2,,3]),Wg(),[4,GameSDK.initializeAsync()];case 1:return _state.sent(),Gn(),Kg(100),_$e=Yg(),codex.event.emit(Ludex.Events.GAME_SDK_READY),[3,3];case 2:if(e=_state.sent(),Gn(),Bd(),n>=5)return Pt(e),[2];return setTimeout(function(){return Ud(n+1)},2e3),[3,3];case 3:return[2]}})})()},"initGameSDK"),Xg=a(function(){var n=0,e=a(function(){"GameSDK"in window?Ud():n<1e4?(n+=50,setTimeout(e,50)):Pt(Error("GameSDK not found after ".concat(10,"s")))},"check");e()},"waitForGameSDKAndInitialize"),jg(),Xg()}),m=W(function(){Zg=window.navigator.getGamepads,window.navigator.getGamepads=function(){try{return Zg()}catch(e){return[]}}}),h=W(function(){window.performance=window.performance||{},("function"!=typeof performance.mark||"function"!=typeof performance.measure)&&(window.performance={mark:a(function(){},"mark"),measure:a(function(){},"measure")}),performance.mark("load-start")}),f=W(function(){Fn="0",Bn="0",eP=a(function(){if(URLSearchParams){var n=new URLSearchParams(window.location.search);Fn=n.get("no-toolbar")||Fn,Bn=n.get("no-vconsole")||Bn,"1"===Fn&&tP(),"1"===Bn&&rP()}},"initUtils"),tP=a(function(){var n=setInterval(function(){var e=document.querySelector(".toolbar");_instanceof(e,HTMLDivElement)&&(clearInterval(n),e.style.display="none")},100)},"setupNoToolbar"),rP=a(function(){Object.defineProperty(window,"VConsole",{value:void 0,writable:!1,configurable:!1});var n=document.querySelector('script[src="/node_modules/vconsole/dist/vconsole.min.js"]');n&&n.remove()},"setupNoVConsole"),eP(),nP=["Init Base","Init Infrastructure","Init SubSystem","Init Project"],a(function(){var n=console.time,e=console.timeEnd,t=console.timeLog,r=a(function(o){return!!nP.includes(o[0])},"skipMark");console.time=function(){for(var _n,_len=arguments.length,o=Array(_len),_key=0;_key<_len;_key++)o[_key]=arguments[_key];r(o)||(_n=n).call.apply(_n,[console].concat(_to_consumable_array(o)))},console.timeEnd=function(){for(var _e,_len=arguments.length,o=Array(_len),_key=0;_key<_len;_key++)o[_key]=arguments[_key];r(o)||(_e=e).call.apply(_e,[console].concat(_to_consumable_array(o)))},console.timeLog=function(){for(var _t,_len=arguments.length,o=Array(_len),_key=0;_key<_len;_key++)o[_key]=arguments[_key];r(o)||(_t=t).call.apply(_t,[console].concat(_to_consumable_array(o)))}},"monitorEngineFlows")()}),y=W(function(){oP=a(function(){System.register(["../application.js"],function(){var n,e=function e(r){return System.import(r)};function t(){var r=document.getElementById("GameCanvas"),o=null==r?void 0:r.parentElement;if(!o)return void setTimeout(t,300);r.style.position="relative";var w=o.getBoundingClientRect();r.width=w.width,r.height=w.height;var I=new n;e("cc").then(function(D){return new Promise(function(S){codex.event.catchUp(Ludex.Events.CORE_BOOTING,function(){window.__sdkLoad.ensure(20),S(I.init(D))})})}).then(function(){return window.__sdkLoad.ensure(30),I.start()}).then(function(){window.__sdkLoad.ensure(40)}).catch(function(D){var _codex_monitorError,S=Ludex.Utils.Function.toError(D);null==(_codex_monitorError=codex.monitorError)||_codex_monitorError.sendException(S)})}return a(e,"topLevelImport"),a(t,"execute"),{setters:[function(r){n=r.Application}],execute:t}})},"initCocos"),sP=a(function(){var _e,_t,n=System,e=n.import,t=n.register,r=a(function(o){setTimeout(function(){return n.delete(o)},8e3)},"deleteModule");n.import=function(){for(var _len=arguments.length,o=Array(_len),_key=0;_key<_len;_key++)o[_key]=arguments[_key];return r(o[0]),(_e=e).call.apply(_e,[n].concat(_to_consumable_array(o)))},n.register=function(){for(var _len=arguments.length,o=Array(_len),_key=0;_key<_len;_key++)o[_key]=arguments[_key];return(Array.isArray(o[0])?o[0]:[o[0]]).forEach(r),(_t=t).call.apply(_t,[n].concat(_to_consumable_array(o)))}},"injectFlushSystem"),iP=setInterval(function(){"System"in window&&(clearInterval(iP),sP(),oP())},5)}),g=W(function(){window.dataLayer=window.dataLayer||[],a(cP,"trace"),window.gtag=cP,a(lP,"addGoogleAnalyticsScript"),lP()}),P=W(function(){Vd=a(function(n){if(n.startsWith("http")||n.startsWith("data:"))return n;var _n_split=_sliced_to_array(n.split("?"),2),e=_n_split[0],t=_n_split[1],r=e.split("/").map(function(o){return o&&o.replace(/[^a-zA-Z0-9\-._]/g,".")}).join("/");return t?"".concat(r,"?").concat(t):r},"sanitizeUrl"),a(Kn=/*#__PURE__*/function(dP1){function Kn1(){return _class_call_check(this,Kn1),_call_super(this,Kn1,arguments)}return _inherits(Kn1,dP1),_create_class(Kn1,[{key:"open",value:function open(e,t,r,o,w){var I="string"==typeof t?Vd(t):t;_get(_get_prototype_of(Kn1.prototype),"open",this).call(this,e,I,!1!==r,o,w)}}]),Kn1}(window.XMLHttpRequest),"YoutubeAdapterRequest"),Un=Kn,window.XMLHttpRequest=Un,a(Hn=/*#__PURE__*/function(uP1){function Hn1(){return _class_call_check(this,Hn1),_call_super(this,Hn1,arguments)}return _inherits(Hn1,uP1),_create_class(Hn1,[{key:"src",get:function get(){return _get(_get_prototype_of(Hn1.prototype),"src",this)},set:function set(e){_set(_get_prototype_of(Hn1.prototype),"src",Vd(e),this,!0)}}]),Hn1}(window.Image),"YoutubeAdapterImage"),Vn=Hn,window.Image=Vn}),Q={};kd(Q,{default:function(){return O}});var O,Wn,hr,Yn,fr,pP,Xn,yr,gr,mP,hP,fP,yP,Kd,ea,ra,Hd,Wd,zd,aa,Pr,ia,qd,Ut,gP,PP,xP,wP,$P,Jd,ca,da,Qd,pa,xr,fa,Zd,tu,ga,ru,xa,au,$a,su,va,cu,ba,vP,xt,_=W(function(){s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),O=null}),zn=W(function(){s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),Wn=/*#__PURE__*/function(){function Wn1(e){var _this=this;_class_call_check(this,Wn1),_define_property(this,"c",void 0),_define_property(this,"t",void 0),_define_property(this,"H",null),_define_property(this,"K","SOLO"),_define_property(this,"Pt",[]),_define_property(this,"ae",null),_define_property(this,"x",null),_define_property(this,"se",null),_define_property(this,"Xe",void 0),_define_property(this,"It",[]),_define_property(this,"fe",void 0),_define_property(this,"V",a(function(e){return function(){_this.t.isPopupShown=!1,e(!0)}},"handleOnYes$")),_define_property(this,"W",a(function(e){return function(){_this.t.isPopupShown=!1;try{_this.t.exceptionUserInput("Player closed the context menu")}catch(t){e(t)}}},"handleOnNo$")),this.c=e,this.t=e.extra}return _create_class(Wn1,[{key:"setCurrentContextId",value:function setCurrentContextId(e){this.ge(e),this.H=e,this.K="THREAD"}},{key:"initContextInfo",value:function initContextInfo(e,t){var _Ludex_Utils=Ludex.Utils,r=_Ludex_Utils.Array,o=_Ludex_Utils.String;this.Xe={},this.fe={},this.It=r.fillWith(10,function(){return o.generateObjectId()}),!(!e||!t)&&(0>["SOLO","THREAD","POST","GROUP"].indexOf(t)||(this.H=e,this.K=t))}},{key:"getID",value:function getID(){return this.H}},{key:"getType",value:function getType(){return this.K}},{key:"hs",value:function hs(){return _async_to_generator(function(){var e,_tmp;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(this.se)return[2];return[4,Promise.resolve().then(function(){return _(),Q})];case 1:if(!(_tmp="function"==typeof(e=_state.sent().default)))return[3,3];return this.se=new e,[4,this.se.setupTemplate()];case 2:_tmp=_state.sent(),_state.label=3;case 3:return[2]}})}).call(this)}},{key:"us",value:function us(){return _async_to_generator(function(){var e,_tmp;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(this.ae)return[2];return[4,Promise.resolve().then(function(){return _(),Q})];case 1:if(!(_tmp="function"==typeof(e=_state.sent().default)))return[3,3];return this.ae=new e,[4,this.ae.setupTemplate()];case 2:_tmp=_state.sent(),_state.label=3;case 3:return[2]}})}).call(this)}},{key:"ps",value:function ps(){return _async_to_generator(function(){var e,_tmp;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(this.x)return[2];return[4,Promise.resolve().then(function(){return _(),Q})];case 1:if(!(_tmp="function"==typeof(e=_state.sent().default)))return[3,3];return this.x=new e,[4,this.x.setupTemplate()];case 2:_tmp=_state.sent(),_state.label=3;case 3:return[2]}})}).call(this)}},{key:"switchAsync",value:function switchAsync(_0){return _async_to_generator(function(e){var _this,t,r,_arguments=arguments;return _ts_generator(this,function(_state){switch(_state.label){case 0:return _this=this,t=_arguments.length>1&&void 0!==_arguments[1]&&_arguments[1],this.t.checkPopupShown(),[4,this.t.awaitRandomDelay()];case 1:if(_state.sent(),this.ys(e),"SOLO"===e&&t)return this.H=null,this.K="SOLO",this.Ze([]),[2];return[4,this.hs()];case 2:return _state.sent(),[4,new Promise(function(o,w){_this.se||_this.c.extra.exceptionUnsupported(),_this.se.onYes(_this.V(o)),_this.se.onNo(_this.W(w)),_this.se.show(e),_this.t.isPopupShown=!0})];case 3:return _state.sent(),this.H=e,this.K="THREAD",this.ga(e,10),r=this.fe[e].map(function(o){return _this.Dt(o)}),this.Ze(r),[2]}})}).apply(this,arguments)}},{key:"chooseAsync",value:function chooseAsync(e){return _async_to_generator(function(){var _this,t,r,o;return _ts_generator(this,function(_state){switch(_state.label){case 0:return _this=this,this.t.checkPopupShown(),[4,this.t.awaitRandomDelay()];case 1:return _state.sent(),[4,this.us()];case 2:return _state.sent(),[4,new Promise(function(w,I){_this.ae||_this.c.extra.exceptionUnsupported(),_this.ae.onYes(_this.V(w)),_this.ae.onNo(_this.W(I)),_this.ae.show(),_this.t.isPopupShown=!0})];case 3:return _state.sent(),t=Math.floor(Math.random()*this.It.length),r=this.It[t],this.ge(r),this.H=r,this.K="THREAD",this.ga(r,2),o=this.fe[r].map(function(w){return _this.Dt(w)}),this.Ze(o),[2]}})}).call(this)}},{key:"createAsync",value:function createAsync(e){return _async_to_generator(function(){var _this,o,t,r;return _ts_generator(this,function(_state){switch(_state.label){case 0:return _this=this,this.t.checkPopupShown(),[4,this.t.awaitRandomDelay()];case 1:return _state.sent(),[4,this.fs(e)];case 2:return _state.sent(),[4,this.ps()];case 3:return _state.sent(),[4,new Promise(function(o,w){_this.x||_this.c.extra.exceptionUnsupported(),_this.x.onYes(_this.V(o)),_this.x.onNo(_this.W(w)),_this.x.show(e),_this.t.isPopupShown=!0})];case 4:return _state.sent(),this.Xe[e]||(o=Ludex.Utils.String,this.Xe[e]=o.generateObjectId()),t=this.Xe[e],this.ge(t),this.H=t,this.K="THREAD",r=this.Dt(e),this.Ze([r]),[2]}})}).call(this)}},{key:"getPlayersAsync",value:function getPlayersAsync(){return _async_to_generator(function(){return _ts_generator(this,function(_state){switch(_state.label){case 0:return[4,this.t.awaitRandomDelay()];case 1:return[2,(_state.sent(),this.Pt)]}})}).call(this)}},{key:"ga",value:function ga(e,t){if(!this.fe[e]){var _Ludex_Utils=Ludex.Utils,r=_Ludex_Utils.Array,o=_Ludex_Utils.String,w=Math.floor(Math.random()*t),I=r.fillWith(w,function(){return o.generateObjectId()});this.fe[e]=I}return this.fe[e]}},{key:"Dt",value:function Dt(e){return{getID:a(function(){return e},"getID"),getName:a(function(){return"Player ".concat(e)},"getName"),getPhoto:a(function(){return""},"getPhoto")}}},{key:"Ze",value:function Ze(e){if("SOLO"===this.K){this.Pt=[];return}this.Pt=e}},{key:"ge",value:function ge(e){this.H===e&&this.t.exceptionSameContext()}},{key:"fs",value:function fs(e){return _async_to_generator(function(){var r,t;return _ts_generator(this,function(_state){switch(_state.label){case 0:return(!e||Array.isArray(e))&&this.t.exceptionClientUnsupportedOperation("Client does not support no player IDS or multiple player IDs yet"),Ludex.Utils.Valid.isString(e)||(r="Array of type String contained a value of another type: ".concat(e),this.t.exceptionInvalidParam(r)),e===GameSDK.player.getID()&&this.t.exceptionInvalidParam("At least one player id besides the current player must be provided."),[4,GameSDK.player.getConnectedPlayersAsync()];case 1:if(_state.sent().some(function(r){return r.getID()===e}))return[2];return t="Provided ID ".concat(e," is not a connected player of the current player."),this.t.exceptionInvalidParam(t),[2]}})}).call(this)}},{key:"ys",value:function ys(e){this.ge(e),Ludex.Utils.Valid.isString(e)||this.t.exceptionClientUnsupportedOperation("Client requires update to support this operation")}}]),Wn1}(),a(Wn,"Context"),hr=Wn}),Jn=W(function(){s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),a(Yn=/*#__PURE__*/function(Error1){function Yn1(e,t){var _this;return _class_call_check(this,Yn1),_define_property(_this=_call_super(this,Yn1,[t]),"code",void 0),_this.code=e,_this}return _inherits(Yn1,Error1),Yn1}(_wrap_native_super(Error)),"SDKCommonError"),fr=Yn}),Zn=W(function(){s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),Jn(),pP=1e4,a(Xn=/*#__PURE__*/function(){function Xn1(e){_class_call_check(this,Xn1),_define_property(this,"c",void 0),_define_property(this,"isGuest",!1),_define_property(this,"isPopupShown",!1),_define_property(this,"z",null),this.c=e}return _create_class(Xn1,[{key:"checkAndSubscribeBotAsync",value:function checkAndSubscribeBotAsync(){return _async_to_generator(function(){var e,tmp,t,e1;return _ts_generator(this,function(_state){switch(_state.label){case 0:return[4,this.c.player.canSubscribeBotAsync()];case 1:if(!_state.sent())return[2,!1];e=codex.analytics,(t=(void 0===(tmp=Ludex.Plugins.Analytics)?{}:tmp).Events)&&e.event(t.BOT_SUBSCRIBE_POPUP),_state.label=2;case 2:return _state.trys.push([2,5,,6]),[4,this.waitSDKInitiatedAsync()];case 3:return _state.sent(),[4,this.c.player.subscribeBotAsync()];case 4:return[2,(_state.sent(),t&&e.event(t.BOT_SUBSCRIBE,{success:!0}),!0)];case 5:return e1=_state.sent(),[2,(t&&e.event(t.BOT_SUBSCRIBE,{success:!1}),!1)];case 6:return[2]}})}).call(this)}},{key:"checkAndCreateShortcutAsync",value:function checkAndCreateShortcutAsync(){return _async_to_generator(function(){var e,tmp,t,e1;return _ts_generator(this,function(_state){switch(_state.label){case 0:return[4,this.c.canCreateShortcutAsync()];case 1:if(!_state.sent())return[2];e=codex.analytics,(t=(void 0===(tmp=Ludex.Plugins.Analytics)?{}:tmp).Events)&&e.event(t.SHORTCUT_CREATE_POPUP),_state.label=2;case 2:return _state.trys.push([2,5,,6]),[4,this.waitSDKInitiatedAsync()];case 3:return _state.sent(),[4,this.c.createShortcutAsync()];case 4:return _state.sent(),t&&e.event(t.SHORTCUT_CREATE,{success:!0}),[3,6];case 5:return e1=_state.sent(),t&&e.event(t.SHORTCUT_CREATE,{success:!1}),[3,6];case 6:return[2]}})}).call(this)}},{key:"waitSDKInitiatedAsync",value:function waitSDKInitiatedAsync(){var e=Ludex.Events.GAME_SDK_READY;return new Promise(function(t){codex.event.catchUp(e,t)})}},{key:"waitLudexReadyAsync",value:function waitLudexReadyAsync(){return _async_to_generator(function(){var e;return _ts_generator(this,function(_state){return e=0,[2,new Promise(function(t){var r=setInterval(function(){if("Ludex"in window){clearInterval(r),t();return}(e+=10)>pP&&(e=0)},10)})]})})()}},{key:"createLoadingElement",value:function createLoadingElement(){return _async_to_generator(function(){var e;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(this.z)return[2];return[4,Promise.resolve().then(function(){return _(),Q})];case 1:return"function"==typeof(e=_state.sent().default)&&(this.z=new e),[2]}})}).call(this)}},{key:"setLoadingElementProgress",value:function setLoadingElementProgress(e){this.z&&this.z.setLoadingProgress(e)}},{key:"displayWarnLoading",value:function displayWarnLoading(e){this.z&&this.z.displayWarnLoading(e)}},{key:"destroyLoadingElement",value:function destroyLoadingElement(){this.z&&this.z.removeLoadingElement()}},{key:"checkPopupShown",value:function checkPopupShown(){this.isPopupShown&&this.exceptionPendingRequest("Please wait for the popup to close")}},{key:"delayInitialAsync",value:function delayInitialAsync(){return _async_to_generator(function(){var e,t,_tmp;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(e=Ludex.Utils.Time,_tmp=!(t=Ludex.Configs.Mockup.GameSDK.SlowAPI).Enabled||t.InitialDelay<=0)return[3,2];return[4,e.sleepAsync(t.InitialDelay)];case 1:_tmp=_state.sent(),_state.label=2;case 2:return[2]}})})()}},{key:"delayStartAsync",value:function delayStartAsync(){return _async_to_generator(function(){var e,t,_tmp;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(e=Ludex.Configs.Mockup.GameSDK.SlowAPI,t=Ludex.Utils.Time,_tmp=!e.Enabled||e.StartDelay<=0)return[3,2];return[4,t.sleepAsync(e.StartDelay)];case 1:_tmp=_state.sent(),_state.label=2;case 2:return[2]}})})()}},{key:"delayPlayerDataAsync",value:function delayPlayerDataAsync(){return _async_to_generator(function(){var e,t,_tmp;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(e=Ludex.Configs.Mockup.GameSDK.SlowAPI,t=Ludex.Utils.Time,_tmp=!e.Enabled||e.PlayerDataDelay<=0)return[3,2];return[4,t.sleepAsync(e.PlayerDataDelay)];case 1:_tmp=_state.sent(),_state.label=2;case 2:return[2]}})})()}},{key:"awaitRandomDelay",value:function awaitRandomDelay(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;return Ludex.Utils.Time.sleepAsync(Math.random()*e)}},{key:"randomException",value:function randomException(e){var t=Math.floor(Math.random()*e.length),r=e[t];this["exception".concat(r)]()}},{key:"getErrorMessage",value:function getErrorMessage(e){var _Ludex_Utils=Ludex.Utils,t=_Ludex_Utils.Valid;return _Ludex_Utils.Object.hasOwn(e,"message")&&t.isString(e.message)?e.message:null}},{key:"A",value:function A(e,t){throw new fr(e,t)}},{key:"exceptionUserInput",value:function exceptionUserInput(e){this.A("USER_INPUT",e)}},{key:"exceptionUnsupported",value:function exceptionUnsupported(){this.A("UNSUPPORTED","Unsupported method")}},{key:"exceptionInvalidParam",value:function exceptionInvalidParam(e){this.A("INVALID_PARAM",e)}},{key:"exceptionPendingRequest",value:function exceptionPendingRequest(e){this.A("PENDING_REQUEST",e)}},{key:"exceptionMethodNotImplemented",value:function exceptionMethodNotImplemented(){this.A("METHOD_NOT_IMPLEMENTED","Method not implemented")}},{key:"exceptionTournamentNotFound",value:function exceptionTournamentNotFound(e){this.A("TOURNAMENT_NOT_FOUND",e)}},{key:"exceptionSameContext",value:function exceptionSameContext(){this.A("SAME_CONTEXT","Must specify a context other than the current one.")}},{key:"exceptionInvalidOperation",value:function exceptionInvalidOperation(e){this.A("INVALID_OPERATION",e)}},{key:"exceptionNetworkFailure",value:function exceptionNetworkFailure(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Request failed to be processed";this.A("NETWORK_FAILURE",e)}},{key:"exceptionUnknown",value:function exceptionUnknown(e){this.A("UNKNOWN",e)}},{key:"exceptionClientUnsupportedOperation",value:function exceptionClientUnsupportedOperation(e){this.A("CLIENT_UNSUPPORTED_OPERATION",e)}},{key:"exceptionRateLimited",value:function exceptionRateLimited(e){this.A("RATE_LIMITED",e)}}]),Xn1}(),"Extra"),yr=Xn}),jd=W(function(){s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),mP=_to_consumable_array(gr=["Unsupported","NetworkFailure","PendingRequest","ClientUnsupportedOperation"]).concat(["InvalidParam"]),hP=_to_consumable_array(gr).concat(["InvalidParam","UserInput"]),fP=_to_consumable_array(gr).concat(["NetworkFailure"]),yP=_to_consumable_array(gr).concat(["InvalidParam","UserInput"]),Kd="ProductsDataMockKey",ea="PurchasesDataMockKey",ra=/*#__PURE__*/function(){function ra1(e){var _this=this;_class_call_check(this,ra1),_define_property(this,"c",void 0),_define_property(this,"t",void 0),_define_property(this,"n",void 0),_define_property(this,"re",null),_define_property(this,"V",a(function(e){return function(){_this.t.isPopupShown=!1,e(!0)}},"handleOnYes$")),_define_property(this,"W",a(function(e){return function(){_this.t.isPopupShown=!1;try{_this.t.exceptionUserInput("Player closed the context menu")}catch(t){e(t)}}},"handleOnNo$")),this.c=e,this.t=e.extra,this.n=e.context}return _create_class(ra1,[{key:"initPaymentInfoAsync",value:function initPaymentInfoAsync(){return _async_to_generator(function(){var _tmp;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(!(_tmp=Ludex.Configs.Mockup.GameSDK.Payments.Enabled))return[3,2];return[4,this.gs()];case 1:_tmp=_state.sent(),_state.label=2;case 2:return[2]}})}).call(this)}},{key:"getCatalogAsync",value:function getCatalogAsync(){return _async_to_generator(function(){return _ts_generator(this,function(_state){switch(_state.label){case 0:return[4,this._()];case 1:return _state.sent(),this.et(mP),[2,Object.values(this.St())]}})}).call(this)}},{key:"ws",value:function ws(){return _async_to_generator(function(){var e,_tmp;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(this.re)return[2];return[4,Promise.resolve().then(function(){return _(),Q})];case 1:if(!(_tmp="function"==typeof(e=_state.sent().default)))return[3,3];return this.re=new e,[4,this.re.setupTemplate()];case 2:_tmp=_state.sent(),_state.label=3;case 3:return[2]}})}).call(this)}},{key:"purchaseAsync",value:function purchaseAsync(e){return _async_to_generator(function(){var _this;return _ts_generator(this,function(_state){switch(_state.label){case 0:return _this=this,this.t.checkPopupShown(),[4,this._()];case 1:return _state.sent(),this.xs(e),this.et(hP),[4,this.ws()];case 2:return _state.sent(),[4,new Promise(function(t,r){_this.re||_this.c.extra.exceptionUnsupported(),_this.re.onYes(_this.V(t)),_this.re.onNo(_this.W(r)),_this.re.show(e),_this.t.isPopupShown=!0})];case 3:return[2,(_state.sent(),this.As(e))]}})}).call(this)}},{key:"getPurchasesAsync",value:function getPurchasesAsync(){return _async_to_generator(function(){var e;return _ts_generator(this,function(_state){switch(_state.label){case 0:return[4,this._()];case 1:return _state.sent(),this.et(fP),[2,(e=this.c.player.getID())&&this.Et()[e]||[]]}})}).call(this)}},{key:"consumePurchaseAsync",value:function consumePurchaseAsync(e){return _async_to_generator(function(){var t,r;return _ts_generator(this,function(_state){switch(_state.label){case 0:return[4,this._()];case 1:if(_state.sent(),this.vs(e),this.et(yP),!(t=this.c.player.getID()))return[2];return r=(this.Et()[t]||[]).filter(function(o){return o.purchaseToken!==e}),this.wa(t,r),[2]}})}).call(this)}},{key:"onReady",value:function onReady(e){e()}},{key:"_",value:function _1(){return _async_to_generator(function(){var e;return _ts_generator(this,function(_state){return e=Ludex.Configs.Mockup.GameSDK.Payments.RandomDelayMs,[2,this.t.awaitRandomDelay(e)]})}).call(this)}},{key:"et",value:function et(e){100*Math.random()<Ludex.Configs.Mockup.GameSDK.Payments.ErrorRates&&this.t.randomException(e)}},{key:"xs",value:function xs(e){var _Ludex_Utils=Ludex.Utils,t=_Ludex_Utils.Object,r=_Ludex_Utils.Valid;r.isObject(e)||this.t.exceptionInvalidParam("Config must be an object"),t.hasOwn(e,"productID")||this.t.exceptionInvalidParam("Config must have productID");var o=e.productID;r.isString(o)||this.t.exceptionInvalidParam("productID must be a string"),t.hasOwn(e,"developerPayload")&&!r.isString(e.developerPayload)&&this.t.exceptionInvalidParam("developerPayload must be a string")}},{key:"vs",value:function vs(e){Ludex.Utils.Valid.isString(e)||this.t.exceptionInvalidParam("Purchase token must be a string")}},{key:"As",value:function As(e){var t=Ludex.Utils.String,r={productID:e.productID,paymentID:t.generateObjectId(),purchaseToken:t.generateObjectId(),purchaseTime:new Date().toISOString(),developerPayload:e.developerPayload,signedRequest:t.generateObjectId()},o=this.c.player.getID();if(o){var w=this.Et()[o]||[];w.push(r),this.wa(o,w)}return r}},{key:"gs",value:function gs(){return _async_to_generator(function(){var _Ludex_Configs_Mockup_GameSDK_Payments,e,t;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(e=(_Ludex_Configs_Mockup_GameSDK_Payments=Ludex.Configs.Mockup.GameSDK.Payments).Enabled,t=_Ludex_Configs_Mockup_GameSDK_Payments.Products,!e||Object.values(this.St()).length>=t.length)return[2];return[4,Promise.all(this.Ps())];case 1:return _state.sent(),[2]}})}).call(this)}},{key:"Ps",value:function Ps(){var _this=this;return Ludex.Configs.Mockup.GameSDK.Payments.Products.map(function(t){var r={productID:t.id,title:"Product ".concat(t.id),description:"Description for ".concat(t.id),price:t.price.toString(),priceCurrencyCode:"USD",priceAmount:t.price};return _this.Is(t.id,r),r})}},{key:"St",value:function St(){var _Ludex_Utils=Ludex.Utils,e=_Ludex_Utils.Browser,t=_Ludex_Utils.Valid,r=e.getLocalStorage(Kd);return t.isObject(r)?r:{}}},{key:"Is",value:function Is(e,t){var r=this.St();r[e]=t,this.Ds(r)}},{key:"Ds",value:function Ds(e){var _Ludex_Utils=Ludex.Utils,t=_Ludex_Utils.Browser;_Ludex_Utils.Valid.isObject(e)&&t.writeLocalStorage(Kd,e)}},{key:"Et",value:function Et(){var _Ludex_Utils=Ludex.Utils,e=_Ludex_Utils.Browser,t=_Ludex_Utils.Valid,r=e.getLocalStorage(ea);return t.isObject(r)?r:{}}},{key:"wa",value:function wa(e,t){var _r_getLocalStorage,r=Ludex.Utils.Browser;if(Array.isArray(t)){var o=null!=(_r_getLocalStorage=r.getLocalStorage(ea))?_r_getLocalStorage:{};o[e]=t,r.writeLocalStorage(ea,o)}}}]),ra1}(),a(ra,"Payments"),Hd=ra}),oa=W(function(){s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),Wd="Save The Pets".replace(/ /g,"-"),zd="https://picsum.photos/seed/%1/300/300",aa=/*#__PURE__*/function(){function aa1(e){var _this=this;_class_call_check(this,aa1),_define_property(this,"c",void 0),_define_property(this,"t",void 0),_define_property(this,"xa",void 0),_define_property(this,"S",void 0),_define_property(this,"Aa","".concat(Wd,"_PlayerInfo")),_define_property(this,"va","".concat(Wd,"_PlayerData")),_define_property(this,"we",null),_define_property(this,"tt",null),_define_property(this,"bs",a(function(){var _$e=_this.Cs();return Ludex.Utils.Valid.isString(_$e)?_$e:"default_token"},"getSignature$")),this.c=e,this.t=e.extra,this.Ss()}return _create_class(aa1,[{key:"Ss",value:function Ss(){var e="guest-007";this.xa={playerId:e,playerName:"Guest",playerPhoto:zd.replace("%1",e)},this.t.isGuest=!0,this.S=N({},this.xa)}},{key:"initPlayerInfo",value:function initPlayerInfo(e){this.Es(e),Ludex.Utils.Browser.writeLocalStorage(this.Aa,this.S)}},{key:"canSubscribeBotAsync",value:function canSubscribeBotAsync(){return _async_to_generator(function(){return _ts_generator(this,function(_state){switch(_state.label){case 0:return[4,this.Pa()];case 1:return[2,(_state.sent(),this.we||this.t.exceptionUnsupported(),this.we.canSubscribeBotAsync())]}})}).call(this)}},{key:"subscribeBotAsync",value:function subscribeBotAsync(){return _async_to_generator(function(){return _ts_generator(this,function(_state){switch(_state.label){case 0:return[4,this.Pa()];case 1:return[2,(_state.sent(),this.we||this.t.exceptionUnsupported(),this.we.subscribeBotAsync())]}})}).call(this)}},{key:"getID",value:function getID(){return this.S.playerId}},{key:"getName",value:function getName(){return this.S.playerName}},{key:"getPhoto",value:function getPhoto(){return this.S.playerPhoto}},{key:"getDataAsync",value:function getDataAsync(e){return _async_to_generator(function(){var _Ludex_Utils,t,r,o,w,I,_iteratorNormalCompletion,_didIteratorError,_iteratorError,_iterator,_step,D;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(e.length<1)return[2,{}];return[4,this.t.delayPlayerDataAsync()];case 1:if(_state.sent(),t=(_Ludex_Utils=Ludex.Utils).Browser,r=_Ludex_Utils.Valid,o=_Ludex_Utils.Object,w=t.getLocalStorage(this.va),!r.isObject(w))return[2,{}];I={},_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(_iterator=e[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0)D=_step.value,o.hasOwn(w,D)&&(I[D]=w[D])}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return[2,I]}})}).call(this)}},{key:"setDataAsync",value:function setDataAsync(e){return _async_to_generator(function(){return _ts_generator(this,function(_state){switch(_state.label){case 0:return[4,this.t.delayPlayerDataAsync()];case 1:return _state.sent(),Ludex.Utils.Browser.writeLocalStorage(this.va,e),[2]}})}).call(this)}},{key:"getSignedPlayerInfoAsync",value:function getSignedPlayerInfoAsync(){return _async_to_generator(function(){var _this;return _ts_generator(this,function(_state){return _this=this,[2,{getPlayerID:a(function(){var _this_getID;return null!=(_this_getID=_this.getID())?_this_getID:""},"getPlayerID"),getSignature:this.bs}]})}).call(this)}},{key:"getConnectedPlayersAsync",value:function getConnectedPlayersAsync(){return _async_to_generator(function(){return _ts_generator(this,function(_state){switch(_state.label){case 0:return[4,this.Ls()];case 1:return[2,(_state.sent(),this.tt||this.t.exceptionUnsupported(),this.tt.getConnectedPlayersAsync())]}})}).call(this)}},{key:"Es",value:function Es(e){var _Ludex_Utils=Ludex.Utils,t=_Ludex_Utils.Browser,r=_Ludex_Utils.Valid,o=_Ludex_Utils.Object,w=_Ludex_Utils.String,I=null!=e?e:"",D="Nameless";if(this.t.isGuest){var S=t.getLocalStorage(this.Aa);r.isObject(S)&&o.hasOwn(S,"playerId")&&r.isString(S.playerId)&&(I=S.playerId),r.isObject(S)&&o.hasOwn(S,"playerName")&&r.isString(S.playerName)&&(D=S.playerName)}r.isEmpty(I)&&(I=w.generateObjectId()),"Nameless"===D&&this.Os()&&(D=w.generateNameUsingString(I)),this.S.playerId=I,this.S.playerName=D,this.S.playerPhoto=zd.replace("%1",I),this._s(I)}},{key:"Os",value:function Os(){return(null==A?void 0:A.UseNameGenerator)===!0}},{key:"Ns",value:function Ns(){var e=Ludex.Configs.Mockup.Match;return e.Enabled?e.PlayerInfo:null}},{key:"Ts",value:function Ts(){var e=Ludex.Configs.Mockup.Match;return e.Enabled?e.OpponentInfo:null}},{key:"_s",value:function _s(e){var t=this.Ts();e!==(null==t?void 0:t.Id)&&(t=this.Ns()),t&&(this.S.playerId=t.Id,t.Name&&(this.S.playerName=t.Name),t.Photo&&(this.S.playerPhoto=t.Photo))}},{key:"Cs",value:function Cs(){var e=Ludex.Configs.Mockup.Match,t=e.PlayerInfo.Id===this.getID(),r=e.OpponentInfo.Id===this.getID();return t?e.PlayerInfo.Signature:r?e.OpponentInfo.Signature:null}},{key:"Pa",value:function Pa(){return _async_to_generator(function(){var e;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(this.we)return[2];return[4,Promise.resolve().then(function(){return _(),Q})];case 1:return"function"==typeof(e=_state.sent().default)&&(this.we=new e(this.c)),[2]}})}).call(this)}},{key:"Ls",value:function Ls(){return _async_to_generator(function(){var e;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(this.tt)return[2];return[4,Promise.resolve().then(function(){return _(),Q})];case 1:return"function"==typeof(e=_state.sent().default)&&(this.tt=new e(this.t)),[2]}})}).call(this)}}]),aa1}(),a(aa,"Player"),Pr=aa}),Yd=W(function(){s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),a(ia=/*#__PURE__*/function(){function ia1(e,t){var _o_endTime,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];_class_call_check(this,ia1),_define_property(this,"ne",void 0),_define_property(this,"bt",void 0),_define_property(this,"Lt",void 0),_define_property(this,"e",void 0),_define_property(this,"Ot",void 0),_define_property(this,"_t",void 0);var o=t.config,w=t.data;this.ne=e,this.bt=o.title,this.Lt="0123".concat(this.ne),this.e=JSON.stringify(null!=w?w:{}),this.Ot=null!=(_o_endTime=o.endTime)?_o_endTime:this.Rs(),this._t=r?"PAGE_HOSTED":"DEFAULT"}return _create_class(ia1,[{key:"Rs",value:function Rs(){return Math.round((Date.now()+6048e5)/1e3)}},{key:"getID",value:function getID(){return this.ne}},{key:"getTitle",value:function getTitle(){return this.bt}},{key:"getPayload",value:function getPayload(){return this.e}},{key:"getEndTime",value:function getEndTime(){return this.Ot}},{key:"getContextID",value:function getContextID(){return this.Lt}},{key:"getTournamentType",value:function getTournamentType(){return this._t}},{key:"toObject",value:function toObject(){return{id:this.ne,title:this.bt,payload:this.e,endTime:this.Ot,contextId:this.Lt,tournamentType:this._t}}}]),ia1}(),"TournamentInstance"),qd=ia}),Xd=W(function(){s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),zn(),Yd(),gP=_to_consumable_array(Ut=["Unsupported","NetworkFailure","PendingRequest","ClientUnsupportedOperation"]).concat(["InvalidParam","UserInput"]),PP=_to_consumable_array(Ut).concat(["InvalidOperation","UserInput"]),xP=_to_consumable_array(Ut).concat(["InvalidParam","UserInput"]),wP=_to_consumable_array(Ut).concat(["InvalidParam","UserInput"]),$P=_to_consumable_array(Ut).concat(["NetworkFailure"]),Jd="TournamentsDataMockKey",ca="TournamentLeadersMockKey",da=/*#__PURE__*/function(){function da1(e){var _this=this;_class_call_check(this,da1),_define_property(this,"c",void 0),_define_property(this,"t",void 0),_define_property(this,"n",void 0),_define_property(this,"ie",null),_define_property(this,"x",null),_define_property(this,"$s",a(function(e){return _async_to_generator(function(){var _tmp;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(!(_tmp=this.Ia(e)))return[3,2];return[4,this.joinAsync(e)];case 1:_tmp=_state.sent(),_state.label=2;case 2:return[2]}})}).call(_this)},"processEnterTournament$")),_define_property(this,"V",a(function(e){return function(){_this.t.isPopupShown=!1,e(!0)}},"handleOnYes$")),_define_property(this,"W",a(function(e){return function(){_this.t.isPopupShown=!1;try{_this.t.exceptionUserInput("Player closed the context menu")}catch(t){e(t)}}},"handleOnNo$")),this.c=e,this.t=e.extra,this.n=e.context}return _create_class(da1,[{key:"initTournamentInfoAsync",value:function initTournamentInfoAsync(e){return _async_to_generator(function(){var _tmp,_tmp1;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(!(_tmp=Ludex.Configs.Mockup.GameSDK.Tournament.Enabled))return[3,4];return[4,this.Ms()];case 1:if(_state.sent(),!(_tmp1=e))return[3,3];return[4,this.$s(e)];case 2:_tmp1=_state.sent(),_state.label=3;case 3:_tmp=_tmp1,_state.label=4;case 4:return[2]}})}).call(this)}},{key:"Ms",value:function Ms(){return _async_to_generator(function(){var e,_Ludex_Configs_Mockup_GameSDK_Tournament,t,r,o,w,I,D,S,E,b,L,C,R,$,z,k;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(e=Ludex.Utils.Object,t=(_Ludex_Configs_Mockup_GameSDK_Tournament=Ludex.Configs.Mockup.GameSDK.Tournament).Enabled,o=(r=_Ludex_Configs_Mockup_GameSDK_Tournament.NumOfTournament).Normal,w=r.HostPage,!t)return[2];return I=this.be(),D=e.vals(I),E=(S=this.Gs(D)).filter(function(Pe){return"DEFAULT"===Pe.tournamentType}),b=S.filter(function(Pe){return"PAGE_HOSTED"===Pe.tournamentType}),L=E.length,C=b.length,R=o-L,$=w-C,z=this.Us(R),k=this.Fs($),[4,Promise.all(_to_consumable_array(z).concat(_to_consumable_array(k)))];case 1:return _state.sent(),[2]}})}).call(this)}},{key:"Gs",value:function Gs(e){var t=Date.now()/1e3,r=e.filter(function(w){return w.endTime>t}),o={},_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=r[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var w=_step.value;o[w.id]=w}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return this.Da(o),r}},{key:"Us",value:function Us(e){var _this=this,_Ludex_Utils=Ludex.Utils,t=_Ludex_Utils.String,r=_Ludex_Utils.Array,o=_Ludex_Utils.Number,w=Ludex.Configs.Mockup.GameSDK.Tournament.ExtraPlayerTournamentPayload,I=codex.leaderboard,D=GameSDK.player.getID(),S=GameSDK.player.getName();return r.length(e).map(function(){return _async_to_generator(function(){var E,b,L,C,R;return _ts_generator(this,function(_state){switch(_state.label){case 0:return E="".concat(S,"'s Tournament ").concat(t.generateObjectId()),[4,I.createLeaderboardAsync({name:E})];case 1:if(b=_state.sent(),L=this.Nt({initialScore:0,config:{title:E,tournamentTitle:E},data:N({playerId:D,playerName:S,leaderboardId:b},w)}).getID().toString(),this.st(L))return[2];return C=o.random(2),(R=codex.player.getConnectedPlayerIds(C,0).map(function($){return{playerId:$,score:o.random(4)}})).sort(function($,z){return $.score-z.score}),this.Tt(L,R),[2]}})}).call(_this)})}},{key:"Fs",value:function Fs(e){var _this=this,_Ludex_Utils=Ludex.Utils,t=_Ludex_Utils.String,r=_Ludex_Utils.Array,o=_Ludex_Utils.Number,w=Ludex.Configs.Mockup.GameSDK.Tournament.ExtraGlobalTournamentPayload,I=codex.leaderboard;return r.length(e).map(function(){return _async_to_generator(function(){var D,S,E,b,L,C;return _ts_generator(this,function(_state){switch(_state.label){case 0:return S=N({leaderboardId:D=t.generateObjectId(),playerId:"global"},w),E="Global Tournament ".concat(D),[4,I.createLeaderboardAsync({name:E,_id:D,type:"world_tournament_leaderboard",description:JSON.stringify(S)})];case 1:if(_state.sent(),b=this.Nt({initialScore:0,config:{title:E,tournamentTitle:E},data:S},!0).getID().toString(),this.st(b))return[2];return L=o.random(2),(C=r.length(L).map(function(){return{playerId:t.generateObjectId(),score:o.random(4)}})).sort(function(R,$){return R.score-$.score}),this.Tt(b,C),[2]}})}).call(_this)})}},{key:"_",value:function _1(){return _async_to_generator(function(){var e;return _ts_generator(this,function(_state){return e=Ludex.Configs.Mockup.GameSDK.Tournament.RandomDelayMs,[2,this.t.awaitRandomDelay(e)]})}).call(this)}},{key:"randomError",value:function randomError(e){100*Math.random()<Ludex.Configs.Mockup.GameSDK.Tournament.ErrorRates&&this.t.randomException(e)}},{key:"ks",value:function ks(){return _async_to_generator(function(){var e,_tmp;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(this.x)return[2];return[4,Promise.resolve().then(function(){return _(),Q})];case 1:if(!(_tmp="function"==typeof(e=_state.sent().default)))return[3,3];return this.x=new e,[4,this.x.setupTemplate()];case 2:_tmp=_state.sent(),_state.label=3;case 3:return[2]}})}).call(this)}},{key:"js",value:function js(){return _async_to_generator(function(){var e,_tmp;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(this.ie)return[2];return[4,Promise.resolve().then(function(){return _(),Q})];case 1:if(!(_tmp="function"==typeof(e=_state.sent().default)))return[3,3];return this.ie=new e,[4,this.ie.setupTemplate()];case 2:_tmp=_state.sent(),_state.label=3;case 3:return[2]}})}).call(this)}},{key:"createAsync",value:function createAsync(e){return _async_to_generator(function(){var _this,t,r;return _ts_generator(this,function(_state){switch(_state.label){case 0:return _this=this,this.t.checkPopupShown(),[4,this._()];case 1:return _state.sent(),null!==this.n.getID()&&this.t.exceptionInvalidOperation("Cannot create tournament while in a context"),this.Bs(e),this.randomError(gP),[4,this.ks()];case 2:return _state.sent(),[4,new Promise(function(o,w){_this.x||_this.c.extra.exceptionUnsupported(),_this.x.onYes(_this.V(o)),_this.x.onNo(_this.W(w)),_this.x.show(e),_this.t.isPopupShown=!0})];case 3:return _state.sent(),r=(t=this.Nt(e)).getContextID(),[2,(this.Hs(r),t)]}})}).call(this)}},{key:"Nt",value:function Nt(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=Ludex.Utils.String.generateObjectId(),w=new qd(o,e,t),I=w.toObject();return this.Ks(o,I),w}},{key:"postScoreAsync",value:function postScoreAsync(e){return _async_to_generator(function(){var t;return _ts_generator(this,function(_state){switch(_state.label){case 0:return[4,this._()];case 1:return _state.sent(),this.Sa(),e<0&&this.t.exceptionInvalidParam("Score must be a positive number"),this.randomError(wP),t=codex.player.getPlayerId(),this.Ea(t,e),[2]}})}).call(this)}},{key:"shareAsync",value:function shareAsync(e){return _async_to_generator(function(){var _this,t,r,o,I,D,S,w;return _ts_generator(this,function(_state){switch(_state.label){case 0:return _this=this,this.t.checkPopupShown(),[4,this._()];case 1:return _state.sent(),this.Sa(),this.Vs(e),this.randomError(xP),[4,this.js()];case 2:return _state.sent(),r=t=e.score,(o=this.Ct())&&(I=codex.player.getPlayerId(),D=o.getID().toString(),(S=this.Ws(D,I))&&S<t&&(r=S)),[4,new Promise(function(I,D){_this.ie||_this.c.extra.exceptionUnsupported(),_this.ie.onYes(_this.V(I)),_this.ie.onNo(_this.W(D)),_this.ie.show(r),_this.t.isPopupShown=!0})];case 3:return _state.sent(),w=codex.player.getPlayerId(),this.Ea(w,t),[2]}})}).call(this)}},{key:"getTournamentsAsync",value:function getTournamentsAsync(){return _async_to_generator(function(){var _this,e;return _ts_generator(this,function(_state){switch(_state.label){case 0:return _this=this,[4,this._()];case 1:return _state.sent(),this.randomError($P),e=this.be(),[2,Ludex.Utils.Object.vals(e).map(function(r){return _this.Rt(r.id)}).filter(function(r){return null!==r})]}})}).call(this)}},{key:"joinAsync",value:function joinAsync(e){return _async_to_generator(function(){var r,o;return _ts_generator(this,function(_state){switch(_state.label){case 0:return[4,this._()];case 1:return _state.sent(),Ludex.Utils.Valid.isString(e)||this.t.exceptionInvalidParam("Tournament ID must be a string"),(r=this.Rt(e))||this.t.exceptionTournamentNotFound("Tournament could not be found."),this.randomError(PP),o=r.getContextID(),[4,GameSDK.context.switchAsync(o)];case 2:return _state.sent(),[2]}})}).call(this)}},{key:"Hs",value:function Hs(e){_instanceof(this.n,hr)&&this.n.setCurrentContextId(e)}},{key:"Ct",value:function Ct(){var e=this.n.getID();if(!e)return null;var t=this.be();for(var r in t)if(Object.hasOwn(t,r)&&t[r].contextId===e)return this.Rt(r);return null}},{key:"Bs",value:function Bs(e){var _Ludex_Utils=Ludex.Utils,t=_Ludex_Utils.Object,r=_Ludex_Utils.Valid;r.isObject(e)||this.t.exceptionInvalidParam("Payload must be an object"),t.hasOwn(e,"initialScore")||this.t.exceptionInvalidParam("Payload must have initialScore"),t.hasOwn(e,"config")||this.t.exceptionInvalidParam("Payload must have config");var o=e.initialScore,w=e.config;r.isNumber(o)||this.t.exceptionInvalidParam("initialScore must be a number"),r.isObject(w)||this.t.exceptionInvalidParam("Config must be an object"),t.hasOwn(w,"title")||this.t.exceptionInvalidParam("Config must have title"),t.hasOwn(w,"tournamentTitle")||this.t.exceptionInvalidParam("Config must have tournamentTitle"),t.hasOwn(e,"data")&&!r.isObject(e.data)&&this.t.exceptionInvalidParam("Data must be an object")}},{key:"Vs",value:function Vs(e){var _Ludex_Utils=Ludex.Utils,t=_Ludex_Utils.Object,r=_Ludex_Utils.Valid;r.isObject(e)||this.t.exceptionInvalidParam("Payload must be an object"),t.hasOwn(e,"score")||this.t.exceptionInvalidParam("Payload must have score");var o=e.score;r.isNumber(o)||this.t.exceptionInvalidParam("Score must be a number"),t.hasOwn(e,"data")&&!r.isObject(e.data)&&this.t.exceptionInvalidParam("Data must be an object")}},{key:"Sa",value:function Sa(){this.Ct()||this.t.exceptionTournamentNotFound("There is no tournament for this context.")}},{key:"Rt",value:function Rt(e){var t=this.Ia(e);return t?{getID:a(function(){return t.id},"getID"),getTitle:a(function(){return t.title},"getTitle"),getPayload:a(function(){return t.payload},"getPayload"),getEndTime:a(function(){return t.endTime},"getEndTime"),getContextID:a(function(){return t.contextId},"getContextID"),getTournamentType:a(function(){return t.tournamentType},"getTournamentType")}:null}},{key:"Ia",value:function Ia(e){var t=this.be();return t[e]?t[e]:null}},{key:"Ks",value:function Ks(e,t){var r=this.be();r[e]=t,this.Da(r)}},{key:"be",value:function be(){var _Ludex_Utils=Ludex.Utils,e=_Ludex_Utils.Browser,t=_Ludex_Utils.Valid,r=e.getLocalStorage(Jd);return t.isObject(r)?r:{}}},{key:"Da",value:function Da(e){var _Ludex_Utils=Ludex.Utils,t=_Ludex_Utils.Browser;_Ludex_Utils.Valid.isObject(e)&&t.writeLocalStorage(Jd,e)}},{key:"Ws",value:function Ws(e,t){var _r_score,r=this.ba(e,t);return r&&null!=(_r_score=r.score)?_r_score:null}},{key:"Ea",value:function Ea(e,t){var r=this.Ct();if(r){var o=r.getID().toString();if(o){var w=this.ba(o,e);if(!w)return void this.La(o,{playerId:e,score:t});w.score<t&&(w.score=t,this.La(o,w))}}}},{key:"ba",value:function ba(e,t){var _o_search,r=this.st(e);return r.length&&null!=(_o_search=Ludex.Utils.Array.search(r,function(w){return w.playerId===t}))?_o_search:null}},{key:"st",value:function st(e){var _Ludex_Utils=Ludex.Utils,t=_Ludex_Utils.Browser,r=_Ludex_Utils.Object,o=t.getLocalStorage(ca);if(!r.hasOwn(o,e))return[];var w=o[e];return Array.isArray(w)?(w.sort(function(I,D){return D.score-I.score}),w):[]}},{key:"La",value:function La(e,t){var r=Ludex.Utils.Array,o=this.st(e),w=r.searchIndex(o,function(I){return I.playerId===t.playerId});-1===w?o.push(t):o[w]=t,this.Tt(e,o)}},{key:"Tt",value:function Tt(e,t){var _r_getLocalStorage,_Ludex_Utils=Ludex.Utils,r=_Ludex_Utils.Browser,o=_Ludex_Utils.Object;if(Array.isArray(t)){var w=null!=(_r_getLocalStorage=r.getLocalStorage(ca))?_r_getLocalStorage:{};o.assign(w,_define_property({},e,t)),r.writeLocalStorage(ca,w)}}}]),da1}(),a(da,"Tournament"),Qd=da}),ma=W(function(){s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),zn(),Zn(),jd(),oa(),Xd(),a(pa=/*#__PURE__*/function(){function pa1(){_class_call_check(this,pa1),_define_property(this,"extra",void 0),_define_property(this,"player",void 0),_define_property(this,"context",void 0),_define_property(this,"tournament",void 0),_define_property(this,"payments",void 0),_define_property(this,"xe",null),_define_property(this,"isInitialized",!1),_define_property(this,"Ae",{}),_define_property(this,"Mt",null),_define_property(this,"Le",null),_define_property(this,"$t",null)}return _create_class(pa1,[{key:"Gt",value:function Gt(){this.extra=new yr(this),this.player=new Pr(this),this.context=new hr(this),this.payments=new Hd(this),this.tournament=new Qd(this)}},{key:"Oa",value:function Oa(){return(null==A?void 0:A.AllowWithoutSDK)!==!0}},{key:"getLocale",value:function getLocale(){return Ludex.Utils.Browser.getLocale()}},{key:"getPlatform",value:function getPlatform(){var e=Ludex.Utils.Device;return e.isAndroid()?"ANDROID":e.isIOS()?"IOS":e.isDesktop()?"WEB":e.isMobile()?"MOBILE_WEB":null}},{key:"isGameSDK",value:function isGameSDK(e){return this.getSDKName()===e}},{key:"getSDKName",value:function getSDKName(){return"Ludex"}},{key:"getSDKVersion",value:function getSDKVersion(){return"1.0.0"}},{key:"initializeAsync",value:function initializeAsync(){return _async_to_generator(function(){var _tmp,e,t,r,o;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(this.isInitialized)return[2];return this.Gt(),[4,this.extra.createLoadingElement()];case 1:if(_state.sent(),window.__sdkLoad.ensure(1),!(_tmp=this.Oa()))return[3,3];return[4,this._a()];case 2:_tmp=_state.sent(),_state.label=3;case 3:return[4,this.extra.waitLudexReadyAsync()];case 4:return _state.sent(),[4,this.extra.delayInitialAsync()];case 5:return _state.sent(),(e=Ludex.Utils.Browser.getQueryParams()).splashPreview&&this.extra.destroyLoadingElement(),t=e.playerId,this.player.initPlayerInfo(t),r=e.context_source_id,o=e.context_type,this.context.initContextInfo(r,o),this.isInitialized=!0,[2]}})}).call(this)}},{key:"_a",value:function _a(){return _async_to_generator(function(){return _ts_generator(this,function(_state){return this.extra.exceptionInvalidOperation("GameSDK requires AllowWithoutSDK=true in game config"),[2]})}).call(this)}},{key:"startGameAsync",value:function startGameAsync(){return _async_to_generator(function(){var e,t,o,_arguments=arguments;return _ts_generator(this,function(_state){switch(_state.label){case 0:return e=!(_arguments.length>0)||void 0===_arguments[0]||_arguments[0],this.isInitialized||this.extra.exceptionInvalidOperation("GameSDK is not initialized"),[4,this.extra.delayStartAsync()];case 1:return _state.sent(),window.__sdkLoad.ensure(95),this.extra.destroyLoadingElement(),t=Ludex.Events,o=(0,Ludex.Utils.Browser.getQueryParams)().tournament_id,[4,this.tournament.initTournamentInfoAsync(o)];case 2:return _state.sent(),[4,this.payments.initPaymentInfoAsync()];case 3:return _state.sent(),e&&codex.event.emit(t.GAME_SDK_STARTED),[2]}})}).apply(this,arguments)}},{key:"setLoadingProgress",value:function setLoadingProgress(e){var _this_extra_setLoadingElementProgress,_this_extra;null==(_this_extra=this.extra)||null==(_this_extra_setLoadingElementProgress=_this_extra.setLoadingElementProgress)||_this_extra_setLoadingElementProgress.call(_this_extra,e)}},{key:"getEntryPointData",value:function getEntryPointData(){var _Ludex_Utils=Ludex.Utils,e=_Ludex_Utils.Browser,t=_Ludex_Utils.Json,tmp=e.getQueryParams().payload,r=void 0===tmp?"{}":tmp;return"string"!=typeof r?{}:t.decode(r)}},{key:"getEntryPointAsync",value:function getEntryPointAsync(){return _async_to_generator(function(){return _ts_generator(this,function(_state){return[2,"no_entry"]})})()}},{key:"loadBannerAdAsync",value:function loadBannerAdAsync(e){return _async_to_generator(function(){var t;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(!e)return[3,5];if(this.Ae[e])return[3,2];return[4,Promise.resolve().then(function(){return _(),Q})];case 1:"function"!=typeof(t=_state.sent().default)&&this.extra.exceptionInvalidOperation("Banner ads mock is not enabled"),this.Ae[e]=new t("banner",e),_state.label=2;case 2:return[4,this.Ae[e].loadAsync()];case 3:return _state.sent(),[4,this.Ae[e].showAsync()];case 4:_state.sent(),_state.label=5;case 5:return[2]}})}).call(this)}},{key:"hideBannerAdAsync",value:function hideBannerAdAsync(e){return _async_to_generator(function(){var _tmp;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(!(_tmp=this.Ae[e]))return[3,2];return[4,this.Ae[e].hideAsync()];case 1:_tmp=_state.sent(),_state.label=2;case 2:return[2]}})}).call(this)}},{key:"getBannerHeight",value:function getBannerHeight(e){return e.BannerHeight}},{key:"getInterstitialAdAsync",value:function getInterstitialAdAsync(e){return _async_to_generator(function(){var t;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(this.Le)return[3,2];return[4,Promise.resolve().then(function(){return _(),Q})];case 1:"function"!=typeof(t=_state.sent().default)&&this.extra.exceptionInvalidOperation("Interstitial ads mock is not enabled"),this.Le=new t("interstitial",e),_state.label=2;case 2:return[2,this.Le]}})}).call(this)}},{key:"getRewardedVideoAsync",value:function getRewardedVideoAsync(e){return _async_to_generator(function(){var t;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(this.Mt)return[3,2];return[4,Promise.resolve().then(function(){return _(),Q})];case 1:"function"!=typeof(t=_state.sent().default)&&this.extra.exceptionInvalidOperation("Rewarded video ads mock is not enabled"),this.Mt=new t("rewarded",e),_state.label=2;case 2:return[2,this.Mt]}})}).call(this)}},{key:"getRewardedInterstitialAsync",value:function getRewardedInterstitialAsync(e){return _async_to_generator(function(){var t;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(this.$t)return[3,2];return[4,Promise.resolve().then(function(){return _(),Q})];case 1:"function"!=typeof(t=_state.sent().default)&&this.extra.exceptionInvalidOperation("Rewarded interstitial ads mock is not enabled"),this.$t=new t("rewarded_interstitial",e),_state.label=2;case 2:return[2,this.$t]}})}).call(this)}},{key:"getTournamentAsync",value:function getTournamentAsync(){return _async_to_generator(function(){var e,_Ludex_Utils,t,o,w;return _ts_generator(this,function(_state){switch(_state.label){case 0:return this.tournament.randomError(["Unsupported","NetworkFailure"]),e=this.context.getID(),t=(_Ludex_Utils=Ludex.Utils).Array,_Ludex_Utils.Valid.isString(e)||this.extra.exceptionInvalidOperation("Not in a context"),[4,this.tournament.getTournamentsAsync()];case 1:return o=_state.sent(),[2,((w=t.search(o,function(I){return I.getContextID()===e}))||this.extra.exceptionTournamentNotFound("A Tournament with current context was not found"),w)]}})}).call(this)}},{key:"getSupportedAPIs",value:function getSupportedAPIs(){var _Ludex_Configs_Mockup_GameSDK=Ludex.Configs.Mockup.GameSDK,e=_Ludex_Configs_Mockup_GameSDK.Player.SubscribeBot.CanSubscribeBot,t=_Ludex_Configs_Mockup_GameSDK.AddShortcut.CanCreateShortcut,r=[];return e&&r.push("player.canSubscribeBotAsync"),t&&r.push("canCreateShortcutAsync"),r}},{key:"canCreateShortcutAsync",value:function canCreateShortcutAsync(){return _async_to_generator(function(){return _ts_generator(this,function(_state){switch(_state.label){case 0:return[4,this.Na()];case 1:return[2,(_state.sent(),this.xe||this.extra.exceptionUnsupported(),this.xe.canCreateShortcutAsync())]}})}).call(this)}},{key:"createShortcutAsync",value:function createShortcutAsync(){return _async_to_generator(function(){return _ts_generator(this,function(_state){switch(_state.label){case 0:return[4,this.Na()];case 1:return[2,(_state.sent(),this.xe||this.extra.exceptionUnsupported(),this.xe.createShortcutAsync())]}})}).call(this)}},{key:"Na",value:function Na(){return _async_to_generator(function(){var e;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(this.xe)return[2];return[4,Promise.resolve().then(function(){return _(),Q})];case 1:return"function"==typeof(e=_state.sent().default)&&(this.xe=new e(this)),[2]}})}).call(this)}}]),pa1}(),"GameSDK"),xr=pa}),eu=W(function(){s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),a(fa=/*#__PURE__*/function(){function fa1(e,t){_class_call_check(this,fa1),_define_property(this,"zs",void 0),_define_property(this,"Ta",void 0),this.zs=e,this.Ta=t}return _create_class(fa1,[{key:"getPlacementID",value:function getPlacementID(){return this.Ta}},{key:"hideAsync",value:function hideAsync(){return _async_to_generator(function(){return _ts_generator(this,function(_state){return[2]})})()}}]),fa1}(),"AdInstance"),Zd=fa}),nu=W(function(){s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),Jn(),eu(),tu={AD_NOT_LOADED:"AD_NOT_LOADED",LOAD_ADS_FAILURE:"LOAD_ADS_FAILURE",INVALID_OPERATION:"INVALID_OPERATION",SHOW_ADS_FAILURE:"SHOW_ADS_FAILURE",SHOW_ADS_TIMEOUT:"SHOW_ADS_TIMEOUT",SHOW_ADS_COMPLETED_FAILURE:"SHOW_ADS_COMPLETED_FAILURE"},a(ga=/*#__PURE__*/function(Zd1){function ga1(e){var _this;return _class_call_check(this,ga1),_define_property(_this=_call_super(this,ga1,["interstitial",""]),"m",void 0),_define_property(_this,"Ut",!1),_this.m=e,_this}return _inherits(ga1,Zd1),_create_class(ga1,[{key:"loadAsync",value:function loadAsync(){return _async_to_generator(function(){return _ts_generator(this,function(_state){return[2,Promise.resolve()]})})()}},{key:"showAsync",value:function showAsync(){return _async_to_generator(function(){var e;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(this.Ut)throw this.Ca(tu.INVALID_OPERATION,"Can't show ads while showing ads");_state.label=1;case 1:return _state.trys.push([1,3,4,5]),this.Ut=!0,[4,this.m.ads.requestInterstitialAd()];case 2:return _state.sent(),[3,5];case 3:throw e=_state.sent(),this.Ca(tu.SHOW_ADS_FAILURE,e);case 4:return this.Ut=!1,[7];case 5:return[2]}})}).call(this)}},{key:"Ca",value:function Ca(e,t){var r=Ludex.Utils.Object,o=e,w="";if("string"==typeof t)w=t;else if(r.hasOwn(t,"message")&&"string"==typeof t.message)w=t.message;else if(r.hasOwn(t,"description")&&"string"==typeof t.description)w=t.description;else try{w=JSON.stringify(t)}catch(e){w="Unknown error"}return r.hasOwn(t,"code")&&"string"==typeof t.code?o=t.code:r.hasOwn(t,"errorType")&&"string"==typeof t.errorType&&(o=t.errorType),new fr(o,w)}}]),ga1}(Zd),"YTAdInstance"),ru=ga}),ou=W(function(){s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),Zn(),a(xa=/*#__PURE__*/function(yr1){function xa1(e){var _this;return _class_call_check(this,xa1),_define_property(_this=_call_super(this,xa1,[e]),"m",void 0),_this.m=e.sdk,_this}return _inherits(xa1,yr1),_create_class(xa1,[{key:"logError",value:function logError(e){try{this.m.health.logError()}catch(e){}}},{key:"logWarning",value:function logWarning(e){try{this.m.health.logWarning()}catch(e){}}},{key:"sendScore",value:function sendScore(e){return _async_to_generator(function(){var t;return _ts_generator(this,function(_state){switch(_state.label){case 0:return _state.trys.push([0,2,,3]),[4,this.m.engagement.sendScore({value:e})];case 1:return _state.sent(),[3,3];case 2:throw t=_state.sent(),this.logError(t),t;case 3:return[2]}})}).call(this)}},{key:"openYTContent",value:function openYTContent(e){return _async_to_generator(function(){var t;return _ts_generator(this,function(_state){switch(_state.label){case 0:return _state.trys.push([0,2,,3]),[4,this.m.engagement.openYTContent({id:e})];case 1:return _state.sent(),[3,3];case 2:throw t=_state.sent(),this.logError(t),t;case 3:return[2]}})}).call(this)}},{key:"shareInviteCode",value:function shareInviteCode(e){return _async_to_generator(function(){var t;return _ts_generator(this,function(_state){switch(_state.label){case 0:return _state.trys.push([0,2,,3]),[4,this.m.game.shareInviteCode(e)];case 1:return _state.sent(),[3,3];case 2:throw t=_state.sent(),this.logError(t),t;case 3:return[2]}})}).call(this)}},{key:"onPause",value:function onPause(e){this.m.system.onPause(e)}},{key:"onResume",value:function onResume(e){this.m.system.onResume(e)}},{key:"isAudioEnabled",value:function isAudioEnabled(){return this.m.system.isAudioEnabled()}},{key:"onAudioEnabledChange",value:function onAudioEnabledChange(e){return this.m.system.onAudioEnabledChange(e)}}]),xa1}(yr),"YTExtra"),au=xa}),iu=W(function(){s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),oa(),a($a=/*#__PURE__*/function(Pr1){function $a1(e){var _this;return _class_call_check(this,$a1),(_this=_call_super(this,$a1,[e])).m=e.sdk,_this.t=e.extra,_this}return _inherits($a1,Pr1),_create_class($a1,[{key:"initPlayerAsync",value:function initPlayerAsync(){return this.Ys()}},{key:"Ra",value:function Ra(){return!this.c.isInitialized||!this.m.IN_PLAYABLES_ENV}},{key:"Ys",value:function Ys(){return _async_to_generator(function(){var e;return _ts_generator(this,function(_state){try{e=this.getID(),this.t.isGuest=!0,this.initPlayerInfo(e)}catch(e){}return[2]})}).call(this)}},{key:"getDataAsync",value:function getDataAsync(e){var _this=this,_this1=this,_superprop_get_getDataAsync=function(){return _get(_get_prototype_of($a1.prototype),"getDataAsync",_this)};return _async_to_generator(function(){var _$t,_Ludex_Utils,r,o,w,I,D,_iteratorNormalCompletion,_didIteratorError,_iteratorError,_iterator,_step,S,t;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(this.Ra())return[2,_superprop_get_getDataAsync().call(_this1,e)];_state.label=1;case 1:return _state.trys.push([1,3,,4]),[4,this.m.game.loadData()];case 2:if(!(_$t=_state.sent())||(r=(_Ludex_Utils=Ludex.Utils).Json,o=_Ludex_Utils.Valid,w=_Ludex_Utils.Object,I=r.decode(_$t),!o.isObject(I)))return[2,{}];if(e.length<1)return[2,I];D={},_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(_iterator=e[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0)S=_step.value,w.hasOwn(I,S)&&(D[S]=I[S])}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return[2,D];case 3:return t=_state.sent(),[2,(this.t.logWarning(t),{})];case 4:return[2]}})}).call(this)}},{key:"setDataAsync",value:function setDataAsync(e){var _this=this,_this1=this,_superprop_get_setDataAsync=function(){return _get(_get_prototype_of($a1.prototype),"setDataAsync",_this)};return _async_to_generator(function(){var _$t,_Ludex_Utils,r,o,w,I,E,D,S,t;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(this.Ra())return[2,_superprop_get_setDataAsync().call(_this1,e)];_state.label=1;case 1:return _state.trys.push([1,4,,5]),[4,this.m.game.loadData()];case 2:return _$t=_state.sent(),r=(_Ludex_Utils=Ludex.Utils).Json,o=_Ludex_Utils.Valid,w=_Ludex_Utils.Object,I={},_$t&&(E=r.decode(_$t),o.isObject(E)&&(I=E)),D=w.merge(I,e),S=r.encode(D),[4,this.m.game.saveData(S)];case 3:return _state.sent(),[3,5];case 4:throw t=_state.sent(),this.t.logError(t),t;case 5:return[2]}})}).call(this)}},{key:"getSignedPlayerInfoAsync",value:function getSignedPlayerInfoAsync(){return _async_to_generator(function(){return _ts_generator(this,function(_state){return this.t.exceptionUnsupported(),[2]})}).call(this)}},{key:"getConnectedPlayersAsync",value:function getConnectedPlayersAsync(){return _async_to_generator(function(){return _ts_generator(this,function(_state){return[2,[]]})})()}},{key:"canSubscribeBotAsync",value:function canSubscribeBotAsync(){return _async_to_generator(function(){return _ts_generator(this,function(_state){return[2,!1]})})()}},{key:"subscribeBotAsync",value:function subscribeBotAsync(){return _async_to_generator(function(){return _ts_generator(this,function(_state){return this.t.exceptionUnsupported(),[2]})}).call(this)}}]),$a1}(Pr),"YTPlayer"),su=$a}),lu=W(function(){s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),ma(),nu(),ou(),iu(),a(va=/*#__PURE__*/function(xr1){function va1(e){var _this;return _class_call_check(this,va1),_define_property(_this=_call_super(this,va1),"sdk",void 0),_define_property(_this,"Oe",null),_this.sdk=e,_this}return _inherits(va1,xr1),_create_class(va1,[{key:"Gt",value:function Gt(){_get(_get_prototype_of(va1.prototype),"Gt",this).call(this),this.extra=new au(this),this.player=new su(this),this.Le=new ru(this.sdk)}},{key:"qs",value:function qs(){return _async_to_generator(function(){var _,e;return _ts_generator(this,function(_state){switch(_state.label){case 0:return _state.trys.push([0,2,,3]),_=this,[4,this.sdk.system.getLanguage()];case 1:return _.Oe=_state.sent(),[3,3];case 2:return e=_state.sent(),this.extra.logError(e),[3,3];case 3:return[2]}})}).call(this)}},{key:"getSDKName",value:function getSDKName(){return"YoutubePlayables"}},{key:"getSDKVersion",value:function getSDKVersion(){return this.sdk.SDK_VERSION}},{key:"getLocale",value:function getLocale(){var _this_Oe;return null!=(_this_Oe=this.Oe)?_this_Oe:null}},{key:"_a",value:function _a(){return _async_to_generator(function(){return _ts_generator(this,function(_state){return _type_of(this.sdk)>"u"&&this.extra.exceptionInvalidOperation("YouTube Playables SDK is not initialized"),[2]})}).call(this)}},{key:"initializeAsync",value:function initializeAsync(){var _this=this,_this1=this,_superprop_get_initializeAsync=function(){return _get(_get_prototype_of(va1.prototype),"initializeAsync",_this)};return _async_to_generator(function(){var e;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(this.isInitialized)return[3,5];return[4,_superprop_get_initializeAsync().call(_this1)];case 1:_state.sent(),this.isInitialized=!1,_state.label=2;case 2:return _state.trys.push([2,4,,5]),[4,this.player.initPlayerAsync()];case 3:return _state.sent(),this.qs(),this.sdk.game.firstFrameReady(),this.Qs(),this.isInitialized=!0,[3,5];case 4:if(e=_state.sent(),this.Oa())throw Error("Youtube Playables SDK not initialized");return[3,5];case 5:return[2]}})}).call(this)}},{key:"startGameAsync",value:function startGameAsync(){var _this=this,_this1=this,_superprop_get_startGameAsync=function(){return _get(_get_prototype_of(va1.prototype),"startGameAsync",_this)};return _async_to_generator(function(){return _ts_generator(this,function(_state){switch(_state.label){case 0:return[4,_superprop_get_startGameAsync().call(_this1)];case 1:return _state.sent(),this.sdk.game.gameReady(),[2]}})}).call(this)}},{key:"Qs",value:function Qs(){var e=Ludex.Events,t=codex.event;this.extra.onPause(function(){t.emit(e.VISIBILITY_HIDDEN)}),this.extra.onResume(function(){t.emit(e.VISIBILITY_VISIBLE)})}},{key:"getInterstitialAdAsync",value:function getInterstitialAdAsync(){return _async_to_generator(function(){return _ts_generator(this,function(_state){return[2,this.Le]})}).call(this)}},{key:"getRewardedVideoAsync",value:function getRewardedVideoAsync(){return _async_to_generator(function(){return _ts_generator(this,function(_state){return this.extra.exceptionUnsupported(),[2]})}).call(this)}},{key:"getRewardedInterstitialAsync",value:function getRewardedInterstitialAsync(){return _async_to_generator(function(){return _ts_generator(this,function(_state){return this.extra.exceptionUnsupported(),[2]})}).call(this)}},{key:"loadBannerAdAsync",value:function loadBannerAdAsync(){return _async_to_generator(function(){return _ts_generator(this,function(_state){return this.extra.exceptionUnsupported(),[2]})}).call(this)}},{key:"hideBannerAdAsync",value:function hideBannerAdAsync(){return _async_to_generator(function(){return _ts_generator(this,function(_state){return[2,Promise.resolve()]})})()}},{key:"getBannerHeight",value:function getBannerHeight(){return 0}},{key:"getTournamentAsync",value:function getTournamentAsync(){return _async_to_generator(function(){return _ts_generator(this,function(_state){return this.extra.exceptionUnsupported(),[2]})}).call(this)}},{key:"canCreateShortcutAsync",value:function canCreateShortcutAsync(){return _async_to_generator(function(){return _ts_generator(this,function(_state){return[2,!1]})})()}},{key:"createShortcutAsync",value:function createShortcutAsync(){return _async_to_generator(function(){return _ts_generator(this,function(_state){return this.extra.exceptionUnsupported(),[2]})}).call(this)}},{key:"getSupportedAPIs",value:function getSupportedAPIs(){return["game.firstFrameReady","game.gameReady","game.loadData","game.saveData","engagement.sendScore","ads.requestInterstitialAd"]}}]),va1}(xr),"YTAdapter"),cu=va}),wr=W(function(){s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),a(AP,"simpleHash"),a(ba=/*#__PURE__*/function(){function ba1(){_class_call_check(this,ba1),_define_property(this,"Ft",void 0),this.Ft=new Set}return _create_class(ba1,[{key:"Js",value:function Js(){var e=Error().stack;if(!e)return null;for(var t=0,w=0;w<4;w++){var I=e.indexOf("\n",t);if(-1===I)return null;t=I+1}var r=e.indexOf("\n",t),o=-1===r?e.substring(t):e.substring(t,r);return o?o.trim():null}},{key:"blockAccess",value:function blockAccess(){try{var e=this.Js();if(!e)return!1;var t=AP(e);if(this.Ft.has(t))return!1;if(["eval","at <","(<"].some(function(r){return e.includes(r)}))throw Error("Access blocked for the caller: ".concat(e));return this.Ft.add(t),!1}catch(e){return!0}}}]),ba1}(),"AccessBlocker"),vP=new ba,xt=a(function(n,e){var t=Object.getOwnPropertyDescriptor(n,e);if(t){var r=t.value,o=t.get,w=t.initializer;r&&(void 0===r?"undefined":_type_of(r))!="object"||o&&"function"!=typeof o||w&&"function"!=typeof w||Object.defineProperty(n,e,{enumerable:!1,get:function get(){var _ref;if(!vP.blockAccess())return null!=(_ref=null!=r?r:null==w?void 0:w.call(this))?_ref:null==o?void 0:o.call(this)},set:function set(){}})}},"wrapGetterToBlockObjectAccess")}),x=W(function(){_(),_(),_(),_(),_(),_(),_(),_(),_(),_(),lu(),ma(),wr(),a(bP,"autoDetectAndInitializeSDKAdapter"),window.GameSDK=Object.seal(bP()),xt(window,"GameSDK")}),df=Mg(function(n,e){var o=function o(){},w=function w(E,b,L){this.fn=E,this.context=b,this.once=L||!1},I=function I(E,b,L,C,R){if("function"!=typeof L)throw TypeError("The listener must be a function");var $=new w(L,C||E,R),z=r?r+b:b;return E._events[z]?E._events[z].fn?E._events[z]=[E._events[z],$]:E._events[z].push($):(E._events[z]=$,E._eventsCount++),E},D=function D(E,b){0==--E._eventsCount?E._events=new o:delete E._events[b]},S=function S(){this._events=new o,this._eventsCount=0};s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var t=Object.prototype.hasOwnProperty,r="~";a(o,"Events"),Object.create&&(o.prototype=Object.create(null),new o().__proto__||(r=!1)),a(w,"EE"),a(I,"addListener"),a(D,"clearEvent"),a(S,"EventEmitter"),S.prototype.eventNames=a(function(){var b,L,E=[];if(0===this._eventsCount)return E;for(L in b=this._events)t.call(b,L)&&E.push(r?L.slice(1):L);return Object.getOwnPropertySymbols?E.concat(Object.getOwnPropertySymbols(b)):E},"eventNames"),S.prototype.listeners=a(function(E){var b=r?r+E:E,L=this._events[b];if(!L)return[];if(L.fn)return[L.fn];for(var C=0,R=L.length,$=Array(R);C<R;C++)$[C]=L[C].fn;return $},"listeners"),S.prototype.listenerCount=a(function(E){var b=r?r+E:E,L=this._events[b];return L?L.fn?1:L.length:0},"listenerCount"),S.prototype.emit=a(function(E,b,L,C,R,$){var z=r?r+E:E;if(!this._events[z])return!1;var ke,ce,k=this._events[z],Pe=arguments.length;if(k.fn){switch(k.once&&this.removeListener(E,k.fn,void 0,!0),Pe){case 1:return k.fn.call(k.context),!0;case 2:return k.fn.call(k.context,b),!0;case 3:return k.fn.call(k.context,b,L),!0;case 4:return k.fn.call(k.context,b,L,C),!0;case 5:return k.fn.call(k.context,b,L,C,R),!0;case 6:return k.fn.call(k.context,b,L,C,R,$),!0}for(ce=1,ke=Array(Pe-1);ce<Pe;ce++)ke[ce-1]=arguments[ce];k.fn.apply(k.context,ke)}else{var sn,_g=k.length;for(ce=0;ce<_g;ce++)switch(k[ce].once&&this.removeListener(E,k[ce].fn,void 0,!0),Pe){case 1:k[ce].fn.call(k[ce].context);break;case 2:k[ce].fn.call(k[ce].context,b);break;case 3:k[ce].fn.call(k[ce].context,b,L);break;case 4:k[ce].fn.call(k[ce].context,b,L,C);break;default:if(!ke)for(sn=1,ke=Array(Pe-1);sn<Pe;sn++)ke[sn-1]=arguments[sn];k[ce].fn.apply(k[ce].context,ke)}}return!0},"emit"),S.prototype.on=a(function(E,b,L){return I(this,E,b,L,!1)},"on"),S.prototype.once=a(function(E,b,L){return I(this,E,b,L,!0)},"once"),S.prototype.removeListener=a(function(E,b,L,C){var R=r?r+E:E;if(!this._events[R])return this;if(!b)return D(this,R),this;var $=this._events[R];if($.fn)$.fn!==b||C&&!$.once||L&&$.context!==L||D(this,R);else{for(var z=0,k=[],Pe=$.length;z<Pe;z++)($[z].fn!==b||C&&!$[z].once||L&&$[z].context!==L)&&k.push($[z]);k.length?this._events[R]=1===k.length?k[0]:k:D(this,R)}return this},"removeListener"),S.prototype.removeAllListeners=a(function(E){var b;return E?(b=r?r+E:E,this._events[b]&&D(this,b)):(this._events=new o,this._eventsCount=0),this},"removeAllListeners"),S.prototype.off=S.prototype.removeListener,S.prototype.addListener=S.prototype.on,S.prefixed=r,S.EventEmitter=S,(void 0===e?"undefined":_type_of(e))<"u"&&(e.exports=S)});s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var DP={CORE_BOOTING:"core-booting",REQUEST_CORE_START:"core-start",CORE_STARTING:"core-starting",CORE_READY:"core-ready",ANALYTICS_READY:"analytics-ready",GAME_SDK_READY:"game-sdk-ready",GAME_SDK_STARTED:"game-sdk-started",CONTEXT_DATA_PROCESSED:"context-data-processed",CONTEXT_SESSION_TYPE_DETECTED:"context-session-type-detected",GAME_READY:"game-ready",BUNDLE_READY:"bundle-ready",PLAYER_INFO_LOADED:"player-info-loaded",PLAYER_SETTINGS_CHANGED:"player-settings-changed",REQUEST_SHOW_BANNER_ADS:"request-show-banner-ads",SWITCH_SCENE:"switch-scene",SCENE_LOADED:"scene-loaded",PRELOAD_SCENE:"preload-scene",SCENE_PROGRESS:"scene-progress",SCENE_LAUNCHED:"scene-launched",SCENE_RENDERED:"scene-rendered",SCENE_BEFORE_RENDERED:"scene-before-rendered",MARK_IS_TEST_SCENE:"mark-is-test-scene",PRELOAD_SCREEN:"preload-screen",PRELOAD_SCREENS:"preload-screens",LOADING_SCREEN:"loading-screen",SCREEN_LOADED:"screen-loaded",OPENING_SCREEN:"opening-screen",OPEN_SCREEN:"open-screen",OPENED_SCREEN:"opened-screen",CLOSING_SCREEN:"closing-screen",CLOSE_SCREEN:"close-screen",CLOSED_SCREEN:"closed-screen",CORE_PLUGIN_READY:"core-plugin-ready",MODULE_PLUGIN_READY:"module-plugin-ready",AD_LOADING:"ad-loading",AD_LOADED:"ad-loaded",AD_LOAD_FAILED:"ad-load-failed",AD_SHOWING:"ad-showing",AD_SHOW:"ad-show",AD_CLOSED:"ad-closed",AD_SHOW_FAILED:"ad-show-failed",LANGUAGE_CHANGED:"language-changed",REQUEST_LANGUAGE:"request-language",REQUEST_HOT_RELOAD:"request-hot-reload",REQUEST_SAVE_CONFIG:"request-save-config",REQUEST_UPDATE_CONFIG:"request-update-config",REMOTE_CONFIG_UPDATED:"remote-config-updated",VISIBILITY_HIDDEN:"visibility-hidden",VISIBILITY_VISIBLE:"visibility-visible",REQUEST_RESIZE_GAME:"request-resize-game",REQUEST_QUALITY_UPGRADED:"request-quality-upgraded",REQUEST_QUALITY_DOWNGRADED:"request-quality-downgraded",GAME_SDK_POPUP_RESPONDED:"game-sdk-popup-responded"},Ee=DP;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var du=function(n){return n.DRAFT="draft",n.SINGLE="single",n.TOURNAMENT="tournament",n.MATCHING_GROUP="matching-group",n.CHALLENGE_FRIEND="challenge-friend",n}(du||{}),q=du,IP=q,$r=IP;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var EP=a(function(n){return n},"func"),uu=EP;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var LP=a(function(){},"func"),pu=LP,mu={asConst:uu,noop:pu};s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var CP=a(function(n,e){if(n)return e<0?n[n.length+e]:n[e]},"at"),hu=CP;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var TP=a(function(n,e){for(var t=[],r=0;r<n;r++)t.push(e(r));return t},"func"),Ar=TP,MP=a(function(n){return Ar(n,function(){})},"func"),wt=MP,OP=a(function(n,e){return wt(Math.ceil(n.length/e)).map(function(r,o){return n.slice(o*e,o*e+e)})},"func"),fu=OP;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var NP=a(function(n,e){return n.filter(function(t){return 0>e.indexOf(t)})},"func"),yu=NP;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var RP=a(function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t={},_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=n[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var r=_step.value;for(var o in r){var w=o;e.includes(w)&&(t[w]||(t[w]=[]),t[w].push(r[w]))}}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return t},"func"),gu=RP;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var _P=a(function(n){return n.reduce(function(e,t){return e.concat(t)},[])},"func"),Pu=_P;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var kP=a(function(n,e){return n.indexOf(e)>=0},"func"),xu=kP;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var GP=a(function(n,e){return n.length=Math.min(n.length,e),n},"func"),wu=GP;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var FP=a(function(n){for(var ref,e=0;e<n.length/2;e++)ref=[n[n.length-1-e],n[e]],n[e]=ref[0],n[n.length-1-e]=ref[1]},"func"),$u=FP;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var BP=a(function(n,e){for(var t=0;t<n.length;t++)if(e(n[t],t))return n[t]},"func"),vr=BP;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var UP=a(function(n,e){for(var t=0;t<n.length;t++)if(e(n[t],t))return t;return -1},"func"),Sr=UP;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var VP=a(function(n){for(var e=n.length-1;e>0;e--){var ref,t=Math.floor(Math.random()*(e+1));ref=[n[t],n[e]],n[e]=ref[0],n[t]=ref[1]}},"func"),br=VP;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var KP=a(function(n,e){return n.reduce(function(t,r,o){return e(r,o,n)?t.left.push(r):t.right.push(r),t},{left:[],right:[]})},"split"),Au=KP;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var HP=a(function(n){var e=_to_consumable_array(n);return br(e),e},"func"),vu=HP;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var jP=a(function(n,e,t){return t.indexOf(n)===e&&null!=n},"unique"),WP=a(function(n){return n.filter(jP)},"func"),Su=WP,bu={at:hu,chunk:fu,difference:yu,dod:gu,fillWith:Ar,length:wt,limit:wu,reverse:$u,search:vr,searchIndex:Sr,has:xu,shuffle:br,toShuffled:vu,unique:Su,flatten:Pu,split:Au};s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var zP=a(function(){return"OffscreenCanvas"in window&&("undefined"==typeof OffscreenCanvas?"undefined":_type_of(OffscreenCanvas))<"u"},"isOffscreenCanvasSupported"),qP=a(function(n,e){var t=new OffscreenCanvas(0,0),r=t.getContext(n,e);return r?{canvas:t,context:r}:null},"createOffscreenCanvas"),YP=a(function(n,e){var t=document.createElement("canvas"),r=t.getContext(n,e);return r?{canvas:t,context:r}:null},"createHTMLCanvas"),JP=a(function(n){var tmp=n.contextType,e=void 0===tmp?"2d":tmp,tmp1=n.contextAttributes,t=void 0===tmp1?{}:tmp1,tmp2=n.type,r=void 0===tmp2?"canvas":tmp2;return"canvas"===r?YP(e,t):"offscreen"===r&&zP()?qP(e,t):null},"func"),xe=JP;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var QP=a(function(n){return!n||""===n||0===n||"number"==typeof n&&isNaN(n)},"func"),Dr=QP,XP=a(function(n){return Dr(n)?!1!==n&&0!==n:"string"==typeof n||Array.isArray(n)?0===n.length:(void 0===n?"undefined":_type_of(n))=="object"&&null!==n&&0===Object.keys(n).length},"func"),$t=XP,Du="Save The Pets",Da={},Ir=a(function(n){var _GameSDK_getSDKName;return $t(n)?null!=(_GameSDK_getSDKName=GameSDK.getSDKName())?_GameSDK_getSDKName:"Storage":null!=n?n:"Storage"},"getDBName"),ZP=a(function(n){var e="".concat(Du,"_").concat(n);return Da[e]?Promise.resolve(Da[e]):new Promise(function(t,r){var w,o=1,I=a(function(D){(w=indexedDB.open(Du,D)).onerror=function(S){var E=S.target.error;(null==E?void 0:E.name)==="VersionError"?I(++o):r(E)},w.onsuccess=function(S){var E=w.result;E.objectStoreNames.contains(n)?(Da[e]=E,t(E)):I(++o)},w.onupgradeneeded=function(S){var E=S.target.result;o=E.version,E.objectStoreNames.contains(n)||E.createObjectStore(n)}},"tryOpen");I(o)})},"openIndexedDB"),Er=ZP,ex=a(function(n,e){return _async_to_generator(function(){var t,r,o,e1;return _ts_generator(this,function(_state){switch(_state.label){case 0:return _state.trys.push([0,2,,3]),[4,Er(t=Ir(e))];case 1:if(!(r=_state.sent()).objectStoreNames.contains(t))return[2,{}];return o=r.transaction(t,"readonly").objectStore(t),[2,new Promise(function(w,I){var D=o.get(n);D.onerror=function(){return I(D.error)},D.onsuccess=function(){return w(D.result)}})];case 2:return e1=_state.sent(),[2,{}];case 3:return[2]}})})()},"func"),Iu=ex;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var tx=a(function(n){try{return JSON.parse(n)}catch(e){return null}},"func"),At=tx,rx=a(function(n){try{if(!localStorage)return null;var e=localStorage.getItem(n);return null===e?null:At(e)}catch(e){return null}},"func"),Lr=rx;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var nx=a(function(n){try{return JSON.stringify(n,null,0)}catch(e){return""}},"func"),vt=nx,ax=a(function(n){return At(vt(n))},"func"),Cr=ax,ox=a(function(){var n="en_US",t=vr(Cr(window.navigator.languages)||[],function(r){return r.indexOf("-")>-1});return t&&-1!==t.indexOf("-")?t.replace("-","_"):n},"func"),Eu=ox;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var sx=a(function(){var n=window.location.search.substring(1);if(!n)return{};var e=n.split("&"),t={},_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=e[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var o=_step.value.split("=");t[o[0]]=decodeURIComponent(o[1])}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return t},"func"),Lu=sx;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var ix=a(function(){var n=document.body,e=document.documentElement,t=n.clientHeight;return Math.max(e.clientHeight,t)||0},"func"),Cu=ix;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var cx=a(function(){var n=document.body,e=document.documentElement,t=n.clientWidth;return Math.max(e.clientWidth,t)||0},"func"),Tu=cx;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var lx=a(function(n){try{localStorage.removeItem(n)}catch(e){}},"func"),Mu=lx;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var dx=a(function(n,e,t){return _async_to_generator(function(){var r,o,w,e1;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(_state.trys.push([0,2,,3]),$t(e))return[2];return[4,Er(r=Ir(t))];case 1:if(!(o=_state.sent()).objectStoreNames.contains(r))return[2];return w=o.transaction(r,"readwrite").objectStore(r),[2,new Promise(function(I,D){try{var _$S=w.put(e,n);_$S.onsuccess=function(){return I()},_$S.onerror=function(){return D(_$S.error)}}catch(S){D(S)}})];case 2:return e1=_state.sent(),[3,3];case 3:return[2]}})})()},"func"),Ou=dx;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var ux=a(function(){var n="vibrate"in window.navigator;if(n)try{window.navigator.vibrate(0)}catch(e){return!1}return n},"isSupportVibrateApi"),px=a(function(n){try{return!!ux()&&(window.navigator.vibrate(0),window.navigator.vibrate(n),!0)}catch(e){return!1}},"func"),Nu=px;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var mx=a(function(n,e,t){var r,o=!1;return function(){for(var _this=this,_len=arguments.length,w=Array(_len),_key=0;_key<_len;_key++)w[_key]=arguments[_key];if(t&&!o){o=!0,n.apply(this,w);return}clearTimeout(r),r=setTimeout(function(){n.apply(_this,w)},e)}},"func"),Vt=mx;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var hx=a(function(n){var e=Object.create(null);return function(){for(var _len=arguments.length,t=Array(_len),_key=0;_key<_len;_key++)t[_key]=arguments[_key];var r="__memoize__".concat(JSON.stringify(t));if(r in e)return e[r];var o=n.apply(this,t);return e[r]=o,o}},"func"),Re=hx;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var fx=a(function(n,e,t){var r,o=!1,w=!1;return function(){for(var _len=arguments.length,I=Array(_len),_key=0;_key<_len;_key++)I[_key]=arguments[_key];if(t&&!w){w=!0,n.apply(this,I);return}o&&(o=!1,n.apply(this,I)),clearTimeout(r),r=setTimeout(function(){o=!0},e)}},"func"),Kt=fx;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var yx=a(function(n,e){var t=n.value;return n.value=function(){for(var _len=arguments.length,r=Array(_len),_key=0;_key<_len;_key++)r[_key]=arguments[_key];return _async_to_generator(function(){var o,_tmp;return _ts_generator(this,function(_state){switch(_state.label){case 0:return[4,e.apply(this,r)];case 1:if(_state.sent(),!_instanceof(o=t.apply(this,r),Promise))return[3,3];return[4,o];case 2:return _tmp=_state.sent(),[3,4];case 3:_tmp=o,_state.label=4;case 4:return[2,_tmp]}})}).call(this)},n},"func"),Ru=yx;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var _u=Object,gx=a(function(n,e){if("assign"in _u)return _u.assign(n,e);var t=n;for(var r in e)t[r]=e[r];return t},"func"),Le=gx,Px=a(function(n){if(_instanceof(n,Error))return n;if(null!==n&&(void 0===n?"undefined":_type_of(n))=="object"&&"message"in n&&"string"==typeof n.message){var e=Error(n.message);return"stack"in n&&"string"==typeof n.stack&&(e.stack=n.stack),"name"in n&&"string"==typeof n.name&&(e.name=n.name),"code"in n&&"string"==typeof n.code&&Le(e,{code:n.code}),e}if(null!==n&&(void 0===n?"undefined":_type_of(n))=="object")try{return Error(JSON.stringify(n,null,2))}catch(e){return Error("[Object conversion failed] ".concat(String(n)))}return Error(String(n))},"func"),we=Px,xx=a(function(n,e){var t=n.value;return n.value=function(){for(var _len=arguments.length,r=Array(_len),_key=0;_key<_len;_key++)r[_key]=arguments[_key];return _async_to_generator(function(){var o,_$w,_tmp;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(_state.trys.push([0,4,5,6]),!_instanceof(_$w=t.apply(this,r),Promise))return[3,2];return[4,_$w];case 1:return _tmp=_state.sent(),[3,3];case 2:_tmp=_$w,_state.label=3;case 3:return[2,_tmp];case 4:return o=we(_state.sent()),[3,6];case 5:return null==e||e(o),[7];case 6:return[2]}})}).call(this)},n},"func"),ku=xx;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var wx=a(function(n){var e=(void 0===n?"undefined":_type_of(n))=="object"||"function"==typeof n,t=Array.isArray(n);return null!==n&&e&&!t},"func"),j=wx,Gu=a(function(n,e){if((void 0===n?"undefined":_type_of(n))!==e)throw Error("Value ".concat(n," is not type of ").concat(e," (").concat(void 0===n?"undefined":_type_of(n),")"))},"checkType"),$x=a(function(n,e,t){var r;return t||Gu(n,e),j(n)&&t?Object.defineProperty(n,t,{get:function get(){return r},set:function set(o){Gu(o,e),r=o}}):n},"func"),St=$x,Ax=a(function(n,e){var t=n.value;return n.value=function(){for(var _len=arguments.length,r=Array(_len),_key=0;_key<_len;_key++)r[_key]=arguments[_key];return e.forEach(function(o,w){try{St(r[w],o)}catch(I){var D="[Decorator:validateParams]";throw _instanceof(I,Error)?(I.message="".concat(D,": ").concat(I.message),I):Error("".concat(D,": ").concat(I))}}),t.apply(this,r)},n},"func"),Fu=Ax;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var vx=a(function(n,e){var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=e[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var t=_step.value;try{return St(n,t),!1}catch(e){}}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return!0},"isInvalidReturnType"),Sx=a(function(n,e){var t=n.value;return n.value=function(){for(var _len=arguments.length,r=Array(_len),_key=0;_key<_len;_key++)r[_key]=arguments[_key];var o=t.apply(this,r);if(vx(o,e))throw Error("[Decorator:validateReturn] ".concat(o," (").concat(void 0===o?"undefined":_type_of(o),") is not type of ").concat(e.join(" | ")));return o},n},"func"),Bu=Sx,$e=/*#__PURE__*/function(){function Jt(){_class_call_check(this,Jt)}return _create_class(Jt,null,[{key:"Xs",value:function Xs(e,t,r){return!!(r&&("u">_type_of(r.value)||r.get||r.set))}},{key:"oe",value:function oe(e,t,r){return!!(r&&("function"==typeof r.value||"function"==typeof r.initializer))}},{key:"locked",value:function locked(e,t,r){return be(N({},r),{value:a(function(){throw Error("Method is locked")},"value")})}},{key:"preStart",value:function preStart(e){return function(t,r,o){return Jt.oe("preStart",r,o)?Ru(o,e):o}}},{key:"tryCatch",value:function tryCatch(e){return function(t,r,o){return Jt.oe("tryCatch",r,o)?ku(o,e):o}}},{key:"debounce",value:function debounce(e){return function(t,r,o){if(!Jt.oe("debounce",r,o))return o;var w=o.value;return w?o.value=Vt(w,e):o.initializer&&(w=o.initializer,o.initializer=function(){return Vt(w.call(this),e)}),o}}},{key:"throttle",value:function throttle(e){return function(t,r,o){if(!Jt.oe("throttle",r,o))return o;var w=o.value;return w?o.value=Kt(w,e):o.initializer&&(w=o.initializer,o.initializer=function(){return Kt(w.call(this),e,!0)}),o}}},{key:"memoize",value:function memoize(e,t,r){if(!Jt.oe("memoize",t,r))return r;var o=r.value;return o?r.value=Re(o):r.initializer&&(o=r.initializer,r.initializer=function(){return Re(o.call(this))}),r}},{key:"validateValue",value:function validateValue(e){return function(t,r,o){if(!Jt.Xs("validateValue",r,o))return o;try{return St(t,e,r)}catch(w){return _instanceof(w,Error),o}}}}]),Jt}();a($e,"DecoratorUtils"),Ge($e,"trace",a(function(n,e,t){try{var _ref=null!=t?t:{},r=_ref.value,o=_ref.initializer,w=_ref.get,I=_ref.set;try{if(!(w||I)&&"function"!=typeof r)if("function"==typeof o){var D=null==o?void 0:o();if("function"!=typeof D&&(void 0===D?"undefined":_type_of(D))>"u")throw Error("Initializer returned undefined")}else if(r)void 0===r||_type_of(r);else throw Error("Unsupported decorator")}catch(e){}}catch(e){}return t},"trace")),Ge($e,"validateReturn",a(function(){for(var _len=arguments.length,n=Array(_len),_key=0;_key<_len;_key++)n[_key]=arguments[_key];return function(e,t,r){return $e.oe("validateReturn",t,r)?Bu(r,n):r}},"validateReturn")),Ge($e,"validateParams",a(function(){for(var _len=arguments.length,n=Array(_len),_key=0;_key<_len;_key++)n[_key]=arguments[_key];return function(e,t,r){return $e.oe("validateParams",t,r)?Fu(r,n):r}},"validateParams"));var Ia=$e,Ht=Ia,bx=a(function(){var n=function n(r){},e=function e(r){},t=function t(r){};self.onmessage=function(r){var _r_data=r.data;_r_data.action,_r_data.payload},a(n,"drawImage"),a(e,"saveData"),a(t,"getData")},"workerCode"),Ce=/*#__PURE__*/function(){function fs(){_class_call_check(this,fs),_define_property(this,"kt",null),this.init()}return _create_class(fs,[{key:"init",value:function init(){var e=new Blob(["(".concat(bx.toString(),")()")],{type:"application/javascript"});this.kt=new Worker(URL.createObjectURL(e))}}],[{key:"inst",get:function get(){return fs._e||(fs._e=new fs),fs._e}},{key:"postMessage",value:function postMessage(e,t){if(!fs.inst.kt)throw Error("Worker is not initialized");fs.inst.kt.postMessage({action:e,payload:t})}}]),fs}();a(Ce,"WebWorker"),Ge(Ce,"_inst$"),pe([Ht.tryCatch()],Ce.prototype,"init",1),pe([Ht.tryCatch()],Ce,"postMessage",1);var Ea=Ce,Uu=Ea;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var Dx=a(function(n){return null==n},"isNotClear"),Vu=a(function(n){if(!j(n))return n;for(var e in n)if(Dx(n[e]))delete n[e];else{var t=n[e];j(t)&&(n[e]=Vu(t))}return n},"func"),Tr=Vu;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var Ix=a(function(n){return(void 0===n?"undefined":_type_of(n))!="object"||null===n?null:Le(n,{})},"func"),Mr=Ix;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var Ku=a(function(n,e){for(var t in e)j(n[t])&&j(e[t])?Ku(n[t],e[t]):Le(n,_define_property({},t,e[t]));return n},"func"),Or=Ku,Ex=a(function(n,e){try{if(!localStorage)return!1;var t=Lr(n),r={};j(t)&&(r=t);var o=Mr(e);if(!j(o))return!1;var w=Tr(o),I=Or(r,w),D=vt(I);return localStorage.setItem(n,D),!0}catch(e){return!1}},"func"),Hu=Ex,ju={createCanvas:xe,getLocale:Eu,getLocalStorage:Lr,getQueryParams:Lu,getScreenHeight:Cu,getScreenWidth:Tu,writeLocalStorage:Hu,vibrate:Nu,getIndexedDB:Iu,WebWorker:Uu,setIndexedDB:Ou,removeKeyLocalStorage:Mu};s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var Lx=a(function(){try{var n=window.AudioContext||window.webkitAudioContext;if(!n)return"unknown";var e=new n;e.resume();var t=e.state;return e.close(),t}catch(e){return"unknown"}},"func"),Wu=Lx;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var Cx=a(function(){var _window_devicePixelRatio;return Number((null!=(_window_devicePixelRatio=window.devicePixelRatio)?_window_devicePixelRatio:1).toFixed(1))},"func"),Nr=Cx,Tx=a(function(n){return n*Nr()},"func"),zu=Tx;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var Mx=a(function(){return/iPhone|iPad|iPod/i.test(navigator.userAgent)},"func"),Rr=Mx,Ox=a(function(){try{var n=getComputedStyle(document.documentElement).getPropertyValue("--sab"),e=parseInt(n,10);if(!isNaN(e)&&e>0)return e}catch(e){}try{var n1=document.createElement("div");n1.style.cssText="position:absolute;top:0;left:0;z-index:-9999;visibility:hidden;padding-bottom:env(safe-area-inset-bottom);",document.body.appendChild(n1);var e1=window.getComputedStyle(n1).paddingBottom,t=parseInt(e1,10);if(document.body.removeChild(n1),!isNaN(t)&&t>0)return t}catch(e){}if(Rr()){var _window_screen=window.screen,n2=_window_screen.width,e2=_window_screen.height,t1=Math.min(n2,e2),r=Math.max(n2,e2);if(["375,812","360,780","414,896","390,844","428,926","393,852","430,932"].includes("".concat(t1,",").concat(r))||r/t1>2)return 34}return 0},"func"),qu=Ox;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var Nx=a(function(){try{var _xe,_ref=null!=(_xe=xe({contextType:"webgl",type:"canvas"}))?_xe:{},n=_ref.context,e=_ref.canvas;if(!n||!e)return"unknown";var t=n.getParameter(n.RENDERER);return e.remove(),t.substring(0,70)}catch(e){return"unknown"}},"func"),Yu=Nx;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var Rx=a(function(){try{var n=window.navigator;return"hardwareConcurrency"in n&&"number"==typeof n.hardwareConcurrency?n.hardwareConcurrency:0}catch(e){return 0}},"func"),Ju=Rx;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var _x=a(function(){try{var n=window.performance;if(!("memory"in n)||"object"!=_type_of(n.memory))return"unknown";var _n_memory=n.memory,e=_n_memory.usedJSHeapSize,t=_n_memory.jsHeapSizeLimit;if(!e||!t)return"unknown";var r=Math.round(t/1024/1024),o=Math.round(e/1024/1024),w=r-o;return"T:".concat(r,"MB U:").concat(o,"MB F:").concat(w,"MB")}catch(e){return"unknown"}},"func"),Qu=_x;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var kx=a(function(){return/Android/i.test(navigator.userAgent)},"func"),Xu=kx;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var Gx=a(function(){return!/Android|iPhone|iPad|iPod/i.test(navigator.userAgent)},"func"),Zu=Gx;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var Fx=a(function(){try{return eval("try{const func = ()=>{}}catch(e){}"),!1}catch(n){return!0}},"func"),ep=Fx;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var Bx=a(function(){return/Android|iPhone|iPad|iPod/i.test(navigator.userAgent)},"func"),tp=Bx;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var Ux=a(function(){try{var _xe,_ref=null!=(_xe=xe({contextType:"2d",type:"canvas"}))?_xe:{},n=_ref.canvas,e=_ref.context;if(!n||!e)return!1;var t=n.toDataURL("image/webp").startsWith("data:image/webp");return n.remove(),t}catch(e){return!1}},"func"),rp=Ux;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var Vx=a(function(){try{var _xe,_ref=null!=(_xe=xe({contextType:"webgl",type:"canvas"}))?_xe:{},n=_ref.context,e=_ref.canvas;if(!n||!e)return -1;var t=n.getParameter(n.MAX_TEXTURE_SIZE);return e.remove(),t<1?-1:t}catch(e){return -1}},"func"),np=Vx;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var Kx=a(function(){var _window_screen_orientation,_window_screen;if(null==(_window_screen=window.screen)||null==(_window_screen_orientation=_window_screen.orientation)?void 0:_window_screen_orientation.type)return window.screen.orientation.type;if("matchMedia"in window){if(window.matchMedia("(orientation: portrait)").matches)return"portrait-primary";if(window.matchMedia("(orientation: landscape)").matches)return"landscape-primary"}return window.innerHeight>window.innerWidth?"portrait-primary":window.innerWidth>window.innerHeight?"landscape-primary":"unknown"},"func"),ap=Kx;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var Hx=a(function(){try{var _xe,_ref=null!=(_xe=xe({contextType:"webgl",type:"canvas"}))?_xe:{},n=_ref.context,e=_ref.canvas;if(!n||!e)return"unknown";var t=n.getParameter(n.VERSION);return e.remove(),t.substring(0,70)}catch(e){return"unknown"}},"func"),op=Hx,sp={isES5:ep,isIOS:Rr,isMobile:tp,isAndroid:Xu,isDesktop:Zu,heapMemory:Qu,audioState:Wu,pixelRatio:Nr,orientation:ap,gpuRenderer:Yu,webglVersion:op,isSupportWebp:rp,maxTextureSize:np,getPhysicPixels:zu,getSafeAreaBottom:qu,hardwareConcurrency:Ju};s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var jx=a(function(n){return[null,n]},"failure"),Xe=jx;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var Wx=a(function(n){return null!==n[1]},"isFailure"),bt=Wx;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var zx=a(function(n){return[n,null]},"success"),Te=zx,qx=a(function(n){return function(e){if(bt(e))return e;try{return Te(n(e[0]))}catch(t){return Xe(we(t))}}},"apply"),_r=qx;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var Yx=a(function(n){return function(e){return _async_to_generator(function(){return _ts_generator(this,function(_state){switch(_state.label){case 0:if(bt(e))return[2,e];_state.label=1;case 1:return _state.trys.push([1,3,,4]),[4,n(e[0])];case 2:return[2,Te.apply(void 0,[_state.sent()])];case 3:return[2,Xe(we(_state.sent()))];case 4:return[2]}})})()}},"applyAsync"),kr=Yx;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var Jx=a(function(n){try{return Te(n())}catch(e){return Xe(we(e))}},"applyImmediate"),ip=Jx;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var Qx=a(function(n){return _async_to_generator(function(){return _ts_generator(this,function(_state){switch(_state.label){case 0:return _state.trys.push([0,2,,3]),[4,n()];case 1:return[2,Te.apply(void 0,[_state.sent()])];case 2:return[2,Xe(we(_state.sent()))];case 3:return[2]}})})()},"applyImmediateAsync"),cp=Qx;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var Xx=a(function(n){return n[1]},"extractFailure"),lp=Xx;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var Zx=a(function(n){return n[0]},"extractSuccess"),dp=Zx;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var ew=a(function(n){return null===n[1]},"isSuccess"),up=ew;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var tw=Te,pp=tw;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var rw=a(function(){for(var _len=arguments.length,n=Array(_len),_key=0;_key<_len;_key++)n[_key]=arguments[_key];return function(e){return n.reduce(function(t,r){return _r(r)(t)},e)}},"pipe"),mp=rw;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var nw=a(function(){for(var _len=arguments.length,n=Array(_len),_key=0;_key<_len;_key++)n[_key]=arguments[_key];return function(e){return _async_to_generator(function(){var t,_iteratorNormalCompletion,_didIteratorError,_iteratorError,_iterator,_step,err;return _ts_generator(this,function(_state){switch(_state.label){case 0:t=e,_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0,_state.label=1;case 1:_state.trys.push([1,6,7,8]),_iterator=n[Symbol.iterator](),_state.label=2;case 2:if(_iteratorNormalCompletion=(_step=_iterator.next()).done)return[3,5];return[4,kr(_step.value)(t)];case 3:t=_state.sent(),_state.label=4;case 4:return _iteratorNormalCompletion=!0,[3,2];case 5:return[3,8];case 6:return err=_state.sent(),_didIteratorError=!0,_iteratorError=err,[3,8];case 7:try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}return[7];case 8:return[2,t]}})})()}},"pipeAsync"),hp=nw,fp={apply:_r,applyAsync:kr,applyImmediate:ip,applyImmediateAsync:cp,lift:pp,success:Te,pipe:mp,pipeAsync:hp,extractSuccess:dp,extractFailure:lp,isFailure:bt,isSuccess:up};s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),wr(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var aw=a(function(n){return Promise.all(n.map(function(t){return Promise.resolve(t).then(function(r){return{status:"fulfilled",value:r}},function(r){return{status:"rejected",reason:r}})}))},"func"),Gr=aw;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var ow=a(function(n){return"function"==typeof Promise.any?Promise.any(n):new Promise(function(e,t){var r=[],o=0,w=a(function(I){if(!(I<n.length))if(r.length>0)e(r[0]);else{var D=Error("All promises were rejected");D.errors=r,t(D)}},"check");n.forEach(function(I,D){I.then(function(S){r[D]=S,w(++o)}).catch(function(S){r[D]=S,w(++o)})})})},"func"),yp=ow;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var sw=a(function(n,e){return _async_to_generator(function(){return _ts_generator(this,function(_state){switch(_state.label){case 0:if(_state.trys.push([0,4,,5]),!e)return[3,2];return[4,Promise.race([n,new Promise(function(r,o){return setTimeout(function(){return o(Error("Timeout"))},e)})])];case 1:case 3:return[2,[_state.sent(),null]];case 2:return[4,n];case 4:return[2,[null,we(_state.sent())]];case 5:return[2]}})})()},"func"),gp=sw;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var iw=a(function(){var n=null,e=new Set,t=a(function(w){e.add(w)},"defer"),r=a(function(w){e.delete(w)},"cancel"),o=a(function(){e.clear()},"clear");return{defer:t,cancel:r,successor:a(function(w){if(void 0===w)throw Error("Latch cannot be its own successor");n=w},"successor"),trigger:a(function(){return _async_to_generator(function(){var _tmp;return _ts_generator(this,function(_state){switch(_state.label){case 0:return e.add(o),[4,Gr(_to_consumable_array(e).map(function(I){return Promise.resolve().then(I)}))];case 1:if(_state.sent(),!(_tmp=n))return[3,3];return[4,n.trigger()];case 2:_state.sent(),_tmp=n=null,_state.label=3;case 3:return[2]}})})()},"trigger"),clear:o}},"func"),Pp=iw;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var cw=a(function(){var n={},e=a(function(t){var _n_t,r=null==(_n_t=n[t])?void 0:_n_t.shift();r?r():delete n[t]},"release");return{use:a(function(t){var r=!1,o={release:a(function(){r||(r=!0,e(t))},"release")};return n[t]?new Promise(function(w){n[t].push(function(){return w(o)})}):(n[t]=[],Promise.resolve(o))},"use")}},"mutex"),xp=cw;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var lw=a(function(n,e){try{return n()}catch(t){try{return e()}catch(e){throw t}}},"func"),wp=lw;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var dw=a(function(n,e){return _async_to_generator(function(){var t,e1;return _ts_generator(this,function(_state){switch(_state.label){case 0:return _state.trys.push([0,2,,7]),[4,n()];case 1:return[2,_state.sent()];case 2:t=_state.sent(),_state.label=3;case 3:return _state.trys.push([3,5,,6]),[4,e()];case 4:return[2,_state.sent()];case 5:throw e1=_state.sent(),t;case 6:return[3,7];case 7:return[2]}})})()},"func"),$p=dw;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var uw=a(function(n){var e=n.generate,tmp=n.generateSeed,t=void 0===tmp?a(function(){return 1e6*Math.random()},"generateSeed"):tmp,tmp1=n.seed,o=void 0===tmp1?Date.now():tmp1;return function(){for(var _len=arguments.length,w=Array(_len),_key=0;_key<_len;_key++)w[_key]=arguments[_key];return o=t(o),e.apply(void 0,[o].concat(_to_consumable_array(w)))}},"func"),Ap=uw;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var vp=a(function(n,e){n.__proto__.valueOf=function(){return e},n.__proto__.toString=function(){return"".concat(e)}},"makeMutableTrick"),pw=a(function(n){return n.constructor(be(N({},n),{__proto__:n.__proto__}))},"makeTypeTrick"),Sp=a(function(n){var e=Object.keys(n),_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_loop=function(){var _Object_getOwnPropertyDescriptor,t=_step.value,r=null==(_Object_getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor(n,t))?void 0:_Object_getOwnPropertyDescriptor.value;if(j(r))return Sp(r),"continue";try{var o=r;vp(o,r),Object.defineProperty(n,t,{enumerable:!1,configurable:!0,get:function get(){return pw(o)},set:function set(w){Le(o,w),vp(o,w)}})}catch(e){}},_iterator=e[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0)_loop()}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}},"func"),bp=Sp;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var mw=a(function(n,e){return e<=0?n:Promise.race([n,new Promise(function(t,r){setTimeout(function(){return r(Error("Timeout"))},e)})])},"func"),Dp=mw;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var hw=a(function(n){var e=performance.now();return function(){return _async_to_generator(function(){var _tmp;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(!(_tmp=performance.now()-e>n))return[3,2];return[4,new Promise(function(t){return requestAnimationFrame(t)})];case 1:_state.sent(),_tmp=e=performance.now(),_state.label=2;case 2:return[2]}})})()}},"func"),Ip=hw;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var fw=a(function(n){return n.reduce(function(e,t){return"fulfilled"===t.status?e.successes.push(t.value):e.failures.push(t.reason),e},{successes:[],failures:[]})},"unwrapAllSettled"),Ep=fw,Lp={accessBlocker:xt,allSettled:Gr,any:yp,debounce:Vt,handleAsync:gp,latch:Pp,memoize:Re,mutex:xp,retry:wp,retryAsync:$p,rng:Ap,syncVars:bp,throttle:Kt,timeOut:Dp,timeSlice:Ip,toError:we,unwrapAllSettled:Ep};s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var yw=a(function(n){var e={};for(var t in n)e[n[t]]=t;return e},"func"),Fr=yw,gw=Re(function(n,e){var t=n.toLowerCase();if("string"==typeof n){var r=e[t];if("string"==typeof r)return r}return"?"}),Pw=Re(function(n){for(var e=[],t=/:([A-Z0-9?]+)/gm,r=null;null!==(r=t.exec(n));)e.push(r[1]);return e}),xw=Re(function(n){for(var _loop=function(){var o=r[0];if(o.length>=2){var _e,w=o.length,I=o.slice(0,w-1),D=o[w-1],S=wt(+I).map(function(){return D});return(_e=e).push.apply(_e,_to_consumable_array(S)),"continue"}e.push(o)},e=[],t=/(\d+[A-Z?]|[A-Z?])/gm,r=null;null!==(r=t.exec(n));)_loop();return e}),ww=a(function(n,e){var t=n,r=Fr(e),o={},w=0,I=0,D=Pw(t),_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=D[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var S=_step.value;w=0,o[++I]||(o[I]={});var E=xw(S),_iteratorNormalCompletion1=!0,_didIteratorError1=!1,_iteratorError1=void 0;try{for(var _step1,_iterator1=E[Symbol.iterator]();!(_iteratorNormalCompletion1=(_step1=_iterator1.next()).done);_iteratorNormalCompletion1=!0){var b=_step1.value;w++;var L=gw(b,r);o[I][w]=L}}catch(err){_didIteratorError1=!0,_iteratorError1=err}finally{try{_iteratorNormalCompletion1||null==_iterator1.return||_iterator1.return()}finally{if(_didIteratorError1)throw _iteratorError1}}}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return o},"func"),Cp=ww;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var $w=a(function(n,e){if(!j(n))return!1;try{if(j(n[e]))return!0}catch(e){return!1}return"function"==typeof Object.hasOwn?Object.hasOwn(n,e):Object.prototype.hasOwnProperty.call(n,e)},"func"),me=$w;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var Aw=a(function(n){return"string"==typeof n},"func"),Br=Aw,vw=Re(function(n,e){if(!j(e)||!me(e,n))return"?";var t=e[n];return"string"==typeof t?"".concat(t.toUpperCase()):"?"}),Tp=a(function(n,e){arguments.length>2&&void 0!==arguments[2]&&arguments[2];var r="";if(!j(n))return r;var o="",w=1;for(var I in n)if(me(n,I)){var D=n[I];if(j(D)){r+=":".concat(Tp(D,e,!0));continue}if(Br(D)){var S=vw(D,e);S===o?(w++,r=r.slice(0,-2)):w=1,r+="".concat(w).concat(S),o=S}}return r.replace(/1([A-Z])/g,"$1")},"func"),Mp=Tp;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var Sw=a(function(n,e){try{if(!n)return"";if(e){var t=atob(n),r=btoa(e);return t=t.replace(r,"="),atob(t)}return atob(n)}catch(e){return""}},"func"),Op=Sw;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var bw=a(function(){return{}},"createCompressDict"),La={},jt=a(function(n){return La[n]||(La[n]=bw()),La[n]},"getCompressionDict"),Np=a(function(n,e){var t=jt(e),r=Object.keys(t).length;t[n]=r+1},"setCompressionDict"),Dw=a(function(n,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=n[0],o=[],w=jt(t);if(e)for(var S in e)Np(S,t);for(var S1=1;S1<n.length;S1++){var E=n[S1],b="".concat(r).concat(E);r=n[++S1],void 0===w[b]&&(Np(b,t),w=jt(t))}r=n[0];for(var I=1,D=0;I<n.length;){var S2=n[I],E1="".concat(r).concat(S2),b1=Iw(n.slice(D),w);if(null!==b1){o.push(w[b1]),I+=b1.length-E1.length,r="",D=I+1,I++;continue}void 0===w[E1]?r=E1:(o.push(w[E1]),r="",D=I+1),I++}return o},"func"),Iw=a(function(n,e){var t=Object.keys(e);return 0===(t=t.filter(function(r){return n.indexOf(r)>-1&&n!==r})).length?null:t.sort(function(r,o){return o.length-r.length})[0]},"getLongestAvailableKeyInCompressDict"),Rp=Dw;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var Ew=a(function(n){var e={};for(var t in n)e[n[t]]=t;return e},"createDecompressDict"),Lw=a(function(n,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r="",o="",w=jt(t);e&&(w=N(N({},e),w));var I=Ew(w);for(var D in n){var S=n[D];o+=r=void 0!==I[S]?I[S]:"?"}return o},"func"),_p=Lw;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var Cw=a(function(n,e){try{if(!n)return"";if(e){var t=btoa(n),r=btoa(e);return t=t.replace("=",r),btoa(t)}return btoa(n)}catch(e){return""}},"func"),kp=Cw,Gp={decodeMap:Cp,encodeMap:Mp,hashToString:Op,stringToHash:kp,lwzCompress:Rp,lwzDecompress:_p};s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var Tw=a(function(n,e){var t=n.split(","),r=t[0].match(/:(.*?);/);if(!r)return null;for(var o=r[1],w=atob(t[t.length-1]),I=w.length,D=new Uint8Array(I);I--;)D[I]=w.charCodeAt(I);return new File([D],e,{type:o})},"base64ToFile"),Fp=Tw;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var Mw=a(function(n){return new Promise(function(e,t){var r=new FileReader;r.onloadend=function(){return e(r.result)},r.onerror=t,r.readAsDataURL(n)})},"func"),Bp=Mw;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var Dt=new Image,Ow=a(function(n){var e=!(arguments.length>1)||void 0===arguments[1]||arguments[1],t=!(arguments.length>2)||void 0===arguments[2]||arguments[2];return new Promise(function(r){e&&(Dt=new Image),Dt.onload=function(){r(Dt),t&&URL.revokeObjectURL(Dt.src)},Dt.onerror=function(){r(null)},Dt.src=URL.createObjectURL(n)})},"func"),Up=Ow;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var Nw=a(function(n,e){return _async_to_generator(function(){var t;return _ts_generator(this,function(_state){switch(_state.label){case 0:return[4,fetch(n).then(function(r){return r.blob()}).catch(function(){return null})];case 1:return[2,(t=_state.sent())?new File([t],e):null]}})})()},"func"),Vp=Nw;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var ct=xe({contextType:"2d",contextAttributes:{willReadFrequently:!0}}),Rw=a(function(n){return _async_to_generator(function(){return _ts_generator(this,function(_state){return[2,new Promise(function(e,t){var r=new FileReader;r.onload=function(){return e(r.result)},r.onerror=t,r.readAsDataURL(n)})]})})()},"convertBlobToBase64"),_w=a(function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"png";return _async_to_generator(function(){var t,r;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(t=n.width,r=n.height,!t||!r)throw Error("Element has no width or height");if(!ct)throw Error("Failed to create canvas");if(ct.canvas.width=t,ct.canvas.height=r,ct.context.drawImage(n,0,0,t,r),_instanceof(ct.canvas,HTMLCanvasElement))return[2,ct.canvas.toDataURL("image/".concat(e),.85)];return[4,ct.canvas.convertToBlob({type:"image/".concat(e)})];case 1:return[2,Rw(_state.sent())]}})})()},"func"),Kp=_w;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var Hp=xe({contextType:"2d",contextAttributes:{willReadFrequently:!0}}),kw=a(function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"png";return _async_to_generator(function(){var t,r;return _ts_generator(this,function(_state){try{if(!Hp)throw Error("Failed to create canvas");return t=Hp.canvas,r=Hp.context,[2,(t.width=n.width,t.height=n.height,r.drawImage(n,0,0,n.width,n.height),_instanceof(t,HTMLCanvasElement)?new Promise(function(o){t.toBlob(function(w){return o(w)},"image/".concat(e),.9)}):t.convertToBlob({type:"image/".concat(e),quality:.9}))]}catch(e){return[2,null]}})})()},"func"),jp=kw;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var Gw=a(function(n){return _async_to_generator(function(){var _$e,e;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(!n)throw Error("url is empty");_state.label=1;case 1:return _state.trys.push([1,4,,5]),[4,fetch(n)];case 2:if(!(_$e=_state.sent()).ok)throw Error("Network response was not ok");return[4,_$e.blob()];case 3:return[2,_state.sent()];case 4:throw _instanceof(e=_state.sent(),Error)?e:Error("Failed to fetch image");case 5:return[2]}})})()},"func"),Wp=Gw;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var Fw=a(function(n){return _async_to_generator(function(){return _ts_generator(this,function(_state){return[2,new Promise(function(e,t){n||t(Error("url is empty"));var r=new Image;r.crossOrigin="anonymous",r.onload=function(){e(r)},r.onerror=function(o){t(o)},r.src=n})]})})()},"func"),zp=Fw;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var Bw=a(function(n,e){if(isNaN(n)||isNaN(e))throw Error("width and height must be numbers");return{string:"+",style:"font-size: 1px; padding: ".concat(Math.floor(e/2),"px ").concat(Math.floor(n/2),"px;")}},"getBox"),Uw=a(function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return new Promise(function(t){var r=new Image;r.onerror=function(){t(!1)},r.onload=function(){Bw(r.width*e,r.height*e),t(!0)},r.src=n})},"func"),qp=Uw,Yp={base64ToFile:Fp,blobToDataImage:Bp,blobToHtmlImage:Up,blobUrlToFile:Vp,elementToBase64:Kp,elementToBlob:jp,fetchImage:Wp,loadImage:zp,logImage:qp};s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var Jp={clone:Cr,decode:At,encode:vt};s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var V=/*#__PURE__*/function(){function ne(){_class_call_check(this,ne),_define_property(this,"Y",console)}return _create_class(ne,null,[{key:"inst",get:function get(){return ne._e||(ne._e=new ne),ne._e}},{key:"le",value:function le(e){return e===console}},{key:"jt",value:function jt(e){return _instanceof(e,Performance)}},{key:"ce",value:function ce(e){return!ne.le(e)&&!ne.jt(e)}},{key:"setService",value:function setService(e){e&&(ne.inst.Y=e)}},{key:"measure",value:function measure(e){var t=ne.inst.Y;ne.ce(t)&&t.measure(e)}},{key:"start",value:function start(e){var t=ne.inst.Y;ne.le(t)?t.time(e):ne.jt(t)?t.mark("".concat(e,"_start")):ne.ce(t)&&t.start(e)}},{key:"stop",value:function stop(e){var t=ne.inst.Y;if(ne.le(t))t.timeEnd(e);else if(ne.jt(t)){try{t.mark("".concat(e,"_end")),t.measure(e,"".concat(e,"_start"),"".concat(e,"_end"))}catch(e){}try{t.clearMarks("".concat(e,"_start")),t.clearMarks("".concat(e,"_end"))}catch(e){}}else ne.ce(t)&&t.stop(e)}},{key:"putMetric",value:function putMetric(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Date.now(),o=ne.inst.Y;ne.le(o)?o.timeLog(e,"".concat(t,": ").concat(r)):ne.ce(o)&&o.putMetric(e,t,r)}},{key:"incMetric",value:function incMetric(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=ne.inst.Y;ne.le(o)?o.timeLog(e,"".concat(t,": increment by ").concat(r)):ne.ce(o)&&o.incrementMetric(e,t,r)}},{key:"putAttr",value:function putAttr(e,t,r){var o=ne.inst.Y,w=r.slice(0,100);ne.le(o)?o.timeLog(e,"".concat(t,": ").concat(w)):ne.ce(o)&&o.putAttr(e,t,w)}},{key:"rmAttr",value:function rmAttr(e,t){var r=ne.inst.Y;ne.le(r)?r.timeLog(e,"".concat(t,": removed")):ne.ce(r)&&r.removeAttr(e,t)}}]),ne}();a(V,"Mark"),Ge(V,"_inst$");var Ca=V,Qp=Ca,Xp={Mark:Qp};s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var Vw=a(function(n,e){if("number"!=typeof n)return"0";for(var t=yt(10,e),r=n,o=0;r>=t;)r=Math.floor(r/1e3),o++;var w=r.toString(),I=["","K","M","B","T","Qa","Qi","Sx","Sp","Oc","No","Dc","Ud","Dd","Td","Qad","Qid","Sxd","Spd"][o];return"".concat(w).concat(I)},"func"),Zp=Vw;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var Kw=a(function(n,e){for(var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"0",r=n.toString(),o=r.length,w=0;w<e-o;w++)r+=t;return r},"padEnd"),em=Kw;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var Hw=a(function(n,e){for(var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"0",r=n.toString(),o=r.length,w=0;w<e-o;w++)r=t+r;return r},"padStart"),tm=Hw;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var jw=a(function(n,e){return Math.floor(Math.random()*n)*(e?Math.random()>.5?1:-1:1)},"func"),Wt=jw;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var Ww=a(function(n){return n>0?1:n<0?-1:0===n?0:NaN},"func"),rm=Ww;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var zw=a(function(n,e){var _ref=e||{},tmp=_ref.fractionalDigits,t=void 0===tmp?0:tmp,tmp1=_ref.startAbbreviate,r=void 0===tmp1?1e3:tmp1,tmp2=_ref.abbreviateStep,o=void 0===tmp2?3:tmp2,tmp3=_ref.maxLength,w=void 0===tmp3?-1:tmp3,tmp4=_ref.removeLastZero,I=void 0===tmp4||tmp4,tmp5=_ref.suffixes,D=void 0===tmp5?["","k","m","b","t","q"]:tmp5,S=-1===w?0x5f5e0ff:w;if(n>=r){var R=Math.floor((Math.floor(n/yt(10,o)).toString().length-1)/o)+1,$=(n/yt(yt(10,o),R)).toFixed(t),z=S-D[R].length,k=$.substring(0,z);return(I?nm(k):k)+D[R]}var E=n.toFixed(t),b=S-D[0].length,L=E.substring(0,b);return I?nm(L):L+D[0]},"toAbbreviatedString"),nm=a(function(n){if(0>n.indexOf("."))return n;for(var e=n.length-1;e>=0;e--){if("."===n[e])return n.substring(0,e);if("0"!==n[e])return n.substring(0,e+1)}return n},"removeZero"),am=zw,om={getShortNumber:Zp,sign:rm,padEnd:em,padStart:tm,random:Wt,toAbbreviatedString:am};s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var sm=a(function(n){var e=n.replace(/[-_\s.]+(.)?/g,function(t,r){return r?r.toUpperCase():""});return e.substring(0,1).toUpperCase()+e.substring(1)},"toUpperCamelCase"),Ur=a(function(n){var e=n.replace(/[-_\s.]+(.)?/g,function(t,r){return r?r.toUpperCase():""});return e.substring(0,1).toLowerCase()+e.substring(1)},"toCamelCase"),Ta=a(function(n){var e={};for(var t in n){var r=n[t],o=Ur(t);Array.isArray(r)?e[o]=r.map(function(w){return(void 0===w?"undefined":_type_of(w))=="object"?Ta(w):w}):(void 0===r?"undefined":_type_of(r))=="object"?e[o]=Ta(r):e[o]=n[t]}return e},"func"),im=Ta;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var qw=a(function(n,e){return n===e?0!==n||1/n==1/e:n!=n&&e!=e},"func"),Vr=qw,cm=a(function(n,e,t){var _t_get,_t_get1,r={};if(t.has(n)&&(null==(_t_get=t.get(n))?void 0:_t_get.has(e)))return r;for(var o in t.has(n)||t.set(n,new WeakSet),null==(_t_get1=t.get(n))||_t_get1.add(e),e)if(me(e,o)){var w=void 0;try{w=e[o]}catch(e){continue}if(me(n,o)){var I=void 0;try{I=n[o]}catch(e){r[o]=w;continue}if(j(I)&&j(w)&&null!==I&&null!==w&&"function"!=typeof I&&"function"!=typeof w){var D=cm(I,w,t);Object.keys(D).length>0&&(r[o]=D)}else Vr(I,w)||(r[o]=w)}else r[o]=w}for(var o1 in n)me(n,o1)&&!me(e,o1)&&(r[o1]=void 0);return r},"diffRecursive"),Yw=a(function(n,e){return cm(n,e,new WeakMap)},"func"),lm=Yw;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var Jw=a(function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t={},_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=Object.values(n)[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var r=_step.value;for(var o in r){var w=o;e.includes(w)&&(t[w]||(t[w]=[]),t[w].push(r[w]))}}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return t},"func"),dm=Jw;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var um=a(function(n,e){var t={};for(var r in e)if(me(e,r))if(j(e[r])&&null!==e[r])if(j(n[r])&&null!==n[r]){if("function"==typeof e[r])continue;var o=um(n[r],e[r]);Object.keys(o).length>0&&(t[r]=o)}else me(n,r)||(t[r]=Le({},e[r]));else me(n,r)||(t[r]=e[r]);return t},"func"),pm=um;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var Qw=a(function(n,e){return Object.values(e).includes(n)},"func"),mm=Qw;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var Xw=a(function(n){return["string","number","symbol"].indexOf(void 0===n?"undefined":_type_of(n))>-1},"func"),Kr=Xw,Zw=a(function(n,e){var t={},_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=n[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var r=_step.value,o=r[e];Kr(o)&&(t[o]=r)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return t},"func"),hm=Zw;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var Hr=a(function(n){return n.replace(/([a-z])([A-Z])/g,"$1_$2").replace(/\s+/g,"_").toLowerCase()},"toSnakeCase"),Ma=a(function(n){var e={};for(var t in n){var r=n[t],o=Hr(t);Array.isArray(r)?e[o]=r.map(function(w){return(void 0===w?"undefined":_type_of(w))=="object"?Ma(w):w}):(void 0===r?"undefined":_type_of(r))=="object"?e[o]=Ma(r):e[o]=n[t]}return e},"func"),fm=Ma;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var e$=a(function(n){return Object.keys(n).map(function(e){return n[e]})},"func"),ym=e$,gm={assign:Le,camelCaseKeys:im,clone:Mr,clear:Tr,diff:lm,dod:dm,hasOwn:me,invert:Fr,is:Vr,isIn:mm,keyBy:hm,merge:Or,snakeCaseKeys:fm,vals:ym,filterDeep:pm};s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var Na={};kd(Na,{Signal:function(){return jr},SignalAbortedError:function(){return zt},SignalController:function(){return Oa}}),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var Ra=/*#__PURE__*/function(Error1){function Ra(){var _this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Signal aborted with no reason";return _class_call_check(this,Ra),(_this=_call_super(this,Ra,[e])).name="SignalAbortedStopped",_this}return _inherits(Ra,Error1),Ra}(_wrap_native_super(Error));a(Ra,"SignalAbortedError");var zt=Ra,Wr=/*#__PURE__*/function(){function lf(){_class_call_check(this,lf),_define_property(this,"rt",{type:"running"}),_define_property(this,"Ne",[])}return _create_class(lf,[{key:"once",value:function once(e){this.Ne.push(e)}},{key:"off",value:function off(e){this.Ne=this.Ne.filter(function(t){return t!==e})}},{key:"abort",value:function abort(e){var t=this.constructReason(e);this.rt={type:"stopped",reason:t};var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=this.Ne[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0)(0,_step.value)(t)}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}this.Ne=[]}},{key:"aborted",get:function get(){return"stopped"===this.rt.type}},{key:"reason",get:function get(){if("stopped"===this.rt.type)return this.rt.reason}},{key:"wrap",value:function wrap(e){if(!this.aborted)return e}},{key:"chain",value:function chain(e){var _this=this;_instanceof(e,lf)?e.once(function(t){return _this.abort(t)}):e.addEventListener("abort",function(){return _this.abort(e.reason)},{once:!0})}},{key:"promise",value:function promise(){var _this=this;return this.aborted?Promise.resolve(this.reason):new Promise(function(e){_this.once(function(t){return e(t)})})}},{key:"constructReason",value:function constructReason(e){return _instanceof(e,Error)?e:"string"==typeof e?new zt(e):new zt}}]),lf}();a(Wr,"Signal");var jr=Wr,_a=/*#__PURE__*/function(){function _a(){_class_call_check(this,_a),_define_property(this,"Te",void 0)}return _create_class(_a,[{key:"renew",value:function renew(){null==(_this_Te=this.Te)||_this_Te.abort();var _this_Te,e=new jr;return this.Te=e,e}},{key:"abort",value:function abort(){var _this_Te;null==(_this_Te=this.Te)||_this_Te.abort()}},{key:"promise",value:function promise(){return void 0===this.Te?Promise.resolve(void 0):this.Te.promise()}}]),_a}();a(_a,"SignalController");var Oa=_a,Pm=Na;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var t$=a(function(n){return n&&n[0].toUpperCase()+n.slice(1)},"func"),xm=t$;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),a(r$,"fun");var wm=r$;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var lt=null,n$="Anonymous",a$=a(function(){return _async_to_generator(function(){var t,r;return _ts_generator(this,function(_state){switch(_state.label){case 0:return[4,fetch("https://randommer.io/api/Name",{method:"GET",headers:{"X-Api-Key":Ludex.Configs.Mockup.Profile.RandomNameApiKey,"Content-Type":"application/json"},body:JSON.stringify({nameType:"surname",quantity:1e3})})];case 1:if(!(t=_state.sent()).ok)throw Error("Can't fetch names");return[4,t.json()];case 2:if(!j(r=_state.sent())||!me(r,"data")||!Array.isArray(r.data))throw Error("Invalid names response");return[2,r.data]}})})()},"fetchNames"),o$=a(function(){return _async_to_generator(function(){var _tmp,n,e,e1;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(_state.trys.push([0,3,,4]),!(_tmp=!lt))return[3,2];return[4,a$()];case 1:_tmp=!(lt=_state.sent()),_state.label=2;case 2:if(_tmp)throw Error("Cannot fetch names");return n=lt[Wt(lt.length)],e=lt[Wt(lt.length)],[2,"".concat(n," ").concat(e)];case 3:return e1=_state.sent(),[2,n$];case 4:return[2]}})})()},"func"),$m=o$;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var s$=a(function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,e=a(function(o){return Math.floor(o).toString(n)},"s");return e(Date.now()/1e3)+Array(n+1).join(" ").replace(/./g,function(){return e(Math.random()*n)})},"func"),Am=s$;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var i$=a(function(n){var e=n?n.split("_"):[],t=e.length>0?e[0]:"en_US";switch(t){case"id":case"in":t="id"}return t},"func"),vm=i$;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var c$=a(function(n,e){var t=n.split(" "),r=(t.length<=1?_to_consumable_array(t):[t[0],t.pop()]).join(" "),o=r.lastIndexOf(" ")||0,w=o>=0?o:e;return(r.length>e?r.substring(0,w):r).substring(0,e)},"func"),Sm=c$;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var l$=a(function(n){var e=0;if(0===n.length)return e;for(var t=0;t<n.length;t++)e=(e<<5)-e+n.charCodeAt(t),e&=e;return e},"func"),bm=l$;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var d$=a(function(n,e){for(var t=0;t<e.length;t++)if(n[t]!==e[t])return!1;return!0},"fn"),Dm=d$;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var u$=a(function(n,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:" ",r=Math.floor(e);if(n.length>=r)return n;for(var o=r-n.length,w="",I=0;I<o;I++)w+=t;return w.slice(0,o)+n},"func"),Im=u$;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var p$=a(function(n){return Object.keys(n).reduce(function(e,t){var r=n[t];return void 0!==r&&e.push("".concat(t,"=").concat(r)),e},[]).join("&")},"func"),Em=p$;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var m$=a(function(n,e){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789*#%&!",r="",o=n;void 0!==e&&(o-=e.length,r+=e);for(var w=0;w<o;w++){var I=Math.floor(Math.random()*t.length);r+=t.charAt(I)}return r},"func"),Lm=m$;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var h$="0123456789ABCDEF",f$=a(function(){for(var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"0x",e=n,t=0;t<6;t++)e+=h$[Math.floor(16*Math.random())];return e},"func"),Cm=f$;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var y$=a(function(n){return n.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[]/g,function(e){return""===e?"d":"D"})},"func"),Tm=y$;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),a(Nm,"generateNameUsingString");var g$=a(function(n){for(var e=0,t=0;t<n.length;t++)e=(e<<5)-e+n.charCodeAt(t)|0;return Math.abs(e)},"createHash"),Mm=["James","Mary","John","Patricia","Robert","Jennifer","Michael","Linda","William","Elizabeth","David","Susan","Richard","Jessica","Joseph","Sarah","Thomas","Karen","Charles","Nancy","Christopher","Lisa","Daniel","Margaret","Matthew","Betty","Anthony","Sandra","Mark","Ashley","Donald","Dorothy","Steven","Kimberly","Paul","Emily","Andrew","Donna","Joshua","Michelle","Kenneth","Carol","Kevin","Amanda","Brian","Melissa","George","Deborah"],Om=["Smith","Johnson","Williams","Jones","Brown","Davis","Miller","Wilson","Moore","Taylor","Anderson","Thomas","Jackson","White","Harris","Martin","Thompson","Garcia","Martinez","Robinson","Clark","Rodriguez","Lewis","Lee","Walker","Hall","Allen","Young","Hernandez","King","Wright","Lopez","Hill","Scott","Green","Adams","Baker","Gonzalez","Nelson","Carter","Mitchell","Perez","Roberts","Turner","Phillips","Campbell","Parker","Evans"],Rm={toCamelCase:Ur,toUpperCamelCase:sm,capitalize:xm,generateObjectId:Am,getLanguageCode:vm,getShortName:Sm,hashCode:bm,matchStart:Dm,padStart:Im,params:Em,random:Lm,randomColor:Cm,removeDiacritics:Tm,findDuplicateSubstrings:wm,generateNameAsync:$m,toSnakeCase:Hr,generateNameUsingString:Nm};s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var _m=[60,3600,86400,604800,2592e3,31536e3,1/0],P$=["second","minute","hour","day","week","month","year"],x$=a(function(n,e,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"Soon";try{var _$o=null!=e?e:"en",w=null!=t?t:{numeric:"auto"},I=Math.round((1e3*n-Date.now())/1e3),D=Math.abs(Math.round((1e3*n-Date.now())/1e3)),S=Sr(_m,function(b){return b>D}),E=S?_m[S-1]:1;return new Intl.RelativeTimeFormat(_$o,w).format(Math.floor(I/E),P$[S])}catch(o){if(void 0!==r)return"Soon";throw o}},"func"),km=x$;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var w$=a(function(n){var e=new Date(n),t=e.getUTCHours(),r=e.getUTCMinutes(),o=e.getUTCSeconds(),w=e.getUTCMilliseconds(),I=t<10?"0".concat(t):"".concat(t),D=r<10?"0".concat(r):"".concat(r),S=o<10?"0".concat(o):"".concat(o),E="".concat(w);return w<10?E="00".concat(w):w<100&&(E="0".concat(w)),"".concat(I,":").concat(D,":").concat(S,":").concat(E)},"func"),Gm=w$;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var $$=a(function(n){var e=new Date(n),t=new Date;return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()},"func"),Fm=$$;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var A$=a(function(n){return new Promise(function(e){return setTimeout(e,n)})},"func"),Bm=A$,Um={isToday:Fm,sleepAsync:Bm,getRelativeTime:km,getTimeString:Gm};s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var v$=a(function(n){return"boolean"==typeof n},"func"),Vm=v$;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var S$=a(function(){var _codex_player,_codex;return!!(null==(_codex=codex)||null==(_codex_player=_codex.player)?void 0:_codex_player.getPlayerDataByKey("debug"))},"func"),Km=S$;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var b$=a(function(n){return"function"==typeof n},"func"),zr=b$;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var D$=a(function(n){return"number"==typeof n},"func"),Hm=D$;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var I$=a(function(n){return!!zr(n)&&(!!_instanceof(n,Promise)||"then"in n&&"function"==typeof n.then||"AsyncFunction"===n.constructor.name)},"func"),jm=I$;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var E$=a(function(n,e,t){var w,I,_ref=null!=t?t:{},tmp=_ref.timeout,r=void 0===tmp?1e3:tmp,tmp1=_ref.checkInterval,o=void 0===tmp1?16:tmp1;return new Promise(function(D,S){if("function"!=typeof n)throw Error("Input from must be a function");I=setInterval(function(){n()===("function"==typeof e?e():e)&&(clearTimeout(w),clearInterval(I),D(!0))},o),r>0&&(clearTimeout(w),w=setTimeout(function(){clearInterval(I),S(Error("Timeout"))},r))})},"func"),Wm=E$,zm={isBoolean:Vm,isDebugger:Km,isEmpty:$t,isFalsy:Dr,isFunction:zr,isNumber:Hm,isObject:j,isPromise:jm,isPropertyKey:Kr,isString:Br,isValueChangeAsync:Wm},L$={Array:bu,Browser:ju,Decorator:Ht,Device:sp,Function:Lp,Hash:Gp,Image:Yp,Json:Jp,Mark:Xp.Mark,Object:gm,Signal:Pm,String:Rm,Number:om,Time:Um,Valid:zm,Error:fp},qm=L$,C$=Object.preventExtensions({Dtos:{},Utils:Object.freeze(qm),Match:Object.freeze({Modes:Object.freeze($r)}),Events:Object.freeze(Ee),Configs:Object.seal(v),Plugins:Object.seal({Ads:null,Audio:null,Analytics:null})});window.Ludex=C$,window.TypeGuard=mu,window.GameName="Save The Pets",window.CommitId="f964e11e",window.BuildVersion=2,s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var _Ludex_Utils=Ludex.Utils,dt=_Ludex_Utils.Valid,Ze=_Ludex_Utils.Object,ka=_Ludex_Utils.String,Ga=_Ludex_Utils.Json,Fa="is invalid",Fe={},ee=/*#__PURE__*/function(){function ye(e){_class_call_check(this,ye),this.Zs(e)}return _create_class(ye,[{key:"Ce",value:function Ce(){return this.constructor}},{key:"Zs",value:function Zs(e){dt.isObject(e)||this.a("input data","is not an object");var t=this.Ce().getDefaults(),r=Ze.merge(t,e);this.Ma(r),this.q(r),this.o(r),this.Q(r)}},{key:"Ma",value:function Ma(e){}},{key:"J",value:function J(e){dt.isObject(e)||this.a("structure","is not an object");var t=this.nt(),r=Object.keys(e),o=this.Ce(),w=o.N();if(!o.loose[w]){var I=r.filter(function(D){return!t.includes(D)}),_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;if(I.length>0&&dt.isObject(e))try{for(var _step,_iterator=I[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var D=_step.value;Ze.assign(e,_define_property({},D,null))}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}var _iteratorNormalCompletion1=!0,_didIteratorError1=!1,_iteratorError1=void 0;try{for(var _step1,_iterator1=t[Symbol.iterator]();!(_iteratorNormalCompletion1=(_step1=_iterator1.next()).done);_iteratorNormalCompletion1=!0){var I1=_step1.value;Ze.hasOwn(e,I1)||this.a("structure","is missing key: ".concat(I1))}}catch(err){_didIteratorError1=!0,_iteratorError1=err}finally{try{_iteratorNormalCompletion1||null==_iterator1.return||_iterator1.return()}finally{if(_didIteratorError1)throw _iteratorError1}}}},{key:"X",value:function X(e){var t=this.Ce(),r=t.N(),_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=this.nt()[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var o=_step.value,w=e[o],I=ka.removeDiacritics(o).replace(/[^a-zA-Z0-9]/g,""),S=this["validate".concat(ka.capitalize(I))];if("function"==typeof S)try{S.call(this,w)}catch(E){if(!t.loose[r])throw E;var _Fe_r,b=null==(_Fe_r=Fe[r])?void 0:_Fe_r[o];void 0!==b&&(e[o]=Ga.clone(b))}else t.loose[r]||this.a("validator","is missing for key '".concat(o,"'"))}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}},{key:"Z",value:function Z(e){var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=this.nt()[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var t=_step.value;Ze.assign(this,_define_property({},t,e[t]))}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}},{key:"a",value:function a(e,t){var r=this.Ce().N();throw Error("".concat(r,": ").concat(e," ").concat(t))}},{key:"toObject",value:function toObject(){var e={},_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=this.nt()[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var t=_step.value;e[t]=this[t]}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return e}},{key:"nt",value:function nt(){var t=Fe[this.Ce().N()];return dt.isObject(t)?Object.keys(t):[]}}],[{key:"N",value:function N(){var _ye_name,e=Object.getOwnPropertyNames(ye.prototype).join("");return"string"!=typeof e?null!=(_ye_name=ye.name)?_ye_name:"unknown":e.replaceAll("validate","").replaceAll("constructor","").replaceAll("toObject","")}},{key:"addDefaults",value:function addDefaults(e){dt.isObject(e)||ye.prototype.a("default data",Fa);var t=Ga.clone(e),r=ye.N();dt.isObject(Fe[r])||(Fe[r]={});var o=Fe[r];Fe[r]=Ze.merge(o,t)}},{key:"getDefaults",value:function getDefaults(){var _Ga_clone,e=ye.N();return null!=(_Ga_clone=Ga.clone(Fe[e]))?_Ga_clone:{}}},{key:"addValidator",value:function addValidator(e,t){dt.isString(e)||ye.prototype.a("validate key",Fa),"function"!=typeof t&&ye.prototype.a("validate function",Fa);var r=ye.N(),o=Fe[r],w=ye.loose[r];Ze.assign(ye.loose,_define_property({},r,null)),Ze.assign(Fe,_define_property({},r,null));var I="validate".concat(ka.capitalize(e));Ze.assign(ye.prototype,_define_property({},I,t)),r=ye.N(),ye.loose[r]=w,Fe[r]=o}},{key:"makeStrict",value:function makeStrict(){var e=ye.N();ye.loose[e]=!1}},{key:"makeLoose",value:function makeLoose(){var e=ye.N();ye.loose[e]=!0}}]),ye}();a(ee,"BaseDtos"),Ge(ee,"loose",{});var Ba=ee,ae=Ba;Ludex.Dtos={Base:ae},s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var Va=/*#__PURE__*/function(){function Va(e){_class_call_check(this,Va),_define_property(this,"codex",void 0),_define_property(this,"Bt",void 0),this.codex=e,this.Bt={}}return _create_class(Va,[{key:"install",value:function install(e,t,r,o){if("function"!=typeof t)return!1;var w=new t(this.codex);return this.Bt[e]=w,r&&Object.defineProperty(this.codex,o,{get:a(function(){return w},"get")}),w.init(),!0}},{key:"get",value:function get(e){return this.Bt[e]}}]),Va}();a(Va,"Plugins");var Ua=Va,Ym=Ua;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var Ha=/*#__PURE__*/function(){function Ha(e){_class_call_check(this,Ha),_define_property(this,"codex",void 0),this.codex=e}return _create_class(Ha,[{key:"init",value:function init(){}}]),Ha}();a(Ha,"BasePlugin");var Ka=Ha,Jm=Ka,Wa=/*#__PURE__*/function(){function Wa(){_class_call_check(this,Wa),_define_property(this,"codex",void 0),_define_property(this,"plugins",void 0),_define_property(this,"ads",void 0),_define_property(this,"auth",void 0),_define_property(this,"audio",void 0),_define_property(this,"event",void 0),_define_property(this,"match",void 0),_define_property(this,"player",void 0),_define_property(this,"profile",void 0),_define_property(this,"context",void 0),_define_property(this,"storage",void 0),_define_property(this,"language",void 0),_define_property(this,"missions",void 0),_define_property(this,"analytics",void 0),_define_property(this,"visibility",void 0),_define_property(this,"leaderboard",void 0),_define_property(this,"dailyRewards",void 0),_define_property(this,"remoteConfig",void 0),_define_property(this,"frameCapture",void 0),_define_property(this,"firebase",void 0),_define_property(this,"monitorError",void 0),_define_property(this,"adaptivePerformance",void 0),_define_property(this,"inputRecorder",void 0),_define_property(this,"console",void 0),_define_property(this,"profiler",void 0),_define_property(this,"canvasRecorder",void 0),this.codex=this,this.plugins=new Ym(this.codex)}return _create_class(Wa,[{key:"boot",value:function boot(){return _async_to_generator(function(){return _ts_generator(this,function(_state){return[2]})})()}},{key:"start",value:function start(){return _async_to_generator(function(){return _ts_generator(this,function(_state){return[2]})})()}},{key:"getBuildVersion",value:function getBuildVersion(){return 0}}]),Wa}();a(Wa,"Game");var ja=Wa;window.Ludex.Plugins={BasePlugin:Jm};var Qm=ja;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var qa=/*#__PURE__*/function(Error1){function qa(e,t){var _this;return _class_call_check(this,qa),_define_property(_this=_call_super(this,qa,[e]),"payload",void 0),_this.name="BadRequest",_this.message=null!=e?e:"This request is bad",_this.payload=t,_this}return _inherits(qa,Error1),qa}(_wrap_native_super(Error));a(qa,"BadRequest");var za=qa,qr=za;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var Ja=/*#__PURE__*/function(Error1){function Ja(e,t){var _this;return _class_call_check(this,Ja),_define_property(_this=_call_super(this,Ja,[e]),"payload",void 0),_this.name="RequestTimeout",_this.message=null!=e?e:"This request is timeout",_this.payload=t,_this}return _inherits(Ja,Error1),Ja}(_wrap_native_super(Error));a(Ja,"RequestTimeout");var Ya=Ja,Yr=Ya,_Ludex_Utils1=Ludex.Utils,T$=_Ludex_Utils1.Valid,M$=_Ludex_Utils1.Time,_Ludex_Configs=Ludex.Configs,Xm=_Ludex_Configs.AppId,Qa=_Ludex_Configs.Network,O$=a(function(n){if(!n.ok)throw new qr(void 0,{response:n})},"validateResponse"),Zm=a(function(){var _codex_auth,n=null==(_codex_auth=codex.auth)?void 0:_codex_auth.getToken();return{token:n,timeout:Qa.Timeout,headers:{Authorization:"Bearer ".concat(n),"Content-Type":"application/json"}}},"defaultConfig"),eh=a(function(n,e,t,r){return function(){return _async_to_generator(function(){var _$o,w,I,D,o;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(_state.trys.push([0,3,,4]),!Xm)throw new qr("AppId is not defined");return _$o="".concat(n,"/apps/").concat(Xm,"/").concat(e),t.signal=(w=new AbortController).signal,I=setTimeout(function(){w.abort()},t.timeout),T$.isObject(r)&&(t.body=JSON.stringify(r)),[4,fetch(_$o,t)];case 1:return D=_state.sent(),clearTimeout(I),O$(D),[4,D.json()];case 2:return[2,_state.sent()||{}];case 3:if(_instanceof(o=_state.sent(),qr))return[2,null];throw _instanceof(o,Object)&&"name"in o&&"AbortError"===o.name?new Yr:o;case 4:return[2]}})})()}},"requester"),Xa=a(function(n,e){return _async_to_generator(function(){var t,e1;return _ts_generator(this,function(_state){switch(_state.label){case 0:return _state.trys.push([0,1,,7]),[2,n()];case 1:if(!(_instanceof(t=_state.sent(),Yr)&&e>0))return[3,6];_state.label=2;case 2:return _state.trys.push([2,5,,6]),[4,M$.sleepAsync(600)];case 3:return _state.sent(),[4,Xa(n,e-1)];case 4:return[2,_state.sent()];case 5:return e1=_state.sent(),[2,{}];case 6:return[2,(_instanceof(t,Yr),{})];case 7:return[2]}})})()},"handleRequest"),qe=a(function(n,e,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Qa.Retries;return _async_to_generator(function(){var e1;return _ts_generator(this,function(_state){switch(_state.label){case 0:return _state.trys.push([0,2,,3]),[4,Xa(eh(t,n,be(N(N({},Zm()),e),{method:"GET"})),r)];case 1:return[2,_state.sent()];case 2:return e1=_state.sent(),[2,{}];case 3:return[2]}})})()},"get"),Ae=a(function(n,e,t,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Qa.Retries;return _async_to_generator(function(){var e1;return _ts_generator(this,function(_state){switch(_state.label){case 0:return _state.trys.push([0,2,,3]),[4,Xa(eh(r,n,be(N(N({},Zm()),t),{method:"POST"}),e),o)];case 1:return[2,_state.sent()];case 2:return e1=_state.sent(),[2,{}];case 3:return[2]}})})()},"post"),_Ludex_Configs1=Ludex.Configs,_Ludex_Configs_Notification=_Ludex_Configs1.Notification,N$=_Ludex_Configs_Notification.ApiUrl,_Ludex_Utils2=Ludex.Utils,R$=_Ludex_Utils2.Object,th=a(function(n){return _async_to_generator(function(){var e;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(!R$.hasOwn(n,"playerId"))throw Error("Missing playerId");return e=n.playerId,[4,Ae("players/".concat(e),n,{},N$,10)];case 1:return _state.sent(),[2]}})})()},"updatePlayerProfileNotificationAsync");s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var _$={score:"score",settings:"settings",isFirstLogin:"isFirstLogin",gameData:"gameData",missionsData:"missionsData",notificationData:"notificationData",dailyRewardedData:"dailyRewardedData",lastCallSwitchGame:"lastCallSwitchGame",remoteConfig:"remoteConfig"},rh=_$;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var k$={ASID:null,playerId:"0000",name:"Guest",photo:"",locale:"en_US",connectedPlayers:{},data:{score:0,isFirstLogin:!0,settings:{sound:!0,music:!0,vibrate:!0,language:"en"},gameData:{coins:0,level:1},notificationData:{D1:{arrivalDate:0},D2:{arrivalDate:0},D3:{arrivalDate:0},D4:{arrivalDate:0},D5:{arrivalDate:0},D6:{arrivalDate:0},D7:{arrivalDate:0}},missionsData:{process:{}},dailyRewardedData:{logDays:[],firstReward:0,lastReward:0},lastCallSwitchGame:0}},De=k$,_Ludex_Utils3=Ludex.Utils,qt=_Ludex_Utils3.Valid,G$=De.playerId,F$=De.name,B$=De.photo,U$=De.locale,Yt="is invalid",Za=/*#__PURE__*/function(ae){function Za(){return _class_call_check(this,Za),_call_super(this,Za,arguments)}return _inherits(Za,ae),_create_class(Za,[{key:"Q",value:function Q(e){this.Z(e)}},{key:"q",value:function q(e){this.J(e)}},{key:"o",value:function o(e){this.X(e)}},{key:"validateId",value:function validateId(e){qt.isString(e)&&e||this.a("_id",Yt)}},{key:"validatePlayerId",value:function validatePlayerId(e){qt.isString(e)&&e||this.a("playerId",Yt)}},{key:"validateName",value:function validateName(e){qt.isString(e)&&e||this.a("name",Yt)}},{key:"validatePhoto",value:function validatePhoto(e){qt.isString(e)||this.a("photo",Yt)}},{key:"validateLocale",value:function validateLocale(e){qt.isString(e)&&e||this.a("locale",Yt)}},{key:"toObject",value:function toObject(){return _get(_get_prototype_of(Za.prototype),"toObject",this).call(this)}}]),Za}(ae);a(Za,"PlayerInfoDtos");var Jr=Za;Jr.addDefaults({playerId:G$,name:F$,photo:B$,locale:U$});var It=Jr,V$=new It({playerId:"10",name:"Your Friend"}).toObject(),he=V$;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var to=/*#__PURE__*/function(Error1){function to(e){var _this;return _class_call_check(this,to),_define_property(_this=_call_super(this,to,[e]),"code",void 0),_this.code="CREATE_MATCH_FAILED",_this}return _inherits(to,Error1),to}(_wrap_native_super(Error));a(to,"ACreateMatchFailed");var eo=to,oe=eo,no=/*#__PURE__*/function(oe){function no(e){var _this;return _class_call_check(this,no),(_this=_call_super(this,no,[e])).name="PlayerIdNotValid",_this.message=null!=e?e:"Player id is not valid",_this}return _inherits(no,oe),no}(oe);a(no,"PlayerIdNotValid");var ro=no,B=ro,ao=Ludex.Dtos,_Ludex_Utils4=Ludex.Utils,K$=_Ludex_Utils4.Array,H$=_Ludex_Utils4.Object,TDe=_Ludex_Utils4.Json,oo=_Ludex_Utils4.Valid,j$=Ludex.Events,_Ludex_Configs2=Ludex.Configs,W$=_Ludex_Configs2.Context,z$=_Ludex_Configs2.Player,io=function io(e){var _this=this;_class_call_check(this,io),_define_property(this,"r",void 0),_define_property(this,"initContext",a(function(){if(W$.Enabled){var _GameSDK_context_getID,_$e={contextId:null!=(_GameSDK_context_getID=GameSDK.context.getID())?_GameSDK_context_getID:"",contextType:GameSDK.context.getType(),entryPointData:GameSDK.getEntryPointData()},t=new ao.Context.Info(_$e),_t_toObject=t.toObject(),r=_t_toObject.contextId,o=_t_toObject.contextType,w=_t_toObject.entryPointData;_this.r.context.receiveContext(r,o,w)}},"initContext")),_define_property(this,"initPlayer",a(function(){return _async_to_generator(function(){var _$e,t,r,o,w,e;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(_state.trys.push([0,2,3,4]),!z$.Enabled)return[2];return _$e=this.r.player,t=this.er(),r=K$.unique(H$.vals(rh)),[4,GameSDK.player.getDataAsync(r)];case 1:return o=_state.sent(),w=new ao.Player.Data(o).toObject(),_$e.receiveData(t,w),[3,4];case 2:return e=_state.sent(),[3,4];case 3:return this.r.event.emit(j$.PLAYER_INFO_LOADED),[7];case 4:return[2]}})}).call(_this)},"initPlayer")),_define_property(this,"er",a(function(){try{var _$e=GameSDK.player.getID(),t=GameSDK.player.getName(),r=GameSDK.player.getPhoto(),o=GameSDK.getLocale();if(!oo.isString(_$e))throw new B;return oo.isString(t)||(t="You"),oo.isString(o)&&o||(o="en"),new ao.Player.Info({playerId:_$e,name:t,photo:r,locale:o}).toObject()}catch(e){return he}},"getPlayerInfo$")),this.r=e};a(io,"StateInitiator");var so=io,nh=so;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var ah=function(n){return n.IDLE="idle",n.LOADING="loading",n.FILLED="filled",n.SHOWING="showing",n}(ah||{}),Qr=ah;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var oh=function(n){return n.BANNER="banner",n.INTERSTITIAL="interstitial",n.REWARDED_VIDEO="rewarded_video",n.REWARDED_INTERSTITIAL="rewarded_interstitial",n}(oh||{}),se=oh;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var lo=/*#__PURE__*/function(Error1){function lo(e,t){var _this;return _class_call_check(this,lo),_define_property(_this=_call_super(this,lo,[t]),"code",void 0),_this.code=e,_this.message=t,_this}return _inherits(lo,Error1),lo}(_wrap_native_super(Error));a(lo,"AdError");var co=lo,Et=co;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var po=/*#__PURE__*/function(){function po(e,t){_class_call_check(this,po),_define_property(this,"type",void 0),_define_property(this,"service",void 0),_define_property(this,"placementId",void 0),_define_property(this,"it",void 0),this.type=e,this.it=Qr.IDLE,this.placementId=t}return _create_class(po,[{key:"setStatus",value:function setStatus(e){this.it!==e&&(this.it=e)}},{key:"status",get:function get(){return this.it}},{key:"a",value:function a(e){throw new Et("AD_INSTANCE_ERROR",e)}}]),po}();a(po,"BaseInstance");var uo=po,sh=uo,ho=/*#__PURE__*/function(sh){function ho(){return _class_call_check(this,ho),_call_super(this,ho,arguments)}return _inherits(ho,sh),_create_class(ho,[{key:"loadAsync",value:function loadAsync(){this.a("This method is not implemented")}},{key:"showAsync",value:function showAsync(){this.a("This method is not implemented")}},{key:"hideAsync",value:function hideAsync(){this.a("Unsupported method")}}]),ho}(sh);a(ho,"AdInstance");var mo=ho,ih=mo;Ludex.Plugins.Ads={Types:se,Status:Qr,AdError:Et,AdInstance:ih};var _Ludex_Utils5=Ludex.Utils,fo=_Ludex_Utils5.Array,ch=_Ludex_Utils5.Object,q$=_Ludex_Utils5.Function,Lt=_Ludex_Utils5.Device,go=/*#__PURE__*/function(_Ludex_Plugins_BasePlugin){function go(){var _this;return _class_call_check(this,go),_this=_call_super(this,go,arguments),_define_property(_this,"enabled",void 0),_define_property(_this,"de",void 0),_define_property(_this,"ot",void 0),_define_property(_this,"ve",void 0),_define_property(_this,"lt",void 0),_define_property(_this,"Re",{}),_define_property(_this,"he",void 0),_define_property(_this,"Me",{failedAttempts:0,lastSuccessTime:0}),_this}return _inherits(go,_Ludex_Plugins_BasePlugin),_create_class(go,[{key:"getAdsInstances",value:function getAdsInstances(){return this.Re}},{key:"getDeviceOS",value:function getDeviceOS(){return this.ot}},{key:"getDegradationTracking",value:function getDegradationTracking(){return this.Me}},{key:"getLastCallAdShownTime",value:function getLastCallAdShownTime(){return this.ve}},{key:"init",value:function init(){var _obj,e=Date.now()/1e3;this.ot=this.tr(),this.ve=(_define_property(_obj={},se.BANNER,e),_define_property(_obj,se.INTERSTITIAL,e),_define_property(_obj,se.REWARDED_VIDEO,e),_define_property(_obj,se.REWARDED_INTERSTITIAL,e),_obj),this.lt=!1,this.Ht(),this.he=Lt.getSafeAreaBottom()}},{key:"tr",value:function tr(){var e=GameSDK.getPlatform();return"IOS"===e?"ios":"WEB"===e?"desktop":"ANDROID"===e?"android":Lt.isIOS()?"ios":Lt.isAndroid()?"android":Lt.isDesktop()?"desktop":"default"}},{key:"configure",value:function configure(e){this.de=e,this.enabled=this.de.Enabled}},{key:"Pe",value:function Pe(){if(!this.enabled)throw new Et("ADS_NOT_ENABLED","Ads is't enabled")}},{key:"isAdFullSizeShowing",value:function isAdFullSizeShowing(){return this.lt}},{key:"setAdInstance",value:function setAdInstance(e,t,r,o){var _this=this;if(o===this.ot||"default"===o){var w="".concat(e,"-").concat(t,"-").concat(o);if(!this.Re[w]){var I=this.ar(e,o,t);if(I){var D=this.getAdsByType(e);if(!fo.search(D,function(S){var _S_config=S.config,E=_S_config.AdService,b=_S_config.DeviceOS;return E===I.AdService&&b!==o&&b===_this.ot}))try{var S=new r(e,t);this.Re[w]={type:e,config:I,deviceOS:o,placementId:t,interval:null,instance:S}}catch(e){return}}}}}},{key:"loadAdAsync",value:function loadAdAsync(e,t){return _async_to_generator(function(){var r,o,w,I;return _ts_generator(this,function(_state){switch(_state.label){case 0:this.Pe(),r=this.codex.event,o={type:e,placementId:t},w=this.getAd(e,t),o.placementId=w.placementId,_state.label=1;case 1:return _state.trys.push([1,3,,4]),r.emit(Ludex.Events.AD_LOADING,o),[4,w.instance.loadAsync()];case 2:return _state.sent(),r.emit(Ludex.Events.AD_LOADED,o),[3,4];case 3:throw I=_state.sent(),r.emit(Ludex.Events.AD_LOAD_FAILED,o),this.Me.failedAttempts++,I;case 4:return[2]}})}).call(this)}},{key:"showAdAsync",value:function showAdAsync(e,t){return _async_to_generator(function(){var r,o,w,I;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(this.Pe(),!this.canShowAd(e,t))return[2];r=this.codex.event,o={type:e,placementId:t},w=this.getAd(e,t),o.placementId=w.placementId,_state.label=1;case 1:return _state.trys.push([1,3,4,5]),r.emit(Ludex.Events.AD_SHOWING,o),this.lt=!0,[4,w.instance.showAsync()];case 2:return _state.sent(),r.emit(Ludex.Events.AD_SHOW,o),this.Ht(),this.ve[e]=Date.now()/1e3,[3,5];case 3:throw I=_state.sent(),r.emit(Ludex.Events.AD_SHOW_FAILED,o),this.Me.failedAttempts++,I;case 4:return r.emit(Ludex.Events.AD_CLOSED,o),this.lt=!1,[7];case 5:return[2]}})}).call(this)}},{key:"getAdStatus",value:function getAdStatus(e,t){this.Pe();try{return this.getAd(e,t).instance.status}catch(e){return!1}}},{key:"getAd",value:function getAd(e,t){var r=null;if(!(r=t?this.getAdByPlacementId(t,e):this.$a(e)))throw new Et("AD_INSTANCE_NOT_INITIATED","The instance ads not yet initiated");return r}},{key:"getAdsByType",value:function getAdsByType(e){return ch.vals(this.Re).filter(function(t){return t.type===e})}},{key:"getAdByPlacementId",value:function getAdByPlacementId(e,t){var r=ch.vals(this.Re);return fo.search(r,function(w){return w.placementId===e&&(!t||w.type===t)})||null}},{key:"$a",value:function $a(e){var t=this.getAdsByType(e);return t.length>0?t[0]:null}},{key:"canShowAd",value:function canShowAd(e,t){return this.sr(e,t)}},{key:"sr",value:function sr(e,t){try{var o,r=Date.now()/1e3;if(t)o=this.getAd(e,t);else{var L=this.$a(e);if(!L)return!1;o=L}var w=o.config,tmp=w.SecondsBetweenAds,I=void 0===tmp?0:tmp,tmp1=w.SecondsFirstTime,D=void 0===tmp1?0:tmp1,S=r-this.ve[e],E=S>I,b=S>D;return this.ve[e]>0?E:b}catch(e){return!1}}},{key:"canShowBannerAd",value:function canShowBannerAd(e){try{return!!this.getAdByPlacementId(e,se.BANNER)}catch(e){return!1}}},{key:"showBannerAdAsync",value:function showBannerAdAsync(_0){return _async_to_generator(function(e){var t,r,_tmp,_arguments=arguments;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(t=!(_arguments.length>1)||void 0===_arguments[1]||_arguments[1],this.Pe(),r=this.getAd(se.BANNER,e),!this.canShowBannerAd(r.placementId))throw Error("Banner ad can not be shown");if(this.Ga(r),!t)return[3,2];return[4,this.Ua(r)];case 1:return _tmp=_state.sent(),[3,4];case 2:return[4,this.Fa(r)];case 3:_tmp=_state.sent(),_state.label=4;case 4:return[2]}})}).apply(this,arguments)}},{key:"Fa",value:function Fa(e){return _async_to_generator(function(){var t,r,o,e1;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(t=this.codex.event,this.isAdFullSizeShowing())return[2];r={type:se.BANNER,placementId:e.placementId},_state.label=1;case 1:return _state.trys.push([1,4,,9]),[4,e.instance.loadAsync()];case 2:return _state.sent(),t.emit(Ludex.Events.AD_SHOWING,r),[4,e.instance.showAsync()];case 3:return _state.sent(),t.emit(Ludex.Events.AD_SHOW,r),this.ve[se.BANNER]=Date.now()/1e3,[3,9];case 4:if(o=_state.sent(),"AD_NOT_FILLED"===q$.toError(o).code)return[3,8];_state.label=5;case 5:return _state.trys.push([5,7,,8]),[4,e.instance.hideAsync()];case 6:return _state.sent(),[3,8];case 7:return e1=_state.sent(),[3,8];case 8:return t.emit(Ludex.Events.AD_SHOW_FAILED,r),[3,9];case 9:return[2]}})}).call(this)}},{key:"Ua",value:function Ua(e){return _async_to_generator(function(){var _this,tmp,r,o;return _ts_generator(this,function(_state){switch(_state.label){case 0:return _this=this,[4,this.Fa(e)];case 1:if(_state.sent(),(r=void 0===(tmp=e.config.SecondsReload)?0:tmp)<=0||!r)return[2];return o=a(function(){return _this.Ua(e)},"cb"),e.interval=setTimeout(o,1e3*r),[2]}})}).call(this)}},{key:"hideBannerAdAsync",value:function hideBannerAdAsync(e){return _async_to_generator(function(){var t;return _ts_generator(this,function(_state){switch(_state.label){case 0:return this.Pe(),t=this.getAd(se.BANNER,e),this.Ga(t),[4,t.instance.hideAsync()];case 1:return _state.sent(),this.codex.event.emit(Ludex.Events.AD_CLOSED,{type:se.BANNER,placementId:e}),[2]}})}).call(this)}},{key:"Ga",value:function Ga(e){try{var t=e.interval;if(!t)return;clearInterval(t)}catch(e){}}},{key:"ar",value:function ar(e,t,r){var o;switch(e){case se.BANNER:o=this.de.BannerDisplayAdOptions;break;case se.INTERSTITIAL:o=this.de.InterstitialAdOptions;break;case se.REWARDED_VIDEO:o=this.de.RewardedVideoAdOptions;break;case se.REWARDED_INTERSTITIAL:o=this.de.RewardedInterstitialAdOptions;break;default:return null}return fo.search(o,function(w){var I=w.PlacementId,D=w.DeviceOS;return I===r&&(D===t||"default"===D)})||null}},{key:"getBannerConfig",value:function getBannerConfig(e){var t=this.getAdByPlacementId(e,se.BANNER);if(!t)throw Error("Banner ad instance with placementId ".concat(e," not found"));return t.config}},{key:"getBannerHeight",value:function getBannerHeight(e,t){var r=!(arguments.length>2)||void 0===arguments[2]||arguments[2];this.Pe();var o=this.getAdByPlacementId(e,se.BANNER);if(!o)throw Error("Banner ad instance with placementId ".concat(e," not found"));var w=o.config,I=GameSDK.getBannerHeight(w);return r?(this.he<=0&&(this.he=Lt.getSafeAreaBottom()),(I+this.he)*t):I*t}},{key:"getSafeAreaBottom",value:function getSafeAreaBottom(e){return this.he<=0&&(this.he=Lt.getSafeAreaBottom()),this.he*e}},{key:"Ht",value:function Ht(){this.Me={failedAttempts:0,lastSuccessTime:Date.now()}}},{key:"isServiceDegraded",value:function isServiceDegraded(){var e=Date.now(),_this_de_DegradationTracking=this.de.DegradationTracking,t=_this_de_DegradationTracking.MaxFailedAttempts,r=_this_de_DegradationTracking.ResetTimeMinutes,_this_Me=this.Me,o=_this_Me.lastSuccessTime,w=_this_Me.failedAttempts;return e-o>60*r*1e3&&this.Ht(),w>=t}}]),go}(Ludex.Plugins.BasePlugin);a(go,"AdsPlugin");var yo=go,lh=yo,dh=lh;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var Y$={APP_LAUNCH:"app_launch",APP_INITIALIZED:"app_initialized",ENGINE_READY:"engine_ready",LOAD_START:"load_start",LOAD_COMPLETE:"load_complete",APP_READY:"app_ready",PAGE_VIEW:"page_view",SCREEN_OPEN:"screen_open",BUTTON_CLICK:"button_click",TUTORIAL_BEGIN:"tutorial_begin",TUTORIAL_STEP:"tutorial_step",TUTORIAL_COMPLETE:"tutorial_complete",MATCH_START:"match_start",MATCH_END:"match_end",LEVEL_START:"level_start",LEVEL_RESCUE:"level_rescue",LEVEL_END:"level_end",USE_ITEM:"use_item",EARN_ITEM:"earn_item",SHARE:"share",INVITE:"invite",MESSAGE:"message",SHORTCUT_CREATE:"shortcut_create",SHORTCUT_CREATE_POPUP:"shortcut_create_popup",BOT_SUBSCRIBE:"bot_subscribe",BOT_SUBSCRIBE_POPUP:"bot_subscribe_popup",AD_INIT:"ad_init",AD_LOAD:"ad_load",AD_LOAD_FAILED:"ad_load_failed",AD_SHOWING:"ad_showing",AD_SHOW:"ad_show",AD_SHOW_FAILED:"ad_show_failed",AD_REWARD:"ad_reward",NEW_USER:"new_user",RETURNING_USER:"returning_user",JOIN_GROUP:"join_group",TOURNAMENT_START:"tournament_start",TOURNAMENT_SHARE:"tournament_share",TOURNAMENT_CREATE:"tournament_create",TOURNAMENT_POST_SCORE:"tournament_post_score",SWITCH_GAME_POPUP:"switch_game_popup",SWITCH_GAME:"switch_game"},T=Y$;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var xo=/*#__PURE__*/function(){function xo(){_class_call_check(this,xo),_define_property(this,"T",[]),_define_property(this,"$e",[]),_define_property(this,"Kt",[]),_define_property(this,"Vt",!1),_define_property(this,"Wt",!1),_define_property(this,"ka",[]),_define_property(this,"Ge",!1),_define_property(this,"ja",!1)}return _create_class(xo,[{key:"addEvent",value:function addEvent(e,t){this.Vt||this.Wt?this.rr("Skip event:",e):(this.T.push(e),this.nr(e))}},{key:"nr",value:function nr(e){var t=this.ir();if(t.hasFailed){this.Wt=!0,this.or();return}t.hasWarnings&&this.lr(t.warnings),this.cr(e)}},{key:"ir",value:function ir(){for(var e={hasFailed:!1,hasWarnings:!1,warnings:[]},t=this.dr().filter(function(o){return o.i}),o=0;o<t.length;o++){var w=t[o],I=this.T.indexOf(w.name);if(-1===I)return this.$e=[w.name],e.hasFailed=!0,e;if(o>0){var D=t[o-1];if(this.T.indexOf(D.name)>I)return this.$e=[D.name],e.hasFailed=!0,e}}var r=this.hr();return r.length>0&&(e.hasWarnings=!0,e.warnings=r,this.Kt=r),e}},{key:"dr",value:function dr(){var e=this.T[this.T.length-1],t=this.M.findIndex(function(r){return r.name===e});return this.M.slice(0,t+1)}},{key:"hr",value:function hr(){var _this=this,e=[];return this.T.forEach(function(t,r){var _o_f,o=_this.M.find(function(I){return I.name===t});if(null==o||null==(_o_f=o.f)?void 0:_o_f.length){var w=o.f.find(function(I){return!_this.T.includes(I)||_this.T.indexOf(I)>r});w&&!_this.ka.includes(t)&&(e.push({event:t,missingDependency:w}),_this.ka.push(t))}}),e}},{key:"cr",value:function cr(e){var _this=this;e===this.M[this.M.length-1].name&&this.M.filter(function(r){return r.i}).every(function(r){return _this.T.includes(r.name)})&&(this.Vt=!0,this.ur())}},{key:"lr",value:function lr(e){var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=e[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0)_step.value}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}},{key:"or",value:function or(){var e=this.constructor.name;if(this.$e.length,this.ja)throw Error("[".concat(e,"] Funnel is required to be completed ! (missing: ").concat(this.$e.join(", "),")"))}},{key:"ur",value:function ur(){this.constructor.name,this.Kt.length}},{key:"rr",value:function rr(){for(var _len=arguments.length,e=Array(_len),_key=0;_key<_len;_key++)e[_key]=arguments[_key];this.Ge}},{key:"isFunnelCompleted",value:function isFunnelCompleted(){return this.Vt}},{key:"isFunnelFailed",value:function isFunnelFailed(){return this.Wt}},{key:"getEventHistory",value:function getEventHistory(){return _to_consumable_array(this.T)}},{key:"getMissingEvents",value:function getMissingEvents(){return _to_consumable_array(this.$e)}},{key:"getOutOfOrderEvents",value:function getOutOfOrderEvents(){return _to_consumable_array(this.Kt)}}]),xo}();a(xo,"BaseFunnel");var Po=xo,Be=Po,$o=/*#__PURE__*/function(Be){function $o(){var _this;return _class_call_check(this,$o),_this=_call_super(this,$o,arguments),_define_property(_this,"Ge",!1),_define_property(_this,"M",[{name:T.AD_INIT,i:!0,e:{service:"adsense"},l:"Init adsense ad"},{name:T.AD_LOAD_FAILED,i:!1,e:{service:_this.service},l:"Platform ad load failed (trigger for adsense)"},{name:T.AD_LOAD,i:!0,e:{service:"adsense"},l:"Start loading adsense ad"},{name:T.AD_LOAD_FAILED,i:!1,f:[T.AD_LOAD],e:{service:"adsense"},l:"Adsense ad load failed"},{name:T.AD_SHOWING,i:!0,f:[T.AD_LOAD],e:{service:"adsense"},l:"Adsense ad is showing"},{name:T.AD_SHOW,i:!1,f:[T.AD_SHOWING],e:{service:"adsense"},l:"Adsense ad shown successfully"},{name:T.AD_SHOW_FAILED,i:!1,f:[T.AD_SHOWING],e:{service:"adsense"},l:"Adsense ad show failed"},{name:T.AD_LOAD,i:!1,e:{service:"adsense"},l:"Preload adsense ad"}]),_this}return _inherits($o,Be),_create_class($o,[{key:"service",get:function get(){var _GameSDK,_GameSDK_getSDKName;return null!=(_GameSDK_getSDKName=null==(_GameSDK=GameSDK)?void 0:_GameSDK.getSDKName())?_GameSDK_getSDKName:"Ludex"}},{key:"addEvent",value:function addEvent(e,t){var r=(null!=t?t:{}).service;r&&("adsense"===r||e===T.AD_LOAD_FAILED&&"platform"===r)&&_get(_get_prototype_of($o.prototype),"addEvent",this).call(this,e,t)}}]),$o}(Be);a($o,"AdsenseFunnel");var wo=$o,uh=wo;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var vo=/*#__PURE__*/function(Be){function vo(){var _this;return _class_call_check(this,vo),_this=_call_super(this,vo,arguments),_define_property(_this,"Ge",!1),_define_property(_this,"ja",!1),_define_property(_this,"M",[{name:T.APP_LAUNCH,i:!0,l:"Application launched"},{name:T.APP_INITIALIZED,i:!0,f:[T.APP_LAUNCH],l:"Application initialized"},{name:T.ENGINE_READY,i:!0,f:[T.APP_INITIALIZED],l:"Game engine initialized"},{name:T.LOAD_START,i:!0,f:[T.ENGINE_READY],l:"Start loading game assets"},{name:T.LOAD_COMPLETE,i:!0,f:[T.LOAD_START],l:"Game assets loaded completely"},{name:T.APP_READY,i:!0,f:[T.LOAD_COMPLETE],l:"Game is ready to play"}]),_this}return _inherits(vo,Be),vo}(Be);a(vo,"LudexFunnel");var Ao=vo,ph=Ao;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var bo=/*#__PURE__*/function(Be){function bo(){var _this;return _class_call_check(this,bo),_this=_call_super(this,bo,arguments),_define_property(_this,"Ge",!1),_define_property(_this,"M",[{name:T.AD_INIT,i:!0,e:{service:_this.service},l:"Init platform ad"},{name:T.AD_LOAD,i:!0,e:{service:_this.service},l:"Start loading platform ad"},{name:T.AD_LOAD_FAILED,i:!1,f:[T.AD_LOAD],e:{service:_this.service},l:"Platform ad load failed"},{name:T.AD_SHOWING,i:!0,f:[T.AD_LOAD],e:{service:_this.service},l:"Platform ad is showing"},{name:T.AD_SHOW,i:!1,f:[T.AD_SHOWING],e:{service:_this.service},l:"Platform ad shown successfully"},{name:T.AD_SHOW_FAILED,i:!1,f:[T.AD_SHOWING],e:{service:_this.service},l:"Platform ad show failed"},{name:T.AD_LOAD,i:!1,e:{service:_this.service},l:"Preload platform ad"}]),_this}return _inherits(bo,Be),_create_class(bo,[{key:"service",get:function get(){return"platform"}},{key:"addEvent",value:function addEvent(e,t){(null==t?void 0:t.service)===this.service&&_get(_get_prototype_of(bo.prototype),"addEvent",this).call(this,e,t)}}]),bo}(Be);a(bo,"PlatformAdsFunnel");var So=bo,mh=So;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var _Ludex_Match=Ludex.Match,Ct=_Ludex_Match.Modes,Io=/*#__PURE__*/function(Be){function Io(){var _this;return _class_call_check(this,Io),_this=_call_super(this,Io,arguments),_define_property(_this,"Ge",!1),_define_property(_this,"M",[{name:T.MATCH_START,i:!0,e:{game_mode:Ct.SINGLE},l:"Match started"},{name:T.LEVEL_START,i:!0,f:[T.MATCH_START],e:{game_mode:Ct.SINGLE},l:"Level started"},{name:T.LEVEL_RESCUE,i:!1,f:[T.LEVEL_START],e:{game_mode:Ct.SINGLE},l:"User was rescued"},{name:T.LEVEL_END,i:!0,f:[T.LEVEL_START],e:{game_mode:Ct.SINGLE},l:"Level ended"},{name:T.MATCH_END,i:!0,f:[T.LEVEL_START],e:{game_mode:Ct.SINGLE},l:"Match ended"}]),_this}return _inherits(Io,Be),_create_class(Io,[{key:"addEvent",value:function addEvent(e,t){var r=(null!=t?t:{}).game_mode;r&&r.toLowerCase()===Ct.SINGLE&&_get(_get_prototype_of(Io.prototype),"addEvent",this).call(this,e,t)}}]),Io}(Be);a(Io,"SingleMatchFunnel");var Do=Io,hh=Do;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var _Ludex_Utils6=Ludex.Utils,ut=_Ludex_Utils6.String,J$=_Ludex_Utils6.Valid,Lo=/*#__PURE__*/function(){function Lo(e,t,r){_class_call_check(this,Lo),_define_property(this,"codex",void 0),_define_property(this,"name",void 0),_define_property(this,"pr",void 0),_define_property(this,"yr",void 0),_define_property(this,"Ba",void 0),_define_property(this,"mr",void 0),this.codex=e,this.name=t,this.yr=r,this.pr=r.color||"#FFF",this.Ba=r.log,this.mr="/"}return _create_class(Lo,[{key:"event",value:function event(e,t){this.fr("event",{name:e,payload:t});var r=this.gr(e);this.wr(r,t)}},{key:"fr",value:function fr(e,t){this.Ba}},{key:"pageview",value:function pageview(e){var t=this.xr(e);t=this.Ar(t),document.title=t,this.event(T.PAGE_VIEW,{page_path:e,page_title:t})}},{key:"levelStart",value:function levelStart(e,t,r){this.event(T.LEVEL_START,{level:e,score:t,level_name:this.getLevelName(e),game_mode:r?ut.toUpperCamelCase(r):void 0})}},{key:"levelFail",value:function levelFail(e,t,r){this.event(T.LEVEL_END,{level:e,score:t,success:!1,level_name:this.getLevelName(e),game_mode:r?ut.toUpperCamelCase(r):void 0})}},{key:"levelRescue",value:function levelRescue(e,t,r){this.event(T.LEVEL_RESCUE,{level:e,score:t,level_name:this.getLevelName(e),game_mode:r?ut.toUpperCamelCase(r):void 0})}},{key:"levelComplete",value:function levelComplete(e,t,r){this.event(T.LEVEL_END,{level:e,score:t,success:!0,level_name:this.getLevelName(e),game_mode:r?ut.toUpperCamelCase(r):void 0})}},{key:"initAdEvent",value:function initAdEvent(e){var t=e.adService,r=e.state;this.event(T.AD_INIT,{ad_service:t,state:r})}},{key:"zt",value:function zt(e){var t=e.type,r=e.placement,o=e.service;this.event(T.AD_LOAD,{ad_type:t,screen_name:r,ad_service:o})}},{key:"Yt",value:function Yt(e){var t=e.type,r=e.placement,o=e.service;this.event(T.AD_SHOW,{ad_type:t,screen_name:r,ad_service:o})}},{key:"loadInterstitialAd",value:function loadInterstitialAd(e){var t=e.placement,r=e.service;this.zt({type:"interstitial",placement:t,service:r})}},{key:"showInterstitialAd",value:function showInterstitialAd(e){var t=e.placement,r=e.service;this.Yt({type:"interstitial",placement:t,service:r})}},{key:"loadRewardedVideoAd",value:function loadRewardedVideoAd(e){var t=e.placement,r=e.service;this.zt({type:"rewarded_video",placement:t,service:r})}},{key:"showRewardedVideoAd",value:function showRewardedVideoAd(e){var t=e.placement,r=e.service;this.Yt({type:"rewarded_video",placement:t,service:r})}},{key:"receiveVideoReward",value:function receiveVideoReward(e){var t=e.placement,r=e.service;this.event(T.AD_REWARD,{screen_name:t,ad_service:r})}},{key:"loadRewardedInterstitialAd",value:function loadRewardedInterstitialAd(e){var t=e.placement,r=e.service;this.zt({type:"rewarded_interstitial",placement:t,service:r})}},{key:"showRewardedInterstitialAd",value:function showRewardedInterstitialAd(e){var t=e.placement,r=e.service;this.Yt({type:"rewarded_interstitial",placement:t,service:r})}},{key:"receiveInterstitialReward",value:function receiveInterstitialReward(e){var t=e.placement,r=e.service;this.event(T.AD_REWARD,{screen_name:t,ad_service:r})}},{key:"loadAdFail",value:function loadAdFail(e){var t=e.type,r=e.placement,o=e.service;this.event(T.AD_LOAD_FAILED,{ad_type:t,screen_name:r,ad_service:o})}},{key:"showAdFail",value:function showAdFail(e){var t=e.type,r=e.placement,o=e.service;this.event(T.AD_SHOW_FAILED,{ad_type:t,screen_name:r,ad_service:o})}},{key:"showingAd",value:function showingAd(e){var t=e.type,r=e.placement,o=e.service;this.event(T.AD_SHOWING,{ad_type:t,screen_name:r,ad_service:o})}},{key:"gr",value:function gr(e){return e.toLowerCase().replace(/:/g,"_")}},{key:"getLevelName",value:function getLevelName(e){return"Level ".concat(ut.padStart(e.toString(),5,"0"))}},{key:"xr",value:function xr(e){var t=e.split("/").pop();if(!J$.isString(t))return e;var r=t.replace(/([-_\s.])/g," $1");return ut.toUpperCamelCase(r)}},{key:"Ar",value:function Ar(e){var t=this.codex.match;if(!t)return e;var o=t.getMatchState().mode;return o||(o="Normal"),"".concat(ut.toUpperCamelCase(o),"::").concat(e)}}]),Lo}();a(Lo,"BaseAnalytics");var Eo=Lo,fh=Eo;Ludex.Plugins.Analytics={Events:T,BaseFunnel:Be,BaseAnalytics:fh};var To=/*#__PURE__*/function(_Ludex_Plugins_BasePlugin){function To(e){var _this;return _class_call_check(this,To),_define_property(_this=_call_super(this,To,[e]),"h",[]),_define_property(_this,"v","unknown"),_define_property(_this,"Ha",[]),_define_property(_this,"pageview",a(function(e){if(_this.g()){_this.v=e;var t=_this.Pr(e),_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=_this.h[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0)_step.value.pageview(t)}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}_this.w(T.PAGE_VIEW)}},"pageview")),_this.vr(),_this}return _inherits(To,_Ludex_Plugins_BasePlugin),_create_class(To,[{key:"E",value:function E(e,t){return Ludex.Utils.Object.merge(e,t)}},{key:"add",value:function add(e){var t=this.h.findIndex(function(r){return r.name===e.name});-1!==t?this.h[t]=e:this.h.push(e)}},{key:"g",value:function g(){return this.h.length>=1}},{key:"vr",value:function vr(){this.addFunnel(new ph),this.addFunnel(new uh),this.addFunnel(new mh),this.addFunnel(new hh)}},{key:"addFunnel",value:function addFunnel(e){this.Ha.push(e)}},{key:"w",value:function w(e,t){var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=this.Ha[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0)_step.value.addEvent(e,t)}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}},{key:"event",value:function event(e,t){if(this.g()){var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=this.h[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0)_step.value.event(e,t)}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}this.w(e,t)}}},{key:"levelStart",value:function levelStart(e,t,r){if(this.g()){var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=this.h[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0)_step.value.levelStart(e,t,r)}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}this.w(T.LEVEL_START,{score:t,game_mode:r})}}},{key:"levelRescue",value:function levelRescue(e,t,r){if(this.g()){var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=this.h[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0)_step.value.levelRescue(e,t,r)}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}this.w(T.LEVEL_RESCUE,{score:t,game_mode:r})}}},{key:"levelFail",value:function levelFail(e,t,r){if(this.g()){var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=this.h[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0)_step.value.levelFail(e,t,r)}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}this.w(T.LEVEL_END,{score:t,game_mode:r})}}},{key:"levelComplete",value:function levelComplete(e,t,r){if(this.g()){var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=this.h[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0)_step.value.levelComplete(e,t,r)}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}this.w(T.LEVEL_END,{score:t,game_mode:r})}}},{key:"initAdEvent",value:function initAdEvent(e){return _async_to_generator(function(){var _this,_iteratorNormalCompletion,_didIteratorError,_iteratorError,_iterator,_step;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(_this=this,!this.g())return[3,2];return[4,new Promise(function(t){var r=Ludex.Events;_this.codex.event.catchUp(r.GAME_READY,t)})];case 1:_state.sent(),_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(_iterator=this.h[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0)_step.value.initAdEvent(e)}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}_state.label=2;case 2:return[2]}})}).call(this)}},{key:"loadInterstitialAd",value:function loadInterstitialAd(e){if(this.g()){var t=this.E(e,{placement:this.v}),_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=this.h[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0)_step.value.loadInterstitialAd(t)}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}this.w(T.AD_LOAD,t)}}},{key:"showInterstitialAd",value:function showInterstitialAd(e){if(this.g()){var t=this.E(e,{placement:this.v}),_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=this.h[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0)_step.value.showInterstitialAd(t)}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}this.w(T.AD_SHOW,t)}}},{key:"loadRewardedVideoAd",value:function loadRewardedVideoAd(e){if(this.g()){var t=this.E(e,{placement:this.v}),_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=this.h[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0)_step.value.loadRewardedVideoAd(t)}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}this.w(T.AD_LOAD,t)}}},{key:"showRewardedVideoAd",value:function showRewardedVideoAd(e){if(this.g()){var t=this.E(e,{placement:this.v}),_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=this.h[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0)_step.value.showRewardedVideoAd(t)}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}this.w(T.AD_SHOW,t)}}},{key:"receiveVideoReward",value:function receiveVideoReward(e){if(this.g()){var t=this.E(e,{placement:this.v}),_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=this.h[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0)_step.value.receiveVideoReward(t)}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}this.w(T.AD_REWARD,t)}}},{key:"loadRewardedInterstitialAd",value:function loadRewardedInterstitialAd(e){if(this.g()){var t=this.E(e,{placement:this.v}),_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=this.h[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0)_step.value.loadRewardedInterstitialAd(t)}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}this.w(T.AD_LOAD,t)}}},{key:"showRewardedInterstitialAd",value:function showRewardedInterstitialAd(e){if(this.g()){var t=this.E(e,{placement:this.v}),_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=this.h[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0)_step.value.showRewardedInterstitialAd(t)}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}this.w(T.AD_SHOW,t)}}},{key:"receiveInterstitialReward",value:function receiveInterstitialReward(e){if(this.g()){var t=this.E(e,{placement:this.v}),_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=this.h[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0)_step.value.receiveInterstitialReward(t)}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}this.w(T.AD_REWARD,t)}}},{key:"loadAdFail",value:function loadAdFail(e){if(this.g()){var t=this.E(e,{placement:this.v}),_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=this.h[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0)_step.value.loadAdFail(t)}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}this.w(T.AD_LOAD_FAILED,t)}}},{key:"showAdFail",value:function showAdFail(e){if(this.g()){var t=this.E(e,{placement:this.v}),_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=this.h[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0)_step.value.showAdFail(t)}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}this.w(T.AD_SHOW_FAILED,t)}}},{key:"showingAd",value:function showingAd(e){if(this.g()){var t=this.E(e,{placement:this.v}),_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=this.h[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0)_step.value.showingAd(t)}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}this.w(T.AD_SHOWING,t)}}},{key:"Pr",value:function Pr(e){var t=e;if(t.indexOf("_")>-1)return t.replace(/_/g,"-").toLowerCase();for(var r=t.length-1,o="";r>0;){var w1=isNaN(parseInt(o=t.charAt(r),10)),I=o===o.toUpperCase();w1&&I&&(t="".concat(t.slice(0,r),"-").concat(t.slice(r))),r--}return t.toLowerCase()}}]),To}(Ludex.Plugins.BasePlugin);a(To,"AnalyticsPlugin");var Co=To,yh=Co,gh=yh;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var Oo=/*#__PURE__*/function(){function Oo(e){_class_call_check(this,Oo),_define_property(this,"Ka",void 0),this.Ka=e}return _create_class(Oo,[{key:"getKey",value:function getKey(){return this.Ka}}]),Oo}();a(Oo,"BaseAudioPlayer");var Mo=Oo,Ph=Mo;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var _Ludex_Utils7=Ludex.Utils,xh=_Ludex_Utils7.Decorator,Xr=/*#__PURE__*/function(){function Xr(e){_class_call_check(this,Xr),_define_property(this,"ne",void 0),_define_property(this,"Ue",void 0),_define_property(this,"Fe",void 0),_define_property(this,"Ie",void 0),this.ne=e,this.Fe=1,this.Ue=!1,this.Ie={}}return _create_class(Xr,[{key:"getId",value:function getId(){return this.ne}},{key:"getAudioClip",value:function getAudioClip(e){return this.Ie[e]?this.Ie[e]:null}},{key:"setAudioClip",value:function setAudioClip(e,t){this.Ie[e]=N(N({},this.Ie[e]),t)}},{key:"play",value:function play(e,t){return _async_to_generator(function(){var r,o;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(!(r=this.getAudioClip(e)))return[3,1];return o=r.audioPlayer,this.Va(o,t),[3,3];case 1:return[4,this.loadAndPlay(e,t)];case 2:_state.sent(),_state.label=3;case 3:return[2]}})}).call(this)}},{key:"loadAndPlay",value:function loadAndPlay(e,t){return _async_to_generator(function(){var r,tmp,o;return _ts_generator(this,function(_state){switch(_state.label){case 0:return[4,this.onLoadAudio(e,t)];case 1:if(!(r=_state.sent()))return[2];return o=void 0===(tmp=(t||{}).volume)?1:tmp,this.setAudioClip(e,{volume:o,audioPlayer:r}),this.Va(r,t),[2]}})}).call(this)}},{key:"Va",value:function Va(e,t){if(t){var tmp=t.volume,r=void 0===tmp?1:tmp;t.volume=this.Fe*r}e.play(t)}},{key:"pause",value:function pause(e){var t=this.getAudioClip(e);return!!t&&(t.audioPlayer.pause(),!0)}},{key:"resume",value:function resume(e){var t=this.getAudioClip(e);return!!t&&(t.audioPlayer.resume(),!0)}},{key:"stop",value:function stop(e){var t=this.getAudioClip(e);return!!t&&(t.audioPlayer.stop(),!0)}},{key:"stopAll",value:function stopAll(){this.ct("stop")}},{key:"muteAll",value:function muteAll(){this.Ue||(this.Ue=!0,this.ct("mute"))}},{key:"unmuteAll",value:function unmuteAll(){this.Ue&&(this.Ue=!1,this.ct("unmute"))}},{key:"setVolume",value:function setVolume(e){this.Fe=e,this.ct("setVolume")}},{key:"getVolume",value:function getVolume(){return this.Fe}},{key:"Ir",value:function Ir(e,t){try{var r=e.audioPlayer,tmp=e.volume,o=void 0===tmp?1:tmp;switch(t){case"play":r.play();break;case"pause":r.pause();break;case"resume":r.resume();break;case"stop":r.stop();break;case"mute":r.setVolume(0);break;case"unmute":case"setVolume":r.setVolume(this.Fe*o);break;default:throw Error("Unsupported function: ".concat(t))}}catch(e){}}},{key:"ct",value:function ct(e){var r=Ludex.Utils.Object.vals(this.Ie),_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=r[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var o=_step.value;this.Ir(o,e)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}}]),Xr}();a(Xr,"BaseChannelManager"),pe([xh.tryCatch(),xh.validateParams("string")],Xr.prototype,"loadAndPlay",1);var No=Xr,wh=No;Ludex.Plugins.Audio={BaseAudioPlayer:Ph,BaseChannelManager:wh};var _Ludex_Utils8=Ludex.Utils,$h=_Ludex_Utils8.Decorator,Zr=/*#__PURE__*/function(_Ludex_Plugins_BasePlugin){function Zr(){var _this;return _class_call_check(this,Zr),_this=_call_super(this,Zr,arguments),_define_property(_this,"qt",void 0),_define_property(_this,"Qt",{}),_this}return _inherits(Zr,_Ludex_Plugins_BasePlugin),_create_class(Zr,[{key:"addChannel",value:function addChannel(e){var t=e.getId();this.Qt[t]=e,this.qt||(this.qt=t)}},{key:"$",value:function $(e){if(void 0===e)return this.Qt[this.qt];var t=this.Qt[e];if(!t)throw Error("Channel ".concat(e," not found"));return t}},{key:"play",value:function play(e,t,r){return _async_to_generator(function(){return _ts_generator(this,function(_state){switch(_state.label){case 0:return[4,this.$(r).play(e,t)];case 1:return _state.sent(),[2]}})}).call(this)}},{key:"pause",value:function pause(e,t){try{this.$(t).pause(e)}catch(e){}}},{key:"resume",value:function resume(e,t){try{this.$(t).resume(e)}catch(e){}}},{key:"stop",value:function stop(e,t){try{this.$(t).stop(e)}catch(e){}}},{key:"stopAll",value:function stopAll(e){try{this.$(e).stopAll()}catch(e){}}},{key:"mute",value:function mute(e){try{this.$(e).muteAll()}catch(e){}}},{key:"unmute",value:function unmute(e){try{this.$(e).unmuteAll()}catch(e){}}},{key:"setVolume",value:function setVolume(e,t){try{this.$(t).setVolume(e)}catch(e){}}},{key:"getVolume",value:function getVolume(e){try{return this.$(e).getVolume()}catch(e){return -1}}}]),Zr}(Ludex.Plugins.BasePlugin);a(Zr,"AudioPlugin"),pe([$h.tryCatch(),$h.validateParams("string")],Zr.prototype,"play",1);var Ro=Zr,Ah=Ro,vh=Ah;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var Q$={token:"",isRequesting:!1},Sh=Q$,_Ludex_Utils9=Ludex.Utils,X$=_Ludex_Utils9.Object,ko=/*#__PURE__*/function(_Ludex_Plugins_BasePlugin){function ko(){return _class_call_check(this,ko),_call_super(this,ko,arguments)}return _inherits(ko,_Ludex_Plugins_BasePlugin),_create_class(ko,[{key:"init",value:function init(){this.codex.storage.addStorage("auth",Sh)}},{key:"requestToken",value:function requestToken(){return _async_to_generator(function(){var e,_$t,t;return _ts_generator(this,function(_state){switch(_state.label){case 0:e=this.codex.storage,_state.label=1;case 1:if(_state.trys.push([1,3,4,5]),e.getStorageData("auth","isRequesting")||""!==e.getStorageData("auth","token"))return[2];return e.setStorageData("auth","isRequesting",!0),[4,GameSDK.player.getSignedPlayerInfoAsync()];case 2:return _$t=_state.sent().getSignature(),e.setStorageData("auth","token",_$t),[3,5];case 3:if(t=_state.sent(),X$.hasOwn(t,"code")&&"PENDING_REQUEST"===t.code)return[2];return e.setStorageData("auth","token",""),[3,5];case 4:return e.setStorageData("auth","isRequesting",!1),[7];case 5:return[2]}})}).call(this)}},{key:"getToken",value:function getToken(){var _e_getStorageData;return null!=(_e_getStorageData=this.codex.storage.getStorageData("auth","token"))?_e_getStorageData:""}}]),ko}(Ludex.Plugins.BasePlugin);a(ko,"AuthPlugin");var _o=ko,bh=_o,Dh=bh;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var Ih=function(n){return n.SOLO="solo",n.TOURNAMENT="tournament",n.SHARE_INVITE="share_invite",n.MATCHING_GROUP="matching_group_match",n.CHALLENGE_FRIEND="challenge_friend_match",n}(Ih||{}),le=Ih;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var Z$=$r,Ye=Z$,eA=Ludex.Configs,_Ludex_Utils10=Ludex.Utils,tA=_Ludex_Utils10.Array,rA=_Ludex_Utils10.Valid,nA=_Ludex_Utils10.Browser,Fo=/*#__PURE__*/function(){function Fo(e){_class_call_check(this,Fo),_define_property(this,"r",void 0),this.r=e}return _create_class(Fo,[{key:"Dr",value:function Dr(e){return["THREAD","POST","SOLO","GROUP"].indexOf(e)>=0}},{key:"Sr",value:function Sr(e){return rA.isObject(e)}},{key:"Er",value:function Er(e){return tA.has(["facebook~game_list~tournaments","fb_feed_tournament_unit","messenger~bot_thread~tournaments"],e)}},{key:"receiveContext",value:function receiveContext(e,t,r){var o=this.r.storage;o.setStorageData("context","contextId",e),this.Sr(r)&&o.setStorageData("context","entryPointData",r),this.Dr(t)&&o.setStorageData("context","contextType",t)}},{key:"getContextId",value:function getContextId(){var _e_getStorageData;return null!=(_e_getStorageData=this.r.storage.getStorageData("context","contextId"))?_e_getStorageData:""}},{key:"getContextType",value:function getContextType(){var _e_getStorageData;return null!=(_e_getStorageData=this.r.storage.getStorageData("context","contextType"))?_e_getStorageData:"SOLO"}},{key:"getContextData",value:function getContextData(){var _e_getStorageData;return null!=(_e_getStorageData=this.r.storage.getStorageData("context","entryPointData"))?_e_getStorageData:{}}},{key:"getSessionContextType",value:function getSessionContextType(){var _e_getStorageData;return null!=(_e_getStorageData=this.r.storage.getStorageData("context","sessionContextType"))?_e_getStorageData:"unknown"}},{key:"detectContextSessionType",value:function detectContextSessionType(){return _async_to_generator(function(){var e,t,r,o,w,I,D,S,E,_tmp,_tmp1;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(e=this.r.storage,r=(null!=(t=this.getContextData())?t:{}).type,o=le.SOLO,w=le.TOURNAMENT,I=le.MATCHING_GROUP,D=le.SHARE_INVITE,S=le.CHALLENGE_FRIEND,E=o,r===w&&(E=w),r===I&&(E=I),(r===S||r===D)&&(E=S),!(_tmp=E===o))return[3,4];if(!eA.Core.FastCheckTournamentContext)return[3,1];return _tmp1=E=this.br()||E,[3,3];case 1:return[4,this.Lr()];case 2:_tmp1=E=_state.sent()||E,_state.label=3;case 3:_tmp=_tmp1,_state.label=4;case 4:return e.setStorageData("context","sessionContextType",E),[2]}})}).call(this)}},{key:"br",value:function br(){var e=nA.getQueryParams().entry_point;return"string"==typeof e&&!!this.Er(e)&&le.TOURNAMENT}},{key:"Lr",value:function Lr(){return _async_to_generator(function(){var e,t,e1;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(e=this.r.storage,!("getTournamentAsync"in GameSDK))return[2,!1];_state.label=1;case 1:return _state.trys.push([1,3,,4]),[4,GameSDK.getTournamentAsync()];case 2:return t=_state.sent(),[2,(e.setStorageData("context","contextId",t.getContextID()),t.getEndTime()>Date.now()/1e3&&le.TOURNAMENT)];case 3:return e1=_state.sent(),[2,!1];case 4:return[2]}})}).call(this)}},{key:"detectContextGameMode",value:function detectContextGameMode(){var _this_r=this.r,e=_this_r.player,t=_this_r.storage,r=this.getContextData(),o=this.getSessionContextType(),w=e.getPlayerId(),_ref=null!=r?r:{},I=_ref.matchId,D=_ref.playerId,tmp=_ref.opponentId,S=void 0===tmp?he.playerId:tmp,E=w===D,b=S===he.playerId||[S,D].indexOf(w)>=0,L=le.TOURNAMENT,C=le.MATCHING_GROUP,R=le.SHARE_INVITE,$=le.CHALLENGE_FRIEND,z=Ye.SINGLE;o===L&&(z=Ye.TOURNAMENT),o!==R||E||(z=Ye.CHALLENGE_FRIEND),o===$&&I&&b&&(z=Ye.CHALLENGE_FRIEND),o===C&&(z=Ye.MATCHING_GROUP),t.setStorageData("context","contextGameMode",z)}}]),Fo}();a(Fo,"Context");var Go=Fo,Eh=Go;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var Lh=function(n){return n.StartID="__start__",n}(Lh||{}),en=Lh;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var Uo=/*#__PURE__*/function(Error1){function Uo(e){return _class_call_check(this,Uo),_call_super(this,Uo,["Duplicate step id: ".concat(e)])}return _inherits(Uo,Error1),Uo}(_wrap_native_super(Error));a(Uo,"StepIdDuplicate");var Bo=Uo,Ch=Bo;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var Ko=/*#__PURE__*/function(Error1){function Ko(e){return _class_call_check(this,Ko),_call_super(this,Ko,["Invalid step id: ".concat(e)])}return _inherits(Ko,Error1),Ko}(_wrap_native_super(Error));a(Ko,"StepIdInvalid");var Vo=Ko,Th=Vo;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var jo=/*#__PURE__*/function(Error1){function jo(e){return _class_call_check(this,jo),_call_super(this,jo,["Step not found: ".concat(e)])}return _inherits(jo,Error1),jo}(_wrap_native_super(Error));a(jo,"StepNotFound");var Ho=jo,Mh=Ho,zo=/*#__PURE__*/function(){function zo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];_class_call_check(this,zo),_define_property(this,"b",void 0),this.b=[];var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=e[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var t=_step.value;this.addAfter(en.StartID,t)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}return _create_class(zo,[{key:"addBefore",value:function addBefore(e,t){if(this.dt(t.id),this.Wa(t.id),e===en.StartID)return void this.b.unshift(t);var r=this.ht(e);this.b.splice(r,0,t)}},{key:"addAfter",value:function addAfter(e,t){if(this.dt(t.id),this.Wa(t.id),e===en.StartID)return void this.b.push(t);var r=this.ht(e);this.b.splice(r+1,0,t)}},{key:"replace",value:function replace(e,t){this.dt(e);var r=this.ht(e),o=this.b[r];this.b[r]=N(N({},o),t)}},{key:"remove",value:function remove(e){var t=this.ht(e);this.b.splice(t,1)}},{key:"runAsync",value:function runAsync(e){return _async_to_generator(function(){var t,r,_iteratorNormalCompletion,_didIteratorError,_iteratorError,_iterator,_step,o,w,_ref,I,D,err;return _ts_generator(this,function(_state){switch(_state.label){case 0:t=performance.now(),r=[],_state.label=1;case 1:_state.trys.push([1,,10,11]),_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0,_state.label=2;case 2:_state.trys.push([2,7,8,9]),_iterator=this.b[Symbol.iterator](),_state.label=3;case 3:if(_iteratorNormalCompletion=(_step=_iterator.next()).done)return[3,6];return o=_step.value,w=performance.now(),[4,this.Or(o,e)];case 4:if(I=(_ref=_state.sent()).shouldContinue,D=_ref.targetScene,I&&r.push({stepId:o.id,targetScene:D,ms:this.ke(w)}),!I)return[2,!0];_state.label=5;case 5:return _iteratorNormalCompletion=!0,[3,3];case 6:return[3,9];case 7:return err=_state.sent(),_didIteratorError=!0,_iteratorError=err,[3,9];case 8:try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}return[7];case 9:return[3,11];case 10:return this.Jt(r,t),[7];case 11:return[2,!1]}})}).call(this)}},{key:"Or",value:function Or(e,t){return _async_to_generator(function(){var _t_sceneName;return _ts_generator(this,function(_state){switch(_state.label){case 0:return[4,e.runAsync(t)];case 1:return[2,{shouldContinue:_state.sent(),targetScene:null!=(_t_sceneName=t.sceneName)?_t_sceneName:null}]}})})()}},{key:"Jt",value:function Jt(e,t){this.ke(t)}},{key:"dt",value:function dt(e){if("string"!=typeof e||0===e.trim().length)throw new Th("".concat(e))}},{key:"Wa",value:function Wa(e){if(this.b.some(function(t){return t.id===e}))throw new Ch(e)}},{key:"Xt",value:function Xt(e){return this.dt(e),this.b.findIndex(function(t){return t.id===e})}},{key:"ht",value:function ht(e){var t=this.Xt(e);if(t<0)throw new Mh(e);return t}},{key:"ke",value:function ke(e){return Math.round((performance.now()-e)*100)/100}}]),zo}();a(zo,"StepRegistry");var Wo=zo,fe=Wo;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var aA=a(function(){return{id:"ChallengeFromPost",runAsync:a(function(n){return _async_to_generator(function(){var e,t,o,e1;return _ts_generator(this,function(_state){switch(_state.label){case 0:if("string"!=typeof(e=n.contextData.playerId))return[2,!0];if(t=codex.match,(o=codex.player.getPlayerId())!==e)return[3,2];return[4,t.single.start.processAsync({playerId:o})];case 1:case 3:case 5:return _state.sent(),[3,6];case 2:return _state.trys.push([2,4,,6]),[4,t.challenge.friend.processAsync({playerId:o,opponentId:e})];case 4:return e1=_state.sent(),[4,t.single.start.processAsync({playerId:o})];case 6:return[2,(n.sceneName="GameScene",!0)]}})})()},"runAsync")}},"createChallengeFromPostStep"),Oh=aA;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var oA=a(function(){return{id:"SwitchScene",runAsync:a(function(n){return _async_to_generator(function(){var e,t;return _ts_generator(this,function(_state){return(e=n.sceneName)?(t={isFromLoader:!0},[2,(codex.event.emit(Ludex.Events.SWITCH_SCENE,{sceneName:e,sceneData:t}),!1)]):[2,!0]})})()},"runAsync")}},"createSwitchSceneStep"),Me=oA,sA=le.SHARE_INVITE,iA=le.CHALLENGE_FRIEND,cA=a(function(){return{id:"ChallengeFromPostFlow",when:a(function(n){var _n_contextData=n.contextData,e=_n_contextData.type,t=_n_contextData.playerId,r=n.contextSessionType;return e===sA&&"string"==typeof t&&r===iA},"when"),do:new fe([Oh(),Me()])}},"createChallengeFromPostFlow"),Nh=cA;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var Yo=/*#__PURE__*/function(Error1){function Yo(e){var _this;return _class_call_check(this,Yo),(_this=_call_super(this,Yo,[e])).name="PlayerHasFinishedMatch",_this.message=null!=e?e:"Player has finished match",_this}return _inherits(Yo,Error1),Yo}(_wrap_native_super(Error));a(Yo,"PlayerHasFinishedMatch");var qo=Yo,tn=qo;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var Qo=/*#__PURE__*/function(Error1){function Qo(e){var _this;return _class_call_check(this,Qo),(_this=_call_super(this,Qo,[e])).name="PlayerNotJoinInMatch",_this.message=e||"Player is not join in match",_this}return _inherits(Qo,Error1),Qo}(_wrap_native_super(Error));a(Qo,"PlayerNotJoinInMatch");var Jo=Qo,Tt=Jo,lA=a(function(n){return _async_to_generator(function(){var e,t,r,o,w,I,D,S;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(e=codex.match,t=codex.player,r=n.contextId,o=n.matchId,w=n.playerId,I=n.opponentId,D=t.getPlayerId(),w!==D)return[3,2];return[4,e.challenge.continue.processAsync({contextId:r,matchId:o,playerId:D,opponentId:I})];case 1:return _state.sent(),[3,4];case 2:return S=I===he.playerId,[4,e.challenge.continue.processAsync({contextId:r,matchId:o,playerId:D,opponentId:S?I:w})];case 3:_state.sent(),_state.label=4;case 4:return[2]}})})()},"processContinueChallengeFromMessageAsync"),dA=a(function(n){return _async_to_generator(function(){var e,t,r,o,w,I,e1;return _ts_generator(this,function(_state){switch(_state.label){case 0:e=codex.match,t=codex.player,r=n.contextId,o=n.matchId,w=n.playerId,I=t.getPlayerId(),_state.label=1;case 1:return _state.trys.push([1,3,,4]),[4,e.challenge.join.processAsync({contextId:r,matchId:o,playerId:I,opponentId:w})];case 2:return[2,(_state.sent(),"GameScene")];case 3:return e1=_state.sent(),[2,"DashboardScene"];case 4:return[2]}})})()},"processJoinChallengeFromMessageAsync"),uA=a(function(n){return _async_to_generator(function(){var e,t,r,o,w,I,e1;return _ts_generator(this,function(_state){switch(_state.label){case 0:e=codex.match,t=codex.player,r=n.contextId,o=n.matchId,w=n.playerId,I=t.getPlayerId(),_state.label=1;case 1:return _state.trys.push([1,3,,4]),[4,e.challenge.result.processAsync({contextId:r,matchId:o,playerId:I,opponentId:w})];case 2:return[2,(_state.sent(),"ChallengeResultScene")];case 3:return e1=_state.sent(),[2,"DashboardScene"];case 4:return[2]}})})()},"processResultChallengeFromMessageAsync"),pA=a(function(n){return _async_to_generator(function(){var e,t,r,o,w,I,e1;return _ts_generator(this,function(_state){switch(_state.label){case 0:e=codex.match,t=codex.player,r=n.contextId,o=n.matchId,w=n.playerId,I=t.getPlayerId(),_state.label=1;case 1:return _state.trys.push([1,3,,5]),[4,e.challenge.await.processAsync({contextId:r,matchId:o,playerId:I,opponentId:w})];case 2:return[2,(_state.sent(),"ChallengeResultScene")];case 3:return e1=_state.sent(),[4,uA(n)];case 4:return[2,_state.sent()];case 5:return[2]}})})()},"processAwaitChallengeFromMessageAsync"),mA=a(function(n){return _async_to_generator(function(){var e,_tmp,_tmp1;return _ts_generator(this,function(_state){switch(_state.label){case 0:return _state.trys.push([0,2,,9]),[4,lA(n)];case 1:return _state.sent(),[3,9];case 2:if(!_instanceof(e=_state.sent(),tn))return[3,4];return[4,pA(n)];case 3:return _tmp=_state.sent(),[3,8];case 4:if(!_instanceof(e,Tt))return[3,6];return[4,dA(n)];case 5:return _tmp1=_state.sent(),[3,7];case 6:_tmp1="DashboardScene",_state.label=7;case 7:_tmp=_tmp1,_state.label=8;case 8:return[2,_tmp];case 9:return[2,"GameScene"]}})})()},"processChallengeFromMessageAsync"),hA=a(function(){return{id:"ChallengeFromMessage",runAsync:a(function(n){return _async_to_generator(function(){var e,t,r,o,w;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(e=n.contextId,r=(t=n.contextData).matchId,o=t.playerId,w=t.opponentId,"string"!=typeof r||"string"!=typeof o||"string"!=typeof w)return[2,!0];return[4,mA({contextId:e,matchId:r,playerId:o,opponentId:w})];case 1:return[2,(n.sceneName=_state.sent(),!0)]}})})()},"runAsync")}},"createChallengeFromMessageStep"),Rh=hA,_h=le.CHALLENGE_FRIEND,fA=a(function(){return{id:"ChallengeFromMessageFlow",when:a(function(n){var _n_contextData=n.contextData,e=_n_contextData.type,t=_n_contextData.matchId,r=_n_contextData.playerId,o=_n_contextData.opponentId,w=n.contextSessionType;return e===_h&&"string"==typeof t&&"string"==typeof r&&"string"==typeof o&&w===_h},"when"),do:new fe([Rh(),Me()])}},"createChallengeFromMessageFlow"),kh=fA;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var yA=a(function(){return{id:"StartSingleForFirstSession",runAsync:a(function(n){return _async_to_generator(function(){var e,t,r;return _ts_generator(this,function(_state){switch(_state.label){case 0:return e=codex.match,r=(t=codex.player).getPlayerId(),[4,e.handler.setMatchCustomData({playerId:r,contextId:"SOLO"})];case 1:return _state.sent(),[4,e.single.start.processAsync({playerId:r})];case 2:return[2,(_state.sent(),t.loggedIn(),n.sceneName="GameScene",!0)]}})})()},"runAsync")}},"createStartSingleForFirstSessionStep"),Gh=yA,gA=a(function(){return{id:"FirstSessionFlow",when:a(function(n){return n.isFirstSession},"when"),do:new fe([Gh(),Me()])}},"createFirstSessionFlow"),Fh=gA;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var PA=a(function(){return{id:"MatchingGroupJoin",runAsync:a(function(n){return _async_to_generator(function(){var _n_contextData,e,t,r,o;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(e=(_n_contextData=n.contextData).playerId,t=_n_contextData.playerScore,"string"!=typeof e||"number"!=typeof t)return[2,!0];return r=codex.match,o=codex.player,[4,r.group.join.processAsync({playerId:o.getPlayerId(),opponentId:e,opponentScore:t})];case 1:return[2,(_state.sent(),n.sceneName="GameScene",!0)]}})})()},"runAsync")}},"createMatchingGroupJoinStep"),Bh=PA,xA=le.MATCHING_GROUP,wA=a(function(){return{id:"MatchingGroupFlow",when:a(function(n){var _n_contextData=n.contextData,e=_n_contextData.playerId,t=_n_contextData.playerScore,r=n.contextSessionType;return"string"==typeof e&&"number"==typeof t&&r===xA},"when"),do:new fe([Bh(),Me()])}},"createMatchingGroupFlow"),Uh=wA;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var $A=Ludex.Events,_Ludex_Utils11=Ludex.Utils,AA=_Ludex_Utils11.Valid;a(Vh,"requestSetLocale$");var vA=a(function(n){return _async_to_generator(function(){var e;return _ts_generator(this,function(_state){switch(_state.label){case 0:switch(e=codex.player,n){case"reset_data":return[3,1];case"enable_debug":return[3,3];case"set_locale_en":return[3,4];case"set_locale_ru":return[3,5]}return[3,6];case 1:return e.setPlayerDataByName("score",0),e.setGameData({coins:0,level:1}),[4,e.syncProfileToServer()];case 2:return _state.sent(),[3,6];case 3:return e.setPlayerDataByName("debug",!0),[3,6];case 4:return Vh("en"),[3,6];case 5:return Vh("ru"),[3,6];case 6:return[2]}})})()},"processEntryPointActionAsync"),SA=a(function(){return{id:"EntryPointAction",runAsync:a(function(n){return _async_to_generator(function(){var e,_tmp,e1;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(_state.trys.push([0,3,,4]),e=n.contextData.action,!(_tmp=AA.isString(e)))return[3,2];return[4,vA(e)];case 1:_tmp=_state.sent(),_state.label=2;case 2:return[2,!0];case 3:return e1=_state.sent(),[2,!0];case 4:return[2]}})})()},"runAsync")}},"createEntryPointActionStep"),Kh=SA;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var _Ludex_Plugins=Ludex.Plugins,Hh=_Ludex_Plugins.Analytics,bA=a(function(n){try{var e=codex.player,t=codex.analytics;if(!t)return;if(n)t.event(Hh.Events.NEW_USER);else{var r=e.getPlayerData().gameData.coins;t.event(Hh.Events.RETURNING_USER,{coins:r})}}catch(e){}},"logUserAnalytics$"),DA=a(function(){return{id:"LogUserAnalytics",runAsync:a(function(n){return _async_to_generator(function(){return _ts_generator(this,function(_state){return[2,(setTimeout(function(){bA(n.isFirstSession)},1e3),!0)]})})()},"runAsync")}},"createLogUserAnalyticsStep"),jh=DA,IA=a(function(){return{id:"PreFlow",when:a(function(n){return!0},"when"),do:new fe([Kh(),jh()])}},"createPreFlow"),Wh=IA;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var EA=a(function(){return{id:"PrepareDashboardScene",runAsync:a(function(n){return _async_to_generator(function(){return _ts_generator(this,function(_state){return[2,(n.sceneName="DashboardScene",!0)]})})()},"runAsync")}},"createPrepareDashboardSceneStep"),zh=EA,LA=a(function(){return{id:"NormalFlow",when:a(function(n){return!0},"when"),do:new fe([zh(),Me()])}},"createNormalFlow"),qh=LA;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var Zo=/*#__PURE__*/function(Error1){function Zo(){return _class_call_check(this,Zo),_call_super(this,Zo,["ContextIdInvalid"])}return _inherits(Zo,Error1),Zo}(_wrap_native_super(Error));a(Zo,"ContextIdInvalid");var Xo=Zo,Yh=Xo,_Ludex_Utils12=Ludex.Utils,CA=_Ludex_Utils12.Valid,TA=a(function(){return{id:"ContinueTournament",runAsync:a(function(n){return _async_to_generator(function(){var e,r,e1;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(_state.trys.push([0,2,,3]),e=codex.match,r=codex.player.getPlayerId(),CA.isEmpty(n.contextId))throw new Yh;return[4,e.tournament.continue.processAsync({playerId:r,contextId:n.contextId})];case 1:return _state.sent(),n.sceneName="GameScene",[3,3];case 2:return e1=_state.sent(),[3,3];case 3:return[2,!0]}})})()},"runAsync")}},"createContinueTournamentStep"),Jh=TA,MA=le.TOURNAMENT,OA=a(function(){return{id:"TournamentFlow",when:a(function(n){return n.contextSessionType===MA},"when"),do:new fe([Jh(),Me()])}},"createTournamentFlow"),Qh=OA;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var Xh=function(n){return n.StartID="__start__",n}(Xh||{}),rn=Xh;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var ts=/*#__PURE__*/function(Error1){function ts(e){return _class_call_check(this,ts),_call_super(this,ts,["Duplicate flow id: ".concat(e)])}return _inherits(ts,Error1),ts}(_wrap_native_super(Error));a(ts,"FlowIdDuplicate");var es=ts,Zh=es;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var ns=/*#__PURE__*/function(Error1){function ns(e){return _class_call_check(this,ns),_call_super(this,ns,["Invalid flow id: ".concat(e)])}return _inherits(ns,Error1),ns}(_wrap_native_super(Error));a(ns,"FlowIdInvalid");var rs=ns,ef=rs;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var os=/*#__PURE__*/function(Error1){function os(e){return _class_call_check(this,os),_call_super(this,os,["Flow not found: ".concat(e)])}return _inherits(os,Error1),os}(_wrap_native_super(Error));a(os,"FlowNotFound");var as=os,tf=as,is=/*#__PURE__*/function(){function is(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];_class_call_check(this,is),_define_property(this,"L",void 0),this.L=[];var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=e[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var t=_step.value;this.addAfter(rn.StartID,t)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}return _create_class(is,[{key:"createSteps",value:function createSteps(e){return new fe(e)}},{key:"addBefore",value:function addBefore(e,t){if(this.ut(t.id),this.za(t.id),e===rn.StartID)return void this.L.unshift(t);var r=this.pt(e);this.L.splice(r,0,t)}},{key:"addAfter",value:function addAfter(e,t){if(this.ut(t.id),this.za(t.id),e===rn.StartID)return void this.L.push(t);var r=this.pt(e);this.L.splice(r+1,0,t)}},{key:"replace",value:function replace(e,t){this.ut(e);var r=this.pt(e),o=this.L[r];this.L[r]=N(N({},o),t)}},{key:"remove",value:function remove(e){var t=this.pt(e);this.L.splice(t,1)}},{key:"runAsync",value:function runAsync(e){return _async_to_generator(function(){var t,r,_iteratorNormalCompletion,_didIteratorError,_iteratorError,_iterator,_step,o,w,_ref,I,D,err;return _ts_generator(this,function(_state){switch(_state.label){case 0:t=performance.now(),r=[],_state.label=1;case 1:_state.trys.push([1,,10,11]),_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0,_state.label=2;case 2:_state.trys.push([2,7,8,9]),_iterator=this.L[Symbol.iterator](),_state.label=3;case 3:if(_iteratorNormalCompletion=(_step=_iterator.next()).done)return[3,6];return o=_step.value,w=performance.now(),[4,this._r(o,e)];case 4:if(I=(_ref=_state.sent()).matched,D=_ref.done,r.push({flowId:o.id,matched:I,done:D,ms:this.ke(w)}),D)return[2,!0];_state.label=5;case 5:return _iteratorNormalCompletion=!0,[3,3];case 6:return[3,9];case 7:return err=_state.sent(),_didIteratorError=!0,_iteratorError=err,[3,9];case 8:try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}return[7];case 9:return[3,11];case 10:return this.Jt(r,t),[7];case 11:return[2,!1]}})}).call(this)}},{key:"_r",value:function _r(e,t){return _async_to_generator(function(){var r,_tmp,_tmp1;return _ts_generator(this,function(_state){switch(_state.label){case 0:r=!1;try{r=e.when(t)}catch(e){}if(!r)return[3,2];return _tmp1={matched:!0},[4,e.do.runAsync(t)];case 1:return _tmp1.done=_state.sent(),_tmp=_tmp1,[3,3];case 2:_tmp={matched:!1,done:!1},_state.label=3;case 3:return[2,_tmp]}})})()}},{key:"Jt",value:function Jt(e,t){this.ke(t)}},{key:"ut",value:function ut(e){if("string"!=typeof e||0===e.trim().length)throw new ef("".concat(e))}},{key:"za",value:function za(e){if(this.L.some(function(t){return t.id===e}))throw new Zh(e)}},{key:"Xt",value:function Xt(e){return this.ut(e),this.L.findIndex(function(t){return t.id===e})}},{key:"pt",value:function pt(e){var t=this.Xt(e);if(t<0)throw new tf(e);return t}},{key:"ke",value:function ke(e){return Math.round((performance.now()-e)*100)/100}}]),is}();a(is,"FlowRegistry");var ss=is,rf=ss,ls=/*#__PURE__*/function(){function ls(e){_class_call_check(this,ls),_define_property(this,"codex",void 0),_define_property(this,"flows",void 0),this.codex=e,this.flows=new rf([Wh(),Qh(),Nh(),kh(),Uh(),Fh(),qh()])}return _create_class(ls,[{key:"processContextData",value:function processContextData(){return _async_to_generator(function(){var _this_codex,e,t,r,o;return _ts_generator(this,function(_state){switch(_state.label){case 0:return e=(_this_codex=this.codex).player,r=(t=_this_codex.context).getContextData(),o={contextId:t.getContextId(),contextData:r,contextSessionType:t.getSessionContextType(),isFirstSession:e.isFirstSession()},[4,this.flows.runAsync(o)];case 1:return _state.sent()||this.codex.event.emit(Ludex.Events.SWITCH_SCENE,{sceneName:"DashboardScene",sceneData:{isFromLoader:!0}}),[2]}})}).call(this)}},{key:"configureFlows",value:function configureFlows(e){try{e(this.flows)}catch(e){}}}]),ls}();a(ls,"Loader");var cs=ls,nf=cs;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var NA={processed:!1,contextId:"",contextType:"SOLO",entryPointData:{},contextGameMode:"",sessionContextType:""},nn=NA,an=Ludex.Events,_Ludex_Utils13=Ludex.Utils,af=_Ludex_Utils13.Function,us=/*#__PURE__*/function(_Ludex_Plugins_BasePlugin){function us(e){var _this;return _class_call_check(this,us),_define_property(_this=_call_super(this,us,[e]),"n",void 0),_define_property(_this,"Zt",void 0),_this.Zt=new nf(e),_this.n=new Eh(e),_this}return _inherits(us,_Ludex_Plugins_BasePlugin),_create_class(us,[{key:"init",value:function init(){this.codex.storage.addStorage("context",nn)}},{key:"getSessionContextTypes",value:function getSessionContextTypes(){return le}},{key:"processContextData",value:function processContextData(){return _async_to_generator(function(){var _this,_this_codex,e,t;return _ts_generator(this,function(_state){return _this=this,e=(_this_codex=this.codex).event,t=_this_codex.monitorError,e.catchUp(an.CONTEXT_SESSION_TYPE_DETECTED,function(){return _async_to_generator(function(){var r;return _ts_generator(this,function(_state){switch(_state.label){case 0:return _state.trys.push([0,2,,3]),[4,this.Zt.processContextData()];case 1:return _state.sent(),e.emit(an.CONTEXT_DATA_PROCESSED),[3,3];case 2:return r=_state.sent(),this.Nr(),null==t||t.sendException(af.toError(r)),[3,3];case 3:return[2]}})}).call(_this)}),[2]})}).call(this)}},{key:"configureFlows",value:function configureFlows(e){this.Zt.configureFlows(e)}},{key:"detectContextSessionType",value:function detectContextSessionType(){return _async_to_generator(function(){var _this_codex,e,t,r;return _ts_generator(this,function(_state){switch(_state.label){case 0:e=(_this_codex=this.codex).event,t=_this_codex.monitorError,_state.label=1;case 1:return _state.trys.push([1,3,4,5]),[4,this.n.detectContextSessionType()];case 2:return _state.sent(),[3,5];case 3:return r=_state.sent(),null==t||t.sendException(af.toError(r)),[3,5];case 4:return e.emit(an.CONTEXT_SESSION_TYPE_DETECTED),[7];case 5:return[2]}})}).call(this)}},{key:"detectContextGameMode",value:function detectContextGameMode(){this.n.detectContextGameMode()}},{key:"receiveContext",value:function receiveContext(e,t,r){this.n.receiveContext(e,t,r)}},{key:"getContextId",value:function getContextId(){return this.n.getContextId()}},{key:"getContextType",value:function getContextType(){return this.n.getContextType()}},{key:"getContextData",value:function getContextData(){return this.n.getContextData()}},{key:"getSessionContextType",value:function getSessionContextType(){return this.n.getSessionContextType()}},{key:"Nr",value:function Nr(){this.codex.event.emit(an.SWITCH_SCENE,{sceneName:"DashboardScene"})}}]),us}(Ludex.Plugins.BasePlugin);a(us,"ContextPlugin");var ds=us,of=ds;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var _Ludex_Utils14=Ludex.Utils,ps=_Ludex_Utils14.Valid,RA=nn.contextId,_A=nn.contextType,kA=nn.entryPointData,ms="is invalid",hs=/*#__PURE__*/function(ae){function hs(){var _this;return _class_call_check(this,hs),_this=_call_super(this,hs,arguments),_define_property(_this,"je",void 0),_this}return _inherits(hs,ae),_create_class(hs,[{key:"Q",value:function Q(e){this.Z(e)}},{key:"q",value:function q(e){this.J(e)}},{key:"o",value:function o(e){this.X(e)}},{key:"validateContextId",value:function validateContextId(e){ps.isString(e)||this.a("contextId",ms)}},{key:"validateContextType",value:function validateContextType(e){ps.isString(e)&&e||this.a("contextType",ms)}},{key:"validateEntryPointData",value:function validateEntryPointData(e){ps.isObject(e)||this.a("entryPointData",ms)}},{key:"toObject",value:function toObject(){return _get(_get_prototype_of(hs.prototype),"toObject",this).call(this)}}]),hs}(ae);a(hs,"ContextInfoDtos");var on=hs;on.addDefaults({contextId:RA,contextType:_A,entryPointData:kA});var sf=on;Ludex.Dtos.Context={Info:sf};var cf=of;_(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var uf=Ng(df(),1),pf=uf.default,BA=new pf,et=BA;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var UA={names:[],history:[]},mf=UA,_Ludex_Utils15=Ludex.Utils,tt=_Ludex_Utils15.Decorator,VA=_Ludex_Utils15.Array,_e=/*#__PURE__*/function(_Ludex_Plugins_BasePlugin){function _e(){var _this;return _class_call_check(this,_e),_this=_call_super(this,_e,arguments),_define_property(_this,"Ya",!1),_define_property(_this,"yt",[]),_this}return _inherits(_e,_Ludex_Plugins_BasePlugin),_create_class(_e,[{key:"init",value:function init(){this.codex.storage.addStorage("event",mf)}},{key:"enableLogEvent",value:function enableLogEvent(){this.Ya=!0}},{key:"on",value:function on(e,t){this.qa(e),this.De(e,"on","listening"),et.on(e,t)}},{key:"once",value:function once(e,t){this.qa(e),this.De(e,"once","listening"),et.once(e,t)}},{key:"waitTo",value:function waitTo(e,t){var _this=this;return new Promise(function(r,o){var w,I=a(function(D){clearTimeout(w),r(D)},"callback");_this.once(e,I),t&&t>0&&(w=setTimeout(function(){_this.off(e,I),o(Error("Event ".concat(e," timeout")))},t))})}},{key:"catchUp",value:function catchUp(e,t){var r=this.getLastEventInfo(e,"called");if(!r)return void this.once(e,t);if(!(this.yt.indexOf(e)>-1)){var o=r.payload;this.De(e,"once","catchup"),t(o)}}},{key:"off",value:function off(e,t){et.off(e,t),this.De(e,"action","removed")}},{key:"mute",value:function mute(e){this.yt.indexOf(e)>-1||this.yt.push(e)}},{key:"clear",value:function clear(e){et.removeAllListeners(e),this.De(e,"action","removed")}},{key:"emit",value:function emit(e,t){if(!(this.yt.indexOf(e)>-1)){var _et,r=[];t&&(r=[t]),this.De(e,"action","called",t),(_et=et).emit.apply(_et,[e].concat(_to_consumable_array(r)))}}},{key:"qa",value:function qa(e){var r=this.codex.storage.getStorageData("event","names");r&&0>r.indexOf(e)&&r.push(e)}},{key:"Tr",value:function Tr(e){return e.length<=1e4?e:VA.limit(e,1e4)}},{key:"getEventListeners",value:function getEventListeners(e){return this.getHistory().filter(function(t){return t.name===e&&["listening","catchup"].includes(t.status)}).map(function(t){return t.name})}},{key:"getHistory",value:function getHistory(){var _e_getStorageData,t=null!=(_e_getStorageData=this.codex.storage.getStorageData("event","history"))?_e_getStorageData:[];return this.Tr(t)}},{key:"getEventEmitCount",value:function getEventEmitCount(e){return this.getHistory().filter(function(t){return t.name===e&&"called"===t.status}).length}},{key:"getLastEventInfo",value:function getLastEventInfo(e,t){for(var r=this.getHistory(),o=r.length-1;o>=0;o--){var w=r[o];if(w.name===e&&(!t||w.status===t))return w}return null}},{key:"Cr",value:function Cr(e){var _this_getLastEventInfo,_this_getLastEventInfo_type;return null!=(_this_getLastEventInfo_type=null==(_this_getLastEventInfo=this.getLastEventInfo(e))?void 0:_this_getLastEventInfo.type)?_this_getLastEventInfo_type:null}},{key:"Rr",value:function Rr(e){var _this_getLastEventInfo,_this_getLastEventInfo_called;return null!=(_this_getLastEventInfo_called=null==(_this_getLastEventInfo=this.getLastEventInfo(e))?void 0:_this_getLastEventInfo.called)?_this_getLastEventInfo_called:0}},{key:"De",value:function De(e,t,r,o){var _this_Cr,w=null!=(_this_Cr=this.Cr(e))?_this_Cr:t,I=this.Rr(e),D="called"===r?I+1:I;this.getHistory().push({type:w,status:r,name:e,called:D,payload:null!=o?o:{}}),this.Mr(e,w,r,D)}},{key:"Mr",value:function Mr(e,t,r,o){this.Ya&&("listening"===r&&et.listenerCount(e),"called"===r&&et.listenerCount(e))}}]),_e}(Ludex.Plugins.BasePlugin);a(_e,"EventPlugin"),pe([tt.validateParams("string","function")],_e.prototype,"on",1),pe([tt.validateParams("string","function")],_e.prototype,"once",1),pe([tt.validateParams("string")],_e.prototype,"waitTo",1),pe([tt.validateParams("string","function")],_e.prototype,"catchUp",1),pe([tt.validateParams("string","function")],_e.prototype,"off",1),pe([tt.validateParams("string")],_e.prototype,"mute",1),pe([tt.validateParams("string")],_e.prototype,"clear",1),pe([tt.validateParams("string")],_e.prototype,"emit",1);var ys=_e,hf=ys,ff=hf;_(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var yf='nunito,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",sans-serif',_Ludex_Configs3=Ludex.Configs,_Ludex_Configs_FrameCapture=_Ludex_Configs3.FrameCapture,KA=_Ludex_Configs_FrameCapture.Enabled,gs=_Ludex_Configs_FrameCapture.Options,_Ludex_Utils16=Ludex.Utils,HA=_Ludex_Utils16.Browser,cn=_Ludex_Utils16.Image,Qt=_Ludex_Utils16.Object,Xt=_Ludex_Utils16.Valid,xs=/*#__PURE__*/function(_Ludex_Plugins_BasePlugin){function xs(){var _this;return _class_call_check(this,xs),_this=_call_super(this,xs,arguments),_define_property(_this,"ea",void 0),_define_property(_this,"ta",void 0),_define_property(_this,"P",null),_define_property(_this,"n",null),_define_property(_this,"aa",null),_define_property(_this,"mt",{}),_define_property(_this,"sa",{}),_this}return _inherits(xs,_Ludex_Plugins_BasePlugin),_create_class(xs,[{key:"preloadAsync",value:function preloadAsync(e){return _async_to_generator(function(){var t;return _ts_generator(this,function(_state){switch(_state.label){case 0:return t=e.renderOptions,[4,this.Qa(t)];case 1:return _state.sent(),[2]}})}).call(this)}},{key:"captureAsync",value:function captureAsync(e){return _async_to_generator(function(){var t,r,o;return _ts_generator(this,function(_state){switch(_state.label){case 0:return t=e.width,r=e.height,o=e.renderOptions,[4,this.Qa(o)];case 1:return[2,(_state.sent(),this.ea=t,this.ta=r,this.$r(),this.Gr(o),this.Ur())]}})}).call(this)}},{key:"renderAsync",value:function renderAsync(e,t){return _async_to_generator(function(){var r;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(!KA)return[2,null];if(void 0===(r=this.sa[e]))throw Error("Renderer ".concat(e," has not been set"));return[4,r(t)];case 1:return[2,_state.sent()]}})}).call(this)}},{key:"setRenderer",value:function setRenderer(e,t){this.sa[e]=t}},{key:"unsetRenderer",value:function unsetRenderer(e){delete this.sa[e]}},{key:"setTestRenderOptions",value:function setTestRenderOptions(e){if(!e){this.aa=null;return}var t=Qt.camelCaseKeys(e);this.aa=Qt.merge(this.aa,t)}},{key:"$r",value:function $r(){if(!this.P){var e=HA.createCanvas({type:"canvas",contextAttributes:{alpha:!1,desynchronized:!0,willReadFrequently:!0},contextType:"2d"});this.P=null==e?void 0:e.canvas,this.n=null==e?void 0:e.context}if(!this.P)throw Error("Failed to create canvas");this.n&&this.n.clearRect(0,0,this.ea,this.ta),this.P.width=this.ea,this.P.height=this.ta}},{key:"Qa",value:function Qa(e){return _async_to_generator(function(){var t,r,o,w;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(t=this.Fr(e),r=this.kr(t),(o=Qt.vals(r)).length<1)return[2];return[4,Promise.all(o)];case 1:return w=_state.sent(),this.jr(r,w),[2]}})}).call(this)}},{key:"Fr",value:function Fr(e){var t=Qt.vals(e).filter(function(r){return"image"===r.type}),_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=t[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var r=_step.value,o=r.name,w=r.image,I=r.fallbackImage,D=Xt.isString(w)&&""!==w;if(!o){var S=D?w:I;S&&(r.name=S)}!D&&I&&(r.image=I)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return t}},{key:"kr",value:function kr(e){var t={},_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _this,_step,_loop=function(){var r=_step.value,o=r.name,w=r.image,I=r.fallbackImage,D=_this.mt[o];!Xt.isString(w)||D||(""===w&&Xt.isString(I)&&(r.image=I),t[o]=new Promise(function(S){cn.loadImage(w).then(function(E){S(E)}).catch(function(){Xt.isString(I)?(r.image=I,cn.loadImage(r.image).then(function(E){S(E)}).catch(function(){S(null)})):S(null)})}))},_iterator=e[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0)_this=this,_loop()}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return t}},{key:"jr",value:function jr(e,t){for(var r in e){var o=t.shift();o&&(this.mt[r]=o)}}},{key:"Gr",value:function Gr(e){var t=Qt.vals(e).sort(function(r,o){return r.depth-o.depth}),_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=t[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var r=_step.value;switch(r.type){case"text":this.Br(r);break;case"image":this.Hr(r)}}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}},{key:"Br",value:function Br(e){if(this.P&&this.n){var t=e.position,r=e.font,o=e.text,w=e.color,I=e.lineWidth,D=e.textAlign;this.n.font="".concat(r," ").concat(yf),this.n.fillStyle=null!=w?w:"#ffffff",I&&(this.n.lineWidth=I),D&&(this.n.textAlign=D);var _t=_sliced_to_array(t,2),S=_t[0],E=_t[1];this.n.fillText(o,S,E)}}},{key:"Hr",value:function Hr(e){if(this.P&&this.n){var t=e.name,r=e.size,o=e.position,w=e.fallbackImage,I=this.mt[t];if(!I&&w&&(I=this.mt[w]),!I)throw Error("Image ".concat(t," not found"));var _o=_sliced_to_array(o,2),D=_o[0],S=_o[1],_r=_sliced_to_array(r,2),E=_r[0],b=_r[1];this.n.drawImage(I,D,S,E,b)}}},{key:"Ur",value:function Ur(){return _async_to_generator(function(){var e,_tmp;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(!this.P)return[2,null];if(e=null,!(gs.UseBlobIfPossible&&"toBlob"in this.P))return[3,2];return[4,this.Kr()];case 1:return _tmp=e=_state.sent(),[3,3];case 2:_tmp=e=this.Vr(),_state.label=3;case 3:if(!e)throw Error("Image data is null");return[2,(Xt.isDebugger()&&cn.logImage(e),e)]}})}).call(this)}},{key:"Vr",value:function Vr(){if(!this.P||!this.n)return null;var e=gs.Quality,t=gs.RenderType;return this.n.canvas.toDataURL("image/".concat(t),e)}},{key:"Kr",value:function Kr(){var _this=this;return new Promise(function(e){if(!_this.P)return void e(null);var t=gs.Quality,r=gs.RenderType;_this.P.toBlob(function(o){o?cn.blobToDataImage(o).then(function(w){e(w)}):e(null)},"image/".concat(r),t)})}}]),xs}(Ludex.Plugins.BasePlugin);a(xs,"FrameCapturePlugin");var Ps=xs,gf=Ps,Pf=gf;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var $s=/*#__PURE__*/function(Error1){function $s(e){var _this;return _class_call_check(this,$s),_define_property(_this=_call_super(this,$s,['Locale "'.concat(e,'" not found')]),"locale",void 0),_this.name="LocaleNotFoundError",_this.locale=e,_this}return _inherits($s,Error1),$s}(_wrap_native_super(Error));a($s,"LocaleNotFoundError");var ws=$s,ln=ws;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var vs=/*#__PURE__*/function(Error1){function vs(e,t){_class_call_check(this,vs);var _this,r=String(e);return _define_property(_this=_call_super(this,vs,['Text with key "'.concat(r,'" not found in locale "').concat(t,'"')]),"key",void 0),_define_property(_this,"locale",void 0),_this.name="MissingKeyInLocaleError",_this.key=r,_this.locale=t,_this}return _inherits(vs,Error1),vs}(_wrap_native_super(Error));a(vs,"MissingKeyInLocaleError");var As=vs,Zt=As,_Ludex_Utils17=Ludex.Utils,dn=_Ludex_Utils17.Object,xf=_Ludex_Utils17.Function,jA=_Ludex_Utils17.Browser,WA=_Ludex_Utils17.Valid,_Ludex_Configs4=Ludex.Configs,_Ludex_Configs_Languages=_Ludex_Configs4.Languages,zA=_Ludex_Configs_Languages.DetectPlayerLocale;a(Ss,"nullOrNotEmpty");var Ds=/*#__PURE__*/function(_Ludex_Plugins_BasePlugin){function Ds(){var _this;return _class_call_check(this,Ds),_this=_call_super(this,Ds,arguments),_define_property(_this,"Oe",void 0),_define_property(_this,"Be",void 0),_define_property(_this,"je",{}),_this}return _inherits(Ds,_Ludex_Plugins_BasePlugin),_create_class(Ds,[{key:"setFallbackLocale",value:function setFallbackLocale(e){this.Be=e}},{key:"hasLocale",value:function hasLocale(e){return dn.hasOwn(this.je,e)}},{key:"hasTextKey",value:function hasTextKey(e,t){var r=null!=t?t:this.getCurrentLocale(),o=this.ft(r).text;return dn.hasOwn(o,e)}},{key:"hasTextureKey",value:function hasTextureKey(e,t){var r=null!=t?t:this.getCurrentLocale(),o=this.ft(r).texture;return dn.hasOwn(o,e)}},{key:"add",value:function add(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.je[e]=t,r&&this.setFallbackLocale(e)}},{key:"choose",value:function choose(e){this.Oe=e,this.codex.event.emit(Ludex.Events.LANGUAGE_CHANGED,{locale:e})}},{key:"getText",value:function getText(e,t,r){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];try{return this.Wr(e,t,r,!o)}catch(w){return _instanceof(w,Zt)||_instanceof(w,ln),String(e)}}},{key:"getTexture",value:function getTexture(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.zr(e,t,!r)}},{key:"Wr",value:function Wr(e){var _this=this,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0,o=!(arguments.length>3)||void 0===arguments[3]||arguments[3];if(!o||void 0===this.Be){var D=this.ra(e,null!=r?r:this.getCurrentLocale());return this.Ja(D,t)}var w=this.Be,I=xf.retry(function(){return _this.ra(e,null!=r?r:_this.getCurrentLocale())},function(){return _this.ra(e,w)});return this.Ja(I,t)}},{key:"ra",value:function ra(e,t){if(!this.hasTextKey(e,t))throw new Zt(e,t);return this.ft(t).text[e]}},{key:"zr",value:function zr(e,t){var _this=this,r=!(arguments.length>2)||void 0===arguments[2]||arguments[2];if(!r||void 0===this.Be)return this.na(e,null!=t?t:this.getCurrentLocale());var o=this.Be;return xf.retry(function(){return _this.na(e,null!=t?t:_this.getCurrentLocale())},function(){return _this.na(e,o)})}},{key:"na",value:function na(e,t){if(!this.hasTextureKey(e,t))throw new Zt(e,t);return this.ft(t).texture[e]}},{key:"getCurrentLocale",value:function getCurrentLocale(){var _this_Oe;return null!=(_this_Oe=this.Oe)?_this_Oe:"en"}},{key:"ft",value:function ft(e){var t=null!=e?e:this.getCurrentLocale();if(!dn.hasOwn(this.je,t))throw new ln(t);return this.je[t]}},{key:"Ja",value:function Ja(e,t){var r=t.length;if(0===r)return e;for(var o=e,w=0;w<r;w++){var I=t[w],D="%{".concat(w,"}");o=o.replace(D,I)}return o}},{key:"getPlayerLanguage",value:function getPlayerLanguage(){var _ref,_Ss,_ref1,_ref2,e=this.codex.player,t=GameSDK.getLocale(),r=Ss(null==t?void 0:t.trim().split(/[-_]/)[0]),o=Ss(this.getBrowserLanguage());return e.isFirstSession()?null!=(_ref=null!=r?r:o)?_ref:"en":null!=(_ref2=null!=(_ref1=null!=(_Ss=Ss(e.getPlayerSetting("language")))?_Ss:r)?_ref1:o)?_ref2:"en"}},{key:"getBrowserLanguage",value:function getBrowserLanguage(){var _jA_getLocale_trim,_jA_getLocale;return!1===zA?"en":null==(_jA_getLocale=jA.getLocale())||null==(_jA_getLocale_trim=_jA_getLocale.trim())?void 0:_jA_getLocale_trim.split(/[-_]/)[0]}}]),Ds}(Ludex.Plugins.BasePlugin);a(Ds,"LanguagePlugin");var bs=Ds,wf=bs,$f=wf;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var qA={_id:"",name:"",createdBy:"",description:"",expireTime:6048e5,type:"app_leaderboard",timezone:"utc+0",createdAt:"2024-01-01T09:00:00.000Z",sortOrder:"desc",statistics:"max",resettable:"manually",resetScore:0,numberOfLeaders:15,amountPlayer:15},Af=qA,_Ludex_Configs5=Ludex.Configs,er=_Ludex_Configs5.OtherHost,tr=_Ludex_Configs5.Mockup,YA=_Ludex_Configs5.AppId,_Ludex_Utils18=Ludex.Utils,rr=_Ludex_Utils18.Object,Is=_Ludex_Utils18.String,JA=_Ludex_Utils18.Valid,Ls=/*#__PURE__*/function(){function Ls(){_class_call_check(this,Ls),_define_property(this,"I",void 0)}return _create_class(Ls,[{key:"ue",value:function ue(){return _async_to_generator(function(){var e;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(this.I)return[2];return[4,Promise.resolve().then(function(){return _(),Q})];case 1:if("function"!=typeof(e=_state.sent().default))throw Error("Cannot load LeaderboardAPIMock");return this.I=new e,[2]}})}).call(this)}},{key:"getLeadersAsync",value:function getLeadersAsync(e,t,r){return _async_to_generator(function(){var o,w,_tmp,_tmp1;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(o=Is.params(r),!tr.Leaderboards.Enabled)return[3,6];return[4,this.ue()];case 1:if(_state.sent(),!("playerIds"in r))return[3,3];return[4,this.I.getPlayers(e,r)];case 2:return _tmp1=w=_state.sent(),[3,5];case 3:return[4,this.I.getLeaders(e,r)];case 4:_tmp1=w=_state.sent(),_state.label=5;case 5:return _tmp=_tmp1,[3,8];case 6:return[4,qe("".concat(t,"?").concat(o),{},er)];case 7:_tmp=w=_state.sent(),_state.label=8;case 8:return[2,rr.hasOwn(w,"data")&&Array.isArray(w.data)?w.data:[]]}})}).call(this)}},{key:"getLeaderboardAsync",value:function getLeaderboardAsync(e){return _async_to_generator(function(){var t,r,_tmp;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(r="leaderboards/".concat(e),!tr.Leaderboards.Enabled)return[3,3];return[4,this.ue()];case 1:return _state.sent(),[4,this.I.getLeaderboardAsync(e)];case 2:return _tmp=t=_state.sent(),[3,5];case 3:return[4,qe(r,{},er)];case 4:t=_state.sent(),_tmp=rr.hasOwn(t,"data")&&"object"==_type_of(t.data)&&(t=t.data),_state.label=5;case 5:return[2,t]}})}).call(this)}},{key:"getLeaderboardsAsync",value:function getLeaderboardsAsync(e){return _async_to_generator(function(){var t,r,_tmp;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(r=Is.params(e),!tr.Leaderboards.Enabled)return[3,3];return[4,this.ue()];case 1:return _state.sent(),[4,this.I.getLeaderboardsAsync(e)];case 2:return _tmp=t=_state.sent(),[3,5];case 3:return[4,qe("leaderboards?".concat(r),{},er)];case 4:t=_state.sent(),_tmp=t=rr.hasOwn(t,"data")&&Array.isArray(t.data)?t.data:[],_state.label=5;case 5:return[2,t]}})}).call(this)}},{key:"setLeaderboardScoreAsync",value:function setLeaderboardScoreAsync(e){return _async_to_generator(function(){var t,r,o,_tmp;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(t=e.leaderboardId,r=e.playerId,o=e.score,!tr.Leaderboards.Enabled)return[3,3];return[4,this.ue()];case 1:return _state.sent(),[4,this.I.setScoreAsync(t,r,o)];case 2:return _tmp=_state.sent(),[3,5];case 3:return[4,Ae("leaderboards/".concat(t,"/players/").concat(r),{score:o},{},er)];case 4:_tmp=_state.sent(),_state.label=5;case 5:return[2]}})}).call(this)}},{key:"createLeaderboardAsync",value:function createLeaderboardAsync(e){return _async_to_generator(function(){var _e__id,t,r,o,w,I,_tmp;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(t=null!=(_e__id=e._id)?_e__id:Is.generateObjectId(),r=e.numberOfLeaders,o=be(N(N({},Af),e),{_id:t,appId:YA,numberOfLeaders:r}),w="leaderboards",!tr.Leaderboards.Enabled)return[3,3];return[4,this.ue()];case 1:return _state.sent(),[4,this.I.createLeaderboard(o)];case 2:return _tmp=I=_state.sent(),[3,5];case 3:return[4,Ae(w,o,{},er)];case 4:I=_state.sent(),_tmp=rr.hasOwn(I,"data")&&JA.isObject(I.data)&&(I=I.data),_state.label=5;case 5:if(!rr.hasOwn(I,"_id")||I._id!==t)throw Error("Create leaderboard failed");return[2,t]}})}).call(this)}}]),Ls}();a(Ls,"LeaderboardAPI");var Es=Ls,vf=Es;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var QA={limit:0,offset:0,leaders:{},isRequesting:!1,amountPlayer:0},Cs=QA;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var XA={leaderboards:{}},Sf=XA,_Ludex_Utils19=Ludex.Utils,ZA=_Ludex_Utils19.Array,ev=_Ludex_Utils19.Valid,bf=_Ludex_Utils19.Json,pt=_Ludex_Utils19.Object,_Ludex_Configs6=Ludex.Configs,_Ludex_Configs_Mockup=_Ludex_Configs6.Mockup,tv=_Ludex_Configs_Mockup.Leaderboards,Ms=/*#__PURE__*/function(_Ludex_Plugins_BasePlugin){function Ms(){var _this;return _class_call_check(this,Ms),_this=_call_super(this,Ms,arguments),_define_property(_this,"G",new vf),_define_property(_this,"D",void 0),_this}return _inherits(Ms,_Ludex_Plugins_BasePlugin),_create_class(Ms,[{key:"init",value:function init(){this.codex.storage.addStorage("leaderboard",Sf),this.D={}}},{key:"addLeaderboard",value:function addLeaderboard(e){var t=e.name,r=e.type,o=e.leaderboardId,w=e.autoSortRank;if(!this.getLeaderboard(t)){var I="leaderboards/".concat(o,"/");("global"===r||"tournament"===r)&&(I+="leaders"),"friends"===r&&(I+="players"),this.D[t]={id:o,name:t,type:r,host:I,autoSortRank:w};var D=bf.clone(Cs);this.C(t,D)}}},{key:"requestLeaderboardsAsync",value:function requestLeaderboardsAsync(e){return _async_to_generator(function(){var e1;return _ts_generator(this,function(_state){switch(_state.label){case 0:return _state.trys.push([0,2,,3]),[4,this.G.getLeaderboardsAsync(e)];case 1:return[2,_state.sent()];case 2:return e1=_state.sent(),[2,[]];case 3:return[2]}})}).call(this)}},{key:"requestLeaderboardAsync",value:function requestLeaderboardAsync(e,t){return _async_to_generator(function(){var _this_D_e,r,o,w,I,D,b,r1,o1,w1;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(_state.trys.push([0,,6,8]),this.He(e),this.clearLeaderboard(e),this.C(e,{isRequesting:!0}),r=(_this_D_e=this.D[e]).id,o=_this_D_e.type,w=_this_D_e.host,I=[],"friends"!==o)return[3,2];return b=[(D=this.codex.player).getPlayerId()].concat(_to_consumable_array(D.getConnectedPlayerIds(t,0))),this.D[e].playerIds=_to_consumable_array(b),[4,this.G.getLeadersAsync(r,w,{playerIds:b})];case 1:return I=_state.sent(),[3,4];case 2:return[4,this.G.getLeadersAsync(r,w,{limit:t,offset:0})];case 3:I=_state.sent(),_state.label=4;case 4:if(0===I.length)return[2];return[4,this.Xa(e,I)];case 5:return _state.sent(),this.C(e,{limit:t,offset:0}),[3,8];case 6:return[4,this.G.getLeaderboardAsync(this.D[e].id)];case 7:return o1=(r1=_state.sent())?r1.resettable:"",w1=r1?r1.amountPlayer:0,this.C(e,{isRequesting:!1,resettable:o1,amountPlayer:w1}),[7];case 8:return[2]}})}).call(this)}},{key:"loadMoreLeaderboardAsync",value:function loadMoreLeaderboardAsync(e,t){return _async_to_generator(function(){var r,_this_D_e,o,w,S,E;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(!((r=this.getLeaderboard(e))&&"friends"!==this.D[e].type))return[3,4];_state.label=1;case 1:return _state.trys.push([1,,3,4]),this.C(e,{isRequesting:!0}),o=(_this_D_e=this.D[e]).id,w=_this_D_e.host,S=r.offset+r.limit,[4,this.G.getLeadersAsync(o,w,{limit:t,offset:S})];case 2:if(0===(E=_state.sent()).length)return[2];return this.Xa(e,E),this.C(e,{limit:t,offset:S}),[3,4];case 3:return this.C(e,{isRequesting:!1}),[7];case 4:return[2]}})}).call(this)}},{key:"getLeaderboard",value:function getLeaderboard(e){var r=this.codex.storage.getStorageData("leaderboard","leaderboards");return r&&r[e]?r[e]:null}},{key:"getLeadersByPlayerIdsAsync",value:function getLeadersByPlayerIdsAsync(e,t){return _async_to_generator(function(){var r,o,w,e1;return _ts_generator(this,function(_state){switch(_state.label){case 0:return _state.trys.push([0,2,,3]),this.He(e),r=this.D[e].id,o="leaderboards/".concat(r,"/players"),[4,this.G.getLeadersAsync(r,o,{playerIds:t})];case 1:return[2,0===(w=_state.sent()).length?[]:this.Za(w)];case 2:return e1=_state.sent(),[2,[]];case 3:return[2]}})}).call(this)}},{key:"getLeaderboardResponseAsync",value:function getLeaderboardResponseAsync(e){return _async_to_generator(function(){return _ts_generator(this,function(_state){return[2,this.G.getLeaderboardAsync(e)]})}).call(this)}},{key:"clearLeaderboard",value:function clearLeaderboard(e){try{this.He(e);var t=bf.clone(Cs);this.C(e,null),this.C(e,t)}catch(e){}}},{key:"isLeaderboardEmpty",value:function isLeaderboardEmpty(e){var t=this.getLeaderboard(e);return!t||0===Object.keys(t.leaders).length}},{key:"isExistLeaderboardId",value:function isExistLeaderboardId(e){var _this=this,t=_this.D;return pt.vals(t).some(function(r){return r.id===e})}},{key:"getLeaderboardName",value:function getLeaderboardName(e){var _this=this,t=_this.D,r=ZA.search(pt.vals(t),function(o){return o.id===e});return r?r.name:null}},{key:"setLeaderboardScoreAsync",value:function setLeaderboardScoreAsync(e,t,r){return _async_to_generator(function(){var o,w,e1;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(_state.trys.push([0,3,,4]),GameSDK.extra.isGuest&&!tv.Enabled)return[2];return this.He(e),o=this.D[e].id,[4,this.Yr(e,t)];case 1:if((w=_state.sent())&&r<=w)return[2];return[4,this.G.setLeaderboardScoreAsync({leaderboardId:o,playerId:t,score:r})];case 2:return _state.sent(),[3,4];case 3:return e1=_state.sent(),[3,4];case 4:return[2]}})}).call(this)}},{key:"Yr",value:function Yr(e,t){return _async_to_generator(function(){var r;return _ts_generator(this,function(_state){switch(_state.label){case 0:return[4,this.getLeadersByPlayerIdsAsync(e,[t])];case 1:return[2,0===(r=_state.sent()).length?null:r[0].score]}})}).call(this)}},{key:"createLeaderboardAsync",value:function createLeaderboardAsync(e){return _async_to_generator(function(){return _ts_generator(this,function(_state){return[2,this.G.createLeaderboardAsync(e)]})}).call(this)}},{key:"He",value:function He(e){var t=this.getLeaderboard(e);if(!ev.isObject(t))throw Error("Leaderboard with name ".concat(e," not found"))}},{key:"C",value:function C(e,t){if(t){var _this_codex=this.codex,r=_this_codex.storage;r.setStorageData("leaderboard","leaderboards",_define_property({},e,t))}}},{key:"Xa",value:function Xa(e,t){return _async_to_generator(function(){var _I,_this_getLeaderboard,r,tmp,o,w,I,D,S;return _ts_generator(this,function(_state){switch(_state.label){case 0:return this.He(e),[4,this.Za(t)];case 1:return r=_state.sent().filter(function(E){return E.name&&E.photo}),o=void 0===(tmp=(null!=(_this_getLeaderboard=this.getLeaderboard(e))?_this_getLeaderboard:{}).leaders)?{}:tmp,w=r.filter(function(E){return!o[E.playerId]||(o[E.playerId]=E,!1)}),I=pt.vals(o),w.length>0&&(_I=I).unshift.apply(_I,_to_consumable_array(w)),D=I.sort(function(E,b){return b.score-E.score}),this.D[e].autoSortRank&&(D=D.map(function(E,b){return pt.merge(E,{rank:b+1})})),S=pt.keyBy(D,"playerId"),this.C(e,{leaders:S}),[2]}})}).call(this)}},{key:"Za",value:function Za(e){return _async_to_generator(function(){var _this,t,r,o;return _ts_generator(this,function(_state){switch(_state.label){case 0:return _this=this,t=this.codex.profile,r=e.map(function(w){return w.playerId}),[4,t.requestProfiles(r)];case 1:return _state.sent(),o=t.getProfiles(),[2,e.map(function(w){var D=o[w.playerId];if(!D){var _S_getText,E=null!=(_S_getText=_this.codex.language.getText("core.nameless"))?_S_getText:"Nameless";return pt.merge(w,{name:E,photo:"default"})}return pt.merge(w,{name:D.name,photo:D.photo})}).map(function(w){return be(N({},w),{score:parseInt(w.score,10)})})]}})}).call(this)}}]),Ms}(Ludex.Plugins.BasePlugin);a(Ms,"LeaderboardPlugin");var Ts=Ms,Df=Ts,If=Df;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var Ns=/*#__PURE__*/function(){function Ns(){_class_call_check(this,Ns),_define_property(this,"es",void 0)}return _create_class(Ns,[{key:"setAPIHost",value:function setAPIHost(e){this.es=e}},{key:"getAPIHost",value:function getAPIHost(){return this.es}}]),Ns}();a(Ns,"BaseAPI");var Os=Ns,Ef=Os,Lf=Ludex.Utils,_s=/*#__PURE__*/function(Ef){function _s(){return _class_call_check(this,_s),_call_super(this,_s,arguments)}return _inherits(_s,Ef),_create_class(_s,[{key:"createSingleMatchAsync",value:function createSingleMatchAsync(e){return _async_to_generator(function(){var t;return _ts_generator(this,function(_state){switch(_state.label){case 0:return[4,Ae("single-matches",e,{},this.getAPIHost())];case 1:return t=_state.sent(),[2,this.ee(t)]}})}).call(this)}},{key:"getSingleMatchDetailAsync",value:function getSingleMatchDetailAsync(){return _async_to_generator(function(){var e;return _ts_generator(this,function(_state){switch(_state.label){case 0:return[4,qe("single-matches/active",{},this.getAPIHost())];case 1:return e=_state.sent(),[2,this.ee(e)]}})}).call(this)}},{key:"updateSingleMatchMoveAsync",value:function updateSingleMatchMoveAsync(e,t){return _async_to_generator(function(){var o;return _ts_generator(this,function(_state){switch(_state.label){case 0:return[4,Ae("single-matches/".concat(e,"/move"),t,{},this.getAPIHost())];case 1:return o=_state.sent(),[2,this.ee(o)]}})}).call(this)}},{key:"finishSingleMatchAsync",value:function finishSingleMatchAsync(e){return _async_to_generator(function(){var r;return _ts_generator(this,function(_state){switch(_state.label){case 0:return[4,Ae("single-matches/".concat(e,"/finish"),{},{},this.getAPIHost())];case 1:return r=_state.sent(),[2,this.ee(r)]}})}).call(this)}},{key:"createMatchAsync",value:function createMatchAsync(e){return _async_to_generator(function(){var t;return _ts_generator(this,function(_state){switch(_state.label){case 0:return[4,Ae("matches",e,{},this.getAPIHost())];case 1:return t=_state.sent(),[2,this.ee(t)]}})}).call(this)}},{key:"joinMatchAsync",value:function joinMatchAsync(e){return _async_to_generator(function(){var r;return _ts_generator(this,function(_state){switch(_state.label){case 0:return[4,Ae("matches/".concat(e,"/join"),{},{},this.getAPIHost())];case 1:return r=_state.sent(),[2,this.ee(r)]}})}).call(this)}},{key:"getMatchDetailByIdAsync",value:function getMatchDetailByIdAsync(e){return _async_to_generator(function(){var r;return _ts_generator(this,function(_state){switch(_state.label){case 0:return[4,qe("matches/".concat(e),{},this.getAPIHost())];case 1:return r=_state.sent(),[2,this.ee(r)]}})}).call(this)}},{key:"finishMatchAsync",value:function finishMatchAsync(e){return _async_to_generator(function(){var tmp,t,tmp1,r,tmp2,o,tmp3,w,D;return _ts_generator(this,function(_state){switch(_state.label){case 0:return t=void 0===(tmp=e.matchId)?"":tmp,r=void 0===(tmp1=e.score)?0:tmp1,o=void 0===(tmp2=e.level)?0:tmp2,w=void 0===(tmp3=e.extraData)?{}:tmp3,[4,Ae("matches/".concat(t,"/finish"),{matchId:t,score:r,level:o,extraData:w},{},this.getAPIHost())];case 1:return D=_state.sent(),[2,this.ee(D)]}})}).call(this)}},{key:"ee",value:function ee(e){var _e_data;return Lf.Valid.isObject(e)&&Lf.Object.hasOwn(e,"data")&&null!=(_e_data=e.data)?_e_data:{}}}]),_s}(Ef);a(_s,"MatchAPI");var Rs=_s,Cf=Rs,Gs=/*#__PURE__*/function(){function Gs(e){_class_call_check(this,Gs),_define_property(this,"gt",void 0),this.qr(),this.setAPIConfig(e)}return _create_class(Gs,[{key:"qr",value:function qr(){this.gt=new Cf}},{key:"setAPIConfig",value:function setAPIConfig(e){e.matchAPIHost&&this.gt.setAPIHost(e.matchAPIHost)}},{key:"setMatchAPIInstance",value:function setMatchAPIInstance(e){this.gt=e}},{key:"getMatchAPI",value:function getMatchAPI(){return this.gt}}]),Gs}();a(Gs,"APIHandler");var ks=Gs,Tf=ks;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var Bs=/*#__PURE__*/function(){function Bs(e,t){_class_call_check(this,Bs),_define_property(this,"codex",void 0),_define_property(this,"match",void 0),this.codex=e,this.match=t}return _create_class(Bs,[{key:"u",value:function u(e){this.match.useCPUProfile}},{key:"p",value:function p(){this.match.useCPUProfile}},{key:"processAsync",value:function processAsync(e){return _async_to_generator(function(){return _ts_generator(this,function(_state){throw Error("Not implemented")})})()}}]),Bs}();a(Bs,"BaseConcrete");var Fs=Bs,G=Fs;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var _Ludex_Utils20=Ludex.Utils,rv=_Ludex_Utils20.Object,nr=_Ludex_Utils20.Valid,nv=_Ludex_Utils20.Json,Vs=/*#__PURE__*/function(){function Vs(e){_class_call_check(this,Vs),_define_property(this,"r",void 0),_define_property(this,"te",void 0),_define_property(this,"Se",void 0),_define_property(this,"Ke",void 0),this.r=e.codex,this.te=e.match,this.Se=null,this.Ke={Before:null,After:null}}return _create_class(Vs,[{key:"setNext",value:function setNext(e){return this.Se=e,e}},{key:"processAsync",value:function processAsync(e){return _async_to_generator(function(){return _ts_generator(this,function(_state){return this.ts("Before",e),[2]})}).call(this)}},{key:"s",value:function s(e){return _async_to_generator(function(){var _tmp;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(this.ts("After",e),this.Qr(),!(_tmp=this.Se))return[3,2];return[4,this.Se.processAsync(e)];case 1:_tmp=_state.sent(),_state.label=2;case 2:return[2]}})}).call(this)}},{key:"ts",value:function ts(e,t){if(nr.isDebugger()){this.Ke[e]=nv.clone(t);var r=t,o=r.profiles,w=r.customData,I=_n(r,["profiles","customData"])}}},{key:"Qr",value:function Qr(){var _this_Ke=this.Ke,e=_this_Ke.After,t=_this_Ke.Before;if(e&&t){var r=rv.diff(t,e);if(!nr.isEmpty(r)){var o=r,tmp=o.profiles,w=void 0===tmp?{}:tmp,tmp1=o.customData,I=void 0===tmp1?{}:tmp1,D=_n(o,["profiles","customData"]);nr.isEmpty(D),nr.isEmpty(w),nr.isEmpty(I)}this.Ke.After=null,this.Ke.Before=null}}}]),Vs}();a(Vs,"BaseHandler");var Us=Vs,M=Us,Hs=/*#__PURE__*/function(M){function Hs(){return _class_call_check(this,Hs),_call_super(this,Hs,arguments)}return _inherits(Hs,M),_create_class(Hs,[{key:"processAsync",value:function processAsync(e){return _async_to_generator(function(){return _ts_generator(this,function(_state){switch(_state.label){case 0:return[4,this.s(e)];case 1:return _state.sent(),[2]}})}).call(this)}},{key:"s",value:function s(e){return _async_to_generator(function(){var _tmp;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(!(_tmp=this.Se))return[3,2];return[4,this.Se.processAsync(e)];case 1:_tmp=_state.sent(),_state.label=2;case 2:return[2]}})}).call(this)}}]),Hs}(M);a(Hs,"NothingHandler");var Ks=Hs,F=Ks;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var Ws=/*#__PURE__*/function(oe){function Ws(e){var _this;return _class_call_check(this,Ws),(_this=_call_super(this,Ws,[e])).name="LevelNotDefined",_this.message=null!=e?e:"Level is not defined",_this}return _inherits(Ws,oe),Ws}(oe);a(Ws,"LevelNotDefined");var js=Ws,un=js;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var qs=/*#__PURE__*/function(oe){function qs(e){var _this;return _class_call_check(this,qs),(_this=_call_super(this,qs,[e])).name="MatchModeNotDefined",_this.message=null!=e?e:"Match id is not defined",_this}return _inherits(qs,oe),qs}(oe);a(qs,"MatchModeNotDefined");var zs=qs,Mt=zs,_Ludex_Plugins1=Ludex.Plugins,tmp=_Ludex_Plugins1.Analytics,_ref=void 0===tmp?{}:tmp,Mf=_ref.Events,_Ludex_Utils21=Ludex.Utils,Of=_Ludex_Utils21.String,Nf=_Ludex_Utils21.Valid,Js=/*#__PURE__*/function(M){function Js(){return _class_call_check(this,Js),_call_super(this,Js,arguments)}return _inherits(Js,M),_create_class(Js,[{key:"processAsync",value:function processAsync(e){var _this=this,_this1=this,_superprop_get_processAsync=function(){return _get(_get_prototype_of(Js.prototype),"processAsync",_this)};return _async_to_generator(function(){var t,o,w;return _ts_generator(this,function(_state){switch(_state.label){case 0:return _superprop_get_processAsync().call(_this1,e),t=e.mode,o=e.customData.level,this.Ve(t),this.ia(o),w=this.r.analytics,Mf&&w.event(Mf.MATCH_START,{level:o,game_mode:Of.toUpperCamelCase(t),level_name:this.oa(o)}),[4,this.s(e)];case 1:return _state.sent(),[2]}})}).call(this)}},{key:"Ve",value:function Ve(e){if(!Nf.isString(e))throw new Mt}},{key:"ia",value:function ia(e){if(!Nf.isNumber(e))throw new un}},{key:"oa",value:function oa(e){return"Level ".concat(Of.padStart(e.toString(),5,"0"))}}]),Js}(M);a(Js,"LogMatchStartHandler");var Ys=Js,Z=Ys;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var av={OPEN:"open",ACTIVE:"active",FINISHED:"finished"},Y=av,Xs=/*#__PURE__*/function(M){function Xs(){return _class_call_check(this,Xs),_call_super(this,Xs,arguments)}return _inherits(Xs,M),_create_class(Xs,[{key:"processAsync",value:function processAsync(e){var _this=this,_this1=this,_superprop_get_processAsync=function(){return _get(_get_prototype_of(Xs.prototype),"processAsync",_this)};return _async_to_generator(function(){var t,r,o;return _ts_generator(this,function(_state){switch(_state.label){case 0:return _superprop_get_processAsync().call(_this1,e),t=e.mode,r=e.status,o=null!=t?t:Ye.SINGLE,r===Y.FINISHED&&(o=Ye.SINGLE),this.Jr(o),[4,this.s(e)];case 1:return _state.sent(),[2]}})}).call(this)}},{key:"Jr",value:function Jr(e){this.r.storage.setStorageData("context","contextGameMode",e)}}]),Xs}(M);a(Xs,"ContextGameModeHandler");var Qs=Xs,U=Qs;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var ei=/*#__PURE__*/function(Error1){function ei(e){var _this;return _class_call_check(this,ei),(_this=_call_super(this,ei,[e])).name="GetMatchDetailFailed",_this.message=null!=e?e:"Get match detail failed",_this}return _inherits(ei,Error1),ei}(_wrap_native_super(Error));a(ei,"GetMatchDetailFailed");var Zs=ei,Ot=Zs;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var ri=/*#__PURE__*/function(Error1){function ri(e){var _this;return _class_call_check(this,ri),(_this=_call_super(this,ri,[e])).name="MatchAreNotActive",_this.message=null!=e?e:"Match are not active",_this}return _inherits(ri,Error1),ri}(_wrap_native_super(Error));a(ri,"MatchAreNotActive");var ti=ri,pn=ti;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var ai=/*#__PURE__*/function(oe){function ai(e){var _this;return _class_call_check(this,ai),(_this=_call_super(this,ai,[e])).name="MatchIdNotValid",_this.message=null!=e?e:"Match id is not valid",_this}return _inherits(ai,oe),ai}(oe);a(ai,"MatchIdNotValid");var ni=ai,ie=ni;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var si=/*#__PURE__*/function(Error1){function si(e){var _this;return _class_call_check(this,si),(_this=_call_super(this,si,[e])).name="OpponentHasFinishedMatch",_this.message=e||"Opponent has finished match",_this}return _inherits(si,Error1),si}(_wrap_native_super(Error));a(si,"OpponentHasFinishedMatch");var oi=si,Rf=oi;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var ci=/*#__PURE__*/function(oe){function ci(e){var _this;return _class_call_check(this,ci),(_this=_call_super(this,ci,[e])).name="OpponentIdNotValid",_this.message=null!=e?e:"Opponent id is not valid",_this}return _inherits(ci,oe),ci}(oe);a(ci,"OpponentIdNotValid");var ii=ci,X=ii;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var di=/*#__PURE__*/function(Error1){function di(e){var _this;return _class_call_check(this,di),(_this=_call_super(this,di,[e])).name="PlayerNotCurrentInMatch",_this.message=null!=e?e:"The player is not currently in this match",_this}return _inherits(di,Error1),di}(_wrap_native_super(Error));a(di,"PlayerNotCurrentInMatch");var li=di,Nt=li;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var pi=/*#__PURE__*/function(Error1){function pi(e){var _this;return _class_call_check(this,pi),(_this=_call_super(this,pi,[e])).name="PlayerNotFinishedMatch",_this.message=e||"Player not finished match",_this}return _inherits(pi,Error1),pi}(_wrap_native_super(Error));a(pi,"PlayerNotFinishedMatch");var ui=pi,mn=ui,ov=Ludex.Dtos,_Ludex_Utils22=Ludex.Utils,sv=_Ludex_Utils22.Object,hi=/*#__PURE__*/function(M){function hi(){return _class_call_check(this,hi),_call_super(this,hi,arguments)}return _inherits(hi,M),_create_class(hi,[{key:"processAsync",value:function processAsync(e){var _this=this,_this1=this,_superprop_get_processAsync=function(){return _get(_get_prototype_of(hi.prototype),"processAsync",_this)};return _async_to_generator(function(){var t,r;return _ts_generator(this,function(_state){switch(_state.label){case 0:return _superprop_get_processAsync().call(_this1,e),this.U(e),[4,this.We(e)];case 1:return t=_state.sent(),r=new ov.Match.Data(t).toObject(),this.Xr(e,r),this.O(e,r),this.Zr(e),this.ze(e),this.la(e),[4,this.s(e)];case 2:return _state.sent(),[2]}})}).call(this)}},{key:"U",value:function U(e){if("string"!=typeof e.id)throw new ie}},{key:"Zr",value:function Zr(e){if(e.status!==Y.ACTIVE)throw new pn}},{key:"Xr",value:function Xr(e,t){var r=e.id,o=e.customData,w=t._id,I=t.whitePlayerId,D=t.blackPlayerId;if("string"!=typeof w||w!==r)throw new Ot;var S=o.playerId,E=I===S,b=D===S;if(!E&&D===he.playerId)throw new Tt;if(!E&&!b)throw new Nt}},{key:"ze",value:function ze(e){var t=e.profiles,o=e.customData.playerId;if("string"!=typeof o)throw new B;if(!t[o].finished)throw new mn}},{key:"la",value:function la(e){var t=e.profiles,o=e.customData.opponentId;if("string"!=typeof o)throw new X;if(t[o].finished)throw new Rf}},{key:"We",value:function We(e){return _async_to_generator(function(){var t;return _ts_generator(this,function(_state){return[2,(t=e.id)?this.te.api.getMatchAPI().getMatchDetailByIdAsync(t):{}]})}).call(this)}},{key:"O",value:function O(e,t){this.F(e,t),this.k(e,t),this.j(e),this.pe(e,t)}},{key:"F",value:function F(e,t){var r=t.status,o=t.extraData;e.status=r,e.customData=sv.merge(e.customData,o)}},{key:"k",value:function k(e,t){var r=t.whitePlayerId,o=t.blackPlayerId,w=r===e.customData.playerId;e.customData.playerId=w?r:o,e.customData.opponentId=w?o:r}},{key:"j",value:function j(e){var _e_customData=e.customData,t=_e_customData.playerId,r=_e_customData.opponentId;if(t&&r){var o={name:"",photo:"",finished:!1};e.profiles[t]||(e.profiles[t]=N({id:t},o)),e.profiles[r]||(e.profiles[r]=N({id:r},o))}}},{key:"pe",value:function pe(e,t){var _e_customData=e.customData,r=_e_customData.playerId,o=_e_customData.opponentId;if(r&&o){var w=t.whitePlayerId,I=t.whitePlayerScore,D=t.whitePlayerFinish,S=t.blackPlayerScore,E=t.blackPlayerFinish,b=w===r;e.profiles[r].score=b?I:S,e.profiles[o].score=b?S:I,e.profiles[r].finished=b?D:E,e.profiles[o].finished=b?E:D}}}]),hi}(M);a(hi,"AwaitMatchHandler");var mi=hi,_f=mi;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var iv={level:1,rescued:0,contextId:null,playerId:null,opponentId:null,tournamentId:null,leaderboardId:null},Rt=iv,yi=/*#__PURE__*/function(M){function yi(e,t){var _this;return _class_call_check(this,yi),_define_property(_this=_call_super(this,yi,[e]),"e",void 0),_this.e=t,_this}return _inherits(yi,M),_create_class(yi,[{key:"processAsync",value:function processAsync(e){var _this=this,_this1=this,_superprop_get_processAsync=function(){return _get(_get_prototype_of(yi.prototype),"processAsync",_this)};return _async_to_generator(function(){return _ts_generator(this,function(_state){switch(_state.label){case 0:return _superprop_get_processAsync().call(_this1,e),this.en(e),[4,this.s(e)];case 1:return _state.sent(),[2]}})}).call(this)}},{key:"en",value:function en(e){var _this_e=this.e,t=_this_e.id,r=_this_e.mode,o=_this_e.customData;e.id=null!=t?t:null,e.mode=r||null,e.status=Y.OPEN,e.startAt=0,e.finishAt=0,e.profiles={},e.customData=N(N(N({},Rt),e.customData),o)}}]),yi}(M);a(yi,"PrepareMatchHandler");var fi=yi,J=fi;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var cv=le,Oe=cv;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var Pi=/*#__PURE__*/function(Error1){function Pi(e){var _this;return _class_call_check(this,Pi),(_this=_call_super(this,Pi,[e])).name="UnavailableFeature",_this.message="Unavailable feature: ".concat(e),_this}return _inherits(Pi,Error1),Pi}(_wrap_native_super(Error));a(Pi,"UnavailableFeature");var gi=Pi,K=gi;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var wi=/*#__PURE__*/function(oe){function wi(e){var _this;return _class_call_check(this,wi),(_this=_call_super(this,wi,[e])).name="ContextIdNotValid",_this.message=null!=e?e:"Context id is not valid",_this}return _inherits(wi,oe),wi}(oe);a(wi,"ContextIdNotValid");var xi=wi,te=xi;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var Ai=/*#__PURE__*/function(oe){function Ai(e){var _this;return _class_call_check(this,Ai),(_this=_call_super(this,Ai,[e])).name="ProfileNotFound",_this.message=null!=e?e:"Profile not found",_this}return _inherits(Ai,oe),Ai}(oe);a(Ai,"ProfileNotFound");var $i=Ai,H=$i,Si=/*#__PURE__*/function(M){function Si(){return _class_call_check(this,Si),_call_super(this,Si,arguments)}return _inherits(Si,M),_create_class(Si,[{key:"processAsync",value:function processAsync(e){var _this=this,_this1=this,_superprop_get_processAsync=function(){return _get(_get_prototype_of(Si.prototype),"processAsync",_this)};return _async_to_generator(function(){var t;return _ts_generator(this,function(_state){switch(_state.label){case 0:return _superprop_get_processAsync().call(_this1,e),this.o(e),[4,this.tn(e)];case 1:return(t=_state.sent())&&this.ye(e,t),[4,this.s(e)];case 2:return _state.sent(),[2]}})}).call(this)}},{key:"o",value:function o(e){var t=e.id,r=e.customData,o=r.contextId,w=r.opponentId;if(!t||"string"!=typeof t)throw new ie;if(!o||"string"!=typeof o)throw new te;if(!w||"string"!=typeof w)throw new X}},{key:"tn",value:function tn(e){return _async_to_generator(function(){var t,r,o,w,I,D,S,E,tmp,b,C,tmp1,R,_tmp,e1;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(_state.trys.push([0,4,,5]),t=this.r.frameCapture,r=e.profiles,w=(o=e.customData).playerId,I=o.opponentId,!w||!I||(D=r[w],S=r[I],!D||!S)||(E=D.photo,b=void 0===(tmp=D.score)?0:tmp,!D.finished))return[2,null];if(C=S.photo,R=void 0===(tmp1=S.score)?0:tmp1,!S.finished)return[3,1];return _tmp=null,[3,3];case 1:return[4,t.renderAsync("result-challenge",{playerId:w,playerPhoto:E,playerScore:b,opponentId:I,opponentPhoto:C,opponentScore:R,isPlayerFinished:!0,isOpponentFinished:!1})];case 2:_tmp=_state.sent(),_state.label=3;case 3:return[2,_tmp];case 4:return e1=_state.sent(),[2,null];case 5:return[2]}})}).call(this)}},{key:"ye",value:function ye(e,t){return _async_to_generator(function(){var r,o,w,I,D,S,E,b;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(r=e.id,o=e.profiles,I=(w=e.customData).playerId,D=w.opponentId,!I||"string"!=typeof I)throw new B;if(!("updateAsync"in GameSDK.extra))throw new K("updateAsync");if(!(S=o[I]))throw new H;return E=S.name,b={data:{type:Oe.CHALLENGE_FRIEND,matchId:r,playerId:I,opponentId:D},action:"CUSTOM",template:"challenge",cta:{default:"Play",localizations:{vi_VN:"Chi ngay"}},text:{default:"".concat(E," is waiting for you to finish this game. Play now!"),localizations:{vi_VN:"".concat(E," ang ch bn kt th\xfac trn u. Chi ngay!")}},image:t,strategy:"LAST",notification:"PUSH"},[4,GameSDK.extra.updateAsync(b)];case 1:return _state.sent(),[2]}})})()}}]),Si}(M);a(Si,"SendAwaitingMessageHandler");var vi=Si,kf=vi;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var lv=Ludex.Dtos,Di=/*#__PURE__*/function(M){function Di(){return _class_call_check(this,Di),_call_super(this,Di,arguments)}return _inherits(Di,M),_create_class(Di,[{key:"processAsync",value:function processAsync(e){var _this=this,_this1=this,_superprop_get_processAsync=function(){return _get(_get_prototype_of(Di.prototype),"processAsync",_this)};return _async_to_generator(function(){var t,r,o,w,I,D;return _ts_generator(this,function(_state){switch(_state.label){case 0:return _superprop_get_processAsync().call(_this1,e),this.o(e),r=(t=e.customData).playerId,o=t.opponentId,w=r,[4,this.as(w)];case 1:if(!(I=_state.sent()))throw new H;if(this.ca(e,w,I),(w=o)===he.playerId)return[3,3];return[4,this.as(w)];case 2:if(!(D=_state.sent()))throw new H;return this.ca(e,w,D),[3,4];case 3:this.ca(e,w),_state.label=4;case 4:return[4,this.s(e)];case 5:return _state.sent(),[2]}})}).call(this)}},{key:"o",value:function o(e){var t=e.customData,r=t.playerId,o=t.opponentId;if(!r||"string"!=typeof r)throw new B;if(!o||"string"!=typeof o)throw new X}},{key:"as",value:function as(e){return _async_to_generator(function(){var t;return _ts_generator(this,function(_state){switch(_state.label){case 0:return[4,(t=this.r.profile).requestProfiles([e])];case 1:return[2,(_state.sent(),t.getProfiles()[e])]}})}).call(this)}},{key:"ca",value:function ca(e,t,r){var _ref=null!=r?r:he,o=_ref.name,w=_ref.photo,I=new lv.Match.Profile({id:t,name:o,photo:w}).toObject();e.profiles[t]?(e.profiles[t].name=I.name,e.profiles[t].photo=I.photo):e.profiles[t]=I}}]),Di}(M);a(Di,"GetMatchProfilesHandler");var bi=Di,ge=bi,Ei=/*#__PURE__*/function(G){function Ei(){return _class_call_check(this,Ei),_call_super(this,Ei,arguments)}return _inherits(Ei,G),_create_class(Ei,[{key:"processAsync",value:function processAsync(e){return _async_to_generator(function(){var t,r,o,w,I,D,S,E,b,L,C;return _ts_generator(this,function(_state){switch(_state.label){case 0:return _state.trys.push([0,,2,3]),this.u(e),t=e.matchId,r=e.playerId,o=e.opponentId,w=new F(this),I=new J(this,{id:t,mode:q.CHALLENGE_FRIEND,customData:{playerId:r,opponentId:o}}),w.setNext(I),D=new _f(this),I.setNext(D),S=new ge(this),D.setNext(S),E=new kf(this),S.setNext(E),b=new Z(this),E.setNext(b),L=new U(this),b.setNext(L),C=this.match.getMatchState(),[4,w.processAsync(C)];case 1:return _state.sent(),[3,3];case 2:return this.p(),[7];case 3:return[2]}})}).call(this)}}]),Ei}(G);a(Ei,"AwaitChallengeMatchConcrete");var Ii=Ei,Gf=Ii;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var Ci=/*#__PURE__*/function(oe){function Ci(e){var _this;return _class_call_check(this,Ci),(_this=_call_super(this,Ci,[e])).name="CreateContextFailed",_this.message=null!=e?e:"Create context failed",_this}return _inherits(Ci,oe),Ci}(oe);a(Ci,"CreateContextFailed");var Li=Ci,_t=Li,_Ludex_Utils23=Ludex.Utils,Ff=_Ludex_Utils23.Valid,Bf=_Ludex_Utils23.Object,Mi=/*#__PURE__*/function(M){function Mi(e,t){var _this;return _class_call_check(this,Mi),_define_property(_this=_call_super(this,Mi,[e]),"e",void 0),_this.e=t,_this}return _inherits(Mi,M),_create_class(Mi,[{key:"processAsync",value:function processAsync(e){var _this=this,_this1=this,_superprop_get_processAsync=function(){return _get(_get_prototype_of(Mi.prototype),"processAsync",_this)};return _async_to_generator(function(){var t,r;return _ts_generator(this,function(_state){switch(_state.label){case 0:return _superprop_get_processAsync().call(_this1,e),t=this.e.opponentId,[4,this.an(t)];case 1:return r=_state.sent(),e.customData.contextId=r,[4,this.s(e)];case 2:return _state.sent(),[2]}})}).call(this)}},{key:"an",value:function an(e){return _async_to_generator(function(){var r,t;return _ts_generator(this,function(_state){switch(_state.label){case 0:return _state.trys.push([0,2,,3]),[4,GameSDK.context.createAsync(e)];case 1:return _state.sent(),[3,3];case 2:return r=_state.sent(),this.sn(r),[3,3];case 3:if(t=GameSDK.context.getID(),!Ff.isString(t))throw new _t;return[2,t]}})}).call(this)}},{key:"sn",value:function sn(e){if(!Bf.hasOwn(e,"code"))throw e;if("SAME_CONTEXT"!==e.code){if("INVALID_PARAM"===e.code){if(!this.rn(e))throw e;return}throw e}}},{key:"nn",value:function nn(e){if(!Bf.hasOwn(e,"message")||!Ff.isString(e.message))throw e}},{key:"rn",value:function rn(e){return this.nn(e),e.message.indexOf("is not a connected player of the current player")>-1}}]),Mi}(M);a(Mi,"CreateContextHandler");var Ti=Mi,Uf=Ti;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var Ni=/*#__PURE__*/function(oe){function Ni(e){var _this;return _class_call_check(this,Ni),(_this=_call_super(this,Ni,[e])).name="MatchAreNotOpen",_this.message=null!=e?e:"Match are not open",_this}return _inherits(Ni,oe),Ni}(oe);a(Ni,"MatchAreNotOpen");var Oi=Ni,rt=Oi,dv=Ludex.Dtos,_Ludex_Utils24=Ludex.Utils,uv=_Ludex_Utils24.Object,_i=/*#__PURE__*/function(M){function _i(e,t){var _this;return _class_call_check(this,_i),_define_property(_this=_call_super(this,_i,[e]),"e",void 0),_this.e=t,_this}return _inherits(_i,M),_create_class(_i,[{key:"processAsync",value:function processAsync(e){var _this=this,_this1=this,_superprop_get_processAsync=function(){return _get(_get_prototype_of(_i.prototype),"processAsync",_this)};return _async_to_generator(function(){var t,r;return _ts_generator(this,function(_state){switch(_state.label){case 0:return _superprop_get_processAsync().call(_this1,e),this.o(e),[4,this.ln(e)];case 1:return t=_state.sent(),r=new dv.Match.Data(t).toObject(),this.da(e,r),[4,this.s(e)];case 2:return _state.sent(),[2]}})}).call(this)}},{key:"o",value:function o(e){var t=e.status;if("string"!=typeof e.customData.opponentId)throw new X;if(t!==Y.OPEN)throw new rt}},{key:"ln",value:function ln(e){return _async_to_generator(function(){var t,r,o;return _ts_generator(this,function(_state){return(t=e.customData.opponentId,r=this.e.extraData,t)?(o={opponentPlayerId:t,extraData:r},[2,this.te.api.getMatchAPI().createMatchAsync(o)]):[2,{}]})}).call(this)}},{key:"da",value:function da(e,t){this.F(e,t),this.k(e,t),this.j(e),this.cn(e,t)}},{key:"F",value:function F(e,t){var r=t._id,o=t.extraData;e.id=r||null,e.customData=uv.merge(e.customData,o)}},{key:"k",value:function k(e,t){var r=t.whitePlayerId,o=t.blackPlayerId,I=r===e.customData.opponentId,D=I?o:r,S=I?r:o;e.customData.playerId=D,e.customData.opponentId=S}},{key:"j",value:function j(e){var _e_customData=e.customData,t=_e_customData.playerId,r=_e_customData.opponentId;if(t&&r){var o={name:"",photo:"",finished:!1};e.profiles[t]||(e.profiles[t]=N({id:t},o)),e.profiles[r]||(e.profiles[r]=N({id:r},o))}}},{key:"cn",value:function cn(e,t){var _e_customData=e.customData,r=_e_customData.playerId,o=_e_customData.opponentId;if(r&&o){var w=t.whitePlayerId,I=t.whitePlayerFinish,D=t.blackPlayerFinish,S=w===e.customData.opponentId,E=S?D:I,b=S?I:D;e.profiles[r].finished=E,e.profiles[o].finished=b}}}]),_i}(M);a(_i,"CreateMatchHandler");var Ri=_i,hn=Ri;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var Gi=/*#__PURE__*/function(M){function Gi(){return _class_call_check(this,Gi),_call_super(this,Gi,arguments)}return _inherits(Gi,M),_create_class(Gi,[{key:"processAsync",value:function processAsync(e){var _this=this,_this1=this,_superprop_get_processAsync=function(){return _get(_get_prototype_of(Gi.prototype),"processAsync",_this)};return _async_to_generator(function(){return _ts_generator(this,function(_state){switch(_state.label){case 0:if(_superprop_get_processAsync().call(_this1,e),e.status!==Y.OPEN)throw new rt;return this.dn(e),[4,this.s(e)];case 1:return _state.sent(),[2]}})}).call(this)}},{key:"dn",value:function dn(e){e.status=Y.ACTIVE,e.startAt=Date.now()}}]),Gi}(M);a(Gi,"StartMatchHandler");var ki=Gi,re=ki;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var Bi=/*#__PURE__*/function(M){function Bi(){return _class_call_check(this,Bi),_call_super(this,Bi,arguments)}return _inherits(Bi,M),_create_class(Bi,[{key:"processAsync",value:function processAsync(e){var _this=this,_this1=this,_superprop_get_processAsync=function(){return _get(_get_prototype_of(Bi.prototype),"processAsync",_this)};return _async_to_generator(function(){var t;return _ts_generator(this,function(_state){switch(_state.label){case 0:return _superprop_get_processAsync().call(_this1,e),this.o(e),[4,this.hn(e)];case 1:return(t=_state.sent())&&this.ye(e,t),[4,this.s(e)];case 2:return _state.sent(),[2]}})}).call(this)}},{key:"o",value:function o(e){var t=e.id,r=e.customData,o=r.contextId,w=r.opponentId;if(!t||"string"!=typeof t)throw new ie;if(!o||"string"!=typeof o)throw new te;if(!w||"string"!=typeof w)throw new X}},{key:"hn",value:function hn(e){return _async_to_generator(function(){var t,r,o,w,I,D,S,E,tmp,b,L,tmp1,C,e1;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(_state.trys.push([0,2,,3]),t=this.r.frameCapture,r=e.profiles,w=(o=e.customData).playerId,I=o.opponentId,!w||!I||(D=r[w],S=r[I],!D||!S))return[2,null];return E=D.photo,b=void 0===(tmp=D.score)?0:tmp,L=S.photo,C=void 0===(tmp1=S.score)?0:tmp1,[4,t.renderAsync("result-challenge",{playerId:w,playerPhoto:E,playerScore:b,opponentId:I,opponentPhoto:L,opponentScore:C,isPlayerFinished:!1,isOpponentFinished:!1})];case 1:return[2,_state.sent()];case 2:return e1=_state.sent(),[2,null];case 3:return[2]}})}).call(this)}},{key:"ye",value:function ye(e,t){return _async_to_generator(function(){var r,o,w,I,D,S,E;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(r=e.id,o=e.profiles,I=(w=e.customData).playerId,D=w.opponentId,!I||"string"!=typeof I)throw new B;if(!("updateAsync"in GameSDK.extra))throw new K("updateAsync");return S=o[I].name,E={data:{type:Oe.CHALLENGE_FRIEND,matchId:r,playerId:I,opponentId:D},action:"CUSTOM",template:"challenge",cta:{default:"Play",localizations:{vi_VN:"Chi ngay"}},text:{default:"".concat(S," challenges you"),localizations:{vi_VN:"".concat(S," th th\xe1ch bn trong trn u n\xe0y. Chi ngay!")}},image:t,strategy:"IMMEDIATE",notification:"PUSH"},[4,GameSDK.extra.updateAsync(E)];case 1:return _state.sent(),[2]}})})()}}]),Bi}(M);a(Bi,"SendChallengeMessageHandler");var Fi=Bi,fn=Fi,Vi=/*#__PURE__*/function(G){function Vi(){return _class_call_check(this,Vi),_call_super(this,Vi,arguments)}return _inherits(Vi,G),_create_class(Vi,[{key:"processAsync",value:function processAsync(e){return _async_to_generator(function(){var t,r,o,w,I,D,S,E,b,L,C,R,$;return _ts_generator(this,function(_state){switch(_state.label){case 0:return _state.trys.push([0,,2,3]),this.u(e),t=e.playerId,r=e.opponentId,o=e.extraData,w=new F(this),I=new Uf(this,{opponentId:r}),w.setNext(I),D=new J(this,{mode:q.CHALLENGE_FRIEND,customData:{playerId:t,opponentId:r}}),I.setNext(D),S=new hn(this,{extraData:o}),D.setNext(S),E=new ge(this),S.setNext(E),b=new re(this),E.setNext(b),L=new Z(this),b.setNext(L),C=new fn(this),L.setNext(C),R=new U(this),C.setNext(R),$=this.match.getMatchState(),[4,w.processAsync($)];case 1:return _state.sent(),[3,3];case 2:return this.p(),[7];case 3:return[2]}})}).call(this)}}]),Vi}(G);a(Vi,"ChallengeFriendConcrete");var Ui=Vi,Vf=Ui;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var ji=/*#__PURE__*/function(Error1){function ji(e){var _this;return _class_call_check(this,ji),(_this=_call_super(this,ji,[e])).name="ContextNotValid",_this.message=null!=e?e:"Context is not valid",_this}return _inherits(ji,Error1),ji}(_wrap_native_super(Error));a(ji,"ContextNotValid");var Ki=ji,Hi=Ki;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var zi=/*#__PURE__*/function(Error1){function zi(e){var _this;return _class_call_check(this,zi),(_this=_call_super(this,zi,[e])).name="SameContext",_this.message=null!=e?e:"Same context",_this}return _inherits(zi,Error1),zi}(_wrap_native_super(Error));a(zi,"SameContext");var Wi=zi,yn=Wi,Kf=Ludex.Utils,Yi=/*#__PURE__*/function(M){function Yi(e,t){var _this;return _class_call_check(this,Yi),_define_property(_this=_call_super(this,Yi,[e]),"e",void 0),_this.e=t,_this}return _inherits(Yi,M),_create_class(Yi,[{key:"processAsync",value:function processAsync(e){var _this=this,_this1=this,_superprop_get_processAsync=function(){return _get(_get_prototype_of(Yi.prototype),"processAsync",_this)};return _async_to_generator(function(){var t;return _ts_generator(this,function(_state){switch(_state.label){case 0:return _superprop_get_processAsync().call(_this1,e),t=this.e.contextId,[4,this.un(t)];case 1:return _state.sent(),e.customData.contextId=t,[4,this.s(e)];case 2:return _state.sent(),[2]}})}).call(this)}},{key:"ge",value:function ge(e){var t="SOLO"===e,r=GameSDK.context.getID();if(r===e||t&&null===r)throw new yn}},{key:"pn",value:function pn(e){var t=GameSDK.context.getID();if("SOLO"===e&&(null!==t||""!==t))throw new Hi}},{key:"un",value:function un(e){return _async_to_generator(function(){var t,r;return _ts_generator(this,function(_state){switch(_state.label){case 0:t="SOLO"===e,_state.label=1;case 1:return _state.trys.push([1,3,,4]),this.ge(e),this.pn(e),[4,GameSDK.context.switchAsync(e,t)];case 2:return _state.sent(),[3,4];case 3:if(_instanceof(r=_state.sent(),yn)||_instanceof(r,Hi))return[2];if(!Kf.Object.hasOwn(r,"code"))throw r;if(Kf.Device.isAndroid()&&t&&"INVALID_PARAM"===r.code)return[2];if("SAME_CONTEXT"!==r.code)throw r;return[3,4];case 4:return[2]}})}).call(this)}}]),Yi}(M);a(Yi,"SwitchContextHandler");var qi=Yi,nt=qi;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var pv=Ludex.Dtos,_Ludex_Utils25=Ludex.Utils,mv=_Ludex_Utils25.Object,Qi=/*#__PURE__*/function(M){function Qi(){return _class_call_check(this,Qi),_call_super(this,Qi,arguments)}return _inherits(Qi,M),_create_class(Qi,[{key:"processAsync",value:function processAsync(e){var _this=this,_this1=this,_superprop_get_processAsync=function(){return _get(_get_prototype_of(Qi.prototype),"processAsync",_this)};return _async_to_generator(function(){var t,r;return _ts_generator(this,function(_state){switch(_state.label){case 0:return _superprop_get_processAsync().call(_this1,e),this.U(e),[4,this.We(e)];case 1:return t=_state.sent(),r=new pv.Match.Data(t).toObject(),this.yn(e,r),this.O(e,r),this.ze(e),[4,this.s(e)];case 2:return _state.sent(),[2]}})}).call(this)}},{key:"U",value:function U(e){var t=e.id,r=e.status;if("string"!=typeof t)throw new ie;if(r!==Y.OPEN)throw new rt}},{key:"yn",value:function yn(e,t){var r=e.id,o=e.customData,w=t._id,I=t.whitePlayerId,D=t.blackPlayerId;if("string"!=typeof w||w!==r)throw new Ot;var S=o.playerId,E=I===S,b=D===S;if(!E&&D===he.playerId)throw new Tt;if(!E&&!b)throw new Nt}},{key:"ze",value:function ze(e){var t=e.profiles,o=e.customData.playerId;if("string"!=typeof o)throw new B;if(t[o].finished)throw new tn}},{key:"We",value:function We(e){return _async_to_generator(function(){var t;return _ts_generator(this,function(_state){return[2,(t=e.id)?this.te.api.getMatchAPI().getMatchDetailByIdAsync(t):{}]})}).call(this)}},{key:"O",value:function O(e,t){this.F(e,t),this.k(e,t),this.j(e),this.pe(e,t)}},{key:"F",value:function F(e,t){var r=t.extraData;e.customData=mv.merge(e.customData,r)}},{key:"k",value:function k(e,t){var r=t.whitePlayerId,o=t.blackPlayerId,w=r===e.customData.playerId;e.customData.playerId=w?r:o,e.customData.opponentId=w?o:r}},{key:"j",value:function j(e){var _e_customData=e.customData,t=_e_customData.playerId,r=_e_customData.opponentId;if(t&&r){var o={name:"",photo:"",finished:!1};e.profiles[t]||(e.profiles[t]=N({id:t},o)),e.profiles[r]||(e.profiles[r]=N({id:r},o))}}},{key:"pe",value:function pe(e,t){var _e_customData=e.customData,r=_e_customData.playerId,o=_e_customData.opponentId;if(r&&o){var w=t.whitePlayerId,I=t.whitePlayerScore,D=t.whitePlayerFinish,S=t.blackPlayerScore,E=t.blackPlayerFinish,b=w===r;e.profiles[r].score=b?I:S,e.profiles[o].score=b?S:I,e.profiles[r].finished=b?D:E,e.profiles[o].finished=b?E:D}}}]),Qi}(M);a(Qi,"ContinueMatchHandler");var Ji=Qi,Hf=Ji;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var Zi=/*#__PURE__*/function(M){function Zi(e,t){var _this;return _class_call_check(this,Zi),_define_property(_this=_call_super(this,Zi,[e]),"e",void 0),_this.e=t,_this}return _inherits(Zi,M),_create_class(Zi,[{key:"processAsync",value:function processAsync(e){var _this=this,_this1=this,_superprop_get_processAsync=function(){return _get(_get_prototype_of(Zi.prototype),"processAsync",_this)};return _async_to_generator(function(){var t;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(_superprop_get_processAsync().call(_this1,e),!this.e.ignore)return[3,2];return[4,this.s(e)];case 1:case 4:return _state.sent(),[2];case 2:return this.o(e),[4,this.mn(e)];case 3:return(t=_state.sent())&&this.ye(e,t),[4,this.s(e)]}})}).call(this)}},{key:"o",value:function o(e){var t=e.id,r=e.customData,o=r.contextId,w=r.opponentId;if(!t||"string"!=typeof t)throw new ie;if(!o||"string"!=typeof o)throw new te;if(!w||"string"!=typeof w)throw new X}},{key:"mn",value:function mn(e){return _async_to_generator(function(){var _this_r,t,r,_t_getPlayer,o,w,I,D,S,e1;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(_state.trys.push([0,2,,3]),t=(_this_r=this.r).player,r=_this_r.frameCapture,o=(_t_getPlayer=t.getPlayer()).playerId,w=_t_getPlayer.photo,null==(I=e.customData.opponentId)||!(D=e.profiles[I]))return[2,null];return S=D.photo,[4,r.renderAsync("update-challenge",{playerId:o,playerPhoto:w,opponentId:I,opponentPhoto:S})];case 1:return[2,_state.sent()];case 2:return e1=_state.sent(),[2,null];case 3:return[2]}})}).call(this)}},{key:"ye",value:function ye(e,t){return _async_to_generator(function(){var r,o,w,I,D,S,E,b;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(r=e.id,o=e.profiles,I=(w=e.customData).playerId,D=w.opponentId,!I||"string"!=typeof I)throw new B;if(!("updateAsync"in GameSDK.extra))throw new K("updateAsync");if(!(S=o[I]))throw new H;if(E=S.name,b={data:{type:Oe.CHALLENGE_FRIEND,matchId:r,playerId:I,opponentId:D},action:"CUSTOM",template:"challenge",cta:{default:"Play",localizations:{vi_VN:"Chi ngay"}},text:{default:"".concat(E," made an update."),localizations:{vi_VN:"".concat(E," \xe3 cp nht trn u. Chi ngay!")}},image:t,strategy:"LAST",notification:"PUSH"},!("updateAsync"in GameSDK.extra))throw new K("updateAsync");return[4,GameSDK.extra.updateAsync(b)];case 1:return _state.sent(),[2]}})})()}}]),Zi}(M);a(Zi,"SendUpdateMessageHandler");var Xi=Zi,jf=Xi,tc=/*#__PURE__*/function(G){function tc(){return _class_call_check(this,tc),_call_super(this,tc,arguments)}return _inherits(tc,G),_create_class(tc,[{key:"processAsync",value:function processAsync(e){return _async_to_generator(function(){var t,r,o,w,tmp,I,D,S,E,b,L,C,R,$,z,k;return _ts_generator(this,function(_state){switch(_state.label){case 0:return _state.trys.push([0,,2,3]),this.u(e),t=e.contextId,r=e.matchId,o=e.playerId,w=e.opponentId,I=void 0===(tmp=e.sendUpdateMessage)||tmp,D=new F(this),S=new nt(this,{contextId:t}),D.setNext(S),E=new J(this,{id:r,mode:q.CHALLENGE_FRIEND,customData:{playerId:o,opponentId:w}}),S.setNext(E),b=new Hf(this),E.setNext(b),L=new ge(this),b.setNext(L),C=new re(this),L.setNext(C),R=new jf(this,{ignore:!I}),C.setNext(R),$=new Z(this),R.setNext($),z=new U(this),$.setNext(z),k=this.match.getMatchState(),[4,D.processAsync(k)];case 1:return _state.sent(),[3,3];case 2:return this.p(),[7];case 3:return[2]}})}).call(this)}}]),tc}(G);a(tc,"ContinueChallengeMatchConcrete");var ec=tc,Wf=ec;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var _Ludex_Plugins2=Ludex.Plugins,tmp1=_Ludex_Plugins2.Analytics,_ref1=void 0===tmp1?{}:tmp1,zf=_ref1.Events,_Ludex_Utils26=Ludex.Utils,qf=_Ludex_Utils26.String,Yf=_Ludex_Utils26.Valid,nc=/*#__PURE__*/function(M){function nc(){return _class_call_check(this,nc),_call_super(this,nc,arguments)}return _inherits(nc,M),_create_class(nc,[{key:"processAsync",value:function processAsync(e){var _this=this,_this1=this,_superprop_get_processAsync=function(){return _get(_get_prototype_of(nc.prototype),"processAsync",_this)};return _async_to_generator(function(){var t,r,o,w,I,D,S;return _ts_generator(this,function(_state){switch(_state.label){case 0:return _superprop_get_processAsync().call(_this1,e),t=e.customData,r=e.mode,o=e.startAt,w=e.finishAt,I=t.level,this.Ve(r),this.ia(I),D=Math.floor((w-o)/1e3),S=this.r.analytics,zf&&S.event(zf.MATCH_END,{level:I,game_mode:qf.toUpperCamelCase(r),level_name:this.oa(I),time_played:D}),[4,this.s(e)];case 1:return _state.sent(),[2]}})}).call(this)}},{key:"Ve",value:function Ve(e){if(!Yf.isString(e))throw new Mt}},{key:"ia",value:function ia(e){if(!Yf.isNumber(e))throw new un}},{key:"oa",value:function oa(e){return"Level ".concat(qf.padStart(e.toString(),5,"0"))}}]),nc}(M);a(nc,"LogMatchFinishedHandler");var rc=nc,Ue=rc;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var oc=/*#__PURE__*/function(Error1){function oc(e){var _this;return _class_call_check(this,oc),(_this=_call_super(this,oc,[e])).name="LeaderboardNotExist",_this.message=null!=e?e:"Leaderboard not exist in game",_this}return _inherits(oc,Error1),oc}(_wrap_native_super(Error));a(oc,"LeaderboardNotExist");var ac=oc,gn=ac;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var ic=/*#__PURE__*/function(Error1){function ic(e){var _this;return _class_call_check(this,ic),(_this=_call_super(this,ic,[e])).name="ScoreNotValid",_this.message=null!=e?e:"Score is not valid",_this}return _inherits(ic,Error1),ic}(_wrap_native_super(Error));a(ic,"ScoreNotValid");var sc=ic,kt=sc,_Ludex_Utils27=Ludex.Utils,hv=_Ludex_Utils27.Valid,_Ludex_Configs7=Ludex.Configs,_Ludex_Configs_Leaderboards=_Ludex_Configs7.Leaderboards,fv=_Ludex_Configs_Leaderboards.LeaderboardList,lc=/*#__PURE__*/function(M){function lc(e,t){var _this;return _class_call_check(this,lc),_define_property(_this=_call_super(this,lc,[e]),"e",void 0),_define_property(_this,"ss",void 0),_this.e={score:0,playerId:""},_this.ss=!!(null==t?void 0:t.ignore),_this}return _inherits(lc,M),_create_class(lc,[{key:"processAsync",value:function processAsync(e){var _this=this,_this1=this,_superprop_get_processAsync=function(){return _get(_get_prototype_of(lc.prototype),"processAsync",_this)};return _async_to_generator(function(){var _tmp,_iteratorNormalCompletion,_didIteratorError,_iteratorError,_iterator,_step,t,r,o;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(_superprop_get_processAsync().call(_this1,e),!this.ss)return[3,2];return[4,this.s(e)];case 1:return _state.sent(),[2];case 2:if(this.Ye(e),!(_tmp="submitGameResultsAsync"in GameSDK.extra))return[3,4];return[4,GameSDK.extra.submitGameResultsAsync(this.e.score)];case 3:_tmp=_state.sent(),_state.label=4;case 4:_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(_iterator=fv[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0)r=(t=_step.value).Id,o=t.Mode,e.mode&&this.gn(o,e.mode)&&this.ha(N({leaderboardId:r},this.e))}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return[4,this.s(e)];case 5:return _state.sent(),[2]}})}).call(this)}},{key:"gn",value:function gn1(e,t){return e===t}},{key:"Ye",value:function Ye(e){return _async_to_generator(function(){var t,o,w;return _ts_generator(this,function(_state){if(t=e.profiles,!(o=e.customData.playerId)||!t[o])throw new H;if(w=t[o].score,!hv.isNumber(w))throw new kt;return this.e={score:w,playerId:o},[2]})}).call(this)}},{key:"ha",value:function ha(e){return _async_to_generator(function(){var t,r,o,w,e1;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(_state.trys.push([0,2,,3]),t=e.playerId,r=e.score,o=e.leaderboardId,!(w=this.r.leaderboard.getLeaderboardName(o)))throw new gn;return[4,this.r.leaderboard.setLeaderboardScoreAsync(w,t,r)];case 1:return _state.sent(),[3,3];case 2:return e1=_state.sent(),[3,3];case 3:return[2]}})}).call(this)}}]),lc}(M);a(lc,"PostGlobalLeaderboardsScoreHandler");var cc=lc,at=cc;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var yv=Ludex.Dtos,gv=Ludex.Utils,Pn=gv.Valid,Pv=gv.Object,uc=/*#__PURE__*/function(M){function uc(e,t){var _this;return _class_call_check(this,uc),_define_property(_this=_call_super(this,uc,[e]),"e",void 0),_this.e=t,_this}return _inherits(uc,M),_create_class(uc,[{key:"processAsync",value:function processAsync(e){var _this=this,_this1=this,_superprop_get_processAsync=function(){return _get(_get_prototype_of(uc.prototype),"processAsync",_this)};return _async_to_generator(function(){var r,o;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(_superprop_get_processAsync().call(_this1,e),this.U(e),!this.e.useAPI)return[3,2];return[4,this.wn(e)];case 1:return r=_state.sent(),o=new yv.Match.Data(r).toObject(),this.xn(e,o),[3,3];case 2:this.O(e),_state.label=3;case 3:return this.da(e),[4,this.s(e)];case 4:return _state.sent(),[2]}})}).call(this)}},{key:"U",value:function U(e){var t=e.status,r=e.profiles,o=e.customData;if(t!==Y.ACTIVE)throw new pn;var w=o.playerId;if(!w||!Pv.hasOwn(r,w))throw new Nt}},{key:"O",value:function O(e){var t=e.customData.playerId;if(!Pn.isString(t))throw new B;e.profiles[t].finished=!0}},{key:"da",value:function da(e){e.status=Y.FINISHED,e.finishAt=Date.now()}},{key:"wn",value:function wn(e){return _async_to_generator(function(){var t,r,o,w,I,E;return _ts_generator(this,function(_state){if(t=e.id,r=e.profiles,w=(o=e.customData).level,I=o.playerId,!Pn.isString(I))throw new B;return E={matchId:null!=t?t:"",score:r[I].score,level:w,extraData:this.e.extraData},[2,this.te.api.getMatchAPI().finishMatchAsync(E)]})}).call(this)}},{key:"xn",value:function xn(e,t){var _e_customData=e.customData,r=_e_customData.playerId,o=_e_customData.opponentId;if(!Pn.isString(r))throw new B;if(!Pn.isString(o))throw new X;var w=t.whitePlayerId,I=t.whitePlayerScore,D=t.blackPlayerScore,S=t.whitePlayerFinish,E=t.blackPlayerFinish,b=r===w,L=b?I:D,C=b?D:I,R=b?S:E,$=b?E:S;e.profiles[r].score=L,e.profiles[o].score=C,e.profiles[r].finished=R,e.profiles[o].finished=$}}]),uc}(M);a(uc,"FinishMatchHandler");var dc=uc,Ve=dc;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var mc=/*#__PURE__*/function(M){function mc(){return _class_call_check(this,mc),_call_super(this,mc,arguments)}return _inherits(mc,M),_create_class(mc,[{key:"processAsync",value:function processAsync(e){var _this=this,_this1=this,_superprop_get_processAsync=function(){return _get(_get_prototype_of(mc.prototype),"processAsync",_this)};return _async_to_generator(function(){var t;return _ts_generator(this,function(_state){switch(_state.label){case 0:return _superprop_get_processAsync().call(_this1,e),this.o(e),[4,this.An(e)];case 1:return(t=_state.sent())&&this.vn(e,t),[4,this.s(e)];case 2:return _state.sent(),[2]}})}).call(this)}},{key:"o",value:function o(e){var t=e.id,r=e.customData,o=r.contextId,w=r.opponentId;if(!t||"string"!=typeof t)throw new ie;if(!o||"string"!=typeof o)throw new te;if(!w||"string"!=typeof w)throw new X}},{key:"An",value:function An(e){return _async_to_generator(function(){var t,r,o,w,I,D,S,E,tmp,b,L,C,tmp1,R,$,e1;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(_state.trys.push([0,2,,3]),t=this.r.frameCapture,r=e.profiles,w=(o=e.customData).playerId,I=o.opponentId,!w||!I||(D=r[w],S=r[I],!D||!S))return[2,null];return E=D.photo,b=void 0===(tmp=D.score)?0:tmp,L=D.finished,C=S.photo,R=void 0===(tmp1=S.score)?0:tmp1,$=S.finished,[4,t.renderAsync("result-challenge",{playerId:w,playerPhoto:E,playerScore:b,opponentId:I,opponentPhoto:C,opponentScore:R,isPlayerFinished:!!L,isOpponentFinished:!!$})];case 1:return[2,_state.sent()];case 2:return e1=_state.sent(),[2,null];case 3:return[2]}})}).call(this)}},{key:"vn",value:function vn(e,t){var r=e.profiles,o=e.customData,w=o.playerId,I=o.opponentId;if(!w||"string"!=typeof w)throw new B;if(!I||"string"!=typeof I)throw new X;if(!r[w]||!r[I])throw new H;var _r_w=r[w],tmp=_r_w.score,D=void 0===tmp?0:tmp,S=_r_w.finished,_r_I=r[I],tmp1=_r_I.score,E=void 0===tmp1?0:tmp1,b=_r_I.finished;S?this.Pn(e,t):b&&D>E?this.ua(e,t):this.In(e,t)}},{key:"Pn",value:function Pn(e,t){return _async_to_generator(function(){var r,o,w,I,D,S,E,b;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(r=e.id,o=e.profiles,I=(w=e.customData).playerId,D=w.opponentId,!I||"string"!=typeof I)throw new B;if(!("updateAsync"in GameSDK.extra))throw new K("updateAsync");if(!(S=o[I]))throw new H;if(E=S.name,b={data:{type:Oe.CHALLENGE_FRIEND,matchId:r,playerId:I,opponentId:D,status:Y.FINISHED},action:"CUSTOM",template:"finished",cta:{default:"See result",localizations:{vi_VN:"Xem kt qu"}},text:{default:"".concat(E," just finished. Check them now."),localizations:{vi_VN:"".concat(E," va ho\xe0n th\xe0nh m\xe0n chi. Nhn  xem kt qu trn u.")}},image:t,strategy:"IMMEDIATE",notification:"PUSH"},!("updateAsync"in GameSDK.extra))throw new K("updateAsync");return[4,GameSDK.extra.updateAsync(b)];case 1:return _state.sent(),[2]}})})()}},{key:"In",value:function In(e,t){return _async_to_generator(function(){var r,o,w,I,D,S,E,b,L;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(r=e.id,o=e.profiles,I=(w=e.customData).playerId,D=w.opponentId,!I||"string"!=typeof I)throw new B;if(!(S=o[I]))throw new H;if(E=S.name,b=S.score,L={data:{type:Oe.CHALLENGE_FRIEND,matchId:r,playerId:I,opponentId:D,status:Y.ACTIVE},action:"CUSTOM",template:"finished",cta:{default:"Play",localizations:{vi_VN:"Chi ngay"}},text:{default:"".concat(E," got ").concat(b," scores. So easy! Can you?"),localizations:{vi_VN:"".concat(E," \xe3 t ").concat(b," im! Nhn Chi  so t\xe0i!")}},image:t,strategy:"IMMEDIATE",notification:"PUSH"},!("updateAsync"in GameSDK.extra))throw new K("updateAsync");return[4,GameSDK.extra.updateAsync(L)];case 1:return _state.sent(),[2]}})})()}},{key:"ua",value:function ua(e,t){return _async_to_generator(function(){var r,o,w,I,D,S,E,b,L;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(r=e.id,o=e.profiles,I=(w=e.customData).playerId,D=w.opponentId,!I||"string"!=typeof I)throw new B;if(!(S=o[I]))throw new H;if(E=S.name,b=S.score,L={data:{type:Oe.CHALLENGE_FRIEND,matchId:r,playerId:I,opponentId:D,status:Y.FINISHED},action:"CUSTOM",template:"pass_score",cta:{default:"See result",localizations:{vi_VN:"Xem kt qu"}},text:{default:"".concat(E," beat your high score. Their score: ").concat(b),localizations:{vi_VN:"".concat(E," \xe3 vt qua im s ca bn, vi ").concat(b," im!")}},image:t,strategy:"IMMEDIATE",notification:"PUSH"},!("updateAsync"in GameSDK.extra))throw new K("updateAsync");return[4,GameSDK.extra.updateAsync(L)];case 1:return _state.sent(),[2]}})})()}}]),mc}(M);a(mc,"SendFinishedMessageHandler");var pc=mc,Jf=pc;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var fc=/*#__PURE__*/function(M){function fc(e,t){var _this;return _class_call_check(this,fc),_define_property(_this=_call_super(this,fc,[e]),"rs",void 0),_this.rs=!!(null==t?void 0:t.ignore),_this}return _inherits(fc,M),_create_class(fc,[{key:"processAsync",value:function processAsync(e){var _this=this,_this1=this,_superprop_get_processAsync=function(){return _get(_get_prototype_of(fc.prototype),"processAsync",_this)};return _async_to_generator(function(){return _ts_generator(this,function(_state){switch(_state.label){case 0:return _superprop_get_processAsync().call(_this1,e),this.Dn(e),[4,this.s(e)];case 1:return _state.sent(),[2]}})}).call(this)}},{key:"Dn",value:function Dn(e){if(!this.rs){var t=e.profiles,r=e.customData,o=r.playerId;if(!o||!t[o])throw new H;var _this_r=this.r,w=_this_r.player,I=w.getBestScore()||0,_t_o=t[o],tmp=_t_o.score,D=void 0===tmp?0:tmp;D<=I||(w.setBestScore(D),t[o].bestScore=D)}}}]),fc}(M);a(fc,"SetPlayerBestScoreHandler");var hc=fc,Ke=hc,gc=/*#__PURE__*/function(G){function gc(){return _class_call_check(this,gc),_call_super(this,gc,arguments)}return _inherits(gc,G),_create_class(gc,[{key:"processAsync",value:function processAsync(e){return _async_to_generator(function(){var t,r,o,w,I,D,S,E,b;return _ts_generator(this,function(_state){switch(_state.label){case 0:return _state.trys.push([0,,2,3]),this.u(e),t=(null!=e?e:{}).extraData,r=new F(this),o=new Ve(this,{useAPI:!0,extraData:t}),r.setNext(o),w=new Jf(this),o.setNext(w),I=new Ue(this),w.setNext(I),D=new Ke(this),I.setNext(D),S=new at(this),D.setNext(S),E=new U(this),S.setNext(E),b=this.match.getMatchState(),[4,r.processAsync(b)];case 1:return _state.sent(),[3,3];case 2:return this.p(),[7];case 3:return[2]}})}).call(this)}}]),gc}(G);a(gc,"FinishChallengeMatchConcrete");var yc=gc,Qf=yc;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var xc=/*#__PURE__*/function(Error1){function xc(e){var _this;return _class_call_check(this,xc),(_this=_call_super(this,xc,[e])).name="ContextAreSolo",_this.message=null!=e?e:"Context are solo",_this}return _inherits(xc,Error1),xc}(_wrap_native_super(Error));a(xc,"ContextAreSolo");var Pc=xc,Xf=Pc;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var $c=/*#__PURE__*/function(Error1){function $c(e){var _this;return _class_call_check(this,$c),(_this=_call_super(this,$c,[e])).name="ContextNotChallenge",_this.message=null!=e?e:"Context is not a challenge",_this}return _inherits($c,Error1),$c}(_wrap_native_super(Error));a($c,"ContextNotChallenge");var wc=$c,Zf=wc;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var vc=/*#__PURE__*/function(Error1){function vc(e){var _this;return _class_call_check(this,vc),(_this=_call_super(this,vc,[e])).name="NetworkFailure",_this.message=null!=e?e:"Network failure",_this}return _inherits(vc,Error1),vc}(_wrap_native_super(Error));a(vc,"NetworkFailure");var Ac=vc,ey=Ac,xv=Ludex.Utils,wv=Ludex.Dtos,$v=xv.Array,Av=xv.Object,bc=/*#__PURE__*/function(M){function bc(e,t){var _this;return _class_call_check(this,bc),_define_property(_this=_call_super(this,bc,[e]),"e",void 0),_this.e=t,_this}return _inherits(bc,M),_create_class(bc,[{key:"processAsync",value:function processAsync(e){var _this=this,_this1=this,_superprop_get_processAsync=function(){return _get(_get_prototype_of(bc.prototype),"processAsync",_this)};return _async_to_generator(function(){var t;return _ts_generator(this,function(_state){switch(_state.label){case 0:return _superprop_get_processAsync().call(_this1,e),this.Sn(),[4,this.En()];case 1:return t=_state.sent(),e.customData.opponentId=t,[4,this.s(e)];case 2:return _state.sent(),[2]}})}).call(this)}},{key:"Sn",value:function Sn(){var e=GameSDK.context.getID();if("string"!=typeof e)throw new te;if("SOLO"===e)throw new Xf}},{key:"En",value:function En(){return _async_to_generator(function(){var e,t,r;return _ts_generator(this,function(_state){switch(_state.label){case 0:return e=this.e.ignoreId,[4,this.bn([e])];case 1:if((t=_state.sent()).length>1)throw new Zf;return r=he,[2,(1===t.length&&(r=t[0]),r.playerId)]}})}).call(this)}},{key:"bn",value:function bn(e){return _async_to_generator(function(){var _$t,r,_iteratorNormalCompletion,_didIteratorError,_iteratorError,_iterator,_step,o,w,I,D,t;return _ts_generator(this,function(_state){switch(_state.label){case 0:return _state.trys.push([0,2,,3]),[4,GameSDK.context.getPlayersAsync()];case 1:_$t=_state.sent(),r=[],_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(_iterator=_$t[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0)w=(o=_step.value).getID(),!(e.indexOf(w)>-1)&&(I=o.getName())&&(D=o.getPhoto(),r.push(new wv.Player.Info({playerId:w,name:I,photo:D}).toObject()))}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return[2,$v.unique(r)];case 2:if(t=_state.sent(),Av.hasOwn(t,"code")&&"NETWORK_FAILURE"===t.code)throw new ey;return[2,[]];case 3:return[2]}})})()}}]),bc}(M);a(bc,"GetOpponentChallengeContextHandler");var Sc=bc,xn=Sc;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var Ic=/*#__PURE__*/function(Error1){function Ic(e){var _this;return _class_call_check(this,Ic),(_this=_call_super(this,Ic,[e])).name="ContextIsTournament",_this.message=null!=e?e:"Context is a tournament",_this}return _inherits(Ic,Error1),Ic}(_wrap_native_super(Error));a(Ic,"ContextIsTournament");var Dc=Ic,ar=Dc,_Ludex_Utils28=Ludex.Utils,vv=_Ludex_Utils28.Object,Lc=/*#__PURE__*/function(M){function Lc(){return _class_call_check(this,Lc),_call_super(this,Lc,arguments)}return _inherits(Lc,M),_create_class(Lc,[{key:"processAsync",value:function processAsync(e){var _this=this,_this1=this,_superprop_get_processAsync=function(){return _get(_get_prototype_of(Lc.prototype),"processAsync",_this)};return _async_to_generator(function(){var t;return _ts_generator(this,function(_state){switch(_state.label){case 0:return _superprop_get_processAsync().call(_this1,e),[4,this.Ln()];case 1:return t=_state.sent(),[4,this.On()];case 2:return _state.sent(),e.customData.contextId=t,[4,this.s(e)];case 3:return _state.sent(),[2]}})}).call(this)}},{key:"Ln",value:function Ln(){return _async_to_generator(function(){var t,e;return _ts_generator(this,function(_state){switch(_state.label){case 0:return _state.trys.push([0,2,,3]),[4,GameSDK.context.chooseAsync({filters:["INCLUDE_EXISTING_CHALLENGES"],minSize:2,maxSize:2})];case 1:return _state.sent(),[3,3];case 2:if(t=_state.sent(),!vv.hasOwn(t,"code")||"SAME_CONTEXT"!==t.code)throw t;return[3,3];case 3:if("string"!=typeof(e=GameSDK.context.getID()))throw new _t;return[2,e]}})})()}},{key:"On",value:function On(){return _async_to_generator(function(){var _tmp,e;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(_state.trys.push([0,4,,5]),!GameSDK.context.getID())return[2];if(!("getTournamentAsync"in GameSDK))return[3,2];return[4,GameSDK.getTournamentAsync()];case 1:return _state.sent(),_tmp=new ar,[3,3];case 2:_tmp=new K("getTournamentAsync"),_state.label=3;case 3:throw _tmp;case 4:if(_instanceof(e=_state.sent(),ar))throw e;return[3,5];case 5:return[2]}})})()}}]),Lc}(M);a(Lc,"ChooseContextHandler");var Ec=Lc,ty=Ec,Tc=/*#__PURE__*/function(G){function Tc(){return _class_call_check(this,Tc),_call_super(this,Tc,arguments)}return _inherits(Tc,G),_create_class(Tc,[{key:"processAsync",value:function processAsync(e){return _async_to_generator(function(){var t,r,o,w,I,D,S,E,b,L,C,R,$;return _ts_generator(this,function(_state){switch(_state.label){case 0:return _state.trys.push([0,,2,3]),this.u(e),t=e.playerId,r=e.extraData,o=new F(this),w=new ty(this),o.setNext(w),I=new J(this,{mode:q.CHALLENGE_FRIEND,customData:{playerId:t}}),w.setNext(I),D=new xn(this,{ignoreId:t}),I.setNext(D),S=new hn(this,{extraData:r}),D.setNext(S),E=new ge(this),S.setNext(E),b=new re(this),E.setNext(b),L=new Z(this),b.setNext(L),C=new fn(this),L.setNext(C),R=new U(this),C.setNext(R),$=this.match.getMatchState(),[4,o.processAsync($)];case 1:return _state.sent(),[3,3];case 2:return this.p(),[7];case 3:return[2]}})}).call(this)}}]),Tc}(G);a(Tc,"InviteFriendsConcrete");var Cc=Tc,ry=Cc;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var Oc=/*#__PURE__*/function(Error1){function Oc(e){var _this;return _class_call_check(this,Oc),(_this=_call_super(this,Oc,[e])).name="JoinMatchFailed",_this.message=null!=e?e:"Join match failed",_this}return _inherits(Oc,Error1),Oc}(_wrap_native_super(Error));a(Oc,"JoinMatchFailed");var Mc=Oc,ny=Mc;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var Rc=/*#__PURE__*/function(Error1){function Rc(e){var _this;return _class_call_check(this,Rc),(_this=_call_super(this,Rc,[e])).name="MatchAreFinished",_this.message=null!=e?e:"Match are finished",_this}return _inherits(Rc,Error1),Rc}(_wrap_native_super(Error));a(Rc,"MatchAreFinished");var Nc=Rc,ay=Nc;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var kc=/*#__PURE__*/function(Error1){function kc(e){var _this;return _class_call_check(this,kc),(_this=_call_super(this,kc,[e])).name="OtherPlayerHasJoinedMatch",_this.message=null!=e?e:"Other player has joined match",_this}return _inherits(kc,Error1),kc}(_wrap_native_super(Error));a(kc,"OtherPlayerHasJoinedMatch");var _c=kc,oy=_c,Sv=Ludex.Dtos,_Ludex_Utils29=Ludex.Utils,bv=_Ludex_Utils29.Object,Fc=/*#__PURE__*/function(M){function Fc(){return _class_call_check(this,Fc),_call_super(this,Fc,arguments)}return _inherits(Fc,M),_create_class(Fc,[{key:"processAsync",value:function processAsync(e){var _this=this,_this1=this,_superprop_get_processAsync=function(){return _get(_get_prototype_of(Fc.prototype),"processAsync",_this)};return _async_to_generator(function(){var t,r;return _ts_generator(this,function(_state){switch(_state.label){case 0:return _superprop_get_processAsync().call(_this1,e),this.U(e),[4,this._n(e)];case 1:return t=_state.sent(),r=new Sv.Match.Data(t).toObject(),this.Nn(e,r),this.O(e,r),[4,this.s(e)];case 2:return _state.sent(),[2]}})}).call(this)}},{key:"U",value:function U(e){if(e.status!==Y.OPEN)throw new rt}},{key:"Nn",value:function Nn(e,t){var r=e.id,o=e.customData,w=t._id,I=t.blackPlayerId,D=t.whitePlayerId,S=t.whitePlayerFinish,E=t.blackPlayerFinish,b=I===o.playerId,L=D===o.opponentId;if("string"!=typeof w||w!==r||!L)throw new ny;if(S&&E)throw new ay;if(!b)throw new oy}},{key:"_n",value:function _n(e){return _async_to_generator(function(){var t;return _ts_generator(this,function(_state){return[2,(t=e.id)?this.te.api.getMatchAPI().joinMatchAsync(t):{}]})}).call(this)}},{key:"O",value:function O(e,t){this.F(e,t),this.k(e,t),this.j(e),this.pe(e,t)}},{key:"F",value:function F(e,t){var r=t.extraData;e.customData=bv.merge(e.customData,r)}},{key:"k",value:function k(e,t){var r=t.whitePlayerId,o=t.blackPlayerId,I=r===e.customData.playerId,D=I?r:o,S=I?o:r;e.customData.playerId=D,e.customData.opponentId=S}},{key:"j",value:function j(e){var _e_customData=e.customData,t=_e_customData.playerId,r=_e_customData.opponentId;if(t&&r){var o={name:"",photo:"",finished:!1};e.profiles[t]||(e.profiles[t]=N({id:t},o)),e.profiles[r]||(e.profiles[r]=N({id:r},o))}}},{key:"pe",value:function pe(e,t){var _e_customData=e.customData,r=_e_customData.playerId,o=_e_customData.opponentId;if(r&&o){var w=t.whitePlayerId,I=t.whitePlayerScore,D=t.whitePlayerFinish,S=t.blackPlayerScore,E=t.blackPlayerFinish,b=w===e.customData.playerId;e.profiles[r].score=b?I:S,e.profiles[o].score=b?S:I,e.profiles[r].finished=b?D:E,e.profiles[o].finished=b?E:D}}}]),Fc}(M);a(Fc,"JoinMatchHandler");var Gc=Fc,sy=Gc;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var Uc=/*#__PURE__*/function(M){function Uc(){return _class_call_check(this,Uc),_call_super(this,Uc,arguments)}return _inherits(Uc,M),_create_class(Uc,[{key:"processAsync",value:function processAsync(e){var _this=this,_this1=this,_superprop_get_processAsync=function(){return _get(_get_prototype_of(Uc.prototype),"processAsync",_this)};return _async_to_generator(function(){var t;return _ts_generator(this,function(_state){switch(_state.label){case 0:return _superprop_get_processAsync().call(_this1,e),this.o(e),[4,this.Tn(e)];case 1:return(t=_state.sent())&&this.ye(e,t),[4,this.s(e)];case 2:return _state.sent(),[2]}})}).call(this)}},{key:"o",value:function o(e){var t=e.id,r=e.customData,o=r.contextId,w=r.opponentId;if(!t||"string"!=typeof t)throw new ie;if(!o||"string"!=typeof o)throw new te;if(!w||"string"!=typeof w)throw new X}},{key:"Tn",value:function Tn(e){return _async_to_generator(function(){var t,r,o,w,I,D,S,E,tmp,b,C,tmp1,R,_tmp,e1;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(_state.trys.push([0,4,,5]),t=this.r.frameCapture,r=e.profiles,w=(o=e.customData).playerId,I=o.opponentId,!w||!I||(D=r[w],S=r[I],!D||!S)||(E=D.photo,b=void 0===(tmp=D.score)?0:tmp,D.finished))return[2,null];if(C=S.photo,R=void 0===(tmp1=S.score)?0:tmp1,!S.finished)return[3,2];return[4,t.renderAsync("result-challenge",{playerId:w,playerPhoto:E,playerScore:b,opponentId:I,opponentPhoto:C,opponentScore:R,isPlayerFinished:!1,isOpponentFinished:!0})];case 1:return _tmp=_state.sent(),[3,3];case 2:_tmp=null,_state.label=3;case 3:return[2,_tmp];case 4:return e1=_state.sent(),[2,null];case 5:return[2]}})}).call(this)}},{key:"ye",value:function ye(e,t){return _async_to_generator(function(){var r,o,w,I,D,S,E,b;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(r=e.id,o=e.profiles,I=(w=e.customData).playerId,D=w.opponentId,!I||"string"!=typeof I)throw new B;if(!("updateAsync"in GameSDK.extra))throw new K("updateAsync");if(!(S=o[I]))throw new H;return E=S.name,b={data:{type:Oe.CHALLENGE_FRIEND,matchId:r,playerId:I,opponentId:D},action:"CUSTOM",template:"challenge",cta:{default:"Play",localizations:{vi_VN:"Chi ngay"}},text:{default:"".concat(E," accepted the challenge."),localizations:{vi_VN:"".concat(E," \xe3 chp nhn tham gia trn u.")}},image:t,strategy:"LAST",notification:"PUSH"},[4,GameSDK.extra.updateAsync(b)];case 1:return _state.sent(),[2]}})})()}}]),Uc}(M);a(Uc,"SendAcceptedMessageHandler");var Bc=Uc,iy=Bc,Kc=/*#__PURE__*/function(G){function Kc(){return _class_call_check(this,Kc),_call_super(this,Kc,arguments)}return _inherits(Kc,G),_create_class(Kc,[{key:"processAsync",value:function processAsync(e){return _async_to_generator(function(){var t,r,o,w,I,D,S,E,b,L,C,R;return _ts_generator(this,function(_state){switch(_state.label){case 0:return _state.trys.push([0,,2,3]),this.u(e),t=e.matchId,r=e.playerId,o=e.opponentId,w=new F(this),I=new J(this,{id:t,mode:q.CHALLENGE_FRIEND,customData:{playerId:r,opponentId:o}}),w.setNext(I),D=new sy(this),I.setNext(D),S=new ge(this),D.setNext(S),E=new re(this),S.setNext(E),b=new iy(this),E.setNext(b),L=new Z(this),b.setNext(L),C=new U(this),L.setNext(C),R=this.match.getMatchState(),[4,w.processAsync(R)];case 1:return _state.sent(),[3,3];case 2:return this.p(),[7];case 3:return[2]}})}).call(this)}}]),Kc}(G);a(Kc,"JoinChallengeMatchConcrete");var Vc=Kc,cy=Vc;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var Dv={_id:"",status:"",appId:"",createdAt:"",startedAt:null,finishedAt:null,winnerId:"",whitePlayerId:"",blackPlayerId:"",whitePlayerScore:0,blackPlayerScore:0,whitePlayerFinish:!1,blackPlayerFinish:!1,extraData:{}},ly=Dv,_Ludex_Configs8=Ludex.Configs,Iv=_Ludex_Configs8.AppId,_Ludex_Utils30=Ludex.Utils,ve=_Ludex_Utils30.Valid,Se="is invalid",Hc=/*#__PURE__*/function(ae){function Hc(){return _class_call_check(this,Hc),_call_super(this,Hc,arguments)}return _inherits(Hc,ae),_create_class(Hc,[{key:"Q",value:function Q(e){this.Z(e)}},{key:"q",value:function q(e){this.J(e)}},{key:"o",value:function o(e){this.X(e)}},{key:"validateId",value:function validateId(e){ve.isString(e)&&e||this.a("_id",Se)}},{key:"validateStatus",value:function validateStatus(e){ve.isString(e)&&e||this.a("status",Se)}},{key:"validateAppId",value:function validateAppId(e){ve.isString(e)&&e===Iv||this.a("appId",Se)}},{key:"validateCreatedAt",value:function validateCreatedAt(e){ve.isString(e)||this.a("createdAt",Se)}},{key:"validateStartedAt",value:function validateStartedAt(e){null!==e&&(ve.isString(e)||this.a("startedAt",Se))}},{key:"validateFinishedAt",value:function validateFinishedAt(e){null!==e&&(ve.isString(e)||this.a("finishedAt",Se))}},{key:"validateExtraData",value:function validateExtraData(e){null!==e&&(ve.isObject(e)||this.a("extraData",Se))}},{key:"validateWinnerId",value:function validateWinnerId(e){null===e||ve.isString(e)&&e||this.a("winnerId",Se)}},{key:"validateWhitePlayerId",value:function validateWhitePlayerId(e){ve.isString(e)&&e||this.a("whitePlayerId",Se)}},{key:"validateBlackPlayerId",value:function validateBlackPlayerId(e){ve.isString(e)&&e||this.a("blackPlayerId",Se)}},{key:"validateWhitePlayerScore",value:function validateWhitePlayerScore(e){ve.isNumber(e)||this.a("whitePlayerScore",Se)}},{key:"validateBlackPlayerScore",value:function validateBlackPlayerScore(e){ve.isNumber(e)||this.a("blackPlayerScore",Se)}},{key:"validateWhitePlayerFinish",value:function validateWhitePlayerFinish(e){ve.isBoolean(e)||this.a("whitePlayerFinish",Se)}},{key:"validateBlackPlayerFinish",value:function validateBlackPlayerFinish(e){ve.isBoolean(e)||this.a("blackPlayerFinish",Se)}},{key:"toObject",value:function toObject(){return _get(_get_prototype_of(Hc.prototype),"toObject",this).call(this)}}]),Hc}(ae);a(Hc,"RespMatchDataDtos");var or=Hc;or.makeStrict(),or.addDefaults(ly);var wn=or;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var Wc=/*#__PURE__*/function(Error1){function Wc(e){var _this;return _class_call_check(this,Wc),(_this=_call_super(this,Wc,[e])).name="MatchAreNotFinished",_this.message=e||"Match are not finished",_this}return _inherits(Wc,Error1),Wc}(_wrap_native_super(Error));a(Wc,"MatchAreNotFinished");var jc=Wc,dy=jc;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var qc=/*#__PURE__*/function(Error1){function qc(e){var _this;return _class_call_check(this,qc),(_this=_call_super(this,qc,[e])).name="OpponentNotFinishedMatch",_this.message=e||"Opponent not finished match",_this}return _inherits(qc,Error1),qc}(_wrap_native_super(Error));a(qc,"OpponentNotFinishedMatch");var zc=qc,uy=zc,_Ludex_Utils31=Ludex.Utils,Ev=_Ludex_Utils31.Object,Jc=/*#__PURE__*/function(M){function Jc(){return _class_call_check(this,Jc),_call_super(this,Jc,arguments)}return _inherits(Jc,M),_create_class(Jc,[{key:"processAsync",value:function processAsync(e){var _this=this,_this1=this,_superprop_get_processAsync=function(){return _get(_get_prototype_of(Jc.prototype),"processAsync",_this)};return _async_to_generator(function(){var r;return _ts_generator(this,function(_state){switch(_state.label){case 0:return _superprop_get_processAsync().call(_this1,e),this.U(e),[4,this.We(e)];case 1:return r=new wn(_state.sent()).toObject(),this.Cn(e,r),this.O(e,r),this.ze(e),this.la(e),[4,this.s(e)];case 2:return _state.sent(),[2]}})}).call(this)}},{key:"U",value:function U(e){if("string"!=typeof e.id)throw new ie}},{key:"Cn",value:function Cn(e,t){var r=e.id,o=t._id,w=t.whitePlayerFinish,I=t.blackPlayerFinish;if("string"!=typeof o||o!==r)throw new Ot;if(!w&&!I)throw new dy}},{key:"ze",value:function ze(e){var t=e.profiles,o=e.customData.playerId;if("string"!=typeof o)throw new B;if(!t[o].finished)throw new mn}},{key:"la",value:function la(e){var t=e.profiles,o=e.customData.opponentId;if("string"!=typeof o)throw new X;if(!t[o].finished)throw new uy}},{key:"We",value:function We(e){return _async_to_generator(function(){var t;return _ts_generator(this,function(_state){return[2,(t=e.id)?this.te.api.getMatchAPI().getMatchDetailByIdAsync(t):null]})}).call(this)}},{key:"O",value:function O(e,t){this.F(e,t),this.k(e,t),this.j(e),this.pe(e,t)}},{key:"F",value:function F(e,t){var r=t.extraData;e.status=Y.FINISHED,e.customData=Ev.merge(e.customData,r)}},{key:"k",value:function k(e,t){var r=t.whitePlayerId,o=t.blackPlayerId,I=r===e.customData.playerId,D=I?r:o,S=I?o:r;e.customData.playerId=D,e.customData.opponentId=S}},{key:"j",value:function j(e){var _e_customData=e.customData,t=_e_customData.playerId,r=_e_customData.opponentId;if(t&&r){var o={name:"",photo:"",finished:!0};e.profiles[t]||(e.profiles[t]=N({id:t},o)),e.profiles[r]||(e.profiles[r]=N({id:r},o))}}},{key:"pe",value:function pe(e,t){var _e_customData=e.customData,r=_e_customData.playerId,o=_e_customData.opponentId;if(r&&o){var w=t.whitePlayerId,I=t.whitePlayerScore,D=t.whitePlayerFinish,S=t.blackPlayerScore,E=t.blackPlayerFinish,b=w===e.customData.playerId;e.profiles[r].score=b?I:S,e.profiles[o].score=b?S:I,e.profiles[r].finished=b?D:E,e.profiles[o].finished=b?E:D}}}]),Jc}(M);a(Jc,"ResultMatchHandler");var Yc=Jc,py=Yc,Xc=/*#__PURE__*/function(G){function Xc(){return _class_call_check(this,Xc),_call_super(this,Xc,arguments)}return _inherits(Xc,G),_create_class(Xc,[{key:"processAsync",value:function processAsync(e){return _async_to_generator(function(){var t,r,o,w,I,D,S,E,b;return _ts_generator(this,function(_state){switch(_state.label){case 0:return _state.trys.push([0,,2,3]),this.u(e),t=e.matchId,r=e.playerId,o=e.opponentId,w=new F(this),I=new J(this,{id:t,mode:q.CHALLENGE_FRIEND,customData:{playerId:r,opponentId:o}}),w.setNext(I),D=new py(this),I.setNext(D),S=new ge(this),D.setNext(S),E=new U(this),S.setNext(E),b=this.match.getMatchState(),[4,w.processAsync(b)];case 1:return _state.sent(),[3,3];case 2:return this.p(),[7];case 3:return[2]}})}).call(this)}}]),Xc}(G);a(Xc,"ResultChallengeMatchConcrete");var Qc=Xc,my=Qc;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var el=/*#__PURE__*/function(G){function el(){var _this,_this1;return _class_call_check(this,el),_this=_call_super(this,el,arguments),_define_property(_this1=_this,"ns",void 0),_define_property(_this1,"Rn",a(function(e){return _async_to_generator(function(){return _ts_generator(this,function(_state){switch(_state.label){case 0:return _state.trys.push([0,2,,3]),[4,_this1.match.challenge.invite.processAsync(e)];case 1:return[2,(_state.sent(),!0)];case 2:return[2,_state.sent()];case 3:return[2]}})})()},"startFLowChallengeFriend$")),_define_property(_this1,"Mn",a(function(e){return _async_to_generator(function(){var t,e1;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(_state.trys.push([0,2,,4]),"string"!=typeof(t=GameSDK.context.getID()))throw new te;return[4,_this1.match.tournament.continue.processAsync({playerId:e,contextId:t})];case 1:case 3:return _state.sent(),[3,4];case 2:return e1=_state.sent(),[4,_this1.os(e)];case 4:return[2]}})})()},"startFlowTournament$")),_define_property(_this1,"os",a(function(e){return _async_to_generator(function(){return _ts_generator(this,function(_state){return[2,_this1.match.single.start.processAsync({playerId:e})]})})()},"startFlowSingle$")),_this}return _inherits(el,G),_create_class(el,[{key:"processAsync",value:function processAsync(e){return _async_to_generator(function(){var t,r,o,w;return _ts_generator(this,function(_state){switch(_state.label){case 0:return _state.trys.push([0,,7,8]),this.u(e),t=e.playerId,r=e.extraData,o=e.fallbackSingleMode,this.ns=o,[4,this.Rn({playerId:t,extraData:r})];case 1:if(!0===(w=_state.sent()))return[2];if(!_instanceof(w,ar))return[3,3];return[4,this.Mn(t)];case 2:case 4:return _state.sent(),[3,6];case 3:if(!this.ns)return[3,5];return[4,this.os(t)];case 5:throw w;case 6:return[3,8];case 7:return this.p(),[7];case 8:return[2]}})}).call(this)}}]),el}(G);a(el,"ChooseContextConcrete");var Zc=el,hy=Zc;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var rl=/*#__PURE__*/function(Error1){function rl(e){var _this;return _class_call_check(this,rl),(_this=_call_super(this,rl,[e])).name="LeaderboardIdNotValid",_this.message=null!=e?e:"Leaderboard id is not valid",_this}return _inherits(rl,Error1),rl}(_wrap_native_super(Error));a(rl,"LeaderboardIdNotValid");var tl=rl,He=tl;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var _Ludex_Utils32=Ludex.Utils,fy=_Ludex_Utils32.Valid,al=/*#__PURE__*/function(M){function al(e,t){var _this;return _class_call_check(this,al),_define_property(_this=_call_super(this,al,[e]),"e",void 0),_define_property(_this,"qe",void 0),_this.e=t,_this}return _inherits(al,M),_create_class(al,[{key:"processAsync",value:function processAsync(e){var _this=this,_this1=this,_superprop_get_processAsync=function(){return _get(_get_prototype_of(al.prototype),"processAsync",_this)};return _async_to_generator(function(){var _tmp;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(_superprop_get_processAsync().call(_this1,e),this.Ye(e),!(_tmp="submitGameResultsAsync"in GameSDK.extra))return[3,2];return[4,GameSDK.extra.submitGameResultsAsync(this.e.score)];case 1:_tmp=_state.sent(),_state.label=2;case 2:return this.ha(),[4,this.s(e)];case 3:return _state.sent(),[2]}})}).call(this)}},{key:"Ye",value:function Ye(e){return _async_to_generator(function(){var t,o,_this_e,w,I;return _ts_generator(this,function(_state){if(t=e.profiles,!(o=e.customData.playerId)||!t[o])throw new H;if(w=(_this_e=this.e).score,I=_this_e.leaderboardId,!fy.isNumber(w))throw new kt;if(!fy.isString(I))throw new He;return this.qe={score:w,playerId:o,leaderboardId:I},[2]})}).call(this)}},{key:"ha",value:function ha(){return _async_to_generator(function(){var _this_qe,e,t,r,o,e1;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(_state.trys.push([0,2,,3]),e=(_this_qe=this.qe).playerId,t=_this_qe.score,r=_this_qe.leaderboardId,!(o=this.r.leaderboard.getLeaderboardName(r)))throw new gn;return[4,this.r.leaderboard.setLeaderboardScoreAsync(o,e,t)];case 1:return _state.sent(),[3,3];case 2:return e1=_state.sent(),[3,3];case 3:return[2]}})}).call(this)}}]),al}(M);a(al,"SetLeaderboardScoreHandler");var nl=al,$n=nl,_Ludex_Utils33=Ludex.Utils,Lv=_Ludex_Utils33.Valid,sl=/*#__PURE__*/function($n){function sl(e){return _class_call_check(this,sl),_call_super(this,sl,[e,{score:0,leaderboardId:""}])}return _inherits(sl,$n),_create_class(sl,[{key:"Ye",value:function Ye(e){var _this=this,_this1=this,_superprop_get_Ye=function(){return _get(_get_prototype_of(sl.prototype),"Ye",_this)};return _async_to_generator(function(){var t,r,o,w,I;return _ts_generator(this,function(_state){if(t=e.profiles,o=(r=e.customData).playerId,!(w=r.leaderboardId))throw new He;if(!o||!t[o])throw new H;if(I=t[o].score,!Lv.isNumber(I))throw new kt;return this.e.score=I,this.e.leaderboardId=w,_superprop_get_Ye().call(_this1,e),[2]})}).call(this)}}]),sl}($n);a(sl,"PostLeaderboardScoreHandler");var ol=sl,Gt=ol;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var cl=/*#__PURE__*/function(M){function cl(){return _class_call_check(this,cl),_call_super(this,cl,arguments)}return _inherits(cl,M),_create_class(cl,[{key:"processAsync",value:function processAsync(e){var _this=this,_this1=this,_superprop_get_processAsync=function(){return _get(_get_prototype_of(cl.prototype),"processAsync",_this)};return _async_to_generator(function(){return _ts_generator(this,function(_state){switch(_state.label){case 0:return _superprop_get_processAsync().call(_this1,e),this.o(e),this.$n(e),[4,this.s(e)];case 1:return _state.sent(),[2]}})}).call(this)}},{key:"o",value:function o(e){var t=e.id,r=e.customData,o=r.contextId,w=r.opponentId;if(!t||"string"!=typeof t)throw new ie;if(!o||"string"!=typeof o)throw new te;if(!w||"string"!=typeof w)throw new X}},{key:"Gn",value:function Gn(e){return _async_to_generator(function(){var t,r,o,w,I,D,S,E,tmp,b,L,tmp1,C,e1;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(_state.trys.push([0,2,,3]),t=this.r.frameCapture,r=e.profiles,w=(o=e.customData).playerId,I=o.opponentId,!w||!I||(D=r[w],S=r[I],!D||!S))return[2,null];return E=D.photo,b=void 0===(tmp=D.score)?0:tmp,L=S.photo,C=void 0===(tmp1=S.score)?0:tmp1,[4,t.renderAsync("result-challenge",{playerId:w,playerPhoto:E,playerScore:b,opponentId:I,opponentPhoto:L,opponentScore:C,isPlayerFinished:!0,isOpponentFinished:!0})];case 1:return[2,_state.sent()];case 2:return e1=_state.sent(),[2,null];case 3:return[2]}})}).call(this)}},{key:"Un",value:function Un(e){return _async_to_generator(function(){var _this_r,t,r,o,_t_getPlayer,w,I,D,S,e1;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(_state.trys.push([0,2,,3]),t=(_this_r=this.r).player,r=_this_r.frameCapture,o=e.customData.playerId,w=(_t_getPlayer=t.getPlayer()).playerId,I=_t_getPlayer.photo,D=_t_getPlayer.data,o!==w)return[2,null];return S=(D||{}).score,[4,r.renderAsync("share-score",{playerId:w,playerPhoto:I,playerScore:S})];case 1:return[2,_state.sent()];case 2:return e1=_state.sent(),[2,null];case 3:return[2]}})}).call(this)}},{key:"$n",value:function $n(e){return _async_to_generator(function(){var t,r,o,w,D,S,tmp,tmp1,L,I;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(t=e.profiles,o=(r=e.customData).playerId,!((w=r.opponentId)&&"string"==typeof w))return[3,2];if(!o||"string"!=typeof o)throw new B;if(D=t[o],S=t[w],!D||!S)return[2];if(!((void 0===(tmp=D.score)?0:tmp)>(void 0===(tmp1=S.score)?0:tmp1)))return[3,2];return[4,this.Gn(e)];case 1:if(!(L=_state.sent()))return[2];return this.ua(e,L),[2];case 2:return[4,this.Un(e)];case 3:return(I=_state.sent())&&this.Fn(e,I),[2]}})}).call(this)}},{key:"ua",value:function ua(e,t){return _async_to_generator(function(){var r,w,I,D,S,E;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(r=e.profiles,!(w=e.customData.playerId)||"string"!=typeof w)throw new B;if(!("updateAsync"in GameSDK.extra))throw new K("updateAsync");if(!(I=r[w]))throw new H;if(D=I.name,S=I.score,E={data:{type:this.r.context.getSessionContextTypes().MATCHING_GROUP,playerId:w,playerName:D,playerScore:S},action:"CUSTOM",template:"play_turn",cta:{default:"Play",localizations:{vi_VN:"Chi"}},text:{default:"".concat(D," beats your high score. Their score: ").concat(S,"."),localizations:{vi_VN:"".concat(D," va vt im s cao nht ca bn! Chi ln na ch?")}},image:t,strategy:"IMMEDIATE",notification:"PUSH"},!("updateAsync"in GameSDK.extra))throw new K("updateAsync");return[4,GameSDK.extra.updateAsync(E)];case 1:return _state.sent(),[2]}})}).call(this)}},{key:"Fn",value:function Fn(e,t){return _async_to_generator(function(){var r,w,I,D,S,E;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(r=e.profiles,!(w=e.customData.playerId)||"string"!=typeof w)throw new B;if(!(I=r[w]))throw new H;if(D=I.name,S=I.score,E={data:{type:this.r.context.getSessionContextTypes().MATCHING_GROUP,playerId:w,playerName:D,playerScore:S},action:"CUSTOM",template:"play_turn",cta:{default:"Play",localizations:{vi_VN:"Chi ngay"}},text:{default:"".concat(D," got ").concat(S," scores. So easy! Can you?"),localizations:{vi_VN:"".concat(D," \xe3 t ").concat(S," im! Qu\xe1 d lu\xf4n. Chi li n\xe0o!")}},image:t,strategy:"IMMEDIATE",notification:"PUSH"},!("updateAsync"in GameSDK.extra))throw new K("updateAsync");return[4,GameSDK.extra.updateAsync(E)];case 1:return _state.sent(),[2]}})}).call(this)}}]),cl}(M);a(cl,"SendGroupMessageHandler");var il=cl,yy=il,dl=/*#__PURE__*/function(G){function dl(){return _class_call_check(this,dl),_call_super(this,dl,arguments)}return _inherits(dl,G),_create_class(dl,[{key:"processAsync",value:function processAsync(){return _async_to_generator(function(){var e,t,r,o,w,I,D,S;return _ts_generator(this,function(_state){switch(_state.label){case 0:return _state.trys.push([0,,2,3]),this.u(),e=new F(this),t=new Ve(this,{useAPI:!1}),e.setNext(t),r=new yy(this),t.setNext(r),o=new Ue(this),r.setNext(o),w=new Ke(this),o.setNext(w),I=new Gt(this),w.setNext(I),D=new U(this),I.setNext(D),S=this.match.getMatchState(),[4,e.processAsync(S)];case 1:return _state.sent(),[3,3];case 2:return this.p(),[7];case 3:return[2]}})}).call(this)}}]),dl}(G);a(dl,"FinishGroupConcrete");var ll=dl,gy=ll;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var Cv=Ludex.Dtos,_Ludex_Utils34=Ludex.Utils,Tv=_Ludex_Utils34.Object,pl=/*#__PURE__*/function(M){function pl(e,t){var _this;return _class_call_check(this,pl),_define_property(_this=_call_super(this,pl,[e]),"e",void 0),_this.e=t,_this}return _inherits(pl,M),_create_class(pl,[{key:"processAsync",value:function processAsync(e){var _this=this,_this1=this,_superprop_get_processAsync=function(){return _get(_get_prototype_of(pl.prototype),"processAsync",_this)};return _async_to_generator(function(){return _ts_generator(this,function(_state){switch(_state.label){case 0:return _superprop_get_processAsync().call(_this1,e),this.kn(e),[4,this.s(e)];case 1:return _state.sent(),[2]}})}).call(this)}},{key:"kn",value:function kn(e){var t=this.e.id,r=e.profiles;if(!r[t])throw new H;var o=Tv.merge(r[t],this.e),w=new Cv.Match.Profile(o).toObject();r[w.id]=w}}]),pl}(M);a(pl,"SetProfileDataHandler");var ul=pl,ot=ul,hl=/*#__PURE__*/function(G){function hl(){return _class_call_check(this,hl),_call_super(this,hl,arguments)}return _inherits(hl,G),_create_class(hl,[{key:"processAsync",value:function processAsync(e){return _async_to_generator(function(){var t,r,o,w,I,D,S,E,b,L,C;return _ts_generator(this,function(_state){switch(_state.label){case 0:return _state.trys.push([0,,2,3]),this.u(e),t=e.playerId,r=e.opponentId,o=e.opponentScore,w=new F(this),I=new J(this,{id:"7749",mode:q.MATCHING_GROUP,customData:{playerId:t,opponentId:r}}),w.setNext(I),D=new ge(this),I.setNext(D),S=new ot(this,{id:t,score:o}),D.setNext(S),E=new re(this),S.setNext(E),b=new Z(this),E.setNext(b),L=new U(this),b.setNext(L),C=this.match.getMatchState(),[4,w.processAsync(C)];case 1:return _state.sent(),[3,3];case 2:return this.p(),[7];case 3:return[2]}})}).call(this)}}]),hl}(G);a(hl,"JoinGroupConcrete");var ml=hl,Py=ml;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var gl=/*#__PURE__*/function(Error1){function gl(e){var _this;return _class_call_check(this,gl),(_this=_call_super(this,gl,[e])).name="MatchGroupNotSupported",_this.message=null!=e?e:"Match group is not supported",_this}return _inherits(gl,Error1),gl}(_wrap_native_super(Error));a(gl,"MatchGroupNotSupported");var fl=gl,yl=fl,xl=/*#__PURE__*/function(M){function xl(e,t){var _this;return _class_call_check(this,xl),_define_property(_this=_call_super(this,xl,[e]),"e",void 0),_this.e=t,_this}return _inherits(xl,M),_create_class(xl,[{key:"processAsync",value:function processAsync(e){var _this=this,_this1=this,_superprop_get_processAsync=function(){return _get(_get_prototype_of(xl.prototype),"processAsync",_this)};return _async_to_generator(function(){var t;return _ts_generator(this,function(_state){switch(_state.label){case 0:return _superprop_get_processAsync().call(_this1,e),[4,this.jn()];case 1:return _state.sent(),[4,this.Bn()];case 2:return t=_state.sent(),e.customData.contextId=t,[4,this.s(e)];case 3:return _state.sent(),[2]}})}).call(this)}},{key:"jn",value:function jn(){return _async_to_generator(function(){return _ts_generator(this,function(_state){switch(_state.label){case 0:if(!("getSupportedAPIs"in GameSDK))throw new K("getSupportedAPIs");if(!("checkCanPlayerMatchAsync"in GameSDK.extra))throw new K("checkCanPlayerMatchAsync");if(!(GameSDK.getSupportedAPIs().indexOf("checkCanPlayerMatchAsync")>-1))throw new yl;return[4,GameSDK.extra.checkCanPlayerMatchAsync()];case 1:if(!_state.sent())throw new yl;return[2]}})})()}},{key:"Bn",value:function Bn(){return _async_to_generator(function(){var _this_e,e,tmp,t,tmp1,r,o;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(!("matchPlayerAsync"in GameSDK.extra))throw new K("matchPlayerAsync");return e=(_this_e=this.e).matchTag,t=void 0!==(tmp=_this_e.autoSwitch)&&tmp,r=void 0!==(tmp1=_this_e.onlyExisting)&&tmp1,[4,GameSDK.extra.matchPlayerAsync(e,t,r)];case 1:if(_state.sent(),"string"!=typeof(o=GameSDK.context.getID()))throw new _t;return[2,o]}})}).call(this)}}]),xl}(M);a(xl,"GroupContextHandler");var Pl=xl,xy=Pl,$l=/*#__PURE__*/function(G){function $l(){return _class_call_check(this,$l),_call_super(this,$l,arguments)}return _inherits($l,G),_create_class($l,[{key:"processAsync",value:function processAsync(e){return _async_to_generator(function(){var t,r,o,w,I,D,S,E,b,L,C,R;return _ts_generator(this,function(_state){switch(_state.label){case 0:return _state.trys.push([0,,2,3]),this.u(e),t=e.matchTag,r=e.playerId,o=e.options,w=new F(this),I=new xy(this,N({matchTag:t},o)),w.setNext(I),D=new J(this,{id:"7749",mode:q.MATCHING_GROUP,customData:{playerId:r}}),I.setNext(D),S=new xn(this,{ignoreId:r}),D.setNext(S),E=new re(this),S.setNext(E),b=new ge(this),E.setNext(b),L=new Z(this),b.setNext(L),C=new U(this),L.setNext(C),R=this.match.getMatchState(),[4,w.processAsync(R)];case 1:return _state.sent(),[3,3];case 2:return this.p(),[7];case 3:return[2]}})}).call(this)}}]),$l}(G);a($l,"StartGroupConcrete");var wl=$l,wy=wl;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var vl=/*#__PURE__*/function(G){function vl(){return _class_call_check(this,vl),_call_super(this,vl,arguments)}return _inherits(vl,G),_create_class(vl,[{key:"processAsync",value:function processAsync(){return _async_to_generator(function(){var e,t,r,o,w,I,D;return _ts_generator(this,function(_state){switch(_state.label){case 0:return _state.trys.push([0,,2,3]),this.u(),e=new F(this),t=new Ve(this,{useAPI:!1}),e.setNext(t),r=new Ue(this),t.setNext(r),o=new Ke(this),r.setNext(o),w=new at(this),o.setNext(w),I=new U(this),w.setNext(I),D=this.match.getMatchState(),[4,e.processAsync(D)];case 1:return _state.sent(),[3,3];case 2:return this.p(),[7];case 3:return[2]}})}).call(this)}}]),vl}(G);a(vl,"FinishSingleConcrete");var Al=vl,$y=Al;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var bl=/*#__PURE__*/function(Error1){function bl(e){var _this;return _class_call_check(this,bl),(_this=_call_super(this,bl,[e])).name="ProfileIdNotDefined",_this.message=null!=e?e:"Profile id is not defined",_this}return _inherits(bl,Error1),bl}(_wrap_native_super(Error));a(bl,"ProfileIdNotDefined");var Sl=bl,Ay=Sl,Mv=Ludex.Dtos,Il=/*#__PURE__*/function(M){function Il(e,t){var _this;return _class_call_check(this,Il),_define_property(_this=_call_super(this,Il,[e]),"e",void 0),_this.e=t,_this}return _inherits(Il,M),_create_class(Il,[{key:"processAsync",value:function processAsync(e){var _this=this,_this1=this,_superprop_get_processAsync=function(){return _get(_get_prototype_of(Il.prototype),"processAsync",_this)};return _async_to_generator(function(){var t,o,w;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(_superprop_get_processAsync().call(_this1,e),!(t=this.e.profileId))throw new Ay;if(o=this.r.player.getPlayerId(),t!==o)return[3,1];return w=this.wt(),[3,3];case 1:return[4,this.Hn(t)];case 2:if(!(w=_state.sent()))throw new H;_state.label=3;case 3:return this.O(w,e),[4,this.s(e)];case 4:return _state.sent(),[2]}})}).call(this)}},{key:"wt",value:function wt(){var _e_getPlayer=this.r.player.getPlayer();return{playerId:_e_getPlayer.playerId,name:_e_getPlayer.name,photo:_e_getPlayer.photo,locale:_e_getPlayer.locale}}},{key:"Hn",value:function Hn(e){return _async_to_generator(function(){var t;return _ts_generator(this,function(_state){switch(_state.label){case 0:return[4,(t=this.r.profile).requestProfiles([e])];case 1:return[2,(_state.sent(),t.getProfiles()[e])]}})}).call(this)}},{key:"O",value:function O(e,t){var r=e.playerId,o=e.name,w=e.photo,I=new Mv.Match.Profile({id:r,name:o,photo:w}).toObject();t.profiles[r]=I}}]),Il}(M);a(Il,"GetProfileHandler");var Dl=Il,je=Dl,Ll=/*#__PURE__*/function(G){function Ll(){return _class_call_check(this,Ll),_call_super(this,Ll,arguments)}return _inherits(Ll,G),_create_class(Ll,[{key:"processAsync",value:function processAsync(e){return _async_to_generator(function(){var t,r,o,w,I,D,S,E,b;return _ts_generator(this,function(_state){switch(_state.label){case 0:return _state.trys.push([0,,2,3]),this.u(e),t=e.playerId,r=new F(this),o=new nt(this,{contextId:"SOLO"}),r.setNext(o),w=new J(this,{id:"123456",mode:q.SINGLE,customData:{playerId:t}}),o.setNext(w),I=new re(this),w.setNext(I),D=new je(this,{profileId:t}),I.setNext(D),S=new Z(this),D.setNext(S),E=new U(this),S.setNext(E),b=this.match.getMatchState(),[4,r.processAsync(b)];case 1:return _state.sent(),[3,3];case 2:return this.p(),[7];case 3:return[2]}})}).call(this)}}]),Ll}(G);a(Ll,"StartSingleConcrete");var El=Ll,vy=El;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var Tl=/*#__PURE__*/function(G){function Tl(){return _class_call_check(this,Tl),_call_super(this,Tl,arguments)}return _inherits(Tl,G),_create_class(Tl,[{key:"processAsync",value:function processAsync(e){return _async_to_generator(function(){var _ref,tmp,t,tmp1,r,o,w,I,D,S,E,b;return _ts_generator(this,function(_state){switch(_state.label){case 0:return _state.trys.push([0,,2,3]),this.u(e),t=void 0!==(tmp=(_ref=null!=e?e:{}).setPlayerBestScore)&&tmp,r=void 0!==(tmp1=_ref.postGlobalLeaderboard)&&tmp1,o=new F(this),w=new Ve(this,{useAPI:!1}),o.setNext(w),I=new Ue(this),w.setNext(I),D=new Ke(this,{ignore:!t}),I.setNext(D),S=new at(this,{ignore:!r}),D.setNext(S),E=new U(this),S.setNext(E),b=this.match.getMatchState(),[4,o.processAsync(b)];case 1:return _state.sent(),[3,3];case 2:return this.p(),[7];case 3:return[2]}})}).call(this)}}]),Tl}(G);a(Tl,"FinishStrategyConcrete");var Cl=Tl,Sy=Cl;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var Ol=/*#__PURE__*/function(G){function Ol(){return _class_call_check(this,Ol),_call_super(this,Ol,arguments)}return _inherits(Ol,G),_create_class(Ol,[{key:"processAsync",value:function processAsync(e){return _async_to_generator(function(){var t,r,o,tmp,w,I,D,S,E,b,L,C,R;return _ts_generator(this,function(_state){switch(_state.label){case 0:return _state.trys.push([0,,2,3]),this.u(e),t=e.matchId,r=e.playerId,o=e.gameMode,w=void 0===(tmp=e.extraData)?{}:tmp,I=new F(this),D=new nt(this,{contextId:"SOLO"}),I.setNext(D),S=new J(this,{id:t,mode:o,customData:N({playerId:r},w)}),D.setNext(S),E=new re(this),S.setNext(E),b=new je(this,{profileId:r}),E.setNext(b),L=new Z(this),b.setNext(L),C=new U(this),L.setNext(C),R=this.match.getMatchState(),[4,I.processAsync(R)];case 1:return _state.sent(),[3,3];case 2:return this.p(),[7];case 3:return[2]}})}).call(this)}}]),Ol}(G);a(Ol,"StartStrategyConcrete");var Ml=Ol,by=Ml;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var _Ludex_Plugins3=Ludex.Plugins,tmp2=_Ludex_Plugins3.Analytics,_ref2=void 0===tmp2?{}:tmp2,Dy=_ref2.Events,_Ludex_Utils35=Ludex.Utils,Ov=_Ludex_Utils35.String,Nv=_Ludex_Utils35.Valid,Rl=/*#__PURE__*/function(M){function Rl(){return _class_call_check(this,Rl),_call_super(this,Rl,arguments)}return _inherits(Rl,M),_create_class(Rl,[{key:"processAsync",value:function processAsync(e){var _this=this,_this1=this,_superprop_get_processAsync=function(){return _get(_get_prototype_of(Rl.prototype),"processAsync",_this)};return _async_to_generator(function(){var t,r,o,w,I;return _ts_generator(this,function(_state){switch(_state.label){case 0:return _superprop_get_processAsync().call(_this1,e),t=e.mode,r=e.customData,this.Ve(t),o=this.r.analytics,w=r.tournamentId,I=r.leaderboardId,Dy&&(null==o||o.event(Dy.TOURNAMENT_START,{success:!0,game_mode:Ov.toUpperCamelCase(t),tournament_id:w,leaderboard_id:I})),[4,this.s(e)];case 1:return _state.sent(),[2]}})}).call(this)}},{key:"Ve",value:function Ve(e){if(!Nv.isString(e))throw new Mt}}]),Rl}(M);a(Rl,"LogTournamentStartHandler");var Nl=Rl,An=Nl;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var kl=/*#__PURE__*/function(Error1){function kl(e){var _this;return _class_call_check(this,kl),(_this=_call_super(this,kl,[e])).name="TournamentIdNotValid",_this.message=null!=e?e:"Tournament id is not valid",_this}return _inherits(kl,Error1),kl}(_wrap_native_super(Error));a(kl,"TournamentIdNotValid");var _l=kl,vn=_l,_Ludex_Utils36=Ludex.Utils,Gl=_Ludex_Utils36.Valid,Bl=/*#__PURE__*/function(M){function Bl(e,t){var _this;return _class_call_check(this,Bl),_define_property(_this=_call_super(this,Bl,[e]),"e",void 0),_this.e=t,_this}return _inherits(Bl,M),_create_class(Bl,[{key:"processAsync",value:function processAsync(e){var _this=this,_this1=this,_superprop_get_processAsync=function(){return _get(_get_prototype_of(Bl.prototype),"processAsync",_this)};return _async_to_generator(function(){var t,r,o,w,D;return _ts_generator(this,function(_state){switch(_state.label){case 0:return _superprop_get_processAsync().call(_this1,e),t=this.e.contextId,this.pa(t),[4,GameSDK.getTournamentAsync()];case 1:return o=(r=_state.sent()).getID().toString(),w=r.getTournamentType(),this.ya(o),e.customData.contextId=t,e.customData.tournamentId=o,"DAILY"!==w&&(D=JSON.parse(r.getPayload()||"{}").leaderboardId,this.ma(D),e.customData.leaderboardId=D),[4,this.s(e)];case 2:return _state.sent(),[2]}})}).call(this)}},{key:"pa",value:function pa(e){if(!Gl.isString(e))throw new te}},{key:"ya",value:function ya(e){if(!Gl.isString(e))throw new vn}},{key:"ma",value:function ma(e){if(!Gl.isString(e)||""===e)throw new He}}]),Bl}(M);a(Bl,"ContinueTournamentHandler");var Fl=Bl,Iy=Fl,Vl=/*#__PURE__*/function(G){function Vl(){return _class_call_check(this,Vl),_call_super(this,Vl,arguments)}return _inherits(Vl,G),_create_class(Vl,[{key:"processAsync",value:function processAsync(e){return _async_to_generator(function(){var t,r,o,w,I,D,S,E,b,L,C;return _ts_generator(this,function(_state){switch(_state.label){case 0:return _state.trys.push([0,,2,3]),this.u(e),t=e.playerId,r=e.contextId,o=new F(this),w=new Iy(this,{contextId:r}),o.setNext(w),I=new J(this,{id:"1997",mode:q.TOURNAMENT,customData:{playerId:t}}),w.setNext(I),D=new re(this),I.setNext(D),S=new je(this,{profileId:t}),D.setNext(S),E=new Z(this),S.setNext(E),b=new An(this),E.setNext(b),L=new U(this),E.setNext(L),C=this.match.getMatchState(),[4,o.processAsync(C)];case 1:return _state.sent(),[3,3];case 2:return this.p(),[7];case 3:return[2]}})}).call(this)}}]),Vl}(G);a(Vl,"ContinueTournamentConcrete");var Ul=Vl,Ey=Ul;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var _Ludex_Plugins4=Ludex.Plugins,tmp3=_Ludex_Plugins4.Analytics,_ref3=void 0===tmp3?{}:tmp3,Ly=_ref3.Events,Hl=/*#__PURE__*/function(M){function Hl(){return _class_call_check(this,Hl),_call_super(this,Hl,arguments)}return _inherits(Hl,M),_create_class(Hl,[{key:"processAsync",value:function processAsync(e){var _this=this,_this1=this,_superprop_get_processAsync=function(){return _get(_get_prototype_of(Hl.prototype),"processAsync",_this)};return _async_to_generator(function(){var t,r,o,w;return _ts_generator(this,function(_state){switch(_state.label){case 0:return _superprop_get_processAsync().call(_this1,e),t=e.customData,r=this.r.analytics,o=t.tournamentId,w=t.leaderboardId,Ly&&r.event(Ly.TOURNAMENT_CREATE,{success:!0,tournament_id:o,leaderboard_id:w}),[4,this.s(e)];case 1:return _state.sent(),[2]}})}).call(this)}}]),Hl}(M);a(Hl,"LogTournamentCreateHandler");var Kl=Hl,Cy=Kl;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var Wl=/*#__PURE__*/function(M){function Wl(e,t){var _this;return _class_call_check(this,Wl),_define_property(_this=_call_super(this,Wl,[e]),"e",void 0),_this.e=t,_this}return _inherits(Wl,M),_create_class(Wl,[{key:"processAsync",value:function processAsync(e){var _this=this,_this1=this,_superprop_get_processAsync=function(){return _get(_get_prototype_of(Wl.prototype),"processAsync",_this)};return _async_to_generator(function(){return _ts_generator(this,function(_state){switch(_state.label){case 0:return _superprop_get_processAsync().call(_this1,e),[4,this.Kn()];case 1:return _state.sent(),[4,this.Vn(e)];case 2:return _state.sent(),[4,this.s(e)];case 3:return _state.sent(),[2]}})}).call(this)}},{key:"Kn",value:function Kn(){return _async_to_generator(function(){var _this_e,e,t,r;return _ts_generator(this,function(_state){switch(_state.label){case 0:return e=(_this_e=this.e).name,t=_this_e.score,r=_this_e.customData,[4,GameSDK.tournament.createAsync({initialScore:t,config:{title:e,tournamentTitle:e},data:r})];case 1:return _state.sent(),[2]}})}).call(this)}},{key:"Vn",value:function Vn(e){return _async_to_generator(function(){var _$t,r,o,w;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(_state.trys.push([0,2,,3]),!("getTournamentAsync"in GameSDK))throw new K("getTournamentAsync");return[4,GameSDK.getTournamentAsync()];case 1:return r=(_$t=_state.sent()).getContextID(),o=_$t.getID().toString(),w=this.e.playerId,e.customData.playerId=w,e.customData.contextId=r,e.customData.tournamentId=o,[3,3];case 2:if(_instanceof(_state.sent(),K))return[2];return[3,3];case 3:return[2]}})}).call(this)}}]),Wl}(M);a(Wl,"CreateTournamentHandler");var jl=Wl,Ty=jl;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var _Ludex_Utils37=Ludex.Utils,My=_Ludex_Utils37.Valid,ql=/*#__PURE__*/function(M){function ql(e,t){var _this;return _class_call_check(this,ql),_define_property(_this=_call_super(this,ql,[e]),"e",void 0),_define_property(_this,"qe",void 0),_this.e=t,_this}return _inherits(ql,M),_create_class(ql,[{key:"processAsync",value:function processAsync(e){var _this=this,_this1=this,_superprop_get_processAsync=function(){return _get(_get_prototype_of(ql.prototype),"processAsync",_this)};return _async_to_generator(function(){return _ts_generator(this,function(_state){switch(_state.label){case 0:return _superprop_get_processAsync().call(_this1,e),this.Wn(),[4,this.zn(e)];case 1:return _state.sent(),[4,this.Yn(e)];case 2:return _state.sent(),[4,this.s(e)];case 3:return _state.sent(),[2]}})}).call(this)}},{key:"Wn",value:function Wn(){var e=this.e.leaderboardId;if(!My.isString(e))throw new He}},{key:"xt",value:function xt(e){if(!My.isString(e))throw new B}},{key:"zn",value:function zn(e){return _async_to_generator(function(){var t,_this_e,r,o,w;return _ts_generator(this,function(_state){return t=e.customData.playerId,this.xt(t),r=(_this_e=this.e).name,o=_this_e.leaderboardId,w=_this_e.customData,this.qe={_id:o,name:null!=r?r:"",createdBy:t,description:JSON.stringify(w)},[2]})}).call(this)}},{key:"Yn",value:function Yn(e){return _async_to_generator(function(){var t;return _ts_generator(this,function(_state){switch(_state.label){case 0:return[4,this.r.leaderboard.createLeaderboardAsync(this.qe)];case 1:return t=_state.sent(),e.customData.leaderboardId=t,[2]}})}).call(this)}}]),ql}(M);a(ql,"CreateLeaderboardHandler");var zl=ql,Oy=zl,Jl=/*#__PURE__*/function(G){function Jl(){return _class_call_check(this,Jl),_call_super(this,Jl,arguments)}return _inherits(Jl,G),_create_class(Jl,[{key:"processAsync",value:function processAsync(e){return _async_to_generator(function(){var t,r,o,w,I,D,S,E,b,L,C,R,$,z;return _ts_generator(this,function(_state){switch(_state.label){case 0:return _state.trys.push([0,,2,3]),this.u(e),t=e.playerId,r=e.name,o=e.score,w=e.leaderboardId,I=e.payload,D=new F(this),S=new nt(this,{contextId:"SOLO"}),D.setNext(S),E=new Ty(this,{name:r,score:o,playerId:t,customData:I}),S.setNext(E),b=new je(this,{profileId:t}),E.setNext(b),L=new ot(this,{id:t,score:o}),b.setNext(L),C=new Oy(this,{name:r,customData:I,leaderboardId:w}),L.setNext(C),R=new Gt(this),C.setNext(R),$=new Cy(this),R.setNext($),z=this.match.getMatchState(),[4,D.processAsync(z)];case 1:return _state.sent(),[3,3];case 2:return this.p(),[7];case 3:return[2]}})}).call(this)}}]),Jl}(G);a(Jl,"CreateTournamentConcrete");var Yl=Jl,Ny=Yl;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var _Ludex_Plugins5=Ludex.Plugins,Ry=_Ludex_Plugins5.Analytics,_Ludex_Utils38=Ludex.Utils,_y=_Ludex_Utils38.Valid,Xl=/*#__PURE__*/function(M){function Xl(e,t){var _this;return _class_call_check(this,Xl),_define_property(_this=_call_super(this,Xl,[e]),"e",void 0),_this.e=t,_this}return _inherits(Xl,M),_create_class(Xl,[{key:"processAsync",value:function processAsync(e){var _this=this,_this1=this,_superprop_get_processAsync=function(){return _get(_get_prototype_of(Xl.prototype),"processAsync",_this)};return _async_to_generator(function(){return _ts_generator(this,function(_state){switch(_state.label){case 0:return _superprop_get_processAsync().call(_this1,e),this.o(e),[4,this.qn(e)];case 1:return _state.sent(),[4,this.s(e)];case 2:return _state.sent(),[2]}})}).call(this)}},{key:"o",value:function o(e){var t=e.profiles,o=e.customData.playerId;if(this.xt(o),!t[o])throw new H}},{key:"xt",value:function xt(e){if(!_y.isString(e))throw new B}},{key:"wt",value:function wt(e){var t=e.profiles,o=e.customData.playerId;return this.xt(o),t[o]}},{key:"fo",value:function fo(e){var t=this.wt(e),tmp=t.score,r=void 0===tmp?0:tmp,tmp1=t.bestScore;return r>(void 0===tmp1?0:tmp1)}},{key:"qn",value:function qn(e){return _async_to_generator(function(){var t,tmp,o,e1,tmp1,w,I,_tmp,D;return _ts_generator(this,function(_state){switch(_state.label){case 0:t=codex.analytics,o=void 0===(tmp=this.wt(e).score)?0:tmp,_state.label=1;case 1:return _state.trys.push([1,3,,4]),[4,this.assertSupportedTournamentContext()];case 2:return _state.sent(),[3,4];case 3:return e1=_state.sent(),[2];case 4:I=(w=void 0===(tmp1=this.e.openShareScorePopup)||tmp1)?Ry.Events.TOURNAMENT_SHARE:Ry.Events.TOURNAMENT_POST_SCORE,_state.label=5;case 5:if(_state.trys.push([5,10,,11]),!w)return[3,7];return[4,GameSDK.tournament.shareAsync({score:o})];case 6:return _tmp=_state.sent(),[3,9];case 7:return[4,GameSDK.tournament.postScoreAsync(o)];case 8:_tmp=_state.sent(),_state.label=9;case 9:return null==t||t.event(I,{success:!0}),[3,11];case 10:return D=_state.sent(),null==t||t.event(I,{success:!1}),_y.isObject(D)&&"code"in D&&"USER_INPUT"===D.code&&codex.event.emit(Ee.GAME_SDK_POPUP_RESPONDED,{type:"cancelled",extra:D}),[3,11];case 11:return[2]}})}).call(this)}},{key:"assertSupportedTournamentContext",value:function assertSupportedTournamentContext(){if(!("getTournamentAsync"in GameSDK))throw new K("getTournamentAsync");return GameSDK.getTournamentAsync()}}]),Xl}(M);a(Xl,"PostScoreTournamentHandler");var Ql=Xl,ky=Ql,ed=/*#__PURE__*/function(G){function ed(){return _class_call_check(this,ed),_call_super(this,ed,arguments)}return _inherits(ed,G),_create_class(ed,[{key:"processAsync",value:function processAsync(e){return _async_to_generator(function(){var t,r,o,w,I,D,S,E,b,L,C,R;return _ts_generator(this,function(_state){switch(_state.label){case 0:return _state.trys.push([0,,2,3]),this.u(e),t=e.playerId,r=e.bestScore,o=new F(this),w=new Ve(this,{useAPI:!1}),o.setNext(w),I=new ot(this,{id:t,bestScore:r}),w.setNext(I),D=new ky(this,e),I.setNext(D),S=new Ue(this),D.setNext(S),E=new Ke(this),S.setNext(E),b=new Gt(this),E.setNext(b),L=new at(this),b.setNext(L),C=new U(this),L.setNext(C),R=this.match.getMatchState(),[4,o.processAsync(R)];case 1:return _state.sent(),[3,3];case 2:return this.p(),[7];case 3:return[2]}})}).call(this)}}]),ed}(G);a(ed,"FinishTournamentConcrete");var Zl=ed,Gy=Zl;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var _Ludex_Utils39=Ludex.Utils,td=_Ludex_Utils39.Valid,Rv=_Ludex_Utils39.Object,nd=/*#__PURE__*/function(M){function nd(e,t){var _this;return _class_call_check(this,nd),_define_property(_this=_call_super(this,nd,[e]),"e",void 0),_this.e=t,_this}return _inherits(nd,M),_create_class(nd,[{key:"processAsync",value:function processAsync(e){var _this=this,_this1=this,_superprop_get_processAsync=function(){return _get(_get_prototype_of(nd.prototype),"processAsync",_this)};return _async_to_generator(function(){var t,r,o,I;return _ts_generator(this,function(_state){switch(_state.label){case 0:return _superprop_get_processAsync().call(_this1,e),t=this.e.tournamentId,this.ya(t),[4,this.Qn(t)];case 1:return _state.sent(),[4,GameSDK.getTournamentAsync()];case 2:return o=(r=_state.sent()).getContextID(),this.pa(o),I=JSON.parse(r.getPayload()||"{}").leaderboardId,this.ma(I),e.customData.contextId=o,e.customData.tournamentId=t,e.customData.leaderboardId=I,[4,this.s(e)];case 3:return _state.sent(),[2]}})}).call(this)}},{key:"ya",value:function ya(e){if(!td.isString(e))throw new vn}},{key:"pa",value:function pa(e){if(!td.isString(e))throw new te}},{key:"ma",value:function ma(e){if(!td.isString(e)||""===e)throw new He}},{key:"Qn",value:function Qn(e){return _async_to_generator(function(){var t;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(!("tournament"in GameSDK))throw new K("tournament");_state.label=1;case 1:return _state.trys.push([1,3,,4]),[4,GameSDK.tournament.joinAsync(e)];case 2:return _state.sent(),[3,4];case 3:if(t=_state.sent(),!Rv.hasOwn(t,"code")||"SAME_CONTEXT"!==t.code)throw t;return[3,4];case 4:return[2]}})})()}}]),nd}(M);a(nd,"JoinTournamentHandler");var rd=nd,Fy=rd,od=/*#__PURE__*/function(G){function od(){return _class_call_check(this,od),_call_super(this,od,arguments)}return _inherits(od,G),_create_class(od,[{key:"processAsync",value:function processAsync(e){return _async_to_generator(function(){var t,r,o,w,I,D,S,E,b,L,C;return _ts_generator(this,function(_state){switch(_state.label){case 0:return _state.trys.push([0,,2,3]),this.u(e),t=e.playerId,r=e.tournamentId,o=new F(this),w=new Fy(this,{tournamentId:r}),o.setNext(w),I=new J(this,{id:"1997",mode:q.TOURNAMENT,customData:{playerId:t}}),w.setNext(I),D=new re(this),I.setNext(D),S=new je(this,{profileId:t}),D.setNext(S),E=new Z(this),S.setNext(E),b=new An(this),E.setNext(b),L=new U(this),b.setNext(L),C=this.match.getMatchState(),[4,o.processAsync(C)];case 1:return _state.sent(),[3,3];case 2:return this.p(),[7];case 3:return[2]}})}).call(this)}}]),od}(G);a(od,"JoinTournamentConcrete");var ad=od,By=ad;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var _v=Ludex.Dtos,kv=Ludex.Utils,Gv=kv.Object,id=/*#__PURE__*/function(M){function id(){return _class_call_check(this,id),_call_super(this,id,arguments)}return _inherits(id,M),_create_class(id,[{key:"processAsync",value:function processAsync(e){var _this=this,_this1=this,_superprop_get_processAsync=function(){return _get(_get_prototype_of(id.prototype),"processAsync",_this)};return _async_to_generator(function(){var t;return _ts_generator(this,function(_state){switch(_state.label){case 0:return _superprop_get_processAsync().call(_this1,e),[4,this.Jn(e)];case 1:return t=_state.sent(),this.fa(e,t),[4,this.s(e)];case 2:return _state.sent(),[2]}})}).call(this)}},{key:"Jn",value:function Jn(e){return _async_to_generator(function(){var _this,t,_extraData,_tmp;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(!(t=e.id))return[3,2];return[4,this.te.api.getMatchAPI().getMatchDetailByIdAsync(t)];case 1:return _tmp=null!=(_extraData=null==(_this=_state.sent())?void 0:_this.extraData)?_extraData:{},[3,3];case 2:_tmp={},_state.label=3;case 3:return[2,_tmp]}})}).call(this)}},{key:"fa",value:function fa(e,t){var r=Gv.merge(e.customData,t);e.customData=new _v.Match.CustomData(r).toObject()}}]),id}(M);a(id,"GetMatchCustomDataHandler");var sd=id,Uy=sd;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var Fv=Ludex.Dtos,Bv=Ludex.Utils,Uv=Bv.Object,ld=/*#__PURE__*/function(M){function ld(e,t){var _this;return _class_call_check(this,ld),_define_property(_this=_call_super(this,ld,[e]),"e",void 0),_this.e=t,_this}return _inherits(ld,M),_create_class(ld,[{key:"processAsync",value:function processAsync(e){var _this=this,_this1=this,_superprop_get_processAsync=function(){return _get(_get_prototype_of(ld.prototype),"processAsync",_this)};return _async_to_generator(function(){return _ts_generator(this,function(_state){switch(_state.label){case 0:return _superprop_get_processAsync().call(_this1,e),this.fa(e),[4,this.s(e)];case 1:return _state.sent(),[2]}})}).call(this)}},{key:"fa",value:function fa(e){var t=Uv.merge(e.customData,this.e);e.customData=new Fv.Match.CustomData(t).toObject()}}]),ld}(M);a(ld,"SetMatchCustomDataHandler");var cd=ld,Vy=cd;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var Vv={id:null,mode:null,status:null,startAt:0,finishAt:0,profiles:{},customData:N({},Rt)},Ky=Vv,Hy=Ludex.Configs,ud=/*#__PURE__*/function(_Ludex_Plugins_BasePlugin){function ud(){var _this;return _class_call_check(this,ud),_this=_call_super(this,ud,arguments),_define_property(_this,"Qe",void 0),_define_property(_this,"group",void 0),_define_property(_this,"single",void 0),_define_property(_this,"context",void 0),_define_property(_this,"strategy",void 0),_define_property(_this,"challenge",void 0),_define_property(_this,"tournament",void 0),_define_property(_this,"api",void 0),_define_property(_this,"handler",void 0),_define_property(_this,"useCPUProfile",void 0),_this}return _inherits(ud,_Ludex_Plugins_BasePlugin),_create_class(ud,[{key:"init",value:function init(){this.Xn(),this.Zn(),this.ei(),this.ti(),this.ai()}},{key:"setUseCPUProfile",value:function setUseCPUProfile(e){this.useCPUProfile=e}},{key:"Xn",value:function Xn(){this.codex.storage.addStorage("match",Ky)}},{key:"getMatchState",value:function getMatchState(){return this.codex.storage.getStorage("match")}},{key:"ei",value:function ei(){this.Qe=new G(this.codex,this)}},{key:"ti",value:function ti(){this.si(),this.ri(),this.ni(),this.ii(),this.oi(),this.li()}},{key:"ai",value:function ai(){var _this=this;this.handler={setProfileData:a(function(e){return _async_to_generator(function(){var t;return _ts_generator(this,function(_state){switch(_state.label){case 0:return t=new ot(this.Qe,e),[4,this.At(t)];case 1:return _state.sent(),[2]}})}).call(_this)},"setProfileData"),setMatchCustomData:a(function(e){return _async_to_generator(function(){var t;return _ts_generator(this,function(_state){switch(_state.label){case 0:return t=new Vy(this.Qe,e),[4,this.At(t)];case 1:return _state.sent(),[2]}})}).call(_this)},"setMatchCustomData"),getMatchCustomData:a(function(){return _async_to_generator(function(){var e;return _ts_generator(this,function(_state){switch(_state.label){case 0:return e=new Uy(this.Qe),[4,this.At(e)];case 1:return _state.sent(),[2]}})}).call(_this)},"getMatchCustomData"),setLeaderboardScore:a(function(e){return _async_to_generator(function(){var t;return _ts_generator(this,function(_state){switch(_state.label){case 0:return t=new $n(this.Qe,e),[4,this.At(t)];case 1:return _state.sent(),[2]}})}).call(_this)},"setLeaderboardScore")}}},{key:"Zn",value:function Zn(){var e={appId:Hy.AppId,matchAPIHost:Hy.ApiHost};this.api=new Tf(e)}},{key:"si",value:function si(){this.group={join:new Py(this.codex,this),start:new wy(this.codex,this),finish:new gy(this.codex,this)}}},{key:"ri",value:function ri(){this.single={start:new vy(this.codex,this),finish:new $y(this.codex,this)}}},{key:"ii",value:function ii(){this.strategy={start:new by(this.codex,this),finish:new Sy(this.codex,this)}}},{key:"ni",value:function ni(){this.context={choose:new hy(this.codex,this)}}},{key:"oi",value:function oi(){this.challenge={invite:new ry(this.codex,this),friend:new Vf(this.codex,this),join:new cy(this.codex,this),await:new Gf(this.codex,this),result:new my(this.codex,this),finish:new Qf(this.codex,this),continue:new Wf(this.codex,this)}}},{key:"li",value:function li(){this.tournament={join:new By(this.codex,this),create:new Ny(this.codex,this),finish:new Gy(this.codex,this),continue:new Ey(this.codex,this)}}},{key:"At",value:function At(e){var t=this.getMatchState();return e.processAsync(t)}}]),ud}(Ludex.Plugins.BasePlugin);a(ud,"MatchPlugin");var dd=ud,jy=dd;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var _Ludex_Utils40=Ludex.Utils,mt=_Ludex_Utils40.Valid,ht="is invalid",pd=/*#__PURE__*/function(ae){function pd(){return _class_call_check(this,pd),_call_super(this,pd,arguments)}return _inherits(pd,ae),_create_class(pd,[{key:"Q",value:function Q(e){this.Z(e)}},{key:"q",value:function q(e){this.J(e)}},{key:"o",value:function o(e){this.X(e)}},{key:"validateLevel",value:function validateLevel(e){(!mt.isNumber(e)||e<0)&&this.a("level",ht)}},{key:"validateRescued",value:function validateRescued(e){(!mt.isNumber(e)||e<0)&&this.a("rescued",ht)}},{key:"validateContextId",value:function validateContextId(e){mt.isString(e)||this.a("contextId",ht)}},{key:"validatePlayerId",value:function validatePlayerId(e){mt.isString(e)||this.a("playerId",ht)}},{key:"validateOpponentId",value:function validateOpponentId(e){mt.isString(e)||null===e||this.a("opponentId",ht)}},{key:"validateTournamentId",value:function validateTournamentId(e){mt.isString(e)||null===e||this.a("tournamentId",ht)}},{key:"validateLeaderboardId",value:function validateLeaderboardId(e){mt.isString(e)||null===e||this.a("leaderboardId",ht)}},{key:"toObject",value:function toObject(){return _get(_get_prototype_of(pd.prototype),"toObject",this).call(this)}}]),pd}(ae);a(pd,"MatchCustomDataDtos");var sr=pd;sr.makeStrict(),sr.addDefaults(Rt);var Wy=sr;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var _Ludex_Utils41=Ludex.Utils,Ft=_Ludex_Utils41.Valid,Bt="is invalid",md=/*#__PURE__*/function(ae){function md(){return _class_call_check(this,md),_call_super(this,md,arguments)}return _inherits(md,ae),_create_class(md,[{key:"Q",value:function Q(e){this.Z(e)}},{key:"q",value:function q(e){this.J(e)}},{key:"o",value:function o(e){this.X(e)}},{key:"validateId",value:function validateId(e){Ft.isString(e)&&e||this.a("id",Bt)}},{key:"validateName",value:function validateName(e){Ft.isString(e)&&e||this.a("name",Bt)}},{key:"validatePhoto",value:function validatePhoto(e){Ft.isString(e)||this.a("photo",Bt)}},{key:"validateScore",value:function validateScore(e){(!Ft.isNumber(e)||e<0)&&this.a("score",Bt)}},{key:"validateBestScore",value:function validateBestScore(e){(!Ft.isNumber(e)||e<0)&&this.a("bestScore",Bt)}},{key:"validateFinished",value:function validateFinished(e){Ft.isBoolean(e)||this.a("finished",Bt)}},{key:"toObject",value:function toObject(){return _get(_get_prototype_of(md.prototype),"toObject",this).call(this)}}]),md}(ae);a(md,"MatchProfileDtos");var Sn=md;Sn.addDefaults({id:"10",name:"Your Friend",photo:null,score:0,bestScore:0,finished:!1});var zy=Sn;Ludex.Dtos.Match={Data:wn,Profile:zy,CustomData:Wy};var qy=jy;_(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var _Ludex_Utils42=Ludex.Utils,Kv=_Ludex_Utils42.Object,_Ludex_Configs9=Ludex.Configs,Yy=_Ludex_Configs9.ApiHost,Hv=a(function(){var n="players";return GameSDK.isGameSDK("MsGames")?n+="?platform=ms-games":GameSDK.isGameSDK("Yandex")&&(n+="?platform=yandex"),n},"getUrl"),Jy=a(function(n){return _async_to_generator(function(){var t;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(!Yy)return[2,{}];return[4,Ae(Hv(),n,{},Yy,10)];case 1:return t=_state.sent(),[2,Kv.hasOwn(t,"data")&&t.data||{}]}})})()},"updatePlayerProfileAsync"),_Ludex_Utils43=Ludex.Utils,jv=_Ludex_Utils43.Array,bn=_Ludex_Utils43.Object,Wv=_Ludex_Utils43.Valid,Qy=_Ludex_Utils43.Function,_Ludex_Configs10=Ludex.Configs,zv=_Ludex_Configs10.AppId,_Ludex_Events=Ludex.Events,qv=_Ludex_Events.PLAYER_SETTINGS_CHANGED,fd=/*#__PURE__*/function(_Ludex_Plugins_BasePlugin){function fd(){var _this;return _class_call_check(this,fd),_this=_call_super(this,fd,arguments),_define_property(_this,"ci",Qy.mutex()),_define_property(_this,"ls",!1),_this}return _inherits(fd,_Ludex_Plugins_BasePlugin),_create_class(fd,[{key:"init",value:function init(){this.codex.storage.addStorage("player",De)}},{key:"receiveData",value:function receiveData(e,t){var r=this.codex.storage,o=e.playerId,w=e.name,I=e.photo,D=e.locale;r.setStorageData("player","playerId",o),r.setStorageData("player","name",w),r.setStorageData("player","photo",I),r.setStorageData("player","locale",D),t&&(this.setPlayerData(t),this.ls=!t.isFirstLogin)}},{key:"syncDataToSDK",value:function syncDataToSDK(){return _async_to_generator(function(){var e,t,e1;return _ts_generator(this,function(_state){switch(_state.label){case 0:return[4,this.ci.use("syncDataToSDK")];case 1:e=_state.sent(),_state.label=2;case 2:return _state.trys.push([2,4,5,6]),t=this.getPlayerData(),[4,GameSDK.player.setDataAsync(t)];case 3:return _state.sent(),[3,6];case 4:return e1=_state.sent(),[3,6];case 5:return e.release(),[7];case 6:return[2]}})}).call(this)}},{key:"syncProfileToServer",value:function syncProfileToServer(){return _async_to_generator(function(){var e,t,r,o,w,I,D,_ref,S;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(GameSDK.extra.isGuest)throw Error("Guest player cannot sync profile to server");if(e=this.codex.storage,r=(t=this.getPlayer()).playerId,o=t.name,w=t.photo,I=t.locale,D=this.getPlayerASID(),!(!Wv.isString(D)&&"getASIDAsync"in GameSDK.player))return[3,2];return[4,Qy.handleAsync(GameSDK.player.getASIDAsync(),1e4)];case 1:S=(_ref=_sliced_to_array.apply(void 0,[_state.sent(),2]))[0],!_ref[1]&&S&&(D=S,e.setStorageData("player","ASID",D)),_state.label=2;case 2:return[4,Jy({appId:zv,ASID:D,playerId:r,name:o,photo:w,locale:I})];case 3:return _state.sent(),[2]}})}).call(this)}},{key:"setPlayerDataByName",value:function setPlayerDataByName(e,t){this.setPlayerData(_define_property({},e,t))}},{key:"setPlayerData",value:function setPlayerData(e){this.codex.storage.setStorageData("player","data",e),this.syncDataToSDK()}},{key:"setBestScore",value:function setBestScore(e){this.setPlayerDataByName("score",e)}},{key:"setSetting",value:function setSetting(e,t){var r=this.codex.event;this.setPlayerDataByName("settings",_define_property({},e,t)),r.emit(qv,{name:e,value:t})}},{key:"setGameData",value:function setGameData(e){var _this_getGameData,t=null!=(_this_getGameData=this.getGameData())?_this_getGameData:{},r=bn.merge(t,e);this.setPlayerDataByName("gameData",r)}},{key:"requestConnectedPlayers",value:function requestConnectedPlayers(){return _async_to_generator(function(){var e,t,r,o;return _ts_generator(this,function(_state){switch(_state.label){case 0:return e=this.codex.storage,[4,GameSDK.player.getConnectedPlayersAsync()];case 1:if(t=_state.sent().map(function(w){var I=w.getID(),D=w.getName(),S=w.getPhoto();return I&&D&&S?new It({playerId:I,name:D,photo:S}).toObject():null}),(r=jv.unique(t)).length<1)return[2];return o=bn.keyBy(r,"playerId"),e.setStorageData("player","connectedPlayers",o),[2]}})}).call(this)}},{key:"getPlayer",value:function getPlayer(){return this.codex.storage.getStorage("player")}},{key:"getPlayerId",value:function getPlayerId(){var _e_getStorageData;return null!=(_e_getStorageData=this.codex.storage.getStorageData("player","playerId"))?_e_getStorageData:""}},{key:"getPlayerASID",value:function getPlayerASID(){var _e_getStorageData;return null!=(_e_getStorageData=this.codex.storage.getStorageData("player","ASID"))?_e_getStorageData:null}},{key:"getPlayerLocale",value:function getPlayerLocale(){var _e_getStorageData;return null!=(_e_getStorageData=this.codex.storage.getStorageData("player","locale"))?_e_getStorageData:""}},{key:"getPlayerData",value:function getPlayerData(){var _e_getStorageData;return null!=(_e_getStorageData=this.codex.storage.getStorageData("player","data"))?_e_getStorageData:De.data}},{key:"getPlayerDataByKey",value:function getPlayerDataByKey(e){var t=this.getPlayerData();return bn.hasOwn(t,e)?t[e]:null}},{key:"getGameData",value:function getGameData(){return this.getPlayerDataByKey("gameData")}},{key:"getPlayerSetting",value:function getPlayerSetting(e){var t=this.getPlayerSettings();return bn.hasOwn(t,e)?t[e]:null}},{key:"getPlayerSettings",value:function getPlayerSettings(){return this.getPlayerData().settings}},{key:"isFirstLogin",value:function isFirstLogin(){var _this_getPlayerDataByKey;return null!=(_this_getPlayerDataByKey=this.getPlayerDataByKey("isFirstLogin"))?_this_getPlayerDataByKey:De.data.isFirstLogin}},{key:"isFirstSession",value:function isFirstSession(){return!this.ls}},{key:"loggedIn",value:function loggedIn(){this.setPlayerDataByName("isFirstLogin",!1)}},{key:"getBestScore",value:function getBestScore(){return this.getPlayerData().score}},{key:"getConnectedPlayers",value:function getConnectedPlayers(){var _e_getStorageData;return null!=(_e_getStorageData=this.codex.storage.getStorageData("player","connectedPlayers"))?_e_getStorageData:{}}},{key:"getConnectedPlayerIds",value:function getConnectedPlayerIds(e,t){return Object.keys(this.getConnectedPlayers()).slice(t,t+e)}},{key:"getNotificationData",value:function getNotificationData(){var _this_getPlayerDataByKey;return null!=(_this_getPlayerDataByKey=this.getPlayerDataByKey("notificationData"))?_this_getPlayerDataByKey:De.data.notificationData}}]),fd}(Ludex.Plugins.BasePlugin);a(fd,"PlayerPlugin");var hd=fd,Xy=hd;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var Zy=Ludex.Dtos,_Ludex_Utils44=Ludex.Utils,de=_Ludex_Utils44.Valid,HDt=_Ludex_Utils44.Object,_De_data=De.data,Yv=_De_data.score,Jv=_De_data.settings,Qv=_De_data.gameData,Xv=_De_data.isFirstLogin,Zv=_De_data.missionsData,eS=_De_data.notificationData,tS=_De_data.dailyRewardedData,rS=_De_data.lastCallSwitchGame,ue="is invalid",yd=/*#__PURE__*/function(ae){function yd(){return _class_call_check(this,yd),_call_super(this,yd,arguments)}return _inherits(yd,ae),_create_class(yd,[{key:"Ma",value:function Ma(e){de.isObject(e)&&(e.settings=new Zy.Player.Settings(e.settings).toObject(),e.gameData=new Zy.Player.GameData(e.gameData).toObject())}},{key:"Q",value:function Q(e){this.Z(e)}},{key:"q",value:function q(e){this.J(e)}},{key:"o",value:function o(e){this.X(e)}},{key:"validateScore",value:function validateScore(e){(!de.isNumber(e)||e<0)&&this.a("score",ue)}},{key:"validateSettings",value:function validateSettings(e){de.isObject(e)||this.a("settings",ue)}},{key:"validateMissionsData",value:function validateMissionsData(e){de.isObject(e)||this.a("missionsData",ue),"process"in e&&de.isObject(e.process)||this.a("missionsData.process",ue)}},{key:"validateNotificationData",value:function validateNotificationData(e){de.isObject(e)||this.a("notificationData",ue),"D1"in e&&de.isObject(e.D1)||this.a("notificationData.D1",ue),"D2"in e&&de.isObject(e.D2)||this.a("notificationData.D2",ue),"D3"in e&&de.isObject(e.D3)||this.a("notificationData.D3",ue),"D4"in e&&de.isObject(e.D4)||this.a("notificationData.D4",ue),"D5"in e&&de.isObject(e.D5)||this.a("notificationData.D5",ue),"D6"in e&&de.isObject(e.D6)||this.a("notificationData.D6",ue),"D7"in e&&de.isObject(e.D7)||this.a("notificationData.D7",ue)}},{key:"validateGameData",value:function validateGameData(e){de.isObject(e)||this.a("gameData",ue)}},{key:"validateIsFirstLogin",value:function validateIsFirstLogin(e){de.isBoolean(e)||this.a("isFirstLogin",ue)}},{key:"validateDailyRewardedData",value:function validateDailyRewardedData(e){de.isObject(e)||this.a("dailyRewardedData",ue)}},{key:"validateLastCallSwitchGame",value:function validateLastCallSwitchGame(e){de.isNumber(e)||this.a("lastCallSwitchGame",ue),e<0&&this.a("lastCallSwitchGame",ue)}},{key:"toObject",value:function toObject(){return _get(_get_prototype_of(yd.prototype),"toObject",this).call(this)}}]),yd}(ae);a(yd,"PlayerDataDtos");var Dn=yd;Dn.addDefaults({score:Yv,settings:Jv,gameData:Qv,isFirstLogin:Xv,missionsData:Zv,notificationData:eS,dailyRewardedData:tS,lastCallSwitchGame:rS});var eg=Dn;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var _Ludex_Utils45=Ludex.Utils,tg=_Ludex_Utils45.Valid,_De_data_gameData=De.data.gameData,nS=_De_data_gameData.level,aS=_De_data_gameData.coins,gd=/*#__PURE__*/function(ae){function gd(){return _class_call_check(this,gd),_call_super(this,gd,arguments)}return _inherits(gd,ae),_create_class(gd,[{key:"Q",value:function Q(e){this.Z(e)}},{key:"q",value:function q(e){this.J(e)}},{key:"o",value:function o(e){this.X(e)}},{key:"validateLevel",value:function validateLevel(e){(!tg.isNumber(e)||e<0)&&this.a("level","is invalid")}},{key:"validateCoins",value:function validateCoins(e){(!tg.isNumber(e)||e<0)&&this.a("coins","is invalid")}},{key:"toObject",value:function toObject(){return _get(_get_prototype_of(gd.prototype),"toObject",this).call(this)}}]),gd}(ae);a(gd,"PlayerGameDataDtos");var In=gd;In.addDefaults({level:nS,coins:aS});var rg=In;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var _Ludex_Utils46=Ludex.Utils,En=_Ludex_Utils46.Valid,_De_data_settings=De.data.settings,oS=_De_data_settings.sound,sS=_De_data_settings.music,iS=_De_data_settings.vibrate,cS=_De_data_settings.language,Ln="is invalid",Pd=/*#__PURE__*/function(ae){function Pd(){return _class_call_check(this,Pd),_call_super(this,Pd,arguments)}return _inherits(Pd,ae),_create_class(Pd,[{key:"Q",value:function Q(e){this.Z(e)}},{key:"q",value:function q(e){this.J(e)}},{key:"o",value:function o(e){this.X(e)}},{key:"validateSound",value:function validateSound(e){En.isBoolean(e)||this.a("sound",Ln)}},{key:"validateMusic",value:function validateMusic(e){En.isBoolean(e)||this.a("music",Ln)}},{key:"validateVibrate",value:function validateVibrate(e){En.isBoolean(e)||this.a("vibrate",Ln)}},{key:"validateLanguage",value:function validateLanguage(e){En.isString(e)&&e||this.a("language",Ln)}},{key:"toObject",value:function toObject(){return _get(_get_prototype_of(Pd.prototype),"toObject",this).call(this)}}]),Pd}(ae);a(Pd,"PlayerSettingsDtos");var Cn=Pd;Cn.addDefaults({sound:oS,music:sS,vibrate:iS,language:cS});var ng=Cn;Ludex.Dtos.Player={Info:It,Data:eg,Settings:ng,GameData:rg};var ag=Xy;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var _Ludex_Configs11=Ludex.Configs,og=_Ludex_Configs11.ApiHost,lS=_Ludex_Configs11.Mockup,_Ludex_Utils47=Ludex.Utils,dS=_Ludex_Utils47.Object,uS=_Ludex_Utils47.String,wd=/*#__PURE__*/function(){function wd(){_class_call_check(this,wd),_define_property(this,"I",void 0)}return _create_class(wd,[{key:"ue",value:function ue(){return _async_to_generator(function(){var e;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(this.I)return[2];return[4,Promise.resolve().then(function(){return _(),Q})];case 1:if("function"!=typeof(e=_state.sent().default))throw Error("Cannot load ProfileAPIMock");return this.I=new e,[2]}})}).call(this)}},{key:"getPlayersAsync",value:function getPlayersAsync(e){return _async_to_generator(function(){var t,r;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(t=uS.params(e),!lS.Profile.Enabled)return[3,3];return[4,this.ue()];case 1:return _state.sent(),[4,this.I.getPlayersAsync(e)];case 2:return r=_state.sent(),[3,5];case 3:if(!og)return[2,[]];return[4,qe("players?".concat(t),{},og)];case 4:r=_state.sent(),_state.label=5;case 5:return[2,dS.hasOwn(r,"data")&&Array.isArray(r.data)?r.data:[]]}})}).call(this)}}]),wd}();a(wd,"ProfileAPI");var xd=wd,sg=xd;s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var pS={profiles:{},profileIds:[]},$d=pS,mS=Ludex.Utils,hS=Ludex.Dtos,ig=mS.Array,fS=mS.Valid,yS=mS.Object,gS=mS.Function,vd=/*#__PURE__*/function(_Ludex_Plugins_BasePlugin){function vd(){var _this;return _class_call_check(this,vd),_this=_call_super(this,vd,arguments),_define_property(_this,"di",new sg),_this}return _inherits(vd,_Ludex_Plugins_BasePlugin),_create_class(vd,[{key:"init",value:function init(){this.codex.storage.addStorage("profile",$d)}},{key:"requestProfiles",value:function requestProfiles(e){return _async_to_generator(function(){var _this,t,r,o,w,I;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(_this=this,t=this.getProfileIds(),(r=ig.difference(e,t)).length<1)return[2];return o=ig.chunk(r,400).map(function(D){return _this.di.getPlayersAsync({playerIds:D})}),[4,gS.allSettled(o)];case 1:if(w=_state.sent().reduce(function(D,S){return"fulfilled"===S.status?D.concat(S.value):D},[]),!this.hi(w))return[2];return I=this.ui(w),this.pi(I),[2]}})}).call(this)}},{key:"getProfile",value:function getProfile(e){var _this_getProfiles_e;return null!=(_this_getProfiles_e=this.getProfiles()[e])?_this_getProfiles_e:null}},{key:"getProfiles",value:function getProfiles(){var _e_getStorageData;return null!=(_e_getStorageData=this.codex.storage.getStorageData("profile","profiles"))?_e_getStorageData:$d.profiles}},{key:"pi",value:function pi(e){var t=this.codex.storage;t.setStorageData("profile","profiles",e),t.setStorageData("profile","profileIds",Object.keys(e))}},{key:"getProfileIds",value:function getProfileIds(){var _e_getStorageData;return null!=(_e_getStorageData=this.codex.storage.getStorageData("profile","profileIds"))?_e_getStorageData:[]}},{key:"hi",value:function hi(e){return!(!Array.isArray(e)||e.length<1)}},{key:"ui",value:function ui(e){var t={},_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=e[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var r=_step.value;yS.hasOwn(r,"playerId")&&fS.isString(r.playerId)&&(t[r.playerId]=new hS.Player.Info(r).toObject())}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return t}}]),vd}(Ludex.Plugins.BasePlugin);a(vd,"ProfilePlugin");var Ad=vd,cg=Ad,lg=cg;_(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var dg="Save The Pets",_Ludex_Utils48=Ludex.Utils,Sd=_Ludex_Utils48.Object,ug=_Ludex_Utils48.Valid,pg=_Ludex_Utils48.Browser,Dd=/*#__PURE__*/function(_Ludex_Plugins_BasePlugin){function Dd(e){var _this;return _class_call_check(this,Dd),_define_property(_this=_call_super(this,Dd,[e]),"Ee",void 0),_define_property(_this,"cs",{}),_this.Ee={},_this}return _inherits(Dd,_Ludex_Plugins_BasePlugin),_create_class(Dd,[{key:"addStorage",value:function addStorage(_0,_1){return _async_to_generator(function(e,t){var r,_tmp,_arguments=arguments;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(r=_arguments.length>2&&void 0!==_arguments[2]&&_arguments[2],this.Ee[e]=t,!(_tmp=r))return[3,2];return[4,this.yi(e,t)];case 1:_tmp=_state.sent(),_state.label=2;case 2:return[2]}})}).apply(this,arguments)}},{key:"yi",value:function yi(e,t){return _async_to_generator(function(){var r,o,_iteratorNormalCompletion,_didIteratorError,_iteratorError,_iterator,_step,w;return _ts_generator(this,function(_state){switch(_state.label){case 0:return this.cs[e]=!0,[4,pg.getIndexedDB("".concat(dg,"_S_").concat(e))];case 1:if(r=_state.sent(),!ug.isObject(r))return[2];o=Object.keys(t),_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(_iterator=o[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0)w=_step.value,Sd.hasOwn(r,w)&&_type_of(t[w])==_type_of(r[w])&&this.setStorageData(e,w,r[w])}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return[2]}})}).call(this)}},{key:"initStorageData",value:function initStorageData(e,t,r){this.Ee[e][t]=r}},{key:"setStorageData",value:function setStorageData(e,t,r){var o;if(ug.isObject(r)){var w=this.getStorageData(e,t);o=Sd.merge(w,r)}else o=r;this.Ee[e][t]=o}},{key:"getStorageData",value:function getStorageData(e,t){return this.getStorage(e)[t]}},{key:"getStorage",value:function getStorage(e){return this.Ee[e]}},{key:"updateToWebStorage",value:function updateToWebStorage(_0){return _async_to_generator(function(e){var _this,t,_arguments=arguments;return _ts_generator(this,function(_state){return _this=this,t=_arguments.length>1&&void 0!==_arguments[1]&&_arguments[1],this.cs[e]&&requestAnimationFrame(function(){return _this.mi(e,t)}),[2]})}).apply(this,arguments)}},{key:"mi",value:function mi(_0){return _async_to_generator(function(e){var t,r,_arguments=arguments;return _ts_generator(this,function(_state){switch(_state.label){case 0:return t=_arguments.length>1&&void 0!==_arguments[1]&&_arguments[1],r=this.getStorage(e),[4,pg.setIndexedDB("".concat(dg,"_S_").concat(e),r)];case 1:return _state.sent(),t&&Sd.assign(this.Ee[e],{}),[2]}})}).apply(this,arguments)}}]),Dd}(Ludex.Plugins.BasePlugin);a(Dd,"StoragePlugin");var bd=Dd,mg=bd,hg=mg;_(),_(),_(),_(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var _Ludex_Utils49=Ludex.Utils,fg=_Ludex_Utils49.Object,_Ludex_Plugins6=Ludex.Plugins,_Ludex_Plugins_Ads=_Ludex_Plugins6.Ads,We=_Ludex_Plugins_Ads.Status,Je=_Ludex_Plugins_Ads.Types,Tn=_Ludex_Plugins_Ads.AdError,PS=_Ludex_Plugins_Ads.AdInstance,Ed=/*#__PURE__*/function(PS){function Ed(e,t){var _this;return _class_call_check(this,Ed),_define_property(_this=_call_super(this,Ed,[e,t]),"R",void 0),_define_property(_this,"B",void 0),_define_property(_this,"Je",[]),_this.R=GameSDK.getSDKName(),_this.B=null,_this}return _inherits(Ed,PS),_create_class(Ed,[{key:"setInstance",value:function setInstance(e){e||this.setStatus(We.IDLE),this.B=e}},{key:"loadAsync",value:function loadAsync(){return _async_to_generator(function(){var _$e,e,_self_codex_analytics;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(this.B&&this.status===We.FILLED)return[3,5];if(this.status!==We.IDLE)throw new Tn("AD_NOT_READY","Ad is not ready.");_state.label=1;case 1:return _state.trys.push([1,4,,5]),[4,this.fi(this.type)];case 2:if(_$e=_state.sent(),this.setInstance(_$e),null===this.B)throw new Tn("AD_INSTANCE_NOT_INITIATED","Ad instance didn't initiated.");return this.setStatus(We.LOADING),[4,this.B.loadAsync()];case 3:return _state.sent(),this.setStatus(We.FILLED),this.gi(),[3,5];case 4:throw e=_state.sent(),this.setStatus(We.IDLE),_instanceof(e,Object)&&"code"in e&&"INVALID_PARAM"===e.code&&this.setInstance(null),this.B&&this.wi(this.B),null==(_self_codex_analytics=self.codex.analytics)||_self_codex_analytics.loadAdFail({type:this.type,service:this.R}),e;case 5:return[2]}})}).call(this)}},{key:"showAsync",value:function showAsync(){return _async_to_generator(function(){var e,_self_codex_analytics,t,_self_codex_analytics1;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(this.status!==We.FILLED)throw new Tn("AD_NOT_FILLED","Ad is not filled.");if(null===this.B)throw new Tn("AD_INSTANCE_NOT_INITIATED","Ad instance didn't initiated.");e=!1,_state.label=1;case 1:return _state.trys.push([1,3,4,5]),this.setStatus(We.SHOWING),null==(_self_codex_analytics=self.codex.analytics)||_self_codex_analytics.showingAd({type:this.type,service:this.R}),[4,this.B.showAsync()];case 2:return _state.sent(),e=!0,this.setInstance(null),[3,5];case 3:throw t=_state.sent(),fg.hasOwn(t,"code")&&("AD_NOT_LOADED"===t.code&&this.setStatus(We.IDLE),["INVALID_PARAM","INVALID_OPERATION","USER_INPUT"].indexOf("".concat(t.code))>-1&&this.setInstance(null),"USER_INPUT"===t.code&&(e=!0)),this.status===We.SHOWING&&this.setInstance(null),t;case 4:return e?this.xi():null==(_self_codex_analytics1=self.codex.analytics)||_self_codex_analytics1.showAdFail({type:this.type,service:this.R}),[7];case 5:return[2]}})}).call(this)}},{key:"fi",value:function fi(e){return _async_to_generator(function(){var t;return _ts_generator(this,function(_state){switch(_state.label){case 0:return _state.trys.push([0,2,,3]),[4,this.Ai(e)];case 1:return[2,_state.sent()];case 2:return t=_state.sent(),[2,fg.hasOwn(t,"code")&&"ADS_TOO_MANY_INSTANCES"===t.code?this.vi():null];case 3:return[2]}})}).call(this)}},{key:"Ai",value:function Ai(e){return _async_to_generator(function(){return _ts_generator(this,function(_state){switch(e){case Je.REWARDED_VIDEO:return[2,GameSDK.getRewardedVideoAsync(this.placementId)];case Je.INTERSTITIAL:return[2,GameSDK.getInterstitialAdAsync(this.placementId)];case Je.REWARDED_INTERSTITIAL:return[2,GameSDK.getRewardedInterstitialAsync(this.placementId)];default:return[2,null]}})}).call(this)}},{key:"vi",value:function vi(){if(!("canLoadAd"in GameSDK.extra))return this.Je.shift()||null;var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=this.Je[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var e=_step.value;if(GameSDK.extra.canLoadAd(e))return this.Je.splice(this.Je.indexOf(e),1),e}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return null}},{key:"gi",value:function gi(){var _self_codex_analytics,_self_codex_analytics1,_self_codex_analytics2;switch(this.type){case Je.INTERSTITIAL:null==(_self_codex_analytics=self.codex.analytics)||_self_codex_analytics.loadInterstitialAd({service:this.R});break;case Je.REWARDED_VIDEO:null==(_self_codex_analytics1=self.codex.analytics)||_self_codex_analytics1.loadRewardedVideoAd({service:this.R});break;case Je.REWARDED_INTERSTITIAL:null==(_self_codex_analytics2=self.codex.analytics)||_self_codex_analytics2.loadRewardedInterstitialAd({service:this.R})}}},{key:"xi",value:function xi(){var _self_codex_analytics,_self_codex_analytics1,_self_codex_analytics2;switch(this.type){case Je.INTERSTITIAL:null==(_self_codex_analytics=self.codex.analytics)||_self_codex_analytics.showInterstitialAd({service:this.R});break;case Je.REWARDED_VIDEO:null==(_self_codex_analytics1=self.codex.analytics)||_self_codex_analytics1.showRewardedVideoAd({service:this.R});break;case Je.REWARDED_INTERSTITIAL:null==(_self_codex_analytics2=self.codex.analytics)||_self_codex_analytics2.showRewardedInterstitialAd({service:this.R})}}},{key:"wi",value:function wi(e){this.Je.push(e)}}]),Ed}(PS);a(Ed,"NormalAdInstance");var Id=Ed,yg=Id;_(),_(),_(),_(),_(),s(),i(),c(),l(),d(),x(),u(),p(),m(),h(),f(),y(),g(),P();var _Ludex_Plugins_Analytics=Ludex.Plugins.Analytics,xS=_Ludex_Plugins_Analytics.BaseAnalytics,st=_Ludex_Plugins_Analytics.Events,wS=[st.SCREEN_OPEN],_Ludex_Utils50=Ludex.Utils,$S=_Ludex_Utils50.Array,Cd=/*#__PURE__*/function(xS){function Cd(e,t){return _class_call_check(this,Cd),_call_super(this,Cd,[e,"GoogleAnalytics",be(N({},t),{color:"#E35335"})])}return _inherits(Cd,xS),_create_class(Cd,[{key:"wr",value:function wr(e,t){$S.has(wS,e)||(this.Pi(e,t),gtag("event",e,t))}},{key:"Pi",value:function Pi(e,t){switch(e){case st.AD_LOAD:case st.AD_LOAD_FAILED:case st.AD_SHOW:case st.AD_SHOW_FAILED:case st.AD_SHOWING:case st.USE_ITEM:case st.EARN_ITEM:this.Ii(t)}}},{key:"Ii",value:function Ii(e){if(e&&(null==(_this_codex=this.codex)?void 0:_this_codex.match)){var _this_codex,t=this.codex.match.getMatchState().customData.level;!t||t<0||(e.level_name=this.getLevelName(t))}}}]),Cd}(xS);a(Cd,"GoogleAnalytics");var Ld=Cd,Mn=Ld;_(),_(),_(),_(),wr();var gg="production",Td=2,AS=Ludex.Dtos,it=Ludex.Events,_Ludex_Configs12=Ludex.Configs,vS=_Ludex_Configs12.AppId,Qe=_Ludex_Configs12.Ads,SS=_Ludex_Configs12.Context,ze=_Ludex_Configs12.Debugger,Pg=_Ludex_Configs12.Firebase,ir=_Ludex_Configs12.Analytics,bS=_Ludex_Configs12.Notification,DS=_Ludex_Configs12.RemoteConfig,IS=_Ludex_Configs12.PerformanceMonitor,xg=_Ludex_Configs12.AdaptivePerformance,ES=Ludex.Plugins,_Ludex_Utils51=Ludex.Utils,LS=_Ludex_Utils51.Device,wg=_Ludex_Utils51.Object,cr=_Ludex_Utils51.Json,$g=_Ludex_Utils51.String,CS=_Ludex_Utils51.Valid,TS=_Ludex_Utils51.Time,Ag=_Ludex_Utils51.Function,vg=_Ludex_Utils51.Mark,Od=/*#__PURE__*/function(Qm){function Od(){var _this,_this1;return _class_call_check(this,Od),_this=_call_super(this,Od,arguments),_define_property(_this1=_this,"y","Core Initialize"),_define_property(_this1,"me",[]),_define_property(_this1,"ds",a(function(){return _async_to_generator(function(){var _this_mark,_this_context,_this_context1,_this_context2,_this_mark1,_$e,e,_this_monitorError;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(!SS.Enabled)return[3,4];_state.label=1;case 1:return _state.trys.push([1,3,,4]),null==(_this_mark=_this1.mark)||_this_mark.putAttr(_this1.y,"Step","Process Context Payload"),[4,null==(_this_context=_this1.context)?void 0:_this_context.detectContextSessionType()];case 2:return _state.sent(),null==(_this_context1=_this1.context)||_this_context1.detectContextGameMode(),_$e=null==(_this_context2=_this1.context)?void 0:_this_context2.getSessionContextType(),null==(_this_mark1=_this1.mark)||_this_mark1.putAttr(_this1.y,"Context Mode",null!=_$e?_$e:"unknown"),[3,4];case 3:return e=_state.sent(),null==(_this_monitorError=_this1.monitorError)||_this_monitorError.sendException(Ag.toError(e)),[3,4];case 4:return[2]}})})()},"processContextSession$")),_define_property(_this1,"qi",a(function(){var _this_player,e=ze.ListPlayerDevIds,t=null==(_this_player=_this1.player)?void 0:_this_player.getPlayerId();"development"!==gg&&t&&0>e.indexOf(t)||(_this1.eo(),_this1.to())},"addDevPlugins$")),_define_property(_this1,"ki",a(function(){_this1.event.getEventEmitCount(Ee.MODULE_PLUGIN_READY)<_this1.me.length||(window.codex=Object.freeze(window.codex),xt(window,"codex"))},"handleProtectGameInstance$")),_define_property(_this1,"Ki",a(function(){if(_this1.canvasRecorder){var e=ze.CanvasRecorder,_e_Options=e.Options,t=_e_Options.Type,r=_e_Options.Quality,o=_e_Options.RecordFps,w=_e_Options.SyncFps;_this1.canvasRecorder.configure({type:t,quality:r,syncFps:w,recordFps:o}),_this1.canvasRecorder.setPanelExpanded(e.PanelExpanded)}},"initCanvasRecorderPlugin$")),_define_property(_this1,"Bi",a(function(){if(_this1.monitorError){var _this_player,_window_disableSimpleTrackErrors,_window,_this_player_getPlayer,e=ze.MonitorError,t=ze.ListPlayerDevIds,r=e.ApiKey,o=e.Service,w=e.TrackUser,I=e.FilterErrors,_ref=null!=(_this_player_getPlayer=null==(_this_player=_this1.player)?void 0:_this_player.getPlayer())?_this_player_getPlayer:{},D=_ref.playerId,S=_ref.name;D&&t.indexOf(D)>=0||(null==(_window_disableSimpleTrackErrors=(_window=window).disableSimpleTrackErrors)||_window_disableSimpleTrackErrors.call(_window),_this1.monitorError.configure({apiKey:r,service:o,trackUser:w,releaseStage:gg,buildVersion:"".concat(null!=Td?Td:1)}),_this1.monitorError.setUser({id:null!=D?D:null,name:null!=S?S:null}),_this1.monitorError.addFilterErrors(I),_this1.oo(),_this1.lo())}},"initMonitorErrorPlugin$")),_define_property(_this1,"oo",a(function(){_this1.event.catchUp(it.PLAYER_INFO_LOADED,_this1.co)},"updateMonitorErrorUserAndMetadata$")),_define_property(_this1,"lo",a(function(){if(_this1.monitorError&&Array.isArray(window.__errorQueue)){var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=window.__errorQueue[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var e=_step.value;if(_instanceof(e,Error))_this1.monitorError.sendException(e);else{var t=Ag.toError(e);_this1.monitorError.sendException(t)}}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}window.__errorQueue=null}},"processErrorsQueue$")),_define_property(_this1,"co",a(function(){if(_this1.player&&_this1.monitorError){var _this_player_getPlayer=_this1.player.getPlayer(),e=_this_player_getPlayer.playerId,t=_this_player_getPlayer.name;_this1.monitorError.setUser({id:e,name:t}),_this1.monitorError.addMetadata({isFirstSession:_this1.player.isFirstSession()})}},"processWhenPlayerInfoLoaded$")),_define_property(_this1,"ho",a(function(e){try{var _this_player,t=_define_property({},e.type,e);null==(_this_player=_this1.player)||_this_player.setPlayerDataByName("remoteConfig",t)}catch(e){}},"handleSaveRemoteConfig$")),_define_property(_this1,"uo",a(function(e){try{var _this_ads,t=e.id,r=e.type;if("Ludex"!==r)return;Ludex.Configs=wg.merge(Ludex.Configs,e.config);var o=Ludex.Configs.Ads;null==(_this_ads=_this1.ads)||_this_ads.configure(o),_this1.event.emit(Ee.REMOTE_CONFIG_UPDATED,{id:t,type:r})}catch(e){}},"handleUpdateLudexConfig$")),_define_property(_this1,"po",a(function(){if(_this1.player&&_this1.remoteConfig){var e=_this1.player.getPlayerDataByKey("remoteConfig");if(e){for(var t in e)if(wg.hasOwn(e,t)){var r=e[t],o=cr.clone(r),w=new AS.RemoteConfig.Data(o).toObject();_this1.remoteConfig.setRemoteConfig(w),_this1.remoteConfig.processUpdateConfig(w.id,w.type)}}}},"handleStorageCurrentRemoteConfig$")),_define_property(_this1,"Wi",a(function(){if(_this1.adaptivePerformance){var e=cr.clone(xg);_this1.adaptivePerformance.configure(e)}},"initAdaptivePerformancePlugin$")),_define_property(_this1,"Yi",a(function(){if(_this1.inputRecorder){var e=ze.InputRecorder,t=cr.clone(e);t&&_this1.inputRecorder.configure(t)}},"initInputRecorderPlugin$")),_define_property(_this1,"yo",a(function(){bS.Enabled&&_this1.mo()},"processAfterSyncProfile$")),_this}return _inherits(Od,Qm),_create_class(Od,[{key:"getBuildVersion",value:function getBuildVersion(){return parseInt(Td,10)||0}},{key:"boot",value:function boot(){var _this=this,_this1=this,_superprop_get_boot=function(){return _get(_get_prototype_of(Od.prototype),"boot",_this)};return _async_to_generator(function(){var _this_mark,_this_mark1,_this_mark2,_this_mark3;return _ts_generator(this,function(_state){return _superprop_get_boot().call(_this1),this.Di(),this.Si(),this.event.emit(it.CORE_BOOTING),this.Ei(),this.bi(),this.Li(),ir.Enabled&&(null==(_this_mark=this.mark)||_this_mark.putAttr(this.y,"Step","Init Analytics"),this.Oi(),this._i(),this.Ni(),this.Ti(),this.Ci(),this.Ri(),this.Mi(),this.$i()),null==(_this_mark1=this.mark)||_this_mark1.putAttr(this.y,"Step","Init Plugins"),this.Gi(),this.Ui(),this.Fi(),null==(_this_mark2=this.mark)||_this_mark2.putAttr(this.y,"Step","Load Lazy Plugins"),CS.isDebugger()||this.event.on(it.MODULE_PLUGIN_READY,this.ki),this.ji().then(this.Bi),this.Hi().then(this.Ki),this.Vi().then(this.Wi),this.zi().then(this.Yi),null==(_this_mark3=this.mark)||_this_mark3.putAttr(this.y,"Step","Load Dev Plugins"),this.event.catchUp(it.GAME_SDK_READY,this.qi),[2]})}).call(this)}},{key:"Ei",value:function Ei(){return _async_to_generator(function(){return _ts_generator(this,function(_state){switch(_state.label){case 0:return[4,TS.sleepAsync(5e3)];case 1:return _state.sent(),this.event.getEventListeners(it.CORE_BOOTING).length,[2]}})}).call(this)}},{key:"start",value:function start(){var _this=this,_this1=this,_superprop_get_start=function(){return _get(_get_prototype_of(Od.prototype),"start",_this)};return _async_to_generator(function(){var _this_mark,_this_mark1,_this_auth,_this_mark2,_this_mark3,_this_mark4,_this_mark5,_this_mark6,_tmp;return _ts_generator(this,function(_state){switch(_state.label){case 0:return _superprop_get_start().call(_this1),null==(_this_mark=this.mark)||_this_mark.putAttr(this.y,"Step","Core Start"),this.event.emit(it.CORE_STARTING),null==(_this_mark1=this.mark)||_this_mark1.putAttr(this.y,"Step","Request Token"),[4,null==(_this_auth=this.auth)?void 0:_this_auth.requestToken()];case 1:return _state.sent(),null==(_this_mark2=this.mark)||_this_mark2.putAttr(this.y,"Step","Init States"),[4,this.Qi()];case 2:if(_state.sent(),null==(_this_mark3=this.mark)||_this_mark3.putAttr(this.y,"Step","Process Player Profile"),this.Ji(),!(GameSDK.isGameSDK("FacebookInstant")&&LS.isIOS()))return[3,3];return _tmp=this.event.catchUp(it.GAME_SDK_STARTED,this.ds),[3,5];case 3:return[4,this.ds()];case 4:_tmp=_state.sent(),_state.label=5;case 5:return null==(_this_mark4=this.mark)||_this_mark4.putAttr(this.y,"Step","Core Ready"),null==(_this_mark5=this.mark)||_this_mark5.putAttr(this.y,"Success","true"),this.event.emit(it.CORE_READY),null==(_this_mark6=this.mark)||_this_mark6.stop(this.y),[2]}})}).call(this)}},{key:"Di",value:function Di(){this.d("Storage",hg),this.d("Event",ff),this.d("Ads",dh),this.d("Auth",Dh),this.d("Audio",vh),this.d("Match",qy),this.d("Player",ag),this.d("Profile",lg),this.d("Context",cf),this.d("Language",$f),this.d("Missions",O),this.d("Analytics",gh),this.d("Visibility",O),this.d("Leaderboard",If),this.d("DailyRewards",O),this.d("FrameCapture",Pf),this.d("RemoteConfig",O),"Proxy"in window&&this.d("Firebase",O)}},{key:"d",value:function d(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=$g.toCamelCase($g.capitalize(e));this.plugins.install(e,t,!0,o)&&"Storage"!==e&&(r?this.Xi(e):this.Zi(e))}},{key:"ji",value:function ji(){return _async_to_generator(function(){var t,e1;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(_state.trys.push([0,2,,3]),!ze.MonitorError.Enabled)return[2];return this.me.push("MonitorError"),[4,Promise.resolve().then(function(){return _(),Q})];case 1:if("function"!=typeof(t=_state.sent().default))return[2];return this.d("MonitorError",t,!0),[3,3];case 2:return e1=_state.sent(),[3,3];case 3:return[2]}})}).call(this)}},{key:"Hi",value:function Hi(){return _async_to_generator(function(){var t,e1;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(_state.trys.push([0,2,,3]),!ze.CanvasRecorder.Enabled)return[2];return this.me.push("CanvasRecorder"),[4,Promise.resolve().then(function(){return _(),Q})];case 1:if("function"!=typeof(t=_state.sent().default))throw Error("CanvasRecorderPlugin is not a function");return this.d("CanvasRecorder",t,!0),[3,3];case 2:return e1=_state.sent(),[3,3];case 3:return[2]}})}).call(this)}},{key:"Vi",value:function Vi(){return _async_to_generator(function(){var e,e1;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(_state.trys.push([0,2,,3]),!xg.Enabled)return[2];return this.me.push("AdaptivePerformance"),[4,Promise.resolve().then(function(){return _(),Q})];case 1:if("function"!=typeof(e=_state.sent().default))return[2];return this.d("AdaptivePerformance",e,!0),[3,3];case 2:return e1=_state.sent(),[3,3];case 3:return[2]}})}).call(this)}},{key:"zi",value:function zi(){return _async_to_generator(function(){var t,e1;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(_state.trys.push([0,2,,3]),!ze.InputRecorder.Enabled)return[2];return this.me.push("InputRecorder"),[4,Promise.resolve().then(function(){return _(),Q})];case 1:if("function"!=typeof(t=_state.sent().default))return[2];return this.d("InputRecorder",t,!0),[3,3];case 2:return e1=_state.sent(),[3,3];case 3:return[2]}})}).call(this)}},{key:"eo",value:function eo(){return _async_to_generator(function(){var e,t,e1;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(_state.trys.push([0,2,,3]),!(e=ze.Console).Enabled||!e.UseInGameConsole)return[2];return this.me.push("Console"),[4,Promise.resolve().then(function(){return _(),Q})];case 1:if("function"!=typeof(t=_state.sent().default))throw Error("ConsolePlugin is not a function");return this.d("Console",t,!0),this.ao(),[3,3];case 2:return e1=_state.sent(),[3,3];case 3:return[2]}})}).call(this)}},{key:"to",value:function to(){return _async_to_generator(function(){var t,e1;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(_state.trys.push([0,2,,3]),!ze.Profiler.Enabled)return[2];return this.me.push("Profiler"),[4,Promise.resolve().then(function(){return _(),Q})];case 1:if("function"!=typeof(t=_state.sent().default))throw Error("ProfilerPlugin is not a function");return this.d("Profiler",t,!0),this.so(),[3,3];case 2:return e1=_state.sent(),[3,3];case 3:return[2]}})}).call(this)}},{key:"Zi",value:function Zi(e){this.event.emit(Ee.CORE_PLUGIN_READY,{name:e})}},{key:"Xi",value:function Xi(e){this.event.emit(Ee.MODULE_PLUGIN_READY,{name:e})}},{key:"Si",value:function Si(){ze.EventLogging.Enabled&&this.event.enableLogEvent()}},{key:"Ui",value:function Ui(){this.match&&this.match.setUseCPUProfile(!1)}},{key:"Gi",value:function Gi(){var _this_ads,_this_analytics;Qe.Enabled&&(null==(_this_ads=this.ads)||_this_ads.configure(Qe),this.ro(),this.no(),this.io(),null==(_this_analytics=this.analytics)||_this_analytics.initAdEvent({adService:"platform",state:"loaded"}))}},{key:"ro",value:function ro(){return _async_to_generator(function(){var e,t,e1;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(_state.trys.push([0,2,,3]),!(e=Qe.AdServiceConfigs.AdSense).Enabled)return[2];return[4,(t=new O(this)).initAsync({usePreload:e.UsePreload,dataAdHost:e.DataAdHost,dataAdClient:e.DataAdClient,dataAdChannel:e.DataAdChannel,dataAdBreakTest:e.DataAdBreakTest,dataAdFrequencyHint:e.DataAdFrequencyHint})];case 1:return _state.sent(),window.GoogleAds=t,[3,3];case 2:return e1=_state.sent(),[3,3];case 3:return[2]}})}).call(this)}},{key:"no",value:function no(){return _async_to_generator(function(){var e,t,e1;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(_state.trys.push([0,2,,3]),!(e=Qe.AdServiceConfigs.Savana).Enabled)return[2];return[4,(t=new O(this)).initAsync({usePreload:e.UsePreload,dataAdHost:e.DataAdHost,dataAdClient:e.DataAdClient,dataAdChannel:e.DataAdChannel,dataAdBreakTest:e.DataAdBreakTest,dataAdFrequencyHint:e.DataAdFrequencyHint})];case 1:return _state.sent(),window.TranssionH5Ads=t,[3,3];case 2:return e1=_state.sent(),[3,3];case 3:return[2]}})}).call(this)}},{key:"vt",value:function vt(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],_Qe_AdServiceConfigs=Qe.AdServiceConfigs,r=_Qe_AdServiceConfigs.AdSense,o=_Qe_AdServiceConfigs.AppLovin,w=_Qe_AdServiceConfigs.Savana;switch(e){case"adsense":if(r.Enabled)return O;break;case"applovin":o.Enabled;break;case"savana":if(w.Enabled)return O;break;default:return t?O:yg}return null}},{key:"io",value:function io(){var e=ES.Ads.Types,t="default",_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=Qe.InterstitialAdOptions[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var _this_ads,o=_step.value,w=o.PlacementId,I=o.AdService,tmp=o.DeviceOS,D=void 0===tmp?t:tmp,S=this.vt(I);S&&(null==(_this_ads=this.ads)||_this_ads.setAdInstance(e.INTERSTITIAL,w,S,D))}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}var _iteratorNormalCompletion1=!0,_didIteratorError1=!1,_iteratorError1=void 0;try{for(var _step1,_iterator1=Qe.RewardedVideoAdOptions[Symbol.iterator]();!(_iteratorNormalCompletion1=(_step1=_iterator1.next()).done);_iteratorNormalCompletion1=!0){var _this_ads1,o1=_step1.value,w1=o1.PlacementId,I1=o1.AdService,tmp1=o1.DeviceOS,D1=void 0===tmp1?t:tmp1,S1=this.vt(I1);S1&&(null==(_this_ads1=this.ads)||_this_ads1.setAdInstance(e.REWARDED_VIDEO,w1,S1,D1))}}catch(err){_didIteratorError1=!0,_iteratorError1=err}finally{try{_iteratorNormalCompletion1||null==_iterator1.return||_iterator1.return()}finally{if(_didIteratorError1)throw _iteratorError1}}var _iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=Qe.RewardedInterstitialAdOptions[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var _this_ads2,o2=_step2.value,w2=o2.PlacementId,I2=o2.AdService,tmp2=o2.DeviceOS,D2=void 0===tmp2?t:tmp2,S2=this.vt(I2);S2&&(null==(_this_ads2=this.ads)||_this_ads2.setAdInstance(e.REWARDED_INTERSTITIAL,w2,S2,D2))}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{_iteratorNormalCompletion2||null==_iterator2.return||_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}var r=!0,_iteratorNormalCompletion3=!0,_didIteratorError3=!1,_iteratorError3=void 0;try{for(var _step3,_iterator3=Qe.BannerDisplayAdOptions[Symbol.iterator]();!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=!0){var _this_ads3,o3=_step3.value,w3=o3.PlacementId,I3=o3.AdService,tmp3=o3.DeviceOS,D3=void 0===tmp3?t:tmp3,S3=this.vt(I3,r);S3&&(null==(_this_ads3=this.ads)||_this_ads3.setAdInstance(e.BANNER,w3,S3,D3))}}catch(err){_didIteratorError3=!0,_iteratorError3=err}finally{try{_iteratorNormalCompletion3||null==_iterator3.return||_iterator3.return()}finally{if(_didIteratorError3)throw _iteratorError3}}}},{key:"Qi",value:function Qi(){return _async_to_generator(function(){var e,e1;return _ts_generator(this,function(_state){switch(_state.label){case 0:return _state.trys.push([0,2,,3]),(e=new nh(this)).initContext(),[4,e.initPlayer()];case 1:return _state.sent(),[3,3];case 2:return e1=_state.sent(),[3,3];case 3:return[2]}})}).call(this)}},{key:"ao",value:function ao(){this.console&&this.console.configure()}},{key:"so",value:function so(){this.profiler&&this.profiler.configure()}},{key:"Fi",value:function Fi(){if(this.remoteConfig){var e=cr.clone(DS);this.remoteConfig.configure(e),this.event.on(Ee.REQUEST_SAVE_CONFIG,this.ho),this.event.on(Ee.REQUEST_UPDATE_CONFIG,this.uo),this.event.catchUp(Ee.PLAYER_INFO_LOADED,this.po)}}},{key:"bi",value:function bi(){if(Pg.Enabled&&this.firebase){var e=cr.clone(Pg);this.firebase.configure(e),vg.setService(this.firebase.services.performance)}}},{key:"mark",get:function get(){return IS.CoreFlows?vg:null}},{key:"Li",value:function Li(){var e=this.mark;e&&(e.measure(this.y),e.putAttr(this.y,"Build","".concat(Td)),e.putAttr(this.y,"GameSDK",GameSDK.getSDKName()),e.putAttr(this.y,"Platform",GameSDK.getPlatform()),e.putAttr(this.y,"Success","false"),e.start(this.y))}},{key:"Ji",value:function Ji(){return _async_to_generator(function(){var e;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(_state.trys.push([0,2,,3]),!this.player)return[2];return[4,this.player.syncProfileToServer()];case 1:return _state.sent(),this.yo(),[3,3];case 2:return e=_state.sent(),[3,3];case 3:return[2]}})}).call(this)}},{key:"mo",value:function mo(){return _async_to_generator(function(){var e,t,r,o,w,e1;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(_state.trys.push([0,2,,3]),!this.player)return[2];return t=(e=this.player.getPlayer()).ASID,r=e.playerId,o=e.locale,w=!1,"isNEZP"in GameSDK.extra&&(w=GameSDK.extra.isNEZP()),!w&&"isRestricted"in GameSDK.extra&&(w=GameSDK.extra.isRestricted()),[4,th({appId:vS,ASID:t,playerId:r,locale:o,platform:GameSDK.getPlatform(),platformMode:w?"NEZP":"NORMAL"})];case 1:return _state.sent(),[3,3];case 2:return e1=_state.sent(),[3,3];case 3:return[2]}})}).call(this)}},{key:"Oi",value:function Oi(){if(this.analytics){var _ir_GoogleAnalytics,_ref=null!=(_ir_GoogleAnalytics=ir.GoogleAnalytics)?_ir_GoogleAnalytics:{},e=_ref.Enabled,t=_ref.ConsoleLog;e&&"function"==typeof Mn&&_instanceof(Mn.prototype,Object)&&this.analytics.add(new Mn(this.codex,{log:!!t}))}}},{key:"_i",value:function _i(){if(this.analytics){var _this_player,_GameSDK_extra,_ir_ClarityAnalytics,_this_player_getPlayer,_GameSDK_extra_isGuest,_ref=null!=(_ir_ClarityAnalytics=ir.ClarityAnalytics)?_ir_ClarityAnalytics:{},e=_ref.Enabled,t=_ref.ConsoleLog;if(e&&"function"==typeof O&&_instanceof(O.prototype,Object)){var r=new O(this.codex,{log:!!t}),_ref1=null!=(_this_player_getPlayer=null==(_this_player=this.player)?void 0:_this_player.getPlayer())?_this_player_getPlayer:{},o=_ref1.playerId;o&&r.setUser(o,null==(_GameSDK_extra_isGuest=null==(_GameSDK_extra=GameSDK.extra)?void 0:_GameSDK_extra.isGuest)||_GameSDK_extra_isGuest),this.analytics.add(r)}}}},{key:"Ni",value:function Ni(){var _ir_FirebaseAnalytics,_this=this;if(this.analytics){var _ref=null!=(_ir_FirebaseAnalytics=ir.FirebaseAnalytics)?_ir_FirebaseAnalytics:{},e=_ref.Enabled,t=_ref.ConsoleLog;if(e&&"function"==typeof O&&_instanceof(O.prototype,Object)){var r=new O(this.codex,{log:!!t});this.analytics.add(r);var o="no_entry";GameSDK.getEntryPointAsync().then(function(w){o=w}).catch(function(w){}).finally(function(){var _this_player,_this_player_getPlayer,_ref=null!=(_this_player_getPlayer=null==(_this_player=_this.player)?void 0:_this_player.getPlayer())?_this_player_getPlayer:{},w=_ref.playerId,I=_ref.locale,_ref1=GameSDK.getEntryPointData()||{},D=_ref1.fbig_ad_id,S=_ref1.fbig_adset_id,E=_ref1.fbig_campaign_id,b=_ref1.fb_instant_game_adset_id,L=_ref1.fb_instant_game_ad_id,C=_ref1.fb_instant_game_campaign_id,R=D||L,$=S||b,z=E||C;w&&r.setUser(w,{locale:I,ad_id:R,adset_id:$,campaign_id:z,traffic_source:o})})}}}},{key:"Ti",value:function Ti(){this.analytics&&GameSDK.isGameSDK("Yandex")&&"function"==typeof O&&_instanceof(O.prototype,Object)&&this.analytics.add(new O(this.codex))}},{key:"Ci",value:function Ci(){this.analytics&&GameSDK.isGameSDK("Xiaomi")&&"function"==typeof O&&_instanceof(O.prototype,Object)&&this.analytics.add(new O(this.codex))}},{key:"Mi",value:function Mi(){this.analytics&&GameSDK.isGameSDK("Playable")&&"function"==typeof O&&_instanceof(O.prototype,Object)&&this.analytics.add(new O(this.codex))}},{key:"Ri",value:function Ri(){if(this.analytics){var _ir_FacebookAnalytics,_ref=null!=(_ir_FacebookAnalytics=ir.FacebookAnalytics)?_ir_FacebookAnalytics:{},e=_ref.Enabled,t=_ref.Prefix,r=_ref.ConsoleLog;!e||!GameSDK.isGameSDK("FacebookInstant")||"string"==typeof t&&"function"==typeof O&&_instanceof(O.prototype,Object)&&this.analytics.add(new O(this.codex,{prefix:t,log:!!r}))}}},{key:"$i",value:function $i(){this.analytics&&GameSDK.isGameSDK("TranssionH5")&&"function"==typeof O&&_instanceof(O.prototype,Object)&&this.analytics.add(new O(this.codex))}}]),Od}(Qm);a(Od,"MagicCodex");var Md=Od,Sg=Md,_Ludex_Configs13=Ludex.Configs,_Ludex_Configs_GameEngine=_Ludex_Configs13.GameEngine,On=_Ludex_Configs_GameEngine.ForceDesktopDPR,_Ludex_Utils52=Ludex.Utils,MS=_Ludex_Utils52.Device,Nd=Ludex.Events,OS=a(function(){return _async_to_generator(function(){var n;return _ts_generator(this,function(_state){switch(_state.label){case 0:return n=new Sg,window.codex=n,("undefined"==typeof globalThis?"undefined":_type_of(globalThis))<"u"&&(globalThis.codex=n),window.__sdkLoad.ensure(1),[4,n.boot()];case 1:return _state.sent(),window.__sdkLoad.ensure(5),n.event.catchUp(Nd.REQUEST_CORE_START,Dg),[2]}})})()},"initGame"),bg=!1,Dg=a(function(){if(!bg){if(1>codex.event.getEventEmitCount(Nd.GAME_SDK_READY))return void codex.event.catchUp(Nd.GAME_SDK_READY,Dg);codex.start(),bg=!0,window.__sdkLoad.ensure(15)}},"startGame");!1!==On&&MS.isDesktop()&&"number"==typeof On&&On>0&&(window.devicePixelRatio=On),OS()}();