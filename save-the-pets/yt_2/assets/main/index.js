System.register("chunks:///main.js",["./TournamentUtils-b668f6fb.js","cc"],(function(){var e,t,n,i,a,o,r,s,l,u,c,h,d,p,y,v,f,m,g,b,S,k,C,w,E,A,T,R,L,P,_,B,D,O,I,N,F,z,x,G,M,U,H,j,W,V,$,q,K,Y,J,X,Z,Q,ee,te,ne,ie,ae,oe,re,se,le,ue,ce,he,de,pe,ye,ve,fe,me,ge,be,Se,ke,Ce,we,Ee,Ae,Te,Re,Le,Pe,_e,Be,De,Oe,Ie,Ne,Fe,ze,xe,Ge,Me,Ue,He,je,We,Ve,$e,qe,Ke,Ye,Je,Xe,Ze,Qe,et,tt,nt,it,at,ot;return{setters:[function(N){e=N._,t=N.a,n=N.b,i=N.c,a=N.d,o=N.e,r=N.f,s=N.g,l=N.h,u=N.i,c=N.j,h=N.R,d=N.k,p=N.l,y=N.m,v=N.A,f=N.G,m=N.n,g=N.C,b=N.o,S=N.p,k=N.q,C=N.r,w=N.s,E=N.t,A=N.u,T=N.E,R=N.L,L=N.S,P=N.v,_=N.w,B=N.x,D=N.W,O=N.y,I=N.z},function(e){N=e.cclegacy,F=e.isCCObject,z=e._decorator,x=e.Animation,G=e.CCString,M=e.CCInteger,U=e.Component,H=e.AudioSource,j=e.director,W=e.UITransform,V=e.CCFloat,$=e.Widget,q=e.tween,K=e.Layout,Y=e.Sprite,J=e.game,X=e.ccenum,Z=e.Button,Q=e.CCBoolean,ee=e.EventTouch,te=e.Vec3,ne=e.Input,ie=e.Node,ae=e.UIOpacity,oe=e.Label,re=e.RichText,se=e.Graphics,le=e.Color,ue=e.sys,ce=e.Director,he=e.EventTarget,de=e.ParticleSystem2D,pe=e.math,ye=e.View,ve=e.Vec2,fe=e.Enum,me=e.Layers,ge=e.find,be=e.ERigidBody2DType,Se=e.RigidBody2D,ke=e.sp,Ce=e.Collider2D,we=e.Contact2DType,Ee=e.SpriteFrame,Ae=e.HingeJoint2D,Te=e.RelativeJoint2D,Re=e.BoxCollider2D,Le=e.Prefab,Pe=e.instantiate,_e=e.CircleCollider2D,Be=e.Mask,De=e.PolygonCollider2D,Oe=e.NodePool,Ie=e.Tween,Ne=e.PhysicsSystem2D,Fe=e.ERaycast2DType,ze=e.Intersection2D,xe=e.JsonAsset,Ge=e.ProgressBar,Me=e.EPhysics2DDrawFlags,Ue=e.DistanceJoint2D,He=e.repeat,je=e.lerp,We=e.approx,Ve=e.EPSILON,$e=e.RealCurve,qe=e.Gradient,Ke=e.bits,Ye=e.random,Je=e.randomRange,Xe=e.randomRangeInt,Ze=e.js,Qe=e.misc,et=e.MeshRenderData,tt=e.pseudoRandom,nt=e.toRadian,it=e.CCClass,at=e.UIRenderer,ot=e.Material}],execute:function(){function rt(t,n,i){var a;if("object"!==e(t)||void 0===n||void 0===i)return a=t,function(e,t,n){var i=n.value;n.value=function(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];if(a.call(this))return null==i?void 0:i.apply(this,n);console.debug("Skipping method call ".concat(String(t)," because component ").concat(this.constructor.name," is not enabled in hierarchy"))}};!function(e,t,n){var i=n.value;n.value=function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];if(this.isValid)return null==i?void 0:i.apply(this,n);console.debug("Skipping method call ".concat(String(t)," because component ").concat(this.constructor.name," is not enabled in hierarchy"))}}(0,n,i)}function st(n,i,a){var o;if("object"!==e(n)||void 0===i||void 0===a)return o=n,function(e,n,i){var a=i.value,r=function(){var e=t((function*(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];if(o.call(this))return yield null==a?void 0:a.apply(this,t);console.debug("Skipping method call ".concat(String(n)," because component ").concat(this.constructor.name," is not enabled in hierarchy"))}));return function(){return e.apply(this,arguments)}}();i.value=r};!function(e,n,i){var a=i.value,o=function(){var e=t((function*(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];if(this.isValid)return yield null==a?void 0:a.apply(this,t);console.debug("Skipping method call ".concat(String(n)," because component ").concat(this.constructor.name," is not enabled in hierarchy"))}));return function(){return e.apply(this,arguments)}}();i.value=o}(0,i,a)}N._RF.push({},"147a4TjOC9PMpdhlBiKEn54","onlyRunInLifeCycle",void 0),N._RF.pop(),N._RF.push({},"6944aqu6zZOGIj+df3KBDrm","onlyRunInLifeCycleAsync",void 0),N._RF.pop(),N._RF.push({},"99384AdWHlKDIyVvCAqSwJE","index",void 0),N._RF.pop(),N._RF.push({},"09236E0KzVAqotP4Yn9R+4m","MissingPropertiesError",void 0);var lt=function(e){n(r,e);var t=i(r);function r(e,n){var i;return a(this,r),(i=t.call(this,"".concat(e," is missing these required properties: [").concat(n.map((function(e){return e.propertyName})).join(", "),"]"))).className=e,i.errors=n,i}return o(r)}(r(Error));N._RF.pop(),N._RF.push({},"4ce5394i3hCZoi5cZm0Vn2l","MissingPropertyError",void 0);var ut=function(e){n(r,e);var t=i(r);function r(e,n){var i;return a(this,r),(i=t.call(this,"".concat(e," is missing the required property: <").concat(n,">"))).className=e,i.propertyName=n,i}return o(r)}(r(Error));N._RF.pop(),N._RF.push({},"a2990W72mRAYaItrPHe4H5V","required",void 0);var ct=Ludex.Utils,ht=ct.String,dt=ct.Valid,pt=codex.monitorError,yt="_compUtils_ReqPropsMap";function vt(e){return null===e}function ft(e){return void 0===e}function mt(e){return vt(e)||ft(e)}function gt(e){if("function"==typeof e)return e;switch(e){case"null-check":return vt;case"undefined-check":return ft;default:return mt}}function bt(e){return function(t,n){if("function"==typeof t)throw new Error("The required decorator can only be applied to non-static class properties.");var i,a=t.constructor.name,o=(i=n,"".concat("_compUtils_ReqPropsMethod","_").concat(ht.capitalize(i)));if(void 0!==t[o])throw new Error("The required decorator found that property name ".concat(o," already exists. The reserved method name ").concat(o," is used already or the decorator was applied multiple times."));t[o]=function(t){if(e(this[n]))throw new ut(t,n)},void 0===t[yt]&&(t[yt]={}),void 0===t[yt][a]&&(t[yt][a]=[]),t[yt][a].push(o)}}function St(e,t){if("string"!=typeof t)return bt(gt(e));var n=e;bt(gt())(n,t)}N._RF.pop(),N._RF.push({},"75e1e0Ei7ZOOr/FzyprYnVJ","index",void 0),N._RF.pop(),N._RF.push({},"95972yG/ulEg4gycbc+QB5Y","ComponentUtils",void 0);var kt,Ct,wt,Et,At,Tt,Rt,Lt,Pt,_t=Ludex.Utils,Bt=_t.Array,Dt=_t.Object,Ot=_t.Valid,It=["cc.Mask","cc.Label","cc.Canvas","cc.Camera","cc.Layout","cc.Button","cc.Sprite","cc.Widget","cc.Renderer","cc.Animation","cc.UIOpacity"],Nt=function(e){n(r,e);var t=i(r);function r(){return a(this,r),t.apply(this,arguments)}return o(r)}(function(){function t(){a(this,t),this.validComponentCalled$={}}return o(t,[{key:"validateRequiredComponents",value:function(e){var t,n=e.name,i=e.constructor,a=this.getRequiredComponentNames(i),o=s(a);try{for(o.s();!(t=o.n()).done;){var r=t.value;if(!e.getComponent(r))throw new Error("".concat(n,": Missing required ").concat(r," component"))}}catch(e){o.e(e)}finally{o.f()}}},{key:"validateRequiredProperties",value:function(e){var t,n=e.name,i=e.constructor,a=this.getRequiredPropNames(i),o=s(a);try{for(o.s();!(t=o.n()).done;){var r=t.value;if(!Dt.hasOwn(e,r))throw new Error("".concat(n,": Missing required ").concat(r," property"));var l=this.getProperty(r,e);if(!F(l))throw new Error("".concat(n,": ").concat(r," property is not a cc object"))}}catch(e){o.e(e)}finally{o.f()}}},{key:"validateCustomProperties",value:function(e){var t,n=e.name,i=this.getCustomPropNames(e),a=s(i);try{for(a.s();!(t=a.n()).done;){var o=t.value;if(!Dt.hasOwn(e,o))throw new Error("".concat(n,": Missing required ").concat(o," property"));var r=this.getProperty(o,e);if(!F(r))throw new Error("".concat(n,": ").concat(o," property is not a cc object"))}}catch(e){a.e(e)}finally{a.f()}}},{key:"getProperty",value:function(e,t){var n;if(Dt.hasOwn(t,e))return(null!==(n=Object.getOwnPropertyDescriptor(t,e))&&void 0!==n?n:{}).value}},{key:"getProps",value:function(e){if(!Dt.hasOwn(e,"__props__"))return[];var t=e.__props__;return Array.isArray(t)?t:[]}},{key:"getRequiredPropNames",value:function(e){return this.getProps(e).filter((function(t){return"node"!==t&&(!!Dt.hasOwn(e,t)&&(!!F(e[t])&&!t.startsWith("_")))}))}},{key:"getBaseComponentName",value:function(e){for(var t=0,n=It;t<n.length;t++){var i=n[t];if(i.indexOf(e)>=0)return i}return e}},{key:"getRequiredComponentNames",value:function(e){var t=this;if(!Dt.hasOwn(e,"_requireComponent"))return[];var n=e._requireComponent;return Array.isArray(n)?n.map((function(e){return t.getBaseComponentName(e)})):[]}},{key:"getCustomPropNames",value:function(e){var t=this,n=Object.keys(e),i=this.getProps(e.constructor);return Bt.difference(n,i).filter((function(e){return e.indexOf("_")<0})).filter((function(n){if(!Dt.hasOwn(e,n))return!1;var i=t.getProperty(n,e);return!(!Ot.isObject(i)||!F(i))}))}}],[{key:"inst",get:function(){return this.inst$||(this.inst$=new this),this.inst$}},{key:"required",value:function(e,t){return"string"==typeof t?St(e,t):St(e)}},{key:"onlyRunInLifeCycle",value:function(t,n,i){return"object"===e(t)&&void 0!==n&&void 0!==i?rt(t,n,i):rt(t)}},{key:"onlyRunInLifeCycleAsync",value:function(t,n,i){return"object"===e(t)&&void 0!==n&&void 0!==i?st(t,n,i):st(t)}},{key:"lazyValidateProperties",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(t){var n=e.constructor,i=n.name;if(!this.inst.validComponentCalled$[i])try{this.inst.validateRequiredComponents(e),this.inst.validateRequiredProperties(e),this.inst.validateCustomProperties(e)}catch(t){e.enabled=!1,console.error(t)}finally{this.inst.validComponentCalled$[i]=!0}}}},{key:"validateRequiredProperties",value:function(e,t){!function(e,t){var n,i,a=t?t.name:e.constructor.name,o=t?t.prototype[yt]:e.constructor.prototype[yt],r=null!==(n=null==o?void 0:o[a])&&void 0!==n?n:[],l=[],u=e,c=s(r);try{for(c.s();!(i=c.n()).done;){var h=i.value;if("function"==typeof u[h])try{u[h](a)}catch(d){if(!(d instanceof ut))throw d;l.push(d)}}}catch(e){c.e(e)}finally{c.f()}if(0!==l.length){var d=new lt(a,l);if(dt.isDebugger())throw d;console.error(d),null==pt||pt.sendException(d)}}(e,t)}}]),t}());N._RF.pop(),N._RF.push({},"60ac3vor0dMT5bXi8D3VSJN","BubbleAnimation",void 0);var Ft,zt=z.ccclass,xt=z.property,Gt=(kt=zt("BubbleAnimation"),Ct=xt(x),wt=xt(G),Et=xt(M),kt((Rt=l((Tt=function(e){n(r,e);var t=i(r);function r(){var e;a(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),u(e,"animation",Rt,c(e)),u(e,"clipName",Lt,c(e)),u(e,"repeat",Pt,c(e)),e.currentRepeat=-1,e}return o(r,[{key:"__preload",value:function(){this.animation=this.getComponent(x),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){Nt.lazyValidateProperties(this)}},{key:"play",value:function(){var e=this;this.animation&&(this.animation.clips.find((function(t){return(null==t?void 0:t.name)===e.clipName}))?(this.currentRepeat=-1,this.animation.play(this.clipName)):console.warn("BubbleAnimation: Animation component must have ".concat(this.clipName," clip")))}},{key:"onBubbleAnimationLoop",value:function(){this.animation&&-1!==this.repeat&&(this.currentRepeat++,this.currentRepeat>this.repeat&&this.animation.stop())}}]),r}(U)).prototype,"animation",[Ct],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Lt=l(Tt.prototype,"clipName",[wt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"Bubble"}}),Pt=l(Tt.prototype,"repeat",[Et],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),At=Tt))||At);N._RF.pop(),N._RF.push({},"cc0a5OvhdRCMZRZuRscaz+7","AudioPlayer",void 0);var Mt=null===(Ft=Ludex.Plugins.Audio)||void 0===Ft?void 0:Ft.BaseAudioPlayer;Mt||(Mt=o((function e(t){a(this,e),console.warn("BaseAudioPlayer is not defined",t)})));var Ut,Ht,jt,Wt=function(e){n(r,e);var t=i(r);function r(e,n){var i;return a(this,r),(i=t.call(this,e)).audioSource=n,i}return o(r,[{key:"play",value:function(e){if(e){var t=e.volume,n=void 0===t?1:t,i=e.loop,a=void 0!==i&&i;this.audioSource.volume=n,this.audioSource.loop=a}this.audioSource.play()}},{key:"pause",value:function(){this.audioSource.pause()}},{key:"resume",value:function(){this.audioSource.state===H.AudioState.PAUSED&&this.audioSource.play()}},{key:"stop",value:function(){this.audioSource.stop()}},{key:"setVolume",value:function(e){this.audioSource.volume=e}},{key:"getVolume",value:function(){return this.audioSource.volume}},{key:"getAudioSource",value:function(){return this.audioSource}}]),r}(Mt);N._RF.pop(),N._RF.push({},"8b5ecHv/+BJiorK1kiVbTcf","AudioChannel",void 0);var Vt=Ludex.Utils,$t=Vt.Array,qt=Vt.Decorator,Kt=null===(Ut=Ludex.Plugins.Audio)||void 0===Ut?void 0:Ut.BaseChannelManager;Kt||(Kt=o((function e(t){a(this,e),console.warn("BaseChannelManager is not defined",t)})));var Yt,Jt,Xt,Zt,Qt,en=(Ht=qt.tryCatch(),l((jt=function(e){n(l,e);var r,s=i(l);function l(e,t){var n;return a(this,l),(n=s.call(this,t)).allowMultipleTracking={},n.handleLoadedAudio=function(e,t){var i=n.node.addComponent(H);return i.clip=t,i.playOnAwake=!1,new Wt(e,i)},n.node=e,n}return o(l,[{key:"playing",value:function(e){var t,n=null===(t=this.getAudioClip(e))||void 0===t?void 0:t.audioPlayer;return!!(n&&n instanceof Wt)&&n.getAudioSource().state===H.AudioState.PLAYING}},{key:"onLoadAudio",value:(r=t((function*(e,t){var n=yield h.loadAudioAsync(e);return n&&this.node.isValid?this.handleLoadedAudio(e,n):null})),function(e,t){return r.apply(this,arguments)})},{key:"playWithRealConfig",value:function(e,t){if(this.isCanPlay(t)){if(t){var n=t.volume,i=void 0===n?1:n,a=t.allowMultiple,o=void 0!==a&&a;if(t.volume=this.getVolume()*i,o){var r=e.getAudioSource().clip;if(!r)return;return void this.requestDuplicateAudioPlayer(e.getKey(),r,t).play(t)}}e.play(t)}}},{key:"isCanPlay",value:function(e){var t=this;if(e){var n=e.checkList;if((void 0===n?[]:n).some((function(e){var n=t.getAudioClip(e);if(n){var i=n.audioPlayer;if(i&&i instanceof Wt)return i.getAudioSource().state===H.AudioState.PLAYING}return!1})))return!1}return!0}},{key:"requestDuplicateAudioPlayer",value:function(e,t,n){var i=this.getDuplicateAudioFromPool(e);if(i){if(n){var a=i.key,o=n.volume,r=void 0===o?1:o;this.setAudioClip(a,{volume:r})}return i.audioPlayer}var s=this.allowMultipleTracking[e];if(!s)throw new Error("Allow multiple tracking is not found");var l="".concat(e,"_").concat(s.currentPostFix),u=this.handleLoadedAudio(l,t);return s.list.push({audioPlayer:u,key:l}),s.currentPostFix+=1,this.setAudioClip(l,{audioPlayer:u,volume:1}),u}},{key:"getDuplicateAudioFromPool",value:function(e){if(this.allowMultipleTracking[e]){var t=this.allowMultipleTracking[e].list,n=$t.search(t,(function(e){return e.audioPlayer.getAudioSource().state!==H.AudioState.PLAYING}));if(n)return n}else this.allowMultipleTracking[e]={currentPostFix:1,list:[]};return null}}]),l}(Kt)).prototype,"onLoadAudio",[Ht],Object.getOwnPropertyDescriptor(jt.prototype,"onLoadAudio"),jt.prototype),jt);N._RF.pop(),N._RF.push({},"1a025mmN7BL7r5cF6gWR4b/","Music",void 0);var tn,nn,an,on,rn,sn=z.ccclass,ln=z.property,un=codex,cn=un.audio,hn=un.player;Yt=sn("Music"),Jt=ln(G),Yt((Qt=l((Zt=function(e){n(r,e);var t=i(r);function r(){var e;a(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),u(e,"channelId",Qt,c(e)),e.channel=null,e.isMute=!1,e.volume=1,e}return o(r,[{key:"__preload",value:function(){cn&&(this.makePersistent(),this.channel=new en(this.node,this.channelId),cn.addChannel(this.channel))}},{key:"makePersistent",value:function(){j.isPersistRootNode(this.node)||j.addPersistRootNode(this.node)}},{key:"playing",value:function(e){var t,n;return null!==(t=null===(n=this.channel)||void 0===n?void 0:n.playing(e))&&void 0!==t&&t}},{key:"play",value:function(e,t){if(this.isMusicEnable()){var n=null!=t?t:{};n.loop||(n.loop=!0),cn.play(e,n,this.channelId)}}},{key:"isMusicEnable",value:function(){return!!hn.getPlayerSetting("music")}},{key:"setVolume",value:function(e){this.volume=e,this.isMute||cn.setVolume(e,this.channelId)}},{key:"getVolume",value:function(){return cn.getVolume(this.channelId)}},{key:"pause",value:function(e){cn.pause(e,this.channelId)}},{key:"resume",value:function(e){this.isMusicEnable()&&cn.resume(e,this.channelId)}},{key:"stop",value:function(e){cn.stop(e,this.channelId)}},{key:"mute",value:function(e){this.isMute=e,e?cn.mute(this.channelId):(this.setVolume(this.volume),cn.unmute(this.channelId))}}]),r}(U)).prototype,"channelId",[Jt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"global_music"}}),Xt=Zt));N._RF.pop(),N._RF.push({},"1299a7X1XNNEKxSKMV6E5jQ","Sound",void 0);var dn,pn,yn,vn,fn,mn,gn,bn,Sn,kn,Cn,wn,En,An,Tn,Rn,Ln,Pn,_n,Bn,Dn=z.ccclass,On=z.property,In=codex,Nn=In.audio,Fn=In.player;tn=Dn("Sound"),nn=On(G),tn((rn=l((on=function(e){n(r,e);var t=i(r);function r(){var e;a(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),u(e,"channelId",rn,c(e)),e.channel=null,e}return o(r,[{key:"__preload",value:function(){Nn&&(this.channel=new en(this.node,this.channelId),Nn.addChannel(this.channel))}},{key:"onLoad",value:function(){}},{key:"makePersistent",value:function(){j.addPersistRootNode(this.node)}},{key:"removePersistent",value:function(){j.removePersistRootNode(this.node)}},{key:"play",value:function(e,t){if(this.isSoundEnable())return Nn.play(e,t,this.channelId)}},{key:"isSoundEnable",value:function(){return!!Fn.getPlayerSetting("sound")}},{key:"setVolume",value:function(e){Nn.setVolume(e,this.channelId)}},{key:"pause",value:function(e){Nn.pause(e,this.channelId)}},{key:"resume",value:function(e){this.isSoundEnable()&&Nn.resume(e,this.channelId)}},{key:"stop",value:function(e){Nn.stop(e,this.channelId)}},{key:"stopAll",value:function(){Nn.stopAll(this.channelId)}},{key:"mute",value:function(e){e?Nn.mute(this.channelId):Nn.unmute(this.channelId)}}]),r}(U)).prototype,"channelId",[nn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),an=on));N._RF.pop(),N._RF.push({},"84a2dB5IaRJ8JB+n9yXfBc7","AutoLayout",void 0);var zn,xn,Gn,Mn,Un,Hn=z.ccclass,jn=z.property,Wn=(dn=Hn("AutoLayoutWrappee"),pn=jn({type:W}),yn=jn({type:W}),dn((mn=l((fn=o((function e(){a(this,e),u(this,"wrapeeContainer",mn,this),u(this,"wrapee",gn,this)}))).prototype,"wrapeeContainer",[pn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gn=l(fn.prototype,"wrapee",[yn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vn=fn))||vn);bn=Hn("AutoLayout"),Sn=jn({displayName:"Use Auto Layout"}),kn=jn({type:[Wn],displayName:"Children",visible:function(){return this.useAutoLayout}}),Cn=jn({visible:!1,serializable:!0}),wn=jn({type:M,displayName:"Selected Index",visible:function(){return this.useAutoLayout}}),En=jn({type:V,displayName:"Deselected Icon Width",group:"Edge Icons",visible:function(){return this.useAutoLayout}}),An=jn({visible:!1,serializable:!0}),bn((Ln=l((Rn=function(e){n(h,e);var r,l=i(h);function h(){var e;a(this,h);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return e=l.call.apply(l,[this].concat(n)),u(e,"useAutoLayout",Ln,c(e)),u(e,"children",Pn,c(e)),e.mappedChildren=[],u(e,"selected",_n,c(e)),u(e,"deselectedIconW",Bn,c(e)),e.tweens=[],e}return o(h,[{key:"selectedIndex",get:function(){return this.selected},set:function(e){this.selected=e,this.updateLayout(!0)}},{key:"deselectedIconWidth",get:function(){return this.deselectedIconW},set:function(e){this.deselectedIconW=e,this.updateLayout(!0)}},{key:"__preload",value:function(){this.mappedChildren=this.children.map((function(e){var t=e.wrapeeContainer.getComponent($);if(!t)throw new Error("AutoLayout: Widget component not found");return d(d({},e),{},{wrapeeContainerWidget:t})}))}},{key:"updateLayout",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this._layoutDirty||e){this.updateChildrenAnchors();var t,n=s(this.mappedChildren);try{for(n.s();!(t=n.n()).done;){var i=t.value;i.wrapeeContainerWidget.updateAlignment()}}catch(e){n.e(e)}finally{n.f()}}p(y(h.prototype),"updateLayout",this).call(this,e)}},{key:"getSelectedWorldX",value:function(){var e=this.mappedChildren[this.selectedIndex].wrapeeContainer;return 0===this.selectedIndex||this.selectedIndex===this.children.length-1?e.getBoundingBoxToWorld().xMin+this.getAnchorX(this.selectedIndex)*e.width:e.getBoundingBoxToWorld().center.x}},{key:"getAnchorX",value:function(e){if(e<this.selectedIndex)return 0;if(e>this.selectedIndex)return 1;if(0===e){var t=this.mappedChildren[e].wrapeeContainer.width,n=this.deselectedIconWidth/2,i=this.paddingLeft;return((i+t+(t-n+this.spacingX))/2-i)/t}if(e===this.children.length-1){var a=this.mappedChildren[e].wrapeeContainer.width,o=a-this.deselectedIconWidth/2+this.spacingX;return((o+a+this.paddingRight)/2-o)/a}return.5}},{key:"updateChildrenAnchors",value:(r=t((function*(){var e,t=this,n=s(this.tweens);try{for(n.s();!(e=n.n()).done;)e.value.stop()}catch(e){n.e(e)}finally{n.f()}this.tweens=[],yield Promise.all([this.children.flatMap((function(e,n){return t.getChildrenAnchorsTweens(e,t.getAnchorX(n))})).map((function(e){return v.runTweenAsync(e)}))])})),function(){return r.apply(this,arguments)})},{key:"updateChildrenAnchorsEditor",value:function(){var e=this;this.children.forEach((function(t,n){var i=e.getAnchorX(n);t.wrapee.setAnchorPoint(i,t.wrapee.anchorY),t.wrapeeContainer.setAnchorPoint(i,t.wrapeeContainer.anchorY)}))}},{key:"getChildrenAnchorsTweens",value:function(e,t){return[q(e.wrapee).to(.3,{anchorX:t},{easing:"sineInOut"}).call((function(){e.wrapee.setAnchorPoint(t,e.wrapee.anchorY)})),q(e.wrapeeContainer).to(.3,{anchorX:t},{easing:"sineInOut"}).call((function(){e.wrapeeContainer.setAnchorPoint(t,e.wrapeeContainer.anchorY)}))]}}]),h}(K)).prototype,"useAutoLayout",[Sn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Pn=l(Rn.prototype,"children",[kn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),_n=l(Rn.prototype,"selected",[Cn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),l(Rn.prototype,"selectedIndex",[wn],Object.getOwnPropertyDescriptor(Rn.prototype,"selectedIndex"),Rn.prototype),l(Rn.prototype,"deselectedIconWidth",[En],Object.getOwnPropertyDescriptor(Rn.prototype,"deselectedIconWidth"),Rn.prototype),Bn=l(Rn.prototype,"deselectedIconW",[An],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Tn=Rn));N._RF.pop(),N._RF.push({},"ca427NpeqpC3bUoGTd9I/BM","Background",void 0);var Vn,$n=z.ccclass,qn=m.Layout;zn=$n("Background"),xn=Nt.required(),zn((Un=l((Mn=function(e){n(r,e);var t=i(r);function r(){var e;a(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),u(e,"sprite",Un,c(e)),e.handleSpriteTypeWhenLayoutChanged=function(t){t===qn.Landscape?e.setBackgroundType(Y.Type.TILED):e.setBackgroundType(Y.Type.SIMPLE)},e}return o(r,[{key:"__preload",value:function(){this.sprite=this.getComponent(Y),Nt.validateRequiredProperties(this),this.listenGameEvents()}},{key:"listenGameEvents",value:function(){J.on(f.LAYOUT_CHANGED,this.handleSpriteTypeWhenLayoutChanged,this)}},{key:"setBackgroundType",value:function(e){this.sprite&&(this.sprite.type=e)}}]),r}(U)).prototype,"sprite",[xn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Gn=Mn));N._RF.pop(),N._RF.push({},"7ddc4vU74pB/LdHrUupDA/G","BlockLines",void 0);var Kn=z.ccclass,Yn=m.Layout;Kn("BlockLines")(Vn=function(e){n(r,e);var t=i(r);function r(){var e;a(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).handleSpriteTypeWhenLayoutChanged=function(t){t===Yn.Landscape?e.setActiveBlockLines(!0):e.setActiveBlockLines(!1)},e}return o(r,[{key:"__preload",value:function(){this.componentSprites=this.getComponentsInChildren(Y),this.validateRequiredComponents(),this.listenGameEvents(),this.handleBlockLinesOnStart()}},{key:"validateRequiredComponents",value:function(){Nt.lazyValidateProperties(this)}},{key:"handleBlockLinesOnStart",value:function(){var e=this.getScreenRatio()>750/1366;this.setActiveBlockLines(e)}},{key:"listenGameEvents",value:function(){J.on(f.LAYOUT_CHANGED,this.handleSpriteTypeWhenLayoutChanged)}},{key:"setActiveBlockLines",value:function(e){var t=this;this.componentSprites&&this.componentSprites.forEach((function(n){n.node!==t.node&&(n.node.active=e)}))}},{key:"getScreenRatio",value:function(){return g.getScreenWidthCss()/g.getScreenHeightCss()}}]),r}(U));N._RF.pop(),N._RF.push({},"d159egaUVVLHKLg1UL865ub","SoundKeys",void 0);var Jn=Ludex.Utils.Object,Xn="sounds/",Zn={BEE_FLYING:"".concat(Xn,"bee-flying"),BEE_STING_DOGE:"".concat(Xn,"bee-sting-doge"),BG_MUSIC:"".concat(Xn,"bg-music"),BUTTON_CLICK:"".concat(Xn,"button-click"),COLLECTING_COINS:"".concat(Xn,"collecting-coins"),DOGE_DIES:"".concat(Xn,"doge-dies"),DOGE_HURT:"".concat(Xn,"doge-hurt"),END_DRAW:"".concat(Xn,"end-draw"),HAND_CLAP:"".concat(Xn,"hand-clap"),LEVEL_FAIL:"".concat(Xn,"level-fail"),LEVEL_PASS:"".concat(Xn,"level-pass"),LOST_STAR_IN_GAMEPLAY:"".concat(Xn,"lost-star-in-gameplay"),RAISE_STAR:"".concat(Xn,"raise-star"),SPAWN_COINS:"".concat(Xn,"spawn-coins"),STAR_RAISE:"".concat(Xn,"star-raise"),TOUCH_START:"".concat(Xn,"touch-start"),BEE_BULLET_EXPLODE:"".concat(Xn,"bee-bullet-explode")},Qn=Jn.vals(Zn).reduce((function(e,t,n){return Jn.assign(e,b({},t,n))}),{});X(Qn);var ei,ti,ni,ii,ai,oi,ri,si,li,ui,ci,hi,di,pi,yi,vi,fi,mi=Jn.invert(Qn);N._RF.pop(),N._RF.push({},"4b299Dv1kVGcqQmJC9yBPAV","ButtonReleased",void 0);var gi=z.ccclass,bi=z.requireComponent,Si=z.property,ki=z.disallowMultiple,Ci=z.executionOrder,wi=codex.analytics;ei=gi("ButtonReleased"),ti=bi([x,Z]),ni=Ci(120),ii=Si(G),ai=Si(G),oi=Si(Q),ri=Si({visible:function(){return this.useSound},type:Qn}),si=Si({tooltip:"Add a delay after click to prevent spamming (not apply for cancel click)"}),li=Si({visible:function(){return this.disableSpamClick},tooltip:"Delay time in seconds"}),ei(ui=ki(ui=ti(ui=ni((hi=l((ci=function(e){n(r,e);var t=i(r);function r(){var e;a(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),u(e,"downClipName",hi,c(e)),u(e,"upClipName",di,c(e)),u(e,"useSound",pi,c(e)),u(e,"soundKey",yi,c(e)),u(e,"disableSpamClick",vi,c(e)),u(e,"disableSpamDelay",fi,c(e)),e.currentClickBoundingBox=null,e.hasDown=!1,e.hasUp=!1,e.onTouchStart=function(t){if(e.buttonComponent.interactable&&!e.hasDown&&(e.currentClickBoundingBox=g.getBoundingBoxToWorld(e.node),e.hasDown=!0,e.runAnimation(e.downClipName),e.useSound&&e.soundKey)){var n=mi[e.soundKey];if(!n)return;S.playSound(n)}},e.onTouchEnd=function(t){e.buttonComponent.interactable&&e.hasDown&&(e.hasUp||e.handleUp(t))},e.onTouchCancel=function(t){var n,i;if(e.buttonComponent.interactable&&e.hasDown&&!e.hasUp){var a=t.getUILocation(),o=null!==(n=null===(i=e.currentClickBoundingBox)||void 0===i?void 0:i.contains(a))&&void 0!==n&&n;t instanceof ee&&o?e.handleUp(t):(e.hasUp=!0,e.runAnimation(e.upClipName),e.animationComponent.once(x.EventType.FINISHED,(function(){e.handleResetButtonState()})))}},e.handleResetButtonState=function(){var t;if(e.hasDown=!1,e.hasUp=!1,e.buttonComponent){var n=e.buttonComponent.node.scale.x,i=e.buttonComponent.node.scale.z;null===(t=e.buttonComponent)||void 0===t||t.node.setScale(new te(n,1,i))}},e}return o(r,[{key:"__preload",value:function(){this.buttonComponent=this.getComponent(Z),this.animationComponent=this.getComponent(x),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){Nt.lazyValidateProperties(this)}},{key:"onEnable",value:function(){this.animationComponent.clips.length<2?console.warn("ButtonAnimAddition: Animation component must have 2 clips in ".concat(this.node.name)):(this.node.off(ne.EventType.TOUCH_END,this.buttonComponent._onTouchEnded,this.buttonComponent),this.node.on(ie.EventType.TOUCH_START,this.onTouchStart),this.node.on(ie.EventType.TOUCH_END,this.onTouchEnd),this.node.on(ie.EventType.TOUCH_CANCEL,this.onTouchCancel))}},{key:"onDisable",value:function(){this.node.off(ie.EventType.TOUCH_START,this.onTouchStart),this.node.off(ie.EventType.TOUCH_END,this.onTouchEnd),this.node.off(ie.EventType.TOUCH_CANCEL,this.onTouchCancel),this.unschedule(this.handleResetButtonState),this.handleResetButtonState()}},{key:"handleUp",value:function(e){var t=this;this.hasUp=!0,this.runAnimation(this.upClipName),this.animationComponent.once(x.EventType.FINISHED,(function(){if(t.disableSpamClick?t.scheduleOnce(t.handleResetButtonState,t.disableSpamDelay):t.handleResetButtonState(),!t.buttonComponent||t.buttonComponent.interactable){wi.event(Ludex.Plugins.Analytics.Events.BUTTON_CLICK,{button_name:t.node.name,screen_name:k.getCurrentPage()});var n=t.buttonComponent.clickEvents;if(n){var i,a=s(n);try{for(a.s();!(i=a.n()).done;){var o=i.value;o.emit([e,o.customEventData])}}catch(e){a.e(e)}finally{a.f()}}}}))}},{key:"runAnimation",value:function(e){if(!this.isAnimationExist(e))throw new Error("".concat(this.node.name,": Animation component must have ").concat(e," clip"));this.animationComponent.play(e)}},{key:"isAnimationExist",value:function(e){return this.animationComponent.clips.some((function(t){return!(!t||t.name!==e)}))}}]),r}(U)).prototype,"downClipName",[ii],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"ButtonDown"}}),di=l(ci.prototype,"upClipName",[ai],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"ButtonUp"}}),pi=l(ci.prototype,"useSound",[oi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),yi=l(ci.prototype,"soundKey",[ri],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Qn[Zn.BUTTON_CLICK]}}),vi=l(ci.prototype,"disableSpamClick",[si],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),fi=l(ci.prototype,"disableSpamDelay",[li],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),ui=ci))||ui)||ui)||ui);N._RF.pop(),N._RF.push({},"adccaBKYItKsqE+ZU1nBitm","AnimAbortSignal",void 0);var Ei,Ai,Ti,Ri,Li=Ludex.Utils.Array,Pi=function(){function e(){a(this,e),this.callbacks$=[],this.isAborted$=!1,this.abortReason$="",this.callbacks$=[]}var n;return o(e,[{key:"aborted",get:function(){return this.isAborted$}},{key:"reason",get:function(){return this.abortReason$}},{key:"addAbortListener",value:function(e){this.callbacks$.push(e)}},{key:"removeAbortListener",value:function(e){var t=Li.searchIndex(this.callbacks$,(function(t){return t===e}));-1!==t&&this.callbacks$.splice(t,1)}},{key:"abort",value:function(e){if(!this.isAborted$){this.isAborted$=!0,this.abortReason$=e;var t,n=s(this.callbacks$);try{for(n.s();!(t=n.n()).done;){var i=t.value;"function"==typeof i&&i()}}catch(e){n.e(e)}finally{n.f()}this.callbacks$=[]}}},{key:"untilAborted",value:(n=t((function*(){var e=this;if(!this.isAborted$)return new Promise((function(t){e.addAbortListener((function(){return t()}))}))})),function(){return n.apply(this,arguments)})},{key:"call",value:function(e){this.aborted||e(this)}},{key:"callAsync",value:function(e){return this.aborted?Promise.resolve():e(this)}},{key:"chain",value:function(t){var n=this;t instanceof e?t.addAbortListener((function(){return n.abort()})):t.addEventListener("abort",(function(){return n.abort()}))}}],[{key:"hasBeenAborted",value:function(e){return null==e||e.aborted}}]),e}();N._RF.pop(),N._RF.push({},"0e570DdAIZPKY6DNtNerFmX","OpacityToggler",void 0);var _i,Bi,Di,Oi,Ii,Ni,Fi,zi,xi,Gi,Mi,Ui,Hi,ji,Wi,Vi,$i=z.ccclass,qi=z.requireComponent,Ki=z.property,Yi=$i("OpacityToggler")(Ei=qi([ae])((Ti=l((Ai=function(e){n(l,e);var r,s=i(l);function l(){var e;a(this,l);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return e=s.call.apply(s,[this].concat(n)),u(e,"activeValue",Ti,c(e)),u(e,"inActiveValue",Ri,c(e)),e.signal=new Pi,e}return o(l,[{key:"__preload",value:function(){this.opacityComponent=this.getComponent(ae),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){Nt.lazyValidateProperties(this)}},{key:"changeState",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.signal.abort(),this.opacityComponent.opacity=e?this.activeValue:this.inActiveValue}},{key:"changeStateFade",value:(r=t((function*(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2;this.signal.abort(),this.signal=new Pi;var n=e?this.activeValue:this.inActiveValue;yield v.runTweenAsync(q(this.opacityComponent).to(t,{opacity:n}),this.signal)})),function(){return r.apply(this,arguments)})}]),l}(U)).prototype,"activeValue",[Ki],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 255}}),Ri=l(Ai.prototype,"inActiveValue",[Ki],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 128}}),Ei=Ai))||Ei)||Ei;N._RF.pop(),N._RF.push({},"08623z7mLxP/4DVAyNB9srK","DebugAdsPlugin",void 0);var Ji,Xi,Zi,Qi=z.ccclass,ea=z.property,ta=z.requireComponent,na=Ludex,ia=na.Events,aa=na.Plugins.Ads,oa=(void 0===aa?{}:aa).Types,ra=codex,sa=ra.event,la=ra.ads,ua={color:"#00FFFF",prefix:"LOADING"},ca={color:"#00FF00",prefix:"LOADED"},ha={color:"#FF00FF",prefix:"LOAD FAIL"},da={color:"#FFFF00",prefix:"SHOWING..."},pa={color:"#00FF00",prefix:"SHOW"},ya={color:"#FF0000",prefix:"SHOW FAIL"},va={color:"#AAAAAA",prefix:"CLOSED"};_i=Qi("DebugAdsPlugin"),Bi=ta(ae),Di=Nt.required(),Oi=ea(oe),Ii=Nt.required(),Ni=ea(oe),Fi=Nt.required(),zi=ea(re),xi=Nt.required(),Gi=ea(ae),_i(Mi=Bi((Hi=l((Ui=function(e){n(r,e);var t=i(r);function r(){var e;a(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),u(e,"statusLabel",Hi,c(e)),u(e,"timersLabel",ji,c(e)),u(e,"logLabel",Wi,c(e)),u(e,"opacity",Vi,c(e)),e.logLines$=[],e.touchMs$=0,e.setupEventListeners$=function(t){[[ia.AD_LOADING,e.onAdLoading$],[ia.AD_LOADED,e.onAdLoaded$],[ia.AD_LOAD_FAILED,e.onAdLoadFailed$],[ia.AD_SHOWING,e.onAdShowing$],[ia.AD_SHOW,e.onAdShow$],[ia.AD_SHOW_FAILED,e.onAdShowFailed$],[ia.AD_CLOSED,e.onAdClosed$]].forEach((function(e){var n=C(e,2),i=n[0],a=n[1];sa[t](i,a)})),e.node[t](ne.EventType.TOUCH_END,e.handleTouchEnd$),e.node[t](ne.EventType.TOUCH_START,e.handleTouchStart$)},e.logInitializedAds$=function(){if(la){var t=la.getAdsInstances();t&&0!==Object.keys(t).length?(e.addLog$("Initialized ".concat(Object.keys(t).length," ad instances:"),"#00FF00"),Object.entries(t).forEach((function(t){var n=C(t,2),i=(n[0],n[1]),a=i.deviceOS,o=i.placementId;e.addLog$("".concat(o," on ").concat(a),"#00FFFF")}))):e.addLog$("No ad instances initialized","#FFFF00")}else e.addLog$("Ads plugin not available","#FF0000")},e.handleTouchStart$=function(t){(t.preventSwallow=0===e.opacity.opacity,t.touch&&e.opacity)&&(Date.now()-e.touchMs$<300&&(255===e.opacity.opacity?e.opacity.opacity=0:e.opacity.opacity=255),e.touchMs$=Date.now())},e.handleTouchEnd$=function(t){t.preventSwallow=0===e.opacity.opacity},e.onAdLoading$=function(t){return e.logEvent$(ua,t)},e.onAdLoaded$=function(t){return e.logEvent$(ca,t)},e.onAdLoadFailed$=function(t){return e.logEvent$(ha,t)},e.onAdShowing$=function(t){return e.logEvent$(da,t)},e.onAdShow$=function(t){return e.logEvent$(pa,t)},e.onAdShowFailed$=function(t){return e.logEvent$(ya,t)},e.onAdClosed$=function(t){return e.logEvent$(va,t)},e.logEvent$=function(t,n){var i=n.type,a=n.placementId;e.addLog$("".concat(t.prefix,": ").concat(i," (").concat(a,")"),t.color)},e.addLog$=function(t,n){var i=(new Date).toLocaleTimeString().split(" ")[0],a="<color=".concat(n,">[").concat(i,"] ").concat(t,"</color>");e.logLines$.push(a),e.logLines$.length>20&&e.logLines$.shift(),e.logLabel&&(e.logLabel.string=e.logLines$.join("\n"))},e.updateStatus$=function(){if(oa){var t=la.enabled,n=la.getDeviceOS(),i=la.getDegradationTracking(),a=la.getSafeAreaBottom(1),o=w.getBannerAdHeight(),r="N/A",s="N/A";if(i){var l=i.lastSuccessTime;s=l>0?new Date(l).toLocaleTimeString():"Never",r="".concat(i.failedAttempts)}var u=Object.values(oa).filter((function(e){return!w.isAdEnabled(e)}));e.statusLabel.string=["Enabled: ".concat(t),"DeviceOS: ".concat(n),"Last Success: ".concat(s),"Banner Height: ".concat(o),"SafeAreaBottom: ".concat(a),"Degradation Attempts: ".concat(r),"Disabled: ".concat(u.length?u.join(", "):"None")].join("\n")}},e.updateTimers$=function(){if(oa){var t=la.getLastCallAdShownTime();if(t){var n=Date.now()/1e3,i=Object.values(oa).map((function(e){var i=t[e]||0,a=i>0?(n-i).toFixed(1):"Never";return"".concat(e,": ").concat(a,"s")})).join("\n");e.timersLabel.string="Time Since Last Show\n".concat(i)}}},e}return o(r,[{key:"onLoad",value:function(){var e=this;this.logInitializedAds$(),this.setupEventListeners$("on"),this.schedule((function(){e.updateStatus$(),e.updateTimers$()}),.5)}},{key:"onDestroy",value:function(){this.setupEventListeners$("off"),this.unscheduleAllCallbacks()}}]),r}(U)).prototype,"statusLabel",[Di,Oi],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ji=l(Ui.prototype,"timersLabel",[Ii,Ni],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Wi=l(Ui.prototype,"logLabel",[Fi,zi],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Vi=l(Ui.prototype,"opacity",[xi,Gi],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Mi=Ui))||Mi);N._RF.pop(),N._RF.push({},"7ef37Q3PZpKYaeik5JzGwNy","DebugResolution",void 0);var fa,ma,ga,ba,Sa,ka,Ca,wa,Ea,Aa,Ta,Ra,La,Pa=z.ccclass,_a=z.property,Ba=z.requireComponent,Da=z.disallowMultiple,Oa=z.executeInEditMode,Ia=m.DesignSize,Na=Ia.Portrait,Fa=Ia.Landscape;Pa("DebugResolution")(Ji=Da(Ji=Ba([se])(Ji=Oa(!0)(((Zi=function(e){n(r,e);var t=i(r);function r(){var e;a(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).handleLayoutChange=function(){var t;null===(t=e.graphics)||void 0===t||t.clear(),e.start()},e}return o(r,[{key:"drawPortrait",get:function(){return r._drawPortrait},set:function(e){e!==r._drawPortrait&&(e?this.drawPortraitResolution():this.graphics.clear(),r._drawPortrait=e,r._drawLandscape&&this.drawLandscapeResolution())}},{key:"drawLandscape",get:function(){return r._drawLandscape},set:function(e){e!==r._drawLandscape&&(e?this.drawLandscapeResolution():this.graphics.clear(),r._drawLandscape=e,r._drawPortrait&&this.drawPortraitResolution())}},{key:"__preload",value:function(){this.graphics=this.getComponent(se),this.validateRequiredComponents(),this.listenGameEvents()}},{key:"validateRequiredComponents",value:function(){Nt.lazyValidateProperties(this)}},{key:"listenGameEvents",value:function(){J.on(f.LAYOUT_CHANGED,this.handleLayoutChange)}},{key:"start",value:function(){this.drawPortrait&&this.drawPortraitResolution(),this.drawLandscape&&this.drawLandscapeResolution()}},{key:"drawPortraitResolution",value:function(){var e=this.graphics;if(e){var t=Na.WIDTH,n=Na.HEIGHT,i=-t/2,a=-n/2;e.strokeColor=le.GREEN,e.rect(i,a,t,n),e.stroke()}}},{key:"drawLandscapeResolution",value:function(){var e=this.graphics;if(e){var t=Fa.WIDTH,n=Fa.HEIGHT,i=-t/2,a=-n/2;e.strokeColor=le.CYAN,e.rect(i,a,t,n),e.stroke()}}}]),r}(U))._drawPortrait=!0,Zi._drawLandscape=!0,l((Xi=Zi).prototype,"drawPortrait",[_a],Object.getOwnPropertyDescriptor(Xi.prototype,"drawPortrait"),Xi.prototype),l(Xi.prototype,"drawLandscape",[_a],Object.getOwnPropertyDescriptor(Xi.prototype,"drawLandscape"),Xi.prototype),Ji=Xi))||Ji)||Ji)||Ji);N._RF.pop(),N._RF.push({},"c4718hmr29IBpiwZUE/Uo4H","DebugScreenManager",void 0);var za=z.ccclass,xa=z.property,Ga=z.requireComponent,Ma=Ludex.Events,Ua=codex.event,Ha={color:"#00FFFF",prefix:"OPEN"},ja={color:"#FFFF00",prefix:"OPENING..."},Wa={color:"#00FF00",prefix:"OPENED"},Va={color:"#FF00FF",prefix:"CLOSE"},$a={color:"#FF0000",prefix:"CLOSING..."},qa={color:"#AAAAAA",prefix:"CLOSED"},Ka={color:"#FFA500",prefix:"LOADING..."},Ya={color:"#00FF00",prefix:"LOADED"};fa=za("DebugScreenManager"),ma=Ga(ae),ga=Nt.required(),ba=xa(oe),Sa=Nt.required(),ka=xa(re),Ca=Nt.required(),wa=xa(ae),fa(Ea=ma((Ta=l((Aa=function(e){n(r,e);var t=i(r);function r(){var e;a(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),u(e,"statusLabel",Ta,c(e)),u(e,"logLabel",Ra,c(e)),u(e,"opacity",La,c(e)),e.touchMs$=0,e.logLines$=[],e.screenStates$={},e.eventHandlers$={},e.initEventHandlers$=function(){var t;e.eventHandlers$=(b(t={},Ma.OPEN_SCREEN,(function(t){return e.logEvent$(Ha,t)})),b(t,Ma.OPENING_SCREEN,(function(t){e.logEvent$(ja,t)})),b(t,Ma.OPENED_SCREEN,(function(t){return e.logEvent$(Wa,t)})),b(t,Ma.CLOSE_SCREEN,(function(t){return e.logEvent$(Va,t)})),b(t,Ma.CLOSING_SCREEN,(function(t){e.logEvent$($a,t)})),b(t,Ma.CLOSED_SCREEN,(function(t){return e.logEvent$(qa,t)})),b(t,Ma.LOADING_SCREEN,(function(t){return e.logEvent$(Ka,t)})),b(t,Ma.SCREEN_LOADED,(function(t){return e.logEvent$(Ya,t)})),t)},e.setupEventListeners$=function(t){Object.entries(e.eventHandlers$).forEach((function(e){var n=C(e,2),i=n[0],a=n[1];Ua[t](i,a)})),e.node[t](ne.EventType.TOUCH_END,e.handleTouchEnd$),e.node[t](ne.EventType.TOUCH_START,e.handleTouchStart$)},e.handleScreenStates$=function(t){e.screenStates$=t},e.getScreensInScene$=function(){var e=j.getScene(),t=(null==e?void 0:e.getComponentsInChildren("BaseScreen"))||[],n=t.filter((function(e){return e.node.active}));return{sceneName:(null==e?void 0:e.name)||"Unknown",all:t,active:n}},e.logActiveScreens$=function(){var t=e.getScreensInScene$(),n=t.all,i=t.active;n.length>0&&(e.addLog$("Found ".concat(n.length," screens in scene"),"#00FF00"),i.forEach((function(t){e.addLog$("Active: ".concat(t.node.name),"#00FFFF")})))},e.handleTouchStart$=function(t){if(t.preventSwallow=0===e.opacity.opacity,t.touch&&e.opacity){if(Date.now()-e.touchMs$<300){var n=e.opacity.opacity;e.opacity.opacity=255===n?0:255}e.touchMs$=Date.now()}},e.handleTouchEnd$=function(t){t.preventSwallow=0===e.opacity.opacity},e.logEvent$=function(t,n){var i=n.screenName;e.addLog$("".concat(t.prefix,": ").concat(i),t.color)},e.addLog$=function(t,n){var i=(new Date).toLocaleTimeString().split(" ")[0],a="<color=".concat(n,">[").concat(i,"] ").concat(t,"</color>");e.logLines$.push(a),e.logLines$.length>30&&e.logLines$.shift(),e.logLabel&&(e.logLabel.string=e.logLines$.join("\n"))},e.updateStatus$=function(){var t=e.getScreensInScene$().sceneName;if(e.screenStates$){var n=e.screenStates$,i=Object.values(n).sort((function(e,t){return e.order-t.order})).map((function(e){var t={queued:"Queued",loading:"Loading",prefab:"Loaded",ready:"Ready"}[e.state];return"ready"===e.state&&e.screen.node.active&&(t="Active"),"[".concat(t,"] ").concat(e.name)}));e.statusLabel.string=["Scene: ".concat(t),"Screens (".concat(i.length,"):")].concat(E(i)).join("\n")}else e.statusLabel.string="Scene: ".concat(t,"\nScreenManager not ready")},e}return o(r,[{key:"onLoad",value:function(){var e=this;this.initEventHandlers$(),this.logActiveScreens$(),this.setupEventListeners$("on"),J.on("DEBUG_SCREEN_STATES",this.handleScreenStates$),this.schedule((function(){J.emit("DEBUG_REQUEST_SCREEN_STATES"),e.updateStatus$()}),.5)}},{key:"onDestroy",value:function(){this.setupEventListeners$("off"),this.unscheduleAllCallbacks()}}]),r}(U)).prototype,"statusLabel",[ga,ba],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ra=l(Aa.prototype,"logLabel",[Sa,ka],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),La=l(Aa.prototype,"opacity",[Ca,wa],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ea=Aa))||Ea);N._RF.pop(),N._RF.push({},"0405b+DQy1IALb/j8jx5Lpc","PerfCounter",void 0);var Ja,Xa,Za,Qa,eo,to,no,io,ao,oo,ro,so,lo,uo,co,ho,po,yo,vo,fo,mo,go,bo,So,ko,Co,wo,Eo,Ao,To,Ro,Lo,Po,_o,Bo,Do,Oo,Io,No,Fo,zo,xo,Go,Mo,Uo,Ho,jo,Wo=function(){function e(){a(this,e),this.time=0,this._value=0,this.time=0,this._value=0}return o(e,[{key:"value",get:function(){return this._value}},{key:"start",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.time=e}},{key:"end",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this._value=e-this.time}}]),e}();N._RF.pop(),N._RF.push({},"0e2d6yn/BVObK1kyTJ5a09a","GameStats",void 0);var Vo=z.ccclass,$o=z.executionOrder,qo=z.property,Ko=z.requireComponent,Yo=Ludex,Jo=Yo.Utils,Xo=Jo.Valid,Zo=Jo.Array,Qo=Jo.Device,er=Yo.Configs.Debugger.ListPlayerDevIds,tr=codex.player,nr=le.RED,ir=le.YELLOW,ar=le.WHITE,or=le.BLACK;Ja=Vo("GameStats"),Xa=$o(-1e3),Za=Ko([ae]),Qa=Nt.required(),eo=qo(oe),to=Nt.required(),no=qo(oe),io=Nt.required(),ao=qo(oe),oo=Nt.required(),ro=qo(oe),so=Nt.required(),lo=qo(oe),uo=Nt.required(),co=qo(oe),ho=Nt.required(),po=qo(oe),yo=Nt.required(),vo=qo(oe),fo=Nt.required(),mo=qo(oe),go=Nt.required(),bo=qo(oe),So=Nt.required(),ko=qo(oe),Co=Nt.required(),wo=qo(oe),Eo=Nt.required(),Ao=qo(Y),To=Nt.required(),Ro=qo(ae),Ja(Lo=Xa(Lo=Za((_o=l((Po=function(e){n(r,e);var t=i(r);function r(){var e;a(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),u(e,"dprLabel",_o,c(e)),u(e,"fpsLabel",Bo,c(e)),u(e,"fpsRawLabel",Do,c(e)),u(e,"drawCountLabel",Oo,c(e)),u(e,"rafTimeLabel",Io,c(e)),u(e,"deltaTimeLabel",No,c(e)),u(e,"logicTimeLabel",Fo,c(e)),u(e,"physicTimeLabel",zo,c(e)),u(e,"renderTimeLabel",xo,c(e)),u(e,"totalMemoryLabel",Go,c(e)),u(e,"objectMemoryLabel",Mo,c(e)),u(e,"textureMemoryLabel",Uo,c(e)),u(e,"bg",Ho,c(e)),u(e,"opacity",jo,c(e)),e.lastRafTime$=0,e.slowRefreshInterval$=1,e.mediumRefreshInterval$=.5,e.fastRefreshInterval$=.16,e.isBackgroundEnabled$=!1,e.touchMs$=0,e.isDragging$=!1,e.listenInputEvents$=function(){e.node.on(ne.EventType.TOUCH_START,e.handleTouchStart$),e.node.on(ne.EventType.TOUCH_MOVE,e.handleTouchMove$),e.node.on(ne.EventType.TOUCH_END,e.handleTouchEnd$),e.node.on(ne.EventType.TOUCH_CANCEL,e.handleTouchEnd$),e.node.on(ne.EventType.MOUSE_WHEEL,(function(){J.emit(f.REQUEST_DYNAMIC_ATLAS)}))},e.handleTouchStart$=function(t){(t.preventSwallow=0===e.opacity.opacity,t.touch&&e.opacity)&&(e.isDragging$=!1,Date.now()-e.touchMs$<300&&(255===e.opacity.opacity?e.opacity.opacity=0:(e.opacity.opacity=255,J.emit(f.REQUEST_DYNAMIC_ATLAS))),e.touchMs$=Date.now())},e.handleTouchMove$=function(t){if(t.preventSwallow=0===e.opacity.opacity,t.touch&&e.opacity){var n=t.touch.getUIDelta();!e.isDragging$&&n.length()>10&&(e.isDragging$=!0),e.isDragging$&&e.node.setPosition(e.node.position.x+n.x,e.node.position.y+n.y)}},e.handleTouchEnd$=function(t){t.preventSwallow=0===e.opacity.opacity,t.touch&&e.opacity&&(e.isDragging$||(e.bg.enabled=!e.bg.enabled,e.isBackgroundEnabled$=e.bg.enabled),e.isDragging$=!1)},e.canDisplayStats$=function(){return Xo.isDebugger()||Zo.has(er,tr.getPlayerId())},e.startUpdateStats$=function(){e.schedule(e.updateFastStats$,e.fastRefreshInterval$),e.schedule(e.updateSlowStats$,e.slowRefreshInterval$),e.schedule(e.updateMediumStats$,e.mediumRefreshInterval$),requestAnimationFrame(e.handleRequestAnimationFrame$)},e.updateFastStats$=function(){e.updateFpsRaw$(),e.updateRafTime$(),e.updateDeltaTime$()},e.updateSlowStats$=function(){e.updateDPR$(),e.updateDrawCalls$(),e.updateTotalMemory$(),e.updateObjectMemory$(),e.updateTextureMemory$()},e.updateMediumStats$=function(){e.updateFps$(),e.updateLogicTime$(),e.updatePhysicTime$(),e.updateRenderTime$()},e.calcRafTime$=function(t){var n;null!==(n=e.node)&&void 0!==n&&n.isValid&&(e.rafTimeCounter$.end(t),e.lastRafTime$=t,e.handleRequestAnimationFrame$())},e.handleRequestAnimationFrame$=function(){e.rafTimeCounter$.start(e.lastRafTime$),requestAnimationFrame(e.calcRafTime$)},e.updateFps$=function(){var t=e.getFps$();e.updateFpsColor$(t),e.fpsLabel.string="FPS: ".concat(t)},e.updateFpsColor$=function(t){t<30?e.fpsLabel.color=nr:t<48?e.fpsLabel.color=ir:e.setColorWithBackground$(e.fpsLabel)},e.updateFpsRaw$=function(){var t=e.getFpsRaw$();e.updateFpsRawColor$(t),e.fpsRawLabel.string="FPS Raw: ".concat(t)},e.updateFpsRawColor$=function(t){t<30?e.fpsRawLabel.color=nr:t<48?e.fpsRawLabel.color=ir:e.setColorWithBackground$(e.fpsRawLabel)},e.updateDrawCalls$=function(){var t=e.getDrawCalls$();e.updateDrawCallsColor$(t),e.drawCountLabel.string="Draw Calls: ".concat(t)},e.updateDrawCallsColor$=function(t){var n=ue.os===ue.OS.IOS,i=n?60:25;t>(n?80:40)?e.drawCountLabel.color=nr:t>i?e.drawCountLabel.color=ir:e.setColorWithBackground$(e.drawCountLabel)},e.updateRafTime$=function(){var t=e.getRafTime$();e.updateRafTimeColor$(t),e.rafTimeLabel.string="RAF Time: ".concat(t,"ms")},e.updateRafTimeColor$=function(t){t>33?e.rafTimeLabel.color=nr:t>20?e.rafTimeLabel.color=ir:e.setColorWithBackground$(e.rafTimeLabel)},e.updateDeltaTime$=function(){var t=e.getDeltaTime$();e.updateDeltaTimeColor$(t),e.deltaTimeLabel.string="Delta Time: ".concat(t,"ms")},e.updateDeltaTimeColor$=function(t){t>33?e.deltaTimeLabel.color=nr:t>20?e.deltaTimeLabel.color=ir:e.setColorWithBackground$(e.deltaTimeLabel)},e.updateLogicTime$=function(){var t=e.getLogicTime$();e.updateLogicTimeColor$(t),e.logicTimeLabel.string="Logic Time: ".concat(t,"ms")},e.updateLogicTimeColor$=function(t){t>10?e.logicTimeLabel.color=nr:t>5?e.logicTimeLabel.color=ir:e.setColorWithBackground$(e.logicTimeLabel)},e.updatePhysicTime$=function(){var t=e.getPhysicTime$();e.updatePhysicTimeColor$(t),e.physicTimeLabel.string="Physic Time: ".concat(t,"ms")},e.updatePhysicTimeColor$=function(t){t>10?e.physicTimeLabel.color=nr:t>5?e.physicTimeLabel.color=ir:e.setColorWithBackground$(e.physicTimeLabel)},e.updateRenderTime$=function(){var t=e.getRenderTime$();e.updateRenderTimeColor$(t),e.renderTimeLabel.string="Render Time: ".concat(t,"ms")},e.updateRenderTimeColor$=function(t){t>10?e.renderTimeLabel.color=nr:t>5?e.renderTimeLabel.color=ir:e.setColorWithBackground$(e.renderTimeLabel)},e.updateTextureMemory$=function(){var t=e.getTextureMemoryUsage$();e.updateTextureMemoryColor$(t),e.textureMemoryLabel.string="Texture Memory: ".concat(t,"MB")},e.updateTextureMemoryColor$=function(t){t>200?e.textureMemoryLabel.color=nr:t>100?e.textureMemoryLabel.color=ir:e.setColorWithBackground$(e.textureMemoryLabel)},e.updateTotalMemory$=function(){if(e.totalMemoryLabel){var t=(window.performance||{}).memory;if(t){var n=t.jsHeapSizeLimit/1048576;e.setColorWithBackground$(e.totalMemoryLabel),e.totalMemoryLabel.string="Total Memory: ".concat(e.toFixed$(n,0),"MB")}}},e.updateObjectMemory$=function(){var t=(window.performance||{}).memory;if(t){var n=t.usedJSHeapSize/1048576,i=t.jsHeapSizeLimit/1048576;e.updateObjectMemoryColor$(n,i),e.objectMemoryLabel.string="Object Memory: ".concat(e.toFixed$(n),"MB")}},e.updateObjectMemoryColor$=function(t,n){var i=n>0?t/n*100:0;i>80?e.objectMemoryLabel.color=nr:i>50?e.objectMemoryLabel.color=ir:e.setColorWithBackground$(e.objectMemoryLabel)},e.updateDPR$=function(){var t=Qo.pixelRatio();e.updateDPRColor$(t),e.dprLabel.string="DPR: ".concat(t)},e.updateDPRColor$=function(t){t>2?e.dprLabel.color=nr:t<=1?e.dprLabel.color=ir:e.setColorWithBackground$(e.dprLabel)},e.setColorWithBackground$=function(t){var n=e.isBackgroundEnabled$?or:ar;t.color.equals(n)||(t.color=n)},e.getFps$=function(){if(!j.root)return 0;var e=j.root.fps;return Math.round(e)||0},e.getDrawCalls$=function(){return j.root&&j.root.device.numDrawCalls||0},e.toFixed$=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return Number(e.toFixed(t))||0},e.getFpsRaw$=function(){return e.toFixed$(1e3/e.rafTimeCounter$.value,0)},e.getRafTime$=function(){return e.toFixed$(e.rafTimeCounter$.value)},e.getDeltaTime$=function(){return e.toFixed$(1e3*J.deltaTime)},e.getLogicTime$=function(){return e.toFixed$(e.logicTimeCounter$.value)},e.getPhysicTime$=function(){return e.toFixed$(e.physicTimeCounter$.value)},e.getRenderTime$=function(){return e.toFixed$(e.renderTimeCounter$.value)},e.getTextureMemoryUsage$=function(){if(!j.root)return 0;var t=j.root.device.memoryStatus;return e.toFixed$(t.textureSize/1048576,4)||0},e.beforeUpdate$=function(){var t=performance.now();e.logicTimeCounter$.start(t)},e.afterUpdate$=function(){var t=performance.now();e.logicTimeCounter$.end(t)},e.beforePhysics$=function(){var t=performance.now();e.physicTimeCounter$.start(t)},e.afterPhysics$=function(){var t=performance.now();e.physicTimeCounter$.end(t)},e.beforeDraw$=function(){var t=performance.now();e.renderTimeCounter$.start(t)},e.afterDraw$=function(){var t=performance.now();e.renderTimeCounter$.end(t)},e}return o(r,[{key:"__preload",value:function(){this.listenInputEvents$()}},{key:"onLoad",value:function(){Nt.validateRequiredProperties(this)}},{key:"start",value:function(){this.bg.enabled=!1,this.canDisplayStats$()?(this.node.active=!0,this.rafTimeCounter$=new Wo,this.logicTimeCounter$=new Wo,this.physicTimeCounter$=new Wo,this.renderTimeCounter$=new Wo,j.on(ce.EVENT_BEFORE_UPDATE,this.beforeUpdate$,this),j.on(ce.EVENT_AFTER_UPDATE,this.afterUpdate$,this),j.on(ce.EVENT_BEFORE_PHYSICS,this.beforePhysics$,this),j.on(ce.EVENT_AFTER_PHYSICS,this.afterPhysics$,this),j.on(ce.EVENT_BEFORE_DRAW,this.beforeDraw$,this),j.on(ce.EVENT_AFTER_DRAW,this.afterDraw$,this),this.startUpdateStats$()):this.node.active=!1}},{key:"onDestroy",value:function(){this.canDisplayStats$()&&(j.off(ce.EVENT_BEFORE_UPDATE,this.beforeUpdate$,this),j.off(ce.EVENT_AFTER_UPDATE,this.afterUpdate$,this),j.off(ce.EVENT_BEFORE_PHYSICS,this.beforePhysics$,this),j.off(ce.EVENT_AFTER_PHYSICS,this.afterPhysics$,this),j.off(ce.EVENT_BEFORE_DRAW,this.beforeDraw$,this),j.off(ce.EVENT_AFTER_DRAW,this.afterDraw$,this),this.unschedule(this.updateSlowStats$),this.unschedule(this.updateFastStats$),this.unschedule(this.updateMediumStats$),this.node.off(ne.EventType.TOUCH_START,this.handleTouchStart$),this.node.off(ne.EventType.TOUCH_MOVE,this.handleTouchMove$),this.node.off(ne.EventType.TOUCH_END,this.handleTouchEnd$),this.node.off(ne.EventType.TOUCH_CANCEL,this.handleTouchEnd$))}}]),r}(U)).prototype,"dprLabel",[Qa,eo],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Bo=l(Po.prototype,"fpsLabel",[to,no],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Do=l(Po.prototype,"fpsRawLabel",[io,ao],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Oo=l(Po.prototype,"drawCountLabel",[oo,ro],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Io=l(Po.prototype,"rafTimeLabel",[so,lo],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),No=l(Po.prototype,"deltaTimeLabel",[uo,co],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Fo=l(Po.prototype,"logicTimeLabel",[ho,po],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),zo=l(Po.prototype,"physicTimeLabel",[yo,vo],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xo=l(Po.prototype,"renderTimeLabel",[fo,mo],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Go=l(Po.prototype,"totalMemoryLabel",[go,bo],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Mo=l(Po.prototype,"objectMemoryLabel",[So,ko],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Uo=l(Po.prototype,"textureMemoryLabel",[Co,wo],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ho=l(Po.prototype,"bg",[Eo,Ao],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),jo=l(Po.prototype,"opacity",[To,Ro],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Lo=Po))||Lo)||Lo);N._RF.pop(),N._RF.push({},"ca922n1V0RLioEyUJg8hQXH","GameEvents",void 0);var rr,sr=function(e){return e.NEXT_LEVEL="next-level",e.UPDATE_LEVEL="update-level",e.START_OVER="start-over",e.SELECT_LEVEL="select-level",e.GAME_START="game-start",e.GAME_PAUSE="game-pause",e.GAME_RESUME="game-resume",e.GAME_REPLAY="game-replay",e.SHOW_HINT="show-hint",e.SKIP_LEVEL="skip-level",e.TIME_OUT="time-out",e.DRAWING="drawing",e.DOGE_DIE="doge-die",e.DOGE_SURVIVE="doge-survive",e.BEE_DIE="bee-die",e.BEE_ATTACK="bee-attack",e.BIG_BEE_DIE="big-bee-die",e.GAME_OBJECTS_SPAWNED="game-objects-spawned",e}(sr||{});N._RF.pop(),N._RF.push({},"8249dDH5xBEc4nnCGRgSjaW","PanelAnimationController",void 0);var lr,ur,cr,hr,dr,pr,yr,vr,fr,mr,gr,br,Sr,kr,Cr,wr,Er,Ar,Tr=(0,z.ccclass)("PanelAnimationController")(rr=function(e){n(l,e);var r=i(l);function l(){var e;a(this,l);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=r.call.apply(r,[this].concat(i))).animators=new Set,e.eventTarget=new he,e.handleRegistration=function(t){if(!t)throw new Error("Invalid event payload.");e.animators.has(t)&&console.warn("Animator already registered."),e.animators.add(t)},e.handleUnregistration=function(t){if(!t)throw new Error("Invalid event payload.");e.animators.has(t)||console.warn("Animator not registered."),e.animators.delete(t)},e.handleShowUIs=function(){var n=t((function*(t){var n,i,a,o=!1,r=[],l=s(e.animators);try{for(l.s();!(a=l.n()).done;){var u=a.value;r.push(u)}}catch(e){l.e(e)}finally{l.f()}for(var c=[],h=0,d=r;h<d.length;h++){var p,y=d[h];if(!y.isReadyForAnimation()&&!o)o=!0,null==t||null===(p=t.fallback)||void 0===p||p.call(t);c.push(y.handleShowUI())}yield Promise.all(c),null==t||null===(n=t.onComplete)||void 0===n||n.call(t),null===(i=e.eventTarget)||void 0===i||i.emit(sr.SHOW_UI)}));return function(e){return n.apply(this,arguments)}}(),e.handleHideUIs=function(){var n=t((function*(t){var n,i,a,o=!1,r=[],l=s(e.animators);try{for(l.s();!(a=l.n()).done;){var u=a.value;r.push(u)}}catch(e){l.e(e)}finally{l.f()}for(var c=[],h=0,d=r;h<d.length;h++){var p,y=d[h];if(!y.isReadyForAnimation()&&!o)o=!0,null==t||null===(p=t.fallback)||void 0===p||p.call(t);c.push(y.handleHideUI())}yield Promise.all(c),null==t||null===(n=t.onComplete)||void 0===n||n.call(t),null===(i=e.eventTarget)||void 0===i||i.emit(sr.HIDE_UI)}));return function(e){return n.apply(this,arguments)}}(),e}return o(l,[{key:"onEnable",value:function(){this.node.scene.on(sr.SHOW_UI,this.handleShowUIs,this),this.node.scene.on(sr.HIDE_UI,this.handleHideUIs,this)}},{key:"onDisable",value:function(){this.node.scene.off(sr.SHOW_UI,this.handleShowUIs,this),this.node.scene.off(sr.HIDE_UI,this.handleHideUIs,this)}},{key:"showUI",value:function(){return this.handleShowUIs()}},{key:"hideUI",value:function(){return this.handleHideUIs()}},{key:"on",value:function(e,t,n,i){this.eventTarget.on(e,t,n,i)}},{key:"off",value:function(e,t,n){this.eventTarget.off(e,t,n)}}],[{key:"getController",value:function(e){for(var t=null,n=e;null!==n;){if(t=n.getComponent(l))return t;n=n.parent}return t}},{key:"registerAnimator",value:function(e){var t=this.getController(e.node);t?t.handleRegistration(e):console.warn("No PanelAnimationController found for animator ".concat(e.node.name))}},{key:"unregisterAnimator",value:function(e){var t=this.getController(e.node);t?t.handleUnregistration(e):console.warn("No PanelAnimationController found for animator ".concat(e.node.name))}}]),l}(U))||rr;N._RF.pop(),N._RF.push({},"f190aWZvVlGiplYX4XrZG3a","PanelAnimator",void 0);var Rr,Lr=z.ccclass,Pr=z.property,_r=Ludex.Utils.Object,Br=(lr=Lr("AnimationConfig"),ur=Pr({type:[$]}),lr((dr=l((hr=function(){function e(){a(this,e),u(this,"startHidden",dr,this),u(this,"nodes",pr,this),u(this,"posOffset",yr,this),u(this,"showEase",vr,this),u(this,"hideEase",fr,this),u(this,"showDuration",mr,this),u(this,"hideDuration",gr,this)}return o(e,[{key:"setConfig",value:function(e){e&&_r.assign(this,e)}}]),e}()).prototype,"startHidden",[Pr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),pr=l(hr.prototype,"nodes",[ur],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),yr=l(hr.prototype,"posOffset",[Pr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),vr=l(hr.prototype,"showEase",[Pr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"backOut"}}),fr=l(hr.prototype,"hideEase",[Pr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"backIn"}}),mr=l(hr.prototype,"showDuration",[Pr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),gr=l(hr.prototype,"hideDuration",[Pr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),cr=hr))||cr);br=Lr("PanelAnimator"),Sr=Pr({type:Br,displayName:"Top animation nodes"}),kr=Pr({type:Br,displayName:"Bottom animation nodes"}),br((Er=l((wr=function(e){n(h,e);var r,s,l=i(h);function h(){var e;a(this,h);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return e=l.call.apply(l,[this].concat(n)),u(e,"topConfig",Er,c(e)),u(e,"botConfig",Ar,c(e)),e.isReady=!1,e}return o(h,[{key:"onEnable",value:function(){Tr.registerAnimator(this)}},{key:"onDisable",value:function(){Tr.unregisterAnimator(this)}},{key:"onLoad",value:function(){this.topAnimator=this.createAnimator(this.topConfig,"top"),this.botAnimator=this.createAnimator(this.botConfig,"bottom"),this.initUIPos(),this.isReady=!0}},{key:"initUIPos",value:function(){this.topAnimator.switchState(this.topConfig.startHidden?"hidden":"shown",!0),this.botAnimator.switchState(this.botConfig.startHidden?"hidden":"shown",!0)}},{key:"isReadyForAnimation",value:function(){return this.isReady}},{key:"handleShowUI",value:(s=t((function*(){if(this.isReady)return Promise.all([this.topAnimator.switchState("shown"),this.botAnimator.switchState("shown")]);console.warn("".concat(this.node.name,"'s ").concat(this.name,": not ready"))})),function(){return s.apply(this,arguments)})},{key:"handleHideUI",value:(r=t((function*(){if(this.isReady)return Promise.all([this.topAnimator.switchState("hidden"),this.botAnimator.switchState("hidden")]);console.warn("".concat(this.node.name,"'s ").concat(this.name,": not ready"))})),function(){return r.apply(this,arguments)})},{key:"createAnimator",value:function(e,n){var i=e.nodes,a=e.posOffset,o=e.showEase,r=e.hideEase,s=e.showDuration,l=e.hideDuration,u=i.map((function(e){return"top"===n&&e.isAlignTop?{mode:"top",value:e.top}:"bottom"===n&&e.isAlignBottom?{mode:"bottom",value:e.bottom}:{mode:"position",value:e.node.position.y}})),c=i.map((function(e){return"top"===n&&e.isAlignTop?{mode:"top",value:e.top+a}:"bottom"===n&&e.isAlignBottom?{mode:"bottom",value:e.bottom-a}:{mode:"position",value:e.node.position.y+a}})),d="shown",p=new Pi;return{switchState:function(){var e=t((function*(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];p.abort();var n=new Pi;if(p=n,d!==e){d=e;var a="hidden"===e?u:c,y="hidden"===e?c:u,f="hidden"===e?l:s,m="hidden"===e?r:o,g=function(){for(var e=0,t=i.length;e<t;e++){var n=i[e],o=a[e],r=y[e].value;h.setToTargetImmediately(n,o,r)}};t?g():(n.addAbortListener(g),yield Promise.all(i.map((function(e,t){var i=a[t],o=y[t].value;return v.runTweenAsync(h.getTween({widget:e,config:i,target:o,easing:m,duration:f}),n)}))),n.aborted||n.removeAbortListener(g))}}));return function(t){return e.apply(this,arguments)}}()}}},{key:"setAnimator",value:function(e){var t=e.topConfig,n=e.botConfig,i=new Br,a=new Br;i.setConfig(t),a.setConfig(n),this.topConfig=i,this.botConfig=a,this.topAnimator=this.createAnimator(this.topConfig,"top"),this.botAnimator=this.createAnimator(this.botConfig,"bottom"),this.initUIPos()}}],[{key:"getTween",value:function(e){var t=e.widget,n=e.config,i=e.target,a=e.easing,o=e.duration;return"top"===n.mode?q(t).call((function(){t.top=n.value})).to(o,{top:i},{easing:a}):"bottom"===n.mode?q(t).call((function(){t.bottom=n.value})).to(o,{bottom:i},{easing:a}):q(t.node.position).call((function(){t.node.setPosition(t.node.position.x,n.value,t.node.position.z)})).to(o,{y:i},{easing:a})}},{key:"setToTargetImmediately",value:function(e,t,n){"top"===t.mode&&(e.top=n),"bottom"===t.mode&&(e.bottom=n);var i=e.node.position.x,a=n,o=e.node.position.z;e.node.setPosition(i,a,o)}}]),h}(U)).prototype,"topConfig",[Sr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Br}}),Ar=l(wr.prototype,"botConfig",[kr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Br}}),Cr=wr));N._RF.pop(),N._RF.push({},"21a9aAlkBtGxKLqip8g0o6l","ParticleSystem2DExtra",void 0);var Dr,Or=z.ccclass,Ir=z.disallowMultiple,Nr=z.executeInEditMode,Fr=z.requireComponent,zr=Or("ParticleSystem2DExtra")(Rr=Nr(!0)(Rr=Ir(!0)(Rr=Fr(de)(Rr=function(e){n(r,e);var t=i(r);function r(){var e;a(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).emitParticle=function(t){return function(n){t(n);var i=e.particleSystem._simulator.particles.length,a=e.particleSystem._simulator.particles[i-1];e.initParticle(a)}},e.step=function(t){return function(n){for(var i=e.particleSystem._simulator.particles,a=0;a<i.length;a++){var o=i[a];e.updateParticle(o,n)}t(n)}},e}return o(r,[{key:"__preload",value:function(){this.particleSystem=this.getComponent(de),this.validateRequiredComponents(),this.overrideFunctions()}},{key:"overrideFunctions",value:function(){var e=this.particleSystem._simulator.emitParticle.bind(this.particleSystem._simulator);this.particleSystem._simulator.emitParticle=this.emitParticle(e);var t=this.particleSystem._simulator.step.bind(this.particleSystem._simulator);this.particleSystem._simulator.step=this.step(t)}},{key:"validateRequiredComponents",value:function(){Nt.lazyValidateProperties(this)}}]),r}(U))||Rr)||Rr)||Rr)||Rr;N._RF.pop(),N._RF.push({},"9a5a3MgLaRAKbHluGCPsA8j","ExampleParticleSystem2DExtra",void 0);var xr,Gr,Mr,Ur,Hr,jr,Wr,Vr,$r,qr,Kr,Yr,Jr,Xr,Zr,Qr,es,ts,ns,is,as,os;(0,z.ccclass)("ExampleParticleSystem2DExtra")(Dr=function(e){n(r,e);var t=i(r);function r(){return a(this,r),t.apply(this,arguments)}return o(r,[{key:"initParticle",value:function(e){e.maxSize=pe.randomRange(.25,1)*e.size,e.size=0,e.deltaSize=0,e.cycleDuration=pe.randomRange(.4,.6),e.life=e.timeToLive,this.setInitPosition(e.pos)}},{key:"updateParticle",value:function(e,t){this.updateScale(e)}},{key:"setInitPosition",value:function(e){var t=e.x,n=e.y;return e.x=t+pe.randomRange(-350,350),e.y=n+pe.randomRange(-350,350),e}},{key:"updateScale",value:function(e){var t=1-(e.life-e.timeToLive)%e.cycleDuration/e.cycleDuration;e.size=e.maxSize*Math.sin(t*Math.PI)}}]),r}(zr));N._RF.pop(),N._RF.push({},"6ea01hdw/9MHb28SCDAiRss","ResizeWithBannerAd",void 0);var rs,ss,ls,us,cs,hs,ds,ps,ys,vs,fs,ms,gs,bs,Ss=z.ccclass,ks=z.requireComponent,Cs=z.property,ws=codex,Es=ws.ads,As=ws.event,Ts=Ludex,Rs=Ts.Events,Ls=Ts.Plugins.Ads,Ps=void 0===Ls?{}:Ls,_s=Ps.Types,Bs=Ps.Status,Ds=Ts.Utils,Os=Ds.Array,Is=Ds.Function,Ns=Ds.Device,Fs=["top","topleft","topright"],zs=["bottom","bottomleft","bottomright"],xs=["left","topleft","bottomleft"],Gs=["right","topright","bottomright"];xr=Ss("ResizeWithBannerAd"),Gr=ks($),Mr=Nt.required(),Ur=Cs(Q),Hr=Nt.required(),jr=Cs(Q),Wr=Nt.required(),Vr=Cs(Q),$r=Nt.required(),qr=Cs(Q),Kr=Nt.required(),Yr=Cs(Q),Jr=Nt.required(),Xr=Cs($),xr(Zr=Gr((es=l((Qr=function(e){n(r,e);var t=i(r);function r(){var e;a(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),u(e,"includeSAB",es,c(e)),u(e,"includeRightBanner",ts,c(e)),u(e,"includeBottomBanner",ns,c(e)),u(e,"includeLeftBanner",is,c(e)),u(e,"closeWhenAdFailed",as,c(e)),u(e,"widget",os,c(e)),e.setupEventListeners$=function(t){[[Rs.AD_SHOWING,e.handleOnAdShowing$],[Rs.AD_CLOSED,e.handleOnAdClosed$],[Rs.AD_SHOW_FAILED,e.handleOnAdFailed$],[f.VIEW_RESIZED,e.handleOnResize$]].forEach((function(e){var n=C(e,2),i=n[0],a=n[1];As[t](i,a)}))},e.handleOnAdShowing$=function(t){var n=t.placementId,i=t.type;if(e.checkValid$()&&n&&_s&&i===_s.BANNER){try{if(!Es.getAd(_s.BANNER,n))return}catch(e){return void console.debug("Error getting banner ad:",e)}e.resizeWhenBannerAdShow$(n),e.emitResizeEvent()}},e.handleOnAdClosed$=function(t){var n=t.placementId,i=t.type;if(e.checkValid$()&&n&&_s&&i===_s.BANNER){try{if(!Es.getAd(_s.BANNER,n))return}catch(e){return void console.debug("Error getting banner ad:",e)}e.resizeWhenBannerAdClose$(n),e.emitResizeEvent()}},e.handleOnAdFailed$=function(t){var n=t.placementId,i=t.type;e.closeWhenAdFailed&&e.checkValid$()&&n&&_s&&i===_s.BANNER&&(e.resizeWhenBannerAdClose$(n),e.emitResizeEvent())},e.handleOnResize$=function(){if(e.checkValid$()&&_s&&Bs)if(w.isAdEnabled(_s.BANNER)){var t=Es.getAdsByType(_s.BANNER);0!==t.length?t.forEach((function(t){var n=Es.getAdStatus(_s.BANNER,t.placementId);n&&(n===Bs.SHOWING||Ns.isIOS()?e.resizeWhenBannerAdShow$(t.placementId):n===Bs.IDLE&&e.resizeWhenBannerAdClose$(t.placementId))})):e.resizeSafeAreaBottom$()}else e.resizeSafeAreaBottom$()},e.getBannerHeight$=function(t,n){try{var i=Es.getBannerConfig(t),a=i.PlacementId,o=i.Position,r=e.includeSAB&&"bottom"===o;return Es.getBannerHeight(a,n,r)}catch(e){return console.debug("[ResizeWithBannerAd] Error getting banner ad:",e),0}},e.resizeWhenBannerAdShow$=function(t){var n,i,a,o,r=g.cssSizeToWorldSize(1),s=e.getBannerHeight$(t,r),l=Es.getBannerConfig(t),u=l.BannerWidth,c=l.Position;if("top"===c)n=s;else if("bottom"===c)e.includeBottomBanner?i=s:e.includeSAB&&(i=Es.getSafeAreaBottom(r));else if("left"===c||"right"===c){if(void 0===u)return;var h=u;"getBannerOffset"in GameSDK.extra&&(h+=GameSDK.extra.getBannerOffset()),"left"===c&&e.includeLeftBanner?a=h*r:"right"===c&&e.includeRightBanner&&(o=h*r)}e.updateWidgets$({top:n,bottom:i,left:a,right:o})},e.resizeWhenBannerAdClose$=function(t){var n=Es.getBannerConfig(t).Position,i=g.cssSizeToWorldSize(1),a=e.includeSAB?Es.getSafeAreaBottom(i):0;e.updateWidgets$({top:Os.has(Fs,n)?0:void 0,bottom:Os.has(zs,n)?a:void 0,left:Os.has(xs,n)?0:void 0,right:Os.has(Gs,n)?0:void 0})},e.resizeSafeAreaBottom$=function(){var t=g.cssSizeToWorldSize(1),n=e.includeSAB?Es.getSafeAreaBottom(t):0;e.updateWidgets$({bottom:n})},e.updateWidgets$=function(t){var n=t.top,i=t.bottom,a=t.left,o=t.right;e.widget.top=null!=n?n:e.widget.top,e.widget.bottom=null!=i?i:e.widget.bottom,e.widget.left=null!=a?a:e.widget.left,e.widget.right=null!=o?o:e.widget.right,ye.instance.emit("canvas-resize")},e.emitResizeEvent=Is.debounce((function(){J.emit(f.WIDGET_RESIZED)}),100),e.checkValid$=function(){return e.node.activeInHierarchy&&null!==e.node.parent&&void 0!==e.node.parent},e}return o(r,[{key:"__preload",value:function(){Nt.validateRequiredProperties(this),this.setupEventListeners$("on")}},{key:"onDestroy",value:function(){this.setupEventListeners$("off")}},{key:"start",value:function(){this.handleOnResize$()}}]),r}(U)).prototype,"includeSAB",[Mr,Ur],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),ts=l(Qr.prototype,"includeRightBanner",[Hr,jr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),ns=l(Qr.prototype,"includeBottomBanner",[Wr,Vr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),is=l(Qr.prototype,"includeLeftBanner",[$r,qr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),as=l(Qr.prototype,"closeWhenAdFailed",[Kr,Yr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),os=l(Qr.prototype,"widget",[Jr,Xr],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Zr=Qr))||Zr);N._RF.pop(),N._RF.push({},"aa4b0d0u0hLeqd3+/PQZ/QD","SwitchButton",void 0);var Ms,Us,Hs,js,Ws,Vs,$s,qs=z.ccclass,Ks=z.property,Ys=z.requireComponent,Js=codex.analytics,Xs=(rs=qs("SwitchButton"),ss=Ys([Z]),ls=Ks(Q),us=Ks(ie),cs=Ks(ie),hs=Ks(Q),ds=Ks({visible:function(){return this.useSound},type:Qn}),rs(ps=ss((vs=l((ys=function(e){n(r,e);var t=i(r);function r(){var e;a(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),u(e,"enable",vs,c(e)),u(e,"nodeOn",fs,c(e)),u(e,"nodeOff",ms,c(e)),u(e,"useSound",gs,c(e)),u(e,"soundKey",bs,c(e)),e}return o(r,[{key:"__preload",value:function(){this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){Nt.lazyValidateProperties(this)}},{key:"switch",value:function(){if(!this.node.active)return!1;if(Js.event(Ludex.Plugins.Analytics.Events.BUTTON_CLICK,{enable:!this.enable,button_name:this.node.name,screen_name:k.getCurrentPage()}),this.useSound&&this.soundKey){var e=mi[this.soundKey];e&&S.playSound(e)}return this.updateStatus(!this.enable)}},{key:"setEnabled",value:function(e){this.node.active&&this.updateStatus(e)}},{key:"updateStatus",value:function(e){return this.enable=e,this.nodeOn.active=e,this.nodeOff.active=!e,e}},{key:"isEnabled",value:function(){return this.enable}}]),r}(U)).prototype,"enable",[ls],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),fs=l(ys.prototype,"nodeOn",[us],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ms=l(ys.prototype,"nodeOff",[cs],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gs=l(ys.prototype,"useSound",[hs],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),bs=l(ys.prototype,"soundKey",[ds],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Qn[Zn.BUTTON_CLICK]}}),ps=ys))||ps)||ps);N._RF.pop(),N._RF.push({},"aa60frMJLtIlJZh2yJhMp1s","DynamicLabel",void 0);var Zs,Qs,el,tl,nl,il,al,ol,rl,sl,ll,ul,cl,hl,dl,pl,yl,vl,fl,ml,gl,bl,Sl,kl,Cl,wl,El,Al,Tl,Rl,Ll,Pl,_l,Bl,Dl,Ol,Il,Nl,Fl,zl,xl=z.ccclass,Gl=z.property,Ml=z.executeInEditMode,Ul=z.requireComponent;Ms=xl("DynamicLabel"),Us=Ul(oe),Hs=Ml(!0),js=Gl({type:V,min:1,max:200}),Ws=Gl({type:V,min:.1,max:4}),Ms(Vs=Us(Vs=Hs((l(($s=function(e){n(r,e);var t=i(r);function r(){var e;a(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i)))._quality=1,e._size=1,e._outlineWidth=0,e._shadowOffset=new ve(0,0),e}return o(r,[{key:"size",get:function(){return this._size},set:function(e){this._size=e,this.label.fontSize=this.size*this.quality}},{key:"quality",get:function(){return this._quality},set:function(e){this._quality=e,this.node.scale=new te(1/this.quality,1/this.quality,1),this.label.fontSize=this.size*this.quality,this.label.outlineWidth=this._outlineWidth*this.quality,this.label.shadowOffset=this._shadowOffset.multiplyScalar(this.quality)}},{key:"__preload",value:function(){this.label=this.getComponent(oe)}},{key:"start",value:function(){this._quality=1/this.node.scale.x,this._size=this.label.fontSize/this.quality,this._outlineWidth=this.label.outlineWidth,this._shadowOffset=this.label.shadowOffset,this.quality=window.devicePixelRatio,console.info(" ".concat(this.node.name,"<Label> quality:"),this.quality)}}]),r}(U)).prototype,"size",[js],Object.getOwnPropertyDescriptor($s.prototype,"size"),$s.prototype),l($s.prototype,"quality",[Ws],Object.getOwnPropertyDescriptor($s.prototype,"quality"),$s.prototype),Vs=$s))||Vs)||Vs);N._RF.pop(),N._RF.push({},"bce15LcVrxOfYMa9rbXN/qi","Localize",void 0);var Hl=z.ccclass,jl=z.property,Wl=z.executeInEditMode,Vl=z.disallowMultiple,$l=Ludex,ql=$l.Utils,Kl=ql.Signal,Yl=(ql.Function,ql.Array),Jl=$l.Events,Xl=codex,Zl=Xl.language,Ql=Xl.event,eu=function(e){return e[e.Text=0]="Text",e[e.Texture=1]="Texture",e}({});X(eu);var tu,nu,iu,au,ou,ru,su,lu,uu,cu,hu,du,pu,yu,vu,fu,mu,gu,bu,Su="localize-params-updated",ku=(Zs=Hl("LocalizeParams"),Qs=jl({visible:!1}),el=jl(G),Zs((il=l((nl=function(){function e(){a(this,e),u(this,"_text",il,this)}return o(e,[{key:"text",get:function(){return this._text},set:function(e){this._text=e,J.emit(Su,{text:e,param:this})}}]),e}()).prototype,"_text",[Qs],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),l(nl.prototype,"text",[el],Object.getOwnPropertyDescriptor(nl.prototype,"text"),nl.prototype),tl=nl))||tl),Cu=(al=Hl("Localize"),ol=Wl(!0),rl=jl({visible:!1}),sl=jl({type:G,visible:function(){return this.l10nType===eu.Texture}}),ll=jl({visible:!1}),ul=jl({type:fe(eu)}),cl=jl({type:oe,visible:function(){return this.l10nType===eu.Text}}),hl=jl({visible:function(){return this.l10nType===eu.Text}}),dl=jl({type:[ku],visible:function(){return this.l10nType===eu.Text}}),pl=jl({type:Y,visible:function(){return this.l10nType===eu.Texture}}),yl=jl({visible:function(){return this.l10nType===eu.Texture}}),vl=jl({visible:!1}),fl=jl({type:G}),ml=Nt.onlyRunInLifeCycleAsync,gl=Nt.onlyRunInLifeCycleAsync,bl=Nt.onlyRunInLifeCycleAsync,Sl=Nt.onlyRunInLifeCycleAsync,kl=Nt.onlyRunInLifeCycle,Cl=Nt.onlyRunInLifeCycleAsync,wl=Nt.onlyRunInLifeCycleAsync,El=Nt.onlyRunInLifeCycleAsync,Al=Nt.onlyRunInLifeCycleAsync,Tl=Nt.onlyRunInLifeCycle,Rl=Nt.onlyRunInLifeCycleAsync,al(Ll=Vl(Ll=ol((_l=l((Pl=function(e){n(w,e);var r,s,l,d,p,y,v,m,g,b,S,k,C=i(w);function w(){var e;a(this,w);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return(e=C.call.apply(C,[this].concat(n))).localized=!1,u(e,"_defaultLocale",_l,c(e)),u(e,"_l10nType",Bl,c(e)),u(e,"label",Dl,c(e)),u(e,"updateFont",Ol,c(e)),u(e,"params",Il,c(e)),u(e,"sprite",Nl,c(e)),u(e,"packable",Fl,c(e)),u(e,"_key",zl,c(e)),e.updateSignalController=new Kl.SignalController,e.onLocalizeParamsUpdated=function(t){var n=t.param;Yl.has(e.params,n)&&e.updateLocalization()},e.updateLocalization=function(){return e.updateLocalizationComp()},e}return o(w,[{key:"defaultLocale",get:function(){return this._defaultLocale},set:function(e){!function(e){return Yl.has(A,e)}(e)?console.warn("Key ".concat(e," not found. Supported locales are ").concat(A.join(", "))):this._defaultLocale=e}},{key:"l10nType",get:function(){return this._l10nType},set:function(e){this._l10nType=e,e===eu.Texture&&(this.label=void 0,this.params=[]),e===eu.Text&&(this.sprite=void 0,this.packable=!0)}},{key:"key",get:function(){return this._key},set:function(e){try{if(!this.isValidKey(e))return void console.warn("Key ".concat(e," not found in locales"));this._key=e,this.updateLocalization()}catch(e){console.warn(e)}}},{key:"setParams",value:function(e){for(;this.params.length<e.length;)this.params.push(new ku);for(var t=0,n=this.params.length;t<n;t++){var i,a=this.params[t];a.text=null!==(i=e[t])&&void 0!==i?i:a.text}}},{key:"waitUntilLocalized",value:function(){var e=this;return this.localized?Promise.resolve():new Promise((function(t){return e.node.once(f.LOCALIZE_APPLIED,t)}))}},{key:"__preload",value:function(){}},{key:"isValidKey",value:function(e){return!!this.isTextKey(e)||!!this.isTextureKey(e)}},{key:"isTextKey",value:function(e){try{return this.l10nType===eu.Text&&Zl.hasTextKey(e)}catch(e){return console.warn(e),!1}}},{key:"isTextureKey",value:function(e){try{return this.l10nType===eu.Texture&&Zl.hasTextureKey(e)}catch(e){return console.warn(e),!1}}},{key:"onEnable",value:function(){this.listenEvent()}},{key:"onDisable",value:function(){this.unlistenEvent(),this.updateSignalController.abort()}},{key:"start",value:function(){this.initLocalization()}},{key:"listenEvent",value:function(){Ql.on(Jl.LANGUAGE_CHANGED,this.updateLocalization),J.on(Su,this.onLocalizeParamsUpdated)}},{key:"unlistenEvent",value:function(){Ql.off(Jl.LANGUAGE_CHANGED,this.updateLocalization),J.off(Su,this.onLocalizeParamsUpdated)}},{key:"initLocalization",value:function(){return this.updateLocalizationComp(!0)}},{key:"updateLocalizationComp",value:(k=t((function*(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.enabledInHierarchy&&void 0!==this.key){var t=this.updateSignalController.renew();try{if(this.localized=!1,this.isTextKey(this.key))yield this.updateTextLocalization(this.key,t);else{if(!this.isTextureKey(this.key))throw new Error("Key ".concat(this.key," not found in locales"));var n=Zl.getCurrentLocale(),i=!T&&e&&n===this.defaultLocale;i||(yield this.updateTextureLocalization(this.key,t))}if(t.aborted)return;this.localized=!0,J.emit(f.LOCALIZE_APPLIED,{localize:this,key:this.key}),this.node.emit(f.LOCALIZE_APPLIED,{localize:this,key:this.key})}catch(e){console.warn(e)}}})),function(){return k.apply(this,arguments)})},{key:"updateTextLocalization",value:(S=t((function*(e,t){var n,i,a=this,o=Zl.getCurrentLocale(),r=Zl.getText(e,this.params.map((function(e){return e.text})),o),s=this.label;if(void 0===s)throw new Error("Text localize component <".concat(this.node.name,"> has no label"));null===(n=t.wrap((function(){return a.setText(s,r)})))||void 0===n||n(),this.updateFont&&(yield null===(i=t.wrap((function(){return a.setTextFont(s,o,t)})))||void 0===i?void 0:i())})),function(e,t){return S.apply(this,arguments)})},{key:"setText",value:(b=t((function*(e,t){e.string=t})),function(e,t){return b.apply(this,arguments)})},{key:"setTextFont",value:(g=t((function*(e,t,n){yield this.setTextFontRuntime(e,t,n)})),function(e,t,n){return g.apply(this,arguments)})},{key:"setTextFontRuntime",value:(m=t((function*(e,t,n){var i=yield h.loadFontAsync(t);n.aborted||null!==i&&this.setLabelFontInLifeCycle(e,i)})),function(e,t,n){return m.apply(this,arguments)})},{key:"setLabelFontInLifeCycle",value:function(e,t){e.font=t}},{key:"setTextFontEditor",value:(v=t((function*(e,t,n){var i,a,o=this,r=yield this.requestFontUuid(t);if(null!==r){var s=yield null===(i=n.wrap((function(){return o.requestNodeInfo(e.node.uuid)})))||void 0===i?void 0:i();if(void 0!==s){var l=Yl.searchIndex(s.__comps__,(function(e){return"cc.Label"===e.type})),u="__comps__.".concat(l,".font");yield null===(a=n.wrap((function(){return o.requestUpdateLabelFont(e.node.uuid,u,r)})))||void 0===a?void 0:a()}}})),function(e,t,n){return v.apply(this,arguments)})},{key:"requestFontUuid",value:(y=t((function*(e){return yield Editor.Message.request("asset-db","query-uuid","db://assets/loadable/".concat(R[e]))})),function(e){return y.apply(this,arguments)})},{key:"requestNodeInfo",value:function(e){return Editor.Message.request("scene","query-node",e)}},{key:"requestUpdateLabelFont",value:(p=t((function*(e,t,n){yield Editor.Message.request("scene","set-property",{uuid:e,path:t,dump:{type:"cc.Font",value:{uuid:n}}})})),function(e,t,n){return p.apply(this,arguments)})},{key:"updateTextureLocalization",value:(d=t((function*(e,t){if(void 0===this.sprite)throw new Error("Texture localize component <".concat(this.node.name,"> has no sprite"));var n=Zl.getTexture(e);yield this.setSpriteRuntime(this.sprite,n,t)})),function(e,t){return d.apply(this,arguments)})},{key:"setSpriteRuntime",value:(l=t((function*(e,t,n){var i=yield h.loadSpriteFrameAsync("".concat(t,"/spriteFrame"),this.packable);n.aborted||(null!==i?this.setSprite(e,i):console.warn("Sprite not found by path: ".concat(t)))})),function(e,t,n){return l.apply(this,arguments)})},{key:"setSprite",value:function(e,t){e.spriteFrame=t}},{key:"setSpriteEditor",value:(s=t((function*(e,t,n){var i,a,o=this,r=yield this.requestSpriteFrameInfo(t);if(0!==r.length)if(r.length>1){var s=r.slice(0,5).map((function(e){return e.path})),l="".concat(s.join(",")).concat(s.length<r.length?"...":"");console.warn("Ambiguous sprite's path: ".concat(t,". Found ").concat(l))}else{var u=yield null===(i=n.wrap((function(){return o.requestNodeInfo(e.node.uuid)})))||void 0===i?void 0:i();if(void 0!==u){var c=r[0].uuid,h=Yl.searchIndex(u.__comps__,(function(e){return"cc.Sprite"===e.type})),d="__comps__.".concat(h,".spriteFrame");yield null===(a=n.wrap((function(){return o.requestUpdateSpriteSpriteFrame(e.node.uuid,d,c)})))||void 0===a?void 0:a()}}else console.error("Sprite not found by path: ".concat(t))})),function(e,t,n){return s.apply(this,arguments)})},{key:"requestSpriteFrameInfo",value:function(e){return Editor.Message.request("asset-db","query-assets",{pattern:"db://assets/loadable/".concat(e,"*"),ccType:"cc.SpriteFrame"})}},{key:"requestUpdateSpriteSpriteFrame",value:(r=t((function*(e,t,n){yield Editor.Message.request("scene","set-property",{uuid:e,path:t,dump:{type:"cc.SpriteFrame",value:{uuid:n}}})})),function(e,t,n){return r.apply(this,arguments)})}]),w}(U)).prototype,"_defaultLocale",[rl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"en"}}),l(Pl.prototype,"defaultLocale",[sl],Object.getOwnPropertyDescriptor(Pl.prototype,"defaultLocale"),Pl.prototype),Bl=l(Pl.prototype,"_l10nType",[ll],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return eu.Text}}),l(Pl.prototype,"l10nType",[ul],Object.getOwnPropertyDescriptor(Pl.prototype,"l10nType"),Pl.prototype),Dl=l(Pl.prototype,"label",[cl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ol=l(Pl.prototype,"updateFont",[hl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Il=l(Pl.prototype,"params",[dl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Nl=l(Pl.prototype,"sprite",[pl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Fl=l(Pl.prototype,"packable",[yl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),zl=l(Pl.prototype,"_key",[vl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),l(Pl.prototype,"key",[fl],Object.getOwnPropertyDescriptor(Pl.prototype,"key"),Pl.prototype),l(Pl.prototype,"updateTextLocalization",[ml],Object.getOwnPropertyDescriptor(Pl.prototype,"updateTextLocalization"),Pl.prototype),l(Pl.prototype,"setText",[gl],Object.getOwnPropertyDescriptor(Pl.prototype,"setText"),Pl.prototype),l(Pl.prototype,"setTextFont",[bl],Object.getOwnPropertyDescriptor(Pl.prototype,"setTextFont"),Pl.prototype),l(Pl.prototype,"setTextFontRuntime",[Sl],Object.getOwnPropertyDescriptor(Pl.prototype,"setTextFontRuntime"),Pl.prototype),l(Pl.prototype,"setLabelFontInLifeCycle",[kl],Object.getOwnPropertyDescriptor(Pl.prototype,"setLabelFontInLifeCycle"),Pl.prototype),l(Pl.prototype,"setTextFontEditor",[Cl],Object.getOwnPropertyDescriptor(Pl.prototype,"setTextFontEditor"),Pl.prototype),l(Pl.prototype,"requestUpdateLabelFont",[wl],Object.getOwnPropertyDescriptor(Pl.prototype,"requestUpdateLabelFont"),Pl.prototype),l(Pl.prototype,"updateTextureLocalization",[El],Object.getOwnPropertyDescriptor(Pl.prototype,"updateTextureLocalization"),Pl.prototype),l(Pl.prototype,"setSpriteRuntime",[Al],Object.getOwnPropertyDescriptor(Pl.prototype,"setSpriteRuntime"),Pl.prototype),l(Pl.prototype,"setSprite",[Tl],Object.getOwnPropertyDescriptor(Pl.prototype,"setSprite"),Pl.prototype),l(Pl.prototype,"setSpriteEditor",[Rl],Object.getOwnPropertyDescriptor(Pl.prototype,"setSpriteEditor"),Pl.prototype),Ll=Pl))||Ll)||Ll)||Ll);N._RF.pop(),N._RF.push({},"060a722v8VBE68QPm8fKcyQ","LocalizePreloader",void 0);var wu,Eu,Au,Tu,Ru,Lu,Pu,_u,Bu,Du,Ou,Iu,Nu,Fu,zu,xu,Gu=z.ccclass,Mu=z.property,Uu=Ludex.Utils,Hu=Uu.Array,ju=Uu.Valid,Wu=codex.language,Vu=(tu=Gu("LocalizeTextureKey"),nu=Mu({visible:!1}),iu=Mu(G),tu((ru=l((ou=function(){function e(){a(this,e),u(this,"_key",ru,this)}return o(e,[{key:"key",get:function(){return this._key},set:function(e){Wu.hasTextureKey(e)?this._key=e:console.warn("Key ".concat(e," not found in locales"))}}]),e}()).prototype,"_key",[nu],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),l(ou.prototype,"key",[iu],Object.getOwnPropertyDescriptor(ou.prototype,"key"),ou.prototype),au=ou))||au),$u=(su=Gu("SupportedLocaleKey"),lu=Mu({visible:!1}),uu=Mu(G),su((du=l((hu=function(){function e(){a(this,e),u(this,"_key",du,this)}return o(e,[{key:"key",get:function(){return this._key},set:function(e){Hu.has(A,e)?this._key=e:console.warn("Key ".concat(e," not found. Supported locales are ").concat(A.join(", ")))}}]),e}()).prototype,"_key",[lu],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),l(hu.prototype,"key",[uu],Object.getOwnPropertyDescriptor(hu.prototype,"key"),hu.prototype),cu=hu))||cu);pu=Gu("LocalizePreloader"),yu=Mu([Vu]),vu=Mu({type:$u,tooltip:"Preload only for these locales"}),pu((gu=l((mu=function(e){n(r,e);var t=i(r);function r(){var e;a(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),u(e,"keys",gu,c(e)),u(e,"locales",bu,c(e)),e}return o(r,[{key:"__preload",value:function(){this.preloadTextures()}},{key:"preloadTextures",value:function(){var e=Wu.getCurrentLocale(),t=this.locales.map((function(e){return e.key}));if(Hu.has(t,e)){var n,i=[],a=s(this.keys);try{for(a.s();!(n=a.n()).done;){var o=n.value;if(!1!==Wu.hasTextureKey(o.key)){var r=Wu.getTexture(o.key),l="".concat(r,"/spriteFrame");i.push(l)}}}catch(e){a.e(e)}finally{a.f()}h.loadSpriteFramesAsync(i)}else ju.isDebugger()&&console.info("Skipping preloading of textures because current locale is not in the list of preloading locales")}}]),r}(U)).prototype,"keys",[yu],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),bu=l(mu.prototype,"locales",[vu],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),fu=mu));N._RF.pop(),N._RF.push({},"3f364xnTJtDR5yeow2MWHhm","LocalizedLayout",void 0);var qu,Ku,Yu,Ju,Xu,Zu,Qu,ec,tc,nc,ic,ac,oc,rc,sc,lc,uc,cc,hc,dc,pc,yc,vc,fc,mc,gc,bc,Sc,kc=z.ccclass,Cc=z.property,wc=z.executeInEditMode,Ec=z.disallowMultiple,Ac=z.requireComponent;wu=kc("LocalizedLayout"),Eu=wc(!0),Au=Ac(W),Tu=Cc(Cu),Ru=Nt.required(),Lu=Cc(W),Pu=Cc({visible:!1}),_u=Cc({visible:!1}),Bu=Cc({type:V,group:"Padding"}),Du=Cc({type:V,group:"Padding"}),wu(Ou=Ec(Ou=Eu(Ou=Au((Nu=l((Iu=function(e){n(r,e);var t=i(r);function r(){var e;a(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),u(e,"label",Nu,c(e)),u(e,"layout",Fu,c(e)),u(e,"_horizontal",zu,c(e)),u(e,"_vertical",xu,c(e)),e.updateContentSize=function(){var t;if(void 0!==e.label){var n=null===(t=e.label.getComponent(W))||void 0===t?void 0:t.contentSize;if(void 0!==n){e.layout.setContentSize(n.width+e.horizontal,n.height+e.vertical);var i,a=e.node.getComponentsInChildren($),o=s(a);try{for(o.s();!(i=o.n()).done;){i.value.updateAlignment()}}catch(e){o.e(e)}finally{o.f()}}}},e}return o(r,[{key:"horizontal",get:function(){return this._horizontal},set:function(e){this._horizontal=e,this.updateContentSize()}},{key:"vertical",get:function(){return this._vertical},set:function(e){this._vertical=e,this.updateContentSize()}},{key:"__preload",value:function(){this.layout=this.getComponent(W),Nt.validateRequiredProperties(this)}},{key:"start",value:function(){this.updateContentSize()}},{key:"onEnable",value:function(){this.listenEvent()}},{key:"onDisable",value:function(){this.unlistenEvent()}},{key:"listenEvent",value:function(){var e;null===(e=this.label)||void 0===e||e.node.on(f.LOCALIZE_APPLIED,this.updateContentSize)}},{key:"unlistenEvent",value:function(){var e;null===(e=this.label)||void 0===e||e.node.off(f.LOCALIZE_APPLIED,this.updateContentSize)}}]),r}(U)).prototype,"label",[Tu],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Fu=l(Iu.prototype,"layout",[Ru,Lu],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),zu=l(Iu.prototype,"_horizontal",[Pu],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),xu=l(Iu.prototype,"_vertical",[_u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),l(Iu.prototype,"horizontal",[Bu],Object.getOwnPropertyDescriptor(Iu.prototype,"horizontal"),Iu.prototype),l(Iu.prototype,"vertical",[Du],Object.getOwnPropertyDescriptor(Iu.prototype,"vertical"),Iu.prototype),Ou=Iu))||Ou)||Ou)||Ou);N._RF.pop(),N._RF.push({},"a2260jBMJFPCrn/Q4Vo4iB1","BatchNodes",void 0);var Tc,Rc,Lc,Pc,_c,Bc,Dc,Oc,Ic,Nc,Fc,zc,xc,Gc,Mc,Uc,Hc,jc,Wc,Vc,$c=z.ccclass,qc=z.executionOrder,Kc=z.property,Yc=Ludex.Utils,Jc=Yc.Decorator,Xc=Yc.Array,Zc="Batch By Name",Qc="Batch Label",eh="Batch Sprite";qu=$c("BatchNodes"),Ku=qc(99999),Yu=Kc({group:{name:Zc}}),Ju=Kc({type:[M],group:{name:Zc}}),Xu=Kc({type:[G],group:{name:Zc}}),Zu=Kc({group:{name:Qc}}),Qu=Kc({group:{name:Qc}}),ec=Kc({group:{name:Qc}}),tc=Kc({group:{name:eh}}),nc=Kc({group:{name:eh}}),ic=Kc({readonly:!0}),ac=Kc({readonly:!0}),oc=Kc({readonly:!0}),rc=Jc.debounce(1e3),qu(sc=Ku((uc=l((lc=function(e){n(r,e);var t=i(r);function r(){var e;a(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),u(e,"batchByName",uc,c(e)),u(e,"depthNames",cc,c(e)),u(e,"listName",hc,c(e)),u(e,"batchLabel",dc,c(e)),u(e,"depthLabel",pc,c(e)),u(e,"typeLabel",yc,c(e)),u(e,"batchSprite",vc,c(e)),u(e,"depthSprite",fc,c(e)),u(e,"batchAllNodes",mc,c(e)),u(e,"batchDepth",gc,c(e)),u(e,"checkOverlap",bc,c(e)),e.batchNode={},e.labelChildren=[],e.spriteChildren=[],e.allChildren=[],e.nameChildren=[],e.originalParents={},e.isInited=!1,u(e,"handleNodeChange",Sc,c(e)),e.onAfterUpdate=function(){e.isInited&&e.hierarchyChildren()},e.onAfterRender=function(){e.isInited&&e.restoreOriginalChildren()},e}return o(r,[{key:"__preload",value:function(){this.enabled&&(j.on(ce.EVENT_AFTER_UPDATE,this.onAfterUpdate),j.on(ce.EVENT_AFTER_RENDER,this.onAfterRender))}},{key:"onDestroy",value:function(){j.off(ce.EVENT_AFTER_UPDATE,this.onAfterUpdate),j.off(ce.EVENT_AFTER_RENDER,this.onAfterRender)}},{key:"onLoad",value:function(){this.enabled&&(this.setupBatchNodes(this.node),this.isInited=!0)}},{key:"onEnable",value:function(){this.isInited||(j.on(ce.EVENT_AFTER_UPDATE,this.onAfterUpdate),j.on(ce.EVENT_AFTER_RENDER,this.onAfterRender),this.setupBatchNodes(this.node),this.isInited=!0)}},{key:"handleActiveChange",value:function(e){e.once(ie.EventType.ACTIVE_IN_HIERARCHY_CHANGED,this.handleNodeChange)}},{key:"onDisable",value:function(){this.restoreOriginalChildren(),j.off(ce.EVENT_AFTER_UPDATE,this.onAfterUpdate),j.off(ce.EVENT_AFTER_RENDER,this.onAfterRender),this.isInited=!1}},{key:"setupBatchNodes",value:function(e){this.allChildren=[],this.nameChildren=[],this.labelChildren=[],this.spriteChildren=[],this.saveOriginalChildren(e),this.createGlobalNodes(e),this.createGlobalNameNodes(e),this.createGlobalLabelNode(e),this.createGlobalSpriteNode(e),this.sortGlobalNodes()}},{key:"sortGlobalNodes",value:function(){var e,t,n,i=this;null===(e=this.batchNode.node)||void 0===e||e.setSiblingIndex(0),null===(t=this.batchNode.label)||void 0===t||t.setSiblingIndex(this.depthLabel),null===(n=this.batchNode.sprite)||void 0===n||n.setSiblingIndex(this.depthSprite),this.listName.forEach((function(e,t){var n,a=i.depthNames[t];void 0!==a?null===(n=i.batchNode[e])||void 0===n||n.setSiblingIndex(a):console.warn("BatchNodes: depth is undefined",e,t,a)}))}},{key:"createGlobalNodes",value:function(e){if(this.batchAllNodes){var t=new ie("GlobalBatchNode");t.active=!0,this.batchNode.node=t,e.addChild(t)}}},{key:"createGlobalNameNodes",value:function(e){if(this.batchByName){var t,n=s(this.listName);try{for(n.s();!(t=n.n()).done;){var i=t.value;if(!this.batchNode[i]){var a=new ie(i);a.active=!0,this.batchNode[i]=a,e.addChild(a)}}}catch(e){n.e(e)}finally{n.f()}}}},{key:"createGlobalLabelNode",value:function(e){if(this.batchLabel){var t=new ie("GlobalLabelNode");t.active=!0,this.batchNode.label=t,e.addChild(t)}}},{key:"createGlobalSpriteNode",value:function(e){if(this.batchSprite){var t=new ie("GlobalSpriteNode");t.active=!0,this.batchNode.sprite=t,e.addChild(t)}}},{key:"saveOriginalParents",value:function(){var e,t=[].concat(E(this.labelChildren),E(this.spriteChildren)),n=this.nameChildren,i=s(t);try{for(i.s();!(e=i.n()).done;){var a=e.value;a.node.parent&&(this.handleActiveChange(a.node),this.originalParents[a.uuid]=a.node.parent)}}catch(e){i.e(e)}finally{i.f()}var o,r=s(n);try{for(r.s();!(o=r.n()).done;){var l=o.value;l.parent&&(this.handleActiveChange(l),this.originalParents[l.uuid]=l.parent)}}catch(e){r.e(e)}finally{r.f()}}},{key:"saveOriginalChildren",value:function(e){var t,n=e.children,i=s(n);try{for(i.s();!(t=i.n()).done;){var a=t.value;this.saveLabelChildren(a),this.saveSpriteChildren(a),this.saveNodeChildrenByName(a),this.saveNodeChildrenByType(a)}}catch(e){i.e(e)}finally{i.f()}this.saveOriginalParents()}},{key:"saveLabelChildren",value:function(e){var t;if(this.batchLabel){var n=e.getComponentsInChildren(oe),i={none:oe.CacheMode.NONE,char:oe.CacheMode.CHAR,bitmap:oe.CacheMode.BITMAP}[this.typeLabel];i&&(n=n.filter((function(e){return e.cacheMode===i}))),0!==n.length&&(t=this.labelChildren).push.apply(t,E(n))}}},{key:"saveSpriteChildren",value:function(e){var t;if(this.batchSprite){var n=e.getComponentsInChildren(Y);0!==n.length&&(t=this.spriteChildren).push.apply(t,E(n))}}},{key:"saveNodeChildrenByName",value:function(e){if(this.batchByName){var t,n=s(e.children);try{for(n.s();!(t=n.n()).done;){var i=t.value;Xc.has(this.listName,i.name)?this.nameChildren.push(i):this.saveNodeChildrenByName(i)}}catch(e){n.e(e)}finally{n.f()}}}},{key:"saveNodeChildrenByType",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(this.batchAllNodes){var i=e.getComponentsInChildren(U);if((t=this.allChildren).push.apply(t,E(i)),!(this.batchDepth<1||n>=this.batchDepth)){var a,o=s(this.allChildren);try{for(o.s();!(a=o.n()).done;){var r=a.value;this.saveNodeChildrenByType(r.node,this.batchDepth)}}catch(e){o.e(e)}finally{o.f()}}}}},{key:"hierarchyChildren",value:function(){var e,t=function(e,t){e.node.isValid&&e.node.activeInHierarchy&&t&&!e.node.isChildOf(t)&&(e.node.setParent(t,!0),e.node.layer=me.Enum.UI_2D)},n=["GlobalLabelNode","GlobalSpriteNode","GlobalBatchNode"],i=s(this.labelChildren);try{for(i.s();!(e=i.n()).done;){t(e.value,this.batchNode.label)}}catch(e){i.e(e)}finally{i.f()}var a,o=s(this.spriteChildren);try{for(o.s();!(a=o.n()).done;){t(a.value,this.batchNode.sprite)}}catch(e){o.e(e)}finally{o.f()}var r,l=s(this.allChildren);try{for(l.s();!(r=l.n()).done;){t(r.value,this.batchNode.node)}}catch(e){l.e(e)}finally{l.f()}this.allChildren.sort((function(e,t){return e.constructor.name.localeCompare(t.constructor.name)})),this.labelChildren.sort((function(e,t){return e.cacheMode-t.cacheMode}));var u,c=s(this.nameChildren);try{for(c.s();!(u=c.n()).done;){var h=u.value;if(h.isValid&&h.activeInHierarchy&&h.isTransformDirty()){var d=h.getComponent(ae);if(!(d&&d.opacity<1||Xc.has(n,h.name))){var p=this.batchNode[h.name];p&&(h.isChildOf(p)||(h.setParent(p,!0),h.layer=me.Enum.UI_2D))}}}}catch(e){c.e(e)}finally{c.f()}}},{key:"restoreOriginalChildren",value:function(){var e=[].concat(E(this.labelChildren),E(this.spriteChildren));if(e.length>0){var t,n=s(e);try{for(n.s();!(t=n.n()).done;){var i=t.value,a=this.originalParents[i.uuid];a&&(i.node.isChildOf(a)||i.node.setParent(a,!0))}}catch(e){n.e(e)}finally{n.f()}}var o,r=s(this.nameChildren);try{for(r.s();!(o=r.n()).done;){var l=o.value,u=this.originalParents[l.uuid];u&&(l.isChildOf(u)||l.setParent(u,!0))}}catch(e){r.e(e)}finally{r.f()}}}]),r}(U)).prototype,"batchByName",[Yu],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),cc=l(lc.prototype,"depthNames",[Ju],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),hc=l(lc.prototype,"listName",[Xu],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),dc=l(lc.prototype,"batchLabel",[Zu],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),pc=l(lc.prototype,"depthLabel",[Qu],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),yc=l(lc.prototype,"typeLabel",[ec],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"char"}}),vc=l(lc.prototype,"batchSprite",[tc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),fc=l(lc.prototype,"depthSprite",[nc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),mc=l(lc.prototype,"batchAllNodes",[ic],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),gc=l(lc.prototype,"batchDepth",[ac],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),bc=l(lc.prototype,"checkOverlap",[oc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Sc=l(lc.prototype,"handleNodeChange",[rc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.isInited&&(console.warn("handleNodeChange",e.node.name),e.setupBatchNodes(e.node))}}}),sc=lc))||sc);N._RF.pop(),N._RF.push({},"1ecebJCOPhK9L6AO92sjHzD","BatchNodesV2",void 0);var th,nh=z.ccclass,ih=z.executionOrder,ah=z.property,oh=Ludex.Utils,rh=oh.Array,sh=oh.Object;Tc=nh("BatchNodesV2"),Rc=ih(99999),Lc=ah({group:"Batch Settings"}),Pc=ah({type:[G],group:"Batch Settings",visible:function(){return this.batchByName}}),_c=ah({type:[M],group:"Batch Settings",visible:function(){return this.batchByName}}),Bc=ah({group:"Label Settings"}),Dc=ah({group:"Label Settings",visible:function(){return this.batchLabel}}),Oc=ah({group:"Label Settings",visible:function(){return this.batchLabel}}),Ic=ah({group:"Sprite Settings"}),Nc=ah({group:"Sprite Settings",visible:function(){return this.batchSprite}}),Tc(Fc=Rc((xc=l((zc=function(e){n(r,e);var t=i(r);function r(){var e;a(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),u(e,"batchByName",xc,c(e)),u(e,"listName",Gc,c(e)),u(e,"depthNames",Mc,c(e)),u(e,"batchLabel",Uc,c(e)),u(e,"typeLabel",Hc,c(e)),u(e,"depthLabel",jc,c(e)),u(e,"batchSprite",Wc,c(e)),u(e,"depthSprite",Vc,c(e)),e.batchNodes={},e.originalParents={},e.labelNodes=[],e.spriteNodes=[],e.namedNodes={},e.isInitialized=!1,e.labelNodesByType={bitmap:[],char:[],none:[]},e.isEventListenerSetup=!1,e.onAfterUpdate=function(){e.isInitialized&&e.batchActiveNodes()},e.onAfterRender=function(){e.isInitialized&&e.restoreNodes()},e}return o(r,[{key:"depthLabelBitmap",get:function(){return this.depthLabel}},{key:"depthLabelChar",get:function(){return this.depthLabel+1}},{key:"depthLabelNone",get:function(){return this.depthLabel+2}},{key:"onLoad",value:function(){this.enabled&&this.initializeDataStructures()}},{key:"start",value:function(){this.enabled&&this.initialize()}},{key:"onEnable",value:function(){this.isEventListenerSetup||(this.setupEventListeners(),this.isEventListenerSetup=!0)}},{key:"onDisable",value:function(){this.isEventListenerSetup&&(this.removeEventListeners(),this.isEventListenerSetup=!1),this.restoreNodes()}},{key:"onDestroy",value:function(){this.removeEventListeners(),this.restoreNodes(),this.clearData()}},{key:"initializeDataStructures",value:function(){this.batchNodes={},this.originalParents={},this.labelNodes=[],this.spriteNodes=[],this.namedNodes={},this.labelNodesByType={bitmap:[],char:[],none:[]}}},{key:"initialize",value:function(){this.isInitialized||(this.createBatchContainers(),this.scanNodes(this.node),this.sortBatchNodes(),this.isInitialized=!0)}},{key:"clearData",value:function(){this.batchNodes={},this.originalParents={},this.labelNodes=[],this.spriteNodes=[],this.namedNodes={},this.labelNodesByType={bitmap:[],char:[],none:[]},this.isInitialized=!1}},{key:"categorizeNode",value:function(e){if(e.parent){if(this.originalParents[e.uuid]=e.parent,this.batchLabel){var t=e.getComponent(oe);t&&("all"===this.typeLabel?t.cacheMode===oe.CacheMode.BITMAP?this.labelNodesByType.bitmap.push(e):t.cacheMode===oe.CacheMode.CHAR?this.labelNodesByType.char.push(e):this.labelNodesByType.none.push(e):this.isValidLabel(t)&&this.labelNodes.push(e))}if(this.batchSprite)e.getComponent(Y)&&this.spriteNodes.push(e);if(this.batchByName){var n=e.name;this.listName.includes(n)&&(this.namedNodes[n]||(this.namedNodes[n]=[]),this.namedNodes[n].push(e))}}}},{key:"isValidLabel",value:function(e){var t={none:oe.CacheMode.NONE,char:oe.CacheMode.CHAR,bitmap:oe.CacheMode.BITMAP};return e.cacheMode===t[this.typeLabel]}},{key:"sortBatchNodes",value:function(){if(this.batchLabel)if("all"===this.typeLabel){var e,t,n;null===(e=this.batchNodes.label_bitmap)||void 0===e||e.setSiblingIndex(this.depthLabelBitmap),null===(t=this.batchNodes.label_char)||void 0===t||t.setSiblingIndex(this.depthLabelChar),null===(n=this.batchNodes.label_none)||void 0===n||n.setSiblingIndex(this.depthLabelNone)}else{var i,a={bitmap:this.depthLabelBitmap,char:this.depthLabelChar,none:this.depthLabelNone}[this.typeLabel]||this.depthLabelChar;null===(i=this.batchNodes.label)||void 0===i||i.setSiblingIndex(a)}this.batchNodes.sprite&&this.batchNodes.sprite.setSiblingIndex(this.depthSprite);for(var o=0;o<this.listName.length;o++){var r=this.listName[o];if(r){var s=this.depthNames[o]||0,l=this.batchNodes[r];l&&l.setSiblingIndex(s)}}}},{key:"batchNodeArray",value:function(e,t){for(var n=0;n<e.length;n++){var i=e[n];null!=i&&i.isValid&&i.activeInHierarchy&&(i.parent!==t&&(this.isBatchContainer(i)||i.isTransformDirty()&&this.isParentChainActive(i)&&(i.setParent(t,!0),i.layer=me.Enum.UI_2D)))}}},{key:"isBatchContainer",value:function(e){var t=sh.vals(this.batchNodes);return rh.has(t,e)}},{key:"isParentChainActive",value:function(e){for(var t=e,n=this.node;t&&t!==n;){if(!t.active||!t.isValid)return!1;t=t.parent}return t===n}},{key:"restoreNodes",value:function(){var e=this,t=function(t){var n=e.originalParents[t.uuid];null!=n&&n.isValid&&t.parent!==n&&e.isParentChainActive(n)&&t.setParent(n,!0)};if(this.batchLabel)if("all"===this.typeLabel)for(var n in this.labelNodesByType)for(var i=this.labelNodesByType[n],a=0;a<i.length;a++){var o=i[a];o&&t(o)}else for(var r=0;r<this.labelNodes.length;r++){var s=this.labelNodes[r];s&&t(s)}if(this.batchSprite)for(var l=0;l<this.spriteNodes.length;l++){var u=this.spriteNodes[l];u&&t(u)}if(this.batchByName)for(var c in this.namedNodes){var h=this.namedNodes[c];if(h)for(var d=0;d<h.length;d++){var p=h[d];p&&t(p)}}}},{key:"setupEventListeners",value:function(){j.on(ce.EVENT_AFTER_UPDATE,this.onAfterUpdate),j.on(ce.EVENT_AFTER_RENDER,this.onAfterRender)}},{key:"removeEventListeners",value:function(){j.off(ce.EVENT_AFTER_UPDATE,this.onAfterUpdate),j.off(ce.EVENT_AFTER_RENDER,this.onAfterRender)}},{key:"createBatchContainers",value:function(){if(this.batchLabel)if("all"===this.typeLabel)for(var e=0,t=["bitmap","char","none"];e<t.length;e++){var n=t[e],i=new ie("BatchLabel_".concat(n));i.layer=me.Enum.UI_2D,this.node.addChild(i),this.batchNodes["label_".concat(n)]=i}else{var a=new ie("BatchLabel");a.layer=me.Enum.UI_2D,this.node.addChild(a),this.batchNodes.label=a}if(this.batchSprite){var o=new ie("BatchSprite");o.layer=me.Enum.UI_2D,this.node.addChild(o),this.batchNodes.sprite=o}if(this.batchByName)for(var r=0;r<this.listName.length;r++){var s=this.listName[r];if(s){var l=new ie("Batch_".concat(s));l.layer=me.Enum.UI_2D,this.node.addChild(l),this.batchNodes[s]=l,this.namedNodes[s]=[]}}}},{key:"scanNodes",value:function(e){for(var t=e.children,n=0;n<t.length;n++){var i=t[n];i&&(this.categorizeNode(i),i.children.length>0&&this.scanNodes(i))}}},{key:"batchActiveNodes",value:function(){if(this.batchLabel&&("all"===this.typeLabel?(this.batchNodesByType(this.labelNodesByType.bitmap,"label_bitmap"),this.batchNodesByType(this.labelNodesByType.char,"label_char"),this.batchNodesByType(this.labelNodesByType.none,"label_none")):this.batchNodesByType(this.labelNodes,"label")),this.batchSprite&&this.batchNodesByType(this.spriteNodes,"sprite"),this.batchByName)for(var e in this.namedNodes){var t=this.namedNodes[e];if(t){var n=this.batchNodes[e];n&&this.batchNodeArray(t,n)}}}},{key:"batchNodesByType",value:function(e,t){var n=this.batchNodes[t];n&&this.batchNodeArray(e,n)}}]),r}(U)).prototype,"batchByName",[Lc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Gc=l(zc.prototype,"listName",[Pc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Mc=l(zc.prototype,"depthNames",[_c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Uc=l(zc.prototype,"batchLabel",[Bc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Hc=l(zc.prototype,"typeLabel",[Dc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"char"}}),jc=l(zc.prototype,"depthLabel",[Oc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Wc=l(zc.prototype,"batchSprite",[Ic],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Vc=l(zc.prototype,"depthSprite",[Nc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Fc=zc))||Fc);N._RF.pop(),N._RF.push({},"9b958Lf6PFClb/JuJfTLzxG","Vibrate",void 0);var lh,uh=z.ccclass,ch=Ludex.Utils.Browser,hh=codex.player,dh=uh("Vibrate")(th=function(e){n(r,e);var t=i(r);function r(){return a(this,r),t.apply(this,arguments)}return o(r,[{key:"vibrate",value:function(e){if(this.isVibrateEnable()&&!ch.vibrate(e)){if("performHapticFeedbackAsync"in GameSDK.extra)return void GameSDK.extra.performHapticFeedbackAsync();console.warn("Vibrate failed")}}},{key:"isVibrateEnable",value:function(){return!!hh.getPlayerSetting("vibrate")}}]),r}(U))||th;N._RF.pop(),N._RF.push({},"21fbd1aIo9DNoKfAoZaF1DC","WidgetCanvasTarget",void 0);(0,z.ccclass)("WidgetCanvasTarget")(lh=function(e){n(r,e);var t=i(r);function r(){return a(this,r),t.apply(this,arguments)}return o(r,[{key:"__preload",value:function(){var e=this.getComponent($);if(e){var t=ge("Canvas");t&&(e.target=t)}}}]),r}(U));N._RF.pop(),N._RF.push({},"cb1abhXDs1A57EPVKbvTJg/","ButtonPlusEvents",void 0),N._RF.pop(),N._RF.push({},"e6289NIEoZEGaTkmk/RVxJy","ClassicModeLevels",void 0);var ph=325,yh=[165,201,158,230,313,274,280,266,295,260,225,215,253,323,297,312,268,144,121,220,190,311,270,302,166,142,169,103,314,299,228,127,172,132,176,134,118,116,131,271,282,138,108,149,244,261,210,208,234,272,184,249,273,216,120,214,317,148,139,154,109,267,162,105,306,245,153,100,232,194,175,292,124,205,110,145,293,322,255,227,304,187,319,111,207,305,177,259,248,269,238,263,126,188,200,135,198,170,218,178,122,321,137,257,291,196,179,252,140,113,223,303,197,224,115,185,181,112,301,146,202,286,289,106,285,147,247,287,246,163,101,206,164,221,298,219,203,129,283,315,324,281,102,114,307,242,318,173,276,152,217,222,195,130,211,308,141,213,236,290,284,309,320,167,161,192,258,265,233,182,237,279,256,156,229,316,212,157,250,183,123,262,159,264,239,117,189,231,199,278,193,125,186,155,310,209,235,204,104,107,325,128,119,160,275,241,168,191,143,136,171,243,174,150,277,251,296,288,240,180,151,254,226,133,294,300];N._RF.pop(),N._RF.push({},"bf320amyc1I86bS3oK0M9NR","DashboardEvents",void 0),N._RF.pop(),N._RF.push({},"68b8bf0Va5JT7NVPECDNC5l","DashboardScreens",void 0);var vh=function(e){return e[e.store=0]="store",e[e.collections=1]="collections",e[e.home=2]="home",e[e.leaderboard=3]="leaderboard",e[e.tournaments=4]="tournaments",e}(vh||{});X(vh),N._RF.pop(),N._RF.push({},"ad867amogBFGJo9jp78EnQP","DevTools",void 0);var fh=function(e){return e.UNLOCK_DEV_TOOLS="unlock-dev-tools",e.TRIGGER_UNLOCK_KEY="trigger-unlock-key",e.TRIGGER_RESET_SEQUENCE="trigger-reset-sequence",e}(fh||{}),mh={Events:fh,UNLOCK_SEQUENCE:"101013012031"};N._RF.pop(),N._RF.push({},"d2d6fiURYRNW52Q49fh9+s+","EndlessProgressions",void 0);var gh,bh,Sh,kh,Ch,wh={0:{beeSpeed:60,spawnRandOffset:100,targetOffsetMultiplier:0,count:[8,15]},10:{beeSpeed:60,spawnRandOffset:100,targetOffsetMultiplier:.5,count:[10,20]},20:{beeSpeed:70,spawnRandOffset:110,targetOffsetMultiplier:.6,count:[10,20]},50:{beeSpeed:70,spawnRandOffset:120,targetOffsetMultiplier:.7,count:[10,20]}};N._RF.pop(),N._RF.push({},"e2458xYf5xBG6uFEvkD4R6s","FlowStratery",void 0);var Eh=z.ccclass,Ah=Ludex,Th=Ah.Utils,Rh=Th.Decorator,Lh=Th.String,Ph=Th.Number,_h=Ah.Dtos.Match.CustomData,Bh=codex,Dh=Bh.match,Oh=Bh.player,Ih=function(e){L.closeLoadingScreen(),e instanceof Error&&L.showNotificationScreen(e.message)};gh=Eh("FlowStrategy"),bh=Rh.tryCatch(Ih),Sh=Rh.tryCatch(Ih),gh((l((Ch=function(e){n(u,e);var r,s,l=i(u);function u(){var e;a(this,u);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return(e=l.call.apply(l,[this].concat(n))).playerId="",e}return o(u,[{key:"onLoad",value:function(){this.playerId=Oh.getPlayerId(),this.initDtosDefaultData()}},{key:"initDtosDefaultData",value:function(){_h.addDefaults({maxTime:0}),_h.addValidator("maxTime",(function(e){if(e<0)throw new Error("maxTime must be greater than 0")}))}},{key:"startStrategy",value:(s=t((function*(){L.showLoadingScreen(0),yield Dh.strategy.start.processAsync({matchId:Lh.generateObjectId(),gameMode:"endless",playerId:this.playerId}),yield Dh.handler.setMatchCustomData({maxTime:600}),yield Dh.handler.setProfileData({id:this.playerId,wish:0})})),function(){return s.apply(this,arguments)})},{key:"finishStrategy",value:(r=t((function*(){yield Dh.handler.setProfileData({id:this.playerId,wish:Ph.random(9999)}),yield Dh.strategy.finish.processAsync({setPlayerBestScore:!1,postGlobalLeaderboard:!1})})),function(){return r.apply(this,arguments)})}]),u}(U)).prototype,"startStrategy",[bh],Object.getOwnPropertyDescriptor(Ch.prototype,"startStrategy"),Ch.prototype),l(Ch.prototype,"finishStrategy",[Sh],Object.getOwnPropertyDescriptor(Ch.prototype,"finishStrategy"),Ch.prototype),kh=Ch));N._RF.pop(),N._RF.push({},"91649r9HndHx6OjoY70+mR1","GameMode",void 0);var Nh="classic",Fh="endless";N._RF.pop(),N._RF.push({},"adb272QtfxDGZ+87PwkWEiN","GameSettings",void 0);var zh,xh,Gh,Mh;N._RF.pop(),N._RF.push({},"52b52FNwvhBKY/becAy420o","Leaderboard",void 0);var Uh,Hh=Ludex.Configs.Leaderboards.LeaderboardList;zh=null===(xh=Hh[0])||void 0===xh?void 0:xh.Id,Gh=null===(Mh=Hh[1])||void 0===Mh?void 0:Mh.Id;N._RF.pop(),N._RF.push({},"e8e10DJmXdH8Jw30JCMjJqd","ScreensFlows",void 0);(0,z.ccclass)("ScreensFlows")(Uh=function(e){n(u,e);var r,s,l=i(u);function u(){var e;a(this,u);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return(e=l.call.apply(l,[this].concat(n))).screenActions=[function(){return e.showLoadingScreen()},function(){return e.showNotificationScreen()},function(){return e.showWinningScreen()},function(){return e.showCongratulationScreen()},function(){return e.showLoseScreen()},function(){return e.showSettingsScreen()}],e}return o(u,[{key:"preloadScreens",value:function(){L.preloadScreens()}},{key:"getRandomDelay",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;return Math.floor(Math.random()*(t-e+1))+e}},{key:"executeRandomScreenAction",value:(s=t((function*(){var e=Math.floor(Math.random()*this.screenActions.length),t=this.screenActions[e];t?t():console.warn("No screen action found at index:",e)})),function(){return s.apply(this,arguments)})},{key:"spamScreens",value:(r=t((function*(){var e=this;console.info(" Start spamming screens...");for(var t=function*(){var t=e.getRandomDelay(200,800);console.debug(" Spamming screen ".concat(n+1,"/").concat(10)),yield new Promise((function(e){return setTimeout(e,t)})),yield e.executeRandomScreenAction()},n=0;n<10;n++)yield*t();console.info(" Finished spamming screens")})),function(){return r.apply(this,arguments)})},{key:"showNotificationScreen",value:function(){L.showNotificationScreen("Hey!")}},{key:"closeNotificationScreen",value:function(){L.closeNotificationScreen()}},{key:"showLoadingScreen",value:function(){L.showLoadingScreen(5)}},{key:"closeLoadingScreen",value:function(){L.closeLoadingScreen()}},{key:"showWinningScreen",value:function(){L.openScreen(P.WINNING_SCREEN)}},{key:"closeWinningScreen",value:function(){L.closeScreen(P.WINNING_SCREEN)}},{key:"showLoseScreen",value:function(){L.openScreen(P.LOSE_SCREEN,{level:1})}},{key:"closeLoseScreen",value:function(){L.closeScreen(P.LOSE_SCREEN)}},{key:"showSettingsScreen",value:function(){L.openScreen(P.SETTINGS_SCREEN)}},{key:"closeSettingsScreen",value:function(){L.closeScreen(P.SETTINGS_SCREEN)}},{key:"showCongratulationScreen",value:function(){L.openScreen(P.CONGRATULATION_SCREEN)}},{key:"closeCongratulationScreen",value:function(){L.closeScreen(P.CONGRATULATION_SCREEN)}}]),u}(U));N._RF.pop(),N._RF.push({},"f16ffbXQPtDK58g6BNFwzJv","Tournament",void 0),N._RF.pop(),N._RF.push({},"7e0c9Khhb1DD7wE1NBWi3Py","VibrateStyle",void 0),N._RF.pop(),N._RF.push({},"ad7acMQ2iJNKKA2RkT+nGNI","CommonError",void 0);var jh=function(e){n(r,e);var t=i(r);function r(e,n){var i;return a(this,r),(i=t.call(this,n)).code=e,i}return o(r)}(r(Error));N._RF.pop(),N._RF.push({},"5ff78u05/tPepABfMzNaOjM","PlayerHasTournamentError",void 0);var Wh=function(e){n(r,e);var t=i(r);function r(e,n){var i;return a(this,r),(i=t.call(this,"PLAYER_HAS_TOURNAMENT","Player has a tournament")).playerId=e,i.tournamentId=n,i}return o(r)}(jh);N._RF.pop(),N._RF.push({},"27033qxh65F25R336CXMYGV","BeeRole",void 0);var Vh=function(e){return e[e.NORMAL=0]="NORMAL",e[e.PATH_SEEKER=1]="PATH_SEEKER",e[e.PUSHER=2]="PUSHER",e}(Vh||{});N._RF.pop(),N._RF.push({},"ab23abxgeZD0KDVdLYEeAQS","BeeState",void 0);var $h=function(e){return e[e.IDLE=0]="IDLE",e[e.FLYING=1]="FLYING",e[e.WAITING_TO_SEEK_PATH=2]="WAITING_TO_SEEK_PATH",e[e.SEEKING_PATH=3]="SEEKING_PATH",e[e.ATTACKING=4]="ATTACKING",e[e.DIE=5]="DIE",e}($h||{});N._RF.pop(),N._RF.push({},"9ef7e8FlFJOS5DAWzwBrkww","GameObject",void 0);for(var qh=function(e){return e.AIR_FAN="air-fan",e.BALLOON="balloon",e.DOGE="doge",e.SPIDER="spider",e.BEE="bee",e.BIG_BEE="big-bee",e.BIG_BEE_BULLET="big-bee-bullet",e.BEEHIVE="beehive",e.BRICK="brick",e.GRASS="grass",e.GRASS_DARK="grass-dark",e.COLLIDER="collider",e.THORN="thorn",e.THORN_BALL="thorn-ball",e.MAP_LINE="line",e.WOOD="wood",e.WOOD_STROKE="wood-stroke",e.POISON="poison",e.POISON_BUBBLE="poison-bubble",e.POISON_SURFACE="poison-surface",e.WATER="water",e.WATER_SURFACE="water-surface",e.DANGER_AREA="danger-area",e.DUST_PARTICLE="dust-particle",e.ROPE="rope",e.JOINT="joint",e.DRAW_LINE="draw-line",e.CROSSING_BEE_LINE="crossing-bee-line",e}({}),Kh=qh.COLLIDER,Yh=qh.DANGER_AREA,Jh=qh.DOGE,Xh=[Kh,Yh,qh.GRASS,qh.GRASS_DARK,qh.BRICK,qh.MAP_LINE,qh.POISON,qh.POISON_SURFACE,qh.POISON_BUBBLE,qh.AIR_FAN,qh.WOOD,qh.WOOD_STROKE,qh.THORN_BALL,qh.THORN,qh.CROSSING_BEE_LINE,qh.BEE,Jh,qh.BEEHIVE,qh.ROPE,qh.BALLOON,qh.WATER,qh.WATER_SURFACE,qh.JOINT,qh.DUST_PARTICLE,qh.DRAW_LINE],Zh={},Qh=0;Qh<Xh.length;Qh++)Zh[Xh[Qh]]=Qh;var ed=Zh;N._RF.pop(),N._RF.push({},"4c577T9x2FPKpyFoVPXbav0","ObjectIds",void 0);var td=function(e){return e[e.BRICK=1]="BRICK",e[e.STROKE=3]="STROKE",e[e.GRASS_DARK=4]="GRASS_DARK",e[e.GRASS=5]="GRASS",e[e.COLLIDER=6]="COLLIDER",e[e.THORN=7]="THORN",e[e.WATER=8]="WATER",e[e.WATER_SURFACE=9]="WATER_SURFACE",e[e.LINE=10]="LINE",e[e.POISON_SURFACE=11]="POISON_SURFACE",e[e.POISON=12]="POISON",e[e.WOOD=13]="WOOD",e[e.THORN_BALL=14]="THORN_BALL",e[e.CONNECT=15]="CONNECT",e[e.DANGER_AREA=16]="DANGER_AREA",e[e.BALLOON=17]="BALLOON",e[e.AIR_FAN=18]="AIR_FAN",e[e.SPIDER=19]="SPIDER",e[e.DOGE_A=101]="DOGE_A",e[e.DOGE_B=106]="DOGE_B",e[e.BIG_BEE=107]="BIG_BEE",e[e.BEEHIVE_A=102]="BEEHIVE_A",e[e.BEEHIVE_B=103]="BEEHIVE_B",e[e.BEEHIVE_C=104]="BEEHIVE_C",e[e.BEEHIVE_D=105]="BEEHIVE_D",e}(td||{});N._RF.pop(),N._RF.push({},"7bb7ftpsjJCX5G6+WtNYJ2x","PhysicsGroup",void 0);var nd=function(e){return e[e.DEFAULT=1]="DEFAULT",e[e.BEE=2]="BEE",e[e.MAIN_OBJECT=4]="MAIN_OBJECT",e[e.WORLD_BOUND=8]="WORLD_BOUND",e[e.ROPE=16]="ROPE",e}(nd||{});N._RF.pop(),N._RF.push({},"a6e4bjV/RVH17qBEx1mZaFg","ResourcePaths",void 0);var id,ad=function(e){return e.WATER_SURFACE_FRAME="sprites/water-surface/spriteFrame",e.IC_HAND_FRAME="sprites/ic-hand/spriteFrame",e.POISON_CIRCLE_FRAME="sprites/poison-circle/spriteFrame",e.POISON_BUBBLE_PREFAB="prefabs/PoisonBubble",e.DUST_PARTICLE_SPINE="spines/dust-particle/siwang_texiao",e.MAP_JSON_PREFIX="maps-json/",e}(ad||{});N._RF.pop(),N._RF.push({},"476e6UyMHFJyI2GmFP4KpHY","BaseObject",void 0);var od,rd,sd,ld,ud,cd,hd,dd=(0,z.ccclass)("BaseObject")(id=function(e){n(r,e);var t=i(r);function r(){var e;a(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).points=[],e.body=null,e.bodyType=be.Static,e}return o(r,[{key:"onLoad",value:function(){this.node.layer=me.Enum.UI_2D}},{key:"sleep",value:function(){if(!this.body){if(this.body=this.getComponent(Se),!this.body)return;this.bodyType=this.body.type}this.enabled=!1,this.body.sleep(),this.body.type=be.Static}},{key:"wake",value:function(){if(this.enabled=!0,this.body)this.body.wakeUp(),this.body.type=this.bodyType;else{if(this.body=this.getComponent(Se),!this.body)return;this.bodyType=this.body.type}}},{key:"hide",value:function(){var e;this.enabled=!1,null===(e=this.body)||void 0===e||e.sleep();var t=this.getComponent(ke.Skeleton);t&&(t.enabled=!1);var n=this.getComponent(Y);n&&(n.enabled=!1)}},{key:"preHide",value:function(){var e;this.enabled=!1,null===(e=this.body)||void 0===e||e.sleep(),this.scheduleOnce(this.hide,.2)}},{key:"appear",value:function(){this.enabled=!0;var e=this.getComponent(ke.Skeleton);e&&(e.enabled=!0)}},{key:"setSpineAnimation",value:function(e,t){var n=this.getComponent(ke.Skeleton);null==n||n.setAnimation(0,e,t)}},{key:"setEnable",value:function(e){this.enabled=e}},{key:"angle",value:function(e,t){var n=Math.atan2(t,e);return n<0&&(n+=2*Math.PI),n}},{key:"getVectorDataFromAToB",value:function(e,t){var n=t.x-e.x,i=t.y-e.y;return{vector:new ve(n,i).normalize(),dx:n,dy:i}}},{key:"kill",value:function(){this.node.active=!1}},{key:"revive",value:function(){this.node.active=!0}}]),r}(U))||id;N._RF.pop(),N._RF.push({},"15b7bvQaXpFgItiEHCr7GsP","AirFan",void 0);var pd=z.ccclass,yd=z.property,vd=Ludex.Utils.Array,fd=(od=pd("AirFan"),rd=yd(M),sd=yd(Ce),od((cd=l((ud=function(e){n(r,e);var t=i(r);function r(){var e;a(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),u(e,"pushForce",cd,c(e)),e.force=new ve(0,0),e.affectedObjects=[],u(e,"collider",hd,c(e)),e.colliders=[],e.onBeginContact=function(t,n){vd.has(e.affectedObjects,n.node.name)&&-1===e.colliders.findIndex((function(e){return e.node===n.node}))&&e.colliders.push(n)},e.onEndContact=function(t,n){var i=e.colliders.indexOf(n);-1!==i&&e.colliders.splice(i,1)},e}return o(r,[{key:"__preload",value:function(){this.collider=this.getComponent(Ce),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){Nt.lazyValidateProperties(this)}},{key:"start",value:function(){this.colliders=[],this.affectedObjects=[qh.DOGE,qh.THORN_BALL,qh.DRAW_LINE,qh.WOOD,qh.BALLOON],this.collider.on(we.BEGIN_CONTACT,this.onBeginContact),this.collider.on(we.END_CONTACT,this.onEndContact)}},{key:"update",value:function(e){var t,n=s(this.colliders);try{for(n.s();!(t=n.n()).done;){var i=t.value,a=i.getComponent(Se);if(a){var o=this.force;i.node.name===qh.DRAW_LINE&&(o=this.force.clone().multiplyScalar(i.density/3)),i.node.name===qh.DOGE&&(o=this.force.clone().multiplyScalar(250/this.pushForce)),a.applyForceToCenter(o,!0)}}}catch(e){n.e(e)}finally{n.f()}}},{key:"setForceDirection",value:function(e){var t=new ve(0,1).rotate(pe.toRadian(e));this.force=t.clone().normalize().multiplyScalar(this.pushForce)}},{key:"sleep",value:function(){p(y(r.prototype),"sleep",this).call(this),this.enabled=!1}},{key:"wake",value:function(){p(y(r.prototype),"wake",this).call(this),this.enabled=!0}}]),r}(dd)).prototype,"pushForce",[rd],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 400}}),hd=l(ud.prototype,"collider",[sd],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ld=ud))||ld);N._RF.pop(),N._RF.push({},"8a02eYTwSpP9IpQ4MrTsAiL","SpineAnimationName",void 0);var md,gd,bd,Sd,kd,Cd,wd,Ed={IDLE:"normal",SMILE:"smile",HURT:"hurt",INACTIVE:"cry",DROWNING:"troll",FREAK_OUT:"freak out",THORN_INACTIVE:"die"},Ad={FLAP_WINGS:"animation",SMOKE_DISAPPEAR:"animation3"},Td={APPEAR:"animation",EXPLODE:"animation2"};N._RF.pop(),N._RF.push({},"ff37brNpltMuaZm+M+x9+1N","Rope",void 0);var Rd,Ld,Pd,_d,Bd,Dd,Od,Id,Nd,Fd=z.ccclass,zd=z.property,xd=(md=Fd("Rope"),gd=zd(Ee),bd=zd(M),md((Cd=l((kd=function(e){n(r,e);var t=i(r);function r(){var e;a(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),u(e,"frame",Cd,c(e)),u(e,"length",wd,c(e)),e.nodes=[],e}return o(r,[{key:"onLoad",value:function(){this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){Nt.lazyValidateProperties(this)}},{key:"start",value:function(){this.nodes=[],this.node.setPosition(this.headJoint.getPosition()),console.log(this.headJoint.getPosition(),this.tailJoint.getPosition(),this.node.getPosition());for(var e=this.headJoint.getPosition().clone().add(new te(0,4)).multiplyScalar(-1),t=this.tailJoint.getPosition().clone().add(new te(0,115)).add(e).multiplyScalar(1/this.length),n=t.length(),i=t.clone().multiplyScalar(-1*this.length),a=new ve(i.x,i.y),o=0;o<this.length;o++){var r=this.createNode(n);if(!r)return void console.warn("Rope: node-".concat(o," not found"));this.node.addChild(r),r.name="node-".concat(o),r.setPosition(t.clone().multiplyScalar(o)),this.nodes.push(r)}for(var s=0;s<this.nodes.length;s++){var l=this.nodes[s];if(0!==s){var u=this.nodes[s-1],c=l.addComponent(Ae);c.enabled=!1,c.anchor=new ve(0,-4),c.connectedAnchor=new ve(0,4),c.connectedBody=u.getComponent(Se),c.collideConnected=!1,c.enableLimit=!0,c.enabled=!0;var h=l.addComponent(Te);if(h.enabled=!1,h.connectedBody=this.headJoint.getComponent(Se),h.anchor=new ve(0,-4),h.connectedAnchor=new ve(0,4),h.collideConnected=!1,h.maxForce=160,h.enabled=!0,s===this.nodes.length-1){var d=this.tailJoint.addComponent(Ae);d.enabled=!1,d.anchor=new ve(0,115),d.connectedBody=l.getComponent(Se),d.connectedAnchor=new ve(0,4),d.collideConnected=!1,d.enableLimit=!0,d.enabled=!0}}else{var p=l.addComponent(Ae);p.enabled=!1,p.connectedBody=this.headJoint.getComponent(Se),p.anchor=new ve(0,-4),p.connectedAnchor=new ve(0,4),p.enableLimit=!0,p.collideConnected=!1,p.enabled=!0}}var y=this.tailJoint.addComponent(Te);y.enabled=!1,y.connectedBody=this.headJoint.getComponent(Se),y.anchor=new ve(0,118),y.connectedAnchor=new ve(0,-4),y.linearOffset=a,y.maxForce=500,y.enabled=!0}},{key:"disconnect",value:function(){console.log("Disconnecting rope");var e=this.nodes[0].getComponent(Ae);if(e){e.connectedBody=null,e.enabled=!1;var t=this.tailJoint.getComponent(Ae);if(t){t.connectedBody=null,t.enabled=!1;var n=this.tailJoint.getComponent(Te);n&&(n.enabled=!1,n.connectedBody=null);var i,a=s(this.nodes);try{for(a.s();!(i=a.n()).done;){var o=i.value.getComponent(Y);if(!o)return void console.warn("Rope: Sprite not found");o.enabled=!1}}catch(e){a.e(e)}finally{a.f()}}else console.warn("Rope: Final joint not found")}else console.warn("Rope: Starting joint not found")}},{key:"createNode",value:function(e){var t=new ie("node");t.layer=this.node.layer,t.addComponent(Y).spriteFrame=this.frame;var n=t.addComponent(W);n.setAnchorPoint(.5,.5),n.setContentSize(6,1.2*e);var i=t.addComponent(Se);return i.linearDamping=5,i.angularDamping=50,i.gravityScale=.1,i.group=nd.ROPE,t.addComponent(Re).size=n.contentSize,t.name=qh.ROPE,t}}]),r}(U)).prototype,"frame",[gd],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),wd=l(kd.prototype,"length",[bd],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Sd=kd))||Sd);N._RF.pop(),N._RF.push({},"a8a47NhLJ9C1ahfjfiJ2xjc","Balloon",void 0);var Gd=z.ccclass,Md=z.property,Ud=Ludex.Utils.Array,Hd=(Rd=Gd("Balloon"),Ld=Md(Le),Pd=Md(Ce),_d=Md(Se),Rd((Od=l((Dd=function(e){n(r,e);var t=i(r);function r(){var e;a(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),u(e,"ropePrefab",Od,c(e)),u(e,"collider",Id,c(e)),u(e,"rigidBody",Nd,c(e)),e.rope=null,e.onBeginContact=function(t,n){if(e.rope){var i=[qh.BEE,qh.THORN,qh.THORN_BALL];Ud.has(i,n.node.name)&&(e.rope.disconnect(),e.setSpineAnimation(Td.EXPLODE,!1),e.scheduleOnce((function(){e.rigidBody.enabled=!1})))}},e}return o(r,[{key:"__preload",value:function(){this.collider=this.getComponent(Ce),this.rigidBody=this.getComponent(Se),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){Nt.lazyValidateProperties(this)}},{key:"start",value:function(){this.setSpineAnimation(Td.APPEAR,!0),this.collider.on(we.BEGIN_CONTACT,this.onBeginContact)}},{key:"connectToDoge",value:function(e){var t=Pe(this.ropePrefab).getComponent(xd);if(t)return t.headJoint=this.node,t.tailJoint=e,t.node.name=qh.ROPE,this.rope=t,t;console.warn("Balloon: Rope component not found")}}]),r}(dd)).prototype,"ropePrefab",[Ld],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Id=l(Dd.prototype,"collider",[Pd],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Nd=l(Dd.prototype,"rigidBody",[_d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Bd=Dd))||Bd);N._RF.pop(),N._RF.push({},"ec831BZISdLgp8vKNuRirUM","PusherBehavior",void 0);var jd=function(){function e(t){a(this,e),this.bee=t}return o(e,[{key:"onBeginContact",value:function(){var e=this.bee;if(e.target){var t=pe.randomRange(20,30),n=e.getVectorDataFromAToB(e.node.getWorldPosition(),e.target.getWorldPosition());n.vector.rotate(Math.random()>.5?-Math.PI/2:Math.PI/2).multiplyScalar(t),e.move(n);var i=e.getComponent(_e);i&&(i.density*=1.1,i.density>=2.5&&(i.density=1,e.setRole(Vh.NORMAL),e.setState($h.ATTACKING)))}}}]),e}();N._RF.pop(),N._RF.push({},"744a5WT+0VHFLma6AT7mXct","NormalBehavior",void 0);var Wd=function(){function e(t){a(this,e),this.touchCount=0,this.bee=t,this.timeToAttack=pe.randomRange(.7,.8),this.countTimeToAttack=0}return o(e,[{key:"onBeginContact",value:function(){var e=this;1===this.touchCount&&this.bee.scheduleOnce((function(){e.touchCount>=3&&e.activePusher(),e.touchCount=0}),.75),this.touchCount++}},{key:"activePusher",value:function(){this.bee.setRole(Vh.PUSHER)}},{key:"update",value:function(e){this.bee.state===$h.ATTACKING&&(this.countTimeToAttack+=e,this.countTimeToAttack>this.timeToAttack&&(this.bee.findTarget(),this.bee.attackTarget(),this.timeToAttack=pe.randomRange(.4,.6),this.countTimeToAttack=0))}}]),e}();N._RF.pop(),N._RF.push({},"19c52/F5VRPcbm2BqdbChIp","BaseBehavior",void 0);var Vd,$d,qd,Kd,Yd,Jd,Xd,Zd,Qd,ep,tp,np,ip=function(){function e(t){a(this,e),this.bee=t,this.normalBehavior=new Wd(t),this.pusherBehavior=new jd(t),this.seekingPathBehavior=null}return o(e,[{key:"onBeginContact",value:function(e,t){switch(this.bee.role){case Vh.NORMAL:this.normalBehavior.onBeginContact();break;case Vh.PATH_SEEKER:if(!this.seekingPathBehavior)return void console.warn("Bee: Seeking path behavior is null");this.seekingPathBehavior.onBeginContact(e,t);break;case Vh.PUSHER:this.pusherBehavior.onBeginContact()}}},{key:"update",value:function(e){this.updateSpecialRole(e)||this.normalBehavior.update(e)}},{key:"updateSpecialRole",value:function(e){switch(this.bee.role){case Vh.PATH_SEEKER:return!!this.seekingPathBehavior&&this.seekingPathBehavior.update(e);default:return!1}}}]),e}();N._RF.pop(),N._RF.push({},"0b146P+xAlN5LGe2MJHlJDc","Bee",void 0);var ap=z.ccclass,op=z.property,rp=(Vd=ap("Bee"),$d=op(ie),qd=op(ke.Skeleton),Kd=op(Ce),Yd=op(Se),Vd((Zd=l((Xd=function(e){n(r,e);var t=i(r);function r(){var e;a(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),u(e,"flipNode",Zd,c(e)),u(e,"spriteNode",Qd,c(e)),e.target=null,e.isSpawnLeftSide=!1,e.role=Vh.NORMAL,e.state=$h.IDLE,e.behavior=new ip(c(e)),e.speed=0,u(e,"collider",ep,c(e)),u(e,"rigidBody",tp,c(e)),u(e,"gameObjects",np,c(e)),e.wanderingOriginHeight=null,e.isWandering=!1,e.onBeginContact=function(t,n){e.enabled&&(e.rigidBody.linearDamping=pe.randomRangeInt(6,8),n.node.name!==qh.THORN&&n.node.name!==qh.POISON&&n.node.name!==qh.BIG_BEE_BULLET?n.node.name!==qh.WATER?(n.node.name===qh.DOGE&&S.playSound(Zn.BEE_STING_DOGE,{volume:.3}),e.behavior.onBeginContact(t,n)):e.drown():e.smokeDisappear())},e}return o(r,[{key:"__preload",value:function(){var e;this.collider=this.getComponent(Ce),this.rigidBody=this.getComponent(Se),this.gameObjects=null===(e=this.node.parent)||void 0===e?void 0:e.getComponent(im),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){Nt.lazyValidateProperties(this)}},{key:"start",value:function(){this.setState($h.IDLE),this.collider.on(we.BEGIN_CONTACT,this.onBeginContact),this.collider.enabled=!1}},{key:"followTarget",value:function(e){this.target=e,this.collider.enabled=!0,this.attackTarget()}},{key:"followInstructions",value:function(){this.collider.enabled=!0}},{key:"findTarget",value:function(){var e=this.gameObjects.getNearestDogeToBee(this);e&&!e.isCantBeTargeted()?this.target=e.node:this.target=null}},{key:"smokeDisappear",value:function(){this.preHide(),this.setSpineAnimation(Ad.SMOKE_DISAPPEAR,!1),this.setState($h.DIE),this.node.scene.emit(sr.BEE_DIE)}},{key:"flap",value:function(){this.setSpineAnimation(Ad.FLAP_WINGS,!0)}},{key:"attackTarget",value:function(){var e=this;if(!this.target){if(this.isWandering)return;this.isWandering=!0,this.scheduleOnce((function(){e.isWandering=!1}),.5),this.speed=pe.randomRange(40,50);var t=this.node.getWorldPosition();null===this.wanderingOriginHeight&&(this.wanderingOriginHeight=t.y+50),t.x+=pe.randomRange(-300,300),t.y=pe.randomRange(this.wanderingOriginHeight,this.wanderingOriginHeight-50);var n=this.getVectorDataFromAToB(this.node.getWorldPosition(),t);return this.move(n),void(this.rigidBody.linearDamping=0)}this.speed=pe.randomRange(20,30);var i=this.getVectorDataFromAToB(this.node.getWorldPosition(),this.target.getWorldPosition());i.vector.rotate(pe.randomRange(-.3,.3)).multiplyScalar(this.speed),this.move(i),this.rigidBody.linearDamping=0,this.setState($h.ATTACKING)}},{key:"sleep",value:function(){p(y(r.prototype),"sleep",this).call(this),this.target=null}},{key:"rotateToVector",value:function(e){this.node.angle=pe.toDegree(this.angle(e.x,e.y)),this.node.angle+=180;var t=this.node.angle/360-Math.floor(this.node.angle/360);t>.25&&t<.75?this.flipNode.setScale(new te(1,-1,1)):this.flipNode.setScale(new te(1,1,1))}},{key:"move",value:function(e){this.rigidBody.linearVelocity=e.vector,this.rotateToVector({x:e.dx,y:e.dy})}},{key:"fly",value:function(e){this.rigidBody.linearVelocity=e,this.rigidBody.linearDamping=0,this.flap(),this.setState($h.FLYING)}},{key:"setState",value:function(e){this.state=e}},{key:"setRole",value:function(e){this.role=e}},{key:"update",value:function(e){this.behavior.update(e)}},{key:"drown",value:function(){this.collider.enabled=!1,this.speed=20;var e=this.node.getWorldPosition();e.y=e.y-1e3;var t=this.getVectorDataFromAToB(this.node.getWorldPosition(),e);this.move(t),this.rigidBody.linearDamping=0,this.spriteNode.paused=!0,this.setState($h.DIE),this.node.scene.emit(sr.BEE_DIE)}},{key:"setSpineAnimation",value:function(e,t){this.spriteNode.setAnimation(0,e,t)}}]),r}(dd)).prototype,"flipNode",[$d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Qd=l(Xd.prototype,"spriteNode",[qd],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ep=l(Xd.prototype,"collider",[Kd],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),tp=l(Xd.prototype,"rigidBody",[Yd],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),np=l(Xd.prototype,"gameObjects",[op],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Jd=Xd))||Jd);N._RF.pop(),N._RF.push({},"23d64mdR6VPRoojd1BBKwos","World",void 0);var sp,lp,up,cp,hp,dp,pp,yp=28,vp={WIDTH:1176,HEIGHT:1792};N._RF.pop(),N._RF.push({},"5f264eibqlEH7PqbJQqHTF7","Line",void 0);var fp=z.ccclass,mp=z.property,gp=(sp=fp("Line"),lp=mp(se),up=mp(Se),sp((dp=l((hp=function(e){n(r,e);var t=i(r);function r(){var e;a(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).points=[],e.colliderInterval=20,e.colliders=[],e.colliderTag=0,u(e,"graphic",dp,c(e)),u(e,"rigidBody",pp,c(e)),e}return o(r,[{key:"__preload",value:function(){this.graphic=this.getComponent(se),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){Nt.lazyValidateProperties(this)}},{key:"init",value:function(){this.points=[],this.colliders=[],this.colliderTag=0}},{key:"drawTo",value:function(e,t,n,i){this.graphic.moveTo(e,t),this.graphic.lineTo(n,i),this.graphic.stroke()}},{key:"addBody",value:function(e,t){var n=this.node.addComponent(_e);n.offset=new ve(e,t),n.radius=8,n.density=5,n.tag=this.colliderTag,n.apply(),this.colliderTag+=1,this.colliders.push(n)}},{key:"deActiveColliders",value:function(){var e,t=s(this.colliders);try{for(t.s();!(e=t.n()).done;){e.value.enabled=!1}}catch(e){t.e(e)}finally{t.f()}}},{key:"storePoints",value:function(e,t){var n=new ve(e,t);this.points.push(n)}},{key:"addPhysics",value:function(){for(var e=0;e<this.points.length-1;e++){var t=this.points[e],n=this.points[e+1];if(t&&n){var i=this.getInternalPoints(t,n);if(e<this.points.length-2){var a=i.pop();if(!a){console.warn("Line: lastPoint not found");continue}this.points[e+1]=a}var o,r=s(i);try{for(r.s();!(o=r.n()).done;){var l,u=o.value,c=!1,h=s(this.colliders);try{for(h.s();!(l=h.n()).done;){var d=l.value;pe.Vec2.distance(u,d.offset)<2*d.radius&&(c=!0)}}catch(e){h.e(e)}finally{h.f()}c||this.addBody(u.x,u.y)}}catch(e){r.e(e)}finally{r.f()}}}var p=this.points[this.points.length-1];p&&this.addBody(p.x,p.y)}},{key:"getInternalPoints",value:function(e,t){for(var n=t.x-e.x,i=t.y-e.y,a=new ve(n,i).normalize().multiplyScalar(this.colliderInterval),o=pe.Vec2.distance(e,t),r=Math.floor(o/this.colliderInterval),s=[e],l=0;l<r;l++){var u=s[s.length-1];if(u){var c=u.clone().add(a);s.push(c)}}return s}},{key:"findNearestCollider",value:function(e){var t=this.colliders[0];if(!t)return null;var n=new te(t.worldPosition.x,t.worldPosition.y,0),i=ve.distance(e,n);return this.colliders.forEach((function(n){var a=new te(n.worldPosition.x,n.worldPosition.y,0);ve.distance(e,a)<i&&(i=ve.distance(e,a),t=n)})),t}}]),r}(dd)).prototype,"graphic",[lp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pp=l(hp.prototype,"rigidBody",[up],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cp=hp))||cp);N._RF.pop(),N._RF.push({},"afc3eWzi4tHNYb9W7f6QpCX","SeekingPathBehavior",void 0);var bp,Sp,kp,Cp=function(){function e(t,n){a(this,e),this.isFinishSeeking=!1,this.vectorDataGroup=[],this.index=0,this.bee=t,this.isSeekToLastPoint=n,this.vectorDataGroup=[],this.isFinishSeeking=!1,this.time=.02,this.remaining=0,this.index=0}return o(e,[{key:"seek",value:function(e){var t=this.bee.node.scene.getComponentInChildren(gp);if(!t)return console.warn("Bee: Line is null"),!1;var n=t.colliders.findIndex((function(t){if(t.tag===e.tag)return!0}));if(-1===n)return!1;this.vectorDataGroup=[],this.isFinishSeeking=!1,this.time=.04,this.remaining=0,this.index=0;var i=this.bee.speed;return i||(i=pe.randomRange(20,30)),this.isSeekToLastPoint?this.seekToLastPoint(n,t,i):this.seekToFirstPoint(n,t,i),!0}},{key:"seekToLastPoint",value:function(e,t,n){for(var i=e;i<t.colliders.length-1;i++){var a=t.colliders[i],o=t.colliders[i+1],r=this.bee.getVectorDataFromAToB(a.worldPosition,o.worldPosition);r.vector.multiplyScalar(n),this.vectorDataGroup.push(r)}}},{key:"seekToFirstPoint",value:function(e,t,n){for(var i=e;i>0;i--){var a=t.colliders[i],o=t.colliders[i-1],r=this.bee.getVectorDataFromAToB(a.worldPosition,o.worldPosition);r.vector.multiplyScalar(n),this.vectorDataGroup.push(r)}}},{key:"flyToNextDirection",value:function(){var e=this.vectorDataGroup[this.index];if(this.index+=1,!e)return this.isFinishSeeking=!0,this.bee.setRole(Vh.NORMAL),void this.bee.setState($h.ATTACKING);this.bee.move(e)}},{key:"fly",value:function(e){this.remaining+=e,this.remaining>this.time&&(this.flyToNextDirection(),this.time=.02,this.remaining=0)}},{key:"onBeginContact",value:function(e,t){if(this.bee.state===$h.SEEKING_PATH&&t.node.name!==qh.DRAW_LINE)return this.isFinishSeeking=!0,this.bee.setRole(Vh.NORMAL),void this.bee.setState($h.ATTACKING);this.isFinishSeeking||this.bee.state===$h.WAITING_TO_SEEK_PATH||t.node.name!==qh.DRAW_LINE||this.handlePathSeekerTouchLine(t)}},{key:"handlePathSeekerTouchLine",value:function(e){var t=this;this.seek(e)&&this.bee.state!==$h.SEEKING_PATH&&(this.bee.setState($h.WAITING_TO_SEEK_PATH),this.bee.scheduleOnce((function(){t.bee.setState($h.SEEKING_PATH)}),.3))}},{key:"update",value:function(e){return this.bee.state===$h.SEEKING_PATH&&(this.fly(e),!0)}}]),e}();N._RF.pop(),N._RF.push({},"2181aAj+ElOoL2tBGH10euY","Beehive",void 0);var wp,Ep,Ap,Tp,Rp,Lp,Pp,_p,Bp,Dp,Op,Ip=z.ccclass,Np=z.property,Fp=Ip("Beehive")((kp=l((Sp=function(e){n(r,e);var t=i(r);function r(){var e;a(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).totalPathSeekers=0,e.isSeekToLastPoint=!0,u(e,"gameObjects",kp,c(e)),e}return o(r,[{key:"onLoad",value:function(){var e;this.gameObjects=null===(e=this.node.parent)||void 0===e?void 0:e.getComponent(im),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){Nt.lazyValidateProperties(this)}},{key:"releaseBee",value:function(e){var t=this;this.updateTotalPathSeekers(),this.scheduleOnce((function(){var n=e.getComponent(rp);if(n){t.createPathSeeker(n),"isRightSide"in t.node&&!0===t.node.isRightSide?t.spawnInRightSide(n):t.spawnInLeftSide(n),n.wake();var i=t.gameObjects.getRandomDogeToBee();i&&t.scheduleOnce((function(){return n.followTarget(i.node)}),.2)}}),pe.randomRange(.1,.4))}},{key:"updateTotalPathSeekers",value:function(){"totalPathSeekers"in this.node&&"number"==typeof this.node.totalPathSeekers&&(this.totalPathSeekers=this.node.totalPathSeekers)}},{key:"spawnInLeftSide",value:function(e){var t=this.node.getPosition(),n=t.x,i=t.y,a=pe.randomRangeInt(-10,0),o=pe.randomRangeInt(38,48);e.isSpawnLeftSide=!0,e.node.setScale(new te(1,1,1)),e.node.setPosition(n+a,i+o),e.fly(new ve(-2,-1).normalize().multiplyScalar(2))}},{key:"spawnInRightSide",value:function(e){var t=this.node.getPosition(),n=t.x,i=t.y,a=pe.randomRangeInt(0,10),o=pe.randomRangeInt(38,48);e.isSpawnLeftSide=!1,e.node.setScale(new te(1,1,1)),e.node.setPosition(n+a,i+o),e.fly(new ve(2,-1).normalize().multiplyScalar(2))}},{key:"createPathSeeker",value:function(e){0!==this.totalPathSeekers&&(e.setRole(Vh.PATH_SEEKER),e.behavior.seekingPathBehavior=new Cp(e,this.isSeekToLastPoint),this.isSeekToLastPoint=!this.isSeekToLastPoint,this.totalPathSeekers-=1)}}]),r}(dd)).prototype,"gameObjects",[Np],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bp=Sp))||bp;N._RF.pop(),N._RF.push({},"a17a07Pu/tAGb4MdM3jxHke","BigBeeBullet",void 0);var zp,xp,Gp,Mp,Up,Hp,jp,Wp,Vp,$p,qp,Kp,Yp=z.ccclass,Jp=z.property,Xp=(wp=Yp("BigBeeBullet"),Ep=Jp(Y),Ap=Jp(ke.Skeleton),Tp=Jp(Ce),Rp=Jp(Se),wp((_p=l((Pp=function(e){n(r,e);var t=i(r);function r(){var e;a(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),u(e,"stinger",_p,c(e)),u(e,"ci",Bp,c(e)),u(e,"collider",Dp,c(e)),u(e,"rigidBody",Op,c(e)),e.onBeginContact=function(){e.stinger.active=!1,e.ci.active=!0;var t=e.ci.getComponent(ke.Skeleton);t?(t.enabled=!0,t.setAnimation(0,"animation",!1),S.playSound(Zn.BEE_BULLET_EXPLODE,{allowMultiple:!0}),t.setCompleteListener((function(){e.kill()}))):console.warn("BigBeeBullet: ske not found")},e}return o(r,[{key:"onLoad",value:function(){this.collider=this.getComponent(Ce),this.rigidBody=this.getComponent(Se),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){Nt.lazyValidateProperties(this)}},{key:"start",value:function(){this.revive()}},{key:"revive",value:function(){p(y(r.prototype),"revive",this).call(this),this.stinger.active=!0,this.ci.active=!1,this.ci.getComponent(ke.Skeleton).enabled=!1,this.collider.once(we.BEGIN_CONTACT,this.onBeginContact)}},{key:"kill",value:function(){p(y(r.prototype),"kill",this).call(this),this.stinger.active=!1,this.ci.active=!1}},{key:"forwardToDoge",value:function(e){var t=pe.randomRange(20,30),n=this.getVectorDataFromAToB(this.node.getWorldPosition(),e.getWorldPosition());n.vector.rotate(pe.randomRange(-.3,.3)).multiplyScalar(t),this.rigidBody.linearVelocity=n.vector,this.node.angle=pe.toDegree(this.angle(n.dx,n.dy))}}]),r}(dd)).prototype,"stinger",[Ep],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Bp=l(Pp.prototype,"ci",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Dp=l(Pp.prototype,"collider",[Tp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Op=l(Pp.prototype,"rigidBody",[Rp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Lp=Pp))||Lp);N._RF.pop(),N._RF.push({},"2b15b1CihdEf60Zy/wIYirK","BigBee",void 0);var Zp,Qp,ey,ty,ny,iy,ay,oy,ry=z.ccclass,sy=z.property,ly=(zp=ry("BigBee"),xp=sy(Le),Gp=sy(ke.Skeleton),Mp=sy(_e),Up=sy(Se),zp((Wp=l((jp=function(e){n(l,e);var r,s=i(l);function l(){var e;a(this,l);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return e=s.call.apply(s,[this].concat(n)),u(e,"bulletPrefab",Wp,c(e)),e.state=$h.IDLE,e.target=null,e.bulletPool=[],e.timeToAttack=0,e.countTimeToAttack=0,u(e,"skeleton",Vp,c(e)),u(e,"gameObjects",$p,c(e)),u(e,"collider",qp,c(e)),u(e,"rigidBody",Kp,c(e)),e.onBeginContact=function(t,n){e.enabled&&(n.node.name!==qh.THORN&&n.node.name!==qh.POISON||e.smokeDisappear())},e}return o(l,[{key:"onLoad",value:function(){var e;this.skeleton=this.getComponent(ke.Skeleton),this.gameObjects=null===(e=this.node.parent)||void 0===e?void 0:e.getComponent(im),this.collider=this.getComponent(_e),this.rigidBody=this.getComponent(Se),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){Nt.lazyValidateProperties(this)}},{key:"start",value:function(){this.node.setScale(new te(.7,.7,.7)),this.timeToAttack=pe.randomRange(1,2),this.countTimeToAttack=0,this.createBulletPool(),this.initDustParticle();var e=this.gameObjects.getRandomDogeToBee();e?(this.target=e.node,this.state=$h.FLYING,this.collider.on(we.BEGIN_CONTACT,this.onBeginContact)):console.warn("BigBee: Target not found")}},{key:"update",value:function(e){this.state===$h.ATTACKING&&(this.countTimeToAttack+=e,this.countTimeToAttack>this.timeToAttack&&(this.attackTarget(),this.timeToAttack=pe.randomRange(1,2),this.countTimeToAttack=0))}},{key:"createBulletPool",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;this.bulletPool=[];for(var t=0;t<e;t++)this.createBullet()}},{key:"initDustParticle",value:(r=t((function*(){if(this.node.parent){var e=new ie(qh.DUST_PARTICLE);e.layer=Math.pow(2,25),e.active=!1;var t=e.addComponent(ke.Skeleton),n=yield h.loadSkeletonDataAsync(ad.DUST_PARTICLE_SPINE);n?this.node&&this.node.isValid&&(t.skeletonData=n,this.node.parent.addChild(e),this.dustParticle=e):console.warn("initDustParticle","Failed to load dust particle spine")}})),function(){return r.apply(this,arguments)})},{key:"createDust",value:function(){var e=this;if(this.dustParticle){this.dustParticle.active=!0;var t=this.node.getWorldPosition(),n=t.x,i=t.y;this.dustParticle.setWorldPosition(new te(n,i));try{var a=this.dustParticle.getComponent(ke.Skeleton);null==a||a.setAnimation(0,"animation",!1)}catch(e){console.error("createDust",e)}this.scheduleOnce((function(){e.dustParticle&&(e.dustParticle.active=!1)}),.5)}}},{key:"createBullet",value:function(){if(!this.node.parent)return console.warn("BigBee: Parent not found"),null;var e=Pe(this.bulletPrefab),t=e.getComponent(Xp);return e.name=qh.BIG_BEE_BULLET,t&&t.kill(),this.node.parent.addChild(e),this.bulletPool.push(e),e}},{key:"smokeDisappear",value:function(){this.hide(),this.createDust(),this.state=$h.DIE,this.node.scene.emit(sr.BIG_BEE_DIE)}},{key:"sleep",value:function(){}},{key:"wake",value:function(){}},{key:"hide",value:function(){this.enabled=!1,this.rigidBody.sleep(),this.skeleton.enabled=!1}},{key:"preHide",value:function(){}},{key:"appear",value:function(){}},{key:"setSpineAnimation",value:function(e,t){}},{key:"attackTarget",value:function(){var e=this;this.skeleton.setAnimation(0,"attack",!1),this.skeleton.setCompleteListener((function(){e.skeleton.setAnimation(0,"fly",!0)})),this.scheduleOnce((function(){if(e.target){var t=e.bulletPool.filter((function(e){return!1===e.active}))[0];if(!t){var n=e.createBullet();if(!n)return;t=n}var i=t.getComponent(Xp);if(i){i.revive();var a=e.node.getPosition(),o=a.x,r=a.y;t.setPosition(o,r),i.forwardToDoge(e.target)}else console.warn("BigBee: Bullet component not found")}else console.warn("BigBee: Target not found")}),.5)}}]),l}(dd)).prototype,"bulletPrefab",[xp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Vp=l(jp.prototype,"skeleton",[Gp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$p=l(jp.prototype,"gameObjects",[sy],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),qp=l(jp.prototype,"collider",[Mp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Kp=l(jp.prototype,"rigidBody",[Up],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Hp=jp))||Hp);N._RF.pop(),N._RF.push({},"8e16aARuABAK56lFGhIfeH+","Brick",void 0);var uy,cy,hy,dy,py,yy=z.ccclass,vy=z.property,fy=z.requireComponent,my=(Zp=yy("Brick"),Qp=fy([Be]),ey=vy({tooltip:"Use batch draw all bricks"}),ty=vy(Y),Zp(ny=Qp((ay=l((iy=function(e){n(r,e);var t=i(r);function r(){var e;a(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),u(e,"useBatch",ay,c(e)),u(e,"sprite",oy,c(e)),e.brickPolygons=[],e}return o(r,[{key:"__preload",value:function(){this.mask=this.getComponent(Be),this.graphic=this.getComponent(se),this.polygonCollider=this.getComponent(De),this.validateRequiredComponents(),this.listenGameplayEvents()}},{key:"validateRequiredComponents",value:function(){Nt.lazyValidateProperties(this)}},{key:"listenGameplayEvents",value:function(){}},{key:"addBrickPolygon",value:function(e){this.brickPolygons.push(e)}},{key:"onLoad",value:function(){var e=this.getPolygon();e&&(this.useBatch?(this.mask.enabled=!1,this.graphic.enabled=!1,this.addBrickPolygon(e)):(this.updateTransform(e),this.drawMask(e),this.applyCollider(e)))}},{key:"getPolygon",value:function(){if(!("polygon"in this.node))return null;var e=this.node.polygon;return Array.isArray(e)?e:null}},{key:"updateTransform",value:function(e){var t=this.calculatePolygonDimensions(e),n=t.width,i=t.height;this.setPosition(0,0),this.setContentSize(n,i)}},{key:"setPosition",value:function(e,t){this.node.setPosition(e,t)}},{key:"setContentSize",value:function(e,t){var n=this.sprite.getComponent(W);n&&n.setContentSize(e,t)}},{key:"updateContentSizeForBatchDraw",value:function(){var e=this.brickPolygons.map((function(e){return e.map((function(e){var t=e.x,n=e.y;return new ve(t,n)}))})).flat(),t=this.calculatePolygonDimensions(e),n=t.width,i=t.height,a=this.calculateSpritePositionForBatchDraw(e),o=this.sprite.getComponent(W);if(o){o.setContentSize(n,i);var r=this.sprite.getComponent(Y);r&&r.node.setPosition(a.x,a.y)}}},{key:"calculateSpritePositionForBatchDraw",value:function(e){for(var t=e[0].x,n=e[0].x,i=e[0].y,a=e[0].y,o=1;o<e.length;o++){var r=e[o],s=r.x,l=r.y;s<t?t=s:s>n&&(n=s),l<i?i=l:l>a&&(a=l)}return{x:t,y:i}}},{key:"calculatePolygonDimensions",value:function(e){for(var t=e[0].x,n=e[0].x,i=e[0].y,a=e[0].y,o=1;o<e.length;o++){var r=e[o],s=r.x,l=r.y;s<t?t=s:s>n&&(n=s),l<i?i=l:l>a&&(a=l)}return{width:Math.abs(n-t),height:Math.abs(a-i)}}},{key:"drawMask",value:function(e){this.graphic.moveTo(e[0].x,e[0].y);var t,n=s(e);try{for(n.s();!(t=n.n()).done;){var i=t.value;this.graphic.lineTo(i.x,i.y)}}catch(e){n.e(e)}finally{n.f()}this.graphic.close(),this.graphic.fill()}},{key:"batchDrawAllBrick",value:function(){if(!(this.brickPolygons.length<1)){this.mask.enabled=!0,this.graphic.enabled=!0,this.updateContentSizeForBatchDraw();var e,t=s(this.brickPolygons);try{for(t.s();!(e=t.n()).done;){var n=e.value;this.drawMask(n)}}catch(e){t.e(e)}finally{t.f()}this.applyColliderForBatchDraw(),this.brickPolygons=[]}}},{key:"applyCollider",value:function(e){this.polygonCollider.points=e.map((function(e){var t=e.x,n=e.y;return new ve(t,n)})),this.polygonCollider.apply()}},{key:"applyColliderForBatchDraw",value:function(){var e,t=this.brickPolygons.map((function(e){return e.map((function(e){var t=e.x,n=e.y;return new ve(t,n)}))})),n=s(t);try{for(n.s();!(e=n.n()).done;){var i=e.value,a=new ie;a.name=qh.BRICK,this.node.addChild(a),a.setPosition(0,0);var o=a.addComponent(Se);o.type=be.Static,o.group=nd.MAIN_OBJECT;var r=a.addComponent(De);r.points=i,r.apply()}}catch(e){n.e(e)}finally{n.f()}}}]),r}(U)).prototype,"useBatch",[ey],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),oy=l(iy.prototype,"sprite",[ty],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ny=iy))||ny)||ny);N._RF.pop(),N._RF.push({},"46fa0f/kl1Heo/JvM2kAEAf","GraphicsPattern",void 0);var gy,by,Sy,ky,Cy,wy,Ey,Ay,Ty,Ry,Ly,Py,_y=z.ccclass,By=z.property,Dy=(uy=_y("GraphicsPattern"),cy=By(se),uy((py=l((dy=function(e){n(r,e);var t=i(r);function r(){var e;a(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),u(e,"graphic",py,c(e)),e}return o(r,[{key:"onLoad",value:function(){this.graphic=this.getComponent(se),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){Nt.lazyValidateProperties(this)}},{key:"start",value:function(){}},{key:"sleep",value:function(){}},{key:"draw",value:function(e){this.graphic.moveTo(e[0].x,e[0].y);var t,n=s(e);try{for(n.s();!(t=n.n()).done;){var i=t.value;this.graphic.lineTo(i.x,i.y)}}catch(e){n.e(e)}finally{n.f()}this.graphic.close(),this.graphic.fill()}},{key:"applyCollider",value:function(e){var t=this.getComponent(De);t?(t.points=e.map((function(e){var t=e.x,n=e.y;return new ve(t,n)})),t.apply()):console.warn("GraphicsPattern: PolygonCollider2D not found")}},{key:"setColor",value:function(e){var t=new le;le.fromHEX(t,e),this.graphic.fillColor=t}}]),r}(dd)).prototype,"graphic",[cy],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),hy=dy))||hy);N._RF.pop(),N._RF.push({},"959bd9NhYpMTK0O78HSl4rc","Pattern",void 0);var Oy,Iy=z.ccclass,Ny=z.property,Fy=z.requireComponent,zy=(gy=Iy("Pattern"),by=Fy([se,De,Se]),Sy=Ny(Y),ky=Ny(se),Cy=Ny(Se),wy=Ny(De),gy(Ey=by((Ty=l((Ay=function(e){n(r,e);var t=i(r);function r(){var e;a(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),u(e,"sprite",Ty,c(e)),u(e,"graphic",Ry,c(e)),u(e,"rigidBody",Ly,c(e)),u(e,"polygonCollider",Py,c(e)),e}return o(r,[{key:"onLoad",value:function(){this.graphic=this.getComponent(se),this.rigidBody=this.getComponent(Se),this.polygonCollider=this.getComponent(De),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){Nt.lazyValidateProperties(this)}},{key:"start",value:function(){}},{key:"draw",value:function(e){var t=this.sprite.getComponent(W);if(t){var n=this.getBottomLeftPosition(e),i=n.x,a=n.y,o=this.getTopRightPosition(e),r=o.x,l=o.y;t.setContentSize(r-i,l-a),t.node.setPosition(i,a),this.graphic.moveTo(e[0].x,e[0].y);var u,c=s(e);try{for(c.s();!(u=c.n()).done;){var h=u.value;this.graphic.lineTo(h.x,h.y)}}catch(e){c.e(e)}finally{c.f()}this.graphic.close(),this.graphic.fill()}}},{key:"savePolygonPoints",value:function(e){this.points=e}},{key:"getPolygonPoints",value:function(){return this.points}},{key:"applyCollider",value:function(e){this.polygonCollider.points=e.map((function(e){var t=e.x,n=e.y;return new ve(t,n)})),this.polygonCollider.apply()}},{key:"setRigidBodyType",value:function(e){this.rigidBody.type=e}},{key:"getBottomLeftPosition",value:function(e){var t,n=e[0].x,i=e[0].y,a=s(e);try{for(a.s();!(t=a.n()).done;){var o=t.value;n>o.x&&(n=o.x),i>o.y&&(i=o.y)}}catch(e){a.e(e)}finally{a.f()}return{x:n,y:i}}},{key:"getTopRightPosition",value:function(e){var t,n=e[0].x,i=e[0].y,a=s(e);try{for(a.s();!(t=a.n()).done;){var o=t.value;n<o.x&&(n=o.x),i<o.y&&(i=o.y)}}catch(e){a.e(e)}finally{a.f()}return{x:n,y:i}}}]),r}(dd)).prototype,"sprite",[Sy],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ry=l(Ay.prototype,"graphic",[ky],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ly=l(Ay.prototype,"rigidBody",[Cy],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Py=l(Ay.prototype,"polygonCollider",[wy],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ey=Ay))||Ey)||Ey);N._RF.pop(),N._RF.push({},"a08960ZMBtFcLD/1nWNbAM9","Poison",void 0);var xy,Gy=z.ccclass,My=z.requireComponent,Uy=Gy("Poison")(Oy=My([Dy])(Oy=function(e){n(u,e);var r,l=i(u);function u(){var e;a(this,u);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return(e=l.call.apply(l,[this].concat(n))).polygon=[],e.useBatch=!1,e.poisonPolygons=[],e.bubbleFrame=null,e.bubblePool=null,e.remaining=0,e.maxPoolSize=0,e.totalBubble=0,e}return o(u,[{key:"onLoad",value:function(){var e;this.graphicPattern=this.getComponent(Dy),this.gameObjects=null===(e=this.node.parent)||void 0===e?void 0:e.getComponent(im),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){Nt.lazyValidateProperties(this)}},{key:"start",value:function(){this.addRigidBody(),this.useBatch||(this.addPolygonCollider(),this.drawPattern(),this.loadCircleFrame(),this.setTimeSpawnBubble(.2))}},{key:"addPoisonPolygon",value:function(e){this.poisonPolygons.push(e)}},{key:"batchDrawAllPoisonPools",value:function(){if(!(this.poisonPolygons.length<1)){this.graphicPattern.setColor("#774798d1");var e,t=s(this.poisonPolygons);try{for(t.s();!(e=t.n()).done;){var n=e.value;this.graphicPattern.draw(n)}}catch(e){t.e(e)}finally{t.f()}this.applyColliderForBatchDraw(),this.loadCircleFrame(),this.setTimeSpawnBubble(.2)}}},{key:"applyColliderForBatchDraw",value:function(){var e,t=this.poisonPolygons.map((function(e){return e.map((function(e){var t=e.x,n=e.y;return new ve(t,n)}))})),n=s(t);try{for(n.s();!(e=n.n()).done;){var i=e.value,a=new ie;a.name=qh.POISON,this.node.addChild(a),a.setPosition(0,0);var o=a.addComponent(Se);o.group=nd.MAIN_OBJECT,o.type=be.Static;var r=a.addComponent(De);r.points=i,r.sensor=!0,r.apply()}}catch(e){n.e(e)}finally{n.f()}}},{key:"addRigidBody",value:function(){var e=this.addComponent(Se);e?(e.group=nd.MAIN_OBJECT,e.type=be.Static):console.warn("Cannot add RigidBody2D")}},{key:"addPolygonCollider",value:function(){var e=this.addComponent(De);e?e.sensor=!0:console.warn("Cannot add PolygonCollider2D")}},{key:"drawPattern",value:function(){this.graphicPattern.setColor("#774798d1"),this.graphicPattern.draw(this.polygon),this.graphicPattern.applyCollider(this.polygon)}},{key:"loadCircleFrame",value:(r=t((function*(){var e=yield h.loadSpriteFrameAsync(ad.POISON_CIRCLE_FRAME);if(this.node.isValid&&e){this.bubbleFrame=e;var t=this.useBatch?20*this.poisonPolygons.length:20;this.initPool(10,t)}})),function(){return r.apply(this,arguments)})},{key:"initPool",value:function(e,t){this.bubblePool=new Oe,this.maxPoolSize=t;for(var n=0;n<e;n++)this.spawnBubble()}},{key:"setTimeSpawnBubble",value:function(e){this.remaining=e}},{key:"spawnBubble",value:function(){if(!this.bubblePool)return null;if(this.totalBubble>=this.maxPoolSize)return null;var e=null;return this.bubblePool.size()>0?e=this.bubblePool.get():(e=new ie(qh.POISON_BUBBLE),this.initBubble(e),this.killBubble(e),this.bubblePool.put(e)),e?(this.gameObjects.addObject(e),this.totalBubble+=1,e):null}},{key:"releaseBubble",value:function(e){this.bubblePool&&(this.killBubble(e),Ie.stopAllByTarget(e),this.bubblePool.put(e),this.totalBubble-=1)}},{key:"killBubble",value:function(e){if(e){var t=e.getComponent(Y);t&&(t.enabled=!1)}}},{key:"reviveBubble",value:function(e,t){var n=this.getPosition(t),i=n.minX,a=n.minY,o=n.maxX,r=pe.randomRange(i,o),s=e.getComponent(ae);s?s.opacity=125:console.warn("UIOpacity not found in bubble");var l=e.getComponent(Y);l&&(l.enabled=!0),e.setPosition(new te(r,a))}},{key:"initBubble",value:function(e){e.layer=this.node.layer,e.addComponent(Y).spriteFrame=this.bubbleFrame,e.addComponent(ae)}},{key:"update",value:function(e){if(this.remaining-=e,this.remaining<=0){if(!this.useBatch){var t=this.spawnBubble();if(!t)return;this.reviveBubble(t,this.polygon),this.playBubbleTween(t,this.polygon);var n=pe.randomRange(.3,.5);return void this.setTimeSpawnBubble(n)}var i,a=pe.randomRange(.3,.5),o=s(this.poisonPolygons);try{for(o.s();!(i=o.n()).done;){var r=i.value,l=this.spawnBubble();if(!l)return;this.reviveBubble(l,r),this.playBubbleTween(l,r)}}catch(e){o.e(e)}finally{o.f()}this.setTimeSpawnBubble(a)}}},{key:"playBubbleTween",value:function(e,t){var n=this;if(e){var i=this.getPosition(t),a=i.minY,o=i.maxY,r=e.getPosition(),s=pe.randomRange(80,120),l=Math.abs(o-a),u=r.x,c=r.y+(o-a)-10,h=l/s;q(e).call((function(){e.setPosition(r)})).to(h,{position:new te(u,c)},{easing:"smooth"}).call((function(){n.releaseBubble(e)})).start();var d=e.getComponent(ae);if(d){var p=h-.4>0?.4:h;d.opacity=160,q(d).delay(h-p).to(p,{opacity:0},{easing:"smooth"}).start()}else console.warn("UIOpacity not found in bubble")}}},{key:"getPosition",value:function(e){var t,n=1e4,i=0,a=1e4,o=0,r=s(e);try{for(r.s();!(t=r.n()).done;){var l=t.value,u=l.x,c=l.y;u<n&&(n=u),u>i&&(i=u),c<a&&(a=c),c>o&&(o=c)}}catch(e){r.e(e)}finally{r.f()}return{minX:n+=20,minY:a+=13,maxX:i-=20,maxY:o-=13}}}]),u}(U))||Oy)||Oy;N._RF.pop(),N._RF.push({},"8633c11nMJN7I7TAFaGu3Fg","PoisonSurface",void 0);var Hy,jy=(0,z.ccclass)("PoisonSurface")(xy=function(e){n(u,e);var r,l=i(u);function u(){var e;a(this,u);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return(e=l.call.apply(l,[this].concat(n))).poisonBubblePrefab=null,e.polygon=[],e.useBatch=!1,e.surfacePolygon=[],e.bubblePool=null,e.remaining=0,e.maxPoolSize=0,e.totalBubble=0,e}return o(u,[{key:"onLoad",value:function(){var e;this.graphicPattern=this.getComponent(Dy),this.gameObjects=null===(e=this.node.parent)||void 0===e?void 0:e.getComponent(im),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){Nt.lazyValidateProperties(this)}},{key:"start",value:function(){this.useBatch||(this.drawPattern(),this.loadBubbleFrame())}},{key:"drawPattern",value:function(){this.graphicPattern.setColor("#9757bcb0"),this.graphicPattern.draw(this.polygon)}},{key:"addPoisonSurfacePolygon",value:function(e){this.surfacePolygon.push(e)}},{key:"batchDrawAllPoisonSurfaces",value:function(){if(!(this.surfacePolygon.length<1)){this.graphicPattern.setColor("#9757bcb0");var e,t=s(this.surfacePolygon);try{for(t.s();!(e=t.n()).done;){var n=e.value;this.graphicPattern.draw(n)}}catch(e){t.e(e)}finally{t.f()}this.loadBubbleFrame()}}},{key:"loadBubbleFrame",value:(r=t((function*(){try{var e=yield h.loadPrefabAsync(ad.POISON_BUBBLE_PREFAB);if(!this.node.isValid)return;if(!e)throw new Error("loadBubbleFrame: Prefab is null");this.poisonBubblePrefab=e;var t=this.useBatch?12*this.surfacePolygon.length:12;this.initPool(10,t),this.setTimeSpawnBubble(.3)}catch(e){var n=e instanceof Error?e:new Error(String(e));console.error("loadBubbleFrame",n)}})),function(){return r.apply(this,arguments)})},{key:"update",value:function(e){if(this.remaining-=e,this.remaining<=0){if(!this.useBatch){var t=this.spawnPoisonBubblePop();if(!t)return;this.reviveBubble(t,this.polygon);var n=pe.randomRange(.3,.5);return void this.setTimeSpawnBubble(n)}var i,a=pe.randomRange(.3,.5),o=s(this.surfacePolygon);try{for(o.s();!(i=o.n()).done;){var r=i.value,l=this.spawnPoisonBubblePop();if(!l)return;this.reviveBubble(l,r)}}catch(e){o.e(e)}finally{o.f()}this.setTimeSpawnBubble(a)}}},{key:"initPool",value:function(e,t){this.bubblePool=new Oe,this.maxPoolSize=t;for(var n=0;n<e;n++)this.spawnPoisonBubblePop()}},{key:"setTimeSpawnBubble",value:function(e){this.remaining=e}},{key:"spawnPoisonBubblePop",value:function(){if(!this.bubblePool)return null;if(this.totalBubble>=this.maxPoolSize)return null;var e=null;if(this.bubblePool.size()>0)e=this.bubblePool.get();else{if(!((e=Pe(this.poisonBubblePrefab))instanceof ie))return null;this.bubblePool.put(e)}return e?(e.name=qh.POISON_SURFACE,this.gameObjects.addObject(e),this.totalBubble+=1,e):null}},{key:"releasePoisonBubblePop",value:function(e){this.bubblePool&&(this.bubblePool.put(e),this.totalBubble-=1)}},{key:"reviveBubble",value:function(e,t){var n=this;if(e){var i=this.getRandomPosition(t),a=i.x,o=i.y;e.setPosition(new te(a,o));var r=e.getComponent(ke.Skeleton);r&&(r.setAnimation(0,"animation",!1),r.setCompleteListener((function(){n.releasePoisonBubblePop(e)})))}}},{key:"getRandomPosition",value:function(e){var t,n=1e4,i=0,a=1e4,o=0,r=s(e);try{for(r.s();!(t=r.n()).done;){var l=t.value,u=l.x,c=l.y;u<n&&(n=u),u>i&&(i=u),c<a&&(a=c),c>o&&(o=c)}}catch(e){r.e(e)}finally{r.f()}return{x:pe.randomRange(n+25,i-25),y:pe.randomRange(a+5,o-5)}}}]),u}(U))||xy;N._RF.pop(),N._RF.push({},"9aa6cp2xqhK1LJeA0kz2hWR","Water",void 0);var Wy=z.ccclass,Vy=z.requireComponent,$y=Wy("Water")(Hy=Vy([Dy])(Hy=function(e){n(r,e);var t=i(r);function r(){var e;a(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).polygon=[],e.useBatch=!1,e.waterPolygon=[],e}return o(r,[{key:"onLoad",value:function(){this.graphicPattern=this.getComponent(Dy),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){Nt.lazyValidateProperties(this)}},{key:"start",value:function(){this.addRigidBody(),this.useBatch||(this.addPolygonCollider(),this.drawPattern())}},{key:"addWaterPolygon",value:function(e){this.waterPolygon.push(e)}},{key:"batchDrawAllWater",value:function(){if(!(this.waterPolygon.length<1)){this.graphicPattern.setColor("#58cef0d0");var e,t=s(this.waterPolygon);try{for(t.s();!(e=t.n()).done;){var n=e.value;this.graphicPattern.draw(n)}}catch(e){t.e(e)}finally{t.f()}this.applyColliderForBatchDraw()}}},{key:"applyColliderForBatchDraw",value:function(){var e,t=this.waterPolygon.map((function(e){return e.map((function(e){var t=e.x,n=e.y;return new ve(t,n)}))})),n=s(t);try{for(n.s();!(e=n.n()).done;){var i=e.value,a=new ie;a.name=qh.WATER,this.node.addChild(a),a.setPosition(0,0);var o=a.addComponent(Se);o.group=nd.MAIN_OBJECT,o.type=be.Static;var r=a.addComponent(De);r.points=i,r.sensor=!0,r.apply()}}catch(e){n.e(e)}finally{n.f()}}},{key:"addRigidBody",value:function(){var e=this.addComponent(Se);e?(e.group=nd.MAIN_OBJECT,e.type=be.Static):console.warn("Cannot add RigidBody2D")}},{key:"addPolygonCollider",value:function(){var e=this.addComponent(De);e?e.sensor=!0:console.warn("Cannot add PolygonCollider2D")}},{key:"drawPattern",value:function(){this.graphicPattern.setColor("#58cef0d0"),this.graphicPattern.draw(this.polygon),this.graphicPattern.applyCollider(this.polygon)}}]),r}(U))||Hy)||Hy;N._RF.pop(),N._RF.push({},"d6e4emyi1lPpLbSlAWFj/GD","CrossingBeeLineTypes",void 0);var qy,Ky,Yy,Jy,Xy,Zy,Qy,ev,tv,nv,iv,av,ov,rv,sv=function(e){return e[e.LOW=0]="LOW",e[e.MEDIUM=1]="MEDIUM",e[e.HIGH=2]="HIGH",e}(sv||{});X(sv),N._RF.pop(),N._RF.push({},"988b72EAIhJ1qc0nrLU68l7","CrossingBeeLine",void 0);var lv=z.ccclass,uv=z.property,cv=z.requireComponent,hv=(qy=lv("CrossingBeeLine"),Ky=cv([Y,W]),Yy=uv(Ee),Jy=uv(Ee),Xy=uv(Ee),Zy=uv({type:sv,displayName:"Sprite type"}),Qy=uv({type:V,displayName:"Line thickness",min:0}),qy(ev=Ky((nv=l((tv=function(e){n(r,e);var t=i(r);function r(){var e;a(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),u(e,"spriteLow",nv,c(e)),u(e,"spriteMedium",iv,c(e)),u(e,"spriteHigh",av,c(e)),u(e,"spriteType",ov,c(e)),u(e,"lineThickness",rv,c(e)),e.startPos=new te,e.endPos=new te,e}return o(r,[{key:"setStartPosition",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.startPos.x,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.startPos.z;this.startPos.set(e,t,n),this.updateLine()}},{key:"setEndPosition",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.endPos.y,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.endPos.z;this.endPos.set(e,t,n),this.updateLine()}},{key:"updateLine",value:function(){this.updateContentSize(),this.updatePosition(),this.updateRotation()}},{key:"thickness",get:function(){return this.lineThickness},set:function(e){this.lineThickness=e,this.updateContentSize()}},{key:"setSpriteType",value:function(e){switch(this.spriteType=e,e){case sv.LOW:this.sprite.spriteFrame=this.spriteLow;break;case sv.MEDIUM:this.sprite.spriteFrame=this.spriteMedium;break;case sv.HIGH:this.sprite.spriteFrame=this.spriteHigh}}},{key:"onLoad",value:function(){this.uiTransform=this.getComponent(W),this.sprite=this.getComponent(Y),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){Nt.lazyValidateProperties(this)}},{key:"start",value:function(){this.setSpriteType(this.spriteType),this.updateContentSize(),this.updatePosition(),this.updateRotation()}},{key:"updateContentSize",value:function(){var e=this.endPos.x-this.startPos.x,t=this.endPos.y-this.startPos.y,n=this.endPos.z-this.startPos.z,i=Math.sqrt(e*e+t*t+n*n);this.uiTransform.setContentSize(i,this.lineThickness)}},{key:"updatePosition",value:function(){this.uiTransform.setAnchorPoint(.5,.5),this.node.setWorldPosition((this.startPos.x+this.endPos.x)/2,(this.startPos.y+this.endPos.y)/2,(this.startPos.z+this.endPos.z)/2)}},{key:"updateRotation",value:function(){this.node.setWorldRotationFromEuler(0,0,180*Math.atan2(this.endPos.y-this.startPos.y,this.endPos.x-this.startPos.x)/Math.PI)}}]),r}(U)).prototype,"spriteLow",[Yy],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),iv=l(tv.prototype,"spriteMedium",[Jy],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),av=l(tv.prototype,"spriteHigh",[Xy],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ov=l(tv.prototype,"spriteType",[Zy],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return sv.LOW}}),rv=l(tv.prototype,"lineThickness",[Qy],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),ev=tv))||ev)||ev);N._RF.pop(),N._RF.push({},"169a1O0ruFLoI6OnJUZap7V","DogeState",void 0);var dv,pv=function(e){return e[e.IDLE=0]="IDLE",e[e.SMILE=1]="SMILE",e[e.SCARE=2]="SCARE",e[e.BEE_STING=3]="BEE_STING",e[e.THORN_STAB=4]="THORN_STAB",e[e.OUT_OF_SCREEN=5]="OUT_OF_SCREEN",e[e.POISONED=6]="POISONED",e[e.DROWNING=7]="DROWNING",e[e.OVER_VIEW=8]="OVER_VIEW",e}(pv||{});N._RF.pop(),N._RF.push({},"852f9XjNUVJ3Zt1Kd/EbqXU","Eye",void 0);var yv,vv,fv,mv,gv,bv,Sv,kv=(0,z.ccclass)("Eye")(dv=function(e){n(r,e);var t=i(r);function r(){var e;a(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).scaleTween=null,e.initialPosition=null,e}return o(r,[{key:"createScaleAnimation",value:function(){var e=q(this.node).to(.3,{scale:new te(1.1,1.1,1)},{easing:"smooth"});this.scaleTween=q(this.node).reverseTime(e).repeatForever()}},{key:"saveInitialPosition",value:function(){this.initialPosition||(this.initialPosition=this.node.position.clone())}},{key:"show",value:function(){this.node.active=!0,this.playAnimation()}},{key:"hide",value:function(){this.stopAnimation(),this.node.active=!1}},{key:"toward",value:function(e){this.initialPosition&&(this.node.setPosition(this.initialPosition),this.node.position.add(e))}},{key:"playAnimation",value:function(){var e;this.scaleTween||this.createScaleAnimation(),null===(e=this.scaleTween)||void 0===e||e.start()}},{key:"stopAnimation",value:function(){var e;null===(e=this.scaleTween)||void 0===e||e.stop()}}]),r}(U))||dv;N._RF.pop(),N._RF.push({},"df218vrmOtEH5vRQXxIZ3yS","Eyes",void 0);var Cv,wv,Ev,Av,Tv,Rv,Lv,Pv,_v=z.ccclass,Bv=z.property,Dv=(yv=_v("Eyes"),vv=Bv(kv),fv=Bv(kv),yv((bv=l((gv=function(e){n(r,e);var t=i(r);function r(){var e;a(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),u(e,"leftEye",bv,c(e)),u(e,"rightEye",Sv,c(e)),e.time=0,e.remaining=0,e.running=!1,e}return o(r,[{key:"onLoad",value:function(){this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){Nt.lazyValidateProperties(this)}},{key:"start",value:function(){this.remaining=0,this.running=!1,this.setTimeChangeDirection(.8),this.leftEye.saveInitialPosition(),this.rightEye.saveInitialPosition()}},{key:"setTimeChangeDirection",value:function(e){this.time=e}},{key:"show",value:function(){this.running=!0,this.remaining=this.time,this.leftEye.show(),this.rightEye.show()}},{key:"hide",value:function(){this.running=!1,this.leftEye.hide(),this.rightEye.hide()}},{key:"stopLook",value:function(){this.running=!1}},{key:"look",value:function(){if(this.node.parent){var e=this.node.parent.getComponent(Vv);if(e){var t=e.getNearbyBee();if(t){var n=this.leftEye.initialPosition;if(n){var i=n.x,a=n.y,o=new te;this.leftEye.node.inverseTransformPoint(o,t.node.worldPosition);var r=new te(o.x-i,o.y-a,0).normalize().multiplyScalar(5);this.leftEye.toward(r),this.rightEye.toward(r)}}}}}},{key:"update",value:function(e){this.running&&(this.remaining<=0&&(this.look(),this.remaining=this.time),this.remaining-=e)}}]),r}(U)).prototype,"leftEye",[vv],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Sv=l(gv.prototype,"rightEye",[fv],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),mv=gv))||mv);N._RF.pop(),N._RF.push({},"14172TbYDBAeISJqcpvLYV7","Doge",void 0);var Ov,Iv,Nv,Fv,zv,xv,Gv,Mv,Uv=z.ccclass,Hv=z.property,jv=Ludex.Utils.Array,Wv=[pv.OVER_VIEW,pv.BEE_STING,pv.THORN_STAB,pv.POISONED,pv.OUT_OF_SCREEN],Vv=(Cv=Uv("Doge"),wv=Hv(Dv),Ev=Hv(Ce),Cv((Rv=l((Tv=function(e){n(d,e);var r,l=i(d);function d(){var e;a(this,d);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return e=l.call.apply(l,[this].concat(n)),u(e,"eyes",Rv,c(e)),e.state=pv.IDLE,e.dustParticle=null,e.gameHeight=0,u(e,"collider",Lv,c(e)),u(e,"gameObjects",Pv,c(e)),e.onBeginContact=function(t,n){n.node.name!==qh.BEE&&n.node.name!==qh.BIG_BEE&&n.node.name!==qh.BIG_BEE_BULLET||e.beeSting(),n.node.name!==qh.THORN&&n.node.name!==qh.THORN_BALL?n.node.name!==qh.POISON?n.node.name===qh.WATER&&e.drowning():e.poisoned():e.stabbedByThorn()},e}return o(d,[{key:"onLoad",value:function(){var e;this.collider=this.getComponent(Ce),this.gameObjects=null===(e=this.node.parent)||void 0===e?void 0:e.getComponent(im),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){Nt.lazyValidateProperties(this)}},{key:"start",value:function(){var e;this.initDustParticle(),this.idle();var t=null===(e=ge("Canvas"))||void 0===e?void 0:e.getComponent(W);t&&(this.gameHeight=t.height),this.collider.on(we.BEGIN_CONTACT,this.onBeginContact)}},{key:"idle",value:function(){!1!==this.setState(pv.IDLE)&&(this.hideEyes(),this.setSpineAnimation(Ed.IDLE,!0))}},{key:"smile",value:function(){!1!==this.setState(pv.SMILE)&&(this.hideEyes(),this.setSpineAnimation(Ed.SMILE,!0))}},{key:"beeSting",value:function(){var e=this;!1!==this.setState(pv.BEE_STING)&&(this.hideEyes(),this.setSpineAnimation(Ed.HURT,!1),this.scareOtherDoges(),this.scheduleOnce((function(){e.state===pv.BEE_STING&&e.setSpineAnimation(Ed.INACTIVE,!1)}),.3),S.playSound(Zn.DOGE_HURT))}},{key:"stabbedByThorn",value:function(){!1!==this.setState(pv.THORN_STAB)&&(this.hideEyes(),this.createDust(),this.setSpineAnimation(Ed.THORN_INACTIVE,!1),this.scareOtherDoges(),S.playSound(Zn.DOGE_DIES))}},{key:"poisoned",value:function(){!1!==this.setState(pv.POISONED)&&(this.hide(),this.hideEyes(),this.createDust(),this.scareOtherDoges(),S.playSound(Zn.DOGE_DIES))}},{key:"drowning",value:function(){!1!==this.setState(pv.DROWNING)&&(this.hideEyes(),this.setSpineAnimation(Ed.DROWNING,!1))}},{key:"isCantBeTargeted",value:function(){return-1!==[pv.THORN_STAB,pv.OUT_OF_SCREEN,pv.POISONED,pv.DROWNING].indexOf(this.state)}},{key:"scare",value:function(){var e;!1!==this.setState(pv.SCARE)&&(this.showEyes(),null===(e=this.eyes)||void 0===e||e.look(),this.setSpineAnimation(Ed.FREAK_OUT,!0))}},{key:"hideEyes",value:function(){this.eyes.hide()}},{key:"showEyes",value:function(){this.eyes.show()}},{key:"setState",value:function(e){return-1===Wv.indexOf(e)?-1===Wv.indexOf(this.state)&&(this.state=e,!0):Wv.indexOf(e)>Wv.indexOf(this.state)&&(this.state=e,this.node.scene.emit(sr.DOGE_DIE),!0)}},{key:"scareOtherDoges",value:function(){if(this.gameObjects){var e,t=this.gameObjects.getDoges(this),n=s(t);try{for(n.s();!(e=n.n()).done;){e.value.scare()}}catch(e){n.e(e)}finally{n.f()}}}},{key:"update",value:function(){var e=this.node.worldPosition.y;(e>this.gameHeight||e<0)&&this.setState(pv.OUT_OF_SCREEN),this.isBeeNearBy()&&this.scare()}},{key:"isBeeNearBy",value:function(){return this.state===pv.IDLE&&(!jv.has(Wv,this.state)&&!!this.getNearbyBee())}},{key:"getNearbyBee",value:function(){var e=this;if(!this.node.parent)return null;var t=this.node.parent.getComponentsInChildren(rp).find((function(t){var n=te.distance(e.node.getWorldPosition(),t.node.getWorldPosition());if(t.enabled&&n<=200)return!0}));return null!=t?t:null}},{key:"createDust",value:function(){var e=this;if(this.dustParticle){this.dustParticle.active=!0;var t=this.node.getWorldPosition(),n=t.x,i=t.y;this.dustParticle.setWorldPosition(new te(n,i));try{var a=this.dustParticle.getComponent(ke.Skeleton);null==a||a.setAnimation(0,"animation",!1)}catch(e){console.error("createDust",e)}this.scheduleOnce((function(){e.dustParticle&&(e.dustParticle.active=!1)}),.5)}}},{key:"initDustParticle",value:(r=t((function*(){if(this.node.parent){var e=new ie(qh.DUST_PARTICLE);e.layer=Math.pow(2,25),e.active=!1;var t=e.addComponent(ke.Skeleton),n=yield h.loadSkeletonDataAsync(ad.DUST_PARTICLE_SPINE);n?this.node&&this.node.isValid&&(t.skeletonData=n,this.node.parent.addChild(e),this.dustParticle=e):console.warn("initDustParticle","Failed to load dust particle spine")}})),function(){return r.apply(this,arguments)})}]),d}(dd)).prototype,"eyes",[wv],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Lv=l(Tv.prototype,"collider",[Ev],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Pv=l(Tv.prototype,"gameObjects",[Hv],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Av=Tv))||Av);N._RF.pop(),N._RF.push({},"2ca763+kElPuqiAkECtFMMS","Grass",void 0);var $v,qv,Kv,Yv,Jv,Xv=z.ccclass,Zv=z.property,Qv=z.requireComponent,ef=(Ov=Xv("Grass"),Iv=Qv(se),Nv=Zv({tooltip:"Use batch draw all grass polygons"}),Fv=Zv(se),Ov(zv=Iv((Gv=l((xv=function(e){n(r,e);var t=i(r);function r(){var e;a(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),u(e,"useBatch",Gv,c(e)),u(e,"graphic",Mv,c(e)),e.grassPolygons=[],e}return o(r,[{key:"__preload",value:function(){this.graphic=this.getComponent(se),this.validateRequiredComponents(),this.listenGameplayEvents()}},{key:"validateRequiredComponents",value:function(){Nt.lazyValidateProperties(this)}},{key:"listenGameplayEvents",value:function(){}},{key:"onLoad",value:function(){var e=this.getPolygon();if(e){var t=this.isDark()?qh.GRASS_DARK:qh.GRASS;this.useBatch?this.addGrassPolygon(t,e):(this.updateFillColor(t),this.drawGrass(e))}}},{key:"drawGrass",value:function(e){this.graphic.moveTo(e[0].x,e[0].y);var t,n=s(e);try{for(n.s();!(t=n.n()).done;){var i=t.value;this.graphic.lineTo(i.x,i.y)}}catch(e){n.e(e)}finally{n.f()}this.graphic.close(),this.graphic.fill()}},{key:"getPolygon",value:function(){if(!("polygon"in this.node))return null;var e=this.node.polygon;return Array.isArray(e)?e:null}},{key:"isDark",value:function(){return"isDark"in this.node&&!!this.node.isDark}},{key:"addGrassPolygon",value:function(e,t){this.grassPolygons.push({type:e,polygon:t})}},{key:"updateFillColor",value:function(e){e===qh.GRASS_DARK?this.graphic.fillColor.fromHEX("#5e9c35"):this.graphic.fillColor.fromHEX("#8bdd55")}},{key:"batchDrawAllGrass",value:function(){if(!(this.grassPolygons.length<1)){var e,t=s(this.grassPolygons);try{for(t.s();!(e=t.n()).done;){var n=e.value;this.updateFillColor(n.type),this.drawGrass(n.polygon)}}catch(e){t.e(e)}finally{t.f()}this.grassPolygons=[]}}}]),r}(dd)).prototype,"useBatch",[Nv],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Mv=l(xv.prototype,"graphic",[Fv],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),zv=xv))||zv)||zv);N._RF.pop(),N._RF.push({},"7027fhYTgdDe6EinMz7XLC6","MapLine",void 0);var tf=z.ccclass,nf=z.property,af=($v=tf("MapLine"),qv=nf(se),$v((Jv=l((Yv=function(e){n(r,e);var t=i(r);function r(){var e;a(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),u(e,"graphics",Jv,c(e)),e.useBatch=!1,e.mapLines=[],e}return o(r,[{key:"__preload",value:function(){this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){Nt.lazyValidateProperties(this)}},{key:"onLoad",value:function(){var e=this.getPolygon();e&&(this.useBatch?(this.graphics.enabled=!1,this.addLine(e)):this.drawLine(e))}},{key:"getPolygon",value:function(){if(!("polygon"in this.node))return null;var e=this.node.polygon;return Array.isArray(e)?e:null}},{key:"addLine",value:function(e){this.mapLines.push(e)}},{key:"drawLine",value:function(e){this.graphics.moveTo(e[0].x,e[0].y);var t,n=s(e.slice(1));try{for(n.s();!(t=n.n()).done;){var i=t.value;this.graphics.lineTo(i.x,i.y)}}catch(e){n.e(e)}finally{n.f()}this.graphics.stroke()}},{key:"batchDrawAllLines",value:function(){if(!(this.mapLines.length<1)){var e,t=s(this.mapLines);try{for(t.s();!(e=t.n()).done;){var n=e.value;this.drawLine(n)}}catch(e){t.e(e)}finally{t.f()}this.mapLines=[]}}}]),r}(U)).prototype,"graphics",[qv],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Kv=Yv))||Kv);N._RF.pop(),N._RF.push({},"87767KZVqpEgIbdzZdGh1CJ","BatchObjectManager",void 0);var of=function(){function e(){a(this,e),this.isBrickInitialized=!1,this.isGrassInitialized=!1,this.isLineInitialized=!1,this.isPoisonInitialized=!1,this.isPoisonSurfaceInitialized=!1,this.isWaterInitialized=!1,this.isDangerAreaInitialized=!1,this.mainBrickComponent=null,this.mainGrassComponent=null,this.mainLineComponent=null,this.mainPoisonComponent=null,this.mainPoisonSurfaceComponent=null,this.mainWaterComponent=null,this.mainDangerAreaComponent=null}return o(e,[{key:"assignMainBrickComponent",value:function(e){this.mainBrickComponent=e}},{key:"assignMainGrassComponent",value:function(e){this.mainGrassComponent=e}},{key:"assignMainLineComponent",value:function(e){this.mainLineComponent=e}},{key:"assignMainPoisonComponent",value:function(e){this.mainPoisonComponent=e}},{key:"assignMainPoisonSurfaceComponent",value:function(e){this.mainPoisonSurfaceComponent=e}},{key:"assignMainWaterComponent",value:function(e){this.mainWaterComponent=e}},{key:"assignMainDangerAreaComponent",value:function(e){this.mainDangerAreaComponent=e}},{key:"isBrickBatchingEnabled",value:function(){var e,t;return null!==(e=null===(t=this.mainBrickComponent)||void 0===t?void 0:t.useBatch)&&void 0!==e&&e}},{key:"isGrassBatchingEnabled",value:function(){var e,t;return null!==(e=null===(t=this.mainGrassComponent)||void 0===t?void 0:t.useBatch)&&void 0!==e&&e}},{key:"isLineBatchingEnabled",value:function(){var e,t;return null!==(e=null===(t=this.mainLineComponent)||void 0===t?void 0:t.useBatch)&&void 0!==e&&e}},{key:"isPoisonBatchingEnabled",value:function(){var e,t;return null!==(e=null===(t=this.mainPoisonComponent)||void 0===t?void 0:t.useBatch)&&void 0!==e&&e}},{key:"isPoisonSurfaceBatchingEnabled",value:function(){var e,t;return null!==(e=null===(t=this.mainPoisonSurfaceComponent)||void 0===t?void 0:t.useBatch)&&void 0!==e&&e}},{key:"isWaterBatchingEnabled",value:function(){var e,t;return null!==(e=null===(t=this.mainWaterComponent)||void 0===t?void 0:t.useBatch)&&void 0!==e&&e}},{key:"isDangerAreaBatchingEnabled",value:function(){var e,t;return null!==(e=null===(t=this.mainDangerAreaComponent)||void 0===t?void 0:t.useBatch)&&void 0!==e&&e}},{key:"updateBrickPolygon",value:function(e){this.mainBrickComponent?this.mainBrickComponent.addBrickPolygon(e):console.warn("BatchObjectManager: mainBrickComponent is not assigned")}},{key:"updateGrassPolygon",value:function(e,t){this.mainGrassComponent?this.mainGrassComponent.addGrassPolygon(e,t):console.warn("BatchObjectManager: mainGrassComponent is not assigned")}},{key:"updateMapLine",value:function(e){this.mainLineComponent?this.mainLineComponent.addLine(e):console.warn("BatchObjectManager: mainLineNode is not assigned")}},{key:"updatePoisonPolygon",value:function(e){this.mainPoisonComponent?this.mainPoisonComponent.addPoisonPolygon(e):console.warn("BatchObjectManager: mainPoisonComponent is not assigned")}},{key:"updatePoisonSurfacePolygon",value:function(e){this.mainPoisonSurfaceComponent?this.mainPoisonSurfaceComponent.addPoisonSurfacePolygon(e):console.warn("BatchObjectManager: mainPoisonSurfaceComponent is not assigned")}},{key:"updateWaterPolygon",value:function(e){this.mainWaterComponent?this.mainWaterComponent.addWaterPolygon(e):console.warn("BatchObjectManager: mainWaterComponent is not assigned")}},{key:"updateDangerAreaPolygon",value:function(e){this.mainDangerAreaComponent?this.mainDangerAreaComponent.addDangerAreaPolygon(e):console.warn("BatchObjectManager: mainDangerAreaComponent is not assigned")}},{key:"batchDraw",value:function(){var e,t,n,i,a,o,r;null===(e=this.mainBrickComponent)||void 0===e||e.batchDrawAllBrick(),null===(t=this.mainGrassComponent)||void 0===t||t.batchDrawAllGrass(),null===(n=this.mainLineComponent)||void 0===n||n.batchDrawAllLines(),null===(i=this.mainPoisonComponent)||void 0===i||i.batchDrawAllPoisonPools(),null===(a=this.mainPoisonSurfaceComponent)||void 0===a||a.batchDrawAllPoisonSurfaces(),null===(o=this.mainWaterComponent)||void 0===o||o.batchDrawAllWater(),null===(r=this.mainDangerAreaComponent)||void 0===r||r.batchDrawAllDangerAreas()}},{key:"clearObjects",value:function(){this.isBrickInitialized=!1,this.isGrassInitialized=!1,this.isLineInitialized=!1,this.isPoisonInitialized=!1,this.isPoisonSurfaceInitialized=!1,this.isWaterInitialized=!1,this.isDangerAreaInitialized=!1,this.mainBrickComponent=null,this.mainGrassComponent=null,this.mainLineComponent=null,this.mainPoisonComponent=null,this.mainPoisonSurfaceComponent=null,this.mainWaterComponent=null,this.mainDangerAreaComponent=null}}]),e}();N._RF.pop(),N._RF.push({},"4c04ffCcRhGsqEZlVWUHd8s","MapTransformer",void 0);var rf,sf,lf,uf,cf,hf,df,pf,yf,vf,ff,mf,gf,bf,Sf,kf,Cf,wf,Ef,Af,Tf,Rf,Lf,Pf,_f,Bf,Df,Of,If,Nf,Ff,zf,xf,Gf,Mf,Uf,Hf,jf,Wf,Vf,$f,qf,Kf,Yf,Jf,Xf=200,Zf=270,Qf=function(){function e(){a(this,e)}return o(e,null,[{key:"getPointObject",value:function(t){var n=t.id,i=t.point,a=t.data,o=t.connect,r=e.getTransformedPoint(i);return console.log(vp.HEIGHT,i.y*yp,Zf),{id:n,point:r,data:a,connect:o}}},{key:"getTransformedPoint",value:function(e){return{x:e.x*yp+14-Xf,y:vp.HEIGHT-e.y*yp-14-Zf}}},{key:"revertTransformedPoint",value:function(e){return{x:(e.x+Xf-14)/yp,y:(vp.HEIGHT-e.y-14-Zf)/yp}}},{key:"getPointObjectBHalfCoord",value:function(e){var t=e.id,n=e.point,i=e.data,a=e.connect;return{id:t,point:{x:n.x*yp/2-Xf,y:vp.HEIGHT-n.y*yp/2-Zf},data:i,connect:a}}},{key:"getPolygonObject",value:function(t){var n=t.id,i=t.point,a=t.data,o=t.connect;return{id:n,point:e.getTransformedPolygon(i),data:a,connect:o}}},{key:"getTransformedPolygon",value:function(e){return e.map((function(e){var t=e.x,n=e.y;return{x:t*yp-Xf,y:vp.HEIGHT-n*yp-Zf}}))}},{key:"revertTransformedPolygon",value:function(e){return e.map((function(e){var t=e.x,n=e.y;return{x:(t+Xf)/yp,y:(vp.HEIGHT-n-Zf)/yp}}))}},{key:"getDoublePolygon",value:function(e){var t=e.id,n=e.point,i=e.data,a=e.connect;return{id:t,point:n.map((function(e){var t=e.x,n=e.y;return{x:t*yp/2-Xf,y:vp.HEIGHT-n*yp/2-Zf}})),data:i,connect:a}}},{key:"getTransformedDoublePolygon",value:function(e){return e.map((function(e){var t=e.x,n=e.y;return{x:t*yp/2-Xf,y:vp.HEIGHT-n*yp/2-Zf}}))}},{key:"revertTransformedDoublePolygon",value:function(e){return e.map((function(e){var t=e.x,n=e.y;return{x:(t+Xf)/14,y:(vp.HEIGHT-n-Zf)/14}}))}},{key:"transformPointsFromMapToDrawAreaCoordinate",value:function(e){return e.map((function(e){var t=e.x,n=e.y;return{x:t*yp-Xf,y:vp.HEIGHT-n*yp-Zf}}))}}]),e}();N._RF.pop(),N._RF.push({},"75ad9uPflhLL4N96NmHF2Sk","GameObjects",void 0);var em,tm=z.ccclass,nm=z.property,im=(rf=tm("GameObjects"),sf=nm(Le),lf=nm(Le),uf=nm(Le),cf=nm(Le),hf=nm(Le),df=nm(Le),pf=nm(Le),yf=nm(Le),vf=nm(Le),ff=nm(Le),mf=nm(Le),gf=nm(Le),bf=nm(Le),Sf=nm(Le),kf=nm(Le),Cf=nm(Le),wf=nm({tooltip:"Use batch draw all map lines."}),Ef=nm({tooltip:"Use batch draw all poison pools."}),Af=nm({tooltip:"Use batch draw all poison surfaces."}),Tf=nm({tooltip:"Use batch draw all water pools."}),Rf=nm({tooltip:"Use batch draw all danger areas."}),rf((_f=l((Pf=function(e){n(d,e);var r,l=i(d);function d(){var e;a(this,d);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return e=l.call.apply(l,[this].concat(n)),u(e,"dogePrefab",_f,c(e)),u(e,"spiderPrefab",Bf,c(e)),u(e,"beePrefab",Df,c(e)),u(e,"beehivePrefab",Of,c(e)),u(e,"bigBeePrefab",If,c(e)),u(e,"thornPrefab",Nf,c(e)),u(e,"thornBallPrefab",Ff,c(e)),u(e,"airFanPrefab",zf,c(e)),u(e,"grassPrefab",xf,c(e)),u(e,"balloonPrefab",Gf,c(e)),u(e,"brickPrefab",Mf,c(e)),u(e,"arenaPrefab",Uf,c(e)),u(e,"woodPrefab",Hf,c(e)),u(e,"connectPrefab",jf,c(e)),u(e,"mapLinePrefab",Wf,c(e)),u(e,"crossingBeeLinePrefab",Vf,c(e)),u(e,"batchMapLines",$f,c(e)),u(e,"batchPoisonPool",qf,c(e)),u(e,"batchPoisonSurface",Kf,c(e)),u(e,"batchWaterPool",Yf,c(e)),u(e,"batchDangerArea",Jf,c(e)),e.batchObjects=new of,e.objects=new Map,e}return o(d,[{key:"spawnObjects",value:function(e){for(var t=e.map,n=E(t).reverse(),i=0;i<n.length;i++){var a=n[i],o=null;(o=Array.isArray(null==a?void 0:a.point)?this.spawnPolygonObjectType(a):this.spawnPointObjectType(a))&&this.objects.set(i,o)}var r,l=s(t);try{for(l.s();!(r=l.n()).done;){var u=r.value;if(!Array.isArray(u.point)){var c=u;if(c.id===td.BALLOON){var h=Qf.getPointObject(c).point,d=h.x,p=h.y;if(!c.connect)continue;var y=this.findObjectIndex(t,c.connect);if(!y)continue;this.spawnBalloon(d,p,y)}if(u.id===td.CONNECT){if(!u.connect)return null;if(!Array.isArray(u.connect.point))return null;var v=Qf.getDoublePolygon(u.connect),f=Qf.getPointObjectBHalfCoord(u).point,m=f.x,g=f.y;this.spawnConnect(m,g,v.point)}}}}catch(e){l.e(e)}finally{l.f()}this.batchObjects.batchDraw(),this.sortObjects(),this.sleepObjects()}},{key:"spawnPolygonObjectType",value:function(e){var t=Qf.getPolygonObject(e).point;if(0===t.length)return null;switch(e.id){case td.BRICK:return this.spawnBrick(t);case td.GRASS:return this.spawnGrass(t,!1);case td.GRASS_DARK:return this.spawnGrass(t,!0);case td.LINE:return this.spawnLine(t);case td.POISON:return this.spawnPoison(t);case td.POISON_SURFACE:return this.spawnPoisonSurface(t);case td.WATER:return this.spawnWater(t);case td.DANGER_AREA:return this.spawnDangerAreaNormal(t);case td.CONNECT:return null;case td.WOOD:var n=Qf.getDoublePolygon(e);return this.spawnWood(n.point);case td.COLLIDER:var i=Qf.getDoublePolygon(e);return this.spawnCollider(0,0,i.point);case td.STROKE:default:return null}}},{key:"spawnPointObjectType",value:function(e){var t=Qf.getPointObject(e).point,n=t.x,i=t.y;switch(e.id){case td.DOGE_A:return this.spawnDoge({x:n,y:i});case td.DOGE_B:return this.spawnDoge({x:n,y:i,right:!0});case td.SPIDER:return this.spawnSpider(n,i);case td.BEEHIVE_A:case td.BEEHIVE_C:return this.spawnBeehive(n,i);case td.BEEHIVE_B:case td.BEEHIVE_D:return this.spawnBeehive(n,i,!0);case td.THORN_BALL:return this.spawnThornBall(n,i);case td.BIG_BEE:return this.spawnBigBee(n,i);case td.WATER_SURFACE:return this.spawnWaterSurface(n,i);case td.THORN:var a,o=(null===(a=e.data)||void 0===a?void 0:a.a)||0;return this.spawnThorn(n,i,o);case td.AIR_FAN:var r,s=(null===(r=e.data)||void 0===r?void 0:r.a)||0;return this.spawnAirFan(n,i,s);default:return null}}},{key:"spawnObjectForDevTools",value:function(e){this.spawnPointObjectType(e),this.sortObjects()}},{key:"spawnPolygonObjectForDevTools",value:function(e){this.spawnPolygonObjectType(e),this.sortObjects()}},{key:"addObject",value:function(e){this.node.insertChild(e,this.getSiblingIndex(e.name))}},{key:"sortObjects",value:function(){var e=E(this.node.children);e.sort((function(e,t){var n,i;return(null!==(n=ed[e.name])&&void 0!==n?n:0)-(null!==(i=ed[t.name])&&void 0!==i?i:0)})),e.forEach((function(e,t){e.setSiblingIndex(t)}))}},{key:"findObjectIndex",value:function(e,t){var n,i=this,a=e.findIndex((function(e){return JSON.stringify(e)===JSON.stringify(t)})),o=null===(n=e[a])||void 0===n?void 0:n.point;if(o&&!Array.isArray(o)){var r=Qf.getPointObject(e[a]).point,s=r.x,l=r.y,u=this.node.children.find((function(e){var n=e.position;return n.x===s&&n.y===l&&e.name===i.getObjNameFromId(t.id)}));if(u)return u}}},{key:"getObjNameFromId",value:function(e){switch(e){case td.DOGE_A:case td.DOGE_B:return qh.DOGE;case td.SPIDER:return qh.SPIDER;case td.BEEHIVE_A:case td.BEEHIVE_B:case td.BEEHIVE_C:case td.BEEHIVE_D:return qh.BEEHIVE;case td.THORN_BALL:return qh.THORN_BALL;case td.BIG_BEE:return qh.BIG_BEE;case td.WATER_SURFACE:return qh.WATER_SURFACE;case td.THORN:return qh.THORN;case td.AIR_FAN:return qh.AIR_FAN;case td.BRICK:return qh.BRICK;case td.GRASS:return qh.GRASS;case td.GRASS_DARK:return qh.GRASS_DARK;case td.LINE:return qh.MAP_LINE;case td.POISON:return qh.POISON;case td.POISON_SURFACE:return qh.POISON_SURFACE;case td.WATER:return qh.WATER;case td.DANGER_AREA:return qh.DANGER_AREA;case td.WOOD:return qh.WOOD;case td.COLLIDER:return qh.COLLIDER;default:return""}}},{key:"getSiblingIndex",value:function(e){var t=this.node.children,n=ed[e];if(!n)return t.length+1;var i=t.map((function(e){return ed[e.name]})).filter((function(e){return void 0!==e})),a=i.findIndex((function(e){return n<e}));return a<0?i.length+1:a}},{key:"clearObjects",value:function(){this.node.destroyAllChildren(),this.node.removeAllChildren(),this.batchObjects.clearObjects()}},{key:"stopBeeBehavior",value:function(){var e,t=this.node.getComponentsInChildren(rp),n=s(t);try{for(n.s();!(e=n.n()).done;){e.value.state=$h.IDLE}}catch(e){n.e(e)}finally{n.f()}}},{key:"sleepObjects",value:function(){var e,t=this.getComponentsInChildren(dd),n=s(t);try{for(n.s();!(e=n.n()).done;){e.value.sleep()}}catch(e){n.e(e)}finally{n.f()}var i,a=this.node.getComponentsInChildren(ly),o=s(a);try{for(o.s();!(i=o.n()).done;){i.value.state=$h.IDLE}}catch(e){o.e(e)}finally{o.f()}}},{key:"wakeUpObjects",value:function(){var e,t=this.getComponentsInChildren(dd),n=s(t);try{for(n.s();!(e=n.n()).done;){e.value.wake()}}catch(e){n.e(e)}finally{n.f()}}},{key:"spawnBeehive",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=Pe(this.beehivePrefab);return i instanceof ie?(i.name=qh.BEEHIVE,i.setPosition(e,t),i.setScale(n?-1:1,1),i.attr({isRightSide:n}),this.addObject(i),i):null}},{key:"spawnBees",value:function(){var e,t=this.node.getComponentsInChildren(Fp),n=1===t.length?8:4,i=s(t);try{for(i.s();!(e=i.n()).done;){var a=e.value;a.node.attr({totalPathSeekers:Math.floor(n/3)});for(var o=0;o<n;o++){var r=this.spawnBee();r&&a.releaseBee(r)}}}catch(e){i.e(e)}finally{i.f()}this.sortObjects()}},{key:"spawnBee",value:function(){var e=Pe(this.beePrefab);return e instanceof ie?(e.name=qh.BEE,this.addObject(e),e.setSiblingIndex(999),e):null}},{key:"spawnCrossingBees",value:function(e){for(var t=this,n=e.beeSpeed,i=e.spawnRandOffset,a=void 0===i?80:i,o=e.playerWorldX,r=e.playerWorldY,s=e.spawnWorldX,l=e.spawnWorldY,u=e.count,c=void 0===u?[1,2]:u,h=e.targetOffsetMultiplier,d=void 0===h?0:h,p=pe.randomRangeInt(c[0],c[1]),y=[],v=s<o,f=function(){var e=t.spawnBee();if(!e)throw new Error("Could not spawn bee");var i=e.getComponent(rp);if(!i)throw new Error("Bee component not found");t.addObject(e),i.isSpawnLeftSide=!v;var u=pe.randomRangeInt(-a,a),c=pe.randomRangeInt(-a,a),h=s+u,p=l+c,f=e.worldPosition.z;e.setWorldPosition(h,p,f);var m=new ve(o+u*d-h,r+c*d-p);i.rotateToVector(m),i.fly(m.normalize().multiplyScalar(n)),t.scheduleOnce((function(){i.setRole(Vh.NORMAL),i.setState($h.ATTACKING),i.followInstructions()})),y.push(i)},m=0;m<p;m++)f();return this.sortObjects(),y}},{key:"spawnCrossingBeeLine",value:function(e){var t=e.startX,n=e.startY,i=e.endX,a=e.endY,o=e.thickness,r=e.spriteType,s=Pe(this.crossingBeeLinePrefab);if(!(s instanceof ie))throw new Error("Could not spawn crossing bee line");s.name=qh.CROSSING_BEE_LINE;var l=s.getComponent(hv);if(!l)throw new Error("CrossingBeeLine component not found");return this.addObject(s),l.setSpriteType(r),l.setStartPosition(t,n),l.setEndPosition(i,a),l.thickness=o,this.sortObjects(),l}},{key:"checkAllBeeDie",value:function(){var e=this.node.getComponentsInChildren(rp),t=this.node.getComponentsInChildren(ly),n=e.some((function(e){return e.enabled})),i=t.some((function(e){return e.enabled}));return!n&&!i}},{key:"spawnDoge",value:function(e){var t=e.x,n=e.y,i=e.right,a=void 0!==i&&i,o=e.isWorldPosition,r=void 0!==o&&o,s=e.rigidBodyConfig,l=void 0===s?{}:s,u=Pe(this.dogePrefab);if(!(u instanceof ie))return null;u.name=qh.DOGE,r||u.setPosition(t,n),u.setScale(a?-1:1,1),this.addObject(u),u.setSiblingIndex(999),r&&u.setWorldPosition(t,n,u.worldPosition.z);var c=l.gravityScale,h=void 0===c?1:c,d=u.getComponent(Se);if(!d)throw new Error("Could not get doge rigidBody");return d.gravityScale=h,u}},{key:"spawnSpider",value:function(e,t){var n=Pe(this.spiderPrefab);return n instanceof ie?(n.name=qh.SPIDER,n.setPosition(e,t),this.addObject(n),n):null}},{key:"spawnBigBee",value:function(e,t){var n=Pe(this.bigBeePrefab);return n instanceof ie?(n.name=qh.BIG_BEE,n.setPosition(e,t),this.addObject(n),n):null}},{key:"reviveBigBees",value:function(){var e,t=this.node.getComponentsInChildren(ly),n=s(t);try{for(n.s();!(e=n.n()).done;){e.value.state=$h.ATTACKING}}catch(e){n.e(e)}finally{n.f()}}},{key:"spawnBrick",value:function(e){if(!this.batchObjects.isBrickInitialized){var t=this.spawnBrickNormal(e);if(!t)return null;var n=t.getComponent(my);return n?(this.batchObjects.isBrickInitialized=!0,n.useBatch&&this.batchObjects.assignMainBrickComponent(n),this.addObject(t),t):null}return this.batchObjects.isBrickBatchingEnabled()?(this.batchObjects.updateBrickPolygon(e),null):this.spawnBrickNormal(e)}},{key:"spawnBrickNormal",value:function(e){var t=Pe(this.brickPrefab);return t instanceof ie?(t.name=qh.BRICK,t.attr({polygon:e}),this.addObject(t),t):null}},{key:"spawnWood",value:function(e){var t=Pe(this.woodPrefab);if(!(t instanceof ie))return null;t.name=qh.WOOD;var n=t.getComponent(zy);if(!n)return console.warn("Pattern not found"),null;n.savePolygonPoints(e.map((function(e){return{x:e.x,y:e.y}}))),this.addObject(t),n.draw(e),n.applyCollider(e),n.setRigidBodyType(be.Dynamic);var i=this.spawnWoodStroke(e);return i.setParent(t,!1),t.addChild(i),t}},{key:"spawnWoodStroke",value:function(e){var t=new ie;t.name=qh.WOOD_STROKE,t.layer=33554432,this.addObject(t);var n=t.addComponent(se);n.lineWidth=4;var i=new le;le.fromHEX(i,"#0d0d15"),n.strokeColor=i;var a=e[0];if(!a)return t;n.moveTo(a.x,a.y);var o,r=s(e.slice(1));try{for(r.s();!(o=r.n()).done;){var l=o.value;n.lineTo(l.x,l.y)}}catch(e){r.e(e)}finally{r.f()}return n.close(),n.stroke(),t}},{key:"spawnGrass",value:function(e,t){if(!this.batchObjects.isGrassInitialized){var n=this.spawnGrassNormal(e,!1);if(!n)return null;var i=n.getComponent(ef);return i?(this.batchObjects.isGrassInitialized=!0,i.useBatch&&this.batchObjects.assignMainGrassComponent(i),this.addObject(n),n):null}var a=t?qh.GRASS_DARK:qh.GRASS;return this.batchObjects.isGrassBatchingEnabled()?(this.batchObjects.updateGrassPolygon(a,e),null):this.spawnGrassNormal(e,t)}},{key:"spawnGrassNormal",value:function(e,t){var n=Pe(this.grassPrefab);return n instanceof ie?(n.name=t?qh.GRASS_DARK:qh.GRASS,n.attr({polygon:e,isDark:t}),this.addObject(n),n):null}},{key:"spawnPoison",value:function(e){if(!this.batchPoisonPool)return this.spawnPoisonNormal(e);if(!this.batchObjects.isPoisonInitialized){var t=Pe(this.arenaPrefab);if(!(t instanceof ie))return null;t.name=qh.POISON,this.addObject(t);var n=t.addComponent(Uy);return n.useBatch=!0,this.batchObjects.isPoisonInitialized=!0,this.batchObjects.assignMainPoisonComponent(n),this.batchObjects.updatePoisonPolygon(e),t}return this.batchObjects.updatePoisonPolygon(e),null}},{key:"spawnPoisonNormal",value:function(e){var t=Pe(this.arenaPrefab);return t instanceof ie?(t.name=qh.POISON,this.addObject(t),t.addComponent(Uy).polygon=e,t):null}},{key:"spawnPoisonSurface",value:function(e){if(!this.batchPoisonPool)return this.spawnPoisonSurfaceNormal(e);if(!this.batchObjects.isPoisonSurfaceInitialized){var t=Pe(this.arenaPrefab);if(!(t instanceof ie))return null;t.name=qh.POISON_SURFACE,this.addObject(t);var n=t.addComponent(jy);return n.useBatch=!0,this.batchObjects.isPoisonSurfaceInitialized=!0,this.batchObjects.assignMainPoisonSurfaceComponent(n),this.batchObjects.updatePoisonSurfacePolygon(e),t}return this.batchObjects.updatePoisonSurfacePolygon(e),null}},{key:"spawnPoisonSurfaceNormal",value:function(e){var t=Pe(this.arenaPrefab);return t instanceof ie?(t.name=qh.POISON_SURFACE,this.addObject(t),t.addComponent(jy).polygon=e,t):null}},{key:"spawnWater",value:function(e){if(!this.batchWaterPool)return this.spawnWaterNormal(e);if(!this.batchObjects.isWaterInitialized){var t=Pe(this.arenaPrefab);if(!(t instanceof ie))return null;t.name=qh.WATER,this.addObject(t);var n=t.addComponent($y);return n.useBatch=!0,t.addComponent(ae).opacity=.75,this.batchObjects.isWaterInitialized=!0,this.batchObjects.assignMainWaterComponent(n),this.batchObjects.updateWaterPolygon(e),t}return this.batchObjects.updateWaterPolygon(e),null}},{key:"spawnWaterNormal",value:function(e){var t=Pe(this.arenaPrefab);return t instanceof ie?(t.name=qh.WATER,this.addObject(t),t.addComponent($y).polygon=e,t.addComponent(ae).opacity=.75,t):null}},{key:"spawnDangerAreaNormal",value:function(e){var t=Pe(this.arenaPrefab);if(!(t instanceof ie))return null;t.name=qh.DANGER_AREA;var n=t.getComponent(Dy);if(!n)return console.warn("GraphicsPattern not found"),null;this.addObject(t),n.setColor("#fc03036d"),n.draw(e);var i=t.addComponent(Se);return i.type=be.Static,i.group=nd.DEFAULT,t.addComponent(De),n.applyCollider(e),t}},{key:"spawnWaterSurface",value:function(e,t){var n=new ie;return n.name=qh.WATER_SURFACE,n.layer=this.node.layer,n.setPosition(e,t),this.loadWaterSurfaceSprite(n),this.addObject(n),n}},{key:"loadWaterSurfaceSprite",value:(r=t((function*(e){try{var t=yield h.loadSpriteFrameAsync(ad.WATER_SURFACE_FRAME);if(!e.isValid)throw new Error("loadWaterSurfaceSprite: WaterSurface is not valid");if(!t)throw new Error("loadWaterSurfaceSprite: SpriteFrame not found");e.addComponent(Y).spriteFrame=t}catch(e){var n=e instanceof Error?e:new Error(String(e));console.warn("loadWaterSurfaceSprite",n)}})),function(e){return r.apply(this,arguments)})},{key:"spawnThorn",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=Pe(this.thornPrefab);return i instanceof ie?(i.name=qh.THORN,i.angle=n,i.setPosition(e,t),this.addObject(i),i):null}},{key:"spawnThornBall",value:function(e,t){var n=Pe(this.thornBallPrefab);return n instanceof ie?(n.name=qh.THORN_BALL,n.setPosition(e,t),this.addObject(n),n):null}},{key:"spawnAirFan",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=Pe(this.airFanPrefab);if(!(i instanceof ie))return null;i.name=qh.AIR_FAN,i.angle=n,i.setScale(this.normalizeAngle(n)>180?-1:1,1),i.setPosition(e,t),i.attr({id:td.AIR_FAN});var a=i.getComponent(fd);return a?(a.setForceDirection(n),this.addObject(i),i):(console.warn("AirFan not found"),null)}},{key:"spawnCollider",value:function(e,t,n){var i=new ie;i.name=qh.COLLIDER,this.addObject(i),i.setPosition(e,t);var a=i.addComponent(Se);a.type=be.Static,a.group=nd.MAIN_OBJECT;var o=i.addComponent(De);return o.restitution=.2,o.points=n.map((function(e){var t=e.x,n=e.y;return new ve(t,n)})),o.apply(),i}},{key:"spawnLine",value:function(e){if(!this.batchMapLines)return this.spawnLineNormal(e);if(!this.batchObjects.isLineInitialized){var t=this.spawnLineNormal(e);if(!t)return null;this.addObject(t);var n=t.getComponent(af);return n?(this.batchObjects.isLineInitialized=!0,this.batchObjects.assignMainLineComponent(n),t):null}return this.batchObjects.updateMapLine(e),null}},{key:"spawnLineNormal",value:function(e){var t=Pe(this.mapLinePrefab);return t instanceof ie?t.getComponent(af)?(t.name=qh.MAP_LINE,t.attr({polygon:e}),this.addObject(t),t):(console.warn("MapLine not found"),null):null}},{key:"spawnConnect",value:function(e,t,n){var i=this.getComponentsInChildren(zy).find((function(e){var t=e.getPolygonPoints();if(t.length!==n.length)return!1;for(var i=0;i<n.length;i++){var a,o,r=null!==(a=t[i])&&void 0!==a?a:{x:0,y:0},s=(r.x,r.y,null!==(o=n[i])&&void 0!==o?o:{x:0,y:0});s.x,s.y}return!0})),a=Pe(this.connectPrefab);if(!(a instanceof ie))return null;if(a.setPosition(e,t),this.node.insertChild(a,this.getSiblingIndex(a.name)),i){var o=a.getWorldPosition(),r=o.x,s=o.y,l=i.node.getWorldPosition(),u=l.x,c=l.y,h=a.getComponent(Ae);h.connectedBody=i.node.getComponent(Se),h.connectedAnchor=new ve(r-u,s-c),h.enabled=!1,h.enabled=!0}}},{key:"spawnBalloon",value:function(e,t,n){var i=Pe(this.balloonPrefab);if(!(i instanceof ie))return null;i.name=qh.BALLOON,i.setPosition(e,t);var a=i.getComponent(Hd);if(!a)return console.warn("Balloon not found"),null;var o=a.connectToDoge(n);return this.addObject(i),o&&this.addObject(o.node),i}},{key:"getRandomDogeToBee",value:function(){var e;if(!this.node.parent)return null;var t=this.node.parent.getComponentsInChildren(Vv),n=t.length;return null!==(e=t[Math.floor(Math.random()*n)])&&void 0!==e?e:null}},{key:"getNearestDogeToBee",value:function(e){var t;if(!this.node.parent)return null;var n=this.node.parent.getComponentsInChildren(Vv);return 0===(n=n.filter((function(e){return!e.isCantBeTargeted()}))).length?null:(n.sort((function(t,n){return ve.distance(t.node.worldPosition,e.node.worldPosition)-ve.distance(n.node.worldPosition,e.node.worldPosition)})),null!==(t=n[0])&&void 0!==t?t:null)}},{key:"getDoges",value:function(e){if(!this.node.parent)return[];var t=this.node.parent.getComponentsInChildren(Vv);return t=t.filter((function(t){return t!==e}))}},{key:"normalizeAngle",value:function(e){var t=e%360;return t<0?360+t:t}}]),d}(U)).prototype,"dogePrefab",[sf],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Bf=l(Pf.prototype,"spiderPrefab",[lf],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Df=l(Pf.prototype,"beePrefab",[uf],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Of=l(Pf.prototype,"beehivePrefab",[cf],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),If=l(Pf.prototype,"bigBeePrefab",[hf],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Nf=l(Pf.prototype,"thornPrefab",[df],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ff=l(Pf.prototype,"thornBallPrefab",[pf],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),zf=l(Pf.prototype,"airFanPrefab",[yf],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),xf=l(Pf.prototype,"grassPrefab",[vf],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Gf=l(Pf.prototype,"balloonPrefab",[ff],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Mf=l(Pf.prototype,"brickPrefab",[mf],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Uf=l(Pf.prototype,"arenaPrefab",[gf],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Hf=l(Pf.prototype,"woodPrefab",[bf],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),jf=l(Pf.prototype,"connectPrefab",[Sf],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Wf=l(Pf.prototype,"mapLinePrefab",[kf],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Vf=l(Pf.prototype,"crossingBeeLinePrefab",[Cf],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$f=l(Pf.prototype,"batchMapLines",[wf],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),qf=l(Pf.prototype,"batchPoisonPool",[Ef],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Kf=l(Pf.prototype,"batchPoisonSurface",[Af],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Yf=l(Pf.prototype,"batchWaterPool",[Tf],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Jf=l(Pf.prototype,"batchDangerArea",[Rf],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Lf=Pf))||Lf);N._RF.pop(),N._RF.push({},"97f21hkFElI0YdBDCgAkt9+","Hint",void 0);var am,om,rm,sm,lm,um=(0,z.ccclass)("Hint")(em=function(e){n(u,e);var r,l=i(u);function u(){var e;a(this,u);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return(e=l.call.apply(l,[this].concat(n))).hintLine=null,e.hintHand=null,e.isHintShown=!1,e}return o(u,[{key:"showHint",value:function(e,t){this.isHintShown||(this.isHintShown=!0,this.hintLine=this.createHintLine(),this.hintLine.active=!0,this.drawHintLine(this.hintLine,e),t&&this.showHand(e))}},{key:"drawHintLine",value:function(e,t){var n=e.getComponent(se);if(!n)throw new Error("drawHintLine: Graphics is null");n.clear();var i=t[0];if(i){n.moveTo(i.x,i.y);var a,o=s(t.slice(1));try{for(o.s();!(a=o.n()).done;){var r=a.value;n.lineTo(r.x,r.y)}}catch(e){o.e(e)}finally{o.f()}n.stroke()}}},{key:"hideHint",value:function(){this.hintLine&&(this.hintLine.active=!1),this.hintHand&&(Ie.stopAllByTarget(this.hintHand),this.hintHand.active=!1)}},{key:"showHand",value:(r=t((function*(e){this.hintHand=this.createHintHand(e);var t=yield h.loadSpriteFrameAsync(ad.IC_HAND_FRAME);t?(this.addSpriteToHand(t),this.runHandHintAnimation(e)):this.removeHintHand()})),function(e){return r.apply(this,arguments)})},{key:"addSpriteToHand",value:function(e){var t;this.hintHand&&(this.hintHand.addComponent(Y).spriteFrame=e,null===(t=this.hintHand.getComponent(W))||void 0===t||t.setAnchorPoint(.15,.9))}},{key:"runHandHintAnimation",value:function(e){var t=this;if(this.hintHand){for(var n=q(this.hintHand),i=[],a=1;a<e.length;a++){var o=e[a-1],r=e[a];if(o&&r){var s=o.x-r.x,l=o.y-r.y,u=Math.sqrt(s*s+l*l),c=q(this.hintHand).to(u/250,{position:new te(r.x,r.y)});i.push(c)}}var h=q(this.hintHand).delay(.5).call((function(){var n=e[0];n&&t.hintHand&&t.hintHand.setPosition(n.x,n.y)}));i.push(h),n.sequence.apply(n,i).repeatForever().start()}}},{key:"getIsHintShow",value:function(){return this.isHintShown}},{key:"reset",value:function(){this.isHintShown=!1,this.removeHintLine(),this.removeHintHand()}},{key:"createHintLine",value:function(){if(this.hintLine)return this.hintLine;var e=new ie,t=e.addComponent(se);t.lineWidth=10,t.lineCap=se.LineCap.ROUND,t.lineJoin=se.LineJoin.ROUND;var n=new le;return le.fromHEX(n,"#fc03036d"),t.strokeColor=n,this.node.insertChild(e,0),e}},{key:"createHintHand",value:function(e){if(this.hintHand)return this.hintHand;var t=new ie,n=e[0];return n?(t.setPosition(n.x,n.y),this.hintHand=t,this.node.addChild(t),t):t}},{key:"removeHintLine",value:function(){this.hintLine&&(this.hintLine.getComponent(se).clear(),this.hintLine.destroyAllChildren(),this.hintLine.removeAllChildren(),this.hintLine.destroy(),this.hintLine=null)}},{key:"removeHintHand",value:function(){this.hintHand&&(this.hintHand.destroyAllChildren(),this.hintHand.removeAllChildren(),this.hintHand.destroy(),this.hintHand=null)}}]),u}(U))||em;N._RF.pop(),N._RF.push({},"33281kEO4dMXLCvmfkrwqQM","CollisionDetectLine",void 0);var cm,hm,dm,pm,ym,vm,fm,mm,gm,bm,Sm=z.ccclass,km=z.property,Cm=(am=Sm("CollisionDetectLine"),om=km(se),am((lm=l((sm=function(e){n(r,e);var t=i(r);function r(){var e;a(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),u(e,"graphic",lm,c(e)),e}return o(r,[{key:"onLoad",value:function(){this.graphic=this.getComponent(se),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){Nt.lazyValidateProperties(this)}},{key:"drawFromTo",value:function(e,t){this.graphic.clear(),this.graphic.moveTo(e.x,e.y),this.graphic.lineTo(t.x,t.y),this.graphic.stroke()}}]),r}(dd)).prototype,"graphic",[om],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rm=sm))||rm);N._RF.pop(),N._RF.push({},"00eeawrUitLxLgSANaGHhcv","LineDrawer",void 0);var wm=z.ccclass,Em=z.property,Am=z.executionOrder,Tm=(cm=wm("LineDrawer"),hm=Am(3),dm=Em(Le),pm=Em(Le),ym=Em(M),cm(vm=hm((mm=l((fm=function(e){n(r,e);var t=i(r);function r(){var e;a(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),u(e,"linePrefab",mm,c(e)),u(e,"collisionDetectLinePrefab",gm,c(e)),u(e,"minDistance",bm,c(e)),e.lastUIPos=null,e.currentLine=null,e.collisionDetectLine=null,e.isColliding=!1,e}return o(r,[{key:"beginDraw",value:function(e){this.createLine(),this.createCollisionDetectLine(),this.initLine(),this.lastUIPos=null,this.isColliding=!1,this.draw(e)}},{key:"createLine",value:function(){var e=Pe(this.linePrefab);e instanceof ie&&(e.name=qh.DRAW_LINE,e.getComponent(se)&&(this.node.addChild(e),this.currentLine=e))}},{key:"createCollisionDetectLine",value:function(){if(this.currentLine){var e=Pe(this.collisionDetectLinePrefab);if(e instanceof ie){var t=e.getComponent(se);if(t){var n=this.currentLine.getComponent(se);if(n){var i=n.lineWidth,a=n.strokeColor;t.strokeColor=new le(a.r,a.g,a.b,128),t.lineWidth=i,this.node.addChild(e),this.collisionDetectLine=e}}}}}},{key:"initLine",value:function(){var e,t=null===(e=this.currentLine)||void 0===e?void 0:e.getComponent(gp);t&&(t.sleep(),t.init())}},{key:"draw",value:function(e){var t,n,i=this;if(e&&this.currentLine&&this.collisionDetectLine){var a=this.currentLine.getComponent(gp);if(a){var o=this.collisionDetectLine.getComponent(Cm);if(o){var r=new te;null===(t=this.node.parent)||void 0===t||t.inverseTransformPoint(r,new te(e.x,e.y));var s=new ve(r.x,r.y);if(this.isPointOverlapWithMap(e)){if(this.lastUIPos){var l=this.lastUIPos,u=l.x,c=l.y;this.node.inverseTransformPoint(r,new te(u,c));var h=new ve(r.x,r.y);if(this.isColliding)o.drawFromTo(h,s);else{var d,p=this.isCurrentLineOverlapWithMap(e,this.lastUIPos);if(p.sort((function(e,t){return null==i.lastUIPos?0:ve.distance(e.point,i.lastUIPos)-ve.distance(t.point,i.lastUIPos)})),!(null===(d=p[0])||void 0===d?void 0:d.point))return;this.isColliding=!0}}}else if(this.lastUIPos&&this.isCurrentLineOverlapWithMap(e,this.lastUIPos).length>0){var y=this.lastUIPos,v=y.x,f=y.y;this.node.inverseTransformPoint(r,new te(v,f));var m=new ve(r.x,r.y);o.drawFromTo(m,s)}else{if(!this.lastUIPos){this.lastUIPos=e.clone();var g=s.x,b=s.y;a.storePoints(g,b)}var S=this.lastUIPos,k=S.x,C=S.y;null===(n=this.node.parent)||void 0===n||n.inverseTransformPoint(r,new te(k,C));var w=new ve(r.x,r.y),E=w.x,A=w.y,T=s.x,R=s.y,L=E-T,P=A-R;if(!(L*L+P*P<this.minDistance*this.minDistance)){var _=Math.sqrt(L*L+P*P);this.lastUIPos=e.clone(),a.drawTo(E,A,T,R),a.storePoints(T,R);var B=this.collisionDetectLine.getComponent(se);return null==B||B.clear(),this.isColliding=!1,_}}}}}}},{key:"isPointOverlapWithMap",value:function(e){return this.getCollision(e).length>0}},{key:"isCurrentLineOverlapWithMap",value:function(e,t){var n=this.getParallelLines(t,e,2),i=n.leftLine,a=n.rightLine,o=Ne.instance.raycast(t,e,Fe.All).filter((function(e){return!e.collider.sensor})).filter((function(e){var t;return"rope"!==(null===(t=e.collider.node.parent)||void 0===t?void 0:t.name)})),r=Ne.instance.raycast(i.p1,i.p2,Fe.All).filter((function(e){return!e.collider.sensor})).filter((function(e){var t;return"rope"!==(null===(t=e.collider.node.parent)||void 0===t?void 0:t.name)})),s=Ne.instance.raycast(a.p1,a.p2,Fe.All).filter((function(e){return!e.collider.sensor})).filter((function(e){var t;return"rope"!==(null===(t=e.collider.node.parent)||void 0===t?void 0:t.name)}));return[].concat(E(o),E(r),E(s))}},{key:"endDraw",value:function(){if(this.currentLine&&this.collisionDetectLine){var e=this.currentLine.getComponent(gp);if(e){e.addPhysics(),e.wake();var t=this.collisionDetectLine.getComponent(se);t?(t.clear(),this.lastUIPos=null,this.isColliding=!1,this.currentLine=null):console.warn("Graphics component not found")}else console.warn("Line component not found")}}},{key:"deActivePhysics",value:function(){var e,t=null===(e=this.currentLine)||void 0===e?void 0:e.getComponent(gp);t&&(
//! do not sort, it will cause bug
t.deActiveColliders(),t.sleep())}},{key:"clearLines",value:function(){this.node.destroyAllChildren(),this.node.removeAllChildren()}},{key:"getParallelLines",value:function(e,t,n){var i=t.x-e.x,a=t.y-e.y,o=pe.Vec2.distance(e,t),r=i/o,s=a/o,l=new ve(e.x-s*n,e.y+r*n),u=new ve(e.x+s*n,e.y-r*n);return{leftLine:{p1:l,p2:new ve(l.x+i,l.y+a)},rightLine:{p1:u,p2:new ve(u.x+i,u.y+a)}}}},{key:"getCollision",value:function(e){return Ne.instance.testAABB(new pe.Rect(e.x-2,e.y-2,4,4)).filter((function(e){return!e.sensor})).filter((function(e){var t;return"rope"!==(null===(t=e.node.parent)||void 0===t?void 0:t.name)})).filter((function(t){if(t instanceof De){var n=new te;return t.node.inverseTransformPoint(n,new te(e.x,e.y)),ze.polygonCircle(t.points,new ve(n.x,n.y),2)}if(t instanceof _e){var i=t.node.getWorldPosition(),a=i.x,o=i.y;return ze.circleCircle(new ve(a,o+t.worldPosition.y),t.radius,new ve(e.x,e.y),2)}return!t.sensor}))}}]),r}(U)).prototype,"linePrefab",[dm],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),gm=l(fm.prototype,"collisionDetectLinePrefab",[pm],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),bm=l(fm.prototype,"minDistance",[ym],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),vm=fm))||vm)||vm);N._RF.pop(),N._RF.push({},"463cfEelRVL4KYgc4n5FJNz","Map",void 0);var Rm,Lm=[{id:1,map:1,type:1},{id:2,map:2,type:1},{id:3,map:3,type:1},{id:4,map:8,type:1},{id:5,map:9,type:1},{id:6,map:16,type:1},{id:7,map:4,type:1},{id:8,map:7,type:1},{id:9,map:6,type:1},{id:10,map:18,type:1},{id:11,map:10,type:2},{id:12,map:11,type:2},{id:13,map:12,type:2},{id:14,map:13,type:2},{id:15,map:14,type:2},{id:16,map:15,type:2},{id:17,map:5,type:2},{id:18,map:17,type:2},{id:19,map:19,type:2},{id:20,map:20,type:2},{id:21,map:21,type:3},{id:22,map:22,type:3},{id:23,map:23,type:3},{id:24,map:24,type:3},{id:25,map:25,type:3},{id:26,map:26,type:3},{id:27,map:27,type:3},{id:28,map:28,type:3},{id:29,map:29,type:3},{id:30,map:30,type:3},{id:31,map:31,type:4},{id:32,map:32,type:4},{id:33,map:33,type:4},{id:34,map:34,type:4},{id:35,map:35,type:4},{id:36,map:36,type:4},{id:37,map:37,type:4},{id:38,map:38,type:4},{id:39,map:39,type:4},{id:40,map:40,type:4},{id:41,map:41,type:5},{id:42,map:42,type:5},{id:43,map:43,type:5},{id:44,map:44,type:5},{id:45,map:45,type:5},{id:46,map:46,type:5},{id:47,map:47,type:5},{id:48,map:48,type:5},{id:49,map:49,type:5},{id:50,map:50,type:5},{id:51,map:51,type:6},{id:52,map:52,type:6},{id:53,map:53,type:6},{id:54,map:54,type:6},{id:55,map:55,type:6},{id:56,map:56,type:6},{id:57,map:57,type:6},{id:58,map:58,type:6},{id:59,map:59,type:6},{id:60,map:60,type:6},{id:61,map:61,type:7},{id:62,map:62,type:7},{id:63,map:63,type:7},{id:64,map:64,type:7},{id:65,map:65,type:7},{id:66,map:66,type:7},{id:67,map:67,type:7},{id:68,map:68,type:7},{id:69,map:69,type:7},{id:70,map:70,type:7},{id:71,map:71,type:8},{id:72,map:72,type:8},{id:73,map:73,type:8},{id:74,map:74,type:8},{id:75,map:75,type:8},{id:76,map:76,type:8},{id:77,map:77,type:8},{id:78,map:78,type:8},{id:79,map:79,type:8},{id:80,map:80,type:8},{id:81,map:81,type:9},{id:82,map:82,type:9},{id:83,map:83,type:9},{id:84,map:84,type:9},{id:85,map:85,type:9},{id:86,map:86,type:9},{id:87,map:87,type:9},{id:88,map:88,type:9},{id:89,map:89,type:9},{id:90,map:90,type:9},{id:91,map:91,type:10},{id:92,map:92,type:10},{id:93,map:93,type:10},{id:94,map:94,type:10},{id:95,map:95,type:10},{id:96,map:96,type:10},{id:97,map:97,type:10},{id:98,map:98,type:10},{id:99,map:99,type:10},{id:100,map:100,type:10},{id:101,map:101,type:11},{id:102,map:102,type:11},{id:103,map:103,type:11},{id:104,map:104,type:11},{id:105,map:105,type:11},{id:106,map:106,type:11},{id:107,map:107,type:11},{id:108,map:108,type:11},{id:109,map:109,type:11},{id:110,map:110,type:11},{id:111,map:111,type:12},{id:112,map:112,type:12},{id:113,map:113,type:12},{id:114,map:114,type:12},{id:115,map:115,type:12},{id:116,map:116,type:12},{id:117,map:117,type:12},{id:118,map:118,type:12},{id:119,map:119,type:12},{id:120,map:120,type:12},{id:121,map:121,type:13},{id:122,map:122,type:13},{id:123,map:123,type:13},{id:124,map:124,type:13},{id:125,map:125,type:13},{id:126,map:126,type:13},{id:127,map:127,type:13},{id:128,map:128,type:13},{id:129,map:129,type:13},{id:130,map:130,type:13},{id:131,map:131,type:14},{id:132,map:132,type:14},{id:133,map:133,type:14},{id:134,map:134,type:14},{id:135,map:135,type:14},{id:136,map:136,type:14},{id:137,map:137,type:14},{id:138,map:138,type:14},{id:139,map:139,type:14},{id:140,map:140,type:14},{id:141,map:141,type:15},{id:142,map:142,type:15},{id:143,map:143,type:15},{id:144,map:144,type:15},{id:145,map:145,type:15},{id:146,map:146,type:15},{id:147,map:147,type:15},{id:148,map:148,type:15},{id:149,map:149,type:15},{id:150,map:150,type:15},{id:151,map:184,type:16},{id:152,map:185,type:16},{id:153,map:186,type:16},{id:154,map:187,type:16},{id:155,map:188,type:16},{id:156,map:189,type:16},{id:157,map:190,type:16},{id:158,map:191,type:16},{id:159,map:192,type:16},{id:160,map:193,type:16},{id:161,map:194,type:17},{id:162,map:195,type:17},{id:163,map:196,type:17},{id:164,map:197,type:17},{id:165,map:198,type:17},{id:166,map:199,type:17},{id:167,map:200,type:17},{id:168,map:167,type:17},{id:169,map:168,type:17},{id:170,map:169,type:17},{id:171,map:170,type:18},{id:172,map:171,type:18},{id:173,map:172,type:18},{id:174,map:173,type:18},{id:175,map:174,type:18},{id:176,map:175,type:18},{id:177,map:176,type:18},{id:178,map:177,type:18},{id:179,map:178,type:18},{id:180,map:179,type:18},{id:181,map:180,type:19},{id:182,map:181,type:19},{id:183,map:182,type:19},{id:184,map:183,type:19},{id:185,map:151,type:19},{id:186,map:152,type:19},{id:187,map:153,type:19},{id:188,map:154,type:19},{id:189,map:155,type:19},{id:190,map:156,type:19},{id:191,map:157,type:20},{id:192,map:158,type:20},{id:193,map:159,type:20},{id:194,map:160,type:20},{id:195,map:161,type:20},{id:196,map:162,type:20},{id:197,map:163,type:20},{id:198,map:164,type:20},{id:199,map:165,type:20},{id:200,map:166,type:20},{id:201,map:201,type:21},{id:202,map:202,type:21},{id:203,map:203,type:21},{id:204,map:204,type:21},{id:205,map:205,type:21},{id:206,map:206,type:21},{id:207,map:207,type:21},{id:208,map:208,type:21},{id:209,map:209,type:21},{id:210,map:210,type:21},{id:211,map:211,type:22},{id:212,map:212,type:22},{id:213,map:213,type:22},{id:214,map:214,type:22},{id:215,map:215,type:22},{id:216,map:216,type:22},{id:217,map:217,type:22},{id:218,map:218,type:22},{id:219,map:219,type:22},{id:220,map:220,type:22},{id:221,map:221,type:23},{id:222,map:222,type:23},{id:223,map:223,type:23},{id:224,map:224,type:23},{id:225,map:225,type:23},{id:226,map:226,type:23},{id:227,map:227,type:23},{id:228,map:228,type:23},{id:229,map:229,type:23},{id:230,map:230,type:23},{id:231,map:231,type:24},{id:232,map:232,type:24},{id:233,map:233,type:24},{id:234,map:234,type:24},{id:235,map:235,type:24},{id:236,map:236,type:24},{id:237,map:237,type:24},{id:238,map:238,type:24},{id:239,map:239,type:24},{id:240,map:240,type:24},{id:241,map:241,type:25},{id:242,map:242,type:25},{id:243,map:243,type:25},{id:244,map:244,type:25},{id:245,map:245,type:25},{id:246,map:246,type:25},{id:247,map:247,type:25},{id:248,map:248,type:25},{id:249,map:249,type:25},{id:250,map:250,type:25},{id:251,map:251,type:26},{id:252,map:252,type:26},{id:253,map:253,type:26},{id:254,map:254,type:26},{id:255,map:255,type:26},{id:256,map:256,type:26},{id:257,map:257,type:26},{id:258,map:258,type:26},{id:259,map:259,type:26},{id:260,map:260,type:26},{id:261,map:261,type:27},{id:262,map:262,type:27},{id:263,map:263,type:27},{id:264,map:264,type:27},{id:265,map:265,type:27},{id:266,map:266,type:27},{id:267,map:267,type:27},{id:268,map:268,type:27},{id:269,map:269,type:27},{id:270,map:270,type:27},{id:271,map:271,type:28},{id:272,map:272,type:28},{id:273,map:273,type:28},{id:274,map:274,type:28},{id:275,map:275,type:28},{id:276,map:276,type:28},{id:277,map:277,type:28},{id:278,map:278,type:28},{id:279,map:279,type:28},{id:280,map:280,type:28},{id:281,map:281,type:29},{id:282,map:282,type:29},{id:283,map:283,type:29},{id:284,map:284,type:29},{id:285,map:285,type:29},{id:286,map:286,type:29},{id:287,map:287,type:29},{id:288,map:288,type:29},{id:289,map:289,type:29},{id:290,map:290,type:29},{id:291,map:291,type:30},{id:292,map:292,type:30},{id:293,map:293,type:30},{id:294,map:294,type:30},{id:295,map:295,type:30},{id:296,map:296,type:30},{id:297,map:297,type:30},{id:298,map:298,type:30},{id:299,map:299,type:30},{id:300,map:300,type:30},{id:301,map:301,type:31},{id:302,map:302,type:31},{id:303,map:303,type:31},{id:304,map:304,type:31},{id:305,map:305,type:31},{id:306,map:306,type:31},{id:307,map:307,type:31},{id:308,map:308,type:31},{id:309,map:309,type:31},{id:310,map:310,type:31},{id:311,map:311,type:32},{id:312,map:312,type:32},{id:313,map:313,type:32},{id:314,map:314,type:32},{id:315,map:315,type:32},{id:316,map:316,type:32},{id:317,map:317,type:32},{id:318,map:318,type:32},{id:319,map:319,type:32},{id:320,map:320,type:32},{id:321,map:321,type:33},{id:322,map:322,type:33},{id:323,map:323,type:33},{id:324,map:324,type:33},{id:325,map:325,type:33}];N._RF.pop(),N._RF.push({},"45df2RUUZZNhaXqOADOV0HC","MapLoader",void 0);var Pm,_m=z.ccclass,Bm=ph,Dm=yh,Om=_m("MapLoader")(Rm=function(e){n(l,e);var r,s=i(l);function l(){return a(this,l),s.apply(this,arguments)}return o(l,[{key:"paddingZero",value:function(e,t){return Array(t-e.length).fill("0").join("")+e}},{key:"getMapByLevel",value:function(e){var t=e;if(e>Bm){var n,i=Dm.length;t=null!==(n=Dm[(e-Bm)%i-1])&&void 0!==n?n:1}var a=Lm.find((function(e){return e.id===t}));return console.log("Map:",t),a?a.map:1}},{key:"getMapJsonPath",value:function(e){var t=this.getMapByLevel(e),n=this.paddingZero(t.toString(),3);return"".concat(ad.MAP_JSON_PREFIX).concat(n)}},{key:"preloadLevel",value:function(e){var t=this.getMapJsonPath(e);h.preloadJson(t)}},{key:"loadLevel",value:(r=t((function*(e,t){try{var n=this.getMapJsonPath(e);console.log("Loading level:",n);var i=yield h.loadJsonAsync(n);if(!i)throw new Error("Failed to load JSON asset");null==t||t(null,i)}catch(e){var a=e instanceof Error?e:new Error(String(e));null==t||t(a,null)}})),function(e,t){return r.apply(this,arguments)})},{key:"isLevelAlreadyLoaded",value:function(e){var t=this.getMapJsonPath(e);return!!h.getAsset(t,xe)}}]),l}(U))||Rm;N._RF.pop(),N._RF.push({},"8d3c7nuQGRNgpZcqAOCJY6O","InkCapacityController",void 0);var Im,Nm=(0,z.ccclass)("InkCapacityController")(Pm=function(e){n(r,e);var t=i(r);function r(){var e;a(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).maxInkLevel=0,e.currentInkLevel=0,e}return o(r,[{key:"init",value:function(e){var t=this.getDrawLength(e);this.maxInkLevel=t,this.currentInkLevel=t}},{key:"getCurrentInkLevel",value:function(){return Math.floor(this.currentInkLevel)}},{key:"removeInkLevel",value:function(e){var t=this.currentInkLevel-e;this.setInkLevel(t)}},{key:"setInkLevel",value:function(e){this.currentInkLevel=e,this.currentInkLevel<0&&(this.currentInkLevel=0),this.currentInkLevel>this.maxInkLevel&&(this.currentInkLevel=this.maxInkLevel)}},{key:"isInkEmpty",value:function(){return this.currentInkLevel<=0}},{key:"getInkLevelPercentage",value:function(){return this.currentInkLevel/this.maxInkLevel*100}},{key:"getStarRating",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,t=this.maxInkLevel/e,n=Math.ceil(this.getCurrentInkLevel()/t);return 0===n?1:n}},{key:"getDrawLength",value:function(e){for(var t=0,n=1;n<e.length;n++){var i=e[n-1],a=e[n],o=i.x-a.x,r=i.y-a.y;t+=Math.sqrt(o*o+r*r)}return 3*t}}]),r}(U))||Pm;N._RF.pop(),N._RF.push({},"014cbNey8JEV4aPhDm9R5W4","InputController",void 0);var Fm=(0,z.ccclass)("InputController")(Im=function(e){n(r,e);var t=i(r);function r(){var e;a(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).pointerDownOutSideCanvas=!1,e.handleElementPointerDown=function(){e.pointerDownOutSideCanvas=!0},e.handleElementPointerUp=function(t){e.onTouchEnd(),e.pointerDownOutSideCanvas=!1},e.onTouchStart=function(t){e.node.scene.emit(sr.GAME_START,{pointer:t})},e.onTouchMove=function(t){if(e.pointerDownOutSideCanvas)return e.node.scene.emit(sr.GAME_START,{pointer:t}),void(e.pointerDownOutSideCanvas=!1);e.node.scene.emit(sr.DRAWING,{pointer:t})},e.onTouchEnd=function(t){e.node.scene.emit(sr.BEE_ATTACK)},e}return o(r,[{key:"onLoad",value:function(){this.listenInputEvents()}},{key:"listenInputEvents",value:function(){ue.os!==ue.OS.WINDOWS&&ue.os!==ue.OS.OSX||(document.addEventListener("pointerup",this.handleElementPointerUp),document.addEventListener("pointerdown",this.handleElementPointerDown),this.node.on(ie.EventType.MOUSE_DOWN,this.onTouchStart),this.node.on(ie.EventType.MOUSE_MOVE,this.onTouchMove),this.node.on(ie.EventType.MOUSE_UP,this.onTouchEnd)),this.node.on(ie.EventType.TOUCH_START,this.onTouchStart),this.node.on(ie.EventType.TOUCH_MOVE,this.onTouchMove),this.node.on(ie.EventType.TOUCH_CANCEL,this.onTouchEnd),this.node.on(ie.EventType.TOUCH_END,this.onTouchEnd)}},{key:"onDestroy",value:function(){ue.os===ue.OS.WINDOWS||ue.os===ue.OS.OSX?(document.removeEventListener("pointerup",this.handleElementPointerUp),document.removeEventListener("pointerdown",this.handleElementPointerDown),this.node.off(ie.EventType.MOUSE_DOWN,this.onTouchStart),this.node.off(ie.EventType.MOUSE_MOVE,this.onTouchMove),this.node.off(ie.EventType.MOUSE_UP,this.onTouchEnd)):(this.node.off(ie.EventType.TOUCH_START,this.onTouchStart),this.node.off(ie.EventType.TOUCH_MOVE,this.onTouchMove),this.node.off(ie.EventType.TOUCH_CANCEL,this.onTouchEnd),this.node.off(ie.EventType.TOUCH_END,this.onTouchEnd))}}]),r}(U))||Im;N._RF.pop(),N._RF.push({},"e6116mseMNPD6VcLUtkvez6","BaseState",void 0);var zm=function(){function e(t){if(a(this,e),this.game=null,this.data={},this.game=t.node.getComponent(mk),!this.game)throw new Error("Gameplay component not found");this.manager=t,this.updateStateData(),this.logDebug()}return o(e,[{key:"logDebug",value:function(){var e=this.constructor.name;console.debug("[STATE] ".concat(e),this.data)}},{key:"updateStateData",value:function(){if(this.game){var e=this.game.getGameData();e&&(this.data=e)}}},{key:"updateGameData",value:function(e){var t;null===(t=this.game)||void 0===t||t.setGameData(e)}}]),e}();N._RF.pop(),N._RF.push({},"a79a7LT0s5BuZrk5mvYsyKr","AttackingState",void 0);var xm=function(e){n(r,e);var t=i(r);function r(e){var n;return a(this,r),(n=t.call(this,e)).stopHint(),n.stopDrawing(),n.wakeUpObjects(),n.spawnEnemies(),n.startCountdown(),S.turnDownMusic(),n}return o(r,[{key:"load",value:function(){var e=this.manager.createLoadingState();this.manager.change(e)}},{key:"initialize",value:function(){S.stopSound(Zn.BEE_FLYING);var e=this.manager.createInitializeState();this.manager.change(e)}},{key:"ready",value:function(){}},{key:"draw",value:function(){}},{key:"attack",value:function(){}},{key:"escape",value:function(){var e=this.manager.createEscapeState();this.manager.change(e)}},{key:"death",value:function(){var e=this.manager.createDeathState();this.manager.change(e)}},{key:"finish",value:function(){}},{key:"update",value:function(){}},{key:"stopDrawing",value:function(){var e;null===(e=this.game)||void 0===e||null===(e=e.lineDrawer)||void 0===e||e.endDraw()}},{key:"stopHint",value:function(){var e;null===(e=this.game)||void 0===e||null===(e=e.hint)||void 0===e||e.hideHint()}},{key:"wakeUpObjects",value:function(){var e;null===(e=this.game)||void 0===e||null===(e=e.gameObjects)||void 0===e||e.wakeUpObjects()}},{key:"spawnEnemies",value:function(){this.game&&this.game.gameObjects&&(this.game.gameObjects.spawnBees(),this.game.gameObjects.reviveBigBees(),S.playSound(Zn.BEE_FLYING),S.playSound(Zn.END_DRAW))}},{key:"startCountdown",value:function(){var e;null===(e=this.game)||void 0===e||e.uiManager.startCountdown()}}]),r}(zm);N._RF.pop(),N._RF.push({},"17461foCjdJ276bG2jcxA06","DeathState",void 0);var Gm=codex.analytics,Mm=function(e){n(r,e);var t=i(r);function r(e){var n,i,o;return a(this,r),(o=t.call(this,e)).processCrazyGamesEvent(),o.disableUI(),S.stopAllSounds(),o.vibrateDevice(),o.pauseCountdown(),o.logLevelFailAnalytics(),null===(n=o.game)||void 0===n||n.scheduleOnce((function(){o.stopDogesLooking(),o.showUncompletedMark(),S.playSound(Zn.LEVEL_FAIL,{volume:.3})}),.5),null===(i=o.game)||void 0===i||i.scheduleOnce((function(){o.sleepObjects(),o.showLoseScreen(),o.manager.finish()}),1.8),o}return o(r,[{key:"processCrazyGamesEvent",value:function(){"gameplayStop"in GameSDK.extra&&GameSDK.extra.gameplayStop()}},{key:"load",value:function(){}},{key:"initialize",value:function(){}},{key:"ready",value:function(){}},{key:"draw",value:function(){}},{key:"attack",value:function(){}},{key:"escape",value:function(){}},{key:"death",value:function(){}},{key:"finish",value:function(){var e=this.manager.createFinishState();this.manager.change(e)}},{key:"update",value:function(){}},{key:"disableUI",value:function(){var e,t;null===(e=this.game)||void 0===e||e.uiManager.disableUI(),null===(t=this.game)||void 0===t||t.hint.reset()}},{key:"sleepObjects",value:function(){var e,t;null===(e=this.game)||void 0===e||null===(e=e.lineDrawer)||void 0===e||e.deActivePhysics(),null===(t=this.game)||void 0===t||null===(t=t.gameObjects)||void 0===t||t.sleepObjects()}},{key:"pauseCountdown",value:function(){var e;null===(e=this.game)||void 0===e||e.uiManager.pauseCountdown()}},{key:"stopDogesLooking",value:function(){var e;if(null!==(e=this.game)&&void 0!==e&&e.gameObjects){var t,n=this.game.gameObjects.getComponentsInChildren(Vv),i=s(n);try{for(i.s();!(t=i.n()).done;){var a,o=t.value;null===(a=o.eyes)||void 0===a||a.stopLook(),o.setEnable(!1)}}catch(e){i.e(e)}finally{i.f()}}}},{key:"vibrateDevice",value:function(){var e;null===(e=ge("Vibrate"))||void 0===e||null===(e=e.getComponent(dh))||void 0===e||e.vibrate(500)}},{key:"showUncompletedMark",value:function(){var e;null===(e=this.game)||void 0===e||e.uiManager.showUncompletedMark()}},{key:"showLoseScreen",value:function(){var e=this.data.level;L.openScreen(P.LOSE_SCREEN,{level:e})}},{key:"logLevelFailAnalytics",value:function(){if(this.game){var e=this.game.inkCapacityController;if(e){var t=this.data.level,n=void 0===t?0:t,i=e.getStarRating();console.info("logLevelFailAnalytics",n,i),Gm.levelFail(n,i,Nh)}}}}]),r}(zm);N._RF.pop(),N._RF.push({},"71778iMCmVDQKkpW1Ag0dZz","DrawingState",void 0);var Um=function(e){n(r,e);var t=i(r);function r(e){var n;return a(this,r),(n=t.call(this,e)).dist=0,n.isEmptyDraw=!1,n.initDrawer(),n}return o(r,[{key:"load",value:function(){}},{key:"initialize",value:function(){var e=this.manager.createInitializeState();this.manager.change(e)}},{key:"ready",value:function(){var e=this.manager.createReadyState();this.manager.change(e)}},{key:"draw",value:function(){}},{key:"attack",value:function(){var e,t,n;if(100===(null!==(e=null===(t=this.game)||void 0===t?void 0:t.inkCapacityController.getInkLevelPercentage())&&void 0!==e?e:0))return null===(n=this.game)||void 0===n||n.lineDrawer.endDraw(),void(this.isEmptyDraw=!0);var i=this.manager.createAttackingState();this.manager.change(i)}},{key:"escape",value:function(){}},{key:"death",value:function(){}},{key:"finish",value:function(){}},{key:"update",value:function(){var e;this.isInkEmpty()?null===(e=this.game)||void 0===e||e.node.scene.emit(sr.BEE_ATTACK):this.isEmptyDraw?this.manager.ready():(this.updateStateData(),this.drawLines(),this.updateInkLevel(),this.updateProgressBar())}},{key:"initDrawer",value:function(){var e;if(null!==(e=this.game)&&void 0!==e&&e.lineDrawer){var t=this.data.pointer.getUILocation();this.game.lineDrawer.beginDraw(t),S.playSound(Zn.BUTTON_CLICK)}}},{key:"isInkEmpty",value:function(){return!!this.game&&this.game.inkCapacityController.isInkEmpty()}},{key:"drawLines",value:function(){var e,t;if(null!==(e=this.game)&&void 0!==e&&e.lineDrawer){var n=this.data.pointer.getUILocation();this.dist=null!==(t=this.game.lineDrawer.draw(n))&&void 0!==t?t:0,this.dist>0&&S.playSound(Zn.TOUCH_START,{volume:.8})}}},{key:"updateInkLevel",value:function(){var e;null===(e=this.game)||void 0===e||e.inkCapacityController.removeInkLevel(this.dist)}},{key:"updateProgressBar",value:function(){if(this.game){var e=this.game.inkCapacityController.getStarRating();this.game.uiManager.setProgressStars(e);var t=this.game.inkCapacityController.getInkLevelPercentage();this.game.uiManager.setProgressBarPercentage(t)}}}]),r}(zm);N._RF.pop(),N._RF.push({},"d600e+7dHhGOYCGrcOjxVcl","EscapeState",void 0);var Hm=codex,jm=Hm.player,Wm=Hm.analytics,Vm=function(e){n(r,e);var t=i(r);function r(e){var n,i;return a(this,r),(i=t.call(this,e)).processCrazyGamesEvent(),i.disableUI(),i.stopAllSounds(),i.vibrateDevice(),i.makeDogesSmile(),i.pauseCountdown(),i.showCompletedMark(),i.updatePlayerProgress(),i.stopBeeBehavior(),i.logLevelCompleteAnalytics(),null===(n=i.game)||void 0===n||n.scheduleOnce((function(){i.sleepObjects(),i.showWiningScreen(),i.manager.finish()}),.5),S.playSound(Zn.LEVEL_PASS),S.playSound(Zn.BEE_FLYING),i}return o(r,[{key:"processCrazyGamesEvent",value:function(){"gameplayStop"in GameSDK.extra&&GameSDK.extra.gameplayStop()}},{key:"load",value:function(){}},{key:"initialize",value:function(){}},{key:"ready",value:function(){}},{key:"draw",value:function(){}},{key:"attack",value:function(){}},{key:"escape",value:function(){}},{key:"death",value:function(){}},{key:"finish",value:function(){var e=this.manager.createFinishState();this.manager.change(e)}},{key:"update",value:function(){}},{key:"disableUI",value:function(){var e,t;null===(e=this.game)||void 0===e||e.uiManager.disableUI(),null===(t=this.game)||void 0===t||t.hint.reset()}},{key:"stopBeeBehavior",value:function(){var e;null===(e=this.game)||void 0===e||null===(e=e.gameObjects)||void 0===e||e.stopBeeBehavior()}},{key:"sleepObjects",value:function(){var e,t;null===(e=this.game)||void 0===e||null===(e=e.lineDrawer)||void 0===e||e.deActivePhysics(),null===(t=this.game)||void 0===t||null===(t=t.gameObjects)||void 0===t||t.sleepObjects()}},{key:"stopAllSounds",value:function(){S.stopAllSounds()}},{key:"makeDogesSmile",value:function(){var e;if(null!==(e=this.game)&&void 0!==e&&e.gameObjects){var t,n=this.game.gameObjects.getComponentsInChildren(Vv),i=s(n);try{for(i.s();!(t=i.n()).done;){var a=t.value;a.smile(),a.setEnable(!1)}}catch(e){i.e(e)}finally{i.f()}}}},{key:"vibrateDevice",value:function(){var e;null===(e=ge("Vibrate"))||void 0===e||null===(e=e.getComponent(dh))||void 0===e||e.vibrate(500)}},{key:"pauseCountdown",value:function(){var e;null===(e=this.game)||void 0===e||e.uiManager.pauseCountdown()}},{key:"showCompletedMark",value:function(){var e;null===(e=this.game)||void 0===e||e.uiManager.showCompletedMark()}},{key:"updatePlayerProgress",value:function(){if(this.game){var e=this.data.level;if(e){var t=jm.getGameData();if(t){var n=d({},t);e<t.level&&(n.level=e+1),jm.setGameData(n)}}}}},{key:"showWiningScreen",value:function(){if(this.game){var e=this.data.level,t=this.game.inkCapacityController.getStarRating();L.openScreen(P.WINNING_SCREEN,{level:e,stars:t})}}},{key:"logLevelCompleteAnalytics",value:function(){if(this.game){var e=this.game.inkCapacityController;if(e){var t=this.data.level,n=void 0===t?0:t,i=e.getStarRating();console.info("logLevelCompleteAnalytics",n,i),Wm.levelComplete(n,i,Nh)}}}}]),r}(zm);N._RF.pop(),N._RF.push({},"0397cr2IpZEwbRzwQhlVHMO","MatchUtils",void 0);var $m=codex,qm=$m.match,Km=$m.player,Ym=$m.leaderboard,Jm=Ludex,Xm=Jm.Utils,Zm=Xm.Object,Qm=Xm.Valid,eg=Xm.String,tg=Xm.Array,ng=Jm.Match.Modes,ig=["Champion","Ultimate","Grand","Elite","Master's","Premier","Epic","Pro's","Supreme","Legendary","Victory","Prime","Titan's","Hero's","Star's"],ag=function(e){n(r,e);var t=i(r);function r(){return a(this,r),t.apply(this,arguments)}return o(r,[{key:"createTournamentPayload",value:function(){return p(y(r.prototype),"createTournamentPayload",this).call(this)}}]),r}(function(){function e(){var n=this;a(this,e),this.processStartSingleModeAsync$=t((function*(){var e=Km.getPlayerId();return qm.single.start.processAsync({playerId:e})})),this.processFinishSingleModeAsync$=t((function*(){return qm.single.finish.processAsync()})),this.processStartTournamentModeAsync$=t((function*(){var e=Km.getPlayerId(),t=GameSDK.context.getID();return qm.tournament.continue.processAsync({playerId:e,contextId:t})})),this.processFinishTournamentModeAsync$=t((function*(){var e=Km.getPlayerId(),t=Km.getBestScore();return qm.tournament.finish.processAsync({playerId:e,bestScore:t})})),this.processStartChallengeModeAsync$=t((function*(){try{return n.processContinueChallengeAsync$()}catch(e){if(!Zm.hasOwn(e,"name")||Qm.isString(e.name))throw e;if("PlayerHasFinishedMatch"===e.name)return n.processChallengeNewOpponentAsync$();if("PlayerNotJoinInMatch"===e.name)return n.processJoinChallengeAsync$()}})),this.processFinishChallengeModeAsync$=function(){var e=t((function*(e){return qm.challenge.finish.processAsync(e)}));return function(t){return e.apply(this,arguments)}}(),this.processContinueChallengeAsync$=t((function*(){var e=n.getMatchState$(),t=e.id,i=e.customData,a=i.playerId,o=i.opponentId;if(!Qm.isString(t))throw new Error("Invalid match id");if(!Qm.isString(a))throw new Error("Invalid player id");if(!Qm.isString(o))throw new Error("Invalid opponent id");var r=GameSDK.context.getID();if(!r)throw new Error("Cannot get contextId");return qm.challenge.continue.processAsync({matchId:t,contextId:r,playerId:a,opponentId:o})})),this.processChallengeNewOpponentAsync$=t((function*(){var e=Km.getConnectedPlayerIds(100,0),t=Math.floor(Math.random()*e.length),n=Km.getPlayerId(),i=e[t];if(!Qm.isString(i)||Qm.isEmpty(i))throw new Error("Invalid opponent id");return qm.challenge.friend.processAsync({playerId:n,opponentId:i})})),this.processJoinChallengeAsync$=t((function*(){var e=n.getMatchState$(),t=e.id,i=e.customData,a=i.playerId,o=i.opponentId;if(!Qm.isString(t))throw new Error("Invalid match id");if(!Qm.isString(a))throw new Error("Invalid player id");if(!Qm.isString(o))throw new Error("Invalid opponent id");return qm.challenge.join.processAsync({matchId:t,playerId:a,opponentId:o})})),this.processStartGameModeAsync$=function(){var e=t((function*(e){var t=Km.getPlayerId();return qm.strategy.start.processAsync({matchId:"123456",gameMode:e,playerId:t})}));return function(t){return e.apply(this,arguments)}}(),this.processFinishGameModeAsync$=t((function*(){return qm.strategy.finish.processAsync({postGlobalLeaderboard:!0,setPlayerBestScore:!0})})),this.getMatchState$=function(){var e=qm.getMatchState();if(!e)throw new Error("Match state not found");return e},this.createTournamentName=function(){var e=pe.randomRangeInt(0,ig.length-1),t="".concat(ig[e]," Tournament"),n=eg.removeDiacritics(t);return"".concat(n)},this.getTournamentsAsync$=t((function*(){try{return yield GameSDK.tournament.getTournamentsAsync()}catch(e){return console.error(e),[]}}))}var n,i,r,s,l,u,c,h,d;return o(e,[{key:"createTournamentPayload",value:function(){var e,t,n=eg.generateObjectId(),i=Km.getPlayerId(),a=Km.getPlayer().name,o=this.getMatchState$().profiles;return{score:null!==(e=null===(t=(void 0===o?{}:o)[i])||void 0===t?void 0:t.score)&&void 0!==e?e:0,playerId:i,mode:ng.TOURNAMENT,name:this.createTournamentName(),leaderboardId:n,payload:{playerId:i,playerName:a,leaderboardId:n}}}}],[{key:"inst",get:function(){return this.inst$||(this.inst$=new this),this.inst$}},{key:"startMatchAsync",value:(d=t((function*(e){try{var t=null!=e?e:this.getMatchMode();switch(t){case ng.SINGLE:yield this.inst.processStartSingleModeAsync$();break;case ng.TOURNAMENT:yield this.inst.processStartTournamentModeAsync$();break;case ng.CHALLENGE_FRIEND:yield this.inst.processStartChallengeModeAsync$();break;default:t?yield this.inst.processStartGameModeAsync$(t):yield this.inst.processStartSingleModeAsync$()}}catch(e){console.warn("startMatchAsync",e)}})),function(e){return d.apply(this,arguments)})},{key:"setProfileMatchDataAsync",value:(h=t((function*(e){try{yield qm.handler.setProfileData(e)}catch(e){console.warn("setProfileMatchDataAsync",e)}})),function(e){return h.apply(this,arguments)})},{key:"setMatchCustomDataAsync",value:(c=t((function*(e){try{yield qm.handler.setMatchCustomData(e)}catch(e){console.warn("setMatchCustomDataAsync",e)}})),function(e){return c.apply(this,arguments)})},{key:"getMatchCustomDataAsync",value:(u=t((function*(){try{yield qm.handler.getMatchCustomData()}catch(e){console.warn("getMatchCustomDataAsync",e)}})),function(){return u.apply(this,arguments)})},{key:"setLeaderboardScoreAsync",value:(l=t((function*(e){try{yield qm.handler.setLeaderboardScore(e)}catch(e){console.warn("setLeaderboardScoreAsync",e)}})),function(e){return l.apply(this,arguments)})},{key:"finishMatchAsync",value:(s=t((function*(e){try{var t=this.getMatchMode();switch(t){case ng.SINGLE:yield this.inst.processFinishSingleModeAsync$();break;case ng.TOURNAMENT:yield this.inst.processFinishTournamentModeAsync$();break;case ng.CHALLENGE_FRIEND:yield this.inst.processFinishChallengeModeAsync$(e);break;default:t?yield this.inst.processFinishGameModeAsync$():yield this.inst.processFinishSingleModeAsync$()}}catch(e){console.warn("finishMatchAsync",e)}})),function(e){return s.apply(this,arguments)})},{key:"joinTournamentAsync",value:(r=t((function*(e){var t=Km.getPlayerId();return qm.tournament.join.processAsync({tournamentId:e,playerId:t})})),function(e){return r.apply(this,arguments)})},{key:"continueTournamentAsync",value:(i=t((function*(e){var t=Km.getPlayerId();return qm.tournament.continue.processAsync({playerId:t,contextId:e})})),function(e){return i.apply(this,arguments)})},{key:"getMatchMode",value:function(){var e=this.inst.getMatchState$();return Qm.isString(e.mode)?e.mode:null}},{key:"getMatchCustomData",value:function(){var e=this.inst.getMatchState$();return Qm.isObject(e.customData)?e.customData:null}},{key:"updateMatchStateAfterLevelFinish",value:function(e,t){this.setMatchCustomDataAsync({level:e,score:t});var n=Km.getPlayerId();this.setProfileMatchDataAsync({id:n,score:t})}},{key:"processCreateTournamentAsync",value:(n=t((function*(){var e=yield this.inst.getTournamentsAsync$(),t=tg.search(e,(function(e){var t=e.getPayload(),n=JSON.parse(Qm.isString(t)?t:"{}");return"DEFAULT"===e.getTournamentType()&&n.playerId===Km.getPlayerId()}));if(t)throw new Wh(Km.getPlayerId(),t.getID());var n=this.inst.createTournamentPayload();Km.setGameData({lastCreateTournamentShown:Date.now()}),yield qm.tournament.create.processAsync(n);var i=n.leaderboardId;Ym.addLeaderboard({name:i,type:"tournament",autoSortRank:!0,leaderboardId:i})})),function(){return n.apply(this,arguments)})}]),e}());N._RF.pop(),N._RF.push({},"a9bc11SkV9L/5L+Y+fhswfJ","FinishState",void 0);var og=codex.player,rg=function(e){n(l,e);var r,s=i(l);function l(e){var t;return a(this,l),t=s.call(this,e),S.turnUpMusic(),S.stopSound(Zn.BEE_FLYING),t.finishGameAsync(),t}return o(l,[{key:"load",value:function(){var e=this.manager.createLoadingState();this.manager.change(e)}},{key:"initialize",value:function(){var e=this.manager.createInitializeState();this.manager.change(e)}},{key:"ready",value:function(){}},{key:"draw",value:function(){}},{key:"attack",value:function(){}},{key:"escape",value:function(){}},{key:"death",value:function(){}},{key:"finish",value:function(){}},{key:"update",value:function(){}},{key:"finishGameAsync",value:(r=t((function*(){try{if(!this.game)return;var e=this.game.inkCapacityController;if(!e)return;var t=this.data.level,n=1e3*(void 0===t?0:t)+100*e.getStarRating(),i=og.getBestScore();"submitGameResultsAsync"in GameSDK.extra&&GameSDK.extra.submitGameResultsAsync(i),i<n&&og.setBestScore(n),yield ag.finishMatchAsync()}catch(e){console.error("finishGameAsync",e)}})),function(){return r.apply(this,arguments)})}]),l}(zm);N._RF.pop(),N._RF.push({},"81384LH7iZM+pyqeb36L9t3","SwitchGameUtils",void 0);var sg="9p066934tllp",lg="bubble-pop-classic",ug=codex,cg=ug.player,hg=ug.analytics,dg=Ludex.Plugins.Analytics.Events,pg=function(){function e(){a(this,e),this.targetLevel=null}return o(e,null,[{key:"inst",get:function(){return this._instance||(this._instance=new e),this._instance}},{key:"init",value:function(){var e=this,t=this.inst;this.isNewPlayerFirstDay()?t.targetLevel=8:setTimeout((function(){e.assignTargetLevelForReturningUser()}),12e4)}},{key:"handleSwitchGame",value:function(){var e,t;"MsGames"===GameSDK.getSDKName()&&("switchGameAsync"in GameSDK.extra&&(this.isSwitchGameCalledToday()||null!==this.inst.targetLevel&&(null!==(e=null===(t=cg.getGameData())||void 0===t?void 0:t.level)&&void 0!==e?e:1)>=this.inst.targetLevel&&this.handleSwitchGameAsync()))}},{key:"handleSwitchGameAsync",value:function(){"MsGames"===GameSDK.getSDKName()&&"switchGameAsync"in GameSDK.extra&&(cg.setPlayerDataByName("lastCallSwitchGame",Date.now()),hg.event(dg.SWITCH_GAME_POPUP,{target_game_id:sg,target_game_name:lg}),GameSDK.extra.switchGameAsync(sg).catch((function(e){hg.event("switch_game_popup_cancel",{target_game_id:sg,target_game_name:lg})})))}},{key:"isSwitchGameCalledToday",value:function(){var e,t=null!==(e=cg.getPlayerDataByKey("lastCallSwitchGame"))&&void 0!==e?e:0;return this.isSameDay(t)}},{key:"isNewPlayerFirstDay",value:function(){var e,t=cg.getGameData(),n=null!==(e=null==t?void 0:t.firstLoginTime)&&void 0!==e?e:0;if(0===n){var i;if(1===(null!==(i=null==t?void 0:t.level)&&void 0!==i?i:1))return cg.setGameData({firstLoginTime:Date.now()}),!0;var a=Date.now()-864e5;return cg.setGameData({firstLoginTime:a}),!1}return this.isSameDay(n)}},{key:"isSameDay",value:function(e){var t=new Date,n=new Date(e),i=t.getDate()===n.getDate(),a=t.getMonth()===n.getMonth(),o=t.getFullYear()===n.getFullYear();return i&&a&&o}},{key:"assignTargetLevelForReturningUser",value:function(){var e,t=cg.getGameData(),n=null!==(e=null==t?void 0:t.level)&&void 0!==e?e:1;this.inst.targetLevel=n+1}}]),e}();N._RF.pop(),N._RF.push({},"37a5cRy3ANBGpVlH3wyS3Ra","InitializeState",void 0);var yg=codex.analytics,vg=function(e){n(u,e);var r,s,l=i(u);function u(e){var t;return a(this,u),t=l.call(this,e),"CrazyGames"===GameSDK.getSDKName()&&t.processCrazyGamesRequirements(),t.enableUI(),t.disableHintButtonForEarlyLevels(),t.clearHint(),t.clearGameObjects(),t.createGameObjects(),t.initInkCapacity(),t.initCountdown(),t.updateHeader(),t.showTutorialUI(),S.playMusic(Zn.BG_MUSIC),pg.handleSwitchGame(),t.startGameAsync().then((function(){t.closeLoadingScreen(),t.manager.ready(),t.logLevelStartAnalytics()})),t}return o(u,[{key:"processCrazyGamesRequirements",value:function(){"gameplayStart"in GameSDK.extra&&GameSDK.extra.gameplayStart(),this.showInterAdsCrazyGames()}},{key:"disableHintButtonForEarlyLevels",value:function(){if(this.game){var e=this.data.level;e&&e<=3&&this.game.uiManager.disableHintButton()}}},{key:"showInterAdsCrazyGames",value:(s=t((function*(){this.game&&(S.stopAllSounds(),(yield w.showInterstitialAdAsync({forLevel:this.data.level,includeSDK:["CrazyGames"]}))&&this.game.disableRewardAdsItemForCrazyGames(),S.turnUpMusic())})),function(){return s.apply(this,arguments)})},{key:"load",value:function(){if(Ludex.Utils.Valid.isDebugger()){var e=this.manager.createLoadingState();this.manager.change(e)}}},{key:"initialize",value:function(){}},{key:"ready",value:function(){var e=this.manager.createReadyState();this.manager.change(e)}},{key:"draw",value:function(){}},{key:"attack",value:function(){}},{key:"escape",value:function(){var e=this.manager.createEscapeState();this.manager.change(e)}},{key:"death",value:function(){var e=this.manager.createDeathState();this.manager.change(e)}},{key:"finish",value:function(){}},{key:"update",value:function(){}},{key:"closeLoadingScreen",value:function(){L.closeScreen(P.LOADING_SCREEN)}},{key:"enableUI",value:function(){var e;null===(e=this.game)||void 0===e||e.uiManager.enableUI()}},{key:"clearHint",value:function(){var e;null===(e=this.game)||void 0===e||null===(e=e.hint)||void 0===e||e.reset()}},{key:"clearGameObjects",value:function(){var e,t;null!==(e=this.game)&&void 0!==e&&e.lineDrawer&&null!==(t=this.game)&&void 0!==t&&t.gameObjects&&(this.game.lineDrawer.clearLines(),this.game.gameObjects.clearObjects())}},{key:"createGameObjects",value:function(){var e,t=this.data.levelData;t&&(null===(e=this.game)||void 0===e||null===(e=e.gameObjects)||void 0===e||e.spawnObjects(t))}},{key:"initInkCapacity",value:function(){if(this.game){var e=this.data.levelData;if(e){var t=this.game.inkCapacityController,n=e.lnk,i=void 0===n?[]:n;t.init(i)}}}},{key:"initCountdown",value:function(){var e;null===(e=this.game)||void 0===e||e.uiManager.initCountdown()}},{key:"updateHeader",value:function(){var e;if(null!==(e=this.game)&&void 0!==e&&e.hint){var t=this.game.inkCapacityController.getStarRating();this.game.uiManager.setProgressStars(t);var n=this.game.inkCapacityController.getInkLevelPercentage();this.game.uiManager.setProgressBarPercentage(n),this.game.hint.getIsHintShow()||this.game.uiManager.startCountDownHeaderHintBubbleAnim()}}},{key:"showTutorialUI",value:function(){var e,t;if(this.game){var n=this.data,i=n.level,a=n.levelData;if(i&&a&&!(i>3)&&null!==(e=this.game)&&void 0!==e&&e.hint&&null!==(t=this.game)&&void 0!==t&&t.uiManager){var o=a.tips,r=Qf.transformPointsFromMapToDrawAreaCoordinate(o);this.game.hint.showHint(r,!0),this.game.uiManager.stopCountDownHeaderHintBubbleAnim()}}}},{key:"startGameAsync",value:(r=t((function*(){try{if(this.data.isFromLoader)return void this.updateGameData({isFromLoader:!1});yield ag.startMatchAsync()}catch(e){console.error("startGameAsync",e)}})),function(){return r.apply(this,arguments)})},{key:"logLevelStartAnalytics",value:function(){if(this.game){var e=this.data.level,t=void 0===e?0:e,n=this.game.inkCapacityController.getStarRating();yg.levelStart(t,n)}}}]),u}(zm);N._RF.pop(),N._RF.push({},"f98e6wIKqZGv7aAVsWH1sS+","MapUtils",void 0);var fg=ph,mg=yh,gg=375,bg=function(){function e(){a(this,e)}return o(e,null,[{key:"inst",get:function(){return this._instance||(this._instance=new e),this._instance}},{key:"isMapFlippedHorizontally",value:function(e){var t=e-fg;if(t<=0)return!1;var n=mg.length;return Math.floor(t/n)%2==0}},{key:"getTransformedMapPoints",value:function(e){return e.map((function(e){var t=e.data,n=e.connect;if(t&&void 0!==t.a&&(t.a*=-1),n){var i=n.point,a=n.data;a&&void 0!==a.a&&(a.a*=-1),Array.isArray(i)?n.point=Qf.getTransformedPolygon(i):n.point=Qf.getTransformedPoint(i)}if(Array.isArray(e.point)){var o=e.id===td.WOOD||e.id===td.COLLIDER?Qf.getTransformedDoublePolygon(e.point):Qf.getTransformedPolygon(e.point);return d(d({},e),{},{point:o})}var r=e.point;return d(d({},e),{},{point:Qf.getTransformedPoint(r)})}))}},{key:"getTransformedTips",value:function(e){return e.map((function(e){return Qf.getTransformedPoint(e)}))}},{key:"revertTransformedMapPoints",value:function(e){return e.map((function(e){if(e.connect){var t=e.connect.point;Array.isArray(t)?e.connect.point=Qf.revertTransformedPolygon(t):e.connect.point=Qf.revertTransformedPoint(t)}if(Array.isArray(e.point)){var n=e.id===td.WOOD||e.id===td.COLLIDER?Qf.revertTransformedDoublePolygon(e.point):Qf.revertTransformedPolygon(e.point);return d(d({},e),{},{point:n})}var i=e.point;return d(d({},e),{},{point:Qf.revertTransformedPoint(i)})}))}},{key:"revertTransformedTips",value:function(e){return e.map((function(e){return Qf.revertTransformedPoint(e)}))}},{key:"flipMapDataHorizontally",value:function(t){var n=t.map,i=t.tips,a=t.lnk,o=1/0,r=-1/0,s=[],l=e.getTransformedMapPoints(n),u=e.getTransformedTips(i);return l.forEach((function(e){Array.isArray(e.point)?e.point.forEach((function(e){s.push(e)})):s.push(e.point)})),u.forEach((function(e){s.push(e)})),s.forEach((function(e){e.x<o&&(o=e.x),e.x>r&&(r=e.x)})),l.forEach((function(e){Array.isArray(e.point)?e.point.forEach((function(e){e.x=e.x-2*(e.x-gg)})):e.point.x=e.point.x-2*(e.point.x-gg),e.connect&&(Array.isArray(e.connect.point)?e.connect.point.forEach((function(e){e.x=e.x-2*(e.x-gg)})):e.connect.point.x=e.connect.point.x-2*(e.connect.point.x-gg))})),u.forEach((function(e){e.x=e.x-2*(e.x-gg)})),a.forEach((function(e){e.x=e.x-2*(e.x-gg)})),{map:e.revertTransformedMapPoints(l),tips:e.revertTransformedTips(u),lnk:a}}}]),e}();N._RF.pop(),N._RF.push({},"a8496IbdA1EnY7sv4ApuaJW","LoadingState",void 0);var Sg=function(e){n(r,e);var t=i(r);function r(e){var n;return a(this,r),(n=t.call(this,e)).handleMapLoaded=function(e,t){if(!e&&t){var i,a,o=n.data.level,r=t.json,s=null!=o?o:1;if(bg.isMapFlippedHorizontally(s)){var l=bg.flipMapDataHorizontally(r);n.updateGameData({levelData:l})}else n.updateGameData({levelData:r});if(o)null===(i=n.game)||void 0===i||null===(i=i.gameMap)||void 0===i||i.preloadLevel(o+1);
//! wait until loading screen open then ready to reduce stuttering
if(n.loadingScreenFlag)null===(a=n.game)||void 0===a||a.scheduleOnce((function(){n.initialize()}),.5);else n.initialize()}else console.error("Failed to load level",e)},n.loadingScreenFlag=!n.isLevelAlreadyLoaded(),n.loadingScreenFlag&&L.showLoadingScreen(),n.stopHint(),n.loadGameMap(),n.updateLevelText(),n}return o(r,[{key:"load",value:function(){}},{key:"initialize",value:function(){var e=this.manager.createInitializeState();this.manager.change(e)}},{key:"ready",value:function(){}},{key:"draw",value:function(){}},{key:"attack",value:function(){}},{key:"escape",value:function(){}},{key:"death",value:function(){}},{key:"finish",value:function(){}},{key:"update",value:function(){}},{key:"isLevelAlreadyLoaded",value:function(){var e,t,n=this.data.level;if(!n)throw new Error("Level is not defined");return null!==(e=null===(t=this.game)||void 0===t||null===(t=t.gameMap)||void 0===t?void 0:t.isLevelAlreadyLoaded(n))&&void 0!==e&&e}},{key:"stopHint",value:function(){var e;null===(e=this.game)||void 0===e||null===(e=e.hint)||void 0===e||e.hideHint()}},{key:"loadGameMap",value:function(){var e,t=this.data.level;if(!t)throw new Error("Level is not defined");null===(e=this.game)||void 0===e||null===(e=e.gameMap)||void 0===e||e.loadLevel(t,this.handleMapLoaded)}},{key:"updateLevelText",value:function(){var e,t=this.data.level;t&&(null===(e=this.game)||void 0===e||e.uiManager.setLevelText(t))}}]),r}(zm);N._RF.pop(),N._RF.push({},"5ef69tJ5eNNv7o22H/XfSD2","ReadyState",void 0);var kg,Cg=function(e){n(r,e);var t=i(r);function r(){return a(this,r),t.apply(this,arguments)}return o(r,[{key:"load",value:function(){if(Ludex.Utils.Valid.isDebugger()){var e=this.manager.createLoadingState();this.manager.change(e)}}},{key:"initialize",value:function(){}},{key:"ready",value:function(){}},{key:"draw",value:function(){var e=this.manager.createDrawingState();this.manager.change(e)}},{key:"attack",value:function(){}},{key:"escape",value:function(){var e=this.manager.createEscapeState();this.manager.change(e)}},{key:"death",value:function(){if(Ludex.Utils.Valid.isDebugger()){var e=this.manager.createDeathState();this.manager.change(e)}}},{key:"finish",value:function(){}},{key:"update",value:function(){}}]),r}(zm);N._RF.pop(),N._RF.push({},"bb0e3beWSxOOLCv7gjyg2s0","StateManager",void 0);var wg,Eg,Ag,Tg,Rg,Lg,Pg,_g,Bg,Dg,Og,Ig,Ng,Fg,zg,xg=(0,z.ccclass)("StateManager")(kg=function(e){n(r,e);var t=i(r);function r(){return a(this,r),t.apply(this,arguments)}return o(r,[{key:"init",value:function(){this.state=new Sg(this)}},{key:"change",value:function(e){this.state=e}},{key:"load",value:function(){this.state&&this.state.load()}},{key:"initialize",value:function(){this.state&&this.state.initialize()}},{key:"isInitialize",value:function(){return this.state instanceof vg}},{key:"ready",value:function(){this.state&&this.state.ready()}},{key:"isReady",value:function(){return this.state instanceof Cg}},{key:"draw",value:function(){this.state&&this.state.draw()}},{key:"isDrawing",value:function(){return this.state instanceof Um}},{key:"attack",value:function(){this.state&&this.state.attack()}},{key:"isAttacking",value:function(){return this.state instanceof xm}},{key:"escape",value:function(){this.state&&this.state.escape()}},{key:"isSurviving",value:function(){return this.state instanceof Vm}},{key:"death",value:function(){this.state&&this.state.death()}},{key:"isFailed",value:function(){return this.state instanceof Mm}},{key:"finish",value:function(){this.state&&this.state.finish()}},{key:"isFinished",value:function(){return this.state instanceof rg}},{key:"update",value:function(e){this.state&&this.state.update(e)}},{key:"createInitializeState",value:function(){return new vg(this)}},{key:"createLoadingState",value:function(){return new Sg(this)}},{key:"createReadyState",value:function(){return new Cg(this)}},{key:"createDrawingState",value:function(){return new Um(this)}},{key:"createAttackingState",value:function(){return new xm(this)}},{key:"createEscapeState",value:function(){return new Vm(this)}},{key:"createDeathState",value:function(){return new Mm(this)}},{key:"createFinishState",value:function(){return new rg(this)}}]),r}(U))||kg;N._RF.pop(),N._RF.push({},"9e40aEq56tMKLFoeACyl+eH","Clock",void 0);var Gg,Mg,Ug,Hg,jg,Wg,Vg,$g,qg=z.ccclass,Kg=z.disallowMultiple,Yg=z.property,Jg=(wg=qg("Clock"),Eg=Yg(oe),Ag=Yg(ie),Tg=Yg(Y),Rg=Yg(ie),Lg=Yg(ie),Pg=Yg(x),wg(_g=Kg((Dg=l((Bg=function(e){n(r,e);var t=i(r);function r(){var e;a(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),u(e,"timeText",Dg,c(e)),u(e,"clockContainer",Og,c(e)),u(e,"clockFill",Ig,c(e)),u(e,"successIcon",Ng,c(e)),u(e,"failIcon",Fg,c(e)),u(e,"animation",zg,c(e)),e.time=0,e.remaining=0,e.running=!1,e.timeShake=0,e.remainingToShake=0,e.handleUpdateConfig=function(t){e.enabled&&e.setTime(t.WaitForPassSecs)},e}return o(r,[{key:"__preload",value:function(){this.listenEvents()}},{key:"start",value:function(){this.init(),this.setTime(6),this.setTimeToShake(1)}},{key:"init",value:function(){this.remaining=0,this.running=!1,this.node.active=!1}},{key:"listenEvents",value:function(){this.node.scene.on(f.GAMEPLAY_UPDATE_CONFIG,this.handleUpdateConfig)}},{key:"setTime",value:function(e){this.time=e,this.timeText.string=Math.ceil(e).toString()}},{key:"setTimeToShake",value:function(e){this.timeShake=e,this.remainingToShake=0}},{key:"startCountdown",value:function(){this.running=!0,this.remaining=this.time,this.remainingToShake=this.timeShake,this.node.active=!0,this.failIcon.active=!1,this.successIcon.active=!1}},{key:"pause",value:function(){this.running=!1}},{key:"resume",value:function(){this.running=!0}},{key:"showUncompletedMark",value:function(){this.failIcon.active=!0,q(this.failIcon).set({scale:new te(0,0,1)}).to(.5,{scale:new te(1,1,1)},{easing:"smooth"}).start()}},{key:"showCompletedMark",value:function(){this.successIcon.active=!0,q(this.successIcon).set({scale:new te(0,0,1)}).to(.5,{scale:new te(1,1,1)},{easing:"smooth"}).start()}},{key:"endCountDown",value:function(){this.running=!1,this.node.scene.emit(sr.TIME_OUT)}},{key:"update",value:function(e){this.running&&(this.remaining<=0?this.endCountDown():(this.remainingToShake<=0&&(this.playShakeAnimation(),this.remainingToShake=this.timeShake),this.remaining-=e,this.remainingToShake-=e,this.updateLabel(),this.clockFill.fillRange=this.remaining/this.time))}},{key:"updateLabel",value:function(){var e=Math.ceil(this.remaining).toString();this.timeText.string=e}},{key:"playShakeAnimation",value:function(){var e="Shake";this.animation.clips.some((function(t){return!(!t||t.name!==e)}))?this.animation.play(e):console.warn("SettingsScreen: clip not found")}}]),r}(U)).prototype,"timeText",[Eg],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Og=l(Bg.prototype,"clockContainer",[Ag],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ig=l(Bg.prototype,"clockFill",[Tg],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ng=l(Bg.prototype,"successIcon",[Rg],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Fg=l(Bg.prototype,"failIcon",[Lg],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),zg=l(Bg.prototype,"animation",[Pg],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_g=Bg))||_g)||_g);N._RF.pop(),N._RF.push({},"7c115t9HKlH6ZfnhCnLAnpe","Star",void 0);var Xg,Zg,Qg,eb,tb,nb,ib,ab,ob,rb,sb,lb=z.ccclass,ub=z.property,cb=z.requireComponent,hb=(Gg=lb("Star"),Mg=cb(x),Ug=ub(U),Hg=ub(x),Gg(jg=Mg((Vg=l((Wg=function(e){n(r,e);var t=i(r);function r(){var e;a(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),u(e,"starAppearance",Vg,c(e)),u(e,"animation",$g,c(e)),e.isAppear=!1,e.initialPosition=new te,e}return o(r,[{key:"onLoad",value:function(){this.initialPosition=this.node.position.clone(),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){Nt.lazyValidateProperties(this)}},{key:"resetPosition",value:function(){this.node.setPosition(this.initialPosition)}},{key:"show",value:function(){this.starAppearance.node.active=!0,this.isAppear=!0}},{key:"hide",value:function(){this.starAppearance.node.active=!1,this.isAppear=!1}},{key:"playAnimation",value:function(){this.animation.stop();this.animation.clips.some((function(e){return!(!e||"UpAndDown"!==e.name)}))?this.animation.play("UpAndDown"):console.warn("SettingsScreen: clip not found")}},{key:"stopAnimation",value:function(){this.animation.stop()}}]),r}(U)).prototype,"starAppearance",[Ug],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$g=l(Wg.prototype,"animation",[Hg],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),jg=Wg))||jg)||jg);N._RF.pop(),N._RF.push({},"09f0bRvi+1OQZiIGBFqdNzq","LevelProgressBar",void 0);var db,pb,yb,vb,fb,mb,gb,bb,Sb,kb,Cb,wb,Eb,Ab,Tb,Rb,Lb,Pb=z.ccclass,_b=z.property,Bb=(Xg=Pb("LevelProgressBar"),Zg=_b(Ge),Qg=_b(hb),eb=_b(hb),tb=_b(hb),Xg((ab=l((ib=function(e){n(r,e);var t=i(r);function r(){var e;a(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),u(e,"progressBar",ab,c(e)),u(e,"leftStar",ob,c(e)),u(e,"midStar",rb,c(e)),u(e,"rightStar",sb,c(e)),e.toProgress=1,e.progressStep=0,e}return o(r,[{key:"onLoad",value:function(){this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){Nt.lazyValidateProperties(this)}},{key:"start",value:function(){this.toProgress=1,this.progressStep=0,this.runStartsAnimation()}},{key:"update",value:function(){var e=this.progressBar.getComponent(Y);e&&(this.progressBar.progress>=1?e.type=Y.Type.SIMPLE:e.type=Y.Type.TILED),this.progressBar.progress-this.progressStep<this.toProgress?this.progressBar.progress!==this.toProgress&&(this.progressBar.progress=this.toProgress):this.progressBar.progress-=this.progressStep}},{key:"runStartsAnimation",value:function(){this.leftStar.isAppear&&this.midStar.isAppear&&this.rightStar.isAppear||(this.leftStar.show(),this.midStar.show(),this.rightStar.show(),this.runStarAnimation(this.leftStar),this.runStarAnimation(this.midStar),this.runStarAnimation(this.rightStar))}},{key:"runStarAnimation",value:function(e){e.resetPosition(),e.playAnimation()}},{key:"stopStarAnimation",value:function(e){e.isAppear&&(e.hide(),e.stopAnimation(),e.resetPosition(),S.playSound(Zn.LOST_STAR_IN_GAMEPLAY))}},{key:"setProgress",value:function(e){this.toProgress=e/100,this.progressStep=(this.progressBar.progress-this.toProgress)/60*16}},{key:"setStars",value:function(e){switch(e){case 1:this.stopStarAnimation(this.rightStar),this.stopStarAnimation(this.midStar);break;case 2:this.stopStarAnimation(this.rightStar);break;default:this.runStartsAnimation()}}},{key:"reset",value:function(){this.progressBar.progress=1}}]),r}(U)).prototype,"progressBar",[Zg],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ob=l(ib.prototype,"leftStar",[Qg],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rb=l(ib.prototype,"midStar",[eb],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),sb=l(ib.prototype,"rightStar",[tb],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nb=ib))||nb);N._RF.pop(),N._RF.push({},"61791zAr2tJR4p22EZ5QRfk","Header",void 0);var Db,Ob,Ib,Nb,Fb,zb,xb,Gb,Mb,Ub,Hb,jb,Wb,Vb,$b,qb,Kb,Yb,Jb,Xb,Zb,Qb,eS,tS,nS,iS,aS,oS,rS,sS,lS,uS,cS,hS,dS,pS,yS,vS,fS,mS,gS,bS,SS,kS,CS,wS,ES,AS,TS,RS,LS,PS,_S,BS=z.ccclass,DS=z.property,OS=codex,IS=OS.language,NS=OS.player,FS=(db=BS("Header"),pb=DS(oe),yb=DS(Bb),vb=DS(Gt),fb=DS(ie),mb=DS(ie),gb=DS(ie),bb=DS(ie),db((Cb=l((kb=function(e){n(l,e);var r,s=i(l);function l(){var e;a(this,l);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return e=s.call.apply(s,[this].concat(n)),u(e,"levelText",Cb,c(e)),u(e,"levelProgressBar",wb,c(e)),u(e,"hintBubbleAnim",Eb,c(e)),u(e,"pauseNode",Ab,c(e)),u(e,"replayNode",Tb,c(e)),u(e,"hintNode",Rb,c(e)),u(e,"skipNode",Lb,c(e)),e.handlePlayBubble=function(){e.hintBubbleAnim.play(),e.startCountDownHintBubble()},e}return o(l,[{key:"onLoad",value:function(){this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){Nt.lazyValidateProperties(this)}},{key:"handleClickedPauseGame",value:function(){this.showSettingScreen(),this.node.scene.emit(sr.GAME_PAUSE)}},{key:"handleClickedReplayGame",value:function(){var e,t=(null!==(e=NS.getGameData())&&void 0!==e?e:{}).level,n=void 0===t?1:t;this.node.scene.emit(sr.GAME_REPLAY,{level:n})}},{key:"handleClickedHintGame",value:function(){this.node.scene.emit(sr.SHOW_HINT)}},{key:"handleClickedSkipLevel",value:(r=t((function*(){this.node.scene.emit(sr.SKIP_LEVEL)})),function(){return r.apply(this,arguments)})},{key:"showSettingScreen",value:function(){L.openScreen(P.SETTINGS_SCREEN,{})}},{key:"setLevelText",value:function(e){var t=IS.getText("game.level");this.levelText.string="".concat(t," ").concat(e)}},{key:"setProgress",value:function(e){this.levelProgressBar.setProgress(e)}},{key:"setProgressStars",value:function(e){this.levelProgressBar.setStars(e)}},{key:"startCountDownHintBubble",value:function(){this.schedule(this.handlePlayBubble,30)}},{key:"stopCountDownHintBubble",value:function(){this.unschedule(this.handlePlayBubble)}},{key:"disableButtons",value:function(){this.enableBtnNode(this.pauseNode,!1,!0),this.enableBtnNode(this.replayNode,!1,!0),this.enableBtnNode(this.hintNode,!1,!0),this.enableBtnNode(this.skipNode,!1,!0)}},{key:"enableButtons",value:function(){this.enableBtnNode(this.pauseNode,!0,!0),this.enableBtnNode(this.replayNode,!0,!0),this.enableBtnNode(this.hintNode,!0,!0),this.enableBtnNode(this.skipNode,!0,!0)}},{key:"disableRewardAdsButton",value:function(){this.enableBtnNode(this.hintNode,!1,!1),this.enableBtnNode(this.skipNode,!1,!1)}},{key:"disableHintButton",value:function(){this.enableBtnNode(this.hintNode,!1,!0)}},{key:"enableBtnNode",value:function(e,t,n){var i=e.getComponent(Z);if(i&&(i.interactable=t),e.active=n,n){var a=e.getComponent(Yi);a&&a.changeState(t)}}}]),l}(U)).prototype,"levelText",[pb],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),wb=l(kb.prototype,"levelProgressBar",[yb],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Eb=l(kb.prototype,"hintBubbleAnim",[vb],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ab=l(kb.prototype,"pauseNode",[fb],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Tb=l(kb.prototype,"replayNode",[mb],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Rb=l(kb.prototype,"hintNode",[gb],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Lb=l(kb.prototype,"skipNode",[bb],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Sb=kb))||Sb);N._RF.pop(),N._RF.push({},"151afQBVDpOYpTjtwP+wYH+","DevTools",void 0);var zS,xS,GS,MS,US,HS,jS,WS,VS,$S=z.ccclass,qS=z.property,KS=(Db=$S("DevToolsContainer"),Ob=qS(ie),Ib=qS(ie),Nb=qS(ie),Fb=qS(ie),zb=qS(ie),xb=qS(ie),Gb=qS(ie),Mb=qS(ie),Ub=qS(ie),Hb=qS(ie),jb=qS(ie),Wb=qS(ie),Vb=qS(ie),$b=qS(ie),qb=qS(ie),Kb=qS(ie),Yb=qS(ie),Jb=qS(ie),Xb=qS(ie),Zb=qS(ie),Qb=qS(ie),eS=qS(ie),tS=qS(ie),nS=qS(ie),iS=qS(ie),Db((rS=l((oS=function(e){n(r,e);var t=i(r);function r(){var e;a(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),u(e,"devToolsButton",rS,c(e)),u(e,"winLevelButton",sS,c(e)),u(e,"loseLevelButton",lS,c(e)),u(e,"buildVersionButton",uS,c(e)),u(e,"prevLevelButton",cS,c(e)),u(e,"nextLevelButton",hS,c(e)),u(e,"selectLevelButton",dS,c(e)),u(e,"hintButton",pS,c(e)),u(e,"physicButton",yS,c(e)),u(e,"bundleButton",vS,c(e)),u(e,"beehiveButton",fS,c(e)),u(e,"dogeButton",mS,c(e)),u(e,"thornBallButton",gS,c(e)),u(e,"bigBeeButton",bS,c(e)),u(e,"thornButton",SS,c(e)),u(e,"airFanButton",kS,c(e)),u(e,"brickButton",CS,c(e)),u(e,"grassButton",wS,c(e)),u(e,"grassDarkButton",ES,c(e)),u(e,"lineButton",AS,c(e)),u(e,"poisonButton",TS,c(e)),u(e,"poisonSurfaceButton",RS,c(e)),u(e,"waterButton",LS,c(e)),u(e,"dangerAreaButton",PS,c(e)),u(e,"dashboardButton",_S,c(e)),e.isActive=!0,e.gameplay=null,e.gameObjects=null,e.currentSpawnObjId=-1,e.handleClickDashboardButton=function(){_.switchToDashboardScene()},e.handleClickDevToolsButton=function(){e.isActive?(e.hideAllButtons(),e.isActive=!1):(e.showAllButtons(),e.isActive=!0)},e.handleClickPrevLevelButton=function(){var t=e.getCurrentLevel();t&&e.node.scene.emit(sr.SELECT_LEVEL,{level:t-1})},e.handleClickNextLevelButton=function(){var t=e.getCurrentLevel();t&&e.node.scene.emit(sr.SELECT_LEVEL,{level:t+1})},e.handleClickHintButton=function(){e.node.scene.emit(sr.SHOW_HINT,{noAd:!0})},e.handleClickBuildVersionButton=function(){L.showNotificationScreen("Build version: Ludex")},e.handleClickPhysicButton=function(){var e=Me.Aabb,t=Me.Pair,n=Me.CenterOfMass,i=Me.Joint,a=Me.Shape;Ne.instance.debugDrawFlags=e|t|n|i|a},e.handleClickWinLevelButton=function(){e.node.scene.emit(sr.DOGE_SURVIVE)},e.handleClickLoseLevelButton=function(){e.node.scene.emit(sr.DOGE_DIE)},e.handleClickBeehiveButton=function(){e.currentSpawnObjId=td.BEEHIVE_A,e.handleSpawnObject()},e.handleClickDogeButton=function(){e.currentSpawnObjId=td.DOGE_A,e.handleSpawnObject()},e.handleClickThornBallButton=function(){e.currentSpawnObjId=td.THORN_BALL,e.handleSpawnObject()},e.handleClickBigBeeButton=function(){e.currentSpawnObjId=td.BIG_BEE,e.handleSpawnObject()},e.handleClickThornButton=function(){e.currentSpawnObjId=td.THORN,e.handleSpawnObject()},e.handleClickAirFanButton=function(){e.currentSpawnObjId=td.AIR_FAN,e.handleSpawnObject()},e.handleClickBrickButton=function(){e.currentSpawnObjId=td.BRICK,e.handleSpawnPolygonObject()},e.handleClickGrassButton=function(){e.currentSpawnObjId=td.GRASS,e.handleSpawnPolygonObject()},e.handleClickGrassDarkButton=function(){e.currentSpawnObjId=td.GRASS_DARK,e.handleSpawnPolygonObject()},e.handleClickLineButton=function(){e.currentSpawnObjId=td.LINE,e.handleSpawnPolygonObject()},e.handleClickPoisonButton=function(){e.currentSpawnObjId=td.POISON,e.handleSpawnPolygonObject()},e.handleClickPoisonSurfaceButton=function(){e.currentSpawnObjId=td.POISON_SURFACE,e.handleSpawnPolygonObject()},e.handleClickWaterButton=function(){e.currentSpawnObjId=td.WATER,e.handleSpawnPolygonObject()},e.handleClickDangerAreaButton=function(){e.currentSpawnObjId=td.DANGER_AREA,e.handleSpawnPolygonObject()},e}return o(r,[{key:"start",value:function(){this.handleToggleDevToolsButton(),this.handleGameLevelButtons(),this.handleItemButtons(),this.handleEngineButtons(),this.handleSpawnObjectButtons(),this.handleSwitchSceneButtons()}},{key:"handleToggleDevToolsButton",value:function(){this.devToolsButton.on(ie.EventType.TOUCH_START,this.handleClickDevToolsButton)}},{key:"handleGameLevelButtons",value:function(){this.winLevelButton.on(ie.EventType.TOUCH_START,this.handleClickWinLevelButton),this.loseLevelButton.on(ie.EventType.TOUCH_START,this.handleClickLoseLevelButton),this.prevLevelButton.on(ie.EventType.TOUCH_START,this.handleClickPrevLevelButton),this.nextLevelButton.on(ie.EventType.TOUCH_START,this.handleClickNextLevelButton)}},{key:"handleItemButtons",value:function(){this.hintButton.on(ie.EventType.TOUCH_START,this.handleClickHintButton)}},{key:"handleEngineButtons",value:function(){this.buildVersionButton.on(ie.EventType.TOUCH_START,this.handleClickBuildVersionButton),this.physicButton.on(ie.EventType.TOUCH_START,this.handleClickPhysicButton),this.bundleButton.on(ie.EventType.TOUCH_START,this.handleSwitchBundle)}},{key:"handleSpawnObjectButtons",value:function(){this.beehiveButton.on(ie.EventType.TOUCH_START,this.handleClickBeehiveButton),this.dogeButton.on(ie.EventType.TOUCH_START,this.handleClickDogeButton),this.thornBallButton.on(ie.EventType.TOUCH_START,this.handleClickThornBallButton),this.bigBeeButton.on(ie.EventType.TOUCH_START,this.handleClickBigBeeButton),this.thornButton.on(ie.EventType.TOUCH_START,this.handleClickThornButton),this.airFanButton.on(ie.EventType.TOUCH_START,this.handleClickAirFanButton),this.brickButton.on(ie.EventType.TOUCH_START,this.handleClickBrickButton),this.grassButton.on(ie.EventType.TOUCH_START,this.handleClickGrassButton),this.grassDarkButton.on(ie.EventType.TOUCH_START,this.handleClickGrassDarkButton),this.lineButton.on(ie.EventType.TOUCH_START,this.handleClickLineButton),this.poisonButton.on(ie.EventType.TOUCH_START,this.handleClickPoisonButton),this.poisonSurfaceButton.on(ie.EventType.TOUCH_START,this.handleClickPoisonSurfaceButton,this),this.waterButton.on(ie.EventType.TOUCH_START,this.handleClickWaterButton),this.dangerAreaButton.on(ie.EventType.TOUCH_START,this.handleClickDangerAreaButton)}},{key:"handleSwitchSceneButtons",value:function(){this.dashboardButton.on(ie.EventType.TOUCH_START,this.handleClickDashboardButton)}},{key:"injectGameplay",value:function(e){this.gameplay=e,this.gameObjects=e.gameObjects}},{key:"hideAllButtons",value:function(){var e=this;this.getComponentsInChildren(Z).forEach((function(t){t.node.name!==e.devToolsButton.name&&(t.node.active=!1)}))}},{key:"showAllButtons",value:function(){var e=this;this.getComponentsInChildren(Z).forEach((function(t){t.node.name!==e.devToolsButton.name&&(t.node.active=!0)}))}},{key:"getCurrentLevel",value:function(){if(!this.gameplay)return null;var e=this.gameplay.getGameData();return e&&e.level||null}},{key:"handleEnterSelectLevel",value:function(e){var t=Number(e.string);this.node.scene.emit(sr.SELECT_LEVEL,{level:t})}},{key:"handleSpawnObject",value:function(){var e;if(this.validateRequiredComponents(),-1!==this.currentSpawnObjId){var t={x:Math.floor(40*Math.random()),y:Math.floor(40*Math.random())},n={id:this.currentSpawnObjId,point:t};null===(e=this.gameObjects)||void 0===e||e.spawnObjectForDevTools(n)}}},{key:"handleSpawnPolygonObject",value:function(){var e;if(this.validateRequiredComponents(),-1!==this.currentSpawnObjId){var t={x:Math.floor(40*Math.random()),y:Math.floor(40*Math.random())},n={x:t.x+Math.floor(10*Math.random()),y:t.y},i={x:t.x,y:t.y+Math.floor(10*Math.random())},a=[t,n,i,{x:n.x,y:i.y}],o={id:this.currentSpawnObjId,point:a};null===(e=this.gameObjects)||void 0===e||e.spawnPolygonObjectForDevTools(o)}}},{key:"validateRequiredComponents",value:function(){Nt.lazyValidateProperties(this)}},{key:"handleSwitchBundle",value:function(){J.emit(f.REQUEST_UPGRADE_ASSET)}}]),r}(U)).prototype,"devToolsButton",[Ob],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),sS=l(oS.prototype,"winLevelButton",[Ib],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),lS=l(oS.prototype,"loseLevelButton",[Nb],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),uS=l(oS.prototype,"buildVersionButton",[Fb],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cS=l(oS.prototype,"prevLevelButton",[zb],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),hS=l(oS.prototype,"nextLevelButton",[xb],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),dS=l(oS.prototype,"selectLevelButton",[Gb],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pS=l(oS.prototype,"hintButton",[Mb],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yS=l(oS.prototype,"physicButton",[Ub],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vS=l(oS.prototype,"bundleButton",[Hb],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fS=l(oS.prototype,"beehiveButton",[jb],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),mS=l(oS.prototype,"dogeButton",[Wb],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gS=l(oS.prototype,"thornBallButton",[Vb],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bS=l(oS.prototype,"bigBeeButton",[$b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),SS=l(oS.prototype,"thornButton",[qb],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),kS=l(oS.prototype,"airFanButton",[Kb],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),CS=l(oS.prototype,"brickButton",[Yb],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),wS=l(oS.prototype,"grassButton",[Jb],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ES=l(oS.prototype,"grassDarkButton",[Xb],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),AS=l(oS.prototype,"lineButton",[Zb],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),TS=l(oS.prototype,"poisonButton",[Qb],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),RS=l(oS.prototype,"poisonSurfaceButton",[eS],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),LS=l(oS.prototype,"waterButton",[tS],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),PS=l(oS.prototype,"dangerAreaButton",[nS],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_S=l(oS.prototype,"dashboardButton",[iS],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),aS=oS))||aS);N._RF.pop(),N._RF.push({},"a3b0f6zU+1D97PyszsgST1H","UIManager",void 0);var YS,JS,XS,ZS,QS,ek,tk,nk,ik,ak,ok,rk,sk=z.ccclass,lk=z.property,uk=Ludex.Utils,ck=(zS=sk("UIManager"),xS=lk(Jg),GS=lk(FS),MS=lk(KS),zS((jS=l((HS=function(e){n(r,e);var t=i(r);function r(){var e;a(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),u(e,"clock",jS,c(e)),u(e,"header",WS,c(e)),u(e,"devTools",VS,c(e)),e.showDevTools=function(){e.devTools&&(e.devTools.node.active=!0)},e}return o(r,[{key:"onLoad",value:function(){this.validateRequiredComponents(),this.listensDevToolsEvents()}},{key:"validateRequiredComponents",value:function(){Nt.lazyValidateProperties(this)}},{key:"listensDevToolsEvents",value:function(){this.node.scene.on(mh.Events.UNLOCK_DEV_TOOLS,this.showDevTools)}},{key:"initDevTools",value:function(e){this.devTools&&(this.devTools.node.active=uk.Valid.isDebugger(),this.devTools.injectGameplay(e))}},{key:"setLevelText",value:function(e){this.header.setLevelText(e)}},{key:"initCountdown",value:function(){this.clock.init()}},{key:"startCountdown",value:function(){this.clock.startCountdown()}},{key:"pauseCountdown",value:function(){this.clock.pause()}},{key:"resumeCountdown",value:function(){this.clock.resume()}},{key:"showUncompletedMark",value:function(){this.clock.showUncompletedMark()}},{key:"showCompletedMark",value:function(){this.clock.showCompletedMark()}},{key:"setProgressBarPercentage",value:function(e){this.header.setProgress(e)}},{key:"setProgressStars",value:function(e){this.header.setProgressStars(e)}},{key:"startCountDownHeaderHintBubbleAnim",value:function(){this.header.startCountDownHintBubble()}},{key:"stopCountDownHeaderHintBubbleAnim",value:function(){this.header.stopCountDownHintBubble()}},{key:"disableUI",value:function(){this.header.disableButtons()}},{key:"enableUI",value:function(){this.header.enableButtons()}},{key:"disableHintButton",value:function(){this.header.disableHintButton()}},{key:"disableRewardAdsUI",value:function(){this.header.disableRewardAdsButton()}}]),r}(U)).prototype,"clock",[xS],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),WS=l(HS.prototype,"header",[GS],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),VS=l(HS.prototype,"devTools",[MS],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),US=HS))||US);N._RF.pop(),N._RF.push({},"157f203vjtMma2FDvAlyM6h","Gameplay",void 0);var hk,dk=z.ccclass,pk=z.requireComponent,yk=z.property,vk=codex,fk=vk.player,mk=(vk.analytics,YS=dk("Gameplay"),JS=pk([xg,Fm,Nm]),XS=yk(um),ZS=yk(Om),QS=yk(Tm),ek=yk(im),YS(tk=JS((ik=l((nk=function(e){n(s,e);var r=i(s);function s(){var e;a(this,s);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=r.call.apply(r,[this].concat(i))).gameStartCount=0,u(e,"hint",ik,c(e)),u(e,"gameMap",ak,c(e)),u(e,"lineDrawer",ok,c(e)),u(e,"gameObjects",rk,c(e)),e.gameData=null,e.defaultData=null,e.handleStartGame=function(t){if(!t)throw new Error("handleStartGame: GameEvent payload is not defined");e.setGameData(t),e.stateManager.draw()},e.handlePauseGame=function(t){e.pauseGame(),S.pauseSound(Zn.BEE_FLYING),e.processCrazyGamesGameplayStop()},e.handleResumeGame=function(t){e.resumeGame(),S.resumeSound(Zn.BEE_FLYING),e.processCrazyGamesGameplayStart()},e.handleReplayGame=function(t){var n=d(d({},e.defaultData),t);e.setGameData(n),e.stateManager.initialize()},e.handleNextLevel=function(t){e.gameData&&(e.updatePlayerLevelProgress(t),e.stateManager.load(),e.attemptCallCreateShortcut())},e.updatePlayerLevelProgress=function(t){if(e.gameData){if(!t)throw new Error("handleNextLevel: GameEvent payload is not defined");var n=e.gameData,i=n.level,a=n.nextLevelCount,o=void 0===a?0:a,r=t.level,s=void 0===r?i:r;if(!s)throw new Error("Level is not defined");var l=s+1;fk.setGameData({level:l});var u=d(d(d({},e.defaultData),t),{},{level:l,nextLevelCount:o+1});e.setGameData(u)}},e.handleStartOver=function(t){fk.setGameData({level:1});var n=d(d(d({},e.defaultData),t),{},{level:1});e.setGameData(n),e.stateManager.load()},e.handleSelectLevel=function(t){if(!t)throw new Error("handleSelectLevel: GameEvent payload is not defined");var n=t.level;if(n){var i=d(d(d({},e.defaultData),t),{},{level:n});fk.setGameData({level:n}),e.setGameData(i),e.stateManager.load()}},e.handleClockTimeout=function(t){e.stateManager.escape()},e.handleDrawing=function(t){if(!t)throw new Error("handleDrawing: GameEvent payload is not defined");e.setGameData(t)},e.handleBeeDie=function(t){var n;(null===(n=e.gameObjects)||void 0===n?void 0:n.checkAllBeeDie())&&(e.stateManager.escape(),e.processCrazyGamesHappyTime())},e.handleBigBeeDie=function(t){var n;(null===(n=e.gameObjects)||void 0===n?void 0:n.checkAllBeeDie())&&(e.stateManager.escape(),e.processCrazyGamesHappyTime())},e.handleBeeAttack=function(t){e.stateManager.attack()},e.handleDogeDie=function(t){e.stateManager.death()},e.handleDogeSurvive=function(t){e.stateManager.escape()},e.handleShowHint=function(){var n=t((function*(t){var n,i,a;if((null===(n=e.hint)||void 0===n||!n.getIsHintShow())&&e.stateManager.isReady()){var o=(null!=t?t:{}).noAd,r=void 0!==o&&o;if(e.uiManager.stopCountDownHeaderHintBubbleAnim(),!r)if(!(yield w.showRewardVideoAdAsync()))return;var s=(null!==(i=e.gameData)&&void 0!==i?i:{}).levelData;if(!s)throw new Error("Level data is not defined");var l=s.tips,u=Qf.transformPointsFromMapToDrawAreaCoordinate(l);null===(a=e.hint)||void 0===a||a.showHint(u,!1)}}));return function(e){return n.apply(this,arguments)}}(),e.handleSkipLevel=function(){var n=t((function*(t){e.stateManager.isReady()&&((yield w.showRewardVideoAdAsync())&&e.node.scene.emit(sr.DOGE_SURVIVE),e.node.scene.emit(sr.GAME_RESUME))}));return function(e){return n.apply(this,arguments)}}(),e}return o(s,[{key:"__preload",value:function(){this.initComponents(),this.validateRequiredComponents(),this.listenInputEvents(),w.showBannerAds(),pg.init()}},{key:"initComponents",value:function(){this.initUIManager(),this.initStateManager(),this.initInputController(),this.initInkCapacityController()}},{key:"initUIManager",value:function(){var e;this.uiManager=null===(e=this.node.parent)||void 0===e?void 0:e.getComponentInChildren(ck)}},{key:"initStateManager",value:function(){this.stateManager=this.getComponent(xg)}},{key:"initInputController",value:function(){this.inputController=this.getComponent(Fm)}},{key:"initInkCapacityController",value:function(){this.inkCapacityController=this.getComponent(Nm)}},{key:"validateRequiredComponents",value:function(){Nt.lazyValidateProperties(this)}},{key:"listenInputEvents",value:function(){this.node.scene.on(sr.GAME_START,this.handleStartGame),this.node.scene.on(sr.GAME_PAUSE,this.handlePauseGame),this.node.scene.on(sr.GAME_RESUME,this.handleResumeGame),this.node.scene.on(sr.GAME_REPLAY,this.handleReplayGame),this.node.scene.on(sr.NEXT_LEVEL,this.handleNextLevel),this.node.scene.on(sr.UPDATE_LEVEL,this.updatePlayerLevelProgress),this.node.scene.on(sr.START_OVER,this.handleStartOver),this.node.scene.on(sr.SELECT_LEVEL,this.handleSelectLevel),this.node.scene.on(sr.TIME_OUT,this.handleClockTimeout),this.node.scene.on(sr.DRAWING,this.handleDrawing),this.node.scene.on(sr.BEE_DIE,this.handleBeeDie),this.node.scene.on(sr.BIG_BEE_DIE,this.handleBigBeeDie),this.node.scene.on(sr.BEE_ATTACK,this.handleBeeAttack),this.node.scene.on(sr.DOGE_DIE,this.handleDogeDie),this.node.scene.on(sr.DOGE_SURVIVE,this.handleDogeSurvive),this.node.scene.on(sr.SHOW_HINT,this.handleShowHint),this.node.scene.on(sr.SKIP_LEVEL,this.handleSkipLevel)}},{key:"start",value:function(){this.initData(),this.initGame(),this.initDevTools()}},{key:"initDevTools",value:function(){this.uiManager.initDevTools(this)}},{key:"initData",value:function(){var e,t=(null!==(e=fk.getGameData())&&void 0!==e?e:{}).level,n=void 0===t?1:t;this.defaultData={level:n,gameplayMode:"level",nextLevelCount:0,isFromLoader:!1},this.setGameData(this.defaultData)}},{key:"initGame",value:function(){this.stateManager.init(),this.stateManager.load()}},{key:"setGameData",value:function(e){e&&(this.gameData=d(d({},this.gameData),e))}},{key:"getGameData",value:function(){return this.gameData}},{key:"pauseGame",value:function(){this.node.active=!1,this.node.pauseSystemEvents(!0),this.uiManager.pauseCountdown()}},{key:"resumeGame",value:function(){this.node.active=!0,this.node.resumeSystemEvents(!0),this.uiManager.resumeCountdown()}},{key:"attemptCallCreateShortcut",value:function(){var e,t=null!==(e=this.getGameData())&&void 0!==e?e:{},n=t.level,i=void 0===n?0:n,a=t.nextLevelCount;i<2||(void 0===a?0:a)<2||"checkAndCreateShortcutAsync"in GameSDK.extra&&GameSDK.extra.checkAndCreateShortcutAsync().catch((function(e){console.warn("checkAndCreateShortcutAsync",e)}))}},{key:"processCrazyGamesGameplayStart",value:function(){"gameplayStart"in GameSDK.extra&&GameSDK.extra.gameplayStart()}},{key:"processCrazyGamesGameplayStop",value:function(){"gameplayStop"in GameSDK.extra&&GameSDK.extra.gameplayStop()}},{key:"processCrazyGamesHappyTime",value:function(){"happyTime"in GameSDK.extra&&GameSDK.extra.happyTime()}},{key:"disableRewardAdsItemForCrazyGames",value:function(){"CrazyGames"===GameSDK.getSDKName()&&this.uiManager.disableRewardAdsUI()}}]),s}(U)).prototype,"hint",[XS],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ak=l(nk.prototype,"gameMap",[ZS],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ok=l(nk.prototype,"lineDrawer",[QS],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rk=l(nk.prototype,"gameObjects",[ek],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),tk=nk))||tk)||tk);N._RF.pop(),N._RF.push({},"bfd3fZcEttGVawFb2B3Gmqu","DangerArea",void 0);var gk,bk,Sk,kk,Ck,wk,Ek,Ak,Tk,Rk,Lk,Pk,_k,Bk,Dk;(0,z.ccclass)("DangerArea")(hk=function(e){n(r,e);var t=i(r);function r(){var e;a(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).useBatch=!1,e.dangerPolygons=[],e}return o(r,[{key:"addDangerAreaPolygon",value:function(e){this.dangerPolygons.push(e)}},{key:"addRigidBody",value:function(){var e=this.node.addComponent(Se);e?(e.group=nd.MAIN_OBJECT,e.type=be.Static):console.warn("Cannot add RigidBody2D")}},{key:"applyColliderForBatchDraw",value:function(){var e,t=this.dangerPolygons.map((function(e){return e.map((function(e){var t=e.x,n=e.y;return new ve(t,n)}))})),n=s(t);try{for(n.s();!(e=n.n()).done;){var i=e.value,a=new ie;a.name=qh.DANGER_AREA,this.node.addChild(a),a.setPosition(0,0);var o=a.addComponent(Se);o.type=be.Static,o.group=nd.MAIN_OBJECT;var r=a.addComponent(De);r.points=i,r.apply()}}catch(e){n.e(e)}finally{n.f()}}},{key:"batchDrawAllDangerAreas",value:function(){if(!(this.dangerPolygons.length<1)){var e=this.node.getComponent(Dy);if(!e)return console.warn("DangerArea: GraphicsPattern not found"),null;this.addRigidBody(),e.setColor("#fc03036d");var t,n=s(this.dangerPolygons);try{for(n.s();!(t=n.n()).done;){var i=t.value;e.draw(i)}}catch(e){n.e(e)}finally{n.f()}this.applyColliderForBatchDraw()}}}]),r}(U));N._RF.pop(),N._RF.push({},"0daa9+mtbVHG5tVordU0a3q","Spider",void 0);var Ok,Ik,Nk,Fk,zk,xk,Gk,Mk=z.ccclass,Uk=z.property;gk=Mk("Spider"),bk=Uk(ie),Sk=Uk(ie),kk=Uk(ie),Ck=Uk(Ce),wk=Uk(Se),Ek=Uk(se),gk((Rk=l((Tk=function(e){n(r,e);var t=i(r);function r(){var e;a(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),u(e,"spider",Rk,c(e)),u(e,"web",Lk,c(e)),u(e,"silk",Pk,c(e)),e.isStunned=!1,u(e,"spiderCollider",_k,c(e)),u(e,"spiderRigidBody",Bk,c(e)),u(e,"silkGraphics",Dk,c(e)),e.onSpiderCollisionEnter=function(t,n){if(!e.isStunned){e.isStunned=!0,e.spiderRigidBody.linearVelocity=new ve(0,0);var i=e.isLineCollision(n),a=e.isDogeCollision(n);if(i||a){var o=n.node,r=e.spider.addComponent(Ue),s=e.spider.worldPosition,l=o.getComponent(Se);if(i)r.connectedAnchor=n.offset.clone();else{var u=o.worldPosition;r.connectedAnchor=new ve(s.x-u.x,s.y-u.y)}r.connectedBody=l,r.autoCalcDistance=!1,r.maxLength=5,r.collideConnected=!1}}},e}return o(r,[{key:"onLoad",value:function(){this.spiderCollider=this.spider.getComponent(Ce),this.spiderRigidBody=this.spider.getComponent(Se),this.silkGraphics=this.silk.getComponent(se),this.validateRequiredComponents()}},{key:"onDestroy",value:function(){this.spiderCollider.off(we.BEGIN_CONTACT,this.onSpiderCollisionEnter)}},{key:"validateRequiredComponents",value:function(){Nt.lazyValidateProperties(this)}},{key:"start",value:function(){this.enabled=!1,this.isStunned=!1,this.silkOffsetVector=new ve,this.spiderCollider.on(we.BEGIN_CONTACT,this.onSpiderCollisionEnter)}},{key:"update",value:function(){if(this.enabled)if(this.drawSilk(),this.isStunned){var e=this.getVectorDataFromAToB(this.spider.worldPosition,this.web.worldPosition);this.spiderRigidBody.linearVelocity=e.vector.multiplyScalar(5),this.spiderRigidBody.linearDamping=0,this.isSpiderTooCloseToWeb()&&(this.spiderRigidBody.type=be.Static,this.enabled=!1)}else{if(-3===this.spiderRigidBody.linearVelocity.y)return;this.spiderRigidBody.linearVelocity=new ve(0,-3)}}},{key:"drawSilk",value:function(){var e=this.web.position,t=this.spider.position,n=pe.toRadian(this.spider.eulerAngles.z);this.silkGraphics.clear(),this.silkGraphics.moveTo(e.x,e.y),this.silkOffsetVector.set(0,50).rotate(n),this.silkGraphics.lineTo(t.x+this.silkOffsetVector.x,t.y+this.silkOffsetVector.y),this.silkGraphics.stroke()}},{key:"isSpiderTooCloseToWeb",value:function(){var e=this.spider.position,t=this.web.position;return te.distance(e,t)<40}},{key:"isLineCollision",value:function(e){var t=e.node;return t&&t.getComponent(gp)||!1}},{key:"isDogeCollision",value:function(e){var t=e.node;return t&&t.getComponent(Vv)||!1}}]),r}(dd)).prototype,"spider",[bk],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Lk=l(Tk.prototype,"web",[Sk],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Pk=l(Tk.prototype,"silk",[kk],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_k=l(Tk.prototype,"spiderCollider",[Ck],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Bk=l(Tk.prototype,"spiderRigidBody",[wk],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Dk=l(Tk.prototype,"silkGraphics",[Ek],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ak=Tk));N._RF.pop(),N._RF.push({},"8fe7bkzdtdNfY7I8uaDov+b","EndlessHeader",void 0);var Hk,jk,Wk,Vk,$k,qk,Kk,Yk,Jk,Xk,Zk,Qk=z.ccclass,eC=z.property,tC=(Ok=Qk("EndlessHeader"),Ik=eC(ie),Nk=eC(ie),Ok((xk=l((zk=function(e){n(r,e);var t=i(r);function r(){var e;a(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),u(e,"pauseNode",xk,c(e)),u(e,"replayNode",Gk,c(e)),e}return o(r,[{key:"__preload",value:function(){this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){Nt.lazyValidateProperties(this)}},{key:"handleClickedPauseGame",value:function(){this.showSettingScreen(),this.node.scene.emit(sr.GAME_PAUSE)}},{key:"handleClickedReplayGame",value:function(){this.node.scene.emit(sr.GAME_REPLAY)}},{key:"showSettingScreen",value:function(){L.openScreen(P.SETTINGS_SCREEN,{})}},{key:"disableButtons",value:function(){this.enableBtnNode(this.pauseNode,!1,!0),this.enableBtnNode(this.replayNode,!1,!0)}},{key:"enableButtons",value:function(){this.enableBtnNode(this.pauseNode,!0,!0),this.enableBtnNode(this.replayNode,!0,!0)}},{key:"enableBtnNode",value:function(e,t,n){var i=e.getComponent(Z);if(i&&(i.interactable=t),e.active=n,n){var a=e.getComponent(Yi);a&&a.changeState(t)}}}]),r}(U)).prototype,"pauseNode",[Ik],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Gk=l(zk.prototype,"replayNode",[Nk],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Fk=zk))||Fk);N._RF.pop(),N._RF.push({},"bc951s11zREU72nQBqwoD3m","EndlessClock",void 0);var nC,iC,aC,oC,rC,sC,lC,uC,cC,hC,dC,pC=z.ccclass,yC=z.disallowMultiple,vC=z.property,fC=(Hk=pC("EndlessClock"),jk=vC(oe),Wk=vC(oe),Vk=vC(x),$k=vC(Y),Hk(qk=yC((Yk=l((Kk=function(e){n(r,e);var t=i(r);function r(){var e;a(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),u(e,"timeText",Yk,c(e)),u(e,"bestTimeText",Jk,c(e)),u(e,"animation",Xk,c(e)),u(e,"clockFill",Zk,c(e)),e.elapsedTime=0,e.bestTime=0,e.running=!1,e}return o(r,[{key:"__preload",value:function(){this.validateRequiredComponents()}},{key:"start",value:function(){this.animation.stop(),this.clockFill.fillRange=0}},{key:"validateRequiredComponents",value:function(){Nt.lazyValidateProperties(this)}},{key:"getScore",value:function(){return this.elapsedTime}},{key:"getBestScore",value:function(){return Math.max(this.bestTime,this.elapsedTime)}},{key:"setBestScore",value:function(e){this.bestTime=e;var t=Math.floor(e/60),n=Math.floor(e%60),i=t.toString().padStart(2,"0"),a=n.toString().padStart(2,"0");this.bestTimeText.string="".concat(i,":").concat(a)}},{key:"init",value:function(){this.running=!1,this.node.active=!0,this.animation.stop(),this.clockFill.fillRange=0,this.setElapsedTime(0),this.setBestScore(this.bestTime)}},{key:"startCounting",value:function(){this.running=!0,this.node.active=!0,this.animation.play(),this.setElapsedTime(0),this.setBestScore(this.bestTime)}},{key:"stopCounting",value:function(){this.running=!1,this.node.active=!1,this.animation.stop(),this.clockFill.fillRange=0}},{key:"pause",value:function(){this.running=!1,this.animation.pause()}},{key:"resume",value:function(){this.running=!0,this.animation.play()}},{key:"update",value:function(e){this.running&&this.setElapsedTime(this.elapsedTime+e)}},{key:"setElapsedTime",value:function(e){this.elapsedTime=e;var t=Math.floor(this.elapsedTime/60),n=Math.floor(this.elapsedTime%60),i=t.toString().padStart(2,"0"),a=n.toString().padStart(2,"0");this.timeText.string="".concat(i,":").concat(a),this.elapsedTime>this.bestTime&&this.setBestScore(this.elapsedTime)}}]),r}(U)).prototype,"timeText",[jk],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Jk=l(Kk.prototype,"bestTimeText",[Wk],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Xk=l(Kk.prototype,"animation",[Vk],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Zk=l(Kk.prototype,"clockFill",[$k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),qk=Kk))||qk)||qk);N._RF.pop(),N._RF.push({},"346956Nk9hPgpT3ZCsaVr+P","EndlessUIManager",void 0);var mC,gC,bC,SC,kC,CC,wC,EC,AC,TC,RC,LC,PC,_C,BC,DC,OC=z.ccclass,IC=z.property,NC=Ludex.Utils,FC=(nC=OC("EndlessUIManager"),iC=IC(fC),aC=IC(tC),oC=IC(KS),rC=IC(ie),nC((uC=l((lC=function(e){n(r,e);var t=i(r);function r(){var e;a(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),u(e,"clock",uC,c(e)),u(e,"header",cC,c(e)),u(e,"devTools",hC,c(e)),u(e,"tapToStartText",dC,c(e)),e.showDevTools=function(){e.devTools&&(e.devTools.node.active=!0)},e}return o(r,[{key:"onLoad",value:function(){this.validateRequiredComponents(),this.listensDevToolsEvents()}},{key:"validateRequiredComponents",value:function(){Nt.lazyValidateProperties(this)}},{key:"listensDevToolsEvents",value:function(){this.node.scene.on(mh.Events.UNLOCK_DEV_TOOLS,this.showDevTools)}},{key:"initDevTools",value:function(e){this.devTools&&(this.devTools.node.active=NC.Valid.isDebugger(),this.devTools.injectGameplay(e))}},{key:"getBestScore",value:function(){return this.clock.getBestScore()}},{key:"setBestScore",value:function(e){this.clock.setBestScore(e)}},{key:"initCounting",value:function(){this.clock.init()}},{key:"startCounting",value:function(){this.clock.startCounting()}},{key:"stopCounting",value:function(){this.clock.stopCounting()}},{key:"pauseCounting",value:function(){this.clock.pause()}},{key:"resumeCounting",value:function(){this.clock.resume()}},{key:"disableUI",value:function(){this.header.disableButtons()}},{key:"enableUI",value:function(){this.header.enableButtons()}},{key:"showTapToStartText",value:function(){this.tapToStartText.active=!0;var e=this.tapToStartText.getComponent(ae);e.opacity=255,q(e).to(.5,{opacity:0},{easing:"smooth"}).to(.5,{opacity:255},{easing:"smooth"}).union().repeatForever().start()}},{key:"hideTapToStartText",value:function(){var e=this.tapToStartText.getComponent(ae);Ie.stopAllByTarget(e),Ie.stopAllByTarget(this.tapToStartText),this.tapToStartText.active=!1}}]),r}(U)).prototype,"clock",[iC],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cC=l(lC.prototype,"header",[aC],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),hC=l(lC.prototype,"devTools",[oC],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),dC=l(lC.prototype,"tapToStartText",[rC],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),sC=lC))||sC);N._RF.pop(),N._RF.push({},"9d32c879Q1FRIas0BgO+iNP","EndlessGameplay",void 0);var zC=z.ccclass,xC=z.property,GC=z.requireComponent,MC=codex.player,UC=(mC=zC("EndlessGameplay"),gC=GC(W),bC=xC({type:Le,group:"Thorns"}),SC=xC({type:ie,group:"Thorns"}),kC=xC({type:ie,group:"Thorns"}),CC=xC({type:ie,group:"Thorns"}),wC=xC({type:ie,group:"Thorns"}),EC=xC(im),mC(AC=gC((RC=l((TC=function(e){n(r,e);var t=i(r);function r(){var e;a(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).gameData=null,e.defaultData=null,u(e,"thornPrefab",RC,c(e)),u(e,"bottomThorns",LC,c(e)),u(e,"topThorns",PC,c(e)),u(e,"leftThorns",_C,c(e)),u(e,"rightThorns",BC,c(e)),u(e,"gameObjects",DC,c(e)),e.handleStartGame=function(t){if(!t)throw new Error("handleStartGame: GameEvent payload is not defined");e.setGameData(t),e.stateManager.play()},e.handlePauseGame=function(t){e.pauseGame(),S.pauseSound(Zn.BEE_FLYING),e.processCrazyGamesGameplayStop()},e.handleResumeGame=function(t){e.resumeGame(),S.resumeSound(Zn.BEE_FLYING),e.processCrazyGamesGameplayStart()},e.handleReplayGame=function(t){var n=d(d({},e.gameData),t);e.setGameData(n),e.stateManager.initialize(),e.uiManager.showTapToStartText(),e.node.active=!0,e.node.resumeSystemEvents(!0)},e.handleDogeDie=function(){e.stateManager.death(),e.attemptCallCreateShortcut()},e.handleBeeDie=function(t){var n;(null===(n=e.gameObjects)||void 0===n?void 0:n.checkAllBeeDie())&&e.processCrazyGamesHappyTime()},e.handleBigBeeDie=function(t){var n;(null===(n=e.gameObjects)||void 0===n?void 0:n.checkAllBeeDie())&&e.processCrazyGamesHappyTime()},e.handleHideTapToPlayText=function(){e.uiManager.hideTapToStartText()},e}return o(r,[{key:"__preload",value:function(){this.initComponents(),this.uiTransform=this.getComponent(W),this.validateRequiredComponents(),this.listenInputEvents(),w.showBannerAds()}},{key:"initComponents",value:function(){this.initUIManager(),this.initStateManager()}},{key:"initUIManager",value:function(){var e;this.uiManager=null===(e=this.node.parent)||void 0===e?void 0:e.getComponentInChildren(FC)}},{key:"initStateManager",value:function(){this.stateManager=this.getComponent(nw)}},{key:"validateRequiredComponents",value:function(){Nt.lazyValidateProperties(this)}},{key:"listenInputEvents",value:function(){this.node.scene.on(sr.GAME_START,this.handleStartGame),this.node.scene.on(sr.GAME_PAUSE,this.handlePauseGame),this.node.scene.on(sr.GAME_RESUME,this.handleResumeGame),this.node.scene.on(sr.GAME_REPLAY,this.handleReplayGame),this.node.scene.on(sr.BEE_DIE,this.handleBeeDie),this.node.scene.on(sr.BIG_BEE_DIE,this.handleBigBeeDie),this.node.scene.on(sr.DOGE_DIE,this.handleDogeDie)}},{key:"start",value:function(){this.initData(),this.initGame(),this.initObjects(),this.initDevTools(),this.uiManager.startCounting(),this.uiManager.showTapToStartText()}},{key:"initDevTools",value:function(){this.uiManager.initDevTools(this)}},{key:"initData",value:function(){var e,t=null!==(e=MC.getGameData())&&void 0!==e?e:{},n=t.level,i=void 0===n?1:n,a=t.bestEndlessScore,o=void 0===a?0:a;this.defaultData={level:i,bestEndlessScore:o,gameplayMode:"endless",nextLevelCount:0,isFromLoader:!1},this.setGameData(this.defaultData)}},{key:"initGame",value:function(){this.stateManager.init(),this.stateManager.load()}},{key:"setGameData",value:function(e){e&&(this.gameData=d(d({},this.gameData),e))}},{key:"getGameData",value:function(){return this.gameData}},{key:"pauseGame",value:function(){this.node.active=!1,this.node.pauseSystemEvents(!0),this.uiManager.pauseCounting()}},{key:"resumeGame",value:function(){this.node.active=!0,this.node.resumeSystemEvents(!0),this.uiManager.resumeCounting()}},{key:"attemptCallCreateShortcut",value:function(){var e,t=null!==(e=this.gameData)&&void 0!==e?e:{},n=t.level,i=void 0===n?0:n,a=t.nextLevelCount;i<2||(void 0===a?0:a)<2||"checkAndCreateShortcutAsync"in GameSDK.extra&&GameSDK.extra.checkAndCreateShortcutAsync().catch((function(e){console.warn("checkAndCreateShortcutAsync",e)}))}},{key:"initObjects",value:function(){var e=this.createThorn();if(!(e instanceof ie))throw new Error("initObjects: Could not create thorn");var t=e.getComponent(W);if(!(t instanceof W))throw new Error("initObjects: Could not get UITransform of thorn");for(var n=this.uiTransform.getBoundingBoxToWorld(),i=n.width,a=n.height,o=Math.ceil(i/t.width),r=Math.ceil(a/t.height),s=0;s<o;s++)this.topThorns.addChild(this.createThorn()),this.bottomThorns.addChild(this.createThorn());for(var l=0;l<r;l++)this.leftThorns.addChild(this.createThorn()),this.rightThorns.addChild(this.createThorn());this.rightThorns.addChild(e),console.log("initObjects: Done",o,r)}},{key:"getBoundingBox",value:function(){return this.uiTransform.getBoundingBoxToWorld()}},{key:"getDogeSpawnPosition",value:function(){var e=this.uiTransform.getBoundingBoxToWorld().center;return[e.x,e.y]}},{key:"createThorn",value:function(){var e=Pe(this.thornPrefab);return e.name=qh.THORN,e}},{key:"processCrazyGamesGameplayStart",value:function(){"gameplayStart"in GameSDK.extra&&GameSDK.extra.gameplayStart()}},{key:"processCrazyGamesGameplayStop",value:function(){"gameplayStop"in GameSDK.extra&&GameSDK.extra.gameplayStop()}},{key:"processCrazyGamesHappyTime",value:function(){"happyTime"in GameSDK.extra&&GameSDK.extra.happyTime()}}]),r}(U)).prototype,"thornPrefab",[bC],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),LC=l(TC.prototype,"bottomThorns",[SC],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),PC=l(TC.prototype,"topThorns",[kC],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_C=l(TC.prototype,"leftThorns",[CC],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),BC=l(TC.prototype,"rightThorns",[wC],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),DC=l(TC.prototype,"gameObjects",[EC],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),AC=TC))||AC)||AC);N._RF.pop(),N._RF.push({},"43aefNoI9lJxJNh3LPuKYPt","BaseState",void 0);var HC=function(){function e(t){if(a(this,e),this.game=null,this.data={},this.game=t.node.getComponent(UC),!this.game)throw new Error("Gameplay component not found");this.manager=t,this.updateStateData(),this.logDebug()}return o(e,[{key:"logDebug",value:function(){var e=this.constructor.name;console.debug("[STATE] ".concat(e),this.data)}},{key:"updateStateData",value:function(){if(this.game){var e=this.game.getGameData();e&&(this.data=e)}}},{key:"updateGameData",value:function(e){var t;null===(t=this.game)||void 0===t||t.setGameData(e),this.updateStateData()}}]),e}();N._RF.pop(),N._RF.push({},"109f0WH9r9IQqMHpvD45PzQ","DeathState",void 0);var jC=codex.analytics,WC=function(e){n(r,e);var t=i(r);function r(e){var n,i,o;return a(this,r),(o=t.call(this,e)).processCrazyGamesEvent(),o.disableUI(),S.stopAllSounds(),o.vibrateDevice(),o.pauseCountdown(),o.logLevelFailAnalytics(),null===(n=o.game)||void 0===n||n.scheduleOnce((function(){o.stopDogesLooking(),S.playSound(Zn.LEVEL_FAIL,{volume:.3})}),.5),null===(i=o.game)||void 0===i||i.scheduleOnce((function(){o.sleepObjects(),o.showLoseScreen(),o.manager.finish()}),1.8),o}return o(r,[{key:"processCrazyGamesEvent",value:function(){"gameplayStop"in GameSDK.extra&&GameSDK.extra.gameplayStop()}},{key:"load",value:function(){}},{key:"initialize",value:function(){}},{key:"ready",value:function(){}},{key:"play",value:function(){}},{key:"death",value:function(){}},{key:"finish",value:function(){var e=this.manager.createFinishState();this.manager.change(e)}},{key:"update",value:function(){}},{key:"disableUI",value:function(){var e;null===(e=this.game)||void 0===e||e.uiManager.disableUI()}},{key:"sleepObjects",value:function(){var e;null===(e=this.game)||void 0===e||null===(e=e.gameObjects)||void 0===e||e.sleepObjects()}},{key:"pauseCountdown",value:function(){var e;null===(e=this.game)||void 0===e||e.uiManager.pauseCounting()}},{key:"stopDogesLooking",value:function(){var e;if(null!==(e=this.game)&&void 0!==e&&e.gameObjects){var t,n=this.game.gameObjects.getComponentsInChildren(Vv),i=s(n);try{for(i.s();!(t=i.n()).done;){var a,o=t.value;null===(a=o.eyes)||void 0===a||a.stopLook(),o.setEnable(!1)}}catch(e){i.e(e)}finally{i.f()}}}},{key:"vibrateDevice",value:function(){var e;null===(e=ge("Vibrate"))||void 0===e||null===(e=e.getComponent(dh))||void 0===e||e.vibrate(500)}},{key:"showLoseScreen",value:function(){var e=this.data.level;L.openScreen(P.LOSE_SCREEN,{level:e})}},{key:"logLevelFailAnalytics",value:function(){jC.levelComplete(1,0,Fh)}}]),r}(HC);N._RF.pop(),N._RF.push({},"638devCm49MrpqRRWptDInp","FinishState",void 0);var VC=codex.player,$C=function(e){n(l,e);var r,s=i(l);function l(e){var t;return a(this,l),t=s.call(this,e),S.turnUpMusic(),S.stopSound(Zn.BEE_FLYING),t.finishGameAsync(),t}return o(l,[{key:"load",value:function(){var e=this.manager.createLoadingState();this.manager.change(e)}},{key:"initialize",value:function(){var e=this.manager.createInitializeState();this.manager.change(e)}},{key:"ready",value:function(){}},{key:"play",value:function(){}},{key:"death",value:function(){}},{key:"finish",value:function(){}},{key:"update",value:function(){}},{key:"finishGameAsync",value:(r=t((function*(){try{var e,t;if(!this.game)return;var n=this.game.uiManager.getBestScore(),i=null!==(e=null===(t=VC.getGameData())||void 0===t?void 0:t.bestEndlessScore)&&void 0!==e?e:0,a=i<n?n:i;VC.setGameData({bestEndlessScore:a}),this.updateGameData({bestEndlessScore:a}),yield ag.finishMatchAsync()}catch(e){console.error("finishGameAsync",e)}})),function(){return r.apply(this,arguments)})}]),l}(HC);N._RF.pop(),N._RF.push({},"97260ZJNotE0LYFeNm4wsEz","InitializeState",void 0);var qC=function(e){n(u,e);var r,s,l=i(u);function u(e){var t;return a(this,u),t=l.call(this,e),"CrazyGames"===GameSDK.getSDKName()&&t.processCrazyGamesRequirements(),t.enableUI(),t.clearGameObjects(),t.createGameObjects(),t.initClock(),S.playMusic(Zn.BG_MUSIC),t.startGameAsync().then((function(){t.closeLoadingScreen(),t.manager.ready()})),t}return o(u,[{key:"processCrazyGamesRequirements",value:function(){"gameplayStart"in GameSDK.extra&&GameSDK.extra.gameplayStart(),this.showInterAdsCrazyGames()}},{key:"showInterAdsCrazyGames",value:(s=t((function*(){this.game&&(S.stopAllSounds(),yield w.showInterstitialAdAsync({forLevel:this.data.level,includeSDK:["CrazyGames"]}),S.turnUpMusic())})),function(){return s.apply(this,arguments)})},{key:"load",value:function(){if(Ludex.Utils.Valid.isDebugger()){var e=this.manager.createLoadingState();this.manager.change(e)}}},{key:"initialize",value:function(){}},{key:"ready",value:function(){var e=this.manager.createReadyState();this.manager.change(e)}},{key:"play",value:function(){}},{key:"death",value:function(){var e=this.manager.createDeathState();this.manager.change(e)}},{key:"finish",value:function(){}},{key:"update",value:function(){}},{key:"closeLoadingScreen",value:function(){L.closeScreen(P.LOADING_SCREEN)}},{key:"enableUI",value:function(){var e;null===(e=this.game)||void 0===e||e.uiManager.enableUI()}},{key:"clearGameObjects",value:function(){var e;null!==(e=this.game)&&void 0!==e&&e.gameObjects&&this.game.gameObjects.clearObjects()}},{key:"createGameObjects",value:function(){var e,t,n,i=null!==(e=null===(t=this.game)||void 0===t?void 0:t.getDogeSpawnPosition())&&void 0!==e?e:[0,0],a=C(i,2),o=a[0],r=a[1],s=null===(n=this.game)||void 0===n?void 0:n.gameObjects.spawnDoge({x:o,y:r,right:!1,isWorldPosition:!0,rigidBodyConfig:{gravityScale:2}});if(!(s instanceof ie))throw new Error("Could not create doge");var l=s.getComponent(Se);if(!l)throw new Error("Could not get rigidBody");l.sleep()}},{key:"initClock",value:function(){var e,t;null===(e=this.game)||void 0===e||e.uiManager.initCounting();var n=this.data.bestEndlessScore,i=void 0===n?0:n;null===(t=this.game)||void 0===t||t.uiManager.setBestScore(i)}},{key:"startGameAsync",value:(r=t((function*(){try{if(this.data.isFromLoader)return void this.updateGameData({isFromLoader:!1});yield ag.startMatchAsync()}catch(e){console.error("startGameAsync",e)}})),function(){return r.apply(this,arguments)})}]),u}(HC);N._RF.pop(),N._RF.push({},"ecbe0PxfZNJBLsmLBPc2pBD","LoadingState",void 0);var KC=codex.player,YC=function(e){n(r,e);var t=i(r);function r(e){var n,i,o,s;a(this,r),s=t.call(this,e);var l=null!==(n=null===(i=KC.getGameData())||void 0===i?void 0:i.bestEndlessScore)&&void 0!==n?n:0;return s.updateGameData({bestEndlessScore:l}),L.showLoadingScreen(),null===(o=s.game)||void 0===o||o.scheduleOnce((function(){s.initialize()}),.5),s}return o(r,[{key:"load",value:function(){}},{key:"initialize",value:function(){var e=this.manager.createInitializeState();this.manager.change(e)}},{key:"ready",value:function(){}},{key:"play",value:function(){}},{key:"death",value:function(){}},{key:"finish",value:function(){}},{key:"update",value:function(){}}]),r}(HC);N._RF.pop(),N._RF.push({},"651d4HD0HpFPLrL8dycqU3R","PlayingState",void 0);var JC=codex.player;function XC(){var e=Object.keys(wh).map((function(e){return parseInt(e)})).sort((function(e,t){return e-t})),t=0;return{current:function(){var n;return null!==(n=e[t])&&void 0!==n?n:0},canGoNext:function(n){var i=t+1;if(i>=e.length)return!1;var a=e[i];return!!a&&n>a},next:function(){var n;if(t>=e.length-1)throw new Error("No more progressions");return null!==(n=e[t++])&&void 0!==n?n:0}}}var ZC=function(e){n(r,e);var t=i(r);function r(e){var n;return a(this,r),(n=t.call(this,e)).totalElapsed=0,n.spawnElapsed=0,n.spawnInterval=2,n.flyForce=18,n.progressionIt=XC(),n.onTouchStart=function(){n.dogeRigidBody.linearVelocity=new ve(0,n.flyForce)},n.findDoge(),n.wakeUpObjects(),n.spawnEnemies(),n.startCounting(),S.turnDownMusic(),n.listenInputEvents(),n}return o(r,[{key:"listenInputEvents",value:function(){var e,t;ue.os===ue.OS.WINDOWS||ue.os===ue.OS.OSX?(document.addEventListener("pointerdown",this.onTouchStart),null===(e=this.game)||void 0===e||e.node.on(ie.EventType.MOUSE_DOWN,this.onTouchStart)):null===(t=this.game)||void 0===t||t.node.on(ie.EventType.TOUCH_START,this.onTouchStart)}},{key:"unlistenInputEvents",value:function(){var e,t;ue.os===ue.OS.WINDOWS||ue.os===ue.OS.OSX?(document.removeEventListener("pointerdown",this.onTouchStart),null===(e=this.game)||void 0===e||e.node.off(ie.EventType.MOUSE_DOWN,this.onTouchStart)):null===(t=this.game)||void 0===t||t.node.off(ie.EventType.TOUCH_START,this.onTouchStart)}},{key:"findDoge",value:function(){var e,t=null===(e=this.game)||void 0===e||null===(e=e.gameObjects)||void 0===e?void 0:e.getRandomDogeToBee();if(!t)throw new Error("No doge found in GameObjects");this.doge=t;var n=this.doge.getComponent(Se);if(!n)throw new Error("No rigid body found in doge");this.dogeRigidBody=n}},{key:"load",value:function(){this.unlistenInputEvents();var e=this.manager.createLoadingState();this.manager.change(e)}},{key:"initialize",value:function(){this.unlistenInputEvents(),S.stopSound(Zn.BEE_FLYING);var e=this.manager.createInitializeState();this.manager.change(e)}},{key:"ready",value:function(){}},{key:"play",value:function(){}},{key:"death",value:function(){this.unlistenInputEvents();var e=this.manager.createDeathState();this.manager.change(e)}},{key:"finish",value:function(){}},{key:"update",value:function(e){if(this.spawnElapsed+=e,this.totalElapsed+=e,this.progressionIt.canGoNext(this.totalElapsed)&&(this.progressionIt.next(),this.updateProgressionToPlugin()),this.spawnElapsed>this.spawnInterval){var t=this.progressionIt.current(),n=wh[t];if(!n)return;this.handleSpawn(n),this.spawnElapsed=0}}},{key:"updateProgressionToPlugin",value:function(){var e;ag.setProfileMatchDataAsync({id:JC.getPlayerId(),endlessScore:Math.round(null!==(e=this.data.bestEndlessScore)&&void 0!==e?e:0)})}},{key:"handleSpawn",value:function(e){if(!this.game)throw new Error("Game is not defined");var t=this.game.getBoundingBox(),n=0===pe.randomRangeInt(0,2)?t.xMin-0:t.xMax+0,i=this.doge.node.worldPosition.y+pe.randomRangeInt(-100,100),a=this.doge.node.getWorldPosition(),o=a.x,r=a.y,s=new te(n,i,0),l=s.x+2*(o-s.x),u=s.y+2*(r-s.y);this.spawnPredictionLine(s,l,u),this.spawnCrossingBee(o,r,s,e)}},{key:"spawnCrossingBee",value:function(e,t,n,i){var a=this;if(!this.game)throw new Error("Game is not defined. Only use this method in PlayingState");this.game.scheduleOnce((function(){a.game.gameObjects.spawnCrossingBees(d({playerWorldX:e,playerWorldY:t,spawnWorldX:n.x,spawnWorldY:n.y},i))}),1)}},{key:"spawnPredictionLine",value:function(e,t,n){if(!this.game)throw new Error("Game is not defined. Only use this method in PlayingState");var i=this.game.gameObjects.spawnCrossingBeeLine({startX:e.x,startY:e.y,endX:t,endY:n,spriteType:sv.LOW,thickness:0});q(i).call((function(){S.playSound(Zn.BEE_FLYING)})).to(.5,{thickness:80},{easing:"expoOut"}).start(),this.game.scheduleOnce((function(){q(i).to(.5,{thickness:0},{easing:"expoOut"}).call((function(){i.destroy(),S.stopSound(Zn.BEE_FLYING)})).start()}),1)}},{key:"wakeUpObjects",value:function(){var e;null===(e=this.game)||void 0===e||null===(e=e.gameObjects)||void 0===e||e.wakeUpObjects(),this.dogeRigidBody.wakeUp()}},{key:"spawnEnemies",value:function(){this.game&&this.game.gameObjects&&(this.game.gameObjects.spawnBees(),this.game.gameObjects.reviveBigBees())}},{key:"startCounting",value:function(){var e;null===(e=this.game)||void 0===e||e.uiManager.startCounting()}}]),r}(HC);N._RF.pop(),N._RF.push({},"9516f5Gc/FENLPaNEZwDwcn","ReadyState",void 0);var QC,ew=codex.analytics,tw=function(e){n(r,e);var t=i(r);function r(e){var n;return a(this,r),(n=t.call(this,e)).onTouchStart=function(){var e;n.manager.play(),null===(e=n.game)||void 0===e||e.handleHideTapToPlayText()},n.logLevelStartAnalytics(),n.listenInputEvents(),n}return o(r,[{key:"listenInputEvents",value:function(){var e,t;ue.os===ue.OS.WINDOWS||ue.os===ue.OS.OSX?(document.addEventListener("pointerdown",this.onTouchStart,{once:!0}),null===(e=this.game)||void 0===e||e.node.once(ie.EventType.MOUSE_DOWN,this.onTouchStart)):null===(t=this.game)||void 0===t||t.node.once(ie.EventType.TOUCH_START,this.onTouchStart)}},{key:"unlistenInputEvents",value:function(){var e,t;ue.os===ue.OS.WINDOWS||ue.os===ue.OS.OSX?(document.removeEventListener("pointerdown",this.onTouchStart),null===(e=this.game)||void 0===e||e.node.off(ie.EventType.MOUSE_DOWN,this.onTouchStart)):null===(t=this.game)||void 0===t||t.node.off(ie.EventType.TOUCH_START,this.onTouchStart)}},{key:"load",value:function(){if(this.unlistenInputEvents(),Ludex.Utils.Valid.isDebugger()){var e=this.manager.createLoadingState();this.manager.change(e)}}},{key:"initialize",value:function(){}},{key:"ready",value:function(){}},{key:"play",value:function(){this.unlistenInputEvents();var e=this.manager.createPlayingState();this.manager.change(e)}},{key:"death",value:function(){if(this.unlistenInputEvents(),Ludex.Utils.Valid.isDebugger()){var e=this.manager.createDeathState();this.manager.change(e)}}},{key:"finish",value:function(){}},{key:"update",value:function(){}},{key:"logLevelStartAnalytics",value:function(){ew.levelStart(1,0,Fh)}}]),r}(HC);N._RF.pop(),N._RF.push({},"946848BySlM54Wly5+1otNa","EndlessStateManager",void 0);var nw=(0,z.ccclass)("EndlessStateManager")(QC=function(e){n(r,e);var t=i(r);function r(){return a(this,r),t.apply(this,arguments)}return o(r,[{key:"init",value:function(){this.state=new YC(this)}},{key:"change",value:function(e){this.state=e}},{key:"load",value:function(){this.state.load()}},{key:"initialize",value:function(){this.state.initialize()}},{key:"isInitialize",value:function(){return this.state instanceof qC}},{key:"ready",value:function(){this.state.ready()}},{key:"isReady",value:function(){return this.state instanceof tw}},{key:"play",value:function(){this.state.play()}},{key:"isPlaying",value:function(){return this.state instanceof ZC}},{key:"death",value:function(){this.state.death()}},{key:"isFailed",value:function(){return this.state instanceof WC}},{key:"finish",value:function(){this.state.finish()}},{key:"isFinished",value:function(){return this.state instanceof $C}},{key:"update",value:function(e){this.state&&this.state.update(e)}},{key:"createInitializeState",value:function(){return new qC(this)}},{key:"createLoadingState",value:function(){return new YC(this)}},{key:"createReadyState",value:function(){return new tw(this)}},{key:"createPlayingState",value:function(){return new ZC(this)}},{key:"createDeathState",value:function(){return new WC(this)}},{key:"createFinishState",value:function(){return new $C(this)}}]),r}(U))||QC;N._RF.pop(),N._RF.push({},"d10c8b8p8RD45oVz5qSL2LD","clampToBoundingBox",void 0),N._RF.pop(),N._RF.push({},"02e30BdQXxIEbItBFTh00UT","getClosestPair",void 0),N._RF.pop(),N._RF.push({},"eb6c23usqxHPaoJcvF0LbY6","separatePositions",void 0),N._RF.pop(),N._RF.push({},"bfb989Gr/dArq4M9uSSrF5/","stagger",void 0),N._RF.pop(),N._RF.push({},"d2a57+mB4NG9rcdh+dy1VPe","traverse4",void 0),N._RF.pop(),N._RF.push({},"ca614iJ+X5LrL1rX/wDQDTD","shuffle",void 0),N._RF.pop(),N._RF.push({},"1cf4cygDSdP5JL+7w3wIJL7","traverseRandom",void 0),N._RF.pop(),N._RF.push({},"cd0d548/WxD7KCyW2hwySVO","traverseSpiralIn",void 0),N._RF.pop(),N._RF.push({},"a70090n5pRBdIZb/GuW6wDs","toSortedIndices",void 0);var iw,aw,ow,rw,sw,lw,uw,cw,hw,dw,pw;Ludex.Utils.Array;N._RF.pop(),N._RF.push({},"56e87lhVSNJ8LMUzQpgUomc","randomSign",void 0),N._RF.pop(),N._RF.push({},"1e7cch8i/5DkYHOwJowrjeg","AFPool",void 0),N._RF.pop(),N._RF.push({},"1faa9NgJrBE7p8Zs/HBWrZn","pad",void 0),N._RF.pop(),N._RF.push({},"78746Q4viBIlbRROK4J1bSl","Burst",void 0);var yw,vw,fw,mw,gw,bw,Sw,kw,Cw,ww,Ew,Aw,Tw,Rw,Lw,Pw,_w,Bw=z.ccclass,Dw=z.property,Ow=(iw=Bw("Burst"),aw=Dw(V),ow=Dw(M),rw=Dw(V),sw=Dw(M),iw((cw=l((uw=function(){function e(){a(this,e),u(this,"time",cw,this),u(this,"repeatCount",hw,this),u(this,"repeatInterval",dw,this),u(this,"count",pw,this),this.remainingCount=0,this.curTime=0}return o(e,[{key:"update",value:function(e,t){if(0===this.remainingCount&&(this.remainingCount=this.repeatCount,this.curTime=this.time),this.remainingCount>0){var n=He(e.time-e.startDelay.evaluate(0,1),e.duration)-t;n=n>0?n:0;var i=He(e.time-e.startDelay.evaluate(0,1),e.duration);this.curTime>=n&&this.curTime<i&&(e.emit(this.count,t-(i-this.curTime)),this.curTime+=this.repeatInterval,--this.remainingCount)}}},{key:"reset",value:function(){this.remainingCount=0,this.curTime=0}}]),e}()).prototype,"time",[aw],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),hw=l(uw.prototype,"repeatCount",[ow],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),dw=l(uw.prototype,"repeatInterval",[rw],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),pw=l(uw.prototype,"count",[sw],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),lw=uw))||lw);N._RF.pop(),N._RF.push({},"00eb3NBo0tM/qcD6ViMjx0A","CurveRange",void 0);var Iw,Nw,Fw,zw,xw,Gw,Mw,Uw,Hw,jw,Ww,Vw,$w,qw,Kw,Yw,Jw,Xw=z.ccclass,Zw=z.property,Qw=fe({Constant:0,Curve:1,TwoCurves:2,TwoConstants:3}),eE=(yw=Xw("CurveRange"),vw=Zw({type:fe(Qw)}),fw=Zw({visible:function(){return this.mode===Qw.Constant}}),mw=Zw({visible:function(){return this.mode===Qw.Curve}}),gw=Zw({visible:function(){return this.mode===Qw.TwoCurves}}),bw=Zw({visible:function(){return this.mode===Qw.TwoCurves}}),Sw=Zw({visible:function(){return this.mode===Qw.TwoConstants}}),kw=Zw({visible:function(){return this.mode===Qw.TwoConstants}}),yw((Ew=l((ww=function(){function e(){a(this,e),u(this,"mode",Ew,this),u(this,"constant",Aw,this),u(this,"spline",Tw,this),u(this,"splineMin",Rw,this),u(this,"splineMax",Lw,this),u(this,"constantMin",Pw,this),u(this,"constantMax",_w,this),this.spline.assignSorted([0,1],[0,1]),this.splineMin.assignSorted([0,1],[0,1]),this.splineMax.assignSorted([0,1],[0,1])}return o(e,[{key:"evaluate",value:function(e,t){switch(this.mode){case Qw.Curve:return this.spline.evaluate(e);case Qw.TwoCurves:return je(this.splineMin.evaluate(e),this.splineMax.evaluate(e),t);case Qw.TwoConstants:return je(this.constantMin,this.constantMax,t);default:return this.constant}}},{key:"getMax",value:function(){switch(this.mode){case Qw.Curve:return 1;case Qw.TwoConstants:return this.constantMax;case Qw.TwoCurves:return 1;default:return this.constant}}},{key:"isZero",value:function(){switch(this.mode){case Qw.Curve:return We(1,0,Ve);case Qw.TwoConstants:return We(Math.max(Math.abs(this.constantMax),Math.abs(this.constantMin)),0,Ve);case Qw.TwoCurves:return We(1,0,Ve);default:return We(this.constant,0,Ve)}}}]),e}()).prototype,"mode",[vw],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Qw.Constant}}),Aw=l(ww.prototype,"constant",[fw],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Tw=l(ww.prototype,"spline",[mw],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new $e}}),Rw=l(ww.prototype,"splineMin",[gw],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new $e}}),Lw=l(ww.prototype,"splineMax",[bw],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new $e}}),Pw=l(ww.prototype,"constantMin",[Sw],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),_w=l(ww.prototype,"constantMax",[kw],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Cw=ww))||Cw);N._RF.pop(),N._RF.push({},"3fe5eBRNTJFCZgeD7SqFSh5","GradientRange",void 0);var tE=z.ccclass,nE=z.property,iE=fe({Color:0,Gradient:1,TwoColors:2,TwoGradients:3,RandomColor:4}),aE=new le,oE=new le,rE=(Iw=tE("GradientRange"),Nw=nE({type:fe(iE)}),Fw=nE({visible:function(){return this.mode===iE.Color}}),zw=nE({visible:function(){return this.mode===iE.TwoColors}}),xw=nE({visible:function(){return this.mode===iE.TwoColors}}),Gw=nE({visible:function(){return this.mode===iE.Gradient||this.mode===iE.RandomColor}}),Mw=nE({visible:function(){return this.mode===iE.TwoGradients}}),Uw=nE({visible:function(){return this.mode===iE.TwoGradients}}),Iw((Ww=l((jw=function(){function e(){a(this,e),u(this,"mode",Ww,this),u(this,"color",Vw,this),u(this,"colorMin",$w,this),u(this,"colorMax",qw,this),u(this,"gradient",Kw,this),u(this,"gradientMin",Yw,this),u(this,"gradientMax",Jw,this),this._color=le.WHITE.clone()}return o(e,[{key:"evaluate",value:function(e,t){switch(this.mode){case iE.Color:return this.color;case iE.TwoColors:return le.lerp(this._color,this.colorMin,this.colorMax,t),this._color;case iE.RandomColor:return this.gradient.getRandomColor(this._color);case iE.Gradient:return this.gradient.evaluateFast(this._color,e);case iE.TwoGradients:return le.lerp(this._color,this.gradientMin.evaluateFast(aE,e),this.gradientMax.evaluateFast(oE,e),t),this._color;default:return this.color}}}]),e}()).prototype,"mode",[Nw],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return iE.Color}}),Vw=l(jw.prototype,"color",[Fw],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return le.WHITE.clone()}}),$w=l(jw.prototype,"colorMin",[zw],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return le.WHITE.clone()}}),qw=l(jw.prototype,"colorMax",[xw],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return le.WHITE.clone()}}),Kw=l(jw.prototype,"gradient",[Gw],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new qe}}),Yw=l(jw.prototype,"gradientMin",[Mw],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new qe}}),Jw=l(jw.prototype,"gradientMax",[Uw],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new qe}}),Hw=jw))||Hw);function sE(e,t,n,i){!function(e,t){ve.set(e,Math.cos(t),Math.sin(t))}(e,i),e.z=0,te.multiplyScalar(e,e,t+(n-t)*Ye())}function lE(e){var t=Qw;switch(e.mode){case t.TwoCurves:case t.TwoConstants:return!0;default:return!1}}N._RF.pop(),N._RF.push({},"1a4c4Z/fWpFuL5b3emrVLug","ParticleFunction",void 0),N._RF.pop(),N._RF.push({},"370cbFjxn9GKJzqbTOhQZiA","ParticleSimulator",void 0);var uE=new te(0,0,0),cE=function(){function e(){a(this,e),this.pos=new te(0,0,0),this.color=new le(255,255,255,255),this.size=new te(0,0,0),this.startSize=new te(0,0,0),this.rotation=new te(0,0,0),this.startLifetime=0,this.remainingLifetime=0,this.randomSeed=0,this.velocity=new te(0,0),this.width=0,this.height=0}return o(e,[{key:"init",value:function(){this.pos.set(uE),this.remainingLifetime=0,this.startLifetime=0,this.startSize.set(uE),this.startColor=le.WHITE.clone(),this.velocity.set(uE),this.randomSeed=0}}]),e}(),hE=new(function(e){n(r,e);var t=i(r);function r(){return a(this,r),t.apply(this,arguments)}return o(r,[{key:"get",value:function(){return this._get()||new cE}}]),r}(Ze.Pool))((function(e){e.pos.set(uE),e.color.set(255,255,255,255),e.size.set(uE),e.rotation.set(uE)}),1024),dE=function(){function e(t){a(this,e),this.particles=[],this.active=!1,this.uvFilled=0,this.renderData=new et,this.sys=t,this.particles=[],this.active=!1,this.uvFilled=0}return o(e,[{key:"stop",value:function(){this.active=!1}},{key:"reset",value:function(){this.active=!0;var e,t=this.particles,n=s(t);try{for(n.s();!(e=n.n()).done;){var i=e.value;hE.put(i)}}catch(e){n.e(e)}finally{n.f()}t.length=0,this.renderData.resize(0,0)}},{key:"emitParticle",value:function(){var e=hE.get();return this.particles.push(e),e}},{key:"updateUVs",value:function(e){var t=this.renderData;if(t&&this.sys){var n=t.vData,i=this.sys.spriteFrame;if(!i)return;for(var a=i.uv,o=e?0:this.uvFilled,r=this.particles.length,s=o;s<r;s++){var l,u,c,h,d,p,y,v,f=9*s*4;n[f+3]=null!==(l=a[0])&&void 0!==l?l:0,n[f+4]=null!==(u=a[1])&&void 0!==u?u:0,n[f+12]=null!==(c=a[2])&&void 0!==c?c:0,n[f+13]=null!==(h=a[3])&&void 0!==h?h:0,n[f+21]=null!==(d=a[4])&&void 0!==d?d:0,n[f+22]=null!==(p=a[5])&&void 0!==p?p:0,n[f+30]=null!==(y=a[6])&&void 0!==y?y:0,n[f+31]=null!==(v=a[7])&&void 0!==v?v:0}this.uvFilled=r}}},{key:"updateParticleBuffer",value:function(e,t,n,i){var a=n.vData,o=t.x,r=t.y,s=t.z,l=e.width*e.size.x/2,u=e.height*e.size.y/2,c=e.rotation.x||0,h=e.rotation.y||0,d=e.rotation.z||0;if(0===c&&0===h&&0===d)a[i]=o-l,a[i+1]=r-u,a[i+2]=s,a[i+9]=o+l,a[i+10]=r-u,a[i+11]=s,a[i+18]=o-l,a[i+19]=r+u,a[i+20]=s,a[i+27]=o+l,a[i+28]=r+u,a[i+29]=s;else{var p=-Qe.degreesToRadians(c),y=-Qe.degreesToRadians(h),v=-Qe.degreesToRadians(d),f=Math.cos(p),m=Math.sin(p),g=Math.cos(y),b=Math.sin(y),S=Math.cos(v),k=Math.sin(v);function C(e,t,n){var i=t*f-n*m,a=t*m+n*f,o=e*g+a*b;return new te(o*S-i*k,o*k+i*S,a*g-e*b)}var w=[C(-l,-u,0),C(l,-u,0),C(-l,u,0),C(l,u,0)];a[i]=w[0].x+o,a[i+1]=w[0].y+r,a[i+2]=w[0].z+s,a[i+9]=w[1].x+o,a[i+10]=w[1].y+r,a[i+11]=w[1].z+s,a[i+18]=w[2].x+o,a[i+19]=w[2].y+r,a[i+20]=w[2].z+s,a[i+27]=w[3].x+o,a[i+28]=w[3].y+r,a[i+29]=w[3].z+s}le.toArray(a,e.color,i+5),le.toArray(a,e.color,i+14),le.toArray(a,e.color,i+23),le.toArray(a,e.color,i+32)}},{key:"step",value:function(e){var t,n=this.sys.node,i=this.particles;n.updateWorldTransform(),this.active&&this.sys.emitting(e);var a=this.renderData,o=i.length;a.reset(),this.requestData(4*o,6*o),o>this.uvFilled&&this.updateUVs();for(var r=0;r<i.length;){var s=i[r];if(s)if(s.remainingLifetime-=e,s.remainingLifetime>0){var l=9*r*4;this.updateParticleBuffer(s,s.pos,a,l),++r}else{var u=i[r];if(!u)continue;if(r!==i.length-1){var c=i[i.length-1];c&&(i[r]=c)}hE.put(u),i.length--,a.resize(a.vertexCount-4,a.indexCount-6)}}this.renderData.material=this.sys.getRenderMaterial(0),this.renderData.frame=this.sys.spriteFrame,null==a||null===(t=a.setRenderDrawInfoAttributes)||void 0===t||t.call(a)}},{key:"requestData",value:function(e,t){var n=this.renderData.indexCount;this.renderData.request(e,t);for(var i=this.renderData.indexCount/6,a=this.renderData.iData,o=n;o<i;o++){var r=4*o;a[n++]=r,a[n++]=r+1,a[n++]=r+2,a[n++]=r+1,a[n++]=r+3,a[n++]=r+2}}},{key:"initDrawInfo",value:function(){var e,t=this.renderData;null==t||null===(e=t.setRenderDrawInfoAttributes)||void 0===e||e.call(t)}}]),e}();N._RF.pop(),N._RF.push({},"c2fc2/T2apMGZCPX5a4abo/","ModuleRandSeed",void 0);var pE,yE,vE,fE,mE,gE,bE,SE=23541,kE=39825,CE=91041,wE=125292,EE=197866,AE=156497;N._RF.pop(),N._RF.push({},"39785+APfBJU5kvcdjZGiLr","ColorOvertimeModule",void 0);var TE,RE,LE,PE,_E,BE,DE,OE,IE,NE=z.ccclass,FE=z.property,zE=CE,xE=(pE=NE("ColorOvertimeModule"),yE=FE({type:Q}),vE=FE({type:rE}),pE((gE=l((mE=function(){function e(){a(this,e),u(this,"enable",gE,this),u(this,"color",bE,this)}return o(e,[{key:"update",value:function(e){if(this.enable){e.color.set(e.startColor);var t=function(e){var t=iE;switch(e.mode){case t.TwoGradients:case t.TwoColors:return!0;default:return!1}}(this.color)?tt(e.randomSeed+zE):0;e.color.multiply(this.color.evaluate(1-e.remainingLifetime/e.startLifetime,t))}}}]),e}()).prototype,"enable",[yE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bE=l(mE.prototype,"color",[vE],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new rE}}),fE=mE))||fE);N._RF.pop(),N._RF.push({},"c397apirpxFfJTJN1KLAcGi","LimitVelocityOvertimeModule",void 0);var GE,ME,UE,HE,jE,WE,VE,$E,qE,KE,YE,JE,XE,ZE=z.ccclass,QE=z.property,eA=SE,tA=(TE=ZE("LimitVelocityOvertimeModule"),RE=QE({type:Q}),LE=QE({type:eE}),PE=QE({type:eE}),TE((DE=l((BE=function(){function e(){a(this,e),u(this,"enable",DE,this),u(this,"limit",OE,this),u(this,"dampen",IE,this),this.limit.constant=500,this.dampen.constant=.2}return o(e,[{key:"update",value:function(e,t){if(this.enable){var n=1-e.remainingLifetime/e.startLifetime,i=e.velocity.clone().normalize(),a=lE(this.limit)?tt(e.randomSeed+eA):0,o=lE(this.dampen)?tt(e.randomSeed+eA+1):0,r=e.velocity.length(),s=this.limit.evaluate(n,a),l=this.dampen.evaluate(n,o);e.velocity=i.multiplyScalar(this.dampenBeyondLimit(r,s,l,t))}}},{key:"dampenBeyondLimit",value:function(e,t,n,i){if(e<=t)return e;var a=1-Math.exp(-n*i);return pe.lerp(e,t,a)}}]),e}()).prototype,"enable",[RE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),OE=l(BE.prototype,"limit",[LE],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new eE}}),IE=l(BE.prototype,"dampen",[PE],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new eE}}),_E=BE))||_E);N._RF.pop(),N._RF.push({},"c6cfbhYVctHt53aUXC4oSWy","RotationOvertimeModule",void 0);var nA,iA,aA,oA,rA,sA,lA,uA,cA,hA,dA,pA,yA,vA,fA,mA,gA,bA,SA,kA,CA,wA,EA,AA=z.ccclass,TA=z.property,RA=wE,LA=(GE=AA("RotationOvertimeModule"),ME=TA({type:Q}),UE=TA(Q),HE=TA({type:eE,visible:function(){return this.separateAxes}}),jE=TA({type:eE,visible:function(){return this.separateAxes}}),WE=TA({type:eE}),GE((qE=l(($E=function(){function e(){a(this,e),u(this,"enable",qE,this),u(this,"separateAxes",KE,this),u(this,"x",YE,this),u(this,"y",JE,this),u(this,"z",XE,this)}return o(e,[{key:"update",value:function(e,t){if(this.enable){var n=1-e.remainingLifetime/e.startLifetime,i=e.randomSeed+RA,a=lE(this.z)?tt(i):0,o=this.z.evaluate(n,a)*t,r=0,s=0;if(this.separateAxes){var l=lE(this.x)?tt(i):0,u=lE(this.y)?tt(i):0;r=this.x.evaluate(n,l)*t,s=this.y.evaluate(n,u)*t}e.rotation.add3f(r,s,o)}}}]),e}()).prototype,"enable",[ME],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),KE=l($E.prototype,"separateAxes",[UE],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),YE=l($E.prototype,"x",[HE],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new eE}}),JE=l($E.prototype,"y",[jE],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new eE}}),XE=l($E.prototype,"z",[WE],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new eE}}),VE=$E))||VE);N._RF.pop(),N._RF.push({},"f63cd4ScDJFPrnTLNT4+QKu","ShapeModule",void 0);var PA,_A,BA,DA,OA,IA,NA,FA,zA,xA,GA,MA,UA,HA=z.ccclass,jA=z.property,WA=fe({Circle:0,Rectangle:1}),VA=fe({Base:0,Edge:1}),$A=function(){return this.shape===WA.Circle},qA=function(){return this.shape===WA.Rectangle},KA=[0,0],YA=(nA=HA("ShapeModule"),iA=jA({type:fe(WA)}),aA=jA({type:fe(VA),visible:qA}),oA=jA({}),rA=jA({}),sA=jA({}),lA=jA({range:[0,360],visible:$A}),uA=jA({range:[-360,360],visible:$A}),cA=jA({min:0,visible:$A}),hA=jA({range:[0,1],step:.01,visible:$A}),dA=jA({visible:qA}),nA((vA=l((yA=function(){function e(){a(this,e),u(this,"shape",vA,this),u(this,"emitFrom",fA,this),u(this,"position",mA,this),u(this,"rotation",gA,this),u(this,"scale",bA,this),u(this,"arc",SA,this),u(this,"angle",kA,this),u(this,"radius",CA,this),u(this,"radiusThickness",wA,this),u(this,"rectangleThickness",EA,this)}return o(e,[{key:"emit",value:function(e){switch(this.shape){case WA.Circle:this.circleEmit(this.radius,this.radiusThickness,nt(this.generateArcAngle()),e);break;case WA.Rectangle:this.rectangleEmit(this.emitFrom,this.rectangleThickness,e)}}},{key:"circleEmit",value:function(e,t,n,i){var a=i.pos;sE(a,e*(1-t),e,n+nt(this.angle)),i.velocity=a.clone().normalize()}},{key:"rectangleEmit",value:function(e,t,n){var i,a,o,r=n.pos;switch(e){case VA.Base:a=r,o=t,ve.set(a,Je(-o.x,o.x),Je(-o.y,o.y));break;case VA.Edge:KA[0]=Je(-1,1),KA[1]=(0===(i=Je(-1,1))&&i++,Ke.sign(i)),function(e){for(var t=0;t<e.length;t++){var n=t+Xe(0,e.length-t),i=e[n];e[n]=e[t],e[t]=i}}(KA),this.applyRectThickness(KA,t),ve.set(r,KA[0],KA[1])}n.velocity=r.clone().normalize()}},{key:"generateArcAngle",value:function(){return Je(0,this.arc)}},{key:"applyRectThickness",value:function(e,t){t.x>0&&(e[0]*=t.x),t.y>0&&(e[1]*=t.y)}},{key:"gizmo",value:function(e){switch(e.strokeColor.fromHEX("#46C4FFB0"),e.fillColor.fromHEX("#46C4FF77"),e.lineWidth=8,this.shape){case WA.Circle:this.gizmoCircle(e);break;case WA.Rectangle:this.gizmoRectangle(e)}}},{key:"gizmoCircle",value:function(e){e.clear();var t=this.angle,n=this.angle+this.arc;if(this.createArcPath(e,this.radius,t,n),this.createArcPath(e,this.radius*(1-this.radiusThickness),t,n),this.arc<360&&this.radius>0){var i=this.radius*Math.cos(nt(this.angle)),a=this.radius*Math.sin(nt(this.angle)),o=this.radius*Math.cos(nt(this.arc+this.angle)),r=this.radius*Math.sin(nt(this.arc+this.angle));e.moveTo(i,a),e.lineTo(0,0),e.moveTo(o,r),e.lineTo(0,0)}e.stroke()}},{key:"gizmoRectangle",value:function(e){e.clear();var t=this.rectangleThickness.x,n=this.rectangleThickness.y;e.moveTo(t,n),e.lineTo(-t,n),e.lineTo(-t,-n),e.lineTo(t,-n),e.close(),e.stroke()}},{key:"createArcPath",value:function(e,t,n,i){if(!(t<=0))for(var a=(i-n)/48,o=0;o<=48;o++){var r=n+o*a,s=t*Math.cos(nt(r)),l=t*Math.sin(nt(r));0===o?e.moveTo(s,l):e.lineTo(s,l)}}}]),e}()).prototype,"shape",[iA],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return WA.Circle}}),fA=l(yA.prototype,"emitFrom",[aA],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return VA.Base}}),mA=l(yA.prototype,"position",[oA],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new te(0,0,0)}}),gA=l(yA.prototype,"rotation",[rA],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new te(0,0,0)}}),bA=l(yA.prototype,"scale",[sA],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new te(1,1,1)}}),SA=l(yA.prototype,"arc",[lA],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 360}}),kA=l(yA.prototype,"angle",[uA],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 25}}),CA=l(yA.prototype,"radius",[cA],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),wA=l(yA.prototype,"radiusThickness",[hA],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),EA=l(yA.prototype,"rectangleThickness",[dA],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new ve(20,50)}}),pA=yA))||pA);N._RF.pop(),N._RF.push({},"1b7c1WztGdLzKO8gh4ulm2c","SizeOvertimeModule",void 0);var JA,XA,ZA,QA,eT,tT,nT,iT,aT,oT=z.ccclass,rT=z.property,sT=kE,lT=(PA=oT("SizeOvertimeModule"),_A=rT({type:Q}),BA=rT(Q),DA=rT({type:eE,visible:function(){return!this.separateAxes}}),OA=rT({type:eE,visible:function(){return this.separateAxes}}),IA=rT({type:eE,visible:function(){return this.separateAxes}}),PA((zA=l((FA=function(){function e(){a(this,e),u(this,"enable",zA,this),u(this,"separateAxes",xA,this),u(this,"size",GA,this),u(this,"x",MA,this),u(this,"y",UA,this),this.size.constant=1,this.x.constant=1,this.y.constant=1}return o(e,[{key:"update",value:function(e){if(this.enable){var t=1-e.remainingLifetime/e.startLifetime,n=e.randomSeed+sT;if(this.separateAxes){var i=lE(this.x)?tt(n):0,a=lE(this.y)?tt(n):0;e.size.x=e.startSize.x*this.x.evaluate(t,i),e.size.y=e.startSize.y*this.y.evaluate(t,a)}else{var o=lE(this.size)?tt(n):0,r=this.size.evaluate(t,o);e.size.multiplyScalar(r)}}}}]),e}()).prototype,"enable",[_A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xA=l(FA.prototype,"separateAxes",[BA],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),GA=l(FA.prototype,"size",[DA],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new eE}}),MA=l(FA.prototype,"x",[OA],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new eE}}),UA=l(FA.prototype,"y",[IA],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new eE}}),NA=FA))||NA);N._RF.pop(),N._RF.push({},"f6ad5Yz6wpE2ZzModn16CYQ","VelocityOvertimeModule",void 0);var uT,cT,hT,dT,pT,yT,vT,fT,mT,gT,bT,ST,kT,CT,wT,ET,AT,TT,RT,LT,PT,_T,BT,DT,OT,IT,NT,FT,zT,xT,GT,MT,UT,HT,jT,WT,VT,$T,qT,KT,YT,JT,XT,ZT,QT,eR,tR,nR,iR,aR,oR,rR,sR,lR,uR,cR,hR,dR,pR,yR,vR,fR=z.ccclass,mR=z.property,gR=(JA=fR("VelocityOvertimeModule"),XA=mR({type:Q}),ZA=mR({type:eE}),QA=mR({type:eE}),JA((nT=l((tT=function(){function e(){a(this,e),u(this,"enable",nT,this),u(this,"x",iT,this),u(this,"y",aT,this),this._temp_v3=new te,this.x.constant=0,this.y.constant=0}return o(e,[{key:"update",value:function(e,t){if(this.enable){var n=1-e.remainingLifetime/e.startLifetime,i=lE(this.x)?tt(e.randomSeed+EE):0,a=lE(this.y)?tt(e.randomSeed+AE):0,o=te.set(this._temp_v3,this.x.evaluate(n,i),this.y.evaluate(n,a),0);e.velocity.add(o.multiplyScalar(t))}}}]),e}()).prototype,"enable",[XA],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),iT=l(tT.prototype,"x",[ZA],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new eE}}),aT=l(tT.prototype,"y",[QA],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new eE}}),eT=tT))||eT);N._RF.pop(),N._RF.push({},"10bc3IfFqBLtpSgVri/NVeX","ParticleSystem",void 0);var bR,SR,kR,CR,wR,ER,AR,TR=z.ccclass,RR=z.property,LR=z.executeInEditMode,PR=z.disallowMultiple,_R=z.playOnFocus,BR=it.Attr.setClassAttr,DR=fe({World:0,Local:1}),OR=(uT=TR("ParticleSystem"),cT=LR(!0),hT=PR(!0),dT=_R(!0),pT=RR({}),yT=RR({formerlySerializedAs:"preview"}),vT=RR(Q),fT=RR({type:fe(DR)}),mT=RR({formerlySerializedAs:"simulationSpace"}),gT=RR(V),bT=RR(Q),ST=RR({type:eE}),kT=RR({type:eE}),CT=RR(rE),wT=RR(Q),ET=RR({type:eE,formerlySerializedAs:"startSize"}),AT=RR({type:eE,visible:function(){return this.startSize2D}}),TT=RR({type:eE}),RT=RR(Q),LT=RR({type:eE,visible:function(){return this.startRotation3D}}),PT=RR({type:eE,visible:function(){return this.startRotation3D}}),_T=RR({type:eE,formerlySerializedAs:"startRotation"}),BT=RR({type:eE}),DT=RR({type:eE}),OT=RR({type:YA}),IT=RR({type:gR}),NT=RR({type:lT}),FT=RR({type:LA}),zT=RR({type:xE}),xT=RR({type:tA}),GT=RR(Ow),MT=RR({serializable:!0}),UT=RR({type:Ee}),uT(HT=cT(HT=hT(HT=dT((l((jT=function(e){n(r,e);var t=i(r);function r(){var e;return a(this,r),e=t.call(this),u(e,"_preview",WT,c(e)),u(e,"playOnAwake",VT,c(e)),u(e,"_simulationSpace",$T,c(e)),u(e,"duration",qT,c(e)),u(e,"loop",KT,c(e)),u(e,"startDelay",YT,c(e)),u(e,"startLifetime",JT,c(e)),u(e,"startColor",XT,c(e)),u(e,"startSize2D",ZT,c(e)),u(e,"startSizeX",QT,c(e)),u(e,"startSizeY",eR,c(e)),u(e,"startSpeed",tR,c(e)),u(e,"startRotation3D",nR,c(e)),u(e,"startRotationX",iR,c(e)),u(e,"startRotationY",aR,c(e)),u(e,"startRotationZ",oR,c(e)),u(e,"gravityModifier",rR,c(e)),u(e,"rateOverTime",sR,c(e)),u(e,"shapeModule",lR,c(e)),u(e,"velocityOvertimeModule",uR,c(e)),u(e,"sizeOvertimeModule",cR,c(e)),u(e,"rotationOvertimeModule",hR,c(e)),u(e,"colorOvertimeModule",dR,c(e)),u(e,"limitVelocityOvertimeModule",pR,c(e)),u(e,"bursts",yR,c(e)),u(e,"_spriteFrame",vR,c(e)),e._renderSpriteFrame=null,e.time=0,e.emitRateTimeCounter=0,e.isPlaying=!1,e.isStopped=!0,e.isEmitting=!1,e.startLifetime.constant=5,e.startSizeX.constant=1,e.startSpeed.constant=5,e.rateOverTime.constant=10,e.initProperties(),e}return o(r,[{key:"preview",get:function(){return this._preview},set:function(e){this._preview=e,e?this._startPreview():this._stopPreview()}},{key:"simulationSpace",get:function(){return this._simulationSpace},set:function(e){this._simulationSpace=e,this._updateMaterial(),this._updateSimulationSpace()}},{key:"spriteFrame",get:function(){return this._spriteFrame},set:function(e){this._renderSpriteFrame!==e&&(this._renderSpriteFrame=e,e&&!e._uuid||(this._spriteFrame=e),this._applySpriteFrame())}},{key:"assembler",get:function(){return this._assembler}},{key:"onEnable",value:function(){p(y(r.prototype),"onEnable",this).call(this),this._updateMaterial(),this._updateSimulationSpace()}},{key:"onDestroy",value:function(){p(y(r.prototype),"onDestroy",this).call(this)}},{key:"initProperties",value:function(){this._simulator=new dE(this)}},{key:"onFocusInEditor",value:function(){this._startPreview()}},{key:"onLostFocusInEditor",value:function(){this._stopPreview()}},{key:"_startPreview",value:function(){this._preview&&this.play()}},{key:"_stopPreview",value:function(){this._preview||(this.play(),this.stop())}},{key:"__preload",value:function(){p(y(r.prototype),"__preload",this).call(this),this.spriteFrame&&!this._renderSpriteFrame&&this._applySpriteFrame(),this.playOnAwake&&this.play()}},{key:"start",value:function(){this.node.position=new te(this.node.position.x,this.node.position.y,100)}},{key:"play",value:function(){this.isStopped&&(this.isStopped=!1),this.time=0,this.isPlaying=!0,this.isStopped=!1,this.isEmitting=!0,this._simulator.reset(),this.markForUpdateRenderData()}},{key:"stop",value:function(){this.isPlaying&&(this.isPlaying=!1),this.isEmitting&&(this.isEmitting=!1),this.isStopped=!0,this._simulator.reset(),this._simulator.stop()}},{key:"_flushAssembler",value:function(){var e,t=de.Assembler.getAssembler(this);if(this._assembler!==t&&(this._assembler=t),null!==(e=this._assembler)&&void 0!==e&&e.createData){var n=this._simulator,i=n.renderData;i||(i=n.renderData=this._assembler.createData(this),n.uvFilled=0,i.particleInitRenderDrawInfo(this.renderEntity),n.initDrawInfo())}}},{key:"_applySpriteFrame",value:function(){this._renderSpriteFrame=this._renderSpriteFrame||this._spriteFrame,this._renderSpriteFrame?this._renderSpriteFrame.texture&&(this._simulator&&this._simulator.updateUVs(!0),this._updateMaterial(),this.isStopped=!1,this.markForUpdateRenderData()):this.stop()}},{key:"_updateMaterial",value:function(){if(this._customMaterial){var e;this.setSharedMaterial(this._customMaterial,0);var t=null===(e=this.getRenderMaterial(0))||void 0===e||null===(e=e.passes[0])||void 0===e?void 0:e.blendState.targets[0];t&&(this._dstBlendFactor=t.blendDst,this._srcBlendFactor=t.blendSrc)}var n=this.getMaterialInstance(0);n&&n.recompileShaders({USE_LOCAL:this.simulationSpace===DR.Local}),n&&n.passes.length>0&&this._updateBlendFunc()}},{key:"_finishedSimulation",value:function(){this.stop(),this.markForUpdateRenderData()}},{key:"_canRender",value:function(){return p(y(r.prototype),"_canRender",this).call(this)&&!this.isStopped&&null!==this._renderSpriteFrame&&void 0!==this._renderSpriteFrame}},{key:"_render",value:function(e){this.simulationSpace===DR.Local?e.commitComp(this,this._simulator.renderData,this._renderSpriteFrame,this._assembler,this.node):this.simulationSpace===DR.World&&e.commitComp(this,this._simulator.renderData,this._renderSpriteFrame,this._assembler,null)}},{key:"_updateSimulationSpace",value:function(){var e;"function"==typeof(null===(e=this._renderEntity)||void 0===e?void 0:e.setRenderTransform)&&(this.simulationSpace===DR.Local?(this._renderEntity.setRenderTransform(this.node),this._renderEntity.setUseLocal(!0)):this.simulationSpace===DR.World&&(this._renderEntity.setRenderTransform(null),this._renderEntity.setUseLocal(!1)))}},{key:"lateUpdate",value:function(e){this.isPlaying&&(this.time+=e,this._simulator.step(e))}},{key:"emitting",value:function(e){var t=this,n=this.startDelay.evaluate(0,1);if(this.time>n&&this.time>this.duration+n&&(this.loop||(this.isEmitting=!1)),this.isEmitting){if(this.emitRateTimeCounter+=this.rateOverTime.evaluate(this.time/this.duration,1)*e,this.emitRateTimeCounter>1){var i=Math.floor(this.emitRateTimeCounter);this.emitRateTimeCounter-=i,this.emit(i,e)}var a,o=s(this.bursts);try{for(o.s();!(a=o.n()).done;){a.value.update(this,e)}}catch(e){o.e(e)}finally{o.f()}}var r=this.gravityModifier.evaluate(this.time/this.duration,1);0!==this._simulator.particles.length||this.isEmitting||!this.isPlaying?this._simulator.particles.forEach((function(n,i){t.sizeOvertimeModule.update(n),t.rotationOvertimeModule.update(n,e),t.colorOvertimeModule.update(n),t.velocityOvertimeModule.update(n,e),t.applyGravityModifier(n,r),t.limitVelocityOvertimeModule.update(n,e),n.pos.add(n.velocity.clone().multiplyScalar(e))})):this._finishedSimulation()}},{key:"emit",value:function(e,t){if(null!==this.spriteFrame)for(var n=this.time%this.duration/this.duration,i=0;i<e;i++){var a=this._simulator.emitParticle();if(a.init(),this.shapeModule.emit(a),this.simulationSpace===DR.World){var o=this.node.worldMatrix;a.pos.x+=o.m12,a.pos.y+=o.m13}var r=this.startSpeed.evaluate(n,this.rand());a.velocity.multiplyScalar(r),a.width=this.spriteFrame.width,a.height=this.spriteFrame.height;var s=this.startSizeX.evaluate(n,this.rand()),l=this.startSize2D?new te(s,this.startSizeY.evaluate(n,this.rand()),1):new te(s,s,1);a.startSize=l.clone(),a.size=l.clone();var u=this.startRotationZ.evaluate(n,this.rand()),c=this.startRotation3D?new te(this.startRotationX.evaluate(n,this.rand()),this.startRotationY.evaluate(n,this.rand()),u):new te(0,0,u);a.rotation=c,a.startColor=this.startColor.evaluate(n,this.rand()).clone(),a.color=a.startColor.clone(),a.startLifetime=this.startLifetime.evaluate(n,this.rand())+t,a.remainingLifetime=a.startLifetime,a.randomSeed=Xe(0,233280)}}},{key:"applyGravityModifier",value:function(e,t){e.velocity.add(new te(0,-9.8*t,0))}},{key:"rand",value:function(){return tt(Xe(0,Ke.INT_MAX))}}]),r}(at)).prototype,"preview",[pT],Object.getOwnPropertyDescriptor(jT.prototype,"preview"),jT.prototype),WT=l(jT.prototype,"_preview",[yT],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),VT=l(jT.prototype,"playOnAwake",[vT],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),l(jT.prototype,"simulationSpace",[fT],Object.getOwnPropertyDescriptor(jT.prototype,"simulationSpace"),jT.prototype),$T=l(jT.prototype,"_simulationSpace",[mT],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return DR.Local}}),qT=l(jT.prototype,"duration",[gT],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),KT=l(jT.prototype,"loop",[bT],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),YT=l(jT.prototype,"startDelay",[ST],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new eE}}),JT=l(jT.prototype,"startLifetime",[kT],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new eE}}),XT=l(jT.prototype,"startColor",[CT],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new rE}}),ZT=l(jT.prototype,"startSize2D",[wT],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),QT=l(jT.prototype,"startSizeX",[ET],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new eE}}),eR=l(jT.prototype,"startSizeY",[AT],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new eE}}),tR=l(jT.prototype,"startSpeed",[TT],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new eE}}),nR=l(jT.prototype,"startRotation3D",[RT],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),iR=l(jT.prototype,"startRotationX",[LT],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new eE}}),aR=l(jT.prototype,"startRotationY",[PT],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new eE}}),oR=l(jT.prototype,"startRotationZ",[_T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new eE}}),rR=l(jT.prototype,"gravityModifier",[BT],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new eE}}),sR=l(jT.prototype,"rateOverTime",[DT],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new eE}}),lR=l(jT.prototype,"shapeModule",[OT],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new YA}}),uR=l(jT.prototype,"velocityOvertimeModule",[IT],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new gR}}),cR=l(jT.prototype,"sizeOvertimeModule",[NT],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new lT}}),hR=l(jT.prototype,"rotationOvertimeModule",[FT],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new LA}}),dR=l(jT.prototype,"colorOvertimeModule",[zT],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new xE}}),pR=l(jT.prototype,"limitVelocityOvertimeModule",[xT],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new tA}}),yR=l(jT.prototype,"bursts",[RR,GT],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),vR=l(jT.prototype,"_spriteFrame",[MT],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),l(jT.prototype,"spriteFrame",[UT],Object.getOwnPropertyDescriptor(jT.prototype,"spriteFrame"),jT.prototype),HT=jT))||HT)||HT)||HT)||HT);BR(OR,"color","visible",!1),N._RF.pop(),N._RF.push({},"442c2KaGHdNip4TBoeKOOoY","RendererModule",void 0);var IR,NR=z.ccclass,FR=z.property;bR=NR("RendererModule"),SR=FR(ot),kR=FR(Ee),bR((ER=l((wR=o((function e(){a(this,e),u(this,"material",ER,this),u(this,"spriteFrame",AR,this)}))).prototype,"material",[SR],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),AR=l(wR.prototype,"spriteFrame",[kR],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),CR=wR));N._RF.pop(),N._RF.push({},"c20acgKcuRFP6+Am/XjOFeP","ParticleSystem2DExtra",void 0);var zR,xR=z.ccclass,GR=z.disallowMultiple,MR=z.executeInEditMode,UR=z.requireComponent,HR=xR("ParticleSystem2DExtra")(IR=MR(!0)(IR=GR(!0)(IR=UR(de)(IR=function(e){n(r,e);var t=i(r);function r(){var e;a(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).emitParticle=function(t){return function(n){t(n);var i=e.particleSystem._simulator.particles.length,a=e.particleSystem._simulator.particles[i-1];e.initParticle(a)}},e.step=function(t){return function(n){for(var i=e.particleSystem._simulator.particles,a=0;a<i.length;a++){var o=i[a];e.updateParticle(o,n)}t(n)}},e}return o(r,[{key:"__preload",value:function(){this.particleSystem=this.getComponent(de),this.validateRequiredComponents(),this.overrideFunctions()}},{key:"overrideFunctions",value:function(){var e=this.particleSystem._simulator.emitParticle.bind(this.particleSystem._simulator);this.particleSystem._simulator.emitParticle=this.emitParticle(e);var t=this.particleSystem._simulator.step.bind(this.particleSystem._simulator);this.particleSystem._simulator.step=this.step(t)}},{key:"validateRequiredComponents",value:function(){Nt.lazyValidateProperties(this)}}]),r}(U))||IR)||IR)||IR)||IR;N._RF.pop(),N._RF.push({},"664feJL84ZOTaM99dgWY4x0","ExampleParticleSystem2DExtra",void 0);var jR;(0,z.ccclass)("ExampleParticleSystem2DExtra")(zR=function(e){n(r,e);var t=i(r);function r(){return a(this,r),t.apply(this,arguments)}return o(r,[{key:"initParticle",value:function(e){e.maxSize=pe.randomRange(.25,1)*e.size,e.size=0,e.deltaSize=0,e.cycleDuration=pe.randomRange(.4,.6),e.life=e.timeToLive,this.setInitPosition(e.pos)}},{key:"updateParticle",value:function(e,t){this.updateScale(e)}},{key:"setInitPosition",value:function(e){var t=e.x,n=e.y;return e.x=t+pe.randomRange(-350,350),e.y=n+pe.randomRange(-350,350),e}},{key:"updateScale",value:function(e){var t=1-(e.life-e.timeToLive)%e.cycleDuration/e.cycleDuration;e.size=e.maxSize*Math.sin(t*Math.PI)}}]),r}(HR));N._RF.pop(),N._RF.push({},"4a9beTdMntC0q9yngb8a2go","BootScene",void 0);var WR,VR=z.ccclass,$R=z.disallowMultiple,qR=Ludex,KR=qR.Events,YR=(qR.Utils.Valid,qR.Configs.Core.StartSDKAfterLoadGame),JR=qR.Plugins.Ads,XR=((void 0===JR?{}:JR).Types,codex),ZR=XR.ads,QR=XR.player,eL=XR.event,tL=XR.context;VR("BootScene")(jR=$R(jR=function(e){n(c,e);var r,s,l,u=i(c);function c(){var e;a(this,c);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=u.call.apply(u,[this].concat(i))).setupLoadingFullScreen=function(){YR?(L.addShowedScene(B.BOOT_SCENE),QR.isFirstSession()?L.addShowedScene(B.GAME_SCENE):L.addShowedScene(B.DASHBOARD_SCENE)):L.showLoadingFullScreen(B.BOOT_SCENE)},e.processWhenGameSdkStarted=function(){e.sendMsGamesDailyNotification()},e.loadBundles=t((function*(){return Promise.all([h.loadBundle("loadable")])})),e.loadWasmModules=t((function*(){if("SOLO"!==tL.getContextType()||QR.isFirstSession())return Promise.all([D.loadModuleAsync("spine")])})),e.lazyLoadWasmModules=t((function*(){yield Promise.all([D.loadModuleAsync("spine")])})),e.handlePauseAudio=function(){GameSDK.isGameSDK("YoutubePlayables")?GameSDK.extra.onAudioEnabledChange((function(e){S.muteAudio(!e),QR.setSetting("sound",e),QR.setSetting("music",e)})):(eL.on(KR.VISIBILITY_HIDDEN,e.handleMuteAudio),eL.on(KR.VISIBILITY_VISIBLE,e.handleUnMuteAudio))},e.handleMuteAudio=function(){console.debug("handleMuteAudio"),S.muteAudio(!0)},e.handleUnMuteAudio=function(){console.debug("handleUnMuteAudio"),null!=ZR&&ZR.isAdFullSizeShowing()||S.muteAudio(!1)},e}return o(c,[{key:"__preload",value:function(){this.setupAndroidPlatformAds(),this.processCrazyGamesLoadingStart(),this.preloadAssets(),this.listenEvents()}},{key:"preloadAssets",value:(l=t((function*(){try{J.pause(),yield Promise.all([this.loadWasmModules(),this.loadBundles()])}catch(e){console.warn("processPreloadAssets",e)}finally{null!=ZR&&ZR.isAdFullSizeShowing()||J.resume()}})),function(){return l.apply(this,arguments)})},{key:"onLoad",value:function(){this.handlePauseAudio(),this.preloadNotificationScreen(),this.overrideGameSDK(),this.setupLoadingFullScreen()}},{key:"start",value:(s=t((function*(){yield GameSDK.extra.waitSDKInitiatedAsync(),this.processCrazyGamesLoadingStop(),this.setupYoutubeAudioSync()})),function(){return s.apply(this,arguments)})},{key:"setupYoutubeAudioSync",value:function(){GameSDK.isGameSDK("YoutubePlayables")&&(GameSDK.extra.isAudioEnabled()||S.muteAudio(!0))}},{key:"listenEvents",value:function(){eL.catchUp(KR.GAME_READY,this.lazyLoadWasmModules),eL.catchUp(KR.GAME_SDK_STARTED,this.processWhenGameSdkStarted)}},{key:"overrideGameSDK",value:function(){if("FBInstant"in window&&"shareAsync"in FBInstant){var e=FBInstant.shareAsync;FBInstant.shareAsync=function(){var n=t((function*(t){var n=d({},t);return e(n)}));return function(e){return n.apply(this,arguments)}}()}}},{key:"processCrazyGamesLoadingStart",value:function(){"gameLoadingStart"in GameSDK.extra&&GameSDK.extra.gameLoadingStart()}},{key:"processCrazyGamesLoadingStop",value:function(){"gameLoadingStop"in GameSDK.extra&&GameSDK.extra.gameLoadingStop()}},{key:"setupAndroidPlatformAds",value:function(){}},{key:"sendMsGamesDailyNotification",value:function(){var e=GameSDK.extra;"sendDailyNotificationAsync"in e&&e.sendDailyNotificationAsync().catch((function(e){console.warn("sendMsGamesDailyNotification",e)}))}},{key:"preloadNotificationScreen",value:(r=t((function*(){yield h.preloadPrefab("screens/NotificationScreen")})),function(){return r.apply(this,arguments)})}]),c}(U))||jR);N._RF.pop(),N._RF.push({},"3f6029o9mpM/K2ccwbuv3XD","EndlessScene",void 0);var nL,iL=z.ccclass,aL=z.disallowMultiple,oL=codex,rL=oL.audio,sL=oL.ads,lL=m.Layout,uL=m.DesignSize.Portrait;iL("EndlessScene")(WR=aL(WR=function(e){n(r,e);var t=i(r);function r(){var e;a(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).handleGameMaskWhenLayoutChanged=function(e){var t=ge("Canvas/Game/GameObjects");if(t){var n=t.getComponent(Be);n&&(n.enabled=e===lL.Landscape)}},e.handleAdsWhenResize=function(){e.checkBottomBannerAdSize(),e.setMaxSizeSideBannerAd()},e.attemptCallSubscribeBot=function(){"subscribeBotAsync"in GameSDK.extra&&GameSDK.extra.subscribeBotAsync().catch((function(e){console.warn("subscribeBotAsync",e)}))},e}return o(r,[{key:"__preload",value:function(){this.validateRequiredComponents(),this.listenGameEvents()}},{key:"validateRequiredComponents",value:function(){Nt.lazyValidateProperties(this)}},{key:"onLoad",value:function(){}},{key:"listenGameEvents",value:function(){this.node.scene.on(f.LAYOUT_CHANGED,this.handleGameMaskWhenLayoutChanged),this.node.scene.on(f.VIEW_RESIZED,this.handleAdsWhenResize)}},{key:"checkBottomBannerAdSize",value:function(){var e=ye.instance.getVisibleSize(),t=g.worldSizeToCssSize(e.height*O.MAX_BOTTOM_BANNER_RATIO);Ludex.Configs.Ads.BannerDisplayAdOptions.forEach((function(e){var n=e.PlacementId,i=e.Position,a=e.BannerHeight;"bottom"===i&&(a>t?sL.hideBannerAdAsync(n).catch((function(e){})):sL.showBannerAdAsync(n).catch((function(e){})))}))}},{key:"setMaxSizeSideBannerAd",value:function(){var e=GameSDK.extra;if("setSideBannerAdRemainSize"in e){var t=ye.instance.getVisibleSize(),n=uL.WIDTH+24,i=(t.width-n)/2,a=g.worldSizeToCssSize(i);e.setSideBannerAdRemainSize(a)}}},{key:"start",value:function(){this.scheduleOnce(this.attemptCallSubscribeBot,.5),this.updateVolumeBackgroundMusic()}},{key:"updateVolumeBackgroundMusic",value:function(){rL.setVolume(1,"global_music")}}]),r}(U))||WR);N._RF.pop(),N._RF.push({},"9b83boaSv9PE6mRFqy0MSI8","GameScene",void 0);var cL,hL,dL,pL,yL,vL,fL,mL,gL,bL,SL,kL,CL,wL,EL,AL,TL,RL,LL=z.ccclass,PL=z.disallowMultiple,_L=codex,BL=_L.audio,DL=_L.ads,OL=m.Layout,IL=m.DesignSize.Portrait;LL("GameScene")(nL=PL(nL=function(e){n(r,e);var t=i(r);function r(){var e;a(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).handleGameMaskWhenLayoutChanged=function(e){var t=ge("Canvas/Game/GameObjects");if(t){var n=t.getComponent(Be);n&&(n.enabled=e===OL.Landscape)}},e.handleAdsWhenResize=function(){e.checkBottomBannerAdSize(),e.setMaxSizeSideBannerAd()},e.attemptCallSubscribeBot=function(){"subscribeBotAsync"in GameSDK.extra&&GameSDK.extra.subscribeBotAsync().catch((function(e){console.warn("subscribeBotAsync",e)}))},e}return o(r,[{key:"__preload",value:function(){this.validateRequiredComponents(),this.listenGameEvents()}},{key:"validateRequiredComponents",value:function(){Nt.lazyValidateProperties(this)}},{key:"listenGameEvents",value:function(){J.on(f.VIEW_RESIZED,this.handleAdsWhenResize),J.on(f.LAYOUT_CHANGED,this.handleGameMaskWhenLayoutChanged)}},{key:"checkBottomBannerAdSize",value:function(){var e=ye.instance.getVisibleSize(),t=g.worldSizeToCssSize(e.height*O.MAX_BOTTOM_BANNER_RATIO);Ludex.Configs.Ads.BannerDisplayAdOptions.forEach((function(e){var n=e.PlacementId,i=e.Position,a=e.BannerHeight;"bottom"===i&&(a>t?DL.hideBannerAdAsync(n).catch((function(e){})):DL.showBannerAdAsync(n).catch((function(e){})))}))}},{key:"setMaxSizeSideBannerAd",value:function(){var e=GameSDK.extra;if("setSideBannerAdRemainSize"in e){var t=ye.instance.getVisibleSize(),n=IL.WIDTH+24,i=(t.width-n)/2,a=g.worldSizeToCssSize(i);e.setSideBannerAdRemainSize(a)}}},{key:"start",value:function(){this.scheduleOnce(this.attemptCallSubscribeBot,.5),this.updateVolumeBackgroundMusic(),this.scheduleOnce(this.preloadScenes,2)}},{key:"preloadScenes",value:function(){_.preloadDashboardScene()}},{key:"updateVolumeBackgroundMusic",value:function(){BL.setVolume(1,"global_music")}}]),r}(U))||nL);N._RF.pop(),N._RF.push({},"11abe47Ss1CtabSFT1/cPKt","PlayableScene",void 0);var NL,FL=z.ccclass,zL=z.property,xL=z.disallowMultiple,GL=codex.analytics;cL=FL("PlayableScene"),hL=Nt.required(),dL=zL({type:oe}),pL=Nt.required(),yL=zL({type:OR}),vL=Nt.required(),fL=zL({type:OR}),mL=Nt.required(),gL=zL({type:x}),bL=Nt.onlyRunInLifeCycleAsync,SL=Nt.onlyRunInLifeCycle,kL=Nt.onlyRunInLifeCycle,cL(CL=xL((EL=l((wL=function(e){n(d,e);var r,s,l,h=i(d);function d(){var e;return a(this,d),e=h.call(this),u(e,"label",EL,c(e)),u(e,"particleLeft",AL,c(e)),u(e,"particleRight",TL,c(e)),u(e,"backgroundAnimation",RL,c(e)),_.markIsTestScene(B.PLAYABLE_SCENE),e}return o(d,[{key:"__preload",value:function(){this.listenEvents()}},{key:"onLoad",value:function(){Nt.validateRequiredProperties(this)}},{key:"listenEvents",value:function(){}},{key:"start",value:(l=t((function*(){GL.event("ready_playable"),yield this.waitViewable(),this.playTweens(),this.playParticles(),this.playAnimations(),GL.event("showing_playable"),setTimeout((function(){"openAppStore"in GameSDK.extra&&GameSDK.extra.openAppStore()}),1e4)})),function(){return l.apply(this,arguments)})},{key:"waitViewable",value:(s=t((function*(){"isViewable"in GameSDK.extra&&(GameSDK.extra.isViewable()||"waitViewableChange"in GameSDK.extra&&(J.pause(),(yield GameSDK.extra.waitViewableChange())?J.resume():yield this.waitViewable()))})),function(){return s.apply(this,arguments)})},{key:"playTweens",value:(r=t((function*(){var e=q(this.label.node).to(10,{position:new te(0,200,0)},{easing:"cubicInOut"}).to(6,{position:new te(0,-100,0)},{easing:"cubicInOut"});v.runTweenAsync(q(this.label.node).repeat(999,e))})),function(){return r.apply(this,arguments)})},{key:"playParticles",value:function(){console.log("playParticles",this.particleLeft,this.particleRight),this.particleLeft.play(),this.particleRight.play()}},{key:"playAnimations",value:function(){this.backgroundAnimation.play()}}]),d}(U)).prototype,"label",[hL,dL],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),AL=l(wL.prototype,"particleLeft",[pL,yL],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),TL=l(wL.prototype,"particleRight",[vL,fL],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),RL=l(wL.prototype,"backgroundAnimation",[mL,gL],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),l(wL.prototype,"playTweens",[bL],Object.getOwnPropertyDescriptor(wL.prototype,"playTweens"),wL.prototype),l(wL.prototype,"playParticles",[SL],Object.getOwnPropertyDescriptor(wL.prototype,"playParticles"),wL.prototype),l(wL.prototype,"playAnimations",[kL],Object.getOwnPropertyDescriptor(wL.prototype,"playAnimations"),wL.prototype),CL=wL))||CL);N._RF.pop(),N._RF.push({},"16f4aNBnvRI1Z/6f8l+RIiE","TestLayoutScene",void 0);var ML,UL,HL,jL,WL,VL=z.ccclass,$L=z.disallowMultiple;VL("TestLayoutScene")(NL=$L(NL=function(e){n(r,e);var t=i(r);function r(){var e;return a(this,r),(e=t.call(this)).handleLayoutChange=function(){L.showNotificationScreen("Layout changed")},_.markIsTestScene(B.TEST_LAYOUT_SCENE),e}return o(r,[{key:"start",value:function(){this.isValid&&this.listenGameEvents()}},{key:"listenGameEvents",value:function(){J.on(f.LAYOUT_CHANGED,this.handleLayoutChange)}},{key:"switchScene",value:function(){_.switchScene(B.DASHBOARD_SCENE)}}]),r}(U))||NL);N._RF.pop(),N._RF.push({},"b5a9b5CfCVE56tnPfBAE8JR","TestParticleSystemScene",void 0);var qL,KL=z.ccclass,YL=z.property;ML=KL("TestParticleSystemScene"),UL=YL(OR),ML((WL=l((jL=function(e){n(r,e);var t=i(r);function r(){var e;return a(this,r),e=t.call(this),u(e,"starParticleSystem",WL,c(e)),_.markIsTestScene(B.TEST_PARTICLE_SYSTEM_SCENE),e}return o(r,[{key:"start",value:function(){var e=this;this.isValid&&this.scheduleOnce((function(){e.starParticleSystem.play()}),1)}}]),r}(U)).prototype,"starParticleSystem",[UL],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),HL=jL));N._RF.pop(),N._RF.push({},"03336l0Yy9BkI817xYNA8KM","TestPerformanceScene",void 0);var JL,XL=z.ccclass,ZL=z.disallowMultiple;XL("TestPerformanceScene")(qL=ZL(qL=function(e){n(r,e);var t=i(r);function r(){var e;return a(this,r),e=t.call(this),_.markIsTestScene(B.TEST_PERFORMANCE_SCENE),e}return o(r,[{key:"start",value:function(){this.isValid&&this.listenEvents()}},{key:"listenEvents",value:function(){}}]),r}(U))||qL);N._RF.pop(),N._RF.push({},"0e876/A9rJJh6RiiBfkpaVx","TestScene",void 0);var QL,eP=z.ccclass,tP=z.disallowMultiple,nP=Ludex.Events,iP=codex.event;eP("TestScene")(JL=tP(JL=function(e){n(r,e);var t=i(r);function r(){var e;return a(this,r),e=t.call(this),_.markIsTestScene(B.TEST_SCENE),e}return o(r,[{key:"start",value:function(){this.isValid&&(this.listenScreenEvents(),L.openScreen(P.LOADING_SCREEN,{duration:.5}))}},{key:"listenScreenEvents",value:function(){iP.once(nP.CLOSED_SCREEN,(function(e){e.screenName===I[P.LOADING_SCREEN]&&L.openScreen(P.NOTIFICATION_SCREEN,{message:"Test screen events pass!",duration:2,isCloseButtonVisible:!1})}))}}]),r}(U))||JL);N._RF.pop(),N._RF.push({},"0a69a5acDJJDrbwLJnxnyXY","AdsFlows",void 0);var aP,oP,rP,sP,lP,uP,cP,hP,dP=z.ccclass,pP=Ludex.Plugins.Ads.Types;dP("AdsFlows")(QL=function(e){n(r,e);var t=i(r);function r(){return a(this,r),t.apply(this,arguments)}return o(r,[{key:"preloadAds",value:function(){w.preloadAds()}},{key:"checkServiceDegraded",value:function(){var e=w.isServiceDegraded();L.showNotificationScreen("Service degraded: ".concat(e?"true":"false"))}},{key:"loadInterstitialAd",value:function(){w.preloadAdsByType(pP.INTERSTITIAL)}},{key:"loadRewardedVideoAd",value:function(){w.preloadAdsByType(pP.REWARDED_VIDEO)}},{key:"loadRewardedInterstitialAd",value:function(){w.preloadAdsByType(pP.REWARDED_INTERSTITIAL)}},{key:"showInterstitialAd",value:function(){w.showInterstitialAdAsync({contextType:"browse"})}},{key:"showRewardedVideoAd",value:function(){w.showRewardVideoAdAsync({contextType:"reward",forceLoad:!0})}},{key:"showRewardedInterstitialAd",value:function(){w.showRewardedInterstitialAdAsync({contextType:"reward",forceLoad:!0})}},{key:"showBannerAd",value:function(){w.showBannerAds()}},{key:"hideBannerAd",value:function(){w.hideBannerAds()}},{key:"showAdsenseInterstitialAd",value:function(){w.showInterstitialAdAsync({adService:"adsense"})}},{key:"showAdsenseRewardedVideoAd",value:function(){w.showRewardVideoAdAsync({adService:"adsense",forceLoad:!0})}},{key:"showAdsenseRewardedInterstitialAd",value:function(){w.showRewardedInterstitialAdAsync({adService:"adsense",forceLoad:!0})}}]),r}(U));N._RF.pop(),N._RF.push({},"f5c69RbYb1Cl4DusuWnM8MV","FlowChallenge",void 0);var yP,vP,fP,mP,gP,bP=z.ccclass,SP=Ludex.Utils,kP=SP.Decorator,CP=SP.String,wP=SP.Number,EP=codex,AP=EP.match,TP=EP.player,RP=function(e){L.closeLoadingScreen(),e instanceof Error&&L.showNotificationScreen(e.message)};aP=bP("FlowChallenge"),oP=kP.tryCatch(RP),rP=kP.tryCatch(RP),sP=kP.tryCatch(RP),lP=kP.tryCatch(RP),uP=kP.tryCatch(RP),aP((l((hP=function(e){n(d,e);var r,s,l,u,c,h=i(d);function d(){var e;a(this,d);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return(e=h.call.apply(h,[this].concat(n))).playerId="",e.matchId="",e.contextId="",e.opponentId="",e}return o(d,[{key:"onLoad",value:function(){this.playerId=TP.getPlayerId(),this.matchId=CP.generateObjectId(),this.contextId=CP.generateObjectId(),this.opponentId=CP.generateObjectId()}},{key:"inviteFriends",value:(c=t((function*(){L.showLoadingScreen(0),yield AP.challenge.invite.processAsync({playerId:this.playerId,extraData:{rescued:0}})})),function(){return c.apply(this,arguments)})},{key:"challengeFriend",value:(u=t((function*(){var e={playerId:this.playerId,opponentId:this.opponentId};L.showLoadingScreen(0),yield AP.challenge.friend.processAsync(e)})),function(){return u.apply(this,arguments)})},{key:"joinChallenge",value:(l=t((function*(){var e,t=AP.getMatchState(),n={playerId:this.playerId,contextId:CP.generateObjectId(),matchId:null!==(e=t.id)&&void 0!==e?e:this.matchId,opponentId:this.opponentId};L.showLoadingScreen(0),yield AP.challenge.join.processAsync(n)})),function(){return l.apply(this,arguments)})},{key:"continueChallenge",value:(s=t((function*(){var e,t=AP.getMatchState(),n={playerId:this.playerId,matchId:null!==(e=t.id)&&void 0!==e?e:this.matchId,contextId:this.contextId,opponentId:this.opponentId};L.showLoadingScreen(0),yield AP.challenge.continue.processAsync(n)})),function(){return s.apply(this,arguments)})},{key:"finishChallenge",value:(r=t((function*(){L.showLoadingScreen(0),yield AP.challenge.finish.processAsync({playerId:this.playerId,playerScore:wP.random(99999)})})),function(){return r.apply(this,arguments)})}]),d}(U)).prototype,"inviteFriends",[oP],Object.getOwnPropertyDescriptor(hP.prototype,"inviteFriends"),hP.prototype),l(hP.prototype,"challengeFriend",[rP],Object.getOwnPropertyDescriptor(hP.prototype,"challengeFriend"),hP.prototype),l(hP.prototype,"joinChallenge",[sP],Object.getOwnPropertyDescriptor(hP.prototype,"joinChallenge"),hP.prototype),l(hP.prototype,"continueChallenge",[lP],Object.getOwnPropertyDescriptor(hP.prototype,"continueChallenge"),hP.prototype),l(hP.prototype,"finishChallenge",[uP],Object.getOwnPropertyDescriptor(hP.prototype,"finishChallenge"),hP.prototype),cP=hP));N._RF.pop(),N._RF.push({},"be648IXP/ZCkJ107nu6VzqO","FlowSingle",void 0);var LP,PP,_P,BP,DP,OP,IP,NP,FP,zP=z.ccclass,xP=Ludex.Utils,GP=xP.Decorator,MP=xP.Number,UP=codex,HP=UP.match,jP=UP.player,WP=function(e){L.closeLoadingScreen(),e instanceof Error&&L.showNotificationScreen(e.message)};yP=zP("FlowSingle"),vP=GP.tryCatch(WP),fP=GP.tryCatch(WP),yP((l((gP=function(e){n(u,e);var r,s,l=i(u);function u(){var e;a(this,u);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return(e=l.call.apply(l,[this].concat(n))).playerId="",e}return o(u,[{key:"onLoad",value:function(){this.playerId=jP.getPlayerId()}},{key:"startSingle",value:(s=t((function*(){L.showLoadingScreen(0),yield HP.single.start.processAsync({playerId:this.playerId})})),function(){return s.apply(this,arguments)})},{key:"finishSingle",value:(r=t((function*(){jP.setPlayerDataByName("score",MP.random(1e3)),yield HP.single.finish.processAsync()})),function(){return r.apply(this,arguments)})}]),u}(U)).prototype,"startSingle",[vP],Object.getOwnPropertyDescriptor(gP.prototype,"startSingle"),gP.prototype),l(gP.prototype,"finishSingle",[fP],Object.getOwnPropertyDescriptor(gP.prototype,"finishSingle"),gP.prototype),mP=gP));N._RF.pop(),N._RF.push({},"acb0egHPppFmYJalVNrDDv/","BaseScreen",void 0);var VP,$P=z.ccclass,qP=z.property,KP=z.disallowMultiple,YP=Ludex.Events,JP=codex.event,XP=(LP=$P("BaseScreen"),PP=qP(ie),_P=qP(ie),BP=qP(ae),LP(DP=KP((IP=l((OP=function(e){n(r,e);var t=i(r);function r(){var e;a(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),u(e,"container",IP,c(e)),u(e,"backgroundMask",NP,c(e)),u(e,"screenOpacity",FP,c(e)),e.data={},e}return o(r,[{key:"__preload",value:function(){this.animation=this.getComponent(x),this.backgroundMaskButton=this.backgroundMask.getComponent(Z),this.validateRequiredComponents(),this.initializeNodes()}},{key:"initializeNodes",value:function(){var e=this.getMaskOpacity(),t=this.getContainerOpacity();e&&t&&(e.opacity=0,t.opacity=0)}},{key:"validateRequiredComponents",value:function(){Nt.lazyValidateProperties(this)}},{key:"setScreenOpacity",value:function(e){this.screenOpacity.opacity=e}},{key:"open",value:function(e){var t,n,i=this;e&&(this.data=e),this.animation.once(x.EventType.PLAY,(function(){i.show()})),JP.emit(YP.OPENED_SCREEN,{screenName:this.node.name,screenData:this.data}),this.runAnimation(null!==(t=null===(n=this.data.overrideAnimation)||void 0===n?void 0:n.openScreen)&&void 0!==t?t:"OpenScreen")}},{key:"close",value:function(){var e,t,n=this;this.node.active&&(this.animation.once(x.EventType.FINISHED,(function(){JP.emit(YP.CLOSED_SCREEN,{screenName:n.node.name}),n.hide()})),this.runAnimation(null!==(e=null===(t=this.data.overrideAnimation)||void 0===t?void 0:t.closeScreen)&&void 0!==e?e:"CloseScreen"))}},{key:"runAnimation",value:function(e){if(!this.isAnimationExist(e))throw new Error("".concat(this.node.name,": Animation component must have ").concat(e," clip"));this.animation.play(e)}},{key:"isAnimationExist",value:function(e){return this.animation.clips.some((function(t){return!(!t||t.name!==e)}))}},{key:"getMaskOpacity",value:function(){var e=this.backgroundMask.getComponent(ae);return e||(console.warn("BaseScreen: maskOpacity not found"),null)}},{key:"getContainerOpacity",value:function(){var e=this.container.getComponent(ae);return e||(console.warn("BaseScreen: containerOpacity not found"),null)}},{key:"show",value:function(){this.node.active=!0;var e=this.node.getComponent($);if(e){e.enabled=!0,e.updateAlignment();var t,n=this.node.getComponentsInChildren($),i=s(n);try{for(i.s();!(t=i.n()).done;){t.value.updateAlignment()}}catch(e){i.e(e)}finally{i.f()}}}},{key:"hide",value:function(){this.node.active=!1}}]),r}(U)).prototype,"container",[PP],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),NP=l(OP.prototype,"backgroundMask",[_P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),FP=l(OP.prototype,"screenOpacity",[BP],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),DP=OP))||DP)||DP);N._RF.pop(),N._RF.push({},"f3521L4Mn5I3bhxr0QZJ9y9","BackgroundMask",void 0);var ZP,QP,e_,t_,n_,i_=z.ccclass,a_=z.requireComponent;i_("BackgroundMask")(VP=a_([ae])(VP=function(e){n(r,e);var t=i(r);function r(){return a(this,r),t.apply(this,arguments)}return o(r,[{key:"onLoad",value:function(){var e=this.getComponent(ae);e?(this.opacity=e,this.updateMaskAlpha()):console.warn("BackgroundMask: UIOpacity not found")}},{key:"updateMaskAlpha",value:function(){var e,t,n=this.opacity.opacity/255;e=n,(t=document.getElementById("app-mask"))&&(t.style.background="rgb(0 0 0 / ".concat(e,")"))}}]),r}(U))||VP);N._RF.pop(),N._RF.push({},"d562cAXnG1PQ6vXfOEq2wVu","Screens",void 0);var o_,r_,s_,l_,u_,c_,h_,d_,p_,y_,v_,f_,m_,g_,b_=z.ccclass,S_=z.property,k_=z.executeInEditMode;ZP=b_("Screens"),QP=S_({type:fe(P)}),ZP(e_=k_((n_=l((t_=function(e){n(r,e);var t=i(r);function r(){var e;a(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),u(e,"screenKeys",n_,c(e)),e}return o(r,[{key:"onEnable",value:function(){}},{key:"onDisable",value:function(){}},{key:"onChildrenChanged",value:function(){}}]),r}(U)).prototype,"screenKeys",[QP],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),e_=t_))||e_);N._RF.pop(),N._RF.push({},"cecf2nUBzhIWZw7uJgVliXz","CongratulationScreen",void 0);var C_,w_,E_,A_,T_,R_,L_,P_=z.ccclass,__=z.property,B_=z.disallowMultiple,D_=z.requireComponent,O_=Ludex.Events,I_=codex.event;o_=P_("CongratulationScreen"),r_=D_(XP),s_=__(ie),l_=__(ie),u_=__(Z),c_=__(Z),h_=__(Z),o_(d_=B_(d_=r_((y_=l((p_=function(e){n(r,e);var t=i(r);function r(){var e;a(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),u(e,"congratulation",y_,c(e)),u(e,"confirmation",v_,c(e)),u(e,"closeButtonComponent",f_,c(e)),u(e,"yesButtonComponent",m_,c(e)),u(e,"noButtonComponent",g_,c(e)),e.handleOpeningScreen=function(t){if(!e.screen)throw new Error("CongratulationScreen: screen not found");e.validateEventPayload(t)&&(e.closeButtonComponent.interactable=!0,e.yesButtonComponent.interactable=!0,e.noButtonComponent.interactable=!0)},e.handleOpenedScreen=function(t){e.validateEventPayload(t)&&e.open()},e}return o(r,[{key:"__preload",value:function(){this.enabled=!1,this.screen=this.getComponent(XP),this.validateRequiredComponents(),this.listenScreenEvents()}},{key:"onDestroy",value:function(){this.unListenScreenEvents()}},{key:"validateRequiredComponents",value:function(){Nt.lazyValidateProperties(this)}},{key:"listenScreenEvents",value:function(){I_.on(O_.OPENING_SCREEN,this.handleOpeningScreen),I_.on(O_.OPENED_SCREEN,this.handleOpenedScreen)}},{key:"unListenScreenEvents",value:function(){I_.off(O_.OPENING_SCREEN,this.handleOpeningScreen),I_.off(O_.OPENED_SCREEN,this.handleOpenedScreen)}},{key:"validateEventPayload",value:function(e){return e.screenName===this.node.name}},{key:"open",value:function(){this.enabled&&(this.confirmation.active=!1,this.congratulation.active=!0)}},{key:"close",value:function(){this.closeButtonComponent.interactable=!1,this.yesButtonComponent.interactable=!1,this.noButtonComponent.interactable=!1,L.closeScreen(P.CONGRATULATION_SCREEN)}},{key:"handleStartOver",value:function(){this.confirmation.active=!0,this.congratulation.active=!1;var e=this.confirmation.getComponent(ae);e?(q(e).set({opacity:0}).to(.2,{opacity:255},{easing:"smooth"}).start(),q(this.confirmation).set({scale:new te(0,0,0)}).to(.2,{scale:new te(1,1,1)},{easing:"smooth"}).start()):console.warn("CongratulationScreen: UIOpacity not found")}},{key:"handleYesStartOver",value:function(){this.close(),this.node.scene.emit(sr.START_OVER)}},{key:"handleNoStartOver",value:function(){this.close(),this.node.scene.emit(sr.GAME_REPLAY,{level:this.screen.data.level})}},{key:"handleClickedClose",value:function(){this.close(),this.node.scene.emit(sr.GAME_REPLAY,{level:this.screen.data.level})}}]),r}(U)).prototype,"congratulation",[s_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v_=l(p_.prototype,"confirmation",[l_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f_=l(p_.prototype,"closeButtonComponent",[u_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m_=l(p_.prototype,"yesButtonComponent",[c_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g_=l(p_.prototype,"noButtonComponent",[h_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d_=p_))||d_)||d_);N._RF.pop(),N._RF.push({},"7b024d/xQ1BBZV0UpNjM9UQ","LoadingFullScreen",void 0);var N_,F_,z_,x_,G_,M_=z.ccclass,U_=z.property,H_=(C_=M_("LoadingFullScreen"),w_=U_(Ge),E_=U_(oe),C_((R_=l((T_=function(e){n(h,e);var r,s,l=i(h);function h(){var e;a(this,h);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return e=l.call.apply(l,[this].concat(n)),u(e,"progressBar",R_,c(e)),u(e,"loadingText",L_,c(e)),e}return o(h,[{key:"__preload",value:function(){this.uiOpacity=this.getComponent(ae),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){Nt.lazyValidateProperties(this)}},{key:"runLoadingTextAnimation",value:function(){var e=this,t=0;this.schedule((function(){t=t>2?0:t+1,e.loadingText.string="Loading"+".".repeat(t)}),.5)}},{key:"stopLoadingTextAnimation",value:function(){this.unscheduleAllCallbacks()}},{key:"show",value:(s=t((function*(e){this.uiOpacity.opacity=0,this.progressBar.progress=0;var t=q(this.uiOpacity).to(.2,{opacity:255},{easing:"cubicOut"}),n=q(this.progressBar).to(8,{progress:.9},{easing:"cubicOut"});this.runLoadingTextAnimation(),v.runTweenAsync(t),yield v.runTweenAsync(n)})),function(e){return s.apply(this,arguments)})},{key:"hide",value:(r=t((function*(e){if(this.uiOpacity&&this.progressBar){this.uiOpacity.opacity=255,this.progressBar.progress=.9;var t=q(this.uiOpacity).to(.15,{opacity:0},{easing:"cubicIn"}),n=q(this.progressBar).to(.2,{progress:1},{easing:"cubicIn"});this.runLoadingTextAnimation(),yield v.runTweenAsync(n),this.stopLoadingTextAnimation(),yield v.runTweenAsync(t),this.node.active=!1}})),function(e){return r.apply(this,arguments)})}]),h}(U)).prototype,"progressBar",[w_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L_=l(T_.prototype,"loadingText",[E_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A_=T_))||A_);N._RF.pop(),N._RF.push({},"daa70r49mtGR6iXhcKLcS3q","Loading",void 0);var j_,W_=z.ccclass,V_=z.property;N_=W_("Loading"),F_=V_(Le),N_((G_=l((x_=function(e){n(h,e);var r,s,l=i(h);function h(){var e;a(this,h);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return e=l.call.apply(l,[this].concat(n)),u(e,"loadingPrefab",G_,c(e)),e.loadingNode=null,e}return o(h,[{key:"__preload",value:function(){this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){Nt.lazyValidateProperties(this)}},{key:"onLoad",value:function(){this.makePersistent()}},{key:"makePersistent",value:function(){j.addPersistRootNode(this.node)}},{key:"createLoadingFullScreen",value:function(){var e,t=ge("Canvas");if(t&&!t.getChildByName("Loading")){this.loadingNode||(this.loadingNode=Pe(this.loadingPrefab));var n=Pe._clone(this.loadingNode);this.loadingFullScreen=n.getComponent(H_),this.node.active=!1,null===(e=ge("Canvas"))||void 0===e||e.addChild(n)}}},{key:"show",value:(s=t((function*(e){this.createLoadingFullScreen(),this.node.active||(this.node.active=!0,yield this.loadingFullScreen.show(e))})),function(e){return s.apply(this,arguments)})},{key:"hide",value:(r=t((function*(e){var t;null!==(t=this.node)&&void 0!==t&&t.active&&this.loadingFullScreen&&(yield this.loadingFullScreen.hide(e),this.node.active=!1)})),function(e){return r.apply(this,arguments)})}]),h}(U)).prototype,"loadingPrefab",[F_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z_=x_));N._RF.pop(),N._RF.push({},"61985gSEDBMY6nVNc9Q1D6W","LoadingScreen",void 0);var $_,q_,K_,Y_,J_,X_,Z_,Q_,eB,tB,nB,iB,aB,oB,rB,sB,lB,uB,cB,hB,dB,pB=z.ccclass,yB=z.disallowMultiple,vB=z.requireComponent,fB=Ludex.Events,mB=codex.event;pB("LoadingScreen")(j_=yB(j_=vB(XP)(j_=function(e){n(r,e);var t=i(r);function r(){var e;a(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).isClosing=!1,e.handleOpeningScreen=function(t){e.validateEventPayload(t)&&(e.enabled=!0,e.isClosing=!1)},e.handleOpenedScreen=function(t){e.validateEventPayload(t)&&e.open()},e.handleClosingScreen=function(t){e.validateEventPayload(t)&&(e.isClosing=!0,e.unscheduleAllCallbacks())},e.handleClosedScreen=function(t){e.validateEventPayload(t)&&(e.enabled=!1,e.isClosing=!1)},e.handleOnCloseScreen=function(){L.closeScreen(P.LOADING_SCREEN)},e}return o(r,[{key:"onLoad",value:function(){this.enabled=!1,this.screen=this.getComponent(XP),this.validateRequiredComponents(),this.listenScreenEvents()}},{key:"onDestroy",value:function(){this.unListenScreenEvents()}},{key:"validateRequiredComponents",value:function(){Nt.lazyValidateProperties(this)}},{key:"listenScreenEvents",value:function(){mB.on(fB.OPENING_SCREEN,this.handleOpeningScreen),mB.on(fB.OPENED_SCREEN,this.handleOpenedScreen),mB.on(fB.CLOSING_SCREEN,this.handleClosingScreen),mB.on(fB.CLOSED_SCREEN,this.handleClosedScreen)}},{key:"unListenScreenEvents",value:function(){mB.off(fB.OPENING_SCREEN,this.handleOpeningScreen),mB.off(fB.OPENED_SCREEN,this.handleOpenedScreen),mB.off(fB.CLOSING_SCREEN,this.handleClosingScreen),mB.off(fB.CLOSED_SCREEN,this.handleClosedScreen)}},{key:"validateEventPayload",value:function(e){return e.screenName===this.node.name}},{key:"open",value:function(){var e;if(this.enabled&&!this.isClosing){var t=null!==(e=this.screen.data.duration)&&void 0!==e?e:0;this.scheduleOnce(this.handleOnCloseScreen,t)}}}]),r}(U))||j_)||j_);N._RF.pop(),N._RF.push({},"15681ka+CZC45B7BdUhsnhF","LoseScreen",void 0);var gB,bB,SB,kB,CB,wB,EB,AB,TB=z.ccclass,RB=z.property,LB=z.disallowMultiple,PB=z.requireComponent,_B=Ludex,BB=_B.Events,DB=_B.Utils.Decorator,OB=codex,IB=OB.language,NB=OB.event;$_=TB("LoseScreen"),q_=PB(XP),K_=RB(oe),Y_=RB(Z),J_=RB(ie),X_=RB(ie),Z_=RB(Z),Q_=RB(Z),eB=RB(Z),tB=RB(Z),nB=DB.tryCatch(),$_(iB=LB(iB=q_((oB=l((aB=function(e){n(r,e);var t=i(r);function r(){var e;a(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).mode="classic",u(e,"levelText",oB,c(e)),u(e,"retryButton",rB,c(e)),u(e,"titleRibbon",sB,c(e)),u(e,"dogeHead",lB,c(e)),u(e,"retryButtonComponent",uB,c(e)),u(e,"closeButtonComponent",cB,c(e)),u(e,"endlessButtonComponent",hB,c(e)),u(e,"classicButtonComponent",dB,c(e)),e.handleOpeningScreen=function(t){if(!e.screen)throw new Error("LoseScreen: screen not found");e.validateEventPayload(t)&&(e.retryButtonComponent.interactable=!0,e.closeButtonComponent.interactable=!0,e.endlessButtonComponent.interactable=!0,e.classicButtonComponent.interactable=!0)},e.handleOpenedScreen=function(t){e.validateEventPayload(t)&&e.open()},e}return o(r,[{key:"__preload",value:function(){this.enabled=!1,this.screen=this.getComponent(XP),this.validateRequiredComponents(),this.listenScreenEvents()}},{key:"onLoad",value:function(){var e=j.getScene();this.mode=e&&e.name===B.GAME_SCENE?"classic":"endless"}},{key:"onDestroy",value:function(){this.unListenScreenEvents()}},{key:"validateRequiredComponents",value:function(){Nt.lazyValidateProperties(this)}},{key:"listenScreenEvents",value:function(){NB.on(BB.OPENING_SCREEN,this.handleOpeningScreen),NB.on(BB.OPENED_SCREEN,this.handleOpenedScreen)}},{key:"unListenScreenEvents",value:function(){NB.off(BB.OPENING_SCREEN,this.handleOpeningScreen),NB.off(BB.OPENED_SCREEN,this.handleOpenedScreen)}},{key:"validateEventPayload",value:function(e){return e.screenName===this.node.name}},{key:"open",value:function(){this.setLevelText(),this.resetState(),this.runOpenAnimation()}},{key:"close",value:function(){this.closeButtonComponent.interactable=!1,this.retryButtonComponent.interactable=!1,this.endlessButtonComponent.interactable=!1,this.classicButtonComponent.interactable=!1,L.closeScreen(P.LOSE_SCREEN)}},{key:"runOpenAnimation",value:function(){var e=this,t=this.createRibbonAnim(),n=this.createDogeHeadAnim(),i=this.createRetryButtonAnim();if(t&&n&&i){var a=q({}).delay(.2).call((function(){return t.start()}));if("classic"===this.mode){var o=this.createLevelAnim();if(!o)return void console.warn("LoseScreen: levelAnim not found");a.delay(.2).call((function(){return o.start()}))}if(a.delay(.3).call((function(){return n.start()})).delay(.2).call((function(){return i.start()})).delay(.2),"endless"===this.mode){var r=this.createClassicButtonAnim();if(!r)return void console.warn("LoseScreen: classicButtonAnim not found");a.call((function(){return r.start()}))}else{var s=this.createEndlessButtonAnim();if(!s)return void console.warn("LoseScreen: endlessButtonAnim not found");a.call((function(){return s.start()}))}a.call((function(){var t;e.screen.data&&(t=e.screen.data.level),w.showInterstitialAdAsync({forLevel:t,includeSDK:["CrazyGames"]})})).start()}else console.warn("LoseScreen: animations not found")}},{key:"resetState",value:function(){var e=this.retryButton.getComponent(ae),t=this.titleRibbon.getComponent(ae),n=this.levelText.getComponent(ae),i=this.dogeHead.getComponent(ae),a=this.classicButtonComponent.getComponent(ae),o=this.endlessButtonComponent.getComponent(ae);e&&t&&n&&i&&a&&o?(e.opacity=0,t.opacity=0,n.opacity=0,i.opacity=0,a.opacity=0,o.opacity=0,this.dogeHead.setPosition(1e3,-19),this.retryButton.node.active=!1,this.classicButtonComponent.node.active=!1,this.endlessButtonComponent.node.active=!1,this.levelText.node.active=!1):console.warn("LoseScreen: UIOpacity of some component not found")}},{key:"setLevelText",value:function(){var e=this.screen.data.level,t=IB.getText("game.level");this.levelText.string="".concat(t," ").concat(e)}},{key:"createRibbonAnim",value:function(){var e=this.titleRibbon.getComponent(ae);return e?q(e).set({opacity:0}).to(.3,{opacity:255},{easing:"smooth"}):null}},{key:"createLevelAnim",value:function(){var e=this.levelText.getComponent(ae);return e?(this.levelText.node.active=!0,q(e).set({opacity:0}).to(.3,{opacity:255},{easing:"smooth"})):null}},{key:"createDogeHeadAnim",value:function(){var e=this.dogeHead.getComponent(ae);return e?(this.dogeHead.setPosition(0,-97),q(e).set({opacity:0}).to(.3,{opacity:255},{easing:"smooth"})):null}},{key:"createRetryButtonAnim",value:function(){var e=this.retryButton.getComponent(ae);return e?(this.retryButton.node.active=!0,q(e).set({opacity:0}).to(.4,{opacity:255},{easing:"smooth"})):null}},{key:"createClassicButtonAnim",value:function(){var e=this.classicButtonComponent.getComponent(ae);return e?(this.classicButtonComponent.node.active=!0,q(e).set({opacity:0}).to(.4,{opacity:255},{easing:"smooth"})):null}},{key:"createEndlessButtonAnim",value:function(){var e=this.endlessButtonComponent.getComponent(ae);return e?(this.endlessButtonComponent.node.active=!0,q(e).set({opacity:0}).to(.4,{opacity:255},{easing:"smooth"})):null}},{key:"handleClickedRetryGame",value:function(){this.close(),this.replayGame()}},{key:"handleClickedClassicMode",value:function(){this.close(),_.switchToGameScene()}},{key:"handleClickedEndlessMode",value:function(){this.close(),_.switchToEndlessScene()}},{key:"handleClickedClose",value:function(){this.close(),this.replayGame()}},{key:"replayGame",value:function(){this.node.scene.emit(sr.GAME_REPLAY,{level:this.screen.data.level})}}]),r}(U)).prototype,"levelText",[K_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rB=l(aB.prototype,"retryButton",[Y_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),sB=l(aB.prototype,"titleRibbon",[J_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),lB=l(aB.prototype,"dogeHead",[X_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),uB=l(aB.prototype,"retryButtonComponent",[Z_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cB=l(aB.prototype,"closeButtonComponent",[Q_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),hB=l(aB.prototype,"endlessButtonComponent",[eB],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),dB=l(aB.prototype,"classicButtonComponent",[tB],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),l(aB.prototype,"setLevelText",[nB],Object.getOwnPropertyDescriptor(aB.prototype,"setLevelText"),aB.prototype),iB=aB))||iB)||iB);N._RF.pop(),N._RF.push({},"6460akNFfhP9pDOT2Z0+s2R","NotificationScreen",void 0);var FB,zB,xB,GB,MB,UB,HB,jB,WB,VB,$B,qB,KB,YB,JB,XB,ZB,QB,eD,tD,nD=z.ccclass,iD=z.disallowMultiple,aD=z.requireComponent,oD=z.property,rD=Ludex,sD=rD.Events,lD=rD.Utils,uD=codex.event;gB=nD("NotificationScreen"),bB=aD(XP),SB=oD(oe),kB=oD(Z),gB(CB=iD(CB=bB((EB=l((wB=function(e){n(r,e);var t=i(r);function r(){var e;a(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),u(e,"message",EB,c(e)),u(e,"touchZone",AB,c(e)),e.enableCloseOnTouch=!0,e.handleOpeningScreen=function(t){e.validateEventPayload(t)&&e.updateScreenData(t)},e.handleClosingScreen=function(t){e.validateEventPayload(t)&&e.unscheduleAllCallbacks()},e}return o(r,[{key:"__preload",value:function(){this.listenScreenEvents()}},{key:"onDestroy",value:function(){this.unListenScreenEvents()}},{key:"onLoad",value:function(){this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){Nt.lazyValidateProperties(this)}},{key:"listenScreenEvents",value:function(){uD.on(sD.OPENING_SCREEN,this.handleOpeningScreen),uD.on(sD.CLOSING_SCREEN,this.handleClosingScreen)}},{key:"unListenScreenEvents",value:function(){uD.off(sD.OPENING_SCREEN,this.handleOpeningScreen),uD.off(sD.CLOSING_SCREEN,this.handleClosingScreen)}},{key:"validateEventPayload",value:function(e){return e.screenName===this.node.name}},{key:"updateScreenData",value:function(e){var t=e.screenData;lD.Valid.isObject(t)?(t.message&&(this.message.string=t.message),t.duration&&t.duration>0&&this.scheduleOnce((function(){L.closeScreen(P.NOTIFICATION_SCREEN)}),t.duration),!1===t.enableCloseOnTouch?this.enableCloseOnTouch=!1:this.enableCloseOnTouch=!0):console.warn("NotificationScreen: screenData not found")}},{key:"handleClickedClose",value:function(){this.unscheduleAllCallbacks(),L.closeScreen(P.NOTIFICATION_SCREEN)}},{key:"closeOnTouch",value:function(){this.enableCloseOnTouch&&this.handleClickedClose()}}]),r}(U)).prototype,"message",[SB],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),AB=l(wB.prototype,"touchZone",[kB],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),CB=wB))||CB)||CB);N._RF.pop(),N._RF.push({},"61932YLC/5CFrE0eD0ez8Zg","SettingsScreen",void 0);var cD,hD,dD,pD,yD,vD,fD,mD,gD,bD,SD,kD,CD,wD,ED,AD,TD,RD,LD,PD,_D,BD,DD,OD,ID,ND,FD=z.ccclass,zD=z.property,xD=z.requireComponent,GD=Ludex,MD=GD.Events,UD=GD.Utils,HD=codex,jD=HD.player,WD=HD.event;FB=FD("SettingsScreen"),zB=xD(XP),xB=zD(ie),GB=zD(ie),MB=zD(ie),UB=zD(Xs),HB=zD(Xs),jB=zD(Xs),WB=zD(Z),VB=zD(Z),FB($B=zB((KB=l((qB=function(e){n(r,e);var t=i(r);function r(){var e;a(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),u(e,"musicSetting",KB,c(e)),u(e,"soundSetting",YB,c(e)),u(e,"vibrateSetting",JB,c(e)),u(e,"musicSwitch",XB,c(e)),u(e,"soundSwitch",ZB,c(e)),u(e,"vibrateSwitch",QB,c(e)),u(e,"closeButtonComponent",eD,c(e)),u(e,"resumeButtonComponent",tD,c(e)),e.triggerSequence="",e.handleOpeningScreen=function(t){e.validateEventPayload(t)&&(e.closeButtonComponent.interactable=!0,e.resumeButtonComponent.interactable=!0,e.updateStatus())},e.handleResetSequence=function(){e.triggerSequence=""},e.handleTriggerUnlockKey=function(t){var n=t.code,i=mh.UNLOCK_SEQUENCE;"number"==typeof n&&-1!==i.indexOf(n.toString())&&(e.triggerSequence+=n.toString(),console.log("SettingsScreen: handleTriggerUnlockKey",n,e.triggerSequence,e.triggerSequence===i),e.triggerSequence===i&&(e.node.scene.emit(mh.Events.UNLOCK_DEV_TOOLS),e.node.off(mh.Events.TRIGGER_UNLOCK_KEY)))},e.updateVibrateButton=function(){var t=e.vibrateSetting.getComponentInChildren(Z),n=e.vibrateSetting.getComponentInChildren(Xs),i=e.vibrateSetting.getComponentInChildren(Yi);if(t&&n&&i)if(UD.Device.isMobile()){var a,o=null!==(a=jD.getPlayerSetting("vibrate"))&&void 0!==a&&a;n.setEnabled(o)}else t.interactable=!1,n.setEnabled(!1),i.changeState(!1);else console.warn("SettingsScreen: vibrate button missing components")},e}return o(r,[{key:"onLoad",value:function(){this.enabled=!1,this.screen=this.getComponent(XP),this.validateRequiredComponents(),this.listenScreenEvents(),this.listenUnlockDevTools(),this.handleGameDistributionUIChanges()}},{key:"onDestroy",value:function(){this.unListenScreenEvents(),this.unListenUnlockDevTools()}},{key:"validateRequiredComponents",value:function(){Nt.lazyValidateProperties(this)}},{key:"handleGameDistributionUIChanges",value:function(){if(GameSDK.isGameSDK("GameDistribution")){this.vibrateSetting.active=!1;var e=this.musicSetting.position,t=e.x,n=e.y,i=e.z;this.musicSetting.setPosition(new te(t,n-50,i));var a=this.soundSetting.position,o=a.x,r=a.y,s=a.z;this.soundSetting.setPosition(new te(o,r-50,s))}}},{key:"listenScreenEvents",value:function(){WD.on(MD.OPENING_SCREEN,this.handleOpeningScreen)}},{key:"unListenScreenEvents",value:function(){WD.off(MD.OPENING_SCREEN,this.handleOpeningScreen)}},{key:"validateEventPayload",value:function(e){return e.screenName===this.node.name}},{key:"listenUnlockDevTools",value:function(){this.node.off(mh.Events.TRIGGER_UNLOCK_KEY),this.node.on(mh.Events.TRIGGER_RESET_SEQUENCE,this.handleResetSequence),this.node.on(mh.Events.TRIGGER_UNLOCK_KEY,this.handleTriggerUnlockKey)}},{key:"unListenUnlockDevTools",value:function(){this.node.off(mh.Events.TRIGGER_RESET_SEQUENCE,this.handleResetSequence),this.node.off(mh.Events.TRIGGER_UNLOCK_KEY,this.handleTriggerUnlockKey)}},{key:"open",value:function(){this.updateStatus(),this.runPopUpAnimation(),this.node.emit(mh.Events.TRIGGER_RESET_SEQUENCE)}},{key:"close",value:function(){this.closeButtonComponent.interactable=!1,this.resumeButtonComponent.interactable=!1,this.node.emit(mh.Events.TRIGGER_RESET_SEQUENCE),L.closeScreen(P.SETTINGS_SCREEN)}},{key:"updateStatus",value:function(){var e,t,n,i={music:null!==(e=jD.getPlayerSetting("music"))&&void 0!==e&&e,sound:null!==(t=jD.getPlayerSetting("sound"))&&void 0!==t&&t,vibrate:null!==(n=jD.getPlayerSetting("vibrate"))&&void 0!==n&&n};this.musicSwitch?this.soundSwitch?(this.musicSwitch.setEnabled(i.music),this.soundSwitch.setEnabled(i.sound),GameSDK.isGameSDK("GameDistribution")||this.scheduleOnce(this.updateVibrateButton,.1)):console.warn("SettingsScreen: soundSwitch not found"):console.warn("SettingsScreen: musicSwitch not found")}},{key:"runPopUpAnimation",value:function(){this.screen.container||console.warn("SettingsScreen: screen not found")}},{key:"switchMusicButton",value:function(){if(this.musicSwitch){if(!GameSDK.isGameSDK("YoutubePlayables")||GameSDK.extra.isAudioEnabled()||this.musicSwitch.isEnabled()){var e=this.musicSwitch.switch();jD.setSetting("music",e),this.node.emit(mh.Events.TRIGGER_UNLOCK_KEY,{code:e?1:0}),e?S.playMusic(Zn.BG_MUSIC):S.pauseMusic()}}else console.warn("SettingsScreen: musicSwitch not found")}},{key:"switchSoundButton",value:function(){if(this.soundSwitch){if(!GameSDK.isGameSDK("YoutubePlayables")||GameSDK.extra.isAudioEnabled()||this.soundSwitch.isEnabled()){var e=this.soundSwitch.switch();jD.setSetting("sound",e),this.node.emit(mh.Events.TRIGGER_UNLOCK_KEY,{code:e?3:2})}}else console.warn("SettingsScreen: soundSwitch not found")}},{key:"switchVibrateButton",value:function(){if(this.vibrateSwitch){var e=this.vibrateSwitch.switch();jD.setSetting("vibrate",e)}else console.warn("SettingsScreen: vibrateSwitch not found")}},{key:"handleClickedResume",value:function(){this.resumeGame()}},{key:"handleClickedClose",value:function(){this.resumeGame()}},{key:"resumeGame",value:function(){this.close(),this.node.scene.emit(sr.GAME_RESUME)}}]),r}(U)).prototype,"musicSetting",[xB],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),YB=l(qB.prototype,"soundSetting",[GB],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),JB=l(qB.prototype,"vibrateSetting",[MB],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),XB=l(qB.prototype,"musicSwitch",[UB],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ZB=l(qB.prototype,"soundSwitch",[HB],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),QB=l(qB.prototype,"vibrateSwitch",[jB],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),eD=l(qB.prototype,"closeButtonComponent",[WB],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),tD=l(qB.prototype,"resumeButtonComponent",[VB],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$B=qB))||$B);N._RF.pop(),N._RF.push({},"35c09YGmdFA4pHOJFDg1tw5","WinningScreen",void 0);var VD=z.ccclass,$D=z.property,qD=z.disallowMultiple,KD=z.requireComponent,YD=Ludex.Events,JD=codex,XD=JD.player,ZD=JD.event;JD.language,cD=VD("WinningScreen"),hD=KD(XP),dD=$D(Y),pD=$D(Z),yD=$D(Z),vD=$D(ie),fD=$D(ie),mD=$D(oe),gD=$D(Z),bD=$D(Z),SD=$D(Z),kD=$D(Z),CD=$D(Z),cD(wD=qD(wD=hD((AD=l((ED=function(e){n(l,e);var r=i(l);function l(){var e;a(this,l);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return(e=r.call.apply(r,[this].concat(n))).mode="classic",u(e,"titleRibbon",AD,c(e)),u(e,"nextLevelButton",TD,c(e)),u(e,"retryLevelButton",RD,c(e)),u(e,"confettiGroup",LD,c(e)),u(e,"dogeHead",PD,c(e)),u(e,"levelText",_D,c(e)),u(e,"closeButtonComponent",BD,c(e)),u(e,"nextLevelButtonComponent",DD,c(e)),u(e,"retryLevelButtonComponent",OD,c(e)),u(e,"classicButtonComponent",ID,c(e)),u(e,"endlessButtonComponent",ND,c(e)),e.starsCollected=3,e.handleOpeningScreen=function(t){if(!e.screen)throw new Error("WinningScreen: screen not found");e.validateEventPayload(t)&&(e.closeButtonComponent.interactable=!0,e.retryLevelButtonComponent.interactable=!0,e.nextLevelButtonComponent.interactable=!0,e.classicButtonComponent.interactable=!0,e.endlessButtonComponent.interactable=!0)},e.handleOpenedScreen=function(t){e.validateEventPayload(t)&&e.open()},e.handleClosingScreen=function(t){e.validateEventPayload(t)&&e.unscheduleAllCallbacks()},e}return o(l,[{key:"__preload",value:function(){this.enabled=!1,this.screen=this.getComponent(XP),this.validateRequiredComponents(),this.listenScreenEvents()}},{key:"onLoad",value:function(){var e=j.getScene();this.mode=e&&e.name===B.GAME_SCENE?"classic":"endless"}},{key:"onDestroy",value:function(){this.unListenScreenEvents()}},{key:"validateRequiredComponents",value:function(){Nt.lazyValidateProperties(this)}},{key:"listenScreenEvents",value:function(){ZD.on(YD.OPENING_SCREEN,this.handleOpeningScreen),ZD.on(YD.OPENED_SCREEN,this.handleOpenedScreen),ZD.on(YD.CLOSING_SCREEN,this.handleClosingScreen)}},{key:"unListenScreenEvents",value:function(){ZD.off(YD.OPENING_SCREEN,this.handleOpeningScreen),ZD.off(YD.OPENED_SCREEN,this.handleOpenedScreen),ZD.off(YD.CLOSING_SCREEN,this.handleClosingScreen)}},{key:"validateEventPayload",value:function(e){return e.screenName===this.node.name}},{key:"start",value:function(){var e=this;this.dogeHead.translate(new te(-1e3,0)),this.scheduleOnce((function(){e.dogeHead.translate(new te(1e3,0))}),.1)}},{key:"open",value:function(){var e=this;this.nextLevelButton.node.active=!1,this.retryLevelButton.node.active=!1,this.classicButtonComponent.node.active=!1,this.endlessButtonComponent.node.active=!1,this.closeButtonComponent.interactable=!1,this.classicButtonComponent.interactable=!1,this.endlessButtonComponent.interactable=!1,this.confettiGroup.active=!0,this.updateLevel(),this.updateStars(),this.runRibbonAnimation();var n=this.runStarsAnimation();this.runConfetti(n),this.scheduleOnce(t((function*(){yield w.showInterstitialAdAsync({forLevel:e.screen.data.level,excludeSDK:["CrazyGames"]}),e.nextLevelButton.node.active=!0,e.retryLevelButton.node.active=!0,e.closeButtonComponent.interactable=!0;var t=e.nextLevelButton.getComponent(ae);if(t){q(t).set({opacity:0}).to(.4,{opacity:255},{easing:"smooth"}).start();var n=e.retryLevelButton.getComponent(ae);if(n)if(q(n).set({opacity:0}).delay(.2).to(.4,{opacity:255},{easing:"smooth"}).start(),"classic"===e.mode){var i=e.createEndlessButtonAnim();if(e.endlessButtonComponent.interactable=!0,!i)return void console.warn("WinningScreen: endlessButtonAnim not found");i.start()}else{var a=e.createClassicButtonAnim();if(e.classicButtonComponent.interactable=!0,!a)return void console.warn("WinningScreen: classicButtonAnim not found");a.start()}}})),n),S.playSound(Zn.HAND_CLAP)}},{key:"close",value:function(){this.closeButtonComponent.interactable=!1,this.retryLevelButtonComponent.interactable=!1,this.nextLevelButtonComponent.interactable=!1,this.classicButtonComponent.interactable=!1,this.endlessButtonComponent.interactable=!1,this.confettiGroup.active=!1,L.closeScreen(P.WINNING_SCREEN)}},{key:"showCongratulationScreen",value:function(){L.openScreen(P.CONGRATULATION_SCREEN,{level:this.screen.data.level})}},{key:"handleClickedNextLevel",value:function(){if(XD.getGameData()){var e=this.screen.data.level;e?(this.node.scene.emit(sr.NEXT_LEVEL,{level:e}),this.close()):console.warn("WinningScreen: level not found")}else console.warn("WinningScreen: gameData not found")}},{key:"handleClickedRetry",value:function(){this.close(),this.node.scene.emit(sr.GAME_REPLAY,{level:this.screen.data.level})}},{key:"handleClickedClose",value:function(){this.close();var e=this.screen.data.level;this.node.scene.emit(sr.NEXT_LEVEL,{level:e})}},{key:"updateStars",value:function(){var e;this.starsCollected=null!==(e=this.screen.data.stars)&&void 0!==e?e:0}},{key:"updateLevel",value:function(){var e=this.screen.data.level;this.levelText.string="Level ".concat(e)}},{key:"runRibbonAnimation",value:function(){this.titleRibbon.fillRange=0,q(this.titleRibbon).to(.5,{fillRange:1},{easing:"backInOut"}).start()}},{key:"runStarsAnimation",value:function(){var e=this,t=ge("Container/Stars/RightStar",this.node),n=ge("Container/Stars/LeftStar",this.node),i=ge("Container/Stars/MidStar",this.node),a=[n,i,t];if(!t||!n||!i)return console.warn("WinningScreen: stars not found"),0;for(var o=0,r=a;o<r.length;o++){var s=r[o];if(s){var l=s.getChildByName("Star");l?l.active=!1:console.warn("WinningScreen: starComponent not found")}}this.animateStars(a);for(var u,c=1.32,h=function(){var t=a[d];if(!t)return console.warn("WinningScreen: stars not found"),{v:0};var n=t.getChildByName("Star");if(!n)return console.warn("WinningScreen: starComponent not found"),{v:0};e.scheduleOnce((function(){n.active=!0,S.playSound(Zn.STAR_RAISE),q(n).set({scale:new te(1.7,1.7,1)}).to(.35,{scale:new te(1,1,1)},{easing:"backOut"}).start()}),c),c+=.3},d=0;d<this.starsCollected;d++)if(u=h())return u.v;return c}},{key:"animateStars",value:function(e){for(var t=0;t<e.length;t++){var n=e[t];if(!n)return void console.warn("WinningScreen: starEmpty not found");var i=new te(0,0,1),a=new te(1,1,1);1===t&&a.set(1.2,1.2,1),q(n).set({scale:i}).delay(.7).to(.4,{scale:a},{easing:"backOut"}).start()}}},{key:"createClassicButtonAnim",value:function(){var e=this.classicButtonComponent.getComponent(ae);return e?(this.classicButtonComponent.node.active=!0,q(e).set({opacity:0}).delay(.4).to(.4,{opacity:255},{easing:"smooth"})):null}},{key:"createEndlessButtonAnim",value:function(){var e=this.endlessButtonComponent.getComponent(ae);return e?(this.endlessButtonComponent.node.active=!0,q(e).set({opacity:0}).delay(.4).to(.4,{opacity:255},{easing:"smooth"})):null}},{key:"runConfetti",value:function(e){var t=this;this.stopConfetti();var n=this.confettiGroup.getComponentsInChildren(de);this.scheduleOnce((function(){if(!1!==t.node.active){var e,i=s(n);try{for(i.s();!(e=i.n()).done;){e.value.resetSystem()}}catch(e){i.e(e)}finally{i.f()}}}),e)}},{key:"stopConfetti",value:function(){var e,t=this.confettiGroup.getComponentsInChildren(de),n=s(t);try{for(n.s();!(e=n.n()).done;){e.value.stopSystem()}}catch(e){n.e(e)}finally{n.f()}}},{key:"handleClickedClassicMode",value:function(){this.close(),_.switchToGameScene()}},{key:"handleClickedEndlessMode",value:function(){this.updatePlayerLevelProgress(),this.close(),_.switchToEndlessScene()}},{key:"updatePlayerLevelProgress",value:function(){if(XD.getGameData()){var e=this.screen.data.level;e?this.node.scene.emit(sr.UPDATE_LEVEL,{level:e}):console.warn("WinningScreen: level not found")}else console.warn("WinningScreen: gameData not found")}}]),l}(U)).prototype,"titleRibbon",[dD],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),TD=l(ED.prototype,"nextLevelButton",[pD],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),RD=l(ED.prototype,"retryLevelButton",[yD],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),LD=l(ED.prototype,"confettiGroup",[vD],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),PD=l(ED.prototype,"dogeHead",[fD],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_D=l(ED.prototype,"levelText",[mD],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),BD=l(ED.prototype,"closeButtonComponent",[gD],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),DD=l(ED.prototype,"nextLevelButtonComponent",[bD],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),OD=l(ED.prototype,"retryLevelButtonComponent",[SD],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ID=l(ED.prototype,"classicButtonComponent",[kD],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ND=l(ED.prototype,"endlessButtonComponent",[CD],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),wD=ED))||wD)||wD);N._RF.pop(),N._RF.push({},"af947t5g91EkZVWXv5upZaV","CacheUtils",void 0);Ludex.Utils.Image,codex.frameCapture;N._RF.pop(),N._RF.push({},"e80e4nIcfdLN56j5b9SMhvH","LeaderboardUtils",void 0);codex.leaderboard;N._RF.pop(),N._RF.push({},"9ecd9Kte0VJN4rRVFlb6CzI","OverlayUtils",void 0);var QD=codex,eO=(QD.player,QD.analytics,Ludex.Plugins.Analytics);(void 0===eO?{}:eO).Events;N._RF.pop(),N._RF.push({},"36e26OmHk5GXL6+/b4UibIf","SortNodeUtils",void 0),N._RF.pop(),N._RF.push({},"88f2b4WH6NBlaGD7WvCOA2j","VibrateUtils",void 0);Ludex.Utils.Browser,codex.player;N._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///main.js'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});