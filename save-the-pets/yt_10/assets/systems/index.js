function _instanceof(left,right){return null!=right&&"u">typeof Symbol&&right[Symbol.hasInstance]?!!right[Symbol.hasInstance](left):left instanceof right}function _ts_generator(thisArg,body){var f,y,t,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]},g=Object.create(("function"==typeof Iterator?Iterator:Object).prototype),d=Object.defineProperty;return d(g,"next",{value:verb(0)}),d(g,"throw",{value:verb(1)}),d(g,"return",{value:verb(2)}),"function"==typeof Symbol&&d(g,Symbol.iterator,{value:function(){return this}}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw TypeError("Generator is already executing.");for(;g&&(g=0,op[0]&&(_=0)),_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}}System.register("chunks:///systems.js",["./TournamentUtils-9f4fc570.js","cc"],function(){var Y,R,p,J,_,L,V,Fe,q,K,x,Qt,jt,Zt,$,l,Jt,ct,$t,en,He,tn,ut,nn,an,ve,Ye,Ve,ee,lt,dt,rn,on,sn,m,y,cn,un,ln,de,F,dn,hn,T,ge,S,Te,X,ye,fn,k,ht,mn,he,pn,Ie,vn,gn,ft,yn,En,mt,pt,W,Q,Sn;return{setters:[function(h){Y=h.h,R=h.e,p=h.a,J=h.t,_=h.d,L=h.G,V=h.H,Fe=h.i,q=h.C,K=h.n,x=h.g,Qt=h.M,jt=h.P,Zt=h.I,$=h.v,l=h.k,Jt=h.J,ct=h.L,$t=h.K,en=h.s,He=h.u,tn=h.w,ut=h.R,nn=h.N,an=h.T,ve=h.B,Ye=h.x,Ve=h.q,ee=h.z,lt=h.F,dt=h.O,rn=h.Q,on=h.b,sn=h.c},function(h){m=h.cclegacy,y=h.game,cn=h.settings,un=h.Settings,ln=h.View,de=h.AssetManager,F=h.sys,dn=h.input,hn=h.Input,T=h.DynamicAtlasManager,ge=h.macro,S=h.director,Te=h.view,X=h.ResolutionPolicy,ye=h.Size,fn=h.screen,k=h.Director,ht=h.Sprite,mn=h.UITransform,he=h.SpriteFrame,pn=h.Rect,Ie=h.assetManager,vn=h.ImageAsset,gn=h.UIOpacity,ft=h.Label,yn=h.Prefab,En=h.instantiate,mt=h.Game,pt=h._decorator,W=h.rendering,Q=h.gfx,Sn=h.Component}],execute:function execute(){var h,wn,An,bn={text:{"core.nameless":"Nameless","game.resume":"Resume","game.restart":"Restart","game.cancel":"Cancel","game.challenge":"Challenge\nFriends","game.next":"NEXT","game.completed":"COMPLETED","game.tryAgain":"Try again","game.retry":"RETRY","game.startOverQ":"Start Over?","game.startOverMsg":"Start over? You'll lose your current progress and begin from the start. Are you sure you want to restart?","game.startOver":"START OVER","game.paused":"Paused","game.end":"End","game.quit":"Quit","game.join":"Join","game.joinLeaderboard":"Join Leaderboard","game.continue":"Continue","game.letsPlay":"Let's Play","game.logIn":"Log in","game.create":"Create","game.quitLevelShortMsg":"Quit Level?","game.quitSingleMsg":"Quit now? You're so close to completing this level!","game.quitTourMsg":"Quit now? You're just a few levels away from ranking up!","game.level":"Level","game.levelX":"Level %{0}","game.hardLevel":"Hard Level","game.result":"Your Result","game.nextLevel":"Next Level","game.win":"You Win","game.lose":"You Lose","game.draw":"Draw","game.replay":"Replay","game.boom":"Boom!","game.timesUp":"Time's Up!","game.bombDesc":"The bomb exploded!","game.timesUpDesc":"Restart or add 2 minutes?","game.daily":"Daily","game.weekly":"Weekly","game.endsSoon":"Ends Soon","game.endsIn":"Ends %{0}","game.player":"1 player","game.nPlayers":"%{0} players","game.pTour":"%{0}'s Tournament","game.combo":"Combo","game.tourLbUpdated":"Duel!","settings.level":"Level","settings.settings":"Settings","settings.music":"Music","settings.sound":"Sound","settings.vibrate":"Vibrate","settings.on":"ON","settings.off":"OFF","settings.notification":"Notification","settings.report":"Report","settings.share":"Share","settings.invite":"Invite Friends","settings.feedback":"Feedback","settings.createShortcut":"Create\nShortcut","settings.or":"OR","settings.customMode":"Custom\nMode","custom.customLevel":"Custom Level","custom.time":"Time","custom.difficulty":"Difficulty","custom.easy":"Easy","custom.normal":"Normal","custom.hard":"Hard","custom.extreme":"Extreme","custom.bombs":"Bombs","custom.ads":"Extra ads duration","custom.score":"Score increase:","custom.play":"Play","ads.cancelled":"Sorry, No Rewards!\nYou have cancelled the ad!","ads.loading":"Loading ads...","ads.notReady":"No ads to display!","ads.adAfterT":"AD starting in %{0}...","ads.levelAfterT":"Next level in %{0}...","ads.rewardNotice":"Watch a short ad to receive\nthese rewards:","ads.skip":"Skip","ads.daily":"Daily Rewards","ads.claim":"Claim","ads.claimX2":"Claim x2","ads.claimNow":"Claim Now!","ads.await":"Looking for rewards...","ads.open":"Open","ads.coins":"Get Coins","ads.getNow":"Get Now","ads.freeMinutes":"Get %{0} FREE minutes","ads.interNotice.hangTight":"Short ad break, hang tight!","ads.interNotice.backInSec":"Back to the game in just a sec!","ads.interNotice.quickAd":"Quick ad, then more fun!","status.loading":"Loading","status.congrats":"Congratulations","status.allLevels":"You have passed all levels.","status.later":"Please come back later,\nwe will update soon!","status.confirm":"CONFIRMATION","status.confirmReset":"ARE YOU SURE TO START OVER?","status.resetInfo":"You will play the game again\nfrom the beginning, at level 1.","status.no":"NO","status.yes":"YES","status.first":"1st","status.second":"2nd","status.third":"3rd","status.nth":"%{0}th","status.tap":"Tap to continue","status.waitingX":"Waiting%{0}","status.lbNotAvail":"Leaderboard is empty.","status.tourNotAvail":"No tournaments available.","pages.shop":"Shop","pages.collections":"Collections","pages.home":"Home","pages.leaderboard":"Leaderboard","pages.tournament":"Tournament","guide.step1":"Tap to connect","guide.step2":"Connect similar tiles with less than 2 turns","guide.step3":"Connect similar tiles with less than 2 turns","guide.step4":"More than 2 turns are NOT allowed","guide.step5":"There's obstacle between the tiles","guide.timer":"Remove all tiles before\nthe time end","guide.combo":"Remove tiles continuously\nto increase combo!","guide.hint":"Tap to reveal a connectable pair","guide.thunder":"Tap to remove 2 pairs","guide.storm":"Tap to rearrange the tiles","guide.pliers":"Tap to remove bomb","guide.custom":"Custom mode unlocked.\n Press this button to set your own difficulty","interMsg.reviveAd":"Watch an ad to revive yourself\nKeep playing and don't give up!","interMsg.doubleAd":"Watching an ad doubles your rewards!","interMsg.ranked":"Test your skills\nin ranked tournaments","interMsg.friendChallenge":"Challenge your friend\nSee who can score higher!","interMsg.bragChallenge":"Send a challenge to your friend\nClaim bragging rights!","interMsg.clearTiles":"Clear all tiles to\nwin the level!","interMsg.beatClock":"Beat the clock before\ntime runs out!","interMsg.clearBombs":"Clear bombs before\nthey explode","interMsg.seasonPack":"A season pack unlock\nnew tile sets!","interMsg.collectStars":"The more stars you collect\nThe more coins you'll be rewarded!","interMsg.competeInLb":"Compete globally or with friends\nRise to the top in tournaments!","interMsg.competeWithFriends":"You can challenge a friend\nTest each other's reflexes!","interMsg.thunder":"The Thunder power-up\nblasts tiles away","interMsg.hint":"A Hint power-up reveals\nthe next pair","interMsg.pliers":"Pliers can remove\nany bomb instantly","interMsg.tornado":"The Tornado power-up\nshuffles the board!","interMsg.coins":"Earn coins by completing levels\nWin tournaments for even more!","interMsg.seasonTiles":"A new tile set is unlocked\nevery season packs","interMsg.dailyLogin":"Log in daily to claim\nbetter rewards!","interMsg.levelUp":"Level up and earn coins\nwith each victory!","interMsg.seasonRewards":"Each season pack offers\nnew tiles!","error.tryLater":"Sorry, please try again later","error.soon":"Coming Soon","error.noFriendsLb":"Unable to load friends leaderboard. Please try again later.","error.noWorldLb":"Unable to load world leaderboard. Please try again later.","error.createTourFail":"Unknown error. Failed to Create Tournament","error.tourExists":"You already have a tournament","error.challengeFail":"Sorry, you cannot replay\nat this time.","error.rewardFail":"Unable to validate rewards. Please try again later...","error.tourEnded":"Tournament has ended","error.tourJoinFail":"Sorry, you cannot join\nat this time.","error.noAd":"No ads to display.","error.ratingNoAuth":"You need to log in to rate the game.","error.ratingGameRated":"You have already rated the game.","error.ratingFail":"Failed to rate the game.","error.shortcutFail":"Failed to create shortcut.","error.login":"Failed to log in.","error.joinLb":"Failed to join the leaderboard.","reward.day":"Day","reward.dayX":"Day %{0}","reward.starChestTitle":"Star Chest","reward.starChestAvailable":"Congrats, you have enough stars to open the chest!","reward.starChestUnavailable":"Win more stars to open!","item.hint":"Hint","item.thunder":"Thunder","item.storm":"Storm","item.pliers":"Pliers","item.hintDesc":"Shows a pair of tiles\nthat can be connected.","item.thunderDesc":"Remove 2 pair of tiles\non the game field.","item.stormDesc":"Randomly rearranges the \ntiles on the game field.","item.pliersDesc":"Removes a random bomb\nfrom the game field.","theme.newTiles":"New tiles","theme.summer":"Summer Levels","theme.autumn":"Autumn Levels","theme.winter":"Winter Levels","theme.springFestival":"Spring Festival Levels","theme.treePlantingFestival":"Tree Planting Festival Levels","theme.blueSeaFestival":"Blue Sea Festival Levels","theme.musicFestival":"Music Festival Levels","theme.harvestFestival":"Harvest Festival Levels","theme.foodFestival":"Food Festival Levels","theme.snowFestival":"Snow Festival Levels","theme.lightFestival":"Light Festival Levels","theme.peaceFestival":"Peace Festival Levels","theme.flowerFestival":"Flower Festival Levels","theme.streetFestival":"Street Festival Levels","theme.colorGarden":"Color Garden Levels","theme.colorFestival":"Color Festival Levels","theme.natureSummer":"Nature Summer Levels","theme.snowMountain":"Snow Mountain Levels","theme.iceFestival":"Ice Festival Levels","theme.greenGrassFestival":"Green Grass Festival Levels","theme.communityFestival":"Community Festival Levels","theme.waterFestival":"Water Festival Levels","theme.animalFestival":"Animal Festival Levels","theme.lostFestival":"Lost Festival Levels","theme.halloweenFestival":"Halloween Festival Levels","theme.snowMusicFestival":"Snow Music Festival Levels","theme.christmas":"Christmas Levels","theme.springFlowerFestival":"Spring Flower Festival Levels","theme.tetHoliday":"Tet Holiday Levels","theme.seaFestival":"Sea Festival Levels","theme.fireworkFestival":"Firework Festival Levels","theme.halloweenHorror":"Halloween Horror Levels","theme.midAutumn":"Mid Autumn Levels","theme.christmasSweet":"Christmas Sweet Levels","theme.newYearCountdown":"New Year Countdown Levels","theme.happyNewYear":"Happy New Year Levels","share.canYouDoBetter":"Can you do better?","dashboard.unlockLevel":"Unlock lv.%{0}"},texture:{draw:"locales/en/scenes/result-scene/resources/text_draw",lose:"locales/en/scenes/result-scene/resources/text_lose",victory:"locales/en/scenes/result-scene/resources/text_victory",waiting:"locales/en/scenes/result-scene/resources/text_waiting",excellent:"locales/en/scenes/game-scene/resources/effects/text-effect/excellent",good:"locales/en/scenes/game-scene/resources/effects/text-effect/good",great:"locales/en/scenes/game-scene/resources/effects/text-effect/great",wellDone:"locales/en/screens/level-complete-screen/resources/well_done",freeRewards:"locales/en/screens/get-rewards-screen/resources/free_rewards"}};m._RF.push({},"0b4bc6YT6ZGg4lnXfh/zL6J","AdsManager",void 0);var vt=Ludex,Ee=vt.Events,gt=vt.Configs.Ads,_n=gt.Enabled,Ua=gt.PreloadAds,Rn=gt.ShowAdOnLoad,Cn=vt.Utils,yt=Cn.Time,Ga=Cn.Decorator,Se=codex.event,za=(h=Ga.tryCatch(),An=Y((wn=function(){function o(){var e=this;_(this,o),this.l=function(){Se.on(Ee.AD_CLOSED,e.Et),Se.catchUp(Ee.GAME_READY,e.St),Se.catchUp(Ee.GAME_SDK_READY,e.processShowFirstInterstitialAd),Se.catchUp(Ee.CONTEXT_DATA_PROCESSED,e.wt),Se.catchUp(Ee.CONTEXT_DATA_PROCESSED,function(){y.on(L.LAYOUT_CHANGED,e.At)})},this.Et=function(){Se.emit(Ee.REQUEST_RESIZE_GAME)},this.wt=p(function(){return _ts_generator(this,function(_state){switch(_state.label){case 0:if(!_n)return[3,3];if(!GameSDK.isGameSDK("FacebookInstant"))return[3,2];return[4,yt.sleepAsync(5e3)];case 1:_state.sent(),_state.label=2;case 2:J.updateBannerAdsByLayout(V.getCurrentLayout()),J.refreshBannerAdVisibility(),_state.label=3;case 3:return[2]}})}),this.St=p(function(){return _ts_generator(this,function(_state){switch(_state.label){case 0:if(!Ua)return[3,2];return[4,yt.sleepAsync(3e3)];case 1:_state.sent(),J.preloadAds(),_state.label=2;case 2:return[2]}})}),Fe(this,"processShowFirstInterstitialAd",An,this),this.At=function(){J.updateBannerAdsByLayout(V.getCurrentLayout()),J.refreshBannerAdVisibility()}}return R(o,[{key:"init",value:function value(){this.l()}}]),o}()).prototype,"processShowFirstInterstitialAd",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return p(function(){var o,e,t;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(!_n||(o=Rn.Enabled,e=Rn.DelaySeconds,!o))return[3,4];if(!(e>0))return[3,2];return[4,yt.sleepAsync(1e3*e)];case 1:_state.sent(),_state.label=2;case 2:return(t=GameSDK.isGameSDK("Yandex"))&&y.pause(),[4,J.showInterstitialAdAsync({forceLoad:!0,contextType:"preroll"})];case 3:_state.sent(),t&&y.resume(),_state.label=4;case 4:return[2]}})})}}),wn);m._RF.pop(),m._RF.push({},"b4ad5mMokdAa6EVNGzNedpF","EngineManager",void 0);var Dn,xn,Ln,Et=Ludex,St=Et.Events,Fn=Et.Configs.GameEngine,qe=Fn.DynamicAtlas,Tn=Fn.PreferredFPS,In=Et.Utils,Ba=In.Valid,Nn=In.Device,wt=codex.event,Ha=function(){function o(){var e=this;_(this,o),this.bt=function(){cn.overrideSettings(un.Category.ENGINE,"debug",Ba.isDebugger()),ln.instance.resizeWithBrowserSize(!1),Nn.isDesktop()?y.frameRate=Tn.Desktop:y.frameRate=Tn.Mobile},this._t=function(){de.instance.cacheAsset=!0},this.Rt=p(function(){var t,n,a;return _ts_generator(this,function(_state){switch(_state.label){case 0:return t=de.instance.downloader,e.Ct(),t.maxConcurrency=24,t.maxRequestsPerFrame=24,[4,e.Dt()];case 1:return n=_state.sent(),F.hasFeature(F.Feature.WEBP)&&(a=F.hasFeature,F.hasFeature=function(r){return r===F.Feature.WEBP?n:a(r)}),[2]}})}),this.Ct=function(){de.instance.allowImageBitmap=!0;var t=!0;GameSDK.isGameSDK("YoutubePlayables")&&(t=!1),de.instance.allowImageBitmap=t},this.Dt=function(){return new Promise(function(t){var n=new Image;n.onload=function(){return t(!0)},n.onerror=function(){return t(!1)},n.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="})},this.xt=p(function(){return _ts_generator(this,function(_state){return de.instance.transformPipeline.remove(1),[2]})}),this.Lt=function(){dn.on(hn.EventType.TOUCH_START,e.Ie),wt.catchUp(St.GAME_READY,function(){wt.on(St.VISIBILITY_HIDDEN,e.Ft),wt.on(St.VISIBILITY_VISIBLE,e.Ie)})},this.Ft=p(function(){return _ts_generator(this,function(_state){return y.isPaused()||y.pause(),[2]})}),this.Ie=p(function(){return _ts_generator(this,function(_state){return y.isPaused()&&y.resume(),[2]})}),this.Tt=function(){F.isBrowser?e.It():F.isNative?e.Nt():e.Pt()},this.It=function(){switch(F.os){case F.OS.IOS:e.Ne();break;case F.OS.ANDROID:e.Pe();break;case F.OS.OSX:case F.OS.LINUX:case F.OS.WINDOWS:e.Mt();break;default:e.Me()}},this.Nt=function(){switch(F.platform){case F.Platform.ANDROID:e.Pe();break;case F.Platform.IOS:e.Ne();break;default:e.Me()}},this.oe=function(t){var n=t.Enabled,a=t.MaxAtlasCount,r=t.MaxAtlasSize,i=t.MaxFrameSize,s=T.instance;ge.CLEANUP_IMAGE_CACHE=!n,s.enabled=n,s.textureSize=r,s.maxFrameSize=i,s.maxAtlasCount=a,s.textureBleeding=qe.OptimizeAtlas.TextureBleeding;var c=e.kt()||r,u=Math.min(r,c);s.textureSize=u,i>u&&(s.maxFrameSize=u)},this.kt=function(){if(!S.root)return -1;var t=S.root.device.capabilities.maxTextureSize,n=Math.min(Nn.maxTextureSize(),t);if(n>8192)return 7168;var a=T.instance.maxFrameSize,r=n-1024;return r<=(void 0===a?0:a)||r<=0?-1:r},this.Ne=function(){var t=qe.IOS;e.oe(t)},this.Pe=function(){var t=qe.Android;e.oe(t)},this.Mt=function(){var t=qe.Desktop;e.oe(t)},this.Me=function(){e.oe({Enabled:!0,MaxAtlasCount:1,MaxAtlasSize:4096,MaxFrameSize:1024})},this.Pt=function(){ge.CLEANUP_IMAGE_CACHE=!0,T.instance.enabled=!1},this.Ot=function(){ge.BATCHER2D_MEM_INCREMENT=512,ge.MAX_LABEL_CANVAS_POOL_SIZE=125}}return R(o,[{key:"init",value:function value(){this.bt(),this._t(),this.Ot(),this.Tt(),this.Rt(),this.xt(),this.Lt()}}]),o}();m._RF.pop(),m._RF.push({},"9f0a0l1uXlNwqKEKardFRyv","LayoutManager",void 0);var G=K.Layout,Pn=K.DesignSize,Mn=Pn.Portrait,kn=Pn.Landscape,Ya=K.AcceptPortraitRatio,At=Ludex,Va=At.Utils.Decorator,qa=At.Configs.GameEngine.AutoResizeCanvas,Ka=At.Events,On=codex,Un=On.ads,Xa=On.event,Wa=(Dn=Va.debounce(100),Ln=Y((xn=function(){function o(){var e=this;_(this,o),this.Ut=function(){if(qa&&ResizeObserver){var t,n=null!=(t=window.__listeners.resize)?t:[];if(n.length>0){var a,r=x(n);try{for(r.s();!(a=r.n()).done;){var i=a.value;window.removeEventListener("resize",i)}}catch(s){r.e(s)}finally{r.f()}}new ResizeObserver(e.handleBodyResize).observe(window.document.body)}Xa.on(Ka.REQUEST_RESIZE_GAME,e.Gt)},this.zt=function(){Te.setOrientation(ge.ORIENTATION_AUTO),e.m=Te.getResolutionPolicy(),e.m.setContentStrategy(X.ContentStrategy.EXACT_FIT),e.m.setContainerStrategy(X.ContainerStrategy.PROPORTION_TO_FRAME)},this.ke=function(){return!(null==Un||!Un.isAdFullSizeShowing())},this.Gt=function(t){if(!e.ke()){var n=q.getMaxPixelRatio(),a=(null!=t?t:{}).forcePixelRatio,r=void 0===a?n:a;window.devicePixelRatio=null!=r?r:n,e.Oe()}},Fe(this,"handleBodyResize",Ln,this),this.Oe=function(){var t=e.Ue();switch(K.PRIMARY_LAYOUT){case"portrait":e.Ge();break;case"landscape":e.ze();break;case"auto":t<=Ya?e.Ge():e.ze()}},this.Ge=function(){var t=Mn.WIDTH,n=Mn.HEIGHT,a=K.PRIMARY_LAYOUT===G.Portrait;(e._!==G.Portrait||a)&&(e._=G.Portrait,e.Be(t,n)),e.He(t,n)},this.ze=function(){var t=kn.WIDTH,n=kn.HEIGHT,a=K.PRIMARY_LAYOUT===G.Landscape;(e._!==G.Landscape||a)&&(e._=G.Landscape,e.Be(t,n)),e.He(t,n)},this.Be=function(t,n){var a=Te.getDesignResolutionSize(),r=a.width,i=a.height,s=e.m.getContentStrategy(),c=e.Ue(),u=K.AcceptPortraitRatio,d=e.m._containerStrategy.name,f=e._===G.Portrait,v=e._===G.Landscape;f&&e.m.setContentStrategy(X.ContentStrategy.FIXED_WIDTH),v&&e.m.setContentStrategy(X.ContentStrategy.FIXED_HEIGHT),f&&e.m.setContainerStrategy(X.ContainerStrategy.EQUAL_TO_FRAME),v&&e.m.setContainerStrategy(X.ContainerStrategy.EQUAL_TO_FRAME),c>u&&f&&(e.m.setContentStrategy(X.ContentStrategy.SHOW_ALL),e.m.setContainerStrategy(X.ContainerStrategy.PROPORTION_TO_FRAME)),r===t&&i===n&&s===e.m.getContentStrategy()&&d===e.m._containerStrategy.name||Te.setDesignResolutionSize(t,n,e.m),y.emit(L.LAYOUT_CHANGED,e._)},this.He=function(t,n){var a=K.DesignSize.Resolution,r=new ye(t/a,n/a),i=q.getScreenWidthCss(),s=q.getScreenHeightCss(),c=i/r.width,u=s/r.height,d=new ye(r.width,r.height),f=e._===G.Portrait,v=e._===G.Landscape;if(f||v)d.width*=c,d.height*=u;else{var g=Math.min(c,u);d.width*=g,d.height*=g}var A=q.worldSizeToCssSize(d.width),w=q.worldSizeToCssSize(d.height),E=new ye(A,w);fn.windowSize=E,y.emit(L.VIEW_RESIZED,E)},this.Ue=function(){return q.getScreenWidthCss()/q.getScreenHeightCss()}}return R(o,[{key:"init",value:function value(){this.Ut(),this.zt()}}]),o}()).prototype,"handleBodyResize",[Dn],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){var o=this;return function(){if(!o.ke()){var e=q.getMaxPixelRatio();window.devicePixelRatio=e,o.Oe()}}}}),xn);m._RF.pop(),m._RF.push({},"535cbXcmXdEzLn3H3LOIS27","MatchManager",void 0);var Gn=Ludex,Qa=Gn.Utils.Valid,zn=Gn.Dtos.Match,bt=(void 0===zn?{}:zn).CustomData,ja=function(){function o(){_(this,o),this.Bt=function(){bt&&(bt.addDefaults(Qt),bt.addValidator("score",function(e){if(!Qa.isNumber(e)||e<0)throw Error("score ".concat(e," is invalid"))}))}}return R(o,[{key:"init",value:function value(){}},{key:"setupDefaultMatchData",value:function value(){this.Bt()}}]),o}();m._RF.pop(),m._RF.push({},"d675ctpYslBHp4qqiYEki+q","PlayerManager",void 0);var Bn=Ludex,Ke=Bn.Utils,Hn=Ke.Valid,we=(Ke.Array,Ke.Object,Ke.Browser,Bn.Dtos.Player),Za=codex.player,Ja=(window.GameName.replace(/ /g,"-"),function(){function o(){_(this,o)}return R(o,[{key:"init",value:function value(){}},{key:"setupDefaultGameData",value:function value(){we.Data.makeLoose(),we.GameData.makeLoose(),we.Data.addDefaults(jt),we.GameData.addDefaults(Zt),we.GameData.addValidator("bestEndlessScore",function(e){if(!Hn.isNumber(e)||e<0)throw Error("bestEndlessScore ".concat(e," is invalid"))}),we.GameData.addValidator("firstLoginTime",function(e){if(!Hn.isNumber(e)||e<0)throw Error("firstLoginTime ".concat(e," is invalid"))})}},{key:"syncPlatformPlayerData",value:function value(){}},{key:"requestConnectedPlayers",value:function value(){Za.requestConnectedPlayers().catch(function(e){})}}]),o}());m._RF.pop(),m._RF.push({},"51079bCfn9MZK6cuxbahS7M","AdaptivePerformance",void 0);var $a=Ludex.Utils.Valid,fe=codex.adaptivePerformance,er=function(){function o(){var e=this;_(this,o),this.l=function(){S.once(k.EVENT_BEGIN_FRAME,e.Ht),S.on(k.EVENT_AFTER_SCENE_LAUNCH,e.Yt)},this.Ht=function(){S.on(k.EVENT_AFTER_UPDATE,e.Vt),S.on(k.EVENT_BEFORE_UPDATE,e.qt)},this.Yt=function(t){fe&&fe.trackingScene(t.name)},this.Vt=function(){var t=1e3*y.deltaTime;null==fe||fe.updatePostStepDeltaTime(t)},this.qt=function(){var t,n=null==(t=S.root)?void 0:t.fps;$a.isNumber(n)&&(null==fe||fe.updateActualFPS(n))}}return R(o,[{key:"init",value:function value(){fe&&this.l()}}]),o}();m._RF.pop(),m._RF.push({},"0bbd4wf2fRDcKljBcls6K8a","CanvasRecorder",void 0);var Ae=codex.canvasRecorder,tr=function(){function o(){_(this,o)}return R(o,[{key:"init",value:function value(){if(y.canvas&&Ae){Ae.setCanvas(y.canvas);var e=Ae.getOptions(),t=function t(){y.pause(),y.step()},n=Ae.waitNextFrame;Ae.waitNextFrame=function(){var a=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return new Promise(function(r,i){a||Ae.isCapturing()?e.syncFps?(S.once(k.EVENT_AFTER_RENDER,r),t()):n(a).then(r).catch(i):y.resume()})}}}}]),o}();m._RF.pop(),m._RF.push({},"e8b3dVomjtKZ68ykoRs82vP","DailyRewards",void 0);var Yn,Vn,qn,nr=codex.storage,ar=function(){function o(){_(this,o),this.$=function(){nr.addStorage("dashboardDailyRewards",{hasShownPopup:!1})}}return R(o,[{key:"init",value:function value(){this.$()}}]),o}();m._RF.pop(),m._RF.push({},"49a72YoKFFCKbOm5Xgp9R+k","DynamicAssets",void 0);var _t=Ludex,Rt=_t.Configs.GameEngine.DynamicAssets,Xe=Rt.Resolution,Ct=Rt.IgnoreFiles,We=Rt.Compression,rr=_t.Events,Qe=_t.Utils,je=Qe.Array,Kn=Qe.Function,ir=Qe.Device,or=Qe.Decorator,Dt=codex,sr=Dt.event,be=Dt.storage,cr=Dt.getBuildVersion,ur=[".png",".jpg",".jpeg",".webp"],lr=(Yn=or.debounce(1e3),qn=Y((Vn=function(){var e;function o(){var n,t=this;_(this,o),this.ye=!1,this.Kt=Kn.timeSlice(10),this.ee=1,this.p=3,this.Ye=new Set,this.U=new Set,this.Ee=new Map,this.$=p(function(){return _ts_generator(this,function(_state){switch(_state.label){case 0:return[4,be.addStorage("DynamicAssets",{currentQuality:0,buildVersion:"0"},!0)];case 1:return _state.sent(),[2]}})}),this.Xt=function(){var n,a=Math.round(ir.pixelRatio()),r=Xe.Available,i=Xe.Source,s=$(r).sort(function(d,f){return d-f}),c=x(s);try{for(c.s();!(n=c.n()).done;){var u=n.value;if(u>=a)return Math.min(u,i)}}catch(d){c.e(d)}finally{c.f()}return i},this.Wt=function(){return t.ee!==Xe.Source||We.Enabled?We.Enabled?1:2:3},this.Se=function(){var n=cr().toString(),a=be.getStorage("DynamicAssets"),r=null!=a?a:{},i=r.currentQuality,s=void 0===i?0:i,c=r.buildVersion;t.p<s&&n===c&&(t.p=s),be.setStorageData("DynamicAssets","buildVersion",n),be.updateToWebStorage("DynamicAssets")},this.l=function(){We.Enabled&&3!==t.p&&(sr.catchUp(rr.GAME_READY,function(){y.emit(L.REQUEST_UPGRADE_ASSET)}),y.on(L.REQUEST_UPGRADE_ASSET,t.handleChangeQuality))},this.Qt=function(n){Object.defineProperty(ht.prototype,"spriteFrame",{get:function get(){return this._spriteFrame},set:function set(a){if(a&&(a.refreshed||this._spriteFrame!==a)){var r=this._spriteFrame;if(this._spriteFrame=a,this.markForUpdateRenderData(!0),this._applySpriteFrame(r),this.sizeMode!==ht.SizeMode.CUSTOM){var i=this.node.getComponent(mn);if(i){var s=a.originalSize,c=s.width,u=s.height,d=new ye(c/n,u/n);i.setContentSize(d)}}}}})},this.jt=function(n){var a=he.prototype.checkRect;he.prototype.checkRect=function(){if(this.refreshed)return!0;for(var r=arguments.length,i=Array(r),s=0;s<r;s++)i[s]=arguments[s];return a.apply(this,i)}},this.Zt=function(n){var a=he.prototype._calculateSlicedUV;he.prototype._calculateSlicedUV=function(){var r,i=null!=(r=this._capInsets)?r:[0,0,0,0],s=i.map(function(c){return(c+1)*n});this._capInsets=s,a.apply(this),this._capInsets=i}},this.Jt=function(n){var a=he.prototype._refreshTexture;he.prototype._refreshTexture=function(){for(var r=arguments.length,i=Array(r),s=0;s<r;s++)i[s]=arguments[s];if(this.name&&!this.refreshed){var c=this.rect,u=c.x,d=c.y,f=c.width,v=c.height,g=Number((u*n).toFixed(2)),A=Number((d*n).toFixed(2)),b=new pn(g,A,Math.round(f*n),Math.round(v*n)),C=new ye(b.width,b.height);return this.refreshed=!0,this.reset({rect:b,originalSize:C}),a.apply(this,i)}a.apply(this,i)}},Fe(this,"handleChangeQuality",qn,this),this.$t=function(n){var a="/native@".concat(t.ee,"x/");switch(t.p){case 2:return"".concat(a,"quality/");case 1:return je.has(Ct,n)?"".concat(a,"quality/"):"".concat(a,"medium/");default:return"/native/"}},this.tn=function(n,a){return 3!==t.p&&a.includes("/native/")?a.replace("/native/",t.$t(n)):a},this.nn=function(){be.setStorageData("DynamicAssets","currentQuality",t.p),be.updateToWebStorage("DynamicAssets",!0)},this.an=p(function(){var n,a,r,i,s,c,u,d,f;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(!(n=S.getScene()))return[3,9];r=n.getComponentsInChildren("cc.Sprite"),i=x(r),_state.label=1;case 1:_state.trys.push([1,7,8,9]),i.s(),_state.label=2;case 2:if((a=i.n()).done)return[3,6];if(!(s=a.value.spriteFrame))return[3,5];if(c=s.texture,u=s.original,d=c.uuid,u&&(d=u._texture.uuid),!t.U.has(d))return[3,4];return c.updateImage(),[4,t.Kt()];case 3:_state.sent(),_state.label=4;case 4:_state.label=5;case 5:return[3,2];case 6:return[3,9];case 7:return f=_state.sent(),i.e(f),[3,9];case 8:return i.f(),[7];case 9:return[2]}})}),this.rn=function(){y.emit(L.REQUEST_DYNAMIC_ATLAS,{force:!0})},this.sn=function(n){var a,r=n.output=n.input,i=!1,s=x(r);try{for(s.s();!(a=s.n()).done;){var c=a.value;if(je.has(ur,c.ext)&&!je.has(Ct,c.uuid)){var u=c.url,d=t.tn(c.uuid,u);if(d!==u&&(c.url=d,!t.Ee.has(c.uuid))){var f={ext:c.ext,url:c.url,uuid:c.uuid,options:c.options,resolution:t.ee};t.Ee.set(c.uuid,f),i=!0}}}}catch(v){s.e(v)}finally{s.f()}i&&y.emit(L.REQUEST_UPGRADE_ASSET)},this.cn=(n=p(function(a){var r,i,s,c,u,d,f,v,g,A,w;return _ts_generator(this,function(_state){return(r=a.uuid,i=a.url,s=a.ext,c=a.options,u=a.resolution,r&&i&&s&&c&&u)?t.U.has(r)?[2,!0]:t.Ye.has(r)?[2,!1]:je.has(Ct,r)?[2,(t.U.add(r),!0)]:_instanceof(d=Ie.assets.get(r),vn)?(f="/native@".concat(u,"x/"),v="".concat(f,"medium/"),g="".concat(f,"quality/"),(A=i.replace(v,g))===i)?[2,(t.U.add(r),!0)]:(w={uuid:r,url:A,options:c,resolution:u,ext:s},[2,new Promise(function(E){Ie.loadAny(w,c,function(b,C){b?(t.Ye.add(r),E(!1)):(d.reset(C),d._nativeUrl=A,t.U.add(r),y.emit(L.ASSET_QUALITY_CHANGE,{asset:d,item:w}),E(!0))})})]):[2,!1]:[2,!1]})}),function(a){return n.apply(this,arguments)})}return R(o,[{key:"init",value:(e=p(function(){var t;return _ts_generator(this,function(_state){switch(_state.label){case 0:return this.ee=this.Xt(),this.p=this.Wt(),[4,this.$()];case 1:return _state.sent(),this.Se(),Ie.transformPipeline.insert(this.sn,2),this.p<3&&(t=this.ee/Xe.Source,this.Qt(t),this.Zt(t),this.jt(t),this.Jt(t)),this.l(),[2]}})}),function(){return e.apply(this,arguments)})}]),o}()).prototype,"handleChangeQuality",[Yn],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){var o=this;return p(function(){var e,t,n,a,r,i;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(o.ye||!We.Enabled||o.p>=2)return[3,6];_state.label=1;case 1:_state.trys.push([1,4,5,6]),o.ye=!0,t=[],n=o.U.size,a=x(o.Ee.values());try{for(a.s();!(e=a.n()).done;)r=e.value,i=o.cn(r),t.push(i)}catch(s){a.e(s)}finally{a.f()}if(t.length<1)return[2];return[4,Kn.allSettled(t)];case 2:return _state.sent(),o.U.size>n&&(o.p++,o.nn()),[4,o.an()];case 3:return _state.sent(),o.rn(),[3,6];case 4:return _state.sent(),[3,6];case 5:return o.ye=!1,[7];case 6:return[2]}})})}}),Vn);m._RF.pop(),m._RF.push({},"15ecbqnx5lFtYRSJp2lOLCm","DynamicAtlas",void 0);var Lt=Ludex,Ft=Lt.Events,Pe=Lt.Configs.GameEngine.DynamicAtlas.OptimizeAtlas,dr=Pe.AtlasDebug,hr=Pe.AutoAtlasSize,Wn=Pe.UsePowerOfTwo,fr=Pe.AllowNonePackable,Qn=Pe.OnlyOptimizeWhenRenderTooLong,Me=Lt.Utils,mr=Me.Json,pr=Me.Image,jn=Me.Function,Zn=Me.Object,Jn=Me.Mark,Tt=codex.event,vr=function(){function o(){var e=this;_(this,o),this.Ve=!0,this.se=!1,this.ce=jn.mutex(),this.Y=[],this.qe=0,this.we=5e3,this.D=null,this.ue=null,this.Ae={},this.V=new Map,this.X=new Set,this.S={},this.l=function(){y.on(L.REQUEST_DYNAMIC_ATLAS,e.be),Tt.on(Ft.SCENE_LAUNCHED,e.un),Tt.catchUp(Ft.GAME_READY,e.ln)},this.un=function(){e.dn(),e.hn()},this.hn=function(){for(var t in e.X.forEach(function(n){n.isValid&&n._resetDynamicAtlasFrame()}),e.X.clear(),T.instance.reset(),e.D=null,e.ue=null,e.S)delete e.S[t]},this.fn=function(){var t=T.instance;t.packToDynamicAtlas=e.mn,t.deleteAtlasSpriteFrame=e.pn},this.vn=function(){var t=e.Ke(),n=T.instance.maxAtlasCount+1;e.S[n]=t},this.Xe=function(){e.gn()>8&&e.yn(),S.once(k.EVENT_AFTER_RENDER,function(){setTimeout(function(){e.Xe()},e.we)})},this.yn=function(){e.Ve||(e.we=Math.min(e.we+1e3,1e4)),e.be({force:!0})},this.dn=function(){e.Ae={},e.V.clear()},this.ln=function(){S.on(k.EVENT_BEFORE_RENDER,e.En),S.on(k.EVENT_AFTER_RENDER,e.Sn),Qn&&Tt.catchUp(Ft.SCENE_LAUNCHED,function(){S.once(k.EVENT_AFTER_RENDER,e.Xe)})},this.En=function(){e.qe=performance.now()},this.Sn=function(){e.Y.length>=100&&e.Y.shift();var t=performance.now()-e.qe;e.Y.push(t)},this.gn=function(){if(0===e.Y.length)return 0;var t=e.Y.reduce(function(n,a){return n+a},0)/e.Y.length;return e.Y.length=0,t},this.mn=function(t){if(Zn.hasOwn(t,"spriteFrame")){var n=t.spriteFrame;if(e.wn(t,n)){var a=e.te(n),r=null==a?void 0:a.getId();if(r){var i=e.We(a);e.An(r,i,t),Qn||e.be()}}}},this.pn=function(t){var n=e.te(t);if(n){var a=e.ne();null==a||a.deleteInnerTexture(n),e.X.delete(t),t._resetDynamicAtlasFrame()}},this.wn=function(t,n){var a=t.enabled,r=t.node;if(!a||!n||!r.active||!r.activeInHierarchy||!n.packable&&!fr)return!1;if(n.original){var i=n.texture,s=n.original._texture,c=i===s,u=(null==i?void 0:i.getId())===(null==s?void 0:s.getId());if(c||u)return!1}if(t.color.a<1)return!1;for(var d=r;d;){var f=d.getComponent(gn);if(f&&f.opacity<1)return!1;d=d.parent}var v=e.bn(n);return!e._n(v)},this.An=function(t,n,a){var r=e.V.get(t),s=n.w+2,c=n.h+2;s<=2||c<=2||(r?(r.w=s,r.h=c):(r={id:t,w:s,h:c,x:-1,y:-1,components:new Set},e.V.set(t,r)),r.components.has(a)||r.components.add(a))},this.te=function(t){var n,a;return null!=(n=null==(a=t.original)?void 0:a._texture)?n:t.texture},this.bn=function(t){var n=e.te(t);return e.We(n)},this.We=function(t){var n,a;return null!=t&&t.image?{w:t.image.width,h:t.image.height}:{w:null!=(n=null==t?void 0:t.width)?n:0,h:null!=(a=null==t?void 0:t.height)?a:0}},this._n=function(t){var n=T.instance.maxFrameSize;return t.w>=n||t.h>=n},this.Rn=function(){if(!e.D)return!1;if(e.ue&&!e.se){var n=e.Cn(e.ue,e.D);if(e.Ve=!n,n)return!1}var a=e.ne();if(null==(t=a)||!t._texture)return!1;var r=e.D.packedInfo,i=a._texture,s=i.width,c=i.height,u=r.width+5,d=r.height+5;if(5>=Math.max(u,d))return!1;var f=Math.max(u,d),v=Wn?f:u,g=Wn?f:d;if(!(a=e.Dn(a)))return!1;if(hr||v>s||g>c){a._texture.initWithSize(v,g);var A=e.S[e.W()];A&&(A.width=v,A.height=g)}else{var t,w,E=e.S[e.W()];E&&(null==(w=E.getContext("2d"))||w.clearRect(0,0,E.width,E.height))}return e.ue=mr.clone(e.D),!0},this.xn=function(){var t=T.instance.newAtlas();if(t&&dr){var n=e.Ke(),a=e.W();e.S[a]=n}return t},this.Ke=function(){var t=T.instance.textureSize,n=document.createElement("canvas");return n.width=t,n.height=t,n},this.Dn=function(t){var n=T.instance,a=n._atlases.indexOf(t);return e.X.forEach(function(r){r.isValid&&r._resetDynamicAtlasFrame()}),e.X.clear(),t.destroy(),a>-1&&(n._atlases.splice(a,1),n._atlasIndex>=a&&n._atlasIndex--),e.ne()},this.ne=function(t){var n,a=T.instance,r=a._atlases,s=a._atlasIndex;return null!=(n=(void 0===r?[]:r)[null!=t?t:s])?n:e.xn()},this.W=function(){return T.instance._atlasIndex},this.Ln=function(){var t=e.ne(),n=T.instance.textureSize;return null!=t&&t._texture?{w:Math.max(t._texture.width,n),h:Math.max(t._texture.height,n)}:{w:n,h:n}},this.be=jn.debounce(function(t){var n;e.se||(e.se=null!=(n=null==t?void 0:t.force)&&n),e.Fn()},800),this.Fn=p(function(){var t;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(!S.getScene())return[3,2];return[4,e.ce.use("updateDynamicAtlas")];case 1:t=_state.sent(),Jn.start("DynamicAtlas Process");try{if(S.pause(),e.D=null,e.Tn(),!e.Rn()||!e.In())return[2];y.emit(L.FINISHED_DYNAMIC_ATLAS),requestAnimationFrame(e.Nn)}catch(unused){}finally{e.se=!1,Jn.stop("DynamicAtlas Process"),S.resume(),t.release()}_state.label=2;case 2:return[2]}})}),this.Tn=function(){if(!(e.V.size<1)){var t=[];e.V.forEach(function(n){n.components.size<1||t.push(n)}),e.Qe(t)}},this.Qe=function(t){if(0!==t.length){var n=function(f){var v,g=0,A=0,w=x(f);try{for(w.s();!(v=w.n()).done;){var E=v.value;g+=E.w*E.h,A=Math.max(A,E.w)}}catch(Be){w.e(Be)}finally{w.f()}f.sort(function(Be,ao){return ao.h-Be.h});var b,C=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(g/.95)),A),h:1/0}],O=0,U=0,H=x(f);try{for(H.s();!(b=H.n()).done;)for(var D=b.value,ze=C.length-1;ze>=0;ze--){var I=C[ze];if(!(D.w>I.w||D.h>I.h)){if(D.x=I.x,D.y=I.y,U=Math.max(U,D.y+D.h),O=Math.max(O,D.x+D.w),D.w===I.w&&D.h===I.h){var Oa=C.pop();Oa&&ze<C.length&&(C[ze]=Oa)}else D.h===I.h?(I.x+=D.w,I.w-=D.w):(D.w===I.w||C.push({x:I.x+D.w,y:I.y,w:I.w-D.w,h:D.h}),I.y+=D.h,I.h-=D.h);break}}}catch(Be){H.e(Be)}finally{H.f()}return{w:O,h:U,fill:g/(O*U)||0}}(t),a=n.w,r=n.h,i=n.fill;if(!(i<.6)){var s=e.Ln();if(a>s.w||r>s.h){var c=e.Pn(t,s);if(c.length<1)return;var u=new Set(c),d=t.filter(function(f){return!u.has(f)});e.Qe(d)}else e.D={atlasSize:s,atlasIndex:e.W(),packedInfo:{width:Math.round(a),height:Math.round(r),fillRate:i}}}}},this.Pn=function(t,n){var a=n.w,r=n.h,i=e.Mn(a,r,n),s=i.excessWidth,c=i.excessHeight;return e.kn(t,s,c)},this.Mn=function(t,n,a){return{excessWidth:Math.max(0,t-a.w),excessHeight:Math.max(0,n-a.h)}},this.kn=function(t,n,a){var r,i=0,s=0,c=[],u=e.W(),d=x(t);try{for(d.s();!(r=d.n()).done;){var f,v=r.value;(n>0&&i<n||a>0&&s<a)&&(i+=v.w,s+=v.h,e.Ae[v.id]=Math.min(null!=(f=e.Ae[v.id])?f:u,u),v.x=-1,v.y=-1,c.push(v))}}catch(g){d.e(g)}finally{d.f()}return c},this.In=function(){if(!e.D)return!1;var t=e.ne();if(!t)return!1;var n=[],a=new Map,r=new Set;e.V.forEach(function(u){r.add(u.id);var d,f=x(u.components);try{for(f.s();!(d=f.n()).done;){var v,g=d.value;if(g.isValid){var A=null==g?void 0:g.spriteFrame;if(A){var w=e.te(A),E=null==w?void 0:w.getId();E&&(a.set(E,(null!=(v=a.get(E))?v:0)+1),n.push(g))}}}}catch(b){f.e(b)}finally{f.f()}});for(var i=0;i<n.length;i++){var c=n[i];e.On(t,c)}return!0},this.On=function(t,n){if(Zn.hasOwn(n,"spriteFrame")){var a=n.spriteFrame;a&&e.Un(t,a,n)}},this.Un=function(t,n,a){n.original&&n._resetDynamicAtlasFrame();var r=T.instance.textureBleeding,i=e.Gn(t,n,r);i&&(n._setDynamicAtlasFrame(i),e.X.add(n),a.setTextureDirty(),a.markForUpdateRenderData(!0),e.zn(a))},this.zn=function(t){var n;if(_instanceof(t,ft)){var a=t.renderData;if(a){a.vertDirty=!1;var r=ft.Assembler.getAssembler(t);null==r||null==(n=r.updateUVs)||n.call(r,t)}}},this.Nn=function(){if(dr){var t=T.instance.maxAtlasCount;for(var n in e.S){var a=e.S[n];if(a&&Number(n)<=t){var r=a.toDataURL("image/jpeg",.6);pr.logImage(r,.5)}}}},this.Gn=function(t,n,a){var r,i,s,c,u=e.te(n);if(!u)return null;var d=u.getId(),f=e.V.get(d);if(!f)return null;var v=null!=(r=f.x)?r:-1,g=null!=(i=f.y)?i:-1;if(-1===v||-1===g)return null;var A=t._texture,w=A.width,E=A.height;if(v+f.w>w||g+f.h>E)return null;var b=u.image;if(!b)return null;var C=1*!!a,O=v+C,U=g+C,H=t._innerTextureInfos[d];if(!H){if(e.Bn({atlas:t,texId:d,image:b,drawX:O,drawY:U,space:C}),dr){var D=f.components.size;e.Hn({image:b,texId:d,drawX:O,drawY:U,usageCount:D,space:C})}t._count++,H={texture:u,x:O,y:U},t._innerTextureInfos[d]=H}return{x:n.rect.x+(null!=(s=H.x)?s:O),y:n.rect.y+(null!=(c=H.y)?c:U),texture:t._texture}},this.Bn=function(t){var n=t.atlas,a=t.image,r=t.drawX,i=t.drawY,s=t.space,c=n._texture;s>0&&(a.width<=16||a.height<=16)&&(c.drawTextureAt(a,r-s,i-s),c.drawTextureAt(a,r-s,i+s),c.drawTextureAt(a,r+s,i-s),c.drawTextureAt(a,r+s,i+s)),c.drawTextureAt(a,r,i)},this.Hn=function(t){var n=e.W(),a=e.S[n];if(a){var r=t.image,i=t.texId,s=t.drawX,c=t.drawY,u=t.usageCount,d=t.space,f=a.getContext("2d",{willReadFrequently:!0}),v=null==r?void 0:r.data;f&&v&&e.isDrawableImage(v)&&(e.Yn({ctx:f,image:r,drawX:s,drawY:c,space:d}),e.Vn({ctx:f,image:r,drawX:s,drawY:c,space:d,usageCount:u}),e.qn({ctx:f,image:r,drawX:s,drawY:c,space:d,texId:i}))}},this.Yn=function(t){var n=t.ctx,a=t.image,r=t.drawX,i=t.drawY,s=t.space,c=a.data;s>0&&(a.width<=16||a.height<=16)&&(n.drawImage(c,r-s,i-s),n.drawImage(c,r-s,i+s),n.drawImage(c,r+s,i-s),n.drawImage(c,r+s,i+s)),n.drawImage(c,r,i)},this.Vn=function(t){var n=t.ctx,a=t.image,r=t.drawX,i=t.drawY,s=t.space,c=t.usageCount,u=r,d=i,f=a.width,v=a.height;s>0&&(u-=s,d-=s,f+=2*s,v+=2*s);var g=240*(1-Math.min(c/15,1));n.fillStyle="hsla(".concat(g,", 100%, 50%, 0.2)"),n.fillRect(u+.5,d+.5,f,v)},this.qn=function(t){var n=t.ctx,a=t.drawX,r=t.drawY,i=t.space,s=t.texId;n.font="22px Arial",n.textAlign="left",n.textBaseline="top";var c=n.measureText(s.replace("Tex.","")),d=a-i+10,f=r-i+10;n.fillStyle="rgba(0, 50, 0, 0.8)",n.fillRect(d-4,f-4,c.width+8,30),n.fillStyle="rgba(255, 255, 255, 0.95)",n.fillText(s,d,f)},this.Cn=function(t,n){return!(!t||!n||t.atlasIndex!==n.atlasIndex)&&t.packedInfo.fillRate===n.packedInfo.fillRate&&t.packedInfo.width===n.packedInfo.width&&t.packedInfo.height===n.packedInfo.height}}return R(o,[{key:"init",value:function value(){this.l(),this.fn(),dr&&this.vn()}},{key:"isDrawableImage",value:function value(e){return _instanceof(e,HTMLCanvasElement)||_instanceof(e,HTMLImageElement)||_instanceof(e,ImageBitmap)}}]),o}();m._RF.pop(),m._RF.push({},"f18351KuT9C+7suAM5eHst5","renderResultChallenge",void 0);var Re=Ludex.Utils.Error,ne="./wideframes",gr="".concat(ne,"/result-challenge.png"),yr="".concat(ne,"/update-challenge.png"),$n="".concat(ne,"/images/avatar-fallback.png"),me={wideframe:{type:"image",depth:0,size:[952,492],position:[0,0]},playerPhoto:{type:"image",depth:-2,size:[160,160],position:[50,140],fallbackImage:$n},opponentPhoto:{type:"image",depth:-1,size:[160,160],position:[740,140],fallbackImage:$n},leftScore:{type:"text",name:"left-score",depth:3,font:"normal bold 44px",color:"#f2a62e",textAlign:"center",position:[123,372]},rightScore:{type:"text",name:"right-score",depth:3,font:"normal bold 44px",color:"#f2a62e",textAlign:"center",position:[820,372]},leftCrown:{type:"image",name:"crown",depth:3,size:[92,63],position:[80,80],image:"".concat(ne,"/images/crown-icon.png")},rightCrown:{type:"image",name:"crown",depth:3,size:[92,63],position:[775,80],image:"".concat(ne,"/images/crown-icon.png")}},Er={win:{name:"win-image",type:"image",depth:2,size:[277,144],position:[337.5,174],image:"".concat(ne,"/images/win.png")},lose:{name:"lose-image",type:"image",depth:2,size:[326,145],position:[313,173.5],image:"".concat(ne,"/images/lose.png")},draw:{name:"draw-image",type:"image",depth:2,size:[390,144],position:[281,174],image:"".concat(ne,"/images/draw.png")}},Sr=(o=p(function(e){var t,n,a;return _ts_generator(this,function(_state){switch(_state.label){case 0:return t=Re.lift({}),n=Re.pipe(br(e),_r(e),Rr(e),Ar(e))(t),[4,Re.applyAsync(wr)(n)];case 1:if(a=_state.sent(),Re.isFailure(a))return Re.extractFailure(a),[2,null];return[2,Re.extractSuccess(a)]}})}),function(e){return o.apply(this,arguments)}),wr=function wr(o){return codex.frameCapture.captureAsync({name:"ResultChallenge",width:952,height:492,renderOptions:o})},Ar=function Ar(o){return function(e){var t=o.isPlayerFinished,n=o.isOpponentFinished,a=t||n;return l(l({},e),{},{wideframe:l(l({},me.wideframe),{},{image:a?gr:yr,name:a?"result-challenge-with-score-box":"result-challenge-without-score-box"})})}},br=function br(o){return function(e){return l(l({},e),{},{playerPhoto:l(l({},me.playerPhoto),{},{name:o.playerId,image:o.playerPhoto}),opponentPhoto:l(l({},me.opponentPhoto),{},{name:o.opponentId,image:o.opponentPhoto})})}},_r=function _r(o){return function(e){var t=o.isPlayerFinished,n=o.isOpponentFinished,a=o.playerScore,i=o.opponentScore;return t||n?l(l({},e),{},{leftScore:l(l({},me.leftScore),{},{text:t?"".concat(void 0===a?0:a):"???"}),rightScore:l(l({},me.rightScore),{},{text:n?"".concat(void 0===i?0:i):"???"})}):e}},Rr=function Rr(o){return function(e){var t=Cr(o);if("none"===t)return e;var n=Er[t];if("draw"===t)return l(l({},e),{},{statusImage:n});var a="win"===t?me.leftCrown:me.rightCrown;return l(l({},e),{},{crown:a,statusImage:n})}},Cr=function Cr(o){var e=o.playerScore,t=void 0===e?0:e,n=o.opponentScore,a=void 0===n?0:n,r=o.isPlayerFinished,i=o.isOpponentFinished;return r&&i?t===a?"draw":t>a?"win":"lose":"none"};m._RF.pop(),m._RF.push({},"46949HU2K9PdYlSXXZkfABn","renderShareLeaderboard",void 0);var Ce=Ludex.Utils.Error,ea="./wideframes",It="".concat(ea,"/images/avatar-fallback.png"),ae={wideframe:{name:"share-leaderboard",type:"image",depth:0,image:"".concat(ea,"/share-leaderboard.png"),size:[1500,2e3],position:[0,0],fallbackImage:It},avatar:{type:"image",depth:-2,size:[510,510],position:[510,278],fallbackImage:It},leaderPhoto:{type:"image",depth:-1,size:[100,100],fallbackImage:It,position:[436,0]},leaderName:{type:"text",depth:1,font:"600 48px",position:[600,0]},leaderScore:{type:"text",depth:1,font:"600 48px",position:[100,0]}},xr=(o1=p(function(e){var t,n,a;return _ts_generator(this,function(_state){switch(_state.label){case 0:return t=Ce.lift({}),n=Ce.pipe(Tr(e),Ir(e),Fr)(t),[4,Ce.applyAsync(Lr)(n)];case 1:if(a=_state.sent(),Ce.isFailure(a))return Ce.extractFailure(a),[2,null];return[2,Ce.extractSuccess(a)]}})}),function(e){return o1.apply(this,arguments)}),Lr=function Lr(o){return codex.frameCapture.captureAsync({name:"ShareLeaderboard",width:1500,height:2e3,renderOptions:o})},Fr=function Fr(o){return l(l({},o),{},{wideframe:ae.wideframe})},Tr=function Tr(o){return function(e){return l(l({},e),{},{avatar:l(l({},ae.avatar),{},{name:o.playerId,image:o.playerPhoto})})}},Ir=function Ir(o){return function(e){for(var t=o.leaders,n=l({},e),a=0;a<t.length;a++){var r=t[a],i=r.id,s=r.name,c=r.photo,u=r.score,d=1292+180*a,f=1360+180*a;n["photo_".concat(i)]=l(l({},ae.leaderPhoto),{},{position:[ae.leaderPhoto.position[0],d],name:i,image:c}),n["name_".concat(i)]=l(l({},ae.leaderName),{},{position:[ae.leaderName.position[0],f],name:i,text:s}),n["score_".concat(i)]=l(l({},ae.leaderScore),{},{position:[ae.leaderScore.position[0],f],name:i,text:"".concat(u)})}return n}};m._RF.pop(),m._RF.push({},"c5f1cF6b7dGYLU3X1NOhOPG","renderShareScore",void 0);var Nt=Ludex.Utils,De=Nt.Error,Nr=(Nt.Valid,Nt.Function),Pt=codex,Pr=Pt.frameCapture,Ze=Pt.language,ta=Pt.monitorError,na="./wideframes",ke={wideframe:{type:"image",name:"share-score",depth:0,image:"".concat(na,"/share-score.png"),size:[1500,2e3],position:[0,0]},avatar:{type:"image",depth:-1,size:[500,500],position:[500,410],fallbackImage:"".concat(na,"/images/avatar-fallback.png")},playerScore:{type:"text",name:"player-score",depth:1,font:"normal bold",color:"#f2a62e",textAlign:"center",position:[750,1120]},message:{type:"text",name:"message",depth:2,color:"#8f5543",textAlign:"center",position:[760,1560]}},Or=(o2=p(function(e){var t,n,a;return _ts_generator(this,function(_state){switch(_state.label){case 0:return t=De.lift({}),n=De.pipe(zr(e),Br(e),Hr,Gr)(t),[4,De.applyAsync(Ur)(n)];case 1:if(a=_state.sent(),De.isFailure(a))return De.extractFailure(a),[2,null];return[2,De.extractSuccess(a)]}})}),function(e){return o2.apply(this,arguments)}),Ur=function Ur(o){return Pr.captureAsync({name:"ShareScore",width:1500,height:2e3,renderOptions:o})},Gr=function Gr(o){return l(l({},o),{},{wideframe:ke.wideframe})},zr=function zr(o){return function(e){return l(l({},e),{},{avatar:l(l({},ke.avatar),{},{name:"".concat(o.playerId),image:o.playerPhoto})})}},Br=function Br(o){return function(e){var t=ke.playerScore.font,n=aa(),a=ra();return l(l({},e),{},{playerScore:l(l({},ke.playerScore),{},{text:"".concat(o.playerScore),font:"".concat(t," ").concat(a," ").concat(n,",")})})}},Hr=function Hr(o){var e=aa(),t=ra(),n=Vr(),a=l(l({},ke.message),{},{font:"normal ".concat(t," ").concat(e,","),text:n});return l(l({},o),{},{message:a})},aa=function aa(){var t=Yr(ct[Ze.getCurrentLocale()]);return"".concat(t,"_LABEL")},ra=function ra(){var o;return null!=(o=Jt[Ze.getCurrentLocale()])?o:"104px"},Yr=function Yr(o){var e,t=o.split("/"),n=null!=(e=t[t.length-1])?e:"",a=n.lastIndexOf(".");return -1===a?n:n.substring(0,a)},Vr=function Vr(){try{return Ze.getText("share.canYouDoBetter")}catch(o){return null==ta||ta.sendException(Nr.toError(o),{locale:Ze.getCurrentLocale(),message:"share.canYouDoBetter"}),"share.canYouDoBetter"}};m._RF.pop(),m._RF.push({},"3639a1RbypBKqHUo6gIZVdm","renderShareScoreWithInvite",void 0);var xe=Ludex.Utils.Error,ia=codex,qr=ia.frameCapture,oa=ia.language,sa="./wideframes",Je={wideframe:{type:"image",name:"share-score-with-invite",depth:0,image:"".concat(sa,"/invite-score.png"),size:[952,492],position:[0,0]},avatar:{type:"image",depth:-1,size:[160,160],position:[85,140],fallbackImage:"".concat(sa,"/images/avatar-fallback.png")},playerScore:{type:"text",name:"player-score",depth:1,font:"normal bold",color:"#f2a62e",textAlign:"center",position:[165,384]}},Wr={en:"44px",ru:"40px"},Qr=(o3=p(function(e){var t,n,a;return _ts_generator(this,function(_state){switch(_state.label){case 0:return t=xe.lift({}),n=xe.pipe(Jr(e),$r(e),Zr)(t),[4,xe.applyAsync(jr)(n)];case 1:if(a=_state.sent(),xe.isFailure(a))return xe.extractFailure(a),[2,null];return[2,xe.extractSuccess(a)]}})}),function(e){return o3.apply(this,arguments)}),jr=function jr(o){return qr.captureAsync({name:"ShareScore",width:952,height:492,renderOptions:o})},Zr=function Zr(o){return l(l({},o),{},{wideframe:Je.wideframe})},Jr=function Jr(o){return function(e){return l(l({},e),{},{avatar:l(l({},Je.avatar),{},{name:"".concat(o.playerId),image:o.playerPhoto})})}},$r=function $r(o){return function(e){var t=Je.playerScore.font,n=ei(),a=ti();return l(l({},e),{},{playerScore:l(l({},Je.playerScore),{},{text:"".concat(o.playerScore),font:"".concat(t," ").concat(a," ").concat(n,",")})})}},ei=function ei(){var t=ni(ct[oa.getCurrentLocale()]);return"".concat(t,"_LABEL")},ti=function ti(){var o;return null!=(o=Wr[oa.getCurrentLocale()])?o:"44px"},ni=function ni(o){var e,t=o.split("/"),n=null!=(e=t[t.length-1])?e:"",a=n.lastIndexOf(".");return -1===a?n:n.substring(0,a)};m._RF.pop(),m._RF.push({},"407a0rBEoFPs6GoXuwQofW2","renderUpdateChallenge",void 0);var Le=Ludex.Utils.Error,ca="./wideframes",ua="".concat(ca,"/images/avatar-fallback.png"),Mt={wideframe:{type:"image",name:"update-challenge",depth:0,image:"".concat(ca,"/update-challenge.png"),size:[952,492],position:[0,0]},playerPhoto:{type:"image",depth:-1,size:[160,160],position:[50,140],fallbackImage:ua},opponentPhoto:{type:"image",depth:-1,size:[160,160],position:[740,140],fallbackImage:ua}},ri=(o4=p(function(e){var t,n,a;return _ts_generator(this,function(_state){switch(_state.label){case 0:return t=Le.lift({}),n=Le.pipe(si(e),oi)(t),[4,Le.applyAsync(ii)(n)];case 1:if(a=_state.sent(),Le.isFailure(a))return Le.extractFailure(a),[2,null];return[2,Le.extractSuccess(a)]}})}),function(e){return o4.apply(this,arguments)}),ii=function ii(o){return codex.frameCapture.captureAsync({name:"UpdateChallenge",width:952,height:492,renderOptions:o})},oi=function oi(o){return l(l({},o),{},{wideframe:Mt.wideframe})},si=function si(o){return function(e){return l(l({},e),{},{playerPhoto:l(l({},Mt.playerPhoto),{},{image:o.playerPhoto,name:o.playerId}),opponentPhoto:l(l({},Mt.opponentPhoto),{},{image:o.opponentPhoto,name:o.opponentId})})}};m._RF.pop(),m._RF.push({},"5cf47s8lohMlZGIaMKBpDK0","FrameCapture",void 0);var o,o1,o2,o3,o4,la,da,ha,Oe=codex.frameCapture,ci=function(){var e;function o(){_(this,o)}return R(o,[{key:"init",value:(e=p(function(){return _ts_generator(this,function(_state){return Oe.setRenderer("share-score",Or),Oe.setRenderer("result-challenge",Sr),Oe.setRenderer("update-challenge",ri),Oe.setRenderer("share-leaderboard",xr),Oe.setRenderer("share-score-with-invite",Qr),[2]})}),function(){return e.apply(this,arguments)})}]),o}();m._RF.pop(),m._RF.push({},"2f36c+IsKJAU5s61TqQdaJ6","HybridFileCache",void 0);var kt=Ludex,fa=kt.Events,Ot=kt.Configs.GameEngine.HybridFileCache,ui=Ot.Enabled,$e=Ot.PreviewMode,Ue=Ot.BuildMode,et=kt.Utils,ma=et.Object,li=et.Function,pa=et.Json,di=et.Decorator,Ut=codex,va=Ut.event,N=Ut.storage,hi=Ut.getBuildVersion,Gt=de.instance,ga=Gt.downloader,re=Gt.pipeline,ie=Gt.fetchPipeline,fi=/.*\/([-a-z0-9@]+)\.([^.]+)$/,mi=(la=di.throttle(1e3),ha=Y((da=function(){var e;function o(){var n,t=this;_(this,o),this.le=[],this._e={},this.je={},this.Re={},this.$=p(function(){return _ts_generator(this,function(_state){return[2,N.addStorage("HybridFileCache",{commitId:"unknown",buildVersion:"0",cachedFiles:{},cachedBundles:{},cachedExtensions:{}},!0)]})}),this.Se=p(function(){var n,a,r,i,s,c,u;return _ts_generator(this,function(_state){switch(_state.label){case 0:switch(n=Ue.InvalidateMode,a=window.CommitId,r=hi().toString(),i=N.getStorageData("HybridFileCache","commitId"),s=N.getStorageData("HybridFileCache","buildVersion"),N.setStorageData("HybridFileCache","commitId",a),N.setStorageData("HybridFileCache","buildVersion",r),c=i!==a,u=s!==r,n){case"version":return[3,1];case"commitId":return[3,4]}return[3,7];case 1:if(!u)return[3,3];return[4,t.de()];case 2:_state.sent(),_state.label=3;case 3:return[3,10];case 4:if(!c)return[3,6];return[4,t.de()];case 5:_state.sent(),_state.label=6;case 6:return[3,10];case 7:if(!(u||c))return[3,9];return[4,t.de()];case 8:_state.sent(),_state.label=9;case 9:_state.label=10;case 10:return t.requestUpdateStorage(),[2]}})}),this.Kn=function(){t.le=Ue.SupportedExtensions},this.Xn=p(function(){var n,a,r,i;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(_state.trys.push([0,,3,4]),!$t||!Ue.Enabled)return[2];a=[],r=x(t.le);try{for(r.s();!(n=r.n()).done;)i=n.value,t.Wn(i)||a.push(t.Qn(i))}catch(s){r.e(s)}finally{r.f()}if(!(a.length>0))return[3,2];return[4,li.allSettled(a)];case 1:_state.sent(),_state.label=2;case 2:return[3,4];case 3:return va.emit(fa.BUNDLE_READY),[7];case 4:return[2]}})}),this.Qn=(n=p(function(a){var r,i,c;return _ts_generator(this,function(_state){switch(_state.label){case 0:return _state.trys.push([0,3,,4]),r=a.replace(".",""),i="./cache/bundle".concat(r.toUpperCase(),".").concat(r),"bundle"===a&&(i="./cache/bundleBUNDLE.json"),[4,fetch(i,{method:"GET",headers:{"Content-Type":"application/json"}})];case 1:return[4,_state.sent().json()];case 2:return c=_state.sent(),t.jn(a,c),[3,4];case 3:return _state.sent(),[3,4];case 4:return[2]}})}),function(a){return n.apply(this,arguments)}),this.Zn=function(){if($e.Enabled||Ue.Enabled){var n=ie.pipes[2];n&&(ie.remove(2),ie.insert(function(a,r){try{n(a,r)}catch(unused){}},2))}},this.Jn=function(){if($e.Enabled||Ue.Enabled){var n=re.pipes[2];n&&(re.remove(2),re.insert(function(a,r){try{n(a,r)}catch(i){r(i)}},2))}},this.$n=function(){if($e.Enabled&&$e.CacheUuidExtension){var n={},a=function a(g,A){g.output=g.input;for(var w=0;w<g.input.length;w++){var E=g.input[w];if(E.id){var b=t.ea(E.id);b?(E.url=E.url.replace(E.ext,b),E.ext=b,n[E.id]=!0):n[E.id]=!1}}A(null,null)},r=function r(g){return function(A,w){for(var E=$(A.input),b=0;b<E.length;b++){var C=E[b];if(C.id){var O,U=n[C.id];ma.hasOwn(t.Re,C.id)||(t.Re[C.id]=null!=(O=C.isNative)&&O),U&&(C.isNative=!0)}}A.input.length,g(A,w)}},i=function i(g,A){g.output=g.input;for(var w=0;w<g.output.length;w++){var E,b=g.output[w];if(b.id){var C=null!=(E=t.Re[b.id])&&E;b.isNative=C,n[b.id]||t.ta(b.id,b.ext)}}A(null,null)};re.insert(a,1),ie.insert(a,1),re.insert(i,3),ie.insert(i,3);var s=$(re.pipes),c=$(ie.pipes),u=s[2];u&&(re.pipes[2]=r(u));var d=c[2];d&&(ie.pipes[2]=r(d)),$(re.pipes),$(ie.pipes)}},this.na=function(){var n,a=x(t.le);try{for(a.s();!(n=a.n()).done;){var r=n.value,i=ga.handlers[r];i&&(t.je[r]=i)}}catch(s){a.e(s)}finally{a.f()}},this.aa=function(){var n,a=x(t.le);try{for(a.s();!(n=a.n()).done;){var r=n.value;"bundle"!==r&&ga.register(r,t.ra(r))}}catch(i){a.e(i)}finally{a.f()}},this.l=function(){va.on(fa.SCENE_LOADED,t.requestUpdateStorage),y.on(L.CLEAR_HYBRID_FILE_CACHE,t.de)},this.ia=function(n){var a;return null!=(a=t.je[n])?a:null},this.ra=function(n){return function(a,r,i){var s=t.oa(n,a);if(s)return i(null,s);var c=t.ia(n);if(!c)return i(Error("Downloader not found"),null);c(a,r,function(u,d){return u||t.sa(n,a,d),i(u,d)})}},this.Ze=function(n,a){var r=a.match(fi);if(!r)return null;var i=en(r,3),s=(i[0],i[1]),c=i[2];return!c||0>n.indexOf(c)?null:"".concat(s,":").concat(n)},this.ca=function(n){return Array.isArray(n)&&ma.hasOwn(n[0],"__type__"),!0},this.sa=function(n,a,r){var i=t.Ze(n,a);if(i&&t.ca(r)){var s=pa.clone(r);N.setStorageData("HybridFileCache","cachedFiles",He({},i,null!=s?s:{})),t.requestUpdateStorage()}},this.oa=function(n,a){var r=t.Ze(n,a);if(!r)return null;var i=t.ua()[r];return i||(i=t.la(n,r)),i?pa.clone(i):null},this.ua=function(){var n;return null!=(n=N.getStorageData("HybridFileCache","cachedFiles"))?n:{}},this.Wn=function(n){var a=N.getStorageData("HybridFileCache","cachedBundles");if(!a)return null;var r=a[n];return r?(t._e[n]=r,r):null},this.la=function(n,a){var r,i=t._e[n];return i&&null!=(r=i[a.replace(":".concat(n),"")])?r:null},this.jn=function(n,a){t._e[n]=a,N.setStorageData("HybridFileCache","cachedBundles",He({},n,a)),t.requestUpdateStorage()},this.ea=function(n){return t.da()[n]},this.ta=function(n,a){N.setStorageData("HybridFileCache","cachedExtensions",He({},n,a)),t.requestUpdateStorage()},this.da=function(){var n;return null!=(n=N.getStorageData("HybridFileCache","cachedExtensions"))?n:{}},Fe(this,"requestUpdateStorage",ha,this),this.de=function(){N.initStorageData("HybridFileCache","cachedFiles",{}),N.initStorageData("HybridFileCache","cachedBundles",{}),N.updateToWebStorage("HybridFileCache",!0)}}return R(o,[{key:"init",value:(e=p(function(){return _ts_generator(this,function(_state){switch(_state.label){case 0:if(!ui)return[3,3];return[4,this.$()];case 1:return _state.sent(),[4,this.Se()];case 2:_state.sent(),this.Kn(),this.Jn(),this.Zn(),this.$n(),this.na(),this.aa(),this.Xn(),this.l(),_state.label=3;case 3:return[2]}})}),function(){return e.apply(this,arguments)})}]),o}()).prototype,"requestUpdateStorage",[la],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return function(){N.updateToWebStorage("HybridFileCache",!1)}}}),da);m._RF.pop(),m._RF.push({},"14b76Yew19JgY7K+L9F5mmu","Languages",void 0);var ya=Ludex,pi=ya.Events,vi=ya.Utils.Array,tt=codex,Ea=tt.player,gi=tt.event,nt=tt.language,oe=tt.monitorError,yi=function(){var e;function o(){var n,n1,n2,n3,t=this;_(this,o),this.ha=p(function(){return _ts_generator(this,function(_state){return nt.add("en",bn,!0),t.j("en"),[2]})}),this.fa=p(function(){var n,a,r;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(!(n=nt.getPlayerLanguage())||!t.he(n))return[2,void t.j("en",!0)];_state.label=1;case 1:return _state.trys.push([1,3,,4]),[4,t.Ce(n)];case 2:return _state.sent(),r=null!=(a=Ea.getPlayerDataByKey("isFirstLogin"))&&a,t.j(n,r),[3,4];case 3:return _state.sent(),t.j("en",!0),[3,4];case 4:return[2]}})}),this.he=function(n){return vi.has(tn,n)},this.ma=function(){gi.on(pi.REQUEST_LANGUAGE,t.pa),y.on(L.PRELOAD_LANGUAGE,t.va),y.on(L.CHOOSE_LANGUAGE,t.ga)},this.Ce=(n=p(function(a){var r,i,_arguments=arguments;return _ts_generator(this,function(_state){switch(_state.label){case 0:return r=_arguments.length>1&&void 0!==_arguments[1]&&_arguments[1],[4,t.ya(a)];case 1:return i=_state.sent(),nt.add(a,i,r),[2]}})}),function(a){return n.apply(this,arguments)}),this.j=function(n){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];nt.choose(n),a&&Ea.setSetting("language",n)},this.va=(n1=p(function(a){var r,i,s,u,c;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(r=a.locale,i=a.onLoad,s=a.onError,!t.he(r))return[2,void(null==s||s(Error("Language ".concat(r," not found"))))];_state.label=1;case 1:return _state.trys.push([1,3,,4]),[4,t.Ce(r)];case 2:return _state.sent(),null==i||i(r),[3,4];case 3:return u=_state.sent(),c=t.fe(u,"handleLanguageRequested"),null==oe||oe.sendException(c),null==s||s(u),[3,4];case 4:return[2]}})}),function(a){return n1.apply(this,arguments)}),this.ga=function(n){var a=n.locale,r=n.saveToPlayerData;if(t.he(a))try{t.j(a,void 0!==r&&r)}catch(c){var s=t.fe(c,"handleLanguageRequested");null==oe||oe.sendException(s)}},this.ya=(n2=p(function(a){var r,i;return _ts_generator(this,function(_state){switch(_state.label){case 0:if("en"===a)return[2,bn];return r=nn[a],[4,ut.loadJsonAsync(r)];case 1:if(null===(i=_state.sent()))throw Error("Language ".concat(a," not found"));if(null===i.json)throw Error("Language ".concat(a," is empty"));return[2,i.json]}})}),function(a){return n2.apply(this,arguments)}),this.pa=(n3=p(function(a){var r,i,s,c,u,f,d;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(r=a.locale,s=void 0!==(i=a.saveToPlayerData)&&i,c=a.onLoad,u=a.onError,!t.he(r))return[2,void(null==u||u(Error("Language ".concat(r," not found"))))];_state.label=1;case 1:return _state.trys.push([1,3,,4]),[4,t.Ce(r)];case 2:return _state.sent(),null==c||c(r),t.j(r,s),[3,4];case 3:return f=_state.sent(),d=t.fe(f,"handleLanguageRequested"),null==oe||oe.sendException(d),null==u||u(d),[3,4];case 4:return[2]}})}),function(a){return n3.apply(this,arguments)}),this.fe=function(n,a){return _instanceof(n,Error)?n:"string"==typeof n?Error("LanguagePlugin: ".concat(n)):Error("LanguagePlugin: Unknown error in module: <".concat(a,">"))}}return R(o,[{key:"init",value:(e=p(function(){var n,t;return _ts_generator(this,function(_state){switch(_state.label){case 0:return _state.trys.push([0,3,,4]),[4,this.ha()];case 1:return _state.sent(),this.ma(),[4,this.fa()];case 2:return _state.sent(),[3,4];case 3:return n=_state.sent(),t=this.fe(n,"handleLanguageRequested"),null==oe||oe.sendException(t),[3,4];case 4:return[2]}})}),function(){return e.apply(this,arguments)})}]),o}();m._RF.pop(),m._RF.push({},"fb33bK/6Y5FAas5AwmmBM/X","Leaderboards",void 0);var Sa=Ludex,wa=Sa.Configs,Aa=wa.Mockup,ba=Aa.Leaderboards,Ei=Aa.GameSDK.Player,_a=wa.Leaderboards,Ra=Sa.Utils.Number,pe=codex.leaderboard,Si=function(){function o(){var e=this;_(this,o),this.Ea=function(){ba.Enabled?e.Sa():e.wa()},this.wa=p(function(){return _ts_generator(this,function(_state){return e.Aa(),[2]})}),this.Aa=function(){var t,n=_a.LeaderboardList,a=x(n);try{for(a.s();!(t=a.n()).done;){var r=t.value,i=r.Id,s=r.Name;pe.addLeaderboard({name:s,type:"global",autoSortRank:!0,leaderboardId:i})}}catch(c){a.e(c)}finally{a.f()}},this.Sa=p(function(){return _ts_generator(this,function(_state){return e.ba(),e._a(),e.Ra(),[2]})}),this.ba=p(function(){var t,n,a,r,i,s,c,u,d;return _ts_generator(this,function(_state){switch(_state.label){case 0:n=ba.NumOfLeaders,a=_a.LeaderboardList,r=x(a),_state.label=1;case 1:_state.trys.push([1,6,7,8]),r.s(),_state.label=2;case 2:if((t=r.n()).done)return[3,5];if(s=(i=t.value).Name,c=i.Id,!s)return[3,4];return[4,pe.createLeaderboardAsync({_id:c,name:s,numberOfLeaders:Ra.random(n.Max-n.Min)+n.Min})];case 3:u=_state.sent(),pe.addLeaderboard({name:s,type:"global",autoSortRank:!0,leaderboardId:u}),_state.label=4;case 4:return[3,2];case 5:return[3,8];case 6:return d=_state.sent(),r.e(d),[3,8];case 7:return r.f(),[7];case 8:return[2]}})}),this._a=p(function(){var t,n,a,r;return _ts_generator(this,function(_state){switch(_state.label){case 0:return t="Mock Friends Leaderboard",n=0,(a=Ei.ConnectedPlayers).Enabled&&(n=Ra.random(a.NumOfPlayers-1)+1),[4,pe.createLeaderboardAsync({_id:"friends-leaderboard-id",name:t,numberOfLeaders:n})];case 1:return r=_state.sent(),pe.addLeaderboard({name:t,type:"friends",autoSortRank:!0,leaderboardId:r}),[2]}})}),this.Ra=p(function(){return _ts_generator(this,function(_state){switch(_state.label){case 0:return[4,an.requestTournamentDataAsync()];case 1:return _state.sent().forEach(function(t){var n=t.payload.leaderboardId;n&&(pe.isExistLeaderboardId(n)||pe.addLeaderboard({type:"tournament",name:n,autoSortRank:!0,leaderboardId:n}))}),[2]}})})}return R(o,[{key:"init",value:function value(){this.Ea()}}]),o}();m._RF.pop(),m._RF.push({},"e7bf73g4jJGuI9FqvW5YBsS","PerformanceMonitor",void 0);var zt=Ludex,wi=zt.Utils.Mark,Ai=zt.Events,Bt=zt.Configs.PerformanceMonitor.FpsTracking,bi=codex.event,_i=function(){function o(){var e=this;_(this,o),this.o="FPS Tracking",this.l=function(){bi.catchUp(Ai.GAME_READY,e.Ca)},this.Da=function(){S.off(k.EVENT_AFTER_UPDATE,e.Je)},this.Ca=function(){e.$e(),S.on(k.EVENT_AFTER_UPDATE,e.Je)},this.$e=function(){e.mark&&(e.mark.measure(e.o),e.mark.start(e.o))},this.Je=function(){if(e.mark){if(e.et-=y.deltaTime,e.et<=0&&!e.tt)return e.tt=!0,e.Da(),e.nt(),void e.mark.stop(e.o);e.De-=y.deltaTime,e.De>0||(e.De=e.at,e.nt(),e.mark.stop(e.o),e.$e())}},this.nt=function(){var t,n;if(e.mark){var a=e.xa(),r=e.La(),i=e.Fa(),s=e.Ta();e.rt=Math.min(null!=(t=e.rt)?t:a,a),e.it=Math.max(null!=(n=e.it)?n:0,a),e.mark.putMetric(e.o,"FPS Metric",a),e.mark.putAttr(e.o,"Page Title",document.title),e.mark.putAttr(e.o,"Device Render",i),e.mark.putAttr(e.o,"Draw Calls",r.toString()),e.mark.putAttr(e.o,"Texture Memory",s.toFixed(2)),e.mark.putAttr(e.o,"Min FPS",e.rt.toString()),e.mark.putAttr(e.o,"Max FPS",e.it.toString())}},this.xa=function(){return S.root&&Math.floor(S.root.fps)||0},this.La=function(){return S.root&&S.root.device.numDrawCalls||0},this.Fa=function(){return S.root&&S.root.device.renderer||"Unknown"},this.Ta=function(){return S.root&&S.root.device.memoryStatus.textureSize/1048576||0}}return R(o,[{key:"mark",get:function get(){return Bt.Enabled?wi:null}},{key:"init",value:function value(){var e=Bt.TrackingDuration,t=Bt.TrackingInterval;this.mark&&(this.et=null!=e?e:60,this.at=null!=t?t:10,this.De=this.at,this.tt=!1,this.l())}}]),o}();m._RF.pop(),m._RF.push({},"58248LBip1DBrMjK0UWw2rM","RemoteConfig",void 0);var Ht=Ludex.Events,Yt=codex.event,Ri=function(){function o(){var e=this;_(this,o),this.l=function(){Yt.on(Ht.REQUEST_HOT_RELOAD,e.Ia),Yt.on(Ht.REQUEST_UPDATE_CONFIG,e.Na)},this.Ia=function(){y.restart()},this.Na=function(t){if("Gameplay"===t.type){y.emit(L.GAMEPLAY_UPDATE_CONFIG,t.config);var n=t.id,a=t.type;Yt.emit(Ht.REMOTE_CONFIG_UPDATED,{id:n,type:a})}}}return R(o,[{key:"init",value:function value(){this.l()}}]),o}();m._RF.pop(),m._RF.push({},"c34a93D1BREiKms1T21AkQS","PluginsManager",void 0);var se=Ludex.Configs,Ci=se.Languages,Di=se.Leaderboards,xi=se.RemoteConfig,Li=se.FrameCapture,Fi=se.DailyRewards,Ti=se.AdaptivePerformance,Ca=se.Debugger,Ii=Ca.CanvasRecorder,Ni=Ca.Profiler,Vt=se.GameEngine,Pi=Vt.HybridFileCache,Mi=Vt.DynamicAssets,ki=Vt.DynamicAtlas,Oi=function(){function o(){_(this,o),this.Pa=function(){Pi.Enabled&&new mi().init()}}return R(o,[{key:"init",value:function value(){this.Pa()}},{key:"initLanguages",value:function value(){Ci.Enabled&&new yi().init()}},{key:"initLeaderboards",value:function value(){Di.Enabled&&new Si().init()}},{key:"initRemoteConfig",value:function value(){xi.Enabled&&new Ri().init()}},{key:"initDynamicAtlas",value:function value(){ki.OptimizeAtlas.Enabled&&T.instance.enabled&&new vr().init()}},{key:"initDynamicAssets",value:function value(){Mi.Enabled&&new lr().init()}},{key:"initCanvasRecorder",value:function value(){Ii.Enabled&&new tr().init()}},{key:"initPerformanceMonitor",value:function value(){Ni.Enabled&&new _i().init()}},{key:"initAdaptivePerformance",value:function value(){Ti.Enabled&&new er().init()}},{key:"initFrameCapture",value:function value(){Li.Enabled&&new ci().init()}},{key:"initDailyRewards",value:function value(){Fi.Enabled&&new ar().init()}}]),o}();m._RF.pop(),m._RF.push({},"ac8b03T+rFB061sXoEEsCUH","SceneManager",void 0);var Da=codex,ce=Da.event,xa=Da.monitorError,qt=Ludex,ue=qt.Events,Ui=qt.Configs.PerformanceMonitor,La=qt.Utils,Gi=La.Mark,Kt=La.Function,zi=GameSDK,Bi=function(){function o(){var t,t1,t2,e=this;_(this,o),this.o="Load Scene",this.ot={},this.st=!1,this.ct=null,this.ce=Kt.mutex(),this.l=function(){ce.catchUp(ue.MARK_IS_TEST_SCENE,e.Ma),ce.on(ue.SWITCH_SCENE,e.ka),ce.on(ue.PRELOAD_SCENE,e.Oa)},this.Ua=function(t){var n=S.getScene(),a=e.Ga();return a?a===(null==n?void 0:n.name)?null:a:null!=n&&n.isValid?t===ve.DASHBOARD_SCENE?ve.GAME_SCENE:t===n.name?null:t:t},this.ka=(t=p(function(n){var a,i;return _ts_generator(this,function(_state){return a=n.sceneName,n.sceneData,(i=e.Ua(a))&&(ee.isSceneLoaded(i)||Ye.showLoadingFullScreen(i),e.za(l(l({},n),{},{sceneName:i}))),[2]})}),function(n){return t.apply(this,arguments)}),this.za=(t1=p(function(n){var a,r,i,s,c,d;return _ts_generator(this,function(_state){switch(_state.label){case 0:return a=n.sceneName,r=n.sceneData,[4,e.ce.use(a)];case 1:i=_state.sent(),_state.label=2;case 2:return _state.trys.push([2,5,6,7]),e.ut("start",n),[4,e.lt(a,e.dt)];case 3:return s=_state.sent(),[4,e.Ba(s)];case 4:return c=_state.sent(),e.Ha(c,null!=r?r:{}),ee.markIsSceneLoaded(a),ce.emit(ue.SCENE_LOADED,{sceneName:a}),e.Ya(),e.me(),e.Va(a,r),[3,7];case 5:return d=_state.sent(),Kt.toError(d),e.me(!1),[3,7];case 6:return i.release(),[7];case 7:return[2]}})}),function(n){return t1.apply(this,arguments)}),this.Oa=(t2=p(function(n){var a,r,s;return _ts_generator(this,function(_state){switch(_state.label){case 0:if((a=n.sceneName)===ve.DASHBOARD_SCENE)return[3,5];return[4,e.ce.use(a)];case 1:r=_state.sent(),_state.label=2;case 2:return _state.trys.push([2,4,,5]),e.ut("preload",n),[4,e.lt(a,e.dt)];case 3:return _state.sent(),ee.markIsSceneLoaded(a),ce.emit(ue.SCENE_LOADED,{sceneName:a,isPreload:!0}),e.me(),r.release(),[3,5];case 4:return s=_state.sent(),Kt.toError(s),e.me(!1),r.release(),[3,5];case 5:return[2]}})}),function(n){return t2.apply(this,arguments)}),this.lt=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new Promise(function(a,r){var i=Ie.main;i?i.loadScene(t,null!=n?n:null,function(s,c){s?r(s):a(c)}):r(Error("Main bundle not found"))})},this.Ba=function(t){return new Promise(function(n,a){S.runScene(t,void 0,function(r,i){if(r)return a(r);if(!i)throw Error("Scene not found");n(i)})})},this.ut=function(t,n){if(e.mark){var a=n.sceneName;e.mark.measure(e.o),e.mark.putAttr(e.o,"Cancel","false"),e.mark.putAttr(e.o,"Success","false"),e.mark.putMetric(e.o,a),e.mark.start(e.o)}},this.me=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e.mark&&(e.mark.rmAttr(e.o,"File"),e.mark.putAttr(e.o,"Success",t?"true":"false"),e.mark.stop(e.o))},this.dt=function(t,n,a){e.mark&&e.mark.putAttr(e.o,"Last File","".concat(a.id," (").concat(a.ext,")"));var i=Math.floor(t/n*70+30);zi.setLoadingProgress(i)},this.Ya=function(){e.st||(ce.clear(ue.MARK_IS_TEST_SCENE),e.st=!0)},this.Va=function(t,n){var a;Ye.hideLoadingFullScreen(t),Ve.switchSceneTracking(),null==xa||xa.addMetadata({currentScene:t}),null==(a=e.ct)||a.call(e,{sceneName:t,sceneData:n}),ce.emit(ue.SCENE_LAUNCHED,{sceneName:t}),S.once(k.EVENT_AFTER_RENDER,function(){ce.emit(ue.SCENE_RENDERED,{sceneName:t})})},this.Ga=function(){var t;return null!=(t=Object.keys(e.ot)[0])?t:null},this.Ma=function(t){var n=t.sceneName;e.ot[n]=!0},this.onSwitchScene=function(t){e.ct=t},this.Ha=function(t,n){if(n&&("data"in t||t.scene.attr({data:{}}),"data"in t)){var a=t.data||{};t.scene.attr({data:l(l({},a),n)})}}}return R(o,[{key:"init",value:function value(){this.l()}},{key:"mark",get:function get(){return Ui.LoadResources?Gi:null}}]),o}();m._RF.pop(),m._RF.push({},"617b2SRAL5CyL75C998xBnx","ScreenManager",void 0);var Fa=Ludex,j=Fa.Events,Xt=Fa.Utils,Hi=Xt.Object,Ta=Xt.Valid,Yi=Xt.Time,Ia=codex,Z=Ia.event,at=Ia.monitorError,Vi=function(){function o(){var t,t1,t2,t3,t4,e=this;_(this,o),this.r={},this.Z={},this.qa=function(){Z.on(j.OPEN_SCREEN,e.Ka),Z.on(j.CLOSE_SCREEN,e.Xa),Z.on(j.PRELOAD_SCREEN,e.Wa),Z.on(j.PRELOAD_SCREENS,e.Qa),Z.on(j.SWITCH_SCENE,e.xe),y.on("DEBUG_REQUEST_SCREEN_STATES",e.ja)},this.ja=function(){var t=e.r;y.emit("DEBUG_SCREEN_STATES",t)},this.Ka=function(t){e.openScreen(t.screenName,t.screenData)},this.Xa=function(t){e.closeScreen(t.screenName,!0)},this.Wa=function(t){var n=t.screenName;e.ht([n]);var a=e.r[n];(null==a?void 0:a.state)==="queued"&&e.Le(a)},this.Qa=function(){var t=S.getScene();e.Za(t)&&(e.Ja(t),e.$a())},this.xe=function(){e.er(),e.Z={}},this.er=function(){for(var t in e.r){var n=e.r[t];void 0!==n&&(e.r[t]=e.tr(n))}},this.tr=function(t){return e.ae(t)?(t.screen.node.removeFromParent(),t.screen.node.destroy(),{state:"prefab",order:t.order,name:t.name,prefab:t.prefab,useCount:t.useCount}):e.pe(t)?l({},t):{state:"queued",order:t.order,name:t.name}},this.Za=function(t){return!!t},this.Ja=function(t){var n=e.ve();if(null!=n&&n.enabled){var a,r=n.screens,i=x(r);try{for(i.s();!(a=i.n()).done;){var s=a.value,c=lt[s.key];if(c){var u=e.r[c];e.r[c]=u?l(l({},u),{},{order:s.depth}):{state:"queued",order:s.depth,name:c}}}}catch(v){i.e(v)}finally{i.f()}var d=t.getComponentsInChildren("BaseScreen");Ta.isEmpty(d)||(d.map(function(v){return null==v?void 0:v.node.name}).join(", "),e.nr(d))}},this.ve=function(){var t,n=S.getScene();return null!=(t=null==n?void 0:n.getComponentInChildren("Screens"))?t:null},this.nr=function(t){for(var n=0;n<t.length;n++){var a,r=t[n];if(r){var i=r.node.name;if(e.ge(i)){var s=e.r[i],c=null!=(a=null==s?void 0:s.order)?a:0;e.r[i]={state:"ready",order:c,screen:r,prefab:r.node,name:i,useCount:0}}}}e.Fe()},this.ge=function(t){return Ta.isString(t)&&Hi.vals(lt).includes(t)},this.ht=function(t){var n=e.ve();if(null!=n&&n.isValid){var a,r=x(t);try{for(r.s();!(a=r.n()).done;){var i=a.value;e.ge(i)&&void 0===e.r[i]&&(e.r[i]={state:"queued",order:0,name:i})}}catch(s){r.e(s)}finally{r.f()}}},this.Le=(t=p(function(n){var a;return _ts_generator(this,function(_state){switch(_state.label){case 0:return _state.trys.push([0,2,,3]),e.r[n.name]=l(l({},n),{},{state:"loading"}),Z.emit(j.LOADING_SCREEN,{screenName:n.name}),[4,ut.loadPrefabAsync("screens/".concat(n.name))];case 1:if(null===(a=_state.sent()))throw Error("ScreenManager.loadScreen: Failed to load prefab: ".concat(n.name));return e.r[n.name]=l(l({},n),{},{state:"prefab",prefab:a,useCount:0}),Z.emit(j.SCREEN_LOADED,{screenName:n.name}),e.ar(n.name),[3,3];case 2:return _state.sent(),e.r[n.name]={state:"queued",order:n.order,name:n.name},[3,3];case 3:return[2]}})}),function(n){return t.apply(this,arguments)}),this.$a=function(){var t=e.ve();if(null!=t&&t.isValid&&null!=t&&t.autoPreload){var n,a=Object.values(e.r).sort(function(s,c){return s.order-c.order}),r=x(a);try{for(r.s();!(n=r.n()).done;){var i=n.value;"queued"===i.state&&e.Le(i)}}catch(s){r.e(s)}finally{r.f()}}},this.rr=(t1=p(function(n){var a,r,i;return _ts_generator(this,function(_state){if(null==(a=e.ve())||!a.isValid)throw Error("ScreenManager.getScreen: Invalid screen holder");if(e.ae(n))return[2,n.screen];if(!e.pe(n))throw Error("ScreenManager.getScreen: Invalid state ".concat(n.state," for ").concat(n.name));if(!_instanceof(n.prefab,yn))throw Error("ScreenManager.getScreen: Invalid prefab ".concat(n.name));if((r=En(n.prefab)).name=n.name,!(i=r.getComponent("BaseScreen")))throw Error("ScreenManager.getScreen: Invalid screen ".concat(n.name));return[2,(a.node.addChild(r),r.active=!1,e.r[n.name]=l(l({},n),{},{state:"ready",screen:i}),e.Fe(),i)]})}),function(n){return t1.apply(this,arguments)}),this.Fe=function(){var t=[];for(var n in e.r){var a=e.r[n];e.ae(a)&&a.screen.isValid&&t.push(a)}t.sort(function(c,u){return c.order-u.order});for(var r=0;r<t.length;r++){var i,s=t[r];null!=s&&null!=(i=s.screen)&&i.isValid&&s.screen.node.setSiblingIndex(r)}},this.openScreen=(t2=p(function(n,a){var r,i;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(!e.ge(n)||void 0===(r=e.ir(n)))return[3,7];if(e.pe(r))return[3,2];return"queued"===r.state&&e.Le(r),[4,e.or(n,a)];case 1:return[2,_state.sent()];case 2:return _state.trys.push([2,5,6,7]),dt.setBlockInput(!0),[4,e.rr(r)];case 3:if(null==(i=_state.sent())||!i.isValid)throw Error("ScreenManager.performScreenOpen: Invalid screen ".concat(n));return e.sr(n),[4,e.cr(i,n,a)];case 4:case 5:return _state.sent(),[3,7];case 6:return dt.setBlockInput(!1),[7];case 7:return[2]}})}),function(n,a){return t2.apply(this,arguments)}),this.or=function(t,n){var a,r=null!=(a=e.Z[t])?a:[];return new Promise(function(i){var c,s=(c=p(function(){return _ts_generator(this,function(_state){switch(_state.label){case 0:return[4,e.openScreen(t,n)];case 1:return _state.sent(),i(),[2]}})}),function(){return c.apply(this,arguments)});e.Z[t]=[].concat($(r),[s])})},this.sr=function(t){var n=e.r[t];e.pe(n)&&(e.r[t]=l(l({},n),{},{useCount:n.useCount+1}))},this.cr=(t3=p(function(n,a,r){var i,s;return _ts_generator(this,function(_state){switch(_state.label){case 0:return i={screenName:a,screenData:r},Z.emit(j.OPENING_SCREEN,i),e.updateScreenState(a,"opening",{startTime:Date.now()}),[4,Yi.sleepAsync(0)];case 1:return _state.sent(),(null==(s=e.r[a])?void 0:s.state)==="opening"&&(e.updateScreenState(a,"ready"),n.node.active=!0,n.open(r),e.ft(a),e.Fe()),[2]}})}),function(n,a,r){return t3.apply(this,arguments)}),this.closeScreen=(t4=p(function(n){var a,r,i,_arguments=arguments;return _ts_generator(this,function(_state){if(a=_arguments.length>1&&void 0!==_arguments[1]&&_arguments[1],e.ge(n)&&void 0!==(r=e.r[n])){if("opening"===r.state){if(i=r.startTime,Date.now()-i<100)return[2,void e.updateScreenState(n,"prefab")];e.updateScreenState(n,"closing")}else if(!e.ur(r)&&"closing"!==r.state)return[2,void delete e.Z[n]];try{if(!e.ae(r)||!r.screen.isValid)return[2];r.screen.node.active&&(Z.emit(j.CLOSING_SCREEN,{screenName:n}),r.screen.close()),e.updateScreenState(n,"ready"),a&&e.ft(n,!1)}catch(unused){}}return[2]})}),function(n){return t4.apply(this,arguments)}),this.ft=function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Ve.trackCurrentPage(t,n),n?null==at||at.addMetadata({currentScreen:t}):null==at||at.removeMetadata("currentScreen")},this.closeAllScreens=function(){for(var t in e.r)e.closeScreen(t,!1)},this.ir=function(t){var n=e.r[t];return void 0===n?(e.ht([t]),e.r[t]):n},this.ar=function(t){var n,a,r=null!=(n=e.Z[t])?n:[],i=x(r);try{for(i.s();!(a=i.n()).done;)(0,a.value)()}catch(s){i.e(s)}finally{i.f()}delete e.Z[t]},this.ae=function(t){return!!t&&("ready"===t.state||"opening"===t.state||"closing"===t.state)},this.pe=function(t){return!!t&&("prefab"===t.state||e.ae(t))},this.ur=function(t){return(null==t?void 0:t.state)==="ready"}}return R(o,[{key:"init",value:function value(){this.qa()}},{key:"updateScreenState",value:function value(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=this.r[e];a&&(this.r[e]=l(l(l({},a),n),{},{state:t}))}}]),o}();m._RF.pop(),m._RF.push({},"9d892ZsSyxHSITF2VHJ1zpy","LudosSystem",void 0);var Wt,rt=Ludex,Ge=rt.Configs,qi=Ge.Core,Ki=Ge.Ads,Xi=Ge.Match,Wi=Ge.Player,Qi=Ge.GameEngine.HybridFileCache,P=rt.Events,Na=rt.Plugins.Analytics,le=(void 0===Na?{}:Na).Events,Pa=rt.Utils,B=Pa.Device,ji=Pa.Time,it=codex,Ma=it.context,M=it.event,ot=it.analytics,st=it.monitorError;new(R(function o(){var e=this;_(this,o),this.mt=null,this.Te=null,this.re=null,this.lr=function(){M.catchUp(P.ANALYTICS_READY,function(){le&&ot.event(le.ENGINE_READY)})},this.dr=function(){e.pt=new Bi,e.hr=new Vi,e.fr=new Ha,e.mr=new Wa,e.E=new Oi,Ki.Enabled&&(e.mt=new za),Xi.Enabled&&(e.Te=new ja),Wi.Enabled&&(e.re=new Ja)},this.pr=function(){var t,n,a;e.pt.init(),e.hr.init(),e.fr.init(),e.mr.init(),e.E.init(),null==(t=e.mt)||t.init(),null==(n=e.Te)||n.init(),null==(a=e.re)||a.init()},this.l=function(){M.catchUp(P.CORE_BOOTING,e.vr),M.catchUp(P.CORE_STARTING,e.gr),M.catchUp(P.CORE_READY,e.yr),V.listenLayoutChanges(),e.pt.onSwitchScene(e.xe)},this.vr=function(){y.inited?e.vt():y.once(mt.EVENT_GAME_INITED,e.vt)},this.vt=function(){M.emit(P.REQUEST_CORE_START)},this.gr=function(){var t,n;null==(t=e.re)||t.setupDefaultGameData(),null==(n=e.Te)||n.setupDefaultMatchData()},this.yr=function(){var t;Qi.Enabled||M.emit(P.BUNDLE_READY),M.catchUp(P.BUNDLE_READY,e.Er),null==(t=e.re)||t.syncPlatformPlayerData(),le&&ot.event(le.LOAD_START),M.catchUp(P.BUNDLE_READY,e.Sr)},this.Sr=function(){M.catchUp(P.SCENE_LOADED,e.wr),M.catchUp(P.SCENE_LAUNCHED,e.Ar),e.br()},this.Ar=p(function(){return _ts_generator(this,function(_state){switch(_state.label){case 0:if(!qi.StartSDKAfterLoadGame)return[3,2];return[4,M.waitTo(P.SCENE_LOADED)];case 1:_state.sent(),_state.label=2;case 2:return[4,GameSDK.extra.waitSDKInitiatedAsync()];case 3:if(_state.sent(),!y.isPaused())return[3,5];return[4,e._r()];case 4:_state.sent(),_state.label=5;case 5:return e.Rr(),[2]}})}),this._r=p(function(){return _ts_generator(this,function(_state){return[2,new Promise(function(t){y.once(mt.EVENT_RESUME,t)})]})}),this.br=function(){GameSDK.isGameSDK("Playable")?ee.switchScene(ve.PLAYABLE_SCENE):ee.switchScene(ve.BOOT_SCENE)},this.wr=function(){GameSDK.isGameSDK("Playable")||("solo"===Ma.getSessionContextType()?ee.preloadDashboardScene():ee.preloadGameScene())},this.Rr=p(function(){return _ts_generator(this,function(_state){switch(_state.label){case 0:return le&&ot.event(le.LOAD_COMPLETE),M.catchUp(P.PLAYER_INFO_LOADED,e.Cr),[4,M.waitTo(P.SCENE_RENDERED,1e3).catch(function(){})];case 1:return _state.sent(),[4,ji.sleepAsync(100)];case 2:return _state.sent(),[4,e.gt()];case 3:return _state.sent(),[2]}})}),this.xe=function(){Ye.preloadScreens()},this.gt=p(function(){var t,n,_arguments=arguments;return _ts_generator(this,function(_state){switch(_state.label){case 0:t=_arguments.length>0&&void 0!==_arguments[0]?_arguments[0]:0,_state.label=1;case 1:return _state.trys.push([1,3,,4]),[4,GameSDK.startGameAsync()];case 2:return _state.sent(),[3,4];case 3:return n=_state.sent(),t<=3?setTimeout(function(){e.gt(t+1)},1e3):null==st||st.sendException(_instanceof(n,Error)?n:Error(JSON.stringify(n))),[3,4];case 4:return[2]}})}),this.Cr=p(function(){var t,n;return _ts_generator(this,function(_state){switch(_state.label){case 0:le&&ot.event(le.APP_READY),_state.label=1;case 1:return _state.trys.push([1,3,4,5]),null==(t=e.re)||t.requestConnectedPlayers(),rn.applyCustomFlows(),[4,Ma.processContextData()];case 2:return _state.sent(),[3,5];case 3:return _instanceof(n=_state.sent(),Error)&&(null==st||st.sendException(n)),[3,5];case 4:return M.emit(P.GAME_READY),e.yt("begin"),window.addEventListener("beforeunload",function(){e.yt("end")}),[7];case 5:return[2]}})}),this.Er=function(){e.E.initLanguages(),e.E.initFrameCapture(),e.E.initDailyRewards(),e.E.initLeaderboards(),e.E.initDynamicAtlas(),e.E.initDynamicAssets(),e.E.initCanvasRecorder(),e.E.initPerformanceMonitor(),e.E.initAdaptivePerformance()},this.Dr=function(t){try{var n=B.isES5(),a=B.heapMemory(),r=B.pixelRatio(),i=B.audioState(),s=B.orientation(),c=B.gpuRenderer(),u=B.isSupportWebp();return{log_type:t,is_es5:n,pixel_ratio:r,sdk_platform:GameSDK.getPlatform(),screen_orientation:s,audio_state:i,heap_memory:a,support_webp:u,gpu_renderer:c,webgl_version:B.webglVersion(),max_texture_size:B.maxTextureSize(),hardware_concurrency:B.hardwareConcurrency()}}catch(unused){return null}},this.yt=function(t){var n=e.Dr(t);n&&Ve.trackDeviceInfo(n)},this.lr(),this.dr(),this.pr(),this.l(),window.__sdkLoad.ensure(10)})),m._RF.pop(),m._RF.push({},"c7df3pBHqRChZTjXMfWIy6H","Optimized2DPipeline",void 0);var Zi=pt.ccclass,Ji=pt.executeInEditMode,ka="default",eo=W.SceneFlags.UI|W.SceneFlags.BLEND|W.SceneFlags.OPAQUE|W.SceneFlags.DRAW_INSTANCING,to=function(){function o(){var e=this;_(this,o),this.A=new Q.Color(0,0,0,1),this.ie=new Q.Viewport,this.xr=new W.LightInfo,this.Lr=function(t){return!(null==t||!t.scene||null==t||!t.window)},this.Fr=function(t,n,a){var r=t.viewport;e.ie.left=r.x*n,e.ie.top=r.y*a,e.ie.width=r.z*n,e.ie.height=r.w*a},this.Tr=function(t){var n=t.clearColor;e.A.x=n.x,e.A.y=n.y,e.A.z=n.z,e.A.w=n.w}}return R(o,[{key:"setup",value:function value(e,t){for(var n=0;n<e.length;n++){var a=e[n];if(this.Lr(a)){var r=a.window,i=Math.max(Math.floor(r.width),1),s=Math.max(Math.floor(r.height),1),c="Color".concat(r.renderWindowId);t.addRenderWindow(c,Q.Format.RGBA8,i,s,r),this.Fr(a,i,s),this.Tr(a);var u=t.addRenderPass(i,s,ka);u.setViewport(this.ie);var d=a.clearFlag&Q.ClearFlagBit.COLOR?Q.LoadOp.CLEAR:Q.LoadOp.LOAD;a.clearFlag&Q.ClearFlagBit.COLOR&&(this.A.x=a.clearColor.x,this.A.y=a.clearColor.y,this.A.z=a.clearColor.z,this.A.w=a.clearColor.w),u.addRenderTarget(c,d,Q.StoreOp.STORE,this.A),u.addQueue(W.QueueHint.BLEND,ka).addSceneOfCamera(a,this.xr,eo)}}}}]),o}();if(W){var no=new to;W.setCustomPipeline("Optimized2DPipeline",no)}Zi("Optimized2DPipeline")(Wt=Ji(Wt=function(o){on(t,o);var e=sn(t);function t(){return _(this,t),e.apply(this,arguments)}return R(t,[{key:"start",value:function value(){}}]),t}(Sn))||Wt),m._RF.pop(),m._RF.push({},"a3a11eRcsNI5aahAZL2xA8X","ScreenEntry",void 0),m._RF.pop()}}});System.register("virtual:///prerequisite-imports/systems",["chunks:///systems.js"],function(p,J){return{setters:[function(_){var L={};for(var V in _)"default"!==V&&"__esModule"!==V&&(L[V]=_[V]);p(L)}],execute:function execute(){}}});