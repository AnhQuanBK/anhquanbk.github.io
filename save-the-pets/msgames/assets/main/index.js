System.register("chunks:///main.js",["./rollupPluginModLoBabelHelpers-e4e8a5d4.js","cc","./Screens-a5ee81b3.js"],(function(){var e,t,n,i,a,o,r,s,l,u,c,h,d,p,v,y,f,m,g,b,S,C,k,w,E,T,A,R,B,P,_,O,L,D,I,N,G,F,M,z,x,U,H,j,V,W,K,q,Y,J,X,Z,Q,$,ee,te,ne,ie,ae,oe,re,se,le,ue,ce,he,de,pe,ve,ye,fe,me,ge,be,Se,Ce,ke,we,Ee,Te,Ae,Re,Be,Pe,_e,Oe,Le,De,Ie,Ne,Ge,Fe,Me,ze,xe,Ue,He,je,Ve,We,Ke,qe,Ye,Je,Xe,Ze,Qe;return{setters:[function(v){e=v._,t=v.a,n=v.b,i=v.c,a=v.d,o=v.e,r=v.f,s=v.g,l=v.h,u=v.i,c=v.j,h=v.k,d=v.l,p=v.m},function(e){v=e.cclegacy,y=e._decorator,f=e.Animation,m=e.CCString,g=e.CCInteger,b=e.Component,S=e.Sprite,C=e.game,k=e.Button,w=e.CCBoolean,E=e.EventTouch,T=e.Vec3,A=e.Input,R=e.Node,B=e.UIOpacity,P=e.Graphics,_=e.Color,O=e.Label,L=e.director,D=e.Director,I=e.sys,N=e.Font,G=e.Layers,F=e.ERigidBody2DType,M=e.RigidBody2D,z=e.sp,x=e.Vec2,U=e.Collider2D,H=e.Contact2DType,j=e.math,V=e.SpriteFrame,W=e.HingeJoint2D,K=e.RelativeJoint2D,q=e.UITransform,Y=e.BoxCollider2D,J=e.Prefab,X=e.instantiate,Z=e.CircleCollider2D,Q=e.resources,$=e.Mask,ee=e.PolygonCollider2D,te=e.NodePool,ne=e.tween,ie=e.ccenum,ae=e.CCFloat,oe=e.find,re=e.Tween,se=e.PhysicsSystem2D,le=e.ERaycast2DType,ue=e.Intersection2D,ce=e.JsonAsset,he=e.ProgressBar,de=e.EPhysics2DDrawFlags,pe=e.DistanceJoint2D,ve=e.repeat,ye=e.Enum,fe=e.lerp,me=e.approx,ge=e.EPSILON,be=e.RealCurve,Se=e.Gradient,Ce=e.bits,ke=e.random,we=e.randomRange,Ee=e.randomRangeInt,Te=e.pseudoRandom,Ae=e.Material,Re=e.toRadian,Be=e.ParticleSystem2D,Pe=e.View,_e=e.Canvas,Oe=e.Widget},function(e){Le=e.C,De=e.G,Ie=e.a,Ne=e.b,Ge=e.S,Fe=e.c,Me=e.A,ze=e.d,xe=e.e,Ue=e.f,He=e.g,je=e.h,Ve=e.i,We=e.j,Ke=e.k,qe=e.E,Ye=e.l,Je=e.m,Xe=e.n,Ze=e.M,Qe=e.o}],execute:function(){var $e,et,tt,nt,it,at,ot,rt,st;v._RF.push({},"60ac3vor0dMT5bXi8D3VSJN","BubbleAnimation",void 0);var lt,ut=y.ccclass,ct=y.property,ht=($e=ut("BubbleAnimation"),et=ct(f),tt=ct(m),nt=ct(g),$e((ot=e((at=function(e){t(l,e);var s=n(l);function l(){var e;i(this,l);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e=s.call.apply(s,[this].concat(n)),a(e,"animation",ot,o(e)),a(e,"clipName",rt,o(e)),a(e,"repeat",st,o(e)),e.currentRepeat=-1,e}return r(l,[{key:"__preload",value:function(){this.animation=this.getComponent(f),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){Le.lazyValidateProperties(this)}},{key:"play",value:function(){var e=this;this.animation&&(this.animation.clips.find((function(t){return(null==t?void 0:t.name)===e.clipName}))?(this.currentRepeat=-1,this.animation.play(this.clipName)):console.warn("BubbleAnimation: Animation component must have ".concat(this.clipName," clip")))}},{key:"onBubbleAnimationLoop",value:function(){this.animation&&-1!==this.repeat&&(this.currentRepeat++,this.currentRepeat>this.repeat&&this.animation.stop())}}]),l}(b)).prototype,"animation",[et],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rt=e(at.prototype,"clipName",[tt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"Bubble"}}),st=e(at.prototype,"repeat",[nt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),it=at))||it);v._RF.pop(),v._RF.push({},"ca427NpeqpC3bUoGTd9I/BM","Background",void 0);var dt,pt=y.ccclass,vt=Ie.Layout;pt("Background")(lt=function(e){t(o,e);var a=n(o);function o(){var e;i(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=a.call.apply(a,[this].concat(n))).handleSpriteTypeWhenLayoutChanged=function(t){t===vt.Landscape?e.setBackgroundType(S.Type.TILED):e.setBackgroundType(S.Type.SIMPLE)},e}return r(o,[{key:"__preload",value:function(){this.sprite=this.getComponent(S),this.validateRequiredComponents(),this.listenGameEvents()}},{key:"validateRequiredComponents",value:function(){Le.lazyValidateProperties(this)}},{key:"listenGameEvents",value:function(){C.on(De.LAYOUT_CHANGED,this.handleSpriteTypeWhenLayoutChanged)}},{key:"setBackgroundType",value:function(e){this.sprite&&(this.sprite.type=e)}}]),o}(b));v._RF.pop(),v._RF.push({},"7ddc4vU74pB/LdHrUupDA/G","BlockLines",void 0);var yt,ft,mt,gt,bt,St,Ct,kt,wt,Et,Tt,At,Rt,Bt,Pt,_t,Ot,Lt=y.ccclass,Dt=Ie.Layout;Lt("BlockLines")(dt=function(e){t(o,e);var a=n(o);function o(){var e;i(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=a.call.apply(a,[this].concat(n))).handleSpriteTypeWhenLayoutChanged=function(t){t===Dt.Landscape?e.setActiveBlockLines(!0):e.setActiveBlockLines(!1)},e}return r(o,[{key:"__preload",value:function(){this.componentSprites=this.getComponentsInChildren(S),this.validateRequiredComponents(),this.listenGameEvents(),this.handleBlockLinesOnStart()}},{key:"validateRequiredComponents",value:function(){Le.lazyValidateProperties(this)}},{key:"handleBlockLinesOnStart",value:function(){var e=this.getScreenRatio()>750/1366;this.setActiveBlockLines(e)}},{key:"listenGameEvents",value:function(){C.on(De.LAYOUT_CHANGED,this.handleSpriteTypeWhenLayoutChanged)}},{key:"setActiveBlockLines",value:function(e){var t=this;this.componentSprites&&this.componentSprites.forEach((function(n){n.node!==t.node&&(n.node.active=e)}))}},{key:"getScreenRatio",value:function(){return Ne.getScreenWidthCss()/Ne.getScreenHeightCss()}}]),o}(b));v._RF.pop(),v._RF.push({},"4b299Dv1kVGcqQmJC9yBPAV","ButtonReleased",void 0);var It,Nt,Gt,Ft,Mt=y.ccclass,zt=y.requireComponent,xt=y.property,Ut=y.disallowMultiple,Ht=y.executionOrder,jt=globalThis.game.analytics;yt=Mt("ButtonReleased"),ft=zt([f,k]),mt=Ht(120),gt=xt(m),bt=xt(m),St=xt(w),Ct=xt({visible:function(){return this.useSound},type:Ge}),kt=xt({tooltip:"Add a delay after click to prevent spamming (not apply for cancel click)"}),wt=xt({visible:function(){return this.disableSpamClick},tooltip:"Delay time in seconds"}),yt(Et=Ut(Et=ft(Et=mt((At=e((Tt=function(e){t(u,e);var l=n(u);function u(){var e;i(this,u);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e=l.call.apply(l,[this].concat(n)),a(e,"downClipName",At,o(e)),a(e,"upClipName",Rt,o(e)),a(e,"useSound",Bt,o(e)),a(e,"soundKey",Pt,o(e)),a(e,"disableSpamClick",_t,o(e)),a(e,"disableSpamDelay",Ot,o(e)),e.currentClickBoundingBox=null,e.hasDown=!1,e.hasUp=!1,e.onTouchStart=function(t){if(e.buttonComponent.interactable&&!e.hasDown&&(e.currentClickBoundingBox=Ne.getBoundingBoxToWorld(e.node),e.hasDown=!0,e.runAnimation(e.downClipName),e.useSound)){var n=Fe[e.soundKey];if(!n)return;Me.playSound(n)}},e.onTouchEnd=function(t){e.buttonComponent.interactable&&e.hasDown&&(e.hasUp||e.handleUp(t))},e.onTouchCancel=function(t){var n,i;if(e.buttonComponent.interactable&&e.hasDown&&!e.hasUp){var a=t.getUILocation(),o=null!==(n=null===(i=e.currentClickBoundingBox)||void 0===i?void 0:i.contains(a))&&void 0!==n&&n;t instanceof E&&o?e.handleUp(t):(e.hasUp=!0,e.runAnimation(e.upClipName),e.animationComponent.once(f.EventType.FINISHED,(function(){e.handleResetButtonState()})))}},e.handleResetButtonState=function(){var t;if(e.hasDown=!1,e.hasUp=!1,e.buttonComponent){var n=e.buttonComponent.node.scale.x,i=e.buttonComponent.node.scale.z;null===(t=e.buttonComponent)||void 0===t||t.node.setScale(new T(n,1,i))}},e}return r(u,[{key:"__preload",value:function(){this.buttonComponent=this.getComponent(k),this.animationComponent=this.getComponent(f),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){Le.lazyValidateProperties(this)}},{key:"onEnable",value:function(){this.animationComponent.clips.length<2?console.warn("ButtonAnimAddition: Animation component must have 2 clips in ".concat(this.node.name)):(this.node.off(A.EventType.TOUCH_END,this.buttonComponent._onTouchEnded,this.buttonComponent),this.node.on(R.EventType.TOUCH_START,this.onTouchStart),this.node.on(R.EventType.TOUCH_END,this.onTouchEnd),this.node.on(R.EventType.TOUCH_CANCEL,this.onTouchCancel))}},{key:"onDisable",value:function(){this.node.off(R.EventType.TOUCH_START,this.onTouchStart),this.node.off(R.EventType.TOUCH_END,this.onTouchEnd),this.node.off(R.EventType.TOUCH_CANCEL,this.onTouchCancel),this.unschedule(this.handleResetButtonState),this.handleResetButtonState()}},{key:"handleUp",value:function(e){var t=this;this.hasUp=!0,this.runAnimation(this.upClipName),this.animationComponent.once(f.EventType.FINISHED,(function(){if(t.disableSpamClick?t.scheduleOnce(t.handleResetButtonState,t.disableSpamDelay):t.handleResetButtonState(),!t.buttonComponent||t.buttonComponent.interactable){jt.event(GameCore.Plugins.Analytics.Events.BUTTON_CLICK,{button_name:t.node.name,screen_name:ze.getCurrentPage()});var n=t.buttonComponent.clickEvents;if(n){var i,a=s(n);try{for(a.s();!(i=a.n()).done;){var o=i.value;o.emit([e,o.customEventData])}}catch(e){a.e(e)}finally{a.f()}}}}))}},{key:"runAnimation",value:function(e){if(!this.isAnimationExist(e))throw new Error("".concat(this.node.name,": Animation component must have ").concat(e," clip"));this.animationComponent.play(e)}},{key:"isAnimationExist",value:function(e){return this.animationComponent.clips.some((function(t){return!(!t||t.name!==e)}))}}]),u}(b)).prototype,"downClipName",[gt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"ButtonDown"}}),Rt=e(Tt.prototype,"upClipName",[bt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"ButtonUp"}}),Bt=e(Tt.prototype,"useSound",[St],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Pt=e(Tt.prototype,"soundKey",[Ct],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Ge[xe.BUTTON_CLICK]}}),_t=e(Tt.prototype,"disableSpamClick",[kt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ot=e(Tt.prototype,"disableSpamDelay",[wt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),Et=Tt))||Et)||Et)||Et);v._RF.pop(),v._RF.push({},"0e570DdAIZPKY6DNtNerFmX","OpacityToggler",void 0);var Vt,Wt,Kt,qt=y.ccclass,Yt=y.requireComponent,Jt=y.property,Xt=qt("OpacityToggler")(It=Yt([B])((Gt=e((Nt=function(e){t(l,e);var s=n(l);function l(){var e;i(this,l);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e=s.call.apply(s,[this].concat(n)),a(e,"activeValue",Gt,o(e)),a(e,"inActiveValue",Ft,o(e)),e}return r(l,[{key:"__preload",value:function(){this.opacityComponent=this.getComponent(B),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){Le.lazyValidateProperties(this)}},{key:"changeState",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.opacityComponent.opacity=e?this.activeValue:this.inActiveValue}}]),l}(b)).prototype,"activeValue",[Jt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 255}}),Ft=e(Nt.prototype,"inActiveValue",[Jt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 128}}),It=Nt))||It)||It;v._RF.pop(),v._RF.push({},"7ef37Q3PZpKYaeik5JzGwNy","DebugResolution",void 0);var Zt=y.ccclass,Qt=y.property,$t=y.requireComponent,en=y.disallowMultiple,tn=y.executeInEditMode,nn=Ie.DesignSize,an=nn.Portrait,on=nn.Landscape;Zt("DebugResolution")(Vt=en(Vt=$t([P])(Vt=tn(!0)(((Kt=function(e){t(o,e);var a=n(o);function o(){var e;i(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=a.call.apply(a,[this].concat(n))).handleLayoutChange=function(){var t;null===(t=e.graphics)||void 0===t||t.clear(),e.start()},e}return r(o,[{key:"drawPortrait",get:function(){return o._drawPortrait},set:function(e){e!==o._drawPortrait&&(e?this.drawPortraitResolution():this.graphics.clear(),o._drawPortrait=e,o._drawLandscape&&this.drawLandscapeResolution())}},{key:"drawLandscape",get:function(){return o._drawLandscape},set:function(e){e!==o._drawLandscape&&(e?this.drawLandscapeResolution():this.graphics.clear(),o._drawLandscape=e,o._drawPortrait&&this.drawPortraitResolution())}},{key:"__preload",value:function(){this.graphics=this.getComponent(P),this.validateRequiredComponents(),this.listenGameEvents()}},{key:"validateRequiredComponents",value:function(){Le.lazyValidateProperties(this)}},{key:"listenGameEvents",value:function(){C.on(De.LAYOUT_CHANGED,this.handleLayoutChange)}},{key:"start",value:function(){this.drawPortrait&&this.drawPortraitResolution(),this.drawLandscape&&this.drawLandscapeResolution()}},{key:"drawPortraitResolution",value:function(){var e=this.graphics;if(e){var t=an.WIDTH,n=an.HEIGHT,i=-t/2,a=-n/2;e.strokeColor=_.GREEN,e.rect(i,a,t,n),e.stroke()}}},{key:"drawLandscapeResolution",value:function(){var e=this.graphics;if(e){var t=on.WIDTH,n=on.HEIGHT,i=-t/2,a=-n/2;e.strokeColor=_.CYAN,e.rect(i,a,t,n),e.stroke()}}}]),o}(b))._drawPortrait=!0,Kt._drawLandscape=!0,e((Wt=Kt).prototype,"drawPortrait",[Qt],Object.getOwnPropertyDescriptor(Wt.prototype,"drawPortrait"),Wt.prototype),e(Wt.prototype,"drawLandscape",[Qt],Object.getOwnPropertyDescriptor(Wt.prototype,"drawLandscape"),Wt.prototype),Vt=Wt))||Vt)||Vt)||Vt);v._RF.pop(),v._RF.push({},"0405b+DQy1IALb/j8jx5Lpc","PerfCounter",void 0);var rn,sn,ln,un,cn,hn,dn,pn,vn,yn,fn,mn,gn,bn,Sn,Cn,kn,wn,En,Tn,An=function(){function e(){i(this,e),this.time=0,this._value=0,this.time=0,this._value=0}return r(e,[{key:"value",get:function(){return this._value}},{key:"start",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.time=e}},{key:"end",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this._value=e-this.time}}]),e}();v._RF.pop(),v._RF.push({},"0e2d6yn/BVObK1kyTJ5a09a","GameStats",void 0);var Rn,Bn,Pn,_n,On,Ln,Dn,In,Nn,Gn,Fn,Mn,zn,xn,Un=y.ccclass,Hn=y.executionOrder,jn=y.property,Vn=GameCore,Wn=Vn.Utils,Kn=Wn.Valid,qn=Wn.Array,Yn=Vn.Configs.Debugger.ListPlayerDevIds,Jn=globalThis.game.player,Xn=_.RED,Zn=_.BLACK,Qn=_.MAGENTA;rn=Un("GameStats"),sn=Hn(-1e3),ln=jn(O),un=jn(O),cn=jn(O),hn=jn(O),dn=jn(O),pn=jn(O),vn=jn(O),yn=jn(O),rn(fn=sn((gn=e((mn=function(e){t(l,e);var s=n(l);function l(){var e;i(this,l);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e=s.call.apply(s,[this].concat(n)),a(e,"fpsLabel",gn,o(e)),a(e,"drawCountLabel",bn,o(e)),a(e,"logicTimeLabel",Sn,o(e)),a(e,"physicTimeLabel",Cn,o(e)),a(e,"renderTimeLabel",kn,o(e)),a(e,"objectMemoryUsageLabel",wn,o(e)),a(e,"textureMemoryUsageLabel",En,o(e)),a(e,"devicePixelRatioLabel",Tn,o(e)),e.refreshInterval=.5,e.handleMouseDown=function(){e.bg.enabled=!e.bg.enabled},e.updateStats=function(){e.updateFps(),e.updateDrawCalls(),e.updateLogicTime(),e.updatePhysicTime(),e.updateRenderTime(),e.updateObjectMemoryUsage(),e.updateTextureMemoryUsage(),e.updateDevicePixelRatio()},e}return r(l,[{key:"__preload",value:function(){this.bg=this.getComponent(S),this.validateRequiredComponents(),this.listenInputEvents()}},{key:"validateRequiredComponents",value:function(){Le.lazyValidateProperties(this)}},{key:"listenInputEvents",value:function(){this.node.on(A.EventType.TOUCH_START,this.handleMouseDown)}},{key:"start",value:function(){this.bg.enabled=!1,this.node.active=!1,this.canDisplayStats()&&(this.node.active=!0,this.logicTimeCounter=new An,this.physicTimeCounter=new An,this.renderTimeCounter=new An,L.on(D.EVENT_BEFORE_UPDATE,this.beforeUpdate,this),L.on(D.EVENT_AFTER_UPDATE,this.afterUpdate,this),L.on(D.EVENT_BEFORE_PHYSICS,this.beforePhysics,this),L.on(D.EVENT_AFTER_PHYSICS,this.afterPhysics,this),L.on(D.EVENT_BEFORE_DRAW,this.beforeDraw,this),L.on(D.EVENT_AFTER_RENDER,this.afterRender,this),this.startUpdateStats())}},{key:"onDestroy",value:function(){this.canDisplayStats()&&(L.off(D.EVENT_BEFORE_UPDATE,this.beforeUpdate,this),L.off(D.EVENT_AFTER_UPDATE,this.afterUpdate,this),L.off(D.EVENT_BEFORE_PHYSICS,this.beforePhysics,this),L.off(D.EVENT_AFTER_PHYSICS,this.afterPhysics,this),L.off(D.EVENT_BEFORE_DRAW,this.beforeDraw,this),L.off(D.EVENT_AFTER_RENDER,this.afterRender,this))}},{key:"canDisplayStats",value:function(){return Kn.isDebugger()||qn.has(Yn,Jn.getPlayerId())}},{key:"startUpdateStats",value:function(){this.schedule(this.updateStats,this.refreshInterval)}},{key:"updateFps",value:function(){var e=this.getFps();this.updateFpsColor(e),this.fpsLabel.string="FPS: ".concat(e)}},{key:"updateFpsColor",value:function(e){this.fpsLabel.color=e<30?Xn:e<48?Qn:Zn}},{key:"updateDrawCalls",value:function(){var e=this.getDrawCalls();this.updateDrawCallsColor(e),this.drawCountLabel.string="Draw Calls: ".concat(e)}},{key:"updateDrawCallsColor",value:function(e){var t=I.os===I.OS.IOS,n=t?80:25,i=t?60:15;this.drawCountLabel.color=e>n?Xn:e>i?Qn:Zn}},{key:"updateLogicTime",value:function(){var e=this.getLogicTime();this.updateLogicTimeColor(e),this.logicTimeLabel.string="Logic Time: ".concat(e.toFixed(2),"ms")}},{key:"updateLogicTimeColor",value:function(e){this.logicTimeLabel.color=e>10?Xn:e>5?Qn:Zn}},{key:"updatePhysicTime",value:function(){var e=this.getPhysicTime();this.updatePhysicTimeColor(e),this.physicTimeLabel.string="Physic Time: ".concat(e.toFixed(2),"ms")}},{key:"updatePhysicTimeColor",value:function(e){this.physicTimeLabel.color=e>10?Xn:e>5?Qn:Zn}},{key:"updateRenderTime",value:function(){var e=this.getRenderTime();this.updateRenderTimeColor(e),this.renderTimeLabel.string="Render Time: ".concat(e.toFixed(2),"ms")}},{key:"updateRenderTimeColor",value:function(e){this.renderTimeLabel.color=e>10?Xn:e>5?Qn:Zn}},{key:"updateObjectMemoryUsage",value:function(){var e=this.getObjectMemoryUsage();this.updateObjectMemoryUsageColor(e),this.objectMemoryUsageLabel.string="Object Mem: ".concat(e.toFixed(2),"MB")}},{key:"updateObjectMemoryUsageColor",value:function(e){this.objectMemoryUsageLabel.color=e>40?Xn:e>25?Qn:Zn}},{key:"updateTextureMemoryUsage",value:function(){var e=this.getTextureMemoryUsage();this.updateTextureMemoryUsageColor(e),this.textureMemoryUsageLabel.string="Texture Mem: ".concat(e.toFixed(2),"MB")}},{key:"updateTextureMemoryUsageColor",value:function(e){this.textureMemoryUsageLabel.color=e>50?Xn:e>35?Qn:Zn}},{key:"updateDevicePixelRatio",value:function(){var e=this.getDevicePixelRatio();this.updateDevicePixelRatioColor(e),this.devicePixelRatioLabel.string="Device Pixel Ratio: ".concat(e)}},{key:"updateDevicePixelRatioColor",value:function(e){this.devicePixelRatioLabel.color=e>2?Xn:e<=1?Qn:Zn}},{key:"getFps",value:function(){if(!L.root)return 0;var e=L.root.fps;return Math.floor(e)||0}},{key:"getDrawCalls",value:function(){return L.root&&L.root.device.numDrawCalls||0}},{key:"getLogicTime",value:function(){return Math.floor(1e3*this.logicTimeCounter.value)/1e3||0}},{key:"getPhysicTime",value:function(){return Math.floor(1e3*this.physicTimeCounter.value)/1e3||0}},{key:"getRenderTime",value:function(){return Math.floor(1e3*this.renderTimeCounter.value)/1e3||0}},{key:"getObjectMemoryUsage",value:function(){return L.root&&L.root.device.memoryStatus.bufferSize/1048576||0}},{key:"getTextureMemoryUsage",value:function(){return L.root&&L.root.device.memoryStatus.textureSize/1048576||0}},{key:"getDevicePixelRatio",value:function(){return window.devicePixelRatio||0}},{key:"beforeUpdate",value:function(){var e=performance.now();this.logicTimeCounter.start(e)}},{key:"afterUpdate",value:function(){var e=performance.now();this.logicTimeCounter.end(e)}},{key:"beforePhysics",value:function(){var e=performance.now();this.physicTimeCounter.start(e)}},{key:"afterPhysics",value:function(){var e=performance.now();this.physicTimeCounter.end(e)}},{key:"beforeDraw",value:function(){var e=performance.now();this.renderTimeCounter.start(e)}},{key:"afterRender",value:function(){var e=performance.now();this.renderTimeCounter.end(e)}}]),l}(b)).prototype,"fpsLabel",[ln],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bn=e(mn.prototype,"drawCountLabel",[un],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Sn=e(mn.prototype,"logicTimeLabel",[cn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Cn=e(mn.prototype,"physicTimeLabel",[hn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),kn=e(mn.prototype,"renderTimeLabel",[dn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),wn=e(mn.prototype,"objectMemoryUsageLabel",[pn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),En=e(mn.prototype,"textureMemoryUsageLabel",[vn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Tn=e(mn.prototype,"devicePixelRatioLabel",[yn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fn=mn))||fn);v._RF.pop(),v._RF.push({},"aa4b0d0u0hLeqd3+/PQZ/QD","SwitchButton",void 0);var $n,ei,ti,ni,ii,ai,oi,ri,si,li,ui=y.ccclass,ci=y.property,hi=y.requireComponent,di=globalThis.game.analytics,pi=(Rn=ui("SwitchButton"),Bn=hi([k]),Pn=ci(w),_n=ci(R),On=ci(R),Ln=ci(w),Dn=ci({visible:function(){return this.useSound},type:Ge}),Rn(In=Bn((Gn=e((Nn=function(e){t(l,e);var s=n(l);function l(){var e;i(this,l);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e=s.call.apply(s,[this].concat(n)),a(e,"enable",Gn,o(e)),a(e,"nodeOn",Fn,o(e)),a(e,"nodeOff",Mn,o(e)),a(e,"useSound",zn,o(e)),a(e,"soundKey",xn,o(e)),e}return r(l,[{key:"__preload",value:function(){this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){Le.lazyValidateProperties(this)}},{key:"switch",value:function(){return!!this.node.active&&(di.event(GameCore.Plugins.Analytics.Events.BUTTON_CLICK,{button_name:this.node.name,enable:!this.enable}),this.useSound&&Me.playSound(Fe[this.soundKey]),this.updateStatus(!this.enable))}},{key:"setEnabled",value:function(e){this.node.active&&this.updateStatus(e)}},{key:"updateStatus",value:function(e){return this.enable=e,this.nodeOn.active=e,this.nodeOff.active=!e,e}}]),l}(b)).prototype,"enable",[Pn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Fn=e(Nn.prototype,"nodeOn",[_n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Mn=e(Nn.prototype,"nodeOff",[On],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),zn=e(Nn.prototype,"useSound",[Ln],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),xn=e(Nn.prototype,"soundKey",[Dn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Ge[xe.BUTTON_CLICK]}}),In=Nn))||In)||In);v._RF.pop(),v._RF.push({},"bce15LcVrxOfYMa9rbXN/qi","Localize",void 0);var vi,yi,fi,mi,gi,bi,Si,Ci,ki,wi,Ei,Ti,Ai,Ri,Bi,Pi,_i,Oi,Li,Di,Ii,Ni,Gi,Fi,Mi,zi,xi=y.ccclass,Ui=y.property,Hi=y.requireComponent,ji=y.executeInEditMode,Vi=y.disallowMultiple,Wi=globalThis.game.language;$n=xi("Localize"),ei=Hi(O),ti=ji(!0),ni=Ui({visible:!0}),ii=Ui({group:{name:"Fonts",id:"fonts",displayOrder:1},type:N}),ai=Ui({group:{name:"Fonts",id:"fonts",displayOrder:2},type:N}),$n(oi=Vi(oi=ei(oi=ti((e((ri=function(e){t(l,e);var s=n(l);function l(){var e;i(this,l);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e=s.call.apply(s,[this].concat(n)),a(e,"enFont",si,o(e)),a(e,"ruFont",li,o(e)),e.handleLanguageChanged=function(){e.updateTransToNode()},e}return r(l,[{key:"key",get:function(){return this._key},set:function(e){e&&(this._key=e,this.updateTransToNode())}},{key:"__preload",value:function(){this.label=this.getComponent(O),this.validateRequiredComponents(),this.updateTransToNode()}},{key:"validateRequiredComponents",value:function(){Le.lazyValidateProperties(this)}},{key:"start",value:function(){this.listenEvent()}},{key:"listenEvent",value:function(){C.on("update-language",this.handleLanguageChanged)}},{key:"updateTransToNode",value:function(){if(this.node.active&&this._key)try{var e=Wi.getText(this._key),t=this.getFontByLang();this.label.font=t,this.label.string=e,this.node.emit("update-trans",e)}catch(e){console.warn(e)}}},{key:"getFontByLang",value:function(){if(!this.enFont||!this.ruFont)throw new Error("Font is not found");switch(Wi.getCurrentLocale()){case"en":return this.enFont;case"ru":return this.ruFont;default:return this.enFont}}}]),l}(b)).prototype,"key",[ni],Object.getOwnPropertyDescriptor(ri.prototype,"key"),ri.prototype),si=e(ri.prototype,"enFont",[ii],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),li=e(ri.prototype,"ruFont",[ai],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),oi=ri))||oi)||oi)||oi);v._RF.pop(),v._RF.push({},"a2260jBMJFPCrn/Q4Vo4iB1","BatchNodes",void 0);var Ki,qi=y.ccclass,Yi=y.executionOrder,Ji=y.property,Xi=GameCore.Utils.Function,Zi="Batch By Name",Qi="Batch Label",$i="Batch Sprite";vi=qi("BatchNodes"),yi=Yi(99999),fi=Ji({group:{name:Zi}}),mi=Ji({type:[g],group:{name:Zi}}),gi=Ji({type:[m],group:{name:Zi}}),bi=Ji({group:{name:Qi}}),Si=Ji({group:{name:Qi}}),Ci=Ji({group:{name:Qi}}),ki=Ji({group:{name:$i}}),wi=Ji({group:{name:$i}}),Ei=Ji({readonly:!0}),Ti=Ji({readonly:!0}),Ai=Ji({readonly:!0}),vi(Ri=yi((Pi=e((Bi=function(e){t(c,e);var u=n(c);function c(){var e;i(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e=u.call.apply(u,[this].concat(n)),a(e,"batchByName",Pi,o(e)),a(e,"depthNames",_i,o(e)),a(e,"listName",Oi,o(e)),a(e,"batchLabel",Li,o(e)),a(e,"depthLabel",Di,o(e)),a(e,"typeLabel",Ii,o(e)),a(e,"batchSprite",Ni,o(e)),a(e,"depthSprite",Gi,o(e)),a(e,"batchAllNodes",Fi,o(e)),a(e,"batchDepth",Mi,o(e)),a(e,"checkOverlap",zi,o(e)),e.batchNode={},e.labelChildren=[],e.spriteChildren=[],e.allChildren=[],e.nameChildren=[],e.originalParents={},e.isInited=!1,e.handleNodeChange=Xi.throttle((function(){e.isInited&&(console.warn("handleNodeChange",e.node.name),e.setupBatchNodes(e.node))}),1e3),e.onAfterUpdate=function(){e.isInited&&e.hierarchyChildren()},e.onAfterRender=function(){e.isInited&&e.restoreOriginalChildren()},e}return r(c,[{key:"__preload",value:function(){this.enabled&&(L.on(D.EVENT_AFTER_UPDATE,this.onAfterUpdate),L.on(D.EVENT_AFTER_RENDER,this.onAfterRender))}},{key:"onDestroy",value:function(){L.off(D.EVENT_AFTER_UPDATE,this.onAfterUpdate),L.off(D.EVENT_AFTER_RENDER,this.onAfterRender)}},{key:"onLoad",value:function(){this.enabled&&(this.setupBatchNodes(this.node),this.isInited=!0)}},{key:"onEnable",value:function(){this.isInited||(L.on(D.EVENT_AFTER_UPDATE,this.onAfterUpdate),L.on(D.EVENT_AFTER_RENDER,this.onAfterRender),this.setupBatchNodes(this.node),this.isInited=!0)}},{key:"handleActiveChange",value:function(e){e.once(R.EventType.ACTIVE_IN_HIERARCHY_CHANGED,this.handleNodeChange)}},{key:"onDisable",value:function(){this.restoreOriginalChildren(),L.off(D.EVENT_AFTER_UPDATE,this.onAfterUpdate),L.off(D.EVENT_AFTER_RENDER,this.onAfterRender),this.isInited=!1}},{key:"setupBatchNodes",value:function(e){this.allChildren=[],this.nameChildren=[],this.labelChildren=[],this.spriteChildren=[],this.saveOriginalChildren(e),this.createGlobalNodes(e),this.createGlobalNameNodes(e),this.createGlobalLabelNode(e),this.createGlobalSpriteNode(e),this.sortGlobalNodes()}},{key:"sortGlobalNodes",value:function(){var e,t,n,i=this;null===(e=this.batchNode.node)||void 0===e||e.setSiblingIndex(0),null===(t=this.batchNode.label)||void 0===t||t.setSiblingIndex(this.depthLabel),null===(n=this.batchNode.sprite)||void 0===n||n.setSiblingIndex(this.depthSprite),this.listName.forEach((function(e,t){var n,a=i.depthNames[t];void 0!==a?null===(n=i.batchNode[e])||void 0===n||n.setSiblingIndex(a):console.warn("BatchNodes: depth is undefined",e,t,a)}))}},{key:"createGlobalNodes",value:function(e){if(this.batchAllNodes){var t=new R("GlobalBatchNode");t.active=!0,this.batchNode.node=t,e.addChild(t)}}},{key:"createGlobalNameNodes",value:function(e){if(this.batchByName){var t,n=s(this.listName);try{for(n.s();!(t=n.n()).done;){var i=t.value;if(!this.batchNode[i]){var a=new R(i);a.active=!0,this.batchNode[i]=a,e.addChild(a)}}}catch(e){n.e(e)}finally{n.f()}}}},{key:"createGlobalLabelNode",value:function(e){if(this.batchLabel){var t=new R("GlobalLabelNode");t.active=!0,this.batchNode.label=t,e.addChild(t)}}},{key:"createGlobalSpriteNode",value:function(e){if(this.batchSprite){var t=new R("GlobalSpriteNode");t.active=!0,this.batchNode.sprite=t,e.addChild(t)}}},{key:"saveOriginalParents",value:function(){var e,t=[].concat(l(this.labelChildren),l(this.spriteChildren)),n=this.nameChildren,i=s(t);try{for(i.s();!(e=i.n()).done;){var a=e.value;a.node.parent&&(this.handleActiveChange(a.node),this.originalParents[a.uuid]=a.node.parent)}}catch(e){i.e(e)}finally{i.f()}var o,r=s(n);try{for(r.s();!(o=r.n()).done;){var u=o.value;u.parent&&(this.handleActiveChange(u),this.originalParents[u.uuid]=u.parent)}}catch(e){r.e(e)}finally{r.f()}}},{key:"saveOriginalChildren",value:function(e){var t,n=e.children,i=s(n);try{for(i.s();!(t=i.n()).done;){var a=t.value;this.saveLabelChildren(a),this.saveSpriteChildren(a),this.saveNodeChildrenByName(a),this.saveNodeChildrenByType(a)}}catch(e){i.e(e)}finally{i.f()}this.saveOriginalParents()}},{key:"saveLabelChildren",value:function(e){var t;if(this.batchLabel){var n=e.getComponentsInChildren(O),i={none:O.CacheMode.NONE,char:O.CacheMode.CHAR,bitmap:O.CacheMode.BITMAP}[this.typeLabel];i&&(n=n.filter((function(e){return e.cacheMode===i}))),0!==n.length&&(t=this.labelChildren).push.apply(t,l(n))}}},{key:"saveSpriteChildren",value:function(e){var t;if(this.batchSprite){var n=e.getComponentsInChildren(S);0!==n.length&&(t=this.spriteChildren).push.apply(t,l(n))}}},{key:"saveNodeChildrenByName",value:function(e){if(this.batchByName){var t,n=s(e.children);try{for(n.s();!(t=n.n()).done;){var i=t.value;this.listName.includes(i.name)?this.nameChildren.push(i):this.saveNodeChildrenByName(i)}}catch(e){n.e(e)}finally{n.f()}}}},{key:"saveNodeChildrenByType",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(this.batchAllNodes){var i=e.getComponentsInChildren(b);if((t=this.allChildren).push.apply(t,l(i)),!(this.batchDepth<1||n>=this.batchDepth)){var a,o=s(this.allChildren);try{for(o.s();!(a=o.n()).done;){var r=a.value;this.saveNodeChildrenByType(r.node,this.batchDepth)}}catch(e){o.e(e)}finally{o.f()}}}}},{key:"hierarchyChildren",value:function(){var e,t=function(e,t){e.node.isValid&&e.node.activeInHierarchy&&t&&!e.node.isChildOf(t)&&(e.node.setParent(t,!0),e.node.layer=G.Enum.UI_2D)},n=["GlobalLabelNode","GlobalSpriteNode","GlobalBatchNode"],i=s(this.labelChildren);try{for(i.s();!(e=i.n()).done;){t(e.value,this.batchNode.label)}}catch(e){i.e(e)}finally{i.f()}var a,o=s(this.spriteChildren);try{for(o.s();!(a=o.n()).done;){t(a.value,this.batchNode.sprite)}}catch(e){o.e(e)}finally{o.f()}var r,l=s(this.allChildren);try{for(l.s();!(r=l.n()).done;){t(r.value,this.batchNode.node)}}catch(e){l.e(e)}finally{l.f()}this.allChildren.sort((function(e,t){return e.constructor.name.localeCompare(t.constructor.name)})),this.labelChildren.sort((function(e,t){return e.cacheMode-t.cacheMode}));var u,c=s(this.nameChildren);try{for(c.s();!(u=c.n()).done;){var h=u.value;if(h.isValid&&h.activeInHierarchy&&h.isTransformDirty()){var d=h.getComponent(B);if(!(d&&d.opacity<1||n.includes(h.name))){var p=this.batchNode[h.name];p&&(h.isChildOf(p)||(h.setParent(p,!0),h.layer=G.Enum.UI_2D))}}}}catch(e){c.e(e)}finally{c.f()}}},{key:"restoreOriginalChildren",value:function(){var e=[].concat(l(this.labelChildren),l(this.spriteChildren));if(e.length>0){var t,n=s(e);try{for(n.s();!(t=n.n()).done;){var i=t.value,a=this.originalParents[i.uuid];a&&(i.node.isChildOf(a)||i.node.setParent(a,!0))}}catch(e){n.e(e)}finally{n.f()}}var o,r=s(this.nameChildren);try{for(r.s();!(o=r.n()).done;){var u=o.value,c=this.originalParents[u.uuid];c&&(u.isChildOf(c)||u.setParent(c,!0))}}catch(e){r.e(e)}finally{r.f()}}}]),c}(b)).prototype,"batchByName",[fi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),_i=e(Bi.prototype,"depthNames",[mi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Oi=e(Bi.prototype,"listName",[gi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Li=e(Bi.prototype,"batchLabel",[bi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Di=e(Bi.prototype,"depthLabel",[Si],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Ii=e(Bi.prototype,"typeLabel",[Ci],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"char"}}),Ni=e(Bi.prototype,"batchSprite",[ki],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Gi=e(Bi.prototype,"depthSprite",[wi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Fi=e(Bi.prototype,"batchAllNodes",[Ei],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Mi=e(Bi.prototype,"batchDepth",[Ti],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),zi=e(Bi.prototype,"checkOverlap",[Ai],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ri=Bi))||Ri);v._RF.pop(),v._RF.push({},"9b958Lf6PFClb/JuJfTLzxG","Vibrate",void 0);var ea=y.ccclass,ta=GameCore.Utils,na=globalThis.game.player,ia=ea("Vibrate")(Ki=function(e){t(o,e);var a=n(o);function o(){return i(this,o),a.apply(this,arguments)}return r(o,[{key:"vibrate",value:function(e){if(this.isVibrateEnable()&&!ta.Browser.vibrate(e)){if("performHapticFeedbackAsync"in GameSDK.extra)return void GameSDK.extra.performHapticFeedbackAsync();console.warn("Vibrate failed")}}},{key:"isVibrateEnable",value:function(){return!!na.getPlayerSetting("vibrate")}}]),o}(b))||Ki;v._RF.pop(),v._RF.push({},"ad867amogBFGJo9jp78EnQP","DevTools",void 0);var aa=function(e){return e.UNLOCK_DEV_TOOLS="unlock-dev-tools",e.TRIGGER_UNLOCK_KEY="trigger-unlock-key",e.TRIGGER_RESET_SEQUENCE="trigger-reset-sequence",e}(aa||{}),oa={Events:aa,UNLOCK_SEQUENCE:"101013012031"};v._RF.pop(),v._RF.push({},"437c2Vl2gxMEIGhbeMNXO0c","EndlessProgressions",void 0);var ra={0:{beeSpeed:60,spawnRandOffset:100,targetOffsetMultiplier:0,count:[8,15]},10:{beeSpeed:60,spawnRandOffset:100,targetOffsetMultiplier:.5,count:[10,20]},20:{beeSpeed:70,spawnRandOffset:110,targetOffsetMultiplier:.6,count:[10,20]},50:{beeSpeed:70,spawnRandOffset:120,targetOffsetMultiplier:.7,count:[10,20]}};v._RF.pop(),v._RF.push({},"91649r9HndHx6OjoY70+mR1","GameMode",void 0);var sa="classic",la="endless";v._RF.pop(),v._RF.push({},"27033qxh65F25R336CXMYGV","BeeRole",void 0);var ua=function(e){return e[e.NORMAL=0]="NORMAL",e[e.PATH_SEEKER=1]="PATH_SEEKER",e[e.PUSHER=2]="PUSHER",e}(ua||{});v._RF.pop(),v._RF.push({},"ab23abxgeZD0KDVdLYEeAQS","BeeState",void 0);var ca=function(e){return e[e.IDLE=0]="IDLE",e[e.FLYING=1]="FLYING",e[e.WAITING_TO_SEEK_PATH=2]="WAITING_TO_SEEK_PATH",e[e.SEEKING_PATH=3]="SEEKING_PATH",e[e.ATTACKING=4]="ATTACKING",e[e.DIE=5]="DIE",e}(ca||{});v._RF.pop(),v._RF.push({},"9ef7e8FlFJOS5DAWzwBrkww","GameObject",void 0);for(var ha=function(e){return e.AIR_FAN="air-fan",e.BALLOON="balloon",e.DOGE="doge",e.SPIDER="spider",e.BEE="bee",e.BIG_BEE="big-bee",e.BIG_BEE_BULLET="big-bee-bullet",e.BEEHIVE="beehive",e.BRICK="brick",e.GRASS="grass",e.GRASS_DARK="grass-dark",e.COLLIDER="collider",e.THORN="thorn",e.THORN_BALL="thorn-ball",e.MAP_LINE="line",e.WOOD="wood",e.WOOD_STROKE="wood-stroke",e.POISON="poison",e.POISON_BUBBLE="poison-bubble",e.POISON_SURFACE="poison-surface",e.WATER="water",e.WATER_SURFACE="water-surface",e.DANGER_AREA="danger-area",e.DUST_PARTICLE="dust-particle",e.ROPE="rope",e.JOINT="joint",e.DRAW_LINE="draw-line",e.CROSSING_BEE_LINE="crossing-bee-line",e}({}),da=ha.COLLIDER,pa=ha.DANGER_AREA,va=ha.DOGE,ya=[da,pa,ha.GRASS,ha.GRASS_DARK,ha.BRICK,ha.MAP_LINE,ha.POISON,ha.POISON_SURFACE,ha.POISON_BUBBLE,ha.AIR_FAN,ha.WOOD,ha.WOOD_STROKE,ha.THORN_BALL,ha.THORN,ha.CROSSING_BEE_LINE,ha.BEE,va,ha.BEEHIVE,ha.ROPE,ha.BALLOON,ha.WATER,ha.WATER_SURFACE,ha.JOINT,ha.DUST_PARTICLE,ha.DRAW_LINE],fa={},ma=0;ma<ya.length;ma++)fa[ya[ma]]=ma;var ga=fa;v._RF.pop(),v._RF.push({},"4c577T9x2FPKpyFoVPXbav0","ObjectIds",void 0);var ba=function(e){return e[e.BRICK=1]="BRICK",e[e.STROKE=3]="STROKE",e[e.GRASS_DARK=4]="GRASS_DARK",e[e.GRASS=5]="GRASS",e[e.COLLIDER=6]="COLLIDER",e[e.THORN=7]="THORN",e[e.WATER=8]="WATER",e[e.WATER_SURFACE=9]="WATER_SURFACE",e[e.LINE=10]="LINE",e[e.POISON_SURFACE=11]="POISON_SURFACE",e[e.POISON=12]="POISON",e[e.WOOD=13]="WOOD",e[e.THORN_BALL=14]="THORN_BALL",e[e.CONNECT=15]="CONNECT",e[e.DANGER_AREA=16]="DANGER_AREA",e[e.BALLOON=17]="BALLOON",e[e.AIR_FAN=18]="AIR_FAN",e[e.SPIDER=19]="SPIDER",e[e.DOGE_A=101]="DOGE_A",e[e.DOGE_B=106]="DOGE_B",e[e.BIG_BEE=107]="BIG_BEE",e[e.BEEHIVE_A=102]="BEEHIVE_A",e[e.BEEHIVE_B=103]="BEEHIVE_B",e[e.BEEHIVE_C=104]="BEEHIVE_C",e[e.BEEHIVE_D=105]="BEEHIVE_D",e}(ba||{});v._RF.pop(),v._RF.push({},"7bb7ftpsjJCX5G6+WtNYJ2x","PhysicsGroup",void 0);var Sa=function(e){return e[e.DEFAULT=1]="DEFAULT",e[e.BEE=2]="BEE",e[e.MAIN_OBJECT=4]="MAIN_OBJECT",e[e.WORLD_BOUND=8]="WORLD_BOUND",e[e.ROPE=16]="ROPE",e}(Sa||{});v._RF.pop(),v._RF.push({},"a6e4bjV/RVH17qBEx1mZaFg","ResourcePaths",void 0);var Ca,ka=function(e){return e.WATER_SURFACE_FRAME="sprites/water-surface/spriteFrame",e.IC_HAND_FRAME="sprites/ic-hand/spriteFrame",e.POISON_CIRCLE_FRAME="sprites/poison-circle/spriteFrame",e.POISON_BUBBLE_PREFAB="prefabs/PoisonBubble",e.DUST_PARTICLE_SPINE="spines/dust-particle/siwang_texiao",e.MAP_JSON_PREFIX="maps-json/",e}(ka||{});v._RF.pop(),v._RF.push({},"476e6UyMHFJyI2GmFP4KpHY","BaseObject",void 0);var wa,Ea,Ta,Aa,Ra,Ba,Pa,_a=(0,y.ccclass)("BaseObject")(Ca=function(e){t(o,e);var a=n(o);function o(){var e;i(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=a.call.apply(a,[this].concat(n))).points=[],e.body=null,e.bodyType=F.Static,e}return r(o,[{key:"onLoad",value:function(){this.node.layer=G.Enum.UI_2D}},{key:"sleep",value:function(){if(!this.body){if(this.body=this.getComponent(M),!this.body)return;this.bodyType=this.body.type}this.enabled=!1,this.body.sleep(),this.body.type=F.Static}},{key:"wake",value:function(){if(this.enabled=!0,this.body)this.body.wakeUp(),this.body.type=this.bodyType;else{if(this.body=this.getComponent(M),!this.body)return;this.bodyType=this.body.type}}},{key:"hide",value:function(){var e;this.enabled=!1,null===(e=this.body)||void 0===e||e.sleep();var t=this.getComponent(z.Skeleton);t&&(t.enabled=!1);var n=this.getComponent(S);n&&(n.enabled=!1)}},{key:"preHide",value:function(){var e;this.enabled=!1,null===(e=this.body)||void 0===e||e.sleep(),this.scheduleOnce(this.hide,.2)}},{key:"appear",value:function(){this.enabled=!0;var e=this.getComponent(z.Skeleton);e&&(e.enabled=!0)}},{key:"setSpineAnimation",value:function(e,t){var n=this.getComponent(z.Skeleton);null==n||n.setAnimation(0,e,t)}},{key:"setEnable",value:function(e){this.enabled=e}},{key:"angle",value:function(e,t){var n=Math.atan2(t,e);return n<0&&(n+=2*Math.PI),n}},{key:"getVectorDataFromAToB",value:function(e,t){var n=t.x-e.x,i=t.y-e.y;return{vector:new x(n,i).normalize(),dx:n,dy:i}}},{key:"kill",value:function(){this.node.active=!1}},{key:"revive",value:function(){this.node.active=!0}}]),o}(b))||Ca;v._RF.pop(),v._RF.push({},"15b7bvQaXpFgItiEHCr7GsP","AirFan",void 0);var Oa=y.ccclass,La=y.property,Da=(wa=Oa("AirFan"),Ea=La(g),Ta=La(U),wa((Ba=e((Ra=function(e){t(h,e);var l=n(h);function h(){var e;i(this,h);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e=l.call.apply(l,[this].concat(n)),a(e,"pushForce",Ba,o(e)),e.force=new x(0,0),e.affectedObjects=[],a(e,"collider",Pa,o(e)),e.colliders=[],e.onBeginContact=function(t,n){e.affectedObjects.includes(n.node.name)&&-1===e.colliders.findIndex((function(e){return e.node===n.node}))&&e.colliders.push(n)},e.onEndContact=function(t,n){var i=e.colliders.indexOf(n);-1!==i&&e.colliders.splice(i,1)},e}return r(h,[{key:"__preload",value:function(){this.collider=this.getComponent(U),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){Le.lazyValidateProperties(this)}},{key:"start",value:function(){this.colliders=[],this.affectedObjects=[ha.DOGE,ha.THORN_BALL,ha.DRAW_LINE,ha.WOOD,ha.BALLOON],this.collider.on(H.BEGIN_CONTACT,this.onBeginContact),this.collider.on(H.END_CONTACT,this.onEndContact)}},{key:"update",value:function(e){var t,n=s(this.colliders);try{for(n.s();!(t=n.n()).done;){var i=t.value,a=i.getComponent(M);if(a){var o=this.force;i.node.name===ha.DRAW_LINE&&(o=this.force.clone().multiplyScalar(i.density/3)),i.node.name===ha.DOGE&&(o=this.force.clone().multiplyScalar(250/this.pushForce)),a.applyForceToCenter(o,!0)}}}catch(e){n.e(e)}finally{n.f()}}},{key:"setForceDirection",value:function(e){var t=new x(0,1).rotate(j.toRadian(e));this.force=t.clone().normalize().multiplyScalar(this.pushForce)}},{key:"sleep",value:function(){u(c(h.prototype),"sleep",this).call(this),this.enabled=!1}},{key:"wake",value:function(){u(c(h.prototype),"wake",this).call(this),this.enabled=!0}}]),h}(_a)).prototype,"pushForce",[Ea],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 400}}),Pa=e(Ra.prototype,"collider",[Ta],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Aa=Ra))||Aa);v._RF.pop(),v._RF.push({},"8a02eYTwSpP9IpQ4MrTsAiL","SpineAnimationName",void 0);var Ia,Na,Ga,Fa,Ma,za,xa,Ua={IDLE:"normal",SMILE:"smile",HURT:"hurt",INACTIVE:"cry",DROWNING:"troll",FREAK_OUT:"freak out",THORN_INACTIVE:"die"},Ha={FLAP_WINGS:"animation",SMOKE_DISAPPEAR:"animation3"},ja={APPEAR:"animation",EXPLODE:"animation2"};v._RF.pop(),v._RF.push({},"ff37brNpltMuaZm+M+x9+1N","Rope",void 0);var Va,Wa,Ka,qa,Ya,Ja,Xa,Za,Qa,$a=y.ccclass,eo=y.property,to=(Ia=$a("Rope"),Na=eo(V),Ga=eo(g),Ia((za=e((Ma=function(e){t(u,e);var l=n(u);function u(){var e;i(this,u);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e=l.call.apply(l,[this].concat(n)),a(e,"frame",za,o(e)),a(e,"length",xa,o(e)),e.nodes=[],e}return r(u,[{key:"onLoad",value:function(){this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){Le.lazyValidateProperties(this)}},{key:"start",value:function(){this.nodes=[],this.node.setPosition(this.headJoint.getPosition()),console.log(this.headJoint.getPosition(),this.tailJoint.getPosition(),this.node.getPosition());for(var e=this.headJoint.getPosition().clone().add(new T(0,4)).multiplyScalar(-1),t=this.tailJoint.getPosition().clone().add(new T(0,115)).add(e).multiplyScalar(1/this.length),n=t.length(),i=t.clone().multiplyScalar(-1*this.length),a=new x(i.x,i.y),o=0;o<this.length;o++){var r=this.createNode(n);if(!r)return void console.warn("Rope: node-".concat(o," not found"));this.node.addChild(r),r.name="node-".concat(o),r.setPosition(t.clone().multiplyScalar(o)),this.nodes.push(r)}for(var s=0;s<this.nodes.length;s++){var l=this.nodes[s];if(0!==s){var u=this.nodes[s-1],c=l.addComponent(W);c.enabled=!1,c.anchor=new x(0,-4),c.connectedAnchor=new x(0,4),c.connectedBody=u.getComponent(M),c.collideConnected=!1,c.enableLimit=!0,c.enabled=!0;var h=l.addComponent(K);if(h.enabled=!1,h.connectedBody=this.headJoint.getComponent(M),h.anchor=new x(0,-4),h.connectedAnchor=new x(0,4),h.collideConnected=!1,h.maxForce=160,h.enabled=!0,s===this.nodes.length-1){var d=this.tailJoint.addComponent(W);d.enabled=!1,d.anchor=new x(0,115),d.connectedBody=l.getComponent(M),d.connectedAnchor=new x(0,4),d.collideConnected=!1,d.enableLimit=!0,d.enabled=!0}}else{var p=l.addComponent(W);p.enabled=!1,p.connectedBody=this.headJoint.getComponent(M),p.anchor=new x(0,-4),p.connectedAnchor=new x(0,4),p.enableLimit=!0,p.collideConnected=!1,p.enabled=!0}}var v=this.tailJoint.addComponent(K);v.enabled=!1,v.connectedBody=this.headJoint.getComponent(M),v.anchor=new x(0,118),v.connectedAnchor=new x(0,-4),v.linearOffset=a,v.maxForce=500,v.enabled=!0}},{key:"disconnect",value:function(){console.log("Disconnecting rope");var e=this.nodes[0].getComponent(W);if(e){e.connectedBody=null,e.enabled=!1;var t=this.tailJoint.getComponent(W);if(t){t.connectedBody=null,t.enabled=!1;var n=this.tailJoint.getComponent(K);n&&(n.enabled=!1,n.connectedBody=null);var i,a=s(this.nodes);try{for(a.s();!(i=a.n()).done;){var o=i.value.getComponent(S);if(!o)return void console.warn("Rope: Sprite not found");o.enabled=!1}}catch(e){a.e(e)}finally{a.f()}}else console.warn("Rope: Final joint not found")}else console.warn("Rope: Starting joint not found")}},{key:"createNode",value:function(e){var t=new R("node");t.layer=this.node.layer,t.addComponent(S).spriteFrame=this.frame;var n=t.addComponent(q);n.setAnchorPoint(.5,.5),n.setContentSize(6,1.2*e);var i=t.addComponent(M);return i.linearDamping=5,i.angularDamping=50,i.gravityScale=.1,i.group=Sa.ROPE,t.addComponent(Y).size=n.contentSize,t.name=ha.ROPE,t}}]),u}(b)).prototype,"frame",[Na],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xa=e(Ma.prototype,"length",[Ga],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Fa=Ma))||Fa);v._RF.pop(),v._RF.push({},"a8a47NhLJ9C1ahfjfiJ2xjc","Balloon",void 0);var no=y.ccclass,io=y.property,ao=(Va=no("Balloon"),Wa=io(J),Ka=io(U),qa=io(M),Va((Xa=e((Ja=function(e){t(l,e);var s=n(l);function l(){var e;i(this,l);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e=s.call.apply(s,[this].concat(n)),a(e,"ropePrefab",Xa,o(e)),a(e,"collider",Za,o(e)),a(e,"rigidBody",Qa,o(e)),e.rope=null,e.onBeginContact=function(t,n){e.rope&&([ha.BEE,ha.THORN,ha.THORN_BALL].includes(n.node.name)&&(e.rope.disconnect(),e.setSpineAnimation(ja.EXPLODE,!1),e.scheduleOnce((function(){e.rigidBody.enabled=!1}))))},e}return r(l,[{key:"__preload",value:function(){this.collider=this.getComponent(U),this.rigidBody=this.getComponent(M),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){Le.lazyValidateProperties(this)}},{key:"start",value:function(){this.setSpineAnimation(ja.APPEAR,!0),this.collider.on(H.BEGIN_CONTACT,this.onBeginContact)}},{key:"connectToDoge",value:function(e){var t=X(this.ropePrefab).getComponent(to);if(t)return t.headJoint=this.node,t.tailJoint=e,t.node.name=ha.ROPE,this.rope=t,t;console.warn("Balloon: Rope component not found")}}]),l}(_a)).prototype,"ropePrefab",[Wa],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Za=e(Ja.prototype,"collider",[Ka],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Qa=e(Ja.prototype,"rigidBody",[qa],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ya=Ja))||Ya);v._RF.pop(),v._RF.push({},"ca922n1V0RLioEyUJg8hQXH","GameEvents",void 0);var oo=function(e){return e.NEXT_LEVEL="next-level",e.UPDATE_LEVEL="update-level",e.START_OVER="start-over",e.SELECT_LEVEL="select-level",e.GAME_START="game-start",e.GAME_PAUSE="game-pause",e.GAME_RESUME="game-resume",e.GAME_REPLAY="game-replay",e.SHOW_HINT="show-hint",e.SKIP_LEVEL="skip-level",e.TIME_OUT="time-out",e.DRAWING="drawing",e.DOGE_DIE="doge-die",e.DOGE_SURVIVE="doge-survive",e.BEE_DIE="bee-die",e.BEE_ATTACK="bee-attack",e.BIG_BEE_DIE="big-bee-die",e.GAME_OBJECTS_SPAWNED="game-objects-spawned",e}(oo||{});v._RF.pop(),v._RF.push({},"744a5WT+0VHFLma6AT7mXct","NormalBehavior",void 0);var ro=function(){function e(t){i(this,e),this.touchCount=0,this.bee=t,this.timeToAttack=j.randomRange(.7,.8),this.countTimeToAttack=0}return r(e,[{key:"onBeginContact",value:function(){var e=this;1===this.touchCount&&this.bee.scheduleOnce((function(){e.touchCount>=3&&e.activePusher(),e.touchCount=0}),.75),this.touchCount++}},{key:"activePusher",value:function(){this.bee.setRole(ua.PUSHER)}},{key:"update",value:function(e){this.bee.state===ca.ATTACKING&&(this.countTimeToAttack+=e,this.countTimeToAttack>this.timeToAttack&&(this.bee.findTarget(),this.bee.attackTarget(),this.timeToAttack=j.randomRange(.4,.6),this.countTimeToAttack=0))}}]),e}();v._RF.pop(),v._RF.push({},"ec831BZISdLgp8vKNuRirUM","PusherBehavior",void 0);var so=function(){function e(t){i(this,e),this.bee=t}return r(e,[{key:"onBeginContact",value:function(){var e=this.bee;if(e.target){var t=j.randomRange(20,30),n=e.getVectorDataFromAToB(e.node.getWorldPosition(),e.target.getWorldPosition());n.vector.rotate(Math.random()>.5?-Math.PI/2:Math.PI/2).multiplyScalar(t),e.move(n);var i=e.getComponent(Z);i&&(i.density*=1.1,i.density>=2.5&&(i.density=1,e.setRole(ua.NORMAL),e.setState(ca.ATTACKING)))}}}]),e}();v._RF.pop(),v._RF.push({},"19c52/F5VRPcbm2BqdbChIp","BaseBehavior",void 0);var lo,uo,co,ho,po,vo,yo,fo,mo,go,bo,So,Co=function(){function e(t){i(this,e),this.bee=t,this.normalBehavior=new ro(t),this.pusherBehavior=new so(t),this.seekingPathBehavior=null}return r(e,[{key:"onBeginContact",value:function(e,t){switch(this.bee.role){case ua.NORMAL:this.normalBehavior.onBeginContact();break;case ua.PATH_SEEKER:if(!this.seekingPathBehavior)return void console.warn("Bee: Seeking path behavior is null");this.seekingPathBehavior.onBeginContact(e,t);break;case ua.PUSHER:this.pusherBehavior.onBeginContact()}}},{key:"update",value:function(e){this.updateSpecialRole(e)||this.normalBehavior.update(e)}},{key:"updateSpecialRole",value:function(e){switch(this.bee.role){case ua.PATH_SEEKER:return!!this.seekingPathBehavior&&this.seekingPathBehavior.update(e);default:return!1}}}]),e}();v._RF.pop(),v._RF.push({},"0b146P+xAlN5LGe2MJHlJDc","Bee",void 0);var ko=y.ccclass,wo=y.property,Eo=(lo=ko("Bee"),uo=wo(R),co=wo(z.Skeleton),ho=wo(U),po=wo(M),lo((fo=e((yo=function(e){t(l,e);var s=n(l);function l(){var e;i(this,l);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e=s.call.apply(s,[this].concat(n)),a(e,"flipNode",fo,o(e)),a(e,"spriteNode",mo,o(e)),e.target=null,e.isSpawnLeftSide=!1,e.role=ua.NORMAL,e.state=ca.IDLE,e.behavior=new Co(o(e)),e.speed=0,a(e,"collider",go,o(e)),a(e,"rigidBody",bo,o(e)),a(e,"gameObjects",So,o(e)),e.wanderingOriginHeight=null,e.isWandering=!1,e.onBeginContact=function(t,n){e.enabled&&(e.rigidBody.linearDamping=j.randomRangeInt(6,8),n.node.name!==ha.THORN&&n.node.name!==ha.POISON&&n.node.name!==ha.BIG_BEE_BULLET?n.node.name!==ha.WATER?(n.node.name===ha.DOGE&&Me.playSound(xe.BEE_STING_DOGE,{volume:.3}),e.behavior.onBeginContact(t,n)):e.drown():e.smokeDisappear())},e}return r(l,[{key:"__preload",value:function(){var e;this.collider=this.getComponent(U),this.rigidBody=this.getComponent(M),this.gameObjects=null===(e=this.node.parent)||void 0===e?void 0:e.getComponent(mu),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){Le.lazyValidateProperties(this)}},{key:"start",value:function(){this.setState(ca.IDLE),this.collider.on(H.BEGIN_CONTACT,this.onBeginContact),this.collider.enabled=!1}},{key:"followTarget",value:function(e){this.target=e,this.collider.enabled=!0,this.attackTarget()}},{key:"followInstructions",value:function(){this.collider.enabled=!0}},{key:"findTarget",value:function(){var e=this.gameObjects.getNearestDogeToBee(this);e&&!e.isCantBeTargeted()?this.target=e.node:this.target=null}},{key:"smokeDisappear",value:function(){this.preHide(),this.setSpineAnimation(Ha.SMOKE_DISAPPEAR,!1),this.setState(ca.DIE),this.node.scene.emit(oo.BEE_DIE)}},{key:"flap",value:function(){this.setSpineAnimation(Ha.FLAP_WINGS,!0)}},{key:"attackTarget",value:function(){var e=this;if(!this.target){if(this.isWandering)return;this.isWandering=!0,this.scheduleOnce((function(){e.isWandering=!1}),.5),this.speed=j.randomRange(40,50);var t=this.node.getWorldPosition();null===this.wanderingOriginHeight&&(this.wanderingOriginHeight=t.y+50),t.x+=j.randomRange(-300,300),t.y=j.randomRange(this.wanderingOriginHeight,this.wanderingOriginHeight-50);var n=this.getVectorDataFromAToB(this.node.getWorldPosition(),t);return this.move(n),void(this.rigidBody.linearDamping=0)}this.speed=j.randomRange(20,30);var i=this.getVectorDataFromAToB(this.node.getWorldPosition(),this.target.getWorldPosition());i.vector.rotate(j.randomRange(-.3,.3)).multiplyScalar(this.speed),this.move(i),this.rigidBody.linearDamping=0,this.setState(ca.ATTACKING)}},{key:"sleep",value:function(){u(c(l.prototype),"sleep",this).call(this),this.target=null}},{key:"rotateToVector",value:function(e){this.node.angle=j.toDegree(this.angle(e.x,e.y)),this.node.angle+=180;var t=this.node.angle/360-Math.floor(this.node.angle/360);t>.25&&t<.75?this.flipNode.setScale(new T(1,-1,1)):this.flipNode.setScale(new T(1,1,1))}},{key:"move",value:function(e){this.rigidBody.linearVelocity=e.vector,this.rotateToVector({x:e.dx,y:e.dy})}},{key:"fly",value:function(e){this.rigidBody.linearVelocity=e,this.rigidBody.linearDamping=0,this.flap(),this.setState(ca.FLYING)}},{key:"setState",value:function(e){this.state=e}},{key:"setRole",value:function(e){this.role=e}},{key:"update",value:function(e){this.behavior.update(e)}},{key:"drown",value:function(){this.collider.enabled=!1,this.speed=20;var e=this.node.getWorldPosition();e.y=e.y-1e3;var t=this.getVectorDataFromAToB(this.node.getWorldPosition(),e);this.move(t),this.rigidBody.linearDamping=0,this.spriteNode.paused=!0,this.setState(ca.DIE),this.node.scene.emit(oo.BEE_DIE)}},{key:"setSpineAnimation",value:function(e,t){this.spriteNode.setAnimation(0,e,t)}}]),l}(_a)).prototype,"flipNode",[uo],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),mo=e(yo.prototype,"spriteNode",[co],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),go=e(yo.prototype,"collider",[ho],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bo=e(yo.prototype,"rigidBody",[po],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),So=e(yo.prototype,"gameObjects",[wo],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vo=yo))||vo);v._RF.pop(),v._RF.push({},"23d64mdR6VPRoojd1BBKwos","World",void 0);var To,Ao,Ro,Bo,Po,_o=28,Oo=1792;v._RF.pop(),v._RF.push({},"5f264eibqlEH7PqbJQqHTF7","Line",void 0);var Lo=y.ccclass,Do=y.property,Io=(To=Lo("Line"),Ao=Do(P),To((Po=e((Bo=function(e){t(u,e);var l=n(u);function u(){var e;i(this,u);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=l.call.apply(l,[this].concat(n))).points=[],e.colliderInterval=20,e.colliders=[],e.colliderTag=0,a(e,"graphic",Po,o(e)),e}return r(u,[{key:"__preload",value:function(){this.graphic=this.getComponent(P),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){Le.lazyValidateProperties(this)}},{key:"init",value:function(){this.points=[],this.colliders=[],this.colliderTag=0}},{key:"drawTo",value:function(e,t,n,i){this.graphic.moveTo(e,t),this.graphic.lineTo(n,i),this.graphic.stroke()}},{key:"addBody",value:function(e,t){var n=this.node.addComponent(Z);n.offset=new x(e,t),n.radius=8,n.density=5,n.tag=this.colliderTag,n.apply(),this.colliderTag+=1,this.colliders.push(n)}},{key:"deActiveColliders",value:function(){var e,t=s(this.colliders);try{for(t.s();!(e=t.n()).done;){e.value.enabled=!1}}catch(e){t.e(e)}finally{t.f()}}},{key:"storePoints",value:function(e,t){var n=new x(e,t);this.points.push(n)}},{key:"addPhysics",value:function(){for(var e=0;e<this.points.length-1;e++){var t=this.points[e],n=this.points[e+1];if(t&&n){var i=this.getInternalPoints(t,n);if(e<this.points.length-2){var a=i.pop();if(!a){console.warn("Line: lastPoint not found");continue}this.points[e+1]=a}var o,r=s(i);try{for(r.s();!(o=r.n()).done;){var l,u=o.value,c=!1,h=s(this.colliders);try{for(h.s();!(l=h.n()).done;){var d=l.value;j.Vec2.distance(u,d.offset)<2*d.radius&&(c=!0)}}catch(e){h.e(e)}finally{h.f()}c||this.addBody(u.x,u.y)}}catch(e){r.e(e)}finally{r.f()}}}var p=this.points[this.points.length-1];p&&this.addBody(p.x,p.y)}},{key:"getInternalPoints",value:function(e,t){for(var n=t.x-e.x,i=t.y-e.y,a=new x(n,i).normalize().multiplyScalar(this.colliderInterval),o=j.Vec2.distance(e,t),r=Math.floor(o/this.colliderInterval),s=[e],l=0;l<r;l++){var u=s[s.length-1];if(u){var c=u.clone().add(a);s.push(c)}}return s}}]),u}(_a)).prototype,"graphic",[Ao],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ro=Bo))||Ro);v._RF.pop(),v._RF.push({},"afc3eWzi4tHNYb9W7f6QpCX","SeekingPathBehavior",void 0);var No,Go,Fo,Mo=function(){function e(t,n){i(this,e),this.isFinishSeeking=!1,this.vectorDataGroup=[],this.index=0,this.bee=t,this.isSeekToLastPoint=n,this.vectorDataGroup=[],this.isFinishSeeking=!1,this.time=.02,this.remaining=0,this.index=0}return r(e,[{key:"seek",value:function(e){var t=this.bee.node.scene.getComponentInChildren(Io);if(!t)return console.warn("Bee: Line is null"),!1;var n=t.colliders.findIndex((function(t){if(t.tag===e.tag)return!0}));if(-1===n)return!1;this.vectorDataGroup=[],this.isFinishSeeking=!1,this.time=.04,this.remaining=0,this.index=0;var i=this.bee.speed;return i||(i=j.randomRange(20,30)),this.isSeekToLastPoint?this.seekToLastPoint(n,t,i):this.seekToFirstPoint(n,t,i),!0}},{key:"seekToLastPoint",value:function(e,t,n){for(var i=e;i<t.colliders.length-1;i++){var a=t.colliders[i],o=t.colliders[i+1],r=this.bee.getVectorDataFromAToB(a.worldPosition,o.worldPosition);r.vector.multiplyScalar(n),this.vectorDataGroup.push(r)}}},{key:"seekToFirstPoint",value:function(e,t,n){for(var i=e;i>0;i--){var a=t.colliders[i],o=t.colliders[i-1],r=this.bee.getVectorDataFromAToB(a.worldPosition,o.worldPosition);r.vector.multiplyScalar(n),this.vectorDataGroup.push(r)}}},{key:"flyToNextDirection",value:function(){var e=this.vectorDataGroup[this.index];if(this.index+=1,!e)return this.isFinishSeeking=!0,this.bee.setRole(ua.NORMAL),void this.bee.setState(ca.ATTACKING);this.bee.move(e)}},{key:"fly",value:function(e){this.remaining+=e,this.remaining>this.time&&(this.flyToNextDirection(),this.time=.02,this.remaining=0)}},{key:"onBeginContact",value:function(e,t){if(this.bee.state===ca.SEEKING_PATH&&t.node.name!==ha.DRAW_LINE)return this.isFinishSeeking=!0,this.bee.setRole(ua.NORMAL),void this.bee.setState(ca.ATTACKING);this.isFinishSeeking||this.bee.state===ca.WAITING_TO_SEEK_PATH||t.node.name!==ha.DRAW_LINE||this.handlePathSeekerTouchLine(t)}},{key:"handlePathSeekerTouchLine",value:function(e){var t=this;this.seek(e)&&this.bee.state!==ca.SEEKING_PATH&&(this.bee.setState(ca.WAITING_TO_SEEK_PATH),this.bee.scheduleOnce((function(){t.bee.setState(ca.SEEKING_PATH)}),.3))}},{key:"update",value:function(e){return this.bee.state===ca.SEEKING_PATH&&(this.fly(e),!0)}}]),e}();v._RF.pop(),v._RF.push({},"2181aAj+ElOoL2tBGH10euY","Beehive",void 0);var zo,xo,Uo,Ho,jo,Vo,Wo,Ko,qo,Yo,Jo,Xo=y.ccclass,Zo=y.property,Qo=Xo("Beehive")((Fo=e((Go=function(e){t(l,e);var s=n(l);function l(){var e;i(this,l);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=s.call.apply(s,[this].concat(n))).totalPathSeekers=0,e.isSeekToLastPoint=!0,a(e,"gameObjects",Fo,o(e)),e}return r(l,[{key:"onLoad",value:function(){var e;this.gameObjects=null===(e=this.node.parent)||void 0===e?void 0:e.getComponent(mu),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){Le.lazyValidateProperties(this)}},{key:"releaseBee",value:function(e){var t=this;this.updateTotalPathSeekers(),this.scheduleOnce((function(){var n=e.getComponent(Eo);if(n){t.createPathSeeker(n),"isRightSide"in t.node&&!0===t.node.isRightSide?t.spawnInRightSide(n):t.spawnInLeftSide(n),n.wake();var i=t.gameObjects.getRandomDogeToBee();i&&t.scheduleOnce((function(){return n.followTarget(i.node)}),.2)}}),j.randomRange(.1,.4))}},{key:"updateTotalPathSeekers",value:function(){"totalPathSeekers"in this.node&&"number"==typeof this.node.totalPathSeekers&&(this.totalPathSeekers=this.node.totalPathSeekers)}},{key:"spawnInLeftSide",value:function(e){var t=this.node.getPosition(),n=t.x,i=t.y,a=j.randomRangeInt(-10,0),o=j.randomRangeInt(38,48);e.isSpawnLeftSide=!0,e.node.setScale(new T(1,1,1)),e.node.setPosition(n+a,i+o),e.fly(new x(-2,-1).normalize().multiplyScalar(2))}},{key:"spawnInRightSide",value:function(e){var t=this.node.getPosition(),n=t.x,i=t.y,a=j.randomRangeInt(0,10),o=j.randomRangeInt(38,48);e.isSpawnLeftSide=!1,e.node.setScale(new T(1,1,1)),e.node.setPosition(n+a,i+o),e.fly(new x(2,-1).normalize().multiplyScalar(2))}},{key:"createPathSeeker",value:function(e){0!==this.totalPathSeekers&&(e.setRole(ua.PATH_SEEKER),e.behavior.seekingPathBehavior=new Mo(e,this.isSeekToLastPoint),this.isSeekToLastPoint=!this.isSeekToLastPoint,this.totalPathSeekers-=1)}}]),l}(_a)).prototype,"gameObjects",[Zo],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),No=Go))||No;v._RF.pop(),v._RF.push({},"a17a07Pu/tAGb4MdM3jxHke","BigBeeBullet",void 0);var $o,er,tr,nr,ir,ar,or,rr,sr,lr,ur,cr,hr=y.ccclass,dr=y.property,pr=(zo=hr("BigBeeBullet"),xo=dr(S),Uo=dr(z.Skeleton),Ho=dr(U),jo=dr(M),zo((Ko=e((Wo=function(e){t(l,e);var s=n(l);function l(){var e;i(this,l);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e=s.call.apply(s,[this].concat(n)),a(e,"stinger",Ko,o(e)),a(e,"ci",qo,o(e)),a(e,"collider",Yo,o(e)),a(e,"rigidBody",Jo,o(e)),e.onBeginContact=function(){e.stinger.active=!1,e.ci.active=!0;var t=e.ci.getComponent(z.Skeleton);t?(t.enabled=!0,t.setAnimation(0,"animation",!1),Me.playSound(xe.BEE_BULLET_EXPLODE,{allowMultiple:!0}),t.setCompleteListener((function(){e.kill()}))):console.warn("BigBeeBullet: ske not found")},e}return r(l,[{key:"onLoad",value:function(){this.collider=this.getComponent(U),this.rigidBody=this.getComponent(M),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){Le.lazyValidateProperties(this)}},{key:"start",value:function(){this.revive()}},{key:"revive",value:function(){u(c(l.prototype),"revive",this).call(this),this.stinger.active=!0,this.ci.active=!1,this.ci.getComponent(z.Skeleton).enabled=!1,this.collider.once(H.BEGIN_CONTACT,this.onBeginContact)}},{key:"kill",value:function(){u(c(l.prototype),"kill",this).call(this),this.stinger.active=!1,this.ci.active=!1}},{key:"forwardToDoge",value:function(e){var t=j.randomRange(20,30),n=this.getVectorDataFromAToB(this.node.getWorldPosition(),e.getWorldPosition());n.vector.rotate(j.randomRange(-.3,.3)).multiplyScalar(t),this.rigidBody.linearVelocity=n.vector,this.node.angle=j.toDegree(this.angle(n.dx,n.dy))}}]),l}(_a)).prototype,"stinger",[xo],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),qo=e(Wo.prototype,"ci",[Uo],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Yo=e(Wo.prototype,"collider",[Ho],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Jo=e(Wo.prototype,"rigidBody",[jo],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Vo=Wo))||Vo);v._RF.pop(),v._RF.push({},"2b15b1CihdEf60Zy/wIYirK","BigBee",void 0);var vr,yr,fr,mr,gr,br,Sr,Cr,kr=y.ccclass,wr=y.property,Er=($o=kr("BigBee"),er=wr(J),tr=wr(z.Skeleton),nr=wr(Z),ir=wr(M),$o((rr=e((or=function(e){t(l,e);var s=n(l);function l(){var e;i(this,l);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e=s.call.apply(s,[this].concat(n)),a(e,"bulletPrefab",rr,o(e)),e.state=ca.IDLE,e.target=null,e.bulletPool=[],e.timeToAttack=0,e.countTimeToAttack=0,a(e,"skeleton",sr,o(e)),a(e,"gameObjects",lr,o(e)),a(e,"collider",ur,o(e)),a(e,"rigidBody",cr,o(e)),e.onBeginContact=function(t,n){e.enabled&&(n.node.name!==ha.THORN&&n.node.name!==ha.POISON||e.smokeDisappear())},e}return r(l,[{key:"onLoad",value:function(){var e;this.skeleton=this.getComponent(z.Skeleton),this.gameObjects=null===(e=this.node.parent)||void 0===e?void 0:e.getComponent(mu),this.collider=this.getComponent(Z),this.rigidBody=this.getComponent(M),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){Le.lazyValidateProperties(this)}},{key:"start",value:function(){this.node.setScale(new T(.7,.7,.7)),this.timeToAttack=j.randomRange(1,2),this.countTimeToAttack=0,this.createBulletPool(),this.initDustParticle();var e=this.gameObjects.getRandomDogeToBee();e?(this.target=e.node,this.state=ca.FLYING,this.collider.on(H.BEGIN_CONTACT,this.onBeginContact)):console.warn("BigBee: Target not found")}},{key:"update",value:function(e){this.state===ca.ATTACKING&&(this.countTimeToAttack+=e,this.countTimeToAttack>this.timeToAttack&&(this.attackTarget(),this.timeToAttack=j.randomRange(1,2),this.countTimeToAttack=0))}},{key:"createBulletPool",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;this.bulletPool=[];for(var t=0;t<e;t++)this.createBullet()}},{key:"initDustParticle",value:function(){var e=this;if(this.node.parent){var t=new R(ha.DUST_PARTICLE);t.layer=Math.pow(2,25),t.active=!1;var n=t.addComponent(z.Skeleton);Q.load(ka.DUST_PARTICLE_SPINE,z.SkeletonData,(function(t,i){t?console.error("initDustParticle",t):e.node.isValid&&(n.skeletonData=i)})),this.node.parent.addChild(t),this.dustParticle=t}}},{key:"createDust",value:function(){var e=this;if(this.dustParticle){this.dustParticle.active=!0;var t=this.node.getWorldPosition(),n=t.x,i=t.y;this.dustParticle.setWorldPosition(new T(n,i));var a=this.dustParticle.getComponent(z.Skeleton);null==a||a.setAnimation(0,"animation",!1),this.scheduleOnce((function(){e.dustParticle&&(e.dustParticle.active=!1)}),.5)}}},{key:"createBullet",value:function(){if(!this.node.parent)return console.warn("BigBee: Parent not found"),null;var e=X(this.bulletPrefab),t=e.getComponent(pr);return e.name=ha.BIG_BEE_BULLET,t&&t.kill(),this.node.parent.addChild(e),this.bulletPool.push(e),e}},{key:"smokeDisappear",value:function(){this.hide(),this.createDust(),this.state=ca.DIE,this.node.scene.emit(oo.BIG_BEE_DIE)}},{key:"sleep",value:function(){}},{key:"wake",value:function(){}},{key:"hide",value:function(){this.enabled=!1,this.rigidBody.sleep(),this.skeleton.enabled=!1}},{key:"preHide",value:function(){}},{key:"appear",value:function(){}},{key:"setSpineAnimation",value:function(e,t){}},{key:"attackTarget",value:function(){var e=this;this.skeleton.setAnimation(0,"attack",!1),this.skeleton.setCompleteListener((function(){e.skeleton.setAnimation(0,"fly",!0)})),this.scheduleOnce((function(){if(e.target){var t=e.bulletPool.filter((function(e){return!1===e.active}))[0];if(t||(t=e.createBullet())){var n=t.getComponent(pr);if(n){n.revive();var i=e.node.getPosition(),a=i.x,o=i.y;t.setPosition(a,o),n.forwardToDoge(e.target)}else console.warn("BigBee: Bullet component not found")}}else console.warn("BigBee: Target not found")}),.5)}}]),l}(_a)).prototype,"bulletPrefab",[er],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),sr=e(or.prototype,"skeleton",[tr],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),lr=e(or.prototype,"gameObjects",[wr],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ur=e(or.prototype,"collider",[nr],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cr=e(or.prototype,"rigidBody",[ir],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ar=or))||ar);v._RF.pop(),v._RF.push({},"8e16aARuABAK56lFGhIfeH+","Brick",void 0);var Tr,Ar,Rr,Br,Pr,_r=y.ccclass,Or=y.property,Lr=y.requireComponent,Dr=(vr=_r("Brick"),yr=Lr([$]),fr=Or({tooltip:"Use batch draw all bricks"}),mr=Or(S),vr(gr=yr((Sr=e((br=function(e){t(u,e);var l=n(u);function u(){var e;i(this,u);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e=l.call.apply(l,[this].concat(n)),a(e,"useBatch",Sr,o(e)),a(e,"sprite",Cr,o(e)),e.brickPolygons=[],e}return r(u,[{key:"__preload",value:function(){this.mask=this.getComponent($),this.graphic=this.getComponent(P),this.polygonCollider=this.getComponent(ee),this.validateRequiredComponents(),this.listenGameplayEvents()}},{key:"validateRequiredComponents",value:function(){Le.lazyValidateProperties(this)}},{key:"listenGameplayEvents",value:function(){}},{key:"addBrickPolygon",value:function(e){this.brickPolygons.push(e)}},{key:"onLoad",value:function(){var e=this.getPolygon();e&&(this.useBatch?(this.mask.enabled=!1,this.graphic.enabled=!1,this.addBrickPolygon(e)):(this.updateTransform(e),this.drawMask(e),this.applyCollider(e)))}},{key:"getPolygon",value:function(){if(!("polygon"in this.node))return null;var e=this.node.polygon;return Array.isArray(e)?e:null}},{key:"updateTransform",value:function(e){var t=this.calculatePolygonDimensions(e),n=t.width,i=t.height;this.setPosition(0,0),this.setContentSize(n,i)}},{key:"setPosition",value:function(e,t){this.node.setPosition(e,t)}},{key:"setContentSize",value:function(e,t){var n=this.sprite.getComponent(q);n&&n.setContentSize(e,t)}},{key:"updateContentSizeForBatchDraw",value:function(){var e=this.brickPolygons.map((function(e){return e.map((function(e){var t=e.x,n=e.y;return new x(t,n)}))})).flat(),t=this.calculatePolygonDimensions(e),n=t.width,i=t.height,a=this.calculateSpritePositionForBatchDraw(e),o=this.sprite.getComponent(q);if(o){o.setContentSize(n,i);var r=this.sprite.getComponent(S);r&&r.node.setPosition(a.x,a.y)}}},{key:"calculateSpritePositionForBatchDraw",value:function(e){for(var t=e[0].x,n=e[0].x,i=e[0].y,a=e[0].y,o=1;o<e.length;o++){var r=e[o],s=r.x,l=r.y;s<t?t=s:s>n&&(n=s),l<i?i=l:l>a&&(a=l)}return{x:t,y:i}}},{key:"calculatePolygonDimensions",value:function(e){for(var t=e[0].x,n=e[0].x,i=e[0].y,a=e[0].y,o=1;o<e.length;o++){var r=e[o],s=r.x,l=r.y;s<t?t=s:s>n&&(n=s),l<i?i=l:l>a&&(a=l)}return{width:Math.abs(n-t),height:Math.abs(a-i)}}},{key:"drawMask",value:function(e){this.graphic.moveTo(e[0].x,e[0].y);var t,n=s(e);try{for(n.s();!(t=n.n()).done;){var i=t.value;this.graphic.lineTo(i.x,i.y)}}catch(e){n.e(e)}finally{n.f()}this.graphic.close(),this.graphic.fill()}},{key:"batchDrawAllBrick",value:function(){if(!(this.brickPolygons.length<1)){this.mask.enabled=!0,this.graphic.enabled=!0,this.updateContentSizeForBatchDraw();var e,t=s(this.brickPolygons);try{for(t.s();!(e=t.n()).done;){var n=e.value;this.drawMask(n)}}catch(e){t.e(e)}finally{t.f()}this.applyColliderForBatchDraw(),this.brickPolygons=[]}}},{key:"applyCollider",value:function(e){this.polygonCollider.points=e.map((function(e){var t=e.x,n=e.y;return new x(t,n)})),this.polygonCollider.apply()}},{key:"applyColliderForBatchDraw",value:function(){var e,t=this.brickPolygons.map((function(e){return e.map((function(e){var t=e.x,n=e.y;return new x(t,n)}))})),n=s(t);try{for(n.s();!(e=n.n()).done;){var i=e.value,a=new R;a.name=ha.BRICK,this.node.addChild(a),a.setPosition(0,0);var o=a.addComponent(M);o.type=F.Static,o.group=Sa.MAIN_OBJECT;var r=a.addComponent(ee);r.points=i,r.apply()}}catch(e){n.e(e)}finally{n.f()}}}]),u}(b)).prototype,"useBatch",[fr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Cr=e(br.prototype,"sprite",[mr],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gr=br))||gr)||gr);v._RF.pop(),v._RF.push({},"46fa0f/kl1Heo/JvM2kAEAf","GraphicsPattern",void 0);var Ir,Nr,Gr,Fr,Mr,zr,xr,Ur,Hr,jr,Vr,Wr,Kr=y.ccclass,qr=y.property,Yr=(Tr=Kr("GraphicsPattern"),Ar=qr(P),Tr((Pr=e((Br=function(e){t(u,e);var l=n(u);function u(){var e;i(this,u);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e=l.call.apply(l,[this].concat(n)),a(e,"graphic",Pr,o(e)),e}return r(u,[{key:"onLoad",value:function(){this.graphic=this.getComponent(P),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){Le.lazyValidateProperties(this)}},{key:"start",value:function(){}},{key:"sleep",value:function(){}},{key:"draw",value:function(e){this.graphic.moveTo(e[0].x,e[0].y);var t,n=s(e);try{for(n.s();!(t=n.n()).done;){var i=t.value;this.graphic.lineTo(i.x,i.y)}}catch(e){n.e(e)}finally{n.f()}this.graphic.close(),this.graphic.fill()}},{key:"applyCollider",value:function(e){var t=this.getComponent(ee);t?(t.points=e.map((function(e){var t=e.x,n=e.y;return new x(t,n)})),t.apply()):console.warn("GraphicsPattern: PolygonCollider2D not found")}},{key:"setColor",value:function(e){var t=new _;_.fromHEX(t,e),this.graphic.fillColor=t}}]),u}(_a)).prototype,"graphic",[Ar],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Rr=Br))||Rr);v._RF.pop(),v._RF.push({},"959bd9NhYpMTK0O78HSl4rc","Pattern",void 0);var Jr,Xr=y.ccclass,Zr=y.property,Qr=y.requireComponent,$r=(Ir=Xr("Pattern"),Nr=Qr([P,ee,M]),Gr=Zr(S),Fr=Zr(P),Mr=Zr(M),zr=Zr(ee),Ir(xr=Nr((Hr=e((Ur=function(e){t(u,e);var l=n(u);function u(){var e;i(this,u);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e=l.call.apply(l,[this].concat(n)),a(e,"sprite",Hr,o(e)),a(e,"graphic",jr,o(e)),a(e,"rigidBody",Vr,o(e)),a(e,"polygonCollider",Wr,o(e)),e}return r(u,[{key:"onLoad",value:function(){this.graphic=this.getComponent(P),this.rigidBody=this.getComponent(M),this.polygonCollider=this.getComponent(ee),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){Le.lazyValidateProperties(this)}},{key:"start",value:function(){}},{key:"draw",value:function(e){var t=this.sprite.getComponent(q);if(t){var n=this.getBottomLeftPosition(e),i=n.x,a=n.y,o=this.getTopRightPosition(e),r=o.x,l=o.y;t.setContentSize(r-i,l-a),t.node.setPosition(i,a),this.graphic.moveTo(e[0].x,e[0].y);var u,c=s(e);try{for(c.s();!(u=c.n()).done;){var h=u.value;this.graphic.lineTo(h.x,h.y)}}catch(e){c.e(e)}finally{c.f()}this.graphic.close(),this.graphic.fill()}}},{key:"savePolygonPoints",value:function(e){this.points=e}},{key:"getPolygonPoints",value:function(){return this.points}},{key:"applyCollider",value:function(e){this.polygonCollider.points=e.map((function(e){var t=e.x,n=e.y;return new x(t,n)})),this.polygonCollider.apply()}},{key:"setRigidBodyType",value:function(e){this.rigidBody.type=e}},{key:"getBottomLeftPosition",value:function(e){var t,n=e[0].x,i=e[0].y,a=s(e);try{for(a.s();!(t=a.n()).done;){var o=t.value;n>o.x&&(n=o.x),i>o.y&&(i=o.y)}}catch(e){a.e(e)}finally{a.f()}return{x:n,y:i}}},{key:"getTopRightPosition",value:function(e){var t,n=e[0].x,i=e[0].y,a=s(e);try{for(a.s();!(t=a.n()).done;){var o=t.value;n<o.x&&(n=o.x),i<o.y&&(i=o.y)}}catch(e){a.e(e)}finally{a.f()}return{x:n,y:i}}}]),u}(_a)).prototype,"sprite",[Gr],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),jr=e(Ur.prototype,"graphic",[Fr],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Vr=e(Ur.prototype,"rigidBody",[Mr],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Wr=e(Ur.prototype,"polygonCollider",[zr],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xr=Ur))||xr)||xr);v._RF.pop(),v._RF.push({},"a08960ZMBtFcLD/1nWNbAM9","Poison",void 0);var es,ts=y.ccclass,ns=y.requireComponent,is=ts("Poison")(Jr=ns([Yr])(Jr=function(e){t(o,e);var a=n(o);function o(){var e;i(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=a.call.apply(a,[this].concat(n))).polygon=[],e.useBatch=!1,e.poisonPolygons=[],e.bubbleFrame=null,e.bubblePool=null,e.remaining=0,e.maxPoolSize=0,e.totalBubble=0,e}return r(o,[{key:"onLoad",value:function(){var e;this.graphicPattern=this.getComponent(Yr),this.gameObjects=null===(e=this.node.parent)||void 0===e?void 0:e.getComponent(mu),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){Le.lazyValidateProperties(this)}},{key:"start",value:function(){this.addRigidBody(),this.useBatch||(this.addPolygonCollider(),this.drawPattern(),this.loadCircleFrame(),this.setTimeSpawnBubble(.2))}},{key:"addPoisonPolygon",value:function(e){this.poisonPolygons.push(e)}},{key:"batchDrawAllPoisonPools",value:function(){if(!(this.poisonPolygons.length<1)){this.graphicPattern.setColor("#774798d1");var e,t=s(this.poisonPolygons);try{for(t.s();!(e=t.n()).done;){var n=e.value;this.graphicPattern.draw(n)}}catch(e){t.e(e)}finally{t.f()}this.applyColliderForBatchDraw(),this.loadCircleFrame(),this.setTimeSpawnBubble(.2)}}},{key:"applyColliderForBatchDraw",value:function(){var e,t=this.poisonPolygons.map((function(e){return e.map((function(e){var t=e.x,n=e.y;return new x(t,n)}))})),n=s(t);try{for(n.s();!(e=n.n()).done;){var i=e.value,a=new R;a.name=ha.POISON,this.node.addChild(a),a.setPosition(0,0);var o=a.addComponent(M);o.group=Sa.MAIN_OBJECT,o.type=F.Static;var r=a.addComponent(ee);r.points=i,r.sensor=!0,r.apply()}}catch(e){n.e(e)}finally{n.f()}}},{key:"addRigidBody",value:function(){var e=this.addComponent(M);e?(e.group=Sa.MAIN_OBJECT,e.type=F.Static):console.warn("Cannot add RigidBody2D")}},{key:"addPolygonCollider",value:function(){var e=this.addComponent(ee);e?e.sensor=!0:console.warn("Cannot add PolygonCollider2D")}},{key:"drawPattern",value:function(){this.graphicPattern.setColor("#774798d1"),this.graphicPattern.draw(this.polygon),this.graphicPattern.applyCollider(this.polygon)}},{key:"loadCircleFrame",value:function(){var e=this;Ue.loadSpriteFrameAsync(ka.POISON_CIRCLE_FRAME).then((function(t){if(e.node.isValid){if(!t)throw new Error("loadCircleFrame: SpriteFrame not found");e.bubbleFrame=t;var n=e.useBatch?20*e.poisonPolygons.length:20;e.initPool(10,n)}})).catch((function(e){console.error("loadCircleFrame",e)}))}},{key:"initPool",value:function(e,t){this.bubblePool=new te,this.maxPoolSize=t;for(var n=0;n<e;n++)this.spawnBubble()}},{key:"setTimeSpawnBubble",value:function(e){this.remaining=e}},{key:"spawnBubble",value:function(){if(!this.bubblePool)return null;if(this.totalBubble>=this.maxPoolSize)return null;var e=null;return this.bubblePool.size()>0?e=this.bubblePool.get():(e=new R(ha.POISON_BUBBLE),this.initBubble(e),this.killBubble(e),this.bubblePool.put(e)),e?(this.gameObjects.addObject(e),this.totalBubble+=1,e):null}},{key:"releaseBubble",value:function(e){this.bubblePool&&(this.killBubble(e),this.bubblePool.put(e),this.totalBubble-=1)}},{key:"killBubble",value:function(e){if(e){var t=e.getComponent(S);t&&(t.enabled=!1)}}},{key:"reviveBubble",value:function(e,t){var n=this.getPosition(t),i=n.minX,a=n.minY,o=n.maxX,r=j.randomRange(i,o),s=e.getComponent(B);s?s.opacity=125:console.warn("UIOpacity not found in bubble");var l=e.getComponent(S);l&&(l.enabled=!0),e.setPosition(new T(r,a))}},{key:"initBubble",value:function(e){e.layer=this.node.layer,e.addComponent(S).spriteFrame=this.bubbleFrame,e.addComponent(B)}},{key:"update",value:function(e){if(this.remaining-=e,this.remaining<=0){if(!this.useBatch){var t=this.spawnBubble();if(!t)return;this.reviveBubble(t,this.polygon),this.playBubbleTween(t,this.polygon);var n=j.randomRange(.3,.5);return void this.setTimeSpawnBubble(n)}var i,a=j.randomRange(.3,.5),o=s(this.poisonPolygons);try{for(o.s();!(i=o.n()).done;){var r=i.value,l=this.spawnBubble();if(!l)return;this.reviveBubble(l,r),this.playBubbleTween(l,r)}}catch(e){o.e(e)}finally{o.f()}this.setTimeSpawnBubble(a)}}},{key:"playBubbleTween",value:function(e,t){var n=this;if(e){var i=this.getPosition(t),a=i.minY,o=i.maxY,r=e.getPosition(),s=j.randomRange(80,120),l=Math.abs(o-a),u=r.x,c=r.y+(o-a)-10,h=l/s;ne(e).to(h,{position:new T(u,c)},{easing:"smooth"}).start();var d=e.getComponent(B);if(d){var p=h-.4>0?.4:h;d.opacity=160,ne(d).delay(h-p).to(p,{opacity:0},{easing:"smooth"}).start()}else console.warn("UIOpacity not found in bubble");this.scheduleOnce((function(){n.releaseBubble(e)}),h)}}},{key:"getPosition",value:function(e){var t,n=1e4,i=0,a=1e4,o=0,r=s(e);try{for(r.s();!(t=r.n()).done;){var l=t.value,u=l.x,c=l.y;u<n&&(n=u),u>i&&(i=u),c<a&&(a=c),c>o&&(o=c)}}catch(e){r.e(e)}finally{r.f()}return{minX:n+=20,minY:a+=13,maxX:i-=20,maxY:o-=13}}}]),o}(b))||Jr)||Jr;v._RF.pop(),v._RF.push({},"8633c11nMJN7I7TAFaGu3Fg","PoisonSurface",void 0);var as,os=(0,y.ccclass)("PoisonSurface")(es=function(e){t(o,e);var a=n(o);function o(){var e;i(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=a.call.apply(a,[this].concat(n))).poisonBubblePrefab=null,e.polygon=[],e.useBatch=!1,e.surfacePolygon=[],e.bubblePool=null,e.remaining=0,e.maxPoolSize=0,e.totalBubble=0,e}return r(o,[{key:"onLoad",value:function(){var e;this.graphicPattern=this.getComponent(Yr),this.gameObjects=null===(e=this.node.parent)||void 0===e?void 0:e.getComponent(mu),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){Le.lazyValidateProperties(this)}},{key:"start",value:function(){this.useBatch||(this.drawPattern(),this.loadBubbleFrame())}},{key:"drawPattern",value:function(){this.graphicPattern.setColor("#9757bcb0"),this.graphicPattern.draw(this.polygon)}},{key:"addPoisonSurfacePolygon",value:function(e){this.surfacePolygon.push(e)}},{key:"batchDrawAllPoisonSurfaces",value:function(){if(!(this.surfacePolygon.length<1)){this.graphicPattern.setColor("#9757bcb0");var e,t=s(this.surfacePolygon);try{for(t.s();!(e=t.n()).done;){var n=e.value;this.graphicPattern.draw(n)}}catch(e){t.e(e)}finally{t.f()}this.loadBubbleFrame()}}},{key:"loadBubbleFrame",value:function(){var e=this;Ue.loadPrefabAsync(ka.POISON_BUBBLE_PREFAB).then((function(t){if(e.node.isValid){if(!t)throw new Error("loadBubbleFrame: Prefab is null");e.poisonBubblePrefab=t;var n=e.useBatch?12*e.surfacePolygon.length:12;e.initPool(10,n),e.setTimeSpawnBubble(.3)}})).catch((function(e){console.error("loadBubbleFrame",e)}))}},{key:"update",value:function(e){if(this.remaining-=e,this.remaining<=0){if(!this.useBatch){var t=this.spawnPoisonBubblePop();if(!t)return;this.reviveBubble(t,this.polygon);var n=j.randomRange(.3,.5);return void this.setTimeSpawnBubble(n)}var i,a=j.randomRange(.3,.5),o=s(this.surfacePolygon);try{for(o.s();!(i=o.n()).done;){var r=i.value,l=this.spawnPoisonBubblePop();if(!l)return;this.reviveBubble(l,r)}}catch(e){o.e(e)}finally{o.f()}this.setTimeSpawnBubble(a)}}},{key:"initPool",value:function(e,t){this.bubblePool=new te,this.maxPoolSize=t;for(var n=0;n<e;n++)this.spawnPoisonBubblePop()}},{key:"setTimeSpawnBubble",value:function(e){this.remaining=e}},{key:"spawnPoisonBubblePop",value:function(){if(!this.bubblePool)return null;if(this.totalBubble>=this.maxPoolSize)return null;var e=null;if(this.bubblePool.size()>0)e=this.bubblePool.get();else{if(!((e=X(this.poisonBubblePrefab))instanceof R))return null;this.bubblePool.put(e)}return e?(e.name=ha.POISON_SURFACE,this.gameObjects.addObject(e),this.totalBubble+=1,e):null}},{key:"releasePoisonBubblePop",value:function(e){this.bubblePool&&(this.bubblePool.put(e),this.totalBubble-=1)}},{key:"reviveBubble",value:function(e,t){var n=this;if(e){var i=this.getRandomPosition(t),a=i.x,o=i.y;e.setPosition(new T(a,o));var r=e.getComponent(z.Skeleton);r&&(r.setAnimation(0,"animation",!1),r.setCompleteListener((function(){n.releasePoisonBubblePop(e)})))}}},{key:"getRandomPosition",value:function(e){var t,n=1e4,i=0,a=1e4,o=0,r=s(e);try{for(r.s();!(t=r.n()).done;){var l=t.value,u=l.x,c=l.y;u<n&&(n=u),u>i&&(i=u),c<a&&(a=c),c>o&&(o=c)}}catch(e){r.e(e)}finally{r.f()}return{x:j.randomRange(n+25,i-25),y:j.randomRange(a+5,o-5)}}}]),o}(b))||es;v._RF.pop(),v._RF.push({},"9aa6cp2xqhK1LJeA0kz2hWR","Water",void 0);var rs=y.ccclass,ss=y.requireComponent,ls=rs("Water")(as=ss([Yr])(as=function(e){t(o,e);var a=n(o);function o(){var e;i(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=a.call.apply(a,[this].concat(n))).polygon=[],e.useBatch=!1,e.waterPolygon=[],e}return r(o,[{key:"onLoad",value:function(){this.graphicPattern=this.getComponent(Yr),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){Le.lazyValidateProperties(this)}},{key:"start",value:function(){this.addRigidBody(),this.useBatch||(this.addPolygonCollider(),this.drawPattern())}},{key:"addWaterPolygon",value:function(e){this.waterPolygon.push(e)}},{key:"batchDrawAllWater",value:function(){if(!(this.waterPolygon.length<1)){this.graphicPattern.setColor("#58cef0d0");var e,t=s(this.waterPolygon);try{for(t.s();!(e=t.n()).done;){var n=e.value;this.graphicPattern.draw(n)}}catch(e){t.e(e)}finally{t.f()}this.applyColliderForBatchDraw()}}},{key:"applyColliderForBatchDraw",value:function(){var e,t=this.waterPolygon.map((function(e){return e.map((function(e){var t=e.x,n=e.y;return new x(t,n)}))})),n=s(t);try{for(n.s();!(e=n.n()).done;){var i=e.value,a=new R;a.name=ha.WATER,this.node.addChild(a),a.setPosition(0,0);var o=a.addComponent(M);o.group=Sa.MAIN_OBJECT,o.type=F.Static;var r=a.addComponent(ee);r.points=i,r.sensor=!0,r.apply()}}catch(e){n.e(e)}finally{n.f()}}},{key:"addRigidBody",value:function(){var e=this.addComponent(M);e?(e.group=Sa.MAIN_OBJECT,e.type=F.Static):console.warn("Cannot add RigidBody2D")}},{key:"addPolygonCollider",value:function(){var e=this.addComponent(ee);e?e.sensor=!0:console.warn("Cannot add PolygonCollider2D")}},{key:"drawPattern",value:function(){this.graphicPattern.setColor("#58cef0d0"),this.graphicPattern.draw(this.polygon),this.graphicPattern.applyCollider(this.polygon)}}]),o}(b))||as)||as;v._RF.pop(),v._RF.push({},"d6e4emyi1lPpLbSlAWFj/GD","CrossingBeeLineTypes",void 0);var us,cs,hs,ds,ps,vs,ys,fs,ms,gs,bs,Ss,Cs,ks,ws=function(e){return e[e.LOW=0]="LOW",e[e.MEDIUM=1]="MEDIUM",e[e.HIGH=2]="HIGH",e}(ws||{});ie(ws),v._RF.pop(),v._RF.push({},"988b72EAIhJ1qc0nrLU68l7","CrossingBeeLine",void 0);var Es=y.ccclass,Ts=y.property,As=y.requireComponent,Rs=(us=Es("CrossingBeeLine"),cs=As([S,q]),hs=Ts(V),ds=Ts(V),ps=Ts(V),vs=Ts({type:ws,displayName:"Sprite type"}),ys=Ts({type:ae,displayName:"Line thickness",min:0}),us(fs=cs((gs=e((ms=function(e){t(l,e);var s=n(l);function l(){var e;i(this,l);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e=s.call.apply(s,[this].concat(n)),a(e,"spriteLow",gs,o(e)),a(e,"spriteMedium",bs,o(e)),a(e,"spriteHigh",Ss,o(e)),a(e,"spriteType",Cs,o(e)),a(e,"lineThickness",ks,o(e)),e.startPos=new T,e.endPos=new T,e}return r(l,[{key:"setStartPosition",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.startPos.x,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.startPos.z;this.startPos.set(e,t,n),this.updateLine()}},{key:"setEndPosition",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.endPos.y,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.endPos.z;this.endPos.set(e,t,n),this.updateLine()}},{key:"updateLine",value:function(){this.updateContentSize(),this.updatePosition(),this.updateRotation()}},{key:"thickness",get:function(){return this.lineThickness},set:function(e){this.lineThickness=e,this.updateContentSize()}},{key:"setSpriteType",value:function(e){switch(this.spriteType=e,e){case ws.LOW:this.sprite.spriteFrame=this.spriteLow;break;case ws.MEDIUM:this.sprite.spriteFrame=this.spriteMedium;break;case ws.HIGH:this.sprite.spriteFrame=this.spriteHigh}}},{key:"onLoad",value:function(){this.uiTransform=this.getComponent(q),this.sprite=this.getComponent(S),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){Le.lazyValidateProperties(this)}},{key:"start",value:function(){this.setSpriteType(this.spriteType),this.updateContentSize(),this.updatePosition(),this.updateRotation()}},{key:"updateContentSize",value:function(){var e=this.endPos.x-this.startPos.x,t=this.endPos.y-this.startPos.y,n=this.endPos.z-this.startPos.z,i=Math.sqrt(e*e+t*t+n*n);this.uiTransform.setContentSize(i,this.lineThickness)}},{key:"updatePosition",value:function(){this.uiTransform.setAnchorPoint(.5,.5),this.node.setWorldPosition((this.startPos.x+this.endPos.x)/2,(this.startPos.y+this.endPos.y)/2,(this.startPos.z+this.endPos.z)/2)}},{key:"updateRotation",value:function(){this.node.setWorldRotationFromEuler(0,0,180*Math.atan2(this.endPos.y-this.startPos.y,this.endPos.x-this.startPos.x)/Math.PI)}}]),l}(b)).prototype,"spriteLow",[hs],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bs=e(ms.prototype,"spriteMedium",[ds],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ss=e(ms.prototype,"spriteHigh",[ps],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Cs=e(ms.prototype,"spriteType",[vs],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ws.LOW}}),ks=e(ms.prototype,"lineThickness",[ys],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),fs=ms))||fs)||fs);v._RF.pop(),v._RF.push({},"169a1O0ruFLoI6OnJUZap7V","DogeState",void 0);var Bs,Ps=function(e){return e[e.IDLE=0]="IDLE",e[e.SMILE=1]="SMILE",e[e.SCARE=2]="SCARE",e[e.BEE_STING=3]="BEE_STING",e[e.THORN_STAB=4]="THORN_STAB",e[e.OUT_OF_SCREEN=5]="OUT_OF_SCREEN",e[e.POISONED=6]="POISONED",e[e.DROWNING=7]="DROWNING",e[e.OVER_VIEW=8]="OVER_VIEW",e}(Ps||{});v._RF.pop(),v._RF.push({},"852f9XjNUVJ3Zt1Kd/EbqXU","Eye",void 0);var _s,Os,Ls,Ds,Is,Ns,Gs,Fs=(0,y.ccclass)("Eye")(Bs=function(e){t(o,e);var a=n(o);function o(){var e;i(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=a.call.apply(a,[this].concat(n))).scaleTween=null,e.initialPosition=null,e}return r(o,[{key:"createScaleAnimation",value:function(){var e=ne(this.node).to(.3,{scale:new T(1.1,1.1,1)},{easing:"smooth"});this.scaleTween=ne(this.node).reverseTime(e).repeatForever()}},{key:"saveInitialPosition",value:function(){this.initialPosition||(this.initialPosition=this.node.position.clone())}},{key:"show",value:function(){this.node.active=!0,this.playAnimation()}},{key:"hide",value:function(){this.stopAnimation(),this.node.active=!1}},{key:"toward",value:function(e){this.initialPosition&&(this.node.setPosition(this.initialPosition),this.node.position.add(e))}},{key:"playAnimation",value:function(){var e;this.scaleTween||this.createScaleAnimation(),null===(e=this.scaleTween)||void 0===e||e.start()}},{key:"stopAnimation",value:function(){var e;null===(e=this.scaleTween)||void 0===e||e.stop()}}]),o}(b))||Bs;v._RF.pop(),v._RF.push({},"df218vrmOtEH5vRQXxIZ3yS","Eyes",void 0);var Ms,zs,xs,Us,Hs,js,Vs,Ws,Ks=y.ccclass,qs=y.property,Ys=(_s=Ks("Eyes"),Os=qs(Fs),Ls=qs(Fs),_s((Ns=e((Is=function(e){t(l,e);var s=n(l);function l(){var e;i(this,l);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e=s.call.apply(s,[this].concat(n)),a(e,"leftEye",Ns,o(e)),a(e,"rightEye",Gs,o(e)),e.time=0,e.remaining=0,e.running=!1,e}return r(l,[{key:"onLoad",value:function(){this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){Le.lazyValidateProperties(this)}},{key:"start",value:function(){this.remaining=0,this.running=!1,this.setTimeChangeDirection(.8),this.leftEye.saveInitialPosition(),this.rightEye.saveInitialPosition()}},{key:"setTimeChangeDirection",value:function(e){this.time=e}},{key:"show",value:function(){this.running=!0,this.remaining=this.time,this.leftEye.show(),this.rightEye.show()}},{key:"hide",value:function(){this.running=!1,this.leftEye.hide(),this.rightEye.hide()}},{key:"stopLook",value:function(){this.running=!1}},{key:"look",value:function(){if(this.node.parent){var e=this.node.parent.getComponent(rl);if(e){var t=e.getNearbyBee();if(t){var n=this.leftEye.initialPosition;if(n){var i=n.x,a=n.y,o=new T;this.leftEye.node.inverseTransformPoint(o,t.node.worldPosition);var r=new T(o.x-i,o.y-a,0).normalize().multiplyScalar(5);this.leftEye.toward(r),this.rightEye.toward(r)}}}}}},{key:"update",value:function(e){this.running&&(this.remaining<=0&&(this.look(),this.remaining=this.time),this.remaining-=e)}}]),l}(b)).prototype,"leftEye",[Os],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Gs=e(Is.prototype,"rightEye",[Ls],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ds=Is))||Ds);v._RF.pop(),v._RF.push({},"14172TbYDBAeISJqcpvLYV7","Doge",void 0);var Js,Xs,Zs,Qs,$s,el,tl,nl,il=y.ccclass,al=y.property,ol=[Ps.OVER_VIEW,Ps.BEE_STING,Ps.THORN_STAB,Ps.POISONED,Ps.OUT_OF_SCREEN],rl=(Ms=il("Doge"),zs=al(Ys),xs=al(U),Ms((js=e((Hs=function(e){t(u,e);var l=n(u);function u(){var e;i(this,u);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e=l.call.apply(l,[this].concat(n)),a(e,"eyes",js,o(e)),e.state=Ps.IDLE,e.dustParticle=null,e.gameHeight=0,a(e,"collider",Vs,o(e)),a(e,"gameObjects",Ws,o(e)),e.onBeginContact=function(t,n){n.node.name!==ha.BEE&&n.node.name!==ha.BIG_BEE&&n.node.name!==ha.BIG_BEE_BULLET||e.beeSting(),n.node.name!==ha.THORN&&n.node.name!==ha.THORN_BALL?n.node.name!==ha.POISON?n.node.name===ha.WATER&&e.drowning():e.poisoned():e.stabbedByThorn()},e}return r(u,[{key:"onLoad",value:function(){var e;this.collider=this.getComponent(U),this.gameObjects=null===(e=this.node.parent)||void 0===e?void 0:e.getComponent(mu),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){Le.lazyValidateProperties(this)}},{key:"start",value:function(){var e;this.initDustParticle(),this.idle();var t=null===(e=oe("Canvas"))||void 0===e?void 0:e.getComponent(q);t&&(this.gameHeight=t.height),this.collider.on(H.BEGIN_CONTACT,this.onBeginContact)}},{key:"idle",value:function(){!1!==this.setState(Ps.IDLE)&&(this.hideEyes(),this.setSpineAnimation(Ua.IDLE,!0))}},{key:"smile",value:function(){!1!==this.setState(Ps.SMILE)&&(this.hideEyes(),this.setSpineAnimation(Ua.SMILE,!0))}},{key:"beeSting",value:function(){var e=this;!1!==this.setState(Ps.BEE_STING)&&(this.hideEyes(),this.setSpineAnimation(Ua.HURT,!1),this.scareOtherDoges(),this.scheduleOnce((function(){e.state===Ps.BEE_STING&&e.setSpineAnimation(Ua.INACTIVE,!1)}),.3),Me.playSound(xe.DOGE_HURT))}},{key:"stabbedByThorn",value:function(){!1!==this.setState(Ps.THORN_STAB)&&(this.hideEyes(),this.createDust(),this.setSpineAnimation(Ua.THORN_INACTIVE,!1),this.scareOtherDoges(),Me.playSound(xe.DOGE_DIES))}},{key:"poisoned",value:function(){!1!==this.setState(Ps.POISONED)&&(this.hide(),this.hideEyes(),this.createDust(),this.scareOtherDoges(),Me.playSound(xe.DOGE_DIES))}},{key:"drowning",value:function(){!1!==this.setState(Ps.DROWNING)&&(this.hideEyes(),this.setSpineAnimation(Ua.DROWNING,!1))}},{key:"isCantBeTargeted",value:function(){return-1!==[Ps.THORN_STAB,Ps.OUT_OF_SCREEN,Ps.POISONED,Ps.DROWNING].indexOf(this.state)}},{key:"scare",value:function(){var e;!1!==this.setState(Ps.SCARE)&&(this.showEyes(),null===(e=this.eyes)||void 0===e||e.look(),this.setSpineAnimation(Ua.FREAK_OUT,!0))}},{key:"hideEyes",value:function(){this.eyes.hide()}},{key:"showEyes",value:function(){this.eyes.show()}},{key:"setState",value:function(e){return-1===ol.indexOf(e)?-1===ol.indexOf(this.state)&&(this.state=e,!0):ol.indexOf(e)>ol.indexOf(this.state)&&(this.state=e,this.node.scene.emit(oo.DOGE_DIE),!0)}},{key:"scareOtherDoges",value:function(){if(this.gameObjects){var e,t=this.gameObjects.getDoges(this),n=s(t);try{for(n.s();!(e=n.n()).done;){e.value.scare()}}catch(e){n.e(e)}finally{n.f()}}}},{key:"update",value:function(){var e=this.node.worldPosition.y;(e>this.gameHeight||e<0)&&this.setState(Ps.OUT_OF_SCREEN),this.isBeeNearBy()&&this.scare()}},{key:"isBeeNearBy",value:function(){return this.state===Ps.IDLE&&!ol.includes(this.state)&&!!this.getNearbyBee()}},{key:"getNearbyBee",value:function(){var e=this;if(!this.node.parent)return null;var t=this.node.parent.getComponentsInChildren(Eo).find((function(t){var n=T.distance(e.node.getWorldPosition(),t.node.getWorldPosition());if(t.enabled&&n<=200)return!0}));return null!=t?t:null}},{key:"createDust",value:function(){var e=this;if(this.dustParticle){this.dustParticle.active=!0;var t=this.node.getWorldPosition(),n=t.x,i=t.y;this.dustParticle.setWorldPosition(new T(n,i));var a=this.dustParticle.getComponent(z.Skeleton);null==a||a.setAnimation(0,"animation",!1),this.scheduleOnce((function(){e.dustParticle&&(e.dustParticle.active=!1)}),.5)}}},{key:"initDustParticle",value:function(){var e=this;if(this.node.parent){var t=new R(ha.DUST_PARTICLE);t.layer=Math.pow(2,25),t.active=!1;var n=t.addComponent(z.Skeleton);Q.load(ka.DUST_PARTICLE_SPINE,z.SkeletonData,(function(t,i){t?console.error("initDustParticle",t):e.node.isValid&&(n.skeletonData=i)})),this.node.parent.addChild(t),this.dustParticle=t}}}]),u}(_a)).prototype,"eyes",[zs],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Vs=e(Hs.prototype,"collider",[xs],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ws=e(Hs.prototype,"gameObjects",[al],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Us=Hs))||Us);v._RF.pop(),v._RF.push({},"2ca763+kElPuqiAkECtFMMS","Grass",void 0);var sl,ll,ul,cl,hl,dl=y.ccclass,pl=y.property,vl=y.requireComponent,yl=(Js=dl("Grass"),Xs=vl(P),Zs=pl({tooltip:"Use batch draw all grass polygons"}),Qs=pl(P),Js($s=Xs((tl=e((el=function(e){t(u,e);var l=n(u);function u(){var e;i(this,u);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e=l.call.apply(l,[this].concat(n)),a(e,"useBatch",tl,o(e)),a(e,"graphic",nl,o(e)),e.grassPolygons=[],e}return r(u,[{key:"__preload",value:function(){this.graphic=this.getComponent(P),this.validateRequiredComponents(),this.listenGameplayEvents()}},{key:"validateRequiredComponents",value:function(){Le.lazyValidateProperties(this)}},{key:"listenGameplayEvents",value:function(){}},{key:"onLoad",value:function(){var e=this.getPolygon();if(e){var t=this.isDark()?ha.GRASS_DARK:ha.GRASS;this.useBatch?this.addGrassPolygon(t,e):(this.updateFillColor(t),this.drawGrass(e))}}},{key:"drawGrass",value:function(e){this.graphic.moveTo(e[0].x,e[0].y);var t,n=s(e);try{for(n.s();!(t=n.n()).done;){var i=t.value;this.graphic.lineTo(i.x,i.y)}}catch(e){n.e(e)}finally{n.f()}this.graphic.close(),this.graphic.fill()}},{key:"getPolygon",value:function(){if(!("polygon"in this.node))return null;var e=this.node.polygon;return Array.isArray(e)?e:null}},{key:"isDark",value:function(){return"isDark"in this.node&&!!this.node.isDark}},{key:"addGrassPolygon",value:function(e,t){this.grassPolygons.push({type:e,polygon:t})}},{key:"updateFillColor",value:function(e){e===ha.GRASS_DARK?this.graphic.fillColor.fromHEX("#5e9c35"):this.graphic.fillColor.fromHEX("#8bdd55")}},{key:"batchDrawAllGrass",value:function(){if(!(this.grassPolygons.length<1)){var e,t=s(this.grassPolygons);try{for(t.s();!(e=t.n()).done;){var n=e.value;this.updateFillColor(n.type),this.drawGrass(n.polygon)}}catch(e){t.e(e)}finally{t.f()}this.grassPolygons=[]}}}]),u}(_a)).prototype,"useBatch",[Zs],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),nl=e(el.prototype,"graphic",[Qs],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$s=el))||$s)||$s);v._RF.pop(),v._RF.push({},"7027fhYTgdDe6EinMz7XLC6","MapLine",void 0);var fl=y.ccclass,ml=y.property,gl=(sl=fl("MapLine"),ll=ml(P),sl((hl=e((cl=function(e){t(u,e);var l=n(u);function u(){var e;i(this,u);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e=l.call.apply(l,[this].concat(n)),a(e,"graphics",hl,o(e)),e.useBatch=!1,e.mapLines=[],e}return r(u,[{key:"__preload",value:function(){this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){Le.lazyValidateProperties(this)}},{key:"onLoad",value:function(){var e=this.getPolygon();e&&(this.useBatch?(this.graphics.enabled=!1,this.addLine(e)):this.drawLine(e))}},{key:"getPolygon",value:function(){if(!("polygon"in this.node))return null;var e=this.node.polygon;return Array.isArray(e)?e:null}},{key:"addLine",value:function(e){this.mapLines.push(e)}},{key:"drawLine",value:function(e){this.graphics.moveTo(e[0].x,e[0].y);var t,n=s(e.slice(1));try{for(n.s();!(t=n.n()).done;){var i=t.value;this.graphics.lineTo(i.x,i.y)}}catch(e){n.e(e)}finally{n.f()}this.graphics.stroke()}},{key:"batchDrawAllLines",value:function(){if(!(this.mapLines.length<1)){var e,t=s(this.mapLines);try{for(t.s();!(e=t.n()).done;){var n=e.value;this.drawLine(n)}}catch(e){t.e(e)}finally{t.f()}this.mapLines=[]}}}]),u}(b)).prototype,"graphics",[ll],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ul=cl))||ul);v._RF.pop(),v._RF.push({},"87767KZVqpEgIbdzZdGh1CJ","BatchObjectManager",void 0);var bl=function(){function e(){i(this,e),this.isBrickInitialized=!1,this.isGrassInitialized=!1,this.isLineInitialized=!1,this.isPoisonInitialized=!1,this.isPoisonSurfaceInitialized=!1,this.isWaterInitialized=!1,this.isDangerAreaInitialized=!1,this.mainBrickComponent=null,this.mainGrassComponent=null,this.mainLineComponent=null,this.mainPoisonComponent=null,this.mainPoisonSurfaceComponent=null,this.mainWaterComponent=null,this.mainDangerAreaComponent=null}return r(e,[{key:"assignMainBrickComponent",value:function(e){this.mainBrickComponent=e}},{key:"assignMainGrassComponent",value:function(e){this.mainGrassComponent=e}},{key:"assignMainLineComponent",value:function(e){this.mainLineComponent=e}},{key:"assignMainPoisonComponent",value:function(e){this.mainPoisonComponent=e}},{key:"assignMainPoisonSurfaceComponent",value:function(e){this.mainPoisonSurfaceComponent=e}},{key:"assignMainWaterComponent",value:function(e){this.mainWaterComponent=e}},{key:"assignMainDangerAreaComponent",value:function(e){this.mainDangerAreaComponent=e}},{key:"isBrickBatchingEnabled",value:function(){var e,t;return null!==(e=null===(t=this.mainBrickComponent)||void 0===t?void 0:t.useBatch)&&void 0!==e&&e}},{key:"isGrassBatchingEnabled",value:function(){var e,t;return null!==(e=null===(t=this.mainGrassComponent)||void 0===t?void 0:t.useBatch)&&void 0!==e&&e}},{key:"isLineBatchingEnabled",value:function(){var e,t;return null!==(e=null===(t=this.mainLineComponent)||void 0===t?void 0:t.useBatch)&&void 0!==e&&e}},{key:"isPoisonBatchingEnabled",value:function(){var e,t;return null!==(e=null===(t=this.mainPoisonComponent)||void 0===t?void 0:t.useBatch)&&void 0!==e&&e}},{key:"isPoisonSurfaceBatchingEnabled",value:function(){var e,t;return null!==(e=null===(t=this.mainPoisonSurfaceComponent)||void 0===t?void 0:t.useBatch)&&void 0!==e&&e}},{key:"isWaterBatchingEnabled",value:function(){var e,t;return null!==(e=null===(t=this.mainWaterComponent)||void 0===t?void 0:t.useBatch)&&void 0!==e&&e}},{key:"isDangerAreaBatchingEnabled",value:function(){var e,t;return null!==(e=null===(t=this.mainDangerAreaComponent)||void 0===t?void 0:t.useBatch)&&void 0!==e&&e}},{key:"updateBrickPolygon",value:function(e){this.mainBrickComponent?this.mainBrickComponent.addBrickPolygon(e):console.warn("BatchObjectManager: mainBrickComponent is not assigned")}},{key:"updateGrassPolygon",value:function(e,t){this.mainGrassComponent?this.mainGrassComponent.addGrassPolygon(e,t):console.warn("BatchObjectManager: mainGrassComponent is not assigned")}},{key:"updateMapLine",value:function(e){this.mainLineComponent?this.mainLineComponent.addLine(e):console.warn("BatchObjectManager: mainLineNode is not assigned")}},{key:"updatePoisonPolygon",value:function(e){this.mainPoisonComponent?this.mainPoisonComponent.addPoisonPolygon(e):console.warn("BatchObjectManager: mainPoisonComponent is not assigned")}},{key:"updatePoisonSurfacePolygon",value:function(e){this.mainPoisonSurfaceComponent?this.mainPoisonSurfaceComponent.addPoisonSurfacePolygon(e):console.warn("BatchObjectManager: mainPoisonSurfaceComponent is not assigned")}},{key:"updateWaterPolygon",value:function(e){this.mainWaterComponent?this.mainWaterComponent.addWaterPolygon(e):console.warn("BatchObjectManager: mainWaterComponent is not assigned")}},{key:"updateDangerAreaPolygon",value:function(e){this.mainDangerAreaComponent?this.mainDangerAreaComponent.addDangerAreaPolygon(e):console.warn("BatchObjectManager: mainDangerAreaComponent is not assigned")}},{key:"batchDraw",value:function(){var e,t,n,i,a,o,r;null===(e=this.mainBrickComponent)||void 0===e||e.batchDrawAllBrick(),null===(t=this.mainGrassComponent)||void 0===t||t.batchDrawAllGrass(),null===(n=this.mainLineComponent)||void 0===n||n.batchDrawAllLines(),null===(i=this.mainPoisonComponent)||void 0===i||i.batchDrawAllPoisonPools(),null===(a=this.mainPoisonSurfaceComponent)||void 0===a||a.batchDrawAllPoisonSurfaces(),null===(o=this.mainWaterComponent)||void 0===o||o.batchDrawAllWater(),null===(r=this.mainDangerAreaComponent)||void 0===r||r.batchDrawAllDangerAreas()}},{key:"clearObjects",value:function(){this.isBrickInitialized=!1,this.isGrassInitialized=!1,this.isLineInitialized=!1,this.isPoisonInitialized=!1,this.isPoisonSurfaceInitialized=!1,this.isWaterInitialized=!1,this.isDangerAreaInitialized=!1,this.mainBrickComponent=null,this.mainGrassComponent=null,this.mainLineComponent=null,this.mainPoisonComponent=null,this.mainPoisonSurfaceComponent=null,this.mainWaterComponent=null,this.mainDangerAreaComponent=null}}]),e}();v._RF.pop(),v._RF.push({},"4c04ffCcRhGsqEZlVWUHd8s","MapTransformer",void 0);var Sl,Cl,kl,wl,El,Tl,Al,Rl,Bl,Pl,_l,Ol,Ll,Dl,Il,Nl,Gl,Fl,Ml,zl,xl,Ul,Hl,jl,Vl,Wl,Kl,ql,Yl,Jl,Xl,Zl,Ql,$l,eu,tu,nu,iu,au,ou,ru,su,lu,uu,cu,hu=200,du=270,pu=function(){function e(){i(this,e)}return r(e,null,[{key:"getPointObject",value:function(e){var t=e.id,n=e.point,i=e.data,a=e.connect;return{id:t,point:{x:n.x*_o+14-hu,y:Oo-n.y*_o-14-du},data:i,connect:a}}},{key:"getPointObjectBHalfCoord",value:function(e){var t=e.id,n=e.point,i=e.data,a=e.connect;return{id:t,point:{x:n.x*_o/2-hu,y:Oo-n.y*_o/2-du},data:i,connect:a}}},{key:"getPolygonObject",value:function(e){var t=e.id,n=e.point,i=e.data,a=e.connect;return{id:t,point:n.map((function(e){var t=e.x,n=e.y;return{x:t*_o-hu,y:Oo-n*_o-du}})),data:i,connect:a}}},{key:"getDoublePolygon",value:function(e){var t=e.id,n=e.point,i=e.data,a=e.connect;return{id:t,point:n.map((function(e){var t=e.x,n=e.y;return{x:t*_o/2-hu,y:Oo-n*_o/2-du}})),data:i,connect:a}}},{key:"transformPointsFromMapToDrawAreaCoordinate",value:function(e){return e.map((function(e){var t=e.x,n=e.y;return{x:t*_o-hu,y:Oo-n*_o-du}}))}}]),e}();v._RF.pop(),v._RF.push({},"75ad9uPflhLL4N96NmHF2Sk","GameObjects",void 0);var vu,yu=y.ccclass,fu=y.property,mu=(Sl=yu("GameObjects"),Cl=fu(J),kl=fu(J),wl=fu(J),El=fu(J),Tl=fu(J),Al=fu(J),Rl=fu(J),Bl=fu(J),Pl=fu(J),_l=fu(J),Ol=fu(J),Ll=fu(J),Dl=fu(J),Il=fu(J),Nl=fu(J),Gl=fu(J),Fl=fu({tooltip:"Use batch draw all map lines."}),Ml=fu({tooltip:"Use batch draw all poison pools."}),zl=fu({tooltip:"Use batch draw all poison surfaces."}),xl=fu({tooltip:"Use batch draw all water pools."}),Ul=fu({tooltip:"Use batch draw all danger areas."}),Sl((Vl=e((jl=function(e){t(c,e);var u=n(c);function c(){var e;i(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e=u.call.apply(u,[this].concat(n)),a(e,"dogePrefab",Vl,o(e)),a(e,"spiderPrefab",Wl,o(e)),a(e,"beePrefab",Kl,o(e)),a(e,"beehivePrefab",ql,o(e)),a(e,"bigBeePrefab",Yl,o(e)),a(e,"thornPrefab",Jl,o(e)),a(e,"thornBallPrefab",Xl,o(e)),a(e,"airFanPrefab",Zl,o(e)),a(e,"grassPrefab",Ql,o(e)),a(e,"balloonPrefab",$l,o(e)),a(e,"brickPrefab",eu,o(e)),a(e,"arenaPrefab",tu,o(e)),a(e,"woodPrefab",nu,o(e)),a(e,"connectPrefab",iu,o(e)),a(e,"mapLinePrefab",au,o(e)),a(e,"crossingBeeLinePrefab",ou,o(e)),a(e,"batchMapLines",ru,o(e)),a(e,"batchPoisonPool",su,o(e)),a(e,"batchPoisonSurface",lu,o(e)),a(e,"batchWaterPool",uu,o(e)),a(e,"batchDangerArea",cu,o(e)),e.batchObjects=new bl,e.objects=new Map,e}return r(c,[{key:"spawnObjects",value:function(e){for(var t=e.map,n=l(t).reverse(),i=0;i<n.length;i++){var a=n[i],o=null;(o=a&&Array.isArray(a.point)?this.spawnPolygonObjectType(a):this.spawnPointObjectType(a))&&this.objects.set(i,o)}var r,u=s(t);try{for(u.s();!(r=u.n()).done;){var c=r.value;if(!Array.isArray(c.point)){var h=c;if(h.id===ba.BALLOON){var d=pu.getPointObject(h).point,p=d.x,v=d.y;if(!h.connect)continue;var y=this.findObjectIndex(t,h.connect);if(!y)continue;this.spawnBalloon(p,v,y)}if(c.id===ba.CONNECT){if(!c.connect)return null;if(!Array.isArray(c.connect.point))return null;var f=pu.getDoublePolygon(c.connect),m=pu.getPointObjectBHalfCoord(c).point,g=m.x,b=m.y;this.spawnConnect(g,b,f.point)}}}}catch(e){u.e(e)}finally{u.f()}this.batchObjects.batchDraw(),this.sortObjects(),this.sleepObjects()}},{key:"spawnPolygonObjectType",value:function(e){var t=pu.getPolygonObject(e).point;if(0===t.length)return null;switch(e.id){case ba.BRICK:return this.spawnBrick(t);case ba.GRASS:return this.spawnGrass(t,!1);case ba.GRASS_DARK:return this.spawnGrass(t,!0);case ba.LINE:return this.spawnLine(t);case ba.POISON:return this.spawnPoison(t);case ba.POISON_SURFACE:return this.spawnPoisonSurface(t);case ba.WATER:return this.spawnWater(t);case ba.DANGER_AREA:return this.spawnDangerAreaNormal(t);case ba.CONNECT:return null;case ba.WOOD:var n=pu.getDoublePolygon(e);return this.spawnWood(n.point);case ba.COLLIDER:var i=pu.getDoublePolygon(e);return this.spawnCollider(0,0,i.point);case ba.STROKE:default:return null}}},{key:"spawnPointObjectType",value:function(e){var t=pu.getPointObject(e).point,n=t.x,i=t.y;switch(e.id){case ba.DOGE_A:return this.spawnDoge({x:n,y:i});case ba.DOGE_B:return this.spawnDoge({x:n,y:i,right:!0});case ba.SPIDER:return this.spawnSpider(n,i);case ba.BEEHIVE_A:case ba.BEEHIVE_C:return this.spawnBeehive(n,i);case ba.BEEHIVE_B:case ba.BEEHIVE_D:return this.spawnBeehive(n,i,!0);case ba.THORN_BALL:return this.spawnThornBall(n,i);case ba.BIG_BEE:return this.spawnBigBee(n,i);case ba.WATER_SURFACE:return this.spawnWaterSurface(n,i);case ba.THORN:var a,o=(null===(a=e.data)||void 0===a?void 0:a.a)||0;return this.spawnThorn(n,i,o);case ba.AIR_FAN:var r,s=(null===(r=e.data)||void 0===r?void 0:r.a)||0;return this.spawnAirFan(n,i,s);default:return null}}},{key:"spawnObjectForDevTools",value:function(e){this.spawnPointObjectType(e),this.sortObjects()}},{key:"spawnPolygonObjectForDevTools",value:function(e){this.spawnPolygonObjectType(e),this.sortObjects()}},{key:"addObject",value:function(e){this.node.insertChild(e,this.getSiblingIndex(e.name))}},{key:"sortObjects",value:function(){var e=l(this.node.children);e.sort((function(e,t){return(ga[e.name]||0)-(ga[t.name]||0)})),e.forEach((function(e,t){e.setSiblingIndex(t)}))}},{key:"findObjectIndex",value:function(e,t){var n=this,i=e.findIndex((function(e){return JSON.stringify(e)===JSON.stringify(t)}));if(e[i]){var a=e[i].point;if(a&&!Array.isArray(a)){var o=pu.getPointObject(e[i]).point,r=o.x,s=o.y,l=this.node.children.find((function(e){var i=e.position;return i.x===r&&i.y===s&&e.name===n.getObjNameFromId(t.id)}));if(l)return l}}}},{key:"getObjNameFromId",value:function(e){switch(e){case ba.DOGE_A:case ba.DOGE_B:return ha.DOGE;case ba.SPIDER:return ha.SPIDER;case ba.BEEHIVE_A:case ba.BEEHIVE_B:case ba.BEEHIVE_C:case ba.BEEHIVE_D:return ha.BEEHIVE;case ba.THORN_BALL:return ha.THORN_BALL;case ba.BIG_BEE:return ha.BIG_BEE;case ba.WATER_SURFACE:return ha.WATER_SURFACE;case ba.THORN:return ha.THORN;case ba.AIR_FAN:return ha.AIR_FAN;case ba.BRICK:return ha.BRICK;case ba.GRASS:return ha.GRASS;case ba.GRASS_DARK:return ha.GRASS_DARK;case ba.LINE:return ha.MAP_LINE;case ba.POISON:return ha.POISON;case ba.POISON_SURFACE:return ha.POISON_SURFACE;case ba.WATER:return ha.WATER;case ba.DANGER_AREA:return ha.DANGER_AREA;case ba.WOOD:return ha.WOOD;case ba.COLLIDER:return ha.COLLIDER;default:return""}}},{key:"getSiblingIndex",value:function(e){var t=this.node.children,n=ga[e];if(!n)return t.length+1;var i=t.map((function(e){return ga[e.name]})),a=i.findIndex((function(e){return n<(e||0)}));return a<0?i.length+1:a}},{key:"clearObjects",value:function(){this.node.destroyAllChildren(),this.node.removeAllChildren(),this.batchObjects.clearObjects()}},{key:"stopBeeBehavior",value:function(){var e,t=this.node.getComponentsInChildren(Eo),n=s(t);try{for(n.s();!(e=n.n()).done;){e.value.state=ca.IDLE}}catch(e){n.e(e)}finally{n.f()}}},{key:"sleepObjects",value:function(){var e,t=this.getComponentsInChildren(_a),n=s(t);try{for(n.s();!(e=n.n()).done;){e.value.sleep()}}catch(e){n.e(e)}finally{n.f()}var i,a=this.node.getComponentsInChildren(Er),o=s(a);try{for(o.s();!(i=o.n()).done;){i.value.state=ca.IDLE}}catch(e){o.e(e)}finally{o.f()}}},{key:"wakeUpObjects",value:function(){var e,t=this.getComponentsInChildren(_a),n=s(t);try{for(n.s();!(e=n.n()).done;){e.value.wake()}}catch(e){n.e(e)}finally{n.f()}}},{key:"spawnBeehive",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=X(this.beehivePrefab);return i instanceof R?(i.name=ha.BEEHIVE,i.setPosition(e,t),i.setScale(n?-1:1,1),i.attr({isRightSide:n}),this.addObject(i),i):null}},{key:"spawnBees",value:function(){var e,t=this.node.getComponentsInChildren(Qo),n=1===t.length?8:4,i=s(t);try{for(i.s();!(e=i.n()).done;){var a=e.value;a.node.attr({totalPathSeekers:Math.floor(n/3)});for(var o=0;o<n;o++){var r=this.spawnBee();r&&a.releaseBee(r)}}}catch(e){i.e(e)}finally{i.f()}this.sortObjects()}},{key:"spawnBee",value:function(){var e=X(this.beePrefab);return e instanceof R?(e.name=ha.BEE,this.addObject(e),e.setSiblingIndex(999),e):null}},{key:"spawnCrossingBees",value:function(e){for(var t=this,n=e.beeSpeed,i=e.spawnRandOffset,a=void 0===i?80:i,o=e.playerWorldX,r=e.playerWorldY,s=e.spawnWorldX,l=e.spawnWorldY,u=e.count,c=void 0===u?[1,2]:u,h=e.targetOffsetMultiplier,d=void 0===h?0:h,p=j.randomRangeInt(c[0],c[1]),v=[],y=s<o,f=function(){var e=t.spawnBee();if(!e)throw new Error("Could not spawn bee");var i=e.getComponent(Eo);if(!i)throw new Error("Bee component not found");t.addObject(e),i.isSpawnLeftSide=!y;var u=j.randomRangeInt(-a,a),c=j.randomRangeInt(-a,a),h=s+u,p=l+c,f=e.worldPosition.z;e.setWorldPosition(h,p,f);var m=new x(o+u*d-h,r+c*d-p);i.rotateToVector(m),i.fly(m.normalize().multiplyScalar(n)),t.scheduleOnce((function(){i.setRole(ua.NORMAL),i.setState(ca.ATTACKING),i.followInstructions()})),v.push(i)},m=0;m<p;m++)f();return this.sortObjects(),v}},{key:"spawnCrossingBeeLine",value:function(e){var t=e.startX,n=e.startY,i=e.endX,a=e.endY,o=e.thickness,r=e.spriteType,s=X(this.crossingBeeLinePrefab);if(!(s instanceof R))throw new Error("Could not spawn crossing bee line");s.name=ha.CROSSING_BEE_LINE;var l=s.getComponent(Rs);if(!l)throw new Error("CrossingBeeLine component not found");return this.addObject(s),l.setSpriteType(r),l.setStartPosition(t,n),l.setEndPosition(i,a),l.thickness=o,this.sortObjects(),l}},{key:"checkAllBeeDie",value:function(){var e=this.node.getComponentsInChildren(Eo),t=this.node.getComponentsInChildren(Er),n=e.some((function(e){return e.enabled})),i=t.some((function(e){return e.enabled}));return!n&&!i}},{key:"spawnDoge",value:function(e){var t=e.x,n=e.y,i=e.right,a=void 0!==i&&i,o=e.isWorldPosition,r=void 0!==o&&o,s=e.rigidBodyConfig,l=void 0===s?{}:s,u=X(this.dogePrefab);if(!(u instanceof R))return null;u.name=ha.DOGE,r||u.setPosition(t,n),u.setScale(a?-1:1,1),this.addObject(u),u.setSiblingIndex(999),r&&u.setWorldPosition(t,n,u.worldPosition.z);var c=l.gravityScale,h=void 0===c?1:c,d=u.getComponent(M);if(!d)throw new Error("Could not get doge rigidBody");return d.gravityScale=h,u}},{key:"spawnSpider",value:function(e,t){var n=X(this.spiderPrefab);return n instanceof R?(n.name=ha.SPIDER,n.setPosition(e,t),this.addObject(n),n):null}},{key:"spawnBigBee",value:function(e,t){var n=X(this.bigBeePrefab);return n instanceof R?(n.name=ha.BIG_BEE,n.setPosition(e,t),this.addObject(n),n):null}},{key:"reviveBigBees",value:function(){var e,t=this.node.getComponentsInChildren(Er),n=s(t);try{for(n.s();!(e=n.n()).done;){e.value.state=ca.ATTACKING}}catch(e){n.e(e)}finally{n.f()}}},{key:"spawnBrick",value:function(e){if(!this.batchObjects.isBrickInitialized){var t=this.spawnBrickNormal(e);if(!t)return null;var n=t.getComponent(Dr);return n?(this.batchObjects.isBrickInitialized=!0,n.useBatch&&this.batchObjects.assignMainBrickComponent(n),this.addObject(t),t):null}return this.batchObjects.isBrickBatchingEnabled()?(this.batchObjects.updateBrickPolygon(e),null):this.spawnBrickNormal(e)}},{key:"spawnBrickNormal",value:function(e){var t=X(this.brickPrefab);return t instanceof R?(t.name=ha.BRICK,t.attr({polygon:e}),this.addObject(t),t):null}},{key:"spawnWood",value:function(e){var t=X(this.woodPrefab);if(!(t instanceof R))return null;t.name=ha.WOOD;var n=t.getComponent($r);if(!n)return console.warn("Pattern not found"),null;n.savePolygonPoints(e.map((function(e){return{x:e.x,y:e.y}}))),this.addObject(t),n.draw(e),n.applyCollider(e),n.setRigidBodyType(F.Dynamic);var i=this.spawnWoodStroke(e);return i.setParent(t,!1),t.addChild(i),t}},{key:"spawnWoodStroke",value:function(e){var t=new R;t.name=ha.WOOD_STROKE,t.layer=33554432,this.addObject(t);var n=t.addComponent(P);n.lineWidth=4;var i=new _;if(_.fromHEX(i,"#0d0d15"),n.strokeColor=i,!e[0])return t;n.moveTo(e[0].x,e[0].y);var a,o=s(e.slice(1));try{for(o.s();!(a=o.n()).done;){var r=a.value;n.lineTo(r.x,r.y)}}catch(e){o.e(e)}finally{o.f()}return n.close(),n.stroke(),t}},{key:"spawnGrass",value:function(e,t){if(!this.batchObjects.isGrassInitialized){var n=this.spawnGrassNormal(e,!1);if(!n)return null;var i=n.getComponent(yl);return i?(this.batchObjects.isGrassInitialized=!0,i.useBatch&&this.batchObjects.assignMainGrassComponent(i),this.addObject(n),n):null}var a=t?ha.GRASS_DARK:ha.GRASS;return this.batchObjects.isGrassBatchingEnabled()?(this.batchObjects.updateGrassPolygon(a,e),null):this.spawnGrassNormal(e,t)}},{key:"spawnGrassNormal",value:function(e,t){var n=X(this.grassPrefab);return n instanceof R?(n.name=t?ha.GRASS_DARK:ha.GRASS,n.attr({polygon:e,isDark:t}),this.addObject(n),n):null}},{key:"spawnPoison",value:function(e){if(!this.batchPoisonPool)return this.spawnPoisonNormal(e);if(!this.batchObjects.isPoisonInitialized){var t=X(this.arenaPrefab);if(!(t instanceof R))return null;t.name=ha.POISON,this.addObject(t);var n=t.addComponent(is);return n.useBatch=!0,this.batchObjects.isPoisonInitialized=!0,this.batchObjects.assignMainPoisonComponent(n),this.batchObjects.updatePoisonPolygon(e),t}return this.batchObjects.updatePoisonPolygon(e),null}},{key:"spawnPoisonNormal",value:function(e){var t=X(this.arenaPrefab);return t instanceof R?(t.name=ha.POISON,this.addObject(t),t.addComponent(is).polygon=e,t):null}},{key:"spawnPoisonSurface",value:function(e){if(!this.batchPoisonPool)return this.spawnPoisonSurfaceNormal(e);if(!this.batchObjects.isPoisonSurfaceInitialized){var t=X(this.arenaPrefab);if(!(t instanceof R))return null;t.name=ha.POISON_SURFACE,this.addObject(t);var n=t.addComponent(os);return n.useBatch=!0,this.batchObjects.isPoisonSurfaceInitialized=!0,this.batchObjects.assignMainPoisonSurfaceComponent(n),this.batchObjects.updatePoisonSurfacePolygon(e),t}return this.batchObjects.updatePoisonSurfacePolygon(e),null}},{key:"spawnPoisonSurfaceNormal",value:function(e){var t=X(this.arenaPrefab);return t instanceof R?(t.name=ha.POISON_SURFACE,this.addObject(t),t.addComponent(os).polygon=e,t):null}},{key:"spawnWater",value:function(e){if(!this.batchWaterPool)return this.spawnWaterNormal(e);if(!this.batchObjects.isWaterInitialized){var t=X(this.arenaPrefab);if(!(t instanceof R))return null;t.name=ha.WATER,this.addObject(t);var n=t.addComponent(ls);return n.useBatch=!0,t.addComponent(B).opacity=.75,this.batchObjects.isWaterInitialized=!0,this.batchObjects.assignMainWaterComponent(n),this.batchObjects.updateWaterPolygon(e),t}return this.batchObjects.updateWaterPolygon(e),null}},{key:"spawnWaterNormal",value:function(e){var t=X(this.arenaPrefab);return t instanceof R?(t.name=ha.WATER,this.addObject(t),t.addComponent(ls).polygon=e,t.addComponent(B).opacity=.75,t):null}},{key:"spawnDangerAreaNormal",value:function(e){var t=X(this.arenaPrefab);if(!(t instanceof R))return null;t.name=ha.DANGER_AREA;var n=t.getComponent(Yr);if(!n)return console.warn("GraphicsPattern not found"),null;this.addObject(t),n.setColor("#fc03036d"),n.draw(e);var i=t.addComponent(M);return i.type=F.Static,i.group=Sa.DEFAULT,t.addComponent(ee),n.applyCollider(e),t}},{key:"spawnWaterSurface",value:function(e,t){var n=new R;return n.name=ha.WATER_SURFACE,n.layer=this.node.layer,n.setPosition(e,t),Ue.loadSpriteFrameAsync(ka.WATER_SURFACE_FRAME).then((function(e){if(n.isValid){if(!e)throw new Error("spawnWaterSurface: SpriteFrame not found");n.addComponent(S).spriteFrame=e}})).catch((function(e){console.warn("spawnWaterSurface",e)})),this.addObject(n),n}},{key:"spawnThorn",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=X(this.thornPrefab);return i instanceof R?(i.name=ha.THORN,i.angle=n,i.setPosition(e,t),this.addObject(i),i):null}},{key:"spawnThornBall",value:function(e,t){var n=X(this.thornBallPrefab);return n instanceof R?(n.name=ha.THORN_BALL,n.setPosition(e,t),this.addObject(n),n):null}},{key:"spawnAirFan",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=X(this.airFanPrefab);if(!(i instanceof R))return null;i.name=ha.AIR_FAN,i.angle=n,i.setPosition(e,t),i.attr({id:ba.AIR_FAN});var a=i.getComponent(Da);return a?(a.setForceDirection(n),this.addObject(i),i):(console.warn("AirFan not found"),null)}},{key:"spawnCollider",value:function(e,t,n){var i=new R;i.name=ha.COLLIDER,this.addObject(i),i.setPosition(e,t);var a=i.addComponent(M);a.type=F.Static,a.group=Sa.MAIN_OBJECT;var o=i.addComponent(ee);return o.restitution=.2,o.points=n.map((function(e){var t=e.x,n=e.y;return new x(t,n)})),o.apply(),i}},{key:"spawnLine",value:function(e){if(!this.batchMapLines)return this.spawnLineNormal(e);if(!this.batchObjects.isLineInitialized){var t=this.spawnLineNormal(e);if(!t)return null;this.addObject(t);var n=t.getComponent(gl);return n?(this.batchObjects.isLineInitialized=!0,this.batchObjects.assignMainLineComponent(n),t):null}return this.batchObjects.updateMapLine(e),null}},{key:"spawnLineNormal",value:function(e){var t=X(this.mapLinePrefab);return t instanceof R?t.getComponent(gl)?(t.name=ha.MAP_LINE,t.attr({polygon:e}),this.addObject(t),t):(console.warn("MapLine not found"),null):null}},{key:"spawnConnect",value:function(e,t,n){var i=this.getComponentsInChildren($r).find((function(e){var t=e.getPolygonPoints();if(t.length===n.length){for(var i=0;i<n.length;i++){var a=t[i]||{x:0,y:0},o=a.x,r=a.y,s=n[i]||{x:0,y:0},l=s.x,u=s.y;if(o!==l||r!==u)return}return!0}})),a=X(this.connectPrefab);if(!(a instanceof R))return null;if(a.setPosition(e,t),this.node.insertChild(a,this.getSiblingIndex(a.name)),i){var o=a.getWorldPosition(),r=o.x,s=o.y,l=i.node.getWorldPosition(),u=l.x,c=l.y,h=a.getComponent(W);h.connectedBody=i.node.getComponent(M),h.connectedAnchor=new x(r-u,s-c),h.enabled=!1,h.enabled=!0}}},{key:"spawnBalloon",value:function(e,t,n){var i=X(this.balloonPrefab);if(!(i instanceof R))return null;i.name=ha.BALLOON,i.setPosition(e,t);var a=i.getComponent(ao);if(!a)return console.warn("Balloon not found"),null;var o=a.connectToDoge(n);return this.addObject(i),o&&this.addObject(o.node),i}},{key:"getRandomDogeToBee",value:function(){if(!this.node.parent)return null;var e=this.node.parent.getComponentsInChildren(rl),t=e.length,n=e[Math.floor(Math.random()*t)];return n||null}},{key:"getNearestDogeToBee",value:function(e){if(!this.node.parent)return null;var t=this.node.parent.getComponentsInChildren(rl);if(0===(t=t.filter((function(e){return!e.isCantBeTargeted()}))).length)return null;t.sort((function(t,n){return x.distance(t.node.worldPosition,e.node.worldPosition)-x.distance(n.node.worldPosition,e.node.worldPosition)}));var n=t[0];return n||null}},{key:"getDoges",value:function(e){if(!this.node.parent)return[];var t=this.node.parent.getComponentsInChildren(rl);return t=t.filter((function(t){return t!==e}))}}]),c}(b)).prototype,"dogePrefab",[Cl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Wl=e(jl.prototype,"spiderPrefab",[kl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Kl=e(jl.prototype,"beePrefab",[wl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ql=e(jl.prototype,"beehivePrefab",[El],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Yl=e(jl.prototype,"bigBeePrefab",[Tl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Jl=e(jl.prototype,"thornPrefab",[Al],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Xl=e(jl.prototype,"thornBallPrefab",[Rl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Zl=e(jl.prototype,"airFanPrefab",[Bl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ql=e(jl.prototype,"grassPrefab",[Pl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$l=e(jl.prototype,"balloonPrefab",[_l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),eu=e(jl.prototype,"brickPrefab",[Ol],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),tu=e(jl.prototype,"arenaPrefab",[Ll],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),nu=e(jl.prototype,"woodPrefab",[Dl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),iu=e(jl.prototype,"connectPrefab",[Il],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),au=e(jl.prototype,"mapLinePrefab",[Nl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ou=e(jl.prototype,"crossingBeeLinePrefab",[Gl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ru=e(jl.prototype,"batchMapLines",[Fl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),su=e(jl.prototype,"batchPoisonPool",[Ml],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),lu=e(jl.prototype,"batchPoisonSurface",[zl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),uu=e(jl.prototype,"batchWaterPool",[xl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),cu=e(jl.prototype,"batchDangerArea",[Ul],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Hl=jl))||Hl);v._RF.pop(),v._RF.push({},"97f21hkFElI0YdBDCgAkt9+","Hint",void 0);var gu,bu,Su,Cu,ku,wu=(0,y.ccclass)("Hint")(vu=function(e){t(o,e);var a=n(o);function o(){var e;i(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=a.call.apply(a,[this].concat(n))).hintLine=null,e.hintHand=null,e.isHintShown=!1,e}return r(o,[{key:"showHint",value:function(e,t){this.isHintShown||(this.isHintShown=!0,this.hintLine=this.createHintLine(),this.hintLine.active=!0,this.drawHintLine(this.hintLine,e),t&&this.showHand(e))}},{key:"drawHintLine",value:function(e,t){var n=e.getComponent(P);if(!n)throw new Error("drawHintLine: Graphics is null");n.clear(),n.moveTo(t[0].x,t[0].y);var i,a=s(t.slice(1));try{for(a.s();!(i=a.n()).done;){var o=i.value;n.lineTo(o.x,o.y)}}catch(e){a.e(e)}finally{a.f()}n.stroke()}},{key:"hideHint",value:function(){this.hintLine&&(this.hintLine.active=!1),this.hintHand&&(re.stopAllByTarget(this.hintHand),this.hintHand.active=!1)}},{key:"showHand",value:function(e){var t=this;this.hintHand=this.createHintHand(e),Ue.loadSpriteFrameAsync(ka.IC_HAND_FRAME).then((function(n){if(!n)throw new Error("showHand: SpriteFrame is null");t.addSpriteToHand(n),t.runHandHintAnimation(e)})).catch((function(e){console.error(e),t.removeHintHand()}))}},{key:"addSpriteToHand",value:function(e){var t;this.hintHand&&(this.hintHand.addComponent(S).spriteFrame=e,null===(t=this.hintHand.getComponent(q))||void 0===t||t.setAnchorPoint(.15,.9))}},{key:"runHandHintAnimation",value:function(e){var t=this;if(this.hintHand){for(var n=ne(this.hintHand),i=[],a=1;a<e.length;a++){var o=e[a-1],r=e[a],s=o.x-r.x,l=o.y-r.y,u=Math.sqrt(s*s+l*l),c=ne(this.hintHand).to(u/250,{position:new T(r.x,r.y)});i.push(c)}var h=ne(this.hintHand).delay(.5).call((function(){t.hintHand&&t.hintHand.setPosition(e[0].x,e[0].y)}));i.push(h),n.sequence.apply(n,i).repeatForever().start()}}},{key:"getIsHintShow",value:function(){return this.isHintShown}},{key:"reset",value:function(){this.isHintShown=!1,this.removeHintLine(),this.removeHintHand()}},{key:"createHintLine",value:function(){if(this.hintLine)return this.hintLine;var e=new R,t=e.addComponent(P);t.lineWidth=10,t.lineCap=P.LineCap.ROUND,t.lineJoin=P.LineJoin.ROUND;var n=new _;return _.fromHEX(n,"#fc03036d"),t.strokeColor=n,this.node.insertChild(e,0),e}},{key:"createHintHand",value:function(e){if(this.hintHand)return this.hintHand;var t=new R;return t.setPosition(e[0].x,e[0].y),this.hintHand=t,this.node.addChild(t),t}},{key:"removeHintLine",value:function(){this.hintLine&&(this.hintLine.getComponent(P).clear(),this.hintLine.destroyAllChildren(),this.hintLine.removeAllChildren(),this.hintLine.destroy(),this.hintLine=null)}},{key:"removeHintHand",value:function(){this.hintHand&&(this.hintHand.destroyAllChildren(),this.hintHand.removeAllChildren(),this.hintHand.destroy(),this.hintHand=null)}}]),o}(b))||vu;v._RF.pop(),v._RF.push({},"33281kEO4dMXLCvmfkrwqQM","CollisionDetectLine",void 0);var Eu,Tu,Au,Ru,Bu,Pu,_u,Ou,Lu,Du,Iu=y.ccclass,Nu=y.property,Gu=(gu=Iu("CollisionDetectLine"),bu=Nu(P),gu((ku=e((Cu=function(e){t(l,e);var s=n(l);function l(){var e;i(this,l);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e=s.call.apply(s,[this].concat(n)),a(e,"graphic",ku,o(e)),e}return r(l,[{key:"onLoad",value:function(){this.graphic=this.getComponent(P),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){Le.lazyValidateProperties(this)}},{key:"drawFromTo",value:function(e,t){this.graphic.clear(),this.graphic.moveTo(e.x,e.y),this.graphic.lineTo(t.x,t.y),this.graphic.stroke()}}]),l}(_a)).prototype,"graphic",[bu],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Su=Cu))||Su);v._RF.pop(),v._RF.push({},"00eeawrUitLxLgSANaGHhcv","LineDrawer",void 0);var Fu=y.ccclass,Mu=y.property,zu=y.executionOrder,xu=(Eu=Fu("LineDrawer"),Tu=zu(3),Au=Mu(J),Ru=Mu(J),Bu=Mu(g),Eu(Pu=Tu((Ou=e((_u=function(e){t(u,e);var s=n(u);function u(){var e;i(this,u);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e=s.call.apply(s,[this].concat(n)),a(e,"linePrefab",Ou,o(e)),a(e,"collisionDetectLinePrefab",Lu,o(e)),a(e,"minDistance",Du,o(e)),e.lastUIPos=null,e.currentLine=null,e.collisionDetectLine=null,e.isColliding=!1,e}return r(u,[{key:"beginDraw",value:function(e){this.createLine(),this.createCollisionDetectLine(),this.initLine(),this.lastUIPos=null,this.isColliding=!1,this.draw(e)}},{key:"createLine",value:function(){var e=X(this.linePrefab);e instanceof R&&(e.name=ha.DRAW_LINE,e.getComponent(P)&&(this.node.addChild(e),this.currentLine=e))}},{key:"createCollisionDetectLine",value:function(){if(this.currentLine){var e=X(this.collisionDetectLinePrefab);if(e instanceof R){var t=e.getComponent(P);if(t){var n=this.currentLine.getComponent(P);if(n){var i=n.lineWidth,a=n.strokeColor;t.strokeColor=new _(a.r,a.g,a.b,128),t.lineWidth=i,this.node.addChild(e),this.collisionDetectLine=e}}}}}},{key:"initLine",value:function(){var e,t=null===(e=this.currentLine)||void 0===e?void 0:e.getComponent(Io);t&&(t.sleep(),t.init())}},{key:"draw",value:function(e){var t,n,i=this;if(e&&this.currentLine&&this.collisionDetectLine){var a=this.currentLine.getComponent(Io);if(a){var o=this.collisionDetectLine.getComponent(Gu);if(o){var r=new T;null===(t=this.node.parent)||void 0===t||t.inverseTransformPoint(r,new T(e.x,e.y));var s=new x(r.x,r.y);if(this.isPointOverlapWithMap(e)){if(this.lastUIPos){var l=this.lastUIPos,u=l.x,c=l.y;this.node.inverseTransformPoint(r,new T(u,c));var h=new x(r.x,r.y);if(this.isColliding)o.drawFromTo(h,s);else{var d,p=this.isCurrentLineOverlapWithMap(e,this.lastUIPos);if(p.sort((function(e,t){return null==i.lastUIPos?0:x.distance(e.point,i.lastUIPos)-x.distance(t.point,i.lastUIPos)})),!(null===(d=p[0])||void 0===d?void 0:d.point))return;this.isColliding=!0}}}else if(this.lastUIPos&&this.isCurrentLineOverlapWithMap(e,this.lastUIPos).length>0){var v=this.lastUIPos,y=v.x,f=v.y;this.node.inverseTransformPoint(r,new T(y,f));var m=new x(r.x,r.y);o.drawFromTo(m,s)}else{if(!this.lastUIPos){this.lastUIPos=e.clone();var g=s.x,b=s.y;a.storePoints(g,b)}var S=this.lastUIPos,C=S.x,k=S.y;null===(n=this.node.parent)||void 0===n||n.inverseTransformPoint(r,new T(C,k));var w=new x(r.x,r.y),E=w.x,A=w.y,R=s.x,B=s.y,_=E-R,O=A-B;if(!(_*_+O*O<this.minDistance*this.minDistance)){var L=Math.sqrt(_*_+O*O);this.lastUIPos=e.clone(),a.drawTo(E,A,R,B),a.storePoints(R,B);var D=this.collisionDetectLine.getComponent(P);return null==D||D.clear(),this.isColliding=!1,L}}}}}}},{key:"isPointOverlapWithMap",value:function(e){return this.getCollision(e).length>0}},{key:"isCurrentLineOverlapWithMap",value:function(e,t){var n=this.getParallelLines(t,e,2),i=n.leftLine,a=n.rightLine,o=se.instance.raycast(t,e,le.All).filter((function(e){return!e.collider.sensor})).filter((function(e){var t;return"rope"!==(null===(t=e.collider.node.parent)||void 0===t?void 0:t.name)})),r=se.instance.raycast(i.p1,i.p2,le.All).filter((function(e){return!e.collider.sensor})).filter((function(e){var t;return"rope"!==(null===(t=e.collider.node.parent)||void 0===t?void 0:t.name)})),s=se.instance.raycast(a.p1,a.p2,le.All).filter((function(e){return!e.collider.sensor})).filter((function(e){var t;return"rope"!==(null===(t=e.collider.node.parent)||void 0===t?void 0:t.name)}));return[].concat(l(o),l(r),l(s))}},{key:"endDraw",value:function(){if(this.currentLine&&this.collisionDetectLine){var e=this.currentLine.getComponent(Io);if(e){e.addPhysics(),e.wake();var t=this.collisionDetectLine.getComponent(P);t?(t.clear(),this.lastUIPos=null,this.isColliding=!1,this.currentLine=null):console.warn("Graphics component not found")}else console.warn("Line component not found")}}},{key:"deActivePhysics",value:function(){var e,t=null===(e=this.currentLine)||void 0===e?void 0:e.getComponent(Io);t&&(
//! do not sort, it will cause bug
t.deActiveColliders(),t.sleep())}},{key:"clearLines",value:function(){this.node.destroyAllChildren(),this.node.removeAllChildren()}},{key:"getParallelLines",value:function(e,t,n){var i=t.x-e.x,a=t.y-e.y,o=j.Vec2.distance(e,t),r=i/o,s=a/o,l=new x(e.x-s*n,e.y+r*n),u=new x(e.x+s*n,e.y-r*n);return{leftLine:{p1:l,p2:new x(l.x+i,l.y+a)},rightLine:{p1:u,p2:new x(u.x+i,u.y+a)}}}},{key:"getCollision",value:function(e){return se.instance.testAABB(new j.Rect(e.x-2,e.y-2,4,4)).filter((function(e){return!e.sensor})).filter((function(e){var t;return"rope"!==(null===(t=e.node.parent)||void 0===t?void 0:t.name)})).filter((function(t){if(t instanceof ee){var n=new T;return t.node.inverseTransformPoint(n,new T(e.x,e.y)),ue.polygonCircle(t.points,new x(n.x,n.y),2)}if(t instanceof Z){var i=t.node.getWorldPosition(),a=i.x,o=i.y;return ue.circleCircle(new x(a,o+t.worldPosition.y),t.radius,new x(e.x,e.y),2)}return!t.sensor}))}}]),u}(b)).prototype,"linePrefab",[Au],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Lu=e(_u.prototype,"collisionDetectLinePrefab",[Ru],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Du=e(_u.prototype,"minDistance",[Bu],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),Pu=_u))||Pu)||Pu);v._RF.pop(),v._RF.push({},"463cfEelRVL4KYgc4n5FJNz","Map",void 0);var Uu,Hu=[{id:1,map:1,type:1},{id:2,map:2,type:1},{id:3,map:3,type:1},{id:4,map:8,type:1},{id:5,map:9,type:1},{id:6,map:16,type:1},{id:7,map:4,type:1},{id:8,map:7,type:1},{id:9,map:6,type:1},{id:10,map:18,type:1},{id:11,map:10,type:2},{id:12,map:11,type:2},{id:13,map:12,type:2},{id:14,map:13,type:2},{id:15,map:14,type:2},{id:16,map:15,type:2},{id:17,map:5,type:2},{id:18,map:17,type:2},{id:19,map:19,type:2},{id:20,map:20,type:2},{id:21,map:21,type:3},{id:22,map:22,type:3},{id:23,map:23,type:3},{id:24,map:24,type:3},{id:25,map:25,type:3},{id:26,map:26,type:3},{id:27,map:27,type:3},{id:28,map:28,type:3},{id:29,map:29,type:3},{id:30,map:30,type:3},{id:31,map:31,type:4},{id:32,map:32,type:4},{id:33,map:33,type:4},{id:34,map:34,type:4},{id:35,map:35,type:4},{id:36,map:36,type:4},{id:37,map:37,type:4},{id:38,map:38,type:4},{id:39,map:39,type:4},{id:40,map:40,type:4},{id:41,map:41,type:5},{id:42,map:42,type:5},{id:43,map:43,type:5},{id:44,map:44,type:5},{id:45,map:45,type:5},{id:46,map:46,type:5},{id:47,map:47,type:5},{id:48,map:48,type:5},{id:49,map:49,type:5},{id:50,map:50,type:5},{id:51,map:51,type:6},{id:52,map:52,type:6},{id:53,map:53,type:6},{id:54,map:54,type:6},{id:55,map:55,type:6},{id:56,map:56,type:6},{id:57,map:57,type:6},{id:58,map:58,type:6},{id:59,map:59,type:6},{id:60,map:60,type:6},{id:61,map:61,type:7},{id:62,map:62,type:7},{id:63,map:63,type:7},{id:64,map:64,type:7},{id:65,map:65,type:7},{id:66,map:66,type:7},{id:67,map:67,type:7},{id:68,map:68,type:7},{id:69,map:69,type:7},{id:70,map:70,type:7},{id:71,map:71,type:8},{id:72,map:72,type:8},{id:73,map:73,type:8},{id:74,map:74,type:8},{id:75,map:75,type:8},{id:76,map:76,type:8},{id:77,map:77,type:8},{id:78,map:78,type:8},{id:79,map:79,type:8},{id:80,map:80,type:8},{id:81,map:81,type:9},{id:82,map:82,type:9},{id:83,map:83,type:9},{id:84,map:84,type:9},{id:85,map:85,type:9},{id:86,map:86,type:9},{id:87,map:87,type:9},{id:88,map:88,type:9},{id:89,map:89,type:9},{id:90,map:90,type:9},{id:91,map:91,type:10},{id:92,map:92,type:10},{id:93,map:93,type:10},{id:94,map:94,type:10},{id:95,map:95,type:10},{id:96,map:96,type:10},{id:97,map:97,type:10},{id:98,map:98,type:10},{id:99,map:99,type:10},{id:100,map:100,type:10},{id:101,map:101,type:11},{id:102,map:102,type:11},{id:103,map:103,type:11},{id:104,map:104,type:11},{id:105,map:105,type:11},{id:106,map:106,type:11},{id:107,map:107,type:11},{id:108,map:108,type:11},{id:109,map:109,type:11},{id:110,map:110,type:11},{id:111,map:111,type:12},{id:112,map:112,type:12},{id:113,map:113,type:12},{id:114,map:114,type:12},{id:115,map:115,type:12},{id:116,map:116,type:12},{id:117,map:117,type:12},{id:118,map:118,type:12},{id:119,map:119,type:12},{id:120,map:120,type:12},{id:121,map:121,type:13},{id:122,map:122,type:13},{id:123,map:123,type:13},{id:124,map:124,type:13},{id:125,map:125,type:13},{id:126,map:126,type:13},{id:127,map:127,type:13},{id:128,map:128,type:13},{id:129,map:129,type:13},{id:130,map:130,type:13},{id:131,map:131,type:14},{id:132,map:132,type:14},{id:133,map:133,type:14},{id:134,map:134,type:14},{id:135,map:135,type:14},{id:136,map:136,type:14},{id:137,map:137,type:14},{id:138,map:138,type:14},{id:139,map:139,type:14},{id:140,map:140,type:14},{id:141,map:141,type:15},{id:142,map:142,type:15},{id:143,map:143,type:15},{id:144,map:144,type:15},{id:145,map:145,type:15},{id:146,map:146,type:15},{id:147,map:147,type:15},{id:148,map:148,type:15},{id:149,map:149,type:15},{id:150,map:150,type:15},{id:151,map:184,type:16},{id:152,map:185,type:16},{id:153,map:186,type:16},{id:154,map:187,type:16},{id:155,map:188,type:16},{id:156,map:189,type:16},{id:157,map:190,type:16},{id:158,map:191,type:16},{id:159,map:192,type:16},{id:160,map:193,type:16},{id:161,map:194,type:17},{id:162,map:195,type:17},{id:163,map:196,type:17},{id:164,map:197,type:17},{id:165,map:198,type:17},{id:166,map:199,type:17},{id:167,map:200,type:17},{id:168,map:167,type:17},{id:169,map:168,type:17},{id:170,map:169,type:17},{id:171,map:170,type:18},{id:172,map:171,type:18},{id:173,map:172,type:18},{id:174,map:173,type:18},{id:175,map:174,type:18},{id:176,map:175,type:18},{id:177,map:176,type:18},{id:178,map:177,type:18},{id:179,map:178,type:18},{id:180,map:179,type:18},{id:181,map:180,type:19},{id:182,map:181,type:19},{id:183,map:182,type:19},{id:184,map:183,type:19},{id:185,map:151,type:19},{id:186,map:152,type:19},{id:187,map:153,type:19},{id:188,map:154,type:19},{id:189,map:155,type:19},{id:190,map:156,type:19},{id:191,map:157,type:20},{id:192,map:158,type:20},{id:193,map:159,type:20},{id:194,map:160,type:20},{id:195,map:161,type:20},{id:196,map:162,type:20},{id:197,map:163,type:20},{id:198,map:164,type:20},{id:199,map:165,type:20},{id:200,map:166,type:20},{id:201,map:201,type:21},{id:202,map:202,type:21},{id:203,map:203,type:21},{id:204,map:204,type:21},{id:205,map:205,type:21},{id:206,map:206,type:21},{id:207,map:207,type:21},{id:208,map:208,type:21},{id:209,map:209,type:21},{id:210,map:210,type:21},{id:211,map:211,type:22},{id:212,map:212,type:22},{id:213,map:213,type:22},{id:214,map:214,type:22},{id:215,map:215,type:22},{id:216,map:216,type:22},{id:217,map:217,type:22},{id:218,map:218,type:22},{id:219,map:219,type:22},{id:220,map:220,type:22},{id:221,map:221,type:23},{id:222,map:222,type:23},{id:223,map:223,type:23},{id:224,map:224,type:23},{id:225,map:225,type:23},{id:226,map:226,type:23},{id:227,map:227,type:23},{id:228,map:228,type:23},{id:229,map:229,type:23},{id:230,map:230,type:23},{id:231,map:231,type:24},{id:232,map:232,type:24},{id:233,map:233,type:24},{id:234,map:234,type:24},{id:235,map:235,type:24},{id:236,map:236,type:24},{id:237,map:237,type:24},{id:238,map:238,type:24},{id:239,map:239,type:24},{id:240,map:240,type:24},{id:241,map:241,type:25},{id:242,map:242,type:25},{id:243,map:243,type:25},{id:244,map:244,type:25},{id:245,map:245,type:25},{id:246,map:246,type:25},{id:247,map:247,type:25},{id:248,map:248,type:25},{id:249,map:249,type:25},{id:250,map:250,type:25},{id:251,map:251,type:26},{id:252,map:252,type:26},{id:253,map:253,type:26},{id:254,map:254,type:26},{id:255,map:255,type:26},{id:256,map:256,type:26},{id:257,map:257,type:26},{id:258,map:258,type:26},{id:259,map:259,type:26},{id:260,map:260,type:26},{id:261,map:261,type:27},{id:262,map:262,type:27},{id:263,map:263,type:27},{id:264,map:264,type:27},{id:265,map:265,type:27},{id:266,map:266,type:27},{id:267,map:267,type:27},{id:268,map:268,type:27},{id:269,map:269,type:27},{id:270,map:270,type:27},{id:271,map:271,type:28},{id:272,map:272,type:28},{id:273,map:273,type:28},{id:274,map:274,type:28},{id:275,map:275,type:28},{id:276,map:276,type:28},{id:277,map:277,type:28},{id:278,map:278,type:28},{id:279,map:279,type:28},{id:280,map:280,type:28},{id:281,map:281,type:29},{id:282,map:282,type:29},{id:283,map:283,type:29},{id:284,map:284,type:29},{id:285,map:285,type:29},{id:286,map:286,type:29},{id:287,map:287,type:29},{id:288,map:288,type:29},{id:289,map:289,type:29},{id:290,map:290,type:29},{id:291,map:291,type:30},{id:292,map:292,type:30},{id:293,map:293,type:30},{id:294,map:294,type:30},{id:295,map:295,type:30},{id:296,map:296,type:30},{id:297,map:297,type:30},{id:298,map:298,type:30},{id:299,map:299,type:30},{id:300,map:300,type:30},{id:301,map:301,type:31},{id:302,map:302,type:31},{id:303,map:303,type:31},{id:304,map:304,type:31},{id:305,map:305,type:31},{id:306,map:306,type:31},{id:307,map:307,type:31},{id:308,map:308,type:31},{id:309,map:309,type:31},{id:310,map:310,type:31},{id:311,map:311,type:32},{id:312,map:312,type:32},{id:313,map:313,type:32},{id:314,map:314,type:32},{id:315,map:315,type:32},{id:316,map:316,type:32},{id:317,map:317,type:32},{id:318,map:318,type:32},{id:319,map:319,type:32},{id:320,map:320,type:32},{id:321,map:321,type:33},{id:322,map:322,type:33},{id:323,map:323,type:33},{id:324,map:324,type:33},{id:325,map:325,type:33}];v._RF.pop(),v._RF.push({},"45df2RUUZZNhaXqOADOV0HC","MapLoader",void 0);var ju,Vu=(0,y.ccclass)("MapLoader")(Uu=function(e){t(o,e);var a=n(o);function o(){return i(this,o),a.apply(this,arguments)}return r(o,[{key:"paddingZero",value:function(e,t){return Array(t-e.length).fill("0").join("")+e}},{key:"getMapByLevel",value:function(e){var t=Hu.find((function(t){return t.id===e}));return t?t.map:1}},{key:"preloadLevel",value:function(e){var t=this.getMapByLevel(e),n=this.paddingZero(t.toString(),3);Q.preload("".concat(ka.MAP_JSON_PREFIX).concat(n),ce)}},{key:"loadLevel",value:function(e,t){var n=this.getMapByLevel(e),i=this.paddingZero(n.toString(),3);Q.load("".concat(ka.MAP_JSON_PREFIX).concat(i),ce,t)}},{key:"isLevelAlreadyLoaded",value:function(e){var t=this.getMapByLevel(e),n=this.paddingZero(t.toString(),3);return null!==Q.getInfoWithPath("".concat(ka.MAP_JSON_PREFIX).concat(n))}}]),o}(b))||Uu;v._RF.pop(),v._RF.push({},"8d3c7nuQGRNgpZcqAOCJY6O","InkCapacityController",void 0);var Wu,Ku=(0,y.ccclass)("InkCapacityController")(ju=function(e){t(o,e);var a=n(o);function o(){var e;i(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=a.call.apply(a,[this].concat(n))).maxInkLevel=0,e.currentInkLevel=0,e}return r(o,[{key:"init",value:function(e){var t=this.getDrawLength(e);this.maxInkLevel=t,this.currentInkLevel=t}},{key:"getCurrentInkLevel",value:function(){return Math.floor(this.currentInkLevel)}},{key:"removeInkLevel",value:function(e){var t=this.currentInkLevel-e;this.setInkLevel(t)}},{key:"setInkLevel",value:function(e){this.currentInkLevel=e,this.currentInkLevel<0&&(this.currentInkLevel=0),this.currentInkLevel>this.maxInkLevel&&(this.currentInkLevel=this.maxInkLevel)}},{key:"isInkEmpty",value:function(){return this.currentInkLevel<=0}},{key:"getInkLevelPercentage",value:function(){return this.currentInkLevel/this.maxInkLevel*100}},{key:"getStarRating",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,t=this.maxInkLevel/e,n=Math.ceil(this.getCurrentInkLevel()/t);return 0===n?1:n}},{key:"getDrawLength",value:function(e){for(var t=0,n=1;n<e.length;n++){var i=e[n-1],a=e[n],o=i.x-a.x,r=i.y-a.y;t+=Math.sqrt(o*o+r*r)}return 3*t}}]),o}(b))||ju;v._RF.pop(),v._RF.push({},"014cbNey8JEV4aPhDm9R5W4","InputController",void 0);var qu=(0,y.ccclass)("InputController")(Wu=function(e){t(o,e);var a=n(o);function o(){var e;i(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=a.call.apply(a,[this].concat(n))).pointerDownOutSideCanvas=!1,e.handleElementPointerDown=function(){e.pointerDownOutSideCanvas=!0},e.handleElementPointerUp=function(t){e.onTouchEnd(),e.pointerDownOutSideCanvas=!1},e.onTouchStart=function(t){e.node.scene.emit(oo.GAME_START,{pointer:t})},e.onTouchMove=function(t){if(e.pointerDownOutSideCanvas)return e.node.scene.emit(oo.GAME_START,{pointer:t}),void(e.pointerDownOutSideCanvas=!1);e.node.scene.emit(oo.DRAWING,{pointer:t})},e.onTouchEnd=function(t){e.node.scene.emit(oo.BEE_ATTACK)},e}return r(o,[{key:"onLoad",value:function(){this.listenInputEvents()}},{key:"listenInputEvents",value:function(){I.os===I.OS.WINDOWS||I.os===I.OS.OSX?(document.addEventListener("pointerup",this.handleElementPointerUp),document.addEventListener("pointerdown",this.handleElementPointerDown),this.node.on(R.EventType.MOUSE_DOWN,this.onTouchStart),this.node.on(R.EventType.MOUSE_MOVE,this.onTouchMove),this.node.on(R.EventType.MOUSE_UP,this.onTouchEnd)):(this.node.on(R.EventType.TOUCH_START,this.onTouchStart),this.node.on(R.EventType.TOUCH_MOVE,this.onTouchMove),this.node.on(R.EventType.TOUCH_CANCEL,this.onTouchEnd),this.node.on(R.EventType.TOUCH_END,this.onTouchEnd))}},{key:"onDestroy",value:function(){I.os===I.OS.WINDOWS||I.os===I.OS.OSX?(document.removeEventListener("pointerup",this.handleElementPointerUp),document.removeEventListener("pointerdown",this.handleElementPointerDown),this.node.off(R.EventType.MOUSE_DOWN,this.onTouchStart),this.node.off(R.EventType.MOUSE_MOVE,this.onTouchMove),this.node.off(R.EventType.MOUSE_UP,this.onTouchEnd)):(this.node.off(R.EventType.TOUCH_START,this.onTouchStart),this.node.off(R.EventType.TOUCH_MOVE,this.onTouchMove),this.node.off(R.EventType.TOUCH_CANCEL,this.onTouchEnd),this.node.off(R.EventType.TOUCH_END,this.onTouchEnd))}}]),o}(b))||Wu;v._RF.pop(),v._RF.push({},"e6116mseMNPD6VcLUtkvez6","BaseState",void 0);var Yu=function(){function e(t){if(i(this,e),this.game=null,this.data={},this.game=t.node.getComponent(yp),!this.game)throw new Error("Gameplay component not found");this.manager=t,this.updateStateData(),this.logDebug()}return r(e,[{key:"logDebug",value:function(){var e=this.constructor.name;console.info("[STATE] ".concat(e),this.data)}},{key:"updateStateData",value:function(){if(this.game){var e=this.game.getGameData();e&&(this.data=e)}}},{key:"updateGameData",value:function(e){var t;null===(t=this.game)||void 0===t||t.setGameData(e)}}]),e}();v._RF.pop(),v._RF.push({},"a79a7LT0s5BuZrk5mvYsyKr","AttackingState",void 0);var Ju=function(e){t(o,e);var a=n(o);function o(e){var t;return i(this,o),(t=a.call(this,e)).stopHint(),t.stopDrawing(),t.wakeUpObjects(),t.spawnEnemies(),t.startCountdown(),Me.turnDownMusic(),t}return r(o,[{key:"load",value:function(){var e=this.manager.createLoadingState();this.manager.change(e)}},{key:"initialize",value:function(){Me.stopSound(xe.BEE_FLYING);var e=this.manager.createInitializeState();this.manager.change(e)}},{key:"ready",value:function(){}},{key:"draw",value:function(){}},{key:"attack",value:function(){}},{key:"escape",value:function(){var e=this.manager.createEscapeState();this.manager.change(e)}},{key:"death",value:function(){var e=this.manager.createDeathState();this.manager.change(e)}},{key:"finish",value:function(){}},{key:"update",value:function(){}},{key:"stopDrawing",value:function(){var e;null===(e=this.game)||void 0===e||null===(e=e.lineDrawer)||void 0===e||e.endDraw()}},{key:"stopHint",value:function(){var e;null===(e=this.game)||void 0===e||null===(e=e.hint)||void 0===e||e.hideHint()}},{key:"wakeUpObjects",value:function(){var e;null===(e=this.game)||void 0===e||null===(e=e.gameObjects)||void 0===e||e.wakeUpObjects()}},{key:"spawnEnemies",value:function(){this.game&&this.game.gameObjects&&(this.game.gameObjects.spawnBees(),this.game.gameObjects.reviveBigBees(),Me.playSound(xe.BEE_FLYING),Me.playSound(xe.END_DRAW))}},{key:"startCountdown",value:function(){var e;null===(e=this.game)||void 0===e||e.uiManager.startCountdown()}}]),o}(Yu);v._RF.pop(),v._RF.push({},"17461foCjdJ276bG2jcxA06","DeathState",void 0);var Xu=globalThis.game.analytics,Zu=function(e){t(o,e);var a=n(o);function o(e){var t,n,r;return i(this,o),(r=a.call(this,e)).processCrazyGamesEvent(),r.disableUI(),Me.stopAllSounds(),r.vibrateDevice(),r.pauseCountdown(),r.logLevelFailAnalytics(),null===(t=r.game)||void 0===t||t.scheduleOnce((function(){r.stopDogesLooking(),r.showUncompletedMark(),Me.playSound(xe.LEVEL_FAIL,{volume:.3})}),.5),null===(n=r.game)||void 0===n||n.scheduleOnce((function(){r.sleepObjects(),r.showLoseScreen(),r.manager.finish()}),1.8),r}return r(o,[{key:"processCrazyGamesEvent",value:function(){"gameplayStop"in GameSDK.extra&&GameSDK.extra.gameplayStop()}},{key:"load",value:function(){}},{key:"initialize",value:function(){}},{key:"ready",value:function(){}},{key:"draw",value:function(){}},{key:"attack",value:function(){}},{key:"escape",value:function(){}},{key:"death",value:function(){}},{key:"finish",value:function(){var e=this.manager.createFinishState();this.manager.change(e)}},{key:"update",value:function(){}},{key:"disableUI",value:function(){var e,t;null===(e=this.game)||void 0===e||e.uiManager.disableUI(),null===(t=this.game)||void 0===t||t.hint.reset()}},{key:"sleepObjects",value:function(){var e,t;null===(e=this.game)||void 0===e||null===(e=e.lineDrawer)||void 0===e||e.deActivePhysics(),null===(t=this.game)||void 0===t||null===(t=t.gameObjects)||void 0===t||t.sleepObjects()}},{key:"pauseCountdown",value:function(){var e;null===(e=this.game)||void 0===e||e.uiManager.pauseCountdown()}},{key:"stopDogesLooking",value:function(){var e;if(null!==(e=this.game)&&void 0!==e&&e.gameObjects){var t,n=this.game.gameObjects.getComponentsInChildren(rl),i=s(n);try{for(i.s();!(t=i.n()).done;){var a,o=t.value;null===(a=o.eyes)||void 0===a||a.stopLook(),o.setEnable(!1)}}catch(e){i.e(e)}finally{i.f()}}}},{key:"vibrateDevice",value:function(){var e;null===(e=oe("Vibrate"))||void 0===e||null===(e=e.getComponent(ia))||void 0===e||e.vibrate(500)}},{key:"showUncompletedMark",value:function(){var e;null===(e=this.game)||void 0===e||e.uiManager.showUncompletedMark()}},{key:"showLoseScreen",value:function(){var e=this.data.level;He.openScreen(je.LOSE_SCREEN,{level:e})}},{key:"logLevelFailAnalytics",value:function(){if(this.game){var e=this.game.inkCapacityController;if(e){var t=this.data.level,n=void 0===t?0:t,i=e.getStarRating();console.info("logLevelFailAnalytics",n,i),Xu.levelFail(n,i,sa)}}}}]),o}(Yu);v._RF.pop(),v._RF.push({},"71778iMCmVDQKkpW1Ag0dZz","DrawingState",void 0);var Qu=function(e){t(o,e);var a=n(o);function o(e){var t;return i(this,o),(t=a.call(this,e)).dist=0,t.isEmptyDraw=!1,t.initDrawer(),t}return r(o,[{key:"load",value:function(){}},{key:"initialize",value:function(){var e=this.manager.createInitializeState();this.manager.change(e)}},{key:"ready",value:function(){var e=this.manager.createReadyState();this.manager.change(e)}},{key:"draw",value:function(){}},{key:"attack",value:function(){var e,t,n;if(100===(null!==(e=null===(t=this.game)||void 0===t?void 0:t.inkCapacityController.getInkLevelPercentage())&&void 0!==e?e:0))return null===(n=this.game)||void 0===n||n.lineDrawer.endDraw(),void(this.isEmptyDraw=!0);var i=this.manager.createAttackingState();this.manager.change(i)}},{key:"escape",value:function(){}},{key:"death",value:function(){}},{key:"finish",value:function(){}},{key:"update",value:function(){var e;this.isInkEmpty()?null===(e=this.game)||void 0===e||e.node.scene.emit(oo.BEE_ATTACK):this.isEmptyDraw?this.manager.ready():(this.updateStateData(),this.drawLines(),this.updateInkLevel(),this.updateProgressBar())}},{key:"initDrawer",value:function(){var e;if(null!==(e=this.game)&&void 0!==e&&e.lineDrawer){var t=this.data.pointer.getUILocation();this.game.lineDrawer.beginDraw(t),Me.playSound(xe.BUTTON_CLICK)}}},{key:"isInkEmpty",value:function(){return!!this.game&&this.game.inkCapacityController.isInkEmpty()}},{key:"drawLines",value:function(){var e,t;if(null!==(e=this.game)&&void 0!==e&&e.lineDrawer){var n=this.data.pointer.getUILocation();if(this.dist=null!==(t=this.game.lineDrawer.draw(n))&&void 0!==t?t:0,this.dist>0){var i=xe.TOUCH_START;Me.playSound(i,{volume:.8})}}}},{key:"updateInkLevel",value:function(){var e;null===(e=this.game)||void 0===e||e.inkCapacityController.removeInkLevel(this.dist)}},{key:"updateProgressBar",value:function(){if(this.game){var e=this.game.inkCapacityController.getStarRating();this.game.uiManager.setProgressStars(e);var t=this.game.inkCapacityController.getInkLevelPercentage();this.game.uiManager.setProgressBarPercentage(t)}}}]),o}(Yu);v._RF.pop(),v._RF.push({},"d600e+7dHhGOYCGrcOjxVcl","EscapeState",void 0);var $u=globalThis.game,ec=$u.player,tc=$u.analytics,nc=function(e){t(o,e);var a=n(o);function o(e){var t,n;return i(this,o),(n=a.call(this,e)).processCrazyGamesEvent(),n.disableUI(),n.stopAllSounds(),n.vibrateDevice(),n.makeDogesSmile(),n.pauseCountdown(),n.showCompletedMark(),n.updatePlayerProgress(),n.stopBeeBehavior(),n.logLevelCompleteAnalytics(),null===(t=n.game)||void 0===t||t.scheduleOnce((function(){n.sleepObjects(),n.showWiningScreen(),n.manager.finish()}),.5),Me.playSound(xe.LEVEL_PASS),Me.playSound(xe.BEE_FLYING),n}return r(o,[{key:"processCrazyGamesEvent",value:function(){"gameplayStop"in GameSDK.extra&&GameSDK.extra.gameplayStop()}},{key:"load",value:function(){}},{key:"initialize",value:function(){}},{key:"ready",value:function(){}},{key:"draw",value:function(){}},{key:"attack",value:function(){}},{key:"escape",value:function(){}},{key:"death",value:function(){}},{key:"finish",value:function(){var e=this.manager.createFinishState();this.manager.change(e)}},{key:"update",value:function(){}},{key:"disableUI",value:function(){var e,t;null===(e=this.game)||void 0===e||e.uiManager.disableUI(),null===(t=this.game)||void 0===t||t.hint.reset()}},{key:"stopBeeBehavior",value:function(){var e;null===(e=this.game)||void 0===e||null===(e=e.gameObjects)||void 0===e||e.stopBeeBehavior()}},{key:"sleepObjects",value:function(){var e,t;null===(e=this.game)||void 0===e||null===(e=e.lineDrawer)||void 0===e||e.deActivePhysics(),null===(t=this.game)||void 0===t||null===(t=t.gameObjects)||void 0===t||t.sleepObjects()}},{key:"stopAllSounds",value:function(){Me.stopAllSounds()}},{key:"makeDogesSmile",value:function(){var e;if(null!==(e=this.game)&&void 0!==e&&e.gameObjects){var t,n=this.game.gameObjects.getComponentsInChildren(rl),i=s(n);try{for(i.s();!(t=i.n()).done;){var a=t.value;a.smile(),a.setEnable(!1)}}catch(e){i.e(e)}finally{i.f()}}}},{key:"vibrateDevice",value:function(){var e;null===(e=oe("Vibrate"))||void 0===e||null===(e=e.getComponent(ia))||void 0===e||e.vibrate(500)}},{key:"pauseCountdown",value:function(){var e;null===(e=this.game)||void 0===e||e.uiManager.pauseCountdown()}},{key:"showCompletedMark",value:function(){var e;null===(e=this.game)||void 0===e||e.uiManager.showCompletedMark()}},{key:"updatePlayerProgress",value:function(){if(this.game){var e=this.data.level;if(e){var t=this.game.inkCapacityController.getStarRating(),n=ec.getGameData();if(n&&n.levelProgress){var i=n.levelProgress[e]||0,a=n.totalLevel,o=h({},n);e>=a&&(o.passAllLevels=!0),e<n.level&&(o.level=e+1);var r=Math.max(i,t);o.levelProgress[e]=r,ec.setGameData(o)}}}}},{key:"showWiningScreen",value:function(){if(this.game){var e=this.data.level,t=this.game.inkCapacityController.getStarRating();He.openScreen(je.WINNING_SCREEN,{level:e,stars:t})}}},{key:"logLevelCompleteAnalytics",value:function(){if(this.game){var e=this.game.inkCapacityController;if(e){var t=this.data.level,n=void 0===t?0:t,i=e.getStarRating();console.info("logLevelCompleteAnalytics",n,i),tc.levelComplete(n,i,sa)}}}}]),o}(Yu);v._RF.pop(),v._RF.push({},"9046etpNclOb7EjoNvbF/aZ","MatchUtils",void 0);var ic=GameCore,ac=ic.Match,oc=ic.Utils,rc=oc.Object,sc=oc.Valid,lc=oc.String,uc=globalThis.game,cc=uc.match,hc=uc.player,dc=uc.leaderboard,pc=function(){function e(){i(this,e)}var t,n,a,o,s,l,u,c,h,p,v,y,f,m,g,b,S,C,k;return r(e,[{key:"processStartSingleModeAsync",value:(k=d((function*(){var e=hc.getPlayerId();yield cc.single.start.processAsync({playerId:e})})),function(){return k.apply(this,arguments)})},{key:"processFinishSingleModeAsync",value:(C=d((function*(){yield cc.single.finish.processAsync()})),function(){return C.apply(this,arguments)})},{key:"processStartTournamentModeAsync",value:(S=d((function*(){var e=hc.getPlayerId(),t=GameSDK.context.getID();yield cc.tournament.continue.processAsync({playerId:e,contextId:t})})),function(){return S.apply(this,arguments)})},{key:"processFinishTournamentModeAsync",value:(b=d((function*(){var e=hc.getPlayerId(),t=hc.getBestScore();yield cc.tournament.finish.processAsync({playerId:e,bestScore:t})})),function(){return b.apply(this,arguments)})},{key:"processStartChallengeModeAsync",value:(g=d((function*(){try{yield this.processContinueChallengeAsync()}catch(e){if(!rc.hasOwn(e,"name")||sc.isString(e.name))throw e;"PlayerHasFinishedMatch"===e.name&&(yield this.processChallengeNewOpponentAsync()),"PlayerNotJoinInMatch"===e.name&&(yield this.processJoinChallengeAsync())}})),function(){return g.apply(this,arguments)})},{key:"processFinishChallengeModeAsync",value:(m=d((function*(){yield cc.challenge.finish.processAsync()})),function(){return m.apply(this,arguments)})},{key:"processContinueChallengeAsync",value:(f=d((function*(){var e=this.getMatchState(),t=e.id,n=e.customData,i=n.playerId,a=n.opponentId;if(!sc.isString(t))throw new Error("Invalid match id");if(!sc.isString(i))throw new Error("Invalid player id");if(!sc.isString(a))throw new Error("Invalid opponent id");var o=GameSDK.context.getID();if(!o)throw new Error("Cannot get contextId");yield cc.challenge.continue.processAsync({matchId:t,contextId:o,playerId:i,opponentId:a})})),function(){return f.apply(this,arguments)})},{key:"processChallengeNewOpponentAsync",value:(y=d((function*(){var e=hc.getConnectedPlayerIds(100,0),t=Math.floor(Math.random()*e.length),n=hc.getPlayerId(),i=e[t];if(!sc.isString(i)||sc.isEmpty(i))throw new Error("Invalid opponent id");yield cc.challenge.friend.processAsync({playerId:n,opponentId:i})})),function(){return y.apply(this,arguments)})},{key:"processJoinChallengeAsync",value:(v=d((function*(){var e=this.getMatchState(),t=e.id,n=e.customData,i=n.playerId,a=n.opponentId;if(!sc.isString(t))throw new Error("Invalid match id");if(!sc.isString(i))throw new Error("Invalid player id");if(!sc.isString(a))throw new Error("Invalid opponent id");yield cc.challenge.join.processAsync({matchId:t,playerId:i,opponentId:a})})),function(){return v.apply(this,arguments)})},{key:"getMatchState",value:function(){var e=cc.getMatchState();if(!e)throw new Error("Match state not found");return e}},{key:"getMatchMode",value:function(){var e=this.getMatchState();return sc.isString(e.mode)?e.mode:null}},{key:"getTournamentsAsync",value:(p=d((function*(){try{return yield GameSDK.tournament.getTournamentsAsync()}catch(e){return console.error(e),[]}})),function(){return p.apply(this,arguments)})},{key:"createTournamentPayload",value:function(){var e,t,n=lc.generateObjectId(),i=hc.getPlayerId(),a=this.getMatchState().profiles;return{score:null!==(e=null===(t=(void 0===a?{}:a)[i])||void 0===t?void 0:t.score)&&void 0!==e?e:0,playerId:i,mode:ac.Modes.TOURNAMENT,name:this.createTournamentName(),leaderboardId:n,payload:{playerId:i,leaderboardId:n}}}},{key:"createTournamentName",value:function(){var e=hc.getPlayer().name,t=void 0===e?null:e;if(t){var n=t.substring(0,7),i="".concat(n.split(" ")[0]||n,"'s Tournament"),a=lc.removeDiacritics(i);return"".concat(a)}return"Tournament"}}],[{key:"inst",get:function(){return this._instance||(this._instance=new e),this._instance}},{key:"startMatchAsync",value:(h=d((function*(e){try{var t=null!=e?e:this.inst.getMatchMode(),n=ac.Modes;switch(t){case n.SINGLE:yield this.inst.processStartSingleModeAsync();break;case n.TOURNAMENT:yield this.inst.processStartTournamentModeAsync();break;case n.CHALLENGE_FRIEND:yield this.inst.processStartChallengeModeAsync();break;default:yield this.inst.processStartSingleModeAsync()}}catch(e){console.warn("startMatchAsync",e)}})),function(e){return h.apply(this,arguments)})},{key:"setProfileMatchDataAsync",value:(c=d((function*(e){try{yield cc.handler.setProfileData(e)}catch(e){console.warn("setProfileMatchDataAsync",e)}})),function(e){return c.apply(this,arguments)})},{key:"setMatchCustomDataAsync",value:(u=d((function*(e){try{yield cc.handler.setMatchCustomData(e)}catch(e){console.warn("setMatchCustomDataAsync",e)}})),function(e){return u.apply(this,arguments)})},{key:"getMatchCustomDataAsync",value:(l=d((function*(e){try{yield cc.handler.getMatchCustomData(e)}catch(e){console.warn("getMatchCustomDataAsync",e)}})),function(e){return l.apply(this,arguments)})},{key:"setLeaderboardScoreAsync",value:(s=d((function*(e){try{yield cc.handler.setLeaderboardScore(e)}catch(e){console.warn("setLeaderboardScoreAsync",e)}})),function(e){return s.apply(this,arguments)})},{key:"finishMatchAsync",value:(o=d((function*(){try{var e=this.inst.getMatchMode(),t=GameCore.Match.Modes;switch(e){case t.SINGLE:yield this.inst.processFinishSingleModeAsync();break;case t.TOURNAMENT:yield this.inst.processFinishTournamentModeAsync();break;case t.CHALLENGE_FRIEND:yield this.inst.processFinishChallengeModeAsync();break;default:yield this.inst.processFinishSingleModeAsync()}}catch(e){console.warn("finishMatchAsync",e)}})),function(){return o.apply(this,arguments)})},{key:"createTournamentAsync",value:(a=d((function*(){var e=!1;if((yield this.inst.getTournamentsAsync()).find((function(e){var t,n=JSON.parse(null!==(t=e.getPayload())&&void 0!==t?t:"{}");return"DEFAULT"===e.getTournamentType()&&n.playerId===hc.getPlayerId()})))return!1;var t=this.inst.createTournamentPayload();try{yield cc.tournament.create.processAsync(t);var n=t.leaderboardId;dc.addLeaderboard({name:n,type:"tournament",autoSortRank:!0,leaderboardId:n}),e=!0}catch(e){console.warn("processCreateTournament",e)}return e})),function(){return a.apply(this,arguments)})},{key:"joinTournamentAsync",value:(n=d((function*(e){var t=hc.getPlayerId();yield cc.tournament.join.processAsync({tournamentId:e,playerId:t})})),function(e){return n.apply(this,arguments)})},{key:"continueTournamentAsync",value:(t=d((function*(e){var t=hc.getPlayerId();yield cc.tournament.continue.processAsync({playerId:t,contextId:e})})),function(e){return t.apply(this,arguments)})}]),e}();v._RF.pop(),v._RF.push({},"a9bc11SkV9L/5L+Y+fhswfJ","FinishState",void 0);var vc=globalThis.game.player,yc=function(e){t(s,e);var a,o=n(s);function s(e){var t;return i(this,s),t=o.call(this,e),Me.turnUpMusic(),Me.stopSound(xe.BEE_FLYING),t.finishGameAsync(),t}return r(s,[{key:"load",value:function(){var e=this.manager.createLoadingState();this.manager.change(e)}},{key:"initialize",value:function(){var e=this.manager.createInitializeState();this.manager.change(e)}},{key:"ready",value:function(){}},{key:"draw",value:function(){}},{key:"attack",value:function(){}},{key:"escape",value:function(){}},{key:"death",value:function(){}},{key:"finish",value:function(){}},{key:"update",value:function(){}},{key:"finishGameAsync",value:(a=d((function*(){try{if(!this.game)return;var e=this.game.inkCapacityController;if(!e)return;var t=this.data.level,n=1e3*(void 0===t?0:t)+100*e.getStarRating();vc.getBestScore()<n&&vc.setBestScore(n),yield pc.finishMatchAsync()}catch(e){console.error("finishGameAsync",e)}})),function(){return a.apply(this,arguments)})}]),s}(Yu);v._RF.pop(),v._RF.push({},"37a5cRy3ANBGpVlH3wyS3Ra","InitializeState",void 0);var fc=function(e){t(l,e);var a,o,s=n(l);function l(e){var t;return i(this,l),t=s.call(this,e),"CrazyGames"===GameSDK.getSDKName()&&t.processCrazyGamesRequirements(),t.enableUI(),t.disableHintButtonForEarlyLevels(),t.clearHint(),t.clearGameObjects(),t.createGameObjects(),t.initInkCapacity(),t.initCountdown(),t.updateHeader(),t.showTutorialUI(),Me.playMusic(),t.startGameAsync().then((function(){t.closeLoadingScreen(),t.manager.ready()})),t}return r(l,[{key:"processCrazyGamesRequirements",value:function(){"gameplayStart"in GameSDK.extra&&GameSDK.extra.gameplayStart(),this.showInterAdsCrazyGames()}},{key:"disableHintButtonForEarlyLevels",value:function(){if(this.game){var e=this.data.level;e&&e<=3&&this.game.uiManager.disableHintButton()}}},{key:"showInterAdsCrazyGames",value:(o=d((function*(){this.game&&(Me.stopAllSounds(),(yield Ve.showInterstitialAdAsync({forLevel:this.data.level,includeSDK:["CrazyGames"]}))&&this.game.disableRewardAdsItemForCrazyGames(),Me.turnUpMusic())})),function(){return o.apply(this,arguments)})},{key:"load",value:function(){if(GameCore.Utils.Valid.isDebugger()){var e=this.manager.createLoadingState();this.manager.change(e)}}},{key:"initialize",value:function(){}},{key:"ready",value:function(){var e=this.manager.createReadyState();this.manager.change(e)}},{key:"draw",value:function(){}},{key:"attack",value:function(){}},{key:"escape",value:function(){var e=this.manager.createEscapeState();this.manager.change(e)}},{key:"death",value:function(){var e=this.manager.createDeathState();this.manager.change(e)}},{key:"finish",value:function(){}},{key:"update",value:function(){}},{key:"closeLoadingScreen",value:function(){He.closeScreen(je.LOADING_SCREEN)}},{key:"enableUI",value:function(){var e;null===(e=this.game)||void 0===e||e.uiManager.enableUI()}},{key:"clearHint",value:function(){var e;null===(e=this.game)||void 0===e||null===(e=e.hint)||void 0===e||e.reset()}},{key:"clearGameObjects",value:function(){var e,t;null!==(e=this.game)&&void 0!==e&&e.lineDrawer&&null!==(t=this.game)&&void 0!==t&&t.gameObjects&&(this.game.lineDrawer.clearLines(),this.game.gameObjects.clearObjects())}},{key:"createGameObjects",value:function(){var e,t=this.data.levelData;t&&(null===(e=this.game)||void 0===e||null===(e=e.gameObjects)||void 0===e||e.spawnObjects(t))}},{key:"initInkCapacity",value:function(){if(this.game){var e=this.data.levelData;if(e){var t=this.game.inkCapacityController,n=e.lnk,i=void 0===n?[]:n;t.init(i)}}}},{key:"initCountdown",value:function(){var e;null===(e=this.game)||void 0===e||e.uiManager.initCountdown()}},{key:"updateHeader",value:function(){var e;if(null!==(e=this.game)&&void 0!==e&&e.hint){var t=this.game.inkCapacityController.getStarRating();this.game.uiManager.setProgressStars(t);var n=this.game.inkCapacityController.getInkLevelPercentage();this.game.uiManager.setProgressBarPercentage(n),this.game.hint.getIsHintShow()||this.game.uiManager.startCountDownHeaderHintBubbleAnim()}}},{key:"showTutorialUI",value:function(){var e,t;if(this.game){var n=this.data,i=n.level,a=n.levelData;if(i&&a&&!(i>3)&&null!==(e=this.game)&&void 0!==e&&e.hint&&null!==(t=this.game)&&void 0!==t&&t.uiManager){var o=a.tips,r=pu.transformPointsFromMapToDrawAreaCoordinate(o);this.game.hint.showHint(r,!0),this.game.uiManager.stopCountDownHeaderHintBubbleAnim()}}}},{key:"startGameAsync",value:(a=d((function*(){try{if(this.data.isFromLoader)return void this.updateGameData({isFromLoader:!1});yield pc.startMatchAsync()}catch(e){console.error("startGameAsync",e)}})),function(){return a.apply(this,arguments)})}]),l}(Yu);v._RF.pop(),v._RF.push({},"a8496IbdA1EnY7sv4ApuaJW","LoadingState",void 0);var mc=function(e){t(o,e);var a=n(o);function o(e){var t;return i(this,o),(t=a.call(this,e)).handleMapLoaded=function(e,n){if(e)console.error("Failed to load level",e);else{var i=n.json;t.updateGameData({levelData:i});var a,o,r=t.data.level;if(r)null===(a=t.game)||void 0===a||null===(a=a.gameMap)||void 0===a||a.preloadLevel(r+1);
//! wait until loading screen open then ready to reduce stuttering
if(t.loadingScreenFlag)null===(o=t.game)||void 0===o||o.scheduleOnce((function(){t.initialize()}),.5);else t.initialize()}},t.loadingScreenFlag=!t.isLevelAlreadyLoaded(),t.loadingScreenFlag&&He.showLoadingScreen(),t.stopHint(),t.loadGameMap(),t.updateLevelText(),t}return r(o,[{key:"load",value:function(){}},{key:"initialize",value:function(){var e=this.manager.createInitializeState();this.manager.change(e)}},{key:"ready",value:function(){}},{key:"draw",value:function(){}},{key:"attack",value:function(){}},{key:"escape",value:function(){}},{key:"death",value:function(){}},{key:"finish",value:function(){}},{key:"update",value:function(){}},{key:"isLevelAlreadyLoaded",value:function(){var e,t,n=this.data.level;if(!n)throw new Error("Level is not defined");return null!==(e=null===(t=this.game)||void 0===t||null===(t=t.gameMap)||void 0===t?void 0:t.isLevelAlreadyLoaded(n))&&void 0!==e&&e}},{key:"stopHint",value:function(){var e;null===(e=this.game)||void 0===e||null===(e=e.hint)||void 0===e||e.hideHint()}},{key:"loadGameMap",value:function(){var e,t=this.data.level;if(!t)throw new Error("Level is not defined");null===(e=this.game)||void 0===e||null===(e=e.gameMap)||void 0===e||e.loadLevel(t,this.handleMapLoaded)}},{key:"updateLevelText",value:function(){var e,t=this.data.level;t&&(null===(e=this.game)||void 0===e||e.uiManager.setLevelText(t))}}]),o}(Yu);v._RF.pop(),v._RF.push({},"5ef69tJ5eNNv7o22H/XfSD2","ReadyState",void 0);var gc,bc=globalThis.game.analytics,Sc=function(e){t(o,e);var a=n(o);function o(e){var t;return i(this,o),(t=a.call(this,e)).logLevelStartAnalytics(),t}return r(o,[{key:"load",value:function(){if(GameCore.Utils.Valid.isDebugger()){var e=this.manager.createLoadingState();this.manager.change(e)}}},{key:"initialize",value:function(){}},{key:"ready",value:function(){}},{key:"draw",value:function(){var e=this.manager.createDrawingState();this.manager.change(e)}},{key:"attack",value:function(){}},{key:"escape",value:function(){var e=this.manager.createEscapeState();this.manager.change(e)}},{key:"death",value:function(){if(GameCore.Utils.Valid.isDebugger()){var e=this.manager.createDeathState();this.manager.change(e)}}},{key:"finish",value:function(){}},{key:"update",value:function(){}},{key:"logLevelStartAnalytics",value:function(){if(this.game){var e=this.data.level,t=void 0===e?0:e,n=this.game.inkCapacityController.getStarRating();bc.levelStart(t,n,sa)}}}]),o}(Yu);v._RF.pop(),v._RF.push({},"bb0e3beWSxOOLCv7gjyg2s0","StateManager",void 0);var Cc,kc,wc,Ec,Tc,Ac,Rc,Bc,Pc,_c,Oc,Lc,Dc,Ic,Nc,Gc=(0,y.ccclass)("StateManager")(gc=function(e){t(o,e);var a=n(o);function o(){return i(this,o),a.apply(this,arguments)}return r(o,[{key:"init",value:function(){this.state=new mc(this)}},{key:"change",value:function(e){this.state=e}},{key:"load",value:function(){this.state.load()}},{key:"initialize",value:function(){this.state.initialize()}},{key:"isInitialize",value:function(){return this.state instanceof fc}},{key:"ready",value:function(){this.state.ready()}},{key:"isReady",value:function(){return this.state instanceof Sc}},{key:"draw",value:function(){this.state.draw()}},{key:"isDrawing",value:function(){return this.state instanceof Qu}},{key:"attack",value:function(){this.state.attack()}},{key:"isAttacking",value:function(){return this.state instanceof Ju}},{key:"escape",value:function(){this.state.escape()}},{key:"isSurviving",value:function(){return this.state instanceof nc}},{key:"death",value:function(){this.state.death()}},{key:"isFailed",value:function(){return this.state instanceof Zu}},{key:"finish",value:function(){this.state.finish()}},{key:"isFinished",value:function(){return this.state instanceof yc}},{key:"update",value:function(e){this.state&&this.state.update(e)}},{key:"createInitializeState",value:function(){return new fc(this)}},{key:"createLoadingState",value:function(){return new mc(this)}},{key:"createReadyState",value:function(){return new Sc(this)}},{key:"createDrawingState",value:function(){return new Qu(this)}},{key:"createAttackingState",value:function(){return new Ju(this)}},{key:"createEscapeState",value:function(){return new nc(this)}},{key:"createDeathState",value:function(){return new Zu(this)}},{key:"createFinishState",value:function(){return new yc(this)}}]),o}(b))||gc;v._RF.pop(),v._RF.push({},"9e40aEq56tMKLFoeACyl+eH","Clock",void 0);var Fc,Mc,zc,xc,Uc,Hc,jc,Vc,Wc=y.ccclass,Kc=y.disallowMultiple,qc=y.property,Yc=We.WaitForPassSecs,Jc=(Cc=Wc("Clock"),kc=qc(O),wc=qc(R),Ec=qc(S),Tc=qc(R),Ac=qc(R),Rc=qc(f),Cc(Bc=Kc((_c=e((Pc=function(e){t(l,e);var s=n(l);function l(){var e;i(this,l);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e=s.call.apply(s,[this].concat(n)),a(e,"timeText",_c,o(e)),a(e,"clockContainer",Oc,o(e)),a(e,"clockFill",Lc,o(e)),a(e,"successIcon",Dc,o(e)),a(e,"failIcon",Ic,o(e)),a(e,"animation",Nc,o(e)),e.time=0,e.remaining=0,e.running=!1,e.timeShake=0,e.remainingToShake=0,e.handleUpdateConfig=function(t){e.enabled&&e.setTime(t.WaitForPassSecs)},e}return r(l,[{key:"__preload",value:function(){this.listenEvents()}},{key:"start",value:function(){this.init(),this.setTime(Yc),this.setTimeToShake(1)}},{key:"init",value:function(){this.remaining=0,this.running=!1,this.node.active=!1}},{key:"listenEvents",value:function(){this.node.scene.on(De.GAMEPLAY_UPDATE_CONFIG,this.handleUpdateConfig)}},{key:"setTime",value:function(e){console.info("[Clock] setTime",e),this.time=e,this.timeText.string=Math.ceil(e).toString()}},{key:"setTimeToShake",value:function(e){this.timeShake=e,this.remainingToShake=0}},{key:"startCountdown",value:function(){this.running=!0,this.remaining=this.time,this.remainingToShake=this.timeShake,this.node.active=!0,this.failIcon.active=!1,this.successIcon.active=!1}},{key:"pause",value:function(){this.running=!1}},{key:"resume",value:function(){this.running=!0}},{key:"showUncompletedMark",value:function(){this.failIcon.active=!0,ne(this.failIcon).set({scale:new T(0,0,1)}).to(.5,{scale:new T(1,1,1)},{easing:"smooth"}).start()}},{key:"showCompletedMark",value:function(){this.successIcon.active=!0,ne(this.successIcon).set({scale:new T(0,0,1)}).to(.5,{scale:new T(1,1,1)},{easing:"smooth"}).start()}},{key:"endCountDown",value:function(){this.running=!1,this.node.scene.emit(oo.TIME_OUT)}},{key:"update",value:function(e){this.running&&(this.remaining<=0?this.endCountDown():(this.remainingToShake<=0&&(this.playShakeAnimation(),this.remainingToShake=this.timeShake),this.remaining-=e,this.remainingToShake-=e,this.updateLabel(),this.clockFill.fillRange=this.remaining/this.time))}},{key:"updateLabel",value:function(){var e=Math.ceil(this.remaining).toString();this.timeText.string=e}},{key:"playShakeAnimation",value:function(){var e="Shake";this.animation.clips.some((function(t){return!(!t||t.name!==e)}))?this.animation.play(e):console.warn("SettingsScreen: clip not found")}}]),l}(b)).prototype,"timeText",[kc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Oc=e(Pc.prototype,"clockContainer",[wc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Lc=e(Pc.prototype,"clockFill",[Ec],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Dc=e(Pc.prototype,"successIcon",[Tc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ic=e(Pc.prototype,"failIcon",[Ac],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Nc=e(Pc.prototype,"animation",[Rc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Bc=Pc))||Bc)||Bc);v._RF.pop(),v._RF.push({},"7c115t9HKlH6ZfnhCnLAnpe","Star",void 0);var Xc,Zc,Qc,$c,eh,th,nh,ih,ah,oh,rh,sh=y.ccclass,lh=y.property,uh=y.requireComponent,ch=(Fc=sh("Star"),Mc=uh(f),zc=lh(b),xc=lh(f),Fc(Uc=Mc((jc=e((Hc=function(e){t(l,e);var s=n(l);function l(){var e;i(this,l);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e=s.call.apply(s,[this].concat(n)),a(e,"starAppearance",jc,o(e)),a(e,"animation",Vc,o(e)),e.isAppear=!1,e.initialPosition=new T,e}return r(l,[{key:"onLoad",value:function(){this.initialPosition=this.node.position.clone(),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){Le.lazyValidateProperties(this)}},{key:"resetPosition",value:function(){this.node.setPosition(this.initialPosition)}},{key:"show",value:function(){this.starAppearance.node.active=!0,this.isAppear=!0}},{key:"hide",value:function(){this.starAppearance.node.active=!1,this.isAppear=!1}},{key:"playAnimation",value:function(){this.animation.stop();this.animation.clips.some((function(e){return!(!e||"UpAndDown"!==e.name)}))?this.animation.play("UpAndDown"):console.warn("SettingsScreen: clip not found")}},{key:"stopAnimation",value:function(){this.animation.stop()}}]),l}(b)).prototype,"starAppearance",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Vc=e(Hc.prototype,"animation",[xc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Uc=Hc))||Uc)||Uc);v._RF.pop(),v._RF.push({},"09f0bRvi+1OQZiIGBFqdNzq","LevelProgressBar",void 0);var hh,dh,ph,vh,yh,fh,mh,gh,bh,Sh,Ch,kh,wh,Eh,Th,Ah,Rh,Bh=y.ccclass,Ph=y.property,_h=(Xc=Bh("LevelProgressBar"),Zc=Ph(he),Qc=Ph(ch),$c=Ph(ch),eh=Ph(ch),Xc((ih=e((nh=function(e){t(l,e);var s=n(l);function l(){var e;i(this,l);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e=s.call.apply(s,[this].concat(n)),a(e,"progressBar",ih,o(e)),a(e,"leftStar",ah,o(e)),a(e,"midStar",oh,o(e)),a(e,"rightStar",rh,o(e)),e.toProgress=1,e.progressStep=0,e}return r(l,[{key:"onLoad",value:function(){this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){Le.lazyValidateProperties(this)}},{key:"start",value:function(){this.toProgress=1,this.progressStep=0,this.runStartsAnimation()}},{key:"update",value:function(){var e=this.progressBar.getComponent(S);e&&(this.progressBar.progress>=1?e.type=S.Type.SIMPLE:e.type=S.Type.TILED),this.progressBar.progress-this.progressStep<this.toProgress?this.progressBar.progress!==this.toProgress&&(this.progressBar.progress=this.toProgress):this.progressBar.progress-=this.progressStep}},{key:"runStartsAnimation",value:function(){this.leftStar.isAppear&&this.midStar.isAppear&&this.rightStar.isAppear||(this.leftStar.show(),this.midStar.show(),this.rightStar.show(),this.runStarAnimation(this.leftStar),this.runStarAnimation(this.midStar),this.runStarAnimation(this.rightStar))}},{key:"runStarAnimation",value:function(e){e.resetPosition(),e.playAnimation()}},{key:"stopStarAnimation",value:function(e){e.isAppear&&(e.hide(),e.stopAnimation(),e.resetPosition(),Me.playSound(xe.LOST_STAR_IN_GAMEPLAY))}},{key:"setProgress",value:function(e){this.toProgress=e/100,this.progressStep=(this.progressBar.progress-this.toProgress)/60*16}},{key:"setStars",value:function(e){switch(e){case 1:this.stopStarAnimation(this.rightStar),this.stopStarAnimation(this.midStar);break;case 2:this.stopStarAnimation(this.rightStar);break;default:this.runStartsAnimation()}}},{key:"reset",value:function(){this.progressBar.progress=1}}]),l}(b)).prototype,"progressBar",[Zc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ah=e(nh.prototype,"leftStar",[Qc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),oh=e(nh.prototype,"midStar",[$c],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rh=e(nh.prototype,"rightStar",[eh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),th=nh))||th);v._RF.pop(),v._RF.push({},"61791zAr2tJR4p22EZ5QRfk","Header",void 0);var Oh,Lh,Dh,Ih,Nh,Gh,Fh,Mh,zh,xh,Uh,Hh,jh,Vh,Wh,Kh,qh,Yh,Jh,Xh,Zh,Qh,$h,ed,td,nd,id,ad,od,rd,sd,ld,ud,cd,hd,dd,pd,vd,yd,fd,md,gd,bd,Sd,Cd,kd,wd,Ed,Td,Ad,Rd,Bd,Pd,_d=y.ccclass,Od=y.property,Ld=globalThis.game,Dd=Ld.language,Id=Ld.player,Nd=(hh=_d("Header"),dh=Od(O),ph=Od(_h),vh=Od(ht),yh=Od(R),fh=Od(R),mh=Od(R),gh=Od(R),hh((Ch=e((Sh=function(e){t(u,e);var s,l=n(u);function u(){var e;i(this,u);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e=l.call.apply(l,[this].concat(n)),a(e,"levelText",Ch,o(e)),a(e,"levelProgressBar",kh,o(e)),a(e,"hintBubbleAnim",wh,o(e)),a(e,"pauseNode",Eh,o(e)),a(e,"replayNode",Th,o(e)),a(e,"hintNode",Ah,o(e)),a(e,"skipNode",Rh,o(e)),e.handlePlayBubble=function(){e.hintBubbleAnim.play(),e.startCountDownHintBubble()},e}return r(u,[{key:"onLoad",value:function(){this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){Le.lazyValidateProperties(this)}},{key:"handleClickedPauseGame",value:function(){this.showSettingScreen(),this.node.scene.emit(oo.GAME_PAUSE)}},{key:"handleClickedReplayGame",value:function(){var e,t=(null!==(e=Id.getGameData())&&void 0!==e?e:{}).level,n=void 0===t?1:t;this.node.scene.emit(oo.GAME_REPLAY,{level:n})}},{key:"handleClickedHintGame",value:function(){this.node.scene.emit(oo.SHOW_HINT)}},{key:"handleClickedSkipLevel",value:(s=d((function*(){this.node.scene.emit(oo.SKIP_LEVEL)})),function(){return s.apply(this,arguments)})},{key:"showSettingScreen",value:function(){He.openScreen(je.SETTINGS_SCREEN,{})}},{key:"setLevelText",value:function(e){var t=Dd.getText("level");this.levelText.string="".concat(t," ").concat(e)}},{key:"setProgress",value:function(e){this.levelProgressBar.setProgress(e)}},{key:"setProgressStars",value:function(e){this.levelProgressBar.setStars(e)}},{key:"startCountDownHintBubble",value:function(){this.schedule(this.handlePlayBubble,30)}},{key:"stopCountDownHintBubble",value:function(){this.unschedule(this.handlePlayBubble)}},{key:"disableButtons",value:function(){this.enableBtnNode(this.pauseNode,!1,!0),this.enableBtnNode(this.replayNode,!1,!0),this.enableBtnNode(this.hintNode,!1,!0),this.enableBtnNode(this.skipNode,!1,!0)}},{key:"enableButtons",value:function(){this.enableBtnNode(this.pauseNode,!0,!0),this.enableBtnNode(this.replayNode,!0,!0),this.enableBtnNode(this.hintNode,!0,!0),this.enableBtnNode(this.skipNode,!0,!0)}},{key:"disableRewardAdsButton",value:function(){this.enableBtnNode(this.hintNode,!1,!1),this.enableBtnNode(this.skipNode,!1,!1)}},{key:"disableHintButton",value:function(){this.enableBtnNode(this.hintNode,!1,!0)}},{key:"enableBtnNode",value:function(e,t,n){var i=e.getComponent(k);if(i&&(i.interactable=t),e.active=n,n){var a=e.getComponent(Xt);a&&a.changeState(t)}}}]),u}(b)).prototype,"levelText",[dh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),kh=e(Sh.prototype,"levelProgressBar",[ph],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),wh=e(Sh.prototype,"hintBubbleAnim",[vh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Eh=e(Sh.prototype,"pauseNode",[yh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Th=e(Sh.prototype,"replayNode",[fh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ah=e(Sh.prototype,"hintNode",[mh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Rh=e(Sh.prototype,"skipNode",[gh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bh=Sh))||bh);v._RF.pop(),v._RF.push({},"151afQBVDpOYpTjtwP+wYH+","DevTools",void 0);var Gd,Fd,Md,zd,xd,Ud,Hd,jd,Vd,Wd=y.ccclass,Kd=y.property,qd=(Oh=Wd("DevToolsContainer"),Lh=Kd(R),Dh=Kd(R),Ih=Kd(R),Nh=Kd(R),Gh=Kd(R),Fh=Kd(R),Mh=Kd(R),zh=Kd(R),xh=Kd(R),Uh=Kd(R),Hh=Kd(R),jh=Kd(R),Vh=Kd(R),Wh=Kd(R),Kh=Kd(R),qh=Kd(R),Yh=Kd(R),Jh=Kd(R),Xh=Kd(R),Zh=Kd(R),Qh=Kd(R),$h=Kd(R),ed=Kd(R),td=Kd(R),nd=Kd(R),Oh((od=e((ad=function(e){t(l,e);var s=n(l);function l(){var e;i(this,l);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e=s.call.apply(s,[this].concat(n)),a(e,"devToolsButton",od,o(e)),a(e,"winLevelButton",rd,o(e)),a(e,"loseLevelButton",sd,o(e)),a(e,"buildVersionButton",ld,o(e)),a(e,"prevLevelButton",ud,o(e)),a(e,"nextLevelButton",cd,o(e)),a(e,"selectLevelButton",hd,o(e)),a(e,"hintButton",dd,o(e)),a(e,"physicButton",pd,o(e)),a(e,"bundleButton",vd,o(e)),a(e,"beehiveButton",yd,o(e)),a(e,"dogeButton",fd,o(e)),a(e,"thornBallButton",md,o(e)),a(e,"bigBeeButton",gd,o(e)),a(e,"thornButton",bd,o(e)),a(e,"airFanButton",Sd,o(e)),a(e,"brickButton",Cd,o(e)),a(e,"grassButton",kd,o(e)),a(e,"grassDarkButton",wd,o(e)),a(e,"lineButton",Ed,o(e)),a(e,"poisonButton",Td,o(e)),a(e,"poisonSurfaceButton",Ad,o(e)),a(e,"waterButton",Rd,o(e)),a(e,"dangerAreaButton",Bd,o(e)),a(e,"dashboardButton",Pd,o(e)),e.isActive=!0,e.gameplay=null,e.gameObjects=null,e.currentSpawnObjId=-1,e.handleClickDashboardButton=function(){Ke.switchToDashboardScene()},e.handleClickDevToolsButton=function(){e.isActive?(e.hideAllButtons(),e.isActive=!1):(e.showAllButtons(),e.isActive=!0)},e.handleClickPrevLevelButton=function(){var t=e.getCurrentLevel();t&&e.node.scene.emit(oo.SELECT_LEVEL,{level:t-1})},e.handleClickNextLevelButton=function(){var t=e.getCurrentLevel();t&&e.node.scene.emit(oo.SELECT_LEVEL,{level:t+1})},e.handleClickHintButton=function(){e.node.scene.emit(oo.SHOW_HINT,{noAd:!0})},e.handleClickBuildVersionButton=function(){var e=globalThis.game.getBuildVersion();He.showNotificationScreen("Build version: ".concat(e))},e.handleClickPhysicButton=function(){var e=de.Aabb,t=de.Pair,n=de.CenterOfMass,i=de.Joint,a=de.Shape;se.instance.debugDrawFlags=e|t|n|i|a},e.handleClickWinLevelButton=function(){e.node.scene.emit(oo.DOGE_SURVIVE)},e.handleClickLoseLevelButton=function(){e.node.scene.emit(oo.DOGE_DIE)},e.handleClickBeehiveButton=function(){e.currentSpawnObjId=ba.BEEHIVE_A,e.handleSpawnObject()},e.handleClickDogeButton=function(){e.currentSpawnObjId=ba.DOGE_A,e.handleSpawnObject()},e.handleClickThornBallButton=function(){e.currentSpawnObjId=ba.THORN_BALL,e.handleSpawnObject()},e.handleClickBigBeeButton=function(){e.currentSpawnObjId=ba.BIG_BEE,e.handleSpawnObject()},e.handleClickThornButton=function(){e.currentSpawnObjId=ba.THORN,e.handleSpawnObject()},e.handleClickAirFanButton=function(){e.currentSpawnObjId=ba.AIR_FAN,e.handleSpawnObject()},e.handleClickBrickButton=function(){e.currentSpawnObjId=ba.BRICK,e.handleSpawnPolygonObject()},e.handleClickGrassButton=function(){e.currentSpawnObjId=ba.GRASS,e.handleSpawnPolygonObject()},e.handleClickGrassDarkButton=function(){e.currentSpawnObjId=ba.GRASS_DARK,e.handleSpawnPolygonObject()},e.handleClickLineButton=function(){e.currentSpawnObjId=ba.LINE,e.handleSpawnPolygonObject()},e.handleClickPoisonButton=function(){e.currentSpawnObjId=ba.POISON,e.handleSpawnPolygonObject()},e.handleClickPoisonSurfaceButton=function(){e.currentSpawnObjId=ba.POISON_SURFACE,e.handleSpawnPolygonObject()},e.handleClickWaterButton=function(){e.currentSpawnObjId=ba.WATER,e.handleSpawnPolygonObject()},e.handleClickDangerAreaButton=function(){e.currentSpawnObjId=ba.DANGER_AREA,e.handleSpawnPolygonObject()},e}return r(l,[{key:"start",value:function(){this.handleToggleDevToolsButton(),this.handleGameLevelButtons(),this.handleItemButtons(),this.handleEngineButtons(),this.handleSpawnObjectButtons(),this.handleSwitchSceneButtons()}},{key:"handleToggleDevToolsButton",value:function(){this.devToolsButton.on(R.EventType.TOUCH_START,this.handleClickDevToolsButton)}},{key:"handleGameLevelButtons",value:function(){this.winLevelButton.on(R.EventType.TOUCH_START,this.handleClickWinLevelButton),this.loseLevelButton.on(R.EventType.TOUCH_START,this.handleClickLoseLevelButton),this.prevLevelButton.on(R.EventType.TOUCH_START,this.handleClickPrevLevelButton),this.nextLevelButton.on(R.EventType.TOUCH_START,this.handleClickNextLevelButton)}},{key:"handleItemButtons",value:function(){this.hintButton.on(R.EventType.TOUCH_START,this.handleClickHintButton)}},{key:"handleEngineButtons",value:function(){this.buildVersionButton.on(R.EventType.TOUCH_START,this.handleClickBuildVersionButton),this.physicButton.on(R.EventType.TOUCH_START,this.handleClickPhysicButton),this.bundleButton.on(R.EventType.TOUCH_START,this.handleSwitchBundle)}},{key:"handleSpawnObjectButtons",value:function(){this.beehiveButton.on(R.EventType.TOUCH_START,this.handleClickBeehiveButton),this.dogeButton.on(R.EventType.TOUCH_START,this.handleClickDogeButton),this.thornBallButton.on(R.EventType.TOUCH_START,this.handleClickThornBallButton),this.bigBeeButton.on(R.EventType.TOUCH_START,this.handleClickBigBeeButton),this.thornButton.on(R.EventType.TOUCH_START,this.handleClickThornButton),this.airFanButton.on(R.EventType.TOUCH_START,this.handleClickAirFanButton),this.brickButton.on(R.EventType.TOUCH_START,this.handleClickBrickButton),this.grassButton.on(R.EventType.TOUCH_START,this.handleClickGrassButton),this.grassDarkButton.on(R.EventType.TOUCH_START,this.handleClickGrassDarkButton),this.lineButton.on(R.EventType.TOUCH_START,this.handleClickLineButton),this.poisonButton.on(R.EventType.TOUCH_START,this.handleClickPoisonButton),this.poisonSurfaceButton.on(R.EventType.TOUCH_START,this.handleClickPoisonSurfaceButton,this),this.waterButton.on(R.EventType.TOUCH_START,this.handleClickWaterButton),this.dangerAreaButton.on(R.EventType.TOUCH_START,this.handleClickDangerAreaButton)}},{key:"handleSwitchSceneButtons",value:function(){this.dashboardButton.on(R.EventType.TOUCH_START,this.handleClickDashboardButton)}},{key:"injectGameplay",value:function(e){this.gameplay=e,this.gameObjects=e.gameObjects}},{key:"hideAllButtons",value:function(){var e=this;this.getComponentsInChildren(k).forEach((function(t){t.node.name!==e.devToolsButton.name&&(t.node.active=!1)}))}},{key:"showAllButtons",value:function(){var e=this;this.getComponentsInChildren(k).forEach((function(t){t.node.name!==e.devToolsButton.name&&(t.node.active=!0)}))}},{key:"getCurrentLevel",value:function(){if(!this.gameplay)return null;var e=this.gameplay.getGameData();return e&&e.level||null}},{key:"handleEnterSelectLevel",value:function(e){var t=Number(e.string);this.node.scene.emit(oo.SELECT_LEVEL,{level:t})}},{key:"handleSpawnObject",value:function(){var e;if(this.validateRequiredComponents(),-1!==this.currentSpawnObjId){var t={x:Math.floor(40*Math.random()),y:Math.floor(40*Math.random())},n={id:this.currentSpawnObjId,point:t};null===(e=this.gameObjects)||void 0===e||e.spawnObjectForDevTools(n)}}},{key:"handleSpawnPolygonObject",value:function(){var e;if(this.validateRequiredComponents(),-1!==this.currentSpawnObjId){var t={x:Math.floor(40*Math.random()),y:Math.floor(40*Math.random())},n={x:t.x+Math.floor(10*Math.random()),y:t.y},i={x:t.x,y:t.y+Math.floor(10*Math.random())},a=[t,n,i,{x:n.x,y:i.y}],o={id:this.currentSpawnObjId,point:a};null===(e=this.gameObjects)||void 0===e||e.spawnPolygonObjectForDevTools(o)}}},{key:"validateRequiredComponents",value:function(){Le.lazyValidateProperties(this)}},{key:"handleSwitchBundle",value:function(){C.emit(De.CHANGE_QUALITY_ASSETS)}}]),l}(b)).prototype,"devToolsButton",[Lh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rd=e(ad.prototype,"winLevelButton",[Dh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),sd=e(ad.prototype,"loseLevelButton",[Ih],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ld=e(ad.prototype,"buildVersionButton",[Nh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ud=e(ad.prototype,"prevLevelButton",[Gh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cd=e(ad.prototype,"nextLevelButton",[Fh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),hd=e(ad.prototype,"selectLevelButton",[Mh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),dd=e(ad.prototype,"hintButton",[zh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pd=e(ad.prototype,"physicButton",[xh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vd=e(ad.prototype,"bundleButton",[Uh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yd=e(ad.prototype,"beehiveButton",[Hh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fd=e(ad.prototype,"dogeButton",[jh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),md=e(ad.prototype,"thornBallButton",[Vh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gd=e(ad.prototype,"bigBeeButton",[Wh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bd=e(ad.prototype,"thornButton",[Kh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Sd=e(ad.prototype,"airFanButton",[qh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Cd=e(ad.prototype,"brickButton",[Yh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),kd=e(ad.prototype,"grassButton",[Jh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),wd=e(ad.prototype,"grassDarkButton",[Xh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ed=e(ad.prototype,"lineButton",[Zh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Td=e(ad.prototype,"poisonButton",[Qh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ad=e(ad.prototype,"poisonSurfaceButton",[$h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Rd=e(ad.prototype,"waterButton",[ed],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Bd=e(ad.prototype,"dangerAreaButton",[td],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Pd=e(ad.prototype,"dashboardButton",[nd],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),id=ad))||id);v._RF.pop(),v._RF.push({},"a3b0f6zU+1D97PyszsgST1H","UIManager",void 0);var Yd,Jd,Xd,Zd,Qd,$d,ep,tp,np,ip,ap,op,rp=y.ccclass,sp=y.property,lp=GameCore.Utils,up=(Gd=rp("UIManager"),Fd=sp(Jc),Md=sp(Nd),zd=sp(qd),Gd((Hd=e((Ud=function(e){t(l,e);var s=n(l);function l(){var e;i(this,l);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e=s.call.apply(s,[this].concat(n)),a(e,"clock",Hd,o(e)),a(e,"header",jd,o(e)),a(e,"devTools",Vd,o(e)),e.showDevTools=function(){e.devTools&&(e.devTools.node.active=!0)},e}return r(l,[{key:"onLoad",value:function(){this.validateRequiredComponents(),this.listensDevToolsEvents()}},{key:"validateRequiredComponents",value:function(){Le.lazyValidateProperties(this)}},{key:"listensDevToolsEvents",value:function(){this.node.scene.on(oa.Events.UNLOCK_DEV_TOOLS,this.showDevTools)}},{key:"initDevTools",value:function(e){this.devTools&&(this.devTools.node.active=lp.Valid.isDebugger(),this.devTools.injectGameplay(e))}},{key:"setLevelText",value:function(e){this.header.setLevelText(e)}},{key:"initCountdown",value:function(){this.clock.init()}},{key:"startCountdown",value:function(){this.clock.startCountdown()}},{key:"pauseCountdown",value:function(){this.clock.pause()}},{key:"resumeCountdown",value:function(){this.clock.resume()}},{key:"showUncompletedMark",value:function(){this.clock.showUncompletedMark()}},{key:"showCompletedMark",value:function(){this.clock.showCompletedMark()}},{key:"setProgressBarPercentage",value:function(e){this.header.setProgress(e)}},{key:"setProgressStars",value:function(e){this.header.setProgressStars(e)}},{key:"startCountDownHeaderHintBubbleAnim",value:function(){this.header.startCountDownHintBubble()}},{key:"stopCountDownHeaderHintBubbleAnim",value:function(){this.header.stopCountDownHintBubble()}},{key:"disableUI",value:function(){this.header.disableButtons()}},{key:"enableUI",value:function(){this.header.enableButtons()}},{key:"disableHintButton",value:function(){this.header.disableHintButton()}},{key:"disableRewardAdsUI",value:function(){this.header.disableRewardAdsButton()}}]),l}(b)).prototype,"clock",[Fd],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),jd=e(Ud.prototype,"header",[Md],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Vd=e(Ud.prototype,"devTools",[zd],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),xd=Ud))||xd);v._RF.pop(),v._RF.push({},"157f203vjtMma2FDvAlyM6h","Gameplay",void 0);var cp,hp=y.ccclass,dp=y.requireComponent,pp=y.property,vp=globalThis.game.player,yp=(Yd=hp("Gameplay"),Jd=dp([Gc,qu,Ku]),Xd=pp(wu),Zd=pp(Vu),Qd=pp(xu),$d=pp(mu),Yd(ep=Jd((np=e((tp=function(e){t(l,e);var s=n(l);function l(){var e;i(this,l);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e=s.call.apply(s,[this].concat(n)),a(e,"hint",np,o(e)),a(e,"gameMap",ip,o(e)),a(e,"lineDrawer",ap,o(e)),a(e,"gameObjects",op,o(e)),e.gameData=null,e.defaultData=null,e.handleStartGame=function(t){if(!t)throw new Error("handleStartGame: GameEvent payload is not defined");e.setGameData(t),e.stateManager.draw()},e.handlePauseGame=function(t){e.pauseGame(),Me.pauseSound(xe.BEE_FLYING),e.processCrazyGamesGameplayStop()},e.handleResumeGame=function(t){e.resumeGame(),Me.resumeSound(xe.BEE_FLYING),e.processCrazyGamesGameplayStart()},e.handleReplayGame=function(t){var n=h(h({},e.defaultData),t);e.setGameData(n),e.stateManager.initialize()},e.handleNextLevel=function(t){e.gameData&&(e.updatePlayerLevelProgress(t),e.stateManager.load(),e.attemptCallCreateShortcut())},e.updatePlayerLevelProgress=function(t){if(e.gameData){if(!t)throw new Error("handleNextLevel: GameEvent payload is not defined");var n=e.gameData,i=n.level,a=n.nextLevelCount,o=void 0===a?0:a,r=t.level,s=void 0===r?i:r;if(!s)throw new Error("Level is not defined");var l=s+1;vp.setGameData({level:l});var u=h(h(h({},e.defaultData),t),{},{level:l,nextLevelCount:o+1});e.setGameData(u)}},e.handleStartOver=function(t){vp.setGameData({level:1,passAllLevels:!1});var n=h(h(h({},e.defaultData),t),{},{level:1});e.setGameData(n),e.stateManager.load()},e.handleSelectLevel=function(t){var n;if(!t)throw new Error("handleSelectLevel: GameEvent payload is not defined");var i=t.level;if(i){var a=(null!==(n=vp.getGameData())&&void 0!==n?n:{}).totalLevel,o=void 0===a?i:a,r=i<1?1:i;r=r>o?o:r;var s=h(h(h({},e.defaultData),t),{},{level:r});vp.setGameData({level:r}),e.setGameData(s),e.stateManager.load()}},e.handleClockTimeout=function(t){e.stateManager.escape()},e.handleDrawing=function(t){if(!t)throw new Error("handleDrawing: GameEvent payload is not defined");e.setGameData(t)},e.handleBeeDie=function(t){var n;(null===(n=e.gameObjects)||void 0===n?void 0:n.checkAllBeeDie())&&(e.stateManager.escape(),e.processCrazyGamesHappyTime())},e.handleBigBeeDie=function(t){var n;(null===(n=e.gameObjects)||void 0===n?void 0:n.checkAllBeeDie())&&(e.stateManager.escape(),e.processCrazyGamesHappyTime())},e.handleBeeAttack=function(t){e.stateManager.attack()},e.handleDogeDie=function(t){e.stateManager.death()},e.handleDogeSurvive=function(t){e.stateManager.escape()},e.handleShowHint=function(){var t=d((function*(t){var n,i,a;if((null===(n=e.hint)||void 0===n||!n.getIsHintShow())&&e.stateManager.isReady()){var o=(null!=t?t:{}).noAd,r=void 0!==o&&o;if(e.uiManager.stopCountDownHeaderHintBubbleAnim(),!r)if(!(yield Ve.showRewardVideoAdAsync({})))return;var s=(null!==(i=e.gameData)&&void 0!==i?i:{}).levelData;if(!s)throw new Error("Level data is not defined");var l=s.tips,u=pu.transformPointsFromMapToDrawAreaCoordinate(l);null===(a=e.hint)||void 0===a||a.showHint(u,!1)}}));return function(e){return t.apply(this,arguments)}}(),e.handleSkipLevel=function(){var t=d((function*(t){e.stateManager.isReady()&&((yield Ve.showRewardVideoAdAsync({}))&&e.node.scene.emit(oo.DOGE_SURVIVE),e.node.scene.emit(oo.GAME_RESUME))}));return function(e){return t.apply(this,arguments)}}(),e}return r(l,[{key:"__preload",value:function(){this.initComponents(),this.validateRequiredComponents(),this.listenInputEvents(),Ve.showBannerAds()}},{key:"initComponents",value:function(){this.initUIManager(),this.initStateManager(),this.initInputController(),this.initInkCapacityController()}},{key:"initUIManager",value:function(){var e;this.uiManager=null===(e=this.node.parent)||void 0===e?void 0:e.getComponentInChildren(up)}},{key:"initStateManager",value:function(){this.stateManager=this.getComponent(Gc)}},{key:"initInputController",value:function(){this.inputController=this.getComponent(qu)}},{key:"initInkCapacityController",value:function(){this.inkCapacityController=this.getComponent(Ku)}},{key:"validateRequiredComponents",value:function(){Le.lazyValidateProperties(this)}},{key:"listenInputEvents",value:function(){this.node.scene.on(oo.GAME_START,this.handleStartGame),this.node.scene.on(oo.GAME_PAUSE,this.handlePauseGame),this.node.scene.on(oo.GAME_RESUME,this.handleResumeGame),this.node.scene.on(oo.GAME_REPLAY,this.handleReplayGame),this.node.scene.on(oo.NEXT_LEVEL,this.handleNextLevel),this.node.scene.on(oo.UPDATE_LEVEL,this.updatePlayerLevelProgress),this.node.scene.on(oo.START_OVER,this.handleStartOver),this.node.scene.on(oo.SELECT_LEVEL,this.handleSelectLevel),this.node.scene.on(oo.DRAWING,this.handleDrawing),this.node.scene.on(oo.TIME_OUT,this.handleClockTimeout),this.node.scene.on(oo.BEE_DIE,this.handleBeeDie),this.node.scene.on(oo.BIG_BEE_DIE,this.handleBigBeeDie),this.node.scene.on(oo.BEE_ATTACK,this.handleBeeAttack),this.node.scene.on(oo.DOGE_DIE,this.handleDogeDie),this.node.scene.on(oo.DOGE_SURVIVE,this.handleDogeSurvive),this.node.scene.on(oo.SHOW_HINT,this.handleShowHint),this.node.scene.on(oo.SKIP_LEVEL,this.handleSkipLevel)}},{key:"start",value:function(){this.initData(),this.initGame(),this.initDevTools()}},{key:"initDevTools",value:function(){this.uiManager.initDevTools(this)}},{key:"initData",value:function(){var e,t=(null!==(e=vp.getGameData())&&void 0!==e?e:{}).level,n=void 0===t?1:t;this.defaultData={level:n,gameplayMode:"level",nextLevelCount:0,isFromLoader:!1},this.setGameData(this.defaultData)}},{key:"initGame",value:function(){this.stateManager.init(),this.stateManager.load()}},{key:"setGameData",value:function(e){e&&(this.gameData=h(h({},this.gameData),e))}},{key:"getGameData",value:function(){return this.gameData}},{key:"pauseGame",value:function(){this.node.active=!1,this.node.pauseSystemEvents(!0),this.uiManager.pauseCountdown()}},{key:"resumeGame",value:function(){this.node.active=!0,this.node.resumeSystemEvents(!0),this.uiManager.resumeCountdown()}},{key:"attemptCallCreateShortcut",value:function(){var e,t=null!==(e=this.getGameData())&&void 0!==e?e:{},n=t.level,i=void 0===n?0:n,a=t.nextLevelCount;i<2||(void 0===a?0:a)<2||"checkAndCreateShortcutAsync"in GameSDK.extra&&GameSDK.extra.checkAndCreateShortcutAsync().catch((function(e){console.warn("checkAndCreateShortcutAsync",e)}))}},{key:"processCrazyGamesGameplayStart",value:function(){"gameplayStart"in GameSDK.extra&&GameSDK.extra.gameplayStart()}},{key:"processCrazyGamesGameplayStop",value:function(){"gameplayStop"in GameSDK.extra&&GameSDK.extra.gameplayStop()}},{key:"processCrazyGamesHappyTime",value:function(){"happyTime"in GameSDK.extra&&GameSDK.extra.happyTime()}},{key:"disableRewardAdsItemForCrazyGames",value:function(){"CrazyGames"===GameSDK.getSDKName()&&this.uiManager.disableRewardAdsUI()}}]),l}(b)).prototype,"hint",[Xd],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ip=e(tp.prototype,"gameMap",[Zd],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ap=e(tp.prototype,"lineDrawer",[Qd],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),op=e(tp.prototype,"gameObjects",[$d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ep=tp))||ep)||ep);v._RF.pop(),v._RF.push({},"bfd3fZcEttGVawFb2B3Gmqu","DangerArea",void 0);var fp,mp,gp,bp,Sp,Cp,kp,wp,Ep,Tp,Ap,Rp,Bp,Pp,_p;(0,y.ccclass)("DangerArea")(cp=function(e){t(o,e);var a=n(o);function o(){var e;i(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=a.call.apply(a,[this].concat(n))).useBatch=!1,e.dangerPolygons=[],e}return r(o,[{key:"addDangerAreaPolygon",value:function(e){this.dangerPolygons.push(e)}},{key:"addRigidBody",value:function(){var e=this.node.addComponent(M);e?(e.group=Sa.MAIN_OBJECT,e.type=F.Static):console.warn("Cannot add RigidBody2D")}},{key:"applyColliderForBatchDraw",value:function(){var e,t=this.dangerPolygons.map((function(e){return e.map((function(e){var t=e.x,n=e.y;return new x(t,n)}))})),n=s(t);try{for(n.s();!(e=n.n()).done;){var i=e.value,a=new R;a.name=ha.DANGER_AREA,this.node.addChild(a),a.setPosition(0,0);var o=a.addComponent(M);o.type=F.Static,o.group=Sa.MAIN_OBJECT;var r=a.addComponent(ee);r.points=i,r.apply()}}catch(e){n.e(e)}finally{n.f()}}},{key:"batchDrawAllDangerAreas",value:function(){if(!(this.dangerPolygons.length<1)){var e=this.node.getComponent(Yr);if(!e)return console.warn("DangerArea: GraphicsPattern not found"),null;this.addRigidBody(),e.setColor("#fc03036d");var t,n=s(this.dangerPolygons);try{for(n.s();!(t=n.n()).done;){var i=t.value;e.draw(i)}}catch(e){n.e(e)}finally{n.f()}this.applyColliderForBatchDraw()}}}]),o}(b));v._RF.pop(),v._RF.push({},"0daa9+mtbVHG5tVordU0a3q","Spider",void 0);var Op,Lp,Dp,Ip,Np,Gp,Fp,Mp=y.ccclass,zp=y.property;fp=Mp("Spider"),mp=zp(R),gp=zp(R),bp=zp(R),Sp=zp(U),Cp=zp(M),kp=zp(P),fp((Tp=e((Ep=function(e){t(l,e);var s=n(l);function l(){var e;i(this,l);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e=s.call.apply(s,[this].concat(n)),a(e,"spider",Tp,o(e)),a(e,"web",Ap,o(e)),a(e,"silk",Rp,o(e)),e.isStunned=!1,a(e,"spiderCollider",Bp,o(e)),a(e,"spiderRigidBody",Pp,o(e)),a(e,"silkGraphics",_p,o(e)),e.onSpiderCollisionEnter=function(t,n){if(!e.isStunned){e.isStunned=!0;var i=n.getComponent(Io),a=n.getComponent(rl);if(i||a){var o=e.spider.addComponent(pe),r=e.spider.worldPosition,s=n.node,l=s.worldPosition,u=s.getComponent(M);if(i){var c=i.findNearestCollider(r);o.connectedAnchor=c.offset.clone()}else o.connectedAnchor=new x(r.x-l.x,r.y-l.y);o.autoCalcDistance=!1,o.maxLength=5,o.collideConnected=!1,o.connectedBody=u}}},e}return r(l,[{key:"onLoad",value:function(){this.spiderCollider=this.spider.getComponent(U),this.spiderRigidBody=this.spider.getComponent(M),this.silkGraphics=this.silk.getComponent(P),this.validateRequiredComponents()}},{key:"onDestroy",value:function(){this.spiderCollider.off(H.BEGIN_CONTACT,this.onSpiderCollisionEnter)}},{key:"validateRequiredComponents",value:function(){Le.lazyValidateProperties(this)}},{key:"start",value:function(){this.enabled=!1,this.isStunned=!1,this.silkOffsetVector=new x,this.spiderCollider.on(H.BEGIN_CONTACT,this.onSpiderCollisionEnter)}},{key:"update",value:function(){if(this.enabled)if(this.drawSilk(),this.isStunned){var e=this.getVectorDataFromAToB(this.spider.worldPosition,this.web.worldPosition);this.spiderRigidBody.linearVelocity=e.vector.multiplyScalar(5),this.spiderRigidBody.linearDamping=0,this.isSpiderTooCloseToWeb()&&(this.spiderRigidBody.type=F.Static,this.enabled=!1)}else{var t=this.spider.position.add3f(0,-3,0);this.spider.setPosition(t)}}},{key:"drawSilk",value:function(){var e=this.web.position,t=this.spider.position,n=j.toRadian(this.spider.eulerAngles.z);this.silkGraphics.clear(),this.silkGraphics.moveTo(e.x,e.y),this.silkOffsetVector.set(0,50).rotate(n),this.silkGraphics.lineTo(t.x+this.silkOffsetVector.x,t.y+this.silkOffsetVector.y),this.silkGraphics.stroke()}},{key:"isSpiderTooCloseToWeb",value:function(){var e=this.spider.position,t=this.web.position;return T.distance(e,t)<40}}]),l}(_a)).prototype,"spider",[mp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ap=e(Ep.prototype,"web",[gp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Rp=e(Ep.prototype,"silk",[bp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Bp=e(Ep.prototype,"spiderCollider",[Sp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Pp=e(Ep.prototype,"spiderRigidBody",[Cp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_p=e(Ep.prototype,"silkGraphics",[kp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),wp=Ep));v._RF.pop(),v._RF.push({},"8fe7bkzdtdNfY7I8uaDov+b","EndlessHeader",void 0);var xp,Up,Hp,jp,Vp,Wp,Kp,qp,Yp,Jp,Xp,Zp=y.ccclass,Qp=y.property,$p=(Op=Zp("EndlessHeader"),Lp=Qp(R),Dp=Qp(R),Op((Gp=e((Np=function(e){t(l,e);var s=n(l);function l(){var e;i(this,l);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e=s.call.apply(s,[this].concat(n)),a(e,"pauseNode",Gp,o(e)),a(e,"replayNode",Fp,o(e)),e}return r(l,[{key:"__preload",value:function(){this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){Le.lazyValidateProperties(this)}},{key:"handleClickedPauseGame",value:function(){this.showSettingScreen(),this.node.scene.emit(oo.GAME_PAUSE)}},{key:"handleClickedReplayGame",value:function(){this.node.scene.emit(oo.GAME_REPLAY)}},{key:"showSettingScreen",value:function(){He.openScreen(je.SETTINGS_SCREEN,{})}},{key:"disableButtons",value:function(){this.enableBtnNode(this.pauseNode,!1,!0),this.enableBtnNode(this.replayNode,!1,!0)}},{key:"enableButtons",value:function(){this.enableBtnNode(this.pauseNode,!0,!0),this.enableBtnNode(this.replayNode,!0,!0)}},{key:"enableBtnNode",value:function(e,t,n){var i=e.getComponent(k);if(i&&(i.interactable=t),e.active=n,n){var a=e.getComponent(Xt);a&&a.changeState(t)}}}]),l}(b)).prototype,"pauseNode",[Lp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Fp=e(Np.prototype,"replayNode",[Dp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ip=Np))||Ip);v._RF.pop(),v._RF.push({},"bc951s11zREU72nQBqwoD3m","EndlessClock",void 0);var ev,tv,nv,iv,av,ov,rv,sv,lv,uv=y.ccclass,cv=y.disallowMultiple,hv=y.property,dv=(xp=uv("EndlessClock"),Up=hv(O),Hp=hv(O),jp=hv(f),Vp=hv(S),xp(Wp=cv((qp=e((Kp=function(e){t(l,e);var s=n(l);function l(){var e;i(this,l);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e=s.call.apply(s,[this].concat(n)),a(e,"timeText",qp,o(e)),a(e,"bestTimeText",Yp,o(e)),a(e,"animation",Jp,o(e)),a(e,"clockFill",Xp,o(e)),e.elapsedTime=0,e.bestTime=0,e.running=!1,e}return r(l,[{key:"__preload",value:function(){this.validateRequiredComponents()}},{key:"start",value:function(){this.animation.stop(),this.clockFill.fillRange=0}},{key:"validateRequiredComponents",value:function(){Le.lazyValidateProperties(this)}},{key:"getScore",value:function(){return this.elapsedTime}},{key:"getBestScore",value:function(){return Math.max(this.bestTime,this.elapsedTime)}},{key:"setBestScore",value:function(e){this.bestTime=e;var t=Math.floor(e/60),n=Math.floor(e%60),i=t.toString().padStart(2,"0"),a=n.toString().padStart(2,"0");this.bestTimeText.string="".concat(i,":").concat(a)}},{key:"init",value:function(){this.running=!1,this.node.active=!0,this.animation.stop(),this.clockFill.fillRange=0,this.setElapsedTime(0),this.setBestScore(this.bestTime)}},{key:"startCounting",value:function(){this.running=!0,this.node.active=!0,this.animation.play(),this.setElapsedTime(0),this.setBestScore(this.bestTime)}},{key:"stopCounting",value:function(){this.running=!1,this.node.active=!1,this.animation.stop(),this.clockFill.fillRange=0}},{key:"pause",value:function(){this.running=!1,this.animation.pause()}},{key:"resume",value:function(){this.running=!0,this.animation.play()}},{key:"update",value:function(e){this.running&&this.setElapsedTime(this.elapsedTime+e)}},{key:"setElapsedTime",value:function(e){this.elapsedTime=e;var t=Math.floor(this.elapsedTime/60),n=Math.floor(this.elapsedTime%60),i=t.toString().padStart(2,"0"),a=n.toString().padStart(2,"0");this.timeText.string="".concat(i,":").concat(a),this.elapsedTime>this.bestTime&&this.setBestScore(this.elapsedTime)}}]),l}(b)).prototype,"timeText",[Up],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Yp=e(Kp.prototype,"bestTimeText",[Hp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Jp=e(Kp.prototype,"animation",[jp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Xp=e(Kp.prototype,"clockFill",[Vp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Wp=Kp))||Wp)||Wp);v._RF.pop(),v._RF.push({},"346956Nk9hPgpT3ZCsaVr+P","EndlessUIManager",void 0);var pv,vv,yv,fv,mv,gv,bv,Sv,Cv,kv,wv,Ev,Tv,Av,Rv,Bv,Pv=y.ccclass,_v=y.property,Ov=GameCore.Utils,Lv=(ev=Pv("EndlessUIManager"),tv=_v(dv),nv=_v($p),iv=_v(qd),ev((rv=e((ov=function(e){t(l,e);var s=n(l);function l(){var e;i(this,l);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e=s.call.apply(s,[this].concat(n)),a(e,"clock",rv,o(e)),a(e,"header",sv,o(e)),a(e,"devTools",lv,o(e)),e.showDevTools=function(){e.devTools&&(e.devTools.node.active=!0)},e}return r(l,[{key:"onLoad",value:function(){this.validateRequiredComponents(),this.listensDevToolsEvents()}},{key:"validateRequiredComponents",value:function(){Le.lazyValidateProperties(this)}},{key:"listensDevToolsEvents",value:function(){this.node.scene.on(oa.Events.UNLOCK_DEV_TOOLS,this.showDevTools)}},{key:"initDevTools",value:function(e){this.devTools&&(this.devTools.node.active=Ov.Valid.isDebugger(),this.devTools.injectGameplay(e))}},{key:"getBestScore",value:function(){return this.clock.getBestScore()}},{key:"setBestScore",value:function(e){this.clock.setBestScore(e)}},{key:"initCounting",value:function(){this.clock.init()}},{key:"startCounting",value:function(){this.clock.startCounting()}},{key:"stopCounting",value:function(){this.clock.stopCounting()}},{key:"pauseCounting",value:function(){this.clock.pause()}},{key:"resumeCounting",value:function(){this.clock.resume()}},{key:"disableUI",value:function(){this.header.disableButtons()}},{key:"enableUI",value:function(){this.header.enableButtons()}}]),l}(b)).prototype,"clock",[tv],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),sv=e(ov.prototype,"header",[nv],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),lv=e(ov.prototype,"devTools",[iv],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),av=ov))||av);v._RF.pop(),v._RF.push({},"9d32c879Q1FRIas0BgO+iNP","EndlessGameplay",void 0);var Dv=y.ccclass,Iv=y.property,Nv=y.requireComponent,Gv=globalThis.game.player,Fv=(pv=Dv("EndlessGameplay"),vv=Nv(q),yv=Iv({type:J,group:"Thorns"}),fv=Iv({type:R,group:"Thorns"}),mv=Iv({type:R,group:"Thorns"}),gv=Iv({type:R,group:"Thorns"}),bv=Iv({type:R,group:"Thorns"}),Sv=Iv(mu),pv(Cv=vv((wv=e((kv=function(e){t(l,e);var s=n(l);function l(){var e;i(this,l);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=s.call.apply(s,[this].concat(n))).gameData=null,e.defaultData=null,a(e,"thornPrefab",wv,o(e)),a(e,"bottomThorns",Ev,o(e)),a(e,"topThorns",Tv,o(e)),a(e,"leftThorns",Av,o(e)),a(e,"rightThorns",Rv,o(e)),a(e,"gameObjects",Bv,o(e)),e.handleStartGame=function(t){if(!t)throw new Error("handleStartGame: GameEvent payload is not defined");e.setGameData(t),e.stateManager.play()},e.handlePauseGame=function(t){e.pauseGame(),Me.pauseSound(xe.BEE_FLYING),e.processCrazyGamesGameplayStop()},e.handleResumeGame=function(t){e.resumeGame(),Me.resumeSound(xe.BEE_FLYING),e.processCrazyGamesGameplayStart()},e.handleReplayGame=function(t){var n=h(h({},e.gameData),t);e.setGameData(n),e.stateManager.initialize(),e.node.active=!0,e.node.resumeSystemEvents(!0)},e.handleDogeDie=function(){e.stateManager.death(),e.attemptCallCreateShortcut()},e.handleBeeDie=function(t){var n;(null===(n=e.gameObjects)||void 0===n?void 0:n.checkAllBeeDie())&&e.processCrazyGamesHappyTime()},e.handleBigBeeDie=function(t){var n;(null===(n=e.gameObjects)||void 0===n?void 0:n.checkAllBeeDie())&&e.processCrazyGamesHappyTime()},e}return r(l,[{key:"__preload",value:function(){this.initComponents(),this.uiTransform=this.getComponent(q),this.validateRequiredComponents(),this.listenInputEvents(),Ve.showBannerAds()}},{key:"initComponents",value:function(){this.initUIManager(),this.initStateManager()}},{key:"initUIManager",value:function(){var e;this.uiManager=null===(e=this.node.parent)||void 0===e?void 0:e.getComponentInChildren(Lv)}},{key:"initStateManager",value:function(){this.stateManager=this.getComponent(uy)}},{key:"validateRequiredComponents",value:function(){Le.lazyValidateProperties(this)}},{key:"listenInputEvents",value:function(){this.node.scene.on(oo.GAME_START,this.handleStartGame),this.node.scene.on(oo.GAME_PAUSE,this.handlePauseGame),this.node.scene.on(oo.GAME_RESUME,this.handleResumeGame),this.node.scene.on(oo.GAME_REPLAY,this.handleReplayGame),this.node.scene.on(oo.BEE_DIE,this.handleBeeDie),this.node.scene.on(oo.BIG_BEE_DIE,this.handleBigBeeDie),this.node.scene.on(oo.DOGE_DIE,this.handleDogeDie)}},{key:"start",value:function(){this.initData(),this.initGame(),this.initObjects(),this.initDevTools(),this.uiManager.startCounting()}},{key:"initDevTools",value:function(){this.uiManager.initDevTools(this)}},{key:"initData",value:function(){var e,t=null!==(e=Gv.getGameData())&&void 0!==e?e:{},n=t.level,i=void 0===n?1:n,a=t.bestEndlessScore,o=void 0===a?0:a;this.defaultData={level:i,bestEndlessScore:o,gameplayMode:"endless",nextLevelCount:0,isFromLoader:!1},this.setGameData(this.defaultData)}},{key:"initGame",value:function(){this.stateManager.init(),this.stateManager.load()}},{key:"setGameData",value:function(e){e&&(this.gameData=h(h({},this.gameData),e))}},{key:"getGameData",value:function(){return this.gameData}},{key:"pauseGame",value:function(){this.node.active=!1,this.node.pauseSystemEvents(!0),this.uiManager.pauseCounting()}},{key:"resumeGame",value:function(){this.node.active=!0,this.node.resumeSystemEvents(!0),this.uiManager.resumeCounting()}},{key:"attemptCallCreateShortcut",value:function(){var e,t=null!==(e=this.gameData)&&void 0!==e?e:{},n=t.level,i=void 0===n?0:n,a=t.nextLevelCount;i<2||(void 0===a?0:a)<2||"checkAndCreateShortcutAsync"in GameSDK.extra&&GameSDK.extra.checkAndCreateShortcutAsync().catch((function(e){console.warn("checkAndCreateShortcutAsync",e)}))}},{key:"initObjects",value:function(){var e=this.createThorn();if(!(e instanceof R))throw new Error("initObjects: Could not create thorn");var t=e.getComponent(q);if(!(t instanceof q))throw new Error("initObjects: Could not get UITransform of thorn");for(var n=this.uiTransform.getBoundingBoxToWorld(),i=n.width,a=n.height,o=Math.ceil(i/t.width),r=Math.ceil(a/t.height),s=0;s<o;s++)this.topThorns.addChild(this.createThorn()),this.bottomThorns.addChild(this.createThorn());for(var l=0;l<r;l++)this.leftThorns.addChild(this.createThorn()),this.rightThorns.addChild(this.createThorn());this.rightThorns.addChild(e),console.log("initObjects: Done",o,r)}},{key:"getBoundingBox",value:function(){return this.uiTransform.getBoundingBoxToWorld()}},{key:"getDogeSpawnPosition",value:function(){var e=this.uiTransform.getBoundingBoxToWorld().center;return[e.x,e.y]}},{key:"createThorn",value:function(){var e=X(this.thornPrefab);return e.name=ha.THORN,e}},{key:"processCrazyGamesGameplayStart",value:function(){"gameplayStart"in GameSDK.extra&&GameSDK.extra.gameplayStart()}},{key:"processCrazyGamesGameplayStop",value:function(){"gameplayStop"in GameSDK.extra&&GameSDK.extra.gameplayStop()}},{key:"processCrazyGamesHappyTime",value:function(){"happyTime"in GameSDK.extra&&GameSDK.extra.happyTime()}}]),l}(b)).prototype,"thornPrefab",[yv],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ev=e(kv.prototype,"bottomThorns",[fv],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Tv=e(kv.prototype,"topThorns",[mv],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Av=e(kv.prototype,"leftThorns",[gv],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Rv=e(kv.prototype,"rightThorns",[bv],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Bv=e(kv.prototype,"gameObjects",[Sv],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Cv=kv))||Cv)||Cv);v._RF.pop(),v._RF.push({},"43aefNoI9lJxJNh3LPuKYPt","BaseState",void 0);var Mv=function(){function e(t){if(i(this,e),this.game=null,this.data={},this.game=t.node.getComponent(Fv),!this.game)throw new Error("Gameplay component not found");this.manager=t,this.updateStateData(),this.logDebug()}return r(e,[{key:"logDebug",value:function(){var e=this.constructor.name;console.info("[STATE] ".concat(e),this.data)}},{key:"updateStateData",value:function(){if(this.game){var e=this.game.getGameData();e&&(this.data=e)}}},{key:"updateGameData",value:function(e){var t;null===(t=this.game)||void 0===t||t.setGameData(e),this.updateStateData()}}]),e}();v._RF.pop(),v._RF.push({},"109f0WH9r9IQqMHpvD45PzQ","DeathState",void 0);var zv=globalThis.game.analytics,xv=function(e){t(o,e);var a=n(o);function o(e){var t,n,r;return i(this,o),(r=a.call(this,e)).processCrazyGamesEvent(),r.disableUI(),Me.stopAllSounds(),r.vibrateDevice(),r.pauseCountdown(),r.logLevelFailAnalytics(),null===(t=r.game)||void 0===t||t.scheduleOnce((function(){r.stopDogesLooking(),Me.playSound(xe.LEVEL_FAIL,{volume:.3})}),.5),null===(n=r.game)||void 0===n||n.scheduleOnce((function(){r.sleepObjects(),r.showLoseScreen(),r.manager.finish()}),1.8),r}return r(o,[{key:"processCrazyGamesEvent",value:function(){"gameplayStop"in GameSDK.extra&&GameSDK.extra.gameplayStop()}},{key:"load",value:function(){}},{key:"initialize",value:function(){}},{key:"ready",value:function(){}},{key:"play",value:function(){}},{key:"death",value:function(){}},{key:"finish",value:function(){var e=this.manager.createFinishState();this.manager.change(e)}},{key:"update",value:function(){}},{key:"disableUI",value:function(){var e;null===(e=this.game)||void 0===e||e.uiManager.disableUI()}},{key:"sleepObjects",value:function(){var e;null===(e=this.game)||void 0===e||null===(e=e.gameObjects)||void 0===e||e.sleepObjects()}},{key:"pauseCountdown",value:function(){var e;null===(e=this.game)||void 0===e||e.uiManager.pauseCounting()}},{key:"stopDogesLooking",value:function(){var e;if(null!==(e=this.game)&&void 0!==e&&e.gameObjects){var t,n=this.game.gameObjects.getComponentsInChildren(rl),i=s(n);try{for(i.s();!(t=i.n()).done;){var a,o=t.value;null===(a=o.eyes)||void 0===a||a.stopLook(),o.setEnable(!1)}}catch(e){i.e(e)}finally{i.f()}}}},{key:"vibrateDevice",value:function(){var e;null===(e=oe("Vibrate"))||void 0===e||null===(e=e.getComponent(ia))||void 0===e||e.vibrate(500)}},{key:"showLoseScreen",value:function(){var e=this.data.level;He.openScreen(je.LOSE_SCREEN,{level:e})}},{key:"logLevelFailAnalytics",value:function(){zv.levelComplete(1,0,la)}}]),o}(Mv);v._RF.pop(),v._RF.push({},"638devCm49MrpqRRWptDInp","FinishState",void 0);var Uv=globalThis.game.player,Hv=function(e){t(s,e);var a,o=n(s);function s(e){var t;return i(this,s),t=o.call(this,e),Me.turnUpMusic(),Me.stopSound(xe.BEE_FLYING),t.finishGameAsync(),t}return r(s,[{key:"load",value:function(){var e=this.manager.createLoadingState();this.manager.change(e)}},{key:"initialize",value:function(){var e=this.manager.createInitializeState();this.manager.change(e)}},{key:"ready",value:function(){}},{key:"play",value:function(){}},{key:"death",value:function(){}},{key:"finish",value:function(){}},{key:"update",value:function(){}},{key:"finishGameAsync",value:(a=d((function*(){try{var e,t;if(!this.game)return;var n=this.game.uiManager.getBestScore(),i=null!==(e=null===(t=Uv.getGameData())||void 0===t?void 0:t.bestEndlessScore)&&void 0!==e?e:0,a=i<n?n:i;Uv.setGameData({bestEndlessScore:a}),this.updateGameData({bestEndlessScore:a}),yield pc.finishMatchAsync()}catch(e){console.error("finishGameAsync",e)}})),function(){return a.apply(this,arguments)})}]),s}(Mv);v._RF.pop(),v._RF.push({},"97260ZJNotE0LYFeNm4wsEz","InitializeState",void 0);var jv=function(e){t(l,e);var a,o,s=n(l);function l(e){var t;return i(this,l),t=s.call(this,e),"CrazyGames"===GameSDK.getSDKName()&&t.processCrazyGamesRequirements(),t.enableUI(),t.clearGameObjects(),t.createGameObjects(),t.initClock(),Me.playMusic(),t.startGameAsync().then((function(){t.closeLoadingScreen(),t.manager.ready()})),t}return r(l,[{key:"processCrazyGamesRequirements",value:function(){"gameplayStart"in GameSDK.extra&&GameSDK.extra.gameplayStart(),this.showInterAdsCrazyGames()}},{key:"showInterAdsCrazyGames",value:(o=d((function*(){this.game&&(Me.stopAllSounds(),yield Ve.showInterstitialAdAsync({forLevel:this.data.level,includeSDK:["CrazyGames"]}),Me.turnUpMusic())})),function(){return o.apply(this,arguments)})},{key:"load",value:function(){if(GameCore.Utils.Valid.isDebugger()){var e=this.manager.createLoadingState();this.manager.change(e)}}},{key:"initialize",value:function(){}},{key:"ready",value:function(){var e=this.manager.createReadyState();this.manager.change(e)}},{key:"play",value:function(){}},{key:"death",value:function(){var e=this.manager.createDeathState();this.manager.change(e)}},{key:"finish",value:function(){}},{key:"update",value:function(){}},{key:"closeLoadingScreen",value:function(){He.closeScreen(je.LOADING_SCREEN)}},{key:"enableUI",value:function(){var e;null===(e=this.game)||void 0===e||e.uiManager.enableUI()}},{key:"clearGameObjects",value:function(){var e;null!==(e=this.game)&&void 0!==e&&e.gameObjects&&this.game.gameObjects.clearObjects()}},{key:"createGameObjects",value:function(){var e,t,n,i=null!==(e=null===(t=this.game)||void 0===t?void 0:t.getDogeSpawnPosition())&&void 0!==e?e:[0,0],a=p(i,2),o=a[0],r=a[1],s=null===(n=this.game)||void 0===n?void 0:n.gameObjects.spawnDoge({x:o,y:r,right:!1,isWorldPosition:!0,rigidBodyConfig:{gravityScale:2}});if(!(s instanceof R))throw new Error("Could not create doge");var l=s.getComponent(M);if(!l)throw new Error("Could not get rigidBody");l.sleep()}},{key:"initClock",value:function(){var e,t;null===(e=this.game)||void 0===e||e.uiManager.initCounting();var n=this.data.bestEndlessScore,i=void 0===n?0:n;null===(t=this.game)||void 0===t||t.uiManager.setBestScore(i)}},{key:"startGameAsync",value:(a=d((function*(){try{if(this.data.isFromLoader)return void this.updateGameData({isFromLoader:!1});yield pc.startMatchAsync()}catch(e){console.error("startGameAsync",e)}})),function(){return a.apply(this,arguments)})}]),l}(Mv);v._RF.pop(),v._RF.push({},"ecbe0PxfZNJBLsmLBPc2pBD","LoadingState",void 0);var Vv=globalThis.game.player,Wv=function(e){t(o,e);var a=n(o);function o(e){var t,n,r,s;i(this,o),s=a.call(this,e);var l=null!==(t=null===(n=Vv.getGameData())||void 0===n?void 0:n.bestEndlessScore)&&void 0!==t?t:0;return s.updateGameData({bestEndlessScore:l}),He.showLoadingScreen(),null===(r=s.game)||void 0===r||r.scheduleOnce((function(){s.initialize()}),.5),s}return r(o,[{key:"load",value:function(){}},{key:"initialize",value:function(){var e=this.manager.createInitializeState();this.manager.change(e)}},{key:"ready",value:function(){}},{key:"play",value:function(){}},{key:"death",value:function(){}},{key:"finish",value:function(){}},{key:"update",value:function(){}}]),o}(Mv);v._RF.pop(),v._RF.push({},"651d4HD0HpFPLrL8dycqU3R","PlayingState",void 0);var Kv=globalThis.game.player;function qv(){var e=Object.keys(ra).map((function(e){return Number.parseInt(e)})).sort((function(e,t){return e-t})),t=0;return{current:function(){return e[t]},canGoNext:function(n){var i=t+1;return!(i>=e.length)&&n>e[i]},next:function(){if(t>=e.length-1)throw new Error("No more progressions");return e[t++]}}}var Yv=function(e){t(o,e);var a=n(o);function o(e){var t;return i(this,o),(t=a.call(this,e)).totalElapsed=0,t.spawnElapsed=0,t.spawnInterval=2,t.flyForce=18,t.progressionIt=qv(),t.onTouchStart=function(){t.dogeRigidBody.linearVelocity=new x(0,t.flyForce)},t.findDoge(),t.wakeUpObjects(),t.spawnEnemies(),t.startCounting(),Me.turnDownMusic(),t.listenInputEvents(),t}return r(o,[{key:"listenInputEvents",value:function(){var e,t;I.os===I.OS.WINDOWS||I.os===I.OS.OSX?(document.addEventListener("pointerdown",this.onTouchStart),null===(e=this.game)||void 0===e||e.node.on(R.EventType.MOUSE_DOWN,this.onTouchStart)):null===(t=this.game)||void 0===t||t.node.on(R.EventType.TOUCH_START,this.onTouchStart)}},{key:"unlistenInputEvents",value:function(){var e,t;I.os===I.OS.WINDOWS||I.os===I.OS.OSX?(document.removeEventListener("pointerdown",this.onTouchStart),null===(e=this.game)||void 0===e||e.node.off(R.EventType.MOUSE_DOWN,this.onTouchStart)):null===(t=this.game)||void 0===t||t.node.off(R.EventType.TOUCH_START,this.onTouchStart)}},{key:"findDoge",value:function(){var e,t=null===(e=this.game)||void 0===e||null===(e=e.gameObjects)||void 0===e?void 0:e.getRandomDogeToBee();if(!t)throw new Error("No doge found in GameObjects");this.doge=t;var n=this.doge.getComponent(M);if(!n)throw new Error("No rigid body found in doge");this.dogeRigidBody=n}},{key:"load",value:function(){this.unlistenInputEvents();var e=this.manager.createLoadingState();this.manager.change(e)}},{key:"initialize",value:function(){this.unlistenInputEvents(),Me.stopSound(xe.BEE_FLYING);var e=this.manager.createInitializeState();this.manager.change(e)}},{key:"ready",value:function(){}},{key:"play",value:function(){}},{key:"death",value:function(){this.unlistenInputEvents();var e=this.manager.createDeathState();this.manager.change(e)}},{key:"finish",value:function(){}},{key:"update",value:function(e){if(this.spawnElapsed+=e,this.totalElapsed+=e,this.progressionIt.canGoNext(this.totalElapsed)&&(this.progressionIt.next(),this.updateProgressionToPlugin()),this.spawnElapsed>this.spawnInterval){var t=this.progressionIt.current(),n=ra[t];this.handleSpawn(n),this.spawnElapsed=0}}},{key:"updateProgressionToPlugin",value:function(){var e;pc.setProfileMatchDataAsync({id:Kv.getPlayerId(),endlessScore:Math.round(null!==(e=this.data.bestEndlessScore)&&void 0!==e?e:0)})}},{key:"handleSpawn",value:function(e){if(!this.game)throw new Error("Game is not defined");var t=this.game.getBoundingBox(),n=0===j.randomRangeInt(0,2)?t.xMin-0:t.xMax+0,i=this.doge.node.worldPosition.y+j.randomRangeInt(-100,100),a=this.doge.node.getWorldPosition(),o=a.x,r=a.y,s=new T(n,i,0),l=s.x+2*(o-s.x),u=s.y+2*(r-s.y);this.spawnPredictionLine(s,l,u),this.spawnCrossingBee(o,r,s,e)}},{key:"spawnCrossingBee",value:function(e,t,n,i){var a=this;if(!this.game)throw new Error("Game is not defined. Only use this method in PlayingState");this.game.scheduleOnce((function(){a.game.gameObjects.spawnCrossingBees(h({playerWorldX:e,playerWorldY:t,spawnWorldX:n.x,spawnWorldY:n.y},i))}),1)}},{key:"spawnPredictionLine",value:function(e,t,n){if(!this.game)throw new Error("Game is not defined. Only use this method in PlayingState");var i=this.game.gameObjects.spawnCrossingBeeLine({startX:e.x,startY:e.y,endX:t,endY:n,spriteType:ws.LOW,thickness:0});ne(i).call((function(){Me.playSound(xe.BEE_FLYING)})).to(.5,{thickness:80},{easing:"expoOut"}).start(),this.game.scheduleOnce((function(){ne(i).to(.5,{thickness:0},{easing:"expoOut"}).call((function(){i.destroy(),Me.stopSound(xe.BEE_FLYING)})).start()}),1)}},{key:"wakeUpObjects",value:function(){var e;null===(e=this.game)||void 0===e||null===(e=e.gameObjects)||void 0===e||e.wakeUpObjects(),this.dogeRigidBody.wakeUp()}},{key:"spawnEnemies",value:function(){this.game&&this.game.gameObjects&&(this.game.gameObjects.spawnBees(),this.game.gameObjects.reviveBigBees())}},{key:"startCounting",value:function(){var e;null===(e=this.game)||void 0===e||e.uiManager.startCounting()}}]),o}(Mv);v._RF.pop(),v._RF.push({},"9516f5Gc/FENLPaNEZwDwcn","ReadyState",void 0);var Jv,Xv=globalThis.game.analytics,Zv=function(e){t(o,e);var a=n(o);function o(e){var t;return i(this,o),(t=a.call(this,e)).onTouchStart=function(){t.manager.play()},t.logLevelStartAnalytics(),t.listenInputEvents(),t}return r(o,[{key:"listenInputEvents",value:function(){var e,t;I.os===I.OS.WINDOWS||I.os===I.OS.OSX?(document.addEventListener("pointerdown",this.onTouchStart,{once:!0}),null===(e=this.game)||void 0===e||e.node.once(R.EventType.MOUSE_DOWN,this.onTouchStart)):null===(t=this.game)||void 0===t||t.node.once(R.EventType.TOUCH_START,this.onTouchStart)}},{key:"unlistenInputEvents",value:function(){var e,t;I.os===I.OS.WINDOWS||I.os===I.OS.OSX?(document.removeEventListener("pointerdown",this.onTouchStart),null===(e=this.game)||void 0===e||e.node.off(R.EventType.MOUSE_DOWN,this.onTouchStart)):null===(t=this.game)||void 0===t||t.node.off(R.EventType.TOUCH_START,this.onTouchStart)}},{key:"load",value:function(){if(this.unlistenInputEvents(),GameCore.Utils.Valid.isDebugger()){var e=this.manager.createLoadingState();this.manager.change(e)}}},{key:"initialize",value:function(){}},{key:"ready",value:function(){}},{key:"play",value:function(){this.unlistenInputEvents();var e=this.manager.createPlayingState();this.manager.change(e)}},{key:"death",value:function(){if(this.unlistenInputEvents(),GameCore.Utils.Valid.isDebugger()){var e=this.manager.createDeathState();this.manager.change(e)}}},{key:"finish",value:function(){}},{key:"update",value:function(){}},{key:"logLevelStartAnalytics",value:function(){Xv.levelStart(1,0,la)}}]),o}(Mv);v._RF.pop(),v._RF.push({},"946848BySlM54Wly5+1otNa","EndlessStateManager",void 0);var Qv,$v,ey,ty,ny,iy,ay,oy,ry,sy,ly,uy=(0,y.ccclass)("EndlessStateManager")(Jv=function(e){t(o,e);var a=n(o);function o(){return i(this,o),a.apply(this,arguments)}return r(o,[{key:"init",value:function(){this.state=new Wv(this)}},{key:"change",value:function(e){this.state=e}},{key:"load",value:function(){this.state.load()}},{key:"initialize",value:function(){this.state.initialize()}},{key:"isInitialize",value:function(){return this.state instanceof jv}},{key:"ready",value:function(){this.state.ready()}},{key:"isReady",value:function(){return this.state instanceof Zv}},{key:"play",value:function(){this.state.play()}},{key:"isPlaying",value:function(){return this.state instanceof Yv}},{key:"death",value:function(){this.state.death()}},{key:"isFailed",value:function(){return this.state instanceof xv}},{key:"finish",value:function(){this.state.finish()}},{key:"isFinished",value:function(){return this.state instanceof Hv}},{key:"update",value:function(e){this.state&&this.state.update(e)}},{key:"createInitializeState",value:function(){return new jv(this)}},{key:"createLoadingState",value:function(){return new Wv(this)}},{key:"createReadyState",value:function(){return new Zv(this)}},{key:"createPlayingState",value:function(){return new Yv(this)}},{key:"createDeathState",value:function(){return new xv(this)}},{key:"createFinishState",value:function(){return new Hv(this)}}]),o}(b))||Jv;v._RF.pop(),v._RF.push({},"78746Q4viBIlbRROK4J1bSl","Burst",void 0);var cy,hy=y.ccclass,dy=y.property,py=(Qv=hy("Burst"),$v=dy(ae),ey=dy(g),ty=dy(ae),ny=dy(g),Qv((oy=e((ay=function(){function e(){i(this,e),a(this,"time",oy,this),a(this,"repeatCount",ry,this),a(this,"repeatInterval",sy,this),a(this,"count",ly,this),this.remainingCount=0,this.curTime=0}return r(e,[{key:"update",value:function(e,t){if(0===this.remainingCount&&(this.remainingCount=this.repeatCount,this.curTime=this.time),this.remainingCount>0){var n=ve(e.time-e.startDelay.evaluate(0,1),e.duration)-t;n=n>0?n:0;var i=ve(e.time-e.startDelay.evaluate(0,1),e.duration);this.curTime>=n&&this.curTime<i&&(e.emit(this.count,t-(i-this.curTime)),this.curTime+=this.repeatInterval,--this.remainingCount)}}},{key:"reset",value:function(){this.remainingCount=0,this.curTime=0}}]),e}()).prototype,"time",[$v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ry=e(ay.prototype,"repeatCount",[ey],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),sy=e(ay.prototype,"repeatInterval",[ty],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),ly=e(ay.prototype,"count",[ny],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),iy=ay))||iy);v._RF.pop(),v._RF.push({},"726cc2e08FBqpVIg/tPM7H2","Particle",void 0);var vy,yy,fy,my,gy,by,Sy,Cy,ky,wy,Ey,Ty,Ay,Ry,By,Py,_y,Oy=y.ccclass,Ly=y.executeInEditMode,Dy=Oy("Particle")(cy=Ly(!0)(cy=function(e){t(o,e);var a=n(o);function o(){var e;i(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=a.call.apply(a,[this].concat(n))).remainingLifetime=0,e.startLifetime=0,e}return r(o,[{key:"onLoad",value:function(){this.node.layer=G.Enum.UI_2D}},{key:"init",value:function(e){this.sprite=this.getComponent(S),this.particleSystem=e,this.velocity=T.ZERO,this.remainingLifetime=0,this.startLifetime=0,this.startSize=T.ZERO,this.startColor=_.WHITE.clone(),this.randomSeed=0}},{key:"reset",value:function(){this.node.rotation.set(0,0,0)}}]),o}(b))||cy)||cy;v._RF.pop(),v._RF.push({},"00eb3NBo0tM/qcD6ViMjx0A","CurveRange",void 0);var Iy,Ny,Gy,Fy,My,zy,xy,Uy,Hy,jy,Vy,Wy,Ky,qy,Yy,Jy,Xy,Zy=y.ccclass,Qy=y.property,$y=ye({Constant:0,Curve:1,TwoCurves:2,TwoConstants:3}),ef=(vy=Zy("CurveRange"),yy=Qy({type:ye($y)}),fy=Qy({visible:function(){return this.mode===$y.Constant}}),my=Qy({visible:function(){return this.mode===$y.Curve}}),gy=Qy({visible:function(){return this.mode===$y.TwoCurves}}),by=Qy({visible:function(){return this.mode===$y.TwoCurves}}),Sy=Qy({visible:function(){return this.mode===$y.TwoConstants}}),Cy=Qy({visible:function(){return this.mode===$y.TwoConstants}}),vy((Ey=e((wy=function(){function e(){i(this,e),a(this,"mode",Ey,this),a(this,"constant",Ty,this),a(this,"spline",Ay,this),a(this,"splineMin",Ry,this),a(this,"splineMax",By,this),a(this,"constantMin",Py,this),a(this,"constantMax",_y,this),this.spline.assignSorted([0,1],[0,1]),this.splineMin.assignSorted([0,1],[0,1]),this.splineMax.assignSorted([0,1],[0,1])}return r(e,[{key:"evaluate",value:function(e,t){switch(this.mode){case $y.Curve:return this.spline.evaluate(e);case $y.TwoCurves:return fe(this.splineMin.evaluate(e),this.splineMax.evaluate(e),t);case $y.TwoConstants:return fe(this.constantMin,this.constantMax,t);default:return this.constant}}},{key:"getMax",value:function(){switch(this.mode){case $y.Curve:return 1;case $y.TwoConstants:return this.constantMax;case $y.TwoCurves:return 1;default:return this.constant}}},{key:"isZero",value:function(){switch(this.mode){case $y.Curve:return me(1,0,ge);case $y.TwoConstants:return me(Math.max(Math.abs(this.constantMax),Math.abs(this.constantMin)),0,ge);case $y.TwoCurves:return me(1,0,ge);default:return me(this.constant,0,ge)}}}]),e}()).prototype,"mode",[yy],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return $y.Constant}}),Ty=e(wy.prototype,"constant",[fy],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Ay=e(wy.prototype,"spline",[my],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new be}}),Ry=e(wy.prototype,"splineMin",[gy],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new be}}),By=e(wy.prototype,"splineMax",[by],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new be}}),Py=e(wy.prototype,"constantMin",[Sy],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),_y=e(wy.prototype,"constantMax",[Cy],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ky=wy))||ky);v._RF.pop(),v._RF.push({},"3fe5eBRNTJFCZgeD7SqFSh5","GradientRange",void 0);var tf=y.ccclass,nf=y.property,af=ye({Color:0,Gradient:1,TwoColors:2,TwoGradients:3,RandomColor:4}),of=new _,rf=new _,sf=(Iy=tf("GradientRange"),Ny=nf({type:ye(af)}),Gy=nf({visible:function(){return this.mode===af.Color}}),Fy=nf({visible:function(){return this.mode===af.TwoColors}}),My=nf({visible:function(){return this.mode===af.TwoColors}}),zy=nf({visible:function(){return this.mode===af.Gradient||this.mode===af.RandomColor}}),xy=nf({visible:function(){return this.mode===af.TwoGradients}}),Uy=nf({visible:function(){return this.mode===af.TwoGradients}}),Iy((Vy=e((jy=function(){function e(){i(this,e),a(this,"mode",Vy,this),a(this,"color",Wy,this),a(this,"colorMin",Ky,this),a(this,"colorMax",qy,this),a(this,"gradient",Yy,this),a(this,"gradientMin",Jy,this),a(this,"gradientMax",Xy,this),this._color=_.WHITE.clone()}return r(e,[{key:"evaluate",value:function(e,t){switch(this.mode){case af.Color:return this.color;case af.TwoColors:return _.lerp(this._color,this.colorMin,this.colorMax,t),this._color;case af.RandomColor:return this.gradient.getRandomColor(this._color);case af.Gradient:return this.gradient.evaluateFast(this._color,e);case af.TwoGradients:return _.lerp(this._color,this.gradientMin.evaluateFast(of,e),this.gradientMax.evaluateFast(rf,e),t),this._color;default:return this.color}}}]),e}()).prototype,"mode",[Ny],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return af.Color}}),Wy=e(jy.prototype,"color",[Gy],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _.WHITE.clone()}}),Ky=e(jy.prototype,"colorMin",[Fy],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _.WHITE.clone()}}),qy=e(jy.prototype,"colorMax",[My],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _.WHITE.clone()}}),Yy=e(jy.prototype,"gradient",[zy],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Se}}),Jy=e(jy.prototype,"gradientMin",[xy],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Se}}),Xy=e(jy.prototype,"gradientMax",[Uy],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Se}}),Hy=jy))||Hy);function lf(e,t,n,i){!function(e,t){x.set(e,Math.cos(t),Math.sin(t))}(e,i),e.z=0,T.multiplyScalar(e,e,t+(n-t)*ke())}function uf(e){var t=$y;switch(e.mode){case t.TwoCurves:case t.TwoConstants:return!0;default:return!1}}v._RF.pop(),v._RF.push({},"1a4c4Z/fWpFuL5b3emrVLug","ParticleFunction",void 0),v._RF.pop(),v._RF.push({},"c2fc2/T2apMGZCPX5a4abo/","ModuleRandSeed",void 0);var cf,hf,df,pf,vf,yf,ff,mf=23541,gf=39825,bf=90794,Sf=91041,Cf=125292,kf=197866,wf=156497;v._RF.pop(),v._RF.push({},"39785+APfBJU5kvcdjZGiLr","ColorOvertimeModule",void 0);var Ef,Tf,Af,Rf,Bf,Pf,_f,Of,Lf,Df=y.ccclass,If=y.property,Nf=Sf,Gf=(cf=Df("ColorOvertimeModule"),hf=If({type:w}),df=If({type:sf}),cf((yf=e((vf=function(){function e(){i(this,e),a(this,"enable",yf,this),a(this,"color",ff,this)}return r(e,[{key:"update",value:function(e){if(this.enable){var t=e.randomSeed+Nf,n=function(e){var t=af;switch(e.mode){case t.TwoGradients:case t.TwoColors:return!0;default:return!1}}(this.color)?Te(t):0,i=1-e.remainingLifetime/e.startLifetime;e.sprite.color=e.startColor.clone().multiply(this.color.evaluate(i,n))}}}]),e}()).prototype,"enable",[hf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ff=e(vf.prototype,"color",[df],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new sf}}),pf=vf))||pf);v._RF.pop(),v._RF.push({},"c397apirpxFfJTJN1KLAcGi","LimitVelocityOvertimeModule",void 0);var Ff,Mf,zf,xf,Uf,Hf,jf,Vf=y.ccclass,Wf=y.property,Kf=mf,qf=(Ef=Vf("LimitVelocityOvertimeModule"),Tf=Wf({type:w}),Af=Wf({type:ef}),Rf=Wf({type:ef}),Ef((_f=e((Pf=function(){function e(){i(this,e),a(this,"enable",_f,this),a(this,"limit",Of,this),a(this,"dampen",Lf,this),this.limit.constant=500,this.dampen.constant=.2}return r(e,[{key:"update",value:function(e,t){if(this.enable){var n=1-e.remainingLifetime/e.startLifetime,i=e.velocity.clone().normalize(),a=uf(this.limit)?Te(e.randomSeed+Kf):0,o=uf(this.dampen)?Te(e.randomSeed+Kf+1):0,r=e.velocity.length(),s=this.limit.evaluate(n,a),l=this.dampen.evaluate(n,o);e.velocity=i.multiplyScalar(this.dampenBeyondLimit(r,s,l,t))}}},{key:"dampenBeyondLimit",value:function(e,t,n,i){if(e<=t)return e;var a=1-Math.exp(-n*i);return j.lerp(e,t,a)}}]),e}()).prototype,"enable",[Tf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Of=e(Pf.prototype,"limit",[Af],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new ef}}),Lf=e(Pf.prototype,"dampen",[Rf],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new ef}}),Bf=Pf))||Bf);v._RF.pop(),v._RF.push({},"442c2KaGHdNip4TBoeKOOoY","RendererModule",void 0);var Yf,Jf,Xf,Zf,Qf,$f,em,tm,nm,im,am,om,rm,sm,lm=y.ccclass,um=y.property,cm=(Ff=lm("RendererModule"),Mf=um(Ae),zf=um(V),Ff((Hf=e((Uf=r((function e(){i(this,e),a(this,"material",Hf,this),a(this,"spriteFrame",jf,this)}))).prototype,"material",[Mf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),jf=e(Uf.prototype,"spriteFrame",[zf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xf=Uf))||xf);v._RF.pop(),v._RF.push({},"c6cfbhYVctHt53aUXC4oSWy","RotationOvertimeModule",void 0);var hm,dm,pm,vm,ym,fm,mm,gm,bm,Sm,Cm,km,wm,Em,Tm,Am,Rm,Bm,Pm,_m,Om,Lm,Dm,Im=y.ccclass,Nm=y.property,Gm=Cf,Fm=(Yf=Im("RotationOvertimeModule"),Jf=Nm({type:w}),Xf=Nm(w),Zf=Nm({type:ef}),Qf=Nm({type:ef,visible:function(){return this.separateAxes}}),$f=Nm({type:ef,visible:function(){return this.separateAxes}}),em=Nm({type:ef}),Yf((im=e((nm=function(){function e(){i(this,e),a(this,"enable",im,this),a(this,"separateAxes",am,this),a(this,"x",om,this),a(this,"y",rm,this),a(this,"z",sm,this)}return r(e,[{key:"update",value:function(e,t){if(this.enable){var n=1-e.remainingLifetime/e.startLifetime,i=e.randomSeed+Gm,a=uf(this.z)?Te(i):0,o=this.z.evaluate(n,a)*t,r=0,s=0;if(this.separateAxes){var l=uf(this.x)?Te(i):0,u=uf(this.y)?Te(i):0;r=this.x.evaluate(n,l)*t,s=this.y.evaluate(n,u)*t}e.node.eulerAngles=new T(e.node.eulerAngles.x+r,e.node.eulerAngles.y+s,e.node.eulerAngles.z+o)}}}]),e}()).prototype,"enable",[Jf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),am=e(nm.prototype,"separateAxes",[Xf],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),om=e(nm.prototype,"x",[Zf],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new ef}}),rm=e(nm.prototype,"y",[Qf],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new ef}}),sm=e(nm.prototype,"z",[$f,em],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new ef}}),tm=nm))||tm);v._RF.pop(),v._RF.push({},"f63cd4ScDJFPrnTLNT4+QKu","ShapeModule",void 0);var Mm,zm,xm,Um,Hm,jm,Vm,Wm=y.ccclass,Km=y.property,qm=ye({Circle:0,Rectangle:1}),Ym=ye({Base:0,Edge:1}),Jm=function(){return this.shape===qm.Circle},Xm=function(){return this.shape===qm.Rectangle},Zm=[0,0],Qm=(hm=Wm("ShapeModule"),dm=Km({type:ye(qm)}),pm=Km({type:ye(Ym),visible:Xm}),vm=Km({}),ym=Km({}),fm=Km({}),mm=Km({range:[0,360],visible:Jm}),gm=Km({range:[-360,360],visible:Jm}),bm=Km({min:0,visible:Jm}),Sm=Km({range:[0,1],step:.01,visible:Jm}),Cm=Km({visible:Xm}),hm((Em=e((wm=function(){function e(){i(this,e),a(this,"shape",Em,this),a(this,"emitFrom",Tm,this),a(this,"position",Am,this),a(this,"rotation",Rm,this),a(this,"scale",Bm,this),a(this,"arc",Pm,this),a(this,"angle",_m,this),a(this,"radius",Om,this),a(this,"radiusThickness",Lm,this),a(this,"rectangleThickness",Dm,this)}return r(e,[{key:"emit",value:function(e){switch(this.shape){case qm.Circle:this.circleEmit(this.radius,this.radiusThickness,Re(this.generateArcAngle()),e);break;case qm.Rectangle:this.rectangleEmit(this.emitFrom,this.rectangleThickness,e)}}},{key:"circleEmit",value:function(e,t,n,i){var a=i.node.position;lf(a,e*(1-t),e,n+Re(this.angle)),i.velocity=a.clone().normalize()}},{key:"rectangleEmit",value:function(e,t,n){var i,a,o,r=n.node.position;switch(e){case Ym.Base:a=r,o=t,x.set(a,we(-o.x,o.x),we(-o.y,o.y));break;case Ym.Edge:Zm[0]=we(-1,1),Zm[1]=(0===(i=we(-1,1))&&i++,Ce.sign(i)),function(e){for(var t=0;t<e.length;t++){var n=t+Ee(0,e.length-t),i=e[n];e[n]=e[t],e[t]=i}}(Zm),this.applyRectThickness(Zm,t),x.set(r,Zm[0],Zm[1])}n.velocity=r.clone().normalize()}},{key:"generateArcAngle",value:function(){return we(0,this.arc)}},{key:"applyRectThickness",value:function(e,t){t.x>0&&(e[0]*=t.x),t.y>0&&(e[1]*=t.y)}},{key:"gizmo",value:function(e){switch(e.strokeColor.fromHEX("#46C4FFB0"),e.fillColor.fromHEX("#46C4FF77"),e.lineWidth=8,this.shape){case qm.Circle:this.gizmoCircle(e);break;case qm.Rectangle:this.gizmoRectangle(e)}}},{key:"gizmoCircle",value:function(e){e.clear();var t=this.angle,n=this.angle+this.arc;if(this.createArcPath(e,this.radius,t,n),this.createArcPath(e,this.radius*(1-this.radiusThickness),t,n),this.arc<360&&this.radius>0){var i=this.radius*Math.cos(Re(this.angle)),a=this.radius*Math.sin(Re(this.angle)),o=this.radius*Math.cos(Re(this.arc+this.angle)),r=this.radius*Math.sin(Re(this.arc+this.angle));e.moveTo(i,a),e.lineTo(0,0),e.moveTo(o,r),e.lineTo(0,0)}e.stroke()}},{key:"gizmoRectangle",value:function(e){e.clear();var t=this.rectangleThickness.x,n=this.rectangleThickness.y;e.moveTo(t,n),e.lineTo(-t,n),e.lineTo(-t,-n),e.lineTo(t,-n),e.close(),e.stroke()}},{key:"createArcPath",value:function(e,t,n,i){if(!(t<=0))for(var a=(i-n)/48,o=0;o<=48;o++){var r=n+o*a,s=t*Math.cos(Re(r)),l=t*Math.sin(Re(r));0===o?e.moveTo(s,l):e.lineTo(s,l)}}}]),e}()).prototype,"shape",[dm],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return qm.Circle}}),Tm=e(wm.prototype,"emitFrom",[pm],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Ym.Base}}),Am=e(wm.prototype,"position",[vm],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new T(0,0,0)}}),Rm=e(wm.prototype,"rotation",[ym],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new T(0,0,0)}}),Bm=e(wm.prototype,"scale",[fm],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new T(1,1,1)}}),Pm=e(wm.prototype,"arc",[mm],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 360}}),_m=e(wm.prototype,"angle",[gm],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 25}}),Om=e(wm.prototype,"radius",[bm],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Lm=e(wm.prototype,"radiusThickness",[Sm],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Dm=e(wm.prototype,"rectangleThickness",[Cm],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new x(20,50)}}),km=wm))||km);v._RF.pop(),v._RF.push({},"1b7c1WztGdLzKO8gh4ulm2c","SizeOvertimeModule",void 0);var $m,eg,tg,ng,ig,ag,og,rg,sg,lg,ug,cg,hg,dg=y.ccclass,pg=y.property,vg=gf,yg=(Mm=dg("SizeOvertimeModule"),zm=pg({type:w}),xm=pg({type:ef}),Mm((jm=e((Hm=function(){function e(){i(this,e),a(this,"enable",jm,this),a(this,"size",Vm,this),this.size.constant=1}return r(e,[{key:"update",value:function(e){if(this.enable){var t=1-e.remainingLifetime/e.startLifetime,n=e.randomSeed+vg,i=uf(this.size)?Te(n):0,a=this.size.evaluate(t,i);e.node.scale=new T(a*e.startSize.x,a*e.startSize.y,1)}}}]),e}()).prototype,"enable",[zm],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Vm=e(Hm.prototype,"size",[xm],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new ef}}),Um=Hm))||Um);v._RF.pop(),v._RF.push({},"530341yf3ZOmaqdU+AYM0/U","SpriteAnimationModule",void 0);var fg,mg,gg,bg,Sg,Cg,kg,wg,Eg,Tg=y.ccclass,Ag=y.property,Rg=bf,Bg=($m=Tg("SpriteAnimationModule"),eg=Ag({type:w}),tg=Ag({type:V}),ng=Ag({type:ef}),ig=Ag({type:ef}),ag=Ag({type:g}),$m((sg=e((rg=function(){function e(){i(this,e),a(this,"enable",sg,this),a(this,"frames",lg,this),a(this,"frameOverTime",ug,this),a(this,"startFrame",cg,this),a(this,"cycleCount",hg,this),this.frameOverTime.constant=0,this.startFrame.constant=0}return r(e,[{key:"update",value:function(e){if(this.enable){var t=1-e.remainingLifetime/e.startLifetime,n=uf(this.startFrame)?Te(e.randomSeed+Rg):0,i=uf(this.frameOverTime)?Te(e.randomSeed+Rg):0,a=this.startFrame.evaluate(t,n),o=ve(this.cycleCount*(this.frameOverTime.evaluate(t,i)+a),this.frames.length);e.sprite.spriteFrame=this.frames[Math.floor(o)]}}}]),e}()).prototype,"enable",[eg],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),lg=e(rg.prototype,"frames",[tg],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ug=e(rg.prototype,"frameOverTime",[ng],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new ef}}),cg=e(rg.prototype,"startFrame",[ig],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new ef}}),hg=e(rg.prototype,"cycleCount",[ag],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),og=rg))||og);v._RF.pop(),v._RF.push({},"f6ad5Yz6wpE2ZzModn16CYQ","VelocityOvertimeModule",void 0);var Pg,_g,Og,Lg,Dg,Ig,Ng,Gg,Fg,Mg,zg,xg,Ug,Hg,jg,Vg,Wg,Kg,qg,Yg,Jg,Xg,Zg,Qg,$g,eb,tb,nb,ib,ab,ob,rb,sb,lb,ub,cb,hb,db,pb,vb,yb,fb,mb,gb,bb,Sb,Cb,kb,wb,Eb,Tb,Ab,Rb=y.ccclass,Bb=y.property,Pb=(fg=Rb("VelocityOvertimeModule"),mg=Bb({type:w}),gg=Bb({type:ef}),bg=Bb({type:ef}),fg((kg=e((Cg=function(){function e(){i(this,e),a(this,"enable",kg,this),a(this,"x",wg,this),a(this,"y",Eg,this),this._temp_v3=new T,this.x.constant=0,this.y.constant=0}return r(e,[{key:"update",value:function(e,t){if(this.enable){var n=1-e.remainingLifetime/e.startLifetime,i=uf(this.x)?Te(e.randomSeed+kf):0,a=uf(this.y)?Te(e.randomSeed+wf):0,o=T.set(this._temp_v3,this.x.evaluate(n,i),this.y.evaluate(n,a),0);T.add(e.velocity,e.velocity,o.multiplyScalar(t))}}}]),e}()).prototype,"enable",[mg],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),wg=e(Cg.prototype,"x",[gg],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new ef}}),Eg=e(Cg.prototype,"y",[bg],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new ef}}),Sg=Cg))||Sg);v._RF.pop(),v._RF.push({},"10bc3IfFqBLtpSgVri/NVeX","ParticleSystem",void 0);var _b,Ob=y.ccclass,Lb=y.property,Db=y.executeInEditMode,Ib=y.disallowMultiple,Nb=(Pg=Ob("ParticleSystem"),_g=Db(!0),Og=Ib(!0),Lg=Lb({}),Dg=Lb(w),Ig=Lb(ae),Ng=Lb(w),Gg=Lb({type:ef}),Fg=Lb({type:ef}),Mg=Lb(sf),zg=Lb(w),xg=Lb({type:ef,formerlySerializedAs:"startSize"}),Ug=Lb({type:ef,visible:function(){return this.startSize2D}}),Hg=Lb({type:ef}),jg=Lb(w),Vg=Lb({type:ef,formerlySerializedAs:"startRotation"}),Wg=Lb({type:ef}),Kg=Lb({type:ef}),qg=Lb({type:Qm}),Yg=Lb({type:Pb}),Jg=Lb({type:yg}),Xg=Lb({type:Fm}),Zg=Lb({type:Gf}),Qg=Lb({type:Bg}),$g=Lb({type:qf}),eb=Lb(py),tb=Lb({type:cm}),Pg(nb=_g(nb=Og((e((ib=function(e){t(u,e);var l=n(u);function u(){var e;return i(this,u),(e=l.call(this))._preview=!1,a(e,"playOnAwake",ab,o(e)),a(e,"duration",ob,o(e)),a(e,"loop",rb,o(e)),a(e,"startDelay",sb,o(e)),a(e,"startLifetime",lb,o(e)),a(e,"startColor",ub,o(e)),a(e,"startSize2D",cb,o(e)),a(e,"startSizeX",hb,o(e)),a(e,"startSizeY",db,o(e)),a(e,"startSpeed",pb,o(e)),a(e,"startRotation3D",vb,o(e)),a(e,"startRotation",yb,o(e)),a(e,"gravityModifier",fb,o(e)),a(e,"rateOverTime",mb,o(e)),a(e,"shapeModule",gb,o(e)),a(e,"velocityOvertimeModule",bb,o(e)),a(e,"sizeOvertimeModule",Sb,o(e)),a(e,"rotationOvertimeModule",Cb,o(e)),a(e,"colorOvertimeModule",kb,o(e)),a(e,"spriteAnimationModule",wb,o(e)),a(e,"limitVelocityOvertimeModule",Eb,o(e)),a(e,"bursts",Tb,o(e)),a(e,"rendererModule",Ab,o(e)),e.particles=[],e.time=0,e.emitRateTimeCounter=0,e.isPlaying=!1,e.isStopped=!0,e.isEmitting=!1,e.needToRestart=!1,e.startLifetime.constant=5,e.startSizeX.constant=1,e.startSpeed.constant=5,e.rateOverTime.constant=10,e}return r(u,[{key:"preview",get:function(){return this._preview},set:function(e){this._preview=e,this.graphics&&this.graphics.destroy()}},{key:"onEnable",value:function(){}},{key:"onLoad",value:function(){this.preview=null!==this.getComponent(P),this.node.removeAllChildren()}},{key:"start",value:function(){this.node.position=new T(this.node.position.x,this.node.position.y,100),(this.playOnAwake&&!qe||this.preview&&qe)&&this.play()}},{key:"update",value:function(e){this.isPlaying&&(this.time+=e,this.emitting(e))}},{key:"play",value:function(){this.needToRestart&&(this.needToRestart=!1),this.isStopped&&(this.isStopped=!1),this.time=0,this.isPlaying=!0,this.isEmitting=!0}},{key:"stop",value:function(){this.isPlaying||(this.isPlaying=!1),this.isEmitting||(this.isEmitting=!1),this.isStopped=!0}},{key:"emitting",value:function(e){var t=this,n=this.startDelay.evaluate(0,1);if(this.time>n&&this.time>this.duration+n&&(this.loop||(this.isEmitting=!1)),this.isEmitting){if(this.emitRateTimeCounter+=this.rateOverTime.evaluate(this.time/this.duration,1)*e,this.emitRateTimeCounter>1){var i=Math.floor(this.emitRateTimeCounter);this.emitRateTimeCounter-=i,this.emit(i,e)}var a,o=s(this.bursts);try{for(o.s();!(a=o.n()).done;){a.value.update(this,e)}}catch(e){o.e(e)}finally{o.f()}}var r=this.gravityModifier.evaluate(this.time/this.duration,1);this.particles.forEach((function(n,i){n.node.active&&(t.spriteAnimationModule.update(n),t.sizeOvertimeModule.update(n),t.rotationOvertimeModule.update(n,e),t.colorOvertimeModule.update(n),t.velocityOvertimeModule.update(n,e),t.applyGravityModifier(n,r),t.limitVelocityOvertimeModule.update(n,e),n.node.position.add(n.velocity.clone().multiplyScalar(e)),n.remainingLifetime-=e,n.remainingLifetime<=0&&(n.node.active=!1))}))}},{key:"emit",value:function(e,t){if(null!==this.rendererModule.spriteFrame)for(var n=this.time%this.duration/this.duration,i=0;i<e;i++){var a=this.getFreeParticle();a.init(this),a.reset(),this.shapeModule.emit(a);var o=this.startSpeed.evaluate(n,this.rand());a.velocity=a.velocity.clone().multiplyScalar(o);var r=this.startSizeX.evaluate(n,this.rand()),s=this.startSize2D?new T(r,this.startSizeY.evaluate(n,this.rand()),1):new T(r,r,1);a.startSize=s.clone(),a.node.scale=s.clone();var l=this.startRotation.evaluate(n,this.rand());a.node.eulerAngles=new T(0,0,l),a.startColor=this.startColor.evaluate(n,this.rand()).clone(),a.sprite.color=a.startColor.clone(),a.startLifetime=this.startLifetime.evaluate(n,this.rand())+t,a.remainingLifetime=a.startLifetime,a.randomSeed=Ee(0,233280)}}},{key:"applyGravityModifier",value:function(e,t){e.velocity.add(new T(0,-9.8*t,0))}},{key:"rand",value:function(){return Te(Ee(0,Ce.INT_MAX))}},{key:"getFreeParticle",value:function(){var e=this.particles.find((function(e){return!e.node.active}));return e||(e=this.createParticle()),e.node.active=!0,e}},{key:"createParticle",value:function(){var e=new R,t=X(e),n=t.addComponent(Dy),i=t.addComponent(S);return this.particles.push(n),i.spriteFrame=this.rendererModule.spriteFrame,i.customMaterial=this.rendererModule.material,this.node.addChild(t),n}}]),u}(b)).prototype,"preview",[Lg],Object.getOwnPropertyDescriptor(ib.prototype,"preview"),ib.prototype),ab=e(ib.prototype,"playOnAwake",[Dg],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),ob=e(ib.prototype,"duration",[Ig],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),rb=e(ib.prototype,"loop",[Ng],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),sb=e(ib.prototype,"startDelay",[Gg],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new ef}}),lb=e(ib.prototype,"startLifetime",[Fg],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new ef}}),ub=e(ib.prototype,"startColor",[Mg],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new sf}}),cb=e(ib.prototype,"startSize2D",[zg],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),hb=e(ib.prototype,"startSizeX",[xg],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new ef}}),db=e(ib.prototype,"startSizeY",[Ug],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new ef}}),pb=e(ib.prototype,"startSpeed",[Hg],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new ef}}),vb=e(ib.prototype,"startRotation3D",[jg],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),yb=e(ib.prototype,"startRotation",[Vg],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new ef}}),fb=e(ib.prototype,"gravityModifier",[Wg],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new ef}}),mb=e(ib.prototype,"rateOverTime",[Kg],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new ef}}),gb=e(ib.prototype,"shapeModule",[qg],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Qm}}),bb=e(ib.prototype,"velocityOvertimeModule",[Yg],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Pb}}),Sb=e(ib.prototype,"sizeOvertimeModule",[Jg],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new yg}}),Cb=e(ib.prototype,"rotationOvertimeModule",[Xg],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Fm}}),kb=e(ib.prototype,"colorOvertimeModule",[Zg],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Gf}}),wb=e(ib.prototype,"spriteAnimationModule",[Qg],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Bg}}),Eb=e(ib.prototype,"limitVelocityOvertimeModule",[$g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new qf}}),Tb=e(ib.prototype,"bursts",[Lb,eb],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Ab=e(ib.prototype,"rendererModule",[tb],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new cm}}),nb=ib))||nb)||nb)||nb);v._RF.pop(),v._RF.push({},"21a9aAlkBtGxKLqip8g0o6l","ParticleSystem2DExtra",void 0);var Gb,Fb=y.ccclass,Mb=y.disallowMultiple,zb=y.executeInEditMode,xb=y.requireComponent,Ub=Fb("ParticleSystem2DExtra")(_b=zb(!0)(_b=Mb(!0)(_b=xb(Be)(_b=function(e){t(o,e);var a=n(o);function o(){var e;i(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=a.call.apply(a,[this].concat(n))).emitParticle=function(t){return function(n){t(n);var i=e.particleSystem._simulator.particles.length,a=e.particleSystem._simulator.particles[i-1];e.initParticle(a)}},e.step=function(t){return function(n){for(var i=e.particleSystem._simulator.particles,a=0;a<i.length;a++){var o=i[a];e.updateParticle(o,n)}t(n)}},e}return r(o,[{key:"__preload",value:function(){this.particleSystem=this.getComponent(Be),this.validateRequiredComponents(),this.overrideFunctions()}},{key:"overrideFunctions",value:function(){var e=this.particleSystem._simulator.emitParticle.bind(this.particleSystem._simulator);this.particleSystem._simulator.emitParticle=this.emitParticle(e);var t=this.particleSystem._simulator.step.bind(this.particleSystem._simulator);this.particleSystem._simulator.step=this.step(t)}},{key:"validateRequiredComponents",value:function(){Le.lazyValidateProperties(this)}}]),o}(b))||_b)||_b)||_b)||_b;v._RF.pop(),v._RF.push({},"9a5a3MgLaRAKbHluGCPsA8j","ExampleParticleSystem2DExtra",void 0);var Hb;(0,y.ccclass)("ExampleParticleSystem2DExtra")(Gb=function(e){t(o,e);var a=n(o);function o(){return i(this,o),a.apply(this,arguments)}return r(o,[{key:"initParticle",value:function(e){e.maxSize=j.randomRange(.25,1)*e.size,e.size=0,e.deltaSize=0,e.cycleDuration=j.randomRange(.4,.6),e.life=e.timeToLive,this.setInitPosition(e.pos)}},{key:"updateParticle",value:function(e,t){this.updateScale(e)}},{key:"setInitPosition",value:function(e){var t=e.x,n=e.y;return e.x=t+j.randomRange(-350,350),e.y=n+j.randomRange(-350,350),e}},{key:"updateScale",value:function(e){var t=1-(e.life-e.timeToLive)%e.cycleDuration/e.cycleDuration;e.size=e.maxSize*Math.sin(t*Math.PI)}}]),o}(Ub));v._RF.pop(),v._RF.push({},"6adb6Vsx2BIsYfe4A3i4ArN","custom",void 0);var jb;(0,y.ccclass)("CustomSpine")(Hb=function(e){t(o,e);var a=n(o);function o(){var e;i(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=a.call.apply(a,[this].concat(n))).spine=null,e.anims=null,e.customEnd=function(t){var n;console.log("CustomSpine customEnd",t);var i=null===(n=e.spine)||void 0===n?void 0:n.skeletonData;if(i){var a=i.getRuntimeData();a&&console.log("CustomSpine runtimeData",a)}},e}return r(o,[{key:"__preload",value:function(){var e,t;this.spine=null!==(e=this.node.getComponent(z.Skeleton))&&void 0!==e?e:null,this.anims=null!==(t=this.node.getComponent(f))&&void 0!==t?t:null,Le.lazyValidateProperties(this)}},{key:"onLoad",value:function(){var e;console.log("CustomSpine onLoad",this.spine,this.anims),null===(e=this.anims)||void 0===e||e.play("custom")}},{key:"start",value:function(){}}]),o}(b));v._RF.pop(),v._RF.push({},"4a9beTdMntC0q9yngb8a2go","BootScene",void 0);var Vb,Wb=y.ccclass,Kb=y.disallowMultiple,qb=GameCore,Yb=qb.Events,Jb=qb.Configs,Xb=globalThis.game,Zb=Xb.ads,Qb=Xb.player,$b=Xb.event;Wb("BootScene")(jb=Kb(jb=function(e){t(o,e);var a=n(o);function o(){var e;i(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=a.call.apply(a,[this].concat(n))).processWhenGameSdkStarted=function(){e.setupGameData(),e.sendMsGamesDailyNotification()},e.handlePauseAudio=function(){$b.on(Yb.VISIBILITY_HIDDEN,e.handleMuteAudio),$b.on(Yb.VISIBILITY_VISIBLE,e.handleUnMuteAudio)},e.handleMuteAudio=function(){Me.muteAudio(!0)},e.handleUnMuteAudio=function(){Zb.isAdFullSizeShowing()||Me.muteAudio(!1)},e}return r(o,[{key:"__preload",value:function(){this.setupAndroidPlatformAds(),this.processCrazyGamesLoadingStart(),this.listenEvents()}},{key:"onLoad",value:function(){this.handlePauseAudio(),Jb.Core.StartSDKAfterLoadGame||He.showLoadingFullScreen(Ye.BOOT_SCENE)}},{key:"start",value:function(){this.processCrazyGamesLoadingStop()}},{key:"listenEvents",value:function(){$b.catchUp(Yb.GAME_SDK_STARTED,this.processWhenGameSdkStarted)}},{key:"setupGameData",value:function(){var e=Qb.getGameData();if(e){var t=We.MaxLevel,n=e.totalLevel,i={totalLevel:Math.max(n,t)};Qb.setGameData(i)}}},{key:"processCrazyGamesLoadingStart",value:function(){"gameLoadingStart"in GameSDK.extra&&GameSDK.extra.gameLoadingStart()}},{key:"processCrazyGamesLoadingStop",value:function(){"gameLoadingStop"in GameSDK.extra&&GameSDK.extra.gameLoadingStop()}},{key:"setupAndroidPlatformAds",value:function(){}},{key:"sendMsGamesDailyNotification",value:function(){var e=GameSDK.extra;"sendDailyNotificationAsync"in e&&e.sendDailyNotificationAsync()}}]),o}(b))||jb);v._RF.pop(),v._RF.push({},"c4e30ckJiFBG4VHrF+wikMs","DashboardScene",void 0);var eS,tS=y.ccclass,nS=y.disallowMultiple;tS("DashboardScene")(Vb=nS(Vb=function(e){t(o,e);var a=n(o);function o(){return i(this,o),a.apply(this,arguments)}return r(o,[{key:"__preload",value:function(){this.validateRequiredComponents()}},{key:"start",value:function(){this.scheduleOnce(this.preloadScenes,2)}},{key:"validateRequiredComponents",value:function(){Le.lazyValidateProperties(this)}},{key:"preloadScenes",value:function(){Ke.preloadGameScene()}},{key:"handleSingleButtonClicked",value:function(){Ke.switchToGameScene()}},{key:"handleEndlessButtonClicked",value:function(){Ke.switchToEndlessScene()}},{key:"handleTestLayoutButtonClicked",value:function(){Ke.switchScene(Ye.TEST_LAYOUT_SCENE)}}]),o}(b))||Vb);v._RF.pop(),v._RF.push({},"22d76GFn6BEoKFiZCFN1HmA","DraftScene",void 0);var iS,aS=y.ccclass,oS=y.disallowMultiple;aS("DraftScene")(eS=oS(eS=function(e){t(o,e);var a=n(o);function o(){return i(this,o),a.apply(this,arguments)}return r(o,[{key:"__preload",value:function(){this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){Le.lazyValidateProperties(this)}},{key:"onLoad",value:function(){GameSDK.startGameAsync().catch((function(e){console.warn("GameSDK.startGameAsync",e)}))}},{key:"switchScene",value:function(){}}]),o}(b))||eS);v._RF.pop(),v._RF.push({},"27217ZS55VNqbq0d9w9Cc+3","Component",void 0);var rS,sS=y.ccclass,lS=y.executeInEditMode,uS=y.disallowMultiple,cS=GameCore.Events,hS=globalThis.game.event;sS("DraftComponent")(iS=uS(iS=lS(!0)(iS=function(e){t(o,e);var a=n(o);function o(){var e;i(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=a.call.apply(a,[this].concat(n))).locale="en",e.eventPayload={screenName:"DraftScene"},e}return r(o,[{key:"__preload",value:function(){console.log("DraftComponent",cS)}},{key:"onLoad",value:function(){console.log("DraftComponent",hS)}},{key:"start",value:function(){console.log("DraftComponent",qe),this.makePersistent()}},{key:"makePersistent",value:function(){L.addPersistRootNode(this.node)}}]),o}(b))||iS)||iS);v._RF.pop(),v._RF.push({},"3f6029o9mpM/K2ccwbuv3XD","EndlessScene",void 0);var dS,pS=y.ccclass,vS=y.disallowMultiple,yS=globalThis.game,fS=yS.audio,mS=yS.ads,gS=Ie.Layout,bS=Ie.DesignSize.Portrait;pS("EndlessScene")(rS=vS(rS=function(e){t(o,e);var a=n(o);function o(){var e;i(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=a.call.apply(a,[this].concat(n))).handleGameMaskWhenLayoutChanged=function(e){var t=oe("Canvas/Game/GameObjects");if(t){var n=t.getComponent($);n&&(n.enabled=e===gS.Landscape)}},e.handleAdsWhenResize=function(){e.checkBottomBannerAdSize(),e.setMaxSizeSideBannerAd()},e.attemptCallSubscribeBot=function(){"subscribeBotAsync"in GameSDK.extra&&GameSDK.extra.subscribeBotAsync().catch((function(e){console.warn("subscribeBotAsync",e)}))},e}return r(o,[{key:"__preload",value:function(){this.validateRequiredComponents(),this.listenGameEvents()}},{key:"validateRequiredComponents",value:function(){Le.lazyValidateProperties(this)}},{key:"onLoad",value:function(){}},{key:"listenGameEvents",value:function(){this.node.scene.on(De.LAYOUT_CHANGED,this.handleGameMaskWhenLayoutChanged),this.node.scene.on(De.VIEW_RESIZE,this.handleAdsWhenResize)}},{key:"checkBottomBannerAdSize",value:function(){var e=Pe.instance.getVisibleSize(),t=Ne.worldSizeToCssSize(e.height*Je.MAX_BOTTOM_BANNER_RATIO);GameCore.Configs.Ads.BannerDisplayAdOptions.forEach((function(e){var n=e.PlacementId,i=e.Position,a=e.BannerHeight;"bottom"===i&&(a>t?mS.hideBannerAdAsync(n).catch((function(e){})):mS.showBannerAdAsync(n).catch((function(e){})))}))}},{key:"setMaxSizeSideBannerAd",value:function(){var e=GameSDK.extra;if("setSideBannerAdRemainSize"in e){var t=Pe.instance.getVisibleSize(),n=bS.WIDTH+24,i=(t.width-n)/2,a=Ne.worldSizeToCssSize(i);e.setSideBannerAdRemainSize(a)}}},{key:"start",value:function(){this.scheduleOnce(this.attemptCallSubscribeBot,.5),this.updateVolumeBackgroundMusic()}},{key:"updateVolumeBackgroundMusic",value:function(){fS.setVolume(1,"global_music")}}]),o}(b))||rS);v._RF.pop(),v._RF.push({},"9b83boaSv9PE6mRFqy0MSI8","GameScene",void 0);var SS,CS=y.ccclass,kS=y.disallowMultiple,wS=globalThis.game,ES=wS.audio,TS=wS.ads,AS=Ie.Layout,RS=Ie.DesignSize.Portrait;CS("GameScene")(dS=kS(dS=function(e){t(o,e);var a=n(o);function o(){var e;i(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=a.call.apply(a,[this].concat(n))).handleGameMaskWhenLayoutChanged=function(e){var t=oe("Canvas/Game/GameObjects");if(t){var n=t.getComponent($);n&&(n.enabled=e===AS.Landscape)}},e.handleAdsWhenResize=function(){e.checkBottomBannerAdSize(),e.setMaxSizeSideBannerAd()},e.attemptCallSubscribeBot=function(){"subscribeBotAsync"in GameSDK.extra&&GameSDK.extra.subscribeBotAsync().catch((function(e){console.warn("subscribeBotAsync",e)}))},e}return r(o,[{key:"__preload",value:function(){this.validateRequiredComponents(),this.listenGameEvents()}},{key:"validateRequiredComponents",value:function(){Le.lazyValidateProperties(this)}},{key:"listenGameEvents",value:function(){C.on(De.VIEW_RESIZE,this.handleAdsWhenResize),C.on(De.LAYOUT_CHANGED,this.handleGameMaskWhenLayoutChanged)}},{key:"checkBottomBannerAdSize",value:function(){var e=Pe.instance.getVisibleSize(),t=Ne.worldSizeToCssSize(e.height*Je.MAX_BOTTOM_BANNER_RATIO);GameCore.Configs.Ads.BannerDisplayAdOptions.forEach((function(e){var n=e.PlacementId,i=e.Position,a=e.BannerHeight;"bottom"===i&&(a>t?TS.hideBannerAdAsync(n).catch((function(e){})):TS.showBannerAdAsync(n).catch((function(e){})))}))}},{key:"setMaxSizeSideBannerAd",value:function(){var e=GameSDK.extra;if("setSideBannerAdRemainSize"in e){var t=Pe.instance.getVisibleSize(),n=RS.WIDTH+24,i=(t.width-n)/2,a=Ne.worldSizeToCssSize(i);e.setSideBannerAdRemainSize(a)}}},{key:"start",value:function(){this.scheduleOnce(this.attemptCallSubscribeBot,.5),this.updateVolumeBackgroundMusic(),this.scheduleOnce(this.preloadScenes,2)}},{key:"preloadScenes",value:function(){Ke.preloadDashboardScene()}},{key:"updateVolumeBackgroundMusic",value:function(){ES.setVolume(1,"global_music")}}]),o}(b))||dS);v._RF.pop(),v._RF.push({},"2b2ebUm0nFD64V/fcD8RPF/","TestLayoutScene",void 0);var BS,PS,_S,OS,LS,DS,IS=y.ccclass,NS=y.disallowMultiple;IS("TestLayoutScene")(SS=NS(SS=function(e){t(o,e);var a=n(o);function o(){var e;i(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=a.call.apply(a,[this].concat(n))).handleLayoutChange=function(){He.showNotificationScreen("Layout changed")},e}return r(o,[{key:"__preload",value:function(){this.validateRequiredComponents(),Ke.markIsTestScene(Ye.TEST_LAYOUT_SCENE),this.listenGameEvents()}},{key:"validateRequiredComponents",value:function(){Le.lazyValidateProperties(this)}},{key:"listenGameEvents",value:function(){C.on(De.LAYOUT_CHANGED,this.handleLayoutChange)}},{key:"switchScene",value:function(){Ke.switchScene(Ye.DASHBOARD_SCENE)}}]),o}(b))||SS);v._RF.pop(),v._RF.push({},"c0a5fPghzxBxpXiudxt+Qd4","TestParticleSystemScene",void 0);var GS,FS=y.ccclass,MS=y.property;BS=FS("TestParticleSystemScene"),PS=MS(R),_S=Le.required(),BS((DS=e((LS=function(e){t(l,e);var s=n(l);function l(){var e;i(this,l);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e=s.call.apply(s,[this].concat(n)),a(e,"stars",DS,o(e)),e}return r(l,[{key:"__preload",value:function(){Ke.markIsTestScene(Ye.TEST_PARTICLE_SYSTEM_SCENE)}},{key:"onLoad",value:function(){GameSDK.startGameAsync().catch((function(e){console.warn("GameSDK.startGameAsync",e)}))}},{key:"start",value:function(){var e=this.stars.getComponent(Nb);null==e||e.play()}}]),l}(b)).prototype,"stars",[PS,_S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),OS=LS));v._RF.pop(),v._RF.push({},"7dc71c6qMBI/ZZfA4rG4nFv","TestPerformanceScene",void 0);var zS,xS=y.ccclass,US=y.disallowMultiple;xS("TestPerformanceScene")(GS=US(GS=function(e){t(o,e);var a=n(o);function o(){return i(this,o),a.apply(this,arguments)}return r(o,[{key:"__preload",value:function(){this.validateRequiredComponents(),Ke.markIsTestScene(Ye.TEST_PERFORMANCE_SCENE),this.listenEvents()}},{key:"validateRequiredComponents",value:function(){Le.lazyValidateProperties(this)}},{key:"onLoad",value:function(){GameSDK.startGameAsync().catch((function(e){console.warn("GameSDK.startGameAsync",e)}))}},{key:"listenEvents",value:function(){}},{key:"start",value:function(){}}]),o}(b))||GS);v._RF.pop(),v._RF.push({},"0a4aeK2lAdAjq0xWi6SCbV+","TestScene",void 0);var HS,jS=y.ccclass,VS=y.disallowMultiple,WS=GameCore.Events,KS=globalThis.game.event;jS("TestScene")(zS=VS(zS=function(e){t(o,e);var a=n(o);function o(){return i(this,o),a.apply(this,arguments)}return r(o,[{key:"__preload",value:function(){this.validateRequiredComponents(),Ke.markIsTestScene(Ye.TEST_SCENE)}},{key:"validateRequiredComponents",value:function(){Le.lazyValidateProperties(this)}},{key:"onLoad",value:function(){this.listenScreenEvents(),GameSDK.startGameAsync().catch((function(e){console.warn("GameSDK.startGameAsync",e)}))}},{key:"listenScreenEvents",value:function(){KS.once(WS.CLOSED_SCREEN,(function(e){e.screenName===Xe[je.LOADING_SCREEN]&&He.openScreen(je.NOTIFICATION_SCREEN,{message:"Test screen events pass!",duration:2,isCloseButtonVisible:!1})}))}},{key:"start",value:function(){console.log("TestScene.start"),He.openScreen(je.LOADING_SCREEN,{duration:.5})}}]),o}(b))||zS);v._RF.pop(),v._RF.push({},"b16e7w74XVALY8Zco6TJYe7","AdsFlows",void 0);var qS,YS=y.ccclass,JS=GameCore.Plugins.Ads.Types;YS("AdsFlows")(HS=function(e){t(o,e);var a=n(o);function o(){return i(this,o),a.apply(this,arguments)}return r(o,[{key:"loadInterstitialAd",value:function(){Ve.preloadAdsByType(JS.INTERSTITIAL)}},{key:"loadRewardedVideoAd",value:function(){Ve.preloadAdsByType(JS.REWARDED_VIDEO)}},{key:"loadRewardedInterstitialAd",value:function(){Ve.preloadAdsByType(JS.REWARDED_INTERSTITIAL)}},{key:"showInterstitialAd",value:function(){Ve.showInterstitialAdAsync()}},{key:"showRewardedVideoAd",value:function(){Ve.showRewardVideoAdAsync()}},{key:"showRewardedInterstitialAd",value:function(){Ve.showRewardedInterstitialAdAsync()}},{key:"showBannerAd",value:function(){Ve.showBannerAds()}},{key:"hideBannerAd",value:function(){Ve.hideBannerAds()}},{key:"showAdsenseInterstitialAd",value:function(){Ve.showInterstitialAdAsync({adService:"adsense"})}},{key:"showAdsenseRewardedVideoAd",value:function(){Ve.showRewardVideoAdAsync({adService:"adsense"})}},{key:"showAdsenseRewardedInterstitialAd",value:function(){Ve.showRewardedInterstitialAdAsync({adService:"adsense"})}}]),o}(b));v._RF.pop(),v._RF.push({},"56a103phldKO7/xShKcD3bI","AnimationDemo",void 0);var XS;(0,y.ccclass)("AnimationDemo")(qS=function(e){t(o,e);var a=n(o);function o(){return i(this,o),a.apply(this,arguments)}return r(o,[{key:"onLoad",value:function(){}},{key:"switchToTestTransitionScene",value:function(){Ke.switchScene("TestTransitionScene")}}]),o}(b));v._RF.pop(),v._RF.push({},"a3b8adQtftPmKSSoumHWY1e","AudioDemo",void 0);var ZS;(0,y.ccclass)("AudioDemo")(XS=function(e){t(o,e);var a=n(o);function o(){var e;i(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=a.call.apply(a,[this].concat(n))).isMusicMute=!1,e.isSoundMute=!1,e.listSounds=[],e}return r(o,[{key:"onLoad",value:function(){var e,t;this.musicComp=null===(e=oe("Music"))||void 0===e?void 0:e.getComponent(Ze),this.soundComp=null===(t=oe("Sound"))||void 0===t?void 0:t.getComponent(Qe),this.validateRequiredComponents(),this.listSounds=[xe.BEE_FLYING,xe.BEE_STING_DOGE,xe.BG_MUSIC,xe.BUTTON_CLICK,xe.COLLECTING_COINS,xe.DOGE_DIES,xe.DOGE_HURT,xe.END_DRAW,xe.HAND_CLAP,xe.LEVEL_FAIL,xe.LEVEL_PASS,xe.LOST_STAR_IN_GAMEPLAY,xe.RAISE_STAR,xe.SPAWN_COINS,xe.STAR_RAISE,xe.TOUCH_START,xe.BEE_BULLET_EXPLODE]}},{key:"validateRequiredComponents",value:function(){Le.lazyValidateProperties(this)}},{key:"playBackgroundMusic",value:function(){this.musicComp.play(xe.BG_MUSIC)}},{key:"pauseBackgroundMusic",value:function(){this.musicComp.pause(xe.BG_MUSIC)}},{key:"stopBackgroundMusic",value:function(){this.musicComp.stop(xe.BG_MUSIC)}},{key:"randomMusicChannelVolume",value:function(){var e=Math.random();this.musicComp.setVolume(e)}},{key:"toggleMuteMusicChannel",value:function(){this.isMusicMute?(this.musicComp.mute(!1),this.isMusicMute=!1):(this.musicComp.mute(!0),this.isMusicMute=!0)}},{key:"playRandomSound",value:function(){this.soundComp.play(this.listSounds[Math.floor(Math.random()*this.listSounds.length)])}},{key:"toggleMuteSoundChannel",value:function(){this.isSoundMute?(this.soundComp.mute(!1),this.isSoundMute=!1):(this.soundComp.mute(!0),this.isSoundMute=!0)}},{key:"randomSoundChannelVolume",value:function(){var e=Math.random();this.soundComp.setVolume(e)}}]),o}(b));v._RF.pop(),v._RF.push({},"9e6b330nHBK2oNz8N9/lpDx","FlowChallenge",void 0);var QS,$S=y.ccclass,eC=globalThis.game,tC=eC.match,nC=eC.player;$S("FlowChallenge")(ZS=function(e){t(p,e);var a,o,s,l,u,c=n(p);function p(){var e;i(this,p);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return(e=c.call.apply(c,[this].concat(n))).playerId="",e}return r(p,[{key:"onLoad",value:function(){this.playerId=nC.getPlayerId()}},{key:"inviteFriends",value:(u=d((function*(){try{He.showLoadingScreen(0),yield tC.challenge.invite.processAsync({playerId:this.playerId})}catch(e){console.warn("inviteFriends",e),e instanceof Error&&He.showNotificationScreen(e.message)}finally{He.closeLoadingScreen()}})),function(){return u.apply(this,arguments)})},{key:"challengeFriend",value:(l=d((function*(e,t){var n=JSON.parse(t);try{He.showLoadingScreen(0),yield tC.challenge.friend.processAsync(h(h({},n),{},{playerId:this.playerId}))}catch(e){console.warn("challengeFriend",e),e instanceof Error&&He.showNotificationScreen(e.message)}finally{He.closeLoadingScreen()}})),function(e,t){return l.apply(this,arguments)})},{key:"joinChallenge",value:(s=d((function*(e,t){var n=JSON.parse(t);try{He.showLoadingScreen(0),yield tC.challenge.join.processAsync(h(h({},n),{},{playerId:this.playerId}))}catch(e){console.warn("joinChallenge",e),e instanceof Error&&He.showNotificationScreen(e.message)}finally{He.closeLoadingScreen()}})),function(e,t){return s.apply(this,arguments)})},{key:"continueChallenge",value:(o=d((function*(e,t){var n=JSON.parse(t);try{He.showLoadingScreen(0),yield tC.challenge.continue.processAsync(h(h({},n),{},{playerId:this.playerId}))}catch(e){console.warn("continueChallenge",e),e instanceof Error&&He.showNotificationScreen(e.message)}finally{He.closeLoadingScreen()}})),function(e,t){return o.apply(this,arguments)})},{key:"finishChallenge",value:(a=d((function*(){try{He.showLoadingScreen(0),yield tC.challenge.finish.processAsync({playerId:nC.getPlayerId(),playerScore:Math.floor(2*Math.random())})}catch(e){console.warn("finishChallenge",e),e instanceof Error&&He.showNotificationScreen(e.message)}finally{He.closeLoadingScreen()}})),function(){return a.apply(this,arguments)})}]),p}(b));v._RF.pop(),v._RF.push({},"f3decJ3ZlRLt6CDMHpl1XCe","FlowContext",void 0);var iC,aC=y.ccclass,oC=globalThis.game,rC=oC.match,sC=oC.player,lC=oC.context;aC("FlowContext")(QS=function(e){t(l,e);var a,o,s=n(l);function l(){var e;i(this,l);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return(e=s.call.apply(s,[this].concat(n))).playerId="",e.changeContext=function(){var e=d((function*(e,t,n){lC.receiveContext(e,t,n),yield lC.detectContextSessionType(),game.context.detectContextGameMode()}));return function(t,n,i){return e.apply(this,arguments)}}(),e}return r(l,[{key:"onLoad",value:function(){this.playerId=sC.getPlayerId()}},{key:"chooseFriends",value:(o=d((function*(e,t){var n=JSON.parse(t);try{He.showLoadingScreen(0),yield rC.context.choose.processAsync(h(h({},n),{},{playerId:this.playerId}))}catch(e){console.warn("chooseFriends",e),e instanceof Error&&He.showNotificationScreen(e.message)}finally{He.closeLoadingScreen()}})),function(e,t){return o.apply(this,arguments)})},{key:"processContextData",value:(a=d((function*(){try{He.showLoadingScreen(0),yield lC.processContextData()}catch(e){console.warn("processContext",e),e instanceof Error&&He.showNotificationScreen(e.message)}finally{He.closeLoadingScreen()}})),function(){return a.apply(this,arguments)})},{key:"setSingleContext",value:function(){this.changeContext("","SOLO",{})}},{key:"setTournamentContext",value:function(){this.changeUrl("/?context_source_id=123&context_type=GENERIC&tournament=true"),this.changeContext("mocked-context-id-tournament","THREAD",{})}},{key:"setShareInviteContext",value:function(){var e={type:lC.getSessionContextTypes().SHARE_INVITE,playerId:"4766619483409000",playerName:"Player",playerPhoto:""};this.changeContext("mocked-context-id-share-invite","THREAD",e)}},{key:"setMatchingGroupContext",value:function(){var e={type:lC.getSessionContextTypes().MATCHING_GROUP,playerId:"4766619483409000",playerName:"Player",playerPhoto:"",playerScore:100};this.changeContext("mocked-context-id-matching-group","GROUP",e)}},{key:"setChallengeFriendContext",value:function(){var e={type:lC.getSessionContextTypes().CHALLENGE_FRIEND,playerId:"4766619483409000",playerName:"Player",playerPhoto:""};this.changeContext("mocked-context-id-challenge-friend","THREAD",e)}},{key:"changeUrl",value:function(e){window.history.pushState({},"",e)}}]),l}(b));v._RF.pop(),v._RF.push({},"36562c8k/RF2p/1aLUWFaf8","FlowGroup",void 0);var uC,cC=y.ccclass,hC=globalThis.game,dC=hC.match,pC=hC.player;cC("FlowGroup")(iC=function(e){t(u,e);var a,o,s,l=n(u);function u(){var e;i(this,u);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return(e=l.call.apply(l,[this].concat(n))).playerId="",e}return r(u,[{key:"onLoad",value:function(){this.playerId=pC.getPlayerId()}},{key:"startGroup",value:(s=d((function*(e,t){var n=JSON.parse(t);try{He.showLoadingScreen(0),yield dC.group.start.processAsync(h(h({},n),{},{matchTag:"test",playerId:this.playerId}))}catch(e){console.warn("startGroup",e),e instanceof Error&&He.showNotificationScreen(e.message)}finally{He.closeLoadingScreen()}})),function(e,t){return s.apply(this,arguments)})},{key:"joinGroup",value:(o=d((function*(e,t){var n=JSON.parse(t);try{He.showLoadingScreen(0),yield dC.group.join.processAsync(h(h({},n),{},{playerId:this.playerId}))}catch(e){console.warn("joinGroup",e),e instanceof Error&&He.showNotificationScreen(e.message)}finally{He.closeLoadingScreen()}})),function(e,t){return o.apply(this,arguments)})},{key:"finishGroup",value:(a=d((function*(){try{He.showLoadingScreen(0),pC.setPlayerDataByName("score",Math.floor(2*Math.random())),yield dC.group.finish.processAsync()}catch(e){console.warn("finishGroup",e),e instanceof Error&&He.showNotificationScreen(e.message)}finally{He.closeLoadingScreen()}})),function(){return a.apply(this,arguments)})}]),u}(b));v._RF.pop(),v._RF.push({},"46e6dOzDGJMa48+tVKTAEIT","FlowSingle",void 0);var vC,yC=y.ccclass,fC=globalThis.game,mC=fC.match,gC=fC.player;yC("FlowSingle")(uC=function(e){t(l,e);var a,o,s=n(l);function l(){var e;i(this,l);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return(e=s.call.apply(s,[this].concat(n))).playerId="",e}return r(l,[{key:"onLoad",value:function(){this.playerId=gC.getPlayerId()}},{key:"startSingle",value:(o=d((function*(){try{He.showLoadingScreen(0),yield mC.single.start.processAsync({playerId:this.playerId})}catch(e){console.warn("startSingle",e),e instanceof Error&&He.showNotificationScreen(e.message)}finally{He.closeLoadingScreen()}})),function(){return o.apply(this,arguments)})},{key:"finishSingle",value:(a=d((function*(){try{gC.setPlayerDataByName("score",Math.floor(2*Math.random())),yield mC.single.finish.processAsync()}catch(e){console.warn("finishSingle",e),e instanceof Error&&He.showNotificationScreen(e.message)}finally{He.closeLoadingScreen()}})),function(){return a.apply(this,arguments)})}]),l}(b));v._RF.pop(),v._RF.push({},"943b1Zkv9BAaZVhinus8Bkv","FlowTournament",void 0);var bC,SC=y.ccclass,CC=globalThis.game,kC=CC.match,wC=CC.player;SC("FlowTournament")(vC=function(e){t(y,e);var a,o,s,l,u,c,h,p,v=n(y);function y(){var e;i(this,y);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return(e=v.call.apply(v,[this].concat(n))).playerId="",e}return r(y,[{key:"onLoad",value:function(){this.playerId=wC.getPlayerId()}},{key:"joinTournament",value:(p=d((function*(){try{He.showLoadingScreen(0);var e=(yield GameSDK.getTournamentAsync()).getID().toString();yield kC.tournament.join.processAsync({tournamentId:e,playerId:this.playerId})}catch(e){console.warn("joinTournament",e),e instanceof Error&&He.showNotificationScreen(e.message)}finally{He.closeLoadingScreen()}})),function(){return p.apply(this,arguments)})},{key:"continueTournament",value:(h=d((function*(){try{He.showLoadingScreen(0);var e=(yield GameSDK.getTournamentAsync()).getContextID();yield kC.tournament.continue.processAsync({contextId:e,playerId:this.playerId})}catch(e){console.warn("continueTournament",e),e instanceof Error&&He.showNotificationScreen(e.message)}finally{He.closeLoadingScreen()}})),function(){return h.apply(this,arguments)})},{key:"finishTournament",value:(c=d((function*(){try{He.showLoadingScreen(0),wC.setPlayerDataByName("score",Math.floor(2*Math.random())),yield kC.single.finish.processAsync()}catch(e){console.warn("finishTournament",e),e instanceof Error&&He.showNotificationScreen(e.message)}finally{He.closeLoadingScreen()}})),function(){return c.apply(this,arguments)})},{key:"createTournament",value:(u=d((function*(){try{He.showLoadingScreen(0);var e=GameCore.Utils.String.generateObjectId();yield GameSDK.tournament.createAsync({initialScore:0,config:{title:"Tournament title",tournamentTitle:"Tournament title"},data:{playerId:this.playerId,playerName:"playerName",leaderboardId:e}})}catch(e){console.warn("createTournament",e),e instanceof Error&&He.showNotificationScreen(e.message)}finally{He.closeLoadingScreen()}})),function(){return u.apply(this,arguments)})},{key:"postScoreTournament",value:(l=d((function*(e){try{var t=Number(e.string);console.warn("score",t),He.showLoadingScreen(0),yield GameSDK.tournament.postScoreAsync(t)}catch(e){console.warn("postScoreTournament",e),e instanceof Error&&He.showNotificationScreen(e.message)}finally{He.closeLoadingScreen()}})),function(e){return l.apply(this,arguments)})},{key:"shareTournament",value:(s=d((function*(e,t){var n=JSON.parse(t);try{He.showLoadingScreen(0),console.warn("payload",n),yield GameSDK.tournament.shareAsync(n)}catch(e){console.warn("shareTournament",n),e instanceof Error&&He.showNotificationScreen(e.message)}finally{He.closeLoadingScreen()}})),function(e,t){return s.apply(this,arguments)})},{key:"getTournamentsAsync",value:(o=d((function*(){try{He.showLoadingScreen(0);var e=GameSDK.tournament.getTournamentsAsync();console.warn(e)}catch(e){console.warn("getTournamentsAsync",e),e instanceof Error&&He.showNotificationScreen(e.message)}finally{He.closeLoadingScreen()}})),function(){return o.apply(this,arguments)})},{key:"getTournamentAsync",value:(a=d((function*(){try{He.showLoadingScreen(0);var e=yield GameSDK.getTournamentAsync();console.warn(e)}catch(e){console.warn("getTournamentAsync",e),e instanceof Error&&He.showNotificationScreen(e.message)}finally{He.closeLoadingScreen()}})),function(){return a.apply(this,arguments)})}]),y}(b));v._RF.pop(),v._RF.push({},"d78a7DHN+5P/YjKftUFEZcU","JavaAds",void 0);var EC;(0,y.ccclass)("JavaAds")(bC=function(e){t(o,e);var a=n(o);function o(){return i(this,o),a.apply(this,arguments)}return r(o,[{key:"__preload",value:function(){this.setupAds()}},{key:"setupAds",value:function(){}},{key:"onLoad",value:function(){}},{key:"start",value:function(){}}]),o}(b));v._RF.pop(),v._RF.push({},"58e17jb3n9LP6677b7ocHg+","PreloadScreens",void 0);var TC;(0,y.ccclass)("PreloadScreens")(EC=function(e){t(o,e);var a=n(o);function o(){return i(this,o),a.apply(this,arguments)}return r(o,[{key:"preload",value:function(){He.preloadScreens()}}]),o}(b));v._RF.pop(),v._RF.push({},"0fd01MYjfdD+4IeN6PtQl3m","ScreenCongratulation",void 0);var AC;(0,y.ccclass)("ScreenCongratulation")(TC=function(e){t(o,e);var a=n(o);function o(){return i(this,o),a.apply(this,arguments)}return r(o,[{key:"show",value:function(){He.openScreen(je.CONGRATULATION_SCREEN)}},{key:"close",value:function(){He.closeScreen(je.CONGRATULATION_SCREEN)}}]),o}(b));v._RF.pop(),v._RF.push({},"bb2dcIUQjhPDLt7B6ga20s/","ScreenLoading",void 0);var RC;(0,y.ccclass)("ScreenLoading")(AC=function(e){t(o,e);var a=n(o);function o(){return i(this,o),a.apply(this,arguments)}return r(o,[{key:"show",value:function(e,t){var n=Number(t);He.showLoadingScreen(n)}},{key:"close",value:function(){He.closeLoadingScreen()}}]),o}(b));v._RF.pop(),v._RF.push({},"f3a15oYustB1aev6BrFD/7Y","ScreenLose",void 0);var BC;(0,y.ccclass)("ScreenLose")(RC=function(e){t(o,e);var a=n(o);function o(){return i(this,o),a.apply(this,arguments)}return r(o,[{key:"show",value:function(){He.openScreen(je.LOSE_SCREEN,{level:1})}},{key:"close",value:function(){He.closeScreen(je.LOSE_SCREEN)}}]),o}(b));v._RF.pop(),v._RF.push({},"71603KupFhNAYktx1isDcrj","ScreenNotification",void 0);var PC;(0,y.ccclass)("ScreenNotification")(BC=function(e){t(o,e);var a=n(o);function o(){return i(this,o),a.apply(this,arguments)}return r(o,[{key:"show",value:function(e,t){var n=String(t);He.showNotificationScreen(n)}},{key:"close",value:function(){He.closeNotificationScreen()}}]),o}(b));v._RF.pop(),v._RF.push({},"1fb3eggYuVBQo5Uuzm/Nmjh","ScreenSettings",void 0);var _C;(0,y.ccclass)("ScreenSettings")(PC=function(e){t(o,e);var a=n(o);function o(){return i(this,o),a.apply(this,arguments)}return r(o,[{key:"show",value:function(e,t){var n=String(t);He.openScreen(je.SETTINGS_SCREEN,{message:n})}},{key:"close",value:function(){He.closeScreen(je.SETTINGS_SCREEN)}}]),o}(b));v._RF.pop(),v._RF.push({},"ae2cdksVsdJUKhhznchh9wJ","ScreenWinning",void 0);var OC;(0,y.ccclass)("ScreenWinning")(_C=function(e){t(o,e);var a=n(o);function o(){return i(this,o),a.apply(this,arguments)}return r(o,[{key:"show",value:function(){He.openScreen(je.WINNING_SCREEN)}},{key:"close",value:function(){He.closeScreen(je.WINNING_SCREEN)}}]),o}(b));v._RF.pop(),v._RF.push({},"abf91gNohBK7arKnziqu2PF","AnimationDemo2",void 0);var LC,DC,IC,NC,GC,FC;(0,y.ccclass)("AnimationDemo2")(OC=function(e){t(o,e);var a=n(o);function o(){return i(this,o),a.apply(this,arguments)}return r(o,[{key:"onLoad",value:function(){}},{key:"switchToTestScene",value:function(){Ke.switchScene("TestScene")}}]),o}(b));v._RF.pop(),v._RF.push({},"56b92F9LoxNs5aCgvw+tkq6","LoadingSceneTransition",void 0);var MC,zC,xC,UC,HC,jC,VC,WC=y.ccclass,KC=y.requireComponent,qC=y.property;LC=WC("LoadingSceneTransition"),DC=KC([_e]),IC=qC([R]),LC(NC=DC((FC=e((GC=function(e){t(u,e);var l=n(u);function u(){var e;i(this,u);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e=l.call.apply(l,[this].concat(n)),a(e,"targets",FC,o(e)),e.realTargets=[],e}return r(u,[{key:"start",value:function(){for(var e=this,t=0;t<this.targets.length;t++){var n=this.targets[t];if(n){var i=X(n);i.setParent(this.node),i.active=!1,this.realTargets.push(i)}}L.addPersistRootNode(this.node),L.once(D.EVENT_BEFORE_SCENE_LAUNCH,(function(){e.playFadeOutAnimationClip()}))}},{key:"playFadeOutAnimationClip",value:function(){var e=this,t=0;if(this.realTargets&&0!==this.realTargets.length){var n,i=s(this.realTargets);try{for(i.s();!(n=i.n()).done;){var a=n.value;a.active=!0;var o=a.getComponent(f);if(o)o.clips.some((function(e){return"FadeOut"===(null==e?void 0:e.name)}))?(o.play("FadeOut"),o.once(f.EventType.FINISHED,(function(){++t===e.realTargets.length&&e.node.destroy()}))):(this.node.destroy(),console.warn("Not have FadeOut clip"))}}catch(e){i.e(e)}finally{i.f()}}}}]),u}(b)).prototype,"targets",[IC],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),NC=GC))||NC);v._RF.pop(),v._RF.push({},"acb0egHPppFmYJalVNrDDv/","BaseScreen",void 0);var YC,JC=y.ccclass,XC=y.property,ZC=y.disallowMultiple,QC=GameCore.Events,$C=globalThis.game.event,ek=(MC=JC("BaseScreen"),zC=XC(R),xC=XC(R),MC(UC=ZC((jC=e((HC=function(e){t(u,e);var l=n(u);function u(){var e;i(this,u);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e=l.call.apply(l,[this].concat(n)),a(e,"container",jC,o(e)),a(e,"backgroundMask",VC,o(e)),e.data={},e}return r(u,[{key:"__preload",value:function(){this.animation=this.getComponent(f),this.validateRequiredComponents(),this.initializeNodes()}},{key:"initializeNodes",value:function(){var e=this.getMaskOpacity(),t=this.getContainerOpacity();e&&t&&(e.opacity=0,t.opacity=0)}},{key:"validateRequiredComponents",value:function(){Le.lazyValidateProperties(this)}},{key:"open",value:function(e){e&&(this.data=e),this.show(),this.runAnimation("OpenScreen")}},{key:"close",value:function(){var e=this;this.node.active&&(this.animation.once(f.EventType.FINISHED,(function(){$C.emit(QC.CLOSED_SCREEN,{screenName:e.node.name}),e.hide()})),this.runAnimation("CloseScreen"))}},{key:"runAnimation",value:function(e){if(!this.isAnimationExist(e))throw new Error("".concat(this.node.name,": Animation component must have ").concat(e," clip"));this.animation.play(e)}},{key:"isAnimationExist",value:function(e){return this.animation.clips.some((function(t){return!(!t||t.name!==e)}))}},{key:"getMaskOpacity",value:function(){var e=this.backgroundMask.getComponent(B);return e||(console.warn("BaseScreen: maskOpacity not found"),null)}},{key:"getContainerOpacity",value:function(){var e=this.container.getComponent(B);return e||(console.warn("BaseScreen: containerOpacity not found"),null)}},{key:"show",value:function(){var e=this.node.getComponent(Oe);if(e){e.enabled=!0,e.updateAlignment();var t,n=this.node.getComponentsInChildren(Oe),i=s(n);try{for(i.s();!(t=i.n()).done;){t.value.updateAlignment()}}catch(e){i.e(e)}finally{i.f()}}}},{key:"hide",value:function(){this.node.setWorldPosition(new T(-1e3,-1e3,0));var e=this.node.getComponent(Oe);e&&(e.enabled=!1)}}]),u}(b)).prototype,"container",[zC],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),VC=e(HC.prototype,"backgroundMask",[xC],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),UC=HC))||UC)||UC);v._RF.pop(),v._RF.push({},"f3521L4Mn5I3bhxr0QZJ9y9","BackgroundMask",void 0);var tk,nk,ik,ak,ok,rk,sk,lk,uk,ck,hk,dk,pk,vk,yk=y.ccclass,fk=y.requireComponent;yk("BackgroundMask")(YC=fk([B])(YC=function(e){t(o,e);var a=n(o);function o(){return i(this,o),a.apply(this,arguments)}return r(o,[{key:"onLoad",value:function(){var e=this.getComponent(B);e?(this.opacity=e,this.updateMaskAlpha()):console.warn("BackgroundMask: UIOpacity not found")}},{key:"updateMaskAlpha",value:function(){var e,t,n=this.opacity.opacity/255;e=n,(t=document.getElementById("app-mask"))&&(t.style.background="rgb(0 0 0 / ".concat(e,")"))}}]),o}(b))||YC);v._RF.pop(),v._RF.push({},"cecf2nUBzhIWZw7uJgVliXz","CongratulationScreen",void 0);var mk,gk=y.ccclass,bk=y.property,Sk=y.disallowMultiple,Ck=y.requireComponent,kk=GameCore.Events,wk=globalThis.game.event;tk=gk("CongratulationScreen"),nk=Ck(ek),ik=bk(R),ak=bk(R),ok=bk(k),rk=bk(k),sk=bk(k),tk(lk=Sk(lk=nk((ck=e((uk=function(e){t(l,e);var s=n(l);function l(){var e;i(this,l);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e=s.call.apply(s,[this].concat(n)),a(e,"congratulation",ck,o(e)),a(e,"confirmation",hk,o(e)),a(e,"closeButtonComponent",dk,o(e)),a(e,"yesButtonComponent",pk,o(e)),a(e,"noButtonComponent",vk,o(e)),e.handleOpeningScreen=function(t){if(!e.screen)throw new Error("CongratulationScreen: screen not found");e.validateEventPayload(t)&&(e.closeButtonComponent.interactable=!0,e.yesButtonComponent.interactable=!0,e.noButtonComponent.interactable=!0)},e.handleOpenedScreen=function(t){e.validateEventPayload(t)&&e.open()},e}return r(l,[{key:"__preload",value:function(){this.enabled=!1,this.screen=this.getComponent(ek),this.validateRequiredComponents(),this.listenScreenEvents()}},{key:"onDestroy",value:function(){this.unListenScreenEvents()}},{key:"validateRequiredComponents",value:function(){Le.lazyValidateProperties(this)}},{key:"listenScreenEvents",value:function(){wk.on(kk.OPENING_SCREEN,this.handleOpeningScreen),wk.on(kk.OPENED_SCREEN,this.handleOpenedScreen)}},{key:"unListenScreenEvents",value:function(){wk.off(kk.OPENING_SCREEN,this.handleOpeningScreen),wk.off(kk.OPENED_SCREEN,this.handleOpenedScreen)}},{key:"validateEventPayload",value:function(e){return e.screenName===this.node.name}},{key:"open",value:function(){this.enabled&&(this.confirmation.active=!1,this.congratulation.active=!0)}},{key:"close",value:function(){this.closeButtonComponent.interactable=!1,this.yesButtonComponent.interactable=!1,this.noButtonComponent.interactable=!1,He.closeScreen(je.CONGRATULATION_SCREEN)}},{key:"handleStartOver",value:function(){this.confirmation.active=!0,this.congratulation.active=!1;var e=this.confirmation.getComponent(B);e?(ne(e).set({opacity:0}).to(.2,{opacity:255},{easing:"smooth"}).start(),ne(this.confirmation).set({scale:new T(0,0,0)}).to(.2,{scale:new T(1,1,1)},{easing:"smooth"}).start()):console.warn("CongratulationScreen: UIOpacity not found")}},{key:"handleYesStartOver",value:function(){this.close(),this.node.scene.emit(oo.START_OVER)}},{key:"handleNoStartOver",value:function(){this.close(),this.node.scene.emit(oo.GAME_REPLAY,{level:this.screen.data.level})}},{key:"handleClickedClose",value:function(){this.close(),this.node.scene.emit(oo.GAME_REPLAY,{level:this.screen.data.level})}}]),l}(b)).prototype,"congratulation",[ik],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),hk=e(uk.prototype,"confirmation",[ak],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),dk=e(uk.prototype,"closeButtonComponent",[ok],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pk=e(uk.prototype,"yesButtonComponent",[rk],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vk=e(uk.prototype,"noButtonComponent",[sk],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),lk=uk))||lk)||lk);v._RF.pop(),v._RF.push({},"61985gSEDBMY6nVNc9Q1D6W","LoadingScreen",void 0);var Ek,Tk,Ak,Rk,Bk,Pk,_k,Ok,Lk,Dk,Ik,Nk,Gk,Fk,Mk,zk,xk,Uk,Hk,jk,Vk=y.ccclass,Wk=y.disallowMultiple,Kk=y.requireComponent,qk=GameCore.Events,Yk=globalThis.game.event;Vk("LoadingScreen")(mk=Wk(mk=Kk(ek)(mk=function(e){t(o,e);var a=n(o);function o(){var e;i(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=a.call.apply(a,[this].concat(n))).handleOpeningScreen=function(t){e.validateEventPayload(t)&&(e.enabled=!0)},e.handleOpenedScreen=function(t){e.validateEventPayload(t)&&e.open()},e.handleClosingScreen=function(t){e.validateEventPayload(t)&&e.unscheduleAllCallbacks()},e.handleClosedScreen=function(t){e.validateEventPayload(t)&&(e.enabled=!1)},e.handleOnCloseScreen=function(){He.closeScreen(je.LOADING_SCREEN)},e}return r(o,[{key:"onLoad",value:function(){this.enabled=!1,this.screen=this.getComponent(ek),this.validateRequiredComponents(),this.listenScreenEvents()}},{key:"onDestroy",value:function(){this.unListenScreenEvents()}},{key:"validateRequiredComponents",value:function(){Le.lazyValidateProperties(this)}},{key:"listenScreenEvents",value:function(){Yk.on(qk.OPENING_SCREEN,this.handleOpeningScreen),Yk.on(qk.OPENED_SCREEN,this.handleOpenedScreen),Yk.on(qk.CLOSING_SCREEN,this.handleClosingScreen),Yk.on(qk.CLOSED_SCREEN,this.handleClosedScreen)}},{key:"unListenScreenEvents",value:function(){Yk.off(qk.OPENING_SCREEN,this.handleOpeningScreen),Yk.off(qk.OPENED_SCREEN,this.handleOpenedScreen),Yk.off(qk.CLOSING_SCREEN,this.handleClosingScreen),Yk.off(qk.CLOSED_SCREEN,this.handleClosedScreen)}},{key:"validateEventPayload",value:function(e){return e.screenName===this.node.name}},{key:"open",value:function(){var e;if(this.enabled){var t=null!==(e=this.screen.data.duration)&&void 0!==e?e:0;t>0&&this.scheduleOnce(this.handleOnCloseScreen,t)}}}]),o}(b))||mk)||mk);v._RF.pop(),v._RF.push({},"15681ka+CZC45B7BdUhsnhF","LoseScreen",void 0);var Jk,Xk,Zk,Qk,$k,ew,tw,nw,iw=y.ccclass,aw=y.property,ow=y.disallowMultiple,rw=y.requireComponent,sw=GameCore.Events,lw=globalThis.game,uw=lw.language,cw=lw.event;Ek=iw("LoseScreen"),Tk=rw(ek),Ak=aw(O),Rk=aw(k),Bk=aw(R),Pk=aw(R),_k=aw(k),Ok=aw(k),Lk=aw(k),Dk=aw(k),Ek(Ik=ow(Ik=Tk((Gk=e((Nk=function(e){t(l,e);var s=n(l);function l(){var e;i(this,l);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=s.call.apply(s,[this].concat(n))).mode="classic",a(e,"levelText",Gk,o(e)),a(e,"retryButton",Fk,o(e)),a(e,"titleRibbon",Mk,o(e)),a(e,"dogeHead",zk,o(e)),a(e,"retryButtonComponent",xk,o(e)),a(e,"closeButtonComponent",Uk,o(e)),a(e,"endlessButtonComponent",Hk,o(e)),a(e,"classicButtonComponent",jk,o(e)),e.handleOpeningScreen=function(t){if(!e.screen)throw new Error("LoseScreen: screen not found");e.validateEventPayload(t)&&(e.retryButtonComponent.interactable=!0,e.closeButtonComponent.interactable=!0,e.endlessButtonComponent.interactable=!0,e.classicButtonComponent.interactable=!0)},e.handleOpenedScreen=function(t){e.validateEventPayload(t)&&e.open()},e}return r(l,[{key:"__preload",value:function(){this.enabled=!1,this.screen=this.getComponent(ek),this.validateRequiredComponents(),this.listenScreenEvents()}},{key:"onLoad",value:function(){var e=L.getScene();this.mode=e&&e.name===Ye.GAME_SCENE?"classic":"endless"}},{key:"onDestroy",value:function(){this.unListenScreenEvents()}},{key:"validateRequiredComponents",value:function(){Le.lazyValidateProperties(this)}},{key:"listenScreenEvents",value:function(){cw.on(sw.OPENING_SCREEN,this.handleOpeningScreen),cw.on(sw.OPENED_SCREEN,this.handleOpenedScreen)}},{key:"unListenScreenEvents",value:function(){cw.off(sw.OPENING_SCREEN,this.handleOpeningScreen),cw.off(sw.OPENED_SCREEN,this.handleOpenedScreen)}},{key:"validateEventPayload",value:function(e){return e.screenName===this.node.name}},{key:"open",value:function(){this.setLevelText(),this.resetState(),this.runOpenAnimation()}},{key:"close",value:function(){this.closeButtonComponent.interactable=!1,this.retryButtonComponent.interactable=!1,this.endlessButtonComponent.interactable=!1,this.classicButtonComponent.interactable=!1,He.closeScreen(je.LOSE_SCREEN)}},{key:"runOpenAnimation",value:function(){var e=this,t=this.createRibbonAnim(),n=this.createDogeHeadAnim(),i=this.createRetryButtonAnim();if(t&&n&&i){var a=ne({}).delay(.2).call((function(){return t.start()}));if("classic"===this.mode){var o=this.createLevelAnim();if(!o)return void console.warn("LoseScreen: levelAnim not found");a.delay(.2).call((function(){return o.start()}))}if(a.delay(.3).call((function(){return n.start()})).delay(.2).call((function(){return i.start()})).delay(.2),"endless"===this.mode){var r=this.createClassicButtonAnim();if(!r)return void console.warn("LoseScreen: classicButtonAnim not found");a.call((function(){return r.start()}))}else{var s=this.createEndlessButtonAnim();if(!s)return void console.warn("LoseScreen: endlessButtonAnim not found");a.call((function(){return s.start()}))}a.call((function(){Ve.showInterstitialAdAsync({forLevel:e.screen.data.level,includeSDK:["CrazyGames"]})})).start()}else console.warn("LoseScreen: animations not found")}},{key:"resetState",value:function(){var e=this.retryButton.getComponent(B),t=this.titleRibbon.getComponent(B),n=this.levelText.getComponent(B),i=this.dogeHead.getComponent(B),a=this.classicButtonComponent.getComponent(B),o=this.endlessButtonComponent.getComponent(B);e&&t&&n&&i&&a&&o?(e.opacity=0,t.opacity=0,n.opacity=0,i.opacity=0,a.opacity=0,o.opacity=0,this.dogeHead.setPosition(1e3,-19),this.retryButton.node.active=!1,this.classicButtonComponent.node.active=!1,this.endlessButtonComponent.node.active=!1,this.levelText.node.active=!1):console.warn("LoseScreen: UIOpacity of some component not found")}},{key:"setLevelText",value:function(){var e=this.screen.data.level,t=uw.getText("level");this.levelText.string="".concat(t," ").concat(e)}},{key:"createRibbonAnim",value:function(){var e=this.titleRibbon.getComponent(B);return e?ne(e).set({opacity:0}).to(.3,{opacity:255},{easing:"smooth"}):null}},{key:"createLevelAnim",value:function(){var e=this.levelText.getComponent(B);return e?(this.levelText.node.active=!0,ne(e).set({opacity:0}).to(.3,{opacity:255},{easing:"smooth"})):null}},{key:"createDogeHeadAnim",value:function(){var e=this.dogeHead.getComponent(B);return e?(this.dogeHead.setPosition(0,-97),ne(e).set({opacity:0}).to(.3,{opacity:255},{easing:"smooth"})):null}},{key:"createRetryButtonAnim",value:function(){var e=this.retryButton.getComponent(B);return e?(this.retryButton.node.active=!0,ne(e).set({opacity:0}).to(.4,{opacity:255},{easing:"smooth"})):null}},{key:"createClassicButtonAnim",value:function(){var e=this.classicButtonComponent.getComponent(B);return e?(this.classicButtonComponent.node.active=!0,ne(e).set({opacity:0}).to(.4,{opacity:255},{easing:"smooth"})):null}},{key:"createEndlessButtonAnim",value:function(){var e=this.endlessButtonComponent.getComponent(B);return e?(this.endlessButtonComponent.node.active=!0,ne(e).set({opacity:0}).to(.4,{opacity:255},{easing:"smooth"})):null}},{key:"handleClickedRetryGame",value:function(){this.close(),this.replayGame()}},{key:"handleClickedClassicMode",value:function(){this.close(),Ke.switchToGameScene()}},{key:"handleClickedEndlessMode",value:function(){this.close(),Ke.switchToEndlessScene()}},{key:"handleClickedClose",value:function(){this.close(),this.replayGame()}},{key:"replayGame",value:function(){this.node.scene.emit(oo.GAME_REPLAY,{level:this.screen.data.level})}}]),l}(b)).prototype,"levelText",[Ak],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Fk=e(Nk.prototype,"retryButton",[Rk],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Mk=e(Nk.prototype,"titleRibbon",[Bk],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),zk=e(Nk.prototype,"dogeHead",[Pk],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xk=e(Nk.prototype,"retryButtonComponent",[_k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Uk=e(Nk.prototype,"closeButtonComponent",[Ok],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Hk=e(Nk.prototype,"endlessButtonComponent",[Lk],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),jk=e(Nk.prototype,"classicButtonComponent",[Dk],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ik=Nk))||Ik)||Ik);v._RF.pop(),v._RF.push({},"6460akNFfhP9pDOT2Z0+s2R","NotificationScreen",void 0);var hw,dw,pw,vw,yw,fw,mw,gw,bw,Sw,Cw,kw,ww,Ew,Tw,Aw,Rw,Bw,Pw,_w,Ow=y.ccclass,Lw=y.disallowMultiple,Dw=y.requireComponent,Iw=y.property,Nw=GameCore,Gw=Nw.Events,Fw=Nw.Utils,Mw=globalThis.game.event;Jk=Ow("NotificationScreen"),Xk=Dw(ek),Zk=Iw(O),Qk=Iw(k),Jk($k=Lw($k=Xk((tw=e((ew=function(e){t(l,e);var s=n(l);function l(){var e;i(this,l);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e=s.call.apply(s,[this].concat(n)),a(e,"message",tw,o(e)),a(e,"touchZone",nw,o(e)),e.enableCloseOnTouch=!0,e.handleOpeningScreen=function(t){e.validateEventPayload(t)&&e.updateScreenData(t)},e.handleClosingScreen=function(t){e.validateEventPayload(t)&&e.unscheduleAllCallbacks()},e}return r(l,[{key:"__preload",value:function(){this.listenScreenEvents()}},{key:"onDestroy",value:function(){this.unListenScreenEvents()}},{key:"onLoad",value:function(){this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){Le.lazyValidateProperties(this)}},{key:"listenScreenEvents",value:function(){Mw.on(Gw.OPENING_SCREEN,this.handleOpeningScreen),Mw.on(Gw.CLOSING_SCREEN,this.handleClosingScreen)}},{key:"unListenScreenEvents",value:function(){Mw.off(Gw.OPENING_SCREEN,this.handleOpeningScreen),Mw.off(Gw.CLOSING_SCREEN,this.handleClosingScreen)}},{key:"validateEventPayload",value:function(e){return e.screenName===this.node.name}},{key:"updateScreenData",value:function(e){var t=e.screenData;Fw.Valid.isObject(t)?(t.message&&(this.message.string=t.message),t.duration&&t.duration>0&&this.scheduleOnce((function(){He.closeScreen(je.NOTIFICATION_SCREEN)}),t.duration),!1===t.enableCloseOnTouch?this.enableCloseOnTouch=!1:this.enableCloseOnTouch=!0):console.warn("NotificationScreen: screenData not found")}},{key:"handleClickedClose",value:function(){this.unscheduleAllCallbacks(),He.closeScreen(je.NOTIFICATION_SCREEN)}},{key:"closeOnTouch",value:function(){this.enableCloseOnTouch&&this.handleClickedClose()}}]),l}(b)).prototype,"message",[Zk],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nw=e(ew.prototype,"touchZone",[Qk],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$k=ew))||$k)||$k);v._RF.pop(),v._RF.push({},"61932YLC/5CFrE0eD0ez8Zg","SettingsScreen",void 0);var zw,xw,Uw,Hw,jw,Vw,Ww,Kw,qw,Yw,Jw,Xw,Zw,Qw,$w,eE,tE,nE,iE,aE,oE,rE,sE,lE,uE,cE,hE=y.ccclass,dE=y.property,pE=y.requireComponent,vE=GameCore,yE=vE.Events,fE=vE.Utils,mE=globalThis.game,gE=mE.player,bE=mE.event;hw=hE("SettingsScreen"),dw=pE(ek),pw=dE(R),vw=dE(R),yw=dE(R),fw=dE(pi),mw=dE(pi),gw=dE(pi),bw=dE(k),Sw=dE(k),hw(Cw=dw((ww=e((kw=function(e){t(l,e);var s=n(l);function l(){var e;i(this,l);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e=s.call.apply(s,[this].concat(n)),a(e,"musicSetting",ww,o(e)),a(e,"soundSetting",Ew,o(e)),a(e,"vibrateSetting",Tw,o(e)),a(e,"musicSwitch",Aw,o(e)),a(e,"soundSwitch",Rw,o(e)),a(e,"vibrateSwitch",Bw,o(e)),a(e,"closeButtonComponent",Pw,o(e)),a(e,"resumeButtonComponent",_w,o(e)),e.triggerSequence="",e.handleOpeningScreen=function(t){e.validateEventPayload(t)&&(e.closeButtonComponent.interactable=!0,e.resumeButtonComponent.interactable=!0,e.updateStatus())},e.handleResetSequence=function(){e.triggerSequence=""},e.handleTriggerUnlockKey=function(t){var n=t.code,i=oa.UNLOCK_SEQUENCE;"number"==typeof n&&-1!==i.indexOf(n.toString())&&(e.triggerSequence+=n.toString(),console.log("SettingsScreen: handleTriggerUnlockKey",n,e.triggerSequence,e.triggerSequence===i),e.triggerSequence===i&&(e.node.scene.emit(oa.Events.UNLOCK_DEV_TOOLS),e.node.off(oa.Events.TRIGGER_UNLOCK_KEY)))},e.updateVibrateButton=function(){var t=e.vibrateSetting.getComponentInChildren(k),n=e.vibrateSetting.getComponentInChildren(pi),i=e.vibrateSetting.getComponentInChildren(Xt);if(t&&n&&i)if(fE.Device.isMobile()){var a,o=null!==(a=gE.getPlayerSetting("vibrate"))&&void 0!==a&&a;n.setEnabled(o)}else t.interactable=!1,n.setEnabled(!1),i.changeState(!1);else console.warn("SettingsScreen: vibrate button missing components")},e}return r(l,[{key:"onLoad",value:function(){this.enabled=!1,this.screen=this.getComponent(ek),this.validateRequiredComponents(),this.listenScreenEvents(),this.listenUnlockDevTools(),this.handleGameDistributionUIChanges()}},{key:"onDestroy",value:function(){this.unListenScreenEvents(),this.unListenUnlockDevTools()}},{key:"validateRequiredComponents",value:function(){Le.lazyValidateProperties(this)}},{key:"handleGameDistributionUIChanges",value:function(){if("GameDistributions"===GameSDK.getSDKName()){this.vibrateSetting.active=!1;var e=this.musicSetting.position,t=e.x,n=e.y,i=e.z;this.musicSetting.setPosition(new T(t,n-50,i));var a=this.soundSetting.position,o=a.x,r=a.y,s=a.z;this.soundSetting.setPosition(new T(o,r-50,s))}}},{key:"listenScreenEvents",value:function(){bE.on(yE.OPENING_SCREEN,this.handleOpeningScreen)}},{key:"unListenScreenEvents",value:function(){bE.off(yE.OPENING_SCREEN,this.handleOpeningScreen)}},{key:"validateEventPayload",value:function(e){return e.screenName===this.node.name}},{key:"listenUnlockDevTools",value:function(){this.node.off(oa.Events.TRIGGER_UNLOCK_KEY),this.node.on(oa.Events.TRIGGER_RESET_SEQUENCE,this.handleResetSequence),this.node.on(oa.Events.TRIGGER_UNLOCK_KEY,this.handleTriggerUnlockKey)}},{key:"unListenUnlockDevTools",value:function(){this.node.off(oa.Events.TRIGGER_RESET_SEQUENCE,this.handleResetSequence),this.node.off(oa.Events.TRIGGER_UNLOCK_KEY,this.handleTriggerUnlockKey)}},{key:"open",value:function(){this.updateStatus(),this.runPopUpAnimation(),this.node.emit(oa.Events.TRIGGER_RESET_SEQUENCE)}},{key:"close",value:function(){this.closeButtonComponent.interactable=!1,this.resumeButtonComponent.interactable=!1,this.node.emit(oa.Events.TRIGGER_RESET_SEQUENCE),He.closeScreen(je.SETTINGS_SCREEN)}},{key:"updateStatus",value:function(){var e,t,n,i={music:null!==(e=gE.getPlayerSetting("music"))&&void 0!==e&&e,sound:null!==(t=gE.getPlayerSetting("sound"))&&void 0!==t&&t,vibrate:null!==(n=gE.getPlayerSetting("vibrate"))&&void 0!==n&&n};this.musicSwitch?this.soundSwitch?(this.musicSwitch.setEnabled(i.music),this.soundSwitch.setEnabled(i.sound),"GameDistributions"!==GameSDK.getSDKName()&&this.scheduleOnce(this.updateVibrateButton,.1)):console.warn("SettingsScreen: soundSwitch not found"):console.warn("SettingsScreen: musicSwitch not found")}},{key:"runPopUpAnimation",value:function(){this.screen.container||console.warn("SettingsScreen: screen not found")}},{key:"switchMusicButton",value:function(){if(this.musicSwitch){var e=this.musicSwitch.switch();gE.setSetting("music",e),this.node.emit(oa.Events.TRIGGER_UNLOCK_KEY,{code:e?1:0}),e?Me.playMusic():Me.pauseMusic()}else console.warn("SettingsScreen: musicSwitch not found")}},{key:"switchSoundButton",value:function(){if(this.soundSwitch){var e=this.soundSwitch.switch();gE.setSetting("sound",e),this.node.emit(oa.Events.TRIGGER_UNLOCK_KEY,{code:e?3:2})}else console.warn("SettingsScreen: soundSwitch not found")}},{key:"switchVibrateButton",value:function(){if(this.vibrateSwitch){var e=this.vibrateSwitch.switch();gE.setSetting("vibrate",e)}else console.warn("SettingsScreen: vibrateSwitch not found")}},{key:"handleClickedResume",value:function(){this.resumeGame()}},{key:"handleClickedClose",value:function(){this.resumeGame()}},{key:"resumeGame",value:function(){this.close(),this.node.scene.emit(oo.GAME_RESUME)}}]),l}(b)).prototype,"musicSetting",[pw],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ew=e(kw.prototype,"soundSetting",[vw],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Tw=e(kw.prototype,"vibrateSetting",[yw],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Aw=e(kw.prototype,"musicSwitch",[fw],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Rw=e(kw.prototype,"soundSwitch",[mw],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Bw=e(kw.prototype,"vibrateSwitch",[gw],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Pw=e(kw.prototype,"closeButtonComponent",[bw],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_w=e(kw.prototype,"resumeButtonComponent",[Sw],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Cw=kw))||Cw);v._RF.pop(),v._RF.push({},"35c09YGmdFA4pHOJFDg1tw5","WinningScreen",void 0);var SE=y.ccclass,CE=y.property,kE=y.disallowMultiple,wE=y.requireComponent,EE=GameCore.Events,TE=globalThis.game,AE=TE.player,RE=TE.event,BE=TE.language;zw=SE("WinningScreen"),xw=wE(ek),Uw=CE(S),Hw=CE(k),jw=CE(k),Vw=CE(R),Ww=CE(R),Kw=CE(O),qw=CE(k),Yw=CE(k),Jw=CE(k),Xw=CE(k),Zw=CE(k),zw(Qw=kE(Qw=xw((eE=e(($w=function(e){t(u,e);var l=n(u);function u(){var e;i(this,u);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=l.call.apply(l,[this].concat(n))).mode="classic",a(e,"titleRibbon",eE,o(e)),a(e,"nextLevelButton",tE,o(e)),a(e,"retryLevelButton",nE,o(e)),a(e,"confettiGroup",iE,o(e)),a(e,"dogeHead",aE,o(e)),a(e,"levelText",oE,o(e)),a(e,"closeButtonComponent",rE,o(e)),a(e,"nextLevelButtonComponent",sE,o(e)),a(e,"retryLevelButtonComponent",lE,o(e)),a(e,"classicButtonComponent",uE,o(e)),a(e,"endlessButtonComponent",cE,o(e)),e.starsCollected=3,e.handleOpeningScreen=function(t){if(!e.screen)throw new Error("WinningScreen: screen not found");e.validateEventPayload(t)&&(e.closeButtonComponent.interactable=!0,e.retryLevelButtonComponent.interactable=!0,e.nextLevelButtonComponent.interactable=!0,e.classicButtonComponent.interactable=!0,e.endlessButtonComponent.interactable=!0)},e.handleOpenedScreen=function(t){e.validateEventPayload(t)&&e.open()},e.handleClosingScreen=function(t){e.validateEventPayload(t)&&e.unscheduleAllCallbacks()},e}return r(u,[{key:"__preload",value:function(){this.enabled=!1,this.screen=this.getComponent(ek),this.validateRequiredComponents(),this.listenScreenEvents()}},{key:"onLoad",value:function(){var e=L.getScene();this.mode=e&&e.name===Ye.GAME_SCENE?"classic":"endless"}},{key:"onDestroy",value:function(){this.unListenScreenEvents()}},{key:"validateRequiredComponents",value:function(){Le.lazyValidateProperties(this)}},{key:"listenScreenEvents",value:function(){RE.on(EE.OPENING_SCREEN,this.handleOpeningScreen),RE.on(EE.OPENED_SCREEN,this.handleOpenedScreen),RE.on(EE.CLOSING_SCREEN,this.handleClosingScreen)}},{key:"unListenScreenEvents",value:function(){RE.off(EE.OPENING_SCREEN,this.handleOpeningScreen),RE.off(EE.OPENED_SCREEN,this.handleOpenedScreen),RE.off(EE.CLOSING_SCREEN,this.handleClosingScreen)}},{key:"validateEventPayload",value:function(e){return e.screenName===this.node.name}},{key:"start",value:function(){var e=this;this.dogeHead.translate(new T(-1e3,0)),this.scheduleOnce((function(){e.dogeHead.translate(new T(1e3,0))}),.1)}},{key:"open",value:function(){var e=this;this.nextLevelButton.node.active=!1,this.retryLevelButton.node.active=!1,this.classicButtonComponent.node.active=!1,this.endlessButtonComponent.node.active=!1,this.closeButtonComponent.interactable=!1,this.classicButtonComponent.interactable=!1,this.endlessButtonComponent.interactable=!1,this.confettiGroup.active=!0,this.updateLevel(),this.updateStars(),this.runRibbonAnimation();var t=this.runStarsAnimation();this.runConfetti(t),this.scheduleOnce(d((function*(){yield Ve.showInterstitialAdAsync({forLevel:e.screen.data.level,excludeSDK:["CrazyGames"]}),e.nextLevelButton.node.active=!0,e.retryLevelButton.node.active=!0,e.closeButtonComponent.interactable=!0;var t=e.nextLevelButton.getComponent(B);if(t){ne(t).set({opacity:0}).to(.4,{opacity:255},{easing:"smooth"}).start();var n=e.retryLevelButton.getComponent(B);if(n)if(ne(n).set({opacity:0}).delay(.2).to(.4,{opacity:255},{easing:"smooth"}).start(),"classic"===e.mode){var i=e.createEndlessButtonAnim();if(e.endlessButtonComponent.interactable=!0,!i)return void console.warn("WinningScreen: endlessButtonAnim not found");i.start()}else{var a=e.createClassicButtonAnim();if(e.classicButtonComponent.interactable=!0,!a)return void console.warn("WinningScreen: classicButtonAnim not found");a.start()}}})),t),Me.playSound(xe.HAND_CLAP)}},{key:"close",value:function(){this.closeButtonComponent.interactable=!1,this.retryLevelButtonComponent.interactable=!1,this.nextLevelButtonComponent.interactable=!1,this.classicButtonComponent.interactable=!1,this.endlessButtonComponent.interactable=!1,this.confettiGroup.active=!1,He.closeScreen(je.WINNING_SCREEN)}},{key:"showCongratulationScreen",value:function(){He.openScreen(je.CONGRATULATION_SCREEN,{level:this.screen.data.level})}},{key:"handleClickedNextLevel",value:function(){var e=AE.getGameData();if(e){var t=this.screen.data.level;if(t)t>=e.totalLevel?this.showCongratulationScreen():this.node.scene.emit(oo.NEXT_LEVEL,{level:t}),this.close();else console.warn("WinningScreen: level not found")}else console.warn("WinningScreen: gameData not found")}},{key:"handleClickedRetry",value:function(){this.close(),this.node.scene.emit(oo.GAME_REPLAY,{level:this.screen.data.level})}},{key:"handleClickedClose",value:function(){this.close();var e=this.screen.data.level;this.node.scene.emit(oo.NEXT_LEVEL,{level:e})}},{key:"updateStars",value:function(){var e;this.starsCollected=null!==(e=this.screen.data.stars)&&void 0!==e?e:0}},{key:"updateLevel",value:function(){var e=this.screen.data.level,t=BE.getText("level");this.levelText.string="".concat(t," ").concat(e)}},{key:"runRibbonAnimation",value:function(){this.titleRibbon.fillRange=0,ne(this.titleRibbon).to(.5,{fillRange:1},{easing:"backInOut"}).start()}},{key:"runStarsAnimation",value:function(){var e=this,t=oe("Container/Stars/RightStar",this.node),n=oe("Container/Stars/LeftStar",this.node),i=oe("Container/Stars/MidStar",this.node),a=[n,i,t];if(!t||!n||!i)return console.warn("WinningScreen: stars not found"),0;for(var o=0,r=a;o<r.length;o++){var s=r[o];if(s){var l=s.getChildByName("Star");l?l.active=!1:console.warn("WinningScreen: starComponent not found")}}this.animateStars(a);for(var u,c=1.32,h=function(){var t=a[d];if(!t)return console.warn("WinningScreen: stars not found"),{v:0};var n=t.getChildByName("Star");if(!n)return console.warn("WinningScreen: starComponent not found"),{v:0};e.scheduleOnce((function(){n.active=!0,Me.playSound(xe.STAR_RAISE)}),c),ne(n).set({scale:new T(1.7,1.7,1)}).delay(c).to(.35,{scale:new T(1,1,1)},{easing:"backOut"}).start(),c+=.3},d=0;d<this.starsCollected;d++)if(u=h())return u.v;return c}},{key:"animateStars",value:function(e){for(var t=0;t<e.length;t++){var n=e[t];if(!n)return void console.warn("WinningScreen: starEmpty not found");var i=new T(0,0,1),a=new T(1,1,1);1===t&&a.set(1.2,1.2,1),ne(n).set({scale:i}).delay(.7).to(.4,{scale:a},{easing:"backOut"}).start()}}},{key:"createClassicButtonAnim",value:function(){var e=this.classicButtonComponent.getComponent(B);return e?(this.classicButtonComponent.node.active=!0,ne(e).set({opacity:0}).delay(.4).to(.4,{opacity:255},{easing:"smooth"})):null}},{key:"createEndlessButtonAnim",value:function(){var e=this.endlessButtonComponent.getComponent(B);return e?(this.endlessButtonComponent.node.active=!0,ne(e).set({opacity:0}).delay(.4).to(.4,{opacity:255},{easing:"smooth"})):null}},{key:"runConfetti",value:function(e){var t=this;this.stopConfetti();var n=this.confettiGroup.getComponentsInChildren(Be);this.scheduleOnce((function(){if(!1!==t.node.active){var e,i=s(n);try{for(i.s();!(e=i.n()).done;){e.value.resetSystem()}}catch(e){i.e(e)}finally{i.f()}}}),e)}},{key:"stopConfetti",value:function(){var e,t=this.confettiGroup.getComponentsInChildren(Be),n=s(t);try{for(n.s();!(e=n.n()).done;){e.value.stopSystem()}}catch(e){n.e(e)}finally{n.f()}}},{key:"handleClickedClassicMode",value:function(){this.close(),Ke.switchToGameScene()}},{key:"handleClickedEndlessMode",value:function(){this.updatePlayerLevelProgress(),this.close(),Ke.switchToEndlessScene()}},{key:"updatePlayerLevelProgress",value:function(){var e=AE.getGameData();if(e){var t=this.screen.data.level;if(t)t>=e.totalLevel||this.node.scene.emit(oo.UPDATE_LEVEL,{level:t});else console.warn("WinningScreen: level not found")}else console.warn("WinningScreen: gameData not found")}}]),u}(b)).prototype,"titleRibbon",[Uw],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),tE=e($w.prototype,"nextLevelButton",[Hw],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nE=e($w.prototype,"retryLevelButton",[jw],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),iE=e($w.prototype,"confettiGroup",[Vw],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),aE=e($w.prototype,"dogeHead",[Ww],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),oE=e($w.prototype,"levelText",[Kw],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rE=e($w.prototype,"closeButtonComponent",[qw],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),sE=e($w.prototype,"nextLevelButtonComponent",[Yw],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),lE=e($w.prototype,"retryLevelButtonComponent",[Jw],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),uE=e($w.prototype,"classicButtonComponent",[Xw],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cE=e($w.prototype,"endlessButtonComponent",[Zw],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Qw=$w))||Qw)||Qw);v._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///main.js'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});