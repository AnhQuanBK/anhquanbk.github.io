function _instanceof(n,i){if(null!=i&&"undefined"!=typeof Symbol&&i[Symbol.hasInstance])return!!i[Symbol.hasInstance](n);return n instanceof i}function _ts_generator(n,i){var a,r,p,d,y={label:0,sent:function(){if(1&p[0])throw p[1];return p[1]},trys:[],ops:[]};return d={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(d[Symbol.iterator]=function(){return this}),d;function verb(n){return function(i){return step([n,i])}}function step(d){if(a)throw new TypeError("Generator is already executing.");while(y)try{if(a=1,r&&(p=2&d[0]?r.return:d[0]?r.throw||((p=r.return)&&p.call(r),0):r.next)&&!(p=p.call(r,d[1])).done)return p;if(r=0,p)d=[2&d[0],p.value];switch(d[0]){case 0:case 1:p=d;break;case 4:y.label++;return{value:d[1],done:false};case 5:y.label++;r=d[1];d=[0];continue;case 7:d=y.ops.pop();y.trys.pop();continue;default:if(p=y.trys,!(p=p.length>0&&p[p.length-1])&&(6===d[0]||2===d[0])){y=0;continue}if(3===d[0]&&(!p||d[1]>p[0]&&d[1]<p[3])){y.label=d[1];break}if(6===d[0]&&y.label<p[1]){y.label=p[1];p=d;break}if(p&&y.label<p[2]){y.label=p[2];y.ops.push(d);break}if(p[2])y.ops.pop();y.trys.pop();continue}d=i.call(n,y)}catch(n){d=[6,n];r=0}finally{a=p=0}if(5&d[0])throw d[1];return{value:d[0]?d[1]:void 0,done:true}}}System.register("chunks:///main.js",["./Screens-6fecbd07.js","cc"],function(){var n,i,a,r,p,d,y,m,g,b,C,S,k,w,E,T,A,R,B,_,P,L,O,D,I,N,G,M,F,z,x,U,H,j,V,W,K,q,J,Y,X,Z,Q,$,ee,et,en,ei,ea,eo,er,es,el,eu,ec,eh,ep,ed,ev,ey,ef,em,eg,eb,eC,eS,ek,ew,eE,eT,eA,eR,eB,e_,eP,eL,eO,eD,eI,eN,eG,eM,eF,ez,ex,eU,eH,ej,eV,eW,eK,eq,eJ,eY,eX,eZ,eQ,e$,e0,e1,e2,e3,e4,e5,e7,e6,e9,e8,te,tt;return{setters:[function(K){n=K._,i=K.a,a=K.b,r=K.c,p=K.d,d=K.e,y=K.f,m=K.C,g=K.G,b=K.g,C=K.S,S=K.h,k=K.A,w=K.i,E=K.j,T=K.k,A=K.l,R=K.E,B=K.m,_=K.n,P=K.o,L=K.p,O=K.q,D=K.r,I=K.s,N=K.t,G=K.u,M=K.v,F=K.w,z=K.x,x=K.y,U=K.z,H=K.B,j=K.M,V=K.D,W=K.F},function(n){K=n.cclegacy,q=n._decorator,J=n.Node,Y=n.Color,X=n.Canvas,Z=n.UITransform,Q=n.instantiate,$=n.Label,ee=n.RichText,et=n.Toggle,en=n.Button,ei=n.director,ea=n.Component,eo=n.Animation,er=n.CCString,es=n.CCInteger,el=n.Sprite,eu=n.game,ec=n.CCBoolean,eh=n.EventTouch,ep=n.Vec3,ed=n.Input,ev=n.UIOpacity,ey=n.Graphics,ef=n.profiler,em=n.sys,eg=n.ParticleSystem2D,eb=n.math,eC=n.CCFloat,eS=n.repeat,ek=n.Layers,ew=n.Enum,eE=n.lerp,eT=n.approx,eA=n.EPSILON,eR=n.RealCurve,eB=n.Gradient,e_=n.bits,eP=n.random,eL=n.Vec2,eO=n.randomRange,eD=n.randomRangeInt,eI=n.pseudoRandom,eN=n.Material,eG=n.SpriteFrame,eM=n.toRadian,eF=n.Font,ez=n.Director,ex=n.ERigidBody2DType,eU=n.RigidBody2D,eH=n.sp,ej=n.Collider2D,eV=n.Contact2DType,eW=n.HingeJoint2D,eK=n.RelativeJoint2D,eq=n.BoxCollider2D,eJ=n.Prefab,eY=n.CircleCollider2D,eX=n.resources,eZ=n.Mask,eQ=n.PolygonCollider2D,e$=n.NodePool,e0=n.tween,e1=n.ccenum,e2=n.find,e3=n.Tween,e4=n.PhysicsSystem2D,e5=n.ERaycast2DType,e7=n.Intersection2D,e6=n.JsonAsset,e9=n.ProgressBar,e8=n.EPhysics2DDrawFlags,te=n.DistanceJoint2D,tt=n.View}],execute:function(){var tn,ti,ta,to,tr,ts,tl,tu;K._RF.push({},"b2bd1+njXxJxaFY3ymm06WU","debug-view-runtime-control",void 0);var tc,th,tp,td,tv,ty,tf,tm,tg,tb=q.ccclass,tC=q.property;tn=tb("internal.DebugViewRuntimeControl"),ti=tC(J),ta=tC(J),to=tC(J),tn((ts=n((tr=function(n){i(l,n);var m=a(l);function l(){var n;r(this,l);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=m.call.apply(m,[this].concat(a)),p(n,"compositeModeToggle",ts,d(n)),p(n,"singleModeToggle",tl,d(n)),p(n,"EnableAllCompositeModeButton",tu,d(n)),n._single=0,n.strSingle=["No Single Debug","Vertex Color","Vertex Normal","Vertex Tangent","World Position","Vertex Mirror","Face Side","UV0","UV1","UV Lightmap","Project Depth","Linear Depth","Fragment Normal","Fragment Tangent","Fragment Binormal","Base Color","Diffuse Color","Specular Color","Transparency","Metallic","Roughness","Specular Intensity","IOR","Direct Diffuse","Direct Specular","Direct All","Env Diffuse","Env Specular","Env All","Emissive","Light Map","Shadow","AO","Fresnel","Direct Transmit Diffuse","Direct Transmit Specular","Env Transmit Diffuse","Env Transmit Specular","Transmit All","Direct Internal Specular","Env Internal Specular","Internal All","Fog"],n.strComposite=["Direct Diffuse","Direct Specular","Env Diffuse","Env Specular","Emissive","Light Map","Shadow","AO","Normal Map","Fog","Tone Mapping","Gamma Correction","Fresnel","Transmit Diffuse","Transmit Specular","Internal Specular","TT"],n.strMisc=["CSM Layer Coloration","Lighting With Albedo"],n.compositeModeToggleList=[],n.singleModeToggleList=[],n.miscModeToggleList=[],n.textComponentList=[],n.labelComponentList=[],n.textContentList=[],n._currentColorIndex=0,n.strColor=["<color=#ffffff>","<color=#000000>","<color=#ff0000>","<color=#00ff00>","<color=#0000ff>"],n.color=[Y.WHITE,Y.BLACK,Y.RED,Y.GREEN,Y.BLUE],n}return y(l,[{key:"start",value:function(){if(this.node.parent.getComponent(X)){var n=this.node.parent.getComponent(Z),i=.5*n.width,a=.5*n.height,r=.1*i-i,p=a-.1*a,d=this.node.getChildByName("MiscMode"),y=Q(d);y.parent=this.node,y.name="Buttons";var m=Q(d);m.parent=this.node,m.name="Titles";for(var g=0;g<2;g++){var b=Q(this.EnableAllCompositeModeButton.getChildByName("Label"));b.setPosition(r+(g>0?450:150),p,0),b.setScale(.75,.75,.75),b.parent=m;var C=b.getComponent($);C.string=g?"----------Composite Mode----------":"----------Single Mode----------",C.color=Y.WHITE,C.overflow=0,this.labelComponentList[this.labelComponentList.length]=C}p-=20;for(var S=0,k=0;k<this.strSingle.length;k++,S++){k===this.strSingle.length>>1&&(r+=200,S=0);var w=k?Q(this.singleModeToggle):this.singleModeToggle;w.setPosition(r,p-20*S,0),w.setScale(.5,.5,.5),w.parent=this.singleModeToggle.parent;var E=w.getComponentInChildren(ee);E.string=this.strSingle[k],this.textComponentList[this.textComponentList.length]=E,this.textContentList[this.textContentList.length]=E.string,w.on(et.EventType.TOGGLE,this.toggleSingleMode,this),this.singleModeToggleList[k]=w}r+=200,this.EnableAllCompositeModeButton.setPosition(r+15,p,0),this.EnableAllCompositeModeButton.setScale(.5,.5,.5),this.EnableAllCompositeModeButton.on(en.EventType.CLICK,this.enableAllCompositeMode,this),this.EnableAllCompositeModeButton.parent=y;var T=this.EnableAllCompositeModeButton.getComponentInChildren($);this.labelComponentList[this.labelComponentList.length]=T;var A=Q(this.EnableAllCompositeModeButton);A.setPosition(r+90,p,0),A.setScale(.5,.5,.5),A.on(en.EventType.CLICK,this.changeTextColor,this),A.parent=y,(T=A.getComponentInChildren($)).string="TextColor",this.labelComponentList[this.labelComponentList.length]=T;var R=Q(this.EnableAllCompositeModeButton);R.setPosition(r+200,p,0),R.setScale(.5,.5,.5),R.on(en.EventType.CLICK,this.hideUI,this),R.parent=this.node.parent,(T=R.getComponentInChildren($)).string="Hide UI",this.labelComponentList[this.labelComponentList.length]=T,this.hideButtonLabel=T,p-=40;for(var B=0;B<this.strMisc.length;B++){var _=Q(this.compositeModeToggle);_.setPosition(r,p-20*B,0),_.setScale(.5,.5,.5),_.parent=d;var P=_.getComponentInChildren(ee);P.string=this.strMisc[B],this.textComponentList[this.textComponentList.length]=P,this.textContentList[this.textContentList.length]=P.string,_.getComponent(et).isChecked=!!B,_.on(et.EventType.TOGGLE,B?this.toggleLightingWithAlbedo:this.toggleCSMColoration,this),this.miscModeToggleList[B]=_}p-=150;for(var L=0;L<this.strComposite.length;L++){var O=L?Q(this.compositeModeToggle):this.compositeModeToggle;O.setPosition(r,p-20*L,0),O.setScale(.5,.5,.5),O.parent=this.compositeModeToggle.parent;var D=O.getComponentInChildren(ee);D.string=this.strComposite[L],this.textComponentList[this.textComponentList.length]=D,this.textContentList[this.textContentList.length]=D.string,O.on(et.EventType.TOGGLE,this.toggleCompositeMode,this),this.compositeModeToggleList[L]=O}}else console.error("debug-view-runtime-control should be child of Canvas")}},{key:"isTextMatched",value:function(n,i){var a=new String(n),r=a.search(">");return -1===r?n===i:(a=(a=a.substr(r+1)).substr(0,a.search("<")))===i}},{key:"toggleSingleMode",value:function(n){for(var i=ei.root.debugView,a=n.getComponentInChildren(ee),r=0;r<this.strSingle.length;r++)this.isTextMatched(a.string,this.strSingle[r])&&(i.singleMode=r)}},{key:"toggleCompositeMode",value:function(n){for(var i=ei.root.debugView,a=n.getComponentInChildren(ee),r=0;r<this.strComposite.length;r++)this.isTextMatched(a.string,this.strComposite[r])&&i.enableCompositeMode(r,n.isChecked)}},{key:"toggleLightingWithAlbedo",value:function(n){ei.root.debugView.lightingWithAlbedo=n.isChecked}},{key:"toggleCSMColoration",value:function(n){ei.root.debugView.csmLayerColoration=n.isChecked}},{key:"enableAllCompositeMode",value:function(n){var i=ei.root.debugView;i.enableAllCompositeMode(!0);for(var a=0;a<this.compositeModeToggleList.length;a++)this.compositeModeToggleList[a].getComponent(et).isChecked=!0;var r=this.miscModeToggleList[0].getComponent(et);r.isChecked=!1,i.csmLayerColoration=!1,(r=this.miscModeToggleList[1].getComponent(et)).isChecked=!0,i.lightingWithAlbedo=!0}},{key:"hideUI",value:function(n){var i=this.node.getChildByName("Titles"),a=!i.active;this.singleModeToggleList[0].parent.active=a,this.miscModeToggleList[0].parent.active=a,this.compositeModeToggleList[0].parent.active=a,this.EnableAllCompositeModeButton.parent.active=a,i.active=a,this.hideButtonLabel.string=a?"Hide UI":"Show UI"}},{key:"changeTextColor",value:function(n){this._currentColorIndex++,this._currentColorIndex>=this.strColor.length&&(this._currentColorIndex=0);for(var i=0;i<this.textComponentList.length;i++)this.textComponentList[i].string=this.strColor[this._currentColorIndex]+this.textContentList[i]+"</color>";for(var a=0;a<this.labelComponentList.length;a++)this.labelComponentList[a].color=this.color[this._currentColorIndex]}},{key:"onLoad",value:function(){}},{key:"update",value:function(n){}}]),l}(ea)).prototype,"compositeModeToggle",[ti],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),tl=n(tr.prototype,"singleModeToggle",[ta],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),tu=n(tr.prototype,"EnableAllCompositeModeButton",[to],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),tr));K._RF.pop(),K._RF.push({},"60ac3vor0dMT5bXi8D3VSJN","BubbleAnimation",void 0);var tS=q.ccclass,tk=q.property,tw=(tc=tS("BubbleAnimation"),th=tk(eo),tp=tk(er),td=tk(es),tc((tf=n((ty=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=g.call.apply(g,[this].concat(a)),p(n,"animation",tf,d(n)),p(n,"clipName",tm,d(n)),p(n,"repeat",tg,d(n)),n.currentRepeat=-1,n}return y(u,[{key:"__preload",value:function(){this.animation=this.getComponent(eo),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"play",value:function(){var n=this;this.animation&&(this.animation.clips.find(function(i){return(null==i?void 0:i.name)===n.clipName})?(this.currentRepeat=-1,this.animation.play(this.clipName)):console.warn("BubbleAnimation: Animation component must have ".concat(this.clipName," clip")))}},{key:"onBubbleAnimationLoop",value:function(){this.animation&&-1!==this.repeat&&(this.currentRepeat++,this.currentRepeat>this.repeat&&this.animation.stop())}}]),u}(ea)).prototype,"animation",[th],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),tm=n(ty.prototype,"clipName",[tp],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"Bubble"}}),tg=n(ty.prototype,"repeat",[td],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return -1}}),tv=ty))||tv);K._RF.pop(),K._RF.push({},"ca427NpeqpC3bUoGTd9I/BM","Background",void 0);var tE,tT,tA,tR,tB,t_,tP,tL,tO,tD,tI,tN,tG,tM,tF,tz,tx,tU=q.ccclass,tH=b.Layout;tU("Background")(function(n){i(o,n);var p=a(o);function o(){var n;r(this,o);for(var i=arguments.length,a=new Array(i),d=0;d<i;d++)a[d]=arguments[d];return(n=p.call.apply(p,[this].concat(a))).handleSpriteTypeWhenLayoutChanged=function(i){i===tH.Landscape?(n.setBackgroundType(el.Type.TILED),n.setActiveBlockLines(!0)):(n.setBackgroundType(el.Type.SIMPLE),n.setActiveBlockLines(!1))},n}return y(o,[{key:"__preload",value:function(){this.sprite=this.getComponent(el),this.blockLines=this.getComponentsInChildren(el),this.validateRequiredComponents(),this.listenGameEvents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"listenGameEvents",value:function(){eu.on(g.LAYOUT_CHANGED,this.handleSpriteTypeWhenLayoutChanged)}},{key:"setBackgroundType",value:function(n){this.sprite&&(this.sprite.type=n)}},{key:"setActiveBlockLines",value:function(n){var i=this;this.blockLines&&this.blockLines.forEach(function(a){a.node!==i.node&&(a.node.active=n)})}}]),o}(ea));K._RF.pop(),K._RF.push({},"4b299Dv1kVGcqQmJC9yBPAV","ButtonReleased",void 0);var tj,tV,tW,tK,tq=q.ccclass,tJ=q.requireComponent,tY=q.property,tX=q.disallowMultiple,tZ=q.executionOrder,tQ=globalThis.game.analytics;tE=tq("ButtonReleased"),tT=tJ([eo,en]),tA=tZ(120),tR=tY(er),tB=tY(er),t_=tY(ec),tP=tY({visible:function(){return this.useSound},type:C}),tL=tY({tooltip:"Add a delay after click to prevent spamming (not apply for cancel click)"}),tO=tY({visible:function(){return this.disableSpamClick},tooltip:"Delay time in seconds"}),tE(tD=tX(tD=tT(tD=tA((tN=n((tI=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=g.call.apply(g,[this].concat(a)),p(n,"downClipName",tN,d(n)),p(n,"upClipName",tG,d(n)),p(n,"useSound",tM,d(n)),p(n,"soundKey",tF,d(n)),p(n,"disableSpamClick",tz,d(n)),p(n,"disableSpamDelay",tx,d(n)),n.currentClickBoundingBox=null,n.hasDown=!1,n.hasUp=!1,n.onTouchStart=function(i){n.buttonComponent.interactable&&(n.hasDown||(n.currentClickBoundingBox=S.getBoundingBoxToWorld(n.node),n.hasDown=!0,n.runAnimation(n.downClipName),n.useSound&&k.playSound(w[n.soundKey])))},n.onTouchEnd=function(i){n.buttonComponent.interactable&&n.hasDown&&(n.hasUp||n.handleUp(i))},n.onTouchCancel=function(i){var a,r;if(n.buttonComponent.interactable&&n.hasDown&&!n.hasUp){var p=i.getUILocation(),d=null!==(a=null===(r=n.currentClickBoundingBox)||void 0===r?void 0:r.contains(p))&&void 0!==a&&a;_instanceof(i,eh)&&d?n.handleUp(i):(n.hasUp=!0,n.runAnimation(n.upClipName),n.animationComponent.once(eo.EventType.FINISHED,function(){n.handleResetButtonState()}))}},n.handleResetButtonState=function(){var i;if(n.hasDown=!1,n.hasUp=!1,n.buttonComponent){var a=n.buttonComponent.node.scale.x,r=n.buttonComponent.node.scale.z;null===(i=n.buttonComponent)||void 0===i||i.node.setScale(new ep(a,1,r))}},n}return y(u,[{key:"__preload",value:function(){this.buttonComponent=this.getComponent(en),this.animationComponent=this.getComponent(eo),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"onEnable",value:function(){this.animationComponent.clips.length<2?console.warn("ButtonAnimAddition: Animation component must have 2 clips in ".concat(this.node.name)):(this.node.off(ed.EventType.TOUCH_END,this.buttonComponent._onTouchEnded,this.buttonComponent),this.node.on(J.EventType.TOUCH_START,this.onTouchStart),this.node.on(J.EventType.TOUCH_END,this.onTouchEnd),this.node.on(J.EventType.TOUCH_CANCEL,this.onTouchCancel))}},{key:"onDisable",value:function(){this.node.off(J.EventType.TOUCH_START,this.onTouchStart),this.node.off(J.EventType.TOUCH_END,this.onTouchEnd),this.node.off(J.EventType.TOUCH_CANCEL,this.onTouchCancel),this.unschedule(this.handleResetButtonState),this.handleResetButtonState()}},{key:"handleUp",value:function(n){var i=this;this.hasUp=!0,this.runAnimation(this.upClipName),this.animationComponent.once(eo.EventType.FINISHED,function(){if(i.disableSpamClick?i.scheduleOnce(i.handleResetButtonState,i.disableSpamDelay):i.handleResetButtonState(),!i.buttonComponent||i.buttonComponent.interactable){tQ.event(GameCore.Plugins.Analytics.Events.BUTTON_CLICK,{button_name:i.node.name,screen_name:E.getCurrentPage()});var a=i.buttonComponent.clickEvents;if(a){var r,p=T(a);try{for(p.s();!(r=p.n()).done;){var d=r.value;d.emit([n,d.customEventData])}}catch(n){p.e(n)}finally{p.f()}}}})}},{key:"runAnimation",value:function(n){if(!this.isAnimationExist(n))throw new Error("".concat(this.node.name,": Animation component must have ").concat(n," clip"));this.animationComponent.play(n)}},{key:"isAnimationExist",value:function(n){return this.animationComponent.clips.some(function(i){return!(!i||i.name!==n)})}}]),u}(ea)).prototype,"downClipName",[tR],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"ButtonDown"}}),tG=n(tI.prototype,"upClipName",[tB],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"ButtonUp"}}),tM=n(tI.prototype,"useSound",[t_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),tF=n(tI.prototype,"soundKey",[tP],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return C[A.BUTTON_CLICK]}}),tz=n(tI.prototype,"disableSpamClick",[tL],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),tx=n(tI.prototype,"disableSpamDelay",[tO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return .5}}),tD=tI))||tD)||tD)||tD);K._RF.pop(),K._RF.push({},"0e570DdAIZPKY6DNtNerFmX","OpacityToggler",void 0);var t$,t0,t1,t2=q.ccclass,t3=q.requireComponent,t4=q.property,t5=t2("OpacityToggler")(tj=t3([ev])((tW=n((tV=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=g.call.apply(g,[this].concat(a)),p(n,"activeValue",tW,d(n)),p(n,"inActiveValue",tK,d(n)),n}return y(u,[{key:"__preload",value:function(){this.opacityComponent=this.getComponent(ev),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"changeState",value:function(n){var i=arguments.length>0&&void 0!==n&&n;this.opacityComponent.opacity=i?this.activeValue:this.inActiveValue}}]),u}(ea)).prototype,"activeValue",[t4],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 255}}),tK=n(tV.prototype,"inActiveValue",[t4],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 128}}),tj=tV))||tj)||tj;K._RF.pop(),K._RF.push({},"7ef37Q3PZpKYaeik5JzGwNy","DebugResolution",void 0);var t7,t6,t9,t8,ne,nt,nn,ni,na,no,nr,ns,nl,nu,nc,nh,np,nd,nv,ny,nf=q.ccclass,nm=q.property,ng=q.requireComponent,nb=q.disallowMultiple,nC=q.executeInEditMode,nS=b.DesignSize,nk=nS.Portrait,nw=nS.Landscape;nf("DebugResolution")(t$=nb(t$=ng([ey])(t$=nC(!0)(((t1=function(n){i(o,n);var p=a(o);function o(){var n;r(this,o);for(var i=arguments.length,a=new Array(i),d=0;d<i;d++)a[d]=arguments[d];return(n=p.call.apply(p,[this].concat(a))).handleLayoutChange=function(){var i;null===(i=n.graphics)||void 0===i||i.clear(),n.start()},n}return y(o,[{key:"drawPortrait",get:function(){return o._drawPortrait},set:function(n){n!==o._drawPortrait&&(n?this.drawPortraitResolution():this.graphics.clear(),o._drawPortrait=n,o._drawLandscape&&this.drawLandscapeResolution())}},{key:"drawLandscape",get:function(){return o._drawLandscape},set:function(n){n!==o._drawLandscape&&(n?this.drawLandscapeResolution():this.graphics.clear(),o._drawLandscape=n,o._drawPortrait&&this.drawPortraitResolution())}},{key:"__preload",value:function(){this.graphics=this.getComponent(ey),this.validateRequiredComponents(),this.listenGameEvents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"listenGameEvents",value:function(){eu.on(g.LAYOUT_CHANGED,this.handleLayoutChange)}},{key:"start",value:function(){this.drawPortrait&&this.drawPortraitResolution(),this.drawLandscape&&this.drawLandscapeResolution()}},{key:"drawPortraitResolution",value:function(){var n=this.graphics,i=nk.WIDTH,a=nk.HEIGHT,r=-i/2,p=-a/2;n.strokeColor=Y.GREEN,n.rect(r,p,i,a),n.stroke()}},{key:"drawLandscapeResolution",value:function(){var n=this.graphics,i=nw.WIDTH,a=nw.HEIGHT,r=-i/2,p=-a/2;n.strokeColor=Y.CYAN,n.rect(r,p,i,a),n.stroke()}}]),o}(ea))._drawPortrait=!0,t1._drawLandscape=!0,n((t0=t1).prototype,"drawPortrait",[nm],Object.getOwnPropertyDescriptor(t0.prototype,"drawPortrait"),t0.prototype),n(t0.prototype,"drawLandscape",[nm],Object.getOwnPropertyDescriptor(t0.prototype,"drawLandscape"),t0.prototype),t$=t0))||t$)||t$)||t$);K._RF.pop(),K._RF.push({},"0e2d6yn/BVObK1kyTJ5a09a","GameStats",void 0);var nE,nT=q.ccclass,nA=q.executionOrder,nR=q.property,nB=GameCore.Utils,n_=Y.RED,nP=Y.BLACK,nL=Y.MAGENTA;t7=nT("GameStats"),t6=nA(-1e3),t9=nR($),t8=nR($),ne=nR($),nt=nR($),nn=nR($),ni=nR($),na=nR($),no=nR($),t7(nr=t6((nl=n((ns=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=g.call.apply(g,[this].concat(a)),p(n,"fpsLabel",nl,d(n)),p(n,"drawCountLabel",nu,d(n)),p(n,"logicTimeLabel",nc,d(n)),p(n,"physicTimeLabel",nh,d(n)),p(n,"renderTimeLabel",np,d(n)),p(n,"objectMemoryUsageLabel",nd,d(n)),p(n,"textureMemoryUsageLabel",nv,d(n)),p(n,"devicePixelRatioLabel",ny,d(n)),n.refreshInterval=.5,n.handleMouseDown=function(){n.bg.enabled=!n.bg.enabled},n.waitForStats=function(){ef.stats&&(n.unschedule(n.waitForStats),n.node.active=!0,n.stats=ef.stats,n.startUpdateStats())},n.updateStats=function(){n.updateFps(),n.updateDrawCalls(),n.updateLogicTime(),n.updatePhysicTime(),n.updateRenderTime(),n.updateObjectMemoryUsage(),n.updateTextureMemoryUsage(),n.updateDevicePixelRatio()},n}return y(u,[{key:"__preload",value:function(){this.bg=this.getComponent(el),this.validateRequiredComponents(),this.listenInputEvents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"listenInputEvents",value:function(){this.node.on(ed.EventType.TOUCH_START,this.handleMouseDown)}},{key:"start",value:function(){this.bg.enabled=!1,this.node.active=!1,ef&&nB.Valid.isDebugger()&&(ef.showStats(),this.schedule(this.waitForStats,.5,20))}},{key:"startUpdateStats",value:function(){this.schedule(this.updateStats,this.refreshInterval)}},{key:"updateFps",value:function(){var n=this.getFps();this.updateFpsColor(n),this.fpsLabel.string="FPS: ".concat(n)}},{key:"updateFpsColor",value:function(n){this.fpsLabel.color=n<30?n_:n<48?nL:nP}},{key:"updateDrawCalls",value:function(){var n=this.getDrawCalls();this.updateDrawCallsColor(n),this.drawCountLabel.string="Draw Calls: ".concat(n)}},{key:"updateDrawCallsColor",value:function(n){var i=em.os===em.OS.IOS,a=i?80:25,r=i?60:15;this.drawCountLabel.color=n>a?n_:n>r?nL:nP}},{key:"updateLogicTime",value:function(){var n=this.getLogicTime();this.updateLogicTimeColor(n),this.logicTimeLabel.string="Logic Time: ".concat(n.toFixed(2),"ms")}},{key:"updateLogicTimeColor",value:function(n){this.logicTimeLabel.color=n>10?n_:n>5?nL:nP}},{key:"updatePhysicTime",value:function(){var n=this.getPhysicTime();this.updatePhysicTimeColor(n),this.physicTimeLabel.string="Physic Time: ".concat(n.toFixed(2),"ms")}},{key:"updatePhysicTimeColor",value:function(n){this.physicTimeLabel.color=n>10?n_:n>5?nL:nP}},{key:"updateRenderTime",value:function(){var n=this.getRenderTime();this.updateRenderTimeColor(n),this.renderTimeLabel.string="Render Time: ".concat(n.toFixed(2),"ms")}},{key:"updateRenderTimeColor",value:function(n){this.renderTimeLabel.color=n>10?n_:n>5?nL:nP}},{key:"updateObjectMemoryUsage",value:function(){var n=this.getObjectMemoryUsage();this.updateObjectMemoryUsageColor(n),this.objectMemoryUsageLabel.string="Object Mem: ".concat(n.toFixed(2),"MB")}},{key:"updateObjectMemoryUsageColor",value:function(n){this.objectMemoryUsageLabel.color=n>40?n_:n>25?nL:nP}},{key:"updateTextureMemoryUsage",value:function(){var n=this.getTextureMemoryUsage();this.updateTextureMemoryUsageColor(n),this.textureMemoryUsageLabel.string="Texture Mem: ".concat(n.toFixed(2),"MB")}},{key:"updateTextureMemoryUsageColor",value:function(n){this.textureMemoryUsageLabel.color=n>50?n_:n>35?nL:nP}},{key:"updateDevicePixelRatio",value:function(){var n=this.getDevicePixelRatio();this.updateDevicePixelRatioColor(n),this.devicePixelRatioLabel.string="Device Pixel Ratio: ".concat(n)}},{key:"updateDevicePixelRatioColor",value:function(n){this.devicePixelRatioLabel.color=n>2?n_:n<=1?nL:nP}},{key:"getFps",value:function(){var n=this.stats.fps.counter;return Math.floor(n.value)||0}},{key:"getDrawCalls",value:function(){return this.stats.draws.counter.value||0}},{key:"getLogicTime",value:function(){var n=this.stats.logic.counter;return Math.floor(1e3*n.value)/1e3||0}},{key:"getPhysicTime",value:function(){var n=this.stats.physics.counter;return Math.floor(1e3*n.value)/1e3||0}},{key:"getRenderTime",value:function(){var n=this.stats.render.counter;return Math.floor(1e3*n.value)/1e3||0}},{key:"getObjectMemoryUsage",value:function(){var n=this.stats.bufferMemory.counter;return Math.floor(1e3*n.value)/1e3||0}},{key:"getTextureMemoryUsage",value:function(){var n=this.stats.textureMemory.counter;return Math.floor(1e3*n.value)/1e3||0}},{key:"getDevicePixelRatio",value:function(){return window.devicePixelRatio||0}}]),u}(ea)).prototype,"fpsLabel",[t9],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nu=n(ns.prototype,"drawCountLabel",[t8],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nc=n(ns.prototype,"logicTimeLabel",[ne],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nh=n(ns.prototype,"physicTimeLabel",[nt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),np=n(ns.prototype,"renderTimeLabel",[nn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nd=n(ns.prototype,"objectMemoryUsageLabel",[ni],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nv=n(ns.prototype,"textureMemoryUsageLabel",[na],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ny=n(ns.prototype,"devicePixelRatioLabel",[no],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nr=ns))||nr);K._RF.pop(),K._RF.push({},"21a9aAlkBtGxKLqip8g0o6l","ParticleSystem2DExtra",void 0);var nO=q.ccclass,nD=q.disallowMultiple,nI=q.executeInEditMode,nN=q.requireComponent,nG=nO("ParticleSystem2DExtra")(nE=nI(!0)(nE=nD(!0)(nE=nN(eg)(nE=function(n){i(o,n);var p=a(o);function o(){var n;r(this,o);for(var i=arguments.length,a=new Array(i),d=0;d<i;d++)a[d]=arguments[d];return(n=p.call.apply(p,[this].concat(a))).emitParticle=function(i){return function(a){i(a);var r=n.particleSystem._simulator.particles.length,p=n.particleSystem._simulator.particles[r-1];n.initParticle(p)}},n.step=function(i){return function(a){for(var r=n.particleSystem._simulator.particles,p=0;p<r.length;p++){var d=r[p];n.updateParticle(d,a)}i(a)}},n}return y(o,[{key:"__preload",value:function(){this.particleSystem=this.getComponent(eg),this.validateRequiredComponents(),this.overrideFunctions()}},{key:"overrideFunctions",value:function(){var n=this.particleSystem._simulator.emitParticle.bind(this.particleSystem._simulator);this.particleSystem._simulator.emitParticle=this.emitParticle(n);var i=this.particleSystem._simulator.step.bind(this.particleSystem._simulator);this.particleSystem._simulator.step=this.step(i)}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}}]),o}(ea))||nE)||nE)||nE)||nE;K._RF.pop(),K._RF.push({},"9a5a3MgLaRAKbHluGCPsA8j","ExampleParticleSystem2DExtra",void 0);var nM,nF,nz,nx,nU,nH,nj,nV,nW,nK,nq;(0,q.ccclass)("ExampleParticleSystem2DExtra")(function(n){i(o,n);var p=a(o);function o(){return r(this,o),p.apply(this,arguments)}return y(o,[{key:"initParticle",value:function(n){n.maxSize=eb.randomRange(.25,1)*n.size,n.size=0,n.deltaSize=0,n.cycleDuration=eb.randomRange(.4,.6),n.life=n.timeToLive,this.setInitPosition(n.pos)}},{key:"updateParticle",value:function(n,i){this.updateScale(n)}},{key:"setInitPosition",value:function(n){var i=n.x,a=n.y;return n.x=i+eb.randomRange(-350,350),n.y=a+eb.randomRange(-350,350),n}},{key:"updateScale",value:function(n){var i=1-(n.life-n.timeToLive)%n.cycleDuration/n.cycleDuration;n.size=n.maxSize*Math.sin(i*Math.PI)}}]),o}(nG));K._RF.pop(),K._RF.push({},"78746Q4viBIlbRROK4J1bSl","Burst",void 0);var nJ,nY=q.ccclass,nX=q.property,nZ=(nM=nY("Burst"),nF=nX(eC),nz=nX(es),nx=nX(eC),nU=nX(es),nM((nV=n((nj=function(){function e(){r(this,e),p(this,"time",nV,this),p(this,"repeatCount",nW,this),p(this,"repeatInterval",nK,this),p(this,"count",nq,this),this.remainingCount=0,this.curTime=0}return y(e,[{key:"update",value:function(n,i){if(0===this.remainingCount&&(this.remainingCount=this.repeatCount,this.curTime=this.time),this.remainingCount>0){var a=eS(n.time-n.startDelay.evaluate(0,1),n.duration)-i;a=a>0?a:0;var r=eS(n.time-n.startDelay.evaluate(0,1),n.duration);this.curTime>=a&&this.curTime<r&&(n.emit(this.count,i-(r-this.curTime)),this.curTime+=this.repeatInterval,--this.remainingCount)}}},{key:"reset",value:function(){this.remainingCount=0,this.curTime=0}}]),e}()).prototype,"time",[nF],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),nW=n(nj.prototype,"repeatCount",[nz],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),nK=n(nj.prototype,"repeatInterval",[nx],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),nq=n(nj.prototype,"count",[nU],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),nH=nj))||nH);K._RF.pop(),K._RF.push({},"726cc2e08FBqpVIg/tPM7H2","Particle",void 0);var nQ,n$,n0,n1,n2,n3,n4,n5,n7,n6,n9,n8,ie,it,ii,ia,io,ir=q.ccclass,is=q.executeInEditMode,il=ir("Particle")(nJ=is(!0)(nJ=function(n){i(o,n);var p=a(o);function o(){var n;r(this,o);for(var i=arguments.length,a=new Array(i),d=0;d<i;d++)a[d]=arguments[d];return(n=p.call.apply(p,[this].concat(a))).remainingLifetime=0,n.startLifetime=0,n}return y(o,[{key:"onLoad",value:function(){this.node.layer=ek.Enum.UI_2D}},{key:"init",value:function(n){this.sprite=this.getComponent(el),this.particleSystem=n,this.velocity=ep.ZERO,this.remainingLifetime=0,this.startLifetime=0,this.startSize=ep.ZERO,this.startColor=Y.WHITE.clone(),this.randomSeed=0}},{key:"reset",value:function(){this.node.rotation.set(0,0,0)}}]),o}(ea))||nJ)||nJ;K._RF.pop(),K._RF.push({},"00eb3NBo0tM/qcD6ViMjx0A","CurveRange",void 0);var iu,ic,ih,ip,id,iv,iy,im,ig,ib,iC,iS,ik,iw,iE,iT,iA,iR=q.ccclass,iB=q.property,i_=ew({Constant:0,Curve:1,TwoCurves:2,TwoConstants:3}),iP=(nQ=iR("CurveRange"),n$=iB({type:ew(i_)}),n0=iB({visible:function(){return this.mode===i_.Constant}}),n1=iB({visible:function(){return this.mode===i_.Curve}}),n2=iB({visible:function(){return this.mode===i_.TwoCurves}}),n3=iB({visible:function(){return this.mode===i_.TwoCurves}}),n4=iB({visible:function(){return this.mode===i_.TwoConstants}}),n5=iB({visible:function(){return this.mode===i_.TwoConstants}}),nQ((n9=n((n6=function(){function e(){r(this,e),p(this,"mode",n9,this),p(this,"constant",n8,this),p(this,"spline",ie,this),p(this,"splineMin",it,this),p(this,"splineMax",ii,this),p(this,"constantMin",ia,this),p(this,"constantMax",io,this),this.spline.assignSorted([0,1],[0,1]),this.splineMin.assignSorted([0,1],[0,1]),this.splineMax.assignSorted([0,1],[0,1])}return y(e,[{key:"evaluate",value:function(n,i){switch(this.mode){case i_.Curve:return this.spline.evaluate(n);case i_.TwoCurves:return eE(this.splineMin.evaluate(n),this.splineMax.evaluate(n),i);case i_.TwoConstants:return eE(this.constantMin,this.constantMax,i);default:return this.constant}}},{key:"getMax",value:function(){switch(this.mode){case i_.Curve:return 1;case i_.TwoConstants:return this.constantMax;case i_.TwoCurves:return 1;default:return this.constant}}},{key:"isZero",value:function(){switch(this.mode){case i_.Curve:return eT(1,0,eA);case i_.TwoConstants:return eT(Math.max(Math.abs(this.constantMax),Math.abs(this.constantMin)),0,eA);case i_.TwoCurves:return eT(1,0,eA);default:return eT(this.constant,0,eA)}}}]),e}()).prototype,"mode",[n$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return i_.Constant}}),n8=n(n6.prototype,"constant",[n0],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ie=n(n6.prototype,"spline",[n1],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new eR}}),it=n(n6.prototype,"splineMin",[n2],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new eR}}),ii=n(n6.prototype,"splineMax",[n3],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new eR}}),ia=n(n6.prototype,"constantMin",[n4],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),io=n(n6.prototype,"constantMax",[n5],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),n7=n6))||n7);K._RF.pop(),K._RF.push({},"3fe5eBRNTJFCZgeD7SqFSh5","GradientRange",void 0);var iL=q.ccclass,iO=q.property,iD=ew({Color:0,Gradient:1,TwoColors:2,TwoGradients:3,RandomColor:4}),iI=new Y,iN=new Y,iG=(iu=iL("GradientRange"),ic=iO({type:ew(iD)}),ih=iO({visible:function(){return this.mode===iD.Color}}),ip=iO({visible:function(){return this.mode===iD.TwoColors}}),id=iO({visible:function(){return this.mode===iD.TwoColors}}),iv=iO({visible:function(){return this.mode===iD.Gradient||this.mode===iD.RandomColor}}),iy=iO({visible:function(){return this.mode===iD.TwoGradients}}),im=iO({visible:function(){return this.mode===iD.TwoGradients}}),iu((iC=n((ib=function(){function e(){r(this,e),p(this,"mode",iC,this),p(this,"color",iS,this),p(this,"colorMin",ik,this),p(this,"colorMax",iw,this),p(this,"gradient",iE,this),p(this,"gradientMin",iT,this),p(this,"gradientMax",iA,this),this._color=Y.WHITE.clone()}return y(e,[{key:"evaluate",value:function(n,i){switch(this.mode){case iD.Color:return this.color;case iD.TwoColors:return Y.lerp(this._color,this.colorMin,this.colorMax,i),this._color;case iD.RandomColor:return this.gradient.getRandomColor(this._color);case iD.Gradient:return this.gradient.evaluateFast(this._color,n);case iD.TwoGradients:return Y.lerp(this._color,this.gradientMin.evaluateFast(iI,n),this.gradientMax.evaluateFast(iN,n),i),this._color;default:return this.color}}}]),e}()).prototype,"mode",[ic],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return iD.Color}}),iS=n(ib.prototype,"color",[ih],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Y.WHITE.clone()}}),ik=n(ib.prototype,"colorMin",[ip],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Y.WHITE.clone()}}),iw=n(ib.prototype,"colorMax",[id],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Y.WHITE.clone()}}),iE=n(ib.prototype,"gradient",[iv],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new eB}}),iT=n(ib.prototype,"gradientMin",[iy],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new eB}}),iA=n(ib.prototype,"gradientMax",[im],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new eB}}),ig=ib))||ig);function oa(n,i,a,r){!function(n,i){eL.set(n,Math.cos(i),Math.sin(i))}(n,r),n.z=0,ep.multiplyScalar(n,n,i+(a-i)*eP())}function ra(n){var i=i_;switch(n.mode){case i.TwoCurves:case i.TwoConstants:return!0;default:return!1}}K._RF.pop(),K._RF.push({},"1a4c4Z/fWpFuL5b3emrVLug","ParticleFunction",void 0),K._RF.pop(),K._RF.push({},"c2fc2/T2apMGZCPX5a4abo/","ModuleRandSeed",void 0);var iM,iF,iz,ix,iU,iH,ij,iV=23541,iW=39825,iK=90794,iq=91041,iJ=125292,iY=197866,iX=156497;K._RF.pop(),K._RF.push({},"39785+APfBJU5kvcdjZGiLr","ColorOvertimeModule",void 0);var iZ,iQ,i$,i0,i1,i2,i3,i4,i5,i7=q.ccclass,i6=q.property,i9=iq,i8=(iM=i7("ColorOvertimeModule"),iF=i6({type:ec}),iz=i6({type:iG}),iM((iH=n((iU=function(){function e(){r(this,e),p(this,"enable",iH,this),p(this,"color",ij,this)}return y(e,[{key:"update",value:function(n){if(this.enable){var i=n.randomSeed+i9,a=function(n){var i=iD;switch(n.mode){case i.TwoGradients:case i.TwoColors:return!0;default:return!1}}(this.color)?eI(i):0,r=1-n.remainingLifetime/n.startLifetime;n.sprite.color=n.startColor.clone().multiply(this.color.evaluate(r,a))}}}]),e}()).prototype,"enable",[iF],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ij=n(iU.prototype,"color",[iz],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new iG}}),ix=iU))||ix);K._RF.pop(),K._RF.push({},"c397apirpxFfJTJN1KLAcGi","LimitVelocityOvertimeModule",void 0);var ae,at,an,ai,aa,ao,ar,as=q.ccclass,al=q.property,au=iV,ac=(iZ=as("LimitVelocityOvertimeModule"),iQ=al({type:ec}),i$=al({type:iP}),i0=al({type:iP}),iZ((i3=n((i2=function(){function e(){r(this,e),p(this,"enable",i3,this),p(this,"limit",i4,this),p(this,"dampen",i5,this),this.limit.constant=500,this.dampen.constant=.2}return y(e,[{key:"update",value:function(n,i){if(this.enable){var a=1-n.remainingLifetime/n.startLifetime,r=n.velocity.clone().normalize(),p=ra(this.limit)?eI(n.randomSeed+au):0,d=ra(this.dampen)?eI(n.randomSeed+au+1):0,y=n.velocity.length(),m=this.limit.evaluate(a,p),g=this.dampen.evaluate(a,d);n.velocity=r.multiplyScalar(this.dampenBeyondLimit(y,m,g,i))}}},{key:"dampenBeyondLimit",value:function(n,i,a,r){if(n<=i)return n;var p=1-Math.exp(-a*r);return eb.lerp(n,i,p)}}]),e}()).prototype,"enable",[iQ],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),i4=n(i2.prototype,"limit",[i$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new iP}}),i5=n(i2.prototype,"dampen",[i0],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new iP}}),i1=i2))||i1);K._RF.pop(),K._RF.push({},"442c2KaGHdNip4TBoeKOOoY","RendererModule",void 0);var ah,ap,ad,av,ay,af,am,ag,ab,aC,aS,ak,aw,aE,aT=q.ccclass,aA=q.property,aR=(ae=aT("RendererModule"),at=aA(eN),an=aA(eG),ae((ao=n((aa=y(function e(){r(this,e),p(this,"material",ao,this),p(this,"spriteFrame",ar,this)})).prototype,"material",[at],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ar=n(aa.prototype,"spriteFrame",[an],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ai=aa))||ai);K._RF.pop(),K._RF.push({},"c6cfbhYVctHt53aUXC4oSWy","RotationOvertimeModule",void 0);var aB,a_,aP,aL,aO,aD,aI,aN,aG,aM,aF,az,ax,aU,aH,aj,aV,aW,aK,aq,aJ,aY,aX,aZ=q.ccclass,aQ=q.property,a$=iJ,a0=(ah=aZ("RotationOvertimeModule"),ap=aQ({type:ec}),ad=aQ(ec),av=aQ({type:iP}),ay=aQ({type:iP,visible:function(){return this.separateAxes}}),af=aQ({type:iP,visible:function(){return this.separateAxes}}),am=aQ({type:iP}),ah((aC=n((ab=function(){function e(){r(this,e),p(this,"enable",aC,this),p(this,"separateAxes",aS,this),p(this,"x",ak,this),p(this,"y",aw,this),p(this,"z",aE,this)}return y(e,[{key:"update",value:function(n,i){if(this.enable){var a=1-n.remainingLifetime/n.startLifetime,r=n.randomSeed+a$,p=ra(this.z)?eI(r):0,d=this.z.evaluate(a,p)*i,y=0,m=0;if(this.separateAxes){var g=ra(this.x)?eI(r):0,b=ra(this.y)?eI(r):0;y=this.x.evaluate(a,g)*i,m=this.y.evaluate(a,b)*i}n.node.eulerAngles=new ep(n.node.eulerAngles.x+y,n.node.eulerAngles.y+m,n.node.eulerAngles.z+d)}}}]),e}()).prototype,"enable",[ap],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),aS=n(ab.prototype,"separateAxes",[ad],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ak=n(ab.prototype,"x",[av],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new iP}}),aw=n(ab.prototype,"y",[ay],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new iP}}),aE=n(ab.prototype,"z",[af,am],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new iP}}),ag=ab))||ag);K._RF.pop(),K._RF.push({},"f63cd4ScDJFPrnTLNT4+QKu","ShapeModule",void 0);var a1,a2,a3,a4,a5,a7,a6,a9=q.ccclass,a8=q.property,oe=ew({Circle:0,Rectangle:1}),ot=ew({Base:0,Edge:1}),qo=function(){return this.shape===oe.Circle},Jo=function(){return this.shape===oe.Rectangle},on=[0,0],oi=(aB=a9("ShapeModule"),a_=a8({type:ew(oe)}),aP=a8({type:ew(ot),visible:Jo}),aL=a8({}),aO=a8({}),aD=a8({}),aI=a8({range:[0,360],visible:qo}),aN=a8({range:[-360,360],visible:qo}),aG=a8({min:0,visible:qo}),aM=a8({range:[0,1],step:.01,visible:qo}),aF=a8({visible:Jo}),aB((aU=n((ax=function(){function e(){r(this,e),p(this,"shape",aU,this),p(this,"emitFrom",aH,this),p(this,"position",aj,this),p(this,"rotation",aV,this),p(this,"scale",aW,this),p(this,"arc",aK,this),p(this,"angle",aq,this),p(this,"radius",aJ,this),p(this,"radiusThickness",aY,this),p(this,"rectangleThickness",aX,this)}return y(e,[{key:"emit",value:function(n){switch(this.shape){case oe.Circle:this.circleEmit(this.radius,this.radiusThickness,eM(this.generateArcAngle()),n);break;case oe.Rectangle:this.rectangleEmit(this.emitFrom,this.rectangleThickness,n)}}},{key:"circleEmit",value:function(n,i,a,r){var p=r.node.position;oa(p,n*(1-i),n,a+eM(this.angle)),r.velocity=p.clone().normalize()}},{key:"rectangleEmit",value:function(n,i,a){var r,p,d,y=a.node.position;switch(n){case ot.Base:p=y,d=i,eL.set(p,eO(-d.x,d.x),eO(-d.y,d.y));break;case ot.Edge:on[0]=eO(-1,1),on[1]=(0===(r=eO(-1,1))&&r++,e_.sign(r)),function(n){for(var i=0;i<n.length;i++){var a=i+eD(0,n.length-i),r=n[a];n[a]=n[i],n[i]=r}}(on),this.applyRectThickness(on,i),eL.set(y,on[0],on[1])}a.velocity=y.clone().normalize()}},{key:"generateArcAngle",value:function(){return eO(0,this.arc)}},{key:"applyRectThickness",value:function(n,i){i.x>0&&(n[0]*=i.x),i.y>0&&(n[1]*=i.y)}},{key:"gizmo",value:function(n){switch(n.strokeColor.fromHEX("#46C4FFB0"),n.fillColor.fromHEX("#46C4FF77"),n.lineWidth=8,this.shape){case oe.Circle:this.gizmoCircle(n);break;case oe.Rectangle:this.gizmoRectangle(n)}}},{key:"gizmoCircle",value:function(n){n.clear();var i=this.angle,a=this.angle+this.arc;if(this.createArcPath(n,this.radius,i,a),this.createArcPath(n,this.radius*(1-this.radiusThickness),i,a),this.arc<360&&this.radius>0){var r=this.radius*Math.cos(eM(this.angle)),p=this.radius*Math.sin(eM(this.angle)),d=this.radius*Math.cos(eM(this.arc+this.angle)),y=this.radius*Math.sin(eM(this.arc+this.angle));n.moveTo(r,p),n.lineTo(0,0),n.moveTo(d,y),n.lineTo(0,0)}n.stroke()}},{key:"gizmoRectangle",value:function(n){n.clear();var i=this.rectangleThickness.x,a=this.rectangleThickness.y;n.moveTo(i,a),n.lineTo(-i,a),n.lineTo(-i,-a),n.lineTo(i,-a),n.close(),n.stroke()}},{key:"createArcPath",value:function(n,i,a,r){if(!(i<=0))for(var p=(r-a)/48,d=0;d<=48;d++){var y=a+d*p,m=i*Math.cos(eM(y)),g=i*Math.sin(eM(y));0===d?n.moveTo(m,g):n.lineTo(m,g)}}}]),e}()).prototype,"shape",[a_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return oe.Circle}}),aH=n(ax.prototype,"emitFrom",[aP],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ot.Base}}),aj=n(ax.prototype,"position",[aL],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new ep(0,0,0)}}),aV=n(ax.prototype,"rotation",[aO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new ep(0,0,0)}}),aW=n(ax.prototype,"scale",[aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new ep(1,1,1)}}),aK=n(ax.prototype,"arc",[aI],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 360}}),aq=n(ax.prototype,"angle",[aN],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 25}}),aJ=n(ax.prototype,"radius",[aG],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),aY=n(ax.prototype,"radiusThickness",[aM],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),aX=n(ax.prototype,"rectangleThickness",[aF],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new eL(20,50)}}),az=ax))||az);K._RF.pop(),K._RF.push({},"1b7c1WztGdLzKO8gh4ulm2c","SizeOvertimeModule",void 0);var oo,or,os,ol,ou,oc,oh,op,od,ov,oy,of,om,og=q.ccclass,ob=q.property,oC=iW,oS=(a1=og("SizeOvertimeModule"),a2=ob({type:ec}),a3=ob({type:iP}),a1((a7=n((a5=function(){function e(){r(this,e),p(this,"enable",a7,this),p(this,"size",a6,this),this.size.constant=1}return y(e,[{key:"update",value:function(n){if(this.enable){var i=1-n.remainingLifetime/n.startLifetime,a=n.randomSeed+oC,r=ra(this.size)?eI(a):0,p=this.size.evaluate(i,r);n.node.scale=new ep(p*n.startSize.x,p*n.startSize.y,1)}}}]),e}()).prototype,"enable",[a2],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),a6=n(a5.prototype,"size",[a3],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new iP}}),a4=a5))||a4);K._RF.pop(),K._RF.push({},"530341yf3ZOmaqdU+AYM0/U","SpriteAnimationModule",void 0);var ok,ow,oE,oT,oA,oR,oB,o_,oP,oL=q.ccclass,oO=q.property,oD=iK,oI=(oo=oL("SpriteAnimationModule"),or=oO({type:ec}),os=oO({type:eG}),ol=oO({type:iP}),ou=oO({type:iP}),oc=oO({type:es}),oo((od=n((op=function(){function e(){r(this,e),p(this,"enable",od,this),p(this,"frames",ov,this),p(this,"frameOverTime",oy,this),p(this,"startFrame",of,this),p(this,"cycleCount",om,this),this.frameOverTime.constant=0,this.startFrame.constant=0}return y(e,[{key:"update",value:function(n){if(this.enable){var i=1-n.remainingLifetime/n.startLifetime,a=ra(this.startFrame)?eI(n.randomSeed+oD):0,r=ra(this.frameOverTime)?eI(n.randomSeed+oD):0,p=this.startFrame.evaluate(i,a),d=eS(this.cycleCount*(this.frameOverTime.evaluate(i,r)+p),this.frames.length);n.sprite.spriteFrame=this.frames[Math.floor(d)]}}}]),e}()).prototype,"enable",[or],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ov=n(op.prototype,"frames",[os],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),oy=n(op.prototype,"frameOverTime",[ol],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new iP}}),of=n(op.prototype,"startFrame",[ou],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new iP}}),om=n(op.prototype,"cycleCount",[oc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),oh=op))||oh);K._RF.pop(),K._RF.push({},"f6ad5Yz6wpE2ZzModn16CYQ","VelocityOvertimeModule",void 0);var oN,oG,oM,oF,oz,ox,oU,oH,oj,oV,oW,oK,oq,oJ,oY,oX,oZ,oQ,o$,o0,o1,o2,o3,o4,o5,o7,o6,o9,o8,re,rt,rn,ri,ro,rr,rs,rl,ru,rc,rh,rp,rd,rv,ry,rf,rm,rg,rb,rC,rS,rk,rw,rE=q.ccclass,rT=q.property,rA=(ok=rE("VelocityOvertimeModule"),ow=rT({type:ec}),oE=rT({type:iP}),oT=rT({type:iP}),ok((oB=n((oR=function(){function e(){r(this,e),p(this,"enable",oB,this),p(this,"x",o_,this),p(this,"y",oP,this),this._temp_v3=new ep,this.x.constant=0,this.y.constant=0}return y(e,[{key:"update",value:function(n,i){if(this.enable){var a=1-n.remainingLifetime/n.startLifetime,r=ra(this.x)?eI(n.randomSeed+iY):0,p=ra(this.y)?eI(n.randomSeed+iX):0,d=ep.set(this._temp_v3,this.x.evaluate(a,r),this.y.evaluate(a,p),0);ep.add(n.velocity,n.velocity,d.multiplyScalar(i))}}}]),e}()).prototype,"enable",[ow],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),o_=n(oR.prototype,"x",[oE],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new iP}}),oP=n(oR.prototype,"y",[oT],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new iP}}),oA=oR))||oA);K._RF.pop(),K._RF.push({},"10bc3IfFqBLtpSgVri/NVeX","ParticleSystem",void 0);var rR,rB,r_,rP,rL,rO,rD,rI,rN,rG,rM,rF,rz,rx,rU=q.ccclass,rH=q.property,rj=q.executeInEditMode,rV=q.disallowMultiple,rW=(oN=rU("ParticleSystem"),oG=rj(!0),oM=rV(!0),oF=rH({}),oz=rH(ec),ox=rH(eC),oU=rH(ec),oH=rH({type:iP}),oj=rH({type:iP}),oV=rH(iG),oW=rH(ec),oK=rH({type:iP,formerlySerializedAs:"startSize"}),oq=rH({type:iP,visible:function(){return this.startSize2D}}),oJ=rH({type:iP}),oY=rH(ec),oX=rH({type:iP,formerlySerializedAs:"startRotation"}),oZ=rH({type:iP}),oQ=rH({type:iP}),o$=rH({type:oi}),o0=rH({type:rA}),o1=rH({type:oS}),o2=rH({type:a0}),o3=rH({type:i8}),o4=rH({type:oI}),o5=rH({type:ac}),o7=rH(nZ),o6=rH({type:aR}),oN(o9=oG(o9=oM((n((o8=function(n){i(l,n);var m=a(l);function l(){var n;return r(this,l),(n=m.call(this))._preview=!1,p(n,"playOnAwake",re,d(n)),p(n,"duration",rt,d(n)),p(n,"loop",rn,d(n)),p(n,"startDelay",ri,d(n)),p(n,"startLifetime",ro,d(n)),p(n,"startColor",rr,d(n)),p(n,"startSize2D",rs,d(n)),p(n,"startSizeX",rl,d(n)),p(n,"startSizeY",ru,d(n)),p(n,"startSpeed",rc,d(n)),p(n,"startRotation3D",rh,d(n)),p(n,"startRotation",rp,d(n)),p(n,"gravityModifier",rd,d(n)),p(n,"rateOverTime",rv,d(n)),p(n,"shapeModule",ry,d(n)),p(n,"velocityOvertimeModule",rf,d(n)),p(n,"sizeOvertimeModule",rm,d(n)),p(n,"rotationOvertimeModule",rg,d(n)),p(n,"colorOvertimeModule",rb,d(n)),p(n,"spriteAnimationModule",rC,d(n)),p(n,"limitVelocityOvertimeModule",rS,d(n)),p(n,"bursts",rk,d(n)),p(n,"rendererModule",rw,d(n)),n.particles=[],n.time=0,n.emitRateTimeCounter=0,n.isPlaying=!1,n.isStopped=!0,n.isEmitting=!1,n.needToRestart=!1,n.startLifetime.constant=5,n.startSizeX.constant=1,n.startSpeed.constant=5,n.rateOverTime.constant=10,n}return y(l,[{key:"preview",get:function(){return this._preview},set:function(n){this._preview=n,this.graphics&&this.graphics.destroy()}},{key:"onEnable",value:function(){}},{key:"onLoad",value:function(){this.preview=null!==this.getComponent(ey),this.node.removeAllChildren()}},{key:"start",value:function(){this.node.position=new ep(this.node.position.x,this.node.position.y,100),(this.playOnAwake&&!R||this.preview&&R)&&this.play()}},{key:"update",value:function(n){this.isPlaying&&(this.time+=n,this.emitting(n))}},{key:"play",value:function(){this.needToRestart&&(this.needToRestart=!1),this.isStopped&&(this.isStopped=!1),this.time=0,this.isPlaying=!0,this.isEmitting=!0}},{key:"stop",value:function(){this.isPlaying||(this.isPlaying=!1),this.isEmitting||(this.isEmitting=!1),this.isStopped=!0}},{key:"emitting",value:function(n){var i=this,a=this.startDelay.evaluate(0,1);if(this.time>a&&this.time>this.duration+a&&(this.loop||(this.isEmitting=!1)),this.isEmitting){if(this.emitRateTimeCounter+=this.rateOverTime.evaluate(this.time/this.duration,1)*n,this.emitRateTimeCounter>1){var r=Math.floor(this.emitRateTimeCounter);this.emitRateTimeCounter-=r,this.emit(r,n)}var p,d=T(this.bursts);try{for(d.s();!(p=d.n()).done;)p.value.update(this,n)}catch(n){d.e(n)}finally{d.f()}}var y=this.gravityModifier.evaluate(this.time/this.duration,1);this.particles.forEach(function(a,r){a.node.active&&(i.spriteAnimationModule.update(a),i.sizeOvertimeModule.update(a),i.rotationOvertimeModule.update(a,n),i.colorOvertimeModule.update(a),i.velocityOvertimeModule.update(a,n),i.applyGravityModifier(a,y),i.limitVelocityOvertimeModule.update(a,n),a.node.position.add(a.velocity.clone().multiplyScalar(n)),a.remainingLifetime-=n,a.remainingLifetime<=0&&(a.node.active=!1))})}},{key:"emit",value:function(n,i){if(null!==this.rendererModule.spriteFrame)for(var a=this.time%this.duration/this.duration,r=0;r<n;r++){var p=this.getFreeParticle();p.init(this),p.reset(),this.shapeModule.emit(p);var d=this.startSpeed.evaluate(a,this.rand());p.velocity=p.velocity.clone().multiplyScalar(d);var y=this.startSizeX.evaluate(a,this.rand()),m=this.startSize2D?new ep(y,this.startSizeY.evaluate(a,this.rand()),1):new ep(y,y,1);p.startSize=m.clone(),p.node.scale=m.clone();var g=this.startRotation.evaluate(a,this.rand());p.node.eulerAngles=new ep(0,0,g),p.startColor=this.startColor.evaluate(a,this.rand()).clone(),p.sprite.color=p.startColor.clone(),p.startLifetime=this.startLifetime.evaluate(a,this.rand())+i,p.remainingLifetime=p.startLifetime,p.randomSeed=eD(0,233280)}}},{key:"applyGravityModifier",value:function(n,i){n.velocity.add(new ep(0,-9.8*i,0))}},{key:"rand",value:function(){return eI(eD(0,e_.INT_MAX))}},{key:"getFreeParticle",value:function(){var n=this.particles.find(function(n){return!n.node.active});return n||(n=this.createParticle()),n.node.active=!0,n}},{key:"createParticle",value:function(){var n=new J,i=Q(n),a=i.addComponent(il),r=i.addComponent(el);return this.particles.push(a),r.spriteFrame=this.rendererModule.spriteFrame,r.customMaterial=this.rendererModule.material,this.node.addChild(i),a}}]),l}(ea)).prototype,"preview",[oF],Object.getOwnPropertyDescriptor(o8.prototype,"preview"),o8.prototype),re=n(o8.prototype,"playOnAwake",[oz],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),rt=n(o8.prototype,"duration",[ox],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),rn=n(o8.prototype,"loop",[oU],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ri=n(o8.prototype,"startDelay",[oH],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new iP}}),ro=n(o8.prototype,"startLifetime",[oj],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new iP}}),rr=n(o8.prototype,"startColor",[oV],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new iG}}),rs=n(o8.prototype,"startSize2D",[oW],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),rl=n(o8.prototype,"startSizeX",[oK],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new iP}}),ru=n(o8.prototype,"startSizeY",[oq],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new iP}}),rc=n(o8.prototype,"startSpeed",[oJ],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new iP}}),rh=n(o8.prototype,"startRotation3D",[oY],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),rp=n(o8.prototype,"startRotation",[oX],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new iP}}),rd=n(o8.prototype,"gravityModifier",[oZ],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new iP}}),rv=n(o8.prototype,"rateOverTime",[oQ],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new iP}}),ry=n(o8.prototype,"shapeModule",[o$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new oi}}),rf=n(o8.prototype,"velocityOvertimeModule",[o0],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new rA}}),rm=n(o8.prototype,"sizeOvertimeModule",[o1],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new oS}}),rg=n(o8.prototype,"rotationOvertimeModule",[o2],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new a0}}),rb=n(o8.prototype,"colorOvertimeModule",[o3],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new i8}}),rC=n(o8.prototype,"spriteAnimationModule",[o4],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new oI}}),rS=n(o8.prototype,"limitVelocityOvertimeModule",[o5],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new ac}}),rk=n(o8.prototype,"bursts",[rH,o7],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),rw=n(o8.prototype,"rendererModule",[o6],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new aR}}),o9=o8))||o9)||o9)||o9);K._RF.pop(),K._RF.push({},"aa4b0d0u0hLeqd3+/PQZ/QD","SwitchButton",void 0);var rK,rq,rJ,rY,rX,rZ,rQ,r$,r0,r1,r2=q.ccclass,r3=q.property,r4=q.requireComponent,r5=globalThis.game.analytics,r7=(rR=r2("SwitchButton"),rB=r4([en]),r_=r3(ec),rP=r3(J),rL=r3(J),rO=r3(ec),rD=r3({visible:function(){return this.useSound},type:C}),rR(rI=rB((rG=n((rN=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=g.call.apply(g,[this].concat(a)),p(n,"enable",rG,d(n)),p(n,"nodeOn",rM,d(n)),p(n,"nodeOff",rF,d(n)),p(n,"useSound",rz,d(n)),p(n,"soundKey",rx,d(n)),n}return y(u,[{key:"__preload",value:function(){this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"switch",value:function(){return!!this.node.active&&(r5.event(GameCore.Plugins.Analytics.Events.BUTTON_CLICK,{button_name:this.node.name,enable:!this.enable}),this.useSound&&k.playSound(w[this.soundKey]),this.updateStatus(!this.enable))}},{key:"setEnabled",value:function(n){this.node.active&&this.updateStatus(n)}},{key:"updateStatus",value:function(n){return this.enable=n,this.nodeOn.active=n,this.nodeOff.active=!n,n}}]),u}(ea)).prototype,"enable",[r_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),rM=n(rN.prototype,"nodeOn",[rP],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rF=n(rN.prototype,"nodeOff",[rL],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rz=n(rN.prototype,"useSound",[rO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),rx=n(rN.prototype,"soundKey",[rD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return C[A.BUTTON_CLICK]}}),rI=rN))||rI)||rI);K._RF.pop(),K._RF.push({},"bce15LcVrxOfYMa9rbXN/qi","Localize",void 0);var r6,r9,r8,se,st,sn,si,sa,so,sr,ss,sl,su,sc,sh,sp,sd,sv,sy,sf,sm,sg,sb,sC,sS,sk,sw=q.ccclass,sE=q.property,sT=q.requireComponent,sA=q.executeInEditMode,sR=q.disallowMultiple,sB=globalThis.game.language;rK=sw("Localize"),rq=sT($),rJ=sA(!0),rY=sE({visible:!0}),rX=sE({group:{name:"Fonts",id:"fonts",displayOrder:1},type:eF}),rZ=sE({group:{name:"Fonts",id:"fonts",displayOrder:2},type:eF}),rK(rQ=sR(rQ=rq(rQ=rJ((n((r$=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=g.call.apply(g,[this].concat(a)),p(n,"enFont",r0,d(n)),p(n,"ruFont",r1,d(n)),n.handleLanguageChanged=function(){n.updateTransToNode()},n}return y(u,[{key:"key",get:function(){return this._key},set:function(n){n&&(this._key=n,this.updateTransToNode())}},{key:"__preload",value:function(){this.label=this.getComponent($),this.validateRequiredComponents(),this.updateTransToNode()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"start",value:function(){this.listenEvent()}},{key:"listenEvent",value:function(){eu.on("update-language",this.handleLanguageChanged)}},{key:"updateTransToNode",value:function(){if(this.node.active&&this._key)try{var n=sB.getText(this._key),i=this.getFontByLang();this.label.font=i,this.label.string=n,this.node.emit("update-trans",n)}catch(n){console.warn(n)}}},{key:"getFontByLang",value:function(){if(!this.enFont||!this.ruFont)throw new Error("Font is not found");switch(sB.getCurrentLocale()){case"en":return this.enFont;case"ru":return this.ruFont;default:return this.enFont}}}]),u}(ea)).prototype,"key",[rY],Object.getOwnPropertyDescriptor(r$.prototype,"key"),r$.prototype),r0=n(r$.prototype,"enFont",[rX],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),r1=n(r$.prototype,"ruFont",[rZ],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),rQ=r$))||rQ)||rQ)||rQ);K._RF.pop(),K._RF.push({},"a2260jBMJFPCrn/Q4Vo4iB1","BatchNodes",void 0);var s_,sP=q.ccclass,sL=q.executionOrder,sO=q.property,sD=GameCore.Utils.Function,sI="Batch By Name",sN="Batch Label",sG="Batch Sprite";r6=sP("BatchNodes"),r9=sL(99999),r8=sO({group:{name:sI}}),se=sO({type:[es],group:{name:sI}}),st=sO({type:[er],group:{name:sI}}),sn=sO({group:{name:sN}}),si=sO({group:{name:sN}}),sa=sO({group:{name:sN}}),so=sO({group:{name:sG}}),sr=sO({group:{name:sG}}),ss=sO({readonly:!0}),sl=sO({readonly:!0}),su=sO({readonly:!0}),r6(sc=r9((sp=n((sh=function(n){i(l,n);var m=a(l);function l(){var n;r(this,l);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=m.call.apply(m,[this].concat(a)),p(n,"batchByName",sp,d(n)),p(n,"depthNames",sd,d(n)),p(n,"listName",sv,d(n)),p(n,"batchLabel",sy,d(n)),p(n,"depthLabel",sf,d(n)),p(n,"typeLabel",sm,d(n)),p(n,"batchSprite",sg,d(n)),p(n,"depthSprite",sb,d(n)),p(n,"batchAllNodes",sC,d(n)),p(n,"batchDepth",sS,d(n)),p(n,"checkOverlap",sk,d(n)),n.batchNode={},n.labelChildren=[],n.spriteChildren=[],n.allChildren=[],n.nameChildren=[],n.originalParents={},n.isInited=!1,n.handleNodeChange=sD.throttle(function(){n.isInited&&(console.warn("handleNodeChange",n.node.name),n.setupBatchNodes(n.node))},1e3),n.onAfterUpdate=function(){n.isInited&&n.hierarchyChildren()},n.onAfterRender=function(){n.isInited&&n.restoreOriginalChildren()},n}return y(l,[{key:"__preload",value:function(){this.enabled&&(ei.on(ez.EVENT_AFTER_UPDATE,this.onAfterUpdate),ei.on(ez.EVENT_AFTER_RENDER,this.onAfterRender))}},{key:"onDestroy",value:function(){ei.off(ez.EVENT_AFTER_UPDATE,this.onAfterUpdate),ei.off(ez.EVENT_AFTER_RENDER,this.onAfterRender)}},{key:"onLoad",value:function(){this.enabled&&(this.setupBatchNodes(this.node),this.isInited=!0)}},{key:"onEnable",value:function(){this.isInited||(ei.on(ez.EVENT_AFTER_UPDATE,this.onAfterUpdate),ei.on(ez.EVENT_AFTER_RENDER,this.onAfterRender),this.setupBatchNodes(this.node),this.isInited=!0)}},{key:"handleActiveChange",value:function(n){n.once(J.EventType.ACTIVE_IN_HIERARCHY_CHANGED,this.handleNodeChange)}},{key:"onDisable",value:function(){this.restoreOriginalChildren(),ei.off(ez.EVENT_AFTER_UPDATE,this.onAfterUpdate),ei.off(ez.EVENT_AFTER_RENDER,this.onAfterRender),this.isInited=!1}},{key:"setupBatchNodes",value:function(n){this.allChildren=[],this.nameChildren=[],this.labelChildren=[],this.spriteChildren=[],this.saveOriginalChildren(n),this.createGlobalNodes(n),this.createGlobalNameNodes(n),this.createGlobalLabelNode(n),this.createGlobalSpriteNode(n),this.sortGlobalNodes()}},{key:"sortGlobalNodes",value:function(){var n,i,a,r=this;null===(n=this.batchNode.node)||void 0===n||n.setSiblingIndex(0),null===(i=this.batchNode.label)||void 0===i||i.setSiblingIndex(this.depthLabel),null===(a=this.batchNode.sprite)||void 0===a||a.setSiblingIndex(this.depthSprite),this.listName.forEach(function(n,i){var a;console.log("name",n,r.depthNames[i]),null===(a=r.batchNode[n])||void 0===a||a.setSiblingIndex(r.depthNames[i])})}},{key:"createGlobalNodes",value:function(n){if(this.batchAllNodes){var i=new J("GlobalBatchNode");i.active=!0,this.batchNode.node=i,n.addChild(i)}}},{key:"createGlobalNameNodes",value:function(n){if(this.batchByName){var i,a=T(this.listName);try{for(a.s();!(i=a.n()).done;){var r=i.value;if(!this.batchNode[r]){var p=new J(r);p.active=!0,this.batchNode[r]=p,n.addChild(p)}}}catch(n){a.e(n)}finally{a.f()}}}},{key:"createGlobalLabelNode",value:function(n){if(this.batchLabel){var i=new J("GlobalLabelNode");i.active=!0,this.batchNode.label=i,n.addChild(i)}}},{key:"createGlobalSpriteNode",value:function(n){if(this.batchSprite){var i=new J("GlobalSpriteNode");i.active=!0,this.batchNode.sprite=i,n.addChild(i)}}},{key:"saveOriginalParents",value:function(){var n,i=[].concat(B(this.labelChildren),B(this.spriteChildren)),a=this.nameChildren,r=T(i);try{for(r.s();!(n=r.n()).done;){var p=n.value;p.node.parent&&(this.handleActiveChange(p.node),this.originalParents[p.uuid]=p.node.parent)}}catch(n){r.e(n)}finally{r.f()}var d,y=T(a);try{for(y.s();!(d=y.n()).done;){var m=d.value;m.parent&&(this.handleActiveChange(m),this.originalParents[m.uuid]=m.parent)}}catch(n){y.e(n)}finally{y.f()}}},{key:"saveOriginalChildren",value:function(n){var i,a=n.children,r=T(a);try{for(r.s();!(i=r.n()).done;){var p=i.value;this.saveLabelChildren(p),this.saveSpriteChildren(p),this.saveNodeChildrenByName(p),this.saveNodeChildrenByType(p)}}catch(n){r.e(n)}finally{r.f()}this.saveOriginalParents()}},{key:"saveLabelChildren",value:function(n){var i;if(this.batchLabel){var a=n.getComponentsInChildren($);"char"===this.typeLabel&&(a=a.filter(function(n){return n.cacheMode===$.CacheMode.CHAR})),0!==a.length&&(i=this.labelChildren).push.apply(i,B(a))}}},{key:"saveSpriteChildren",value:function(n){var i;if(this.batchSprite){var a=n.getComponentsInChildren(el);0!==a.length&&(i=this.spriteChildren).push.apply(i,B(a))}}},{key:"saveNodeChildrenByName",value:function(n){if(this.batchByName){var i,a=T(n.children);try{for(a.s();!(i=a.n()).done;){var r=i.value;this.listName.includes(r.name)?this.nameChildren.push(r):this.saveNodeChildrenByName(r)}}catch(n){a.e(n)}finally{a.f()}}}},{key:"saveNodeChildrenByType",value:function(n,i){var a,r=arguments.length>1&&void 0!==i?i:0;if(this.batchAllNodes){var p=n.getComponentsInChildren(ea);if((a=this.allChildren).push.apply(a,B(p)),!(this.batchDepth<1||r>=this.batchDepth)){var d,y=T(this.allChildren);try{for(y.s();!(d=y.n()).done;){var m=d.value;this.saveNodeChildrenByType(m.node,this.batchDepth)}}catch(n){y.e(n)}finally{y.f()}}}}},{key:"hierarchyChildren",value:function(){var n,t=function(n,i){n.node.isValid&&n.node.activeInHierarchy&&!n.node.isChildOf(i)&&(n.node.setParent(i,!0),n.node.layer=ek.Enum.UI_2D)},i=["GlobalLabelNode","GlobalSpriteNode","GlobalBatchNode"],a=T(this.labelChildren);try{for(a.s();!(n=a.n()).done;)t(n.value,this.batchNode.label)}catch(n){a.e(n)}finally{a.f()}var r,p=T(this.spriteChildren);try{for(p.s();!(r=p.n()).done;)t(r.value,this.batchNode.sprite)}catch(n){p.e(n)}finally{p.f()}var d,y=T(this.allChildren);try{for(y.s();!(d=y.n()).done;)t(d.value,this.batchNode.node)}catch(n){y.e(n)}finally{y.f()}this.allChildren.sort(function(n,i){return n.constructor.name.localeCompare(i.constructor.name)}),this.labelChildren.sort(function(n,i){return n.cacheMode-i.cacheMode});var m,g=T(this.nameChildren);try{for(g.s();!(m=g.n()).done;){var b=m.value;if(b.isValid&&b.activeInHierarchy&&b.isTransformDirty()){var C=b.getComponent(ev);C&&C.opacity<1||i.includes(b.name)||b.isChildOf(this.batchNode[b.name])||(b.setParent(this.batchNode[b.name],!0),b.layer=ek.Enum.UI_2D)}}}catch(n){g.e(n)}finally{g.f()}}},{key:"restoreOriginalChildren",value:function(){var n=[].concat(B(this.labelChildren),B(this.spriteChildren));if(n.length>0){var i,a=T(n);try{for(a.s();!(i=a.n()).done;){var r=i.value,p=this.originalParents[r.uuid];p&&(r.node.isChildOf(p)||r.node.setParent(p,!0))}}catch(n){a.e(n)}finally{a.f()}}var d,y=T(this.nameChildren);try{for(y.s();!(d=y.n()).done;){var m=d.value,g=this.originalParents[m.uuid];g&&(m.isChildOf(g)||m.setParent(g,!0))}}catch(n){y.e(n)}finally{y.f()}}}]),l}(ea)).prototype,"batchByName",[r8],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),sd=n(sh.prototype,"depthNames",[se],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),sv=n(sh.prototype,"listName",[st],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),sy=n(sh.prototype,"batchLabel",[sn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),sf=n(sh.prototype,"depthLabel",[si],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),sm=n(sh.prototype,"typeLabel",[sa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"char"}}),sg=n(sh.prototype,"batchSprite",[so],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),sb=n(sh.prototype,"depthSprite",[sr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),sC=n(sh.prototype,"batchAllNodes",[ss],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),sS=n(sh.prototype,"batchDepth",[sl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),sk=n(sh.prototype,"checkOverlap",[su],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),sc=sh))||sc);K._RF.pop(),K._RF.push({},"9b958Lf6PFClb/JuJfTLzxG","Vibrate",void 0);var sM=q.ccclass,sF=GameCore.Utils,sz=globalThis.game.player,sx=sM("Vibrate")(s_=function(n){i(o,n);var p=a(o);function o(){return r(this,o),p.apply(this,arguments)}return y(o,[{key:"vibrate",value:function(n){if(this.isVibrateEnable()&&!sF.Browser.vibrate(n)){if("performHapticFeedbackAsync"in GameSDK.extra)return void GameSDK.extra.performHapticFeedbackAsync();console.warn("Vibrate failed")}}},{key:"isVibrateEnable",value:function(){return!!sz.getPlayerSetting("vibrate")}}]),o}(ea))||s_;K._RF.pop(),K._RF.push({},"ad867amogBFGJo9jp78EnQP","DevTools",void 0);var sU=function(n){return n.UNLOCK_DEV_TOOLS="unlock-dev-tools",n.TRIGGER_UNLOCK_KEY="trigger-unlock-key",n.TRIGGER_RESET_SEQUENCE="trigger-reset-sequence",n}(sU||{}),sH={Events:sU,UNLOCK_SEQUENCE:"101013012031"};K._RF.pop(),K._RF.push({},"437c2Vl2gxMEIGhbeMNXO0c","EndlessProgressions",void 0);var sj={0:{beeSpeed:60,spawnRandOffset:100,targetOffsetMultiplier:0,count:[8,15]},10:{beeSpeed:60,spawnRandOffset:100,targetOffsetMultiplier:.5,count:[10,20]},20:{beeSpeed:70,spawnRandOffset:110,targetOffsetMultiplier:.6,count:[10,20]},50:{beeSpeed:70,spawnRandOffset:120,targetOffsetMultiplier:.7,count:[10,20]}};K._RF.pop(),K._RF.push({},"27033qxh65F25R336CXMYGV","BeeRole",void 0);var sV=function(n){return n[n.NORMAL=0]="NORMAL",n[n.PATH_SEEKER=1]="PATH_SEEKER",n[n.PUSHER=2]="PUSHER",n}(sV||{});K._RF.pop(),K._RF.push({},"ab23abxgeZD0KDVdLYEeAQS","BeeState",void 0);var sW=function(n){return n[n.IDLE=0]="IDLE",n[n.FLYING=1]="FLYING",n[n.WAITING_TO_SEEK_PATH=2]="WAITING_TO_SEEK_PATH",n[n.SEEKING_PATH=3]="SEEKING_PATH",n[n.ATTACKING=4]="ATTACKING",n[n.DIE=5]="DIE",n}(sW||{});K._RF.pop(),K._RF.push({},"9ef7e8FlFJOS5DAWzwBrkww","GameObject",void 0);for(var sK=function(n){return n.AIR_FAN="air-fan",n.BALLOON="balloon",n.DOGE="doge",n.SPIDER="spider",n.BEE="bee",n.BIG_BEE="big-bee",n.BIG_BEE_BULLET="big-bee-bullet",n.BEEHIVE="beehive",n.BRICK="brick",n.GRASS="grass",n.GRASS_DARK="grass-dark",n.COLLIDER="collider",n.THORN="thorn",n.THORN_BALL="thorn-ball",n.MAP_LINE="line",n.WOOD="wood",n.WOOD_STROKE="wood-stroke",n.POISON="poison",n.POISON_BUBBLE="poison-bubble",n.POISON_SURFACE="poison-surface",n.WATER="water",n.WATER_SURFACE="water-surface",n.DANGER_AREA="danger-area",n.DUST_PARTICLE="dust-particle",n.ROPE="rope",n.JOINT="joint",n.DRAW_LINE="draw-line",n.CROSSING_BEE_LINE="crossing-bee-line",n}({}),sq=sK.COLLIDER,sJ=sK.DANGER_AREA,sY=sK.DOGE,sX=[sq,sJ,sK.GRASS,sK.GRASS_DARK,sK.BRICK,sK.MAP_LINE,sK.POISON,sK.POISON_SURFACE,sK.POISON_BUBBLE,sK.AIR_FAN,sK.WOOD,sK.WOOD_STROKE,sK.THORN_BALL,sK.THORN,sK.CROSSING_BEE_LINE,sK.BEE,sY,sK.BEEHIVE,sK.ROPE,sK.BALLOON,sK.WATER,sK.WATER_SURFACE,sK.JOINT,sK.DUST_PARTICLE,sK.DRAW_LINE],sZ={},sQ=0;sQ<sX.length;sQ++)sZ[sX[sQ]]=sQ;var s$=sZ;K._RF.pop(),K._RF.push({},"4c577T9x2FPKpyFoVPXbav0","ObjectIds",void 0);var s0=function(n){return n[n.BRICK=1]="BRICK",n[n.STROKE=3]="STROKE",n[n.GRASS_DARK=4]="GRASS_DARK",n[n.GRASS=5]="GRASS",n[n.COLLIDER=6]="COLLIDER",n[n.THORN=7]="THORN",n[n.WATER=8]="WATER",n[n.WATER_SURFACE=9]="WATER_SURFACE",n[n.LINE=10]="LINE",n[n.POISON_SURFACE=11]="POISON_SURFACE",n[n.POISON=12]="POISON",n[n.WOOD=13]="WOOD",n[n.THORN_BALL=14]="THORN_BALL",n[n.CONNECT=15]="CONNECT",n[n.DANGER_AREA=16]="DANGER_AREA",n[n.BALLOON=17]="BALLOON",n[n.AIR_FAN=18]="AIR_FAN",n[n.SPIDER=19]="SPIDER",n[n.DOGE_A=101]="DOGE_A",n[n.DOGE_B=106]="DOGE_B",n[n.BIG_BEE=107]="BIG_BEE",n[n.BEEHIVE_A=102]="BEEHIVE_A",n[n.BEEHIVE_B=103]="BEEHIVE_B",n[n.BEEHIVE_C=104]="BEEHIVE_C",n[n.BEEHIVE_D=105]="BEEHIVE_D",n}(s0||{});K._RF.pop(),K._RF.push({},"7bb7ftpsjJCX5G6+WtNYJ2x","PhysicsGroup",void 0);var s1=function(n){return n[n.DEFAULT=1]="DEFAULT",n[n.BEE=2]="BEE",n[n.MAIN_OBJECT=4]="MAIN_OBJECT",n[n.WORLD_BOUND=8]="WORLD_BOUND",n[n.ROPE=16]="ROPE",n}(s1||{});K._RF.pop(),K._RF.push({},"a6e4bjV/RVH17qBEx1mZaFg","ResourcePaths",void 0);var s2,s3=function(n){return n.WATER_SURFACE_FRAME="sprites/water-surface/spriteFrame",n.IC_HAND_FRAME="sprites/ic-hand/spriteFrame",n.POISON_CIRCLE_FRAME="sprites/poison-circle/spriteFrame",n.POISON_BUBBLE_PREFAB="prefabs/PoisonBubble",n.DUST_PARTICLE_SPINE="spines/dust-particle/siwang_texiao",n.MAP_JSON_PREFIX="maps-json/",n}(s3||{});K._RF.pop(),K._RF.push({},"476e6UyMHFJyI2GmFP4KpHY","BaseObject",void 0);var s4,s5,s7,s6,s9,s8,le,lt=(0,q.ccclass)("BaseObject")(s2=function(n){i(o,n);var p=a(o);function o(){var n;r(this,o);for(var i=arguments.length,a=new Array(i),d=0;d<i;d++)a[d]=arguments[d];return(n=p.call.apply(p,[this].concat(a))).points=[],n.body=null,n.bodyType=ex.Static,n}return y(o,[{key:"onLoad",value:function(){this.node.layer=ek.Enum.UI_2D}},{key:"sleep",value:function(){if(!this.body){if(this.body=this.getComponent(eU),!this.body)return;this.bodyType=this.body.type}this.enabled=!1,this.body.sleep(),this.body.type=ex.Static}},{key:"wake",value:function(){if(this.enabled=!0,this.body)this.body.wakeUp(),this.body.type=this.bodyType;else{if(this.body=this.getComponent(eU),!this.body)return;this.bodyType=this.body.type}}},{key:"hide",value:function(){var n;this.enabled=!1,null===(n=this.body)||void 0===n||n.sleep();var i=this.getComponent(eH.Skeleton);i&&(i.enabled=!1);var a=this.getComponent(el);a&&(a.enabled=!1)}},{key:"preHide",value:function(){var n;this.enabled=!1,null===(n=this.body)||void 0===n||n.sleep(),this.scheduleOnce(this.hide,.2)}},{key:"appear",value:function(){this.enabled=!0;var n=this.getComponent(eH.Skeleton);n&&(n.enabled=!0)}},{key:"setSpineAnimation",value:function(n,i){var a=this.getComponent(eH.Skeleton);null==a||a.setAnimation(0,n,i)}},{key:"setEnable",value:function(n){this.enabled=n}},{key:"angle",value:function(n,i){var a=Math.atan2(i,n);return a<0&&(a+=2*Math.PI),a}},{key:"getVectorDataFromAToB",value:function(n,i){var a=i.x-n.x,r=i.y-n.y;return{vector:new eL(a,r).normalize(),dx:a,dy:r}}},{key:"kill",value:function(){this.node.active=!1}},{key:"revive",value:function(){this.node.active=!0}}]),o}(ea))||s2;K._RF.pop(),K._RF.push({},"15b7bvQaXpFgItiEHCr7GsP","AirFan",void 0);var ln=q.ccclass,li=q.property,la=(s4=ln("AirFan"),s5=li(es),s7=li(ej),s4((s8=n((s9=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=g.call.apply(g,[this].concat(a)),p(n,"pushForce",s8,d(n)),n.force=new eL(0,0),n.affectedObjects=[],p(n,"collider",le,d(n)),n.colliders=[],n.onBeginContact=function(i,a){n.affectedObjects.includes(a.node.name)&&-1===n.colliders.findIndex(function(n){return n.node===a.node})&&n.colliders.push(a)},n.onEndContact=function(i,a){var r=n.colliders.indexOf(a);-1!==r&&n.colliders.splice(r,1)},n}return y(u,[{key:"__preload",value:function(){this.collider=this.getComponent(ej),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"start",value:function(){this.colliders=[],this.affectedObjects=[sK.DOGE,sK.THORN_BALL,sK.DRAW_LINE,sK.WOOD,sK.BALLOON],this.collider.on(eV.BEGIN_CONTACT,this.onBeginContact),this.collider.on(eV.END_CONTACT,this.onEndContact)}},{key:"update",value:function(n){var i,a=T(this.colliders);try{for(a.s();!(i=a.n()).done;){var r=i.value,p=r.getComponent(eU);if(p){var d=this.force;r.node.name===sK.DRAW_LINE&&(d=this.force.clone().multiplyScalar(r.density/3)),r.node.name===sK.DOGE&&(d=this.force.clone().multiplyScalar(250/this.pushForce)),p.applyForceToCenter(d,!0)}}}catch(n){a.e(n)}finally{a.f()}}},{key:"setForceDirection",value:function(n){var i=new eL(0,1).rotate(eb.toRadian(n));this.force=i.clone().normalize().multiplyScalar(this.pushForce)}},{key:"sleep",value:function(){_(P(u.prototype),"sleep",this).call(this),this.enabled=!1}},{key:"wake",value:function(){_(P(u.prototype),"wake",this).call(this),this.enabled=!0}}]),u}(lt)).prototype,"pushForce",[s5],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 400}}),le=n(s9.prototype,"collider",[s7],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),s6=s9))||s6);K._RF.pop(),K._RF.push({},"8a02eYTwSpP9IpQ4MrTsAiL","SpineAnimationName",void 0);var lo,lr,ls,ll,lu,lc,lh,lp={IDLE:"normal",SMILE:"smile",HURT:"hurt",INACTIVE:"cry",DROWNING:"troll",FREAK_OUT:"freak out",THORN_INACTIVE:"die"},ld={FLAP_WINGS:"animation",SMOKE_DISAPPEAR:"animation3"},lv={APPEAR:"animation",EXPLODE:"animation2"};K._RF.pop(),K._RF.push({},"ff37brNpltMuaZm+M+x9+1N","Rope",void 0);var ly,lf,lm,lg,lb,lC,lS,lk,lw,lE=q.ccclass,lT=q.property,lA=(lo=lE("Rope"),lr=lT(eG),ls=lT(es),lo((lc=n((lu=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=g.call.apply(g,[this].concat(a)),p(n,"frame",lc,d(n)),p(n,"length",lh,d(n)),n.nodes=[],n}return y(u,[{key:"onLoad",value:function(){this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"start",value:function(){this.nodes=[],this.node.setPosition(this.headJoint.getPosition()),console.log(this.headJoint.getPosition(),this.tailJoint.getPosition(),this.node.getPosition());for(var n=this.headJoint.getPosition().clone().add(new ep(0,4)).multiplyScalar(-1),i=this.tailJoint.getPosition().clone().add(new ep(0,115)).add(n).multiplyScalar(1/this.length),a=i.length(),r=i.clone().multiplyScalar(-1*this.length),p=new eL(r.x,r.y),d=0;d<this.length;d++){var y=this.createNode(a);if(!y)return void console.warn("Rope: node-".concat(d," not found"));this.node.addChild(y),y.name="node-".concat(d),y.setPosition(i.clone().multiplyScalar(d)),this.nodes.push(y)}for(var m=0;m<this.nodes.length;m++){var g=this.nodes[m];if(0!==m){var b=this.nodes[m-1],C=g.addComponent(eW);C.enabled=!1,C.anchor=new eL(0,-4),C.connectedAnchor=new eL(0,4),C.connectedBody=b.getComponent(eU),C.collideConnected=!1,C.enableLimit=!0,C.enabled=!0;var S=g.addComponent(eK);if(S.enabled=!1,S.connectedBody=this.headJoint.getComponent(eU),S.anchor=new eL(0,-4),S.connectedAnchor=new eL(0,4),S.collideConnected=!1,S.maxForce=160,S.enabled=!0,m===this.nodes.length-1){var k=this.tailJoint.addComponent(eW);k.enabled=!1,k.anchor=new eL(0,115),k.connectedBody=g.getComponent(eU),k.connectedAnchor=new eL(0,4),k.collideConnected=!1,k.enableLimit=!0,k.enabled=!0}}else{var w=g.addComponent(eW);w.enabled=!1,w.connectedBody=this.headJoint.getComponent(eU),w.anchor=new eL(0,-4),w.connectedAnchor=new eL(0,4),w.enableLimit=!0,w.collideConnected=!1,w.enabled=!0}}var E=this.tailJoint.addComponent(eK);E.enabled=!1,E.connectedBody=this.headJoint.getComponent(eU),E.anchor=new eL(0,118),E.connectedAnchor=new eL(0,-4),E.linearOffset=p,E.maxForce=500,E.enabled=!0}},{key:"disconnect",value:function(){console.log("Disconnecting rope");var n=this.nodes[0].getComponent(eW);if(n){n.connectedBody=null,n.enabled=!1;var i=this.tailJoint.getComponent(eW);if(i){i.connectedBody=null,i.enabled=!1;var a=this.tailJoint.getComponent(eK);a&&(a.enabled=!1,a.connectedBody=null);var r,p=T(this.nodes);try{for(p.s();!(r=p.n()).done;){var d=r.value.getComponent(el);if(!d)return void console.warn("Rope: Sprite not found");d.enabled=!1}}catch(n){p.e(n)}finally{p.f()}}else console.warn("Rope: Final joint not found")}else console.warn("Rope: Starting joint not found")}},{key:"createNode",value:function(n){var i=new J("node");i.layer=this.node.layer,i.addComponent(el).spriteFrame=this.frame;var a=i.addComponent(Z);a.setAnchorPoint(.5,.5),a.setContentSize(6,1.2*n);var r=i.addComponent(eU);return r.linearDamping=5,r.angularDamping=50,r.gravityScale=.1,r.group=s1.ROPE,i.addComponent(eq).size=a.contentSize,i.name=sK.ROPE,i}}]),u}(ea)).prototype,"frame",[lr],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),lh=n(lu.prototype,"length",[ls],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ll=lu))||ll);K._RF.pop(),K._RF.push({},"a8a47NhLJ9C1ahfjfiJ2xjc","Balloon",void 0);var lR=q.ccclass,lB=q.property,l_=(ly=lR("Balloon"),lf=lB(eJ),lm=lB(ej),lg=lB(eU),ly((lS=n((lC=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=g.call.apply(g,[this].concat(a)),p(n,"ropePrefab",lS,d(n)),p(n,"collider",lk,d(n)),p(n,"rigidBody",lw,d(n)),n.rope=null,n.onBeginContact=function(i,a){n.rope&&[sK.BEE,sK.THORN,sK.THORN_BALL].includes(a.node.name)&&(n.rope.disconnect(),n.setSpineAnimation(lv.EXPLODE,!1),n.scheduleOnce(function(){n.rigidBody.enabled=!1}))},n}return y(u,[{key:"__preload",value:function(){this.collider=this.getComponent(ej),this.rigidBody=this.getComponent(eU),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"start",value:function(){this.setSpineAnimation(lv.APPEAR,!0),this.collider.on(eV.BEGIN_CONTACT,this.onBeginContact)}},{key:"connectToDoge",value:function(n){var i=Q(this.ropePrefab).getComponent(lA);if(i)return i.headJoint=this.node,i.tailJoint=n,i.node.name=sK.ROPE,this.rope=i,i;console.warn("Balloon: Rope component not found")}}]),u}(lt)).prototype,"ropePrefab",[lf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),lk=n(lC.prototype,"collider",[lm],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),lw=n(lC.prototype,"rigidBody",[lg],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),lb=lC))||lb);K._RF.pop(),K._RF.push({},"ca922n1V0RLioEyUJg8hQXH","GameEvents",void 0);var lP=function(n){return n.NEXT_LEVEL="next-level",n.UPDATE_LEVEL="update-level",n.START_OVER="start-over",n.SELECT_LEVEL="select-level",n.GAME_START="game-start",n.GAME_PAUSE="game-pause",n.GAME_RESUME="game-resume",n.GAME_REPLAY="game-replay",n.SHOW_HINT="show-hint",n.SKIP_LEVEL="skip-level",n.TIME_OUT="time-out",n.DRAWING="drawing",n.DOGE_DIE="doge-die",n.DOGE_SURVIVE="doge-survive",n.BEE_DIE="bee-die",n.BEE_ATTACK="bee-attack",n.BIG_BEE_DIE="big-bee-die",n.GAME_OBJECTS_SPAWNED="game-objects-spawned",n}(lP||{});K._RF.pop(),K._RF.push({},"744a5WT+0VHFLma6AT7mXct","NormalBehavior",void 0);var lL=function(){function e(n){r(this,e),this.touchCount=0,this.bee=n,this.timeToAttack=eb.randomRange(.7,.8),this.countTimeToAttack=0}return y(e,[{key:"onBeginContact",value:function(){var n=this;1===this.touchCount&&this.bee.scheduleOnce(function(){n.touchCount>=3&&n.activePusher(),n.touchCount=0},.75),this.touchCount++}},{key:"activePusher",value:function(){this.bee.setRole(sV.PUSHER)}},{key:"update",value:function(n){this.bee.state===sW.ATTACKING&&(this.countTimeToAttack+=n,this.countTimeToAttack>this.timeToAttack&&(this.bee.findTarget(),this.bee.attackTarget(),this.timeToAttack=eb.randomRange(.4,.6),this.countTimeToAttack=0))}}]),e}();K._RF.pop(),K._RF.push({},"ec831BZISdLgp8vKNuRirUM","PusherBehavior",void 0);var lO=function(){function e(n){r(this,e),this.bee=n}return y(e,[{key:"onBeginContact",value:function(){var n=this.bee;if(n.target){var i=eb.randomRange(20,30),a=n.getVectorDataFromAToB(n.node.getWorldPosition(),n.target.getWorldPosition());a.vector.rotate(Math.random()>.5?-Math.PI/2:Math.PI/2).multiplyScalar(i),n.move(a);var r=n.getComponent(eY);r&&(r.density*=1.1,r.density>=2.5&&(r.density=1,n.setRole(sV.NORMAL),n.setState(sW.ATTACKING)))}}}]),e}();K._RF.pop(),K._RF.push({},"19c52/F5VRPcbm2BqdbChIp","BaseBehavior",void 0);var lD,lI,lN,lG,lM,lF,lz,lx,lU,lH,lj,lV,lW=function(){function e(n){r(this,e),this.bee=n,this.normalBehavior=new lL(n),this.pusherBehavior=new lO(n),this.seekingPathBehavior=null}return y(e,[{key:"onBeginContact",value:function(n,i){switch(this.bee.role){case sV.NORMAL:this.normalBehavior.onBeginContact();break;case sV.PATH_SEEKER:if(!this.seekingPathBehavior)return void console.warn("Bee: Seeking path behavior is null");this.seekingPathBehavior.onBeginContact(n,i);break;case sV.PUSHER:this.pusherBehavior.onBeginContact()}}},{key:"update",value:function(n){this.updateSpecialRole(n)||this.normalBehavior.update(n)}},{key:"updateSpecialRole",value:function(n){switch(this.bee.role){case sV.PATH_SEEKER:return!!this.seekingPathBehavior&&this.seekingPathBehavior.update(n);default:return!1}}}]),e}();K._RF.pop(),K._RF.push({},"0b146P+xAlN5LGe2MJHlJDc","Bee",void 0);var lK=q.ccclass,lq=q.property,lJ=(lD=lK("Bee"),lI=lq(J),lN=lq(eH.Skeleton),lG=lq(ej),lM=lq(eU),lD((lx=n((lz=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=g.call.apply(g,[this].concat(a)),p(n,"flipNode",lx,d(n)),p(n,"spriteNode",lU,d(n)),n.target=null,n.isSpawnLeftSide=!1,n.role=sV.NORMAL,n.state=sW.IDLE,n.behavior=new lW(d(n)),n.speed=0,p(n,"collider",lH,d(n)),p(n,"rigidBody",lj,d(n)),p(n,"gameObjects",lV,d(n)),n.wanderingOriginHeight=null,n.isWandering=!1,n.onBeginContact=function(i,a){n.enabled&&(n.rigidBody.linearDamping=eb.randomRangeInt(6,8),a.node.name!==sK.THORN&&a.node.name!==sK.POISON&&a.node.name!==sK.BIG_BEE_BULLET?a.node.name!==sK.WATER?(a.node.name===sK.DOGE&&k.playSound(A.BEE_STING_DOGE,{volume:.3}),n.behavior.onBeginContact(i,a)):n.drown():n.smokeDisappear())},n}return y(u,[{key:"__preload",value:function(){var n;this.collider=this.getComponent(ej),this.rigidBody=this.getComponent(eU),this.gameObjects=null===(n=this.node.parent)||void 0===n?void 0:n.getComponent(pt),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"start",value:function(){this.setState(sW.IDLE),this.collider.on(eV.BEGIN_CONTACT,this.onBeginContact),this.collider.enabled=!1}},{key:"followTarget",value:function(n){this.target=n,this.collider.enabled=!0,this.attackTarget()}},{key:"followInstructions",value:function(){this.collider.enabled=!0}},{key:"findTarget",value:function(){var n=this.gameObjects.getNearestDogeToBee(this);n&&!n.isCantBeTargeted()?this.target=n.node:this.target=null}},{key:"smokeDisappear",value:function(){this.preHide(),this.setSpineAnimation(ld.SMOKE_DISAPPEAR,!1),this.setState(sW.DIE),this.node.scene.emit(lP.BEE_DIE)}},{key:"flap",value:function(){this.setSpineAnimation(ld.FLAP_WINGS,!0)}},{key:"attackTarget",value:function(){var n=this;if(!this.target){if(this.isWandering)return;this.isWandering=!0,this.scheduleOnce(function(){n.isWandering=!1},.5),this.speed=eb.randomRange(40,50);var i=this.node.getWorldPosition();null===this.wanderingOriginHeight&&(this.wanderingOriginHeight=i.y+50),i.x+=eb.randomRange(-300,300),i.y=eb.randomRange(this.wanderingOriginHeight,this.wanderingOriginHeight-50);var a=this.getVectorDataFromAToB(this.node.getWorldPosition(),i);return this.move(a),void(this.rigidBody.linearDamping=0)}this.speed=eb.randomRange(20,30);var r=this.getVectorDataFromAToB(this.node.getWorldPosition(),this.target.getWorldPosition());r.vector.rotate(eb.randomRange(-.3,.3)).multiplyScalar(this.speed),this.move(r),this.rigidBody.linearDamping=0,this.setState(sW.ATTACKING)}},{key:"sleep",value:function(){_(P(u.prototype),"sleep",this).call(this),this.target=null}},{key:"rotateToVector",value:function(n){this.node.angle=eb.toDegree(this.angle(n.x,n.y)),this.node.angle+=180;var i=this.node.angle/360-Math.floor(this.node.angle/360);i>.25&&i<.75?this.flipNode.setScale(new ep(1,-1,1)):this.flipNode.setScale(new ep(1,1,1))}},{key:"move",value:function(n){this.rigidBody.linearVelocity=n.vector,this.rotateToVector({x:n.dx,y:n.dy})}},{key:"fly",value:function(n){this.rigidBody.linearVelocity=n,this.rigidBody.linearDamping=0,this.flap(),this.setState(sW.FLYING)}},{key:"setState",value:function(n){this.state=n}},{key:"setRole",value:function(n){this.role=n}},{key:"update",value:function(n){this.behavior.update(n)}},{key:"drown",value:function(){this.collider.enabled=!1,this.speed=20;var n=this.node.getWorldPosition();n.y=n.y-1e3;var i=this.getVectorDataFromAToB(this.node.getWorldPosition(),n);this.move(i),this.rigidBody.linearDamping=0,this.spriteNode.paused=!0,this.setState(sW.DIE),this.node.scene.emit(lP.BEE_DIE)}},{key:"setSpineAnimation",value:function(n,i){this.spriteNode.setAnimation(0,n,i)}}]),u}(lt)).prototype,"flipNode",[lI],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),lU=n(lz.prototype,"spriteNode",[lN],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),lH=n(lz.prototype,"collider",[lG],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),lj=n(lz.prototype,"rigidBody",[lM],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),lV=n(lz.prototype,"gameObjects",[lq],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),lF=lz))||lF);K._RF.pop(),K._RF.push({},"23d64mdR6VPRoojd1BBKwos","World",void 0);var lY,lX,lZ,lQ,l$,l0=28,l1=1792;K._RF.pop(),K._RF.push({},"5f264eibqlEH7PqbJQqHTF7","Line",void 0);var l2=q.ccclass,l3=q.property,l4=(lY=l2("Line"),lX=l3(ey),lY((l$=n((lQ=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return(n=g.call.apply(g,[this].concat(a))).points=[],n.colliderInterval=20,n.colliders=[],n.colliderTag=0,p(n,"graphic",l$,d(n)),n}return y(u,[{key:"__preload",value:function(){this.graphic=this.getComponent(ey),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"init",value:function(){this.points=[],this.colliders=[],this.colliderTag=0}},{key:"drawTo",value:function(n,i,a,r){this.graphic.moveTo(n,i),this.graphic.lineTo(a,r),this.graphic.stroke()}},{key:"addBody",value:function(n,i){var a=this.node.addComponent(eY);a.offset=new eL(n,i),a.radius=8,a.density=5,a.tag=this.colliderTag,a.apply(),this.colliderTag+=1,this.colliders.push(a)}},{key:"deActiveColliders",value:function(){var n,i=T(this.colliders);try{for(i.s();!(n=i.n()).done;)n.value.enabled=!1}catch(n){i.e(n)}finally{i.f()}}},{key:"storePoints",value:function(n,i){var a=new eL(n,i);this.points.push(a)}},{key:"addPhysics",value:function(){for(var n=0;n<this.points.length-1;n++){var i=this.points[n],a=this.points[n+1];if(i&&a){var r=this.getInternalPoints(i,a);if(n<this.points.length-2){var p=r.pop();if(!p){console.warn("Line: lastPoint not found");continue}this.points[n+1]=p}var d,y=T(r);try{for(y.s();!(d=y.n()).done;){var m,g=d.value,b=!1,C=T(this.colliders);try{for(C.s();!(m=C.n()).done;){var S=m.value;eb.Vec2.distance(g,S.offset)<2*S.radius&&(b=!0)}}catch(n){C.e(n)}finally{C.f()}b||this.addBody(g.x,g.y)}}catch(n){y.e(n)}finally{y.f()}}}var k=this.points[this.points.length-1];k&&this.addBody(k.x,k.y)}},{key:"getInternalPoints",value:function(n,i){for(var a=i.x-n.x,r=i.y-n.y,p=new eL(a,r).normalize().multiplyScalar(this.colliderInterval),d=eb.Vec2.distance(n,i),y=Math.floor(d/this.colliderInterval),m=[n],g=0;g<y;g++){var b=m[m.length-1];if(b){var C=b.clone().add(p);m.push(C)}}return m}}]),u}(lt)).prototype,"graphic",[lX],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),lZ=lQ))||lZ);K._RF.pop(),K._RF.push({},"afc3eWzi4tHNYb9W7f6QpCX","SeekingPathBehavior",void 0);var l5,l7,l6,l9=function(){function e(n,i){r(this,e),this.isFinishSeeking=!1,this.vectorDataGroup=[],this.index=0,this.bee=n,this.isSeekToLastPoint=i,this.vectorDataGroup=[],this.isFinishSeeking=!1,this.time=.02,this.remaining=0,this.index=0}return y(e,[{key:"seek",value:function(n){var i=this.bee.node.scene.getComponentInChildren(l4);if(!i)return console.warn("Bee: Line is null"),!1;var a=i.colliders.findIndex(function(i){if(i.tag===n.tag)return!0});if(-1===a)return!1;this.vectorDataGroup=[],this.isFinishSeeking=!1,this.time=.04,this.remaining=0,this.index=0;var r=this.bee.speed;return r||(r=eb.randomRange(20,30)),this.isSeekToLastPoint?this.seekToLastPoint(a,i,r):this.seekToFirstPoint(a,i,r),!0}},{key:"seekToLastPoint",value:function(n,i,a){for(var r=n;r<i.colliders.length-1;r++){var p=i.colliders[r],d=i.colliders[r+1],y=this.bee.getVectorDataFromAToB(p.worldPosition,d.worldPosition);y.vector.multiplyScalar(a),this.vectorDataGroup.push(y)}}},{key:"seekToFirstPoint",value:function(n,i,a){for(var r=n;r>0;r--){var p=i.colliders[r],d=i.colliders[r-1],y=this.bee.getVectorDataFromAToB(p.worldPosition,d.worldPosition);y.vector.multiplyScalar(a),this.vectorDataGroup.push(y)}}},{key:"flyToNextDirection",value:function(){var n=this.vectorDataGroup[this.index];if(this.index+=1,!n)return this.isFinishSeeking=!0,this.bee.setRole(sV.NORMAL),void this.bee.setState(sW.ATTACKING);this.bee.move(n)}},{key:"fly",value:function(n){this.remaining+=n,this.remaining>this.time&&(this.flyToNextDirection(),this.time=.02,this.remaining=0)}},{key:"onBeginContact",value:function(n,i){if(this.bee.state===sW.SEEKING_PATH&&i.node.name!==sK.DRAW_LINE)return this.isFinishSeeking=!0,this.bee.setRole(sV.NORMAL),void this.bee.setState(sW.ATTACKING);this.isFinishSeeking||this.bee.state===sW.WAITING_TO_SEEK_PATH||i.node.name!==sK.DRAW_LINE||this.handlePathSeekerTouchLine(i)}},{key:"handlePathSeekerTouchLine",value:function(n){var i=this;this.seek(n)&&this.bee.state!==sW.SEEKING_PATH&&(this.bee.setState(sW.WAITING_TO_SEEK_PATH),this.bee.scheduleOnce(function(){i.bee.setState(sW.SEEKING_PATH)},.3))}},{key:"update",value:function(n){return this.bee.state===sW.SEEKING_PATH&&(this.fly(n),!0)}}]),e}();K._RF.pop(),K._RF.push({},"2181aAj+ElOoL2tBGH10euY","Beehive",void 0);var l8,ue,ut,un,ui,ua,uo,ur,us,ul,uu,uc=q.ccclass,uh=q.property,up=uc("Beehive")((l6=n((l7=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return(n=g.call.apply(g,[this].concat(a))).totalPathSeekers=0,n.isSeekToLastPoint=!0,p(n,"gameObjects",l6,d(n)),n}return y(u,[{key:"onLoad",value:function(){var n;this.gameObjects=null===(n=this.node.parent)||void 0===n?void 0:n.getComponent(pt),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"releaseBee",value:function(n){var i=this;this.updateTotalPathSeekers(),this.scheduleOnce(function(){var a=n.getComponent(lJ);if(a){i.createPathSeeker(a),"isRightSide"in i.node&&!0===i.node.isRightSide?i.spawnInRightSide(a):i.spawnInLeftSide(a),a.wake();var r=i.gameObjects.getRandomDogeToBee();r&&i.scheduleOnce(function(){return a.followTarget(r.node)},.2)}},eb.randomRange(.1,.4))}},{key:"updateTotalPathSeekers",value:function(){"totalPathSeekers"in this.node&&"number"==typeof this.node.totalPathSeekers&&(this.totalPathSeekers=this.node.totalPathSeekers)}},{key:"spawnInLeftSide",value:function(n){var i=this.node.getPosition(),a=i.x,r=i.y,p=eb.randomRangeInt(-10,0),d=eb.randomRangeInt(38,48);n.isSpawnLeftSide=!0,n.node.setScale(new ep(1,1,1)),n.node.setPosition(a+p,r+d),n.fly(new eL(-2,-1).normalize().multiplyScalar(2))}},{key:"spawnInRightSide",value:function(n){var i=this.node.getPosition(),a=i.x,r=i.y,p=eb.randomRangeInt(0,10),d=eb.randomRangeInt(38,48);n.isSpawnLeftSide=!1,n.node.setScale(new ep(1,1,1)),n.node.setPosition(a+p,r+d),n.fly(new eL(2,-1).normalize().multiplyScalar(2))}},{key:"createPathSeeker",value:function(n){0!==this.totalPathSeekers&&(n.setRole(sV.PATH_SEEKER),n.behavior.seekingPathBehavior=new l9(n,this.isSeekToLastPoint),this.isSeekToLastPoint=!this.isSeekToLastPoint,this.totalPathSeekers-=1)}}]),u}(lt)).prototype,"gameObjects",[uh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),l5=l7))||l5;K._RF.pop(),K._RF.push({},"a17a07Pu/tAGb4MdM3jxHke","BigBeeBullet",void 0);var ud,uv,uy,uf,um,ug,ub,uC,uS,uk,uw,uE,uT=q.ccclass,uA=q.property,uR=(l8=uT("BigBeeBullet"),ue=uA(el),ut=uA(eH.Skeleton),un=uA(ej),ui=uA(eU),l8((ur=n((uo=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=g.call.apply(g,[this].concat(a)),p(n,"stinger",ur,d(n)),p(n,"ci",us,d(n)),p(n,"collider",ul,d(n)),p(n,"rigidBody",uu,d(n)),n.onBeginContact=function(){n.stinger.active=!1,n.ci.active=!0;var i=n.ci.getComponent(eH.Skeleton);i?(i.enabled=!0,i.setAnimation(0,"animation",!1),k.playSound(A.BEE_BULLET_EXPLODE,{allowMultiple:!0}),i.setCompleteListener(function(){n.kill()})):console.warn("BigBeeBullet: ske not found")},n}return y(u,[{key:"onLoad",value:function(){this.collider=this.getComponent(ej),this.rigidBody=this.getComponent(eU),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"start",value:function(){this.revive()}},{key:"revive",value:function(){_(P(u.prototype),"revive",this).call(this),this.stinger.active=!0,this.ci.active=!1,this.ci.getComponent(eH.Skeleton).enabled=!1,this.collider.once(eV.BEGIN_CONTACT,this.onBeginContact)}},{key:"kill",value:function(){_(P(u.prototype),"kill",this).call(this),this.stinger.active=!1,this.ci.active=!1}},{key:"forwardToDoge",value:function(n){var i=eb.randomRange(20,30),a=this.getVectorDataFromAToB(this.node.getWorldPosition(),n.getWorldPosition());a.vector.rotate(eb.randomRange(-.3,.3)).multiplyScalar(i),this.rigidBody.linearVelocity=a.vector,this.node.angle=eb.toDegree(this.angle(a.dx,a.dy))}}]),u}(lt)).prototype,"stinger",[ue],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),us=n(uo.prototype,"ci",[ut],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ul=n(uo.prototype,"collider",[un],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),uu=n(uo.prototype,"rigidBody",[ui],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ua=uo))||ua);K._RF.pop(),K._RF.push({},"2b15b1CihdEf60Zy/wIYirK","BigBee",void 0);var uB,u_,uP,uL,uO,uD,uI,uN,uG=q.ccclass,uM=q.property,uF=(ud=uG("BigBee"),uv=uM(eJ),uy=uM(eH.Skeleton),uf=uM(eY),um=uM(eU),ud((uC=n((ub=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=g.call.apply(g,[this].concat(a)),p(n,"bulletPrefab",uC,d(n)),n.state=sW.IDLE,n.target=null,n.bulletPool=[],n.timeToAttack=0,n.countTimeToAttack=0,p(n,"skeleton",uS,d(n)),p(n,"gameObjects",uk,d(n)),p(n,"collider",uw,d(n)),p(n,"rigidBody",uE,d(n)),n.onBeginContact=function(i,a){n.enabled&&(a.node.name!==sK.THORN&&a.node.name!==sK.POISON||n.smokeDisappear())},n}return y(u,[{key:"onLoad",value:function(){var n;this.skeleton=this.getComponent(eH.Skeleton),this.gameObjects=null===(n=this.node.parent)||void 0===n?void 0:n.getComponent(pt),this.collider=this.getComponent(eY),this.rigidBody=this.getComponent(eU),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"start",value:function(){this.node.setScale(new ep(.7,.7,.7)),this.timeToAttack=eb.randomRange(1,2),this.countTimeToAttack=0,this.createBulletPool(),this.initDustParticle();var n=this.gameObjects.getRandomDogeToBee();n?(this.target=n.node,this.state=sW.FLYING,this.collider.on(eV.BEGIN_CONTACT,this.onBeginContact)):console.warn("BigBee: Target not found")}},{key:"update",value:function(n){this.state===sW.ATTACKING&&(this.countTimeToAttack+=n,this.countTimeToAttack>this.timeToAttack&&(this.attackTarget(),this.timeToAttack=eb.randomRange(1,2),this.countTimeToAttack=0))}},{key:"createBulletPool",value:function(n){var i=arguments.length>0&&void 0!==n?n:5;this.bulletPool=[];for(var a=0;a<i;a++)this.createBullet()}},{key:"initDustParticle",value:function(){var n=this;if(this.node.parent){var i=new J(sK.DUST_PARTICLE);i.layer=Math.pow(2,25),i.active=!1;var a=i.addComponent(eH.Skeleton);eX.load(s3.DUST_PARTICLE_SPINE,eH.SkeletonData,function(i,r){i?console.error("initDustParticle",i):n.node.isValid&&(a.skeletonData=r)}),this.node.parent.addChild(i),this.dustParticle=i}}},{key:"createDust",value:function(){var n=this;if(this.dustParticle){this.dustParticle.active=!0;var i=this.node.getWorldPosition(),a=i.x,r=i.y;this.dustParticle.setWorldPosition(new ep(a,r));var p=this.dustParticle.getComponent(eH.Skeleton);null==p||p.setAnimation(0,"animation",!1),this.scheduleOnce(function(){n.dustParticle&&(n.dustParticle.active=!1)},.5)}}},{key:"createBullet",value:function(){if(!this.node.parent)return console.warn("BigBee: Parent not found"),null;var n=Q(this.bulletPrefab),i=n.getComponent(uR);return n.name=sK.BIG_BEE_BULLET,i&&i.kill(),this.node.parent.addChild(n),this.bulletPool.push(n),n}},{key:"smokeDisappear",value:function(){this.hide(),this.createDust(),this.state=sW.DIE,this.node.scene.emit(lP.BIG_BEE_DIE)}},{key:"sleep",value:function(){}},{key:"wake",value:function(){}},{key:"hide",value:function(){this.enabled=!1,this.rigidBody.sleep(),this.skeleton.enabled=!1}},{key:"preHide",value:function(){}},{key:"appear",value:function(){}},{key:"setSpineAnimation",value:function(n,i){}},{key:"attackTarget",value:function(){var n=this;this.skeleton.setAnimation(0,"attack",!1),this.skeleton.setCompleteListener(function(){n.skeleton.setAnimation(0,"fly",!0)}),this.scheduleOnce(function(){if(n.target){var i=n.bulletPool.filter(function(n){return!1===n.active})[0];if(i||(i=n.createBullet())){var a=i.getComponent(uR);if(a){a.revive();var r=n.node.getPosition(),p=r.x,d=r.y;i.setPosition(p,d),a.forwardToDoge(n.target)}else console.warn("BigBee: Bullet component not found")}}else console.warn("BigBee: Target not found")},.5)}}]),u}(lt)).prototype,"bulletPrefab",[uv],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),uS=n(ub.prototype,"skeleton",[uy],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),uk=n(ub.prototype,"gameObjects",[uM],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),uw=n(ub.prototype,"collider",[uf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),uE=n(ub.prototype,"rigidBody",[um],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ug=ub))||ug);K._RF.pop(),K._RF.push({},"8e16aARuABAK56lFGhIfeH+","Brick",void 0);var uz,ux,uU,uH,uj,uV=q.ccclass,uW=q.property,uK=q.requireComponent,uq=(uB=uV("Brick"),u_=uK([eZ]),uP=uW({tooltip:"Use batch draw all bricks"}),uL=uW(el),uB(uO=u_((uI=n((uD=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=g.call.apply(g,[this].concat(a)),p(n,"useBatch",uI,d(n)),p(n,"sprite",uN,d(n)),n.brickPolygons=[],n}return y(u,[{key:"__preload",value:function(){this.mask=this.getComponent(eZ),this.graphic=this.getComponent(ey),this.polygonCollider=this.getComponent(eQ),this.validateRequiredComponents(),this.listenGameplayEvents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"listenGameplayEvents",value:function(){}},{key:"addBrickPolygon",value:function(n){this.brickPolygons.push(n)}},{key:"onLoad",value:function(){var n=this.getPolygon();n&&(this.useBatch?(this.mask.enabled=!1,this.graphic.enabled=!1,this.addBrickPolygon(n)):(this.updateTransform(n),this.drawMask(n),this.applyCollider(n)))}},{key:"getPolygon",value:function(){if(!("polygon"in this.node))return null;var n=this.node.polygon;return Array.isArray(n)?n:null}},{key:"updateTransform",value:function(n){var i=this.calculatePolygonDimensions(n),a=i.width,r=i.height;this.setPosition(0,0),this.setContentSize(a,r)}},{key:"setPosition",value:function(n,i){this.node.setPosition(n,i)}},{key:"setContentSize",value:function(n,i){var a=this.sprite.getComponent(Z);a&&a.setContentSize(n,i)}},{key:"updateContentSizeForBatchDraw",value:function(){var n=this.brickPolygons.map(function(n){return n.map(function(n){var i=n.x,a=n.y;return new eL(i,a)})}).flat(),i=this.calculatePolygonDimensions(n),a=i.width,r=i.height,p=this.calculateSpritePositionForBatchDraw(n),d=this.sprite.getComponent(Z);if(d){d.setContentSize(a,r);var y=this.sprite.getComponent(el);y&&y.node.setPosition(p.x,p.y)}}},{key:"calculateSpritePositionForBatchDraw",value:function(n){for(var i=n[0].x,a=n[0].x,r=n[0].y,p=n[0].y,d=1;d<n.length;d++){var y=n[d],m=y.x,g=y.y;m<i?i=m:m>a&&(a=m),g<r?r=g:g>p&&(p=g)}return{x:i,y:r}}},{key:"calculatePolygonDimensions",value:function(n){for(var i=n[0].x,a=n[0].x,r=n[0].y,p=n[0].y,d=1;d<n.length;d++){var y=n[d],m=y.x,g=y.y;m<i?i=m:m>a&&(a=m),g<r?r=g:g>p&&(p=g)}return{width:Math.abs(a-i),height:Math.abs(p-r)}}},{key:"drawMask",value:function(n){this.graphic.moveTo(n[0].x,n[0].y);var i,a=T(n);try{for(a.s();!(i=a.n()).done;){var r=i.value;this.graphic.lineTo(r.x,r.y)}}catch(n){a.e(n)}finally{a.f()}this.graphic.close(),this.graphic.fill()}},{key:"batchDrawAllBrick",value:function(){if(!(this.brickPolygons.length<1)){this.mask.enabled=!0,this.graphic.enabled=!0,this.updateContentSizeForBatchDraw();var n,i=T(this.brickPolygons);try{for(i.s();!(n=i.n()).done;){var a=n.value;this.drawMask(a)}}catch(n){i.e(n)}finally{i.f()}this.applyColliderForBatchDraw(),this.brickPolygons=[]}}},{key:"applyCollider",value:function(n){this.polygonCollider.points=n.map(function(n){var i=n.x,a=n.y;return new eL(i,a)}),this.polygonCollider.apply()}},{key:"applyColliderForBatchDraw",value:function(){var n,i=this.brickPolygons.map(function(n){return n.map(function(n){var i=n.x,a=n.y;return new eL(i,a)})}),a=T(i);try{for(a.s();!(n=a.n()).done;){var r=n.value,p=new J;p.name=sK.BRICK,this.node.addChild(p),p.setPosition(0,0);var d=p.addComponent(eU);d.type=ex.Static,d.group=s1.MAIN_OBJECT;var y=p.addComponent(eQ);y.points=r,y.apply()}}catch(n){a.e(n)}finally{a.f()}}}]),u}(ea)).prototype,"useBatch",[uP],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),uN=n(uD.prototype,"sprite",[uL],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),uO=uD))||uO)||uO);K._RF.pop(),K._RF.push({},"46fa0f/kl1Heo/JvM2kAEAf","GraphicsPattern",void 0);var uJ,uY,uX,uZ,uQ,u$,u0,u1,u2,u3,u4,u5,u7=q.ccclass,u6=q.property,u9=(uz=u7("GraphicsPattern"),ux=u6(ey),uz((uj=n((uH=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=g.call.apply(g,[this].concat(a)),p(n,"graphic",uj,d(n)),n}return y(u,[{key:"onLoad",value:function(){this.graphic=this.getComponent(ey),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"start",value:function(){}},{key:"sleep",value:function(){}},{key:"draw",value:function(n){this.graphic.moveTo(n[0].x,n[0].y);var i,a=T(n);try{for(a.s();!(i=a.n()).done;){var r=i.value;this.graphic.lineTo(r.x,r.y)}}catch(n){a.e(n)}finally{a.f()}this.graphic.close(),this.graphic.fill()}},{key:"applyCollider",value:function(n){var i=this.getComponent(eQ);i?(i.points=n.map(function(n){var i=n.x,a=n.y;return new eL(i,a)}),i.apply()):console.warn("GraphicsPattern: PolygonCollider2D not found")}},{key:"setColor",value:function(n){var i=new Y;Y.fromHEX(i,n),this.graphic.fillColor=i}}]),u}(lt)).prototype,"graphic",[ux],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),uU=uH))||uU);K._RF.pop(),K._RF.push({},"959bd9NhYpMTK0O78HSl4rc","Pattern",void 0);var u8,ce=q.ccclass,ct=q.property,cn=q.requireComponent,ci=(uJ=ce("Pattern"),uY=cn([ey,eQ,eU]),uX=ct(el),uZ=ct(ey),uQ=ct(eU),u$=ct(eQ),uJ(u0=uY((u2=n((u1=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=g.call.apply(g,[this].concat(a)),p(n,"sprite",u2,d(n)),p(n,"graphic",u3,d(n)),p(n,"rigidBody",u4,d(n)),p(n,"polygonCollider",u5,d(n)),n}return y(u,[{key:"onLoad",value:function(){this.graphic=this.getComponent(ey),this.rigidBody=this.getComponent(eU),this.polygonCollider=this.getComponent(eQ),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"start",value:function(){}},{key:"draw",value:function(n){var i=this.sprite.getComponent(Z);if(i){var a=this.getBottomLeftPosition(n),r=a.x,p=a.y,d=this.getTopRightPosition(n),y=d.x,m=d.y;i.setContentSize(y-r,m-p),i.node.setPosition(r,p),this.graphic.moveTo(n[0].x,n[0].y);var g,b=T(n);try{for(b.s();!(g=b.n()).done;){var C=g.value;this.graphic.lineTo(C.x,C.y)}}catch(n){b.e(n)}finally{b.f()}this.graphic.close(),this.graphic.fill()}}},{key:"savePolygonPoints",value:function(n){this.points=n}},{key:"getPolygonPoints",value:function(){return this.points}},{key:"applyCollider",value:function(n){this.polygonCollider.points=n.map(function(n){var i=n.x,a=n.y;return new eL(i,a)}),this.polygonCollider.apply()}},{key:"setRigidBodyType",value:function(n){this.rigidBody.type=n}},{key:"getBottomLeftPosition",value:function(n){var i,a=n[0].x,r=n[0].y,p=T(n);try{for(p.s();!(i=p.n()).done;){var d=i.value;a>d.x&&(a=d.x),r>d.y&&(r=d.y)}}catch(n){p.e(n)}finally{p.f()}return{x:a,y:r}}},{key:"getTopRightPosition",value:function(n){var i,a=n[0].x,r=n[0].y,p=T(n);try{for(p.s();!(i=p.n()).done;){var d=i.value;a<d.x&&(a=d.x),r<d.y&&(r=d.y)}}catch(n){p.e(n)}finally{p.f()}return{x:a,y:r}}}]),u}(lt)).prototype,"sprite",[uX],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),u3=n(u1.prototype,"graphic",[uZ],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),u4=n(u1.prototype,"rigidBody",[uQ],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),u5=n(u1.prototype,"polygonCollider",[u$],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),u0=u1))||u0)||u0);K._RF.pop(),K._RF.push({},"a08960ZMBtFcLD/1nWNbAM9","Poison",void 0);var ca,co=q.ccclass,cr=q.requireComponent,cs=co("Poison")(u8=cr([u9])(u8=function(n){i(o,n);var p=a(o);function o(){var n;r(this,o);for(var i=arguments.length,a=new Array(i),d=0;d<i;d++)a[d]=arguments[d];return(n=p.call.apply(p,[this].concat(a))).polygon=[],n.useBatch=!1,n.poisonPolygons=[],n.bubbleFrame=null,n.bubblePool=null,n.remaining=0,n.maxPoolSize=0,n.totalBubble=0,n}return y(o,[{key:"onLoad",value:function(){var n;this.graphicPattern=this.getComponent(u9),this.gameObjects=null===(n=this.node.parent)||void 0===n?void 0:n.getComponent(pt),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"start",value:function(){this.addRigidBody(),this.useBatch||(this.addPolygonCollider(),this.drawPattern(),this.loadCircleFrame(),this.setTimeSpawnBubble(.2))}},{key:"addPoisonPolygon",value:function(n){this.poisonPolygons.push(n)}},{key:"batchDrawAllPoisonPools",value:function(){if(!(this.poisonPolygons.length<1)){this.graphicPattern.setColor("#774798d1");var n,i=T(this.poisonPolygons);try{for(i.s();!(n=i.n()).done;){var a=n.value;this.graphicPattern.draw(a)}}catch(n){i.e(n)}finally{i.f()}this.applyColliderForBatchDraw(),this.loadCircleFrame(),this.setTimeSpawnBubble(.2)}}},{key:"applyColliderForBatchDraw",value:function(){var n,i=this.poisonPolygons.map(function(n){return n.map(function(n){var i=n.x,a=n.y;return new eL(i,a)})}),a=T(i);try{for(a.s();!(n=a.n()).done;){var r=n.value,p=new J;p.name=sK.POISON,this.node.addChild(p),p.setPosition(0,0);var d=p.addComponent(eU);d.group=s1.MAIN_OBJECT,d.type=ex.Static;var y=p.addComponent(eQ);y.points=r,y.sensor=!0,y.apply()}}catch(n){a.e(n)}finally{a.f()}}},{key:"addRigidBody",value:function(){var n=this.addComponent(eU);n?(n.group=s1.MAIN_OBJECT,n.type=ex.Static):console.warn("Cannot add RigidBody2D")}},{key:"addPolygonCollider",value:function(){var n=this.addComponent(eQ);n?n.sensor=!0:console.warn("Cannot add PolygonCollider2D")}},{key:"drawPattern",value:function(){this.graphicPattern.setColor("#774798d1"),this.graphicPattern.draw(this.polygon),this.graphicPattern.applyCollider(this.polygon)}},{key:"loadCircleFrame",value:function(){var n=this;L.loadSpriteFrameAsync(s3.POISON_CIRCLE_FRAME).then(function(i){if(n.node.isValid){if(!i)throw new Error("loadCircleFrame: SpriteFrame not found");n.bubbleFrame=i;var a=n.useBatch?20*n.poisonPolygons.length:20;n.initPool(10,a)}}).catch(function(n){console.error("loadCircleFrame",n)})}},{key:"initPool",value:function(n,i){this.bubblePool=new e$,this.maxPoolSize=i;for(var a=0;a<n;a++)this.spawnBubble()}},{key:"setTimeSpawnBubble",value:function(n){this.remaining=n}},{key:"spawnBubble",value:function(){if(!this.bubblePool)return null;if(this.totalBubble>=this.maxPoolSize)return null;var n=null;return this.bubblePool.size()>0?n=this.bubblePool.get():(n=new J(sK.POISON_BUBBLE),this.initBubble(n),this.killBubble(n),this.bubblePool.put(n)),n?(this.gameObjects.addObject(n),this.totalBubble+=1,n):null}},{key:"releaseBubble",value:function(n){this.bubblePool&&(this.killBubble(n),this.bubblePool.put(n),this.totalBubble-=1)}},{key:"killBubble",value:function(n){if(n){var i=n.getComponent(el);i&&(i.enabled=!1)}}},{key:"reviveBubble",value:function(n,i){var a=this.getPosition(i),r=a.minX,p=a.minY,d=a.maxX,y=eb.randomRange(r,d),m=n.getComponent(ev);m?m.opacity=125:console.warn("UIOpacity not found in bubble");var g=n.getComponent(el);g&&(g.enabled=!0),n.setPosition(new ep(y,p))}},{key:"initBubble",value:function(n){n.layer=this.node.layer,n.addComponent(el).spriteFrame=this.bubbleFrame,n.addComponent(ev)}},{key:"update",value:function(n){if(this.remaining-=n,this.remaining<=0){if(!this.useBatch){var i=this.spawnBubble();if(!i)return;this.reviveBubble(i,this.polygon),this.playBubbleTween(i,this.polygon);var a=eb.randomRange(.3,.5);return void this.setTimeSpawnBubble(a)}var r,p=eb.randomRange(.3,.5),d=T(this.poisonPolygons);try{for(d.s();!(r=d.n()).done;){var y=r.value,m=this.spawnBubble();if(!m)return;this.reviveBubble(m,y),this.playBubbleTween(m,y)}}catch(n){d.e(n)}finally{d.f()}this.setTimeSpawnBubble(p)}}},{key:"playBubbleTween",value:function(n,i){var a=this;if(n){var r=this.getPosition(i),p=r.minY,d=r.maxY,y=n.getPosition(),m=eb.randomRange(80,120),g=Math.abs(d-p),b=y.x,C=y.y+(d-p)-10,S=g/m;e0(n).to(S,{position:new ep(b,C)},{easing:"smooth"}).start();var k=n.getComponent(ev);if(k){var w=S-.4>0?.4:S;k.opacity=160,e0(k).delay(S-w).to(w,{opacity:0},{easing:"smooth"}).start()}else console.warn("UIOpacity not found in bubble");this.scheduleOnce(function(){a.releaseBubble(n)},S)}}},{key:"getPosition",value:function(n){var i,a=1e4,r=0,p=1e4,d=0,y=T(n);try{for(y.s();!(i=y.n()).done;){var m=i.value,g=m.x,b=m.y;g<a&&(a=g),g>r&&(r=g),b<p&&(p=b),b>d&&(d=b)}}catch(n){y.e(n)}finally{y.f()}return{minX:a+=20,minY:p+=13,maxX:r-=20,maxY:d-=13}}}]),o}(ea))||u8)||u8;K._RF.pop(),K._RF.push({},"8633c11nMJN7I7TAFaGu3Fg","PoisonSurface",void 0);var cl,cu=(0,q.ccclass)("PoisonSurface")(ca=function(n){i(o,n);var p=a(o);function o(){var n;r(this,o);for(var i=arguments.length,a=new Array(i),d=0;d<i;d++)a[d]=arguments[d];return(n=p.call.apply(p,[this].concat(a))).poisonBubblePrefab=null,n.polygon=[],n.useBatch=!1,n.surfacePolygon=[],n.bubblePool=null,n.remaining=0,n.maxPoolSize=0,n.totalBubble=0,n}return y(o,[{key:"onLoad",value:function(){var n;this.graphicPattern=this.getComponent(u9),this.gameObjects=null===(n=this.node.parent)||void 0===n?void 0:n.getComponent(pt),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"start",value:function(){this.useBatch||(this.drawPattern(),this.loadBubbleFrame())}},{key:"drawPattern",value:function(){this.graphicPattern.setColor("#9757bcb0"),this.graphicPattern.draw(this.polygon)}},{key:"addPoisonSurfacePolygon",value:function(n){this.surfacePolygon.push(n)}},{key:"batchDrawAllPoisonSurfaces",value:function(){if(!(this.surfacePolygon.length<1)){this.graphicPattern.setColor("#9757bcb0");var n,i=T(this.surfacePolygon);try{for(i.s();!(n=i.n()).done;){var a=n.value;this.graphicPattern.draw(a)}}catch(n){i.e(n)}finally{i.f()}this.loadBubbleFrame()}}},{key:"loadBubbleFrame",value:function(){var n=this;L.loadPrefabAsync(s3.POISON_BUBBLE_PREFAB).then(function(i){if(n.node.isValid){if(!i)throw new Error("loadBubbleFrame: Prefab is null");n.poisonBubblePrefab=i;var a=n.useBatch?12*n.surfacePolygon.length:12;n.initPool(10,a),n.setTimeSpawnBubble(.3)}}).catch(function(n){console.error("loadBubbleFrame",n)})}},{key:"update",value:function(n){if(this.remaining-=n,this.remaining<=0){if(!this.useBatch){var i=this.spawnPoisonBubblePop();if(!i)return;this.reviveBubble(i,this.polygon);var a=eb.randomRange(.3,.5);return void this.setTimeSpawnBubble(a)}var r,p=eb.randomRange(.3,.5),d=T(this.surfacePolygon);try{for(d.s();!(r=d.n()).done;){var y=r.value,m=this.spawnPoisonBubblePop();if(!m)return;this.reviveBubble(m,y)}}catch(n){d.e(n)}finally{d.f()}this.setTimeSpawnBubble(p)}}},{key:"initPool",value:function(n,i){this.bubblePool=new e$,this.maxPoolSize=i;for(var a=0;a<n;a++)this.spawnPoisonBubblePop()}},{key:"setTimeSpawnBubble",value:function(n){this.remaining=n}},{key:"spawnPoisonBubblePop",value:function(){if(!this.bubblePool)return null;if(this.totalBubble>=this.maxPoolSize)return null;var n=null;if(this.bubblePool.size()>0)n=this.bubblePool.get();else{if(!_instanceof(n=Q(this.poisonBubblePrefab),J))return null;this.bubblePool.put(n)}return n?(n.name=sK.POISON_SURFACE,this.gameObjects.addObject(n),this.totalBubble+=1,n):null}},{key:"releasePoisonBubblePop",value:function(n){this.bubblePool&&(this.bubblePool.put(n),this.totalBubble-=1)}},{key:"reviveBubble",value:function(n,i){var a=this;if(n){var r=this.getRandomPosition(i),p=r.x,d=r.y;n.setPosition(new ep(p,d));var y=n.getComponent(eH.Skeleton);y&&(y.setAnimation(0,"animation",!1),y.setCompleteListener(function(){a.releasePoisonBubblePop(n)}))}}},{key:"getRandomPosition",value:function(n){var i,a=1e4,r=0,p=1e4,d=0,y=T(n);try{for(y.s();!(i=y.n()).done;){var m=i.value,g=m.x,b=m.y;g<a&&(a=g),g>r&&(r=g),b<p&&(p=b),b>d&&(d=b)}}catch(n){y.e(n)}finally{y.f()}return{x:eb.randomRange(a+25,r-25),y:eb.randomRange(p+5,d-5)}}}]),o}(ea))||ca;K._RF.pop(),K._RF.push({},"9aa6cp2xqhK1LJeA0kz2hWR","Water",void 0);var cc=q.ccclass,ch=q.requireComponent,cp=cc("Water")(cl=ch([u9])(cl=function(n){i(o,n);var p=a(o);function o(){var n;r(this,o);for(var i=arguments.length,a=new Array(i),d=0;d<i;d++)a[d]=arguments[d];return(n=p.call.apply(p,[this].concat(a))).polygon=[],n.useBatch=!1,n.waterPolygon=[],n}return y(o,[{key:"onLoad",value:function(){this.graphicPattern=this.getComponent(u9),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"start",value:function(){this.addRigidBody(),this.useBatch||(this.addPolygonCollider(),this.drawPattern())}},{key:"addWaterPolygon",value:function(n){this.waterPolygon.push(n)}},{key:"batchDrawAllWater",value:function(){if(!(this.waterPolygon.length<1)){this.graphicPattern.setColor("#58cef0d0");var n,i=T(this.waterPolygon);try{for(i.s();!(n=i.n()).done;){var a=n.value;this.graphicPattern.draw(a)}}catch(n){i.e(n)}finally{i.f()}this.applyColliderForBatchDraw()}}},{key:"applyColliderForBatchDraw",value:function(){var n,i=this.waterPolygon.map(function(n){return n.map(function(n){var i=n.x,a=n.y;return new eL(i,a)})}),a=T(i);try{for(a.s();!(n=a.n()).done;){var r=n.value,p=new J;p.name=sK.WATER,this.node.addChild(p),p.setPosition(0,0);var d=p.addComponent(eU);d.group=s1.MAIN_OBJECT,d.type=ex.Static;var y=p.addComponent(eQ);y.points=r,y.sensor=!0,y.apply()}}catch(n){a.e(n)}finally{a.f()}}},{key:"addRigidBody",value:function(){var n=this.addComponent(eU);n?(n.group=s1.MAIN_OBJECT,n.type=ex.Static):console.warn("Cannot add RigidBody2D")}},{key:"addPolygonCollider",value:function(){var n=this.addComponent(eQ);n?n.sensor=!0:console.warn("Cannot add PolygonCollider2D")}},{key:"drawPattern",value:function(){this.graphicPattern.setColor("#58cef0d0"),this.graphicPattern.draw(this.polygon),this.graphicPattern.applyCollider(this.polygon)}}]),o}(ea))||cl)||cl;K._RF.pop(),K._RF.push({},"d6e4emyi1lPpLbSlAWFj/GD","CrossingBeeLineTypes",void 0);var cd,cv,cy,cf,cm,cg,cb,cC,cS,ck,cw,cE,cT,cA,cR=function(n){return n[n.LOW=0]="LOW",n[n.MEDIUM=1]="MEDIUM",n[n.HIGH=2]="HIGH",n}(cR||{});e1(cR),K._RF.pop(),K._RF.push({},"988b72EAIhJ1qc0nrLU68l7","CrossingBeeLine",void 0);var cB=q.ccclass,c_=q.property,cP=q.requireComponent,cL=(cd=cB("CrossingBeeLine"),cv=cP([el,Z]),cy=c_(eG),cf=c_(eG),cm=c_(eG),cg=c_({type:cR,displayName:"Sprite type"}),cb=c_({type:eC,displayName:"Line thickness",min:0}),cd(cC=cv((ck=n((cS=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=g.call.apply(g,[this].concat(a)),p(n,"spriteLow",ck,d(n)),p(n,"spriteMedium",cw,d(n)),p(n,"spriteHigh",cE,d(n)),p(n,"spriteType",cT,d(n)),p(n,"lineThickness",cA,d(n)),n.startPos=new ep,n.endPos=new ep,n}return y(u,[{key:"setStartPosition",value:function(n,i,a){var r=arguments.length>1&&void 0!==i?i:this.startPos.x,p=arguments.length>2&&void 0!==a?a:this.startPos.z;this.startPos.set(n,r,p),this.updateLine()}},{key:"setEndPosition",value:function(n,i,a){var r=arguments.length>1&&void 0!==i?i:this.endPos.y,p=arguments.length>2&&void 0!==a?a:this.endPos.z;this.endPos.set(n,r,p),this.updateLine()}},{key:"updateLine",value:function(){this.updateContentSize(),this.updatePosition(),this.updateRotation()}},{key:"thickness",get:function(){return this.lineThickness},set:function(n){this.lineThickness=n,this.updateContentSize()}},{key:"setSpriteType",value:function(n){switch(this.spriteType=n,n){case cR.LOW:this.sprite.spriteFrame=this.spriteLow;break;case cR.MEDIUM:this.sprite.spriteFrame=this.spriteMedium;break;case cR.HIGH:this.sprite.spriteFrame=this.spriteHigh}}},{key:"onLoad",value:function(){this.uiTransform=this.getComponent(Z),this.sprite=this.getComponent(el),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"start",value:function(){this.setSpriteType(this.spriteType),this.updateContentSize(),this.updatePosition(),this.updateRotation()}},{key:"updateContentSize",value:function(){var n=this.endPos.x-this.startPos.x,i=this.endPos.y-this.startPos.y,a=this.endPos.z-this.startPos.z,r=Math.sqrt(n*n+i*i+a*a);this.uiTransform.setContentSize(r,this.lineThickness)}},{key:"updatePosition",value:function(){this.uiTransform.setAnchorPoint(.5,.5),this.node.setWorldPosition((this.startPos.x+this.endPos.x)/2,(this.startPos.y+this.endPos.y)/2,(this.startPos.z+this.endPos.z)/2)}},{key:"updateRotation",value:function(){this.node.setWorldRotationFromEuler(0,0,180*Math.atan2(this.endPos.y-this.startPos.y,this.endPos.x-this.startPos.x)/Math.PI)}}]),u}(ea)).prototype,"spriteLow",[cy],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cw=n(cS.prototype,"spriteMedium",[cf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cE=n(cS.prototype,"spriteHigh",[cm],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cT=n(cS.prototype,"spriteType",[cg],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return cR.LOW}}),cA=n(cS.prototype,"lineThickness",[cb],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),cC=cS))||cC)||cC);K._RF.pop(),K._RF.push({},"169a1O0ruFLoI6OnJUZap7V","DogeState",void 0);var cO,cD=function(n){return n[n.IDLE=0]="IDLE",n[n.SMILE=1]="SMILE",n[n.SCARE=2]="SCARE",n[n.BEE_STING=3]="BEE_STING",n[n.THORN_STAB=4]="THORN_STAB",n[n.OUT_OF_SCREEN=5]="OUT_OF_SCREEN",n[n.POISONED=6]="POISONED",n[n.DROWNING=7]="DROWNING",n[n.OVER_VIEW=8]="OVER_VIEW",n}(cD||{});K._RF.pop(),K._RF.push({},"852f9XjNUVJ3Zt1Kd/EbqXU","Eye",void 0);var cI,cN,cG,cM,cF,cz,cx,cU=(0,q.ccclass)("Eye")(cO=function(n){i(o,n);var p=a(o);function o(){var n;r(this,o);for(var i=arguments.length,a=new Array(i),d=0;d<i;d++)a[d]=arguments[d];return(n=p.call.apply(p,[this].concat(a))).scaleTween=null,n.initialPosition=null,n}return y(o,[{key:"createScaleAnimation",value:function(){var n=e0(this.node).to(.3,{scale:new ep(1.1,1.1,1)},{easing:"smooth"});this.scaleTween=e0(this.node).reverseTime(n).repeatForever()}},{key:"saveInitialPosition",value:function(){this.initialPosition||(this.initialPosition=this.node.position.clone())}},{key:"show",value:function(){this.node.active=!0,this.playAnimation()}},{key:"hide",value:function(){this.stopAnimation(),this.node.active=!1}},{key:"toward",value:function(n){this.initialPosition&&(this.node.setPosition(this.initialPosition),this.node.position.add(n))}},{key:"playAnimation",value:function(){var n;this.scaleTween||this.createScaleAnimation(),null===(n=this.scaleTween)||void 0===n||n.start()}},{key:"stopAnimation",value:function(){var n;null===(n=this.scaleTween)||void 0===n||n.stop()}}]),o}(ea))||cO;K._RF.pop(),K._RF.push({},"df218vrmOtEH5vRQXxIZ3yS","Eyes",void 0);var cH,cj,cV,cW,cK,cq,cJ,cY,cX=q.ccclass,cZ=q.property,cQ=(cI=cX("Eyes"),cN=cZ(cU),cG=cZ(cU),cI((cz=n((cF=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=g.call.apply(g,[this].concat(a)),p(n,"leftEye",cz,d(n)),p(n,"rightEye",cx,d(n)),n.time=0,n.remaining=0,n.running=!1,n}return y(u,[{key:"onLoad",value:function(){this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"start",value:function(){this.remaining=0,this.running=!1,this.setTimeChangeDirection(.8),this.leftEye.saveInitialPosition(),this.rightEye.saveInitialPosition()}},{key:"setTimeChangeDirection",value:function(n){this.time=n}},{key:"show",value:function(){this.running=!0,this.remaining=this.time,this.leftEye.show(),this.rightEye.show()}},{key:"hide",value:function(){this.running=!1,this.leftEye.hide(),this.rightEye.hide()}},{key:"stopLook",value:function(){this.running=!1}},{key:"look",value:function(){if(this.node.parent){var n=this.node.parent.getComponent(he);if(n){var i=n.getNearbyBee();if(i){var a=this.leftEye.initialPosition;if(a){var r=a.x,p=a.y,d=new ep;this.leftEye.node.inverseTransformPoint(d,i.node.worldPosition);var y=new ep(d.x-r,d.y-p,0).normalize().multiplyScalar(5);this.leftEye.toward(y),this.rightEye.toward(y)}}}}}},{key:"update",value:function(n){this.running&&(this.remaining<=0&&(this.look(),this.remaining=this.time),this.remaining-=n)}}]),u}(ea)).prototype,"leftEye",[cN],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cx=n(cF.prototype,"rightEye",[cG],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cM=cF))||cM);K._RF.pop(),K._RF.push({},"14172TbYDBAeISJqcpvLYV7","Doge",void 0);var c$,c0,c1,c2,c3,c4,c5,c7,c6=q.ccclass,c9=q.property,c8=[cD.OVER_VIEW,cD.BEE_STING,cD.THORN_STAB,cD.POISONED,cD.OUT_OF_SCREEN],he=(cH=c6("Doge"),cj=c9(cQ),cV=c9(ej),cH((cq=n((cK=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=g.call.apply(g,[this].concat(a)),p(n,"eyes",cq,d(n)),n.state=cD.IDLE,n.dustParticle=null,n.gameHeight=0,p(n,"collider",cJ,d(n)),p(n,"gameObjects",cY,d(n)),n.onBeginContact=function(i,a){a.node.name!==sK.BEE&&a.node.name!==sK.BIG_BEE&&a.node.name!==sK.BIG_BEE_BULLET||n.beeSting(),a.node.name!==sK.THORN&&a.node.name!==sK.THORN_BALL?a.node.name!==sK.POISON?a.node.name===sK.WATER&&n.drowning():n.poisoned():n.stabbedByThorn()},n}return y(u,[{key:"onLoad",value:function(){var n;this.collider=this.getComponent(ej),this.gameObjects=null===(n=this.node.parent)||void 0===n?void 0:n.getComponent(pt),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"start",value:function(){var n;this.initDustParticle(),this.idle();var i=null===(n=e2("Canvas"))||void 0===n?void 0:n.getComponent(Z);i&&(this.gameHeight=i.height),this.collider.on(eV.BEGIN_CONTACT,this.onBeginContact)}},{key:"idle",value:function(){!1!==this.setState(cD.IDLE)&&(this.hideEyes(),this.setSpineAnimation(lp.IDLE,!0))}},{key:"smile",value:function(){!1!==this.setState(cD.SMILE)&&(this.hideEyes(),this.setSpineAnimation(lp.SMILE,!0))}},{key:"beeSting",value:function(){var n=this;!1!==this.setState(cD.BEE_STING)&&(this.hideEyes(),this.setSpineAnimation(lp.HURT,!1),this.scareOtherDoges(),this.scheduleOnce(function(){n.state===cD.BEE_STING&&n.setSpineAnimation(lp.INACTIVE,!1)},.3),k.playSound(A.DOGE_HURT))}},{key:"stabbedByThorn",value:function(){!1!==this.setState(cD.THORN_STAB)&&(this.hideEyes(),this.createDust(),this.setSpineAnimation(lp.THORN_INACTIVE,!1),this.scareOtherDoges(),k.playSound(A.DOGE_DIES))}},{key:"poisoned",value:function(){!1!==this.setState(cD.POISONED)&&(this.hide(),this.hideEyes(),this.createDust(),this.scareOtherDoges(),k.playSound(A.DOGE_DIES))}},{key:"drowning",value:function(){!1!==this.setState(cD.DROWNING)&&(this.hideEyes(),this.setSpineAnimation(lp.DROWNING,!1))}},{key:"isCantBeTargeted",value:function(){return -1!==[cD.THORN_STAB,cD.OUT_OF_SCREEN,cD.POISONED,cD.DROWNING].indexOf(this.state)}},{key:"scare",value:function(){var n;!1!==this.setState(cD.SCARE)&&(this.showEyes(),null===(n=this.eyes)||void 0===n||n.look(),this.setSpineAnimation(lp.FREAK_OUT,!0))}},{key:"hideEyes",value:function(){this.eyes.hide()}},{key:"showEyes",value:function(){this.eyes.show()}},{key:"setState",value:function(n){return -1===c8.indexOf(n)?-1===c8.indexOf(this.state)&&(this.state=n,!0):c8.indexOf(n)>c8.indexOf(this.state)&&(this.state=n,this.node.scene.emit(lP.DOGE_DIE),!0)}},{key:"scareOtherDoges",value:function(){if(this.gameObjects){var n,i=this.gameObjects.getDoges(this),a=T(i);try{for(a.s();!(n=a.n()).done;)n.value.scare()}catch(n){a.e(n)}finally{a.f()}}}},{key:"update",value:function(){var n=this.node.worldPosition.y;(n>this.gameHeight||n<0)&&this.setState(cD.OUT_OF_SCREEN),this.isBeeNearBy()&&this.scare()}},{key:"isBeeNearBy",value:function(){return this.state===cD.IDLE&&!c8.includes(this.state)&&!!this.getNearbyBee()}},{key:"getNearbyBee",value:function(){var n=this;if(!this.node.parent)return null;var i=this.node.parent.getComponentsInChildren(lJ).find(function(i){var a=ep.distance(n.node.getWorldPosition(),i.node.getWorldPosition());if(i.enabled&&a<=200)return!0});return null!=i?i:null}},{key:"createDust",value:function(){var n=this;if(this.dustParticle){this.dustParticle.active=!0;var i=this.node.getWorldPosition(),a=i.x,r=i.y;this.dustParticle.setWorldPosition(new ep(a,r));var p=this.dustParticle.getComponent(eH.Skeleton);null==p||p.setAnimation(0,"animation",!1),this.scheduleOnce(function(){n.dustParticle&&(n.dustParticle.active=!1)},.5)}}},{key:"initDustParticle",value:function(){var n=this;if(this.node.parent){var i=new J(sK.DUST_PARTICLE);i.layer=Math.pow(2,25),i.active=!1;var a=i.addComponent(eH.Skeleton);eX.load(s3.DUST_PARTICLE_SPINE,eH.SkeletonData,function(i,r){i?console.error("initDustParticle",i):n.node.isValid&&(a.skeletonData=r)}),this.node.parent.addChild(i),this.dustParticle=i}}}]),u}(lt)).prototype,"eyes",[cj],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cJ=n(cK.prototype,"collider",[cV],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cY=n(cK.prototype,"gameObjects",[c9],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cW=cK))||cW);K._RF.pop(),K._RF.push({},"2ca763+kElPuqiAkECtFMMS","Grass",void 0);var ht,hn,hi,ha,ho,hr=q.ccclass,hs=q.property,hl=q.requireComponent,hu=(c$=hr("Grass"),c0=hl(ey),c1=hs({tooltip:"Use batch draw all grass polygons"}),c2=hs(ey),c$(c3=c0((c5=n((c4=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=g.call.apply(g,[this].concat(a)),p(n,"useBatch",c5,d(n)),p(n,"graphic",c7,d(n)),n.grassPolygons=[],n}return y(u,[{key:"__preload",value:function(){this.graphic=this.getComponent(ey),this.validateRequiredComponents(),this.listenGameplayEvents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"listenGameplayEvents",value:function(){}},{key:"onLoad",value:function(){var n=this.getPolygon();if(n){var i=this.isDark()?sK.GRASS_DARK:sK.GRASS;this.useBatch?this.addGrassPolygon(i,n):(this.updateFillColor(i),this.drawGrass(n))}}},{key:"drawGrass",value:function(n){this.graphic.moveTo(n[0].x,n[0].y);var i,a=T(n);try{for(a.s();!(i=a.n()).done;){var r=i.value;this.graphic.lineTo(r.x,r.y)}}catch(n){a.e(n)}finally{a.f()}this.graphic.close(),this.graphic.fill()}},{key:"getPolygon",value:function(){if(!("polygon"in this.node))return null;var n=this.node.polygon;return Array.isArray(n)?n:null}},{key:"isDark",value:function(){return"isDark"in this.node&&!!this.node.isDark}},{key:"addGrassPolygon",value:function(n,i){this.grassPolygons.push({type:n,polygon:i})}},{key:"updateFillColor",value:function(n){n===sK.GRASS_DARK?this.graphic.fillColor.fromHEX("#5e9c35"):this.graphic.fillColor.fromHEX("#8bdd55")}},{key:"batchDrawAllGrass",value:function(){if(!(this.grassPolygons.length<1)){var n,i=T(this.grassPolygons);try{for(i.s();!(n=i.n()).done;){var a=n.value;this.updateFillColor(a.type),this.drawGrass(a.polygon)}}catch(n){i.e(n)}finally{i.f()}this.grassPolygons=[]}}}]),u}(lt)).prototype,"useBatch",[c1],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),c7=n(c4.prototype,"graphic",[c2],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),c3=c4))||c3)||c3);K._RF.pop(),K._RF.push({},"7027fhYTgdDe6EinMz7XLC6","MapLine",void 0);var hc=q.ccclass,hh=q.property,hp=(ht=hc("MapLine"),hn=hh(ey),ht((ho=n((ha=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=g.call.apply(g,[this].concat(a)),p(n,"graphics",ho,d(n)),n.useBatch=!1,n.mapLines=[],n}return y(u,[{key:"__preload",value:function(){this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"onLoad",value:function(){var n=this.getPolygon();n&&(this.useBatch?(this.graphics.enabled=!1,this.addLine(n)):this.drawLine(n))}},{key:"getPolygon",value:function(){if(!("polygon"in this.node))return null;var n=this.node.polygon;return Array.isArray(n)?n:null}},{key:"addLine",value:function(n){this.mapLines.push(n)}},{key:"drawLine",value:function(n){this.graphics.moveTo(n[0].x,n[0].y);var i,a=T(n.slice(1));try{for(a.s();!(i=a.n()).done;){var r=i.value;this.graphics.lineTo(r.x,r.y)}}catch(n){a.e(n)}finally{a.f()}this.graphics.stroke()}},{key:"batchDrawAllLines",value:function(){if(!(this.mapLines.length<1)){var n,i=T(this.mapLines);try{for(i.s();!(n=i.n()).done;){var a=n.value;this.drawLine(a)}}catch(n){i.e(n)}finally{i.f()}this.mapLines=[]}}}]),u}(ea)).prototype,"graphics",[hn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),hi=ha))||hi);K._RF.pop(),K._RF.push({},"87767KZVqpEgIbdzZdGh1CJ","BatchObjectManager",void 0);var hd=function(){function e(){r(this,e),this.isBrickInitialized=!1,this.isGrassInitialized=!1,this.isLineInitialized=!1,this.isPoisonInitialized=!1,this.isPoisonSurfaceInitialized=!1,this.isWaterInitialized=!1,this.isDangerAreaInitialized=!1,this.mainBrickComponent=null,this.mainGrassComponent=null,this.mainLineComponent=null,this.mainPoisonComponent=null,this.mainPoisonSurfaceComponent=null,this.mainWaterComponent=null,this.mainDangerAreaComponent=null}return y(e,[{key:"assignMainBrickComponent",value:function(n){this.mainBrickComponent=n}},{key:"assignMainGrassComponent",value:function(n){this.mainGrassComponent=n}},{key:"assignMainLineComponent",value:function(n){this.mainLineComponent=n}},{key:"assignMainPoisonComponent",value:function(n){this.mainPoisonComponent=n}},{key:"assignMainPoisonSurfaceComponent",value:function(n){this.mainPoisonSurfaceComponent=n}},{key:"assignMainWaterComponent",value:function(n){this.mainWaterComponent=n}},{key:"assignMainDangerAreaComponent",value:function(n){this.mainDangerAreaComponent=n}},{key:"isBrickBatchingEnabled",value:function(){var n,i;return null!==(n=null===(i=this.mainBrickComponent)||void 0===i?void 0:i.useBatch)&&void 0!==n&&n}},{key:"isGrassBatchingEnabled",value:function(){var n,i;return null!==(n=null===(i=this.mainGrassComponent)||void 0===i?void 0:i.useBatch)&&void 0!==n&&n}},{key:"isLineBatchingEnabled",value:function(){var n,i;return null!==(n=null===(i=this.mainLineComponent)||void 0===i?void 0:i.useBatch)&&void 0!==n&&n}},{key:"isPoisonBatchingEnabled",value:function(){var n,i;return null!==(n=null===(i=this.mainPoisonComponent)||void 0===i?void 0:i.useBatch)&&void 0!==n&&n}},{key:"isPoisonSurfaceBatchingEnabled",value:function(){var n,i;return null!==(n=null===(i=this.mainPoisonSurfaceComponent)||void 0===i?void 0:i.useBatch)&&void 0!==n&&n}},{key:"isWaterBatchingEnabled",value:function(){var n,i;return null!==(n=null===(i=this.mainWaterComponent)||void 0===i?void 0:i.useBatch)&&void 0!==n&&n}},{key:"isDangerAreaBatchingEnabled",value:function(){var n,i;return null!==(n=null===(i=this.mainDangerAreaComponent)||void 0===i?void 0:i.useBatch)&&void 0!==n&&n}},{key:"updateBrickPolygon",value:function(n){this.mainBrickComponent?this.mainBrickComponent.addBrickPolygon(n):console.warn("BatchObjectManager: mainBrickComponent is not assigned")}},{key:"updateGrassPolygon",value:function(n,i){this.mainGrassComponent?this.mainGrassComponent.addGrassPolygon(n,i):console.warn("BatchObjectManager: mainGrassComponent is not assigned")}},{key:"updateMapLine",value:function(n){this.mainLineComponent?this.mainLineComponent.addLine(n):console.warn("BatchObjectManager: mainLineNode is not assigned")}},{key:"updatePoisonPolygon",value:function(n){this.mainPoisonComponent?this.mainPoisonComponent.addPoisonPolygon(n):console.warn("BatchObjectManager: mainPoisonComponent is not assigned")}},{key:"updatePoisonSurfacePolygon",value:function(n){this.mainPoisonSurfaceComponent?this.mainPoisonSurfaceComponent.addPoisonSurfacePolygon(n):console.warn("BatchObjectManager: mainPoisonSurfaceComponent is not assigned")}},{key:"updateWaterPolygon",value:function(n){this.mainWaterComponent?this.mainWaterComponent.addWaterPolygon(n):console.warn("BatchObjectManager: mainWaterComponent is not assigned")}},{key:"updateDangerAreaPolygon",value:function(n){this.mainDangerAreaComponent?this.mainDangerAreaComponent.addDangerAreaPolygon(n):console.warn("BatchObjectManager: mainDangerAreaComponent is not assigned")}},{key:"batchDraw",value:function(){var n,i,a,r,p,d,y;null===(n=this.mainBrickComponent)||void 0===n||n.batchDrawAllBrick(),null===(i=this.mainGrassComponent)||void 0===i||i.batchDrawAllGrass(),null===(a=this.mainLineComponent)||void 0===a||a.batchDrawAllLines(),null===(r=this.mainPoisonComponent)||void 0===r||r.batchDrawAllPoisonPools(),null===(p=this.mainPoisonSurfaceComponent)||void 0===p||p.batchDrawAllPoisonSurfaces(),null===(d=this.mainWaterComponent)||void 0===d||d.batchDrawAllWater(),null===(y=this.mainDangerAreaComponent)||void 0===y||y.batchDrawAllDangerAreas()}},{key:"clearObjects",value:function(){this.isBrickInitialized=!1,this.isGrassInitialized=!1,this.isLineInitialized=!1,this.isPoisonInitialized=!1,this.isPoisonSurfaceInitialized=!1,this.isWaterInitialized=!1,this.isDangerAreaInitialized=!1,this.mainBrickComponent=null,this.mainGrassComponent=null,this.mainLineComponent=null,this.mainPoisonComponent=null,this.mainPoisonSurfaceComponent=null,this.mainWaterComponent=null,this.mainDangerAreaComponent=null}}]),e}();K._RF.pop(),K._RF.push({},"4c04ffCcRhGsqEZlVWUHd8s","MapTransformer",void 0);var hv,hy,hf,hm,hg,hb,hC,hS,hk,hw,hE,hT,hA,hR,hB,h_,hP,hL,hO,hD,hI,hN,hG,hM,hF,hz,hx,hU,hH,hj,hV,hW,hK,hq,hJ,hY,hX,hZ,hQ,h$,h0,h1,h2,h3,h4,h5=200,h7=270,h6=function(){function e(){r(this,e)}return y(e,null,[{key:"getPointObject",value:function(n){var i=n.id,a=n.point,r=n.data,p=n.connect;return{id:i,point:{x:a.x*l0+14-h5,y:l1-a.y*l0-14-h7},data:r,connect:p}}},{key:"getPointObjectBHalfCoord",value:function(n){var i=n.id,a=n.point,r=n.data,p=n.connect;return{id:i,point:{x:a.x*l0/2-h5,y:l1-a.y*l0/2-h7},data:r,connect:p}}},{key:"getPolygonObject",value:function(n){var i=n.id,a=n.point,r=n.data,p=n.connect;return{id:i,point:a.map(function(n){var i=n.x,a=n.y;return{x:i*l0-h5,y:l1-a*l0-h7}}),data:r,connect:p}}},{key:"getDoublePolygon",value:function(n){var i=n.id,a=n.point,r=n.data,p=n.connect;return{id:i,point:a.map(function(n){var i=n.x,a=n.y;return{x:i*l0/2-h5,y:l1-a*l0/2-h7}}),data:r,connect:p}}},{key:"transformPointsFromMapToDrawAreaCoordinate",value:function(n){return n.map(function(n){var i=n.x,a=n.y;return{x:i*l0-h5,y:l1-a*l0-h7}})}}]),e}();K._RF.pop(),K._RF.push({},"75ad9uPflhLL4N96NmHF2Sk","GameObjects",void 0);var h9,h8=q.ccclass,pe=q.property,pt=(hv=h8("GameObjects"),hy=pe(eJ),hf=pe(eJ),hm=pe(eJ),hg=pe(eJ),hb=pe(eJ),hC=pe(eJ),hS=pe(eJ),hk=pe(eJ),hw=pe(eJ),hE=pe(eJ),hT=pe(eJ),hA=pe(eJ),hR=pe(eJ),hB=pe(eJ),h_=pe(eJ),hP=pe(eJ),hL=pe({tooltip:"Use batch draw all map lines."}),hO=pe({tooltip:"Use batch draw all poison pools."}),hD=pe({tooltip:"Use batch draw all poison surfaces."}),hI=pe({tooltip:"Use batch draw all water pools."}),hN=pe({tooltip:"Use batch draw all danger areas."}),hv((hF=n((hM=function(n){i(l,n);var m=a(l);function l(){var n;r(this,l);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=m.call.apply(m,[this].concat(a)),p(n,"dogePrefab",hF,d(n)),p(n,"spiderPrefab",hz,d(n)),p(n,"beePrefab",hx,d(n)),p(n,"beehivePrefab",hU,d(n)),p(n,"bigBeePrefab",hH,d(n)),p(n,"thornPrefab",hj,d(n)),p(n,"thornBallPrefab",hV,d(n)),p(n,"airFanPrefab",hW,d(n)),p(n,"grassPrefab",hK,d(n)),p(n,"balloonPrefab",hq,d(n)),p(n,"brickPrefab",hJ,d(n)),p(n,"arenaPrefab",hY,d(n)),p(n,"woodPrefab",hX,d(n)),p(n,"connectPrefab",hZ,d(n)),p(n,"mapLinePrefab",hQ,d(n)),p(n,"crossingBeeLinePrefab",h$,d(n)),p(n,"batchMapLines",h0,d(n)),p(n,"batchPoisonPool",h1,d(n)),p(n,"batchPoisonSurface",h2,d(n)),p(n,"batchWaterPool",h3,d(n)),p(n,"batchDangerArea",h4,d(n)),n.batchObjects=new hd,n.objects=new Map,n}return y(l,[{key:"spawnObjects",value:function(n){for(var i=n.map,a=B(i).reverse(),r=0;r<a.length;r++){var p=a[r],d=null;(d=Array.isArray(p.point)?this.spawnPolygonObjectType(p):this.spawnPointObjectType(p))&&this.objects.set(r,d)}var y,m=T(i);try{for(m.s();!(y=m.n()).done;){var g=y.value;if(!Array.isArray(g.point)){var b=g;if(b.id===s0.BALLOON){var C=h6.getPointObject(b).point,S=C.x,k=C.y;if(!b.connect)continue;var w=this.findObjectIndex(i,b.connect);if(!w)continue;this.spawnBalloon(S,k,w)}if(g.id===s0.CONNECT){if(!g.connect)return null;if(!Array.isArray(g.connect.point))return null;var E=h6.getDoublePolygon(g.connect),A=h6.getPointObjectBHalfCoord(g).point,R=A.x,_=A.y;this.spawnConnect(R,_,E.point)}}}}catch(n){m.e(n)}finally{m.f()}this.batchObjects.batchDraw(),this.sortObjects(),this.sleepObjects()}},{key:"spawnPolygonObjectType",value:function(n){var i=h6.getPolygonObject(n).point;if(0===i.length)return null;switch(n.id){case s0.BRICK:return this.spawnBrick(i);case s0.GRASS:return this.spawnGrass(i,!1);case s0.GRASS_DARK:return this.spawnGrass(i,!0);case s0.LINE:return this.spawnLine(i);case s0.POISON:return this.spawnPoison(i);case s0.POISON_SURFACE:return this.spawnPoisonSurface(i);case s0.WATER:return this.spawnWater(i);case s0.DANGER_AREA:return this.spawnDangerAreaNormal(i);case s0.CONNECT:return null;case s0.WOOD:var a=h6.getDoublePolygon(n);return this.spawnWood(a.point);case s0.COLLIDER:var r=h6.getDoublePolygon(n);return this.spawnCollider(0,0,r.point);case s0.STROKE:default:return null}}},{key:"spawnPointObjectType",value:function(n){var i=h6.getPointObject(n).point,a=i.x,r=i.y;switch(n.id){case s0.DOGE_A:return this.spawnDoge({x:a,y:r});case s0.DOGE_B:return this.spawnDoge({x:a,y:r,right:!0});case s0.SPIDER:return this.spawnSpider(a,r);case s0.BEEHIVE_A:case s0.BEEHIVE_C:return this.spawnBeehive(a,r);case s0.BEEHIVE_B:case s0.BEEHIVE_D:return this.spawnBeehive(a,r,!0);case s0.THORN_BALL:return this.spawnThornBall(a,r);case s0.BIG_BEE:return this.spawnBigBee(a,r);case s0.WATER_SURFACE:return this.spawnWaterSurface(a,r);case s0.THORN:var p,d=(null===(p=n.data)||void 0===p?void 0:p.a)||0;return this.spawnThorn(a,r,d);case s0.AIR_FAN:var y,m=(null===(y=n.data)||void 0===y?void 0:y.a)||0;return this.spawnAirFan(a,r,m);default:return null}}},{key:"spawnObjectForDevTools",value:function(n){this.spawnPointObjectType(n),this.sortObjects()}},{key:"spawnPolygonObjectForDevTools",value:function(n){this.spawnPolygonObjectType(n),this.sortObjects()}},{key:"addObject",value:function(n){this.node.insertChild(n,this.getSiblingIndex(n.name))}},{key:"sortObjects",value:function(){var n=B(this.node.children);n.sort(function(n,i){return s$[n.name]-s$[i.name]}),n.forEach(function(n,i){n.setSiblingIndex(i)})}},{key:"findObjectIndex",value:function(n,i){var a=this,r=n.findIndex(function(n){return JSON.stringify(n)===JSON.stringify(i)}),p=n[r].point;if(p&&!Array.isArray(p)){var d=h6.getPointObject(n[r]).point,y=d.x,m=d.y,g=this.node.children.find(function(n){var r=n.position;return r.x===y&&r.y===m&&n.name===a.getObjNameFromId(i.id)});if(g)return g}}},{key:"getObjNameFromId",value:function(n){switch(n){case s0.DOGE_A:case s0.DOGE_B:return sK.DOGE;case s0.SPIDER:return sK.SPIDER;case s0.BEEHIVE_A:case s0.BEEHIVE_B:case s0.BEEHIVE_C:case s0.BEEHIVE_D:return sK.BEEHIVE;case s0.THORN_BALL:return sK.THORN_BALL;case s0.BIG_BEE:return sK.BIG_BEE;case s0.WATER_SURFACE:return sK.WATER_SURFACE;case s0.THORN:return sK.THORN;case s0.AIR_FAN:return sK.AIR_FAN;case s0.BRICK:return sK.BRICK;case s0.GRASS:return sK.GRASS;case s0.GRASS_DARK:return sK.GRASS_DARK;case s0.LINE:return sK.MAP_LINE;case s0.POISON:return sK.POISON;case s0.POISON_SURFACE:return sK.POISON_SURFACE;case s0.WATER:return sK.WATER;case s0.DANGER_AREA:return sK.DANGER_AREA;case s0.WOOD:return sK.WOOD;case s0.COLLIDER:return sK.COLLIDER;default:return""}}},{key:"getSiblingIndex",value:function(n){var i=this.node.children,a=s$[n];if(!a)return i.length+1;var r=i.map(function(n){return s$[n.name]}),p=r.findIndex(function(n){return a<n});return p<0?r.length+1:p}},{key:"clearObjects",value:function(){this.node.destroyAllChildren(),this.node.removeAllChildren(),this.batchObjects.clearObjects()}},{key:"stopBeeBehavior",value:function(){var n,i=this.node.getComponentsInChildren(lJ),a=T(i);try{for(a.s();!(n=a.n()).done;)n.value.state=sW.IDLE}catch(n){a.e(n)}finally{a.f()}}},{key:"sleepObjects",value:function(){var n,i=this.getComponentsInChildren(lt),a=T(i);try{for(a.s();!(n=a.n()).done;)n.value.sleep()}catch(n){a.e(n)}finally{a.f()}var r,p=this.node.getComponentsInChildren(uF),d=T(p);try{for(d.s();!(r=d.n()).done;)r.value.state=sW.IDLE}catch(n){d.e(n)}finally{d.f()}}},{key:"wakeUpObjects",value:function(){var n,i=this.getComponentsInChildren(lt),a=T(i);try{for(a.s();!(n=a.n()).done;)n.value.wake()}catch(n){a.e(n)}finally{a.f()}}},{key:"spawnBeehive",value:function(n,i,a){var r=arguments.length>2&&void 0!==a&&a,p=Q(this.beehivePrefab);return _instanceof(p,J)?(p.name=sK.BEEHIVE,p.setPosition(n,i),p.setScale(r?-1:1,1),p.attr({isRightSide:r}),this.addObject(p),p):null}},{key:"spawnBees",value:function(){var n,i=this.node.getComponentsInChildren(up),a=1===i.length?8:4,r=T(i);try{for(r.s();!(n=r.n()).done;){var p=n.value;p.node.attr({totalPathSeekers:Math.floor(a/3)});for(var d=0;d<a;d++){var y=this.spawnBee();y&&p.releaseBee(y)}}}catch(n){r.e(n)}finally{r.f()}this.sortObjects()}},{key:"spawnBee",value:function(){var n=Q(this.beePrefab);return _instanceof(n,J)?(n.name=sK.BEE,this.addObject(n),n.setSiblingIndex(999),n):null}},{key:"spawnCrossingBees",value:function(n){for(var i=this,a=n.beeSpeed,r=n.spawnRandOffset,p=void 0===r?80:r,d=n.playerWorldX,y=n.playerWorldY,m=n.spawnWorldX,g=n.spawnWorldY,b=n.count,C=void 0===b?[1,2]:b,S=n.targetOffsetMultiplier,k=void 0===S?0:S,w=eb.randomRangeInt(C[0],C[1]),E=[],T=m<d,f=function(){var n=i.spawnBee();if(!n)throw new Error("Could not spawn bee");var r=n.getComponent(lJ);if(!r)throw new Error("Bee component not found");i.addObject(n),r.isSpawnLeftSide=!T;var b=eb.randomRangeInt(-p,p),C=eb.randomRangeInt(-p,p),S=m+b,w=g+C,A=n.worldPosition.z;n.setWorldPosition(S,w,A);var R=new eL(d+b*k-S,y+C*k-w);r.rotateToVector(R),r.fly(R.normalize().multiplyScalar(a)),i.scheduleOnce(function(){r.setRole(sV.NORMAL),r.setState(sW.ATTACKING),r.followInstructions()}),E.push(r)},A=0;A<w;A++)f();return this.sortObjects(),E}},{key:"spawnCrossingBeeLine",value:function(n){var i=n.startX,a=n.startY,r=n.endX,p=n.endY,d=n.thickness,y=n.spriteType,m=Q(this.crossingBeeLinePrefab);if(!_instanceof(m,J))throw new Error("Could not spawn crossing bee line");m.name=sK.CROSSING_BEE_LINE;var g=m.getComponent(cL);if(!g)throw new Error("CrossingBeeLine component not found");return this.addObject(m),g.setSpriteType(y),g.setStartPosition(i,a),g.setEndPosition(r,p),g.thickness=d,this.sortObjects(),g}},{key:"checkAllBeeDie",value:function(){var n=this.node.getComponentsInChildren(lJ),i=this.node.getComponentsInChildren(uF),a=n.some(function(n){return n.enabled}),r=i.some(function(n){return n.enabled});return!a&&!r}},{key:"spawnDoge",value:function(n){var i=n.x,a=n.y,r=n.right,p=void 0!==r&&r,d=n.isWorldPosition,y=void 0!==d&&d,m=n.rigidBodyConfig,g=void 0===m?{}:m,b=Q(this.dogePrefab);if(!_instanceof(b,J))return null;b.name=sK.DOGE,y||b.setPosition(i,a),b.setScale(p?-1:1,1),this.addObject(b),b.setSiblingIndex(999),y&&b.setWorldPosition(i,a,b.worldPosition.z);var C=g.gravityScale,S=void 0===C?1:C,k=b.getComponent(eU);if(!k)throw new Error("Could not get doge rigidBody");return k.gravityScale=S,b}},{key:"spawnSpider",value:function(n,i){var a=Q(this.spiderPrefab);return _instanceof(a,J)?(a.name=sK.SPIDER,a.setPosition(n,i),this.addObject(a),a):null}},{key:"spawnBigBee",value:function(n,i){var a=Q(this.bigBeePrefab);return _instanceof(a,J)?(a.name=sK.BIG_BEE,a.setPosition(n,i),this.addObject(a),a):null}},{key:"reviveBigBees",value:function(){var n,i=this.node.getComponentsInChildren(uF),a=T(i);try{for(a.s();!(n=a.n()).done;)n.value.state=sW.ATTACKING}catch(n){a.e(n)}finally{a.f()}}},{key:"spawnBrick",value:function(n){if(!this.batchObjects.isBrickInitialized){var i=this.spawnBrickNormal(n);if(!i)return null;var a=i.getComponent(uq);return a?(this.batchObjects.isBrickInitialized=!0,a.useBatch&&this.batchObjects.assignMainBrickComponent(a),this.addObject(i),i):null}return this.batchObjects.isBrickBatchingEnabled()?(this.batchObjects.updateBrickPolygon(n),null):this.spawnBrickNormal(n)}},{key:"spawnBrickNormal",value:function(n){var i=Q(this.brickPrefab);return _instanceof(i,J)?(i.name=sK.BRICK,i.attr({polygon:n}),this.addObject(i),i):null}},{key:"spawnWood",value:function(n){var i=Q(this.woodPrefab);if(!_instanceof(i,J))return null;i.name=sK.WOOD;var a=i.getComponent(ci);if(!a)return console.warn("Pattern not found"),null;a.savePolygonPoints(n.map(function(n){return{x:n.x,y:n.y}})),this.addObject(i),a.draw(n),a.applyCollider(n),a.setRigidBodyType(ex.Dynamic);var r=this.spawnWoodStroke(n);return r.setParent(i,!1),i.addChild(r),i}},{key:"spawnWoodStroke",value:function(n){var i=new J;i.name=sK.WOOD_STROKE,i.layer=33554432,this.addObject(i);var a=i.addComponent(ey);a.lineWidth=4;var r=new Y;Y.fromHEX(r,"#0d0d15"),a.strokeColor=r,a.moveTo(n[0].x,n[0].y);var p,d=T(n.slice(1));try{for(d.s();!(p=d.n()).done;){var y=p.value;a.lineTo(y.x,y.y)}}catch(n){d.e(n)}finally{d.f()}return a.close(),a.stroke(),i}},{key:"spawnGrass",value:function(n,i){if(!this.batchObjects.isGrassInitialized){var a=this.spawnGrassNormal(n,!1);if(!a)return null;var r=a.getComponent(hu);return r?(this.batchObjects.isGrassInitialized=!0,r.useBatch&&this.batchObjects.assignMainGrassComponent(r),this.addObject(a),a):null}var p=i?sK.GRASS_DARK:sK.GRASS;return this.batchObjects.isGrassBatchingEnabled()?(this.batchObjects.updateGrassPolygon(p,n),null):this.spawnGrassNormal(n,i)}},{key:"spawnGrassNormal",value:function(n,i){var a=Q(this.grassPrefab);return _instanceof(a,J)?(a.name=i?sK.GRASS_DARK:sK.GRASS,a.attr({polygon:n,isDark:i}),this.addObject(a),a):null}},{key:"spawnPoison",value:function(n){if(!this.batchPoisonPool)return this.spawnPoisonNormal(n);if(!this.batchObjects.isPoisonInitialized){var i=Q(this.arenaPrefab);if(!_instanceof(i,J))return null;i.name=sK.POISON,this.addObject(i);var a=i.addComponent(cs);return a.useBatch=!0,this.batchObjects.isPoisonInitialized=!0,this.batchObjects.assignMainPoisonComponent(a),this.batchObjects.updatePoisonPolygon(n),i}return this.batchObjects.updatePoisonPolygon(n),null}},{key:"spawnPoisonNormal",value:function(n){var i=Q(this.arenaPrefab);return _instanceof(i,J)?(i.name=sK.POISON,this.addObject(i),i.addComponent(cs).polygon=n,i):null}},{key:"spawnPoisonSurface",value:function(n){if(!this.batchPoisonPool)return this.spawnPoisonSurfaceNormal(n);if(!this.batchObjects.isPoisonSurfaceInitialized){var i=Q(this.arenaPrefab);if(!_instanceof(i,J))return null;i.name=sK.POISON_SURFACE,this.addObject(i);var a=i.addComponent(cu);return a.useBatch=!0,this.batchObjects.isPoisonSurfaceInitialized=!0,this.batchObjects.assignMainPoisonSurfaceComponent(a),this.batchObjects.updatePoisonSurfacePolygon(n),i}return this.batchObjects.updatePoisonSurfacePolygon(n),null}},{key:"spawnPoisonSurfaceNormal",value:function(n){var i=Q(this.arenaPrefab);return _instanceof(i,J)?(i.name=sK.POISON_SURFACE,this.addObject(i),i.addComponent(cu).polygon=n,i):null}},{key:"spawnWater",value:function(n){if(!this.batchWaterPool)return this.spawnWaterNormal(n);if(!this.batchObjects.isWaterInitialized){var i=Q(this.arenaPrefab);if(!_instanceof(i,J))return null;i.name=sK.WATER,this.addObject(i);var a=i.addComponent(cp);return a.useBatch=!0,i.addComponent(ev).opacity=.75,this.batchObjects.isWaterInitialized=!0,this.batchObjects.assignMainWaterComponent(a),this.batchObjects.updateWaterPolygon(n),i}return this.batchObjects.updateWaterPolygon(n),null}},{key:"spawnWaterNormal",value:function(n){var i=Q(this.arenaPrefab);return _instanceof(i,J)?(i.name=sK.WATER,this.addObject(i),i.addComponent(cp).polygon=n,i.addComponent(ev).opacity=.75,i):null}},{key:"spawnDangerAreaNormal",value:function(n){var i=Q(this.arenaPrefab);if(!_instanceof(i,J))return null;i.name=sK.DANGER_AREA;var a=i.getComponent(u9);if(!a)return console.warn("GraphicsPattern not found"),null;this.addObject(i),a.setColor("#fc03036d"),a.draw(n);var r=i.addComponent(eU);return r.type=ex.Static,r.group=s1.DEFAULT,i.addComponent(eQ),a.applyCollider(n),i}},{key:"spawnWaterSurface",value:function(n,i){var a=new J;return a.name=sK.WATER_SURFACE,a.layer=this.node.layer,a.setPosition(n,i),L.loadSpriteFrameAsync(s3.WATER_SURFACE_FRAME).then(function(n){if(a.isValid){if(!n)throw new Error("spawnWaterSurface: SpriteFrame not found");a.addComponent(el).spriteFrame=n}}).catch(function(n){console.warn("spawnWaterSurface",n)}),this.addObject(a),a}},{key:"spawnThorn",value:function(n,i,a){var r=arguments.length>2&&void 0!==a?a:0,p=Q(this.thornPrefab);return _instanceof(p,J)?(p.name=sK.THORN,p.angle=r,p.setPosition(n,i),this.addObject(p),p):null}},{key:"spawnThornBall",value:function(n,i){var a=Q(this.thornBallPrefab);return _instanceof(a,J)?(a.name=sK.THORN_BALL,a.setPosition(n,i),this.addObject(a),a):null}},{key:"spawnAirFan",value:function(n,i,a){var r=arguments.length>2&&void 0!==a?a:0,p=Q(this.airFanPrefab);if(!_instanceof(p,J))return null;p.name=sK.AIR_FAN,p.angle=r,p.setPosition(n,i),p.attr({id:s0.AIR_FAN});var d=p.getComponent(la);return d?(d.setForceDirection(r),this.addObject(p),p):(console.warn("AirFan not found"),null)}},{key:"spawnCollider",value:function(n,i,a){var r=new J;r.name=sK.COLLIDER,this.addObject(r),r.setPosition(n,i);var p=r.addComponent(eU);p.type=ex.Static,p.group=s1.MAIN_OBJECT;var d=r.addComponent(eQ);return d.restitution=.2,d.points=a.map(function(n){var i=n.x,a=n.y;return new eL(i,a)}),d.apply(),r}},{key:"spawnLine",value:function(n){if(!this.batchMapLines)return this.spawnLineNormal(n);if(!this.batchObjects.isLineInitialized){var i=this.spawnLineNormal(n);if(!i)return null;this.addObject(i);var a=i.getComponent(hp);return a?(this.batchObjects.isLineInitialized=!0,this.batchObjects.assignMainLineComponent(a),i):null}return this.batchObjects.updateMapLine(n),null}},{key:"spawnLineNormal",value:function(n){var i=Q(this.mapLinePrefab);return _instanceof(i,J)?i.getComponent(hp)?(i.name=sK.MAP_LINE,i.attr({polygon:n}),this.addObject(i),i):(console.warn("MapLine not found"),null):null}},{key:"spawnConnect",value:function(n,i,a){var r=this.getComponentsInChildren(ci).find(function(n){var i=n.getPolygonPoints();if(i.length===a.length){for(var r=0;r<a.length;r++){var p=i[r],d=p.x,y=p.y,m=a[r],g=m.x,b=m.y;if(d!==g||y!==b)return}return!0}}),p=Q(this.connectPrefab);if(!_instanceof(p,J))return null;if(p.setPosition(n,i),this.node.insertChild(p,this.getSiblingIndex(p.name)),r){var d=p.getWorldPosition(),y=d.x,m=d.y,g=r.node.getWorldPosition(),b=g.x,C=g.y,S=p.getComponent(eW);S.connectedBody=r.node.getComponent(eU),S.connectedAnchor=new eL(y-b,m-C),S.enabled=!1,S.enabled=!0}}},{key:"spawnBalloon",value:function(n,i,a){var r=Q(this.balloonPrefab);if(!_instanceof(r,J))return null;r.name=sK.BALLOON,r.setPosition(n,i);var p=r.getComponent(l_);if(!p)return console.warn("Balloon not found"),null;var d=p.connectToDoge(a);return this.addObject(r),d&&this.addObject(d.node),r}},{key:"getRandomDogeToBee",value:function(){if(!this.node.parent)return null;var n=this.node.parent.getComponentsInChildren(he),i=n.length;return n[Math.floor(Math.random()*i)]}},{key:"getNearestDogeToBee",value:function(n){if(!this.node.parent)return null;var i=this.node.parent.getComponentsInChildren(he);return 0===(i=i.filter(function(n){return!n.isCantBeTargeted()})).length?null:(i.sort(function(i,a){return eL.distance(i.node.worldPosition,n.node.worldPosition)-eL.distance(a.node.worldPosition,n.node.worldPosition)}),i[0])}},{key:"getDoges",value:function(n){if(!this.node.parent)return[];var i=this.node.parent.getComponentsInChildren(he);return i.filter(function(i){return i!==n})}}]),l}(ea)).prototype,"dogePrefab",[hy],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),hz=n(hM.prototype,"spiderPrefab",[hf],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),hx=n(hM.prototype,"beePrefab",[hm],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),hU=n(hM.prototype,"beehivePrefab",[hg],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),hH=n(hM.prototype,"bigBeePrefab",[hb],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),hj=n(hM.prototype,"thornPrefab",[hC],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),hV=n(hM.prototype,"thornBallPrefab",[hS],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),hW=n(hM.prototype,"airFanPrefab",[hk],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),hK=n(hM.prototype,"grassPrefab",[hw],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),hq=n(hM.prototype,"balloonPrefab",[hE],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),hJ=n(hM.prototype,"brickPrefab",[hT],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),hY=n(hM.prototype,"arenaPrefab",[hA],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),hX=n(hM.prototype,"woodPrefab",[hR],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),hZ=n(hM.prototype,"connectPrefab",[hB],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),hQ=n(hM.prototype,"mapLinePrefab",[h_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h$=n(hM.prototype,"crossingBeeLinePrefab",[hP],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h0=n(hM.prototype,"batchMapLines",[hL],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),h1=n(hM.prototype,"batchPoisonPool",[hO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),h2=n(hM.prototype,"batchPoisonSurface",[hD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),h3=n(hM.prototype,"batchWaterPool",[hI],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),h4=n(hM.prototype,"batchDangerArea",[hN],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),hG=hM))||hG);K._RF.pop(),K._RF.push({},"97f21hkFElI0YdBDCgAkt9+","Hint",void 0);var pn,pi,pa,po,pr,ps=(0,q.ccclass)("Hint")(h9=function(n){i(o,n);var p=a(o);function o(){var n;r(this,o);for(var i=arguments.length,a=new Array(i),d=0;d<i;d++)a[d]=arguments[d];return(n=p.call.apply(p,[this].concat(a))).hintLine=null,n.hintHand=null,n.isHintShown=!1,n}return y(o,[{key:"showHint",value:function(n,i){this.isHintShown||(this.isHintShown=!0,this.hintLine=this.createHintLine(),this.hintLine.active=!0,this.drawHintLine(this.hintLine,n),i&&this.showHand(n))}},{key:"drawHintLine",value:function(n,i){var a=n.getComponent(ey);if(!a)throw new Error("drawHintLine: Graphics is null");a.clear(),a.moveTo(i[0].x,i[0].y);var r,p=T(i.slice(1));try{for(p.s();!(r=p.n()).done;){var d=r.value;a.lineTo(d.x,d.y)}}catch(n){p.e(n)}finally{p.f()}a.stroke()}},{key:"hideHint",value:function(){this.hintLine&&(this.hintLine.active=!1),this.hintHand&&(e3.stopAllByTarget(this.hintHand),this.hintHand.active=!1)}},{key:"showHand",value:function(n){var i=this;this.hintHand=this.createHintHand(n),L.loadSpriteFrameAsync(s3.IC_HAND_FRAME).then(function(a){if(!a)throw new Error("showHand: SpriteFrame is null");i.addSpriteToHand(a),i.runHandHintAnimation(n)}).catch(function(n){console.error(n),i.removeHintHand()})}},{key:"addSpriteToHand",value:function(n){var i;this.hintHand&&(this.hintHand.addComponent(el).spriteFrame=n,null===(i=this.hintHand.getComponent(Z))||void 0===i||i.setAnchorPoint(.15,.9))}},{key:"runHandHintAnimation",value:function(n){var i=this;if(this.hintHand){for(var a=e0(this.hintHand),r=[],p=1;p<n.length;p++){var d=n[p-1],y=n[p],m=d.x-y.x,g=d.y-y.y,b=Math.sqrt(m*m+g*g),C=e0(this.hintHand).to(b/250,{position:new ep(y.x,y.y)});r.push(C)}var S=e0(this.hintHand).delay(.5).call(function(){i.hintHand&&i.hintHand.setPosition(n[0].x,n[0].y)});r.push(S),a.sequence.apply(a,r).repeatForever().start()}}},{key:"getIsHintShow",value:function(){return this.isHintShown}},{key:"reset",value:function(){this.isHintShown=!1,this.removeHintLine(),this.removeHintHand()}},{key:"createHintLine",value:function(){if(this.hintLine)return this.hintLine;var n=new J,i=n.addComponent(ey);i.lineWidth=10,i.lineCap=ey.LineCap.ROUND,i.lineJoin=ey.LineJoin.ROUND;var a=new Y;return Y.fromHEX(a,"#fc03036d"),i.strokeColor=a,this.node.insertChild(n,0),n}},{key:"createHintHand",value:function(n){if(this.hintHand)return this.hintHand;var i=new J;return i.setPosition(n[0].x,n[0].y),this.hintHand=i,this.node.addChild(i),i}},{key:"removeHintLine",value:function(){this.hintLine&&(this.hintLine.getComponent(ey).clear(),this.hintLine.destroyAllChildren(),this.hintLine.removeAllChildren(),this.hintLine.destroy(),this.hintLine=null)}},{key:"removeHintHand",value:function(){this.hintHand&&(this.hintHand.destroyAllChildren(),this.hintHand.removeAllChildren(),this.hintHand.destroy(),this.hintHand=null)}}]),o}(ea))||h9;K._RF.pop(),K._RF.push({},"33281kEO4dMXLCvmfkrwqQM","CollisionDetectLine",void 0);var pl,pu,pc,ph,pp,pd,pv,py,pf,pm,pg=q.ccclass,pb=q.property,pC=(pn=pg("CollisionDetectLine"),pi=pb(ey),pn((pr=n((po=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=g.call.apply(g,[this].concat(a)),p(n,"graphic",pr,d(n)),n}return y(u,[{key:"onLoad",value:function(){this.graphic=this.getComponent(ey),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"drawFromTo",value:function(n,i){this.graphic.clear(),this.graphic.moveTo(n.x,n.y),this.graphic.lineTo(i.x,i.y),this.graphic.stroke()}}]),u}(lt)).prototype,"graphic",[pi],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pa=po))||pa);K._RF.pop(),K._RF.push({},"00eeawrUitLxLgSANaGHhcv","LineDrawer",void 0);var pS=q.ccclass,pk=q.property,pw=q.executionOrder,pE=(pl=pS("LineDrawer"),pu=pw(3),pc=pk(eJ),ph=pk(eJ),pp=pk(es),pl(pd=pu((py=n((pv=function(n){i(l,n);var m=a(l);function l(){var n;r(this,l);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=m.call.apply(m,[this].concat(a)),p(n,"linePrefab",py,d(n)),p(n,"collisionDetectLinePrefab",pf,d(n)),p(n,"minDistance",pm,d(n)),n.lastUIPos=null,n.currentLine=null,n.collisionDetectLine=null,n.isColliding=!1,n}return y(l,[{key:"beginDraw",value:function(n){this.createLine(),this.createCollisionDetectLine(),this.initLine(),this.lastUIPos=null,this.isColliding=!1,this.draw(n)}},{key:"createLine",value:function(){var n=Q(this.linePrefab);_instanceof(n,J)&&(n.name=sK.DRAW_LINE,n.getComponent(ey)&&(this.node.addChild(n),this.currentLine=n))}},{key:"createCollisionDetectLine",value:function(){if(this.currentLine){var n=Q(this.collisionDetectLinePrefab);if(_instanceof(n,J)){var i=n.getComponent(ey);if(i){var a=this.currentLine.getComponent(ey);if(a){var r=a.lineWidth,p=a.strokeColor;i.strokeColor=new Y(p.r,p.g,p.b,128),i.lineWidth=r,this.node.addChild(n),this.collisionDetectLine=n}}}}}},{key:"initLine",value:function(){var n,i=null===(n=this.currentLine)||void 0===n?void 0:n.getComponent(l4);i&&(i.sleep(),i.init())}},{key:"draw",value:function(n){var i,a,r=this;if(n&&this.currentLine&&this.collisionDetectLine){var p=this.currentLine.getComponent(l4);if(p){var d=this.collisionDetectLine.getComponent(pC);if(d){var y=new ep;null===(i=this.node.parent)||void 0===i||i.inverseTransformPoint(y,new ep(n.x,n.y));var m=new eL(y.x,y.y);if(this.isPointOverlapWithMap(n)){if(this.lastUIPos){var g=this.lastUIPos,b=g.x,C=g.y;this.node.inverseTransformPoint(y,new ep(b,C));var S=new eL(y.x,y.y);if(this.isColliding)d.drawFromTo(S,m);else{var k,w=this.isCurrentLineOverlapWithMap(n,this.lastUIPos);if(w.sort(function(n,i){return null==r.lastUIPos?0:eL.distance(n.point,r.lastUIPos)-eL.distance(i.point,r.lastUIPos)}),!(null===(k=w[0])||void 0===k?void 0:k.point))return;this.isColliding=!0}}}else if(this.lastUIPos&&this.isCurrentLineOverlapWithMap(n,this.lastUIPos).length>0){var E=this.lastUIPos,T=E.x,A=E.y;this.node.inverseTransformPoint(y,new ep(T,A));var R=new eL(y.x,y.y);d.drawFromTo(R,m)}else{if(!this.lastUIPos){this.lastUIPos=n.clone();var B=m.x,_=m.y;p.storePoints(B,_)}var P=this.lastUIPos,L=P.x,O=P.y;null===(a=this.node.parent)||void 0===a||a.inverseTransformPoint(y,new ep(L,O));var D=new eL(y.x,y.y),I=D.x,N=D.y,G=m.x,M=m.y,F=I-G,z=N-M;if(!(F*F+z*z<this.minDistance*this.minDistance)){var x=Math.sqrt(F*F+z*z);this.lastUIPos=n.clone(),p.drawTo(I,N,G,M),p.storePoints(G,M);var U=this.collisionDetectLine.getComponent(ey);return null==U||U.clear(),this.isColliding=!1,x}}}}}}},{key:"isPointOverlapWithMap",value:function(n){return this.getCollision(n).length>0}},{key:"isCurrentLineOverlapWithMap",value:function(n,i){var a=this.getParallelLines(i,n,2),r=a.leftLine,p=a.rightLine,d=e4.instance.raycast(i,n,e5.All).filter(function(n){return!n.collider.sensor}).filter(function(n){var i;return"rope"!==(null===(i=n.collider.node.parent)||void 0===i?void 0:i.name)}),y=e4.instance.raycast(r.p1,r.p2,e5.All).filter(function(n){return!n.collider.sensor}).filter(function(n){var i;return"rope"!==(null===(i=n.collider.node.parent)||void 0===i?void 0:i.name)}),m=e4.instance.raycast(p.p1,p.p2,e5.All).filter(function(n){return!n.collider.sensor}).filter(function(n){var i;return"rope"!==(null===(i=n.collider.node.parent)||void 0===i?void 0:i.name)});return[].concat(B(d),B(y),B(m))}},{key:"endDraw",value:function(){if(this.currentLine&&this.collisionDetectLine){var n=this.currentLine.getComponent(l4);if(n){n.addPhysics(),n.wake();var i=this.collisionDetectLine.getComponent(ey);i?(i.clear(),this.lastUIPos=null,this.isColliding=!1,this.currentLine=null):console.warn("Graphics component not found")}else console.warn("Line component not found")}}},{key:"deActivePhysics",value:function(){var n,i=null===(n=this.currentLine)||void 0===n?void 0:n.getComponent(l4);i&&(i.deActiveColliders(),i.sleep())}},{key:"clearLines",value:function(){this.node.destroyAllChildren(),this.node.removeAllChildren()}},{key:"getParallelLines",value:function(n,i,a){var r=i.x-n.x,p=i.y-n.y,d=eb.Vec2.distance(n,i),y=r/d,m=p/d,g=new eL(n.x-m*a,n.y+y*a),b=new eL(n.x+m*a,n.y-y*a);return{leftLine:{p1:g,p2:new eL(g.x+r,g.y+p)},rightLine:{p1:b,p2:new eL(b.x+r,b.y+p)}}}},{key:"getCollision",value:function(n){return e4.instance.testAABB(new eb.Rect(n.x-2,n.y-2,4,4)).filter(function(n){return!n.sensor}).filter(function(n){var i;return"rope"!==(null===(i=n.node.parent)||void 0===i?void 0:i.name)}).filter(function(i){if(_instanceof(i,eQ)){var a=new ep;return i.node.inverseTransformPoint(a,new ep(n.x,n.y)),e7.polygonCircle(i.points,new eL(a.x,a.y),2)}if(_instanceof(i,eY)){var r=i.node.getWorldPosition(),p=r.x,d=r.y;return e7.circleCircle(new eL(p,d+i.worldPosition.y),i.radius,new eL(n.x,n.y),2)}return!i.sensor})}}]),l}(ea)).prototype,"linePrefab",[pc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),pf=n(pv.prototype,"collisionDetectLinePrefab",[ph],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),pm=n(pv.prototype,"minDistance",[pp],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),pd=pv))||pd)||pd);K._RF.pop(),K._RF.push({},"463cfEelRVL4KYgc4n5FJNz","Map",void 0);var pT,pA=[{id:1,map:1,type:1},{id:2,map:2,type:1},{id:3,map:3,type:1},{id:4,map:8,type:1},{id:5,map:9,type:1},{id:6,map:16,type:1},{id:7,map:4,type:1},{id:8,map:7,type:1},{id:9,map:6,type:1},{id:10,map:18,type:1},{id:11,map:10,type:2},{id:12,map:11,type:2},{id:13,map:12,type:2},{id:14,map:13,type:2},{id:15,map:14,type:2},{id:16,map:15,type:2},{id:17,map:5,type:2},{id:18,map:17,type:2},{id:19,map:19,type:2},{id:20,map:20,type:2},{id:21,map:21,type:3},{id:22,map:22,type:3},{id:23,map:23,type:3},{id:24,map:24,type:3},{id:25,map:25,type:3},{id:26,map:26,type:3},{id:27,map:27,type:3},{id:28,map:28,type:3},{id:29,map:29,type:3},{id:30,map:30,type:3},{id:31,map:31,type:4},{id:32,map:32,type:4},{id:33,map:33,type:4},{id:34,map:34,type:4},{id:35,map:35,type:4},{id:36,map:36,type:4},{id:37,map:37,type:4},{id:38,map:38,type:4},{id:39,map:39,type:4},{id:40,map:40,type:4},{id:41,map:41,type:5},{id:42,map:42,type:5},{id:43,map:43,type:5},{id:44,map:44,type:5},{id:45,map:45,type:5},{id:46,map:46,type:5},{id:47,map:47,type:5},{id:48,map:48,type:5},{id:49,map:49,type:5},{id:50,map:50,type:5},{id:51,map:51,type:6},{id:52,map:52,type:6},{id:53,map:53,type:6},{id:54,map:54,type:6},{id:55,map:55,type:6},{id:56,map:56,type:6},{id:57,map:57,type:6},{id:58,map:58,type:6},{id:59,map:59,type:6},{id:60,map:60,type:6},{id:61,map:61,type:7},{id:62,map:62,type:7},{id:63,map:63,type:7},{id:64,map:64,type:7},{id:65,map:65,type:7},{id:66,map:66,type:7},{id:67,map:67,type:7},{id:68,map:68,type:7},{id:69,map:69,type:7},{id:70,map:70,type:7},{id:71,map:71,type:8},{id:72,map:72,type:8},{id:73,map:73,type:8},{id:74,map:74,type:8},{id:75,map:75,type:8},{id:76,map:76,type:8},{id:77,map:77,type:8},{id:78,map:78,type:8},{id:79,map:79,type:8},{id:80,map:80,type:8},{id:81,map:81,type:9},{id:82,map:82,type:9},{id:83,map:83,type:9},{id:84,map:84,type:9},{id:85,map:85,type:9},{id:86,map:86,type:9},{id:87,map:87,type:9},{id:88,map:88,type:9},{id:89,map:89,type:9},{id:90,map:90,type:9},{id:91,map:91,type:10},{id:92,map:92,type:10},{id:93,map:93,type:10},{id:94,map:94,type:10},{id:95,map:95,type:10},{id:96,map:96,type:10},{id:97,map:97,type:10},{id:98,map:98,type:10},{id:99,map:99,type:10},{id:100,map:100,type:10},{id:101,map:101,type:11},{id:102,map:102,type:11},{id:103,map:103,type:11},{id:104,map:104,type:11},{id:105,map:105,type:11},{id:106,map:106,type:11},{id:107,map:107,type:11},{id:108,map:108,type:11},{id:109,map:109,type:11},{id:110,map:110,type:11},{id:111,map:111,type:12},{id:112,map:112,type:12},{id:113,map:113,type:12},{id:114,map:114,type:12},{id:115,map:115,type:12},{id:116,map:116,type:12},{id:117,map:117,type:12},{id:118,map:118,type:12},{id:119,map:119,type:12},{id:120,map:120,type:12},{id:121,map:121,type:13},{id:122,map:122,type:13},{id:123,map:123,type:13},{id:124,map:124,type:13},{id:125,map:125,type:13},{id:126,map:126,type:13},{id:127,map:127,type:13},{id:128,map:128,type:13},{id:129,map:129,type:13},{id:130,map:130,type:13},{id:131,map:131,type:14},{id:132,map:132,type:14},{id:133,map:133,type:14},{id:134,map:134,type:14},{id:135,map:135,type:14},{id:136,map:136,type:14},{id:137,map:137,type:14},{id:138,map:138,type:14},{id:139,map:139,type:14},{id:140,map:140,type:14},{id:141,map:141,type:15},{id:142,map:142,type:15},{id:143,map:143,type:15},{id:144,map:144,type:15},{id:145,map:145,type:15},{id:146,map:146,type:15},{id:147,map:147,type:15},{id:148,map:148,type:15},{id:149,map:149,type:15},{id:150,map:150,type:15},{id:151,map:184,type:16},{id:152,map:185,type:16},{id:153,map:186,type:16},{id:154,map:187,type:16},{id:155,map:188,type:16},{id:156,map:189,type:16},{id:157,map:190,type:16},{id:158,map:191,type:16},{id:159,map:192,type:16},{id:160,map:193,type:16},{id:161,map:194,type:17},{id:162,map:195,type:17},{id:163,map:196,type:17},{id:164,map:197,type:17},{id:165,map:198,type:17},{id:166,map:199,type:17},{id:167,map:200,type:17},{id:168,map:167,type:17},{id:169,map:168,type:17},{id:170,map:169,type:17},{id:171,map:170,type:18},{id:172,map:171,type:18},{id:173,map:172,type:18},{id:174,map:173,type:18},{id:175,map:174,type:18},{id:176,map:175,type:18},{id:177,map:176,type:18},{id:178,map:177,type:18},{id:179,map:178,type:18},{id:180,map:179,type:18},{id:181,map:180,type:19},{id:182,map:181,type:19},{id:183,map:182,type:19},{id:184,map:183,type:19},{id:185,map:151,type:19},{id:186,map:152,type:19},{id:187,map:153,type:19},{id:188,map:154,type:19},{id:189,map:155,type:19},{id:190,map:156,type:19},{id:191,map:157,type:20},{id:192,map:158,type:20},{id:193,map:159,type:20},{id:194,map:160,type:20},{id:195,map:161,type:20},{id:196,map:162,type:20},{id:197,map:163,type:20},{id:198,map:164,type:20},{id:199,map:165,type:20},{id:200,map:166,type:20},{id:201,map:201,type:21},{id:202,map:202,type:21},{id:203,map:203,type:21},{id:204,map:204,type:21},{id:205,map:205,type:21},{id:206,map:206,type:21},{id:207,map:207,type:21},{id:208,map:208,type:21},{id:209,map:209,type:21},{id:210,map:210,type:21},{id:211,map:211,type:22},{id:212,map:212,type:22},{id:213,map:213,type:22},{id:214,map:214,type:22},{id:215,map:215,type:22},{id:216,map:216,type:22},{id:217,map:217,type:22},{id:218,map:218,type:22},{id:219,map:219,type:22},{id:220,map:220,type:22},{id:221,map:221,type:23},{id:222,map:222,type:23},{id:223,map:223,type:23},{id:224,map:224,type:23},{id:225,map:225,type:23},{id:226,map:226,type:23},{id:227,map:227,type:23},{id:228,map:228,type:23},{id:229,map:229,type:23},{id:230,map:230,type:23},{id:231,map:231,type:24},{id:232,map:232,type:24},{id:233,map:233,type:24},{id:234,map:234,type:24},{id:235,map:235,type:24},{id:236,map:236,type:24},{id:237,map:237,type:24},{id:238,map:238,type:24},{id:239,map:239,type:24},{id:240,map:240,type:24},{id:241,map:241,type:25},{id:242,map:242,type:25},{id:243,map:243,type:25},{id:244,map:244,type:25},{id:245,map:245,type:25},{id:246,map:246,type:25},{id:247,map:247,type:25},{id:248,map:248,type:25},{id:249,map:249,type:25},{id:250,map:250,type:25},{id:251,map:251,type:26},{id:252,map:252,type:26},{id:253,map:253,type:26},{id:254,map:254,type:26},{id:255,map:255,type:26},{id:256,map:256,type:26},{id:257,map:257,type:26},{id:258,map:258,type:26},{id:259,map:259,type:26},{id:260,map:260,type:26},{id:261,map:261,type:27},{id:262,map:262,type:27},{id:263,map:263,type:27},{id:264,map:264,type:27},{id:265,map:265,type:27},{id:266,map:266,type:27},{id:267,map:267,type:27},{id:268,map:268,type:27},{id:269,map:269,type:27},{id:270,map:270,type:27},{id:271,map:271,type:28},{id:272,map:272,type:28},{id:273,map:273,type:28},{id:274,map:274,type:28},{id:275,map:275,type:28},{id:276,map:276,type:28},{id:277,map:277,type:28},{id:278,map:278,type:28},{id:279,map:279,type:28},{id:280,map:280,type:28},{id:281,map:281,type:29},{id:282,map:282,type:29},{id:283,map:283,type:29},{id:284,map:284,type:29},{id:285,map:285,type:29},{id:286,map:286,type:29},{id:287,map:287,type:29},{id:288,map:288,type:29},{id:289,map:289,type:29},{id:290,map:290,type:29},{id:291,map:291,type:30},{id:292,map:292,type:30},{id:293,map:293,type:30},{id:294,map:294,type:30},{id:295,map:295,type:30},{id:296,map:296,type:30},{id:297,map:297,type:30},{id:298,map:298,type:30},{id:299,map:299,type:30},{id:300,map:300,type:30},{id:301,map:301,type:31},{id:302,map:302,type:31},{id:303,map:303,type:31},{id:304,map:304,type:31},{id:305,map:305,type:31},{id:306,map:306,type:31},{id:307,map:307,type:31},{id:308,map:308,type:31},{id:309,map:309,type:31},{id:310,map:310,type:31},{id:311,map:311,type:32},{id:312,map:312,type:32},{id:313,map:313,type:32},{id:314,map:314,type:32},{id:315,map:315,type:32},{id:316,map:316,type:32},{id:317,map:317,type:32},{id:318,map:318,type:32},{id:319,map:319,type:32},{id:320,map:320,type:32},{id:321,map:321,type:33},{id:322,map:322,type:33},{id:323,map:323,type:33},{id:324,map:324,type:33},{id:325,map:325,type:33}];K._RF.pop(),K._RF.push({},"45df2RUUZZNhaXqOADOV0HC","MapLoader",void 0);var pR,pB=(0,q.ccclass)("MapLoader")(pT=function(n){i(o,n);var p=a(o);function o(){return r(this,o),p.apply(this,arguments)}return y(o,[{key:"paddingZero",value:function(n,i){return Array(i-n.length).fill("0").join("")+n}},{key:"getMapByLevel",value:function(n){var i=pA.find(function(i){return i.id===n});return i?i.map:1}},{key:"preloadLevel",value:function(n){var i=this.getMapByLevel(n),a=this.paddingZero(i.toString(),3);eX.preload("".concat(s3.MAP_JSON_PREFIX).concat(a),e6)}},{key:"loadLevel",value:function(n,i){var a=this.getMapByLevel(n),r=this.paddingZero(a.toString(),3);eX.load("".concat(s3.MAP_JSON_PREFIX).concat(r),e6,i)}},{key:"isLevelAlreadyLoaded",value:function(n){var i=this.getMapByLevel(n),a=this.paddingZero(i.toString(),3);return null!==eX.getInfoWithPath("".concat(s3.MAP_JSON_PREFIX).concat(a))}}]),o}(ea))||pT;K._RF.pop(),K._RF.push({},"8d3c7nuQGRNgpZcqAOCJY6O","InkCapacityController",void 0);var p_,pP=(0,q.ccclass)("InkCapacityController")(pR=function(n){i(o,n);var p=a(o);function o(){var n;r(this,o);for(var i=arguments.length,a=new Array(i),d=0;d<i;d++)a[d]=arguments[d];return(n=p.call.apply(p,[this].concat(a))).maxInkLevel=0,n.currentInkLevel=0,n}return y(o,[{key:"init",value:function(n){var i=this.getDrawLength(n);this.maxInkLevel=i,this.currentInkLevel=i}},{key:"getCurrentInkLevel",value:function(){return Math.floor(this.currentInkLevel)}},{key:"removeInkLevel",value:function(n){var i=this.currentInkLevel-n;this.setInkLevel(i)}},{key:"setInkLevel",value:function(n){this.currentInkLevel=n,this.currentInkLevel<0&&(this.currentInkLevel=0),this.currentInkLevel>this.maxInkLevel&&(this.currentInkLevel=this.maxInkLevel)}},{key:"isInkEmpty",value:function(){return this.currentInkLevel<=0}},{key:"getInkLevelPercentage",value:function(){return this.currentInkLevel/this.maxInkLevel*100}},{key:"getStarRating",value:function(n){var i=arguments.length>0&&void 0!==n?n:3,a=this.maxInkLevel/i,r=Math.ceil(this.getCurrentInkLevel()/a);return 0===r?1:r}},{key:"getDrawLength",value:function(n){for(var i=0,a=1;a<n.length;a++){var r=n[a-1],p=n[a],d=r.x-p.x,y=r.y-p.y;i+=Math.sqrt(d*d+y*y)}return 3*i}}]),o}(ea))||pR;K._RF.pop(),K._RF.push({},"014cbNey8JEV4aPhDm9R5W4","InputController",void 0);var pL=(0,q.ccclass)("InputController")(p_=function(n){i(o,n);var p=a(o);function o(){var n;r(this,o);for(var i=arguments.length,a=new Array(i),d=0;d<i;d++)a[d]=arguments[d];return(n=p.call.apply(p,[this].concat(a))).pointerDownOutSideCanvas=!1,n.handleElementPointerDown=function(){n.pointerDownOutSideCanvas=!0},n.handleElementPointerUp=function(i){n.onTouchEnd(),n.pointerDownOutSideCanvas=!1},n.onTouchStart=function(i){n.node.scene.emit(lP.GAME_START,{pointer:i})},n.onTouchMove=function(i){if(n.pointerDownOutSideCanvas)return n.node.scene.emit(lP.GAME_START,{pointer:i}),void(n.pointerDownOutSideCanvas=!1);n.node.scene.emit(lP.DRAWING,{pointer:i})},n.onTouchEnd=function(i){n.node.scene.emit(lP.BEE_ATTACK)},n}return y(o,[{key:"onLoad",value:function(){this.listenInputEvents()}},{key:"listenInputEvents",value:function(){em.os===em.OS.WINDOWS||em.os===em.OS.OSX?(document.addEventListener("pointerup",this.handleElementPointerUp),document.addEventListener("pointerdown",this.handleElementPointerDown),this.node.on(J.EventType.MOUSE_DOWN,this.onTouchStart),this.node.on(J.EventType.MOUSE_MOVE,this.onTouchMove),this.node.on(J.EventType.MOUSE_UP,this.onTouchEnd)):(this.node.on(J.EventType.TOUCH_START,this.onTouchStart),this.node.on(J.EventType.TOUCH_MOVE,this.onTouchMove),this.node.on(J.EventType.TOUCH_CANCEL,this.onTouchEnd),this.node.on(J.EventType.TOUCH_END,this.onTouchEnd))}},{key:"onDestroy",value:function(){em.os===em.OS.WINDOWS||em.os===em.OS.OSX?(document.removeEventListener("pointerup",this.handleElementPointerUp),document.removeEventListener("pointerdown",this.handleElementPointerDown),this.node.off(J.EventType.MOUSE_DOWN,this.onTouchStart),this.node.off(J.EventType.MOUSE_MOVE,this.onTouchMove),this.node.off(J.EventType.MOUSE_UP,this.onTouchEnd)):(this.node.off(J.EventType.TOUCH_START,this.onTouchStart),this.node.off(J.EventType.TOUCH_MOVE,this.onTouchMove),this.node.off(J.EventType.TOUCH_CANCEL,this.onTouchEnd),this.node.off(J.EventType.TOUCH_END,this.onTouchEnd))}}]),o}(ea))||p_;K._RF.pop(),K._RF.push({},"e6116mseMNPD6VcLUtkvez6","BaseState",void 0);var pO=function(){function e(n){if(r(this,e),this.game=null,this.data={},this.game=n.node.getComponent(yw),!this.game)throw new Error("Gameplay component not found");this.manager=n,this.updateStateData(),this.logDebug()}return y(e,[{key:"logDebug",value:function(){var n=this.constructor.name;console.info("[STATE] ".concat(n),this.data)}},{key:"updateStateData",value:function(){if(this.game){var n=this.game.getGameData();n&&(this.data=n)}}},{key:"updateGameData",value:function(n){var i;null===(i=this.game)||void 0===i||i.setGameData(n)}}]),e}();K._RF.pop(),K._RF.push({},"a79a7LT0s5BuZrk5mvYsyKr","AttackingState",void 0);var pD=function(n){i(o,n);var p=a(o);function o(n){var i;return r(this,o),(i=p.call(this,n)).stopHint(),i.stopDrawing(),i.wakeUpObjects(),i.spawnEnemies(),i.startCountdown(),k.turnDownMusic(),i}return y(o,[{key:"load",value:function(){var n=this.manager.createLoadingState();this.manager.change(n)}},{key:"initialize",value:function(){k.stopSound(A.BEE_FLYING);var n=this.manager.createInitializeState();this.manager.change(n)}},{key:"ready",value:function(){}},{key:"draw",value:function(){}},{key:"attack",value:function(){}},{key:"escape",value:function(){var n=this.manager.createEscapeState();this.manager.change(n)}},{key:"death",value:function(){var n=this.manager.createDeathState();this.manager.change(n)}},{key:"finish",value:function(){}},{key:"update",value:function(){}},{key:"stopDrawing",value:function(){var n;null===(n=this.game)||void 0===n||null===(n=n.lineDrawer)||void 0===n||n.endDraw()}},{key:"stopHint",value:function(){var n;null===(n=this.game)||void 0===n||null===(n=n.hint)||void 0===n||n.hideHint()}},{key:"wakeUpObjects",value:function(){var n;null===(n=this.game)||void 0===n||null===(n=n.gameObjects)||void 0===n||n.wakeUpObjects()}},{key:"spawnEnemies",value:function(){this.game&&this.game.gameObjects&&(this.game.gameObjects.spawnBees(),this.game.gameObjects.reviveBigBees(),k.playSound(A.BEE_FLYING),k.playSound(A.END_DRAW))}},{key:"startCountdown",value:function(){var n;null===(n=this.game)||void 0===n||n.uiManager.startCountdown()}}]),o}(pO);K._RF.pop(),K._RF.push({},"17461foCjdJ276bG2jcxA06","DeathState",void 0);var pI=globalThis.game.analytics,pN=function(n){i(o,n);var p=a(o);function o(n){var i,a,d;return r(this,o),(d=p.call(this,n)).processCrazyGamesEvent(),d.disableUI(),k.stopAllSounds(),d.vibrateDevice(),d.pauseCountdown(),d.logLevelFailAnalytics(),null===(i=d.game)||void 0===i||i.scheduleOnce(function(){d.stopDogesLooking(),d.showUncompletedMark(),k.playSound(A.LEVEL_FAIL,{volume:.3})},.5),null===(a=d.game)||void 0===a||a.scheduleOnce(function(){d.sleepObjects(),d.showLoseScreen(),d.manager.finish()},1.8),d}return y(o,[{key:"processCrazyGamesEvent",value:function(){"gameplayStop"in GameSDK.extra&&GameSDK.extra.gameplayStop()}},{key:"load",value:function(){}},{key:"initialize",value:function(){}},{key:"ready",value:function(){}},{key:"draw",value:function(){}},{key:"attack",value:function(){}},{key:"escape",value:function(){}},{key:"death",value:function(){}},{key:"finish",value:function(){var n=this.manager.createFinishState();this.manager.change(n)}},{key:"update",value:function(){}},{key:"disableUI",value:function(){var n,i;null===(n=this.game)||void 0===n||n.uiManager.disableUI(),null===(i=this.game)||void 0===i||i.hint.reset()}},{key:"sleepObjects",value:function(){var n,i;null===(n=this.game)||void 0===n||null===(n=n.lineDrawer)||void 0===n||n.deActivePhysics(),null===(i=this.game)||void 0===i||null===(i=i.gameObjects)||void 0===i||i.sleepObjects()}},{key:"pauseCountdown",value:function(){var n;null===(n=this.game)||void 0===n||n.uiManager.pauseCountdown()}},{key:"stopDogesLooking",value:function(){var n;if(null!==(n=this.game)&&void 0!==n&&n.gameObjects){var i,a=this.game.gameObjects.getComponentsInChildren(he),r=T(a);try{for(r.s();!(i=r.n()).done;){var p,d=i.value;null===(p=d.eyes)||void 0===p||p.stopLook(),d.setEnable(!1)}}catch(n){r.e(n)}finally{r.f()}}}},{key:"vibrateDevice",value:function(){var n;null===(n=e2("Vibrate"))||void 0===n||null===(n=n.getComponent(sx))||void 0===n||n.vibrate(500)}},{key:"showUncompletedMark",value:function(){var n;null===(n=this.game)||void 0===n||n.uiManager.showUncompletedMark()}},{key:"showLoseScreen",value:function(){var n=this.data.level;O.openScreen(D.LOSE_SCREEN,{level:n})}},{key:"logLevelFailAnalytics",value:function(){if(this.game){var n=this.game.inkCapacityController;if(n){var i=this.data.level,a=void 0===i?0:i,r=n.getStarRating();console.info("logLevelFailAnalytics",a,r),pI.levelFail(a,r)}}}}]),o}(pO);K._RF.pop(),K._RF.push({},"71778iMCmVDQKkpW1Ag0dZz","DrawingState",void 0);var pG=function(n){i(o,n);var p=a(o);function o(n){var i;return r(this,o),(i=p.call(this,n)).dist=0,i.isEmptyDraw=!1,i.initDrawer(),i}return y(o,[{key:"load",value:function(){}},{key:"initialize",value:function(){var n=this.manager.createInitializeState();this.manager.change(n)}},{key:"ready",value:function(){var n=this.manager.createReadyState();this.manager.change(n)}},{key:"draw",value:function(){}},{key:"attack",value:function(){var n,i,a;if(100===(null!==(n=null===(i=this.game)||void 0===i?void 0:i.inkCapacityController.getInkLevelPercentage())&&void 0!==n?n:0))return null===(a=this.game)||void 0===a||a.lineDrawer.endDraw(),void(this.isEmptyDraw=!0);var r=this.manager.createAttackingState();this.manager.change(r)}},{key:"escape",value:function(){}},{key:"death",value:function(){}},{key:"finish",value:function(){}},{key:"update",value:function(){var n;this.isInkEmpty()?null===(n=this.game)||void 0===n||n.node.scene.emit(lP.BEE_ATTACK):this.isEmptyDraw?this.manager.ready():(this.updateStateData(),this.drawLines(),this.updateInkLevel(),this.updateProgressBar())}},{key:"initDrawer",value:function(){var n;if(null!==(n=this.game)&&void 0!==n&&n.lineDrawer){var i=this.data.pointer.getUILocation();this.game.lineDrawer.beginDraw(i),k.playSound(A.BUTTON_CLICK)}}},{key:"isInkEmpty",value:function(){return!!this.game&&this.game.inkCapacityController.isInkEmpty()}},{key:"drawLines",value:function(){var n,i;if(null!==(n=this.game)&&void 0!==n&&n.lineDrawer){var a=this.data.pointer.getUILocation();if(this.dist=null!==(i=this.game.lineDrawer.draw(a))&&void 0!==i?i:0,this.dist>0){var r=A.TOUCH_START;k.playSound(r,{volume:.8})}}}},{key:"updateInkLevel",value:function(){var n;null===(n=this.game)||void 0===n||n.inkCapacityController.removeInkLevel(this.dist)}},{key:"updateProgressBar",value:function(){if(this.game){var n=this.game.inkCapacityController.getStarRating();this.game.uiManager.setProgressStars(n);var i=this.game.inkCapacityController.getInkLevelPercentage();this.game.uiManager.setProgressBarPercentage(i)}}}]),o}(pO);K._RF.pop(),K._RF.push({},"d600e+7dHhGOYCGrcOjxVcl","EscapeState",void 0);var pM=globalThis.game,pF=pM.player,pz=pM.analytics,px=function(n){i(o,n);var p=a(o);function o(n){var i,a;return r(this,o),(a=p.call(this,n)).processCrazyGamesEvent(),a.disableUI(),a.stopAllSounds(),a.vibrateDevice(),a.makeDogesSmile(),a.pauseCountdown(),a.showCompletedMark(),a.updatePlayerProgress(),a.stopBeeBehavior(),a.logLevelCompleteAnalytics(),null===(i=a.game)||void 0===i||i.scheduleOnce(function(){a.sleepObjects(),a.showWiningScreen(),a.manager.finish()},.5),k.playSound(A.LEVEL_PASS),k.playSound(A.BEE_FLYING),a}return y(o,[{key:"processCrazyGamesEvent",value:function(){"gameplayStop"in GameSDK.extra&&GameSDK.extra.gameplayStop()}},{key:"load",value:function(){}},{key:"initialize",value:function(){}},{key:"ready",value:function(){}},{key:"draw",value:function(){}},{key:"attack",value:function(){}},{key:"escape",value:function(){}},{key:"death",value:function(){}},{key:"finish",value:function(){var n=this.manager.createFinishState();this.manager.change(n)}},{key:"update",value:function(){}},{key:"disableUI",value:function(){var n,i;null===(n=this.game)||void 0===n||n.uiManager.disableUI(),null===(i=this.game)||void 0===i||i.hint.reset()}},{key:"stopBeeBehavior",value:function(){var n;null===(n=this.game)||void 0===n||null===(n=n.gameObjects)||void 0===n||n.stopBeeBehavior()}},{key:"sleepObjects",value:function(){var n,i;null===(n=this.game)||void 0===n||null===(n=n.lineDrawer)||void 0===n||n.deActivePhysics(),null===(i=this.game)||void 0===i||null===(i=i.gameObjects)||void 0===i||i.sleepObjects()}},{key:"stopAllSounds",value:function(){k.stopAllSounds()}},{key:"makeDogesSmile",value:function(){var n;if(null!==(n=this.game)&&void 0!==n&&n.gameObjects){var i,a=this.game.gameObjects.getComponentsInChildren(he),r=T(a);try{for(r.s();!(i=r.n()).done;){var p=i.value;p.smile(),p.setEnable(!1)}}catch(n){r.e(n)}finally{r.f()}}}},{key:"vibrateDevice",value:function(){var n;null===(n=e2("Vibrate"))||void 0===n||null===(n=n.getComponent(sx))||void 0===n||n.vibrate(500)}},{key:"pauseCountdown",value:function(){var n;null===(n=this.game)||void 0===n||n.uiManager.pauseCountdown()}},{key:"showCompletedMark",value:function(){var n;null===(n=this.game)||void 0===n||n.uiManager.showCompletedMark()}},{key:"updatePlayerProgress",value:function(){if(this.game){var n=this.data.level;if(n){var i=this.game.inkCapacityController.getStarRating(),a=pF.getGameData();if(a&&a.levelProgress){var r=a.levelProgress[n]||0,p=a.totalLevel,d=I({},a);n>=p&&(d.passAllLevels=!0),n<a.level&&(d.level=n+1);var y=Math.max(r,i);d.levelProgress[n]=y,pF.setGameData(d)}}}}},{key:"showWiningScreen",value:function(){if(this.game){var n=this.data.level,i=this.game.inkCapacityController.getStarRating();O.openScreen(D.WINNING_SCREEN,{level:n,stars:i})}}},{key:"logLevelCompleteAnalytics",value:function(){if(this.game){var n=this.game.inkCapacityController;if(n){var i=this.data.level,a=void 0===i?0:i,r=n.getStarRating();console.info("logLevelCompleteAnalytics",a,r),pz.levelComplete(a,r)}}}}]),o}(pO);K._RF.pop(),K._RF.push({},"9046etpNclOb7EjoNvbF/aZ","MatchUtils",void 0);var pU=GameCore,pH=pU.Match,pj=pU.Utils,pV=pj.Object,pW=pj.Valid,pK=pj.String,pq=globalThis.game,pJ=pq.match,pY=pq.player,pX=pq.leaderboard,pZ=function(){function e(){r(this,e)}var n,i,a,p,d,m,g,b,C,S,k,w,E,T,A,R,B,_;return y(e,[{key:"processStartSingleModeAsync",value:(_=N(function(){var n;return _ts_generator(this,function(i){switch(i.label){case 0:n=pY.getPlayerId();return[4,pJ.single.start.processAsync({playerId:n})];case 1:i.sent();return[2]}})}),function(){return _.apply(this,arguments)})},{key:"processFinishSingleModeAsync",value:(B=N(function(){return _ts_generator(this,function(n){switch(n.label){case 0:return[4,pJ.single.finish.processAsync()];case 1:n.sent();return[2]}})}),function(){return B.apply(this,arguments)})},{key:"processStartTournamentModeAsync",value:(R=N(function(){var n,i;return _ts_generator(this,function(a){switch(a.label){case 0:n=pY.getPlayerId(),i=GameSDK.context.getID();return[4,pJ.tournament.continue.processAsync({playerId:n,contextId:i})];case 1:a.sent();return[2]}})}),function(){return R.apply(this,arguments)})},{key:"processFinishTournamentModeAsync",value:(A=N(function(){var n,i;return _ts_generator(this,function(a){switch(a.label){case 0:n=pY.getPlayerId(),i=pY.getBestScore();return[4,pJ.tournament.finish.processAsync({playerId:n,bestScore:i})];case 1:a.sent();return[2]}})}),function(){return A.apply(this,arguments)})},{key:"processStartChallengeModeAsync",value:(T=N(function(){var n,i,a;return _ts_generator(this,function(r){switch(r.label){case 0:r.trys.push([0,2,,7]);return[4,this.processContinueChallengeAsync()];case 1:r.sent();return[3,7];case 2:n=r.sent();if(!pV.hasOwn(n,"name")||pW.isString(n.name))throw n;i="PlayerHasFinishedMatch"===n.name;if(!i)return[3,4];return[4,this.processChallengeNewOpponentAsync()];case 3:i=r.sent();r.label=4;case 4:a="PlayerNotJoinInMatch"===n.name;if(!a)return[3,6];return[4,this.processJoinChallengeAsync()];case 5:a=r.sent();r.label=6;case 6:return[3,7];case 7:return[2]}})}),function(){return T.apply(this,arguments)})},{key:"processFinishChallengeModeAsync",value:(E=N(function(){return _ts_generator(this,function(n){switch(n.label){case 0:return[4,pJ.challenge.finish.processAsync()];case 1:n.sent();return[2]}})}),function(){return E.apply(this,arguments)})},{key:"processContinueChallengeAsync",value:(w=N(function(){var n,i,a,r,p,d;return _ts_generator(this,function(y){switch(y.label){case 0:n=this.getMatchState(),i=n.id,a=n.customData,r=a.playerId,p=a.opponentId;if(!pW.isString(i))throw new Error("Invalid match id");if(!pW.isString(r))throw new Error("Invalid player id");if(!pW.isString(p))throw new Error("Invalid opponent id");d=GameSDK.context.getID();if(!d)throw new Error("Cannot get contextId");return[4,pJ.challenge.continue.processAsync({matchId:i,contextId:d,playerId:r,opponentId:p})];case 1:y.sent();return[2]}})}),function(){return w.apply(this,arguments)})},{key:"processChallengeNewOpponentAsync",value:(k=N(function(){var n,i,a,r;return _ts_generator(this,function(p){switch(p.label){case 0:n=pY.getConnectedPlayerIds(100,0),i=Math.floor(Math.random()*n.length),a=pY.getPlayerId(),r=n[i];return[4,pJ.challenge.friend.processAsync({playerId:a,opponentId:r})];case 1:p.sent();return[2]}})}),function(){return k.apply(this,arguments)})},{key:"processJoinChallengeAsync",value:(S=N(function(){var n,i,a,r,p;return _ts_generator(this,function(d){switch(d.label){case 0:n=this.getMatchState(),i=n.id,a=n.customData,r=a.playerId,p=a.opponentId;if(!pW.isString(i))throw new Error("Invalid match id");if(!pW.isString(r))throw new Error("Invalid player id");if(!pW.isString(p))throw new Error("Invalid opponent id");return[4,pJ.challenge.join.processAsync({matchId:i,playerId:r,opponentId:p})];case 1:d.sent();return[2]}})}),function(){return S.apply(this,arguments)})},{key:"getMatchState",value:function(){var n=pJ.getMatchState();if(!n)throw new Error("Match state not found");return n}},{key:"getMatchMode",value:function(){var n=this.getMatchState();return pW.isString(n.mode)?n.mode:null}},{key:"getTournamentsAsync",value:(C=N(function(){var n;return _ts_generator(this,function(i){switch(i.label){case 0:i.trys.push([0,2,,3]);return[4,GameSDK.tournament.getTournamentsAsync()];case 1:return[2,i.sent()];case 2:n=i.sent();return[2,(console.error(n),[])];case 3:return[2]}})}),function(){return C.apply(this,arguments)})},{key:"createTournamentPayload",value:function(){var n,i,a=pK.generateObjectId(),r=pY.getPlayerId(),p=this.getMatchState().profiles;return{score:null!==(n=null===(i=(void 0===p?{}:p)[r])||void 0===i?void 0:i.score)&&void 0!==n?n:0,playerId:r,mode:pH.Modes.TOURNAMENT,name:this.createTournamentName(),leaderboardId:a,payload:{playerId:r,leaderboardId:a}}}},{key:"createTournamentName",value:function(){var n=pY.getPlayer().name,i=void 0===n?null:n;if(i){var a=i.substring(0,7),r="".concat(a.split(" ")[0]||a,"'s Tournament"),p=pK.removeDiacritics(r);return"".concat(p)}return"Tournament"}}],[{key:"inst",get:function(){return this._instance||(this._instance=new e),this._instance}},{key:"startMatchAsync",value:(b=N(function(n){var i,a,r;return _ts_generator(this,function(p){switch(p.label){case 0:p.trys.push([0,10,,11]);i=null!=n?n:this.inst.getMatchMode(),a=pH.Modes;switch(i){case a.SINGLE:return[3,1];case a.TOURNAMENT:return[3,3];case a.CHALLENGE_FRIEND:return[3,5]}return[3,7];case 1:return[4,this.inst.processStartSingleModeAsync()];case 2:p.sent();return[3,9];case 3:return[4,this.inst.processStartTournamentModeAsync()];case 4:p.sent();return[3,9];case 5:return[4,this.inst.processStartChallengeModeAsync()];case 6:p.sent();return[3,9];case 7:return[4,this.inst.processStartSingleModeAsync()];case 8:p.sent();p.label=9;case 9:return[3,11];case 10:r=p.sent();console.warn("startMatchAsync",r);return[3,11];case 11:return[2]}})}),function(n){return b.apply(this,arguments)})},{key:"setProfileMatchDataAsync",value:(g=N(function(n){var i;return _ts_generator(this,function(a){switch(a.label){case 0:a.trys.push([0,2,,3]);return[4,pJ.handler.setProfileData(n)];case 1:a.sent();return[3,3];case 2:i=a.sent();console.warn("setProfileMatchDataAsync",i);return[3,3];case 3:return[2]}})}),function(n){return g.apply(this,arguments)})},{key:"setMatchCustomDataAsync",value:(m=N(function(n){var i;return _ts_generator(this,function(a){switch(a.label){case 0:a.trys.push([0,2,,3]);return[4,pJ.handler.setMatchCustomData(n)];case 1:a.sent();return[3,3];case 2:i=a.sent();console.warn("setMatchCustomDataAsync",i);return[3,3];case 3:return[2]}})}),function(n){return m.apply(this,arguments)})},{key:"setLeaderboardScoreAsync",value:(d=N(function(n){var i;return _ts_generator(this,function(a){switch(a.label){case 0:a.trys.push([0,2,,3]);return[4,pJ.handler.setLeaderboardScore(n)];case 1:a.sent();return[3,3];case 2:i=a.sent();console.warn("setLeaderboardScoreAsync",i);return[3,3];case 3:return[2]}})}),function(n){return d.apply(this,arguments)})},{key:"finishMatchAsync",value:(p=N(function(){var n,i,a;return _ts_generator(this,function(r){switch(r.label){case 0:r.trys.push([0,10,,11]);n=this.inst.getMatchMode(),i=GameCore.Match.Modes;switch(n){case i.SINGLE:return[3,1];case i.TOURNAMENT:return[3,3];case i.CHALLENGE_FRIEND:return[3,5]}return[3,7];case 1:return[4,this.inst.processFinishSingleModeAsync()];case 2:r.sent();return[3,9];case 3:return[4,this.inst.processFinishTournamentModeAsync()];case 4:r.sent();return[3,9];case 5:return[4,this.inst.processFinishChallengeModeAsync()];case 6:r.sent();return[3,9];case 7:return[4,this.inst.processFinishSingleModeAsync()];case 8:r.sent();r.label=9;case 9:return[3,11];case 10:a=r.sent();console.warn("finishMatchAsync",a);return[3,11];case 11:return[2]}})}),function(){return p.apply(this,arguments)})},{key:"createTournamentAsync",value:(a=N(function(){var n,i,a,r;return _ts_generator(this,function(p){switch(p.label){case 0:n=!1;return[4,this.inst.getTournamentsAsync()];case 1:if(p.sent().find(function(n){var i,a=JSON.parse(null!==(i=n.getPayload())&&void 0!==i?i:"{}");return"DEFAULT"===n.getTournamentType()&&a.playerId===pY.getPlayerId()}))return[2,!1];i=this.inst.createTournamentPayload();p.label=2;case 2:p.trys.push([2,4,,5]);return[4,pJ.tournament.create.processAsync(i)];case 3:p.sent();a=i.leaderboardId;pX.addLeaderboard({name:a,type:"tournament",autoSortRank:!0,leaderboardId:a}),n=!0;return[3,5];case 4:r=p.sent();console.warn("processCreateTournament",r);return[3,5];case 5:return[2,n]}})}),function(){return a.apply(this,arguments)})},{key:"joinTournamentAsync",value:(i=N(function(n){var i;return _ts_generator(this,function(a){switch(a.label){case 0:i=pY.getPlayerId();return[4,pJ.tournament.join.processAsync({tournamentId:n,playerId:i})];case 1:a.sent();return[2]}})}),function(n){return i.apply(this,arguments)})},{key:"continueTournamentAsync",value:(n=N(function(n){var i;return _ts_generator(this,function(a){switch(a.label){case 0:i=pY.getPlayerId();return[4,pJ.tournament.continue.processAsync({playerId:i,contextId:n})];case 1:a.sent();return[2]}})}),function(i){return n.apply(this,arguments)})}]),e}();K._RF.pop(),K._RF.push({},"a9bc11SkV9L/5L+Y+fhswfJ","FinishState",void 0);var pQ=globalThis.game.player,p$=function(n){i(s,n);var p,d=a(s);function s(n){var i;return r(this,s),i=d.call(this,n),k.turnUpMusic(),i.finishGameAsync(),i}return y(s,[{key:"load",value:function(){var n=this.manager.createLoadingState();this.manager.change(n)}},{key:"initialize",value:function(){var n=this.manager.createInitializeState();this.manager.change(n)}},{key:"ready",value:function(){}},{key:"draw",value:function(){}},{key:"attack",value:function(){}},{key:"escape",value:function(){}},{key:"death",value:function(){}},{key:"finish",value:function(){}},{key:"update",value:function(){}},{key:"finishGameAsync",value:(p=N(function(){var n,i,a,r;return _ts_generator(this,function(p){switch(p.label){case 0:p.trys.push([0,2,,3]);if(!this.game)return[2];n=this.game.inkCapacityController;if(!n)return[2];i=this.data.level,a=1e3*(void 0===i?0:i)+100*n.getStarRating();pQ.getBestScore()<a&&pQ.setBestScore(a);return[4,pZ.finishMatchAsync()];case 1:p.sent();return[3,3];case 2:r=p.sent();console.error("finishGameAsync",r);return[3,3];case 3:return[2]}})}),function(){return p.apply(this,arguments)})}]),s}(pO);K._RF.pop(),K._RF.push({},"37a5cRy3ANBGpVlH3wyS3Ra","InitializeState",void 0);var p0=function(n){i(l,n);var p,d,m=a(l);function l(n){var i;return r(this,l),i=m.call(this,n),"CrazyGames"===GameSDK.getSDKName()&&i.processCrazyGamesRequirements(),i.enableUI(),i.disableHintButtonForEarlyLevels(),i.clearHint(),i.clearGameObjects(),i.createGameObjects(),i.initInkCapacity(),i.initCountdown(),i.updateHeader(),i.showTutorialUI(),i.startGameAsync().then(function(){i.closeLoadingScreen(),i.manager.ready()}),i}return y(l,[{key:"processCrazyGamesRequirements",value:function(){"gameplayStart"in GameSDK.extra&&GameSDK.extra.gameplayStart(),this.showInterAdsCrazyGames()}},{key:"disableHintButtonForEarlyLevels",value:function(){if(this.game){var n=this.data.level;n&&n<=3&&this.game.uiManager.disableHintButton()}}},{key:"showInterAdsCrazyGames",value:(d=N(function(){var n;return _ts_generator(this,function(i){switch(i.label){case 0:n=this.game;if(!n)return[3,2];k.stopAllSounds();return[4,G.showInterstitialAdAsync({forLevel:this.data.level,includeSDK:["CrazyGames"]})];case 1:n=(i.sent()&&this.game.disableRewardAdsItemForCrazyGames(),k.turnUpMusic());i.label=2;case 2:return[2]}})}),function(){return d.apply(this,arguments)})},{key:"load",value:function(){if(GameCore.Utils.Valid.isDebugger()){var n=this.manager.createLoadingState();this.manager.change(n)}}},{key:"initialize",value:function(){}},{key:"ready",value:function(){var n=this.manager.createReadyState();this.manager.change(n)}},{key:"draw",value:function(){}},{key:"attack",value:function(){}},{key:"escape",value:function(){var n=this.manager.createEscapeState();this.manager.change(n)}},{key:"death",value:function(){var n=this.manager.createDeathState();this.manager.change(n)}},{key:"finish",value:function(){}},{key:"update",value:function(){}},{key:"closeLoadingScreen",value:function(){O.closeScreen(D.LOADING_SCREEN)}},{key:"enableUI",value:function(){var n;null===(n=this.game)||void 0===n||n.uiManager.enableUI()}},{key:"clearHint",value:function(){var n;null===(n=this.game)||void 0===n||null===(n=n.hint)||void 0===n||n.reset()}},{key:"clearGameObjects",value:function(){var n,i;null!==(n=this.game)&&void 0!==n&&n.lineDrawer&&null!==(i=this.game)&&void 0!==i&&i.gameObjects&&(this.game.lineDrawer.clearLines(),this.game.gameObjects.clearObjects())}},{key:"createGameObjects",value:function(){var n,i=this.data.levelData;i&&(null===(n=this.game)||void 0===n||null===(n=n.gameObjects)||void 0===n||n.spawnObjects(i))}},{key:"initInkCapacity",value:function(){if(this.game){var n=this.data.levelData;if(n){var i=this.game.inkCapacityController,a=n.lnk,r=void 0===a?[]:a;i.init(r)}}}},{key:"initCountdown",value:function(){var n;null===(n=this.game)||void 0===n||n.uiManager.initCountdown()}},{key:"updateHeader",value:function(){var n;if(null!==(n=this.game)&&void 0!==n&&n.hint){var i=this.game.inkCapacityController.getStarRating();this.game.uiManager.setProgressStars(i);var a=this.game.inkCapacityController.getInkLevelPercentage();this.game.uiManager.setProgressBarPercentage(a),this.game.hint.getIsHintShow()||this.game.uiManager.startCountDownHeaderHintBubbleAnim()}}},{key:"showTutorialUI",value:function(){var n,i;if(this.game){var a=this.data,r=a.level,p=a.levelData;if(r&&p&&!(r>3)&&null!==(n=this.game)&&void 0!==n&&n.hint&&null!==(i=this.game)&&void 0!==i&&i.uiManager){var d=p.tips,y=h6.transformPointsFromMapToDrawAreaCoordinate(d);this.game.hint.showHint(y,!0),this.game.uiManager.stopCountDownHeaderHintBubbleAnim()}}}},{key:"startGameAsync",value:(p=N(function(){var n;return _ts_generator(this,function(i){switch(i.label){case 0:i.trys.push([0,2,,3]);if(this.data.isFromLoader)return[2,void this.updateGameData({isFromLoader:!1})];return[4,pZ.startMatchAsync()];case 1:i.sent();return[3,3];case 2:n=i.sent();console.error("startGameAsync",n);return[3,3];case 3:return[2]}})}),function(){return p.apply(this,arguments)})}]),l}(pO);K._RF.pop(),K._RF.push({},"a8496IbdA1EnY7sv4ApuaJW","LoadingState",void 0);var p1=function(n){i(o,n);var p=a(o);function o(n){var i;return r(this,o),(i=p.call(this,n)).handleMapLoaded=function(n,a){if(n)console.error("Failed to load level",n);else{var r=a.json;i.updateGameData({levelData:r});var p,d,y=i.data.level;if(y)null===(p=i.game)||void 0===p||null===(p=p.gameMap)||void 0===p||p.preloadLevel(y+1);if(i.loadingScreenFlag)null===(d=i.game)||void 0===d||d.scheduleOnce(function(){i.initialize()},.5);else i.initialize()}},i.loadingScreenFlag=!i.isLevelAlreadyLoaded(),i.loadingScreenFlag&&O.showLoadingScreen(),i.stopHint(),i.loadGameMap(),i.updateLevelText(),i}return y(o,[{key:"load",value:function(){}},{key:"initialize",value:function(){var n=this.manager.createInitializeState();this.manager.change(n)}},{key:"ready",value:function(){}},{key:"draw",value:function(){}},{key:"attack",value:function(){}},{key:"escape",value:function(){}},{key:"death",value:function(){}},{key:"finish",value:function(){}},{key:"update",value:function(){}},{key:"isLevelAlreadyLoaded",value:function(){var n,i,a=this.data.level;if(!a)throw new Error("Level is not defined");return null!==(n=null===(i=this.game)||void 0===i||null===(i=i.gameMap)||void 0===i?void 0:i.isLevelAlreadyLoaded(a))&&void 0!==n&&n}},{key:"stopHint",value:function(){var n;null===(n=this.game)||void 0===n||null===(n=n.hint)||void 0===n||n.hideHint()}},{key:"loadGameMap",value:function(){var n,i=this.data.level;if(!i)throw new Error("Level is not defined");null===(n=this.game)||void 0===n||null===(n=n.gameMap)||void 0===n||n.loadLevel(i,this.handleMapLoaded)}},{key:"updateLevelText",value:function(){var n,i=this.data.level;i&&(null===(n=this.game)||void 0===n||n.uiManager.setLevelText(i))}}]),o}(pO);K._RF.pop(),K._RF.push({},"5ef69tJ5eNNv7o22H/XfSD2","ReadyState",void 0);var p2,p3=globalThis.game.analytics,p4=function(n){i(o,n);var p=a(o);function o(n){var i;return r(this,o),(i=p.call(this,n)).logLevelStartAnalytics(),i}return y(o,[{key:"load",value:function(){if(GameCore.Utils.Valid.isDebugger()){var n=this.manager.createLoadingState();this.manager.change(n)}}},{key:"initialize",value:function(){}},{key:"ready",value:function(){}},{key:"draw",value:function(){var n=this.manager.createDrawingState();this.manager.change(n)}},{key:"attack",value:function(){}},{key:"escape",value:function(){var n=this.manager.createEscapeState();this.manager.change(n)}},{key:"death",value:function(){if(GameCore.Utils.Valid.isDebugger()){var n=this.manager.createDeathState();this.manager.change(n)}}},{key:"finish",value:function(){}},{key:"update",value:function(){}},{key:"logLevelStartAnalytics",value:function(){if(this.game){var n=this.data.level,i=void 0===n?0:n,a=this.game.inkCapacityController.getStarRating();p3.levelStart(i,a)}}}]),o}(pO);K._RF.pop(),K._RF.push({},"bb0e3beWSxOOLCv7gjyg2s0","StateManager",void 0);var p5,p7,p6,p9,p8,de,dt,dn,di,da,dr,ds,dl,du,dc,dh=(0,q.ccclass)("StateManager")(p2=function(n){i(o,n);var p=a(o);function o(){return r(this,o),p.apply(this,arguments)}return y(o,[{key:"init",value:function(){this.state=new p1(this)}},{key:"change",value:function(n){this.state=n}},{key:"load",value:function(){this.state.load()}},{key:"initialize",value:function(){this.state.initialize()}},{key:"isInitialize",value:function(){return _instanceof(this.state,p0)}},{key:"ready",value:function(){this.state.ready()}},{key:"isReady",value:function(){return _instanceof(this.state,p4)}},{key:"draw",value:function(){this.state.draw()}},{key:"isDrawing",value:function(){return _instanceof(this.state,pG)}},{key:"attack",value:function(){this.state.attack()}},{key:"isAttacking",value:function(){return _instanceof(this.state,pD)}},{key:"escape",value:function(){this.state.escape()}},{key:"isSurviving",value:function(){return _instanceof(this.state,px)}},{key:"death",value:function(){this.state.death()}},{key:"isFailed",value:function(){return _instanceof(this.state,pN)}},{key:"finish",value:function(){this.state.finish()}},{key:"isFinished",value:function(){return _instanceof(this.state,p$)}},{key:"update",value:function(n){this.state&&this.state.update(n)}},{key:"createInitializeState",value:function(){return new p0(this)}},{key:"createLoadingState",value:function(){return new p1(this)}},{key:"createReadyState",value:function(){return new p4(this)}},{key:"createDrawingState",value:function(){return new pG(this)}},{key:"createAttackingState",value:function(){return new pD(this)}},{key:"createEscapeState",value:function(){return new px(this)}},{key:"createDeathState",value:function(){return new pN(this)}},{key:"createFinishState",value:function(){return new p$(this)}}]),o}(ea))||p2;K._RF.pop(),K._RF.push({},"9e40aEq56tMKLFoeACyl+eH","Clock",void 0);var dp,dd,dv,dy,df,dm,dg,db,dC=q.ccclass,dS=q.disallowMultiple,dk=q.property,dw=M.WaitForPassSecs,dE=(p5=dC("Clock"),p7=dk($),p6=dk(J),p9=dk(el),p8=dk(J),de=dk(J),dt=dk(eo),p5(dn=dS((da=n((di=function(n){i(u,n);var m=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=m.call.apply(m,[this].concat(a)),p(n,"timeText",da,d(n)),p(n,"clockContainer",dr,d(n)),p(n,"clockFill",ds,d(n)),p(n,"successIcon",dl,d(n)),p(n,"failIcon",du,d(n)),p(n,"animation",dc,d(n)),n.time=0,n.remaining=0,n.running=!1,n.timeShake=0,n.remainingToShake=0,n.handleUpdateConfig=function(i){n.enabled&&n.setTime(i.WaitForPassSecs)},n}return y(u,[{key:"__preload",value:function(){this.listenEvents()}},{key:"start",value:function(){this.init(),this.setTime(dw),this.setTimeToShake(1)}},{key:"init",value:function(){this.remaining=0,this.running=!1,this.node.active=!1}},{key:"listenEvents",value:function(){this.node.scene.on(g.GAMEPLAY_UPDATE_CONFIG,this.handleUpdateConfig)}},{key:"setTime",value:function(n){console.info("[Clock] setTime",n),this.time=n,this.timeText.string=Math.ceil(n).toString()}},{key:"setTimeToShake",value:function(n){this.timeShake=n,this.remainingToShake=0}},{key:"startCountdown",value:function(){this.running=!0,this.remaining=this.time,this.remainingToShake=this.timeShake,this.node.active=!0,this.failIcon.active=!1,this.successIcon.active=!1}},{key:"pause",value:function(){this.running=!1}},{key:"resume",value:function(){this.running=!0}},{key:"showUncompletedMark",value:function(){this.failIcon.active=!0,e0(this.failIcon).set({scale:new ep(0,0,1)}).to(.5,{scale:new ep(1,1,1)},{easing:"smooth"}).start()}},{key:"showCompletedMark",value:function(){this.successIcon.active=!0,e0(this.successIcon).set({scale:new ep(0,0,1)}).to(.5,{scale:new ep(1,1,1)},{easing:"smooth"}).start()}},{key:"endCountDown",value:function(){this.running=!1,this.node.scene.emit(lP.TIME_OUT)}},{key:"update",value:function(n){this.running&&(this.remaining<=0?this.endCountDown():(this.remainingToShake<=0&&(this.playShakeAnimation(),this.remainingToShake=this.timeShake),this.remaining-=n,this.remainingToShake-=n,this.updateLabel(),this.clockFill.fillRange=this.remaining/this.time))}},{key:"updateLabel",value:function(){var n=Math.ceil(this.remaining).toString();this.timeText.string=n}},{key:"playShakeAnimation",value:function(){var n="Shake";this.animation.clips.some(function(i){return!(!i||i.name!==n)})?this.animation.play(n):console.warn("SettingsScreen: clip not found")}}]),u}(ea)).prototype,"timeText",[p7],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),dr=n(di.prototype,"clockContainer",[p6],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ds=n(di.prototype,"clockFill",[p9],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),dl=n(di.prototype,"successIcon",[p8],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),du=n(di.prototype,"failIcon",[de],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),dc=n(di.prototype,"animation",[dt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),dn=di))||dn)||dn);K._RF.pop(),K._RF.push({},"7c115t9HKlH6ZfnhCnLAnpe","Star",void 0);var dT,dA,dR,dB,d_,dP,dL,dO,dD,dI,dN,dG=q.ccclass,dM=q.property,dF=q.requireComponent,dz=(dp=dG("Star"),dd=dF(eo),dv=dM(ea),dy=dM(eo),dp(df=dd((dg=n((dm=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=g.call.apply(g,[this].concat(a)),p(n,"starAppearance",dg,d(n)),p(n,"animation",db,d(n)),n.isAppear=!1,n.initialPosition=new ep,n}return y(u,[{key:"onLoad",value:function(){this.initialPosition=this.node.position.clone(),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"resetPosition",value:function(){this.node.setPosition(this.initialPosition)}},{key:"show",value:function(){this.starAppearance.node.active=!0,this.isAppear=!0}},{key:"hide",value:function(){this.starAppearance.node.active=!1,this.isAppear=!1}},{key:"playAnimation",value:function(){this.animation.stop();this.animation.clips.some(function(n){return!(!n||"UpAndDown"!==n.name)})?this.animation.play("UpAndDown"):console.warn("SettingsScreen: clip not found")}},{key:"stopAnimation",value:function(){this.animation.stop()}}]),u}(ea)).prototype,"starAppearance",[dv],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),db=n(dm.prototype,"animation",[dy],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),df=dm))||df)||df);K._RF.pop(),K._RF.push({},"09f0bRvi+1OQZiIGBFqdNzq","LevelProgressBar",void 0);var dx,dU,dH,dj,dV,dW,dK,dq,dJ,dY,dX,dZ,dQ,d$,d0,d1,d2,d3=q.ccclass,d4=q.property,d5=(dT=d3("LevelProgressBar"),dA=d4(e9),dR=d4(dz),dB=d4(dz),d_=d4(dz),dT((dO=n((dL=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=g.call.apply(g,[this].concat(a)),p(n,"progressBar",dO,d(n)),p(n,"leftStar",dD,d(n)),p(n,"midStar",dI,d(n)),p(n,"rightStar",dN,d(n)),n.toProgress=1,n.progressStep=0,n}return y(u,[{key:"onLoad",value:function(){this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"start",value:function(){this.toProgress=1,this.progressStep=0,this.runStartsAnimation()}},{key:"update",value:function(){var n=this.progressBar.getComponent(el);n&&(this.progressBar.progress>=1?n.type=el.Type.SIMPLE:n.type=el.Type.TILED),this.progressBar.progress-this.progressStep<this.toProgress?this.progressBar.progress!==this.toProgress&&(this.progressBar.progress=this.toProgress):this.progressBar.progress-=this.progressStep}},{key:"runStartsAnimation",value:function(){this.leftStar.isAppear&&this.midStar.isAppear&&this.rightStar.isAppear||(this.leftStar.show(),this.midStar.show(),this.rightStar.show(),this.runStarAnimation(this.leftStar),this.runStarAnimation(this.midStar),this.runStarAnimation(this.rightStar))}},{key:"runStarAnimation",value:function(n){n.resetPosition(),n.playAnimation()}},{key:"stopStarAnimation",value:function(n){n.isAppear&&(n.hide(),n.stopAnimation(),n.resetPosition(),k.playSound(A.LOST_STAR_IN_GAMEPLAY))}},{key:"setProgress",value:function(n){this.toProgress=n/100,this.progressStep=(this.progressBar.progress-this.toProgress)/60*16}},{key:"setStars",value:function(n){switch(n){case 1:this.stopStarAnimation(this.rightStar),this.stopStarAnimation(this.midStar);break;case 2:this.stopStarAnimation(this.rightStar);break;default:this.runStartsAnimation()}}},{key:"reset",value:function(){this.progressBar.progress=1}}]),u}(ea)).prototype,"progressBar",[dA],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),dD=n(dL.prototype,"leftStar",[dR],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),dI=n(dL.prototype,"midStar",[dB],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),dN=n(dL.prototype,"rightStar",[d_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),dP=dL))||dP);K._RF.pop(),K._RF.push({},"61791zAr2tJR4p22EZ5QRfk","Header",void 0);var d7,d6,d9,d8,ve,vt,vn,vi,va,vo,vr,vs,vl,vu,vc,vh,vp,vd,vv,vy,vf,vm,vg,vb,vC,vS,vk,vw,vE,vT,vA,vR,vB,v_,vP,vL,vO,vD,vI,vN,vG,vM,vF,vz,vx,vU,vH,vj,vV,vW,vK,vq,vJ,vY=q.ccclass,vX=q.property,vZ=globalThis.game,vQ=vZ.language,v$=vZ.player,v0=(dx=vY("Header"),dU=vX($),dH=vX(d5),dj=vX(tw),dV=vX(J),dW=vX(J),dK=vX(J),dq=vX(J),dx((dX=n((dY=function(n){i(c,n);var g,b=a(c);function c(){var n;r(this,c);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=b.call.apply(b,[this].concat(a)),p(n,"levelText",dX,d(n)),p(n,"levelProgressBar",dZ,d(n)),p(n,"hintBubbleAnim",dQ,d(n)),p(n,"pauseNode",d$,d(n)),p(n,"replayNode",d0,d(n)),p(n,"hintNode",d1,d(n)),p(n,"skipNode",d2,d(n)),n.handlePlayBubble=function(){n.hintBubbleAnim.play(),n.startCountDownHintBubble()},n}return y(c,[{key:"onLoad",value:function(){this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"handleClickedPauseGame",value:function(){this.showSettingScreen(),this.node.scene.emit(lP.GAME_PAUSE)}},{key:"handleClickedReplayGame",value:function(){var n,i=(null!==(n=v$.getGameData())&&void 0!==n?n:{}).level,a=void 0===i?1:i;this.node.scene.emit(lP.GAME_REPLAY,{level:a})}},{key:"handleClickedHintGame",value:function(){this.node.scene.emit(lP.SHOW_HINT)}},{key:"handleClickedSkipLevel",value:(g=N(function(){return _ts_generator(this,function(n){this.node.scene.emit(lP.SKIP_LEVEL);return[2]})}),function(){return g.apply(this,arguments)})},{key:"showSettingScreen",value:function(){O.openScreen(D.SETTINGS_SCREEN,{})}},{key:"setLevelText",value:function(n){var i=vQ.getText("level");this.levelText.string="".concat(i," ").concat(n)}},{key:"setProgress",value:function(n){this.levelProgressBar.setProgress(n)}},{key:"setProgressStars",value:function(n){this.levelProgressBar.setStars(n)}},{key:"startCountDownHintBubble",value:function(){this.schedule(this.handlePlayBubble,30)}},{key:"stopCountDownHintBubble",value:function(){this.unschedule(this.handlePlayBubble)}},{key:"disableButtons",value:function(){this.enableBtnNode(this.pauseNode,!1,!0),this.enableBtnNode(this.replayNode,!1,!0),this.enableBtnNode(this.hintNode,!1,!0),this.enableBtnNode(this.skipNode,!1,!0)}},{key:"enableButtons",value:function(){this.enableBtnNode(this.pauseNode,!0,!0),this.enableBtnNode(this.replayNode,!0,!0),this.enableBtnNode(this.hintNode,!0,!0),this.enableBtnNode(this.skipNode,!0,!0)}},{key:"disableRewardAdsButton",value:function(){this.enableBtnNode(this.hintNode,!1,!1),this.enableBtnNode(this.skipNode,!1,!1)}},{key:"disableHintButton",value:function(){this.enableBtnNode(this.hintNode,!1,!0)}},{key:"enableBtnNode",value:function(n,i,a){var r=n.getComponent(en);if(r&&(r.interactable=i),n.active=a,a){var p=n.getComponent(t5);p&&p.changeState(i)}}}]),c}(ea)).prototype,"levelText",[dU],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),dZ=n(dY.prototype,"levelProgressBar",[dH],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),dQ=n(dY.prototype,"hintBubbleAnim",[dj],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d$=n(dY.prototype,"pauseNode",[dV],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d0=n(dY.prototype,"replayNode",[dW],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d1=n(dY.prototype,"hintNode",[dK],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d2=n(dY.prototype,"skipNode",[dq],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),dJ=dY))||dJ);K._RF.pop(),K._RF.push({},"151afQBVDpOYpTjtwP+wYH+","DevTools",void 0);var v1,v2,v3,v4,v5,v7,v6,v9,v8,ye=q.ccclass,yt=q.property,yn=(d7=ye("DevToolsContainer"),d6=yt(J),d9=yt(J),d8=yt(J),ve=yt(J),vt=yt(J),vn=yt(J),vi=yt(J),va=yt(J),vo=yt(J),vr=yt(J),vs=yt(J),vl=yt(J),vu=yt(J),vc=yt(J),vh=yt(J),vp=yt(J),vd=yt(J),vv=yt(J),vy=yt(J),vf=yt(J),vm=yt(J),vg=yt(J),vb=yt(J),vC=yt(J),vS=yt(J),d7((vE=n((vw=function(n){i(c,n);var b=a(c);function c(){var n;r(this,c);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=b.call.apply(b,[this].concat(a)),p(n,"devToolsButton",vE,d(n)),p(n,"winLevelButton",vT,d(n)),p(n,"loseLevelButton",vA,d(n)),p(n,"buildVersionButton",vR,d(n)),p(n,"prevLevelButton",vB,d(n)),p(n,"nextLevelButton",v_,d(n)),p(n,"selectLevelButton",vP,d(n)),p(n,"hintButton",vL,d(n)),p(n,"physicButton",vO,d(n)),p(n,"bundleButton",vD,d(n)),p(n,"beehiveButton",vI,d(n)),p(n,"dogeButton",vN,d(n)),p(n,"thornBallButton",vG,d(n)),p(n,"bigBeeButton",vM,d(n)),p(n,"thornButton",vF,d(n)),p(n,"airFanButton",vz,d(n)),p(n,"brickButton",vx,d(n)),p(n,"grassButton",vU,d(n)),p(n,"grassDarkButton",vH,d(n)),p(n,"lineButton",vj,d(n)),p(n,"poisonButton",vV,d(n)),p(n,"poisonSurfaceButton",vW,d(n)),p(n,"waterButton",vK,d(n)),p(n,"dangerAreaButton",vq,d(n)),p(n,"dashboardButton",vJ,d(n)),n.isActive=!0,n.gameplay=null,n.gameObjects=null,n.currentSpawnObjId=-1,n.handleClickDashboardButton=function(){F.switchToDashboardScene()},n.handleClickDevToolsButton=function(){n.isActive?(n.hideAllButtons(),n.isActive=!1):(n.showAllButtons(),n.isActive=!0)},n.handleClickPrevLevelButton=function(){var i=n.getCurrentLevel();i&&n.node.scene.emit(lP.SELECT_LEVEL,{level:i-1})},n.handleClickNextLevelButton=function(){var i=n.getCurrentLevel();i&&n.node.scene.emit(lP.SELECT_LEVEL,{level:i+1})},n.handleClickHintButton=function(){n.node.scene.emit(lP.SHOW_HINT,{noAd:!0})},n.handleClickBuildVersionButton=function(){var n=globalThis.game.getBuildVersion();O.showNotificationScreen("Build version: ".concat(n))},n.handleClickPhysicButton=function(){var n=e8.Aabb,i=e8.Pair,a=e8.CenterOfMass,r=e8.Joint,p=e8.Shape;e4.instance.debugDrawFlags=n|i|a|r|p},n.handleClickWinLevelButton=function(){n.node.scene.emit(lP.DOGE_SURVIVE)},n.handleClickLoseLevelButton=function(){n.node.scene.emit(lP.DOGE_DIE)},n.handleClickBeehiveButton=function(){n.currentSpawnObjId=s0.BEEHIVE_A,n.handleSpawnObject()},n.handleClickDogeButton=function(){n.currentSpawnObjId=s0.DOGE_A,n.handleSpawnObject()},n.handleClickThornBallButton=function(){n.currentSpawnObjId=s0.THORN_BALL,n.handleSpawnObject()},n.handleClickBigBeeButton=function(){n.currentSpawnObjId=s0.BIG_BEE,n.handleSpawnObject()},n.handleClickThornButton=function(){n.currentSpawnObjId=s0.THORN,n.handleSpawnObject()},n.handleClickAirFanButton=function(){n.currentSpawnObjId=s0.AIR_FAN,n.handleSpawnObject()},n.handleClickBrickButton=function(){n.currentSpawnObjId=s0.BRICK,n.handleSpawnPolygonObject()},n.handleClickGrassButton=function(){n.currentSpawnObjId=s0.GRASS,n.handleSpawnPolygonObject()},n.handleClickGrassDarkButton=function(){n.currentSpawnObjId=s0.GRASS_DARK,n.handleSpawnPolygonObject()},n.handleClickLineButton=function(){n.currentSpawnObjId=s0.LINE,n.handleSpawnPolygonObject()},n.handleClickPoisonButton=function(){n.currentSpawnObjId=s0.POISON,n.handleSpawnPolygonObject()},n.handleClickPoisonSurfaceButton=function(){n.currentSpawnObjId=s0.POISON_SURFACE,n.handleSpawnPolygonObject()},n.handleClickWaterButton=function(){n.currentSpawnObjId=s0.WATER,n.handleSpawnPolygonObject()},n.handleClickDangerAreaButton=function(){n.currentSpawnObjId=s0.DANGER_AREA,n.handleSpawnPolygonObject()},n}return y(c,[{key:"start",value:function(){this.handleToggleDevToolsButton(),this.handleGameLevelButtons(),this.handleItemButtons(),this.handleEngineButtons(),this.handleSpawnObjectButtons(),this.handleSwitchSceneButtons()}},{key:"handleToggleDevToolsButton",value:function(){this.devToolsButton.on(J.EventType.TOUCH_START,this.handleClickDevToolsButton)}},{key:"handleGameLevelButtons",value:function(){this.winLevelButton.on(J.EventType.TOUCH_START,this.handleClickWinLevelButton),this.loseLevelButton.on(J.EventType.TOUCH_START,this.handleClickLoseLevelButton),this.prevLevelButton.on(J.EventType.TOUCH_START,this.handleClickPrevLevelButton),this.nextLevelButton.on(J.EventType.TOUCH_START,this.handleClickNextLevelButton)}},{key:"handleItemButtons",value:function(){this.hintButton.on(J.EventType.TOUCH_START,this.handleClickHintButton)}},{key:"handleEngineButtons",value:function(){this.buildVersionButton.on(J.EventType.TOUCH_START,this.handleClickBuildVersionButton),this.physicButton.on(J.EventType.TOUCH_START,this.handleClickPhysicButton),this.bundleButton.on(J.EventType.TOUCH_START,this.handleSwitchBundle)}},{key:"handleSpawnObjectButtons",value:function(){this.beehiveButton.on(J.EventType.TOUCH_START,this.handleClickBeehiveButton),this.dogeButton.on(J.EventType.TOUCH_START,this.handleClickDogeButton),this.thornBallButton.on(J.EventType.TOUCH_START,this.handleClickThornBallButton),this.bigBeeButton.on(J.EventType.TOUCH_START,this.handleClickBigBeeButton),this.thornButton.on(J.EventType.TOUCH_START,this.handleClickThornButton),this.airFanButton.on(J.EventType.TOUCH_START,this.handleClickAirFanButton),this.brickButton.on(J.EventType.TOUCH_START,this.handleClickBrickButton),this.grassButton.on(J.EventType.TOUCH_START,this.handleClickGrassButton),this.grassDarkButton.on(J.EventType.TOUCH_START,this.handleClickGrassDarkButton),this.lineButton.on(J.EventType.TOUCH_START,this.handleClickLineButton),this.poisonButton.on(J.EventType.TOUCH_START,this.handleClickPoisonButton),this.poisonSurfaceButton.on(J.EventType.TOUCH_START,this.handleClickPoisonSurfaceButton,this),this.waterButton.on(J.EventType.TOUCH_START,this.handleClickWaterButton),this.dangerAreaButton.on(J.EventType.TOUCH_START,this.handleClickDangerAreaButton)}},{key:"handleSwitchSceneButtons",value:function(){this.dashboardButton.on(J.EventType.TOUCH_START,this.handleClickDashboardButton)}},{key:"injectGameplay",value:function(n){this.gameplay=n,this.gameObjects=n.gameObjects}},{key:"hideAllButtons",value:function(){var n=this;this.getComponentsInChildren(en).forEach(function(i){i.node.name!==n.devToolsButton.name&&(i.node.active=!1)})}},{key:"showAllButtons",value:function(){var n=this;this.getComponentsInChildren(en).forEach(function(i){i.node.name!==n.devToolsButton.name&&(i.node.active=!0)})}},{key:"getCurrentLevel",value:function(){if(!this.gameplay)return null;var n=this.gameplay.getGameData();return n&&n.level||null}},{key:"handleEnterSelectLevel",value:function(n){var i=Number(n.string);this.node.scene.emit(lP.SELECT_LEVEL,{level:i})}},{key:"handleSpawnObject",value:function(){var n;if(this.validateRequiredComponents(),-1!==this.currentSpawnObjId){var i={x:Math.floor(40*Math.random()),y:Math.floor(40*Math.random())},a={id:this.currentSpawnObjId,point:i};null===(n=this.gameObjects)||void 0===n||n.spawnObjectForDevTools(a)}}},{key:"handleSpawnPolygonObject",value:function(){var n;if(this.validateRequiredComponents(),-1!==this.currentSpawnObjId){var i={x:Math.floor(40*Math.random()),y:Math.floor(40*Math.random())},a={x:i.x+Math.floor(10*Math.random()),y:i.y},r={x:i.x,y:i.y+Math.floor(10*Math.random())},p=[i,a,r,{x:a.x,y:r.y}],d={id:this.currentSpawnObjId,point:p};null===(n=this.gameObjects)||void 0===n||n.spawnPolygonObjectForDevTools(d)}}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"handleSwitchBundle",value:function(){eu.emit(g.CHANGE_QUALITY_ASSETS)}}]),c}(ea)).prototype,"devToolsButton",[d6],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vT=n(vw.prototype,"winLevelButton",[d9],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vA=n(vw.prototype,"loseLevelButton",[d8],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vR=n(vw.prototype,"buildVersionButton",[ve],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vB=n(vw.prototype,"prevLevelButton",[vt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v_=n(vw.prototype,"nextLevelButton",[vn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vP=n(vw.prototype,"selectLevelButton",[vi],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vL=n(vw.prototype,"hintButton",[va],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vO=n(vw.prototype,"physicButton",[vo],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vD=n(vw.prototype,"bundleButton",[vr],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vI=n(vw.prototype,"beehiveButton",[vs],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vN=n(vw.prototype,"dogeButton",[vl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vG=n(vw.prototype,"thornBallButton",[vu],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vM=n(vw.prototype,"bigBeeButton",[vc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vF=n(vw.prototype,"thornButton",[vh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vz=n(vw.prototype,"airFanButton",[vp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vx=n(vw.prototype,"brickButton",[vd],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vU=n(vw.prototype,"grassButton",[vv],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vH=n(vw.prototype,"grassDarkButton",[vy],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vj=n(vw.prototype,"lineButton",[vf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vV=n(vw.prototype,"poisonButton",[vm],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vW=n(vw.prototype,"poisonSurfaceButton",[vg],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vK=n(vw.prototype,"waterButton",[vb],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vq=n(vw.prototype,"dangerAreaButton",[vC],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vJ=n(vw.prototype,"dashboardButton",[vS],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vk=vw))||vk);K._RF.pop(),K._RF.push({},"a3b0f6zU+1D97PyszsgST1H","UIManager",void 0);var yi,ya,yo,yr,ys,yl,yu,yc,yh,yp,yd,yv,yy=q.ccclass,yf=q.property,ym=GameCore.Utils,yg=(v1=yy("UIManager"),v2=yf(dE),v3=yf(v0),v4=yf(yn),v1((v6=n((v7=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=g.call.apply(g,[this].concat(a)),p(n,"clock",v6,d(n)),p(n,"header",v9,d(n)),p(n,"devTools",v8,d(n)),n.showDevTools=function(){n.devTools&&(n.devTools.node.active=!0)},n}return y(u,[{key:"onLoad",value:function(){this.validateRequiredComponents(),this.listensDevToolsEvents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"listensDevToolsEvents",value:function(){this.node.scene.on(sH.Events.UNLOCK_DEV_TOOLS,this.showDevTools)}},{key:"initDevTools",value:function(n){this.devTools&&(this.devTools.node.active=ym.Valid.isDebugger(),this.devTools.injectGameplay(n))}},{key:"setLevelText",value:function(n){this.header.setLevelText(n)}},{key:"initCountdown",value:function(){this.clock.init()}},{key:"startCountdown",value:function(){this.clock.startCountdown()}},{key:"pauseCountdown",value:function(){this.clock.pause()}},{key:"resumeCountdown",value:function(){this.clock.resume()}},{key:"showUncompletedMark",value:function(){this.clock.showUncompletedMark()}},{key:"showCompletedMark",value:function(){this.clock.showCompletedMark()}},{key:"setProgressBarPercentage",value:function(n){this.header.setProgress(n)}},{key:"setProgressStars",value:function(n){this.header.setProgressStars(n)}},{key:"startCountDownHeaderHintBubbleAnim",value:function(){this.header.startCountDownHintBubble()}},{key:"stopCountDownHeaderHintBubbleAnim",value:function(){this.header.stopCountDownHintBubble()}},{key:"disableUI",value:function(){this.header.disableButtons()}},{key:"enableUI",value:function(){this.header.enableButtons()}},{key:"disableHintButton",value:function(){this.header.disableHintButton()}},{key:"disableRewardAdsUI",value:function(){this.header.disableRewardAdsButton()}}]),u}(ea)).prototype,"clock",[v2],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v9=n(v7.prototype,"header",[v3],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v8=n(v7.prototype,"devTools",[v4],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v5=v7))||v5);K._RF.pop(),K._RF.push({},"157f203vjtMma2FDvAlyM6h","Gameplay",void 0);var yb=q.ccclass,yC=q.requireComponent,yS=q.property,yk=globalThis.game.player,yw=(yi=yb("Gameplay"),ya=yC([dh,pL,pP]),yo=yS(ps),yr=yS(pB),ys=yS(pE),yl=yS(pt),yi(yu=ya((yh=n((yc=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=g.call.apply(g,[this].concat(a)),p(n,"hint",yh,d(n)),p(n,"gameMap",yp,d(n)),p(n,"lineDrawer",yd,d(n)),p(n,"gameObjects",yv,d(n)),n.gameData=null,n.defaultData=null,n.handleStartGame=function(i){if(!i)throw new Error("handleStartGame: GameEvent payload is not defined");n.setGameData(i),n.stateManager.draw()},n.handlePauseGame=function(i){n.pauseGame(),k.pauseSound(A.BEE_FLYING),n.processCrazyGamesGameplayStop()},n.handleResumeGame=function(i){n.resumeGame(),k.resumeSound(A.BEE_FLYING),n.processCrazyGamesGameplayStart()},n.handleReplayGame=function(i){var a=I(I({},n.defaultData),i);n.setGameData(a),n.stateManager.initialize()},n.handleNextLevel=function(i){n.gameData&&(n.updatePlayerLevelProgress(i),n.stateManager.load(),n.attemptCallCreateShortcut())},n.updatePlayerLevelProgress=function(i){if(n.gameData){if(!i)throw new Error("handleNextLevel: GameEvent payload is not defined");var a=n.gameData,r=a.level,p=a.nextLevelCount,d=void 0===p?0:p,y=i.level,m=void 0===y?r:y;if(!m)throw new Error("Level is not defined");var g=m+1;yk.setGameData({level:g});var b=I(I(I({},n.defaultData),i),{},{level:g,nextLevelCount:d+1});n.setGameData(b)}},n.handleStartOver=function(i){yk.setGameData({level:1,passAllLevels:!1});var a=I(I(I({},n.defaultData),i),{},{level:1});n.setGameData(a),n.stateManager.load()},n.handleSelectLevel=function(i){var a;if(!i)throw new Error("handleSelectLevel: GameEvent payload is not defined");var r=i.level;if(r){var p=(null!==(a=yk.getGameData())&&void 0!==a?a:{}).totalLevel,d=void 0===p?r:p,y=r<1?1:r;y=y>d?d:y;var m=I(I(I({},n.defaultData),i),{},{level:y});yk.setGameData({level:y}),n.setGameData(m),n.stateManager.load()}},n.handleClockTimeout=function(i){n.stateManager.escape()},n.handleDrawing=function(i){if(!i)throw new Error("handleDrawing: GameEvent payload is not defined");n.setGameData(i)},n.handleBeeDie=function(i){var a;(null===(a=n.gameObjects)||void 0===a?void 0:a.checkAllBeeDie())&&(n.stateManager.escape(),n.processCrazyGamesHappyTime())},n.handleBigBeeDie=function(i){var a;(null===(a=n.gameObjects)||void 0===a?void 0:a.checkAllBeeDie())&&(n.stateManager.escape(),n.processCrazyGamesHappyTime())},n.handleBeeAttack=function(i){n.stateManager.attack()},n.handleDogeDie=function(i){n.stateManager.death()},n.handleDogeSurvive=function(i){n.stateManager.escape()},n.handleShowHint=function(){var i=N(function(i){var a,r,p,d,y,m,g,b;return _ts_generator(this,function(C){switch(C.label){case 0:if(!((null===(a=n.hint)||void 0===a||!a.getIsHintShow())&&(n.stateManager.isAttacking()||n.stateManager.isReady())))return[3,3];d=(null!=i?i:{}).noAd,y=void 0!==d&&d;if(n.uiManager.stopCountDownHeaderHintBubbleAnim(),!!y)return[3,2];return[4,G.showRewardVideoAdAsync({})];case 1:if(!C.sent())return[2];C.label=2;case 2:m=(null!==(r=n.gameData)&&void 0!==r?r:{}).levelData;if(!m)throw new Error("Level data is not defined");g=m.tips,b=h6.transformPointsFromMapToDrawAreaCoordinate(g);null===(p=n.hint)||void 0===p||p.showHint(b,!1);C.label=3;case 3:return[2]}})});return function(n){return i.apply(this,arguments)}}(),n.handleSkipLevel=function(){var i=N(function(i){var a;return _ts_generator(this,function(i){switch(i.label){case 0:a=n.stateManager.isAttacking()||n.stateManager.isReady();if(!a)return[3,2];return[4,G.showRewardVideoAdAsync({})];case 1:a=(i.sent()&&n.node.scene.emit(lP.DOGE_SURVIVE),n.node.scene.emit(lP.GAME_RESUME));i.label=2;case 2:return[2]}})});return function(n){return i.apply(this,arguments)}}(),n}return y(u,[{key:"__preload",value:function(){this.initComponents(),this.validateRequiredComponents(),this.listenInputEvents(),G.showBannerAds()}},{key:"initComponents",value:function(){this.initUIManager(),this.initStateManager(),this.initInputController(),this.initInkCapacityController()}},{key:"initUIManager",value:function(){var n;this.uiManager=null===(n=this.node.parent)||void 0===n?void 0:n.getComponentInChildren(yg)}},{key:"initStateManager",value:function(){this.stateManager=this.getComponent(dh)}},{key:"initInputController",value:function(){this.inputController=this.getComponent(pL)}},{key:"initInkCapacityController",value:function(){this.inkCapacityController=this.getComponent(pP)}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"listenInputEvents",value:function(){this.node.scene.on(lP.GAME_START,this.handleStartGame),this.node.scene.on(lP.GAME_PAUSE,this.handlePauseGame),this.node.scene.on(lP.GAME_RESUME,this.handleResumeGame),this.node.scene.on(lP.GAME_REPLAY,this.handleReplayGame),this.node.scene.on(lP.NEXT_LEVEL,this.handleNextLevel),this.node.scene.on(lP.UPDATE_LEVEL,this.updatePlayerLevelProgress),this.node.scene.on(lP.START_OVER,this.handleStartOver),this.node.scene.on(lP.SELECT_LEVEL,this.handleSelectLevel),this.node.scene.on(lP.DRAWING,this.handleDrawing),this.node.scene.on(lP.TIME_OUT,this.handleClockTimeout),this.node.scene.on(lP.BEE_DIE,this.handleBeeDie),this.node.scene.on(lP.BIG_BEE_DIE,this.handleBigBeeDie),this.node.scene.on(lP.BEE_ATTACK,this.handleBeeAttack),this.node.scene.on(lP.DOGE_DIE,this.handleDogeDie),this.node.scene.on(lP.DOGE_SURVIVE,this.handleDogeSurvive),this.node.scene.on(lP.SHOW_HINT,this.handleShowHint),this.node.scene.on(lP.SKIP_LEVEL,this.handleSkipLevel)}},{key:"start",value:function(){this.initData(),this.initGame(),this.initDevTools()}},{key:"initDevTools",value:function(){this.uiManager.initDevTools(this)}},{key:"initData",value:function(){var n,i=(null!==(n=yk.getGameData())&&void 0!==n?n:{}).level,a=void 0===i?1:i;this.defaultData={level:a,gameplayMode:"level",nextLevelCount:0,isFromLoader:!1},this.setGameData(this.defaultData)}},{key:"initGame",value:function(){this.stateManager.init(),this.stateManager.load()}},{key:"setGameData",value:function(n){n&&(this.gameData=I(I({},this.gameData),n))}},{key:"getGameData",value:function(){return this.gameData}},{key:"pauseGame",value:function(){this.node.active=!1,this.node.pauseSystemEvents(!0),this.uiManager.pauseCountdown()}},{key:"resumeGame",value:function(){this.node.active=!0,this.node.resumeSystemEvents(!0),this.uiManager.resumeCountdown()}},{key:"attemptCallCreateShortcut",value:function(){var n,i=null!==(n=this.getGameData())&&void 0!==n?n:{},a=i.level,r=void 0===a?0:a,p=i.nextLevelCount;r<2||(void 0===p?0:p)<2||"checkAndCreateShortcutAsync"in GameSDK.extra&&GameSDK.extra.checkAndCreateShortcutAsync().catch(function(n){console.warn("checkAndCreateShortcutAsync",n)})}},{key:"processCrazyGamesGameplayStart",value:function(){"gameplayStart"in GameSDK.extra&&GameSDK.extra.gameplayStart()}},{key:"processCrazyGamesGameplayStop",value:function(){"gameplayStop"in GameSDK.extra&&GameSDK.extra.gameplayStop()}},{key:"processCrazyGamesHappyTime",value:function(){"happyTime"in GameSDK.extra&&GameSDK.extra.happyTime()}},{key:"disableRewardAdsItemForCrazyGames",value:function(){"CrazyGames"===GameSDK.getSDKName()&&this.uiManager.disableRewardAdsUI()}}]),u}(ea)).prototype,"hint",[yo],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yp=n(yc.prototype,"gameMap",[yr],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yd=n(yc.prototype,"lineDrawer",[ys],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yv=n(yc.prototype,"gameObjects",[yl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yu=yc))||yu)||yu);K._RF.pop(),K._RF.push({},"bfd3fZcEttGVawFb2B3Gmqu","DangerArea",void 0);var yE,yT,yA,yR,yB,y_,yP,yL,yO,yD,yI,yN,yG,yM;(0,q.ccclass)("DangerArea")(function(n){i(o,n);var p=a(o);function o(){var n;r(this,o);for(var i=arguments.length,a=new Array(i),d=0;d<i;d++)a[d]=arguments[d];return(n=p.call.apply(p,[this].concat(a))).useBatch=!1,n.dangerPolygons=[],n}return y(o,[{key:"addDangerAreaPolygon",value:function(n){this.dangerPolygons.push(n)}},{key:"addRigidBody",value:function(){var n=this.node.addComponent(eU);n?(n.group=s1.MAIN_OBJECT,n.type=ex.Static):console.warn("Cannot add RigidBody2D")}},{key:"applyColliderForBatchDraw",value:function(){var n,i=this.dangerPolygons.map(function(n){return n.map(function(n){var i=n.x,a=n.y;return new eL(i,a)})}),a=T(i);try{for(a.s();!(n=a.n()).done;){var r=n.value,p=new J;p.name=sK.DANGER_AREA,this.node.addChild(p),p.setPosition(0,0);var d=p.addComponent(eU);d.type=ex.Static,d.group=s1.MAIN_OBJECT;var y=p.addComponent(eQ);y.points=r,y.apply()}}catch(n){a.e(n)}finally{a.f()}}},{key:"batchDrawAllDangerAreas",value:function(){if(!(this.dangerPolygons.length<1)){var n=this.node.getComponent(u9);if(!n)return console.warn("DangerArea: GraphicsPattern not found"),null;this.addRigidBody(),n.setColor("#fc03036d");var i,a=T(this.dangerPolygons);try{for(a.s();!(i=a.n()).done;){var r=i.value;n.draw(r)}}catch(n){a.e(n)}finally{a.f()}this.applyColliderForBatchDraw()}}}]),o}(ea));K._RF.pop(),K._RF.push({},"0daa9+mtbVHG5tVordU0a3q","Spider",void 0);var yF,yz,yx,yU,yH,yj,yV,yW=q.ccclass,yK=q.property;yE=yW("Spider"),yT=yK(J),yA=yK(J),yR=yK(J),yB=yK(ej),y_=yK(eU),yP=yK(ey),yE((yO=n((yL=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=g.call.apply(g,[this].concat(a)),p(n,"spider",yO,d(n)),p(n,"web",yD,d(n)),p(n,"silk",yI,d(n)),n.isStunned=!1,p(n,"spiderCollider",yN,d(n)),p(n,"spiderRigidBody",yG,d(n)),p(n,"silkGraphics",yM,d(n)),n.onSpiderCollisionEnter=function(i,a){if(!n.isStunned){n.isStunned=!0;var r=a.getComponent(l4),p=a.getComponent(he);if(r||p){var d=n.spider.addComponent(te),y=n.spider.worldPosition,m=a.node,g=m.worldPosition,b=m.getComponent(eU);if(r){var C=r.findNearestCollider(y);d.connectedAnchor=C.offset.clone()}else d.connectedAnchor=new eL(y.x-g.x,y.y-g.y);d.autoCalcDistance=!1,d.maxLength=5,d.collideConnected=!1,d.connectedBody=b}}},n}return y(u,[{key:"onLoad",value:function(){this.spiderCollider=this.spider.getComponent(ej),this.spiderRigidBody=this.spider.getComponent(eU),this.silkGraphics=this.silk.getComponent(ey),this.validateRequiredComponents()}},{key:"onDestroy",value:function(){this.spiderCollider.off(eV.BEGIN_CONTACT,this.onSpiderCollisionEnter)}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"start",value:function(){this.enabled=!1,this.isStunned=!1,this.silkOffsetVector=new eL,this.spiderCollider.on(eV.BEGIN_CONTACT,this.onSpiderCollisionEnter)}},{key:"update",value:function(){if(this.enabled){if(this.drawSilk(),this.isStunned){var n=this.getVectorDataFromAToB(this.spider.worldPosition,this.web.worldPosition);this.spiderRigidBody.linearVelocity=n.vector.multiplyScalar(5),this.spiderRigidBody.linearDamping=0,this.isSpiderTooCloseToWeb()&&(this.spiderRigidBody.type=ex.Static,this.enabled=!1)}else{var i=this.spider.position.add3f(0,-3,0);this.spider.setPosition(i)}}}},{key:"drawSilk",value:function(){var n=this.web.position,i=this.spider.position,a=eb.toRadian(this.spider.eulerAngles.z);this.silkGraphics.clear(),this.silkGraphics.moveTo(n.x,n.y),this.silkOffsetVector.set(0,50).rotate(a),this.silkGraphics.lineTo(i.x+this.silkOffsetVector.x,i.y+this.silkOffsetVector.y),this.silkGraphics.stroke()}},{key:"isSpiderTooCloseToWeb",value:function(){var n=this.spider.position,i=this.web.position;return ep.distance(n,i)<40}}]),u}(lt)).prototype,"spider",[yT],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yD=n(yL.prototype,"web",[yA],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yI=n(yL.prototype,"silk",[yR],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yN=n(yL.prototype,"spiderCollider",[yB],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yG=n(yL.prototype,"spiderRigidBody",[y_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yM=n(yL.prototype,"silkGraphics",[yP],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yL));K._RF.pop(),K._RF.push({},"8fe7bkzdtdNfY7I8uaDov+b","EndlessHeader",void 0);var yq,yJ,yY,yX,yZ,yQ,y$,y0,y1,y2=q.ccclass,y3=q.property,y4=(yF=y2("EndlessHeader"),yz=y3(J),yx=y3(J),yF((yj=n((yH=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=g.call.apply(g,[this].concat(a)),p(n,"pauseNode",yj,d(n)),p(n,"replayNode",yV,d(n)),n}return y(u,[{key:"__preload",value:function(){this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"handleClickedPauseGame",value:function(){this.showSettingScreen(),this.node.scene.emit(lP.GAME_PAUSE)}},{key:"handleClickedReplayGame",value:function(){this.node.scene.emit(lP.GAME_REPLAY)}},{key:"showSettingScreen",value:function(){O.openScreen(D.SETTINGS_SCREEN,{})}},{key:"disableButtons",value:function(){this.enableBtnNode(this.pauseNode,!1,!0),this.enableBtnNode(this.replayNode,!1,!0)}},{key:"enableButtons",value:function(){this.enableBtnNode(this.pauseNode,!0,!0),this.enableBtnNode(this.replayNode,!0,!0)}},{key:"enableBtnNode",value:function(n,i,a){var r=n.getComponent(en);if(r&&(r.interactable=i),n.active=a,a){var p=n.getComponent(t5);p&&p.changeState(i)}}}]),u}(ea)).prototype,"pauseNode",[yz],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yV=n(yH.prototype,"replayNode",[yx],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yU=yH))||yU);K._RF.pop(),K._RF.push({},"bc951s11zREU72nQBqwoD3m","EndlessClock",void 0);var y5,y7,y6,y9,y8,fe,ft,fn,fi,fa=q.ccclass,fo=q.disallowMultiple,fr=q.property,fs=(yq=fa("EndlessClock"),yJ=fr($),yY=fr($),yX=fr(eo),yq(yZ=fo((y$=n((yQ=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=g.call.apply(g,[this].concat(a)),p(n,"timeText",y$,d(n)),p(n,"bestTimeText",y0,d(n)),p(n,"animation",y1,d(n)),n.elapsedTime=0,n.bestTime=0,n.running=!1,n}return y(u,[{key:"__preload",value:function(){this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"getScore",value:function(){return this.elapsedTime}},{key:"getBestScore",value:function(){return Math.max(this.bestTime,this.elapsedTime)}},{key:"setBestScore",value:function(n){this.bestTime=n;var i=Math.floor(n/60),a=Math.floor(n%60),r=i.toString().padStart(2,"0"),p=a.toString().padStart(2,"0");this.bestTimeText.string="".concat(r,":").concat(p)}},{key:"init",value:function(){this.running=!1,this.node.active=!0,this.animation.pause(),this.setElapsedTime(0),this.setBestScore(this.bestTime)}},{key:"startCounting",value:function(){this.running=!0,this.node.active=!0,this.animation.play(),this.setElapsedTime(0),this.setBestScore(this.bestTime)}},{key:"stopCounting",value:function(){this.running=!1,this.node.active=!1,this.animation.pause()}},{key:"pause",value:function(){this.running=!1,this.animation.pause()}},{key:"resume",value:function(){this.running=!0,this.animation.play()}},{key:"update",value:function(n){this.running&&this.setElapsedTime(this.elapsedTime+n)}},{key:"setElapsedTime",value:function(n){this.elapsedTime=n;var i=Math.floor(this.elapsedTime/60),a=Math.floor(this.elapsedTime%60),r=i.toString().padStart(2,"0"),p=a.toString().padStart(2,"0");this.timeText.string="".concat(r,":").concat(p),this.elapsedTime>this.bestTime&&this.setBestScore(this.elapsedTime)}}]),u}(ea)).prototype,"timeText",[yJ],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y0=n(yQ.prototype,"bestTimeText",[yY],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y1=n(yQ.prototype,"animation",[yX],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yZ=yQ))||yZ)||yZ);K._RF.pop(),K._RF.push({},"346956Nk9hPgpT3ZCsaVr+P","EndlessUIManager",void 0);var fl,fu,fc,fh,fp,fd,fv,fy,ff,fm,fg,fb,fC,fS,fk,fw,fE=q.ccclass,fT=q.property,fA=GameCore.Utils,fR=(y5=fE("EndlessUIManager"),y7=fT(fs),y6=fT(y4),y9=fT(yn),y5((ft=n((fe=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=g.call.apply(g,[this].concat(a)),p(n,"clock",ft,d(n)),p(n,"header",fn,d(n)),p(n,"devTools",fi,d(n)),n.showDevTools=function(){n.devTools&&(n.devTools.node.active=!0)},n}return y(u,[{key:"onLoad",value:function(){this.validateRequiredComponents(),this.listensDevToolsEvents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"listensDevToolsEvents",value:function(){this.node.scene.on(sH.Events.UNLOCK_DEV_TOOLS,this.showDevTools)}},{key:"initDevTools",value:function(n){this.devTools&&(this.devTools.node.active=fA.Valid.isDebugger(),this.devTools.injectGameplay(n))}},{key:"getBestScore",value:function(){return this.clock.getBestScore()}},{key:"setBestScore",value:function(n){this.clock.setBestScore(n)}},{key:"initCounting",value:function(){this.clock.init()}},{key:"startCounting",value:function(){this.clock.startCounting()}},{key:"stopCounting",value:function(){this.clock.stopCounting()}},{key:"pauseCounting",value:function(){this.clock.pause()}},{key:"resumeCounting",value:function(){this.clock.resume()}},{key:"disableUI",value:function(){this.header.disableButtons()}},{key:"enableUI",value:function(){this.header.enableButtons()}}]),u}(ea)).prototype,"clock",[y7],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fn=n(fe.prototype,"header",[y6],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fi=n(fe.prototype,"devTools",[y9],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y8=fe))||y8);K._RF.pop(),K._RF.push({},"9d32c879Q1FRIas0BgO+iNP","EndlessGameplay",void 0);var fB=q.ccclass,f_=q.property,fP=q.requireComponent,fL=globalThis.game.player,fO=(fl=fB("EndlessGameplay"),fu=fP(Z),fc=f_({type:eJ,group:"Thorns"}),fh=f_({type:J,group:"Thorns"}),fp=f_({type:J,group:"Thorns"}),fd=f_({type:J,group:"Thorns"}),fv=f_({type:J,group:"Thorns"}),fy=f_(pt),fl(ff=fu((fg=n((fm=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return(n=g.call.apply(g,[this].concat(a))).gameData=null,n.defaultData=null,p(n,"thornPrefab",fg,d(n)),p(n,"bottomThorns",fb,d(n)),p(n,"topThorns",fC,d(n)),p(n,"leftThorns",fS,d(n)),p(n,"rightThorns",fk,d(n)),p(n,"gameObjects",fw,d(n)),n.handleStartGame=function(i){if(!i)throw new Error("handleStartGame: GameEvent payload is not defined");n.setGameData(i),n.stateManager.play()},n.handlePauseGame=function(i){n.pauseGame(),k.pauseSound(A.BEE_FLYING),n.processCrazyGamesGameplayStop()},n.handleResumeGame=function(i){n.resumeGame(),k.resumeSound(A.BEE_FLYING),n.processCrazyGamesGameplayStart()},n.handleReplayGame=function(i){var a=I(I({},n.gameData),i);n.setGameData(a),n.stateManager.initialize(),n.node.active=!0,n.node.resumeSystemEvents(!0)},n.handleDogeDie=function(){n.stateManager.death(),n.attemptCallCreateShortcut()},n.handleBeeDie=function(i){var a;(null===(a=n.gameObjects)||void 0===a?void 0:a.checkAllBeeDie())&&n.processCrazyGamesHappyTime()},n.handleBigBeeDie=function(i){var a;(null===(a=n.gameObjects)||void 0===a?void 0:a.checkAllBeeDie())&&n.processCrazyGamesHappyTime()},n}return y(u,[{key:"__preload",value:function(){this.initComponents(),this.uiTransform=this.getComponent(Z),this.validateRequiredComponents(),this.listenInputEvents(),G.showBannerAds()}},{key:"initComponents",value:function(){this.initUIManager(),this.initStateManager()}},{key:"initUIManager",value:function(){var n;this.uiManager=null===(n=this.node.parent)||void 0===n?void 0:n.getComponentInChildren(fR)}},{key:"initStateManager",value:function(){this.stateManager=this.getComponent(fV)}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"listenInputEvents",value:function(){this.node.scene.on(lP.GAME_START,this.handleStartGame),this.node.scene.on(lP.GAME_PAUSE,this.handlePauseGame),this.node.scene.on(lP.GAME_RESUME,this.handleResumeGame),this.node.scene.on(lP.GAME_REPLAY,this.handleReplayGame),this.node.scene.on(lP.BEE_DIE,this.handleBeeDie),this.node.scene.on(lP.BIG_BEE_DIE,this.handleBigBeeDie),this.node.scene.on(lP.DOGE_DIE,this.handleDogeDie)}},{key:"start",value:function(){this.initData(),this.initGame(),this.initObjects(),this.initDevTools(),this.uiManager.initCounting(),this.uiManager.startCounting()}},{key:"initDevTools",value:function(){}},{key:"initData",value:function(){var n,i=null!==(n=fL.getGameData())&&void 0!==n?n:{},a=i.level,r=void 0===a?1:a,p=i.bestEndlessScore,d=void 0===p?0:p;this.defaultData={level:r,bestEndlessScore:d,gameplayMode:"endless",nextLevelCount:0,isFromLoader:!1},this.setGameData(this.defaultData)}},{key:"initGame",value:function(){this.stateManager.init(),this.stateManager.load()}},{key:"setGameData",value:function(n){n&&(this.gameData=I(I({},this.gameData),n))}},{key:"getGameData",value:function(){return this.gameData}},{key:"pauseGame",value:function(){this.node.active=!1,this.node.pauseSystemEvents(!0),this.uiManager.pauseCounting()}},{key:"resumeGame",value:function(){this.node.active=!0,this.node.resumeSystemEvents(!0),this.uiManager.resumeCounting()}},{key:"attemptCallCreateShortcut",value:function(){var n,i=null!==(n=this.gameData)&&void 0!==n?n:{},a=i.level,r=void 0===a?0:a,p=i.nextLevelCount;r<2||(void 0===p?0:p)<2||"checkAndCreateShortcutAsync"in GameSDK.extra&&GameSDK.extra.checkAndCreateShortcutAsync().catch(function(n){console.warn("checkAndCreateShortcutAsync",n)})}},{key:"initObjects",value:function(){var n=this.createThorn();if(!_instanceof(n,J))throw new Error("initObjects: Could not create thorn");var i=n.getComponent(Z);if(!_instanceof(i,Z))throw new Error("initObjects: Could not get UITransform of thorn");for(var a=this.uiTransform.getBoundingBoxToWorld(),r=a.width,p=a.height,d=Math.ceil(r/i.width),y=Math.ceil(p/i.height),m=0;m<d;m++)this.topThorns.addChild(this.createThorn()),this.bottomThorns.addChild(this.createThorn());for(var g=0;g<y;g++)this.leftThorns.addChild(this.createThorn()),this.rightThorns.addChild(this.createThorn());this.rightThorns.addChild(n),console.log("initObjects: Done",d,y)}},{key:"getBoundingBox",value:function(){return this.uiTransform.getBoundingBoxToWorld()}},{key:"getDogeSpawnPosition",value:function(){var n=this.uiTransform.getBoundingBoxToWorld().center;return[n.x,n.y]}},{key:"createThorn",value:function(){var n=Q(this.thornPrefab);return n.name=sK.THORN,n}},{key:"processCrazyGamesGameplayStart",value:function(){"gameplayStart"in GameSDK.extra&&GameSDK.extra.gameplayStart()}},{key:"processCrazyGamesGameplayStop",value:function(){"gameplayStop"in GameSDK.extra&&GameSDK.extra.gameplayStop()}},{key:"processCrazyGamesHappyTime",value:function(){"happyTime"in GameSDK.extra&&GameSDK.extra.happyTime()}}]),u}(ea)).prototype,"thornPrefab",[fc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fb=n(fm.prototype,"bottomThorns",[fh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fC=n(fm.prototype,"topThorns",[fp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fS=n(fm.prototype,"leftThorns",[fd],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fk=n(fm.prototype,"rightThorns",[fv],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fw=n(fm.prototype,"gameObjects",[fy],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ff=fm))||ff)||ff);K._RF.pop(),K._RF.push({},"43aefNoI9lJxJNh3LPuKYPt","BaseState",void 0);var fD=function(){function e(n){if(r(this,e),this.game=null,this.data={},this.game=n.node.getComponent(fO),!this.game)throw new Error("Gameplay component not found");this.manager=n,this.updateStateData(),this.logDebug()}return y(e,[{key:"logDebug",value:function(){var n=this.constructor.name;console.info("[STATE] ".concat(n),this.data)}},{key:"updateStateData",value:function(){if(this.game){var n=this.game.getGameData();n&&(this.data=n)}}},{key:"updateGameData",value:function(n){var i;null===(i=this.game)||void 0===i||i.setGameData(n),this.updateStateData()}}]),e}();K._RF.pop(),K._RF.push({},"109f0WH9r9IQqMHpvD45PzQ","DeathState",void 0);var fI=function(n){i(o,n);var p=a(o);function o(n){var i,a,d;return r(this,o),(d=p.call(this,n)).processCrazyGamesEvent(),d.disableUI(),k.stopAllSounds(),d.vibrateDevice(),d.pauseCountdown(),d.logLevelFailAnalytics(),null===(i=d.game)||void 0===i||i.scheduleOnce(function(){d.stopDogesLooking(),k.playSound(A.LEVEL_FAIL,{volume:.3})},.5),null===(a=d.game)||void 0===a||a.scheduleOnce(function(){d.sleepObjects(),d.showLoseScreen(),d.manager.finish()},1.8),d}return y(o,[{key:"processCrazyGamesEvent",value:function(){"gameplayStop"in GameSDK.extra&&GameSDK.extra.gameplayStop()}},{key:"load",value:function(){}},{key:"initialize",value:function(){}},{key:"ready",value:function(){}},{key:"play",value:function(){}},{key:"death",value:function(){}},{key:"finish",value:function(){var n=this.manager.createFinishState();this.manager.change(n)}},{key:"update",value:function(){}},{key:"disableUI",value:function(){var n;null===(n=this.game)||void 0===n||n.uiManager.disableUI()}},{key:"sleepObjects",value:function(){var n;null===(n=this.game)||void 0===n||null===(n=n.gameObjects)||void 0===n||n.sleepObjects()}},{key:"pauseCountdown",value:function(){var n;null===(n=this.game)||void 0===n||n.uiManager.pauseCounting()}},{key:"stopDogesLooking",value:function(){var n;if(null!==(n=this.game)&&void 0!==n&&n.gameObjects){var i,a=this.game.gameObjects.getComponentsInChildren(he),r=T(a);try{for(r.s();!(i=r.n()).done;){var p,d=i.value;null===(p=d.eyes)||void 0===p||p.stopLook(),d.setEnable(!1)}}catch(n){r.e(n)}finally{r.f()}}}},{key:"vibrateDevice",value:function(){var n;null===(n=e2("Vibrate"))||void 0===n||null===(n=n.getComponent(sx))||void 0===n||n.vibrate(500)}},{key:"showLoseScreen",value:function(){var n=this.data.level;O.openScreen(D.LOSE_SCREEN,{level:n})}},{key:"logLevelFailAnalytics",value:function(){}}]),o}(fD);K._RF.pop(),K._RF.push({},"638devCm49MrpqRRWptDInp","FinishState",void 0);var fN=globalThis.game.player,fG=function(n){i(s,n);var p,d=a(s);function s(n){var i;return r(this,s),i=d.call(this,n),k.turnUpMusic(),i.finishGameAsync(),i}return y(s,[{key:"load",value:function(){var n=this.manager.createLoadingState();this.manager.change(n)}},{key:"initialize",value:function(){var n=this.manager.createInitializeState();this.manager.change(n)}},{key:"ready",value:function(){}},{key:"play",value:function(){}},{key:"death",value:function(){}},{key:"finish",value:function(){}},{key:"update",value:function(){}},{key:"finishGameAsync",value:(p=N(function(){var n,i,a,r,p,d;return _ts_generator(this,function(y){switch(y.label){case 0:y.trys.push([0,2,,3]);if(!this.game)return[2];a=this.game.uiManager.getBestScore(),r=null!==(n=null===(i=fN.getGameData())||void 0===i?void 0:i.bestEndlessScore)&&void 0!==n?n:0,p=r<a?a:r;fN.setGameData({bestEndlessScore:p}),this.updateGameData({bestEndlessScore:p});return[4,pZ.finishMatchAsync()];case 1:y.sent();return[3,3];case 2:d=y.sent();console.error("finishGameAsync",d);return[3,3];case 3:return[2]}})}),function(){return p.apply(this,arguments)})}]),s}(fD);K._RF.pop(),K._RF.push({},"97260ZJNotE0LYFeNm4wsEz","InitializeState",void 0);var fM=function(n){i(l,n);var p,d,m=a(l);function l(n){var i;return r(this,l),i=m.call(this,n),"CrazyGames"===GameSDK.getSDKName()&&i.processCrazyGamesRequirements(),i.enableUI(),i.clearGameObjects(),i.createGameObjects(),i.initClock(),i.startGameAsync().then(function(){i.closeLoadingScreen(),i.manager.ready()}),i}return y(l,[{key:"processCrazyGamesRequirements",value:function(){"gameplayStart"in GameSDK.extra&&GameSDK.extra.gameplayStart(),this.showInterAdsCrazyGames()}},{key:"showInterAdsCrazyGames",value:(d=N(function(){var n;return _ts_generator(this,function(i){switch(i.label){case 0:n=this.game;if(!n)return[3,2];k.stopAllSounds();return[4,G.showInterstitialAdAsync({forLevel:this.data.level,includeSDK:["CrazyGames"]})];case 1:n=(i.sent(),k.turnUpMusic());i.label=2;case 2:return[2]}})}),function(){return d.apply(this,arguments)})},{key:"load",value:function(){if(GameCore.Utils.Valid.isDebugger()){var n=this.manager.createLoadingState();this.manager.change(n)}}},{key:"initialize",value:function(){}},{key:"ready",value:function(){var n=this.manager.createReadyState();this.manager.change(n)}},{key:"play",value:function(){}},{key:"death",value:function(){var n=this.manager.createDeathState();this.manager.change(n)}},{key:"finish",value:function(){}},{key:"update",value:function(){}},{key:"closeLoadingScreen",value:function(){O.closeScreen(D.LOADING_SCREEN)}},{key:"enableUI",value:function(){var n;null===(n=this.game)||void 0===n||n.uiManager.enableUI()}},{key:"clearGameObjects",value:function(){var n;null!==(n=this.game)&&void 0!==n&&n.gameObjects&&this.game.gameObjects.clearObjects()}},{key:"createGameObjects",value:function(){var n,i,a,r=null!==(n=null===(i=this.game)||void 0===i?void 0:i.getDogeSpawnPosition())&&void 0!==n?n:[0,0],p=z(r,2),d=p[0],y=p[1],m=null===(a=this.game)||void 0===a?void 0:a.gameObjects.spawnDoge({x:d,y:y,right:!1,isWorldPosition:!0,rigidBodyConfig:{gravityScale:2}});if(!_instanceof(m,J))throw new Error("Could not create doge");var g=m.getComponent(eU);if(!g)throw new Error("Could not get rigidBody");g.sleep()}},{key:"initClock",value:function(){var n,i;null===(n=this.game)||void 0===n||n.uiManager.initCounting();var a=this.data.bestEndlessScore,r=void 0===a?0:a;null===(i=this.game)||void 0===i||i.uiManager.setBestScore(r)}},{key:"startGameAsync",value:(p=N(function(){var n;return _ts_generator(this,function(i){switch(i.label){case 0:i.trys.push([0,2,,3]);if(this.data.isFromLoader)return[2,void this.updateGameData({isFromLoader:!1})];return[4,pZ.startMatchAsync()];case 1:i.sent();return[3,3];case 2:n=i.sent();console.error("startGameAsync",n);return[3,3];case 3:return[2]}})}),function(){return p.apply(this,arguments)})}]),l}(fD);K._RF.pop(),K._RF.push({},"ecbe0PxfZNJBLsmLBPc2pBD","LoadingState",void 0);var fF=globalThis.game.player,fz=function(n){i(o,n);var p=a(o);function o(n){var i,a,d,y;r(this,o),y=p.call(this,n);var m=null!==(i=null===(a=fF.getGameData())||void 0===a?void 0:a.bestEndlessScore)&&void 0!==i?i:0;return y.updateGameData({bestEndlessScore:m}),O.showLoadingScreen(),null===(d=y.game)||void 0===d||d.scheduleOnce(function(){y.initialize()},.5),y}return y(o,[{key:"load",value:function(){}},{key:"initialize",value:function(){var n=this.manager.createInitializeState();this.manager.change(n)}},{key:"ready",value:function(){}},{key:"play",value:function(){}},{key:"death",value:function(){}},{key:"finish",value:function(){}},{key:"update",value:function(){}}]),o}(fD);K._RF.pop(),K._RF.push({},"651d4HD0HpFPLrL8dycqU3R","PlayingState",void 0);var fx=globalThis.game.player;function Gb(){var n=Object.keys(sj).map(function(n){return Number.parseInt(n)}).sort(function(n,i){return n-i}),i=0;return{current:function(){return n[i]},canGoNext:function(a){var r=i+1;return!(r>=n.length)&&a>n[r]},next:function(){if(i>=n.length-1)throw new Error("No more progressions");return n[i++]}}}var fU=function(n){i(o,n);var p=a(o);function o(n){var i;return r(this,o),(i=p.call(this,n)).totalElapsed=0,i.spawnElapsed=0,i.spawnInterval=2,i.flyForce=18,i.progressionIt=Gb(),i.onTouchStart=function(){i.dogeRigidBody.linearVelocity=new eL(0,i.flyForce)},i.findDoge(),i.wakeUpObjects(),i.spawnEnemies(),i.startCounting(),k.turnDownMusic(),i.listenInputEvents(),i}return y(o,[{key:"listenInputEvents",value:function(){var n,i;em.os===em.OS.WINDOWS||em.os===em.OS.OSX?(document.addEventListener("pointerdown",this.onTouchStart),null===(n=this.game)||void 0===n||n.node.on(J.EventType.MOUSE_DOWN,this.onTouchStart)):null===(i=this.game)||void 0===i||i.node.on(J.EventType.TOUCH_START,this.onTouchStart)}},{key:"unlistenInputEvents",value:function(){var n,i;em.os===em.OS.WINDOWS||em.os===em.OS.OSX?(document.removeEventListener("pointerdown",this.onTouchStart),null===(n=this.game)||void 0===n||n.node.off(J.EventType.MOUSE_DOWN,this.onTouchStart)):null===(i=this.game)||void 0===i||i.node.off(J.EventType.TOUCH_START,this.onTouchStart)}},{key:"findDoge",value:function(){var n,i=null===(n=this.game)||void 0===n||null===(n=n.gameObjects)||void 0===n?void 0:n.getRandomDogeToBee();if(!i)throw new Error("No doge found in GameObjects");this.doge=i;var a=this.doge.getComponent(eU);if(!a)throw new Error("No rigid body found in doge");this.dogeRigidBody=a}},{key:"load",value:function(){this.unlistenInputEvents();var n=this.manager.createLoadingState();this.manager.change(n)}},{key:"initialize",value:function(){this.unlistenInputEvents(),k.stopSound(A.BEE_FLYING);var n=this.manager.createInitializeState();this.manager.change(n)}},{key:"ready",value:function(){}},{key:"play",value:function(){}},{key:"death",value:function(){this.unlistenInputEvents();var n=this.manager.createDeathState();this.manager.change(n)}},{key:"finish",value:function(){}},{key:"update",value:function(n){if(this.spawnElapsed+=n,this.totalElapsed+=n,this.progressionIt.canGoNext(this.totalElapsed)&&(this.progressionIt.next(),this.updateProgressionToPlugin()),this.spawnElapsed>this.spawnInterval){var i=this.progressionIt.current(),a=sj[i];this.handleSpawn(a),this.spawnElapsed=0}}},{key:"updateProgressionToPlugin",value:function(){var n;pZ.setProfileMatchDataAsync({id:fx.getPlayerId(),endlessScore:Math.round(null!==(n=this.data.bestEndlessScore)&&void 0!==n?n:0)})}},{key:"handleSpawn",value:function(n){if(!this.game)throw new Error("Game is not defined");var i=this.game.getBoundingBox(),a=0===eb.randomRangeInt(0,2)?i.xMin-0:i.xMax+0,r=this.doge.node.worldPosition.y+eb.randomRangeInt(-100,100),p=this.doge.node.getWorldPosition(),d=p.x,y=p.y,m=new ep(a,r,0),g=m.x+2*(d-m.x),b=m.y+2*(y-m.y);this.spawnPredictionLine(m,g,b),this.spawnCrossingBee(d,y,m,n)}},{key:"spawnCrossingBee",value:function(n,i,a,r){var p=this;if(!this.game)throw new Error("Game is not defined. Only use this method in PlayingState");this.game.scheduleOnce(function(){p.game.gameObjects.spawnCrossingBees(I({playerWorldX:n,playerWorldY:i,spawnWorldX:a.x,spawnWorldY:a.y},r))},1)}},{key:"spawnPredictionLine",value:function(n,i,a){if(!this.game)throw new Error("Game is not defined. Only use this method in PlayingState");var r=this.game.gameObjects.spawnCrossingBeeLine({startX:n.x,startY:n.y,endX:i,endY:a,spriteType:cR.LOW,thickness:0});e0(r).to(.5,{thickness:80},{easing:"expoOut"}).start(),this.game.scheduleOnce(function(){e0(r).to(.5,{thickness:0},{easing:"expoOut"}).call(function(){r.destroy()}).start()},1)}},{key:"wakeUpObjects",value:function(){var n;null===(n=this.game)||void 0===n||null===(n=n.gameObjects)||void 0===n||n.wakeUpObjects(),this.dogeRigidBody.wakeUp()}},{key:"spawnEnemies",value:function(){this.game&&this.game.gameObjects&&(this.game.gameObjects.spawnBees(),this.game.gameObjects.reviveBigBees(),k.playSound(A.BEE_FLYING),k.playSound(A.END_DRAW))}},{key:"startCounting",value:function(){var n;null===(n=this.game)||void 0===n||n.uiManager.startCounting()}}]),o}(fD);K._RF.pop(),K._RF.push({},"9516f5Gc/FENLPaNEZwDwcn","ReadyState",void 0);var fH,fj=function(n){i(o,n);var p=a(o);function o(n){var i;return r(this,o),(i=p.call(this,n)).onTouchStart=function(){i.manager.play()},i.logLevelStartAnalytics(),i.listenInputEvents(),i}return y(o,[{key:"listenInputEvents",value:function(){var n,i;em.os===em.OS.WINDOWS||em.os===em.OS.OSX?(document.addEventListener("pointerdown",this.onTouchStart,{once:!0}),null===(n=this.game)||void 0===n||n.node.once(J.EventType.MOUSE_DOWN,this.onTouchStart)):null===(i=this.game)||void 0===i||i.node.once(J.EventType.TOUCH_START,this.onTouchStart)}},{key:"unlistenInputEvents",value:function(){var n,i;em.os===em.OS.WINDOWS||em.os===em.OS.OSX?(document.removeEventListener("pointerdown",this.onTouchStart),null===(n=this.game)||void 0===n||n.node.off(J.EventType.MOUSE_DOWN,this.onTouchStart)):null===(i=this.game)||void 0===i||i.node.off(J.EventType.TOUCH_START,this.onTouchStart)}},{key:"load",value:function(){if(this.unlistenInputEvents(),GameCore.Utils.Valid.isDebugger()){var n=this.manager.createLoadingState();this.manager.change(n)}}},{key:"initialize",value:function(){}},{key:"ready",value:function(){}},{key:"play",value:function(){this.unlistenInputEvents();var n=this.manager.createPlayingState();this.manager.change(n)}},{key:"death",value:function(){if(this.unlistenInputEvents(),GameCore.Utils.Valid.isDebugger()){var n=this.manager.createDeathState();this.manager.change(n)}}},{key:"finish",value:function(){}},{key:"update",value:function(){}},{key:"logLevelStartAnalytics",value:function(){}}]),o}(fD);K._RF.pop(),K._RF.push({},"946848BySlM54Wly5+1otNa","EndlessStateManager",void 0);var fV=(0,q.ccclass)("EndlessStateManager")(fH=function(n){i(o,n);var p=a(o);function o(){return r(this,o),p.apply(this,arguments)}return y(o,[{key:"init",value:function(){this.state=new fz(this)}},{key:"change",value:function(n){this.state=n}},{key:"load",value:function(){this.state.load()}},{key:"initialize",value:function(){this.state.initialize()}},{key:"isInitialize",value:function(){return _instanceof(this.state,fM)}},{key:"ready",value:function(){this.state.ready()}},{key:"isReady",value:function(){return _instanceof(this.state,fj)}},{key:"play",value:function(){this.state.play()}},{key:"isPlaying",value:function(){return _instanceof(this.state,fU)}},{key:"death",value:function(){this.state.death()}},{key:"isFailed",value:function(){return _instanceof(this.state,fI)}},{key:"finish",value:function(){this.state.finish()}},{key:"isFinished",value:function(){return _instanceof(this.state,fG)}},{key:"update",value:function(n){this.state&&this.state.update(n)}},{key:"createInitializeState",value:function(){return new fM(this)}},{key:"createLoadingState",value:function(){return new fz(this)}},{key:"createReadyState",value:function(){return new fj(this)}},{key:"createPlayingState",value:function(){return new fU(this)}},{key:"createDeathState",value:function(){return new fI(this)}},{key:"createFinishState",value:function(){return new fG(this)}}]),o}(ea))||fH;K._RF.pop(),K._RF.push({},"6adb6Vsx2BIsYfe4A3i4ArN","custom",void 0);var fW;(0,q.ccclass)("CustomSpine")(function(n){i(o,n);var p=a(o);function o(){var n;r(this,o);for(var i=arguments.length,a=new Array(i),d=0;d<i;d++)a[d]=arguments[d];return(n=p.call.apply(p,[this].concat(a))).spine=null,n.anims=null,n.customEnd=function(i){var a;console.log("CustomSpine customEnd",i);var r=null===(a=n.spine)||void 0===a?void 0:a.skeletonData;if(r){var p=r.getRuntimeData();p&&console.log("CustomSpine runtimeData",p)}},n}return y(o,[{key:"__preload",value:function(){var n,i;this.spine=null!==(n=this.node.getComponent(eH.Skeleton))&&void 0!==n?n:null,this.anims=null!==(i=this.node.getComponent(eo))&&void 0!==i?i:null,m.lazyValidateProperties(this)}},{key:"onLoad",value:function(){var n;console.log("CustomSpine onLoad",this.spine,this.anims),null===(n=this.anims)||void 0===n||n.play("custom")}},{key:"start",value:function(){}}]),o}(ea));K._RF.pop(),K._RF.push({},"4a9beTdMntC0q9yngb8a2go","BootScene",void 0);var fK,fq=q.ccclass,fJ=q.disallowMultiple,fY=GameCore,fX=fY.Events,fZ=fY.Configs,fQ=globalThis.game,f$=fQ.ads,f0=fQ.player,f1=fQ.event;fq("BootScene")(fW=fJ(fW=function(n){i(o,n);var p=a(o);function o(){var n;r(this,o);for(var i=arguments.length,a=new Array(i),d=0;d<i;d++)a[d]=arguments[d];return(n=p.call.apply(p,[this].concat(a))).processWhenGameSdkStarted=function(){n.setupGameData()},n.handlePauseAudio=function(){f1.on(fX.VISIBILITY_HIDDEN,n.handleMuteAudio),f1.on(fX.VISIBILITY_VISIBLE,n.handleUnMuteAudio)},n.handleMuteAudio=function(){k.muteAudio(!0)},n.handleUnMuteAudio=function(){f$.isAdFullSizeShowing()||k.muteAudio(!1)},n}return y(o,[{key:"__preload",value:function(){this.setupAndroidPlatformAds(),this.processCrazyGamesLoadingStart(),this.listenEvents()}},{key:"onLoad",value:function(){this.handlePauseAudio(),fZ.Core.StartSDKAfterLoadGame||O.showLoadingFullScreen(x.BOOT_SCENE)}},{key:"start",value:function(){this.processCrazyGamesLoadingStop()}},{key:"listenEvents",value:function(){f1.catchUp(fX.GAME_SDK_STARTED,this.processWhenGameSdkStarted)}},{key:"setupGameData",value:function(){var n=f0.getGameData();if(n){var i=M.MaxLevel,a=n.totalLevel,r={totalLevel:Math.max(a,i)};f0.setGameData(r)}}},{key:"processCrazyGamesLoadingStart",value:function(){"gameLoadingStart"in GameSDK.extra&&GameSDK.extra.gameLoadingStart()}},{key:"processCrazyGamesLoadingStop",value:function(){"gameLoadingStop"in GameSDK.extra&&GameSDK.extra.gameLoadingStop()}},{key:"setupAndroidPlatformAds",value:function(){}}]),o}(ea))||fW);K._RF.pop(),K._RF.push({},"c4e30ckJiFBG4VHrF+wikMs","DashboardScene",void 0);var f2,f3=q.ccclass,f4=q.disallowMultiple;f3("DashboardScene")(fK=f4(fK=function(n){i(o,n);var p=a(o);function o(){return r(this,o),p.apply(this,arguments)}return y(o,[{key:"__preload",value:function(){this.validateRequiredComponents()}},{key:"start",value:function(){this.scheduleOnce(this.preloadScenes,2)}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"preloadScenes",value:function(){F.preloadGameScene()}},{key:"handleSingleButtonClicked",value:function(){F.switchToGameScene()}},{key:"handleEndlessButtonClicked",value:function(){F.switchToEndlessScene()}},{key:"handleTestLayoutButtonClicked",value:function(){F.switchScene(x.TEST_LAYOUT_SCENE)}}]),o}(ea))||fK);K._RF.pop(),K._RF.push({},"22d76GFn6BEoKFiZCFN1HmA","DraftScene",void 0);var f5,f7=q.ccclass,f6=q.disallowMultiple;f7("DraftScene")(f2=f6(f2=function(n){i(o,n);var p=a(o);function o(){return r(this,o),p.apply(this,arguments)}return y(o,[{key:"__preload",value:function(){this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"switchScene",value:function(){}}]),o}(ea))||f2);K._RF.pop(),K._RF.push({},"27217ZS55VNqbq0d9w9Cc+3","Component",void 0);var f9,f8=q.ccclass,me=q.executeInEditMode,mt=q.disallowMultiple,mn=GameCore.Events,mi=globalThis.game.event;f8("DraftComponent")(f5=mt(f5=me(!0)(f5=function(n){i(o,n);var p=a(o);function o(){var n;r(this,o);for(var i=arguments.length,a=new Array(i),d=0;d<i;d++)a[d]=arguments[d];return(n=p.call.apply(p,[this].concat(a))).locale="en",n.eventPayload={screenName:"DraftScene"},n}return y(o,[{key:"__preload",value:function(){console.log("DraftComponent",mn)}},{key:"onLoad",value:function(){console.log("DraftComponent",mi)}},{key:"start",value:function(){console.log("DraftComponent",R),this.makePersistent()}},{key:"makePersistent",value:function(){ei.addPersistRootNode(this.node)}}]),o}(ea))||f5)||f5);K._RF.pop(),K._RF.push({},"3f6029o9mpM/K2ccwbuv3XD","EndlessScene",void 0);var ma,mo=q.ccclass,mr=q.disallowMultiple,ms=globalThis.game,ml=ms.audio,mu=ms.ads,mc=b.Layout,mh=b.DesignSize.Portrait;mo("EndlessScene")(f9=mr(f9=function(n){i(o,n);var p=a(o);function o(){var n;r(this,o);for(var i=arguments.length,a=new Array(i),d=0;d<i;d++)a[d]=arguments[d];return(n=p.call.apply(p,[this].concat(a))).handleGameMaskWhenLayoutChanged=function(n){var i=e2("Canvas/Game/GameObjects");if(i){var a=i.getComponent(eZ);a&&(a.enabled=n===mc.Landscape)}},n.handleAdsWhenResize=function(){n.checkBottomBannerAdSize(),n.setMaxSizeSideBannerAd()},n.attemptCallSubscribeBot=function(){"subscribeBotAsync"in GameSDK.extra&&GameSDK.extra.subscribeBotAsync().catch(function(n){console.warn("subscribeBotAsync",n)})},n}return y(o,[{key:"__preload",value:function(){this.validateRequiredComponents(),this.listenGameEvents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"onLoad",value:function(){}},{key:"listenGameEvents",value:function(){this.node.scene.on(g.LAYOUT_CHANGED,this.handleGameMaskWhenLayoutChanged),this.node.scene.on(g.VIEW_RESIZE,this.handleAdsWhenResize)}},{key:"checkBottomBannerAdSize",value:function(){var n=tt.instance.getVisibleSize(),i=S.worldSizeToCssSize(n.height*U.MAX_BOTTOM_BANNER_RATIO);GameCore.Configs.Ads.BannerDisplayAdOptions.forEach(function(n){var a=n.PlacementId,r=n.Position,p=n.BannerHeight;"bottom"===r&&(p>i?mu.hideBannerAdAsync(a).catch(function(n){}):mu.showBannerAdAsync(a).catch(function(n){}))})}},{key:"setMaxSizeSideBannerAd",value:function(){var n=GameSDK.extra;if("setSideBannerAdRemainSize"in n){var i=tt.instance.getVisibleSize(),a=mh.WIDTH+24,r=(i.width-a)/2,p=S.worldSizeToCssSize(r);n.setSideBannerAdRemainSize(p)}}},{key:"start",value:function(){this.scheduleOnce(this.attemptCallSubscribeBot,.5),this.updateVolumeBackgroundMusic()}},{key:"updateVolumeBackgroundMusic",value:function(){ml.setVolume(1,"global_music")}}]),o}(ea))||f9);K._RF.pop(),K._RF.push({},"9b83boaSv9PE6mRFqy0MSI8","GameScene",void 0);var mp,md=q.ccclass,mv=q.disallowMultiple,my=globalThis.game,mf=my.audio,mm=my.ads,mg=b.Layout,mb=b.DesignSize.Portrait;md("GameScene")(ma=mv(ma=function(n){i(o,n);var p=a(o);function o(){var n;r(this,o);for(var i=arguments.length,a=new Array(i),d=0;d<i;d++)a[d]=arguments[d];return(n=p.call.apply(p,[this].concat(a))).handleGameMaskWhenLayoutChanged=function(n){var i=e2("Canvas/Game/GameObjects");if(i){var a=i.getComponent(eZ);a&&(a.enabled=n===mg.Landscape)}},n.handleAdsWhenResize=function(){n.checkBottomBannerAdSize(),n.setMaxSizeSideBannerAd()},n.attemptCallSubscribeBot=function(){"subscribeBotAsync"in GameSDK.extra&&GameSDK.extra.subscribeBotAsync().catch(function(n){console.warn("subscribeBotAsync",n)})},n}return y(o,[{key:"__preload",value:function(){this.validateRequiredComponents(),this.listenGameEvents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"listenGameEvents",value:function(){eu.on(g.VIEW_RESIZE,this.handleAdsWhenResize),eu.on(g.LAYOUT_CHANGED,this.handleGameMaskWhenLayoutChanged)}},{key:"checkBottomBannerAdSize",value:function(){var n=tt.instance.getVisibleSize(),i=S.worldSizeToCssSize(n.height*U.MAX_BOTTOM_BANNER_RATIO);GameCore.Configs.Ads.BannerDisplayAdOptions.forEach(function(n){var a=n.PlacementId,r=n.Position,p=n.BannerHeight;"bottom"===r&&(p>i?mm.hideBannerAdAsync(a).catch(function(n){}):mm.showBannerAdAsync(a).catch(function(n){}))})}},{key:"setMaxSizeSideBannerAd",value:function(){var n=GameSDK.extra;if("setSideBannerAdRemainSize"in n){var i=tt.instance.getVisibleSize(),a=mb.WIDTH+24,r=(i.width-a)/2,p=S.worldSizeToCssSize(r);n.setSideBannerAdRemainSize(p)}}},{key:"start",value:function(){this.scheduleOnce(this.attemptCallSubscribeBot,.5),this.updateVolumeBackgroundMusic(),this.scheduleOnce(this.preloadScenes,2)}},{key:"preloadScenes",value:function(){F.preloadDashboardScene()}},{key:"updateVolumeBackgroundMusic",value:function(){mf.setVolume(1,"global_music")}}]),o}(ea))||ma);K._RF.pop(),K._RF.push({},"2b2ebUm0nFD64V/fcD8RPF/","TestLayoutScene",void 0);var mC,mS,mk,mw,mE=q.ccclass,mT=q.disallowMultiple;mE("TestLayoutScene")(mp=mT(mp=function(n){i(o,n);var p=a(o);function o(){var n;r(this,o);for(var i=arguments.length,a=new Array(i),d=0;d<i;d++)a[d]=arguments[d];return(n=p.call.apply(p,[this].concat(a))).handleLayoutChange=function(){O.closeNotificationScreen(),O.showNotificationScreen("Layout changed")},n}return y(o,[{key:"__preload",value:function(){this.validateRequiredComponents(),this.listenGameEvents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"listenGameEvents",value:function(){eu.on(g.LAYOUT_CHANGED,this.handleLayoutChange)}},{key:"switchScene",value:function(){F.switchScene(x.DASHBOARD_SCENE)}}]),o}(ea))||mp);K._RF.pop(),K._RF.push({},"c0a5fPghzxBxpXiudxt+Qd4","TestParticleSystemScene",void 0);var mA,mR=q.ccclass,mB=q.property;mC=mR("TestParticleSystemScene"),mS=mB(J),mC((mw=n((mk=function(n){i(l,n);var m=a(l);function l(){var n;r(this,l);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=m.call.apply(m,[this].concat(a)),p(n,"stars",mw,d(n)),n}return y(l,[{key:"start",value:function(){this.stars.getComponent(rW).play()}}]),l}(ea)).prototype,"stars",[mS],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),mk));K._RF.pop(),K._RF.push({},"7dc71c6qMBI/ZZfA4rG4nFv","TestPerformanceScene",void 0);var m_,mP=q.ccclass,mL=q.disallowMultiple;mP("TestPerformanceScene")(mA=mL(mA=function(n){i(o,n);var p=a(o);function o(){return r(this,o),p.apply(this,arguments)}return y(o,[{key:"__preload",value:function(){this.validateRequiredComponents(),this.listenEvents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"onLoad",value:function(){GameSDK.startGameAsync()}},{key:"listenEvents",value:function(){}},{key:"start",value:function(){}}]),o}(ea))||mA);K._RF.pop(),K._RF.push({},"0a4aeK2lAdAjq0xWi6SCbV+","TestScene",void 0);var mO=q.ccclass,mD=q.disallowMultiple,mI=GameCore.Events,mN=globalThis.game.event;mO("TestScene")(m_=mD(m_=function(n){i(o,n);var p=a(o);function o(){return r(this,o),p.apply(this,arguments)}return y(o,[{key:"__preload",value:function(){this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"onLoad",value:function(){this.listenScreenEvents(),GameSDK.startGameAsync().catch(function(n){console.warn("GameSDK.startGameAsync",n)})}},{key:"listenScreenEvents",value:function(){mN.once(mI.CLOSED_SCREEN,function(n){n.screenName===H[D.LOADING_SCREEN]&&O.openScreen(D.NOTIFICATION_SCREEN,{message:"Test screen events pass!",duration:2,isCloseButtonVisible:!1})})}},{key:"start",value:function(){console.log("TestScene.start"),O.openScreen(D.LOADING_SCREEN,{duration:.5})}}]),o}(ea))||m_);K._RF.pop(),K._RF.push({},"56a103phldKO7/xShKcD3bI","AnimationDemo",void 0);(0,q.ccclass)("AnimationDemo")(function(n){i(o,n);var p=a(o);function o(){return r(this,o),p.apply(this,arguments)}return y(o,[{key:"onLoad",value:function(){}},{key:"switchToTestTransitionScene",value:function(){F.switchScene("TestTransitionScene")}}]),o}(ea));K._RF.pop(),K._RF.push({},"a3b8adQtftPmKSSoumHWY1e","AudioDemo",void 0);(0,q.ccclass)("AudioDemo")(function(n){i(o,n);var p=a(o);function o(){var n;r(this,o);for(var i=arguments.length,a=new Array(i),d=0;d<i;d++)a[d]=arguments[d];return(n=p.call.apply(p,[this].concat(a))).isMusicMute=!1,n.isSoundMute=!1,n.listSounds=[],n}return y(o,[{key:"onLoad",value:function(){var n,i;this.musicComp=null===(n=e2("Music"))||void 0===n?void 0:n.getComponent(j),this.soundComp=null===(i=e2("Sound"))||void 0===i?void 0:i.getComponent(V),this.validateRequiredComponents(),this.listSounds=[A.BEE_FLYING,A.BEE_STING_DOGE,A.BG_MUSIC,A.BUTTON_CLICK,A.COLLECTING_COINS,A.DOGE_DIES,A.DOGE_HURT,A.END_DRAW,A.HAND_CLAP,A.LEVEL_FAIL,A.LEVEL_PASS,A.LOST_STAR_IN_GAMEPLAY,A.RAISE_STAR,A.SPAWN_COINS,A.STAR_RAISE,A.TOUCH_START,A.BEE_BULLET_EXPLODE]}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"playBackgroundMusic",value:function(){this.musicComp.play(A.BG_MUSIC)}},{key:"pauseBackgroundMusic",value:function(){this.musicComp.pause(A.BG_MUSIC)}},{key:"stopBackgroundMusic",value:function(){this.musicComp.stop(A.BG_MUSIC)}},{key:"randomMusicChannelVolume",value:function(){var n=Math.random();this.musicComp.setVolume(n)}},{key:"toggleMuteMusicChannel",value:function(){this.isMusicMute?(this.musicComp.mute(!1),this.isMusicMute=!1):(this.musicComp.mute(!0),this.isMusicMute=!0)}},{key:"playRandomSound",value:function(){this.soundComp.play(this.listSounds[Math.floor(Math.random()*this.listSounds.length)])}},{key:"toggleMuteSoundChannel",value:function(){this.isSoundMute?(this.soundComp.mute(!1),this.isSoundMute=!1):(this.soundComp.mute(!0),this.isSoundMute=!0)}},{key:"randomSoundChannelVolume",value:function(){var n=Math.random();this.soundComp.setVolume(n)}}]),o}(ea));K._RF.pop(),K._RF.push({},"9e6b330nHBK2oNz8N9/lpDx","FlowChallenge",void 0);var mG=q.ccclass,mM=globalThis.game,mF=mM.match,mz=mM.player;mG("FlowChallenge")(function(n){i(h,n);var p,d,m,g,b,C=a(h);function h(){var n;r(this,h);for(var i=arguments.length,a=new Array(i),p=0;p<i;p++)a[p]=arguments[p];return(n=C.call.apply(C,[this].concat(a))).playerId="",n}return y(h,[{key:"onLoad",value:function(){this.playerId=mz.getPlayerId()}},{key:"inviteFriends",value:(b=N(function(){var n;return _ts_generator(this,function(i){switch(i.label){case 0:i.trys.push([0,2,3,4]);O.showLoadingScreen(0);return[4,mF.challenge.invite.processAsync({playerId:this.playerId})];case 1:i.sent();return[3,4];case 2:n=i.sent();console.warn("inviteFriends",n),_instanceof(n,Error)&&O.showNotificationScreen(n.message);return[3,4];case 3:O.closeLoadingScreen();return[7];case 4:return[2]}})}),function(){return b.apply(this,arguments)})},{key:"challengeFriend",value:(g=N(function(n,i){var a,r;return _ts_generator(this,function(n){switch(n.label){case 0:a=JSON.parse(i);n.label=1;case 1:n.trys.push([1,3,4,5]);O.showLoadingScreen(0);return[4,mF.challenge.friend.processAsync(I(I({},a),{},{playerId:this.playerId}))];case 2:n.sent();return[3,5];case 3:r=n.sent();console.warn("challengeFriend",r),_instanceof(r,Error)&&O.showNotificationScreen(r.message);return[3,5];case 4:O.closeLoadingScreen();return[7];case 5:return[2]}})}),function(n,i){return g.apply(this,arguments)})},{key:"joinChallenge",value:(m=N(function(n,i){var a,r;return _ts_generator(this,function(n){switch(n.label){case 0:a=JSON.parse(i);n.label=1;case 1:n.trys.push([1,3,4,5]);O.showLoadingScreen(0);return[4,mF.challenge.join.processAsync(I(I({},a),{},{playerId:this.playerId}))];case 2:n.sent();return[3,5];case 3:r=n.sent();console.warn("joinChallenge",r),_instanceof(r,Error)&&O.showNotificationScreen(r.message);return[3,5];case 4:O.closeLoadingScreen();return[7];case 5:return[2]}})}),function(n,i){return m.apply(this,arguments)})},{key:"continueChallenge",value:(d=N(function(n,i){var a,r;return _ts_generator(this,function(n){switch(n.label){case 0:a=JSON.parse(i);n.label=1;case 1:n.trys.push([1,3,4,5]);O.showLoadingScreen(0);return[4,mF.challenge.continue.processAsync(I(I({},a),{},{playerId:this.playerId}))];case 2:n.sent();return[3,5];case 3:r=n.sent();console.warn("continueChallenge",r),_instanceof(r,Error)&&O.showNotificationScreen(r.message);return[3,5];case 4:O.closeLoadingScreen();return[7];case 5:return[2]}})}),function(n,i){return d.apply(this,arguments)})},{key:"finishChallenge",value:(p=N(function(){var n;return _ts_generator(this,function(i){switch(i.label){case 0:i.trys.push([0,2,3,4]);O.showLoadingScreen(0);return[4,mF.challenge.finish.processAsync({playerId:mz.getPlayerId(),playerScore:Math.floor(2*Math.random())})];case 1:i.sent();return[3,4];case 2:n=i.sent();console.warn("finishChallenge",n),_instanceof(n,Error)&&O.showNotificationScreen(n.message);return[3,4];case 3:O.closeLoadingScreen();return[7];case 4:return[2]}})}),function(){return p.apply(this,arguments)})}]),h}(ea));K._RF.pop(),K._RF.push({},"f3decJ3ZlRLt6CDMHpl1XCe","FlowContext",void 0);var mx=q.ccclass,mU=globalThis.game,mH=mU.match,mj=mU.player,mV=mU.context;mx("FlowContext")(function(n){i(l,n);var p,d,m=a(l);function l(){var n;r(this,l);for(var i=arguments.length,a=new Array(i),p=0;p<i;p++)a[p]=arguments[p];return(n=m.call.apply(m,[this].concat(a))).playerId="",n.changeContext=function(){var n=N(function(n,i,a){return _ts_generator(this,function(r){switch(r.label){case 0:mV.receiveContext(n,i,a);return[4,mV.detectContextSessionType()];case 1:r.sent(),game.context.detectContextGameMode();return[2]}})});return function(i,a,r){return n.apply(this,arguments)}}(),n}return y(l,[{key:"onLoad",value:function(){this.playerId=mj.getPlayerId()}},{key:"chooseFriends",value:(d=N(function(n,i){var a,r;return _ts_generator(this,function(n){switch(n.label){case 0:a=JSON.parse(i);n.label=1;case 1:n.trys.push([1,3,4,5]);O.showLoadingScreen(0);return[4,mH.context.choose.processAsync(I(I({},a),{},{playerId:this.playerId}))];case 2:n.sent();return[3,5];case 3:r=n.sent();console.warn("chooseFriends",r),_instanceof(r,Error)&&O.showNotificationScreen(r.message);return[3,5];case 4:O.closeLoadingScreen();return[7];case 5:return[2]}})}),function(n,i){return d.apply(this,arguments)})},{key:"processContextData",value:(p=N(function(){var n;return _ts_generator(this,function(i){switch(i.label){case 0:i.trys.push([0,2,3,4]);O.showLoadingScreen(0);return[4,mV.processContextData()];case 1:i.sent();return[3,4];case 2:n=i.sent();console.warn("processContext",n),_instanceof(n,Error)&&O.showNotificationScreen(n.message);return[3,4];case 3:O.closeLoadingScreen();return[7];case 4:return[2]}})}),function(){return p.apply(this,arguments)})},{key:"setSingleContext",value:function(){this.changeContext("","SOLO",{})}},{key:"setTournamentContext",value:function(){this.changeUrl("/?context_source_id=123&context_type=GENERIC&tournament=true"),this.changeContext("mocked-context-id-tournament","THREAD",{})}},{key:"setShareInviteContext",value:function(){var n={type:mV.getSessionContextTypes().SHARE_INVITE,playerId:"4766619483409000",playerName:"Player",playerPhoto:""};this.changeContext("mocked-context-id-share-invite","THREAD",n)}},{key:"setMatchingGroupContext",value:function(){var n={type:mV.getSessionContextTypes().MATCHING_GROUP,playerId:"4766619483409000",playerName:"Player",playerPhoto:"",playerScore:100};this.changeContext("mocked-context-id-matching-group","GROUP",n)}},{key:"setChallengeFriendContext",value:function(){var n={type:mV.getSessionContextTypes().CHALLENGE_FRIEND,playerId:"4766619483409000",playerName:"Player",playerPhoto:""};this.changeContext("mocked-context-id-challenge-friend","THREAD",n)}},{key:"changeUrl",value:function(n){window.history.pushState({},"",n)}}]),l}(ea));K._RF.pop(),K._RF.push({},"36562c8k/RF2p/1aLUWFaf8","FlowGroup",void 0);var mW=q.ccclass,mK=globalThis.game,mq=mK.match,mJ=mK.player;mW("FlowGroup")(function(n){i(u,n);var p,d,m,g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),p=0;p<i;p++)a[p]=arguments[p];return(n=g.call.apply(g,[this].concat(a))).playerId="",n}return y(u,[{key:"onLoad",value:function(){this.playerId=mJ.getPlayerId()}},{key:"startGroup",value:(m=N(function(n,i){var a,r;return _ts_generator(this,function(n){switch(n.label){case 0:a=JSON.parse(i);n.label=1;case 1:n.trys.push([1,3,4,5]);O.showLoadingScreen(0);return[4,mq.group.start.processAsync(I(I({},a),{},{matchTag:"test",playerId:this.playerId}))];case 2:n.sent();return[3,5];case 3:r=n.sent();console.warn("startGroup",r),_instanceof(r,Error)&&O.showNotificationScreen(r.message);return[3,5];case 4:O.closeLoadingScreen();return[7];case 5:return[2]}})}),function(n,i){return m.apply(this,arguments)})},{key:"joinGroup",value:(d=N(function(n,i){var a,r;return _ts_generator(this,function(n){switch(n.label){case 0:a=JSON.parse(i);n.label=1;case 1:n.trys.push([1,3,4,5]);O.showLoadingScreen(0);return[4,mq.group.join.processAsync(I(I({},a),{},{playerId:this.playerId}))];case 2:n.sent();return[3,5];case 3:r=n.sent();console.warn("joinGroup",r),_instanceof(r,Error)&&O.showNotificationScreen(r.message);return[3,5];case 4:O.closeLoadingScreen();return[7];case 5:return[2]}})}),function(n,i){return d.apply(this,arguments)})},{key:"finishGroup",value:(p=N(function(){var n;return _ts_generator(this,function(i){switch(i.label){case 0:i.trys.push([0,2,3,4]);O.showLoadingScreen(0),mJ.setPlayerDataByName("score",Math.floor(2*Math.random()));return[4,mq.group.finish.processAsync()];case 1:i.sent();return[3,4];case 2:n=i.sent();console.warn("finishGroup",n),_instanceof(n,Error)&&O.showNotificationScreen(n.message);return[3,4];case 3:O.closeLoadingScreen();return[7];case 4:return[2]}})}),function(){return p.apply(this,arguments)})}]),u}(ea));K._RF.pop(),K._RF.push({},"46e6dOzDGJMa48+tVKTAEIT","FlowSingle",void 0);var mY=q.ccclass,mX=globalThis.game,mZ=mX.match,mQ=mX.player;mY("FlowSingle")(function(n){i(l,n);var p,d,m=a(l);function l(){var n;r(this,l);for(var i=arguments.length,a=new Array(i),p=0;p<i;p++)a[p]=arguments[p];return(n=m.call.apply(m,[this].concat(a))).playerId="",n}return y(l,[{key:"onLoad",value:function(){this.playerId=mQ.getPlayerId()}},{key:"startSingle",value:(d=N(function(){var n;return _ts_generator(this,function(i){switch(i.label){case 0:i.trys.push([0,2,3,4]);O.showLoadingScreen(0);return[4,mZ.single.start.processAsync({playerId:this.playerId})];case 1:i.sent();return[3,4];case 2:n=i.sent();console.warn("startSingle",n),_instanceof(n,Error)&&O.showNotificationScreen(n.message);return[3,4];case 3:O.closeLoadingScreen();return[7];case 4:return[2]}})}),function(){return d.apply(this,arguments)})},{key:"finishSingle",value:(p=N(function(){var n;return _ts_generator(this,function(i){switch(i.label){case 0:i.trys.push([0,2,3,4]);mQ.setPlayerDataByName("score",Math.floor(2*Math.random()));return[4,mZ.single.finish.processAsync()];case 1:i.sent();return[3,4];case 2:n=i.sent();console.warn("finishSingle",n),_instanceof(n,Error)&&O.showNotificationScreen(n.message);return[3,4];case 3:O.closeLoadingScreen();return[7];case 4:return[2]}})}),function(){return p.apply(this,arguments)})}]),l}(ea));K._RF.pop(),K._RF.push({},"943b1Zkv9BAaZVhinus8Bkv","FlowTournament",void 0);var m$=q.ccclass,m0=globalThis.game,m1=m0.match,m2=m0.player;m$("FlowTournament")(function(n){i(v,n);var p,d,m,g,b,C,S,k,w=a(v);function v(){var n;r(this,v);for(var i=arguments.length,a=new Array(i),p=0;p<i;p++)a[p]=arguments[p];return(n=w.call.apply(w,[this].concat(a))).playerId="",n}return y(v,[{key:"onLoad",value:function(){this.playerId=m2.getPlayerId()}},{key:"joinTournament",value:(k=N(function(){var n,i;return _ts_generator(this,function(a){switch(a.label){case 0:a.trys.push([0,3,4,5]);O.showLoadingScreen(0);return[4,GameSDK.getTournamentAsync()];case 1:n=a.sent().getID().toString();return[4,m1.tournament.join.processAsync({tournamentId:n,playerId:this.playerId})];case 2:a.sent();return[3,5];case 3:i=a.sent();console.warn("joinTournament",i),_instanceof(i,Error)&&O.showNotificationScreen(i.message);return[3,5];case 4:O.closeLoadingScreen();return[7];case 5:return[2]}})}),function(){return k.apply(this,arguments)})},{key:"continueTournament",value:(S=N(function(){var n,i;return _ts_generator(this,function(a){switch(a.label){case 0:a.trys.push([0,3,4,5]);O.showLoadingScreen(0);return[4,GameSDK.getTournamentAsync()];case 1:n=a.sent().getContextID();return[4,m1.tournament.continue.processAsync({contextId:n,playerId:this.playerId})];case 2:a.sent();return[3,5];case 3:i=a.sent();console.warn("continueTournament",i),_instanceof(i,Error)&&O.showNotificationScreen(i.message);return[3,5];case 4:O.closeLoadingScreen();return[7];case 5:return[2]}})}),function(){return S.apply(this,arguments)})},{key:"finishTournament",value:(C=N(function(){var n;return _ts_generator(this,function(i){switch(i.label){case 0:i.trys.push([0,2,3,4]);O.showLoadingScreen(0),m2.setPlayerDataByName("score",Math.floor(2*Math.random()));return[4,m1.single.finish.processAsync()];case 1:i.sent();return[3,4];case 2:n=i.sent();console.warn("finishTournament",n),_instanceof(n,Error)&&O.showNotificationScreen(n.message);return[3,4];case 3:O.closeLoadingScreen();return[7];case 4:return[2]}})}),function(){return C.apply(this,arguments)})},{key:"createTournament",value:(b=N(function(){var n,i;return _ts_generator(this,function(a){switch(a.label){case 0:a.trys.push([0,2,3,4]);O.showLoadingScreen(0);n=GameCore.Utils.String.generateObjectId();return[4,GameSDK.tournament.createAsync({initialScore:0,config:{title:"Tournament title",tournamentTitle:"Tournament title"},data:{playerId:this.playerId,playerName:"playerName",leaderboardId:n}})];case 1:a.sent();return[3,4];case 2:i=a.sent();console.warn("createTournament",i),_instanceof(i,Error)&&O.showNotificationScreen(i.message);return[3,4];case 3:O.closeLoadingScreen();return[7];case 4:return[2]}})}),function(){return b.apply(this,arguments)})},{key:"postScoreTournament",value:(g=N(function(n){var i,a;return _ts_generator(this,function(r){switch(r.label){case 0:r.trys.push([0,2,3,4]);i=Number(n.string);console.warn("score",i),O.showLoadingScreen(0);return[4,GameSDK.tournament.postScoreAsync(i)];case 1:r.sent();return[3,4];case 2:a=r.sent();console.warn("postScoreTournament",a),_instanceof(a,Error)&&O.showNotificationScreen(a.message);return[3,4];case 3:O.closeLoadingScreen();return[7];case 4:return[2]}})}),function(n){return g.apply(this,arguments)})},{key:"shareTournament",value:(m=N(function(n,i){var a,r;return _ts_generator(this,function(n){switch(n.label){case 0:a=JSON.parse(i);n.label=1;case 1:n.trys.push([1,3,4,5]);O.showLoadingScreen(0),console.warn("payload",a);return[4,GameSDK.tournament.shareAsync(a)];case 2:n.sent();return[3,5];case 3:r=n.sent();console.warn("shareTournament",a),_instanceof(r,Error)&&O.showNotificationScreen(r.message);return[3,5];case 4:O.closeLoadingScreen();return[7];case 5:return[2]}})}),function(n,i){return m.apply(this,arguments)})},{key:"getTournamentsAsync",value:(d=N(function(){var n;return _ts_generator(this,function(i){try{O.showLoadingScreen(0);n=GameSDK.tournament.getTournamentsAsync();console.warn(n)}catch(n){console.warn("getTournamentsAsync",n),_instanceof(n,Error)&&O.showNotificationScreen(n.message)}finally{O.closeLoadingScreen()}return[2]})}),function(){return d.apply(this,arguments)})},{key:"getTournamentAsync",value:(p=N(function(){var n,i;return _ts_generator(this,function(a){switch(a.label){case 0:a.trys.push([0,2,3,4]);O.showLoadingScreen(0);return[4,GameSDK.getTournamentAsync()];case 1:n=a.sent();console.warn(n);return[3,4];case 2:i=a.sent();console.warn("getTournamentAsync",i),_instanceof(i,Error)&&O.showNotificationScreen(i.message);return[3,4];case 3:O.closeLoadingScreen();return[7];case 4:return[2]}})}),function(){return p.apply(this,arguments)})}]),v}(ea));K._RF.pop(),K._RF.push({},"d78a7DHN+5P/YjKftUFEZcU","JavaAds",void 0);(0,q.ccclass)("JavaAds")(function(n){i(o,n);var p=a(o);function o(){return r(this,o),p.apply(this,arguments)}return y(o,[{key:"__preload",value:function(){this.setupAds()}},{key:"setupAds",value:function(){}},{key:"onLoad",value:function(){}},{key:"start",value:function(){}}]),o}(ea));K._RF.pop(),K._RF.push({},"64311EGU4RKDpfjDUran9nc","RewardedAdsTest",void 0);(0,q.ccclass)("RewardedAdsTest")(function(n){i(o,n);var p=a(o);function o(){return r(this,o),p.apply(this,arguments)}return y(o,[{key:"show",value:function(){G.showRewardVideoAdAsync({includeSDK:["GameCore"]})}},{key:"close",value:function(){O.closeLoadingScreen()}}]),o}(ea));K._RF.pop(),K._RF.push({},"0fd01MYjfdD+4IeN6PtQl3m","ScreenCongratulation",void 0);(0,q.ccclass)("ScreenCongratulation")(function(n){i(o,n);var p=a(o);function o(){return r(this,o),p.apply(this,arguments)}return y(o,[{key:"show",value:function(){O.openScreen(D.CONGRATULATION_SCREEN)}},{key:"close",value:function(){O.closeScreen(D.CONGRATULATION_SCREEN)}}]),o}(ea));K._RF.pop(),K._RF.push({},"bb2dcIUQjhPDLt7B6ga20s/","ScreenLoading",void 0);(0,q.ccclass)("ScreenLoading")(function(n){i(o,n);var p=a(o);function o(){return r(this,o),p.apply(this,arguments)}return y(o,[{key:"show",value:function(n,i){var a=Number(i);O.showLoadingScreen(a)}},{key:"close",value:function(){O.closeLoadingScreen()}}]),o}(ea));K._RF.pop(),K._RF.push({},"f3a15oYustB1aev6BrFD/7Y","ScreenLose",void 0);(0,q.ccclass)("ScreenLose")(function(n){i(o,n);var p=a(o);function o(){return r(this,o),p.apply(this,arguments)}return y(o,[{key:"show",value:function(){O.openScreen(D.LOSE_SCREEN,{level:1})}},{key:"close",value:function(){O.closeScreen(D.LOSE_SCREEN)}}]),o}(ea));K._RF.pop(),K._RF.push({},"71603KupFhNAYktx1isDcrj","ScreenNotification",void 0);(0,q.ccclass)("ScreenNotification")(function(n){i(o,n);var p=a(o);function o(){return r(this,o),p.apply(this,arguments)}return y(o,[{key:"show",value:function(n,i){var a=String(i);O.showNotificationScreen(a)}},{key:"close",value:function(){O.closeNotificationScreen()}}]),o}(ea));K._RF.pop(),K._RF.push({},"1fb3eggYuVBQo5Uuzm/Nmjh","ScreenSettings",void 0);(0,q.ccclass)("ScreenSettings")(function(n){i(o,n);var p=a(o);function o(){return r(this,o),p.apply(this,arguments)}return y(o,[{key:"show",value:function(n,i){var a=String(i);O.openScreen(D.SETTINGS_SCREEN,{message:a})}},{key:"close",value:function(){O.closeScreen(D.SETTINGS_SCREEN)}}]),o}(ea));K._RF.pop(),K._RF.push({},"ae2cdksVsdJUKhhznchh9wJ","ScreenWinning",void 0);(0,q.ccclass)("ScreenWinning")(function(n){i(o,n);var p=a(o);function o(){return r(this,o),p.apply(this,arguments)}return y(o,[{key:"show",value:function(){O.openScreen(D.WINNING_SCREEN,{stars:2,level:12})}},{key:"close",value:function(){O.closeScreen(D.WINNING_SCREEN)}}]),o}(ea));K._RF.pop(),K._RF.push({},"abf91gNohBK7arKnziqu2PF","AnimationDemo2",void 0);var m3,m4,m5,m7,m6,m9;(0,q.ccclass)("AnimationDemo2")(function(n){i(o,n);var p=a(o);function o(){return r(this,o),p.apply(this,arguments)}return y(o,[{key:"onLoad",value:function(){}},{key:"switchToTestScene",value:function(){F.switchScene("TestScene")}}]),o}(ea));K._RF.pop(),K._RF.push({},"56b92F9LoxNs5aCgvw+tkq6","LoadingSceneTransition",void 0);var m8,ge=q.ccclass,gt=q.requireComponent,gn=q.property;m3=ge("LoadingSceneTransition"),m4=gt([X]),m5=gn([J]),m3(m7=m4((m9=n((m6=function(n){i(l,n);var m=a(l);function l(){var n;r(this,l);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=m.call.apply(m,[this].concat(a)),p(n,"targets",m9,d(n)),n.realTargets=[],n}return y(l,[{key:"start",value:function(){for(var n=this,i=0;i<this.targets.length;i++){var a=this.targets[i];if(a){var r=Q(a);r.setParent(this.node),r.active=!1,this.realTargets.push(r)}}ei.addPersistRootNode(this.node),ei.once(ez.EVENT_BEFORE_SCENE_LAUNCH,function(){n.playFadeOutAnimationClip()})}},{key:"playFadeOutAnimationClip",value:function(){var n=this,i=0;if(this.realTargets&&0!==this.realTargets.length){var a,r=T(this.realTargets);try{for(r.s();!(a=r.n()).done;){var p=a.value;p.active=!0;var d=p.getComponent(eo);if(d)d.clips.some(function(n){return"FadeOut"===(null==n?void 0:n.name)})?(d.play("FadeOut"),d.once(eo.EventType.FINISHED,function(){++i===n.realTargets.length&&n.node.destroy()})):(this.node.destroy(),console.warn("Not have FadeOut clip"))}}catch(n){r.e(n)}finally{r.f()}}}}]),l}(ea)).prototype,"targets",[m5],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),m7=m6))||m7);K._RF.pop(),K._RF.push({},"f3521L4Mn5I3bhxr0QZJ9y9","BackgroundMask",void 0);var gi,ga,go,gr,gs,gl,gu,gc,gh,gp,gd,gv,gy,gf,gm=q.ccclass,gg=q.requireComponent;gm("BackgroundMask")(m8=gg([ev])(m8=function(n){i(o,n);var p=a(o);function o(){return r(this,o),p.apply(this,arguments)}return y(o,[{key:"onLoad",value:function(){var n=this.getComponent(ev);n?(this.opacity=n,this.updateMaskAlpha()):console.warn("BackgroundMask: UIOpacity not found")}},{key:"updateMaskAlpha",value:function(){var n,i,a=this.opacity.opacity/255;n=a,(i=document.getElementById("app-mask"))&&(i.style.background="rgb(0 0 0 / ".concat(n,")"))}}]),o}(ea))||m8);K._RF.pop(),K._RF.push({},"cecf2nUBzhIWZw7uJgVliXz","CongratulationScreen",void 0);var gb,gC=q.ccclass,gS=q.property,gk=q.disallowMultiple,gw=q.requireComponent,gE=GameCore.Events,gT=globalThis.game.event;gi=gC("CongratulationScreen"),ga=gw(W),go=gS(J),gr=gS(J),gs=gS(en),gl=gS(en),gu=gS(en),gi(gc=gk(gc=ga((gp=n((gh=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=g.call.apply(g,[this].concat(a)),p(n,"congratulation",gp,d(n)),p(n,"confirmation",gd,d(n)),p(n,"closeButtonComponent",gv,d(n)),p(n,"yesButtonComponent",gy,d(n)),p(n,"noButtonComponent",gf,d(n)),n.handleOpeningScreen=function(i){if(!n.screen)throw new Error("CongratulationScreen: screen not found");n.validateEventPayload(i)&&(n.closeButtonComponent.interactable=!0,n.yesButtonComponent.interactable=!0,n.noButtonComponent.interactable=!0)},n.handleOpenedScreen=function(i){n.validateEventPayload(i)&&n.open()},n}return y(u,[{key:"__preload",value:function(){this.enabled=!1,this.screen=this.getComponent(W),this.validateRequiredComponents(),this.listenScreenEvents()}},{key:"onDestroy",value:function(){this.unListenScreenEvents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"listenScreenEvents",value:function(){gT.on(gE.OPENING_SCREEN,this.handleOpeningScreen),gT.on(gE.OPENED_SCREEN,this.handleOpenedScreen)}},{key:"unListenScreenEvents",value:function(){gT.off(gE.OPENING_SCREEN,this.handleOpeningScreen),gT.off(gE.OPENED_SCREEN,this.handleOpenedScreen)}},{key:"validateEventPayload",value:function(n){return n.screenName===this.node.name}},{key:"open",value:function(){this.enabled&&(this.confirmation.active=!1,this.congratulation.active=!0)}},{key:"close",value:function(){this.closeButtonComponent.interactable=!1,this.yesButtonComponent.interactable=!1,this.noButtonComponent.interactable=!1,O.closeScreen(D.CONGRATULATION_SCREEN)}},{key:"handleStartOver",value:function(){this.confirmation.active=!0,this.congratulation.active=!1;var n=this.confirmation.getComponent(ev);n?(e0(n).set({opacity:0}).to(.2,{opacity:255},{easing:"smooth"}).start(),e0(this.confirmation).set({scale:new ep(0,0,0)}).to(.2,{scale:new ep(1,1,1)},{easing:"smooth"}).start()):console.warn("CongratulationScreen: UIOpacity not found")}},{key:"handleYesStartOver",value:function(){this.close(),this.node.scene.emit(lP.START_OVER)}},{key:"handleNoStartOver",value:function(){this.close(),this.node.scene.emit(lP.GAME_REPLAY,{level:this.screen.data.level})}},{key:"handleClickedClose",value:function(){this.close(),this.node.scene.emit(lP.GAME_REPLAY,{level:this.screen.data.level})}}]),u}(ea)).prototype,"congratulation",[go],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gd=n(gh.prototype,"confirmation",[gr],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gv=n(gh.prototype,"closeButtonComponent",[gs],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gy=n(gh.prototype,"yesButtonComponent",[gl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gf=n(gh.prototype,"noButtonComponent",[gu],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gc=gh))||gc)||gc);K._RF.pop(),K._RF.push({},"61985gSEDBMY6nVNc9Q1D6W","LoadingScreen",void 0);var gA,gR,gB,g_,gP,gL,gO,gD,gI,gN,gG,gM,gF,gz,gx,gU,gH,gj,gV,gW,gK=q.ccclass,gq=q.disallowMultiple,gJ=q.requireComponent,gY=GameCore.Events,gX=globalThis.game.event;gK("LoadingScreen")(gb=gq(gb=gJ(W)(gb=function(n){i(o,n);var p=a(o);function o(){var n;r(this,o);for(var i=arguments.length,a=new Array(i),d=0;d<i;d++)a[d]=arguments[d];return(n=p.call.apply(p,[this].concat(a))).handleOpeningScreen=function(i){n.validateEventPayload(i)&&(n.enabled=!0)},n.handleOpenedScreen=function(i){n.validateEventPayload(i)&&n.open()},n.handleClosingScreen=function(i){n.validateEventPayload(i)&&n.unscheduleAllCallbacks()},n.handleClosedScreen=function(i){n.validateEventPayload(i)&&(n.enabled=!1)},n.handleOnCloseScreen=function(){O.closeScreen(D.LOADING_SCREEN)},n}return y(o,[{key:"onLoad",value:function(){this.enabled=!1,this.screen=this.getComponent(W),this.validateRequiredComponents(),this.listenScreenEvents()}},{key:"onDestroy",value:function(){this.unListenScreenEvents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"listenScreenEvents",value:function(){gX.on(gY.OPENING_SCREEN,this.handleOpeningScreen),gX.on(gY.OPENED_SCREEN,this.handleOpenedScreen),gX.on(gY.CLOSING_SCREEN,this.handleClosingScreen),gX.on(gY.CLOSED_SCREEN,this.handleClosedScreen)}},{key:"unListenScreenEvents",value:function(){gX.off(gY.OPENING_SCREEN,this.handleOpeningScreen),gX.off(gY.OPENED_SCREEN,this.handleOpenedScreen),gX.off(gY.CLOSING_SCREEN,this.handleClosingScreen),gX.off(gY.CLOSED_SCREEN,this.handleClosedScreen)}},{key:"validateEventPayload",value:function(n){return n.screenName===this.node.name}},{key:"open",value:function(){var n;if(this.enabled){var i=null!==(n=this.screen.data.duration)&&void 0!==n?n:0;i>0&&this.scheduleOnce(this.handleOnCloseScreen,i)}}}]),o}(ea))||gb)||gb);K._RF.pop(),K._RF.push({},"15681ka+CZC45B7BdUhsnhF","LoseScreen",void 0);var gZ,gQ,g$,g0,g1,g2,g3,g4,g5=q.ccclass,g7=q.property,g6=q.disallowMultiple,g9=q.requireComponent,g8=GameCore.Events,be=globalThis.game,bt=be.language,bn=be.event;gA=g5("LoseScreen"),gR=g9(W),gB=g7($),g_=g7(en),gP=g7(J),gL=g7(J),gO=g7(en),gD=g7(en),gI=g7(en),gN=g7(en),gA(gG=g6(gG=gR((gF=n((gM=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return(n=g.call.apply(g,[this].concat(a))).mode="classic",p(n,"levelText",gF,d(n)),p(n,"retryButton",gz,d(n)),p(n,"titleRibbon",gx,d(n)),p(n,"dogeHead",gU,d(n)),p(n,"retryButtonComponent",gH,d(n)),p(n,"closeButtonComponent",gj,d(n)),p(n,"endlessButtonComponent",gV,d(n)),p(n,"classicButtonComponent",gW,d(n)),n.handleOpeningScreen=function(i){if(!n.screen)throw new Error("LoseScreen: screen not found");n.validateEventPayload(i)&&(n.retryButtonComponent.interactable=!0,n.closeButtonComponent.interactable=!0,n.endlessButtonComponent.interactable=!0,n.classicButtonComponent.interactable=!0)},n.handleOpenedScreen=function(i){n.validateEventPayload(i)&&n.open()},n}return y(u,[{key:"__preload",value:function(){this.enabled=!1,this.screen=this.getComponent(W),this.validateRequiredComponents(),this.listenScreenEvents()}},{key:"onLoad",value:function(){var n=ei.getScene();this.mode=n&&n.name===x.GAME_SCENE?"classic":"endless"}},{key:"onDestroy",value:function(){this.unListenScreenEvents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"listenScreenEvents",value:function(){bn.on(g8.OPENING_SCREEN,this.handleOpeningScreen),bn.on(g8.OPENED_SCREEN,this.handleOpenedScreen)}},{key:"unListenScreenEvents",value:function(){bn.off(g8.OPENING_SCREEN,this.handleOpeningScreen),bn.off(g8.OPENED_SCREEN,this.handleOpenedScreen)}},{key:"validateEventPayload",value:function(n){return n.screenName===this.node.name}},{key:"open",value:function(){this.setLevelText(),this.resetState(),this.runOpenAnimation()}},{key:"close",value:function(){this.closeButtonComponent.interactable=!1,this.retryButtonComponent.interactable=!1,this.endlessButtonComponent.interactable=!1,this.classicButtonComponent.interactable=!1,O.closeScreen(D.LOSE_SCREEN)}},{key:"runOpenAnimation",value:function(){var n=this,i=this.createRibbonAnim(),a=this.createDogeHeadAnim(),r=this.createRetryButtonAnim();if(i&&a&&r){var p=e0({}).delay(.2).call(function(){return i.start()});if("classic"===this.mode){var d=this.createLevelAnim();if(!d)return void console.warn("LoseScreen: levelAnim not found");p.delay(.2).call(function(){return d.start()})}if(p.delay(.3).call(function(){return a.start()}).delay(.2).call(function(){return r.start()}).delay(.2),"endless"===this.mode){var y=this.createClassicButtonAnim();if(!y)return void console.warn("LoseScreen: classicButtonAnim not found");p.call(function(){return y.start()})}else{var m=this.createEndlessButtonAnim();if(!m)return void console.warn("LoseScreen: endlessButtonAnim not found");p.call(function(){return m.start()})}p.call(function(){G.showInterstitialAdAsync({forLevel:n.screen.data.level,includeSDK:["CrazyGames"]})}).start()}else console.warn("LoseScreen: animations not found")}},{key:"resetState",value:function(){var n=this.retryButton.getComponent(ev),i=this.titleRibbon.getComponent(ev),a=this.levelText.getComponent(ev),r=this.dogeHead.getComponent(ev),p=this.classicButtonComponent.getComponent(ev),d=this.endlessButtonComponent.getComponent(ev);n&&i&&a&&r&&p&&d?(n.opacity=0,i.opacity=0,a.opacity=0,r.opacity=0,p.opacity=0,d.opacity=0,this.dogeHead.setPosition(1e3,-19),this.retryButton.node.active=!1,this.classicButtonComponent.node.active=!1,this.endlessButtonComponent.node.active=!1,this.levelText.node.active=!1):console.warn("LoseScreen: UIOpacity of some component not found")}},{key:"setLevelText",value:function(){var n=this.screen.data.level,i=bt.getText("level");this.levelText.string="".concat(i," ").concat(n)}},{key:"createRibbonAnim",value:function(){var n=this.titleRibbon.getComponent(ev);return n?e0(n).set({opacity:0}).to(.3,{opacity:255},{easing:"smooth"}):null}},{key:"createLevelAnim",value:function(){var n=this.levelText.getComponent(ev);return n?(this.levelText.node.active=!0,e0(n).set({opacity:0}).to(.3,{opacity:255},{easing:"smooth"})):null}},{key:"createDogeHeadAnim",value:function(){var n=this.dogeHead.getComponent(ev);return n?(this.dogeHead.setPosition(0,-97),e0(n).set({opacity:0}).to(.3,{opacity:255},{easing:"smooth"})):null}},{key:"createRetryButtonAnim",value:function(){var n=this.retryButton.getComponent(ev);return n?(this.retryButton.node.active=!0,e0(n).set({opacity:0}).to(.4,{opacity:255},{easing:"smooth"})):null}},{key:"createClassicButtonAnim",value:function(){var n=this.classicButtonComponent.getComponent(ev);return n?(this.classicButtonComponent.node.active=!0,e0(n).set({opacity:0}).to(.4,{opacity:255},{easing:"smooth"})):null}},{key:"createEndlessButtonAnim",value:function(){var n=this.endlessButtonComponent.getComponent(ev);return n?(this.endlessButtonComponent.node.active=!0,e0(n).set({opacity:0}).to(.4,{opacity:255},{easing:"smooth"})):null}},{key:"handleClickedRetryGame",value:function(){this.close(),this.replayGame()}},{key:"handleClickedClassicMode",value:function(){this.close(),F.switchToGameScene()}},{key:"handleClickedEndlessMode",value:function(){this.close(),F.switchToEndlessScene()}},{key:"handleClickedClose",value:function(){this.close(),this.replayGame()}},{key:"replayGame",value:function(){this.node.scene.emit(lP.GAME_REPLAY,{level:this.screen.data.level})}}]),u}(ea)).prototype,"levelText",[gB],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gz=n(gM.prototype,"retryButton",[g_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gx=n(gM.prototype,"titleRibbon",[gP],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gU=n(gM.prototype,"dogeHead",[gL],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gH=n(gM.prototype,"retryButtonComponent",[gO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gj=n(gM.prototype,"closeButtonComponent",[gD],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gV=n(gM.prototype,"endlessButtonComponent",[gI],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gW=n(gM.prototype,"classicButtonComponent",[gN],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gG=gM))||gG)||gG);K._RF.pop(),K._RF.push({},"6460akNFfhP9pDOT2Z0+s2R","NotificationScreen",void 0);var bi,ba,bo,br,bs,bl,bu,bc,bh,bp,bd,bv,by,bf,bm,bg,bb,bC,bS,bk,bw=q.ccclass,bE=q.disallowMultiple,bT=q.requireComponent,bA=q.property,bR=GameCore,bB=bR.Events,b_=bR.Utils,bP=globalThis.game.event;gZ=bw("NotificationScreen"),gQ=bT(W),g$=bA($),g0=bA(en),gZ(g1=bE(g1=gQ((g3=n((g2=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=g.call.apply(g,[this].concat(a)),p(n,"message",g3,d(n)),p(n,"touchZone",g4,d(n)),n.enableCloseOnTouch=!0,n.handleOpeningScreen=function(i){n.validateEventPayload(i)&&n.updateScreenData(i)},n.handleClosingScreen=function(i){n.validateEventPayload(i)&&n.unscheduleAllCallbacks()},n}return y(u,[{key:"__preload",value:function(){this.listenScreenEvents()}},{key:"onDestroy",value:function(){this.unListenScreenEvents()}},{key:"onLoad",value:function(){this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"listenScreenEvents",value:function(){bP.on(bB.OPENING_SCREEN,this.handleOpeningScreen),bP.on(bB.CLOSING_SCREEN,this.handleClosingScreen)}},{key:"unListenScreenEvents",value:function(){bP.off(bB.OPENING_SCREEN,this.handleOpeningScreen),bP.off(bB.CLOSING_SCREEN,this.handleClosingScreen)}},{key:"validateEventPayload",value:function(n){return n.screenName===this.node.name}},{key:"updateScreenData",value:function(n){var i=n.screenData;b_.Valid.isObject(i)?(i.message&&(this.message.string=i.message),i.duration&&i.duration>0&&this.scheduleOnce(function(){O.closeScreen(D.NOTIFICATION_SCREEN)},i.duration),!1===i.enableCloseOnTouch?this.enableCloseOnTouch=!1:this.enableCloseOnTouch=!0):console.warn("NotificationScreen: screenData not found")}},{key:"handleClickedClose",value:function(){this.unscheduleAllCallbacks(),O.closeScreen(D.NOTIFICATION_SCREEN)}},{key:"closeOnTouch",value:function(){this.enableCloseOnTouch&&this.handleClickedClose()}}]),u}(ea)).prototype,"message",[g$],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g4=n(g2.prototype,"touchZone",[g0],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g1=g2))||g1)||g1);K._RF.pop(),K._RF.push({},"61932YLC/5CFrE0eD0ez8Zg","SettingsScreen",void 0);var bL,bO,bD,bI,bN,bG,bM,bF,bz,bx,bU,bH,bj,bV,bW,bK,bq,bJ,bY,bX,bZ,bQ,b$,b0,b1,b2,b3=q.ccclass,b4=q.property,b5=q.requireComponent,b7=GameCore,b6=b7.Events,b9=b7.Utils,b8=globalThis.game,Ce=b8.player,Ct=b8.event;bi=b3("SettingsScreen"),ba=b5(W),bo=b4(J),br=b4(J),bs=b4(J),bl=b4(r7),bu=b4(r7),bc=b4(r7),bh=b4(en),bp=b4(en),bi(bd=ba((by=n((bv=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=g.call.apply(g,[this].concat(a)),p(n,"musicSetting",by,d(n)),p(n,"soundSetting",bf,d(n)),p(n,"vibrateSetting",bm,d(n)),p(n,"musicSwitch",bg,d(n)),p(n,"soundSwitch",bb,d(n)),p(n,"vibrateSwitch",bC,d(n)),p(n,"closeButtonComponent",bS,d(n)),p(n,"resumeButtonComponent",bk,d(n)),n.triggerSequence="",n.handleOpeningScreen=function(i){n.validateEventPayload(i)&&(n.closeButtonComponent.interactable=!0,n.resumeButtonComponent.interactable=!0,n.updateStatus())},n.handleResetSequence=function(){n.triggerSequence=""},n.handleTriggerUnlockKey=function(i){var a=i.code,r=sH.UNLOCK_SEQUENCE;"number"==typeof a&&-1!==r.indexOf(a.toString())&&(n.triggerSequence+=a.toString(),console.log("SettingsScreen: handleTriggerUnlockKey",a,n.triggerSequence,n.triggerSequence===r),n.triggerSequence===r&&(n.node.scene.emit(sH.Events.UNLOCK_DEV_TOOLS),n.node.off(sH.Events.TRIGGER_UNLOCK_KEY)))},n.updateVibrateButton=function(){var i=n.vibrateSetting.getComponentInChildren(en),a=n.vibrateSetting.getComponentInChildren(r7),r=n.vibrateSetting.getComponentInChildren(t5);if(i&&a&&r){if(b9.Device.isMobile()){var p,d=null!==(p=Ce.getPlayerSetting("vibrate"))&&void 0!==p&&p;a.setEnabled(d)}else i.interactable=!1,a.setEnabled(!1),r.changeState(!1)}else console.warn("SettingsScreen: vibrate button missing components")},n}return y(u,[{key:"onLoad",value:function(){this.enabled=!1,this.screen=this.getComponent(W),this.validateRequiredComponents(),this.listenScreenEvents(),this.listenUnlockDevTools(),this.handleGameDistributionUIChanges()}},{key:"onDestroy",value:function(){this.unListenScreenEvents(),this.unListenUnlockDevTools()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"handleGameDistributionUIChanges",value:function(){if("GameDistributions"===GameSDK.getSDKName()){this.vibrateSetting.active=!1;var n=this.musicSetting.position,i=n.x,a=n.y,r=n.z;this.musicSetting.setPosition(new ep(i,a-50,r));var p=this.soundSetting.position,d=p.x,y=p.y,m=p.z;this.soundSetting.setPosition(new ep(d,y-50,m))}}},{key:"listenScreenEvents",value:function(){Ct.on(b6.OPENING_SCREEN,this.handleOpeningScreen)}},{key:"unListenScreenEvents",value:function(){Ct.off(b6.OPENING_SCREEN,this.handleOpeningScreen)}},{key:"validateEventPayload",value:function(n){return n.screenName===this.node.name}},{key:"listenUnlockDevTools",value:function(){this.node.off(sH.Events.TRIGGER_UNLOCK_KEY),this.node.on(sH.Events.TRIGGER_RESET_SEQUENCE,this.handleResetSequence),this.node.on(sH.Events.TRIGGER_UNLOCK_KEY,this.handleTriggerUnlockKey)}},{key:"unListenUnlockDevTools",value:function(){this.node.off(sH.Events.TRIGGER_RESET_SEQUENCE,this.handleResetSequence),this.node.off(sH.Events.TRIGGER_UNLOCK_KEY,this.handleTriggerUnlockKey)}},{key:"open",value:function(){this.updateStatus(),this.runPopUpAnimation(),this.node.emit(sH.Events.TRIGGER_RESET_SEQUENCE)}},{key:"close",value:function(){this.closeButtonComponent.interactable=!1,this.resumeButtonComponent.interactable=!1,this.node.emit(sH.Events.TRIGGER_RESET_SEQUENCE),O.closeScreen(D.SETTINGS_SCREEN)}},{key:"updateStatus",value:function(){var n,i,a,r={music:null!==(n=Ce.getPlayerSetting("music"))&&void 0!==n&&n,sound:null!==(i=Ce.getPlayerSetting("sound"))&&void 0!==i&&i,vibrate:null!==(a=Ce.getPlayerSetting("vibrate"))&&void 0!==a&&a};this.musicSwitch?this.soundSwitch?(this.musicSwitch.setEnabled(r.music),this.soundSwitch.setEnabled(r.sound),"GameDistributions"!==GameSDK.getSDKName()&&this.scheduleOnce(this.updateVibrateButton,.1)):console.warn("SettingsScreen: soundSwitch not found"):console.warn("SettingsScreen: musicSwitch not found")}},{key:"runPopUpAnimation",value:function(){this.screen.container||console.warn("SettingsScreen: screen not found")}},{key:"switchMusicButton",value:function(){if(this.musicSwitch){var n=this.musicSwitch.switch();Ce.setSetting("music",n),this.node.emit(sH.Events.TRIGGER_UNLOCK_KEY,{code:n?1:0}),n?k.playMusic():k.pauseMusic()}else console.warn("SettingsScreen: musicSwitch not found")}},{key:"switchSoundButton",value:function(){if(this.soundSwitch){var n=this.soundSwitch.switch();Ce.setSetting("sound",n),this.node.emit(sH.Events.TRIGGER_UNLOCK_KEY,{code:n?3:2})}else console.warn("SettingsScreen: soundSwitch not found")}},{key:"switchVibrateButton",value:function(){if(this.vibrateSwitch){var n=this.vibrateSwitch.switch();Ce.setSetting("vibrate",n)}else console.warn("SettingsScreen: vibrateSwitch not found")}},{key:"handleClickedResume",value:function(){this.resumeGame()}},{key:"handleClickedClose",value:function(){this.resumeGame()}},{key:"resumeGame",value:function(){this.close(),this.node.scene.emit(lP.GAME_RESUME)}}]),u}(ea)).prototype,"musicSetting",[bo],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bf=n(bv.prototype,"soundSetting",[br],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bm=n(bv.prototype,"vibrateSetting",[bs],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bg=n(bv.prototype,"musicSwitch",[bl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bb=n(bv.prototype,"soundSwitch",[bu],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bC=n(bv.prototype,"vibrateSwitch",[bc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bS=n(bv.prototype,"closeButtonComponent",[bh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bk=n(bv.prototype,"resumeButtonComponent",[bp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bd=bv))||bd);K._RF.pop(),K._RF.push({},"35c09YGmdFA4pHOJFDg1tw5","WinningScreen",void 0);var Cn=q.ccclass,Ci=q.property,Ca=q.disallowMultiple,Co=q.requireComponent,Cr=GameCore.Events,Cs=globalThis.game,Cl=Cs.player,Cu=Cs.event,Cc=Cs.language;bL=Cn("WinningScreen"),bO=Co(W),bD=Ci(el),bI=Ci(en),bN=Ci(en),bG=Ci(J),bM=Ci(J),bF=Ci($),bz=Ci(en),bx=Ci(en),bU=Ci(en),bH=Ci(en),bj=Ci(en),bL(bV=Ca(bV=bO((bK=n((bW=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return(n=g.call.apply(g,[this].concat(a))).mode="classic",p(n,"titleRibbon",bK,d(n)),p(n,"nextLevelButton",bq,d(n)),p(n,"retryLevelButton",bJ,d(n)),p(n,"confettiGroup",bY,d(n)),p(n,"dogeHead",bX,d(n)),p(n,"levelText",bZ,d(n)),p(n,"closeButtonComponent",bQ,d(n)),p(n,"nextLevelButtonComponent",b$,d(n)),p(n,"retryLevelButtonComponent",b0,d(n)),p(n,"classicButtonComponent",b1,d(n)),p(n,"endlessButtonComponent",b2,d(n)),n.starsCollected=3,n.handleOpeningScreen=function(i){if(!n.screen)throw new Error("WinningScreen: screen not found");n.validateEventPayload(i)&&(n.closeButtonComponent.interactable=!0,n.retryLevelButtonComponent.interactable=!0,n.nextLevelButtonComponent.interactable=!0,n.classicButtonComponent.interactable=!0,n.endlessButtonComponent.interactable=!0)},n.handleOpenedScreen=function(i){n.validateEventPayload(i)&&n.open()},n.handleClosingScreen=function(i){n.validateEventPayload(i)&&n.unscheduleAllCallbacks()},n}return y(u,[{key:"__preload",value:function(){this.enabled=!1,this.screen=this.getComponent(W),this.validateRequiredComponents(),this.listenScreenEvents()}},{key:"onLoad",value:function(){var n=ei.getScene();this.mode=n&&n.name===x.GAME_SCENE?"classic":"endless"}},{key:"onDestroy",value:function(){this.unListenScreenEvents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"listenScreenEvents",value:function(){Cu.on(Cr.OPENING_SCREEN,this.handleOpeningScreen),Cu.on(Cr.OPENED_SCREEN,this.handleOpenedScreen),Cu.on(Cr.CLOSING_SCREEN,this.handleClosingScreen)}},{key:"unListenScreenEvents",value:function(){Cu.off(Cr.OPENING_SCREEN,this.handleOpeningScreen),Cu.off(Cr.OPENED_SCREEN,this.handleOpenedScreen),Cu.off(Cr.CLOSING_SCREEN,this.handleClosingScreen)}},{key:"validateEventPayload",value:function(n){return n.screenName===this.node.name}},{key:"start",value:function(){var n=this;this.dogeHead.translate(new ep(-1e3,0)),this.scheduleOnce(function(){n.dogeHead.translate(new ep(1e3,0))},.1)}},{key:"open",value:function(){var n=this;this.nextLevelButton.node.active=!1,this.retryLevelButton.node.active=!1,this.classicButtonComponent.node.active=!1,this.endlessButtonComponent.node.active=!1,this.closeButtonComponent.interactable=!1,this.classicButtonComponent.interactable=!1,this.endlessButtonComponent.interactable=!1,this.updateLevel(),this.updateStars(),this.runRibbonAnimation();var i=this.runStarsAnimation();this.runConfetti(i),this.scheduleOnce(N(function(){var i,a,r,p;return _ts_generator(this,function(d){switch(d.label){case 0:return[4,G.showInterstitialAdAsync({forLevel:n.screen.data.level,excludeSDK:["CrazyGames"]})];case 1:d.sent(),n.nextLevelButton.node.active=!0,n.retryLevelButton.node.active=!0,n.closeButtonComponent.interactable=!0;i=n.nextLevelButton.getComponent(ev);e0(i).set({opacity:0}).to(.4,{opacity:255},{easing:"smooth"}).start();a=n.retryLevelButton.getComponent(ev);if(e0(a).set({opacity:0}).delay(.2).to(.4,{opacity:255},{easing:"smooth"}).start(),"classic"===n.mode){r=n.createEndlessButtonAnim();if(n.endlessButtonComponent.interactable=!0,!r)return[2,void console.warn("WinningScreen: endlessButtonAnim not found")];r.start()}else{p=n.createClassicButtonAnim();if(n.classicButtonComponent.interactable=!0,!p)return[2,void console.warn("WinningScreen: classicButtonAnim not found")];p.start()}return[2]}})}),i),k.playSound(A.HAND_CLAP)}},{key:"close",value:function(){this.closeButtonComponent.interactable=!1,this.retryLevelButtonComponent.interactable=!1,this.nextLevelButtonComponent.interactable=!1,this.classicButtonComponent.interactable=!1,this.endlessButtonComponent.interactable=!1,O.closeScreen(D.WINNING_SCREEN)}},{key:"showCongratulationScreen",value:function(){O.openScreen(D.CONGRATULATION_SCREEN,{level:this.screen.data.level})}},{key:"handleClickedNextLevel",value:function(){var n=Cl.getGameData();if(n){var i=this.screen.data.level;if(i)i>=n.totalLevel?this.showCongratulationScreen():this.node.scene.emit(lP.NEXT_LEVEL,{level:i}),this.close();else console.warn("WinningScreen: level not found")}else console.warn("WinningScreen: gameData not found")}},{key:"handleClickedRetry",value:function(){this.close(),this.node.scene.emit(lP.GAME_REPLAY,{level:this.screen.data.level})}},{key:"handleClickedClose",value:function(){this.close();var n=this.screen.data.level;this.node.scene.emit(lP.NEXT_LEVEL,{level:n})}},{key:"updateStars",value:function(){var n;this.starsCollected=null!==(n=this.screen.data.stars)&&void 0!==n?n:0}},{key:"updateLevel",value:function(){var n=this.screen.data.level,i=Cc.getText("level");this.levelText.string="".concat(i," ").concat(n)}},{key:"runRibbonAnimation",value:function(){this.titleRibbon.fillRange=0,e0(this.titleRibbon).to(.5,{fillRange:1},{easing:"backInOut"}).start()}},{key:"runStarsAnimation",value:function(){var n=this,i=e2("Container/Stars/RightStar",this.node),a=e2("Container/Stars/LeftStar",this.node),r=e2("Container/Stars/MidStar",this.node),p=[a,r,i];if(!i||!a||!r)return console.warn("WinningScreen: stars not found"),0;for(var d=0,y=p;d<y.length;d++){var m=y[d];if(m){var g=m.getChildByName("Star");g?g.active=!1:console.warn("WinningScreen: starComponent not found")}}this.animateStars(p);for(var b,C=1.32,h=function(){var i=p[S];if(!i)return console.warn("WinningScreen: stars not found"),{v:0};var a=i.getChildByName("Star");if(!a)return console.warn("WinningScreen: starComponent not found"),{v:0};n.scheduleOnce(function(){a.active=!0,k.playSound(A.STAR_RAISE)},C),e0(a).set({scale:new ep(1.7,1.7,1)}).delay(C).to(.35,{scale:new ep(1,1,1)},{easing:"backOut"}).start(),C+=.3},S=0;S<this.starsCollected;S++)if(b=h())return b.v;return C}},{key:"animateStars",value:function(n){for(var i=0;i<n.length;i++){var a=n[i];if(!a)return void console.warn("WinningScreen: starEmpty not found");var r=new ep(0,0,1),p=new ep(1,1,1);1===i&&p.set(1.2,1.2,1),e0(a).set({scale:r}).delay(.7).to(.4,{scale:p},{easing:"backOut"}).start()}}},{key:"createClassicButtonAnim",value:function(){var n=this.classicButtonComponent.getComponent(ev);return n?(this.classicButtonComponent.node.active=!0,e0(n).set({opacity:0}).delay(.4).to(.4,{opacity:255},{easing:"smooth"})):null}},{key:"createEndlessButtonAnim",value:function(){var n=this.endlessButtonComponent.getComponent(ev);return n?(this.endlessButtonComponent.node.active=!0,e0(n).set({opacity:0}).delay(.4).to(.4,{opacity:255},{easing:"smooth"})):null}},{key:"runConfetti",value:function(n){this.stopConfetti();var i=this.confettiGroup.getComponentsInChildren(eg);this.scheduleOnce(function(){var n,a=T(i);try{for(a.s();!(n=a.n()).done;)n.value.resetSystem()}catch(n){a.e(n)}finally{a.f()}},n)}},{key:"stopConfetti",value:function(){var n,i=this.confettiGroup.getComponentsInChildren(eg),a=T(i);try{for(a.s();!(n=a.n()).done;)n.value.stopSystem()}catch(n){a.e(n)}finally{a.f()}}},{key:"handleClickedClassicMode",value:function(){this.close(),F.switchToGameScene()}},{key:"handleClickedEndlessMode",value:function(){this.updatePlayerLevelProgress(),this.close(),F.switchToEndlessScene()}},{key:"updatePlayerLevelProgress",value:function(){var n=Cl.getGameData();if(n){var i=this.screen.data.level;if(i)i>=n.totalLevel||this.node.scene.emit(lP.UPDATE_LEVEL,{level:i});else console.warn("WinningScreen: level not found")}else console.warn("WinningScreen: gameData not found")}}]),u}(ea)).prototype,"titleRibbon",[bD],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bq=n(bW.prototype,"nextLevelButton",[bI],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bJ=n(bW.prototype,"retryLevelButton",[bN],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bY=n(bW.prototype,"confettiGroup",[bG],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bX=n(bW.prototype,"dogeHead",[bM],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bZ=n(bW.prototype,"levelText",[bF],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bQ=n(bW.prototype,"closeButtonComponent",[bz],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b$=n(bW.prototype,"nextLevelButtonComponent",[bx],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b0=n(bW.prototype,"retryLevelButtonComponent",[bU],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b1=n(bW.prototype,"classicButtonComponent",[bH],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b2=n(bW.prototype,"endlessButtonComponent",[bj],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bV=bW))||bV)||bV);K._RF.pop()}}});(function(n){n("virtual:///prerequisite-imports/main","chunks:///main.js")})(function(n,i){System.register(n,[i],function(n,i){return{setters:[function(i){var a={};for(var r in i)if("default"!==r&&"__esModule"!==r)a[r]=i[r];n(a)}],execute:function(){}}})});