function _instanceof(n,i){if(null!=i&&"undefined"!=typeof Symbol&&i[Symbol.hasInstance])return!!i[Symbol.hasInstance](n);return n instanceof i}function _ts_generator(n,i){var a,r,p,d,y={label:0,sent:function(){if(1&p[0])throw p[1];return p[1]},trys:[],ops:[]};return d={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(d[Symbol.iterator]=function(){return this}),d;function verb(n){return function(i){return step([n,i])}}function step(d){if(a)throw new TypeError("Generator is already executing.");while(y)try{if(a=1,r&&(p=2&d[0]?r.return:d[0]?r.throw||((p=r.return)&&p.call(r),0):r.next)&&!(p=p.call(r,d[1])).done)return p;if(r=0,p)d=[2&d[0],p.value];switch(d[0]){case 0:case 1:p=d;break;case 4:y.label++;return{value:d[1],done:false};case 5:y.label++;r=d[1];d=[0];continue;case 7:d=y.ops.pop();y.trys.pop();continue;default:if(p=y.trys,!(p=p.length>0&&p[p.length-1])&&(6===d[0]||2===d[0])){y=0;continue}if(3===d[0]&&(!p||d[1]>p[0]&&d[1]<p[3])){y.label=d[1];break}if(6===d[0]&&y.label<p[1]){y.label=p[1];p=d;break}if(p&&y.label<p[2]){y.label=p[2];y.ops.push(d);break}if(p[2])y.ops.pop();y.trys.pop();continue}d=i.call(n,y)}catch(n){d=[6,n];r=0}finally{a=p=0}if(5&d[0])throw d[1];return{value:d[0]?d[1]:void 0,done:true}}}System.register("chunks:///main.js",["./Screens-b0c12294.js","cc"],function(){var n,i,a,r,p,d,y,m,g,b,C,S,k,E,w,T,R,_,A,B,P,L,O,D,I,N,G,M,F,z,x,U,H,j,V,W,K,q,Y,J,X,Z,Q,$,ee,et,en,ei,ea,eo,er,es,el,eu,ec,eh,ep,ed,ev,ey,ef,em,eg,eb,eC,eS,ek,eE,ew,eT,eR,e_,eA,eB,eP,eL,eO,eD,eI,eN,eG,eM,eF,ez,ex,eU,eH,ej,eV,eW,eK,eq,eY,eJ,eX,eZ,eQ,e$,e0,e1,e2,e3,e4,e5,e7,e6,e9,e8,te,tt;return{setters:[function(K){n=K._,i=K.a,a=K.b,r=K.c,p=K.d,d=K.e,y=K.f,m=K.C,g=K.G,b=K.g,C=K.h,S=K.S,k=K.A,E=K.i,w=K.j,T=K.k,R=K.l,_=K.m,A=K.n,B=K.o,P=K.p,L=K.q,O=K.r,D=K.s,I=K.t,N=K.u,G=K.v,M=K.w,F=K.x,z=K.E,x=K.y,U=K.z,H=K.B,j=K.M,V=K.D,W=K.F},function(n){K=n.cclegacy,q=n._decorator,Y=n.Node,J=n.Color,X=n.Canvas,Z=n.UITransform,Q=n.instantiate,$=n.Label,ee=n.RichText,et=n.Toggle,en=n.Button,ei=n.director,ea=n.Component,eo=n.Animation,er=n.CCString,es=n.CCInteger,el=n.Sprite,eu=n.game,ec=n.CCBoolean,eh=n.EventTouch,ep=n.Vec3,ed=n.Input,ev=n.UIOpacity,ey=n.Graphics,ef=n.profiler,em=n.sys,eg=n.Font,eb=n.Director,eC=n.Layers,eS=n.ERigidBody2DType,ek=n.RigidBody2D,eE=n.sp,ew=n.Vec2,eT=n.Collider2D,eR=n.Contact2DType,e_=n.math,eA=n.SpriteFrame,eB=n.HingeJoint2D,eP=n.RelativeJoint2D,eL=n.BoxCollider2D,eO=n.Prefab,eD=n.CircleCollider2D,eI=n.resources,eN=n.Mask,eG=n.PolygonCollider2D,eM=n.NodePool,eF=n.tween,ez=n.ccenum,ex=n.CCFloat,eU=n.find,eH=n.Tween,ej=n.PhysicsSystem2D,eV=n.ERaycast2DType,eW=n.Intersection2D,eK=n.JsonAsset,eq=n.ProgressBar,eY=n.EPhysics2DDrawFlags,eJ=n.DistanceJoint2D,eX=n.repeat,eZ=n.Enum,eQ=n.lerp,e$=n.approx,e0=n.EPSILON,e1=n.RealCurve,e2=n.Gradient,e3=n.bits,e4=n.random,e5=n.randomRange,e7=n.randomRangeInt,e6=n.pseudoRandom,e9=n.Material,e8=n.toRadian,te=n.ParticleSystem2D,tt=n.View}],execute:function(){var tn,ti,ta,to,tr,ts,tl,tu;K._RF.push({},"b2bd1+njXxJxaFY3ymm06WU","debug-view-runtime-control",void 0);var tc,th,tp,td,tv,ty,tf,tm,tg,tb=q.ccclass,tC=q.property;tn=tb("internal.DebugViewRuntimeControl"),ti=tC(Y),ta=tC(Y),to=tC(Y),tn((ts=n((tr=function(n){i(l,n);var m=a(l);function l(){var n;r(this,l);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=m.call.apply(m,[this].concat(a)),p(n,"compositeModeToggle",ts,d(n)),p(n,"singleModeToggle",tl,d(n)),p(n,"EnableAllCompositeModeButton",tu,d(n)),n._single=0,n.strSingle=["No Single Debug","Vertex Color","Vertex Normal","Vertex Tangent","World Position","Vertex Mirror","Face Side","UV0","UV1","UV Lightmap","Project Depth","Linear Depth","Fragment Normal","Fragment Tangent","Fragment Binormal","Base Color","Diffuse Color","Specular Color","Transparency","Metallic","Roughness","Specular Intensity","IOR","Direct Diffuse","Direct Specular","Direct All","Env Diffuse","Env Specular","Env All","Emissive","Light Map","Shadow","AO","Fresnel","Direct Transmit Diffuse","Direct Transmit Specular","Env Transmit Diffuse","Env Transmit Specular","Transmit All","Direct Internal Specular","Env Internal Specular","Internal All","Fog"],n.strComposite=["Direct Diffuse","Direct Specular","Env Diffuse","Env Specular","Emissive","Light Map","Shadow","AO","Normal Map","Fog","Tone Mapping","Gamma Correction","Fresnel","Transmit Diffuse","Transmit Specular","Internal Specular","TT"],n.strMisc=["CSM Layer Coloration","Lighting With Albedo"],n.compositeModeToggleList=[],n.singleModeToggleList=[],n.miscModeToggleList=[],n.textComponentList=[],n.labelComponentList=[],n.textContentList=[],n._currentColorIndex=0,n.strColor=["<color=#ffffff>","<color=#000000>","<color=#ff0000>","<color=#00ff00>","<color=#0000ff>"],n.color=[J.WHITE,J.BLACK,J.RED,J.GREEN,J.BLUE],n}return y(l,[{key:"start",value:function(){if(this.node.parent.getComponent(X)){var n=this.node.parent.getComponent(Z),i=.5*n.width,a=.5*n.height,r=.1*i-i,p=a-.1*a,d=this.node.getChildByName("MiscMode"),y=Q(d);y.parent=this.node,y.name="Buttons";var m=Q(d);m.parent=this.node,m.name="Titles";for(var g=0;g<2;g++){var b=Q(this.EnableAllCompositeModeButton.getChildByName("Label"));b.setPosition(r+(g>0?450:150),p,0),b.setScale(.75,.75,.75),b.parent=m;var C=b.getComponent($);C.string=g?"----------Composite Mode----------":"----------Single Mode----------",C.color=J.WHITE,C.overflow=0,this.labelComponentList[this.labelComponentList.length]=C}p-=20;for(var S=0,k=0;k<this.strSingle.length;k++,S++){k===this.strSingle.length>>1&&(r+=200,S=0);var E=k?Q(this.singleModeToggle):this.singleModeToggle;E.setPosition(r,p-20*S,0),E.setScale(.5,.5,.5),E.parent=this.singleModeToggle.parent;var w=E.getComponentInChildren(ee);w.string=this.strSingle[k],this.textComponentList[this.textComponentList.length]=w,this.textContentList[this.textContentList.length]=w.string,E.on(et.EventType.TOGGLE,this.toggleSingleMode,this),this.singleModeToggleList[k]=E}r+=200,this.EnableAllCompositeModeButton.setPosition(r+15,p,0),this.EnableAllCompositeModeButton.setScale(.5,.5,.5),this.EnableAllCompositeModeButton.on(en.EventType.CLICK,this.enableAllCompositeMode,this),this.EnableAllCompositeModeButton.parent=y;var T=this.EnableAllCompositeModeButton.getComponentInChildren($);this.labelComponentList[this.labelComponentList.length]=T;var R=Q(this.EnableAllCompositeModeButton);R.setPosition(r+90,p,0),R.setScale(.5,.5,.5),R.on(en.EventType.CLICK,this.changeTextColor,this),R.parent=y,(T=R.getComponentInChildren($)).string="TextColor",this.labelComponentList[this.labelComponentList.length]=T;var _=Q(this.EnableAllCompositeModeButton);_.setPosition(r+200,p,0),_.setScale(.5,.5,.5),_.on(en.EventType.CLICK,this.hideUI,this),_.parent=this.node.parent,(T=_.getComponentInChildren($)).string="Hide UI",this.labelComponentList[this.labelComponentList.length]=T,this.hideButtonLabel=T,p-=40;for(var A=0;A<this.strMisc.length;A++){var B=Q(this.compositeModeToggle);B.setPosition(r,p-20*A,0),B.setScale(.5,.5,.5),B.parent=d;var P=B.getComponentInChildren(ee);P.string=this.strMisc[A],this.textComponentList[this.textComponentList.length]=P,this.textContentList[this.textContentList.length]=P.string,B.getComponent(et).isChecked=!!A,B.on(et.EventType.TOGGLE,A?this.toggleLightingWithAlbedo:this.toggleCSMColoration,this),this.miscModeToggleList[A]=B}p-=150;for(var L=0;L<this.strComposite.length;L++){var O=L?Q(this.compositeModeToggle):this.compositeModeToggle;O.setPosition(r,p-20*L,0),O.setScale(.5,.5,.5),O.parent=this.compositeModeToggle.parent;var D=O.getComponentInChildren(ee);D.string=this.strComposite[L],this.textComponentList[this.textComponentList.length]=D,this.textContentList[this.textContentList.length]=D.string,O.on(et.EventType.TOGGLE,this.toggleCompositeMode,this),this.compositeModeToggleList[L]=O}}}},{key:"isTextMatched",value:function(n,i){var a=new String(n),r=a.search(">");return -1===r?n===i:(a=(a=a.substr(r+1)).substr(0,a.search("<")))===i}},{key:"toggleSingleMode",value:function(n){for(var i=ei.root.debugView,a=n.getComponentInChildren(ee),r=0;r<this.strSingle.length;r++)this.isTextMatched(a.string,this.strSingle[r])&&(i.singleMode=r)}},{key:"toggleCompositeMode",value:function(n){for(var i=ei.root.debugView,a=n.getComponentInChildren(ee),r=0;r<this.strComposite.length;r++)this.isTextMatched(a.string,this.strComposite[r])&&i.enableCompositeMode(r,n.isChecked)}},{key:"toggleLightingWithAlbedo",value:function(n){ei.root.debugView.lightingWithAlbedo=n.isChecked}},{key:"toggleCSMColoration",value:function(n){ei.root.debugView.csmLayerColoration=n.isChecked}},{key:"enableAllCompositeMode",value:function(n){var i=ei.root.debugView;i.enableAllCompositeMode(!0);for(var a=0;a<this.compositeModeToggleList.length;a++)this.compositeModeToggleList[a].getComponent(et).isChecked=!0;var r=this.miscModeToggleList[0].getComponent(et);r.isChecked=!1,i.csmLayerColoration=!1,(r=this.miscModeToggleList[1].getComponent(et)).isChecked=!0,i.lightingWithAlbedo=!0}},{key:"hideUI",value:function(n){var i=this.node.getChildByName("Titles"),a=!i.active;this.singleModeToggleList[0].parent.active=a,this.miscModeToggleList[0].parent.active=a,this.compositeModeToggleList[0].parent.active=a,this.EnableAllCompositeModeButton.parent.active=a,i.active=a,this.hideButtonLabel.string=a?"Hide UI":"Show UI"}},{key:"changeTextColor",value:function(n){this._currentColorIndex++,this._currentColorIndex>=this.strColor.length&&(this._currentColorIndex=0);for(var i=0;i<this.textComponentList.length;i++)this.textComponentList[i].string=this.strColor[this._currentColorIndex]+this.textContentList[i]+"</color>";for(var a=0;a<this.labelComponentList.length;a++)this.labelComponentList[a].color=this.color[this._currentColorIndex]}},{key:"onLoad",value:function(){}},{key:"update",value:function(n){}}]),l}(ea)).prototype,"compositeModeToggle",[ti],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),tl=n(tr.prototype,"singleModeToggle",[ta],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),tu=n(tr.prototype,"EnableAllCompositeModeButton",[to],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),tr));K._RF.pop(),K._RF.push({},"60ac3vor0dMT5bXi8D3VSJN","BubbleAnimation",void 0);var tS=q.ccclass,tk=q.property,tE=(tc=tS("BubbleAnimation"),th=tk(eo),tp=tk(er),td=tk(es),tc((tf=n((ty=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=g.call.apply(g,[this].concat(a)),p(n,"animation",tf,d(n)),p(n,"clipName",tm,d(n)),p(n,"repeat",tg,d(n)),n.currentRepeat=-1,n}return y(u,[{key:"__preload",value:function(){this.animation=this.getComponent(eo),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"play",value:function(){var n=this;this.animation&&this.animation.clips.find(function(i){return(null==i?void 0:i.name)===n.clipName})&&(this.currentRepeat=-1,this.animation.play(this.clipName))}},{key:"onBubbleAnimationLoop",value:function(){this.animation&&-1!==this.repeat&&(this.currentRepeat++,this.currentRepeat>this.repeat&&this.animation.stop())}}]),u}(ea)).prototype,"animation",[th],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),tm=n(ty.prototype,"clipName",[tp],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"Bubble"}}),tg=n(ty.prototype,"repeat",[td],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return -1}}),tv=ty))||tv);K._RF.pop(),K._RF.push({},"ca427NpeqpC3bUoGTd9I/BM","Background",void 0);var tw=q.ccclass,tT=b.Layout;tw("Background")(function(n){i(o,n);var p=a(o);function o(){var n;r(this,o);for(var i=arguments.length,a=new Array(i),d=0;d<i;d++)a[d]=arguments[d];return(n=p.call.apply(p,[this].concat(a))).handleSpriteTypeWhenLayoutChanged=function(i){i===tT.Landscape?n.setBackgroundType(el.Type.TILED):n.setBackgroundType(el.Type.SIMPLE)},n}return y(o,[{key:"__preload",value:function(){this.sprite=this.getComponent(el),this.validateRequiredComponents(),this.listenGameEvents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"listenGameEvents",value:function(){eu.on(g.LAYOUT_CHANGED,this.handleSpriteTypeWhenLayoutChanged)}},{key:"setBackgroundType",value:function(n){this.sprite&&(this.sprite.type=n)}}]),o}(ea));K._RF.pop(),K._RF.push({},"7ddc4vU74pB/LdHrUupDA/G","BlockLines",void 0);var tR,t_,tA,tB,tP,tL,tO,tD,tI,tN,tG,tM,tF,tz,tx,tU,tH,tj=q.ccclass,tV=b.Layout;tj("BlockLines")(function(n){i(o,n);var p=a(o);function o(){var n;r(this,o);for(var i=arguments.length,a=new Array(i),d=0;d<i;d++)a[d]=arguments[d];return(n=p.call.apply(p,[this].concat(a))).handleSpriteTypeWhenLayoutChanged=function(i){i===tV.Landscape?n.setActiveBlockLines(!0):n.setActiveBlockLines(!1)},n}return y(o,[{key:"__preload",value:function(){this.componentSprites=this.getComponentsInChildren(el),this.validateRequiredComponents(),this.listenGameEvents(),this.handleBlockLinesOnStart()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"handleBlockLinesOnStart",value:function(){var n=this.getScreenRatio()>1;this.setActiveBlockLines(n)}},{key:"listenGameEvents",value:function(){eu.on(g.LAYOUT_CHANGED,this.handleSpriteTypeWhenLayoutChanged)}},{key:"setActiveBlockLines",value:function(n){var i=this;this.componentSprites&&this.componentSprites.forEach(function(a){a.node!==i.node&&(a.node.active=n)})}},{key:"getScreenRatio",value:function(){return C.getScreenWidthCss()/C.getScreenHeightCss()}}]),o}(ea));K._RF.pop(),K._RF.push({},"4b299Dv1kVGcqQmJC9yBPAV","ButtonReleased",void 0);var tW,tK,tq,tY,tJ=q.ccclass,tX=q.requireComponent,tZ=q.property,tQ=q.disallowMultiple,t$=q.executionOrder,t0=globalThis.game.analytics;tR=tJ("ButtonReleased"),t_=tX([eo,en]),tA=t$(120),tB=tZ(er),tP=tZ(er),tL=tZ(ec),tO=tZ({visible:function(){return this.useSound},type:S}),tD=tZ({tooltip:"Add a delay after click to prevent spamming (not apply for cancel click)"}),tI=tZ({visible:function(){return this.disableSpamClick},tooltip:"Delay time in seconds"}),tR(tN=tQ(tN=t_(tN=tA((tM=n((tG=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=g.call.apply(g,[this].concat(a)),p(n,"downClipName",tM,d(n)),p(n,"upClipName",tF,d(n)),p(n,"useSound",tz,d(n)),p(n,"soundKey",tx,d(n)),p(n,"disableSpamClick",tU,d(n)),p(n,"disableSpamDelay",tH,d(n)),n.currentClickBoundingBox=null,n.hasDown=!1,n.hasUp=!1,n.onTouchStart=function(i){n.buttonComponent.interactable&&(n.hasDown||(n.currentClickBoundingBox=C.getBoundingBoxToWorld(n.node),n.hasDown=!0,n.runAnimation(n.downClipName),n.useSound&&k.playSound(E[n.soundKey])))},n.onTouchEnd=function(i){n.buttonComponent.interactable&&n.hasDown&&(n.hasUp||n.handleUp(i))},n.onTouchCancel=function(i){var a,r;if(n.buttonComponent.interactable&&n.hasDown&&!n.hasUp){var p=i.getUILocation(),d=null!==(a=null===(r=n.currentClickBoundingBox)||void 0===r?void 0:r.contains(p))&&void 0!==a&&a;_instanceof(i,eh)&&d?n.handleUp(i):(n.hasUp=!0,n.runAnimation(n.upClipName),n.animationComponent.once(eo.EventType.FINISHED,function(){n.handleResetButtonState()}))}},n.handleResetButtonState=function(){var i;if(n.hasDown=!1,n.hasUp=!1,n.buttonComponent){var a=n.buttonComponent.node.scale.x,r=n.buttonComponent.node.scale.z;null===(i=n.buttonComponent)||void 0===i||i.node.setScale(new ep(a,1,r))}},n}return y(u,[{key:"__preload",value:function(){this.buttonComponent=this.getComponent(en),this.animationComponent=this.getComponent(eo),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"onEnable",value:function(){this.animationComponent.clips.length<2||(this.node.off(ed.EventType.TOUCH_END,this.buttonComponent._onTouchEnded,this.buttonComponent),this.node.on(Y.EventType.TOUCH_START,this.onTouchStart),this.node.on(Y.EventType.TOUCH_END,this.onTouchEnd),this.node.on(Y.EventType.TOUCH_CANCEL,this.onTouchCancel))}},{key:"onDisable",value:function(){this.node.off(Y.EventType.TOUCH_START,this.onTouchStart),this.node.off(Y.EventType.TOUCH_END,this.onTouchEnd),this.node.off(Y.EventType.TOUCH_CANCEL,this.onTouchCancel),this.unschedule(this.handleResetButtonState),this.handleResetButtonState()}},{key:"handleUp",value:function(n){var i=this;this.hasUp=!0,this.runAnimation(this.upClipName),this.animationComponent.once(eo.EventType.FINISHED,function(){if(i.disableSpamClick?i.scheduleOnce(i.handleResetButtonState,i.disableSpamDelay):i.handleResetButtonState(),!i.buttonComponent||i.buttonComponent.interactable){t0.event(GameCore.Plugins.Analytics.Events.BUTTON_CLICK,{button_name:i.node.name,screen_name:w.getCurrentPage()});var a=i.buttonComponent.clickEvents;if(a){var r,p=T(a);try{for(p.s();!(r=p.n()).done;){var d=r.value;d.emit([n,d.customEventData])}}catch(n){p.e(n)}finally{p.f()}}}})}},{key:"runAnimation",value:function(n){if(!this.isAnimationExist(n))throw new Error("".concat(this.node.name,": Animation component must have ").concat(n," clip"));this.animationComponent.play(n)}},{key:"isAnimationExist",value:function(n){return this.animationComponent.clips.some(function(i){return!(!i||i.name!==n)})}}]),u}(ea)).prototype,"downClipName",[tB],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"ButtonDown"}}),tF=n(tG.prototype,"upClipName",[tP],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"ButtonUp"}}),tz=n(tG.prototype,"useSound",[tL],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),tx=n(tG.prototype,"soundKey",[tO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return S[R.BUTTON_CLICK]}}),tU=n(tG.prototype,"disableSpamClick",[tD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),tH=n(tG.prototype,"disableSpamDelay",[tI],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return .5}}),tN=tG))||tN)||tN)||tN);K._RF.pop(),K._RF.push({},"0e570DdAIZPKY6DNtNerFmX","OpacityToggler",void 0);var t1,t2,t3,t4=q.ccclass,t5=q.requireComponent,t7=q.property,t6=t4("OpacityToggler")(tW=t5([ev])((tq=n((tK=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=g.call.apply(g,[this].concat(a)),p(n,"activeValue",tq,d(n)),p(n,"inActiveValue",tY,d(n)),n}return y(u,[{key:"__preload",value:function(){this.opacityComponent=this.getComponent(ev),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"changeState",value:function(n){var i=arguments.length>0&&void 0!==n&&n;this.opacityComponent.opacity=i?this.activeValue:this.inActiveValue}}]),u}(ea)).prototype,"activeValue",[t7],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 255}}),tY=n(tK.prototype,"inActiveValue",[t7],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 128}}),tW=tK))||tW)||tW;K._RF.pop(),K._RF.push({},"7ef37Q3PZpKYaeik5JzGwNy","DebugResolution",void 0);var t9,t8,ne,nt,nn,ni,na,no,nr,ns,nl,nu,nc,nh,np,nd,nv,ny,nf,nm,ng=q.ccclass,nb=q.property,nC=q.requireComponent,nS=q.disallowMultiple,nk=q.executeInEditMode,nE=b.DesignSize,nw=nE.Portrait,nT=nE.Landscape;ng("DebugResolution")(t1=nS(t1=nC([ey])(t1=nk(!0)(((t3=function(n){i(o,n);var p=a(o);function o(){var n;r(this,o);for(var i=arguments.length,a=new Array(i),d=0;d<i;d++)a[d]=arguments[d];return(n=p.call.apply(p,[this].concat(a))).handleLayoutChange=function(){var i;null===(i=n.graphics)||void 0===i||i.clear(),n.start()},n}return y(o,[{key:"drawPortrait",get:function(){return o._drawPortrait},set:function(n){n!==o._drawPortrait&&(n?this.drawPortraitResolution():this.graphics.clear(),o._drawPortrait=n,o._drawLandscape&&this.drawLandscapeResolution())}},{key:"drawLandscape",get:function(){return o._drawLandscape},set:function(n){n!==o._drawLandscape&&(n?this.drawLandscapeResolution():this.graphics.clear(),o._drawLandscape=n,o._drawPortrait&&this.drawPortraitResolution())}},{key:"__preload",value:function(){this.graphics=this.getComponent(ey),this.validateRequiredComponents(),this.listenGameEvents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"listenGameEvents",value:function(){eu.on(g.LAYOUT_CHANGED,this.handleLayoutChange)}},{key:"start",value:function(){this.drawPortrait&&this.drawPortraitResolution(),this.drawLandscape&&this.drawLandscapeResolution()}},{key:"drawPortraitResolution",value:function(){var n=this.graphics;if(n){var i=nw.WIDTH,a=nw.HEIGHT,r=-i/2,p=-a/2;n.strokeColor=J.GREEN,n.rect(r,p,i,a),n.stroke()}}},{key:"drawLandscapeResolution",value:function(){var n=this.graphics;if(n){var i=nT.WIDTH,a=nT.HEIGHT,r=-i/2,p=-a/2;n.strokeColor=J.CYAN,n.rect(r,p,i,a),n.stroke()}}}]),o}(ea))._drawPortrait=!0,t3._drawLandscape=!0,n((t2=t3).prototype,"drawPortrait",[nb],Object.getOwnPropertyDescriptor(t2.prototype,"drawPortrait"),t2.prototype),n(t2.prototype,"drawLandscape",[nb],Object.getOwnPropertyDescriptor(t2.prototype,"drawLandscape"),t2.prototype),t1=t2))||t1)||t1)||t1);K._RF.pop(),K._RF.push({},"0e2d6yn/BVObK1kyTJ5a09a","GameStats",void 0);var nR,n_,nA,nB,nP,nL,nO,nD,nI,nN,nG,nM,nF,nz,nx=q.ccclass,nU=q.executionOrder,nH=q.property,nj=GameCore.Utils,nV=J.RED,nW=J.BLACK,nK=J.MAGENTA;t9=nx("GameStats"),t8=nU(-1e3),ne=nH($),nt=nH($),nn=nH($),ni=nH($),na=nH($),no=nH($),nr=nH($),ns=nH($),t9(nl=t8((nc=n((nu=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=g.call.apply(g,[this].concat(a)),p(n,"fpsLabel",nc,d(n)),p(n,"drawCountLabel",nh,d(n)),p(n,"logicTimeLabel",np,d(n)),p(n,"physicTimeLabel",nd,d(n)),p(n,"renderTimeLabel",nv,d(n)),p(n,"objectMemoryUsageLabel",ny,d(n)),p(n,"textureMemoryUsageLabel",nf,d(n)),p(n,"devicePixelRatioLabel",nm,d(n)),n.refreshInterval=.5,n.handleMouseDown=function(){n.bg.enabled=!n.bg.enabled},n.waitForStats=function(){ef.stats&&(n.unschedule(n.waitForStats),n.node.active=!0,n.stats=ef.stats,n.startUpdateStats())},n.updateStats=function(){n.updateFps(),n.updateDrawCalls(),n.updateLogicTime(),n.updatePhysicTime(),n.updateRenderTime(),n.updateObjectMemoryUsage(),n.updateTextureMemoryUsage(),n.updateDevicePixelRatio()},n}return y(u,[{key:"__preload",value:function(){this.bg=this.getComponent(el),this.validateRequiredComponents(),this.listenInputEvents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"listenInputEvents",value:function(){this.node.on(ed.EventType.TOUCH_START,this.handleMouseDown)}},{key:"start",value:function(){this.bg.enabled=!1,this.node.active=!1,ef&&nj.Valid.isDebugger()&&(ef.showStats(),this.schedule(this.waitForStats,.5,20))}},{key:"startUpdateStats",value:function(){this.schedule(this.updateStats,this.refreshInterval)}},{key:"updateFps",value:function(){var n=this.getFps();this.updateFpsColor(n),this.fpsLabel.string="FPS: ".concat(n)}},{key:"updateFpsColor",value:function(n){this.fpsLabel.color=n<30?nV:n<48?nK:nW}},{key:"updateDrawCalls",value:function(){var n=this.getDrawCalls();this.updateDrawCallsColor(n),this.drawCountLabel.string="Draw Calls: ".concat(n)}},{key:"updateDrawCallsColor",value:function(n){var i=em.os===em.OS.IOS,a=i?80:25,r=i?60:15;this.drawCountLabel.color=n>a?nV:n>r?nK:nW}},{key:"updateLogicTime",value:function(){var n=this.getLogicTime();this.updateLogicTimeColor(n),this.logicTimeLabel.string="Logic Time: ".concat(n.toFixed(2),"ms")}},{key:"updateLogicTimeColor",value:function(n){this.logicTimeLabel.color=n>10?nV:n>5?nK:nW}},{key:"updatePhysicTime",value:function(){var n=this.getPhysicTime();this.updatePhysicTimeColor(n),this.physicTimeLabel.string="Physic Time: ".concat(n.toFixed(2),"ms")}},{key:"updatePhysicTimeColor",value:function(n){this.physicTimeLabel.color=n>10?nV:n>5?nK:nW}},{key:"updateRenderTime",value:function(){var n=this.getRenderTime();this.updateRenderTimeColor(n),this.renderTimeLabel.string="Render Time: ".concat(n.toFixed(2),"ms")}},{key:"updateRenderTimeColor",value:function(n){this.renderTimeLabel.color=n>10?nV:n>5?nK:nW}},{key:"updateObjectMemoryUsage",value:function(){var n=this.getObjectMemoryUsage();this.updateObjectMemoryUsageColor(n),this.objectMemoryUsageLabel.string="Object Mem: ".concat(n.toFixed(2),"MB")}},{key:"updateObjectMemoryUsageColor",value:function(n){this.objectMemoryUsageLabel.color=n>40?nV:n>25?nK:nW}},{key:"updateTextureMemoryUsage",value:function(){var n=this.getTextureMemoryUsage();this.updateTextureMemoryUsageColor(n),this.textureMemoryUsageLabel.string="Texture Mem: ".concat(n.toFixed(2),"MB")}},{key:"updateTextureMemoryUsageColor",value:function(n){this.textureMemoryUsageLabel.color=n>50?nV:n>35?nK:nW}},{key:"updateDevicePixelRatio",value:function(){var n=this.getDevicePixelRatio();this.updateDevicePixelRatioColor(n),this.devicePixelRatioLabel.string="Device Pixel Ratio: ".concat(n)}},{key:"updateDevicePixelRatioColor",value:function(n){this.devicePixelRatioLabel.color=n>2?nV:n<=1?nK:nW}},{key:"getFps",value:function(){var n=this.stats.fps.counter;return Math.floor(n.value)||0}},{key:"getDrawCalls",value:function(){return this.stats.draws.counter.value||0}},{key:"getLogicTime",value:function(){var n=this.stats.logic.counter;return Math.floor(1e3*n.value)/1e3||0}},{key:"getPhysicTime",value:function(){var n=this.stats.physics.counter;return Math.floor(1e3*n.value)/1e3||0}},{key:"getRenderTime",value:function(){var n=this.stats.render.counter;return Math.floor(1e3*n.value)/1e3||0}},{key:"getObjectMemoryUsage",value:function(){var n=this.stats.bufferMemory.counter;return Math.floor(1e3*n.value)/1e3||0}},{key:"getTextureMemoryUsage",value:function(){var n=this.stats.textureMemory.counter;return Math.floor(1e3*n.value)/1e3||0}},{key:"getDevicePixelRatio",value:function(){return window.devicePixelRatio||0}}]),u}(ea)).prototype,"fpsLabel",[ne],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nh=n(nu.prototype,"drawCountLabel",[nt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),np=n(nu.prototype,"logicTimeLabel",[nn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nd=n(nu.prototype,"physicTimeLabel",[ni],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nv=n(nu.prototype,"renderTimeLabel",[na],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ny=n(nu.prototype,"objectMemoryUsageLabel",[no],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nf=n(nu.prototype,"textureMemoryUsageLabel",[nr],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nm=n(nu.prototype,"devicePixelRatioLabel",[ns],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nl=nu))||nl);K._RF.pop(),K._RF.push({},"aa4b0d0u0hLeqd3+/PQZ/QD","SwitchButton",void 0);var nq,nY,nJ,nX,nZ,nQ,n$,n0,n1,n2,n3=q.ccclass,n4=q.property,n5=q.requireComponent,n7=globalThis.game.analytics,n6=(nR=n3("SwitchButton"),n_=n5([en]),nA=n4(ec),nB=n4(Y),nP=n4(Y),nL=n4(ec),nO=n4({visible:function(){return this.useSound},type:S}),nR(nD=n_((nN=n((nI=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=g.call.apply(g,[this].concat(a)),p(n,"enable",nN,d(n)),p(n,"nodeOn",nG,d(n)),p(n,"nodeOff",nM,d(n)),p(n,"useSound",nF,d(n)),p(n,"soundKey",nz,d(n)),n}return y(u,[{key:"__preload",value:function(){this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"switch",value:function(){return!!this.node.active&&(n7.event(GameCore.Plugins.Analytics.Events.BUTTON_CLICK,{button_name:this.node.name,enable:!this.enable}),this.useSound&&k.playSound(E[this.soundKey]),this.updateStatus(!this.enable))}},{key:"setEnabled",value:function(n){this.node.active&&this.updateStatus(n)}},{key:"updateStatus",value:function(n){return this.enable=n,this.nodeOn.active=n,this.nodeOff.active=!n,n}}]),u}(ea)).prototype,"enable",[nA],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),nG=n(nI.prototype,"nodeOn",[nB],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nM=n(nI.prototype,"nodeOff",[nP],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nF=n(nI.prototype,"useSound",[nL],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),nz=n(nI.prototype,"soundKey",[nO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return S[R.BUTTON_CLICK]}}),nD=nI))||nD)||nD);K._RF.pop(),K._RF.push({},"bce15LcVrxOfYMa9rbXN/qi","Localize",void 0);var n9,n8,ie,it,ii,ia,io,ir,is,il,iu,ic,ih,ip,id,iv,iy,im,ig,ib,iC,iS,ik,iE,iw,iT,iR=q.ccclass,i_=q.property,iA=q.requireComponent,iB=q.executeInEditMode,iP=q.disallowMultiple,iL=globalThis.game.language;nq=iR("Localize"),nY=iA($),nJ=iB(!0),nX=i_({visible:!0}),nZ=i_({group:{name:"Fonts",id:"fonts",displayOrder:1},type:eg}),nQ=i_({group:{name:"Fonts",id:"fonts",displayOrder:2},type:eg}),nq(n$=iP(n$=nY(n$=nJ((n((n0=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=g.call.apply(g,[this].concat(a)),p(n,"enFont",n1,d(n)),p(n,"ruFont",n2,d(n)),n.handleLanguageChanged=function(){n.updateTransToNode()},n}return y(u,[{key:"key",get:function(){return this._key},set:function(n){n&&(this._key=n,this.updateTransToNode())}},{key:"__preload",value:function(){this.label=this.getComponent($),this.validateRequiredComponents(),this.updateTransToNode()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"start",value:function(){this.listenEvent()}},{key:"listenEvent",value:function(){eu.on("update-language",this.handleLanguageChanged)}},{key:"updateTransToNode",value:function(){if(this.node.active&&this._key)try{var n=iL.getText(this._key),i=this.getFontByLang();this.label.font=i,this.label.string=n,this.node.emit("update-trans",n)}catch(n){}}},{key:"getFontByLang",value:function(){if(!this.enFont||!this.ruFont)throw new Error("Font is not found");switch(iL.getCurrentLocale()){case"en":return this.enFont;case"ru":return this.ruFont;default:return this.enFont}}}]),u}(ea)).prototype,"key",[nX],Object.getOwnPropertyDescriptor(n0.prototype,"key"),n0.prototype),n1=n(n0.prototype,"enFont",[nZ],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),n2=n(n0.prototype,"ruFont",[nQ],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),n$=n0))||n$)||n$)||n$);K._RF.pop(),K._RF.push({},"a2260jBMJFPCrn/Q4Vo4iB1","BatchNodes",void 0);var iO,iD=q.ccclass,iI=q.executionOrder,iN=q.property,iG=GameCore.Utils.Function,iM="Batch By Name",iF="Batch Label",iz="Batch Sprite";n9=iD("BatchNodes"),n8=iI(99999),ie=iN({group:{name:iM}}),it=iN({type:[es],group:{name:iM}}),ii=iN({type:[er],group:{name:iM}}),ia=iN({group:{name:iF}}),io=iN({group:{name:iF}}),ir=iN({group:{name:iF}}),is=iN({group:{name:iz}}),il=iN({group:{name:iz}}),iu=iN({readonly:!0}),ic=iN({readonly:!0}),ih=iN({readonly:!0}),n9(ip=n8((iv=n((id=function(n){i(l,n);var m=a(l);function l(){var n;r(this,l);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=m.call.apply(m,[this].concat(a)),p(n,"batchByName",iv,d(n)),p(n,"depthNames",iy,d(n)),p(n,"listName",im,d(n)),p(n,"batchLabel",ig,d(n)),p(n,"depthLabel",ib,d(n)),p(n,"typeLabel",iC,d(n)),p(n,"batchSprite",iS,d(n)),p(n,"depthSprite",ik,d(n)),p(n,"batchAllNodes",iE,d(n)),p(n,"batchDepth",iw,d(n)),p(n,"checkOverlap",iT,d(n)),n.batchNode={},n.labelChildren=[],n.spriteChildren=[],n.allChildren=[],n.nameChildren=[],n.originalParents={},n.isInited=!1,n.handleNodeChange=iG.throttle(function(){n.isInited&&n.setupBatchNodes(n.node)},1e3),n.onAfterUpdate=function(){n.isInited&&n.hierarchyChildren()},n.onAfterRender=function(){n.isInited&&n.restoreOriginalChildren()},n}return y(l,[{key:"__preload",value:function(){this.enabled&&(ei.on(eb.EVENT_AFTER_UPDATE,this.onAfterUpdate),ei.on(eb.EVENT_AFTER_RENDER,this.onAfterRender))}},{key:"onDestroy",value:function(){ei.off(eb.EVENT_AFTER_UPDATE,this.onAfterUpdate),ei.off(eb.EVENT_AFTER_RENDER,this.onAfterRender)}},{key:"onLoad",value:function(){this.enabled&&(this.setupBatchNodes(this.node),this.isInited=!0)}},{key:"onEnable",value:function(){this.isInited||(ei.on(eb.EVENT_AFTER_UPDATE,this.onAfterUpdate),ei.on(eb.EVENT_AFTER_RENDER,this.onAfterRender),this.setupBatchNodes(this.node),this.isInited=!0)}},{key:"handleActiveChange",value:function(n){n.once(Y.EventType.ACTIVE_IN_HIERARCHY_CHANGED,this.handleNodeChange)}},{key:"onDisable",value:function(){this.restoreOriginalChildren(),ei.off(eb.EVENT_AFTER_UPDATE,this.onAfterUpdate),ei.off(eb.EVENT_AFTER_RENDER,this.onAfterRender),this.isInited=!1}},{key:"setupBatchNodes",value:function(n){this.allChildren=[],this.nameChildren=[],this.labelChildren=[],this.spriteChildren=[],this.saveOriginalChildren(n),this.createGlobalNodes(n),this.createGlobalNameNodes(n),this.createGlobalLabelNode(n),this.createGlobalSpriteNode(n),this.sortGlobalNodes()}},{key:"sortGlobalNodes",value:function(){var n,i,a,r=this;null===(n=this.batchNode.node)||void 0===n||n.setSiblingIndex(0),null===(i=this.batchNode.label)||void 0===i||i.setSiblingIndex(this.depthLabel),null===(a=this.batchNode.sprite)||void 0===a||a.setSiblingIndex(this.depthSprite),this.listName.forEach(function(n,i){var a,p=r.depthNames[i];p&&(null===(a=r.batchNode[n])||void 0===a||a.setSiblingIndex(p))})}},{key:"createGlobalNodes",value:function(n){if(this.batchAllNodes){var i=new Y("GlobalBatchNode");i.active=!0,this.batchNode.node=i,n.addChild(i)}}},{key:"createGlobalNameNodes",value:function(n){if(this.batchByName){var i,a=T(this.listName);try{for(a.s();!(i=a.n()).done;){var r=i.value;if(!this.batchNode[r]){var p=new Y(r);p.active=!0,this.batchNode[r]=p,n.addChild(p)}}}catch(n){a.e(n)}finally{a.f()}}}},{key:"createGlobalLabelNode",value:function(n){if(this.batchLabel){var i=new Y("GlobalLabelNode");i.active=!0,this.batchNode.label=i,n.addChild(i)}}},{key:"createGlobalSpriteNode",value:function(n){if(this.batchSprite){var i=new Y("GlobalSpriteNode");i.active=!0,this.batchNode.sprite=i,n.addChild(i)}}},{key:"saveOriginalParents",value:function(){var n,i=[].concat(_(this.labelChildren),_(this.spriteChildren)),a=this.nameChildren,r=T(i);try{for(r.s();!(n=r.n()).done;){var p=n.value;p.node.parent&&(this.handleActiveChange(p.node),this.originalParents[p.uuid]=p.node.parent)}}catch(n){r.e(n)}finally{r.f()}var d,y=T(a);try{for(y.s();!(d=y.n()).done;){var m=d.value;m.parent&&(this.handleActiveChange(m),this.originalParents[m.uuid]=m.parent)}}catch(n){y.e(n)}finally{y.f()}}},{key:"saveOriginalChildren",value:function(n){var i,a=n.children,r=T(a);try{for(r.s();!(i=r.n()).done;){var p=i.value;this.saveLabelChildren(p),this.saveSpriteChildren(p),this.saveNodeChildrenByName(p),this.saveNodeChildrenByType(p)}}catch(n){r.e(n)}finally{r.f()}this.saveOriginalParents()}},{key:"saveLabelChildren",value:function(n){var i;if(this.batchLabel){var a=n.getComponentsInChildren($);"char"===this.typeLabel&&(a=a.filter(function(n){return n.cacheMode===$.CacheMode.CHAR})),0!==a.length&&(i=this.labelChildren).push.apply(i,_(a))}}},{key:"saveSpriteChildren",value:function(n){var i;if(this.batchSprite){var a=n.getComponentsInChildren(el);0!==a.length&&(i=this.spriteChildren).push.apply(i,_(a))}}},{key:"saveNodeChildrenByName",value:function(n){if(this.batchByName){var i,a=T(n.children);try{for(a.s();!(i=a.n()).done;){var r=i.value;this.listName.includes(r.name)?this.nameChildren.push(r):this.saveNodeChildrenByName(r)}}catch(n){a.e(n)}finally{a.f()}}}},{key:"saveNodeChildrenByType",value:function(n,i){var a,r=arguments.length>1&&void 0!==i?i:0;if(this.batchAllNodes){var p=n.getComponentsInChildren(ea);if((a=this.allChildren).push.apply(a,_(p)),!(this.batchDepth<1||r>=this.batchDepth)){var d,y=T(this.allChildren);try{for(y.s();!(d=y.n()).done;){var m=d.value;this.saveNodeChildrenByType(m.node,this.batchDepth)}}catch(n){y.e(n)}finally{y.f()}}}}},{key:"hierarchyChildren",value:function(){var n,t=function(n,i){n.node.isValid&&n.node.activeInHierarchy&&i&&!n.node.isChildOf(i)&&(n.node.setParent(i,!0),n.node.layer=eC.Enum.UI_2D)},i=["GlobalLabelNode","GlobalSpriteNode","GlobalBatchNode"],a=T(this.labelChildren);try{for(a.s();!(n=a.n()).done;)t(n.value,this.batchNode.label)}catch(n){a.e(n)}finally{a.f()}var r,p=T(this.spriteChildren);try{for(p.s();!(r=p.n()).done;)t(r.value,this.batchNode.sprite)}catch(n){p.e(n)}finally{p.f()}var d,y=T(this.allChildren);try{for(y.s();!(d=y.n()).done;)t(d.value,this.batchNode.node)}catch(n){y.e(n)}finally{y.f()}this.allChildren.sort(function(n,i){return n.constructor.name.localeCompare(i.constructor.name)}),this.labelChildren.sort(function(n,i){return n.cacheMode-i.cacheMode});var m,g=T(this.nameChildren);try{for(g.s();!(m=g.n()).done;){var b=m.value;if(b.isValid&&b.activeInHierarchy&&b.isTransformDirty()){var C=b.getComponent(ev);if(!(C&&C.opacity<1||i.includes(b.name))){var S=this.batchNode[b.name];S&&(b.isChildOf(S)||(b.setParent(S,!0),b.layer=eC.Enum.UI_2D))}}}}catch(n){g.e(n)}finally{g.f()}}},{key:"restoreOriginalChildren",value:function(){var n=[].concat(_(this.labelChildren),_(this.spriteChildren));if(n.length>0){var i,a=T(n);try{for(a.s();!(i=a.n()).done;){var r=i.value,p=this.originalParents[r.uuid];p&&(r.node.isChildOf(p)||r.node.setParent(p,!0))}}catch(n){a.e(n)}finally{a.f()}}var d,y=T(this.nameChildren);try{for(y.s();!(d=y.n()).done;){var m=d.value,g=this.originalParents[m.uuid];g&&(m.isChildOf(g)||m.setParent(g,!0))}}catch(n){y.e(n)}finally{y.f()}}}]),l}(ea)).prototype,"batchByName",[ie],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),iy=n(id.prototype,"depthNames",[it],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),im=n(id.prototype,"listName",[ii],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ig=n(id.prototype,"batchLabel",[ia],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ib=n(id.prototype,"depthLabel",[io],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),iC=n(id.prototype,"typeLabel",[ir],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"char"}}),iS=n(id.prototype,"batchSprite",[is],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ik=n(id.prototype,"depthSprite",[il],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),iE=n(id.prototype,"batchAllNodes",[iu],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),iw=n(id.prototype,"batchDepth",[ic],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),iT=n(id.prototype,"checkOverlap",[ih],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ip=id))||ip);K._RF.pop(),K._RF.push({},"9b958Lf6PFClb/JuJfTLzxG","Vibrate",void 0);var ix=q.ccclass,iU=GameCore.Utils,iH=globalThis.game.player,ij=ix("Vibrate")(iO=function(n){i(o,n);var p=a(o);function o(){return r(this,o),p.apply(this,arguments)}return y(o,[{key:"vibrate",value:function(n){if(this.isVibrateEnable()&&!iU.Browser.vibrate(n)){if("performHapticFeedbackAsync"in GameSDK.extra)return void GameSDK.extra.performHapticFeedbackAsync()}}},{key:"isVibrateEnable",value:function(){return!!iH.getPlayerSetting("vibrate")}}]),o}(ea))||iO;K._RF.pop(),K._RF.push({},"ad867amogBFGJo9jp78EnQP","DevTools",void 0);var iV=function(n){return n.UNLOCK_DEV_TOOLS="unlock-dev-tools",n.TRIGGER_UNLOCK_KEY="trigger-unlock-key",n.TRIGGER_RESET_SEQUENCE="trigger-reset-sequence",n}(iV||{}),iW={Events:iV,UNLOCK_SEQUENCE:"101013012031"};K._RF.pop(),K._RF.push({},"437c2Vl2gxMEIGhbeMNXO0c","EndlessProgressions",void 0);var iK={0:{beeSpeed:60,spawnRandOffset:100,targetOffsetMultiplier:0,count:[8,15]},10:{beeSpeed:60,spawnRandOffset:100,targetOffsetMultiplier:.5,count:[10,20]},20:{beeSpeed:70,spawnRandOffset:110,targetOffsetMultiplier:.6,count:[10,20]},50:{beeSpeed:70,spawnRandOffset:120,targetOffsetMultiplier:.7,count:[10,20]}};K._RF.pop(),K._RF.push({},"27033qxh65F25R336CXMYGV","BeeRole",void 0);var iq=function(n){return n[n.NORMAL=0]="NORMAL",n[n.PATH_SEEKER=1]="PATH_SEEKER",n[n.PUSHER=2]="PUSHER",n}(iq||{});K._RF.pop(),K._RF.push({},"ab23abxgeZD0KDVdLYEeAQS","BeeState",void 0);var iY=function(n){return n[n.IDLE=0]="IDLE",n[n.FLYING=1]="FLYING",n[n.WAITING_TO_SEEK_PATH=2]="WAITING_TO_SEEK_PATH",n[n.SEEKING_PATH=3]="SEEKING_PATH",n[n.ATTACKING=4]="ATTACKING",n[n.DIE=5]="DIE",n}(iY||{});K._RF.pop(),K._RF.push({},"9ef7e8FlFJOS5DAWzwBrkww","GameObject",void 0);for(var iJ=function(n){return n.AIR_FAN="air-fan",n.BALLOON="balloon",n.DOGE="doge",n.SPIDER="spider",n.BEE="bee",n.BIG_BEE="big-bee",n.BIG_BEE_BULLET="big-bee-bullet",n.BEEHIVE="beehive",n.BRICK="brick",n.GRASS="grass",n.GRASS_DARK="grass-dark",n.COLLIDER="collider",n.THORN="thorn",n.THORN_BALL="thorn-ball",n.MAP_LINE="line",n.WOOD="wood",n.WOOD_STROKE="wood-stroke",n.POISON="poison",n.POISON_BUBBLE="poison-bubble",n.POISON_SURFACE="poison-surface",n.WATER="water",n.WATER_SURFACE="water-surface",n.DANGER_AREA="danger-area",n.DUST_PARTICLE="dust-particle",n.ROPE="rope",n.JOINT="joint",n.DRAW_LINE="draw-line",n.CROSSING_BEE_LINE="crossing-bee-line",n}({}),iX=iJ.COLLIDER,iZ=iJ.DANGER_AREA,iQ=iJ.DOGE,i$=[iX,iZ,iJ.GRASS,iJ.GRASS_DARK,iJ.BRICK,iJ.MAP_LINE,iJ.POISON,iJ.POISON_SURFACE,iJ.POISON_BUBBLE,iJ.AIR_FAN,iJ.WOOD,iJ.WOOD_STROKE,iJ.THORN_BALL,iJ.THORN,iJ.CROSSING_BEE_LINE,iJ.BEE,iQ,iJ.BEEHIVE,iJ.ROPE,iJ.BALLOON,iJ.WATER,iJ.WATER_SURFACE,iJ.JOINT,iJ.DUST_PARTICLE,iJ.DRAW_LINE],i0={},i1=0;i1<i$.length;i1++)i0[i$[i1]]=i1;var i2=i0;K._RF.pop(),K._RF.push({},"4c577T9x2FPKpyFoVPXbav0","ObjectIds",void 0);var i3=function(n){return n[n.BRICK=1]="BRICK",n[n.STROKE=3]="STROKE",n[n.GRASS_DARK=4]="GRASS_DARK",n[n.GRASS=5]="GRASS",n[n.COLLIDER=6]="COLLIDER",n[n.THORN=7]="THORN",n[n.WATER=8]="WATER",n[n.WATER_SURFACE=9]="WATER_SURFACE",n[n.LINE=10]="LINE",n[n.POISON_SURFACE=11]="POISON_SURFACE",n[n.POISON=12]="POISON",n[n.WOOD=13]="WOOD",n[n.THORN_BALL=14]="THORN_BALL",n[n.CONNECT=15]="CONNECT",n[n.DANGER_AREA=16]="DANGER_AREA",n[n.BALLOON=17]="BALLOON",n[n.AIR_FAN=18]="AIR_FAN",n[n.SPIDER=19]="SPIDER",n[n.DOGE_A=101]="DOGE_A",n[n.DOGE_B=106]="DOGE_B",n[n.BIG_BEE=107]="BIG_BEE",n[n.BEEHIVE_A=102]="BEEHIVE_A",n[n.BEEHIVE_B=103]="BEEHIVE_B",n[n.BEEHIVE_C=104]="BEEHIVE_C",n[n.BEEHIVE_D=105]="BEEHIVE_D",n}(i3||{});K._RF.pop(),K._RF.push({},"7bb7ftpsjJCX5G6+WtNYJ2x","PhysicsGroup",void 0);var i4=function(n){return n[n.DEFAULT=1]="DEFAULT",n[n.BEE=2]="BEE",n[n.MAIN_OBJECT=4]="MAIN_OBJECT",n[n.WORLD_BOUND=8]="WORLD_BOUND",n[n.ROPE=16]="ROPE",n}(i4||{});K._RF.pop(),K._RF.push({},"a6e4bjV/RVH17qBEx1mZaFg","ResourcePaths",void 0);var i5,i7=function(n){return n.WATER_SURFACE_FRAME="sprites/water-surface/spriteFrame",n.IC_HAND_FRAME="sprites/ic-hand/spriteFrame",n.POISON_CIRCLE_FRAME="sprites/poison-circle/spriteFrame",n.POISON_BUBBLE_PREFAB="prefabs/PoisonBubble",n.DUST_PARTICLE_SPINE="spines/dust-particle/siwang_texiao",n.MAP_JSON_PREFIX="maps-json/",n}(i7||{});K._RF.pop(),K._RF.push({},"476e6UyMHFJyI2GmFP4KpHY","BaseObject",void 0);var i6,i9,i8,ae,at,an,ai,aa=(0,q.ccclass)("BaseObject")(i5=function(n){i(o,n);var p=a(o);function o(){var n;r(this,o);for(var i=arguments.length,a=new Array(i),d=0;d<i;d++)a[d]=arguments[d];return(n=p.call.apply(p,[this].concat(a))).points=[],n.body=null,n.bodyType=eS.Static,n}return y(o,[{key:"onLoad",value:function(){this.node.layer=eC.Enum.UI_2D}},{key:"sleep",value:function(){if(!this.body){if(this.body=this.getComponent(ek),!this.body)return;this.bodyType=this.body.type}this.enabled=!1,this.body.sleep(),this.body.type=eS.Static}},{key:"wake",value:function(){if(this.enabled=!0,this.body)this.body.wakeUp(),this.body.type=this.bodyType;else{if(this.body=this.getComponent(ek),!this.body)return;this.bodyType=this.body.type}}},{key:"hide",value:function(){var n;this.enabled=!1,null===(n=this.body)||void 0===n||n.sleep();var i=this.getComponent(eE.Skeleton);i&&(i.enabled=!1);var a=this.getComponent(el);a&&(a.enabled=!1)}},{key:"preHide",value:function(){var n;this.enabled=!1,null===(n=this.body)||void 0===n||n.sleep(),this.scheduleOnce(this.hide,.2)}},{key:"appear",value:function(){this.enabled=!0;var n=this.getComponent(eE.Skeleton);n&&(n.enabled=!0)}},{key:"setSpineAnimation",value:function(n,i){var a=this.getComponent(eE.Skeleton);null==a||a.setAnimation(0,n,i)}},{key:"setEnable",value:function(n){this.enabled=n}},{key:"angle",value:function(n,i){var a=Math.atan2(i,n);return a<0&&(a+=2*Math.PI),a}},{key:"getVectorDataFromAToB",value:function(n,i){var a=i.x-n.x,r=i.y-n.y;return{vector:new ew(a,r).normalize(),dx:a,dy:r}}},{key:"kill",value:function(){this.node.active=!1}},{key:"revive",value:function(){this.node.active=!0}}]),o}(ea))||i5;K._RF.pop(),K._RF.push({},"15b7bvQaXpFgItiEHCr7GsP","AirFan",void 0);var ao=q.ccclass,ar=q.property,as=(i6=ao("AirFan"),i9=ar(es),i8=ar(eT),i6((an=n((at=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=g.call.apply(g,[this].concat(a)),p(n,"pushForce",an,d(n)),n.force=new ew(0,0),n.affectedObjects=[],p(n,"collider",ai,d(n)),n.colliders=[],n.onBeginContact=function(i,a){n.affectedObjects.includes(a.node.name)&&-1===n.colliders.findIndex(function(n){return n.node===a.node})&&n.colliders.push(a)},n.onEndContact=function(i,a){var r=n.colliders.indexOf(a);-1!==r&&n.colliders.splice(r,1)},n}return y(u,[{key:"__preload",value:function(){this.collider=this.getComponent(eT),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"start",value:function(){this.colliders=[],this.affectedObjects=[iJ.DOGE,iJ.THORN_BALL,iJ.DRAW_LINE,iJ.WOOD,iJ.BALLOON],this.collider.on(eR.BEGIN_CONTACT,this.onBeginContact),this.collider.on(eR.END_CONTACT,this.onEndContact)}},{key:"update",value:function(n){var i,a=T(this.colliders);try{for(a.s();!(i=a.n()).done;){var r=i.value,p=r.getComponent(ek);if(p){var d=this.force;r.node.name===iJ.DRAW_LINE&&(d=this.force.clone().multiplyScalar(r.density/3)),r.node.name===iJ.DOGE&&(d=this.force.clone().multiplyScalar(250/this.pushForce)),p.applyForceToCenter(d,!0)}}}catch(n){a.e(n)}finally{a.f()}}},{key:"setForceDirection",value:function(n){var i=new ew(0,1).rotate(e_.toRadian(n));this.force=i.clone().normalize().multiplyScalar(this.pushForce)}},{key:"sleep",value:function(){A(B(u.prototype),"sleep",this).call(this),this.enabled=!1}},{key:"wake",value:function(){A(B(u.prototype),"wake",this).call(this),this.enabled=!0}}]),u}(aa)).prototype,"pushForce",[i9],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 400}}),ai=n(at.prototype,"collider",[i8],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ae=at))||ae);K._RF.pop(),K._RF.push({},"8a02eYTwSpP9IpQ4MrTsAiL","SpineAnimationName",void 0);var al,au,ac,ah,ap,ad,av,ay={IDLE:"normal",SMILE:"smile",HURT:"hurt",INACTIVE:"cry",DROWNING:"troll",FREAK_OUT:"freak out",THORN_INACTIVE:"die"},af={FLAP_WINGS:"animation",SMOKE_DISAPPEAR:"animation3"},am={APPEAR:"animation",EXPLODE:"animation2"};K._RF.pop(),K._RF.push({},"ff37brNpltMuaZm+M+x9+1N","Rope",void 0);var ag,ab,aC,aS,ak,aE,aw,aT,aR,a_=q.ccclass,aA=q.property,aB=(al=a_("Rope"),au=aA(eA),ac=aA(es),al((ad=n((ap=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=g.call.apply(g,[this].concat(a)),p(n,"frame",ad,d(n)),p(n,"length",av,d(n)),n.nodes=[],n}return y(u,[{key:"onLoad",value:function(){this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"start",value:function(){this.nodes=[],this.node.setPosition(this.headJoint.getPosition());for(var n=this.headJoint.getPosition().clone().add(new ep(0,4)).multiplyScalar(-1),i=this.tailJoint.getPosition().clone().add(new ep(0,115)).add(n).multiplyScalar(1/this.length),a=i.length(),r=i.clone().multiplyScalar(-1*this.length),p=new ew(r.x,r.y),d=0;d<this.length;d++){var y=this.createNode(a);if(!y)return;this.node.addChild(y),y.name="node-".concat(d),y.setPosition(i.clone().multiplyScalar(d)),this.nodes.push(y)}for(var m=0;m<this.nodes.length;m++){var g=this.nodes[m];if(0!==m){var b=this.nodes[m-1],C=g.addComponent(eB);C.enabled=!1,C.anchor=new ew(0,-4),C.connectedAnchor=new ew(0,4),C.connectedBody=b.getComponent(ek),C.collideConnected=!1,C.enableLimit=!0,C.enabled=!0;var S=g.addComponent(eP);if(S.enabled=!1,S.connectedBody=this.headJoint.getComponent(ek),S.anchor=new ew(0,-4),S.connectedAnchor=new ew(0,4),S.collideConnected=!1,S.maxForce=160,S.enabled=!0,m===this.nodes.length-1){var k=this.tailJoint.addComponent(eB);k.enabled=!1,k.anchor=new ew(0,115),k.connectedBody=g.getComponent(ek),k.connectedAnchor=new ew(0,4),k.collideConnected=!1,k.enableLimit=!0,k.enabled=!0}}else{var E=g.addComponent(eB);E.enabled=!1,E.connectedBody=this.headJoint.getComponent(ek),E.anchor=new ew(0,-4),E.connectedAnchor=new ew(0,4),E.enableLimit=!0,E.collideConnected=!1,E.enabled=!0}}var w=this.tailJoint.addComponent(eP);w.enabled=!1,w.connectedBody=this.headJoint.getComponent(ek),w.anchor=new ew(0,118),w.connectedAnchor=new ew(0,-4),w.linearOffset=p,w.maxForce=500,w.enabled=!0}},{key:"disconnect",value:function(){var n=this.nodes[0].getComponent(eB);if(n){n.connectedBody=null,n.enabled=!1;var i=this.tailJoint.getComponent(eB);if(i){i.connectedBody=null,i.enabled=!1;var a=this.tailJoint.getComponent(eP);a&&(a.enabled=!1,a.connectedBody=null);var r,p=T(this.nodes);try{for(p.s();!(r=p.n()).done;){var d=r.value.getComponent(el);if(!d)return;d.enabled=!1}}catch(n){p.e(n)}finally{p.f()}}}}},{key:"createNode",value:function(n){var i=new Y("node");i.layer=this.node.layer,i.addComponent(el).spriteFrame=this.frame;var a=i.addComponent(Z);a.setAnchorPoint(.5,.5),a.setContentSize(6,1.2*n);var r=i.addComponent(ek);return r.linearDamping=5,r.angularDamping=50,r.gravityScale=.1,r.group=i4.ROPE,i.addComponent(eL).size=a.contentSize,i.name=iJ.ROPE,i}}]),u}(ea)).prototype,"frame",[au],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),av=n(ap.prototype,"length",[ac],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ah=ap))||ah);K._RF.pop(),K._RF.push({},"a8a47NhLJ9C1ahfjfiJ2xjc","Balloon",void 0);var aP=q.ccclass,aL=q.property,aO=(ag=aP("Balloon"),ab=aL(eO),aC=aL(eT),aS=aL(ek),ag((aw=n((aE=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=g.call.apply(g,[this].concat(a)),p(n,"ropePrefab",aw,d(n)),p(n,"collider",aT,d(n)),p(n,"rigidBody",aR,d(n)),n.rope=null,n.onBeginContact=function(i,a){n.rope&&[iJ.BEE,iJ.THORN,iJ.THORN_BALL].includes(a.node.name)&&(n.rope.disconnect(),n.setSpineAnimation(am.EXPLODE,!1),n.scheduleOnce(function(){n.rigidBody.enabled=!1}))},n}return y(u,[{key:"__preload",value:function(){this.collider=this.getComponent(eT),this.rigidBody=this.getComponent(ek),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"start",value:function(){this.setSpineAnimation(am.APPEAR,!0),this.collider.on(eR.BEGIN_CONTACT,this.onBeginContact)}},{key:"connectToDoge",value:function(n){var i=Q(this.ropePrefab).getComponent(aB);if(i)return i.headJoint=this.node,i.tailJoint=n,i.node.name=iJ.ROPE,this.rope=i,i}}]),u}(aa)).prototype,"ropePrefab",[ab],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),aT=n(aE.prototype,"collider",[aC],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),aR=n(aE.prototype,"rigidBody",[aS],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ak=aE))||ak);K._RF.pop(),K._RF.push({},"ca922n1V0RLioEyUJg8hQXH","GameEvents",void 0);var aD=function(n){return n.NEXT_LEVEL="next-level",n.UPDATE_LEVEL="update-level",n.START_OVER="start-over",n.SELECT_LEVEL="select-level",n.GAME_START="game-start",n.GAME_PAUSE="game-pause",n.GAME_RESUME="game-resume",n.GAME_REPLAY="game-replay",n.SHOW_HINT="show-hint",n.SKIP_LEVEL="skip-level",n.TIME_OUT="time-out",n.DRAWING="drawing",n.DOGE_DIE="doge-die",n.DOGE_SURVIVE="doge-survive",n.BEE_DIE="bee-die",n.BEE_ATTACK="bee-attack",n.BIG_BEE_DIE="big-bee-die",n.GAME_OBJECTS_SPAWNED="game-objects-spawned",n}(aD||{});K._RF.pop(),K._RF.push({},"744a5WT+0VHFLma6AT7mXct","NormalBehavior",void 0);var aI=function(){function e(n){r(this,e),this.touchCount=0,this.bee=n,this.timeToAttack=e_.randomRange(.7,.8),this.countTimeToAttack=0}return y(e,[{key:"onBeginContact",value:function(){var n=this;1===this.touchCount&&this.bee.scheduleOnce(function(){n.touchCount>=3&&n.activePusher(),n.touchCount=0},.75),this.touchCount++}},{key:"activePusher",value:function(){this.bee.setRole(iq.PUSHER)}},{key:"update",value:function(n){this.bee.state===iY.ATTACKING&&(this.countTimeToAttack+=n,this.countTimeToAttack>this.timeToAttack&&(this.bee.findTarget(),this.bee.attackTarget(),this.timeToAttack=e_.randomRange(.4,.6),this.countTimeToAttack=0))}}]),e}();K._RF.pop(),K._RF.push({},"ec831BZISdLgp8vKNuRirUM","PusherBehavior",void 0);var aN=function(){function e(n){r(this,e),this.bee=n}return y(e,[{key:"onBeginContact",value:function(){var n=this.bee;if(n.target){var i=e_.randomRange(20,30),a=n.getVectorDataFromAToB(n.node.getWorldPosition(),n.target.getWorldPosition());a.vector.rotate(Math.random()>.5?-Math.PI/2:Math.PI/2).multiplyScalar(i),n.move(a);var r=n.getComponent(eD);r&&(r.density*=1.1,r.density>=2.5&&(r.density=1,n.setRole(iq.NORMAL),n.setState(iY.ATTACKING)))}}}]),e}();K._RF.pop(),K._RF.push({},"19c52/F5VRPcbm2BqdbChIp","BaseBehavior",void 0);var aG,aM,aF,az,ax,aU,aH,aj,aV,aW,aK,aq,aY=function(){function e(n){r(this,e),this.bee=n,this.normalBehavior=new aI(n),this.pusherBehavior=new aN(n),this.seekingPathBehavior=null}return y(e,[{key:"onBeginContact",value:function(n,i){switch(this.bee.role){case iq.NORMAL:this.normalBehavior.onBeginContact();break;case iq.PATH_SEEKER:if(!this.seekingPathBehavior)return;this.seekingPathBehavior.onBeginContact(n,i);break;case iq.PUSHER:this.pusherBehavior.onBeginContact()}}},{key:"update",value:function(n){this.updateSpecialRole(n)||this.normalBehavior.update(n)}},{key:"updateSpecialRole",value:function(n){switch(this.bee.role){case iq.PATH_SEEKER:return!!this.seekingPathBehavior&&this.seekingPathBehavior.update(n);default:return!1}}}]),e}();K._RF.pop(),K._RF.push({},"0b146P+xAlN5LGe2MJHlJDc","Bee",void 0);var aJ=q.ccclass,aX=q.property,aZ=(aG=aJ("Bee"),aM=aX(Y),aF=aX(eE.Skeleton),az=aX(eT),ax=aX(ek),aG((aj=n((aH=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=g.call.apply(g,[this].concat(a)),p(n,"flipNode",aj,d(n)),p(n,"spriteNode",aV,d(n)),n.target=null,n.isSpawnLeftSide=!1,n.role=iq.NORMAL,n.state=iY.IDLE,n.behavior=new aY(d(n)),n.speed=0,p(n,"collider",aW,d(n)),p(n,"rigidBody",aK,d(n)),p(n,"gameObjects",aq,d(n)),n.wanderingOriginHeight=null,n.isWandering=!1,n.onBeginContact=function(i,a){n.enabled&&(n.rigidBody.linearDamping=e_.randomRangeInt(6,8),a.node.name!==iJ.THORN&&a.node.name!==iJ.POISON&&a.node.name!==iJ.BIG_BEE_BULLET?a.node.name!==iJ.WATER?(a.node.name===iJ.DOGE&&k.playSound(R.BEE_STING_DOGE,{volume:.3}),n.behavior.onBeginContact(i,a)):n.drown():n.smokeDisappear())},n}return y(u,[{key:"__preload",value:function(){var n;this.collider=this.getComponent(eT),this.rigidBody=this.getComponent(ek),this.gameObjects=null===(n=this.node.parent)||void 0===n?void 0:n.getComponent(la),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"start",value:function(){this.setState(iY.IDLE),this.collider.on(eR.BEGIN_CONTACT,this.onBeginContact),this.collider.enabled=!1}},{key:"followTarget",value:function(n){this.target=n,this.collider.enabled=!0,this.attackTarget()}},{key:"followInstructions",value:function(){this.collider.enabled=!0}},{key:"findTarget",value:function(){var n=this.gameObjects.getNearestDogeToBee(this);n&&!n.isCantBeTargeted()?this.target=n.node:this.target=null}},{key:"smokeDisappear",value:function(){this.preHide(),this.setSpineAnimation(af.SMOKE_DISAPPEAR,!1),this.setState(iY.DIE),this.node.scene.emit(aD.BEE_DIE)}},{key:"flap",value:function(){this.setSpineAnimation(af.FLAP_WINGS,!0)}},{key:"attackTarget",value:function(){var n=this;if(!this.target){if(this.isWandering)return;this.isWandering=!0,this.scheduleOnce(function(){n.isWandering=!1},.5),this.speed=e_.randomRange(40,50);var i=this.node.getWorldPosition();null===this.wanderingOriginHeight&&(this.wanderingOriginHeight=i.y+50),i.x+=e_.randomRange(-300,300),i.y=e_.randomRange(this.wanderingOriginHeight,this.wanderingOriginHeight-50);var a=this.getVectorDataFromAToB(this.node.getWorldPosition(),i);return this.move(a),void(this.rigidBody.linearDamping=0)}this.speed=e_.randomRange(20,30);var r=this.getVectorDataFromAToB(this.node.getWorldPosition(),this.target.getWorldPosition());r.vector.rotate(e_.randomRange(-.3,.3)).multiplyScalar(this.speed),this.move(r),this.rigidBody.linearDamping=0,this.setState(iY.ATTACKING)}},{key:"sleep",value:function(){A(B(u.prototype),"sleep",this).call(this),this.target=null}},{key:"rotateToVector",value:function(n){this.node.angle=e_.toDegree(this.angle(n.x,n.y)),this.node.angle+=180;var i=this.node.angle/360-Math.floor(this.node.angle/360);i>.25&&i<.75?this.flipNode.setScale(new ep(1,-1,1)):this.flipNode.setScale(new ep(1,1,1))}},{key:"move",value:function(n){this.rigidBody.linearVelocity=n.vector,this.rotateToVector({x:n.dx,y:n.dy})}},{key:"fly",value:function(n){this.rigidBody.linearVelocity=n,this.rigidBody.linearDamping=0,this.flap(),this.setState(iY.FLYING)}},{key:"setState",value:function(n){this.state=n}},{key:"setRole",value:function(n){this.role=n}},{key:"update",value:function(n){this.behavior.update(n)}},{key:"drown",value:function(){this.collider.enabled=!1,this.speed=20;var n=this.node.getWorldPosition();n.y=n.y-1e3;var i=this.getVectorDataFromAToB(this.node.getWorldPosition(),n);this.move(i),this.rigidBody.linearDamping=0,this.spriteNode.paused=!0,this.setState(iY.DIE),this.node.scene.emit(aD.BEE_DIE)}},{key:"setSpineAnimation",value:function(n,i){this.spriteNode.setAnimation(0,n,i)}}]),u}(aa)).prototype,"flipNode",[aM],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),aV=n(aH.prototype,"spriteNode",[aF],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),aW=n(aH.prototype,"collider",[az],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),aK=n(aH.prototype,"rigidBody",[ax],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),aq=n(aH.prototype,"gameObjects",[aX],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),aU=aH))||aU);K._RF.pop(),K._RF.push({},"23d64mdR6VPRoojd1BBKwos","World",void 0);var aQ,a$,a0,a1,a2,a3=28,a4=1792;K._RF.pop(),K._RF.push({},"5f264eibqlEH7PqbJQqHTF7","Line",void 0);var a5=q.ccclass,a7=q.property,a6=(aQ=a5("Line"),a$=a7(ey),aQ((a2=n((a1=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return(n=g.call.apply(g,[this].concat(a))).points=[],n.colliderInterval=20,n.colliders=[],n.colliderTag=0,p(n,"graphic",a2,d(n)),n}return y(u,[{key:"__preload",value:function(){this.graphic=this.getComponent(ey),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"init",value:function(){this.points=[],this.colliders=[],this.colliderTag=0}},{key:"drawTo",value:function(n,i,a,r){this.graphic.moveTo(n,i),this.graphic.lineTo(a,r),this.graphic.stroke()}},{key:"addBody",value:function(n,i){var a=this.node.addComponent(eD);a.offset=new ew(n,i),a.radius=8,a.density=5,a.tag=this.colliderTag,a.apply(),this.colliderTag+=1,this.colliders.push(a)}},{key:"deActiveColliders",value:function(){var n,i=T(this.colliders);try{for(i.s();!(n=i.n()).done;)n.value.enabled=!1}catch(n){i.e(n)}finally{i.f()}}},{key:"storePoints",value:function(n,i){var a=new ew(n,i);this.points.push(a)}},{key:"addPhysics",value:function(){for(var n=0;n<this.points.length-1;n++){var i=this.points[n],a=this.points[n+1];if(i&&a){var r=this.getInternalPoints(i,a);if(n<this.points.length-2){var p=r.pop();if(!p)continue;this.points[n+1]=p}var d,y=T(r);try{for(y.s();!(d=y.n()).done;){var m,g=d.value,b=!1,C=T(this.colliders);try{for(C.s();!(m=C.n()).done;){var S=m.value;e_.Vec2.distance(g,S.offset)<2*S.radius&&(b=!0)}}catch(n){C.e(n)}finally{C.f()}b||this.addBody(g.x,g.y)}}catch(n){y.e(n)}finally{y.f()}}}var k=this.points[this.points.length-1];k&&this.addBody(k.x,k.y)}},{key:"getInternalPoints",value:function(n,i){for(var a=i.x-n.x,r=i.y-n.y,p=new ew(a,r).normalize().multiplyScalar(this.colliderInterval),d=e_.Vec2.distance(n,i),y=Math.floor(d/this.colliderInterval),m=[n],g=0;g<y;g++){var b=m[m.length-1];if(b){var C=b.clone().add(p);m.push(C)}}return m}}]),u}(aa)).prototype,"graphic",[a$],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),a0=a1))||a0);K._RF.pop(),K._RF.push({},"afc3eWzi4tHNYb9W7f6QpCX","SeekingPathBehavior",void 0);var a9,a8,oe,ot=function(){function e(n,i){r(this,e),this.isFinishSeeking=!1,this.vectorDataGroup=[],this.index=0,this.bee=n,this.isSeekToLastPoint=i,this.vectorDataGroup=[],this.isFinishSeeking=!1,this.time=.02,this.remaining=0,this.index=0}return y(e,[{key:"seek",value:function(n){var i=this.bee.node.scene.getComponentInChildren(a6);if(!i)return!1;var a=i.colliders.findIndex(function(i){if(i.tag===n.tag)return!0});if(-1===a)return!1;this.vectorDataGroup=[],this.isFinishSeeking=!1,this.time=.04,this.remaining=0,this.index=0;var r=this.bee.speed;return r||(r=e_.randomRange(20,30)),this.isSeekToLastPoint?this.seekToLastPoint(a,i,r):this.seekToFirstPoint(a,i,r),!0}},{key:"seekToLastPoint",value:function(n,i,a){for(var r=n;r<i.colliders.length-1;r++){var p=i.colliders[r],d=i.colliders[r+1],y=this.bee.getVectorDataFromAToB(p.worldPosition,d.worldPosition);y.vector.multiplyScalar(a),this.vectorDataGroup.push(y)}}},{key:"seekToFirstPoint",value:function(n,i,a){for(var r=n;r>0;r--){var p=i.colliders[r],d=i.colliders[r-1],y=this.bee.getVectorDataFromAToB(p.worldPosition,d.worldPosition);y.vector.multiplyScalar(a),this.vectorDataGroup.push(y)}}},{key:"flyToNextDirection",value:function(){var n=this.vectorDataGroup[this.index];if(this.index+=1,!n)return this.isFinishSeeking=!0,this.bee.setRole(iq.NORMAL),void this.bee.setState(iY.ATTACKING);this.bee.move(n)}},{key:"fly",value:function(n){this.remaining+=n,this.remaining>this.time&&(this.flyToNextDirection(),this.time=.02,this.remaining=0)}},{key:"onBeginContact",value:function(n,i){if(this.bee.state===iY.SEEKING_PATH&&i.node.name!==iJ.DRAW_LINE)return this.isFinishSeeking=!0,this.bee.setRole(iq.NORMAL),void this.bee.setState(iY.ATTACKING);this.isFinishSeeking||this.bee.state===iY.WAITING_TO_SEEK_PATH||i.node.name!==iJ.DRAW_LINE||this.handlePathSeekerTouchLine(i)}},{key:"handlePathSeekerTouchLine",value:function(n){var i=this;this.seek(n)&&this.bee.state!==iY.SEEKING_PATH&&(this.bee.setState(iY.WAITING_TO_SEEK_PATH),this.bee.scheduleOnce(function(){i.bee.setState(iY.SEEKING_PATH)},.3))}},{key:"update",value:function(n){return this.bee.state===iY.SEEKING_PATH&&(this.fly(n),!0)}}]),e}();K._RF.pop(),K._RF.push({},"2181aAj+ElOoL2tBGH10euY","Beehive",void 0);var on,oi,oa,oo,or,os,ol,ou,oc,oh,op,od=q.ccclass,ov=q.property,oy=od("Beehive")((oe=n((a8=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return(n=g.call.apply(g,[this].concat(a))).totalPathSeekers=0,n.isSeekToLastPoint=!0,p(n,"gameObjects",oe,d(n)),n}return y(u,[{key:"onLoad",value:function(){var n;this.gameObjects=null===(n=this.node.parent)||void 0===n?void 0:n.getComponent(la),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"releaseBee",value:function(n){var i=this;this.updateTotalPathSeekers(),this.scheduleOnce(function(){var a=n.getComponent(aZ);if(a){i.createPathSeeker(a),"isRightSide"in i.node&&!0===i.node.isRightSide?i.spawnInRightSide(a):i.spawnInLeftSide(a),a.wake();var r=i.gameObjects.getRandomDogeToBee();r&&i.scheduleOnce(function(){return a.followTarget(r.node)},.2)}},e_.randomRange(.1,.4))}},{key:"updateTotalPathSeekers",value:function(){"totalPathSeekers"in this.node&&"number"==typeof this.node.totalPathSeekers&&(this.totalPathSeekers=this.node.totalPathSeekers)}},{key:"spawnInLeftSide",value:function(n){var i=this.node.getPosition(),a=i.x,r=i.y,p=e_.randomRangeInt(-10,0),d=e_.randomRangeInt(38,48);n.isSpawnLeftSide=!0,n.node.setScale(new ep(1,1,1)),n.node.setPosition(a+p,r+d),n.fly(new ew(-2,-1).normalize().multiplyScalar(2))}},{key:"spawnInRightSide",value:function(n){var i=this.node.getPosition(),a=i.x,r=i.y,p=e_.randomRangeInt(0,10),d=e_.randomRangeInt(38,48);n.isSpawnLeftSide=!1,n.node.setScale(new ep(1,1,1)),n.node.setPosition(a+p,r+d),n.fly(new ew(2,-1).normalize().multiplyScalar(2))}},{key:"createPathSeeker",value:function(n){0!==this.totalPathSeekers&&(n.setRole(iq.PATH_SEEKER),n.behavior.seekingPathBehavior=new ot(n,this.isSeekToLastPoint),this.isSeekToLastPoint=!this.isSeekToLastPoint,this.totalPathSeekers-=1)}}]),u}(aa)).prototype,"gameObjects",[ov],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),a9=a8))||a9;K._RF.pop(),K._RF.push({},"a17a07Pu/tAGb4MdM3jxHke","BigBeeBullet",void 0);var of,om,og,ob,oC,oS,ok,oE,ow,oT,oR,o_,oA=q.ccclass,oB=q.property,oP=(on=oA("BigBeeBullet"),oi=oB(el),oa=oB(eE.Skeleton),oo=oB(eT),or=oB(ek),on((ou=n((ol=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=g.call.apply(g,[this].concat(a)),p(n,"stinger",ou,d(n)),p(n,"ci",oc,d(n)),p(n,"collider",oh,d(n)),p(n,"rigidBody",op,d(n)),n.onBeginContact=function(){n.stinger.active=!1,n.ci.active=!0;var i=n.ci.getComponent(eE.Skeleton);i&&(i.enabled=!0,i.setAnimation(0,"animation",!1),k.playSound(R.BEE_BULLET_EXPLODE,{allowMultiple:!0}),i.setCompleteListener(function(){n.kill()}))},n}return y(u,[{key:"onLoad",value:function(){this.collider=this.getComponent(eT),this.rigidBody=this.getComponent(ek),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"start",value:function(){this.revive()}},{key:"revive",value:function(){A(B(u.prototype),"revive",this).call(this),this.stinger.active=!0,this.ci.active=!1,this.ci.getComponent(eE.Skeleton).enabled=!1,this.collider.once(eR.BEGIN_CONTACT,this.onBeginContact)}},{key:"kill",value:function(){A(B(u.prototype),"kill",this).call(this),this.stinger.active=!1,this.ci.active=!1}},{key:"forwardToDoge",value:function(n){var i=e_.randomRange(20,30),a=this.getVectorDataFromAToB(this.node.getWorldPosition(),n.getWorldPosition());a.vector.rotate(e_.randomRange(-.3,.3)).multiplyScalar(i),this.rigidBody.linearVelocity=a.vector,this.node.angle=e_.toDegree(this.angle(a.dx,a.dy))}}]),u}(aa)).prototype,"stinger",[oi],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),oc=n(ol.prototype,"ci",[oa],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),oh=n(ol.prototype,"collider",[oo],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),op=n(ol.prototype,"rigidBody",[or],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),os=ol))||os);K._RF.pop(),K._RF.push({},"2b15b1CihdEf60Zy/wIYirK","BigBee",void 0);var oL,oO,oD,oI,oN,oG,oM,oF,oz=q.ccclass,ox=q.property,oU=(of=oz("BigBee"),om=ox(eO),og=ox(eE.Skeleton),ob=ox(eD),oC=ox(ek),of((oE=n((ok=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=g.call.apply(g,[this].concat(a)),p(n,"bulletPrefab",oE,d(n)),n.state=iY.IDLE,n.target=null,n.bulletPool=[],n.timeToAttack=0,n.countTimeToAttack=0,p(n,"skeleton",ow,d(n)),p(n,"gameObjects",oT,d(n)),p(n,"collider",oR,d(n)),p(n,"rigidBody",o_,d(n)),n.onBeginContact=function(i,a){n.enabled&&(a.node.name!==iJ.THORN&&a.node.name!==iJ.POISON||n.smokeDisappear())},n}return y(u,[{key:"onLoad",value:function(){var n;this.skeleton=this.getComponent(eE.Skeleton),this.gameObjects=null===(n=this.node.parent)||void 0===n?void 0:n.getComponent(la),this.collider=this.getComponent(eD),this.rigidBody=this.getComponent(ek),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"start",value:function(){this.node.setScale(new ep(.7,.7,.7)),this.timeToAttack=e_.randomRange(1,2),this.countTimeToAttack=0,this.createBulletPool(),this.initDustParticle();var n=this.gameObjects.getRandomDogeToBee();n&&(this.target=n.node,this.state=iY.FLYING,this.collider.on(eR.BEGIN_CONTACT,this.onBeginContact))}},{key:"update",value:function(n){this.state===iY.ATTACKING&&(this.countTimeToAttack+=n,this.countTimeToAttack>this.timeToAttack&&(this.attackTarget(),this.timeToAttack=e_.randomRange(1,2),this.countTimeToAttack=0))}},{key:"createBulletPool",value:function(n){var i=arguments.length>0&&void 0!==n?n:5;this.bulletPool=[];for(var a=0;a<i;a++)this.createBullet()}},{key:"initDustParticle",value:function(){var n=this;if(this.node.parent){var i=new Y(iJ.DUST_PARTICLE);i.layer=Math.pow(2,25),i.active=!1;var a=i.addComponent(eE.Skeleton);eI.load(i7.DUST_PARTICLE_SPINE,eE.SkeletonData,function(i,r){i||n.node.isValid&&(a.skeletonData=r)}),this.node.parent.addChild(i),this.dustParticle=i}}},{key:"createDust",value:function(){var n=this;if(this.dustParticle){this.dustParticle.active=!0;var i=this.node.getWorldPosition(),a=i.x,r=i.y;this.dustParticle.setWorldPosition(new ep(a,r));var p=this.dustParticle.getComponent(eE.Skeleton);null==p||p.setAnimation(0,"animation",!1),this.scheduleOnce(function(){n.dustParticle&&(n.dustParticle.active=!1)},.5)}}},{key:"createBullet",value:function(){if(!this.node.parent)return null;var n=Q(this.bulletPrefab),i=n.getComponent(oP);return n.name=iJ.BIG_BEE_BULLET,i&&i.kill(),this.node.parent.addChild(n),this.bulletPool.push(n),n}},{key:"smokeDisappear",value:function(){this.hide(),this.createDust(),this.state=iY.DIE,this.node.scene.emit(aD.BIG_BEE_DIE)}},{key:"sleep",value:function(){}},{key:"wake",value:function(){}},{key:"hide",value:function(){this.enabled=!1,this.rigidBody.sleep(),this.skeleton.enabled=!1}},{key:"preHide",value:function(){}},{key:"appear",value:function(){}},{key:"setSpineAnimation",value:function(n,i){}},{key:"attackTarget",value:function(){var n=this;this.skeleton.setAnimation(0,"attack",!1),this.skeleton.setCompleteListener(function(){n.skeleton.setAnimation(0,"fly",!0)}),this.scheduleOnce(function(){if(n.target){var i=n.bulletPool.filter(function(n){return!1===n.active})[0];if(i||(i=n.createBullet())){var a=i.getComponent(oP);if(a){a.revive();var r=n.node.getPosition(),p=r.x,d=r.y;i.setPosition(p,d),a.forwardToDoge(n.target)}}}},.5)}}]),u}(aa)).prototype,"bulletPrefab",[om],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ow=n(ok.prototype,"skeleton",[og],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),oT=n(ok.prototype,"gameObjects",[ox],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),oR=n(ok.prototype,"collider",[ob],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),o_=n(ok.prototype,"rigidBody",[oC],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),oS=ok))||oS);K._RF.pop(),K._RF.push({},"8e16aARuABAK56lFGhIfeH+","Brick",void 0);var oH,oj,oV,oW,oK,oq=q.ccclass,oY=q.property,oJ=q.requireComponent,oX=(oL=oq("Brick"),oO=oJ([eN]),oD=oY({tooltip:"Use batch draw all bricks"}),oI=oY(el),oL(oN=oO((oM=n((oG=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=g.call.apply(g,[this].concat(a)),p(n,"useBatch",oM,d(n)),p(n,"sprite",oF,d(n)),n.brickPolygons=[],n}return y(u,[{key:"__preload",value:function(){this.mask=this.getComponent(eN),this.graphic=this.getComponent(ey),this.polygonCollider=this.getComponent(eG),this.validateRequiredComponents(),this.listenGameplayEvents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"listenGameplayEvents",value:function(){}},{key:"addBrickPolygon",value:function(n){this.brickPolygons.push(n)}},{key:"onLoad",value:function(){var n=this.getPolygon();n&&(this.useBatch?(this.mask.enabled=!1,this.graphic.enabled=!1,this.addBrickPolygon(n)):(this.updateTransform(n),this.drawMask(n),this.applyCollider(n)))}},{key:"getPolygon",value:function(){if(!("polygon"in this.node))return null;var n=this.node.polygon;return Array.isArray(n)?n:null}},{key:"updateTransform",value:function(n){var i=this.calculatePolygonDimensions(n),a=i.width,r=i.height;this.setPosition(0,0),this.setContentSize(a,r)}},{key:"setPosition",value:function(n,i){this.node.setPosition(n,i)}},{key:"setContentSize",value:function(n,i){var a=this.sprite.getComponent(Z);a&&a.setContentSize(n,i)}},{key:"updateContentSizeForBatchDraw",value:function(){var n=this.brickPolygons.map(function(n){return n.map(function(n){var i=n.x,a=n.y;return new ew(i,a)})}).flat(),i=this.calculatePolygonDimensions(n),a=i.width,r=i.height,p=this.calculateSpritePositionForBatchDraw(n),d=this.sprite.getComponent(Z);if(d){d.setContentSize(a,r);var y=this.sprite.getComponent(el);y&&y.node.setPosition(p.x,p.y)}}},{key:"calculateSpritePositionForBatchDraw",value:function(n){for(var i=n[0].x,a=n[0].x,r=n[0].y,p=n[0].y,d=1;d<n.length;d++){var y=n[d],m=y.x,g=y.y;m<i?i=m:m>a&&(a=m),g<r?r=g:g>p&&(p=g)}return{x:i,y:r}}},{key:"calculatePolygonDimensions",value:function(n){for(var i=n[0].x,a=n[0].x,r=n[0].y,p=n[0].y,d=1;d<n.length;d++){var y=n[d],m=y.x,g=y.y;m<i?i=m:m>a&&(a=m),g<r?r=g:g>p&&(p=g)}return{width:Math.abs(a-i),height:Math.abs(p-r)}}},{key:"drawMask",value:function(n){this.graphic.moveTo(n[0].x,n[0].y);var i,a=T(n);try{for(a.s();!(i=a.n()).done;){var r=i.value;this.graphic.lineTo(r.x,r.y)}}catch(n){a.e(n)}finally{a.f()}this.graphic.close(),this.graphic.fill()}},{key:"batchDrawAllBrick",value:function(){if(!(this.brickPolygons.length<1)){this.mask.enabled=!0,this.graphic.enabled=!0,this.updateContentSizeForBatchDraw();var n,i=T(this.brickPolygons);try{for(i.s();!(n=i.n()).done;){var a=n.value;this.drawMask(a)}}catch(n){i.e(n)}finally{i.f()}this.applyColliderForBatchDraw(),this.brickPolygons=[]}}},{key:"applyCollider",value:function(n){this.polygonCollider.points=n.map(function(n){var i=n.x,a=n.y;return new ew(i,a)}),this.polygonCollider.apply()}},{key:"applyColliderForBatchDraw",value:function(){var n,i=this.brickPolygons.map(function(n){return n.map(function(n){var i=n.x,a=n.y;return new ew(i,a)})}),a=T(i);try{for(a.s();!(n=a.n()).done;){var r=n.value,p=new Y;p.name=iJ.BRICK,this.node.addChild(p),p.setPosition(0,0);var d=p.addComponent(ek);d.type=eS.Static,d.group=i4.MAIN_OBJECT;var y=p.addComponent(eG);y.points=r,y.apply()}}catch(n){a.e(n)}finally{a.f()}}}]),u}(ea)).prototype,"useBatch",[oD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),oF=n(oG.prototype,"sprite",[oI],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),oN=oG))||oN)||oN);K._RF.pop(),K._RF.push({},"46fa0f/kl1Heo/JvM2kAEAf","GraphicsPattern",void 0);var oZ,oQ,o$,o0,o1,o2,o3,o4,o5,o7,o6,o9,o8=q.ccclass,re=q.property,rt=(oH=o8("GraphicsPattern"),oj=re(ey),oH((oK=n((oW=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=g.call.apply(g,[this].concat(a)),p(n,"graphic",oK,d(n)),n}return y(u,[{key:"onLoad",value:function(){this.graphic=this.getComponent(ey),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"start",value:function(){}},{key:"sleep",value:function(){}},{key:"draw",value:function(n){this.graphic.moveTo(n[0].x,n[0].y);var i,a=T(n);try{for(a.s();!(i=a.n()).done;){var r=i.value;this.graphic.lineTo(r.x,r.y)}}catch(n){a.e(n)}finally{a.f()}this.graphic.close(),this.graphic.fill()}},{key:"applyCollider",value:function(n){var i=this.getComponent(eG);i&&(i.points=n.map(function(n){var i=n.x,a=n.y;return new ew(i,a)}),i.apply())}},{key:"setColor",value:function(n){var i=new J;J.fromHEX(i,n),this.graphic.fillColor=i}}]),u}(aa)).prototype,"graphic",[oj],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),oV=oW))||oV);K._RF.pop(),K._RF.push({},"959bd9NhYpMTK0O78HSl4rc","Pattern",void 0);var rn,ri=q.ccclass,ra=q.property,ro=q.requireComponent,rr=(oZ=ri("Pattern"),oQ=ro([ey,eG,ek]),o$=ra(el),o0=ra(ey),o1=ra(ek),o2=ra(eG),oZ(o3=oQ((o5=n((o4=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=g.call.apply(g,[this].concat(a)),p(n,"sprite",o5,d(n)),p(n,"graphic",o7,d(n)),p(n,"rigidBody",o6,d(n)),p(n,"polygonCollider",o9,d(n)),n}return y(u,[{key:"onLoad",value:function(){this.graphic=this.getComponent(ey),this.rigidBody=this.getComponent(ek),this.polygonCollider=this.getComponent(eG),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"start",value:function(){}},{key:"draw",value:function(n){var i=this.sprite.getComponent(Z);if(i){var a=this.getBottomLeftPosition(n),r=a.x,p=a.y,d=this.getTopRightPosition(n),y=d.x,m=d.y;i.setContentSize(y-r,m-p),i.node.setPosition(r,p),this.graphic.moveTo(n[0].x,n[0].y);var g,b=T(n);try{for(b.s();!(g=b.n()).done;){var C=g.value;this.graphic.lineTo(C.x,C.y)}}catch(n){b.e(n)}finally{b.f()}this.graphic.close(),this.graphic.fill()}}},{key:"savePolygonPoints",value:function(n){this.points=n}},{key:"getPolygonPoints",value:function(){return this.points}},{key:"applyCollider",value:function(n){this.polygonCollider.points=n.map(function(n){var i=n.x,a=n.y;return new ew(i,a)}),this.polygonCollider.apply()}},{key:"setRigidBodyType",value:function(n){this.rigidBody.type=n}},{key:"getBottomLeftPosition",value:function(n){var i,a=n[0].x,r=n[0].y,p=T(n);try{for(p.s();!(i=p.n()).done;){var d=i.value;a>d.x&&(a=d.x),r>d.y&&(r=d.y)}}catch(n){p.e(n)}finally{p.f()}return{x:a,y:r}}},{key:"getTopRightPosition",value:function(n){var i,a=n[0].x,r=n[0].y,p=T(n);try{for(p.s();!(i=p.n()).done;){var d=i.value;a<d.x&&(a=d.x),r<d.y&&(r=d.y)}}catch(n){p.e(n)}finally{p.f()}return{x:a,y:r}}}]),u}(aa)).prototype,"sprite",[o$],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),o7=n(o4.prototype,"graphic",[o0],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),o6=n(o4.prototype,"rigidBody",[o1],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),o9=n(o4.prototype,"polygonCollider",[o2],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),o3=o4))||o3)||o3);K._RF.pop(),K._RF.push({},"a08960ZMBtFcLD/1nWNbAM9","Poison",void 0);var rs,rl=q.ccclass,ru=q.requireComponent,rc=rl("Poison")(rn=ru([rt])(rn=function(n){i(o,n);var p=a(o);function o(){var n;r(this,o);for(var i=arguments.length,a=new Array(i),d=0;d<i;d++)a[d]=arguments[d];return(n=p.call.apply(p,[this].concat(a))).polygon=[],n.useBatch=!1,n.poisonPolygons=[],n.bubbleFrame=null,n.bubblePool=null,n.remaining=0,n.maxPoolSize=0,n.totalBubble=0,n}return y(o,[{key:"onLoad",value:function(){var n;this.graphicPattern=this.getComponent(rt),this.gameObjects=null===(n=this.node.parent)||void 0===n?void 0:n.getComponent(la),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"start",value:function(){this.addRigidBody(),this.useBatch||(this.addPolygonCollider(),this.drawPattern(),this.loadCircleFrame(),this.setTimeSpawnBubble(.2))}},{key:"addPoisonPolygon",value:function(n){this.poisonPolygons.push(n)}},{key:"batchDrawAllPoisonPools",value:function(){if(!(this.poisonPolygons.length<1)){this.graphicPattern.setColor("#774798d1");var n,i=T(this.poisonPolygons);try{for(i.s();!(n=i.n()).done;){var a=n.value;this.graphicPattern.draw(a)}}catch(n){i.e(n)}finally{i.f()}this.applyColliderForBatchDraw(),this.loadCircleFrame(),this.setTimeSpawnBubble(.2)}}},{key:"applyColliderForBatchDraw",value:function(){var n,i=this.poisonPolygons.map(function(n){return n.map(function(n){var i=n.x,a=n.y;return new ew(i,a)})}),a=T(i);try{for(a.s();!(n=a.n()).done;){var r=n.value,p=new Y;p.name=iJ.POISON,this.node.addChild(p),p.setPosition(0,0);var d=p.addComponent(ek);d.group=i4.MAIN_OBJECT,d.type=eS.Static;var y=p.addComponent(eG);y.points=r,y.sensor=!0,y.apply()}}catch(n){a.e(n)}finally{a.f()}}},{key:"addRigidBody",value:function(){var n=this.addComponent(ek);n&&(n.group=i4.MAIN_OBJECT,n.type=eS.Static)}},{key:"addPolygonCollider",value:function(){var n=this.addComponent(eG);n&&(n.sensor=!0)}},{key:"drawPattern",value:function(){this.graphicPattern.setColor("#774798d1"),this.graphicPattern.draw(this.polygon),this.graphicPattern.applyCollider(this.polygon)}},{key:"loadCircleFrame",value:function(){var n=this;P.loadSpriteFrameAsync(i7.POISON_CIRCLE_FRAME).then(function(i){if(n.node.isValid){if(!i)throw new Error("loadCircleFrame: SpriteFrame not found");n.bubbleFrame=i;var a=n.useBatch?20*n.poisonPolygons.length:20;n.initPool(10,a)}}).catch(function(n){})}},{key:"initPool",value:function(n,i){this.bubblePool=new eM,this.maxPoolSize=i;for(var a=0;a<n;a++)this.spawnBubble()}},{key:"setTimeSpawnBubble",value:function(n){this.remaining=n}},{key:"spawnBubble",value:function(){if(!this.bubblePool)return null;if(this.totalBubble>=this.maxPoolSize)return null;var n=null;return this.bubblePool.size()>0?n=this.bubblePool.get():(n=new Y(iJ.POISON_BUBBLE),this.initBubble(n),this.killBubble(n),this.bubblePool.put(n)),n?(this.gameObjects.addObject(n),this.totalBubble+=1,n):null}},{key:"releaseBubble",value:function(n){this.bubblePool&&(this.killBubble(n),this.bubblePool.put(n),this.totalBubble-=1)}},{key:"killBubble",value:function(n){if(n){var i=n.getComponent(el);i&&(i.enabled=!1)}}},{key:"reviveBubble",value:function(n,i){var a=this.getPosition(i),r=a.minX,p=a.minY,d=a.maxX,y=e_.randomRange(r,d),m=n.getComponent(ev);m&&(m.opacity=125);var g=n.getComponent(el);g&&(g.enabled=!0),n.setPosition(new ep(y,p))}},{key:"initBubble",value:function(n){n.layer=this.node.layer,n.addComponent(el).spriteFrame=this.bubbleFrame,n.addComponent(ev)}},{key:"update",value:function(n){if(this.remaining-=n,this.remaining<=0){if(!this.useBatch){var i=this.spawnBubble();if(!i)return;this.reviveBubble(i,this.polygon),this.playBubbleTween(i,this.polygon);var a=e_.randomRange(.3,.5);return void this.setTimeSpawnBubble(a)}var r,p=e_.randomRange(.3,.5),d=T(this.poisonPolygons);try{for(d.s();!(r=d.n()).done;){var y=r.value,m=this.spawnBubble();if(!m)return;this.reviveBubble(m,y),this.playBubbleTween(m,y)}}catch(n){d.e(n)}finally{d.f()}this.setTimeSpawnBubble(p)}}},{key:"playBubbleTween",value:function(n,i){var a=this;if(n){var r=this.getPosition(i),p=r.minY,d=r.maxY,y=n.getPosition(),m=e_.randomRange(80,120),g=Math.abs(d-p),b=y.x,C=y.y+(d-p)-10,S=g/m;eF(n).to(S,{position:new ep(b,C)},{easing:"smooth"}).start();var k=n.getComponent(ev);if(k){var E=S-.4>0?.4:S;k.opacity=160,eF(k).delay(S-E).to(E,{opacity:0},{easing:"smooth"}).start()}this.scheduleOnce(function(){a.releaseBubble(n)},S)}}},{key:"getPosition",value:function(n){var i,a=1e4,r=0,p=1e4,d=0,y=T(n);try{for(y.s();!(i=y.n()).done;){var m=i.value,g=m.x,b=m.y;g<a&&(a=g),g>r&&(r=g),b<p&&(p=b),b>d&&(d=b)}}catch(n){y.e(n)}finally{y.f()}return{minX:a+=20,minY:p+=13,maxX:r-=20,maxY:d-=13}}}]),o}(ea))||rn)||rn;K._RF.pop(),K._RF.push({},"8633c11nMJN7I7TAFaGu3Fg","PoisonSurface",void 0);var rh,rp=(0,q.ccclass)("PoisonSurface")(rs=function(n){i(o,n);var p=a(o);function o(){var n;r(this,o);for(var i=arguments.length,a=new Array(i),d=0;d<i;d++)a[d]=arguments[d];return(n=p.call.apply(p,[this].concat(a))).poisonBubblePrefab=null,n.polygon=[],n.useBatch=!1,n.surfacePolygon=[],n.bubblePool=null,n.remaining=0,n.maxPoolSize=0,n.totalBubble=0,n}return y(o,[{key:"onLoad",value:function(){var n;this.graphicPattern=this.getComponent(rt),this.gameObjects=null===(n=this.node.parent)||void 0===n?void 0:n.getComponent(la),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"start",value:function(){this.useBatch||(this.drawPattern(),this.loadBubbleFrame())}},{key:"drawPattern",value:function(){this.graphicPattern.setColor("#9757bcb0"),this.graphicPattern.draw(this.polygon)}},{key:"addPoisonSurfacePolygon",value:function(n){this.surfacePolygon.push(n)}},{key:"batchDrawAllPoisonSurfaces",value:function(){if(!(this.surfacePolygon.length<1)){this.graphicPattern.setColor("#9757bcb0");var n,i=T(this.surfacePolygon);try{for(i.s();!(n=i.n()).done;){var a=n.value;this.graphicPattern.draw(a)}}catch(n){i.e(n)}finally{i.f()}this.loadBubbleFrame()}}},{key:"loadBubbleFrame",value:function(){var n=this;P.loadPrefabAsync(i7.POISON_BUBBLE_PREFAB).then(function(i){if(n.node.isValid){if(!i)throw new Error("loadBubbleFrame: Prefab is null");n.poisonBubblePrefab=i;var a=n.useBatch?12*n.surfacePolygon.length:12;n.initPool(10,a),n.setTimeSpawnBubble(.3)}}).catch(function(n){})}},{key:"update",value:function(n){if(this.remaining-=n,this.remaining<=0){if(!this.useBatch){var i=this.spawnPoisonBubblePop();if(!i)return;this.reviveBubble(i,this.polygon);var a=e_.randomRange(.3,.5);return void this.setTimeSpawnBubble(a)}var r,p=e_.randomRange(.3,.5),d=T(this.surfacePolygon);try{for(d.s();!(r=d.n()).done;){var y=r.value,m=this.spawnPoisonBubblePop();if(!m)return;this.reviveBubble(m,y)}}catch(n){d.e(n)}finally{d.f()}this.setTimeSpawnBubble(p)}}},{key:"initPool",value:function(n,i){this.bubblePool=new eM,this.maxPoolSize=i;for(var a=0;a<n;a++)this.spawnPoisonBubblePop()}},{key:"setTimeSpawnBubble",value:function(n){this.remaining=n}},{key:"spawnPoisonBubblePop",value:function(){if(!this.bubblePool)return null;if(this.totalBubble>=this.maxPoolSize)return null;var n=null;if(this.bubblePool.size()>0)n=this.bubblePool.get();else{if(!_instanceof(n=Q(this.poisonBubblePrefab),Y))return null;this.bubblePool.put(n)}return n?(n.name=iJ.POISON_SURFACE,this.gameObjects.addObject(n),this.totalBubble+=1,n):null}},{key:"releasePoisonBubblePop",value:function(n){this.bubblePool&&(this.bubblePool.put(n),this.totalBubble-=1)}},{key:"reviveBubble",value:function(n,i){var a=this;if(n){var r=this.getRandomPosition(i),p=r.x,d=r.y;n.setPosition(new ep(p,d));var y=n.getComponent(eE.Skeleton);y&&(y.setAnimation(0,"animation",!1),y.setCompleteListener(function(){a.releasePoisonBubblePop(n)}))}}},{key:"getRandomPosition",value:function(n){var i,a=1e4,r=0,p=1e4,d=0,y=T(n);try{for(y.s();!(i=y.n()).done;){var m=i.value,g=m.x,b=m.y;g<a&&(a=g),g>r&&(r=g),b<p&&(p=b),b>d&&(d=b)}}catch(n){y.e(n)}finally{y.f()}return{x:e_.randomRange(a+25,r-25),y:e_.randomRange(p+5,d-5)}}}]),o}(ea))||rs;K._RF.pop(),K._RF.push({},"9aa6cp2xqhK1LJeA0kz2hWR","Water",void 0);var rd=q.ccclass,rv=q.requireComponent,ry=rd("Water")(rh=rv([rt])(rh=function(n){i(o,n);var p=a(o);function o(){var n;r(this,o);for(var i=arguments.length,a=new Array(i),d=0;d<i;d++)a[d]=arguments[d];return(n=p.call.apply(p,[this].concat(a))).polygon=[],n.useBatch=!1,n.waterPolygon=[],n}return y(o,[{key:"onLoad",value:function(){this.graphicPattern=this.getComponent(rt),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"start",value:function(){this.addRigidBody(),this.useBatch||(this.addPolygonCollider(),this.drawPattern())}},{key:"addWaterPolygon",value:function(n){this.waterPolygon.push(n)}},{key:"batchDrawAllWater",value:function(){if(!(this.waterPolygon.length<1)){this.graphicPattern.setColor("#58cef0d0");var n,i=T(this.waterPolygon);try{for(i.s();!(n=i.n()).done;){var a=n.value;this.graphicPattern.draw(a)}}catch(n){i.e(n)}finally{i.f()}this.applyColliderForBatchDraw()}}},{key:"applyColliderForBatchDraw",value:function(){var n,i=this.waterPolygon.map(function(n){return n.map(function(n){var i=n.x,a=n.y;return new ew(i,a)})}),a=T(i);try{for(a.s();!(n=a.n()).done;){var r=n.value,p=new Y;p.name=iJ.WATER,this.node.addChild(p),p.setPosition(0,0);var d=p.addComponent(ek);d.group=i4.MAIN_OBJECT,d.type=eS.Static;var y=p.addComponent(eG);y.points=r,y.sensor=!0,y.apply()}}catch(n){a.e(n)}finally{a.f()}}},{key:"addRigidBody",value:function(){var n=this.addComponent(ek);n&&(n.group=i4.MAIN_OBJECT,n.type=eS.Static)}},{key:"addPolygonCollider",value:function(){var n=this.addComponent(eG);n&&(n.sensor=!0)}},{key:"drawPattern",value:function(){this.graphicPattern.setColor("#58cef0d0"),this.graphicPattern.draw(this.polygon),this.graphicPattern.applyCollider(this.polygon)}}]),o}(ea))||rh)||rh;K._RF.pop(),K._RF.push({},"d6e4emyi1lPpLbSlAWFj/GD","CrossingBeeLineTypes",void 0);var rf,rm,rg,rb,rC,rS,rk,rE,rw,rT,rR,r_,rA,rB,rP=function(n){return n[n.LOW=0]="LOW",n[n.MEDIUM=1]="MEDIUM",n[n.HIGH=2]="HIGH",n}(rP||{});ez(rP),K._RF.pop(),K._RF.push({},"988b72EAIhJ1qc0nrLU68l7","CrossingBeeLine",void 0);var rL=q.ccclass,rO=q.property,rD=q.requireComponent,rI=(rf=rL("CrossingBeeLine"),rm=rD([el,Z]),rg=rO(eA),rb=rO(eA),rC=rO(eA),rS=rO({type:rP,displayName:"Sprite type"}),rk=rO({type:ex,displayName:"Line thickness",min:0}),rf(rE=rm((rT=n((rw=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=g.call.apply(g,[this].concat(a)),p(n,"spriteLow",rT,d(n)),p(n,"spriteMedium",rR,d(n)),p(n,"spriteHigh",r_,d(n)),p(n,"spriteType",rA,d(n)),p(n,"lineThickness",rB,d(n)),n.startPos=new ep,n.endPos=new ep,n}return y(u,[{key:"setStartPosition",value:function(n,i,a){var r=arguments.length>1&&void 0!==i?i:this.startPos.x,p=arguments.length>2&&void 0!==a?a:this.startPos.z;this.startPos.set(n,r,p),this.updateLine()}},{key:"setEndPosition",value:function(n,i,a){var r=arguments.length>1&&void 0!==i?i:this.endPos.y,p=arguments.length>2&&void 0!==a?a:this.endPos.z;this.endPos.set(n,r,p),this.updateLine()}},{key:"updateLine",value:function(){this.updateContentSize(),this.updatePosition(),this.updateRotation()}},{key:"thickness",get:function(){return this.lineThickness},set:function(n){this.lineThickness=n,this.updateContentSize()}},{key:"setSpriteType",value:function(n){switch(this.spriteType=n,n){case rP.LOW:this.sprite.spriteFrame=this.spriteLow;break;case rP.MEDIUM:this.sprite.spriteFrame=this.spriteMedium;break;case rP.HIGH:this.sprite.spriteFrame=this.spriteHigh}}},{key:"onLoad",value:function(){this.uiTransform=this.getComponent(Z),this.sprite=this.getComponent(el),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"start",value:function(){this.setSpriteType(this.spriteType),this.updateContentSize(),this.updatePosition(),this.updateRotation()}},{key:"updateContentSize",value:function(){var n=this.endPos.x-this.startPos.x,i=this.endPos.y-this.startPos.y,a=this.endPos.z-this.startPos.z,r=Math.sqrt(n*n+i*i+a*a);this.uiTransform.setContentSize(r,this.lineThickness)}},{key:"updatePosition",value:function(){this.uiTransform.setAnchorPoint(.5,.5),this.node.setWorldPosition((this.startPos.x+this.endPos.x)/2,(this.startPos.y+this.endPos.y)/2,(this.startPos.z+this.endPos.z)/2)}},{key:"updateRotation",value:function(){this.node.setWorldRotationFromEuler(0,0,180*Math.atan2(this.endPos.y-this.startPos.y,this.endPos.x-this.startPos.x)/Math.PI)}}]),u}(ea)).prototype,"spriteLow",[rg],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rR=n(rw.prototype,"spriteMedium",[rb],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),r_=n(rw.prototype,"spriteHigh",[rC],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rA=n(rw.prototype,"spriteType",[rS],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return rP.LOW}}),rB=n(rw.prototype,"lineThickness",[rk],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),rE=rw))||rE)||rE);K._RF.pop(),K._RF.push({},"169a1O0ruFLoI6OnJUZap7V","DogeState",void 0);var rN,rG=function(n){return n[n.IDLE=0]="IDLE",n[n.SMILE=1]="SMILE",n[n.SCARE=2]="SCARE",n[n.BEE_STING=3]="BEE_STING",n[n.THORN_STAB=4]="THORN_STAB",n[n.OUT_OF_SCREEN=5]="OUT_OF_SCREEN",n[n.POISONED=6]="POISONED",n[n.DROWNING=7]="DROWNING",n[n.OVER_VIEW=8]="OVER_VIEW",n}(rG||{});K._RF.pop(),K._RF.push({},"852f9XjNUVJ3Zt1Kd/EbqXU","Eye",void 0);var rM,rF,rz,rx,rU,rH,rj,rV=(0,q.ccclass)("Eye")(rN=function(n){i(o,n);var p=a(o);function o(){var n;r(this,o);for(var i=arguments.length,a=new Array(i),d=0;d<i;d++)a[d]=arguments[d];return(n=p.call.apply(p,[this].concat(a))).scaleTween=null,n.initialPosition=null,n}return y(o,[{key:"createScaleAnimation",value:function(){var n=eF(this.node).to(.3,{scale:new ep(1.1,1.1,1)},{easing:"smooth"});this.scaleTween=eF(this.node).reverseTime(n).repeatForever()}},{key:"saveInitialPosition",value:function(){this.initialPosition||(this.initialPosition=this.node.position.clone())}},{key:"show",value:function(){this.node.active=!0,this.playAnimation()}},{key:"hide",value:function(){this.stopAnimation(),this.node.active=!1}},{key:"toward",value:function(n){this.initialPosition&&(this.node.setPosition(this.initialPosition),this.node.position.add(n))}},{key:"playAnimation",value:function(){var n;this.scaleTween||this.createScaleAnimation(),null===(n=this.scaleTween)||void 0===n||n.start()}},{key:"stopAnimation",value:function(){var n;null===(n=this.scaleTween)||void 0===n||n.stop()}}]),o}(ea))||rN;K._RF.pop(),K._RF.push({},"df218vrmOtEH5vRQXxIZ3yS","Eyes",void 0);var rW,rK,rq,rY,rJ,rX,rZ,rQ,r$=q.ccclass,r0=q.property,r1=(rM=r$("Eyes"),rF=r0(rV),rz=r0(rV),rM((rH=n((rU=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=g.call.apply(g,[this].concat(a)),p(n,"leftEye",rH,d(n)),p(n,"rightEye",rj,d(n)),n.time=0,n.remaining=0,n.running=!1,n}return y(u,[{key:"onLoad",value:function(){this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"start",value:function(){this.remaining=0,this.running=!1,this.setTimeChangeDirection(.8),this.leftEye.saveInitialPosition(),this.rightEye.saveInitialPosition()}},{key:"setTimeChangeDirection",value:function(n){this.time=n}},{key:"show",value:function(){this.running=!0,this.remaining=this.time,this.leftEye.show(),this.rightEye.show()}},{key:"hide",value:function(){this.running=!1,this.leftEye.hide(),this.rightEye.hide()}},{key:"stopLook",value:function(){this.running=!1}},{key:"look",value:function(){if(this.node.parent){var n=this.node.parent.getComponent(si);if(n){var i=n.getNearbyBee();if(i){var a=this.leftEye.initialPosition;if(a){var r=a.x,p=a.y,d=new ep;this.leftEye.node.inverseTransformPoint(d,i.node.worldPosition);var y=new ep(d.x-r,d.y-p,0).normalize().multiplyScalar(5);this.leftEye.toward(y),this.rightEye.toward(y)}}}}}},{key:"update",value:function(n){this.running&&(this.remaining<=0&&(this.look(),this.remaining=this.time),this.remaining-=n)}}]),u}(ea)).prototype,"leftEye",[rF],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rj=n(rU.prototype,"rightEye",[rz],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rx=rU))||rx);K._RF.pop(),K._RF.push({},"14172TbYDBAeISJqcpvLYV7","Doge",void 0);var r2,r3,r4,r5,r7,r6,r9,r8,se=q.ccclass,st=q.property,sn=[rG.OVER_VIEW,rG.BEE_STING,rG.THORN_STAB,rG.POISONED,rG.OUT_OF_SCREEN],si=(rW=se("Doge"),rK=st(r1),rq=st(eT),rW((rX=n((rJ=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=g.call.apply(g,[this].concat(a)),p(n,"eyes",rX,d(n)),n.state=rG.IDLE,n.dustParticle=null,n.gameHeight=0,p(n,"collider",rZ,d(n)),p(n,"gameObjects",rQ,d(n)),n.onBeginContact=function(i,a){a.node.name!==iJ.BEE&&a.node.name!==iJ.BIG_BEE&&a.node.name!==iJ.BIG_BEE_BULLET||n.beeSting(),a.node.name!==iJ.THORN&&a.node.name!==iJ.THORN_BALL?a.node.name!==iJ.POISON?a.node.name===iJ.WATER&&n.drowning():n.poisoned():n.stabbedByThorn()},n}return y(u,[{key:"onLoad",value:function(){var n;this.collider=this.getComponent(eT),this.gameObjects=null===(n=this.node.parent)||void 0===n?void 0:n.getComponent(la),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"start",value:function(){var n;this.initDustParticle(),this.idle();var i=null===(n=eU("Canvas"))||void 0===n?void 0:n.getComponent(Z);i&&(this.gameHeight=i.height),this.collider.on(eR.BEGIN_CONTACT,this.onBeginContact)}},{key:"idle",value:function(){!1!==this.setState(rG.IDLE)&&(this.hideEyes(),this.setSpineAnimation(ay.IDLE,!0))}},{key:"smile",value:function(){!1!==this.setState(rG.SMILE)&&(this.hideEyes(),this.setSpineAnimation(ay.SMILE,!0))}},{key:"beeSting",value:function(){var n=this;!1!==this.setState(rG.BEE_STING)&&(this.hideEyes(),this.setSpineAnimation(ay.HURT,!1),this.scareOtherDoges(),this.scheduleOnce(function(){n.state===rG.BEE_STING&&n.setSpineAnimation(ay.INACTIVE,!1)},.3),k.playSound(R.DOGE_HURT))}},{key:"stabbedByThorn",value:function(){!1!==this.setState(rG.THORN_STAB)&&(this.hideEyes(),this.createDust(),this.setSpineAnimation(ay.THORN_INACTIVE,!1),this.scareOtherDoges(),k.playSound(R.DOGE_DIES))}},{key:"poisoned",value:function(){!1!==this.setState(rG.POISONED)&&(this.hide(),this.hideEyes(),this.createDust(),this.scareOtherDoges(),k.playSound(R.DOGE_DIES))}},{key:"drowning",value:function(){!1!==this.setState(rG.DROWNING)&&(this.hideEyes(),this.setSpineAnimation(ay.DROWNING,!1))}},{key:"isCantBeTargeted",value:function(){return -1!==[rG.THORN_STAB,rG.OUT_OF_SCREEN,rG.POISONED,rG.DROWNING].indexOf(this.state)}},{key:"scare",value:function(){var n;!1!==this.setState(rG.SCARE)&&(this.showEyes(),null===(n=this.eyes)||void 0===n||n.look(),this.setSpineAnimation(ay.FREAK_OUT,!0))}},{key:"hideEyes",value:function(){this.eyes.hide()}},{key:"showEyes",value:function(){this.eyes.show()}},{key:"setState",value:function(n){return -1===sn.indexOf(n)?-1===sn.indexOf(this.state)&&(this.state=n,!0):sn.indexOf(n)>sn.indexOf(this.state)&&(this.state=n,this.node.scene.emit(aD.DOGE_DIE),!0)}},{key:"scareOtherDoges",value:function(){if(this.gameObjects){var n,i=this.gameObjects.getDoges(this),a=T(i);try{for(a.s();!(n=a.n()).done;)n.value.scare()}catch(n){a.e(n)}finally{a.f()}}}},{key:"update",value:function(){var n=this.node.worldPosition.y;(n>this.gameHeight||n<0)&&this.setState(rG.OUT_OF_SCREEN),this.isBeeNearBy()&&this.scare()}},{key:"isBeeNearBy",value:function(){return this.state===rG.IDLE&&!sn.includes(this.state)&&!!this.getNearbyBee()}},{key:"getNearbyBee",value:function(){var n=this;if(!this.node.parent)return null;var i=this.node.parent.getComponentsInChildren(aZ).find(function(i){var a=ep.distance(n.node.getWorldPosition(),i.node.getWorldPosition());if(i.enabled&&a<=200)return!0});return null!=i?i:null}},{key:"createDust",value:function(){var n=this;if(this.dustParticle){this.dustParticle.active=!0;var i=this.node.getWorldPosition(),a=i.x,r=i.y;this.dustParticle.setWorldPosition(new ep(a,r));var p=this.dustParticle.getComponent(eE.Skeleton);null==p||p.setAnimation(0,"animation",!1),this.scheduleOnce(function(){n.dustParticle&&(n.dustParticle.active=!1)},.5)}}},{key:"initDustParticle",value:function(){var n=this;if(this.node.parent){var i=new Y(iJ.DUST_PARTICLE);i.layer=Math.pow(2,25),i.active=!1;var a=i.addComponent(eE.Skeleton);eI.load(i7.DUST_PARTICLE_SPINE,eE.SkeletonData,function(i,r){i||n.node.isValid&&(a.skeletonData=r)}),this.node.parent.addChild(i),this.dustParticle=i}}}]),u}(aa)).prototype,"eyes",[rK],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rZ=n(rJ.prototype,"collider",[rq],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rQ=n(rJ.prototype,"gameObjects",[st],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rY=rJ))||rY);K._RF.pop(),K._RF.push({},"2ca763+kElPuqiAkECtFMMS","Grass",void 0);var sa,so,sr,ss,sl,su=q.ccclass,sc=q.property,sh=q.requireComponent,sp=(r2=su("Grass"),r3=sh(ey),r4=sc({tooltip:"Use batch draw all grass polygons"}),r5=sc(ey),r2(r7=r3((r9=n((r6=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=g.call.apply(g,[this].concat(a)),p(n,"useBatch",r9,d(n)),p(n,"graphic",r8,d(n)),n.grassPolygons=[],n}return y(u,[{key:"__preload",value:function(){this.graphic=this.getComponent(ey),this.validateRequiredComponents(),this.listenGameplayEvents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"listenGameplayEvents",value:function(){}},{key:"onLoad",value:function(){var n=this.getPolygon();if(n){var i=this.isDark()?iJ.GRASS_DARK:iJ.GRASS;this.useBatch?this.addGrassPolygon(i,n):(this.updateFillColor(i),this.drawGrass(n))}}},{key:"drawGrass",value:function(n){this.graphic.moveTo(n[0].x,n[0].y);var i,a=T(n);try{for(a.s();!(i=a.n()).done;){var r=i.value;this.graphic.lineTo(r.x,r.y)}}catch(n){a.e(n)}finally{a.f()}this.graphic.close(),this.graphic.fill()}},{key:"getPolygon",value:function(){if(!("polygon"in this.node))return null;var n=this.node.polygon;return Array.isArray(n)?n:null}},{key:"isDark",value:function(){return"isDark"in this.node&&!!this.node.isDark}},{key:"addGrassPolygon",value:function(n,i){this.grassPolygons.push({type:n,polygon:i})}},{key:"updateFillColor",value:function(n){n===iJ.GRASS_DARK?this.graphic.fillColor.fromHEX("#5e9c35"):this.graphic.fillColor.fromHEX("#8bdd55")}},{key:"batchDrawAllGrass",value:function(){if(!(this.grassPolygons.length<1)){var n,i=T(this.grassPolygons);try{for(i.s();!(n=i.n()).done;){var a=n.value;this.updateFillColor(a.type),this.drawGrass(a.polygon)}}catch(n){i.e(n)}finally{i.f()}this.grassPolygons=[]}}}]),u}(aa)).prototype,"useBatch",[r4],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),r8=n(r6.prototype,"graphic",[r5],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),r7=r6))||r7)||r7);K._RF.pop(),K._RF.push({},"7027fhYTgdDe6EinMz7XLC6","MapLine",void 0);var sd=q.ccclass,sv=q.property,sy=(sa=sd("MapLine"),so=sv(ey),sa((sl=n((ss=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=g.call.apply(g,[this].concat(a)),p(n,"graphics",sl,d(n)),n.useBatch=!1,n.mapLines=[],n}return y(u,[{key:"__preload",value:function(){this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"onLoad",value:function(){var n=this.getPolygon();n&&(this.useBatch?(this.graphics.enabled=!1,this.addLine(n)):this.drawLine(n))}},{key:"getPolygon",value:function(){if(!("polygon"in this.node))return null;var n=this.node.polygon;return Array.isArray(n)?n:null}},{key:"addLine",value:function(n){this.mapLines.push(n)}},{key:"drawLine",value:function(n){this.graphics.moveTo(n[0].x,n[0].y);var i,a=T(n.slice(1));try{for(a.s();!(i=a.n()).done;){var r=i.value;this.graphics.lineTo(r.x,r.y)}}catch(n){a.e(n)}finally{a.f()}this.graphics.stroke()}},{key:"batchDrawAllLines",value:function(){if(!(this.mapLines.length<1)){var n,i=T(this.mapLines);try{for(i.s();!(n=i.n()).done;){var a=n.value;this.drawLine(a)}}catch(n){i.e(n)}finally{i.f()}this.mapLines=[]}}}]),u}(ea)).prototype,"graphics",[so],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),sr=ss))||sr);K._RF.pop(),K._RF.push({},"87767KZVqpEgIbdzZdGh1CJ","BatchObjectManager",void 0);var sf=function(){function e(){r(this,e),this.isBrickInitialized=!1,this.isGrassInitialized=!1,this.isLineInitialized=!1,this.isPoisonInitialized=!1,this.isPoisonSurfaceInitialized=!1,this.isWaterInitialized=!1,this.isDangerAreaInitialized=!1,this.mainBrickComponent=null,this.mainGrassComponent=null,this.mainLineComponent=null,this.mainPoisonComponent=null,this.mainPoisonSurfaceComponent=null,this.mainWaterComponent=null,this.mainDangerAreaComponent=null}return y(e,[{key:"assignMainBrickComponent",value:function(n){this.mainBrickComponent=n}},{key:"assignMainGrassComponent",value:function(n){this.mainGrassComponent=n}},{key:"assignMainLineComponent",value:function(n){this.mainLineComponent=n}},{key:"assignMainPoisonComponent",value:function(n){this.mainPoisonComponent=n}},{key:"assignMainPoisonSurfaceComponent",value:function(n){this.mainPoisonSurfaceComponent=n}},{key:"assignMainWaterComponent",value:function(n){this.mainWaterComponent=n}},{key:"assignMainDangerAreaComponent",value:function(n){this.mainDangerAreaComponent=n}},{key:"isBrickBatchingEnabled",value:function(){var n,i;return null!==(n=null===(i=this.mainBrickComponent)||void 0===i?void 0:i.useBatch)&&void 0!==n&&n}},{key:"isGrassBatchingEnabled",value:function(){var n,i;return null!==(n=null===(i=this.mainGrassComponent)||void 0===i?void 0:i.useBatch)&&void 0!==n&&n}},{key:"isLineBatchingEnabled",value:function(){var n,i;return null!==(n=null===(i=this.mainLineComponent)||void 0===i?void 0:i.useBatch)&&void 0!==n&&n}},{key:"isPoisonBatchingEnabled",value:function(){var n,i;return null!==(n=null===(i=this.mainPoisonComponent)||void 0===i?void 0:i.useBatch)&&void 0!==n&&n}},{key:"isPoisonSurfaceBatchingEnabled",value:function(){var n,i;return null!==(n=null===(i=this.mainPoisonSurfaceComponent)||void 0===i?void 0:i.useBatch)&&void 0!==n&&n}},{key:"isWaterBatchingEnabled",value:function(){var n,i;return null!==(n=null===(i=this.mainWaterComponent)||void 0===i?void 0:i.useBatch)&&void 0!==n&&n}},{key:"isDangerAreaBatchingEnabled",value:function(){var n,i;return null!==(n=null===(i=this.mainDangerAreaComponent)||void 0===i?void 0:i.useBatch)&&void 0!==n&&n}},{key:"updateBrickPolygon",value:function(n){this.mainBrickComponent&&this.mainBrickComponent.addBrickPolygon(n)}},{key:"updateGrassPolygon",value:function(n,i){this.mainGrassComponent&&this.mainGrassComponent.addGrassPolygon(n,i)}},{key:"updateMapLine",value:function(n){this.mainLineComponent&&this.mainLineComponent.addLine(n)}},{key:"updatePoisonPolygon",value:function(n){this.mainPoisonComponent&&this.mainPoisonComponent.addPoisonPolygon(n)}},{key:"updatePoisonSurfacePolygon",value:function(n){this.mainPoisonSurfaceComponent&&this.mainPoisonSurfaceComponent.addPoisonSurfacePolygon(n)}},{key:"updateWaterPolygon",value:function(n){this.mainWaterComponent&&this.mainWaterComponent.addWaterPolygon(n)}},{key:"updateDangerAreaPolygon",value:function(n){this.mainDangerAreaComponent&&this.mainDangerAreaComponent.addDangerAreaPolygon(n)}},{key:"batchDraw",value:function(){var n,i,a,r,p,d,y;null===(n=this.mainBrickComponent)||void 0===n||n.batchDrawAllBrick(),null===(i=this.mainGrassComponent)||void 0===i||i.batchDrawAllGrass(),null===(a=this.mainLineComponent)||void 0===a||a.batchDrawAllLines(),null===(r=this.mainPoisonComponent)||void 0===r||r.batchDrawAllPoisonPools(),null===(p=this.mainPoisonSurfaceComponent)||void 0===p||p.batchDrawAllPoisonSurfaces(),null===(d=this.mainWaterComponent)||void 0===d||d.batchDrawAllWater(),null===(y=this.mainDangerAreaComponent)||void 0===y||y.batchDrawAllDangerAreas()}},{key:"clearObjects",value:function(){this.isBrickInitialized=!1,this.isGrassInitialized=!1,this.isLineInitialized=!1,this.isPoisonInitialized=!1,this.isPoisonSurfaceInitialized=!1,this.isWaterInitialized=!1,this.isDangerAreaInitialized=!1,this.mainBrickComponent=null,this.mainGrassComponent=null,this.mainLineComponent=null,this.mainPoisonComponent=null,this.mainPoisonSurfaceComponent=null,this.mainWaterComponent=null,this.mainDangerAreaComponent=null}}]),e}();K._RF.pop(),K._RF.push({},"4c04ffCcRhGsqEZlVWUHd8s","MapTransformer",void 0);var sm,sg,sb,sC,sS,sk,sE,sw,sT,sR,s_,sA,sB,sP,sL,sO,sD,sI,sN,sG,sM,sF,sz,sx,sU,sH,sj,sV,sW,sK,sq,sY,sJ,sX,sZ,sQ,s$,s0,s1,s2,s3,s4,s5,s7,s6,s9=200,s8=270,le=function(){function e(){r(this,e)}return y(e,null,[{key:"getPointObject",value:function(n){var i=n.id,a=n.point,r=n.data,p=n.connect;return{id:i,point:{x:a.x*a3+14-s9,y:a4-a.y*a3-14-s8},data:r,connect:p}}},{key:"getPointObjectBỵHalfCoord",value:function(n){var i=n.id,a=n.point,r=n.data,p=n.connect;return{id:i,point:{x:a.x*a3/2-s9,y:a4-a.y*a3/2-s8},data:r,connect:p}}},{key:"getPolygonObject",value:function(n){var i=n.id,a=n.point,r=n.data,p=n.connect;return{id:i,point:a.map(function(n){var i=n.x,a=n.y;return{x:i*a3-s9,y:a4-a*a3-s8}}),data:r,connect:p}}},{key:"getDoublePolygon",value:function(n){var i=n.id,a=n.point,r=n.data,p=n.connect;return{id:i,point:a.map(function(n){var i=n.x,a=n.y;return{x:i*a3/2-s9,y:a4-a*a3/2-s8}}),data:r,connect:p}}},{key:"transformPointsFromMapToDrawAreaCoordinate",value:function(n){return n.map(function(n){var i=n.x,a=n.y;return{x:i*a3-s9,y:a4-a*a3-s8}})}}]),e}();K._RF.pop(),K._RF.push({},"75ad9uPflhLL4N96NmHF2Sk","GameObjects",void 0);var lt,ln=q.ccclass,li=q.property,la=(sm=ln("GameObjects"),sg=li(eO),sb=li(eO),sC=li(eO),sS=li(eO),sk=li(eO),sE=li(eO),sw=li(eO),sT=li(eO),sR=li(eO),s_=li(eO),sA=li(eO),sB=li(eO),sP=li(eO),sL=li(eO),sO=li(eO),sD=li(eO),sI=li({tooltip:"Use batch draw all map lines."}),sN=li({tooltip:"Use batch draw all poison pools."}),sG=li({tooltip:"Use batch draw all poison surfaces."}),sM=li({tooltip:"Use batch draw all water pools."}),sF=li({tooltip:"Use batch draw all danger areas."}),sm((sU=n((sx=function(n){i(l,n);var m=a(l);function l(){var n;r(this,l);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=m.call.apply(m,[this].concat(a)),p(n,"dogePrefab",sU,d(n)),p(n,"spiderPrefab",sH,d(n)),p(n,"beePrefab",sj,d(n)),p(n,"beehivePrefab",sV,d(n)),p(n,"bigBeePrefab",sW,d(n)),p(n,"thornPrefab",sK,d(n)),p(n,"thornBallPrefab",sq,d(n)),p(n,"airFanPrefab",sY,d(n)),p(n,"grassPrefab",sJ,d(n)),p(n,"balloonPrefab",sX,d(n)),p(n,"brickPrefab",sZ,d(n)),p(n,"arenaPrefab",sQ,d(n)),p(n,"woodPrefab",s$,d(n)),p(n,"connectPrefab",s0,d(n)),p(n,"mapLinePrefab",s1,d(n)),p(n,"crossingBeeLinePrefab",s2,d(n)),p(n,"batchMapLines",s3,d(n)),p(n,"batchPoisonPool",s4,d(n)),p(n,"batchPoisonSurface",s5,d(n)),p(n,"batchWaterPool",s7,d(n)),p(n,"batchDangerArea",s6,d(n)),n.batchObjects=new sf,n.objects=new Map,n}return y(l,[{key:"spawnObjects",value:function(n){for(var i=n.map,a=_(i).reverse(),r=0;r<a.length;r++){var p=a[r],d=null;(d=Array.isArray(p.point)?this.spawnPolygonObjectType(p):this.spawnPointObjectType(p))&&this.objects.set(r,d)}var y,m=T(i);try{for(m.s();!(y=m.n()).done;){var g=y.value;if(!Array.isArray(g.point)){var b=g;if(b.id===i3.BALLOON){var C=le.getPointObject(b).point,S=C.x,k=C.y;if(!b.connect)continue;var E=this.findObjectIndex(i,b.connect);if(!E)continue;this.spawnBalloon(S,k,E)}if(g.id===i3.CONNECT){if(!g.connect)return null;if(!Array.isArray(g.connect.point))return null;var w=le.getDoublePolygon(g.connect),R=le.getPointObjectBỵHalfCoord(g).point,A=R.x,B=R.y;this.spawnConnect(A,B,w.point)}}}}catch(n){m.e(n)}finally{m.f()}this.batchObjects.batchDraw(),this.sortObjects(),this.sleepObjects()}},{key:"spawnPolygonObjectType",value:function(n){var i=le.getPolygonObject(n).point;if(0===i.length)return null;switch(n.id){case i3.BRICK:return this.spawnBrick(i);case i3.GRASS:return this.spawnGrass(i,!1);case i3.GRASS_DARK:return this.spawnGrass(i,!0);case i3.LINE:return this.spawnLine(i);case i3.POISON:return this.spawnPoison(i);case i3.POISON_SURFACE:return this.spawnPoisonSurface(i);case i3.WATER:return this.spawnWater(i);case i3.DANGER_AREA:return this.spawnDangerAreaNormal(i);case i3.CONNECT:return null;case i3.WOOD:var a=le.getDoublePolygon(n);return this.spawnWood(a.point);case i3.COLLIDER:var r=le.getDoublePolygon(n);return this.spawnCollider(0,0,r.point);case i3.STROKE:default:return null}}},{key:"spawnPointObjectType",value:function(n){var i=le.getPointObject(n).point,a=i.x,r=i.y;switch(n.id){case i3.DOGE_A:return this.spawnDoge({x:a,y:r});case i3.DOGE_B:return this.spawnDoge({x:a,y:r,right:!0});case i3.SPIDER:return this.spawnSpider(a,r);case i3.BEEHIVE_A:case i3.BEEHIVE_C:return this.spawnBeehive(a,r);case i3.BEEHIVE_B:case i3.BEEHIVE_D:return this.spawnBeehive(a,r,!0);case i3.THORN_BALL:return this.spawnThornBall(a,r);case i3.BIG_BEE:return this.spawnBigBee(a,r);case i3.WATER_SURFACE:return this.spawnWaterSurface(a,r);case i3.THORN:var p,d=(null===(p=n.data)||void 0===p?void 0:p.a)||0;return this.spawnThorn(a,r,d);case i3.AIR_FAN:var y,m=(null===(y=n.data)||void 0===y?void 0:y.a)||0;return this.spawnAirFan(a,r,m);default:return null}}},{key:"spawnObjectForDevTools",value:function(n){this.spawnPointObjectType(n),this.sortObjects()}},{key:"spawnPolygonObjectForDevTools",value:function(n){this.spawnPolygonObjectType(n),this.sortObjects()}},{key:"addObject",value:function(n){this.node.insertChild(n,this.getSiblingIndex(n.name))}},{key:"sortObjects",value:function(){var n=_(this.node.children);n.sort(function(n,i){return i2[n.name]-i2[i.name]}),n.forEach(function(n,i){n.setSiblingIndex(i)})}},{key:"findObjectIndex",value:function(n,i){var a=this,r=n.findIndex(function(n){return JSON.stringify(n)===JSON.stringify(i)}),p=n[r].point;if(p&&!Array.isArray(p)){var d=le.getPointObject(n[r]).point,y=d.x,m=d.y,g=this.node.children.find(function(n){var r=n.position;return r.x===y&&r.y===m&&n.name===a.getObjNameFromId(i.id)});if(g)return g}}},{key:"getObjNameFromId",value:function(n){switch(n){case i3.DOGE_A:case i3.DOGE_B:return iJ.DOGE;case i3.SPIDER:return iJ.SPIDER;case i3.BEEHIVE_A:case i3.BEEHIVE_B:case i3.BEEHIVE_C:case i3.BEEHIVE_D:return iJ.BEEHIVE;case i3.THORN_BALL:return iJ.THORN_BALL;case i3.BIG_BEE:return iJ.BIG_BEE;case i3.WATER_SURFACE:return iJ.WATER_SURFACE;case i3.THORN:return iJ.THORN;case i3.AIR_FAN:return iJ.AIR_FAN;case i3.BRICK:return iJ.BRICK;case i3.GRASS:return iJ.GRASS;case i3.GRASS_DARK:return iJ.GRASS_DARK;case i3.LINE:return iJ.MAP_LINE;case i3.POISON:return iJ.POISON;case i3.POISON_SURFACE:return iJ.POISON_SURFACE;case i3.WATER:return iJ.WATER;case i3.DANGER_AREA:return iJ.DANGER_AREA;case i3.WOOD:return iJ.WOOD;case i3.COLLIDER:return iJ.COLLIDER;default:return""}}},{key:"getSiblingIndex",value:function(n){var i=this.node.children,a=i2[n];if(!a)return i.length+1;var r=i.map(function(n){return i2[n.name]}),p=r.findIndex(function(n){return a<n});return p<0?r.length+1:p}},{key:"clearObjects",value:function(){this.node.destroyAllChildren(),this.node.removeAllChildren(),this.batchObjects.clearObjects()}},{key:"stopBeeBehavior",value:function(){var n,i=this.node.getComponentsInChildren(aZ),a=T(i);try{for(a.s();!(n=a.n()).done;)n.value.state=iY.IDLE}catch(n){a.e(n)}finally{a.f()}}},{key:"sleepObjects",value:function(){var n,i=this.getComponentsInChildren(aa),a=T(i);try{for(a.s();!(n=a.n()).done;)n.value.sleep()}catch(n){a.e(n)}finally{a.f()}var r,p=this.node.getComponentsInChildren(oU),d=T(p);try{for(d.s();!(r=d.n()).done;)r.value.state=iY.IDLE}catch(n){d.e(n)}finally{d.f()}}},{key:"wakeUpObjects",value:function(){var n,i=this.getComponentsInChildren(aa),a=T(i);try{for(a.s();!(n=a.n()).done;)n.value.wake()}catch(n){a.e(n)}finally{a.f()}}},{key:"spawnBeehive",value:function(n,i,a){var r=arguments.length>2&&void 0!==a&&a,p=Q(this.beehivePrefab);return _instanceof(p,Y)?(p.name=iJ.BEEHIVE,p.setPosition(n,i),p.setScale(r?-1:1,1),p.attr({isRightSide:r}),this.addObject(p),p):null}},{key:"spawnBees",value:function(){var n,i=this.node.getComponentsInChildren(oy),a=1===i.length?8:4,r=T(i);try{for(r.s();!(n=r.n()).done;){var p=n.value;p.node.attr({totalPathSeekers:Math.floor(a/3)});for(var d=0;d<a;d++){var y=this.spawnBee();y&&p.releaseBee(y)}}}catch(n){r.e(n)}finally{r.f()}this.sortObjects()}},{key:"spawnBee",value:function(){var n=Q(this.beePrefab);return _instanceof(n,Y)?(n.name=iJ.BEE,this.addObject(n),n.setSiblingIndex(999),n):null}},{key:"spawnCrossingBees",value:function(n){for(var i=this,a=n.beeSpeed,r=n.spawnRandOffset,p=void 0===r?80:r,d=n.playerWorldX,y=n.playerWorldY,m=n.spawnWorldX,g=n.spawnWorldY,b=n.count,C=void 0===b?[1,2]:b,S=n.targetOffsetMultiplier,k=void 0===S?0:S,E=e_.randomRangeInt(C[0],C[1]),w=[],T=m<d,f=function(){var n=i.spawnBee();if(!n)throw new Error("Could not spawn bee");var r=n.getComponent(aZ);if(!r)throw new Error("Bee component not found");i.addObject(n),r.isSpawnLeftSide=!T;var b=e_.randomRangeInt(-p,p),C=e_.randomRangeInt(-p,p),S=m+b,E=g+C,R=n.worldPosition.z;n.setWorldPosition(S,E,R);var _=new ew(d+b*k-S,y+C*k-E);r.rotateToVector(_),r.fly(_.normalize().multiplyScalar(a)),i.scheduleOnce(function(){r.setRole(iq.NORMAL),r.setState(iY.ATTACKING),r.followInstructions()}),w.push(r)},R=0;R<E;R++)f();return this.sortObjects(),w}},{key:"spawnCrossingBeeLine",value:function(n){var i=n.startX,a=n.startY,r=n.endX,p=n.endY,d=n.thickness,y=n.spriteType,m=Q(this.crossingBeeLinePrefab);if(!_instanceof(m,Y))throw new Error("Could not spawn crossing bee line");m.name=iJ.CROSSING_BEE_LINE;var g=m.getComponent(rI);if(!g)throw new Error("CrossingBeeLine component not found");return this.addObject(m),g.setSpriteType(y),g.setStartPosition(i,a),g.setEndPosition(r,p),g.thickness=d,this.sortObjects(),g}},{key:"checkAllBeeDie",value:function(){var n=this.node.getComponentsInChildren(aZ),i=this.node.getComponentsInChildren(oU),a=n.some(function(n){return n.enabled}),r=i.some(function(n){return n.enabled});return!a&&!r}},{key:"spawnDoge",value:function(n){var i=n.x,a=n.y,r=n.right,p=void 0!==r&&r,d=n.isWorldPosition,y=void 0!==d&&d,m=n.rigidBodyConfig,g=void 0===m?{}:m,b=Q(this.dogePrefab);if(!_instanceof(b,Y))return null;b.name=iJ.DOGE,y||b.setPosition(i,a),b.setScale(p?-1:1,1),this.addObject(b),b.setSiblingIndex(999),y&&b.setWorldPosition(i,a,b.worldPosition.z);var C=g.gravityScale,S=void 0===C?1:C,k=b.getComponent(ek);if(!k)throw new Error("Could not get doge rigidBody");return k.gravityScale=S,b}},{key:"spawnSpider",value:function(n,i){var a=Q(this.spiderPrefab);return _instanceof(a,Y)?(a.name=iJ.SPIDER,a.setPosition(n,i),this.addObject(a),a):null}},{key:"spawnBigBee",value:function(n,i){var a=Q(this.bigBeePrefab);return _instanceof(a,Y)?(a.name=iJ.BIG_BEE,a.setPosition(n,i),this.addObject(a),a):null}},{key:"reviveBigBees",value:function(){var n,i=this.node.getComponentsInChildren(oU),a=T(i);try{for(a.s();!(n=a.n()).done;)n.value.state=iY.ATTACKING}catch(n){a.e(n)}finally{a.f()}}},{key:"spawnBrick",value:function(n){if(!this.batchObjects.isBrickInitialized){var i=this.spawnBrickNormal(n);if(!i)return null;var a=i.getComponent(oX);return a?(this.batchObjects.isBrickInitialized=!0,a.useBatch&&this.batchObjects.assignMainBrickComponent(a),this.addObject(i),i):null}return this.batchObjects.isBrickBatchingEnabled()?(this.batchObjects.updateBrickPolygon(n),null):this.spawnBrickNormal(n)}},{key:"spawnBrickNormal",value:function(n){var i=Q(this.brickPrefab);return _instanceof(i,Y)?(i.name=iJ.BRICK,i.attr({polygon:n}),this.addObject(i),i):null}},{key:"spawnWood",value:function(n){var i=Q(this.woodPrefab);if(!_instanceof(i,Y))return null;i.name=iJ.WOOD;var a=i.getComponent(rr);if(!a)return null;a.savePolygonPoints(n.map(function(n){return{x:n.x,y:n.y}})),this.addObject(i),a.draw(n),a.applyCollider(n),a.setRigidBodyType(eS.Dynamic);var r=this.spawnWoodStroke(n);return r.setParent(i,!1),i.addChild(r),i}},{key:"spawnWoodStroke",value:function(n){var i=new Y;i.name=iJ.WOOD_STROKE,i.layer=0x2000000,this.addObject(i);var a=i.addComponent(ey);a.lineWidth=4;var r=new J;J.fromHEX(r,"#0d0d15"),a.strokeColor=r,a.moveTo(n[0].x,n[0].y);var p,d=T(n.slice(1));try{for(d.s();!(p=d.n()).done;){var y=p.value;a.lineTo(y.x,y.y)}}catch(n){d.e(n)}finally{d.f()}return a.close(),a.stroke(),i}},{key:"spawnGrass",value:function(n,i){if(!this.batchObjects.isGrassInitialized){var a=this.spawnGrassNormal(n,!1);if(!a)return null;var r=a.getComponent(sp);return r?(this.batchObjects.isGrassInitialized=!0,r.useBatch&&this.batchObjects.assignMainGrassComponent(r),this.addObject(a),a):null}var p=i?iJ.GRASS_DARK:iJ.GRASS;return this.batchObjects.isGrassBatchingEnabled()?(this.batchObjects.updateGrassPolygon(p,n),null):this.spawnGrassNormal(n,i)}},{key:"spawnGrassNormal",value:function(n,i){var a=Q(this.grassPrefab);return _instanceof(a,Y)?(a.name=i?iJ.GRASS_DARK:iJ.GRASS,a.attr({polygon:n,isDark:i}),this.addObject(a),a):null}},{key:"spawnPoison",value:function(n){if(!this.batchPoisonPool)return this.spawnPoisonNormal(n);if(!this.batchObjects.isPoisonInitialized){var i=Q(this.arenaPrefab);if(!_instanceof(i,Y))return null;i.name=iJ.POISON,this.addObject(i);var a=i.addComponent(rc);return a.useBatch=!0,this.batchObjects.isPoisonInitialized=!0,this.batchObjects.assignMainPoisonComponent(a),this.batchObjects.updatePoisonPolygon(n),i}return this.batchObjects.updatePoisonPolygon(n),null}},{key:"spawnPoisonNormal",value:function(n){var i=Q(this.arenaPrefab);return _instanceof(i,Y)?(i.name=iJ.POISON,this.addObject(i),i.addComponent(rc).polygon=n,i):null}},{key:"spawnPoisonSurface",value:function(n){if(!this.batchPoisonPool)return this.spawnPoisonSurfaceNormal(n);if(!this.batchObjects.isPoisonSurfaceInitialized){var i=Q(this.arenaPrefab);if(!_instanceof(i,Y))return null;i.name=iJ.POISON_SURFACE,this.addObject(i);var a=i.addComponent(rp);return a.useBatch=!0,this.batchObjects.isPoisonSurfaceInitialized=!0,this.batchObjects.assignMainPoisonSurfaceComponent(a),this.batchObjects.updatePoisonSurfacePolygon(n),i}return this.batchObjects.updatePoisonSurfacePolygon(n),null}},{key:"spawnPoisonSurfaceNormal",value:function(n){var i=Q(this.arenaPrefab);return _instanceof(i,Y)?(i.name=iJ.POISON_SURFACE,this.addObject(i),i.addComponent(rp).polygon=n,i):null}},{key:"spawnWater",value:function(n){if(!this.batchWaterPool)return this.spawnWaterNormal(n);if(!this.batchObjects.isWaterInitialized){var i=Q(this.arenaPrefab);if(!_instanceof(i,Y))return null;i.name=iJ.WATER,this.addObject(i);var a=i.addComponent(ry);return a.useBatch=!0,i.addComponent(ev).opacity=.75,this.batchObjects.isWaterInitialized=!0,this.batchObjects.assignMainWaterComponent(a),this.batchObjects.updateWaterPolygon(n),i}return this.batchObjects.updateWaterPolygon(n),null}},{key:"spawnWaterNormal",value:function(n){var i=Q(this.arenaPrefab);return _instanceof(i,Y)?(i.name=iJ.WATER,this.addObject(i),i.addComponent(ry).polygon=n,i.addComponent(ev).opacity=.75,i):null}},{key:"spawnDangerAreaNormal",value:function(n){var i=Q(this.arenaPrefab);if(!_instanceof(i,Y))return null;i.name=iJ.DANGER_AREA;var a=i.getComponent(rt);if(!a)return null;this.addObject(i),a.setColor("#fc03036d"),a.draw(n);var r=i.addComponent(ek);return r.type=eS.Static,r.group=i4.DEFAULT,i.addComponent(eG),a.applyCollider(n),i}},{key:"spawnWaterSurface",value:function(n,i){var a=new Y;return a.name=iJ.WATER_SURFACE,a.layer=this.node.layer,a.setPosition(n,i),P.loadSpriteFrameAsync(i7.WATER_SURFACE_FRAME).then(function(n){if(a.isValid){if(!n)throw new Error("spawnWaterSurface: SpriteFrame not found");a.addComponent(el).spriteFrame=n}}).catch(function(n){}),this.addObject(a),a}},{key:"spawnThorn",value:function(n,i,a){var r=arguments.length>2&&void 0!==a?a:0,p=Q(this.thornPrefab);return _instanceof(p,Y)?(p.name=iJ.THORN,p.angle=r,p.setPosition(n,i),this.addObject(p),p):null}},{key:"spawnThornBall",value:function(n,i){var a=Q(this.thornBallPrefab);return _instanceof(a,Y)?(a.name=iJ.THORN_BALL,a.setPosition(n,i),this.addObject(a),a):null}},{key:"spawnAirFan",value:function(n,i,a){var r=arguments.length>2&&void 0!==a?a:0,p=Q(this.airFanPrefab);if(!_instanceof(p,Y))return null;p.name=iJ.AIR_FAN,p.angle=r,p.setPosition(n,i),p.attr({id:i3.AIR_FAN});var d=p.getComponent(as);return d?(d.setForceDirection(r),this.addObject(p),p):null}},{key:"spawnCollider",value:function(n,i,a){var r=new Y;r.name=iJ.COLLIDER,this.addObject(r),r.setPosition(n,i);var p=r.addComponent(ek);p.type=eS.Static,p.group=i4.MAIN_OBJECT;var d=r.addComponent(eG);return d.restitution=.2,d.points=a.map(function(n){var i=n.x,a=n.y;return new ew(i,a)}),d.apply(),r}},{key:"spawnLine",value:function(n){if(!this.batchMapLines)return this.spawnLineNormal(n);if(!this.batchObjects.isLineInitialized){var i=this.spawnLineNormal(n);if(!i)return null;this.addObject(i);var a=i.getComponent(sy);return a?(this.batchObjects.isLineInitialized=!0,this.batchObjects.assignMainLineComponent(a),i):null}return this.batchObjects.updateMapLine(n),null}},{key:"spawnLineNormal",value:function(n){var i=Q(this.mapLinePrefab);return _instanceof(i,Y)?i.getComponent(sy)?(i.name=iJ.MAP_LINE,i.attr({polygon:n}),this.addObject(i),i):null:null}},{key:"spawnConnect",value:function(n,i,a){var r=this.getComponentsInChildren(rr).find(function(n){var i=n.getPolygonPoints();if(i.length===a.length){for(var r=0;r<a.length;r++){var p=i[r],d=p.x,y=p.y,m=a[r],g=m.x,b=m.y;if(d!==g||y!==b)return}return!0}}),p=Q(this.connectPrefab);if(!_instanceof(p,Y))return null;if(p.setPosition(n,i),this.node.insertChild(p,this.getSiblingIndex(p.name)),r){var d=p.getWorldPosition(),y=d.x,m=d.y,g=r.node.getWorldPosition(),b=g.x,C=g.y,S=p.getComponent(eB);S.connectedBody=r.node.getComponent(ek),S.connectedAnchor=new ew(y-b,m-C),S.enabled=!1,S.enabled=!0}}},{key:"spawnBalloon",value:function(n,i,a){var r=Q(this.balloonPrefab);if(!_instanceof(r,Y))return null;r.name=iJ.BALLOON,r.setPosition(n,i);var p=r.getComponent(aO);if(!p)return null;var d=p.connectToDoge(a);return this.addObject(r),d&&this.addObject(d.node),r}},{key:"getRandomDogeToBee",value:function(){if(!this.node.parent)return null;var n=this.node.parent.getComponentsInChildren(si),i=n.length;return n[Math.floor(Math.random()*i)]}},{key:"getNearestDogeToBee",value:function(n){if(!this.node.parent)return null;var i=this.node.parent.getComponentsInChildren(si);return 0===(i=i.filter(function(n){return!n.isCantBeTargeted()})).length?null:(i.sort(function(i,a){return ew.distance(i.node.worldPosition,n.node.worldPosition)-ew.distance(a.node.worldPosition,n.node.worldPosition)}),i[0])}},{key:"getDoges",value:function(n){if(!this.node.parent)return[];var i=this.node.parent.getComponentsInChildren(si);return i.filter(function(i){return i!==n})}}]),l}(ea)).prototype,"dogePrefab",[sg],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),sH=n(sx.prototype,"spiderPrefab",[sb],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),sj=n(sx.prototype,"beePrefab",[sC],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),sV=n(sx.prototype,"beehivePrefab",[sS],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),sW=n(sx.prototype,"bigBeePrefab",[sk],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),sK=n(sx.prototype,"thornPrefab",[sE],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),sq=n(sx.prototype,"thornBallPrefab",[sw],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),sY=n(sx.prototype,"airFanPrefab",[sT],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),sJ=n(sx.prototype,"grassPrefab",[sR],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),sX=n(sx.prototype,"balloonPrefab",[s_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),sZ=n(sx.prototype,"brickPrefab",[sA],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),sQ=n(sx.prototype,"arenaPrefab",[sB],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),s$=n(sx.prototype,"woodPrefab",[sP],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),s0=n(sx.prototype,"connectPrefab",[sL],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),s1=n(sx.prototype,"mapLinePrefab",[sO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),s2=n(sx.prototype,"crossingBeeLinePrefab",[sD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),s3=n(sx.prototype,"batchMapLines",[sI],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),s4=n(sx.prototype,"batchPoisonPool",[sN],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),s5=n(sx.prototype,"batchPoisonSurface",[sG],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),s7=n(sx.prototype,"batchWaterPool",[sM],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),s6=n(sx.prototype,"batchDangerArea",[sF],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),sz=sx))||sz);K._RF.pop(),K._RF.push({},"97f21hkFElI0YdBDCgAkt9+","Hint",void 0);var lo,lr,ls,ll,lu,lc=(0,q.ccclass)("Hint")(lt=function(n){i(o,n);var p=a(o);function o(){var n;r(this,o);for(var i=arguments.length,a=new Array(i),d=0;d<i;d++)a[d]=arguments[d];return(n=p.call.apply(p,[this].concat(a))).hintLine=null,n.hintHand=null,n.isHintShown=!1,n}return y(o,[{key:"showHint",value:function(n,i){this.isHintShown||(this.isHintShown=!0,this.hintLine=this.createHintLine(),this.hintLine.active=!0,this.drawHintLine(this.hintLine,n),i&&this.showHand(n))}},{key:"drawHintLine",value:function(n,i){var a=n.getComponent(ey);if(!a)throw new Error("drawHintLine: Graphics is null");a.clear(),a.moveTo(i[0].x,i[0].y);var r,p=T(i.slice(1));try{for(p.s();!(r=p.n()).done;){var d=r.value;a.lineTo(d.x,d.y)}}catch(n){p.e(n)}finally{p.f()}a.stroke()}},{key:"hideHint",value:function(){this.hintLine&&(this.hintLine.active=!1),this.hintHand&&(eH.stopAllByTarget(this.hintHand),this.hintHand.active=!1)}},{key:"showHand",value:function(n){var i=this;this.hintHand=this.createHintHand(n),P.loadSpriteFrameAsync(i7.IC_HAND_FRAME).then(function(a){if(!a)throw new Error("showHand: SpriteFrame is null");i.addSpriteToHand(a),i.runHandHintAnimation(n)}).catch(function(n){i.removeHintHand()})}},{key:"addSpriteToHand",value:function(n){var i;this.hintHand&&(this.hintHand.addComponent(el).spriteFrame=n,null===(i=this.hintHand.getComponent(Z))||void 0===i||i.setAnchorPoint(.15,.9))}},{key:"runHandHintAnimation",value:function(n){var i=this;if(this.hintHand){for(var a=eF(this.hintHand),r=[],p=1;p<n.length;p++){var d=n[p-1],y=n[p],m=d.x-y.x,g=d.y-y.y,b=Math.sqrt(m*m+g*g),C=eF(this.hintHand).to(b/250,{position:new ep(y.x,y.y)});r.push(C)}var S=eF(this.hintHand).delay(.5).call(function(){i.hintHand&&i.hintHand.setPosition(n[0].x,n[0].y)});r.push(S),a.sequence.apply(a,r).repeatForever().start()}}},{key:"getIsHintShow",value:function(){return this.isHintShown}},{key:"reset",value:function(){this.isHintShown=!1,this.removeHintLine(),this.removeHintHand()}},{key:"createHintLine",value:function(){if(this.hintLine)return this.hintLine;var n=new Y,i=n.addComponent(ey);i.lineWidth=10,i.lineCap=ey.LineCap.ROUND,i.lineJoin=ey.LineJoin.ROUND;var a=new J;return J.fromHEX(a,"#fc03036d"),i.strokeColor=a,this.node.insertChild(n,0),n}},{key:"createHintHand",value:function(n){if(this.hintHand)return this.hintHand;var i=new Y;return i.setPosition(n[0].x,n[0].y),this.hintHand=i,this.node.addChild(i),i}},{key:"removeHintLine",value:function(){this.hintLine&&(this.hintLine.getComponent(ey).clear(),this.hintLine.destroyAllChildren(),this.hintLine.removeAllChildren(),this.hintLine.destroy(),this.hintLine=null)}},{key:"removeHintHand",value:function(){this.hintHand&&(this.hintHand.destroyAllChildren(),this.hintHand.removeAllChildren(),this.hintHand.destroy(),this.hintHand=null)}}]),o}(ea))||lt;K._RF.pop(),K._RF.push({},"33281kEO4dMXLCvmfkrwqQM","CollisionDetectLine",void 0);var lh,lp,ld,lv,ly,lf,lm,lg,lb,lC,lS=q.ccclass,lk=q.property,lE=(lo=lS("CollisionDetectLine"),lr=lk(ey),lo((lu=n((ll=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=g.call.apply(g,[this].concat(a)),p(n,"graphic",lu,d(n)),n}return y(u,[{key:"onLoad",value:function(){this.graphic=this.getComponent(ey),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"drawFromTo",value:function(n,i){this.graphic.clear(),this.graphic.moveTo(n.x,n.y),this.graphic.lineTo(i.x,i.y),this.graphic.stroke()}}]),u}(aa)).prototype,"graphic",[lr],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ls=ll))||ls);K._RF.pop(),K._RF.push({},"00eeawrUitLxLgSANaGHhcv","LineDrawer",void 0);var lw=q.ccclass,lT=q.property,lR=q.executionOrder,l_=(lh=lw("LineDrawer"),lp=lR(3),ld=lT(eO),lv=lT(eO),ly=lT(es),lh(lf=lp((lg=n((lm=function(n){i(l,n);var m=a(l);function l(){var n;r(this,l);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=m.call.apply(m,[this].concat(a)),p(n,"linePrefab",lg,d(n)),p(n,"collisionDetectLinePrefab",lb,d(n)),p(n,"minDistance",lC,d(n)),n.lastUIPos=null,n.currentLine=null,n.collisionDetectLine=null,n.isColliding=!1,n}return y(l,[{key:"beginDraw",value:function(n){this.createLine(),this.createCollisionDetectLine(),this.initLine(),this.lastUIPos=null,this.isColliding=!1,this.draw(n)}},{key:"createLine",value:function(){var n=Q(this.linePrefab);_instanceof(n,Y)&&(n.name=iJ.DRAW_LINE,n.getComponent(ey)&&(this.node.addChild(n),this.currentLine=n))}},{key:"createCollisionDetectLine",value:function(){if(this.currentLine){var n=Q(this.collisionDetectLinePrefab);if(_instanceof(n,Y)){var i=n.getComponent(ey);if(i){var a=this.currentLine.getComponent(ey);if(a){var r=a.lineWidth,p=a.strokeColor;i.strokeColor=new J(p.r,p.g,p.b,128),i.lineWidth=r,this.node.addChild(n),this.collisionDetectLine=n}}}}}},{key:"initLine",value:function(){var n,i=null===(n=this.currentLine)||void 0===n?void 0:n.getComponent(a6);i&&(i.sleep(),i.init())}},{key:"draw",value:function(n){var i,a,r=this;if(n&&this.currentLine&&this.collisionDetectLine){var p=this.currentLine.getComponent(a6);if(p){var d=this.collisionDetectLine.getComponent(lE);if(d){var y=new ep;null===(i=this.node.parent)||void 0===i||i.inverseTransformPoint(y,new ep(n.x,n.y));var m=new ew(y.x,y.y);if(this.isPointOverlapWithMap(n)){if(this.lastUIPos){var g=this.lastUIPos,b=g.x,C=g.y;this.node.inverseTransformPoint(y,new ep(b,C));var S=new ew(y.x,y.y);if(this.isColliding)d.drawFromTo(S,m);else{var k,E=this.isCurrentLineOverlapWithMap(n,this.lastUIPos);if(E.sort(function(n,i){return null==r.lastUIPos?0:ew.distance(n.point,r.lastUIPos)-ew.distance(i.point,r.lastUIPos)}),!(null===(k=E[0])||void 0===k?void 0:k.point))return;this.isColliding=!0}}}else if(this.lastUIPos&&this.isCurrentLineOverlapWithMap(n,this.lastUIPos).length>0){var w=this.lastUIPos,T=w.x,R=w.y;this.node.inverseTransformPoint(y,new ep(T,R));var _=new ew(y.x,y.y);d.drawFromTo(_,m)}else{if(!this.lastUIPos){this.lastUIPos=n.clone();var A=m.x,B=m.y;p.storePoints(A,B)}var P=this.lastUIPos,L=P.x,O=P.y;null===(a=this.node.parent)||void 0===a||a.inverseTransformPoint(y,new ep(L,O));var D=new ew(y.x,y.y),I=D.x,N=D.y,G=m.x,M=m.y,F=I-G,z=N-M;if(!(F*F+z*z<this.minDistance*this.minDistance)){var x=Math.sqrt(F*F+z*z);this.lastUIPos=n.clone(),p.drawTo(I,N,G,M),p.storePoints(G,M);var U=this.collisionDetectLine.getComponent(ey);return null==U||U.clear(),this.isColliding=!1,x}}}}}}},{key:"isPointOverlapWithMap",value:function(n){return this.getCollision(n).length>0}},{key:"isCurrentLineOverlapWithMap",value:function(n,i){var a=this.getParallelLines(i,n,2),r=a.leftLine,p=a.rightLine,d=ej.instance.raycast(i,n,eV.All).filter(function(n){return!n.collider.sensor}).filter(function(n){var i;return"rope"!==(null===(i=n.collider.node.parent)||void 0===i?void 0:i.name)}),y=ej.instance.raycast(r.p1,r.p2,eV.All).filter(function(n){return!n.collider.sensor}).filter(function(n){var i;return"rope"!==(null===(i=n.collider.node.parent)||void 0===i?void 0:i.name)}),m=ej.instance.raycast(p.p1,p.p2,eV.All).filter(function(n){return!n.collider.sensor}).filter(function(n){var i;return"rope"!==(null===(i=n.collider.node.parent)||void 0===i?void 0:i.name)});return[].concat(_(d),_(y),_(m))}},{key:"endDraw",value:function(){if(this.currentLine&&this.collisionDetectLine){var n=this.currentLine.getComponent(a6);if(n){n.addPhysics(),n.wake();var i=this.collisionDetectLine.getComponent(ey);i&&(i.clear(),this.lastUIPos=null,this.isColliding=!1,this.currentLine=null)}}}},{key:"deActivePhysics",value:function(){var n,i=null===(n=this.currentLine)||void 0===n?void 0:n.getComponent(a6);i&&(i.deActiveColliders(),i.sleep())}},{key:"clearLines",value:function(){this.node.destroyAllChildren(),this.node.removeAllChildren()}},{key:"getParallelLines",value:function(n,i,a){var r=i.x-n.x,p=i.y-n.y,d=e_.Vec2.distance(n,i),y=r/d,m=p/d,g=new ew(n.x-m*a,n.y+y*a),b=new ew(n.x+m*a,n.y-y*a);return{leftLine:{p1:g,p2:new ew(g.x+r,g.y+p)},rightLine:{p1:b,p2:new ew(b.x+r,b.y+p)}}}},{key:"getCollision",value:function(n){return ej.instance.testAABB(new e_.Rect(n.x-2,n.y-2,4,4)).filter(function(n){return!n.sensor}).filter(function(n){var i;return"rope"!==(null===(i=n.node.parent)||void 0===i?void 0:i.name)}).filter(function(i){if(_instanceof(i,eG)){var a=new ep;return i.node.inverseTransformPoint(a,new ep(n.x,n.y)),eW.polygonCircle(i.points,new ew(a.x,a.y),2)}if(_instanceof(i,eD)){var r=i.node.getWorldPosition(),p=r.x,d=r.y;return eW.circleCircle(new ew(p,d+i.worldPosition.y),i.radius,new ew(n.x,n.y),2)}return!i.sensor})}}]),l}(ea)).prototype,"linePrefab",[ld],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),lb=n(lm.prototype,"collisionDetectLinePrefab",[lv],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),lC=n(lm.prototype,"minDistance",[ly],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),lf=lm))||lf)||lf);K._RF.pop(),K._RF.push({},"463cfEelRVL4KYgc4n5FJNz","Map",void 0);var lA,lB=[{id:1,map:1,type:1},{id:2,map:2,type:1},{id:3,map:3,type:1},{id:4,map:8,type:1},{id:5,map:9,type:1},{id:6,map:16,type:1},{id:7,map:4,type:1},{id:8,map:7,type:1},{id:9,map:6,type:1},{id:10,map:18,type:1},{id:11,map:10,type:2},{id:12,map:11,type:2},{id:13,map:12,type:2},{id:14,map:13,type:2},{id:15,map:14,type:2},{id:16,map:15,type:2},{id:17,map:5,type:2},{id:18,map:17,type:2},{id:19,map:19,type:2},{id:20,map:20,type:2},{id:21,map:21,type:3},{id:22,map:22,type:3},{id:23,map:23,type:3},{id:24,map:24,type:3},{id:25,map:25,type:3},{id:26,map:26,type:3},{id:27,map:27,type:3},{id:28,map:28,type:3},{id:29,map:29,type:3},{id:30,map:30,type:3},{id:31,map:31,type:4},{id:32,map:32,type:4},{id:33,map:33,type:4},{id:34,map:34,type:4},{id:35,map:35,type:4},{id:36,map:36,type:4},{id:37,map:37,type:4},{id:38,map:38,type:4},{id:39,map:39,type:4},{id:40,map:40,type:4},{id:41,map:41,type:5},{id:42,map:42,type:5},{id:43,map:43,type:5},{id:44,map:44,type:5},{id:45,map:45,type:5},{id:46,map:46,type:5},{id:47,map:47,type:5},{id:48,map:48,type:5},{id:49,map:49,type:5},{id:50,map:50,type:5},{id:51,map:51,type:6},{id:52,map:52,type:6},{id:53,map:53,type:6},{id:54,map:54,type:6},{id:55,map:55,type:6},{id:56,map:56,type:6},{id:57,map:57,type:6},{id:58,map:58,type:6},{id:59,map:59,type:6},{id:60,map:60,type:6},{id:61,map:61,type:7},{id:62,map:62,type:7},{id:63,map:63,type:7},{id:64,map:64,type:7},{id:65,map:65,type:7},{id:66,map:66,type:7},{id:67,map:67,type:7},{id:68,map:68,type:7},{id:69,map:69,type:7},{id:70,map:70,type:7},{id:71,map:71,type:8},{id:72,map:72,type:8},{id:73,map:73,type:8},{id:74,map:74,type:8},{id:75,map:75,type:8},{id:76,map:76,type:8},{id:77,map:77,type:8},{id:78,map:78,type:8},{id:79,map:79,type:8},{id:80,map:80,type:8},{id:81,map:81,type:9},{id:82,map:82,type:9},{id:83,map:83,type:9},{id:84,map:84,type:9},{id:85,map:85,type:9},{id:86,map:86,type:9},{id:87,map:87,type:9},{id:88,map:88,type:9},{id:89,map:89,type:9},{id:90,map:90,type:9},{id:91,map:91,type:10},{id:92,map:92,type:10},{id:93,map:93,type:10},{id:94,map:94,type:10},{id:95,map:95,type:10},{id:96,map:96,type:10},{id:97,map:97,type:10},{id:98,map:98,type:10},{id:99,map:99,type:10},{id:100,map:100,type:10},{id:101,map:101,type:11},{id:102,map:102,type:11},{id:103,map:103,type:11},{id:104,map:104,type:11},{id:105,map:105,type:11},{id:106,map:106,type:11},{id:107,map:107,type:11},{id:108,map:108,type:11},{id:109,map:109,type:11},{id:110,map:110,type:11},{id:111,map:111,type:12},{id:112,map:112,type:12},{id:113,map:113,type:12},{id:114,map:114,type:12},{id:115,map:115,type:12},{id:116,map:116,type:12},{id:117,map:117,type:12},{id:118,map:118,type:12},{id:119,map:119,type:12},{id:120,map:120,type:12},{id:121,map:121,type:13},{id:122,map:122,type:13},{id:123,map:123,type:13},{id:124,map:124,type:13},{id:125,map:125,type:13},{id:126,map:126,type:13},{id:127,map:127,type:13},{id:128,map:128,type:13},{id:129,map:129,type:13},{id:130,map:130,type:13},{id:131,map:131,type:14},{id:132,map:132,type:14},{id:133,map:133,type:14},{id:134,map:134,type:14},{id:135,map:135,type:14},{id:136,map:136,type:14},{id:137,map:137,type:14},{id:138,map:138,type:14},{id:139,map:139,type:14},{id:140,map:140,type:14},{id:141,map:141,type:15},{id:142,map:142,type:15},{id:143,map:143,type:15},{id:144,map:144,type:15},{id:145,map:145,type:15},{id:146,map:146,type:15},{id:147,map:147,type:15},{id:148,map:148,type:15},{id:149,map:149,type:15},{id:150,map:150,type:15},{id:151,map:184,type:16},{id:152,map:185,type:16},{id:153,map:186,type:16},{id:154,map:187,type:16},{id:155,map:188,type:16},{id:156,map:189,type:16},{id:157,map:190,type:16},{id:158,map:191,type:16},{id:159,map:192,type:16},{id:160,map:193,type:16},{id:161,map:194,type:17},{id:162,map:195,type:17},{id:163,map:196,type:17},{id:164,map:197,type:17},{id:165,map:198,type:17},{id:166,map:199,type:17},{id:167,map:200,type:17},{id:168,map:167,type:17},{id:169,map:168,type:17},{id:170,map:169,type:17},{id:171,map:170,type:18},{id:172,map:171,type:18},{id:173,map:172,type:18},{id:174,map:173,type:18},{id:175,map:174,type:18},{id:176,map:175,type:18},{id:177,map:176,type:18},{id:178,map:177,type:18},{id:179,map:178,type:18},{id:180,map:179,type:18},{id:181,map:180,type:19},{id:182,map:181,type:19},{id:183,map:182,type:19},{id:184,map:183,type:19},{id:185,map:151,type:19},{id:186,map:152,type:19},{id:187,map:153,type:19},{id:188,map:154,type:19},{id:189,map:155,type:19},{id:190,map:156,type:19},{id:191,map:157,type:20},{id:192,map:158,type:20},{id:193,map:159,type:20},{id:194,map:160,type:20},{id:195,map:161,type:20},{id:196,map:162,type:20},{id:197,map:163,type:20},{id:198,map:164,type:20},{id:199,map:165,type:20},{id:200,map:166,type:20},{id:201,map:201,type:21},{id:202,map:202,type:21},{id:203,map:203,type:21},{id:204,map:204,type:21},{id:205,map:205,type:21},{id:206,map:206,type:21},{id:207,map:207,type:21},{id:208,map:208,type:21},{id:209,map:209,type:21},{id:210,map:210,type:21},{id:211,map:211,type:22},{id:212,map:212,type:22},{id:213,map:213,type:22},{id:214,map:214,type:22},{id:215,map:215,type:22},{id:216,map:216,type:22},{id:217,map:217,type:22},{id:218,map:218,type:22},{id:219,map:219,type:22},{id:220,map:220,type:22},{id:221,map:221,type:23},{id:222,map:222,type:23},{id:223,map:223,type:23},{id:224,map:224,type:23},{id:225,map:225,type:23},{id:226,map:226,type:23},{id:227,map:227,type:23},{id:228,map:228,type:23},{id:229,map:229,type:23},{id:230,map:230,type:23},{id:231,map:231,type:24},{id:232,map:232,type:24},{id:233,map:233,type:24},{id:234,map:234,type:24},{id:235,map:235,type:24},{id:236,map:236,type:24},{id:237,map:237,type:24},{id:238,map:238,type:24},{id:239,map:239,type:24},{id:240,map:240,type:24},{id:241,map:241,type:25},{id:242,map:242,type:25},{id:243,map:243,type:25},{id:244,map:244,type:25},{id:245,map:245,type:25},{id:246,map:246,type:25},{id:247,map:247,type:25},{id:248,map:248,type:25},{id:249,map:249,type:25},{id:250,map:250,type:25},{id:251,map:251,type:26},{id:252,map:252,type:26},{id:253,map:253,type:26},{id:254,map:254,type:26},{id:255,map:255,type:26},{id:256,map:256,type:26},{id:257,map:257,type:26},{id:258,map:258,type:26},{id:259,map:259,type:26},{id:260,map:260,type:26},{id:261,map:261,type:27},{id:262,map:262,type:27},{id:263,map:263,type:27},{id:264,map:264,type:27},{id:265,map:265,type:27},{id:266,map:266,type:27},{id:267,map:267,type:27},{id:268,map:268,type:27},{id:269,map:269,type:27},{id:270,map:270,type:27},{id:271,map:271,type:28},{id:272,map:272,type:28},{id:273,map:273,type:28},{id:274,map:274,type:28},{id:275,map:275,type:28},{id:276,map:276,type:28},{id:277,map:277,type:28},{id:278,map:278,type:28},{id:279,map:279,type:28},{id:280,map:280,type:28},{id:281,map:281,type:29},{id:282,map:282,type:29},{id:283,map:283,type:29},{id:284,map:284,type:29},{id:285,map:285,type:29},{id:286,map:286,type:29},{id:287,map:287,type:29},{id:288,map:288,type:29},{id:289,map:289,type:29},{id:290,map:290,type:29},{id:291,map:291,type:30},{id:292,map:292,type:30},{id:293,map:293,type:30},{id:294,map:294,type:30},{id:295,map:295,type:30},{id:296,map:296,type:30},{id:297,map:297,type:30},{id:298,map:298,type:30},{id:299,map:299,type:30},{id:300,map:300,type:30},{id:301,map:301,type:31},{id:302,map:302,type:31},{id:303,map:303,type:31},{id:304,map:304,type:31},{id:305,map:305,type:31},{id:306,map:306,type:31},{id:307,map:307,type:31},{id:308,map:308,type:31},{id:309,map:309,type:31},{id:310,map:310,type:31},{id:311,map:311,type:32},{id:312,map:312,type:32},{id:313,map:313,type:32},{id:314,map:314,type:32},{id:315,map:315,type:32},{id:316,map:316,type:32},{id:317,map:317,type:32},{id:318,map:318,type:32},{id:319,map:319,type:32},{id:320,map:320,type:32},{id:321,map:321,type:33},{id:322,map:322,type:33},{id:323,map:323,type:33},{id:324,map:324,type:33},{id:325,map:325,type:33}];K._RF.pop(),K._RF.push({},"45df2RUUZZNhaXqOADOV0HC","MapLoader",void 0);var lP,lL=(0,q.ccclass)("MapLoader")(lA=function(n){i(o,n);var p=a(o);function o(){return r(this,o),p.apply(this,arguments)}return y(o,[{key:"paddingZero",value:function(n,i){return Array(i-n.length).fill("0").join("")+n}},{key:"getMapByLevel",value:function(n){var i=lB.find(function(i){return i.id===n});return i?i.map:1}},{key:"preloadLevel",value:function(n){var i=this.getMapByLevel(n),a=this.paddingZero(i.toString(),3);eI.preload("".concat(i7.MAP_JSON_PREFIX).concat(a),eK)}},{key:"loadLevel",value:function(n,i){var a=this.getMapByLevel(n),r=this.paddingZero(a.toString(),3);eI.load("".concat(i7.MAP_JSON_PREFIX).concat(r),eK,i)}},{key:"isLevelAlreadyLoaded",value:function(n){var i=this.getMapByLevel(n),a=this.paddingZero(i.toString(),3);return null!==eI.getInfoWithPath("".concat(i7.MAP_JSON_PREFIX).concat(a))}}]),o}(ea))||lA;K._RF.pop(),K._RF.push({},"8d3c7nuQGRNgpZcqAOCJY6O","InkCapacityController",void 0);var lO,lD=(0,q.ccclass)("InkCapacityController")(lP=function(n){i(o,n);var p=a(o);function o(){var n;r(this,o);for(var i=arguments.length,a=new Array(i),d=0;d<i;d++)a[d]=arguments[d];return(n=p.call.apply(p,[this].concat(a))).maxInkLevel=0,n.currentInkLevel=0,n}return y(o,[{key:"init",value:function(n){var i=this.getDrawLength(n);this.maxInkLevel=i,this.currentInkLevel=i}},{key:"getCurrentInkLevel",value:function(){return Math.floor(this.currentInkLevel)}},{key:"removeInkLevel",value:function(n){var i=this.currentInkLevel-n;this.setInkLevel(i)}},{key:"setInkLevel",value:function(n){this.currentInkLevel=n,this.currentInkLevel<0&&(this.currentInkLevel=0),this.currentInkLevel>this.maxInkLevel&&(this.currentInkLevel=this.maxInkLevel)}},{key:"isInkEmpty",value:function(){return this.currentInkLevel<=0}},{key:"getInkLevelPercentage",value:function(){return this.currentInkLevel/this.maxInkLevel*100}},{key:"getStarRating",value:function(n){var i=arguments.length>0&&void 0!==n?n:3,a=this.maxInkLevel/i,r=Math.ceil(this.getCurrentInkLevel()/a);return 0===r?1:r}},{key:"getDrawLength",value:function(n){for(var i=0,a=1;a<n.length;a++){var r=n[a-1],p=n[a],d=r.x-p.x,y=r.y-p.y;i+=Math.sqrt(d*d+y*y)}return 3*i}}]),o}(ea))||lP;K._RF.pop(),K._RF.push({},"014cbNey8JEV4aPhDm9R5W4","InputController",void 0);var lI=(0,q.ccclass)("InputController")(lO=function(n){i(o,n);var p=a(o);function o(){var n;r(this,o);for(var i=arguments.length,a=new Array(i),d=0;d<i;d++)a[d]=arguments[d];return(n=p.call.apply(p,[this].concat(a))).pointerDownOutSideCanvas=!1,n.handleElementPointerDown=function(){n.pointerDownOutSideCanvas=!0},n.handleElementPointerUp=function(i){n.onTouchEnd(),n.pointerDownOutSideCanvas=!1},n.onTouchStart=function(i){n.node.scene.emit(aD.GAME_START,{pointer:i})},n.onTouchMove=function(i){if(n.pointerDownOutSideCanvas)return n.node.scene.emit(aD.GAME_START,{pointer:i}),void(n.pointerDownOutSideCanvas=!1);n.node.scene.emit(aD.DRAWING,{pointer:i})},n.onTouchEnd=function(i){n.node.scene.emit(aD.BEE_ATTACK)},n}return y(o,[{key:"onLoad",value:function(){this.listenInputEvents()}},{key:"listenInputEvents",value:function(){em.os===em.OS.WINDOWS||em.os===em.OS.OSX?(document.addEventListener("pointerup",this.handleElementPointerUp),document.addEventListener("pointerdown",this.handleElementPointerDown),this.node.on(Y.EventType.MOUSE_DOWN,this.onTouchStart),this.node.on(Y.EventType.MOUSE_MOVE,this.onTouchMove),this.node.on(Y.EventType.MOUSE_UP,this.onTouchEnd)):(this.node.on(Y.EventType.TOUCH_START,this.onTouchStart),this.node.on(Y.EventType.TOUCH_MOVE,this.onTouchMove),this.node.on(Y.EventType.TOUCH_CANCEL,this.onTouchEnd),this.node.on(Y.EventType.TOUCH_END,this.onTouchEnd))}},{key:"onDestroy",value:function(){em.os===em.OS.WINDOWS||em.os===em.OS.OSX?(document.removeEventListener("pointerup",this.handleElementPointerUp),document.removeEventListener("pointerdown",this.handleElementPointerDown),this.node.off(Y.EventType.MOUSE_DOWN,this.onTouchStart),this.node.off(Y.EventType.MOUSE_MOVE,this.onTouchMove),this.node.off(Y.EventType.MOUSE_UP,this.onTouchEnd)):(this.node.off(Y.EventType.TOUCH_START,this.onTouchStart),this.node.off(Y.EventType.TOUCH_MOVE,this.onTouchMove),this.node.off(Y.EventType.TOUCH_CANCEL,this.onTouchEnd),this.node.off(Y.EventType.TOUCH_END,this.onTouchEnd))}}]),o}(ea))||lO;K._RF.pop(),K._RF.push({},"e6116mseMNPD6VcLUtkvez6","BaseState",void 0);var lN=function(){function e(n){if(r(this,e),this.game=null,this.data={},this.game=n.node.getComponent(h_),!this.game)throw new Error("Gameplay component not found");this.manager=n,this.updateStateData(),this.logDebug()}return y(e,[{key:"logDebug",value:function(){this.constructor.name}},{key:"updateStateData",value:function(){if(this.game){var n=this.game.getGameData();n&&(this.data=n)}}},{key:"updateGameData",value:function(n){var i;null===(i=this.game)||void 0===i||i.setGameData(n)}}]),e}();K._RF.pop(),K._RF.push({},"a79a7LT0s5BuZrk5mvYsyKr","AttackingState",void 0);var lG=function(n){i(o,n);var p=a(o);function o(n){var i;return r(this,o),(i=p.call(this,n)).stopHint(),i.stopDrawing(),i.wakeUpObjects(),i.spawnEnemies(),i.startCountdown(),k.turnDownMusic(),i}return y(o,[{key:"load",value:function(){var n=this.manager.createLoadingState();this.manager.change(n)}},{key:"initialize",value:function(){k.stopSound(R.BEE_FLYING);var n=this.manager.createInitializeState();this.manager.change(n)}},{key:"ready",value:function(){}},{key:"draw",value:function(){}},{key:"attack",value:function(){}},{key:"escape",value:function(){var n=this.manager.createEscapeState();this.manager.change(n)}},{key:"death",value:function(){var n=this.manager.createDeathState();this.manager.change(n)}},{key:"finish",value:function(){}},{key:"update",value:function(){}},{key:"stopDrawing",value:function(){var n;null===(n=this.game)||void 0===n||null===(n=n.lineDrawer)||void 0===n||n.endDraw()}},{key:"stopHint",value:function(){var n;null===(n=this.game)||void 0===n||null===(n=n.hint)||void 0===n||n.hideHint()}},{key:"wakeUpObjects",value:function(){var n;null===(n=this.game)||void 0===n||null===(n=n.gameObjects)||void 0===n||n.wakeUpObjects()}},{key:"spawnEnemies",value:function(){this.game&&this.game.gameObjects&&(this.game.gameObjects.spawnBees(),this.game.gameObjects.reviveBigBees(),k.playSound(R.BEE_FLYING),k.playSound(R.END_DRAW))}},{key:"startCountdown",value:function(){var n;null===(n=this.game)||void 0===n||n.uiManager.startCountdown()}}]),o}(lN);K._RF.pop(),K._RF.push({},"17461foCjdJ276bG2jcxA06","DeathState",void 0);var lM=globalThis.game.analytics,lF=function(n){i(o,n);var p=a(o);function o(n){var i,a,d;return r(this,o),(d=p.call(this,n)).processCrazyGamesEvent(),d.disableUI(),k.stopAllSounds(),d.vibrateDevice(),d.pauseCountdown(),d.logLevelFailAnalytics(),null===(i=d.game)||void 0===i||i.scheduleOnce(function(){d.stopDogesLooking(),d.showUncompletedMark(),k.playSound(R.LEVEL_FAIL,{volume:.3})},.5),null===(a=d.game)||void 0===a||a.scheduleOnce(function(){d.sleepObjects(),d.showLoseScreen(),d.manager.finish()},1.8),d}return y(o,[{key:"processCrazyGamesEvent",value:function(){"gameplayStop"in GameSDK.extra&&GameSDK.extra.gameplayStop()}},{key:"load",value:function(){}},{key:"initialize",value:function(){}},{key:"ready",value:function(){}},{key:"draw",value:function(){}},{key:"attack",value:function(){}},{key:"escape",value:function(){}},{key:"death",value:function(){}},{key:"finish",value:function(){var n=this.manager.createFinishState();this.manager.change(n)}},{key:"update",value:function(){}},{key:"disableUI",value:function(){var n,i;null===(n=this.game)||void 0===n||n.uiManager.disableUI(),null===(i=this.game)||void 0===i||i.hint.reset()}},{key:"sleepObjects",value:function(){var n,i;null===(n=this.game)||void 0===n||null===(n=n.lineDrawer)||void 0===n||n.deActivePhysics(),null===(i=this.game)||void 0===i||null===(i=i.gameObjects)||void 0===i||i.sleepObjects()}},{key:"pauseCountdown",value:function(){var n;null===(n=this.game)||void 0===n||n.uiManager.pauseCountdown()}},{key:"stopDogesLooking",value:function(){var n;if(null!==(n=this.game)&&void 0!==n&&n.gameObjects){var i,a=this.game.gameObjects.getComponentsInChildren(si),r=T(a);try{for(r.s();!(i=r.n()).done;){var p,d=i.value;null===(p=d.eyes)||void 0===p||p.stopLook(),d.setEnable(!1)}}catch(n){r.e(n)}finally{r.f()}}}},{key:"vibrateDevice",value:function(){var n;null===(n=eU("Vibrate"))||void 0===n||null===(n=n.getComponent(ij))||void 0===n||n.vibrate(500)}},{key:"showUncompletedMark",value:function(){var n;null===(n=this.game)||void 0===n||n.uiManager.showUncompletedMark()}},{key:"showLoseScreen",value:function(){var n=this.data.level;L.openScreen(O.LOSE_SCREEN,{level:n})}},{key:"logLevelFailAnalytics",value:function(){if(this.game){var n=this.game.inkCapacityController;if(n){var i=this.data.level,a=void 0===i?0:i,r=n.getStarRating();lM.levelFail(a,r)}}}}]),o}(lN);K._RF.pop(),K._RF.push({},"71778iMCmVDQKkpW1Ag0dZz","DrawingState",void 0);var lz=function(n){i(o,n);var p=a(o);function o(n){var i;return r(this,o),(i=p.call(this,n)).dist=0,i.isEmptyDraw=!1,i.initDrawer(),i}return y(o,[{key:"load",value:function(){}},{key:"initialize",value:function(){var n=this.manager.createInitializeState();this.manager.change(n)}},{key:"ready",value:function(){var n=this.manager.createReadyState();this.manager.change(n)}},{key:"draw",value:function(){}},{key:"attack",value:function(){var n,i,a;if(100===(null!==(n=null===(i=this.game)||void 0===i?void 0:i.inkCapacityController.getInkLevelPercentage())&&void 0!==n?n:0))return null===(a=this.game)||void 0===a||a.lineDrawer.endDraw(),void(this.isEmptyDraw=!0);var r=this.manager.createAttackingState();this.manager.change(r)}},{key:"escape",value:function(){}},{key:"death",value:function(){}},{key:"finish",value:function(){}},{key:"update",value:function(){var n;this.isInkEmpty()?null===(n=this.game)||void 0===n||n.node.scene.emit(aD.BEE_ATTACK):this.isEmptyDraw?this.manager.ready():(this.updateStateData(),this.drawLines(),this.updateInkLevel(),this.updateProgressBar())}},{key:"initDrawer",value:function(){var n;if(null!==(n=this.game)&&void 0!==n&&n.lineDrawer){var i=this.data.pointer.getUILocation();this.game.lineDrawer.beginDraw(i),k.playSound(R.BUTTON_CLICK)}}},{key:"isInkEmpty",value:function(){return!!this.game&&this.game.inkCapacityController.isInkEmpty()}},{key:"drawLines",value:function(){var n,i;if(null!==(n=this.game)&&void 0!==n&&n.lineDrawer){var a=this.data.pointer.getUILocation();if(this.dist=null!==(i=this.game.lineDrawer.draw(a))&&void 0!==i?i:0,this.dist>0){var r=R.TOUCH_START;k.playSound(r,{volume:.8})}}}},{key:"updateInkLevel",value:function(){var n;null===(n=this.game)||void 0===n||n.inkCapacityController.removeInkLevel(this.dist)}},{key:"updateProgressBar",value:function(){if(this.game){var n=this.game.inkCapacityController.getStarRating();this.game.uiManager.setProgressStars(n);var i=this.game.inkCapacityController.getInkLevelPercentage();this.game.uiManager.setProgressBarPercentage(i)}}}]),o}(lN);K._RF.pop(),K._RF.push({},"d600e+7dHhGOYCGrcOjxVcl","EscapeState",void 0);var lx=globalThis.game,lU=lx.player,lH=lx.analytics,lj=function(n){i(o,n);var p=a(o);function o(n){var i,a;return r(this,o),(a=p.call(this,n)).processCrazyGamesEvent(),a.disableUI(),a.stopAllSounds(),a.vibrateDevice(),a.makeDogesSmile(),a.pauseCountdown(),a.showCompletedMark(),a.updatePlayerProgress(),a.stopBeeBehavior(),a.logLevelCompleteAnalytics(),null===(i=a.game)||void 0===i||i.scheduleOnce(function(){a.sleepObjects(),a.showWiningScreen(),a.manager.finish()},.5),k.playSound(R.LEVEL_PASS),k.playSound(R.BEE_FLYING),a}return y(o,[{key:"processCrazyGamesEvent",value:function(){"gameplayStop"in GameSDK.extra&&GameSDK.extra.gameplayStop()}},{key:"load",value:function(){}},{key:"initialize",value:function(){}},{key:"ready",value:function(){}},{key:"draw",value:function(){}},{key:"attack",value:function(){}},{key:"escape",value:function(){}},{key:"death",value:function(){}},{key:"finish",value:function(){var n=this.manager.createFinishState();this.manager.change(n)}},{key:"update",value:function(){}},{key:"disableUI",value:function(){var n,i;null===(n=this.game)||void 0===n||n.uiManager.disableUI(),null===(i=this.game)||void 0===i||i.hint.reset()}},{key:"stopBeeBehavior",value:function(){var n;null===(n=this.game)||void 0===n||null===(n=n.gameObjects)||void 0===n||n.stopBeeBehavior()}},{key:"sleepObjects",value:function(){var n,i;null===(n=this.game)||void 0===n||null===(n=n.lineDrawer)||void 0===n||n.deActivePhysics(),null===(i=this.game)||void 0===i||null===(i=i.gameObjects)||void 0===i||i.sleepObjects()}},{key:"stopAllSounds",value:function(){k.stopAllSounds()}},{key:"makeDogesSmile",value:function(){var n;if(null!==(n=this.game)&&void 0!==n&&n.gameObjects){var i,a=this.game.gameObjects.getComponentsInChildren(si),r=T(a);try{for(r.s();!(i=r.n()).done;){var p=i.value;p.smile(),p.setEnable(!1)}}catch(n){r.e(n)}finally{r.f()}}}},{key:"vibrateDevice",value:function(){var n;null===(n=eU("Vibrate"))||void 0===n||null===(n=n.getComponent(ij))||void 0===n||n.vibrate(500)}},{key:"pauseCountdown",value:function(){var n;null===(n=this.game)||void 0===n||n.uiManager.pauseCountdown()}},{key:"showCompletedMark",value:function(){var n;null===(n=this.game)||void 0===n||n.uiManager.showCompletedMark()}},{key:"updatePlayerProgress",value:function(){if(this.game){var n=this.data.level;if(n){var i=this.game.inkCapacityController.getStarRating(),a=lU.getGameData();if(a&&a.levelProgress){var r=a.levelProgress[n]||0,p=a.totalLevel,d=D({},a);n>=p&&(d.passAllLevels=!0),n<a.level&&(d.level=n+1);var y=Math.max(r,i);d.levelProgress[n]=y,lU.setGameData(d)}}}}},{key:"showWiningScreen",value:function(){if(this.game){var n=this.data.level,i=this.game.inkCapacityController.getStarRating();L.openScreen(O.WINNING_SCREEN,{level:n,stars:i})}}},{key:"logLevelCompleteAnalytics",value:function(){if(this.game){var n=this.game.inkCapacityController;if(n){var i=this.data.level,a=void 0===i?0:i,r=n.getStarRating();lH.levelComplete(a,r)}}}}]),o}(lN);K._RF.pop(),K._RF.push({},"9046etpNclOb7EjoNvbF/aZ","MatchUtils",void 0);var lV=GameCore,lW=lV.Match,lK=lV.Utils,lq=lK.Object,lY=lK.Valid,lJ=lK.String,lX=globalThis.game,lZ=lX.match,lQ=lX.player,l$=lX.leaderboard,l0=function(){function e(){r(this,e)}var n,i,a,p,d,m,g,b,C,S,k,E,w,T,R,_,A,B;return y(e,[{key:"processStartSingleModeAsync",value:(B=I(function(){var n;return _ts_generator(this,function(i){switch(i.label){case 0:n=lQ.getPlayerId();return[4,lZ.single.start.processAsync({playerId:n})];case 1:i.sent();return[2]}})}),function(){return B.apply(this,arguments)})},{key:"processFinishSingleModeAsync",value:(A=I(function(){return _ts_generator(this,function(n){switch(n.label){case 0:return[4,lZ.single.finish.processAsync()];case 1:n.sent();return[2]}})}),function(){return A.apply(this,arguments)})},{key:"processStartTournamentModeAsync",value:(_=I(function(){var n,i;return _ts_generator(this,function(a){switch(a.label){case 0:n=lQ.getPlayerId(),i=GameSDK.context.getID();return[4,lZ.tournament.continue.processAsync({playerId:n,contextId:i})];case 1:a.sent();return[2]}})}),function(){return _.apply(this,arguments)})},{key:"processFinishTournamentModeAsync",value:(R=I(function(){var n,i;return _ts_generator(this,function(a){switch(a.label){case 0:n=lQ.getPlayerId(),i=lQ.getBestScore();return[4,lZ.tournament.finish.processAsync({playerId:n,bestScore:i})];case 1:a.sent();return[2]}})}),function(){return R.apply(this,arguments)})},{key:"processStartChallengeModeAsync",value:(T=I(function(){var n,i,a;return _ts_generator(this,function(r){switch(r.label){case 0:r.trys.push([0,2,,7]);return[4,this.processContinueChallengeAsync()];case 1:r.sent();return[3,7];case 2:n=r.sent();if(!lq.hasOwn(n,"name")||lY.isString(n.name))throw n;i="PlayerHasFinishedMatch"===n.name;if(!i)return[3,4];return[4,this.processChallengeNewOpponentAsync()];case 3:i=r.sent();r.label=4;case 4:a="PlayerNotJoinInMatch"===n.name;if(!a)return[3,6];return[4,this.processJoinChallengeAsync()];case 5:a=r.sent();r.label=6;case 6:return[3,7];case 7:return[2]}})}),function(){return T.apply(this,arguments)})},{key:"processFinishChallengeModeAsync",value:(w=I(function(){return _ts_generator(this,function(n){switch(n.label){case 0:return[4,lZ.challenge.finish.processAsync()];case 1:n.sent();return[2]}})}),function(){return w.apply(this,arguments)})},{key:"processContinueChallengeAsync",value:(E=I(function(){var n,i,a,r,p,d;return _ts_generator(this,function(y){switch(y.label){case 0:n=this.getMatchState(),i=n.id,a=n.customData,r=a.playerId,p=a.opponentId;if(!lY.isString(i))throw new Error("Invalid match id");if(!lY.isString(r))throw new Error("Invalid player id");if(!lY.isString(p))throw new Error("Invalid opponent id");d=GameSDK.context.getID();if(!d)throw new Error("Cannot get contextId");return[4,lZ.challenge.continue.processAsync({matchId:i,contextId:d,playerId:r,opponentId:p})];case 1:y.sent();return[2]}})}),function(){return E.apply(this,arguments)})},{key:"processChallengeNewOpponentAsync",value:(k=I(function(){var n,i,a,r;return _ts_generator(this,function(p){switch(p.label){case 0:n=lQ.getConnectedPlayerIds(100,0),i=Math.floor(Math.random()*n.length),a=lQ.getPlayerId(),r=n[i];return[4,lZ.challenge.friend.processAsync({playerId:a,opponentId:r})];case 1:p.sent();return[2]}})}),function(){return k.apply(this,arguments)})},{key:"processJoinChallengeAsync",value:(S=I(function(){var n,i,a,r,p;return _ts_generator(this,function(d){switch(d.label){case 0:n=this.getMatchState(),i=n.id,a=n.customData,r=a.playerId,p=a.opponentId;if(!lY.isString(i))throw new Error("Invalid match id");if(!lY.isString(r))throw new Error("Invalid player id");if(!lY.isString(p))throw new Error("Invalid opponent id");return[4,lZ.challenge.join.processAsync({matchId:i,playerId:r,opponentId:p})];case 1:d.sent();return[2]}})}),function(){return S.apply(this,arguments)})},{key:"getMatchState",value:function(){var n=lZ.getMatchState();if(!n)throw new Error("Match state not found");return n}},{key:"getMatchMode",value:function(){var n=this.getMatchState();return lY.isString(n.mode)?n.mode:null}},{key:"getTournamentsAsync",value:(C=I(function(){return _ts_generator(this,function(n){switch(n.label){case 0:n.trys.push([0,2,,3]);return[4,GameSDK.tournament.getTournamentsAsync()];case 1:return[2,n.sent()];case 2:n.sent();return[2,[]];case 3:return[2]}})}),function(){return C.apply(this,arguments)})},{key:"createTournamentPayload",value:function(){var n,i,a=lJ.generateObjectId(),r=lQ.getPlayerId(),p=this.getMatchState().profiles;return{score:null!==(n=null===(i=(void 0===p?{}:p)[r])||void 0===i?void 0:i.score)&&void 0!==n?n:0,playerId:r,mode:lW.Modes.TOURNAMENT,name:this.createTournamentName(),leaderboardId:a,payload:{playerId:r,leaderboardId:a}}}},{key:"createTournamentName",value:function(){var n=lQ.getPlayer().name,i=void 0===n?null:n;if(i){var a=i.substring(0,7),r="".concat(a.split(" ")[0]||a,"'s Tournament"),p=lJ.removeDiacritics(r);return"".concat(p)}return"Tournament"}}],[{key:"inst",get:function(){return this._instance||(this._instance=new e),this._instance}},{key:"startMatchAsync",value:(b=I(function(n){var i,a;return _ts_generator(this,function(r){switch(r.label){case 0:r.trys.push([0,10,,11]);i=null!=n?n:this.inst.getMatchMode(),a=lW.Modes;switch(i){case a.SINGLE:return[3,1];case a.TOURNAMENT:return[3,3];case a.CHALLENGE_FRIEND:return[3,5]}return[3,7];case 1:return[4,this.inst.processStartSingleModeAsync()];case 2:r.sent();return[3,9];case 3:return[4,this.inst.processStartTournamentModeAsync()];case 4:r.sent();return[3,9];case 5:return[4,this.inst.processStartChallengeModeAsync()];case 6:r.sent();return[3,9];case 7:return[4,this.inst.processStartSingleModeAsync()];case 8:r.sent();r.label=9;case 9:return[3,11];case 10:r.sent();return[3,11];case 11:return[2]}})}),function(n){return b.apply(this,arguments)})},{key:"setProfileMatchDataAsync",value:(g=I(function(n){return _ts_generator(this,function(i){switch(i.label){case 0:i.trys.push([0,2,,3]);return[4,lZ.handler.setProfileData(n)];case 1:i.sent();return[3,3];case 2:i.sent();return[3,3];case 3:return[2]}})}),function(n){return g.apply(this,arguments)})},{key:"setMatchCustomDataAsync",value:(m=I(function(n){return _ts_generator(this,function(i){switch(i.label){case 0:i.trys.push([0,2,,3]);return[4,lZ.handler.setMatchCustomData(n)];case 1:i.sent();return[3,3];case 2:i.sent();return[3,3];case 3:return[2]}})}),function(n){return m.apply(this,arguments)})},{key:"setLeaderboardScoreAsync",value:(d=I(function(n){return _ts_generator(this,function(i){switch(i.label){case 0:i.trys.push([0,2,,3]);return[4,lZ.handler.setLeaderboardScore(n)];case 1:i.sent();return[3,3];case 2:i.sent();return[3,3];case 3:return[2]}})}),function(n){return d.apply(this,arguments)})},{key:"finishMatchAsync",value:(p=I(function(){var n,i;return _ts_generator(this,function(a){switch(a.label){case 0:a.trys.push([0,10,,11]);n=this.inst.getMatchMode(),i=GameCore.Match.Modes;switch(n){case i.SINGLE:return[3,1];case i.TOURNAMENT:return[3,3];case i.CHALLENGE_FRIEND:return[3,5]}return[3,7];case 1:return[4,this.inst.processFinishSingleModeAsync()];case 2:a.sent();return[3,9];case 3:return[4,this.inst.processFinishTournamentModeAsync()];case 4:a.sent();return[3,9];case 5:return[4,this.inst.processFinishChallengeModeAsync()];case 6:a.sent();return[3,9];case 7:return[4,this.inst.processFinishSingleModeAsync()];case 8:a.sent();a.label=9;case 9:return[3,11];case 10:a.sent();return[3,11];case 11:return[2]}})}),function(){return p.apply(this,arguments)})},{key:"createTournamentAsync",value:(a=I(function(){var n,i,a;return _ts_generator(this,function(r){switch(r.label){case 0:n=!1;return[4,this.inst.getTournamentsAsync()];case 1:if(r.sent().find(function(n){var i,a=JSON.parse(null!==(i=n.getPayload())&&void 0!==i?i:"{}");return"DEFAULT"===n.getTournamentType()&&a.playerId===lQ.getPlayerId()}))return[2,!1];i=this.inst.createTournamentPayload();r.label=2;case 2:r.trys.push([2,4,,5]);return[4,lZ.tournament.create.processAsync(i)];case 3:r.sent();a=i.leaderboardId;l$.addLeaderboard({name:a,type:"tournament",autoSortRank:!0,leaderboardId:a}),n=!0;return[3,5];case 4:r.sent();return[3,5];case 5:return[2,n]}})}),function(){return a.apply(this,arguments)})},{key:"joinTournamentAsync",value:(i=I(function(n){var i;return _ts_generator(this,function(a){switch(a.label){case 0:i=lQ.getPlayerId();return[4,lZ.tournament.join.processAsync({tournamentId:n,playerId:i})];case 1:a.sent();return[2]}})}),function(n){return i.apply(this,arguments)})},{key:"continueTournamentAsync",value:(n=I(function(n){var i;return _ts_generator(this,function(a){switch(a.label){case 0:i=lQ.getPlayerId();return[4,lZ.tournament.continue.processAsync({playerId:i,contextId:n})];case 1:a.sent();return[2]}})}),function(i){return n.apply(this,arguments)})}]),e}();K._RF.pop(),K._RF.push({},"a9bc11SkV9L/5L+Y+fhswfJ","FinishState",void 0);var l1=globalThis.game.player,l2=function(n){i(s,n);var p,d=a(s);function s(n){var i;return r(this,s),i=d.call(this,n),k.turnUpMusic(),k.stopSound(R.BEE_FLYING),i.finishGameAsync(),i}return y(s,[{key:"load",value:function(){var n=this.manager.createLoadingState();this.manager.change(n)}},{key:"initialize",value:function(){var n=this.manager.createInitializeState();this.manager.change(n)}},{key:"ready",value:function(){}},{key:"draw",value:function(){}},{key:"attack",value:function(){}},{key:"escape",value:function(){}},{key:"death",value:function(){}},{key:"finish",value:function(){}},{key:"update",value:function(){}},{key:"finishGameAsync",value:(p=I(function(){var n,i,a;return _ts_generator(this,function(r){switch(r.label){case 0:r.trys.push([0,2,,3]);if(!this.game)return[2];n=this.game.inkCapacityController;if(!n)return[2];i=this.data.level,a=1e3*(void 0===i?0:i)+100*n.getStarRating();l1.getBestScore()<a&&l1.setBestScore(a);return[4,l0.finishMatchAsync()];case 1:r.sent();return[3,3];case 2:r.sent();return[3,3];case 3:return[2]}})}),function(){return p.apply(this,arguments)})}]),s}(lN);K._RF.pop(),K._RF.push({},"37a5cRy3ANBGpVlH3wyS3Ra","InitializeState",void 0);var l3=function(n){i(l,n);var p,d,m=a(l);function l(n){var i;return r(this,l),i=m.call(this,n),"CrazyGames"===GameSDK.getSDKName()&&i.processCrazyGamesRequirements(),i.enableUI(),i.disableHintButtonForEarlyLevels(),i.clearHint(),i.clearGameObjects(),i.createGameObjects(),i.initInkCapacity(),i.initCountdown(),i.updateHeader(),i.showTutorialUI(),k.playMusic(),i.startGameAsync().then(function(){i.closeLoadingScreen(),i.manager.ready()}),i}return y(l,[{key:"processCrazyGamesRequirements",value:function(){"gameplayStart"in GameSDK.extra&&GameSDK.extra.gameplayStart(),this.showInterAdsCrazyGames()}},{key:"disableHintButtonForEarlyLevels",value:function(){if(this.game){var n=this.data.level;n&&n<=3&&this.game.uiManager.disableHintButton()}}},{key:"showInterAdsCrazyGames",value:(d=I(function(){var n;return _ts_generator(this,function(i){switch(i.label){case 0:n=this.game;if(!n)return[3,2];k.stopAllSounds();return[4,N.showInterstitialAdAsync({forLevel:this.data.level,includeSDK:["CrazyGames"]})];case 1:n=(i.sent()&&this.game.disableRewardAdsItemForCrazyGames(),k.turnUpMusic());i.label=2;case 2:return[2]}})}),function(){return d.apply(this,arguments)})},{key:"load",value:function(){if(GameCore.Utils.Valid.isDebugger()){var n=this.manager.createLoadingState();this.manager.change(n)}}},{key:"initialize",value:function(){}},{key:"ready",value:function(){var n=this.manager.createReadyState();this.manager.change(n)}},{key:"draw",value:function(){}},{key:"attack",value:function(){}},{key:"escape",value:function(){var n=this.manager.createEscapeState();this.manager.change(n)}},{key:"death",value:function(){var n=this.manager.createDeathState();this.manager.change(n)}},{key:"finish",value:function(){}},{key:"update",value:function(){}},{key:"closeLoadingScreen",value:function(){L.closeScreen(O.LOADING_SCREEN)}},{key:"enableUI",value:function(){var n;null===(n=this.game)||void 0===n||n.uiManager.enableUI()}},{key:"clearHint",value:function(){var n;null===(n=this.game)||void 0===n||null===(n=n.hint)||void 0===n||n.reset()}},{key:"clearGameObjects",value:function(){var n,i;null!==(n=this.game)&&void 0!==n&&n.lineDrawer&&null!==(i=this.game)&&void 0!==i&&i.gameObjects&&(this.game.lineDrawer.clearLines(),this.game.gameObjects.clearObjects())}},{key:"createGameObjects",value:function(){var n,i=this.data.levelData;i&&(null===(n=this.game)||void 0===n||null===(n=n.gameObjects)||void 0===n||n.spawnObjects(i))}},{key:"initInkCapacity",value:function(){if(this.game){var n=this.data.levelData;if(n){var i=this.game.inkCapacityController,a=n.lnk,r=void 0===a?[]:a;i.init(r)}}}},{key:"initCountdown",value:function(){var n;null===(n=this.game)||void 0===n||n.uiManager.initCountdown()}},{key:"updateHeader",value:function(){var n;if(null!==(n=this.game)&&void 0!==n&&n.hint){var i=this.game.inkCapacityController.getStarRating();this.game.uiManager.setProgressStars(i);var a=this.game.inkCapacityController.getInkLevelPercentage();this.game.uiManager.setProgressBarPercentage(a),this.game.hint.getIsHintShow()||this.game.uiManager.startCountDownHeaderHintBubbleAnim()}}},{key:"showTutorialUI",value:function(){var n,i;if(this.game){var a=this.data,r=a.level,p=a.levelData;if(r&&p&&!(r>3)&&null!==(n=this.game)&&void 0!==n&&n.hint&&null!==(i=this.game)&&void 0!==i&&i.uiManager){var d=p.tips,y=le.transformPointsFromMapToDrawAreaCoordinate(d);this.game.hint.showHint(y,!0),this.game.uiManager.stopCountDownHeaderHintBubbleAnim()}}}},{key:"startGameAsync",value:(p=I(function(){return _ts_generator(this,function(n){switch(n.label){case 0:n.trys.push([0,2,,3]);if(this.data.isFromLoader)return[2,void this.updateGameData({isFromLoader:!1})];return[4,l0.startMatchAsync()];case 1:n.sent();return[3,3];case 2:n.sent();return[3,3];case 3:return[2]}})}),function(){return p.apply(this,arguments)})}]),l}(lN);K._RF.pop(),K._RF.push({},"a8496IbdA1EnY7sv4ApuaJW","LoadingState",void 0);var l4=function(n){i(o,n);var p=a(o);function o(n){var i;return r(this,o),(i=p.call(this,n)).handleMapLoaded=function(n,a){if(n);else{var r=a.json;i.updateGameData({levelData:r});var p,d,y=i.data.level;if(y)null===(p=i.game)||void 0===p||null===(p=p.gameMap)||void 0===p||p.preloadLevel(y+1);if(i.loadingScreenFlag)null===(d=i.game)||void 0===d||d.scheduleOnce(function(){i.initialize()},.5);else i.initialize()}},i.loadingScreenFlag=!i.isLevelAlreadyLoaded(),i.loadingScreenFlag&&L.showLoadingScreen(),i.stopHint(),i.loadGameMap(),i.updateLevelText(),i}return y(o,[{key:"load",value:function(){}},{key:"initialize",value:function(){var n=this.manager.createInitializeState();this.manager.change(n)}},{key:"ready",value:function(){}},{key:"draw",value:function(){}},{key:"attack",value:function(){}},{key:"escape",value:function(){}},{key:"death",value:function(){}},{key:"finish",value:function(){}},{key:"update",value:function(){}},{key:"isLevelAlreadyLoaded",value:function(){var n,i,a=this.data.level;if(!a)throw new Error("Level is not defined");return null!==(n=null===(i=this.game)||void 0===i||null===(i=i.gameMap)||void 0===i?void 0:i.isLevelAlreadyLoaded(a))&&void 0!==n&&n}},{key:"stopHint",value:function(){var n;null===(n=this.game)||void 0===n||null===(n=n.hint)||void 0===n||n.hideHint()}},{key:"loadGameMap",value:function(){var n,i=this.data.level;if(!i)throw new Error("Level is not defined");null===(n=this.game)||void 0===n||null===(n=n.gameMap)||void 0===n||n.loadLevel(i,this.handleMapLoaded)}},{key:"updateLevelText",value:function(){var n,i=this.data.level;i&&(null===(n=this.game)||void 0===n||n.uiManager.setLevelText(i))}}]),o}(lN);K._RF.pop(),K._RF.push({},"5ef69tJ5eNNv7o22H/XfSD2","ReadyState",void 0);var l5,l7=globalThis.game.analytics,l6=function(n){i(o,n);var p=a(o);function o(n){var i;return r(this,o),(i=p.call(this,n)).logLevelStartAnalytics(),i}return y(o,[{key:"load",value:function(){if(GameCore.Utils.Valid.isDebugger()){var n=this.manager.createLoadingState();this.manager.change(n)}}},{key:"initialize",value:function(){}},{key:"ready",value:function(){}},{key:"draw",value:function(){var n=this.manager.createDrawingState();this.manager.change(n)}},{key:"attack",value:function(){}},{key:"escape",value:function(){var n=this.manager.createEscapeState();this.manager.change(n)}},{key:"death",value:function(){if(GameCore.Utils.Valid.isDebugger()){var n=this.manager.createDeathState();this.manager.change(n)}}},{key:"finish",value:function(){}},{key:"update",value:function(){}},{key:"logLevelStartAnalytics",value:function(){if(this.game){var n=this.data.level,i=void 0===n?0:n,a=this.game.inkCapacityController.getStarRating();l7.levelStart(i,a)}}}]),o}(lN);K._RF.pop(),K._RF.push({},"bb0e3beWSxOOLCv7gjyg2s0","StateManager",void 0);var l9,l8,ue,ut,un,ui,ua,uo,ur,us,ul,uu,uc,uh,up,ud=(0,q.ccclass)("StateManager")(l5=function(n){i(o,n);var p=a(o);function o(){return r(this,o),p.apply(this,arguments)}return y(o,[{key:"init",value:function(){this.state=new l4(this)}},{key:"change",value:function(n){this.state=n}},{key:"load",value:function(){this.state.load()}},{key:"initialize",value:function(){this.state.initialize()}},{key:"isInitialize",value:function(){return _instanceof(this.state,l3)}},{key:"ready",value:function(){this.state.ready()}},{key:"isReady",value:function(){return _instanceof(this.state,l6)}},{key:"draw",value:function(){this.state.draw()}},{key:"isDrawing",value:function(){return _instanceof(this.state,lz)}},{key:"attack",value:function(){this.state.attack()}},{key:"isAttacking",value:function(){return _instanceof(this.state,lG)}},{key:"escape",value:function(){this.state.escape()}},{key:"isSurviving",value:function(){return _instanceof(this.state,lj)}},{key:"death",value:function(){this.state.death()}},{key:"isFailed",value:function(){return _instanceof(this.state,lF)}},{key:"finish",value:function(){this.state.finish()}},{key:"isFinished",value:function(){return _instanceof(this.state,l2)}},{key:"update",value:function(n){this.state&&this.state.update(n)}},{key:"createInitializeState",value:function(){return new l3(this)}},{key:"createLoadingState",value:function(){return new l4(this)}},{key:"createReadyState",value:function(){return new l6(this)}},{key:"createDrawingState",value:function(){return new lz(this)}},{key:"createAttackingState",value:function(){return new lG(this)}},{key:"createEscapeState",value:function(){return new lj(this)}},{key:"createDeathState",value:function(){return new lF(this)}},{key:"createFinishState",value:function(){return new l2(this)}}]),o}(ea))||l5;K._RF.pop(),K._RF.push({},"9e40aEq56tMKLFoeACyl+eH","Clock",void 0);var uv,uy,uf,um,ug,ub,uC,uS,uk=q.ccclass,uE=q.disallowMultiple,uw=q.property,uT=G.WaitForPassSecs,uR=(l9=uk("Clock"),l8=uw($),ue=uw(Y),ut=uw(el),un=uw(Y),ui=uw(Y),ua=uw(eo),l9(uo=uE((us=n((ur=function(n){i(u,n);var m=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=m.call.apply(m,[this].concat(a)),p(n,"timeText",us,d(n)),p(n,"clockContainer",ul,d(n)),p(n,"clockFill",uu,d(n)),p(n,"successIcon",uc,d(n)),p(n,"failIcon",uh,d(n)),p(n,"animation",up,d(n)),n.time=0,n.remaining=0,n.running=!1,n.timeShake=0,n.remainingToShake=0,n.handleUpdateConfig=function(i){n.enabled&&n.setTime(i.WaitForPassSecs)},n}return y(u,[{key:"__preload",value:function(){this.listenEvents()}},{key:"start",value:function(){this.init(),this.setTime(uT),this.setTimeToShake(1)}},{key:"init",value:function(){this.remaining=0,this.running=!1,this.node.active=!1}},{key:"listenEvents",value:function(){this.node.scene.on(g.GAMEPLAY_UPDATE_CONFIG,this.handleUpdateConfig)}},{key:"setTime",value:function(n){this.time=n,this.timeText.string=Math.ceil(n).toString()}},{key:"setTimeToShake",value:function(n){this.timeShake=n,this.remainingToShake=0}},{key:"startCountdown",value:function(){this.running=!0,this.remaining=this.time,this.remainingToShake=this.timeShake,this.node.active=!0,this.failIcon.active=!1,this.successIcon.active=!1}},{key:"pause",value:function(){this.running=!1}},{key:"resume",value:function(){this.running=!0}},{key:"showUncompletedMark",value:function(){this.failIcon.active=!0,eF(this.failIcon).set({scale:new ep(0,0,1)}).to(.5,{scale:new ep(1,1,1)},{easing:"smooth"}).start()}},{key:"showCompletedMark",value:function(){this.successIcon.active=!0,eF(this.successIcon).set({scale:new ep(0,0,1)}).to(.5,{scale:new ep(1,1,1)},{easing:"smooth"}).start()}},{key:"endCountDown",value:function(){this.running=!1,this.node.scene.emit(aD.TIME_OUT)}},{key:"update",value:function(n){this.running&&(this.remaining<=0?this.endCountDown():(this.remainingToShake<=0&&(this.playShakeAnimation(),this.remainingToShake=this.timeShake),this.remaining-=n,this.remainingToShake-=n,this.updateLabel(),this.clockFill.fillRange=this.remaining/this.time))}},{key:"updateLabel",value:function(){var n=Math.ceil(this.remaining).toString();this.timeText.string=n}},{key:"playShakeAnimation",value:function(){var n="Shake";this.animation.clips.some(function(i){return!(!i||i.name!==n)})&&this.animation.play(n)}}]),u}(ea)).prototype,"timeText",[l8],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ul=n(ur.prototype,"clockContainer",[ue],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),uu=n(ur.prototype,"clockFill",[ut],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),uc=n(ur.prototype,"successIcon",[un],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),uh=n(ur.prototype,"failIcon",[ui],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),up=n(ur.prototype,"animation",[ua],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),uo=ur))||uo)||uo);K._RF.pop(),K._RF.push({},"7c115t9HKlH6ZfnhCnLAnpe","Star",void 0);var u_,uA,uB,uP,uL,uO,uD,uI,uN,uG,uM,uF=q.ccclass,uz=q.property,ux=q.requireComponent,uU=(uv=uF("Star"),uy=ux(eo),uf=uz(ea),um=uz(eo),uv(ug=uy((uC=n((ub=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=g.call.apply(g,[this].concat(a)),p(n,"starAppearance",uC,d(n)),p(n,"animation",uS,d(n)),n.isAppear=!1,n.initialPosition=new ep,n}return y(u,[{key:"onLoad",value:function(){this.initialPosition=this.node.position.clone(),this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"resetPosition",value:function(){this.node.setPosition(this.initialPosition)}},{key:"show",value:function(){this.starAppearance.node.active=!0,this.isAppear=!0}},{key:"hide",value:function(){this.starAppearance.node.active=!1,this.isAppear=!1}},{key:"playAnimation",value:function(){this.animation.stop();this.animation.clips.some(function(n){return!(!n||"UpAndDown"!==n.name)})&&this.animation.play("UpAndDown")}},{key:"stopAnimation",value:function(){this.animation.stop()}}]),u}(ea)).prototype,"starAppearance",[uf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),uS=n(ub.prototype,"animation",[um],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ug=ub))||ug)||ug);K._RF.pop(),K._RF.push({},"09f0bRvi+1OQZiIGBFqdNzq","LevelProgressBar",void 0);var uH,uj,uV,uW,uK,uq,uY,uJ,uX,uZ,uQ,u$,u0,u1,u2,u3,u4,u5=q.ccclass,u7=q.property,u6=(u_=u5("LevelProgressBar"),uA=u7(eq),uB=u7(uU),uP=u7(uU),uL=u7(uU),u_((uI=n((uD=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=g.call.apply(g,[this].concat(a)),p(n,"progressBar",uI,d(n)),p(n,"leftStar",uN,d(n)),p(n,"midStar",uG,d(n)),p(n,"rightStar",uM,d(n)),n.toProgress=1,n.progressStep=0,n}return y(u,[{key:"onLoad",value:function(){this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"start",value:function(){this.toProgress=1,this.progressStep=0,this.runStartsAnimation()}},{key:"update",value:function(){var n=this.progressBar.getComponent(el);n&&(this.progressBar.progress>=1?n.type=el.Type.SIMPLE:n.type=el.Type.TILED),this.progressBar.progress-this.progressStep<this.toProgress?this.progressBar.progress!==this.toProgress&&(this.progressBar.progress=this.toProgress):this.progressBar.progress-=this.progressStep}},{key:"runStartsAnimation",value:function(){this.leftStar.isAppear&&this.midStar.isAppear&&this.rightStar.isAppear||(this.leftStar.show(),this.midStar.show(),this.rightStar.show(),this.runStarAnimation(this.leftStar),this.runStarAnimation(this.midStar),this.runStarAnimation(this.rightStar))}},{key:"runStarAnimation",value:function(n){n.resetPosition(),n.playAnimation()}},{key:"stopStarAnimation",value:function(n){n.isAppear&&(n.hide(),n.stopAnimation(),n.resetPosition(),k.playSound(R.LOST_STAR_IN_GAMEPLAY))}},{key:"setProgress",value:function(n){this.toProgress=n/100,this.progressStep=(this.progressBar.progress-this.toProgress)/60*16}},{key:"setStars",value:function(n){switch(n){case 1:this.stopStarAnimation(this.rightStar),this.stopStarAnimation(this.midStar);break;case 2:this.stopStarAnimation(this.rightStar);break;default:this.runStartsAnimation()}}},{key:"reset",value:function(){this.progressBar.progress=1}}]),u}(ea)).prototype,"progressBar",[uA],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),uN=n(uD.prototype,"leftStar",[uB],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),uG=n(uD.prototype,"midStar",[uP],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),uM=n(uD.prototype,"rightStar",[uL],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),uO=uD))||uO);K._RF.pop(),K._RF.push({},"61791zAr2tJR4p22EZ5QRfk","Header",void 0);var u9,u8,ce,ct,cn,ci,ca,co,cr,cs,cl,cu,cc,ch,cp,cd,cv,cy,cm,cg,cb,cC,cS,ck,cE,cw,cT,cR,c_,cA,cB,cP,cL,cO,cD,cI,cN,cG,cM,cF,cz,cx,cU,cH,cj,cV,cW,cK,cq,cY,cJ,cX,cZ,cQ=q.ccclass,c$=q.property,c0=globalThis.game,c1=c0.language,c2=c0.player,c3=(uH=cQ("Header"),uj=c$($),uV=c$(u6),uW=c$(tE),uK=c$(Y),uq=c$(Y),uY=c$(Y),uJ=c$(Y),uH((uQ=n((uZ=function(n){i(c,n);var g,b=a(c);function c(){var n;r(this,c);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=b.call.apply(b,[this].concat(a)),p(n,"levelText",uQ,d(n)),p(n,"levelProgressBar",u$,d(n)),p(n,"hintBubbleAnim",u0,d(n)),p(n,"pauseNode",u1,d(n)),p(n,"replayNode",u2,d(n)),p(n,"hintNode",u3,d(n)),p(n,"skipNode",u4,d(n)),n.handlePlayBubble=function(){n.hintBubbleAnim.play(),n.startCountDownHintBubble()},n}return y(c,[{key:"onLoad",value:function(){this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"handleClickedPauseGame",value:function(){this.showSettingScreen(),this.node.scene.emit(aD.GAME_PAUSE)}},{key:"handleClickedReplayGame",value:function(){var n,i=(null!==(n=c2.getGameData())&&void 0!==n?n:{}).level,a=void 0===i?1:i;this.node.scene.emit(aD.GAME_REPLAY,{level:a})}},{key:"handleClickedHintGame",value:function(){this.node.scene.emit(aD.SHOW_HINT)}},{key:"handleClickedSkipLevel",value:(g=I(function(){return _ts_generator(this,function(n){this.node.scene.emit(aD.SKIP_LEVEL);return[2]})}),function(){return g.apply(this,arguments)})},{key:"showSettingScreen",value:function(){L.openScreen(O.SETTINGS_SCREEN,{})}},{key:"setLevelText",value:function(n){var i=c1.getText("level");this.levelText.string="".concat(i," ").concat(n)}},{key:"setProgress",value:function(n){this.levelProgressBar.setProgress(n)}},{key:"setProgressStars",value:function(n){this.levelProgressBar.setStars(n)}},{key:"startCountDownHintBubble",value:function(){this.schedule(this.handlePlayBubble,30)}},{key:"stopCountDownHintBubble",value:function(){this.unschedule(this.handlePlayBubble)}},{key:"disableButtons",value:function(){this.enableBtnNode(this.pauseNode,!1,!0),this.enableBtnNode(this.replayNode,!1,!0),this.enableBtnNode(this.hintNode,!1,!0),this.enableBtnNode(this.skipNode,!1,!0)}},{key:"enableButtons",value:function(){this.enableBtnNode(this.pauseNode,!0,!0),this.enableBtnNode(this.replayNode,!0,!0),this.enableBtnNode(this.hintNode,!0,!0),this.enableBtnNode(this.skipNode,!0,!0)}},{key:"disableRewardAdsButton",value:function(){this.enableBtnNode(this.hintNode,!1,!1),this.enableBtnNode(this.skipNode,!1,!1)}},{key:"disableHintButton",value:function(){this.enableBtnNode(this.hintNode,!1,!0)}},{key:"enableBtnNode",value:function(n,i,a){var r=n.getComponent(en);if(r&&(r.interactable=i),n.active=a,a){var p=n.getComponent(t6);p&&p.changeState(i)}}}]),c}(ea)).prototype,"levelText",[uj],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),u$=n(uZ.prototype,"levelProgressBar",[uV],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),u0=n(uZ.prototype,"hintBubbleAnim",[uW],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),u1=n(uZ.prototype,"pauseNode",[uK],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),u2=n(uZ.prototype,"replayNode",[uq],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),u3=n(uZ.prototype,"hintNode",[uY],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),u4=n(uZ.prototype,"skipNode",[uJ],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),uX=uZ))||uX);K._RF.pop(),K._RF.push({},"151afQBVDpOYpTjtwP+wYH+","DevTools",void 0);var c4,c5,c7,c6,c9,c8,he,ht,hn,hi=q.ccclass,ha=q.property,ho=(u9=hi("DevToolsContainer"),u8=ha(Y),ce=ha(Y),ct=ha(Y),cn=ha(Y),ci=ha(Y),ca=ha(Y),co=ha(Y),cr=ha(Y),cs=ha(Y),cl=ha(Y),cu=ha(Y),cc=ha(Y),ch=ha(Y),cp=ha(Y),cd=ha(Y),cv=ha(Y),cy=ha(Y),cm=ha(Y),cg=ha(Y),cb=ha(Y),cC=ha(Y),cS=ha(Y),ck=ha(Y),cE=ha(Y),cw=ha(Y),u9((c_=n((cR=function(n){i(c,n);var b=a(c);function c(){var n;r(this,c);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=b.call.apply(b,[this].concat(a)),p(n,"devToolsButton",c_,d(n)),p(n,"winLevelButton",cA,d(n)),p(n,"loseLevelButton",cB,d(n)),p(n,"buildVersionButton",cP,d(n)),p(n,"prevLevelButton",cL,d(n)),p(n,"nextLevelButton",cO,d(n)),p(n,"selectLevelButton",cD,d(n)),p(n,"hintButton",cI,d(n)),p(n,"physicButton",cN,d(n)),p(n,"bundleButton",cG,d(n)),p(n,"beehiveButton",cM,d(n)),p(n,"dogeButton",cF,d(n)),p(n,"thornBallButton",cz,d(n)),p(n,"bigBeeButton",cx,d(n)),p(n,"thornButton",cU,d(n)),p(n,"airFanButton",cH,d(n)),p(n,"brickButton",cj,d(n)),p(n,"grassButton",cV,d(n)),p(n,"grassDarkButton",cW,d(n)),p(n,"lineButton",cK,d(n)),p(n,"poisonButton",cq,d(n)),p(n,"poisonSurfaceButton",cY,d(n)),p(n,"waterButton",cJ,d(n)),p(n,"dangerAreaButton",cX,d(n)),p(n,"dashboardButton",cZ,d(n)),n.isActive=!0,n.gameplay=null,n.gameObjects=null,n.currentSpawnObjId=-1,n.handleClickDashboardButton=function(){M.switchToDashboardScene()},n.handleClickDevToolsButton=function(){n.isActive?(n.hideAllButtons(),n.isActive=!1):(n.showAllButtons(),n.isActive=!0)},n.handleClickPrevLevelButton=function(){var i=n.getCurrentLevel();i&&n.node.scene.emit(aD.SELECT_LEVEL,{level:i-1})},n.handleClickNextLevelButton=function(){var i=n.getCurrentLevel();i&&n.node.scene.emit(aD.SELECT_LEVEL,{level:i+1})},n.handleClickHintButton=function(){n.node.scene.emit(aD.SHOW_HINT,{noAd:!0})},n.handleClickBuildVersionButton=function(){var n=globalThis.game.getBuildVersion();L.showNotificationScreen("Build version: ".concat(n))},n.handleClickPhysicButton=function(){var n=eY.Aabb,i=eY.Pair,a=eY.CenterOfMass,r=eY.Joint,p=eY.Shape;ej.instance.debugDrawFlags=n|i|a|r|p},n.handleClickWinLevelButton=function(){n.node.scene.emit(aD.DOGE_SURVIVE)},n.handleClickLoseLevelButton=function(){n.node.scene.emit(aD.DOGE_DIE)},n.handleClickBeehiveButton=function(){n.currentSpawnObjId=i3.BEEHIVE_A,n.handleSpawnObject()},n.handleClickDogeButton=function(){n.currentSpawnObjId=i3.DOGE_A,n.handleSpawnObject()},n.handleClickThornBallButton=function(){n.currentSpawnObjId=i3.THORN_BALL,n.handleSpawnObject()},n.handleClickBigBeeButton=function(){n.currentSpawnObjId=i3.BIG_BEE,n.handleSpawnObject()},n.handleClickThornButton=function(){n.currentSpawnObjId=i3.THORN,n.handleSpawnObject()},n.handleClickAirFanButton=function(){n.currentSpawnObjId=i3.AIR_FAN,n.handleSpawnObject()},n.handleClickBrickButton=function(){n.currentSpawnObjId=i3.BRICK,n.handleSpawnPolygonObject()},n.handleClickGrassButton=function(){n.currentSpawnObjId=i3.GRASS,n.handleSpawnPolygonObject()},n.handleClickGrassDarkButton=function(){n.currentSpawnObjId=i3.GRASS_DARK,n.handleSpawnPolygonObject()},n.handleClickLineButton=function(){n.currentSpawnObjId=i3.LINE,n.handleSpawnPolygonObject()},n.handleClickPoisonButton=function(){n.currentSpawnObjId=i3.POISON,n.handleSpawnPolygonObject()},n.handleClickPoisonSurfaceButton=function(){n.currentSpawnObjId=i3.POISON_SURFACE,n.handleSpawnPolygonObject()},n.handleClickWaterButton=function(){n.currentSpawnObjId=i3.WATER,n.handleSpawnPolygonObject()},n.handleClickDangerAreaButton=function(){n.currentSpawnObjId=i3.DANGER_AREA,n.handleSpawnPolygonObject()},n}return y(c,[{key:"start",value:function(){this.handleToggleDevToolsButton(),this.handleGameLevelButtons(),this.handleItemButtons(),this.handleEngineButtons(),this.handleSpawnObjectButtons(),this.handleSwitchSceneButtons()}},{key:"handleToggleDevToolsButton",value:function(){this.devToolsButton.on(Y.EventType.TOUCH_START,this.handleClickDevToolsButton)}},{key:"handleGameLevelButtons",value:function(){this.winLevelButton.on(Y.EventType.TOUCH_START,this.handleClickWinLevelButton),this.loseLevelButton.on(Y.EventType.TOUCH_START,this.handleClickLoseLevelButton),this.prevLevelButton.on(Y.EventType.TOUCH_START,this.handleClickPrevLevelButton),this.nextLevelButton.on(Y.EventType.TOUCH_START,this.handleClickNextLevelButton)}},{key:"handleItemButtons",value:function(){this.hintButton.on(Y.EventType.TOUCH_START,this.handleClickHintButton)}},{key:"handleEngineButtons",value:function(){this.buildVersionButton.on(Y.EventType.TOUCH_START,this.handleClickBuildVersionButton),this.physicButton.on(Y.EventType.TOUCH_START,this.handleClickPhysicButton),this.bundleButton.on(Y.EventType.TOUCH_START,this.handleSwitchBundle)}},{key:"handleSpawnObjectButtons",value:function(){this.beehiveButton.on(Y.EventType.TOUCH_START,this.handleClickBeehiveButton),this.dogeButton.on(Y.EventType.TOUCH_START,this.handleClickDogeButton),this.thornBallButton.on(Y.EventType.TOUCH_START,this.handleClickThornBallButton),this.bigBeeButton.on(Y.EventType.TOUCH_START,this.handleClickBigBeeButton),this.thornButton.on(Y.EventType.TOUCH_START,this.handleClickThornButton),this.airFanButton.on(Y.EventType.TOUCH_START,this.handleClickAirFanButton),this.brickButton.on(Y.EventType.TOUCH_START,this.handleClickBrickButton),this.grassButton.on(Y.EventType.TOUCH_START,this.handleClickGrassButton),this.grassDarkButton.on(Y.EventType.TOUCH_START,this.handleClickGrassDarkButton),this.lineButton.on(Y.EventType.TOUCH_START,this.handleClickLineButton),this.poisonButton.on(Y.EventType.TOUCH_START,this.handleClickPoisonButton),this.poisonSurfaceButton.on(Y.EventType.TOUCH_START,this.handleClickPoisonSurfaceButton,this),this.waterButton.on(Y.EventType.TOUCH_START,this.handleClickWaterButton),this.dangerAreaButton.on(Y.EventType.TOUCH_START,this.handleClickDangerAreaButton)}},{key:"handleSwitchSceneButtons",value:function(){this.dashboardButton.on(Y.EventType.TOUCH_START,this.handleClickDashboardButton)}},{key:"injectGameplay",value:function(n){this.gameplay=n,this.gameObjects=n.gameObjects}},{key:"hideAllButtons",value:function(){var n=this;this.getComponentsInChildren(en).forEach(function(i){i.node.name!==n.devToolsButton.name&&(i.node.active=!1)})}},{key:"showAllButtons",value:function(){var n=this;this.getComponentsInChildren(en).forEach(function(i){i.node.name!==n.devToolsButton.name&&(i.node.active=!0)})}},{key:"getCurrentLevel",value:function(){if(!this.gameplay)return null;var n=this.gameplay.getGameData();return n&&n.level||null}},{key:"handleEnterSelectLevel",value:function(n){var i=Number(n.string);this.node.scene.emit(aD.SELECT_LEVEL,{level:i})}},{key:"handleSpawnObject",value:function(){var n;if(this.validateRequiredComponents(),-1!==this.currentSpawnObjId){var i={x:Math.floor(40*Math.random()),y:Math.floor(40*Math.random())},a={id:this.currentSpawnObjId,point:i};null===(n=this.gameObjects)||void 0===n||n.spawnObjectForDevTools(a)}}},{key:"handleSpawnPolygonObject",value:function(){var n;if(this.validateRequiredComponents(),-1!==this.currentSpawnObjId){var i={x:Math.floor(40*Math.random()),y:Math.floor(40*Math.random())},a={x:i.x+Math.floor(10*Math.random()),y:i.y},r={x:i.x,y:i.y+Math.floor(10*Math.random())},p=[i,a,r,{x:a.x,y:r.y}],d={id:this.currentSpawnObjId,point:p};null===(n=this.gameObjects)||void 0===n||n.spawnPolygonObjectForDevTools(d)}}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"handleSwitchBundle",value:function(){eu.emit(g.CHANGE_QUALITY_ASSETS)}}]),c}(ea)).prototype,"devToolsButton",[u8],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cA=n(cR.prototype,"winLevelButton",[ce],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cB=n(cR.prototype,"loseLevelButton",[ct],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cP=n(cR.prototype,"buildVersionButton",[cn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cL=n(cR.prototype,"prevLevelButton",[ci],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cO=n(cR.prototype,"nextLevelButton",[ca],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cD=n(cR.prototype,"selectLevelButton",[co],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cI=n(cR.prototype,"hintButton",[cr],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cN=n(cR.prototype,"physicButton",[cs],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cG=n(cR.prototype,"bundleButton",[cl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cM=n(cR.prototype,"beehiveButton",[cu],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cF=n(cR.prototype,"dogeButton",[cc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cz=n(cR.prototype,"thornBallButton",[ch],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cx=n(cR.prototype,"bigBeeButton",[cp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cU=n(cR.prototype,"thornButton",[cd],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cH=n(cR.prototype,"airFanButton",[cv],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cj=n(cR.prototype,"brickButton",[cy],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cV=n(cR.prototype,"grassButton",[cm],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cW=n(cR.prototype,"grassDarkButton",[cg],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cK=n(cR.prototype,"lineButton",[cb],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cq=n(cR.prototype,"poisonButton",[cC],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cY=n(cR.prototype,"poisonSurfaceButton",[cS],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cJ=n(cR.prototype,"waterButton",[ck],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cX=n(cR.prototype,"dangerAreaButton",[cE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cZ=n(cR.prototype,"dashboardButton",[cw],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cT=cR))||cT);K._RF.pop(),K._RF.push({},"a3b0f6zU+1D97PyszsgST1H","UIManager",void 0);var hr,hs,hl,hu,hc,hh,hp,hd,hv,hy,hm,hg,hb=q.ccclass,hC=q.property,hS=GameCore.Utils,hk=(c4=hb("UIManager"),c5=hC(uR),c7=hC(c3),c6=hC(ho),c4((he=n((c8=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=g.call.apply(g,[this].concat(a)),p(n,"clock",he,d(n)),p(n,"header",ht,d(n)),p(n,"devTools",hn,d(n)),n.showDevTools=function(){n.devTools&&(n.devTools.node.active=!0)},n}return y(u,[{key:"onLoad",value:function(){this.validateRequiredComponents(),this.listensDevToolsEvents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"listensDevToolsEvents",value:function(){this.node.scene.on(iW.Events.UNLOCK_DEV_TOOLS,this.showDevTools)}},{key:"initDevTools",value:function(n){this.devTools&&(this.devTools.node.active=hS.Valid.isDebugger(),this.devTools.injectGameplay(n))}},{key:"setLevelText",value:function(n){this.header.setLevelText(n)}},{key:"initCountdown",value:function(){this.clock.init()}},{key:"startCountdown",value:function(){this.clock.startCountdown()}},{key:"pauseCountdown",value:function(){this.clock.pause()}},{key:"resumeCountdown",value:function(){this.clock.resume()}},{key:"showUncompletedMark",value:function(){this.clock.showUncompletedMark()}},{key:"showCompletedMark",value:function(){this.clock.showCompletedMark()}},{key:"setProgressBarPercentage",value:function(n){this.header.setProgress(n)}},{key:"setProgressStars",value:function(n){this.header.setProgressStars(n)}},{key:"startCountDownHeaderHintBubbleAnim",value:function(){this.header.startCountDownHintBubble()}},{key:"stopCountDownHeaderHintBubbleAnim",value:function(){this.header.stopCountDownHintBubble()}},{key:"disableUI",value:function(){this.header.disableButtons()}},{key:"enableUI",value:function(){this.header.enableButtons()}},{key:"disableHintButton",value:function(){this.header.disableHintButton()}},{key:"disableRewardAdsUI",value:function(){this.header.disableRewardAdsButton()}}]),u}(ea)).prototype,"clock",[c5],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ht=n(c8.prototype,"header",[c7],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),hn=n(c8.prototype,"devTools",[c6],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),c9=c8))||c9);K._RF.pop(),K._RF.push({},"157f203vjtMma2FDvAlyM6h","Gameplay",void 0);var hE=q.ccclass,hw=q.requireComponent,hT=q.property,hR=globalThis.game.player,h_=(hr=hE("Gameplay"),hs=hw([ud,lI,lD]),hl=hT(lc),hu=hT(lL),hc=hT(l_),hh=hT(la),hr(hp=hs((hv=n((hd=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=g.call.apply(g,[this].concat(a)),p(n,"hint",hv,d(n)),p(n,"gameMap",hy,d(n)),p(n,"lineDrawer",hm,d(n)),p(n,"gameObjects",hg,d(n)),n.gameData=null,n.defaultData=null,n.handleStartGame=function(i){if(!i)throw new Error("handleStartGame: GameEvent payload is not defined");n.setGameData(i),n.stateManager.draw()},n.handlePauseGame=function(i){n.pauseGame(),k.pauseSound(R.BEE_FLYING),n.processCrazyGamesGameplayStop()},n.handleResumeGame=function(i){n.resumeGame(),k.resumeSound(R.BEE_FLYING),n.processCrazyGamesGameplayStart()},n.handleReplayGame=function(i){var a=D(D({},n.defaultData),i);n.setGameData(a),n.stateManager.initialize()},n.handleNextLevel=function(i){n.gameData&&(n.updatePlayerLevelProgress(i),n.stateManager.load(),n.attemptCallCreateShortcut())},n.updatePlayerLevelProgress=function(i){if(n.gameData){if(!i)throw new Error("handleNextLevel: GameEvent payload is not defined");var a=n.gameData,r=a.level,p=a.nextLevelCount,d=void 0===p?0:p,y=i.level,m=void 0===y?r:y;if(!m)throw new Error("Level is not defined");var g=m+1;hR.setGameData({level:g});var b=D(D(D({},n.defaultData),i),{},{level:g,nextLevelCount:d+1});n.setGameData(b)}},n.handleStartOver=function(i){hR.setGameData({level:1,passAllLevels:!1});var a=D(D(D({},n.defaultData),i),{},{level:1});n.setGameData(a),n.stateManager.load()},n.handleSelectLevel=function(i){var a;if(!i)throw new Error("handleSelectLevel: GameEvent payload is not defined");var r=i.level;if(r){var p=(null!==(a=hR.getGameData())&&void 0!==a?a:{}).totalLevel,d=void 0===p?r:p,y=r<1?1:r;y=y>d?d:y;var m=D(D(D({},n.defaultData),i),{},{level:y});hR.setGameData({level:y}),n.setGameData(m),n.stateManager.load()}},n.handleClockTimeout=function(i){n.stateManager.escape()},n.handleDrawing=function(i){if(!i)throw new Error("handleDrawing: GameEvent payload is not defined");n.setGameData(i)},n.handleBeeDie=function(i){var a;(null===(a=n.gameObjects)||void 0===a?void 0:a.checkAllBeeDie())&&(n.stateManager.escape(),n.processCrazyGamesHappyTime())},n.handleBigBeeDie=function(i){var a;(null===(a=n.gameObjects)||void 0===a?void 0:a.checkAllBeeDie())&&(n.stateManager.escape(),n.processCrazyGamesHappyTime())},n.handleBeeAttack=function(i){n.stateManager.attack()},n.handleDogeDie=function(i){n.stateManager.death()},n.handleDogeSurvive=function(i){n.stateManager.escape()},n.handleShowHint=function(){var i=I(function(i){var a,r,p,d,y,m,g,b;return _ts_generator(this,function(C){switch(C.label){case 0:if(!((null===(a=n.hint)||void 0===a||!a.getIsHintShow())&&(n.stateManager.isAttacking()||n.stateManager.isReady())))return[3,3];d=(null!=i?i:{}).noAd,y=void 0!==d&&d;if(n.uiManager.stopCountDownHeaderHintBubbleAnim(),!!y)return[3,2];return[4,N.showRewardVideoAdAsync({})];case 1:if(!C.sent())return[2];C.label=2;case 2:m=(null!==(r=n.gameData)&&void 0!==r?r:{}).levelData;if(!m)throw new Error("Level data is not defined");g=m.tips,b=le.transformPointsFromMapToDrawAreaCoordinate(g);null===(p=n.hint)||void 0===p||p.showHint(b,!1);C.label=3;case 3:return[2]}})});return function(n){return i.apply(this,arguments)}}(),n.handleSkipLevel=function(){var i=I(function(i){var a;return _ts_generator(this,function(i){switch(i.label){case 0:a=n.stateManager.isAttacking()||n.stateManager.isReady();if(!a)return[3,2];return[4,N.showRewardVideoAdAsync({})];case 1:a=(i.sent()&&n.node.scene.emit(aD.DOGE_SURVIVE),n.node.scene.emit(aD.GAME_RESUME));i.label=2;case 2:return[2]}})});return function(n){return i.apply(this,arguments)}}(),n}return y(u,[{key:"__preload",value:function(){this.initComponents(),this.validateRequiredComponents(),this.listenInputEvents(),N.showBannerAds()}},{key:"initComponents",value:function(){this.initUIManager(),this.initStateManager(),this.initInputController(),this.initInkCapacityController()}},{key:"initUIManager",value:function(){var n;this.uiManager=null===(n=this.node.parent)||void 0===n?void 0:n.getComponentInChildren(hk)}},{key:"initStateManager",value:function(){this.stateManager=this.getComponent(ud)}},{key:"initInputController",value:function(){this.inputController=this.getComponent(lI)}},{key:"initInkCapacityController",value:function(){this.inkCapacityController=this.getComponent(lD)}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"listenInputEvents",value:function(){this.node.scene.on(aD.GAME_START,this.handleStartGame),this.node.scene.on(aD.GAME_PAUSE,this.handlePauseGame),this.node.scene.on(aD.GAME_RESUME,this.handleResumeGame),this.node.scene.on(aD.GAME_REPLAY,this.handleReplayGame),this.node.scene.on(aD.NEXT_LEVEL,this.handleNextLevel),this.node.scene.on(aD.UPDATE_LEVEL,this.updatePlayerLevelProgress),this.node.scene.on(aD.START_OVER,this.handleStartOver),this.node.scene.on(aD.SELECT_LEVEL,this.handleSelectLevel),this.node.scene.on(aD.DRAWING,this.handleDrawing),this.node.scene.on(aD.TIME_OUT,this.handleClockTimeout),this.node.scene.on(aD.BEE_DIE,this.handleBeeDie),this.node.scene.on(aD.BIG_BEE_DIE,this.handleBigBeeDie),this.node.scene.on(aD.BEE_ATTACK,this.handleBeeAttack),this.node.scene.on(aD.DOGE_DIE,this.handleDogeDie),this.node.scene.on(aD.DOGE_SURVIVE,this.handleDogeSurvive),this.node.scene.on(aD.SHOW_HINT,this.handleShowHint),this.node.scene.on(aD.SKIP_LEVEL,this.handleSkipLevel)}},{key:"start",value:function(){this.initData(),this.initGame(),this.initDevTools()}},{key:"initDevTools",value:function(){this.uiManager.initDevTools(this)}},{key:"initData",value:function(){var n,i=(null!==(n=hR.getGameData())&&void 0!==n?n:{}).level,a=void 0===i?1:i;this.defaultData={level:a,gameplayMode:"level",nextLevelCount:0,isFromLoader:!1},this.setGameData(this.defaultData)}},{key:"initGame",value:function(){this.stateManager.init(),this.stateManager.load()}},{key:"setGameData",value:function(n){n&&(this.gameData=D(D({},this.gameData),n))}},{key:"getGameData",value:function(){return this.gameData}},{key:"pauseGame",value:function(){this.node.active=!1,this.node.pauseSystemEvents(!0),this.uiManager.pauseCountdown()}},{key:"resumeGame",value:function(){this.node.active=!0,this.node.resumeSystemEvents(!0),this.uiManager.resumeCountdown()}},{key:"attemptCallCreateShortcut",value:function(){var n,i=null!==(n=this.getGameData())&&void 0!==n?n:{},a=i.level,r=void 0===a?0:a,p=i.nextLevelCount;r<2||(void 0===p?0:p)<2||"checkAndCreateShortcutAsync"in GameSDK.extra&&GameSDK.extra.checkAndCreateShortcutAsync().catch(function(n){})}},{key:"processCrazyGamesGameplayStart",value:function(){"gameplayStart"in GameSDK.extra&&GameSDK.extra.gameplayStart()}},{key:"processCrazyGamesGameplayStop",value:function(){"gameplayStop"in GameSDK.extra&&GameSDK.extra.gameplayStop()}},{key:"processCrazyGamesHappyTime",value:function(){"happyTime"in GameSDK.extra&&GameSDK.extra.happyTime()}},{key:"disableRewardAdsItemForCrazyGames",value:function(){"CrazyGames"===GameSDK.getSDKName()&&this.uiManager.disableRewardAdsUI()}}]),u}(ea)).prototype,"hint",[hl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),hy=n(hd.prototype,"gameMap",[hu],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),hm=n(hd.prototype,"lineDrawer",[hc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),hg=n(hd.prototype,"gameObjects",[hh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),hp=hd))||hp)||hp);K._RF.pop(),K._RF.push({},"bfd3fZcEttGVawFb2B3Gmqu","DangerArea",void 0);var hA,hB,hP,hL,hO,hD,hI,hN,hG,hM,hF,hz,hx,hU;(0,q.ccclass)("DangerArea")(function(n){i(o,n);var p=a(o);function o(){var n;r(this,o);for(var i=arguments.length,a=new Array(i),d=0;d<i;d++)a[d]=arguments[d];return(n=p.call.apply(p,[this].concat(a))).useBatch=!1,n.dangerPolygons=[],n}return y(o,[{key:"addDangerAreaPolygon",value:function(n){this.dangerPolygons.push(n)}},{key:"addRigidBody",value:function(){var n=this.node.addComponent(ek);n&&(n.group=i4.MAIN_OBJECT,n.type=eS.Static)}},{key:"applyColliderForBatchDraw",value:function(){var n,i=this.dangerPolygons.map(function(n){return n.map(function(n){var i=n.x,a=n.y;return new ew(i,a)})}),a=T(i);try{for(a.s();!(n=a.n()).done;){var r=n.value,p=new Y;p.name=iJ.DANGER_AREA,this.node.addChild(p),p.setPosition(0,0);var d=p.addComponent(ek);d.type=eS.Static,d.group=i4.MAIN_OBJECT;var y=p.addComponent(eG);y.points=r,y.apply()}}catch(n){a.e(n)}finally{a.f()}}},{key:"batchDrawAllDangerAreas",value:function(){if(!(this.dangerPolygons.length<1)){var n=this.node.getComponent(rt);if(!n)return null;this.addRigidBody(),n.setColor("#fc03036d");var i,a=T(this.dangerPolygons);try{for(a.s();!(i=a.n()).done;){var r=i.value;n.draw(r)}}catch(n){a.e(n)}finally{a.f()}this.applyColliderForBatchDraw()}}}]),o}(ea));K._RF.pop(),K._RF.push({},"0daa9+mtbVHG5tVordU0a3q","Spider",void 0);var hH,hj,hV,hW,hK,hq,hY,hJ=q.ccclass,hX=q.property;hA=hJ("Spider"),hB=hX(Y),hP=hX(Y),hL=hX(Y),hO=hX(eT),hD=hX(ek),hI=hX(ey),hA((hG=n((hN=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=g.call.apply(g,[this].concat(a)),p(n,"spider",hG,d(n)),p(n,"web",hM,d(n)),p(n,"silk",hF,d(n)),n.isStunned=!1,p(n,"spiderCollider",hz,d(n)),p(n,"spiderRigidBody",hx,d(n)),p(n,"silkGraphics",hU,d(n)),n.onSpiderCollisionEnter=function(i,a){if(!n.isStunned){n.isStunned=!0;var r=a.getComponent(a6),p=a.getComponent(si);if(r||p){var d=n.spider.addComponent(eJ),y=n.spider.worldPosition,m=a.node,g=m.worldPosition,b=m.getComponent(ek);if(r){var C=r.findNearestCollider(y);d.connectedAnchor=C.offset.clone()}else d.connectedAnchor=new ew(y.x-g.x,y.y-g.y);d.autoCalcDistance=!1,d.maxLength=5,d.collideConnected=!1,d.connectedBody=b}}},n}return y(u,[{key:"onLoad",value:function(){this.spiderCollider=this.spider.getComponent(eT),this.spiderRigidBody=this.spider.getComponent(ek),this.silkGraphics=this.silk.getComponent(ey),this.validateRequiredComponents()}},{key:"onDestroy",value:function(){this.spiderCollider.off(eR.BEGIN_CONTACT,this.onSpiderCollisionEnter)}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"start",value:function(){this.enabled=!1,this.isStunned=!1,this.silkOffsetVector=new ew,this.spiderCollider.on(eR.BEGIN_CONTACT,this.onSpiderCollisionEnter)}},{key:"update",value:function(){if(this.enabled){if(this.drawSilk(),this.isStunned){var n=this.getVectorDataFromAToB(this.spider.worldPosition,this.web.worldPosition);this.spiderRigidBody.linearVelocity=n.vector.multiplyScalar(5),this.spiderRigidBody.linearDamping=0,this.isSpiderTooCloseToWeb()&&(this.spiderRigidBody.type=eS.Static,this.enabled=!1)}else{var i=this.spider.position.add3f(0,-3,0);this.spider.setPosition(i)}}}},{key:"drawSilk",value:function(){var n=this.web.position,i=this.spider.position,a=e_.toRadian(this.spider.eulerAngles.z);this.silkGraphics.clear(),this.silkGraphics.moveTo(n.x,n.y),this.silkOffsetVector.set(0,50).rotate(a),this.silkGraphics.lineTo(i.x+this.silkOffsetVector.x,i.y+this.silkOffsetVector.y),this.silkGraphics.stroke()}},{key:"isSpiderTooCloseToWeb",value:function(){var n=this.spider.position,i=this.web.position;return ep.distance(n,i)<40}}]),u}(aa)).prototype,"spider",[hB],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),hM=n(hN.prototype,"web",[hP],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),hF=n(hN.prototype,"silk",[hL],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),hz=n(hN.prototype,"spiderCollider",[hO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),hx=n(hN.prototype,"spiderRigidBody",[hD],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),hU=n(hN.prototype,"silkGraphics",[hI],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),hN));K._RF.pop(),K._RF.push({},"8fe7bkzdtdNfY7I8uaDov+b","EndlessHeader",void 0);var hZ,hQ,h$,h0,h1,h2,h3,h4,h5,h7=q.ccclass,h6=q.property,h9=(hH=h7("EndlessHeader"),hj=h6(Y),hV=h6(Y),hH((hq=n((hK=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=g.call.apply(g,[this].concat(a)),p(n,"pauseNode",hq,d(n)),p(n,"replayNode",hY,d(n)),n}return y(u,[{key:"__preload",value:function(){this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"handleClickedPauseGame",value:function(){this.showSettingScreen(),this.node.scene.emit(aD.GAME_PAUSE)}},{key:"handleClickedReplayGame",value:function(){this.node.scene.emit(aD.GAME_REPLAY)}},{key:"showSettingScreen",value:function(){L.openScreen(O.SETTINGS_SCREEN,{})}},{key:"disableButtons",value:function(){this.enableBtnNode(this.pauseNode,!1,!0),this.enableBtnNode(this.replayNode,!1,!0)}},{key:"enableButtons",value:function(){this.enableBtnNode(this.pauseNode,!0,!0),this.enableBtnNode(this.replayNode,!0,!0)}},{key:"enableBtnNode",value:function(n,i,a){var r=n.getComponent(en);if(r&&(r.interactable=i),n.active=a,a){var p=n.getComponent(t6);p&&p.changeState(i)}}}]),u}(ea)).prototype,"pauseNode",[hj],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),hY=n(hK.prototype,"replayNode",[hV],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),hW=hK))||hW);K._RF.pop(),K._RF.push({},"bc951s11zREU72nQBqwoD3m","EndlessClock",void 0);var h8,pe,pt,pn,pi,pa,po,pr,ps,pl=q.ccclass,pu=q.disallowMultiple,pc=q.property,ph=(hZ=pl("EndlessClock"),hQ=pc($),h$=pc($),h0=pc(eo),hZ(h1=pu((h3=n((h2=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=g.call.apply(g,[this].concat(a)),p(n,"timeText",h3,d(n)),p(n,"bestTimeText",h4,d(n)),p(n,"animation",h5,d(n)),n.elapsedTime=0,n.bestTime=0,n.running=!1,n}return y(u,[{key:"__preload",value:function(){this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"getScore",value:function(){return this.elapsedTime}},{key:"getBestScore",value:function(){return Math.max(this.bestTime,this.elapsedTime)}},{key:"setBestScore",value:function(n){this.bestTime=n;var i=Math.floor(n/60),a=Math.floor(n%60),r=i.toString().padStart(2,"0"),p=a.toString().padStart(2,"0");this.bestTimeText.string="".concat(r,":").concat(p)}},{key:"init",value:function(){this.running=!1,this.node.active=!0,this.animation.pause(),this.setElapsedTime(0),this.setBestScore(this.bestTime)}},{key:"startCounting",value:function(){this.running=!0,this.node.active=!0,this.animation.play(),this.setElapsedTime(0),this.setBestScore(this.bestTime)}},{key:"stopCounting",value:function(){this.running=!1,this.node.active=!1,this.animation.pause()}},{key:"pause",value:function(){this.running=!1,this.animation.pause()}},{key:"resume",value:function(){this.running=!0,this.animation.play()}},{key:"update",value:function(n){this.running&&this.setElapsedTime(this.elapsedTime+n)}},{key:"setElapsedTime",value:function(n){this.elapsedTime=n;var i=Math.floor(this.elapsedTime/60),a=Math.floor(this.elapsedTime%60),r=i.toString().padStart(2,"0"),p=a.toString().padStart(2,"0");this.timeText.string="".concat(r,":").concat(p),this.elapsedTime>this.bestTime&&this.setBestScore(this.elapsedTime)}}]),u}(ea)).prototype,"timeText",[hQ],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h4=n(h2.prototype,"bestTimeText",[h$],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h5=n(h2.prototype,"animation",[h0],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h1=h2))||h1)||h1);K._RF.pop(),K._RF.push({},"346956Nk9hPgpT3ZCsaVr+P","EndlessUIManager",void 0);var pp,pd,pv,py,pf,pm,pg,pb,pC,pS,pk,pE,pw,pT,pR,p_,pA=q.ccclass,pB=q.property,pP=GameCore.Utils,pL=(h8=pA("EndlessUIManager"),pe=pB(ph),pt=pB(h9),pn=pB(ho),h8((po=n((pa=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=g.call.apply(g,[this].concat(a)),p(n,"clock",po,d(n)),p(n,"header",pr,d(n)),p(n,"devTools",ps,d(n)),n.showDevTools=function(){n.devTools&&(n.devTools.node.active=!0)},n}return y(u,[{key:"onLoad",value:function(){this.validateRequiredComponents(),this.listensDevToolsEvents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"listensDevToolsEvents",value:function(){this.node.scene.on(iW.Events.UNLOCK_DEV_TOOLS,this.showDevTools)}},{key:"initDevTools",value:function(n){this.devTools&&(this.devTools.node.active=pP.Valid.isDebugger(),this.devTools.injectGameplay(n))}},{key:"getBestScore",value:function(){return this.clock.getBestScore()}},{key:"setBestScore",value:function(n){this.clock.setBestScore(n)}},{key:"initCounting",value:function(){this.clock.init()}},{key:"startCounting",value:function(){this.clock.startCounting()}},{key:"stopCounting",value:function(){this.clock.stopCounting()}},{key:"pauseCounting",value:function(){this.clock.pause()}},{key:"resumeCounting",value:function(){this.clock.resume()}},{key:"disableUI",value:function(){this.header.disableButtons()}},{key:"enableUI",value:function(){this.header.enableButtons()}}]),u}(ea)).prototype,"clock",[pe],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pr=n(pa.prototype,"header",[pt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ps=n(pa.prototype,"devTools",[pn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),pi=pa))||pi);K._RF.pop(),K._RF.push({},"9d32c879Q1FRIas0BgO+iNP","EndlessGameplay",void 0);var pO=q.ccclass,pD=q.property,pI=q.requireComponent,pN=globalThis.game.player,pG=(pp=pO("EndlessGameplay"),pd=pI(Z),pv=pD({type:eO,group:"Thorns"}),py=pD({type:Y,group:"Thorns"}),pf=pD({type:Y,group:"Thorns"}),pm=pD({type:Y,group:"Thorns"}),pg=pD({type:Y,group:"Thorns"}),pb=pD(la),pp(pC=pd((pk=n((pS=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return(n=g.call.apply(g,[this].concat(a))).gameData=null,n.defaultData=null,p(n,"thornPrefab",pk,d(n)),p(n,"bottomThorns",pE,d(n)),p(n,"topThorns",pw,d(n)),p(n,"leftThorns",pT,d(n)),p(n,"rightThorns",pR,d(n)),p(n,"gameObjects",p_,d(n)),n.handleStartGame=function(i){if(!i)throw new Error("handleStartGame: GameEvent payload is not defined");n.setGameData(i),n.stateManager.play()},n.handlePauseGame=function(i){n.pauseGame(),k.pauseSound(R.BEE_FLYING),n.processCrazyGamesGameplayStop()},n.handleResumeGame=function(i){n.resumeGame(),k.resumeSound(R.BEE_FLYING),n.processCrazyGamesGameplayStart()},n.handleReplayGame=function(i){var a=D(D({},n.gameData),i);n.setGameData(a),n.stateManager.initialize(),n.node.active=!0,n.node.resumeSystemEvents(!0)},n.handleDogeDie=function(){n.stateManager.death(),n.attemptCallCreateShortcut()},n.handleBeeDie=function(i){var a;(null===(a=n.gameObjects)||void 0===a?void 0:a.checkAllBeeDie())&&n.processCrazyGamesHappyTime()},n.handleBigBeeDie=function(i){var a;(null===(a=n.gameObjects)||void 0===a?void 0:a.checkAllBeeDie())&&n.processCrazyGamesHappyTime()},n}return y(u,[{key:"__preload",value:function(){this.initComponents(),this.uiTransform=this.getComponent(Z),this.validateRequiredComponents(),this.listenInputEvents(),N.showBannerAds()}},{key:"initComponents",value:function(){this.initUIManager(),this.initStateManager()}},{key:"initUIManager",value:function(){var n;this.uiManager=null===(n=this.node.parent)||void 0===n?void 0:n.getComponentInChildren(pL)}},{key:"initStateManager",value:function(){this.stateManager=this.getComponent(p5)}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"listenInputEvents",value:function(){this.node.scene.on(aD.GAME_START,this.handleStartGame),this.node.scene.on(aD.GAME_PAUSE,this.handlePauseGame),this.node.scene.on(aD.GAME_RESUME,this.handleResumeGame),this.node.scene.on(aD.GAME_REPLAY,this.handleReplayGame),this.node.scene.on(aD.BEE_DIE,this.handleBeeDie),this.node.scene.on(aD.BIG_BEE_DIE,this.handleBigBeeDie),this.node.scene.on(aD.DOGE_DIE,this.handleDogeDie)}},{key:"start",value:function(){this.initData(),this.initGame(),this.initObjects(),this.initDevTools(),this.uiManager.initCounting(),this.uiManager.startCounting()}},{key:"initDevTools",value:function(){this.uiManager.initDevTools(this)}},{key:"initData",value:function(){var n,i=null!==(n=pN.getGameData())&&void 0!==n?n:{},a=i.level,r=void 0===a?1:a,p=i.bestEndlessScore,d=void 0===p?0:p;this.defaultData={level:r,bestEndlessScore:d,gameplayMode:"endless",nextLevelCount:0,isFromLoader:!1},this.setGameData(this.defaultData)}},{key:"initGame",value:function(){this.stateManager.init(),this.stateManager.load()}},{key:"setGameData",value:function(n){n&&(this.gameData=D(D({},this.gameData),n))}},{key:"getGameData",value:function(){return this.gameData}},{key:"pauseGame",value:function(){this.node.active=!1,this.node.pauseSystemEvents(!0),this.uiManager.pauseCounting()}},{key:"resumeGame",value:function(){this.node.active=!0,this.node.resumeSystemEvents(!0),this.uiManager.resumeCounting()}},{key:"attemptCallCreateShortcut",value:function(){var n,i=null!==(n=this.gameData)&&void 0!==n?n:{},a=i.level,r=void 0===a?0:a,p=i.nextLevelCount;r<2||(void 0===p?0:p)<2||"checkAndCreateShortcutAsync"in GameSDK.extra&&GameSDK.extra.checkAndCreateShortcutAsync().catch(function(n){})}},{key:"initObjects",value:function(){var n=this.createThorn();if(!_instanceof(n,Y))throw new Error("initObjects: Could not create thorn");var i=n.getComponent(Z);if(!_instanceof(i,Z))throw new Error("initObjects: Could not get UITransform of thorn");for(var a=this.uiTransform.getBoundingBoxToWorld(),r=a.width,p=a.height,d=Math.ceil(r/i.width),y=Math.ceil(p/i.height),m=0;m<d;m++)this.topThorns.addChild(this.createThorn()),this.bottomThorns.addChild(this.createThorn());for(var g=0;g<y;g++)this.leftThorns.addChild(this.createThorn()),this.rightThorns.addChild(this.createThorn());this.rightThorns.addChild(n)}},{key:"getBoundingBox",value:function(){return this.uiTransform.getBoundingBoxToWorld()}},{key:"getDogeSpawnPosition",value:function(){var n=this.uiTransform.getBoundingBoxToWorld().center;return[n.x,n.y]}},{key:"createThorn",value:function(){var n=Q(this.thornPrefab);return n.name=iJ.THORN,n}},{key:"processCrazyGamesGameplayStart",value:function(){"gameplayStart"in GameSDK.extra&&GameSDK.extra.gameplayStart()}},{key:"processCrazyGamesGameplayStop",value:function(){"gameplayStop"in GameSDK.extra&&GameSDK.extra.gameplayStop()}},{key:"processCrazyGamesHappyTime",value:function(){"happyTime"in GameSDK.extra&&GameSDK.extra.happyTime()}}]),u}(ea)).prototype,"thornPrefab",[pv],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pE=n(pS.prototype,"bottomThorns",[py],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pw=n(pS.prototype,"topThorns",[pf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pT=n(pS.prototype,"leftThorns",[pm],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pR=n(pS.prototype,"rightThorns",[pg],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),p_=n(pS.prototype,"gameObjects",[pb],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pC=pS))||pC)||pC);K._RF.pop(),K._RF.push({},"43aefNoI9lJxJNh3LPuKYPt","BaseState",void 0);var pM=function(){function e(n){if(r(this,e),this.game=null,this.data={},this.game=n.node.getComponent(pG),!this.game)throw new Error("Gameplay component not found");this.manager=n,this.updateStateData(),this.logDebug()}return y(e,[{key:"logDebug",value:function(){this.constructor.name}},{key:"updateStateData",value:function(){if(this.game){var n=this.game.getGameData();n&&(this.data=n)}}},{key:"updateGameData",value:function(n){var i;null===(i=this.game)||void 0===i||i.setGameData(n),this.updateStateData()}}]),e}();K._RF.pop(),K._RF.push({},"109f0WH9r9IQqMHpvD45PzQ","DeathState",void 0);var pF=function(n){i(o,n);var p=a(o);function o(n){var i,a,d;return r(this,o),(d=p.call(this,n)).processCrazyGamesEvent(),d.disableUI(),k.stopAllSounds(),d.vibrateDevice(),d.pauseCountdown(),d.logLevelFailAnalytics(),null===(i=d.game)||void 0===i||i.scheduleOnce(function(){d.stopDogesLooking(),k.playSound(R.LEVEL_FAIL,{volume:.3})},.5),null===(a=d.game)||void 0===a||a.scheduleOnce(function(){d.sleepObjects(),d.showLoseScreen(),d.manager.finish()},1.8),d}return y(o,[{key:"processCrazyGamesEvent",value:function(){"gameplayStop"in GameSDK.extra&&GameSDK.extra.gameplayStop()}},{key:"load",value:function(){}},{key:"initialize",value:function(){}},{key:"ready",value:function(){}},{key:"play",value:function(){}},{key:"death",value:function(){}},{key:"finish",value:function(){var n=this.manager.createFinishState();this.manager.change(n)}},{key:"update",value:function(){}},{key:"disableUI",value:function(){var n;null===(n=this.game)||void 0===n||n.uiManager.disableUI()}},{key:"sleepObjects",value:function(){var n;null===(n=this.game)||void 0===n||null===(n=n.gameObjects)||void 0===n||n.sleepObjects()}},{key:"pauseCountdown",value:function(){var n;null===(n=this.game)||void 0===n||n.uiManager.pauseCounting()}},{key:"stopDogesLooking",value:function(){var n;if(null!==(n=this.game)&&void 0!==n&&n.gameObjects){var i,a=this.game.gameObjects.getComponentsInChildren(si),r=T(a);try{for(r.s();!(i=r.n()).done;){var p,d=i.value;null===(p=d.eyes)||void 0===p||p.stopLook(),d.setEnable(!1)}}catch(n){r.e(n)}finally{r.f()}}}},{key:"vibrateDevice",value:function(){var n;null===(n=eU("Vibrate"))||void 0===n||null===(n=n.getComponent(ij))||void 0===n||n.vibrate(500)}},{key:"showLoseScreen",value:function(){var n=this.data.level;L.openScreen(O.LOSE_SCREEN,{level:n})}},{key:"logLevelFailAnalytics",value:function(){}}]),o}(pM);K._RF.pop(),K._RF.push({},"638devCm49MrpqRRWptDInp","FinishState",void 0);var pz=globalThis.game.player,px=function(n){i(s,n);var p,d=a(s);function s(n){var i;return r(this,s),i=d.call(this,n),k.turnUpMusic(),k.stopSound(R.BEE_FLYING),i.finishGameAsync(),i}return y(s,[{key:"load",value:function(){var n=this.manager.createLoadingState();this.manager.change(n)}},{key:"initialize",value:function(){var n=this.manager.createInitializeState();this.manager.change(n)}},{key:"ready",value:function(){}},{key:"play",value:function(){}},{key:"death",value:function(){}},{key:"finish",value:function(){}},{key:"update",value:function(){}},{key:"finishGameAsync",value:(p=I(function(){var n,i,a,r,p;return _ts_generator(this,function(d){switch(d.label){case 0:d.trys.push([0,2,,3]);if(!this.game)return[2];a=this.game.uiManager.getBestScore(),r=null!==(n=null===(i=pz.getGameData())||void 0===i?void 0:i.bestEndlessScore)&&void 0!==n?n:0,p=r<a?a:r;pz.setGameData({bestEndlessScore:p}),this.updateGameData({bestEndlessScore:p});return[4,l0.finishMatchAsync()];case 1:d.sent();return[3,3];case 2:d.sent();return[3,3];case 3:return[2]}})}),function(){return p.apply(this,arguments)})}]),s}(pM);K._RF.pop(),K._RF.push({},"97260ZJNotE0LYFeNm4wsEz","InitializeState",void 0);var pU=function(n){i(l,n);var p,d,m=a(l);function l(n){var i;return r(this,l),i=m.call(this,n),"CrazyGames"===GameSDK.getSDKName()&&i.processCrazyGamesRequirements(),i.enableUI(),i.clearGameObjects(),i.createGameObjects(),i.initClock(),k.playMusic(),i.startGameAsync().then(function(){i.closeLoadingScreen(),i.manager.ready()}),i}return y(l,[{key:"processCrazyGamesRequirements",value:function(){"gameplayStart"in GameSDK.extra&&GameSDK.extra.gameplayStart(),this.showInterAdsCrazyGames()}},{key:"showInterAdsCrazyGames",value:(d=I(function(){var n;return _ts_generator(this,function(i){switch(i.label){case 0:n=this.game;if(!n)return[3,2];k.stopAllSounds();return[4,N.showInterstitialAdAsync({forLevel:this.data.level,includeSDK:["CrazyGames"]})];case 1:n=(i.sent(),k.turnUpMusic());i.label=2;case 2:return[2]}})}),function(){return d.apply(this,arguments)})},{key:"load",value:function(){if(GameCore.Utils.Valid.isDebugger()){var n=this.manager.createLoadingState();this.manager.change(n)}}},{key:"initialize",value:function(){}},{key:"ready",value:function(){var n=this.manager.createReadyState();this.manager.change(n)}},{key:"play",value:function(){}},{key:"death",value:function(){var n=this.manager.createDeathState();this.manager.change(n)}},{key:"finish",value:function(){}},{key:"update",value:function(){}},{key:"closeLoadingScreen",value:function(){L.closeScreen(O.LOADING_SCREEN)}},{key:"enableUI",value:function(){var n;null===(n=this.game)||void 0===n||n.uiManager.enableUI()}},{key:"clearGameObjects",value:function(){var n;null!==(n=this.game)&&void 0!==n&&n.gameObjects&&this.game.gameObjects.clearObjects()}},{key:"createGameObjects",value:function(){var n,i,a,r=null!==(n=null===(i=this.game)||void 0===i?void 0:i.getDogeSpawnPosition())&&void 0!==n?n:[0,0],p=F(r,2),d=p[0],y=p[1],m=null===(a=this.game)||void 0===a?void 0:a.gameObjects.spawnDoge({x:d,y:y,right:!1,isWorldPosition:!0,rigidBodyConfig:{gravityScale:2}});if(!_instanceof(m,Y))throw new Error("Could not create doge");var g=m.getComponent(ek);if(!g)throw new Error("Could not get rigidBody");g.sleep()}},{key:"initClock",value:function(){var n,i;null===(n=this.game)||void 0===n||n.uiManager.initCounting();var a=this.data.bestEndlessScore,r=void 0===a?0:a;null===(i=this.game)||void 0===i||i.uiManager.setBestScore(r)}},{key:"startGameAsync",value:(p=I(function(){return _ts_generator(this,function(n){switch(n.label){case 0:n.trys.push([0,2,,3]);if(this.data.isFromLoader)return[2,void this.updateGameData({isFromLoader:!1})];return[4,l0.startMatchAsync()];case 1:n.sent();return[3,3];case 2:n.sent();return[3,3];case 3:return[2]}})}),function(){return p.apply(this,arguments)})}]),l}(pM);K._RF.pop(),K._RF.push({},"ecbe0PxfZNJBLsmLBPc2pBD","LoadingState",void 0);var pH=globalThis.game.player,pj=function(n){i(o,n);var p=a(o);function o(n){var i,a,d,y;r(this,o),y=p.call(this,n);var m=null!==(i=null===(a=pH.getGameData())||void 0===a?void 0:a.bestEndlessScore)&&void 0!==i?i:0;return y.updateGameData({bestEndlessScore:m}),L.showLoadingScreen(),null===(d=y.game)||void 0===d||d.scheduleOnce(function(){y.initialize()},.5),y}return y(o,[{key:"load",value:function(){}},{key:"initialize",value:function(){var n=this.manager.createInitializeState();this.manager.change(n)}},{key:"ready",value:function(){}},{key:"play",value:function(){}},{key:"death",value:function(){}},{key:"finish",value:function(){}},{key:"update",value:function(){}}]),o}(pM);K._RF.pop(),K._RF.push({},"651d4HD0HpFPLrL8dycqU3R","PlayingState",void 0);var pV=globalThis.game.player;function Xv(){var n=Object.keys(iK).map(function(n){return Number.parseInt(n)}).sort(function(n,i){return n-i}),i=0;return{current:function(){return n[i]},canGoNext:function(a){var r=i+1;return!(r>=n.length)&&a>n[r]},next:function(){if(i>=n.length-1)throw new Error("No more progressions");return n[i++]}}}var pW=function(n){i(o,n);var p=a(o);function o(n){var i;return r(this,o),(i=p.call(this,n)).totalElapsed=0,i.spawnElapsed=0,i.spawnInterval=2,i.flyForce=18,i.progressionIt=Xv(),i.onTouchStart=function(){i.dogeRigidBody.linearVelocity=new ew(0,i.flyForce)},i.findDoge(),i.wakeUpObjects(),i.spawnEnemies(),i.startCounting(),k.turnDownMusic(),i.listenInputEvents(),i}return y(o,[{key:"listenInputEvents",value:function(){var n,i;em.os===em.OS.WINDOWS||em.os===em.OS.OSX?(document.addEventListener("pointerdown",this.onTouchStart),null===(n=this.game)||void 0===n||n.node.on(Y.EventType.MOUSE_DOWN,this.onTouchStart)):null===(i=this.game)||void 0===i||i.node.on(Y.EventType.TOUCH_START,this.onTouchStart)}},{key:"unlistenInputEvents",value:function(){var n,i;em.os===em.OS.WINDOWS||em.os===em.OS.OSX?(document.removeEventListener("pointerdown",this.onTouchStart),null===(n=this.game)||void 0===n||n.node.off(Y.EventType.MOUSE_DOWN,this.onTouchStart)):null===(i=this.game)||void 0===i||i.node.off(Y.EventType.TOUCH_START,this.onTouchStart)}},{key:"findDoge",value:function(){var n,i=null===(n=this.game)||void 0===n||null===(n=n.gameObjects)||void 0===n?void 0:n.getRandomDogeToBee();if(!i)throw new Error("No doge found in GameObjects");this.doge=i;var a=this.doge.getComponent(ek);if(!a)throw new Error("No rigid body found in doge");this.dogeRigidBody=a}},{key:"load",value:function(){this.unlistenInputEvents();var n=this.manager.createLoadingState();this.manager.change(n)}},{key:"initialize",value:function(){this.unlistenInputEvents(),k.stopSound(R.BEE_FLYING);var n=this.manager.createInitializeState();this.manager.change(n)}},{key:"ready",value:function(){}},{key:"play",value:function(){}},{key:"death",value:function(){this.unlistenInputEvents();var n=this.manager.createDeathState();this.manager.change(n)}},{key:"finish",value:function(){}},{key:"update",value:function(n){if(this.spawnElapsed+=n,this.totalElapsed+=n,this.progressionIt.canGoNext(this.totalElapsed)&&(this.progressionIt.next(),this.updateProgressionToPlugin()),this.spawnElapsed>this.spawnInterval){var i=this.progressionIt.current(),a=iK[i];this.handleSpawn(a),this.spawnElapsed=0}}},{key:"updateProgressionToPlugin",value:function(){var n;l0.setProfileMatchDataAsync({id:pV.getPlayerId(),endlessScore:Math.round(null!==(n=this.data.bestEndlessScore)&&void 0!==n?n:0)})}},{key:"handleSpawn",value:function(n){if(!this.game)throw new Error("Game is not defined");var i=this.game.getBoundingBox(),a=0===e_.randomRangeInt(0,2)?i.xMin-0:i.xMax+0,r=this.doge.node.worldPosition.y+e_.randomRangeInt(-100,100),p=this.doge.node.getWorldPosition(),d=p.x,y=p.y,m=new ep(a,r,0),g=m.x+2*(d-m.x),b=m.y+2*(y-m.y);this.spawnPredictionLine(m,g,b),this.spawnCrossingBee(d,y,m,n)}},{key:"spawnCrossingBee",value:function(n,i,a,r){var p=this;if(!this.game)throw new Error("Game is not defined. Only use this method in PlayingState");this.game.scheduleOnce(function(){p.game.gameObjects.spawnCrossingBees(D({playerWorldX:n,playerWorldY:i,spawnWorldX:a.x,spawnWorldY:a.y},r))},1)}},{key:"spawnPredictionLine",value:function(n,i,a){if(!this.game)throw new Error("Game is not defined. Only use this method in PlayingState");var r=this.game.gameObjects.spawnCrossingBeeLine({startX:n.x,startY:n.y,endX:i,endY:a,spriteType:rP.LOW,thickness:0});eF(r).to(.5,{thickness:80},{easing:"expoOut"}).start(),this.game.scheduleOnce(function(){eF(r).to(.5,{thickness:0},{easing:"expoOut"}).call(function(){r.destroy()}).start()},1)}},{key:"wakeUpObjects",value:function(){var n;null===(n=this.game)||void 0===n||null===(n=n.gameObjects)||void 0===n||n.wakeUpObjects(),this.dogeRigidBody.wakeUp()}},{key:"spawnEnemies",value:function(){this.game&&this.game.gameObjects&&(this.game.gameObjects.spawnBees(),this.game.gameObjects.reviveBigBees(),k.playSound(R.BEE_FLYING),k.playSound(R.END_DRAW))}},{key:"startCounting",value:function(){var n;null===(n=this.game)||void 0===n||n.uiManager.startCounting()}}]),o}(pM);K._RF.pop(),K._RF.push({},"9516f5Gc/FENLPaNEZwDwcn","ReadyState",void 0);var pK,pq=function(n){i(o,n);var p=a(o);function o(n){var i;return r(this,o),(i=p.call(this,n)).onTouchStart=function(){i.manager.play()},i.logLevelStartAnalytics(),i.listenInputEvents(),i}return y(o,[{key:"listenInputEvents",value:function(){var n,i;em.os===em.OS.WINDOWS||em.os===em.OS.OSX?(document.addEventListener("pointerdown",this.onTouchStart,{once:!0}),null===(n=this.game)||void 0===n||n.node.once(Y.EventType.MOUSE_DOWN,this.onTouchStart)):null===(i=this.game)||void 0===i||i.node.once(Y.EventType.TOUCH_START,this.onTouchStart)}},{key:"unlistenInputEvents",value:function(){var n,i;em.os===em.OS.WINDOWS||em.os===em.OS.OSX?(document.removeEventListener("pointerdown",this.onTouchStart),null===(n=this.game)||void 0===n||n.node.off(Y.EventType.MOUSE_DOWN,this.onTouchStart)):null===(i=this.game)||void 0===i||i.node.off(Y.EventType.TOUCH_START,this.onTouchStart)}},{key:"load",value:function(){if(this.unlistenInputEvents(),GameCore.Utils.Valid.isDebugger()){var n=this.manager.createLoadingState();this.manager.change(n)}}},{key:"initialize",value:function(){}},{key:"ready",value:function(){}},{key:"play",value:function(){this.unlistenInputEvents();var n=this.manager.createPlayingState();this.manager.change(n)}},{key:"death",value:function(){if(this.unlistenInputEvents(),GameCore.Utils.Valid.isDebugger()){var n=this.manager.createDeathState();this.manager.change(n)}}},{key:"finish",value:function(){}},{key:"update",value:function(){}},{key:"logLevelStartAnalytics",value:function(){}}]),o}(pM);K._RF.pop(),K._RF.push({},"946848BySlM54Wly5+1otNa","EndlessStateManager",void 0);var pY,pJ,pX,pZ,pQ,p$,p0,p1,p2,p3,p4,p5=(0,q.ccclass)("EndlessStateManager")(pK=function(n){i(o,n);var p=a(o);function o(){return r(this,o),p.apply(this,arguments)}return y(o,[{key:"init",value:function(){this.state=new pj(this)}},{key:"change",value:function(n){this.state=n}},{key:"load",value:function(){this.state.load()}},{key:"initialize",value:function(){this.state.initialize()}},{key:"isInitialize",value:function(){return _instanceof(this.state,pU)}},{key:"ready",value:function(){this.state.ready()}},{key:"isReady",value:function(){return _instanceof(this.state,pq)}},{key:"play",value:function(){this.state.play()}},{key:"isPlaying",value:function(){return _instanceof(this.state,pW)}},{key:"death",value:function(){this.state.death()}},{key:"isFailed",value:function(){return _instanceof(this.state,pF)}},{key:"finish",value:function(){this.state.finish()}},{key:"isFinished",value:function(){return _instanceof(this.state,px)}},{key:"update",value:function(n){this.state&&this.state.update(n)}},{key:"createInitializeState",value:function(){return new pU(this)}},{key:"createLoadingState",value:function(){return new pj(this)}},{key:"createReadyState",value:function(){return new pq(this)}},{key:"createPlayingState",value:function(){return new pW(this)}},{key:"createDeathState",value:function(){return new pF(this)}},{key:"createFinishState",value:function(){return new px(this)}}]),o}(ea))||pK;K._RF.pop(),K._RF.push({},"78746Q4viBIlbRROK4J1bSl","Burst",void 0);var p7,p6=q.ccclass,p9=q.property,p8=(pY=p6("Burst"),pJ=p9(ex),pX=p9(es),pZ=p9(ex),pQ=p9(es),pY((p1=n((p0=function(){function e(){r(this,e),p(this,"time",p1,this),p(this,"repeatCount",p2,this),p(this,"repeatInterval",p3,this),p(this,"count",p4,this),this.remainingCount=0,this.curTime=0}return y(e,[{key:"update",value:function(n,i){if(0===this.remainingCount&&(this.remainingCount=this.repeatCount,this.curTime=this.time),this.remainingCount>0){var a=eX(n.time-n.startDelay.evaluate(0,1),n.duration)-i;a=a>0?a:0;var r=eX(n.time-n.startDelay.evaluate(0,1),n.duration);this.curTime>=a&&this.curTime<r&&(n.emit(this.count,i-(r-this.curTime)),this.curTime+=this.repeatInterval,--this.remainingCount)}}},{key:"reset",value:function(){this.remainingCount=0,this.curTime=0}}]),e}()).prototype,"time",[pJ],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),p2=n(p0.prototype,"repeatCount",[pX],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),p3=n(p0.prototype,"repeatInterval",[pZ],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),p4=n(p0.prototype,"count",[pQ],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),p$=p0))||p$);K._RF.pop(),K._RF.push({},"726cc2e08FBqpVIg/tPM7H2","Particle",void 0);var de,dt,dn,di,da,dr,ds,dl,du,dc,dh,dp,dd,dv,dy,df,dm,dg=q.ccclass,db=q.executeInEditMode,dC=dg("Particle")(p7=db(!0)(p7=function(n){i(o,n);var p=a(o);function o(){var n;r(this,o);for(var i=arguments.length,a=new Array(i),d=0;d<i;d++)a[d]=arguments[d];return(n=p.call.apply(p,[this].concat(a))).remainingLifetime=0,n.startLifetime=0,n}return y(o,[{key:"onLoad",value:function(){this.node.layer=eC.Enum.UI_2D}},{key:"init",value:function(n){this.sprite=this.getComponent(el),this.particleSystem=n,this.velocity=ep.ZERO,this.remainingLifetime=0,this.startLifetime=0,this.startSize=ep.ZERO,this.startColor=J.WHITE.clone(),this.randomSeed=0}},{key:"reset",value:function(){this.node.rotation.set(0,0,0)}}]),o}(ea))||p7)||p7;K._RF.pop(),K._RF.push({},"00eb3NBo0tM/qcD6ViMjx0A","CurveRange",void 0);var dS,dk,dE,dw,dT,dR,d_,dA,dB,dP,dL,dO,dD,dI,dN,dG,dM,dF=q.ccclass,dz=q.property,dx=eZ({Constant:0,Curve:1,TwoCurves:2,TwoConstants:3}),dU=(de=dF("CurveRange"),dt=dz({type:eZ(dx)}),dn=dz({visible:function(){return this.mode===dx.Constant}}),di=dz({visible:function(){return this.mode===dx.Curve}}),da=dz({visible:function(){return this.mode===dx.TwoCurves}}),dr=dz({visible:function(){return this.mode===dx.TwoCurves}}),ds=dz({visible:function(){return this.mode===dx.TwoConstants}}),dl=dz({visible:function(){return this.mode===dx.TwoConstants}}),de((dh=n((dc=function(){function e(){r(this,e),p(this,"mode",dh,this),p(this,"constant",dp,this),p(this,"spline",dd,this),p(this,"splineMin",dv,this),p(this,"splineMax",dy,this),p(this,"constantMin",df,this),p(this,"constantMax",dm,this),this.spline.assignSorted([0,1],[0,1]),this.splineMin.assignSorted([0,1],[0,1]),this.splineMax.assignSorted([0,1],[0,1])}return y(e,[{key:"evaluate",value:function(n,i){switch(this.mode){case dx.Curve:return this.spline.evaluate(n);case dx.TwoCurves:return eQ(this.splineMin.evaluate(n),this.splineMax.evaluate(n),i);case dx.TwoConstants:return eQ(this.constantMin,this.constantMax,i);default:return this.constant}}},{key:"getMax",value:function(){switch(this.mode){case dx.Curve:return 1;case dx.TwoConstants:return this.constantMax;case dx.TwoCurves:return 1;default:return this.constant}}},{key:"isZero",value:function(){switch(this.mode){case dx.Curve:return e$(1,0,e0);case dx.TwoConstants:return e$(Math.max(Math.abs(this.constantMax),Math.abs(this.constantMin)),0,e0);case dx.TwoCurves:return e$(1,0,e0);default:return e$(this.constant,0,e0)}}}]),e}()).prototype,"mode",[dt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return dx.Constant}}),dp=n(dc.prototype,"constant",[dn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),dd=n(dc.prototype,"spline",[di],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new e1}}),dv=n(dc.prototype,"splineMin",[da],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new e1}}),dy=n(dc.prototype,"splineMax",[dr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new e1}}),df=n(dc.prototype,"constantMin",[ds],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),dm=n(dc.prototype,"constantMax",[dl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),du=dc))||du);K._RF.pop(),K._RF.push({},"3fe5eBRNTJFCZgeD7SqFSh5","GradientRange",void 0);var dH=q.ccclass,dj=q.property,dV=eZ({Color:0,Gradient:1,TwoColors:2,TwoGradients:3,RandomColor:4}),dW=new J,dK=new J,dq=(dS=dH("GradientRange"),dk=dj({type:eZ(dV)}),dE=dj({visible:function(){return this.mode===dV.Color}}),dw=dj({visible:function(){return this.mode===dV.TwoColors}}),dT=dj({visible:function(){return this.mode===dV.TwoColors}}),dR=dj({visible:function(){return this.mode===dV.Gradient||this.mode===dV.RandomColor}}),d_=dj({visible:function(){return this.mode===dV.TwoGradients}}),dA=dj({visible:function(){return this.mode===dV.TwoGradients}}),dS((dL=n((dP=function(){function e(){r(this,e),p(this,"mode",dL,this),p(this,"color",dO,this),p(this,"colorMin",dD,this),p(this,"colorMax",dI,this),p(this,"gradient",dN,this),p(this,"gradientMin",dG,this),p(this,"gradientMax",dM,this),this._color=J.WHITE.clone()}return y(e,[{key:"evaluate",value:function(n,i){switch(this.mode){case dV.Color:return this.color;case dV.TwoColors:return J.lerp(this._color,this.colorMin,this.colorMax,i),this._color;case dV.RandomColor:return this.gradient.getRandomColor(this._color);case dV.Gradient:return this.gradient.evaluateFast(this._color,n);case dV.TwoGradients:return J.lerp(this._color,this.gradientMin.evaluateFast(dW,n),this.gradientMax.evaluateFast(dK,n),i),this._color;default:return this.color}}}]),e}()).prototype,"mode",[dk],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return dV.Color}}),dO=n(dP.prototype,"color",[dE],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return J.WHITE.clone()}}),dD=n(dP.prototype,"colorMin",[dw],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return J.WHITE.clone()}}),dI=n(dP.prototype,"colorMax",[dT],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return J.WHITE.clone()}}),dN=n(dP.prototype,"gradient",[dR],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new e2}}),dG=n(dP.prototype,"gradientMin",[d_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new e2}}),dM=n(dP.prototype,"gradientMax",[dA],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new e2}}),dB=dP))||dB);function cf(n,i,a,r){!function(n,i){ew.set(n,Math.cos(i),Math.sin(i))}(n,r),n.z=0,ep.multiplyScalar(n,n,i+(a-i)*e4())}function hf(n){var i=dx;switch(n.mode){case i.TwoCurves:case i.TwoConstants:return!0;default:return!1}}K._RF.pop(),K._RF.push({},"1a4c4Z/fWpFuL5b3emrVLug","ParticleFunction",void 0),K._RF.pop(),K._RF.push({},"c2fc2/T2apMGZCPX5a4abo/","ModuleRandSeed",void 0);var dY,dJ,dX,dZ,dQ,d$,d0,d1=23541,d2=39825,d3=90794,d4=91041,d5=125292,d7=197866,d6=156497;K._RF.pop(),K._RF.push({},"39785+APfBJU5kvcdjZGiLr","ColorOvertimeModule",void 0);var d9,d8,ve,vt,vn,vi,va,vo,vr,vs=q.ccclass,vl=q.property,vu=d4,vc=(dY=vs("ColorOvertimeModule"),dJ=vl({type:ec}),dX=vl({type:dq}),dY((d$=n((dQ=function(){function e(){r(this,e),p(this,"enable",d$,this),p(this,"color",d0,this)}return y(e,[{key:"update",value:function(n){if(this.enable){var i=n.randomSeed+vu,a=function(n){var i=dV;switch(n.mode){case i.TwoGradients:case i.TwoColors:return!0;default:return!1}}(this.color)?e6(i):0,r=1-n.remainingLifetime/n.startLifetime;n.sprite.color=n.startColor.clone().multiply(this.color.evaluate(r,a))}}}]),e}()).prototype,"enable",[dJ],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d0=n(dQ.prototype,"color",[dX],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new dq}}),dZ=dQ))||dZ);K._RF.pop(),K._RF.push({},"c397apirpxFfJTJN1KLAcGi","LimitVelocityOvertimeModule",void 0);var vh,vp,vd,vv,vy,vf,vm,vg=q.ccclass,vb=q.property,vC=d1,vS=(d9=vg("LimitVelocityOvertimeModule"),d8=vb({type:ec}),ve=vb({type:dU}),vt=vb({type:dU}),d9((va=n((vi=function(){function e(){r(this,e),p(this,"enable",va,this),p(this,"limit",vo,this),p(this,"dampen",vr,this),this.limit.constant=500,this.dampen.constant=.2}return y(e,[{key:"update",value:function(n,i){if(this.enable){var a=1-n.remainingLifetime/n.startLifetime,r=n.velocity.clone().normalize(),p=hf(this.limit)?e6(n.randomSeed+vC):0,d=hf(this.dampen)?e6(n.randomSeed+vC+1):0,y=n.velocity.length(),m=this.limit.evaluate(a,p),g=this.dampen.evaluate(a,d);n.velocity=r.multiplyScalar(this.dampenBeyondLimit(y,m,g,i))}}},{key:"dampenBeyondLimit",value:function(n,i,a,r){if(n<=i)return n;var p=1-Math.exp(-a*r);return e_.lerp(n,i,p)}}]),e}()).prototype,"enable",[d8],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vo=n(vi.prototype,"limit",[ve],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new dU}}),vr=n(vi.prototype,"dampen",[vt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new dU}}),vn=vi))||vn);K._RF.pop(),K._RF.push({},"442c2KaGHdNip4TBoeKOOoY","RendererModule",void 0);var vk,vE,vw,vT,vR,v_,vA,vB,vP,vL,vO,vD,vI,vN,vG=q.ccclass,vM=q.property,vF=(vh=vG("RendererModule"),vp=vM(e9),vd=vM(eA),vh((vf=n((vy=y(function e(){r(this,e),p(this,"material",vf,this),p(this,"spriteFrame",vm,this)})).prototype,"material",[vp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vm=n(vy.prototype,"spriteFrame",[vd],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vv=vy))||vv);K._RF.pop(),K._RF.push({},"c6cfbhYVctHt53aUXC4oSWy","RotationOvertimeModule",void 0);var vz,vx,vU,vH,vj,vV,vW,vK,vq,vY,vJ,vX,vZ,vQ,v$,v0,v1,v2,v3,v4,v5,v7,v6,v9=q.ccclass,v8=q.property,ye=d5,yt=(vk=v9("RotationOvertimeModule"),vE=v8({type:ec}),vw=v8(ec),vT=v8({type:dU}),vR=v8({type:dU,visible:function(){return this.separateAxes}}),v_=v8({type:dU,visible:function(){return this.separateAxes}}),vA=v8({type:dU}),vk((vL=n((vP=function(){function e(){r(this,e),p(this,"enable",vL,this),p(this,"separateAxes",vO,this),p(this,"x",vD,this),p(this,"y",vI,this),p(this,"z",vN,this)}return y(e,[{key:"update",value:function(n,i){if(this.enable){var a=1-n.remainingLifetime/n.startLifetime,r=n.randomSeed+ye,p=hf(this.z)?e6(r):0,d=this.z.evaluate(a,p)*i,y=0,m=0;if(this.separateAxes){var g=hf(this.x)?e6(r):0,b=hf(this.y)?e6(r):0;y=this.x.evaluate(a,g)*i,m=this.y.evaluate(a,b)*i}n.node.eulerAngles=new ep(n.node.eulerAngles.x+y,n.node.eulerAngles.y+m,n.node.eulerAngles.z+d)}}}]),e}()).prototype,"enable",[vE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vO=n(vP.prototype,"separateAxes",[vw],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),vD=n(vP.prototype,"x",[vT],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new dU}}),vI=n(vP.prototype,"y",[vR],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new dU}}),vN=n(vP.prototype,"z",[v_,vA],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new dU}}),vB=vP))||vB);K._RF.pop(),K._RF.push({},"f63cd4ScDJFPrnTLNT4+QKu","ShapeModule",void 0);var yn,yi,ya,yo,yr,ys,yl,yu=q.ccclass,yc=q.property,yh=eZ({Circle:0,Rectangle:1}),yp=eZ({Base:0,Edge:1}),Zm=function(){return this.shape===yh.Circle},Qm=function(){return this.shape===yh.Rectangle},yd=[0,0],yv=(vz=yu("ShapeModule"),vx=yc({type:eZ(yh)}),vU=yc({type:eZ(yp),visible:Qm}),vH=yc({}),vj=yc({}),vV=yc({}),vW=yc({range:[0,360],visible:Zm}),vK=yc({range:[-360,360],visible:Zm}),vq=yc({min:0,visible:Zm}),vY=yc({range:[0,1],step:.01,visible:Zm}),vJ=yc({visible:Qm}),vz((vQ=n((vZ=function(){function e(){r(this,e),p(this,"shape",vQ,this),p(this,"emitFrom",v$,this),p(this,"position",v0,this),p(this,"rotation",v1,this),p(this,"scale",v2,this),p(this,"arc",v3,this),p(this,"angle",v4,this),p(this,"radius",v5,this),p(this,"radiusThickness",v7,this),p(this,"rectangleThickness",v6,this)}return y(e,[{key:"emit",value:function(n){switch(this.shape){case yh.Circle:this.circleEmit(this.radius,this.radiusThickness,e8(this.generateArcAngle()),n);break;case yh.Rectangle:this.rectangleEmit(this.emitFrom,this.rectangleThickness,n)}}},{key:"circleEmit",value:function(n,i,a,r){var p=r.node.position;cf(p,n*(1-i),n,a+e8(this.angle)),r.velocity=p.clone().normalize()}},{key:"rectangleEmit",value:function(n,i,a){var r,p,d,y=a.node.position;switch(n){case yp.Base:p=y,d=i,ew.set(p,e5(-d.x,d.x),e5(-d.y,d.y));break;case yp.Edge:yd[0]=e5(-1,1),yd[1]=(0===(r=e5(-1,1))&&r++,e3.sign(r)),function(n){for(var i=0;i<n.length;i++){var a=i+e7(0,n.length-i),r=n[a];n[a]=n[i],n[i]=r}}(yd),this.applyRectThickness(yd,i),ew.set(y,yd[0],yd[1])}a.velocity=y.clone().normalize()}},{key:"generateArcAngle",value:function(){return e5(0,this.arc)}},{key:"applyRectThickness",value:function(n,i){i.x>0&&(n[0]*=i.x),i.y>0&&(n[1]*=i.y)}},{key:"gizmo",value:function(n){switch(n.strokeColor.fromHEX("#46C4FFB0"),n.fillColor.fromHEX("#46C4FF77"),n.lineWidth=8,this.shape){case yh.Circle:this.gizmoCircle(n);break;case yh.Rectangle:this.gizmoRectangle(n)}}},{key:"gizmoCircle",value:function(n){n.clear();var i=this.angle,a=this.angle+this.arc;if(this.createArcPath(n,this.radius,i,a),this.createArcPath(n,this.radius*(1-this.radiusThickness),i,a),this.arc<360&&this.radius>0){var r=this.radius*Math.cos(e8(this.angle)),p=this.radius*Math.sin(e8(this.angle)),d=this.radius*Math.cos(e8(this.arc+this.angle)),y=this.radius*Math.sin(e8(this.arc+this.angle));n.moveTo(r,p),n.lineTo(0,0),n.moveTo(d,y),n.lineTo(0,0)}n.stroke()}},{key:"gizmoRectangle",value:function(n){n.clear();var i=this.rectangleThickness.x,a=this.rectangleThickness.y;n.moveTo(i,a),n.lineTo(-i,a),n.lineTo(-i,-a),n.lineTo(i,-a),n.close(),n.stroke()}},{key:"createArcPath",value:function(n,i,a,r){if(!(i<=0))for(var p=(r-a)/48,d=0;d<=48;d++){var y=a+d*p,m=i*Math.cos(e8(y)),g=i*Math.sin(e8(y));0===d?n.moveTo(m,g):n.lineTo(m,g)}}}]),e}()).prototype,"shape",[vx],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return yh.Circle}}),v$=n(vZ.prototype,"emitFrom",[vU],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return yp.Base}}),v0=n(vZ.prototype,"position",[vH],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new ep(0,0,0)}}),v1=n(vZ.prototype,"rotation",[vj],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new ep(0,0,0)}}),v2=n(vZ.prototype,"scale",[vV],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new ep(1,1,1)}}),v3=n(vZ.prototype,"arc",[vW],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 360}}),v4=n(vZ.prototype,"angle",[vK],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 25}}),v5=n(vZ.prototype,"radius",[vq],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),v7=n(vZ.prototype,"radiusThickness",[vY],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),v6=n(vZ.prototype,"rectangleThickness",[vJ],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new ew(20,50)}}),vX=vZ))||vX);K._RF.pop(),K._RF.push({},"1b7c1WztGdLzKO8gh4ulm2c","SizeOvertimeModule",void 0);var yy,yf,ym,yg,yb,yC,yS,yk,yE,yw,yT,yR,y_,yA=q.ccclass,yB=q.property,yP=d2,yL=(yn=yA("SizeOvertimeModule"),yi=yB({type:ec}),ya=yB({type:dU}),yn((ys=n((yr=function(){function e(){r(this,e),p(this,"enable",ys,this),p(this,"size",yl,this),this.size.constant=1}return y(e,[{key:"update",value:function(n){if(this.enable){var i=1-n.remainingLifetime/n.startLifetime,a=n.randomSeed+yP,r=hf(this.size)?e6(a):0,p=this.size.evaluate(i,r);n.node.scale=new ep(p*n.startSize.x,p*n.startSize.y,1)}}}]),e}()).prototype,"enable",[yi],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yl=n(yr.prototype,"size",[ya],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new dU}}),yo=yr))||yo);K._RF.pop(),K._RF.push({},"530341yf3ZOmaqdU+AYM0/U","SpriteAnimationModule",void 0);var yO,yD,yI,yN,yG,yM,yF,yz,yx,yU=q.ccclass,yH=q.property,yj=d3,yV=(yy=yU("SpriteAnimationModule"),yf=yH({type:ec}),ym=yH({type:eA}),yg=yH({type:dU}),yb=yH({type:dU}),yC=yH({type:es}),yy((yE=n((yk=function(){function e(){r(this,e),p(this,"enable",yE,this),p(this,"frames",yw,this),p(this,"frameOverTime",yT,this),p(this,"startFrame",yR,this),p(this,"cycleCount",y_,this),this.frameOverTime.constant=0,this.startFrame.constant=0}return y(e,[{key:"update",value:function(n){if(this.enable){var i=1-n.remainingLifetime/n.startLifetime,a=hf(this.startFrame)?e6(n.randomSeed+yj):0,r=hf(this.frameOverTime)?e6(n.randomSeed+yj):0,p=this.startFrame.evaluate(i,a),d=eX(this.cycleCount*(this.frameOverTime.evaluate(i,r)+p),this.frames.length);n.sprite.spriteFrame=this.frames[Math.floor(d)]}}}]),e}()).prototype,"enable",[yf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yw=n(yk.prototype,"frames",[ym],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),yT=n(yk.prototype,"frameOverTime",[yg],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new dU}}),yR=n(yk.prototype,"startFrame",[yb],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new dU}}),y_=n(yk.prototype,"cycleCount",[yC],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),yS=yk))||yS);K._RF.pop(),K._RF.push({},"f6ad5Yz6wpE2ZzModn16CYQ","VelocityOvertimeModule",void 0);var yW,yK,yq,yY,yJ,yX,yZ,yQ,y$,y0,y1,y2,y3,y4,y5,y7,y6,y9,y8,fe,ft,fn,fi,fa,fo,fr,fs,fl,fu,fc,fh,fp,fd,fv,fy,ff,fm,fg,fb,fC,fS,fk,fE,fw,fT,fR,f_,fA,fB,fP,fL,fO,fD=q.ccclass,fI=q.property,fN=(yO=fD("VelocityOvertimeModule"),yD=fI({type:ec}),yI=fI({type:dU}),yN=fI({type:dU}),yO((yF=n((yM=function(){function e(){r(this,e),p(this,"enable",yF,this),p(this,"x",yz,this),p(this,"y",yx,this),this._temp_v3=new ep,this.x.constant=0,this.y.constant=0}return y(e,[{key:"update",value:function(n,i){if(this.enable){var a=1-n.remainingLifetime/n.startLifetime,r=hf(this.x)?e6(n.randomSeed+d7):0,p=hf(this.y)?e6(n.randomSeed+d6):0,d=ep.set(this._temp_v3,this.x.evaluate(a,r),this.y.evaluate(a,p),0);ep.add(n.velocity,n.velocity,d.multiplyScalar(i))}}}]),e}()).prototype,"enable",[yD],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yz=n(yM.prototype,"x",[yI],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new dU}}),yx=n(yM.prototype,"y",[yN],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new dU}}),yG=yM))||yG);K._RF.pop(),K._RF.push({},"10bc3IfFqBLtpSgVri/NVeX","ParticleSystem",void 0);var fG,fM=q.ccclass,fF=q.property,fz=q.executeInEditMode,fx=q.disallowMultiple,fU=(yW=fM("ParticleSystem"),yK=fz(!0),yq=fx(!0),yY=fF({}),yJ=fF(ec),yX=fF(ex),yZ=fF(ec),yQ=fF({type:dU}),y$=fF({type:dU}),y0=fF(dq),y1=fF(ec),y2=fF({type:dU,formerlySerializedAs:"startSize"}),y3=fF({type:dU,visible:function(){return this.startSize2D}}),y4=fF({type:dU}),y5=fF(ec),y7=fF({type:dU,formerlySerializedAs:"startRotation"}),y6=fF({type:dU}),y9=fF({type:dU}),y8=fF({type:yv}),fe=fF({type:fN}),ft=fF({type:yL}),fn=fF({type:yt}),fi=fF({type:vc}),fa=fF({type:yV}),fo=fF({type:vS}),fr=fF(p8),fs=fF({type:vF}),yW(fl=yK(fl=yq((n((fu=function(n){i(l,n);var m=a(l);function l(){var n;return r(this,l),(n=m.call(this))._preview=!1,p(n,"playOnAwake",fc,d(n)),p(n,"duration",fh,d(n)),p(n,"loop",fp,d(n)),p(n,"startDelay",fd,d(n)),p(n,"startLifetime",fv,d(n)),p(n,"startColor",fy,d(n)),p(n,"startSize2D",ff,d(n)),p(n,"startSizeX",fm,d(n)),p(n,"startSizeY",fg,d(n)),p(n,"startSpeed",fb,d(n)),p(n,"startRotation3D",fC,d(n)),p(n,"startRotation",fS,d(n)),p(n,"gravityModifier",fk,d(n)),p(n,"rateOverTime",fE,d(n)),p(n,"shapeModule",fw,d(n)),p(n,"velocityOvertimeModule",fT,d(n)),p(n,"sizeOvertimeModule",fR,d(n)),p(n,"rotationOvertimeModule",f_,d(n)),p(n,"colorOvertimeModule",fA,d(n)),p(n,"spriteAnimationModule",fB,d(n)),p(n,"limitVelocityOvertimeModule",fP,d(n)),p(n,"bursts",fL,d(n)),p(n,"rendererModule",fO,d(n)),n.particles=[],n.time=0,n.emitRateTimeCounter=0,n.isPlaying=!1,n.isStopped=!0,n.isEmitting=!1,n.needToRestart=!1,n.startLifetime.constant=5,n.startSizeX.constant=1,n.startSpeed.constant=5,n.rateOverTime.constant=10,n}return y(l,[{key:"preview",get:function(){return this._preview},set:function(n){this._preview=n,this.graphics&&this.graphics.destroy()}},{key:"onEnable",value:function(){}},{key:"onLoad",value:function(){this.preview=null!==this.getComponent(ey),this.node.removeAllChildren()}},{key:"start",value:function(){this.node.position=new ep(this.node.position.x,this.node.position.y,100),(this.playOnAwake&&!z||this.preview&&z)&&this.play()}},{key:"update",value:function(n){this.isPlaying&&(this.time+=n,this.emitting(n))}},{key:"play",value:function(){this.needToRestart&&(this.needToRestart=!1),this.isStopped&&(this.isStopped=!1),this.time=0,this.isPlaying=!0,this.isEmitting=!0}},{key:"stop",value:function(){this.isPlaying||(this.isPlaying=!1),this.isEmitting||(this.isEmitting=!1),this.isStopped=!0}},{key:"emitting",value:function(n){var i=this,a=this.startDelay.evaluate(0,1);if(this.time>a&&this.time>this.duration+a&&(this.loop||(this.isEmitting=!1)),this.isEmitting){if(this.emitRateTimeCounter+=this.rateOverTime.evaluate(this.time/this.duration,1)*n,this.emitRateTimeCounter>1){var r=Math.floor(this.emitRateTimeCounter);this.emitRateTimeCounter-=r,this.emit(r,n)}var p,d=T(this.bursts);try{for(d.s();!(p=d.n()).done;)p.value.update(this,n)}catch(n){d.e(n)}finally{d.f()}}var y=this.gravityModifier.evaluate(this.time/this.duration,1);this.particles.forEach(function(a,r){a.node.active&&(i.spriteAnimationModule.update(a),i.sizeOvertimeModule.update(a),i.rotationOvertimeModule.update(a,n),i.colorOvertimeModule.update(a),i.velocityOvertimeModule.update(a,n),i.applyGravityModifier(a,y),i.limitVelocityOvertimeModule.update(a,n),a.node.position.add(a.velocity.clone().multiplyScalar(n)),a.remainingLifetime-=n,a.remainingLifetime<=0&&(a.node.active=!1))})}},{key:"emit",value:function(n,i){if(null!==this.rendererModule.spriteFrame)for(var a=this.time%this.duration/this.duration,r=0;r<n;r++){var p=this.getFreeParticle();p.init(this),p.reset(),this.shapeModule.emit(p);var d=this.startSpeed.evaluate(a,this.rand());p.velocity=p.velocity.clone().multiplyScalar(d);var y=this.startSizeX.evaluate(a,this.rand()),m=this.startSize2D?new ep(y,this.startSizeY.evaluate(a,this.rand()),1):new ep(y,y,1);p.startSize=m.clone(),p.node.scale=m.clone();var g=this.startRotation.evaluate(a,this.rand());p.node.eulerAngles=new ep(0,0,g),p.startColor=this.startColor.evaluate(a,this.rand()).clone(),p.sprite.color=p.startColor.clone(),p.startLifetime=this.startLifetime.evaluate(a,this.rand())+i,p.remainingLifetime=p.startLifetime,p.randomSeed=e7(0,233280)}}},{key:"applyGravityModifier",value:function(n,i){n.velocity.add(new ep(0,-9.8*i,0))}},{key:"rand",value:function(){return e6(e7(0,e3.INT_MAX))}},{key:"getFreeParticle",value:function(){var n=this.particles.find(function(n){return!n.node.active});return n||(n=this.createParticle()),n.node.active=!0,n}},{key:"createParticle",value:function(){var n=new Y,i=Q(n),a=i.addComponent(dC),r=i.addComponent(el);return this.particles.push(a),r.spriteFrame=this.rendererModule.spriteFrame,r.customMaterial=this.rendererModule.material,this.node.addChild(i),a}}]),l}(ea)).prototype,"preview",[yY],Object.getOwnPropertyDescriptor(fu.prototype,"preview"),fu.prototype),fc=n(fu.prototype,"playOnAwake",[yJ],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),fh=n(fu.prototype,"duration",[yX],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),fp=n(fu.prototype,"loop",[yZ],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),fd=n(fu.prototype,"startDelay",[yQ],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new dU}}),fv=n(fu.prototype,"startLifetime",[y$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new dU}}),fy=n(fu.prototype,"startColor",[y0],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new dq}}),ff=n(fu.prototype,"startSize2D",[y1],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),fm=n(fu.prototype,"startSizeX",[y2],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new dU}}),fg=n(fu.prototype,"startSizeY",[y3],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new dU}}),fb=n(fu.prototype,"startSpeed",[y4],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new dU}}),fC=n(fu.prototype,"startRotation3D",[y5],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),fS=n(fu.prototype,"startRotation",[y7],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new dU}}),fk=n(fu.prototype,"gravityModifier",[y6],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new dU}}),fE=n(fu.prototype,"rateOverTime",[y9],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new dU}}),fw=n(fu.prototype,"shapeModule",[y8],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new yv}}),fT=n(fu.prototype,"velocityOvertimeModule",[fe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new fN}}),fR=n(fu.prototype,"sizeOvertimeModule",[ft],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new yL}}),f_=n(fu.prototype,"rotationOvertimeModule",[fn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new yt}}),fA=n(fu.prototype,"colorOvertimeModule",[fi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new vc}}),fB=n(fu.prototype,"spriteAnimationModule",[fa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new yV}}),fP=n(fu.prototype,"limitVelocityOvertimeModule",[fo],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new vS}}),fL=n(fu.prototype,"bursts",[fF,fr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),fO=n(fu.prototype,"rendererModule",[fs],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new vF}}),fl=fu))||fl)||fl)||fl);K._RF.pop(),K._RF.push({},"21a9aAlkBtGxKLqip8g0o6l","ParticleSystem2DExtra",void 0);var fH=q.ccclass,fj=q.disallowMultiple,fV=q.executeInEditMode,fW=q.requireComponent,fK=fH("ParticleSystem2DExtra")(fG=fV(!0)(fG=fj(!0)(fG=fW(te)(fG=function(n){i(o,n);var p=a(o);function o(){var n;r(this,o);for(var i=arguments.length,a=new Array(i),d=0;d<i;d++)a[d]=arguments[d];return(n=p.call.apply(p,[this].concat(a))).emitParticle=function(i){return function(a){i(a);var r=n.particleSystem._simulator.particles.length,p=n.particleSystem._simulator.particles[r-1];n.initParticle(p)}},n.step=function(i){return function(a){for(var r=n.particleSystem._simulator.particles,p=0;p<r.length;p++){var d=r[p];n.updateParticle(d,a)}i(a)}},n}return y(o,[{key:"__preload",value:function(){this.particleSystem=this.getComponent(te),this.validateRequiredComponents(),this.overrideFunctions()}},{key:"overrideFunctions",value:function(){var n=this.particleSystem._simulator.emitParticle.bind(this.particleSystem._simulator);this.particleSystem._simulator.emitParticle=this.emitParticle(n);var i=this.particleSystem._simulator.step.bind(this.particleSystem._simulator);this.particleSystem._simulator.step=this.step(i)}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}}]),o}(ea))||fG)||fG)||fG)||fG;K._RF.pop(),K._RF.push({},"9a5a3MgLaRAKbHluGCPsA8j","ExampleParticleSystem2DExtra",void 0);(0,q.ccclass)("ExampleParticleSystem2DExtra")(function(n){i(o,n);var p=a(o);function o(){return r(this,o),p.apply(this,arguments)}return y(o,[{key:"initParticle",value:function(n){n.maxSize=e_.randomRange(.25,1)*n.size,n.size=0,n.deltaSize=0,n.cycleDuration=e_.randomRange(.4,.6),n.life=n.timeToLive,this.setInitPosition(n.pos)}},{key:"updateParticle",value:function(n,i){this.updateScale(n)}},{key:"setInitPosition",value:function(n){var i=n.x,a=n.y;return n.x=i+e_.randomRange(-350,350),n.y=a+e_.randomRange(-350,350),n}},{key:"updateScale",value:function(n){var i=1-(n.life-n.timeToLive)%n.cycleDuration/n.cycleDuration;n.size=n.maxSize*Math.sin(i*Math.PI)}}]),o}(fK));K._RF.pop(),K._RF.push({},"6adb6Vsx2BIsYfe4A3i4ArN","custom",void 0);var fq;(0,q.ccclass)("CustomSpine")(function(n){i(o,n);var p=a(o);function o(){var n;r(this,o);for(var i=arguments.length,a=new Array(i),d=0;d<i;d++)a[d]=arguments[d];return(n=p.call.apply(p,[this].concat(a))).spine=null,n.anims=null,n.customEnd=function(i){var a;var r=null===(a=n.spine)||void 0===a?void 0:a.skeletonData;if(r)r.getRuntimeData()},n}return y(o,[{key:"__preload",value:function(){var n,i;this.spine=null!==(n=this.node.getComponent(eE.Skeleton))&&void 0!==n?n:null,this.anims=null!==(i=this.node.getComponent(eo))&&void 0!==i?i:null,m.lazyValidateProperties(this)}},{key:"onLoad",value:function(){var n;null===(n=this.anims)||void 0===n||n.play("custom")}},{key:"start",value:function(){}}]),o}(ea));K._RF.pop(),K._RF.push({},"4a9beTdMntC0q9yngb8a2go","BootScene",void 0);var fY,fJ=q.ccclass,fX=q.disallowMultiple,fZ=GameCore,fQ=fZ.Events,f$=fZ.Configs,f0=globalThis.game,f1=f0.ads,f2=f0.player,f3=f0.event;fJ("BootScene")(fq=fX(fq=function(n){i(o,n);var p=a(o);function o(){var n;r(this,o);for(var i=arguments.length,a=new Array(i),d=0;d<i;d++)a[d]=arguments[d];return(n=p.call.apply(p,[this].concat(a))).processWhenGameSdkStarted=function(){n.setupGameData(),n.processMSGamesNotification()},n.handlePauseAudio=function(){f3.on(fQ.VISIBILITY_HIDDEN,n.handleMuteAudio),f3.on(fQ.VISIBILITY_VISIBLE,n.handleUnMuteAudio)},n.handleMuteAudio=function(){k.muteAudio(!0)},n.handleUnMuteAudio=function(){f1.isAdFullSizeShowing()||k.muteAudio(!1)},n}return y(o,[{key:"__preload",value:function(){this.setupAndroidPlatformAds(),this.processCrazyGamesLoadingStart(),this.listenEvents()}},{key:"onLoad",value:function(){this.handlePauseAudio(),f$.Core.StartSDKAfterLoadGame||L.showLoadingFullScreen(x.BOOT_SCENE)}},{key:"start",value:function(){this.processCrazyGamesLoadingStop()}},{key:"listenEvents",value:function(){f3.catchUp(fQ.GAME_SDK_STARTED,this.processWhenGameSdkStarted)}},{key:"setupGameData",value:function(){var n=f2.getGameData();if(n){var i=G.MaxLevel,a=n.totalLevel,r={totalLevel:Math.max(a,i)};f2.setGameData(r)}}},{key:"processCrazyGamesLoadingStart",value:function(){"gameLoadingStart"in GameSDK.extra&&GameSDK.extra.gameLoadingStart()}},{key:"processCrazyGamesLoadingStop",value:function(){"gameLoadingStop"in GameSDK.extra&&GameSDK.extra.gameLoadingStop()}},{key:"processMSGamesNotification",value:function(){"sendDailyNotificationAsync"in GameSDK.extra&&GameSDK.extra.sendDailyNotificationAsync()}},{key:"setupAndroidPlatformAds",value:function(){}}]),o}(ea))||fq);K._RF.pop(),K._RF.push({},"c4e30ckJiFBG4VHrF+wikMs","DashboardScene",void 0);var f4,f5=q.ccclass,f7=q.disallowMultiple;f5("DashboardScene")(fY=f7(fY=function(n){i(o,n);var p=a(o);function o(){return r(this,o),p.apply(this,arguments)}return y(o,[{key:"__preload",value:function(){this.validateRequiredComponents()}},{key:"start",value:function(){this.scheduleOnce(this.preloadScenes,2)}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"preloadScenes",value:function(){M.preloadGameScene()}},{key:"handleSingleButtonClicked",value:function(){M.switchToGameScene()}},{key:"handleEndlessButtonClicked",value:function(){M.switchToEndlessScene()}},{key:"handleTestLayoutButtonClicked",value:function(){M.switchScene(x.TEST_LAYOUT_SCENE)}}]),o}(ea))||fY);K._RF.pop(),K._RF.push({},"22d76GFn6BEoKFiZCFN1HmA","DraftScene",void 0);var f6,f9=q.ccclass,f8=q.disallowMultiple;f9("DraftScene")(f4=f8(f4=function(n){i(o,n);var p=a(o);function o(){return r(this,o),p.apply(this,arguments)}return y(o,[{key:"__preload",value:function(){this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"onLoad",value:function(){GameSDK.startGameAsync().catch(function(n){})}},{key:"switchScene",value:function(){}}]),o}(ea))||f4);K._RF.pop(),K._RF.push({},"27217ZS55VNqbq0d9w9Cc+3","Component",void 0);var me,mt=q.ccclass,mn=q.executeInEditMode,mi=q.disallowMultiple;GameCore.Events,globalThis.game.event;mt("DraftComponent")(f6=mi(f6=mn(!0)(f6=function(n){i(o,n);var p=a(o);function o(){var n;r(this,o);for(var i=arguments.length,a=new Array(i),d=0;d<i;d++)a[d]=arguments[d];return(n=p.call.apply(p,[this].concat(a))).locale="en",n.eventPayload={screenName:"DraftScene"},n}return y(o,[{key:"__preload",value:function(){}},{key:"onLoad",value:function(){}},{key:"start",value:function(){this.makePersistent()}},{key:"makePersistent",value:function(){ei.addPersistRootNode(this.node)}}]),o}(ea))||f6)||f6);K._RF.pop(),K._RF.push({},"3f6029o9mpM/K2ccwbuv3XD","EndlessScene",void 0);var ma,mo=q.ccclass,mr=q.disallowMultiple,ms=globalThis.game,ml=ms.audio,mu=ms.ads,mc=b.Layout,mh=b.DesignSize.Portrait;mo("EndlessScene")(me=mr(me=function(n){i(o,n);var p=a(o);function o(){var n;r(this,o);for(var i=arguments.length,a=new Array(i),d=0;d<i;d++)a[d]=arguments[d];return(n=p.call.apply(p,[this].concat(a))).handleGameMaskWhenLayoutChanged=function(n){var i=eU("Canvas/Game/GameObjects");if(i){var a=i.getComponent(eN);a&&(a.enabled=n===mc.Landscape)}},n.handleAdsWhenResize=function(){n.checkBottomBannerAdSize(),n.setMaxSizeSideBannerAd()},n.attemptCallSubscribeBot=function(){"subscribeBotAsync"in GameSDK.extra&&GameSDK.extra.subscribeBotAsync().catch(function(n){})},n}return y(o,[{key:"__preload",value:function(){this.validateRequiredComponents(),this.listenGameEvents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"onLoad",value:function(){}},{key:"listenGameEvents",value:function(){this.node.scene.on(g.LAYOUT_CHANGED,this.handleGameMaskWhenLayoutChanged),this.node.scene.on(g.VIEW_RESIZE,this.handleAdsWhenResize)}},{key:"checkBottomBannerAdSize",value:function(){var n=tt.instance.getVisibleSize(),i=C.worldSizeToCssSize(n.height*U.MAX_BOTTOM_BANNER_RATIO);GameCore.Configs.Ads.BannerDisplayAdOptions.forEach(function(n){var a=n.PlacementId,r=n.Position,p=n.BannerHeight;"bottom"===r&&(p>i?mu.hideBannerAdAsync(a).catch(function(n){}):mu.showBannerAdAsync(a).catch(function(n){}))})}},{key:"setMaxSizeSideBannerAd",value:function(){var n=GameSDK.extra;if("setSideBannerAdRemainSize"in n){var i=tt.instance.getVisibleSize(),a=mh.WIDTH+24,r=(i.width-a)/2,p=C.worldSizeToCssSize(r);n.setSideBannerAdRemainSize(p)}}},{key:"start",value:function(){this.scheduleOnce(this.attemptCallSubscribeBot,.5),this.updateVolumeBackgroundMusic()}},{key:"updateVolumeBackgroundMusic",value:function(){ml.setVolume(1,"global_music")}}]),o}(ea))||me);K._RF.pop(),K._RF.push({},"9b83boaSv9PE6mRFqy0MSI8","GameScene",void 0);var mp,md=q.ccclass,mv=q.disallowMultiple,my=globalThis.game,mf=my.audio,mm=my.ads,mg=b.Layout,mb=b.DesignSize.Portrait;md("GameScene")(ma=mv(ma=function(n){i(o,n);var p=a(o);function o(){var n;r(this,o);for(var i=arguments.length,a=new Array(i),d=0;d<i;d++)a[d]=arguments[d];return(n=p.call.apply(p,[this].concat(a))).handleGameMaskWhenLayoutChanged=function(n){var i=eU("Canvas/Game/GameObjects");if(i){var a=i.getComponent(eN);a&&(a.enabled=n===mg.Landscape)}},n.handleAdsWhenResize=function(){n.checkBottomBannerAdSize(),n.setMaxSizeSideBannerAd()},n.attemptCallSubscribeBot=function(){"subscribeBotAsync"in GameSDK.extra&&GameSDK.extra.subscribeBotAsync().catch(function(n){})},n}return y(o,[{key:"__preload",value:function(){this.validateRequiredComponents(),this.listenGameEvents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"listenGameEvents",value:function(){eu.on(g.VIEW_RESIZE,this.handleAdsWhenResize),eu.on(g.LAYOUT_CHANGED,this.handleGameMaskWhenLayoutChanged)}},{key:"checkBottomBannerAdSize",value:function(){var n=tt.instance.getVisibleSize(),i=C.worldSizeToCssSize(n.height*U.MAX_BOTTOM_BANNER_RATIO);GameCore.Configs.Ads.BannerDisplayAdOptions.forEach(function(n){var a=n.PlacementId,r=n.Position,p=n.BannerHeight;"bottom"===r&&(p>i?mm.hideBannerAdAsync(a).catch(function(n){}):mm.showBannerAdAsync(a).catch(function(n){}))})}},{key:"setMaxSizeSideBannerAd",value:function(){var n=GameSDK.extra;if("setSideBannerAdRemainSize"in n){var i=tt.instance.getVisibleSize(),a=mb.WIDTH+24,r=(i.width-a)/2,p=C.worldSizeToCssSize(r);n.setSideBannerAdRemainSize(p)}}},{key:"start",value:function(){this.scheduleOnce(this.attemptCallSubscribeBot,.5),this.updateVolumeBackgroundMusic(),this.scheduleOnce(this.preloadScenes,2)}},{key:"preloadScenes",value:function(){M.preloadDashboardScene()}},{key:"updateVolumeBackgroundMusic",value:function(){mf.setVolume(1,"global_music")}}]),o}(ea))||ma);K._RF.pop(),K._RF.push({},"2b2ebUm0nFD64V/fcD8RPF/","TestLayoutScene",void 0);var mC,mS,mk,mE,mw,mT=q.ccclass,mR=q.disallowMultiple;mT("TestLayoutScene")(mp=mR(mp=function(n){i(o,n);var p=a(o);function o(){var n;r(this,o);for(var i=arguments.length,a=new Array(i),d=0;d<i;d++)a[d]=arguments[d];return(n=p.call.apply(p,[this].concat(a))).handleLayoutChange=function(){L.showNotificationScreen("Layout changed")},n}return y(o,[{key:"__preload",value:function(){this.validateRequiredComponents(),M.markIsTestScene(x.TEST_LAYOUT_SCENE),this.listenGameEvents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"listenGameEvents",value:function(){eu.on(g.LAYOUT_CHANGED,this.handleLayoutChange)}},{key:"switchScene",value:function(){M.switchScene(x.DASHBOARD_SCENE)}}]),o}(ea))||mp);K._RF.pop(),K._RF.push({},"c0a5fPghzxBxpXiudxt+Qd4","TestParticleSystemScene",void 0);var m_,mA=q.ccclass,mB=q.property;mC=mA("TestParticleSystemScene"),mS=mB(Y),mk=m.required(),mC((mw=n((mE=function(n){i(l,n);var m=a(l);function l(){var n;r(this,l);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=m.call.apply(m,[this].concat(a)),p(n,"stars",mw,d(n)),n}return y(l,[{key:"__preload",value:function(){M.markIsTestScene(x.TEST_PARTICLE_SYSTEM_SCENE)}},{key:"onLoad",value:function(){GameSDK.startGameAsync().catch(function(n){})}},{key:"start",value:function(){var n=this.stars.getComponent(fU);null==n||n.play()}}]),l}(ea)).prototype,"stars",[mS,mk],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),mE));K._RF.pop(),K._RF.push({},"7dc71c6qMBI/ZZfA4rG4nFv","TestPerformanceScene",void 0);var mP,mL=q.ccclass,mO=q.disallowMultiple;mL("TestPerformanceScene")(m_=mO(m_=function(n){i(o,n);var p=a(o);function o(){return r(this,o),p.apply(this,arguments)}return y(o,[{key:"__preload",value:function(){this.validateRequiredComponents(),M.markIsTestScene(x.TEST_PERFORMANCE_SCENE),this.listenEvents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"onLoad",value:function(){GameSDK.startGameAsync().catch(function(n){})}},{key:"listenEvents",value:function(){}},{key:"start",value:function(){}}]),o}(ea))||m_);K._RF.pop(),K._RF.push({},"0a4aeK2lAdAjq0xWi6SCbV+","TestScene",void 0);var mD=q.ccclass,mI=q.disallowMultiple,mN=GameCore.Events,mG=globalThis.game.event;mD("TestScene")(mP=mI(mP=function(n){i(o,n);var p=a(o);function o(){return r(this,o),p.apply(this,arguments)}return y(o,[{key:"__preload",value:function(){this.validateRequiredComponents(),M.markIsTestScene(x.TEST_SCENE)}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"onLoad",value:function(){this.listenScreenEvents(),GameSDK.startGameAsync().catch(function(n){})}},{key:"listenScreenEvents",value:function(){mG.once(mN.CLOSED_SCREEN,function(n){n.screenName===H[O.LOADING_SCREEN]&&L.openScreen(O.NOTIFICATION_SCREEN,{message:"Test screen events pass!",duration:2,isCloseButtonVisible:!1})})}},{key:"start",value:function(){L.openScreen(O.LOADING_SCREEN,{duration:.5})}}]),o}(ea))||mP);K._RF.pop(),K._RF.push({},"56a103phldKO7/xShKcD3bI","AnimationDemo",void 0);(0,q.ccclass)("AnimationDemo")(function(n){i(o,n);var p=a(o);function o(){return r(this,o),p.apply(this,arguments)}return y(o,[{key:"onLoad",value:function(){}},{key:"switchToTestTransitionScene",value:function(){M.switchScene("TestTransitionScene")}}]),o}(ea));K._RF.pop(),K._RF.push({},"a3b8adQtftPmKSSoumHWY1e","AudioDemo",void 0);(0,q.ccclass)("AudioDemo")(function(n){i(o,n);var p=a(o);function o(){var n;r(this,o);for(var i=arguments.length,a=new Array(i),d=0;d<i;d++)a[d]=arguments[d];return(n=p.call.apply(p,[this].concat(a))).isMusicMute=!1,n.isSoundMute=!1,n.listSounds=[],n}return y(o,[{key:"onLoad",value:function(){var n,i;this.musicComp=null===(n=eU("Music"))||void 0===n?void 0:n.getComponent(j),this.soundComp=null===(i=eU("Sound"))||void 0===i?void 0:i.getComponent(V),this.validateRequiredComponents(),this.listSounds=[R.BEE_FLYING,R.BEE_STING_DOGE,R.BG_MUSIC,R.BUTTON_CLICK,R.COLLECTING_COINS,R.DOGE_DIES,R.DOGE_HURT,R.END_DRAW,R.HAND_CLAP,R.LEVEL_FAIL,R.LEVEL_PASS,R.LOST_STAR_IN_GAMEPLAY,R.RAISE_STAR,R.SPAWN_COINS,R.STAR_RAISE,R.TOUCH_START,R.BEE_BULLET_EXPLODE]}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"playBackgroundMusic",value:function(){this.musicComp.play(R.BG_MUSIC)}},{key:"pauseBackgroundMusic",value:function(){this.musicComp.pause(R.BG_MUSIC)}},{key:"stopBackgroundMusic",value:function(){this.musicComp.stop(R.BG_MUSIC)}},{key:"randomMusicChannelVolume",value:function(){var n=Math.random();this.musicComp.setVolume(n)}},{key:"toggleMuteMusicChannel",value:function(){this.isMusicMute?(this.musicComp.mute(!1),this.isMusicMute=!1):(this.musicComp.mute(!0),this.isMusicMute=!0)}},{key:"playRandomSound",value:function(){this.soundComp.play(this.listSounds[Math.floor(Math.random()*this.listSounds.length)])}},{key:"toggleMuteSoundChannel",value:function(){this.isSoundMute?(this.soundComp.mute(!1),this.isSoundMute=!1):(this.soundComp.mute(!0),this.isSoundMute=!0)}},{key:"randomSoundChannelVolume",value:function(){var n=Math.random();this.soundComp.setVolume(n)}}]),o}(ea));K._RF.pop(),K._RF.push({},"9e6b330nHBK2oNz8N9/lpDx","FlowChallenge",void 0);var mM=q.ccclass,mF=globalThis.game,mz=mF.match,mx=mF.player;mM("FlowChallenge")(function(n){i(h,n);var p,d,m,g,b,C=a(h);function h(){var n;r(this,h);for(var i=arguments.length,a=new Array(i),p=0;p<i;p++)a[p]=arguments[p];return(n=C.call.apply(C,[this].concat(a))).playerId="",n}return y(h,[{key:"onLoad",value:function(){this.playerId=mx.getPlayerId()}},{key:"inviteFriends",value:(b=I(function(){var n;return _ts_generator(this,function(i){switch(i.label){case 0:i.trys.push([0,2,3,4]);L.showLoadingScreen(0);return[4,mz.challenge.invite.processAsync({playerId:this.playerId})];case 1:i.sent();return[3,4];case 2:n=i.sent();_instanceof(n,Error)&&L.showNotificationScreen(n.message);return[3,4];case 3:L.closeLoadingScreen();return[7];case 4:return[2]}})}),function(){return b.apply(this,arguments)})},{key:"challengeFriend",value:(g=I(function(n,i){var a,r;return _ts_generator(this,function(n){switch(n.label){case 0:a=JSON.parse(i);n.label=1;case 1:n.trys.push([1,3,4,5]);L.showLoadingScreen(0);return[4,mz.challenge.friend.processAsync(D(D({},a),{},{playerId:this.playerId}))];case 2:n.sent();return[3,5];case 3:r=n.sent();_instanceof(r,Error)&&L.showNotificationScreen(r.message);return[3,5];case 4:L.closeLoadingScreen();return[7];case 5:return[2]}})}),function(n,i){return g.apply(this,arguments)})},{key:"joinChallenge",value:(m=I(function(n,i){var a,r;return _ts_generator(this,function(n){switch(n.label){case 0:a=JSON.parse(i);n.label=1;case 1:n.trys.push([1,3,4,5]);L.showLoadingScreen(0);return[4,mz.challenge.join.processAsync(D(D({},a),{},{playerId:this.playerId}))];case 2:n.sent();return[3,5];case 3:r=n.sent();_instanceof(r,Error)&&L.showNotificationScreen(r.message);return[3,5];case 4:L.closeLoadingScreen();return[7];case 5:return[2]}})}),function(n,i){return m.apply(this,arguments)})},{key:"continueChallenge",value:(d=I(function(n,i){var a,r;return _ts_generator(this,function(n){switch(n.label){case 0:a=JSON.parse(i);n.label=1;case 1:n.trys.push([1,3,4,5]);L.showLoadingScreen(0);return[4,mz.challenge.continue.processAsync(D(D({},a),{},{playerId:this.playerId}))];case 2:n.sent();return[3,5];case 3:r=n.sent();_instanceof(r,Error)&&L.showNotificationScreen(r.message);return[3,5];case 4:L.closeLoadingScreen();return[7];case 5:return[2]}})}),function(n,i){return d.apply(this,arguments)})},{key:"finishChallenge",value:(p=I(function(){var n;return _ts_generator(this,function(i){switch(i.label){case 0:i.trys.push([0,2,3,4]);L.showLoadingScreen(0);return[4,mz.challenge.finish.processAsync({playerId:mx.getPlayerId(),playerScore:Math.floor(2*Math.random())})];case 1:i.sent();return[3,4];case 2:n=i.sent();_instanceof(n,Error)&&L.showNotificationScreen(n.message);return[3,4];case 3:L.closeLoadingScreen();return[7];case 4:return[2]}})}),function(){return p.apply(this,arguments)})}]),h}(ea));K._RF.pop(),K._RF.push({},"f3decJ3ZlRLt6CDMHpl1XCe","FlowContext",void 0);var mU=q.ccclass,mH=globalThis.game,mj=mH.match,mV=mH.player,mW=mH.context;mU("FlowContext")(function(n){i(l,n);var p,d,m=a(l);function l(){var n;r(this,l);for(var i=arguments.length,a=new Array(i),p=0;p<i;p++)a[p]=arguments[p];return(n=m.call.apply(m,[this].concat(a))).playerId="",n.changeContext=function(){var n=I(function(n,i,a){return _ts_generator(this,function(r){switch(r.label){case 0:mW.receiveContext(n,i,a);return[4,mW.detectContextSessionType()];case 1:r.sent(),game.context.detectContextGameMode();return[2]}})});return function(i,a,r){return n.apply(this,arguments)}}(),n}return y(l,[{key:"onLoad",value:function(){this.playerId=mV.getPlayerId()}},{key:"chooseFriends",value:(d=I(function(n,i){var a,r;return _ts_generator(this,function(n){switch(n.label){case 0:a=JSON.parse(i);n.label=1;case 1:n.trys.push([1,3,4,5]);L.showLoadingScreen(0);return[4,mj.context.choose.processAsync(D(D({},a),{},{playerId:this.playerId}))];case 2:n.sent();return[3,5];case 3:r=n.sent();_instanceof(r,Error)&&L.showNotificationScreen(r.message);return[3,5];case 4:L.closeLoadingScreen();return[7];case 5:return[2]}})}),function(n,i){return d.apply(this,arguments)})},{key:"processContextData",value:(p=I(function(){var n;return _ts_generator(this,function(i){switch(i.label){case 0:i.trys.push([0,2,3,4]);L.showLoadingScreen(0);return[4,mW.processContextData()];case 1:i.sent();return[3,4];case 2:n=i.sent();_instanceof(n,Error)&&L.showNotificationScreen(n.message);return[3,4];case 3:L.closeLoadingScreen();return[7];case 4:return[2]}})}),function(){return p.apply(this,arguments)})},{key:"setSingleContext",value:function(){this.changeContext("","SOLO",{})}},{key:"setTournamentContext",value:function(){this.changeUrl("/?context_source_id=123&context_type=GENERIC&tournament=true"),this.changeContext("mocked-context-id-tournament","THREAD",{})}},{key:"setShareInviteContext",value:function(){var n={type:mW.getSessionContextTypes().SHARE_INVITE,playerId:"4766619483409000",playerName:"Player",playerPhoto:""};this.changeContext("mocked-context-id-share-invite","THREAD",n)}},{key:"setMatchingGroupContext",value:function(){var n={type:mW.getSessionContextTypes().MATCHING_GROUP,playerId:"4766619483409000",playerName:"Player",playerPhoto:"",playerScore:100};this.changeContext("mocked-context-id-matching-group","GROUP",n)}},{key:"setChallengeFriendContext",value:function(){var n={type:mW.getSessionContextTypes().CHALLENGE_FRIEND,playerId:"4766619483409000",playerName:"Player",playerPhoto:""};this.changeContext("mocked-context-id-challenge-friend","THREAD",n)}},{key:"changeUrl",value:function(n){window.history.pushState({},"",n)}}]),l}(ea));K._RF.pop(),K._RF.push({},"36562c8k/RF2p/1aLUWFaf8","FlowGroup",void 0);var mK=q.ccclass,mq=globalThis.game,mY=mq.match,mJ=mq.player;mK("FlowGroup")(function(n){i(u,n);var p,d,m,g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),p=0;p<i;p++)a[p]=arguments[p];return(n=g.call.apply(g,[this].concat(a))).playerId="",n}return y(u,[{key:"onLoad",value:function(){this.playerId=mJ.getPlayerId()}},{key:"startGroup",value:(m=I(function(n,i){var a,r;return _ts_generator(this,function(n){switch(n.label){case 0:a=JSON.parse(i);n.label=1;case 1:n.trys.push([1,3,4,5]);L.showLoadingScreen(0);return[4,mY.group.start.processAsync(D(D({},a),{},{matchTag:"test",playerId:this.playerId}))];case 2:n.sent();return[3,5];case 3:r=n.sent();_instanceof(r,Error)&&L.showNotificationScreen(r.message);return[3,5];case 4:L.closeLoadingScreen();return[7];case 5:return[2]}})}),function(n,i){return m.apply(this,arguments)})},{key:"joinGroup",value:(d=I(function(n,i){var a,r;return _ts_generator(this,function(n){switch(n.label){case 0:a=JSON.parse(i);n.label=1;case 1:n.trys.push([1,3,4,5]);L.showLoadingScreen(0);return[4,mY.group.join.processAsync(D(D({},a),{},{playerId:this.playerId}))];case 2:n.sent();return[3,5];case 3:r=n.sent();_instanceof(r,Error)&&L.showNotificationScreen(r.message);return[3,5];case 4:L.closeLoadingScreen();return[7];case 5:return[2]}})}),function(n,i){return d.apply(this,arguments)})},{key:"finishGroup",value:(p=I(function(){var n;return _ts_generator(this,function(i){switch(i.label){case 0:i.trys.push([0,2,3,4]);L.showLoadingScreen(0),mJ.setPlayerDataByName("score",Math.floor(2*Math.random()));return[4,mY.group.finish.processAsync()];case 1:i.sent();return[3,4];case 2:n=i.sent();_instanceof(n,Error)&&L.showNotificationScreen(n.message);return[3,4];case 3:L.closeLoadingScreen();return[7];case 4:return[2]}})}),function(){return p.apply(this,arguments)})}]),u}(ea));K._RF.pop(),K._RF.push({},"46e6dOzDGJMa48+tVKTAEIT","FlowSingle",void 0);var mX=q.ccclass,mZ=globalThis.game,mQ=mZ.match,m$=mZ.player;mX("FlowSingle")(function(n){i(l,n);var p,d,m=a(l);function l(){var n;r(this,l);for(var i=arguments.length,a=new Array(i),p=0;p<i;p++)a[p]=arguments[p];return(n=m.call.apply(m,[this].concat(a))).playerId="",n}return y(l,[{key:"onLoad",value:function(){this.playerId=m$.getPlayerId()}},{key:"startSingle",value:(d=I(function(){var n;return _ts_generator(this,function(i){switch(i.label){case 0:i.trys.push([0,2,3,4]);L.showLoadingScreen(0);return[4,mQ.single.start.processAsync({playerId:this.playerId})];case 1:i.sent();return[3,4];case 2:n=i.sent();_instanceof(n,Error)&&L.showNotificationScreen(n.message);return[3,4];case 3:L.closeLoadingScreen();return[7];case 4:return[2]}})}),function(){return d.apply(this,arguments)})},{key:"finishSingle",value:(p=I(function(){var n;return _ts_generator(this,function(i){switch(i.label){case 0:i.trys.push([0,2,3,4]);m$.setPlayerDataByName("score",Math.floor(2*Math.random()));return[4,mQ.single.finish.processAsync()];case 1:i.sent();return[3,4];case 2:n=i.sent();_instanceof(n,Error)&&L.showNotificationScreen(n.message);return[3,4];case 3:L.closeLoadingScreen();return[7];case 4:return[2]}})}),function(){return p.apply(this,arguments)})}]),l}(ea));K._RF.pop(),K._RF.push({},"943b1Zkv9BAaZVhinus8Bkv","FlowTournament",void 0);var m0=q.ccclass,m1=globalThis.game,m2=m1.match,m3=m1.player;m0("FlowTournament")(function(n){i(v,n);var p,d,m,g,b,C,S,k,E=a(v);function v(){var n;r(this,v);for(var i=arguments.length,a=new Array(i),p=0;p<i;p++)a[p]=arguments[p];return(n=E.call.apply(E,[this].concat(a))).playerId="",n}return y(v,[{key:"onLoad",value:function(){this.playerId=m3.getPlayerId()}},{key:"joinTournament",value:(k=I(function(){var n,i;return _ts_generator(this,function(a){switch(a.label){case 0:a.trys.push([0,3,4,5]);L.showLoadingScreen(0);return[4,GameSDK.getTournamentAsync()];case 1:n=a.sent().getID().toString();return[4,m2.tournament.join.processAsync({tournamentId:n,playerId:this.playerId})];case 2:a.sent();return[3,5];case 3:i=a.sent();_instanceof(i,Error)&&L.showNotificationScreen(i.message);return[3,5];case 4:L.closeLoadingScreen();return[7];case 5:return[2]}})}),function(){return k.apply(this,arguments)})},{key:"continueTournament",value:(S=I(function(){var n,i;return _ts_generator(this,function(a){switch(a.label){case 0:a.trys.push([0,3,4,5]);L.showLoadingScreen(0);return[4,GameSDK.getTournamentAsync()];case 1:n=a.sent().getContextID();return[4,m2.tournament.continue.processAsync({contextId:n,playerId:this.playerId})];case 2:a.sent();return[3,5];case 3:i=a.sent();_instanceof(i,Error)&&L.showNotificationScreen(i.message);return[3,5];case 4:L.closeLoadingScreen();return[7];case 5:return[2]}})}),function(){return S.apply(this,arguments)})},{key:"finishTournament",value:(C=I(function(){var n;return _ts_generator(this,function(i){switch(i.label){case 0:i.trys.push([0,2,3,4]);L.showLoadingScreen(0),m3.setPlayerDataByName("score",Math.floor(2*Math.random()));return[4,m2.single.finish.processAsync()];case 1:i.sent();return[3,4];case 2:n=i.sent();_instanceof(n,Error)&&L.showNotificationScreen(n.message);return[3,4];case 3:L.closeLoadingScreen();return[7];case 4:return[2]}})}),function(){return C.apply(this,arguments)})},{key:"createTournament",value:(b=I(function(){var n,i;return _ts_generator(this,function(a){switch(a.label){case 0:a.trys.push([0,2,3,4]);L.showLoadingScreen(0);n=GameCore.Utils.String.generateObjectId();return[4,GameSDK.tournament.createAsync({initialScore:0,config:{title:"Tournament title",tournamentTitle:"Tournament title"},data:{playerId:this.playerId,playerName:"playerName",leaderboardId:n}})];case 1:a.sent();return[3,4];case 2:i=a.sent();_instanceof(i,Error)&&L.showNotificationScreen(i.message);return[3,4];case 3:L.closeLoadingScreen();return[7];case 4:return[2]}})}),function(){return b.apply(this,arguments)})},{key:"postScoreTournament",value:(g=I(function(n){var i,a;return _ts_generator(this,function(r){switch(r.label){case 0:r.trys.push([0,2,3,4]);i=Number(n.string);L.showLoadingScreen(0);return[4,GameSDK.tournament.postScoreAsync(i)];case 1:r.sent();return[3,4];case 2:a=r.sent();_instanceof(a,Error)&&L.showNotificationScreen(a.message);return[3,4];case 3:L.closeLoadingScreen();return[7];case 4:return[2]}})}),function(n){return g.apply(this,arguments)})},{key:"shareTournament",value:(m=I(function(n,i){var a,r;return _ts_generator(this,function(n){switch(n.label){case 0:a=JSON.parse(i);n.label=1;case 1:n.trys.push([1,3,4,5]);L.showLoadingScreen(0);return[4,GameSDK.tournament.shareAsync(a)];case 2:n.sent();return[3,5];case 3:r=n.sent();_instanceof(r,Error)&&L.showNotificationScreen(r.message);return[3,5];case 4:L.closeLoadingScreen();return[7];case 5:return[2]}})}),function(n,i){return m.apply(this,arguments)})},{key:"getTournamentsAsync",value:(d=I(function(){return _ts_generator(this,function(n){try{L.showLoadingScreen(0);GameSDK.tournament.getTournamentsAsync()}catch(n){_instanceof(n,Error)&&L.showNotificationScreen(n.message)}finally{L.closeLoadingScreen()}return[2]})}),function(){return d.apply(this,arguments)})},{key:"getTournamentAsync",value:(p=I(function(){var n;return _ts_generator(this,function(i){switch(i.label){case 0:i.trys.push([0,2,3,4]);L.showLoadingScreen(0);return[4,GameSDK.getTournamentAsync()];case 1:i.sent();return[3,4];case 2:n=i.sent();_instanceof(n,Error)&&L.showNotificationScreen(n.message);return[3,4];case 3:L.closeLoadingScreen();return[7];case 4:return[2]}})}),function(){return p.apply(this,arguments)})}]),v}(ea));K._RF.pop(),K._RF.push({},"d78a7DHN+5P/YjKftUFEZcU","JavaAds",void 0);(0,q.ccclass)("JavaAds")(function(n){i(o,n);var p=a(o);function o(){return r(this,o),p.apply(this,arguments)}return y(o,[{key:"__preload",value:function(){this.setupAds()}},{key:"setupAds",value:function(){}},{key:"onLoad",value:function(){}},{key:"start",value:function(){}}]),o}(ea));K._RF.pop(),K._RF.push({},"58e17jb3n9LP6677b7ocHg+","PreloadScreens",void 0);(0,q.ccclass)("PreloadScreens")(function(n){i(o,n);var p=a(o);function o(){return r(this,o),p.apply(this,arguments)}return y(o,[{key:"preload",value:function(){L.preloadScreens()}}]),o}(ea));K._RF.pop(),K._RF.push({},"64311EGU4RKDpfjDUran9nc","RewardedAdsTest",void 0);(0,q.ccclass)("RewardedAdsTest")(function(n){i(o,n);var p=a(o);function o(){return r(this,o),p.apply(this,arguments)}return y(o,[{key:"show",value:function(){N.showRewardVideoAdAsync({includeSDK:["GameCore"]})}},{key:"close",value:function(){L.closeLoadingScreen()}}]),o}(ea));K._RF.pop(),K._RF.push({},"0fd01MYjfdD+4IeN6PtQl3m","ScreenCongratulation",void 0);(0,q.ccclass)("ScreenCongratulation")(function(n){i(o,n);var p=a(o);function o(){return r(this,o),p.apply(this,arguments)}return y(o,[{key:"show",value:function(){L.openScreen(O.CONGRATULATION_SCREEN)}},{key:"close",value:function(){L.closeScreen(O.CONGRATULATION_SCREEN)}}]),o}(ea));K._RF.pop(),K._RF.push({},"bb2dcIUQjhPDLt7B6ga20s/","ScreenLoading",void 0);(0,q.ccclass)("ScreenLoading")(function(n){i(o,n);var p=a(o);function o(){return r(this,o),p.apply(this,arguments)}return y(o,[{key:"show",value:function(n,i){var a=Number(i);L.showLoadingScreen(a)}},{key:"close",value:function(){L.closeLoadingScreen()}}]),o}(ea));K._RF.pop(),K._RF.push({},"f3a15oYustB1aev6BrFD/7Y","ScreenLose",void 0);(0,q.ccclass)("ScreenLose")(function(n){i(o,n);var p=a(o);function o(){return r(this,o),p.apply(this,arguments)}return y(o,[{key:"show",value:function(){L.openScreen(O.LOSE_SCREEN,{level:1})}},{key:"close",value:function(){L.closeScreen(O.LOSE_SCREEN)}}]),o}(ea));K._RF.pop(),K._RF.push({},"71603KupFhNAYktx1isDcrj","ScreenNotification",void 0);(0,q.ccclass)("ScreenNotification")(function(n){i(o,n);var p=a(o);function o(){return r(this,o),p.apply(this,arguments)}return y(o,[{key:"show",value:function(n,i){var a=String(i);L.showNotificationScreen(a)}},{key:"close",value:function(){L.closeNotificationScreen()}}]),o}(ea));K._RF.pop(),K._RF.push({},"1fb3eggYuVBQo5Uuzm/Nmjh","ScreenSettings",void 0);(0,q.ccclass)("ScreenSettings")(function(n){i(o,n);var p=a(o);function o(){return r(this,o),p.apply(this,arguments)}return y(o,[{key:"show",value:function(n,i){var a=String(i);L.openScreen(O.SETTINGS_SCREEN,{message:a})}},{key:"close",value:function(){L.closeScreen(O.SETTINGS_SCREEN)}}]),o}(ea));K._RF.pop(),K._RF.push({},"ae2cdksVsdJUKhhznchh9wJ","ScreenWinning",void 0);(0,q.ccclass)("ScreenWinning")(function(n){i(o,n);var p=a(o);function o(){return r(this,o),p.apply(this,arguments)}return y(o,[{key:"show",value:function(){L.openScreen(O.WINNING_SCREEN)}},{key:"close",value:function(){L.closeScreen(O.WINNING_SCREEN)}}]),o}(ea));K._RF.pop(),K._RF.push({},"abf91gNohBK7arKnziqu2PF","AnimationDemo2",void 0);var m4,m5,m7,m6,m9,m8;(0,q.ccclass)("AnimationDemo2")(function(n){i(o,n);var p=a(o);function o(){return r(this,o),p.apply(this,arguments)}return y(o,[{key:"onLoad",value:function(){}},{key:"switchToTestScene",value:function(){M.switchScene("TestScene")}}]),o}(ea));K._RF.pop(),K._RF.push({},"56b92F9LoxNs5aCgvw+tkq6","LoadingSceneTransition",void 0);var ge,gt=q.ccclass,gn=q.requireComponent,gi=q.property;m4=gt("LoadingSceneTransition"),m5=gn([X]),m7=gi([Y]),m4(m6=m5((m8=n((m9=function(n){i(l,n);var m=a(l);function l(){var n;r(this,l);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=m.call.apply(m,[this].concat(a)),p(n,"targets",m8,d(n)),n.realTargets=[],n}return y(l,[{key:"start",value:function(){for(var n=this,i=0;i<this.targets.length;i++){var a=this.targets[i];if(a){var r=Q(a);r.setParent(this.node),r.active=!1,this.realTargets.push(r)}}ei.addPersistRootNode(this.node),ei.once(eb.EVENT_BEFORE_SCENE_LAUNCH,function(){n.playFadeOutAnimationClip()})}},{key:"playFadeOutAnimationClip",value:function(){var n=this,i=0;if(this.realTargets&&0!==this.realTargets.length){var a,r=T(this.realTargets);try{for(r.s();!(a=r.n()).done;){var p=a.value;p.active=!0;var d=p.getComponent(eo);if(d)d.clips.some(function(n){return"FadeOut"===(null==n?void 0:n.name)})?(d.play("FadeOut"),d.once(eo.EventType.FINISHED,function(){++i===n.realTargets.length&&n.node.destroy()})):this.node.destroy()}}catch(n){r.e(n)}finally{r.f()}}}}]),l}(ea)).prototype,"targets",[m7],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),m6=m9))||m6);K._RF.pop(),K._RF.push({},"f3521L4Mn5I3bhxr0QZJ9y9","BackgroundMask",void 0);var ga,go,gr,gs,gl,gu,gc,gh,gp,gd,gv,gy,gf,gm,gg=q.ccclass,gb=q.requireComponent;gg("BackgroundMask")(ge=gb([ev])(ge=function(n){i(o,n);var p=a(o);function o(){return r(this,o),p.apply(this,arguments)}return y(o,[{key:"onLoad",value:function(){var n=this.getComponent(ev);n&&(this.opacity=n,this.updateMaskAlpha())}},{key:"updateMaskAlpha",value:function(){var n,i,a=this.opacity.opacity/255;n=a,(i=document.getElementById("app-mask"))&&(i.style.background="rgb(0 0 0 / ".concat(n,")"))}}]),o}(ea))||ge);K._RF.pop(),K._RF.push({},"cecf2nUBzhIWZw7uJgVliXz","CongratulationScreen",void 0);var gC,gS=q.ccclass,gk=q.property,gE=q.disallowMultiple,gw=q.requireComponent,gT=GameCore.Events,gR=globalThis.game.event;ga=gS("CongratulationScreen"),go=gw(W),gr=gk(Y),gs=gk(Y),gl=gk(en),gu=gk(en),gc=gk(en),ga(gh=gE(gh=go((gd=n((gp=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=g.call.apply(g,[this].concat(a)),p(n,"congratulation",gd,d(n)),p(n,"confirmation",gv,d(n)),p(n,"closeButtonComponent",gy,d(n)),p(n,"yesButtonComponent",gf,d(n)),p(n,"noButtonComponent",gm,d(n)),n.handleOpeningScreen=function(i){if(!n.screen)throw new Error("CongratulationScreen: screen not found");n.validateEventPayload(i)&&(n.closeButtonComponent.interactable=!0,n.yesButtonComponent.interactable=!0,n.noButtonComponent.interactable=!0)},n.handleOpenedScreen=function(i){n.validateEventPayload(i)&&n.open()},n}return y(u,[{key:"__preload",value:function(){this.enabled=!1,this.screen=this.getComponent(W),this.validateRequiredComponents(),this.listenScreenEvents()}},{key:"onDestroy",value:function(){this.unListenScreenEvents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"listenScreenEvents",value:function(){gR.on(gT.OPENING_SCREEN,this.handleOpeningScreen),gR.on(gT.OPENED_SCREEN,this.handleOpenedScreen)}},{key:"unListenScreenEvents",value:function(){gR.off(gT.OPENING_SCREEN,this.handleOpeningScreen),gR.off(gT.OPENED_SCREEN,this.handleOpenedScreen)}},{key:"validateEventPayload",value:function(n){return n.screenName===this.node.name}},{key:"open",value:function(){this.enabled&&(this.confirmation.active=!1,this.congratulation.active=!0)}},{key:"close",value:function(){this.closeButtonComponent.interactable=!1,this.yesButtonComponent.interactable=!1,this.noButtonComponent.interactable=!1,L.closeScreen(O.CONGRATULATION_SCREEN)}},{key:"handleStartOver",value:function(){this.confirmation.active=!0,this.congratulation.active=!1;var n=this.confirmation.getComponent(ev);n&&(eF(n).set({opacity:0}).to(.2,{opacity:255},{easing:"smooth"}).start(),eF(this.confirmation).set({scale:new ep(0,0,0)}).to(.2,{scale:new ep(1,1,1)},{easing:"smooth"}).start())}},{key:"handleYesStartOver",value:function(){this.close(),this.node.scene.emit(aD.START_OVER)}},{key:"handleNoStartOver",value:function(){this.close(),this.node.scene.emit(aD.GAME_REPLAY,{level:this.screen.data.level})}},{key:"handleClickedClose",value:function(){this.close(),this.node.scene.emit(aD.GAME_REPLAY,{level:this.screen.data.level})}}]),u}(ea)).prototype,"congratulation",[gr],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gv=n(gp.prototype,"confirmation",[gs],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gy=n(gp.prototype,"closeButtonComponent",[gl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gf=n(gp.prototype,"yesButtonComponent",[gu],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gm=n(gp.prototype,"noButtonComponent",[gc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gh=gp))||gh)||gh);K._RF.pop(),K._RF.push({},"61985gSEDBMY6nVNc9Q1D6W","LoadingScreen",void 0);var g_,gA,gB,gP,gL,gO,gD,gI,gN,gG,gM,gF,gz,gx,gU,gH,gj,gV,gW,gK,gq=q.ccclass,gY=q.disallowMultiple,gJ=q.requireComponent,gX=GameCore.Events,gZ=globalThis.game.event;gq("LoadingScreen")(gC=gY(gC=gJ(W)(gC=function(n){i(o,n);var p=a(o);function o(){var n;r(this,o);for(var i=arguments.length,a=new Array(i),d=0;d<i;d++)a[d]=arguments[d];return(n=p.call.apply(p,[this].concat(a))).handleOpeningScreen=function(i){n.validateEventPayload(i)&&(n.enabled=!0)},n.handleOpenedScreen=function(i){n.validateEventPayload(i)&&n.open()},n.handleClosingScreen=function(i){n.validateEventPayload(i)&&n.unscheduleAllCallbacks()},n.handleClosedScreen=function(i){n.validateEventPayload(i)&&(n.enabled=!1)},n.handleOnCloseScreen=function(){L.closeScreen(O.LOADING_SCREEN)},n}return y(o,[{key:"onLoad",value:function(){this.enabled=!1,this.screen=this.getComponent(W),this.validateRequiredComponents(),this.listenScreenEvents()}},{key:"onDestroy",value:function(){this.unListenScreenEvents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"listenScreenEvents",value:function(){gZ.on(gX.OPENING_SCREEN,this.handleOpeningScreen),gZ.on(gX.OPENED_SCREEN,this.handleOpenedScreen),gZ.on(gX.CLOSING_SCREEN,this.handleClosingScreen),gZ.on(gX.CLOSED_SCREEN,this.handleClosedScreen)}},{key:"unListenScreenEvents",value:function(){gZ.off(gX.OPENING_SCREEN,this.handleOpeningScreen),gZ.off(gX.OPENED_SCREEN,this.handleOpenedScreen),gZ.off(gX.CLOSING_SCREEN,this.handleClosingScreen),gZ.off(gX.CLOSED_SCREEN,this.handleClosedScreen)}},{key:"validateEventPayload",value:function(n){return n.screenName===this.node.name}},{key:"open",value:function(){var n;if(this.enabled){var i=null!==(n=this.screen.data.duration)&&void 0!==n?n:0;i>0&&this.scheduleOnce(this.handleOnCloseScreen,i)}}}]),o}(ea))||gC)||gC);K._RF.pop(),K._RF.push({},"15681ka+CZC45B7BdUhsnhF","LoseScreen",void 0);var gQ,g$,g0,g1,g2,g3,g4,g5,g7=q.ccclass,g6=q.property,g9=q.disallowMultiple,g8=q.requireComponent,be=GameCore.Events,bt=globalThis.game,bn=bt.language,bi=bt.event;g_=g7("LoseScreen"),gA=g8(W),gB=g6($),gP=g6(en),gL=g6(Y),gO=g6(Y),gD=g6(en),gI=g6(en),gN=g6(en),gG=g6(en),g_(gM=g9(gM=gA((gz=n((gF=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return(n=g.call.apply(g,[this].concat(a))).mode="classic",p(n,"levelText",gz,d(n)),p(n,"retryButton",gx,d(n)),p(n,"titleRibbon",gU,d(n)),p(n,"dogeHead",gH,d(n)),p(n,"retryButtonComponent",gj,d(n)),p(n,"closeButtonComponent",gV,d(n)),p(n,"endlessButtonComponent",gW,d(n)),p(n,"classicButtonComponent",gK,d(n)),n.handleOpeningScreen=function(i){if(!n.screen)throw new Error("LoseScreen: screen not found");n.validateEventPayload(i)&&(n.retryButtonComponent.interactable=!0,n.closeButtonComponent.interactable=!0,n.endlessButtonComponent.interactable=!0,n.classicButtonComponent.interactable=!0)},n.handleOpenedScreen=function(i){n.validateEventPayload(i)&&n.open()},n}return y(u,[{key:"__preload",value:function(){this.enabled=!1,this.screen=this.getComponent(W),this.validateRequiredComponents(),this.listenScreenEvents()}},{key:"onLoad",value:function(){var n=ei.getScene();this.mode=n&&n.name===x.GAME_SCENE?"classic":"endless"}},{key:"onDestroy",value:function(){this.unListenScreenEvents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"listenScreenEvents",value:function(){bi.on(be.OPENING_SCREEN,this.handleOpeningScreen),bi.on(be.OPENED_SCREEN,this.handleOpenedScreen)}},{key:"unListenScreenEvents",value:function(){bi.off(be.OPENING_SCREEN,this.handleOpeningScreen),bi.off(be.OPENED_SCREEN,this.handleOpenedScreen)}},{key:"validateEventPayload",value:function(n){return n.screenName===this.node.name}},{key:"open",value:function(){this.setLevelText(),this.resetState(),this.runOpenAnimation()}},{key:"close",value:function(){this.closeButtonComponent.interactable=!1,this.retryButtonComponent.interactable=!1,this.endlessButtonComponent.interactable=!1,this.classicButtonComponent.interactable=!1,L.closeScreen(O.LOSE_SCREEN)}},{key:"runOpenAnimation",value:function(){var n=this,i=this.createRibbonAnim(),a=this.createDogeHeadAnim(),r=this.createRetryButtonAnim();if(i&&a&&r){var p=eF({}).delay(.2).call(function(){return i.start()});if("classic"===this.mode){var d=this.createLevelAnim();if(!d)return;p.delay(.2).call(function(){return d.start()})}if(p.delay(.3).call(function(){return a.start()}).delay(.2).call(function(){return r.start()}).delay(.2),"endless"===this.mode){var y=this.createClassicButtonAnim();if(!y)return;p.call(function(){return y.start()})}else{var m=this.createEndlessButtonAnim();if(!m)return;p.call(function(){return m.start()})}p.call(function(){N.showInterstitialAdAsync({forLevel:n.screen.data.level,includeSDK:["CrazyGames"]})}).start()}}},{key:"resetState",value:function(){var n=this.retryButton.getComponent(ev),i=this.titleRibbon.getComponent(ev),a=this.levelText.getComponent(ev),r=this.dogeHead.getComponent(ev),p=this.classicButtonComponent.getComponent(ev),d=this.endlessButtonComponent.getComponent(ev);n&&i&&a&&r&&p&&d&&(n.opacity=0,i.opacity=0,a.opacity=0,r.opacity=0,p.opacity=0,d.opacity=0,this.dogeHead.setPosition(1e3,-19),this.retryButton.node.active=!1,this.classicButtonComponent.node.active=!1,this.endlessButtonComponent.node.active=!1,this.levelText.node.active=!1)}},{key:"setLevelText",value:function(){var n=this.screen.data.level,i=bn.getText("level");this.levelText.string="".concat(i," ").concat(n)}},{key:"createRibbonAnim",value:function(){var n=this.titleRibbon.getComponent(ev);return n?eF(n).set({opacity:0}).to(.3,{opacity:255},{easing:"smooth"}):null}},{key:"createLevelAnim",value:function(){var n=this.levelText.getComponent(ev);return n?(this.levelText.node.active=!0,eF(n).set({opacity:0}).to(.3,{opacity:255},{easing:"smooth"})):null}},{key:"createDogeHeadAnim",value:function(){var n=this.dogeHead.getComponent(ev);return n?(this.dogeHead.setPosition(0,-97),eF(n).set({opacity:0}).to(.3,{opacity:255},{easing:"smooth"})):null}},{key:"createRetryButtonAnim",value:function(){var n=this.retryButton.getComponent(ev);return n?(this.retryButton.node.active=!0,eF(n).set({opacity:0}).to(.4,{opacity:255},{easing:"smooth"})):null}},{key:"createClassicButtonAnim",value:function(){var n=this.classicButtonComponent.getComponent(ev);return n?(this.classicButtonComponent.node.active=!0,eF(n).set({opacity:0}).to(.4,{opacity:255},{easing:"smooth"})):null}},{key:"createEndlessButtonAnim",value:function(){var n=this.endlessButtonComponent.getComponent(ev);return n?(this.endlessButtonComponent.node.active=!0,eF(n).set({opacity:0}).to(.4,{opacity:255},{easing:"smooth"})):null}},{key:"handleClickedRetryGame",value:function(){this.close(),this.replayGame()}},{key:"handleClickedClassicMode",value:function(){this.close(),M.switchToGameScene()}},{key:"handleClickedEndlessMode",value:function(){this.close(),M.switchToEndlessScene()}},{key:"handleClickedClose",value:function(){this.close(),this.replayGame()}},{key:"replayGame",value:function(){this.node.scene.emit(aD.GAME_REPLAY,{level:this.screen.data.level})}}]),u}(ea)).prototype,"levelText",[gB],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gx=n(gF.prototype,"retryButton",[gP],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gU=n(gF.prototype,"titleRibbon",[gL],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gH=n(gF.prototype,"dogeHead",[gO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gj=n(gF.prototype,"retryButtonComponent",[gD],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gV=n(gF.prototype,"closeButtonComponent",[gI],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gW=n(gF.prototype,"endlessButtonComponent",[gN],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gK=n(gF.prototype,"classicButtonComponent",[gG],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gM=gF))||gM)||gM);K._RF.pop(),K._RF.push({},"6460akNFfhP9pDOT2Z0+s2R","NotificationScreen",void 0);var ba,bo,br,bs,bl,bu,bc,bh,bp,bd,bv,by,bf,bm,bg,bb,bC,bS,bk,bE,bw=q.ccclass,bT=q.disallowMultiple,bR=q.requireComponent,b_=q.property,bA=GameCore,bB=bA.Events,bP=bA.Utils,bL=globalThis.game.event;gQ=bw("NotificationScreen"),g$=bR(W),g0=b_($),g1=b_(en),gQ(g2=bT(g2=g$((g4=n((g3=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=g.call.apply(g,[this].concat(a)),p(n,"message",g4,d(n)),p(n,"touchZone",g5,d(n)),n.enableCloseOnTouch=!0,n.handleOpeningScreen=function(i){n.validateEventPayload(i)&&n.updateScreenData(i)},n.handleClosingScreen=function(i){n.validateEventPayload(i)&&n.unscheduleAllCallbacks()},n}return y(u,[{key:"__preload",value:function(){this.listenScreenEvents()}},{key:"onDestroy",value:function(){this.unListenScreenEvents()}},{key:"onLoad",value:function(){this.validateRequiredComponents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"listenScreenEvents",value:function(){bL.on(bB.OPENING_SCREEN,this.handleOpeningScreen),bL.on(bB.CLOSING_SCREEN,this.handleClosingScreen)}},{key:"unListenScreenEvents",value:function(){bL.off(bB.OPENING_SCREEN,this.handleOpeningScreen),bL.off(bB.CLOSING_SCREEN,this.handleClosingScreen)}},{key:"validateEventPayload",value:function(n){return n.screenName===this.node.name}},{key:"updateScreenData",value:function(n){var i=n.screenData;bP.Valid.isObject(i)&&(i.message&&(this.message.string=i.message),i.duration&&i.duration>0&&this.scheduleOnce(function(){L.closeScreen(O.NOTIFICATION_SCREEN)},i.duration),!1===i.enableCloseOnTouch?this.enableCloseOnTouch=!1:this.enableCloseOnTouch=!0)}},{key:"handleClickedClose",value:function(){this.unscheduleAllCallbacks(),L.closeScreen(O.NOTIFICATION_SCREEN)}},{key:"closeOnTouch",value:function(){this.enableCloseOnTouch&&this.handleClickedClose()}}]),u}(ea)).prototype,"message",[g0],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g5=n(g3.prototype,"touchZone",[g1],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g2=g3))||g2)||g2);K._RF.pop(),K._RF.push({},"61932YLC/5CFrE0eD0ez8Zg","SettingsScreen",void 0);var bO,bD,bI,bN,bG,bM,bF,bz,bx,bU,bH,bj,bV,bW,bK,bq,bY,bJ,bX,bZ,bQ,b$,b0,b1,b2,b3,b4=q.ccclass,b5=q.property,b7=q.requireComponent,b6=GameCore,b9=b6.Events,b8=b6.Utils,Ce=globalThis.game,Ct=Ce.player,Cn=Ce.event;ba=b4("SettingsScreen"),bo=b7(W),br=b5(Y),bs=b5(Y),bl=b5(Y),bu=b5(n6),bc=b5(n6),bh=b5(n6),bp=b5(en),bd=b5(en),ba(bv=bo((bf=n((by=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return n=g.call.apply(g,[this].concat(a)),p(n,"musicSetting",bf,d(n)),p(n,"soundSetting",bm,d(n)),p(n,"vibrateSetting",bg,d(n)),p(n,"musicSwitch",bb,d(n)),p(n,"soundSwitch",bC,d(n)),p(n,"vibrateSwitch",bS,d(n)),p(n,"closeButtonComponent",bk,d(n)),p(n,"resumeButtonComponent",bE,d(n)),n.triggerSequence="",n.handleOpeningScreen=function(i){n.validateEventPayload(i)&&(n.closeButtonComponent.interactable=!0,n.resumeButtonComponent.interactable=!0,n.updateStatus())},n.handleResetSequence=function(){n.triggerSequence=""},n.handleTriggerUnlockKey=function(i){var a=i.code,r=iW.UNLOCK_SEQUENCE;"number"==typeof a&&-1!==r.indexOf(a.toString())&&(n.triggerSequence+=a.toString(),n.triggerSequence===r&&(n.node.scene.emit(iW.Events.UNLOCK_DEV_TOOLS),n.node.off(iW.Events.TRIGGER_UNLOCK_KEY)))},n.updateVibrateButton=function(){var i=n.vibrateSetting.getComponentInChildren(en),a=n.vibrateSetting.getComponentInChildren(n6),r=n.vibrateSetting.getComponentInChildren(t6);if(i&&a&&r){if(b8.Device.isMobile()){var p,d=null!==(p=Ct.getPlayerSetting("vibrate"))&&void 0!==p&&p;a.setEnabled(d)}else i.interactable=!1,a.setEnabled(!1),r.changeState(!1)}},n}return y(u,[{key:"onLoad",value:function(){this.enabled=!1,this.screen=this.getComponent(W),this.validateRequiredComponents(),this.listenScreenEvents(),this.listenUnlockDevTools(),this.handleGameDistributionUIChanges()}},{key:"onDestroy",value:function(){this.unListenScreenEvents(),this.unListenUnlockDevTools()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"handleGameDistributionUIChanges",value:function(){if("GameDistributions"===GameSDK.getSDKName()){this.vibrateSetting.active=!1;var n=this.musicSetting.position,i=n.x,a=n.y,r=n.z;this.musicSetting.setPosition(new ep(i,a-50,r));var p=this.soundSetting.position,d=p.x,y=p.y,m=p.z;this.soundSetting.setPosition(new ep(d,y-50,m))}}},{key:"listenScreenEvents",value:function(){Cn.on(b9.OPENING_SCREEN,this.handleOpeningScreen)}},{key:"unListenScreenEvents",value:function(){Cn.off(b9.OPENING_SCREEN,this.handleOpeningScreen)}},{key:"validateEventPayload",value:function(n){return n.screenName===this.node.name}},{key:"listenUnlockDevTools",value:function(){this.node.off(iW.Events.TRIGGER_UNLOCK_KEY),this.node.on(iW.Events.TRIGGER_RESET_SEQUENCE,this.handleResetSequence),this.node.on(iW.Events.TRIGGER_UNLOCK_KEY,this.handleTriggerUnlockKey)}},{key:"unListenUnlockDevTools",value:function(){this.node.off(iW.Events.TRIGGER_RESET_SEQUENCE,this.handleResetSequence),this.node.off(iW.Events.TRIGGER_UNLOCK_KEY,this.handleTriggerUnlockKey)}},{key:"open",value:function(){this.updateStatus(),this.runPopUpAnimation(),this.node.emit(iW.Events.TRIGGER_RESET_SEQUENCE)}},{key:"close",value:function(){this.closeButtonComponent.interactable=!1,this.resumeButtonComponent.interactable=!1,this.node.emit(iW.Events.TRIGGER_RESET_SEQUENCE),L.closeScreen(O.SETTINGS_SCREEN)}},{key:"updateStatus",value:function(){var n,i,a,r={music:null!==(n=Ct.getPlayerSetting("music"))&&void 0!==n&&n,sound:null!==(i=Ct.getPlayerSetting("sound"))&&void 0!==i&&i,vibrate:null!==(a=Ct.getPlayerSetting("vibrate"))&&void 0!==a&&a};this.musicSwitch&&this.soundSwitch&&(this.musicSwitch.setEnabled(r.music),this.soundSwitch.setEnabled(r.sound),"GameDistributions"!==GameSDK.getSDKName()&&this.scheduleOnce(this.updateVibrateButton,.1))}},{key:"runPopUpAnimation",value:function(){this.screen.container}},{key:"switchMusicButton",value:function(){if(this.musicSwitch){var n=this.musicSwitch.switch();Ct.setSetting("music",n),this.node.emit(iW.Events.TRIGGER_UNLOCK_KEY,{code:n?1:0}),n?k.playMusic():k.pauseMusic()}}},{key:"switchSoundButton",value:function(){if(this.soundSwitch){var n=this.soundSwitch.switch();Ct.setSetting("sound",n),this.node.emit(iW.Events.TRIGGER_UNLOCK_KEY,{code:n?3:2})}}},{key:"switchVibrateButton",value:function(){if(this.vibrateSwitch){var n=this.vibrateSwitch.switch();Ct.setSetting("vibrate",n)}}},{key:"handleClickedResume",value:function(){this.resumeGame()}},{key:"handleClickedClose",value:function(){this.resumeGame()}},{key:"resumeGame",value:function(){this.close(),this.node.scene.emit(aD.GAME_RESUME)}}]),u}(ea)).prototype,"musicSetting",[br],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bm=n(by.prototype,"soundSetting",[bs],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bg=n(by.prototype,"vibrateSetting",[bl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bb=n(by.prototype,"musicSwitch",[bu],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bC=n(by.prototype,"soundSwitch",[bc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bS=n(by.prototype,"vibrateSwitch",[bh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bk=n(by.prototype,"closeButtonComponent",[bp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bE=n(by.prototype,"resumeButtonComponent",[bd],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bv=by))||bv);K._RF.pop(),K._RF.push({},"35c09YGmdFA4pHOJFDg1tw5","WinningScreen",void 0);var Ci=q.ccclass,Ca=q.property,Co=q.disallowMultiple,Cr=q.requireComponent,Cs=GameCore.Events,Cl=globalThis.game,Cu=Cl.player,Cc=Cl.event,Ch=Cl.language;bO=Ci("WinningScreen"),bD=Cr(W),bI=Ca(el),bN=Ca(en),bG=Ca(en),bM=Ca(Y),bF=Ca(Y),bz=Ca($),bx=Ca(en),bU=Ca(en),bH=Ca(en),bj=Ca(en),bV=Ca(en),bO(bW=Co(bW=bD((bq=n((bK=function(n){i(u,n);var g=a(u);function u(){var n;r(this,u);for(var i=arguments.length,a=new Array(i),y=0;y<i;y++)a[y]=arguments[y];return(n=g.call.apply(g,[this].concat(a))).mode="classic",p(n,"titleRibbon",bq,d(n)),p(n,"nextLevelButton",bY,d(n)),p(n,"retryLevelButton",bJ,d(n)),p(n,"confettiGroup",bX,d(n)),p(n,"dogeHead",bZ,d(n)),p(n,"levelText",bQ,d(n)),p(n,"closeButtonComponent",b$,d(n)),p(n,"nextLevelButtonComponent",b0,d(n)),p(n,"retryLevelButtonComponent",b1,d(n)),p(n,"classicButtonComponent",b2,d(n)),p(n,"endlessButtonComponent",b3,d(n)),n.starsCollected=3,n.handleOpeningScreen=function(i){if(!n.screen)throw new Error("WinningScreen: screen not found");n.validateEventPayload(i)&&(n.closeButtonComponent.interactable=!0,n.retryLevelButtonComponent.interactable=!0,n.nextLevelButtonComponent.interactable=!0,n.classicButtonComponent.interactable=!0,n.endlessButtonComponent.interactable=!0)},n.handleOpenedScreen=function(i){n.validateEventPayload(i)&&n.open()},n.handleClosingScreen=function(i){n.validateEventPayload(i)&&n.unscheduleAllCallbacks()},n}return y(u,[{key:"__preload",value:function(){this.enabled=!1,this.screen=this.getComponent(W),this.validateRequiredComponents(),this.listenScreenEvents()}},{key:"onLoad",value:function(){var n=ei.getScene();this.mode=n&&n.name===x.GAME_SCENE?"classic":"endless"}},{key:"onDestroy",value:function(){this.unListenScreenEvents()}},{key:"validateRequiredComponents",value:function(){m.lazyValidateProperties(this)}},{key:"listenScreenEvents",value:function(){Cc.on(Cs.OPENING_SCREEN,this.handleOpeningScreen),Cc.on(Cs.OPENED_SCREEN,this.handleOpenedScreen),Cc.on(Cs.CLOSING_SCREEN,this.handleClosingScreen)}},{key:"unListenScreenEvents",value:function(){Cc.off(Cs.OPENING_SCREEN,this.handleOpeningScreen),Cc.off(Cs.OPENED_SCREEN,this.handleOpenedScreen),Cc.off(Cs.CLOSING_SCREEN,this.handleClosingScreen)}},{key:"validateEventPayload",value:function(n){return n.screenName===this.node.name}},{key:"start",value:function(){var n=this;this.dogeHead.translate(new ep(-1e3,0)),this.scheduleOnce(function(){n.dogeHead.translate(new ep(1e3,0))},.1)}},{key:"open",value:function(){var n=this;this.nextLevelButton.node.active=!1,this.retryLevelButton.node.active=!1,this.classicButtonComponent.node.active=!1,this.endlessButtonComponent.node.active=!1,this.closeButtonComponent.interactable=!1,this.classicButtonComponent.interactable=!1,this.endlessButtonComponent.interactable=!1,this.confettiGroup.active=!0,this.updateLevel(),this.updateStars(),this.runRibbonAnimation();var i=this.runStarsAnimation();this.runConfetti(i),this.scheduleOnce(I(function(){var i,a,r,p;return _ts_generator(this,function(d){switch(d.label){case 0:return[4,N.showInterstitialAdAsync({forLevel:n.screen.data.level,excludeSDK:["CrazyGames"]})];case 1:d.sent(),n.nextLevelButton.node.active=!0,n.retryLevelButton.node.active=!0,n.closeButtonComponent.interactable=!0;i=n.nextLevelButton.getComponent(ev);eF(i).set({opacity:0}).to(.4,{opacity:255},{easing:"smooth"}).start();a=n.retryLevelButton.getComponent(ev);if(eF(a).set({opacity:0}).delay(.2).to(.4,{opacity:255},{easing:"smooth"}).start(),"classic"===n.mode){r=n.createEndlessButtonAnim();if(n.endlessButtonComponent.interactable=!0,!r)return[2,void 0];r.start()}else{p=n.createClassicButtonAnim();if(n.classicButtonComponent.interactable=!0,!p)return[2,void 0];p.start()}return[2]}})}),i),k.playSound(R.HAND_CLAP)}},{key:"close",value:function(){this.closeButtonComponent.interactable=!1,this.retryLevelButtonComponent.interactable=!1,this.nextLevelButtonComponent.interactable=!1,this.classicButtonComponent.interactable=!1,this.endlessButtonComponent.interactable=!1,this.confettiGroup.active=!1,L.closeScreen(O.WINNING_SCREEN)}},{key:"showCongratulationScreen",value:function(){L.openScreen(O.CONGRATULATION_SCREEN,{level:this.screen.data.level})}},{key:"handleClickedNextLevel",value:function(){var n=Cu.getGameData();if(n){var i=this.screen.data.level;if(i)i>=n.totalLevel?this.showCongratulationScreen():this.node.scene.emit(aD.NEXT_LEVEL,{level:i}),this.close()}}},{key:"handleClickedRetry",value:function(){this.close(),this.node.scene.emit(aD.GAME_REPLAY,{level:this.screen.data.level})}},{key:"handleClickedClose",value:function(){this.close();var n=this.screen.data.level;this.node.scene.emit(aD.NEXT_LEVEL,{level:n})}},{key:"updateStars",value:function(){var n;this.starsCollected=null!==(n=this.screen.data.stars)&&void 0!==n?n:0}},{key:"updateLevel",value:function(){var n=this.screen.data.level,i=Ch.getText("level");this.levelText.string="".concat(i," ").concat(n)}},{key:"runRibbonAnimation",value:function(){this.titleRibbon.fillRange=0,eF(this.titleRibbon).to(.5,{fillRange:1},{easing:"backInOut"}).start()}},{key:"runStarsAnimation",value:function(){var n=this,i=eU("Container/Stars/RightStar",this.node),a=eU("Container/Stars/LeftStar",this.node),r=eU("Container/Stars/MidStar",this.node),p=[a,r,i];if(!i||!a||!r)return 0;for(var d=0,y=p;d<y.length;d++){var m=y[d];if(m){var g=m.getChildByName("Star");g&&(g.active=!1)}}this.animateStars(p);for(var b,C=1.32,h=function(){var i=p[S];if(!i)return{v:0};var a=i.getChildByName("Star");if(!a)return{v:0};n.scheduleOnce(function(){a.active=!0,k.playSound(R.STAR_RAISE)},C),eF(a).set({scale:new ep(1.7,1.7,1)}).delay(C).to(.35,{scale:new ep(1,1,1)},{easing:"backOut"}).start(),C+=.3},S=0;S<this.starsCollected;S++)if(b=h())return b.v;return C}},{key:"animateStars",value:function(n){for(var i=0;i<n.length;i++){var a=n[i];if(!a)return;var r=new ep(0,0,1),p=new ep(1,1,1);1===i&&p.set(1.2,1.2,1),eF(a).set({scale:r}).delay(.7).to(.4,{scale:p},{easing:"backOut"}).start()}}},{key:"createClassicButtonAnim",value:function(){var n=this.classicButtonComponent.getComponent(ev);return n?(this.classicButtonComponent.node.active=!0,eF(n).set({opacity:0}).delay(.4).to(.4,{opacity:255},{easing:"smooth"})):null}},{key:"createEndlessButtonAnim",value:function(){var n=this.endlessButtonComponent.getComponent(ev);return n?(this.endlessButtonComponent.node.active=!0,eF(n).set({opacity:0}).delay(.4).to(.4,{opacity:255},{easing:"smooth"})):null}},{key:"runConfetti",value:function(n){var i=this;this.stopConfetti();var a=this.confettiGroup.getComponentsInChildren(te);this.scheduleOnce(function(){if(!1!==i.node.active){var n,r=T(a);try{for(r.s();!(n=r.n()).done;)n.value.resetSystem()}catch(n){r.e(n)}finally{r.f()}}},n)}},{key:"stopConfetti",value:function(){var n,i=this.confettiGroup.getComponentsInChildren(te),a=T(i);try{for(a.s();!(n=a.n()).done;)n.value.stopSystem()}catch(n){a.e(n)}finally{a.f()}}},{key:"handleClickedClassicMode",value:function(){this.close(),M.switchToGameScene()}},{key:"handleClickedEndlessMode",value:function(){this.updatePlayerLevelProgress(),this.close(),M.switchToEndlessScene()}},{key:"updatePlayerLevelProgress",value:function(){var n=Cu.getGameData();if(n){var i=this.screen.data.level;if(i)i>=n.totalLevel||this.node.scene.emit(aD.UPDATE_LEVEL,{level:i})}}}]),u}(ea)).prototype,"titleRibbon",[bI],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bY=n(bK.prototype,"nextLevelButton",[bN],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bJ=n(bK.prototype,"retryLevelButton",[bG],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bX=n(bK.prototype,"confettiGroup",[bM],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bZ=n(bK.prototype,"dogeHead",[bF],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bQ=n(bK.prototype,"levelText",[bz],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b$=n(bK.prototype,"closeButtonComponent",[bx],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b0=n(bK.prototype,"nextLevelButtonComponent",[bU],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b1=n(bK.prototype,"retryLevelButtonComponent",[bH],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b2=n(bK.prototype,"classicButtonComponent",[bj],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b3=n(bK.prototype,"endlessButtonComponent",[bV],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bW=bK))||bW)||bW);K._RF.pop()}}});(function(n){n("virtual:///prerequisite-imports/main","chunks:///main.js")})(function(n,i){System.register(n,[i],function(n,i){return{setters:[function(i){var a={};for(var r in i)if("default"!==r&&"__esModule"!==r)a[r]=i[r];n(a)}],execute:function(){}}})});