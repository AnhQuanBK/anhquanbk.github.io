System.register(["./core.js"],function(u,k){"use strict";var l;return{setters:[i=>{l=i.G}],execute:function(){const{Configs:i,Utils:P}=l,{AvatarUrl:g,ErrorRate:y,RandomDelayMs:p}=i.Mockup.Profile,{String:M,Valid:w,Browser:c,Time:D}=P,d="ProfilesMockKey",f=["player","người chơi","玩家","игрок","プレーヤー","플레이어","παίχτης","ຜູ້​ຫຼິ້ນ","ကစားသမား"];class S{async getPlayersAsync(e){if(await this.awaitRandomDelay(),this.randomResponseError("Get players error"))return{data:[]};const r=[],t=this.getProfilesData(),{playerIds:s}=e;for(const a of s){let o=t[a];o||(o=this.createProfile(a)),r.push(o)}return{data:r}}createProfile(e){const r=M.generateObjectId();let t=this.randomName(r),s=this.randomPhoto(r),a=this.randomScore(),o=this.randomLevel();const{player:m}=window.game;if(e===m.getPlayerId()){const n=m.getPlayer();t=n.name,s=n.photo,a=n.data.score,o=n.data.gameData.level}const h={_id:r,playerId:e,name:t,photo:s,score:a,level:o};return this.writeProfilesData({[e]:h}),h}randomName(e){const r=Math.floor(Math.random()*f.length);return`${f[r]} ${e.substr(-5,5)}`}randomPhoto(e){return g.replace("%1",e)}randomScore(){return Math.floor(Math.random()*100)}randomLevel(){return Math.floor(Math.random()*10)}getProfilesData(){const e=c.getLocalStorage(d);return w.isObject(e)?e:{}}writeProfilesData(e){const t={...this.getProfilesData(),...e};c.writeLocalStorage(d,t)}randomResponseError(e){return Math.random()*100<y?(console.warn("[ProfileAPIMock]",e),!0):!1}async awaitRandomDelay(){await D.sleepAsync(Math.random()*p)}}u("default",S)}}});
