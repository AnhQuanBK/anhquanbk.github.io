var L=Object.defineProperty;var m=(i,f)=>L(i,"name",{value:f,configurable:!0});System.register(["./core.js"],function(i,f){"use strict";var h;return{setters:[l=>{h=l.G}],execute:m(function(){const{Configs:l,Utils:M}=h,{AvatarUrl:w,ErrorRate:D,RandomDelayMs:S}=l.Mockup.Profile,{String:v,Valid:R,Browser:u,Time:E}=M,g="ProfilesMockKey",y=["player","người chơi","玩家","игрок","プレーヤー","플레이어","παίχτης","ຜູ້​ຫຼິ້ນ","ကစားသမား"],d=class d{async getPlayersAsync(e){if(await this.awaitRandomDelay(),this.randomResponseError("Get players error"))return{data:[]};const r=[],t=this.getProfilesData(),{playerIds:s}=e;for(const o of s){let a=t[o];a||(a=this.createProfile(o)),r.push(a)}return{data:r}}createProfile(e){const r=v.generateObjectId();let t=this.randomName(r),s=this.randomPhoto(r),o=this.randomScore(),a=this.randomLevel();const{player:p}=window.game;if(e===p.getPlayerId()){const n=p.getPlayer();t=n.name,s=n.photo,o=n.data.score,a=n.data.gameData.level}const P={_id:r,playerId:e,name:t,photo:s,score:o,level:a};return this.writeProfilesData({[e]:P}),P}randomName(e){const r=Math.floor(Math.random()*y.length);return`${y[r]} ${e.substr(-5,5)}`}randomPhoto(e){return w.replace("%1",e)}randomScore(){return Math.floor(Math.random()*100)}randomLevel(){return Math.floor(Math.random()*10)}getProfilesData(){const e=u.getLocalStorage(g);return R.isObject(e)?e:{}}writeProfilesData(e){const t={...this.getProfilesData(),...e};u.writeLocalStorage(g,t)}randomResponseError(e){return Math.random()*100<D?(console.warn("[ProfileAPIMock]",e),!0):!1}async awaitRandomDelay(){await E.sleepAsync(Math.random()*S)}};m(d,"ProfileAPIMock");let c=d;i("default",c)},"execute")}});
