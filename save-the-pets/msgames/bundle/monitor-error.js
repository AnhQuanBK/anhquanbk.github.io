var Hr=Object.defineProperty;var qr=(D,$,F)=>$ in D?Hr(D,$,{enumerable:!0,configurable:!0,writable:!0,value:F}):D[$]=F;var S=(D,$,F)=>qr(D,typeof $!="symbol"?$+"":$,F);System.register(["./core.js"],function(D,$){"use strict";var F,Me,Te;return{setters:[j=>{F=j.P,Me=j._,Te=j.G}],execute:function(){D("g",j);function j(T){return T&&T.__esModule&&Object.prototype.hasOwnProperty.call(T,"default")?T.default:T}var Le={exports:{}};(function(T,d){(function(c){T.exports=c()})(function(){var c=["navigation","request","process","log","user","state","error","manual"],p=function(e,t,n){for(var r=n,a=0,o=e.length;a<o;a++)r=t(r,e[a],a,e);return r},m=function(e,t){return p(e,function(n,r,a,o){return t(r,a,o)?n.concat(r):n},[])},E=function(e,t){return p(e,function(n,r,a,o){return n===!0||r===t},!1)},C=function(e){return Object.prototype.toString.call(e)==="[object Array]"},Q=!{toString:null}.propertyIsEnumerable("toString"),z=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],L=function(e){var t=[],n;for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);if(!Q)return t;for(var r=0,a=z.length;r<a;r++)Object.prototype.hasOwnProperty.call(e,z[r])&&t.push(z[r]);return t},$e=function(e,t){return e===void 0&&(e=1),function(n){return typeof n=="number"&&parseInt(""+n,10)===n&&n>=e&&n<=t}},de=function(e){return typeof e=="function"||C(e)&&m(e,function(t){return typeof t=="function"}).length===e.length},G=function(e){return typeof e=="string"&&!!e.length},Z={},De=function(){return{unhandledExceptions:!0,unhandledRejections:!0}};Z.schema={apiKey:{defaultValue:function(){return null},message:"is required",validate:G},appVersion:{defaultValue:function(){},message:"should be a string",validate:function(e){return e===void 0||G(e)}},appType:{defaultValue:function(){},message:"should be a string",validate:function(e){return e===void 0||G(e)}},autoDetectErrors:{defaultValue:function(){return!0},message:"should be true|false",validate:function(e){return e===!0||e===!1}},enabledErrorTypes:{defaultValue:function(){return De()},message:"should be an object containing the flags { unhandledExceptions:true|false, unhandledRejections:true|false }",allowPartialObject:!0,validate:function(e){if(typeof e!="object"||!e)return!1;var t=L(e),n=L(De());return!(m(t,function(r){return E(n,r)}).length<t.length||m(L(e),function(r){return typeof e[r]!="boolean"}).length>0)}},onError:{defaultValue:function(){return[]},message:"should be a function or array of functions",validate:de},onSession:{defaultValue:function(){return[]},message:"should be a function or array of functions",validate:de},onBreadcrumb:{defaultValue:function(){return[]},message:"should be a function or array of functions",validate:de},endpoints:{defaultValue:function(e){return typeof e>"u"?{notify:"https://notify.bugsnag.com",sessions:"https://sessions.bugsnag.com"}:{notify:null,sessions:null}},message:"should be an object containing endpoint URLs { notify, sessions }",validate:function(e){return e&&typeof e=="object"&&G(e.notify)&&G(e.sessions)&&m(L(e),function(t){return!E(["notify","sessions"],t)}).length===0}},autoTrackSessions:{defaultValue:function(e){return!0},message:"should be true|false",validate:function(e){return e===!0||e===!1}},enabledReleaseStages:{defaultValue:function(){return null},message:"should be an array of strings",validate:function(e){return e===null||C(e)&&m(e,function(t){return typeof t=="string"}).length===e.length}},releaseStage:{defaultValue:function(){return"production"},message:"should be a string",validate:function(e){return typeof e=="string"&&e.length}},maxBreadcrumbs:{defaultValue:function(){return 25},message:"should be a number â‰¤100",validate:function(e){return $e(0,100)(e)}},enabledBreadcrumbTypes:{defaultValue:function(){return c},message:"should be null or a list of available breadcrumb types ("+c.join(",")+")",validate:function(e){return e===null||C(e)&&p(e,function(t,n){return t===!1?t:E(c,n)},!0)}},context:{defaultValue:function(){},message:"should be a string",validate:function(e){return e===void 0||typeof e=="string"}},user:{defaultValue:function(){return{}},message:"should be an object with { id, email, name } properties",validate:function(e){return e===null||e&&p(L(e),function(t,n){return t&&E(["id","email","name"],n)},!0)}},metadata:{defaultValue:function(){return{}},message:"should be an object",validate:function(e){return typeof e=="object"&&e!==null}},logger:{defaultValue:function(){},message:"should be null or an object with methods { debug, info, warn, error }",validate:function(e){return!e||e&&p(["debug","info","warn","error"],function(t,n){return t&&typeof e[n]=="function"},!0)}},redactedKeys:{defaultValue:function(){return["password"]},message:"should be an array of strings|regexes",validate:function(e){return C(e)&&e.length===m(e,function(t){return typeof t=="string"||t&&typeof t.test=="function"}).length}},plugins:{defaultValue:function(){return[]},message:"should be an array of plugin objects",validate:function(e){return C(e)&&e.length===m(e,function(t){return t&&typeof t=="object"&&typeof t.load=="function"}).length}},featureFlags:{defaultValue:function(){return[]},message:'should be an array of objects that have a "name" property',validate:function(e){return C(e)&&e.length===m(e,function(t){return t&&typeof t=="object"&&typeof t.name=="string"}).length}}};var w=function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},M=function(e,t){return p(e,function(n,r,a,o){return n.concat(t(r,a,o))},[])};function le(){return le=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},le.apply(this,arguments)}var fe=Z.schema,xt={releaseStage:w({},fe.releaseStage,{defaultValue:function(){return/^localhost(:\d+)?$/.test(window.location.host)?"development":"production"}}),appType:le({},fe.appType,{defaultValue:function(){return"browser"}}),logger:w({},fe.logger,{defaultValue:function(){return typeof console<"u"&&typeof console.debug=="function"?Pt():void 0}})},Pt=function(){var e={},t=console.log;return M(["debug","info","warn","error"],function(n){var r=console[n];e[n]=typeof r=="function"?r.bind(console,"[bugsnag]"):t.bind(console,"[bugsnag]")}),e},wt=function(){function e(n,r,a,o){o===void 0&&(o=new Date),this.type=a,this.message=n,this.metadata=r,this.timestamp=o}var t=e.prototype;return t.toJSON=function(){return{type:this.type,name:this.message,timestamp:this.timestamp,metaData:this.metadata}},e}(),he=wt,ee={};(function(e,t){typeof ee=="object"?ee=t():e.StackFrame=t()})(this,function(){function e(l){return!isNaN(parseFloat(l))&&isFinite(l)}function t(l){return l.charAt(0).toUpperCase()+l.substring(1)}function n(l){return function(){return this[l]}}var r=["isConstructor","isEval","isNative","isToplevel"],a=["columnNumber","lineNumber"],o=["fileName","functionName","source"],i=["args"],u=r.concat(a,o,i);function s(l){if(l instanceof Object)for(var v=0;v<u.length;v++)l.hasOwnProperty(u[v])&&l[u[v]]!==void 0&&this["set"+t(u[v])](l[u[v]])}s.prototype={getArgs:function(){return this.args},setArgs:function(l){if(Object.prototype.toString.call(l)!=="[object Array]")throw new TypeError("Args must be an Array");this.args=l},getEvalOrigin:function(){return this.evalOrigin},setEvalOrigin:function(l){if(l instanceof s)this.evalOrigin=l;else if(l instanceof Object)this.evalOrigin=new s(l);else throw new TypeError("Eval Origin must be an Object or StackFrame")},toString:function(){var l=this.getFunctionName()||"{anonymous}",v="("+(this.getArgs()||[]).join(",")+")",y=this.getFileName()?"@"+this.getFileName():"",k=e(this.getLineNumber())?":"+this.getLineNumber():"",_=e(this.getColumnNumber())?":"+this.getColumnNumber():"";return l+v+y+k+_}};for(var h=0;h<r.length;h++)s.prototype["get"+t(r[h])]=n(r[h]),s.prototype["set"+t(r[h])]=function(l){return function(v){this[l]=!!v}}(r[h]);for(var f=0;f<a.length;f++)s.prototype["get"+t(a[f])]=n(a[f]),s.prototype["set"+t(a[f])]=function(l){return function(v){if(!e(v))throw new TypeError(l+" must be a Number");this[l]=Number(v)}}(a[f]);for(var g=0;g<o.length;g++)s.prototype["get"+t(o[g])]=n(o[g]),s.prototype["set"+t(o[g])]=function(l){return function(v){this[l]=String(v)}}(o[g]);return s});var pe={};(function(e,t){typeof pe=="object"?pe=t(ee):e.ErrorStackParser=t(e.StackFrame)})(this,function(t){var n=/(^|@)\S+\:\d+/,r=/^\s*at .*(\S+\:\d+|\(native\))/m,a=/^(eval@)?(\[native code\])?$/;return{parse:function(i){if(typeof i.stacktrace<"u"||typeof i["opera#sourceloc"]<"u")return this.parseOpera(i);if(i.stack&&i.stack.match(r))return this.parseV8OrIE(i);if(i.stack)return this.parseFFOrSafari(i);throw new Error("Cannot parse given Error object")},extractLocation:function(i){if(i.indexOf(":")===-1)return[i];var u=/(.+?)(?:\:(\d+))?(?:\:(\d+))?$/,s=u.exec(i.replace(/[\(\)]/g,""));return[s[1],s[2]||void 0,s[3]||void 0]},parseV8OrIE:function(i){var u=i.stack.split(`
`).filter(function(s){return!!s.match(r)},this);return u.map(function(s){s.indexOf("(eval ")>-1&&(s=s.replace(/eval code/g,"eval").replace(/(\(eval at [^\()]*)|(\)\,.*$)/g,""));var h=s.replace(/^\s+/,"").replace(/\(eval code/g,"("),f=h.match(/ (\((.+):(\d+):(\d+)\)$)/);h=f?h.replace(f[0],""):h;var g=h.split(/\s+/).slice(1),l=this.extractLocation(f?f[1]:g.pop()),v=g.join(" ")||void 0,y=["eval","<anonymous>"].indexOf(l[0])>-1?void 0:l[0];return new t({functionName:v,fileName:y,lineNumber:l[1],columnNumber:l[2],source:s})},this)},parseFFOrSafari:function(i){var u=i.stack.split(`
`).filter(function(s){return!s.match(a)},this);return u.map(function(s){if(s.indexOf(" > eval")>-1&&(s=s.replace(/ line (\d+)(?: > eval line \d+)* > eval\:\d+\:\d+/g,":$1")),s.indexOf("@")===-1&&s.indexOf(":")===-1)return new t({functionName:s});var h=/((.*".+"[^@]*)?[^@]*)(?:@)/,f=s.match(h),g=f&&f[1]?f[1]:void 0,l=this.extractLocation(s.replace(h,""));return new t({functionName:g,fileName:l[0],lineNumber:l[1],columnNumber:l[2],source:s})},this)},parseOpera:function(i){return!i.stacktrace||i.message.indexOf(`
`)>-1&&i.message.split(`
`).length>i.stacktrace.split(`
`).length?this.parseOpera9(i):i.stack?this.parseOpera11(i):this.parseOpera10(i)},parseOpera9:function(i){for(var u=/Line (\d+).*script (?:in )?(\S+)/i,s=i.message.split(`
`),h=[],f=2,g=s.length;f<g;f+=2){var l=u.exec(s[f]);l&&h.push(new t({fileName:l[2],lineNumber:l[1],source:s[f]}))}return h},parseOpera10:function(i){for(var u=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,s=i.stacktrace.split(`
`),h=[],f=0,g=s.length;f<g;f+=2){var l=u.exec(s[f]);l&&h.push(new t({functionName:l[3]||void 0,fileName:l[2],lineNumber:l[1],source:s[f]}))}return h},parseOpera11:function(i){var u=i.stack.split(`
`).filter(function(s){return!!s.match(n)&&!s.match(/^Error created at/)},this);return u.map(function(s){var h=s.split("@"),f=this.extractLocation(h.pop()),g=h.shift()||"",l=g.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^\)]*\)/g,"")||void 0,v;g.match(/\(([^\)]*)\)/)&&(v=g.replace(/^[^\(]+\(([^\)]*)\)$/,"$1"));var y=v===void 0||v==="[arguments not available]"?void 0:v.split(",");return new t({functionName:l,args:y,fileName:f[0],lineNumber:f[1],columnNumber:f[2],source:s})},this)}}});var Ae=pe,te=function(e,t,n,r){var a=r&&r.redactedKeys?r.redactedKeys:[],o=r&&r.redactedPaths?r.redactedPaths:[];return JSON.stringify(It(e,a,o),t,n)},Bt=20,Nt=25e3,Mt=8,re="...";function Tt(e){return e instanceof Error||/^\[object (Error|(Dom)?Exception)\]$/.test(Object.prototype.toString.call(e))}function Ie(e){return"[Throws: "+(e?e.message:"?")+"]"}function Lt(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return!0;return!1}function Ct(e,t){for(var n=0,r=e.length;n<r;n++)if(t.indexOf(e[n])===0)return!0;return!1}function $t(e,t){for(var n=0,r=e.length;n<r;n++)if(typeof e[n]=="string"&&e[n].toLowerCase()===t.toLowerCase()||e[n]&&typeof e[n].test=="function"&&e[n].test(t))return!0;return!1}function Dt(e){return Object.prototype.toString.call(e)==="[object Array]"}function At(e,t){try{return e[t]}catch(n){return Ie(n)}}function It(e,t,n){var r=[],a=0;function o(i,u){function s(){return u.length>Mt&&a>Nt}if(a++,u.length>Bt||s())return re;if(i===null||typeof i!="object")return i;if(Lt(r,i))return"[Circular]";if(r.push(i),typeof i.toJSON=="function")try{a--;var h=o(i.toJSON(),u);return r.pop(),h}catch(b){return Ie(b)}var f=Tt(i);if(f){a--;var g=o({name:i.name,message:i.message},u);return r.pop(),g}if(Dt(i)){for(var l=[],v=0,y=i.length;v<y;v++){if(s()){l.push(re);break}l.push(o(i[v],u.concat("[]")))}return r.pop(),l}var k={};try{for(var _ in i)if(Object.prototype.hasOwnProperty.call(i,_)){if(Ct(n,u.join("."))&&$t(t,_)){k[_]="[REDACTED]";continue}if(s()){k[_]=re;break}k[_]=o(At(i,_),u.concat(_))}}catch{}return r.pop(),k}return o(e,[])}function Re(e,t,n,r){if(typeof n=="string"){r===void 0?r=null:r!==null&&typeof r!="string"&&(r=te(r));var a=t[n];if(typeof a=="number"){e[a]={name:n,variant:r};return}e.push({name:n,variant:r}),t[n]=e.length-1}}function Rt(e,t,n){if(C(t)){for(var r=0;r<t.length;++r){var a=t[r];a===null||typeof a!="object"||Re(e,n,a.name,a.variant)}return e}}function Ft(e){return M(m(e,Boolean),function(t){var n=t.name,r=t.variant,a={featureFlag:n};return typeof r=="string"&&(a.variant=r),a})}function jt(e,t,n){var r=t[n];typeof r=="number"&&(e[r]=null,delete t[n])}var H={add:Re,clear:jt,merge:Rt,toEventApi:Ft},ne=function(e){return!!e&&(!!e.stack||!!e.stacktrace||!!e["opera#sourceloc"])&&typeof(e.stack||e.stacktrace||e["opera#sourceloc"])=="string"&&e.stack!==e.name+": "+e.message},Ht=qt;function qt(e){switch(Object.prototype.toString.call(e)){case"[object Error]":return!0;case"[object Exception]":return!0;case"[object DOMException]":return!0;default:return e instanceof Error}}var ae=Ht,Vt=function(e,t,n,r){var a;if(t){var o;if(n===null)return Fe(e,t);typeof n=="object"&&(o=n),typeof n=="string"&&(o=(a={},a[n]=r,a)),o&&(t==="__proto__"||t==="constructor"||t==="prototype"||(e[t]||(e[t]={}),e[t]=w({},e[t],o)))}},Ut=function(e,t,n){if(typeof t=="string"){if(!n)return e[t];if(e[t])return e[t][n]}},Fe=function(e,t,n){if(typeof t=="string"){if(!n){delete e[t];return}t==="__proto__"||t==="constructor"||t==="prototype"||e[t]&&delete e[t][n]}},U={add:Vt,get:Ut,clear:Fe},ge={};(function(e,t){typeof ge=="object"?ge=t(ee):e.StackGenerator=t(e.StackFrame)})(this,function(e){return{backtrace:function(n){var r=[],a=10;typeof n=="object"&&typeof n.maxStackSize=="number"&&(a=n.maxStackSize);for(var o=arguments.callee;o&&r.length<a&&o.arguments;){for(var i=new Array(o.arguments.length),u=0;u<i.length;++u)i[u]=o.arguments[u];/function(?:\s+([\w$]+))+\s*\(/.test(o.toString())?r.push(new e({functionName:RegExp.$1||void 0,args:i})):r.push(new e({args:i}));try{o=o.caller}catch{break}}return r}}});function _e(){return _e=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_e.apply(this,arguments)}var A=function(){function e(n,r,a,o,i){a===void 0&&(a=[]),o===void 0&&(o=zt()),this.apiKey=void 0,this.context=void 0,this.groupingHash=void 0,this.originalError=i,this._handledState=o,this.severity=this._handledState.severity,this.unhandled=this._handledState.unhandled,this.app={},this.device={},this.request={},this.breadcrumbs=[],this.threads=[],this._metadata={},this._features=[],this._featuresIndex={},this._user={},this._session=void 0,this._correlation=void 0,this.errors=[He(n,r,e.__type,a)]}var t=e.prototype;return t.addMetadata=function(r,a,o){return U.add(this._metadata,r,a,o)},t.setTraceCorrelation=function(r,a){typeof r=="string"&&(this._correlation=_e({traceId:r},typeof a=="string"?{spanId:a}:{}))},t.getMetadata=function(r,a){return U.get(this._metadata,r,a)},t.clearMetadata=function(r,a){return U.clear(this._metadata,r,a)},t.addFeatureFlag=function(r,a){a===void 0&&(a=null),H.add(this._features,this._featuresIndex,r,a)},t.addFeatureFlags=function(r){H.merge(this._features,r,this._featuresIndex)},t.getFeatureFlags=function(){return H.toEventApi(this._features)},t.clearFeatureFlag=function(r){H.clear(this._features,this._featuresIndex,r)},t.clearFeatureFlags=function(){this._features=[],this._featuresIndex={}},t.getUser=function(){return this._user},t.setUser=function(r,a,o){this._user={id:r,email:a,name:o}},t.toJSON=function(){return{payloadVersion:"4",exceptions:M(this.errors,function(r){return w({},r,{message:r.errorMessage})}),severity:this.severity,unhandled:this._handledState.unhandled,severityReason:this._handledState.severityReason,app:this.app,device:this.device,request:this.request,breadcrumbs:this.breadcrumbs,context:this.context,groupingHash:this.groupingHash,metaData:this._metadata,user:this._user,session:this._session,featureFlags:this.getFeatureFlags(),correlation:this._correlation}},e}(),Kt=function(e){var t={file:e.fileName,method:Xt(e.functionName),lineNumber:e.lineNumber,columnNumber:e.columnNumber,code:void 0,inProject:void 0};return t.lineNumber>-1&&!t.file&&!t.method&&(t.file="global code"),t},Xt=function(e){return/^global code$/i.test(e)?"global code":e},zt=function(){return{unhandled:!1,severity:"warning",severityReason:{type:"handledException"}}},je=function(e){return typeof e=="string"?e:""};function He(e,t,n,r){return{errorClass:je(e),errorMessage:je(t),type:n,stacktrace:p(r,function(a,o){var i=Kt(o);try{return JSON.stringify(i)==="{}"?a:a.concat(i)}catch{return a}},[])}}function qe(e){return e.cause?[e].concat(qe(e.cause)):[e]}A.getStacktrace=function(e,t,n){if(ne(e))return Ae.parse(e).slice(t);try{return m(ge.backtrace(),function(r){return(r.functionName||"").indexOf("StackGenerator$$")===-1}).slice(1+n)}catch{return[]}},A.create=function(e,t,n,r,a,o){a===void 0&&(a=0);var i=Ue(e,t,r,o),u=i[0],s=i[1],h;try{var f=A.getStacktrace(u,s>0?1+s+a:0,1+a);h=new A(u.name,u.message,f,n,e)}catch{h=new A(u.name,u.message,[],n,e)}if(u.name==="InvalidError"&&h.addMetadata(""+r,"non-error parameter",Ve(e)),u.cause){var g,l=qe(u).slice(1),v=M(l,function(y){var k=ae(y)&&ne(y)?Ae.parse(y):[],_=Ue(y,!0,"error cause"),b=_[0];return b.name==="InvalidError"&&h.addMetadata("error cause",Ve(y)),He(b.name,b.message,A.__type,k)});(g=h.errors).push.apply(g,v)}return h};var Ve=function(e){return e===null?"null":e===void 0?"undefined":e},Ue=function(e,t,n,r){var a,o=0,i=function(u){var s=n==="error cause"?"was":"received";r&&r.warn(n+" "+s+' a non-error: "'+u+'"');var h=new Error(n+" "+s+' a non-error. See "'+n+'" tab for more detail.');return h.name="InvalidError",h};if(!t)ae(e)?a=e:(a=i(typeof e),o+=2);else switch(typeof e){case"string":case"number":case"boolean":a=new Error(String(e)),o+=1;break;case"function":a=i("function"),o+=2;break;case"object":e!==null&&ae(e)?a=e:e!==null&&Gt(e)?(a=new Error(e.message||e.errorMessage),a.name=e.name||e.errorClass,o+=1):(a=i(e===null?"null":"unsupported object"),o+=2);break;default:a=i("nothing"),o+=2}if(!ne(a))try{throw a}catch(u){ne(u)&&(a=u,o=1)}return[a,o]};A.__type="browserjs";var Gt=function(e){return(typeof e.name=="string"||typeof e.errorClass=="string")&&(typeof e.message=="string"||typeof e.errorMessage=="string")},ve=A,Jt=function(e,t,n){var r=0,a=function(){if(r>=e.length)return n(null,!0);t(e[r],function(o,i){if(o)return n(o);if(i===!1)return n(null,!1);r++,a()})};a()},Wt=function(e,t,n,r){var a=function(o,i){if(typeof o!="function")return i(null);try{if(o.length!==2){var u=o(t);return u&&typeof u.then=="function"?u.then(function(s){return setTimeout(function(){return i(null,s)})},function(s){setTimeout(function(){return n(s),i(null,!0)})}):i(null,u)}o(t,function(s,h){if(s)return n(s),i(null);i(null,h)})}catch(s){n(s),i(null)}};Jt(e,a,r)},Ke=function(e,t,n,r){for(var a=!1,o=e.slice();!a&&o.length;)try{a=o.pop()(t)===!1}catch(i){r.error("Error occurred in "+n+" callback, continuing anywayâ€¦"),r.error(i)}return a},me=function(t,n){var r="000000000"+t;return r.substr(r.length-n)},Xe=typeof window=="object"?window:self,ze=0;for(var Yt in Xe)Object.hasOwnProperty.call(Xe,Yt)&&ze++;var Qt=navigator.mimeTypes?navigator.mimeTypes.length:0,Zt=me((Qt+navigator.userAgent.length).toString(36)+ze.toString(36),4),Ge=function(){return Zt},J=0,be=4,ie=36,Je=Math.pow(ie,be);function We(){return me((Math.random()*Je<<0).toString(ie),be)}function er(){return J=J<Je?J:0,J++,J-1}function Ye(){var e="c",t=new Date().getTime().toString(ie),n=me(er().toString(ie),be),r=Ge(),a=We()+We();return e+t+n+r+a}Ye.fingerprint=Ge;var tr=Ye,rr=function(){function e(){this.id=tr(),this.startedAt=new Date,this._handled=0,this._unhandled=0,this._user={},this.app={},this.device={}}var t=e.prototype;return t.getUser=function(){return this._user},t.setUser=function(r,a,o){this._user={id:r,email:a,name:o}},t.toJSON=function(){return{id:this.id,startedAt:this.startedAt,events:{handled:this._handled,unhandled:this._unhandled}}},t._track=function(r){this[r._handledState.unhandled?"_unhandled":"_handled"]+=1},e}(),ye=rr,nr=H.add,ar=H.clear,Se=H.merge,I=function(){},ir=function(){function e(n,r,a,o){var i=this;r===void 0&&(r=Z.schema),a===void 0&&(a=[]),this._notifier=o,this._config={},this._schema=r,this._delivery={sendSession:I,sendEvent:I},this._logger={debug:I,info:I,warn:I,error:I},this._plugins={},this._breadcrumbs=[],this._session=null,this._metadata={},this._featuresIndex={},this._features=[],this._context=void 0,this._user={},this._cbs={e:[],s:[],sp:[],b:[]},this.Client=e,this.Event=ve,this.Breadcrumb=he,this.Session=ye,this._config=this._configure(n,a),M(a.concat(this._config.plugins),function(h){h&&i._loadPlugin(h)}),this._depth=1;var u=this,s=this.notify;this.notify=function(){return s.apply(u,arguments)}}var t=e.prototype;return t.addMetadata=function(r,a,o){return U.add(this._metadata,r,a,o)},t.getMetadata=function(r,a){return U.get(this._metadata,r,a)},t.clearMetadata=function(r,a){return U.clear(this._metadata,r,a)},t.addFeatureFlag=function(r,a){a===void 0&&(a=null),nr(this._features,this._featuresIndex,r,a)},t.addFeatureFlags=function(r){Se(this._features,r,this._featuresIndex)},t.clearFeatureFlag=function(r){ar(this._features,this._featuresIndex,r)},t.clearFeatureFlags=function(){this._features=[],this._featuresIndex={}},t.getContext=function(){return this._context},t.setContext=function(r){this._context=r},t._configure=function(r,a){var o=p(a,function(h,f){return f&&f.configSchema?w({},h,f.configSchema):h},this._schema),i=p(L(o),function(h,f){var g=o[f].defaultValue(r[f]);if(r[f]!==void 0){var l=o[f].validate(r[f]);l?o[f].allowPartialObject?h.config[f]=w(g,r[f]):h.config[f]=r[f]:(h.errors[f]=o[f].message,h.config[f]=g)}else h.config[f]=g;return h},{errors:{},config:{}}),u=i.errors,s=i.config;if(o.apiKey){if(!s.apiKey)throw new Error("No Bugsnag API Key set");/^[0-9a-f]{32}$/i.test(s.apiKey)||(u.apiKey="should be a string of 32 hexadecimal characters")}return this._metadata=w({},s.metadata),Se(this._features,s.featureFlags,this._featuresIndex),this._user=w({},s.user),this._context=s.context,s.logger&&(this._logger=s.logger),s.onError&&(this._cbs.e=this._cbs.e.concat(s.onError)),s.onBreadcrumb&&(this._cbs.b=this._cbs.b.concat(s.onBreadcrumb)),s.onSession&&(this._cbs.s=this._cbs.s.concat(s.onSession)),L(u).length&&this._logger.warn(or(u,r)),s},t.getUser=function(){return this._user},t.setUser=function(r,a,o){this._user={id:r,email:a,name:o}},t._loadPlugin=function(r){var a=r.load(this);r.name&&(this._plugins["~"+r.name+"~"]=a)},t.getPlugin=function(r){return this._plugins["~"+r+"~"]},t._setDelivery=function(r){this._delivery=r(this)},t.startSession=function(){var r=new ye;r.app.releaseStage=this._config.releaseStage,r.app.version=this._config.appVersion,r.app.type=this._config.appType,r._user=w({},this._user);var a=Ke(this._cbs.s,r,"onSession",this._logger);return a?(this._logger.debug("Session not started due to onSession callback"),this):this._sessionDelegate.startSession(this,r)},t.addOnError=function(r,a){a===void 0&&(a=!1),this._cbs.e[a?"unshift":"push"](r)},t.removeOnError=function(r){this._cbs.e=m(this._cbs.e,function(a){return a!==r})},t._addOnSessionPayload=function(r){this._cbs.sp.push(r)},t.addOnSession=function(r){this._cbs.s.push(r)},t.removeOnSession=function(r){this._cbs.s=m(this._cbs.s,function(a){return a!==r})},t.addOnBreadcrumb=function(r,a){a===void 0&&(a=!1),this._cbs.b[a?"unshift":"push"](r)},t.removeOnBreadcrumb=function(r){this._cbs.b=m(this._cbs.b,function(a){return a!==r})},t.pauseSession=function(){return this._sessionDelegate.pauseSession(this)},t.resumeSession=function(){return this._sessionDelegate.resumeSession(this)},t.leaveBreadcrumb=function(r,a,o){if(r=typeof r=="string"?r:"",o=typeof o=="string"&&E(c,o)?o:"manual",a=typeof a=="object"&&a!==null?a:{},!!r){var i=new he(r,a,o),u=Ke(this._cbs.b,i,"onBreadcrumb",this._logger);if(u){this._logger.debug("Breadcrumb not attached due to onBreadcrumb callback");return}this._breadcrumbs.push(i),this._breadcrumbs.length>this._config.maxBreadcrumbs&&(this._breadcrumbs=this._breadcrumbs.slice(this._breadcrumbs.length-this._config.maxBreadcrumbs))}},t._isBreadcrumbTypeEnabled=function(r){var a=this._config.enabledBreadcrumbTypes;return a===null||E(a,r)},t.notify=function(r,a,o){o===void 0&&(o=I);var i=ve.create(r,!0,void 0,"notify()",this._depth+1,this._logger);this._notify(i,a,o)},t._notify=function(r,a,o){var i=this;if(o===void 0&&(o=I),r.app=w({},r.app,{releaseStage:this._config.releaseStage,version:this._config.appVersion,type:this._config.appType}),r.context=r.context||this._context,r._metadata=w({},r._metadata,this._metadata),r._user=w({},r._user,this._user),r.breadcrumbs=this._breadcrumbs.slice(),Se(r._features,this._features,r._featuresIndex),this._config.enabledReleaseStages!==null&&!E(this._config.enabledReleaseStages,this._config.releaseStage))return this._logger.warn("Event not sent due to releaseStage/enabledReleaseStages configuration"),o(null,r);var u=r.severity,s=function(f){i._logger.error("Error occurred in onError callback, continuing anywayâ€¦"),i._logger.error(f)},h=[].concat(this._cbs.e).concat(a);Wt(h,r,s,function(f,g){if(f&&s(f),!g)return i._logger.debug("Event not sent due to onError callback"),o(null,r);i._isBreadcrumbTypeEnabled("error")&&e.prototype.leaveBreadcrumb.call(i,r.errors[0].errorClass,{errorClass:r.errors[0].errorClass,errorMessage:r.errors[0].errorMessage,severity:r.severity},"error"),u!==r.severity&&(r._handledState.severityReason={type:"userCallbackSetSeverity"}),r.unhandled!==r._handledState.unhandled&&(r._handledState.severityReason.unhandledOverridden=!0,r._handledState.unhandled=r.unhandled),i._session&&(i._session._track(r),r._session=i._session),i._delivery.sendEvent({apiKey:r.apiKey||i._config.apiKey,notifier:i._notifier,events:[r]},function(l){return o(l,r)})})},e}(),or=function(e,t){var n=new Error(`Invalid configuration
`+M(L(e),function(r){return"  - "+r+" "+e[r]+", got "+sr(t[r])}).join(`

`));return n},sr=function(e){switch(typeof e){case"string":case"number":case"object":return JSON.stringify(e);default:return String(e)}},Ee=ir,K={},Qe=["events.[].metaData","events.[].breadcrumbs.[].metaData","events.[].request"];K.event=function(e,t){var n=te(e,null,null,{redactedPaths:Qe,redactedKeys:t});return n.length>1e6&&(e.events[0]._metadata={notifier:`WARNING!
Serialized payload was `+n.length/1e6+`MB (limit = 1MB)
metadata was removed`},n=te(e,null,null,{redactedPaths:Qe,redactedKeys:t})),n},K.session=function(e,t){var n=te(e,null,null);return n};var ke={};ke=function(e,t){return t===void 0&&(t=window),{sendEvent:function(n,r){if(r===void 0&&(r=function(){}),e._config.endpoints.notify===null){var a=new Error("Event not sent due to incomplete endpoint configuration");return r(a)}var o=Ze(e._config,"notify","4",t),i=K.event(n,e._config.redactedKeys),u=new t.XDomainRequest;u.onload=function(){r(null)},u.onerror=function(){var s=new Error("Event failed to send");e._logger.error("Event failed to sendâ€¦",s),i.length>1e6&&e._logger.warn("Event oversized ("+(i.length/1e6).toFixed(2)+" MB)"),r(s)},u.open("POST",o),setTimeout(function(){try{u.send(i)}catch(s){e._logger.error(s),r(s)}},0)},sendSession:function(n,r){if(r===void 0&&(r=function(){}),e._config.endpoints.sessions===null){var a=new Error("Session not sent due to incomplete endpoint configuration");return r(a)}var o=Ze(e._config,"sessions","1",t),i=new t.XDomainRequest;i.onload=function(){r(null)},i.open("POST",o),setTimeout(function(){try{i.send(K.session(n,e._config.redactedKeys))}catch(u){e._logger.error(u),r(u)}},0)}}};var Ze=function(e,t,n,r){var a=JSON.parse(JSON.stringify(new Date)),o=ur(e.endpoints[t],r.location.protocol);return o+"?apiKey="+encodeURIComponent(e.apiKey)+"&payloadVersion="+n+"&sentAt="+encodeURIComponent(a)},ur=ke._matchPageProtocol=function(e,t){return t==="http:"?e.replace(/^https:/,"http:"):e},cr=function(e,t){return t===void 0&&(t=window),{sendEvent:function(n,r){r===void 0&&(r=function(){});try{var a=e._config.endpoints.notify;if(a===null){var o=new Error("Event not sent due to incomplete endpoint configuration");return r(o)}var i=new t.XMLHttpRequest,u=K.event(n,e._config.redactedKeys);i.onreadystatechange=function(){if(i.readyState===t.XMLHttpRequest.DONE){var s=i.status;if(s===0||s>=400){var h=new Error("Request failed with status "+s);e._logger.error("Event failed to sendâ€¦",h),u.length>1e6&&e._logger.warn("Event oversized ("+(u.length/1e6).toFixed(2)+" MB)"),r(h)}else r(null)}},i.open("POST",a),i.setRequestHeader("Content-Type","application/json"),i.setRequestHeader("Bugsnag-Api-Key",n.apiKey||e._config.apiKey),i.setRequestHeader("Bugsnag-Payload-Version","4"),i.setRequestHeader("Bugsnag-Sent-At",new Date().toISOString()),i.send(u)}catch(s){e._logger.error(s)}},sendSession:function(n,r){r===void 0&&(r=function(){});try{var a=e._config.endpoints.sessions;if(a===null){var o=new Error("Session not sent due to incomplete endpoint configuration");return r(o)}var i=new t.XMLHttpRequest;i.onreadystatechange=function(){if(i.readyState===t.XMLHttpRequest.DONE){var u=i.status;if(u===0||u>=400){var s=new Error("Request failed with status "+u);e._logger.error("Session failed to sendâ€¦",s),r(s)}else r(null)}},i.open("POST",a),i.setRequestHeader("Content-Type","application/json"),i.setRequestHeader("Bugsnag-Api-Key",e._config.apiKey),i.setRequestHeader("Bugsnag-Payload-Version","1"),i.setRequestHeader("Bugsnag-Sent-At",new Date().toISOString()),i.send(K.session(n,e._config.redactedKeys))}catch(u){e._logger.error(u)}}}},et=new Date,dr=function(){et=new Date},lr={name:"appDuration",load:function(e){return e.addOnError(function(t){var n=new Date;t.app.duration=n-et},!0),{reset:dr}}},fr=function(e){return e===void 0&&(e=window),{load:function(t){t.addOnError(function(n){n.context===void 0&&(n.context=e.location.pathname)},!0)}}},Oe=function(t,n){var r="000000000"+t;return r.substr(r.length-n)},tt=typeof window=="object"?window:self,rt=0;for(var hr in tt)Object.hasOwnProperty.call(tt,hr)&&rt++;var pr=navigator.mimeTypes?navigator.mimeTypes.length:0,gr=Oe((pr+navigator.userAgent.length).toString(36)+rt.toString(36),4),nt=function(){return gr},W=0,xe=4,oe=36,at=Math.pow(oe,xe);function it(){return Oe((Math.random()*at<<0).toString(oe),xe)}function _r(){return W=W<at?W:0,W++,W-1}function ot(){var e="c",t=new Date().getTime().toString(oe),n=Oe(_r().toString(oe),xe),r=nt(),a=it()+it();return e+t+n+r+a}ot.fingerprint=nt;var vr=ot,st="bugsnag-anonymous-id",mr=function(e){try{var t=e.localStorage,n=t.getItem(st);return n&&/^c[a-z0-9]{20,32}$/.test(n)||(n=vr(),t.setItem(st,n)),n}catch{}},br=function(e,t){return e===void 0&&(e=navigator),t===void 0&&(t=window),{load:function(n){var r={locale:e.browserLanguage||e.systemLanguage||e.userLanguage||e.language,userAgent:e.userAgent};t&&t.screen&&t.screen.orientation&&t.screen.orientation.type?r.orientation=t.screen.orientation.type:t&&t.document&&(r.orientation=t.document.documentElement.clientWidth>t.document.documentElement.clientHeight?"landscape":"portrait"),n._config.generateAnonymousId&&(r.id=mr(t)),n.addOnSession(function(a){a.device=w({},a.device,r),n._config.collectUserIp||ut(a)}),n.addOnError(function(a){a.device=w({},a.device,r,{time:new Date}),n._config.collectUserIp||ut(a)},!0)},configSchema:{generateAnonymousId:{validate:function(n){return n===!0||n===!1},defaultValue:function(){return!0},message:"should be true|false"}}}},ut=function(e){var t=e.getUser();(!t||!t.id)&&e.setUser(e.device.id)},yr=function(e){return e===void 0&&(e=window),{load:function(t){t.addOnError(function(n){n.request&&n.request.url||(n.request=w({},n.request,{url:e.location.href}))},!0)}}},Sr={load:function(e){e._sessionDelegate=Er}},Er={startSession:function(e,t){var n=e;return n._session=t,n._pausedSession=null,n._config.enabledReleaseStages!==null&&!E(n._config.enabledReleaseStages,n._config.releaseStage)?(n._logger.warn("Session not sent due to releaseStage/enabledReleaseStages configuration"),n):(n._delivery.sendSession({notifier:n._notifier,device:t.device,app:t.app,sessions:[{id:t.id,startedAt:t.startedAt,user:t._user}]}),n)},resumeSession:function(e){return e._session?e:e._pausedSession?(e._session=e._pausedSession,e._pausedSession=null,e):e.startSession()},pauseSession:function(e){e._pausedSession=e._session,e._session=null}},kr={load:function(e){e._config.collectUserIp||e.addOnError(function(t){t._user&&typeof t._user.id>"u"&&delete t._user.id,t._user=w({id:"[REDACTED]"},t._user),t.request=w({clientIp:"[REDACTED]"},t.request)})},configSchema:{collectUserIp:{defaultValue:function(){return!0},message:"should be true|false",validate:function(e){return e===!0||e===!1}}}},ct={};ct.load=function(e){var t=/^(local-)?dev(elopment)?$/.test(e._config.releaseStage);t||!e._isBreadcrumbTypeEnabled("log")||M(Or,function(n){var r=console[n];console[n]=function(){for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];e.leaveBreadcrumb("Console output",p(o,function(u,s,h){var f="[Unknown value]";try{f=String(s)}catch{}if(f==="[object Object]")try{f=JSON.stringify(s)}catch{}return u["["+h+"]"]=f,u},{severity:n.indexOf("group")===0?"log":n}),"log"),r.apply(console,o)},console[n]._restore=function(){console[n]=r}})};var Or=m(["log","debug","info","warn","error"],function(e){return typeof console<"u"&&typeof console[e]=="function"}),dt=200,lt=5e5,xr=function(e,t){return e===void 0&&(e=document),t===void 0&&(t=window),{load:function(n){if(!n._config.trackInlineScripts)return;var r=t.location.href,a="",o=!!e.attachEvent,i=o?e.readyState==="complete":e.readyState!=="loading",u=function(){return e.documentElement.outerHTML};a=u();var s=e.onreadystatechange;e.onreadystatechange=function(){e.readyState==="interactive"&&(a=u(),i=!0);try{s.apply(this,arguments)}catch{}};var h=null,f=function(_){h=_},g=function(){var _=e.currentScript||h;if(!_&&!i){var b=e.scripts||e.getElementsByTagName("script");_=b[b.length-1]}return _},l=function(_){(!i||!a)&&(a=u());var b=["<!-- DOC START -->"].concat(a.split(`
`)),P=_-1,x=Math.max(P-3,0),N=Math.min(P+3,b.length);return p(b.slice(x,N),function(O,R,Ne){return O[x+1+Ne]=R.length<=dt?R:R.substr(0,dt),O},{})};n.addOnError(function(_){_.errors[0].stacktrace=m(_.errors[0].stacktrace,function(O){return!/__trace__$/.test(O.method)});var b=_.errors[0].stacktrace[0],P=function(O){return O.replace(/#.*$/,"").replace(/\?.*$/,"")};if(!(b&&b.file&&P(b.file)!==P(r))){var x=g();if(x){var N=x.innerHTML;_.addMetadata("script","content",N.length<=lt?N:N.substr(0,lt)),b&&b.lineNumber&&(b.code=l(b.lineNumber))}}},!0);var v=M(["setTimeout","setInterval","setImmediate","requestAnimationFrame"],function(_){return Pe(t,_,function(b){return k(b,function(P){return{get:function(){return P[0]},replace:function(x){P[0]=x}}})})}),y=v[0];M(["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],function(_){!t[_]||!t[_].prototype||!Object.prototype.hasOwnProperty.call(t[_].prototype,"addEventListener")||(Pe(t[_].prototype,"addEventListener",function(b){return k(b,ft)}),Pe(t[_].prototype,"removeEventListener",function(b){return k(b,ft,!0)}))});function k(_,b,P){return P===void 0&&(P=!1),function(){var x=[].slice.call(arguments);try{var N=b(x),O=N.get();if(P&&_.apply(this,x),typeof O!="function")return _.apply(this,x);if(O.__trace__)N.replace(O.__trace__);else{var R=g();O.__trace__=function(){f(R),y(function(){f(null)},0);var jr=O.apply(this,arguments);return f(null),jr},O.__trace__.__trace__=O.__trace__,N.replace(O.__trace__)}}catch{}if(_.apply)return _.apply(this,x);switch(x.length){case 1:return _(x[0]);case 2:return _(x[0],x[1]);default:return _()}}}},configSchema:{trackInlineScripts:{validate:function(n){return n===!0||n===!1},defaultValue:function(){return!0},message:"should be true|false"}}}};function Pe(e,t,n){var r=e[t];if(!r)return r;var a=n(r);return e[t]=a,r}function ft(e){var t=!!e[1]&&typeof e[1].handleEvent=="function";return{get:function(){return t?e[1].handleEvent:e[1]},replace:function(n){t?e[1].handleEvent=n:e[1]=n}}}var Pr=function(e){return e===void 0&&(e=window),{load:function(t){"addEventListener"in e&&t._isBreadcrumbTypeEnabled("user")&&e.addEventListener("click",function(n){var r,a;try{r=Br(n.target),a=ht(n.target,e)}catch{r="[hidden]",a="[hidden]",t._logger.error("Cross domain error when tracking click event. See docs: https://tinyurl.com/yy3rn63z")}t.leaveBreadcrumb("UI click",{targetText:r,targetSelector:a},"user")},!0)}}},wr=/^\s*([^\s][\s\S]{0,139}[^\s])?\s*/;function Br(e){var t=e.textContent||e.innerText||"";return!t&&(e.type==="submit"||e.type==="button")&&(t=e.value),t=t.replace(wr,"$1"),t.length>140?t.slice(0,135)+"(...)":t}function ht(e,t){var n=[e.tagName];if(e.id&&n.push("#"+e.id),e.className&&e.className.length&&n.push("."+e.className.split(" ").join(".")),!t.document.querySelectorAll||!Array.prototype.indexOf)return n.join("");try{if(t.document.querySelectorAll(n.join("")).length===1)return n.join("")}catch{return n.join("")}if(e.parentNode.childNodes.length>1){var r=Array.prototype.indexOf.call(e.parentNode.childNodes,e)+1;n.push(":nth-child("+r+")")}return t.document.querySelectorAll(n.join("")).length===1?n.join(""):e.parentNode?ht(e.parentNode,t)+" > "+n.join(""):n.join("")}var pt={};pt=function(e){e===void 0&&(e=window);var t={load:function(n){if("addEventListener"in e&&n._isBreadcrumbTypeEnabled("navigation")){var r=function(a){return function(){return n.leaveBreadcrumb(a,{},"navigation")}};e.addEventListener("pagehide",r("Page hidden"),!0),e.addEventListener("pageshow",r("Page shown"),!0),e.addEventListener("load",r("Page loaded"),!0),e.document.addEventListener("DOMContentLoaded",r("DOMContentLoaded"),!0),e.addEventListener("load",function(){return e.addEventListener("popstate",r("Navigated back"),!0)}),e.addEventListener("hashchange",function(a){var o=a.oldURL?{from:se(a.oldURL,e),to:se(a.newURL,e),state:_t(e)}:{to:se(e.location.href,e)};n.leaveBreadcrumb("Hash changed",o,"navigation")},!0),e.history.pushState&&gt(n,e.history,"pushState",e,!0),e.history.replaceState&&gt(n,e.history,"replaceState",e)}}};return t};var se=function(e,t){var n=t.document.createElement("A");return n.href=e,""+n.pathname+n.search+n.hash},Nr=function(e,t,n,r){var a=se(e.location.href,e);return{title:n,state:t,prevState:_t(e),to:r||a,from:a}},gt=function(e,t,n,r,a){a===void 0&&(a=!1);var o=t[n];t[n]=function(i,u,s){e.leaveBreadcrumb("History "+n,Nr(r,i,u,s),"navigation"),a&&typeof e.resetEventCount=="function"&&e.resetEventCount(),o.apply(t,[i,u].concat(s!==void 0?s:[]))}},_t=function(e){try{return e.history.state}catch{}},X="request",Mr=function(e,t){e===void 0&&(e=[]),t===void 0&&(t=window);var n={load:function(r){if(!r._isBreadcrumbTypeEnabled("request"))return;var a=[r._config.endpoints.notify,r._config.endpoints.sessions].concat(e);o(),s();function o(){if(!(!("addEventListener"in t.XMLHttpRequest.prototype)||!("WeakMap"in t))){var g=new WeakMap,l=new WeakMap,v=t.XMLHttpRequest.prototype.open;t.XMLHttpRequest.prototype.open=function(_,b){this&&g.set(this,{method:_,url:b}),v.apply(this,arguments)};var y=t.XMLHttpRequest.prototype.send;t.XMLHttpRequest.prototype.send=function(_){var b=this,P=g.get(this);if(P){var x=l.get(this);x&&(this.removeEventListener("load",x.load),this.removeEventListener("error",x.error));var N=new Date,O=function(){return u(P.method,P.url,ue(N))},R=function(){return i(P.method,P.url,b.status,ue(N))};this.addEventListener("load",R),this.addEventListener("error",O),this&&l.set(this,{load:R,error:O})}y.apply(this,arguments)}}}function i(g,l,v,y){if(l===void 0){r._logger.warn("The request URL is no longer present on this XMLHttpRequest. A breadcrumb cannot be left for this request.");return}if(!(typeof l=="string"&&E(a,l.replace(/\?.*$/,"")))){var k={status:v,method:String(g),url:String(l),duration:y};v>=400?r.leaveBreadcrumb("XMLHttpRequest failed",k,X):r.leaveBreadcrumb("XMLHttpRequest succeeded",k,X)}}function u(g,l,v){if(l===void 0){r._logger.warn("The request URL is no longer present on this XMLHttpRequest. A breadcrumb cannot be left for this request.");return}typeof l=="string"&&E(a,l.replace(/\?.*$/,""))||r.leaveBreadcrumb("XMLHttpRequest error",{method:String(g),url:String(l),duration:v},X)}function s(){if(!(!("fetch"in t)||t.fetch.polyfill)){var g=t.fetch;t.fetch=function(){var v=arguments,y=arguments[0],k=arguments[1],_,b=null;return y&&typeof y=="object"?(b=y.url,k&&"method"in k?_=k.method:y&&"method"in y&&(_=y.method)):(b=y,k&&"method"in k&&(_=k.method)),_===void 0&&(_="GET"),new Promise(function(P,x){var N=new Date;g.apply(void 0,v).then(function(O){h(O,_,b,ue(N)),P(O)}).catch(function(O){f(_,b,ue(N)),x(O)})})}}}var h=function(g,l,v,y){var k={method:String(l),status:g.status,url:String(v),duration:y};g.status>=400?r.leaveBreadcrumb("fetch() failed",k,X):r.leaveBreadcrumb("fetch() succeeded",k,X)},f=function(g,l,v){r.leaveBreadcrumb("fetch() error",{method:String(g),url:String(l),duration:v},X)}}};return n},ue=function(e){return e&&new Date-e},Tr={load:function(e){var t=0;e.addOnError(function(n){if(t>=e._config.maxEvents)return e._logger.warn("Cancelling event send due to maxEvents per session limit of "+e._config.maxEvents+" being reached"),!1;t++}),e.resetEventCount=function(){t=0}},configSchema:{maxEvents:{defaultValue:function(){return 10},message:"should be a positive integer â‰¤100",validate:function(e){return $e(1,100)(e)}}}},we={};we={load:function(e){e.addOnError(function(t){var n=p(t.errors,function(r,a){return r.concat(a.stacktrace)},[]);M(n,function(r){r.file=Lr(r.file)})})}};var Lr=we._strip=function(e){return typeof e=="string"?e.replace(/\?.*$/,"").replace(/#.*$/,""):e},Cr=function(e,t){return e===void 0&&(e=window),t===void 0&&(t="window onerror"),{load:function(n){if(!n._config.autoDetectErrors||!n._config.enabledErrorTypes.unhandledExceptions)return;function r(o,i,u,s,h){if(u===0&&/Script error\.?/.test(o))n._logger.warn("Ignoring cross-domain or eval script error. See docs: https://tinyurl.com/yy3rn63z");else{var f={severity:"error",unhandled:!0,severityReason:{type:"unhandledException"}},g;if(h)g=n.Event.create(h,!0,f,t,1),vt(g.errors[0].stacktrace,i,u,s);else if(typeof o=="object"&&o!==null&&(!i||typeof i!="string")&&!u&&!s&&!h){var l=o.type?"Event: "+o.type:"Error",v=o.message||o.detail||"";g=n.Event.create({name:l,message:v},!0,f,t,1),g.originalError=o,g.addMetadata(t,{event:o,extraParameters:i})}else g=n.Event.create(o,!0,f,t,1),vt(g.errors[0].stacktrace,i,u,s);n._notify(g)}typeof a=="function"&&a.apply(this,arguments)}var a=e.onerror;e.onerror=r}}},vt=function(e,t,n,r){e[0]||e.push({});var a=e[0];!a.file&&typeof t=="string"&&(a.file=t),!a.lineNumber&&Be(n)&&(a.lineNumber=n),a.columnNumber||(Be(r)?a.columnNumber=r:window.event&&Be(window.event.errorCharacter)&&(a.columnNumber=window.event.errorCharacter))},Be=function(e){return typeof e=="number"&&String.call(e)!=="NaN"},$r=function(e){e===void 0&&(e=window);var t={load:function(n){if(!(!n._config.autoDetectErrors||!n._config.enabledErrorTypes.unhandledRejections)){var r=function(a){var o=a.reason,i=!1;try{a.detail&&a.detail.reason&&(o=a.detail.reason,i=!0)}catch{}var u=n.Event.create(o,!1,{severity:"error",unhandled:!0,severityReason:{type:"unhandledPromiseRejection"}},"unhandledrejection handler",1,n._logger);i&&M(u.errors[0].stacktrace,Dr(o)),n._notify(u,function(s){if(ae(s.originalError)&&!s.originalError.stack){var h;s.addMetadata("unhandledRejection handler",(h={},h[Object.prototype.toString.call(s.originalError)]={name:s.originalError.name,message:s.originalError.message,code:s.originalError.code},h))}})};"addEventListener"in e?e.addEventListener("unhandledrejection",r):e.onunhandledrejection=function(a,o){r({detail:{reason:a,promise:o}})}}}};return t},Dr=function(e){return function(t){t.file!==e.toString()&&t.method&&(t.method=t.method.replace(/^\s+/,""))}},q={},Ar="Bugsnag JavaScript",Ir="8.0.0",Rr="https://github.com/bugsnag/bugsnag-js",Fr=w({},Z.schema,xt),B={_client:null,createClient:function(e){typeof e=="string"&&(e={apiKey:e}),e||(e={});var t=[lr,br(),fr(),yr(),Tr,Sr,kr,we,Cr(),$r(),pt(),Pr(),Mr(),ct,xr()],n=new Ee(e,Fr,t,{name:Ar,version:Ir,url:Rr});return n._setDelivery(window.XDomainRequest?ke:cr),n._logger.debug("Loaded!"),n.leaveBreadcrumb("Bugsnag loaded",{},"state"),n._config.autoTrackSessions?n.startSession():n},start:function(e){return B._client?(B._client._logger.warn("Bugsnag.start() was called more than once. Ignoring."),B._client):(B._client=B.createClient(e),B._client)},isStarted:function(){return B._client!=null}};return M(["resetEventCount"].concat(L(Ee.prototype)),function(e){/^_/.test(e)||(B[e]=function(){if(B._client){B._client._depth+=1;var t=B._client[e].apply(B._client,arguments);return B._client._depth-=1,t}})}),q=B,q.Client=Ee,q.Event=ve,q.Session=ye,q.Breadcrumb=he,q.default=B,q})})(Le);var Ce=Le.exports,mt=Ce;const Y=j(mt);class bt{constructor(d){S(this,"plugin");S(this,"metadata",{});S(this,"customMetaData");S(this,"beforeSend",d=>{const{originalError:c}=d;return this.plugin.isErrorIgnoredByCode(c)||this.plugin.isErrorIgnoredByMessage(c)?!1:(d.clearMetadata("global"),d.addMetadata("global",this.metadata),this.customMetaData&&(d.clearMetadata("custom"),d.addMetadata("custom",this.customMetaData)),!0)});this.plugin=d}configure(d){const{apiKey:c,buildVersion:p,releaseStage:m}=d;Y.start({apiKey:c,appVersion:p,releaseStage:m,autoDetectErrors:!0,autoTrackSessions:!0,onError:this.beforeSend})}setUser(d){const{id:c,name:p}=d,m=c??void 0,E=p??void 0;Y.setUser(m,void 0,E)}sendException(d,c){c&&(this.customMetaData=c),Y.notify(d)}setMetaData(d){this.metadata=d}addBreadcrumb(d){Y.leaveBreadcrumb(d)}}class yt{configure(d){}setUser(d){}sendException(d){}addBreadcrumb(d){}setMetaData(d){}}const{Utils:{Valid:ce,Object:V}}=Te;class St extends F.Plugins.BasePlugin{constructor(){super(...arguments);S(this,"config");S(this,"adapter");S(this,"filterErrors");S(this,"metadata",{});S(this,"feedbackPopup",null);S(this,"feedbackAsync",async c=>{try{if(!this.feedbackPopup)return;let p="";c&&(p="error"in c?c.error:c.reason),await new Promise((m,E)=>{this.feedbackPopup&&(this.feedbackPopup.onYes(this.handleOnYes(m,p)),this.feedbackPopup.onNo(this.handleOnNo(E)),this.feedbackPopup.onScreenshot(this.handleOnScreenshot()),this.feedbackPopup.show(p))})}catch{}});S(this,"handleOnYes",(c,p)=>()=>{if(!this.feedbackPopup)return;const m=this.feedbackPopup.getFeedback()||"",E=this.feedbackPopup.getScreenshot();m&&this.sendException(new Error("User feedback"),{feedback:m,screenshot:E,error:p}),this.feedbackPopup.hide(),c()});S(this,"handleOnNo",c=>()=>{this.feedbackPopup&&(this.feedbackPopup.hide(),c(new Error("User canceled feedback")))});S(this,"handleOnScreenshot",()=>()=>{this.feedbackPopup&&this.getScreenshot().then(c=>{this.feedbackPopup&&this.feedbackPopup.setScreenshot(c)})});S(this,"initFeedbackTrackErrors",async()=>{if(this.config.feedback)try{await this.loadFeedbackPopup()}catch{}})}configure(c){this.config=c,this.filterErrors={Codes:{Accepted:[],Ignored:[]},Messages:{Accepted:[],Ignored:[]}},this.adapter=this.getAdapterByService(),this.adapter.configure(this.config)}getAdapterByService(){switch(this.config.service){case"BugSnag":return new bt(this);case"Sentry":return new yt}}setUser(c){var p;this.config.trackUser&&((p=this.adapter)==null||p.setUser(c))}sendException(c,p){var E;if(this.isErrorIgnoredByCode(c)||this.isErrorIgnoredByMessage(c))return;let m=this.metadata;p&&(m=V.merge(m,p)),(E=this.adapter)==null||E.sendException(c,m)}isErrorIgnoredByCode(c){if(!V.hasOwn(c,"code"))return!1;const{code:p}=c;if(!ce.isString(p))return!1;const{Accepted:m,Ignored:E}=this.filterErrors.Codes;return m.indexOf(p)>-1?!1:E.indexOf(p)>-1}isErrorIgnoredByMessage(c){if(!V.hasOwn(c,"message"))return!1;const{message:p}=c;if(!ce.isString(p))return!1;const{Accepted:m,Ignored:E}=this.filterErrors.Messages;return m.indexOf(p)>-1?!1:E.indexOf(p)>-1}addBreadcrumb(c){var p;(p=this.adapter)==null||p.addBreadcrumb(c)}addFilterErrors(c){this.filterErrors=V.merge(this.filterErrors,c)}addMetadata(c){var p;ce.isObject(c)&&(this.metadata=V.merge(this.metadata,c),(p=this.adapter)==null||p.setMetaData(this.metadata))}removeMetadata(c){var p;V.hasOwn(this.metadata,c)&&(this.metadata[c]=void 0,(p=this.adapter)==null||p.setMetaData(this.metadata))}getScreenshot(){const c=document.getElementById("GameCanvas");return new Promise(p=>{requestAnimationFrame(()=>{p(c.toDataURL("image/jpeg",.4))})})}async loadFeedbackPopup(){if(!this.feedbackPopup)try{const c=(await Me(async()=>{const{default:p}=await Promise.resolve().then(()=>Ot);return{default:p}},void 0,$.meta.url)).default;if(typeof c!="function")return;this.feedbackPopup=new c}catch{}}}D("i",Object.freeze(Object.defineProperty({__proto__:null,default:St},Symbol.toStringTag,{value:"Module"})));const Et=["Bug","Game is choppy","Audio issue","Deformed graphics","Low FPS","Other"];class kt{constructor(){S(this,"popup");S(this,"title");S(this,"screenshot");S(this,"feedback");S(this,"okButton");S(this,"noButton");S(this,"screenshotButton");S(this,"okCallback");S(this,"noCallback");S(this,"screenshotCallback");S(this,"feedbackSelections",[]);S(this,"onYes",d=>{this.okButton.removeEventListener("click",this.okCallback),this.okCallback=this.handleCallback(d),this.okButton.addEventListener("click",this.okCallback,{once:!0})});S(this,"onNo",d=>{this.noButton.removeEventListener("click",this.noCallback),this.noCallback=this.handleCallback(d),this.noButton.addEventListener("click",this.noCallback,{once:!0})});S(this,"onScreenshot",d=>{this.screenshotButton.removeEventListener("click",this.screenshotCallback),this.screenshotCallback=this.handleCallback(d,!1),this.screenshotButton.addEventListener("click",this.screenshotCallback)});S(this,"handleCallback",(d,c=!0)=>p=>{p.stopImmediatePropagation(),c&&this.hide(),d(),this.disableScreenshotButton()});this.createPopupElement(),this.addPopupElementStyle();const d=new MutationObserver(()=>{document.getElementById("GameDiv")&&this.setupPopupElementSizeAndPosition()}),c={attributes:!0,childList:!0,subtree:!0},p=document.body;d.observe(p,c)}createPopupElement(){const d=this.getPopupHTML(),c=this.createElement(d);this.setupPopupStyles(c),this.initializeElements(c)}createElement(d){const c=document.createElement("div");return c.id=this.constructor.name,c.innerHTML=d,document.body.appendChild(c),c}setupPopupStyles(d){d.style.width="100%",d.style.height="100%",d.style.position="absolute",d.style.backgroundColor="#0000001f",d.style.alignItems="center",d.style.justifyContent="center",this.popup=d,this.popup.style.display="none",d.style.setProperty("--popup-bg-color","#161616"),d.style.setProperty("--popup-width","100%"),d.style.setProperty("--popup-height","100%")}initializeElements(d){this.title=this.getElement(d,".popup__title"),this.screenshot=this.getElement(d,".popup__screenshot img"),this.feedback=this.getElement(d,".popup__field"),this.okButton=this.getElement(d,".popup__btns .btn:nth-child(2)"),this.noButton=this.getElement(d,".popup__close"),this.screenshotButton=this.getElement(d,".popup__btns .btn:first-child"),this.setInitialFeedbackText(),this.createFeedbackSelections(d)}getElement(d,c){return d.querySelector(c)}setInitialFeedbackText(){this.feedback.placeholder="Please enter your feedback here",this.title.innerText="Feedback"}createFeedbackSelections(d){const c=this.getElement(d,".popup__selections");for(const p of Et){const m=this.createFeedbackSelection(p);c.appendChild(m),this.feedbackSelections.push(m)}}createFeedbackSelection(d){const c=document.createElement("div");c.classList.add("selection"),c.innerHTML=this.getSelectionHTML();const p=c.querySelector(".label");p.innerText=d;const m=c.querySelector(".checkbox");return m.addEventListener("click",()=>{m.classList.toggle("checked")}),c}addPopupElementStyle(){const d=this.createStyleElement(),c=this.getPopupCSS();this.appendStyleToHead(d,c)}createStyleElement(){const d=document.createElement("style");return d.id="feedback-async-popup-style",d}appendStyleToHead(d,c){const p=document.head||document.getElementsByTagName("head")[0];d.appendChild(document.createTextNode(c)),p.appendChild(d)}setupPopupElementSizeAndPosition(){const d=document.getElementById(this.constructor.name);if(!d)return;const c=d.querySelector(".popup");if(!c||!document.getElementById("GameDiv"))return;const m=500,{width:E,height:C}=document.body.getBoundingClientRect(),Q=c,z=E<550?E/550:1,L=C<800?C/800:1;Q.style.width=`${m}px`,Q.style.scale=`${Math.min(z,L)}`}disableScreenshotButton(){this.screenshotButton.classList.add("disabled"),this.screenshotButton.innerHTML="<p>Captured</p>"}getFeedback(){const d=this.feedbackSelections.reduce((c,p)=>{if(!p.querySelector(".checkbox.checked"))return c;const E=p.querySelector(".label");return c+(c?", ":"")+E.innerText},"");return this.feedback.value?`${d}: ${this.feedback.value}`:d}getScreenshot(){return this.screenshot.src}setScreenshot(d){this.screenshot.src=d}show(d=""){this.feedback.value=d,this.popup.style.display="flex";for(const c of this.feedbackSelections)c.querySelector(".checkbox").classList.remove("checked")}hide(){this.popup.style.display="none"}getPopupHTML(){return`
        <div class="popup">
            <h2 class="popup__title"></h2>
            <div class="popup__screenshot">
                <img src="" alt="Screenshot" />
            </div>
            <div class="popup__selections">
                <!-- Feedback selections will be dynamically added here -->
            </div>
            <textarea class="popup__field" placeholder="Please enter your feedback here"></textarea>
            <div class="popup__btns">
                <button class="btn" id="screenshot-button"><p>Take a screenshot</p></button>
                <button class="btn" id="ok"><p>Send</p></button>
            </div>
            <button class="popup__close"></button>
        </div>`}getSelectionHTML(){return`
        <div class="checkbox">
            <div class="check-mark"></div>
        </div>
        <div class="label"></div>`}getPopupCSS(){return`
        :root {
            --popup-bg-color: rgba(26, 26, 26, 0.9);
            --button-bg-color: #4f4f4f;
            --button-disabled-bg-color: #7f7f7f;
            --field-bg-color: #333;
            --field-placeholder-color: #a27860;
        }

        .popup {
            color: #fff;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            background-color: var(--popup-bg-color);
            border-radius: 20px;
        }

        .popup__title {
            font-size: 2rem;
            font-weight: bold;
            margin-bottom: 1rem;
        }

        .popup__btns {
            display: flex;
            flex-direction: column; /* Stack buttons vertically */
            width: 100%;
        }

        .btn {
            padding: 1rem;
            border-radius: 0.5rem;
            border: none;
            cursor: pointer;
            background-color: var(--button-bg-color);
            margin-bottom: 0.5rem;
        }

        .btn p {
            color: #fff;
            margin: 0;
            font-size: 1.5rem;
            font-weight: bold;
        }

        .btn.disabled {
            background-color: var(--button-disabled-bg-color);
            cursor: not-allowed;
        }

        .popup__close {
            position: absolute;
            top: 1.5rem;
            right: 1.5rem;
            background-color: #4f4f4f;
            border: none;
            width: 2rem;
            height: 2rem;
        }

        .popup__field {
            width: 100%;
            height: 150px;
            font-size: 1rem;
            padding: 1rem;
            resize: none;
            margin-bottom: 1rem;
            border: none;
            outline: none;
            background-color: var(--field-bg-color);
            color: #fff;
            overflow: hidden;
        }

        .popup__field::placeholder {
            color: var(--field-placeholder-color);
        }

        .popup__screenshot {
            width: 100%;
            display: none;
            justify-content: center;
            margin-bottom: 1rem;
        }

        .popup__screenshot img {
            width: 100%;
            aspect-ratio: 16 / 9;
            object-fit: cover;
            border-radius: 0.5rem;
        }

        .popup__selections {
            display: flex;
            flex-direction: column;
            width: 100%;
            margin-bottom: 1rem;
        }

        .selection {
            display: flex;
            align-items: center;
            margin: 0.5rem 0;
            font-size: 24px;
        }

        .selection .checkbox {
            width: 1.5rem;
            height: 1.5rem;
            margin-right: 1rem;
            cursor: pointer;
            position: relative;
            background-color: white;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .selection .checkbox .check-mark {
            display: none;
            width: 1rem;
            height: 1rem;
            background-color: green;
            border-radius: 50%;
        }

        .selection .checkbox.checked .check-mark {
            display: block;
        }`}}const Ot=Object.freeze(Object.defineProperty({__proto__:null,default:kt},Symbol.toStringTag,{value:"Module"}))}}});
