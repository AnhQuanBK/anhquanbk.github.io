var wr=Object.defineProperty;var Br=(D,I,F)=>I in D?wr(D,I,{enumerable:!0,configurable:!0,writable:!0,value:F}):D[I]=F;var E=(D,I,F)=>Br(D,typeof I!="symbol"?I+"":I,F);System.register(["./core.js"],function(D,I){"use strict";var F,we,Be;return{setters:[j=>{F=j.P,we=j._,Be=j.G}],execute:function(){D("g",j);function j(L){return L&&L.__esModule&&Object.prototype.hasOwnProperty.call(L,"default")?L.default:L}var Ne={exports:{}};(function(L,f){(function(u){L.exports=u()})(function(){var u=["navigation","request","process","log","user","state","error","manual"],h=function(e,t,n){for(var r=n,a=0,o=e.length;a<o;a++)r=t(r,e[a],a,e);return r},b=function(e,t){return h(e,function(n,r,a,o){return t(r,a,o)?n.concat(r):n},[])},k=function(e,t){return h(e,function(n,r,a,o){return n===!0||r===t},!1)},$=function(e){return Object.prototype.toString.call(e)==="[object Array]"},Q=!{toString:null}.propertyIsEnumerable("toString"),z=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],T=function(e){var t=[],n;for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);if(!Q)return t;for(var r=0,a=z.length;r<a;r++)Object.prototype.hasOwnProperty.call(e,z[r])&&t.push(z[r]);return t},Le=function(e,t){return e===void 0&&(e=1),function(n){return typeof n=="number"&&parseInt(""+n,10)===n&&n>=e&&n<=t}},ce=function(e){return typeof e=="function"||$(e)&&b(e,function(t){return typeof t=="function"}).length===e.length},G=function(e){return typeof e=="string"&&!!e.length},Z={},Te=function(){return{unhandledExceptions:!0,unhandledRejections:!0}};Z.schema={apiKey:{defaultValue:function(){return null},message:"is required",validate:G},appVersion:{defaultValue:function(){},message:"should be a string",validate:function(e){return e===void 0||G(e)}},appType:{defaultValue:function(){},message:"should be a string",validate:function(e){return e===void 0||G(e)}},autoDetectErrors:{defaultValue:function(){return!0},message:"should be true|false",validate:function(e){return e===!0||e===!1}},enabledErrorTypes:{defaultValue:function(){return Te()},message:"should be an object containing the flags { unhandledExceptions:true|false, unhandledRejections:true|false }",allowPartialObject:!0,validate:function(e){if(typeof e!="object"||!e)return!1;var t=T(e),n=T(Te());return!(b(t,function(r){return k(n,r)}).length<t.length||b(T(e),function(r){return typeof e[r]!="boolean"}).length>0)}},onError:{defaultValue:function(){return[]},message:"should be a function or array of functions",validate:ce},onSession:{defaultValue:function(){return[]},message:"should be a function or array of functions",validate:ce},onBreadcrumb:{defaultValue:function(){return[]},message:"should be a function or array of functions",validate:ce},endpoints:{defaultValue:function(e){return typeof e>"u"?{notify:"https://notify.bugsnag.com",sessions:"https://sessions.bugsnag.com"}:{notify:null,sessions:null}},message:"should be an object containing endpoint URLs { notify, sessions }",validate:function(e){return e&&typeof e=="object"&&G(e.notify)&&G(e.sessions)&&b(T(e),function(t){return!k(["notify","sessions"],t)}).length===0}},autoTrackSessions:{defaultValue:function(e){return!0},message:"should be true|false",validate:function(e){return e===!0||e===!1}},enabledReleaseStages:{defaultValue:function(){return null},message:"should be an array of strings",validate:function(e){return e===null||$(e)&&b(e,function(t){return typeof t=="string"}).length===e.length}},releaseStage:{defaultValue:function(){return"production"},message:"should be a string",validate:function(e){return typeof e=="string"&&e.length}},maxBreadcrumbs:{defaultValue:function(){return 25},message:"should be a number ≤100",validate:function(e){return Le(0,100)(e)}},enabledBreadcrumbTypes:{defaultValue:function(){return u},message:"should be null or a list of available breadcrumb types ("+u.join(",")+")",validate:function(e){return e===null||$(e)&&h(e,function(t,n){return t===!1?t:k(u,n)},!0)}},context:{defaultValue:function(){},message:"should be a string",validate:function(e){return e===void 0||typeof e=="string"}},user:{defaultValue:function(){return{}},message:"should be an object with { id, email, name } properties",validate:function(e){return e===null||e&&h(T(e),function(t,n){return t&&k(["id","email","name"],n)},!0)}},metadata:{defaultValue:function(){return{}},message:"should be an object",validate:function(e){return typeof e=="object"&&e!==null}},logger:{defaultValue:function(){},message:"should be null or an object with methods { debug, info, warn, error }",validate:function(e){return!e||e&&h(["debug","info","warn","error"],function(t,n){return t&&typeof e[n]=="function"},!0)}},redactedKeys:{defaultValue:function(){return["password"]},message:"should be an array of strings|regexes",validate:function(e){return $(e)&&e.length===b(e,function(t){return typeof t=="string"||t&&typeof t.test=="function"}).length}},plugins:{defaultValue:function(){return[]},message:"should be an array of plugin objects",validate:function(e){return $(e)&&e.length===b(e,function(t){return t&&typeof t=="object"&&typeof t.load=="function"}).length}},featureFlags:{defaultValue:function(){return[]},message:'should be an array of objects that have a "name" property',validate:function(e){return $(e)&&e.length===b(e,function(t){return t&&typeof t=="object"&&typeof t.name=="string"}).length}},reportUnhandledPromiseRejectionsAsHandled:{defaultValue:function(){return!1},message:"should be true|false",validate:function(e){return e===!0||e===!1}}};var B=function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},M=function(e,t){return h(e,function(n,r,a,o){return n.concat(t(r,a,o))},[])};function de(){return de=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},de.apply(this,arguments)}var fe=Z.schema,vt={releaseStage:B({},fe.releaseStage,{defaultValue:function(){return/^localhost(:\d+)?$/.test(window.location.host)?"development":"production"}}),appType:de({},fe.appType,{defaultValue:function(){return"browser"}}),logger:B({},fe.logger,{defaultValue:function(){return typeof console<"u"&&typeof console.debug=="function"?_t():void 0}})},_t=function(){var e={},t=console.log;return M(["debug","info","warn","error"],function(n){var r=console[n];e[n]=typeof r=="function"?r.bind(console,"[bugsnag]"):t.bind(console,"[bugsnag]")}),e},mt=function(){function e(n,r,a,o){o===void 0&&(o=new Date),this.type=a,this.message=n,this.metadata=r,this.timestamp=o}var t=e.prototype;return t.toJSON=function(){return{type:this.type,name:this.message,timestamp:this.timestamp,metaData:this.metadata}},e}(),le=mt,ee={};(function(e,t){typeof ee=="object"?ee=t():e.StackFrame=t()})(this,function(){function e(p){return!isNaN(parseFloat(p))&&isFinite(p)}function t(p){return p.charAt(0).toUpperCase()+p.substring(1)}function n(p){return function(){return this[p]}}var r=["isConstructor","isEval","isNative","isToplevel"],a=["columnNumber","lineNumber"],o=["fileName","functionName","source"],i=["args"],c=["evalOrigin"],s=r.concat(a,o,i,c);function d(p){if(p)for(var m=0;m<s.length;m++)p[s[m]]!==void 0&&this["set"+t(s[m])](p[s[m]])}d.prototype={getArgs:function(){return this.args},setArgs:function(p){if(Object.prototype.toString.call(p)!=="[object Array]")throw new TypeError("Args must be an Array");this.args=p},getEvalOrigin:function(){return this.evalOrigin},setEvalOrigin:function(p){if(p instanceof d)this.evalOrigin=p;else if(p instanceof Object)this.evalOrigin=new d(p);else throw new TypeError("Eval Origin must be an Object or StackFrame")},toString:function(){var p=this.getFileName()||"",m=this.getLineNumber()||"",S=this.getColumnNumber()||"",_=this.getFunctionName()||"";return this.getIsEval()?p?"[eval] ("+p+":"+m+":"+S+")":"[eval]:"+m+":"+S:_?_+" ("+p+":"+m+":"+S+")":p+":"+m+":"+S}},d.fromString=function(m){var S=m.indexOf("("),_=m.lastIndexOf(")"),y=m.substring(0,S),P=m.substring(S+1,_).split(","),O=m.substring(_+1);if(O.indexOf("@")===0)var w=/@(.+?)(?::(\d+))?(?::(\d+))?$/.exec(O,""),x=w[1],C=w[2],W=w[3];return new d({functionName:y,args:P||void 0,fileName:x,lineNumber:C||void 0,columnNumber:W||void 0})};for(var l=0;l<r.length;l++)d.prototype["get"+t(r[l])]=n(r[l]),d.prototype["set"+t(r[l])]=function(p){return function(m){this[p]=!!m}}(r[l]);for(var g=0;g<a.length;g++)d.prototype["get"+t(a[g])]=n(a[g]),d.prototype["set"+t(a[g])]=function(p){return function(m){if(!e(m))throw new TypeError(p+" must be a Number");this[p]=Number(m)}}(a[g]);for(var v=0;v<o.length;v++)d.prototype["get"+t(o[v])]=n(o[v]),d.prototype["set"+t(o[v])]=function(p){return function(m){this[p]=String(m)}}(o[v]);return d});var he={};(function(e,t){typeof he=="object"?he=t(ee):e.StackGenerator=t(e.StackFrame)})(this,function(e){return{backtrace:function(n){var r=[],a=10;typeof n=="object"&&typeof n.maxStackSize=="number"&&(a=n.maxStackSize);for(var o=arguments.callee;o&&r.length<a&&o.arguments;){for(var i=new Array(o.arguments.length),c=0;c<i.length;++c)i[c]=o.arguments[c];/function(?:\s+([\w$]+))+\s*\(/.test(o.toString())?r.push(new e({functionName:RegExp.$1||void 0,args:i})):r.push(new e({args:i}));try{o=o.caller}catch{break}}return r}}});var pe={};(function(e,t){typeof pe=="object"?pe=t(ee):e.ErrorStackParser=t(e.StackFrame)})(this,function(t){var n=/(^|@)\S+:\d+/,r=/^\s*at .*(\S+:\d+|\(native\))/m,a=/^(eval@)?(\[native code])?$/;return{parse:function(i){if(typeof i.stacktrace<"u"||typeof i["opera#sourceloc"]<"u")return this.parseOpera(i);if(i.stack&&i.stack.match(r))return this.parseV8OrIE(i);if(i.stack)return this.parseFFOrSafari(i);throw new Error("Cannot parse given Error object")},extractLocation:function(i){if(i.indexOf(":")===-1)return[i];var c=/(.+?)(?::(\d+))?(?::(\d+))?$/,s=c.exec(i.replace(/[()]/g,""));return[s[1],s[2]||void 0,s[3]||void 0]},parseV8OrIE:function(i){var c=i.stack.split(`
`).filter(function(s){return!!s.match(r)},this);return c.map(function(s){s.indexOf("(eval ")>-1&&(s=s.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(\),.*$)/g,""));var d=s.replace(/^\s+/,"").replace(/\(eval code/g,"("),l=d.match(/ (\((.+):(\d+):(\d+)\)$)/);d=l?d.replace(l[0],""):d;var g=d.split(/\s+/).slice(1),v=this.extractLocation(l?l[1]:g.pop()),p=g.join(" ")||void 0,m=["eval","<anonymous>"].indexOf(v[0])>-1?void 0:v[0];return new t({functionName:p,fileName:m,lineNumber:v[1],columnNumber:v[2],source:s})},this)},parseFFOrSafari:function(i){var c=i.stack.split(`
`).filter(function(s){return!s.match(a)},this);return c.map(function(s){if(s.indexOf(" > eval")>-1&&(s=s.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1")),s.indexOf("@")===-1&&s.indexOf(":")===-1)return new t({functionName:s});var d=/((.*".+"[^@]*)?[^@]*)(?:@)/,l=s.match(d),g=l&&l[1]?l[1]:void 0,v=this.extractLocation(s.replace(d,""));return new t({functionName:g,fileName:v[0],lineNumber:v[1],columnNumber:v[2],source:s})},this)},parseOpera:function(i){return!i.stacktrace||i.message.indexOf(`
`)>-1&&i.message.split(`
`).length>i.stacktrace.split(`
`).length?this.parseOpera9(i):i.stack?this.parseOpera11(i):this.parseOpera10(i)},parseOpera9:function(i){for(var c=/Line (\d+).*script (?:in )?(\S+)/i,s=i.message.split(`
`),d=[],l=2,g=s.length;l<g;l+=2){var v=c.exec(s[l]);v&&d.push(new t({fileName:v[2],lineNumber:v[1],source:s[l]}))}return d},parseOpera10:function(i){for(var c=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,s=i.stacktrace.split(`
`),d=[],l=0,g=s.length;l<g;l+=2){var v=c.exec(s[l]);v&&d.push(new t({functionName:v[3]||void 0,fileName:v[2],lineNumber:v[1],source:s[l]}))}return d},parseOpera11:function(i){var c=i.stack.split(`
`).filter(function(s){return!!s.match(n)&&!s.match(/^Error created at/)},this);return c.map(function(s){var d=s.split("@"),l=this.extractLocation(d.pop()),g=d.shift()||"",v=g.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0,p;g.match(/\(([^)]*)\)/)&&(p=g.replace(/^[^(]+\(([^)]*)\)$/,"$1"));var m=p===void 0||p==="[arguments not available]"?void 0:p.split(",");return new t({functionName:v,args:m,fileName:l[0],lineNumber:l[1],columnNumber:l[2],source:s})},this)}}});var $e=pe,te=function(e,t,n,r){var a=r&&r.redactedKeys?r.redactedKeys:[],o=r&&r.redactedPaths?r.redactedPaths:[];return JSON.stringify(Bt(e,a,o),t,n)},bt=20,yt=25e3,St=8,re="...";function Et(e){return e instanceof Error||/^\[object (Error|(Dom)?Exception)\]$/.test(Object.prototype.toString.call(e))}function Ce(e){return"[Throws: "+(e?e.message:"?")+"]"}function kt(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return!0;return!1}function Ot(e,t){for(var n=0,r=e.length;n<r;n++)if(t.indexOf(e[n])===0)return!0;return!1}function xt(e,t){for(var n=0,r=e.length;n<r;n++)if(typeof e[n]=="string"&&e[n].toLowerCase()===t.toLowerCase()||e[n]&&typeof e[n].test=="function"&&e[n].test(t))return!0;return!1}function Pt(e){return Object.prototype.toString.call(e)==="[object Array]"}function wt(e,t){try{return e[t]}catch(n){return Ce(n)}}function Bt(e,t,n){var r=[],a=0;function o(i,c){function s(){return c.length>St&&a>yt}if(a++,c.length>bt||s())return re;if(i===null||typeof i!="object")return i;if(kt(r,i))return"[Circular]";if(r.push(i),typeof i.toJSON=="function")try{a--;var d=o(i.toJSON(),c);return r.pop(),d}catch(y){return Ce(y)}var l=Et(i);if(l){a--;var g=o({name:i.name,message:i.message},c);return r.pop(),g}if(Pt(i)){for(var v=[],p=0,m=i.length;p<m;p++){if(s()){v.push(re);break}v.push(o(i[p],c.concat("[]")))}return r.pop(),v}var S={};try{for(var _ in i)if(Object.prototype.hasOwnProperty.call(i,_)){if(Ot(n,c.join("."))&&xt(t,_)){S[_]="[REDACTED]";continue}if(s()){S[_]=re;break}S[_]=o(wt(i,_),c.concat(_))}}catch{}return r.pop(),S}return o(e,[])}function Ie(e,t,n,r){if(typeof n=="string"){r===void 0?r=null:r!==null&&typeof r!="string"&&(r=te(r));var a=t[n];if(typeof a=="number"){e[a]={name:n,variant:r};return}e.push({name:n,variant:r}),t[n]=e.length-1}}function Nt(e,t,n){if($(t)){for(var r=0;r<t.length;++r){var a=t[r];a===null||typeof a!="object"||Ie(e,n,a.name,a.variant)}return e}}function Mt(e){return M(b(e,Boolean),function(t){var n=t.name,r=t.variant,a={featureFlag:n};return typeof r=="string"&&(a.variant=r),a})}function Lt(e,t,n){var r=t[n];typeof r=="number"&&(e[r]=null,delete t[n])}var H={add:Ie,clear:Lt,merge:Nt,toEventApi:Mt},ne=function(e){return!!e&&(!!e.stack||!!e.stacktrace||!!e["opera#sourceloc"])&&typeof(e.stack||e.stacktrace||e["opera#sourceloc"])=="string"&&e.stack!==e.name+": "+e.message},Tt=$t;function $t(e){switch(Object.prototype.toString.call(e)){case"[object Error]":return!0;case"[object Exception]":return!0;case"[object DOMException]":return!0;default:return e instanceof Error}}var ae=Tt,Ct=function(e,t,n,r){var a;if(t){var o;if(n===null)return De(e,t);typeof n=="object"&&(o=n),typeof n=="string"&&(o=(a={},a[n]=r,a)),o&&(t==="__proto__"||t==="constructor"||t==="prototype"||(e[t]||(e[t]={}),e[t]=B({},e[t],o)))}},It=function(e,t,n){if(typeof t=="string"){if(!n)return e[t];if(e[t])return e[t][n]}},De=function(e,t,n){if(typeof t=="string"){if(!n){delete e[t];return}t==="__proto__"||t==="constructor"||t==="prototype"||e[t]&&delete e[t][n]}},U={add:Ct,get:It,clear:De};function ge(){return ge=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ge.apply(this,arguments)}var A=function(){function e(n,r,a,o,i){a===void 0&&(a=[]),o===void 0&&(o=Rt()),this.apiKey=void 0,this.context=void 0,this.groupingHash=void 0,this.originalError=i,this._handledState=o,this.severity=this._handledState.severity,this.unhandled=this._handledState.unhandled,this.app={},this.device={},this.request={},this.breadcrumbs=[],this.threads=[],this._metadata={},this._features=[],this._featuresIndex={},this._user={},this._session=void 0,this._correlation=void 0,this.errors=[Re(n,r,e.__type,a)]}var t=e.prototype;return t.addMetadata=function(r,a,o){return U.add(this._metadata,r,a,o)},t.setTraceCorrelation=function(r,a){typeof r=="string"&&(this._correlation=ge({traceId:r},typeof a=="string"?{spanId:a}:{}))},t.getMetadata=function(r,a){return U.get(this._metadata,r,a)},t.clearMetadata=function(r,a){return U.clear(this._metadata,r,a)},t.addFeatureFlag=function(r,a){a===void 0&&(a=null),H.add(this._features,this._featuresIndex,r,a)},t.addFeatureFlags=function(r){H.merge(this._features,r,this._featuresIndex)},t.getFeatureFlags=function(){return H.toEventApi(this._features)},t.clearFeatureFlag=function(r){H.clear(this._features,this._featuresIndex,r)},t.clearFeatureFlags=function(){this._features=[],this._featuresIndex={}},t.getUser=function(){return this._user},t.setUser=function(r,a,o){this._user={id:r,email:a,name:o}},t.toJSON=function(){return{payloadVersion:"4",exceptions:M(this.errors,function(r){return B({},r,{message:r.errorMessage})}),severity:this.severity,unhandled:this._handledState.unhandled,severityReason:this._handledState.severityReason,app:this.app,device:this.device,request:this.request,breadcrumbs:this.breadcrumbs,context:this.context,groupingHash:this.groupingHash,metaData:this._metadata,user:this._user,session:this._session,featureFlags:this.getFeatureFlags(),correlation:this._correlation}},e}(),Dt=function(e){var t={file:e.fileName,method:At(e.functionName),lineNumber:e.lineNumber,columnNumber:e.columnNumber,code:void 0,inProject:void 0};return t.lineNumber>-1&&!t.file&&!t.method&&(t.file="global code"),t},At=function(e){return/^global code$/i.test(e)?"global code":e},Rt=function(){return{unhandled:!1,severity:"warning",severityReason:{type:"handledException"}}},Ae=function(e){return typeof e=="string"?e:""};function Re(e,t,n,r){return{errorClass:Ae(e),errorMessage:Ae(t),type:n,stacktrace:h(r,function(a,o){var i=Dt(o);try{return JSON.stringify(i)==="{}"?a:a.concat(i)}catch{return a}},[])}}function Fe(e){return e.cause?[e].concat(Fe(e.cause)):[e]}A.getStacktrace=function(e,t,n){if(ne(e))return $e.parse(e).slice(t);try{return b(he.backtrace(),function(r){return(r.functionName||"").indexOf("StackGenerator$$")===-1}).slice(1+n)}catch{return[]}},A.create=function(e,t,n,r,a,o){a===void 0&&(a=0);var i=He(e,t,r,o),c=i[0],s=i[1],d;try{var l=A.getStacktrace(c,s>0?1+s+a:0,1+a);d=new A(c.name,c.message,l,n,e)}catch{d=new A(c.name,c.message,[],n,e)}if(c.name==="InvalidError"&&d.addMetadata(""+r,"non-error parameter",je(e)),c.cause){var g,v=Fe(c).slice(1),p=M(v,function(m){var S=ae(m)&&ne(m)?$e.parse(m):[],_=He(m,!0,"error cause"),y=_[0];return y.name==="InvalidError"&&d.addMetadata("error cause",je(m)),Re(y.name,y.message,A.__type,S)});(g=d.errors).push.apply(g,p)}return d};var je=function(e){return e===null?"null":e===void 0?"undefined":e},He=function(e,t,n,r){var a,o=0,i=function(c){var s=n==="error cause"?"was":"received";r&&r.warn(n+" "+s+' a non-error: "'+c+'"');var d=new Error(n+" "+s+' a non-error. See "'+n+'" tab for more detail.');return d.name="InvalidError",d};if(!t)ae(e)?a=e:(a=i(typeof e),o+=2);else switch(typeof e){case"string":case"number":case"boolean":a=new Error(String(e)),o+=1;break;case"function":a=i("function"),o+=2;break;case"object":e!==null&&ae(e)?a=e:e!==null&&Ft(e)?(a=new Error(e.message||e.errorMessage),a.name=e.name||e.errorClass,o+=1):(a=i(e===null?"null":"unsupported object"),o+=2);break;default:a=i("nothing"),o+=2}if(!ne(a))try{throw a}catch(c){ne(c)&&(a=c,o=1)}return[a,o]};A.__type="browserjs";var Ft=function(e){return(typeof e.name=="string"||typeof e.errorClass=="string")&&(typeof e.message=="string"||typeof e.errorMessage=="string")},ve=A,jt=function(e,t,n){var r=0,a=function(){if(r>=e.length)return n(null,!0);t(e[r],function(o,i){if(o)return n(o);if(i===!1)return n(null,!1);r++,a()})};a()},Ht=function(e,t,n,r){var a=function(o,i){if(typeof o!="function")return i(null);try{if(o.length!==2){var c=o(t);return c&&typeof c.then=="function"?c.then(function(s){return setTimeout(function(){return i(null,s)})},function(s){setTimeout(function(){return n(s),i(null,!0)})}):i(null,c)}o(t,function(s,d){if(s)return n(s),i(null);i(null,d)})}catch(s){n(s),i(null)}};jt(e,a,r)},qe=function(e,t,n,r){for(var a=!1,o=e.slice();!a&&o.length;)try{a=o.pop()(t)===!1}catch(i){r.error("Error occurred in "+n+" callback, continuing anyway…"),r.error(i)}return a},_e=function(t,n){var r="000000000"+t;return r.substr(r.length-n)},Ve=typeof window=="object"?window:self,Ue=0;for(var qt in Ve)Object.hasOwnProperty.call(Ve,qt)&&Ue++;var Vt=navigator.mimeTypes?navigator.mimeTypes.length:0,Ut=_e((Vt+navigator.userAgent.length).toString(36)+Ue.toString(36),4),Ke=function(){return Ut},Kt=function(t){return typeof t=="string"&&/^c[a-z0-9]{20,32}$/.test(t)},J=0,me=4,ie=36,Xe=Math.pow(ie,me);function ze(){return _e((Math.random()*Xe<<0).toString(ie),me)}function Xt(){return J=J<Xe?J:0,J++,J-1}function be(){var e="c",t=new Date().getTime().toString(ie),n=_e(Xt().toString(ie),me),r=Ke(),a=ze()+ze();return e+t+n+r+a}be.fingerprint=Ke,be.isCuid=Kt;var Ge=be,zt=function(){function e(){this.id=Ge(),this.startedAt=new Date,this._handled=0,this._unhandled=0,this._user={},this.app={},this.device={}}var t=e.prototype;return t.getUser=function(){return this._user},t.setUser=function(r,a,o){this._user={id:r,email:a,name:o}},t.toJSON=function(){return{id:this.id,startedAt:this.startedAt,events:{handled:this._handled,unhandled:this._unhandled}}},t._track=function(r){this[r._handledState.unhandled?"_unhandled":"_handled"]+=1},e}(),ye=zt,Gt=H.add,Jt=H.clear,Se=H.merge,R=function(){},Wt=function(){function e(n,r,a,o){var i=this;r===void 0&&(r=Z.schema),a===void 0&&(a=[]),this._notifier=o,this._config={},this._schema=r,this._delivery={sendSession:R,sendEvent:R},this._logger={debug:R,info:R,warn:R,error:R},this._plugins={},this._breadcrumbs=[],this._session=null,this._metadata={},this._featuresIndex={},this._features=[],this._context=void 0,this._user={},this._cbs={e:[],s:[],sp:[],b:[]},this.Client=e,this.Event=ve,this.Breadcrumb=le,this.Session=ye,this._config=this._configure(n,a),M(a.concat(this._config.plugins),function(d){d&&i._loadPlugin(d)}),this._depth=1;var c=this,s=this.notify;this.notify=function(){return s.apply(c,arguments)}}var t=e.prototype;return t.addMetadata=function(r,a,o){return U.add(this._metadata,r,a,o)},t.getMetadata=function(r,a){return U.get(this._metadata,r,a)},t.clearMetadata=function(r,a){return U.clear(this._metadata,r,a)},t.addFeatureFlag=function(r,a){a===void 0&&(a=null),Gt(this._features,this._featuresIndex,r,a)},t.addFeatureFlags=function(r){Se(this._features,r,this._featuresIndex)},t.clearFeatureFlag=function(r){Jt(this._features,this._featuresIndex,r)},t.clearFeatureFlags=function(){this._features=[],this._featuresIndex={}},t.getContext=function(){return this._context},t.setContext=function(r){this._context=r},t._configure=function(r,a){var o=h(a,function(d,l){return l&&l.configSchema?B({},d,l.configSchema):d},this._schema),i=h(T(o),function(d,l){var g=o[l].defaultValue(r[l]);if(r[l]!==void 0){var v=o[l].validate(r[l]);v?o[l].allowPartialObject?d.config[l]=B(g,r[l]):d.config[l]=r[l]:(d.errors[l]=o[l].message,d.config[l]=g)}else d.config[l]=g;return d},{errors:{},config:{}}),c=i.errors,s=i.config;if(o.apiKey){if(!s.apiKey)throw new Error("No Bugsnag API Key set");/^[0-9a-f]{32}$/i.test(s.apiKey)||(c.apiKey="should be a string of 32 hexadecimal characters")}return this._metadata=B({},s.metadata),Se(this._features,s.featureFlags,this._featuresIndex),this._user=B({},s.user),this._context=s.context,s.logger&&(this._logger=s.logger),s.onError&&(this._cbs.e=this._cbs.e.concat(s.onError)),s.onBreadcrumb&&(this._cbs.b=this._cbs.b.concat(s.onBreadcrumb)),s.onSession&&(this._cbs.s=this._cbs.s.concat(s.onSession)),T(c).length&&this._logger.warn(Yt(c,r)),s},t.getUser=function(){return this._user},t.setUser=function(r,a,o){this._user={id:r,email:a,name:o}},t._loadPlugin=function(r){var a=r.load(this);r.name&&(this._plugins["~"+r.name+"~"]=a)},t.getPlugin=function(r){return this._plugins["~"+r+"~"]},t._setDelivery=function(r){this._delivery=r(this)},t.startSession=function(){var r=new ye;r.app.releaseStage=this._config.releaseStage,r.app.version=this._config.appVersion,r.app.type=this._config.appType,r._user=B({},this._user);var a=qe(this._cbs.s,r,"onSession",this._logger);return a?(this._logger.debug("Session not started due to onSession callback"),this):this._sessionDelegate.startSession(this,r)},t.addOnError=function(r,a){a===void 0&&(a=!1),this._cbs.e[a?"unshift":"push"](r)},t.removeOnError=function(r){this._cbs.e=b(this._cbs.e,function(a){return a!==r})},t._addOnSessionPayload=function(r){this._cbs.sp.push(r)},t.addOnSession=function(r){this._cbs.s.push(r)},t.removeOnSession=function(r){this._cbs.s=b(this._cbs.s,function(a){return a!==r})},t.addOnBreadcrumb=function(r,a){a===void 0&&(a=!1),this._cbs.b[a?"unshift":"push"](r)},t.removeOnBreadcrumb=function(r){this._cbs.b=b(this._cbs.b,function(a){return a!==r})},t.pauseSession=function(){return this._sessionDelegate.pauseSession(this)},t.resumeSession=function(){return this._sessionDelegate.resumeSession(this)},t.leaveBreadcrumb=function(r,a,o){if(r=typeof r=="string"?r:"",o=typeof o=="string"&&k(u,o)?o:"manual",a=typeof a=="object"&&a!==null?a:{},!!r){var i=new le(r,a,o),c=qe(this._cbs.b,i,"onBreadcrumb",this._logger);if(c){this._logger.debug("Breadcrumb not attached due to onBreadcrumb callback");return}this._breadcrumbs.push(i),this._breadcrumbs.length>this._config.maxBreadcrumbs&&(this._breadcrumbs=this._breadcrumbs.slice(this._breadcrumbs.length-this._config.maxBreadcrumbs))}},t._isBreadcrumbTypeEnabled=function(r){var a=this._config.enabledBreadcrumbTypes;return a===null||k(a,r)},t.notify=function(r,a,o){o===void 0&&(o=R);var i=ve.create(r,!0,void 0,"notify()",this._depth+1,this._logger);this._notify(i,a,o)},t._notify=function(r,a,o){var i=this;if(o===void 0&&(o=R),r.app=B({},r.app,{releaseStage:this._config.releaseStage,version:this._config.appVersion,type:this._config.appType}),r.context=r.context||this._context,r._metadata=B({},r._metadata,this._metadata),r._user=B({},r._user,this._user),r.breadcrumbs=this._breadcrumbs.slice(),Se(r._features,this._features,r._featuresIndex),this._config.enabledReleaseStages!==null&&!k(this._config.enabledReleaseStages,this._config.releaseStage))return this._logger.warn("Event not sent due to releaseStage/enabledReleaseStages configuration"),o(null,r);var c=r.severity,s=function(l){i._logger.error("Error occurred in onError callback, continuing anyway…"),i._logger.error(l)},d=[].concat(this._cbs.e).concat(a);Ht(d,r,s,function(l,g){if(l&&s(l),!g)return i._logger.debug("Event not sent due to onError callback"),o(null,r);i._isBreadcrumbTypeEnabled("error")&&e.prototype.leaveBreadcrumb.call(i,r.errors[0].errorClass,{errorClass:r.errors[0].errorClass,errorMessage:r.errors[0].errorMessage,severity:r.severity},"error"),c!==r.severity&&(r._handledState.severityReason={type:"userCallbackSetSeverity"}),r.unhandled!==r._handledState.unhandled&&(r._handledState.severityReason.unhandledOverridden=!0,r._handledState.unhandled=r.unhandled),i._session&&(i._session._track(r),r._session=i._session),i._delivery.sendEvent({apiKey:r.apiKey||i._config.apiKey,notifier:i._notifier,events:[r]},function(v){return o(v,r)})})},e}(),Yt=function(e,t){var n=new Error(`Invalid configuration
`+M(T(e),function(r){return"  - "+r+" "+e[r]+", got "+Qt(t[r])}).join(`

`));return n},Qt=function(e){switch(typeof e){case"string":case"number":case"object":return JSON.stringify(e);default:return String(e)}},Ee=Wt,K={},Je=["events.[].metaData","events.[].breadcrumbs.[].metaData","events.[].request"];K.event=function(e,t){var n=te(e,null,null,{redactedPaths:Je,redactedKeys:t});return n.length>1e6&&(e.events[0]._metadata={notifier:`WARNING!
Serialized payload was `+n.length/1e6+`MB (limit = 1MB)
metadata was removed`},n=te(e,null,null,{redactedPaths:Je,redactedKeys:t})),n},K.session=function(e,t){var n=te(e,null,null);return n};var ke={};ke=function(e,t){return t===void 0&&(t=window),{sendEvent:function(n,r){if(r===void 0&&(r=function(){}),e._config.endpoints.notify===null){var a=new Error("Event not sent due to incomplete endpoint configuration");return r(a)}var o=We(e._config,"notify","4",t),i=K.event(n,e._config.redactedKeys),c=new t.XDomainRequest;c.onload=function(){r(null)},c.onerror=function(){var s=new Error("Event failed to send");e._logger.error("Event failed to send…",s),i.length>1e6&&e._logger.warn("Event oversized ("+(i.length/1e6).toFixed(2)+" MB)"),r(s)},c.open("POST",o),setTimeout(function(){try{c.send(i)}catch(s){e._logger.error(s),r(s)}},0)},sendSession:function(n,r){if(r===void 0&&(r=function(){}),e._config.endpoints.sessions===null){var a=new Error("Session not sent due to incomplete endpoint configuration");return r(a)}var o=We(e._config,"sessions","1",t),i=new t.XDomainRequest;i.onload=function(){r(null)},i.open("POST",o),setTimeout(function(){try{i.send(K.session(n,e._config.redactedKeys))}catch(c){e._logger.error(c),r(c)}},0)}}};var We=function(e,t,n,r){var a=JSON.parse(JSON.stringify(new Date)),o=Zt(e.endpoints[t],r.location.protocol);return o+"?apiKey="+encodeURIComponent(e.apiKey)+"&payloadVersion="+n+"&sentAt="+encodeURIComponent(a)},Zt=ke._matchPageProtocol=function(e,t){return t==="http:"?e.replace(/^https:/,"http:"):e},er=function(e,t){return t===void 0&&(t=window),{sendEvent:function(n,r){r===void 0&&(r=function(){});try{var a=e._config.endpoints.notify;if(a===null){var o=new Error("Event not sent due to incomplete endpoint configuration");return r(o)}var i=new t.XMLHttpRequest,c=K.event(n,e._config.redactedKeys);i.onreadystatechange=function(){if(i.readyState===t.XMLHttpRequest.DONE){var s=i.status;if(s===0||s>=400){var d=new Error("Request failed with status "+s);e._logger.error("Event failed to send…",d),c.length>1e6&&e._logger.warn("Event oversized ("+(c.length/1e6).toFixed(2)+" MB)"),r(d)}else r(null)}},i.open("POST",a),i.setRequestHeader("Content-Type","application/json"),i.setRequestHeader("Bugsnag-Api-Key",n.apiKey||e._config.apiKey),i.setRequestHeader("Bugsnag-Payload-Version","4"),i.setRequestHeader("Bugsnag-Sent-At",new Date().toISOString()),i.send(c)}catch(s){e._logger.error(s)}},sendSession:function(n,r){r===void 0&&(r=function(){});try{var a=e._config.endpoints.sessions;if(a===null){var o=new Error("Session not sent due to incomplete endpoint configuration");return r(o)}var i=new t.XMLHttpRequest;i.onreadystatechange=function(){if(i.readyState===t.XMLHttpRequest.DONE){var c=i.status;if(c===0||c>=400){var s=new Error("Request failed with status "+c);e._logger.error("Session failed to send…",s),r(s)}else r(null)}},i.open("POST",a),i.setRequestHeader("Content-Type","application/json"),i.setRequestHeader("Bugsnag-Api-Key",e._config.apiKey),i.setRequestHeader("Bugsnag-Payload-Version","1"),i.setRequestHeader("Bugsnag-Sent-At",new Date().toISOString()),i.send(K.session(n,e._config.redactedKeys))}catch(c){e._logger.error(c)}}}},Ye=new Date,tr=function(){Ye=new Date},rr={name:"appDuration",load:function(e){return e.addOnError(function(t){var n=new Date;t.app.duration=n-Ye},!0),{reset:tr}}},nr=function(e){return e===void 0&&(e=window),{load:function(t){t.addOnError(function(n){n.context===void 0&&(n.context=e.location.pathname)},!0)}}},Qe="bugsnag-anonymous-id",ar=function(e){try{var t=e.localStorage,n=t.getItem(Qe);return n&&/^c[a-z0-9]{20,32}$/.test(n)||(n=Ge(),t.setItem(Qe,n)),n}catch{}},ir=function(e,t){return e===void 0&&(e=navigator),t===void 0&&(t=window),{load:function(n){var r={locale:e.browserLanguage||e.systemLanguage||e.userLanguage||e.language,userAgent:e.userAgent};t&&t.screen&&t.screen.orientation&&t.screen.orientation.type?r.orientation=t.screen.orientation.type:t&&t.document&&(r.orientation=t.document.documentElement.clientWidth>t.document.documentElement.clientHeight?"landscape":"portrait"),n._config.generateAnonymousId&&(r.id=ar(t)),n.addOnSession(function(a){a.device=B({},a.device,r),n._config.collectUserIp||Ze(a)}),n.addOnError(function(a){a.device=B({},a.device,r,{time:new Date}),n._config.collectUserIp||Ze(a)},!0)},configSchema:{generateAnonymousId:{validate:function(n){return n===!0||n===!1},defaultValue:function(){return!0},message:"should be true|false"}}}},Ze=function(e){var t=e.getUser();(!t||!t.id)&&e.setUser(e.device.id)},or=function(e){return e===void 0&&(e=window),{load:function(t){t.addOnError(function(n){n.request&&n.request.url||(n.request=B({},n.request,{url:e.location.href}))},!0)}}},sr={load:function(e){e._sessionDelegate=ur}},ur={startSession:function(e,t){var n=e;return n._session=t,n._pausedSession=null,n._config.enabledReleaseStages!==null&&!k(n._config.enabledReleaseStages,n._config.releaseStage)?(n._logger.warn("Session not sent due to releaseStage/enabledReleaseStages configuration"),n):(n._delivery.sendSession({notifier:n._notifier,device:t.device,app:t.app,sessions:[{id:t.id,startedAt:t.startedAt,user:t._user}]}),n)},resumeSession:function(e){return e._session?e:e._pausedSession?(e._session=e._pausedSession,e._pausedSession=null,e):e.startSession()},pauseSession:function(e){e._pausedSession=e._session,e._session=null}},cr={load:function(e){e._config.collectUserIp||e.addOnError(function(t){t._user&&typeof t._user.id>"u"&&delete t._user.id,t._user=B({id:"[REDACTED]"},t._user),t.request=B({clientIp:"[REDACTED]"},t.request)})},configSchema:{collectUserIp:{defaultValue:function(){return!0},message:"should be true|false",validate:function(e){return e===!0||e===!1}}}},et={};et.load=function(e){var t=/^(local-)?dev(elopment)?$/.test(e._config.releaseStage);t||!e._isBreadcrumbTypeEnabled("log")||M(dr,function(n){var r=console[n];console[n]=function(){for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];e.leaveBreadcrumb("Console output",h(o,function(c,s,d){var l="[Unknown value]";try{l=String(s)}catch{}if(l==="[object Object]")try{l=JSON.stringify(s)}catch{}return c["["+d+"]"]=l,c},{severity:n.indexOf("group")===0?"log":n}),"log"),r.apply(console,o)},console[n]._restore=function(){console[n]=r}})};var dr=b(["log","debug","info","warn","error"],function(e){return typeof console<"u"&&typeof console[e]=="function"}),tt=200,rt=5e5,fr=function(e,t){return e===void 0&&(e=document),t===void 0&&(t=window),{load:function(n){if(!n._config.trackInlineScripts)return;var r=t.location.href,a="",o=!!e.attachEvent,i=o?e.readyState==="complete":e.readyState!=="loading",c=function(){return e.documentElement.outerHTML};a=c();var s=e.onreadystatechange;e.onreadystatechange=function(){e.readyState==="interactive"&&(a=c(),i=!0);try{s.apply(this,arguments)}catch{}};var d=null,l=function(_){d=_},g=function(){var _=e.currentScript||d;if(!_&&!i){var y=e.scripts||e.getElementsByTagName("script");_=y[y.length-1]}return _},v=function(_){(!i||!a)&&(a=c());var y=["<!-- DOC START -->"].concat(a.split(`
`)),P=_-1,O=Math.max(P-3,0),w=Math.min(P+3,y.length);return h(y.slice(O,w),function(x,C,W){return x[O+1+W]=C.length<=tt?C:C.substr(0,tt),x},{})};n.addOnError(function(_){_.errors[0].stacktrace=b(_.errors[0].stacktrace,function(x){return!/__trace__$/.test(x.method)});var y=_.errors[0].stacktrace[0],P=function(x){return x.replace(/#.*$/,"").replace(/\?.*$/,"")};if(!(y&&y.file&&P(y.file)!==P(r))){var O=g();if(O){var w=O.innerHTML;_.addMetadata("script","content",w.length<=rt?w:w.substr(0,rt)),y&&y.lineNumber&&(y.code=v(y.lineNumber))}}},!0);var p=M(["setTimeout","setInterval","setImmediate","requestAnimationFrame"],function(_){return Oe(t,_,function(y){return S(y,function(P){return{get:function(){return P[0]},replace:function(O){P[0]=O}}})})}),m=p[0];M(["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],function(_){!t[_]||!t[_].prototype||!Object.prototype.hasOwnProperty.call(t[_].prototype,"addEventListener")||(Oe(t[_].prototype,"addEventListener",function(y){return S(y,nt)}),Oe(t[_].prototype,"removeEventListener",function(y){return S(y,nt,!0)}))});function S(_,y,P){return P===void 0&&(P=!1),function(){var O=[].slice.call(arguments);try{var w=y(O),x=w.get();if(P&&_.apply(this,O),typeof x!="function")return _.apply(this,O);if(x.__trace__)w.replace(x.__trace__);else{var C=g();x.__trace__=function(){l(C),m(function(){l(null)},0);var Pr=x.apply(this,arguments);return l(null),Pr},x.__trace__.__trace__=x.__trace__,w.replace(x.__trace__)}}catch{}if(_.apply)return _.apply(this,O);switch(O.length){case 1:return _(O[0]);case 2:return _(O[0],O[1]);default:return _()}}}},configSchema:{trackInlineScripts:{validate:function(n){return n===!0||n===!1},defaultValue:function(){return!0},message:"should be true|false"}}}};function Oe(e,t,n){var r=e[t];if(!r)return r;var a=n(r);return e[t]=a,r}function nt(e){var t=!!e[1]&&typeof e[1].handleEvent=="function";return{get:function(){return t?e[1].handleEvent:e[1]},replace:function(n){t?e[1].handleEvent=n:e[1]=n}}}var lr=function(e){return e===void 0&&(e=window),{load:function(t){"addEventListener"in e&&t._isBreadcrumbTypeEnabled("user")&&e.addEventListener("click",function(n){var r,a;try{r=pr(n.target),a=at(n.target,e)}catch{r="[hidden]",a="[hidden]",t._logger.error("Cross domain error when tracking click event. See docs: https://tinyurl.com/yy3rn63z")}t.leaveBreadcrumb("UI click",{targetText:r,targetSelector:a},"user")},!0)}}},hr=/^\s*([^\s][\s\S]{0,139}[^\s])?\s*/;function pr(e){var t=e.textContent||e.innerText||"";return!t&&(e.type==="submit"||e.type==="button")&&(t=e.value),t=t.replace(hr,"$1"),t.length>140?t.slice(0,135)+"(...)":t}function at(e,t){var n=[e.tagName];if(e.id&&n.push("#"+e.id),e.className&&e.className.length&&n.push("."+e.className.split(" ").join(".")),!t.document.querySelectorAll||!Array.prototype.indexOf)return n.join("");try{if(t.document.querySelectorAll(n.join("")).length===1)return n.join("")}catch{return n.join("")}if(e.parentNode.childNodes.length>1){var r=Array.prototype.indexOf.call(e.parentNode.childNodes,e)+1;n.push(":nth-child("+r+")")}return t.document.querySelectorAll(n.join("")).length===1?n.join(""):e.parentNode?at(e.parentNode,t)+" > "+n.join(""):n.join("")}var it={};it=function(e){e===void 0&&(e=window);var t={load:function(n){if("addEventListener"in e&&n._isBreadcrumbTypeEnabled("navigation")){var r=function(a){return function(){return n.leaveBreadcrumb(a,{},"navigation")}};e.addEventListener("pagehide",r("Page hidden"),!0),e.addEventListener("pageshow",r("Page shown"),!0),e.addEventListener("load",r("Page loaded"),!0),e.document.addEventListener("DOMContentLoaded",r("DOMContentLoaded"),!0),e.addEventListener("load",function(){return e.addEventListener("popstate",r("Navigated back"),!0)}),e.addEventListener("hashchange",function(a){var o=a.oldURL?{from:oe(a.oldURL,e),to:oe(a.newURL,e),state:st(e)}:{to:oe(e.location.href,e)};n.leaveBreadcrumb("Hash changed",o,"navigation")},!0),e.history.pushState&&ot(n,e.history,"pushState",e,!0),e.history.replaceState&&ot(n,e.history,"replaceState",e)}}};return t};var oe=function(e,t){var n=t.document.createElement("A");return n.href=e,""+n.pathname+n.search+n.hash},gr=function(e,t,n,r){var a=oe(e.location.href,e);return{title:n,state:t,prevState:st(e),to:r||a,from:a}},ot=function(e,t,n,r,a){a===void 0&&(a=!1);var o=t[n];t[n]=function(i,c,s){e.leaveBreadcrumb("History "+n,gr(r,i,c,s),"navigation"),a&&typeof e.resetEventCount=="function"&&e.resetEventCount(),o.apply(t,[i,c].concat(s!==void 0?s:[]))}},st=function(e){try{return e.history.state}catch{}},X="request",vr=function(e,t){e===void 0&&(e=[]),t===void 0&&(t=window);var n={load:function(r){if(!r._isBreadcrumbTypeEnabled("request"))return;var a=[r._config.endpoints.notify,r._config.endpoints.sessions].concat(e);o(),s();function o(){if(!(!("addEventListener"in t.XMLHttpRequest.prototype)||!("WeakMap"in t))){var g=new WeakMap,v=new WeakMap,p=t.XMLHttpRequest.prototype.open;t.XMLHttpRequest.prototype.open=function(_,y){this&&g.set(this,{method:_,url:y}),p.apply(this,arguments)};var m=t.XMLHttpRequest.prototype.send;t.XMLHttpRequest.prototype.send=function(_){var y=this,P=g.get(this);if(P){var O=v.get(this);O&&(this.removeEventListener("load",O.load),this.removeEventListener("error",O.error));var w=new Date,x=function(){return c(P.method,P.url,se(w))},C=function(){return i(P.method,P.url,y.status,se(w))};this.addEventListener("load",C),this.addEventListener("error",x),this&&v.set(this,{load:C,error:x})}m.apply(this,arguments)}}}function i(g,v,p,m){if(v===void 0){r._logger.warn("The request URL is no longer present on this XMLHttpRequest. A breadcrumb cannot be left for this request.");return}if(!(typeof v=="string"&&k(a,v.replace(/\?.*$/,"")))){var S={status:p,method:String(g),url:String(v),duration:m};p>=400?r.leaveBreadcrumb("XMLHttpRequest failed",S,X):r.leaveBreadcrumb("XMLHttpRequest succeeded",S,X)}}function c(g,v,p){if(v===void 0){r._logger.warn("The request URL is no longer present on this XMLHttpRequest. A breadcrumb cannot be left for this request.");return}typeof v=="string"&&k(a,v.replace(/\?.*$/,""))||r.leaveBreadcrumb("XMLHttpRequest error",{method:String(g),url:String(v),duration:p},X)}function s(){if(!(!("fetch"in t)||t.fetch.polyfill)){var g=t.fetch;t.fetch=function(){var p=arguments,m=arguments[0],S=arguments[1],_,y=null;return m&&typeof m=="object"?(y=m.url,S&&"method"in S?_=S.method:m&&"method"in m&&(_=m.method)):(y=m,S&&"method"in S&&(_=S.method)),_===void 0&&(_="GET"),new Promise(function(P,O){var w=new Date;g.apply(void 0,p).then(function(x){d(x,_,y,se(w)),P(x)}).catch(function(x){l(_,y,se(w)),O(x)})})}}}var d=function(g,v,p,m){var S={method:String(v),status:g.status,url:String(p),duration:m};g.status>=400?r.leaveBreadcrumb("fetch() failed",S,X):r.leaveBreadcrumb("fetch() succeeded",S,X)},l=function(g,v,p){r.leaveBreadcrumb("fetch() error",{method:String(g),url:String(v),duration:p},X)}}};return n},se=function(e){return e&&new Date-e},_r={load:function(e){var t=0;e.addOnError(function(n){if(t>=e._config.maxEvents)return e._logger.warn("Cancelling event send due to maxEvents per session limit of "+e._config.maxEvents+" being reached"),!1;t++}),e.resetEventCount=function(){t=0}},configSchema:{maxEvents:{defaultValue:function(){return 10},message:"should be a positive integer ≤100",validate:function(e){return Le(1,100)(e)}}}},xe={};xe={load:function(e){e.addOnError(function(t){var n=h(t.errors,function(r,a){return r.concat(a.stacktrace)},[]);M(n,function(r){r.file=mr(r.file)})})}};var mr=xe._strip=function(e){return typeof e=="string"?e.replace(/\?.*$/,"").replace(/#.*$/,""):e},br=function(e,t){return e===void 0&&(e=window),t===void 0&&(t="window onerror"),{load:function(n){if(!n._config.autoDetectErrors||!n._config.enabledErrorTypes.unhandledExceptions)return;function r(o,i,c,s,d){if(c===0&&/Script error\.?/.test(o))n._logger.warn("Ignoring cross-domain or eval script error. See docs: https://tinyurl.com/yy3rn63z");else{var l={severity:"error",unhandled:!0,severityReason:{type:"unhandledException"}},g;if(d)g=n.Event.create(d,!0,l,t,1),ut(g.errors[0].stacktrace,i,c,s);else if(typeof o=="object"&&o!==null&&(!i||typeof i!="string")&&!c&&!s&&!d){var v=o.type?"Event: "+o.type:"Error",p=o.message||o.detail||"";g=n.Event.create({name:v,message:p},!0,l,t,1),g.originalError=o,g.addMetadata(t,{event:o,extraParameters:i})}else g=n.Event.create(o,!0,l,t,1),ut(g.errors[0].stacktrace,i,c,s);n._notify(g)}typeof a=="function"&&a.apply(this,arguments)}var a=e.onerror;e.onerror=r}}},ut=function(e,t,n,r){e[0]||e.push({});var a=e[0];!a.file&&typeof t=="string"&&(a.file=t),!a.lineNumber&&Pe(n)&&(a.lineNumber=n),a.columnNumber||(Pe(r)?a.columnNumber=r:window.event&&Pe(window.event.errorCharacter)&&(a.columnNumber=window.event.errorCharacter))},Pe=function(e){return typeof e=="number"&&String.call(e)!=="NaN"},yr=function(e){e===void 0&&(e=window);var t={load:function(n){if(!(!n._config.autoDetectErrors||!n._config.enabledErrorTypes.unhandledRejections)){var r=function(a){var o=a.reason,i=!1;try{a.detail&&a.detail.reason&&(o=a.detail.reason,i=!0)}catch{}var c=!n._config.reportUnhandledPromiseRejectionsAsHandled,s=n.Event.create(o,!1,{severity:"error",unhandled:c,severityReason:{type:"unhandledPromiseRejection"}},"unhandledrejection handler",1,n._logger);i&&M(s.errors[0].stacktrace,Sr(o)),n._notify(s,function(d){if(ae(d.originalError)&&!d.originalError.stack){var l;d.addMetadata("unhandledRejection handler",(l={},l[Object.prototype.toString.call(d.originalError)]={name:d.originalError.name,message:d.originalError.message,code:d.originalError.code},l))}})};"addEventListener"in e?e.addEventListener("unhandledrejection",r):e.onunhandledrejection=function(a,o){r({detail:{reason:a,promise:o}})}}}};return t},Sr=function(e){return function(t){t.file!==e.toString()&&t.method&&(t.method=t.method.replace(/^\s+/,""))}},q={},Er="Bugsnag JavaScript",kr="8.1.2",Or="https://github.com/bugsnag/bugsnag-js",xr=B({},Z.schema,vt),N={_client:null,createClient:function(e){typeof e=="string"&&(e={apiKey:e}),e||(e={});var t=[rr,ir(),nr(),or(),_r,sr,cr,xe,br(),yr(),it(),lr(),vr(),et,fr()],n=new Ee(e,xr,t,{name:Er,version:kr,url:Or});return n._setDelivery(window.XDomainRequest?ke:er),n._logger.debug("Loaded!"),n.leaveBreadcrumb("Bugsnag loaded",{},"state"),n._config.autoTrackSessions?n.startSession():n},start:function(e){return N._client?(N._client._logger.warn("Bugsnag.start() was called more than once. Ignoring."),N._client):(N._client=N.createClient(e),N._client)},isStarted:function(){return N._client!=null}};return M(["resetEventCount"].concat(T(Ee.prototype)),function(e){/^_/.test(e)||(N[e]=function(){if(N._client){N._client._depth+=1;var t=N._client[e].apply(N._client,arguments);return N._client._depth-=1,t}})}),q=N,q.Client=Ee,q.Event=ve,q.Session=ye,q.Breadcrumb=le,q.default=N,q})})(Ne);var Me=Ne.exports,ct=Me;const Y=j(ct);class dt{constructor(f){E(this,"plugin");E(this,"metadata",{});E(this,"customMetaData");E(this,"beforeSend",f=>{const{originalError:u}=f;return this.plugin.isErrorIgnoredByCode(u)||this.plugin.isErrorIgnoredByMessage(u)?!1:(f.clearMetadata("global"),f.addMetadata("global",this.metadata),this.customMetaData&&(f.clearMetadata("custom"),f.addMetadata("custom",this.customMetaData)),!0)});this.plugin=f}configure(f){const{apiKey:u,buildVersion:h,releaseStage:b}=f;Y.start({apiKey:u,appVersion:h,releaseStage:b,autoDetectErrors:!0,autoTrackSessions:!0,onError:this.beforeSend})}setUser(f){const{id:u,name:h}=f,b=u??void 0,k=h??void 0;Y.setUser(b,void 0,k)}sendException(f,u){u&&(this.customMetaData=u),Y.notify(f)}setMetaData(f){this.metadata=f}addBreadcrumb(f){Y.leaveBreadcrumb(f)}}class ft{configure(f){}setUser(f){}sendException(f){}addBreadcrumb(f){}setMetaData(f){}}const{Utils:{Valid:ue,Object:V}}=Be;class lt extends F.Plugins.BasePlugin{constructor(){super(...arguments);E(this,"config");E(this,"adapter");E(this,"metadata",{});E(this,"feedbackPopup",null);E(this,"filterErrors",null);E(this,"feedbackAsync",async u=>{try{if(!this.feedbackPopup)return;let h="";u&&(h="error"in u?u.error:u.reason),await new Promise((b,k)=>{this.feedbackPopup&&(this.feedbackPopup.onYes(this.handleOnYes(b,h)),this.feedbackPopup.onNo(this.handleOnNo(k)),this.feedbackPopup.onScreenshot(this.handleOnScreenshot()),this.feedbackPopup.show(h))})}catch{}});E(this,"handleOnYes",(u,h)=>()=>{if(!this.feedbackPopup)return;const b=this.feedbackPopup.getFeedback()||"",k=this.feedbackPopup.getScreenshot();b&&this.sendException(new Error("User feedback"),{feedback:b,screenshot:k,error:h}),this.feedbackPopup.hide(),u()});E(this,"handleOnNo",u=>()=>{this.feedbackPopup&&(this.feedbackPopup.hide(),u(new Error("User canceled feedback")))});E(this,"handleOnScreenshot",()=>()=>{this.feedbackPopup&&this.getScreenshot().then(u=>{this.feedbackPopup&&this.feedbackPopup.setScreenshot(u)})});E(this,"initFeedbackTrackErrors",async()=>{if(this.config.feedback)try{await this.loadFeedbackPopup()}catch{}})}configure(u){this.config=u,this.filterErrors={Codes:{Accepted:[],Ignored:[]},Messages:{Accepted:[],Ignored:[]}},this.adapter=this.getAdapterByService(),this.adapter.configure(this.config)}getAdapterByService(){switch(this.config.service){case"BugSnag":return new dt(this);case"Sentry":return new ft}}setUser(u){var h;this.config.trackUser&&((h=this.adapter)==null||h.setUser(u))}sendException(u,h){var k;if(this.isErrorIgnoredByCode(u)||this.isErrorIgnoredByMessage(u))return;let b=this.metadata;h&&(b=V.merge(b,h)),(k=this.adapter)==null||k.sendException(u,b)}isErrorIgnoredByCode(u){if(!V.hasOwn(u,"code"))return!1;const{code:h}=u;if(!ue.isString(h)||!this.filterErrors)return!1;const{Accepted:b,Ignored:k}=this.filterErrors.Codes;return b.indexOf(h)>-1?!1:k.indexOf(h)>-1}isErrorIgnoredByMessage(u){if(!V.hasOwn(u,"message"))return!1;const{message:h}=u;if(!ue.isString(h)||!this.filterErrors)return!1;const{Accepted:b,Ignored:k}=this.filterErrors.Messages;return b.indexOf(h)>-1?!1:k.indexOf(h)>-1}addBreadcrumb(u){var h;(h=this.adapter)==null||h.addBreadcrumb(u)}addFilterErrors(u){this.filterErrors=V.merge(this.filterErrors,u)}addMetadata(u){var h;ue.isObject(u)&&(this.metadata=V.merge(this.metadata,u),(h=this.adapter)==null||h.setMetaData(this.metadata))}removeMetadata(u){var h;V.hasOwn(this.metadata,u)&&(this.metadata[u]=void 0,(h=this.adapter)==null||h.setMetaData(this.metadata))}getScreenshot(){const u=document.getElementById("GameCanvas");return new Promise(h=>{requestAnimationFrame(()=>{h(u.toDataURL("image/jpeg",.4))})})}async loadFeedbackPopup(){if(!this.feedbackPopup)try{const u=(await we(async()=>{const{default:h}=await Promise.resolve().then(()=>gt);return{default:h}},void 0,I.meta.url)).default;if(typeof u!="function")return;this.feedbackPopup=new u}catch{}}}D("i",Object.freeze(Object.defineProperty({__proto__:null,default:lt},Symbol.toStringTag,{value:"Module"})));const ht=["Bug","Game is choppy","Audio issue","Deformed graphics","Low FPS","Other"];class pt{constructor(){E(this,"popup");E(this,"title");E(this,"screenshot");E(this,"feedback");E(this,"okButton");E(this,"noButton");E(this,"screenshotButton");E(this,"okCallback");E(this,"noCallback");E(this,"screenshotCallback");E(this,"feedbackSelections",[]);E(this,"onYes",f=>{this.okButton.removeEventListener("click",this.okCallback),this.okCallback=this.handleCallback(f),this.okButton.addEventListener("click",this.okCallback,{once:!0})});E(this,"onNo",f=>{this.noButton.removeEventListener("click",this.noCallback),this.noCallback=this.handleCallback(f),this.noButton.addEventListener("click",this.noCallback,{once:!0})});E(this,"onScreenshot",f=>{this.screenshotButton.removeEventListener("click",this.screenshotCallback),this.screenshotCallback=this.handleCallback(f,!1),this.screenshotButton.addEventListener("click",this.screenshotCallback)});E(this,"handleCallback",(f,u=!0)=>h=>{h.stopImmediatePropagation(),u&&this.hide(),f(),this.disableScreenshotButton()});this.createPopupElement(),this.addPopupElementStyle();const f=new MutationObserver(()=>{document.getElementById("GameDiv")&&this.setupPopupElementSizeAndPosition()}),u={attributes:!0,childList:!0,subtree:!0},h=document.body;f.observe(h,u)}createPopupElement(){const f=this.getPopupHTML(),u=this.createElement(f);this.setupPopupStyles(u),this.initializeElements(u)}createElement(f){const u=document.createElement("div");return u.id=this.constructor.name,u.innerHTML=f,document.body.appendChild(u),u}setupPopupStyles(f){f.style.width="100%",f.style.height="100%",f.style.position="absolute",f.style.backgroundColor="#0000001f",f.style.alignItems="center",f.style.justifyContent="center",this.popup=f,this.popup.style.display="none",f.style.setProperty("--popup-bg-color","#161616"),f.style.setProperty("--popup-width","100%"),f.style.setProperty("--popup-height","100%")}initializeElements(f){this.title=this.getElement(f,".popup__title"),this.screenshot=this.getElement(f,".popup__screenshot img"),this.feedback=this.getElement(f,".popup__field"),this.okButton=this.getElement(f,".popup__btns .btn:nth-child(2)"),this.noButton=this.getElement(f,".popup__close"),this.screenshotButton=this.getElement(f,".popup__btns .btn:first-child"),this.setInitialFeedbackText(),this.createFeedbackSelections(f)}getElement(f,u){return f.querySelector(u)}setInitialFeedbackText(){this.feedback.placeholder="Please enter your feedback here",this.title.innerText="Feedback"}createFeedbackSelections(f){const u=this.getElement(f,".popup__selections");for(const h of ht){const b=this.createFeedbackSelection(h);u.appendChild(b),this.feedbackSelections.push(b)}}createFeedbackSelection(f){const u=document.createElement("div");u.classList.add("selection"),u.innerHTML=this.getSelectionHTML();const h=u.querySelector(".label");h.innerText=f;const b=u.querySelector(".checkbox");return b.addEventListener("click",()=>{b.classList.toggle("checked")}),u}addPopupElementStyle(){const f=this.createStyleElement(),u=this.getPopupCSS();this.appendStyleToHead(f,u)}createStyleElement(){const f=document.createElement("style");return f.id="feedback-async-popup-style",f}appendStyleToHead(f,u){const h=document.head||document.getElementsByTagName("head")[0];f.appendChild(document.createTextNode(u)),h.appendChild(f)}setupPopupElementSizeAndPosition(){const f=document.getElementById(this.constructor.name);if(!f)return;const u=f.querySelector(".popup");if(!u||!document.getElementById("GameDiv"))return;const b=500,{width:k,height:$}=document.body.getBoundingClientRect(),Q=u,z=k<550?k/550:1,T=$<800?$/800:1;Q.style.width=`${b}px`,Q.style.scale=`${Math.min(z,T)}`}disableScreenshotButton(){this.screenshotButton.classList.add("disabled"),this.screenshotButton.innerHTML="<p>Captured</p>"}getFeedback(){const f=this.feedbackSelections.reduce((u,h)=>{if(!h.querySelector(".checkbox.checked"))return u;const k=h.querySelector(".label");return u+(u?", ":"")+k.innerText},"");return this.feedback.value?`${f}: ${this.feedback.value}`:f}getScreenshot(){return this.screenshot.src}setScreenshot(f){this.screenshot.src=f}show(f=""){this.feedback.value=f,this.popup.style.display="flex";for(const u of this.feedbackSelections)u.querySelector(".checkbox").classList.remove("checked")}hide(){this.popup.style.display="none"}getPopupHTML(){return`
        <div class="popup">
            <h2 class="popup__title"></h2>
            <div class="popup__screenshot">
                <img src="" alt="Screenshot" />
            </div>
            <div class="popup__selections">
                <!-- Feedback selections will be dynamically added here -->
            </div>
            <textarea class="popup__field" placeholder="Please enter your feedback here"></textarea>
            <div class="popup__btns">
                <button class="btn" id="screenshot-button"><p>Take a screenshot</p></button>
                <button class="btn" id="ok"><p>Send</p></button>
            </div>
            <button class="popup__close"></button>
        </div>`}getSelectionHTML(){return`
        <div class="checkbox">
            <div class="check-mark"></div>
        </div>
        <div class="label"></div>`}getPopupCSS(){return`
        :root {
            --popup-bg-color: rgba(26, 26, 26, 0.9);
            --button-bg-color: #4f4f4f;
            --button-disabled-bg-color: #7f7f7f;
            --field-bg-color: #333;
            --field-placeholder-color: #a27860;
        }

        .popup {
            color: #fff;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            background-color: var(--popup-bg-color);
            border-radius: 20px;
        }

        .popup__title {
            font-size: 2rem;
            font-weight: bold;
            margin-bottom: 1rem;
        }

        .popup__btns {
            display: flex;
            flex-direction: column; /* Stack buttons vertically */
            width: 100%;
        }

        .btn {
            padding: 1rem;
            border-radius: 0.5rem;
            border: none;
            cursor: pointer;
            background-color: var(--button-bg-color);
            margin-bottom: 0.5rem;
        }

        .btn p {
            color: #fff;
            margin: 0;
            font-size: 1.5rem;
            font-weight: bold;
        }

        .btn.disabled {
            background-color: var(--button-disabled-bg-color);
            cursor: not-allowed;
        }

        .popup__close {
            position: absolute;
            top: 1.5rem;
            right: 1.5rem;
            background-color: #4f4f4f;
            border: none;
            width: 2rem;
            height: 2rem;
        }

        .popup__field {
            width: 100%;
            height: 150px;
            font-size: 1rem;
            padding: 1rem;
            resize: none;
            margin-bottom: 1rem;
            border: none;
            outline: none;
            background-color: var(--field-bg-color);
            color: #fff;
            overflow: hidden;
        }

        .popup__field::placeholder {
            color: var(--field-placeholder-color);
        }

        .popup__screenshot {
            width: 100%;
            display: none;
            justify-content: center;
            margin-bottom: 1rem;
        }

        .popup__screenshot img {
            width: 100%;
            aspect-ratio: 16 / 9;
            object-fit: cover;
            border-radius: 0.5rem;
        }

        .popup__selections {
            display: flex;
            flex-direction: column;
            width: 100%;
            margin-bottom: 1rem;
        }

        .selection {
            display: flex;
            align-items: center;
            margin: 0.5rem 0;
            font-size: 24px;
        }

        .selection .checkbox {
            width: 1.5rem;
            height: 1.5rem;
            margin-right: 1rem;
            cursor: pointer;
            position: relative;
            background-color: white;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .selection .checkbox .check-mark {
            display: none;
            width: 1rem;
            height: 1rem;
            background-color: green;
            border-radius: 50%;
        }

        .selection .checkbox.checked .check-mark {
            display: block;
        }`}}const gt=Object.freeze(Object.defineProperty({__proto__:null,default:pt},Symbol.toStringTag,{value:"Module"}))}}});
